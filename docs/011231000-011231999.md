# StackOverflow 问答 11231000-11231999

# python-2.7 - 在开发站点中看不到代码中的克隆更改

> ID：11231000
> 
> 赞同：0
> 
> 时间：2012-06-27T16:33:03.003
> 
> 标签：python-2.7, plone, zope

我对克隆很陌生。我在eclipse中有一个项目文件夹。我已经从 cvs 项目中导入了它。我有 zope 作为服务器，我从 zope 开始`./bin/instance restart`。当我在我的文件夹中进行更改时，我看不到开发网站中的更改。我似乎无法找到正在发生的事情。在对 python 进行更改后，我什至重新启动了 zope。谁能帮我这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T23:46:02.183

确保使用 启动 Zope 服务器`bin/instance fg`，如果您使用 Plone 通用安装程序构建，则很可能是脚本的名称。

要查看 python 代码的更改，您需要重新启动服务器（CTRL-C 然后重新启动）或使用类似[`plone.reload`](https://pypi.python.org/pypi/plone.reload)请求重新加载更改的代码。

使用该`fg`命令启动服务器时，它会自动以调试模式运行，并且会自动重新加载任何模板、资源和皮肤项。`console`使用or启动服务器，`start`它将在生产模式下运行，模板等仅从磁盘加载一次。

有关更多信息，请参阅有关构建的[Plone.org 文档](http://plone.org/documentation/manual/developer-manual/managing-projects-with-buildout/creating-a-buildout-for-your-project)。

该`bin/instance`命令有一个内置的帮助命令，试试：

```
bin/instance help 
```

获取支持的命令列表或运行：

```
bin/instance help console 
```

获得有关特定命令的帮助；上面的示例将打印`console`命令的帮助。

# sharepoint - 哪个字段包含 SharePoint 搜索索引中的“创建日期”？

> ID：11231004
> 
> 赞同：3
> 
> 时间：2012-06-27T16:33:29.570
> 
> 标签：sharepoint, search, wss, sharepoint-search

我们需要按创建日期从 Sharepoint Search Server Express 索引中列出文档、列表项等。问题是我们无法在索引中找到它，即使我们尝试将它映射到我们能想到的所有内容。

![显示创建日期的 SharePoint 属性](../Images/a84a1679fd8755412a404fb4493047ee.png)

在中央管理/共享服务管理中，您将转到搜索管理页面。我添加了我能找到的大多数日期/时间字段的元数据属性，这可能是我正在寻找的创建日期。我已经尝试了以下所有属性，但它们都没有返回我正在寻找的日期。

![我们尝试过的所有领域](../Images/407b3806b206b15a479b245a98a735d7.png)

然后我“重置所有爬取的内容”并运行完整的爬取。

我们使用的是 Search Server Express 2008 和 WSS 3。我们调用 Microsoft.Office.Server.Search.Query.FullTextSqlQuery 来返回数据。

我们使用这样的查询：

@"SELECT Title, SiteName, SiteTitle, Write, Path, Filename, ListId, ListItemId, Created, CreatedBasic14, CreatedBasic16, CreatedBasic4, CreatedDC, CreatedOffice10, CreatedOffice11, CreatedOffice13, CreatedStartDate, CreatedStartDate1, CreatedPublishedDate, CreatedDateOpened FROM portal..scope() WHERE (CONTAINS (contentclass,'STS_ListItem_DocumentLibrary')) AND ContentType <> 'Folder' AND (SITE='" + SPContext.Current.Site.Url + "')

我的问题是我必须设置什么属性才能获得正确的创建日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:01:02.350

**将“ Created** ”映射到“ **Basic:15(Date and Time)** ”以获取列表项的创建日期。

[由 Maksymilian Mulawa 在 sharepoint.stackexchange.com 上回答](https://sharepoint.stackexchange.com/questions/40027/what-field-contains-the-created-date-in-a-sharepoint-search-index/40106#40106)

# c# - 将代码添加到文本块时出现空指针

> ID：11231005
> 
> 赞同：1
> 
> 时间：2012-06-27T16:33:35.877
> 
> 标签：c#, microsoft-metro

我正在尝试将时间插入文本块，但由于某种原因它说它不是空的？我错过了任何代码吗？

```
DateTime localtime = DateTime.Now;
        DateTime universal = localtime.ToUniversalTime();
        txtm12.Text = universal.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:38:50.290

检查以确保您的 txtm12 （我假设的文本框）已正确初始化。如果还没有，那么它将抛出一个空引用异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:43:02.237

我已经尝试了您提供的代码，它似乎返回了一个很好的结果。当您尝试为其分配值时，您的控件似乎为空。确保您的控件没有被放置在其他地方，并且在您为其赋值之前它是否已完全呈现。

```
DateTime localtime = DateTime.Now;
DateTime universal = localtime.ToUniversalTime();

if(txtm12 == null)
    Console.WriteLine("Textbox not yet initialised");
else
    txtm12.Text = universal.ToString(); 
```

要考虑的另一点是您将值分配给控件的位置。如果它在构造函数中，请将其删除并放置在表单加载方法中。

# java - OOP 二十一点游戏（创建甲板）

> ID：11231008
> 
> 赞同：2
> 
> 时间：2012-06-27T16:33:40.677
> 
> 标签：java, oop, blackjack

我正在尝试创建一个 OOP 友好的 Java BlackJack 游戏来提高我的知识。

我碰壁了，我只是不知道怎么看问题。想知道是否有人可以指出我的问题。

此外，在谷歌搜索相关主题后，我发现人们一次又一次地说使用枚举会更有益，作为初学者会被建议这样做吗？或者我应该暂时坚持使用字符串数组。

谢谢你。

我的代码：

```
public class BlackJack{

BlackJack() {
    Deck deck =  new Deck();
    deck.createDeck();
    System.out.println(deck.deckList);
}

public static void main(String[] args) {

    new BlackJack();

   }
}

public class Card{

private String valueCard;
private String suitCard;

public Card(String value, String suit) {
    this.valueCard = value;
    this.suitCard = suit;
}

public String getValue() {
    return valueCard;
}
public String getSuit() {
    return suitCard;
  }
}

import java.util.ArrayList;

public class Deck {

ArrayList<Card> deckList = new ArrayList<Card>();

String[] value = {"Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten",
        "Jack", "Queen", "King", "Ace"};
String[] suit = {"Hearts", "Clubs", "Spades", "Diamonds"};

Deck() {

    deckList = new ArrayList<Card>();

}

public void createDeck() {
    for (int i = 0; i < value.length; i++) {
        for (int x = 0; x < suit.length; x++) {
            Card card = new Card(value[i], suit[x]);
            deckList.add(card);

          }
      }
  }
} 
```

编辑：目前我的 println 输出是：[Card@addbf1, Card@42e816, Card@9304b1, ... etc] 这是什么意思？

感谢您的时间。

编辑：将来还需要回答这个问题的任何人：

添加：

```
 @Override
public String toString(){
    return valueCard + " of " + suitCard;
}
 } 
```

到我的 Card 类，然后在 Deck 类中使用它：

```
import java.util.ArrayList;

public class Deck {

ArrayList<Card> deckList = new ArrayList<Card>();

String[] value = {"Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten",
        "Jack", "Queen", "King", "Ace"};
String[] suit = {"Hearts", "Clubs", "Spades", "Diamonds"};

Deck() {

    deckList = new ArrayList<Card>();

}

public void createDeck() {
    for (int i = 0; i < value.length; i++) {
        for (int x = 0; x < suit.length; x++) {
            Card card = new Card(value[i], suit[x]);
            deckList.add(card);
            card.toString();
        }
    }
}
} 
```

枚举：公共类 CardEnum {

```
public enum Rank { DEUCE, THREE, FOUR, FIVE, SIX,
    SEVEN, EIGHT, NINE, TEN, JACK, QUEEN, KING, ACE }

public enum Suit { CLUBS, DIAMONDS, HEARTS, SPADES }

}

public class Card{

private CardEnum.Rank rank;
private CardEnum.Suit suit;

public Card(CardEnum.Rank rank, CardEnum.Suit suit) {
    this.rank = rank;
    this.suit = suit;
}

public Rank getRank() {
    return rank;
}
public Suit getSuit() {
    return suit;
}

@Override
public String toString(){
    return rank + " of " + suit;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:36:17.923

根据您的编辑，我看到您的代码正在打印出 Object`toString()`方法返回的默认值，即当前对象的类的名称和对象的 hashCode。要纠正这个问题并使您的字符串有意义，您必须为每个类提供一个`public String toString()`方法覆盖。Card 类应该有一个 toString() 方法，该方法返回一个描述当前卡片的花色和价值的 String，Deck 类应该遍历每张卡片并调用卡片的 toString()。

就像是：

```
@Override
public String toString() {
  return /* code in here to get the contents of the fields held by the Card object */
} 
```

**编辑**关于：

> 我正要深入研究枚举我只是好奇，因为我正在看：docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html 但我有两个单独的类：Card & Deck . 我是否必须将两组枚举复制到两个类中才能正常工作？所以我有 Card{ enum declaration, private final's, card(Value value, Suit suit) {} 那么在甲板类中我是否必须再次复制枚举列表？有点困惑我的套牌和卡片类将如何使用枚举。感谢您对 noobie 的耐心等待！

不，该示例中的枚举的行为就好像它们被声明为 public static - 所以它们不需要 Card 实例来访问并且在 Card 类之外可用。你只需要让他们有资格使用它们。即 Card.Rank.FOUR 访问 Rank 的 FOUR 实例。所以总而言之，您不必在任何地方重新声明枚举。我个人认为将每个枚举放在自己的文件中，与 Card 类在同一个包中，但不在同一个文件中，这样会更干净。

**编辑 2** 你说：

> 好的，我已经创建了 public class CardEnum { public enum RANK {//ranks} public enum Suit { //suits} 如何让它与我的 Card 类交互？

您将给 Card 两个*私有*字段，一个是 CardEnum.Rank 类型（请注意，枚举名称不应全部为大写）和一个 CardEnum.Suit 类型。然后，您将在 Card 的构造函数中分配这些值。我会让这个类“不可变”，这意味着一旦你为一张牌设置了等级和花色，就永远不允许改变它。所以我会给每个字段一个getter方法，但我不会给它一个setter方法。

所以

```
public class Card {
  private CardEnum.Suit suit;
  private CardEdum.Rank rank;

  public Card(CardEnum.Suit suit, CardEnum.Rank rank) {
     this..... etc...
  }

  // getter methods here, but no setter methods

  // .... 
```

**编辑 3**

> 我的 get 方法的最后一个问题： public Rank getRank() { return rank; } 给出错误：“无法解决排名”我已经用我当前的代码编辑了我的主要帖子，以使其易于阅读。

您已将 Rank 枚举嵌入到 CardEnum 类中，因此您必须使用 CardEnum 类名称限定 Rank 和 Suit。因此你会这样做：

```
public CardEnum.Rank getRank() {
   return rank;
} 
```

摆脱所有多余的废话的一个建议 - 完全摆脱 CardEnum，而是将每个枚举放在自己的文件中，一个 Rank.java 文件和一个 Suit.java 文件。IE

```
// this guy goes in the Suit.java file
public enum Suit {
   CLUBS, DIAMONDS, HEARTS, SPADES
} 
```

那么当你提到 Suit 时，你不需要将它称为 CardEnum.Suit。

# sql-server - RIA 服务中的 SQL 服务器模拟

> ID：11231016
> 
> 赞同：1
> 
> 时间：2012-06-27T16:34:10.900
> 
> 标签：sql-server, security, entity-framework, ria, silverlight-5.0

我已经使用 silverlight 5 部署了 RIA 应用程序。我正在使用实体框架来管理 SQL Server 2008 R2 的数据。

认证方式为Forms，用户由AD识别。

一切工作正常。我可以加载、插入或修改数据，但问题与模拟有关。

我检查了 SQL Server 配置文件，发现 LoginName 是 NT AUTHORITY\Network 服务。这意味着 ASP 模拟不起作用。显然我已经在 IIS 和 we.config 文件中启用了 ASP 模拟。

为什么会这样？

# oracle - 新创建的表上没有日志记录和压缩

> ID：11231019
> 
> 赞同：1
> 
> 时间：2012-06-27T16:34:27.650
> 
> 标签：oracle

我创建了一个这样的表

```
CREATE TABLE pull_dtl
(
    source_schema VARCHAR2(4000),
    source_tablename VARCHAR2(4000),
    db_link VARCHAR2(4000),
    dest_schema VARCHAR2(4000),
    dest_tablename VARCHAR2(4000),
    dest_tablespace VARCHAR2(4000)
) 
```

如何使其“无日志记录”并且我需要“压缩”它？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:39:11.173

要启用`NOLOGGING`，请运行以下查询

```
ALTER TABLE pull_dtl NOLOGGING; 
```

有关压缩选项，请参见[Oracle 数据库中的表压缩增强。](http://www.oracle-base.com/articles/11g/table-compression-enhancements-11gr1.php)

# android - 为什么要对 Ice Cream Sandwich 的 SocketInputBuffer 进行此更改？

> ID：11231029
> 
> 赞同：2
> 
> 时间：2012-06-27T16:35:05.497
> 
> 标签：android, apache

谁能帮我理解这个“修复”：

[https://www.gitorious.org/rowboat/external-apache-http/commit/e30b5b55806b31d1a61e2885b854dd7b8da1a07a](https://www.gitorious.org/rowboat/external-apache-http/commit/e30b5b55806b31d1a61e2885b854dd7b8da1a07a)

当我阅读 jpg 图像时，它导致我的运动 jpeg (mjpg, mjpeg) 代码变慢。修复对我来说似乎很可怕，完全忽略了传递的参数，因此调用者没有机会调整值。

有没有办法解决这个变化，以便我可以使用更大的缓冲区大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:56:18.973

从提交日志：

> 使 Apache HttpClient 与大型内核套接字缓冲区配合得很好。
> 
> 考虑到可能为 LTE 设备上的内核套接字缓冲区设置的最大大小，我们需要阻止 Apache HttpClient 在堆上为每个套接字分配该大小的整数倍。在一台设备上，16 个 HTTP 连接将填满堆。

这基本上意味着 Android 不信任 LTE 设备来设置自己的缓冲区大小，因为它会过快地填满堆。

作为一种解决方法，请尝试扩展`AbstractSessionInputBuffer`以创建您自己的`SocketInputBuffer`类版本。

# autohotkey - 当快捷方式存在时发送命令

> ID：11231031
> 
> 赞同：1
> 
> 时间：2012-06-27T16:35:10.743
> 
> 标签：autohotkey

我有一个像这样的全局命令

`!i::Send {Up}` （按下`alt+I`将使插入符号向上移动）

有一个应用程序`Alt+I`用作我想调用的操作的快捷方式，同时仍保留我自己的自定义快捷方式。我想将此应用的操作重新映射到`Ctrl+I`

在适当的 WinExists 中，我已经尝试过`^i::Send !{i}` ，但这只是将插入符号向上移动。我试过`^i::!i`了，但发送`Ctrl+Alt+I`而不是`Alt+I`。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:30:01.700

加布，

试试这个...

```
SetTitleMatchMode, 2 ; Accept the title search string to be found anywhere in title

#ifWinnotActive yourappname ; use windowspy to find a unique title string
!i::Send {Up}
#ifWinActive 
```

这将设置 !i 在所有程序中都表现得像你想要的那样，除了你想要保持特殊行为的那个。

或者，您可以在触发器中添加一个 $，这样它们就不会像这样相互调用：

```
$!i::Send, {Up}
$^i::Send, !i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:20:40.453

在每个命令之后，您需要添加命令返回。所以如果你有代码：

```
!i::Send, ^i
return
^i::Send, !i
return 
```

上面的代码反转了`CTRL + i`和的功能`ALT + i.`

# android - 按下按钮android

> ID：11231039
> 
> 赞同：2
> 
> 时间：2012-06-27T16:35:40.897
> 
> 标签：android, android-widget

我想在按下按钮时打印一些东西（而不是在释放按钮之后）。目前我有这个，但它只能工作一次......

```
button.setOnTouchListener(new View.OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            System.out.println("pressed");
            return true;
        }
        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:55:37.417

System.out 在 Android 设备中不起作用（不会在设备上向您显示任何内容），如果您有文本视图，您可以`MotionEvent.ACTION_DOWN`像已经在做的那样在您的设备上设置文本，并在`MotionEvent.ACTION_UP`您设置您的文本文本视图为空。像这样的东西：

```
public class TestActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);
        final TextView textView = (TextView) findViewById(R.id.textview);
        final Button button = (Button) findViewById(R.id.button);
        button.setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction() == MotionEvent.ACTION_DOWN){
                    textView.setText("Button Pressed");
                }
                if(event.getAction() == MotionEvent.ACTION_UP){
                    textView.setText(""); //finger was lifted
                }
                return true;
            }

        });
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:53:18.290

尝试此操作以在您按下时连续打印按下的消息。

```
button.setOnTouchListener(new View.OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
            System.out.println("pressed");
            return false;
    }
}); 
```

# batch-file - 设置不是在这个时候，批次？

> ID：11231040
> 
> 赞同：1
> 
> 时间：2012-06-27T16:35:41.757
> 
> 标签：batch-file

好的，所以我在这台 Windows XP 计算机上批量编写了这个小游戏。当我运行以下代码时，我得到“此时不需要设置”（对不起，它真的很长，我还没有把它变小。*注意*我没有要求你把我的代码变小，所以请不要做）：

```
 @echo off 
    set str=0
    set int=0
    set agi=0
    set dex=0
    goto chrselect

    :chrselect
    cls
    echo Character select!
    echo.
    echo 1) mage
    echo.
    echo 2) swords man
    echo.
    echo 3) archer
    set /p start=-
    if %start%==1 goto skillsetupm
    if %start%==2 goto skillsetups
    if %start%==3 goto skillsetupa 

    :skillsetupm
    set health=50
    set mana=100
    set str=3
    set int=6
    set agi=5
    set dex=4 
    set chr=m1
    goto skillsee

    :skillsetups
    set health=100
    set mana=50
    set str=6
    set int=4
    set agi=3
    set dex=5
    set chr=s1
    goto skillsee

    :skillsetupa
    set health=75
    set mana=75
    set str=3
    set int=4
    set agi=6
    set dex=5
    set chr=a1
    goto skillsee 

    :skillsee
    cls
    echo Skills as is: 
    echo.
    echo Strength: %str%
    echo Intelligence: %int%
    echo Agility: %agi%
    echo Dexterity: %dex%
    echo.
    echo 1) Choose new character
    echo.
    echo 2) Continue to see how stats influence combat!
    set /p start=-
    if %start%==1 goto chrselect
    if %start%==2 goto skillc

    :skillc
    set /a handattk=3+%str%
    set /a magicattk=2+%str%+%dex% 
    set /a block=%agility%+%dex%
    set /a blockchnc=%block%*5
    set /a bowattk=3+%str%+%dex%
    set /a swrdattk=4+%str%+%dex%
    set /a slowchnc=%str%*4
    if %chr%==m1 goto skillcinf
    if %chr%==s1 goto skillcinf
    if %chr%==a1 goto skillcinf

    :skillcinf
    cls
    echo Skill stuff!
    echo.
    echo Hand attack: %handattk%
    echo.
    echo Block chance: %blockchnc% %
    echo.
    echo Slow chance: %slowchnc% %
    echo.
    if %chr%==m1 echo Magic attack: %magicattk%
    if %chr%==s1 echo Sword attack: %swrdattk%
    if %chr%==a1 echo Bow attack: %bowattk%
    echo.
    echo 1) Choose new character(last chance)
    echo.
    echo 2) Start game
    set /p start=-
    if %start%==1 goto chrselect
    if %start%==2 goto menue

    :menue
    cls
    set bossh=500
    set exp=0
    set playcount=0
    echo                          Health:///%health%///
    echo                          Mana:////%mana%////
    echo                          Experience:////%exp%///// 
    echo                          Play count: %playcount%
    echo Battle?(y/n) 
    set /p start=-
    if %start%==y goto battle
    if %start%==n goto menue

    :battle 
    set /a playcount=%playcount%+1
    cls
    echo                          Health:///%health%///
    echo                          Mana:////%mana%////
    echo                          Experience:////%exp%///// 
    echo                          Play count: %playcount%  
    echo Attack Dragon(Health:%bossh%) with?
    echo.
    echo 1-Hand(%handattk% damage)
    echo.
    echo 2-Block(%blockchnc% % chance of blocking)
    echo.
    if %chr%==m1 echo 3-Magic attack(%magicattk% damage)
    if %chr%==s1 echo 3-Sword Attack(%swrdattack% damage)
    if %chr%==a1 echo 3-Bow Attack (%bowattk% damage)
    set /p start=-
    pause >nul
    if %start%==1 set /a bossh=%bossh%-%handattk%
    if %start%==2 set /a blockrandm=%random% %%100
    goto battle2
    if %start%==3 goto spclattk

    :spclattk
    cls
    if %chr%==m1 set /a bossh=%bossh%-%magicattk%%
    if %chr%==s1 set /a bossh=%bossh%-%swrdattk%
    if %chr%==a1 set /a bossh=%bossh%-%bowattk%
    goto battle2

    :battle2
    if %bossh% leq 0 goto win
    set /a bossd=%random% %%5 
    if %blockrandm%==%blockchnc% set bossd=0
    set /a health=%health%-%bossd%
    cls
    echo                          Health:///%health%///
    echo                          Mana:////%mana%////
    echo                          Experience:////%exp%///// 
    echo                          Play count: %playcount% 
    echo Attack Dragon(Health:%bossh%) with?
    echo.
    echo 1-Hand(%handattk% damage)
    echo.
    echo 2-Block(%blockchnc% % chance of blocking)
    echo.
    if %chr%==m1 echo 3-Magic attack(%magicattk% damage)
    if %chr%==s1 echo 3-Sword Attack(%swrdattack% damage)
    if %chr%==a1 echo 3-Bow Attack (%bowattk% damage)
    set /p start=-
    if %start%==1 set /a bossh=%bossh%-%handattk%
    if %start%==2 set /a blockrandm=%random% %%100
    if %start%==3 goto battleattk
    goto battle2 
```

每当我进入 :battle 屏幕并按下一个选项时，我都没有预料到我会被设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:51:16.583

当您到达时，您的变量`%blockrandm%`未初始化，`:battle2`因此第 148 行的比较显示为

```
if ==0 set bossd=0 
```

这显然是无效的语法。您可以通过引用比较的双方来避免它（在编写此类代码时，这在几乎所有情况下都是一个*好主意）。*

供将来参考：删除`echo off`并且您至少可以看到是哪条线路负责，并且通常还会看到它失败的原因。

# vim - 如何在 vim 中查找和替换花括号 { }？

> ID：11231041
> 
> 赞同：7
> 
> 时间：2012-06-27T16:35:44.347
> 
> 标签：vim, replace

我试过`:s%/{//g`了`:s%/\{//g`。如何在 vim 中查找和替换（实际上是删除）大括号？

谢谢。

编辑：我的意思是在 s 之前有 %，所以我可能只是输入错误。感谢大家的快速回复。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T16:39:36.777

@chaos 的扩展

字符（即：左大`{`括号，不要与括号`[`或括号混淆`(` ）
......不需要转义。

您可能的意思是删除所有大括号。百分号应该在's'之前，而不是之后。这意味着在所有范围内执行搜索。

因此，只需执行以下操作：

```
:%s/{//g
:%s/}//g 
```

全部做完！

您应该考虑阅读 VIM 范围。例如，要在当前行和最多 10 行下进行替换，您可以执行以下操作：

```
:.,.+10s/}//g 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T16:37:35.387

`:s/{//g`工作正常。你到底为什么要把它放在`%`后面`s`？通过这样做，您将指示`%`为您的正则表达式分隔符，这使您的模式的其余部分不起作用，因为它的编写就像`/`您的分隔符一样。

哦，我明白了，你的意思是`:%s/{//g`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T16:38:08.603

您应该在整个文件中替换它`%`之前`s`，不仅在当前行：

```
:%s/{//g 
```

# php - 如果 url 在数据库中匹配，如何在 PHP 中为 $query 分配和输出字符串“name”

> ID：11231048
> 
> 赞同：0
> 
> 时间：2012-06-27T16:36:08.250
> 
> 标签：php, mysql, sql, database

我有这个从数据库输出 URL 和点击计数的工作查询。

```
<?php
$query = "SELECT *,count(*) FROM db_data WHERE ip GROUP BY data_url";
    $sampleCount = mysql_query($query);
    $result = mysql_query($query);
    if($sampleCount > 0) {
        while ($row =mysql_fetch_array($result)) {
            $dataList_br .= '<div class="info_table">
                                 <div class="info_table1">
                                     <p>' .$row['data_url']. '</p>
                                 </div>
                                 <div class="info_table2">
                                     <p>' .$row['count(*)']. '</p>
                                 </div>
                             </div>';
        }
    } else {
        $dataList_br .= '<p class="warning">No data found in database. Please contact admin.</p>';
    } 
```

这将输出：“/somepath/index.php”和总计数，例如“24”，以及其他具有总命中数的 url 集。

问题：如何将 URL 输出“/somepath/index.php”更改为字符串名称，如“页面名称”，而不是显示 URL。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:57:26.257

使用它，您将能够显示页面标题而不是 URL

```
//let a url be so 
$url = 'http://google.com';

function file_get_contents_curl($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    $data = curl_exec($ch);
    $info = curl_getinfo($ch, CURLINFO_CONTENT_TYPE);
    return $data;
}

//fetching url data via curl
$html = file_get_contents_curl($url);

if($html) {
    //parsing begins here
    $doc = new DOMDocument();
    @$doc->loadHTML($html);
    $nodes = $doc->getElementsByTagName('title');
    $title = $nodes->item(0)->nodeValue;
    echo $title;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:08:52.660

有三种方法可以做到这一点：

1.  您可以在表格中多放一列，其中将包含 url 的页面名称。您可以简单地使用它。
2.  您可以将映射作为关联数组放入常量文件中。您可以从中获取该 url 的页面名称值。
3.  您可以像这样简单地将这种情况放在您的代码中：

    ```
    $query = "SELECT *,count(*) FROM db_data WHERE ip GROUP BY data_url";
    $sampleCount = mysql_query($query);
    $result = mysql_query($query);
    if($sampleCount > 0) {
        while ($row =mysql_fetch_array($result)) {
            $dataList_br .= '<div class="info_table">
                                 <div class="info_table1">
                                     <p>' .
    if($row['data_url'] == "/somepath/index.php"){
         $html = file($row['data_url']);
         //or file_get_contents() method can be used.
         print_r($test['title']); // put index as per the html
    }else{
        echo $row['data_url']
    }. '</p>
                                     </div>
                                     <div class="info_table2">
                                         <p>' .$row['count(*)']. '</p>
                                     </div>
                                 </div>';
            }
        } else {
            $dataList_br .= '<p class="warning">No data found in database. Please contact admin.</p>';
        } 
    ```

您可以使用[file()](http://www.php.net/manual/en/function.file.php)或[file_get_contents](http://www.php.net/manual/en/function.file-get-contents.php)。不同之处在于 file() 返回数组，而另一个返回字符串。

# facebook - Facebook XFBML“喜欢”按钮不会为我的每个页面制作单独的喜欢按钮

> ID：11231054
> 
> 赞同：0
> 
> 时间：2012-06-27T16:36:24.513
> 
> 标签：facebook, facebook-like, xfbml

我是一个相当初级的程序员，试图让 XFBML 的“喜欢”按钮在我的网站上正确工作......我选择了 XFBML，所以我不必手动输入每个按钮的 URL - 我使用了很多模板，并希望能够快速轻松地更新所有内容。

但我的页面中大约有一半似乎共享一个点赞按钮——奇怪的是，另一半都有自己的点赞按钮，甚至是使用与第一组相同模板的页面。我该如何解决？我已经看到一些关于自动生成不同的类似按钮的博客的东西，但我不确定它是否会起作用，因为这是一个普通的旧网站，每个页面都是不同的 URL。我已经在网上到处搜索了，我还没有看到其他人遇到这个问题。如果有帮助，该网站位于 www.millerandcampbell.com。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:48:56.523

以后请使用[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)来调试这样的问题。

它[清楚地表明](https://developers.facebook.com/tools/debug/og/object?q=http://www.millerandcampbell.com/rental.html)fe 为`http://www.millerandcampbell.com/rental.html`您提供基地址`http://www.millerandcampbell.com`作为值的页面`og:url`- 当然，like 按钮尊重该值，因此喜欢后一个 URL。

如果您不希望这样 - 然后设置为您的子页面`og:url`的*实际地址。*

# objective-c - 使用 uitabbarcontroller 管理 iOS 中的套接字

> ID：11231059
> 
> 赞同：1
> 
> 时间：2012-06-27T16:36:29.087
> 
> 标签：objective-c, ios, sockets, uitabbarcontroller

首先，对不起我的英语......我正在开发一个具有 UITabBarController 的 iOS 应用程序。我想从此 UITabBarController 初始化套接字，以管理应用程序内部发生的任何事件。

问题是我不知道该怎么做。使用我的套接字，我可以将消息发送到服务器并从该服务器接收它们。如果我在其他选项卡项目中，我想接收事件。

这是我创建套接字的代码：

```
- (void) initNetworkCommunication {

CFReadStreamRef readStream;
CFWriteStreamRef writeStream;
CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"212.227.52.247", 9191,  &readStream, &writeStream);

inputStream = (__bridge NSInputStream *)readStream;
outputStream = (__bridge NSOutputStream *)writeStream;
[inputStream setDelegate:self];
[outputStream setDelegate:self];
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[inputStream open];
[outputStream open];

[self activarUsuario];
} 
```

我有一个发送消息的视图，但我想在我的 UITabBarController 中的所有视图中处理事件，比如 WhatsApp 她你收到一条新消息......

有人能帮助我吗？

我已经在谷歌搜索了几天，但我没有找到任何东西......

非常感谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:57:56.010

也许您可以将您的套接字通信代码移动到另一个类，可能是 App Delegate 或另一个单例类型类。每当您收到事件时，您都可以使用默认值`NSNotificationCenter`以及包含您收到的事件的数据字典发布该信息。

完成此操作后，您可以让每个实例注册以使用该方法`UIViewController`接收通知。`NSNotificationCenter` `addObserver:selector:name:object:`每当您的`UIViewController`实例收到通知时，它都会调用您在选择器中指定的方法。

当您在套接字代码中收到事件时，您可以像这样发布通知

`[[NSNotificationCenter defaultCenter] postNotificationName:@"MY_NOTIFICATION_TYPE" object:sender userInfo:yourDictionaryOfEventData];`

您可以像这样在方法中注册通知`UIViewController` `viewWillAppear:`...（如果您想在视图不可见/加载时收到通知，您可以在 init 中执行此操作）

`[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receivedEvent:) name:@"MY_NOTIFICATION_TYPE" object:sender];`

最后，不要忘记取消注册`viewWillDisappear:`. `UIViewController`（或者如果您在 init 中为它们注册，则为 dealloc）

`[[NSNotificationCenter defaultCenter] removeObserver:self name:@"MY_NOTIFICATION_TYPE" object:sender];`

[NSNotification 苹果文档](https://developer.apple.com/documentation/foundation/nsnotificationcenter)

# entity-framework - Linq 到实体和泛型 - 无法转换

> ID：11231063
> 
> 赞同：1
> 
> 时间：2012-06-27T16:36:38.980
> 
> 标签：entity-framework, generics, interface, linq-to-entities

我有两个用户界面：

```
public interface IUserModel
{
    int UserId {get;set;}
}

public interface IUserAuthModel : IUserModel
{
    string Username {get;set;}
    string Password {get;set;}
} 
```

我有实现 IUserAuthModel 的用户模型，因为它需要访问权限检查：

```
public class UserSubscriptionModel : IUserAuthModel
{
    public int UserId {get;set;}
    public string Username {get;set;}
    public string Password {get;set;}
    public bool Subscribed {get;set;}
} 
```

我有基于 EF 4.3.1 的用户存储库，其中有投影方法：

```
IQueryable<T> ProjectTo<T>() where T: IUserModel
{
    if(typeof(T) == typeof(UserLoginModel)
    {
        return db.Users.Select(x => new UserSubscriptionModel {
        UserId = x.UserId,
        Username = x.Username,
        Password = x.Password,
        Subscribed = x.Subscribed
    }) as IQueryable<T>;
} 
```

我有根据条件表达式检索一个用户的方法：

```
T Get<T>(conditionalexpression) where T : IUserModel
{
    return ProjectTo<T>.Where(conditionalexpression).FirstOrDefault();
} 
```

我正在实施授权方法：

```
public bool Authorize<T>(string username, string password, out T TUser) where T : IUserAuthModel
{
    TUser = Get<T>(x => x.Username == username && x.Password == password);
     ... some other irrelevant code
} 
```

然后我执行以下操作：

```
UserSubscriptionModel model;
bool authorized = Authorize<UserSubscriptionModel>("hello","world", out model); 
```

此代码在尝试提取 FirstOrDefault 的部分失败。它说 Linq to Entities 支持转换原始类型......不能从 UserSubscriptionModel 转换为 IUserAuthModel - 或其他方式，不记得了。但重点是，我的泛型不起作用，即使 IUserAuthModel 从 IUserModel 继承，所以如果我的类实现 IUserAuthModel 它也实现 IUserModel。

我错过了什么？我没有收到任何错误/警告，并且我确保我的继承正确完成（或者至少我认为是这样）。

如果代码有一些拼写错误，我很抱歉，我在工作中留下了真实的代码。

感谢所有的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-09T17:41:44.003

Entity Framework 需要知道您投影到的通用参数可以是普通的 ol' 对象或某种类型的结构，否则它只能将其推断为`IUserModel`. 如果您添加另一个类型约束，告诉它`T`始终是其中之一（取决于您的域模型；您可能正在使用类）：

```
IQueryable<T> ProjectTo<T>() where T: class, IUserModel 
```

（或者这个，如果你所有的`IUserModel`s 都是结构：）

```
IQueryable<T> ProjectTo<T>() where T: struct, IUserModel 
```

该异常应该消失。

请参阅这两个主题，我在其中找到了答案：

[https://stackoverflow.com/a/13701650/183350](https://stackoverflow.com/a/13701650/183350)

[https://stackoverflow.com/a/19847671/183350](https://stackoverflow.com/a/19847671/183350)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T16:11:58.247

而不是作为 IQueryable 返回尝试 linq Cast<>

```
IQueryable<T> ProjectTo<T>() where T: IUserModel
{
    if(typeof(T) == typeof(UserLoginModel)
    {
        return db.Users.Select(x => new UserSubscriptionModel {
        UserId = x.UserId,
        Username = x.Username,
        Password = x.Password,
        Subscribed = x.Subscribed
    }).Cast<T>;
} 
```

# git - 如何让 Jenkins 在推送到 BitBucket git 存储库的基础上进行构建？

> ID：11231064
> 
> 赞同：61
> 
> 时间：2012-06-27T16:36:41.507
> 
> 标签：git, jenkins, bitbucket

我在 BitBucket 上托管了一个 git 存储库，并在存储库和我的 Jenkins 服务器之间设置了 SSH 身份验证。我可以在 Jenkins 上手动构建，但无法让 BitBucket 上的 Jenkins 服务触发构建。

```
Jenkins configuration:  
- Project Name: [my_jenkins_job]  
- Build Triggers:  
--Trigger Builds Remotely:  
---Token: [token]

BitBucket configuration:  
- Endpoint: http://[my_jenkins_address]/job/[my_jenkins_job]/build (I've also tried build?token=[token])  
- Project Name: [my_jenkins_job]  
- Module Name: [blank]  
- Token: [token] 
```

访问**http:// `{my_jenkins_address}`/job/ `{my_jenkins_job}`/build?token=`{token}`**会正确启动构建。

为什么推送对 BitBucket 的更改不会导致 Jenkins 启动构建？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2015-01-31T10:15:16.343

由于 Bitbucket 的 Jenkins Hook 对我来说根本不起作用，而且我为不同的分支有不同的 Jenkins 项目，我来到了这个解决方案：

*   在您的 Jenkins 上安装[Bitbucket 插件](https://wiki.jenkins-ci.org/display/JENKINS/BitBucket+Plugin)
*   将普通的 Post 作为 Hook 添加到您的 Bitbucket 存储库（*Settings -> Hooks*）并使用以下 url：

> https:// *YOUR.JENKINS.SERVER:PORT* /bitbucket-hook/

如果你在 jenkins 上设置了身份验证，那么 URL 必须像

> https:// *USERNAME:PASSWORD@YOUR.JENKINS.SERVER:PORT* /bitbucket-hook/

*   按如下方式配置您的 Jenkins 项目：
*   under **build trigger** enable**将更改推送到 BitBucket 时生成**
*   在**源代码管理**下选择**GIT**；输入您的凭据并定义**要构建的分支**（如***feature/**）

通过这种方式，我有三个构建项目，一个用于所有功能，一个用于开发，一个用于发布分支。确保在 URL 末尾包含斜杠 ('/')，​​否则钩子将不起作用。

最好的是，您不必为新的 Jenkins 项目添加新的钩子。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-06-27T16:44:50.880

我将我们的 Jenkins 实例设置为每分钟轮询存储库。这还不足以满足您的需求吗？

**我们的 Jenkins 配置：**

构建触发器 > 轮询 SCM = 已选中

构建触发器 > 轮询 SCM > 计划 =

```
# every 1 minute
*/1 * * * * 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-21T01:05:14.333

实际上，您可以使用 Bitbucket 服务在 Jenkins 中使用它，但需要一些时间才能使其正常工作。

如果您使用身份验证，则可以从可以创建构建的用户之一获取 API 令牌。我为 Bitbucket 创建了一个单独的帐户。您*至少*需要Jenkins 1.426 才能使用 API 令牌。然后，您可以将 HTTP 身份验证与 API 令牌用作 Bitbucket 服务的密码。

这是我的设置方式：

**端点：** http://[bitbucket]:[APITOKEN]@[www.example.com/jenkins/]

**项目名称：** [NameOfMyJenkinsProject]

**模块名称：** [空]

**令牌：** [在 Jenkins 项目设置中找到的令牌]

在我这样设置之后，我能够使用令牌和身份验证来启用来自 Bitbucket 的推送触发构建。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-09-04T02:07:03.633

如果您在 Jenkins 中使用身份验证，则令牌是无用的。

使用 Git 插件，并在其中使用 POST 挂钩`http[s]://your.site.com[/jenkins]/git/notifyCommit?url=git@bitbucket.org:your-username/your-repo.git`。确保轮询已开启并按某个值安排，否则这将不起作用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-03-30T06:46:33.247

使用 Poll SCM 很好，但是它也有一些缺点，它会从你的 GIT 存储库中获取元数据，无论如何它会使用你的 bitbucket 服务器和 Jenkins 服务器的一定百分比的带宽。

如果有新的更新到来，最好让 Bitbucket 知道何时触发 Jenkins。如果您使用的是 bitbucket 最新版本，则有一个插件名称“Stash webhooks for Jenkins”现在与 Bitbucket 兼容。

在这个插件中，您只需指定 Jenkins URL 和 JOB 名称，这也为 Jenkins 和 Bitbucket 之间提供了额外的安全层。 [![在此处输入图像描述](../Images/9f13ca1912cd6c9e7dd5d15e18c08968.png)](https://i.stack.imgur.com/fpTTB.png)

这是插件（Stash webhooks for Jenkins，不称为 Bitbucket webhooks for Jenkins），可以从 Atlassian Marketplace 下载。

[![在此处输入图像描述](../Images/d29f09d1d08dfdbdbcb4d0a4cb761852.png)](https://i.stack.imgur.com/sOGoT.png) 以上是附加设置，您必须在其中指定 Jenkins URL 和 Repo Clone URL。使用触发器，您还可以检查连接等。

插件链接：[Jenkins 的 Bitbucket webhooks](https://marketplace.atlassian.com/plugins/com.nerdwin15.stash-stash-webhook-jenkins/server/overview)

这个插件是如何工作的：

1.  在 Jenkins 中安装 Git 插件。将您的项目配置为使用 Git 进行源代码管理。您需要将用于配置的存储库 URL 保留在 Stash 中。在 Build Triggers 中启用 Poll SCM 选项。这是远程触发构建所必需的。由于我们真的不需要轮询，您可以将轮询频率设置为非常不频繁地轮询。保存您的项目配置。
2.  输入 Jenkins 实例的 URL 和配置 Jenkins 使用的存储库 URL。您可以使用下拉列表获取每个支持的协议的克隆 URL。之后，随意更改它以匹配您的 Jenkins 实例。
3.  就是这样！

现在配置了 Jenkins 和 Stash，如果您提交代码，将自动发生构建触发器。发生的情况是 post-receive 钩子向 Jenkins 发出 GET 请求，然后告诉它轮询存储库（为什么需要打开轮询）。投票检查是否真的有任何变化。既然有，它就会触发构建！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-11-28T18:40:26.310

只需安装 bitbucket 插件并按照插件页面上的说明进行操作：

> 使用 URL JENKINS_URL/bitbucket-hook（不需要凭据）使用 POST 挂钩配置您的 BitBucket 存储库。每次提交时，将触发所有启用了“将更改推送到 BitBucket 时构建”选项的作业。

见这里：[https ://wiki.jenkins-ci.org/display/JENKINS/BitBucket+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/BitBucket+Plugin)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-26T14:13:52.463

我在这个问题上苦苦挣扎了很久，在 Jenkins 文档中找不到解决方案，我在 Cloudbees 支持站点找到[了一个解决方案。](https://support.cloudbees.com/hc/en-us/articles/115000051132-How-to-Trigger-Multibranch-Jobs-from-Bitbucket-Cloud-#furtherconfiguration)

您只需将这些两个 webhook 添加到您的 bitbucket 存储库中，它就可以正常工作：

```
https://JENKIN_URL/bitbucket-scmsource-hook/notify
https://JENKIN_URL/bitbucket-hook 
```

我为所有管道工作，甚至是 MultiBranch 的。

希望这对某人有帮助；）

ADA

# jquery - e.preventDefault() 仅在第二次起作用

> ID：11231068
> 
> 赞同：0
> 
> 时间：2012-06-27T16:36:46.463
> 
> 标签：jquery, events, preventdefault

所以，我有这样的问题：第一次，然后`<a>`点击`e.preventDefault()`不起作用，我跳到页面顶部，但第二次它起作用了。问题是什么？

```
$('#more a').live('click', function(e) {
    var last = $('p.post').last().data('id');
    console.log('start');
    if (last != '1') {
        $.ajax({
            type: "POST",
            url: "http://live.iappleworld.ru/ajax_more_mobile.php",
            data: "last=" + last,
            beforeSend: function() {
                $('#more a').text('').prepend('<img src="http://live.iappleworld.ru/ajax-loader.gif" alt="loading"/> Loading...');
            },
            success: function(html) {
                $("#more").remove();
                $(html).hide().appendTo('ul.pageitem').slideDown(600);
            }
        });
    }
    e.preventDefault();
}); 
```

在我有另一个脚本之前和之后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:39:00.050

```
$('#more').on('click','a', function(e) {
  e.preventDefault(); // at the beginning stop page reload

  // your code

}); 
```

* * *

### 关于`.on()`

`.on()`委托事件处理的语法：

```
$(container).on(eventName, target, handlerFunction) 
```

元素所属的`container`任何地方，当然容器在页面加载时应该属于 DOM，即它不应该是动态的。`Static element``target`

阅读更多**[`.on()`](http://api.jquery.com/on)**

* * *

### 笔记

`.live()`如果您可以选择使用`jQuery >= 1.7`和绑定委托事件，请尽量避免使用`.on()`.

* * *

### 根据评论

你写过

```
$('#more').live('click','a',function(e) {...}); 
```

但应该是

```
$('#more').on('click','a',function(e) {...}); 
```

* * *

### 另一种选择是将`a`标签更改`href`为

```
<a href="javascript:void(0)"></a> 
```

并删除`e.preventDefault()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:26:39.943

而不是使用 .live 方法，使用`delegate`. 我不确定您的 html 结构，但我认为这可能有效。

```
$('#more').delegate('a','click', function(e) {
  var last = $('p.post').last().data('id');
  console.log('start');
  if (last != '1') {
    $.ajax({
        type: "POST",
        url: "http://live.iappleworld.ru/ajax_more_mobile.php",
        data: "last=" + last,
        beforeSend: function() {
            $('#more a').text('').prepend('<img src="http://live.iappleworld.ru/ajax-loader.gif" alt="loading"/> Loading...');
        },
        success: function(html) {
            $("#more").remove();
            $(html).hide().appendTo('ul.pageitem').slideDown(600);
        }
    });
  }
  e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:13:46.007

听起来第一次访问页面时没有加载任何 javascript 文件。然后您单击该链接并“正常”地跟随它，这会刷新页面并加载您的 javascript，然后从那时起拦截您的点击事件，正如您所期望的那样。

带有（未）受影响链接的区域是否通过 ajax 加载？

# c# - 有什么方法可以将 c++ gdi+ pen 转换为 C# pen

> ID：11231069
> 
> 赞同：0
> 
> 时间：2012-06-27T16:36:46.623
> 
> 标签：c#, c++, gdi+

在 c++ 项目中，我创建了一个 gdi+ pen。c++ 代码示例：

```
long GetPen()
{
  Pen *pen = new Pen(Color.Red);

  return (long)pen; 
} 
```

在c#项目中，我想使用c++项目创建的gdi+ pen。c#代码示例：

```
[DllImport("xxxx.dll")]
public static extern IntPtr GetPen();

public void test()
{
   Intptr penptr = GetPen();

   //i want to convert the penptr to C# pen,is there any way?
} 
```

# android - ExpandableListView 子事件

> ID：11231070
> 
> 赞同：4
> 
> 时间：2012-06-27T16:36:48.063
> 
> 标签：android, xamarin.android

我正在尝试检测和处理 ExpandableListView 中对子项的选择。但是我尝试过的事件处理程序或侦听器似乎都没有触发。我该用哪一个？我试过了：

```
lv.Click += HandleSelect 
```

和

```
lv.ItemClick += HandleSelect 
```

和

```
lv.ChildClick += HandleSelect 
```

和

```
lv.ItemSelected += HandleSelect 
```

和

```
lv.SetOnChildClickListener(new ChildClick) 
```

HandleSelect 事件处理程序

```
void HandleSelect(Object o, EventArgs e)
{
   var obj = o;  //Breakpoint set here and it never breaks for any of the above;
} 
```

ChildClick 监听器

```
class ChildClick : ExpandableListView.IOnChildClickListener
{
 public void Dispose()
        {

        }

        public IntPtr Handle
        {
            get { return new IntPtr(0); }
        }

        public bool OnChildClick(ExpandableListView parent, View clickedView, int groupPosition, int childPosition, long id)
        {
            var clicked = clickedView; //Breakpoint set here, never breaks;
            return true;
        }
} 
```

这是我用来填充 ExpandableListView 的 BaseExpandableListAdapter

```
 class MarketAdapter : BaseExpandableListAdapter
{
    private readonly Context _context;
    private readonly string[] _stores;
    private readonly List<string> _storeList = new List<string>();
    private readonly List<List<Call>> _calls = new List<List<Call>>(); 

    public MarketAdapter(Context context, IEnumerable<Call> calls)
    {
        _context = context;

        List<Call> marketCalls =
            (from c in calls
             where c.InProgress == "0"
             select new Call() {CallNumber = c.CallNumber, ServiceType = c.ServiceType, Priority = c.Priority, Address = c.Address, City = c.City, Contact = c.Contact, Description = c.Description, Phone = c.Phone, Site = c.Site, State = c.State}).ToList();

        foreach (IGrouping<string, Call> stores in marketCalls.GroupBy(s => s.Site))
        {                
            _storeList.Add(stores.Key + "," + stores.First().City + "," + stores.First().State);
            List<List<Call>> callgroup = new List<List<Call>>();
            List<Call> call = new List<Call>(from c in stores select new Call() {CallNumber = c.CallNumber, ServiceType = c.ServiceType, Priority = c.Priority, Description = c.Description});
            callgroup.Add(call);
            _calls.Add(call);
        }
        _stores = _storeList.ToArray();
    }

    public override Object GetChild(int groupPosition, int childPosition)
    {
        return null;
    }

    public override long GetChildId(int groupPosition, int childPosition)
    {
        return childPosition;
    }

    public override int GetChildrenCount(int groupPosition)
    {
        return _calls.ElementAt(groupPosition).Count;
    }

    public override View GetChildView(int groupPosition, int childPosition, bool isLastChild, View convertView, ViewGroup parent)
    {
        List<Call> callList = _calls.ElementAt(groupPosition);
        Call _call = callList.ElementAt(childPosition);

        if (convertView == null)
        {
            LayoutInflater inflater = (LayoutInflater) _context.GetSystemService(Context.LayoutInflaterService);
            convertView = inflater.Inflate(Resource.Layout.listviewchild, null);
        }

        TextView call = (TextView) convertView.FindViewById(Resource.Id.Call);
        call.Text = _call.CallNumber;
        TextView type = (TextView) convertView.FindViewById(Resource.Id.Type);
        type.Text = _call.ServiceType;
        TextView priority = (TextView) convertView.FindViewById(Resource.Id.Priority);
        priority.Text = _call.Priority;
        TextView description = (TextView) convertView.FindViewById(Resource.Id.Description);
        description.Text = _call.Description;

        return convertView;
    }

    public override Object GetGroup(int groupPosition)
    {
        return _stores[groupPosition];
    }

    public override long GetGroupId(int groupPosition)
    {
        return groupPosition;
    }

    public override View GetGroupView(int groupPosition, bool isExpanded, View convertView, ViewGroup parent)
    {
        string[] info = _stores[groupPosition].Split(new [] { "," }, StringSplitOptions.None);
        string _site = info[0];
        string _city = info[1];
        string _state = info[2];

        if (convertView == null)
        {
            LayoutInflater inflater = (LayoutInflater) _context.GetSystemService(Context.LayoutInflaterService);
            convertView = inflater.Inflate(Resource.Layout.listviewparent, null);
        }

        TextView site = (TextView) convertView.FindViewById(Resource.Id.Site);
        site.Text = _site;
        TextView city = (TextView) convertView.FindViewById(Resource.Id.City);
        city.Text = _city;
        TextView state = (TextView) convertView.FindViewById(Resource.Id.State);
        state.Text = _state;

        return convertView;
    }

    public override bool IsChildSelectable(int groupPosition, int childPosition)
    {
        return true;
    }

    public override int GroupCount
    {
        get { return _stores.Length; }
    }

    public override bool HasStableIds
    {
        get { return true; }
    }
} 
```

编辑：也刚刚尝试了这里解释的解决方案[OnChildClick inside ExpandableListActivity 不会](https://stackoverflow.com/questions/10546200/onchildclick-inside-expandablelistactivity-does-not-fire?rq=1)通过在 listviewchild.axml 中将布局和我的所有 TextViews 可聚焦属性设置为 false 来触发，但它仍然不会触发侦听器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:05:53.210

我变了

```
void HandleSelect(Object o, EventArgs e)
{
  //do something
} 
```

到

```
void HandleSelect(object o, ExpandableListView.ChildClickEventArgs e)
{
  //do something
} 
```

它正在工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:46:06.790

使用`onChildClickListener`，但您需要从 ExpandableListView 类调用它，如下所示：

```
lv.setOnChildClickListener(new ExpandableListView.OnChildClickListener() { 
        @Override 
        public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id)  
        }); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T11:50:00.703

我遇到了同样的问题。

在我的 listviewchild 中，我有 xml 属性：

```
android:clickable="true" 
```

默默地消耗了这个事件。删除该属性会启用 ChildClick 事件处理程序。

# jquery - 好奇jquery .load()

> ID：11231077
> 
> 赞同：1
> 
> 时间：2012-06-27T16:37:41.440
> 
> 标签：jquery

阅读[jQuery`.load()`文档](http://api.jquery.com/load/)后，在“脚本执行”部分，它说：

> **脚本执行**
> 
> 当使用没有后缀选择器表达式的 URL 调用 .load() 时，内容会在脚本被删除之前传递给 .html()。这会在脚本块被丢弃之前执行它们。

1.  关于“在脚本被删除之前”这句话，这是否意味着脚本将被删除而不是添加到 DOM 中？只有 HTML 会被传递给文档并在 DOM 中更新？

2.  关于“this先执行脚本块，然后丢弃”这句话，是不是真的是脚本执行后被丢弃了，后面没有办法调用呢？

3.  即使将脚本传递给文档，如果 DOM 没有更新，我们也不能稍后调用它，可以吗？

如果上述问题的所有答案都是肯定的，这意味着加载一个javascript文件`.load()`只能`.load()`是加载完成后的即时执行，对吧？并且没有意思在之后再次调用该脚本`.load()`，因为它被丢弃并消失了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:00:39.517

加载的JavaScript 与标签中`.load()`通常的内联 JavaScript 完全一样。`<script></script>`

要从加载的 JavaScript 片段中获取一些结果，您可以创建一些对象或属性、定义函数等。例如，可以通过这种方式加载 jQuery 插件。

**编辑：**
请注意，如果存在后缀选择器，则不会执行任何脚本。

# php - 如何将会话变量值插入字符串数组

> ID：11231079
> 
> 赞同：-3
> 
> 时间：2012-06-27T16:37:46.437
> 
> 标签：php, string, session

我想做以下事情：

```
 $_SESSION['SESS_VERSION'] = $member['Version'];
     session_write_close();
     header("location: '$_SESSION['SESS_VERSION']'");
     exit(); 
```

现在我得到：

```
Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or T_VARIABLE or T_NUM_STRING 
```

如何在字符串中获取此值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:39:18.683

正确连接字符串：

```
header('location: '.$_SESSION['SESS_VERSION']); 
```

或者

```
header("location: {$_SESSION['SESS_VERSION']}"); 
```

**文档**

*   PHP 字符串连接 - [http://php.net/manual/en/language.operators.string.php](http://php.net/manual/en/language.operators.string.php)
*   PHP 字符串 - [http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:41:06.420

删除会话周围的引号，例如，

```
$sess = $_SESSION['SESS_VERSION'];
header("location: $sess"); 
```

或者你可以这样做，

```
header("location:". $_SESSION['SESS_VERSION']); 
```

# jquery - 使用 jQuery 选择 HTML5 视频对象

> ID：11231081
> 
> 赞同：12
> 
> 时间：2012-06-27T16:37:47.297
> 
> 标签：jquery, html, html5-video

我在使用 jQuery 获取 HTML5 视频标签时遇到问题。这是我的代码：

HTML 代码：

```
<video id="vid" height="400" width="550">
<source src="movie.mp4" type="video/mp4">
<source src="movie.ogv" type="video/ogg">
</video> 
```

Javascript代码：

```
function playVid(){
    console.log($('#vid'));
    console.log($('#vid')[0]);
    $('#vid')[0].currentTime=5;
    $('#vid')[0].play()
}

$(document).ready(){
    playVid();
} 
```

代码在行上中断并`.currentTime`出现以下错误：

```
InvalidStateError: An attempt was made to use an object that is not, or is no longer, usable 
```

这是我无法弄清楚的一点 - 第一个`console.log`显示了我期望的对象，在这个对象内部是另一个名为的对象`0`，它包含您期望的所有 HTML5 视频属性和方法，包括`.currentTime`.

但是，一旦我执行第二个日志，`$('#vid')[0]`它就会显示视频标签的 HTML 代码，而不是我之后调用的对象`0`。`console.log($('#vid')["0"])`对于和 ，我得到完全相同的结果`console.log($('#vid').get(0))`。

有没有办法获取在 jQuery 中工作`0`的对象返回的对象中调用的对象？`$('#vid')`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T16:46:13.013

我认为您正在尝试在视频元素准备好之前与它进行交互。

尝试这样的事情：

```
function loadStart(event)
{
    video.currentTime = 1.0;
}

function init()
{
    video.addEventListener('loadedmetadata', loadStart, false);
}
document.addEventListener("DOMContentLoaded", init, false); 
```

来源：[HTML5 视频 - Chrome - 错误设置 currentTime](https://stackoverflow.com/questions/3165444/html5-video-chrome-error-settings-currenttime)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T10:04:31.120

我遇到了完全相同的问题（音频）。我不相信接受的答案可以解决或解释问题，主要是因为它不是 jquery 解决方案。

奇怪的是我**可以获得**currentTime 属性，我什至可以确保在尝试设置 currentTime 之前已经播放了声音并且发生了同样的错误，所以我不相信这与媒体是 '准备好'。

```
var a = $("#myaudio").get(0); // a html5 audio element
console.log(a)                // dumps the object reference in the console
console.log(a.currentTime);   // works fine, logs correct value
a.currentTime = 100           // fails with an InvalidStateError 
```

一种解决方法是使用 setTimeout

```
setTimeout(function(){
            a.currentTime = 0;
        },1); 
```

...但我想了解它为什么会失败！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-14T14:10:25.813

```
var a_video = $('#video_id');

a_video.on('loadeddata', function() {
  if(a_video.readyState != 0) {
    a_video[0].currentTime = 100;
  } else {
    a_video.on('loadedmetadata', function() {
      a_video[0].currentTime = 100;
    });
  }
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T16:48:22.490

```
function playVid(){
  $('#vid').get(0).currentTime=5;
  $('#vid').get(0).play()
}

$(window).load(function(){
  playVid();
}); 
```

[这](http://jsfiddle.net/Z4qGM/3/)是一个 jsfiddle 示例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-30T03:35:47.473

我在音频方面遇到了同样的问题。这是一场灾难:)。您必须先播放音频，然后才能设置 currentTime。我没有找到其他方法。这是一个很好的参考线程：[https ://github.com/johndyer/mediaelement/issues/243](https://github.com/johndyer/mediaelement/issues/243)

播放元素，然后为将设置当前时间的“正在播放”事件设置一个事件侦听器。我必须防止无限循环，所以我在方法之外设置了一个“loadPlayed”。它可能不优雅，但它是有效的，所以我保留它。

```
audioplayer.src = source;
audioplayer.play();
audioplayer.addEventListener('playing', function () {
    if (loadPlayed == false)
    {
        audioplayer.currentTime = Time;
        audioplayer.play();
        loadPlayed = true;
    }
    else {
        audioplayer.removeEventListener('playing', this);
    }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-15T15:46:00.413

您也可以使用 a`try - catch`来避免此问题：

```
$(document).ready(function() {

    var $video = $('#vid'),
        video = $video[0];

    function playVid() {
        video.currentTime = 5;
        video.play();
    }

    try {
        playVid();
    } catch(error) {
        $video.on('loadedmetadata', playVid);
        video.load();
    }

}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-30T09:20:31.967

我有一个类似的问题，但不能使用事件侦听器，因为我使用时间码和单击函数来设置当前时间。但我也找到了一个可行的解决方案。每当我单击一个按钮（每个按钮都有不同的时间变量）时，这就是 click 函数中的代码：

```
$("#movie").get(0).play();
setTimeout(function () {
     $("#movie").get(0).currentTime = my_time_variable;
}, 500); 
```

因此，在触发函数之前等待 0.5 秒， InvalidStateError 将不再发生。也许这是一个快速而肮脏的解决方案，但它有效；）

# php - 获取 HTML 标签的维度

> ID：11231085
> 
> 赞同：0
> 
> 时间：2012-06-27T16:38:15.843
> 
> 标签：php, html

我正在使用[PHPQuery](http://code.google.com/p/phpquery/)解析 HTML 文件，我需要给定标签的高度和宽度，在 jQuery 中可以使用类似

```
height=$("div.content").height();
width=$("div.content").width(); 
```

但是在 PHPQuery 中没有 height(), width() 函数，所以有什么方法可以获取尺寸吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:40:13.950

PHPQuery 只是让您以类似于 jQuery 的方式遍历文档。它实际上并不渲染文档，因此它不知道每个元素在被浏览器渲染时实际的大小。

为了计算元素的宽度和高度，它需要解析您的样式表，应用所有这些规则，获取该元素（及其后代）使用的任何图像并使用适当的字体呈现该元素 - - 甚至可能渲染父元素。并且不能保证生成的尺寸会匹配某些特定的客户端配置，因为客户端环境可能会导致元素以不同的大小呈现（DPI 是最明显的例子，但即使是浏览器窗口的大小也会影响任何给定元素的大小）。

# java - JAVA - 在 JEditorPane 中设置选定文本的字体

> ID：11231086
> 
> 赞同：2
> 
> 时间：2012-06-27T16:38:17.500
> 
> 标签：java, swing, document, rtf

如何在 JEditorPane 中设置字体/粗体/斜体/下划线？

我正在尝试创建一个简单的文档编辑器，但我只能弄清楚如何设置整个 JEditor/JText 窗格的字体/粗体/斜体/任何内容。

RTF 是首选，HTML 也很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:46:04.033

JEdi​​torPane.getDocument() 返回 StyledDocument 的一个实例。StyledDocument 有[setCharacterAttributes](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/StyledDocument.html#setCharacterAttributes%28int,%20int,%20javax.swing.text.AttributeSet,%20boolean%29) () 方法来设置字体属性。

相关示例：[http ://www.java2s.com/Code/JavaAPI/javax.swing/JTextPanesetCharacterAttributesAttributeSetattrbooleanreplace.htm](http://www.java2s.com/Code/JavaAPI/javax.swing/JTextPanesetCharacterAttributesAttributeSetattrbooleanreplace.htm)

# concurrency - 是否可以更改我的表中的数据，这会在修改多行时中断批量更新？

> ID：11231088
> 
> 赞同：0
> 
> 时间：2012-06-27T16:38:22.143
> 
> 标签：concurrency, sql-server-2008-r2

我有一个基于选择结果的更新查询，通常返回超过 1000 行。

如果其中一些行在此更新可以触及之前被其他查询更新，是否会导致记录出现问题？例如，他们会不会与原始查询不同步？

如果是这样，选择和更新单个行而不是批量更新会更好吗？

如果有所不同，则查询正在 Microsoft SQL Server 2008 R2 上运行

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:42:23.503

不。

当其他东西正在更新它时，无法更新表。

数据库使用并发控制并具有 ACID 属性来完全防止此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:43:30.197

我建议阅读[隔离级别](http://msdn.microsoft.com/en-us/library/ms173763.aspx)。SQL Server 中的默认值为`READ COMMITTED`，这意味着其他事务无法读取已更新但未由给定事务提交的数据。

这意味着您的 select/update 语句返回的数据将及时准确地反映数据库。

如果您要将数据库更改为，`READ UNCOMMITTED`那么您可能会遇到选择/更新中的数据不同步的情况。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T16:44:24.200

如果您先选择，然后更新，则可以使用事务

```
BEGIN TRAN

-- your select WITHOUT LOCKING HINT

-- your update based upon select

COMMIT TRAN 
```

但是，如果您直接从选择中更新，则无需担心。单笔交易是隐含的。

```
UPDATE mytable
  SET value = mot.value
FROM myOtherTable mot 
```

但是...不要执行以下操作，否则您会遇到死锁

```
UPDATE mytable
  SET value = mot.value
FROM myOtherTable mot WITH (NOLOCK) 
```

# r - data.table 的 tables() 函数运行我的一些 .Rprofile 函数

> ID：11231089
> 
> 赞同：5
> 
> 时间：2012-06-27T16:38:33.503
> 
> 标签：r, data.table

在我的 .Rprofile 中，我定义了以下两行`.First`

```
makeActiveBinding(".refresh", function() { system("R"); q("no") }, .GlobalEnv)
makeActiveBinding('.rm', function() {rm(list=ls(envir = .GlobalEnv),envir=.GlobalEnv); gc()}, .GlobalEnv) 
```

它们通常是无害的，除非我不小心输入它们！第一个`.refresh`函数将退出并重新启动 R 会话。第二个清空全球环境。但是，当使用这两个函数中的函数时，这并不是完全可取的`tables()`。`data.table`

目前，我已将它们从我的帐户中删除，`.First`但我很好奇是否有办法避免这种情况。该`tables()`函数中的违规行是：

```
tt = objects(envir = env, all.names = TRUE)
ss = which(as.logical(sapply(tt, function(x) is.data.table(get(x, 
    envir = env))))) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T17:06:24.943

我认为您刚刚发现了以这种方式使用活动绑定的不利之处。你为什么不创建普通函数`.rm`and `.refresh`，你以通常的方式（即`.rm()`and `.refresh()`）调用，并且在简单检查时不会执行？

以下是您`.First`可能的部分：

```
.First <- function() {
    assign(".rm", 
           function() {rm(list=ls(envir=.GlobalEnv), envir=.GlobalEnv)}, 
           pos = .GlobalEnv)
}

## Try it out
j <- 1:10
ls()
.First()
.rm()
ls() 
```

* * *

**编辑，解决方案：**

进一步考虑，这似乎有效，只有在`.rm`直接“调用”时才执行核心位。它通过检查调用堆栈的长度来工作，并且仅在`rm(...)`其中只有一个调用时运行（表示*当前*对`.rm()`.更长，并且不会被执行。：`.rm`*`tables()``rm()`*

 *```
makeActiveBinding('.rm', 
                 function() {
                     if(length(sys.calls())==1) {
                         rm(list=ls(envir = .GlobalEnv),envir=.GlobalEnv); gc()
                      }
                 },   
                 .GlobalEnv)

## Try _it_ out
library(data.table)

j <- 100
.rm
ls()

j <- 100
tables()
ls() 
```*

# jquery - SlickGrid：如何为并发数据编辑实现 editorLock？

> ID：11231096
> 
> 赞同：1
> 
> 时间：2012-06-27T16:38:46.387
> 
> 标签：jquery, jquery-plugins, slickgrid

我在页面中实现了一个可编辑的 SlickGrid。有没有办法在这个网格上实现编辑器锁定，以便我可以启用并发数据编辑？

我知道网格有一个名为`editorLock`（`Slick.GlobalEditorLock`默认设置为）的选项 - 但我不确定它是如何实现的。

关于我如何通过 SlickGrid 实现这一点的任何指示？我只想让一个用户一次编辑单元格。

**编辑**： editorLock 对于网格实例是本地的，实际上不适用于不同浏览器会话上的不同网格实例。因此，实现这一目标的唯一方法是使用手动机制来跟踪活动编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:17:11.910

我也在看这个。据我所知，这不是管理两台不同计算机上的两个不同人的方法，他们都试图同时编辑相同的数据库记录。相反，它是一个人打开一个页面的一种方式，该页面上有多个网格，它们是同一个表上的不同视图，尝试在一个网格中编辑数据，然后在第一个网格之前编辑另一个网格中的相同数据一个已经得救了。

# javascript - Javascript Array.push 方法问题

> ID：11231097
> 
> 赞同：1
> 
> 时间：2012-06-27T16:38:47.000
> 
> 标签：javascript

我有以下代码：

```
function build_all_combinations(input_array){
   array = [1,2,3]
   limit = array.length - 1
   combo = []

   for(i = 0; i<= limit; i++){
      splice_value = array.splice(0,1)
      push_value = splice_value[0]
      array.push(push_value)
      console.log(array) 
      combo.push(array) 
   }
   console.log(combo) 
} 
```

哪个输出：

```
[2, 3, 1]
[3, 1, 2]
[1, 2, 3]
[[1, 2, 3], [1, 2, 3], [1, 2, 3]] 
```

最后一行应该是：`[[2, 3, 1],[3, 1, 2],[1, 2, 3]]`

我显然对阵列的工作方式没有任何了解。每个单独的数组都是正确的，但是当我将它们推送到组合数组时，沿途出现了一些问题。它是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:43:07.260

每次将相同的数组推入组合数组时；即，所有引用都指向内存中的同一个实例。因此，当您更新一个时，实际上您已经更新了所有这些。

如果您想要单独的引用，则需要创建单独的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T17:04:19.703

`shift`你是这里的`slice`朋友吗：

```
var array = [1,2,3];
var combo = []
for(var i = 0; i<array.length; i++){
  array.push(array.shift());  // remove first element (shift) and add it to the end (push)
  combo.push(array.slice());  // add a copy of the current array to combo
} 
```

[**演示**](http://jsfiddle.net/jackwanders/PzesM/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T16:48:06.950

*jordan002*对这种行为给出了解释。

这是解决方法。

```
array = [1,2,3]
limit = array.length - 1
combo = []
for(i = 0; i<= limit; i++){
 splice_value = array.splice(0,1)
 push_value = splice_value[0];
 array.push(push_value);
 console.log(array);
 combo.push(array.concat([]));
}
console.log(combo); 
```

您可以将副本存储在`temp`变量中。

```
array = [1,2,3]
limit = array.length - 1
combo = []
for(i = 0; i<= limit; i++){
 splice_value = array.splice(0,1)
 push_value = splice_value[0];
 array.push(push_value);
 console.log(array);
 var temp = array.slice();  
 combo.push(temp);
}
console.log(combo) 
```

[参考](http://www.hardcode.nl/subcategory_1/article_414-copy-or-clone-javascript-array-object)

# sql - Informix 多连接

> ID：11231099
> 
> 赞同：3
> 
> 时间：2012-06-27T16:38:50.523
> 
> 标签：sql, join, left-join, informix

我需要修改我的查询以添加其他联接。但是新的联接可能需要是左联接。我不确定该怎么做。我正在使用 Informix：

```
 set    query   "SELECT DISTINCT x.xfertype,x.app_type,x.service_type,x.lang,x.area_type,x.area_value,x.module,x.field1,x.field2,x.disabled,a.frames,a.allocs,a.term_id,t.term,c.center_id,c.center_name,a.message_id,x.field3,x.apn_type,x.global, a.icm, s.group_name "
    append  query   " FROM test_xfertypes AS x, test_allocation AS a, test_terms AS t, test_callcenter AS c"
    append  query   " AND a.xfertype = x.xfertype "
    append  query   " AND a.term_id = t.term_id "
    append  query   " AND t.center_id = c.center_id "; 
```

`test_xfertypes AS x`包含`area_value`（整数）

我想用另一个新表加入上面的表`test_routing_groups AS s`。

我想离开加入让它返回`s.group_name WHERE x.area_value IN (s.area_id)`；如果 group_name 存在，则返回 group_name，否则返回 null。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:59:11.797

您需要为此使用标准连接语法。您的查询应如下所示：

```
SELECT DISTINCT x.xfertype, x.app_type, x.service_type, x.lang,x.area_type,
       x.area_value, x.module, x.field1, x.field2, x.disabled,
       a.frames, a.allocs, a.term_id,
       t.term,c.center_id, c.center_name,a.message_id, x.field3, x.apn_type,x.global,
       a.icm, s.group_name
FROM test_xfertypes x join
     test_allocation a
     on a.xfertype = x.xfertype join
     test_terms t
     on a.term_id = t.term_id join
     test_callcenter c
     on t.center_id = c.center_id 
```

您只需添加以下内容即可离开加入另一个表：

```
left outer join test_routing_groups s
on x.area_value IN (s.area_id) 
```

您还可以使用“x.area_value = s.area_id”而不是“in”子句。

# linux - gcc 链接目标文件和库 - 有什么区别？

> ID：11231101
> 
> 赞同：3
> 
> 时间：2012-06-27T16:38:52.180
> 
> 标签：linux, gcc

假设有这个命令：

```
g++ main.o somefile.o -lc -o main 
```

链接目标文件 somefile.o 和链接库 libc.a 有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:43:21.847

以“.a”结尾的文件是存档文件。它们本质上包含一组“.o”。因此，假设“libc.a”包含“c1.o”、“c2.o”和“c3.o”，您的命令本质上等同于取消归档“libc.a”，然后调用：

```
g++ main.o somefile.o c1.o c2.o c3.o -o main 
```

请注意，“.a”中包含的对象仅在需要时才包括在内，即，如果它们的至少一个符号被另一个“.o”引用。

# html - 显示带有排序指示符的省略号

> ID：11231103
> 
> 赞同：2
> 
> 时间：2012-06-27T16:38:56.327
> 
> 标签：html, css

[在我的小提琴](http://jsfiddle.net/eAC8G/6/)中，我有三个示例说明如何在表头上显示排序指示器。

![未折叠的标题](../Images/acb990e1ed4acca19ac12a3e64664fef.png)

我的问题在第三栏。当我缩小到省略号时，排序指示器隐藏在 Chrome 中，而在 IE 中它位于文本顶部。

**铬合金**

![折叠的铬](../Images/bf740318e47c570632a0f0f41cbaec63.png)

**IE**

![在此处输入图像描述](../Images/c7577b9493860d0ad85f7d6a09bba5fa.png)

有没有办法让排序指示器**与标题保持紧贴并**在显示省略号时**保持可见**（类似于第二列）？

我已经尝试将指标分解为它自己的跨度，但我似乎无法让带有标题的跨度崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:00:12.653

对我来说，这在 IE 中似乎比在 Chrome 中更明显。解决此问题的一种方法可能是使用 CSS`content`属性并将排序指示器移到其中，然后从 .indicator-right 类中删除背景图像。

**[jsFiddle 示例](http://jsfiddle.net/j08691/eAC8G/7/)**

CSS

```
.indicator-right:after {
    content:url(data:image/gif;base64,R0lGODlhFQAJAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAkAAAIXjI+AywnaYnhUMoqt3gZXPmVg94yJVQAAOw==);
} 
```

# mongodb - 在 mongodb 中是索引一个正在进行的活动还是我们需要一个 cron？

> ID：11231105
> 
> 赞同：3
> 
> 时间：2012-06-27T16:39:07.203
> 
> 标签：mongodb

对不起，如果这个问题很愚蠢。我是整个数据库索引的新手，想知道我是否发出了以下命令

```
> db.posts.ensureIndex({location:"2d"}) 
```

即使发布了新条目，数据库是否也会始终被索引？还是我需要在每个新条目后输入此命令？

索引对包含 2000 多个条目的数据库也有很大影响吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:43:48.093

一旦索引到位，它将始终用于任何后续读取和写入。您不需要继续执行该命令。

请记住，`ensureIndex`在现有的大型数据集上发布将导致它立即索引那里的所有内容，并且可能会阻塞。

这里有一个关于索引建议的完整官方常见问题解答：[http](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ)
://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ 您应该创建与您正在执行的查询类型相匹配的索引。此外，它非常易于使用`explain`并查看查询需要多长时间。当您看到您一遍又一遍地执行特定类型的查询时，您可以正确索引它以提高性能。

> MongoDB 包含一个解释命令，用于确定查询的处理方式，特别是它们是否使用索引。explain 可以从驱动程序中使用，也可以从 shell 中使用：
> 
> `db.comments.find({ tags : 'mongodb'}).sort({ created_at : -1 }).explain();`
> 这将返回许多有用的信息，包括扫描的项目数、查询处理所需的时间（以毫秒为单位）、查询优化器尝试使用的索引以及最终使用的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:43:57.243

> 还是我需要在每个新条目后输入此命令？

不会。更新数据库中的条目时会更新索引。

> 索引对包含 2000 多个条目的数据库也有很大影响吗？

不容易说。这取决于您正在运行的查询以及 MongoDB 在内存中的数据量。

如果您的查询最终加载了 2000 个条目中的大部分，那么索引可能不会做太多事情。如果您的查询只加载一个条目，那么索引可能很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T16:55:59.410

MongoDB 中的索引与其他关系数据库服务器（SQLServer、MySQL 等）中的索引非常相似，并且具有相同的优缺点：

*   索引可以显着加快读取速度
*   索引可以稍微减慢写入速度（写入必须更新数据和保存索引信息的 btree）

如果您的应用程序读取量很大，您将看到在适当的索引到位的情况下数据库响应时间的显着改善。关注jdi 在他的帖子中发布[的 10Gen Indexing 链接](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ)——这是一个很好的起点。

# javascript - 每次创建视图时在 Rereduce 函数中合并对象的属性都会导致错误的值

> ID：11231108
> 
> 赞同：0
> 
> 时间：2012-06-27T16:39:19.990
> 
> 标签：javascript, couchdb, mapreduce

这是这个问题的后续[步骤 How to merge objects attributes from reduce to rereduce function in CouchDB](https://stackoverflow.com/q/11207961/1448852)

我一直在关注上一个问题的公认答案。为了快速回顾，这是我的 JSON 模式：

```
{"emp_no": ..,
"salary": ..,
"from_date": ..,
"to_date": ..,
"type" : "salaries"}

{"emp_no": ..,
"title": ..,
"from_date": ..,
"to_date" : ..,
"type" : "titles"} 
```

我想找出每个活跃头衔的平均工资（用“from_date”=“9999-01-01”表示）。由于 rereduce 的输出必须与 reduce 相同，因此值的形式为

```
{"Title":[sum,count],"Title":[sum,count]} 
```

基于该形式，我将reduce函数从上一个问题更改为：

```
function(keys, values, rereduce) {
    function isArray(o) {
      return Object.prototype.toString.call(o) === '[object Array]';
    }
    var i, l, sal, count, rv = {}, kobj;
    if (rereduce) {
        for (i = 0, l = values.length; i<l ; ++i) {
            if (i === 0) {
                for (kobj in values[i]) {
                    if(values[i].hasOwnProperty(kobj)) {
                        if (isArray(values[i][kobj]) ) {
                            rv[kobj] = values[i][kobj];
                        }
                    }
                }
            } else {
                for (kobj in values[i]) {
                    if(values[i].hasOwnProperty(kobj)) {
                        if (isArray(values[i][kobj])) { 
                            sal = values[i][kobj][0];
                            count = values[i][kobj][1];
                            if ( rv.hasOwnProperty(kobj) && isArray(rv[kobj])) {
                                rv[kobj][0] += sal; 
                                rv[kobj][1] += count; 
                            } else { 
                                rv[kobj] = [sal,count]; 
                            }
                        }
                    }
                }
            }
        }
    } else {
        var t;
        for (i = 0, l = values.length; i<l ; i++) {
            switch (values[i][0]) {
                case "title" :
                    rv[values[i][1]] = null;
                    t = i;
                    break;
                case "salary":
                    rv[values[t][1]] = [values[i][1], 1];
                    break;
                default:
                    rv[values[t][1]] = null;
                    break;
            }
        }
    }
    return rv;
} 
```

这是降低的价值：http: [//i.imgur.com/WbmxL.png](https://i.imgur.com/WbmxL.png)

这是应用 rereduce 步骤时的值：

```
{Senior Engineer: [417153, 6], Engineer: [171293, 3], Assistant Engineer: [66313, 1], Senior Staff: [248397, 3], Technique Leader: [134222, 2], Staff: [72527, 1]} 
```

让我疑惑的是，每次创建视图时，rereduce 的值总是在变化！即使我只是在函数末尾添加了注释（//）。此外，生成的值总是错误的。这是重新创建视图后的值：

```
{Senior Engineer: [540708, 7], Senior Staff: [179364, 2], Engineer: [488026, 6], Staff: [174196, 3], Assistant Engineer: [66313, 1], Technique Leader: [120310, 2]} 
```

我真的很困惑，而且几乎是盲目的，因为我不知道如何进行调试并遵循 CouchDB 中 MapReduce 函数的执行。javascript / MapReduce专家可以帮我指出问题所在吗？

这是我的工资和头衔文件。[每个包含 1000 个文档，可以使用 HTTP BULK API https://docs.google.com/open?id=0B2o1vMJ7XFKydUxGR3R3NU9QOEE](https://docs.google.com/open?id=0B2o1vMJ7XFKydUxGR3R3NU9QOEE)插入 CouchDB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T22:33:45.087

您依赖于存在的相邻记录。您无法预测 Couch 将如何拆分它传递给您的 reduce 函数的一组值。您绝对会因同一员工的*头衔*和*薪水记录***之间发生拆分而被调用。** 这意味着在您的 reduce 函数的给定调用中，您将有一个头衔，但没有薪水，反之亦然。

 **我认为没有任何方法可以使用您当前的数据结构来做您想做的事情。您应该在客户端进行平均计算，或者更改文档结构，以便将薪水和职位都存储在同一个文档中（后者是我的方法）。**

# ruby - 使用最大行长度简洁地序列化 JSON

> ID：11231110
> 
> 赞同：5
> 
> 时间：2012-06-27T16:39:28.837
> 
> 标签：ruby, json, smtp, sendgrid, email-headers

所以我正在生成一个可能很长的 JSON 字符串，用于 Sendgrid 的 SMTP API。因为它作为 SMTP 标头，所以它应该有一个最大行长度（推荐 72，但绝对不要超过 1000）。结尾处的文档中描述了一种简单的解决方案：

[http://docs.sendgrid.com/documentation/api/smtp-api/developers-guide/](http://docs.sendgrid.com/documentation/api/smtp-api/developers-guide/)

他们建议这样做：

```
$js =~ s/(.{1,72})(\s)/$1\n   /g; 
```

但我不喜欢这样，因为它可能会在空格有意义的字符串中拆分。此外，当空间很少且相距甚远时，性能似乎非常糟糕。

现在我正在使用 Ruby，我可以执行以下操作：

```
JSON.generate(@hash, options) 
```

其中 options 提供了[http://flori.github.com/json/doc/classes/JSON.html#method-i-generate](http://flori.github.com/json/doc/classes/JSON.html#method-i-generate)中记录的不同格式选项。但是这些都没有给我我想要的东西，即每隔一段时间带有换行符的简洁 JSON。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:28:08.467

```
options = {
  indent:'',
  space:"\n",
  space_before:"\n",
  object_nl:"\n",
  array_nl:"\n",
} 
```

这会在每个这样做不会影响 JSON 语义的地方添加一个换行符，并禁用任何缩进。

它不简洁也不友好，但换行符只是一个额外的字符，所以有很多不会真正影响性能。它还为您提供尽可能短的行，而不会影响字符串的内容。您可能应该检查这些以确保它们都在长度限制之下。

# oracle - 使用 Oracle 将 NHibernate 查询的类型设置为 AnsiString

> ID：11231112
> 
> 赞同：1
> 
> 时间：2012-06-27T16:39:34.060
> 
> 标签：oracle, nhibernate, ansistring

经过一番挖掘，我发现以下NHibernate查询的原因

```
 IList<User> users = session.QueryOver<User>()                        
            .WhereRestrictionOn(user => user.EmployeeID)
            .IsInG<string>(new string[] {EmployeeID.ToUpper()})
            .List<User>(); 
```

没有在 Oracle 中工作是因为我没有将映射中的属性设置为“AnsiString”。IE

```
 <property name="EmployeeID" column="LAN_ID" type="AnsiString" /> 
```

有人可以告诉我为什么必须这样做吗？Oracle 中的底层数据类型是 varchar2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-20T06:33:32.733

其实里卡多你错了。VARCHAR 和 VARCHAR2 相同，但建议使用 VARCHAR2。NVARCHAR2 是 unicode 类型。查看：[http ://docs.oracle.com/cd/B19306_01/server.102/b14220/datatype.htm#i3253](http://docs.oracle.com/cd/B19306_01/server.102/b14220/datatype.htm#i3253)

所以我的猜测是——如果你使用的是 VARCHAR2，你的 NHibernate 映射中需要 AnsiString。否则，它默认为 Unicode 字符串。如果您没有指定 AnsiString 并且您有 VARCHAR2 映射列，那么还有更多问题，而不仅仅是“ToUpper”问题。Oracle 将不得不进行类型转换，并且无法在搜索中使用索引。

我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:24:16.193

AnsiString = VARCHAR = ANSI（不是 UNICODE） String = VARCHAR2 = UNICODE

我猜你一定有其他问题。

# window - 如何在 LabView 中以编程方式切换活动窗口

> ID：11231121
> 
> 赞同：2
> 
> 时间：2012-06-27T16:40:24.937
> 
> 标签：window, exe, labview

我目前正在使用 LabView 的 System Exec.vi 执行第三方软件。我需要向这个程序发送一些键盘输入，但它不能通过标准输入，而是像 Windows 一样（即，如果您单击 Alt+F4 窗口关闭，Alt+F 进入文件菜单等） . 我已经有一种方法可以将此键盘组合插入程序，但我遇到的问题是，一旦我使用 System Exec 执行它，该程序就会以某种方式进入后台。即使我将“运行最小化”设置为 false，并且无论“等待完成”的状态如何，也会发生这种情况。

由于我不知道是什么使程序窗口进入后台，我需要从 LabView 窗口（始终保持活动状态）切换到程序窗口。有谁知道这样做的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:26:16.923

如果您知道要激活的窗口的名称，则可以通过“调用库函数”使用Windows API user32.dll 的*FindWindowA*和*SetForegroundWindow*。
见[http://digital.ni.com/public.nsf/allkb/B5F993B3C19521CB86256F1E00595E64](http://digital.ni.com/public.nsf/allkb/B5F993B3C19521CB86256F1E00595E64)

# objective-c - 如何从一个 XIB 文件中选择的 3 个视图中加载一个视图？

> ID：11231122
> 
> 赞同：0
> 
> 时间：2012-06-27T16:40:27.093
> 
> 标签：objective-c, uiview, uiviewcontroller, presentmodalviewcontroller

**简而言之，**我如何设法从一个 XIB 文件中包含的一组 UIView 加载特定的 uiview？小卖部？如何？

在某些情况下，我希望显示第一个视图而不是第二个，有时我希望显示第三个而不是第一个。它们都是相似的 UIView，但是只能以模态方式显示。我知道要显示哪个 UIView，具体取决于用户与单击按钮的交互。但是问题是我如何具体选择要显示的某个视图然后附加它以模态方式呈现它。

**详细来说，这是我到目前为止所做的：**

嗨，我的 TestViewController.xib 文件中有三个视图对象，如下所示：

![一个 xib 文件中存在 3 个视图](../Images/8fb80d3a6077983385e7db8b3f879b6c.png)

此 xib 的“文件所有者”连接到 TestViewController 类。

在运行时，我以编程方式实例化 TeamViewController 类，如下所示：

```
TestViewController *tVController = [[TestViewController alloc] initWithNibName:@"TestViewController" bundle:nil]; 
```

然后我以模态方式呈现视图，如下所示：

```
 UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:ls];
    [nav setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    [nav setModalPresentationStyle:UIModalPresentationFormSheet];
    nav.navigationBar.tintColor = [UIColor blackColor];
    [nav setNavigationBarHidden:YES]; 

    [rootViewController.navigationController presentModalViewController:nav animated:YES];
    nav.view.backgroundColor = [UIColor blackColor];
    self.modalNavController = nav;
    [nav release];
    [tVController release]; 
```

这一切正常，我的视图已加载，但默认情况下它仅加载其中一个视图 - 自动。我想做的是能够知道如何在实例化 TestViewController 时只加载一个特定的 UIView。我想到实现这一点的一种方法是为它们创建 IBOutlets 并管理这样显示的视图？所以我在类中创建了三个 IBOutlets，然后将它们从 Xib 的 fileown 连接到每个 UIView。这一切都很好。

```
IBOutlet *view1;
IBOutlet *view2;
IBOutlet *view3; 
```

我能够做这样的事情：

```
[self.view addSubview:view2]; 
```

这将正确显示 view2，但不是在模态视图中，因为我在实例化 TestViewController 时会非常喜欢它。

谁能指导我如何实现我的这个目标？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:55:37.637

您应该给每个视图一个唯一的标签，然后使用`viewWithTag:`

**-编辑-**

为了使它工作，你可能需要做`NSNib *n = [[NSNib alloc] initWithNibNamed:bundle:]`

# asp.net - 更改 Telerik 上传浏览按钮样式

> ID：11231123
> 
> 赞同：0
> 
> 时间：2012-06-27T16:40:26.903
> 
> 标签：asp.net, upload, telerik, styles

我在我的 ASP.NET Web 应用程序中使用 Telerik Upload Control，我将更改其浏览按钮的样式。我已经测试了几件事，但没有成功。如何更改此按钮的宽度、高度和背景图像？你能告诉我这个按钮的正确css吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:03:59.227

我不熟悉 Telerik 上传控件。它呈现什么 HTML？

我的猜测是它只是元素的包装器`<input type="file" />`。在这种情况下，恐怕你有点不走运：[http ://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

大多数解决方法都涉及使用 Flash（Flickr 这样做）或脚本（imgur.com 这样做），但两种方法都不是完美的。

# facebook-opengraph - FB 应用程序未显示在见解中

> ID：11231129
> 
> 赞同：2
> 
> 时间：2012-06-27T16:40:58.990
> 
> 标签：facebook-opengraph, facebook-insights, app-id

当我访问 FB 洞察页面（位于：[https](https://www.facebook.com/insights/) ://www.facebook.com/insights/ ）时，我的应用程序未显示，但是，如果我单击左侧的创建应用程序链接，它将显示。此外 - 它没有显示任何见解并告诉我我需要至少发布一个操作来提交 Open Graph 代码 - 这已经完成了很多次。我的应用程序 ID 是：199931010133472

# vba - 如果活动单元格等于特定文本，则应用内部颜色 - VBA

> ID：11231134
> 
> 赞同：1
> 
> 时间：2012-06-27T16:41:19.990
> 
> 标签：vba, excel

我是 StackOverflow 和 VBA 的新手。除了从头开始用 VBA 编写代码外，我是 Excel 各个方面的专家。

我想要做的是将索引中的颜色应用到包含特定术语的单元格内部。这是我所拥有的：

```
Sub ConditionalFormatting()

Do Until ActiveCell = ""

If ActiveCell = "STAR DISTRICT" Then
ActiveCell.Interior.ColorIndex = 50
ElseIf ActiveCell = "STAR SCHOOL" Then
ActiveCell.Interior.ColorIndex = 50
ElseIf ActiveCell = "HIGH PERFORMING" Then
ActiveCell.Interior.ColorIndex = 43
ElseIf ActiveCell = "SUCCESSFUL" Then
ActiveCell.Interior.ColorIndex = 34
ElseIf ActiveCell = "ACADEMIC WATCH" Then
ActiveCell.Interior.ColorIndex = 38
ElseIf ActiveCell = "LOW PERFORMING" Then
ActiveCell.Interior.ColorIndex = 22
ElseIf ActiveCell = "AT RISK OF FAILING" Then
ActiveCell.Interior.ColorIndex = 18
ElseIf ActiveCell = "FAILING" Then
ActiveCell.Interior.ColorIndex = 3
Else: ActiveCell.Interior.ColorIndex = 1
End If

ActiveCell.Offset(1, 0).Select

Loop

End Sub 
```

选项包括：星区或学校、高绩效、成功、学术观察、低绩效、有失败风险、失败

此代码适用于一列（底部两个术语除外），但不适用于工作表中的其他任何地方。当我在其他任何地方尝试时，无论单元格包含什么，所有单元格都会变成黑色（或 ColorIndex = 1）。

任何帮助将不胜感激。

特伦顿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:09:48.587

如果没有在 Excel 电子表格中看到您的输入数据，很难确切地说出为什么会这样：

`This code works for one column (except for the bottom two terms) but it will not work anywhere else in the worksheet. When I try it anywhere else, all of the Cells turn Black (or ColorIndex = 1) no matter what the cell contains.`

但是，默认情况下，VBA 中的字符串比较是二进制比较，这意味着它将区分大小写，并且您正在与`ActiveCell`各种大写字符串进行比较。如果您的 Excel 电子表格包含除全部大写之外的任何内容，则所有测试都将失败。

你需要做两件事之一。首先，您可以添加`Option Compare Text`到代码表的顶部。这会将所有比较更改为`Text`而不是`Binary`比较。

或者您可以将每个函数包装`ActiveCell`在一个`UCASE`函数中，该函数将在执行比较之前将活动单元格中的任何值大写：

```
If UCase(ActiveCell) = "STAR DISTRICT" Then
...
ElseIf UCase(ActiveCell) = "STAR SCHOOL" Then
...
...
...
End If 
```

编辑：

正如您在评论中提到的，问题是单元格值中的尾随空格，适当的代码修复是包装`ActiveCell`在一个`Trim`函数中。您可以将函数嵌套在彼此内部，例如：

```
If UCase(Trim(ActiveCell)) = "STAR DISTRICT" Then
...
ElseIf UCase(Trim(ActiveCell)) = "STAR SCHOOL" Then
...
...
...
End If 
```

这将修剪值中的任何尾随和前导空格，`ActiveCell`然后将其设为大写以与您的标记值进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:15:10.287

好吧，我不确定您要在哪个范围内应用此代码。根据我在您的代码中看到的内容，您希望 VBA 在**ActiveCell**上应用此“格式” ，然后选择下面的另一个单元格并重复“条件格式”过程，然后选择另一个单元格（带有`ActiveCell.Offset(1, 0).Select`）等等，直到它偶然发现第一个空的细胞。

为此，代码应该基本上可以工作（我已经尝试过）并根据您的条件更改它处理的单元格的内部颜色索引。由于此宏适用于从**ActiveCell**到最后一个非空的一列中的单元格单元格我不明白您打算如何在两列上使用它。

此宏将任何单元格变为 ColorIndex 1 的原因可能只是它包含不属于“条件列表”的文本。另请记住，大写和小写是不同的字符，因此单元格中的值必须与代码中的单词/字符串完全匹配，或者您可以增强代码以将单词中的所有字母转换为大写（使用`UCase`例如）

您可以尝试使用此代码将相关格式应用于所选范围内的每个单元格：

```
Sub ConditionalInteriorColor()

Dim r As Range
Dim cell As Range
Dim index As Integer
Dim word As String

    'Set the targeted range to be the selected range
Set r = Selection

For Each cell In r

    word = UCase(cell.Value)

    'Choose index
    Select Case word
        Case "STAR DISTRICT"
            index = 50
        Case "STAR SCHOOL"
            index = 50
        Case "HIGH PERFORMING"
             index = 43
        Case "SUCCESSFUL"
             index = 39
        Case "ACADEMIC WATCH"
            index = 38
        Case "LOW PERFORMING"
             index = 22
        Case "AT RISK OF FAILING"
            index = 20
        Case "FAILING"
            index = 3
        Case Else
            index = 3
    End Select
    'Color interior of cell
    cell.Interior.ColorIndex = index

Next

End Sub 
```

# iphone - FB 与 xcode HACK 更改屏幕的集成（删除）

> ID：11231135
> 
> 赞同：-2
> 
> 时间：2012-06-27T16:41:24.937
> 
> 标签：iphone, ios, xcode, facebook, facebook-graph-api

我将 FB 帖子添加到我的应用程序中，以便用户可以在 fb 上发布高分与那里的朋友分享，

但是由于这个我现在有 2 个轻弹屏幕，上面显示了类似蓝皮书的内容，并在其中说 hack（我知道这是无害的，但对用户来说他们可能看不到这种方式）我该如何删除它。

我已经上传了一个 8 秒的视频来展示这个。

[视频展示黑客](http://youtu.be/9_I3NAtoSTI)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:09:52.440

似乎在途中的某个地方，您设置了 Default.png。尝试删除该文件，它应该会消失。

# arrays - Perl 脚本问题

> ID：11231137
> 
> 赞同：2
> 
> 时间：2012-06-27T16:41:53.660
> 
> 标签：arrays, perl, hash, initialization

该脚本的目的是处理文件中的所有单词并输出出现次数最多的所有单词。因此，如果有 3 个单词每个出现 10 次，程序应该输出所有单词。

脚本现在可以运行了，这要归功于我在这里得到的一些提示。但是，它不处理大型文本文件（即新约）。我不确定这是我的错还是只是代码的限制。我确信该程序还有其他几个问题，因此将不胜感激任何帮助。

```
#!/usr/bin/perl -w
require 5.10.0;

print "Your file: " . $ARGV[0] . "\n";
#Make sure there is only one argument
if ($#ARGV == 0){

    #Make sure the argument is actually a file
    if (-f $ARGV[0]){

        %wordHash = ();     #New hash to match words with word counts
        $file=$ARGV[0];     #Stores value of argument
        open(FILE, $file) or die "File not opened correctly.";

        #Process through each line of the file
        while (<FILE>){
            chomp;
            #Delimits on any non-alphanumeric
            @words=split(/[^a-zA-Z0-9]/,$_);
            $wordSize = @words;

            #Put all words to lowercase, removes case sensitivty
            for($x=0; $x<$wordSize; $x++){
                $words[$x]=lc($words[$x]);
            }

            #Puts each occurence of word into hash
            foreach $word(@words){
                $wordHash{$word}++;
            }
        }
        close FILE;

        #$wordHash{$b} <=> $wordHash{$a};
        $wordList="";
        $max=0;

        while (($key, $value) = each(%wordHash)){
            if($value>$max){
                $max=$value;
            }
            }

        while (($key, $value) = each(%wordHash)){
            if($value==$max && $key ne "s"){
                $wordList.=" " . $key;
            }
            }       

        #Print solution
        print "The following words occur the most (" . $max . " times): " . $wordList . "\n";
    }
    else {
        print "Error. Your argument is not a file.\n";
    }
}
else {
    print "Error. Use exactly one argument.\n";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T17:02:03.823

您的问题在于脚本顶部缺少的两行：

```
use strict;
use warnings; 
```

如果他们在那里，他们会报告很多这样的行：

`Argument "make" isn't numeric in array element at ...`

来自这一行：

```
$list[$_] = $wordHash{$_} for keys %wordHash; 
```

数组元素只能是数字，并且由于您的键是单词，因此这是行不通的。这里发生的情况是任何随机字符串都被强制转换为一个数字，对于任何不以数字开头的字符串，这将是`0`.

您的代码可以很好地读取数据，尽管我会以不同的方式编写它。只有在那之后，您的代码才会变得笨拙。

据我所知，您正在尝试打印出出现次数最多的单词，在这种情况下，您应该考虑以下代码：

```
use strict;
use warnings;

my %wordHash;
#Make sure there is only one argument
die "Only one argument allowed." unless @ARGV == 1;
while (<>) {    # Use the diamond operator to implicitly open ARGV files
    chomp;
    my @words = grep $_,           # disallow empty strings
        map lc,                    # make everything lower case
            split /[^a-zA-Z0-9]/;  # your original split
    foreach my $word (@words) {
        $wordHash{$word}++;
    }
}

for my $word (sort { $wordHash{$b} <=> $wordHash{$a} } keys %wordHash) {
    printf "%-6s %s\n", $wordHash{$word}, $word;
} 
```

正如您将注意到的，您可以根据哈希值进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:13:48.800

这是一种完全不同的写法（我也可以说“Perl 不是 C”）：

```
#!/usr/bin/env perl

use 5.010;
use strict; use warnings;
use autodie;

use List::Util qw(max);

my ($input_file) = @ARGV;
die "Need an input file\n" unless defined $input_file;

say "Input file = '$input_file'";

open my $input, '<', $input_file;

my %words;

while (my $line = <$input>) {
    chomp $line;

    my @tokens = map lc, grep length, split /[^A-Za-z0-9]+/, $line;
    $words{ $_ } += 1 for @tokens;
}

close $input;

my $max = max values %words;
my @argmax = sort grep { $words{$_} == $max } keys %words;

for my $word (@argmax) {
    printf "%s: %d\n", $word, $max;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:46:21.987

为什么不直接从按值排序的哈希中获取键并提取第一个 X 呢？

这应该提供一个例子： http: [//www.devdaily.com/perl/edu/qanda/plqa00016](http://www.devdaily.com/perl/edu/qanda/plqa00016)

# android - 如何在按钮点击的第二个活动的 web 视图中加载 url

> ID：11231138
> 
> 赞同：0
> 
> 时间：2012-06-27T16:41:54.953
> 
> 标签：android, android-layout, android-intent

我在我的第一个活动中有两个按钮说 A，我在第二个活动中有一个 webview 说 B 现在我想在按钮点击事件的 webview 中加载 url。如果我点击 btn1 按钮，那么 webview 应该显示 google.com 网站，如果我点击 btn2 按钮，那么 webview 应该显示 gmail.com 网站，这是我的 A 和 B 活动代码。提前致谢

**活动 A 代码**

```
 Button btn1 = (Button) findViewById(R.id.btn_google);
            btn1.setOnClickListener(new OnClickListener() {
                 public void onClick(View v) {
                     Intent intent = new Intent (google.this,webview.class);
                     google.this.startActivity(intent);

               }
                }

                    );

             Button btn2 = (Button) findViewById(R.id.btn_gmail);
             btn_signup.setOnClickListener(new OnClickListener() {
                 public void onClick(View v) {

                    Intent intent = new Intent (google.this,webview.class);
                    google.this.startActivity(intent);

               }
                }

                ); 
```

**这是活动B的代码**

```
super.onCreate(savedInstanceState);
          setContentView(R.layout.webview );

           WebViewClient yourWebClient = new WebViewClient()
           {
               // Override page so it's load on my view only
               @Override
               public boolean shouldOverrideUrlLoading(WebView  view, String  url)
               {
                // This line we let me load only pages inside Firstdroid Webpage
                 view.loadUrl(url);
                   // Load new URL Don't override URL Link

                // Return true to override url loading (In this case do nothing).
                return true;
               }
           };

           // Get Web view
           mWebView = (WebView) findViewById( R.id.mywebview ); //This is the id you gave 
           mWebView.getSettings().setJavaScriptEnabled(true);   
           mWebView.getSettings().setSupportZoom(true);       //Zoom Control on web (You don't need this 
                                                  //if ROM supports Multi-Touch      
           mWebView.getSettings().setBuiltInZoomControls(true); //Enable Multitouch if supported by ROM
           mWebView.setWebViewClient(yourWebClient);
           mWebView.reload();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:47:33.080

我没有清楚地理解您的问题，但是要从 webview 的任何位置加载 url，请执行以下操作：

```
mwebview.loadUrl(YOUR_URL); 
```

如果您想将 url 从 A 活动传递到 B 活动，请使用

```
intent.putExtra(KEY,VALUE) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:02:57.037

您必须为 btn1 执行此操作

```
 Intent intent = new Intent (google.this,webview.class);
intent.putExtra("google.com", "http://www.google.com");
                     google.this.startActivity(intent); 
```

您必须为 btn2 执行此操作

```
 Intent intent = new Intent (google.this,webview.class);
intent.putExtra("gmail.com", "http://www.gmail.com");
                     google.this.startActivity(intent); 
```

在活动2

```
Bundle extras = getIntent().getExtras();
if (extras != null){
String googleUrl = extras.getString("google.com");
String gmailUrl = extras.getString("gmail.com");
if (googleUrl != null)
    mWebView.loadUrl(googleUrl);
else if (gmailUrl != null)
 mWebView.loadUrl(gmailUrl);
} 
```

# php - PHP，正则表达式仅在两个保留字符之间替换用户输入中的换行符

> ID：11231139
> 
> 赞同：3
> 
> 时间：2012-06-27T16:42:01.400
> 
> 标签：php, regex, preg-replace

我正在处理一个 textarea 用户输入，其中一些字符被保留，例如：

```
[ means <h1>
] means </h1>
{ means <p>
} means </p> 
```

**用户输入示例：**

```
[Hello World title]
{hello worlds paragraph
and paragraph continues after line break} 
```

**示例系统显示：**

```
<h1>Hello World title<h1>
<p>hello worlds paragraph<br/>
and paragraph continues after line break</p> 
```

* * *

所有 HTML 标签都从用户输入中过滤掉，PHP 脚本将这些字符替换为前端。

我想使用 PHP 函数“nl2br”用 <br/> 替换换行符。

`{`问题只是和字符之间的换行符`}`应该替换为`<br />`.

我还需要考虑用户是否使用`{}`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:48:37.777

我会同时做两个替换，使用[preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)：

```
<?php

$input="{user input
user input}

newlines that aren't replaced";

function format_paragraph($m){
    return '<p>'.nl2br($m[1]).'</p>';
}

echo preg_replace_callback("/\{(.*)\}/s",format_paragraph,$input);

?> 
```

[在这里](http://codepad.org/CrxqFESR)测试代码

此示例将同时添加 p 标记并用
一次替换替换换行符。

# mysql - 将 c-shell 变量设置为 SELECT 语句

> ID：11231140
> 
> 赞同：0
> 
> 时间：2012-06-27T16:42:03.067
> 
> 标签：mysql

我编写了一个 c-shell 脚本来连接数据库。这已经很好了，我现在想调用一个 sql 脚本来读取和打印 cetrain 表中的所有值。到目前为止，这就是我的脚本的样子

```
#!/bin/csh 

set MYSQL=${MYSQL_HOME}/mysql
${MYSQL} ${CLEDBUSER} 
```

其中 CLEDBUSER 设置为环境变量，如下所示 - CLEADBUSER=-uusername -ppassword -Ddatabasename

我能够运行脚本并连接到数据库。当我运行他的脚本时，它给了我等待下一个命令的 msql pront。所以我在脚本中添加了一个包含（SELECT）语句的变量来查询数据库。现在我的脚本看起来像这样

```
#!/bin/csh 

set MYSQL=${MYSQL_HOME}/mysql

set SELECTER="SELECT * FROM TB_EARTH_UI;"

${MYSQL} ${CLEDBUSER} ${SELECTER} 
```

问题是它没有返回我所有的行和columsn，但它返回了mysql promt 和默认选项中可用命令的列表以及vairables 和布尔选项。为什么我的 SELECT 语句没有被读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:50:31.477

MySQL client (`mysql`) expects SQL instructions on its standard input (e.g. your keyboard, when invoking from the shell).

You could do: [edit: please ignore, this one is off-topic]

```
${MYSQL} ${CLEDBUSER} < text_file_of_sql_statements.sql 
```

or

```
${MYSQL} ${CLEDBUSER} << EOF
  ${SELECTER}
  # you can add other litteral SQL statements here, or more variables containing SQL statements
EOF 
```

or

```
${MYSQL} ${CLEDBUSER} --execute="${SELECTER}" 
```

[edit]

I totally misunderstood the OP's question. I didn't get it that he was trying to execute SQL statements from a variable. I have edited the above options (thank you outis). Here is another variation:

```
echo ${SELECTER} | ${MYSQL} ${CLEDBUSER} 
```

Also, the `--skip-column-names` option could make it easier for you to parse the output.

# ruby-on-rails-3 - 单击“主页”时重定向以显示用户配置文件而不是默认主页

> ID：11231141
> 
> 赞同：0
> 
> 时间：2012-06-27T16:42:07.527
> 
> 标签：ruby-on-rails-3, redirect, ruby-on-rails-3.2, railstutorial.org

这个问题源于使用 Michael Hartl 的 Rails 教程创建的示例 Web 应用程序，尽管它不是作者建议的练习之一。

在许多社交网站上，当点击“主页”（例如在网站徽标上）时，用户会被重定向到他们的个人资料而不是默认主页。我想知道如何在教程应用程序中也能做到这一点。

在教程应用程序中，“主页”视图被认为是“静态的”，并由`static_page_controller`仅显示的 a 呈现：

```
def home
end 
```

当我尝试向其中添加以下内容时：

```
def home
  if signed_in?
  redirect_to @user
  end
end 
```

我收到错误“无法重定向到零”。我原以为`@user`是在所有控制器之间共享的（因为`signed_in`……在`user_controller`:中`@user = User.find(params[:id])`）。我将如何修改控制器，以便当它检测到用户登录时，将显示配置文件而不是主页？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:52:46.643

此`signed_in?`方法不要使用`current_user`代替`@user`？

如果是这样，您可以更改线路

```
redirect_to @user 
```

至

```
redirect_to current_user 
```

# iphone - iOS URL 库？

> ID：11231142
> 
> 赞同：-1
> 
> 时间：2012-06-27T16:42:15.330
> 
> 标签：iphone, ios

> **可能重复：**
> [字符串不会在 iOS 中进行 url 编码](https://stackoverflow.com/questions/9187316/string-wont-url-encode-in-ios)

我正在使用 ASIHttpRequest 向我的服务器发送 http 请求。在 Jquery 中，我可以构建一个字典并将字典发送到 jquery 的 ajax 方法，Jquery 将执行 url 编码的事情。

看起来 ASIHttp 缺少这样的 API？我可以使用哪个 API 将字典（或其他简单方法）编码为 url 编码字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:46:59.537

您可以使用

```
- (NSString *)stringByAddingPercentEscapesUsingEncoding:(NSStringEncoding)enc; 
```

例子：

```
NSString* string = @"Hello, World";
NSString* encodedString = [string stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

# c# - CloudBlob.DownloadText 方法插入附加字符？

> ID：11231147
> 
> 赞同：0
> 
> 时间：2012-06-27T16:42:40.807
> 
> 标签：c#, .net, azure, azure-storage, azure-blob-storage

以下单元测试失败：

```
[TestMethod]
public void Add_file_to_blob_and_retrieve_it()
{
    var blobName = Guid.NewGuid().ToString();
    var testFileContents = File.ReadAllText(TestFileSpec);

    Trace.WriteLine(string.Format("Opening blob container {0}", UnitTestBlobAgentName));
    CloudStorageAccount.SetConfigurationSettingPublisher(
            (configName, configSetter) => configSetter(ConfigurationManager.AppSettings[configName]));
    var cloudStorage = CloudStorageAccount.FromConfigurationSetting("StorageConnectionString");
    var blobClient = cloudStorage.CreateCloudBlobClient();
    var container = blobClient.GetContainerReference(UnitTestBlobAgentName.ToLower());

    try
    {
        Trace.WriteLine(string.Format("Uploading file {0}", TestFileSpec));
        var blob = container.GetBlobReference(blobName);
        blob.UploadFile(TestFileSpec);
        blob.Properties.ContentType = "ByteArray";
        blob.SetProperties();
        var blob1 = container.GetBlobReference(blobName);
        var found = blob1.DownloadText();
        Assert.AreEqual(testFileContents.Trim(), found.Trim());
    }
    finally
    {
        if (null != container)
        {
            Trace.WriteLine(string.Format("Deleting blob {0}", blobName));
            var blob2 = container.GetBlobReference(blobName);
            blob2.DeleteIfExists(new BlobRequestOptions { DeleteSnapshotsOption = DeleteSnapshotsOption.IncludeSnapshots });
        }
    }
} 
```

事实证明，返回的字符串以 dword `0xFEFF`（Unicode BOM）开头。我已经通过 Microsoft 调试符号进行了跟踪，并且 BOM 存在于返回流中。AFAICT，它来自类中的`HttpResponse.GetResponseStream()`方法调用方式`Microsoft.WindowsAzure.StorageClient.CloudBlob`。

确保输入和输出相同的最佳方法是什么？在进入之前确保输入转换为Unicode？从输出中剥离 BOM？还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-05T20:48:22.430

这是一个旧的，但是如果您的 blob 在 azure 中被编码为 Unicode，并且您想将其下载到文本字符串中，则此代码可以解决问题。请记住，这里的弱点是您必须分配两次内存。如果有更有效的获取 Unicode 字符串的方法（无论如何，同步），我找不到它。

```
string fileText;
using (var memoryStream = new MemoryStream())
{
    cloudBlob.DownloadToStream(memoryStream);

    memoryStream.Position = 0;

    using (var reader = new StreamReader(memoryStream, Encoding.Unicode))
    {
        fileText = reader.ReadToEnd();
    }
} 
```

# c# - 从字符串中修剪字符

> ID：11231148
> 
> 赞同：5
> 
> 时间：2012-06-27T16:42:41.880
> 
> 标签：c#, string, trim

如果该子字符串存在，我需要从字符串中修剪子字符串。

具体来说，如果字符串是“MainGUI.exe”，那么我需要通过从字符串中修剪“.exe”将其变为“MainGUI”。

我试过这个：

```
 String line = "MainGUI.exe";
     char[] exe = {'e', 'x', 'e', '.'};
     line.TrimEnd(exe); 
```

这给了我“MainGui.exe”的正确答案，但是对于“MainGUIe.exe”之类的东西它不起作用，给了我“MainGUI”而不是“MainGUIe”。

我正在使用 C#。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T16:44:32.470

在命名空间中使用`Path`静态类`System.IO`，它可以让您轻松地从文件名中删除扩展名和目录。您还可以使用它来获取扩展名、完整路径等。这是一个非常方便的类，非常值得研究。

```
var filename = Path.GetFileNameWithoutExtension(line); 
```

给你“MainGui”，当然，这是假设你想修剪任何文件扩展名，或者你知道你的文件总是一个 .exe 文件，如果你只想修剪 .exe 文件的扩展名，但是，并留给其他人。您可以通过使用`String.EndsWith()`或使用`Path.GetExtension()`方法先进行测试。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-27T16:45:02.317

我会使用[Path.GetFileNameWithoutExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension)而不是字符串操作来处理这个问题。

```
string line = “MainGUI.exe”;
string fileWithoutExtension = Path.GetFileNameWithoutExtension(line); 
```

如果您只想剥离扩展名，如果它是`.exe`，您也可以检查它。以下将仅剥离 的扩展名`.exe`，但保留所有其他扩展名：

```
string ext = Path.GetExtension(line).ToLower();
string fileWithoutExtension = ext == ".exe" 
                               ? Path.GetFileNameWithoutExtension(line) 
                               : line; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-27T16:45:17.453

该类`Path`有一个[`GetFileNameWithoutExtension`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx).

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T16:47:11.983

如果您总是修剪“.exe”，则无论字符串的其余部分如何，您都可以修剪最后 4 个字符。

```
line.Substring(0, line.Length - ".exe".Length); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-27T16:53:18.963

```
string line = "MainGUI.exe";
if (line.EndsWith(".exe"))
    line = line.Substring(0, line.Length - 4); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T10:21:40.440

由于没有文件扩展名中包含点 (.)，因此您可以安全地使用它：

```
String line = "MainGUI.exe";
line = line.Substring(0, line.LastIndexOf('.')); 
```

# c# - 在没有平板电脑输入的情况下使用 Microsoft InkAnalysis API？

> ID：11231154
> 
> 赞同：0
> 
> 时间：2012-06-27T16:43:11.543
> 
> 标签：c#, windows, ocr, handwriting, icr

我最近发现所有 Windows 7 机器内部都有一个手写识别 API，称为 Microsoft Ink Analysis ( [http://msdn.microsoft.com/en-us/library/windows/desktop/ms704040(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms704040(v=vs.85).aspx) ）。

我想使用 API 进行智能字符识别 - 将单独间隔的手写字母从图像转换为文本。我发现了与纸质调查（[http://msdn.microsoft.com/en-us/library/ms840402.aspx](http://msdn.microsoft.com/en-us/library/ms840402.aspx)）一起使用的 API 演示，但它出现在所有演示中，手写本身需要实时输入 -

是否可以使用 Ink Analysis API 来分析图像，而不是实时输入？如果是这样，这是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:04:35.563

墨水分析使用从墨水面板输入的笔画信息来识别笔迹（又称“实时输入”），并且不对原始图像数据进行分析。

不幸的是，您需要为此找到一个 OCR 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:46:46.650

我一直在尝试自己回答这个问题，理论上它只适用于实时输入，但墨迹分析还使开发人员能够使用 [Ink.Load](http://msdn.microsoft.com/en-us/library/microsoft.ink.ink.load%28v=vs.90%29.aspx)和[Ink.Save](http://msdn.microsoft.com/en-us/library/microsoft.ink.ink.save%28v=vs.90%29.aspx)保存和加载墨迹笔划。也许您可以将位图图像转换为数组，并将此数组保存到墨水对象中。然后您可以使用墨水分析来分析您的笔画。

# objective-c - Objective-c：知道内存位置是否被释放

> ID：11231156
> 
> 赞同：0
> 
> 时间：2012-06-27T16:43:20.253
> 
> 标签：objective-c, ios, xcode, pointers

我已经为 iOS 项目实现了一个下载器。它接受请求，并在下载完成后通过委托响应目标。它是异步的，并且目标（显然）是一个弱引用，所以当下载完成时，如果目标不再被分配，我有一个 bad_acces。我已经解决了添加一个在所有请求中搜索目标并将其设置为 nil 的方法（在释放使用它的对象时调用）。这与我想要的行为相去甚远（完全独立于其他对象：如果不再请求下载，它将被缓存：它没有停止下载的方法，只有一个优先级队列）有一种安全的方法可以知道是否指针仍然指向有效的内存地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:59:35.163

在回答您的问题时，没有一种好方法可以知道指针仍然有效（除了僵尸，它不是生产环境解决方案，只是一个测试环境工具）。而是担心“我怎么知道这是否是一个悬空指针”，你应该首先不允许出现悬空指针。

创建下载器时，您可能指定了一个委托。当作为委托的对象将要消失时（例如在其 中`dealloc`），它应该告诉下载器将其委托属性设置为`nil`，从而消除悬空指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T03:37:47.570

分析您的代码。专门使用仪器来检查内存泄漏。此外，使用分析来检测可能存在问题的部分。使用不同的工具，它们对开发有很大帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T16:56:49.973

仅通过查看指针指向的内存位置，没有安全的方法可以知道它是否仍指向有效内存（无需编写自己的内存管理器）。

为什么不在代码中保留/释放委托？这将是设计它的正确方法。此外，为您的代码的用户提供从您的委托列表中删除自己的方法。

# sql - 获得正确输出所需的 SQL 输入

> ID：11231158
> 
> 赞同：0
> 
> 时间：2012-06-27T16:43:22.597
> 
> 标签：sql, null

```
Select A.SubscriberKey, A.EventDate,B.CreatedDate
From _Click A
JOIN _ListSubscribers B
ON A.SubscriberKey = B.SubscriberKey
Where B.ListID = '10630' AND B.CreatedDate > (Select DATEADD(day,-180,getdate())) AND A.EventDate IS NULL
Group By A.SubscriberKey,B.CreatedDate, A.EventDate 
```

目前，没有任何东西被退回。我想返回订阅者订阅者密钥（这是他们的电子邮件）、事件日期（点击发生的日期）以及他们没有点击任何内容时的添加日期（创建日期）。谁能帮我指出正确的方向？感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:53:39.427

尝试：

```
SELECT A.SubscriberKey, A.EventDate, B.CreatedDate 
FROM _Click A, _ListSubscribers B 
WHERE A.SubscriberKey(+) = B.SubscriberKey 
AND B.ListID = '10630' 
AND B.CreatedDate > (Select DATEADD(day,-180,getdate())) 
AND nvl(A.EventDate,null) IS NULL 
GROUP BY A.SubscriberKey,B.CreatedDate, A.EventDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:58:48.913

在这种情况下，我看不到 GROUP BY 的目的。您没有进行任何聚合。

我相信这会给你正在寻找的结果。

```
select SubscriberKey,
       null as EventDate,
       CreatedDate
  from _ListSubscribers ls
 where ListID='10630'
   and CreatedDate > DateAdd( day, -180, getdate())
   and not exists( select 1 from _Click c where c.SubscriberKey = B.SubscriberKey ) 
```

以下使用外连接的查询应该给出相同的结果，并且它更类似于您的原始查询。

```
select ls.SubscriberKey,
       c.EventDate,
       ls.CreatedDate
  from _ListSubscribers ls
  left outer join _Click c
    on c.SubscriberKey = ls.SubscriberKey
 where ListID='10630'
   and CreatedDate > DateAdd( day, -180, getdate())
   and c.EventDate is null 
```

# sql - ORACLE 11g SQL中基于字符位置拆分字符串

> ID：11231161
> 
> 赞同：1
> 
> 时间：2012-06-27T16:43:29.990
> 
> 标签：sql, date, oracle11g, type-conversion

我正在使用 oracle 11g sql developer

我有一个日期为 0523 (mmDD) 的 varchar2 列。

我想将它们转换为日期列并让它们看起来像 23-05 (dd-mm)..

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:47:44.900

嗯，你可以直接做字符串操作得到你想要的格式：

```
substring(c, 3, 2)||'-'||substring(c, 1, 2) 
```

要转换为日期，您可以使用：

```
to_date('2012'||c, 'YYYYMMDD') 
```

要将日期转换回您想要的形式：

```
to_char(<date>, 'DD-MM') 
```

# asp.net - asp.net mvc errorhandler 不显示自定义错误页面

> ID：11231165
> 
> 赞同：4
> 
> 时间：2012-06-27T16:43:52.737
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, exception-handling

我正在尝试按照[此链接](http://blogs.msdn.com/b/gduthie/archive/2011/03/17/get-to-know-action-filters-in-asp-net-mvc-3-using-handleerror.aspx)和[此](http://www.aspnet101.com/2011/01/asp-net-mvc-error-handling-using-the-handleerror-filter/)链接中的示例进行操作，但没有显示错误页面，而是收到了 HTTP 500 内部服务器错误。我`<customErrors mode="On" />`在webconfig中有设置。我什至尝试将`[HandleError]`过滤器应用于控制器类。我也试过没有。Error.aspx 也存在于 /Views/Shared/ 中，因此不可能是找不到文件的情况。

我在控制器的操作方法中抛出了 DivideByZero 异常。我想遵循该示例，以便可以为所有需要它们的操作指定一个单独的错误页面。

我在我创建的空白项目中使用 aspx 视图引擎。这不应该是它的原因吧？我也在为此使用母版页。有什么我可能会丢失的吗？

谢谢

**编辑添加的代码**

我将此代码添加到一个新项目并创建了 web.config 条目`<customErrors mode="On" />`

```
 [HandleError]
    public class HomeController : Controller
    {
        //
        // GET: /Home/
        [HandleError]
        public ActionResult Index()
        {

            throw new DivideByZeroException();
            return View();
        }

    } 
```

它没有用！然后我评论说 DivideByZeroException 并在 aspx 视图中添加了无效的 Model.Property。在这两种情况下，我都收到了内部服务器错误。我已经按照文档完成了所有要做的事情。我看到很多其他人有同样的问题，但也无法解决。这是 MVC 3 中的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:32:14.627

我想我已经弄清楚了真正的问题所在。我的主页索引位于母版页中。我将相同的母版页添加到 Visual Studio 开箱即用的默认错误页面中，它对我有用。

文档需要更清楚地指出这一重要要求，......如果它确实是一个。

另一个惊人的发现是你不需要用`[HandleError]`属性来装饰你的控制器类。没有它也适用于默认的错误视图。如果您想要为您的操作或控制器提供特定的自定义视图，您可以提供该属性。像这样：

```
[HandleError(View = "CustomError")] 
```

...其中 CustomError.aspx 只是 View 的共享文件夹或 View-Controller 文件夹本身中的另一个普通 aspx 视图页面。

有没有人在没有将错误页面放在母版页中的情况下完成这项工作，而引发错误的主调用页面在母版页中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:30:33.920

过滤器`HandleError`不会捕获所有错误。它不会捕获在控制器操作/操作过滤器之外引发的异常。此外，它不会捕获具有除`500`.

所以你必须确定异常是在哪里被抛出的，你不应该仅仅依靠`HandleError`返回自定义错误页面，你还必须在该`customErrors`部分中设置一个自定义错误页面。

```
<customErrors defaultRedirect="error.htm" mode="On" 
  redirectMode="ResponseRewrite" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:47:32.380

确保您在 web.config 中激活了自定义错误：

```
<customErrors mode="On" /> 
```

还要确保`~/Views/Shared/Error.aspx`模板存在，因为这是在出现错误时将呈现的内容。

# mysql - 如何理解“无法连接”mysql错误信息？

> ID：11231168
> 
> 赞同：5
> 
> 时间：2012-06-27T16:43:59.870
> 
> 标签：mysql, sql, mysql-error-2003

我有以下错误消息：

> SQLSTATE[HY000] [2003] 无法连接到“192.168.50.45”上的 MySQL 服务器 (4)

我将如何解析这个（我有 HY000，我有 2003，我有（4）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T16:47:18.833

HY000 是一个非常普遍的 ODBC 级别的错误代码，而[2003](http://dev.mysql.com/doc/refman/5.6/en/error-messages-client.html#error_cr_conn_host_error)是 MySQL 特定的错误代码，表示初始服务器连接失败。4 是 MySQL 驱动程序尝试进​​行的失败的操作系统级调用的错误代码。（例如，在 Linux 上，当连接被拒绝时，您将看到“(111)”，因为`connect()`调用失败并出现 ECONNREFUSED 错误代码，其值为 111。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T21:23:58.273

使用 MySQL 自带的 perror 工具：

```
shell> perror 4
OS error code   4:  Interrupted system call 
```

它可能[是一个错误](http://bugs.mysql.com/bug.php?id=64333)报告错误的错误，在这种情况下，它可能是一个简单的连接超时（errno 111）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-27T16:29:11.503

FWIW 花了大约 2-3 个月的时间以各种方式对此进行了研究，我们得出的结论是（至少对我们而言），当网络数据太多而无法连接到在合理的时间内完成。根据我们的调查，（4）发生在握手过程的中途。通过使用“netem”来伪造网络拥塞，您可以在 unix 环境中看到这一点。

快速的解决方案是增加连接超时参数。这将隐藏任何 (4) 错误，但可能不是问题的解决方案。真正的解决方案是查看当时 DB 端发生了什么。如果发生这种情况时您正在处理大量数据，那么看看您是否可以将其拆分为更小的块，或者甚至将处理传递到不同的服务器，如果您有这种奢侈，这可能是一个好主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-16T16:07:23.993

我碰巧遇到了这个问题。增加connect_timeout终于搞定了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-17T04:07:51.733

我只是在同一个问题上苦苦挣扎。

禁用 DNS 主机名查找为我解决了这个问题。

[mysqld] ... ...跳过名称解析

不要忘记重启 MySQL 才能生效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-19T16:34:42.290

@cdhowie虽然在其他情况下您可能是对的，但对于该特定错误，（4）是由握手失败引起的mysql客户端库错误。它实际上在源代码中可见。正常原因是数据过多导致内部超时。为连接腾出“空间”通常会在不掩盖问题的情况下对其进行排序，例如增加超时或增加带宽。

# ruby-on-rails - 您可以在 ActiveRecord 上的 before_save 回调中添加 find_or_create 吗？

> ID：11231175
> 
> 赞同：1
> 
> 时间：2012-06-27T16:44:18.197
> 
> 标签：ruby-on-rails

我希望始终让我的模型在保存之前查看对象是否存在。如果是这样，那么不是创建一个新对象，而是使用现有对象。

是否可以将其直接添加到我的模型的 before_save ActiveRecord 类中？

我相信这是不可能的，因为你无法改变自我的价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:09:42.470

我认为您不能将其添加到`before_save`. 如果您创建对象的地方只有几个，那么您可以手动指定`find_or_create`(or `find_or_initialize`) 而不是仅使用`create`or`new`

如果您总是希望它发生，您可以重写该`new`方法以使其表现得像`find_or_initialize`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:09:53.860

ActiveRecord 已经提供了这个功能。您可以执行以下操作：

```
User.find_or_initialize_by_email('some@email.com') 
```

这将返回数据库中的用户（如果找到）或将电子邮件设置为传递参数的新用户。然后，您可以像其他方式一样使用该对象，并在完成后调用 save （这将根据需要更新或创建）。

[有关http://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)的更多信息（在页面中搜索 find_or_initialize_by_）

# python - 从元组列表创建 Python 列表

> ID：11231186
> 
> 赞同：0
> 
> 时间：2012-06-27T16:44:56.573
> 
> 标签：python, list, tuples

例如，如果我有一个元组列表，例如

```
a = [(1,2)] * 4 
```

我将如何创建每个元组的第一个元素的列表？即，`[1, 1, 1, 1]`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T16:45:40.227

使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
>>> a = [(1,2)] * 4
>>> [t[0] for t in a]
[1, 1, 1, 1] 
```

您还可以解压缩元组：

```
>>> [first for first,second in a]
[1, 1, 1, 1] 
```

如果你想变得花哨，结合[`map`](http://docs.python.org/library/functions.html#map)和[`operator.itemgetter`](http://docs.python.org/library/operator.html#operator.itemgetter)。在 python 3 中，您必须将构造包装起来`list`以获取列表而不是可迭代的：

```
>>> import operator
>>> map(operator.itemgetter(0), a)
<map object at 0x7f3971029290>
>>> list(map(operator.itemgetter(0), a))
[1, 1, 1, 1] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T16:47:20.930

phihag 的列表理解的两种替代方法：

```
[x for x, y in a]

from operator import itemgetter
map(itemgetter(0), a) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T16:48:25.170

有几种方法：

```
>>> a = [(1,2)] * 4

>>> # List comprehension
>>> [x for x, y in a]
[1, 1, 1, 1]

>>> # Map and lambda
>>> map(lambda t: t[0], a)
[1, 1, 1, 1]

>>> # Map and itemgetter
>>> import operator
>>> map(operator.itemgetter(0), a)
[1, 1, 1, 1] 
```

在引入列表推导时，使用*map*的技术失宠，但现在由于并行 map/reduce 和多处理技术而卷土重来：

```
>>> # Multi-threading approach
>>> from multiprocessing.pool import ThreadPool as Pool
>>> Pool(2).map(operator.itemgetter(0), a)
[1, 1, 1, 1]

>>> # Multiple processes approach
>>> from multiprocessing import Pool
>>> def first(t):
        return t[0]
>>> Pool(2).map(first, a)
[1, 1, 1, 1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T16:46:58.723

```
a = [(1,2)] * 4
first_els = [x[0] for x in a] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T21:47:46.253

假设您有一个元组列表：

```
lta = [(1,2), (2,3), (44,45), (37,38)] 
```

访问每个元组的第一个元素将涉及使用 [0] 下标，访问每个元组以提取每个第一个元素将涉及一个列表推导，它可以分配给一个变量，如下所示：

```
resultant_list = [element[0] for element in lta]
>>> resultant_list
[1, 2, 44, 37] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T18:43:17.003

我最近发现了 Python 的`zip()`功能。在这里做我想做的另一种方法是：

```
list( zip( *a )[0] ) 
```

`tup_list = zip( list1, list2 )`将两个列表交错成一个 2 元组列表，但`zip( *tup_list )`相反，导致一个元组的列表`list1`和 的元组`list2`。

# windows-phone-7 - http请求错误

> ID：11231187
> 
> 赞同：0
> 
> 时间：2012-06-27T16:44:57.883
> 
> 标签：windows-phone-7, http, http-status-code-302

我正在向 google.com 发出 http 请求。这就是我这样做的方式：

```
 HttpTestWebRequest = (HttpWebRequest)System.Net.WebRequest.Create("http://www.google.com/");
    HttpTestWebRequest.Method = "GET";
    HttpTestWebRequest.BeginGetResponse(GetHttpTestResponse, HttpTestWebRequest);

...

private void GetHttpTestResponse(IAsyncResult asynchronousResult)
{
    var webRequest = (HttpWebRequest)asynchronousResult.AsyncState;
    WebResponse response =((HttpWebRequest)asynchronousResult.AsyncState).EndGetResponse(asynchronousResult);
    ...
} 
```

使用提琴手，它给了我一个 http 302 移动状态码，但在应用程序中它会抛出一个异常并且不会重定向到网站的新位置。

任何想法为什么会发生这种情况？

**更新 1**

我得到一个`NullReferenceException`.

堆栈跟踪是：

> 在 System.Net.Browser.HttpWebRequestHelper.RemoveHttpOnlyCookies(Uri requestUri, String setCookieHeaderValue)
> 在 System.Net.Browser.HttpWebRequestHelper.ParseHeaders(Uri requestUri, SecurityCriticalDataForMultipleGetAndSet`1 标头, WebHeaderCollection 集合, Boolean removeHttpOnlyCookies, HttpStatusCode& status, String& statusDescription)
> 在系统.Net.Browser.ClientHttpWebRequest.Progress(Object sender, EventArgs e)
> at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
> at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs , Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:42:50.263

着陆页 (http://www.google.com) 上似乎有一些特定的 HTTP 标头（谷歌似乎发送了一些重复的 cookie 标头），这导致了这种情况！其他网站/页面似乎加载正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:55:58.540

尝试设置`HttpTestWebRequest.AllowAutoRedirect = true;`

# tridion - 是否可以将值从 SDL Tridion 2011 GUI 扩展传递到事件处理程序中的 SaveEventArgs

> ID：11231189
> 
> 赞同：5
> 
> 时间：2012-06-27T16:45:02.317
> 
> 标签：tridion, tridion-2011

我正在使用 SDL Tridion 2011 SP1 构建一个 GUI 扩展。当编辑器点击新的“保存和评论”按钮时，我想收集一些用户输入。此按钮将收集一些用户输入，然后触发 CME 的内置保存命令。

然后使用事件处理程序，我想捕获该用户输入，并对其进行一些自定义处理。我的简单事件处理程序如下：

```
using System;
using System.Text;
using Tridion.ContentManager.Extensibility.Events;
using Tridion.ContentManager.Extensibility;
using Tridion.ContentManager.ContentManagement;
using System.IO;

namespace UrbanCherry.Net.SDLTridion.EventHandlers
{
  [TcmExtension("VersionCommenting")]
  public class VersionCommenting : TcmExtension
  {
    public VersionCommenting()
    {
      Subscribe();
    }

    public void Subscribe()
    {
      EventSystem.Subscribe<Component, SaveEventArgs>(AddCommentToItemVersion,
                                                      EventPhases.Initiated);
    }

    private void AddCommentToItemVersion(Component source, SaveEventArgs args,
                                         EventPhases phase)
    {
      //Do some work here   
    }
  }
} 
```

`args.ContextVariables`我的 GUI 扩展是否可以使用 the或其他方法以某种方式向 SaveEventArgs 添加值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:04:27.190

只是一个想法，不知道如何在 GUI 扩展中实际执行此操作，但是您是否想过在单击按钮时将注释设置为项目上的应用程序数据？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:24:48.163

没有直接的方法可以将参数从 GUI 扩展传递到事件处理程序。所以我能想象的唯一方法是将附加信息捎带到现有的数据结构中。应用程序数据（如 Will 所建议的）就是这样一种数据结构，但您也可以考虑**将信息捎带到现有的 Component XML 上**。

由于您同时拥有 GUI 扩展和事件处理程序，因此您基本上可以在前者中做任何您想做的事情，只要您在后者中“撤消”这些更改。

所以我可以想象一种方式：

1.  在您的 GUI 扩展中，将带有注释的自定义元素注入到组件 XML 中
2.  在您的事件处理程序中，提取注释并删除自定义元素

I haven't tested this approach, but have done similar thing with custom Data Extenders: change the command or data sent to the server and then on the server detect that change and act on it (before passing it on to TCM).

Of course you'd have to make sure your event handler in this case removes the comment from the Component XML in one of the earlier phases.

If you want to do it safely you should take the comment off from the Component XML in a very early event phase and then only save the comment in the pre-commit/post-commit phase. In between those phases you'd have to store the comment somewhere, but at least the data made it from the GUI to the server by then.

# objective-c - 如何创建一个包含整数、字符串等的字节数组

> ID：11231190
> 
> 赞同：0
> 
> 时间：2012-06-27T16:45:07.983
> 
> 标签：objective-c, bytearray, byte

我需要创建一个字节数组。我有 10 个值（整数、字符串和其他值），我需要保存在一个数组中以返回另一个方法来通过套接字发送。

1.  我必须将 String 或 int 转换为 byte
2.  在某些情况下，我必须使用掩码，例如：`((lenghtPack & 0xFF) >> 8)`
3.  我必须将字节保存到数组中。

我需要一些帮助，因为我尝试使用`NSData`, `NSMutablearray`，但我无法工作。

有人能告诉我什么是最好的方法以及怎么做吗？谢谢。

# jquery - Javascript：参考错误

> ID：11231191
> 
> 赞同：2
> 
> 时间：2012-06-27T16:45:13.547
> 
> 标签：jquery, javascript-events, javascript

我正在尝试在输入表单中调用带有 onchange() 的函数

当我在 Chrome 中检查控制台时，返回以下代码：

```
ReferenceError: changingNow is not defined 
```

在野生动物园中，它说

```
 ReferenceError: Can't find variable changingNow 
```

这是代码：

```
function changingNow() {
 first_name=document.getElementById(first_name);
 last_name=document.getElementById(last_name);
 username=document.getElementById(username);
 category=document.getElementById(category);
 if ((first_name!=="")&&(last_name!=="")&&(username!=="")&&(category!="empty")) {
   form1.process.disabled = false;
 }
 else {
  form1.process.disabled = true;
 }

 document.getElementById('tweet').value = 'I just voted for '+first_name+' '+last_name+'('+username+')'+'in the '+category+' category!';
 }

 First Name<input type="text" name="first_name" id="first_name" class="first_name" maxlength="50" onchange="changingNow"/><br/> 
```

谷歌搜索这似乎表明 jQuery 负责，但页面上没有 jQuery。

谢谢

编辑

Rob W 是正确的，我已经尝试过括号，它们在排序这个问题时无关紧要。不管怎么说，还是要谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:10:13.227

你的代码有很多问题。对于初学者，获取各种文本字段值的行是不正确的：

```
first_name=document.getElementById(first_name); 
```

`getElementById`需要一个字符串。您没有传递字符串，而是传递了一个尚未定义的变量，名为`first_name`. 要使它成为一个字符串，请给出一些引号！其次，您没有使用`var`关键字，这会影响变量的范围。最后，纠正了这两个错误，你仍然没有得到值，你得到了元素——`getElementById`给你一个`HTMLElementObject`. 进一步，您尝试将此对象视为字符串：

```
first_name!=="" 
```

就目前而言， first_name**永远不会**等于空字符串，因为它不是字符串，而是对象。把它们放在一起，你想要：

```
var first_name=document.getElementById('first_name').value; 
```

这将为您提供 ID 为“first_name”的文本字段的值作为字符串。

此外，您的 if 语句有太多括号！

```
if ((first_name!=="")&&(last_name!=="")&&(username!=="")&&(category!="empty")) 
```

这些括号不是必需的，而是：

```
if (first_name !== "" && last_name !== "" && username !== "" && category!= "empty"){ }

// or my personal preference:

if (
     first_name !== "" &&
     last_name !== "" &&
     username !== "" &&
     category!= "empty"
){ } 
```

最后，我建议删除内联`onchange`事件并将其替换为 javascript 分配：

```
document.getElementById('first_name').onchange = changingNow; 
```

这只是应用事件的一种方式，[有关更多信息，请参阅此答案](https://stackoverflow.com/questions/6902033/element-onload-vs-element-addeventlistenerload-callbak-false/6902073#6902073)。

把它们放在一起：

```
var changingNow = function() {
    var first_name = document.getElementById('first_name').value;
    var last_name = document.getElementById('last_name').value;
    var username = document.getElementById('username').value;
    var category = document.getElementById('category').value;
    var form1 = document.getElementById('form1');
     if (
         first_name !== "" &&
         last_name !== "" &&
         username !== "" &&
         category!= "please choose a category"
    ){
        // this line of code is not valid in regular JS...
        //form1.process.disabled = false;
        document.getElementById('tweet').value = 'I just voted for '+first_name+' '+last_name+' ('+username+')'+' in the '+category+' category!';
    } else {
        // this line of code is not valid in regular JS...
         //form1.process.disabled = true;
        document.getElementById('tweet').value = 'please complete the fields above!';
    }
}
document.getElementById('first_name').onchange = changingNow;
document.getElementById('last_name').onchange = changingNow;
document.getElementById('username').onchange = changingNow;
document.getElementById('category').onchange = changingNow;
changingNow(); 
```

在这里试试：http: [//jsfiddle.net/yzbWr/](http://jsfiddle.net/yzbWr/)

**文档**

*   `document.getElementById`在 MDN - [https://developer.mozilla.org/en/DOM/document.getElementById](https://developer.mozilla.org/en/DOM/document.getElementById)
*   `addEventListener`在 MDN - [https://developer.mozilla.org/en/DOM/element](https://developer.mozilla.org/en/DOM/element)
*   MDN 上的可变范围备忘单 - [https://developer.mozilla.org/en/JavaScript/Reference/Scope_Cheatsheet](https://developer.mozilla.org/en/JavaScript/Reference/Scope_Cheatsheet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:06:04.113

您可以通过为您的应用程序提供一个全局命名空间然后显式调用该方法来解决此问题：

```
window.myApp = {};
window.myApp.changingNow = function(){
    // your function code here
}; 
```

然后在您的 HTML 中：

```
<input type="text" ... onchange="window.myApp.changingNow"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:54:44.397

可能是`function changingNow()`您在插入`<input>`字段之后定义了它，并且因为您没有执行它 onchange 而是将其分配给 onchange ( `changingNow()`vs `changingNow`)，所以您最终将其分配给`undefined`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T19:34:00.563

先生们（和女士们？？）我们的问题似乎已经解决了。可悲的是，我的问题是 `<script type="text/javascript">`省略了“文本”。

尽管如此，还是有解决办法的。似乎 () 是必要的，但我感谢 Chris 的出色回答，而且他对 getelementbyid 的评论确实是正确的。

你的等等，

# iphone - 如何将数据存储在coredata iphone中？

> ID：11231196
> 
> 赞同：-1
> 
> 时间：2012-06-27T16:45:30.330
> 
> 标签：iphone, objective-c, ios, core-data

我正在使用 iPhone 消息传递应用程序。上午`using coredata to store the messages(Sent by the user and received from the webservice), username, date and time`。我想保存一次用户名并将发送/接收的消息和日期添加到相应的用户名。

像这样：

```
No   Name        Date                ReceivedMessage        SendMessage
1    Gopinath    27 june, 12.01pm    Hi                     ----
                 27 june, 12.02pm    ----                   Hello

2    ABCD        26 june, 1.01pm     Hi                     ----
                 26 june, 2.02pm     ----                   Hello
                 27 june, 8pm        Hi Gopi                ---- 
```

收到的消息应该在我从服务接收时存储，而 Sendmessage 将在用户撰写和发送消息时存储。

谁能帮助我如何在我的项目中使用 CoreData 存储这样的数据？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:57:54.267

创建具有以下属性的实体：

```
Message
- mid: uint // message ID
- name: string
- date: date
- sent: boolean
- message: string 
```

消息是通过以下方式创建的：

```
[NSEntityDescription insertNewObjectForEntityForName: @"Message" inManagedObjectContext: context] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:00:19.243

您可以在网上找到的大多数 CoreData 教程都涵盖了这一点。看来你可以用一张桌子做到这一点。

只需遵循这样的教程： [http ://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

此外，fabre 还做了一个关于您的桌子可能是什么样子的快速示例。

您不会在这里找到完整的代码示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:26:03.860

这是一个很笼统的问题。

您可以在一个实体中执行此操作，但从一开始就正确执行。创建一个用户实体和一个消息实体。创建关系，一个用户在他们之间有许多消息。当您决定要存储有关用户的更多数据时，它将为您节省重构。使用一个实体，您将复制数据。

阅读有关规范化数据库表的信息。

阅读核心数据编程指南。

当您有更具体的问题时，您将在此处获得大量帮助。

# linux - 我的脚本应该使用 cp 或 mv 来更健壮吗？

> ID：11231198
> 
> 赞同：6
> 
> 时间：2012-06-27T16:45:34.440
> 
> 标签：linux, bash, error-handling, fault, robustness

我有一个 bash 脚本（Scientific Linux）。该脚本必须对文件进行操作。假设“file.dat”（大约 1 GB 大小）一段时间后，脚本重新启动并执行以下操作：

```
if [ -f file.dat ];  then
    cp file.dat file.previous.dat
fi 
```

备份文件。然后一个进程启动并覆盖“file.dat”

为了安全起见（断电或任何意外情况）。最好的选择是什么： cp 或 mv ？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:49:02.373

我会使用一个组合：

```
mv file.dat file.dat.previous
cp file.dat.previous file.dat 
```

这种方式`file.dat.previous`将永远是完整的，就像`mv`原子一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T06:49:37.850

### 错误问题的正确答案

如果你想要一个快速的原子动作，那么*mv*就是要做的事情，因为它`man 2 rename`说：

> 如果 newpath 已经存在，它将被原子地替换（受一些条件的影响；请参阅下面的错误），以便尝试访问 newpath 的另一个进程不会发现它丢失。

或许更重要的是，*mv*很大程度上是一个目录入口操作，因此在任何正常情况下，它都比文件复制快得多。

### 正确问题的正确答案

如果您担心停电或系统意外关闭，那么：

1.  连接不间断电源。真的。求解威胁模型。
2.  确保您使用的是电池供电的 RAID 控制器。
3.  使关键写入同步。
4.  使用日志文件系统来记录数据，而不仅仅是元数据。

*mv*命令应该更快，但面对灾难性故障时的稳健性是硬件或文件系统问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:49:38.370

在这里可能没有太大帮助，但`rsync`它是这种工作的工具。如果传输被中断，它可以从它需要去的地方重新启动。

# wpf - WPF 与默认 Windows 主题不一致

> ID：11231201
> 
> 赞同：1
> 
> 时间：2012-06-27T16:45:45.750
> 
> 标签：wpf, themes, aero

我真的需要你在这方面的帮助。

我正在开发一个 WPF 应用程序。在我的开发机器中，我使用的是带有 Aero 主题的 Windows 7。

我已将应用程序交付给使用 Server 2008 的同事，但没有 Aero 主题。

好吧，应用程序的外观和下降发生了巨大变化。

主要问题是我不理解某些行为的原因。让我们选择一个应该简单并且足以让我理解真正问题的：扩展器！

我在 UserControl 中使用了很多扩展器，并且我已经声明扩展器样式具有：

```
<Style TargetType="Expander">
    <Setter Property="Background" Value="#FF9B9B9B" />
    <Setter Property="Padding" Value="0" />
</Style> 
```

这在我的机器上看起来很棒（带有 Aero 的 Windows 7）。在我的同事机器中，背景值受到尊重，但切换按钮具有灰色背景边框（看起来像 SystemColors.ControlBrushKey）。

在启用 Aero 的情况下，这是我想要的方式： ![在此处输入图像描述](../Images/bfa32886f3d74087eb55d6bab904ea29.png)

这就是我在经典主题中得到的： ![在此处输入图像描述](../Images/450a41b3f49575d94d7401f417ce553b.png)

我在这里做错了什么？我该怎么做才能使我的应用程序在 Aero 和 Classic 中看起来不错？

如果我将 Aero XAML 文件与我的应用程序一起提供，它是否可以在 XP 机器上运行？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:34:12.463

看看这篇[博文](http://www.kennethham.com/wp/2010/11/force-wpf-to-use-windows-7aero-theming-in-classic-mode/)。看来作者可能已经解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T07:40:52.633

看来我找到了问题所在。我不太明白为什么会这样，但是......

问题在于样式定义。它必须是这样的：

```
<Style TargetType="{x:Type Expander}" BasedOn="{StaticResource {x:Type Expander}}"> 
```

因此，我必须分析我定义的所有样式并添加“BasedOn”属性。

谢谢你们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:53:43.420

您可以通过添加命名空间来强制窗口的航空主题

```
xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero" 
```

这将适用于 XP 机器，因为它内置于 WPF 随附的程序集中。

# php - PHP过去时间验证

> ID：11231203
> 
> 赞同：-10
> 
> 时间：2012-06-27T16:45:59.693
> 
> 标签：php

我在这里验证我在 PHP 上的 $input 的时间时遇到问题。我的输入值为

> yy-mm-dd hh:mm PM/AM

如果选择的日期是过去或今天，则会出现错误。我怎样才能做到这一点？

任何帮助都是一种感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:47:22.110

[`strtotime`](http://php.net/manual/en/function.strtotime.php)是你的朋友。

```
$input = '2012-06-07 01:23 PM';
if(strtotime($input) < time()){
    echo "error";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:50:26.870

您说的是今天，所以我假设您指的不是当前时间，而是当前日期？

```
<?php
$input = strtotime( '2012-06-07 01:23 PM' );

if ( date( 'Y-m-d', $input ) == date( 'Y-m-d' ) || $input > time() ) {
    echo 'ERROR';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:54:06.917

```
$today = strtotime($todays_date);
$expiration_date = strtotime($input);
if ($expiration_date > $today) {
 #你要执行的代码放在这里
}

```

或使用[日期时间](http://au.php.net/manual/en/class.datetime.php)

```
$d1 = new DateTime("now");
$d2 = 新日期时间($input);
#使用PHP的关系运算符比较两者。

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T16:54:32.347

在 PHP 中，您可以使用以下方法进行检查：

```
$input_date_time = strtotime( 'your input date here' );
$input_date = strtotime(date( 'Y-m-d', $input_date_time ));
$current_date = strtotime(date( 'Y-m-d',time()));

if ($input_date_time < time () || $input_date == $current_date) {
       echo "error here";
} 
```

您还可以使用 jQuery 日期时间选择器。如果您使用 jQuery 日期时间选择器，则可以选择阻止选择当前日期之前的日期或您想要的日期。

希望这可以帮助

# windows - Windows 上的 MediaWiki-API 安装

> ID：11231209
> 
> 赞同：0
> 
> 时间：2012-06-27T16:46:18.837
> 
> 标签：windows, perl, installation, mediawiki, mediawiki-api

尝试在 Windows 服务器上使用 MediaWiki::Bot 和 Mediawiki::API 自动使用 perl 脚本，取自

[http://metacpan.org/pod/MediaWiki::Bot](http://metacpan.org/pod/MediaWiki%3a%3aBot)

[http://metacpan.org/pod/MediaWiki::API](http://metacpan.org/pod/MediaWiki%3a%3aAPI)

安装问题

```
C:\Users\user\Downloads\MediaWiki-API-0.36>perl Makefile.PL
Set up gcc environment - 3.4.5 (mingw-vista special r3)
Writing Makefile for MediaWiki::API

C:\Users\user\Downloads\MediaWiki-API-0.36>make
/bin/sh: C:Perlbinperl.exe: command not found
make: *** [blib\lib\MediaWiki\\.exists] Error 127 
```

在 MediaWiki-Bot 上也看到了同样的问题，所以我只是将 API.pm 和 Bot.pm 文件复制到 c:/Perl/lib/MediaWiki 文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:00:36.277

看起来它正在尝试查找 C:\Perl\bin\perl.exe 但路径分隔符被视为转义字符。您可以尝试在 Makefile 中将 \ 替换为 /。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T20:46:36.310

以粗体字执行以下操作：

C:\Users\User\Desktop\MediaWiki-Bot-5.005004> **perl Makefile.PL**

> 设置 gcc 环境 - gcc.exe (rubenvb-4.5.4) 4.5.4 为 MediaWiki::Bot 编写 Makefile 编写 MYMETA.yml 和 MYMETA.json

C:\Users\User\Desktop\MediaWiki-Bot-5.005004> **perl Build.PL**

> 设置 gcc 环境 - gcc.exe (rubenvb-4.5.4) 4.5.4 设置 gcc 环境 - gcc.exe (rubenvb-4.5.4) 4.5.4 创建 MYMETA.yml 和 MYMETA.json 创建新的“构建”脚本对于“MediaWiki-Bot”版本“5.005004”

C:\Users\User\Desktop\MediaWiki-Bot-5.005004> **Build.bat**

> 搭建 gcc 环境 - gcc.exe (rubenvb-4.5.4) 4.5.4 搭建 gcc 环境 - gcc.exe (rubenvb-4.5.4) 4.5.4 搭建 gcc 环境 - gcc.exe (rubenvb-4.5.4 ) 4.5.4 构建MediaWiki-Bot

转到 lib/MediaWiki 文件夹，将生成的 Bot.pm 复制到安装 perl 的文件夹中。重新打开您的 IDE 或 IDE 中的源代码，它应该可以工作。

# ios - 设置 UIKeyboard 附件视图时遇到问题

> ID：11231219
> 
> 赞同：0
> 
> 时间：2012-06-27T16:47:12.327
> 
> 标签：ios, ios5, uikit, uitextfield, uikeyboard

我有一个`UIToolbar`包含`UITextField`内部的实例。我想将工具栏设置在`UITextField`它包含的附件​​视图中。

我这样做的方式如下：

```
[myTextView setInputAccessoryView:myToolbar]; 
```

当我编译并运行代码时，当我按下文本字段时，整个键盘就会消失。我特别确保我设置的是`inputAccessoryView`而不是`inputView`. 似乎整个输入视图刚刚被替换，没有任何明确的指示。

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T17:02:59.347

将文本字段放在输入附件视图中通常不好...如果您将工具栏放在视图底部然后使用`UIKeyboardWillChangeFrameNotification`键盘移动工具栏会更好...

在您看来DidLoad：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillChange:) name:UIKeyboardWillChangeFrameNotification object:nil]; 
```

在您的视图控制器代码中的某处：

```
-(void) keyboardWillChange:(NSNotification*)notify {

    CGRect endFrame;
    float duration = [[[notify userInfo] valueForKey:UIKeyboardAnimationDurationUserInfoKey] floatValue];
    [[[notify userInfo] valueForKey:UIKeyboardFrameEndUserInfoKey] getValue:&endFrame];
    endFrame = [self.view convertRect:endFrame fromView:nil];
    float y = (endFrame.origin.y > self.view.bounds.size.height ? self.view.bounds.size.height-44 : endFrame.origin.y-44);

    [UIView animateWithDuration:duration animations:^{
        toolbar.frame = CGRectMake(0, y, self.view.bounds.size.width, 44);
    }];

} 
```

# c# - GetLastInputInfo 的整数环绕问题

> ID：11231220
> 
> 赞同：4
> 
> 时间：2012-06-27T16:47:12.630
> 
> 标签：c#, .net, winapi, int

我想检查我的应用程序中的用户不活动。我做了一些研究并选择使用 GetLastInputInfo 和 Environment.TickCount 因为它看起来很简单。不幸的是，事实证明它有点敏感。

GetLastInputInfo 返回一个[LASTINPUTINFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646272%28v=vs.85%29.aspx)结构，该结构具有最后一个“TickCount”值作为 DWORD（即 UInt32）。理论上，我想从 Environment.TickCount 中减去该值，这给了我用户处于非活动状态的毫秒数。

Environment.TickCount 返回一个 Int32。当它们达到最大值时，两者都会环绕，这对于 Int32 和 UInt32 是不同的。处理这个我有点不舒服，特别是因为代码基本上无法测试（Environment.TickCount 会在 24.9 天后环绕，并且该功能在此之前到期）。

这是我到目前为止所做的：

```
[DllImport("user32.dll")]
static extern bool GetLastInputInfo(out LastInputInfo plii);
struct LastInputInfo
{
  public uint cbSize;
  public uint dwTime;
}

//(...)
var lastInputInfo = new LastInputInfo();
lastInputInfo.cbSize = (uint)Marshal.SizeOf(lastInputInfo);
if (GetLastInputInfo(out lastInputInfo))
{
  // The next line obviously will not work when either of the terms has wrapped around
  var idleTime = Environment.TickCount - lastInputInfo.dwTime;
  if (idleTime > mTimeOut)
  {
    // user is inactive!
  }
} 
```

是否有一种足够简单的方法来处理这两种环绕，或者我应该使用另一种方法来完全检测用户的不活动？此外，对于如何在不使用计算机 25 天的情况下进行测试的任何建议，我们将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T17:09:12.707

由于不活动的时间比滴答计数器的容量要小得多，所以这根本不是问题。

如果其中一个计数器已环绕而不是另一个，则减法中的结果也将环绕并为您提供正确的结果。您只需要转换这些值，以便它们是相同的数据类型：

```
int idleTime = Environment.TickCount - (int)lastInputInfo.dwTime; 
```

例如，如果`Environment.TickCount`绕到 -2147483612 并且 lastInputInfo.dwTime 为 2147483624，则 -2147483612 - 2147483624 = 60。

您甚至可以将这两个值转换为较小的数据类型，例如 Int16，只要空闲时间适合数据类型，在减法之后您仍然会得到正确的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T18:44:15.330

这只是对 Guffa 答案的补充。

依靠整数溢出始终使用`unchecked`关键字是“最佳实践”。有两个原因：

1.  它让读者知道你故意依赖溢出
2.  虽然未选中是 C# 中的默认设置，但可以在编译器的命令行上进行更改。

[选中和未选中（C# 参考）](http://msdn.microsoft.com/en-us/library/khy08726.aspx)

```
int idleTime = unchecked(Environment.TickCount - (int)lastInputInfo.dwTime); 
```

# c# - 未设置 cookie 路径时的 CookieCollection 问题

> ID：11231226
> 
> 赞同：2
> 
> 时间：2012-06-27T16:47:25.440
> 
> 标签：c#, .net, cookies, .net-4.0

我正在使用`HttpWebRequest`和`HttpWebResponse`抓取一个网站。我`CookieContainer`对每个请求都使用相同的，以确保自动处理 cookie。

但是，其中一个请求需要特定的 cookie，该 cookie 在先前的响应中设置。虽然这存在于集合中，但其`Path`属性似乎不正确。根据[RFC2109](http://www.ietf.org/rfc/rfc2109.txt)（第 7 页），当 cookie 设置为空白路径（就像这个一样）时，路径应设置为请求的 URL，直到但不包括最后的斜杠。实际发生的情况是它被设置为*整个*URL 路径，这意味着 cookie 不能随后被同一子域中的不同 URL 读取。

一个例子：

1.  [我在http://www.myserver.com/sub/mypage.php](http://www.myserver.com/sub/mypage.php)请求页面
2.  响应包含一个`Set-Cookie`标头，其内容为*mycookie=12345; 到期=格林威治标准时间 2012 年 6 月 27 日星期三 16:20:00*
3.  cookie 被添加到 .NET CookieCollection。由于没有设置路径，路径被错误地初始化为*/sub/mypage.php*
4.  我请求同一子域下的另一个页面，但它需要 mycookie cookie，例如[http://www.myserver.com/sub/anotherpage.php](http://www.myserver.com/sub/anotherpage.php)
5.  .NET 不提供 cookie，因为路径不完全匹配。如果路径是*/sub*，它将被正确地提供

我使用带有 Firebug 和 Firecookie 扩展的 Firefox 浏览器执行了相同的导航步骤。在实际浏览器会话中，路径设置正确，即子域。

任何人都可以确认这一点并可能指出我解决此问题的方法或解决方法吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:07:38.923

这是有问题的内部代码。看起来不像是一个意外的错误。如果问题不符合标准，您应该报告问题。

```
switch (this.m_cookieVariant)
{
    case CookieVariant.Plain:
        this.m_path = absolutePath;
        break;

    case CookieVariant.Rfc2109:
        this.m_path = absolutePath.Substring(0, absolutePath.LastIndexOf('/'));
        break;

    default:
        this.m_path = absolutePath.Substring(0, absolutePath.LastIndexOf('/') + 1);
        break;
} 
```

因此，除非 cookie 本身另有说明，否则它使用普通 cookie 变体。

您将不得不遍历所有 cookie 检查。真的，这是我讨厌 .net 的 cookie 处理的众多原因之一。无法轻松获取所有域/cookie。最简单的解决方法是执行以下操作。但是，您最终会得到重复的 cookie。因此，您可能希望通过 uri 获取 cookie。

```
public static CookieCollection FixCookies(CookieCollection collection)
{
    foreach (Cookie cookie in collection)
    {
        if (string.IsNullOrEmpty(cookie.Path))
            continue;

        int idx = cookie.Path.LastIndexOf('/');
        if (idx == -1)
            continue;

        cookie.Path = cookie.Path.Substring(0, idx);
    }
    return collection;
}

[STAThread]
private static void Main(string[] args)
{
    var http = (HttpWebRequest)WebRequest.Create("http://localhost/test/test.php");
    http.CookieContainer = new CookieContainer();
    var resp = (HttpWebResponse)http.GetResponse();
    http.CookieContainer.Add(FixCookies(resp.Cookies));
} 
```

# php - 将图像发布到我的墙上后重定向回我的网页

> ID：11231229
> 
> 赞同：0
> 
> 时间：2012-06-27T16:47:30.397
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我有一个具有 Facebook 功能的网站（发送个人消息、发布到墙上）。我有一个带有将图像发布到用户`wall photos`相册的表单的页面。

我的问题是，在发布图片（发布表单）后，我被重定向到这个网址： `https://graph.facebook.com/'ALBUM_ID'/photos?access_token=AAAEzcP64ySABAA3YYxBzRlrtUn..............`

在浏览器中我看到了这个：（为了安全起见，我删除了数字）

```
{
   "id": "ID NUMBER HERE", 
   "post_id": "POST ID NUMBER HERE"
} 
```

我如何告诉 Facebook 将我重定向回我的页面。

我的代码是：

```
$app_id = APP_ID;
$app_secret = APP_SECRET;
$my_url = "MY_URL";
$page_id = "PAGE_ID"; // Set this to your APP_ID for Applications

$code = $_REQUEST["code"];

if(empty($code)) {
  // Get permission from the user to publish to their page. 
  $dialog_url = "http://www.facebook.com/dialog/oauth?client_id="
    . $app_id . "&redirect_uri=" . urlencode($my_url)
    . "&scope=publish_stream,manage_pages";
  echo('<script>top.location.href="' . $dialog_url . '";</script>');
} else {

  // Get access token for the user, so we can GET /me/accounts
  $token_url = "https://graph.facebook.com/oauth/access_token?client_id="
      . $app_id . "&redirect_uri=" . urlencode($my_url)
      . "&client_secret=" . $app_secret
      . "&code=" . $code;
  $access_token = file_get_contents($token_url);

  $accounts_url = "https://graph.facebook.com/me/accounts?" . $access_token;
  $response = file_get_contents($accounts_url);

  // Parse the return value and get the array of accounts we have
  // access to. This is returned in the data[] array. 
  $resp_obj = json_decode($response,true);
  $accounts = $resp_obj['data'];

  // Find the access token for the page to which we want to post the video.
  foreach($accounts as $account) {
       if($account['id'] == $page_id) {
         $access_token = $account['access_token'];
         break;
       }
  }

  $ALBUM_ID = "ALBUM_ID";

      // Show photo upload form to user and post to the Graph URL
      $image_post = "https://graph.facebook.com/" . $ALBUM_ID . "/photos?"
      . "access_token=" .$access_token;

        $video_post = "https://graph-video.facebook.com/" . $page_id . "/videos?"
      . "title=testTitle" . "&description=testDescription"
      . "&access_token=". $access_token;

?>
  <table align="center">
             <tr>                                                                                                 
                 <td>

                     <?php
         echo '<html><body>';
         echo '<form enctype="multipart/form-data" action="'
         .image_post.' "method="POST">';
         echo 'Please choose a photo: ';
         echo '<input name="source" type="file"><br/>';
         echo 'Say something about this photo: <br/>';
         echo '<textarea id="fbText" name="message" 
             rows="4" cols="47">';
         echo '</textarea><br/><br/>';
         echo '<input type="submit" value="Upload"/><br/>';
         echo '</form>';
         echo '</body></html>';
      }
          ?>
                 </td>

             </tr>
  <?php 
```

我已经尝试添加`&redirect_uri=" . urlencode($my_url)`到，`$image_post`但这并没有改变行为中的任何内容，并将我重定向到同一页面而不返回。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:07:01.393

在我看来，您有 3 个选项：

1\. 这仅在您不关心来自 facebook 的响应时才有效：

```
<iframe name="uploader" onLoad="locationChange(this)"></iframe>

<form method="POST" action="..." target="uploader">
...
</form>

funnction locationChange(ifrm) {
    console.log("iframe location has changed to: ", ifrm.src);
} 
```

这样做的问题是，如果上传失败，您将不会意识到，这意味着您无法区分成功的上传和失败的上传。
您无法从 iframe 读取数据的原因是您的页面与 iframe 的域不同，并且在这种情况下浏览器会由于相同的源策略而阻止通信。

2\. 将图像上传到您的服务器，然后从 php 将图像上传到 facebook。
您可以使用这个：[使用 Facebook 的 Graph API 将照片上传到相册](https://stackoverflow.com/questions/2718610/upload-photo-to-album-with-facebooks-graph-api)。

3\. 您可以使用 ajax 上传图片，有一些技巧，例如：[Ajax Image Upload without Refreshing Page using Jquery](http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html)。

# jquery - jquery UI 用 UI/Effects/Transfer 动态传输 img

> ID：11231232
> 
> 赞同：1
> 
> 时间：2012-06-27T16:47:33.130
> 
> 标签：jquery, jquery-ui, transfer, jquery-effects

我正在使用这个 JQuery UI 组件：

[http://docs.jquery.com/UI/Effects/Transfer](http://docs.jquery.com/UI/Effects/Transfer)

我的代码是这样的：

```
$(".button").click(function () {
  var source = $(this).attr("src");
  $(".ui-effects-transfer").css("background-image", "url("+source+")");  
  $(this).effect("transfer", { to: $(".target") }, 1000);
}); 
```

但是这一行不影响传输脚本：

```
$(".ui-effects-transfer").css("background-image", "url("+source+")"); 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T20:33:59.943

```
$(".button").click(function () {
  var source = $(this).attr("src");
  $(this).effect("transfer", { to: $(".target") }, 1000); // <- comes first
  $(".ui-effects-transfer:last").css("background-image", "url(" + source + ")");
}); 
```

工作**[示例](http://jsfiddle.net/X25Gt/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T06:01:59.677

`.ui-effects-transfer`在效果开始之前可能没有元素。这是来自 jquery 论坛的@kbwood.au 用户的正确答案：

```
$('.button').click(function() {
    $('#transferEffect').remove(); // Remove any existing one
    $('<style id="transferEffect" type="text/css">' + // Add new one
        '.ui-effects-transfer { background-image: url(' + $(this).attr('src') + '); }' +
        '</style>').appendTo('head');
    $(this).effect('transfer', {to: $('.target')}, 1000);
}); 
```

# javascript - HTML 在表单之间保存数据

> ID：11231233
> 
> 赞同：0
> 
> 时间：2012-06-27T16:47:33.690
> 
> 标签：javascript, html, forms, hta

我正在开发一个 HTA 应用程序。我想使用 JavaScript 在多个页面之间存储（临时）表单数据。我通常会设置一个 PHP 网络服务器，但公司政策不允许网络上的网络服务器。

所以我需要用 JScript 或其他方式传递数据。

它需要在 XP 和 7 上使用 IE6+。

我研究了 HTML5 存储，它在 IE6、IE7 中不起作用。

感谢您提供的信息，但有没有其他方法可以在没有网络服务器的情况下在两个页面之间传递数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T16:55:52.563

嗨，为什么不将值存储在 html5 存储对象中，例如 sessionStorage/localStorage，请访问[Html5 存储文档](http://diveintohtml5.info/storage.html)以获取更多详细信息。使用它，您可以在本地临时/永久存储中间值，然后访问您的值以存储会话的值

```
sessionStorage.getItem('label')
sessionStorage.setItem('value', 'label') 
```

或使用永久存储值

```
localStorage.getItem('label')
localStorage.setItem('value', 'label') 
```

因此，您可以使用 html5 存储对象在多个页面之间存储（临时）表单数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:57:30.993

您可以使用名为`FileSystemObject`. `fso`至少适用于 IE>=5。下面的代码显示了`fso`.

ActiveXObject 定义：

```
var fso=new ActiveXObject('Scripting.FileSystemObject'); 
```

读取文件：

```
var iStream=fso.OpenTextFile('filePath',1,false);
iStream.ReadAll();
/* or looped iStream.ReadLine() */
iStream.Close(); 
```

写入文件：

```
var oStream=fso.OpenTextFile('filePath',2,true);
oStream.WriteLine(/*your_data*/);// This usually is looped according to your data
oStream.Close(); 
```

删除文件：

```
fso.DeleteFile('filePath'[,read-only]); 
```

可选`read-only`参数也允许您删除只读文件（如果`true`），默认情况下此参数是`false`.

[MSDN 中的 FileSystemObject](http://msdn.microsoft.com/en-us/library/6kxy1a51%28v=vs.84%29.aspx)

顺便说一句，HTA 支持 HTML5 和 IE9（以及 IE9 本身），当包含`<!DOCTYPE html>`在`<meta http-equiv="x-ua-compatible" content="ie=9">`文档中时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T22:39:32.923

如果您只是提交表单并且需要在下一页（表单属性中的页面）上获取其值，您可以使用下一页上的 URL`action`提交数据并从中读取数据。`GET`

当您提交表单时，URL 将类似于

```
http://mysite.com/submit.html?input1=foo&input2=bar 
```

[您可以使用以下](http://www.netlobo.com/url_query_string_javascript.html)JS 函数读取参数。

```
function gup( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
} 
```

现在，如果*不是*这种情况，并且您需要它跨越多个页面，我会选择`sessionStorage`或`localStorage`按照 NejiHyuga 的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T16:58:41.787

NeijiHyuga 回答了这个问题，但如果你想查看的话，我确实在 GitHub 上为此目的构建了一个插件。

您可以使用会话或本地存储。

[https://github.com/sebringj/jquery.dumbformstate](https://github.com/sebringj/jquery.dumbformstate)

HTA，哇。那是一个有趣的雇主，你在那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T16:56:20.767

JavaScript 在客户端执行。因此，您可以在客户端将数据保存在 Cookie 或类似的东西中，并在必要时将其发送到服务器。或者您将信息隐藏在表单变量中，我认为您需要服务器端的脚本来处理数据。

# python - 默认情况下如何通过 ipv4 进行 urlopen

> ID：11231244
> 
> 赞同：2
> 
> 时间：2012-06-27T16:48:05.277
> 
> 标签：python, ipv6, urllib, ipv4

在 python 中执行 urlopen 的方法是什么，即使底层机器启用了 ipv6 网络，请求也是通过 ipv4 而不是 ipv6 发送的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:03:37.353

我查看了源代码。不幸的是，`urllib.urlopen()`似乎使用`httplib.HTTP()`，它甚至不允许设置源地址。

`urllib2.urlopen()``httplib.HTTPConnection()`您可以从中继承并创建一个类的用途，该类默认设置源地址`'0.0.0.0'`而不是`''`. 然后你可以`urllib2`通过创建一个“新” `HTTPHandler()`（看看它是如何完成的`urllib2.py`）和你`build_opener()`和/或`install_opener()`.

对不起，不是很准确，但我从来没有做过这样的事情，也不知道它是如何工作的。

# c - 多用途结构方法的命名约定

> ID：11231247
> 
> 赞同：0
> 
> 时间：2012-06-27T16:48:24.440
> 
> 标签：c, naming-conventions, naming

我正在编写一个小库并在命名约定中苦苦挣扎。有一个结构叫做`gk_Stream`定义如下：

```
typedef struct gk_Stream {
    gk_Stream_writeProc write;
    gk_Stream_readProc read;
    void* data;                 // Pointer to data needed by read and write procedures.
} gk_Stream; 
```

现在，我想为这个结构提供 2 个内置用途。

1.  从/向一个读/写`FILE*`
2.  从/向缓冲区读取/写入

我首先调用如下函数：

```
gk_Stream_initWithFile(gk_Stream* stream, FILE* fl);

gk_Stream_initWithBufferSize(gk_Stream* stream, size_t bufferSize);
gk_Stream_initWithStringAndBufferSize(gk_Stream* stream, char* string, size_t string_length, size_t buffer_size);
gk_Stream_deallocBuffer(gk_Stream* stream); 
```

但另一种可能性是这样称呼它们：

```
gk_Stream_file_init(/* */);
gk_Stream_buffered_initWithSize(/* */);
gk_Stream_buffered_initWithStringAndSize(/* */);
gk_Stream_buffered_dealloc(/* */); 
```

你认为哪些名字最有意义或看起来/听起来最好？使用该库时，您希望使用哪些名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:16:11.060

怎么样：

```
gk_Stream_file_init(gk_Stream* stream, FILE* fl);
gk_Stream_file_deinit(gk_Stream* stream); /* not sure if necessary */
gk_Stream_buffer_init(gk_Stream* stream, size_t bufferSize);
gk_Stream_buffer_initWithString(gk_Stream* stream, char* string, size_t string_length, size_t buffer_size);
gk_Stream_buffer_deinit(gk_Stream* stream); 
```

当我听到或读到“缓冲”时，我认为这是在写入/读取文件或管道等内容时内部用于提高性能的*方法。*然而，这不是这里发生的事情。您的代码可以使用文件或缓冲区执行 I/O，因此函数名称区分对文件执行操作与对*缓冲区*执行操作是有意义的，而不是对文件和*缓冲*执行操作。

编辑：哦，我忘了解释另一件事；我也更愿意`deinit`，`dealloc`因为`deinit`是天生的伴侣`init`。解除分配可能是您取消初始化流的方式，但您的库的所有用户需要知道的是他们正在取消初始化流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:00:39.597

C 中没有标准/推荐的命名约定。

使用您认为对代码可读性最好的任何内容，与代码/项目其余部分遵循的命名约定一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:09:12.947

它在某种程度上取决于缓冲情况下字符串参数的目的。

我可能会选择类似的东西：

```
gk_Stream_file_init(gk_Stream *stream, FILE *f);
gk_Stream_mem_init(gk_Stream *stream, size_t buff_sz, const char *initval, size_t initval_sz);
gk_Stream_mem_free(tk_Stream *stream); 
```

然后允许一个 NULL initval。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T18:09:17.677

我会这样做：

```
gk_Stream_InitWithFile(gk_Stream* stream, FILE* fl);
gk_Stream_Deinit(gk_Stream* stream);
gk_Stream_InitWithBufferSize(gk_Stream* stream, size_t buffer_size);
gk_Stream_InitWithStringAndBufferSize(gk_Stream* stream, char* string, size_t string_length, size_t buffer_size); 
```

下划线分隔“命名空间”，CamelCase 用于函数名称。变量的小写。

# sql - SQL Server 2008 - 当列为空时设置一个值

> ID：11231250
> 
> 赞同：5
> 
> 时间：2012-06-27T16:48:30.720
> 
> 标签：sql, sql-server

我正在对 SQL Server 2008 数据库执行 SELECT 语句。

```
SELECT Name, DOB, Address1, Address2, City, State, Zip
FROM Users 
```

但是，如果上述任何一列恰好是特定行的空，我想将值`NA`放在列中。

通常这会返回：

```
SMITH^JOHN, 1/1/1980, 5140 N 1ST ST, NULL, NOWHERE, WA, 98221
DOE^JANE, 5/5/1970, NULL, NULL, NULL, NULL, NULL 
```

我想要返回的是：

```
SMITH^JOHN, 1/1/1980, 5140 N 1ST ST, NA, NOWHERE, WA, 98221
DOE^JANE, 5/5/1970, NA, NA, NA, NA, NA 
```

但是，我不想实际更新数据库。我只希望`SELECT`语句在结果为`NULL`.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-27T16:51:36.357

您想使用[COALESCE](http://msdn.microsoft.com/en-us/library/ms190349.aspx)功能。

```
SELECT
    Name
,   DOB
,   COALESCE(Address1, 'NA')
,   COALESCE(Address2, 'NA')
,   COALESCE(City, 'NA')
,   COALESCE(State, 'NA')
,   COALESCE(Zip, 'NA')
FROM Users 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T16:51:51.267

尝试：

```
ISNULL(expression, value_if_expression_is_null) 
```

正如其他人指出的那样，COALESCE 也是一种选择：

```
COALESCE(expression, expression2, expression3) 
```

它返回第一个非空值

有一篇详细的文章描述了这里的差异：

[http://databases.aspfaq.com/database/coalesce-vs-isnull-sql.html](http://databases.aspfaq.com/database/coalesce-vs-isnull-sql.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T17:03:57.937

在 sql server 2008 中有两个函数可以用另一个值替换**NULL**值

**1\. ISNULL**函数需要两个参数：要检查的值和空值的替换

**ISNULL（值，替换）**

**2.COALESCE** 函数的工作方式有点不同**COALESCE**将接受任意数量的参数并返回第一个非 NULL 值，我更喜欢 COALESCE 而不是 ISNULL ，因为符合 ANSI 标准，而 ISNULL 不符合。

**COALESCE(value1,value1,value3,valueN,replacement)**

我希望这对你有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T16:53:33.967

```
SELECT
  Name, DOB,
  (CASE WHEN Address1 IS NULL THEN 'NA' ELSE Address1 END) AS Address1,
  (CASE WHEN Address2 IS NULL THEN 'NA' ELSE Address2 END) AS Address2,
  ...
FROM Users 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-27T17:01:32.197

```
SELECT 
  Name, DOB, Address1, 
  coalesce(Address2,'NA'), coalesce(City,'NA'), 
  coalesce(State,'NA'), coalesce(Zip,'NA')
FROM Users 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-27T16:54:21.160

使用`isnull`：

```
SELECT
    Name, 
    DOB, 
    isnull(Address1, 'NA') as [Address1], 
    isnull(Address2, 'NA') as [Address2], 
    isnull(City, 'NA') as [City], 
    isnull(State, 'NA') as [State], 
    isnull(Zip, 'NA') as [Zip]
FROM Users 
```

您也可以使用`coalesce`，这与它完全一样`isnull`，只是它可以接受两个以上的参数。从左到右检查参数并返回第一个非空值。值必须属于同一类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-15T12:14:25.630

**在 SQL Server 中处理 NULL**

什么是 NULL ？

*   NULL 表示没有结果或未知。
*   NULL 不等于 NULL 本身。
*   NULL 值不同于空值或零值。
*   NULL 是排序顺序中的最小值。
*   当 group by 被执行时，NULL 被认为是相等的。
*   如果 Group By 子句中的列包含 NULL 行，则这些行将被分组到一个组中。

[使用示例处理 SQL Server 中的 Null](http://www.sqlfeathers.com/2018/06/handling-null-in-sql-server.html)

# javascript - 具有 $index 绑定的备用行样式

> ID：11231256
> 
> 赞同：35
> 
> 时间：2012-06-27T16:48:42.280
> 
> 标签：javascript, knockout.js, knockout-2.0

我无法将备用行 css 类应用于具有 foreach 绑定上下文的剔除模板。我正在使用带有可用`$index`上下文变量的淘汰赛 2.1。

这是令人困惑的：

我的模板

```
<li class="row" data-bind="css: { alt: $index%2 }"></li> 
```

导致没有`alt`应用任何类，但是：

```
<li class="row" data-bind="text: $index"></li> 
```

正常工作并显示行号。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-27T16:48:42.623

我为此苦苦挣扎了几分钟，发现自从淘汰赛 2.1 中引入了新的[绑定上下文变量](http://knockoutjs.com/documentation/binding-context.html)（如）以来，并没有真正涵盖这个问题`$index`

我犯的错误是我只是忘记了它`$index`本身是可观察的，如果我们在 data-bind 属性的表达式中使用它，则必须将其解包。IE，

```
<li class="row" data-bind="css: { alt: $index%2 }"></li> 
```

应该成为

```
<li class="row" data-bind="css: { alt: $index()%2 }"></li> 
```

哎呀 :)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-02T23:39:36.323

不要用 Javascript 做交替行样式，使用更有效的 CSS :)

[https://developer.mozilla.org/en-US/docs/CSS/:nth-child](https://developer.mozilla.org/en-US/docs/CSS/:nth-child)

# sql-server - 在时间范围内查找事件

> ID：11231264
> 
> 赞同：2
> 
> 时间：2012-06-27T16:49:13.300
> 
> 标签：sql-server, tsql

试图找出一个适用于多种情况的查询。简而言之，数据可能处于两种情况之一。假设我正在寻找在给定时间范围内发生的事件的记录 ID：2012 年 6 月 26 日上午 10:00 和 2012 年 6 月 27 日上午 11:00 数据库中的记录可能如下所示：

```
Record    Event     Time
1         Start     6/26/2012 10:05AM
1         End       6/26/2012 10:45AM
2         Start     6/26/2012 09:55AM
2         End       6/26/2012 11:05AM 
```

获取记录 1 很容易，只需使用 between 函数，但我试图找出一个返回记录 1 和 2 的查询。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:53:34.527

您可以简单地扩大范围，但这可能会带回与您预期不同的记录。

```
SELECT  RECORD, EVENT, TIME 
FROM SO_RecordEvent AS R
WHERE TIme BETWEEN  '6/26/2012 9:55AM'  AND '6/26/2012 11:06AM' 
```

这将返回范围内开始或结束时间的任何记录的所有记录，包括超出范围的关联记录（换句话说，在范围内只有一个时间的记录 - 但开始于或结束于之后 - 它仍会显示它之外的开始或结束时间）并允许您缩短范围。

```
 ;WITH X AS 
 (
    SELECT RECORD,EVENT,TIME FROM SO_RecordEvent 
 )
 SELECT R.RECORD,R.EVENT,R.TIME 
 FROM SO_RecordEvent AS R
 INNER JOIN X ON R.Record = X.Record
 WHERE X.TIme BETWEEN  '6/26/2012 10:05AM'  AND '6/26/2012 11:05AM'
 GROUP BY R.RECORD,R.EVENT,R.TIME 
```

**但我认为您可能真的想要这样的东西**，它确实为您提供了在那段时间开始的一切，即使它开始和结束超出范围，就像您的记录 2 示例一样。

## **编辑**

改变逻辑 - 决定以这种方式思考问题，而不是解决问题 - 在开始和结束内开始的任何事情，在开始和结束内结束的任何事情，以及之前开始和之后结束的任何事情。我认为这涵盖了在此期间运行的任何内容（开始之前结束，开始和结束，开始和结束之后，开始之前和之后结束）

```
 SELECT X.RECORD,X.TIME AS STARTTIME,Y.TIME AS ENDTIME 
  FROM SO_RecordEvent AS X
  INNER JOIN SO_RecordEvent Y ON Y.Record = X.Record AND Y.EVENT = 'END'
  WHERE  X.EVENT = 'START'
  AND 
  ((X.TIME >= '6/26/2012 10:00AM' AND X.TIME <= '6/26/2012 11:00AM')
  OR (Y.TIME >= '6/26/2012 10:00AM' AND Y.TIME <= '6/26/2012 11:00AM')
  OR (X.TIME <= '6/26/2012 10:00AM' AND Y.TIME >= '6/26/2012 11:00AM')) 
```

要玩的变量：

```
 DECLARE @START datetime, @END datetime
 SET @START = '6/26/2012 10:00AM'
 SET @END = '6/26/2012 11:00AM'

   SELECT X.RECORD,X.TIME AS STARTTIME,Y.TIME AS ENDTIME 
   FROM SO_RecordEvent AS X
   INNER JOIN SO_RecordEvent Y ON Y.Record = X.Record AND Y.EVENT = 'END'
   WHERE  X.EVENT = 'START'
   AND 
  ((X.TIME >= @START AND X.TIME <= @END)
  OR (Y.TIME >= @START AND Y.TIME <= @END)
  OR (X.TIME <= @START AND Y.TIME >= @END)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:38:34.493

我可能会将表连接到自身 - 像这样：

```
SELECT *
FROM
    Table leftside
    JOIN Table rightside
        ON leftside.Record = rightside.Record
WHERE
    leftside.Event = 'Start'
    and rightside.Event = 'End'
    and [whatever time you want] >= leftside.Time
    and [whatever time you want] <= rightside.Time 
```

编辑：示例演示

```
create table thingy (
    record int,
    event varchar(10),
    time datetime )

insert thingy (record,event,time) values (1,'Start','6/26/2012 10:05AM')
insert thingy (record,event,time) values (1,'End','6/26/2012 10:45AM ')
insert thingy (record,event,time) values (2,'Start','6/26/2012 09:55AM')
insert thingy (record,event,time) values (2,'End','6/26/2012 11:05AM')

DECLARE @mytime datetime
SET @mytime = '6/26/2012 9:58AM'

SELECT * 
FROM 
        thingy leftside 
    JOIN thingy rightside 
        ON leftside.Record = rightside.Record 
WHERE 
    leftside.Event = 'Start' 
    and rightside.Event = 'End' 
    and @mytime >= leftside.Time 
    and @mytime <= rightside.Time 

SET @mytime = '6/26/2012 10:10AM'
SELECT * 
FROM 
    thingy leftside 
    JOIN thingy rightside 
        ON leftside.Record = rightside.Record 
WHERE 
    leftside.Event = 'Start' 
    and rightside.Event = 'End' 
    and @mytime >= leftside.Time 
    and @mytime <= rightside.Time 
```

似乎给出了我所期望的 - 第一个查询 1 行，第二个查询 2 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:45:20.427

获取给定范围内所有事件的记录#s：

```
SELECT Record
FROM atable
WHERE Time BETWEEN @StartTime AND @EndTime 
```

现在只需获取记录 #s 与上述查询结果集中的记录匹配的所有行，即如下所示：

```
SELECT *
FROM atable
WHERE Record IN (
  SELECT Record
  FROM atable
  WHERE Time BETWEEN @StartTime AND @EndTime
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T20:58:49.927

最简单的方法是使用以下方法：

```
WITH recs AS (
SELECT Record, MIN(tme) AS startTime, MAX(tme) AS endTime
FROM records
GROUP BY Record
)
SELECT * FROM
records
WHERE startTime >= @eventsAfter
AND endTime <= @eventsBefore 
```

（至少我是这样解释你的问题的）

# javascript - jQuery - 如何选择变量的后缀并在数组中找到它的匹配项

> ID：11231268
> 
> 赞同：2
> 
> 时间：2012-06-27T16:49:25.733
> 
> 标签：javascript, jquery, html

我有一系列选择：

```
var options = ["foo_A", "foo_B", "foo_C", "foo_D"]; 
```

...当用户单击以下元素之一时...

```
<div id="bar_A"> </div>
<div id="bar_B"> </div>
<div id="bar_C"> </div>
<div id="bar_D"> </div> 
```

...它设置以下变量：

```
var currentBar = $(this).attr('id'); 
```

...然后我想搜索 options 数组并找到后缀与 currentBar 匹配的项目，如下所示：

```
 $.each(options, function(i,v){
 if (v's suffix matches the currentBar's suffix){

 //function to do something

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:51:25.103

您需要`split`在 currentBar 上使用函数

```
var Extract = currentBar.split('_');
// Extract[0] will be bar and Extract[1] will be the letter 
```

之后，第二个值将是字母并将匹配。

```
var Key = indexOf('foo_' + Extract[1], options);

alert(options[Key]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:54:30.097

```
$.each(options, function(i,v){
    if (options[i].split("_")[1] == currentBar.split("_")[1]){

   //function to do something

} 
```

# .net - .Net Web 服务数据类型

> ID：11231270
> 
> 赞同：0
> 
> 时间：2012-06-27T16:49:58.880
> 
> 标签：.net, web-services, soap

我创建了一个 SOAP Java Web 服务和一个 Java WebService 客户端来调用 Web 服务。WebService 的参数是 String 和 Double。当我使用带有 String 和 Double 参数的 java WebService 客户端调用 Web 服务时，我从 Web 服务中获得了所需的响应。但是当我从 .Net Web Service Client 使用 String 值和 1.0 值调用相同的 Web Service 时，

```
ordConf[0].slNo = "1234"; <br/>
ordConf[0].qty = (Double)1.0; <br/><br/> 
```

此 WebService 无法理解 Double 值并为 double 值抛出 NullPointerException。

如何确保将 Double 值从 .Net WebService 客户端传递到 Java WebService。我的 wsdl complexType 片段是

```
xsd:element minOccurs="0" name="slno" nillable="true" type="xsd:string"  
xsd:element minOccurs="0" name="qty" nillable="true" type="xsd:double" 
```

这是客户端代码片段。

WebReference.InterWareHouseService IwConf = new WebReference.InterWareHouseService();

WebReference.IwOutboundOrder[] ordConf;
WebReference.Response[] ordRespConf;

```
 ordConf = new WebReference.IwOutboundOrder[1];<br/><br/>

    ordConf[0] = new WebReference.IwOutboundOrder();<br/>
    ordConf[0].custOrderNo = "13337097";<br/>
    ordConf[0].itemNo = "DS-SFP-FC8G-SW";<br/>
    ordConf[0].slNo = "1234";<br/>
    ordConf[0].qty = 1.0;<br/>
    ordConf[0].weight = 0.5;<br/>
    ordRespConf = IwConf.confirmShipment(ordConf);<br/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:39:07.710

尝试在 Java 代码中使用值类型`double`而不是引用类型。`Double`

# matlab - 从矩阵中选择条目而不使用循环

> ID：11231271
> 
> 赞同：1
> 
> 时间：2012-06-27T16:50:01.377
> 
> 标签：matlab, matrix, indexing

我有两个矩阵`A`和`B`，它们都是`Nx3`矩阵。

我目前正在使用以下方法获取矩阵 A 每一行的最大值和索引：

```
[maxA, idx] = max(A, [], 2) 
```

`idx(j)`指示哪一列包含 row 的最大值`j`。现在我想从矩阵 B 中选择那些相同的位置。

我目前已经使用循环实现了这个：

```
for j = 1:numel(idx)
   maxB(j) = B(j, idx(j))
end 
```

我当前的实现足够快，尽管我更喜欢避免不必要的循环，所以有没有办法在没有循环的情况下表达这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:59:42.970

您可以将单维索引构建到矩阵中并以这种方式获取它们。matlab中的所有多维矩阵都可以被寻址。

您可以使用

```
maxB = B(sub2ind([1:length(idx)]',idx(:))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T16:57:47.370

您可以构建一个线性索引向量（我希望 B 与 A 大小相同）：

```
vec_indices = sub2ind(size(A), 1:numel(idx), idx); 
```

然后您可以直接使用该向量进行查找：

```
maxB = B(vec_indices) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:17:01.037

在一行中：

```
maxB = B(A == max(A, [], 2) * ones(1, 3)); 
```

但这并不安全。它假定`A`.

# java - 如何使用 java.util.logging.Logger 更改特定包的日志记录级别

> ID：11231272
> 
> 赞同：0
> 
> 时间：2012-06-27T16:50:14.820
> 
> 标签：java, logging, java.util.logging

假设我正在使用的 java util logger 有以下配置

```
handlers=java.util.logging.ConsoleHandler
.level=INFO
java.util.logging.ConsoleHandler.level=ALL 
```

现在我想将包 org.apache.solr.* 中的所有类限制为仅记录 WARNING 或更高级别。我如何仅通过配置来做到这一点？（类似于我们在 log4j 中使用类别的方式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:57:06.960

尝试`org.apache.solr.level=WARNING`

# asp.net-mvc - 无法加载文件或程序集“System.Web.Providers”

> ID：11231278
> 
> 赞同：14
> 
> 时间：2012-06-27T16:51:17.760
> 
> 标签：asp.net-mvc, web-config

你好这是我的配置文件

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
    <sectionGroup name="elmah">
      <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah"/>
      <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah"/>
      <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah"/>
      <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah"/>
    </sectionGroup>
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-MedicallexiconProject-2012615153521;Integrated Security=True" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0"/>
    <add key="webpages:Enabled" value="true"/>
    <add key="PreserveLoginUrl" value="true"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
  </appSettings>
  <system.web>
    <compilation targetFramework="4.0" debug="true"/>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880"/>
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers"/>
        <add namespace="System.Web.Mvc"/>
        <add namespace="System.Web.Mvc.Ajax"/>
        <add namespace="System.Web.Mvc.Html"/>
        <add namespace="System.Web.Routing"/>
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/"/>
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/"/>
      </providers>
    </roleManager>
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/"/>
      </providers>
    </sessionState>
    <httpModules>
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah"/>
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah"/>
      <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah"/>
    </httpModules>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler"/>
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler"/>
      <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" preCondition="managedHandler"/>
    </modules>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-4.4.0.0" newVersion="4.4.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework"/>
  </entityFramework>
  <elmah>
    <security allowRemoteAccess="false"/>
  </elmah>
  <location path="elmah.axd" inheritInChildApplications="false">
    <system.web>
      <httpHandlers>
        <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah"/>
      </httpHandlers>
    </system.web>
    <system.webServer>
      <handlers>
        <add name="ELMAH" verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode"/>
      </handlers>
    </system.webServer>
  </location>
</configuration> 
```

但是当在主机上推送时会出现此错误配置错误

说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：无法加载文件或程序集“System.Web.Providers，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

源错误：

```
Line 44:     <membership defaultProvider="DefaultMembershipProvider">
Line 45:       <providers>
Line 46:         <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
Line 47:       </providers>
Line 48:     </membership> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-13T18:52:29.050

使用此 NuGet 命令自动安装 DLL：

```
Install-Package Microsoft.AspNet.Providers.Core 
```

有关 Nuget 包的更多信息，请阅读[此](http://nuget.org/packages/Microsoft.AspNet.Providers.Core)内容和[此内容以获取教程](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T16:53:35.950

显然您还没有`System.Web.Providers`在您的`bin`文件夹中部署程序集。确保它标有`Copy Local=true`?

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-07T16:33:04.600

我认为您应该设置 Copy Local=true 并确保使用相同版本的 .net 框架。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-26T10:04:02.533

在包管理器控制台中，我安装了如下新包，世界上一切都很好。

`Install-Package Microsoft.AspNet.Providers
Install-Package Microsoft.AspNet.Providers.Core`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-09T00:13:57.703

对我来说，我已经使用 NuGet 升级了 Web Providers 的版本，这破坏了我的应用程序。我不得不进入 web.config 并手动将提供程序部分中的所有程序集引用更新为 2.0.0.0 而不是 1.0.0.0，因为 System.Web.Providers 程序集的新版本是 2.0.0.0。

# c# - 修改同类代码文件时生成T4文件

> ID：11231281
> 
> 赞同：7
> 
> 时间：2012-06-27T16:51:21.770
> 
> 标签：c#, t4

我有一个 C# 正则表达式解析器程序，其中包含三个文件，每个文件都包含一个静态类：

1) 一个用字符串字典填充的静态类

```
static class MyStringDicts
{
    internal static readonly Dictionary<string, string> USstates =
        new Dictionary<string, string>()
        {
            { "ALABAMA", "AL" },
            { "ALASKA", "AK" },
            { "AMERICAN SAMOA", "AS" },
            { "ARIZONA", "AZ" },
            { "ARKANSAS", "AR" }
             // and so on
        }
    // and some other dictionaries
} 
```

2) 将这些值编译成正则表达式的类

```
public static class Patterns
{       
    Public static readonly string StateUS =
        @"\b(?<STATE>" + CharTree.GenerateRegex(Enumerable.Union(
            AddrVals.USstates.Keys,
            AddrVals.USstates.Values))
        + @")\b";

    //and some more like these
} 
```

3）一些基于这些字符串运行正则表达式的代码：

```
public static class Parser
{   
    // heavily simplified example
    public static GroupCollection SearchStringForStates(string str)
    {
        return Regex.Match(str, 
            "^" + Patterns.StateUS, 
            RegexOptions.ExplicitCapture | RegexOptions.IgnoreCase).Groups;
    }
} 
```

我希望能够像 T4 模板一样生成 2)，因为所有这些连接在每次执行时都是相同的：

```
@"\b(?<STATE><#=CharTree.GenerateRegex(Enumerable.Union(
    AddrVals.USstates.Keys,
    AddrVals.USstates.Values)#>)\b"; 
```

这可行，但如果我创建 的新成员`MyStringDicts`，或从其字典中添加/删除某些值，则 T4 模板将无法识别它们，直到从编译和重新编译中排除 Patterns.cs。视情况而`Parser`定`Patterns`，这确实不是一个选项 - 我需要 T4 转换来考虑对同一构建中其他文件的更改。

我不想做的事情：

*   拆分`MyStringDicts`成自己的项目。我想将文件保存在一个项目中，因为它们是一个逻辑单元。
*   只需移动`MyStringDicts`到 Patterns.cs 的顶部。我还需要将 MyStringDicts 成员用于其他目的（例如，用于字典查找或其他 T4 模板。）

我在[这里](https://stackoverflow.com/questions/3408159/using-types-in-a-t4-template-that-exist-in-the-same-project-as-the-template)采纳了关于使用 T4Toolbox`VolatileAssembly`等的建议，但这似乎只适用于相反的方向，即在编辑 T4 模板后需要重新编译类文件时。

我想要的可能吗*？*

*为清楚起见进行了编辑*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:16:08.910

我刚刚创建了一个小测试模板，它使用 EnvDte（Visual Studio 自动化）和 T4Toolbox 来运行第一个文件。它通过项目获取文件，因此在运行模板之前无需编译。事实上，它甚至会拾取未保存的更改...

这与 FullSnabel 使用的方法基本相同，但不需要 Roslyn。

```
<#@ template debug="false" hostspecific="True" language="C#" #>
<#@ output extension=".cs" #>
<#@ Assembly Name="System.Core.dll" #>
<#@ dte processor="T4Toolbox.DteProcessor" #>
<#@ TransformationContext processor="T4Toolbox.TransformationContextProcessor" #>
<#@ assembly name="System.Xml" #>
<#@ assembly name="EnvDTE" #>
<#@ assembly name="EnvDTE80" #>
<#@ import namespace="T4Toolbox" #>
<#@ import namespace="EnvDTE" #> 
<#@ import namespace="EnvDTE80" #>
<#
    ProjectItem projectItem = TransformationContext.FindProjectItem("Dictionaries.cs");
    FileCodeModel codeModel = projectItem.FileCodeModel;

    foreach (CodeElement element in codeModel.CodeElements)
    {
        CodeNamespace ns = element as CodeNamespace;
        if(ns != null)
        {
            foreach(CodeElement ele in ns.Children)
            {
                CodeClass cl = ele as CodeClass;

                if(cl != null && cl.Name == "Dictionaries")
                {
                    foreach(CodeElement member in cl.Members)
                    {
                        // Generate stuff...
                        this.WriteLine(member.Name);
                    }
                }
            }
        }
    }
#> 
```

如果您想坚持原来的方法，这应该可行。

您似乎正在做的是将数据存储在类文件中。您可以考虑将列表存储在代码之外（在 xml 或 ini 文件中）并根据该数据生成这两个文件。这样一来，您就可以避免所有问题，也可能使管理列表更容易。如果您不太关心列表的更改，您也可以将字典放入 T4 模板本身。

另一种选择可能会在代码中完全处理它。您可以创建具有“模式”属性（或 GetPattern() 函数）的 Dictionary 子类。然后解析器将使用 AddrVals.USstates.Pattern，并且不再需要模式类。这样您就不需要任何代码生成。

也许实际字典的包装器会更好，因为它允许您隐藏实际集合以确保它在运行时不会更改。请参阅[.NET 中是否有可用的只读通用字典？](https://stackoverflow.com/questions/678379/is-there-a-read-only-generic-dictionary-available-in-net)举个例子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T19:06:37.937

看看[罗斯林](http://www.microsoft.com/en-us/download/details.aspx?id=27746)。它允许您将源文件编译成语法树，然后您可以检查并从中生成代码。这是一个 CTP，但对我来说效果很好。

（添加了 Roslyn 示例）。

我在我的解决方案中创建了一个名为 class2.cs 的文件：

```
namespace StackOverflow
{
    class Class2
    {
        public static int One() { return 8; }
        public static int Eight(int x, double z) { return 8; }
    }
} 
```

使用 Roslyn CTP（您还需要[Visual Studio SDK](http://www.microsoft.com/en-us/download/details.aspx?id=29930)）我创建了这个简单的 T4 模板，它使用 Roslyn 来解析 Class2.cs 并基于此生成输出：

```
<#@ template    hostspecific= "true"                            #>
<#@ assembly    name        = "System.Core"                     #>
<#@ assembly    name        = "Roslyn.Compilers"                #>
<#@ assembly    name        = "Roslyn.Compilers.CSharp"         #>
<#@ import      namespace   = "System.IO"                       #>
<#@ import      namespace   = "System.Linq"                     #>
<#@ import      namespace   = "Roslyn.Compilers.CSharp"         #>

<#

    var host    = Path.GetFullPath(Host.ResolvePath(@".\Class2.cs"));
    var content = File.ReadAllText(host);

    var tree = SyntaxTree.ParseCompilationUnit(content);

    var methods = tree
        .GetRoot()
        .ChildNodes()
        .OfType<NamespaceDeclarationSyntax>()
        .SelectMany(x => x.ChildNodes())
        .OfType<ClassDeclarationSyntax>()
        .SelectMany(x => x.ChildNodes())
        .OfType<MethodDeclarationSyntax>()
        .ToArray()
        ;
#>            

namespace StackOverflow
{
    using System;

    static partial class Program
    {
        public static void Main()
        {
<#
    foreach (var method in methods)
    {
        var parent = (ClassDeclarationSyntax)method.Parent;
        var types = method
            .ParameterList
            .ChildNodes()
            .OfType<ParameterSyntax>()
            .Select(t => t.Type.PlainName)
            .ToArray()
            ;

        var plist = string.Join(", ", types);
#>
            Console.WriteLine("<#=parent.Identifier.ValueText#>.<#=method.Identifier.ValueText#>(<#=plist#>).ToString()");
<#
    }
#>
        }
    }
} 
```

此模板基于 Class2.cs 生成以下输出：

```
namespace StackOverflow
{
    using System;

    static partial class Program
    {
        public static void Main()
        {
                Console.WriteLine("Class2.One().ToString()");
                Console.WriteLine("Class2.Eight(int, double).ToString()");
            }
    }
} 
```

希望这可以帮助

# python - Python删除临时文件错误--仍在使用

> ID：11231283
> 
> 赞同：4
> 
> 时间：2012-06-27T16:51:30.117
> 
> 标签：python, temporary-files

所以，我通过在 python 中备份一些谷歌文档来创建一堆临时文件。我已经制作了这些文件 os.copy 的适当副本。现在我准备删除它们。我这样创建它们：

```
 line = entry.id.text
title = entry.title.text
splitLine = line.split('/')
key = splitLine[-1]

backUpDir = R'\\XXX\XXXXX\XXXX\XXXXX\otherFiles\GoogleDocBackUp' + '\\'

today = datetime.date.today()
if not os.path.exists(backUpDir + str(today)):
  os.mkdir(backUpDir + str(today))

backupDir = backUpDir + str(today)

tempfile.tempdir = backupDir
file_path = tempfile.mkstemp(suffix='.xls')    

uri = 'http://docs.google.com/feeds/documents/private/full/%s' % key

spreadsheets_client = gdata.spreadsheet.service.SpreadsheetsService()
spreadsheets_client.email = self.gd_client.email
spreadsheets_client.password = self.gd_client.password
spreadsheets_client.source = "My Fancy Spreadsheet Downloader"
spreadsheets_client.ProgrammaticLogin()

# ...
docEntry = self.gd_client.GetDocumentListEntry(uri)

docs_auth_token = self.gd_client.GetClientLoginToken()
self.gd_client.SetClientLoginToken(spreadsheets_client.GetClientLoginToken())
self.gd_client.Export(docEntry, file_path[1])
shutil.copy(file_path[1], backupDir + '//' + title + '.xls')

self.gd_client.SetClientLoginToken(docs_auth_token)  

os.close(file_path[0]) 
```

我曾考虑创建一个 tempfile.Temporary 文件而不是 mkstemp，但我遇到了权限错误。（我怀疑临时文件也试图删除我给它的目录）

所以回到问题的本质。我尝试在这些临时文件上使用 os.remove，python 不会放弃对它的控制。（我知道我的 os.remove 代码有效，因为我在一些剩余的临时文件上运行了该函数，并且它们被删除而没有问题。）

我会喜欢这里的——如果我可以删除临时文件——太好了。如果我不能，是否可以在 python 中重命名文件？

到目前为止，我已经得到了一些关于获取 mkstemp 应该返回的文件句柄的建议......但我没有任何运气。当我在调试器中查看它时，我只看到一个整数和文件路径。

更新！我想我修复了它：我只需要在文件路径 [0] 上调用 os.close ，它看起来就像关闭了！谢谢大家！这是更新的代码

再次感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T16:55:41.470

抱歉，如果这是显而易见的事情，但只是检查一下，在尝试删除文件之前，您正在***关闭文件，对吗？***

> `mkstemp()`
> 
> “返回一个包含打开文件的操作系统级句柄的元组（按`os.open())`该顺序返回该文件的绝对路径名和该文件的绝对路径名”

[上面的 Python 文档源](http://docs.python.org/dev/library/tempfile.html)

`close()`因此，在尝试删除它之前，我会尝试对您的文件句柄进行调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:56:58.557

您可以使用[shutil.move()](http://docs.python.org/library/shutil.html#shutil.move)来移动文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:58:03.517

mkstemp() 返回 fd 和路径。os.remove() 接受路径，而不是元组。在删除之前关闭文件 ( `os.close(fd)`)。

您应该可以在`tempfile.TemporaryFile()`没有权限问题的情况下使用。

要以原子方式重命名文件，您可以使用[`os.rename()`](http://docs.python.org/library/os.html#os.rename). `shutil.move()`失败时可能会起作用，`os.rename()`但它不是原子的。

# ruby-on-rails - Rails 3\. 如何设置 Devise 以查看用户继承的模型中的电子邮件列？

> ID：11231286
> 
> 赞同：1
> 
> 时间：2012-06-27T16:51:47.237
> 
> 标签：ruby-on-rails, ruby, devise

我有一个名为 Person 的模型。我希望用户从人继承。

```
class Person < ActiveRecord::Base
  belongs_to :organization
  validates :email, :presence => true, :uniqueness => true
end

class User < Person

  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable, :lockable

  # for some reason I HAVE TO user attr_accessor on the following attributes or
  # else I would get noMethodError or something like that, I'll fix this later
  attr_accessor :username, :encrypted_password, :locked_at, :current_sign_in_at, :last_sign_in_at, :current_sign_in_ip, :last_sign_in_ip, :sign_in_count

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :username, :password, :password_confirmation, :remember_me,
    :first_name, :last_name, :mobile_phone, :phone_one, :phone_two, :organization_id

  validates :username, :presence => true
end 
```

现在我正在安装 Devise，它想要创建`users`带有`email`列的表。但我不想要该`email`列，因为 User 应该`email`从 Person 继承。

我希望 User 模型继承自 People 模型。人们已经有一个`email`属性，所以用户不再需要它。

我怎样才能让 Devise 查看表格`email`上的列`people`而不是可锁定模块的`users`表格**，以及每当 Devise 需要发送电子邮件时**？

我可以`email`从迁移中删除该列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:04:54.567

要让它查找您要执行的人员电子邮件`User.email`，只需从设计的用户表迁移中删除该电子邮件即可。

您还需要删除电子邮件验证[https://github.com/plataformatec/devise/blob/master/lib/devise/models/validatable.rb#L24](https://github.com/plataformatec/devise/blob/master/lib/devise/models/validatable.rb#L24)

# c# - 在.Net中收集大量数据的最整洁的方法是什么

> ID：11231287
> 
> 赞同：1
> 
> 时间：2012-06-27T16:51:49.033
> 
> 标签：c#, mysql, standards

我正在编写一个程序，它从 MySQL 数据库中收集大量单独的数据，并将这些数据序列化为 XML 文档。

我的 XML 文档有五个基本组，每个组包含 3 个子组，我总共收集了大约 100 条数据。

内容本身就是购物网站上的订单详情。我首先运行查询以计算并返回需要发送给客户端的下一个订单 ID，然后使用此订单 ID 从关系数据库中的各种表。

无论我采取哪种方式，这都是一团糟。我最终得到了大量的方法，为我需要的每条数据定义了一个变量，每个变量都等于我拥有的对我的 MySQL 数据库运行查询的方法的返回值。一些数据需要应用额外的逻辑（例如，一些数据需要清理，一些日期需要以某种方式为 XML 格式化）。

几点

*   我没有创建数据库结构或购物网站，我无法更改它
*   我有一个当前正在运行的工作程序。这是我几个月前写的一个程序，我会回去改进

一些示例代码如下：

```
string valueOne = myMethod("SELECT `valueOne` FROM `tableOne` WHERE `OrderID` = '12345';");
string valueTwo = myMethod("SELECT `valueTwo` FROM `tableOne` WHERE `OrderID` = '12345';");
string valueThree = myMethod("SELECT `valueThree` FROM `tableTwo` WHERE `OrderID` = '12345';");
int valueFour = Convert.ToInt32(myMethod("SELECT `valueFour` FROM `tableThree` WHERE `OrderID` = '12345';"));
string valueFive = myMethod("SELECT `valueFive` FROM `tableThree` WHERE `OrderID` = '12345';");

if(valueFive == "FooBar")
{
    //Do Stuff
}

string valueSix = myMethod("SELECT `valueSix` FROM `tableThree` WHERE `OrderID` = '12345';");
DateTime valueSeven = DateTime.Parse(myMethod("SELECT `valueSeven` FROM `tableFour` WHERE `OrderID` = '12345';"));
string valueEight = myMethod("SELECT `valueEight` FROM `tableFive` WHERE `OrderID` = '12345';");
string valueNine = String.Format("QWERTY - {0} - YTREWQ", myMethod("SELECT `valueNine` FROM `tableSix` WHERE `OrderID` = '12345';"));
string valueTen = myMethod("SELECT `valueTen` FROM `tableSeven` WHERE `OrderID` = '12345';");

        MyClass fooBar = new MyClass()
        {
            valueOne = valueOne,
            valueTwo = valueTwo,
            valueThree = valueThree,
            valueFour = valueFour,
            valueFive = valueFive,
            valueSix = valueSix,
            valueSeven = valueSeven,
            mySecondClass = new MySecondClass()
            {
                valueEight = valueEight,
                valueNine = valueNine,
                myThirdClass = new MyThirdClass() { valueTen = valueTen }
            }
        };

SerializeToXML<MyClass>(fooBar); 
```

想象一下，但有更多的数据。是的，它可以工作，但它不整洁，难以维护，而且更普遍地说，它不是很好。

所以我的问题是，在 .Net 应用程序中收集大量数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:58:37.073

看起来您可以立即将大量查询组合成一个查询。例如，您有以下内容：

```
string valueOne = myMethod("SELECT `valueOne` FROM `tableOne` WHERE `OrderID` = '12345';");
string valueTwo = myMethod("SELECT `valueTwo` FROM `tableOne` WHERE `OrderID` = '12345';");
string valueThree = myMethod("SELECT `valueThree` FROM `tableTwo` WHERE `OrderID` = '12345';");
int valueFour = Convert.ToInt32(myMethod("SELECT `valueFour` FROM `tableThree` WHERE `OrderID` = '12345';"));
string valueFive = myMethod("SELECT `valueFive` FROM `tableThree` WHERE `OrderID` = '12345';"); 
```

我会摆脱那些单独的查询并使用一个：

```
SELECT one.valueOne, one.valueTwo, two.valueThree, three.valueFour, three.valueFive
  FROM tableOne one
    INNER JOIN tableTwo two on (two.OrderId = one.OrderId)
    INNER JOIN tableThree three on (three.OrderId = one.OrderId)
  WHERE one.OrderId = '12345'; 
```

坦率地说，看起来你可以对其他人做同样的事情。

另外，我不完全确定是做什么`myMethod`的，但它确实看起来只是在查询中返回一个标量值。摆脱它并将其替换为可以返回 DataTable 或对象集合的东西。这样一来，您就可以一次性提取所需的所有数据。

注意：如果您希望这些表中的每一个都具有基于 OrderId 的值，则内部联接起作用。如果他们不这样做，则从始终具有现有记录的表开始进行外部联接。例如：

```
SELECT one.valueOne, one.valueTwo, two.valueThree, three.valueFour, three.valueFive
      FROM orders o
        LEFT OUTER JOIN tableOne one on (one.OrderId = o.OrderId)
        LEFT OUTER JOIN tableTwo two on (two.OrderId = o.OrderId)
        LEFT OUTER JOIN tableThree three on (three.OrderId = o.OrderId)
      WHERE o.OrderId = '12345'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:04:25.720

你真的没有充分利用面向对象的编程。 ~~从您的示例中很难推断出您的表之间的关系，但是~~Chris Lively 在推断您的桌子之间的关系方面做得很好，您将其描述为来自购物网站的订单详细信息。当然，这意味着一些一致的关系。

我会这样解决问题：

*   开发最有效的整合查询以获得您需要的数据。
*   对于每个查询，创建一个类。构建您的类以匹配您的数据（“五个基本组，每个组包含 3 个子组”）。
*   遵循良好的 OOP 原则，并在该类中隐藏一个类所需的复杂性，如果这是唯一需要它的地方。
*   为变量和类使用更具描述性的名称。

这应该会产生更具可读性、可维护性和“整洁”的代码。

# c++ - 访问其他类变量的最佳方法

> ID：11231292
> 
> 赞同：2
> 
> 时间：2012-06-27T16:51:59.220
> 
> 标签：c++, oop, renderer

我现在正在为我们的引擎编写 Direct3D 渲染器。

这就是问题所在：
在 OpenGL 中，我可以轻松地调用`glClearColor()`clear。
在 Direct3D 中，我需要使用`g_pd3dDevice`just to call`ClearRenderTargetView()`来清除。

我们引擎的设计是这样的：

```
class Renderer
{
    // ...
}

class Direct3dWin32 : public Renderer
{
    private ID3D10Device* g_pd3dDevice;
}

class OpenGLWin32 : public Renderer
{
    // Nothing, I can call a function easily without relying on something
} 
```

当我的`ShaderManager`班级想要编译着色器时，问题就出现了。我需要使用上课的`g_pd3dDevice`那个。`Direct3dWin32`

我的问题是，解决这个问题的最佳方法是什么？我正在考虑全局变量、单例类，或者只是在函数中传递类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:04:44.383

首先，我不禁注意到g_pd3dDevice，它不是一个全局的。它是一个类成员指针，指向设备的 COM 接口 ID3D10Device*，在这里它不是全局的，也不应该是全局的。

并尽可能简单地回答您的问题（因为它似乎是一个初学者引擎/框架设计问题），提供访问器方法，该方法返回一个指向工作设备的指针，可以从该设备进一步传递，需要使用它。

一个符合楼上小“规范”的简单示例：

```
class Direct3DWin32 : public Renderer
{
      ID3D10Device* pD3DDevice;
  public:
      ID3D10Device* getD3DDevice();

} 
```

现在，当您需要它时，您可以在从 Direct3DWin32 实例获取它时通过函数传递它。引擎设计远不止于此，我个人不建议将其作为一条路径，但这是另一个时代的故事，也许是一系列书籍。

## 笔记！

你可以像这样定义基本的东西，但是如果你真的想把多渲染路径设计到一个适当的水平，你将不得不引入多态性，增加一个很好的抽象层次。然后，您可以简单地定义一个统一的渲染接口，无论当前使用的是 DirectX 还是 OpenGL 渲染路径，都将做正确的事情，实例化一个派生类并将其地址提供给指向其抽象基类的指针，该抽象基类包含指定的接口一切符合。然后，您可以忽略 API 的底层选择。

希望这可以解决您当前的问题。此外，再次避开全局变量。和快乐的编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:16:13.503

您可能会使用双重调度的变体（又名访问者模式）：

```
class ShaderManager
{
public:
   void compileShader(Renderer* r, Shader* s) { r->compileShader(this, s); }
   void compileD3DShader(ID3D10Device* device, Shader*s);
   void compileGLShader(Shader* s);
};

class Renderer
{
public:
   virtual void compileShader(ShaderManager* m, Shader* s) = 0;
};

class Direct3dWin32 : public Renderer
{
private:
   ID3D10Device* m_device;
public:
   virtual void compileShader(ShaderManager* m, Shader* s)
   {
      m->compileD3DShader(m_device, s);
   }      
}

class OpenGLWin32 : public Renderer
{
public:
   virtual void compileShader(ShaderManager* m, Shader* s)
   {
      m->compileGLShader(s);
   }
} 
```

（我不是“吸气剂”的忠实粉丝。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:57:13.027

您应该为要传递给另一个类的变量提供访问器方法。

例如，在 Direct3dWin32 中，您可以：

```
ID3d10Device* get_gpd3Device()
{
    return g_pd3Device;
} 
```

然后，您可以将其传递给 OpenGLWin32：

```
void useDevice (ID3d10Device* aDevice)
{
// do work
} 
```

使用这两个类的应用程序将负责弥合差距：

```
OpenGLWin32 openGL;
openGL.useDevice(direct3d.get_gpd3device()); 
```

# android - 处理点击方式的不同

> ID：11231296
> 
> 赞同：0
> 
> 时间：2012-06-27T16:52:21.527
> 
> 标签：android, button, onclick

一般来说，我是 Android 和 java 编码的初学者，到目前为止，在各种教程中，我发现了两种处理按钮被点击的方法。

第一个：

```
button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                //do your thing
            }
        }); 
```

第二个涉及`android:onClick="someMethod"`在 main.xml 中放入按钮的属性，然后`someMethod`在活动中简单地创建方法。

我想知道这两种方法有什么区别。一个比另一个更好吗？还是它们的工作方式略有不同？对我来说，他们似乎也在做同样的事情：P

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:27:26.277

> 我想知道这两种方法有什么区别。一个比另一个更好吗？

结果是一样的。但区别在于代码的可读性。

```
android:onClick="someMethod" 
```

这种方法我不推荐给你。

我建议您按照`anonymous classes`上面的意思使用。

例如，您的类也可以实现`View.OnClickListener`，然后您只需要实现`onClick()`方法，并且您可以为许多小部件使用一种方法。

```
public class Main extends Activity implements View.OnClickListener {
   public void onClick(View view) {
      switch(view.getId()) {
         case R.id.startBtn:
            // do some work
         break;
         case R.id.anotherWidgetId:
            // do some work
         break;
      }
   }
} 
```

我认为这也是一种很好的做法，你只有一种方法，代码行更少，更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:58:25.670

在第一个中：您正在务实地定义一个方法，每次按下按钮都会调用该方法。在第二个中：您提到了按下按钮时将调用的活动的方法名称。

这完全取决于您喜欢以哪种方式设置点击侦听器。

就个人而言，我喜欢务实地设置点击侦听器，以便在浏览代码时知道哪些代码将在按钮的 onClick 处执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T00:51:29.897

当您使用 android:onClick="someMethod" 时，该方法位于保存单击视图的 Activity 上。如果您在列表项上使用它，则（在某些情况下）在活动上处理单击会更方便。如果您将使用匿名类方法，则需要在适配器上设置它，它并不总是可以访问活动（如果是这样 - 它可能会变得混乱......）。因此，如果您需要保存列表的活动中的内容（保存该可点击项目） - 我认为使用 android:onClick 方法会更干净。

除此之外 - 它几乎是一样的。请务必记录您使用 android:onClick 调用的方法，因为以后有时很难跟踪它们的来源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T10:42:42.377

处理双击android按钮

```
// These variables as global
private final static long DOUBLE_CLICK_INTERVAL=250;
private static boolean doubleClick=false;
private static long lastClickTime=0;    
private static Handler handler; 
```

* * *

```
// In button method
long clickTime=SystemClock.uptimeMillis(); 

if(clickTime-lastClickTime <= DOUBLE_CLICK_INTERVAL) { // If double click...

    Toast.makeText(getApplicationContext(), "Double Click Event",Toast.LENGTH_SHORT).show();
    doubleClick=true;

} else { // If not double click....

    doubleClick=false;
    handler=new Handler();
    handler.postDelayed(new Runnable(){
        @Override
        public void run(){
            if(!doubleClick){
                Toast.makeText(getApplicationContext(),"Single Click Event",Toast.LENGTH_SHORT).show();
            }                   
        }
    }, DOUBLE_CLICK_INTERVAL);      
}

lastClickTime=clickTime; 
```

# ruby - 无法安装 ruby -debug，错误：rb_method_entry_t.called_id

> ID：11231297
> 
> 赞同：3
> 
> 时间：2012-06-27T16:52:32.153
> 
> 标签：ruby, ruby-1.9.3, ruby-debug

我正在尝试安装 ruby​​-debug。我使用的是 Mac OS 10.7.4、XCode 版本 2308 和 Ruby 版本 1.9.3-p194。

按照此处的说明：http: [//guides.rubyonrails.org/debugging_rails_applications.html#debugging-with-ruby-debug](http://guides.rubyonrails.org/debugging_rails_applications.html#debugging-with-ruby-debug)，我尝试运行

```
sudo gem install ruby-debug 
```

我收到以下错误：

```
Building native extensions.  This could take a while...
ERROR:  Error installing ruby-debug:
    ERROR: Failed to build gem native extension.

        /Users/andrew/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for rb_method_entry_t.called_id in method.h... no
checking for rb_control_frame_t.method_id in method.h... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/andrew/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
    --with-ruby-dir
    --without-ruby-dir
    --with-ruby-include
    --without-ruby-include=${ruby-dir}/include
    --with-ruby-lib
    --without-ruby-lib=${ruby-dir}/lib
extconf.rb:16:in `block in <main>': break from proc-closure (LocalJumpError)
from /Users/andrew/.rvm/gems/ruby-1.9.3-p194/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:18:in `call'
from /Users/andrew/.rvm/gems/ruby-1.9.3-p194/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:18:in `create_makefile_with_core'
from extconf.rb:32:in `<main>'

Gem files will remain installed in /Users/andrew/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19-0.11.26 for inspection.
Results logged to /Users/andrew/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19-0.11.26/ext/ruby_debug/gem_make.out 
```

所以我尝试了以下命令：

```
sudo gem install debugger 
```

结果是：

```
Fetching: columnize-0.3.6.gem (100%)
Fetching: debugger-ruby_core_source-1.1.3.gem (100%)
Fetching: debugger-linecache-1.1.1.gem (100%)
Building native extensions. This could take a while...
Fetching: debugger-1.1.4.gem (100%)
Building native extensions. This could take a while...
Successfully installed columnize-0.3.6
Successfully installed debugger-ruby_core_source-1.1.3
Successfully installed debugger-linecache-1.1.1
Successfully installed debugger-1.1.4
4 gems installed
Installing ri documentation for columnize-0.3.6...
Installing ri documentation for debugger-ruby_core_source-1.1.3...
Installing ri documentation for debugger-linecache-1.1.1...
Couldn't find file to include 'VERSION' from lib/linecache19.rb
Installing ri documentation for debugger-1.1.4...
Installing RDoc documentation for columnize-0.3.6...
Installing RDoc documentation for debugger-ruby_core_source-1.1.3...
Installing RDoc documentation for debugger-linecache-1.1.1...
Couldn't find file to include 'VERSION' from lib/linecache19.rb
Installing RDoc documentation for debugger-1.1.4... 
```

所以我研究了这个问题，最后看到了这个帖子：

[如何在 ruby​​ 1.9.3 / Rails 3.2.1 中安装 ruby​​-debug](https://stackoverflow.com/questions/9122232/how-do-i-install-ruby-debug-in-ruby-1-9-3-rails-3-2-1)

一切正常，直到我尝试了命令：

```
gem install ruby-debug-base19-0.11.26.gem -- --with-ruby-include=$SANDBOX/packages/ruby-1.9.3-p194 
```

刚刚重现了上面的第一个错误。所以我调查了

```
rb_method_entry_t.called_id 
```

并找到了这篇文章：[https ://github.com/ruby/ruby/pull/56/#issuecomment-3463264](https://github.com/ruby/ruby/pull/56/#issuecomment-3463264)

我尝试了他建议的步骤，除了 rehash （我不确定如何使用 rvm，并且不想切换到 rbenv 只是为了尝试它）。我将他推荐的所有 gem 下载到一个文件夹中，然后运行以下命令：

```
gem install *.gem -- --with-ruby-include=$(echo ~/.rvm/rubies/1.9.3-p194/include/ruby-1.9.1/ruby-1.9.3-p194/) --no-rdoc --no-ri 
```

它很好地安装了 linecache19-0.5.13，但它在 ruby​​-debug-base19-0.11.26.gem 上阻塞，再次产生第一个错误。

我还尝试卸载运行 sudo gem install debugger 时添加的调试器 gem，但这并没有改变任何东西。

我不知道下一步该做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T16:07:14.173

我知道这个问题已经很老了，但是今天我遇到了同样的错误，这是我在谷歌上搜索错误时的第一个结果。

对我来说，调试器作为依赖项安装并运行

```
gem install debugger 
```

在捆绑之前修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T18:40:04.527

刚刚通过 RVM 安装了 Ruby 2.0.0 就遇到了这个问题。

如果二进制文件可用，RVM 将只安装它们，这样更快，但调试器也需要源代码

```
rvm reinstall 2.0.0 --disable-binary 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T01:22:12.303

ruby-debug 对于 ruby​​ 1.9 已损坏，请尝试“pry”。也许可以让 ruby​​-debug 工作，但我不会指望它。

[在 ruby​​ 1.9 中调试](https://stackoverflow.com/questions/1083451/debugging-in-ruby-1-9?lq=1)

# ruby-on-rails - IE 中的 Twitter 引导图标问题

> ID：11231298
> 
> 赞同：1
> 
> 时间：2012-06-27T16:52:43.543
> 
> 标签：ruby-on-rails, twitter-bootstrap

Bootstrap 非常酷，但由于某种原因，所有图标（以及按钮内的图标）在 IE 7 和 8 中根本不可用。

即将出现的只是一个方形符号。

我可以在 IE 中使用非圆形框，但图标是必须的。有任何想法吗？

（如果有什么不同，我们使用 twitter-bootstrap-rails gem 将 rails 作为平台运行。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T17:01:12.020

确保您已在 HTML 中声明了文档类型。

```
<!doctype html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:17:53.353

I assume the icons are correctly served on other web browser and you are using 2.0.4.

You can try to clear the ie cache.

Or maybe [http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/) (ie7 is supported)

There's a list of issue specific to ie on GitHub : [https://github.com/twitter/bootstrap/issues?labels=ie&page=1&state=closed](https://github.com/twitter/bootstrap/issues?labels=ie&page=1&state=closed) But don't see any related to your problem.

If none of the answer make sense to you, post some code (jsFiddle would be ideal but since the picture is expected to be in /img it will not works without editing bootstrap.css)

# c# - C# 安全文件解析/解析策略

> ID：11231299
> 
> 赞同：-1
> 
> 时间：2012-06-27T16:52:43.793
> 
> 标签：c#, parsing

这可能是一个新手问题：

如果看起来像这样，解析 texfile 的最聪明的方法是什么：

```
material polygon name
0
0
9
            -7          4.5         0
            -7          9.166667            0
            -2.333333           4.5         0 
```

我只对 9 xyz 值感兴趣。但是，我不知道一种将它们过滤掉的安全方法，因为有时信息会像这样写在一行中：

```
material polygon name 0 0 9 -7 4.5 0 -7 9.166667 0 -2.333333 4.5 0 
```

有时它用空格分隔，有时用制表符分隔。我猜这`0 0 9`表明后面有 9 个值。到目前为止，我只学会了用`.Split(' ')`

```
 System.IO.StreamReader reader = new System.IO.StreamReader(_file);
            string ln = reader.ReadLine();

            while (ln != null)
            {
                if (ln != null && ln[0] != '#')
                {
                    string[] lnsplit = ln.Split(' ');
                    double X = lnsplit[bla];
                    double Y = lnsplit[bla+1];
                    double Z = lnsplit[bla+2];
                }
                ln = occreader.ReadLine();
            }
            occreader.Close(); 
```

但这当然只有在文件结构严格的情况下才有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:01:18.427

我会使用`RegexOptions.SingleLine`启用的正则表达式。就像是 `^material polygon name (?:\d\s*){3}(?:(-?\d+(?:\.\d+)?)\s*){9}$`

该`\s`运算符涵盖多行，您可以使用生成的`Match`对象来拉出您想要的九个值。（来自`Captures`.`Groups[1]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:05:15.723

使用匹配浮点数的正则表达式，例如看到[这个问题。](https://stackoverflow.com/questions/3154621/regular-expression-a-line-of-string-contains-only-float-numbers-and-tab-spaces)然后只需调用 Regex.Match 并跳过前三个匹配项。

# wcf - 我无法使用浏览器（HTTP）调用 wcf 方法

> ID：11231300
> 
> 赞同：0
> 
> 时间：2012-06-27T16:52:47.847
> 
> 标签：wcf, http, browser

我有以下代码的服务

### 任务服务.svc

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class TodoService : ITodoService
{
    private readonly List<Todo> _dataSource;

    public TodoService()
    {
        _dataSource = new List<Todo>();
    }

    [WebGet(UriTemplate = "/Todos")]
    public List<Todo> Todos()
    {
        return _dataSource;
    }
} 
```

数据传输对象如下

```
[ServiceContract]
public interface ITodoService
{
    [OperationContract]        
    List<Todo> Todos();
}

[DataContract]
public class Todo
{
    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public bool Completed { get; set; }

} 
```

web.config 如下

```
<services>
  <service name="SampleService.TodosBehavior">
    <endpoint address="" behaviorConfiguration="SampleService.TodosBehavior"
      binding="webHttpBinding" contract="SampleService.TodoService" />
  </service>
</services>
<behaviors>
  <endpointBehaviors>
    <behavior name="SampleService.TodosBehavior">
      <enableWebScript />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

该应用程序托管在带有虚拟目录的 IIS 7 中`SampleService`。当我使用浏览器调用时，我`http://localhost/SampleService/TaskService.svc/Todos`一无所获。但我期望一个空数组。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:07:51.750

我认为 WebGet() 需要在您的界面（ServiceContract）中，而不是您对该界面的实现。此外，您是否需要 UriTemplate 中“Todos”之前的斜线？

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class TodoService : ITodoService
{
    private readonly List<Todo> _dataSource;

    public TodoService()
    {
        _dataSource = new List<Todo>();
    }

    public List<Todo> Todos()
    {
        return _dataSource;
    }
}

[ServiceContract]
public interface ITodoService
{
    [WebGet(UriTemplate = "Todos")]
    [OperationContract]        
    List<Todo> Todos();
} 
```

如果您在 IIS 中托管，您的 TaskService.svc 文件是什么样的？

编辑：哦，这是你的 .svc 文件。没关系。

# java - 如何在 Java 中获取 UNC 路径（WITH WHITESPACES）的可用磁盘空间量

> ID：11231305
> 
> 赞同：2
> 
> 时间：2012-06-27T16:53:08.257
> 
> 标签：java, whitespace, apache-commons, filepath, unc

我正在尝试`org.apache.commons.io.FileSystemUtils.freeSpaceKb(String path)`在 Java 中使用以获取具有空格的 UNC 路径的可用**空间**。问题是当有空格时这个函数不能正常工作。

假设网络中有一台名为 John-PC 的计算机。John 有一个包含空格的共享文件夹，我们想在该文件夹中存储一些内容。但首先，我们要确保他的本地驱动器上有足够的空间。所以我们`freeSpaceKb(String path)`用来获取可用空间。如果路径是这样的，它会起作用：

`\\\john-pc\data\abc`

但是，如果我们在路径中有空格，它就不再起作用了。

`\\\john-pc\data\abc def`

如果有人能给我一个这样做的好方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:22:48.343

Commons-io-1.4.jar 很可能存在一个错误。升级到 Commons-io-2.4.jar 就可以了。

我仍然想知道是否有使用 1.4 的方法。升级到 2.4 可能会导致一些未知问题。有什么想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:00:56.770

尝试在带有空格的文件夹周围添加引号。我还没有尝试过，但它可能会有所帮助。

`\\john-pc\data\\"abc def\"`

# .net - 尝试使用 TdDataAdapter.Fill() (Teradata DataAdapter) 填充 DataTable 时出现 System.Net.Sockets.SocketException

> ID：11231313
> 
> 赞同：3
> 
> 时间：2012-06-27T16:53:38.303
> 
> 标签：.net, exception, command, teradata, dataadapter

我见过其他人报告`System.Net.Sockets.SocketException`异常，但他们主要涉及 Web 服务。我们没有调用任何网络服务。事实上，这个 ASP.NET 应用程序是一个单层应用程序，其 UI 和数据层包含在一个程序集中。要检索数据，我们手动打开连接、创建命令并执行读取器或使用数据适配器填充数据表，然后再将其传递到页面。

每月几次尝试执行命令时，我们得到`System.Net.Sockets.SocketException`. 我不知道是什么原因造成的。如主题中所述，我们正在访问 Teradata 数据库，因此我们使用 TdConnection、TdCommand、TdDataAdapter。

```
cmdSolutionName = New TdCommand(sSql, Con)
daSolutionName.SelectCommand = cmdSolutionName
daSolutionName.Fill(tmpTable) 'Exception is thrown here 
```

有谁知道直接使用数据库连接而不是 Web 服务时会导致此异常的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:29:36.843

当我们使用 .Net Remoting 连接到另一台主机时，我在工作中看到了同样的错误。.Net Remoting 使用 TCP\IP 协议，我相信 TdCommand 也使用此协议。我发现问题的根源是“Trend Micro”进程，它是一种防病毒软件，它劫持了端口 8080 上的所有活动套接字。也许，您的防病毒软件正在“每月的那个时间”运行扫描并杀死您的所有通信。如果没有，试着想想另一个可能有害的过程。

# java - 无法访问在 cli 中创建的 cql 中的密钥空间

> ID：11231318
> 
> 赞同：1
> 
> 时间：2012-06-27T16:53:56.903
> 
> 标签：java, cassandra

我用 cassandra-cli 工具创建了一个键空间，我可以“使用”它。但是，当我尝试使用 cqlsh 命令“使用”键空间时，它并不存在。我不能同时使用它们吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T11:31:50.570

如果您使用大写作为 Keyspace 的名称，则必须使用引号：使用“Twissandra” 列族也是如此：从“用户”中选择 *；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:06:53.530

我正在使用 cassandra 1.1.1，我从来没有遇到过这种问题；检查您的 cqlsh 客户端是否指向您的 cassandra 服务器（打开 cqlsh 文件并查看“DEFAULT_HOST”是否指向您的 cassandra 服务器）。它可能会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:35:22.140

这确实很好奇......我刚刚经历了类似的行为。我注意到的是 cqlsh “不喜欢” CamelCase 名称。我有多个键集，它不允许我“使用”其中的任何一个，只有那些没有 CamelCased 名称的键集......我做了一个简单的实验，从 cassandra-gui 创建一个只有小写字母的键空间，然后访问它来自cqlsh，它工作得很好。不确定为什么会发生这种情况，但它确实有效。

# c - 在 CodeVisionAVR 中使用定时器生成正弦波形

> ID：11231321
> 
> 赞同：-2
> 
> 时间：2012-06-27T16:54:08.723
> 
> 标签：c, embedded, waveform

任何人都可以帮助我了解[CodeVisionAVR](http://www.hpinfotech.ro/html/cvavr.htm)吗？我想为 ATMega16L 微控制器编写一个程序，以使用 CodeVisionAVR 中的定时器功能生成正弦波形，但我不知道如何将 OCR 与正弦波一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:28:38.340

输出比较 (OC) 定时器输出只能生成方波。然而，它们可用于脉冲宽度可以变化的脉冲宽度调制 (PWM)；如果 PWM 波形输出经过低通滤波，则输出将是与 PWM 波形的标记空间比成比例的电压。通过以正弦方式修改脉冲宽度并使用适当的滤波，您可以生成正弦波输出。

因此，在每次定时器重新加载中断时，您都需要修改脉冲宽度。我建议您将脉冲宽度预先计算为一组值，并在每次重新加载中断时将它们循环提供给定时器。然而，在 PWM 频率、脉宽分辨率、模拟滤波和波形频率之间存在许多权衡，这会影响波形的准确性。您需要平衡这些变量以适应您对频率和带宽的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:30:26.833

您还可以使用定时器触发中断，将波形数据从其他 GPIO 引脚写入（使用梯形电阻器作为 DAC 或类似物），您可以将波形数据放在查找表中，并每次遍历该表中断触发。

或者，如果您有合适的 PWM 输出引脚，您可以使用定时器中断来减少/增加占空比值，以提供正弦波或任何其他波形输出。这确实需要 PWM 定时器的运行速度比所需的正弦波快得多，这样您就可以对其进行过滤，但这在一定程度上取决于您需要的准确度。

# vim - 您如何检查何时在 vim 中映射键？

> ID：11231326
> 
> 赞同：2
> 
> 时间：2012-06-27T16:54:35.137
> 
> 标签：vim

我在 vim 中有一些映射，用于在 .vimrc 中设置的拆分之间移动，

```
nnoremap <C-j> <C-w>j
nnoremap <C-k> <C-w>k
nnoremap <C-h> <C-w>h
nnoremap <C-l> <C-w>l 
```

所有这些工作除了`<C-j>`，我怀疑它正在我的一个插件中重新映射。我想知道在哪里，但我不确定如何。有没有办法找到“`<C-j>`最后映射的位置”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T17:00:03.877

```
:verbose nnoremap <c-j> 
```

应该有帮助。

# c++ - 可编写脚本的插件：在 NPObject 上调用方法时出错

> ID：11231328
> 
> 赞同：0
> 
> 时间：2012-06-27T16:54:44.340
> 
> 标签：c++, google-chrome, firefox, npapi, browser-plugin

我收到一个 JavaScript 错误：`Error calling method on NPObject`在 XP 上的 Chrome 和 Firefox 中调用我的 NPAPI 插件中的方法时。在 Windows 7 上使用相同的浏览器运行相同的代码是成功的。

我已经使用 NPAPI 构建了一个 Scriptable 插件，到目前为止，我可以调试到`Invoke`我的 Scriptable 对象的方法。但我不相信它完成后我有任何控制权。
有没有人有任何想法？这是否仅在 Windows XP 中存在？

```
bool MY_ScriptableObject::Invoke(NPObject*        npobj,   
                                 NPIdentifier     name,    
                                 const NPVariant* args,    
                                 uint32_t         argCount,
                                 NPVariant*       result)  
{ 
bool                    rc   = true;
char*                   wptr = NULL;

    rc = false;
    wptr = NULL;

    if  (name == NPN_GetStringIdentifier("getVersion"))
        {
        wptr = (NPUTF8*)NPN_MemAlloc(strlen("version:1.0.1") + 1); //Should be freed by browser
        if  (wptr != NULL)                                                      
            {
            rc = true;
            memset(wptr,
                   0x00,
                   strlen("version:1.0.1")+1);
            memcpy(wptr,
                   "version:1.0.1",
                   strlen("version:1.0.1"));
            STRINGZ_TO_NPVARIANT(wptr,
                                 *result);
            }
        }
    return (rc);
} 
```

这是我正在执行的 HTML 函数：

```
function Version()
{
var plugin = document.getElementById("plugin");
if (plugin == undefined)
    {
    alert("plugin failed");
    return;
    }
var text = plugin.getVersion();  //Error happens at this line
alert(text);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T05:24:38.940

在当前版本的浏览器中，关于 NPAPI 的（讽刺）真棒（/讽刺）的事情是，如果调用出现*任何*问题，您会自动收到该错误消息，即使插件尝试使用 NPN_SetException 设置异常也是如此。

我的第一个猜测是您编译的代码针对的是比 windows XP 更高版本的 windows；我不确定这是否会产生这个问题。我从未见过您描述的问题，并且我在 xp、vista 和 7 上运行的插件没有任何问题。您也可以尝试使用[FireBreath](http://www.firebreath.org)插件，看看是否存在问题。

我建议您附加一个调试器并设置一些断点。从 NPN_GetValue 开始并确保它正在实例化您的 NPObject，然后在您的 NPObject 的 HasMethod 和 Invoke 方法中设置断点并查看命中了什么。可能其中的某些内容会向您展示实际发生的情况，或者至少告诉您哪些代码受到或没有受到打击。

# spring - Spring - 将属性文件中的日期列表注入到 bean 属性中

> ID：11231330
> 
> 赞同：0
> 
> 时间：2012-06-27T16:54:49.080
> 
> 标签：spring, list, properties, dependency-injection, jodatime

> **可能重复：**
> [如何在属性文件中指定值，以便可以使用 ResourceBundle#getStringArray 检索它们？](https://stackoverflow.com/questions/226050/how-do-i-specify-values-in-a-properties-file-so-they-can-be-retrieved-using-reso)

我有这样的课：

```
public class BankHolidayCalendar {

    List<DateTime> bankHolidays;

    public BankHolidayCalendar(final List<DateTime> p_bankHolidays) {
        bankHolidays = p_bankHolidays;
    }
} 
```

和一个属性文件

```
# holidays.properties
holidayDates=01-01-2012, 13-02-2012, 22-04-2012 
```

如何从这个属性文件中读取这些日期并注入到 bean 构造函数中？

我在这里使用joda time。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:04:22.007

我将使用`@Value`注释并`DateTime`在构造函数中创建对象，如下所示：

```
public class BankHolidayCalendar {

    List<DateTime> bankHolidays = new ArrayList<DateTime>();

    public BankHolidayCalendar(@Value("holidayDates") String[] p_bankHolidays) {
        for (String date : p_bankHolidays) {
            bankHolidays.add(...);
        }
    }
} 
```

# objective-c - 使用来自亚马逊 s3 的 ASIHttprequest 识别文件是否存在

> ID：11231331
> 
> 赞同：0
> 
> 时间：2012-06-27T16:54:51.247
> 
> 标签：objective-c, asihttprequest

我正在使用这个简单的 http 请求从 s3 服务器下载文件：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setDidFinishSelector:@selector(done:)];

[request setDownloadDestinationPath:dest];
[request setDownloadProgressDelegate:pv];
[request setDelegate:self];
[request setShowAccurateProgress:YES];
[request setShouldContinueWhenAppEntersBackground:YES];
[request startAsynchronous];
pv.hidden = NO;
[request setFailedBlock:^(void) {
    NSLog(@"Download failed: %@. reason:%@", url, [request.error localizedDescription]);
}];
[request setCompletionBlock:^(void){
    NSString *zipFilePath = dest;
    [SSZipArchive unzipFileAtPath:zipFilePath toDestination:desti];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    [fileManager removeItemAtPath:zipFilePath error:NULL];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"ההורדה הסתיימה"       message:@"מה ברצונך לעשות" delegate:self cancelButtonTitle:@"חזרה לתפריט" otherButtonTitles:@"נגן אפליקציה",nil];
    [alert show];

}]; 
```

下载效果很好，但问题是请求总是成功，如果请求 url 中不存在文件，它也不会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:17:23.763

在我的脑海中，您可以使用 NSFileManager 检查下载的 zip 文件的文件大小

```
- (NSDictionary *)attributesOfItemAtPath:(NSString *)path error:(NSError **)error 
```

零字节表示没有下载文件。

# c# - 在 WPF 中运行时属性更改后外观不正确

> ID：11231332
> 
> 赞同：0
> 
> 时间：2012-06-27T16:54:58.650
> 
> 标签：c#, wpf

我在 WPF 应用程序中遇到了这个问题，当控件的属性发生更改时，它们不会在视觉上刷新！我正在使用 snoop，我可以看到该属性设置正确，但它不影响控件。我注意到，如果我更改大小，它会刷新并更正控件的外观。

此应用程序有多个页面（继承页面的控件），并且有导航栏可以导航到这些页面中的每一个。菜单中有一个选项可以让用户更改视觉属性（控件的“FlowDirection”），这会调用一个加载资源字典的方法，该字典将新样式应用于整个框架元素。我注意到，如果用户更改它（通过使用该菜单项），正在显示的页面中的所有控件都会刷新并且可以正常工作。但是当我们导航到其他页面时，一些控件会被刷新，而其中一些不会！（正如我之前提到的，我使用了 snoop，它显示为所有其他页面中的控件属性设置了正确的值，如果我调整页面大小，它们会进入正确的位置）

我尝试了 InvalidateVisual 、 InvalidateArrange 、 InvalidateMeasure ，但它们都没有帮助。

代码在 WPF C#、.NET 4.0 中

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:04:40.583

如果您使用 Binding，则需要使用 DependencyProperties，或者确保在代码隐藏中实现 INotifyPropertyChanged，并且每当属性更改时，您需要调用 OnPropertyChanged("PropertyName")，其中 'PropertyName' 是您的属性，而 OnPropertyChanged 是您的 INotifyPropertyChanged 接口的实现（如下所示）。

```
#region INotifyPropertyChanged Members

public event PropertyChangedEventHandler PropertyChanged;

public void OnPropertyChanged(string prop)
{
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(prop));
    }
}

#endregion 
```

# php - 在 Cookie 中保存用户信息

> ID：11231334
> 
> 赞同：1
> 
> 时间：2012-06-27T16:55:06.120
> 
> 标签：php, mysql

当用户选择记住我功能时，我将他的用户名和 ID 保存在 cookie 中。然后，当用户返回站点时，我会根据数据库检查用户名和 id，以确保用户是合法的。接下来，我通过将 cookie 数据存储在会话变量中来登录用户。这是记住和登录用户的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:58:42.530

Cookie 不是一种非常安全的数据存储方式。cookie 可以由用户修改，并可能导致某人“入侵”您的网站。我建议在 cookie 中存储一个字符串，该字符串是某种东西的哈希值。还将来自 cookie 的散列字符串存储在数据库中。这样，当用户返回站点时，您检查 cookie 是否已填充，将其与数据库中的散列值相匹配，然后找出谁拥有该散列值。如果一切都有效，请登录。

**数据库设置**

```
secretKey PK varchar
userid (could be unique) int
validUntil int or date/time
  //If userID is unique you will have to remove this row from the 
  // database when a new key is made for the user,  This would then mean
  // that a user would only be allowed to be rememberd on one computer 
```

**伪代码**

```
//User logs in with remember me
    //set cookie to something like md5(userid,username,timestamp)
    //store the md5 in the database layout
//User Returns to site
    //check to see if cookie is set
        //if cookie set
            //find md5 in database which is logged with user id
            //if found and not yet expired log in
            //else show login page
        //if cookie not set show login page 
```

在有效直到字段中，您可以将其设置为登录后 2 周。一旦有效直到过去，不要让该密钥工作并确保 cookie 对用户来说已过期。

**查询以检查登录**

SELECT * FROM rememberMe WHERE key="//put md5 here" AND validUntil > time()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:01:25.510

不。

这取决于您想要获得的安全性。以下是您可以做的一些事情（部分或全部）来提高安全性：

*   不要在 cookie 中存储任何特定的内容（用户名/id/等）。使用随机生成的废话（令牌）。
    1.  在您的数据库中，您可以拥有一个令牌 <-> 用户映射
    2.  根据您的数据库检查令牌并在匹配时登录用户
    3.  销毁令牌（将其标记为“已使用”，也许稍后会被删除。无论您决定什么，令牌都不应该再工作了）。
*   仅用于`https`传输 cookie、登录等。
*   如果用户发送过时的令牌（即不在您的数据库中的令牌，或者已被标记为已使用的令牌），这意味着令牌可能已被泄露。对于经过身份验证的用户（甚至可能使用 ajax）的每个请求，将他们登录时使用的令牌（您可以将其存储在会话中）与过期令牌尝试列表进行比较。如果匹配，这意味着经过身份验证的用户很可能已经劫持了令牌。把他们踢出去。

# html - 超链接不起作用

> ID：11231337
> 
> 赞同：1
> 
> 时间：2012-06-27T16:55:31.130
> 
> 标签：html, css

[我的网站](http://www.startupsandfinance.com/ "创业博客")头部有以下代码。我已阅读[此](https://stackoverflow.com/questions/7508641/hyperlinks-a-href-do-not-work)问题，但我的 css 似乎没有 z-index。图像和类似框显示但当我单击它们时没有任何反应，或者我应该说超链接不起作用。请帮忙。谢谢

```
 <div class="content-pad" style="float:left;">               
                <a href="mailto:developerfahaduddin@gmail.com"><img src="http://www.startupsandfinance.com/wp-content/uploads/2012/06/Advertise-here-728x90.png" width="728" height="90" /></a> 
                <span class="widget-pad" style="margin-left:25px;"> 
                <iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2FStartupAndFinance&amp;width=290&amp;height=62&amp;colorscheme=light&amp;show_faces=false&amp;border_color&amp;stream=false&amp;header=true&amp;appId=384169901601437" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:290px; height:62px;" allowTransparency="true"></iframe> 

                </span>
                </div>
                </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:59:56.037

当您单击标题图像时，将启动默认电子邮件应用程序，因为您有以下**链接**：

```
mailto:developerfahaduddin@gmail.com 
```

你可以在这里现场查看：

[http://jsfiddle.net/MSRXU/](http://jsfiddle.net/MSRXU/)

那么，还有其他一些您没有为其编写代码的东西。

使用 Firebug 查看您的页面后，我发现还有其他问题。如果您添加一些高度：

```
<div class="content">
...

</div> 
```

你会没事的，图像将是可点击的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:19:18.460

The problem is that `.content` has no height, and pointer events are not reaching the iframe because it is outside of it's parent element's boundaries.

Adding this rule to whatever else you have for your `.content` selector.

```
div.content {
    height: 120px;
} 
```

# php - 从更新链接更新 mySQL

> ID：11231345
> 
> 赞同：0
> 
> 时间：2012-06-27T16:55:43.610
> 
> 标签：php, mysql

我在索引页面上有以下链接

```
<td align="center"><a href="../athena/admin/update.php?id=' . $data ["keyword"] . ' ">update</a></td> 
```

这是它转到的页面... Update.php 这是代码

```
$id=$_GET['keyword'];

<tr><td>  Keyword:  </td><td> <input type="text" name="keyword" id="keyword" value="<? echo $id['keyword']; ?>"> 
```

我希望关键字自动插入到表单中，以便可以更新其余信息。我怎样才能做到这一点？由于某种原因，这不起作用。它将密钥放在更新页面上的 URL ?id=KEYWORD 中，但未显示在表单中。我敢肯定会发现一些愚蠢的事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:58:45.073

您需要使用`$_GET['id']`或将链接 href 更改为`../athena/admin/update.php?keyword=`. 目前，您不是在寻找`id`包含关键字的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T16:59:55.333

你需要改变：

```
<? echo $id['keyword']; ?> 
```

到：

```
<?php echo htmlspecialchars($id); ?> 
```

笔记：

*   为了以防万一，我使用了普通的 php 标签而不是短标签；
*   我过去常常`htmlspecialchars`避免错误和 javascript 的肮脏；始终为要输出到的介质准备数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:11:06.190

请再次检查您的变量名。

在这里，您将 .php?id= 作为 GET 参数传递：

```
<td align="center"><a href="../athena/admin/update.php?id=' . $data ["keyword"] . ' ">update</a></td> 
```

在 Update.php 中，我认为您只是将其命名错误，它应该是：

```
$id = $_GET["id"]; //not $_GET["keyword"] 
```

下面的代码将输出所有的 GET 参数，这对于在简单的 PHP 应用程序中调试通常很有用：

```
<?php
    echo '<pre>';
        print_r($_GET);
    echo '</pre>';
?> 
```

希望它有所帮助。

编辑：php 中没有 println。使用 print_r() 或 var_dump()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:00:14.720

```
$id=$_GET['keyword'];

<tr><td>  Keyword:  </td><td> <input type="text" name="keyword" id="keyword" value="<? echo $id; ?>"> 
```

可能是这样吗？

# xcode - 转回纵向时，shouldAutorotateToInterfaceOrientation 不会触发

> ID：11231347
> 
> 赞同：0
> 
> 时间：2012-06-27T16:55:56.367
> 
> 标签：xcode, device-orientation

这是事件：

```
- (BOOL)shouldAutorotateToInterfaceOrientation (UIInterfaceOrientation)interfaceOrientation
{    
    [self setupScrollView];
    return YES;
} 
```

每当设备旋转时，我都会设置我`UIScrollView`的，以便里面的东西总是“正确”的一面朝上。

```
 if ([[UIDevice currentDevice] orientation] == UIInterfaceOrientationPortrait)
    {
        self.scrollView.transform = CGAffineTransformIdentity;
    }
    else if ([[UIDevice currentDevice] orientation] == UIInterfaceOrientationPortraitUpsideDown)
    {
        self.scrollView.transform = CGAffineTransformRotate(self.scrollView.transform, M_PI);
    }
    else if ([[UIDevice currentDevice] orientation] == UIInterfaceOrientationLandscapeLeft)
    {
        self.scrollView.transform = CGAffineTransformRotate(self.scrollView.transform, -M_PI/2);
    }
    else if ([[UIDevice currentDevice] orientation] == UIInterfaceOrientationLandscapeRight)
    {
        self.scrollView.transform = CGAffineTransformRotate(self.scrollView.transform, M_PI/2);
    } 
```

这有效，除非设备从横向旋转回纵向（右侧向上），断点验证`shouldAutorotateToInterfaceOrientation`没有被调用。因此，当设备转回纵向时，`UIScrollView`内容是横向的。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T21:03:35.807

仍然不确定为什么上述方法不起作用，但以下方法似乎有效：

```
- (void)viewDidLoad {
[super viewDidLoad];  

//for some reason shouldAutorotateToInterfaceOrientation isn't firing when returning to portrait so we need to register for notifications
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(setupScrollView) name:UIDeviceOrientationDidChangeNotification object:nil];
} 
```

# objective-c - 正确实施碰撞？

> ID：11231349
> 
> 赞同：0
> 
> 时间：2012-06-27T16:56:11.537
> 
> 标签：objective-c, api, bump

当我尝试设置它时，我不断收到链接器错误。我在我的应用程序委托中使用它来配置所有内容

```
- (void) configureBump {
[BumpClient configureWithAPIKey:@"your_api_key" andUserID:[[UIDevice currentDevice] name]];

[[BumpClient sharedClient] setMatchBlock:^(BumpChannelID channel) { 
    NSLog(@"Matched with user: %@", [[BumpClient sharedClient] userIDForChannel:channel]); 
    [[BumpClient sharedClient] confirmMatch:YES onChannel:channel];
}];

[[BumpClient sharedClient] setChannelConfirmedBlock:^(BumpChannelID channel) {
    NSLog(@"Channel with %@ confirmed.", [[BumpClient sharedClient] userIDForChannel:channel]);
    [[BumpClient sharedClient] sendData:[[NSString stringWithFormat:@"Hello, world!"] dataUsingEncoding:NSUTF8StringEncoding]
                              toChannel:channel];
}];

[[BumpClient sharedClient] setDataReceivedBlock:^(BumpChannelID channel, NSData *data) {
    NSLog(@"Data received from %@: %@", 
          [[BumpClient sharedClient] userIDForChannel:channel], 
          [NSString stringWithCString:[data bytes] encoding:NSUTF8StringEncoding]);
}];

[[BumpClient sharedClient] setConnectionStateChangedBlock:^(BOOL connected) {
    if (connected) {
        NSLog(@"Bump connected...");
    } else {
        NSLog(@"Bump disconnected...");
    }
}];

[[BumpClient sharedClient] setBumpEventBlock:^(bump_event event) {
    switch(event) {
        case BUMP_EVENT_BUMP:
            NSLog(@"Bump detected.");
            break;
        case BUMP_EVENT_NO_MATCH:
            NSLog(@"No match.");
            break;
    }
}];
} 
```

我得到的错误如下：

```
Undefined symbols for architecture i386:
"_CFHostCreateWithName", referenced from:
  -[BumpClient ipStringForHost] in libBump.a(BumpClient-4A2ADD525826BE6B.o)
"_CFHostStartInfoResolution", referenced from:
  -[BumpClient ipStringForHost] in libBump.a(BumpClient-4A2ADD525826BE6B.o)
"_CFHostGetAddressing", referenced from:
  -[BumpClient ipStringForHost] in libBump.a(BumpClient-4A2ADD525826BE6B.o)
"_CFHostGetNames", referenced from:
  -[BumpClient ipStringForHost] in libBump.a(BumpClient-4A2ADD525826BE6B.o)
"_OBJC_CLASS_$_CLLocationManager", referenced from:
  objc-class-ref in libBump.a(BumpClient-4A2ADD525826BE6B.o)
"_kCLLocationAccuracyBest", referenced from:
  -[BumpClient init] in libBump.a(BumpClient-4A2ADD525826BE6B.o)
"_AudioServicesCreateSystemSoundID", referenced from:
  -[BumpDetector init] in libBump.a(BumpDetector.o)
"_AudioServicesPlaySystemSound", referenced from:
  -[BumpDetector init] in libBump.a(BumpDetector.o)
  -[BumpDetector playBumpSound] in libBump.a(BumpDetector.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我有 libBump.a 和 BumpClient.H 并检查正在链接的框架，包括 libBump

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:00:07.130

看起来您没有链接到 libBump.a 所依赖的框架。例如。_CFHostCreateWithName 来自`CoreServices`框架，_AudioServicesPlaySystemSound 来自`AudioToolbox`框架。

# wpf - 如何在代码隐藏中绑定 Viewport2DVisual3D 控件的转换？

> ID：11231352
> 
> 赞同：1
> 
> 时间：2012-06-27T16:56:25.323
> 
> 标签：wpf, data-binding

我的任务是为应用程序创建某种 3D 界面。在查看了我的选项后，我认为 Viewport2DVisual3D 是最容易理解和使用我的游戏设计背景的（我对矩阵转换等感到满意）。

到目前为止，我已经有一个很好的按钮列表，在屏幕上以半圆形“舞台”模式显示。这是一个好的开始。现在，我想做的是让轮播随着用户输入而旋转。现在，我会在单击时将按钮旋转到中心视图，但最终我将使用操作数据来允许屏幕滑动。

我遇到的问题是将每个 V2DV3D 的 Transform 属性绑定到支持每个 Button 控件的数据。我不确定如何在代码隐藏中执行此操作，并且它需要代码隐藏才能以编程方式构建转换。

实际上，我以这种方式分配值（`vv`是一个`Viewport2DVisual3D`对象）：

```
vv.SetValue(Viewport2DVisual3D.TransformProperty, item.Transform); 
```

`item`a which在哪里`CarouselItem`实现`INotifyPropertyChanged`：

```
public class CarouselItem : INotifyPropertyChanged
{
    [...]

    public Transform3DGroup Transform
    {
        get { return _transform; }
        set { _transform = value; OnPropertyChanged("Transform"); }
    }

    [...]

    private void Recalc()
    {
        Transform3D rotate = new RotateTransform3D(new 
            AxisAngleRotation3D(CarouselBrowser.Up, angle));
        Transform3D translate = new TranslateTransform3D(0, 0,
            CarouselBrowser.Radius);
        Transform3D translate2 = new TranslateTransform3D(
            CarouselBrowser.Focus);
        Transform3DGroup tGroup = new Transform3DGroup();
        tGroup.Children.Add(translate);
        tGroup.Children.Add(rotate);
        tGroup.Children.Add(translate2);
        Transform = tGroup;
    }

    [...]

    public event PropertyChangedEventHandler PropertyChanged;
    protected virtual void OnPropertyChanged(string propertyName)
    {
        this.VerifyPropertyName(propertyName);
        PropertyChangedEventHandler handler = this.PropertyChanged;
        if (handler != null)
        {
            var e = new PropertyChangedEventArgs(propertyName);
            handler(this, e);
        }
    }
    /// <summary>
    /// Warns the developer if this object does not have
    /// a public property with the specified name. This 
    /// method does not exist in a Release build.
    /// </summary>
    [Conditional("DEBUG")]
    [DebuggerStepThrough]
    public void VerifyPropertyName(string propertyName)
    {
        // Verify that the property name matches a real,  
        // public, instance property on this object.
        if (TypeDescriptor.GetProperties(this)[propertyName] == null)
        {
            string msg = "Invalid property name: " + propertyName;

            if (this.ThrowOnInvalidPropertyName)
                throw new Exception(msg);
            else
                Debug.Fail(msg);
        }
    }
    /// <summary>
    /// Returns whether an exception is thrown, or if a Debug.Fail() is used
    /// when an invalid property name is passed to the VerifyPropertyName method.
    /// The default value is false, but subclasses used by unit tests might 
    /// override this property's getter to return true.
    /// </summary>
    protected virtual bool ThrowOnInvalidPropertyName { get; private set; }

    [...]
} 
```

（部分代码省略；更改`Recalc`时调用，新值与旧*值*不同）`angle`

 *所以最初的“绑定”工作正常，按钮进行初始转换，但对 Transform 的任何进一步修改都不会导致任何变化。Transform 属性更改事件的事件处理程序没有订阅者。我应该如何更改与 CarouselItem 和 V2DV3D 的绑定/关系以使它们链接？似乎没有任何类型的 DataContext 或 V2DV3D 的类似属性可以将整个对象绑定到。*

# perl - 在 URL 末尾带有 #!/:0 的 cgi 页面

> ID：11231354
> 
> 赞同：0
> 
> 时间：2012-06-27T16:56:49.770
> 
> 标签：perl, url, cgi

我正在为 perl/cgi 网页编码。谁能解释一下这个网址是什么意思？

```
http://www.example.com/cgi-bin/test.cgi#!/:0 
```

我正在阅读的内容是从`#`标志开始的，之后的所有内容都是一个 html 项目，它不会被发送到服务器。然后，我很困惑。谢谢。

更新：

似乎 URL 后面的项目是由 cgi 代码本身显式创建的。感谢（或者对不起）所有使用脑细胞的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:31:31.350

它看起来像一个锚（对网站一部分的引用）。请看这里：[http](http://en.wikipedia.org/wiki/HTML_element#Anchor) ://en.wikipedia.org/wiki/HTML_element#Anchor （注意：这个网址也包含一个锚点）

# php - 无法检索复选框状态

> ID：11231357
> 
> 赞同：1
> 
> 时间：2012-06-27T16:57:02.247
> 
> 标签：php, jquery, checkbox

我有一个表格，每行都有一些复选框。表格页脚中有一个带有多个选项的选择元素。当用户选择一个选项时，我想将任何选中的复选框和所选选项的值传递给 php 脚本。

这是表格：

```
<form name="doall" method="POST" action="action.php">
    <table>
        <tbody>
            <?php for($j=0;$j<count($userToRead);$j++){ ?>
                <tr>
                    <td>
                        <input type="checkbox" id="selection_<?php echo $j ?>" name="objectSelected[<?php echo $userToRead[$j]['id'] ?>]" value="1"/>
                    </td>
                    <td align="center">
                        <?php echo $userToRead[$j]['id'] ?>
                    </td>
                    <td align="center" style="text-align:center;padding-left:15px;background-color:<?php echo $SListsStatus[intval($userToRead[$j]['userstatus'])][1]; ?>;" >
                    </td>
                    <td align="center">
                        <?php echo stripaccenti($userToRead[$j]['user']) ?>
                    </td>
                    <td>
                        <?php echo stripaccenti($SUserType[$userToRead[$j]['type']]['name']) ?>
                    </td>
                    <td align="center">
                        <?php echo stripaccenti($userToRead[$j]['first_name']) ?>
                    </td>
                    <td align="center">
                        <?php echo stripaccenti($userToRead[$j]['last_name']) ?>
                    </td>
                    <td align="center">
                        <?php echo stripaccenti($userToRead[$j]['title']) ?>
                    </td>
                    <td class="actBtns">
                        <a href="#" title="Update" class="tipS">
                            <img src="images/icons/edit.png" alt="" />
                        </a>
                        <a href="#" title="Remove" class="tipS">
                            <img src="images/icons/remove.png" alt="" />
                        </a>
                    </td>
                </tr>
            <?php } // end for ?>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="9">
                    <div class="itemActions">
                        <label>Con tutte le selezionate:</label>
                        <select name="whatDoAll">
                            <option value="1">Attiva</option>
                            <option value="2">Disattiva</option>
                        </select>
                        <input type="submit" value="Esegui" class="button redB" style="margin: 5px;"/>
                    </div>
                </td>
            </tr>
        </tfoot>
    </table>                
</form> 
```

因此，在我的表格的每一行中，我都有一个复选框，其中的值是我需要用我的 php 脚本修改的 db 对象的 ID。

这是我的脚本：

```
$('input[type="submit"]').click(function() {
    var output = '';
    $('input[type="objectSelected"]:checked').each(function(index) {
        output += $(this).val() + ", ";
    });
    alert(output + "is checked!");
}); 
```

在 php 文件中，我尝试检索变量，`$_POST['objectSelected']`但变量始终为空。此外，脚本警报为空。

这些表是用 jquery 创建的：**如果我使用带有纯 html 复选框的纯 html 表，一切正常！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:17:19.990

你做错了。您正在指定输入类型，那么代码应该是：

```
<script type="text/javascript">
                    $('input[type="submit"]').click(function() {
                      var output = '';

                      $('input[type="checkbox"]:checked').each(function(index) {
                         output += $(this).val() + ", ";
                      });

                      alert(output + "is checked!");
                    });
  </script> 
```

希望这可以帮助你

# opengl - GLSL 着色器：混合、原始特定行为和丢弃顶点

> ID：11231360
> 
> 赞同：2
> 
> 时间：2012-06-27T16:57:06.997
> 
> 标签：opengl, glsl, shader, primitive-types, blending

标准：我正在使用带有着色器 (GLSL) 的 OpenGL，并尝试使用现代技术（例如，尝试远离已弃用的概念）。

我的问题，在一个非常笼统的意义上——更多细节见下文——如下：

1.  着色器是否允许您进行自定义混合以帮助消除使用 GL_BLEND 时发现的 z 顺序透明度问题？
2.  有没有办法让着色器知道正在绘制什么类型的图元而无需“手动”传递某种标志？
3.  着色器有没有办法“忽略”或“丢弃”顶点（尤其是在绘制点时）？

背景：我的应用程序在正交投影中绘制与线相连的点（顶点在投影中具有不同的深度）。我最近才开始在项目中使用着色器（试图摆脱已弃用的概念）。我了解标准混合在 alpha 测试和深度测试方面存在排序问题：基本上，如果首先绘制较高 z 级别的“半透明”像素（因此与已在较低 z 级别的该像素绘制的任何颜色混合），然后在该像素处绘制一个不透明对象，但在较低的 z 级别上，深度测试可防止更改已经为“较高”z 级别绘制的像素，从而导致混合问题。为了克服这个问题，您需要先绘制不透明的项目，然后按 z 升序绘制半透明的项目。

此外，为了速度和方便，我将每个顶点的信息（以及几个统一变量）传递给着色器，它们使用这些信息来查找需要特别注意的顶点子集。如果不在应用程序本身中执行一组类似的逻辑（并减慢速度），我无法先验地知道那是什么验证子集。因此，我将所有顶点发送到着色器。但是，当我绘制“点”时，我希望着色器忽略所有不在它确定的子集中的顶点。我想我可以通过将 alpha 设置为零并在 GL 上下文中使用 alpha 函数来获得效果，这将防止绘制任何 alpha 小于 0.01 的东西。然而，有没有更好或更“正确”的 glsl 方式让着色器说“忽略这个顶点”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T18:19:52.433

> 着色器是否允许您进行自定义混合以帮助消除使用 GL_BLEND 时发现的 z 顺序透明度问题？

有点。如果您可以访问 GL 4.x 级硬件（Radeon HD 5xxx 或更高版本，或者 GeForce 4xx 或更高版本），那么您可以执行与订单无关的透明度。早期版本具有深度剥离等技术，但它们非常昂贵。

GL 4.x 级版本本质上使用了一系列透明样本的“链接列表”，您可以通过全屏处理将其解析为最终样本颜色。它当然不是*免费*的，但它不像其他 OIT 方法那样昂贵。你的案子会有多贵是不确定的；它与您有多少重叠像素成正比。

您仍然必须先绘制不透明的东西，并且必须使用特殊的着色器代码绘制透明的东西。

> 有没有办法让着色器知道正在绘制什么类型的图元而无需“手动”传递某种标志？

不。

> 着色器有没有办法“忽略”或“丢弃”顶点（尤其是在绘制点时）？

一般没有，但*点数*是的。几何着色器可以有条件地发射顶点，从而允许您出于任意原因丢弃任何顶点。

丢弃非点图元中的顶点是可能的，但它也会影响该图元的解释。点很简单的原因是因为顶点*是*图元，而三角形中的顶点不是整个图元。您可以丢弃线条，但丢弃线条中的顶点*是*......价值可疑。

话虽如此，您对为什么要这样做的解释是值得怀疑的。您想使用本质上是一个布尔值来更新顶点数据，该值表示“与我一起做事”或不做。这意味着，每一帧，你都必须修改你的数据来说明哪些点应该被渲染，哪些点不应该被渲染。

最简单和最有效的方法就是*不使用它们进行渲染*。也就是说，安排你的数据，以便 GPU 上唯一的东西是你*想要*渲染的点。因此，根本不需要做任何特别的事情。如果您要不断更新您的顶点数据，那么您已经注定要处理[流式顶点数据](http://www.opengl.org/wiki/Buffer_Object_Streaming)。因此，您不妨以一种提高渲染效率的方式流式传输它。

# ios - NSURLRequest HTTPBody 与 ASIHTTPRequest postBody

> ID：11231361
> 
> 赞同：0
> 
> 时间：2012-06-27T16:57:08.727
> 
> 标签：ios, asihttprequest, nsurlrequest

我正在尝试将项目的大部分使用 NSURLConnection 的 NSURLRequest 转换为 ASIHTTPRequest 调用。我遇到了一个关于在 ASIHTTPRequest 中设置 HTTPBody 的问题。这是我对 NSURLRequest 调用的内容：

```
NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:self.urlString]];
[req setHTTPMethod:@"POST"];
[req setHTTPBody:[self.paramString dataUsingEncoding:NSUTF8StringEncoding]];
[self _sendRequest:req]; 
```

要转换为 ASI，这就是我目前所拥有的：

```
__block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:self.urlString]];
[request setRequestMethod:@"POST"];
[request appendPostData:[self.paramString dataUsingEncoding:NSUTF8StringEncoding]];
[request setCompletionBlock:^{
    NSLog(@"ASIHTTP request finished: %@", [request responseString]);
    // Do stuff here
}];
[request setFailedBlock:^{
    NSError *error = [request error];
    NSLog(@"ASIHTTP error: %@", [error description]);
}];
[request startAsynchronous]; 
```

~~虽然当我用 ASI 运行它时，我得到了这个错误：~~

 ~~```
ASIHTTP error: Error Domain=ASIHTTPRequestErrorDomain Code=6 "Unable to start HTTP connection" UserInfo=0x10ddf6b0 {NSLocalizedDescription=Unable to start HTTP connection} 
```~~  ~~**编辑**此错误已修复，但由于未设置正文，数据仍未正确传输。

我认为这与我没有正确设置身体有关。我尝试使用 ASI 的 setPostBody，但只产生了相同的结果。这适用于 NSURLRequest，但不适用于 ASI。我很确定这真的很简单，而且我还没有探索过 ASI 的完整库，但我只是想知道是否有人有任何建议。我已阅读文档，但找不到所需的内容。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:06:53.130

你能检查一下吗

```
 self.paramString 
```

是正确的？它看起来怎样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:25:38.917

我最终使用了 ASIFormDataRequest 并设置了值和键。这似乎奏效了！~~

# java - 为什么？

> ID：11231365
> 
> 赞同：2
> 
> 时间：2012-06-27T16:57:16.430
> 
> 标签：java, sockets, jakarta-ee, io, serversocket

我在 Java 中有一个 Socket-Client 编程。我正在使用 DataOutputStream 将消息发送到 Server Socket 。有时在 DataOutputstream 上写入的消息没有发送到 ServerSocket 。我认为这是由于我在发送消息后没有冲洗。我这样做但没有用。如果我终止类执行，那么只有我从 ServerSocket 接收消息。

我的代码：

```
public class LoggingClient {

LinkedBlockingQueue<byte[]> messages = new LinkedBlockingQueue<byte[]>();

public static LoggingClient clientObj;

/*
 * waiting 2 seconds for connecting centralized log server . If it's not reachable writing log's in local machine
 * this log's will be collected on eclipse restart.
 */
public static final int SOCKET_TIMEOUT = 2000;
/**
 * Server which the log server is currently running.
 */
public static final  String SERVER = "bharathi";
/**
 * Port which the log server is running.
 */
public static final int PORT = 10000;

/**
 * Client socket used to connect the server .
 */
Socket client = null;

public static Logger logger = Logger.getLogger(LoggingClient.class.getName());

/**
 * Used to write given logs into client output stream.
 */
DataOutputStream out = null;

public boolean isConnected = false;

/**
 * Used for preventing instaniate LoggingClient without calling getInstance method.
 */
private LoggingClient(){

}

/**
 * Clear's the socket and initialize new socket .
 */
public void init(){
try{
    clear();
    client = new Socket();
        client.setTcpNoDelay(true);
    client.connect(new InetSocketAddress(SERVER,PORT),SOCKET_TIMEOUT); //trying to make connection within two seconds.
    out = new DataOutputStream(client.getOutputStream());
    isConnected = true;
}catch(Exception e){
    isConnected = false;
}
}

public static LoggingClient getInstance(){
if(clientObj == null){
    clientObj = new LoggingClient();
}
return clientObj;
}

public void clear(){
try{
    if(out != null){
    out.close(); //if we call close method it invokes flush and then closes the DataOutputStream.
    }

    if(client != null){
    client.close();
    }
}catch(Exception e){
    logger.log(Level.INFO,"Error while closing connection , reason {0}",e);
}finally{
    try{
    client.close();
    out.close();
    }catch(Exception e){

    }
    isConnected = false;
}
}

/**
 * Adding this message into a queue . Scheduled thread will get this logs and push into central logging server.
 * @param message
 */
public synchronized void write(byte[] message){
if(!isConnected){ //has connection.
    init();
}
messages.add(message); //adding message to this queue . Background thread will collect the log message and sent it to the central log server.
}

/**
 * Sending logs into central log server . If it's not reachable write into local machine.
 * @param message
 */
public void sendLog(byte[] message){
try {
    out.write(message);
    out.flush();
} catch (Exception e) {
    writeInLocalMachine(localLoggingPath, message); //in case of failure writing logs in local machine . Sync this logs when restart of eclipse.
}
}

/**
 * Writing log's into his machine this log will be synced on plugin startup.
 * @param file - File path.
 * @param message - Message  to log.
 */
public static void writeInLocalMachine(String file, byte[] message) {
FileOutputStream fileWriter = null;
File f = new File(file);
try {
    if(!f.exists()){
    f.createNewFile();
    }
    fileWriter = new FileOutputStream(file, true);
    fileWriter.write(message);
    fileWriter.flush();
} catch (Exception e) {
   logger.log(
        Level.WARNING,
        "This may be due to given file not found in system , reason {0}",
        e);
} finally {
    try{
    fileWriter.close();
    }catch(Exception e){

    }
}
}

/**
 * @return - Recently received message from queue . Returns null if it's empty.
 */
public byte[] getMessage(){
return messages.poll(); //returns the head element and deletes it.
} 
```

}

测试用于向服务器套接字发送消息的 java 类。

```
public class LogTest implements Runnable {

public static final String LINE_SEPARATOR = System.getProperty("line.separator");

@Override
public void run() {
while(true){
    try{
        LoggingClient client = LoggingClient.getInstance();
        byte[] message = client.getMessage();
        if(message != null){
            client.sendLog(message);
        }
    }catch(Exception e){

    }
}
}

public static void startSending(){
for(int i=0;i<10000;i++){
    String msg = "msg number" + i+LINE_SEPARATOR;
    LoggingClient.getInstance().write(msg.getBytes());
}
}

public static void main(String args[]){
    LoggingClient c = LoggingClient.getInstance();
    System.out.println("START TIME " + System.currentTimeMillis());
    Thread t = new Thread(new LogTest(),"LOG MESSAGER");
    t.start();
    startSending();
    System.out.println("END TIME " + System.currentTimeMillis());
} 
```

发送的消息将存储在一个文件中。

输出：

```
START TIME 1340815857896
END TIME 1340815858063 
```

完成将消息放入队列。无限 while 循环将负责将日志发送到服务器套接字。

内容存储在文件中为什么是0字节？. 如果我停止运行课程，我会收到发送的消息，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:01:29.220

您发布了太多代码，但是在这些情况下，您仅在流/程序关闭后才能看到数据，但 100 次中有 99 次是您的问题是在写入数据后您永远不会刷新数据

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T17:39:20.383

你试过用 TCP_NODELAY 调用 SetSockOption 吗？

*   [http://docs.oracle.com/javase/6/docs/api/java/net/SocketOptions.html](http://docs.oracle.com/javase/6/docs/api/java/net/SocketOptions.html)

*   [http://www.ibm.com/developerworks/linux/library/l-hisock/index.html](http://www.ibm.com/developerworks/linux/library/l-hisock/index.html)

*   [http://en.wikipedia.org/wiki/Nagle%27s_algorithm](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)

# css - 更少的 CSS - 访问类名的一部分并在 mixin 中使用

> ID：11231366
> 
> 赞同：0
> 
> 时间：2012-06-27T16:57:23.843
> 
> 标签：css, twitter-bootstrap, sass, less

在 Less 中，是否可以访问类名的一部分并在 mixin 中使用？

这最好用一个例子来解释：

我有一个网格，我声明如下：

```
.columns (@columns) {
    //code here to generate column widths
}

//This is where my problem is:
.column-1 {
    .col (1)
}
.column-2 {
    .col (2)
}
.column-3 {
    .col (3)
}
// etc etc 
```

显然这里有很多重复的代码。理想情况下，我希望能够不必声明 column-1 column-2 等，并且有某种方式（可能是正则表达式）来解析类名，并使用破折号后的值来自动计算列宽。我几乎可以肯定 twitter bootstrap 正在做类似的事情，但我无法理解：

```
.spanX (@index) when (@index > 0) {
      (~".span@{index}") { .span(@index); }
      .spanX(@index - 1);
    }
    .spanX (0) {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:17:41.690

I think you'll understand that :

```
.columnX (@index) when (@index > 0) {          // Guarded mixin: use this mixin when the condition is true (like an if statement)
    (~".column-@{index}") {                    // outputs .column-0 as a class name
        .col(@index);                          // for the contents, use the col mixin
    }    // which class you are doing

    .columnX(@index - 1);                      // Recursive call to the same mixin, going down by 1
}
.columnX (0) {} // Default implementation so that when .columnX(0) is called, a matching mixin is found.

.col (@index) {
    // actual css that will be applied to column-1 if @index is 1
    width: @index * 10px; // for example
}
.columnX(3);                                   // number of columns you want 
```

**Edit** (missed the `;` of `.columnX(3);` ) **Edit** Added more comments

All this should give the result :

```
.column-3 {
    width: 30px;
}
.column-2 {
    width: 20px;
}
.column-1 {
    width: 10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-12T02:44:50.210

这与@sherbrow 的答案基本相同，但更简洁一点并且不会出错。考虑这是一个很长的解释性评论来支持他的正确答案 - 它不仅仅是适合评论！

您将使用像这样的[LESS 循环](http://lesscss.org/features/#loops-feature)mixin 作为中间帮助程序，然后调用它指定要生成的类的数量。以下是如何操作`.column-1`、`.column-2`和`.column-3`。如果说您想要最多四列：只需执行`.columns(4)`而不是`.columns(3)`[第 9 行]。要最多五列，只需执行`.columns(5)`.

```
1    // we'll call this if we want to build columns
2    .columns(@i) when (@i > 0) {
3      .column-@{i} {
4        .col(@i)
5      }
6      .columns(@i - 1)
7    }
8    // for example, here we build columns 1-3
9    .columns(3); 
```

这将编译为

```
.column-1 {.col(1)}
.column-2 {.col(2)}
.column-3 {.col(3)} 
```

（您的问题假设已经有一个 mixin `.col(@x)`，所以我也假设了。有关如何跳过该额外步骤的信息，请参见**4。 ）**

这是正在发生的事情：

1.  整个第一个块 [第 1-7 行] 只是坐在那里直到被调用。
2.  `.columns(3)`[第 9 行] 将我们发送到`.columns(@i)`mixin [第 2 行]，为变量`@i`赋值`3`。
3.  因为`@i`(3) 大于 0 [第 2 行]，我们满足[守卫](http://lesscss.org/features/#mixin-guards-feature)并被允许通过`{`[第 2 行]。
4.  `.column-@{i} {...}`[第 3-5 行] 是这个 mixin 将输出的内容。
    *   `@i`是 3，所以输出将是`.column-3 {.col(3)}`
    *   该语法`@{i}`用于将变量的值作为字符串插入
    *   如果您不需要`.col(@x)`在其他任何地方使用，您也可以直接将样式放在这里，例如（a là @sherbrow）`.column-@{i} {width: @i * 10px}`
5.  *然后是循环*：编译第 3-5 行后，再次调用此 mixin，但使用不同的值 [第 6 行]：`.columns(@i - 1)`==> `.columns(3 - 1)`==> `.columns(2)`。
6.  回到顶部 [第 2 行]：，`@i`现在 2，大于零，所以我们被允许进入。输出`.column-2 {.col(2)}`（其中`.col(2)`立即编译，所以你编译的 CSS 实际上读取`.column-2 { the.col(2)styles }`）
7.  并继续输出和循环，直到`@i`不大于 0（即在 之后停止`.columns(1)`）。

# visual-studio-2010 - 是否有 VisualStudio 键盘快捷键来隐藏查找结果窗口？

> ID：11231369
> 
> 赞同：3
> 
> 时间：2012-06-27T16:57:39.930
> 
> 标签：visual-studio-2010

查找后，我必须使用鼠标隐藏查找结果窗口。

有键盘快捷键吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-25T06:13:53.180

Shift+Escape 适用于我关闭“查找结果”窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:58:24.703

我想出了如何隐藏查找或替换窗口。就是这样：

1.  停靠查找或替换结果窗口
2.  右键单击其标题栏，然后选择“自动隐藏”。

现在，无论何时查找或替换，它都会在停靠的位置弹出，并向您显示结果，当您按下 时，它会消失。

# java - java.lang.ClassCastException: android.widget.TextView

> ID：11231370
> 
> 赞同：0
> 
> 时间：2012-06-27T16:57:46.820
> 
> 标签：java, android, android-layout

我有这个布局 xml，名为 pagina.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_vertical" >

    <TextView
        android:id="@+id/descrizione"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/scelta1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="Button" />

    <Button
        android:id="@+id/scelta3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/scelta1"
        android:layout_alignLeft="@+id/scelta1"
        android:layout_marginBottom="16dp"
        android:text="Button" />

    <Button
        android:id="@+id/scelta2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/scelta3"
        android:layout_alignLeft="@+id/scelta3"
        android:layout_marginBottom="18dp"
        android:text="Button" />

</RelativeLayout> 
```

我想写元素的描述，但是当我将 textview 元素分配给变量时，模拟器崩溃了。这是代码：

```
public int posizione;
    public String stanza;
    public string[] azioni;
    public int[] vai;
    public XmlPullParser xpp;
    public EditText descr;
    public Button scelta_1, scelta_2, scelta_3;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.pagina);

        try {
            carica_stanza(posizione);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        descr = (EditText) this.findViewById(R.id.descrizione);
        scelta_1= (Button) this.findViewById(R.id.scelta1);
        scelta_2= (Button) this.findViewById(R.id.scelta2);
        scelta_3= (Button) this.findViewById(R.id.scelta3);

    } 
```

帮助我理解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:58:44.063

尝试

```
public TextView descr;
// ...
descr = (TextView) this.findViewById(R.id.descrizione); 
```

代替

```
public EditText descr;
// ...
descr = (EditText) this.findViewById(R.id.descrizione); 
```

您正在使用`TextView`xml 布局。但是您试图将此对象投射到`EditText`

你打算用什么？如果您希望此文本可编辑，您需要将您的组件更改为`EditText`xml 和您的类。

*   TextView - 只打印文本
*   EditText - 让您在程序中编辑文本

# c++ - 默认模板参数：为什么编译器抱怨没有指定模板参数？

> ID：11231372
> 
> 赞同：10
> 
> 时间：2012-06-27T16:57:48.317
> 
> 标签：c++, templates, default-parameters, template-argument-deduction

我有这个代码：

```
struct A{};

template<class T = A>
struct B {
    void foo() {}
};

B b; //Error: missing template arguments before 'b'
     //Error: expected ';' before 'b'
     //More errors
b.foo() 
```

如果我`foo()`使用相同的模板“签名”作为模板函数，编译器不会抱怨没有指定模板参数：

```
struct A {};

struct B {
    template<class T = A>
    void foo() {}
};

B b; //OK
b.foo() 
```

那么为什么我需要为具有默认参数的模板类指定参数，而不是为模板函数指定参数呢？我缺少一些微妙之处吗？

原因肯定是模板参数推导失败。但我想知道为什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T17:01:25.443

正确的语法是这样的（[演示](http://ideone.com/BBGF9)）：

```
B<> b; 
```

`A`为类模板假定默认参数`B`。该`<>`部分告诉编译器这`B`是一个类模板，并要求它采用默认参数作为模板参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:05:13.763

正如 Nawaz 已经提到的，正确的语法是：

```
B<> b; 
```

原因是它`B`是模板，并且`B<>`是带有默认参数的模板的实例化`A`。但是`<>`当您需要实例化时，您需要区分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:02:34.557

因为你不得不说那`B`是一个模板：

```
B<> b; 
```

即使您不想指定任何参数。

# visual-studio-2010 - VB循环和Excel

> ID：11231376
> 
> 赞同：0
> 
> 时间：2012-06-27T16:57:59.610
> 
> 标签：visual-studio-2010, excel, pdf

我正在用 vb 编写，并使用 excels 参数将 .xls 文档转换为 pdf。该过程运行良好，因为我使用的是字符串。我需要知道的是以某种方式遍历源文件夹，然后将该文件夹中的所有文件转换为 pdf 并放入保留原始文件名的导出文件夹中。循环是我在编程中存在的严重障碍，尽管我知道你需要它来为这个行业打下坚实的基础。

例子：

```
 Dim excelApplication As ApplicationClass = New ApplicationClass()
    Dim excelWorkbook As Workbook = Nothing
    Dim paramSourceBookPath As String = "C:\My_Projects\Testing\filename.xls"
    Dim paramExportFilePath As String = "C:\My_Projects\Testing\filename.pdf" 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T00:54:39.233

尝试这个：

```
 Dim dir As New IO.DirectoryInfo(path)
    Dim files As IO.FileInfo() = dir.GetFiles("*.xls")
    For Each file In files
        'Do Something
    Next 
```

# arrays - 当参数来自数组时，在参数中使用空格的 Bash 脚本 ls

> ID：11231378
> 
> 赞同：1
> 
> 时间：2012-06-27T16:58:00.953
> 
> 标签：arrays, bash

我有以下代码：

```
entries=("Wet\ Picnic" "Arizona\ Jones" "Bikeboy")
for arg in "${entries[@]}"; do ls -lh $arg.* ; done 
```

它给了我 4 个错误和 1 个成功。我真的很想给我 3 次成功。

我如何处理`ls`包含空格的参数这一事实（我显然已经尝试将它们转义为目前的情况），但无济于事。

控制台输出当前是。

```
ls: Wet: No such file or directory
ls: Picnic: No such file or directory
ls: Arizona: No such file or directory
ls: Jones: No such file or directory
-rw-r--r-- 1 root root 0 Jun 27 17:55 Bikeboy.png 
```

所以它显然在空间上分裂。虽然逃过了一劫。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T17:00:56.980

你在错误的地方逃跑。试试这个例子：

```
entries=("Wet Picnic" "Arizona Jones" "Bikeboy")
for arg in "${entries[@]}"; do ls -lh "$arg".* ; done 
```

它应该可以正常工作。这是一个完整的示例，包括您在评论中提到的“人民舞台”：

```
$ ls
Arizona Jones.png   People's Stage.png  example*
Bikeboy.png         Wet Picnic.png
$ cat example 
#!/bin/bash

entries=("Wet Picnic" "Arizona Jones" "Bikeboy" "People's Stage")
for arg in "${entries[@]}"; do ls -lh "$arg".* ; done
$ ./example 
-rw-r--r--  1 carl  staff     0B Jun 27 10:00 Wet Picnic.png
-rw-r--r--  1 carl  staff     0B Jun 27 10:00 Arizona Jones.png
-rw-r--r--  1 carl  staff     0B Jun 27 10:01 Bikeboy.png
-rw-r--r--  1 carl  staff     0B Jun 27 10:11 People's Stage.png 
```

# c# - System.Data.SQLite.SQLiteException：SQLite 错误没有这样的表错误

> ID：11231380
> 
> 赞同：0
> 
> 时间：2012-06-27T16:58:07.883
> 
> 标签：c#, sqlite, database-connection

我正在尝试对 VS 2010 中的解决方案运行一些单元测试，并尝试使用 SQLite 作为我的数据库。问题是我收到以下错误：

“测试方法 AECI.Clio.RecordableIncidentRate_Test.TestClass.QueryDataTest 抛出异常：System.Data.SQLite.SQLiteException：SQLite 错误没有这样的表：dbo.vDimIncident”

我已经使用我的 SQLBrowser 仔细检查了我的表是否在那里。我什至尝试将表的名称从 vDimIncident 更改为 dbo.vDimIncident 无济于事。

我不确定我做错了什么。这是我的错误跟踪：

```
System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
System.Data.SQLite.SQLiteCommand.BuildNextCommand()
System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
System.Data.SQLite.SQLiteDataReader.NextResult()
System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
System.Data.SQLite.SQLiteCommand.ExecuteDbDataReader(CommandBehavior behavior)
System.Data.Common.DbCommand.ExecuteReader()
System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
System.Data.Linq.DataQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
AECI.Clio.RecordableIncidentRate.Harvester.QueryData(HarvestTargetTimeRangeUTC ranges) in C:\tfsprod\AECI.Clio.RecordableIncidentRate\Harvester.cs: line 43
AECI.Clio.RecordableIncidentRate_Test.TestClass.HarvesterHandle.QueryDataTest(HarvestTargetTimeRangeUTC ranges) in C:\tfsprod\AECI.Clio.RecordableIncidentRate_Test\TestClass.cs: line 167
AECI.Clio.RecordableIncidentRate_Test.TestClass.QueryDataTest() in C:\tfsprod\AECI.Clio.RecordableIncidentRate_Test\TestClass.cs: line 54 
```

我不确定这是否与任何事情有关，但这是我的连接字符串：

```
public void ConfigureHarvester(System.Configuration.Configuration configuration)
{
    context = new DataClassesDataContext(new System.Data.SQLite.SQLiteConnection(@"Data Source= C:\tfsprod\C#SQLite\Community.CsharpSqlite.shell\bin\Debug\test.db"));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:30:18.237

我想到了。我必须转到 dbml 文件，然后转到数据类的属性并删除“dbo”。从我的表名前面。我不知道这是否是你正确的做法，但它有效。

# javascript - node.js https请求和XMLHttpRequest有什么区别？

> ID：11231392
> 
> 赞同：10
> 
> 时间：2012-06-27T16:58:41.913
> 
> 标签：javascript, node.js, xmlhttprequest

通过 node.js 模块和通过 XMLHttpRequest 发送的 HTTPS 请求有什么区别？

我正在尝试向亚马逊 aws 发送一个 HTTPS GET 请求以从 javascript (XMLHttpRequest) 获取安全令牌，但它总是失败并显示“ Access-Control-Allow-Origin 不允许来源[http://my_ip](http://my_ip) ”，但如果我通过 node.js 模块发送相同的 HTTPS GET 请求它工作正常。

我对此感到困惑，因为如果服务器确实支持 CORS，来自任何地方的任何请求都应该失败，但它通过 node.js，而不是通过 XMLHttpRequest。

**这失败了**

```
var url_ = "https://sts.amazonaws.com/?Action=GetSessionToken" +
            "&DurationSeconds=3600" +
            "&AWSAccessKeyId=XXXXXXXXXXXXXXX" +
            "&Version=2011-06-15" +
            "&Timestamp=" + encode(timestamp) +
            "&Signature=" + encode(hash) +
            "&SignatureVersion=2&SignatureMethod=HmacSHA256";

// Simple GET request
$.get(url_, function(data) {
    alert("response: " + data);
}); 
```

**这工作**

```
var https = require('https');
var options = {
    host    : 'sts.amazonaws.com',
    method  : 'GET',
    path    : '/?Action=GetSessionToken' +
              '&DurationSeconds=3600' +
              '&AWSAccessKeyId=XXXXXXXXXXXXXX' +
              '&Version=2011-06-15' +
              '&' + timestamp +
              '&' + signature +
              '&SignatureVersion=2&SignatureMethod=HmacSHA256'
};

https.get(options, function(res) {
    res.on('data', function(d) {
        process.stdout.write(d);
    });    
}).on('error', function(e) {
    console.error(e);
}); 
```

谁能解释我这是如何工作的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T16:59:52.687

浏览器受[Same Origin Policy](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)约束。Node.js 不是。

也就是说，浏览器只允许脚本通过 XHR 向与加载脚本的页面所在域相同的站点发出 HTTP 请求。然而，Node.js 将允许对任何域的 HTTP 请求。

（浏览器的故事现在更多地涉及 CORS，但这仍然是这里的基本问题。）

*编辑*-详细说明，既然我已经重新阅读了您的问题：CORS 是一种合作协议。通常，互联网上的服务器将向任何人提供内容；这就是运行 Web 服务器的全部意义所在。*除非请求者询问*，否则 CORS 与 HTTP 请求无关。如果您有 URL “http://xyz/something”，并且您在浏览器的地址栏中键入它，那么浏览器将毫不犹豫地向该站点发出 HTTP 请求。*仅当来自另一个域（不是“xyz”）站点的页面中的某些代码*尝试通过 XHR 运行 HTTP 请求时，同源策略（和 CORS）才会发挥作用。在这种情况下，浏览器会询问“xyz”站点的访问权限；默认答案是“否”，但那*强加该规则，而不是服务器。*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:27:50.923

就是环境的不同。您通常可以在任何地方自由发送任何 HTTP 请求（就像您现在通过向该站点发送请求一样）。

Node.js 代表您执行由您提供的程序，因此可能是受信任的。这就是为什么默认情况下没有限制的原因。如果您希望包含和运行不受信任的代码，您**可以添加任意限制 - 只需检查您最喜欢的搜索引擎以查找“Node.js 不受信任的代码”，以了解有关可用沙盒的一些想法。**

另一方面，浏览器几乎总是运行不受信任的代码，但代表用户并拥有他所有可能的权限。由于浏览器的环境必须标准化以使所有浏览器以相同的方式工作，因此作者之间商定了一组安全策略，并在他们的浏览器中实现了根据[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)和后来的[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)控制从 JavaScript 传出的 XHR 连接。**浏览器本身控制这些限制**，而不是 JavaScript 或远程服务器。如果您也选择另一种语言，您将受到环境施加的完全相同的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:03:10.073

node.js 是一种服务器端语言。不要被 .js 扩展名弄糊涂了。当您不熟悉它时，这总是会引起很多混乱。所以它很像 php 或 C++。您可以在任何地方发送任何请求。访问任何站点（因此是 https 请求）。但在浏览器 javascript 中，这是一种客户端语言。浏览器不允许您从另一台服务器访问页面。假设您在 host.com:80。您只能从 host.com:80/*not host2.com 甚至 something.host.com 访问数据

这不适用于 node.js*

# javascript - Highcharts 在某些缩放级别不显示数据

> ID：11231398
> 
> 赞同：6
> 
> 时间：2012-06-27T16:58:51.080
> 
> 标签：javascript, highcharts, data-visualization, highstock

我正在使用 Highcharts/Highstock 绘制大量数据（约 10,000 点）。数据由 X 轴上的 Date 对象和 Y 轴上的浮点数组成，格式如下：`[[(date), 1.728], [(date), 0.346], ...]`. 日期总是相隔 1 小时，并且数据中没有间隔。

当图表的范围 >= 21 天（这样至少绘制了 21 天的数据）时，图表会正确显示。但是，只要范围小于该范围，图表就会变为空白，并且工具提示将每个点显示为 Y 值为 0.0。这些点的 Y 值*确实*存在于数组中（我可以在 Firebug 中看到它们），但它们不会显示在图表上。这是我初始化它的方式：

```
mainChart = new Highcharts.StockChart({
  chart: {
    renderTo: 'linegraph'
  },

  rangeSelector: {
    buttons: [{
      type: 'day',
      count: 1,
      text: '1 d'
    }, {
      type: 'week',
      count: 1,
      text: '1 wk'
    }, {
      type: 'month',
      count: 1,
      text: '1 mo'
    }, {
      type: 'year',
      count: 1,
      text: '1 yr'
    }, {
      type: 'all',
      text: 'All'
    }],
    selected: 2
  },

  series: [{
    name: 'Electricity usage (kWh)',
    data: graphData,
    tooltip: {
      valueDecimals: 2,
      valueSuffix: "kWh"
    }
  }],
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:26:58.647

我有同样的问题，但在 X 轴上有时间戳，一切正常。

通过按升序对数据进行排序来解决它（首先以相反的顺序提供）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:16:22.900

事实证明，您不能在数据的 X 轴上使用日期。相反，请使用日期的 Unix 时间戳：`Date.getTime()`. FloppyDisk 的主要道具为我指明了正确的方向。

# javascript - Javascript 使用 $.extend 按值复制，但只有一个对象属性

> ID：11231399
> 
> 赞同：3
> 
> 时间：2012-06-27T16:59:10.377
> 
> 标签：javascript, jquery, inheritance, zepto

我正在尝试按值复制属性，以便不同的实例可以单独修改它。我的理解是，使用 jQuery 或 Zepto 的 $.extend 是“按值复制”的好方法。它不适用于我的情况，我想了解原因。我不能说我做错了什么。

```
var c = [ {'purple' : 1}, { 'red':2 } ]
var x = { 'name': 'my obj', 'colors': c }
var doWork = function(passX) {
  var inY = $.extend({},passX);
  inY.colors[0].selected = true;
  return inY;
}
var y = doWork(x);

console.log( x.colors[0].selected );// true, but I think it should be undefined
console.log( y.colors[0].selected );​// true 
```

我觉得我可能错过了一些真正重要的东西。我不能从同一个对象扩展来复制吗？函数参数范围有什么令人困惑的地方吗？

jsfiddle：http: [//jsfiddle.net/zfnyp/5/](http://jsfiddle.net/zfnyp/5/)

编辑：正如@Niko 指出的那样，我的困惑的答案是，深层复制会生成所有子属性的按值复制版本。我认为深拷贝与浅拷贝只是意味着拷贝的深度有多少。哎呀。

再次编辑：深层复制在 Javascript 中很麻烦。JQuery 有它，但 Zepto 和 Underscore 没有。有人将其描述为无法很好地实施。为了解决我的问题，我创建了这个依赖于了解对象结构的解决方案。我相信这对我来说是正确的答案，尽管它很笨拙。

```
var c = [ {'purple' : 1, 'selected':false }, { 'red':2 } ]
var x = { 'name': 'my obj', 'colors': c }
var doWork = function(passX) {
  var inY = $.extend({},passX);
  inY.colors = $.extend([], passX.colors);
  for (var i = 0; i < passX.colors.length; i++) {
    inY.colors[i] = $.extend({}, passX.colors[i]);
  }
  inY.colors[0].selected = true;
  return inY;
}
var y = doWork(x);

console.log( x.colors[0].selected );
console.log( y.colors[0].selected ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:04:24.457

`x = y`使 x 和 y 引用同一个对象，因此`y.colors`也会覆盖`x.colors`-`$.extend()`在这种情况下，这是非常无用的。

```
var x = { 'name': 'my obj', 'colors': c };
var y = $.extend(true, {}, x); // <-- first param "true" = make deep copy,
                               //     because otherwise "x.colors === y.colors" 
```

深拷贝是必需的，因为数组也是一个对象，因此在进行浅拷贝时通过引用进行拷贝。

或使用新代码：

```
var inY = $.extend(true, {}, passX); // deep copy = also copy mod.colors by value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:04:49.403

你想要这样的东西：

```
var c = [ {'purple' : 1}, { 'red':2 } ]
var x = { 'name': 'my obj', 'colors': c };
var y = { 'name': 'my obj', 'colors': c };

y.colors = $.extend([],x.colors);

x.colors[0].selected = true;

console.log( x.colors[0].selected ); // true
console.log( y.colors[0].selected ); // now it's an error because y.colors[0] is undefined 
```

## [演示](http://jsfiddle.net/9D6ra/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:04:54.917

造成这种情况的不是副本，而是`var x = y = {`. 您正在设置`y`为一个对象，然后设置`x`为`y`. 这导致`x`和`y`指向同一个对象。

您需要将对象设置为其中一个变量，然后将其复制到另一个。

```
var x = { 'name': 'my obj', 'colors': c };
var y = $.extend({}, x); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T17:07:54.067

不，那是因为变量`x`和`y`指向同一个对象。通过设置`y.colors`为新值，您将在访问`x.colors`. 那`$.extend([],x.colors)`就是原件的副本在`c`这里无所谓。

`x`但是，如果并且`y`是具有不同`colors`数组的不同对象，它甚至都行不通。使用

```
var purple = {purple: 1}, red = {red: 2};
var colors = [purple, red];
var copy = $.extend([], colors); 
```

then`copy[0]`仍然会`purple`像现在一样指向`colors[0]`。您可能想使用该[`deep`选项](http://api.jquery.com/jquery.extend/#jQuery-extend-deep-target-object1-objectN)：

```
var x = {name:'my obj', colors:[{purple: 1}, {red:2}]};
var y = $.extend(true, {}, x); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T17:23:37.973

该方法`$.extend`可以执行深拷贝。您所要做的就是在第一个位置添加一个新参数`true`——它标记了*深拷贝模式*——并将剩余的参数向右移动。

```
var o1 = {"a": "AA", "n": 11, "o": {"k0": "v0", "k1": "v1"}};
var oz = $.extend(true, {}, o1)
oz.o.k0 = 99;

dump(o1); // {a:"AA", n:99, o:{k0:"v0", k1:"v1"}}
dump(oz); // {a:"AA", n:99, o:{k0:99, k1:"v1"}} 
```

# ruby-on-rails - 使用 Omniauth gem 初始化后更改 Twitter 提供程序

> ID：11231400
> 
> 赞同：0
> 
> 时间：2012-06-27T16:59:12.343
> 
> 标签：ruby-on-rails, twitter, omniauth

我正在使用 Omniauth 在 Twitter 上进行身份验证，但我有 2 个应用程序注册了不同的名称，我想根据当前的语言环境（会话范围）使用它们。

所以我需要在用户调用 auth/twitter 之前更改在omniauth.rb 文件中定义的提供程序密钥和秘密（我想做一个 before_filter 但 auth/twitter 是到 twitter 的外部链接，而不是常规操作）或一种方式将 Omniauth 配置为按语言环境定义提供程序，而不是为整个应用程序范围定义。

那么我该怎么做呢？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-15T13:40:29.250

您需要做的是在omniauth builder中将setup设置为true

```
 Rails.application.config.middleware.use OmniAuth::Builder do
    provider :twitter , :setup => true
  end 
```

然后将以下内容添加到您的 routes.rb 文件中以定义将调用哪个路由进行设置

```
 get '/people/auth/twitter/setup' => 'sessions#twitter_setup' #needed for devise setup phase hook to work 
```

之后只需在满足设置路由的会话控制器中设置omniauth策略

```
def twitter_setup
  request.env['omniauth.strategy'].options[:consumer_key] = YOUR_DYNAMIC_KEY
    request.env['omniauth.strategy'].options[:consumer_secret] = YOUR_DYNAMIC_SECRET_KEY
    render :plain => "Setup complete.", :status => 404
end 
```

这将使您能够加载所需的应用程序

# firefox - CSS过渡动画在Chrome中不起作用

> ID：11231403
> 
> 赞同：0
> 
> 时间：2012-06-27T16:59:23.830
> 
> 标签：firefox, google-chrome, css, css-transitions

我正在练习网页设计，所以我正在研究 [这个模板](http://tutorialzine.com/2011/05/css3-animated-navigation-menu/) 我无法让过渡动画在 chrome 中工作，但它在 FF 中工作正常我正在使用过渡缓入出，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T23:22:28.093

确保将`-webkit-`前缀添加到转换属性。

# c# - Log4net 停止写入事件日志

> ID：11231405
> 
> 赞同：2
> 
> 时间：2012-06-27T16:59:31.543
> 
> 标签：c#, .net, log4net

我的应用程序使用 Log4net 写入事件查看器。这是我的程序 App.config 文件的 log4net 部分：

```
<log4net>
    <appender name="EventLogAppender" type="log4net.Appender.EventLogAppender" >
        <applicationName value="CarSystem" />
        <logName value="CarSystemLog" />
        <threshold value="DEBUG" />
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date [%thread] %-5level %logger [%ndc] - %message%newline" />
        </layout>
    </appender>
    <root>
        <level value="DEBUG" />
        <appender-ref ref="EventLogAppender" />
    </root>
</log4net> 
```

现在，这些设置工作正常，直到前天下午 12:30 左右。突然，（当然，就在我需要查看日志中的消息时）它停止写入日志文件。

自定义事件日志位于查看器中。我今天重新启动了机器，但日志中仍然没有任何新内容。我将最大日志大小增加到 10880 KB。

为什么 log4net 不再写入我的日志文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T17:17:33.207

Rather than looking for a solution, better find the cause.

I suggest you enable log4net's internal debug logging to **file** (any file) and it will dump it's troubles there. I've used this many times when my log files (should be same thing for Event Log) didn't show up.

Instructions on how to configure it [here](http://logging.apache.org/log4net/release/faq.html#internalDebug).

Quick steps:

*   Add this to your app.config:

```
 <?xml version="1.0" encoding="utf-8" ?>
 <configuration>
     <appSettings>
         <add key="log4net.Internal.Debug" value="true"/>
     </appSettings>
 </configuration> 
```

*   Add this too to the config (`configuration` section).

```
 <system.diagnostics>
    <trace autoflush="true">
        <listeners>
              <add 
              name="textWriterTraceListener" 
              type="System.Diagnostics.TextWriterTraceListener" 
              initializeData="C:\tmp\log4net.txt" />
        </listeners>
    </trace>
 </system.diagnostics> 
```

Any issues with permissions or whatever will then be logged to the trace file.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T20:52:43.897

我回到 Log4Net 文档并注意到以下声明：

> 必须在应用程序启动期间尽早进行日志调用，当然在加载和调用任何外部程序集之前。

好吧，我在 AssemblyInfo.cs 中有 XmlConfiguration 属性并`LogManager.GetLogger`在代码中调用了对，但它是在调用启动监视对象之后，我已添加到我的 WPF 应用程序`App`对象的构造函数中。当我阅读此语句并查看代码时，我意识到添加此调用后日志记录停止了。

因此，我将调用移至构造函数`LogManager.GetLogger`中的第一个语句，`App`然后再次开始记录。哈利路亚！

感谢您的帮助和建议。

# python - Python 中的性能问题：os.walk() + filecmp.dircmp().report_full_closure()

> ID：11231408
> 
> 赞同：2
> 
> 时间：2012-06-27T16:59:33.907
> 
> 标签：python

我目前需要在增量数据迁移发生后比较目录。我编写了一个 python 脚本来遍历源/目标列表，执行从源到目标的增量复制，然后立即比较每个目录中的文件和文件夹的数量。为了进行这种比较，我们非常简单地使用：

> 对于 os.walk(destd) 中的（路径、目录、文件）：
> 
> destFileCount += len(文件)
> 
> destDirCount += len(dirs)

如果返回的文件/目录的数量不同，我们调用另一段代码来查看到底有什么不同。为此，我们运行以下命令并将输出发送到文件：

> filecmp.dircmp（来源，destd）.report_full_closure（）

我们使用 report_full_closure 部分，因为我不知道进行递归比较的另一种方法。然后脚本在结果文件中搜索以“only in”开头的行并将它们打印到屏幕上，有效地向我们展示了差异。

无论多么低效，这对于包含大约 90,000 个文件的目录来说就像一个魅力，但是一旦我们达到这个上限，脚本就会变得迟钝，以至于无法将其用于此目的。我想我的问题可以分为以下几点：

1.  我在使用这两个模块 [os.walk + filecmp.dircmp().report_full_closure()] 时是否犯了逻辑错误？即，我真的可以跳过 filecmp 节省时间，还是应该只执行 filecmp 并完全跳过文件/目录计数？

2.  有没有办法通过“缓存”一个文件以在另一个中使用来组合这两个功能？

3.  有没有更快的方法来执行这些功能中的任何一个？我已经搜索了高低，所以我猜没有。

我非常感谢您对此事的看法。这个脚本已经变形和增长了很多，所以如果答案非常明显，请原谅我......谢谢你，M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:11:51.303

我会做这样的事情：

```
dir_diff = filecmp.dircmp(sourced, destd)
if dir_diff.left_only or dir_diff.right_only:
    dir_diff.report_full_closure() 
```

编辑：这是一个[关于 filecmp 模块的不错的博客](http://bip.weizmann.ac.il/course/python/PyMOTW/PyMOTW/docs/filecmp/index.html)。

dircmp 返回的差异不准确的原因可能有两个： 1\. 它使用 os.stat 来比较文件（浅比较），这在大多数情况下都很好，但您的要求可能会有所不同。2\. 有趣的文件 - 将文件重命名为目录等显示在 common 下。因此，您还需要考虑 dir_diff.common_funny。这是修改后的代码：

```
dir_diff = filecmp.dircmp(sourced, destd)
if dir_diff.left_only or dir_diff.right_only or dir_diff.common_funny:
    dir_diff.report_full_closure() 
```

# powershell - 我可以在 PowerShell“字符串”中使用单引号吗？

> ID：11231410
> 
> 赞同：56
> 
> 时间：2012-06-27T16:59:47.933
> 
> 标签：powershell, escaping

我想在我的字符串中包含一个撇号。是否可以不使用双引号？

```
'This is a quote. Can`'t I just include a single quote in it?'
'This is another quote that doesn\'t work' 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-06-27T17:04:56.887

```
'Escape a single quote '' using a double single quote' 
```

请参阅[引用规则](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_quoting_rules)的帮助。

您可以通过键入以下命令在 powershell 命令行中查看帮助：

```
Get-Help about_Quoting_Rules 
```

它解释了反引号在单引号字符串中按字面意思解释。

> 因为单引号字符串的内容是按字面解释的，所以不能使用反引号字符来强制在单引号字符串中进行字面字符解释。

# recursion - 方案：我们如何用 lambda 编写递归过程？

> ID：11231416
> 
> 赞同：1
> 
> 时间：2012-06-27T16:59:58.493
> 
> 标签：recursion, lambda, scheme, sicp

我正在阅读 Brain harvey 的计算机编程结构和解释。我遇到了这个问题，我不知道该怎么做。

我们如何在 Scheme 中使用 lambda 编写递归过程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T17:08:47.450

TL;DR：使用命名`let`（如果您正在立即执行递归函数）或`rec`（如果您正在保存递归函数以供以后执行）。

* * *

通常的方法是 with ，或者在幕后`letrec`使用 a 的东西，比如 named或。这是using的一个版本：`letrec``let``rec``(factorial 10)``letrec`

```
(letrec ((factorial (lambda (x)
                      (if (< x 1) 1
                          (* (factorial (- x 1)) x)))))
  (factorial 10)) 
```

和使用命名相同的东西`let`：

```
(let factorial ((x 10))
  (if (< x 1) 1
      (* (factorial (- x 1)) x))) 
```

这里的关键理解是两个版本*完全相同*。命名`let`只是扩展为`letrec`表单的宏。因此，由于命名`let`版本更短，这通常是编写递归函数的首选方式。

* * *

现在，您可能会问，如果您想直接返回递归函数对象，而不是执行它怎么办？在那里，您也可以使用`letrec`：

```
(letrec ((factorial (lambda (x)
                      (if (< x 1) 1
                          (* (factorial (- x 1)) x)))))
  factorial) 
```

这里也有一个简写，虽然没有使用 named `let`，而是使用[`rec`](http://srfi.schemers.org/srfi-31/srfi-31.html)：

```
(rec (factorial x)
  (if (< x 1) 1
      (* (factorial (- x 1)) x))) 
```

在这里使用的`rec`好处是您可以将函数对象分配给一个变量并稍后执行它。

```
(define my-fact (rec (factorial x)
                  (if (< x 1) 1
                      (* (factorial (- x 1)) x))))
(my-fact 10)  ; => 3628800 
```

* * *

创建递归函数的更理论和“纯粹”的方法是使用[Y 组合](http://en.wikipedia.org/wiki/Fixed-point_combinator)器。:-) 但是大多数实用的 Scheme 程序都没有使用这种方法，所以我不会进一步讨论它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T10:30:07.433

不需要写两次阶乘体；）

```
(((lambda (f)
   (lambda (x)
     (f f x)))
 (lambda (fact x)
   (if (= x 0) 1 (* x (fact fact (- x 1)))))) 5) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T17:48:34.897

这是一个递归函数，它使用 lambda 计算 5 的阶乘

```
((lambda (f x)
  (if (= x 0)
      1
      (* x (f f (- x 1)))))
 (lambda (f x)
  (if (= x 0)
      1
      (* x (f f (- x 1)))))
 5) 
```

当你在 Drracket 中运行这个程序时，你会得到 120 :)

# regex - notepad++ 中的正则表达式来修剪数据/重复项

> ID：11231418
> 
> 赞同：2
> 
> 时间：2012-06-27T17:00:06.930
> 
> 标签：regex, notepad++

假设一个文本文件有大约 40k 行

```
Color LaserJet 8500, Color Laserjet 8550, Color Laserjet 8500N, Color Laserjet 8500DN, Color Laserjet 8500GN, Color Laserjet 8550N, Color Laserjet 8550DN, Color Laserjet 8550GN, Color Laserjet 8550 MFP, 
```

举个例子

any1 能够帮助我使用一个可以在数字之后但在逗号之前修剪掉所有数据的正则表达式？这样8500N就变成了8500

最终结果将是

```
Color Laserjet 8500, Color Laserjet 8550, Color Laserjet 8500, Color Laserjet 8500, Color Laserjet 8500, Color Laserjet 8550, Color Laserjet 8550, Color Laserjet 8550, Color Laserjet 8550, 
```

任何人都可以以某种方式建议在记事本++（或其他易于使用的程序）中删除重复项的最佳方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:17:41.627

You should replace each match of `(?<=\d)[^\d,]+(?=,)` with empty string.

The above regex reads: *"Any one or more non-digit and non-comma character(s) between digit and comma"*.

In case you may experience such number with trailing letter(s) at then end of string (or line) and you want that trim as well, even there is no comma behind, then use `(?<=\d)[^\d,]+(?:(?=,)|$)`

That reads similar, it just adds *"or end of string"* behind the first meaning.

* * *

***Update:***

Because it seems that Notepad++ does not support regex lookaround, then the solution is to replace `(\d)([^\d,]+)(,)` with `\1\3` or `(\d)[^\d,]+(,)` with `\1\2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:03:51.483

这个怎么样：

```
(.*?\d+)\D*(,) 
```

它将匹配整个事物，但您可以抓住第 1 组和第 2 组。这将忽略数字和逗号之间的非数字。

替换将是：

```
\1\2 
```

[这是一个 SO，详细说明这是执行此操作的唯一方法。](https://stackoverflow.com/questions/277547/regular-expression-to-skip-character-in-capture-group)

或者，正如 Arithmomaniac 建议的那样，您可以使用一组来执行此操作，在每场比赛后添加逗号

```
(.*?\d+)\D*, 
```

替换将是

```
\1, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:26:26.183

notepad++中正则表达式的截图... ![记事本++截图](../Images/e061eea67d6444ac0f193ddddab13b8f.png)

# iphone - 如何以编程方式将 UITableView 放置在 UIViewController 上，使其不占用整个视图？

> ID：11231423
> 
> 赞同：0
> 
> 时间：2012-06-27T17:00:30.397
> 
> 标签：iphone, objective-c, uitableview, uiviewcontroller

我想要一个 ViewController，它在屏幕的上半部分有一个表格视图，下面有一个按钮。我假设有一种简单的方法可以做到这一点。到目前为止，我尝试过的每一种方式都以无法访问的视图的下半部分结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:13:17.727

诀窍是你不能使用`UITableViewController`. `datasource`您需要`delegate`在`UIViewController`.

```
@interface MyController : UIViewController <UITableViewDatasource, UITableViewDelegate>
// variables and properties
@end 
```

不要忘记分配你`self`的`delegate`表格`datasource`视图。

现在，您可以通过给它一个适当的位置将表格视图放在任何地方，`frame`您也可以在底部放置一个按钮。

提示：“将按钮放在底部”的标准方法是使用`UIToolBar`. 这样您就可以使用普通的表格视图控制器而不必担心协议。但是你的方法也是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:07:52.167

好吧，您可以放一个示例图像来获得清晰的想法。但 AFAI 明白，我尝试相应地给出答案：

您可以将框架特别是 TableView 的高度设置为 UIViewController 高度的一半。

然后在 UIViewCobtroller 的其余空间中，您可以创建另一个视图，您可以在其中放置按钮，就像您到目前为止所做的那样。

> 您可以在 UITableView 的页脚部分添加按钮。

# ios - 更新为 ARC 错误

> ID：11231431
> 
> 赞同：3
> 
> 时间：2012-06-27T17:00:54.743
> 
> 标签：ios, cocos2d-iphone, automatic-ref-counting

我正在尝试将项目更新为 ARC。虽然我看过一些关于更新到 ARC 的帖子，但我见过的帖子都没有处理这个特定问题。我有多个错误，大多数人说：

```
ARC Issue
Pointer to non-const type 'id' with no explicit ownership 
```

指着线

```
CCARRAY_FOREACH(children_, item) 
```

在 CCMenu.m 类中。请帮忙。

**更新：**

重新启动 Xcode 后，不再发现上述问题

```
CCARRAY_FOREACH(children_, item) 
```

但在我评论为的行中的 ccCArray.h 类中找到

```
// Arc Issue 
```

其他几个错误已经浮出水面。警告标志：

```
Arc Issue
Destination for this '_builtin__memmove_chk' call is a pointer to ownership-qualified-type 'autoreleasing-id' 
```

出现在代码中调用 memmove 的任何地方。

另一个错误：

```
ARC Casting Rules
Implicit conversion of C pointer type 'void *' to Objective-C pointer type 'id' requires a bridged cast 
```

出现在我评论过的行中：

```
//ARC Casting Rules 
```

ccCArray.h：

```
#ifndef CC_ARRAY_H
#define CC_ARRAY_H

#import <Foundation/Foundation.h>

#import <stdlib.h>
#import <string.h>

#pragma mark -
#pragma mark ccArray for Objects

// Easy integration 
#define CCARRAYDATA_FOREACH(__array__, __object__)                                                          \
__object__=__array__->arr[0]; for(NSUInteger i=0, num=__array__->num; i<num; i++,   __object__=__array__->arr[i])   \

typedef struct ccArray {
NSUInteger num, max;
id *arr;   // Arc Issue
} ccArray;

/** Allocates and initializes a new array with specified capacity */
static inline ccArray* ccArrayNew(NSUInteger capacity) {
if (capacity == 0)
    capacity = 1; 

ccArray *arr = (ccArray*)malloc( sizeof(ccArray) );    // Arc Issue
arr->num = 0;
arr->arr =  (id*) malloc( capacity * sizeof(id) );
arr->max = capacity;

return arr;
}

static inline void ccArrayRemoveAllObjects(ccArray *arr);

/** Frees array after removing all remaining objects. Silently ignores nil arr. */
static inline void ccArrayFree(ccArray *arr)
{
if( arr == nil ) return;

ccArrayRemoveAllObjects(arr);

free(arr->arr);
free(arr);
}

/** Doubles array capacity */
static inline void ccArrayDoubleCapacity(ccArray *arr)
{
arr->max *= 2;
id *newArr = (id *)realloc( arr->arr, arr->max * sizeof(id) );    // Arc Issue
// will fail when there's not enough memory
NSCAssert(newArr != NULL, @"ccArrayDoubleCapacity failed. Not enough memory");
arr->arr = newArr;
}

/** Increases array capacity such that max >= num + extra. */
static inline void ccArrayEnsureExtraCapacity(ccArray *arr, NSUInteger extra)
{
while (arr->max < arr->num + extra)
    ccArrayDoubleCapacity(arr);
}

/** shrinks the array so the memory footprint corresponds with the number of items */
static inline void ccArrayShrink(ccArray *arr)
{
    NSUInteger newSize;

 //only resize when necessary
if (arr->max > arr->num && !(arr->num==0 && arr->max==1))
{
    if (arr->num!=0) 
    {
        newSize=arr->num;
        arr->max=arr->num; 
    }
    else 
    {//minimum capacity of 1, with 0 elements the array would be free'd by realloc
        newSize=1;
        arr->max=1;
    }

    arr->arr = (id*) realloc(arr->arr,newSize * sizeof(id) );   // Arc Issue
    NSCAssert(arr->arr!=NULL,@"could not reallocate the memory");
}
} 

/** Returns index of first occurence of object, NSNotFound if object not found. */
static inline NSUInteger ccArrayGetIndexOfObject(ccArray *arr, id object)
{
for( NSUInteger i = 0; i < arr->num; i++)
    if( arr->arr[i] == object ) return i;

return NSNotFound;
}

/** Returns a Boolean value that indicates whether object is present in array. */
static inline BOOL ccArrayContainsObject(ccArray *arr, id object)
{
return ccArrayGetIndexOfObject(arr, object) != NSNotFound;
}

/** Appends an object. Bahaviour undefined if array doesn't have enough capacity. */
static inline void ccArrayAppendObject(ccArray *arr, id object)
{
arr->arr[arr->num] = [object retain];
arr->num++;
}

/** Appends an object. Capacity of arr is increased if needed. */
static inline void ccArrayAppendObjectWithResize(ccArray *arr, id object)
{
ccArrayEnsureExtraCapacity(arr, 1);
ccArrayAppendObject(arr, object);
}

/** Appends objects from plusArr to arr. Behaviour undefined if arr doesn't have
enough capacity. */
static inline void ccArrayAppendArray(ccArray *arr, ccArray *plusArr)
{
for( NSUInteger i = 0; i < plusArr->num; i++)
    ccArrayAppendObject(arr, plusArr->arr[i]);
}

/** Appends objects from plusArr to arr. Capacity of arr is increased if needed. */
static inline void ccArrayAppendArrayWithResize(ccArray *arr, ccArray *plusArr)
{
ccArrayEnsureExtraCapacity(arr, plusArr->num);
ccArrayAppendArray(arr, plusArr);
}

/** Inserts an object at index */
static inline void ccArrayInsertObjectAtIndex(ccArray *arr, id object, NSUInteger index)
{
NSCAssert(index<=arr->num, @"Invalid index. Out of bounds");

ccArrayEnsureExtraCapacity(arr, 1);

NSUInteger remaining = arr->num - index;
if( remaining > 0)
    memmove(&arr->arr[index+1], &arr->arr[index], sizeof(id) * remaining );

arr->arr[index] = [object retain];
arr->num++;
}

/** Swaps two objects */
static inline void ccArraySwapObjectsAtIndexes(ccArray *arr, NSUInteger index1, NSUInteger index2)
{
NSCAssert(index1 < arr->num, @"(1) Invalid index. Out of bounds");
NSCAssert(index2 < arr->num, @"(2) Invalid index. Out of bounds");

id object1 = arr->arr[index1];

arr->arr[index1] = arr->arr[index2];
arr->arr[index2] = object1;
}

/** Removes all objects from arr */
static inline void ccArrayRemoveAllObjects(ccArray *arr)
{
while( arr->num > 0 )
    [arr->arr[--arr->num] release]; 
}

/** Removes object at specified index and pushes back all subsequent objects.
Behaviour undefined if index outside [0, num-1]. */
static inline void ccArrayRemoveObjectAtIndex(ccArray *arr, NSUInteger index)
{
[arr->arr[index] release];
arr->num--;

NSUInteger remaining = arr->num - index;
if(remaining>0)
    memmove(&arr->arr[index], &arr->arr[index+1], remaining * sizeof(id));
}

/** Removes object at specified index and fills the gap with the last object,
thereby avoiding the need to push back subsequent objects.
Behaviour undefined if index outside [0, num-1]. */
static inline void ccArrayFastRemoveObjectAtIndex(ccArray *arr, NSUInteger index)
{
[arr->arr[index] release];
NSUInteger last = --arr->num;
arr->arr[index] = arr->arr[last];
}

static inline void ccArrayFastRemoveObject(ccArray *arr, id object)
{
NSUInteger index = ccArrayGetIndexOfObject(arr, object);
if (index != NSNotFound)
    ccArrayFastRemoveObjectAtIndex(arr, index);
}

/** Searches for the first occurance of object and removes it. If object is not
found the function has no effect. */
static inline void ccArrayRemoveObject(ccArray *arr, id object)
{
NSUInteger index = ccArrayGetIndexOfObject(arr, object);
if (index != NSNotFound)
    ccArrayRemoveObjectAtIndex(arr, index);
}

/** Removes from arr all objects in minusArr. For each object in minusArr, the
first matching instance in arr will be removed. */
static inline void ccArrayRemoveArray(ccArray *arr, ccArray *minusArr)
{
for( NSUInteger i = 0; i < minusArr->num; i++)
    ccArrayRemoveObject(arr, minusArr->arr[i]);
}

/** Removes from arr all objects in minusArr. For each object in minusArr, all
matching instances in arr will be removed. */
static inline void ccArrayFullRemoveArray(ccArray *arr, ccArray *minusArr)
{
NSUInteger back = 0;

for( NSUInteger i = 0; i < arr->num; i++) {
    if( ccArrayContainsObject(minusArr, arr->arr[i]) ) {
        [arr->arr[i] release];
        back++;
    } else
        arr->arr[i - back] = arr->arr[i];
}

arr->num -= back;
}

/** Sends to each object in arr the message identified by given selector. */
static inline void ccArrayMakeObjectsPerformSelector(ccArray *arr, SEL sel)
{
for( NSUInteger i = 0; i < arr->num; i++)
    [arr->arr[i] performSelector:sel];
}

static inline void ccArrayMakeObjectsPerformSelectorWithObject(ccArray *arr, SEL sel, id object)
{
for( NSUInteger i = 0; i < arr->num; i++)
    [arr->arr[i] performSelector:sel withObject:object];
}

#pragma mark -
#pragma mark ccCArray for Values (c structures)

typedef ccArray ccCArray;

static inline void ccCArrayRemoveAllValues(ccCArray *arr);

/** Allocates and initializes a new C array with specified capacity */
static inline ccCArray* ccCArrayNew(NSUInteger capacity) {
if (capacity == 0)
    capacity = 1; 

ccCArray *arr = (ccCArray*)malloc( sizeof(ccCArray) );   
arr->num = 0;
arr->arr =  (id*) malloc( capacity * sizeof(id) );    // Arc Issue
arr->max = capacity;

return arr;
}

/** Frees C array after removing all remaining values. Silently ignores nil arr. */
static inline void ccCArrayFree(ccCArray *arr)
{
if( arr == nil ) return;

ccCArrayRemoveAllValues(arr);

free(arr->arr);
free(arr);
}

/** Doubles C array capacity */
static inline void ccCArrayDoubleCapacity(ccCArray *arr)
{
ccArrayDoubleCapacity(arr);
}

/** Increases array capacity such that max >= num + extra. */
static inline void ccCArrayEnsureExtraCapacity(ccCArray *arr, NSUInteger extra)
{
ccArrayEnsureExtraCapacity(arr,extra);
}

/** Returns index of first occurence of value, NSNotFound if value not found. */
static inline NSUInteger ccCArrayGetIndexOfValue(ccCArray *arr, void* value)
{
for( NSUInteger i = 0; i < arr->num; i++)
    if( arr->arr[i] == value ) return i;
return NSNotFound;
}

/** Returns a Boolean value that indicates whether value is present in the C array. */
static inline BOOL ccCArrayContainsValue(ccCArray *arr, void* value)
{
return ccCArrayGetIndexOfValue(arr, value) != NSNotFound;
}

/** Inserts a value at a certain position. Behaviour undefined if aray doesn't have enough capacity */
static inline void ccCArrayInsertValueAtIndex( ccCArray *arr, void *value, NSUInteger index)
{
NSCAssert( index < arr->max, @"ccCArrayInsertValueAtIndex: invalid index");

NSUInteger remaining = arr->num - index;

// last Value doesn't need to be moved
if( remaining > 0) {
    // tex coordinates
    memmove( &arr->arr[index+1],&arr->arr[index], sizeof(void*) * remaining );
}

arr->num++; 
arr->arr[index] = (id) value;
}

/** Appends an value. Bahaviour undefined if array doesn't have enough capacity. */
static inline void ccCArrayAppendValue(ccCArray *arr, void* value)
{
arr->arr[arr->num] = (id) value;
arr->num++;
}

/** Appends an value. Capacity of arr is increased if needed. */
static inline void ccCArrayAppendValueWithResize(ccCArray *arr, void* value)
{
ccCArrayEnsureExtraCapacity(arr, 1);
ccCArrayAppendValue(arr, value);
}

/** Appends values from plusArr to arr. Behaviour undefined if arr doesn't have
enough capacity. */
static inline void ccCArrayAppendArray(ccCArray *arr, ccCArray *plusArr)
{
for( NSUInteger i = 0; i < plusArr->num; i++)
    ccCArrayAppendValue(arr, plusArr->arr[i]);   //ARC Casting Rules
}

/** Appends values from plusArr to arr. Capacity of arr is increased if needed. */
static inline void ccCArrayAppendArrayWithResize(ccCArray *arr, ccCArray *plusArr)
{
ccCArrayEnsureExtraCapacity(arr, plusArr->num);
ccCArrayAppendArray(arr, plusArr);
}

/** Removes all values from arr */
static inline void ccCArrayRemoveAllValues(ccCArray *arr)
{
arr->num = 0;
}

/** Removes value at specified index and pushes back all subsequent values.
Behaviour undefined if index outside [0, num-1].
@since v0.99.4
*/
static inline void ccCArrayRemoveValueAtIndex(ccCArray *arr, NSUInteger index)
{   
for( NSUInteger last = --arr->num; index < last; index++)
    arr->arr[index] = arr->arr[index + 1];
}

/** Removes value at specified index and fills the gap with the last value,
 thereby avoiding the need to push back subsequent values.
 Behaviour undefined if index outside [0, num-1].
 @since v0.99.4
 */
static inline void ccCArrayFastRemoveValueAtIndex(ccCArray *arr, NSUInteger index)
{
NSUInteger last = --arr->num;
arr->arr[index] = arr->arr[last];
}

/** Searches for the first occurance of value and removes it. If value is not found the function has no effect.
 @since v0.99.4
 */
static inline void ccCArrayRemoveValue(ccCArray *arr, void* value)
{
NSUInteger index = ccCArrayGetIndexOfValue(arr, value);
if (index != NSNotFound)
    ccCArrayRemoveValueAtIndex(arr, index);
}

/** Removes from arr all values in minusArr. For each Value in minusArr, the first matching instance in arr will be removed.
 @since v0.99.4
 */
static inline void ccCArrayRemoveArray(ccCArray *arr, ccCArray *minusArr)
{
for( NSUInteger i = 0; i < minusArr->num; i++)
    ccCArrayRemoveValue(arr, minusArr->arr[i]);  //ARC Casting Rules
}

/** Removes from arr all values in minusArr. For each value in minusArr, all matching instances in arr will be removed.
 @since v0.99.4
 */
static inline void ccCArrayFullRemoveArray(ccCArray *arr, ccCArray *minusArr)
{
NSUInteger back = 0;

for( NSUInteger i = 0; i < arr->num; i++) {
    if( ccCArrayContainsValue(minusArr, arr->arr[i]) ) //ARC Casting Rules {
        back++;
    } else
        arr->arr[i - back] = arr->arr[i];
}

arr->num -= back;
}
#endif // CC_ARRAY_H 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:24:18.420

看起来您正在使用与 ARC 不兼容的 cocos2d 版本，因为 ccArray 代码缺少 ARC 修复和添加。[升级到 cocos2d 1.1 或更新版本](http://www.learn-cocos2d.com/2011/05/update-cocos2d-iphone-existing-project/)。Cocos2d 1.0.1 可能也可以，但我认为该版本仍然存在一些 ARC 问题。

或者[从一个新的、支持 ARC 的 cocos2d 项目开始](http://www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/)，然后重新添加你的代码和资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:53:53.203

轻松修复：

完全摆脱这种“使用原始 C 数组存储对象”的方法，并删除包含宏的整个文件。

将其替换为正确使用 Foundation 框架中的（可变）容器，然后继续。

# jquery - Jquery UI Accordion菜单即使在刷新后也保存菜单状态

> ID：11231436
> 
> 赞同：3
> 
> 时间：2012-06-27T17:01:11.240
> 
> 标签：jquery, jquery-ui

我有 jquery UI Accordion 菜单。单击显示特定的 div 元素。我想知道当例如 div3 处于活动状态（可见）时是否刷新页面，重新加载页面后如何使 div3 再次处于活动状态？我正在尝试用 cookie 解决这个问题，但没有运气。有没有人知道的演示？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T18:46:30.977

这是首先保存所选手风琴状态然后在页面重新加载甚至下次访问时激活该状态的代码，只要 cookie 仍然存在。

```
 jQuery(document).ready(function(){
            var act = 0;
            $( "#accordion" ).accordion({
                create: function(event, ui) {
                    //get index in cookie on accordion create event
                    if($.cookie('saved_index') != null){
                       act =  parseInt($.cookie('saved_index'));
                    }
                },
                change: function(event, ui) {
                    //set cookie for current index on change event
                    $.cookie('saved_index', null);
                    $.cookie('saved_index', ui.options.active);
                },
                active:parseInt($.cookie('saved_index'))
            });
        }); 
```

我使用了 jquery cookie 插件，你可以从这里下载它 https://github.com/carhartl/jquery-cookie/

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T19:48:46.953

使用新的 1.10.1 用户界面

```
$(function () {
    var icons = {
        header: "ui-icon-triangle-1-e",
        activeHeader: "ui-icon-triangle-1-s",
        headerSelected: "ui-icon-triangle-1-s"
    };
    var act = 0;
    $( "#accordion" ).accordion({
        icons: icons,
        collapsible: true,
        clearStyle: true,
        heightStyle: "content",
        autoHeight: false,
        create: function(event, ui) {
            //get index in cookie on accordion create event
            if($.cookie('saved_index') != null){
               act =  parseInt($.cookie('saved_index'));
            }
        },
        activate: function(event, ui) {
            //set cookie for current index on change event
            var active = jQuery("#accordion").accordion('option', 'active');
            $.cookie('saved_index', null);
            $.cookie('saved_index', active);
        },
        active:parseInt($.cookie('saved_index'))
    });
    $( "#toggle" ).button().toggle(function() {
        $( "#accordion" ).accordion( "option", "icons", false );
    },
    function() {
        $( "#accordion" ).accordion( "option", "icons", icons );
    });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-26T10:36:02.210

我不想使用 cookie 或会话变量。我选择了 HTML5 的本地存储。

这是我的解决方案：

```
$("#accordion").accordion({    
    //set localStorage for current index on activate event
    activate: function(event, ui) {        
        localStorage.setItem("accIndex", $(this).accordion("option", "active"));
    },
    active: parseInt(localStorage.getItem("accIndex"))    
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T08:03:16.243

只是对上述解决方案的一个小改进，以管理关闭所有条目的手风琴（活动：假）：

```
$(function () {
    var myact = false;
    $( "#myaccordion" ).accordion({
        clearStyle: true,
        collapsible: true,      // allow to close completely
        create: function (event, ui) {
            //get index in cookie on accordion create event
            if (($.cookie('saved_index') != null) && ($.cookie('saved_index') != 'false')) {
                myact = parseInt($.cookie('saved_index'));
            }
        },
        change: function (event, ui) {
            //set cookie for current index on change event
            myact = ui.options.active;
            $.cookie('saved_index', null, { expires: 2, path: '/' });   // session cookie
            $.cookie('saved_index', myact, { expires: 2, path: '/' });
        },
        active: ($.cookie('saved_index') == null) ? 0 : ($.cookie('saved_index') == 'false') ? false : parseInt($.cookie('saved_index'))
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T14:11:59.060

选择的解决方案对我不起作用（jQuery 1.8.2、jQuery-UI 1.9.1）。

我将其修改为以下代码段：

```
jQuery(document).ready(function(){
    $( "#accordion" ).accordion({
        change: function(event, ui) {
            //set cookie for current index on change event
            $.cookie('saved_index', null);
            $.cookie('saved_index', $( "#accordion" )
                    .accordion( "option", "active" ));
        },
        active:parseInt($.cookie('saved_index'))
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-15T10:29:28.633

@DeM 解决方案对我有用，但我不断收到此错误。

> 在初始化之前不能在手风琴上调用方法；试图调用方法“选项”

以下修改对我有用：

```
$("#accordion").accordion({    
    //set localStorage for current index on activate event
    activate: function(event, ui) {  
        //Find the index of the header. This can be the class|element you specify in the "header" init argument.
        var index =  $(this).find("h3").index(ui.newHeader[0]);
        localStorage.setItem("accIndex", index);
    },
    // "|| 0" is used to activate first by default
    active: parseInt(localStorage.getItem("accIndex")) || 0   
}); 
```

# python - 代码迭代真的很慢，为什么？

> ID：11231437
> 
> 赞同：1
> 
> 时间：2012-06-27T17:01:11.753
> 
> 标签：python, hash, iteration

我能够在这里的社区的帮助下编写一些代码，但是我遇到了一个问题，即我的 python 运行迭代并且写出的速度真的很慢，就像我的另一个脚本一样，它做同样的事情，但是一个跑了超级快，这段代码中是否有任何明显的原因可能导致这种情况？

```
with open('c:/file.sql') as inf, open('c:/file.txt','w') as outf:
    for i in xrange(47):
        inf.next()       

    for line in inf:
        data = line.split(',')
        if len(data) < 15:
            inf.next()
        elif len(data) > 35:      
            hash = data[13]
            select = hash[3:len(hash)-1]
            outf.write(select + '\n') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:04:46.980

您的代码的较小版本：

```
from itertools import imap, islice
with open('c:/file.sql') as inf, open('c:/file.txt','w') as outf:
    for line in imap(str.strip, islice(inf, 47, None)):
        data = line.split(',')
        if len(data) > 35:
            hash = data[13]
            select = hash[3:-1]
            outf.write(select+'\n') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:13:14.457

所以考虑到评论......我认为这可能是你想要的：

```
with open('c:/file.sql') as inf, open('c:/file.txt','w') as outf:
    for line in itertools.islice(inf, 47, None):
        data = line.split(',')
        if len(data) > 35:      
            outf.writeline(data[13][3:-1]) 
```

# perl - 正则表达式 /ms 的行为不符合预期 perl 5.8.8

> ID：11231441
> 
> 赞同：3
> 
> 时间：2012-06-27T17:01:24.043
> 
> 标签：perl

我在 5.8.8 上的测试失败，我不明白为什么，尤其是当它在更新的版本中工作时（也许这只是一个错误）（这里是[完整代码的链接](https://metacpan.org/source/XENO/Dist-Zilla-Plugin-Test-PodSpelling-2.002004/t/dashed.t)）

```
use strict;                                                                                                          
use warnings;                                                                                                        
use Test::More;                                                                                                      

my $fname = 'Fo';                                                                                                    

my $content = do { local $/ ; <DATA> };                                                                             
like $content, qr/^$fname $/xms, q[includes first name];                                                             

done_testing;                                                                                                        
__DATA__                                                                                                             
use strict;                                                                                                          
use warnings;                                                                                                        
use Test::More;                                                                                                      

# generated by Dist::Zilla::Plugin::Test::PodSpelling bootstrapped version                                           
eval "use Test::Spelling 0.12; use Pod::Wordlist::hanekomu; 1" or die $@;                                            

add_stopwords(<DATA>);
all_pod_files_spelling_ok('bin', 'lib');
__DATA__
Fo
oer
bar 
```

在所有最新版本的 perl 上都可以正常工作。但在 5.8.8 中测试失败。我发现通过删除`^`和`$`代码工作，它就像 Perls 正则表达式引擎一样忽略了，`/m`但[文档](http://perldoc.perl.org/5.8.8/perlre.html)说它是受支持的。

为什么这不起作用？什么是最正确的修复方法？（注意：我认为测试应该检查这些元素本身是否在一条线上）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:57:37.363

这是错误[RT#7781](https://rt.perl.org/rt3/Ticket/Display.html?id=7781)。它已在 5.8.9 和 5.10.0 中修复。

解决方法：

*   `qr/^/m`相当于`qr/(?:^|(?<=\n))/`
*   `qr/$/m`相当于`qr/(?=\n|\z)/`

# rally - 如何使用 Rally REST API 从测试集中删除（取消映射）测试用例？

> ID：11231449
> 
> 赞同：2
> 
> 时间：2012-06-27T17:01:36.293
> 
> 标签：rally

如何使用 REST API 从 Rally 的测试集中删除测试用例？

它旨在从 JavaScript 调用。我无法在他们的文档中找到信息；一个链接将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:11:48.773

由于您使用的是 Javascript - 您是否也在使用 Rally 的 AppSDK？如果是这样，那么使用 AppSDK 提供的特权创建一个简单的 AppSDK 示例来显示这一点会相对简单。

如果您直接使用 REST，一个问题是测试用例没有 TestSet 属性字段 - 映射是测试集具有测试用例的集合。这样做的方法是通过 REST 查询测试集：

[https://rally1.rallydev.com/slm/webservice/1.34/testset/12345678910](https://rally1.rallydev.com/slm/webservice/1.34/testset/12345678910)

这将提供一个看起来像这样的响应（使用 XML 来提高可读性，建议在实践中使用 JSON）：

```
<?xml version="1.0" encoding="UTF-8"?>
<TestSet rallyAPIMajor="1" rallyAPIMinor="34" ref="https://rally1.rallydev.com/slm/webservice/1.34/testset/1234741798" objectVersion="7" refObjectName=" Data Import Tests" CreatedAt="Mar 29">
  <CreationDate>2012-03-30T00:23:59.964Z</CreationDate>
  <ObjectID>1234741798</ObjectID>
  <Subscription rallyAPIMajor="1" rallyAPIMinor="34" ref="https://rally1.rallydev.com/slm/webservice/1.34/subscription/1231154643" refObjectName="My Subscription" type="Subscription" />
  <Workspace rallyAPIMajor="1" rallyAPIMinor="34" ref="https://rally1.rallydev.com/slm/webservice/1.34/workspace/1234498610" refObjectName="My Workspace" type="Workspace" />
  <Changesets />
  <Description>Tests to validate data import</Description>
  <Discussion />
  <FormattedID>TS11</FormattedID>
  <LastUpdateDate>2012-03-30T00:25:56.544Z</LastUpdateDate>
  <Name>Grid Data Import Tests</Name>
  <Notes />
  <Owner rallyAPIMajor="1" rallyAPIMinor="34" ref="https://rally1.rallydev.com/slm/webservice/1.34/user/1234320127" refObjectName="My Username" type="User" />
  <Project rallyAPIMajor="1" rallyAPIMinor="34" ref="https://rally1.rallydev.com/slm/webservice/1.34/project/1234731604" refObjectName="My Project" type="Project" />
  <RevisionHistory rallyAPIMajor="1" rallyAPIMinor="34" ref="https://rally1.rallydev.com/slm/webservice/1.34/revisionhistory/1234741799" type="RevisionHistory" />
  <Tags />
  <Blocked>false</Blocked>
  <Iteration rallyAPIMajor="1" rallyAPIMinor="34" ref="https://rally1.rallydev.com/slm/webservice/1.34/iteration/1234172067" refObjectName="Iteration 1" type="Iteration" />
  <PlanEstimate>2.0</PlanEstimate>
  <Rank>500000010240.000</Rank>
  <Release rallyAPIMajor="1" rallyAPIMinor="34" ref="https://rally1.rallydev.com/slm/webservice/1.34/release/1234791788" refObjectName="Release 1" type="Release" />
  <ScheduleState>Defined</ScheduleState>
  <Tasks />
  <TestCaseStatus>SOME_RUN_SOME_NOT_PASSING</TestCaseStatus>
  <TestCases>
    <TestCase rallyAPIMajor="1" rallyAPIMinor="34" ref="https://rally1.rallydev.com/slm/webservice/1.34/testcase/1234758065" refObjectName="Test Case 1" type="TestCase" />
    <TestCase rallyAPIMajor="1" rallyAPIMinor="34" ref="https://rally1.rallydev.com/slm/webservice/1.34/testcase/1234757395" refObjectName="Test Case 2" type="TestCase" />
    <TestCase rallyAPIMajor="1" rallyAPIMinor="34" ref="https://rally1.rallydev.com/slm/webservice/1.34/testcase/1234000782" refObjectName="Test Case 3" type="TestCase" />
  </TestCases>
</TestSet> 
```

其中显示了三个测试用例的集合。要删除测试用例 3，您需要提交一个仅包含测试用例 1 和测试用例 2 的 REST 请求，如下所示：

```
<TestSet ref="/testset/1234741798">
  <TestCases>
    <TestCase ref="/testcase/1234758065"/>
    <TestCase ref="/testcase/1234757395"/>
  </TestCases>
</TestSet> 
```

这将更新测试集，使其删除测试用例 3 并且仅具有前两个测试用例。

您的客户端代码需要遍历来自测试集查询的 REST 响应，并构造一个 POST 请求来丢弃不需要的测试用例并保留您想要的测试用例。

# libgdx - Libgdx：屏幕调整大小和 ClickListener (libgdx)

> ID：11231451
> 
> 赞同：3
> 
> 时间：2012-06-27T17:01:39.207
> 
> 标签：libgdx

我开发了一个 2D 游戏并使用 OrthographicCamera 和 Viewport 将虚拟板的大小调整为真实的显示尺寸。我将图像添加到舞台并使用 ClickListener 来检测点击。它工作正常，但是当我改变分辨率时它工作不正确（无法检测到正确的演员，我认为新的和原始的 x 和 y 的问题）。有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:06:07.707

您需要将屏幕坐标转换为世界坐标。你的相机可以做到这一点。你可以做这两种方式，`cam.project(...)`并且`cam.unproject(...)`

或者，如果您已经在使用 Actors，请不要自己初始化相机，而是使用`Stage`. 创建一个舞台并将演员添加到其中。然后舞台将为您进行坐标转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-08T10:19:41.923

曾经我也遇到过这个问题，但最后我得到了可行的解决方案，用于在 libgdx 中使用 SpriteBatch 或 Stage 绘制任何东西。使用正交相机我们可以做到这一点。

首先选择一个最适合游戏的恒定分辨率。在这里，我拍摄了 1280*720（横向）。

```
class ScreenTest implements Screen{

final float appWidth = 1280, screenWidth = Gdx.graphics.getWidth();
final float appHeight = 720, screenHeight = Gdx.graphics.getHeight();

OrthographicCamera camera;

SpriteBatch batch;
Stage stage;

Texture img1;
Image img2;

 public ScreenTest(){
  		camera = new OrthographicCamera();
		camera.setToOrtho(false, appWidth, appHeight);

        batch = new SpriteBatch();
 		batch.setProjectionMatrix(camera.combined);

        img1 = new Texture("your_image1.png");
 		img2 = new Image(new Texture("your_image2.png"));
 		img2.setPosition(0, 0); // drawing from (0,0)

        stage = new Stage(new StretchViewport(appWidth, appHeight, camera));
        stage.addActor(img2);
  }

    @Override
	public void render(float delta) {

		Gdx.gl.glClearColor(1, 0, 0, 1);
		Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

		batch.begin();
		batch.draw(img, 0, 0);
		batch.end();

		stage.act();
		stage.act(delta);
		stage.draw();

		// Also You can get touch input according to your Screen.

		if (Gdx.input.isTouched()) {
		 System.out.println(" X " + Gdx.input.getX() * (appWidth / screenWidth));
		 System.out.println(" Y " + Gdx.input.getY() * (appHeight / screenHeight));
	   }

	}
  //
  : 
  :
  //
}
```

以任何类型的分辨率运行此代码，它将以该分辨率进行调整而不会受到任何干扰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T07:52:52.070

我只是认为 Stage 易于使用。如果有一些错误，我认为你应该检查你的代码：

```
public Actor hit(float x, float y) 
```

# gridview - GXT - RowEditor 将 CheckColumnConfig 标记为已修改

> ID：11231452
> 
> 赞同：0
> 
> 时间：2012-06-27T17:01:39.257
> 
> 标签：gridview, checkbox, grid, gxt

我将 CheckColumnConfig 与 RowEditor 结合使用。CheckColumnConfig 用于指示用户想要“选择”的网格中的一行，可能是为了删除该行或向应用程序指示用户正在处理哪一行。如果用户单击行中的任何其他单元格，则调用 RowEditor 并且用户照常继续。

如果用户更新任何单元格，RowEditor 还会将 CheckColumnConfig 复选框“标记”为已修改（左上角带有红色小三角形）。我的代码中有一个忽略复选框的解决方法，但这很痛苦（而且很难看）。有什么方法可以阻止 RowEditor 将 CheckColumnConfig 标记为已修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T08:13:47.357

我想您可能已经通过使用*GridView*并将*setShowDirtyCells*属性设置为*false*的方式解决了您的问题。然后使用*grid.setView(view)将**视图*添加到您的网格中

# ms-access - 使用 Access 复制到/从 Dbase 数据

> ID：11231454
> 
> 赞同：0
> 
> 时间：2012-06-27T17:02:00.590
> 
> 标签：ms-access, dao, dbase

我被一些使用 dBase IV 的遗留后端卡住了，并且希望能够使用 Access 前端将记录从一个表复制到另一个表。简单的答案是链接到源表和目标表并运行 INSERT 查询或类似的查询。

但是，在我的情况下，后端不是单个 DBF 文件，而是需要动态链接到数百个文件以进行复制操作。目前，每次我希望执行复制操作时，我都必须使用 TableDefs 属性（在 VBA 中）更改和刷新链接定义。

关键是前端是共享的，这意味着每个用户都必须拥有一个单独的 FE 副本，以便链接表定义不会被另一个用户修改。

我想知道是否有一种简单的方法可以在不使用链接表的情况下做到这一点？我可以打开到源和目标的 DAO 连接，但找不到任何简单的复制记录的方法（一次一个除外）。反正这周围有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:46:31.367

可以使用插入到另一个位置的 DBF 的链接 DBF 运行查询：

```
INSERT INTO [dBASE III;DATABASE=z:\docs\].[dbf2.dbf]
SELECT *
FROM dbf1; 
```

或者

```
INSERT  INTO dbf1
SELECT *
FROM  [dBASE III;DATABASE=z:\docs\].[dbf2.dbf]; 
```

# c# - 序列化使用单例模式创建的类

> ID：11231456
> 
> 赞同：-1
> 
> 时间：2012-06-27T17:02:10.067
> 
> 标签：c#, design-patterns, serialization

在我的程序中，我所有的课程都使用单例模式，除了主窗口。因此，所有的单例连接都由一个单例类“Manager”维护。通过此类中的公共方法访问其他类中的 GUI 方法。

现在，我正在尝试保存我的工作（序列化），但总是收到错误“Form1 未序列化”。那是GUI类。所以，我把它标记为序列化，知道这不是一个好主意。现在它说“System.windows.forms 未序列化”。为什么是这样？是否无法序列化具有单例访问的类？请帮忙。

注意：我是一名学习“Head First C#”的 Java 开发人员。这是我第一次尝试以我自己喜欢的方式解决他们的“实验室”问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:05:10.633

不看代码很难知道哪里出了问题。原则上可以序列化一个表单（我只是使用[MSDN](http://msdn.microsoft.com/en-us/library/bb675198.aspx)`Test<T>(T obj)`中的示例方法这样做了，该方法使用[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)）。

**话虽如此...**序列化表单本身以保存表单状态是不明智的。相反，您应该将数据保存在单独的类中（通常称为 Model 类，请参阅[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)）并序列化数据。使用数据绑定或 MVC 模式将表单（视图）连接到数据（模型）。

如果这是 WinForms（我认为），可以将 MVC 与 WinForms 一起使用

[https://stackoverflow.com/questions/2406/looking-for-a-mvc-sample-for-winforms](https://stackoverflow.com/questions/2406/looking-for-a-mvc-sample-for-winforms)

有关与 WinForms 进行数据绑定的信息，请参阅

[http://msdn.microsoft.com/en-us/library/ef2xyb33.aspx](http://msdn.microsoft.com/en-us/library/ef2xyb33.aspx)

# google-maps-api-3 - JSON响应中的Google Geocode API“REQUEST_DENIED” - 反向地理编码操作

> ID：11231457
> 
> 赞同：2
> 
> 时间：2012-06-27T17:02:18.103
> 
> 标签：google-maps-api-3, google-places-api, geocode

到处找——并且已经阅读了许多关于谷歌 API（地图、地理编码、地点、自动完成等）的其他问题——但没有任何效果。

我有一个启用了 Places、Static Maps 和 Maps v3 & v2 服务的 API 密钥。

我正在尝试执行反向地理编码（通过 JSON 从纬度/经度坐标获取街道地址信息）。

这是我在 JavaScript 中传递的 URL（API 密钥的最后 5 位数字替换为 #####：

[http://maps.googleapis.com/maps/api/geocode/json?latlng=49.8925136,-97.1466635&sensor=true&key=AIzaSyDbfv8bFidX1hSbXwwKTTxWQYgU7g####](http://maps.googleapis.com/maps/api/geocode/json?latlng=49.8925136,-97.1466635&sensor=true&key=AIzaSyDbfv8bFidX1hSbXwwKTTxWQYgU7g####)

JSON 响应是：

```
{
    "results" : [],
    "status" : "REQUEST_DENIED"
} 
```

如您所见，传递了一个“sensor=true”参数 - 根据[支持此 API 的 Google 文档](https://developers.google.com/maps/documentation/geocoding/#StatusCodes "支持地理编码 API 的 Google 文档")，这是问题所在，但这里显然不是这种情况。

我也试过简单地通过

[http://maps.googleapis.com/maps/api/geocode/json?latlng=49.8925136,-97.1466635&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?latlng=49.8925136,-97.1466635&sensor=true)

当 URL 输入到浏览器的地址栏中时，它会返回预期的 JSON 响应——但是当添加到我的 HTML 文件中的 JavaScript 时，我再次收到：

```
{
    "results" : [],
    "status" : "REQUEST_DENIED"
} 
```

欢迎任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:36:53.043

Google 并不特别希望您在网页中使用此静态 API。您应该在网页中使用 Maps API 及其相关的地理编码功能（因为无论如何您都需要在地图上显示结果）。这些静态 API 旨在用于服务器端，因此看起来它们现在拒绝带有`HTTP_REFERER`标头的请求。

（使用服务器端的密钥可以让您跟踪统计信息，但无效的密钥将始终导致`REQUEST_DENIED`是否存在引用者标头。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:37:02.140

我一直在为同样的问题而苦苦挣扎，我相信我想出了一个非常实用的解决方案，实际上对我来说效果很好！您只需对请求查询的 URI 进行一些小修改。而不是查询

[http://maps.googleapis.com/maps/api/geocode/json?latlng=49.8925136,-97.1466635&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?latlng=49.8925136,-97.1466635&sensor=true)

您实际上应该使用以下 URI 查询 google maps api：

[http://maps.google.com/maps/api/geocode/json?latlng=49.8925136,-97.1466635&sensor=true](http://maps.google.com/maps/api/geocode/json?latlng=49.8925136,-97.1466635&sensor=true)

那个小小的修改对我来说就像一个魅力！

希望这可以帮助。

# html - webkit中HTML上的SVG过滤器？

> ID：11231458
> 
> 赞同：3
> 
> 时间：2012-06-27T17:02:18.910
> 
> 标签：html, webkit, svg

所以我一直在搞乱 SVG 过滤器，我想将它们应用于 HTML 内容。

[http://paulirish.com/work/videooo.xhtml](http://paulirish.com/work/videooo.xhtml) - 适用于 Firefox，而不是 chrome。 [https://dl.dropbox.com/u/4031469/woohtml.html](https://dl.dropbox.com/u/4031469/woohtml.html) - 我的例子，适用于 FF，而不是 Chrome。

在网络上，我看到一些东西提到了用于定义基于 svg 的过滤器的 url() 语法，而 custom() 则指的是 css 着色器。

但是，我无法通过使用该`filter:`属性或该`-webkit-filter:`属性来使过滤器正常工作。

关于如何让它们工作的任何想法？`about:flags`在 Chrome 中没有任何选项，所以我试图弄清楚它们是否还没有实现，或者我做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T22:37:39.100

除了速记过滤器（模糊、棕褐色等），Chrome 现在支持 HTML 内容的 SVG 过滤器，从 V.21 开始，使用 -webkit-filter: url(#foo) 语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:55:08.330

Webkit 不支持 html 元素上的 svg 过滤器。但是，它确实支持 css 过滤器。

因此，如果您想同时支持这两种浏览器，您可以编写...

```
selector {
  filter: url(#reference_to_blur);
  -webkit-filter: blur(10px);
} 
```

您可以在此处查看更多 CSS 过滤器：http: [//davidwalsh.name/css-filters](http://davidwalsh.name/css-filters)

我还没有测试过，但我怀疑 IE9 和 Opera 在其当前版本（IE9 和 Opera 11）中是否支持 css 或 svg 过滤器。

# c++ - 将变体复制到 char*

> ID：11231459
> 
> 赞同：-1
> 
> 时间：2012-06-27T17:02:22.233
> 
> 标签：c++, com, variant

如何从 C++ 中的变体复制到字符数组。到目前为止，我已经能够想出下面的片段。但需要帮助才能使其工作。

```
_variant_t vt_Data(parent->CharData);

if(vt_Data.vt != VT_NULL)
{
   long ubound;
   long lbound;
   long length;
   TSTHR(SafeArrayGetLBound(vt_Data.parray, 1, &lbound));
   TSTHR(SafeArrayGetUBound(vt_Data.parray, 1, &ubound));
   if(length = ubound - lbound +1)
   {
      char *char_data = new char[length];

      TSTHR(SafeArrayAccessData(vt_Data.parray, (void **) &char_data))
      memcpy(char_data, vt_Data.parray, length);
      TSTHR(SafeArrayUnaccessData(vt_Data.parray));
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T23:36:44.343

如果 的类型`parent->CharData`是 char*、bstr 或 TCHAR*（或类似），那么以下应该可以工作。（虽然未经测试）

```
//uses the bstr_t const assignment operator to extract the string
_bstr_t bstr = vt_Data; 
```

这将创建字符串的新副本。

# html - 有没有办法将微数据添加到 CSS 中引用的图像？

> ID：11231464
> 
> 赞同：3
> 
> 时间：2012-06-27T17:02:37.673
> 
> 标签：html, css, microdata, schema.org

我正在尝试为公司的徽标添加 itemprop="image"（如下所示：[http](http://www.schema.org/Corporation) ://www.schema.org/Corporation ），但我正在使用来自 Wordpress 的龙门框架的龙门徽标插件。结果，图像实际上是由 CSS 中的引用加载的，而不是使用 HTML 标记。

不幸的是，似乎 itemprop="image" 只能添加到该标签，因为它是从中获取 URL 的。

任何人都可以在不尝试在网站上隐藏徽标并在其上放置标签的情况下想出解决方法吗？

（我特指的站点是[http://www.bpsresolver.com](http://www.bpsresolver.com)供参考。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:14:39.383

> “任何人都可以想办法解决这个问题而不试图在网站上隐藏徽标并在其上放置标签吗？”

这正是需要做的。这样做的方法是打开这个 Gantry Logo 插件的源代码并找到`<a id='logo'></a>`css 引用的徽标并将其更改为`<img src='yourimage.jpg'/>` 我通常使用 WindowsGrep 来查找 id='logo' 或任何可能的情况。

但是要回答您的问题：“有没有办法将微数据添加到 CSS 中引用的图像中？” - 不 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:38:03.820

我最终修复它的方法是使用位于 /plugins/gantry/widgets/ 中的 logo.php 插件。在该文件的底部`<a>`是提到 miro 的标签。

我没有删除它并替换它（因为它附加了许多其他需要保持不变的 CSS 属性），我只是在`<img>`标签之间添加了`<a>`标签，并将引用图像的 CSS`background: url(url_to_image);`从`background: transparent;`.

最后，我将整个东西包裹在一个`<div>`我用来指示范围的标签中，然后`itemprop`放在`<img>`.

# c# - Itextsharp 中的 XfdfReader

> ID：11231465
> 
> 赞同：1
> 
> 时间：2012-06-27T17:02:45.823
> 
> 标签：c#, .net, pdf, itextsharp

我正在使用 [itextsharp](http://sourceforge.net/projects/itextsharp/files/) 最新版本。

无法理解为什么这段代码

```
XfdfReader x= new XfdfReader(filename); 
```

显示此错误

> 你调用的对象是空的

**PdfReader**类没有问题

根据 [定义](http://opensourcejavaphp.net/csharp/itextsharp/XfdfReader.cs.html)， XfdfReader 类有 3 个构造函数，其中一个构造函数只接受一个参数文件名，参数类型为字符串。我正确地提供了所有必需的参数，但它显示错误。

完整代码如下...

```
OpenFileDialog ofd = new OpenFileDialog();
        if (ofd.ShowDialog() == DialogResult.OK)
        {
         //it has no problem
         PdfReader pdfReader = new PdfReader(ofd.FileName);
          //here is the error
          XfdfReader d=new XfdfReader(ofd.FileName);
        } 
```

# visual-studio-2010 - 是否有恢复VisualStudio右键单击和拖动移动和复制的希望？

> ID：11231468
> 
> 赞同：1
> 
> 时间：2012-06-27T17:03:01.910
> 
> 标签：visual-studio-2010

在VS2010之前，您可以在Windows资源管理器和Microsoft WORD中右键单击并拖动来移动和复制。

解决方法是 ctrl-left-click-and-drag，实际上有时会出现故障，您必须假装 ctrl-left-click-and-drag 到另一个窗口才能使其再次工作：我在多个窗口中看到的行为公司、计算机和项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T00:12:52.390

从微软的[这个功能请求](http://connect.microsoft.com/VisualStudio/feedback/details/522138/where-is-right-click-code-drag-option)来看，关闭为“不会修复”，我认为该功能已被放弃。

# facebook - 如何仅获取正在使用我的应用程序的用户（朋友）？

> ID：11231471
> 
> 赞同：1
> 
> 时间：2012-06-27T17:03:15.573
> 
> 标签：facebook, facebook-graph-api, cordova

我有一个 PhoneGap 应用程序，我需要在其中列出所有已在 Facebook 上授权该应用程序的用户朋友。

我目前正在使用`FB.api('/me/friends?fields=installed', callbackFnc)`，但这向我显示了**所有**朋友，指出他们中的哪些人已授权该应用程序。当我真的只想列出授权的**时候。**这大大减慢了加载朋友的过程。

我在这里看到了其他类似的问题，但没有一个有答案。

**解决方案：感谢[CBroe](https://stackoverflow.com/users/1427878/cbroe)**
，我无法成功将FQL直接传递给FB.api，但只能使用该对象：

```
var apiQuery = 
{
   method: 'fql.query',
   query: 'SELECT uid, name FROM user WHERE uid IN (SELECT uid1 FROM friend WHERE uid2 = me() ) AND is_app_user'
}   

FB.api(apiQuery, function(response){...}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:07:54.040

改用 FQL：

```
SELECT uid, name FROM user WHERE uid IN
  (SELECT uid1 FROM friend WHERE uid2 = me() ) AND is_app_user 
```

（您也可以针对 Graph API 设置该查询，`/fql?q={query}`。）

# c# - 在 Windows Server 2003 r2 上从 Winform 启动 mstsc.exe

> ID：11231477
> 
> 赞同：1
> 
> 时间：2012-06-27T17:03:42.907
> 
> 标签：c#, command, cmd, remote-desktop

我正在尝试在 C# 中的 Winform .NET 4.0 中编写多个远程桌面连接的脚本。

给定 _serverList 中的服务器名称列表，

```
 var startInfo = new ProcessStartInfo
        {
            FileName = "cmd.exe",
            RedirectStandardInput = true,
            RedirectStandardOutput = true,
            UseShellExecute = false,
            CreateNoWindow = false
        };

        var process = new Process { StartInfo = startInfo };

        process.Start();

        foreach (string server in _serverList)
        {

            process.StandardInput.WriteLine(@"mstsc.exe /v:" + server);         
        } 
```

当我在本地桌面（Windows 7）上运行它时，它工作得非常好：所有服务器都已启动，但是一旦我将应用程序移植到服务器上（Windows Server 2003 r 2，并且触发此事件的事件发生，我得到错误

**“mstsc.exe”不是内部或外部命令、可运行程序或批处理文件**

我尝试了提供 mstsc.exe 的完整路径、更改 FileName = "mstsc.exe" 并将服务器名称作为参数提供的变体，但没有任何效果。

当我在服务器上启动 cmd.exe 并手动输入“mstsc.exe /v: someservername”时，行为符合预期并启动了正确的服务器。

任何对出了什么问题的见解将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T00:32:44.527

我能够在 Windows Server 2012 R2 上正常运行您提供的代码。操作系统中可能有一些安全机制在这里起作用。您是否尝试过手动提升可执行文件的权限？

如果可行，您可以查看此帖子：

[以编程方式提升进程特权？](https://stackoverflow.com/questions/133379/elevating-process-privilege-programatically)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:50:14.623

当`UseShellExecute`设置为 false 时，您必须在设置 FileName 属性时提供可执行文件的完整路径，环境变量无法正常工作。在 Windows server 2003 R2 上搜索“mstsc.exe”的位置。对 Windows 7 执行相同的操作。这些路径可能不同，这可以解释问题。

使用诸如[OperatingSystem](http://msdn.microsoft.com/en-us/library/system.operatingsystem%28v=vs.100%29.aspx)之类的辅助类根据操作系统、处理器（例如 x86 目录）、`%systemroot%`环境差异等差异有选择地选择正确的路径。然后您可以在 app.config 中设置正确的值。

# ruby-on-rails - Rails：对特定列进行排序

> ID：11231478
> 
> 赞同：1
> 
> 时间：2012-06-27T17:03:45.283
> 
> 标签：ruby-on-rails, sorting, activerecord

我正在设计一个视图表。例如，它们有两列是`ID`和`name`。当用户单击该`ID`列时，我希望数据将按`ID`. 同样，如果用户点击`name`列`, the data`将按`name`.

我的问题是：

有什么办法可以把它放入模型（数据库模型）中，因此，当用户单击一列时，它的状态将被保存，数据库将查看它并根据此状态返回记录。

如果没有，我如何看待这段代码。

请帮我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:10:05.173

看看这个 railscasts #228 [http://railscasts.com/episodes/228-sortable-table-columns](http://railscasts.com/episodes/228-sortable-table-columns)

```
def sortable(column, title = nil)
  title ||= column.titleize
  css_class = column == sort_column ? "current #{sort_direction}" : nil
  direction = column == sort_column && sort_direction == "asc" ? "desc" : "asc"
  link_to title, {:sort => column, :direction => direction}, {:class => css_class}
end 
```

当您有功能排序列时，您需要将其保存到数据库

一个基本表：user_id、page_name（或 table_name）、sort_column、sort_direction

然后，当用户加载页面时，您将检查保存的设置并加载它们（如果存在），如果它们不存在，则可以加载默认值。

这就是想法，我没有时间为它编写代码，但它应该相当直截了当。

**更新：**

由于我必须在工作中执行此操作，因此我将发布我的代码。

上面的 railscast 实现了以下三个函数，它们允许对列进行排序。

application_controller.rb/或 specific_controller.rb

```
def sort_column
  Product.column_names.include?(params[:sort]) ? params[:sort] : "name"
end

def sort_direction
  %w[asc desc].include?(params[:direction]) ? params[:direction] : "asc"
end 
```

以及使用它的控制器

```
def index
  @products = Product.order(sort_column + " " + sort_direction)
end 
```

***现在***，为了记住用户为排序选择的内容并使用它而不是总是加载默认的可排序列，我们需要为`user_preferences`

为首选项表创建迁移，例如

```
create_table :user_preferences do |t|
  t.string :action
  t.string :preference

  t.references :user
end
add_index :user_preferences, :user_id 
```

当我们现在搜索时（路径 -> 'specific_controller#index?direction=asc&sort=name'），我们需要保存/更新用户的偏好

```
def index
  preference = UserPreference.find_by_user_id_and_action(User.current_user.id, params[:action])
  #Save/update preference based on column sort
  if params[:sort]
    unless preference.nil?
      preference.update_attribute(:preference, "#{params[:sort]},#{params[:direction]}")
    else
      preference = UserPreference.new(:user => User.current_user, :preference => "#{params[:sort]},#{params[:direction]}", :action => params[:action])
    end
  end
  populate_table_based_on_preference(preference)
end

def populate_table_based_on_preference(preference)
  unless preference.nil?
    @products = Product.order(preference.preference.split(',')[0]+ " " + preference.preference.split(',')[1])
  else
    @products = Product.order(sort_column + " " + sort_direction)
  end
end 
```

然后我们需要更新我们的方法（sort_column/direction -> What column are we sort/which direction?）

```
def sort_column
  #What are we sorting on?
  preference = UserPreference.find_by_user_id_and_action(User.current_user.id, params[:action])
  unless preference.nil?
    preference.preference.split(',')[0]
  else
    Product.column_names.include?(params[:sort]) ? params[:sort] : "name" 
  end
end

def sort_direction
  preference = UserPreference.find_by_user_id_and_action(User.current_user.id, params[:action])
  #what is the search direction
  unless preference.nil?
    preference.preference.split(',')[1]
  else
    %w[asc desc].include?(params[:direction]) ? params[:direction] : "asc" 
  end
end 
```

# ruby-on-rails-3 - Ruby 数据建模 has_many 关系两种方式

> ID：11231486
> 
> 赞同：3
> 
> 时间：2012-06-27T17:04:19.090
> 
> 标签：ruby-on-rails-3, rails-activerecord

我有一个关于 Ruby 中某个数据模型的问题。我有一组业务需求：

用户可以创建许多研讨会

用户可以参加许多研讨会

车间有一个所有者（用户）

研讨会有许多参加者（用户）

这种关系的第一部分很容易建立：

```
#user.rb
class User < ActiveRecord::Base
    has_many :workshops
end

#workshop.rb
class Workshop < ActiveRecord::Base
    belongs_to :user
end 
```

但是我将如何建立从研讨会到用户的“其他 has_many”关系。我可以做一些类似研讨会的事情 belongs_to :user, :as :owner。和一个研讨会 has_many :users, :as :attendees?

您对此有何看法？更糟糕的是，研讨会有参加者限制，所以我需要验证......

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:37:59.567

你有一个 has_many 到 has_many 的关系，所以你需要创建一个新的关联表来关联这些关系（我们称之为出席）：

创建数据库迁移：

> rails g模型出勤率

然后在您的迁移中执行以下操作：

```
create_table :attendances do |t|
    t.integer :attendee_id
    t.integer :workshop_id
end

add_index :attendances, :attendee_id
add_index :attendances, :workshop_id
add_index :attendances, [:workshop_id, :attendee_id] 
```

因此，现在您有一个表格，您可以在其中将许多与会者与许多研讨会相关联。

现在在您的用户模型中：

```
has_many :attending, through: :attendances, foreign_key: 'attendee_id', class_name: 'Workshop', source: :workshop 
```

在您的车间模型中：

```
has_many :attendees, through: :attendances, class_name: 'User', source: :attendee 
```

所以现在 'some_user.attending' 将返回 some_user 正在参加的所有研讨会的 ActiveRecord 关系，而 'some_workshop.attendees' 将为您提供所有参加 some_workshop 的用户。

# node.js - 我可以在快递中使用熨斗的足智多谋吗？

> ID：11231491
> 
> 赞同：3
> 
> 时间：2012-06-27T17:04:28.743
> 
> 标签：node.js, express, flatiron.js

是否可以在 express.js 中使用 Flatiron 的资源丰富（ODM）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T19:28:07.447

**是的。**

您需要使用 express 的资源路由器项目[https://github.com/visionmedia/express-resource/](https://github.com/visionmedia/express-resource/)。这将需要一些设置，因为您需要映射每个资源丰富的方法调用。

我建议查看 Flatiron 的资源路由器[https://github.com/flatiron/restful](https://github.com/flatiron/restful)，因为它需要零配置才能使用 Resourceful 资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T17:27:23.527

Resourceful 中没有任何其他包特有的内容。[https://github.com/flatiron/resourceful](https://github.com/flatiron/resourceful)上的自述文件很好地展示了如何在*任何*项目（不仅仅是基于 Express 的项目）中使用这个包。

# sql-server - 我将如何创建这个 T-SQL 子查询？

> ID：11231495
> 
> 赞同：0
> 
> 时间：2012-06-27T17:04:39.487
> 
> 标签：sql-server, tsql, inner-query

我在这里失去了联系。在过去，我会想出一个超级 T-SQL 查询，

```
选择 t1.Number, t1.TransactionType, t1.Description, t1.Vendor,
(Select max(t2.BatchId) From table2 t2
 其中 t1.Number=t2.Number 和 t1.TransactionType=t2.TransactionType
 按 t2.number,t2.transactiontype 分组）作为 BatchId
从表 1 t1

```

我需要 table2 中的第二列。列称为“结果”。

例子：

```
表格1：
编号、交易类型、描述、供应商
1、Type1、Test1、Vendor1
2、Type1、Test2、Vendor2
1、Type2、Test3、Vendor3
3、Type2、Test1、Vendor2

表2：
编号、交易类型、批次 ID、结果
1、类型1、12、错误1
1、类型1、4、错误2
1、Type2、8、成功
3、Type2、7、成功

想要的结果集：
Number、TransactionType、Description、Vendor、BatchId、Result
1、Type1、Test1、Vendor1、12、error2
2、Type1、Test2、Vendor2、null、null
1、Type2、Test3、Vendor3、8、成功
3、Type2、Test1、Vendor2、7、成功

```

发布的查询负责前 5 列。现在最后一列怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:12:13.933

```
select t1.Number, t1.TransactionType, t1.Description, t1.Vendor, t2.BatchId, t2.Result
from table1 t1
left join
(
  select t2.TransactionType, t2.number, t2.Result, t2.BatchId,
    row_number() over (partition by t2.number, t2.TransactionType order by t2.BatchId desc) as BatchNumber
  from table2 t2
) t2 on t1.Number = t2.Number
  and t1.TransactionType = t2.TransactionType
  and t2.BatchNumber = 1 
```

如果您可以确定对于 t1 中的每一行，您在 t2 中都有相关行，那么最好将左连接替换为内连接。

**UPD**在评论中正确注意到了一个错误。我已将查询更改为正确的版本。

# python - 在 python 中生成一个守护进程

> ID：11231505
> 
> 赞同：3
> 
> 时间：2012-06-27T17:05:01.470
> 
> 标签：python, fork, process

我使用了以下帖子中的 spawn 函数： [Indefinite daemonized process spawning in Python](https://stackoverflow.com/questions/8425116/indefinite-daemonized-process-spawning-in-python)

我正在编写一个 cgi 脚本，它接收输入、操作它们，然后输出一个成功页面。其中一个操作函数调用一个需要一点时间才能完成的可执行文件。结果，当个人提交请求时，它会简单地挂在 html 页面上，直到完成。

在我的 def main() 函数中，我执行以下操作：

```
def main():
    <call a bunch of little functions here>
    print <All the success information here>
    <spawn the daemon process here> 
```

问题在于，使用该命令时，可能由于分叉，它会打印 3 次成功信息。（但可执行文件应该在后台运行）。如果我将守护进程放在 html 打印之前，它会导致它挂起，因为它曾经破坏了生成后台进程的目的。

有没有人有任何想法？

另外，关于分叉的快速理论问题，当调用 fork 时，它是否会重新运行它再次调用的整个函数？因此，如果我生成守护进程，分叉进程会生成 ?

# xml - 是否可以在 (X)HTML (5) 中创建自定义标签？

> ID：11231508
> 
> 赞同：0
> 
> 时间：2012-06-27T17:05:14.247
> 
> 标签：xml, html, xhtml

我想编写一个 (X)HTML 文档，其中包含黑色字体的文本。在德语中，当文档的基本字体是 blackletter 字体时，习惯用 antiqua 字体排版外来词。因为这是一个可能经常出现的语义标记，所以我不喜欢使用 a`<span class="fw">`或类似的。

是否可以在 (X)HTML 中定义一个新标签`<fw>`（用于外来词），以便我可以通过语义进行标记？如果是，现代浏览器是否支持？将其与样式表一起使用时有什么特别需要注意的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:17:42.910

`<i>`出于您所描述的目的，使用标签可能是有意义的。虽然`<i>`过去的意思是“斜体”，但在 HTML5 中[它被指定为](http://www.w3.org/International/questions/qa-b-and-i-tags/)：

> i 元素代表一段文本以另一种声音或语气，或以其他方式偏离正常散文，例如分类名称、技术术语、来自另一种语言的惯用短语、思想、船名或其他一些散文，其典型的印刷表示是斜体。

请注意，当您想通过斜体强调文本时，该`<em>`标签仍然可供您使用，并且更适合该任务。有关标签的新用途，请参阅上面的链接，这`<b>`是添加自定义（无效）标签的另一种选择。

更直接地回答您的问题：添加标签并保持有效的 HTML5 是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:18:17.867

简短的回答：没有。更长的答案：不是一个好主意。

顺便说一句，`<div style="antiqua">`行不通，也许你`<div style="font-family: antiqua">` 的意思是更好的解决方案 IMO 将是`<span class="fw">`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:31:05.603

是的，完全可以在 JavaScript 的帮助下创建自己的标签。但是，我强烈建议不要使用这种做法（除非它用于以下用途）。

通常，此方法用于强制旧版浏览器支持 HTML5。它比其他任何东西都更像是一种解决方法，应该这样对待。

您可以通过在 HTML 文档开头使用一小段 JS 代码来创建对任何标签（甚至是自定义标签）的支持：`document.createElement('tagname');`您还可以像通常对其他任何标签一样设置这些自定义标签的样式；CSS 或内联。

请注意，您的自定义标签不会生效。仅仅为了设计师的个人品味而使用这是一种丑陋的做法。

与往常一样，我强烈建议您使用已经存在的内容，并使用**Classes**命名元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T21:37:58.720

XHTML 是 XML，如果您在自己的名称空间中添加自己的标签，它仍然是 XML。您可以考虑使用自己的 XML 词汇表并使用客户端 XSLT 来呈现它（使用新的 Saxon-CE 产品，您甚至可以使用 XSLT 2.0）。但是，如果这是您要添加的唯一“语义”标记，则可能是矫枉过正 - 只需`<span class="fw">`按照建议使用即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T19:42:36.020

HTML 和 XHTML 规范定义了允许的标签，但没有什么能真正阻止您使用您喜欢的任何标签。现代浏览器通常将标签识别为定义元素，您可以设置这些元素的样式并使用客户端脚本对其进行处理。

但是，正如您从这里几个问题的答案中看到的（例如搜索“自定义标签”），在大多数情况下有几个原因可以避免这种情况。

“外来词”根本没有 HTML 标记，我们可以做出的大多数语义区分也没有 HTML 标记。我们可以忍受这一点。在大多数情况下，没有软件真正关心我们*可以*在 HTML 中做出的那些少数区别。

如果你不喜欢`span`，你可以使用`font`（因为你真正想要做的是字体区分），或者`a`为了简洁起见。（没有`href`,`a`实际上在语义上是空的，或者是免费的，就像`span`is 一样。）

您还可以使用`lang`属性，例如`<font class="fw" lang="en">dummy</font>`. 它可能使标记看起来更语义化，并且在特殊情况下可能变得相关（在某些情况下的语音合成、拼写检查等）。

# java - 添加未知类型的数量

> ID：11231509
> 
> 赞同：0
> 
> 时间：2012-06-27T17:05:14.347
> 
> 标签：java, parsing, number-formatting

我试图在我不知道它们是哪种类型（int、float 等）的情况下解析并将 2 个数字相加，并且我试图将结果存储在最合适的类型中。例如，如果我得到 2 个 int，我希望结果是一个 int，但如果我得到一个 int 和一个 double，我希望结果是一个 double。我该怎么做呢？

我的一个想法是先尝试解析为 int，然后是 long，然后是 float，……看看它是哪种类型。有没有更好的方法来做到这一点，而不是尝试/捕获 NumberFormatExceptions？

前任：

```
String number1 = "5";
String number2 = "3.4";

Object answer = add(number1, number2); 
```

add() 会是什么样子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:08:16.270

我会将所有内容阅读为 a`double`或 a `BigDecimal`。这将比试图找到“最佳”类型更简单并且可能更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:11:47.530

如果您确定这些数字是有效的（例如其中没有特殊符号），那么我会在输入中搜索点 ( `.`)。如果我找到一个点，我会将其解析为`double`; 如果没有，如`int`.

# html - HTML/CSS：在 iPad 上从动态内容到背景的渐变过渡。查看实时示例

> ID：11231511
> 
> 赞同：0
> 
> 时间：2012-06-27T17:05:15.783
> 
> 标签：html, css, ipad

这是我当前如何实现此功能的示例：

[例子](http://signdesignllc.net/fixed%20position.html)

添加或删除项目时，内容 div 的高度可以动态变化，因此我需要渐变随它移动。这在桌面浏览器中效果很好......但是，当您在 iPad 上查看它并向下滚动（向上移动整个主体）时，它看起来很奇怪，因为位置：固定在渐变 div 上。请注意，这仅在内容 div 小于视口时才会出现问题。如果内容 div 大于视口，它会将渐变推到视野之外并且效果很好。

有什么方法可以防止 iPad 像那样移动身体，或者有没有更好的方法来实现这个功能而不使用位置：固定？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:45:50.943

我放弃了渐变 div，而是在内容 div 上设置了一个最小高度，并使用具有以下属性的渐变背景图像：

```
#content {
    min-height: 200px;
    background-color: white;
    background-image: url(../Images/content-background.png);
    background-position: center bottom;
    background-repeat: repeat-x;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:39:19.037

你能多解释一下 iPad 上看起来有什么问题吗，我没有随身携带。另外，我删除了位置：固定；并且功能在chrome上没有改变。位置静态和相对工作对我来说是一样的。

# javascript - JayData 一对多预测

> ID：11231512
> 
> 赞同：0
> 
> 时间：2012-06-27T17:05:24.977
> 
> 标签：javascript, jaydata

我想使用 jaydata JSLQ（JavaScript 语言查询）将一对多的列表展平`Post`到`PostData`我的 ViewModel中

我的 EF 实体如下所示：

```
public partial class Post
{       
    public Post()
    {           
        this.PostData = new HashSet<PostData>();           
    }

    public int Id { get; set; }

    public virtual ICollection<PostData> PostData { get; set; }
} 
```

我的数据库包含这些记录：

```
Table: Post
Id;...
1;...

Table: PostData
Id;PostId;FieldType; FieldValue
1; 1;     10;        "foo"
2; 1;     12;        "bar"
3; 1;     34;        "blah" 
```

我希望客户端中的视图模型如下所示：

```
{id:1, title:'foo'} 
```

这意味着，我想在 PostData 上放置一个仅返回 FieldName==10 的过滤器，并且我想将其展平为一个简单的对象。

我该怎么做？

```
context.Posts.toArray(function(posts){console.dir(posts);}) 
```

返回一个帖子对象数组。接下来是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:15:15.760

这是通过 EF 中的 SelectMany() 函数实现的，JayData 尚不支持这种方法。但是，您可以通过直接查询 aganst PostData 和过滤 Post 属性来实现相同的输出。

```
context.PostDatas
  .filter( function(pd) { return pd.FieldType == 10 } )
  .map( function(pd) { return { 
                  PostID: pd.Post.Id, 
                  PostDataId: pd.Id, 
                  Title: pd.FieldValue }})
  .toArray( ... ) 
```

# javascript - FusionCharts--找不到容器DOM元素

> ID：11231514
> 
> 赞同：1
> 
> 时间：2012-06-27T17:05:30.013
> 
> 标签：javascript, fusioncharts

大家好，我正在对这个 FusionCharts 进行评估，但我一直遇到障碍。我收到这个错误，不知道为什么……有熟悉 FusionCharts 的人吗？

我只是想运行这个例子

```
<script src="../js/fusioncharts/FusionCharts.js" type="text/javascript"></script>

<script type="text/javascript">

<!--               

var myChart = new FusionCharts    ( "../js/fusioncharts/Column3D.swf",                   
            "myChartId", "400", "300", "0", "1" );      

            myChart.setJSONData( {         
            "chart":         
                {                
                 "caption" : "Weekly Sales Summary" ,                    
                 "xAxisName" : "Week",                 
                 "yAxisName" : "Sales",                  
                 "numberPrefix" : "$"         
                 },        

            "data" :         
             [                  
                { "label" : "Week 1", "value" : "14400" },                
                { "label" : "Week 2", "value" : "19600" },                 
                { "label" : "Week 3", "value" : "24000" },                 
                { "label" : "Week 4", "value" : "15700" }         
             ]
     } );

            myChart.render("div_view");         

  // -->         

  </script> 
    <div id="div_view">FusionCharts will load here!</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:53:48.747

已修复....FusionCharts 将在此处加载！

必须在 JS 之前

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-23T07:48:44.483

创建 FusionCharts 对象时，第五个参数是应该完成渲染的 DOM 元素，请参阅此处了解更多信息

[http://www.fusioncharts.com/dev/api/fusioncharts.html](http://www.fusioncharts.com/dev/api/fusioncharts.html)

因此，您作为 DOM 元素拥有的任何字符串都应设置为您希望在其中显示图表的 DIV 的 id，例如：

Fusion 图表对象是这样创建的：`$pie3dChart = new FusionCharts("pie3d", "ex2", "100%", 400, "chart-1", "json", ....` 这里的字符串“ **chart-1** ”是 DOM 元素 id，所以你应该在文档中有一个像这样的 div，`<div id="chart-1"></div>`这将是渲染发生的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T10:56:12.483

在加载融合图表时，dom 尚未完全加载。所以尝试使用脚本编写

```
$(document).ready(function(){

// your code goes here.
        var myChart = new FusionCharts    ( "../js/fusioncharts/Column3D.swf",                   
        "myChartId", "400", "300", "0", "1" );      

        myChart.setJSONData( {         
        "chart":         
            {                
             "caption" : "Weekly Sales Summary" ,                    
             "xAxisName" : "Week",                 
             "yAxisName" : "Sales",                  
             "numberPrefix" : "$"         
             },        

        "data" :         
         [                  
            { "label" : "Week 1", "value" : "14400" },                
            { "label" : "Week 2", "value" : "19600" },                 
            { "label" : "Week 3", "value" : "24000" },                 
            { "label" : "Week 4", "value" : "15700" }         
         ]
 } );

        myChart.render("div_view");  

}); 
```

* * *

否则。在标记后写脚本`<div>`标记

# facebook - 访问 Facebook 上的用户个人资料的离线访问权限的替代方法？

> ID：11231515
> 
> 赞同：1
> 
> 时间：2012-06-27T17:05:33.553
> 
> 标签：facebook, facebook-graph-api

Facebook 已弃用**离线访问**权限。作为开发人员，我是否有其他方法可以在用户不在线时在用户的墙上发帖，或者我只能在他访问我的应用程序时这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:39:04.147

您可以在应用程序中增加 2 个表列，即 short_access_token 和 long_access_token。

一旦用户对您的应用程序进行身份验证，就会生成一个访问令牌，并将其存储在 short_access_token 中。然后将此访问令牌传递给：

[https://graph.facebook.com/oauth/access_token](https://graph.facebook.com/oauth/access_token)？
client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN

运行此命令后，将生成一个有效期为 60 天的访问令牌。将其存储在 long_access_token 中。现在，使用这个 long_access_token 60 天。

您每天只能生成一次长寿命访问令牌，即第一次。使用这个长期存在的访问令牌在用户的墙上发布（如果您已经获得许可）。

参考：[https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:43:58.973

您可以在用户墙上发布长达 60 天的帖子，而无需该用户登录。之后，您需要强制用户再次登录 Facebook 并获得一个新的 60 天访问令牌。

为了优雅地完成这一切，您应该将获取令牌的日期存储在您的数据库中，并在该日期临近时为用户设置必要的 UI。

此外，如果用户是您的应用程序的不常用用户，您应该每天至少测试一次令牌的有效性，如果您的应用程序发现令牌已过期，则将他们重定向到登录 Facebook。这也有助于重新。由于用户更改其 Facebook 密码，令牌变得无效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:23:35.370

当然，只要您拥有有效的访问令牌，您就可以在用户的​​墙上发帖——无论他们是否“在线”。

需要阅读的东西（显然看起来你在询问之前没有做太多自己的研究）：

[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

[https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

# java - MVC Spring Model - 动态访问属性列表索引

> ID：11231517
> 
> 赞同：0
> 
> 时间：2012-06-27T17:05:43.230
> 
> 标签：java, spring, model-view-controller, jsp, modelandview

我有一个关于如何从模型属性列表动态访问索引的问题。在我的代码中，我有一些 javascript 从模型中读取值。该模型具有一个可能是列表的属性。

```
document.getElementById("phoneNumberRPhone").value = "${model.people[index].phoneNumber.number}"; 
```

在这里，您可以看到我正在尝试将 javascript 值设置为从可以有多个人的模型中检索到的数字。索引是我的动态值。如果我特别声明 model.people[0] 或 model.people[1]，它可以正常工作，但是如果我尝试设置一个数字来索引并动态使用索引，它就不再有效。

我将非常感谢任何人对此提供的任何帮助。我确定这只是用户错误或语法使用不当的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:17:24.933

显然`${index}`在 JSP/EL 范围内根本不存在 JSP/EL 必须打印那段 JS 代码。例如，它只会对您正在做的事情起作用（尽管这种方法非常值得怀疑）：

```
<c:forEach items="${model.people}" varStatus="loop">
    document.getElementById("phoneNumberRPhone").value = "${model.people[loop.index].phoneNumber.number}";
</c:forEach> 
```

但是请记住，JSP 只是一个 HTML 代码生成器，而 JavaScript 是其中的一部分。JSP 和 JavaScript 不同步运行。在 webbrowser 中右键单击页面并执行*View Source*以查看它。

# asp.net-mvc-3 - 如何在模型 asp.net mvc 中访问会话

> ID：11231522
> 
> 赞同：9
> 
> 时间：2012-06-27T17:06:04.737
> 
> 标签：asp.net-mvc-3, session-variables

如何从模型访问会话？

我尝试使用：

```
public IQueryable<EstudentsViewModel> GetEstudentsProjected(decimal? Code)
        {
           .
           .   
           .
           decimal id;
           id = (decimal)Session["Consul"];
           .
           .
           .
        } 
```

出现：**当前上下文中不存在名称“会话”**

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-27T17:17:46.077

> 如何从模型访问会话？

您总是可以执行以下色情内容：

```
HttpContext.Current.Session["Consul"] 
```

但是请，哦，我的神圣地球，请答应我永远不会犯下这样的罪行。

模型永远不应该知道会话是什么。会话是一个网络术语，模型应该完全不知道它。您应该从有权访问会话的控制器传递模型所需的信息。

所以检查一下：

```
public IQueryable<EstudentsViewModel> GetEstudentsProjected(decimal? Code, decimal id)
{
    ...
} 
```

当从控制器调用此方法时，您只需从 Session 传递值，因为控制器可以访问它。

# jquery - jquery 元数据插件和 jquery 验证插件的主要烦恼

> ID：11231524
> 
> 赞同：3
> 
> 时间：2012-06-27T17:06:06.963
> 
> 标签：jquery, jquery-validate

我正在使用无处不在的[jquery validate 插件](http://docs.jquery.com/Plugins/Validation)进行表单验证。它支持使用[元数据插件](https://gist.github.com/1198460)向表单元素添加验证规则。

我正在使用这个功能。当 validate 查找这些规则时，它会在元素上进行此调用：

```
$(element).metadata()[meta] 
```

where`meta`是您存储这些规则的前缀。例如

```
<input data-validate="{maxLength: 12}" name='foo'/> 
```

meta 的值将设置为“验证”以获取这些属性。但是这里有个大问题！

以下是元数据插件将数据属性解析为 json 的操作：

```
var getObject = function(data) {
    if(typeof data != "string") return data;
    data = eval("(" + data + ")"); //oh no!!!!!
    return data;
} 

if ( settings.type == "html5" ) {
    var object = {};
    $( elem.attributes ).each(function() {
        var name = this.nodeName;
        if(name.match(/^data-/)) name = name.replace(/^data-/, '');
        else return true;
        object[name] = getObject(this.nodeValue);
    });
} 
```

所以最终发生的是元数据解析所有`data-*`属性并尝试评估内容！一旦你包含一个不包含 json 的数据属性，这就会破坏东西。

现在的问题：

似乎元数据和验证都是“尝试过的和真实的”插件。这是使用人们刚刚使用的元数据插件的已知副作用吗？

我通常不喜欢修改插件代码以适应我的项目需求，但这似乎我应该：

*   修复元数据插件不盲目评估东西，不使用评估或
*   修复要使用的验证插件`.data()`而不是元数据插件

另外，除了修改元数据插件之外，还有其他方法吗

**赏金后编辑：** 我应该更清楚地说明这一点，我会对有关这可能如何发生的一些讨论感兴趣。在规范验证插件和我见过的由 resig 编写的随处使用的插件中如何可能存在如此严重的错误。

修复很简单，我已经应用了它（我选择修改验证插件以在定义“元”时使用 $.data） - 我在这里给出 150 分是关于为什么这仍然是一个问题的想法（或者也许不是！）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T11:02:53.927

正如您所发现的，“错误”（使用 eval）在于元数据插件，而不是验证插件。

您链接到的元数据插件版本实际上是一个分叉；jQuery 团队有[官方 repo](https://github.com/jquery/jquery-metadata)。如果您查看[提交历史记录](https://github.com/jquery/jquery-metadata/commits/master)，您会发现自 2007 年以来没有任何真正的代码更新。该插件自 2011 年 4 月以来已[正式弃用](http://blog.jquery.com/2011/04/16/official-plugins-a-change-in-the-roadmap/)。

（John Resig 在 2008 年 7 月发表了关于[HTML5 数据属性的博客，并且在 2010 年](http://ejohn.org/blog/html-5-data-attributes/)[10 月](http://blog.jquery.com/2010/10/16/jQuery-143-released/)发布的[1.4.3](http://api.jquery.com/data/#data-html5)中支持 jQuery 核心。）

所以我猜你的“这可能是怎么发生的”问题的答案是你不应该再使用这个插件了:-)

（**更新：** “[官方”存储库](https://github.com/jquery-orphans/jquery-metadata)现在位于“jQuery 基金会孤儿项目”下。）

As for the validate plugin, aside from some of the [demos](http://jquery.bassistance.de/validate/demo/) and the [`meta`](http://docs.jquery.com/Plugins/Validation/validate#toptions) option, I can't find any mention of the metadata plugin in the documentation. There is ongoing work to add [support for data- attributes](https://github.com/jzaefferer/jquery-validation/pull/425) and [deprecate the metadata plugin](https://github.com/jzaefferer/jquery-validation/issues/426), so hopefully when the next version is ready the metadata plugin can finally be abandoned.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:44:18.650

```
data = eval("(" + data + ")"); //oh no!!!! 
```

替换它的方法之一

```
data = $.parseJSON(data); // oh yes!!! 
```

实际上，当您使用 .data() 方法获取“数据”时，它会尝试解析它，并且做得很好。所以最好从使用它的元素中检索数据。之后，您将获得一个缓存对象，该对象将连接到节点并更快地为您提供属性值。

[这](https://github.com/flops/jquery-metadata)是元数据插件的分叉版本，不会评估他得到的所有内容。关于这一点，您必须知道一件事。您应该像在 JSON 中一样引用 dict 的所有部分，但并不总是在双引号中。

```
{'foo': 'bar', "m": true, "b": 1}; // works
{foo: 'bar', m: true, b: 1}; // won`t work 
```

# c# - 根据计数编写列表项

> ID：11231525
> 
> 赞同：-1
> 
> 时间：2012-06-27T17:06:11.457
> 
> 标签：c#, list

我有一个项目列表（让我们说 30 个字符串）；我试图弄清楚如何写入 txt 文件 5 个项目，然后是新行，接下来的 5 个项目，等等。像这样：

```
List<string> blah;
//List contains:
1
2
3
4
5
6
7
8
9
10 
```

我想写入一个 txt 文件，所以它看起来像这样：

```
1   2   3   4   5
6   7   8   9   10 
```

我似乎无法弄清楚会写这个的计数器。如果这很重要，我正在使用 StreamWriter。

编辑：这是我目前拥有的，但只写空行。

```
for (var a = 0; a < ls.Count; a++)
        {
            foreach (string s in ls)
            {
                if (a == 0)
                {
                    sr.Write(s);
                }
                else if((a % 5) == 0)
                {
                    sr.Write(s);
                    sr.Write("\t");
                }

            }
        } 
```

这让我发疯了，因为我知道这是一个简单的计数器，我基本上需要说“在你写了 5 个项目之后，开始新的一行”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:09:42.017

在伪代码中

```
for (int i = 0; i < list.Count; i++) {
    if (i == 0) {
        append to empty file (value)
    } else if ((i % 5) == 0) {
        append to new line (CR LF + value)
    } else {
        append to current line ("spaces or tab" + value)
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:09:54.217

```
 StringBuilder sb = new StringBulder();

        for (int i = 0; i < blah.Count; i++)
        {
            sb.Append(blah[i].ToString());

            if (i % 5 == 0)
            {
                sb.AppendLine();
            }
            else
            {
                sb.Append(" ");
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:10:57.267

扩展 JohnP 的评论：

```
for(var i = 0; i < blah.Count; i++)
{
    if(i % 5 == 0)
        //do new line

    YourPrintFunction(i);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T17:11:22.323

使用 LINQ：

```
StringBuilder sb = new StringBuilder();
int i = 0;

blah.ForEach(s => { if ((++i % 5) == 0) sb.AppendLine(s); else sb.Append(s + "\t"); });

File.WriteAllText("filename", sb.ToString()); 
```

# java - 我如何使用 jvm type -server 测试我的程序

> ID：11231527
> 
> 赞同：0
> 
> 时间：2012-06-27T17:06:15.927
> 
> 标签：java, eclipse, jvm

我想测试我的代码在两种 jvm 类型上的性能`-client`以及`-server` 如何在 eclipse 中的两种 jvm 类型之间切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:07:10.743

与使用任何命令行开关（例如`-Xmx256m`）运行应用程序的方式相同。只需将其添加到运行配置的命令*行**选项*（您可以创建 2 个配置，每个设置一个）。

 *更具体：

1.  转到应用程序的*主*类
2.  运行
3.  这应该创建一个*Run*（或*Launch*）*配置*
4.  编辑此配置
5.  在命令行开关中添加`-client`或`-server`

[**Eclipse 帮助**](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/tasks-java-local-configuration.htm)中提供了更多信息[](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/tasks-java-local-configuration.htm)*

# jquery - 单页网站在错误的部分打开

> ID：11231528
> 
> 赞同：0
> 
> 时间：2012-06-27T17:06:22.627
> 
> 标签：jquery, smooth-scrolling, singlepage

所以我创建了一个单页网站，它使用 jQuery 平滑滚动导航到网站的各个部分。出于某种原因，当我在浏览器中打开页面时（我在多个浏览器和计算机上进行了测试），网站会在页面的中间而不是页面的顶部打开。

这是我用来创建平滑滚动的脚本。

这是网站

> [http://usspcatalystcentre.org.uk/](http://usspcatalystcentre.org.uk/)

```
<script>
    $(function() {

        function filterPath(string) {
            return string
            .replace(/^\//,'')
            .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
            .replace(/\/$/,'');
        }

        var locationPath = filterPath(location.pathname);
        var scrollElem = scrollableElement('html', 'body');

        // Any links with hash tags in them (can't do ^= because of fully qualified URL potential)
        $('a[href*=#]').each(function() {

            // Ensure it's a same-page link
            var thisPath = filterPath(this.pathname) || locationPath;
            if (  locationPath == thisPath
                && (location.hostname == this.hostname || !this.hostname)
                && this.hash.replace(/#/,'') ) {

                    // Ensure target exists
                    var $target = $(this.hash), target = this.hash;
                    if (target) {

                        // Find location of target
                        var targetOffset = $target.offset().top;
                        $(this).click(function(event) {

                            // Prevent jump-down
                            event.preventDefault();

                            // Animate to target
                            $(scrollElem).animate({scrollTop: targetOffset}, 700, function() {

                                // Set hash in URL after animation successful
                                location.hash = target;

                            });
                        });
                    }
            }

        });

        // Use the first element that is "scrollable"  (cross-browser fix?)
        function scrollableElement(els) {
            for (var i = 0, argLength = arguments.length; i <argLength; i++) {
                var el = arguments[i],
                $scrollElement = $(el);
                if ($scrollElement.scrollTop()> 0) {
                    return el;
                } else {
                    $scrollElement.scrollTop(1);
                    var isScrollable = $scrollElement.scrollTop()> 0;
                    $scrollElement.scrollTop(0);
                    if (isScrollable) {
                        return el;
                    }
                }
            }
            return [];
        }

    });
    </script> 
```

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:33:29.517

在应用下`autofocus`从您的输入元素中删除。

> **[自动对焦](http://www.w3schools.com/html5/att_input_autofocus.asp)**：
> 
> 当存在时，它指定一个元素在页面加载时应该自动获得焦点

以上意味着当输入元素启用了自动对焦时，页面将在页面加载时向下滚动到该元素，这也是您的问题。

一个解释场景的示例[演示。](http://jsfiddle.net/dhirajbodicherla/4BqVW/)

希望能帮助到你

# php - PHP 内的 HTML 内的 PHP

> ID：11231532
> 
> 赞同：1
> 
> 时间：2012-06-27T17:06:35.073
> 
> 标签：php, html

我无法进行以下工作。我知道这是因为 HTML 字符串中的 PHP 函数，但我不知道如何修复它。

```
echo '<aside class="tipContainer">'.'<div>'.'<h1>'.$header.'</h1>'.'<img src="<?php bloginfo('template_url'); ?>/images/pencil_Tip.gif" alt="">'.'</div>'.'<p>'.$content.'</p>'.'</aside>'; 
```

我收到此错误：意外的 T_STRING，期待 ',' 或 ';' 在 ....

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T17:09:20.383

尝试：

```
echo '<aside class="tipContainer"><div><h1>' . $header . '</h1>'.
     '<img src="' . get_bloginfo('template_url') . '/images/pencil_Tip.gif" ' .
     'alt=""></div><p>' . $content . '</p></aside>'; 
```

由于您已经在`<?php ?>`echo 语句的标签内，因此当您想调用 get_bloginfo() 时不需要它们。只需将该函数作为字符串连接的一部分调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T17:09:32.060

PHP 嵌套太深。（php嵌套在php中）。试试这个：

```
echo '<aside class="tipContainer"><div><h1>'.$header.'</h1><img src="'.bloginfo("template_url").'/images/pencil_Tip.gif" alt=""></div><p>'.$content.'</p></aside>'; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T17:10:10.990

尝试：

```
//stop executing PHP, go to plain HTML
 ?>
<aside class="tipContainer">
<div>  
    <h1><?php echo $header?> </h1>
    <img src="<?php bloginfo('template_url'); ?>/images/pencil_Tip.gif" alt="">
</div>
<p>
<?php echo $content ?>
</p>
</aside>

<?php //start php again 
```

通常使代码更简洁，更易于维护，以将 php 交织到 html 中，而不是相反的方式 aroudn

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T17:09:39.330

试试这个：

```
echo '<aside class="tipContainer"><div><h1>' . $header . '</h1><img src="'
. bloginfo('template_url')
. '/images/pencil_Tip.gif" alt=""></div><p>' . $content . '</p></aside>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T17:09:28.150

```
echo '<aside class="tipContainer">'.'<div>'.'<h1>'.$header.'</h1>'.'<img src="' . bloginfo('template_url') . '/images/pencil_Tip.gif" alt="">'.'</div>'.'<p>'.$content.'</p>'.'</aside>'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T17:09:49.087

解释为什么它不起作用：

```
'<img src="<?php bloginfo('template_url'); ?>/images ...
'______ php string _______'            '__ another php string ...
                           ^^^^^^^^^^^^
                           this is not part of the sting,
                           because you just closed it. 
```

解决方案：

*   `'aaa' . "'bbb'" . 'ccc'`: 替代引用风格
*   `'aaa\'bbb\'ccc'`: 引用字符串中的单引号
*   `"aaa'bbb'ccc"` : 使用双引号引用包含单引号的字符串

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-27T17:10:22.213

```
echo '<aside class="tipContainer"><div><h1>'.$header.'</h1><img src="' . bloginfo('template_url') . '/images/pencil_Tip.gif" alt=""></div><p>'.$content.'</p></aside>'; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-27T17:11:32.650

试试下面，

--> 尽可能避免连接，不需要经常拆分/连接字符串，例如：“string1”。"string2" 不是必需的，只需执行 "string1string2" 即可避免混淆。

--> 使用 IDE，它对调试语法错误有很大帮助。

```
<?php
echo '<aside class="tipContainer"><div><h1>'. $header. '</h1><img src="' . bloginfo('template_url') . '"/images/pencil_Tip.gif" alt=""></div><p>'.$content.'</p></aside>';
?> 
```

# android - 为什么 Android 使用来自较高资源而不是较低资源的资源？

> ID：11231533
> 
> 赞同：0
> 
> 时间：2012-06-27T17:06:42.363
> 
> 标签：android, android-layout, android-resources

有一个我想采用 xhdpi 分辨率手机的应用程序。因此，我为该分辨率制作了资源，并且在 xhdpi 手机方面一切顺利。

我有一部测试手机，`normal hdpi`现在布局混乱了（在我修复了 xhdpi 手机之后。

布局结构如下所示：

*/res/drawable-hdpi
/res/drawable-normal-xhdpi
/res/layout
/res/layout-normal-xhdpi*

当我在手机上加载应用程序时`normal hdpi`，我看到它使用`/res/layout-normal-xhdpi`来自`/res/drawable-normal-xhdpi`.

它不应该使用较低资源文件夹中的资源`/res/layout`吗`/res/drawable-hdpi`？它没有，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:21:28.657

根据[Android如何找到最佳匹配资源](http://developer.android.com/intl/zh-CN/guide/topics/resources/providing-resources.html#BestMatch)系统消除了与设备配置相矛盾的资源文件，但看起来你的情况是预期的，因为这个例外：

> **例外：**屏幕像素密度是唯一因矛盾而未被淘汰的限定符。

这样`normal hdpi`配置的设备匹配到`/res/drawable-normal-xhdpi`.

# google-visualization - 我们可以将 Google 图表工具与 Google Script HtmlService 一起使用吗

> ID：11231535
> 
> 赞同：2
> 
> 时间：2012-06-27T17:06:57.183
> 
> 标签：google-visualization, google-apps-script, google-caja

我想使用 HtmlService 在 Google Scripts 中使用 Google Chart Tools。但我不知道 caja 是否允许注入脚本来显示图表。我的第一次测试给了我空白页。

有谁知道这是否至少是可能的？

我知道谷歌脚本提供“图表”服务，但与谷歌图表工具相比，这些功能是有限的。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:28:03.153

如果您查看 Caja 部分下的 HtmlService 文档，[https](https://developers.google.com/apps-script/html_service#Caja) ://developers.google.com/apps-script/html_service#Caja它说包含的库已经过清理，到目前为止只支持 JQuery。

由于 Chart Tools 依赖于 Google 的 jsapi，而且它似乎做了一些非常时髦的魔法，我敢打赌它现在不会通过 Caja 净化。

我想知道是否有某种方法可以使用 GAS Charts 库来生成图表（尽管是静态图表）？但它会产生 blob，我不确定如何将它们集成到 HtmlService 的页面中？！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:17:14.270

尚不支持图表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:25:42.803

在推出 Charts 服务之前，我使用过 Google Chart Tools。在基础层面，谷歌图表工具返回您想要的图表图像，数据通过 URL 参数传递给它。

使用通用 Javascript，我开发了构建 URL 的逻辑，然后使用 UrlFetchApp 获取图像，然后使用 UiApp.createImage() 将其显示在 Apps Script 上。

如果您可以发布一些代码，您可以获得更多帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-03T05:04:39.640

这现在是可能的，在过去 3 个月左右的某个时间。

# android - eclipse中gen文件夹中缺少R.java文件

> ID：11231537
> 
> 赞同：1
> 
> 时间：2012-06-27T17:07:10.163
> 
> 标签：android, eclipse

我的电脑在电池电量不足时进入睡眠状态。但是当它恢复时，我发现我的 gen 文件夹中缺少 R.java 文件。我的整个应用程序都崩溃了。错误如下所示：

![在此处输入图像描述](../Images/ecdf2b49cda5794e4c36625ef2000793.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:13:23.640

有可能，您的布局 xml 或代码中存在问题。

尝试查看您在 eclipse 进入睡眠时打开的文件，以及您正在处理的代码片段。

编辑：

R（资源文件）在每次重建项目时重新生成。对于您的项目中的一些错误，您的项目无法构建您的 R 文件丢失的原因。您需要做的就是修复文件、代码和 xml 文件中的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:15:51.647

清理项目，检查您的代码并删除所有对`android.R.*`

因此，当您的 R.java 损坏或丢失时，Eclipse 会尝试提供帮助，并认为您的代码中的引用`R.something`缺少导入文件并将 插入`android.R.*`到您的导入列表中。

如果您使用的是 IntelliJ，它有一个重建 R.java 命令。

如果它仍然丢失，则意味着您的代码中的某些内容阻止了它的构建。注意资源文件名等。通常你可以在eclipse的控制台视图中解决这些命名问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-29T20:58:32.340

如果您最近添加了一个新的资源文件并且文件名中使用了大写字母，请将文件名更改为小写并重新构建您的项目。我的项目就是这样。

每次重建项目时都应该重新生成 R.java 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-29T14:48:58.273

我遇到了同样的问题。几乎我花了一整天的时间来找出原因并尝试了博客中提供的所有 100 种解决方案。但是没有任何帮助！！！建立一个新的工作区后，我想通了。删除项目中不必要的库。您可以通过**Project-> 右键单击​​-> properties-> Android-> 进行检查，并删除不必要的添加库。**它起作用了:)希望它对某人有所帮助。

# html - html5 动态文本 ascii

> ID：11231540
> 
> 赞同：0
> 
> 时间：2012-06-27T17:07:19.447
> 
> 标签：html, text, canvas, ascii, kineticjs

如何在动力学JS中将ascii字符可视化为“人类可读”？

```
var figure = new Kinetic.Text({
        x: 75/2,
        y: 75/2,
        text: "&#9816;",
        fontSize: 30,
        fontFamily: "Calibri",
        textFill: "green",
        align: "center",
        verticalAlign: "middle"
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:32:26.363

这与 KineticJS 无关。您正在询问如何获取包含 HTML 字符实体的字符串并解码实体。有关该问题的答案，请参阅[使用 javascript 将 HTML 字符实体转换回常规文本。](https://stackoverflow.com/questions/4338963/convert-html-character-entities-back-to-regular-text-using-javascript)

# javascript - 使用 IE8 的 add 方法中的 JavaScript 错误

> ID：11231543
> 
> 赞同：0
> 
> 时间：2012-06-27T17:07:40.107
> 
> 标签：javascript, internet-explorer-8, invalid-argument

我这里有一段代码在 FireFox、Chrome 和 InternetExplorer 9 中运行良好，但在 InternetExplorer 8 中无法运行。我正在处理选择框。

```
var finalExclusionList = Dom.get("finalExclusionList-box");
            var countryList = Dom.get("regionsAndCountries-box");
            for (var i=0; i<finalExclusionList.length; i++) {
                countryList.add(finalExclusionList[i]);
            } 
```

我在 countryList.add 方法中有错误，说 Invalid Argument ...

有谁知道 IE8 中的错误是什么？

IE8 - 控制台.LOG

```
console.log(countryList) 
LOG: [object HTMLSelectElement]

console.log(countryList[0]) 
LOG: [object HTMLOptionElement]

console.log(finalExclusionList[i]) 
LOG: [object HTMLOptionElement]

console.log(countryList.add) 
LOG: 
function add() {
    [native code]
} 
```

IE9 - 控制台.LOG

```
>> console.log(countryList) 
LOG: [object HTMLSelectElement]

>> console.log(countryList[0]) 
LOG: [object HTMLOptionElement]

>> console.log(finalExclusionList[i]) 
LOG: [object HTMLOptionElement] 

>> console.log(countryList.add) 
LOG: 
function add() {
    [native code]
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:25:09.973

`countryList.add()`? 我会用`countryList.appendChild()`.

# sql - 检查 Postgres 数组中是否存在值

> ID：11231544
> 
> 赞同：245
> 
> 时间：2012-06-27T17:07:40.887
> 
> 标签：sql, arrays, postgresql

使用 Postgres 9.0，我需要一种方法来测试给定数组中是否存在值。到目前为止，我想出了这样的事情：

```
select '{1,2,3}'::int[] @> (ARRAY[]::int[] || value_variable::int) 
```

但我一直在想应该有一个更简单的方法，我只是看不到它。这似乎更好：

```
select '{1,2,3}'::int[] @> ARRAY[value_variable::int] 
```

我相信这就足够了。但是如果您有其他方法可以做到这一点，请分享！

* * *

## 回答 #1

> 赞同：385
> 
> 时间：2012-06-27T17:37:25.493

构造更简单**`ANY`**：

```
SELECT value_variable = ANY ('{1,2,3}'::int[]) 
```

（括号之间）的右操作数`ANY`可以是[**集合**（例如，子查询的结果）](https://www.postgresql.org/docs/current/functions-subquery.html#FUNCTIONS-SUBQUERY-ANY-SOME)或[**数组**](https://www.postgresql.org/docs/current/functions-comparisons.html#id-1.5.8.28.16)。有几种使用方法：

*   [SQLAlchemy：如何过滤 PgArray 列类型？](https://stackoverflow.com/questions/10344468/sqlalchemy-how-to-filter-on-pgarray-column-types/10344851#10344851)
*   [PostgreSQL 中的 IN 与 ANY 运算符](https://stackoverflow.com/questions/34627026/in-vs-any-operator-in-postgresql/34627688#34627688)

**重要**区别：[数组运算符（`<@`, `@>`, `&&`et al.）](https://www.postgresql.org/docs/current/functions-array.html#ARRAY-OPERATORS-TABLE)期望*数组*类型作为操作数并在 PostgreSQL 的标准发行版中[支持 GIN 或 GiST 索引](https://www.postgresql.org/docs/current/indexes-types.html)，而`ANY`构造期望*元素*类型作为左操作数并且不支持这些索引。例子：

*   [在 JSON 数组中查找元素的索引](https://stackoverflow.com/questions/18404055/index-for-finding-element-in-json-array/18405706#18405706)

这些都不适用于`NULL`元素。测试`NULL`：

*   [检查 Postgres 数组中是否存在 NULL](https://stackoverflow.com/questions/34848009/check-if-null-exists-in-postgres-array/34848472#34848472)

* * *

## 回答 #2

> 赞同：118
> 
> 时间：2013-04-12T10:04:51.017

当心我陷入的陷阱：当检查某个值是否存在于数组中时，你不应该这样做：

```
SELECT value_variable != ANY('{1,2,3}'::int[]) 
```

但使用

```
SELECT value_variable != ALL('{1,2,3}'::int[]) 
```

反而。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-10-08T20:42:06.100

> 但如果您有其他方法，请分享。

您可以比较两个数组。如果左侧数组中的任何值与右侧数组中的值重叠，则返回 true。这有点骇人听闻，但它确实有效。

```
SELECT '{1}'   && '{1,2,3}'::int[];  -- true
SELECT '{1,4}' && '{1,2,3}'::int[];  -- true
SELECT '{4}'   && '{1,2,3}'::int[];  -- false 
```

*   在第一个和第二个查询中，值`1`在正确的数组中
*   请注意，第二个查询是`true`，即使该值`4`未包含在正确的数组中
*   对于第三个查询，左侧数组（即`4`）中没有值在右侧数组中，因此返回`false`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-08-08T23:15:27.950

**`unnest`**也可以使用。它将数组扩展为一组行，然后简单地检查一个值是否存在，就像使用`IN`or一样简单`NOT IN`。

例如

1.  **id** => uuid

2.  **exception_list_ids** => uuid[]

`select * from table where id NOT IN (select unnest(exception_list_ids) from table2)`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-06-04T10:46:30.087

嗨，一个对我有用，也许对某人有用

```
select * from your_table where array_column ::text ilike ANY (ARRAY['%text_to_search%'::text]); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-11-01T20:49:07.207

在查找数组中是否存在元素时，需要正确转换才能通过 postgres 的 SQL 解析器。这是一个在连接子句中使用数组包含运算符的示例查询：

为简单起见，我只列出相关部分：

```
table1 other_name text[]; -- is an array of text 
```

显示的 SQL 的连接部分

```
from table1 t1 join table2 t2 on t1.other_name::text[] @> ARRAY[t2.panel::text] 
```

以下也有效

```
on t2.panel = ANY(t1.other_name) 
```

我只是猜测需要额外的转换，因为解析不必获取表定义来确定列的确切类型。其他人请对此发表评论。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-09-24T03:42:51.867

“任何”都很好用。只需确保 any 关键字位于等号的右侧，即出现在等号之后。

以下语句将抛出错误：错误：“任何”处或附近的语法错误

```
select 1 where any('{hello}'::text[]) = 'hello'; 
```

而下面的例子工作正常

```
select 1 where 'hello' = any('{hello}'::text[]); 
```

# vba - 如何修改文本导入向导 VBA 代码以更改特定列的列数据格式？

> ID：11231550
> 
> 赞同：2
> 
> 时间：2012-06-27T17:07:57.120
> 
> 标签：vba, excel, excel-2007

我目前正在导入包含大量数据的 URL。因此，我每次都必须手动通过文本导入向导来格式化特定的行。为了加快这个过程，我记录了我导入 URL 所采取的步骤的宏。不幸的是，虽然不同 URL 的列标题保持不变，但它们在数据库中的位置并不一致。导入时我的目标是让所有格式都等于“常规”，但标题为“IdNumber”的列除外，我需要将其作为“文本”导入。在下面的代码中（例如），它是 Array(22,2)。当我尝试在 23 或 24 列时导入不同的 URL 时，会出现问题。它没有将 IdNumber 转换为“文本”，而是转换了一个不同的数组。

问题：在使用文本导入向导时，有没有办法用 VB 代码指定某些列以仅修改特定的标题列？

*注意：如果我理解正确，Array(X,X) 函数的第一个数字是特定列，第二个数字是格式（1 表示一般，2 表示文本，...）

我的文本导入向导代码：

```
'open the URL (urlName is a variable set as a String and is declared earlier in the code) and go through the Text Import Wizard

Workbooks.OpenText Filename:= _
    urlName _
    , Origin:=437, StartRow:=1, DataType:=xlDelimited, TextQualifier:= _
    xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=False, Semicolon:=False _
    , Comma:=True, Space:=False, Other:=False, FieldInfo:=Array(Array(1, 1), _
    Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), Array(7, 1), Array(8, 1), _
    Array(9, 1), Array(10, 1), Array(11, 1), Array(12, 1), Array(13, 1), Array(14, 1), Array(15 _
    , 1), Array(16, 1), Array(17, 1), Array(18, 1), Array(19, 1), Array(20, 1), Array(21, 1), _
    Array(22, 2), Array(23, 1), Array(24, 1), Array(25, 1), Array(26, 1), Array(27, 1), Array( _
    28, 1), Array(29, 1), Array(30, 1), Array(31, 1), Array(32, 1)), TrailingMinusNumbers _
    :=True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:43:19.313

```
Sub tester()

    Dim arr, a
    arr = GetFieldInfoArray(32, 22) 'position from first load=22...
    For Each a In arr
        Debug.Print Join(a, ",")
    Next a

    Workbooks.OpenText Filename:=urlName, Origin:=437, StartRow:=1, _
              DataType:=xlDelimited, TextQualifier:=xlDoubleQuote, _
              ConsecutiveDelimiter:=False, Tab:=False, Semicolon:=False, _
              Comma:=True, Space:=False, Other:=False, _
              FieldInfo:=arr, TrailingMinusNumbers:=True

End Sub

'EDIT: adjust array lower bound from 1 to 0...
Function GetFieldInfoArray(NumFields As Integer, IdPosition As Integer)
    Dim arr(), x

    ReDim arr(0 To NumFields-1)
    For x = 1 To NumFields
        arr(x-1) = Array(x, IIf(x = IdPosition, 2, 1))
    Next x

    GetFieldInfoArray = arr
End Function 
```

# matlab - 在 Matlab 中使用带有 DLL 的 Win32 句柄

> ID：11231551
> 
> 赞同：0
> 
> 时间：2012-06-27T17:08:01.383
> 
> 标签：matlab, dll, handle

我有一件我想在 WinXP32 上的 Matlab 中控制的设备。它的 API 被打包在一个带有相关 C 头文件的 DLL 中。

设备的 API 函数依赖于硬件描述符，该描述符由其 Win32 句柄访问，并且只能由 API 函数直接操作。从制造商提供的“foo.h”头文件中：

```
typedef HANDLE BAR
#ifdef _DLL_EXPORT
    #define _DLL_API __declspec(dllexport)
#else
    #define _DLL_API __declspec(dllimport)
#endif 
```

该句柄随后被 API 函数使用，其 C 签名的形式如下：

```
FOO_RETURN Device_Init(BAR *pbar, DWORD parameter1, ....) 
```

转到 Matlab，我加载了库：

```
loadlibrary('foo','foo.h'); 
```

并且 API 函数现在可以在 Matlab 中使用。在 libfunctionsview 中，它们的签名如下所示：

```
Name         Arguments
Device_Init  (voidPtr, uint32, ....) 
```

loadlibrary 创建的“foo.m”函数将它们描述为：

```
fcns.name{fcnNum}='Device_Init'; fcns.calltype{fcnNum}='stdcall'; fcns.LHS{fcnNum}="uint32'; fcns.RHS{fcnNum}={'errorPtr, 'uint32', ...) 
```

我的问题是这个句柄“BAR”。不接受以下任何一项：

```
pbar = libpointer('BAR');  % Type was not found
pbar = libstruct('BAR');   % Undefined function or variable 'lib.BAR'
pbar = libpointer;         % Segfaults when passed to DLL 
```

有没有办法在 Matlab 中创建和管理这个句柄“BAR”，以便它可以在 Matlab 调用 calllib('foo','command',pbar,....) 中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:19:44.463

您可以尝试此代码来创建 MATLAB 指针：

```
pbar = libpointer('voidPtr',[ uint8('some string') 0])
pparameter1 = libpointer('uint32',0) 
```

并调用您的 DLL 函数，使用以下命令：

```
calllib('foo','Device_Init',pbar,pparameter1,...) 
```

# silverlight-4.0 - 商业应用程序中未显示滚动条 - 大都会主题

> ID：11231555
> 
> 赞同：0
> 
> 时间：2012-06-27T17:08:16.677
> 
> 标签：silverlight-4.0, scrollbar, business-application

这是来自 Styles.xaml 的样式。

```
<Style x:Key="PageScrollViewerStyle" TargetType="ScrollViewer">
    <Setter Property="BorderBrush" Value="Transparent"/>
    <Setter Property="BorderThickness" Value="0,1,0,1"/>
    <Setter Property="Margin" Value="-58,-15,-58,-15"/>
    <Setter Property="Padding" Value="58,0,58,0"/>
    <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
    <Setter Property="HorizontalScrollBarVisibility" Value="Auto"/>
</Style> 
```

无论浏览器窗口的大小如何，或者我将值设置为“可见”，我都不会看到滚动条。有关如何纠正此问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:30:21.067

我正在摆弄这个并决定尝试更改 LayoutRoot Grid 和 ScrollViewer 的顺序，这似乎已经修复了它。

我变了

```
<Grid x:Name="LayoutRoot" DataContext="{StaticResource ViewModel}">
<ScrollViewer x:Name="PageScrollViewer" Style="{StaticResource PageScrollViewerStyle}">
...
</ScrollViewer>
</Grid> 
```

对此：

```
<ScrollViewer x:Name="PageScrollViewer" Style="{StaticResource PageScrollViewerStyle}">
<Grid x:Name="LayoutRoot" DataContext="{StaticResource ViewModel}">
...
</Grid>
</ScrollViewer> 
```

# linux - 如何设置 procmail 将所有收到的邮件发送到两个、三个或更多脚本并在邮箱中留下一份副本？

> ID：11231558
> 
> 赞同：2
> 
> 时间：2012-06-27T17:08:29.373
> 
> 标签：linux, email, sh, procmail

如何为每封传入的电子邮件强制 .procmailrc：

1.  把这封邮件留在我的邮箱里，就像什么都没发生一样。
2.  通过 stdin 给 script1.sh 发邮件
3.  通过 stdin 给 script2.sh 发邮件
4.  通过 stdin 给 script3.sh 发邮件
5.  通过stdin等给script4.sh发邮件

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:22:21.040

只需使用一堆未交付的管道操作

```
:0 c
|script1.sh

:0 c
|script2.sh

:0 c
|script3.sh 
```

等。当它通过所有食谱而没有交付时，它将交付到系统标准收件箱。

# javascript - 基于值 javascript 限制复选框

> ID：11231560
> 
> 赞同：1
> 
> 时间：2012-06-27T17:08:33.883
> 
> 标签：javascript, jquery, html, javascript-events

我试图根据值更改示例创建复选框限制：我有以下复选框

```
<input type="checkbox" name="checkbox2[]" onClick="setChecks(this)" value="`key`=<?php 
echo $rspatient['key']?>" class="chk" id="chk<?php echo $a++?>" /> 
```

我有很多复选框，因为这是一个循环...有些具有相同的值，而另一些则没有...无论如何都希望创建代码来防止具有不同值的复选框！

限制复选框数量的当前代码

```
<script>
 <!--
 //initial checkCount of zero 
 var checkCount = 0
 //maximum number of allowed checked boxes 
 var maxChecks = 3
 var d = document.getElementById('chk' + (j++));

 function setChecks(obj) {
     //increment/decrement checkCount 
     if (obj.checked) {
         checkCount = checkCount + 1
     } else {
         checkCount = checkCount - 1
     }
     //if they checked a 4th box, uncheck the box, then decrement checkcount and pop alert 
     if (checkCount > maxChecks) {
         obj.checked = false
         checkCount = checkCount - 1
         alert('you may only choose up to ' + maxChecks + ' options')
     }
 }
 // -->
</script> 
```

我试图编辑最终的 if 语句，但没有成功！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:10:09.573

经过一番折腾后，我终于找到了一个可行的解决方案！

```
1 <input type="checkbox" value="1" /><br/>
2 <input type="checkbox" value="2" /><br/>
3 <input type="checkbox" value="3" /><br/>
1 <input type="checkbox" value="1" /><br/>
2 <input type="checkbox" value="2" /><br/>
3 <input type="checkbox" value="3" /><br/>
1 <input type="checkbox" value="1" /><br/>
2 <input type="checkbox" value="2" /><br/>
3 <input type="checkbox" value="3" /><br/>

$(function() {
var lastChecked = [];
$(':checkbox').change(function() {
    if (this.checked) {
        if (lastChecked.length && this.value != lastChecked[0].value) {
            this.checked = false;
            alert("the last box you checked has a different value");
        }
        else
        {
            lastChecked.unshift(this);
        }
    }
    else {
        lastChecked.splice(lastChecked.indexOf(this), 1);
    }
});
});​ 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:43:53.673

```
 lastChecked.splice(lastChecked.indexOf(this), 1);
} 
```

}); });​</p>

# java - java为什么需要弱引用

> ID：11231565
> 
> 赞同：19
> 
> 时间：2012-06-27T17:08:55.590
> 
> 标签：java, weak-references

我知道弱引用受垃圾收集器的支配，我们不能保证弱引用会存在。我看不出需要弱参考，但肯定应该有原因。

*   为什么我们需要在 java 中进行弱引用？
*   java中弱引用的实际（一些）用途是什么？如果您可以分享您在项目中的使用方式，那就太好了！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T17:47:45.960

实际上，使用弱哈希图通常是一个坏主意。一方面它很容易出错，但更糟糕的是，它通常用于实现某种缓存。

这意味着以下内容：您的程序在一段时间内运行良好且性能良好，在压力下我们分配越来越多的内存（更多请求 = 更多内存压力 = 可能更多缓存条目），然后导致 GC。

现在突然间，当您的系统处于高压力下时，您不仅会获得 GC，而且还会丢失整个缓存，就在您最需要它的时候。这个问题不好玩，所以你至少必须使用一个合理大小的硬引用 LRU 缓存来缓解这个问题——你仍然可以使用weakrefs，但只是作为额外的帮助。

我已经看到不止一个项目受到该“错误”的影响。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T18:35:05.980

我见过的最“明确合理”的弱引用使用是 Guava's `Striped`，它执行锁条带化。基本上，如果当前没有线程持有对锁变量的引用，那么就没有理由保留该锁，是吗？那把锁过去可能已经使用过，但现在没有必要了。

如果我必须为您何时使用 which 给出一个规则，我会说当您将来*可能*使用某些东西时，软引用是更可取的，但如果您真的需要它可以重新计算它；当您可以确定在引用耗尽内存后永远不需要该值时，弱引用尤其可取。（例如，如果您对`equals(Object)`映射键类型的特定实现使用默认引用相等，并且该对象停止在其他任何地方引用，那么您*可以确定*该条目将永远不会被再次引用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T17:17:27.523

The main reason for me to use weak references is indirectly, through a WeakHashMap.

You might want to store a collection of objects in a Map (as a cache or for any other reason), but don't want them to be in memory for as long as the Map exists, especially if the objects are relatively large.

By using a WeakHashMap, you can make sure that the reference from the Map isn't the only thing keeping the object in memory, since it'll be garbage collected if no other references exist.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T17:15:14.923

假设只要一个对象被引用就需要保留一些信息，但你不知道它什么时候会消失，你可以使用弱引用来跟踪信息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-27T17:14:00.870

是的，它有很好的影响。

> *上面的“小部件序列号*”问题的例子，最简单的方法是使用内置`WeakHashMap`类。`WeakHashMap`工作原理完全一样`HashMap`，除了键（不是值！）是使用弱引用来引用的。如果一个`WeakHashMap`键变成垃圾，它的条目会被自动删除。这避免了我描述的陷阱，并且除了从 切换`HashMap`到`WeakHashMap`. 如果您遵循通过`Map`接口引用地图的标准约定，则无需其他代码甚至知道更改。

[参考](https://community.oracle.com/blogs/enicholas/2006/05/04/understanding-weak-references)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-08T14:14:55.347

JVM平台需要弱引用对象来确保防止内存泄漏。

正如 Java 开发人员应该知道的那样，Java 泄漏的可能性比预期的要多。在不再使用 Object 但某些集合仍然强烈引用该实例的情况下，此陈述尤其正确：一个非常简单但经常出现的内存泄漏示例，实际上在强引用存在之前不会释放内存区域。

在上述情况下，集合中的弱引用对象确保：没有强引用链，但只有弱链，实例可以被选为可收集的垃圾。

在我看来，Java 平台提供的所有功能在某种程度上都是有用的：非常熟练的程序员可以使 Java 变得快速可靠，就像 C++ 编写非常高质量的代码一样。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-27T17:24:47.897

需要使[Java 垃圾收集具有确定性](https://stackoverflow.com/questions/10039474/java-guaranteed-garbage-collection-using-jlibs)。（从略带讽刺的角度来看，有些道理）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-13T19:52:24.887

# 与 pub-sub 或事件总线解耦

`WeakReference`当您想让一个对象进行垃圾收集而不必从其他持有引用的对象中优雅地删除自己时，A是很好的选择。

在[发布-订阅](https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)或事件总线等场景中，会保存对订阅对象的引用集合。这些引用应该是弱引用，以便订阅者可以方便地超出范围而无需取消订阅。在应用程序中的所有其他地方都发布了他们的强引用之后，订阅者可以“消失”。到那时，订阅列表或事件总线就没有必要一直挂在订阅者身上了。的使用`WeakReference`允许对象继续被遗忘。

订阅对象可能已在其不知情的情况下被订阅，由其他一些第 3 方对象提交到发布订阅或事件总线。在订阅者的生命周期后期协调取消订阅的调用可能非常麻烦。因此，让订阅者在没有正式退订的情况下消失可能会大大简化您的代码，并且可以避免在退订协调失败时出现困难的错误。

这是一组线程安全的弱引用的示例，如[本答案](https://stackoverflow.com/a/52790092/642706)和[本答案所示](https://stackoverflow.com/a/52796430/642706)。

```
 this.subscribersSet =
            Collections.synchronizedSet(
                    Collections.newSetFromMap(
                            new WeakHashMap <>()
                    )
            ); 
```

请注意，直到垃圾收集实际执行之后，集合中的条目才真正被删除*，*如上面链接的答案中所述。虽然作为垃圾收集的候选者存在（在任何地方都没有剩余的强引用），但该项目仍保留在集合中。

# vb6 - 在 VB6 应用程序的某些分辨率/缩放级别上，标签标题不适合其坐标

> ID：11231567
> 
> 赞同：1
> 
> 时间：2012-06-27T17:09:03.587
> 
> 标签：vb6, screen-resolution, labels

我们的 VB6 应用程序始终使用 Twips。在某些具有异常分辨率（如 1360*768）或桌面缩放级别为 125% 或更高的系统上，标签的标题不适合 Width 和 Height 属性指定的框。这会产生非常难看的结果. 有人可以解释这里的利害关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:15:06.653

如果您想解决这些问题，您可以从阅读[用户界面 - 高 DPI 意识](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371771%28v=vs.85%29.aspx)和那里提供的链接资源开始。您将找到一个建议的过程来诊断和纠正您的程序可能遇到的几个问题。

专门为 VB6 开发编写的主题并不多。这意味着您必须进行一些概念翻译。

# javascript - 想要切换从 2 个不同的融合表生成的层

> ID：11231570
> 
> 赞同：0
> 
> 时间：2012-06-27T17:09:10.087
> 
> 标签：javascript, toggle, layer, google-fusion-tables

我有这个 JavaScript 代码。我想要地图上的 2 个按钮。1 将 layer_2 设为“ON”，其他将 layer_1 设为“ON”。单击任一按钮后，另一层应关闭。layer_1 也必须是默认的，并且应该在地图打开时显示。在任何情况下，这些层都不应重叠。

```
var map;
var layer_1;
var layer_2;
var tableid_1 = 3775630;
var tableid_2 = 4313734;
var queryUrlHead = 'http://www.google.com/fusiontables/api/query?sql=';
var queryUrlTail = '&jsonCallback=?';

function initialize(col_list, order_list) {
var latlng = new google.maps.LatLng(33.7071,-111.3024);

map = new google.maps.Map(document.getElementById('map_canvas'), {
    center: latlng,
    zoom: 7,
    mapTypeId: google.maps.MapTypeId.TERRAIN,
    mapTypeControl: true,
    mapTypeControlOptions: {
    style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
    position: google.maps.ControlPosition.TOP_LEFT
},
    scaleControl: true,
    scaleControlOptions: {
    position: google.maps.ControlPosition.BOTTOM_LEFT
},

});

var layer_2 = new google.maps.FusionTablesLayer(4313734);
layer_2.setMap(map);

var layer_1 = new google.maps.FusionTablesLayer(3775630);
layer_1.setMap(map);
layer_1.enableMapTips({
        select: "'Name'",
        from: tableid_1,
        geometryColumn: 'Location', 
        suppressMapTips: false, 
        delay: 50,
        tolerance: 5
});
    addListeners();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:20:27.390

在初始化函数中删除这一行：

```
layer_2.setMap(map); 
```

在初始化函数之外创建此函数。

```
function toggleLayer(this_layer){
        layer_1.setMap(null);
        layer_2.setMap(null);
        this_layer.setMap(map);
} 
```

创建一些按钮：

```
<input type="button" value="Turn on Layer 1" onClick="toogleLayer(layer_1);">
<input type="button" value="Turn on Layer 2" onClick="toogleLayer(layer_2);"> 
```

**更新：**一个真正的工具看起来像：

```
function toggleLayer(this_layer){
   if(this_layer.getMap(){
     this_layer.setMap(null);
   }else{
     this_layer.setMap(map);
   }
} 
```

# android - 实现个性化 Google 语音搜索的 Android SDK

> ID：11231571
> 
> 赞同：1
> 
> 时间：2012-06-27T17:09:11.903
> 
> 标签：android, speech-recognition

谷歌语音搜索最近推出了个性化语音配置文件的新功能，其中语音搜索将学习你的声音并变得更加准确。此功能是否仅在 Google 的语音搜索应用中提供？或者它是谷歌语音输入 API 的一部分，我可以在我自己的语音应用程序中使用 RecognizerIntent 或 SpeechRecognizer 类实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:44:39.823

该 API 已公开记录，因此很容易找到，请参见[此处](http://developer.android.com/reference/android/speech/package-summary.html)。您描述的内容不在 API 中（从 Android v4.1 开始）。

# c - 有没有一种简单的方法来创建一个在 Win32 SDK 中接受键盘输入的模态子窗口？

> ID：11231576
> 
> 赞同：0
> 
> 时间：2012-06-27T17:09:23.167
> 
> 标签：c, windows, winapi, keyboard, dialog

我现在正在编写一个 Win32 SDK 应用程序。我需要创建一个模态子窗口以从多个选项中进行选择。我的设计是：只需将它们显示在子窗口上，如果用户按下键 1，则选择第一个选项。其他选项相同。选择完成后，子窗口会自动关闭。

我的问题是，有没有一种简单的方法来创建这样一个子窗口？我找到了两种方法，都有一些无聊的步骤。

第一种方法是创建对话框资源并使用 DialogBox 函数。它可以轻松创建模态子窗口。但是由于它是一个模态对话框，系统已经过滤掉了所有的键盘消息。我需要使用一些特殊的技术，比如消息挂钩或其他东西，来获取这些消息。

第二种方式是注册一个类，直接调用CreateWindow(Ex)函数。它可以轻松地创建一个带有键盘消息的窗口。但似乎将其设置为模态对话框很无聊。我需要手动禁用父窗口，设置子窗口前景，为这个窗口创建一个完整的消息循环，并在父窗口销毁后手动启用它。

我已经寻找一种简单的方法来创建具有这两个功能的窗口。但是，除了上述两种方式之外，没有发现任何线索。我不确定这种方式是否存在。谁能告诉我？我感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:32:19.440

在我看来，使用 Win32 SDK 确实很复杂，尤其是在创建 GUI 时（通常即使创建一个简单的窗口也可能是一个挑战）。因此向您推荐以下内容：

1.  Microsoft 有一个非常简洁的 API，称为 MFC，它随 Visual Studio 一起提供（我不知道你是否可以在 Visual Studio 之外使用 MFC），并且它有几个包装 Windows SDK 方法的 C++ 类，让你的事情变得更容易。此外，Visual Studio 允许您使用拖放界面来创建您的 GUI（我觉得这非常有用）。

2.  您可以使用第三方 API 来创建您的 GUI 元素，例如 GTK 或 QT。两者都是用 C/C++ 编写的，都是非常好的 API。希望它们能让您在设计 GUI 时更轻松。

3.  如果您不需要使用 C/C++，那么我强烈建议您使用 Java 或 C# 等高级语言来开发您的应用程序。我认为用它们设计你的 GUI 应该比在 C/C++ 中做同样的事情要少得多。

# matplotlib - 使用 Py2exe 和 matplotlib 错误创建可执行文件

> ID：11231579
> 
> 赞同：1
> 
> 时间：2012-06-27T17:09:33.767
> 
> 标签：matplotlib, python-2.7, executable, py2exe, pyinstaller

我一直在搜索这个论坛和许多其他论坛，似乎找不到创建可执行文件的好方法。我尝试了几种不同的方法（py2exe、pyinstaller 和 cx_freeze），似乎都给了我某种错误。

当我尝试 pyinstaller 时，我收到“未安装 _imaging C 模块”的错误。我搜索的所有内容都表明它与 PIL 有关，但我的代码没有使用 PIL。

当我尝试 py2exe 时，我不断收到以下错误：

```
File "Scout_Tool.py", line 18, in <module>
File "matplotlib\pyplot.pyc", line 95, in <module>
File "matplotlib\backends\__init__.pyc", line 25, in pylab_setup
ImportError: No module named backend_qt4agg 
```

我不知道该怎么办。我的代码包含以下导入：

```
import os
import csv
import wx
import time
import math

from matplotlib.backends.backend_wx import FigureCanvasWx as FigureCanvas
from matplotlib.backends.backend_wx import NavigationToolbar2Wx
from matplotlib.pyplot import figure,show
from mpl_toolkits.basemap import Basemap
from matplotlib.figure import Figure
import matplotlib.pyplot as plt
from numpy.random import rand
from datetime import datetime
import wx.calendar as cal
import numpy as npy
from pylab import *
import numpy as np
import matplotlib
import adodbapi
import sqlparse
import pylab
import annote_new
import cPickle as pickle 
```

有人对如何使用 py2exe 构建可执行文件有任何建议吗？我尝试过的...

```
from distutils.core import setup 
import py2exe 
import matplotlib 

setup( 
    windows=[{'script': r'Scout_Tool.py'}], 

    data_files=matplotlib.get_py2exe_datafiles(), 

    options={
        r'py2exe': {
            r'includes': r'ElementConfig', 
            r'includes': r'ColorConv', 
            r'includes': r'Tkinter', 
            r'includes': r're', 
            r'includes': r'math', 
            r'includes': r'sys', 
            r'includes': r'matplotlib', 
            r'includes': r'mpl_toolkits',
            r'includes': r'matplotlib.backends.backend_wx',
            r'dll_excludes': [r'MSVCP90.dll'], 
        }
    }, 

) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:41:52.770

我不完全确定这会解决您的问题，但您应该从纠正错误的`options`字典条目开始。在 python 中，当你一遍又一遍地用相同的键定义字典时，你只会得到最后一个值。一个键只能存在一次：

```
options={
    r'py2exe': {
        r'includes': r'ElementConfig', 
        ...
        r'includes': r'mpl_toolkits',
        r'includes': r'matplotlib.backends.backend_wx',
        ...
    }
} 

print options
#{'py2exe': {'includes': 'matplotlib.backends.backend_wx'}} 
```

我怀疑这种用法的结果是 py2exe 没有真正找到您想要的任何包含。`includes`应该是一个列表：

```
options={
    'py2exe':{
        'includes': [
            'ElementConfig',
            'ColorConv',
            'Tkinter',
            're',
            'math',
            'sys',
            'matplotlib',
            'mpl_toolkits',
            'matplotlib.backends.backend_wx'
        ],
        'dll_excludes': ['MSVCP90.dll'], 
    }
}, 
```

如果在此之后，它仍然抱怨缺少后端，您可以添加另一个显式条目：

```
 'includes': [
            ...
            'matplotlib.backends.backend_qt4agg'
        ], 
```

# abap - 如何激活ABAP编辑器代码补全

> ID：11231585
> 
> 赞同：0
> 
> 时间：2012-06-27T17:09:49.660
> 
> 标签：abap, code-completion

我有关键字代码补全，但没有变量名、表字段、类方法之一。

我也想要那些东西，我听说这是可能的。这是否需要一些额外的工具，还是配置问题？

Thx，你们统治！

用于 gui 的 PS 版本 7.10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:59:25.550

这是版本的问题。对于那里的大多数版本，只有对代码完成的基本支持是可能的，因为编辑器无法“回调”到服务器以获取真正智能的东西所需的结构信息。您可以尝试激活[“建议文本中的非关键字”](http://help.sap.com/saphelp_tm80/helpdata/en/43/2ab10bb7380b1ae10000000a1553f6/frameset.htm)选项- YMMV。对于[真正酷的东西](http://help.sap.com/saphelp_nwpi71/helpdata/en/45/42cd853e4b5b3de10000000a1553f6/frameset.htm)，您需要 NetWeaver 2007 及更高版本。

# php - 没有括号的条件语句在哪里结束？

> ID：11231590
> 
> 赞同：1
> 
> 时间：2012-06-27T17:10:00.897
> 
> 标签：php, if-statement, conditional

假设我在函数中有一个不带括号的条件语句：

```
function get_user_id() 
{
    if ($something) $this->some_function($str);
    return array('user_id' => $user_id);
} 
```

我认为无括号语句是不好的做法......我想在 if 语句中添加括号，但语句在哪里结束？它是以第一个分号结尾还是函数结尾？

哪个是对的：

```
function get_user_id() 
{
    if ($something)
    {
       $this->some_function($str);
    }
    return array('user_id' => $user_id);
} 
```

或者..

```
function get_user_id() 
{
   if ($something)
   {
      $this->some_function($str);
      return array('user_id' => $user_id);
   }           
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:11:08.687

第一个版本是正确的，因为没有大括号，只有语句后面的**一个**`if`语句适用于该语句的条件`if`。

所以这：

```
if ($something) $this->some_function($str); 
```

相当于：

```
if ($something) {
    $this->some_function($str);
} 
```

我同意[手册](http://php.net/manual/en/control-structures.if.php)对此有点含糊，但它的示例是关于单个语句，并提到为了将其他行合并到相同的条件中，您需要一个“语句组”，用花括号表示：

> 通常，您希望有多个语句有条件地执行。相反，您可以将多个语句组合成一个语句组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:13:57.400

肯定第一个版本是正确的。查看文档中的示例：http: [//php.net/manual/en/control-structures.if.php](http://php.net/manual/en/control-structures.if.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:19:00.647

第一个是正确的。原因之一是如果条件为假，第二个不会返回任何数组，这不是一个好习惯。

```
 if ($something)
    {
       $this->some_function($str);
    }
 return array('user_id' => $user_id); 
```

为此，您需要额外的代码来使其具有容错性。

# asp.net-mvc-3 - 带有集合的 MVC3 模型创建新集合

> ID：11231592
> 
> 赞同：0
> 
> 时间：2012-06-27T17:10:05.537
> 
> 标签：asp.net-mvc-3, model-binding

我有一个模型，其中包含一个集合属性作为 List()。在我看来，每个 ChildModel 对象都通过它自己的编辑器模板呈现在表格行中。

在回发时，我的模型得到正确绑定，其中包含一个 ChildModels 列表，其中包含最初在视图中创建的项目的正确信息，但 ChildModel 的所有属性都是空的，除了单个 Editable 字段。

基于此，它似乎正在创建一个全新的对象集合，并且忘记了之前设置的所有值。

我已经尝试将其他子对象属性添加到隐藏字段，但对于我为其创建编辑控件的属性，我仍然获得所有属性的默认值（空值或零）。（文本框）。

关于如何为我的项目至少获得一个关键字段以便我可以简单地更新我现有的收藏有什么想法吗？

我发现我的隐藏字段值在回发的 Request.Form 中，其中包含 Quantity 值以及我放入隐藏字段中的值。我不确定为什么 FormValueProvider 不解析这些值。

# html - 这个简单的 HTML 代码有什么问题？

> ID：11231593
> 
> 赞同：1
> 
> 时间：2012-06-27T17:10:07.090
> 
> 标签：html, image, imagesource

我对 Web 开发完全陌生，仍然是一名学生。请回答这个极低级别的问题。

我有这个小的 HTML 代码：

```
<html>
<body>
<img scr="logo.jpg" alt"nextgen logo" width="370" height="100" />
<h1> NEXTZEN </h1>
<p> Welcome to NEXTZEN </p>
</body>
</html> 
```

将 logo.jpg 文件放在与 .html 文件完全相同的文件夹中，并给出确切的宽度和高度。

然而，当我打开 HTML 页面时，我根本看不到图像。怎么了？我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:11:53.740

简单的错字。`src`， 不是`scr`

```
<img src="logo.jpg" alt="nextgen logo" width="370" height="100" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:11:19.530

您需要在图像标签中更改`scr`为`src`，并添加一个 = 符号，正如 Florian 指出的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T17:13:51.020

```
<html>
    <body>
        <img src="logo.jpg" alt="nextgen logo" width="370" height="100" />
        <!-- fix src and add in the = on the alt tag !-->
        <h1> NEXTZEN </h1>
        <p> Welcome to NEXTZEN </p>
    </body>
</html> 
```

# php - 忽略特定的 WHERE 标准

> ID：11231597
> 
> 赞同：5
> 
> 时间：2012-06-27T17:10:21.547
> 
> 标签：php, mysql, pdo, where-clause

我想执行参数化查询以按用户提供的参数执行搜索。有很多参数，并不是所有的参数都会一直提供。如何进行标准查询来指定所有可能的参数，但如果用户没有选择有意义的参数值，则忽略其中一些参数？

这是一个假想的例子来说明我要做什么

```
$sql = 'SELECT * FROM people WHERE first_name = :first_name AND last_name = :last_name AND age = :age AND sex = :sex';
$query = $db->prepare($sql);
$query->execute(array(':first_name' => 'John', ':age' => '27'); 
```

显然，这是行不通的，因为提供的参数数量与预期参数的数量不匹配。我是否必须每次都只在 WHERE 子句中包含指定的参数来制作查询，或者有没有办法让其中一些参数被忽略或在检查时总是返回 true？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T17:12:21.853

```
SELECT * FROM people 
WHERE (first_name = :first_name or :first_name is null)
AND (last_name = :last_name or :last_name is null)
AND (age = :age or :age is null)
AND (sex = :sex or :sex is null) 
```

传递参数时，提供`null`您不需要的参数。

请注意，为了能够以这种方式运行查询，`emulation mode`必须打开 PDO`ON`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:17:11.647

首先，首先将您的`$sql`字符串更改为：

```
$sql = 'SELECT * FROM people WHERE 1 = 1'; 
```

这`WHERE 1 = 1`将允许您不包含任何其他参数...

接下来，有选择地将`$sql`任何具有有意义值的附加参数连接到您的字符串：

```
$sql .= ' AND first_name = :first_name'
$sql .= ' AND age = :age' 
```

您的`$sql`字符串现在只包含您计划提供的参数，因此您可以像以前一样继续：

```
$query = $db->prepare($sql);
$query->execute(array(':first_name' => 'John', ':age' => '27'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:14:09.807

如果您无法通过更改查询来解决问题...有几个库可以帮助组装查询。我过去使用`Zend_Db_Select`过，但每个框架都可能有类似的东西：

```
$select = new Zend_Db_Select;

$select->from('people');

if (!empty($lastName)) {
  $select->where('lastname = ?', $lastname);
}

$select->order('lastname desc')->limit(10);

echo $select; // SELECT * FROM people WHERE lastname = '...' ORDER BY lastname desc LIMIT 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T18:21:00.880

我已经测试了@juergen 给出的解决方案，但它给出了 PDOException，因为绑定变量的数量不匹配。无论没有参数，以下（不是那么优雅）代码都可以工作：

```
function searchPeople( $inputArr )
{
  $allowed = array(':first_name'=>'first_name', ':last_name'=>'last_name', ':age'=>'age', ':sex'=>'sex');

  $sql  = 'SELECT * FROM sf_guard_user WHERE 1 = 1';

  foreach($allowed AS $key => $val)
  {
      if( array_key_exists( $key, $inputArr ) ){
          $sql .= ' AND '. $val .' = '. $key;
      }
  }

  $query = $db->prepare( $sql );
  $query->execute( $inputArr );
  return $query->fetchAll();
} 
```

**用法：**

```
$result = searchPeople(array(':first_name' => 'John', ':age' => '27')); 
```

# git - Git，在添加/提交之前放弃修改过的文件

> ID：11231601
> 
> 赞同：1
> 
> 时间：2012-06-27T17:10:24.860
> 
> 标签：git

我对 Git 感到困惑！

我有一些文件之前已添加并提交到 master 分支。现在，我对一些文件进行了一些更改，但**在**添加和提交这些修改之前，我只想放弃我所做的一切，回到我之前的平静状态！

命令是什么？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:51:09.543

**警告！`git reset --hard`并且`git checkout -- some files`没有撤消！当心！**

最好的办法是把你认为不需要的东西藏起来

```
git stash -u 
```

（-u 将包括尚未跟踪的文件以及已跟踪的文件）。现在你回到了一个干净的状态。如果您*确实*有一些重要的东西并稍后意识到，您可以检查您的藏匿处以再次找到它。要让他们再次回来，你可以

```
git stash pop 
```

再次“擦除”它们

```
git stash -u 
```

不要在没有安全网的情况下做任何事情。

**要对文件的子集或部分文件执行此操作，您可以：**

```
git add -A && git stash save --patch 
```

不幸的是，补丁不适用于未跟踪的存储文件。

如果您所有的更改都只涉及跟踪的文件，或者您不关心未跟踪的文件，您可以跳过 git add 并执行以下操作：

```
git stash save --patch 
```

然后将提示您输入要存储的内容（有效地删除它）。这样，如果您愿意，您可以只重置某些更改 - 安全。

**任何被忽略的文件都保持不变。擦拭它们，**

```
git clean -xdf 
```

这是永久性的，因为它们被忽略了，所以备份它们并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:15:53.547

运行这个：

```
git clean -dfx
git reset --hard 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:12:00.510

如果文件在暂存区（您`git add`编辑了它们）：

```
git reset HEAD file1 file2
git checkout file1 file2 
```

如果他们在工作区域：

```
git checkout file1 file2 
```

我还建议看一下[Adam Dymitruk 的答案](https://stackoverflow.com/a/11232169/604041)（至少是第一部分）。他解释了如何在取消更改之前保存更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:13:07.223

目前还不清楚你想在这里做什么。如果你的目标是用一个新的提交替换你的最后一个提交，`git add`你想像往常一样更新的文件，然后`git commit --amend`. 这将创建一个新的提交，其父级是当前提交的父级。您也可以使用`git reset --soft HEAD^`后跟来完成此操作`git commit`。

# android - 将值传递给 Web 服务时应用程序崩溃

> ID：11231603
> 
> 赞同：-1
> 
> 时间：2012-06-27T17:10:46.410
> 
> 标签：android, eclipse, web-services, google-maps, crash

我是 android 编程新手，我编写了这段代码来解析可视屏幕以获取左上角和右下角坐标，然后将值传递给 web 服务，

```
http://hiscentral.cuahsi.org/webservices/hiscentral.asmx?op=GetSeriesCatalogForBox2 
```

现在，当我传递 xmin xmax ymin 和 ymax 的默认值时，应用程序工作正常，但是当我使用 MapView 函数获取角坐标然后将它们传递给 Web 服务时，应用程序崩溃。

如果您能帮我解决这个问题，我将非常感激，在此先感谢您

AndroidTest.java

```
public class AndroidTestActivity extends MapActivity 
{
/** Called when the activity is first created. */
ArrayList<String> arrlat_long = new ArrayList<String>();
ArrayList<String> arrlat_lat = new ArrayList<String>();
ArrayList<Double> pass= new ArrayList<Double>();
ArrayList<Double> d = new ArrayList<Double>();
private static final String ACTION_RECV_MSG = "com.imrankhanandroid.intent.action.RECEIVE_MESSAGE";  
private static final String ACTION_OTHER_MSG = "com.imrankhanandroid.intent.action.OTHER_MESSAGE"; 
MapView mapView;
private MessageReceiver receiver ; 
private MapController mapController;
double topLat;
double topLon;
double bottomLat;
double bottomLon;
double degree;
double minutes;
double seconds;
String strtest,strtest1,strtest2,strtest3;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapController = mapView.getController();
    mapController.setZoom(8);

    Projection proj = mapView.getProjection();  
    GeoPoint topLeft = proj.fromPixels(0, 0);
    GeoPoint bottomRight = proj.fromPixels(mapView.getWidth()-1, mapView.getHeight()-1);
    topLat = topLeft.getLatitudeE6()/1E6;
    topLon = topLeft.getLongitudeE6()/1E6;
    bottomLat = bottomRight.getLatitudeE6()/1E6;
    bottomLon = bottomRight.getLongitudeE6()/1E6;

    /*int n= ((int) (topLat*1E6));
    int n1= ((int) (topLon*1E6));
    int n2= ((int) (bottomLat*1E6));
    int n3= ((int) (bottomLon*1E6));*/

    d.add(topLat);
    d.add(topLon);
    d.add(bottomLat);
    d.add(bottomLon);

    for (int i=0; i<4 ; i++)
    {
        double value = d.get(i);    
        if (value <0)
        {
            value=value*-1;
            int y = (int) value;
            double rest= value - y;
            String min_sec = Double.toString(rest);
            String min = min_sec.substring(2,4);   /* minutes */
            String sec = min_sec.substring(4,6);   /* seconds */
            minutes = (Double.valueOf(min)) / 60;   /* minutes DD */
            seconds = Double.valueOf(sec) / 3600;  
            double value1= y + minutes + seconds;
            value1=value1*-1;
            pass.add(value1);
        }
        else
        {
                int y1 = (int) value;
                double rest1= value - y1;
                String min_sec1 = Double.toString(rest1);
                String min1 = min_sec1.substring(2,4);   /* minutes */
                String sec1 = min_sec1.substring(4,6);   /* seconds */
                minutes = (Double.valueOf(min1)) / 60;   /* minutes DD */
                seconds = Double.valueOf(sec1) / 3600;  
                double value1= y1 + minutes + seconds;
                pass.add(value1);
        }
    }

    double a= pass.get(0);
    double b= pass.get(1);
    double c= pass.get(2);
    double d= pass.get(3);

    strtest=Double.toString(a)+"/"+Double.toString(b)+"/"+Double.toString(c)+"/"+Double.toString(d);
    Log.d("strtest strtest", "strtest strtest = "+strtest);
    Intent msgIntent = new Intent(AndroidTestActivity.this,Intentservice.class); 
    msgIntent.putExtra("strtest", strtest);  //arrlat_long
    startService(msgIntent); 

    //Dynamic registration Receiver
    IntentFilter filter = new IntentFilter(ACTION_RECV_MSG);  
    filter.addCategory(Intent.CATEGORY_DEFAULT);  
    receiver = new MessageReceiver();  
    registerReceiver(receiver, filter);  
    IntentFilter filter2 = new IntentFilter(ACTION_OTHER_MSG);  
    filter2.addCategory(Intent.CATEGORY_DEFAULT);  
    receiver = new MessageReceiver();  
    registerReceiver(receiver, filter2);  
}  
  //Broadcast to receive 
public class MessageReceiver extends BroadcastReceiver 
{  
    @Override  
    public void onReceive(Context context, Intent intent) 
    {   
        arrlat_long = intent.getStringArrayListExtra("codnt");  
        arrlat_lat = intent.getStringArrayListExtra("codntlat");  
      // text.setText(message);      
    Toast.makeText(context, arrlat_long.get(0),Toast.LENGTH_SHORT).show();
    testoverlay();
    }  
}  
public void testoverlay()
{
for(int i=0;i<arrlat_long.size();i++)
   {

        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.mapmarker);
        HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);
        float lat = Float.parseFloat(arrlat_lat.get(i));
        float lng = Float.parseFloat(arrlat_long.get(i));
        GeoPoint point = new GeoPoint((int)(lat * 1E6), (int)(lng * 1E6));
        OverlayItem overlayitem = new OverlayItem(point, "", "");
        itemizedoverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedoverlay);

   }
 }
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

HelloItemizedOverlay.java

```
public class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem>
{
 private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
 private Context mContext;

 public HelloItemizedOverlay(Drawable defaultMarker, Context context)
 {
 super(boundCenterBottom(defaultMarker));
 mContext = context;
 }

 public void addOverlay(OverlayItem overlay)
 {
 mOverlays.add(overlay);
 populate();
 }
 @Override
 protected OverlayItem createItem(int i)
 {
 return mOverlays.get(i);
 }
 @Override
 public int size()
 {
 return mOverlays.size();
 }
 @Override
 protected boolean onTap(int index)
 {

 return true;
 }
} 
```

IntentService.java

```
public class Intentservice extends IntentService 
{
private static final String ACTION_RECV_MSG = "com.imrankhanandroid.intent.action.RECEIVE_MESSAGE";
private static final String ACTION_OTHER_MSG = "com.imrankhanandroid.intent.action.OTHER_MESSAGE"; 
ArrayList<String> arrlat_long = new ArrayList<String>();
ArrayList<String> arrlat_lat = new ArrayList<String>();
public static String str="";
public static String str1="";
int n=0;
String responseBody;
Integer topLat=0;
Integer topLon=0;
Integer bottomLat=0;
Integer bottomLon=0;
ArrayList<String> a= new ArrayList<String>();
ArrayList<String> b= new ArrayList<String>();
ArrayList<String> c= new ArrayList<String>();
ArrayList<String> d= new ArrayList<String>();
MapView mapView;
private MessageReceiver receiver;

public Intentservice()
{
    super("Intentservice");
    // TODO Auto-generated constructor stub
}

@Override
protected void onHandleIntent(Intent intent) 
{
    String strxmin,xmax,ymin,ymax;
    String str=intent.getExtras().getString("strtest");
    Log.d("onHandleIntent", "onHandleIntent onHandleIntent= "+str);
    String[] arrtelog=str.split("/");
     if(arrtelog.length >=3)
        {
          strxmin=arrtelog[0];
          xmax=arrtelog[1];
          ymin=arrtelog[2];
          ymax=arrtelog[3];

    // TODO Auto-generated method stub
          HttpClient httpclient = new DefaultHttpClient();   
     String Url = "http://hiscentral.cuahsi.org/webservices/hiscentral_1_1.asmx/GetSeriesCatalogForBox2";
     if(!Url.endsWith("?"))
     {
            Url += "?";
     }

     List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);   
     nameValuePairs.add(new BasicNameValuePair("xmin",ymax));
     nameValuePairs.add(new BasicNameValuePair("xmax", "-99"));
     nameValuePairs.add(new BasicNameValuePair("ymin", "40"));
     nameValuePairs.add(new BasicNameValuePair("ymax", "41"));
     nameValuePairs.add(new BasicNameValuePair("networkIDs", ""));
     nameValuePairs.add(new BasicNameValuePair("conceptKeyword", "precipitation"));
     nameValuePairs.add(new BasicNameValuePair("beginDate", "1/1/2009"));
     nameValuePairs.add(new BasicNameValuePair("endDate", "1/1/2010"));
     String paramString = URLEncodedUtils.format(nameValuePairs, "utf-8");
     Url += paramString;
     try 
        {
           HttpPost httppost = new HttpPost(Url); 
           httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
           HttpResponse response = httpclient.execute(httppost);
           responseBody = EntityUtils.toString(response.getEntity());
           XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
           factory.setValidating(false);
           XmlPullParser myxml = factory.newPullParser();
           InputStream raw = new ByteArrayInputStream(responseBody.getBytes());
           myxml.setInput(raw, null);
           int eventType = myxml.getEventType();

           while(eventType != XmlPullParser.END_DOCUMENT) 
           {
          if(eventType == XmlPullParser.START_DOCUMENT) 
             {

                 Log.d("ParseXmlActivity", "In start document");
             }
             else if(eventType == XmlPullParser.START_TAG) 
             {
                 if (myxml.getName().equals("latitude"))
                    {
                        str="";
                        str  =  myxml.nextText().toString();
                         Log.d("ParseXmlActivity", "In start tag = "+str);
                         arrlat_lat.add(str);
                    }
                    if (myxml.getName().equals("longitude"))
                    {
                        str = myxml.nextText().toString();
                         Log.d("ParseXmlActivity", "In start tag = "+str);
                         arrlat_long.add(str);
                    }

           }

           eventType = myxml.next();

   } }
   catch (XmlPullParserException e) 
   {
   } 
   catch (IOException e)
   {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     catch(IndexOutOfBoundsException e)
     {

     }
   //  IntentFilter filter = new IntentFilter(ACTION_RECV_MSG); 
   //  filter.addCategory(Intent.CATEGORY_DEFAULT);  
     //receiver = new MessageReceiver();  
  //   registerReceiver(receiver, filter); 

   Log.d("TEST TESTTEST", "In start TESTTEST = "+arrlat_long.get(0)+" $$$ "+arrlat_long.size());
   Intent broadcastIntent = new Intent();  
   broadcastIntent.setAction(ACTION_RECV_MSG);  
   broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);        
   broadcastIntent.putStringArrayListExtra("codnt", arrlat_long);  //arrlat_long
   broadcastIntent.putStringArrayListExtra("codntlat", arrlat_lat);  //arrlat_lat
   sendBroadcast(broadcastIntent);  
}
} 
```

}

这是日志猫，

```
07-02 20:32:59.362: E/AndroidRuntime(2372): FATAL EXCEPTION: IntentService[Intentservice]
07-02 20:32:59.362: E/AndroidRuntime(2372): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
07-02 20:32:59.362: E/AndroidRuntime(2372):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
07-02 20:32:59.362: E/AndroidRuntime(2372):     at java.util.ArrayList.get(ArrayList.java:304)
07-02 20:32:59.362: E/AndroidRuntime(2372):     at com.imrankhanandroid.Androidtest.Intentservice.onHandleIntent(Intentservice.java:159)
07-02 20:32:59.362: E/AndroidRuntime(2372):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
07-02 20:32:59.362: E/AndroidRuntime(2372):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-02 20:32:59.362: E/AndroidRuntime(2372):     at android.os.Looper.loop(Looper.java:137)
07-02 20:32:59.362: E/AndroidRuntime(2372):     at android.os.HandlerThread.run(HandlerThread.java:60)
07-02 20:32:59.542: D/dalvikvm(2372): GC_CONCURRENT freed 152K, 3% free 10152K/10375K, paused 5ms+23ms
07-02 20:33:00.702: E/ActivityThread(2372): Activity com.imrankhanandroid.Androidtest.AndroidTestActivity has leaked IntentReceiver com.imrankhanandroid.Androidtest.AndroidTestActivity$MessageReceiver@412a0378 that was originally registered here. Are you missing a call to unregisterReceiver()?
07-02 20:33:00.702: E/ActivityThread(2372): android.app.IntentReceiverLeaked: Activity com.imrankhanandroid.Androidtest.AndroidTestActivity has leaked IntentReceiver com.imrankhanandroid.Androidtest.AndroidTestActivity$MessageReceiver@412a0378 that was originally registered here. Are you missing a call to unregisterReceiver()?
07-02 20:33:00.702: E/ActivityThread(2372):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:763)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:567)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1043)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1030)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1024)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:341)
07-02 20:33:00.702: E/ActivityThread(2372):     at com.imrankhanandroid.Androidtest.AndroidTestActivity.onCreate(AndroidTestActivity.java:130)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.app.Activity.performCreate(Activity.java:4465)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.os.Looper.loop(Looper.java:137)
07-02 20:33:00.702: E/ActivityThread(2372):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-02 20:33:00.702: E/ActivityThread(2372):     at java.lang.reflect.Method.invokeNative(Native Method)
07-02 20:33:00.702: E/ActivityThread(2372):     at java.lang.reflect.Method.invoke(Method.java:511)
07-02 20:33:00.702: E/ActivityThread(2372):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-02 20:33:00.702: E/ActivityThread(2372):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-02 20:33:00.702: E/ActivityThread(2372):     at dalvik.system.NativeStart.main(Native Method)
07-02 20:33:00.852: E/ActivityThread(2372): Activity com.imrankhanandroid.Androidtest.AndroidTestActivity has leaked IntentReceiver com.imrankhanandroid.Androidtest.AndroidTestActivity$MessageReceiver@412a62d8 that was originally registered here. Are you missing a call to unregisterReceiver()?
07-02 20:33:00.852: E/ActivityThread(2372): android.app.IntentReceiverLeaked: Activity com.imrankhanandroid.Androidtest.AndroidTestActivity has leaked IntentReceiver com.imrankhanandroid.Androidtest.AndroidTestActivity$MessageReceiver@412a62d8 that was originally registered here. Are you missing a call to unregisterReceiver()?
07-02 20:33:00.852: E/ActivityThread(2372):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:763)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:567)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1043)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1030)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1024)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:341)
07-02 20:33:00.852: E/ActivityThread(2372):     at com.imrankhanandroid.Androidtest.AndroidTestActivity.onCreate(AndroidTestActivity.java:126)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.app.Activity.performCreate(Activity.java:4465)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.os.Looper.loop(Looper.java:137)
07-02 20:33:00.852: E/ActivityThread(2372):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-02 20:33:00.852: E/ActivityThread(2372):     at java.lang.reflect.Method.invokeNative(Native Method)
07-02 20:33:00.852: E/ActivityThread(2372):     at java.lang.reflect.Method.invoke(Method.java:511)
07-02 20:33:00.852: E/ActivityThread(2372):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-02 20:33:00.852: E/ActivityThread(2372):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-02 20:33:00.852: E/ActivityThread(2372):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:04:16.510

您在此处检查数组的大小：

```
if(arrtelog.length >=3) 
```

在这个 if 的（几乎不可见的）右括号之后，你调用你的`Log.d`语句。

问题是，`arrlat_long`如果您的变量 >= 3，则仅填充 ArrayList `arrtelog`，因此在它不再长的情况下，您不填充 ArrayList。空列表中的 a`get(0)`是不可能的，并且会导致 LogCat 中出现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:59:20.690

利用

```
String k = topLat.toString(); 
```

代替

```
String k = String.valueOf(topLat); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:19:40.497

```
int eventType = myxml.getEventType(); 
```

try:

```
int eventType = Integer.parseInt(myxml.getEventType()); 
```

# mercurial - 如何追溯创建分支

> ID：11231605
> 
> 赞同：0
> 
> 时间：2012-06-27T17:10:49.927
> 
> 标签：mercurial

现在很多人可能认为我把问题复杂化了或者完全失去了情节，但是

我们去年采用了 Mercurial，并将我们所有的流程都转移了过来。我想让这个尽可能干净，而不是担心以前的事情是怎么做的。

我们有多个项目同时在不同的版本上工作，我必须为 Mercurial 找到对这些项目影响最小的采用途径，然后分阶段让人们摆脱 PVCS。

一切都很好，但我有一个小问题要处理，即应用于 PVCS 的支持工作，我需要合并回 Mercurial。

我没有先见之明来创建我需要的每个分支，但我现在想创建一些分支。

我想保存存储在 Mercurial 中 PVCS 中的代码的快照，方法是将其放在一个分支中，但我没有父分支将其应用到 .

所以我有分支“版本 5”，这是基于修订版“0”，我现在如何创建分支“版本 3”，然后可能是分支“版本 2”或“版本 4”，同时显示祖先并不是绝望重要的是它会很好。

# php - 列出目录中的图像（01.png）和描述（01.txt）

> ID：11231610
> 
> 赞同：2
> 
> 时间：2012-06-27T17:11:08.850
> 
> 标签：php, image, directory-listing

如何显示目录中的图像并获得每个图像的相应描述，给出描述存在。

在目录中 //

```
01.png
01.txt
02.png 
03.png 
03.txt 
etc. 
```

显示为 //

```
<img src="01.png"><br>This is the description from the text file named 01.txt
<img src="02.png"><br>
<img src="03.png"><br>This is the description from the text file named 03.txt 
```

我一直在搜索和搜索，但找不到任何东西，所以如果有人能指出我正确的方向，将不胜感激。对于想要创建非常简单的画廊或图像和名称列表的人来说，这也是一件非常有用的事情。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:23:54.373

这就是您要查找的内容，因为必须从相应的`.txt`文件中动态捕获描述：

```
$dir = './';
$files = glob( $dir . '*.png');
foreach( $files as $file) {
    $filename = pathinfo( $file, PATHINFO_FILENAME) . '.txt';
    $description = file_exists( $filename) ? file_get_contents( $filename) : '';
    echo '<img src="' . $file . '"><br>' . $description;
} 
```

它的作用是从给定目录 ( )中获取`*.png`文件数组。然后，对于每个图像，它会获取图像的文件名（因此会是），并附加以获取描述文件的名称。然后，如果描述文件存在，它将描述文件加载到变量中。然后它输出所需的 HTML。[`glob()`](http://php.net/glob)`$dir``01.png``01``.txt``$description`[`file_get_contents()`](http://php.net/file_get_contents)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:25:35.247

我假设您的 .php 文件与图片和文本文件位于同一目录中。

您可以使用函数`glob()`从目录中读取所有图像文件作为数组，切断文件扩展名（因此“01.png”变为“01”）并使用字符串连接附加文件扩展名。

一个工作代码示例可能如下所示：

```
<?php
    $path_to_directory = './';
    $pics = glob($path_to_directory . '*.png');
    foreach($pics as $pic)
    {
        $pic = basename($pic, '.png'); // remove file extension
        echo '<img src=\"{$pic}.png\"><br>'; 
        if(file_exists($pic . '.txt'))
        {
            echo file_get_contents("{$pic}.txt");
        }
    }

?> 
```

所以一定要看看这些功能：

*   [http://www.php.net/glob](http://www.php.net/glob)
*   [http://www.php.net/basename](http://www.php.net/basename)
*   [http://www.php.net/file_get_contents](http://www.php.net/file_get_contents)

快乐编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:18:24.143

Your question is a bit confusing.

make an array with all information.

```
$pics = array('img' => '01.png', 'text' => 'This is the description');

foreach($pics as $pic) {
    echo '<img src="'.$pic['name'].'" alt="">' . $pic['text'];
} 
```

So you have to put your information in an array or a database otherwise you cannot map the desciption to your image.

When you want to read dynamicly the folder its a bit difficult.

You can look at [readdir](http://php.net/manual/de/function.readdir.php) or [glob](http://de2.php.net/manual/de/function.glob.php) then you can read all images get the name and load the textfile with [file_get_contents](http://de2.php.net/manual/de/function.file-get-contents.php) but i think its not a really performant way.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:24:41.013

更新版本的 ZnArKs 代码，因为他错过了您想要文件的内容

```
//path to directory to scan
$directory = "../images/team/harry/";

//get all image files with a .jpg extension.
$images = glob($directory . "*.png");

//print each file name
foreach($images as $image)
{
    $textfile = substr($image, 0, -3) . "txt";

    echo "<img src='{$image}'><br/>";

    if(file_exists($textfile))
    {
       echo file_get_contents($textfile) . "<br/>";
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T17:19:23.737

Code Modified from here : [http://php.net/manual/en/function.readdir.php](http://php.net/manual/en/function.readdir.php)

```
//path to directory to scan
$directory = "../images/team/harry/";

//get all image files with a .jpg extension.
$images = glob($directory . "*.jpg");

//print each file name
foreach($images as $image)
{
    print "<img src=\"$image\"><br>This is the description from the text file named $image";
} 
```

**ok, so this won't print the contents of the text file, but I'm sure you can further modify the code above to figure that out**

YEP

# c# - 如何让 Dapper 将 .net datetime 映射到 datetime2？

> ID：11231614
> 
> 赞同：26
> 
> 时间：2012-06-27T17:11:25.817
> 
> 标签：c#, dapper

很简单，我正在将我们现有的系统从 EF 转换为 Dapper。由于各种公司原因，我们无法真正更改数据库，一些表的列的类型为 DateTime2。Dapper 将任何 .net DateTime 转换为 DbType.DateTime。

之前一定有人遇到过这个问题并找到了一个简单的解决方案？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2015-12-01T21:50:51.677

现在在[类似的问题](https://stackoverflow.com/a/26282604/2503659 "类似的问题")中有一个更简单的解决方案：

```
SqlMapper.AddTypeMap(typeof(DateTime), System.Data.DbType.DateTime2); 
```

这必须在's*之前应用。* `INSERT`谢谢，@Igand。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-27T17:22:48.403

Dapper 从字面上看是您包含在代码库中的[单个文件。](http://code.google.com/p/dapper-dot-net/source/browse/Dapper/SqlMapper.cs)只需编辑文件：

替换（大约第 300 行）：

```
 typeMap[typeof(Guid)] = DbType.Guid;
        typeMap[typeof(DateTime)] = DbType.DateTime;
        typeMap[typeof(DateTimeOffset)] = DbType.DateTimeOffset;
        typeMap[typeof(byte[])] = DbType.Binary; 
```

和：

```
 typeMap[typeof(Guid)] = DbType.Guid;
        typeMap[typeof(DateTime)] = DbType.DateTime2;
        typeMap[typeof(DateTimeOffset)] = DbType.DateTimeOffset;
        typeMap[typeof(byte[])] = DbType.Binary; 
```

**编辑：**
还有一个可以为空的 DateTime 在该映射块的下方，在第 319 行附近：

```
 typeMap[typeof(DateTime?)] = DbType.DateTime;
        typeMap[typeof(DateTimeOffset?)] = DbType.DateTimeOffset; 
```

到：

```
 typeMap[typeof(DateTime?)] = DbType.DateTime2;
        typeMap[typeof(DateTimeOffset?)] = DbType.DateTimeOffset; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-11T23:59:12.020

对于具有时区感知的日期和时间数据。

```
SqlMapper.AddTypeMap(typeof(DateTime), System.Data.DbType.DateTimeOffset); 
```

我不知道为什么当我尝试使用 Datetime2 时，我仍然不断丢失毫秒。此 DateTimeOffset 类型也是 Datetime2。

日期值范围是从公元 1 月 1 日到 9999 年 12 月 31 日。时间值范围是 00:00:00 到 23:59:59.9999999，精度为 100 纳秒。时区值范围是 -14:00 到 +14:00。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-06T14:30:57.677

提供的解决方案将全局映射类型，因为映射列表是静态的。

要为单个命令创建参数列表，更好的方法是使用`DynamicParameters`类。

```
var parameters = new DynamicParameters(template);
parameters.Add("@DateTimeParam", dateTimeValue, DbType.DateTime2);

await connection.ExecuteAsync(sql, parameters); 
```

Where`template`可以是任何对象（包括之前使用的参数）。这些`template`属性将与添加的参数合并。

# scala - Scala检查数组中是否存在键

> ID：11231615
> 
> 赞同：-1
> 
> 时间：2012-06-27T17:11:27.347
> 
> 标签：scala, playframework

这是我的代码：

```
package controllers

import play.api._
import play.api.mvc._
import play.api.data.Form
import play.api.data.Forms.tuple
import play.api.data.Forms.text

object Application extends Controller {

def index = Action {
  Ok(views.html.index("Your new application is ready."))
}

val form = Form(
tuple(
  "name" -> text,
  "address" -> text,
  "x_card_num" -> text
 )
)

def payment = Action { implicit request =>
  def values = form.bindFromRequest.data
  def name = values("name")

  //val card_num = ""
  //values.isDefinedAt("x_card_num")
  if (values.get("x_card_num") == None)       {
      val card_num = "test"
  }   else    {
    //def card_num = values("x_card_num")
    val card_num = "test2"
}

//val card_num = "test"
Ok(views.html.payment("testing",name,card_num))
}

} 
```

它不起作用。它只是为了完全跳过 if (values.get("x_card_num") == None) 和 else 语句，并且 card_num 最终为空字符串，如 if else 语句之前定义的那样。

为什么它会完全忽略 if else 语句？

以及如何检查数组“值”中是否存在键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:19:45.303

The problem here is that you are *shadowing* the outer scope. That is, you are declaring **more than one** value called `card_num`.

```
if (values.get("x_card_num") == None) {     
   val card_num = "test"   
// ^^^
// this is a new variable declaration in a different scope
} 
else  
  val card_num = "test2" 
```

In scala, *everything is an expression*, so you can simply do this:

```
val card_num = if (values.get("x_card_num") == None)  "test" else { ... } 
```

That is, the *if-block* itself evaluates to a value (as long as there is an `else`)

the other option is to use *variables* as opposed to *values*, but this is not idiomatic (you should avoid `var`s):

```
var card_num = null
if ( .. ) 
   card_num = "test"
// ^^^
// Notice no val or var here 
```

* * *

You could use `isDefinedAt` to simplify the test

```
val cardNum = if (values isDefinedAt "x_card_num") "test2" else "test" 
```

# actionscript - .as 1046：找不到类型...：ResultEvent 和 FaultEvent

> ID：11231618
> 
> 赞同：1
> 
> 时间：2012-06-27T17:11:34.553
> 
> 标签：actionscript, flash-cs5

```
import mx.rpc.soap.*;
import mx.rpc.AbstractOperation;
import mx.rpc.events.FaultEvent;
import mx.rpc.events.ResultEvent;

public class MainDocument extends MovieClip {

    something.addEventListener(FaultEvent.FAULT, DisplayError);

    somethingElse.addEventListener(ResultEvent.RESULT, ParseGameSources);

    function DisplayError(evt:FaultEvent):void{
       //do something
    }

    function ParseGameSources(evt:ResultEvent):void{
       //do something
    }
} 
```

我有 6 个使用 ResultEvent 或 FaultEvent 的函数，如上面的 2 个，它们都收到错误“1046：找不到类型或不是编译时常量：结果{或故障}事件。”

我遇到的每个答案都只是说要导入，我已经在导入。

这是在 CS5.5 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T16:04:31.960

我可以在 Adob​​e Flash CS6 中使用以下方法解决此问题：

文件 > 发布设置 >（脚本：Actionscript 3.0）“扳手图标”> 库路径选项卡 > 单击“+”（加号）图标以添加新项目。> 单击（文件夹图标）以浏览到路径 >

然后添加这个路径：

Program Files\Adobe\Adobe Flash Builder 4.7（64 位）\sdks\4.6.0\frameworks\libs

这将使您的 swf 文件大小增加约 150kb，但现在您可以编译了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:18:32.950

[ResultEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/events/ResultEvent.html)/[FaultEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/events/FaultEvent.html) are Flex classes, not base Flash classes. In order to use them, you'll need to be using the Flex framework.

If you follow the provided links, Adobe's language reference tells you:

> Language Version: ActionScript 3.0
> Product Version: **Flex 3**
> Runtime Versions: Flash Player 9, AIR 1.1

* * *

[This Adobe reference on Flash projects](http://help.adobe.com/en_US/flash/cs/using/WSd60f23110762d6b883b18f10cb1fe1af6-7effa.html) should point you in the right direction for using Flex SDK classes in Flash CS5\. (look aaaaaaall the way down at the bottom)

# javascript - webGL 是否包含 push/popMatrix？

> ID：11231619
> 
> 赞同：7
> 
> 时间：2012-06-27T17:11:43.000
> 
> 标签：javascript, opengl-es, webgl

webGL 是否包含 push/popMatrix？如果没有，我将如何重新创建它们？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T17:19:04.060

不，WebGL 基于 OpenGL ES 2.0，因此没有内置矩阵管理或固定功能管道。模型视图和投影矩阵需要在您自己的代码中完全管理，并在绘制时传递给着色器。如果您使用场景图或其他类似的场景管理系统，您真的不需要推送和弹出矩阵。您真正需要的是一个好的矩阵和向量数学库。

如果您仍然设置使用 push 和 pop 矩阵，您可以简单地使用矩阵数组，并编写 push 和 pop 之类的函数，只需将当前矩阵保存到数组中并向下推送或弹出索引。

如果您在过渡到 WebGL 方面需要更多帮助，我会得到 OpenGL ES 2.0 编程指南。本书的网站：http: [//opengles-book.com/](http://opengles-book.com/)包含一些源代码的下载链接，其中包含适用于各种平台和语言（包括 WebGL）的演示。如果您需要，它还包含一个不错的数学库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:24:13.793

从我[在这里](https://developer.mozilla.org/en/WebGL/Animating_objects_with_WebGL#More_matrix_operations)和[那里](http://learningwebgl.com/blog/?p=239)看到的情况来看，没有本机支持，但您可以轻松地使用 Array 构建这样的堆栈。

# mvvm - MvvmCross Monotouch C# - 绑定 Int 属性 - 模式：TwoWay

> ID：11231624
> 
> 赞同：3
> 
> 时间：2012-06-27T17:12:00.460
> 
> 标签：mvvm, xamarin.ios, mvvmcross

我是 MvvmCross 的新手，我有一个问题。

我注意到以下绑定代码仅以一种方式工作：

```
{ this, "{'CurrentIndex':{'Path':'CurrentIndex','Mode':'TwoWay'}}" } 
```

*   CurrentIndex 是视图中的 Int 属性
*   CurrentIndex 也是 ViewModel 中的一个 Int 属性

这种方法有效！

*   视图模型 => 视图

但不是这样！

*   视图 => 视图模型

我有一组 ViewController，我的目标是为 viewModel 中的 CurrentIndex 调用 DeleteCommand。

然而，

> “Android 和 Touch 2 方式绑定不完整”

参考：[MvvmCross 经验、事后诸葛亮、局限性？](https://stackoverflow.com/questions/10224376/mvvmcross-experiences-hindsight-limitations)

我的猜测是 TwoWay 模式仅适用于控件（UILabel，UITextfield，...），但不适用于属性。

那么，有没有一种好方法可以让它在这两种方式下都起作用？或者我的问题有其他选择吗？

帕特里克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:00:37.367

为了让绑定在 View 和 ViewModel 之间传输任何值，它需要在值更改时挂钩到某个事件。

在 ViewModel 中，此事件始终是 INotifyProperty 接口中的事件。

在视图/活动中，使用了一个单一的模式——因此每个绑定都必须挂钩到一个单独的事件中。例如，EditText 上的 Text 使用 TextChanged 事件（参见[MvxEditTextTextTextTargetBinding.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross.Binding/Android/Target/MvxEditTextTextTargetBinding.cs)）连接，而 SeekBar 中的值使用 Listener 对象而不是事件连接（参见[MvxSeekBarProgressTargetBinging.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross.Binding/Android/Target/MvxSeekBarProgressTargetBinging.cs)）。

因此，如果您想为您的活动实现这种双向绑定，那么您可以通过以下方式执行此操作：

*   在您的活动 (MyActivity) 中声明一个事件 - CurrentIndexChanged - 只要 CurrentIndex 更改就会触发
*   为您的 MyActivity 声明一个自定义绑定，它以编程方式链接 CurrentIndex 和 CurrentIndexChanged
*   在安装过程中将自定义绑定添加到绑定注册表

例如，您的活动可能包括：

```
public event EventHandler CurrentIndexChanged;

private int _currentIndex;
public int CurrentIndex
{ 
   get { return _currentIndex; } 
   set { _currentIndex = value; if (CurrentIndexChanged != null) CurrentIndexChanged(this, EventArgs.Empty); } 
} 
```

然后你可以声明一个绑定类，如：

```
public class MyBinding : MvxPropertyInfoTargetBinding<MyActivity>
{        
    public MyBinding (object target, PropertyInfo targetPropertyInfo) 
        : base(target, targetPropertyInfo)
    {
        View.CurrentIndexChanged += OnCurrentIndexChanged;
    }

    public override MvxBindingMode DefaultMode
    {
        get
        {
            return MvxBindingMode.TwoWay;
        }
    }

    private void OnCurrentIndexChanged(object sender, EventArgs ignored)
    {
        FireValueChanged(View.CurrentIndex);
    }

    protected override void Dispose(bool isDisposing)
    {
        base.Dispose(isDisposing);
        if (isDisposing)
        {
            View.CurrentIndexChanged -= OnCurrentIndexChanged;
        }
    }
} 
```

您需要在设置中告诉绑定系统有关此绑定的信息，例如：

```
 registry.RegisterFactory(new MvxSimplePropertyInfoTargetBindingFactory(typeof(MyBinding), typeof(MyActivity), "CurrentIndex")); 
```

* * *

但是...在实际层面上，如果您使用 C# 而不是 XML 进行操作，那么在这种情况下使用 C# 来简单地更新 ViewModel 而不是在这种情况下使用声明性绑定可能会更好。

要清楚......在这种情况下，我很可能只是将 Activity 属性写为：

```
public int CurrentIndex
{ 
   get { return _currentIndex; } 
   set { _currentIndex = value; ViewModel.CurrentIndex = value; } 
} 
```

或者......我会考虑在 Activity 中根本没有这个属性。

* * *

如果有帮助，还有更多关于自定义绑定的信息：

*   [MonoTouch MVVMCross 绑定到实例变量](https://stackoverflow.com/questions/10929779/monotouch-mvvmcross-binding-to-instance-variables)
*   [在 MvvmCross 我如何做自定义绑定属性](https://stackoverflow.com/questions/10700445/in-mvvmcross-how-do-i-do-custom-bind-properties)

* * *

希望这可以帮助！恕我直言，当您使用 XML 时，绑定可以帮助您 - 您不必使用它们...

斯图尔特

* * *

**更新**如果您要执行很多这些操作并遵循相同的名称模式 - 使用名为*X的属性和名为**XChanged*的​​已更改 EventHandler 事件，那么这样的事情可能会起作用 - 它使用反射自动查找事件：

```
public class MyBinding<T> : MvxPropertyInfoTargetBinding<T>
    where T : class
{
    private readonly PropertyInfo _propertyInfo;
    private readonly EventInfo _eventInfo;

    public MyBinding(object target, PropertyInfo targetPropertyInfo)
        : base(target, targetPropertyInfo)
    {
        _propertyInfo = targetPropertyInfo;
        var eventName = _propertyInfo.Name + "Changed";
        _eventInfo = View.GetType().GetEvent(eventName);
        if (_eventInfo == null)
        {
            throw new MvxException("Event missing " + eventName);
        }

        if (_eventInfo.EventHandlerType != typeof(EventHandler))
        {
            throw new MvxException("Event type mismatch for " + eventName);
        }

        var addMethod = _eventInfo.GetAddMethod();
        addMethod.Invoke(View, new object[] { new EventHandler(OnChanged) });
    }

    public override MvxBindingMode DefaultMode
    {
        get
        {
            return MvxBindingMode.TwoWay;
        }
    }

    private void OnChanged(object sender, EventArgs ignored)
    {
        var value = _propertyInfo.GetValue(View, null);
        FireValueChanged(value);
    }

    protected override void Dispose(bool isDisposing)
    {
        base.Dispose(isDisposing);
        if (isDisposing)
        {
            var removeMethod = _eventInfo.GetRemoveMethod();
            removeMethod.Invoke(View, new object[] { new EventHandler(OnChanged) });
        }
    }
} 
```

# qt - 将新记录插入 QSqlTableModel 期间的默认 DB 值

> ID：11231632
> 
> 赞同：0
> 
> 时间：2012-06-27T17:12:27.900
> 
> 标签：qt, qsqltablemodel

如何针对 DB 的默认值向 QSqlTableModel 插入新记录？UPD：我正在尝试调用`pTableModel->insertRecord(0, pTableModel->record(0));` or `pTableModel->insertRecord(0, pTableModel->record());` or `pTableModel->insertRecord(QSqlDatabase::database().record("tableName"));` or`pTableModel->insertRow(0);`

结果相同，所有字段都是NULL而不是DB的默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:07:38.747

您在第 0 行插入的事实可能是一个问题。当我尝试这样做时，当我稍后在第 1 行请求记录时*（*`insertRecord(0, ...)`在调用 另外，你打电话`pTableModel->submit()`还是`pTableModel->submitAll()`？如果没有，您的记录将永远不会提交到数据库。

这段代码对我有用：

```
QSqlRecord  rec( pTableModel->record() );

// Insert at end of table
pTableModel->insertRecord( -1, rec );
pTableModel->submitAll(); 
// Or, pTableModel->submit(), depending on the model's edit strategy

// Grab the last row.  It should be the one just inserted.
QSqlRecord  writtenRec( pTableModel->record( pTableModel->rowCount() - 1 ) ); 
```

# handlebars.js - 在模板中显示 Handlebars.js 上下文

> ID：11231633
> 
> 赞同：7
> 
> 时间：2012-06-27T17:12:29.800
> 
> 标签：handlebars.js

是否有一个变量传递到每个 handlebar.js 模板中，其中包含模板可访问的所有上下文内容？

例如，我正在创建一个模板，但我不知道模板可访问的所有上下文内容。我希望能够在模板中输入`{{ debug }}`，handlebars.js 会将所有上下文内容吐出到 HTML

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-11-01T08:03:50.313

您可以使用以下代码来遍历`this`对象：

```
{{#each this}}
  {{@key}}: {{this}}
{{/each}} 
```

`@root`或通过对象迭代的类似代码：

```
{{#each @root}}
  {{@key}}: {{this}}
{{/each}} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-03T14:10:04.433

Handlebars 有内置的 helper `log`。

您只需将[日志记录级别](https://github.com/wycats/handlebars.js/blob/7172d167ddf9cbf1e8a0aae48970da42107e9e59/lib/handlebars/base.js#L205)设置为**DEBUG**。

```
Handlebars.logger.level = 0; 
```

然后使用助手：

```
{{log this}} 
```

编辑：对不起，这不会将上下文写入*HTML*，助手使用*console.log*。要输出到 HTML，您需要编写将使用例如[JSON.stringify](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)的自定义帮助程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-02T11:25:24.020

尽管这个问题有些陈旧，但有人可能会觉得这很有用。您可以将车把当前上下文转储为纯文本；

```
{{{.}}} 
```

# listview - 如何自定义 Metro 风格 ListView 滚动条

> ID：11231635
> 
> 赞同：1
> 
> 时间：2012-06-27T17:12:37.133
> 
> 标签：listview, windows-8, microsoft-metro, winjs

我的Metro Style App中有一个`ListView`控件。`Javascript`当操作系统检测到您正在使用触摸时，它会显示一个非常细的滚动条。当操作系统检测到您正在使用鼠标时，它将显示一个粗滚动条。

我的问题是，有什么方法可以自定义、设置样式或隐藏列表视图中的滚动条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:17:28.527

目前这是不可能的，但它可能会在未来的版本中出现。

如果你真的需要你可以使用这样的东西：[http ://www.myjqueryplugins.com/jScrollbar/](http://www.myjqueryplugins.com/jScrollbar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:35:35.203

我相信你可以： http: [//msdn.microsoft.com/en-us/library/windows/apps/hh996962.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh996962.aspx)有很多用于设置滚动条样式的选项。

# iphone - UIApplication 中的内存泄漏

> ID：11231637
> 
> 赞同：0
> 
> 时间：2012-06-27T17:12:44.307
> 
> 标签：iphone

获取内存泄漏对象**NSDate**和负责库是 UIKit 负责框架是**UIApplication:sendAction:to:from:forEvent:**为什么会这样。我该如何解决这个内存泄漏。我根本没有使用界面生成器。一切都以编程方式完成

```
Event Type  Responsible Library Responsible Caller
Malloc      UIKit                   [UIApplication sendAction:to:from:forEvent:]
Autorelease UIKit                   [UIApplication sendAction:to:from:forEvent:]
Retain      UIKit                   [UIApplication sendAction:to:from:forEvent:]
Release     Foundation           [NSAutoreleasePool release] 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:20:34.823

如果 Instruments 说负责的库是 UIKit，请不要介意。这仅意味着内存的实际分配是在 UIKit 内部完成的，但我几乎可以肯定泄漏的责任在您的代码中。这几乎是我对 Instruments/Xcode 发现的内存泄漏的经验，负责任的库是 SDK 框架。

我的建议是检查您分配的 NSDate 并确保它们都已发布。有时，泄漏的对象仅与 Instruments 报告的类型间接相关。

最后，发现泄漏原因的最有效方法是检查仪器向您显示泄漏时执行的代码（您使用的是哪个视图？哪个任务？等等）

恐怕没有看到你的代码，就不能说更精确了。

编辑：

查看您的代码，我建议您检查执行时会发生什么：

```
pauseStart = [[NSDate dateWithTimeIntervalSinceNow:0] retain]; 
```

如果`pauseStart`正在引用一个对象，那么像这样分配给它会产生泄漏，因为您丢失了对前一个对象的引用；你可以这样做：

```
[pauseStart release];
pauseStart = [[NSDate dateWithTimeIntervalSinceNow:0] retain]; 
```

或更好

```
self.pauseStart = [NSDate dateWithTimeIntervalSinceNow:0]; 
```

（我在这里假设`pauseStart`是一种保留属性）。

希望这可以帮助。

# php - 获取值 stdClass 对象 PHP

> ID：11231638
> 
> 赞同：20
> 
> 时间：2012-06-27T17:12:46.010
> 
> 标签：php, object

我使用 mp4 数据提取 php 脚本。这将返回一个 stdClass 对象，如下所示。谁能告诉我如何从下面的对象显示持续时间。谢谢你

```
stdClass Object
(
    [hasVideo] => 1
    [hasAudio] => 1
    [video] => stdClass Object
        (
            [width] => 472
            [height] => 360
            [codec] => 224
            [codecStr] => H.264
        )

    [audio] => stdClass Object
        (
            [codec] => 224
            [codecStr] => AAC
        )

    [duration] => 622.8
) 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-27T17:14:24.037

你可以这样做：

```
echo $yourObject->duration; 
```

# c# - C#：如何将本地 pdf 文件转换为字节 [][]

> ID：11231639
> 
> 赞同：2
> 
> 时间：2012-06-27T17:12:53.450
> 
> 标签：c#, byte

情况

*   在 VS 2008 上使用 C# ASP.NET
*   我想要
    *   从我的本地目录中读取 pdf 文件（我使用什么流类型？我可以使用文件流吗？）
    *   将此 pdf 文件放入 byte[][] 变量中

问题

*   作为 C# 的新手，我想就如何实现这一点提出建议（请用代码解释）。
*   我需要知道这一点才能完成我的项目。任何其他输入将不胜感激。

代码如下

```
 `byte[][] pdfDoc= new byte[1][];`

   `byte[] outputDoc = File.ReadAllBytes(@"d:/test.pdf");` `for (int x = 0; x < pdfDoc.Length; x++)
    {
        pdfDoc[x] = outputDoc;

    }` 

但它失败了，无法从 d:/test.pdf 位置读取文件。谢谢。

            回答 #1

赞同：8

时间：2012-06-27T17:15:38.473

我认为这对你有用：

```
byte[] bytes = File.ReadAllBytes("c:\\folder\\myfile.pdf"); 
```

```

# activemq - Activemq 不会在我的 Ubuntu 虚拟机上启动

> ID：11231640
> 
> 赞同：11
> 
> 时间：2012-06-27T17:13:04.667
> 
> 标签：activemq, virtual-machine

我正在尝试在我的 ubuntu 虚拟机上运行 activemq，但一直遇到启动它的问题。我试过下载二进制文件和源代码，但没有成功。目前我已经下载了源码，运行“mvn clean install -Dmaven.test.skip=true”，mvn报告安装成功。然后我在我的 .m2 文件夹中寻找 apache-activemq-5.5.1-bin.tar.gz 并将其解压缩到我的 home/USERNAME 目录并尝试运行“bash bin/activemq start”，但收到以下错误。

```
INFO: Loading '/etc/default/activemq'
INFO: Using java '/usr/bin/java'
INFO: Starting - inspect logfiles specified in logging.properties
 and log4j.properties     
to get details
bin/activemq: line 370: /usr/bin/java -Xms256M -Xmx256M -Dorg.apache.activemq.UseDedicatedTaskRunner=true
 -Djava.util.logging.config.file=logging.properties
 -Dcom.sun.management.jmxremote
 -Dactivemq.classpath="/home/jacob/activeMq1/apache-activemq-5.5.1/conf;"
 -Dactivemq.home="/home/jacob/activeMq1/apache-activemq-5.5.1"  
-Dactivemq.base="/home/jacob/activeMq1/apache-activemq-5.5.1"
-jar "/home/jacob/activeMq1/apache-activemq-5.5.1/bin/run.jar" start >/dev/null 2>&1 & 
 RET="$?"; APID="$!";
 echo $APID > /home/jacob/activeMq1/apache-activemq-5.5.1/data/activemq.pid;
 echo "INFO: pidfile created : '/home/jacob/activeMq1/apache-activemq-5.5.1/data/activemq.pid' (pid '$APID')";
 exit $RET: No such file or directory 
```

有没有人遇到过这种类型的错误？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T17:00:21.007

看起来我正在再次回答我的一个问题，但也许这会在未来帮助某人。

脚步。

1.  我最终通过运行命令“./bin/activemq setup newConfig”创建配置文件来让activemq工作（不包括引号）
2.  然后我替换了位于 etc/default/ 的当前配置文件“activemq”。（我在用 newConfig 覆盖之前备份了原始的 activemq 文件）。
3.  运行“./bin/activemq start”，这将创建一个 PID 文件。
4.  创建文件后，重新运行“./bin/activemq start”以最终启动代理。

然后，您可以通过导航到“http://localhost:8161/admin/”或执行“netstat -an | grep 61616”（如果您保留默认端口等）来测试安装。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-02-25T11:20:43.353

我在Debian上安装activemq 5.13，下载并解压到/opt，然后我去/opt/apache-activemq-5.13.1/run "./bin/activemq start"，然后出现这个错误：

```
xx@debian:/opt/apache-activemq-5.13.1$ ./bin/activemq start
INFO: Loading '/etc/default/activemq'
INFO: Using java '/usr/bin/java'
INFO: Starting - inspect logfiles specified in logging.properties and log4j.properties to get details
./bin/activemq: 330: ./bin/activemq: "/usr/bin/java"  -Djava.util.logging.config.file=logging.properties -Djava.security.auth.login.config=/opt/apache-activemq-5.13.1//conf/login.config   -Djava.awt.headless=true -Djava.io.tmpdir="/opt/apache-activemq-5.13.1//tmp"                -Dactivemq.classpath="/opt/apache-activemq-5.13.1//conf:/opt/apache-activemq-5.13.1//../lib/:"               -Dactivemq.home="/opt/apache-activemq-5.13.1/"               -Dactivemq.base="/opt/apache-activemq-5.13.1/"               -Dactivemq.conf="/opt/apache-activemq-5.13.1//conf"               -Dactivemq.data="/opt/apache-activemq-5.13.1//data"                              -jar "/opt/apache-activemq-5.13.1//bin/activemq.jar" start >/dev/null 2>&1 &
          RET="$?"; APID="$!";
          echo $APID > /opt/apache-activemq-5.13.1//data/activemq.pid;
          echo "INFO: pidfile created : '/opt/apache-activemq-5.13.1//data/activemq.pid' (pid '$APID')";exit $RET: not found 
```

我所做的是使用“uname -a”检查 Debian 版本：

```
Linux debian 3.16.0-4-amd64 #1 SMP Debian 3.16.7-ckt20-1+deb8u3 (2016-01-17) x86_64 GNU/Linux 
```

我发现我的 debian 是 64 位系统。所以我跑

```
./bin/linux-x86-64/activemq start 
```

表明：

```
Starting ActiveMQ Broker... 
```

然后我可以使用用户名“admin”和密码“admin”访问该站点：[http://localhost:8161/admin/](http://localhost:8161/admin/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-09-20T01:03:03.670

使用 Ubuntu 14.04，我必须在 /etc/activemq/instances-enabled 中创建一个链接

```
sudo ln -s ../instances-available/main/ 
```

类似于 apache2 设置

然后启动服务器`/etc/init.d/activemq start`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-30T12:58:35.480

sudo 是必要的。

## bin$ sudo ./activemq 启动

*bin$ sudo ./activemq status* INFO: Loading '/opt/runtime/apache-activemq-5.11.1/bin/env' INFO: Using java '/usr/bin/java' ActiveMQ is running (pid '29887')

# wpf - 如何将 UserControl 添加到 WPF 窗口上的面板

> ID：11231649
> 
> 赞同：7
> 
> 时间：2012-06-27T17:13:47.187
> 
> 标签：wpf, xaml, user-controls

我想我在这里遗漏了一些应该很明显的东西，但是我在这个上画了一个空白。

我已经构建了一个非常原始的 UserControl，它只包含一个`TextBox`用作日志窗口的内容：

```
<UserControl x:Class="My.LoggerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             x:Name="LoggerView">
    <Grid x:Name="LayoutRoot">
        <TextBox x:Name="LogWindow" AcceptsReturn="True"/>
    </Grid>
</UserControl> 
```

我不认为这是最好的方法，但对于原型来说应该足够好。

代码隐藏同样简单：

```
public partial class LoggerControl : UserControl, ILogger
{
    public LoggerControl()
    {
        InitializeComponent();
    }

    private LogLevel level = LogLevel.Warning;

    #region ILogger

    public LogLevel Level
    {
        get { return level; }
        set { level = value; }
    }

    public void OnError(string s)
    {
        if (level >= LogLevel.Error)
            LogWindow.AppendText("ERROR:::" + s + "\n");
    }

    // ...
    #endregion
} 
```

我想不通的是如何将此控件添加到我的`MainWindow.xaml`. 简化，假设我的窗口如下所示：

```
<Window x:Class="My.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:My"
    Title="Test" Height="350" Width="525">
    <Grid>
        <local:LoggerControl x:Name="LogView" />
    </Grid>
</Window> 
```

即使如此简单，Visual Studio 2010 中的设计器也无法加载主窗口。给出的错误是：

> 无法将“LoggerControl”类型的值添加到“UIElementCollection”类型的集合或字典中。

此错误消息在主要搜索引擎中只有一个不相关的命中（加上重复），所以我没有找到任何有用的帮助。微软自己的文档似乎暗示这应该可行。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:20:07.077

```
<UserControl x:Class="My.LoggerControl"

 xmlns:local="clr-namespace:My.LogTest" 
```

看起来您可能在命名空间中犯了错误？LoggerControl 被列为命名空间 My，而您正在导入 My.LogTest 并将其分配给 xml-prefix 本地。将其更改为：

```
xmlns:local="clr-namespace:My" 
```

我认为它应该工作。否则，修复 LoggerControl 声明。

# email - Expression Engine 使用 Champagne Extension 故障排除

> ID：11231653
> 
> 赞同：0
> 
> 时间：2012-06-27T17:13:58.833
> 
> 标签：email, rest, expressionengine

我在使用 Champagne Extension 的 Expression Engine 中遇到问题，它不允许我发送广告系列。此扩展程序利用[https://www.campaignmonitor.com/](https://www.campaignmonitor.com/) api 发送大量电子邮件。

当我尝试从表达式引擎安装的后端发送活动时，我得到的错误是“需要 HTML 内容 URL”。

什么可能导致与表达式引擎安装相关的这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:32:39.867

`html`只要您的 URL或文本内容不可见，就会收到此错误。当有人忘记包含文本版本时，通常会看到这种情况。测试的一个好方法是单击预览 HTML/TEXT 按钮并确保两者都为您提供正确的结果。

它们不能为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:58:41.983

对于替代解决方案，请务必查看我的附加 Postmaster。它允许客户仅通过创建新条目来发布电子邮件活动。您可以设置任意数量的配置，因此您甚至可以将草稿电子邮件发送到测试订阅者列表。由于一切都在频道条目中，您可以使用您喜欢的任何字段类型，它适用于 MailChimp 以及 CampaignMonitor。

[https://objectivehtml.com/articles/postmaster-the-definitive-email-solution-for-expressionengine](https://objectivehtml.com/articles/postmaster-the-definitive-email-solution-for-expressionengine)

# android - 设备处于低功耗模式时 SystemClock.elapsedRealtime() 漂移

> ID：11231657
> 
> 赞同：5
> 
> 时间：2012-06-27T17:14:21.707
> 
> 标签：android

根据 API 文档以及之前的[SO 线程](https://stackoverflow.com/questions/4918192/android-timer-that-works-when-device-is-sleeping)，`SystemClock.elapsedRealtime()`即使设备处于睡眠状态，也应该保持准确的时间。这不是我观察到的。

我编写了一个简单的时钟，它位于一个`while (true)`循环中，并根据 的值更新屏幕上的时间`SystemClock.elapsedRealtime()`。如果我在两个设备上同步时钟，例如通过 NTP，然后在其中一个设备上打开和关闭屏幕几次，显示的时间将漂移最多 +/- 0.7 秒。（这仅在手机未连接到外部电源时发生，因此睡眠模式可能是这里的罪魁祸首）。

这是正常的吗？这是Android中的错误吗？有没有办法在睡眠/唤醒周期中保持约 20 毫秒的计时精度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:16:41.037

我一直有同样的问题，所以今晚我尝试将我的计时方法从 更改`SystemClock.elapsedRealtime()`为`System.currentTimeMillis()`。到目前为止，一切都很好。当我点击关闭应用程序并返回时，时间并没有漂移。
我已经在服务中使用 Runnable 对其进行了测试。我目前正在主要活动中使用 Runnable 对其进行测试，并在应用程序失去焦点时使用 sharedprefs 来存储所有内容。我还没有决定这两种方法中哪一种最好——但`currentTimeMillis`似乎不受漂移时间问题的影响`elapsedRealtime`。

我知道谷歌不建议将`currentTimeMillis`其用于计时目的，但似乎在应用程序失去焦点时保持正确时间效果更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-24T07:28:23.937

我有一个每分钟与服务器通信一次的应用程序。它通过在启动时记录服务器时间和 SystemClock.elapsedRealtime() 然后使用 elapsedRealtime 计算服务器时间来同步设备时钟和服务器时钟（我这样做是因为设备本身从网络同步时间而 #### 不能完全值得信赖）。

*在 Galaxy Tab 2 上运行的一周期间，SystemClock.elapsedRealtime() 在两小时内*仅落后于服务器时钟几分钟。我的日志显示漂移的速度不是恒定的，因此设备的使用方式确实会影响它。

虽然 API 要求时钟提供单调的时间，但它并不能保证准确性。因此，它不是长时间准确记录时间的有用方法。

# winforms - CheckedListBox WinForms 绑定

> ID：11231661
> 
> 赞同：3
> 
> 时间：2012-06-27T17:14:29.460
> 
> 标签：winforms, binding, checkedlistbox

**如何使用IsChecked**属性将我的对象集合绑定到 CheckedListBox 项？

这是我的对象：

```
public class Person
{
    public int Id {get;set;}
    public string Name {get;set;}
    public bool IsChecked {get;set;}
}

public class EditorModel
{
    public BindingList<Person> People {get;set;}
} 
```

这些对象也都实现了**INotifyPropertyChanged**。

我可以像这样进行绑定：

```
checkedListBox.DataSource = editorViewModel.People;
checkedListBox.ValueMember = "Id";
checkedListBox.DisplayMember = "Name"; 
```

如何绑定第三个属性**IsChecked**？我试图谷歌它，但我没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T03:31:31.640

> 将数据源绑定到 CheckedListBox 的所有解决方案都不是很优雅。请改用带有 Checkbox 列的 DataGridView。

# android - 是否可以分离 WebView 的 UI 和 HTTP 线程？

> ID：11231666
> 
> 赞同：12
> 
> 时间：2012-06-27T17:15:09.277
> 
> 标签：android, android-asynctask, android-webview, httpconnection, android-networking

由于各种原因，我需要[runOnUiThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)的实际实例化和初始化[WebView](http://developer.android.com/reference/android/webkit/WebView.html)。

这意味着它的底层 HTTP 连接也是在 UI 线程上建立的？

如果这是真的，是否可以将 WebView 的 UI 标题与 HTTP 连接线程分开？

如果可能，实现此目的的正确方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T09:56:22.387

我**很难**相信 Android 会在 UI 线程上运行远程 HTTP 请求，假设您通过`WebView.loadUrl()`. 这将导致糟糕的用户体验。

很快，我在调试器中运行了一个带有 basic 的 Android 应用程序，`WebView`然后在调试器中停止了。这是我看到的：

![在此处输入图像描述](../Images/4228002a13733571ba0d8aa7724db561.png)

如果`WebViewCoreThread`、`WebViewWorkerThread`或`http0`-`http3`不处理`WebView`对象的网络连接，则

1.  他们的名字很糟糕
2.  Android的构建真的很糟糕

此外，如果您通过堆栈溢出的最高声誉用户之一查看此答案，则[loadUrl() 是 asynchronous](https://stackoverflow.com/a/6774835/119114)。调试器中的快速步骤告诉我，`loadUrl()`在 UI 线程（又名）上调用的`main`完成速度太快，无法在 UI 线程上同步处理连接。（我在调用之前和之后设置了一个断点，并且`loadUrl()`我知道它不会很快提供服务）。

所以，我的回答是**你已经完成了......他们已经分开了！**（是的！）

# asp.net - 在 default.aspx 中将 http 重定向到 https

> ID：11231668
> 
> 赞同：1
> 
> 时间：2012-06-27T17:15:12.860
> 
> 标签：asp.net, iis, iis-7, iis-6

我们的网站地址就像“http://members.XXX.XX”，所以无论用户输入“members.XXX.XX”还是“http:”，我都想重定向到“https://members.XXX.XX” //members.XXX.XX"，这是我的代码，我把它放在default.aspx中

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (Request.IsSecureConnection == false)
        {
            Response.Redirect(Request.Url.ToString().Replace("http://", "https://"));
        }

        if (!Request.Url.ToString().StartsWith("http://") || !Request.Url.ToString().StartsWith("https://"))
            Response.Redirect("https://" + Request.Url.ToString());

        Response.Redirect("~/pages/login.aspx");
    } 
```

哪个不行，谁能帮忙？非常感谢

编辑：我们没有在 IIS 中这样做，因为我们存储了 ELMAH，它是一个错误记录系统。我的同事说，如果我们这样做，ELMAH 将无法工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:19:51.597

无需在代码中执行此操作，只需让 IIS 为您处理即可。

**IIS7**
通过 IIS 需要 ssl 并捕获错误代码`403.4`来为您进行重定向。分步指南[“IIS7 将 HTTP 重定向到 HTTPS”](http://www.sslshopper.com/iis7-redirect-http-to-https.html)

**IIS6**
您可以创建一个在端口 80 上运行的重定向站点来处理您对 https 的重定向。阅读有关它的更多信息[“如何在 IIS 6.0 上强制从 HTTP 重定向到 HTTPS”](http://blogs.microsoft.co.il/blogs/dorr/archive/2009/01/13/how-to-force-redirection-from-http-to-https-on-iis-6-0.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-26T11:29:52.730

您可以添加到`Global.asax`

```
 protected void Application_BeginRequest()
    {

        if (!Context.Request.Url.AbsoluteUri.Contains("localhost") && !Context.Request.IsSecureConnection)
            Response.Redirect(Context.Request.Url.ToString().Replace("http:", "https:"));
    } 
```

# javascript - 制作默认缩放css

> ID：11231678
> 
> 赞同：3
> 
> 时间：2012-06-27T17:16:07.873
> 
> 标签：javascript, html, css, zooming, default

所以我的问题很简单。当我开始开发我的网站时，我的 Firefox 浏览器上的默认缩放级别竟然低于 100%。（可能是 70%）这意味着到目前为止我的设计实际上是在缩小模式下，这反过来意味着我的用户或网络访问者在以 100% 模式查看时会看到看起来非常放大的东西。这可以通过按住 Ctrl 并滚动鼠标滚轮两次来轻松解决。显然，尽管我不能鼓励人们这样做。

所以，

HTML、CSS 或 Javascript 中是否有一些函数或属性可以将默认缩放级别设置为缩小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:20:43.317

***我强烈建议您再次创建您的网站！！！！***

它有帮助吗？

```
body { zoom: 3; -moz-transform: scale(3); -moz-transform-origin: 0 0} 
```

[参考](https://stackoverflow.com/questions/1156278/how-can-i-scale-an-entire-web-page-with-css)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:40:36.613

Chrome 可以显示初始缩放级别，例如

```
HTML { 
zoom:90%;
} 
```

它本身会缩放整个页面而不是初始浏览器缩放级别，这就像缩放一样，但它与 firefox 或 safari 或我的猜测都不兼容。其余的探险家。

总帐

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-18T13:44:32.943

感谢 Gabriel Balsa，请注意，这不适用于 Firefox

```
html{
zoom: 60%;} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-27T17:18:41.833

不，你不能。那是浏览器的功能。

# xml - 检索元素名称

> ID：11231683
> 
> 赞同：1
> 
> 时间：2012-06-27T17:16:29.477
> 
> 标签：xml, xslt-1.0

```
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
<Package ID="b7137f2>   
<Compatibility_Rules ID="32fd84b4-7b9b-40e2-8265-8e2e4f856a8d">
    <Rule_Event ID="992f04cb-6bd1-42bb-9578-87793dd38aca">
        <Name>Entity Selection</Name>
    </Rule_Event><Rule_Name>Private Line Exclusions</Rule_Name>
    <Rule_Statement ID="d0cc0700-2199-4a51-af68-72dfe27d878f">
        <Description>Package is Private line</Description>
    </Rule_Statement>
</Compatibility_Rules>
</Package>
</Root> 
```

我想提取属性名称“规则事件”并将其显示为：

```
<attribute depth="0">
        <name>Compatibility Rules</name>
        <value GUID="B7137F2">
            <attributes>
                <attribute depth="1">
                    <name>Rule Event</name>
                    <value GUID="32FD84B4">
                        <attributes/>
                     </value> 
                </attribute>
           </attributes>
          </value>
 </attribute> 
```

我尝试了以下但 name() 返回规则事件的父级，即兼容性规则。

```
 <xsl:template match="Compatibility_Rules"> 
    <attribute depth="0">           
            <name>
                <xsl:value-of select="local-name()"/>
            </name>
        <value GUID="{../../*/@ID}"></value>
        <attributes>
            <attribute depth="1">
                <name><xsl:value-of select="name()"/> </name>
            </attribute>
        </attributes>
    </attribute>          
</xsl:template> 
```

我怎样才能参加规则活动。我对 XML 和 XSL 完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:12:50.370

我找到了解决方案：name(*[1])

# ruby-on-rails - rails 的正则表达式具有 3 位长度，并且仅以 4 和 5 开头

> ID：11231684
> 
> 赞同：-1
> 
> 时间：2012-06-27T17:16:50.240
> 
> 标签：ruby-on-rails, regex

我想制作仅以 4 和 5 开头并具有三个长度字符串的正则表达式

包括第一个数字 4 和 5。

```
 like "455"
   like "555" 
```

谢谢.......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:20:44.747

像这样的东西？

```
/^[45]\d{2}$/ 
```

[例子](http://rubular.com/r/T7Ggwuleuo)

# ruby-on-rails - 访问设计配置变量

> ID：11231687
> 
> 赞同：23
> 
> 时间：2012-06-27T17:17:01.923
> 
> 标签：ruby-on-rails, devise

在我的 Rails 应用程序中，直接从视图访问设计配置变量的方法是什么？

我想`config.allow_unconfirmed_access_for`从 Devise 的`:confirmable`模块中展示。此变量在`devise.rb`初始化程序中设置：

```
Devise.setup do
  config.allow_unconfirmed_access_for = 3.days
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-28T02:36:34.953

文件中的配置`devise.rb`会复制到您的 Devise 模型上，因此如果您的 Devise 资源是`User`，您应该能够通过`User.allow_unconfirmed_access_for`.

因此，在您的控制器上创建一个实例变量并将此值分配给它，然后您就可以在您的视图中显示它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-05T21:48:04.513

接受的答案不再正确。对于较新的设计版本，配置选项附加到主`Devise`模块，例如`Devise.allow_unconfirmed_access_for`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-28T17:10:36.413

这回答了一个类似的问题：

OmniAuth 配置存储在嵌套策略对象内的 omniauths_config 对象中

```
Devise.omniauth_configs 
```

返回：

```
{:facebook=>
  #<Devise::OmniAuth::Config:0x007fa6db95aa68
  .... 
```

然后通过符号访问：

`Devise.omniauth_configs[:facebook].strategy`

```
{"setup"=>true,
 "skip_info"=>false,
 "client_id"=>nil,
 "client_secret"=>nil,
 "client_options"=>{"site"=>"https://graph.facebook.com", "authorize_url"=>"https://www.facebook.com/dialog/oauth", "token_url"=>"/oauth/access_token"},
 "authorize_params"=>{},
 "authorize_options"=>[:scope, :display, :auth_type],
 "token_params"=>{"parse"=>:query},
 "token_options"=>[],
 "auth_token_params"=>{},
 "provider_ignores_state"=>false,
 "access_token_options"=>{"header_format"=>"OAuth %s", "param_name"=>"access_token"},
 "scope"=>"email,public_profile,publish_actions",
 "info_fields"=>"email, first_name, last_name",
 "name"=>"facebook"} 
```

# ruby-on-rails - Twitter Bootsrap - 模型 - Fade 褪色太多

> ID：11231689
> 
> 赞同：1
> 
> 时间：2012-06-27T17:17:10.493
> 
> 标签：ruby-on-rails, model, navigation, twitter-bootstrap

按照此代码，我的按钮可以完美运行：

[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

褪色和一切。我想将此按钮迁移到我的网站导航栏。一旦我将代码插入我的导航栏..模型的淡入淡出功能会淡出整个网站。这可以防止我在模型内的表单中输入任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:27:13.827

你将不得不使用它

```
$('#myButton').click(function(){
    $('#myModal').modal('hide');
}); 
```

并`data-dismiss="modal"`从按钮中删除，因为这会触发父模态的淡入淡出。

# cloud-foundry - 无法启动 Micro Cloud Foundry

> ID：11231691
> 
> 赞同：0
> 
> 时间：2012-06-27T17:17:13.527
> 
> 标签：cloud-foundry

我有一台带有 Windows7 操作系统的联想 Thinkpad。我下载了micro cloud foundary和vm ware player。当我尝试通过 VM 播放器在我的系统（Intel i7-2760QM，64 位）中启动 micro Cloud Foundry 时，我收到错误消息“此内核需要 x86-64 CPU。但只检测到 i686 CPU。”

我什至按照其他帖子中的建议通过 BIOS 启用了英特尔虚拟化技术，但我仍然遇到同样的错误。

除此之外，我还检查了处理器与 VMware 实用程序的兼容性，它表明它是兼容的。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:17:40.067

我想你必须安装一个64位的windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T03:42:28.820

以下是VM Player[的硬件要求](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1003945)。

您可能需要在 BIOS中[启用英特尔虚拟化。](http://waynewrighttechtips.wordpress.com/2011/01/20/64bit-guest-on-vmware-esx-4-1-running-on-a-hp-dl380-g5/)

# asp.net-mvc - 如何将默认值显示为空白而不是类型的默认值？

> ID：11231692
> 
> 赞同：6
> 
> 时间：2012-06-27T17:17:18.510
> 
> 标签：asp.net-mvc

我有一个视图模型，其中有几个属性没有按需要显示。属性之一是日期时间类型。另一个是int。在我的创建视图中，`datetime`默认值为 ，`1/1/0001 12:00:00 AM`默认`int`值为`0`。

默认情况下，我们想要空字段。我该怎么做呢？

我已经找到`[DefaultValue("")]`并发现它不能解决这个问题。

谢谢！

ASP.NET MVC 4 RC

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T17:20:23.707

尝试使用以下方法将 ViewModel 上的属性声明为可为空**`?`**

```
public DateTime? DateValue { get; set; }
public int? IntValue { get; set; } 
```

# jquery - jQuery AJAX 到 C# Web 服务 ASMX 从 HTTPS 到 HTTP 域

> ID：11231694
> 
> 赞同：1
> 
> 时间：2012-06-27T17:17:19.977
> 
> 标签：jquery, ajax, https, asmx

我使用调用 HTTP 页面的 Visual Studio（asmx 页面）创建了一个 Web 服务：

```
WebRequest request = WebRequest.Create("http://ws.geonames.org/countryCode?lat=" + lat + "&lng="+lng); 
```

此服务通过 HTTPS 提供：

```
 https://mydevdomain.com/geonames/Service1.asmx/getGeoname 
```

现在，当我`https://mydevdomain.com/page.html`用这个 jQuery 代码调用这个服务时……</p>

```
 var request= $.ajax({
      type: "POST",
      url: "https://mydevdomain.com/geonames/Service1.asmx/getGeoname",
      data: "{ 'lat':'"+coordinatesMap[f][1]+"', lng:'"+ coordinatesMap[f][2]+"'}",
      contentType: "application/json; charset=utf-8",
      dataType: "json"
  }); 
```

…我在资源管理器上有一个经典警报，告诉我有非安全内容！为什么？jQuery 怎么可能知道服务正在调用非安全页面？

PS 我做这项服务是因为我想避开警报页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:25:11.887

不确定这是否会有所帮助，但它解决了我在该警报中遇到的类似问题。

我使用**[ServerCertificateValidationCallback](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.servercertificatevalidationcallback.aspx)**来修复。并不是说这很重要，但我的课程是一个 ASMX C# WebService（更多内容见下文）

**下面的例子：**

```
//Force Trust with server
ServicePointManager.ServerCertificateValidationCallback = delegate(
  Object obj, X509Certificate certificate, X509Chain chain, SslPolicyErrors errors) {return (true); };

HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://999.999.99/PI/services/UCP");
request.Headers.Add("SOAPAction", "");
request.ContentType = "text/xml;charset=\"utf-8\"";
request.Accept = "text/xml";
request.Method = "POST"; 
```

**更多代码**...

```
using System;
using System.Collections.Specialized;
using System.Net;
using System.Net.Security;
using System.IO;
using System.Xml;
using System.Security.Cryptography.X509Certificates;
using System.Text;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;

[WebService]
public class UCPSvc : WebService {

    [WebMethod (Description="Proxy for ACS UCP WebService")]
    public XmlDocument Proxy()
    {
        //...
    }
} 
```

# swt - 动态组合框列表问题

> ID：11231696
> 
> 赞同：0
> 
> 时间：2012-06-27T17:17:21.537
> 
> 标签：swt

使用 switch case 我想向组合框添加不同的列表，当我编译时我没有看到任何错误。以下是我的代码，有人可以建议不更新组合框列表的原因吗？

```
public void comboboxlist(Composite parent,String fruit) {
    Combo combobox = new Combo(parent,SWT.NONE | SWT.DROP_DOWN | SWT.READ_ONLY);
    switch(fruit) {
        case "apple":
            combobox.setItems(new String[]{"Red","green"});
            combobox.addModifyListener( new ModifyListener() {
                public void modifyText(final ModifyEvent e) {   
                }
            });
            break;
        case "mango":
            combobox.setItems(new String[]{"Yellow","green"});
            combobox.addModifyListener( new ModifyListener() {
                public void modifyText(final ModifyEvent e) {   
                }
            });
            break;
            default : break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:37:59.003

对我来说最合理的解释是你的水果既不是“苹果”也不是“芒果”。你检查过吗？

# objective-c - 在我的 UITableView 单元格中滚动时正在消失

> ID：11231705
> 
> 赞同：0
> 
> 时间：2012-06-27T17:17:42.137
> 
> 标签：objective-c, ios

这是我的示例 twitter 程序，它可以工作，但是如果我向上或向下滚动顶部和底部单元格会出现几个错误，有时我会收到一条错误消息：

BAD ACCESS CODE 这发生在这一行

```
NSDictionary *tweet = [tweets objectAtIndex:indexPath.row]; 
```

请指教

![在此处输入图像描述](../Images/342a5e15db09d53b5e32b819a0cb9ecf.png)

```
#import "TableViewViewController.h"

@interface TableViewViewController ()

@end

@implementation TableViewViewController

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"tweets array count : %d", tweets.count);
    return tweets.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TweetCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSLog(@"ROW : %d", indexPath.row);

    NSDictionary *tweet = [tweets objectAtIndex:indexPath.row];
    NSString *text = [tweet objectForKey:@"text"];
    NSString *name = [[tweet objectForKey:@"user"] objectForKey:@"name"];

    cell.textLabel.text = text;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", name];
    return cell;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self fetchTweets];
}

- (void)fetchTweets
{

    NSString *twitterURL = [NSString stringWithFormat:@"https://api.twitter.com/1/statuses/public_timeline.json"];    
    NSURL *fullURL = [NSURL URLWithString:twitterURL];

    NSError *error = nil;
    NSData *dataURL = [NSData dataWithContentsOfURL:fullURL options:0 error:&error];

    tweets  = [NSJSONSerialization JSONObjectWithData:dataURL
                                                      options:kNilOptions
                                                        error:&error];    
}

.....

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:22:15.167

我在这个函数中看到了问题：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"tweets array count : %d", tweets.count);
    //return tweets.count;
    return 11; //default returns 20 but only shows 10 indexpath.Row so 11
} 
```

您可能不应该只返回 11 - 如果`tweets`长度不同怎么办？表格视图将尝试获取数组中不存在的索引处的单元格。尝试返回`tweets.count`。

进一步详细说明：该`tableView:numberOfRowsInSection:`方法的目的不是告诉 iOS 屏幕上有多少行，而是整个`tableView`. 这包括未在屏幕上显示的单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:47:59.963

找到答案 我的应用程序不支持 ARC，因为我没有检查我们是否在 NSJSONSerialization 中使用了保留，错误已修复。

```
 tweets  = [[NSJSONSerialization JSONObjectWithData:dataURL
                                                      options:kNilOptions
                                                        error:&error] retain]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:26:36.090

为什么 numberOfRowsInSection 硬编码为 11？

在设置 tweets 数组后，您还应该有 [self.tableView reloadData]`fetchTweets`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:30:16.587

你为什么不在你`return tweets.count;`的`numberOfRowsInSection`方法中取消注释？

# xcode - How to Codesign and Sandbox Helper Application in Xcode 4?

> ID：11231712
> 
> 赞同：10
> 
> 时间：2012-06-27T17:18:21.903
> 
> 标签：xcode, submission

This is the problem: I have a MainApp that contains an HelperApp. The Helper app is used for the login items so i need to differentiate MainApp and HelperApp bundle IDs. I copied the HelperApp into MainApp thanks to the BuildPhase Copy. If I Codesign and Sandbox the HelperApp the upload phase stops... with error related to the provisioning profile. If I don't code sign/sandbox the HelperApp the upload works but after 2 minutes I receive an invalid binary" that warns me about the "App sandbox not enabled" on the helper app.

Do you know which is the correct practice to Sandbox and app with Helper app in it? I can't find NOTHING in the documentation!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:50:02.577

我有完全相同的场景：一个包含 HelperApp 的 MainApp，用于在登录时启动 MainApp。

通过确保将XCode 中**两个应用程序的代码签名标识设置为“****第 3 方 Mac 开发人员应用程序**”，“无效二进制 - 未启用应用程序沙箱”问题得到解决。

然后，在提交审核后，我收到了“Waiting for Review”通知，不再出现“无效二进制”错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:49:46.700

您可以尝试删除您的助手应用程序，然后以这种方式再次添加它：在 Xcode 中转到文件，将新文件添加到“您的项目”，然后导入您的助手应用程序。然后，确保它们都具有用于分发的有效配置文件。

# mysql - 不同表中的相同 fk 分层

> ID：11231717
> 
> 赞同：0
> 
> 时间：2012-06-27T17:18:40.533
> 
> 标签：mysql, database, foreign-keys

今天我有这个结构......

表A.id

tableB.id tableB.tableAId (fk)

tableC.id tableC.tableBId (fk)

我在 tableC 中放一个 fk 引用 tableA 是否正确？如果我不这样做，我需要将 tableC 与 tableB 连接到 tableA。我告诉你要避免加入，并会用良好的做法来做所有事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:21:23.263

多个外键绝不是一件坏事。如果表 A 和表 C 之间存在关系，并且您需要提取与两者相关的数据而不一定需要表 B，那么在 AC 之间有一个外键就可以了！

# php - 根据值在表中显示链接

> ID：11231722
> 
> 赞同：0
> 
> 时间：2012-06-27T17:19:04.857
> 
> 标签：php, mysql, html-table

我希望能够根据单元格值显示链接。

所以如果我有这张桌子：

```
 <tr style="background-color:#576c11;">
    <td style="font-size:18px; color:#f0cb01;">'.$data["keyword"].'</td>
    <td style="font-size:18px;color:#f0cb01;">'.$data["block"].'</td>
    <td style="font-size:18px;color:#f0cb01;">'.$data["phone"].'</td>
    <td style="font-size:18px;color:#f0cb01;">'.$data["Reason"].'</td> 
```

我想显示第 5 个单元格以显示基于原因单元格的链接，我该如何实现？

因此，如果原因单元格是 65，那么下一个单元格`<a href="65.html">Link</a>` 在大多数情况下将是相同的，但有些单元格会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:30:14.857

您的输入格式化方式，这是一些较大字符串的一部分，以您尚未复制的单引号开始某处，并以您尚未复制的另一个单引号结束。正确的行为很大程度上取决于包含该字符串的上下文是什么。

如果您在变量中组装一个字符串，您可以简单地区分大小写`if`，根据原因决定接下来要附加的字符串。如果这是一个传递给某个函数的字符串，也许您*应该*按照我刚才描述的方式将它组装到一个变量中，然后将该结果传递给该函数。如果有一些很好的理由必须是单个表达式，则可以使用条件运算符：

```
'…'.($data["Reason"] == 65 ? 'It is 65' : 'It is not 65').'…' 
```

# html - 有人可以解释一下为什么不是 的尺寸正确，如何解决？

> ID：11231723
> 
> 赞同：1
> 
> 时间：2012-06-27T17:19:06.147
> 
> 标签：html, css

[http://zergxost.com/test.html](http://zergxost.com/test.html)

正如你所看到的，如果没有足够的文本，底部的灰色线会比它应该的高得多。有人可以解释为什么“文章”的命中框不包含“标题”吗？以及如何修复它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:23:22.713

您缺少 a`overflow: hidden`或`clear: left`声明。您应该始终清除浮动对象或将溢出声明为隐藏（小心！）。

```
article {
  overflow: hidden;
} 
```

或者：

```
div#wrapper div.related {
  width: 100%;
  height: 960px;
  border-top: 1px solid #808080;
  margin-top: 20px;
  clear: left;
} 
```

### 为什么/如何`overflow: hidden`工作

当您将块级元素设置为 have`overflow: hidden`时，您实际上是在告诉浏览器更改它处理块元素的方式。从功能上讲，您告诉浏览器包含普通元素（包括浮动元素）。超出盒子总尺寸的东西，通常是通过相对/绝对定位，或者具有巨大宽度的图像，将被剪裁到包装器的宽度。跨越容器的下拉区域`overflow: hidden`可能会导致它们在进入时被剪裁。

容器末尾的元素`overflow: hidden`也将应用 padding-bottom 和 margin-bottom。

另一个答案：[https ://stackoverflow.com/a/3416217/24950](https://stackoverflow.com/a/3416217/24950)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:21:24.433

你需要清除`div#wrapper div.related`. 尝试将以下内容添加到您的 CSS 中：

```
div#wrapper div.related {
    clear: both;
} 
```

# c++ - Visual C++ Statictext "&" Symbol

> ID：11231728
> 
> 赞同：0
> 
> 时间：2012-06-27T17:19:27.610
> 
> 标签：c++, windows, winapi, visual-c++, msvcrt

I have a very small problem with Visual C++: when I try to put a word or sentence contaning a `&` symbol into static text, I see that `&` symbol as `_` on the screen.

Thanks for any help.

```
int CustomerID;

CString Str= m_lv1.GetItemText(iItem, 0); Str.TrimLeft(); Str.TrimRight();      

//if the Str "Hello & Hi" it shows "Hello _ Hi"
m_CustomerName.SetWindowText(Str); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:23:09.507

MSVC 用于`&`表示用于菜单和其他小部件的带下划线的字母，您可以使用 Alt 来通过键盘控制您的 UI。double`&&`应该代表`&`文本中的一个，iirc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T19:12:26.630

您可以将 '&&' 用于单个 & （不充当快捷方式），或设置[SS_NOPREFIX](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760773%28v=vs.85%29.aspx)样式以完全抑制 & 符号处理。

# bash - print variable to end of the file using sed

> ID：11231729
> 
> 赞同：2
> 
> 时间：2012-06-27T17:19:29.120
> 
> 标签：bash, unix, sed

I wanted to print a variable(`var="phani"`) to the end of a text file (`2.txt`) using `sed`.

This is my work so far:

```
$ var="phani";echo sed -e "$a$var" -i 2.txt 
```

But the error i am getting is :

> sed: -e expression #1, char 2: extra characters after command

Any suggestions please?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:25:47.553

因为您使用的是 dbl-quotes（以允许 var 扩展），所以您必须转义第一个 $ 以便 shell 不会尝试评估 '$a'，这对我有用..

```
 sed "\$a$(var)" file 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:05:46.373

有`echo "$var" >> 2.txt`不充分的理由吗？使用`sed`它会使一项简单的任务变得比它需要的更困难......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:25:02.467

您需要防止`$a`外壳扩展：

```
var="phani";echo sed -e '$a'"$var" -i 2.txt 
```

# javascript - Set Cookie with Javascript and sanitize value

> ID：11231731
> 
> 赞同：4
> 
> 时间：2012-06-27T17:19:35.140
> 
> 标签：javascript, cookies, special-characters

I need to set a cookie with javascript which I'm doing this with the following command:

```
document.cookie = name+"="+value; 
```

My problem is that `value` is a string, which can contain any unicode-character.

Is there a function which automatically replaces special characters (like `;`) - and if not, which characters are forbidden?

Something like the "encodeURIComponent()"-Function for Get-Parameters would be perfect

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:23:38.050

你应该使用[`window.escape`](https://developer.mozilla.org/en/DOM/window.escape).

> escape() 方法将特殊字符（任何不是常规文本或数字的字符）转换为十六进制字符，这对于设置 cookie 的值尤其必要。在 GET 请求或 AJAX GET/POST 请求的 URL 中传递名称=值对时也很有用。

它也有[`window.unescape`](https://developer.mozilla.org/en/DOM/window.unescape)对应物。

**更新。**[在转义之前使用base64](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript#246813)编码/解码 可能是有意义的，以免因`window.encode`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:22:54.433

为什么不使用[强大的 cookie 库](https://github.com/carhartl/jquery-cookie)来处理 cookie？

```
$.cookie('key', value, { expires: 365 }); 
```

* * *

浏览器将 cookie 限制为 4 kB。如果您需要在客户端存储超过 4 kB 的空间，则应使用[本地存储](https://stackoverflow.com/a/4695652/201952)。

# jquery-ui - Why does the jQuery UI Content area extend so far down the page?

> ID：11231732
> 
> 赞同：0
> 
> 时间：2012-06-27T17:19:39.227
> 
> 标签：jquery-ui, jquery-ui-accordion

I added a jQuery UI accordion here: [http://www.letmagichappen.com/web_resources](http://www.letmagichappen.com/web_resources) to accommodate a large amount of data. The accordion works fine, but the size of the content area is much larger than needed for the content.

I reviewed the css:

```
.web_resources .ui-accordion { width: 100%; }
.web_resources .ui-accordion .ui-accordion-header { cursor: pointer; position: relative; margin-top: 1px; zoom: 1; }
.web_resources .ui-accordion .ui-accordion-li-fix { display: inline; }
.web_resources .ui-accordion .ui-accordion-header-active { border-bottom: 0 !important; }
.web_resources .ui-accordion .ui-accordion-header a { display: block; font-size: 1em; padding: .5em .5em .5em .7em; }
.web_resources .ui-accordion-icons .ui-accordion-header a { padding-left: 2.2em; }
.web_resources .ui-accordion .ui-accordion-header .ui-icon { position: absolute; left: .5em; top: 50%; margin-top: -8px; }
.web_resources .ui-accordion .ui-accordion-content { padding: 1em 2.2em; border-top: 0; margin-top: -2px; position: relative; top: 1px; margin-bottom: 2px; overflow: auto; display: none; zoom: 1; }
.web_resources .ui-accordion .ui-accordion-content-active { display: block; } 
```

The HTML is pretty straight forward:

```
<h4>Chapter 1</h4>
<div>
<p><a href="http://www.ajronline.org/content/153/1/87.full.pdf">Rotator Cuff Tears: Prospective Comparison of MR Imaging with Arthrography, Sonography, and Surgery</a></p>
<p><a href="http://www.nejm.org/doi/pdf/10.1056/NEJM199407143310201">Magnetic Resonance Imaging of the Lumbar Spine in People without Back Pain</a></p>
<p><a href="http://www.ajronline.org/content/147/2/293.full.pdf+html">1.5 Tesla Surface Coil MRI of the Knee</a></p>
<p><a href="http://www.yogaresearchsociety.com/">Yoga Research Society</a></p>
<p><a href="http://www.rsna.org/">Radiological Society of North America</a></p>
<p><a href="http://www.apple.com">Sample 1</a></p>
</div> 
```

Here is the code for the Accordion:

```
<script type="text/javascript">
$(function(){
   $(".web_resources").accordion({ header: "h4" });
});
</script> 
```

I would appreciate some insights into what is causing the content area to display so big and how to bring it under control.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:27:45.100

这比我想象的要简单得多。默认情况下，手风琴“自动高度”到最大的 div。要更改它需要将其设置为：

> 自动高度：假

# regex - 如何在 wget 中使用正则表达式来拒绝文件？

> ID：11231736
> 
> 赞同：17
> 
> 时间：2012-06-27T17:19:45.353
> 
> 标签：regex, linux, wget, download

我正在尝试使用 wget 工具下载网站的内容。我使用 -R 选项来拒绝某些文件类型。但是还有一些其他文件我不想下载。这些文件命名如下，并且没有任何扩展名。

```
string-ID 
```

例如：

```
newsbrief-02 
```

我如何告诉 wget 不要下载这些文件（它们的名称以指定字符串开头的文件）？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-01-27T14:03:45.777

因为（显然）v1.14`wget`接受正则表达式 :`--reject-regex`和`--accept-regex`（默认情况下，如果编译支持`--regex-type posix`，可以设置为）。`pcre``libpcre`

请注意，您似乎每次通话`--reject-regex`只能使用一次。`wget`也就是说，`|`如果要在多个 regex 上进行选择，则必须在单个 regex 中使用：

```
wget --reject-regex 'expr1|expr2|…' http://example.com 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-27T17:28:34.077

您不能在`wget -R`键中指定正则表达式，但可以指定模板（如 shell 中的文件模板）。

答案看起来像：

```
$ wget -R 'newsbrief-*' ... 
```

您还可以使用`?`和符号类`[]`。

有关详细信息，请参阅[信息 wget](http://www.gnu.org/software/wget/manual/html_node/Recursive-Accept_002fReject-Options.html)。

# video - Sitecore 视频库 Fancybox Youtube 集成

> ID：11231745
> 
> 赞同：0
> 
> 时间：2012-06-27T17:20:51.490
> 
> 标签：video, sitecore

我们目前正在使用 sitecore CMS 工具，并且正在使用 fancybox 来播放我们的视频。目前，我们的用户上传 OGV 和 MP4 视频以在播放器中播放。如果他们没有 OGV 或 MP4 视频，我试图让他们选择嵌入 youtube 视频。

视频项目由用户创建的 ItemID 传入，用户可以在其中附加 OGV、MP4 和视频缩略图。

我尝试了很多东西，但无法让它发挥作用。

首先，我在 Sitecore CMS 中为 Youtube 视频地址创建了一个单一文本字段。

接下来我们有一个 VideoPlayer.ASPX.CS 和 VideoPlayer.ASPX，我尝试将这行代码添加到其中，但它不起作用： VideoYouTube = "http://" + Request.Url.Host + SitecoreUtility.GetVideoMediaUrl(videoItem ，“视频Youtube”）

我想知道我是否可以得到一些帮助，以便我可以让它工作。对于 VideoPlayer.ASPX.CS，这里是目前工作的代码：

```
 public partial class videoPlayer : System.Web.UI.Page
    {
        public string VideoImage { get; set; }
        public string VideoMp4 { get; set; }
        public string VideoOgv { get; set; }

        protected void Page_Load(object sender, EventArgs e)
        {
            string itemID = WebUtil.GetQueryString("itemID", "");

            if (!string.IsNullOrEmpty(itemID))
            {
                Item videoItem = SitecoreUtility.Db.GetItem(new ID(new Guid(itemID)));

                VideoImage = "http://" + Request.Url.Host +     SitecoreUtility.GetMediaUrl(videoItem, "VideoImage");
                VideoMp4 = "http://" + Request.Url.Host +     SitecoreUtility.GetVideoMediaUrl(videoItem, "Video_MP4");
                VideoOgv = "http://" + Request.Url.Host +     SitecoreUtility.GetVideoMediaUrl(videoItem, "Video_OGV");
            }
        }
    } 
```

对于 VideoPlayer.ASPX 文件，这是我到目前为止的工作代码：

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Video Player</title>
    <!--[if !IE]><!--> 
        <link href="/css/video_popup.css" rel="stylesheet" type="text/css">
        <script src="/js/video.js"></script>
    <!--<![endif]--> 
    <!--[if gte IE 9]> 
        <link href="/css/video_popup.css" rel="stylesheet" type="text/css">
        <script src="/js/video.js"></script>
    <![endif]-->
</head>
<body>
  <video id="videoContainer" class="video-js vjs-default-skin" controls preload="none" width="480" height="360"
  poster="<%= VideoImage %>"
  data-setup="{}">
    <source src="<%= VideoMp4 %>" type='video/mp4' />
    <source src="<%= VideoOgv %>" type='video/ogg' />

    <object id="flash_fallback_1" class="vjs-flash-fallback" width="480" height="360" type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf">
        <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" />
        <param name="allowfullscreen" value="true" />
        <param name="flashvars" value='config={"playlist":["<%= VideoImage %>", {"url": "<%= VideoMp4 %>","autoPlay":false,"autoBuffering":true}]}' />

        <img src="<%= VideoImage %>" width="480" height="360" alt="Poster Image" title="No video playback capabilities." />
    </object>
  </video>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:13:39.667

从您所拥有的内容来看，获取 youtube 视频 URL 并将其放入精美的盒子中应该不会太难。

在页面代码中，您已经拥有站点核心项目，您只需要从正确的字段中检索项目 URL。因此，在您的设置和字段名称的 sitecore 中，这将是

```
string Video_YouTube = videoItem.Fields["VideoYoutube"].Value; 
```

然后可以将其放置在 aspx 页面上的锚标记中，如中所述

[http://webdesignandsuch.com/fancybox-youtube-videos/](http://webdesignandsuch.com/fancybox-youtube-videos/)

只要用户将 youtube 视频的完整地址放入其中就可以了。

或者，您可以安装一个用于 sitecore 的 youtube 集成模块，它可以让您从 youtube 帐户中下载视频，然后用户可以配置一个字段来拉取这些视频并让用户选择一个。

[http://trac.sitecore.net/YouTubeIntegration](http://trac.sitecore.net/YouTubeIntegration)

# javascript - 是否有可能知道 jquery 可拖动元素将恢复到哪里？

> ID：11231747
> 
> 赞同：3
> 
> 时间：2012-06-27T17:20:54.967
> 
> 标签：javascript, jquery

如果我的可拖动对象恢复到某个位置，我正在尝试更改它的颜色。在此示例中，当您将红色框拖动到右侧的绿色框时，它会变为蓝色。我已经设置了，所以当你将一个盒子拖到另一个盒子上时，它会恢复到原来的位置。但是，如果框恢复到左侧的容器，我希望它变回红色，如果你手动将它拖到那里。我也可以做到，所以如果一个盒子在左边的容器里，它总是红色的，但我不知道该怎么做。任何帮助是极大的赞赏。提前致谢。

[小提琴！！！](http://jsfiddle.net/watson/xE9Pe/3/)

这是HTML：

```
<div id="box">
    <div class="peg">&nbsp;</div>
    <div class="space">&nbsp;</div>
    <div class="peg">&nbsp;</div>
</div>

<div id="game">
    <ul class="row">
        <li class="hole">&nbsp;</li>
        <li class="hole">&nbsp;</li>
    </ul>
</div> 
```

CSS：

```
#game {
    position: absolute;
    top: 15px;
    left: 135px;
    background: wheat;
    padding: 15px;
    padding-bottom: 0;
}

.row {
    position: relative;
    margin-left: auto;
    margin-right: auto;
    height: 75px;
    margin-bottom: 15px;
    background-color: olive;
}

.hole {
    width: 75px;
    height: 75px;
    float: left;
    background-color: aqua;
    opacity: 0.3;
    margin-left: 6px;
}

#box {
    position: absolute;
    left: 15px;
    top: 15px;
    width: 90px;
    padding-bottom: 15px;
    background-color: wheat;
    padding-top: 15px;
    padding-left: 15px;
}

.peg {
    width: 75px;
    height: 75px;
    background-color: red;
    z-index: 1;
}
.space {
    height: 15px;
    width: 75px;
}

.top {
    background-color: blue;
    width: 75px;
    height: 75px;
    z-index: 1;
}
​ 
```

Javascript：

```
$('.peg' ).draggable({
    snap: ".hole", 
    snapMode: "inner", 
    snapTolerance: 40, 
    //scope: "zappa",
    //revert: 'invalid',
    stop: function(){
        $(this).draggable('option','revert','invalid');
    },
    //helper: "clone"
});    

$('.peg').droppable({
    tolerance: 'fit'
});

$('.peg').droppable({
    greedy: true,
    tolerance: 'touch',
    drop: function(event,ui){
        ui.draggable.draggable('option','revert',true);
    }
});

$('.hole').droppable({
     drop: function(e,ui) {
          $(ui.draggable).removeClass('peg').addClass('top');
     },
     //scope: "zappa"
});

$('#box').droppable({
     drop: function(e,ui) {
          $(ui.draggable).removeClass('top').addClass('peg');
     },
     //scope: "zappa"
});
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:28:37.937

`$('.hole').droppable(...)`相反，如果一个盒子已经在洞中，你可以为它创建一个控件类来真正防止其他盒子发生变化。

```
 $('.hole').droppable({
   drop: function(e,ui) {
     //Check the hole control class
     if(!$(this).hasClass('full')){

         //its empty so change the class of the box
         $(ui.draggable).removeClass('peg').addClass('top');

         //if you want to prevent the box in the hole from being draggable again uncomment next line
         //$(ui.draggable).unbind('mousedown');

         //put the hole control class
         $(this).addClass('full')
     }else{
         //its full
     }                   
   },
   out: function(){ 
        //if the item can go out of the hole then

        //remove the hole control class
        $(this).removeClass('full')
   }

 }); 
```

**更新**

如果您需要控制当您从洞中取出一个盒子时会发生什么，然后将该`out`函数添加到 droppable 中，我更新了链接和代码。

[解决方案](http://jsfiddle.net/FHF8N/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:54:26.247

我们还可以解决上述问题，如下所示：

jQuery的替代方式：

```
$('.peg').draggable({
    snap: ".hole",
    snapMode: "inner",
    snapTolerance: 40,
    stop: function() {
        $(this).draggable('option', 'revert', 'invalid');
    }
});

$('.peg').droppable({
    tolerance: 'fit',
    greedy: true,
    tolerance: 'touch',
    drop: function(event, ui) {
        ui.draggable.draggable('option', 'revert', true);
    }
});

$('.hole').droppable({
    drop: function(e, ui) {
        $(ui.draggable).switchClass('peg', 'top');
    },
});

$('#box').droppable({
    drop: function(e, ui) {
        $(ui.draggable).switchClass('top', 'peg');
    },
}); 
```

您可以在 codebins 上找到完整的解决方案，因此请点击[http://codebins.com/codes/home/4ldqpbs](http://codebins.com/codes/home/4ldqpbs)

# javascript - 通过Javascript中的列表过滤

> ID：11231750
> 
> 赞同：0
> 
> 时间：2012-06-27T17:21:09.910
> 
> 标签：javascript, dom

我在一个框中有一个名称列表，我想根据用户输入过滤并过滤掉不匹配的名称。很像这个例子： http: [//www.somacon.com/p241.php](http://www.somacon.com/p241.php)。我是 Javascript 新手，这就是我的名字在框中的显示方式：

```
<select id="authorSelectId" multiple="multiple" class="accordionSelect">
<c:forEach var="author" items="${dropDownValues.authorDisplayList}">
<option value="${author}">${author}</option>
</c:forEach>
</select> 
```

这是我给用户的输入框：

```
<input onKeyUp="handleKeyUp(20);" type="text" id='functioninput' name="functioninput" VALUE="" style="font-size:10pt;width:34ex;"> 
```

我的代码正确调用了我的“handleKeyUp(20)”方法。但我不确定如何链接到“authorSelectId”名称列表并通过基于“functionInput”文本的名称进行过滤。如果需要更多代码，我可以提供。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:37:37.523

您可以使用以下方法获得对 authorSelectId 的引用：

```
var asi= document.getElementById("authorSelectId"); 
```

然后，您可以像这样遍历选项：

```
for (var i= 0; i < asi.options.length; ++i) {
    var opt= asi.options[i];
    if (opt.selected) {
        // do something...
    }
} 
```

# ruby - 如何以编程方式添加文本，就好像它被复制粘贴一样？

> ID：11231751
> 
> 赞同：3
> 
> 时间：2012-06-27T17:21:11.363
> 
> 标签：ruby, windows, copy-paste

我想最好编写一个 ruby​​ 程序，它可以接受一个字符串对象并将其内容写入 Windows 中的剪贴板以进行粘贴。

最简单的测试用例，一个可以像 cat 一样全局运行的命令，但它不是 stdout，而是写入剪贴板，用于 ssh 键之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:24:04.800

你可以试试[这个](http://rubyforge.org/docman/view.php/85/1694/README.html)宝石。我没有亲自测试过。

[这](http://win32utils.rubyforge.org/)是实现 gem 的项目的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:41:48.593

我从未使用过[IronRuby](http://www.ironruby.net/)，但我认为如果运行该解释器（未经测试），这也会起作用：

```
include System::Windows::Forms
Clipboard.SetText 'foo' 
```

# javascript - 重构长 JavaScript 字符串的代码，使其更易于样式化

> ID：11231753
> 
> 赞同：2
> 
> 时间：2012-06-27T17:21:19.033
> 
> 标签：javascript, jquery, refactoring

我想知道是否有更好的方法来编写这个 JavaScript (Jquery) 代码。这个片段动态地创建了一个带有链接的 H3。

我的设计师正在疯狂地尝试将其样式化为 JavaScript 中的样式。我正在尝试将其重新编写/重构为更小的块，以允许我的设计师设计样式，而无需在一行上查看所有这些代码。

```
var dvClassContainer = $(document.createElement('div')).attr("id", 'dvclassconatiner_' + classVal).attr("classifname", classifname).attr("memclassnumber", memclassnumber).html('<h3>' + classifname + '<a id="ancclassremove_'+ classVal +'" classVal="' + classVal + '" onclick="RemoveClassificationUponConfirm(\'' + classVal + '\');" class="buttons delete btnSmall">Delete</a></h3><img style="display:none;" id="imgloadRemClass_' + classVal + '" alt="loading" src="../Images/application/smallUploading.gif" />'); 
```

我正在考虑创建更多变量并将它们组合在一起。有没有一种“更干净”的方式来写这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:26:48.913

```
var dvClassContainer = $(document.createElement('div'))
                            .attr("id", 'dvclassconatiner_' + classVal)
                            .attr("classifname", classifname)
                            .attr("memclassnumber", memclassnumber)
                            .html('<h3>' + classifname + '<a id="ancclassremove_'+ classVal +'" classVal="' + classVal + '" onclick="RemoveClassificationUponConfirm(\'' + classVal + '\');" class="buttons delete btnSmall">Delete</a></h3><img style="display:none;" id="imgloadRemClass_' + classVal + '" alt="loading" src="../Images/application/smallUploading.gif" />'); 
```

最后一行仍然需要修复。我会创建元素，然后设置它们的属性，然后将它们附加到`h3`. 您可以使用`var h3 = $("<h3></h3>");`（作为示例）执行此操作，并使用设置属性`.attr()`，最后`.append()`将它们放在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:28:48.757

如果您利用更多 jQuery 的功能，代码将变得更易读且更易于维护：

```
var dvClassContainer = $('<div>');
dvClassContainer.attr({
  id: 'dvclasscontainer_'+classVal,
  classifname: classifname,
  memclassnumber: memclassnumber
});
var dvHeader = $('<h3>');
var dvHeaderLink = $('<a>Delete</a>');
dvHeaderLink.attr({
  id: 'ancclassremove_'+classVal,
  classVal: 'classVal',
  class: 'buttons delete btnSmall'
}).on('click',function(){
  RemoveClassificationUponConfirm(classVal);
});
var dvImg = $('<img>');
dvImg.attr({
  id: 'imgloadRemClass_'+classVal,
  alt: 'loading',
  src: '../Images/application/smallUploading.gif'
});
dvClassContainer.append(dvHeader.append(dvHeaderLink.append(dvImg))); 
```

理想情况下，您还希望将所有这些非标准属性（classifname、memclassnumber、classVal）移动到`data-`可以通过 jQuery`data()`函数访问的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:31:59.190

在承认这一行代码很讨厌之后，我将采取不同的方式。

让您的设计师头疼的不是 JavaScript。如果他们不能用 CSS 设置样式，他们就不够努力。当然，h3 和锚点位于其他元素内部，它们可以抓取一些样式：

```
.someContainer h3 { color: chartreuse; } 
```

但是，如果他们已经尝试了所有可能的方法，您仍然只需要添加一两个新类（到 h3 和锚点）。你在哪里你`.html('<h3>'...`会把它改成`.html('<h3 class="someClass">'...`

尽管我们在糟糕的实现中优化和彻底修复糟糕的 JS 很有趣，但如果我们假设这是“工作”，那么问题在于设计者的样式能力。因此，这并不是真正的 JavaScript 问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:57:56.423

```
var dvClassContainer = $('<div/>')
     .attr({'id': 'dvclassconatiner_' + classVal,
           'classifname': classifname,
           'memclassnumber': memclassnumber
     })
     .html(
         function() {
             var $title = $('<h3>' + classifname + '</h3>');
             var $link = $('<a>Delete</a>').attr({
                 'id': 'ancclassremove_' + classVal,
                 'classVal': classVal,
                 'class': 'buttons delete btnSmall'
             })
             .on('click', function() {
                 RemoveClassificationUponConfirm(classVal);
             });

             var $img = $('<img/>').attr({
                 'id': 'imgloadRemClass_' + classVal,
                 'alt': 'loading',
                 'src': '../Images/application/smallUploading.gif'
             })
             .css('display', 'none');

             return $title.append($link).add($img);
     }); 
```

[**演示**](http://jsfiddle.net/3zWzT/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T18:01:36.760

使用 Douglas Crockford 的 Supplant 方法。它标记了一个字符串，因此您可以动态构建字符串。这是一个小提琴示例：http: [//jsfiddle.net/mmeah/F23rk/](http://jsfiddle.net/mmeah/F23rk/)

```
// http://javascript.crockford.com/remedial.html
if (!String.prototype.supplant) {
    String.prototype.supplant = function (o) {
        return this.replace(/{([^{}]*)}/g,
            function (a, b) {
                var r = o[b];
                return typeof r === 'string' || typeof r === 'number' ? r : a;
            }
        );
    };
}

var classVal="x", classifname="y", memclassnumber="z"; //predefined

var dvClassHtml = $("#someDiv").html();
$("#someDiv").html("");
var params ={
    "classVal":classVal,
    "classifname":classifname,
    "memclassnumber":memclassnumber
};
dvClassHtml=dvClassHtml.supplant(params);

var dvClassContainer = 
$(document.createElement('div'))
.attr("id", 'dvclassconatiner_' + classVal)
.attr("classifname", classifname)
.attr("memclassnumber", memclassnumber)
.html(dvClassHtml); 
```

# c# - XtraUserControl 上的边框颜色

> ID：11231754
> 
> 赞同：1
> 
> 时间：2012-06-27T17:21:22.143
> 
> 标签：c#, user-controls, devexpress, border

有没有办法在 DevExpress 中添加一个简单的边框`XtraUserControl`？

我尝试了以下但没有奏效：

```
UserDefaultLookAndFeel=False
UseWindowXPTheme = True
BorderColor = Color.Red
BorderStyle = Simple 
```

我不想添加停靠面板。这就是我现在所拥有的，但我正试图减少用户控制的数量以提高性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:25:55.523

*（我假设您指的是 WinForms）*

当我尝试为不支持它的控件添加边框时，我使用以下方法：

1.  在窗体上放置一个[`Panel`控件。](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)
2.  在每边给出 1 的`Panel`a [`Padding`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.padding)。
3.  给出所需边框颜色的`Panel`a 。[`BackColor`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.backcolor)
4.  将您的控件作为子控件放置在控件[`XtraUserControl`](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsXtraUserControltopic)内部。`Panel`
5.  将[`Dock`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock)子控件的 设置为[`Fill`](http://msdn.microsoft.com/en-us/library/system.windows.forms.dockstyle)。

这为您提供了所需颜色的 1 像素细边框的外观。

也许不是最优雅或最节省资源的方法，但在没有其他方法的情况下为我工作了几次。

作为一个额外的提示：我在[DevExpress 支持网站上](http://www.devexpress.com/Support/Center/)拥有非常好的体验。如果我（或其他）的答案不能满足您的需求，我强烈建议您在他们的支持网站上再次询问您的问题。

# facebook - 自定义赞操作被无故拒绝

> ID：11231757
> 
> 赞同：1
> 
> 时间：2012-06-27T17:21:25.790
> 
> 标签：facebook, facebook-opengraph

我请求批准自定义开放图表之类的操作一直被拒绝，没有任何具体原因说明它被拒绝的原因：

> 您的操作不符合标准：我们无法根据您提供的使用说明测试此操作。请确保您列出的步骤是用户必须采取的步骤，以便在操作生效后触发操作。请提供完整的复制说明和指向我们可以触发操作的特定 URL 的链接。您还应该测试您的操作，以确保您可以成功地将操作发布回名为 Auth Dialog Preview User 的测试用户的时间线。完成这些更改后，重新提交您的操作。

我为测试功能提供了绝对的防白痴说明，甚至使用应用程序的 Open Graph Tester 用户对其进行了两次测试。老实说，我不知道要改变什么才能获得批准。有任何想法吗？

我也不确定以下部分对于像我这样的纯 AJAX 应用程序意味着什么：

> 请提供完整的复制说明和指向我们可以触发操作的特定 URL 的链接。

这是否意味着 Facebook 测试人员不想使用应用程序的用户界面来测试操作，而是想在 URL 上触发 http 请求，这显然不适用于纯 AJAX 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:56:33.320

Facebook 不再批准自定义的类似操作。Facebook 最近推出了“Built-in Like”作为内置的 Open Graph 操作（请参阅[博文](https://developers.facebook.com/blog/post/2012/06/20/bringing-like-to-mobile/)和[文档](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)）。

# android - Android BroadCastReceiver 和 android.intent.action.PHONE_STATE 事件

> ID：11231760
> 
> 赞同：1
> 
> 时间：2012-06-27T17:21:33.637
> 
> 标签：android, broadcastreceiver

我通过使用以下代码片段和 android BroadCastReceiver 来捕获 android.intent.action.PHONE_STATE 更改事件。我可以成功识别事件并处理来电也可以通过以下代码完成。

我的要求是识别来自特定号码的呼叫，通过代码结束该呼叫并为该传入事件调用 Web 服务。

在这里，此代码针对呼叫接收和结束事件运行两次。

我想停止两次调用此方法。我怎样才能停止为第二个事件调用该代码片段（结束通话）。如果有人能在这方面帮助我，那就太好了。

```
 if (intent.getAction().equals(
            "android.intent.action.PHONE_STATE")) {
        Log.i("INFO", "Call Received");

        try {

            TelephonyManager telephony = (TelephonyManager) context
                    .getSystemService(Context.TELEPHONY_SERVICE);

            Bundle bundle = intent.getExtras();

            Log.i("Calling database", "Creatinng DataHandler Object");
            DatabaseHandler db = new DatabaseHandler(context);
            String phoneNumber =db.getContact().getPhoneNumber();

            Log.i("Retriving : ", "Retriving .."+ db.getContact().getPhoneNumber());

            if ((bundle.getString("incoming_number").equals(phoneNumber))) {

                Log.i("Test Call", "This is the test call");

                @SuppressWarnings("rawtypes")
                Class c = Class.forName(telephony.getClass().getName());
                Method m = c.getDeclaredMethod("getITelephony");
                m.setAccessible(true);

                ITelephony telephonyService = (ITelephony) m
                        .invoke(telephony);
                telephonyService = (ITelephony) m.invoke(telephony);

                telephonyService.endCall();

                // Call the web service and send log details

                ServiceClient sc = new ServiceClient();
                sc.serviceCall(context);

            } else {
                Log.i("Normal Call", "This is not the test call");
            }

        } catch (Exception e) {
            Log.i("Exception Occured", "Exception in call code snipet");
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-04T01:19:33.700

我相信您遇到的问题是电话状态发生了两次变化，一次是电话响铃时，然后是您结束通话后，电话空闲时。

您只希望此代码运行一次，因此最好的方法是添加额外的电话状态检查以查看它是否正在响铃，如果电话正在响铃则结束通话。

这可以通过添加以下检查来完成：

```
if (intent.getAction().equals(
        "android.intent.action.PHONE_STATE")) {
    Log.i("INFO", "Call Received");

String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
//your code here that starts with try block
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T02:53:27.507

由于 android 安全原因，您无法使用第三方应用程序终止来电。签入“android 应用程序开发食谱”页码“164”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:31:41.613

接收器启动后，您可以尝试执行以下操作：

```
 Bundle bundle = nIntent.getExtras();
    String phoneNr= bundle.getString("incoming_number");

    if(null == phoneNr)
    {   // this is outgoing call so bail out
        return;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-05T12:12:27.610

我知道为时已晚，但我找到了解决方案。这通常发生在 5.0 和 5.1 上。您无法阻止它调用两次，但您可以进行通用检查以一次性完成所有工作。该解决方案普遍适用于所有操作系统。这是代码

```
public void onReceive(Context context, Intent intent) {
    Object obj = intent.getExtras().get("subscription");
      long subId;
      if(obj == null) {
        subId = Long.MIN_VALUE; // subscription not in extras
      } else {
        subId = Long.valueOf(obj.toString()); // subscription is long or int
      }

      if(subId < Integer.MAX_VALUE) {
        // hurray, this is called only once on all operating system versions!
      }} 
```

有关更多信息，请查看此[链接](https://www.skoumal.com/en/android-duplicated-phone-state-broadcast-on-lollipop/)。

# php - 通过 php 解析图像 - 重复问题

> ID：11231762
> 
> 赞同：0
> 
> 时间：2012-06-27T17:21:42.263
> 
> 标签：php

所以，这是我要在我的网站上解决的唯一问题。当它从数据库中获取帖子然后被调用以解析/替换 URL 时，它有问题。问题仅在于其中包含空格的重复项或图像名称。

```
$result = mysql_query("SELECT * FROM posts ORDER BY postid DESC");

while($row = mysql_fetch_array($result))
  {

$str = $row['post_content'];

$str = preg_replace_callback('#(?:https?://\S+)|(?:www.\S+)|(?:\S+\.\S+)#', function($arr)
{
    if(strpos($arr[0], 'http://') !== 0)
    {
        $arr[0] = 'http://' . $arr[0];
    }

    $url = parse_url($arr[0]);

    // images
    if(preg_match('#\.(png|jpg|gif)$#', $url['path']))
    {
        return '<img src="'. $arr[0] . '" /><br /><br />';
    } 
```

这是它对第一个上传的图像的作用：http:
[//domain.com/server/php/files/filename.jpg](http://domain.com/server/php/files/filename.jpg)
这是它对第二个上传的图像的作用：http:
[//domain.com/server/php /files/文件名](http://domain.com/server/php/files/filename)http://(1).jpg

我需要控制如何命名文件的命名约定或控制它如何读取 URL 中的空格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:30:08.210

在您的帖子中有两个问题：

1.  如何读取 url 答案中的空格：您可以使用 urlencode() 函数。

2.  文件的命名约定可能有以下选项：

一个。要么不允许文件名中的空格。在正则表达式的帮助下删除空间

湾。要么首先在 db 中检查文件名，如果存在，则在文件名中附加 1 或 2。

如果您有任何问题，请告诉我

# html - 文本css旁边的2像素线不同颜色

> ID：11231767
> 
> 赞同：1
> 
> 时间：2012-06-27T17:22:05.853
> 
> 标签：html, css

是一个简单的练习，可能比其他解决方案更好，但我想知道在 html 和 css 中创建这种结构的最佳方法是：

我想要的是文本，然后创建 2 像素线、1 像素红色和其他 1 像素绿色。

![在此处输入图像描述](../Images/6e0454561319811f492154b46398ae6e.png)

不确定 crossbrowser 的最佳解决方案是什么，想要同时结束行。

已经尝试过使用边框、小时、背景......但似乎没有完美完成。

ps-寻找解决方案而不重复图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:34:06.913

简单的答案是使用一个简单的标签（`<i>`例如）并对其应用 CSS 样式。

```
<p>Your text <span class="line"></span></p> 
```

CSS 可能如下所示：

```
.line {
    position: relative;
    display: inline-block;
    * display: inline; /* fix for IE bugs */
    * zoom: 1; /* fix for IE bugs */
    height: 1px;
    width: 100px;
    background-color: #f00;
    border-bottom: 1px solid #00f;
    vertical-align: middle;
    margin-bottom: 5px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:32:25.463

**CSS：**

```
#lines{
    border-bottom: 1px solid red;
    border-top: 1px solid green;
    display: inline-block;
    height: 5px;
    margin-left: 10px;  
    width: 100px;
} 
```

**标记：**

```
<span id='text'>My text</span>
<span id='lines'></span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:34:37.390

这是我的 2 美分...类似于 Rodolfo 但没有垫片

[http://jsfiddle.net/c4HjQ/](http://jsfiddle.net/c4HjQ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:38:50.503

与 CSS`:after`一起使用`content`：

```
<div class="container">
    <div class="linetext">Text</div>
</div>

.container {
    padding: 15px;
    border: 4px solid black;
}

.linetext:after {
    content: "";
    display:inline-block;
    width: 50px;
    height:1px;
    border-top: 1px solid green;
    border-bottom: 1px solid red;
    margin-left: 6px;
} 
```

试试看：http: [//jsfiddle.net/wBTqV/](http://jsfiddle.net/wBTqV/)

**文档**

*   MDN 上的CSS`:after`伪选择器 - [https://developer.mozilla.org/en/CSS/:after](https://developer.mozilla.org/en/CSS/:after)
*   `content`MDN 上的CSS属性 - [https://developer.mozilla.org/en/CSS/content](https://developer.mozilla.org/en/CSS/content)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-27T17:28:46.213

你可能有一个“间隔”图像（1x1 透明图像），所以你可以做一个

```
<div style="float:left">Your text</div>
<div style="float:left">
  <div style="background-color:green"><img src="spacer.gif" width="100px" height="1px"></div>
  <div style="background-color:red"><img src="spacer.gif" width="100px" height="1px"></div>
</div> 
```

# sql - 条件 WHERE 子句

> ID：11231768
> 
> 赞同：0
> 
> 时间：2012-06-27T17:22:10.537
> 
> 标签：sql, sql-server, sql-server-2008

`WHERE`我需要SQL Server 中条件子句的解决方案。我不知道如何`WHERE`根据声明的变量将函数添加到子句中。我将用所需的逻辑括起来条件部分

```
DECLARE @distance bigint
DECLARE @photosneeded bigint

SET @distance * 50

SELECT * FROM users u
WHERE
  [IF @distance > 0 THEN distance_function(lat1,lon1,lat2,lon2)<=@distance END]
  AND
  [IF @photosneeded>0 THEN u.photo IS NOT NULL AND u.photo <>'' END] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T17:26:53.110

可以使用普通的 WHERE 子句来完成：

```
SELECT * FROM users u
WHERE
(@distance <= 0 or (distance_function(lat1,lon1,lat2,lon2)<=@distance))
AND
(@photosneeded <= 0 or (u.photo IS NOT NULL AND u.photo <>'')) 
```

但是，您需要小心子句中的这种条件，因为它真的会搞砸执行计划优化。有关原因的更多信息，请参阅@Iain 的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T17:27:08.987

我的建议是将其分为三个单独的过程 - 一个用于仅使用第一个子句的完整查询，另一个用于仅使用第二个子句的完整查询，第三个作为“主”，根据条件调用其中一个。过去，SQL Server 只编译条件子句的第一个使用的分支存在问题（我不确定 2008 年是否是这种情况），因此使用单独的存储过程可以保护您免受这种情况的影响，这是一种简单的方法组织事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:30:10.707

```
SELECT * FROM users u
WHERE
 ( @distance <= 0 or distance_function(lat1,lon1,lat2,lon2)<=@distance )
 and
 ( @photosneeded <= 0 or isnull(u.photo, '') <> '' ) 
```

# heroku - Heroku 架构，用于在同一个域上运行不同的应用程序

> ID：11231773
> 
> 赞同：2
> 
> 时间：2012-06-27T17:22:43.033
> 
> 标签：heroku

我有一个独特的设置，我正在尝试确定 Heroku 是否可以容纳。围绕 polygot 应用程序有很多营销，但我实际上只能找到一个示例！

我的申请包括：

1.  **一个用Django**编写的网站
***   一个单独的**Java**应用程序，它获取用户上传的文件，对其进行解析，并将数据存储在数据库中*   两个应用程序都可以访问的共享数据库**

 **因为这些用户上传的文件可能很大，所以我希望上传的文件直接进入 Java 应用程序。我首选的架构是：

1.  Django 生成的网页显示上传表单。
2.  表单将 AJAX 提交给 Java 应用程序
3.  浏览器开始轮询数据库以查看 Java 应用程序是否已插入数据
4.  同时，Java 应用程序使用用户上传的文件执行其操作，并在完成后更新数据库
5.  Django 网页 AJAX-一旦轮询机制看到上传完成，就会用用户上传的结果刷新一个 div

我在这里无法弄清楚的大问题是，我是否可以让 Django 和 Java 应用程序在同一组 dyno 上或在不同的 dyno 上但在**同一域**下运行以避免 AJAX 跨域问题。Heroku 是否支持 URL 级路由？例如：

1.  Django 应用程序可在[http://www.myawesomewebsite.com获得](http://www.myawesomewebsite.com)
2.  Java 应用程序可在[http://www.myawesomewebsite.com/javaurl/获得](http://www.myawesomewebsite.com/javaurl/)

如果这是不可能的，是否有人对解决方法有任何想法？我知道我可以让用户将文件上传到 Django 并让 Django 从服务器端而不是客户端向 Java 发送请求，但这是大量文件的传递。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:22:08.207

Heroku 不支持通过 URL 进行路由的功能。多语言组件应该作为它们自己的子域存在并以跨域方式运行。

作为旁注：您是否考虑过直接上传到 S3，而不是上传到 Heroku 上的应用程序，然后（大概）上传到 S3。如果您正在处理跨域文件上传，则值得考虑其高水平的可扩展性。**

# java - 如何从向下滚动固定次数的网页中提取 HTML 数据？

> ID：11231779
> 
> 赞同：1
> 
> 时间：2012-06-27T17:23:08.710
> 
> 标签：java, html, scroll

我想使用 JAVA 从网站中提取 HTML 数据。问题是一旦用户到达页面底部，网页就会一直向下滚动。它向下滚动的次数是固定的。我的 JAVA 代码只能提取第一部分。如何提取剩余的卷轴？有没有办法用 JAVA 一次加载整个页面？任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:27:39.473

这可能是 PhantomJS (http://phantomjs.org/) 的设计目的。它会在无头模式下使用“真实”浏览器抓取整个网页，甚至执行 JavaScript。我建议停止你正在使用 Java 做的事情，转而看看 PhantomJS。它可以为您节省很多时间。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:59:47.193

这种类型的行为在浏览器中实现，解释用户的滚动动作以通过 AJAX 加载更多内容，并在浏览器中动态修改内存中的 DOM。考虑到您的 Java 在服务器上的 Web 容器中运行，并且该 Web 容器（即 Tomcat、JBoss 等）提供了大量的底层代码，因此您的应用程序不必担心管道问题。

从概念上讲，类似的事情发生在客户端，DHTML 网页在它自己的“容器”（浏览器）中运行，它提供了丰富的功能，从 UI 到网络，再到 DOM 等。如果你从等式并将其替换为 Java 程序，您将需要提供可以执行 DHTML/Javascript 的浏览器的等效项。

我相信 HTMLUnit*可能会*满足要求，但没有亲自使用它。

# scorm - cmi.exit 数据模型元素

> ID：11231781
> 
> 赞同：0
> 
> 时间：2012-06-27T17:23:10.500
> 
> 标签：scorm, scorm2004

假设活动树有两个活动（活动 1 和活动 2）。Activity 1 的 cmi.exit 默认设置为空字符串，Activity 2 的 cmi.exit 设置为“suspend”，“adl.nav.request”设置为“exitAll”，然后 Activity 2 调用 Terminate("")。我想知道Activity 2 的Run-Time Environment 数据模型中的当前信息是否可以在下一个Sequencing Session 中访问或者这些数据被丢弃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:11:07.890

"exitAll" 终止排序会话而不保存任何数据。因此，下一个测序会话将从新数据开始。为了能够在下一个测序会话中检索数据，您需要改为调用“suspendAll”。当“cmi.exit”设置为挂起时，挂起活动的当前状态将被保存，并且将在同一排序会话期间可用，但在下一个排序会话中将不可用，除非您调用“suspendAll”。

# c# - XmlReader.WriteRaw 仍在转义“<”和“>”

> ID：11231784
> 
> 赞同：1
> 
> 时间：2012-06-27T17:23:28.320
> 
> 标签：c#, asp.net, xml, linq-to-xml

我肯定错过了一些东西。我有一个存储 HTML 片段的 XML 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<presentation>
  <slide id="1" title="Test Slide 1">
    <h1>This is test slide 1.</h1>
    <p>Information on test slide.</p>
  </slide>
  <slide id="2" title="Test Slide 2">
    <h2> This is test slide 2.</h2>
    <p>Information on test slide.</p>
  </slide>
  <slide id="3" title="Test Slide 3">
    <h3> This is test slide 3.</h3>
    <p>Information on test slide.</p>
  </slide>
</presentation> 
```

我正在构建一个 ASP.net 表单，它允许我编辑“幻灯片”的内容，然后保存我的更改。为了做到这一点，首先我找到合适的幻灯片`id`。然后我用 删除幻灯片的所有内容`RemoveNodes()`，然后尝试用 编写新内容`WriteRaw(contents)`。

```
 XDocument xmlDoc = XDocument.Load(filepath);
    XElement slide = xmlDoc.Descendants("slide").First(el => el.Attribute("id").Value.Equals(id));
    slide.RemoveNodes();
    using (var writer = slide.CreateWriter())
    {
        // contents are retrieved from a TextBox
        writer.WriteRaw(contents);
    }
    xmlDoc.Save(filepath); 
```

代码运行没有错误。但是，当我检查 xml 文件时，html 标记的`<`and`>`字符已转换为`&lt;`and `&gt;`。

```
...
  <slide id="1" title="Test Slide 1">&lt;h1&gt;This is test slide 1.&lt;/h1&gt;
&lt;p&gt;Information on test slide.&lt;/p&gt;&gt;</slide>
... 
```

我猜另一个对象正在逃避背景中的角色。`SaveOptions.DisableFormatting`不会改变行为。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:37:05.793

抱歉，但 XmlWriter.WriteRaw 适用于写入流或文件的 XmlWriter，但在 System.Xml 或 System.Xml.Linq 中填充对象时不起作用。改为使用`slide.Add(XElement.Parse("<dummy>" + contents + "</dummy>").Nodes())`。

# php - 我在哪里可以找到我的 xdebug 会话中的常量？

> ID：11231790
> 
> 赞同：2
> 
> 时间：2012-06-27T17:23:51.450
> 
> 标签：php, xdebug

最近我在我的 xdebug 会话中寻找一些常量变量，但我没有找到它们。我能看到它们的唯一方法是监视变量菜单。它不是一个超级全局的常量吗？我在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:09:54.457

请参阅此处：[如何检查 PHP 中定义的常量？](https://stackoverflow.com/questions/1864067/how-do-i-examine-defined-constants-in-php)

看起来你不能在 xdebug 中查看常量，但你可以设置一个 var 到那时为止已经定义的内容。

# python - 在本地使用 Z3Py

> ID：11231797
> 
> 赞同：1
> 
> 时间：2012-06-27T17:24:22.250
> 
> 标签：python, z3, smt

我正在通过 IDLE GUI 在 Windows XP 上使用 Python 2.7.3，并且我正在尝试通过 Python API 在本地运行 Z3 4.0。

这条线工作正常：

```
>>> from z3 import * 
```

此行没有：

```
>>> x = Int('x')

Traceback (most recent call last):
[...]
  File "C:\Program Files\Microsoft Research\Z3-4.0\python\z3core.py", line 34, in init
    _lib = ctypes.CDLL(PATH)
  File "C:\Python27\lib\ctypes\__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
WindowsError: [Error 126] The specified module could not be found 
```

任何人都知道问题可能是什么？

我的 PYTHONPATH 设置为“C:\Program Files\Microsoft Research\Z3-4.0\python”，不带引号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:37:52.510

Z3 使用线程本地存储。它是使用 __declspec(thread) 实现的。不幸的是，Windows XP 和 Server 2003 中的 DLL 不支持此功能。来自 MSN 文档：

“对于在进程启动后动态加载的 DLL（延迟加载、COM 对象、显式 LoadLibrary 等），__declspec(thread) 在 Windows XP、2003 Server 和更早的操作系统上不起作用，但在 Vista 和 2008 Server 上起作用。 "

因此，要使用 Z3 DLL，您必须使用以下 Windows 之一：8、7、Vista 或 Server 2008。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:13:01.040

在 Windows XP 上，文件名中的空格可能存在问题，导致 python 无法找到 z3.dll；这似乎是一个一般的 python 问题，请参阅，例如： [关于 PYTHONPATH 的一些注释](http://cs.simons-rock.edu/python/pythonpath.html)

如果使用旧的 8.3 格式的目录，它可能会起作用。您可以通过在命令外壳中找到 Z3 目录来找到短名称（我使用 dir /x 在 Windows 7 上查看短名称），在我的系统上，短路径是 C:\progra~1\mi4430~1\z3 -4.0\bin。但是，这些数字在每次安装时都不同。

一个更快的解决方案可能是简单地将 z3.dll 从 bin 目录复制到 python 目录（或者如果您使用 64 位，则从 x64 目录复制）。

# javascript - 如何使用 javascript 处理大型 html 文本页面？

> ID：11231798
> 
> 赞同：0
> 
> 时间：2012-06-27T17:24:22.670
> 
> 标签：javascript, html, google-chrome-extension

我有一个巨大的（大约 20mB）html 页面，它只是纯文本。它是在服务器上运行的某些代码的日志文件。现在，我正在尝试编写一个 chrome 插件，当有人打开它时自动解析这个页面，并根据我在某些地方的需要添加适当的链接。

页面看起来像这样

```
<html><head></head><body><pre> 20mB of pure text </pre></body></html> 
```

所以，有两个问题，第二个取决于第一个，这对我有帮助。（到目前为止，我一直在使用纯 JavaScript。还没有库。）

1）如何解析页面？2）前3-4行有一些信息。如何**轻松**获取前几行并从中获取数据（如果解析整个页面并不容易）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:13:20.093

您要解析页面的目的是什么，您是在创建摘要吗？

对于初学者，您可以通过将 id 添加到 pre 标记并执行以下操作来获取前 4 行：

`var first4Lines = document.getElementById("theIdTagOfThePre").innerHTML.split("\n",4);` 如果这不起作用，您必须将 '\n' 切换为 '\r\n'。

# c++ - 构造函数用例中的虚函数调用

> ID：11231800
> 
> 赞同：1
> 
> 时间：2012-06-27T17:24:30.330
> 
> 标签：c++

因此，我从各种在线资源中了解到，从构造函数中调用虚函数通常是禁忌。我意识到这里的问题是首先构造基类，C++ 将首先调用基类版本的函数。但是，我有一个独特的用例，可能对此没问题。我会很感激一些评论。考虑这种情况。

```
class Base
{
public:
    Base(string data)
    {
        Parse(data);
    }
    ~Base(){}
private:
    virtual Parse(string data);
}

class Derived : public Base
{
public:
    Derived(string data)
    {
        Parse(data);
    }
    ~Derived();
private:
    Parse(string data);
} 
```

假设我有这样的设置，并且每个派生类的预期行为是：

1.  Parse 在基类中被调用以解析出所有这些输入字符串应该共有的内容。
2.  派生解析应该获取特定于派生类的数据。

在这种情况下，在构造函数中使用虚函数是否有意义？或者我是否被迫公开“解析”并在每次构建此类时调用它？或者有没有其他的建议。

我希望这是有道理的，请原谅上面的任何语法错误，我只是想表达一个一般的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:28:08.257

> 或者我是否被迫公开“解析”并在每次构建此类时调用它？

实际上，在这种情况下，由于你想避免多态行为，我不明白为什么你必须创建`Parse`一个虚拟方法，甚至是类的非静态方法，因为它不会修改任何数据成员类本身...例如，您可以将其`Parse`作为私有`static`方法，然后简单地调用`ClassType::Parse()`每个对象的构造函数，您将获得相同的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:38:53.933

在构造函数中使用虚函数绝对没有错，只要它对你有用。重要的是要记住，当从构造函数调用时，虚函数的多态行为总是仅限于整个层次结构中已经构造的子集。（类似的规则适用于析构函数）。

如果这种受限制的虚拟行为适合您的目的，他们会尽一切努力使用它。

您必须引用的“no-no”参数是一个众所周知的假参数，基于用户期望调用 [not-yet-constructed] 派生类的函数的人为前提。为什么有些人将发明的错误前提转化为不应从构造函数调用虚函数的结论，这超出了我的理解。我还没有看到可靠的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:27:16.587

不要从构造函数调用虚函数。您不会得到多态行为，因为将使用基类虚拟表。

如果您不需要多态行为 - 不要将函数设为虚拟

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T18:27:51.243

解决方案非常简单：

```
class Base
{
public:
    Base(string data)
    {
        Parse(data);
    }
    ~Base(){}
private:
    void Parse(string data);
}

class Derived : public Base
{
public:
    Derived(string data)
    {
        ParseMore(data);
    }
    ~Derived();
private:
    void ParseMore(string data);
} 
```

当`Derived`被构造时，在你进入 的构造函数*之前*`Base`调用的构造函数。因此在 Base 中进行的解析将完成，您可以在 Derived 构造函数中完成解析。*`Derived`*

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T18:41:27.610

最简单的解决方案是使用策略模式：定义一个`Parser`带有纯虚函数的抽象基类，`parse`并让派生类将指向其解析器实例的指针传递给基类构造函数；IE：

```
class Base
{
protected:
    class Parser
    {
    public:
        virtual ~Parser() {}    // Probably not necessary, since no
                                // one is going to dynamically
                                // allocate any of these, but better
                                // safe than sorry.
        virtual void parse( std::string const& data ) const = 0;
    };

    Base( Parser const& derivedClassParser, std::string const& data )
    {
        derivedClassParser.parse( data );
    }
public:
    //  ...
}; 
```

每个派生类将定义其解析器，派生自 `Base::Parser`，定义它的静态实例，并将该静态实例的地址向下传递给基类。

还有另一种可能；如果您有对象的临时实例，它不一定能正常工作，但如果由于某种原因您不能使用上述模式，它可能会很有用。基本上，您定义了一个特殊的类，该类在其析构函数中调用虚函数，并进行隐式转换`std::string`（也可能从隐式转换`char const*`，以支持传递字符串文字），并声明您的构造函数以获取此类的实例；例如：

```
class Base
{
public:
    class CallVirtual
    {
        std::string myData;
        mutable Base* myOwner;
        friend class Base;
    public:
        CallVirtual( std::string const& data )
            : myData( data )
            , myOwner( NULL )
        {
        }
        ~CallVirtual()
        {
            if ( myOwner != NULL ) {
                myOwner->Parse( myData );
            }
        }
    };

    Base( CallVirtual const& dataArg )
    {
        dataArg.myOwner = this;
        //  ...
    }

    virtual void Parse( std::string const& data ) ...
}; 
```

派生类也应该接受一个`CallVirtual const&`作为参数。然后，当您创建派生类的实例时：

```
Base* p = new Derived( someString ); 
```

，字符串会自动转换为临时`CallVirtual`的，其析构函数将在完整表达式的末尾调用。*

# grails - 如何在 Grails 的编辑视图中显示多选列表框中的所有选定选项？

> ID：11231801
> 
> 赞同：1
> 
> 时间：2012-06-27T17:24:31.410
> 
> 标签：grails, select, groovy, listbox, multi-select

我是 Grails 开发的新手，并且`<g:select>` 在将它用于多选列表时遇到了问题。在我的表单中，用户可以在多选列表框中选择 1 到 6 个选项。然后他们可以返回编辑视图进行更改。

表单成功保存了所有选择的选项，但如果选择了多个选项，则列表框不会显示在编辑视图中选择了*任何选项。*但是，如果只选择了一个选项，它会正确显示在编辑视图中。

有人可以给我一些关于如何修复它的想法，以便所有选定的选项都显示在编辑视图中吗？（运行 Grails 2.0.3）

这是我`<g:select>`在 GSP 中的代码：

```
<g:select selected="true" multiple="true" name="securityGroup"
          from="${['Mainframe', 'Finance', 'EDI', 'Item Master', 'Risk Management', 'Telecomm']}"
          value="${MFAdminInstance?.securityGroup}"/> 
```

领域：

类 MFAdmin {

```
static constraints = {

    name(nullable:false, blank:false, unique:true)
    briefDetail(nullable:false, blank:false)
    details(blank:false)
    recsz(nullable:false, blank:false)
    securityGroup(nullable:false, blank:false)
    files(nullable:false, blank:false)
    begJCL(nullable:false, blank:false)
    addJCL1(nullable:true, blank:true)
    addJCL2(nullable:true, blank:true)
    endJCL(nullable:false, blank:false)

}

String name
String briefDetail
String details
String recsz
String securityGroup
Integer files
String begJCL
String addJCL1
String addJCL2
String endJCL 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:09:59.260

尝试对 g:select 标记更明确，您的值 ${MFAdminInstance?.securityGroup} 是一个列表。我建议这样的事情：

```
${MFAdminInstance?.securityGroup?.toList()} 
```

我能够用类似的东西来模拟你的代码：

```
<g:form action="update">
<g:select selected="true" multiple="true" name="securityGroup"
          from="${['Mainframe', 'Finance', 'EDI', 'Item Master', 'Risk Management', 'Telecomm']}"
          value="${bars}"/>
 <g:submitButton name="submit" />
 </g:form> 
```

在我处理帖子的操作 foo2 中：

```
def update() {
    render(view: 'foo', model: [
            bars: params.securityGroup.toList()
    ])
} 
```

正如您所看到的，当我定义`bars`要在 gsp 中使用的列表时，我必须明确告诉它 params.securityGroup 是一个列表。最后没有那个`toList()`，行为是多选的缺失选择。

编辑：

..inMFAdminInstance...

```
List<String> securityGroup 
```

在您的控制器中，您可以将选定的帖子值存储到您的域中，例如...

```
def mf = new MFAdminInstance()
mf.securityGroup = params.securityGroup?.toList() 
```

# php - 检查json php中的重复参数

> ID：11231814
> 
> 赞同：0
> 
> 时间：2012-06-27T17:25:34.517
> 
> 标签：php, parsing, json

我正在编写一些遵循 oauth2.0 规范的 php 代码。他们指定的要求之一是任何重复参数的请求都会导致错误。因此，我有一个使用 json_decode 解析的 json，并且我试图弄清楚如果 json 重复任何参数，如何捕获它。json_decode 的结果似乎只是在重复参数的情况下使用键的最后一个值，所以似乎我需要在解码之前检测它们。有谁知道如何在不编写我自己的 json 解析器的情况下做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:19:38.280

我最终使用的方法是对输入字符串的 json 解码版本进行 json_encode，并将其与输入字符串进行比较。如果两者匹配，则没有重复。如果他们不 json_decode 看到重复，并自动将其删除，因此存在重复。

# c# - 用于 asp:label 的 Javascript 更多/更少文本按钮

> ID：11231816
> 
> 赞同：0
> 
> 时间：2012-06-27T17:25:36.153
> 
> 标签：c#, javascript, asp.net, dynamically-generated

我正在动态创建控件，其中之一是标签控件。如果 label.Text.Length 大于某个字符数，我希望显示更多/更少文本按钮以缩短/扩展文本。在使用服务器端代码时，我让此功能正常工作，但是，我想使用客户端代码执行此操作以防止发生回发。

所以我想我会以某种方式动态添加javascript？如果可能的话，我不太确定 javascript 会是什么样子。

```
LinkButton btn_more = new LinkButton();
btn_more.ID = "lblCustomControl" + (i + 1).ToString() + "_more";
btn_more.ForeColor = System.Drawing.Color.SlateBlue;
btn_more.Text = " [Show More]";
btn_more.Font.Underline = false;
btn_more.Click += new EventHandler(btn_more_Click);

LinkButton btn_less = new LinkButton();
btn_less.ID = "lblCustomControl" + (i + 1).ToString() + "_less";
btn_less.ForeColor = System.Drawing.Color.SlateBlue;
btn_less.Font.Underline = false;
btn_less.Text = " [Show Less]";
btn_less.Click += new EventHandler(btn_less_Click);
btn_less.Visible = false; 
```

我目前正在创建这样的按钮并将它们添加到包含标签的表格单元格中。我猜我必须替换 btn_more/less.Click 为

```
btn_more/less.OnClientClick = "my javascript stuff" + btn_less/more.ID + "more javascript stuff" + myLabel.ID; 
```

显然不是按那个顺序，但我猜这就是我如何动态地向我的按钮添加一个 javascript 操作。

任何建议都会很棒！谢谢 （：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:35:12.087

您可以通过这种方式绑定 javascript。

```
btn_more.Attributes.Add("onclick", "TestFun(this);"); 
```

在html端

```
<script language="javascript" type="text/javascript">

 function TestFun(obj)
 {          
      alert("I am test fun clicked by " + this.id);
      //for server side label
      document.getElementById('<%= Label1.ClientID %>').style.display = "none";
      document.getElementById('<%= LinkButton1.ClientID %>').style.display = "block"; 

      //For client side html element which do not have attribute runat="server"
      document.getElementById('Label1').style.display = "none";
      document.getElementById('myanchor').style.display = "block"; 
 }

</script> 
```

# css - LESS Ruby 编译器错误

> ID：11231817
> 
> 赞同：5
> 
> 时间：2012-06-27T17:25:39.203
> 
> 标签：css, less

不知从何而来，我所有的样式表在编译期间都开始抛出错误。

```
lessc static/css/styles.less
/gems/less-2.2.1/lib/less/js/lib/less/parser.js:385:31: .rounded_corners is undefined (Less::Error) 
```

我的 mixin 似乎都没有在主文件中可用。mixins.less 文件在我的样式表的最顶部导入，并且只导入一次。

```
@import "mixins.less";
@import "reset.less";
@import "clearfix.less";
@import etc.. 
```

我还检查了每个文件的字节顺序标记，灵感来自[Variable Name Error "is undefined" 即使 "variables.less" 已导入](https://stackoverflow.com/questions/9146708/less-css-variable-name-error-is-undefined-even-though-variables-less-impo)，甚至在这个项目的 git 历史记录中回溯了 4 周（我 100% 确定编译运行成功）。到目前为止，我没有运气。

奇怪的是，编译使用[SimpLESS](http://wearekiss.com/simpless)和[Less Compiler for Mac](http://incident57.com/less/)成功运行。

我已将其缩小为导入问题，因为如果我尝试在样式表的顶部使用 mixin，并且该 mixin 的名称会引发错误。

有谁熟悉这种情况？

我正在使用[Less Ruby Gem](http://rubygems.org/gems/less/)的 2.2.1 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:44:27.970

我认为您需要位于包含您要编译的文件的目录中。而不是将命令运行为：

```
lessc static/css/styles.less 
```

尝试：

```
cd static/css
lessc styles.less 
```

# php - 我们如何在包括浏览的移动应用程序（android、iphone）中处理登录用户的会话管理

> ID：11231819
> 
> 赞同：0
> 
> 时间：2012-06-27T17:25:47.630
> 
> 标签：php, android, iphone, yii

我们正在开发一个在 YII PHP 框架中具有服务器端编码的移动应用程序（android、iphone）。有什么方法可以处理移动设备的登录会话和 cookie，或者 YII 是否支持任何设置来处理设备的 cookie 和会话？

我认为 Yii 对此提供了一些解决方案，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:39:38.923

Cookie 只是处理会话 ID 的最常用方法，如果在应用程序中更容易编码，会话 ID 可以作为 GET 参数发送。

```
session_id($_GET['session_id']); 
```

# c# - WCF 服务托管的 Windows 服务未在调用之间保存状态

> ID：11231822
> 
> 赞同：3
> 
> 时间：2012-06-27T17:26:07.753
> 
> 标签：c#, .net, wcf, windows-services

我正在尝试制作一个简单的 Windows 服务，该服务维护一个整数队列并通过 WCF 调用从其他应用程序接受新整数。我当前的实现似乎为与之通信的每个应用程序维护单独的队列，这不是我想要的。

我首先按照 Microsoft 关于[如何：在托管 Windows 服务中托管 WCF 服务](http://msdn.microsoft.com/en-us/library/ms733069.aspx)的说明进行操作。

我的 WindowsService 类如下所示：

```
public class MyWindowsService : ServiceBase{
    public ServiceHost serviceHost = null;

    public MyWindowsService(){
        ServiceName = "AdHocReportService";
    }
    public static void Main(){
        ServiceBase.Run(new MyWindowsService());
    }

    protected override void OnStart(string[] args){
        if (serviceHost != null)
            serviceHost.Close();

        serviceHost = new ServiceHost(typeof(MyService));
        serviceHost.Open();
    }
    protected override void OnStop(){
        if (serviceHost != null){
            serviceHost.Close();
            serviceHost = null;
        }
    }
} 
```

在我的 Service 类中，我有一个队列和一个 Add 方法。add 方法返回添加后队列中的项目数。代码如下所示：

```
public class MyService : IMyService
{
    private Queue<int> myQueue= new Queue<int>();

    public int Add(int reportId)
    {
        myQueue.Enqueue(reportId);
        return myQueue.Count;
    }
} 
```

最后，我在 ConsoleApp 中使用以下代码测试我的服务：

```
MyServiceClient client = new MyServiceClient();
int count = client.Add(10);
Console.WriteLine(count);  //prints 1
count = client.Add(25);
Console.WriteLine(count);  //prints 2
Console.ReadLine(); 
```

我希望这在第一次运行测试时打印 1 和 2，然后第二次打印 3 和 4，然后第三次打印 5 和 6，依此类推。但是，它每次只是简单地返回 1 和 2，就好像控制台应用程序正在实例化对象本身而不是在 Windows 服务内对对象进行操作一样。我不明白什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T17:31:11.780

我认为您需要`singleton`WCF 服务。见[这里](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx#S6)。

默认情况下，WCF 服务的实例模式是`per-call`. 因此，主机会为您进行的每次调用创建一个服务实例。

**注意：** 使用单例服务时，您的操作需要是**线程安全**的。所以我建议从 a 切换`Queue`到 a [`ConcurrentQueue`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)，这样你就可以处理多个并发客户端。

**替代方案：**使用[`MSMQ binding`](http://msdn.microsoft.com/en-us/library/ms789008.aspx). 这将确保您所有传入的消息都排在进程之外，因此在重新启动之间也保持不变。

# javascript - 第二个pageinit后jQuery移动触摸滑动失败

> ID：11231823
> 
> 赞同：1
> 
> 时间：2012-06-27T17:26:11.953
> 
> 标签：javascript, jquery, jquery-mobile

我正在开发一个使用 jQuery mobile 的网站。我使用 paginit 来实例化 touchswipe jQuery 插件。如果我从它被实例化的页面（'Home'）转到另一个页面（比如说'About'）回到主页它会失败。在所有其他情况下，它都有效。

从 pageinit 触发它的页面开始随时中断： Home > About > Home

任何其他时间都可以在多个 pageinit 上工作：关于 > 主页 > 信息 > 主页 > 关于 > 主页

注意::: 为了以防万一，我什至更改了 touchswipe 中所有函数的名称。

# javascript - 尝试遍历我的 json 时，我变得不确定

> ID：11231826
> 
> 赞同：0
> 
> 时间：2012-06-27T17:26:17.383
> 
> 标签：javascript, ajax, json

我正在尝试获取 JSON 响应并遍历数据。这是我得到的回复：

```
[{"category":{"category":"sell"},"subcategory":{"subcategory":"cars"}}] 
```

然后我通过 JSON.parse() 运行它，然后当我尝试访问数据时，我得到了未定义的数据。

```
for (var category in myJson) {
     console.log(category.category); //this is undefined
} 
```

有没有人知道为什么这不能按我的意图工作？我的 JSON 格式不正确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T17:30:51.547

试试这个：

```
for(var i in myJson)
   console.log(myJson[i]); 
```

您的代码是错误的，因为您试图访问迭代器变量的“类别”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:30:47.150

你`category.category`在你需要的地方写`myJson[category]`。

# javascript - 在哪里添加字符串原型

> ID：11231827
> 
> 赞同：10
> 
> 时间：2012-06-27T17:26:18.853
> 
> 标签：javascript, titanium, prototype

我目前在 Titanium Studio 中使用 JavaScript (CommonJS)，并且对原型设计有疑问。假设我想向现有类添加一个新函数。例如：

```
String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g,"");
} 
```

我应该在哪里添加此代码以便它立即可用于所有课程的最合适的位置是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T08:37:08.307

好的，我找到了最佳答案（Ivan Škugor），我想把它放在这里与有相同问题的人分享。谢谢你的帮助。

“一般来说扩展原生原型并不是一个好主意。在这种特殊情况下，这在其他一些环境中应该不是什么大问题，但是通过使用 CommonJs，这是一个问题，因为每个 CommonJs 模块都是新的 JS 上下文，这意味着, 干净的 JS 环境。因此，您对环境所做的任何事情（例如扩展原生原型）都不会反映在其他模块上。因此，最好是使用辅助函数编写“utils”模块并在任何地方“要求”它需要它。”

```
//utils.js
exports.trim = function(str) {
    return str.replace(/^\s+|\s+$/g,"");
}; 
```

— 伊万·斯库戈尔

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T17:28:51.050

只要确保在任何代码尝试使用它之前定义它，你就会被设置！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T17:43:22.887

你的例子很好用，因为大多数浏览器都有自己的 trim 方法，所以最好在添加你自己的之前测试原生：

```
String.prototype.trim= String.prototype.trim || function(){
    return this.replace(/^\s+/, '').replace(/\s+$/, '');
} 
```

# javascript - 在新窗口中获取路线 Google 地图 API v3

> ID：11231831
> 
> 赞同：1
> 
> 时间：2012-06-27T17:26:41.187
> 
> 标签：javascript, google-maps-api-3, drupal-7, window.open

我使用谷歌地图 js api 在我的联系页面中嵌入了谷歌地图。

我现在想做的就是当人们点击我的标记时，他们会去 maps.google.com 获取路线并查找更多信息。

```
 google.maps.event.addListener(marker, 'click', function () {
        window.open('http://goo.gl/muSZ5','_blank');
    }); 
```

那是我的代码，网址是 maps.google.com 的短网址，并添加了参数。

该脚本有效，但浏览器不会自动转到它打开的选项卡（因为它是由 javascript 触发器调用的）

有谁知道我该如何解决这个问题。

因此，单击标记，新窗口（选项卡）打开，自动转到该窗口（选项卡）

这是我的完整代码：

```
 (function ($) {
    Drupal.behaviors.location_block = {
        attach: function (context, settings) {
            console.log('test');
            var myOptions = {
                center: new google.maps.LatLng(50.87760,4.41923),
                zoom: 13,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                mapTypeControl: false
            };

            var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(50.87760,4.41923),
                map: map,
                title: "Ilias",
                html: ""
            });

            google.maps.event.addListener(marker, 'click', function () {
                window.open('http://goo.gl/maps/L3rK','_blank');
            });
        }
    };
})(jQuery); 
```

@EDIT @IMPORTANT 我发现问题仅在谷歌浏览器中，并且仅在我的网站中...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:01:08.413

它在我的机器上工作正常。请检查以下代码：

**HTML 代码：**

```
<script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<div id="map-canvas"></div>​ 
```

**JS代码：**

```
function initialize() {

    var myLatLng = new google.maps.LatLng( 50, 50 ),
        myOptions = {
            zoom: 4,
            center: myLatLng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
            },
        map = new google.maps.Map( document.getElementById( 'map-canvas' ), myOptions ),
        marker = new google.maps.Marker( {position: myLatLng, map: map} );
    google.maps.event.addListener(marker, 'click', function () {
       window.open('http://goo.gl/muSZ5','_blank');
    });
    marker.setMap( map );

}

initialize(); 
```

​CSS **代码：**

```
#map-canvas
{
height: 400px;
width: 500px;
}​ 
```

见[在线演示](http://jsfiddle.net/kvJas/)

# ant - 基于条件的antcall

> ID：11231838
> 
> 赞同：9
> 
> 时间：2012-06-27T17:27:17.287
> 
> 标签：ant, build, build-automation

这就是我想要实现的目标：

如果设置了属性，则调用 antcall 目标。这是可行的吗？有人能告诉我怎么做吗？

```
<condition>
    <isset property="some.property">
        <antcall target="do.something">
    </isset>
</condition> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T17:45:01.623

像这样的东西应该工作：

```
<if>
    <isset property="some.property"/>
    <then>
        <antcall target="do.something"/>
    </then>
</if> 
```

如果 then 条件需要[ant-contrib](http://ant-contrib.sourceforge.net/)，那么在 ant 中任何有用的东西也是如此。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-10T22:28:51.403

我知道我真的迟到了，但是如果您使用的是不支持嵌套 antcall 元素的 ant-contrib （我使用的是不支持的 antcontrib 1.02b），这是另一种方法。

```
<target name="TaskUnderRightCondition" if="some.property">
  ...
</target> 
```

您可以进一步扩展它以检查是否应该在调用此目标之前通过使用来设置 some.property，因为在评估 if 属性之前执行依赖。因此你可以有这个：

```
<target name="TestSomeValue">
  <condition property="some.property">
    <equals arg1="${someval}" arg2="${someOtherVal}" />
  </condition>
</target>

<target name="TaskUnderRightCondition" if="some.property" depends="TestSomeValue">
  ...
</target> 
```

在这种情况下 TestSomeValue 被调用，如果 someval == someOtherVal 然后 some.property 被设置，最后，TaskUnderRightCondition 将被执行。如果 someval != someOtherVal 则 TaskUnderRightCondition 将被跳过。

[您可以通过文档](http://ant.apache.org/manual/Tasks/conditions.html)了解有关条件的更多信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-14T16:07:06.573

还请考虑您可以出于以下目的调用 groovy：

```
<use-groovy/>
<groovy>
   if (Boolean.valueOf(properties["some.property"])) {
     ant.project.executeTarget("do.something")
   }
</groovy> 
```

# php - 成功 odbc_connect 到 Teradata 14.0 后 PHP odbc_exec 分段错误

> ID：11231842
> 
> 赞同：3
> 
> 时间：2012-06-27T17:27:35.437
> 
> 标签：php, odbc, teradata

我在 RHEL 5 上使用 PHP 5.3.3。我已经为 ODBC 连接到 Teradata 安装了所有必要的驱动程序和附加组件。我写了一个简单的脚本来测试它：

```
$con_string = "DRIVER={Teradata};DBCName=**HOST**; DATABASE=**database**;";
$con = odbc_pconnect( $con_string , "user", "pass" );
var_dump($con);
echo 'here';
$res = odbc_exec($con, "SELECT id FROM database.table");
echo 'there';
var_dump($res); 
```

输出如下：

> resource(5) 类型（odbc 链接持久）
> 
> 这里分段错误

* * *

显然，连接有效。我也尝试过其他命令，有些可以，有些不行。 `odbc_tables()`并`odbc_procedures()`毫无问题地返回正确的信息。但是，与 SQL 查询相关的任何内容都会出现段错误。我无法为 ODBC 打开跟踪/调试。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-20T19:34:54.760

`resultset`我在两次使用两个不同`odbc_exec`的 's时遇到了这个问题。它`unset($res)`在每个之前都解决了，`odbc_exec`所以`odbc_exec`总是开始使用一个干净的变量。

我还没有很好的解释“为什么”（可能以前的`resultset`变量需要正确的“关闭”......？），但这可以防止我的分段错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:17:48.123

你可以做的三件事。首先，（假设您使用的是 unixODBC）找到您的 odbcinst.ini 文件并添加：

[ODBC] Trace=是 TraceFile=/tmp/unixodbc.log

从命令行运行你的 PHP 脚本，你应该会得到一个日志。如果它在 unixODBC 或您的 ODBC 驱动程序中出现段错误，则最后一行应显示进入 ODBC API 但没有退出。然而，这只会给你一个关于它失败的地方的线索。

您可以做的第二件事是找到您的 php 可执行文件的位置并在调试器下运行它：

gdb /path/to/php

当您收到提示时，请执行以下操作：

r /path/to/my/php_script

当它出现分段故障时，使用回溯 (bt) 命令来显示它在哪里爆炸。

最后，您可能有一个 teradata ODBC 驱动程序，它不是使用相同的 ODBC 标头构建或定义为 PHP 和 unixODBC。这很难发现，但如果您使用的是 64 位机器，这是可能的。您可以使用 unixODBC 的 odbc_config 命令来了解 unixODBC 是如何构建的。特别是 odbc_config --ulen 和 --cflags。不幸的是，大多数基于 debian 的发行版还不包括 odbc_config - 也许你会在 redhat 上更幸运。您正在寻找的是使用 32 位 SQLULEN 和 64 位的 unixODBC/PHP 构建的 teradata - 如果您遇到这种情况，您肯定会遇到段错误。如果这是您的问题，您需要从 teradata 获得正确的构建或将所有内容切换到 32 位二进制文​​件。

有了这些信息，您也许能够找出问题所在。您可以随时发布 gdb 回溯或 unixODBC 日志文件的结尾，我可能会提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-16T08:37:12.487

我以前见过这个问题（特别是 Teradata ODBC 连接），记得必须修补和构建自定义 PHP 可执行文件才能使其正常工作。我对细节很了解，因为它是前一段时间的，但请记住它是由于 PHP 的 ODBC_pconnect 和 TD 驱动程序的问题。似乎 PHP 的 odbc_connect 也使用 odbc_pconnect 所以从来没有用过 - 一旦 odbc_connect 被修补以删除 odbc_pconnect 我可以按预期使用 PHP。

对不起，如果这是一个漫无边际的混乱，希望它会给你一些指示......

# iphone - 在 Objective-C 类别中使用静态变量

> ID：11231844
> 
> 赞同：4
> 
> 时间：2012-06-27T17:27:42.110
> 
> 标签：iphone, objective-c, ios

我希望能够做到以下几点：

```
NSString *hoursAndMinutes = [myNSDateObject formattedTime]; // eg. 10:25 
```

现在我可以在类上创建一个类别，`NSDate`但由于`NSDateFormatter`事实证明创建的成本非常高，我想使用我的`NSDateFormatter`. 这是否与类别的概念相矛盾，还是有更简洁的方法来实现这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T17:37:49.547

类别只会让您维护静态变量。但是对于您的实例，这将完美无缺。

为您的格式化程序创建一个类别

标题

```
@interface NSDateFormatter (myFormats)

+ (NSDateFormatter*) specialFormatting;

@end 
```

实施文件

```
@implementation NSDateFormatter (myFormats)

+ (NSDateFormatter*) specialFormatting{
    static NSDateFormatter *_specialFormatting;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _specialFormatting = [[NSDateFormatter alloc] init];
        // Continue Setting up this format;
    });
    return _specialFormatting;
}

@end 
```

然后确保在你想使用它的地方包含你的标题（我使用 prefix.pch 文件来包含我一直使用的东西）

那么您将不需要声明它并且可以从它所在的位置使用它。并且每次您需要时都不会创建该项目..

该对象永远不会被释放。但这就是你想要的。因为它仍然可以访问，所以它不是内存泄漏。

您还可以提供帮助方法，让您只取回字符串。

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T17:31:39.030

您可以为此使用静态变量（在文件范围或方法范围内），也可以将 NSDateFormatter 包装在单例中以从类别中使用。

我不会说这与类别的概念相矛盾，但可以肯定的是，对于许多程序员来说，使用静态变量或单例并不总是最好的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:31:46.883

您也可以在方法中创建静态变量。

# delphi - 如何使用 ADO 将值插入 Excel 文件？

> ID：11231845
> 
> 赞同：0
> 
> 时间：2012-06-27T17:27:50.677
> 
> 标签：delphi, ado, tadoquery

我正在使用以下代码在 Excel 文件中插入值：

```
sAppend:='INSERT INTO ["Excel 8.0;Database=' + Edit1.Text + ';"].[Sheet1$] (d) ' + FormatDateTime('d/m/yyyy', now)+';';
AdoQuery1.SQL.Text:=sAppend;
AdoQuery1.ExecSQL; 
```

完全显示了以前的例程。

连接到 Excel 文件

```
procedure TForm1.ConnectToExcel;  
var strConn :  widestring;
begin
  strConn:='Provider=Microsoft.Jet.OLEDB.4.0;' +
   'Data Source=' + Edit1.Text + ';' +
   'Extended Properties="Excel 8.0;HDR=Yes;IMEX=1";Persist Security Info=False';

  AdoConnection1.Connected:=False;
  AdoConnection1.ConnectionString:=strConn;
  try
    AdoConnection1.Open;
    AdoConnection1.GetTableNames(ComboBox1.Items,True);
  except
    ShowMessage('Unable to connect to Excel, make sure the workbook ' + Edit1.Text +     'exist!');
    raise;
  end;
end;(*ConnectToExcel*)

procedure TForm1.FetchData;
begin
  StatusBar1.SimpleText:='';

  if not AdoConnection1.Connected then ConnectToExcel;

  AdoQuery1.Close;
  AdoQuery1.SQL.Text:=Edit2.Text;
  try
    AdoQuery1.Open;
  except
    ShowMessage('Unable to read data from Excel, make sure the query ' + Edit1.Text + ' is meaningful!');
    raise;
  end;
end; 
```

谁能告诉我我做错了什么？

错误是“INSERT INTO 语句中的语法错误”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:52:00.523

找到解决方案：

```
sAppend:='INSERT INTO [Sheet1$] (d) values ("' + DateToStr(now) +'")';
AdoQuery1.SQL.Text:=sAppend;
AdoQuery1.ExecSQL; 
```

# sql-server - sp_send_dbmail 不工作

> ID：11231847
> 
> 赞同：1
> 
> 时间：2012-06-27T17:28:00.233
> 
> 标签：sql-server, sql-server-2008, tsql

我正在尝试（不成功）使用[sp_send_dbmail (Transact-SQL)](http://technet.microsoft.com/en-us/library/ms190307.aspx)。

**@recipients**值被称为是一个以分号分隔的*电子邮件地址列表，用于发送邮件。*

因此，在我的数据表的`Email`列中，我所要做的就是更新该行以发送给多个收件人：

**老的：** `JoeP@jp2code.net`

**新的：** `JoeP@jp2code.net; personB@jp2code.net`

没有错误，但是没有电子邮件出去。

我用来调用的代码`sp_send_dbmail`在我的存储过程中没有改变：

```
IF (0 < (SELECT COUNT(ID) FROM #Email)) BEGIN
    SELECT TOP 1 @ID=ID, @email=Email FROM #Email
    EXEC msdb.dbo.sp_send_dbmail @recipients=@email, @subject=@subj, @body=@html, @body_format='HTML', @from_address='no-reply@jp2code.net', @reply_to=@email;
    DELETE #Email WHERE @email=Email
END 
```

那么，**有什么问题呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:43:17.953

我可能发现了问题...

```
@reply_to=@email; 
```

[ @reply_to= ] 'reply_to' 是电子邮件消息的“回复地址”的值。它只接受一个电子邮件地址作为有效值。这是一个可选参数，用于覆盖邮件配置文件中的设置。此参数的类型为 varchar(MAX)。SMTP 安全设置确定是否接受这些覆盖。如果未指定参数，则默认为 NULL。

这解释了为什么它适用于单个地址，但不适用于多个地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:46:51.853

愚蠢的错误。

仔细看一下SQL：

```
IF (0 < (SELECT COUNT(ID) FROM #Email)) BEGIN
    SELECT TOP 1 @ID=ID, @email=Email FROM #Email
    EXEC msdb.dbo.sp_send_dbmail
            @recipients=@email, 
            @subject=@subj, 
            @body=@html, 
            @body_format='HTML', 
            @from_address='no-reply@jp2code.net', 
            @reply_to=@email;
    DELETE #Email WHERE @email=Email
END 
```

现在大家看到问题了吗？

*提示：看`reply_to`场地。*

# html - 使用 HTML 5 画布在图像上绘制一些矩形

> ID：11231853
> 
> 赞同：1
> 
> 时间：2012-06-27T17:28:32.667
> 
> 标签：html, canvas

在我的 Web 应用程序中，我希望用户能够在图像上绘制一些矩形，还可以更改矩形的大小并拖放它们。之后我必须获取矩形的坐标并将它们发送到服务器的数据库
是在照片上创建画布还是在画布中加载图像更好？
我还没有编写任何代码，因为我不知道该怎么做。

任何想法、建议、链接、库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:49:46.207

正如评论所说，画布是一个很好的选择，但你需要做一些编码才能让它工作。

[实际上，我有一个关于通过绘制矩形和移动它们来](http://simonsarris.com/blog/510-making-html5-canvas-useful)使 Canvas 交互的教程。它应该为您提供该项目的良好开端。

还有一些库，例如[fabricJS](http://fabricjs.com/)，但如果不深入库，可能很难获得坐标。

# haskell - Haskell 数字和类型系统？

> ID：11231859
> 
> 赞同：13
> 
> 时间：2012-06-27T17:28:49.017
> 
> 标签：haskell, types, numbers

我有这段 Javascript 代码：

```
N1 = Math.floor(275 * month / 9)
N2 = Math.floor((month + 9) / 12)
N3 = (1 + Math.floor((year - 4 * Math.floor(year / 4) + 2) / 3))
N = N1 - (N2 * N3) + day - 30
return N 
```

我试图将其移植到 Haskell 中。像这样：

```
day_of_year year month day = n1 - (n2 * n3) + day - 30
  where
    n1 = floor(275 * fromIntegral month / 9)
    n2 = floor( month + 9 / 12)
    n3 =  1 +  floor((year - 4 * floor(fromIntegral year / 4) + 2) / 3) 
```

它不起作用:(
这是我的问题：

1.  为什么`n1`类型写得像 但`n1 :: (Integral b, RealFrac a) => a -> b`
    不像`n1 :: (RealFrac a, Integral b) => a -> b`
    `floor :: (Integral b, RealFrac a) => a -> b`

    > **回答：****=>**左边的顺序不重要，
    > ghci一般会尽量保持和声明中的顺序一样，
    > 但有时默认为abc排序

2.  此语句是否正确：*`n1`采用整数并返回 RealFrac。*

    > **Answer:** Yes. If we know that ordering is unimportant at left side of **=>**
    > then we also know that (Integral b, RealFrac a) === (RealFrac a, Integral b)
    > what only matters are types **a -> b**
    > or in this case **Integral -> RealFrac**

3.  `n3` have Monomorphism sickness. How can it be cured?
    I am more interested in big picture of than just making this f work. I have read about mono... but I have no idea where to put :: in this case :(

    > **Answer:** No monomorphism here. Look at FUZxxl's answer :)

4.  Can `day_of_year` be like this: `Integral -> Integral -> Integral -> Integral`?
    Takes 3 Integrals and return Integral result.

    > **Answer:** Yes it can! It can also be
    > :: Integral a => a -> a -> a -> a
    > :: Int -> Int -> Int -> -> Int
    > :: (Integral a, Integral a2, Integral a1) => a -> a1 -> a2 -> a2

5.  I suppose `day_of_year` could take only 3 Ints or 3 Integers. It could not take a mix like 2 Ints 1 integer. Right?

    > FUZxxl: No, it can take a mix of different argument types! Look at Follow up 4!!!

6.  Is it possible to create `day_of_year` to take 3 Nums and return a Num?

    > FUZxxl: Yes it is! Put a fromEnum in front of year, month and day

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-27T18:06:07.533

Okay. Whenever you have type-problems, it's the best way to start by giving explicit type annotations to the compiler. Since `day`, `month` and `year` are probably not too big, it's a good idea to make them `Int`s. You also apparently missed a brace, I fixed that for you:

```
day_of_year :: Int -> Int -> Int -> Int
day_of_year year month day = n1 - (n2 * n3) + day - 30
  where
    n1 = floor(275 * fromIntegral month / 9)
    n2 = floor((month + 9) / 12)
    n3 =  1 +  floor((year - 4 * floor(fromIntegral year / 4) + 2) / 3) 
```

When I try to compile this, GHC spits out this rather lengthy error message:

```
bar.hs:8:16:
    No instance for (RealFrac Int)
      arising from a use of `floor'
    Possible fix: add an instance declaration for (RealFrac Int)
    In the second argument of `(+)', namely
      `floor ((year - 4 * floor (fromIntegral year / 4) + 2) / 3)'
    In the expression:
      1 + floor ((year - 4 * floor (fromIntegral year / 4) + 2) / 3)
    In an equation for `n3':
        n3 = 1 + floor ((year - 4 * floor (fromIntegral year / 4) + 2) / 3)

bar.hs:8:68:
    No instance for (Fractional Int)
      arising from a use of `/'
    Possible fix: add an instance declaration for (Fractional Int)
    In the first argument of `floor', namely
      `((year - 4 * floor (fromIntegral year / 4) + 2) / 3)'
    In the second argument of `(+)', namely
      `floor ((year - 4 * floor (fromIntegral year / 4) + 2) / 3)'
    In the expression:
      1 + floor ((year - 4 * floor (fromIntegral year / 4) + 2) / 3)

```

The second error is the important error, the first one is more a follow-up. It essentially says: `Int` does not implement division not `floor`. In Haskell, integral division uses a different function (`div` or `quot`), but you want floating division here. Since `year` is pinned to be an `Int`, the subtrahend `4 * floor(fromIntegral year / 4) + 2` is also pinned to be an `Int`. Then you divide by 3, but as said before, you can't use a floating division. Let's fix that by 'casting' the whole term to another type with `fromIntegral` before dividing (as you did before).

`fromIntegral` has the signature `(Integral a, Num b) => a -> b`. This means: `fromIntegral` takes a variable of an integral type (such as `Int` or `Integer`) and returns a variable of any numeric type.

Let's try to compile the updated code. A similar error appears in the defintion of `n2`, I fixed it as well:

```
day_of_year :: Int -> Int -> Int -> Int
day_of_year year month day = n1 - (n2 * n3) + day - 30
  where
    n1 = floor(275 * fromIntegral month / 9)
    n2 = floor((fromIntegral month + 9) / 12)
    n3 =  1 +  floor(fromIntegral (year - 4 * floor(fromIntegral year / 4) + 2) / 3) 
```

This code compiles and runs fine (on my machine). Haskell has certain type-defaulting rules, causing the compiler to pick `Double` as the type for all floating divisions.

Actually, you can do better than that. How about using integer division instead of repeated float-point conversions?

```
day_of_year :: Int -> Int -> Int -> Int
day_of_year year month day = n1 - (n2 * n3) + day - 30
  where
    n1 = 275 * month `quot` 9
    n2 = (month + 9) `quot` 12
    n3 = 1 + (year - 4 * (year `quot` 4) + 2) `quot` 3 
```

This algorithm should always yield the same result as the floating point version above. It's just probably about ten times faster. The backticks allow me to use a function (`quot`) as an operator.

About your sixth point: Yes, it would be pretty easy to do that. Just put a `fromEnum` in front of `year`, `month` and `day`. The function `fromEnum :: Enum a => a -> Int` converts any enumeration type to an `Int`. All available numeric types in Haskell (except the complex ones iirc) are member of the class `Enum`. It's not a very good idea though, dince you usually have `Int` arguments and superfluous function calls can slow down your program. Better convert explicitly, except if your function is expected to be used with many different types. Actually, don't worry about micro-optimizations too much. ghc has a complicated and somewhat arcane optimization infrastructure that makes most programs blazing fast.

## Amendment

### Follow-up 1, 2 and 3

Yes, your reasoning is about right.

### Follow-up 4

If you don't give the floating-point variant of `day_of_year` a type-signature, its type defaults to `day_of_year :: (Integral a, Integral a2, Integral a1) => a -> a1 -> a2 -> a2`. This essentially means: `day`, `month` and `year` can be of an arbitrary type that implements the `Integral` typeclass. The function returns a value of the same type as `day`. In this case, `a`, `a1` and `a2` are just different *type variables* - yes, Haskell also has variables on type level (and also on kind level [which is the type of a type], but that's another story) - that can be satisfied with any type. So if you have

```
day_of_year (2012 :: Int16) (5 :: Int8) (1 :: Integer) 
```

The variable `a` gets instaniated to `Int16`, `a1` becomes `Int8` and `a2` becomes `Integer`. So what's the return-type in this case?

> It's `Integer`, have a look at the type-signature!

### Follow-up 5

In fact, you are and aren't at the same time. Making the type as general as possible certainly has its advantages, but at the it confuses the typechecker, because When the types involved in a term without an explicit type-annotation are too general, the compiler may find out that there is more than one possible type for a term. This may either cause the compiler to pick a type by some standardized albeit somewhat unintuitive rules, or it simply greets you with a strange error.

If you really need a general type, strive for something like

```
day_of_year :: Integral a => a -> a -> a -> a 
```

That is: arguments may be of arbitrary `Integral` type, but all arguments must have the same type.

Always remember that Haskell *never casts types*. It's almost impossible to infer types completely when there is (automatic) casting involved. You only cast manually. Some people might now tell you about the function `unsafeCoerce` in the module `Unsafe.Coerce`, which has the type `a -> b`, but you actually don't want to know. It probably doesn't do what you think it does.

### Follow-up 6

There is nothing wrong with `div`. The difference starts to appear when negative numbers are involved. Modern processors (like those made by Intel, AMD and ARM) implement `quot` and `rem` in hardware. `div` also uses these operations but does some twiddling to get a different behavior. That unneccessarily slows down computations when you don't really depend on the exact behavior regarding negative numbers. (There are actually a few machines that implement `div` but not `quot` in hardware. The only one I can remember right now is [mmix](/questions/tagged/mmix "show questions tagged 'mmix'") though)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T05:04:28.167

I have too many follow up questions for a simple comment.

1.  `n1` is obvious. `fromIntegral` takes `month` and cast it to some type nesesary for `/`.
    Am I right here?

    > Yes.

2.  But in `n2` we can assume
    `fromIntegral(month + 9)` === `(fromIntegral month + 9)`

    *   In first case `month` and `9` are added and then casted to some type for `/` This works because `+` is in `Num`, so every number could be `+` without casting. And raw numbers like `1,2,3` are also `Num` type.
    *   Second case have some kind of "delayed casting". `(fromIntegral month + 9)` have type `Num a => a` but because of `/12` compiler cast `month` AND `9` to some type compatible with `/`.
        Did I get this correct?

        > ! Yes.

3.  FUZxxl, man, thank you!
    I was so close to solving this by tinkering with code and putting `fromIntegral` at random.
    But making code work is NOT the same as knowing why are we doing something!

    *   Both `floor` AND `/` are not allowed for `Integral`!
    *   `n3`, second `year` variable: By using `floor(fromIntegral year / 4)` I eccidently made a result that `floor` could use. And that expression made whole
        `(year - 4 * floor(fromIntegral year / 4) + 2)` an `Integral` typeclass!
        Thus making impossible for `/3` and first `floor` to work.
        Is my logic ok?

        > ! Yes.

4.  Your typing works: `day_of_year :: Int -> Int -> Int -> Int`
    My typing also works: `day_of_year :: Integral a => a -> a -> a -> a`
    Auto-typing: `day_of_year :: (Integral a, Integral a2, Integral a1) => a -> a1 -> a2 -> a2`
    What does this mean? What are a1, a2? Why a, a1, a2?

    > Awesome answer in Follow-up 4

5.  Am I making a mistake here trying to create general function that takes `Integral` instead of specific `Int` or `Integer`?

    *   In JavaScript everything is autocasted/dynamically typed into/from type `Number`.
    *   In C++ there are [templates](http://www.cplusplus.com/doc/tutorial/templates/) so generic function works on many types.

        > ! Look at Follow-up 5

6.  Why did you use `quot` instead of `div`?
    Yesterday I tried exactly what you did with `div` and `ghci` *rewarded* me with:
    `No instance for (Integral (Car -> Int)) arising from a use of div`

    *   What is this error?
    *   What's the difference between div and quot in this case?

        > ! I accidentally erased **year** and **month** from function definition
        > ! day_of_year day = ...
        > ! and that error appeared.

p.s. Google: *No results found for haskell "(Integral (Car -> Int))"*

> Even Google can not find my typos ;)))

# javascript - 使用 Bootstrap Modal 窗口作为 PartialView

> ID：11231862
> 
> 赞同：68
> 
> 时间：2012-06-27T17:29:03.687
> 
> 标签：javascript, asp.net-mvc, twitter-bootstrap, modal-dialog

我希望使用[Twitter Bootstrap 模态窗口](http://twitter.github.com/bootstrap/javascript.html)作为局部视图。但是，我真的不认为它是为这种方式设计的。似乎它是为了以相当静态的方式使用。尽管如此，我认为能够将其用作局部视图会很酷。

例如，假设我有一个游戏列表。单击给定游戏的链接后，我想从服务器请求数据，然后在当前页面“顶部”的模式窗口中显示有关该游戏的信息。

我做了一些研究，发现[这篇文章](https://stackoverflow.com/questions/10626885/passing-data-to-a-bootstrap-modal)相似但不完全相同。

有没有人尝试过这个成功或失败？有人在 jsFiddle 上有一些东西或他们愿意分享的一些资源吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-06-27T20:53:13.573

是的，我们已经做到了。

在您的 Index.cshtml 中，您将拥有类似..

```
<div id='gameModal' class='modal hide fade in' data-url='@Url.Action("GetGameListing")'>
   <div id='gameContainer'>
   </div>
</div>

<button id='showGame'>Show Game Listing</button> 
```

然后在同一页面的 JS 中（内联或在单独的文件中，您将拥有类似这样的内容..

```
$(document).ready(function() {
   $('#showGame').click(function() {
        var url = $('#gameModal').data('url');

        $.get(url, function(data) {
            $('#gameContainer').html(data);

            $('#gameModal').modal('show');
        });
   });
}); 
```

在你的控制器上使用一个看起来像这样的方法..

```
[HttpGet]
public ActionResult GetGameListing()
{
   var model = // do whatever you need to get your model
   return PartialView(model);
} 
```

您当然需要在 Views 文件夹中创建一个名为 GetGameListing.cshtml 的视图。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T17:46:45.553

我用[mustache.js](https://github.com/janl/mustache.js/)和模板来做这个（你可以使用任何 JavaScript 模板库）。

在我看来，我有这样的事情：

```
<script type="text/x-mustache-template" id="modalTemplate">
    <%Html.RenderPartial("Modal");%>
</script> 
```

...这让我可以将我的模板保存在一个名为的局部视图中`Modal.ascx`：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl" %>
    <div>
        <div class="modal-header">
            <a class="close" data-dismiss="modal">&times;</a>
            <h3>{{Name}}</h3>
        </div>
        <div class="modal-body">
            <table class="table table-striped table-condensed">
                <tbody>
                    <tr><td>ID</td><td>{{Id}}</td></tr>
                    <tr><td>Name</td><td>{{Name}}</td></tr>
                </tbody>
            </table>
        </div>
        <div class="modal-footer">
            <a class="btn" data-dismiss="modal">Close</a>
        </div>
    </div> 
```

我在我的视图中为每个模态创建占位符：

```
<%foreach (var item in Model) {%>
    <div data-id="<%=Html.Encode(item.Id)%>"
         id="modelModal<%=Html.Encode(item.Id)%>" 
         class="modal hide fade">
    </div>
<%}%> 
```

...并使用 jQuery 进行 ajax 调用：

```
<script type="text/javascript">
    var modalTemplate = $("#modalTemplate").html()
    $(".modal[data-id]").each(function() {
        var $this = $(this)
        var id = $this.attr("data-id")
        $this.on("show", function() {
            if ($this.html()) return
            $.ajax({
                type: "POST",
                url: "<%=Url.Action("SomeAction")%>",
                data: { id: id },
                success: function(data) {
                    $this.append(Mustache.to_html(modalTemplate, data))
                }
            })
        })
    })
</script> 
```

然后，您只需要某个地方的触发器：

```
<%foreach (var item in Model) {%>
    <a data-toggle="modal" href="#modelModal<%=Html.Encode(item.Id)%>">
        <%=Html.Encode(item.DutModel.Name)%>
    </a>
<%}%> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T20:39:31.430

我通过使用我在[这里](http://ricardocovo.com/2012/04/06/asp-mvc3-editing-records-with-jqueryui-dialogs-and-ajaxforms-razor-version/)找到的一个很好的例子来实现这一点。我已经用 Twitter Bootstrap 模态窗口替换了该示例中使用的 jquery 对话框。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-07T19:38:41.113

完整清晰的示例项目 [http://www.codeproject.com/Articles/786085/ASP-NET-MVC-List-Editor-with-Bootstrap-Modals](http://www.codeproject.com/Articles/786085/ASP-NET-MVC-List-Editor-with-Bootstrap-Modals) 它显示了使用引导程序创建、编辑和删除实体操作模式，还包括代码处理从这些实体操作（c#、JSON、javascript）返回的结果

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-20T16:21:15.437

我使用 AJAX 来做到这一点。您对典型的 twitter 模态模板 html 有部分内容：

```
<div class="container">
  <!-- Modal -->
  <div class="modal fade" id="LocationNumberModal" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">
            &times;
          </button>
          <h4 class="modal-title">
            Serial Numbers
          </h4>
        </div>
        <div class="modal-body">
          <span id="test"></span>
          <p>Some text in the modal.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</div> 
```

然后你有你的控制器方法，我使用 JSON 并有一个自定义类将视图呈现为字符串。我这样做是为了通过一个 ajax 调用在屏幕上执行多个 ajax 更新。在此处参考：[示例](https://stackoverflow.com/questions/17554734/mvc-render-partialviewresult-to-string)，但如果您只是进行一次调用，则可以在返回时使用 PartialViewResult/ActionResult。我将使用 JSON 显示它..

控制器中的 JSON 方法：

```
public JsonResult LocationNumberModal(string partNumber = "")
{
  //Business Layer/DAL to get information
  return Json(new {
      LocationModal = ViewUtility.RenderRazorViewToString(this.ControllerContext, "LocationNumberModal.cshtml", new SomeModelObject())
    },
    JsonRequestBehavior.AllowGet
  );
} 
```

然后，在视图中使用您的模态：您可以将 AJAX 打包在您的部分中并调用 @{Html.RenderPartial... 或者您可以使用一个带有 div 的占位符：

```
<div id="LocationNumberModalContainer"></div> 
```

然后你的ajax：

```
function LocationNumberModal() {
  var partNumber = "1234";

  var src = '@Url.Action("LocationNumberModal", "Home", new { area = "Part" })'
    + '?partNumber='' + partNumber; 

  $.ajax({
    type: "GET",
    url: src,
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function (data) {
      $("#LocationNumberModalContainer").html(data.LocationModal);
      $('#LocationNumberModal').modal('show');
    }
  });
}; 
```

然后是您的模态按钮：

```
<button type="button" id="GetLocBtn" class="btn btn-default" onclick="LocationNumberModal()">Get</button> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-27T15:44:27.860

将 modal 和 javascript 放入局部视图。然后在您的页面中调用局部视图。这也将处理表单提交。

局部视图

```
<div id="confirmDialog" class="modal fade" data-backdrop="false">
 <div class="modal-dialog" data-backdrop="false">
    <div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title">Missing Service Order</h4>
        </div>
        <div class="modal-body">
            <p>You have not entered a Service Order. Do you want to continue?</p>
        </div>
        <div class="modal-footer">
            <input id="btnSubmit" type="submit" class="btn btn-primary" 
              value="Submit" href="javascript:" 
               onClick="document.getElementById('Coordinate').submit()" />
            <button type="button" class="btn btn-default" data- 
                                               dismiss="modal">Cancel</button>
        </div>
    </div>
  </div>
</div> 
```

Javascript

```
 <script type="text/javascript" language="javascript">
$(document).ready(function () {
    $("#Coordinate").on('submit',
        function (e) {
            if ($("#ServiceOrder").val() == '') {
                e.preventDefault();
                $('#confirmDialog').modal('show');
               }
            });
    });
</script> 
```

然后只需在页面的表单中调用您的部分。

创建.cshtml

```
 @using (Html.BeginForm("Edit","Home",FormMethod.Post, new {id ="Coordinate"}))
 {
     //Form Code

     @Html.Partial("ConfirmDialog") 
 } 
```

# core-data - 一对多的核心数据删除规则

> ID：11231864
> 
> 赞同：1
> 
> 时间：2012-06-27T17:29:14.920
> 
> 标签：core-data

从我一直在阅读的内容来看，对于像这样的关系`department <->> employee`，我无法设置一个简单的删除规则，如果一个部门中的最后一个员工被删除，就会导致部门被删除。相反，我必须编写这条规则。

我想我可能会使用键值观察，以及`didChangeValueForKey:`部门实体的方法。我想以 DRY 的方式将此删除操作集中到一个地方。

我不希望部门实体可以删除自己，如下所示：

```
- (void) didChangeValueForKey:key {
    if (![key isEqualToString @"employee") return;
    if (self.employee == NULL)
        [self deleteAndSave];  // a category method
} 
```

所以我可能会发布通知，而不是

```
- (void) didChangeValueForKey:key {
    if (![key isEqualToString @"employee") return;
    if (self.employee == NULL)
        [[NSNotificationCenter defaultCenter] postNotificationName:@"empDelete" object:self];
} 
```

然后在我处理托管对象上下文之类的对象中进行删除。

我是否错过了一些可以让这更容易的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:43:30.573

删除规则的好地方是`-(void)prepareForDeletion`. 您可以实现您需要的任何行为，从最简单到最复杂。

删除部门时，例如，您可以将该部门的所有员工移至上级部门（如果有）。删除员工时，可以检查上级部门是否还有员工，如果留空则删除。你的来电。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:37:35.167

您的解决方案似乎很好，这里有一些其他可能的方法。 [核心数据删除规则和多对多关系](https://stackoverflow.com/questions/1612356/core-data-deletion-rules-and-many-to-many-relationships)

# ruby-on-rails - 如何设置 Rubber + resque_web + nginx

> ID：11231866
> 
> 赞同：2
> 
> 时间：2012-06-27T17:29:28.757
> 
> 标签：ruby-on-rails, nginx, resque

使用 Rubber，我使用 resque 和 redis 硫化了我现有的项目。我把它全部部署好了。点击 web_tools 索引会显示一个 Resque 链接。但是点击它给了我一个404。

我认为 nginx 不知道如何处理“/resque”，所以我添加了文件`config/rubber/role/web_tools/resque-nginx.conf`：

```
<% if resque_host = rubber_instances.for_role('resque_web').first %>

  <%
    @path = "/etc/nginx/rubber/tools/resque.conf"
  %>

  location /resque
  {
    proxy_pass http://<%= resque_host.full_name %>:<%= rubber_env.resque_web_port %>;
  }

<% end %> 
```

本质上是从同一目录复制 haproxy-nginx.conf 文件。

**我的第一个问题是**- 为什么我需要这样做？硫化应该这样做还是我已经做错了什么？

继续。这个 nginx 配置不起作用。但是我走得更远了，至少我现在正在访问 WEBrick 服务器。我有一个页面说：

```
Sinatra doesn’t know this ditty. 
```

所以我改变了我的配置，认为 Resque 的 WEBrick 服务器不知道 /resque 是什么：

```
location /resque
{
  rewrite ^/resque/(.*) /$1 break;
  proxy_pass http://<%= resque_host.full_name %>:<%= rubber_env.resque_web_port %>;
} 
```

这有效，但前提是我手动转到`https://myhost.com/resque/overview`（Rubber 添加到您的工具索引页面的链接只是`/resque`）。但是 resque 网页上的所有其他链接（包括任何 CSS 和 .js 文件）现在都已损坏，因为这些链接没有以`resque/`. 换句话说，Working 的链接只是，`/working`但它需要`/resque/working`让 nginx 知道如何处理它。

我已经尝试过其他方法，例如摆脱重写并更改索引页面指向，`resque/overview`但这仍然给了我“Sinatra 不知道这个小调”页面。

我试过了：

```
location /resque
{
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header Host $http_host;
  proxy_redirect off;
  proxy_pass http://<%= resque_host.full_name %>:<%= rubber_env.resque_web_port %>;
} 
```

当我点击`/resque`或时，我得到“Sinatra...ditty”页面`/resque/overview`。

然后我将重写添加回：

```
location /resque
{
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header Host $http_host;
  proxy_redirect off;
  rewrite ^/resque/(.*) /$1 break;
  proxy_pass http://<%= resque_host.full_name %>:<%= rubber_env.resque_web_port %>;
} 
```

这与没有所有代理调用的结果相同。

**有谁知道如何让 nginx 和 Resque Web 服务器很好地协同工作？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T07:01:25.970

哇，真是巧合。我正在努力从 Rubber 1.15 -> 2.0.5 升级我们的应用程序，昨天我遇到了这个问题！

是`rubber vulcanize resque`的，应该注意这一点，但显然没有人编写 Nginx 代理配置。

您在 Nginx 的第一次尝试几乎是正确的做法。

CSS、图像和链接损坏的原因是 resque-web 正在寻找与 resque-web 应用程序的根相关的所有内容。您需要更改 resque-web Rack 文件 (/config/resque-web.ru) 以在 /resque 的子目录中启动应用程序。这样，一切都是相对的（/resque/overview 等）并且没问题。

我昨天提交了一个[拉取请求](https://github.com/wr0ngway/rubber/pull/176)来为未来的用户解决这个问题，但是你可以将这些更改应用到你的项目中，一切都会为你工作。

如果这不起作用，请告诉我。

# zend-framework - Zend：表单验证：在 haystack 错误中找不到值

> ID：11231870
> 
> 赞同：15
> 
> 时间：2012-06-27T17:29:38.633
> 
> 标签：zend-framework

我有一个有 2 个选择的表格。根据第一个选择的值，它使用 AJAX 更新第二个选择的值。这样做会使表单无效。所以，我做了下一个改变：

```
 $form=$this->getAddTaskForm(); //the form

        if(!$form->isValid($_POST)) {
            $values=$form->getValues();

            //get the options and put them in $options

                $assignMilestone=$form->getElement('assignedMilestone');
                $assignMilestone->addMultiOptions($options);

        }

        if($form->isValid($_POST)) {
               //save in the database
            }else {
               //redisplay the form
            } 
```

基本上，我检查它是否有效，如果用户更改了第一个选择的值，则不是。我得到填充第二个选择的选项并用它们填充表单。然后我尝试再次验证它。但是，这不起作用。任何人都可以解释为什么？存在相同的“在大海捞针中找不到值”。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-28T12:37:25.977

您可以尝试停用验证器：

在你的 Form.php

```
$field = $this->createElement('select', 'fieldname');
$field->setLabel('Second SELECT');
$field->setRegisterInArrayValidator(false);
$this->addElement($field); 
```

第三行将停用验证器，它应该可以工作。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-11-07T19:09:04.310

您还可以使用 'disable_inarray_validator' => true 禁用 InArray 验证器：

例如：

```
 $this->add( array(
        'name'     => 'progressStatus',
        'type'     => 'DoctrineModule\Form\Element\ObjectSelect',
        'options' => array(
            'disable_inarray_validator' => true,
        ),

    )); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-17T15:47:36.003

另外，您应该添加自己的 InArray Validator 以保护您的数据库等。

在 Zend Framework 1 中，它看起来像这样：

```
$this->addElement('select', $name, array(
            'required' => true,
            'label' => 'Choose sth:',
            'filters' => array('StringTrim', 'StripTags'),
            'multiOptions' => $nestedArrayOptions,
            'validators' => array(
                array(
                    'InArray', true, array(
                        'haystack' => $flatArrayOptionsKeys,
                        'messages' => array(
                            Zend_Validate_InArray::NOT_IN_ARRAY => "Value not found"
                        )
                    )
                )
            )
        )); 
```

$nestedArrayOptions 是你的 multiOptions 并且 $flatArrayOptionsKeys 包含你所有的键。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-01T01:06:32.477

您还可以在检查表单验证之前添加选项以选择元素。这样您就可以确保选择值在范围内。

# perl - 在草莓上安装 wxPerl

> ID：11231871
> 
> 赞同：5
> 
> 时间：2012-06-27T17:30:07.207
> 
> 标签：perl, installation, wxwidgets, strawberry-perl, wxperl

我正在尝试在草莓上安装 wxperl。我无法安装 Alien::wxWidgets。我尝试了我能想到的一切。通常我会收到这样的错误：

```
Creating library file: ..\..\src\stc\..\..\..\lib\gcc_dll\libwxmsw28u_stc.a
compilet.exp:fake:(.edata+0x3c): undefined reference to `boot_compilet'
compilet.exp:fake:(.edata+0x40): undefined reference to `boot_compilet' 
```

我不知道那是什么意思。我尝试使用 wxWidgets v 2.8.12 和 2.9.3 以及各种选项。我从 cpanm 开始，后来使用各种选项手动调用 perl Build.PL。

我在 Windows 7 64 位。我尝试了 5.14.2 32 位和 64 位。我很确定我的路径除了我当前使用的那个之外没有其他 perl 安装。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T21:22:48.577

在 Windows 7 上使用草莓-perl-5.16.3.1-32bit。

看起来即使构建过程因上面的错误消息而崩溃，但 Alien::wxWidgets 实际上已经成功构建，并且可以安装了。

从 SVN 主干构建 Alien::wxWidgets 时得到相同的错误消息。我运行了“构建测试”并且测试通过了，所以我运行了“构建安装”。wx编译成功，所有测试通过。Padre 编辑器编译成功，所有测试通过，运行良好。

也可以在 Strawberry perl 中通过 PPM 安装：

ppm 设置存储库 wxPerl [http://www.wxperl.co.uk/repo29](http://www.wxperl.co.uk/repo29)（用于 WxWidgets-2.9.4）

ppm 安装 Alien::wxWidgets (版本 0.61)

不幸的是，最新版本的 Padre 编辑器需要 Alien::wxWidgets 0.62，因此需要从源代码构建 Alien::wxWidgets 才能从 CPAN 制作 Padre。

或者，您可以使用 Mark Dootson 创建的 Citrus Perl 发行版。需要注意的是，Perl 的版本 5.16.1 不是最新的，但它比 Strawberry Perl 5.14.2.1 RC 的 DWIM Perl 版本更新。

出于安全原因，我建议使用最新的 Strawberry Perl 5.16.3 或 5.14.4.1，因为它修复了可用于拒绝服务攻击的重新散列漏洞。此处描述：

[http://www.vuxml.org/freebsd/CVE-2013-1667.html](http://www.vuxml.org/freebsd/CVE-2013-1667.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T02:05:13.047

一个想法是安装[DWIM Perl](http://dwimperl.com/)，这是一个 Perl 发行版，其中包含预装了很多常用 CPAN 模块的 Strawberry，并且包括`Alien::wxWidgets`.

# objective-c - 如何让 NSView 的背景图不重复？

> ID：11231874
> 
> 赞同：2
> 
> 时间：2012-06-27T17:30:11.173
> 
> 标签：objective-c, macos, cocoa

我想复制以下 CSS 代码获得的效果：

```
background: white url(./img/background.png) no-repeat; 
```

我已经编写了 NSView 的子类并`drawRect`以这种方式覆盖：

```
- (void)drawRect:(NSRect)dirtyRect
{
    dirtyRect = [self bounds];

    [[NSColor whiteColor] setFill];
    NSRectFill(dirtyRect);

    [[NSColor colorWithPatternImage:[NSImage imageNamed:@"background.png"]] setFill];
    NSRectFill(dirtyRect);
} 
```

（我为我糟糕的英语道歉）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:16:02.557

看看`NSImage` [类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsimage_Class/Reference/Reference.html)。[可以使用drawInRect:fromRect:operation:fraction:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsimage_Class/Reference/Reference.html#//apple_ref/occ/instm/NSImage/drawInRect%3afromRect%3aoperation%3afraction%3a)绘制图像，也可以使用[drawAtPoint:fromRect:operation:fraction:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsimage_Class/Reference/Reference.html#//apple_ref/occ/instm/NSImage/drawAtPoint%3afromRect%3aoperation%3afraction%3a)绘制图像。

所以你可以使用这个：

```
[[NSImage imageNamed:@"background.png"] drawInRect:dirtyRect fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1]; // Passing NSZeroRect causes the entire image to draw. 
```

取而代之的是：

```
[[NSColor colorWithPatternImage:[NSImage imageNamed:@"background.png"]] setFill];
    NSRectFill(dirtyRect); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:15:52.697

只需使用`NSImage drawInRect:fromRect:operation:fraction:`在视图中绘制图像，而不是用图案颜色填充矩形。

# joomla - 在模板上获取德德玛特价格

> ID：11231880
> 
> 赞同：0
> 
> 时间：2012-06-27T17:30:29.673
> 
> 标签：joomla, helper, virtuemart

我是 joomla 的新手，我快疯了，因为我想只使用产品的 ID 在模板上获取产品的价格（和另一个元数据），有没有人能告诉我如何获得它，也许用**助手**或静态**方法**或**实例化一个类**？（我已经用谷歌搜索过了）。它是 Virtuemart 1.1.3 和 joomla 1.5.10。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:54:48.063

仍然不清楚你想在哪里使用它，但如果你想从 VM 中获取产品信息，你可以查看很多地方，看看它是否适合你想要完成的任务：

**Virtuemart 自定义 Theme.php**

发现于`components\com_virtuemart\themes\default\theme.php`。允许您编写自定义函数来访问 VM 中的任何内容以供您自己使用。

```
/**
* This is the theme's function file.
* It allows you to declare additional functions and classes
* that may be used in your templates
* 
```

**在 Flypage 上浏览结果**

搜索/浏览保存了许多产品字段 - 它们被保存到`html\show.browse.php`(look for `$products[$i]['product_price'] = $product_price;`) 末尾附近的数组中，然后使用 加载到 VM 模板中`$tpl->set( 'products', $products )`，最后在渲染产品页面时使用

# internet-explorer - Internet Explorer 和 console.log

> ID：11231882
> 
> 赞同：0
> 
> 时间：2012-06-27T17:30:35.050
> 
> 标签：internet-explorer, internet-explorer-8, javascript, unobtrusive-javascript

> **可能重复：**
> [避免 IE 抛出的常见习语：错误：'console' 未定义](https://stackoverflow.com/questions/1146309/common-idiom-to-avoid-ie-throw-error-console-is-undefined)
> ['console' is undefined error for internet explorer](https://stackoverflow.com/questions/3326650/console-is-undefined-error-for-internet-explorer)

有没有一种可靠的方法可以防止“console.log”在 IE 中导致错误？

虽然我发现 console.log 非常有用，但它始终是 Internet Explorer 的悲哀之源。

如果只是我在代码中留下的语句，那很好，我可以处理。但有时我发现我正在使用的 JavaScript 库中有“console.log”调用——这会导致 IE 崩溃，或者在 IE8/9 上，只有在开发工具控制台窗口 (F12) 打开时才能工作。

我正在寻找的是：

*   一个在 IE6/7/8/9 上模拟 console.log 的库，因此当某些东西尝试 console.log() 时它不会崩溃一切
*   一种防止此错误的方法。

# c# - XNA 中的文字游戏机制

> ID：11231892
> 
> 赞同：0
> 
> 时间：2012-06-27T17:31:39.890
> 
> 标签：c#, windows-phone-7, xna

我正计划使用 XNA 为 WP7 制作一款休闲文字游戏。游戏机制对我来说已经足够好了，但只是检查他们所写的词是否真的是一个词。

我想有一个文本文件并在开始时将其加载到内存中，但这肯定不可能保存在手机的内存中吗？此外，从中读取以查看它是否是一个单词会有多慢。它们将如何存储在内存中？最好使用字典/哈希图，每个`key`都是一个词，我只是检查该键是否存在？还是会将它们放在一个数组中？

坚持实现这一点的最佳方式，因此感谢任何输入。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:19:14.873

根据您的手机硬件，您可能只需将文本文件加载到内存中。英语可能只有几十万字。假设您的平均单词约为 5 个字符左右，那大约是一兆数据。您将在内存中管理该文件的开销，但这就是硬件细节的重要性。顺便说一句，当前一代手机拥有大量 RAM 的情况并不少见。

请参阅以下相关的 SO 问题，这些问题需要文本文件作为字典。

[字典文本文件](https://stackoverflow.com/questions/4456446/dictionary-text-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:53:05.123

将文本文件放入内存，即使是整个字典，也不应该像前面`seth flowers`所说的那样太糟糕。选择合适的数据结构来保存单词很重要。

我不推荐使用单词作为键的字典……老实说，这有点愚蠢。如果只有键没有值，字典有什么用？但是，您可能对 Dictionary 的想法很满意。我会尝试的第一件事是 a `Dictionary<char, string[]>`，其中键是第一个字母，值是所有以该字母开头的单词的列表。当然，该数组会很长，并且在数组上的搜索时间很慢（尽管对键的查找应该是 zippy，因为 char 哈希是唯一的）。好处是，如果您使用正确的 .txt 字典文件并按顺序加载每个单词，您就会知道该列表是按字母顺序排列的。因此，您可以使用高效的搜索技术，如二分搜索，或为预排序列表制定的任意数量的搜索。最后可能不会那么慢。

但是，如果您想更进一步，可以使用预测文本的基础结构。它被称为 Patricia Trie 或 Radix Trie（[维基百科](http://en.wikipedia.org/wiki/Radix_tree)）。从第一个字母开始，您将遍历所有可能的分支，直到您：

1.  组装用户输入的单词，所以它是一个有效的单词
2.  到达分支的末端；这个词不存在。

“尝试”是为了解决这类问题。我从来没有在代码中代表过一个，所以恐怕我不能给你任何指示（ba dum tsh！），但互联网上可能有大量关于如何做到这一点的信息。使用 Trie 可能是最有效的解决方案，但如果您发现我上面提到的字母字典使用二分搜索足够快，您可能只想在开发实际游戏玩法时暂时坚持使用它。刚开始游戏时陷入寻找*最佳*解决方案的困境往往会耗尽您完成游戏的热情。如果你遇到性能问题，那么你就会做出改进——至少这是我在设计游戏时的理念。

好消息是，由于 Windows Phone 基本上只支持 2 种不同的规格，一旦您测试了应用程序并看到它在它们上流畅运行，您真的不必担心针对任何更糟糕的条件进行优化。所以使用有效的方法！

PS：在 Windows Phone 上，加载文本文件很棘手。[这](http://forums.create.msdn.com/forums/p/88160/528881.aspx)是有关该问题的帖子，应该对您有所帮助。

# java - 关于在控制台中单独显示的行

> ID：11231893
> 
> 赞同：0
> 
> 时间：2012-06-27T17:31:44.307
> 
> 标签：java

我通过在测试文件夹中保留 3 个不同的文件来实现如下所示的想法

```
public class FileCountLine {
public static void main(String[] args) throws FileNotFoundException {

        Map<String, Integer> result = new HashMap<String, Integer>();

        File directory = new File("C:/Test/");
        File[] files = directory.listFiles();
        for (File file : files) {
            if (file.isFile()) {
                Scanner scanner = new Scanner(new FileReader(file));
                int lineCount = 0;
                try {
                    for (lineCount = 0; scanner.nextLine() != null; lineCount++);
                } catch (NoSuchElementException e) {
                    result.put(file.getName(), lineCount);
                }
            }}

        System.out.println(result);     
            }} 
```

但是作为输出的结果，我得到的文件正在计算其中的代码行数，这些文件本身都在一行中，如下所示..

```
{ValidateWagRewardsRedemptionOptionPPI.java=73, IWalgreensRewardsPosLogSupport.java=134, WagEnrollmentInfoLine.java=111} 
```

请告知我希望结果的格式如下所示

```
WalgreensRewardsPosLogSupport.java=134,
WagEnrollmentInfoLine.java=111,
ValidateRewardsAARPManualEntryPPI.java=67 
```

那是新行中的每个文件本身，请告知需要为此进行哪些必要的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:36:13.427

替换`System.out.println(result);`为

```
for(String e : result.keySet())
    System.out.println(e+"="+result(e)+"\n") 
```

您得到的是 HashMap 的默认 toString。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:37:31.263

```
for (Map.Entry<String, Integer> entry : result.entrySet()) {
    String key = entry.getKey();
    Integer value = entry.getValue();
    System.out.println(key+"="+value+",");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:43:28.530

你不能像这样打印 HashMap

```
System.out.println(result); 
```

用这个

```
for( Map.Entry<String, Integer> entry:result.entrySet()){
  System.out.println(entry.getKey()+" = "+entry.getValue());
} 
```

代替

```
System.out.println(result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:43:34.110

尝试这个....

```
for( Map.Entry<String, Integer> m : result.entrySet())

{

  System.out.println(m.getKey()+" = "+m.getValue());

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T17:59:40.017

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Scanner;
import java.util.Set;

class FileCountLine {
public static void main(String[] args) throws FileNotFoundException {

        Map<String, Integer> result = new HashMap<String, Integer>();

        File directory = new File("/home/joker/Projects/eclipse");
        File[] files = directory.listFiles();
        for (File file : files) {
            if (file.isFile()) {
                Scanner scanner = new Scanner(new FileReader(file));
                int lineCount = 0;
                try {
                    for (lineCount = 0; scanner.nextLine() != null; lineCount++);
                } catch (Exception e) {
                    result.put(file.getName(), lineCount);
                }
            }}

        Set set = result.entrySet() ;
        Iterator itr = set.iterator();
       while(itr.hasNext())
       {
           System.out.println(itr.next()+"\n");
       }

            }} 
```

# jquery - Jquery 对话给出未定义的文本

> ID：11231895
> 
> 赞同：0
> 
> 时间：2012-06-27T17:31:45.243
> 
> 标签：jquery, jquery-ui

这是我的 jquery 对话的样子。对话写的是“未定义”而不是“好的”。同一站点上的另一个插件提供了正确的对话，按钮文本为“ok”。我正在使用 jquery ui 1.8

![截屏](../Images/2b401a48dbf62c23ca52d40a678e7d2f.png)

# c# - 获取 OAuth2 刷新令牌

> ID：11231898
> 
> 赞同：6
> 
> 时间：2012-06-27T17:31:52.047
> 
> 标签：c#, asp.net-mvc-3, oauth-2.0, dotnetopenauth

我正在尝试使用 Google 的日历 API 来演示我们需要与另一个第三方进行的 OAuth2 集成。我正在使用 DotNetOpenAuth 库，并且已经能够将初始重定向到 Google 以获取允许/拒绝提示并取回授权代码。

我现在需要获取访问令牌和刷新令牌，但我似乎只获得了一个访问令牌，刷新令牌为空。

这是我的控制器操作方法，在用户接受或拒绝后谷歌重定向回：

```
public ActionResult ProcessResponse(string state, string code, string error)
{
  var oAuthClient =
    new WebServerClient(
      new AuthorizationServerDescription
      {
        TokenEndpoint = new Uri("https://accounts.google.com/o/oauth2/token"),
        AuthorizationEndpoint = new Uri("https://accounts.google.com/o/oauth2/auth"),
        ProtocolVersion = ProtocolVersion.V20
      },
      _applicationId, 
      _secret)
      {
        AuthorizationTracker = new TokenManager()
      };

  var authState = oAuthClient.ProcessUserAuthorization();

  var accessToken = authState.AccessToken;
  var refreshToken = authState.RefreshToken;

  return View(new[] { accessToken, refreshToken });
} 
```

有任何想法吗？

编辑：

为了获得授权码，我设置了与上面相同的 oAuthClient，并使用以下方法：

```
oAuthClient.RequestUserAuthorization(new[] { "https://www.googleapis.com/auth/calendar" }, returnUrl); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:06:10.583

我有一个类似的问题，并通过手动编码 HttpRequest 和 HttpResponse 处理来解决我的问题。参见代码：[https ://stackoverflow.com/a/11361759/29156](https://stackoverflow.com/a/11361759/29156)

# mysql - MySql - 从一个字段中识别和复制 URL 并放置在另一个字段中

> ID：11231899
> 
> 赞同：0
> 
> 时间：2012-06-27T17:31:53.013
> 
> 标签：mysql, search, copy

我有一个名为文章的表格，其中包含许多字段。在内容字段中有一个 url。我想复制这个 url 并使用查询将它放在另一个字段中。但即使只是选择网址，我也遇到了麻烦。我可以用类似的东西手动完成...

```
"this is content http://blah" 
```

接着 `SELECT substring(content, 17, 11) FROM articles WHERE content LIKE '%http%'`

但是是否可以编写一个查询来搜索并找到每篇文章的网址？还是需要我编写自己的函数？或者它会是一个脚本工作？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:31:59.837

```
UPDATE url_copy 
SET url = SUBSTRING(
  SUBSTRING(content, POSITION('http://' IN  content)), 
  1, 
  POSITION(' ' IN CONCAT(SUBSTRING(content, POSITION('http://' IN content)), ' ')) -1
); 
```

我测试的数据：

```
SELECT * FROM url_copy;
+-------------------------------------------------------------+--------------------------------+
| content                                                     | url                            |
+-------------------------------------------------------------+--------------------------------+
| this is content and http://facebook.com/puggan.se is my url | http://facebook.com/puggan.se  |
| http://puggan.se/                                           | http://puggan.se/              |
+-------------------------------------------------------------+--------------------------------+
2 rows in set (0.00 sec) 
```

# python - 如何在python中测试两个列表是否相等

> ID：11231900
> 
> 赞同：0
> 
> 时间：2012-06-27T17:31:56.223
> 
> 标签：python, list, if-statement, equality

当我认为它应该返回 true 时，以下脚本返回 false。知道这里发生了什么吗？非常感谢，伙计们！

```
test=['Pop']
test1='Pop'

if (test==('POP' or 'Pop' or 'pop' or ['POP'] or ['Pop'] or ['pop'])):    
    print "yes"
else:
    print "no" 
```

目前，输出为“否”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T17:46:37.627

您不了解 python 如何处理该语句。Python 不是自然语言。

```
if (test==(['Pop'] or 'Pop')): 
```

因为在`or`括号内，所以它首先处理它。所以它看起来

```
['Pop'] or 'Pop' 
```

由于 ['Pop'] 被认为是 True，python 将整个语句简化为：

```
if (test==['Pop']): 
```

此时，它测试是否`test`等于`['Pop']`

你真正想做的是：

```
(test == ['Pop']) or (test == 'Pop') 
```

这完全不同于

```
 test == (['Pop'] or 'Pop') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:33:54.620

如果你这样写，当你使用`test`or时 if 语句将是真的`test1`：

```
test=['Pop']
test1='Pop'
if (test in ('POP', 'Pop', 'pop', ['POP'], ['Pop'], ['pop'])):
    print "yes"
else:
    print "no" 
```

您基本上是在创建一个包含所有可能性的大元组：三个字符串和三个列表。如果您的变量存在于其中，则 if 语句为真。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:59:15.977

`test == (a or b)`不同于`test == a or test == b`.

`(a or b)`返回`a`iff`bool(a)`为 True，`b`否则返回。因此，对于 Python 中的任何其他非空字符串，因为是 True`test == ('POP' or whatever)`等价于。`test == 'POP'``bool('POP')`

要测试多个值，您可以使用：`value in [a, b]`.

注意：`['a'] != 'a'`– 后者是一个字符串，而前者是一个包含字符串的列表。

在你的情况下，你可以`test[0].lower() == 'pop'`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:36:34.497

```
test=['Pop']
test1='Pop'
if test1 == 'POP' or test1 == 'Pop' or test1 == 'pop' or test1 == ['POP'] or test1 == ['Pop'] or test1 == ['pop']:
    print "yes"

else:
    print "no" 
```

每一个都是一个单独的测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T10:01:54.970

看起来用户只是想进行不区分大小写的比较：

```
if test1.lower() == 'pop':
    print 'yes'
else:
    print 'no' 
```

# linux - 安装带 FUSE 的回路装置

> ID：11231901
> 
> 赞同：3
> 
> 时间：2012-06-27T17:31:56.010
> 
> 标签：linux, ubuntu, filesystems, fuse

因此，假设我有一个文件附加到循环设备 /dev/loop1 我如何使用 fuse（用户空间中的文件系统）安装它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:45:20.937

如果你使用fuse，则根本不需要loop设备，直接挂载文件即可。因此，您可以执行以下任一操作：

```
$ sudo ext4fuse test.ext4 /mnt 
```

或者，如果出于某种奇怪的原因您*真的*想使用循环设备，则：

```
$ sudo losetup /dev/loop0 test.ext4
$ sudo ext4fuse /dev/loop0 /mnt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-27T09:14:52.643

一旦您设置了循环设备的权限以便熔断器进程可以访问它，您就可以像安装任何其他设备一样挂载它。

# bash - 尝试使用 shell 脚本修改文件 - 使用 /bin/ex

> ID：11231904
> 
> 赞同：1
> 
> 时间：2012-06-27T17:32:07.563
> 
> 标签：bash, shell, sed, ex

我有一个需要修改的 xml 文件：

```
...
</web-app> 
```

我想在这一行之前添加一些文本。我已经尝试过使用简单的文本并且效果很好（我使用了 /bin/ex）：

```
s/<\/web-app/test &/ 
```

所以我得到了我想要的：

```
...
test </web-app> 
```

但我需要插入的真实文本是：

```
<error-page>
<error-code>400</error-code>
<location>/error.html</location>
</error-page> 
```

我应该如何处理？我试图创建变量，比如

```
STR='<error-page>
<error-code>400</error-code>
<location>/error.html</location>
</error-page>' 
```

并使用它

```
s/<\/web-app/"$STR" &/ 
```

但结果不正确。我是否错误地定义了 var ？多线可以有这样的var吗？我怎样才能在之前插入所有这些行？用sed可以做得更简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:17:18.580

有两个问题。一，您的字符串包含“/”字符，因此您应该使用不同的分隔符。二，换行是有问题的。你可以这样做：

```
 $ STR2=$( echo "$STR" | sed 's/$/\\n/' | tr -d '\n' )
 $ sed "s@</web-app@$STR2 &@" 
```

对 STR2 的赋值只是将所有换行符替换为`\n`, 并在 bash 中工作。在 zsh 中，发生了一些分词，使 STR2 与 STR 相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T18:25:11.277

你可以试试

```
/bin/ex your.xml << EDIT
/<\/web-app>
i
<error-page>
<error-code>400</error-code>
<location>/error.html</location>
</error-page>
.
x
EDIT 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:38:11.820

问题在于它`STR`包含`ed`将其解释为命令的换行符。我建议将 的内容`STR`放入文件中并用于`r`读取它。例如：

```
echo -ne '/<\/web-app/-1r OTHER_FILE\nw\n' | ed -s FILE_TO_MODIFY 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T17:57:59.923

粗鲁但有效：

```
sed '/<\/web-app>/i<error-page>\n<error-code>400</errorcode>\n<location>/error.html</location>\n</error-page>' filename 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T05:12:22.697

这可能对您有用：

```
STR='<error-page>\
<error-code>400</error-code>\
<location>/error.html</location>\
</error-page>'
echo -e '...\n</web-app>\n...' | sed '/<\/web-app>/i\'"$STR"
...
<error-page>
<error-code>400</error-code>
<location>/error.html</location>
</error-page>
</web-app>
... 
```

要就地编辑文件：

```
sed -i '/<\/web-app>/i\'"$STR" file 
```

# linux - Linux 内核 BUG() 有时不打印堆栈跟踪和注册表

> ID：11231910
> 
> 赞同：2
> 
> 时间：2012-06-27T17:32:30.197
> 
> 标签：linux, kernel, assert

我们有一个内核模块，它在断言失败的情况下使用 BUG()。该模块适用于 ARM 架构。通常，当使用 BUG() 时，寄存器和堆栈跟踪会打印在串行控制台上。然而，在某些地方，BUG() 不打印堆栈跟踪，控制台上看到的最后一行是断言宏中的 printk，然后系统挂起。

堆栈跟踪和寄存器未在控制台上打印的可能原因是什么？它是一个可以意外禁用的功能吗？

PS：在这个平台上，BUG()里面的崩溃是用`*(int *)0 = 0;`

# entity-framework-4.1 - 实体框架，更新前值的触发机制

> ID：11231913
> 
> 赞同：2
> 
> 时间：2012-06-27T17:32:54.193
> 
> 标签：entity-framework-4.1

在更新对象值之前，EF 中是否有任何内容？

例如，当实体对象让我们说用户被保存时，我想在更新用户对象值之前知道用于记录目的。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T18:09:28.580

如果您使用`ObjectContext`(edmx)，您可以订阅该[`SavingChanges`](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.savingchanges.aspx)事件。

```
context.SavingChanges += context_SavingChanges; 
```

这可以在执行时访问原始值和当前值`SaveChanges()`：

```
private void context_SavingChanges (object sender, EventArgs e)
{
    ObjectContext context = sender as ObjectContext;
    if (context != null)
    {
        foreach (ObjectStateEntry entry in context.ObjectStateManager
                                 .GetObjectStateEntries(EntityState.Modified))
        {
            // TODO: do some logging with these values.
            entry.OriginalValues;
            entry.CurrentValues;
        }
    }
} 
```

如果您使用 DbContext，您可以通过

```
((IObjectContextAdapter)this).ObjectContext.SavingChanges 
```

# ios - 使 tableview 看起来像本机最近调用（结合 UITableViewCellStyleValue1 和 UITableViewCellStyleSubtitle？）

> ID：11231915
> 
> 赞同：0
> 
> 时间：2012-06-27T17:32:56.490
> 
> 标签：ios, cocoa-touch, ios5

我正在尝试使表格视图的单元格看起来像[iOS 的本机通话记录](http://www.hackphone.co.il/2011/06/images/CallLogEdit1.png "iOS 的原生通话记录")。我已经使用故事板布局编辑器（样式：副标题，附件：详细信息披露）将其关闭，但我不确定如何在右侧获取该时间戳。那是我也可以使用情节提要布局的东西，还是我需要以编程方式布局的东西（例如子视图）？

我想我基本上需要结合 UITableViewCellStyleValue1 和 UITableViewCellStyleSubtitle。

# ios - UITableViewCell 中的 UILabel 被意外绘制

> ID：11231916
> 
> 赞同：0
> 
> 时间：2012-06-27T17:33:02.343
> 
> 标签：ios, uitableview, uilabel

我在分组的 UITableView 中使用原型单元格来创建内部包含两个 UILabel 的自定义单元格。每个 UILabel 都填充有文本。第一个 UILabel 排列在单元格的左侧，表现得恰到好处。

然而，第二个 UILabel，它靠近单元格的中间，不知何故被绘制在单元格的背景后面！我无法解释为什么，但如果我将单元格的背景颜色设置为 clearColor 而不是默认值，则可以看到第二个标签并且工作得很好。如果我突出显示单元格，它也会显示，但在未突出显示时再次消失。我确信标签不仅仅是与背景“融合”；背景为白色，标签为黑色。

有任何想法吗？我有点难过。原型单元是否存在某种问题并且具有多个标签？

编辑：回答了我自己的问题，见下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:09:02.797

好的，这已经解决了！

所以就像我说的，我在界面构建器中使用两个 UILabel 设置原型单元。为了在我的 UITableView 的 cellForRowAtIndexPath 委托方法中访问这些 UILabel，我使用了标签的标签。第一个标签我标记为“1”，第二个标签标记为“3”（不要问为什么它是 3 而不是 2）。无论如何，事实证明 UITableViewCells 已经有一个带有标签 1 的特殊属性设置的标签。除了带有标签 1 的标签隐藏了我的第二个标签之外，当我动态更改单元格大小时（当我想要它保持在顶部）。

长话短说：UITableViewCells 已经内置了一个标签为 1 的“特殊”标签，所以我将第一个标签的标签更改为 10，一切都恢复了我预期的行为。

# ruby-on-rails - Rails 按另一个表中的列名对列进行排序

> ID：11231919
> 
> 赞同：1
> 
> 时间：2012-06-27T17:33:21.510
> 
> 标签：ruby-on-rails

我正在使用handles_sortable_columns 对Rails 3 中的列进行排序，并且想知道是否有一种方法可以按另一个表中的列进行排序，而不是使用连接。

我有一列是在另一个表中查找列的名称。

也就是说，我将 city.country_id 作为一列，并在 View 模板中执行以下操作：

```
@cities.each do |city|
    city.country.name 
```

显示名称。

我希望能够按此列排序，但`countries.name`不是`cities.country_id`.

有谁知道这是否可以通过 gem 或任何其他简单的方式实现？如果有怎么办？

我能想到的唯一一件事是在控制器中执行 IF 语句并按国家/地区进行排序，然后使用连接运行不同的查询，但这很丑陋且容易出错，希望得到更优雅的东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:44:13.813

您可以覆盖国家模型上的 to_s 以返回名称，然后在控制器中按该名称排序吗？

在您的国家/地区模型中，通过以下方式覆盖 to_s：

```
def to_s
 country.name
end 
```

然后在你的控制器中

```
@sorted_cities = @cities.sort_by { |obj| obj.country.to_s } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:15:28.380

最后，我决定使用连接来获取正确的数据。虽然 Webjedi 的回答很有趣，但我不想覆盖任何内置函数，但很高兴知道我能做到这一点。

代码如下所示：

```
@countries = Country.select('countries.*, continents.name AS continent_name').joins{continent}.search(params[:term]).order(order).page(params[:page]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:17:49.110

除了Webjedi回答..

```
 @sorted_cities = @cities.includes(:country).sort_by { |obj| obj.country.to_s } #for eager loading 
```

# perl - 在 Perl 中，如何对二维数组的元素使用“定义”函数？

> ID：11231930
> 
> 赞同：3
> 
> 时间：2012-06-27T17:34:16.207
> 
> 标签：perl, multidimensional-array, defined, autovivification

我正在尝试使用Perl中[定义的函数来检查是否定义了元素。](http://perldoc.perl.org/functions/defined.html)

代码 ：

```
$mylist[0][0]="wqeqwe";
$mylist[0][1]="afasf";
$mylist[1][0]="lkkjh";

print scalar(@mylist), "\n";

if (defined($mylist[2][0])){print "TRUE\n";}

print scalar(@mylist), "\n"; 
```

输出

```
2
3 
```

在使用[定义](http://perldoc.perl.org/functions/defined.html)函数之前， 的第一个维度中有两个元素`@myarray`。使用[定义](http://perldoc.perl.org/functions/defined.html)函数后，元素数量增加到 3 个。

如何在不添加新元素的情况下使用[定义的功能？](http://perldoc.perl.org/functions/defined.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T17:39:29.983

首先检查一级引用是否存在。

```
if ( defined($mylist[2]) && defined($mylist[2][0]) ) {
    print "TRUE\n";
} 
```

您所遇到的称为[自动激活](https://en.wikipedia.org/wiki/Autovivification)：在某些情况下，当您使用它们时，Perl 会创建复杂的数据结构，就好像它们已经存在一样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T17:57:23.983

有趣的是，有一个名为[autovivification](http://p3rl.org/autovivification)的非核心编译指示，如果你在你的问题下运行你的代码，`no autovivification;`你的问题就会消失。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T17:40:52.527

当您提到 时`$mylist[2][0]`，perl 的[自动](http://en.wikipedia.org/wiki/Autovivification)生成会创建数组元素`$mylist[2]`。

为防止这种情况，您可以先检查此元素：

```
if ( (defined $mylist[2]) && (defined $mylist[2][0]) ) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T17:50:22.063

```
defined($mylist[2][0]) 
```

相当于

```
defined($mylist[2]->[0]) 
```

这是缩写

```
defined( ( $mylist[2] //= [] )->[0]) 
```

由于自生化。您可以使用[autovivification](http://search.cpan.org/perldoc?autovivification) pragma 禁用自动激活。

```
no autovivificatoin;
if (defined($mylist[2][0])) 
```

或者您可以避免评估会触发它的代码。

```
if (defined($mylist[2]) && defined($mylist[2][0])) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-27T17:43:03.680

实际上因为它是自动生存，你可以在使用定义之前和之后使用 Data::Dumper 轻松检查它。

```
use Data::Dumper;
my @mylist;

$mylist[0][0]="wqeqwe";
$mylist[0][1]="afasf";
$mylist[1][0]="lkkjh";

print Dumper(@mylist); 
```

之前的输出

```
$VAR1 = ['wqeqwe', 'afasf'];
$VAR2 = [ 'lkkjh'];

print Dumper(@mylist); 
```

后输出

```
$VAR1 = [ 'wqeqwe','afasf' ];
$VAR2 = ['lkkjh'];
$VAR3 = []; 
```

# c# - 如何将 XML 属性和值添加到 [XMLElement] 类属性？

> ID：11231931
> 
> 赞同：0
> 
> 时间：2012-06-27T17:34:33.217
> 
> 标签：c#, xml

在 C# 中，我有这个类：

```
 public class LightHouseTicketForXML {
        [XmlElement( "assigned-user-id")]
        public string assignedUserId { get; set; }

        [XmlElement( "body" )]
        public string body { get; set; }

        [XmlElement( "milestone-id" )]
        public string milestoneId { get; set; }

        [XmlElement( "state" )]
        public string state { get; set; }

        [XmlElement( "title" )]
        public string title { get; set; }
    } 
```

我需要为分配的用户 ID 提供属性和值 type="integer"。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:40:27.917

如果你使用 xsd.exe（Visual Studio 工具），你会得到一些线索。（但是，它产生的命名约定很糟糕）。它将为该元素创建另一个类， [XMLAttribute] 在公共 int 类型上；然后将该类包含在上面的类中。

# android - 可以直接跳转到 ViewAnimator 中的第二个视图

> ID：11231933
> 
> 赞同：12
> 
> 时间：2012-06-27T17:34:37.413
> 
> 标签：android, android-animation, android-view

我有一个`ViewAnimator`（`ViewSwitcher`准确地说）与它相关的淡入/淡出动画和两个`Views`我在使用`ViewAnimator.showNext()`and`ViewAnimator.showPrevious()`方法之间转换的动画。

我的应用程序中有一个要求，有时我需要直接从第二个开始`View`，而不显示从第一个`View`到第二个的淡入淡出动画。任何人都知道是否有一种简单的方法可以实现这一点，而不必弄乱与 my 相关的输入/输出动画`ViewAnimator`？

> **注意：**我尝试过调用`ViewAnimator.setDisplayedChild(1)`，但这也会为过渡设置动画。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T19:00:25.847

我环顾四周，等待回应，但我猜这是不可能的。因此，在没有更好的解决方案的情况下，`ViewAnimator`当您想直接跳转到您的特定子级时，请将您的输入/输出动画设置为 null `View`，`ViewAnimator`如下所示：

```
myViewAnimator.setInAnimation(null);
myViewAnimator.setOutAnimation(null);
myViewAnimator.setDisplayedChild(childIndex); 
```

如果有人知道更好的方法 - 而不是玩`ViewAnimator`'s in/out 动画 - 请分享！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-09T15:09:35.153

不幸的是，没有内置函数可以做到这一点，但你可以添加这个函数，它可以完成这项工作：

```
public static void setDisplayedChildNoAnim(ViewAnimator viewAnimator, int whichChild) {
    Animation inAnimation = viewAnimator.getInAnimation();
    Animation outAnimation = viewAnimator.getOutAnimation();
    viewAnimator.setInAnimation(null);
    viewAnimator.setOutAnimation(null);
    viewAnimator.setDisplayedChild(whichChild);
    viewAnimator.setInAnimation(inAnimation);
    viewAnimator.setOutAnimation(outAnimation);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-11T12:48:00.960

这是一种更全面的方法，它让您可以选择一个 id 或一个视图，以及有/没有动画：

```
fun ViewAnimator.setViewToSwitchTo(viewToSwitchTo: View, animate: Boolean = true): Boolean {
    if (currentView === viewToSwitchTo)
        return false
    for (i in 0 until childCount) {
        if (getChildAt(i) !== viewToSwitchTo)
            continue
        if (animate)
            displayedChild = i
        else {
            val outAnimation = this.outAnimation
            val inAnimation = this.inAnimation
            this.inAnimation = null
            this.outAnimation = null
            displayedChild = i
            this.inAnimation = inAnimation
            this.outAnimation = outAnimation
        }
        return true
    }
    return false
}

fun ViewAnimator.setViewToSwitchTo(@IdRes viewIdToSwitchTo: Int, animate: Boolean = true): Boolean {
    if (currentView.id == viewIdToSwitchTo)
        return false
    for (i in 0 until childCount) {
        if (getChildAt(i).id != viewIdToSwitchTo)
            continue
        if (animate)
            displayedChild = i
        else {
            val outAnimation = this.outAnimation
            val inAnimation = this.inAnimation
            this.inAnimation = null
            this.outAnimation = null
            displayedChild = i
            this.inAnimation = inAnimation
            this.outAnimation = outAnimation
        }
        return true
    }
    return false
} 
```

使用示例：

```
viewSwitcher.setViewToSwitchTo(someView,false) 
```

# code-first - 数据库“主”中的 CREATE DATABASE 权限被拒绝（EF 代码优先）

> ID：11231934
> 
> 赞同：75
> 
> 时间：2012-06-27T17:34:41.310
> 
> 标签：code-first

我在我的项目中使用代码优先并在主机上部署，但出现错误

> 数据库“master”中的 CREATE DATABASE 权限被拒绝。

这是我的连接字符串：

```
<add name="DefaultConnection" 
     connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-test-2012615153521;Integrated Security=False" 
     providerName="System.Data.SqlClient;User ID=test;Password=test"/> 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2017-06-11T16:22:55.963

我有同样的问题。这对我有用：

1.  转到**SQL Server Management Studio并以****管理员**身份运行它。
2.  选择**安全**-> 然后**登录**
3.  在登录名下选择**用户名**或将访问您的数据库的任何用户，然后双击它。
4.  给他们一个服务器角色，这将为他们提供创建数据库的凭据。就我而言， public 已经检查过了，所以我检查了**dbcreator**和**sysadmin**。
5.  在包管理器控制台上再次运行更新数据库。数据库现在应该已成功创建。

这是一张图片，以便您可以了解更大的情况，当然我模糊了我的凭据：[![在此处输入图像描述](../Images/6d2dde33b25c8840ce0234806c45fb5f.png)](https://i.stack.imgur.com/lyBpi.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-10-05T13:43:32.897

确保您有权创建数据库。（如 user2012810 所述。）

或者

您的代码似乎首先使用另一个（或默认）连接字符串。您是否在上下文类上设置了连接名称？

```
public class YourContext : DbContext
    {
        public YourContext() : base("name=DefaultConnection")
        {

        }

        public DbSet<aaaa> Aaaas { get; set; }
    } 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-12-06T07:46:35.613

尝试使用 Code First（没有数据库方法）创建数据库时遇到了同样的问题。问题是 EF 没有足够的权限为您创建数据库。

因此，我使用 Code First（使用现有的数据库方法）进行了改进。

脚步 ：

1.  在Sql server management studio中创建一个数据库（最好没有表）。
2.  现在回到 Visual Studio，在服务器资源管理器中添加新创建的数据库的连接。
3.  现在使用数据库的连接字符串并将其添加到 app.config 中，名称类似于“默认连接”。
4.  现在在 Context 类中，为其创建一个构造函数并从基类扩展它，并将连接字符串的名称作为参数传递。就像，

    ```
    public class DummyContext : DbContext
    {
      public DummyContext() : base("name=DefaultConnection")
      {
      }  
    } 
    ```

5.现在运行您的代码并查看表被添加到提供的数据库中。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-10-14T19:51:14.940

以管理员身份运行 Visual Studio，它对我有用

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-01-03T09:23:44.923

如果您在解决方案中有多个项目并且将错误的项目设置为启动项目，也会出现此错误。

这很重要，因为使用的连接字符串`Update-Database`来自启动项目，而不是包管理器控制台中选择的“默认项目”。

（[感谢马苏德](https://stackoverflow.com/a/38929026/33080)）

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-09-06T02:32:15.610

我已经以我的方式解决了这个问题。以这种方式尝试连接字符串：

```
<add name="MFCConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\MFC.mdf;Initial Catalog=MFC;Integrated Security=false;User ID=sa;Password=123"
  providerName="System.Data.SqlClient" /> 
```

请记住将默认数据库从 master 设置为 MFC（在您的情况下为 aspnet-test-2012615153521）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-01-05T03:55:36.230

正如错误提示的那样，SQL 登录没有创建数据库的权限。当登录名具有所需角色时，将授予权限。有权创建、更改和删除数据库的角色是[dbCreator](https://msdn.microsoft.com/en-us/library/ms188659.aspx)。因此，应将其添加到登录以解决问题。可以在 SQL Management Studio 上通过右键单击用户然后转到“属性”>“服务器角色”来完成。我遇到了同样的错误并通过这样做来解决它。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-01-17T10:25:19.880

如果您在 IIS 下运行该站点，您可能需要将应用程序池的标识设置为管理员。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-03-30T07:18:51.500

仔细检查您的连接字符串。当它指向不存在的数据库时，EF 会尝试在`master`数据库中创建表，并且可能会发生此错误。
就我而言，数据库名称中有错字。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-02-11T02:56:36.503

我遇到了似乎是这个错误。我在 windows 上运行，发现我的管理员 windows 用户没有数据库管理员权限。

1.  从“服务”关闭 SQL Server</li>

[![禁用服务](../Images/41579e7f284771549fdc3bba153a3f7d.png)](https://i.stack.imgur.com/gTiEf.png)

2.  打开 cmd 窗口（以管理员身份）并使用以下命令以本地管理员身份运行单用户模式（MSSQL 的版本可能不同）：

```
"C:\Program Files\Microsoft SQL Server\MSSQL14.SQLEXPRESS\MSSQL\Binn\sqlservr.exe" -m -s SQLEXPRESS 
```

3.  打开另一个 cmd 窗口（以管理员身份）
4.  在该终端上打开 sqlcmd：

```
sqlcmd -S .\SQLEXPRESS 
```

5.  现在将 sysadmin 角色添加到您的用户：

```
sp_addsrvrolemember 'domain\user', 'sysadmin'
GO 
```

6.  从“服务”重新启用 SQL Server</li>

归功于： [https ://social.msdn.microsoft.com/Forums/sqlserver/en-US/76fc84f9-437c-4e71-ba3d-3c9ae794a7c4/](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/76fc84f9-437c-4e71-ba3d-3c9ae794a7c4/)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-08-20T22:12:35.530

以管理员身份运行 Visual Studio 并将您的 SQL SERVER 身份验证登录名（有权创建数据库）和密码放在连接字符串中，它对我有用

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-01-15T15:22:14.793

1.  手动创建空数据库。
2.  将连接字符串中的“Integrated Security”从“true”更改为“false”。
3.  确保您的用户是新数据库中的系统管理员

现在我希望你可以成功执行 update-database。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-04-15T12:33:53.977

我将添加我必须做的事情，因为它是上述内容的合并。我使用的是 Code First，尝试使用“create-database”，但标题中出现错误。关闭并重新打开（这次作为管理员） - 命令无法识别，但使用了“更新数据库”。同样的错误。

以下是我为解决它而采取的步骤：

1) 打开 SQL Server Management Studio 并创建数据库“视频”

2) 在 VS2013 中打开服务器资源管理器（在“查看”下）并连接到数据库。

3）右键单击连接 - >属性，并抓住连接字符串。

4）在 web.config 我添加了连接字符串

```
 <connectionStrings>
<add name="DefaultConnection"
  connectionString="Data Source=MyMachine;Initial Catalog=Videos;Integrated Security=True" providerName="System.Data.SqlClient"
  />
  </connectionStrings> 
```

5）在我设置上下文的地方，我需要引用DefaultConnection：

```
using System.Data.Entity;

namespace Videos.Models
{
public class VideoDb : DbContext
{
    public VideoDb()
        : base("name=DefaultConnection")
    {

    }

    public DbSet<Video> Videos { get; set; }
}
} 
```

6) 在包管理器控制台中运行“更新数据库”以创建表。

请记住，您可以在 Configuration.cs 中创建时使用 Seed() 插入值：

```
 protected override void Seed(Videos.Models.VideoDb context)
        {
        context.Videos.AddOrUpdate(v => v.Title,
            new Video() { Title = "MyTitle1", Length = 150 },
            new Video() { Title = "MyTitle2", Length = 270 }
            );

        context.SaveChanges();
        } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-08-23T01:00:17.743

检查连接字符串是否在您的 Web.Config 中。我删除了该节点并将其放入我的 Web.Debug.config 中，这是我收到的错误。将其移回 Web.config 并运行良好。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-03-31T08:13:41.390

第 1 步：断开与您的本地帐户的连接。

第 2 步：再次使用您的管理员用户连接到服务器

第 3 步：对象资源管理器 -> 安全 -> 登录 -> 右键单击​​您的服务器名称 -> 属性 -> 服务器角色 -> 系统管理员 -> 确定

第 4 步：断开连接并连接到您的本地登录并创建数据库。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-11-12T19:01:09.167

在你的主数据库上运行它

```
ALTER SERVER ROLE sysadmin ADD MEMBER your-user;  
GO 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-10-27T10:43:55.663

我没有证明我的解决方案，只是假设。

在我的情况下，它是由连接字符串中的域名引起的。我假设如果 DNS 服务器不可用，它就无法连接到数据库，因此实体框架会尝试创建这个数据库。但是权限被拒绝，这是正确的。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-04-24T13:35:43.780

对我有用的解决方案是使用在创建 edmx 文件时运行数据库第一个向导时创建的实体框架连接字符串。连接字符串需要元数据文件引用，例如“metadata=res:// */PSEDM.csdl|res://* /PSEDM.ssdl|res://*/PSEDM.msl”。此外，连接字符串需要在调用应用程序的配置中。

HT 到这篇文章为我指出了那个方向：[Model First with DbContext, Fails to initialize new DataBase](https://stackoverflow.com/questions/5940616/model-first-with-dbcontext-fails-to-initialize-new-database/5942978#5942978)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-09-01T18:02:43.820

对我来说，我只是关闭所有当前会话，包括**SQL Server Management Studio**，然后我重新打开执行下面的脚本工作正常

```
IF EXISTS (SELECT NAME FROM master.sys.sysdatabases WHERE NAME = 'MyDb')
DROP DATABASE mydb RESTORE DATABASE SMCOMDB FROM DISK = 'D:/mydb.bak' 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-01-27T13:11:41.313

我遇到了同样的问题，我尝试了互联网上所有可用的东西。但是 SSMS 以管理员身份运行为我工作。如果您仍然遇到一些问题，请确保您必须已下载 SQL SERVER。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-11-17T16:48:09.830

此错误的原因可能是由于将 Visual sudio 2013 中的版本相关 localdb 转发到 VS 2015 中的版本无关 localDB，因此只需将 web.config 文件 connectionStrings 从**(localDb)\v11.0 更改**为**(localDB)\ MSSQLLocalDB**，它肯定会工作。[这是对Visual Studio 2015 中与版本无关的本地数据库的](http://thebillwagner.com/Blog/Item/2015-02-05-VersionindependentlocalDBinVisualStudio2015) 一个很好的解释

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-06-17T16:48:06.863

如果您使用**.\SQLExpress**作为*数据源*，您可以在连接字符串中添加“ **User Instance=True** ”属性，以修复标题中提到的错误。

例如，

```
 Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;  
AttachDBFilename=|DataDirectory|\app_data\Northwind.mdf;  
Initial Catalog=Northwind; 
```

用户实例允许本地计算机上不是管理员的用户附加和连接到 SQL Server Express 数据库。每个实例在单个用户的安全上下文下运行，每个用户一个实例。

参考：[SQL Server Express 用户实例的 MSDN 链接](https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql/sql-server-express-user-instances)

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2017-02-13T07:29:36.657

解决这个问题就像吃一块蛋糕一样简单。这个问题通常出现在您的用户凭据更改并且 SQL Server 无法识别您的情况下。无需卸载现有的 SQL Server 实例。您只需安装一个新的具有新实例名称的实例。假设您的最后一个实例名称是 'Sqlexpress' ，所以这次在安装期间，将您的实例命名为 'Sqlexpress1' 。另外不要忘记在安装过程中选择混合模式（即 Sql Server 身份验证和 Windows 身份验证），并提供系统管理员密码，如果将来出现此类问题，将会很方便。这个解决方案肯定会解决这个问题。谢谢..

* * *

## 回答 #24

> 赞同：-11
> 
> 时间：2013-01-26T01:24:21.730

权限被拒绝是一种安全性，因此您需要添加“用户”权限..

1.  右键单击您的数据库（即 .mdf 文件），然后单击属性
2.  转到安全选项卡
3.  点击继续按钮
4.  点击添加按钮
5.  点击前进按钮
6.  将显示另一个窗口，然后单击右侧的“立即查找”按钮。
7.  在下面的字段中，转到最底部并单击“用户”。单击确定。
8.  单击您已创建的权限“用户”，然后选中完全控制复选框。

你去吧。您现在有权访问您的数据库。

注意：上述问题中的连接字符串是使用 SQL-server 身份验证。因此，在进行上述步骤之前，您必须先使用 windows-authentication 登录，然后您必须授予使用 sql-server 身份验证的用户权限。像“dbcreator”这样的权限。

如果您使用 SQL Server 身份验证登录并尝试向您登录的用户授予权限。它显示，权限被拒绝错误。

# linux - Bash 忽略特定命令的错误

> ID：11231937
> 
> 赞同：617
> 
> 时间：2012-06-27T17:34:55.133
> 
> 标签：linux, bash

我正在使用以下选项

```
set -o pipefail
set -e 
```

在 bash 脚本中停止执行错误。我有大约 100 行脚本正在执行，我不想检查脚本中每一行的返回码。

但是对于一个特定的命令，我想忽略该错误。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1015
> 
> 时间：2012-06-27T17:37:44.240

解决方案：

```
particular_script || true 
```

例子：

```
$ cat /tmp/1.sh
particular_script()
{
    false
}

set -e

echo one
particular_script || true
echo two
particular_script
echo three

$ bash /tmp/1.sh
one
two 
```

`three`永远不会被打印出来。

另外，我想补充一点，当`pipefail`打开时，当管道中的命令之一具有非零退出代码时，shell 认为整个管道具有非零退出代码就足够了（`pipefail`关闭它必须是最后一个） .

```
$ set -o pipefail
$ false | true ; echo $?
1
$ set +o pipefail
$ false | true ; echo $?
0 
```

* * *

## 回答 #2

> 赞同：220
> 
> 时间：2012-06-27T17:37:45.160

只需`|| true`在要忽略错误的命令后添加即可。

* * *

## 回答 #3

> 赞同：153
> 
> 时间：2017-08-17T08:14:44.357

**不要停止并保存退出状态**

以防万一您希望脚本在特定命令失败时不停止，并且您还想保存失败命令的错误代码：

```
set -e
EXIT_CODE=0
command || EXIT_CODE=$?
echo $EXIT_CODE 
```

* * *

## 回答 #4

> 赞同：71
> 
> 时间：2015-04-21T23:13:37.683

更简洁：

```
! particular_script 
```

从关于（强调我的）的[POSIX规范：](http://pubs.opengroup.org/onlinepubs/009696799/utilities/set.html)`set -e`

> 当此选项打开时，如果简单命令由于 Shell 错误的后果中列出的任何原因而失败或返回退出状态值 >0，并且在一段时间、直到或 if 关键字之后不属于复合列表的一部分，并且不是 AND 或 OR 列表的一部分，也不是**前面有 !的管道 保留字**，则shell应立即退出。

* * *

## 回答 #5

> 赞同：54
> 
> 时间：2016-11-17T08:51:41.420

除了“返回 true”，您还可以使用“noop”或 null 实用程序（如[POSIX 规范](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_16)中所述）`:`并且只是“什么也不做”。你会省下几封信。:)

```
#!/usr/bin/env bash
set -e
man nonexistentghing || :
echo "It's ok.." 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2019-09-10T10:33:41.890

如果您想防止脚本失败**并**收集返回码：

```
command () {
    return 1  # or 0 for success
}

set -e

command && returncode=$? || returncode=$?
echo $returncode 
```

`returncode`无论命令成功还是失败，都会被收集。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2020-02-23T13:35:23.400

从这里没有解决方案对我有用，所以我找到了另一个解决方案：

```
set +e
find "./csharp/Platform.$REPOSITORY_NAME/obj" -type f -iname "*.cs" -delete
find "./csharp/Platform.$REPOSITORY_NAME.Tests/obj" -type f -iname "*.cs" -delete
set -e 
```

这对 CI 和 CD 很有用。这样会打印错误消息，但整个脚本会继续执行。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2020-05-20T13:28:21.133

感谢上面的简单解决方案：

```
<particular_script/command> || true 
```

以下构造可用于脚本步骤的附加操作/故障排除和附加流控制选项：

```
if <particular_script/command>
then
   echo "<particular_script/command> is fine!"
else
   echo "<particular_script/command> failed!"
   #exit 1
fi 
```

`exit 1`如果需要，我们可以阻止进一步的行动。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-03-25T03:25:27.490

```
output=$(*command* 2>&1) && exit_status=$? || exit_status=$?
echo $output
echo $exit_status 
```

使用它创建日志文件的示例

```
log_event(){
timestamp=$(date '+%D %T') #mm/dd/yy HH:MM:SS
echo -e "($timestamp) $event" >> "$log_file"
}

output=$(*command* 2>&1) && exit_status=$? || exit_status=$?

if [ "$exit_status" = 0 ]
    then
        event="$output"
        log_event
    else
        event="ERROR $output"
        log_event
fi 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-06-23T22:12:33.163

在使用 CLI 工具时，我一直在使用下面的代码片段，我想知道是否存在某些资源，但我不关心输出。

```
if [ -z "$(cat no_exist 2>&1 >/dev/null)" ]; then
    echo "none exist actually exist!"
fi 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-05-21T08:56:57.967

我有点喜欢这个解决方案：

```
: `particular_script` 
```

执行反引号之间的命令/脚本，并将其输出馈送到命令“：”（相当于“真”）

```
$ false
$ echo $?
1
$ : `false`
$ echo $?
0 
```

编辑：修正了丑陋的错字

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-04-25T15:17:27.440

虽然`|| true`是首选，但你也可以这样做

```
var=$(echo $(exit 1)) # it shouldn't fail 
```

# ios - 在 TableViewCell 中设置图像的大小

> ID：11231938
> 
> 赞同：0
> 
> 时间：2012-06-27T17:35:01.793
> 
> 标签：ios, uitableview

我有一个高度为 90 行的表格。

我想在每一行都有一个大小为 50x50 的图像。

我正在执行以下操作`cellForRowAtIndexPath`：

```
 cell.imageView.frame = CGRectMake(0, 0, 50, 50);
    cell.imageView.clipsToBounds = YES;
    cell.imageView.contentMode = UIViewContentModeScaleAspectFit;

    if (item.image){
        cell.imageView.image = [item.image smallImage];
        cell.imageView.alpha = 1.0f;
    } else {
        cell.imageView.image = [UIImage imageNamed:@"icon-greyed.png"];
        cell.imageView.alpha = 0.25f;
    } 
```

然而，图像的高度为 90（行的高度）。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:57:04.123

您将需要添加一个`UIImageView`我`cell.contentView`不推荐的，或者创建一个`UITableViewCell`我推荐的自定义。然后您可以添加一个`UIImageView`到您的自定义单元格并将其调整为您需要的尺寸。

# .net - 显示使用数据执行保护 (DEP) 安全功能的简单示例

> ID：11231940
> 
> 赞同：-1
> 
> 时间：2012-06-27T17:35:21.360
> 
> 标签：.net, windows, security

我发现很难弄清楚为什么我们需要 DEP！

[Microsoft 声明](http://support.microsoft.com/kb/875352)了有关 DEP 的信息：

> DEP 的主要好处是有助于防止从数据页执行代码。
> 
> 通常，**代码不会从默认堆和栈中执行**。硬件强制 DEP 检测从这些位置运行的代码，并在执行时引发异常。
> 
> 软件强制 DEP 可以帮助**防止恶意代码利用 Windows 中的异常处理机制**。

那是什么意思？

你能给我一个简单的非代码示例吗！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T22:54:38.600

假设我是攻击者，我发现了一个漏洞，它（仅）允许我在您的应用程序中设置 EIP（程序计数器）。利用这一点的经典方法是编写一个小代码存根（“shellcode”）并将其作为一些参数发送到您的应用程序（例如，它可能被放入银行应用程序的“名字”字段中）。您的应用程序会将其存储在堆栈（或堆）缓冲区中，然后我可以设置 EIP - 使用我发现的漏洞 - 指向此缓冲区的开头。瞧，我的代码存根被执行了，你的盒子被 pwned 了 :)

使用 DEP，CPU 知道拒绝执行此数据的尝试，并且您会更安全一些。

在实践中它比这更复杂，但这就是它的要点。那有意义吗？

# javascript - jquery.width 在图像上返回 0

> ID：11231941
> 
> 赞同：6
> 
> 时间：2012-06-27T17:35:25.593
> 
> 标签：javascript, jquery, extjs

我正在使用看起来像这样的代码：

```
img.load(function(){
    // do some stuff
    $(this).width();

}); 
```

在我的回调中，图像大小始终为 0。它可能与它有关，但我的图像是本地加载的。

但实际上，如果我执行 this.width，我将获得预期的宽度，然后我可以从这里进行某种计算来更改我的 extjs 窗口。

经过一些尝试，我意识到如果我这样做 $(this) 我更改的所有属性似乎根本没有任何效果。

做`$(this).width(40);`不会改变我的图像的宽度，但`this.width = 40`会改变我的图像的宽度。就好像`$(this)`在一个新元素中复制我的 HTMLImageElement 一样，只有当我再次添加到 dom 以替换旧元素时，才会应用这些更改。

我不太确定那里发生了什么。

**编辑**

这就是我的`img`变量包含的内容。

```
img = $('<img>');
img.attr('src', '....image'); 
```

**编辑 2**

这并没有真正改变 jQuery 不处理内存中图像的图像大小的事实，但我觉得任何使用 Extjs 的人不要重复我的错误会很好。在我的例子中，一个大问题是`img`我使用的对象是一个有效的对象，但是由于我使用的是 ExtJs，所以我无意中犯了一个愚蠢的错误。我以这种方式创建了我的窗口......

```
Ext.create('Ext.Window', 
  // some settings
  items: [{
      html: img.wrap('<div>').parent().html(),
  // etc 
```

换句话说，我创建的事件是在 img 上，但我从未真正添加`img`到 DOM 中。ExtJs 将 html 文本添加到 DOM 中，从而创建了一个无法通过事件等修改的新对象。

所以我必须创建一个 id 来查找新元素，所有这些都必须在调用完成后`modalWindow.show()`完成。之后一切正常。

对于调整窗口大小，如果设置了尺寸，您可以将它们设置回`null`并在窗口上执行 doLayout 调用，它将重新计算窗口大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:40:12.197

您发现这`jQuery(this).width()`不适用于内存中的图像。选择是使用`this.width`/`height`或将其附加到页面并阅读它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T17:56:44.770

我觉得你应该试试这个...

```
 $("img").load(function(){
    // do some stuff
    $(this).width();

}); 
```

假设您只使用 img 标签。如果你有 img 标签的 id，你应该使用例如 $("#idimg).load(fun...... contd.)

# android - Android 在哪里放置不同主题的不同图标？

> ID：11231942
> 
> 赞同：4
> 
> 时间：2012-06-27T17:35:29.157
> 
> 标签：android, themes

在我的应用程序中，我有不同的主题 - 一个黑暗主题和一个明亮主题。每个主题都需要自己的图标集。

如何将其应用于主题？有没有像不同大小的图标这样的特殊文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:05:59.737

以下作为提示...

我想这可能会有所帮助：http: [//developer.android.com/reference/android/R.attr.html#icon](http://developer.android.com/reference/android/R.attr.html#icon)

假设您有以下主题...

```
<style name="MyTheme.Dark">
  ...
</style>

<style name="MyTheme.Light">
  ...
</style> 
```

您可以添加`<item name="android:icon"></item>`到每个主题并为每个主题提供自己的可绘制图标。然后要在您的布局中获取相应的可绘制对象或您拥有什么，您需要使用`?android:attr/icon`.

所以你的布局最终可能看起来像......

```
<View
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:background="?android:attr/icon"/> 
```

如果您不确定该`?android:attr/icon`部分的确切含义，请阅读[http://developer.android.com/guide/topics/resources/accessing-resources.html#ReferencesToThemeAttributes](http://developer.android.com/guide/topics/resources/accessing-resources.html#ReferencesToThemeAttributes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:51:06.757

有没有像不同大小的图标这样的特殊文件夹？（据我所知）否

不存在可用于主题的此类默认文件夹。

您需要以编程方式进行。

将主题信息保存在您的共享首选项中。

并且在加载视图时，您可以设置所需的主题可绘制对象。

# ios - iOS - 在方向改变时定位正在运行的动画

> ID：11231947
> 
> 赞同：0
> 
> 时间：2012-06-27T17:36:03.740
> 
> 标签：ios, core-animation

我已将 CABasicAnimation 应用于图层。动画修改了“position.y”图层属性，营造出柔和的弹跳效果；它设置为自动反转并重复。

我使用 From 和 To 值将动画定位在屏幕的右下角。在我改变设备的方向之前，它工作得很好。问题是动画相对于屏幕顶部定位。因此，当方向改变时，它不再定位在正确的位置。

视图本身的 autoresizingMask 已在界面生成器中正确设置，但动画似乎没有注意到这一点。我猜是因为动画正在为图层位置分配绝对值。

我有点难过，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:47:07.517

你能把你的动画放在一个单独的视图中，让它是独立的，然后用旋转调整那个视图吗？

# ruby - 将向量元素与其所代表的项目相关联的方法

> ID：11231948
> 
> 赞同：0
> 
> 时间：2012-06-27T17:36:03.990
> 
> 标签：ruby, algorithm, data-structures, vector

想象一个“项目”结构（表示为 JSON 哈希）

```
{
  id: 1,
  value: 5
} 
```

现在想象一下，我有一组 100,000 个项目，我需要对与每个项目关联的值执行计算。在计算结束时，我用新值更新每个项目。

为了快速做到这一点，我一直在使用 GSL 向量库，将每个值加载为向量的一个元素。

例如，项目：

```
{ id: 1, value: 5 }
{ id: 2, value: 6 }
{ id: 3, value: 7 } 
```

变成：

```
GSL::Vector[5, 6, 7] 
```

元素 1 对应于项目 id 1，元素 2 对应于项目 id 2，依此类推。然后我继续对向量中的每个元素执行逐元素计算，乘法，除法等。

虽然这可行，但让我感到困扰的是我必须依赖按 ID 排序的项目列表。

是否有另一种结构类似于散列（允许我肯定地说特定结果值对应于特定项目），但允许我像向量一样进行快速、内存高效的元素操作？

我正在使用 Ruby 和 GSL 绑定，但如有必要，我愿意用另一种语言重新编写它。

# border - 添加后Docx4j缺少表格边框

> ID：11231956
> 
> 赞同：2
> 
> 时间：2012-06-27T17:36:48.680
> 
> 标签：border, docx4j

我在创建表格时遇到了问题。这是我的代码：

```
Tbl projectTable = TblFactory.createTable(rows, cols, cellWidthTwips);
Tr tr = (Tr) projectTable.getContent().get(0); 
Tc tc = (Tc) tr.getContent().get(0);
tc.getContent().add( this.mainDocument.createParagraphOfText("Cell 1"));

List<Object> lines = mainDocument.getContent();
lines.add(5, projectTable); 
```

表格被添加到想要的位置，但没有任何边框。

当我使用该
`wordMLPackage.getMainDocumentPart().addObject(projectTable);` 方法时，一切正常。带边框的通缉表。

我的错误在哪里:(？

编辑：这里有两个指向我的 XML 代码图像的链接（无法上传，因为我没有足够的声誉）

[XML 第 1 部分](http://s7.directupload.net/file/d/2935/so82hacg_png.htm)

[XML 第 2 部分](http://s7.directupload.net/file/d/2935/lqq5grqg_png.htm)

这是复制粘贴的 XML 代码：

```
-<w:p w:rsidP="00CD4679" w:rsidRDefault="00F63A9F" w:rsidR="00CD4679" w:rsidRPr="00CD4679">-<w:pPr>-<w:rPr><w:b/></w:rPr></w:pPr>-<w:r>-<w:rPr><w:b/></w:rPr><w:t>test</w:t></w:r></w:p>-<w:tbl>-<w:tblPr><w:tblW w:w="0" w:type="auto"/><w:tblLook w:val="04A0"/></w:tblPr>-<w:tblGrid><w:gridCol w:w="2017"/><w:gridCol w:w="1473"/><w:gridCol w:w="1451"/><w:gridCol w:w="1492"/><w:gridCol w:w="1423"/><w:gridCol w:w="1432"/></w:tblGrid>-<w:tr w:rsidR="00B94E3A" w:rsidTr="00F63A9F">-<w:tc>-<w:tcPr><w:tcW w:w="2017" w:type="dxa"/></w:tcPr><w:p w:rsidRDefault="00B94E3A" w:rsidR="00B94E3A"/>-<w:p w:rsidRDefault="00F63A9F" w:rsidR="00B94E3A">-<w:r><w:t>test</w:t></w:r></w:p></w:tc>-<w:tc>-<w:tcPr><w:tcW w:w="1473" w:type="dxa"/></w:tcPr>-<w:p w:rsidRDefault="00F63A9F" w:rsidR="00B94E3A">-<w:r><w:t>test</w:t></w:r></w:p></w:tc>-<w:tc>-<w:tcPr><w:tcW w:w="1451" w:type="dxa"/></w:tcPr>-<w:p w:rsidRDefault="00F63A9F" w:rsidR="00B94E3A">-<w:r><w:t>test</w:t></w:r></w:p></w:tc>-<w:tc>-<w:tcPr><w:tcW w:w="1492" w:type="dxa"/></w:tcPr>-<w:p w:rsidRDefault="00F63A9F" w:rsidR="00B94E3A">-<w:r><w:t>test</w:t></w:r></w:p></w:tc>-<w:tc>-<w:tcPr><w:tcW w:w="1423" w:type="dxa"/></w:tcPr><w:p w:rsidRDefault="00B94E3A" w:rsidR="00B94E3A"/>-<w:p w:rsidRDefault="00F63A9F" w:rsidR="00B94E3A">-<w:r><w:t>test</w:t></w:r></w:p></w:tc>-<w:tc>-<w:tcPr><w:tcW w:w="1432" w:type="dxa"/></w:tcPr><w:p w:rsidRDefault="00B94E3A" w:rsidR="00B94E3A"/>-<w:p w:rsidRDefault="00F63A9F" w:rsidR="00B94E3A">-<w:r><w:t>test</w:t></w:r></w:p></w:tc></w:tr>-<w:tr w:rsidR="00B94E3A" w:rsidTr="00F63A9F">-<w:tc>-<w:tcPr><w:tcW w:w="2017" w:type="dxa"/></w:tcPr>-<w:p w:rsidRDefault="00F63A9F" w:rsidR="00B94E3A">-<w:r><w:t>test</w:t></w:r></w:p></w:tc>-<w:tc>-<w:tcPr><w:tcW w:w="1473" w:type="dxa"/></w:tcPr><w:p w:rsidRDefault="00B94E3A" w:rsidR="00B94E3A"/>-<w:p w:rsidRDefault="00F63A9F" w:rsidR="00B94E3A">-<w:r><w:t>test</w:t></w:r></w:p></w:tc>-<w:tc>-<w:tcPr><w:tcW w:w="1451" w:type="dxa"/></w:tcPr>-<w:p w:rsidRDefault="00F63A9F" w:rsidR="00B94E3A">-<w:r><w:t>test</w:t></w:r></w:p></w:tc>-<w:tc>-<w:tcPr><w:tcW w:w="1492" w:type="dxa"/></w:tcPr><w:p w:rsidRDefault="00B94E3A" w:rsidR="00B94E3A"/>-<w:p w:rsidRDefault="00F63A9F" w:rsidR="00B94E3A">-<w:r><w:t>test</w:t></w:r></w:p></w:tc>-<w:tc>-<w:tcPr><w:tcW w:w="1423" w:type="dxa"/></w:tcPr><w:p w:rsidRDefault="00B94E3A" w:rsidR="00B94E3A"/>-<w:p w:rsidRDefault="00F63A9F" w:rsidR="00B94E3A">-<w:r><w:t>test</w:t></w:r></w:p></w:tc>-<w:tc>-<w:tcPr><w:tcW w:w="1432" w:type="dxa"/></w:tcPr><w:p w:rsidRDefault="00B94E3A" w:rsidR="00B94E3A"/>-<w:p w:rsidRDefault="00F63A9F" w:rsidR="00B94E3A">-<w:r><w:t>test</w:t></w:r></w:p></w:tc></w:tr></w:tbl><w:p w:rsidP="0081364D" w:rsidRDefault="00C46EF4" w:rsidR="00C46EF4"/>-<w:p w:rsidP="0081364D" w:rsidRDefault="00C46EF4" w:rsidR="00C46EF4" w:rsidRPr="00CD4679">-<w:pPr>-<w:rPr><w:b/></w:rPr></w:pPr>-<w:r><w:t>Ende der Vorlage</w:t></w:r></w:p>-<w:sectPr w:rsidR="00C46EF4" w:rsidRPr="00CD4679" w:rsidSect="006C532E"><w:pgSz w:w="11906" w:h="16838"/><w:pgMar w:gutter="0" w:footer="708" w:header="708" w:left="1417" w:bottom="1134" w:right="1417" w:top="1417"/><w:cols w:space="708"/><w:docGrid w:linePitch="360"/></w:sectPr> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T08:10:35.897

```
public static void addBorders(Tbl table) 
{
    table.setTblPr(new TblPr());
    CTBorder border = new CTBorder();
    border.setColor("auto");
    border.setSz(new BigInteger("4"));
    border.setSpace(new BigInteger("0"));
    border.setVal(STBorder.SINGLE);

    TblBorders borders = new TblBorders();
    borders.setBottom(border);
    borders.setLeft(border);
    borders.setRight(border);
    borders.setTop(border);
    borders.setInsideH(border);
    borders.setInsideV(border);
    table.getTblPr().setTblBorders(borders);
} 
```

# clojure - clojure 部分文件/createTempFile

> ID：11231958
> 
> 赞同：2
> 
> 时间：2012-06-27T17:36:54.253
> 
> 标签：clojure, functional-programming

以下代码展示了我想在 java 静态方法上复制的语义

```
((partial apply (fn [x y] (print x y \newline))) ["one" "two"]) 
```

一二

零

但是，在对静态方法进行评估时，会引发以下异常。

```
((partial apply File/createTempFile) ["hello" ".txt"]) 
```

CompilerException java.lang.RuntimeException：找不到静态字段：类 java.io.File 中的 createTempFile，正在编译：（NO_SOURCE_PATH:50）

有没有办法在第二个场景中使用静态方法来实现第一个场景？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T17:42:43.523

apply 需要一个 clojure 函数（实现 iFn），因此您需要将静态方法调用包装在匿名函数中。

```
user> ((partial apply #(java.io.File/createTempFile %1 %2) ["hello" ".txt"]))
#<File /tmp/hello8601033663867010647.txt> 
```

或没有部分：

```
user> (apply #(java.io.File/createTempFile %1 %2) ["hello" ".txt"])
#<File /tmp/hello2555220024359994482.txt> 
```

# heroku - 在 heroku 上部署 play20 应用程序 (v. 2.0.2)

> ID：11231960
> 
> 赞同：4
> 
> 时间：2012-06-27T17:36:55.690
> 
> 标签：heroku, playframework, playframework-2.0

试图在 heroku 上运行一个 play 2.0.2 应用程序，但似乎还不支持。

有没有人有这方面的运气？

错误：

```
 http://s3pository.heroku.com/maven-scala-tools-snapshots/org/scala-tools/sbt/sbt_2.9.1/0.11.3/sbt_2.9.1-0.11.3.pom

      -- artifact org.scala-tools.sbt#sbt_2.9.1;0.11.3!sbt_2.9.1.jar:

      http://s3pository.heroku.com/maven-scala-tools-snapshots/org/scala-tools/sbt/sbt_2.9.1/0.11.3/sbt_2.9.1-0.11.3.jar

        ::::::::::::::::::::::::::::::::::::::::::::::

        ::          UNRESOLVED DEPENDENCIES         ::

        ::::::::::::::::::::::::::::::::::::::::::::::

        :: org.scala-tools.sbt#sbt_2.9.1;0.11.3: not found

        ::::::::::::::::::::::::::::::::::::::::::::::

   :: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS
   unresolved dependency: org.scala-tools.sbt#sbt_2.9.1;0.11.3: not found
   Error during sbt execution: Error retrieving required libraries
     (see /tmp/build_7sg3kay36u6a/project/boot/update.log for complete log)
   Error: Could not retrieve sbt 0.11.3
 !     Failed to build app with SBT 0.11.0
 !     Heroku push rejected, failed to compile Scala app 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:21:07.307

这是因为旧缓存而发生的（我的应用程序之前已经部署在 heroku 上，因此是旧缓存）

从您的播放应用程序的根目录，执行

```
heroku config:add BUILDPACK_URL='https://github.com/heroku/heroku-buildpack-scala#cleancache' 
```

然后再次推送您的应用

这将删除所有缓存的工件和 sbt jar 并重新下载最新的工件。

只需记住在之后执行 heroku config:remove BUILDPACK_URL 或每次推送缓存时都将被删除并且构建需要一段时间。

感谢 scott @play googlegroups

[https://groups.google.com/forum/#!topic/play-framework/yUDfW2UtBjs](https://groups.google.com/forum/#!topic/play-framework/yUDfW2UtBjs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T07:19:33.620

这可能是无关的，但我有一些冲突的插件`myhomedir/.sbt/plugins/build.sbt`搞砸了我的 Play 2.0.2 构建。删除它为我修复了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:41:31.023

我在我的 Mac 上遇到了这个确切的错误，这是因为 MacPorts 没有安装正确版本的 SBT（sudo port install sbt 给了我 0.11.2 而不是 0.11.3） - 是的，我更新了我的端口树。所以我 sudo port 卸载了 sbt 并使用了 brew install sbt。这个（Homebrew）安装了 0.11.3 并且问题消失了。我建议检查 Heroku 上的 sbt 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T04:20:04.047

如果你在 play 2.0.4 上遇到这个问题（我知道，这个问题是针对 play 2.0.2，但它是第一个在 google 上）：将 sbt 版本更改为 0.11.3：将 project/build.properties 中的 sbt 版本更改为 0.11。 3

# php - 如何使用 php 找到整数/字符的大小（以字节为单位）？

> ID：11231964
> 
> 赞同：2
> 
> 时间：2012-06-27T17:37:20.760
> 
> 标签：php

> **可能重复：**
> [有没有办法以字节为单位获取 PHP 变量的大小？](https://stackoverflow.com/questions/4085895/is-there-a-way-i-get-the-size-of-a-php-variable-in-bytes)

我需要使用 php 查找 int/char 或数组的字节大小。我认为它可以通过 php 中的内存管理来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:45:58.250

```
/* load before whit a value */
$before = memory_get_usage(FALSE);

/* make sure $temp dosn't have a content before */
$temp = NULL;

/* calculate current usage */
$before = memory_get_usage(FALSE);

/* copy the content to a nex varibale */
$temp = $variable_to_test . '';

/* calculate the new usage */
$after = memory_get_usage(FALSE);

/* clean up data */
unset($temp);

/* calculate the incresed memory usage */
$memory_usage = $after - $before; 
```

# sql - 试图连接几个 TO_DATE(SUBSTR) 以从字符串中获取“dd-mon-yyyy”的组合日期..？

> ID：11231967
> 
> 赞同：0
> 
> 时间：2012-06-27T17:37:31.763
> 
> 标签：sql, oracle11g, substr, concat, to-date

我之前问过关于将字符串转换为日期并对其进行格式化.. [根据 ORACLE 11g SQL 中的字符位置拆分字符串](https://stackoverflow.com/questions/11231161/split-string-based-on-character-position-in-oracle-11g-sql)

这是我提出的解决方案，其中 WKENDING 是 VARCHAR2，RYEAR 是日期 WKENDING 的数据看起来像“523”（mmdd），而 RYEAR 是“2012”。

```
UPDATE OB_SEL_LST84_AGG_WKEND  SET WKENDYEAR =  (TO_DATE((TO_DATE(substr(WKENDING,3,2)),'dd')||(TO_DATE(substr(WKENDING,0,1)),'mon')||(TO_DATE(TO_CHAR(RYEAR)),'yyyy')),'dd-mon-yyyy'); 
```

我现在收到错误“ORA-00907：缺少右括号”，我已经仔细检查了几次括号，它们看起来对我来说是正确的..任何帮助都会很棒..谢谢！

更新 - 在查看了我上面的语法之后，我认为可能有太多的 TO_DATE 尝试转换正在进行。所以，我把它缩短到这个..

```
UPDATE OB_SEL_LST84_AGG_WKEND  SET WKENDYEAR =  (TO_DATE((substr(WKENDING,3,2))||(substr(WKENDING,0,1))||TO_CHAR(RYEAR)),'dd-mon-yyyy'); 
```

不过，我仍然收到缺少括号的错误.. ARGH！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:56:26.567

由于`wkendyear`列的数据类型是`DATE`，你应该只需要

```
UPDATE OB_SEL_LST84_AGG_WKEND  
   SET wkendyear = to_date( lpad(WKENDING,4,'0') || RYEAR, 'mmddyyyy' ) 
```

当然，这假设您的所有字符串数据都可以转换为有效日期。只要您有 a `wkending`of`0229`和 a `ryear`of `2013`（或其他一些不是有效日期的字符串组合），该`TO_DATE`函数就会抛出异常。这就是在列中存储日期`VARCHAR2`通常存在问题的原因之一。

如果不是所有数据都可以正确转换为 a `DATE`，您可以创建一个尝试进行转换并`NULL`在出现异常时返回 a 的函数。例如

```
CREATE OR REPLACE FUNCTION my_to_date( p_str IN VARCHAR2, p_format IN VARCHAR2 )
  RETURN DATE
IS
  l_dt DATE;
BEGIN
  l_dt := to_date( p_str, p_format );
  RETURN l_dt;
EXCEPTION
  WHEN others THEN
    RETURN NULL;
END; 
```

你的`UPDATE`陈述就会变成

```
UPDATE OB_SEL_LST84_AGG_WKEND  
   SET wkendyear = my_to_date( lpad(WKENDING,4,'0') || RYEAR, 'mmddyyyy' ) 
```

您还可以查找无法将字符串转换为日期的行

```
SELECT *
  FROM OB_SEL_LST84_AGG_WKEND  
 WHERE my_to_date( lpad(WKENDING,4,'0') || RYEAR, 'mmddyyyy' ) IS NULL
   AND (wkending IS NOT NULL or ryear IS NOT NULL) 
```

# php - PHP：从 Flash SWF 中提取 URL？

> ID：11231968
> 
> 赞同：0
> 
> 时间：2012-06-27T17:37:33.607
> 
> 标签：php, curl, flash, web-scraping

从 Flash/SWF 格式的在线手册中，我需要提取指向网上商店不同页面的所有 URL。

使用 Firebug，我可以看到 SWF 加载了许多不同的文件，例如图像、javascript 文件，甚至是似乎包含所有 URL 的 XML 文件。

那么，使用 PHP，我将如何提取/下载这些已加载的文件？cURL 仅获取加载 SWF 的 HTML 页面的源，而不获取 SWF 本身，更不用说 SWF 加载的文件了。

有没有办法下载带有 SWF 的页面加载的所有文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:24:26.207

纯 php 无法实现您想要的。由于 php 不会“运行”flash 内容。就像搜索引擎无法正确索引 AJAX 驱动的网站一样，因为 Javascript 不是“运行”的。

您可以制作一个浏览器插件（例如 firefox）来捕获并返回请求流量（或找到一种方法让您的插件与 firebug 交互以获取它），并让 php 在服务器上调用浏览器（如果服务器有一个 gui) 需要进行提取时。这显然很复杂，并且让服务器运行 gui 是资源密集型的，并且会引入其自身的问题（安全性等），因此我会重新考虑您正在尝试做什么。

# jquery - 使用 jQuery UI 效果对 jQuery 效果进行排队的问题

> ID：11231974
> 
> 赞同：3
> 
> 时间：2012-06-27T17:37:49.487
> 
> 标签：jquery, jquery-ui

当谈到排队 jQuery 效果和 jQuery UI 效果时，我真的很困惑。当我做

```
$('#div_id').effect('bounce').effect('shake').fadeOut(); 
```

div 会先弹起然后淡出，但会省略掉抖动。

打电话

```
$('#div_id').effect('bounce').effect('shake'); 
```

一切都像我预期的那样工作（先反弹而不是摇晃）。

还

```
$('#div_id').effect('bounce').fadeOut(); 
```

就像预期的那样工作

这是一个完整的例子：

```
<!DOCTYPE html>
<html>
<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <script>
  $(document).ready(function() {  
    var square = $('#square');

    $("#button_1").click(function() {
      square.effect('bounce'); // ok
    });

    $("#button_2").click(function() {
      square.effect('bounce').effect('shake'); // ok (bounces first, than shakes)
    });

    $("#button_3").click(function() {
      square.effect('bounce').fadeOut(); // ok (bounces first, than fades out)
    });

    $("#button_4").click(function() {
      square.effect('bounce').effect('shake').fadeOut(); // fail (bounces first, than fades out)
    });
  });
  </script>
</head>
<body>
  <p></p><p></p><p></p><p></p>
  <div id="square" style="width: 100px; height: 100px; background: blue; position: relative;"></div>

  <button id="button_1">bounce</button>
  <button id="button_2">bounce shake</button>
  <button id="button_3">bounce fadeOut</button>
  <button id="button_4">bounce shake fadeOut</button>
</body>
</html> 
```

非常感谢任何帮助

谢谢比约恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T06:29:58.830

beaviour 似乎是 jQuery 中的一个错误

一个可能的解决方法是

```
$('#div_id').effect('bounce').effect('shake',function(){$(this).fadeOut()}); 
```

感谢大家的贡献和帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:46:42.643

你可以把回调放在`#button_4`

```
$("#button_4").click(function() {
      square.effect('bounce',function(){
            $(this).effect('shake',{ times:3 }, 300).fadeOut()          
      });
}); 
```

示例：[工作示例..也许 ^_^](http://jsfiddle.net/goonie/xfKvL/)

解释： [http ://www.w3schools.com/jquery/jquery_callback.asp](http://www.w3schools.com/jquery/jquery_callback.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:47:36.730

不知道那里出了什么问题，但是我建议像这样明确地使用回调：

```
var square = $('#square');

$("#button_1").click(function() {
  square.effect('bounce'); // ok
});

$("#button_2").click(function() {
  square.effect('bounce').effect('shake'); // ok (bounces first, than shakes)
});

$("#button_3").click(function() {
  square.effect('bounce').fadeOut(); // ok (bounces first, than fades out)
});

$("#button_4").click(function() {
    square.effect('bounce').effect('shake',function(){$(this).fadeOut()});
});​ 
```

**更新**

我刚刚更新了工作解决方案的代码。

工作示例：[jsfiddle](http://jsfiddle.net/wPzZU/6/)

# symfony - 如何使用 Twig 动态更改页面标题

> ID：11231975
> 
> 赞同：15
> 
> 时间：2012-06-27T17:37:51.193
> 
> 标签：symfony, twig

我在我的网站中使用 Twig 作为模板，我`layout.html.twig`在所有其他树枝页面中进行了扩展，所以在我`layout.html.twig`的页面标题中：

```
<title>{% block title %}Title of my website{% endblock %}</title> 
```

现在我的问题是如何在我的所有页面中动态更改此标题，例如我必须`news.html.twig`显示世界上所有最新的新闻，所以我希望当我显示我的新闻页面时，我的页面标题中有新闻标题。 ..

```
<title>{% block title %}Title of the news{% endblock %}</title> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-08-07T18:23:37.333

我的解决方案在子模板中看起来更优雅：

在你的`layout.html.twig`：

```
<title>{% if page_title is defined %} {{ page_title }} | {% endif %} Your Website</title> 
```

在您的子页面模板中：

```
{% extends '::layout.html.twig' %}

{% set page_title = 'Your page-title' %}

{# Put the rest of your page below #} 
```

您还可以在例如重用标题。一个做`<h1>{{ page_title }}</h1>`:-)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-27T17:43:03.020

你很亲密。在您的`news.html.twig`我假设您将所有内容都放在这样的块中：

```
{% extends '::layout.html.twig' %}

{% block content %}
    content of the news page here
{% endblock %}` 
```

因此，您所要做的就是在该内容块**之外为标题添加另一个块**

```
{% extends '::layout.html.twig' %}

{% block title %}Title of news page{% endblock %}

{% block content %}
    content of the news page here
{% endblock %}` 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-23T15:07:43.030

比你想象的更简单。

放置主/父布局

```
...
<title>{% block title %}{% endblock %} - My Site</title>
... 
```

并且，在内容页面（在子布局上），获取页面标题

```
...
<h1>{{ block('title') }}</h1>
... 
```

因此，您在 head title 中输入的任何标题都将显示在 content title 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-21T17:54:20.120

{% block title %} {{ post.title }}Symfony web.app{% endblock %}

# emacs - 如何阻止 Emacs 在 shell 中渲染垃圾字符？

> ID：11231982
> 
> 赞同：0
> 
> 时间：2012-06-27T17:38:14.790
> 
> 标签：emacs

在我的 emacs shell 中，我看到了这个输出：

```
^[[J~% echo $PS1    
%2c%% 
```

在我的另一台机器上，这些东西根本没有出现。谁能提出一个原因以及如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:47:46.257

这与您的 PS1 设置有关。基本上 Emacs 不会接受 PS1 太花哨的设置。我在 ~/.bashrc 中使用了以下代码来区分 xterm 和其他术语模拟器（例如 Emacs）之间的 PS1。你可以试一试。

```
case $TERM in
xterm)
export PS1='\[\e]0;\u@\h: \W\a\]\[\e[31;1m\]\w\n\[\e[0m\]'
;;
*)
export PS1='\[\e[31;1m\]\w\n\[\e[0m\]'
;;
esac 
```

# c# - ' 的类型初始化器 ' 应用程序池超时后抛出异常

> ID：11231983
> 
> 赞同：1
> 
> 时间：2012-06-27T17:38:17.530
> 
> 标签：c#, visual-studio-2010, iis, dll

应用程序池超时后，我遇到了外部 DLL 的问题。

我将 VS2010 与 C# Web 应用程序和 .NET 2.0 一起使用。此应用程序包括一个外部 DLL（用 C++ 编写）。此 DLL 在项目中被引用，因此在 ObjectBrowser 中我可以看到程序集和所有函数。该 DLL 需要另一个 DLL，我将它们安装在 ac:\DLL 目录中，并将该目录添加到 Application_Start() 函数的 EnvironmentVariables“路径”中。

除应用程序超时外，应用程序始终正常工作。（它有 20 分钟的默认超时）。

下次我在超时后运行应用程序时，我得到“'' 的类型初始化程序引发了异常。” 在执行 DLL 组件的新对象的函数中

引发错误的另一个选项是在 Windows 任务管理器/进程中为“w3wp.exe”“结束进程”。结束该过程并刷新应用程序后，将显示错误。

谢谢

**编辑：**

内部异常：

```
at <CrtImplementationDetails>.ThrowModuleLoadException(String , Exception )
at <CrtImplementationDetails>.LanguageSupport.Initialize(LanguageSupport* )
at .cctor()The type initializer for '<Module>' threw an exception. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:55:37.603

在实施删除 cookie 后，我发现其他场景也存在同样的问题。

所以深入挖掘我发现真正的问题是我的非托管 DLL 与 IPrincipal 固有的类发生冲突：

```
public class UserDataThirdParty : IPrincipal 
```

所以我在这些链接中找到了解决方案：

['' 的类型初始化程序引发了异常](http://world.episerver.com/Blogs/Svante-Seleborg/Dates/2011/10/The-type-initializer-for-Module-threw-an-exception/)

和

[加载程序集 msvcm80 时 DataPortal 出错](http://forums.lhotka.net/forums/p/4366/21404.aspx)

所以现在我的类的定义是：

```
public class UserDataThirdParty : MarshalByRefObject, IPrincipal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T06:29:45.897

终于问题解决了。

问题出在饼干上。所以在 Application_Start() 函数中，我删除了这个 cookie：

```
HttpCookie aCookie = new HttpCookie(FormsAuthentication.FormsCookieName);
aCookie.Expires = DateTime.Now.AddDays(-1);
HttpContext.Current.Response.Cookies.Add(aCookie); 
```

# scala - scala覆盖地图

> ID：11231984
> 
> 赞同：0
> 
> 时间：2012-06-27T17:38:20.280
> 
> 标签：scala

我想扩展：

```
case class Response(request: String, errors: Map[Any, Any]) 
```

使用更具体的地图，但是：

```
case class ResponseForJerkson(override val request: String, override val errors: Map[String, String]) extends Response(request, errors) 
```

不工作。

我认为缺少明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:48:14.077

好吧，你显然不能这样做，因为和`Map[A, B]`不是协变的。只是尝试一下就会给你一个详细的编译错误：`A``B`

```
scala> class A(val m: Map[Any, Any])
defined class A

scala> class B(override val m: Map[String, String]) extends A(m)
<console>:8: error: type mismatch;
 found   : Map[String,String]
 required: Map[Any,Any]
Note: String <: Any, but trait Map is invariant in type A.
You may wish to investigate a wildcard type such as `_ <: Any`. (SLS 3.2.10)
       class B(override val m: Map[String, String]) extends A(m)
                                                              ^ 
```

它适用于协变类型：

```
scala> class C(val m: List[Any])
defined class C

scala> class D(override val m: List[String]) extends C(m)
defined class D 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T22:41:13.487

稍微扩展@oxbow_lakes 的答案。“非协变”意味着它`Map[String, String]`不是 的子类型`Map[Any, Any]`。你可以看到为什么它不是：

```
def foo(response: Response) = response.errors.get(0) // legal, because 0 is an Any 
```

但如果`response`它实际上是一个实例`ResponseForJerkson`并且`errors`有 type `Map[String, String]`，这将是非法的。所以有些操作`Response`是非法的`ResponseForJerkson`，因此它不能扩展`Response`。

# oracle - 通过对同一页面上其他数字字段的值求和来动态更新数字字段

> ID：11231985
> 
> 赞同：0
> 
> 时间：2012-06-27T17:38:28.500
> 
> 标签：oracle, plsql, oracle-apex

我一直在努力使用同一页面上其他数字字段的值总和来动态更新 Apex 应用程序中的数字字段。该页面包含一个包含 6 个问题的问卷，这些问题具有预定义的答案，以及每个答案的预定义数字分数。在页面底部，我有一个标有“分数”的数字字段，我想根据所选答案进行更新。

我继续创建了一个动态操作，该操作应该更新名为 P3_SCORE 的数字字段。

我一直试图开始工作的示例目前添加了两个项目，数字字段项目 P3_SELFCARE 和 P3_MOBILITY。

```
BEGIN
return :P3_SELFCARE + P3_MOBILITY;
END; 
```

我的 PL/SQL 函数体不断出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:52:45.900

不知道你得到的错误是什么，但你不想

```
BEGIN 
  return :P3_SELFCARE + :P3_MOBILITY; 
END; 
```

# javascript - 如何获取先前的复选框值并进行比较

> ID：11231986
> 
> 赞同：0
> 
> 时间：2012-06-27T17:38:31.933
> 
> 标签：javascript, jquery, javascript-events

我正在尝试根据值更改示例创建一个复选框限制：我有以下复选框！

如果选中的复选框的值不同，则前面的提示警告！某些复选框确实具有相同的值。不是所有的人！

例子：

```
<input name="" type="checkbox" value="here">(if this was checked)
<input name="" type="checkbox" value="here">(then this)
<input name="" type="checkbox" value="there">(would not allow prompt alert) 
<input name="" type="checkbox" value="here">(would allow)

<input type="checkbox" name="checkbox2[]" onClick="setChecks(this)" value="`key`=<?php 
echo $rspatient['key']?>" class="chk" id="chk<?php echo $a++?>" /> 
```

我有限制复选框数量的代码，但我不确定如何将以前的值与选定的值进行比较

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:44:23.003

您可能想要使用`prev()`和`next()`jQuery 函数。我不太了解你想做什么，但类似的东西`$(':checkbox').change(function() { $(this).prev(); //this references the previous sibling })`会让你开始

也许像

```
$('input:checkbox').change(function() {
    if ($(this).attr('checked') && $(this).prev().attr('checked') && $(this).attr('value') != $(this).prev().attr('value')) {
         alert('you can't do that');
    }
}); 
```

但就像我说的，我不知道你想做什么

# javascript - 当我使用树菜单脚本时，颜色框不起作用

> ID：11231989
> 
> 赞同：0
> 
> 时间：2012-06-27T17:38:34.803
> 
> 标签：javascript, jquery, colorbox

当我使用树菜单 js 时，颜色框不起作用。我该如何解决这个问题。

我正在使用以下树形菜单 js。

```
<script type='text/javascript' src='https://www.markettrendsignal.com/js/jquery.colorbox-min.js'></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".videodisplay").colorbox({
            iframe: true,
            width: "670",
            height: "465"
        });
</script>
<script src="http://mtsbeta.com/js/simpletreemenu.js" type="text/javascript"></script>
<script type="text/javascript">
    //ddtreemenu.createTree(treeid, enablepersist,opt_persist_in_days (default is 1))
    ddtreemenu.createTree("treemenu1", true)
    ddtreemenu.createTree("treemenu2", true)
</script> 
```

HTML：

```
<td id="webinar_register">
    <a href="modules/video_display.php?Wvideo=<?php echo $wdate1[$k]['video'];?>"
    class="videodisplay">View</a>
</td>
</tr>
</table>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:03:43.543

运行 createTree 后尝试分配颜色框。

# c# - 在 C# 中计算列表的子列表

> ID：11231990
> 
> 赞同：0
> 
> 时间：2012-06-27T17:38:35.927
> 
> 标签：c#, list

我有一个列表列表，称之为列表持有者。我想计算 listholder 包含多少个列表。listholder.count() 似乎不起作用（没有定义）。

我是这样声明的：

```
List<List<T>> listholder = new List<List<T>>(); 
```

并尝试过

```
listholder.count() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:42:00.470

`listholder.Count()`将返回该列表中的元素数，即它包含的列表数。

# c++ - 链接 OpenCV 时未定义的符号

> ID：11231994
> 
> 赞同：1
> 
> 时间：2012-06-27T17:38:58.787
> 
> 标签：c++, ios, opencv, linker

我正在尝试将 OpenCV 库的静态库链接到我的项目中，但出现错误：

```
Undefined symbols for architecture armv7:
  "__ZN2cv9ExceptionC1EiRKSsS2_S2_i", referenced from:
      __ZL16icvGenerateQuadsPP8CvCBQuadPP10CvCBCornerP12CvMemStorageP5CvMati in libopencv_calib3d.a(calibinit.o)
      _cvFindChessboardCorners in libopencv_calib3d.a(calibinit.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我不知道那个符号“ZN2cv9ExceptionC1EiRKSsS2_S2_i”应该是什么，在我用来构建静态库的任何源文件或头文件中找到的字母字符串。

任何对链接器更有经验的人可以向我解释这些错误吗？

编辑：01.07。还没有解决这个问题，只是选择不使用 calib3d 进行棋盘检测，并使用 features2D 进行不太复杂的圆形检测，不会出现链接错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:19:56.430

很可能您将 OpenCV 库的顺序错误。在您的链接列表中尝试以下顺序：

> opencv_contrib opencv_legacy opencv_videostab opencv_photo opencv_stitching opencv_objdetect opencv_video opencv_ml opencv_calib3d opencv_features2d opencv_highgui opencv_flann opencv_imgproc opencv_core

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:26:59.123

您可以使用`c++filt`unmangle 未定义的符号来查找实际的函数名称。

```
$ c++filt.exe __ZN2cv9ExceptionC1EiRKSsS2_S2_i
cv::Exception::Exception(int, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) 
```

然后，您必须确定哪个源文件包含该函数并在库中与该函数相对应的链接。

# jsf - 日历隐藏在手风琴组件中

> ID：11231995
> 
> 赞同：2
> 
> 时间：2012-06-27T17:38:59.637
> 
> 标签：jsf, richfaces

日历组件隐藏在手风琴项目后面，无论您为组件分配什么 z-index 值，无论是手风琴/日历，它都不会让步，有人可以帮我解决这个问题。我正在使用 RichFaces 4.2.0。

示例代码：

```
<h:form>
   <rich:accordion style="z-index:10;" id="acrdion" switchType="client">
        <rich:accordionItem id="acdItm" header="Overview:">
         <rich:calendar value="#{bean.date}" datePattern="dd/M/yy" 
                    id="Cal1" style="z-index:100;"/>
        </rich:accordionItem>
   </rich:accordion>
<h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T11:51:42.687

您可以通过覆盖 rf-ac-itm-cnt 类来解决此问题，如下所示：

```
<h:outputStylesheet>
        .rf-ac-itm-cnt {
           overflow: visible;
        }
</h:outputStylesheet> 
```

# c# - 将下拉列表项的值转换为 int

> ID：11231997
> 
> 赞同：1
> 
> 时间：2012-06-27T17:39:02.237
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4, razor, drop-down-menu

我需要 SelectListItem 的值为 int。

所以我把它从数据库中提取出来，在这个过程中将它转换为字符串并存储到 listitem 的值。

```
public class BookAdd
{
public BookAdd()
{
public Book Book { get; set; }
DataModelContainer db = new DataModelContainer();
IEnumerable<SelectListItem> items = db.PublisherSet
               .Select(i => new SelectListItem
               {
                 Value = SqlFunctions.StringConvert((double)i.Id), 
                 Text = i.Name
               });
    }
} 
```

然后，当从下拉列表中选择时，我需要再次将该值作为 int 存储到 Book.PublisherId。我知道下面的代码不完整，我想我需要以某种方式将所选项目的值转换为 int，我该怎么做？

```
@model Bookshops.Models.BookAdd
...
@Html.DropDownListFor(model => model.Book.PublisherId, Model.items); 
```

最后是控制器：

```
 public ActionResult Create2()
    {
        var bookAdd = new BookAdd();
        ViewBag.Publisher = bookAdd.items;
        return View(bookAdd);
    }

    //
    // POST: /Book/Create

    [HttpPost]
    public ActionResult Create2(BookAdd book)
    {
            if (ModelState.IsValid)
            {
                Book book2 = new Book();
                book2.Id = book.Book.Id;
                book2.AuthorId = book.Book.AuthorId;
                book2.Isbn = book.Book.Isbn;
                book2.Id = int.Parse(book.Book.PubId);
                book2.Title = book.Book.Title;
                book2.YearPublished = book.Book.YearPublished;

                db.BookSet.Add(book2);
                db.SaveChanges();
            }
            return RedirectToAction("Index");
    } 
```

我正在使用 MVC 3、EF 4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:51:10.887

我没有构建一个`SelectListItem`，而是构建了这样的东西：

```
public struct BookItem
{
   int id;
   string name;
} 
```

然后将以下项目添加到模型中并选择数据到其中

```
IEnumerable<BookItem> bookList {get; set;} 
```

最后

```
@Html.DropDownListFor(model => model.Book.PublicherId, new SelectList(Model.bookList, "id", "name")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:45:50.830

当 DropDownList 的选定项目将被回发时，将其从字符串转换为 int，如 Convert.ToInt32(DropDownSelectedItem) 或 Int32.TryParse(value, out number)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:48:34.833

首先，您可以将映射代码简化为

```
db
    .PublisherSet
    .Select(x=> new SelectListItem{Value = x.Id.ToString(), Text = x.Name})
    .ToArray(); 
```

在视图中你可以做

```
@Html.DropDownListFor(model => model.Book.PublisherId, Model.items); 
```

它将正确呈现带有选项和选择的适当发布者的选择元素。

然后，当用户单击提交按钮时，您可以使用模型绑定约定将其传递回控制器操作。

最后，都是文字。这就是网络的本质。我们有很多技巧、转换器和绑定器将字符串字典转换为丰富的视图模型，但最终它只是字符串。

# jquery - 如何更改滑块开关文本？

> ID：11231998
> 
> 赞同：0
> 
> 时间：2012-06-27T17:39:09.810
> 
> 标签：jquery, jquery-mobile

我有一个标准选择开关。我想在页面加载（准备好）后更改特定选项的文本。值已更改，但未在浏览器用户界面视图中更新。'refresh' 和 change() 没有帮助。

```
<script type="text/javascript">
    $("#set_slider option[value='0']").text('before') ;
    $("#set_slider").change();

    function clickz() {
        $("#set_slider option[value='0']").text('after') ;
        $("#set_slider").change();
        $("#set_slider").slider('refresh'); 
        $("#txt").html($("#set_slider option[value='0']").text());
    }
</script>

<select name="set_slider" id="set_slider" data-role="slider" data-mini="false" >
    <option value="0" >SET</option>
    <option value="1" >OFF</option>
</select>

<div id=txt></div>
<input type='button' onclick='clickz();' value='Update'/> 
```

这个也不好用：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head>

<body>
    <div data-role="page" id="page2">
    <div data-role="header"><h1>Header</h1></div>
    <div data-role="content">
        <select name="set_slider" id="set_slider" data-role="slider" data-mini="false" >
            <option value="0" >SET</option>
            <option value="1" >OFF</option>
        </select>
    </div>
      <div id=txt></div>
    <input type='button' onclick='clickz();' value='Update'/>
    <div data-role="footer">
        <h1>Footer</h1>
    </div>
</div>

<script type="text/javascript">
    $(document).delegate('#page2', 'pageshow', function (event, ui) {
        $("#set_slider").change();
        $("#set_slider").slider('refresh'); 
    }); 

    $("#set_slider option[value='0']").text('before');
    function clickz() {
        $("#set_slider option[value='0']").text('after');
        $("#txt").html($("#set_slider option[value='0']").text());
        $.mobile.changePage('#page2');
    }
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:49:05.077

这样的事情有用吗？

*   [http://jsfiddle.net/LgLPu/](http://jsfiddle.net/LgLPu/)

JS

```
$('#set_slider').bind('change', function() {
    var activeLabel  = $('span.ui-slider-label');
    var mySlider     = $(this);
    var text         = mySlider.find('option:selected').text();
    var new_set      = 'Before';
    var new_off      = 'After';

    // changing the text does nothing
    //mySlider.find('option[value="0"]').text(new_set);
    //mySlider.find('option[value="1"]').text(new_off);

    // You need to update the ui-slider-label spans
    if(mySlider.val() == 0) {
        activeLabel.text(new_set);
    } else {
        activeLabel.text(new_off);        
    }

    mySlider.slider( 'refresh' ); // .trigger( 'create' )
}); 
```

HTML

```
<select name="set_slider" id="set_slider" data-role="slider" data-mini="false" >
    <option value="0" >SET</option>
    <option value="1" >OFF</option>
</select>

<!--
This is generated form the slider element:

<span class="ui-slider-label ui-slider-label-a ui-btn-active ui-btn-corner-all" role="img" style="width: 40.173913043478265%; ">OFF</span>
-->
​ 
```