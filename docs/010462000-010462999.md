# StackOverflow 问答 10462000-10462999

# php - 装饰器模式能提高性能吗？

> ID：10462000
> 
> 赞同：0
> 
> 时间：2012-05-05T12:49:54.413
> 
> 标签：php, design-patterns, uml, decorator

我坚信装饰器模式在维护代码时确实有帮助，但这是否有助于提高 Web 应用程序的整体性能？因为您必须创建一个类的实例然后使用它，但没有它您只需以正常方式创建链接。只是为了刷新您的想法，这里是一个代码示例：

```
<?php
   class decorateEmail implements decoratorInterface {
       public function decorate($item) {
           $return = '<a href="mailto:' . $item . '">' . $item . '</a>';
           return $return;
       }
   }
?> 
```

这是一个UML图；我希望它有更多帮助：

![在此处输入图像描述](../Images/ebde12f6b00288232532d8b242a552c1.png)

**编辑：**
如果答案是否定的，我们是否可以推断所有设计模式都没有帮助，并且 Facebook、Digg 等大型网络应用程序不使用它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T20:47:07.533

装饰器模式的*目的**不是*提高性能；它是将行为添加到现有对象。

如果使用得当，设计模式有助于更好地控制代码库的设计和演变。性能只是良好的软件设计和架构的*一个*关注点；其他问题包括可维护性、安全性和可扩展性。

设计模式在大规模软件开发中很有用；还要看看*设计原则*，比如[SOLID 原则](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)。

# c# - 是什么导致了从 void 类型到 List 的隐式转换错误 ?

> ID：10462007
> 
> 赞同：0
> 
> 时间：2012-05-05T12:50:41.400
> 
> 标签：c#, .net, list, generics

我写了以下代码：

```
public List<Card> DealCards(int numCardsToDeal) {
            return shuffle.RemoveRange(0,numCardsToDeal-1);

        }

private List<Card> shuffle = new List<Card>() // class property deceleration. 
```

但它会产生以下错误：

> 无法将类型“void”隐式转换为“System.Collections.Generic.List”

我不明白为什么。我刚回来时它就起作用了`shuffle`。为什么这能解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:53:26.037

[RemoveRange](http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx)修改列表并且不返回任何内容 - 因此`void`. 这与许多返回新列表的列表方法不同。

删除卡片然后返回列表的以下代码应该可以工作：

```
public List<Card> DealCards(int numCardsToDeal)
{
    shuffle.RemoveRange(0,numCardsToDeal-1);
    return shuffle;
} 
```

如果`shuffle`实际上是一个全球性的，你甚至不需要返回任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:53:36.463

该[`RemoveRange`方法](http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx)不返回值——它的返回类型是`void`. 它所做的一切就是从列表中删除指定范围的元素。它不返回修改后的列表或包含已删除对象的列表。

因此，尝试返回该`RemoveRange`方法的结果会产生错误，因为您无法`void`从应该返回的函数返回 a `List<Card>`。

您需要将代码分成两行：

```
public List<Card> DealCards(int numCardsToDeal)
{
    // First, remove the range of cards from the deck.
    shuffle.RemoveRange(0,numCardsToDeal-1);

    // Then, return the modified list.
    return shuffle;
} 
```

# python - 用python计算素数

> ID：10462008
> 
> 赞同：1
> 
> 时间：2012-05-05T12:50:48.927
> 
> 标签：python

我知道，已经有很多关于素数的问题，但我不要求代码。我只是想知道，我的矿出了什么问题（我希望评论能帮助你理解我在做什么）：

```
from math import ceil

def isPrimeNumber (n, out='short'): #Checks, whether n is a prime number
    answer = 'Yes'
    for p in range(2, int(ceil(n**0.5))+1): #Checks all numbers lower than 
                                            #SQRT(n), if they are divisors of n
        if n%p == 0:    #If p is a divisor, n isn't prime
            answer = 'No'  
            if out == 'verbose':
                print 'Least divisor is', p
            return False
            break
    if answer == 'Yes': #If there isn't a p, that is a divisor, n is prime
        if out == 'verbose':
            print 'No divisors except for 1 and', str(n)+'!'
        return True   

def primeNumbers (start = 1, stop = 1000, numbers = 0):
    N = stop
    if numbers == 0: #Calculates all prime numbers in N numbers in a row
                     #(N=1000 -> calculates all prime numbers in 1000 numbers,
                     #by default from 1 to 997)
        primes = []
        for i in range(start, N+1):
            if isPrimeNumber(i) == True:
                primes.append(i)
    elif numbers == 1: #Calculates N prime numbers in a row 
                       #(N=1000 -> calculates 1000 prime numbers)
        primes = [start]
        i = len(primes)
        j = 1
        while i <= N: #Stops, when we get N prime numbers - doesn't work!
            n = max(primes) + 1
            while j != 'stop':
                if isPrimeNumber(n, out='short') == True:
                    primes.append(n)
                    i = i + 1
                    j = 'stop' #Stops nested cycle, when reached 
                               #the first prime number
                else:
                    n = n + 1
    else:
        print 'Wrong input! 3rd number in function call must be either 0 or 1'
    return primes 
```

函数 isPrimeNumber() 工作正常。当 numbers=0 时，函数 primeNumbers 也可以正常工作。但是如果数字=1，那么，看起来，其中一个循环永远不会停止，我不明白为什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:59:11.413

你在这里有一个无限循环：

```
 while i <= N:
        n = max(primes) + 1 ### resetting `n'!
        while j != 'stop':
            if isPrimeNumber(n, out='short') == True:
                ...
                j = 'stop'
            else:
                n = n + 1 
```

一旦`j`设置为`'stop'`，您将永远不会将其更改回来。一旦发生这种情况，内部`while`实际上变成了无操作，将外部`while`变成了无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:07:12.580

问题是您的 j 变量最终设置为“停止”，然后再也不会重新设置，所以`while j!='stop'`第一次唯一有效。

```
 # don't initialize j here
    while i <= N: #Stops, when we get N prime numbers - doesn't work!
        n = max(primes) + 1
        j = 1  #initialize it here
        while j != 'stop':
            if isPrimeNumber(n, out='short') == True:
                primes.append(n)
                i = i + 1
                j = 'stop' #Stops nested cycle, when reached 
                           #the first prime number
            else:
                n = n + 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T21:42:01.917

我只是想我会清理一下...

```
from math import ceil
def isprime (n,out="short"):
    answer = True
    for p in range(2,int(ceil(n ** 0.5)) + 1):
        if n % p == 0:
            answer = False
            if out == "verbose":
                print "Least Divisor: " + str(p)
            return False
    if answer:
        if out == "verbose":
            print "No Divisors (Except For 1 & " + str(n) + "!"
        return True
def primenumbers (start = 1,stop = 1000,numbers = False):
    N = stop
    if numbers:
        primes = [start]
        i = len(primes)
        j = 1
        while i <= N:
            n = max(primes) + 1
            j = true
            while j:
                if isPrimeNumber(n):
                    primes.append(n)
                    i = i + 1
                    j = false
                else:
                    n = n + 1
    else
        primes = []
        for i in range(start,N + 1):
            if isPrimeNumber(i):
                primes.append(i)
    return primes 
```

我确实稍微改变了实际程序。

# c# - 协方差胜过具体类型？

> ID：10462021
> 
> 赞同：4
> 
> 时间：2012-05-05T12:52:51.840
> 
> 标签：c#, inheritance, .net-4.0, covariance

老实说，我在这里问过（这个问题的一部分）[，](https://stackoverflow.com/questions/9335278/covariance-in-different-fw-causes-code-break) 但现在我有一个不同的相关问题。

```
public class Base
{
    public void Foo(IEnumerable<string> strings)  { }
}

public class Child : Base
{
    public void Foo(IEnumerable<object> objects) { }
}

List<string> lst = new List<string>();
lst.Add("aaa");
Child c = new Child();
c.Foo(lst); 
```

（n C# 3 它将调用：`Base.Foo` 在 C# 4 中它将调用`Child.Foo`：）

*我在FW4！， 让我们来谈谈它*

尊重协方差：当我写 `c.Foo(lst);`（ `lst`是`IEnumerable`字符串！） -

它看到**两个**签名！但仍然 - 它选择了`IEnumerable<object>`？？

协方差是否比具体类型本身更强？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T12:57:35.220

这不是因为协方差更强，而是因为 C# 首先选择了“更接近”的方法。因此，它查看`Child.Foo()`，确定它适用（由于协方差），甚至不查看`Base.Foo()`。

这里的假设是特定类型“知道”更多，因此应首先考虑其方法。

请参阅 C# 4 规范的第 7.6.5.1 节：

> 候选方法集减少为仅包含来自最派生类型的方法：对于集中的每个方法 CF，其中 C 是声明方法 F 的类型，从 C 的基类型中声明的所有方法都将从中删除集。

# jquery - Rails ajax 替换内容不起作用

> ID：10462025
> 
> 赞同：0
> 
> 时间：2012-05-05T12:53:31.607
> 
> 标签：jquery, ruby-on-rails, ajax

我有一个输入文本，它在 keyup 上发送 ajax 请求并给出替换内容的响应。我的表格是这样的；

```
 = form_for(:search, :url => "/users/search", :remote => true) do |f|
   = f.label :user, "Type to find users"
   = f.text_field :user 
```

UsersController 搜索操作根据 ajax 数据搜索用户并呈现 search.js.erb 模板。我的搜索操作如下所示；

```
 def search
    @users = User.search(params[:user])
    respond_to do |format|
      format.js{}
    end
  end 
```

现在，search.js.erb 模板很简单，如下所示；

```
$('.users_info').html(<%=j render @users %>); 
```

如果我查看萤火虫但不替换页面中的内容，则响应是正确的。如果我发出警报，它会提醒用户。为什么我无法替换页面中的现有内容。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:10:33.550

真的有必要使用js.erb吗？在您的情况下，您可能只是简单地

```
$('form').bind('ajax:success', function(e, data){
    $('.users_info').html(data);
}); 
```

如果您确实需要，请尝试：

```
$('.users_info').html('<%=j render 'search_user' %>'); 
```

# actionscript-3 - FlxControl.player1.setJumpButton 无法按预期工作

> ID：10462026
> 
> 赞同：0
> 
> 时间：2012-05-05T12:53:32.710
> 
> 标签：actionscript-3, flash, actionscript, flixel

我正在为我的新项目使用 Flixel Power Tools，具体来说我正在使用`FlxControl`.
我尝试使用 设置跳转按钮`FlxControl.player1.setJumpButton()`，但它不起作用。
我尝试像这样使用它：

```
player = new FlxSprite(FlxG.width/2 - 5);
            player.makeGraphic(10,12,0xffaa1111);
            add(player);
            if (FlxG.getPlugin(FlxControl) == null)
            {
                FlxG.addPlugin(new FlxControl);
            }

            FlxControl.create(player, FlxControlHandler.MOVEMENT_ACCELERATES, FlxControlHandler.STOPPING_DECELERATES, 1, true, false);

            FlxControl.player1.setCursorControl(false, false, true, true);

            FlxControl.player1.setJumpButton("SPACE", FlxControlHandler.KEYMODE_PRESSED, 200, FlxObject.FLOOR, 250, 200);

            FlxControl.player1.setBounds(16, 0, 288, 240);

            FlxControl.player1.setMovementSpeed(400, 0, 100, 200, 400, 0);

            FlxControl.player1.setGravity(0, 400); 
```

注意：箭头键（左和右）按预期工作。
编辑：
github.com 上的完整 PlayState.as 代码：[Github PlayState.as 代码](https://gist.github.com/2603378)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:30:51.437

问题出在你的`update()`功能上。您需要先`super.update()`致电`FlxG.collide()`：

```
override public function update():void
{
    super.update();
    FlxG.collide(player, level);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:41:02.160

您发布的代码看起来不错。我的猜测是问题出在您试图跳下的平台上。要确定，我必须查看您创建平台的代码。

您告诉 FlxControl 仅在触摸 FLOOR 类型的 FlxObject 时让玩家跳跃。玩家是否站在允许碰撞设置为 FLOOR 或 ANY 的对象上？

相关文档（见“表面”参数）：

```
 /**
     * Enable a jump button
     * 
     * @param   key             The key to use as the jump button (String from org.flixel.system.input.Keyboard, i.e. "SPACE", "CONTROL")
     * @param   keymode         The FlxControlHandler KEYMODE value (KEYMODE_PRESSED, KEYMODE_JUST_DOWN, KEYMODE_RELEASED)
     * @param   height          The height in pixels/sec that the Sprite will attempt to jump (gravity and acceleration can influence this actual height obtained)
     * @param   surface         A bitwise combination of all valid surfaces the Sprite can jump off (from FlxObject, such as FlxObject.FLOOR)
     * @param   repeatDelay     Time delay in ms between which the jumping can repeat (250 would be 4 times per second)
     * @param   jumpFromFall    A time in ms that allows the Sprite to still jump even if it's just fallen off a platform, if still within ths time limit
     * @param   callback        A user defined function to call when the Sprite jumps
     * @param   altKey          Specify an alternative jump key that works AS WELL AS the primary jump key (TODO)
     */
    public function setJumpButton(key:String, keymode:uint, height:int, surface:int, repeatDelay:uint = 250, jumpFromFall:int = 0, callback:Function = null, altKey:String = ""):void 
```

# c# - 我怎么能得到windows phone mango的IP地址？

> ID：10462030
> 
> 赞同：0
> 
> 时间：2012-05-05T12:53:50.113
> 
> 标签：c#, windows-phone-7.1

我发现 windows phone 7.1 在 2012.2.9 的更新中添加了一些 API，其中包括 NameResolutionResult 类。但是当我连接互联网时如何获取我的 windows phone 的 IP 呢？谢谢 :)

[http://msdn.microsoft.com/en-us/library/microsoft.phone.net.networkinformation.nameresolutionresult(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.net.networkinformation.nameresolutionresult(v=vs.92).aspx)

# couchdb - CouchDB - 在 CouchDB 中获取每 50 个文档

> ID：10462033
> 
> 赞同：2
> 
> 时间：2012-05-05T12:54:21.497
> 
> 标签：couchdb

由于某些原因，我需要在我的 couchdb 中获取每 50 个文档。

例如，我的数据库中有 500 个用户，我想获取第一个、第 51 个、第 101 个......第 451 个用户。

如何通过 map/reduce 函数得到这个结果？

（我知道我可以在 url 中设置“skip”参数来执行类似的行为，但我想通过 map/reduce 来实现）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T00:38:21.290

## 问题

要记住的关键是 CouchDB map/reduce 更像`CREATE INDEX...`，而不像`SELECT * FROM...`

Map/reduce 创建一个**静态**的行列表。行可以按您想要的任何顺序排列（按您发出的*键*排序），但一个文档不可能*更改*另一个文档的结果。

为了说明这一点，假设您有一个这样的行的假设视图。键是他们在列表中的“位置”，值是用户名

```
// View rows (conceptual diagram only)
// Key, Value
0     , "mark" // Suppose Alice was created first, 1 week ago
1     , "bob"  // and Bob was created 1 day ago
2     , "evan" // and Evan was created 1 hour ago... so this view is chronological
... // etc. 
```

现在您意识到 Bob 的文档有错误。他实际上在一年前签约，而不是一天前。你更新他的时间戳。视图现在应该如何？

```
// View rows (conceptual diagram only)
// Key, Value
0     , "bob"  // The corrected Bob document was created 1 **year** ago
1     , "mark" // ...and now Mark scoots down to the next position (!!!)
2     , "evan" // ...and Evan stayed the same
... // etc. 
```

问题来了：在 CouchDB 中，如果只更改 Bob 的文档，是*不可能影响 Mark 的行的。*这就是基本架构。上面的`(!!!)`标签表示不可能的功能。问题是我们最初的假设：我们可以有一个视图来指示行**相**对于彼此的**绝对位置。**（注意，relative 一词与*relative*具有相同的词根，如“*关系*数据库”）

 ****因此，通过减少荒谬，这种技术是不可能的。

## 解决方案

你可以用 map/reduce 做大部分你需要的事情。代替假设的*位置*作为键，使用*时间戳*作为键。

```
// View rows (conceptual diagram only)
// Key, Value
2011-05-06, "bob"  // Bob signed up one year ago
2012-05-05, "mark" // Mark signed up one day ago
2012-05-06, "evan" // Evan one hour ago
... // etc. 
```

当然，时间戳格式只是为了做一个清楚的例子。您可能应该使用 ISO 8601 格式（即您从`JSON.stringify(new Date)`JavaScript 中获得的格式）。

要获得最新的注册，请对视图进行*降序*查询；并且要仅获得一行，请使用该`limit`选项。

*   要获得最新的注册：`?descending=true&limit=1`
*   要获得第 50 个最新的：`?descending=true&limit=1&skip=50`
*   要获得第 100 个最新的：`?descending=true&limit=1&skip=100`****

# java - Android 上的 java.security 文件在哪里？

> ID：10462035
> 
> 赞同：0
> 
> 时间：2012-05-05T12:54:30.403
> 
> 标签：java, android, security, android-contentprovider

我正在使用 Android Commander 查看我的 Android 手机上的文件。此外，我想查看和更改可以静态注册安全提供程序的“java.security”文件。在 Linux PC 上，此文件位于 $JAVA_HOME/lib/security 目录中，但我在我的 Android 设备上找不到它。它在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:08:02.283

Mabe 还不可能 - 请参阅[http://code.google.com/p/android/issues/detail?id=21417](http://code.google.com/p/android/issues/detail?id=21417)

# c# - asp.net mvc 3 razor 和 reCaptcha 错误

> ID：10462038
> 
> 赞同：1
> 
> 时间：2012-05-05T12:54:45.263
> 
> 标签：c#, asp.net-mvc, razor, recaptcha

我想在我的 asp.net mvc 3 razor view engine c# 项目中使用 reCaptcha 控件

我找到了这个教程

[http://thenullreference.com/blog/robots-gotcha-down-get-recaptcha-in-asp-net-mvc/](http://thenullreference.com/blog/robots-gotcha-down-get-recaptcha-in-asp-net-mvc/)

我从那里复制了代码，但视觉工作室对此给出了错误`private IHttpForm httpForm;`

有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:59:49.937

这是我实施 Google reCaptcha 的演练。

它显示了将 reCaptcha 添加到您的站点所需的所有步骤。

[如何在 MVC3 应用程序中实现 Google reCaptcha？](https://stackoverflow.com/questions/9740402/how-to-implement-google-recaptcha-in-an-mvc3-application/9740583#9740583)

# iphone - 核心图 xAxis visibleRange start 不是 0 从开始处消失

> ID：10462039
> 
> 赞同：0
> 
> 时间：2012-05-05T12:54:46.847
> 
> 标签：iphone, core-plot

我正在使用以下内容，但想根据我的计算值启动我的 x 轴，但是当我添加 visibleRange plotRangeWithLocation:CPTDecimalFromFloat(21) 时，它会从头开始消失。请帮助我。

```
x.majorIntervalLength = CPTDecimalFromString([NSString stringWithFormat:@"%d",(interval)]);
x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");

x.minorTicksPerInterval = 2;

NSArray *exclusionRanges = [NSArray arrayWithObjects:
                            [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.01) length:CPTDecimalFromFloat(0.02)], 
                            [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.00) length:CPTDecimalFromFloat(0.02)],
                            [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.00) length:CPTDecimalFromFloat(0.02)],
                            nil];

x.titleLocation = CPTDecimalFromString(@"0.0");
x.labelExclusionRanges = exclusionRanges;
x.titleOffset = 10.0;

x.visibleRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0) length:CPTDecimalFromFloat(endPoint)]; 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:15:19.753

The `labelExclusionRanges` removes tick marks and axis labels in the given ranges. You're removing the tick at zero (0). You should just leave `labelExclusionRanges` at nil (its default value) if you don't need that feature.

# css - Chrome 不渲染@font-face ttf/woff 平滑

> ID：10462040
> 
> 赞同：6
> 
> 时间：2012-05-05T12:54:55.600
> 
> 标签：css, icons, font-face, smooth

我正在为我正在处理的项目使用 IconMoon @font-face 图标字体。

仅包含 .svg 和/或 .eot 字体或使用其他浏览器（例如 IE9）浏览时，该字体很好且流畅地呈现。但是当使用 Chrome 浏览网站时，包括 .ttf 和/或 .woff 格式，图标变得非常不稳定，而且根本没有抗锯齿。有没有办法告诉 Chrome 加载 .eot 或 .svg 而不是 .ttf 或 .woff？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T20:03:28.723

> 我发现这适用于该问题。我不认为字体平滑的解决方案实际上有效。
> 
> ```
> @font-face {
>    font-family: 'Montserrat';
>    font-style: normal;
>    font-weight: 400;
>    src: url('fonts/montserrat-regular-webfont.eot'); /* IE9 Compat Modes */
>    src: url('fonts/montserrat-regular-webfont.eot?iefix') format('eot'), 
>        url('fonts/montserrat-regular-webfont.ttf')  format('truetype'), 
>        url('fonts/montserrat-regular-webfont.svg#montserratregular') format('svg'),
>        url('fonts/montserrat-regular-webfont.woff') format('woff'); 
> } 
> ```
> 
> Firefox 将选择列表中的最后一个（woff），无论是否工作，IE 将使用 eot，Chrome 将选择第一个工作的（svg）。Woff 在 chrome 中也可以工作，但会导致字形混叠，因此将 svg 放在 woff 之前可以解决这个问题。*

此解决方案有效，但会在 Safari 中引起额外请求，您可以像原来一样将 svg 保留在 woff 以下并添加：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
  @font-face {
    font-family: 'OpenSansLightItalic';
    src: url('fonts/montserrat-regular-webfont.svg#montserratregular')  format('svg');
  }
} 
```

在这里阅读：http: [//hollisterdesign.wordpress.com/2014/04/29/note-to-self-always-use-this-fix/](http://hollisterdesign.wordpress.com/2014/04/29/note-to-self-always-use-this-fix/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:58:50.750

也许这个 css 属性可以解决你的问题：

```
yourSelector {
  font-smooth: always;
  -webkit-font-smoothing: antialiased;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T11:49:02.627

将 svg 字体的 url 放在所有其他字体之前，Chrome 将加载 SVG，您将获得漂亮的渲染效果，尤其是对于浅色字体。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-29T07:23:49.800

试试这个字体的小旋转，希望对你有帮助。

例子：

```
p{
  transform: rotate(-0.0000000001deg);
} 
```

# javascript - 正文溢出的JavaScript？

> ID：10462041
> 
> 赞同：2
> 
> 时间：2012-05-05T12:54:58.443
> 
> 标签：javascript, css, contextmenu, overflow

我在我的网站中创建了一个上下文菜单，它会在右键单击时显示。在那个上下文菜单中，我有一些子菜单将应用于菜单的正确位置。

现在的问题是，如果你调用页面右侧的上下文菜单，则没有足够的空间来显示子菜单，并且浏览器会添加一个水平滚动条。

如果浏览器中没有足够的空间，是否有任何 JavaScript 命令或者可以在 CSS 中更改子菜单的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:09:47.010

**[您可以在 JsBin 上](http://jsbin.com/ejiduy/2/edit)**找到您可以做什么的草稿

您可以轻松获得鼠标的位置并再次检查文档宽度。

为了简单起见，代码使用 jQuery。

```
$(document).mousemove(function(e){

  var CONTEXT_MENU_WIDTH = 200,
      pos = 'RIGHT';
  if( ($(document).width() - CONTEXT_MENU_WIDTH) < e.pageX )
    pos = 'LEFT';     

  $('#status').html(e.pageX +', '+ e.pageY);
  $('#position span').html(pos);

}); 
```

**已编辑**

只是添加了一条简单的垂直线来帮助定位。

`CONTEXT_MENU_WIDTH`变量应该是您希望上下文菜单更改位置的区域宽度。

# javascript - 如何向需要身份验证的 API 发出 Javascript JSON 请求

> ID：10462042
> 
> 赞同：1
> 
> 时间：2012-05-05T12:55:06.843
> 
> 标签：javascript, json, api, authentication

我目前正在构建一个使用来自基于 JSON 的 REST API 的数据的网站。我需要从特定的 URL 检索 JSON 文件，但我正在努力如何访问它，因为 API 需要用户名和密码。

我有一个 javascript 变量，其中包含我需要从中获取数据的 url，以及正确的用户名和密码。我只是不知道如何将它们放在一起提出请求。

-

或者，我设法找到了一个 php 类，该类非常容易并且简单地为我需要的所有数据返回 PHP 数组。我只需将我的用户名和密码附加到一个 php 文件中，剩下的就交给这个类了。这可能是访问 JSON 而不是使用 javascript 的更简单方法？但是我不知道如何将 javascript URL 变量传递给它。

非常感谢你的帮助。我希望我已经把我的问题说清楚了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:16:02.383

我假设 REST API 使用[基本访问身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)作为身份验证机制。您可以从文章中了解到，只需正确设置`Authorization`请求标头，这里有一个示例，说明如何在 JavaScript 中[使用 jQuery](http://dothow.blogspot.com/2009/05/http-basic-authentication-with-jquery.html)进行设置。

这是一个非常简单的身份验证方案，其中一个含义是您必须向用户的客户端提供可以轻松解码回纯文本的用户名和密码。考虑到大多数服务条款禁止您披露访问凭据，您可能希望在 PHP 中检索数据或在 PHP 中公开一个 REST 接口，将请求代理到实际 API，除非您使用的是 JS 客户端仅用于个人目的。

# mysql - 从 postgresql 转储文件填充 MySQL 数据库

> ID：10462044
> 
> 赞同：28
> 
> 时间：2012-05-05T12:55:27.470
> 
> 标签：mysql, database, postgresql, pg-dump

实际上，我需要从 postgresql 生成的 SQL 文件中填充 MySQL 数据库

```
pg_dump dbname > myfile.sql 
```

所以，如果我尝试这样做

```
mysql> source myfile.sql 
```

这显然是行不通的。虽然它确实填充了 70% 的表格，但我想知道有没有办法实现它？

从 postgresql 的源文件中，我可以获取并填充我的 MySql 数据库。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-05T13:06:26.930

如果要将数据和结构从 postgres 表迁移到 mysql 等价物，最简单的方法是使用数据库转换工具，例如：[ESF Data Migration Toolkit](http://www.easyfrom.net/)或开源对应的[openDBCopy](http://opendbcopy.sourceforge.net/)。

如果你不想或者你不能使用迁移工具，而你只需要迁移数据，另一种简单的方法是从 PostgreSQL 以 CSV 格式导出数据，然后将其导入 MySQL，这样你就可以用一些像这样的命令：

**在 Postgres（导出）上：**

```
COPY (SELECT query) TO '/path to csv file -*.csv'; 
```

**在 Mysql 上（导入）：**

```
load data infile 'path to csv file-*.csv' into table tablename fields terminated by ',' lines terminated by '\n' . 
```

如果您仍然想继续使用转储工具（pg_dump），您可以添加此选项以生成 MySQL 可以更好地理解的转储文件：

```
-d --data-only --no-owner --no-acl --attribute-inserts --disable-dollar-quoting --no-tablespaces 
```

请记住，根据源数据库的结构，您可能必须操作转储文件以允许 MySQL 理解生成的转储文件......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-02T10:58:33.403

在不丢失数据的情况下进行迁移的最佳方法是使用 Mysql Workbench 迁移。本[教程](http://mysqlworkbench.org/2012/11/how-to-migrate-postgresql-databases-to-mysql-using-the-mysql-workbench-migration-wizard/)解释了如何进行迁移。我发现教程中没有提到的一些重要的事情如下：

*   安装最新的 postgres 驱动来连接源 postgres 数据库，如何安装这个驱动可以在这个[教程](http://mysqlworkbench.org/2012/11/set-up-and-configure-postgresql-odbc-drivers-for-the-mysql-workbench-migration-wizard/)中找到：
*   [从这里](https://www.postgresql.org/ftp/odbc/versions/msi/)下载并安装 postgres odbc 驱动程序
*   安装后，您将在“打开 ODBC 管理器”中看到驱动程序 1\. [![在此处输入图像描述](../Images/5c426fdbbeea03fe7c451717c9e0d79d.png)](https://i.stack.imgur.com/3MmIG.png) 2.
*   在设置源 postgres 数据库时使用“PostgreSQL Unicode(x64)”作为驱动程序 [![在此处输入图像描述](../Images/70aa9016710b61e425790d2778877de7.png)](https://i.stack.imgur.com/z4yvL.png)

**注意：使用“PostgreSQL ANSI(x64)”作为驱动程序在迁移时会出错。可能是因为我的数据包含 unicode 字符。**

# android - 跨平台移动聊天

> ID：10462046
> 
> 赞同：4
> 
> 时间：2012-05-05T12:55:39.080
> 
> 标签：android, ios, mobile, cross-platform, chat

我想在 android 和 IOS 上开发简单的聊天应用程序，我正在使用本地语言来开发应用程序。

相同的应用程序将在两个平台上启动，我想确保 android 家伙可以与 ios 聊天，反之亦然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T13:11:41.490

它被称为**统一通信即服务**。有许多云提供商提供 API、SDK 和文档进行集成。

通常它是一个单一的后端平台，具有适用于各种平台的现成 API 和 SDK，通常适用于 iOS、Android 和 Web。但也可以支持其他平台。

我在许多应用程序中都使用[了 ConnectyCube 。](https://connectycube.com/)它们支持 iOS、Android 和 Web 的消息、视频通话和推送通知功能。

*   iOS 消息（聊天）指南[https://developers.connectycube.com/ios/messaging](https://developers.connectycube.com/ios/messaging)
*   Android 消息（聊天）指南[https://developers.connectycube.com/android/messaging](https://developers.connectycube.com/android/messaging)
*   Javascript 消息（聊天）指南[https://developers.connectycube.com/js/messaging](https://developers.connectycube.com/js/messaging)

支持聊天和消息功能：

*   1-1 消息传递
*   群发消息
*   跨平台
*   已发送/已交付/读取状态
*   “正在输入”状态
*   文件附件
*   自动向离线用户推送通知
*   联系人列表
*   黑名单

[支持的功能](https://connectycube.com/features/)的完整列表

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-10T07:18:15.033

对于 iOS 和 android 之间的兼容性，请记住以下几点：

设置相同的应用程序（服务器端，顶级层次结构）使用的密钥应该是通用的！

iOS 的 APN 和 Android 的 GCM 应该适用于从首次注册的设备生成的应用程序令牌，并以相同的应用程序密钥发送到服务器应用程序，这允许两者保持相同的平台和通信。

所有的游戏都是服务器端的实现，处理并以适当的格式恢复到 iOS 和 Android。

有关概念的更多示例，您可以查看此 applozic.com 及其 android 和 iOS GitHub 存储库以获取更多详细信息。
[https://github.com/AppLozic](https://github.com/AppLozic)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T08:37:48.323

另请查看[apiomat.com](http://www.apiomat.com)。他们提供“推送模块”和“聊天模块”。如果将两者结合起来，您就有了一个很好的聊天客户端。有适用于 iOS、Java 和 Android 的 SDK。

# python - 返回 PIL 格式图像的简单绘图库？

> ID：10462047
> 
> 赞同：2
> 
> 时间：2012-05-05T12:55:47.657
> 
> 标签：python, wxpython

我想绘制 xy 图，我想在图上注释某些点。

我在 UI 面板中显示它，所以输出必须是 PIL 格式的图像。

什么是返回 PIL 格式图像的 Python 轻量级绘图库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T13:04:00.490

[matplotlib](http://matplotlib.sourceforge.net/index.html)功能强大，可以保存`.png`'s，但需要 numpy.

# php - PHP 编程的最佳 Linux 发行版是什么？

> ID：10462048
> 
> 赞同：-1
> 
> 时间：2012-05-05T12:55:48.863
> 
> 标签：php, linux

什么是 PHP 编程的最佳 Linux 发行版？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T12:59:01.357

没有最好的。无论哪种分布最适合您并保持舒适，都是最好的。你可以试试流行的：

1.  [Ubuntu](http://ubuntu.com)
2.  [软呢帽](http://fedoraproject.org)
3.  OpenSuse

我个人使用，**[薄荷 12](http://linuxmint.com)**

# sql-server-2008-r2 - 无法访问 sql server 配置管理器

> ID：10462050
> 
> 赞同：15
> 
> 时间：2012-05-05T12:55:55.597
> 
> 标签：sql-server-2008-r2

在删除 SQL Server 2008 R2 Express 后，我安装了 SQL Server 2008 R2 的评估版。卸载后仍然可以访问 SQL Server 配置管理器，但现在无法再访问它并出现以下错误：

> 无法连接到 WMI 提供程序。您没有权限或服务器无法访问。请注意，您只能使用 SQL Server 配置管理器管理 SQL Server 2005 服务器。无效的类 [0x80041010]

该文件位于我电脑上`sqlmgmproviderxpsp2up.mof`的文件夹中。`C:\Program Files (x86)\Microsoft SQL Server\100\Shared`我尝试在命令提示符下输入：

```
C:\Program Files (x86)\Microsoft SQL Server\100\Shared>mofcomp "C:\Program Files (x86)\Microsoft SQL Server\100\Shared\sqlmgmproviderxpsp2up.mof" 
```

但仍然收到拒绝访问错误。我无法找到这个问题的答案，有没有人有任何想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-27T10:33:03.303

我也有`access denied error`。我的解决方案：

1.  右键单击`cmd`
2.  选择以管理员身份运行
3.  然后输入`command`提示：

    C:\Program Files (x86)> Microsoft SQL Server\100\Shared>mofcomp "C:\Program Files (x86)\Microsoft SQL Server\100\Shared\sqlmgmproviderxpsp2up.mof"

它对我有用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-08-31T03:55:22.950

我在win 7 32位上运行。

*   打开 CMD 并运行：

    ```
    cd "C:\Program Files\Microsoft SQL Server\110\Shared" 
    ```

*   然后运行：

    ```
    mofcomp sqlmgmproviderxpsp2up.mof 
    ```

[![命令命令](../Images/9a105f4689a524ac5db410a5e89b6556.png)](https://i.stack.imgur.com/AsUH7.jpg)

**如果你在win 64下运行，目录不同**

可能的 SQL 版本的共享目录：

```
SQL 2008:  C:\Program Files (x86)\Microsoft SQL Server\90\Shared\
SQL 2008 R2:  C:\Program Files (x86)\Microsoft SQL Server\100\Shared\
SQL 2012:  C:\Program Files (x86)\Microsoft SQL Server\110\Shared\
SQL 2014:  C:\Program Files (x86)\Microsoft SQL Server\120\Shared\
SQL 2017:  C:\Program Files (x86)\Microsoft SQL Server\140\Shared\ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-10T06:50:48.967

这就是端口如何描述您的 Sql 版本：-

```
 -80 = SQL Server 2000    
 -90 = SQL Server 2005   
 -100 = SQL Server 2008    
 -105 = SQL Server 2008 R2 
 -110 = SQL Server 2012    
 -120 = SQL Server 2014    
 -130 = SQL Server 2016 
```

1.  以管理员权限打开命令提示符。
2.  所有版本的通用命令：

* * *

```
mofcomp "%programfiles(x86)%\Microsoft SQL Server\[Number]\Shared\sqlmgmproviderxpsp2up.mof" 
```

如果您有 SQL Server 2008 R2，请提供 105 而不是 [Number]。

希望它会有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-11T09:47:06.250

![错误图像无法连接到 WMI 提供程序](../Images/131e6973562881f9571140a8f2fd7730.png)

这些是由 Windows 10 中的“步骤记录器”记录的步骤 这些可能也适用于 Windows 8

第1步：用户右键单击“开始（列表）”

第 2 步：用户左键单击“命令提示符（管理员）（菜单项）”

第三步：用户左键点击“管理员：命令提示符”中的“管理员：命令提示符（窗口）”

第 4 步：在“管理员：命令提示符”中的“管理员：命令提示符（窗口）”上的用户键盘输入 [...]

第 5 步：输入“mofcomp”

第6步：用户右键单击“开始（列表）”

第 7 步：用户左键单击“运行（菜单项）”

第8步：用户左键单击“运行”中的“打开（按钮）”

第 9 步：用户左键单击“C:\Program Files (x86)\Microsoft SQL Server (list item)”

第 10 步：用户左键单击“运行”中的“确定（按钮）”

第 11 步：用户左键单击“Microsoft SQL Server”中的“搜索框（编辑）”

第 12 步：用户左键单击“Sqlmgmproviderxpsp2up.mof（文本）”

第 13 步：用户左键单击“Sqlmgmproviderxpsp2up.mof - Microsoft SQL Server 中的搜索结果”中的“名称（编辑）”

第 14 步：用户左键单击“Sqlmgmproviderxpsp2up.mof - Microsoft SQL Server 中的搜索结果”中的“主页（选项卡项）”

第 15 步：用户左键单击“Sqlmgmproviderxpsp2up.mof - Microsoft SQL Server 中的搜索结果”中的“复制路径（按钮）”

第 16 步：用户左键单击“管理员：命令提示符（列表项）”

步骤 17：用户在“管理员：命令提示符”中右键单击“管理员：命令提示符（窗口）”

第 18 步：用户左键单击“粘贴（菜单项）”

步骤 19：在“管理员：命令提示符”中的“管理员：命令提示符（窗口）”上的用户键盘输入 [Enter]

第 20 步：用户左键单击“管理员：命令提示符”中的“关闭（按钮）”

![工作映像 SQL Server 配置管理器](../Images/be0d2f28a81477c08d995b5aaf1fa159.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-14T10:09:15.513

伙计们，我建议您转到“C:\Program Files (x86)”中的“Microsoft SQL Server”文件夹，然后转到“Microsoft SQL Server” [Microsoft SQL Server的所有文件夹](https://i.stack.imgur.com/FQb27.png)

并检查“共享”文件夹，如果您在“共享”文件夹中找到“sqlmgmproviderxpsp2up.mof”这个文件，那么您必须复制文件夹目录 URL 并打开 cmd（以管理员身份）并写入“cd（空格）”并粘贴您的目录 URL 并在只写“mofcomp sqlmgmproviderxpsp2up.mof”后按回车希望这能奏效，对英语不好感到抱歉。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-13T13:46:06.730

I got this error too and just for a laugh I decided to run my command line window in administrator mode.

Funnily enough, it worked! Not knowing what your user privilege setup looks like I can't really say that this is a definitive fix for it though

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-05T13:09:21.083

可能最简单的方法是完全删除 SQL Server 的所有痕迹并重新开始。这样做可以节省一些时间：

[https://sqlblog.org/2010/10/25/fun-with-software-uninstalling-sql-server-2008-r2-evaluation-edition](https://sqlblog.org/2010/10/25/fun-with-software-uninstalling-sql-server-2008-r2-evaluation-edition)

超级用户上的这个线程可能有助于解决 WMI 问题（尽管这可能只是权限问题或者您已经停止了 wmi 服务）：

[https://superuser.com/questions/190960/repair-wmi-on-windows-7](https://superuser.com/questions/190960/repair-wmi-on-windows-7)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-02T14:54:52.320

*   以管理员身份打开 CMD.exe
*   输入此代码`mofcomp "%programfiles(x86)%\Microsoft SQL Server\140\Shared\sqlmgmproviderxpsp2up.mof"` 并按 Enter
*   启动 SQL 服务器配置管理器

140 是我的 SQL Server 2017 文件夹之一的名称。在使用此代码之前替换它

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-07T07:20:34.693

如果您看到此错误

> 找不到文件“sqlmgmproviderxpsp2up.mof”！

然后去

> C:\Program 文件 (x86)\Microsoft SQL Server

并检查哪个文件夹有**“sqlmgmproviderxpsp2up.mof”**文件

就我而言，我已经安装了 sql server 2017，所以该文件位于 **“sqlmgmproviderxpsp2up.mof”**这个文件夹中

> C:\Program Files (x86)\Microsoft SQL Server\140\Shared

最后

> C:\Program Files (x86)\Microsoft SQL Server\140\Shared

然后

> mofcomp sqlmgmproviderxpsp2up.mof

[![在此处输入图像描述](../Images/2f4ed2bf126ee054ea104ddbcc8d099d.png)](https://i.stack.imgur.com/NSM2P.png)

**或者**

转到运行命令类型**services.msc**找到服务代理右键单击并开始

[![在此处输入图像描述](../Images/b9c1bbe266483a65124137a45af4afec.png)](https://i.stack.imgur.com/8d5MS.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-31T17:23:11.280

我在上一个版本 17 上找不到 Shared 文件夹，我进入 140 但没有 Shared。

所以我在磁盘 C 上进行了搜索：ant 它变成了 Program Files (x86)

因此，请注意您选择运行它的安装路径。

运行命令后，这将是您将看到的窗口：

[![命令响应](../Images/a8abc44bf05ad682a83618d569c0164d.png)](https://i.stack.imgur.com/ozQ7G.png) [![在此处输入图像描述](../Images/df9b124eea5dc30005e8c91d138178eb.png)](https://i.stack.imgur.com/h3Avf.png)

[![在此处输入图像描述](../Images/a16cf5ee46c01fb65486f8dda24b1b38.png)](https://i.stack.imgur.com/QXv6L.png)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-09-20T16:12:13.737

我安装了 MS SQL Server Management Studio 2014 并收到上述错误。以下是我为我解决问题的步骤

1) 以管理员身份运行 CMD

2) cd C:\Windows\SysWOW64\wbem

3) mofcomp "%programfiles(x86)%\Microsoft SQL Server\120\Shared\sqlmgmproviderxpsp2up.mof"

4）上面的命令执行成功如下

Microsoft (R) MOF 编译器版本 6.3.9600.16406 版权所有 (c) Microsoft Corp. 1997-2006。版权所有。解析 MOF 文件：C:\Program Files (x86)\Microsoft SQL Server\120\Shared\sqlmgmp roviderxpsp2up.mof MOF 文件已成功解析正在存储库中存储数据...完成！

笔记：

number 的值取决于 SQL Server 的版本：nnn

SQL 2008：C:\Program Files (x86)\Microsoft SQL Server\90\Shared\

SQL 2008 R2：C:\Program Files (x86)\Microsoft SQL Server\100\Shared\

SQL 2012：C:\Program Files (x86)\Microsoft SQL Server\110\Shared\

SQL 2014：C:\Program Files (x86)\Microsoft SQL Server\120\Shared\

# sql - SQL Server 2008 Express 版本中的数据库级加密

> ID：10462052
> 
> 赞同：-2
> 
> 时间：2012-05-05T12:56:16.367
> 
> 标签：sql, sql-server-2008-express

SQL Server 2008 Express 中的数据库级加密 - 可能吗？如果有可能 - 那么如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:43:37.797

快速的 Google 搜索将很容易发现[SQL Server 2008](http://msdn.microsoft.com/en-us/library/cc645993%28SQL.100%29.aspx)网页版本支持的功能。

这列出了所有功能以及哪些版本支持它们。在**安全**部分，您​​将看到所有 Express 版本都不支持任何数据库加密。

所以不 - Express 版本**无法进行数据库加密。**

# django - 迁移日期时间 w。将 PostgreSQL 中的时区转换为 UTC 时区以使用 Django 1.4

> ID：10462059
> 
> 赞同：16
> 
> 时间：2012-05-05T12:56:42.380
> 
> 标签：django, postgresql, datetime, migration, timezone

我是否需要将 Postgres 中的所有现有日期时间从其当前时区转换为 UTC，或者 Django 1.4 时区在读取非 UTC（但随后保存为 UTC）时是否会理解。

我有一个非常好的和工作的 Django 1.3/Postgres 网站，我可以在其中处理多个时区。我正在存储所有日期时间 w。时区信息，但这恰好在 Postgres 中设置为美国/东部时区（是的，我知道应该是 UTC）。

现在，我计划升级到 Django 1.4 并计划在那里使用 Django 时区支持。据我了解，它将UTC中的所有日期时间保存到数据库中，这很好，但是我所有现有的时区设置但不设置为UTC的信息呢？

有没有人根据这个迁移过，它是如何工作的，感觉要么我完全没有问题，要么我需要迁移大量的日期时间数据。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-05T13:42:08.977

> 我正在存储所有日期时间 w。时区信息，但这恰好在 Postgres 中设置为美国/东部时区（是的，我知道应该是 UTC）。

这里有几个误解。

数据类型`timestamp`在 PostgreSQL 中被调用。没有称为“日期时间”的类型。
`timestamp`是 的缩写[`timestamp without time zone`](https://www.postgresql.org/docs/current/datatype-datetime.html)。
`timestamptz`是 的缩写[`timestamp with time zone`](https://www.postgresql.org/docs/current/datatype-datetime.html)。

如手册所述：

> `timestamp`值存储为 2000 年 1 月 1 日午夜之前或之后的秒数。

类似于 Posix 时间，它从 30 年前的[Unix 纪元](https://en.wikipedia.org/wiki/Unix_epoch)1970-01-01 00:00 UTC 开始。对于`timestamp`，假设是*局部的。* `2000-01-01 00:00`作为`timestamptz`参考`2000-01-01 00:00 UTC`，显示会针对当前会话在输入和输出上的时区偏移进行调整。

`timestamp with time zone`存储一个唯一的时间点。您不能在内部将时间戳（带或不带时区）“设置”为 UTC 以外的任何其他时区。时区偏移本身根本**不**保存。它仅用于将输入/输出调整为 UTC。

时间戳值的*表示*考虑了当前会话的时区设置。

*   相应地显示值（输出）。
*   正确解释`timestamp without time zone`（输入）。

**好消息**：您的迁移应该开箱即用 - 只要您不主动搞砸。

Postgres时间戳如何用示例和链接详细解释：

*   [在 Rails 和 PostgreSQL 中完全忽略时区](https://stackoverflow.com/questions/9571392/ignoring-time-zones-altogether-in-rails-and-postgresql/9576170#9576170)

### 示例查询

尝试以下语句（一次一个块）。也可以在您的专栏中尝试一下：

```
SHOW timezone;

SELECT '2011-05-24 11:17:11.533479-05'::timestamptz(0);
SELECT '2011-05-24 11:17:11-05'::timestamptz;

SET timezone='UTC';
SELECT '2011-05-24 11:17-05'::timestamptz;

SELECT '2011-05-24 11:17-05'::timestamptz AT TIME ZONE 'UTC';

SELECT '2011-05-24 11:17-05'::timestamptz AT TIME ZONE 'UTC' AT TIME ZONE 'UTC';

RESET timezone; 
```

# c# - CheckForIllegalCrossThreads、线程和委托 - Window Mobile

> ID：10462061
> 
> 赞同：0
> 
> 时间：2012-05-05T12:56:58.500
> 
> 标签：c#, multithreading, windows-phone

我目前遇到了让我的 Windows Phone 应用程序执行跨线程操作的问题。
在默认的 C# [Windows 窗体应用程序] 中，有一个名为“CheckForIllegalCrossThreads”的选项/变量 - 如果将此变量属性设置为“False”，则应用程序在运行时操作期间不再检查非法跨线程。

**实际问题：**此变量是否以另一个名称存在于 silverlight windows phone 应用程序项目中？

# ****更新：[问题已解决，感谢 Jon Skeet]****

**对于正在寻找解决此问题或类似问题的方法的其他人：我使用[如上所述]“Dispatcher.BeginInvoke”解决了这个问题

```
Thread myThread;
public MainPage()
    {

        InitializeComponent();

        myThread = new Thread(ThreadPromt);
        myThread.Start();
    }

Private void ThreadPromt()
{
Dispatcher.BeginInvoke(deleage(
     MessageBox.Show(string.Format("Accessed from another thread: {0}", SampleLabel.Text);
     ButtonSample.Text = "Accessed from another thread...";
);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:00:14.010

> 实际问题：此变量是否以另一个名称存在于 silverlight windows phone 应用程序项目中？

即使有，你也不应该使用它。在 Windows 窗体下将该值设置为 false 也不正确。

如果你车里的“低油耗”灯亮了，你是断开它，还是给你的车加油？这同样适用于：解决问题，而不是警告。除了从 UI 线程之外，不要直接访问 UI 元素。在 Windows 窗体中使用`Control.Invoke`/或在 WPF / Silverlight 中使用 / 将执行编组到 UI 线程。`BeginInvoke``Dispatcher.Invoke``BeginInvoke`**

# objective-c - 从 NSTableView 中删除列及其标题

> ID：10462063
> 
> 赞同：0
> 
> 时间：2012-05-05T12:57:03.317
> 
> 标签：objective-c, cocoa, header, nstableview, nstablecolumn

> 注意：安德鲁的回答让我又看了看。此功能深埋在具有内部计时器的大型应用程序中。如果该计时器*关闭，*我会得到此处描述的错误行为。如果计时器*开启，*事情会按预期工作。我不知道为什么那个计时器会与这个表格视图交互，但是，正如我所说，它是一个庞大而复杂的应用程序。

我希望用户能够选择要显示的列。他将看到一组单选按钮或复选框，显示对象中的每个键对应一个。他可以选中或取消选中一个框，NSTableView 将为该键添加或删除一列。

显示的对象是一个 NSDictionary。字典的键直到运行时才知道，所以我必须在运行时创建带有标识符的列......它们在编译时是未知的。

实现添加功能很顺利。我创建了一个列和一个标题单元格，将标题单元格的文本设置为某个值。但删除并不是那么容易。 `[myTableView removeTableColumn:col]`删除列，但不能很好地处理标题。有时不会删除标题文本。有时会删除两列中的标题文本。有时我最终会得到两个相互叠加的标题文本字符串。

显然我错过了一些东西。如何以编程方式删除列及其标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T15:47:52.650

我对这个线程有点晚了，但我最近遇到了一个非常相似的情况。

事实证明，在我修改主线程中的 NSTable 结构的情况下，一切正常。有时虽然修改发生在另一个线程上，这导致了上述问题。

像往常一样，所有修改 UI 的代码都应该在主线程上，因此修复相对简单：让所有代码在主线程上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:20:57.550

从复选框选择器中调用这两种方法很容易实现。

要动态添加列，您应该调用它：

```
- (void)addColumnWithCheckboxToTable:(NSTableView *)table :(NSString *)header
{
    NSTableColumn *column = [[NSTableColumn alloc] initWithIdentifier:header];
    [[column headerCell] setStringValue:header];

    // Add column to table
    [table addTableColumn:column];
} 
```

并删除列调用这个：

```
- (void)removeColumnWithCheckboxFromTable:(NSTableView *)table :(NSString *)header
{
    NSTableColumn *column = [table.tableColumns objectAtIndex:[table columnWithIdentifier:header]];
    [table removeTableColumn: column];
} 
```

# c++ - 错误 C2143：语法错误：缺少“；” 声明指针时在 '*' 之前

> ID：10462065
> 
> 赞同：1
> 
> 时间：2012-05-05T12:57:50.167
> 
> 标签：c++, pointers, binary-tree

这是我的二叉树的头文件。我有一个名为 TreeNode 的类，当然 BinaryTree 类有一个指向其根的指针。

我得到以下三个错误

```
error C2143: syntax error : missing ';' before '*'
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

和 BinaryTree 头文件的代码

```
#pragma once

#include <fstream>
#include <iostream>
#include "Node.h"
using namespace std;

class BinaryTreeStorage
{
private:
    TreeNode* root;

public:
    //Constructor
    BinaryTreeStorage(void);

    //Gang Of Three
    ~BinaryTreeStorage(void);
    BinaryTreeStorage(const BinaryTreeStorage & newBinaryTreeStorage);
    BinaryTreeStorage& operator=(const BinaryTreeStorage & rhs);

    //Reading and writing
    ofstream& write(ofstream& fout);
    ifstream& read(ifstream& fin);

};

//Streaming
ofstream& operator<<(ofstream& fout, const BinaryTreeStorage& rhs);
ifstream& operator>>(ifstream& fin, const BinaryTreeStorage& rhs); 
```

错误似乎在第 11 行

```
 TreeNode* root; 
```

我花了几天时间试图摆脱这个错误并且完全被摧毁。

这是关于错误命名空间的错误吗？或者也许 TreeNode 类没有声明正确？

并以防万一 TreeNode 头文件的代码

```
#pragma once
#include <string>
#include "BinaryTreeStorage.h"

using namespace std;

class TreeNode
{
private:
    string name;
    TreeNode* left;
    TreeNode* right;

public:
    //Constructor
    TreeNode(void);
    TreeNode(string data);

    //Gang of Three
    ~TreeNode(void);
    TreeNode(const TreeNode* copyTreeNode);

    //Reading and writing
    ofstream& write(ofstream& fout);

    //Add TreeNode
    void addTreeNode(string data);

    //Copy tree
    void copy(TreeNode* root);
}; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T13:01:14.017

代替

```
#include "Node.h" 
```

只需转发声明类：

```
class TreeNode; 
```

另外，你为什么要`BinaryTreeStorage.h`加入`Node.h`？不需要它，所以删除它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T13:03:26.957

看起来 Node.h 包含 BinaryTreeStorage.h，因此当您尝试编译 Node.h（TreeNode 类）时，它首先编译 BinaryTreeStorage，但这需要知道尚未编译的 TreeNode 是什么。

解决这个问题的方法是转发声明类：

```
 class TreeNode; 
```

它告诉编译器期望稍后定义一个 TreeNode 类型的类，但您可以同时声明该类型的指针和引用。最后要做的就是删除`#include "Node.h"`. 这会破坏您的循环引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:01:36.573

你在类`ofstream`的定义中使用`TreeNode`，但你没有包括这个：

```
#include <fstream> //include this in Node.h 
```

请这样做。

此外，不需要包含`BinaryTreeStorage.h`in `Node.h`。它使事情变得循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T13:02:13.213

前向声明 TreeNode 即添加`class TreeNode;`之前`class BinaryTreeStorage{};`

# overflow - 全宽页面中的窗口溢出

> ID：10462067
> 
> 赞同：0
> 
> 时间：2012-05-05T12:57:57.533
> 
> 标签：overflow, css

我正在开发一个网站（投资组合重新设计），并且我正在全幅工作。但是我一直遇到同样的问题，但是我正在尝试解决它，但它不起作用。

如果有人可以帮助我，我将不胜感激，我将仅在此处粘贴链接，因为要粘贴的 CSS 和 HTML 标记太多，但我认为通过查看控制台，您可以看到那里发生了什么。

链接：[网站](http://rolandgroza.com/projects/roland/)

问题很明显，你会看到一个水平滚动出现，如果你滚动内容，它什么都没有溢出，只是空的空间，我想大概是 60px 宽。我尝试添加`padding: 0;`，`margin: 0;`或任何我能想到的，但没有成功。

我知道添加`overflow: hidden;`会解决它，但我需要那里的溢出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:23:19.983

试试这个，它应该可以工作..用萤火虫测试过..希望它的跨浏览器

```
html {
color: #222222;
font-family: sans-serif;
overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:53:14.723

这可能是几件事。

因为你要全宽，所以一切都设置为 100%，对吧？但在底部你有六个元素。100/6 = 16.6666666666667 等等。它不能很好地划分。我看到你四舍五入到 16.5，但这只会产生 99%。我从来没有在百分比派系中获得好运气。您能否将您的底部导航减少到 5 个元素，甚至减少 20%？

您也可以尝试使用粘性页脚和相对定位，就像我在**[这里](http://jsfiddle.net/pYp9e/)**所做的那样。

HTML：

```
<html>
<body>

<div id="wrapper">    
<nav>
  <ul>
    <li><a href="#">Testing</a></li>
    <li><a href="#">Testing</a></li>
    <li><a href="#">Testing</a></li>
    <li><a href="#">Testing</a></li>
  </ul>
</nav>

<footer>
  <ul>
    <li><a href="#">Testing</a></li>
    <li><a href="#">Testing</a></li>
    <li><a href="#">Testing</a></li>
    <li><a href="#">Testing</a></li>
    <li><a href="#">Testing</a></li>
  </ul>
</footer>

</div>
</body>
</html> 
```

CSS：

```
html, body {
  width: 100%;
  height: 100%;
  background-color: #333333;
  position: relative;
}

#wrapper {
  min-height: 100%
  position: relative;
}

nav {
  width: 100%    
}

nav li {
  display: block;
  background-color: #222222;
  width: 25%;
  float: left;
}

footer {
  position: absolute;
  bottom: 0;
  width: 100%;  
}

footer li {
  display: block;
  float: left;
  width: 20%;
  background-color: #cccccc;
 } 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:22:30.833

在我的浏览器中，我看不到任何水平或垂直滚动​​条。但是，您可以尝试使用以下标准`DOCTYPE`：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml-transitional.dtd"> 
```

并在您的 CSS 开头添加以下内容：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
    background: transparent;
    border: 0;
    margin: 0;
    padding: 0;
    vertical-align: baseline;
} 
```

# iphone - 转换为 ARC 时，我们将 -dealloc 中的代码放在哪里？

> ID：10462073
> 
> 赞同：11
> 
> 时间：2012-05-05T12:58:47.057
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting

我在 dealloc 中有一个带有此方法调用的类：

```
- (void)dealloc {

    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
} 
```

将课程转换为 ARC 后，我会在哪里将自己从通知中心删除？它应该在 viewDidUnload 中吗？该通知用于侦听来自模式视图控制器的事件，因此我无法将此代码放入 viewWillDisappear。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-05T13:02:37.620

留在 ARC 中，`dealloc`只是您不应该再调用`[super dealloc]`：编译器会为您插入代码。当然，所有的电话`release`都不能在`dealloc`（或其他任何地方）进行。

```
- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    // [super dealloc]; <<== Compiler inserts this for you
} 
```

# java - 更改 Wicket 反馈消息中使用的表单组件 ID

> ID：10462074
> 
> 赞同：2
> 
> 时间：2012-05-05T12:58:57.963
> 
> 标签：java, validation, wicket

我的页面上有一些带有反馈面板的表格。表单组件有不同的验证器。我想保留 Wicket 附带的验证器的反馈消息，这样我就不必为我可能使用的每个表单组件和验证器编写自己的属性。

我的问题是这些消息通过其内部组件 ID 命名了引发错误的字段，这是非常不切实际的：/

就像我说的，我想为大多数验证器保留原始的本地化错误消息，但实现自己命名的本地化组件。我尝试为输入标签设置一些属性，希望 wicket 会寻找其中的一些，并尝试设置 markupId，但这也不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T18:09:50.097

您可以为每个 FormComponent 为其消息指定一个标签，请参阅 FormComponent#setLabel(IModel)。

# java - netty-如何将消息和数据一起传输？

> ID：10462079
> 
> 赞同：0
> 
> 时间：2012-05-05T12:59:33.173
> 
> 标签：java, networking, netty

我的意思是这样的：

在客户端，用户输入文件名，客户端向服务器发送请求文件的消息，服务器搜索文件，如果找到文件，先发送消息给客户端通知，然后发送文件的数据到客户端，如果文件在服务器中不存在，只需发回通知消息。

由于传输中有消息和数据，我该如何解码它们？任何人都可以帮助我，如果有一些示例代码会很有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:03:35.013

你在使用 HTTP 吗？您可以将 HTTP 状态代码用于通知，并将响应内容用于数据。

有很多 Netty [HTTP 示例应用程序](https://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/http)。

使用 HTTP 可以使您不必发明自己的协议。

# objective-c - 在主线程上执行具有多个参数的方法的最简单方法是什么？

> ID：10462081
> 
> 赞同：2
> 
> 时间：2012-05-05T12:59:36.200
> 
> 标签：objective-c, ios, multithreading, cocoa-touch

这个方法真的很酷：

`- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(id)arg waitUntilDone:(BOOL)wait;`

但是我需要像它这样简单的东西来在主线程中执行具有多个参数的方法，例如：

`- (void)methodWithFirstObject: secondObject:`

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:36:01.803

使用[NSDictionary](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)对象作为参数。

```
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
    @"value1", @"arg1", @"value2", @"arg2", nil]; 
```

在 arg 中传递 dict。

```
- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(id)arg waitUntilDone:(BOOL)wait; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T13:55:53.670

`performSelectorOnMainThread`只是一种方便的玩游戏的方式，`NSOperation`这是玩 GDC 的一种方便的方式。如果您需要更多功能，只需下拉到下一个级别。您将不得不管理更多的复杂性，但将具有更大的灵活性。很多可可都是这样设计的。

你会想继续[阅读`NSOperation`](https://developer.apple.com/cocoa/managingconcurrency.html)，但我认为这会做你想做的[*在我的手机上打字，还没有编译*]

```
NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^{
  [self myMethod:foo thatRequiresMultiple:bar andAlso:baz];
}];

[[NSOperationQueue mainQueue] addOperation:operation]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T19:02:24.430

`dispatch_async()`如果您想`waitUntilDone`成为`NO`，请致电`dispatch_sync()`给`YES`：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [reciever methodWithFirstObject:obj1 secondObject:obj2];
}); 
```

`dispatch_sync()`如果您已经在主线程上，请确保不要使用；`dispatch_get_current_queue()`如有必要，您可以测试结果。

# .net - 如何组织 .NET 在线 MMORPG 服务器和客户端之间的交互

> ID：10462087
> 
> 赞同：1
> 
> 时间：2012-05-05T13:00:37.657
> 
> 标签：.net, client-server, mmo

我目前正在考虑构建一个简单的 MMORPG。

这个想法是拥有一个 .NET 服务器和可下载的客户端应用程序。

组织客户端-服务器交互的最简单有效的方法是什么？

我想到了一个网络服务，但它看起来效率很低，只要客户端必须快速执行许多游戏动作（例如移动、拾取物品、攻击其他玩家等）

创建自定义通信协议是一项非常复杂的任务。

是否存在任何现成的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:07:27.783

我在开发游戏通信协议方面不是很有经验，但是，由于一段时间没有答案出现在这里，我可以与您分享我的意见。

**通讯协议选择**

我想你可以结合两种沟通方式：

*   **UDP**用于需要快速接收且您经常发送的信息，因此丢失单个数据包不会成为问题。您可以使用 UDP 发送信息，例如：动画的播放器位置
*   **TCP**用于获取重要且您必须确保已收到的信息，例如捡起的物体、玩家击中其他玩家、任务开始/完成等。

**选择要发送的数据**

要记住的另一件重要的事情是***发送最少的数据量***，所以宁愿只发送 X;Y 作为玩家位置而不是序列化整个玩家对象;)。

设计通信 API 并在服务器和客户端之间划分职责可能取决于一些事情，例如游戏类型和安全性与性能：做更多的计算并将更多的责任放在客户端可以导致更好的服务器性能，但会降低安全性游戏，因为这样更有可能有人会尝试作弊）。

一些示例链接只是为了让您入门：

*   [套接字类](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)
*   [System.Net 类的最佳实践](http://msdn.microsoft.com/en-us/library/zhzezf6d.aspx)
*   [TcpClient 类](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)
*   [UdpClient 类](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx)
*   [网络编程示例](http://msdn.microsoft.com/en-us/library/ee890485.aspx)（有一个使用 Socket 类的示例）

# java - 在java中实现谐波乘积谱算法

> ID：10462088
> 
> 赞同：1
> 
> 时间：2012-05-05T13:00:45.187
> 
> 标签：java, fft, spectrum

我目前正在使用 Java 开发吉他调音器程序，并且正在尝试实现谐波乘积频谱算法以确定基频。

目前，我制作了一种方法，可以将我的频谱下采样*f*因子。

我现在正试图将所有不同的下采样频谱相乘。我正在用 java 编码并使用数组。因此，我有针对已下采样的索引的数组和针对我的频谱的不同值的数组。我现在正试图将所有不同的数组设置为相同的大小并组织它们的值，以便它们对应于正确的下采样索引。我在大小和值方面有很多问题....

此外，我正在尝试根据我在纸上的一个例子来实现这个算法......因此我只能用 4 个下采样频谱来实现这个算法，但我怀疑当我实际使用真实的声音信号时这是否足够.

下面是下采样方法的代码：

```
import org.jfree.ui.RefineryUtilities;

public class SousEchantillonnage {

public static double[] valuesDownSample(double[] tab, int factor){

    int N = tab.length;

    double[] values = new double[N];

    for (int i = 0; i < N; i++){
        values[i] = tab[i];
    }

    int lengthDownSample = N + (facteur - 1) * (N - 1);

    double[] valuesDownSample = new double[lengthDownSample];
    for (int i = 0; i < N; i++){
        valuesDownSample[i] = values[i];
    }
    for (int i = N; i < lengthDownSample; i ++){
        valuesDownSample[i] = 0;
    }

    return valuesDownSample;
}

public static double[] indexDownSample(double[] tab, int factor){

    int N = tab.length;

    double[] indexes = new double[N];

    for (int i = 0; i < N; i++){
        indexes[i] = i;
    }

    int lengthDownSample = N + (factor - 1) * (N - 1);

    double[] indexDownSample = new double [lengthDownSample];
    for (int i = 0; i < lengthDownSample; i++){
        indexDownSample[i] = i / factor;
    }

    return indexDownSample;
} 
```

这种方法似乎奏效了。

到目前为止，这是我对 HPS 算法的方法：

```
public static double[] hps(double[] tab){

    int N = tab.length;

    int factor2 = 2;
    int factor3 = 3;
    int factor4 = 4;
    int lengthDownSample2 = N/2 + (factor2 - 1) * (N/2 - 1);
    int lengthDownSample3 = N/2 + (factor3 - 1) * (N/2 - 1);
    int lengthDownSample4 = N/2 + (factor4 - 1) * (N/2 - 1);

            // Gives us the spectrogram of the signal tab
    double[] spectrogram = new double[N];                       
    spectrogramme = FFT.calculFFT(tab);

            // We only need the first values of the spectrogram. The other half is the same.
    double[] spectrogramCut = new double[N/2];          
    for (int i = 0; i < N/2; i++){
        spectrogramCut[i] = spectrogram[i];
    }

            // We create the array that contains the values of spectrogramCut that we downsample by a factor 2
       double[] valuesSpect2 = new double [sizeDownSamp2];  
       valuesSpect2 = SousEchantillonnage.valuesDownSample(spectrogramCut, factor2);

          // We create an array of the indexes of spectrogramCut that we downsample by a factor 2
      double[] indexSpect2 = new double[sizeDownSamp2];
      indexSpect2 = SousEchantillonnage.indexDownSample(spectrogramCut, factor2);

         // We create the array that contains the values of spectrogramCut that we downsample by a factor 3
       double[] valuesSpect3 = new double [sizeDownSamp3];  
       valuesSpect3 = SousEchantillonnage.valuesDownSample(spectrogramCut, factor3);

         // We create an array of the indexes of spectrogramCut that we downsample by a factor 3
    double[] indexSpect3 = new double[sizeDownSamp3];
    indexSpect3 = SousEchantillonnage.indexDownSample(spectrogramCut, factor3);;

       // We create the array that contains the values of spectrogramCut that we            downsample by a factor 4
   double[] valuesSpect4 = new double [sizeDownSamp4];  
   valuesSpect4 = SousEchantillonnage.valuesDownSample(spectrogramCut, factor4);

       // We create an array of the indexes of spectrogramCut that we downsample by a factor 4
    double[] indexSpect4 = new double[sizeDownSamp4];
    indexSpect4 = SousEchantillonnage.indexDownSample(spectrogramCut, factor4);

        int sizeIndex = N/2 + 5 * (N/2 - 1); // size of the array that contains all the       indexes of the downsamples

        // We create this array
    double[] indexDowSamp = new double[sizeIndex];
    indexDowSamp[0] = 0;
    indexDowSamp[1] = 0.25;
    indexDowSamp[2] = 0.333;
    indexDowSamp[3] = 0.5;
    indexDowSamp[4] = 0.666;
    indexDowSamp[5] = 0.75;

    int q = sizeIndex / 6;      // quantity of packets of 6 we can do
    int r = sizeIndex%6;        // what we are left with.

    for (int i = 6; i < q * 6; i += 6){
        for (int j = 0; j < 6; j++){
        indexDowSamp[i + j] = indexDowSamp[i + j - 6] + 1;
        }
    }
    for (int i = 0; i < r; i++){
        indexDowSamp[q * 6 + i] = indexDowSamp[q * 6 + i - 6] + 1;
    } 
```

我被困在这里。我想做一个将两个不同长度的数组相乘的方法。

基本上，如您所见，当我对频谱图进行下采样时，我得到两个数组：

*   一个索引是下采样的
*   另一个具有下采样后的值。

我想做的是创建一个与`indexDownSample`:大小相同的数组`valuesDownSample`。例如，我们有`indexDownSample[0] = 0`. 我想拥有`valuesDownSample[0]`的乘积，`valuesSpectCut[0] *valuesSpect2[0]*valuesSpect3[0]*valuesSpect4[0]`因为所有这些数组都有一个对应于索引 0 ( `indexSpectCut[0] = 0`, `indexSpect2[0] = 0 = indexSpect3[0] = indexSpect4[0]`) 的值。

对于`indexDownSample[1]=0.25`，我们注意到只有`indexSpect4[1]= indexDownSample[1] = 0.25` We 将默认为 0 `valuesDownSample[1]`。

我们继续这样，直到我们填满了数组。

如果一切顺利，我们应该在最后：

*   valuesDownSample 包含产品的不同值
*   indexDownSample 包含不同的下采样索引。

我只需要找到最大峰值就可以找到我的基频。

我唯一的问题是我不知道如何进行乘法......

如果有人有想法，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-01T10:46:45.600

好吧，我有一个实际的答案，这就是我解决问题的方法：

首先，我不称之为下采样，而是划分 FFT 的频率。为此，我只使用 2 个数组，如下所示：

```
float findex[1000]; //index of frequencies for harmonic product spectrum
float mindex[1000]; //index of magnitudes for harmonic product spectrum
unsigned int max_findex;    //number of elements in findex[] and mindex[] 
```

这是我的初始化：max_findex = 0; 对于 (i = 0; i < 1000; i++) { mindex[i] = 0.0; }

我正在 VisualDSP++ 中的 Analog Devices Sharc EZ 开发板上开发，所以我的代码是 C 语言。

我在 12kHz 的低采样率下使用 131072 的大 FFT 大小。这给了我每箱 0.09Hz 的相对较高的精度。因为高次谐波会更准确，所以我先从我的最高分部开始：

```
//first run with max division (highest accuracy)
for (i = 0; i < new_peak; i++) {
    findex[max_findex] = f(peak[i].index) / 9;
    mindex[max_findex] = peak[i].magnitude;
    if (max_findex < 999) max_findex++;
    else xmitUARTmessage("ERROR max_findex\r\n", 100);
} 
```

我将所有来自 FFT 的峰值都保存在一个结构中，如下所示： peak[].index 是 FFT 中的 bin 编号，而 peak[].magnitude 是峰值的幅度。f() 函数返回 bin 的频率。

接下来我会去 8 区，然后是 7 区，以此类推，然后是 1 区（实际频率排在最后）。对于每个被划分的峰值，我会查看我的数组，看看此时我是否已经有了一个频率。我使用 +/- 0.2，我可能会收紧它，但您必须根据 FFT 的准确性对其进行调整。

```
char found;

for (u2 = 8; u2 > 0; u2--) {
    for (i = 0; i < new_peak; i++) {
        tempf = f(peak[i].index) / u2;
        found = 0;
        for (u = 0; u < max_findex; u++) {
            //try to find existing frequency
            if (tempf < findex[u] + 0.2 && tempf > findex[u] - 0.2) {
                //found existing frequency
                mindex[u] *= peak[i].magnitude;
                found = 1;
                break;
            }
        } //for u
        if (!found) {
            //no frequency was found, add new one
            findex[max_findex] = tempf;
            mindex[max_findex] = peak[i].magnitude;
            if (max_findex < 999) max_findex++;
            else xmitUARTmessage("ERROR max_findex\r\n", 100);
        }
    } //for i
} //for u2 
```

就是这样。现在我只需打印出我的值并在 Excel 中按大小对它们进行排序......

```
for (i = 0; i < max_findex; i++) {
    sprintf(tempstr, "%.2f,%.2f\r\n", findex[i], mindex[i]);
    xmitUARTmessage(tempstr, 100);
} 
```

这是一些输出（我只显示前 6 个）： 60.53 1705693250000 60 1558419875000 20 555159950 179.99 264981525 7.5 1317353 8.57 1317353

产生输出的输入音频信号是： 60 Hz 方波（基波加奇次谐波） 181.5 Hz 正弦波 302.5 Hz 正弦波 423.5 Hz 正弦波

我正在模拟 60 + 60.5 Hz 的拍频，而基波在 60.5 处完全缺失。这是一个艰难的案例，它奏效了:)

# android - 模拟 NFC 论坛强制标签 1 或 2

> ID：10462089
> 
> 赞同：0
> 
> 时间：2012-05-05T13:01:01.117
> 
> 标签：android, usb, nfc

您是否看到在不使用安全元件的移动设备上模拟 NFC 论坛标签 1 或 2 的可能性——我认为这是不可能的？使用 NFC 阅读器在桌面上模拟它们的场景听起来更真实……

有什么建议么？问候， STeN

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:42:27.753

我看不出任何可能性。从技术上讲，这并非不可能，但据我所知，目前还没有适用于移动设备的 NFC 芯片具有此功能。使用桌面 NFC 阅读器，我认为在某些情况下这是可能的：[libnfc 支持它](http://www.libnfc.org/documentation/examples/nfc-emulate)。

# php - 向 UTC_TIMESTAMP 添加一小时以提交到 MySQL

> ID：10462092
> 
> 赞同：3
> 
> 时间：2012-05-05T13:01:23.843
> 
> 标签：php, mysql, date, utc

我正在使用以下代码将 UTC_TIMESTAMP 提交到 MySQL 数据库：

```
$logq = "INSERT INTO logs (Name, Page, Date) VALUES ('$user', '$page', UTC_TIMESTAMP())"; 
```

我在英国，时间目前比 UTC_TIMESTAMP 早一小时，所以我想在输入的值上增加一小时，但我不知道该怎么做。我尝试了在 Stack Overflow 上找到的几个建议，但都不起作用。有人可以让我知道如何正确执行此操作吗？另外，我不确定如何处理夏令时。有没有办法自动解决这个问题？

谢谢，

缺口

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T13:11:15.677

```
DATE_ADD(UTC_TIMESTAMP(), INTERVAL 1 HOUR) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T14:16:13.383

无论在哪里，mysql 数据类型 TIMESTAMP 始终是 UTC。您有一个函数 FROM_UNIXTIME 将时间戳在内部转换为标准 YYYY-MM-DD HH:SS 格式。使用 FROM_UNIXTIME 函数时，它会自动将该 UTC 转换为您的本地时区。因此，您无需调整时间，无论您的白天状态如何，会计总是会很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:11:25.257

在 PHP 中创建到数据库的连接后，在任何查询之前查询此代码：

```
mysql_query("SET time_zone = '+3:00'"); 
```

我没有尝试过，但它应该可以解决问题。

关于这个的一些链接：

*   [MySQL为每个连接设置时区](http://www.electrictoolbox.com/mysql-set-timezone-per-connection/)
*   [如何同步 PHP MySQL 时区配置](http://www.sitepoint.com/synchronize-php-mysql-timezone-configuration/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T13:18:38.527

请使用 mysql 的 ADDDATE 功能，使用它您可以在任何日期添加小时/月/日。

```
 ADDDATE( UTC_TIMESTAMP(), INTERVAL 1 HOUR) 
```

请看下面给出的 url 属于 mysql 日期时间函数

[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-26T10:43:17.490

这也适用 SELECT DATE_ADD(UTC_TIMESTAMP(), INTERVAL 1 DAY)

# android - 从我的 Android 日历中仅删除一个重复事件的实例

> ID：10462095
> 
> 赞同：5
> 
> 时间：2012-05-05T13:01:29.360
> 
> 标签：android, calendar

我一直在查看有关如何从我的 Android 2.3 手机日历中删除重复事件的一个实例的各种帖子，但我一直无法找到完美的答案。到目前为止，我遇到的最好的是：

```
Uri eventsUri = Uri.parse("content://com.android.calendar/events");
Uri deleteEventUri = Uri.withAppendedPath(eventsUri, String.valueOf(id2));
DeleteEventActivity.context.getContentResolver().delete(deleteEventUri, null, null); 
```

其中 id2 是我要删除的事件的 id。我遇到的问题是我只想删除重复事件的一个实例，但是此代码会删除所有事件。有没有办法只删除一个实例？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-12T10:33:48.497

## 以下是基础知识

1.  找到您要删除的实例。（使用[`Instances.query()`](http://developer.android.com/reference/android/provider/CalendarContract.Instances.html#query(android.content.ContentResolver,%20java.lang.String[],%20long,%20long))）
2.  创建[附加](http://developer.android.com/reference/android/content/ContentUris.html#withAppendedId(android.net.Uri,%20long))了事件 ID的[异常 URI](http://developer.android.com/reference/android/provider/CalendarContract.Events.html#CONTENT_EXCEPTION_URI)。
3.  创建`ContentValues`. 将您的实例的[BEGIN](http://developer.android.com/reference/android/provider/CalendarContract.Instances.html#BEGIN)值设置为[...Events.ORIGINAL_INSTANCE_TIME](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#ORIGINAL_INSTANCE_TIME)。将[STATUS_CANCELED](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#STATUS_CANCELED)作为[...Events.STATUS](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#STATUS)
4.  现在只需[insert(yourURI, yourValues)](http://developer.android.com/reference/android/content/ContentResolver.html#insert(android.net.Uri,%20android.content.ContentValues))就可以了！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-17T08:15:28.860

如果其他人仍在为此苦苦挣扎，我终于破解了！

事实证明，您没有删除或修改任何记录，您实际上所做的是插入一个称为异常的新事件。我花了几个月的时间在任何地方找到这些信息，即使找到了，又花了几个月的时间来弄清楚需要在异常中添加什么才能使其正常工作，所以这就是我的做法。

首先，查询要取消一次发生的事件的实际实例。您需要查询表 CalendarContract.Instances 以获取 CalendarContract.Instances.TITLE、CalendarContract.Instances.BEGIN 和 CalendarContract.Instances.EVENT_ID 的值。我在代码中执行此操作的方式并不真正适合此答案的上下文，因此希望您能够自己弄清楚如何做到这一点。将这些值存储为：

`final String title = eventCursor.getString(0); final long beginl=eventCursor.getLong(1); final int id = eventCursor.getInt(2);`

然后我们需要设置一个新事件，如下所示：

```
 final Context context = getApplicationContext();
 final ContentResolver contentResolver = context.getContentResolver();
 final Uri.Builder builder = Uri.parse(
"content://com.android.calendar/events").buildUpon();
 final Cursor eventCursor = contentResolver.query(builder.build(),
new String[] 
   {Events.CALENDAR_TIME_ZONE,Events.ALL_DAY,Events.CALENDAR_ID,Events._SYNC_ID,     Events.OWNER_ACCOUNT }, 
   "_id=" + id, null, null);
 while (eventCursor.moveToNext()) {
final String timezone=eventCursor.getString(0);
final String allday=eventCursor.getString(1);
final long calID=eventCursor.getLong(2);
final String mSyncId=eventCursor.getString(3);
final String account=eventCursor.getString(4);
ContentValues values = new ContentValues();
    values.put(Events.TITLE, title);
    values.put(Events.EVENT_TIMEZONE, timezone);
values.put(Events.ORIGINAL_SYNC_ID, mSyncId);//not 100% sure about this,may also need a date?
values.put(Events.HAS_ALARM, "0");
values.put(Events.HAS_ATTENDEE_DATA,"0");
values.put(Events.ALL_DAY, allday);
    values.put(Events.DTSTART, beginl+3600000);
    values.put(Events.ORIGINAL_INSTANCE_TIME, beginl+3600000);
values.put(Events.STATUS, Events.STATUS_CANCELED);
Uri uri = Uri.withAppendedPath(Events.CONTENT_EXCEPTION_URI,
        String.valueOf(id));
uri = asSyncAdapter(uri, account, CTS_TEST_TYPE);
Uri resultUri = context.getContentResolver().insert(uri, values);
    try {
        int eventID = Integer.parseInt(resultUri.getLastPathSegment()); 
        int debug=eventID;
        } catch (Exception e) {
        int debug=0;
        }
}
static Uri asSyncAdapter(Uri uri, String account, String accountType) {
    return uri.buildUpon()  
    .appendQueryParameter
        (android.provider.CalendarContract.CALLER_IS_SYNCADAPTER,"true")
    .appendQueryParameter(Calendars.ACCOUNT_NAME, account)
    .appendQueryParameter(Calendars.ACCOUNT_TYPE, accountType).build();
} 
```

希望这可行，我试图删除我的代码中不相关的部分。您会注意到我必须将 3600000 添加到 beginl 值（以毫秒为单位的 1 小时）。我认为这是因为我们目前处于 BST 中，一旦时钟发生变化，此代码将无法工作，但当时我会担心的！

最后，我使用了一个名为 Content Provider Helper 的应用程序来帮助我解决这个问题。您可以使用它查询您的内容提供程序表。我会尝试使用我的代码设置异常，然后使用我的手机日历应用程序删除实例，并比较两条记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T11:24:55.757

您必须更新原始事件的[EXDATE](https://www.rfc-editor.org/rfc/rfc5545)列。

# c# - 从 2 种不同的形式更改标签

> ID：10462097
> 
> 赞同：0
> 
> 时间：2012-05-05T13:01:43.970
> 
> 标签：c#, winforms, label

按下 2 个不同 windowsForms 上的按钮时，我试图更改标签。

如果我打开第二个表单，我可以轻松更改它，但我无法弄清楚如何更改已经打开的表单上的数据。我不断得到`NullRefferenceExecption`。

这是我在`Form1`和按钮中使用的代码`Form2`：

```
public Form2 m_Form2;

m_Form2 = new Form2();
m_Form2.Show();
m_Form2.label1.Text = "pressed on form 1"; 
```

和：

```
public Form1 m_Form1;

m_Form1.label1.Text = "pressed on form 2"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:08:04.423

您需要传递 to 的引用`Form1`，`Form2`例如通过构造函数：

```
public Form2 m_Form2;
m_Form2 = new Form2(this);
m_Form2.Show(); 
```

在表格 2 中：

```
public Form2(Form1 form1)
{
    this.m_Form1 = form1;
}

public Form1 m_Form1; 
```

某处：

```
m_Form1.label1.Text = "pressed on form 2"; 
```

但`label1`需要公开，或者您需要提供获取/设置`label1`文本的公共属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:18:25.760

保持控件私有，因此只能从创建的表单访问它们。使用表单的引用来访问某个表单。我将在按下按钮时（在每个表单中）向您展示如何更简单地将数据从表单传递到表单：

```
class Form1
{
    Form2 f2;
    private void buttonOpenForm2_Click(object sender, EventArgs e) 
    {
        f2 = new Form2(this);
        f2.Show();
    }

    private void SayHiOnForm2_Click(object sender, EventArgs e) 
    {
        if(f2 != null)
           f2.DataFromForm2("Hello from form 1.");
        else
           MessageBox.Show("Form2 is not yet opened.");
    }

    public void DataFromForm2(stirng message)
    {
        this.label1.Text = message;
    }
}

//on form2:
class Form2
{
    Form1 f1;
    public Form2(Form1 _f1)
    {
        InitilaizeComponent();
        this.f1 = _f1;
    }

    private void SayHiOnForm1_Click(object sender, EventArgs e) 
    {
        f1.DataFromForm2("Hello from form 2.");
    }

    public void DataFromForm1(stirng message)
    {
        this.label1.Text = message;
    }
} 
```

如果你愿意，你甚至可以使用事件。它更整洁，但这也可以。

# cakephp - 如何在 cakephp 中在亚马逊服务器（s3）上上传视频

> ID：10462098
> 
> 赞同：0
> 
> 时间：2012-05-05T13:01:52.350
> 
> 标签：cakephp, amazon

我是 cake php(2.0) 的新手，我想通过我的网站在亚马逊服务器 (Amazon S3) 上上传视频。我下载了 sdk zip 文件夹并在 cli-s3_get_urls_for_uploads.php 文件中编写了函数，它在我独立运行时工作正常在服务器上。但问题是我不知道如何在 cakephp 中实现它。我对此进行了很多搜索，但一无所获。如果有人知道如何在 cakephp 中上传亚马逊服务器上的视频。请告诉我解决这个问题的完整程序。

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:23:45.253

本教程是否有帮助：[http](http://www.albinns.com/2011/09/using-s3-with-cakephp/) ://www.albinns.com/2011/09/using-s3-with-cakephp/ ？

我也做了一个快速搜索，发现了几个 S3 的库/助手：

*   [http://www.sanisoft.com/blog/2010/03/29/amazon-s3-upload-behavior-for-cakephp-1-2-x/](http://www.sanisoft.com/blog/2010/03/29/amazon-s3-upload-behavior-for-cakephp-1-2-x/)
*   [https://github.com/primeminister/CakePHP-Amazon-S3-plugin](https://github.com/primeminister/CakePHP-Amazon-S3-plugin)
*   [https://github.com/mikesmullin/CakePHP-AWS-S3-Plugin](https://github.com/mikesmullin/CakePHP-AWS-S3-Plugin)

希望其中之一有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:07:12.457

由于 cake php 只是 php 的一个[框架](http://en.wikipedia.org/wiki/Software_framework)，因此您似乎可以像通过标准 php 一样实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:39:53.033

您可以将您的库/sdk 放在供应商中，并编写一个您将在控制器中使用的组件。

# c++ - 如何删除树的孩子

> ID：10462101
> 
> 赞同：2
> 
> 时间：2012-05-05T13:02:21.503
> 
> 标签：c++, algorithm, tree, theory, prefix-tree

我需要删除除根之外的前缀树的所有子级。我不问任何代码。我只需要一种方法来遍历和删除树的所有子节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:07:15.463

您可以使用后序遍历来遍历树并删除节点，如下所示：

```
function deleteTree(node, tree_root) {
     if (node != null) {
         // recursively delete left sub-tree.
         deleteTree(node->left, tree_root);

         // recursively delete right sub-tree.
         deleteTree(node->right, tree_root);

         // time to delete the node..but only if it's not root.
         if( node != tree_root) {
              delete node;
         }  
     }
} 
```

并将上述函数调用为：

```
deleteTree(root,root); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:05:08.133

编写一个方法`delete`，它接受一个树节点：

```
 for each child in node
   call delete on child
   remove child from node
   free child 
```

对于 root 的每个孩子调用这个删除方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:23:39.007

有趣的是，你可能会做一些优雅的事情——删除后可能不会使用树，所以你可以编写一个节点的析构函数：

```
struct Node // Non-copyable!
{
  Node *left, *right;

  Node()
    : left(NULL)
    , right(NULL)
  {
  }
  ~Node()
  {
    delete left;
    delete right;
  }
}; 
```

就这样！你用它：`delete root`. 请注意，您之前可能不会测试 NULL，`delete`因为它在 C++ 标准下运行良好（只是返回）。

# mysql - 如何编写一个简单的选择查询而不是使用视图？

> ID：10462103
> 
> 赞同：4
> 
> 时间：2012-05-05T13:02:28.197
> 
> 标签：mysql, sql, view

查找在同一天拜访了同一专业的两位不同医生的患者。

示例数据库：[**单击此处查看 SQL Fiddle 中的示例数据脚本。**](http://sqlfiddle.com/#!2/cdd98/68)

```
CREATE VIEW DistinctVisits AS
SELECT v.vid,v.pid,d.speciality,v.date
FROM Visits v ,Doctors d
WHERE d.did=v.did
GROUP BY v.pid,v.did,v.date;

CREATE VIEW DistinctVisits2 AS
SELECT dv.pid,dv.speciality,dv.date, COUNT(dv.vid) as countv
FROM DistinctVisits dv
GROUP BY dv.pid,dv.speciality,dv.date;

SELECT dv2.pid,dv2.speciality
FROM DistinctVisits2 dv2
WHERE dv2.countv=2;

DROP VIEW DistinctVisits;
DROP VIEW DistinctVisits2; 
```

我如何重复相同的想法，但只针对一个大查询？另一个解决方案也不错，但请先尝试帮助我改进这个解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T13:49:44.587

### 解释：

*   您需要查找在给定日期访问过同一专业的两位不同医生的患者列表。

*   在此要求中，您的`Patient`表成为主表。让我们先查询该表。

*   现在我们有了患者名单。我们需要得到他们访问过的医生的名单。我们不能简单地将患者表与医生表连接起来，因为没有用于映射数据的列。我们必须使用 Visits 作为中间表

*   `LEFT OUTER JOIN`在 Patient 和 Visits 表之间添加一个并按**pid**列加入。

*   我们有病人和他们就诊的名单，但现在我们需要获取医生的信息。`LEFT OUTER JOIN`因此，在 Visits 和 Doctors 表之间添加另一个，并通过**did**列加入。

*   我们有患者和医生就诊信息。但是，我们只需要患者的姓名、就诊医生的专业和就诊日期。因此，我们将在*SELECT*子句和GROUP *BY*子句中添加列`p.pname`和。除此之外，我们需要所有访问次数，但有一个问题。我们只需要 DISTINCT 计数，换句话说，我们需要他们访问过的所有唯一医生的计数。因此，如果患者在一天内两次拜访同一位医生，则应计为 1。因此，在这里添加将有所帮助。此外，关键是使用正确的列名，在这种情况下**d.did**代表医生。`d.speciality``v.date`****`DISTINCT`****

*****   我们拥有我们需要的所有数据，但我们只需要过滤在同一天拜访了两位不同医生的患者。为此，HAVING 子句可以帮助我们。当您应用 GROUP BY 时，HAVING 是合适的。我们将使用相同的 COUNT(DISTINCT d.did) 来检查计数是否仅与**2**的值匹配。您可以在输出中看到结果。**** 

 ****### 建议：

*   您不必为插入到表中的每个值指定 INSERT INTO 语句。您可以在括号内将它们组合在一起，并用 . 分隔它们**`commas`**。最后一条语句应以**`semicolon`**.

*   该查询使用`LEFT OUTER JOIN`. 我使用此联接来找出每位患者的所有就诊次数，***即使***他们从未看过医生。我只是想在形成查询时查看输出。您可以将其更改为`INNER JOIN`，我认为这更适合您的场景。

*   如果您不想显示访问次数，可以将其从 SELECT 子句中删除。

### 演示：

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!2/34da4/1)

### 解释中使用的脚本：

```
SELECT          p.pname
            ,   d.speciality 
            ,   v.date
            ,   COUNT(DISTINCT d.did) AS visitcount
FROM            Patient p
LEFT OUTER JOIN Visits v
ON              v.pid = p.pid
LEFT OUTER JOIN Doctors d
ON              d.did = v.did
GROUP BY        p.pname
            ,   d.speciality
            ,   v.date
HAVING          COUNT(DISTINCT d.did) = 2 
```

### 更适合您的脚本：

```
SELECT      p.pname
        ,   d.speciality 
        ,   v.date
FROM        Patient p
INNER JOIN Visits v
ON          v.pid = p.pid
INNER JOIN Doctors d
ON          d.did = v.did
GROUP BY    p.pname
        ,   d.speciality
        ,   v.date
HAVING      COUNT(DISTINCT d.did) = 2 
```

### 输出：

```
PNAME      SPECIALITY    DATE       VISITCOUNT
---------  ------------  ---------  -----------
Loch Ness  Assholes      17/9/2012      2
Loch Ness  Orthopedist   13/1/2011      2 
```

### 创建表并插入脚本：

```
create table InsuranceCompanies  (
    cid         int,
    cname       varchar(20),
    primary key (cid)
);

create table Patient (
    pid         int,
    pname       varchar(20),
    age         int,
    cid         int,
    gender      char,
    primary     key (pid),
    constraint foreign key (cid) 
        references InsuranceCompanies (cid) 
);

create table Doctors (
    did         int ,
    dname       varchar(20),
    speciality  varchar(20),
    age         int,
    cid         int,
    primary key (did),
    constraint foreign key (cid) 
        references InsuranceCompanies (cid) 
);

create table Visits(
    vid         int,
    pid         int,
    did         int,
    date        varchar(20),
    primary key (vid),
    constraint foreign key (pid) 
        references Patient (pid) ,
    constraint foreign key (did) 
        references Doctors (did)
);

INSERT INTO InsuranceCompanies(cid, cname) VALUES
    ( 1111, 'Harel Inc' ),
    ( 2222, 'Clalit Inc' );

INSERT INTO Doctors ( did, dname, speciality, age, cid) VALUES 
    ( 100, 'Jhonny Depp',       'Heart',        42, 1111 ),
    ( 101, 'Tom Tolan',         'Assholes',     62, 1111 ),
    ( 105, 'Yom Tov',           'Assholes',     52, 1111 ),
    ( 102, 'Lauren Jaime',      'Throat',       27, 2222 ),
    ( 103, 'Gomez Flaurence',   'Legs',         37, 2222 ),
    ( 106, 'David Harpaz',      'Orthopedist',  37, 2222 ),
    ( 107, 'David Schwimmer',   'Orthopedist',  37, 2222 ),
    ( 108, 'Sammy Salut',       'Orthopedist',  37, 1111 );

INSERT INTO Patient ( pid, pname, age, cid,gender) VALUES 
    ( 200, 'Jon Gilmour',       25, 2222, 'm' ),
    ( 206, 'Bon Gilmour',       30, 2222, 'm' ),
    ( 205, 'Jon Gilmour',       22, 2222, 'm' ),
    ( 201, 'Bon Jovy',          21, 2222, 'm' ),
    ( 202, 'Loch Ness',         17, 2222, 'f' ),
    ( 203, 'Lilach Sonin',      12, 1111, 'f' ),
    ( 209, 'Lilach Dba',        34, 1111, 'f' ),
    ( 210, 'Paulina Daf',       32, 1111, 'f' ),
    ( 204, 'Gerry Jalor',       23, 1111, 'm' ),
    ( 208, 'Jerrushalem Jalor', 23, 1111, 'm' );

INSERT INTO Visits ( vid, pid, did, date) VALUES 
    ( 300, 204, 100,    '12/12/2012' ),
    ( 301, 204, 101,    '12/12/2012' ),
    ( 302, 204, 101,    '02/01/2012' ),
    ( 303, 202, 101,    '17/09/2012' ),
    ( 311, 202, 105,    '17/09/2012' ),
    ( 304, 203, 102,    '12/12/2011' ),
    ( 312, 202, 106,    '13/06/2012' ),
    ( 314, 202, 107,    '13/01/2011' ),
    ( 313, 202, 108,    '13/01/2011' ),
    ( 305, 204, 102,    '10/10/2011' ),
    ( 306, 201, 100,    '12/01/2012' ),
    ( 316, 204, 108,    '18/05/2012' ),
    ( 307, 202, 100,    '12/07/2012' ),
    ( 315, 203, 108,    '12/07/2012' ),
    ( 310, 204, 103,    '10/04/2012' ),
    ( 308, 203, 102,    '12/12/2011' ),
    ( 309, 200, 101,    '12/12/2012' ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T13:06:59.433

您需要的是在按日期和专业分组后`HAVING`查找的子句。`COUNT(*) = 2`事实上，甚至不需要嵌套。（我还`FROM`用一个显式的逗号分隔子句替换了你的隐式连接`JOIN`，这是更受欢迎的现代语法）。

```
SELECT 
  v.pid,
  d.speciality,
  v.date,
  COUNT(COUNT DISTINCT d.did) AS numvisits
FROM 
  visits v
  JOIN Doctors d ON v.did = d.did
GROUP BY v.pid, d.speciality, v.date
HAVING COUNT(COUNT DISTINCT d.did) = 2
/* Note - depending on your RDBMS, you may
   be able to use the count alias as
HAVING numvisits = 2 
   MySQL allows this, for ex, but MS SQL Server doesn't and I think Oracle doesn't */ 
```

此处的`SELECT`列表`GROUP BY`应该为这 3 列的聚合组合生成患者 ID、专业、日期和访问次数。然后，该`HAVING`条款将其限制为仅对该组进行 2 次访问的人。

要*仅从*中提取患者，请将其包装在子查询中：

```
SELECT Patients.* 
FROM Patients JOIN (
  SELECT 
    v.pid,
    d.speciality,
    v.date,
    COUNT(COUNT DISTINCT d.did) AS numvisits
  FROM 
    visits v
    JOIN Doctors d ON v.did = d.did
  GROUP BY v.pid, d.speciality, v.date
  HAVING COUNT(COUNT DISTINCT d.did) = 2
) subq ON Patients.pid = subq.pid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T14:04:17.130

在 Siva 的回答之后有点晚了，但这是我的问题：

```
SELECT v.pid, d.speciality, count(DISTINCT d.did) as cnt
  FROM Visits v
  JOIN Doctors d ON v.did = d.did
 GROUP BY v.pid, d.speciality, v.date
HAVING count(DISTINCT d.did) = 2; 
```

它产生与没有视图的初始 OP 查询完全相同的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T13:07:24.730

```
WITH
dv1 as
(
    SELECT v.vid, v.pid, d.speciality, v.date
    FROM Visits v, Doctors d
    WHERE d.did=v.did
    GROUP BY v.pid,v.did,v.date;
),
dv2 as
(
    SELECT dv.pid,dv.speciality,dv.date, COUNT(dv.vid) as countv
    FROM dv1
    GROUP BY dv.pid,dv.speciality,dv.date;
)
SELECT dv2.pid, dv2.speciality
FROM dv2
WHERE dv2.countv=2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T13:09:56.213

您可以使用嵌套的 CTE（如果您不在 mysql 上，那就是......） CTE 可以被视为*即时视图*，仅在语句期间存在。（注：未经测试）

```
WITH DistinctVisits2 AS (
    WITH DistinctVisits AS (
        SELECT v.vid,v.pid,d.speciality,v.date
        FROM Visits v
        JOIN Doctors d ON d.did=v.did
        GROUP BY v.pid,v.did,v.date
        )
    SELECT dv.pid,dv.speciality,dv.date, COUNT(dv.vid) as countv
    FROM DistinctVisits dv
    GROUP BY dv.pid,dv.speciality,dv.date
    )
SELECT dv2.pid,dv2.speciality
FROM DistinctVisits2 dv2
WHERE dv2.countv=2
    ; 
```****

# java - 如何找到部署的环境？

> ID：10462107
> 
> 赞同：0
> 
> 时间：2012-05-05T13:02:51.567
> 
> 标签：java, spring, hibernate, maven

我正在使用 spring/hibernate 应用程序，构建工具是 MAVEN。我在 pom.xml 中配置了配置文件。是否可以知道部署的环境？如果打包的war部署在UAT/DEV/Production环境中，我需要知道war运行的环境。请帮我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:09:13.107

您需要在您的应用程序可以访问的服务器上设置一个环境变量（例如 -Denvironment=PROD），或者在您可以读取的服务器上放置一个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T09:17:56.507

不清楚为什么你需要知道这个选项。

在使用数据库的应用程序中，最好将此类选项放在数据库中，而不是系统属性中，以避免出现 SystemProperties=DEV 和 Database=UAT 的情况。

# php - 来自使用 php 的 url 的值

> ID：10462113
> 
> 赞同：-5
> 
> 时间：2012-05-05T13:03:48.590
> 
> 标签：php, youtube

我想从 url 中提取一个值，例如 url 是

[http://www.youtube.com/watch](http://www.youtube.com/watch)？**v=N22qGmYIUVU** &feature=g-logo

我需要使用 php 从 url 中获取 v 的值。我知道它需要使用正则表达式来完成，但我不太擅长，我检查了其他相关问题，但我发现他们解决的方式存在问题。

例如这个正则表达式 - /http\://www.youtube.com/watch\?v=([\w-]{11})/

将 v 的值限制为 11 我不希望这样，基本上如果它遇到“#”或“&”或任何分隔符，则应终止并提取 v 的值。

v 的值可以是任意长度

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:09:15.280

最简单的方法是使用 parse_url 函数。 [检查这个链接](http://php.net/manual/en/function.parse-url.php)

然后使用[http://www.php.net/manual/en/function.parse-str.php](http://www.php.net/manual/en/function.parse-str.php)

```
print_r(parse_url('http://www.youtube.com/watch?v=N22qGmYIUVU&feature=g-logo')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:07:26.790

```
preg_match("~/watch\?v=(.*?)&~i", $uri, $matches); 
```

这应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:10:07.760

这是一种比使用正则表达式更简单的方法。

```
<?php
    $url = "http://www.youtube.com/watch?v=N22qGmYIUVU&feature=g-logo";

    $parts = parse_url($url);
    parse_str($parts['query'], $query);

    print_r($query); // $query['v'] is what you want
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T13:26:17.533

使用 PHP 5.4，您可以使用数组解引用：

```
parse_str(parse_url("http://www.youtube.com/watch?v=N22qGmYIUVU&feature=g-logo")["query"],$arr);
echo $arr["v"]; 
```

# ios5 - 当我想在图像库中选择图像时，iOS 模拟器或 iPhone 的屏幕冻结

> ID：10462114
> 
> 赞同：0
> 
> 时间：2012-05-05T13:03:52.287
> 
> 标签：ios5, xcode4.2, ios-simulator, uiimagepickercontroller, freeze

我为 ios 5 开发 xcode 4.2，并在 iphone 4S 上测试小应用程序。ARC，没有故事板。我尝试创建一个应用程序来学习，所以我用第一个视图菜单（xib 文件，只有一个按钮下载第二个视图，HHKMenuViewController.h 和 .m）和第二个视图（带有 UIImage 的 xib 文件和两个按钮，HHKListViewController.h 和 .m）。第二个视图在这里为用户提供了在图像库中拍摄图像（第一个按钮）或返回第一个视图菜单（第二个按钮）的可能性。

这是工作。没有错误。我在 iOS 模拟器上编译，我有出现的菜单。当我单击按钮时，我进入第二个视图，当我单击“选择图片”按钮时，我可以选择我的图片，并且该图片出现在第二个视图中的图像框架中。一切都好。

但是当我进行第一个视图-> 第二个视图（单击按钮返回）-> 第一个视图时...大约 10 次当我想进入图像库时，iOS 模拟器冻结（Xcode 没有错误），我不能做任何事情。在我的 iPhone 4s 上也是如此。我尝试使用工具（开发人员工具）查看内存的活动，但我认为与其他应用程序没有任何问题。

你有什么建议吗？

谢谢您的帮助。

------------HHKAppDelegate.h--------

```
 #import <UIKit/UIKit.h>
@class HHKMenuViewController;

@interface HHKAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) HHKMenuViewController *menuViewController;

@end 
```

-----------HHKAppDelegate.m-------

```
 #import "HHKAppDelegate.h"
#import "HHKMenuViewController.h"

@implementation HHKAppDelegate

@synthesize window = _window;
@synthesize menuViewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen]applicationFrame]];
    // Override point for customization after application launch
    self.menuViewController = [[HHKMenuViewController alloc] initWithNibName:@"HHKMenuViewController" bundle:nil];
    UIView *menuView = self.menuViewController.view;
    [self.window addSubview:menuView];   
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}
@end 
```

---------HHKMenuViewController.h---------------

```
#import <UIKit/UIKit.h>
#import <mach/mach.h>
@class HHKListViewController;
@class HHKMenuViewController;

@interface HHKMenuViewController : UIViewController

@property (strong, nonatomic) HHKListViewController *listViewController;
@property (strong, nonatomic) HHKMenuViewController *menuViewController;

- (IBAction)listButtonPressed:(id)sender;

@end 
```

--------HHKMenuViewController.m----------------

```
#import "HHKMenuViewController.h"
#import "HHKListViewController.h"

@implementation HHKMenuViewController

@synthesize listViewController;
@synthesize menuViewController;

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    self.listViewController = nil;}

#pragma mark - View lifecycle

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.listViewController = nil;}

- (IBAction)listButtonPressed:(id)sender {

self.menuViewController = [[HHKMenuViewController alloc] initWithNibName:@"HHKMenuViewController" bundle:nil];
UIView *menuView = self.menuViewController.view; 

self.listViewController = [[HHKListViewController alloc] initWithNibName:@"HHKListViewController" bundle:nil];
UIView *listView = self.listViewController.view;

[UIView transitionWithView:self.view duration:0.75 options:UIViewAnimationOptionTransitionCurlUp
animations:^{[menuView removeFromSuperview];[self.view insertSubview:listView aboveSubview:menuView];} 
                completion:NULL];}
@end 
```

----------HHKListViewController.h-----------------

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>

@class HHKMenuViewController;
@class HHKListViewController;

@interface HHKListViewController : UIViewController <UIImagePickerControllerDelegate, UINavigationControllerDelegate>

@property (strong, nonatomic) HHKMenuViewController *menuViewController;
@property (strong, nonatomic) HHKListViewController *listViewController;
@property (weak, nonatomic) IBOutlet UIImageView *imageView;
@property (strong, nonatomic) UIImage *image;
@property (copy, nonatomic) NSString *lastChosenMediaType;
@property (assign, nonatomic) CGRect imageFrame;

-(IBAction)backMenuList:(id)sender;
-(IBAction)selectExistingPicture:(id)sender;

@end 
```

----------HHKListViewController.m------

```
#import "HHKListViewController.h"
#import "HHKMenuViewController.h"
#import <MobileCoreServices/UTCoreTypes.h>
#import <mach/mach.h>

@interface HHKListViewController ()
static UIImage *shrinkImage(UIImage *original, CGSize size);
-(void)updateDisplay;
-(void)getMediaFromSource:(UIImagePickerControllerSourceType)sourceType;
@end

@implementation HHKListViewController

@synthesize menuViewController;
@synthesize listViewController;
@synthesize imageView;
@synthesize image;
@synthesize lastChosenMediaType;
@synthesize imageFrame;

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    imageFrame = imageView.frame;}

-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self updateDisplay];}

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.imageView = nil;
    self.listViewController = nil;}

-(IBAction)backMenuList:(id)sender {

    self.menuViewController = [[HHKMenuViewController alloc] initWithNibName:@"HHKMenuViewController" bundle:nil];
    UIView *menuView = self.menuViewController.view; 
    self.listViewController = [[HHKListViewController alloc] initWithNibName:@"HHKListViewController" bundle:nil];
    UIView *listView = self.listViewController.view;
    [UIView transitionWithView:self.view duration:0.75 options:UIViewAnimationOptionTransitionCurlDown
                    animations:^{
                        [listView removeFromSuperview];
                        [self.view insertSubview:menuView aboveSubview:listView];
                    } 
                    completion:NULL];}

- (IBAction)selectExistingPicture:(id)sender {

    [self getMediaFromSource:UIImagePickerControllerSourceTypePhotoLibrary];}

/*---------------------------------------------------------------*/
/*--------------------------------------------------------------*/
#pragma mark UIImagePickerController delegate methods

-(void)imagePickerController :(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

        UIImage *chosenImage = [info objectForKey:UIImagePickerControllerEditedImage];
        UIImage *shrunkenImage = shrinkImage(chosenImage, imageFrame.size);
        self.image = shrunkenImage;
     [picker dismissModalViewControllerAnimated: YES]; }

-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker{

    [picker dismissModalViewControllerAnimated:YES];}

#pragma mark -

static UIImage *shrinkImage(UIImage *original, CGSize size) {
    CGFloat scale = [UIScreen mainScreen].scale;
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, size.width * scale,size.height * scale, 8, 0, colorSpace, kCGImageAlphaPremultipliedFirst);
    CGContextDrawImage(context,CGRectMake(0, 0, size.width * scale, size.height * scale),original.CGImage);
    CGImageRef shrunken = CGBitmapContextCreateImage(context);
    UIImage *final = [UIImage imageWithCGImage:shrunken];
    CGContextRelease(context);
    CGImageRelease(shrunken);   
    return final;}

-(void)updateDisplay {
    imageView.image = image;
    imageView.hidden = NO;}

- (void)getMediaFromSource:(UIImagePickerControllerSourceType)sourceType {

     NSArray *mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:sourceType];
    if ([UIImagePickerController isSourceTypeAvailable:sourceType] && [mediaTypes count] > 0) {
        NSArray *mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:sourceType];
        UIImagePickerController *picker =[[UIImagePickerController alloc] init];
        picker.mediaTypes = mediaTypes;
        picker.delegate = self;
        picker.allowsEditing = YES;
        picker.sourceType = sourceType;
        [self presentModalViewController:picker animated:YES];
    } else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error accessing media" message:@"Device doesn’t support that media source." 
                              delegate:nil cancelButtonTitle:@"Drat!" otherButtonTitles:nil];
        [alert show];}}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:29:03.063

问题出在 appdelegate.m

```
#import "HHKAppDelegate.h"
#import "HHKMenuViewController.h"

@implementation HHKAppDelegate

@synthesize window = _window;
@synthesize navigationController = _navigationController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:      (NSDictionary *)launchOptions
{
[[UIApplication sharedApplication] setStatusBarHidden:YES   withAnimation:UIStatusBarAnimationFade];
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
HHKMenuViewController *menuViewController = [[HHKMenuViewController alloc]   initWithNibName:@"HHKMenuViewController" bundle:nil];
self.navigationController = [[UINavigationController alloc]   initWithRootViewController:menuViewController];
self.window.rootViewController = self.navigationController;
navigationController.navigationBarHidden = YES;
[self.window makeKeyAndVisible];
return YES;
} 
```

# java - JSF 2 中的复选框已选中

> ID：10462116
> 
> 赞同：2
> 
> 时间：2012-05-05T13:04:05.073
> 
> 标签：java, jsf-2

我有一个 JSF 模板 (xhtml) 和一些复选框。但随后页面加载我需要检查复选框。这是我的代码：

```
<h:selectManyCheckbox
                  layout="pageDirection"
                  required="true"
                  value="#{myBean.values}">
<f:selectItem itemValue="v1" itemLabel="l1"/>
<f:selectItem itemValue="v2" itemLabel="l2"/>
<f:selectItem itemValue="v3" itemLabel="l3"/>
<f:selectItem itemValue="v4" itemLabel="l4"/>
<f:selectItem itemValue="v5" itemLabel="l5"/>
</h:selectManyCheckbox> 
```

如何在页面加载时选中复选框？我可以在 JSF 中找到任何指定要检查的复选框的标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:21:40.890

在您的代码中，`#{myBean.values}`保存选定的值（在本例中为选中的复选框）。所以你必须确保`myBean.values`包含你想要查看的`itemValue`项目。`selectItem`例如：

```
<h:selectManyCheckbox value="#{myBean.values}">
    <f:selectItem itemValue="v1" itemLabel="l1"/>
    <f:selectItem itemValue="v2" itemLabel="l2"/>
</h:selectManyCheckbox> 
```

在上面，填充`myBean.values`并`"v1"`显示`"v2"`它们已选中。

# couchdb - 防止移动 Safari 在 _changes 侦听器处于活动状态时显示加载指示器

> ID：10462119
> 
> 赞同：1
> 
> 时间：2012-05-05T13:04:11.740
> 
> 标签：couchdb, long-polling, couchapp, kanso

## 设置

页面加载完成后，我正在向`_changes`couchdb`longpoll`提要添加一个侦听器（以防万一，我在[Kanso](http://kan.so)模块中使用[此](https://github.com/kanso/db/blob/master/db.js#L831)功能）。 `db`

添加侦听器后，移动版 Safari 的加载指示器开始旋转，并且在移除侦听器之前不会停止。

## 问题

这使用户认为该应用程序在不断地下载某些东西。

## 问题

有没有办法让移动 Safari 的加载指示器仅在收到更改通知时才旋转？

如果没有，有没有办法完全防止移动 Safari 的加载指示器旋转？

# android - Android Horizo ntalScrollView 禁用滚动

> ID：10462126
> 
> 赞同：7
> 
> 时间：2012-05-05T13:05:14.797
> 
> 标签：android

我有作为孩子的长视图的 Horizo​​ntalScrollView，所以 Horizo​​ntalScrollView 是可滚动的并且可以水平滚动它的孩子。有没有可能阻止它？我不希望用户能够滚动视图。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-07T11:25:42.953

我的建议是使用**OnTouchListener**，例如：

在`onCreate`方法

* * *

```
HorziontalScrollView scrollView= (HorizontalScrollView)findViewById(R.id.scrollView);
scrollView.setOnTouchListener(new OnTouch()); 
```

* * *

并有一堂课：

* * *

```
private class OnTouch implements OnTouchListener
{
    @Override
    public boolean onTouch(View v, MotionEvent event) {
    return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T15:48:56.583

好的，我找到了实现它的方法。

只需要创建我自己的 Horizo​​ntalScrollView 并覆盖 onTouchEvent 方法

```
public class MyHSV extends HorizontalScrollView {

    public MyHSV(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(context);
    }

    public MyHSV(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }

    public MyHSV(Context context) {
        super(context);
        init(context);
    }

    void init(Context context) {
        // remove the fading as the HSV looks better without it
        setHorizontalFadingEdgeEnabled(false);
        setVerticalFadingEdgeEnabled(false);
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        // Do not allow touch events.
        return false;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        // Do not allow touch events.
        return false;
    }

} 
```

然后在xml文件中

```
<pathToClass.MyHSV xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:scrollbars="none"
    android:id="@+id/myHSV>

</pathToClass.MyHSV> 
```

# javascript - 如何使用第三个子类获取父 div 值？

> ID：10462128
> 
> 赞同：0
> 
> 时间：2012-05-05T13:05:22.133
> 
> 标签：javascript, jquery, css-selectors, parents

```
<div class="one">
    <div class="two">
        <div class="three">success</div>
    </div>
</div> 
```

例如，如果我单击第三个`div`， `$(.three).click(function (){ });` 我需要父类`div`( `.one`)。我怎样才能在 jQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:09:45.237

尝试使用：`$('.three').parents('.one')`
或使用`$('.three').closest('.one')`

来自文档：http: [//api.jquery.com/parents/](http://api.jquery.com/parents/)
来自文档：http: [//api.jquery.com/closest/](http://api.jquery.com/closest/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:06:44.230

您可以尝试使用`.parent().parent()`，例如`$(".three").parent().parent().anything(...)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T13:09:52.657

一般的解决方案是：

```
$(this).closest(".outer"); 
```

所以：

```
$(".anyDepth").click(function () { 
    $(this).closest(".outermostDiv").addClass("foo");
}); 
```

# c# - 按钮点击事件自动触发

> ID：10462129
> 
> 赞同：0
> 
> 时间：2012-05-05T13:05:23.243
> 
> 标签：c#, asp.net

我的情况是这样的，我的用户控件中有一个 asp 按钮

```
 <asp:Button ID="btnSubmit"
        Text="Send Notification" class="submit-btn01"   onclick="btnSubmit_Click1" runat="server" /> 
```

在我的浏览器中，当我刷新页面时，按钮单击事件会自动发生。我无法弄清楚这有什么问题..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:25:40.703

你的问题有点含糊。听起来您有以下情况之一：

情景一：

1.  通过 URL 加载页面
2.  点击提交，刷新页面返回。
3.  在页面上按 F5，您会收到一条消息，询问您是否要重新提交表单，并且再次发生“提交”按钮操作

场景 B：

1.  通过 URL 加载页面
2.  在页面上按 F5 并发生提交按钮操作

*对于场景 A；*

如果你想避免重新回发，你应该在 btnSubmit_Click1 事件处理程序中*对当前页面*执行 Response.Redirect() ，如在此处更详细地提到： [asp.net prevent form submit两次](https://stackoverflow.com/questions/2526568/asp-net-prevent-form-submission-twice)

*对于场景 B；*

1.  您是否在页面中执行任何 javascript 会导致它在每个页面加载时表现不同？
2.  您是否通过来自不同页面的回发访问该页面？
3.  您是否在代码隐藏端的页面生命周期中做任何奇怪/花哨的事情？例如 CreateChildControls？

...如果是场景 B，并且答案是否定的，那么我很想知道问题的最终原因是什么，因为我无法想象为什么页面在加载和重新加载之间的行为会有所不同.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:35:40.230

如果是 POST，刷新可能会重复执行的*最后一个操作。*
由于最后一个操作是使用正在重放的按钮提交表单。

# javascript - javascript骰子游戏 - 图像不会改变

> ID：10462132
> 
> 赞同：1
> 
> 时间：2012-05-05T13:05:49.073
> 
> 标签：javascript

在为骰子游戏调用 math.random 图像时遇到一个小问题。当我单击滚动按钮时，图像不会改变。我将图像保存在 .html 文件所在的位置。任何帮助深表感谢！

掷骰子

```
<script type="text/javascript">
    var dieImage;

    function start()
    {
        var button = document.getElementById(rollButton);
        button.addEventListener("click", rollDice, false);
        dieImage = document.getElementById("die1");
    }

    function rollDice()
    {
    setImage(dieImage);
    }

    function setImage(dieImg)
    {
    var dieValue = Math.floor(1 + Math.random() * 6);
    dieImg.setAttribute("src", "die" + dieValue + ".jpg");
    dieImg.setAttribute("alt", "dieImg with" + dieValue + "spots");

    if (dieValue == 6)
        {
        document.getElementById("sometext").innerHTML = "You Win!";
        }
    else
        {
        document.getElementById("sometext").innerHTML = "Roll Again";
        }

    }

    window.addEventListener("load", start, false);
</script>
</head>
<body>
    <form action = "#">
        <input id = "rollButton" type = "button" value = "Roll Dice">
    </form>
    <li>
        <img id = "die1" src = "die1.jpg" alt = "blankImage">
    </li>
    <div id = "sometext">Roll for a 6!</div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:12:26.033

上面代码的唯一问题是这一行：

```
var button = document.getElementById(rollButton); 
```

应该读

```
var button = document.getElementById("rollButton"); 
```

上述更改确实会导致功能正常工作，并且图像会被更新。假设您的所有图像实际上都在正确的位置，您会看到它们发生变化。

作为鼓励，我建议您在 Firefox 中编写代码，并获得 Firebug。通过这些工具，您可以使用 Firebug 控制台和/或 Firefox 的 Web 开发人员错误控制台。这些对于快速解决此类问题非常有用。

# sas - sgplot 中的 SAS 时间序列数据 - x 轴

> ID：10462147
> 
> 赞同：1
> 
> 时间：2012-05-05T13:07:15.907
> 
> 标签：sas, time-series

我试图绘制的数据是一个月内温度与日期时间（SAS 日期时间格式）的关系。我希望 x 轴上的间隔为一小时或一天。你知道在我在下面的代码中放置问号的地方放什么吗？

谢谢！

```
%macro makeplot;
proc sgplot data = temp.heating;
where dwelling = 8 & room = 1;
series x = datetime y = temp;
*xaxis values = (&start_date_time to &end_date_time by ?);
run;

%mend makeplot;
%makeplot; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:06:18.683

SAS datetimes 存储秒数，因此 86400 将给您天数，而 3600 将给您小时数。

# ruby-on-rails - Ruby/Rails .first .last .current?

> ID：10462150
> 
> 赞同：0
> 
> 时间：2012-05-05T13:07:31.070
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Ruby/Rails 中是否有 .current 之类的东西？

我的 Release 模型中有以下内容可以接受轨道作为嵌套属性。我正在使用 :after_add 通过连接表手动设置 has_many 中的位置列。理想情况下，我希望从我的表单的 fields_for 部分发送的位置属性或从保存时轨道表/模型中设置的值复制来填充它。

我可以让它设置所有条目的第一个或最后一个位置，但不能设置与该轨道相关的当前位置？

理想情况下，我需要**releases_tracks.each { |t| t.position = self.tracks.last.position } 类似于 release_tracks.each** { **|t| t.position = self.tracks.current.position }**

```
has_many :releases_tracks, :dependent => :destroy, :after_add => :position_track
has_many :tracks, :through => :releases_tracks, :order => "position"

accepts_nested_attributes_for :tracks, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => :true
accepts_nested_attributes_for :releases_tracks

def position_track(track) 
  releases_tracks.each { |t| t.position = self.tracks.last.position }
end 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:04:11.593

不能肯定地说我是否正确理解了你，但据我所知，`releases_tracks.each { |t| t.position = t.track.position }`应该可以解决你的问题。

`belongs_to`-`has_many`关系有两种工作方式，因此对于受这种关系约束的两个模型 «Owner» 和 «Belonging»`Owner.first.belonging`和`Belonging.last.owner`查询都是有效的。

# javascript - 用于拉伸 div 的 JavaScript 库

> ID：10462155
> 
> 赞同：0
> 
> 时间：2012-05-05T13:07:56.017
> 
> 标签：javascript

我需要建议。我需要制作一个富文本编辑器之类的东西，但只适用于 div 标签。用户可以移动 div，通过拖放更改两个 div 的位置（添加重力），用鼠标指针拉伸 div 的宽度和高度。所有可以编辑的 div 都在一个父 div 中。我的问题是，因为我是 JavaScript 新手，哪个库最适合这类事情，有人对某些库做过类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:21:56.817

jQuery UI 具有此[`resizable`](http://jqueryui.com/demos/resizable/)功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:24:51.533

我认为结合方法是个好主意。例如，您可以使用 hte HTML5 功能 (draggable=true)，结合纯 JavaScript 和 CSS3 (resize: both;)。

看看[这篇](http://www.useragentman.com/blog/2010/01/10/cross-browser-html5-drag-and-drop/)关于拖放的文章，以及[这个CSS3 调整大小的](http://www.css3.info/preview/resize/) *预览*。

# ios - iOS：如何指向 UITableView 上的特定控件

> ID：10462156
> 
> 赞同：0
> 
> 时间：2012-05-05T13:07:57.630
> 
> 标签：ios, uitableview

我在 UITableViewCell 上放置了 UISwitch、UILabel 和几个按钮，现在我需要它们在 UISwitch 更改状态时做出正确反应（显示/隐藏）。

我的问题是，上面提到的 UILabel 和按钮它们隐藏在随机单元格上，而不是在放置 UISwitch 的这个特定单元格中。

我走了这么远：

```
-(void)hideQualityBtn:(id)sender
{
if(sender.tag==9001)
{
    UITableViewCell *cell=((UITableViewCell*)[sender superview]);
   // cell.control.....hidden=YES;
}
} 
```

非常感谢您的帮助，在此先感谢您。

编辑：

在 cellForRowAtIndexPath 中

```
self.switchView = [[UISwitch alloc] initWithFrame:CGRectMake(7, 8, 79, 27)];
[switchView addTarget:self action:@selector(setItem:) forControlEvents:UIControlEventValueChanged];
[switchView setTag:9001];
[cell addSubview:switchView];
[cell setIndentationWidth:45];
[cell setIndentationLevel:1]; 
```

setItem 方法：

```
-(void)setItem:(UISwitch*)sender
{
int n;
UITableViewCell *cell;
// so i'm getting item ID
if(sender.tag==9001)
{
    cell=((UITableViewCell*)[sender superview]);
    n=([self.tableView indexPathForCell:cell].row);
}
item=[self.arr objectAtIndex:n];

NSDate *today=[NSDate date];
NSDateFormatter *formatter =[[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterMediumStyle];
NSString *now =[formatter stringFromDate:today];

if(sender.on)
{
    DBAccess *access=[[DBAccess alloc]init];
    [access setItemON:item.itemID date:now];
    qualityBtn.hidden=NO;
    [qualityBtn setTitleColor:[UIColor blackColor] forState:normal];
    [qualityBtn setTitle:@"UNDEF" forState:normal];
}
else 
{
    DBAccess *access=[[DBAccess alloc]init];
    [access setItemOFF:item.itemID];
}
} 
```

我的特殊问题是如何指向控制位于特定单元格中的那个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:59:25.243

您需要在 tableview:cellForRowAtIndexPath: 的实现中设置 UITableViewCell 并保留对 UISwitch 的引用（可能在属性中），以便在发生有趣事件时可以访问它。

# javafx-2 - 在 Group 中查找 Shape 的场景位置

> ID：10462162
> 
> 赞同：0
> 
> 时间：2012-05-05T13:08:41.910
> 
> 标签：javafx-2

我有一组这样的形状：

```
Group g = new Group();
Rectangle r = new Rectangle( 100, 100, 50, 50 );
Circle c = new Circle( 125, 125, 10 );
g.getChildren().addAll( r, c ); 
```

和一条不属于该组的线，它在圆的中心结束。

```
Line l = new Line( 0, 0, 125, 125 ); 
```

我已经做到了，以便可以根据 Ensemble 中的鼠标事件演示拖动组（只有几个鼠标侦听器会更新 x 和 y 转换属性）。我想要的是线的末端跟随圆的中心。这意味着更新该行的 endX 和 endY 属性。

我遇到的问题是 endX 和 endY 在场景本地空间中（我认为）。当我在屏幕上拖动组时，圆圈的 centerX 和 centerY 属性不会更新。我似乎得到的只是组中 translationX 和 translationY 的变化。我不知道在拖动操作之后（和期间）如何找到新的圆心。

非常感激地收到了指点，因为这让我把头发扯掉了！

我想出的最佳解决方案是在组上放置一个翻译侦听器，获取圆的中心位置，然后添加组的翻译，但结果并不是很好，行尾大致遵循绕着圈子跳来跳去，飘走了。像这样的东西：

```
translateXProperty().addListener( new ChangeListener<Number>() {
    public void changed(ObservableValue<? extends Number> ov, Number oldValue, Number newValue) {
        Connector c = getInputConnectors().get( 0 );
        double x = circle.getCenterX();
        double y = circle.getCenterY();
        line.setEndX( x + newValue.doubleValue());
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:49:33.403

使用绑定：

```
 l.endXProperty().bind(g.translateXProperty().add(c.centerXProperty()));
    l.endYProperty().bind(g.translateYProperty().add(c.centerYProperty())); 
```

PS：您的方式也可以，但请注意您应该同时拥有 x 和 y 属性的侦听器。

# c# - WPF 和 RibbonControlsLibrary 甚至不使用绑定就引发 BindingExpression 路径错误？

> ID：10462167
> 
> 赞同：7
> 
> 时间：2012-05-05T13:09:07.123
> 
> 标签：c#, wpf, xaml, data-binding, ribboncontrolslibrary

我有一个关于 WPF 和 RibbonControlsLibrary 的问题。我试图自己找到这个错误的根源，但我似乎无法找到它。

我正在使用 Microsoft 的[WPF RibbonControlsLibrary](http://msdn.microsoft.com/en-us/library/ff799534.aspx)。使用 RibbonToggleButton 时，即使我的 XAML 代码中没有任何绑定，我也会收到以下错误。

```
<r:RibbonWindow x:Class="WpfApplication.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="300" Width="300"
    xmlns:r="clr-namespace:Microsoft.Windows.Controls.Ribbon;assembly=RibbonControlsLibrary">
    <r:Ribbon>
        <r:RibbonTab Header="Admin" >
            <r:RibbonMenuButton/>
        </r:RibbonTab>
    </r:Ribbon>
</r:RibbonWindow> 
```

> System.Windows.Data 错误：39：BindingExpression 路径错误：在“对象”“RibbonMenuButton”（名称=“”）上找不到“IsChecked”属性。绑定表达式：路径=IsChecked；DataItem='RibbonMenuButton' (Name=''); 目标元素是'RibbonToggleButton'（名称='PART_ToggleButton'）；目标属性是“NoTarget”（类型“对象”）

我对错误的最后一部分有点困惑：`target element is RibbonToggleButton (Name='PART_ToggleButton'); target property is 'NoTarget' (type 'Object').`我的 XAML 代码中根本没有 RibbonToggleButton？

其他人是否看到了这种行为并且能够将我指向正确的方向以摆脱此错误输出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T13:35:15.517

我在任何ribbontogglebutton 的VS 输出中都看到了该错误。我试图解决它，但没有运气。不幸的是，我想出的唯一解决方法是它是您可以忽略的错误之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:28:53.910

查看 MSDN 上的[RibbonMenuButton 类文档](http://msdn.microsoft.com/en-us/library/microsoft.windows.controls.ribbon.ribbonmenubutton.aspx)，我发现它使用 PART_ToggleButton 作为 TemplatePart 属性。[本文](http://www.paulstovell.com/wpf-part-names)介绍了 TemplateParts 的工作原理。由于它已融入控件，因此它可能是预期的行为。

**更新：**

看起来 WPF 团队已在[此处](http://blogs.msdn.com/b/wpf/archive/2010/10/21/wpf-ribbon-october-2010-update-details.aspx)的评论中收到此问题的通知。也许它将在下一个版本中修复。

# php - Interspire 购物车 PHP 错误

> ID：10462173
> 
> 赞同：-3
> 
> 时间：2012-05-05T13:09:36.227
> 
> 标签：php

我在上传产品图片时使用的是 interspire 购物车 3.5 版，出现以下错误未定义索引：UPLOADHANDLER_ERR_MOVE_NOT_WRITABLE 请解释如何删除此错误 ISC_LOG->HandlePHPErrors on line no 138

/lib/uploadhandler.php ISC_LOG->HandlePHPErrors 在第 138 行

```
/admin/includes/classes/class.product.image.php UploadHandlerFile->moveAs 
```

在第 99 行

```
/includes/classes/class.product.image.php   ISC_ADMIN_PRODUCT_IMAGE->remoteNewImageUpload on line 24
/includes/classes/class.remote.php  ISC_ADMIN_PRODUCT_IMAGE->routeRemoteRequest on line 29
/admin/remote.php   ISC_ADMIN_REMOTE->HandleToDo on line 18

 <?php

if (!defined('UPLOAD_ERR_EXTENSION')) {
    // introduced in 5.1.2
    define('UPLOAD_ERR_EXTENSION', 8);
}

class UploadHandlerException extends Exception { }
class UploadHandlerFileException extends UploadHandlerException { }

class UploadHandlerProcessException extends UploadHandlerException { }
class UploadHandlerProcessPostSizeException extends UploadHandlerProcessException { }
class UploadHandlerProcessNoInputException extends UploadHandlerProcessException { }

class UploadHandlerFileMoveException extends UploadHandlerFileException { }
class UploadHandlerFileMoveExistsException extends UploadHandlerFileMoveException { }
class UploadHandlerFileMoveNotWritableException extends UploadHandlerFileMoveException { }

/**
* Class for storing information about an uploaded file. Returned as a result of the various 'get' file methods in the UploadHandler class.
*
*/
class UploadHandlerFile {

    /**
     * Name of upload field in HTML form
     *
     * @var string
     */
    public $fieldName;

    /**
     * Name of uploaded file from client system
     *
     * @var string
     */
    public $name;

    /**
     * MIME type of uploaded file
     *
     * @var string
     */
    public $type;

    /**
     * Full path and filename of temporary uploaded file
     *
     * @var string
     */
    public $tmp_name;

    /**
     * Error code of uploaded file, if any
     *
     * @var int
     */
    public $error;

    /**
     * Size of uploaded file, in bytes
     *
     * @var int
     */
    public $size;

    /**
     * Indicates if the file has been moved out of the temp storage.
     *
     * @var bool
     */
    private $moved = false;

    /**
    *
    * @param string $fieldName Name of uploaded field in HTML form
    * @param string $name Name of uploaded file from client system
    * @param string $type MIME type of uploaded file
    * @param string $tmp_name Full path and filename of temporary uploaded file
    * @param int $error Error code of uploaded file, if any
    * @param int $size Size of uploaded file, in bytes
    * @return UploadHandlerFile
    */
    public function __construct ($fieldName, $name, $type, $tmp_name, $error, $size)
    {
        $this->fieldName = $fieldName;
        $this->name = $name;
        $this->type = $type;
        $this->tmp_name = $tmp_name;
        $this->error = $error;
        $this->size = $size;
    }

    /**
     * Attempts to moves this uploaded file to the given destination folder, automatically using the client-provided filename.
     *
     * @param string $destination Folder to move the file to
     * @param bool $overwrite Optional. Default true. If true, any existing destination file will be overwritten. If false, this will throw UploadHandlerFileMoveExistsException if the destination file exists.
     * @return bool Returns true on success, otherwise false.
     * @throws UploadHandlerFileMoveExistsException If the destination file exists and $overwrite is false.
     */
    public function move ($destination, $overwrite = true)
    {
        //  remove trailing slashes in the destination folder
        $destination = rtrim($destination, '\/');

        return $this->moveAs($destination . '/' . $this->name);
    }

    /**
     * Attempted to move this uploaded file to the given destination folder with the given filename
     *
     * @param $destination Folder to move the file to
     * @param bool $overwrite Optional. Default true. If true, any existing destination file will be overwritten. If false, this will throw UploadHandlerFileMoveExistsException if the destination file exists.
     * @return bool Returns true if the file was moved otherwise false if the file was already moved or if is_uploaded_file check returns false. If a move was attempted but failed an exception will be thrown.
     * @throws UploadHandlerFileMoveExistsException If the destination file exists and $overwrite is false.
     * @throws UploadHandlerFileMoveNotWritableException If the destination file exists and is not writable.
     */
    public function moveAs ($destination, $overwrite = true)
    {
        if ($this->moved || !is_uploaded_file($this->tmp_name)) {
            return false;
        }

        if (file_exists($destination)) {
            if (!$overwrite) {
                throw new UploadHandlerFileMoveExistsException(sprintf(UploadHandler::$i18n['UPLOADHANDLER_ERR_MOVE_EXISTS'], $this->tmp_name, $destination));
            }

            if (!is_writable($destination)) {
                throw new UploadHandlerFileMoveNotWritableException(sprintf(UploadHandler::$i18n['UPLOADHANDLER_ERR_MOVE_NOT_WRITABLE'], $this->tmp_name, $destination));
            }
        }

        $result = @move_uploaded_file($this->tmp_name, $destination);
        if (!$result) {
            // checks are performed above to avoid this but move_uploaded_file can still fail since the calls are not atomic
            throw new UploadHandlerFileMoveNotWritableException(sprintf(UploadHandler::$i18n['UPLOADHANDLER_ERR_MOVE_NOT_WRITABLE'], $this->tmp_name, $destination));
        }

        $this->moved = true;
        return true;
    }

    /**
     * Returns the extension of the uploaded file based on the client-side filename. Files with no extensions will return a blank string, files such as ".htaccess" will return "htaccess".
     *
     * @return string
     */
    public function getExtension ()
    {
        //  reverse the string, find the text before the first (formerly last) dot and return it
        $reversed = strrev($this->name);
        $dot = strpos($reversed, '.', 0);
        if ($dot === false || $dot === 0) {
            //  no dot or dot is at end of filename
            return '';
        }

        //  reverse the extension and return it
        return strrev(substr($reversed, 0, $dot));
    }

    /**
     * Determines if the file was uploaded OK according to the error code.
     *
     * @return bool
     */
    public function getSuccess ()
    {
        return ($this->error === 0);
    }

    /**
     *
     *
     * @return string
     */
    public function getErrorMessage ()
    {
        $messages = array(
            UPLOAD_ERR_INI_SIZE     => 'UPLOAD_ERR_INI_SIZE',
            UPLOAD_ERR_FORM_SIZE    => 'UPLOAD_ERR_FORM_SIZE',
            UPLOAD_ERR_PARTIAL      => 'UPLOAD_ERR_PARTIAL',
            UPLOAD_ERR_NO_FILE      => 'UPLOAD_ERR_NO_FILE',
            UPLOAD_ERR_NO_TMP_DIR   => 'UPLOAD_ERR_NO_TMP_DIR',
            UPLOAD_ERR_CANT_WRITE   => 'UPLOAD_ERR_CANT_WRITE',
            UPLOAD_ERR_EXTENSION    => 'UPLOAD_ERR_EXTENSION',
        );

        if (!isset($messages[$this->error])) {
            return '';
        }

        return sprintf(UploadHandler::$i18n[$messages[$this->error]], $this->fieldName, $this->type, $this->tmp_name, $this->error, $this->size, $this->getExtension());
    }
}

/**
* Generic file upload handler class with temporary file management, exception throwing and language-based error information
*
*/
class UploadHandler {

    /**
     * Whether or not uploaded files have been processed yet.
     *
     * @var bool
     */
    protected static $_processed = false;

    /**
     * Default language text that can be changed by the app using this lib.
     *
     * @var array
     */
    public static $i18n;

    /**
     * Content length specified in the POST request.
     *
     * @var int
     */
    public static $contentLength;

    /**
     * Max post size specified in php.ini stored as a number in bytes
     *
     * @var int
     */
    public static $maxPostSize;

    /**
     * Max post size specified in php.ini stored as a number in bytes
     *
     * @var int
     */
    public static $uploadMaxFilesize;

    /**
     * Max uploadable file size based on max POST size and max upload file size
     *
     * @var int
     */
    public static $maxUploadSize;

    /**
     * Storage for data about files that have been uploaded. Array will contain a set of UploadHandlerFile instances.
     *
     * @var array
     */
    public static $files;

    /**
     * Takes a php.ini-like bytes-size string such as 2M and converts it to a number. G, M and K each represent a unit of 1024 bytes: http://php.net/ini_get
     *
     * @param string $val The value to convert
     * @return int The result in bytes
     */
    public static function iniBytes ($val)
    {
        $val = trim($val);
        $scale = strtolower($val[strlen($val) - 1]);

        $val = intval($val);
        switch ($scale) {
            case 'g':
                $val *= 1024;

            case 'm':
                $val *= 1024;

            case 'k':
                $val *= 1024;
        }

        return $val;
    }

    /**
     * Processes server and $_FILE info relating to uploads to produce usable info. Assigns all gathered data to class variables which are accessible via public methods.
     *
     * @return void
     * @throws UploadHandlerProcessPostSizeException If the posted data size exceeds the maximum post size defined by php configuration
     * @throws UploadHandlerProcessNoInputException If no files were uploaded
     */
    public static function processUploads ()
    {
        if (self::$_processed) {
            return;
        }

        self::$_processed = true;

        self::$files = array();

        if (self::$contentLength >= self::$maxPostSize) {
            //  post length exceeds maximum post length ini directive - impossible for php to parse uploaded files because $_FILES is empty
            throw new UploadHandlerProcessPostSizeException(sprintf(self::$i18n['UPLOADHANDLER_ERR_PROCESS_POST_SIZE'], self::$contentLength, self::$maxPostSize));
        }

        if (empty($_FILES)) {
            //  no files uploaded
            throw new UploadHandlerProcessNoInputException(self::$i18n['UPLOADHANDLER_ERR_PROCESS_NO_INPUT']);
        }

        foreach ($_FILES as $fieldName => $field) {

            if (is_array($field['name'])) {
                //  input field that uses [] in it's name

                self::$files[$fieldName] = array();

                foreach ($field['name'] as $index => $ignoreThisValue) {
                    $name = $field['name'][$index];
                    $type = $field['type'][$index];
                    $tmp_name = $field['tmp_name'][$index];
                    $error = intval($field['error'][$index]);
                    $size = intval($field['size'][$index]);

                    $file = new UploadHandlerFile($fieldName, $name, $type, $tmp_name, $error, $size);

                    self::$files[$fieldName][] = $file;
                }

            } else {
                //  single input field
                $name = $field['name'];
                $type = $field['type'];
                $tmp_name = $field['tmp_name'];
                $error = intval($field['error']);
                $size = intval($field['size']);

                $file = new UploadHandlerFile($fieldName, $name, $type, $tmp_name, $error, $size);

                self::$files[$fieldName] = array($file);
            }
        }
    }

    /**
     * Returns a flat list of all uploaded files; whether successful or not
     *
     * @return array
     */
    public static function getAllFiles ()
    {
        self::processUploads();

        $return = array();
        foreach (self::$files as $field => $files) {
            foreach ($files as $file) {
                $return[] = $file;
            }
        }
        return $return;
    }

    /**
     * Returns only a list of files that were uploaded successfully
     *
     * @return array
     */
    public static function getUploadedFiles ()
    {
        self::processUploads();

        $return = array();
        foreach (self::$files as $field => $files) {
            foreach ($files as $file) {
                if ($file->getSuccess()) {
                    $return[] = $file;
                }
            }
        }
        return $return;
    }

    /**
     * Returns only a list of files that were not uploaded successfully
     *
     * @param bool $includeEmpty Optional. Default false. Set to true to include empty file upload fields as errors.
     * @return array
     */
    public static function getErrorFiles ($includeEmpty = false)
    {
        self::processUploads();

        $return = array();
        foreach (self::$files as $field => $files) {
            foreach ($files as $file) {
                if (!$includeEmpty && $file->error == UPLOAD_ERR_NO_FILE) {
                    continue;
                }

                if (!$file->getSuccess()) {
                    $return[] = $file;
                }
            }
        }
        return $return;
    }
}

//  statically set default language vars - an app that needs to customize messages can do so after including this class (only needs to happen once)

UploadHandler::$i18n = array(
    'UPLOADHANDLER_ERR_PROCESS_POST_SIZE'   => 'POST size of %1$d bytes exceeds the limit set in php.ini#post_max_size of %2$d bytes.',
    'UPLOADHANDLER_ERR_PROCESS_NO_INPUT'    => 'No file input fields were detected in the POST request.',
    'UPLOADHANDLER_ERR_MOVE_EXISTS'         => 'Could not move uploaded file "%1$s" to "%2$s" as the destination file already exists and the overwrite option was not set.',
    'UPLOAD_ERR_INI_SIZE'                   => 'The uploaded file exceeds the upload_max_filesize directive in php.ini.',
    'UPLOAD_ERR_FORM_SIZE'                  => 'The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form.',
    'UPLOAD_ERR_PARTIAL'                    => 'The uploaded file was only partially uploaded.',
    'UPLOAD_ERR_NO_FILE'                    => 'No file was uploaded.',
    'UPLOAD_ERR_NO_TMP_DIR'                 => 'Missing a temporary folder.',
    'UPLOAD_ERR_CANT_WRITE'                 => 'Failed to write file to disk.',
    'UPLOAD_ERR_EXTENSION'                  => 'File upload stopped by extension.',
);

//  statically set some values that do not change throughout the lifetime of a request

UploadHandler::$contentLength = (int)@$_SERVER['CONTENT_LENGTH'];
UploadHandler::$maxPostSize = UploadHandler::iniBytes(ini_get('post_max_size'));

// store this for informational purposes only - php upload support will internally deny uploads which are over this size but client-side code can use this to advise of file size limits
UploadHandler::$uploadMaxFilesize = UploadHandler::iniBytes(ini_get('upload_max_filesize'));

// the lowest of both maxPostSize and uploadMaxFile size determines the maximum size of a single file upload (may not be accurate to the byte since there's some POST overhead if max POST size happens to be smaller than max file size)
UploadHandler::$maxUploadSize = min(UploadHandler::$uploadMaxFilesize, UploadHandler::$maxPostSize); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:13:14.700

尝试用以下代码替换它：

```
<?php

if (!defined('UPLOAD_ERR_EXTENSION')) {
    // introduced in 5.1.2
    define('UPLOAD_ERR_EXTENSION', 8);
}

class UploadHandlerException extends Exception { }
class UploadHandlerFileException extends UploadHandlerException { }

class UploadHandlerProcessException extends UploadHandlerException { }
class UploadHandlerProcessPostSizeException extends UploadHandlerProcessException { }
class UploadHandlerProcessNoInputException extends UploadHandlerProcessException { }

class UploadHandlerFileMoveException extends UploadHandlerFileException { }
class UploadHandlerFileMoveExistsException extends UploadHandlerFileMoveException { }
class UploadHandlerFileMoveNotWritableException extends UploadHandlerFileMoveException { }

/**
* Class for storing information about an uploaded file. Returned as a result of the various 'get' file methods in the UploadHandler class.
*
*/
class UploadHandlerFile {

    /**
     * Name of upload field in HTML form
     *
     * @var string
     */
    public $fieldName;

    /**
     * Name of uploaded file from client system
     *
     * @var string
     */
    public $name;

    /**
     * MIME type of uploaded file
     *
     * @var string
     */
    public $type;

    /**
     * Full path and filename of temporary uploaded file
     *
     * @var string
     */
    public $tmp_name;

    /**
     * Error code of uploaded file, if any
     *
     * @var int
     */
    public $error;

    /**
     * Size of uploaded file, in bytes
     *
     * @var int
     */
    public $size;

    /**
     * Indicates if the file has been moved out of the temp storage.
     *
     * @var bool
     */
    private $moved = false;

    /**
    *
    * @param string $fieldName Name of uploaded field in HTML form
    * @param string $name Name of uploaded file from client system
    * @param string $type MIME type of uploaded file
    * @param string $tmp_name Full path and filename of temporary uploaded file
    * @param int $error Error code of uploaded file, if any
    * @param int $size Size of uploaded file, in bytes
    * @return UploadHandlerFile
    */
    public function __construct ($fieldName, $name, $type, $tmp_name, $error, $size)
    {
        $this->fieldName = $fieldName;
        $this->name = $name;
        $this->type = $type;
        $this->tmp_name = $tmp_name;
        $this->error = $error;
        $this->size = $size;
    }

    /**
     * Attempts to moves this uploaded file to the given destination folder, automatically using the client-provided filename.
     *
     * @param string $destination Folder to move the file to
     * @param bool $overwrite Optional. Default true. If true, any existing destination file will be overwritten. If false, this will throw UploadHandlerFileMoveExistsException if the destination file exists.
     * @return bool Returns true on success, otherwise false.
     * @throws UploadHandlerFileMoveExistsException If the destination file exists and $overwrite is false.
     */
    public function move ($destination, $overwrite = true)
    {
        //  remove trailing slashes in the destination folder
        $destination = rtrim($destination, '\/');

        return $this->moveAs($destination . '/' . $this->name);
    }

    /**
     * Attempted to move this uploaded file to the given destination folder with the given filename
     *
     * @param $destination Folder to move the file to
     * @param bool $overwrite Optional. Default true. If true, any existing destination file will be overwritten. If false, this will throw UploadHandlerFileMoveExistsException if the destination file exists.
     * @return bool Returns true if the file was moved otherwise false if the file was already moved or if is_uploaded_file check returns false. If a move was attempted but failed an exception will be thrown.
     * @throws UploadHandlerFileMoveExistsException If the destination file exists and $overwrite is false.
     * @throws UploadHandlerFileMoveNotWritableException If the destination file exists and is not writable.
     */
    public function moveAs ($destination, $overwrite = true)
    {
        if ($this->moved || !is_uploaded_file($this->tmp_name)) {
            return false;
        }

        if (file_exists($destination)) {
            if (!$overwrite) {
                throw new UploadHandlerFileMoveExistsException(sprintf(UploadHandler::$i18n['UPLOADHANDLER_ERR_MOVE_EXISTS'], $this->tmp_name, $destination));
            }

            if (!is_writable($destination)) {
                throw new UploadHandlerFileMoveNotWritableException(sprintf(UploadHandler::$i18n['UPLOADHANDLER_ERR_MOVE_NOT_WRITABLE'], $this->tmp_name, $destination));
            }
        }

        $result = @move_uploaded_file($this->tmp_name, $destination);
        if (!$result) {
            // checks are performed above to avoid this but move_uploaded_file can still fail since the calls are not atomic
            throw new UploadHandlerFileMoveNotWritableException(sprintf(UploadHandler::$i18n['UPLOADHANDLER_ERR_MOVE_NOT_WRITABLE'], $this->tmp_name, $destination));
        }

        $this->moved = true;
        return true;
    }

    /**
     * Returns the extension of the uploaded file based on the client-side filename. Files with no extensions will return a blank string, files such as ".htaccess" will return "htaccess".
     *
     * @return string
     */
    public function getExtension ()
    {
        //  reverse the string, find the text before the first (formerly last) dot and return it
        $reversed = strrev($this->name);
        $dot = strpos($reversed, '.', 0);
        if ($dot === false || $dot === 0) {
            //  no dot or dot is at end of filename
            return '';
        }

        //  reverse the extension and return it
        return strrev(substr($reversed, 0, $dot));
    }

    /**
     * Determines if the file was uploaded OK according to the error code.
     *
     * @return bool
     */
    public function getSuccess ()
    {
        return ($this->error === 0);
    }

    /**
     *
     *
     * @return string
     */
    public function getErrorMessage ()
    {
        $messages = array(
            UPLOAD_ERR_INI_SIZE     => 'UPLOAD_ERR_INI_SIZE',
            UPLOAD_ERR_FORM_SIZE    => 'UPLOAD_ERR_FORM_SIZE',
            UPLOAD_ERR_PARTIAL      => 'UPLOAD_ERR_PARTIAL',
            UPLOAD_ERR_NO_FILE      => 'UPLOAD_ERR_NO_FILE',
            UPLOAD_ERR_NO_TMP_DIR   => 'UPLOAD_ERR_NO_TMP_DIR',
            UPLOAD_ERR_CANT_WRITE   => 'UPLOAD_ERR_CANT_WRITE',
            UPLOAD_ERR_EXTENSION    => 'UPLOAD_ERR_EXTENSION',
        );

        if (!isset($messages[$this->error])) {
            return '';
        }

        return sprintf(UploadHandler::$i18n[$messages[$this->error]], $this->fieldName, $this->type, $this->tmp_name, $this->error, $this->size, $this->getExtension());
    }
}

/**
* Generic file upload handler class with temporary file management, exception throwing and language-based error information
*
*/
class UploadHandler {

    /**
     * Whether or not uploaded files have been processed yet.
     *
     * @var bool
     */
    protected static $_processed = false;

    /**
     * Default language text that can be changed by the app using this lib.
     *
     * @var array
     */
    public static $i18n;

    /**
     * Content length specified in the POST request.
     *
     * @var int
     */
    public static $contentLength;

    /**
     * Max post size specified in php.ini stored as a number in bytes
     *
     * @var int
     */
    public static $maxPostSize;

    /**
     * Max post size specified in php.ini stored as a number in bytes
     *
     * @var int
     */
    public static $uploadMaxFilesize;

    /**
     * Max uploadable file size based on max POST size and max upload file size
     *
     * @var int
     */
    public static $maxUploadSize;

    /**
     * Storage for data about files that have been uploaded. Array will contain a set of UploadHandlerFile instances.
     *
     * @var array
     */
    public static $files;

    /**
     * Takes a php.ini-like bytes-size string such as 2M and converts it to a number. G, M and K each represent a unit of 1024 bytes: http://php.net/ini_get
     *
     * @param string $val The value to convert
     * @return int The result in bytes
     */
    public static function iniBytes ($val)
    {
        $val = trim($val);
        $scale = strtolower($val[strlen($val) - 1]);

        $val = intval($val);
        switch ($scale) {
            case 'g':
                $val *= 1024;

            case 'm':
                $val *= 1024;

            case 'k':
                $val *= 1024;
        }

        return $val;
    }

    /**
     * Processes server and $_FILE info relating to uploads to produce usable info. Assigns all gathered data to class variables which are accessible via public methods.
     *
     * @return void
     * @throws UploadHandlerProcessPostSizeException If the posted data size exceeds the maximum post size defined by php configuration
     * @throws UploadHandlerProcessNoInputException If no files were uploaded
     */
    public static function processUploads ()
    {
        if (self::$_processed) {
            return;
        }

        self::$_processed = true;

        self::$files = array();

        if (self::$contentLength >= self::$maxPostSize) {
            //  post length exceeds maximum post length ini directive - impossible for php to parse uploaded files because $_FILES is empty
            throw new UploadHandlerProcessPostSizeException(sprintf(self::$i18n['UPLOADHANDLER_ERR_PROCESS_POST_SIZE'], self::$contentLength, self::$maxPostSize));
        }

        if (empty($_FILES)) {
            //  no files uploaded
            throw new UploadHandlerProcessNoInputException(self::$i18n['UPLOADHANDLER_ERR_PROCESS_NO_INPUT']);
        }

        foreach ($_FILES as $fieldName => $field) {

            if (is_array($field['name'])) {
                //  input field that uses [] in it's name

                self::$files[$fieldName] = array();

                foreach ($field['name'] as $index => $ignoreThisValue) {
                    $name = $field['name'][$index];
                    $type = $field['type'][$index];
                    $tmp_name = $field['tmp_name'][$index];
                    $error = intval($field['error'][$index]);
                    $size = intval($field['size'][$index]);

                    $file = new UploadHandlerFile($fieldName, $name, $type, $tmp_name, $error, $size);

                    self::$files[$fieldName][] = $file;
                }

            } else {
                //  single input field
                $name = $field['name'];
                $type = $field['type'];
                $tmp_name = $field['tmp_name'];
                $error = intval($field['error']);
                $size = intval($field['size']);

                $file = new UploadHandlerFile($fieldName, $name, $type, $tmp_name, $error, $size);

                self::$files[$fieldName] = array($file);
            }
        }
    }

    /**
     * Returns a flat list of all uploaded files; whether successful or not
     *
     * @return array
     */
    public static function getAllFiles ()
    {
        self::processUploads();

        $return = array();
        foreach (self::$files as $field => $files) {
            foreach ($files as $file) {
                $return[] = $file;
            }
        }
        return $return;
    }

    /**
     * Returns only a list of files that were uploaded successfully
     *
     * @return array
     */
    public static function getUploadedFiles ()
    {
        self::processUploads();

        $return = array();
        foreach (self::$files as $field => $files) {
            foreach ($files as $file) {
                if ($file->getSuccess()) {
                    $return[] = $file;
                }
            }
        }
        return $return;
    }

    /**
     * Returns only a list of files that were not uploaded successfully
     *
     * @param bool $includeEmpty Optional. Default false. Set to true to include empty file upload fields as errors.
     * @return array
     */
    public static function getErrorFiles ($includeEmpty = false)
    {
        self::processUploads();

        $return = array();
        foreach (self::$files as $field => $files) {
            foreach ($files as $file) {
                if (!$includeEmpty && $file->error == UPLOAD_ERR_NO_FILE) {
                    continue;
                }

                if (!$file->getSuccess()) {
                    $return[] = $file;
                }
            }
        }
        return $return;
    }
}

//  statically set default language vars - an app that needs to customize messages can do so after including this class (only needs to happen once)

UploadHandler::$i18n = array(
    'UPLOADHANDLER_ERR_PROCESS_POST_SIZE'   => 'POST size of %1$d bytes exceeds the limit set in php.ini#post_max_size of %2$d bytes.',
    'UPLOADHANDLER_ERR_PROCESS_NO_INPUT'    => 'No file input fields were detected in the POST request.',
    'UPLOADHANDLER_ERR_MOVE_EXISTS'         => 'Could not move uploaded file "%1$s" to "%2$s" as the destination file already exists and the overwrite option was not set.',
    'UPLOAD_ERR_INI_SIZE'                   => 'The uploaded file exceeds the upload_max_filesize directive in php.ini.',
    'UPLOAD_ERR_FORM_SIZE'                  => 'The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form.',
    'UPLOAD_ERR_PARTIAL'                    => 'The uploaded file was only partially uploaded.',
    'UPLOAD_ERR_NO_FILE'                    => 'No file was uploaded.',
    'UPLOAD_ERR_NO_TMP_DIR'                 => 'Missing a temporary folder.',
    'UPLOAD_ERR_CANT_WRITE'                 => 'Failed to write file to disk.',
    'UPLOAD_ERR_EXTENSION'                  => 'File upload stopped by extension.',
    'UPLOADHANDLER_ERR_MOVE_NOT_WRITABLE'   => 'File not writable.'
);

//  statically set some values that do not change throughout the lifetime of a request

UploadHandler::$contentLength = (int)@$_SERVER['CONTENT_LENGTH'];
UploadHandler::$maxPostSize = UploadHandler::iniBytes(ini_get('post_max_size'));

// store this for informational purposes only - php upload support will internally deny uploads which are over this size but client-side code can use this to advise of file size limits
UploadHandler::$uploadMaxFilesize = UploadHandler::iniBytes(ini_get('upload_max_filesize'));

// the lowest of both maxPostSize and uploadMaxFile size determines the maximum size of a single file upload (may not be accurate to the byte since there's some POST overhead if max POST size happens to be smaller than max file size)
UploadHandler::$maxUploadSize = min(UploadHandler::$uploadMaxFilesize, UploadHandler::$maxPostSize); 
```

# mysql - SQL Join Table - 它是否需要主键或只需要唯一键？

> ID：10462175
> 
> 赞同：1
> 
> 时间：2012-05-05T13:09:47.210
> 
> 标签：mysql, sql, cakephp

我为使用连接表的 CakePHP 框架创建了一个应用程序。

我不确定是否需要一个主键来唯一标识连接表的每一行，如 SQL 的第一个块所示。

这两个字段是否需要设置为唯一键，或者它们都可以设置为主键并且我删除 id 作为主键？

我还被问到为什么使用表约束而不是列约束来声明原子主键，这是否意味着我不应该为连接表设置唯一键？

```
CREATE TABLE IF NOT EXISTS `categories_invoices` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `category_id` int(11) NOT NULL,
  `invoice_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `category_id` (`category_id`,`invoice_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=163 ; 
```

我在想解决方案可能是将两个键都设置为唯一键并删除主键，如下所示：

```
 CREATE TABLE IF NOT EXISTS `categories_invoices` (
      `category_id` int(11) NOT NULL,
      `invoice_id` int(11) NOT NULL,
      UNIQUE KEY `category_id` (`category_id`,`invoice_id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

事实上，我确实测试过删除连接表的主键“id”，只留下“category_id”和“invoice_id”，应用程序仍然有效。这使这两个字段都成为连接表中的唯一字段。这实际上是正确的做法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T13:12:39.690

你不需要两者。复合唯一键可以代替主键（除非 Cake 框架不能处理复合主键）：

```
 CREATE TABLE IF NOT EXISTS categories_invoices (
      category_id int(11) NOT NULL,
      invoice_id int(11) NOT NULL,
      PRIMARY KEY (category_id, invoice_id)
    ) 
    ENGINE = MyISAM 
    DEFAULT CHARSET = latin1 ; 
```

* * *

除了为主键创建的索引之外，还有另一个索引也很好，顺序相反：

```
 INDEX (invoice_id, category_id) 
```

* * *

如果你想定义外键约束，你应该使用`InnoDB`引擎。`MyISAM`你不能有外键。所以，它会是：

```
 CREATE TABLE IF NOT EXISTS categories_invoices (
      category_id int(11) NOT NULL,
      invoice_id int(11) NOT NULL,
      PRIMARY KEY (category_id, invoice_id),
      INDEX invoice_category_index (invoice_id, category_id)
    ) 
    ENGINE = InnoDB  
    DEFAULT CHARSET=latin1 ; 
```

* * *

如果 Cake 无法处理复合主键：

```
 CREATE TABLE IF NOT EXISTS categories_invoices (
      id int(11) NOT NULL AUTO_INCREMENT,
      category_id int(11) NOT NULL,
      invoice_id int(11) NOT NULL,
      PRIMARY KEY (id),
      UNIQUE KEY category_invoice_unique (category_id, invoice_id),
      INDEX invoice_category_index (invoice_id, category_id)
    ) 
    ENGINE = InnoDB  
    DEFAULT CHARSET=latin1 ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T13:15:42.007

第二种方法没有任何问题。它被称为复合键，在数据库设计中非常常见，尤其是在您的情况下。

[http://en.wikipedia.org/wiki/Relational_database#Primary_keys](http://en.wikipedia.org/wiki/Relational_database#Primary_keys)

# html - 表格链接在 Firefox、IE8 中不起作用

> ID：10462181
> 
> 赞同：0
> 
> 时间：2012-05-05T13:10:01.467
> 
> 标签：html, css, html-table, href

我有一张有背景图片（精灵）的桌子。表格的 td 用作相对于精灵图像位置的链接。我有这样的：

CSS：

```
table.populair {
    background-image:url(populair.png);
    background-position:27px 27px;
    background-repeat:no-repeat;
}

table td {
    border:solid 1px #ccc;
    border-radius:4px;
    cursor:pointer;
}

td a{
    display:block;
    width: 105%;
    height: 105%;
    margin-left: -3px;
    margin-top: -2px;
        z-index:15;
} 
```

HTML：

```
<table class="populair" border="0" bordercolor="#FFCC00" width="647" height="322" cellpadding="0" cellspacing="27">
            <tr>
                <td><a href="http://www.link.com/"></a>
                </td>
                <td><a href="http://www.link.com/"></a>
                </td>
                <td><a href="http://www.link.com/"></a>
                </td>
                <td><a href="http://www.link.com/"></a>
                </td>
                <td class="none">
                </td>
            </tr>
            </table> 
```

它适用于 Chrome（链接可点击），但不适用于 Firefox 和 IE8。奇怪的是，如果我将 td a 从百分比更改为像素，它似乎可以工作，但这会破坏我的精灵位置......那么我该怎么做才能使链接工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:57:26.630

您必须分配父元素的宽度和高度（td）才能将 % 用于子项。

```
table.populair {
    background-image:url(populair.png);
    background-position:27px 27px;
    background-repeat:no-repeat;
}

table tr td {
    border:solid 1px #ccc;
    border-radius:4px;
    display:table-cell;
    width: 10%;
    height: 100%;
}

table tr td a{
    display:block;
    width: 100%;
    height: 100%;
    margin-left: -3px;
    margin-top: -2px;
    z-index:15;
}​ 
```

[**演示。**](http://jsfiddle.net/r2yYZ/1/)

# oop - 为什么是 OOP 多态性背后的关键思想？

> ID：10462182
> 
> 赞同：3
> 
> 时间：2012-05-05T13:10:01.443
> 
> 标签：oop, polymorphism

在 C++ Primer 一书中，作者写道：“OOP 背后的关键思想是多态性”。我不确定我是否理解作者的意思。其他重要的东西呢：抽象、继承等。谁能详细说明一下，好吗？

编辑：我不问“什么是多态性”。我在问“为什么多态性是 OOP 背后的关键”？为什么不继承是关键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:29:41.387

我不确定它是否是OOP*的关键。*这只是某人的看法。

我认为有*四个*关键：抽象数据类型、封装、继承和多态。他们属于一起。

每个想法都依赖于之前的想法。ADT 是唯一独立的。封装需要ADT。多态性需要继承。

多态性有助于消除`if`、`switch`和`case`语句。您不必编写代码来根据对象类型确定要做什么；虚拟表只是在幕后为您调用正确的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:37:05.517

作者可能会这样说，因为：

1.  当 B 类从 A 继承时，B 类可以类型转换为 A ----> 这也称为多态。所以继承直接允许多态。

2.  当 A 实现接口 I*something* 时，A 可以以 I*something* 的形式出现，这也称为多态性。所以接口使多态性成为现实。

3.  摘要：抽象类只是另一个不能实例化并充当基类（通常）的类。非抽象子类可以被类型转换为抽象类，因此是多态性。

所以事实上它看到大多数 OOP 的概念都可以被看作是多态性，并且由于这个作者可能已经说过了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:18:26.150

通常，它是创建对象（及其字段、方法等）的想法，这些对象可以具有多种形式——派生（抽象）类、实现的接口等。

如果你先问谷歌、维基百科等，你就会在几秒钟内得到答案；）

# c++ - 从 C++ 代码调用类的 python 方法

> ID：10462183
> 
> 赞同：-1
> 
> 时间：2012-05-05T13:10:07.527
> 
> 标签：c++, python

我可以从 c++ 代码调用 python 函数，但我不喜欢我必须为每种类型的返回值都有一个包装器，而且我不知道如何调用 python 类的方法。

这里我如何调用函数 [http://codepaste.ru/10354/](http://codepaste.ru/10354/)

问题：

1.  如何调用python类的方法？
2.  有没有办法实现可以返回不同类型的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:18:31.523

关于第**一个问题**，最好看看[文档](http://docs.python.org/c-api/object.html#PyObject_CallMethod)。它描述了一个函数

```
PyObject* PyObject_CallMethod(PyObject *o, char *method, char *format, ...) 
```

我相信，这确实是您所需要的。

关于**第二个问题：**所有 Python 函数都返回一个`PyObject *`. 但是该对象可以是元组或用户定义的类，因此其中可能包含复杂的信息。

# android - 通过 ksoap2-android 调用 Web 服务时出现 RuntimeException，并将枚举作为参数

> ID：10462189
> 
> 赞同：1
> 
> 时间：2012-05-05T13:11:12.330
> 
> 标签：android, enums, ksoap2, runtimeexception

我想添加一个枚举作为 Web 服务请求的参数。我在android上使用kso​​ap2，但我得到**java.lang.RuntimeException：无法序列化：** 通过枚举时未定义我实现枚举遵循[如何将枚举值传递给wcf webservice](https://stackoverflow.com/questions/5827631/how-to-pass-an-enum-value-to-wcf-webservice)（Fildor回答）

```
interface BaseEnum extends Marshal
{
    public String getDesc(Enum en);
}
enum DrivingLicenseTypeEnum implements BaseEnum 
{
    UNDEFINED,
    NSURED_DRIVER_INJURED,
    INSURED_PASSENGER_INJURED,
    PARTY_DRIVER_INJURED,
    PARTY_PASSENGER_INJURED,
    THIRD_PARTY_INJURED,
    INSURED_VEHICLE_DAMAGE,
    PARTY_VEHICLE_DAMAGE,
    ASSET;

    public  String getDesc(Enum en) {
        String result="";
        //generate description
        return result;
    }

    public Object readInstance(XmlPullParser arg0, String arg1, String arg2,
            PropertyInfo arg3) throws IOException, XmlPullParserException {
        // TODO Auto-generated method stub
        return DrivingLicenseTypeEnum.valueOf(arg0.nextText());
    }

    public void register(SoapSerializationEnvelope arg0) {
        arg0.addMapping("http://tempuri.org/", "DrivingLicenseTypeEnum", DrivingLicenseTypeEnum.class);
    }

    public void writeInstance(XmlSerializer arg0, Object arg1)
            throws IOException {
        arg0.text(((DrivingLicenseTypeEnum)arg1).name());
    }
} 
```

我通过 DrivingLicenseTypeEnum 作为参数传递

```
DrivingLicenseTypeEnum c = DrivingLicenseTypeEnum.UNDEFINED;
PropertyInfo pi=new PropertyInfo();
pi.setName("driverLicenseType");
pi.setValue(c);
pi.setType(DrivingLicenseTypeEnum.class);
request.addProperty(pi);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
c.register(envelope); 
```

你能帮我解决这个问题吗？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:05:56.797

哦，我得到了一个答案，因为我使用了实现 Marshal 的枚举，所以会出现这个问题。例如，当我将此枚举划分为类和枚举时

```
enum DrivingLicenseTypeEnum 
{
    UNDEFINED,
    NSURED_DRIVER_INJURED,
    INSURED_PASSENGER_INJURED,
    PARTY_DRIVER_INJURED,
    PARTY_PASSENGER_INJURED,
    THIRD_PARTY_INJURED,
    INSURED_VEHICLE_DAMAGE,
    PARTY_VEHICLE_DAMAGE,
    ASSET
}

class DrivingLicenseTypeEnumClass implements Marshal
{
public Object readInstance(XmlPullParser arg0, String arg1, String arg2,
            PropertyInfo arg3) throws IOException, XmlPullParserException {
        // TODO Auto-generated method stub
        return DrivingLicenseTypeEnum.valueOf(arg0.nextText());
    }

    public void register(SoapSerializationEnvelope arg0) {
        arg0.addMapping("http://tempuri.org/", "DrivingLicenseTypeEnum", DrivingLicenseTypeEnum.class,new DrivingLicenseTypeEnumClass());
    }

    public void writeInstance(XmlSerializer arg0, Object arg1)
            throws IOException {
        arg0.text(((DrivingLicenseTypeEnum)arg1).name());
    }

} 
```

它工作正常。

# javascript - 如何检测和获取asp.net中的复选框/选择框（html标签）值？

> ID：10462193
> 
> 赞同：0
> 
> 时间：2012-05-05T13:11:21.093
> 
> 标签：javascript, asp.net, html

我想知道如何检测注册表单中输入的复选框值和选择框。这是选择：

`<p><label for="favorite">שחקן המועדף עליך</label> <select name = "favor"> <option> </option> <option value="פרקינס">דורון פרקינס</option> <option value="סופוקליס שחורציאניטיס">סופוקליס שחורציאניטיס</option> <option value="עומרי כספי">עומרי כספי</option> <option value="דייויד בלו">דייויד בלו</option> </select></p>`

这就是复选框：

```
 <p><label for="checkbox">אופנוע</label><input type="checkbox" name="bike" id="bike" value="bike" /> </p>
    <p><label for="checkbox">מכונית</label><input type="checkbox" name="car" id="car" value="car" /> </p> 
```

如何在客户端的复选框中获取选定的选项和选定的框？

如果有什么需要解释的请告诉我，谢谢！

**编辑：**我会再解释一下，我有一个注册表单，里面有复选框和标签。我想知道客户选择了什么并将其插入到我的 SQL DB 中，我需要知道如何获取客户按下的内容，例如他在哪个框上勾选了 V，他选择了什么选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:27:13.820

如果你想得到这个**客户端**，你可以使用 jQuery 来收获结果：

```
$("#bike").is(':checked'); 
```

和

```
$("option:selected","#favor").val(); 
```

请注意，您的选择没有 id，只有名称，因此您还需要将其更改为：

```
<select name="favor" id="favor"> 
```

如果你想得到这个**server-side**，你可以使用这样的东西：

```
string s = Request.Form["bike"];
if ( !string.IsNullOrEmpty(s) ) { 
```

请注意，如果复选框被选中，值为“checked”或“true”，大多数浏览器将发送一个 post 值，如果未选中，则不会发送它。

更好的是用 asp.net webforms 标签替换这些 html 标签，如下所示：

```
<asp:CheckBox id="bike" runat="server" ... /> 
```

这样您就可以在服务器端执行此操作：

```
bool checked = this.bike.Checked; 
```

# c++ - Windows 的原始鼠标输入

> ID：10462198
> 
> 赞同：6
> 
> 时间：2012-05-05T13:11:54.860
> 
> 标签：c++, windows, winapi, mouse

阅读这篇文章“利用高清鼠标移动” - [http://msdn.microsoft.com/en-us/library/windows/desktop/ee418864(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418864(v=vs.100).aspx)，我想应该使用原始输入从输入设备获得更精确的读数。

文章指出 WM_MOUSEMOVE 的主要缺点是它受限于屏幕分辨率。

仔细检查 RAWMOUSE 结构后，我发现 lLastX 和 lLastY 是长值，您可以通过它们获得增量。

对我来说，它看起来像 WM_MOUSEMOVE 和 WM_INPUT 是相同的，除了 WM_INPUT 你没有应用加速度（指针弹道学）。

WM_MOUSEMOVE 和 WM_INPUT 是否都受限于屏幕分辨率？

如果是这样，使用 WM_INPUT 有什么好处？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T13:35:52.467

RAWMOUSE 根据鼠标的原始分辨率为您提供鼠标的逻辑坐标。

也就是说，您会看到鼠标的实际移动。

Windows 将使用鼠标速度和加速度（弹道）设置来更新光标位置。因为当然这两者没有联系 - 必须解释鼠标的明显移动以生成光标移动，否则如何支持多个鼠标？

如果您希望控制指针，据我所知，没有理由重复 Windows 鼠标弹道计算。就让windows来做吧。因此，为了控制指针，您应该只使用 WM_MOUSEMOVE。也就是说，除非您希望在应用程序中禁用鼠标加速设置。

但是，如果您想控制玩家的 POV（视点），或者使用鼠标来控制游戏中的物体（例如飞船飞行轭），那么 RAWMOUSE 数据可以让您尽可能地了解鼠标的移动，您可以实现自己的算法将其转换为飞行轭/POV 运动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T11:02:33.937

使用它的主要好处和理由是，使用 rawInput 您可以使用两个或更多鼠标。目前，我编写了一个小型游戏原型，旨在由两个玩家用两只鼠标/鼠标玩 - 它更复杂，但它可以工作，而且还不错，因为我确实需要链接外部库。

# java - 在 java 中创建基于时间轴的编辑 gui

> ID：10462199
> 
> 赞同：5
> 
> 时间：2012-05-05T13:11:55.277
> 
> 标签：java, user-interface, drag-and-drop, timeline, waveform

我想在 Java 中创建一个基于时间线的编辑 GUI - 采用视频编辑软件的风格（例如 adobe Premiere）。下面是一张图片，我是如何考虑 GUI 的（很抱歉没有直接包含它 - 作为一个新用户，该功能被禁用）：

![时间线图形用户界面](../Images/5b15bdeaa2ce7d5e80bde8a080c6de34.png)

当前实现的只是顶部的时间线滑块（带有`JSlider`） - 所有其余部分都由 Photoshop 组成（也是从滑块向下穿过图层的黑线）。

现在我的问题不是很具体，我只是想获得一些输入，我可以如何尽可能好地实现其余部分。更准确地说，我非常感谢对以下主题的提示：

1.  如何组织整个 gui - 关于从上到下穿过所有层的时间指示器线？
2.  如何可视化波形，有没有好的（免费）包可以使用？（音频文件是 MP3 或 WAV）
3.  文本段层使用哪个元素（它们应该是可拖放的）-> JLabels，JButtons，如何最好地解决拖放功能？

你看我还有一些工作要做，任何好的建议或指出正确的方向都会非常好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T07:52:04.343

1.  对于波形问题，您可以查看这个[问题](https://stackoverflow.com/questions/11017283/java-program-that-create-a-png-waveform-for-an-audio-file)和接受的答案。该类创建一个PNG图像文件，但您应该能够，而不是保存图像，只需在程序中显示它。

2.  Oracle在本[教程](http://docs.oracle.com/javase/tutorial/uiswing/dnd/intro.html)中很好地解释了拖放操作。

# html - 从外部服务器加载 HTML5 视频

> ID：10462204
> 
> 赞同：0
> 
> 时间：2012-05-05T13:12:30.813
> 
> 标签：html, video, video-streaming, html5-video

假设我想加载一个在远程服务器上找到的 html5 视频，并且（显然）有一个地址（类似于[http://www.emuze.co/videos/vid_1.mp4](http://www.emuze.co/videos/vid_1.mp4)）。我实际上可以把这个地址作为 href 属性的值，还是我必须做一些特别的事情（我必须做什么）？

感谢您的任何回复：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:13:51.010

只要不侵犯版权，您可以放置​​外部服务器的 url

# xml - Notepad++ 默认折叠所有标签？

> ID：10462207
> 
> 赞同：40
> 
> 时间：2012-05-05T13:12:44.087
> 
> 标签：xml, notepad++, folding

我有一个巨大的 XML 代码，我一直在添加。它有大约 13.465 行代码和很多标签。为了保持一切井井有条（因为代码几乎不可读），我决定我可以折叠所有标签并评论它们是什么。

每次我打开 Notepad++ 时有什么方法可以实现这一点，而不必使用“全部折叠”选项？我正在使用 notepad++ windows XP 和 XML。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-07T15:42:26.420

# java - 删除两个字符之间的子字符串（java）

> ID：10462209
> 
> 赞同：6
> 
> 时间：2012-05-05T13:12:52.240
> 
> 标签：java, regex, string, substring

我有一个这样的java字符串：

```
String string = "I <strong>really</strong> want to get rid of the strong-tags!"; 
```

我想删除标签。我还有一些其他字符串的标签更长，所以我想找到一种方法来删除“<>”字符之间的所有内容，包括那些字符。

一种方法是使用将字符串与正则表达式进行比较的内置字符串方法，但我不知道如何编写这些方法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-05T13:16:25.480

在使用正则表达式解析 HTML 时建议小心（由于其允许的复杂性），但是对于“简单”HTML 和简单文本（没有文字`<`或`>`其中的文本），这将起作用：

```
String stripped = html.replaceAll("<.*?>", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-19T20:38:58.990

为了避免正则表达式：

```
String toRemove = StringUtils.substringBetween(string, "<", ">");
String result = StringUtils.remove(string, "<" + toRemove + ">"); 
```

对于多个实例：

```
String[] allToRemove = StringUtils.substringsBetween(string, "<", ">");
String result = string;
for (String toRemove : allToRemove) {
  result = StringUtils.remove(result, "<" + toRemove + ">"); 
} 
```

> [Apache StringUtils](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html)函数是 null-、empty- 和非匹配安全的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-30T21:15:13.230

你应该使用

```
String stripped = html.replaceAll("<[^>]*>", "");
String stripped = html.replaceAll("<[^<>]*>", ""); 
```

where`<[^>]*>`匹配以 开头的子字符串`<`，然后是零个或多个字符以外`>`的字符（或除`<`and以外的字符，`>`如果您选择第二个版本），然后是一个`>`字符。

注意`<.*?>`

*   比否定字符类效率低（请参阅[哪个更好的非贪婪正则表达式或否定字符类？](https://stackoverflow.com/q/41269297/3832970)）
*   找不到跨多行的子字符串（请参阅[如何在正则表达式中匹配跨多行的任何字符？](https://stackoverflow.com/a/45981809/3832970)），但可以使用`(?s)<.*?>`, `<(?s:.)*?>`,`<[\w\W]*?>`和许多其他效率不高的变体来解决。

请参阅[**正则表达式演示**](https://regex101.com/r/HAPzJP/1)。

# android - 如何让 EditView 和 Button 并排占据 90% 的宽度？

> ID：10462210
> 
> 赞同：1
> 
> 时间：2012-05-05T13:12:55.220
> 
> 标签：android, android-layout, android-ui

在Android中，我试图做到这一点： ![并排搜索 EditText 和 Button](../Images/d5fb219d29d03e1498702d7a3d7fb1d3.png)

基本上，将按钮与 EditText 并排添加的能力，它们都占据了顶行宽度的 90%。（我不关心有像 twitter 图标这样的标志）。

我用 layout_weight 尝试过 LinearLayout，但它们根本没有正确显示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightSum = "1.0"
    android:orientation="vertical"
    android:background = "#faadadad" >

    <EditText
        android:layout_width="0dip"
        android:layout_height="0dip"
        android:layout_weight = "0.8"
        android:layout_marginLeft = "2dip"
        android:layout_marginTop = "1dip"
        android:layout_marginBottom = "1dip"        
        android:hint="Search Terms" />

    <Button android:text = "?" 
        android:layout_width = "0dip" 
        android:layout_height="2dip"  android:layout_weight = "0.2"/>

    </LinearLayout> 
```

并且我在 RelativeLayout 中尝试的任何东西看起来都不正确（我尝试将 2 元素之间的边距设置为 0dips，没有运气。我也无法获得 90% 的宽度要求。）

我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:24:17.313

尝试使用以下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightSum = "1.0"
    android:orientation="horizontal"
    android:background = "#faadadad" >
    <LinearLayout android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.8">    
        <EditText
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft = "2dip"
            android:layout_marginTop = "1dip"
            android:layout_marginBottom = "1dip"        
            android:hint="Search Terms" />
    </LinearLayout>
    <Button android:text = "?" 
        android:layout_width = "0dip" 
        android:layout_height="wrap_content"
    android:layout_weight = "0.2"/>
</LinearLayout> 
```

所以基本上，当你使用水平线性布局时，layout_weight 水平工作，即宽度根据 layout_weight 参数（layout_width="0dp"）划分。如果您使用的是垂直线性布局，那么 layout_weight 垂直工作，即高度根据 layout_weight 参数垂直划分（layout_height="0dp"）。

希望对您有所帮助。

# php - 使用 imap 在 php 中读取邮件

> ID：10462212
> 
> 赞同：1
> 
> 时间：2012-05-05T13:13:07.437
> 
> 标签：php, email, imap

我已经用 imap_fetchbody() 阅读了 php 中的邮件，并用 imap_qprint() 对其进行了解码。

```
$body = imap_fetchbody($mbox, $no, 1);
$body = imap_qprint($body); 
```

但是原始邮件和输出邮件之间是有区别的

原邮件：

> 纯文本
> 
> 这是要检查的测试邮件
> 
> 第一 第二 第三 第四 第五 第六 主页
> 
> 这是黄色背景
> 
> 网站：[http ://bizved.com](http://bizved.com)
> 
> 报价测试
> 
> 谢谢 Hiren Manek Bhuved 解决方案

输出邮件

> 纯文本
> 
> 这是要检查的测试邮件
> 
> 第一 第二 第三 第四 第五 第六 主页
> 
> 这是黄色背景
> 
> 网站：�http://bizved.com
> 
> 报价测试
> 
> 谢谢 �Hiren Manek Bhuved Solutions

有人可以给出解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:05:34.860

我已经制定了以下解决方案，因为邮件标头已经是其字符集。

```
$st = imap_fetchstructure($mbox, $no); 
$part = $st->parts[$partno];
$body = imap_fetchbody($mbox, $no, $partno);
$body = imap_qprint($body);
$charset = 'UTF-8';
if(!empty($part->parameters)){
    for ($k = 0, $l = count($part->parameters); $k < $l; $k++) {
        $attribute = $part->parameters[$k];
        if($attribute->attribute == 'CHARSET'){
            $charset = $attribute->value;
        }
    }
}
//echo $charset;
$bodytext = mb_convert_encoding($body,'UTF-8',$charset); 
```

这不是完整的解决方案。它仅用于字符编码。邮件对于纯文本、html 文本、附件等有不同的部分，因此您应该对每种类型进行不同的处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:22:24.230

我总是对 imaps 有同样的问题。我不保证任何事情，但您可能想尝试一下：

```
function utf8_imap_header_decode($str)
{
    $tmp = imap_mime_header_decode($str);
    if (!mb_check_encoding($tmp[0]->text, 'UTF-8'))
        return utf8_encode($tmp[0]->text);

    return $tmp[0]->text;
}

function utf8_imap_body_decode($str)
{
    return utf8_encode(quoted_printable_decode($str));
} 
```

# bash - 如何根据第 1 列 bash script-sed-awk 的值从第 2 列中选择最大数

> ID：10462214
> 
> 赞同：3
> 
> 时间：2012-05-05T13:13:28.070
> 
> 标签：bash, sed, awk

我有一个这样的文件：

```
1 12:00

1 12:34

1 01:01

1 08:06

2 09:56

2 06:52
... 
```

我想从第一列的每个值中选择第二列的最大值。

新文件：

```
1 12:34

2 09:56 
... 
```

我怎样才能做到这一点？？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T13:20:37.160

```
awk '
  { if ($2>values[$1]) values[$1]=$2; }
  END {
    for (i in values) {
      print i,values[i]
    }
  }
' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T13:47:20.350

这可能对您有用：

```
sort -k1,1n -k2,2r file | sort -uk1,1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T13:26:51.057

```
perl -nale '$F[1]=~s/://;$h{$F[0]}=$F[1]if($F[1]>$h{$F[0]}); 
     END{for(sort keys(%h)){($x=$h{$_})=~s/^(..)(..)$/\1:\2/;print"$_ $x"}}' file 
```

[看见](http://ideone.com/d0DpD)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T17:12:54.900

仅重击；

```
# build arrays with 1.column value in its name
# use all digits in the row as index, the row as value
while read a b ; do
  eval "array$a[$a${b//:/}]=\"$a $b\""
done < "$infile"

# select the last element of each array
for name in ${!array*}; do
  last='${'${name}'[-1]}'
  eval "echo ${last}"
done 
```

# google-maps-api-3 - 有没有办法在谷歌地图中获取标记的坐标？

> ID：10462215
> 
> 赞同：1
> 
> 时间：2012-05-05T13:13:28.477
> 
> 标签：google-maps-api-3, google-maps-markers

我正在尝试使用 Google Maps API v3。但是现在我一直在弄清楚如何获取某个标记的坐标？

```
<script>

    var homeLatlng = new google.maps.LatLng(16.61096000671, 120.31346130371);
    var homeMarker = new google.maps.Marker({
        position: homeLatlng,
        map: map
    });

    var myOptions = {
        center: new google.maps.LatLng(16.61096000671, 120.31346130371),
        zoom: 10,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map =
        new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    //I know that I'm the one who set the coordinates for this,
    // but how do I fetch it back?

    $('#plot').click(function(){
        homeMarker.setMap(map);
    });

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T13:28:38.643

```
homeMarker.getPosition(); //returns a google.maps.LatLng object 
```

# python - 在 python 中处理字节

> ID：10462216
> 
> 赞同：0
> 
> 时间：2012-05-05T13:13:43.413
> 
> 标签：python, byte, processing

我正在尝试将 processing.org 应用程序移植到 python 并遇到一些困难。

我需要用python写这个：

```
int[][] elevation; // elevations in meters
float[][] felevation; // scaled to range [0,1] where 1=max
int maxheight;

void setup(){
size(600,600,P2D);

// read srtm binary file
elevation=new int[1201][1201];
felevation=new float[1201][1201];
byte b[] = loadBytes("N30W091.hgt"); // THIS IS A BINARY FILE
int ix=0;
maxheight=0;
for (int row=0;row<1201;row++) {
  for (int col=0;col<1201;col++) {
    // bytes are signed, from -128 to 127, converts to unsigned...
    int hi = b[ix] & 0xff; 
    int lo = b[ix+1] & 0xff; 
    int el=(int)((hi<<8)|lo); // big endian!
    elevation[row][col]=el;
    if (el>maxheight && el<32000) maxheight=el; 
    ix+=2;
   }
} 
```

... 等等

到目前为止我所做的是：

```
elevation = [[],[]]
maxheight=0

b = open("C:\\Users\\CNA\\sketchbook\\_SRTM\\data\\N59E010.hgt","rb")
fin = b.read(1)
print(len(fin))
ix = 0
for row in range(0,1201):
    for col in range(0,1201):
        hi = (fin[ix]   + 0xff)
        lo = (fin[ix+1] + 0xff) 
```

我总是得到

```
Traceback (most recent call last):

  File "C:\Users\CNA\workspace\Revitter\PatternAsignment.py", line 16, in <module>

TypeError: unsupported operand type(s) for +: 'str' and 'int' 
```

有任何想法吗？..我是python新手，我没有使用字节的经验...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T14:25:39.990

惯用的翻译将以完全不同的方式工作。

在原始代码中，您进行了一堆位旋转以将两个字节值转换为单个数值。在 Python 中，为此提供了内置功能：使用`struct`模块。事实证明，这个模块已经为一次读取多个值而构建。

此外，对文件名使用正斜杠 - 它更容易，并且可以保证工作。使用 with-block 确保文件自动正确关闭，并使用列表推导来简化循环 - 不要试图告诉 Python 如何构建列表，而只需询问您想要的列表。

这给了我们：

```
import struct
with open('C:/Users/CNA/sketchbook/_SRTM/data/N59E010.hgt', 'rb') as data:
    elevation = [
        list(struct.unpack('>1201H', data.read(1201 * 2)))
        for row in range(1201)
    ]
maxheight = max(max(cell for cell in row if cell < 32000) for row in elevation) 
```

你就完成了。欢迎来到 Python :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T13:20:11.150

在 Python 中，like 值`'hello'[2]`也是字符串（在这种情况下 == `'l'`）。您需要使用将它们转换为整数`ord`并使用`chr`.

```
elevation = [[],[]]
maxheight=0

b = open("C:\\Users\\CNA\\sketchbook\\_SRTM\\data\\N59E010.hgt","rb")
fin = b.read() # you probably need to read more than 1 byte, this will read whole file
print(len(fin))
ix = 0
for row in range(0,1201):
    for col in range(0,1201):
        hi = (ord(fin[ix])   + 0xff) # ord returns unsigned integer, so you probably don't need to convert it
        lo = (ord(fin[ix+1]) + 0xff)
        el = (hi << 8) | lo 
```

请参阅：[http ://docs.python.org/library/functions.html](http://docs.python.org/library/functions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:00:31.787

我不确定我的 .reshape 语法是否正确（将进一步测试） - 但非常像这样的东西应该可以满足您的需求：

```
import numpy

def readHgtFile(fname, h=1201, w=1201):
    with open(fname, 'rb') as inf:
        return numpy.fromfile(inf, dtype=[('height', '>u2')], count=h*w).reshape((h,w))

def main():
    elevation = readHgtFile('N30W091.hgt')
    maxheight = elevation.max()

if __name__=="__main__":
    main() 
```

# vb.net - 用于客户端-服务器应用程序的 VB.NET 连接字符串

> ID：10462218
> 
> 赞同：1
> 
> 时间：2012-05-05T13:14:22.360
> 
> 标签：vb.net, sql-server-2008, connection-string

**案子 ：**

我正在使用 VB.NET (Windows Forms) 创建一个桌面应用程序，并使用 SQL Server 2008 Express 作为其数据库。

**问题 ：**

我想创建一个客户端-服务器应用程序，这意味着我只需要服务器上的 1 个数据库。

我有一台电脑和一台笔记本电脑。我将笔记本电脑的 IP 设置为`192.168.1.1`，将计算机的 IP 设置为`192.168.1.2`.

现在我将数据库放在我的电脑上，数据库名称是`db_transportasi`.

问题是，如何从我的笔记本电脑连接我的计算机数据库？

**规格 ：**

我在下面使用这个字符串进行连接：

```
Data Source=ARVID-THEODORUS\SQLEXPRESS;Initial Catalog=DB_TRANSPORTASI;Integrated Security=True 
```

我已经设置了我的 SQL 配置管理器，启用了 TCP/IP，切换到`IP Addresses`选项卡并将 IPAII 端口属性设置为 2301

我关闭了防火墙，所以我不必设置任何例外。

这是 SQL Server SS：

![SQL Server 首次连接](../Images/9c3003448d9a6ffe4511a6afad81e467.png)

**问题 ：**

1.  如何从我的笔记本电脑连接到我的计算机数据库？

2.  你能给我看看我的笔记本电脑 VB.NET 连接字符串的例子吗？

之前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:17:40.633

你去：

```
"Server=192.168.1.2,1433;Initial Catalog=DB_TRANSPORTASI;Integrated Security=True" 
```

[ConnectionStrings.com](http://www.connectionstrings.com/sql-server-2008)是许多不同数据库的连接字符串的好资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T15:19:43.550

试试这个链接：
[http ://www.linglom.com/2009/03/28/enable-remote-connection-on-sql-server-2008-express/](http://www.linglom.com/2009/03/28/enable-remote-connection-on-sql-server-2008-express/)

连接字符串：

```
"Network Library=DBMSSOCN; Data Source=xxx.xxx.xxx.xxx,1433;" & _
"Initial Catalog=mySQLServerDBName; User ID=myUsername;" & _
"Password=myPassword" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:18:42.523

试试这个页面。不同方式的完整列表。

[http://www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T13:20:00.523

确保在 SQL Server 配置管理器中启动“SQL Server Browser”服务。

# android - 如何为 android ListView 背景设置单个图像？

> ID：10462219
> 
> 赞同：0
> 
> 时间：2012-05-05T13:14:24.863
> 
> 标签：android, background, android-listview

我已将此代码用于行布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
   android:background="@drawable/bckimage"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:padding="10dp"
   android:textSize="16sp" >
</TextView> 
```

这是用于构建列表的类：

```
public class ListTestActivity extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    String[] myArray = new String[] {...};

    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(this, R.layout.listlayout,myArray));

    ListView listView = getListView();
    listView.setCacheColorHint(0);
    listView.setBackgroundResource(R.drawable.bckimage);
    listView.setTextFilterEnabled(true);

    listView.setOnItemClickListener(new OnItemClickListener() {
//. . .
});

}
} 
```

这显示了每一行的图像，而不是整个背景。如何为背景添加单个图像？我在这里也看到了几种方法，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:19:21.257

将图像设置为`ListView`元素的背景：

```
getListView().setBackgroundResource(R.drawable.bckimage); 
```

您的列表行可能隐藏了背景图像。还添加：

```
getListView().setCacheColorHint(android.R.color.transparent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:18:52.730

如您所述，将背景设置为列表而不是行布局。

您可以通过以下方式为列表设置背景：

```
((ListView)findViewById(android.R.id.list)).setBackgroundResource(R.drawable.bckimage); 
```

每当您使用 ListActivity 时，它都有 ID 为“list”的 ListView。

# mysql - 创建mysql行/列

> ID：10462222
> 
> 赞同：1
> 
> 时间：2012-05-05T13:14:58.373
> 
> 标签：mysql, ruby, activerecord

我写了一个小小的 ruby​​ 脚本，它把自己连接到一个 mysql 数据库并创建一个表（如果这个表还不存在的话）。在此之后，脚本应将内容存储在此表中，我尝试使用以下方法存储此数据：

```
Table.create(:foo => "bar", :foobar => "something", :blallala => "blololl") 
```

我也试过

```
Table.new(:foo => "bar", :foobar => "something", :blallala => "blololl") 
```

但它似乎做同样的事情，因为我总是得到错误：

> Mysql::Error: Table 'my-username.my-dbname' 不存在：SHOW FULL FIELDS FROM table-name

所以这就是我到目前为止得到的：

```
 ActiveRecord::Base.establish_connection(
                :adapter => "mysql",
                :host => "localhost",
                :username => "my-username",
                :password => "my-password",
                :database => "my-db-name",
                :encoding => "UTF8"
        )

        table_name = "my_table"
        unless ActiveRecord::Base.connection.tables.include? table_name
                ActiveRecord::Schema.define do
                        create_table :"#{table_name}" do |table|
                                table.column :foo, :string
                                table.column :bar, :string
                                table.column :blallala, :string
                        end
                end
        end

        class Table < ActiveRecord::Base
                self.table_name = "#{table_name}"
        end

         Table.create(:foo => "bar", :foobar => "something", :blallala => "blololl")
         #Table.new(:foo => "bar", :foobar => "something", :blallala => "blololl") 
```

所以问题是：我如何实际创建一个列/行，为什么不起作用`Table.create(:foo => "bar", :foobar => "something", :blallala => "blololl")`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:55:46.243

这对我有用：

```
# establish connection here

class Table < ActiveRecord::Base
  self.table_name = "the_table"
end

unless Table.table_exists?
  ActiveRecord::Schema.define do
    create_table :the_table do |table|
      table.column :foo, :string
      table.column :bar, :string
      table.column :blallala, :string
    end
  end
end

Table.create(:foo => "bar", :bar => "something", :blallala => "blololl") 
```

# node.js - 从 module.exports 中的另一个函数调用 module.exports 中的“本地”函数？

> ID：10462223
> 
> 赞同：381
> 
> 时间：2012-05-05T13:15:00.773
> 
> 标签：node.js, express

如何从`module.exports`声明中的另一个函数中调用一个函数？

应用程序.js

```
var bla = require('./bla.js');
console.log(bla.bar()); 
```

bla.js

```
module.exports = {

  foo: function (req, res, next) {
    return ('foo');
  },

  bar: function(req, res, next) {
    this.foo();
  }

} 
```

我试图`foo`从函数内部访问函数`bar`，我得到：

> TypeError: Object # has no method 'foo'

如果我`this.foo()`改为 just`foo()`我得到：

> ReferenceError: foo 未定义

* * *

## 回答 #1

> 赞同：455
> 
> 时间：2012-05-05T13:21:46.580

更改`this.foo()`为`module.exports.foo()`

* * *

## 回答 #2

> 赞同：200
> 
> 时间：2012-10-09T06:43:17.897

`module.exports`您可以在块之外声明您的函数。

```
var foo = function (req, res, next) {
  return ('foo');
}

var bar = function (req, res, next) {
  return foo();
} 
```

然后：

```
module.exports = {
  foo: foo,
  bar: bar
} 
```

* * *

## 回答 #3

> 赞同：128
> 
> 时间：2015-03-20T21:45:25.447

您也可以这样做以使其更简洁易读。这是我在几个编写良好的开源模块中看到的：

```
var self = module.exports = {

  foo: function (req, res, next) {
    return ('foo');
  },

  bar: function(req, res, next) {
    self.foo();
  }

} 
```

* * *

## 回答 #4

> 赞同：67
> 
> 时间：2013-05-07T20:09:57.190

您还可以在 (module.)exports.somemodule 定义之外保存对模块全局范围的引用：

```
var _this = this;

exports.somefunction = function() {
   console.log('hello');
}

exports.someotherfunction = function() {
   _this.somefunction();
} 
```

* * *

## 回答 #5

> 赞同：42
> 
> 时间：2013-10-03T15:54:24.707

另一种选择，更接近 OP 的原始样式，是将要导出的对象放入变量中并引用该变量以调用对象中的其他方法。然后，您可以导出该变量，一切顺利。

```
var self = {
  foo: function (req, res, next) {
    return ('foo');
  },
  bar: function (req, res, next) {
    return self.foo();
  }
};
module.exports = self; 
```

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2017-06-09T15:22:35.803

```
const Service = {
  foo: (a, b) => a + b,
  bar: (a, b) => Service.foo(a, b) * b
}

module.exports = Service 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2016-10-23T18:47:43.973

从**Node.js 版本 13**开始，您可以利用[ES6 模块](https://nodejs.org/api/esm.html)。

```
export function foo() {
    return 'foo';
}

export function bar() {
    return foo();
} 
```

* * *

遵循类方法：

```
class MyClass {

    foo() {
        return 'foo';
    }

    bar() {
        return this.foo();
    }
}

module.exports = new MyClass(); 
```

由于节点的模块缓存，这将只实例化一次类：
[https ://nodejs.org/api/modules.html#modules_caching](https://nodejs.org/api/modules.html#modules_caching)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-07-17T14:11:12.340

为了解决您的问题，我对 bla.js 进行了一些更改并且它正在工作，

```
var foo= function (req, res, next) {
  console.log('inside foo');
  return ("foo");
}

var  bar= function(req, res, next) {
  this.foo();
}
module.exports = {bar,foo}; 
```

并且在 app.js 中没有修改

```
var bla = require('./bla.js');
console.log(bla.bar()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-09T20:59:23.680

我所做的是创建一个独立的`foo`函数并在两个地方引用它。

这样，`this`无论使用箭头还是常规功能，它都可以防止任何问题

```
function foo(req,res,next) {
  return ('foo');
} 
```

然后我可以`foo`在两个地方参考

```
module.exports = {

  foo, // ES6 for foo:foo

  bar: function(req, res, next) {
    foo();
  }

} 
```

# php - 如何使用 PHP 安装和运行 tesseract OCR

> ID：10462224
> 
> 赞同：1
> 
> 时间：2012-05-05T13:15:06.720
> 
> 标签：php, ocr, tesseract

谈到tesseract，我是新手。我想根据用户输入从图像中实现文本搜索。我听说过 tesseract，我认为它是一个很好的实现搜索的开源解决方案。我的想法是扫描图像，从图像中取出文本及其坐标，并突出显示用户输入的文本部分。

我已经从 [http://code.google.com/p/tesseract-ocr/downloads/list](http://code.google.com/p/tesseract-ocr/downloads/list)下载了源代码，但是我在任何源代码中都找不到`tesseract`在命令行上使用它的可执行文件。如果有人可以指导我如何进行以便我可以完成我的任务，那将有很大的帮助。我在另一个链接中看到我们可以使用该`exec`命令。但是当我下载源代码并尝试运行它时，它总是会产生：

> Tesseract 不被识别为内部或外部...

# php - PHP更新MYSQL多对多关系

> ID：10462225
> 
> 赞同：8
> 
> 时间：2012-05-05T13:15:27.770
> 
> 标签：php, mysql, many-to-many

我有一个多对多关系，用 MySQL 中的关联表实现。我有一张儿童桌和一张父母桌。一个孩子可以有多个父母，他们的 ID 保存在 parent_child_link 关联表中。

孩子可以通过 HTML 表单进行更新，父母则在 HTML 多选中。现在我需要更新数据库中的记录，但是我的解决方案效率不是很高。这是我所做的伪代码：

1.  更新child_id=x的子信息
2.  删除 parent_child_link 中的所有当前关联，其中 child_id=x
3.  插入新的关联

这个解决方案效果很好，但是当父母没有改变时，例如只改变了孩子的名字，那么就会执行2个不必要的查询。我怎样才能避免那些不必要的查询？有没有办法检查多选中的父母是否没有改变？

当然我可以忽略所有这些麻烦，因为它已经工作了，但我真的很喜欢让事情尽可能高效。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T15:42:59.267

我有同样的问题，并在阅读时想出了我的解决方案。

当我准备好处理提交的条目时，我首先进行查询以获取当前关联并调用该数组 $original_list。提交的列表我将调用$submitted_list。

```
$original_list = array(3,5,7);
$submitted_list = array(1,2,3); 
```

然后我只需要弄清楚 1）要删除哪些项目（不再存在）和 2）要添加哪些项目（新关联）。两个列表中的项目都不会被触及。

```
$delete_list = array_diff($original_list, $submitted_list);
$insert_list = array_diff($submitted_list, $original_list);

foreach($delete_list as $item) {
    // delete $item from DB
}

foreach($insert_list as $item) {
    // insert item in db
} 
```

很想知道其他人是否认为这是一个有效的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:34:14.920

尝试在数据库中解决它，而不是在应用层通过使用`ON UPDATE CASCADE`和`ON DELETE CASCADE`在子表的定义中解决。

MySQL 站点的一个稍微修改的示例：

```
CREATE TABLE parent (id INT NOT NULL,
                     PRIMARY KEY (id)
) ENGINE=INNODB;

CREATE TABLE child (id INT, parent_id INT,
                    INDEX par_ind (parent_id),
                    FOREIGN KEY (parent_id) REFERENCES parent(id)
                      ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=INNODB; 
```

在此处查看文档：http: [//dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

编辑：对于您的多对多关系，您可以使用以下内容：

```
CREATE TABLE parent_child_link (
                    parent_id INT NOT NULL,
                    child_id INT NOT NULL,
                    PRIMARY KEY(parent_id, child_id),
                    FOREIGN KEY (parent_id) REFERENCES parent(id)
                      ON DELETE CASCADE ON UPDATE CASCADE,
                    FOREIGN KEY (child_id) REFERENCES child(id)
                      ON DELETE CASCADE ON UPDATE CASCADE
); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:55:07.383

你的解决方案很好。
在您的情况下，您可以通过查询以检索父母并检查多选数据是否发生任何更改来“优化”该过程。
然后，您只需在需要时执行两个删除和插入查询。对应的是，当您实际更改父母时，将有 3 个查询而不是 2 个。
所以您应该经常询问您是否要修改父母。在这种情况下，您应该坚持原来的解决方案以避免额外的选择查询。
如果您认为父母不会经常更新，那么您可以使用上述解决方案。仅更新子信息时，仅执行一个查询。当您还更新父母时，将执行 3 个查询。
当您使用第二种解决方案时，也可以优化删除和插入查询以仅执行所需的操作（仅删除不再是其父级的父级并仅插入新的父级链接）。
PHP 数组函数对此很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T13:47:57.570

如果您想保持当前的执行方式，但只是进行优化，您可以将查询包装在 IF 语句中。

像：

`if ( isset ( $parent_name_change )){ // run query }`

# php - 如何使用 __get() 在多级对象属性访问中返回 null？

> ID：10462234
> 
> 赞同：3
> 
> 时间：2012-05-05T13:16:28.160
> 
> 标签：php, php-5.3, stdclass

如何使用 __get() 在访问下面这样的案例的多级对象属性中返回 null？

例如，这是我的课，

```
class property 
{

    public function __get($name)
    {
        return (isset($this->$name)) ? $this->$name : null;
    }
}

class objectify
{

    public function array_to_object($array = array(), $property_overloading = false)
    {
        # if $array is not an array, let's make it array with one value of former $array.
        if (!is_array($array)) $array = array($array);

        # Use property overloading to handle inaccessible properties, if overloading is set to be true.
        # Else use std object.
        if($property_overloading === true) $object = new property();
            else $object = new stdClass();

        foreach($array as $key => $value)
        {
            $key = (string) $key ;
            $object->$key = is_array($value) ? self::array_to_object($value, $property_overloading) : $value;
        }

        return $object;

    }
} 
```

我如何使用它，

```
$object = new objectify();

$type = array(
    "category"  => "admin",
    "person"    => "unique",
    "a"         => array(
        "aa" => "xx",
        "bb"=> "yy"
    ),
    "passcode"  => false
);

$type = $object->array_to_object($type,true);
var_dump($type->a->cc); 
```

结果，

```
null 
```

但是当输入数组为 NULL 时，我收到一条错误消息`null`，

```
$type = null;
$type = $object->array_to_object($type,true);
var_dump($type->a->cc); 
```

结果，

```
Notice: Trying to get property of non-object in C:\wamp\www\test...p on line 68
NULL 
```

在这种情况下可以返回 NULL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:22:36.520

是的，但解释如何并不是那么简单。首先了解您遇到该问题的原因：

```
$value = $a->b->c; 
```

这将首先返回`NULL`. `$a->b`所以实际上你写道：

```
$value = NULL->c; 
```

因此，`NULL`您需要返回一个与`NULL`您`NULLObect`的基类类似并表示`NULL`.

正如您可以想象的那样，您无法`NULL`在 PHP 中使用它进行真正的模拟，而且 PHP 的语言功能太有限，无法无缝地实现这一点。

但是，您可以尝试接近`NULLObect`我所描述的。

```
class property 
{

    public function __get($name)
    {
        isset($this->$name) || $this->$name = new NULLObject();
        return  $this->$name;
    }
}

class NULLObject extends Property {}; 
```

请注意，这可能不是您要查找的内容。如果它不符合您的需要，很*可能*PHP 是您用于编程的错误语言。使用一些比 PHP 具有更好的成员覆盖特性的语言。

相关问题：

*   [通过引用使用 __get()](https://stackoverflow.com/q/4527175/367456)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:26:39.060

您可以返回新属性而不是 null

```
 public function __get($name)
    {
        return (isset($this->$name)) ? $this->$name : new property();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-29T13:53:00.193

是的，我知道已经是 4 年前了，但本周我遇到了类似的问题，在我试图解决它时，我发现了这个线程。所以，这是我的解决方案：

```
class NoneWrapper
{
    private $data;

    public function __construct($object)
    {
        $this->data = $object;
    }

    public function __get(string $name)
    {
        return property_exists($this->data, $name)
            ? new NoneWrapper($this->data->$name)
            : new None;
    }

    public function __call($name, $arguments)
    {
        if (is_object($this->data)) {
            return (property_exists($this->data, $name))
            ? $this->data->$name
            : null;
        } else {
            return null;
        }
    }

    public function __invoke()
    {
        return $this->data;
    }
}

class None
{
    public function __get(string $name) {
        return new None;
    }

    public function __call($name, $arguments)
    {
        return null;
    }

    public function __invoke()
    {
        return null;      
    }
}

$object = new NoneWrapper(
    json_decode(
        json_encode([
            'foo' => [
                'bar' => [
                    'first' => 1,
                    'second' => 2,
                    'third' => 3,
                    'fourth' => 4,
                ],
            ]
        ])
    )
);

var_dump($object->foo->bar->baz()); // null
var_dump($object->foo->bar->third()); // 3 
```

# python - python 3.2.3 中的 Zip 函数无法按预期工作

> ID：10462237
> 
> 赞同：2
> 
> 时间：2012-05-05T13:17:00.150
> 
> 标签：python, function, matrix, zip, transpose

我正在尝试定义一个转置矩阵的函数。这是我的代码：

```
def Transpose (A):
    B = list(zip(*A))
    return B 
```

现在，当我像这样在程序中的某处调用该函数时：

```
Matrix = [[1,2,3],[4,5,6],[7,8,9]]
Transpose(Matrix)
print(Matrix) 
```

矩阵不变。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T13:18:30.750

您的函数返回一个不会影响您的矩阵的新值（`zip`不会更改它的参数）。你没有做错任何事，这是正确的做事方式。只需将其更改为：

```
print(Transpose(Matrix)) 
```

或者

```
Matrix = Transpose(Matrix) 
```

注意：你真的应该为你的函数和变量使用小写的名字。

# plugins - 本站 Joomla 脚本上安装了哪些插件

> ID：10462238
> 
> 赞同：0
> 
> 时间：2012-05-05T13:17:10.267
> 
> 标签：plugins, joomla

本站 Joomla 脚本上安装了哪些插件：http: [//www.josourmagazine.ae/english/](http://www.josourmagazine.ae/english/) （样式、模型、扩展、插件...等）感谢 zuhair 的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:10:30.703

只要看看源代码，你就会有一些想法！

# c# - 以原点为中心的十二面体三角形的索引

> ID：10462243
> 
> 赞同：0
> 
> 时间：2012-05-05T13:17:38.973
> 
> 标签：c#, 3d, polyhedra

维基百科说原点的十二面体具有具有此坐标（x，y，z）的顶点：

```
 (±1, ±1, ±1)
   (0, ±1/φ, ±φ)
   (±1/φ, ±φ, 0)
   (±φ, 0, ±1/φ)

where φ is golden ratio (φ = (1 + √5) / 2 ≈ 1.618 ) 
```

假设我将在 vertexBuffer 中有这个顶点 - 这将是一个 Point3D 数组。我需要为 indexBuffer（它是一个 int 数组）准备三角形索引。十二面体有 12 个面，每个面都是五边形，我将以这种方式从 3 个三角形创建每个面：

![在此处输入图像描述](../Images/16a7a6b92424437d9514879b21b7d36a.png)

```
first triangle: a,e,b
second triangle: b,e,d
third triangle: d,c,b 
```

为了更简单的多面体，我可以绘制它，然后标记顶点，然后轻松获取索引，但在这种情况下，这不是一个好方法，因为在这个有 20 个面的二十面体等着我之后：/
**所以我的问题是：有没有任何更简单的方法如何根据上面指定的要求获取此顶点的索引？**

注意：
我还应该提到，我不能使用 openGL 或 DirectX。我们应该在没有这个库的情况下练习 3D 图形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:35:41.503

第一组 8 个顶点定义了一个立方体。

剩下的 3x4 点分为 6 对，位于立方体的 6 个面的每一个之外。

每组六个点（立方体面的四个顶点和相应的远离原点的两个点）形成一个重复六次的图案。您可以从每组中获得 6 个三角形。

二十面体实际上更简单：它只有 20 个三角形而不是 36 个。它具有类似的模式，您可以在其 Wikipedia 页面上看到。

# javascript - onscroll 事件和滚动条按钮

> ID：10462246
> 
> 赞同：0
> 
> 时间：2012-05-05T13:17:53.830
> 
> 标签：javascript, scroll, dom-events

这是简化的html：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            function handle() { console.log("fired"); };
        </script>
    </head>
    <body>
        <div style="width:200px; height:100px; overflow-y: scroll; border: 1px solid gray;" onscroll="handle()">
            <div style="width:150px; height:400px;">&nbsp;</div>
        </div>
    </body>
</html> 
```

问题是，当 div 根本不滚动（初始位置）时，滚动条顶部带有三角形符号的小按钮不会触发事件。也许这是合乎逻辑的，但我寻找一种解决这种行为的方法，因为这是目前解决启用拖放的 dojo 框架树小部件的唯一方法。是的，我知道，解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:42:04.517

好吧，它并不漂亮，但这应该可以解决问题：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            function handle() { console.log("fired"); };
        </script>
    </head>
    <body>
        <div id="div" style="width:200px; height:100px; overflow-y: scroll; border: 1px solid gray;">
            <div style="width:150px; height:400px;">&nbsp;</div>
        </div>
        <script>

            //Get the element
            var div = document.getElementById("div");

            var ignore = true;

            //Set the scroll to 1 (this will allow it to scroll up)
            div.scrollTop = 1;

            div.addEventListener("scroll", function(){

                //Ignore generating output if the code set the scroll position
                if(ignore) {
                    ignore = !ignore;
                    return;
                }

                //CODE GOES HERE
                handle();

                //If the scroll is at the top, go down one so that the user
                //is still allowed to scroll.
                if(div.scrollTop <= 1) {
                    ignore = true;
                    div.scrollTop = 1;
                }

                //If the scroll is at the bottom, go up one so the user can
                //still scroll down
                else if(div.scrollTop >= div.scrollHeight-div.clientHeight - 1) {
                    ignore = true;
                    div.scrollTop = div.scrollHeight-div.clientHeight - 1;
                }

            }, true);
        </script>
    </body>
</html> 
```

我删除了内联函数调用并将其替换为`eventListener`. 基本上，它确保用户永远不会完全滚动到顶部或底部，从而确保始终存在滚动事件。

# android - 有没有办法在 Eclipse 的一个窗口中编辑多个本地化的 string.xml 文件？

> ID：10462247
> 
> 赞同：4
> 
> 时间：2012-05-05T13:18:11.837
> 
> 标签：android, eclipse, localization

`strings.xml`在开发本地化的 Android 应用程序时，我发现每当我在 的一种语言版本中更改值时，我都必须记住在其他版本中也进行更改，这有点烦人。

有什么方法可以在一个窗口中打开多个（或至少两个）`string.xml`文件，并排显示所有消息的语言版本，类似于资源包编辑器？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T16:47:15.080

作为其他人的后续行动，是的，MOTODEV Studio 中有一个多语言 strings.xml 编辑器。

通过访问 Eclipse Marketplace（Help->Eclipse Marketplace）或创建新的更新站点（Help->Install New Software）并使用[https://studio-android.motodevupdate.com/android将一组插件安装到 Eclipse /4.0/basic](https://studio-android.motodevupdate.com/android/4.0/basic)作为更新站点地址。

如果第一次没有自动打开，右击strings.xml，选择“Open With->Other”，找到“Localization Files Editor”。之后它应该每次都打开这个编辑器。

![在此处输入图像描述](../Images/0f48cc37646f5d972d080983965dd437.png)

这是一个 YouTube 视频，展示了它的工作原理：[http ://www.youtube.com/watch?v=0Asv-IoH9M0](http://www.youtube.com/watch?v=0Asv-IoH9M0)

免责声明：我是 MOTODEV Studio 的产品经理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T13:50:00.000

是的，我在一个需要多语言支持的项目中也遇到了这个问题，我认为没有这样的工具可以做到这一点。但是我们可以在 Eclipse 中平铺窗口并同时对两种语言进行编辑![在此处输入图像描述](../Images/5820639fa0fca84a7d123467769c0f53.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-31T15:01:59.697

使用以下 Eclipse 更新站点：http: [//download.eclipse.org/sequoyah/updates/2.1/](http://download.eclipse.org/sequoyah/updates/2.1/)

确保取消选中“按类别分组项目”，否则您将看不到任何可用的包裹！

选择“Sequoyah android Localization Editor”并安装软件包。

右键单击您的“strings.xml”文件之一，然后选择打开方式 -> 其他 -> '本地化文件编辑器'

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T15:29:45.073

您可以安装适用于 Android 的 MOTODEV Studio。它有很多东西，包括 Android 本地化文件编辑器。 [http://developer.motorola.com/tools/motodevstudio/features/](http://developer.motorola.com/tools/motodevstudio/features/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-27T12:24:10.587

非常老的问题，但有一个新的答案。在 Android Studio 中，使用语言编辑器作为并行语言编辑器。

[![在此处输入图像描述](../Images/effa2adf086244254e9ffee9f11f6c30.png)](https://i.stack.imgur.com/z5DeV.png)

见[https://developer.android.com/studio/write/translations-editor.html](https://developer.android.com/studio/write/translations-editor.html)

# objective-c - 检索屏幕上的 UITextField 位置

> ID：10462255
> 
> 赞同：0
> 
> 时间：2012-05-05T13:19:13.223
> 
> 标签：objective-c, xcode

如何检索我的 UITextField 的位置？

我可以适当地创建许多 UITextField，然后将它们移动到屏幕上。然后通过以下方式（按标签），我检测到文字很好，但我也想要位置（es：GRect 0,0,0,0）。

```
for (UITextField *text in array2) {

int touchedtag = text.tag;

NSUInteger tagCount = touchedtag;
switch (tagCount) {
    case 1: 
        size = [NSString stringWithFormat:@"%@", text.frame];

        object = [NSString stringWithFormat:@"%@  %@", text.text, size];

        break;

 } 
```

我试过这个（使用大小），但它不起作用。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:22:22.683

textField 的位置应显示在`textfield.frame`. 但是如果你不想 NSLog 你需要使用的框架`NSStringFromCGRect(textField.frame)`。

# javascript - 如何检测浏览器是否支持此 HTML5 功能

> ID：10462257
> 
> 赞同：4
> 
> 时间：2012-05-05T13:19:22.280
> 
> 标签：javascript, jquery, html, cross-browser, html5-filesystem

我想检测（使用 javascript/jQuery）用户的浏览器是否支持`multiple`属性`input type='file'`标记。HTML5 添加多个图像的功能。

```
<input type=file  name="images" value=" " multiple=""/> 
```

请建议我该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T13:23:44.147

```
var i = document.createElement("input");
if (typeof i.multiple !== 'undefined') {
    // supports multiple
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T13:21:26.507

您可以使用`modernizr`为此目的开发的。

[http://modernizr.com/](http://modernizr.com/)

您可以通过`placeholder`以下方式检测对功能的支持：

```
if (!Modernizr.input.placeholder) {

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T13:26:32.210

从 Modernizr 来源获取和编辑：

```
var inputElem = document.createElement('input');
var multipleSupport = !!(multiple in inputElem); 
```

如果这是您唯一需要的，则不需要包含完整的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T13:21:39.943

我建议你使用 Modernizr javascript 库？这提供了一种检查浏览器是否支持各种功能的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T13:26:21.367

您可以使用[Modernizr](http://modernizr.com/docs/#input)，它会为您进行大量此类测试。

但是，在这种情况下，测试非常简单：

```
if (typeof document.createElement('input').multiple !== "undefined") {
    // ... yes, it has it
} 
```

元素上的所有其他新属性也是如此。

# clojure - Clojure源代码中的父评估（阅读器）函数？

> ID：10462262
> 
> 赞同：5
> 
> 时间：2012-05-05T13:20:20.360
> 
> 标签：clojure, scheme, eval

在[彼得·诺维格（Peter Norvig）的](http://norvig.com/)史诗[巨著《人工智能编程范式》](http://norvig.com/paip.html)第 7 章中，他描述了一个函数，该函数实际上是在解释 REPL 中的基本方案时使用`interp`的一个简单函数。`eval`

```
(defun interp (x &optional env)
  "Interpret (evaluate) the expression x in the environment env."
  (cond
    ((symbolp x) (get-var x env))
    ((atom x) x)
    ((case (first x)
       (QUOTE  (second x))
       (BEGIN  (last1 (mapcar #'(lambda (y) (interp y env))
                              (rest x))))
       (SET!   (set-var! (second x) (interp (third x) env) env))
       (IF     (if (interp (second x) env)
                   (interp (third x) env)
                   (interp (fourth x) env)))
       (LAMBDA (let ((parms (second x))
                     (code (maybe-add 'begin (rest2 x))))
                 #'(lambda (&rest args)
                     (interp code (extend-env parms args env)))))
       (t      ;; a procedure application
               (apply (interp (first x) env)
                      (mapcar #'(lambda (v) (interp v env))
                              (rest x)))))))) 
```

有趣的是[——Christian Queinnec 的](http://pagesperso-systeme.lip6.fr/Christian.Queinnec/WWW/Queinnec.html) [Lisp In Small Pieces](http://en.wikipedia.org/wiki/Lisp_in_Small_Pieces)的开头章节有一个非常相似的功能，他称之为`eval`。

```
;;; This is a naive evaluator for Scheme written in naive Scheme.

(define (evaluate e env)
  (if (atom? e) 
      (cond ((symbol? e) (lookup e env))
            ((or (number? e) (string? e) (char? e)
                 (boolean? e) (vector? e) )
             e )
            (else (wrong "Cannot evaluate" e)) )
      (case (car e)
        ((quote)  (cadr e))
        ((if)     (if (evaluate (cadr e) env)
                      (evaluate (caddr e) env)
                      (evaluate (cadddr e) env) ))
        ((begin)  (eprogn (cdr e) env))
        ((set!)   (update! (cadr e) env (evaluate (caddr e) env)))
        ((lambda) (make-function (cadr e) (cddr e) env))
        (else     (invoke (evaluate (car e) env)
                          (evlis (cdr e) env) )) ) ) ) 
```

我的问题是 - Clojure 源在哪里是等效`eval`/`interp`功能？我假设它在某个地方的阅读器代码中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T13:31:11.947

你的意思是，Clojure 的`eval`程序是什么？那将是[clojure.core/eval](http://clojuredocs.org/clojure_core/1.2.0/clojure.core/eval)。文档中的此[链接](http://clojure.org/evaluation)显示了评估的发生方式：

*   交互式地，在 REPL
*   在从流中读取的一系列表单上，通过加载或加载文件
*   以编程方式，通过`eval`

如果您对*实际*的源代码感兴趣，请查看 Clojure 的[`core.clj`](http://code.google.com/p/clojure/source/browse/trunk/src/clj/clojure/core.clj)文件。特别是，代码`eval`如下所示：

```
(defn eval
  "Evaluates the form data structure (not text!) and returns the result."
  [form] (. clojure.lang.Compiler (eval form))) 
```

反过来，类中的`eval`方法`Compiler`（在上面的代码片段中引用，并位于[Compiler.java](http://code.google.com/p/clojure/source/browse/trunk/src/jvm/clojure/lang/Compiler.java)文件中）如下所示：

```
public static Object eval(Object form) throws Exception{
    boolean createdLoader = false;
    if(true)//!LOADER.isBound())
        {
        Var.pushThreadBindings(RT.map(LOADER, RT.makeClassLoader()));
        createdLoader = true;
        }
    try
        {
        Integer line = (Integer) LINE.deref();
        if(RT.meta(form) != null && RT.meta(form).containsKey(RT.LINE_KEY))
            line = (Integer) RT.meta(form).valAt(RT.LINE_KEY);
        Var.pushThreadBindings(RT.map(LINE, line));
        try
            {
            form = macroexpand(form);
            if(form instanceof IPersistentCollection && Util.equals(RT.first(form), DO))
                {
                ISeq s = RT.next(form);
                for(; RT.next(s) != null; s = RT.next(s))
                    eval(RT.first(s));
                return eval(RT.first(s));
                }
            else if(form instanceof IPersistentCollection
                    && !(RT.first(form) instanceof Symbol
                         && ((Symbol) RT.first(form)).name.startsWith("def")))
                {
                FnExpr fexpr = (FnExpr) analyze(C.EXPRESSION, RT.list(FN, PersistentVector.EMPTY, form), "eval");
                IFn fn = (IFn) fexpr.eval();
                return fn.invoke();
                }
            else
                {
                Expr expr = analyze(C.EVAL, form);
                return expr.eval();
                }
            }
        finally
            {
            Var.popThreadBindings();
            }
        }
    catch(Throwable e)
        {
        if(!(e instanceof CompilerException))
            throw new CompilerException((String) SOURCE.deref(), (Integer) LINE.deref(), e);
        else
            throw (CompilerException) e;
        }
    finally
        {
        if(createdLoader)
            Var.popThreadBindings();
        }
} 
```

我想这不是你所期望的那样，但考虑到 Clojure 在 JVM 之上运行的事实，评估部分作为 Java 程序而不是 Lisp 程序是有道理的——就像在问题中引用的代码。

# html - 让音频在服务器上的不同浏览器上工作

> ID：10462266
> 
> 赞同：0
> 
> 时间：2012-05-05T13:20:56.710
> 
> 标签：html

我使用了 HTML 5 音频标签，如下所示

```
<audio controls="control_2">
<source src="D:\HND_grrrrr\Year_2\RoyWebsite\Sounds\WAV\home_page_readout.wav"  type="audio/wav"/>
<source src="D:\HND_grrrrr\Year_2\RoyWebsite\Sounds\MP3\home_page_readout.mp3" type="audio/mp3"/>
<source src="D:\HND_grrrrr\Year_2\RoyWebsite\Sounds\ogg\home_page_readout.ogg" type="audio/ogg"/>

 </audio> 
```

现在，当我在页面未上传到服务器时加载页面时，它设法在 chrome 和 IE 上工作，但是在其他浏览器上出现播放器，但似乎没有文件，因为当我按下播放时没有任何反应。

现在，当我将页面放到服务器上时（我使用的是 USB 网络服务器 V8.2），无论播放器都没有显示什么浏览器，我什么都得不到。我已经尝试将链接更改为相对链接，并且我检查了我的所有文件都在那里并且它们都在那里。当我单击服务器上的实际文件时，它们会起作用，所以我不知道。

任何帮助将不胜感激谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:23:45.100

要解决问题的后半部分，也可能是第一部分，请使用相对路径来加载音频文件。因此，如果您的 Web 服务器从 /var/www/website/index.php 加载文件，请将文件放在更近的路径中，即 /var/www/website/sounds，然后从 ./sounds/FILE_NAME 加载文件。延期

# jsp - 带有 RichFaces 4 的 JSP 2.0 不适用于 JBoss 7

> ID：10462267
> 
> 赞同：2
> 
> 时间：2012-05-05T13:20:59.037
> 
> 标签：jsp, richfaces

我的应用程序有问题，在服务器上部署它后，我在日志中收到错误：

```
15:12:45,359 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-5) Critical error during deployment: : com.sun.faces.config.ConfigurationException: 
  Source Document: vfs:/content/FiboRichFaces.war/WEB-INF/lib/richfaces-core-impl-4.2.1.Final.jar/META-INF/faces-config.xml
  Cause: Unable to create a new instance of 'org.richfaces.resource.ResourceHandlerImpl': java.lang.reflect.InvocationTargetException
    at com.sun.faces.config.processor.AbstractConfigProcessor.createInstance(AbstractConfigProcessor.java:293) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.processor.ApplicationConfigProcessor.setResourceHandler(ApplicationConfigProcessor.java:766) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.processor.ApplicationConfigProcessor.process(ApplicationConfigProcessor.java:313) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.processor.LifecycleConfigProcessor.process(LifecycleConfigProcessor.java:116) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:222) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:361) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.10.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_31]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_31]
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [classes.jar:1.6.0_31]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) [classes.jar:1.6.0_31]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [classes.jar:1.6.0_31]
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [classes.jar:1.6.0_31]
    at com.sun.faces.config.processor.AbstractConfigProcessor.createInstance(AbstractConfigProcessor.java:263) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    ... 16 more
Caused by: java.lang.NoClassDefFoundError: com/google/common/base/Function
    at org.richfaces.resource.ResourceHandlerImpl.<init>(ResourceHandlerImpl.java:62) [richfaces-core-impl-4.2.1.Final.jar:4.2.1.Final]
    ... 21 more
Caused by: java.lang.ClassNotFoundException: com.google.common.base.Function from [Module "deployment.FiboRichFaces.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 22 more

15:12:45,399 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/FiboRichFaces]] (MSC service thread 1-5) Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: 
  Source Document: vfs:/content/FiboRichFaces.war/WEB-INF/lib/richfaces-core-impl-4.2.1.Final.jar/META-INF/faces-config.xml
  Cause: Unable to create a new instance of 'org.richfaces.resource.ResourceHandlerImpl': java.lang.reflect.InvocationTargetException
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:292) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.10.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_31]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_31]
Caused by: com.sun.faces.config.ConfigurationException: 
  Source Document: vfs:/content/FiboRichFaces.war/WEB-INF/lib/richfaces-core-impl-4.2.1.Final.jar/META-INF/faces-config.xml
  Cause: Unable to create a new instance of 'org.richfaces.resource.ResourceHandlerImpl': java.lang.reflect.InvocationTargetException
    at com.sun.faces.config.processor.AbstractConfigProcessor.createInstance(AbstractConfigProcessor.java:293) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.processor.ApplicationConfigProcessor.setResourceHandler(ApplicationConfigProcessor.java:766) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.processor.ApplicationConfigProcessor.process(ApplicationConfigProcessor.java:313) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.processor.LifecycleConfigProcessor.process(LifecycleConfigProcessor.java:116) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:222) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:361) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    ... 8 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [classes.jar:1.6.0_31]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) [classes.jar:1.6.0_31]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [classes.jar:1.6.0_31]
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [classes.jar:1.6.0_31]
    at com.sun.faces.config.processor.AbstractConfigProcessor.createInstance(AbstractConfigProcessor.java:263) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    ... 16 more
Caused by: java.lang.NoClassDefFoundError: com/google/common/base/Function
    at org.richfaces.resource.ResourceHandlerImpl.<init>(ResourceHandlerImpl.java:62) [richfaces-core-impl-4.2.1.Final.jar:4.2.1.Final]
    ... 21 more
Caused by: java.lang.ClassNotFoundException: com.google.common.base.Function from [Module "deployment.FiboRichFaces.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 22 more

15:12:45,414 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-5) Error listenerStart
15:12:45,414 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-5) Context [/FiboRichFaces] startup failed due to previous errors
15:12:45,415 SEVERE [javax.faces] (MSC service thread 1-5) Application was not properly initialized at startup, could not find Factory: javax.faces.application.ApplicationFactory. Attempting to find backup.
15:12:45,416 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-5) Unexpected exception when attempting to tear down the Mojarra runtime: java.lang.IllegalStateException: Could not find backup for factory javax.faces.application.ApplicationFactory. 
    at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:1004) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:316) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at com.sun.faces.config.InitFacesContext.getApplication(InitFacesContext.java:131) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.config.ConfigureListener.contextDestroyed(ConfigureListener.java:328) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:3489) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:3999) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3917) [jbossweb-7.0.10.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_31]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_31]

15:12:45,420 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC00001: Failed to start service jboss.web.deployment.default-host./FiboRichFaces: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./FiboRichFaces: JBAS018040: Failed to start context
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_31]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_31]

15:12:45,624 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 1) JBAS015870: Deploy of deployment "FiboRichFaces.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./FiboRichFaces" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./FiboRichFaces: JBAS018040: Failed to start context"}}
15:12:45,632 INFO  [org.jboss.weld.deployer] (MSC service thread 1-6) JBAS016009: Stopping weld service for deployment FiboRichFaces.war
15:12:45,662 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) JBAS015877: Stopped deployment FiboRichFaces.war in 38ms
15:12:45,663 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 1) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.web.deployment.default-host./FiboRichFaces: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./FiboRichFaces: JBAS018040: Failed to start context 
```

**环境**

*   服务器：JBoss Web 7.0.10 Final
*   小服务程序规范：3.0
*   JSP 版本：2.0

**WEB-INF/库**

*   richfaces-components-api-4.2.1.Final.jar
*   richfaces-components-ui-4.2.1.Final.jar
*   richfaces-core-api-4.2.1.Final.jar
*   richfaces-core-impl-4.2.1.Final.jar
*   sac-1.3.jar
*   验证-api-1.0.0.GA.jar
*   cssparser-0.9.5.jar
*   番石榴-r07-sources.jar
*   annotations-4.0.0.Final.jar

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

**面孔-config.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
        http://java.sun.com/xml/ns/javaee
        http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">

    <managed-bean>
        <managed-bean-name>FiboRichBean</managed-bean-name>
        <managed-bean-class>bean.FiboRichBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
</faces-config> 
```

我与它斗争了好几个小时……当我解决一个问题时，另一个问题就会发生。

感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T19:47:08.557

这是您的异常的根本原因：

```
Caused by: java.lang.ClassNotFoundException: com.google.common.base.Function 
```

因此，Webapp 的运行时类路径中缺少[Guava 。](http://code.google.com/p/guava-libraries/)

事实上，在您的 JAR 列表中，您只有 Guava 源代码文件：

> *   番石榴-r07-sources.jar

您需要带有类文件的 JAR 文件，而不是带有源代码文件的 JAR 文件。您需要文件名中没有“-sources”的那个。

* * *

**与具体问题无关**，您不应该使用古老的 JSP 视图技术，而应该使用它的继承者[Facelets](https://stackoverflow.com/tags/facelets/info)。否则，您将无法使用完整的 JSF 2 功能。

# java - 从 Eclipse 中启动时，Web 服务器的响应时间显着延长

> ID：10462268
> 
> 赞同：0
> 
> 时间：2012-05-05T13:21:17.160
> 
> 标签：java, eclipse, jetty, embedded-jetty, response-time

我正在开发一个包含嵌入式 Jetty 网络服务器的应用程序。当我从 Eclipse 中开始时，即使对于我希望在大约 15 毫秒内返回的非常简单的请求，我也会体验到大约 100 毫秒的响应时间。但是，当我将我的应用程序打包到一个 jar 中并在 eclipse 之外运行它时，它的速度与我预期的一样快。我不在调试模式下运行，并且在 eclipse 中运行时没有普遍的减速。似乎响应时间的下限约为 100 毫秒。有人对此有解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:50:35.333

你在控制台上写什么吗？写入 Eclipse 控制台可能比写入终端窗口慢很多。

# android - 使用多次后如何阻止android中的应用程序？

> ID：10462273
> 
> 赞同：0
> 
> 时间：2012-05-05T13:21:41.417
> 
> 标签：android, security

我为制药公司创建了一个应用程序。

现在我想在启动 10 次后停止该应用程序，甚至用户在卸载并重新安装应用程序后也无法启动应用程序。

我怎么能那样做？

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:26:47.180

> 现在我想在启动 10 次后停止该应用程序

欢迎您维护某种计数器并在不再使用时禁用您的启动活动，通过`PackageManager`和`setComponentEnabledSetting()`。

> 甚至用户在卸载并重新安装应用程序后也无法启动应用程序

这是不可能的。您可以将计数器存储在外部存储上，即使在卸载后也会保留的某个地方。但是，用户可以随时删除您的计数器文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T13:37:14.657

如果您的应用程序使用网络连接，您可以使用唯一设备 ID 向您的服务发送参数。在您的服务中，您将获得设备 ID 并与您的数据库进行比较。如果设备 ID 不在数据库中（第一次打开应用程序），则使用设备 ID 和时间戳创建一行。每次用户打开应用程序时，都会控制今天的时间戳。如果超过 10 天，您可以锁定应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:43:33.340

您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。

*   创建一个 int 变量 = 0 并将其存储到 SharedPreferences
*   在**onCreate**方法中，增加这个变量
*   检查（在**onCreate**方法中），如果此变量 > 10 - 调用 finish()

就这样。希望这有帮助。

# android - 按下主页按钮后重新启动应用程序时不会调用 onResume

> ID：10462280
> 
> 赞同：3
> 
> 时间：2012-05-05T13:21:59.313
> 
> 标签：android, lifecycle

所以我有我的主要活动，当你按下一个按钮时，它会启动 activity2。一旦 activity2 启动，我按下主页按钮，它将在 activity2 触发*onPause*，然后 android 设备的桌面进入顶部。一切都好。

问题是：现在我单击应用程序图标，而不是进入顶部活动 2（最后一个活动），它是我的主要活动。所以*onResume*不是在 activity2 上调用的，而是在我的主要活动上调用的。

不应该在activity2上调用*onResume*吗？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:37:57.257

如果您从主屏幕启动器启动应用程序，您将专门启动该启动器图标对应的活动。

您正在考虑的行为更像是您通过后台堆栈中的活动重新进入时发生的情况。

如果您希望主屏幕启动器图标将您带回您之前所处的任何活动，而该活动与该图标所链接的活动不同，则您需要跟踪该图标并让您的启动器活动将您转移到那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:06:35.930

可以肯定的是，您没有覆盖能够捕获设备按钮的[onKeyDown方法吗？](http://developer.android.com/reference/android/view/View.html#onKeyDown%28int,%20android.view.KeyEvent%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-17T20:21:22.430

从清单文件中的启动器活动中删除***android:launchMode="singleTask"***。

# windows - 编译 Mingw-Cross-Compiler 时出现问题：“/lib/cpp”未通过完整性检查

> ID：10462287
> 
> 赞同：3
> 
> 时间：2012-05-05T13:23:17.097
> 
> 标签：windows, macos, makefile, mingw, cross-compiling

我正在使用 GCC4.7.0 开发 Mac OSX Lion，我的目标是编译一个 win32 交叉编译器。

GMP 和 MPFR，使用 Macports（以及 GCC47）安装。

使用的文件：

*   w32api-3.17-2-mingw32-dev.tar.lzma
*   mingwrt-3.20-mingw32-dev.tar.gz
*   binutils-2.22-1-mingw32-src.tar.lzma
*   src-gcc-4.7.0-release.tar.7z

Win32 api 和 mingw 运行时库，安装在此处：**/opt/mingw**

像这样编译 binutils 似乎工作正常：

```
 mkdir build
 cd build
 ../configure --prefix=/opt/mingw/ --target=i686-mingw32 --host=x86_64-apple-darwin \
   --build=x86_64-apple-darwin --with-libs=/opt/mingw/lib --with-headers=/opt/mingw/include \
   --with-gxx-include-dir=/opt/mingw/include/c++
 make
 sudo make install 
```

所以下一步是编译 gcc，但这会导致错误，我使用的命令：

```
 mkdir build
 cd build
 ../configure --prefix=/opt/mingw/                                              \
          --with-gmp=/opt/local/ --with-mpfr=/opt/local/                        \
          --target=i686-mingw32 --host=x86_64-apple-darwin                      \
          --build=x86_64-apple-darwin --with-libs=/opt/mingw/lib                \
          --with-headers=/opt/mingw/include                                     \
          --with-gxx-include-dir=/opt/mingw/include/c++                         \
          --with-gcc --with-tune=generic --disable-werror                       \
          --disable-win32-registry --enable-sjlj-exceptions                     \
          --enable-libstdcxx-debug                                              \
          --enable-cxx-flags='-fno-function-sections -fno-data-sections'        \
          --enable-version-specific-runtime-libs                                \
          --disable-bootstrap --enable-threads --disable-nls                    \
          --enable-languages=c,c++
 make
 sudo make install 
```

命令行错误：

```
//...
option to accept ISO C89... unsupported
checking how to run the C preprocessor... /lib/cpp
configure: error: in `/Users/Nik/Development/mingw-src/gcc-4.7.0/build/i686-mingw32/libgcc':
configure: error: C preprocessor "/lib/cpp" fails sanity check
See `config.log' for more details.
make[1]: *** [configure-target-libgcc] Error 1
make: *** [all] Error 2 
```

config.log 可以在**[这里](http://pastebin.com/5Dg0YeD2)**找到！

这是我第一次编译交叉编译器，这是一项相当复杂的任务，所以我希望有人能帮助我。

编辑：

似乎缺少一些常用的 c 头文件，但我不确定如何解决这个问题。

# iphone - iPhone NSURL 错误

> ID：10462289
> 
> 赞同：0
> 
> 时间：2012-05-05T13:23:21.357
> 
> 标签：iphone, objective-c, ios, xcode, nsurl

我正在使用此代码将我的按钮链接分配给 wiki 页面，同时将 UILabel 中的 countryName.text 捕获为 URL 的一部分，但是当我按下它时 Xcode 给我一个错误。这是代码：

```
- (IBAction)openWiki:(id)sender {
NSString *sampleUrl = [[NSString alloc] initWithFormat:@"http://en.wikipedia.org/wiki/%@%@",self.countryName.text];
NSURL *wikiUrl = [[NSURL alloc] initWithString:sampleUrl];
[[UIApplication sharedApplication] openURL:wikiUrl];} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:27:13.680

在您的格式中，您需要两个参数，但只给出一个：

```
@"http://en.wikipedia.org/wiki/%@%@",self.countryName.text
//                             ^^ 
```

删除一个说明符：

```
- (IBAction)openWiki:(id)sender {
    NSString *sampleUrl = [[NSString alloc] 
        initWithFormat:@"http://en.wikipedia.org/wiki/%@",self.countryName.text];
    //                                                ^^
    NSURL *wikiUrl = [[NSURL alloc] initWithString:sampleUrl];
    [[UIApplication sharedApplication] openURL:wikiUrl];
} 
```

# php - CodeIgniter 2.1.0，jQuery：登录安全问题

> ID：10462290
> 
> 赞同：0
> 
> 时间：2012-05-05T13:23:28.597
> 
> 标签：php, javascript, jquery, codeigniter, login

我有一个网站，我在其中执行以下操作以让人们登录：

**jQuery:** - 使用 $.md5() 插件和 $.cookie() 插件（用于发布数据的 CodeIgniter CSRF 保护 cookie）

```
$('#login').on('submit', function(e){
  e.preventDefault();
  $.get('/salt/', function(salt){
  // get / set salt and salt flashdata
    $.post('/login/', {
      'username' : $('#l_username').val(),
      'password' : $.md5('' + salt['m'] + $.md5($('#l_password').val()) + salt['s']),
      //set to string (in case MD5 hash of password is an integer)hash password, add salt, hash salted password. 
      '_token' : $.cookie('_cookie')
    }, function(r){
      // *r* == 0: unknown user; 1: wrong password; 2: logged in; 3: database error; 4: session error;
      // perform action depending on *r* value
    })
  })
}); 
```

**PHP (CodeIgniter):** - rout 文件转发`/salt/`和`/login/`到`/process/salt/`- `/process/login/`'session' 类被自动加载

```
class Process extends CI_Controller {

  public function __construct() {
    parent::__construct();
    $this->load->model('login'); // loads model with login functions ()
  }

  public function login() {
    $data = array();
    $data['username'] = $this->input->post('username');
    $data['password'] = $this->input->post('password');
    if ($data['username'] && $data['password']) {
    //if user and password are set
      $user = $this->login->getUser($data['username']);
      if ($user->num_rows() === 1) {
      // if the username is in the database
        $user = $user->row();
        $salt = $this->session->flashdata('s');
        //flashdata set by ajax call to '/salt/'
        $pass = $salt->m . $user->password . $salt->s;
        //password is already hashed in database
        if ($data['password'] === $pass){
          // update logged_in database table then set login session
          echo 2; // logged in; if database / session error, echo 3 / 4
        } else {
          echo 1; // wrong password
        }
      } else {
        echo 0; //unknown user
          }
    }
  }

  public function salt() {
    // set salt values based in minute and second time
    $salt = (object) array('m' => intval(date('i')), 's' => intval(date('s')));
    //intval() removes leading 0
    $this->session->set_flashdata('s', $salt);
    // flashdata only valid for the next server request (which is the login);
    header('Content-type: application/json');
    //return value as json string
    echo json_encode($salt);
  }
} 
```

我的问题是：这种登录方法到底有多安全？剧本有没有潜在的漏洞？我想确保在没有 https 的情况下登录过程尽可能安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:05:44.967

如果我猜对了，您是在数据库中存储密码的 md5 哈希版本吗？

用全局盐存储密码的哈希并将该全局盐也传递给javascript不是更好吗？这样，您的数据库中就没有哈希，如果它是一个简单的密码，就很容易破解。

更好的是为每个用户使用个人盐，您可以与其他盐同时获得。

```
'password' : $.md5('' + salt['m'] + $.md5($('#l_password').val() + salt['personal']) + salt['s']), 
```

另一个建议是使用比 md5 更强的散列函数，因为它不再那么安全了。

但是，这一切都是为了以防您的数据库泄露。密码和用户名的传输看起来非常安全和模糊。

我认为您仍然有一个错误，因为在将其与接收到的值进行比较时，您没有在 php 端对您的加盐密码进行 md5 哈希。我认为应该是：

```
//flashdata set by ajax call to '/salt/'
$pass = md5($salt->m . $user->password . $salt->s); 
```

对于服务器端的散列，您可以使用[phpass 的 spark-version](http://getsparks.org/packages/phpass/versions/HEAD/show)，每个人都建议使用它。或者您可以将其安装为库。

# tcp - MQTT：不可靠的传递而不是 TCP

> ID：10462297
> 
> 赞同：3
> 
> 时间：2012-05-05T13:23:57.567
> 
> 标签：tcp, power-management, mqtt

由于 MQTT 协议流经 TCP，因此三个 QoS 级别之间的差异非常微妙。在正常情况下，TCP 将确保交付并防止重复。

我打算使用 MQTT 将实时数据发送到移动设备，但我不需要可靠的传递。保持尽可能低的电池消耗非常重要，因此最好避免发送不必要的消息（TCP 的确认）。

是否可以通过 UDP 或其他不可靠的传输层协议实现 MQTT？是否有任何现有的图书馆这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:01:23.717

MQTT-S 可以在 UDP 上运行，但目前还没有任何公开可用的库。你确定电池使用有那么大的问题吗？在[http://stephendnicholas.com/archives/219上对 Android 上的 MQTT 电源使用进行了一些实验。](http://stephendnicholas.com/archives/219)

我认为 MQTT 本身确实利用了 TCP 交付和排序保证。我相信很难保证它在 UDP 上工作。

# file-upload - 如何检查图片是否由用户拍摄

> ID：10462303
> 
> 赞同：2
> 
> 时间：2012-05-05T13:25:02.183
> 
> 标签：file-upload, camera, image, exif, image-uploading

我最近在我正在开发的 Web 应用程序中遇到了一些麻烦。在这个网络应用程序中，我允许用户上传图片，我需要在一定程度上检查他们上传的图片是从他们自己的相机、网络摄像头、移动设备等拍摄的。如果我不能保证图片是上传的“属于”用户（*例如*从互联网上的某个地方下载，在 Paint 中制作等）该文件将被丢弃，否则将被存储。

我知道任何实现这一点的方法都是非常不准确的，并且会产生许多误报 - 或否定 - 并且没有防弹解决方案，但我只是在寻找一种试探性的方法来做到这一点。

到目前为止我已经想到

*   检查图片是否存在[Exif](http://en.wikipedia.org/wiki/Exchangeable_image_file_format)数据，如果存在，如果它的日期相对较新，则存储它

*   提供从用户的网络摄像头拍摄“快照”的选项，就像[Facebook](http://www.facebook.com/)为个人资料图片所做的那样

还有其他方法可以做到这一点吗？

# java - 如何从文件名中获取日期

> ID：10462305
> 
> 赞同：-3
> 
> 时间：2012-05-05T13:25:09.537
> 
> 标签：java, date

我正在编写一个程序来根据用户输入的日期范围生成报告。我必须阅读一些包含 mm/dd 格式日期的 zip 文件。问题是用户应该以 mm/dd 输入日期/yyyy 格式并比较文件中存在的日期文件名中提到的年份部分 ie20120228.log 包含 2012 年的数据。

如何从所有文件中获取今年部分以与用户输入的日期进行比较？

请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:23:11.507

[http://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

这将对您有所帮助。使用正则表达式拆分字符串。一旦你有了这种格式的日期：20120228，你可以很容易地从中找到日期。

# php - 将 PHP 错误发送到默认错误日志和用户定义的错误日志

> ID：10462306
> 
> 赞同：3
> 
> 时间：2012-05-05T13:25:15.590
> 
> 标签：php, logging, exception-handling, error-handling, error-logging

我可能只是在处理错误处理文档时遇到了问题，但我想到的是几种不同的情况：

1.  当 PHP 抛出一个典型错误时，我想保留我放置的默认错误日志，但也有基于错误类型/严重性的单独错误日志（仅用于致命错误的日志，因此我不必扫描数百万个小错误，但仍然在一般堆中记录了那些小错误）。

2.  对于 web 应用程序/平台（如 Wordpress 或 MediaWiki 等），将 PHP 错误（所有，不仅仅是 webapp 抛出的错误）存储在 web 应用程序错误日志中。（这几乎肯定是基于严重性的。想法是转到 webapp 错误日志并能够看到混合的 PHP 致命错误，以避免追查该域的错误日志等）

3.  webapp 抛出的某些类型的错误也会转到一般错误日志和它自己的自定义日志（我知道我已经看到了一个或另一个，但不是两者都看过）。

所以根本问题是：如何在不丢失/覆盖默认错误日志的情况下拥有自定义错误日志？

此外，假设在大多数情况下，这个级别的错误和异常是可以互换的，或者我是否需要为类似的异常处理目标采取其他步骤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T13:42:46.543

您可以设置自己的错误处理程序，仍然让 php 像往常一样处理触发的错误

[http://se.php.net/manual/en/function.set-error-handler.php](http://se.php.net/manual/en/function.set-error-handler.php)

```
set_error_handler(function($errno, $errstr, $errfile, $errline) {
  // do what you want  
  return false; // returning false makes PHP execute its own error handler as well
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-21T12:37:58.943

您可以使用自定义错误处理程序并将消息记录到不同的文件中，

```
 function myErrorHandler($errno, $errstr, $errfile, $errline)
    {
        if (!(error_reporting() & $errno)) {
            return false;
        }
        $logFile = "";
        switch ($errno) {
        case E_USER_ERROR:
            $logFile = "logs/php-errors-".date("yyyy-mm-dd",time());
            exit(1);
            break;

        case E_USER_WARNING:
        $logFile = "logs/php-warnings-".date("yyyy-mm-dd",time());
            break;

        case E_USER_NOTICE:
        $logFile = "logs/php-notices-".date("yyyy-mm-dd",time());
            break;

        default:
        $logFile = "logs/php-unkown-".date("yyyy-mm-dd",time());
            break;
        }

      error_log($errstr,3,$logFile);
        return true;
    } 
```

你应该设置这个错误处理函数使用

```
 set_error_handler("myErrorHandler"); 
```

# java - 用按钮关闭窗口

> ID：10462307
> 
> 赞同：3
> 
> 时间：2012-05-05T13:25:20.530
> 
> 标签：java, swing, window, dispose, actionlistener

我目前正在学习`Java`以提高自己。我有一个程序，它有一个主窗口、菜单和子菜单。

当我点击我的子菜单时，我还有其他窗口。

其中之一是 setRates 是

```
public SetMyRates(){
    JPanel dataPanel = new JPanel(new GridLayout(2, 2, 12, 6));
    dataPanel.add(setTLLabel);
    dataPanel.add(setDollarsLabel);
    dataPanel.add(setTLField);
    dataPanel.add(setDollarsField);
    JPanel buttonPanel = new JPanel();
    buttonPanel.add(closeButton);
    buttonPanel.add(setTLButton);
    buttonPanel.add(setDollarsButton);
    Container container = this.getContentPane();
    container.add(dataPanel, BorderLayout.CENTER);
    container.add(buttonPanel, BorderLayout.SOUTH);
    setTLButton.addActionListener(new SetTL());
    setDollarsButton.addActionListener(new SetDollars());
    closeButton.addActionListener(new closeFrame());
    dataPanel.setVisible(true);
    pack();
} 
```

当我点击我的`closeButton`.

我为closeButton，actionListener创建了一个类，它是：

```
private class closeFrame implements ActionListener{
    public void actionPerformed(ActionEvent e){
       try{
          dispose();
       }
       catch(Exception ex){
          JOptionPane.showMessageDialog(null, "Please enter correct Rate.");
       }
    }
} 
```

但是当我单击该按钮时，它会关闭我的主窗口而不是我的子菜单窗口。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T13:44:04.517

您需要获取对要关闭的 Window 的引用并`dispose()`直接在该引用上调用。你如何做到这一点将取决于你的程序的细节——我们目前不知道的信息。

编辑：获得该参考的一种方法是通过`SwingUtilities.getWindowAncestor(...)`. 传入从 ActionEvent 对象返回的 JButton 引用并对其调用 dispose。就像是...

```
public void actionPerformed(ActionEvent e) {
  Object o = e.getSource();
  if (o instanceof JComponent) { 
    JComponent component = (JComponent)o; 
    Window win = SwingUtilities.getWindowAncestor(component);
    win.dispose();
  }
} 
```

*   警告：代码既没有编译也没有运行，也没有以任何方式测试。
*   另请注意，要使其正常工作，保存和激活 ActionListener 的组件必须驻留在您希望关闭的 Window 上，否则这将不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T13:47:04.520

从我认为打开另一个窗口时您可以轻松地存储对它的引用并在动作侦听器中使用它。这些方面的东西：

```
JFrame openedWindow;

//inside the listener
if(openedWindow)
   openedWindow.dispose();
else dispose(); 
```

# ruby-on-rails - 如何拥有 Active Admin 嵌套和非嵌套资源视图？

> ID：10462314
> 
> 赞同：7
> 
> 时间：2012-05-05T13:26:11.063
> 
> 标签：ruby-on-rails, activeadmin

用户有_many 事务。我有活动管理员当前设置为使用 admin/transactions.rb 中的 belongs_to :user 将事务嵌套在基本 CRUD 的用户下。但是，我还需要一个顶级的交易视图，显示跨用户的交易记录子集。我怎样才能完成第二部分？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-11T22:48:26.753

我认为现在最好的方法是传入“可选”选项：

```
ActiveAdmin.register Transactions do
  belongs_to :user, :optional => true
  ...
end 
```

这样，您将可以从主导航菜单以及特定用户下的嵌套视图中访问所有事务。

如果想了解更多，可以参考下面的源码：

[https://github.com/gregbell/active_admin/blob/0.4.x-stable/lib/active_admin/resource.rb](https://github.com/gregbell/active_admin/blob/0.4.x-stable/lib/active_admin/resource.rb)

131 号线

```
def include_in_menu?
  super && !(belongs_to? && !belongs_to_config.optional?)
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T22:20:34.983

您需要创建两个 Active Admin 资源，它们都引用需要嵌套和非嵌套路由的同一个 Active Record 模型。

父资源：

```
ActiveAdmin.register ParentClass do
end 
```

嵌套资源：

```
ActiveAdmin.register ChildClass do
  belongs_to :parent_class
end 
```

未嵌套的资源：

```
ActiveAdmin.register ChildClass, :as => "All Children" do
end 
```

您现在可以通过“所有子项”选项卡直接访问 ChildClass，而不会出现 ParentClass 丢失的错误，同时仍然可以享受从 ParentClass 对 ChildClass 的嵌套访问。

# php - 用于上传文件的 php 脚本未按预期工作

> ID：10462319
> 
> 赞同：-3
> 
> 时间：2012-05-05T13:26:33.213
> 
> 标签：php, phpmyadmin

**我已经编写了一个用于上传文件的 php 代码，但似乎代码存在一些问题。任何人都可以帮助我解决这个问题。** HTML 代码是：

```
<html>
<head>
<title>File Uploading Form</title>
</head>
<body>
<h3>File Upload:</h3>
Select a file to upload: <br />
<form action="C:\xampp\htdocs\upload.php" method="post"
                        enctype="multipart/form-data">
<input type="file" name="file" size="50" />
<br />
<input type="submit" value="Upload File" />
</form>
</body>
</html> 
```

PHP代码如下：

```
<?php
if( $_FILES['file']['name'] != "" )
{
 copy( $_FILES['file']['name'], "C:/xampp/htdocs" ) or 
       die( "Could not copy file!");
}
else
{
  die("No file specified!");
}
?>
<html>
<head>
<title>Uploading Complete</title>
</head>
<body>
<h2>Uploaded File Info:</h2>
<ul>
<li>Sent file: <?php echo $_FILES['file']['name'] ; ?>
<li>File size: <?php echo $_FILES['file']['size']/1024;  ?> 
<li>File type: <?php echo $_FILES['file']['type'];  ?>
<?php $_FILES['file']['tmp_name']; ?>
</ul>
</body>
</html> 
```

**我正在使用 xampp 来运行 PHP 脚本。**

**点击

> 上传文件按钮没有按预期显示。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:35:01.463

那么输出是什么？此外，请`print_r($_FILES)`务必说明它是如何准备好供您访问的，您可能会不准确地访问文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:35:57.510

使用正确的函数和正确的数组元素：

```
move_uploaded_file($_FILES['file']['tmp_name'], '...'); 
```

# ruby-on-rails - 如何根据关联初始化rails模型

> ID：10462321
> 
> 赞同：1
> 
> 时间：2012-05-05T13:26:43.730
> 
> 标签：ruby-on-rails, constructor, many-to-many, associations

我一直在试图弄清楚以下内容，但未能提出巧妙的解决方案。也许我错过了一些基本的东西。

**概述**

我有一个多对多的任务和用户模型。

一个用户可以有多个任务，一个任务可以在多个用户之间共享。

我使用以下内容创建任务：

```
user.tasks.create 
```

任务通过 user_id 与用户链接，user_id 使用 task_id 与任务链接，使用 :through task_table

一个任务属于一个用户，但一旦完成，它就会传递给该任务的下一个用户。

**问题**

对于创建任务的用户来说，总是轮到他完成任务。完成后，将其传递给下一个用户。

我目前有：

```
 user1.tasks.create(:current_user => user1.id) 
```

当用户完成任务时， :current_user 改变。

我想要实现的是一种只需要编写 user1.tasks.create - 并自动设置 current_user 的方法，而无需显式传入 user1.id。有什么办法可以做到这一点吗？也许使用构造函数（我几乎尝试了所有这些，但无法正常工作）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:49:01.220

您可以尝试在`before_add`关联的回调中执行此操作，例如

```
class User < ActiveRecord::Base
  has_many :tasks, :through => :task_table, :before_add => Proc.new { |u,t| t.current_user = u }
end 
```

# fitnesse - 如何在复杂的 FitNesse 套件中配置运行选定的测试？

> ID：10462325
> 
> 赞同：0
> 
> 时间：2012-05-05T13:26:51.680
> 
> 标签：fitnesse

我们有一个复杂的 Fitnesse 套件，其中包含数十个子套件、包含和符号链接。有时我们不想运行整个事情，而是想运行 **选定的测试用例而不运行其他用例**。我们看到了两种方法：

1.  通过管理页面属性（Suite - Test - Normal），我们可以打开/关闭测试用例。

    但这很不方便。首先，它很无聊。其次，我们看不到套件的当前状态（打开并运行了哪些测试用例）。

2.  在 Fitnesse 中[有标签](http://fitnesse.org/FitNesse.UserGuide.TestSuites.TagsAndFilters)，我们可以在 suiteFilter 或 excludeSuiteFilter 中指定想要的标签。

    这也很不方便。您必须记住标签名称，不要在过滤器中忘记或拼错它们。当然，我们可以存储带有精心挑选的标签列表的预定义链接，但在我们的例子中，这不是选项，因为列表经常更改。

此外，我们不想将我们的套件分成几个部分，因为我们受益于通用场景库和变量列表。

对我们来说理想的解决方案是拥有一个 Fitnesse 套件配置器，它可以显示和更改 Fitnesse 页面的设置。比如说，它可能是一个 Fitnesse 插件，它读取 Fitnesse 文件夹结构并在 html 页面或 Windows 窗体中显示当前设置，让更改这些设置并保存更改。或具有类似功能的外部工具。

你听说过这样的工具吗？你遇到过同样的烦恼吗？你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:49:47.917

我同意您列出的第一个选项，操纵页面属性是一个坏主意。它会导致日志运行的痛苦。

我会注意到标签区域非常合理的方法。关于标记文件要记住的一点是，您可以构建链接，这些链接将运行标记特定值的所有测试，并使其成为 FrontPage 的一部分

例如，您可以在 FrontPage 中放置一个链接，该链接将运行所有标记为“smoke”的测试。[[运行烟雾测试][.FrontPage.MonsterSuite?suite&suiteFilter=smoke]]

你可以做的选择性执行还有另一种变体，但我没有那么成功。看看 SuiteQuery：[http](http://fitnesse.org/FitNesse.UserGuide.TestSuites.SuiteQuery) ://fitnesse.org/FitNesse.UserGuide.TestSuites.SuiteQuery 。

SuiteQuery 是一种技术，可让您通过构建列出要运行的页面或页面名称过滤器的表来指定套件。

```
!|Suite|
|Page|FitNesse.SuiteAcceptanceTests|
|Content|[Bb]ug|

!|Suite|
|Page|FitNesse.SuiteAcceptanceTests|
|Title|Import| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-30T04:49:57.437

还有一种方法。。

创建一个新套件并向其中添加以下代码..

```
!see .FrontPage.TestPage 
```

# sql - 使用上一条记录中的数据更新 SQL Server 表记录字段

> ID：10462326
> 
> 赞同：0
> 
> 时间：2012-05-05T13:27:09.950
> 
> 标签：sql, sql-server, sql-server-2008

我需要使用下面第一条记录中的前一个值 (ForecastID = 22)更新第二条记录`AFS_OH`列 (ForecastID = 23) 。`AFS_ToProduce`换句话说，第二个记录值`AFS_OH = 307923`。

此外，我需要更新整个表的这些值，因此我的 ForecastID 编号将根据`AFS_ToProduce < 0`您将在`WHERE`下面的子句中注意到的标准而有所不同。

我下面的脚本正在更新相同的记录值而不是以下记录。谢谢你的帮助！

```
ForecastID        AFS_OH     AFS_ToProduce
22                307923    -307923
23                     0     316602 
```

这是我的方法：

```
UPDATE FC_Test
SET AFS_OH = (AFS_ToProduce * (-1))
FROM FC_Test S3
INNER JOIN
(
    SELECT S1.FORECASTID, S2.AFS_ToProduce AS AFS_OH
    FROM FC_Test S1
    LEFT OUTER JOIN
    (
        SELECT *
        FROM FC_Test
    ) S2
    ON S1.ForecastID = S2.ForecastID
)S4 ON S3.ForecastID = S4.ForecastID
WHERE AFS_ToProduce < 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:18:47.010

如果下一行具有正 AFS_ToProduce，则以下更新会将 AFS_ToProduce 的负值传输到下一行。如果不是，则该行将被忽略。`select top 1`如果 AFS_ToProduce 为负，Inner将检索前一行；如果没有，来自 fc_test 的当前行将被跳过。这允许 ForecastID 中的间隙。

```
update fc_test
set AFS_OH = - fc2.AFS_ToProduce
from fc_test
cross apply
(
  select fc2.AFS_ToProduce
  from 
  (
    select top 1
        fc2.AFS_ToProduce
      from fc_test fc2
     where fc2.ForecastID < fc_test.ForecastID
     order by fc2.ForecastID desc
  ) fc2
  where fc2.AFS_ToProduce < 0
) fc2
where fc_test.AFS_ToProduce > 0 
```

测试在[Sql Fiddle](http://sqlfiddle.com/#!3/00879/2)上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:02:09.607

试试这个

```
DECLARE @tbl table (i int, p int)

INSERT INTO @tbl (i,p) VALUES (1,1),(10,10),(11,11),(20,20)

SELECT * FROM @tbl

UPDATE t1
SET t1.p=t2.p
FROM @tbl t1
     CROSS JOIN @tbl t2
WHERE t2.i=(SELECT max(i)
               FROM @tbl t
               WHERE i<t1.i)

SELECT * FROM @tbl 
```

# javascript - Javascript根据变量引用更改变量

> ID：10462333
> 
> 赞同：0
> 
> 时间：2012-05-05T13:28:10.327
> 
> 标签：javascript

在我正在编写的程序中，我需要一个如下所示的对象变量：

```
var map {
    cube: {__pt3arraylocation__:[0,0,0], poly: new Object()},
    other: {__pt3arraylocation__:[1,0,0], poly: new Object()}
}; 
```

但是，我希望能够键入 map.cube 并让它返回**pt3arraylocation**作为默认值，除非我通过键入 map.cube.poly 来指定我想要的

例如：map.cube 将返回 [0,0,0] 并且 map.cube.poly 将返回对象立方体中的对象 poly

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:31:16.980

> 我希望能够键入 map.cube 并让它返回 pt3arraylocation 作为默认值，除非我通过键入 map.cube.poly 来指定我想要的
> 
> 例如：map.cube 将返回 [0,0,0] 并且 map.cube.poly 将返回对象立方体中的对象 poly

你不能在 JavaScript 中做到这一点。

但是，作为替代方案，值得注意的是，您可以根据需要向数组添加任意属性。例如：

```
var map {
    cube:  [0,0,0],
    other: [1,0,0]
};
map.cube.poly = {};  // {} is the same as `new Object()` but not subject to people...
map.other.poly = {}; // ...overriding the `Object` symbol 
```

然后`map.cube`为您提供数组，并`map.cube.poly`为您提供存储在该数组中的对象。

这怎么可能？因为在 JavaScript 中，[数组并不是真正的数组](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)。它们只是具有自动`length`属性的对象，以特殊方式处理一类属性名称（所有数字名称），并`Array.prototype`对其进行备份。当然，您可以向任何对象添加属性。

这样做没有文字语法，这就是为什么我必须在上面的对象初始化程序之后使用赋值来完成它。但这是完全有效的。我一直将它用于交叉索引数组。

如果您这样做，请确保您没有`for..in`错误地使用；[更多](http://blog.niftysnippets.org/2010/11/myths-and-realities-of-forin.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:34:43.313

我想说的最好的方法是这样的：

```
var map {
    cube: [0,0,0],
    other: [1,0,0]
};
map.cube.poly = new Object();
map.other.poly = new Object(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:35:29.057

这是不可能实现的。也许你可以玩 toString()

```
var map = {
    cube: {
      __pt3arraylocation__:[0,0,0], 
      poly: new Object(), 
      toString : function() {
         return this.__pt3arraylocation__.toString()
      }
    },
    other: {__pt3arraylocation__:[1,0,0], poly: new Object()}
};

map.cube == '0,0,0'
map.cube.split(',') == map.cube.__pt3arraylocation__ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T13:39:11.500

没有办法完全按照你的意愿去做——如果你请求一个对象（即`map.cube`），你就会得到一个对象。但是，有几种方法可以做类似的事情。

*   当用作需要字符串（如`alert(map.cube)`or ）的函数或操作的参数时`"sometext" + map.cube`，通过调用函数将对象转换为字符串`toString`。因此，您可以定义，例如：

    ```
    map.cube.toString = function() { return this.__pt3arraylocation__.toString(); }; 
    ```

*   如果在需要数字时在上下文中使用对象，则会发生类似的事情。在这种情况下，它被转换为`valueOf()`。所以你可以使用，例如

    ```
    map.cube.valueOf = function() { return this.__pt3arraylocation__.length; }; 
    ```

*   或者，如果您将对象定义为函数，则可以通过函数调用获取默认值

    ```
    var map = {
       cube: function() {
           return map.cube.__pt3arraylocation__;
       }
    }

    map.cube.__pt3arraylocation__ = [0,0,0];
    map.cube.poly = new Object();

    alert(map.cube.__pt3arraylocation__); // 0,0,0
    alert(map.cube.poly);                 // [object Object]
    alert(map.cube());                    // same as map.cube.__pt3arraylocation__ 
    ```

    如您所见，在 JavaScript 中，函数与其他任何对象一样都是对象，因此您不仅可以调用它们，还可以为它们设置字段和方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T13:39:18.777

[TJ克劳德](https://stackoverflow.com/users/157247/t-j-crowder)是对的。根据他的回答，我想说你也可以`map.cube`这样分配

```
var map = { 
             cube: function(){ 
                     var val = [0,0,0];
                     val.poly = {}; 
                     return val; }()
          }; 
```

或更多值：

```
function polyval(val){
    val.poly = {}; 
    return val; 
}
var map = { 
            cube: polyval([0,0,0]),
            other: polyval([1,0,0]),
            more: polyval([1,1,0])
            /* ... etc */
}; 
```

# xmpp - 如何从 smack 中的 pubsub 节点获取离线消息

> ID：10462339
> 
> 赞同：3
> 
> 时间：2012-05-05T13:29:08.003
> 
> 标签：xmpp, publish-subscribe, openfire, smack

我正在使用 smack。如何从 pubsub 节点获取离线消息？我尝试使用 OfflineMessageManager 来获取消息，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:06:28.340

首先，节点是否配置为将消息传递给离线订阅者？如果没有，则没有可检索的。

您的服务器是否打开了离线消息？pubsub 消息应该与任何其他离线消息没有什么不同，因此如何检索它们没有什么特别的。

如果您只是想获取节点中的消息，并且节点是持久的，您可以使用直接从节点获取消息

```
myLeafNode.getItems(); 
```

# spring - 将 JAX-WS Web 服务公开为 Spring Bean

> ID：10462340
> 
> 赞同：2
> 
> 时间：2012-05-05T13:29:10.563
> 
> 标签：spring, jax-ws

这是否可能以某种方式将 JAX-WS Web 服务公开为 Spring bean？我需要在我的实现类中设置一些对象，但我想使用 spring 来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:32:18.247

您需要使用 SpringBeanAutowiringSupport 和 Autowired 注解从 spring 注入对象。创建一个端点类，它将像真正的 Web 服务一样工作，但对实际实现方法的调用通过从 Spring 注入的 Web 服务接口。

例如：

```
@WebService(targetNamespace = "http://my.ws/MyWs",
        portName = "MyWsService",
        serviceName = "MyWs",
        endpointInterface = "my.ws.MyWsService",
        wsdlLocation = "WEB-INF/wsdl/MyWs.wsdl")
public class MyWsEndpoint extends SpringBeanAutowiringSupport implements MyWsService {

    @Autowired
    private MyWsService proxy;

    public void myMethod() {
        proxy.myMethod();
    }

} 
```

您的 JAX-WS 端点配置应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime" version="2.0">
    <endpoint
            name="MyWsService"
            implementation="my.ws.MyWsEndpoint"
            url-pattern="/services/MyWsService"/>
</endpoints> 
```

在 spring 中定义真正的实现类，但请记住：您的端点类和实现类都必须实现您的 Web 服务接口。

```
<bean id="myWsImpl" class="my.ws.MyWsImpl"/> 
```

就是这样，现在您可以在您的 JAX-WS Web 服务中使用 spring。

# mysql - 在 Sencha Architect 中检索到 JSON 的 MySql 查询 - 如何？

> ID：10462341
> 
> 赞同：1
> 
> 时间：2012-05-05T13:29:13.727
> 
> 标签：mysql, json, extjs, sencha-architect

我已经遵循了几个 EXTJS + PHP + MYSQL 教程（对于普通的 EXTJS，而不是对于 Sencha Architect），不知何故，我仍然对在 Sencha Architect 中将 MySql 查询检索到 JSON 感到困惑。问题是这个 Sencha Architect 几乎生成并覆盖了所有代码，所以我在尝试模仿可用教程中的东西时遇到了一些麻烦。

目前，我想知道以下过程：

1.  我可以请求 MySql 查询的 Sencha Architect 部分在哪里？
2.  在 Architect 中将 MySql 转换为 JSON 是自动的吗？或者我必须需要别的东西吗？

PS：有人可以为这个问题添加“Sencha Architect”标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:44:07.257

1.  创建商店
2.  创建模型
3.  将所述模型添加到所述商店
4.  将代理的url配置为url生成你的json。
5.  在商店中设置自动加载
6.  右键单击架构师中的商店，然后按加载数据以检查商店是否已填充
7.  利润？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:14:34.690

Sencha Architect 主要用于轻松创建应用程序的 extjs 组件和 UI 端，而不是后端。

如果您需要从服务器设置 url 检索 json，然后在定义存储和 ajax 请求时在您的架构师中配置它。

# spotify - 将 musicbrainz URI 映射到 Spotify URI

> ID：10462343
> 
> 赞同：14
> 
> 时间：2012-05-05T13:29:31.343
> 
> 标签：spotify, musicbrainz

有谁知道我怎样才能找到给定艺术家/专辑的 musicbrainz URI 的 Spotify URI？Spotify 的 web-api 并没有解决我的问题，因为我想映射所有的 musicbrainz 艺术家和专辑，而且速度很慢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T00:47:51.740

您应该能够使用 Echo Nest Rosetta Stone Project 映射 Spotify 和 MusicBrainz 艺术家 ID：http: [//developer.echonest.com/docs/v4](http://developer.echonest.com/docs/v4)

# html - HTML中的右尖括号

> ID：10462348
> 
> 赞同：45
> 
> 时间：2012-05-05T13:30:02.837
> 
> 标签：html

由于显而易见的原因，左尖括号不能在 HTML 文本中按字面意思使用。右尖括号的状态不是很清楚。当我尝试它时它确实有效，但是众所周知，浏览器会容忍不是严格有效的 HTML 的构造。

[http://www.w3.org/TR/html4/charset.html#h-5.4](http://www.w3.org/TR/html4/charset.html#h-5.4)似乎在说它是有效的，虽然可能不被旧浏览器支持，但也特别提到了引用的属性值。[是否有必要对右尖括号进行 html 编码？](https://stackoverflow.com/questions/7389867/is-it-necessary-to-html-encode-right-angle-brackets)还说它是有效的，但再次专门讨论引用的属性值。

纯文本块的答案是什么（`<pre>`元素的内容恰好是我正在查看的情况），它有什么不同吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-05T13:40:24.690

字符“>”可以用作任何版本的 HTML 中的数据字符，包括元素内容和属性值。这是因为规范中没有任何相反的声明。

它经常被转义为`&gt;`，这是有效的，但出于任何形式或技术原因都不需要。使用它的部分原因是人们认为它的需要与“<”相同 字符需要被转义，部分是为了对称：比如说，写作`&lt;code&gt;`可能看起来比`&lt;code>`.

字符“>”是大于字符。它在许多上下文中使用，例如 HTML 标记，作为一种分隔符，以类似括号的方式，但在某些数学符号中使用的真正的尖括号是相当不同的，例如“⟩” U+27E9 . 如果您需要在 HTML 文档中包含尖括号，则需要考虑一些严重的问题，但它们与字体（和语义）有关，而不是与标记有效字符的任何潜在冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:32:59.217

直角括号在`<pre>`标签内或作为元素内的文本是合法的。

以这种方式使用它们时没有歧义，解析器对“理解”它们没有任何问题。

就个人而言，我只是在需要使用它们时逃避这些，只是为了匹配左尖括号......

# perl - SoundCloud 和 WWW::Curl::Form - 404 未找到

> ID：10462354
> 
> 赞同：1
> 
> 时间：2012-05-05T13:31:21.853
> 
> 标签：perl, api, curl, http-status-code-404, soundcloud

更改曲目描述的脚本。我收到 404 错误。令牌和 url 是有效的（从命令行工作）示例：

curl -X PUT "https://api.soundcloud.com/tracks/45272532.json" -F 'oauth_token=12345678' -F 'track[description]=此曲目是在柏林录制的。'

脚本：

```
#!/usr/bin/perl
use strict;
use warnings;
use WWW::Curl::Easy;
use WWW::Curl::Form;

my $curl = new WWW::Curl::Easy();
$curl->setopt( CURLOPT_VERBOSE,  1 );
$curl->setopt( CURLOPT_NOSIGNAL, 1 );
$curl->setopt( CURLOPT_HEADER,   1 );
$curl->setopt( CURLOPT_TIMEOUT,  10 );
$curl->setopt( CURLOPT_URL,      'https://api.soundcloud.com/tracks/45272532.json' );

my $curlf = new WWW::Curl::Form();
$curlf->formadd( 'oauth_token', 12345678' );
$curlf->formadd( 'track[description]', 'This track was recorded in Berlin.' );
$curl->setopt( CURLOPT_HTTPPOST, $curlf );

my $resp = '';
open( my $resp_fh, ">", \$resp );
$curl->setopt( CURLOPT_WRITEDATA, $resp_fh );

my $retcode = $curl->perform();
die($retcode) if ( $retcode != 0 );

print $resp; 
```

* * *

回复：

```
* About to connect() to api.soundcloud.com port 443 (#0)
*   Trying 178.249.136.151... * connected
* Connected to api.soundcloud.com (178.249.136.151) port 443 (#0)
* successfully set certificate verify locations:
*   CAfile: none
  CApath: /etc/ssl/certs
* SSL connection using DHE-RSA-AES256-SHA
* Server certificate:
*    subject: C=DE; OU=Domain Control Validated; O=api.soundcloud.com; CN=api.soundcloud.com
*    start date: 2010-08-26 10:42:17 GMT
*    expire date: 2013-09-18 23:59:59 GMT
*    subjectAltName: api.soundcloud.com matched
*    issuer: C=BE; OU=Domain Validation CA; O=GlobalSign nv-sa; CN=GlobalSign Domain Validation CA
*    SSL certificate verify ok.
> POST /tracks/45272532.json HTTP/1.1
Host: api.soundcloud.com
Accept: */*
Content-Length: 319
Expect: 100-continue
Content-Type: multipart/form-data; boundary=----------------------------5e3965475f60
< HTTP/1.1 100 Continue
< HTTP/1.1 404 Not Found
< Server: nginx
< Date: Sat, 05 May 2012 13:25:50 GMT
< Content-Type: application/xml; charset=utf-8
< Connection: keep-alive
< Cache-Control: no-cache
< X-Runtime: 8
< Access-Control-Allow-Methods: GET, PUT, POST, DELETE
< Access-Control-Allow-Headers: Accept, Authorization, Content-Type, Origin
< Access-Control-Allow-Origin: *
< X-Cacheable: NO:Cache-Control=no-cache
< Content-Length: 30
< X-Varnish: 1799105788
< Age: 0
< Via: 1.1 varnish
< X-Cache: MISS
< 
* Connection #0 to host api.soundcloud.com left intact
* Closing connection #0 
```

谢谢拉德克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:36:56.257

```
> POST /tracks/45272532.json HTTP/1.1 
```

失败。^^^^

```
$curl->setopt( CURLOPT_PUT,  1 ); 
```

# wpf - wpf - 让 dll 回调通知主窗口

> ID：10462357
> 
> 赞同：0
> 
> 时间：2012-05-05T13:32:10.023
> 
> 标签：wpf

我有一个包含在带有 Dllimport 指令的 C# WPF 项目中的第 3 方 dll。我有一个静态 c# 函数，当某个硬件事件发生时，它们将其作为回调调用。

我想完成一个老式 PostMessage 会完成的事情。只需通知我的主窗口回调发生。我知道我可以直接获取我的窗口并投射并调用主窗口的函数，但这似乎有点不稳定。我喜欢旧的异步 PostMessage 模式。也许我的问题更多是关于松散耦合应用程序中的几个组件。

我应该调用一个命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:02:51.750

您应该按照您的建议考虑使用松散耦合的事件。一些有用的起点是

*   Prism 的[事件聚合器](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)

*   Caliburns 的[事件聚合器](http://joshearl.wordpress.com/2011/03/31/introduction-to-messaging-with-caliburn-micros-eventaggregator/)

*   [MVVM Light](http://www.galasoft.ch/mvvm/)的信使

它们都做类似的发布-订阅消息传递。

我怀疑您的回调将在另一个线程上，因此您可能需要使用 Dispatcher.Invoke 来编组对您的 UI 线程的调用。

# javascript - 从请求 URL 中删除参数

> ID：10462358
> 
> 赞同：1
> 
> 时间：2012-05-05T13:32:15.327
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:41:28.407

Please use [filtering](http://api.jquery.com/filter/) of fields, since `[value=""]` selector checks the default states of the inputs.

```
$('#form').on('submit', function() {
    $(':input', this).filter(function() {
        return this.value.length == 0;
    }).remove();
});​ 
```

**DEMO:** [http://jsfiddle.net/bCskH/](http://jsfiddle.net/bCskH/)

**UPDATE:** In order not removing input fields you can simply disable them:

```
$('#form').on('submit', function() {
    $(':input', this).filter(function() {
        return this.value.length == 0;
    }).prop('disabled', true);
});​ 
```

The effect will be the same, however IMHO much nicer :)

**DEMO:** [http://jsfiddle.net/bCskH/1/](http://jsfiddle.net/bCskH/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T13:47:47.877

You can use jquery selector and `serialize()` to select only input that has value here is the [example](http://jsfiddle.net/EypCH/1/)

```
<form id="test">
    <input name="field1" value="Test"><br/>
    <input name="field2" value=""><br/>
    <input name="field3" value="value"><br/>
    <input id="btn" type="button" value="submit"/>
</form>​

$('#btn').on('click',function() {
    alert($('#test input[value != ""]').serialize());
});​ 
```

also I doubt, `.live()` will work in jquery 1.7 use `.on()` instead. See this [link](http://api.jquery.com/live/) and it says it has been deprecated

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T13:38:42.160

`[value=".."]` accesses the attribute which is not synced with the current value. Besides that, you cannot specify a selector as context - so move `#form` into the main selector and use `.filter()` to restrict the matched elements to empty ones:

```
$('#form input').filter(function() {
    return !$(this).val();
}); 
```

# jquery - 如何使用 Rails 和 jQuery 实现图像预览？

> ID：10462360
> 
> 赞同：2
> 
> 时间：2012-05-05T13:32:52.123
> 
> 标签：jquery, ruby-on-rails, carrierwave, ruby-on-rails-3.2

在过去的几天里，我一直在阅读在我的网站上提交表单功能之前实现“图像预览”的不同方法。

我已经使用 HTML5 在某些浏览器上成功运行，但不是全部。这似乎很麻烦，所以我决定最好的方法是让用户选择的图像自动上传到服务器上的临时文件夹，以便之后可以显示给他们。

### 细节

这张图片是微博的一部分。

*   用户点击微贴文本区域，它会展开，向他们显示一张相机图像，他们可以点击该图像来选择图像。

*   选择成功后，我将使用 JQuery 的触发方法来触发提交一个将文件上传到临时文件夹的小表单。

*   这将允许我在上传时显示进度条，然后将图像显示给用户。它适用于所有浏览器。

*   然后，如果用户认为图像很好，他们将继续填写微博表单文本区域并单击发布。

*   单击帖子时，临时图像将移动到其永久位置，并且路径将被更新。

我正在使用carrierwave进行图像上传。

在我的 microposts 表中，我有一个图像列，其中包含图像的路径。

这是我有点困惑的地方。当点击微博帖子按钮时，我将不得不了解如何获取图像的路径，以便它可以存储在微博表中，但路径将是不再使用的临时路径，因为图像本来是移动到它的永久路径。

我非常感谢有关直接执行此操作的重要信息。如果网络浏览器非常像汽车（例如，4 个轮子、方向盘、窗户、汽油、柴油），那么网络世界将会大不相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:06:28.830

你应该使用这个 jQuery 插件来上传图片：http: [//blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

它支持您需要的内容，并默认为旧的和糟糕的浏览器提供有效的解决方案（例如 iframe）。

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T23:05:56.663

我认为，如果您**只**需要在上传之前以表格形式预览图像，您（和我一样）会看到 JQuery Upload 插件太复杂而且不太容易正常运行（我能够看到预览，但后来我无法上传图片，因为它与您的表格混淆）。我花了太多时间而放弃了。

然后，更深入地寻找（谷歌搜索），我找到了这个解决方案：

[http://saravani.wordpress.com/2012/03/14/preview-of-an-image-before-it-is-uploaded/](http://saravani.wordpress.com/2012/03/14/preview-of-an-image-before-it-is-uploaded/)

编码非常简单快捷。

# android - Android - AudioTrack setStereoVolume() 不工作

> ID：10462364
> 
> 赞同：5
> 
> 时间：2012-05-05T13:34:12.880
> 
> 标签：android, audio, android-emulator

我有一个类使用 AudioTrack 来生成每个特定频率的声音。一切正常，但现在我想对其进行自定义，以便我只能在耳机的右侧播放声音，或者只能在耳机的左侧播放。（右耳或左耳）

所以我发现AudioTrack有这样一个方法：`setStereoVolume()`，但是，当我配置它时，例如像这样：`audioTrack.setStereoVolume(1.0f, 0.0f)`，我期望只有我的耳机左侧应该发声，而右侧应该静音，但它没有效果。我可以在耳机的左右两侧听到相同音量的声音。

我检查了返回值，`setStreamVolume()`它是 0，与 SUCCESS 相等，但我仍然没有听到区别。

您知道为什么它不起作用，或者我可以指定仅在耳机的左侧或右侧播放声音的另一种方法吗？

这是生成声音的代码：

```
public class SoundGenerator extends AsyncTask<Float, Void, Void> {
    final int SAMPLE_RATE = 11025;
    boolean playing=false;

    @Override
    protected Void doInBackground(Float... params) {

        float frequency=params[0];

        int minSize = AudioTrack.getMinBufferSize(SAMPLE_RATE,
                AudioFormat.CHANNEL_CONFIGURATION_STEREO,
                AudioFormat.ENCODING_PCM_16BIT);

        AudioTrack audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC,
                SAMPLE_RATE, AudioFormat.CHANNEL_CONFIGURATION_STEREO,
                AudioFormat.ENCODING_PCM_16BIT, minSize,
                AudioTrack.MODE_STREAM);

        short[] buffer = new short[minSize];

        float angular_frequency = (float) (2 * Math.PI) * frequency / SAMPLE_RATE;
        float angle = 0;

        audioTrack.play();
        int stereo=audioTrack.setStereoVolume(1.0f, 0.0f); 

                Log.d("GREC", "Stereo vol: "+stereo);

        while (playing) {

            for (int i = 0; i < buffer.length; i++) {
                buffer[i] = (short) (Short.MAX_VALUE * ((float) Math.sin(angle)));
                angle += angular_frequency;
            }
            audioTrack.write(buffer, 0, buffer.length);
        }
        Log.d(Globals.TAG, "Stopping the tone generator...");
        audioTrack.stop();
        audioTrack.release();

        return null;
    }

    public void keepPlaying(boolean flag){
        playing=flag;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-01T09:12:14.247

我注意到了同样的问题。`setStereoVolume`正在使用 Android 4.3 模拟器，但不适用于 Android 4.0.3 设备。

我调查了 Android 4.0.3 AudioTrack.java 源代码，发现如果我在为 AudioTrack 调用write 之前调用它，由于 mState 值无效`setStereoVolume`，它无法返回。`ERROR_INVALID_OPERATION`

```
public int setStereoVolume(float leftVolume, float rightVolume) {
        if (mState != STATE_INITIALIZED) {
            return ERROR_INVALID_OPERATION;
        }
...
} 
```

然后我改变了通话顺序并在通话`setStereoVolume`后添加`audioTrack.write`，它开始正常工作。看起来 write 方法修改了 mState 值

```
public int write(byte[] audioData,int offsetInBytes, int sizeInBytes) {
     if ((mDataLoadMode == MODE_STATIC)
          && (mState == STATE_NO_STATIC_DATA)
          && (sizeInBytes > 0)) {
          mState = STATE_INITIALIZED;
     }
     ...
} 
```

# xml - 使用 JDOM 解析 XML 失败

> ID：10462366
> 
> 赞同：0
> 
> 时间：2012-05-05T13:34:17.437
> 
> 标签：xml, parsing, xml-parsing, jdom

我正在使用 JDOM 解析器来解析我使用 feedrinse 创建的 XML。

XML 位于：[http ://www.feedrinse.com/services/rinse/?rinsedurl=396ac3b0142bb6360003c8dbac4f8d47](http://www.feedrinse.com/services/rinse/?rinsedurl=396ac3b0142bb6360003c8dbac4f8d47)

我的代码是解析每个标题、链接、pubDate 元素并将它们存储在我发送到前端的新 XML 中。这是我的代码：

```
String temp = "http://www.feedrinse.com/services/rinse/?rinsedurl=396ac3b0142bb6360003c8dbac4f8d47";
String XMLstr="<FEED>";

SAXBuilder builder = new SAXBuilder();
URL url= new URL(temp);
Document doc = null;                
 try{
    doc=builder.build(url);             
    Element root = doc.getRootElement();
    //List children = root.getChildren();
    List list = root.getChildren("item");
    XMLstr+="<children>"+list.size()+"</children>";
    for (int i = 0; i < list.size(); i++) {
           Element node = (Element) list.get(i);
           String title=node.getChildText("title").toString();
           XMLstr+="<title>"+title+"</title>";
           String link=node.getChildText("link").toString();
           XMLstr+="<link>"+link+"</link>";
           String desc=node.getChildText("description").toString();
           XMLstr+="<desc>"+desc+"</desc>";
           String pubDate=node.getChildText("pubDate").toString();
           XMLstr+="<pubDate>"+pubDate+"</pubDate>";           
        }
    }
catch(Exception e)
    {
    out.println(e);
    }
    XMLstr+="</FEED>"; 
```

但是，它没有正确解析。起初它总是将孩子的大小显示为 0。请建议我在做什么错误以及如何纠正错误。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:01:22.840

XML具有以下结构

```
<rss>
  <channel>
    ...
    <item></item>
    <item></item> 
```

例如`Element root = doc.getRootElement()`，将返回没有任何子**项的****rss**元素。

 **编辑：尝试以下行

```
List list = root.getChild("channel").getChildren("item"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:06:01.773

JDOM2 也让事情变得更容易......

```
public static void main(String[] args) throws MalformedURLException, JDOMException, IOException {
    final URL url = new URL("http://www.feedrinse.com/services/rinse/?rinsedurl=396ac3b0142bb6360003c8dbac4f8d47");
    SAXBuilder sbuilder = new SAXBuilder();
    Document doc = sbuilder.build(url);
    XPathExpression<Element> itemxp = XPathFactory.instance().compile("/rss/channel/item", Filters.element());

    Element feed = new Element("FEED");

    List<Element> items = itemxp.evaluate(doc);
    Element kidcount = new Element("children");
    kidcount.setText("" + items.size());
    feed.addContent(kidcount);
    for (Element item : items) {

        addItem(feed, item, "title");
        addItem(feed, item, "link");
        addItem(feed, item, "description");
        addItem(feed, item, "pubDate");
    }

    XMLOutputter xout = new XMLOutputter(Format.getPrettyFormat());

    //xout.output(doc, System.out);
    xout.output(feed, System.out);
}

private static void addItem(Element feed, Element item, String name) {
    Element emt = item.getChild(name);
    if (emt == null) {
        return;
    }
    feed.addContent(emt.clone());
} 
```**

# integration - 将另一个论坛与现有和正在运行的博客引擎集成

> ID：10462373
> 
> 赞同：0
> 
> 时间：2012-05-05T13:35:33.303
> 
> 标签：integration, yetanotherforum, yaf

我成功安装了另一个论坛代码。但是当我尝试将它与博客引擎 2.0 集成时，它给了我如下错误：- 无法加载文件或程序集“Autofac.Configuration”或其依赖项之一。该程序集由比当前加载的运行时更新的运行时构建，无法加载。谁能建议我解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:32:53.837

我认为你已经选择了 Clean 然后你重建你的解决方案的原因 Autofac dll 有时不要生成。要解决您的问题，请从下载的文件中复制 Autfac.dll 并将它们再次放入 bin 文件夹中。我已经多次遇到这个问题，这解决了它。

# facebook - 像推特一样发布到脸书

> ID：10462376
> 
> 赞同：2
> 
> 时间：2012-05-05T13:35:49.220
> 
> 标签：facebook

是否可以在 facebook 上发布一些东西，比如在 twitter 上？

我的意思是当用户单击链接时，例如[https://twitter.com/intent/tweet?url=http://google.com&text=Hello%20world](https://twitter.com/intent/tweet?url=http://google.com&text=Hello%20world)但对于 facebook？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:04:58.257

是的，使用[https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.google.com&t=Hello+World](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.google.com&t=Hello+World)将相同的消息发布到 facebook。

# php - 模块加载中断视图加载（旧代码）

> ID：10462377
> 
> 赞同：0
> 
> 时间：2012-05-05T13:35:51.890
> 
> 标签：php, codeigniter, codeigniter-2

我正在尝试 codeIgniter 和 Modular Extension。到目前为止，我按照[bitbucket 上的 wiredesignz](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)的安装说明进行操作。现在我正在尝试教程[HMVC: an Introduction and Application](http://net.tutsplus.com/tutorials/php/hvmc-an-introduction-and-application/) from NetTuts。

我正在使用 CodeIgniter 2.1 的实际版本和 Modular Extension 的实际版本（从 bitbucket 下载 .zip 版本）来执行此操作。

在我尝试从另一个模块的控制器运行方法之前，一切正常。

简而言之，设置有两个模块（站点和登录）。在站点的控制器中有 site.php ( `/modules/site/controllers/site.php`) 带有一个检查用户是否登录的方法。如果在未登录的情况下访问站点，此方法将退出脚本执行。由于此方法在逻辑上属于登录模块，作者建议把它移到那里。所以它然后被移动到`/modules/login/controllers/login.php`.

现在的问题是，如何从站点模块中访问登录模块的方法。教程中稍微调整的代码：

```
// modules/site/controllers/site.php

function __construct()  
{  
    // parent::Controller();
    // replaced with:
    parent::__construct();

    // modules::run('login/is_logged_in');
    // replaces with:
    $this->load->module('login')->is_logged_in();
} 
```

像这样我收到一个错误：

> 无法加载请求的文件：logged_in_area.php

有问题的方法也在站点模块内：

```
// modules/site/controllers/site.php

function members_area()
{
$this->load->view('logged_in_area');
} 
```

脚本一直执行到该`load->view`行并产生错误。使用以下行从站点控制器中`logged_in_area.php`运行该方法没有问题：`is_logged_in`

```
$this->is_logged_in(); 
```

有任何想法吗？

**编辑：**

应用程序树：

```
/application
  /...
  /modules
    /login
      /controllers
        login.php
      /models
      /views
        login_form.php
        signup_form.php
        signup_successful.php
    /site
      /controllers
        site.php
      /models
        membership_model.php
      /views
        logged_in_area.php 
```

PS：如何获得有关错误的更多信息？CodeIgniter 似乎对错误输出非常保留......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:17:46.380

如文档中所述，[从](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)另一个模块中加载视图，您需要使用扩展的 MX 控制器和方法：

`<?php echo Modules::run('module/controller/method', $param, $...); ?>`

# jquery - jQuery - 隐藏除第一个元素以外的所有元素

> ID：10462380
> 
> 赞同：1
> 
> 时间：2012-05-05T13:35:57.807
> 
> 标签：jquery, loops, each

假设我有 10 个按钮。我想隐藏除第一个按钮之外的所有按钮。

我试图在 jQuery 中使用 each() 来完成它，但它不起作用。

这是我的脚本。这只是一个测试，看看我是否可以获得按钮的索引。没有出现错误。

```
$('button').each(function(index){
    alert(index);
}); 
```

附加信息：

我的整个剧本是这样的

```
$(function(){
   $('div#here').load('test.php'); // This is where all the buttons will come from
   $('button').each(function(index){
       alert(index);
   });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T13:37:57.563

尝试这个：

[Slice()](http://api.jquery.com/slice/)提供更好的性能

```
$('button').slice(1).hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T13:40:34.170

与 ThiefMaster 相同，但不要忘记您需要等待按钮加载。

您需要使用 load 的回调：

```
$(function(){
$('div#here').load('test.php', function(){
   $('button:not(:first)').hide();
}); // This is where all the buttons will come from

}); 
```

文档：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T13:36:53.600

使用其中之一：

```
$('button:not(:first)').hide();
$('button:gt(0)').hide(); 
```

# jquery - 如何在不破坏子可调整大小的情况下销毁可调整大小的 jquery？

> ID：10462382
> 
> 赞同：9
> 
> 时间：2012-05-05T13:36:26.197
> 
> 标签：jquery, user-interface, destroy, resizable

我有一个可调整大小（仅宽度）的父 div - 在此 div 中，我有许多其他 div 也可调整大小（仅高度）。

有时我想禁用或破坏父宽度调整大小，但将内部高度调整大小保留在适当的位置。

当我打电话时`$("#idTopDiv").resizable("destroy");`，这也会破坏所有子 div 上的可调整大小。

典型的布局是：-

```
<div id=idDivTop> <!-- Resizable width -->
    <div id=idInnerOne>
    </div>

    <div id=idInnerTwo> <!-- Resizable height -->
    <div>
</div> 
```

欣赏任何想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T23:08:03.687

我认为发生这种情况是因为 resizable 的破坏会删除 ui 元素内的所有调整大小的句柄，这恰好包括内部可调整大小的调整大小句柄。所以内部可调整大小实际上并没有被破坏，它们只是被搞砸了。

[您可以在此处](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.resizable.js#L197)查看 Resizable 源代码；它发生在它所说的第 199 行`.find('.ui-resizable-handle').remove();`。

要解决此问题，您还需要在内部可调整大小上调用 destroy 方法，然后重新创建它们。（[jsfiddle](http://jsfiddle.net/E5EJx/1/)）

```
$("div").resizable();

// Destroy all three resizables
$("div").resizable("destroy");

// Recreate the inner resizables
$("#idInnerOne, #idInnerTwo").resizable(); 
```

您需要这样做以删除可调整大小在创建时设置的绑定和数据，否则当您尝试重新创建它时它会认为它已经创建并且它什么都不做。

您也可以考虑禁用外部可调整大小而不是销毁它，但这[有其自身的问题](http://bugs.jqueryui.com/ticket/5973)。

# javascript - 根据子值从对象中检索值？

> ID：10462383
> 
> 赞同：0
> 
> 时间：2012-05-05T13:36:45.017
> 
> 标签：javascript, object

说我有一个像这样的对象......

```
object = {
    thing0:{
        date: 'Sat, 05 May 2012 01:00:00 EST'
    },
    thing1:{
        date: 'Sat, 05 May 2012 12:00:00 EST'
    },
    thing2:{
        date: 'Fri, 04 May 2012 06:00:00 EST'
    }
} 
```

我想检索`thing`具有最新日期的。我怎样才能创建一个函数来快速比较和检索这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:38:43.643

没有捷径，你需要做一个[`for..in`](http://es5.github.com/#x12.6.4)循环来循环属性名称，并检查每件事的`date`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:48:18.840

怎么样：

```
obj = {
    thing0:{
        date: 'Sat, 05 May 2012 01:00:00 EST'
    },
    thing1:{
        date: 'Sat, 05 May 2012 12:00:00 EST'
    },
    thing2:{
        date: 'Fri, 04 May 2012 06:00:00 EST'
    }
}

key_with_max_date = Object.keys(obj).map(function(k) {
    return [new Date(obj[k].date), k];
}).sort().pop()[1] 
```

文档：[Object.keys](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)，[Array.map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)

# c++ - 在 C++ 中的多线程程序中执行串行代码

> ID：10462389
> 
> 赞同：5
> 
> 时间：2012-05-05T13:37:25.870
> 
> 标签：c++, multithreading, synchronization

**问题：**在多线程程序中，是否可以保证代码一次只能在一个线程中执行？（或近似于此的东西）

**具体来说：**我有一个控制器 M（它是一个线程）和线程 A、B、C。我希望 M 能够决定应该允许谁运行。当线程完成（最终或临时）时，控制权转移回 M。

**原因：**理想情况下，我希望 A、B 和 C 在其他线程不运行时在自己的线程中执行它们的代码。这将使每个线程能够在暂停时保留它们的指令指针和堆栈，当控制器将控制权交还给它们时，从它们离开的地方重新开始。

**我现在在做什么：**我写了一些实际上可以做到这一点的代码——但我不喜欢它。

在伪 C 中：

```
//Controller M
//do some stuff
UnlockMutex(mutex);
do{}while(lockval==0);
LockMutex(mutex);
//continue with other stuff

//Thread A
//The controller currently has the mutex - will release it at UnlockMutex
LockMutex(mutex); 
lockval=1;
//do stuff
UnlockMutex(mutex); 
```

之所以

```
 do{}while(lockval==0); 
```

需要的是，当互斥锁被解锁时，A和M都将继续。此 hack 确保 A 在 M 可以再次锁定互斥锁之前不会解锁互斥锁，从而允许 A 第二次重新获得锁并再次运行（它应该只运行一次）。

do-while 似乎有点矫枉过正，但确实有效。所以我的问题是，**有没有更好的方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:54:57.243

假设您在 Windows 上运行，您可能会尝试查看 Fibers。（参见例如[http://developer.amd.com/Pages/1031200677.aspx](http://developer.amd.com/Pages/1031200677.aspx)或只是谷歌“windows fiber”。）

我怀疑你真的在寻找协程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:40:10.713

检查 Win32 中的“CriticalSection”。C++ 11 使用了另一个术语“lock_guard”。

[如何使用 Boost 制作关键部分？](https://stackoverflow.com/questions/7066669/how-do-i-make-a-critical-section-with-boost)

[http://en.cppreference.com/w/cpp/thread/lock_guard](http://en.cppreference.com/w/cpp/thread/lock_guard)

你的代码

```
do{}while(lockval==0); 
```

会吃掉你的CPU性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T01:26:58.533

我想你是在 linux 下编写 c++ 并使用 pthread API。这是代码，不是很健壮，但是一个很好的起点。希望对你有用。使用“g++ test_controller_thread.cpp -pthread -o test_controller_thread”来使二进制执行。

```
// 3 threads, one for controller, the other two for worker1 and worker2.
// Only one thread can proceed at any time.
// We use one pthread_mutex_t and two pthread_cond_t to guarantee this.
#include <pthread.h>
#include <unistd.h>
#include <stdio.h>

static pthread_mutex_t g_mutex = PTHREAD_MUTEX_INITIALIZER;
static pthread_cond_t g_controller_cond = PTHREAD_COND_INITIALIZER;
static pthread_cond_t g_worker_cond = PTHREAD_COND_INITIALIZER;

void* controller_func(void *arg) {
    printf("entering the controller thread. \n");
    // limit the max time the controller can run
    int max_run_time = 5;
    int run_time = 0;
    pthread_mutex_lock(&g_mutex);
    while (run_time++ < max_run_time) {
        printf("controller is waitting.\n");
        pthread_cond_wait(&g_controller_cond, &g_mutex);
        printf("controller is woken up.\n");
        pthread_cond_signal(&g_worker_cond);
        printf("signal worker to wake up.\n");
    }
    pthread_mutex_unlock(&g_mutex);
}

void* worker_func(void *arg) {
    int work_id = *(int*)arg;
    printf("worker %d start.\n", work_id);
    pthread_mutex_lock(&g_mutex);
    while (1) {
        printf("worker %d is waitting for controller.\n", work_id);
        pthread_cond_wait(&g_worker_cond, &g_mutex);
        printf("worker %d is working.\n", work_id);
        pthread_cond_signal(&g_controller_cond);
        printf("worker %d signal the controller.\n", work_id);
    }
    pthread_mutex_unlock(&g_mutex);
}

int main() {
    pthread_t controller_thread, worker_thread_1, worker_thread_2;
    int worker_id_1 = 1;
    int worker_id_2 = 2;
    pthread_create(&controller_thread, NULL, controller_func, NULL);
    pthread_create(&worker_thread_1, NULL, worker_func, &worker_id_1);
    pthread_create(&worker_thread_2, NULL, worker_func, &worker_id_2);

    sleep(1);
    printf("\nsignal the controller to start all the process.\n\n");
    pthread_cond_signal(&g_controller_cond);

    pthread_join(controller_thread, NULL);
    pthread_cancel(worker_thread_1);
    pthread_cancel(worker_thread_2);

    return 0;
} 
```

# c# - 使用 C# 读取“Java”db4o 数据库时，JavaSupport 的替代方案是什么？

> ID：10462392
> 
> 赞同：0
> 
> 时间：2012-05-05T13:37:53.207
> 
> 标签：c#, java, deprecated, db4o

我正在使用用 Java 创建的 db4o 数据库，但我使用的是 C#。

我使用的代码基于[Versant 网站的示例](http://community.versant.com/documentation/reference/db4o-7.12/net2/reference/Content/implementation_strategies/aliases/cross-platform_aliasing.html)

但是，示例中使用的**Db4objects.Db4o.Config.JavaSupport**类在 db4o 程序集的最新（自 8.0 版本）中被标记为过时。

使用 C# 从 db4o 数据库读取 Java 对象时是否有新方法？如果是这样，有人可以为我指出一些新方法的示例代码吗？搜索时我找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T01:44:29.013

不确定这是否有效，但也许值得一试：使用 IKVM.NET 与原始 Java 类一起运行 db4o 的 JAVA 版本。这样您就不需要依赖 db4o 中不受支持的“JavaSupport”内容。

我还没有尝试过，但我可以想象它会起作用。我已经使用 IKVM.NET 在 .NET 中运行其他重要的 Java 库。

# sql - 为什么我要在默认目录之外创建另一个目录？

> ID：10462395
> 
> 赞同：4
> 
> 时间：2012-05-05T13:38:05.757
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, full-text-search

我是 Sql 服务器全文搜索的新手。为什么我要在默认目录之外创建另一个目录？

我实际上不明白目录是如何组织全文索引的，我的印象是它就像一个表的模式。请向我核实。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T18:52:55.497

似乎不可能将第二个全文目录添加到同一个表中。在 SQL Server 2008R2 上，添加目录后，添加另一个目录的按钮被禁用：

![在此处输入图像描述](../Images/77da2240ed340ab495c1ac7aa1e767cc.png)

不过，您可以将 2 个符合条件的列添加到同一目录中：

![在此处输入图像描述](../Images/7fdad2df5b760d27855b9e1e3a90fe11.png)

关于 FTS 的更多建议：

[数据库日志 - 设置全文搜索：分步指南](http://www.databasejournal.com/features/mssql/article.php/1438211/Setting-Up-Full-Text-Search-A-Step-by-step-Guide.htm)

[MSDN - SQL Server 最佳实践 - 全文搜索](http://technet.microsoft.com/en-us/library/cc917695.aspx#EBAA)

# svn - 在 SVN 分支/标签/合并中需要帮助

> ID：10462402
> 
> 赞同：-1
> 
> 时间：2012-05-05T13:38:51.000
> 
> 标签：svn, version-control

有人可以解释一下，SVN分支，标签，合并是做什么的？为什么他们在那里？以及如何最好地利用它们。

我已经阅读了他们网站上的一些文档，但仍然不清楚如何最好地利用它们以及用于什么目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:43:19.533

*   分支和标签（在技术上与 SVN 相同）：将路径“复制”到新路径
*   合并：将一个路径的更改应用到另一路径的多个修订中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:48:28.920

我想我的问题在这里得到了回答：

[http://svnbook.red-bean.com/en/1.5/svn.branchmerge.whatis.html](http://svnbook.red-bean.com/en/1.5/svn.branchmerge.whatis.html)

[http://svnbook.red-bean.com/en/1.5/svn.branchmerge.tags.html](http://svnbook.red-bean.com/en/1.5/svn.branchmerge.tags.html)

# php - 许多对象只有一个 DbManager

> ID：10462403
> 
> 赞同：0
> 
> 时间：2012-05-05T13:39:01.397
> 
> 标签：php, oop

我正在构建一个基于 OOP 的大型 PHP 项目，我编写了 2 个类 User 和 Page ：

```
class User{

//user properties
  private $_id,
          $_name,
          $_email;
//constructor
   public function __construct(){}

//getters and setters
   public function setId($id){
     $this->$_id=$id;
   }

    public function setName($name){
     $this->$_name=$name;
   }

    public function setId($email){
     $this->$_email=$email;
   }

   public function getId(){
    return $this->_id;
   }

   public function getName(){
    return $this->_name;
   }

  public function getEmail(){
    return $this->_email;
   }
}

class Page{
   //properties
   private $_id,
           $_title;

   //constructor
   public function __construct(){}

   //getters and setters

   public function setId($id){
     $this->_id=$id;
   }

   public function setTitle($title){
      $this->_title=$title
   }

   public function getId(){
     return $this->_id;
   }

   public function getTitle(){
     return $this->_title;
   }

} 
```

正如你可以得出的结论，我需要添加另一个包含添加、编辑、删除、列表和视图方法的 DBManager 类。

我不知道如何在 DBManager 类中创建一个可以添加用户和页面的方法（例如添加）。无需为每个班级创建班级管理器。

换句话说，我想为我的所有对象创建一个类 DBManager .. 而不是创建类似的东西：

```
class User : class UserManager
class Page : class PageManager 
```

# javascript - 如何使用waypoint.js 无限滚动？

> ID：10462404
> 
> 赞同：2
> 
> 时间：2012-05-05T13:39:07.347
> 
> 标签：javascript, jquery, ajax, scroll, infinite

这就是正在发生的事情。我有一个名为“home.html”的 html 文档。它包含许多 div，每个 div 都是一个帖子。我还有一个 index.html，其中有一个 div #content。index.html 中的内容为空，但通过 .load() 调用填充了 home.html 中的 div。此外，在 .load 调用中使用 div:nth-child(-n + 10) 我可以让它只加载前十个帖子。我如何使用 waypoint.js 来添加无限滚动？这样一旦滚动条到达底部的 75%，它就会从 home.html 加载接下来的 10 个 div。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:18:37.450

在页面上加载 10 个元素后，连接一个将触发操作的 jquery 路点。

该操作的第一步是禁用航点（因此它只触发一次）。然后让它通过 ajax 加载其他数据并将其呈现在页面上。 **完成后**（通过回调），您将重新激活航点，以便在用户向下滚动到它时重新开始该过程。

您的应用程序必须跟踪加载了多少和哪些元素，因此您的 ajax 请求请求正确的数字（即加载了 10，因此下一个请求应该从 10 开始并获取 10，下一个请求应该从 20 开始并获取 10 ， ETC）。

“到底部的 75%”很容易在航路点进行配置。您将为此使用“偏移量”。

查看[**航点文档**](http://imakewebthings.com/jquery-waypoints/#documentation)

我将触发无限滚动的 DOM 元素放在我拥有的主网格下方，因此当我加载更多内容时，它会自动将其向下推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:42:05.610

我使用jquery masonry+waypoint js ..但是如果你没有在masonry回调中注册waypoint，它会多次加载你的ajax调用附带的项目。这是我的解决方案；

```
//INFINITE SCROLL
    var $loading = $("#itemsloading"),
    $footer = $('footer'),
    opts = {
        offset: '120%',
        onlyOnScroll:false
    };

    $footer.waypoint(function(event, direction) {
        $footer.waypoint('remove');
            $loading.toggle(true);
            $.get($('.more').attr('href'), function(data) {
                var $data = $(data.result[0]);  
                if($(data.result[0]).length==0){
                    $loading.toggle(false);
                    return false;
                }
                $('#items').append( $data ).masonry( 'appended', $data, true, 
                        function(){
                            $footer.waypoint(opts);
                            });
                $loading.toggle(false);
            }); 
    }, opts); 
```

# java - 在服务器和客户端之间传递对象的更好方法是什么？

> ID：10462409
> 
> 赞同：3
> 
> 时间：2012-05-05T13:39:43.537
> 
> 标签：java, android, servlets, object-oriented-database, objectdb

再会。我在服务器端使用 Glassfish+ObjectDB（嵌入式模式）开发服务器-客户端应用程序，在客户端使用 Android 应用程序。将在 ObjectDB 中存储为 java 对象的数据发送到 android 应用程序的首选方式是什么（关于流量和安全性）？（数据必须加密。）我想：

*   通过流输入/输出传递可序列化对象。
*   以 XML/JSON 格式传递数据。

或者可能有其他方法？

谢谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:45:44.110

你可以试试 Protobuf [http://code.google.com/p/protobuf](http://code.google.com/p/protobuf)。流量少，易于集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-08T20:11:12.547

二进制数据也具有最小的大小，但用处不大。XML 是自描述的，但具有最大的大小。如果您只需要在您的应用程序之间发送数据，您可以选择二进制格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:50:20.600

在我的项目中，我正在做第一种方法。

*   通过流输入/输出传递可序列化对象。

这意味着我做“文件”上传resp。下载。但是，通过这种方法，您必须在双方（服务器和安卓）上使用 Java，这在我的情况下不是问题

你的第二种方法会产生很多开销

不应在此级别上进行加密。更好地使用 HTTPS

# javascript - getElementById() .innerHTML/.src

> ID：10462420
> 
> 赞同：0
> 
> 时间：2012-05-05T13:41:15.063
> 
> 标签：javascript, innerhtml

我正在尝试为大学创建一个简单的 javascript 游戏，但无法获得我想要在屏幕上显示的内容。

我的脚本如下：

```
var qArray = new Array();
    qArray[0] = {image:"Images/q1.png"};
    qArray[1] = {image:"Images/q2.png"};
    qArray[2] = {image:"Images/q3.png"};
    qArray[3] = {image:"Images/q4.png"};
    qArray[4] = {image:"Images/q5.png"};

var count = 0;
var question = qArray.splice(count,1); 
```

当我使用它时，我得到“未定义”：

```
document.getElementById("question").innerHTML = question.image; 
```

当我使用它时，我什么也得不到：

```
document.getElementById("question").src = question.image; 
```

我的 html 只是一个简单的 div，如下所示：

```
<div id = "question" align = "center">
</div> 
```

我需要有“计数”变量，因为它会递增以显示下一个问题的下一个图像

如果有人可以提供帮助，那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:40:31.217

这是一个工作[小提琴](http://jsfiddle.net/9s3vv/)。qArray.splice() 不起作用，因为它实际上会从数组中删除该元素并返回一个新数组，而您只是在查找数组中的特定索引（更不用说您刚刚删除了要查找的元素）

这行得通。我使用了一个随机的 imgur 图像来显示它确实加载了。

```
<html><head></head><body>

<img src="" id="question"></img>

<script type="text/javascript">

var qArray = new Array();
    qArray[0] = {image:"http://i.imgur.com/pGpmq.jpg"};
    qArray[1] = {image:"Images/q2.png"};
    qArray[2] = {image:"Images/q3.png"};
    qArray[3] = {image:"Images/q4.png"};
    qArray[4] = {image:"Images/q5.png"};

var count = 0;
var question = qArray[count];

document.getElementById('question').src = question.image;

</script>
</body>
</html> 
```

# java - 为什么java中存在intern方法？

> ID：10462423
> 
> 赞同：4
> 
> 时间：2012-05-05T13:41:49.507
> 
> 标签：java, string

> **可能重复：**
> [何时使用 intern()](https://stackoverflow.com/questions/1833581/when-to-use-intern)
> [我们何时应该使用 String 的 intern 方法？](https://stackoverflow.com/questions/1855170/when-should-we-use-intern-method-of-string)

java实习生字符串会自动吗？如果确实如此，为什么 string 有一个明确的实习生方法？需要显式调用时的任何特定用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:47:20.460

Java 不会在运行时自动生成字符串。（它在编译时对字符串常量这样做）。

我有一个特定的用例，其中我节省了大约 30% 的堆用于接收在地图中表示的记录的组件中。每条记录中的键集都是相同的，但收到的每条新记录都会创建一个新的键字符串实例。通过实习密钥字符串，堆消耗大大减少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:46:20.940

来自 JavaDoc：“所有文字字符串和字符串值的常量表达式都是实习的。”

据我所知，在运行时实习并没有提供任何性能优势。如果您有许多动态创建的包含重复的字符串，它可以为您提供一些堆空间。不过，例如，为此使用您自己的哈希对我来说似乎更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:47:29.207

它只会自动实习字符串*文字*。如果您自己创建字符串（例如，来自网络的输入流），它将不会被实习。如果您希望有很多相同字符串的实例，那么可能值得将它们实习，而不是在堆上放置大量等效字符串。就个人而言，我从未使用过它。

# ios - 将 InputStream 数据转换为不同的数据类型

> ID：10462424
> 
> 赞同：1
> 
> 时间：2012-05-05T13:41:54.203
> 
> 标签：ios, xcode, inputstream

我一直在使用 Objective-C 中的 InputStreams，并且似乎在处理接收到的数据时采取了错误的步骤。

我正在接收字节块，这些字节被读取并转换为数据类型，如整数、浮点数、双精度数等。

到目前为止，我的过程是这样的：

```
readBuffer = (uint8_t *) malloc(4);
memset(readBuffer, 0, 4);
while (length < byteLength) {
    length = [InputStream read:readBuffer 4];
}
[something fourByteUint8ToLong:readBuffer]; 
```

现在为了做一些从 4 字节到长的转换

```
- (long) fourByteUint8ToLong:(uint8_t *) buffer
{
    long temp = 0;
    temp |= buffer[0] & 0xFF;
    temp <<= 8;
    temp |= buffer[1] & 0xFF;
    temp <<= 8;
    temp |= buffer[2] & 0xFF;
    temp <<= 8;
    temp |= buffer[3] & 0xFF;
    return temp;
} 
```

使用objective-C 类没有更简单的方法来处理这个问题吗？

在那种情况下怎么办？8 字节 -> 双字节，4 字节 -> 浮点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:04:24.167

使用`CoreFoundation.h`类函数解决的问题：

```
uint8_t * buffer;
buffer = (uint8_t *) malloc(8);
double tempDouble = CFConvertFloat64SwappedToHost(*((CFSwappedFloat64*)buffer)); 
```

# ajax - JQuery Tools 1.2.7（和 1.2.8 开发）第一个选项卡未加载

> ID：10462427
> 
> 赞同：0
> 
> 时间：2012-05-05T13:42:05.730
> 
> 标签：ajax, tabs, jquery-tools

我曾尝试使用 JQuery Tools 1.2.7 ajaxed 选项卡，但由于某种原因，默认情况下第一个选项卡不会加载。我必须单击任何其他选项卡，然后返回到第一个选项卡才能加载和显示它。

在这里查看他们的演示：http: [//jquerytools.org/demos/tabs/ajax-history.html](http://jquerytools.org/demos/tabs/ajax-history.html)

在演示中是一样的，我必须转到第二个或第三个选项卡，然后当我返回第一个选项卡时它会被加载，当页面加载时它不会被加载......

换句话说，我遇到了和这个人一样的问题：http: [//jquerytools.org/forum/tools/25/99227](http://jquerytools.org/forum/tools/25/99227)

有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:21:17.567

我设法通过将“$("div.css-panes > div").load('ajax1.htm')”添加到“使用 JavaScript 激活选项卡”功能来解决此问题：

```
$(function() {
    $("ul.css-tabs").tabs(
        "div.css-panes > div",
        {effect: 'ajax', history: false}
        );
    $("div.css-panes > div").load('ajax1.htm');
    }); 
```

在 jQuery 工具示例 (http://jquerytools.org/demos/tabs/ajax-history.htm) 中。

# java - 选中或未选中后立即获取复选框状态

> ID：10462430
> 
> 赞同：1
> 
> 时间：2012-05-05T13:42:13.397
> 
> 标签：java, android

我想在选中或未选中后立即获取复选框的当前状态。基于该显示 Toast 消息。到目前为止，这是我的代码。

```
SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    boolean Alarm = getPrefs.getBoolean("cbAlarm", true);
    if(Alarm == true) {
        Toast.makeText(this, "Checked", Toast.LENGTH_LONG).show();
    } else if(Alarm == false) {
        Toast.makeText(this, "UnChecked", Toast.LENGTH_LONG).show();
    } 
```

我怎样才能做到这一点。请帮忙。

**编辑** 这里是我的 xml 文件

```
<CheckBoxPreference
    android:title="Enable/Disable Alarm"
    android:defaultValue="true"
    android:key="cbAlarm"
    android:summary="Enable or disable alarm" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:47:06.137

只需实现 OnCheckedChangeListener：

```
CheckBox myCheckBox = (CheckBox)  findViewById(R.id.my_checkbox);

myCheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked){
        if (isChecked){
             Toast.makeText(this, "Checked", Toast.LENGTH_LONG).show();
        }else{
             Toast.makeText(this, "UnChecked", Toast.LENGTH_LONG).show();
        }  
    }
}); 
```

# php - 通过 PHP 连接到 mysql 数据库？

> ID：10462435
> 
> 赞同：0
> 
> 时间：2012-05-05T13:43:23.410
> 
> 标签：php, mysql, database

好的，我一直在玩 PHP 和数据库。请注意，我在 bluehost 托管的网络服务器上完成所有工作。所以我进入 cpanel 并建立了一个名为 gagalugc_stocks 的数据库。我还设置了一个用户名（测试）和一个密码（密码），并添加了它们以便能够控制数据库。下面是我试图连接到它的脚本，而不是它也在服务器上。

```
<?php
$connect = mysql_connect('localhost','test','password');
if(!$connect){die('Could not reach database!');}
mysql_select_db("gagalugc_stocks", $connect)
?> 
```

-谢谢

注意：问题是它永远无法访问数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T23:52:20.110

怎么样

```
<?php
$connect = mysql_connect('localhost:2083','test','password');
if(!$connect){die('Could not reach database!');}
mysql_select_db("gagalugc_stocks", $connect)
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:19:26.057

添加数据库时未检查端口确保指定主机和端口

```
(localhost:2083) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:49:42.507

```
<?php
$connection = mysql_connect ('localhost', 'test', 'password')
or die ('<b>Could not connect: </b>' . mysql_error());
$result = mysql_select_db("gagalugc_stocks")
or die ('<b>Could not connect: </b>' . mysql_error());
?> 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-10-06T17:47:03.213

对于本地系统：-

```
$con = mysql_connect("localhost","root","");
if (!$con){
    die('Unable to connect to the server ' . mysql_error());
}
mysql_select_db("databasename", $con) or die(mysql_error()); 
```

对于网站或远程服务器：-

```
$con = mysql_connect("localhost","username","password");
if (!$con){
    die('Unable to connect to the server ' . mysql_error());
}
mysql_select_db("databasename", $con) or die(mysql_error()); 
```

更多信息请访问：[Algosoftwares](http://www.algosoftwares.com)

# algorithm - 将复杂度从 O(n) 更改为 O(1)

> ID：10462437
> 
> 赞同：0
> 
> 时间：2012-05-05T13:43:52.110
> 
> 标签：algorithm, complexity-theory

对于以下代码：

```
 s = 0 ;  
 for(i=m ; i<=(2*n-1) ; i+=m)  {  
      if(i<=n+1){ 
        s+=(i-1)/2 ; 
      }  
      else{ 
        s+=(2*n-i+1)/2 ; 
      }    
 } 
```

我想将代码的复杂性从 更改`O(n)` 为`O(1)`. 所以我想消除 for 循环。但是，由于总和`s`存储了类似`(i-1)/2`或这样的值，`(2*n-i+1)/2`因此消除循环涉及对每个 `(i-1)/2`or的底值进行繁琐的计算`(2*n-i+1)/2`。这样做对我来说变得非常困难，因为我可能推导出了错误的楼层总和公式。你能帮我把复杂性从`O(n)`变成`O(1)`. 或者请帮我做这个楼层总结。有没有其他方法可以降低复杂性？如果是……那怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:19:15.943

我的方法是首先编写特征测试，断言为不同的值`m`和产生的值`n`，然后开始重构。

您的主循环基于中途（`if(i<=n+1)`选择）而改变了逻辑，因此我首先将其拆分为两个循环。

然后，您在每个生成的循环中都有一个主要根据`i`是偶数还是奇数而变化的计算。将每一个拆分为另外 2 个循环，将它们分开，并且地板计算可能更容易理解。或者，您可能会看到一种重复值的模式，可以让您以不同的方式简化这些循环。

每个生成的循环都可能类似于算术级数的总和，因此您可能会发现它们可以被完全不需要循环的封闭形式计算所取代。

当您沿着这条路径前进时，您还可以重构以将部分计算提取为函数。在提取它们时为它们编写特征测试。

继续运行所有测试，您可能能够将其减少为简单计算的总和，然后通过简单的旧算术进一步减少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T18:29:30.687

正如唐罗比所说，你的问题有一个简单的旧算术解决方案。让我向您展示如何处理 i 的第一个值。

*** 编辑 2：下部代码 ***

```
 for(int i=m ; i<= n+1 ; i+=m)//old computation
          s+=(i-1)/2 ;

    int a = (n+1)/m; // maximum value of i
    int b = (a*(a+1))/2; //
    int v = 0;
    int p;
    if(m % 2 == 0){
        p = m/2;
        v = b*p-a; // this term is always here
    }
    else{
        p = (m - 1)/2;
        int sum1 = ((a/2)*(a/2 +1))/2; 
        int sum2 =  (((a-1)/2)*((a-1)/2 +1))/2;  

        v = b*p -a ;// this term is always here
        v+= sum1 + a/2; //sum( 1 <= j <= a )(j-1), j pair
        v+= sum2; //sum( 1 <= j <= a )(j-1), j impair
    }
    System.out.println( " Are both result equals ? "+ (s == v)); 
```

我怎么想出来的？我拿

```
 for(i=m ; i<= n+1 ; i+=m)
      s+=(i-1)/2 ; 
```

我做出改变

```
 for(j=1 ; j*m <= n-1 ; j++)
     s+=(j*m-1)/2 ; 
```

我摆姿势`a=Math.floor(n+1/m)`。有3种情况：

1.  m 是对，则循环的内部是`s+= p*j`。结果是

    ```
     b(a*(a+1))/2 -a 
    ```

2.  m 是 impair 并且迭代器 j 是 pair

3.  m 为 impair 且迭代器 j 为 impair 当 m 为 impair 时，您可以编写`m = 2p + 1`并且循环的内部变为

    ```
     s+= p*j + (j-1)/2 
    ```

`p*j`与以前相同，现在您需要通过假设 j 始终为 pair 或 j 始终为 impair 并将两个值相加来打破除法。

您需要计算的下一个循环是

```
 for(int i=a+1 ; i<= (2*n-1) ; i+=m)// a is (n+1)/m
    s+=(2*n-i+1)/2; 
```

这与

```
 for(int i=1 ; i<= (2*n-1)-a ; i+=m)
    s+= (2n-a)/2 - (i-1)/2; 
```

这个循环类似于第一个循环，所以没有太多工作要做......确实这很乏味......

# javascript - 在代码结束之前触发 css 更改

> ID：10462438
> 
> 赞同：0
> 
> 时间：2012-05-05T13:43:53.503
> 
> 标签：javascript, jquery

我确定这个问题已经被问过了，但我找不到合适的关键字来喂谷歌。我什至找不到我的问题的好标题。我想做这个 ：

```
$(".selector").click(function() {
    $(this).css("background-color", "red");
    if (confirm("Do you want to do this ?") {
        // do this
    } else {
        $(this).css("background-color", "transparent");
    }
}); 
```

但是只有在我确认后才会触发 css 更改。如何在确认之前（或在确认期间）触发它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:46:37.653

我敢打赌，这只是添加延迟（甚至只是 0 毫秒）的简单问题。这将确保页面在确认消息出现之前重新绘制。

```
$(".selector").click(function() {
    $(this).css("background-color", "red");
    var _this = this;
    function confirmCode(){
        if (confirm("Do you want to do this ?") {
            // do this
        } else {
            $(_this).css("background-color", "transparent");
        }
    }
    setTimeout(function(){confirmCode()}, 0)
}); 
```

编辑：添加完整代码

# c++ - 使用 C++ 的函数指针错误

> ID：10462441
> 
> 赞同：-1
> 
> 时间：2012-05-05T13:44:13.530
> 
> 标签：c++

为什么以下代码会导致错误：

```
class A {

public:
        typedef void (A::*funptr)(void);

        void fun(void ) {
                cout << " Fun Call " <<endl;
        }

        void foo(void ) {
                cout << " Foo Call " <<endl;
        }

        funptr p[2];
        funptr q;

        A()
        {
                p[0]=&A::foo;
                p[1]=&A::fun;
                q   =&A::fun;
        }
};

int main ()
{

A obj;

(obj.*q)(void);

//(obj.p[0])();
//(obj.p[1])();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T13:47:47.453

你需要这样称呼它：

```
(obj.*obj.q)(); 
```

.* 运算符不采用右侧的成员名称，而是采用计算结果为成员指针的表达式。当你写这个：

```
(obj.*q)(); 
```

它正在寻找一个名为 q 的变量，但范围内没有这样的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:57:45.963

将所有出现的 更改`(void)`为`()`。在声明上它是多余的，在调用本身上它是不允许的。

# php - 如何在php中获取url值？

> ID：10462444
> 
> 赞同：0
> 
> 时间：2012-05-05T13:44:28.947
> 
> 标签：php, mysql, database

我想在用户登录时进行选项编辑产品。这是用户在网络上单击编辑时的链接。

```
 <a href="edit.php?id=<?php $id=$data['gameId'];echo $id;?>" ><input type="button" value="Edit"/></a> 
```

然后在编辑页面中，有提交按钮，我在 doUpdate.php 中填写了一些验证我试图从 doUpdate.php 中的 URL 获取 id 以在数据库中进行更新（Id 是主键，我使用我的 sql 作为数据库）所以我使用这段代码

```
 $id= $_GET['id']; 
```

问题是，为什么 $id 不能从 url 中获取 id 值？我应该如何解决这个问题？（它还没有托管，我使用 localhost 因为我还在学习）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:57:40.950

您必须在您的 edit.php 中编辑表单操作，`<form name="edit" action="doUpdate.php?id=<?= $_GET['id'] ?>`或者您只需在表单中创建一个输入字段，该字段具有来自您的 GET 参数的值。.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:52:10.413

如果我对您的理解正确，问题不是在edit.php 中获取id，而是在doUpdate.php 中获取id。大概您的编辑页面正在将日期发布到 doUpdate 页面，在这种情况下，您需要做两件事。

首先在编辑页面的表单中，您需要在表单中添加一个隐藏元素，其中包含要传递给 doUpdate.php 的 id

```
<input type="hidden" name="id" value="<?php echo $_GET['id']; ?>"/> 
```

然后在 doUpdate.php 中从 $_POST 全局获取它

```
$id = $_POST['id']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:47:15.293

标签内的`<a>`代码不正确。此外，您不能`<button>`在`<a>`. 尝试这个：

```
<a href="edit.php?id=<?php echo $data['gameId'];?>">Edit</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T13:47:37.640

PHP 可以使用名为 register_globals 的功能以这种方式自动设置变量，但使用此功能可能会在您的应用程序中打开安全漏洞，这就是它目前被弃用的原因，最终将从 PHP 中删除。

PHP 手册对该功能以及为什么不应该使用它有详细的解释：http: [//php.net/manual/en/security.globals.php](http://php.net/manual/en/security.globals.php)

# c# - HTML 选择器库

> ID：10462445
> 
> 赞同：2
> 
> 时间：2012-05-05T13:44:33.753
> 
> 标签：c#, jquery, .net, html, jquery-selectors

Dot Net 世界中是否存在任何类似 jQuery 的 html 元素选择器库？我正在构建一个涉及大量 html 解析的应用程序。

假设我想枚举所有 'href' 和 'src' 里面只有一个选定的 'div' 的 id 像“post_message_%”。或者说想要在具有特定 id 或输入类型（例如隐藏或单选）的表单中选择名称和值字符串

我可以编写代码..但首先寻找任何现有的解决方案，以便我可以使用它并节省我的时间做其他事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T20:33:22.663

游戏有点晚了，但这是另一种选择。[CsQuery](https://github.com/jamietre/csquery)是 .NET4 中 jQuery 的完整端口。它在 NuGet 上作为`CsQuery`. 它稳定且功能齐全，包括所有 CSS3 选择器和 DOM 操作方法。它也是完全索引的，使得选择器比 HTML Agility Pack 快几个数量级。

语法看起来像这样（复制上面的例子）

```
CQ doc = CQ.CreateFromFile("file.htm");
foreach (IDomObject link in doc["a"]) {
    var attr = link["href"];
    link["href"] = FixLink(attr);
} 
```

对象的属性索引器语法`CQ`与运行选择器的默认 jQuery 方法相同，例如`$('a')`. 在`DomObject`（一个元素）上，它返回属性值。

除了 CSS 选择器，CsQuery 还实现了所有的 jQuery 方法，所以你可以这样做：

```
doc.Each((i,e)=> {
    var el = CQ.Create(e);   // or shorthand: var el = e.Cq()
    el.Attr("href",FixLink(el.Attr("href"))
}); 
```

语法`e.Cq()`是将元素包装在 jQuery 对象中的 C# 版本，例如`var el = $(e)`. 由于 $ 语法的价值在于其简洁性，并且无法在 C# 中创建默认静态方法，`Cq()`因此提供了元素上的方法作为将元素包装在`CQ`对象中的简写形式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T13:46:43.690

您应该查看 Html Agility 包，可[在此处](http://htmlagilitypack.codeplex.com/)获得。这是他们网站上的一个用例，它使用 XPATH 选择器：

```
HtmlDocument doc = new HtmlDocument();
doc.Load("file.htm");
foreach(HtmlNode link in doc.DocumentElement.SelectNodes("//a[@href"])
{
   HtmlAttribute att = link["href"];
   att.Value = FixLink(att);
}
doc.Save("file.htm"); 
```

# javascript - 使用 Javascript 解析 XML（最终在 phonegap 中使用）

> ID：10462448
> 
> 赞同：0
> 
> 时间：2012-05-05T13:44:59.167
> 
> 标签：javascript, jquery, xml, ajax

我正在尝试在 javascript 中解析一些 XML 结果以与 phonegap 一起使用。就目前而言，我的 xml 布局是：

```
<Results>
     <Result>
          <FirstName>John</FirstName>
          <Surname>Beech</Surname>
          <Company>CompanyName</Company>
          <Job_Title>Property Department</Job_Title>
          <UserID>184</UserID>
          <CompanyID>CompanyID</CompanyID>
          </Result>
     <Result>
          <FirstName>Rosie</FirstName>
          <Surname>Beech</Surname>
          <Company>CompanyName</Company>
          <Job_Title>Job Title</Job_Title>
          <UserID>10494</UserID>
          <CompanyID>17322</CompanyID>
     </Result>
</Results> 
```

我正在使用以下 javascript 来提醒响应，但最终我想创建一个响应表。

```
<script language="javascript" type="text/javascript">
    window.onload = function () {
        $.ajax({
            type: 'GET',
            url: 'Lookupbysurname.aspx?surname=beech',
            dataType: 'html',
            success: function (data) {

                try {
                    xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
                    xmlDoc.async = "false";
                    xmlDoc.loadXML(data);
                }
                catch (e) {
                    try {
                        parser = new DOMParser();
                        xmlDoc = parser.parseFromString(data, "text/xml");
                    }
                    catch (e) {
                        alert(e.message);
                        return;
                    }
                }

                for (var i = 0; i < xmlDoc.getElementsByTagName("CompanyID")[0].childNodes[0].length; i++) {
                    alert(xmlDoc.getElementsByTagName("CompanyID")[0].childNodes[0].nodeValue);
                }
            }
        });
    }
</script> 
```

然而，目前它只是一遍又一遍地发出相同的响应。我把循环放在一起错了吗？JS 中的循环不是我的强项！任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:49:31.140

> 然而，目前它只是一遍又一遍地发出相同的响应。

当然是，您`0`每次都使用相同的索引 ( )。

但是 TL;DR 版本是：既然您已经在使用 jQuery，那就使用 jQuery。您不仅可以使用它来替换复杂的解析器创建逻辑[`$.parseXML`](http://api.jquery.com/jQuery.parseXML/)，还可以使用 jQuery 来执行循环。在这里，我假设您正在尝试遍历`CompanyID`元素：

```
var xmlDoc = $.parseXML(data);
var $xml = $(xmlDoc);
$xml.find("CompanyID").each(function() {
    alert($(this).text());
}); 
```

[实例](http://jsbin.com/unewum)| [来源](http://jsbin.com/unewum/edit)

* * *

为此，您的代码正在使用`0`而不是`i`：

```
for (var i = 0; i < xmlDoc.getElementsByTagName("CompanyID")[0].childNodes[0].length; i++) {
    // This is always 0 -----------------------------------------v 
    alert(xmlDoc.getElementsByTagName("CompanyID")[0].childNodes[0].nodeValue);
} 
```

如果要遍历子节点，则要使用`i`，而不是。`0`

* * *

但是这个循环*非常*低效，因为你每次都要返回并重复查找。反而：

```
var nodes = xmlDoc.getElementsByTagName("CompanyID")[0].childNodes;
for (var i = 0; i < nodes.length; i++) {
    alert(nodes[i].nodeValue);
} 
```

或者，当然，使用`firstChild`and `nextSibling`：

```
var node;
for (node = xmlDoc.getElementsByTagName("CompanyID")[0].firstChild;
     node;
     node = node.nextSibling) {
    alert(node.nodeValue);
} 
```

* * *

但是查看您的 XML，我怀疑您想要遍历`CompanyID`节点，而不是它们的子节点：

```
var node;
for (node = xmlDoc.getElementsByTagName("CompanyID");
     node;
     node = node.nextSibling) {
    alert(node.firstChild.nodeValue);
} 
```

* * *

但是同样，您可以通过更多地使用您已经在使用的库来用更少的代码来做到这一点。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T14:41:36.647

`parseXML()`您可以通过 using`XMLHttpRequest`的属性来避免使用`responseXML`，该属性包含在 jQuery 中，如下所示：

```
$.ajax({
    type: 'GET',
    url: 'Lookupbysurname.aspx?surname=beech',
    dataType: 'xml',
    success: function(xmlDoc) {
        alert(xmlDoc.getElementsByTagName("CompanyID")[0].nodeValue);
    }
}); 
```

由于您已经在使用 jQuery，您可以使用 jQuery 来遍历 XML：

```
var $xml = $(xmlDoc);
$xml.find("CompanyID").each(function() {
    alert( $(this).text() );
}); 
```

完整代码：

```
$.ajax({
    type: 'GET',
    url: 'Lookupbysurname.aspx?surname=beech',
    dataType: 'xml',
    success: function(xmlDoc) {
        var $xml = $(xmlDoc);
        $xml.find('CompanyID').each(function() {
            alert( $(this).text() );
        });
    }
}); 
```

# ios - 在 ios 应用程序上显示刷新图标

> ID：10462449
> 
> 赞同：0
> 
> 时间：2012-05-05T13:45:01.480
> 
> 标签：ios, refresh

如何将刷新按钮更改为刷新图标？就像应用程序更新时一样，应用程序中心会弹出一个带有动画刷新图标的窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:02:41.640

听起来您要的是模态活动指示器。人们最常用的是[`MBProgressHUD`](https://github.com/matej/MBProgressHUD).

![MBProgressHUD 示例图像](../Images/9295fe7edbf7e2f654b0d4de0d898365.png)

# javascript - 带有 Shadowbox 的 vintage.js

> ID：10462450
> 
> 赞同：0
> 
> 时间：2012-05-05T13:45:09.137
> 
> 标签：javascript, jquery, shadowbox, vintagejs

我想将 vintage.js 与 shadowbox.js 一起使用！

```
<a rel="shadowbox" href="large.jpg"><img src="small.jpg" /></a> 
```

和脚本

```
$(document).ready(function(){Shadowbox.init({ onFinish: function () { $('img').vintage({noise: 20}); } }); }); 
```

Shadowbox 工作正常，但不是复古适用于图像！

```
$ is not a function
[Break On This Error]   
onFinish: function () { $('img').vintage({noise: 20}); } 
```

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:56:03.047

Shadowbox在使用它的任何播放器时都会创建**每个链接元素**的副本。

To use your **[vintageJS](https://github.com/rendro/vintageJS)** effects with the **Shadowbox img Player** , Shadowbox provides an **ID** named **sb-player** that you can use as the appropriate **selector** for any of it's players.

**将$('img')**更改为**$('#sb-player')**以允许您的 HTML5 FX 应用于打开的 Shadowbox 中的图像。

# delphi - IntraWeb / DataSnap？

> ID：10462453
> 
> 赞同：4
> 
> 时间：2012-05-05T13:46:04.617
> 
> 标签：delphi, datasnap, intraweb

我是一名业余程序员，尝试使用 Delphi XE 构建客户端/服务器应用程序套件。

我偶尔会编写独立的应用程序，供我个人使用。问题是我对网络/多层一无所知。不过我愿意学习。

我想方设法做到这一点，DataSnap 和 IntraWeb 成为最有可能胜任这项工作的候选人。但是，在我开始使用其中一种之前，我想知道一些我在网上找不到的信息：

1.  如果我构建一个 IW 独立应用程序并将其部署在我的站点（作为服务器）上，我是否能够使用客户端应用程序连接到它/检索数据？我需要在我的 Delphi 编写的应用程序中做到这一点，而不使用浏览器和 HTML（我对 HTML 知之甚少，我并不渴望学习）。我知道 IntraWeb 不是为此而设计的，但它会起作用吗？

2.  如果我使用 DataSnap 并构建一个服务器应用程序，我可以将它部署到我的网站吗？还是我必须将网络上的计算机作为服务器？

如果有人想知道，我想连接 5 台计算机（来自不同的城市），在它们之间交换信息，如果可能的话，使用 ADO，因为我非常熟悉它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:04:01.033

Intraweb 是用于构建网站的基于服务器的工具，可通过浏览器访问。它不是“正确的”多层，听起来它不是你需要的。

DataSnap 旨在做你想做的事。首先，ADO 部分将在服务器上，您将定义服务器提供的用于执行任务的接口。然后您的客户将通过互联网调用该接口以获取数据或执行这些任务等。

至于它们是否可以在您的 Web 服务器上运行，这取决于您的服务器是什么，以及提供给它的访问权限。Web 服务器只是一台 PC，但典型的托管相当受限于在该服务器上运行“脚本”语言，这些语言驻留在托管目录中。Delphi 服务器将是一个正在运行的可执行文件（通常是 Windows 服务），侦听端口，并且需要比典型的更多的计算机访问权限。您至少需要一个对桌面具有管理员访问权限的虚拟 Windows 服务器才能使其正常工作。不过，在第一种情况下，您可以愉快地在 DSL 线路或类似线路上运行服务器并使其正常工作。当您有客户付费时，您可以担心将其托管在网络上。

# mysql - 有没有使用 Sqlalchemy 或 Geoalchemy 创建空间索引的便捷方法？

> ID：10462455
> 
> 赞同：2
> 
> 时间：2012-05-05T13:46:14.393
> 
> 标签：mysql, sqlalchemy, geospatial

昨天有人告诉我，如果我想使用 Sqlalchemy，Geoalchemy 是支持空间扩展的不错选择。它确实做得很好。非常感谢他。

但是我还没有找到一种方便的方法来使用 Geoalchemy 创建空间索引。我必须直接运行这个 SQL 吗？

```
CREATE SPATIAL INDEX sp_index ON my_class (
geom_col
); 
```

有没有不直接写SQL的便捷方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:16:07.757

使用`table.create()`GeoAlchemy 创建表时，会自动为几何列创建索引。

此外，SQLAlchemy`Index`实例有一个`create`方法。[请参阅http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#metadata-constraints](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#metadata-constraints)中的“索引”部分。我不确定你是否能够用它在 MySQL 中创建空间索引，但值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-28T03:36:01.693

使用 GeoAlchemy，您应该采取 2 个步骤在几何列上创建空间索引

*   将 attr 'spatial_index' 添加到几何列
*   调用 GeometryDDL 扩展

例子：

```
# note that spatial_index will set the column to not null 
class Building(Base):
    geom = GeometryColumn(Point(2, spatial_index=True))

GeometryDDL(Building.__table__) 
```

# cordova - 为什么 apache cordova 保留 Polling 和 XHR 两种获取数据的方式？

> ID：10462456
> 
> 赞同：0
> 
> 时间：2012-05-05T13:46:14.643
> 
> 标签：cordova

当我阅读 apache cordova 的源代码时。我发现它有两种方法可以从本机代码中获取回调数据？

为什么作者没有继续投票？

是否存在一些问题？

谢谢你的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:10:41.797

我假设您正在谈论 Apache Cordova Android 版本。由于我们需要在 JavaScript 和本机层之间进行异步通信，因此我们使用 XHR，以便在本机端准备好结果时，我们执行成功回调。这种方法在大多数情况下都适用。

但是，如果设备碰巧有代理设置，那么这就是我们遇到问题的地方。由于 JS 和本机层之间的代理，XHR 失败了。在这种情况下，我们默认返回轮询。这是获得结果的一种更浪费的方式。

# .net - 在 PlayStationStudio 项目中使用便携式类库

> ID：10462462
> 
> 赞同：1
> 
> 时间：2012-05-05T13:46:47.633
> 
> 标签：.net, monodevelop, portable-class-library

我现在正在尝试在 PlayStation Studio 项目中重用一些可移植代码。

我可以正常引用程序集，并且可以使用存根 TypeForwarding 程序集填补缺失方法的空白。

但是，编译器目前反对可移植类库中的一些“系统”引用。

例如，如果我尝试包含 NewtonSoft JSON.Net，则会收到如下错误：

> c:\Projects\Misc\MVVMCROSS\Cirrious\Cirrious.MvvmCross\Platform\Json\MvxDateTimeJsonConverter.cs(13,13)：错误 CS0012：类型“System.Uri”在未引用的程序集中定义。您必须添加对程序集“System，Version=2.0.5.0，Culture=neutral，PublicKeyToken=7cec85d7bea7798e，Retargetable=Yes”的引用。(CS0012) (Cirrous.MvvmCross.PSS)

PSS 项目已经引用了 System for 2.0.5.0，并且该 System 程序集中有一个 System.Uri，但 PublicKeyToken 不匹配 - 因为它是 Sony 程序集而不是 Microsoft 生成的程序集。

除了将所有可移植库作为源代码并重新编译它们以链接到 Sony 程序集之外，任何人都可以想到任何其他解决方案来解决这个问题吗？例如，我可以添加一些编译器或环境标志吗？

# php - PHP 函数名称到文件

> ID：10462473
> 
> 赞同：-2
> 
> 时间：2012-05-05T13:47:39.497
> 
> 标签：php, file, reflection, plugins, filesystems

> **可能重复：**
> [如何找出函数的定义位置？](https://stackoverflow.com/questions/2222142/how-to-find-out-where-a-function-is-defined)

我已经在谷歌上搜索了一段时间，但我无法弄清楚。我有一个已知的函数或类，比如说函数/类 f_x。此函数在单独的未知 .php 文件中定义。

有没有办法检索该文件的文件名？就像您通常会使用**FILE**一样？当我正在为 php 系统编写插件时，我无法编辑这些文件。

我需要这个来实现一个用于 wordpress 的插件，它可以： - 枚举所有简码函数 - 检测页面上是否存在简码 - 如果没有，则使用简码删除与插件相关的所有钩子和过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:01:05.807

除了我不知道的事实之外，有人怎么会失去他的课程或功能：

```
$refFunction = new \ReflectionFunction('myFunction');
echo $refFunction->getFilename(); 
```

或者

```
$refClass = new \ReflectionClass('ClassName');
echo $refClass->getFilename(); 
```

你甚至可以问，它是在文件中定义的

```
echo $ref->getStartLine() . ':' . $ref->getEndLine(); 
```

# regex - Dejagnu/expect 多行正则表达式

> ID：10462478
> 
> 赞同：2
> 
> 时间：2012-05-05T13:48:00.803
> 
> 标签：regex, unit-testing, tcl, expect

我正在用 DejaGNU 为我的应用程序编写单元测试，但我无法匹配多行输出。

当我从输出中删除换行符`\n`时，我的规则匹配得很好。例如。

输出：`0 123 0 123`

```
expect {
  -re "^0 \\d+ 0 \\d+$" {pass "$test_name"}
} 
```

我想要这样的输出：

```
0 123
0 123 
```

我已经尝试了一切

```
"^0 \\d+\\n0 \\d+$"
"^0 \\d+\n0 \\d+$"
"^0 \\d+$\\n^0 \\d+$"
"^0 \\d+$\n^0 \\d+$" 
```

但它们都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:57:17.617

Expect 确实有一个整体的多行模式空间来匹配，但它不一定能看到你的想法。特别是，换行符最终会被虚拟终端系统转换。试试这个：

```
expect {
    -re {^0 \d+[\r\n]{1,2}0 \d+$} {
        # Just for debugging (and you might need to write to a log...)
        binary scan $expect_out(0,string) c* byteList
        puts [join $byteList ","]
        # Now do the rest of your code
        pass "$test_name"
    }
} 
```

^(请注意，我将 RE 放在大括号而不是双引号中，因为这样可以减少反斜杠的数量。)
一旦您知道Expect*实际*看到的是什么，您就可以更直接地对其进行编码。我通常只会说打印出来而不会大惊小怪，但是由于您正在处理换行符，因此更容易读取 ASCII 字节。

# types - 什么是完全类型推断语言？和这种语言的局限性？

> ID：10462479
> 
> 赞同：10
> 
> 时间：2012-05-05T13:48:03.487
> 
> 标签：types, programming-languages, functional-programming, type-inference, type-systems

据我所知，任何在编写函数或模块时不需要在源代码中编写类型注释的编程语言，如果该代码块是“类型正确的”，编译器将推断类型并编译代码。还有更多吗？

是否有这样的语言？如果是的话，它的类型系统有什么限制吗？

更新 1：为了清楚起见，**我**问的是一种静态类型的、完全类型推断的编程语言，而不是动态类型的编程语言。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T12:00:19.487

**什么是类型推断？**

从历史上看，类型推断（或类型重构）意味着程序中的*所有*类型都可以派生，而无需*任何*显式类型注释。然而，近年来，编程语言主流已经成为一种流行，甚至将最琐碎的自下而上类型推导标记为“类型推断”（例如，`auto`C++11 的新声明）。所以人们开始添加“完整”来指代“真实”的东西。

**什么是*完整*类型推断？**

语言可以推断类型的范围很广，实际上，几乎没有语言支持最严格意义上的“完整”类型推断（核心 ML 是唯一的例子）。但主要的区别因素是是否可以为没有附加“定义”的绑定派生类型 - 特别是函数的参数。如果你能写，说，

```
f(x) = x + 1 
```

并且类型系统发现 f eg 具有 Int → Int 类型，那么调用这种类型推断是有意义的。此外，我们讨论*多态*类型推断，例如，

```
g(x) = x 
```

自动分配泛型类型∀(t) t → t。

类型推断是在简单类型的 lambda 演算的上下文中发明的，而多态类型推断（又名 Hindley/Milner 类型推断，发明于 1970 年代）是 ML 语言家族（标准 ML、OCaml 和可以说是哈斯克尔）。

**全类型推断的限制是什么？**

Core ML 具有“完整”多态类型推断的优势。但它取决于其类型系统中多态性的某些限制。特别是，只有定义可以是通用的，而不是函数参数。那是，

```
id(x) = x;
id(5);
id(True) 
```

工作正常，因为`id`当定义已知时可以给定多态类型。但

```
f(id) = (id(5); id(True)) 
```

不在 ML 中键入检查，因为`id`不能多态作为函数参数。换句话说，类型系统确实允许像 ∀(t) t → t 这样的多态类型，但不允许像 (∀(t) t → t) → Bool 这样的所谓高级多态类型，其中多态值用于一流的方式（为了清楚起见，甚至很少有明确类型的语言允许）。

显式类型的多态 lambda 演算（也称为“系统 F”）允许后者。但类型论的一个标准结果是，完整系统 F 的类型重构是不可判定的。Hindley/Milner 找到了一个表达力稍差的类型系统的最佳点，对于该系统，类型重构仍然是可以确定的。

还有更高级的类型系统功能也使完整的类型重建无法确定。还有其他一些保持它可确定但仍然使其不可行的方法，例如临时重载或子类型的存在，因为这会导致组合爆炸。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-05T18:04:05.533

完整类型推断的局限性在于它不适用于许多高级类型系统功能。以 Haskell 和 OCaml 为例。这两种语言*几乎都是*完全类型推断的，但有一些可能会干扰类型推断的特性。

* * *

在 Haskell 中，它的类型类与多态返回类型相结合：

```
readAndPrint str = print (read "asd") 
```

这`read`是一个 type 的函数`Read a => String -> a`，这意味着“对于任何`a`支持类型类的类型，`Read`该函数`read`都可以采用 a`String`并返回 an `a`。因此，如果`f`是一个采用 int 的方法，我可以编写`f (read "123")`并将“123”转换为 Int 123并`f`用它调用。它知道它应该将字符串转换为Int，因为`f`它需要一个Int。如果f接受一个int列表，它会尝试将字符串转换为Int列表。没问题。

但是对于`readAndPrint`上面的功能，这种方法不起作用。这里的问题是`print`可以接受任何可以打印的类型的参数（即支持类型类的任何`Show`类型）。因此，编译器无法知道您是否要将字符串转换为 int、int 列表或任何其他可以打印的内容。因此，在这种情况下，您需要添加类型注释。

* * *

在 OCaml 中，有问题的特性是类中的多态函数：如果您定义一个以对象为参数并调用该对象的方法的函数，编译器将推断该方法的单态类型。例如：

```
let f obj = obj#meth 23 + obj#meth 42 
```

在这里，编译器将推断`obj`必须是具有名为`meth`type的方法的类的实例`int -> int`，即采用 Int 并返回 Int 的方法。您现在可以定义一堆具有此类方法的类，并将该类的实例作为参数传递给`f`. 没问题。

如果您使用 type 的方法定义类`'a. 'a -> int`，即可以采用任何类型的参数并返回 int 的方法，则会出现问题。您不能将该类的对象作为参数传递给，`f`因为它与推断的类型不匹配。如果你想把`f`这样一个对象作为它的参数，唯一的办法就是给`f`.

* * *

因此，这些是几乎完全类型推断的语言示例以及它们不是的情况。如果您从这些语言中删除有问题的功能，它们将被完全类型推断。

因此，没有这些高级功能的机器学习的基本方言是完全类型推断的。例如，我假设 Caml Light 是完全类型推断的，因为它基本上是没有类的 OCaml（但是我实际上并不了解该语言，所以这只是一个假设）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T09:00:55.483

另一个限制是排名较高的类型。例如，以下程序不会*在*具有 ML 样式类型推断的语言中进行类型检查：

```
foo = let bar f = (f ['a', 'b', 'c'], f [1,2,3]) in bar reverse 
```

类型检查器可以为 f 分配类型 [Char] -> [Char] 或 [Int] -> [Int]，但不能分配给所有 a.[a]->[a]。在 ML、Ocaml 和 F# 中，无法解决此问题，因为您甚至无法编写更高级别的类型。

但是 Haskell（通过 GHC 扩展）和 Frege 支持更高级别的类型。但是因为只有更高等级的类型检查（与更高等级的类型推断相反）是可能的，所以程序员需要给出类型注释，例如：

```
foo = let bar (f :: forall a.[a]->[a]) = (f ['a', 'b', 'c'], f [1,2,3]) in bar reverse 
```

# c# - 社交网络排名算法

> ID：10462483
> 
> 赞同：3
> 
> 时间：2012-05-05T13:49:24.523
> 
> 标签：c#, linq, algorithm, ranking

我正在尝试根据喜欢、评论和转发接收的数量和时间为社交网络开发一个简单的排名算法。我一直在阅读有关 facebook 使用的边缘排名算法并尝试做类似的事情，但我无法做到正确。

该算法现在应该显示热门帖子。

这是我尝试过的：

```
let nComments = (from c in db.Comments where c.postid == r.pageOwner.PostId select c).Count()

let nReposts = (from s in db.Posts where s.RepostedFrom_postid == r.pageOwner.PostId select s).Count()

let nLikes = (from u in db.UserPageRelations where u.Post_id == r.pageOwner.PostId select u).Sum(s => s.Rate)

let TimeDecayFactor = ignoretime ? 1 : Math.Exp(-(DateTime.Now - Post.Date).TotalHours)

let TotalEdge = (1 * nComments + 3 * nLikes + 2 * nReposts + 1) * TimeDecayFactor

 orderby (TotalEdge) descending 
```

有没有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T14:56:33.650

您可以使用[PageRank 算法](http://en.wikipedia.org/wiki/Page_rank)为每个人提供流行度。该算法旨在使用网站之间的链接对网站进行排名，但您可以使用评论、转发和喜欢（具有不同的系数）而不是链接。

如果您认为 PageRank 难以实现（因为数据的大小），您可以使用[opic 算法](http://www2003.org/cdrom/papers/refereed/p007/p7-abiteboul.html)，它产生相同的结果但需要的内存要少得多。

# c# - 单击时如何引用asp：grid中的链接按钮

> ID：10462490
> 
> 赞同：0
> 
> 时间：2012-05-05T13:49:49.327
> 
> 标签：c#, asp.net, linkbutton

我有一个 ASP:grid 有一个链接按钮，我需要一些如何在点击它时在后面的代码上引用它，但我在语法上苦苦挣扎

这是我的 ASP:Grid 我需要在按下链接按钮“Re-Take”时在后面的代码中执行代码，并且还能够知道它被点击了哪一行，因为我需要参考用户的电子邮件和姓名，然后发送包含相关信息的电子邮件....

```
<asp:GridView ID="GrdViewUsers" runat="server" AutoGenerateColumns="false" GridLines="None"
                    EnableViewState="false" class="tablesorter">
    <AlternatingRowStyle></AlternatingRowStyle>
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton Text="Re-Take" runat="server" ID="Edit" CommandName="Edit"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Full Name">
            <ItemTemplate>
                <asp:HyperLink ID="HyperFullName" CssClass="gvItem" runat="server" NavigateUrl='<%#Eval("UserID","/ExamPaper.aspx?uid={0}") %>'
                    Text='<%# DataBinder.Eval(Container,"DataItem.FullName") %>'></asp:HyperLink>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Email">
            <ItemTemplate>
                <asp:Label ID="lblSurname" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Email") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Exam Taken">
            <ItemTemplate>
                <asp:Label ID="lblUsername" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.ExamTaken") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Date Taken">
            <ItemTemplate>
                <asp:Label ID="lblUsername" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.DateTaken") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Exam Total">
            <ItemTemplate>
                <asp:Label ID="lblUsername" CssClass="gvItem" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.ExamTotal") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

如果有人可以帮助我提供一个片段，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:59:06.493

你可以处理这个略有不同。您会看到，当控件放置在 gridview 中时，从该控件引发的任何事件也会引发 GridView 上的 RowCommand。

要获得您想要的，您可以将 CommandName 和 CommandArgument 添加到您的 LinkBut​​ton，然后在 GridView 的 RowCommand 中捕获它。

```
<asp:LinkButton id="LinkButton1" runat="server" commandName="LinkButtonClicked" commandArgument='Eval("myObjectID")' /> 
```

其中 myObjectID 是您将网格绑定到的对象的 ID 列的名称。

然后

```
void GridView1_RowCommand( object sender, GridViewCommandEventArgs e )
{
    if ( e.CommandName == "LinkButtonClicked" )
    {
        string id = e.CommandArgument; // this is the ID of the clicked item
    }
} 
```

请参阅：[ASP.net GridView：获取 LinkItem 的行](https://stackoverflow.com/questions/9655305/asp-net-gridview-get-linkitems-row)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:59:35.977

假设网格有我们想要获取行索引的链接按钮

```
 <asp:LinkButton ID="lnkbtnAdd " runat="server" CommandName="cmdAdd" ImageUrl="~/Images/add.gif" ></asp:LinkButton> 
```

在后面的代码中，在 OnRowCreated 事件中，我们将网格的行号附加到行的每个按钮，以便在 RowCommand 事件中单击它时将其取回

```
 protected void gvListing_RowCreated(object sender, GridViewRowEventArgs e)
    {           
        if (e.Row.RowType == DataControlRowType.DataRow)
        {                
          System.Web.UI.WebControls.LinkButton lnkbtnAdd = new System.Web.UI.WebControls.LinkButton();    
                lnkbtnAdd = (System.Web.UI.WebControls.LinkButton)e.Row.FindControl("lnkbtnAdd");                    
                if (lnkbtnAdd != null)
                    lnkbtnAdd .CommandArgument = e.Row.RowIndex.ToString();
         }          
    } 
```

在 RowCommand 事件中，我们将取回当前行索引并设置网格的选定索引

```
protected void gvListing_RowCommand(object sender, GridViewCommandEventArgs e)
{      
   if (e.CommandName.ToString() == "cmdAdd")
   { 
       int RowIndex = int.Parse(e.CommandArgument.ToString());// Current row

   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T14:11:31.107

首先：您在 TemplateFields 中有重复的 ID，就像`lblUsername`不允许的一样，因为它是相同的[`NamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.namingcontainer.aspx)。

您可以将`RowIndex`as传递`CommandArgument`给`RowCommand`：

在 aspx 上：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:LinkButton 
           Text="Re-Take" 
           runat="server" 
           ID="Edit" 
           CommandName="Edit"
           CommandArgument="<%# ((GridViewRow) Container).RowIndex %>">
        </asp:LinkButton>
    </ItemTemplate>
</asp:TemplateField> 
```

处理 GridView 的`RowCommand`：

```
 void GrdViewUsers_RowCommand(Object sender, GridViewCommandEventArgs e)
  {
    if(e.CommandName=="Edit")
    {
        int index = Convert.ToInt32(e.CommandArgument);      
        GridViewRow row = GrdViewUsers.Rows[index];
        // now you can get all of your controls like:
        Label lblSurname = (Label)row.FindControl("lblSurname");
        String email = lblSurname.Text // you noticed that DataItem.Email is bound to lblSurname?
    }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T13:53:42.230

`FindControl`应该在这种情况下工作。

```
protected void GrdViewUsers_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        HyperLink myHyperLink = e.Row.FindControl("Edit") as HyperLink;
    }
} 
```

# linux - PostgreSQL 后台会话

> ID：10462491
> 
> 赞同：1
> 
> 时间：2012-05-05T13:49:58.343
> 
> 标签：linux, shell, postgresql

我在 Linux 上使用一个古老的库存控制应用程序。它只能打印到文本文件以与其他软件进行通信。当我需要更新我一直在使用的 PostgreSQL 数据库中的表时`psql -f text_file`（我们的旧应用程序生成的 SQL 命令文件在哪里`text_file`）这工作正常但相当慢，因为 psql 会话在完成每个文本文件后终止。我想知道是否有调用 psql 会话作为等待输入并且不终止的后台进程的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:58:30.573

如果你想对你的数据库运行一堆 sql 文件，一个接一个，我将`psql`作为交互式控制台启动：

```
psql mydatabase 
```

[并使用\i 命令](http://www.postgresql.org/docs/current/interactive/app-psql.html)一个接一个地执行一个文件：

```
\i text_file 
```

* * *

如果您想编写脚本/自动化事情，**fifo**可能是您所需要的。我[在这里写了更多关于它的内容](https://stackoverflow.com/a/7850704/939860)。

或者您可能对[Craig Ringer 描述的](https://stackoverflow.com/a/8305578/939860)**协同**过程感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:56:07.057

我不确定你想要什么。如果您只有一堆需要处理的文件，请使用：

```
cat *.sql | psql -f - 
```

如果您只是想持续运行 psql 并让它运行文件中的任何更改，那么可能会起作用：

```
(   
while sleep 5; do
  print "\i sql_file.sql;"
  cat /dev/null > sql_file.sql
done
) | psql --file - 
```

我不确定这是多么可取，我自己从来没有做过。

# android - 活动之间的通信（Android）

> ID：10462494
> 
> 赞同：-2
> 
> 时间：2012-05-05T13:50:22.560
> 
> 标签：android

如果我想将消息传递给已启动的活动，我该怎么做？无法使用 Intent.put... 因为我的活动已经开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:05:31.010

你可以在你的活动中使用 onNewIntent()

可以向活动发送工作的更新意图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:53:11.283

您可以在某处保存此活动的实例并调用方法以通过参数发送消息。

**发件人：**

```
final Activity activity;
// init the activity
activity.sendMessage(message); 
```

**接收消息的活动：**

```
final void sendMessage(final String message) {
  // do something with your message, here.
} 
```

# linux - 在 shell 脚本中执行 make 命令的正确方法是什么？

> ID：10462495
> 
> 赞同：0
> 
> 时间：2012-05-05T13:50:26.060
> 
> 标签：linux, bash, shell

我想构建一个shell脚本来执行以下两个命令，但是shell抱怨它不知道参数clean或reload。

```
 make -f '/home/ec2-user/infx/infx.mak' clean
    make -f '/home/ec2-user/infx/infx.mak' reload > '/home/ec2-user/infx/mylog.txt' 2>&1 
```

我也想从目录中创建一个变量，但是在尝试连接目录和 infx.mak 时，我遇到了更多问题。

谢谢你的帮助

代码和错误：

```
 echo "Cleaning Project"
    make -f '/home/ec2-user/infx/infx.mak' clean
    echo "Making Project"
    make -f '/home/ec2-user/infx/infx.mak' reload > '/home/ec2-user/infx/mylog.txt' 2>&1
    srcdir='/home/ec2-user/infx'
    srcmak='/infx.mak'
    echo "$srcmak$srcdir"
    exit 0

    [ec2-user@ip infx]$ sudo ./reload.sh
    '.  Stop. No rule to make target `clean
    : ambiguous redirect 1
    /home/ec2-user/infx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:04:39.967

错误消息看起来像您的脚本中有 DOS 行尾。尝试`dos2unix`或`tr -d '\015'`修复它。（如果你需要帮助，谷歌一下；这是一个非常常见的问题。）

# c# - 动态单选按钮 CheckedChanged 事件不会触发

> ID：10462504
> 
> 赞同：2
> 
> 时间：2012-05-05T13:51:56.513
> 
> 标签：c#, asp.net, updatepanel, dynamic-controls

我正在使用 C# 动态创建两个单选按钮，但 CheckedChange 事件没有触发。我正在使用以下代码：

```
RadioButton enable = new RadioButton();
enable.ID = "enable";
enable.Text = "Enable";
enable.GroupName = "enableDisableGroup";
enable.CheckedChanged += new EventHandler(enableRadioButton_CheckedChanged);

RadioButton disable = new RadioButton();
disable.ID = "disable";
disable.Text = "Disable";
disable.GroupName = "enableDisableGroup";
disable.CheckedChanged += new EventHandler(disableRadioButton_CheckedChanged);

UpdatePanel upEnableDisable = new UpdatePanel();
upEnableDisable.UpdateMode = UpdatePanelUpdateMode.Conditional;
upEnableDisable.ContentTemplateContainer.Controls.Add(enable);
upEnableDisable.ContentTemplateContainer.Controls.Add(disable);

AsyncPostBackTrigger enableTrigger = new AsyncPostBackTrigger();
enableTrigger.ControlID = enable.ID;
enableTrigger.EventName = "CheckedChanged";
upEnableDisable.Triggers.Add(enableTrigger);
AsyncPostBackTrigger disableTrigger = new AsyncPostBackTrigger();
disableTrigger.ControlID = disable.ID;
disableTrigger.EventName = "CheckedChanged";
upEnableDisable.Triggers.Add(disableTrigger);

mainDiv.Controls.Add(upEnableDisable); 
```

创建单选按钮后，我将`Checked Changed`事件与它们相关联。然后我将这些放在更新面板中。我也尝试创建两个`AsyncPostBackTrigger`s 但这也不起作用。你能告诉我上面提供的代码片段有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:20:25.907

```
RadioButton enable = new RadioButton();
enable.ID = "enable";
enable.Text = "Enable";
enable.AutoPostBack = true;
enable.GroupName = "enableDisableGroup";
enable.CheckedChanged += new EventHandler(enableRadioButton_CheckedChanged);

RadioButton disable = new RadioButton();
disable.ID = "disable";
disable.Text = "Disable";
disable.AutoPostBack = true;
disable.GroupName = "enableDisableGroup";
disable.CheckedChanged += new EventHandler(disableRadioButton_CheckedChanged);

UpdatePanel upEnableDisable = new UpdatePanel();
upEnableDisable.UpdateMode = UpdatePanelUpdateMode.Conditional;
upEnableDisable.ContentTemplateContainer.Controls.Add(enable);
upEnableDisable.ContentTemplateContainer.Controls.Add(disable);

AsyncPostBackTrigger enableTrigger = new AsyncPostBackTrigger();
enableTrigger.ControlID = enable.ID;
enableTrigger.EventName = "CheckedChanged";
upEnableDisable.Triggers.Add(enableTrigger);
AsyncPostBackTrigger disableTrigger = new AsyncPostBackTrigger();
disableTrigger.ControlID = disable.ID;
disableTrigger.EventName = "CheckedChanged";
upEnableDisable.Triggers.Add(disableTrigger);

mainDiv.Controls.Add(upEnableDisable); 
```

# extjs - ExtJS 4中列布局中的列高

> ID：10462505
> 
> 赞同：4
> 
> 时间：2012-05-05T13:52:03.093
> 
> 标签：extjs

如何在布局中设置列的高度？我想在它们所在的地方填充容器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T14:06:42.380

不要使用`column`布局。相反，使用一个`hbox`布局`align: 'stretch'`

# java - 有什么好的库来读写 csv 文件吗？

> ID：10462507
> 
> 赞同：31
> 
> 时间：2012-05-05T13:52:28.127
> 
> 标签：java, csv

> **可能重复：**
> [Java 的 CSV API](https://stackoverflow.com/questions/101100/csv-api-for-java)
> [你能推荐一个用于读取（和可能写入）CSV 文件的 Java 库吗？](https://stackoverflow.com/questions/200609/can-you-recommend-a-java-library-for-reading-and-possibly-writing-csv-files)

我想知道是否有一个支持读取和写入csv文件的好库？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-05T13:56:48.553

我使用 Apache Commons CSV。 [http://commons.apache.org/csv/](http://commons.apache.org/csv/)

还有Super CSV，不过我没试过。 [http://super-csv.github.io/super-csv/](http://super-csv.github.io/super-csv/)

在你自己的 IMO 上写一些东西也没什么大不了的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-05T13:54:32.063

[http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-05T13:55:58.830

我建议使用[opencsv](http://opencsv.sourceforge.net/)

**什么是opencsv？**

> opencsv 是一个非常简单的 Java csv（逗号分隔值）解析器库。

# string - 将“TMemoryStream”转换为“String”，反之亦然

> ID：10462508
> 
> 赞同：-1
> 
> 时间：2012-05-05T13:52:34.170
> 
> 标签：string, delphi, memory, stream

我正在使用 IdHttp 从网上下载一个文件，如下所示：

```
var
 MS: TMemoryStream;

procedure Test1;
var
 Http: TIdHTTP;
begin
Http := TIdHTTP.Create(nil);
  try
    MS := TMemoryStream.Create;
    try
      Http.Get('http://www.test.com/test.exe', MS);
    finally
      MS.Free;
    end;
  finally
    Http.Free;
  end;
end; 
```

因此，下载的文件/流（不知道如何发音）将在`MS.Memory`.

好吧，我想获取或转换`MS.Memory`为字符串，反之亦然。

我已经尝试过 Rob Kennedy 在这个问题中发布的函数：[Converting TMemoryStream to 'String' in Delphi 2009](https://stackoverflow.com/questions/732666/converting-tmemorystream-to-string-in-delphi-2009)

但我刚刚得到了字符串：“ **`MZP`**”

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T14:37:46.300

检查结果字符串的长度。我想该字符串包含所有二进制文件，但由于字符串正文中的零，您无法将其视为 ASCII 字符串。可执行文件的签名（第一个字节）：4D 5A 90 00。ASCII 符号：MZP#0（在我的例子中，P 是 ANSI Cyrillic，符号取决于代码页）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-04T15:53:01.950

我使用过：[Converting TMemoryStream to 'String' in Delphi 2009](https://stackoverflow.com/questions/732666/converting-tmemorystream-to-string-in-delphi-2009)以下函数：

```
function StreamToString(aStream: TStream): string;
var
  SS: TStringStream;
begin
  if aStream <> nil then
  begin
    SS := TStringStream.Create('');
    try
      SS.CopyFrom(aStream, 0);  // No need to position at 0 nor provide size
      Result := SS.DataString;
    finally
      SS.Free;
    end;
  end else
  begin
    Result := '';
  end;
end; 
```

之后`Http.Get('http://www.test.com/test.exe', MS);`就可以使用了：`s:=StreamToString(MS);`

s 是字符串。对我来说，它在 Delphi 10.2 上工作，用于从 Internet 读取 pdf 文件。我花了一个小时才找到这个解决方案。在互联网上找到的将内存流转换为字符串的所有功能都不适合我。这是唯一有效的。正常的解决方案是：s:=`Http.Get('http://www.test.com/test.exe');` 不使用内存流作为中介。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T09:37:30.423

就像其他人建议的那样，将二进制 dll 转换为不编码的字符串是没有意义的。但如果确实需要，您可以使用：TStringStream 类而不是 TMemoryStream。并且 TStringStream.DataString 属性将获取字符串。请再次注意，直接将二进制数据转换为字符串可能会导致未指定的reuslt。使用编码模式：例如：base64，十六进制字符串

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T06:36:33.053

所有 exe、dll 文件都包含一个签名 MZP#0 ... 对于 pchar 字符串（delphi 中的巨大字符串），#0 表示字符串的结尾，并且您的调试检查器显示 MZP。

如果您保留流的原始长度，则可以访问所有数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T17:54:41.513

您可以使用 TStringList 类的 LoadFromStream 方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-08T23:24:45.487

仅作记录，在最近的 Delphi 中，您可以使用 TStreamReader/TStreamWriter 从/向 TStream 后代读取/写入字符串，如下面的代码所示（其中 LoadFromString/SaveToString 是您自己的方法来处理您的字符串从流中读取并分别从您的某个对象中获取字符串，以便将其写入流中）：

```
procedure TStoryItem.LoadReadCom(const Stream: TStream);

begin
  var reader := TStreamReader.Create(Stream);
  LoadFromString(reader.ReadToEnd);
  FreeAndNil(reader); //the reader doesn't own the stream by default, so this won't close the stream
end;

procedure TStoryItem.SaveReadCom(const Stream: TStream);
begin
  var writer := TStreamWriter.Create(Stream);
  writer.Write(SaveToString);
  FreeAndNil(writer); //the writer doesn't own the stream by default, so this won't close the stream
end; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-07T04:28:06.993

使用中间 TStrinStream 的方法很慢，因为它将内存从一个地方复制到另一个地方 2 次：

1.  在调用 TStringStream.CopyFrom 方法时，
2.  并在最终分配 Result := TStringStream.DataString

我建议不使用中间对象，直接将内存复制 1 次到结果中。这是我的功能：

```
 Function TryMemoryStreamToString(const MS: TMemoryStream; var s: string): Boolean;
      begin
        Result := False; if(MS=nil)then exit;
        try
          SetLength(s, MS.Size - MS.Position);
          MS.Read(s[1], Length(s));
          Result := True;
        except
          Result := False;
        end;
      end; 
```

当然，您也可以直接将字符串作为结果返回：

```
 Function MemoryStreamToStringDef(const MS: TMemoryStream; const ADefault: string = ''): string;
      begin
        if Assigned(MS)
           then try
                  SetLength(Result, MS.Size - MS.Position);
                  MS.Read(Result[1], Length(Result));
                except
                  Result := ADefault;
                end
           else Result := ADefault;
      end; 
```

请记住，从 MemoryStream 读取将从 TMemoryStream.Position 指向的任何位置开始。因此请注意这一点，并确保它位于您想要的位置，例如，如果您始终想要整个内容，在调用函数之前将其设置为流的开头：

```
 var
      MS : TMemorySTream;
      s  : string;

    //(...)
      MS.Position := 0; 
      s := MemoryStreamToStringDef(MS);
    //(...) 
```

# javascript - 有没有办法使用 Jquery 来检测跨浏览器按下的后退按钮

> ID：10462511
> 
> 赞同：11
> 
> 时间：2012-05-05T13:53:28.907
> 
> 标签：javascript, jquery

我有一个幻灯片放映的网站，当用户按下后退按钮时，我希望它返回到相册视图而不是之前的页面并阻止页面。有没有办法做到这一点？感谢您提供任何帮助或建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T13:55:37.663

jQuery Address 为浏览器历史记录和 Ajax 抓取提供强大的跨浏览器支持：

[http://www.asual.com/jquery/address](http://www.asual.com/jquery/address)

[http://github.com/asual/jquery-address](http://github.com/asual/jquery-address)

问候

**更新：**

你可以在这里找到一个很好的样本：

[http://jsfiddle.net/5L6Ur/10/](http://jsfiddle.net/5L6Ur/10/)

简短的一些代码：

```
 $(function() {
    $('a').click(function(e) {
        e.preventDefault();
        $.address.value($(this).attr('href'));
    });
    var changecount = 0;
    $.address.change(function(e) {
        if (typeof e !== 'function') {
            $('span').html(changecount++);
        }
    });
 });​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T13:57:22.437

你应该：

1.  `location.hash`当页面状态改变时 设置。
2.  当`location.hash` 用户更改时（例如，通过按下后退按钮）呈现适当的页面内容。

# php - mod_rewrite 不适用于 symfony 中的 app_dev

> ID：10462512
> 
> 赞同：0
> 
> 时间：2012-05-05T13:53:33.073
> 
> 标签：php, .htaccess, mod-rewrite, symfony

我想从我的[http://localhost/myproject](http://localhost/myproject)访问symfony 中的[http://localhost/myproject/web/app_dev.php](http://localhost/myproject/web/app_dev.php)。我已经为 app.php 启动并运行它：

```
# Works if I call http://localhost/myproject
<IfModule mod_rewrite.c>
   Options FollowSymLinks

   RewriteBase /myproject/
   RewriteEngine On
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteRule ^(.*)$ web/app.php [QSA,L]
</IfModule> 
```

app_dev.php 同样失败。我想，无论如何，routing.yml 都会被加载，因为我没有 routing_dev.yml，它应该开箱即用 - 正如我所想的那样。但它没有：

```
# Works not if I call http://localhost/myproject
# Error Message: No route found for "GET /myproject/"

<IfModule mod_rewrite.c>
    Options FollowSymLinks

    RewriteBase /myproject/
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ web/app_dev.php [QSA,L]
</IfModule> 
```

为什么？

编辑：

[http://localhost/myproject/web/app_dev.php](http://localhost/myproject/web/app_dev.php)确实有效！

编辑二：当使用不工作的 .htaccess 时，来自 symfonys 错误页面的图像也无法加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:46:04.677

如果您在本地主机上，那么您应该创建一个虚拟主机`localhost.myproject`并设置`web`目录为`DocumentRoot`. 如果您在共享主机中，请[在此处](https://stackoverflow.com/questions/10253510/symfony2-on-shared-hosting/10253711#10253711)查看我的答案以获取有效的资产链接。

# windows-phone-7 - Windows phone 隔离存储，用于在运行状态下保存游戏

> ID：10462517
> 
> 赞同：0
> 
> 时间：2012-05-05T13:53:57.550
> 
> 标签：windows-phone-7

我想将我的 Windows Phone 游戏存储在我上次离开的位置（暂停情况）。恢复该游戏后，我可以从我离开它的最后一个位置使用该游戏。我正在使用silver-light的API。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:14:07.377

为此，您需要管理[墓碑状态](http://www.codeproject.com/Articles/190204/Managing-Tombstone-State-in-a-Windows-Phone-7-Appl)。[此处](http://msdn.microsoft.com/en-us/library/ff402541%28v=vs.92%29.aspx)介绍如何管理隔离存储。

# asp.net - asp.net 怎么显示 Internet Explorer 无法显示网页错误页面

> ID：10462518
> 
> 赞同：-2
> 
> 时间：2012-05-05T13:53:59.083
> 
> 标签：asp.net

我需要显示IE浏览器无法在iexplorer上显示网页网页时遇到错误。我怎么做？我尝试抛出异常，但没有奏效。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:04:26.007

*   您可以导航到不存在的站点并收到错误消息。
*   然后使用查看源代码并复制 HTML。
*   然后创建自己的假页面。

# asp.net - 是否可以使用 ASP.NET 全局阻止有人在我的网站上时丢弃的所有 cookie（包括 3rdparty 的）？

> ID：10462519
> 
> 赞同：6
> 
> 时间：2012-05-05T13:54:03.743
> 
> 标签：asp.net, iis, browser, cookies

这与大肆宣传的欧盟隐私法有关，该法规定除非用户“选择加入”，否则网站丢弃任何“非必要”cookie 都是非法的。

我面临的具体挑战是由于网站的复杂性以及 cookie 被丢弃的各种不同方式——尤其是在由允许营销人员在不同地方进行骚乱和嵌入各种内容的 CMS 管理的情况下——主要围绕 3rd 方 cookie其中嵌入了 javascript、img 像素、Iframe 等（我推测这些都允许删除使用 FF 插件简要浏览网站关键区域的 3rd 方 cookie - 我还没有检查每个的机制）。

因此，我一直在尝试考虑在 ASP.NET 中是否有一种方法可以在需要时全局拦截和阻止我的站点丢弃的所有 cookie，并扩展它以检查它们是否必不可少，如果没有，用户是否已经同意删除 cookie（可能包含一个主 YES cookie）。

有几件事我不清楚。首先 - 是否可以使用 Response.Filter 或 Response.Cookies 作为管道步骤来去除任何已删除的 cookie？其次 - 这是否有可能拦截任何类型的 cookie，或者如果他们直接执行从客户端到 3rdparty 服务器的浏览器请求，是否无法捕获一些 3rdparty？

我能找到的最接近我的问题的是[这个](https://stackoverflow.com/questions/10306254/is-it-possible-to-block-cookies-from-being-set-using-javascript-or-php)，但它看起来像一个站点范围的解决方案 - 不是特定于用户的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-23T20:48:21.130

A reverse proxy with URL rewriting could probably do this for you. If you spend the time tracking down the resources and implement the heavy hammer of allow/disallow cookies and rewrite 3rd party URLs to go through your reverse proxy. The you can hijack and modify their set-cookie responses. In addition if they set cookies on the client through JavaScript they would be through your server/domain so you would have control over if they are forwarded or not.

This is not a simple solution but it should be possible and could be implemented without changing the application or the user experience.

# php - 全部 使用 php

> ID：10462520
> 
> 赞同：0
> 
> 时间：2012-05-05T13:54:27.260
> 
> 标签：php

如何从视图源中提取 a 的“内容”值

我使用 CURL 来获取页面的来源，但之后我无法识别以下内容：

```
<meta property="og:title" content="Zoe&#39;s big surprise">
<meta property="og:description" content=" ">
<meta property="og:type" content="video">
<meta property="og:image" content="http://i1.ytimg.com/vi/PNyMlswZb-I/hqdefault.jpg"> 
```

基本上我需要在一个数组中捕获所有上述参数并使用它们。我在 curl 之后尝试了以下操作

```
 //parsing begins here:
    $doc = new DOMDocument();
    @$doc->loadHTML($data);
    $nodes = $doc->getElementsByTagName('title');

    //get and display what you need:
    $title = $nodes->item(0)->nodeValue;

    $metas = $doc->getElementsByTagName('meta'); --This line is not able to fetch any <meta> content> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:09:28.190

这是我的解决方案：

```
$html = '<meta property="og:title" content="Zoe&#39;s big surprise">
<meta property="og:description" content=" ">
<meta property="og:type" content="video">
<meta property="og:image" content="http://i1.ytimg.com/vi/PNyMlswZb-I/hqdefault.jpg">';

$doc = new DOMDocument();
$doc->loadHTML($html);

foreach( $doc->getElementsByTagName('meta') as $meta ) { 
   $metaData[] = array(
        'property' => $meta->getAttribute('property'),
        'content' => $meta->getAttribute('content')
    );
}

print_r( $metaData ); 
```

输出：

```
Array
(
    [0] => Array
        (
            [property] => og:title
            [content] => Zoe's big surprise
        )

    [1] => Array
        (
            [property] => og:description
            [content] =>  
        )

    [2] => Array
        (
            [property] => og:type
            [content] => video
        )

    [3] => Array
        (
            [property] => og:image
            [content] => http://i1.ytimg.com/vi/PNyMlswZb-I/hqdefault.jpg
        )

) 
```

# java - 在spring中创建一个带有多个复选框的表单

> ID：10462521
> 
> 赞同：0
> 
> 时间：2012-05-05T13:54:31.923
> 
> 标签：java, html, spring, jsp

我有一个游戏和一个开发者。该游戏有一组开发人员。我想创建一个可以将游戏添加到数据库的表单。在表格中，我输入名称、价格并检查开发商。所以我为每个开发人员创建了一个复选框。然而，当我检查那些页面似乎只是刷新。当我调试时，我的控制器似乎永远不会访问 doSubmitAction 函数。当我省略复选框时，一切都按预期工作。spring 无法创建集合吗？我不完全了解 Spring 幕后发生的事情。这是我使用 spring 创建的第一个项目。

这是我的表格：

```
 <form:form method="POST" commandName="game" >
                    <table>
                        <tr>
                            <td>
                                Name
                            </td>
                            <td>
                                <form:input path="gameNaam" size="20" />
                            </td>
                        </tr>

                        <tr>
                            <td>Choose Developers</td>
                            <td>
                                <form:checkboxes id="selectdeveloper" items="${developers}" path="developers" itemLabel="naam" />

                            </td>
                        </tr>
                        <tr>
                            <td>
                               Price
                            </td>
                            <td>
                                <form:input path="prijs" size="10" />
                            </td>
                        </tr>
                        <tr>
                            <td>

                                <input type="submit" value="Add" />

                            </td>
                            <td></td>
                        </tr>

                    </table>
                </form:form> 
```

和表单控制器：

```
public class GameFormController extends SimpleFormController {

    private GameOrganizer gameOrganizer;

    public GameFormController() {
       setCommandClass(Game.class);
       setCommandName("game");
       setFormView("AddGame");
       setSuccessView("forward:/Gamedatabase.htm");
   }

    public void setGameOrganizer(GameOrganizer gameOrganizer){
       this.gameOrganizer=gameOrganizer;
    }

    @Override
    protected Object formBackingObject(HttpServletRequest request) throws Exception {
       Game game = null;
       long id = ServletRequestUtils.getLongParameter(request, "id");
       if(id<=0){
           game = new Game();
       }else{
           game = gameOrganizer.getGame(id);
       }
       return game;
    }

    @Override
    protected void doSubmitAction(Object command) throws Exception {

        Game game = (Game) command;
        if(game.getId()<=0){
            gameOrganizer.addGame(game);
        }else{
           gameOrganizer.update(game);

       }

   }

   @Override
   protected Map referenceData(HttpServletRequest request) throws Exception {
       Set<Developer> developers = gameOrganizer.getAllDevelopers();
       HashMap<String, Object> map = new HashMap<String, Object>();
      map.put("developers", developers);
      return map;
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:34:22.163

好吧，显然我必须为 Developer 创建一个 propertyEditor。这个网站上有一个很好的解释：

[http://static.springsource.org/spring/docs/2.0.x/reference/validation.html](http://static.springsource.org/spring/docs/2.0.x/reference/validation.html)

编辑额外信息：

因此，显然，当您选中一个复选框时，它会将值作为字符串提供给您。当然，Collection 必须使用开发人员对象来制作。

所以我创建了一个developerEditor：

```
package domainmodel;

import java.beans.PropertyEditorSupport;

public class DeveloperEditor extends PropertyEditorSupport {

    private GameOrganizer gameOrganizer;

    public void setGameOrganizer(GameOrganizer gameOrganizer) {
        this.gameOrganizer = gameOrganizer;
    }

    @Override
    public void setAsText(String id) {
        long id2 = Long.parseLong(id);
        Developer type = gameOrganizer.getDeveloper(id2);
        setValue(type);
    }
} 
```

并使用复选框，我将对象的 id 作为 itemvalue

```
<form:checkboxes id="selectdeveloper" items="${allDevelopers}" itemValue="id" path="developers" itemLabel="name" /> 
```

然后在表单控制器中，我覆盖了 initBinder 方法。因此，当我 Spring 必须填写开发人员对象时，它将首先使用我的编辑器将其从字符串转换为开发人员对象。

```
 private DeveloperEditor developerEditor;

 public void setDeveloperEditor(DeveloperEditor developerEditor){
    this.developerEditor = developerEditor;
    developerEditor.setGameOrganizer(gameOrganizer);
}

 @Override
protected void initBinder(HttpServletRequest request, ServletRequestDataBinder binder) {
    binder.registerCustomEditor(Developer.class, developerEditor);
} 
```

就是这样的人。如果有人有任何问题，我很乐意回答。

# javascript - 如何将自定义函数放入 javascript 对象中以在 html 模板中使用？

> ID：10462523
> 
> 赞同：2
> 
> 时间：2012-05-05T13:54:44.170
> 
> 标签：javascript, jquery, templates, mustache

我正在使用这个非常方便的 JavaScript 模板库：[https](https://github.com/blueimp/JavaScript-Templates) ://github.com/blueimp/JavaScript-Templates 。我可以像使用 underscore.js 和 mustache.js 一样创建元素并向它们添加数据。

当我想添加自己的函数而不仅仅是将字符串添加到将填充模板的各个节点的对象时，我的问题就出现了。我想做的是运行函数`nicetime()`来更新我新插入的时间，`<div>'s`而不是只显示一次时间。

这是代码和[完整的演示](http://jsfiddle.net/trpeters1/SpYXM/23/)。

HTML：

```
<button data-id="1">1</button>
<div data-id="1"></div>
<div id="time_since"></div> 
```

JS：

```
$(document.body).on('click', 'button', function(){
 var id= $(this).data('id');
 var data={id:id, string: "just now...", fxn: nicetime()};       
 var result = tmpl('<div id="string" data-id="'+id+'">{%=o.string%}</div>  
            <div id="function" data-id="'+id+'">{%=o.fxn%}</div>', data);      
   $('div[data-id="'+id+'"]').html(result);   
   nicetime();
});

function nicetime(){
  var time =  new Date();
  var comment_date = setInterval(function() { 
  var time2 = time_since(time.getTime()/1000);
       $('#time_since').html(time2); 
       return time2; 
    }, 
    1000);
} 
```

**注意：**里面`nicetime()`有一个[jsfiddle](http://jsfiddle.net/trpeters1/SpYXM/23/)`time_since()`上可用的功能。它用于像这样格式化日期：“1 秒前……”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:06:06.680

在 javascript 中，函数是对象，就像任何其他变量一样。

您的问题是您正在调用该函数而不是将其分配给属性。

```
var data={id:id, string: "just now...", fxn: nicetime()}; 
```

而是仅使用函数名（不带括号）

```
var data={id:id, string: "just now...", fxn: nicetime}; 
```

编辑其实我还是会采取不同的方法。无需使用计时器，只需像以前一样调用该方法：

```
var data={id:id, string: "just now...", fxn: nicetime(this)};       

$('div[data-id="'+id+'"]').html(result);   
nicetime(this); 
```

我修改了 nicetime 以获取跟踪时间的元素（我假设每个节点都有一个按钮（否则数据将存储在每个节点上）

```
function nicetime(el){
    var time =  $(el).data('start') || new Date();
    var time2 = time_since(time.getTime()/1000);
    $('#time_since').html(time2); 
    var comment_date = time2; //still need to figure out where to put this value
    $(el).data('start', time)
    return comment_date;
} 
```

# wpf - 在 WPF 应用程序的后台执行数据库操作？

> ID：10462524
> 
> 赞同：0
> 
> 时间：2012-05-05T13:54:44.793
> 
> 标签：wpf

在我的 WPF 应用程序中，我需要在后台执行数据库操作以使 UI 响应更快。我正在使用 BackgroungWorker 类，但由于它在不同于 UI 的线程上运行，我无法将参数传递给数据库查询。这些值来自 UI 控件。

任何人都可以帮助我解决这个问题或建议一些其他方式来进行数据库操作，同时使 UI 响应。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:03:48.577

您可以使用[Dispatcher.BeginInvoke](http://msdn.microsoft.com/en-us/library/ms591206.aspx)方法，而不是使用 BackgroungWorker 类。事实上由 MSDN 指定：

> BeginInvoke 是异步的；因此，控制在调用对象后立即返回到调用对象。在 WPF 中，只有创建 DispatcherObject 的线程才能访问该对象。例如，从主 UI 线程分离的后台线程无法更新在 UI 线程上创建的 Button 的内容。为了让后台线程访问 Button 的 Content 属性，后台线程必须将工作委托给与 UI 线程关联的 Dispatcher。这是通过使用 Invoke 或 BeginInvoke 来完成的。Invoke 是同步的，而 BeginInvoke 是异步的。操作被添加到指定 DispatcherPriority 的 Dispatcher 的事件队列中。

[这](http://www.switchonthecode.com/tutorials/working-with-the-wpf-dispatcher)是一篇很好的文章，解释了如何使用 Dispatcher 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:26:55.150

I think the BackgroundWorker is the correct tool for the job. When you create a BackgroundWorker you specify an event handler for the `DoWork` event. The `DoWorkEventArgs` object has a property on it called `Arguments` which is the object passed in when you start the BackgroundWorker by calling `RunWorkerAsync`. You may need to create a helper class to handle the parameters you need to pass, but that should be quite easy. Something like

Helper Class:

```
public class WorkerArgs
{
     public string Arg1 {get;set;}
     public object Arg2 {get;set;}
     public int Arg3 {get;set;}
} 
```

Background Worker:

```
BackgroundWorker worker = new BackgroundWorker();

// Hook up DoWork event handler
worker.DoWork += (sender, e) => {
     WorkerArgs args = e.Arguments as WorkerArgs;
     // ... Do the rest of your background work
};

// Create arguments to pass to BackgroundWorker
WorkerArgs myWorkerArgs = new WorkerArgs {Arg1 = "Foo", Arg2 = new Object(), Arg3 = 123 };

// Start BackgroundWorker with arguments
worker.RunWorkerAsync(myWorkerArgs); 
```

In your case, you would populate the helper class object with values from your UI controls.

# ruby - 为什么这会返回错误？

> ID：10462525
> 
> 赞同：0
> 
> 时间：2012-05-05T13:54:50.263
> 
> 标签：ruby, class, methods, eval, instance

```
BasicObject.class_eval do
    def instance(ins)
        eval "@#{ins}=#{ins}", binding
    end
end 
```

是有问题的代码。我想要它做的是在下面的代码中，在类 Foo 中创建一个新的实例变量 bar。运行此代码后得到的结果：

```
class Foo
  bar = 3
end
Foo.instance(:bar) 
```

是：

```
 NameError: undefined local variable or method `bar for Foo:Class
        from /Users/Solomon/Desktop/Ruby/instance.rb:3:in `instance'
        from /Users/Solomon/Desktop/Ruby/instance.rb:3:in `eval'
        from /Users/Solomon/Desktop/Ruby/instance.rb:3:in `instance' 
```

为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:25:00.280

这里有几件事......您已经`instance`为`BasicObject`. `Foo`然后，您在对象上调用此实例方法。Foo 对象是一个类。您尚未为 Foo 对象设置任何实例变量。`@`您使用符号设置实例变量。该`instance`方法所做的只是将实例变量@ins 设置为自身。

这里`, binding`也不需要`binding`返回当前变量绑定的顶级方法。`binding`如果您需要传递已保存的“环境”，则只需保存 a 。拥有`, binding`不会伤害任何东西，而是多余的。

```
 BasicObject.class_eval do
    def instance(ins)
       eval "@#{ins}= @#{ins}", binding      # @ after the '='
    end
 end

class Foo
  @bar = 3     # @ here
end
Foo.instance(:bar)
puts Foo.instance_variable_get("@bar")    # Shows the instance variable @bar for Foo object 
```

# android - 有没有广告可以添加到我的 android 应用程序中而无需市场链接？

> ID：10462527
> 
> 赞同：-1
> 
> 时间：2012-05-05T13:55:06.947
> 
> 标签：android, google-play, ads

他们的 an0 android 应用程序广告库是否可以在我的应用程序中使用而无需在市场上发布应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:33:36.737

1.  您无需在电子市场上发布您的应用程序即可使用 AdMob 广告。只需在 AdMob 网站上注册，然后在展示广告时使用您的代码即可。

2.  我认为小公司和使用 Android Market 之间没有任何关联，大约 80% 或更多的 Android Market 提交是由单个开发人员提交的，发布您的个人应用程序绝对没有错。我什至可以说，从市场用户那里获得反馈真的很有帮助，特别是如果你没有很多人来测试你的应用程序。

# javascript - 用另一个图像替换图像，然后在超时后再次替换 - Javascript

> ID：10462532
> 
> 赞同：0
> 
> 时间：2012-05-05T13:55:44.403
> 
> 标签：javascript, html

我正在尝试执行以下操作：

onClick，将image1替换为image2，然后5秒后，再次将image 2替换为image 1。

图像 1 被图像 2 替换，但我的问题是超时后它不会恢复。

这是我的代码：

```
<img id="loadimg" style="display:none;" src="images/Loader.gif" width="140" height="30" />

<script type="text/javascript" language="javascript">

function showLoad(){
    document.getElementById('Generate1').src=document.getElementById('loadimg').src;
    setTimeout(showCode(), 5000);
}

function showCode(){
    document.getElementById('loadimg').src=document.getElementById('Generate1').src;
}

</script>

 <td colspan="3" rowspan="3"><img src="images/BUTTON.gif" alt="" name="Generate1" width="168" height="40" id="Generate1" onClick="showLoad()"></td> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:59:03.967

您必须使用 id 处理同一图像`Generate1`并将初始图像存储`src`在临时值中（例如`var image`）：

```
var image = document.getElementById('Generate1').src;

function showLoad(){
    document.getElementById('Generate1').src = document.getElementById('loadimg').src;
    setTimeout(showCode, 5000);
}

function showCode(){
    document.getElementById('Generate1').src = image;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:59:20.223

您不想运行`showCode`并将结果传递给`setTimeout`，您想将函数本身作为参数传递给，`setTimeout`以便可以回调它：

```
setTimeout(showCode, 5000); 
```

此外，当您分配`document.getElementById('loadimg').src`给 时`document.getElementById('Generate1').src`，执行相反的操作不会改变任何内容。您需要将原始数据保存在变量中。您也可以将元素保存在变量中：

```
var Generate1 = document.getElementById('Generate1');
var loadimg = document.getElementById('loadimg');
var originalSrc = Generate1.src;

function showLoad() {
    Generate1.src = loadimg.src;
    setTimeout(showCode, 5000);
}

function showCode() {
    loadimg.src = originalSrc;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T14:01:32.937

那是因为旧图像正在被新图像“碾压”。你可以这样做：

```
var pathToGenerateImg = "..."; // path to generate
var pathToLoadImg = "..."; // path to load img

function showLoad(){
    document.getElementById('Generate1').src = pathToLoadImg;
    setTimeout(showCode, 5000);
}

function showCode(){
    document.getElementById('Generate1').src = pathToGenerateImg ;
} 
```

在这种情况下，您只需要单个`<IMG>`容器（带有`id="Generate1"`），因为所有路径都存储在变量中。

# wpf - 类似 iPad 的叠加弹出窗口

> ID：10462539
> 
> 赞同：4
> 
> 时间：2012-05-05T13:56:26.490
> 
> 标签：wpf, xaml

如何在 WPF 中使用 XAML 制作类似 iPad 的覆盖窗口 ![在此处输入图像描述](../Images/8f78339e57e93b703e123bf2182c7f51.png)

我想到了一个切换按钮或扩展器控件。如果面板是可扩展的，那就太好了。我最麻烦的是中心覆盖层的大小与按钮本身不同。

任何帮助、链接或资源都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T15:41:35.867

dowhilefor 是正确的，Popup 类是要走的路——我使用带有自定义控件的 Popup 作为子项制作了一个小示例项目。重要的是 Popup 的 PlacementTarget 和 Placement 字段，因为它们允许您设置弹出窗口出现的位置。希望这可以帮助！

![弹出示例](../Images/42f172db5cff9a78eba6e95b10581513.png)

自定义控件：

```
<UserControl x:Class="SilverfighterTest.PopupControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<UserControl.Resources>
    <Style TargetType="Button">
        <Setter Property="Margin" Value="4"/>
        <Setter Property="Padding" Value="7"/>
    </Style>
</UserControl.Resources>
<Grid Background="Gray">
    <StackPanel>
        <Button>Clone</Button>
        <Button>Log Call</Button>
        <Button> Visit Report</Button>
        <Button> Delete</Button>
        <Button>Cancel</Button>
    </StackPanel>

</Grid>
</UserControl> 
```

弹出窗口：

```
<Window x:Class="SilverfighterTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:local="clr-namespace:SilverfighterTest"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Rectangle VerticalAlignment="Top" Name="rect" MouseLeftButtonDown="rect_MouseLeftButtonDown" HorizontalAlignment="Right" Height="50" Width="50" Fill="Red">

    </Rectangle>

    <Popup PopupAnimation="Slide" Placement="Bottom" PlacementTarget="{Binding ElementName=rect}"  Name="thePopup" >
        <local:PopupControl/>
    </Popup>
</Grid> 
```

窗口后面的代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

    }

    private void rect_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        thePopup.IsOpen = !thePopup.IsOpen;
    }
} 
```

# jquery - 如何在 2 张图像之间切换

> ID：10462544
> 
> 赞同：7
> 
> 时间：2012-05-05T13:57:02.080
> 
> 标签：jquery

我试图使用此代码在播放和暂停按钮之间切换，但它似乎不起作用。单击时如何在两个图像之间切换

[http://jsfiddle.net/aFzG9/1/](http://jsfiddle.net/aFzG9/1/)

```
$("#infoToggler").click(function()
{
    if($(this).html() == "<img src="http://tympanus.net/PausePlay/images/play.png" width="60px" height="60px"/>")
    {
        $(this).html("<img src="http://maraa.in/wp-content/uploads/2011/09/pause-in-times-of-conflict.png width="60px" height="60px"/>");
    }
    else
    {
        $(this).html("<img src="http://tympanus.net/PausePlay/images/play.png" width="60px" height="60px"/>");
    }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-05T14:05:04.767

## 纯 HTML/CSS

```
label.tog > input {
  display: none; /* Hide the checkbox */
}

label.tog > input + span {
  text-indent: -9000px; /* Make text Accessible but not visible */
  display: inline-block;
  width: 24px;
  height: 24px;
  background: center / contain no-repeat url("//i.stack.imgur.com/gmP6V.png"); /*Play*/
}

label.tog > input:checked + span {
  background-image: url("//i.stack.imgur.com/ciXLl.png"); /*Pause*/
}
```

```
<label class="tog">
	  <input type="checkbox" checked>
	  <span>Button Play Pause</span>
</label>
```

* * *

## 使用 jQuery 切换内部跨度的图像

有用的原因是服务器没有新的请求来加载图像：

```
<span class="tog">
   <img src="play.png">
   <img src="pause.png" style="display:none;">
</span> 
```

```
$(".tog").click(function(){
  $('img',this).toggle();
}); 
```

* * *

或者，假设我们有这个 HTML 和`.tog`图像选择器：

```
<img class="tog" src="play.png"/> 
```

## 使用 Array.prototype.reverse()

```
var togSrc = [ "play.png", "pause.png" ];

$(".tog").click(function() {
   this.src =  togSrc.reverse()[0];
}); 
```

* * *

## 使用当前`src`值和`String.prototype.match()`

如果您不知道初始状态（播放？暂停？），这很有用

```
var togSrc = [ "play.png", "pause.png" ];

$(".tog").click(function() {
  this.src = togSrc[ this.src.match('play') ? 1 : 0 ];
}); 
```

**注意：**对于最后两个示例，您需要预先加载图像，以防止浏览器在从服务器请求和加载新图像时产生时间间隔。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-05T15:02:59.443

处理它的另一种可能更简单的方法：

[http://jsfiddle.net/M9QBb/1/](http://jsfiddle.net/M9QBb/1/)

```
$("#infoToggler").click(function() {
    $(this).find('img').toggle();
});​

<div id="infoToggler">
  <img src="image1.png" width="60px" height="60px"/>
  <img src="image2.png" width="60px" height="60px" style="display:none"/>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T14:10:25.303

```
<div id="infoToggler"><img src="http://tympanus.net/PausePlay/images/play.png" width="60px" height="60px"/></div>
$(document).ready(function(){
var src1 = "http://tympanus.net/PausePlay/images/play.png";
var src2 = "http://maraa.in/wp-content/uploads/2011/09/pause-in-times-of-conflict.png";
$("#infoToggler").click(function(){
   var src = $('#infoToggler img').attr('src'); 
   if(src == src1){$('#infoToggler img').attr('src',src2);}
   else{$('#infoToggler img').attr('src',src1);}
}); 
```

})​</p>

它的工作，我已经检查..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T14:03:12.077

您可以使用该`.toggle()`功能。我已经更新了你的小提琴。此外，您没有在图像标签中正确地转义引号。

```
$("#infoToggler").toggle(function() {
    $(this).html('<img src="http://maraa.in/wp-content/uploads/2011/09/pause-in-times-of-conflict.png" width="60px" height="60px"/>');
}, function() {
    $(this).html('<img src="http://tympanus.net/PausePlay/images/play.png" width="60px" height="60px"/>');
});​ 
```

# bash - gnuplot histogram：第0行：使用规范中的列太多

> ID：10462546
> 
> 赞同：3
> 
> 时间：2012-05-05T13:57:19.257
> 
> 标签：bash, plot, gnuplot, histogram

我想创建一个文件的直方图，其中包含：

```
1 144 12.54
2 564 02.34
3 231 01.23
4 452 07.12 
```

我在脚本中为此目的使用的是：

```
gnuplot << EOF
            set terminal gif
            set terminal postscript eps color enhanced
            set output "diagramma";
            set title 'Diagramma'
            set key off
            set style data histogram
            set style histogram cluster gap 1
            set style fill solid border -1
            set boxwidth 0.9
            set autoscale
            set xlabel "May"
            plot 'finalsumfile' using 1:2 with histogram, 'finalsumfile' using 1:3 with histogram

EOF 
```

所以我希望第一列作为 x 坐标，第二和第三列作为 y。

但是当我运行我的脚本时会出现这个错误：

```
line 0: Too many columns in using specification 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T15:40:32.903

尝试：

```
 plot 'finalsumfile' using 2:xticlabels(1) with histogram 
```

直方图通常只采用 1 列数据，“x 值”每次从 0 开始隐式递增一。要设置显式 x 标签，您需要使用`xticlabels`which 获取给定列中的字符串并将其用作标签。

# php - 在 AS3 错误 #1069 中：在字符串上找不到属性 systemResult 并且没有默认值

> ID：10462551
> 
> 赞同：2
> 
> 时间：2012-05-05T13:57:30.160
> 
> 标签：php, actionscript-3, flash

我是使用 xamp 集成 Flash、php 和 mysql 的新手。我尝试了很多来纠正这个错误，但我不能这样做，因为我不知道这个错误是在 php 页面中还是值没有传递给 php。

这是我的 AS3 代码：

```
public function processLogin ():void {

            trace("inside the processlogin method");

            var phpVars:URLVariables = new URLVariables();

            var phpFileRequest:URLRequest = new URLRequest("controlpanel.php");         
            phpFileRequest.method = URLRequestMethod.POST;          
            var phpLoader:URLLoader = new URLLoader();
            phpLoader.dataFormat = URLLoaderDataFormat.VARIABLES;           
            phpLoader.addEventListener(Event.COMPLETE, showResult);

            phpVars.Username = Username.text;
            trace(phpVars.Username);
            phpVars.password = password.text;
            trace(phpVars.password);
            phpFileRequest.data = phpVars;
            trace("phpvariable"+phpVars);
            phpLoader.dataFormat=URLLoaderDataFormat.TEXT;
            phpLoader.load(phpFileRequest);

        }

        public function showResult (event:Event):void {             
            trace("show result");           
            result_text.autoSize = TextFieldAutoSize.LEFT;      
            result_text.text = "" + event.target.data.systemResult;
            trace(event.target.data.systemResult);  
        }

    } 
```

这是控制台中的输出：

```
sucess
now im in checklogin
inside the processlogin method
raj
raj
phpvariableUsername=raj&password=raj
starts process login method
show result
ReferenceError: Error #1069: Property systemResult not found on String and there is no default value.
    at actions::main/showResult()
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at flash.net::URLLoader/onComplete() 
```

对应的php页面是

```
<html>
<body><?php 
include("connect.php");
 $username = $_POST['Username'];
 $password = $_POST['password'];
$query = mysql_query("SELECT * FROM users WHERE username='$Username' AND password='$password'");
$login_counter = mysql_num_rows($query);
while ($data = mysql_fetch_array($query)) 
{
$userbio = $data['user_bio'];
print "systemResult=$userbio";
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:06:17.413

错误消息说明了一切 -`event.target.data`是一个字符串 - 没有属性`systemResult`。

看看`event.target.data`，这应该是响应的 html 代码。

# google-drive-api - 注册应用程序“输入无效”时驱动 sdk 问题？

> ID：10462555
> 
> 赞同：2
> 
> 时间：2012-05-05T13:57:57.540
> 
> 标签：google-drive-api

好吧，我真的把我的头发扯掉了！我正在尝试为 google drive sdk 注册我的应用程序。我已经估算了所有必要的内容，并且我已经检查了我的客户 ID 确实是所有 url 存在的一百次，等等为什么它会抛出“你的输入无效”错误？我添加了页面的屏幕抓取（减去敏感信息）

[驱动sdk注册应用页面有什么问题？](http://i.stack.imgur.com/x0bA4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:25:04.103

尝试删除 . 从默认文件扩展名列表。例如，使用“txt”而不是“.txt”

# php - Get Open Graph action ID from authenticated user

> ID：10462556
> 
> 赞同：1
> 
> 时间：2012-05-05T13:58:04.963
> 
> 标签：php, javascript, facebook, facebook-graph-api, facebook-fql

I'm taking a first shot at the Facebook Open Graph API. I've made a custom Action Type and Object Type. For this question I'll name them "myaction" and "myobject".

```
function postAction(){
    FB.api(
        '/me/appnamespace:myaction?myobject=http://domain.com/page.php',
        'post',
        function(response) {
            if (!response || response.error) {
                alert('Error: ' + response.error.type + ' - ' + response.error.message);
            } else {
                //alert('Like was successful! Action ID: ' + response.id);
                var likedId = response.id;
                alert('Action was successful! Action ID: ' + response.id + ' (var = ' + likedId + ')');
            }
        }
    );
} 
```

This works. The action is published to the user's timeline.

But if that user wants to delete that action (or multiple actions) from my site in a different session? Is there a way to query the custom actions from the user and display them? I could work with a database, and store the actionId, but that will conflict when the user has already deleted the action on facebook

The code for deleting the action would be:

```
function deleteAction(){
    FB.api(
        'xxxxxxxxxx',  // Here the Action ID must be inserted
        'delete',
        function(response) {
            alert('action deleted')
        }
    );
} 
```

**Edit:**

This works for getting the action from a specific page (object):

```
function getAction(){
    FB.api(
        '/me/appnamespace:myaction?myobject=http://domain.com/page.php',
        'get',
        function(response) {
            if (!response || response.error) {
                alert('Error: ' + response.error.type + ' - ' + response.error.message);
                console.log(response);
            } else {
                console.log(response);
            }
        }
    );
} 
```

This works for getting all the custom actions from the user:

```
function getAllAction(){
    FB.api(
        '/me/appnamespace:myaction',
        'get',
        function(response) {
            if (!response || response.error) {
                alert('Error: ' + response.error.type + ' - ' + response.error.message);
                console.log(response);
            } else {
                console.log(response);
            }
        }
    );
} 
```

In short, is there a way to do this in FQL:

*   query the Object ID from the current url?
*   query the Action ID from the user (all custom Actions and/or specific action based on the Object ID)?

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:07:59.483

This data is not available via FQL, it is currently only available via the Graph API. Hope it will present soon.

See this questions:

1.  [FQL to get user's open graph video.watches activity](https://stackoverflow.com/questions/8499297/fql-to-get-users-open-graph-video-watches-activity)

2.  [How to get all the Open Graph Beta actions generated by an app?](https://stackoverflow.com/questions/8007724/how-to-get-all-the-open-graph-beta-actions-generated-by-an-app)

# actionscript-3 - 停止从播放器（外部浏览器）运行 Flash 并访问网页

> ID：10462560
> 
> 赞同：0
> 
> 时间：2012-05-05T13:59:14.823
> 
> 标签：actionscript-3, flash, adobe-cirrus

假设我有一个 2 人（多人）游戏。如果用户（一个笨蛋）保存 swf，反编译它，欺骗代码（使游戏变得容易和可赢），然后从 flash 播放器运行游戏（反编译和修改后，自然不能从游戏运行 -所有者的服务器）

我如何限制他通过 Flash 播放器（在浏览器外）玩游戏？

我认为，我必须在加载 Flash 游戏的页面上使用 PHP 会话。那能行吗？有什么建议么 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:25:45.360

您无法完全保护 SWF 文件，但您可以做的一件事是检查 url 是否包含“localhost”或不是游戏的 web url。它被称为站点锁定。

# iphone - Phonegap 的文件格式

> ID：10462561
> 
> 赞同：2
> 
> 时间：2012-05-05T13:59:15.447
> 
> 标签：iphone, ios, json, cordova, string-formatting

> **可能重复：**
> [使用 Phonegap 访问文件](https://stackoverflow.com/questions/10461680/access-files-using-using-phonegap)

当我使用 phone gap[cordova 1.7.0] 从 IOS5 上的文件中读取数据时，输出为**object object**。如何修改它以将其作为普通字符串读取？

# java - 如果我想使用 JUnit，是否禁止 AssertionErrors？

> ID：10462565
> 
> 赞同：3
> 
> 时间：2012-05-05T13:59:26.573
> 
> 标签：java, unit-testing, junit, assert

我有一种方法，在特定的处理点期间，它期望保留某些不变量。
为了保持这一点，让我们假设在代码处理期间的 X 点，变量`high`和变量`low`必须是可整除的。
所以在我做的代码中：

```
if(high % low != 0){  
  throw new AssertionError("Invalid state of low and high [low = "+ low+ ", high=" + high+"]");   
} 
```

在单元测试期间，`JUnits`我有一个测试用例来测试这个。
所以我做了：

```
try {
//At this point I know for sure that the low and high are not divible so process() should throw an Assertion Error
   process();  
   fail();  
} 
catch(AssertionError e){        
} 
```

但是测试用例是绿色的！
但我意识到junit引发了一个断言错误，`fail`但我抓住了它，结果测试用例通过而不是失败。
从我的角度来看，在我的代码中引发的正确错误`AssertionError`也不是通用的，例如`IllegalArgumentsException`
，有没有办法解决这个问题，以便测试用例工作，或者我不应该`AssertionError`首先在我的代码中使用？如果是这种情况，我应该提出什么例外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:10:36.280

你不应该`try-catch`在单元测试中有一个块。如果您希望出现异常，请使用注释：

```
@Test(expected=Exception.class)
public void youTestMethod() {
   ...
} 
```

您将不得不使用不同的异常，例如`IllegalArgumentsException`因为 JUnit在`AssertionError`内部使用。我发现`IllegalArgumentsException`更能描述实际出了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:12:07.687

```
boolean shouldFail = false;
try {
    callTheMethod();
    shouldFail = true;
}
catch (AssertionError e) {
    // expected
}
if (shouldFail) {
    fail();
} 
```

但是如果条件是不变量，那么它应该始终为真，因此永远不应该抛出 AssertionError，因此您甚至不能对其进行单元测试。如果您能够对其进行测试，则意味着该不变量并不是真正的不变量，并且根据调用顺序或提供的参数，该条件可能为真。因此，您应该更喜欢 IllegalStateExcetion 而不是 AssertionError。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T14:14:31.453

```
 > should I not be using the AssertionError in my code in the first place? 
```

**没有**JUnit 使用 AssertionError 及其后代来告诉 junit-runner 测试失败。（类似的适用于 .net NUnit-runner）

```
 > If this is the case, what exception should I be raising? 
```

我会使用通用的异常之一`IllegalArgumentsException`或创建自己的异常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T14:21:09.520

是的，您的代码和 JUnit 之间存在冲突，但很容易解决。

当您编写 JUnit 测试用例时，正如您已经推断的那样，当测试用例失败时会抛出 AssertionError。

为了让 JUnit 知道您的测试用例已经通过，测试代码不应该在任何其他异常/错误上抛出 AssertionError。

将有两个测试用例（至少） -

A. high 和 low 是完全可分的——测试用例代码不会抛出 AssertionError。

```
//test case setup
yourClass.callYourMethod(4,2);
//verification 
```

在这里，如果测试用例行为正确，则没有 AssertionError 并且 JUnit 知道它已经通过。

B. high 和 low 不是完全可分的 - 代码应该抛出 AssertionError 但测试用例不应该。

```
boolean failed;
try {
    //test case setup
    yourClass.callYourMethod(4,2);
    failed = true;
} catch (AssertionError e) {
    failed = false;
}
if (failed) {
    fail();
} 
```

# java - Liferay - 图片库

> ID：10462567
> 
> 赞同：1
> 
> 时间：2012-05-05T13:59:37.993
> 
> 标签：java, liferay, image-gallery

您好，感谢您花时间回答我的问题。

我有一个带有典型文件上传 html 元素的自定义 portlet。但是，我被告知用户应该能够选择已经上传的图像而不是上传新图像。目前我正在随机页面上加载 Web 内容显示 Portlet，单击富文本编辑器中的图像图标并复制我的 Portlet 的 javascript 中的链接，这会在弹出窗口中打开图像库，以便访问图片库。但是，这对于生产来说不是一个合理的解决方案，我想知道如何从自定义 portet 加载图像库。我需要能够在用户单击“选择图像”按钮时看到在弹出窗口中打开的图像库。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:13:48.523

这段代码足以做到这一点：

```
List<IGFolder> listIGFolders = null;        

if(selectedFolderId!=0){
    listIGFolders=IGFolderLocalServiceUtil.getFolders(groupId, selectedFolderId);
} else{
    listIGFolders = IGFolderLocalServiceUtil.getFolders(groupId);   
}

List<IGImage> igImages=IGImageLocalServiceUtil.getImages(groupId, selectedFolderId); 
```

# ruby-on-rails - 创建许多新对象时内存膨胀

> ID：10462569
> 
> 赞同：9
> 
> 时间：2012-05-05T14:00:08.117
> 
> 标签：ruby-on-rails, ruby, memory-management

当我运行它然后在 OSX 活动监视器中观察我的 ruby​​ 进程的内存消耗时，内存以大约 3 MB/s 的速度增加。

如果我删除事务，它的内存消耗大约会减半，但内存占用量仍在增加。我的生产应用程序有一个问题，Heroku 由于其内存消耗而终止了该进程。

有没有办法以不会增加内存的方式执行以下操作？如果我注释掉该`.save`行，那没关系，但这当然不是解决方案。

```
ActiveRecord::Base.transaction do
  10000000.times do |time|
    puts "---- #{time} ----"
    a = Activity.new(:name => "#{time} Activity")
    a.save!(:validate => false)
    a = nil
  end
end 
```

我正在使用`delayed_job`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T14:28:27.620

该`a = nil`行是不必要的，您可以将其删除。

每次循环时都会创建很多对象 - 两个字符串、两个哈希值和一个 Activity 对象，所以我并不惊讶您遇到高内存使用情况，尤其是当您循环 1000 万次时！似乎没有更高效的方式来编写此代码。

我能想到的减少内存使用的唯一方法是每*x*次迭代手动启动垃圾收集器。Ruby 的 GC 可能不够积极。但是，您不希望每次迭代都调用它，因为这会从根本上减慢您的代码。也许您可以将每 100 次迭代作为起点，然后从那里开始。你必须分析和测试什么是最有效的。

GC的文档在[这里](http://www.ruby-doc.org/core-1.9.3/GC.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T01:11:22.097

我知道这是一个古老的问题，但我必须提出另一种激进的方法：

```
ActiveRecord::Base.transaction do
  10000000.times do |time|
    puts "---- #{time} ----"
    sql = <<SQL
INSERT INTO activities ("name") VALUES ("#{time}")
SQL
    Activity.connection.execute(sql)
  end
end 
```

关键是，如果插入如此简单，并且您已经跳过任何 ActiveModel 验证，那么首先没有理由实例化一个 activerecord 对象。通常它不会受到伤害，但由于在这种情况下它会伤害你，我认为你会用这种方式使用更少的内存。

# c# - 在会话中存储对象

> ID：10462573
> 
> 赞同：0
> 
> 时间：2012-05-05T14:00:45.550
> 
> 标签：c#, asp.net

我需要在会话中保存一些东西。目前，我在我的开发机器上使用 InProc 会话，但我想使用 SQL 服务器会话和 Azure 的 AppFabric 会话进行部署。

我创建了一个包含多个属性的对象，所有这些属性都是原始类型。我正在处理这样的会话读取：

```
SessionObject TheCurrentSession = 
    HttpContext.Current.Session["UserAppSession"] as SessionObject; 
```

基本上，我将会话变量包装在一个对象中，该对象在每次会话加载和保存时都会被序列化和反序列化。

我想知道以本机格式存储每个属性并让包装对象在会话中读取/保存其每个属性作为本机类型是否会更好。

例如，我有一个名为 RecreateSession 的方法，如下所示：

```
public class SessionObject
{
   public void RecreateSession()
   {
        this.SessionObjectProperty1 = 
                         HttpContext.Current.Session["SessionObjectProperty1"];
        this.SessionObjectProperty2 = ...;
        this.SessionObjectProperty3 = ...;
   }
} 
```

我认为这样做会阻止序列化/反序列化过程，并使值可以直接在代码的其他部分（即 HTTP 模块）中访问。

改变我的会话实现是否值得？这方面的最佳做法是什么？

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:04:33.287

> 改变我的会话实现是否值得？

仅当它使您更易于使用时。

> 这方面的最佳做法是什么？

你几乎已经在做它们了。创建一个对象来保存多个相关属性（可能一起使用）并将其存储在会话中而不是一堆单独的会话属性中是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:04:42.433

我总是创建一个自定义对象，其中每个属性都引用一个特定的会话项......我认为它是最好的选择。

# networking - P2P 应用程序如何找到其他节点？

> ID：10462578
> 
> 赞同：9
> 
> 时间：2012-05-05T14:01:27.803
> 
> 标签：networking, distributed, p2p

我想知道在分散的 P2P 网络中每个节点如何找到其他节点......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:22:09.040

您可能想看看这篇文章：[http ://cs.berry.edu/~nhamid/p2p/](http://cs.berry.edu/~nhamid/p2p/)

但一般来说，您有一个服务器，其中包含一个已知对等方的列表来做广告。

此外，如果您正在寻找一种较少依赖“对等服务器”的实现，请查看此处：[没有服务器的 TCP P2P](https://stackoverflow.com/questions/3392016/tcp-p2p-without-server)。

# c# - SOA 开发人员通常如何在 Visual Studio 中构建他们的 Web 服务 (WCF) 解决方案？

> ID：10462579
> 
> 赞同：4
> 
> 时间：2012-05-05T14:01:29.003
> 
> 标签：c#, wcf, soa

我正处于设计应用程序的初始阶段。会有以下内容：

*   网页界面
*   网络服务
*   利用其他预先存在的 Web 服务

我是 Windows 服务和 SOA 的新手，尤其是在 Visual Studio 的上下文中。

我的问题是，我将如何在 Visual Studio 中设置此解决方案？例如，我会

*   将Web UI和服务调用放在同一个项目中，并将我的服务放在一个单独的项目中，然后将上述所有内容放在一个解决方案中？

开始构建我的解决方案以使其可追溯和测试的最佳方式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T14:51:31.243

我喜欢这样构建我的 WCF 解决方案：

**Contracts**（类库）
包含所有服务、操作、故障和数据合同。可以在纯 .NET-to-.NET 场景中的服务器和客户端之间共享

**服务实现**（类库）
包含实现服务的代码，以及实现此功能所需的任何支持/帮助方法。没有其他的。

**服务主机（**可选 - 可以是 Winforms、控制台应用程序、NT 服务）
包含用于调试/测试或可能还用于生产的服务主机。

这基本上给了我服务器端的东西。

在客户端：

**客户端代理**（类库）
我喜欢将我的客户端代理打包到一个单独的类库中，以便它们可以被多个实际客户端应用程序重用。这可以使用 svcutil 或“添加服务引用”并手动调整生成的可怕的 app.config 来完成，或者通过使用`ClientBase<T>`或`ChannelFactory<T>`构造手动实现客户端代理（当共享合同程序集时）。

**1-n 个实际客户端**（任何类型的应用程序）
通常只会引用客户端代理程序集，或者如果正在共享，也可能引用合约程序集。这可以是 ASP.NET、WPF、Winforms、控制台应用程序、其他服务 - 你可以命名它。

那样; 我有一个漂亮而干净的布局，我一遍又一遍地使用它，我真的认为这让我的代码更干净，更容易维护。

[这是由 Miguel Castro 与 Carl Franklin 在 DotNet Rocks TV 上的Extreme WCF 屏幕投射](http://www.dnrtv.com/default.aspx?showNum=122)的启发- 强烈推荐的屏幕投射！

# xcode - 我应该使用视图约束还是最小窗口大小？

> ID：10462585
> 
> 赞同：6
> 
> 时间：2012-05-05T14:02:15.930
> 
> 标签：xcode, macos, user-interface, constraints, nswindow

我正在制作一个在 OS X 上使用的应用程序，我注意到 Interface Builder 中的新约束功能（当然，现在内置到 Xcode 中）是多么有用。事实上，它是如此有用和动态，以至于我在质疑是否应该设置最小窗口大小，或者仅仅依靠我的窗口的约束来设置最小值和最大值。

我有一种感觉，OS X 会考虑最小和最大窗口大小，而不是以某种方式限制窗口大小，并且为此设置最小值和最大值可能很有用，但我也觉得这可能很好样式依赖于约束动态设置最小和最大窗口高度，因为它们的动态行为和所有。例如，如果我决定更改带有约束的控件的最小宽度，我不必担心还会更改最小窗口的最小宽度。

依赖约束来设置最小和最大窗口大小的好处的另一个更重要的例子是，如果用户更改文本大小等内容，我的应用程序中受影响的控件能够动态更改其大小约束，但静态设置最小和最大窗口大小会破坏这种动态行为。

再一次，所有这些好处也应该考虑到这样一个事实，即 OS X 可能会以某种方式考虑最小和最大窗口大小，因此设置最小值和最大值可能很有用；我只是不确定**OS** X 是否将它们考虑在内，如果它们考虑了，它**如何**使用它们。

我查看了 Apple 的文档，找不到任何能提供令人满意的答案的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T01:14:55.677

在这种情况下，最好的办法就是自己尝试一下。用一个窗口和几个控件创建一个新应用程序只用了不到两分钟。如果您只想使用可调整大小的窗口，则根本不需要添加任何代码：

![窗口 1](../Images/2ae340a421a725fad34cce411adb930d.png)

这个窗口没有最小尺寸也没有约束，问题马上就很明显了。您可以调整窗口大小，使其看起来像这样：

![窗口 2](../Images/60c7de7e737bbb5286467ea612b9cc53.png)

在按钮之间添加一些约束显示了约束提供的承诺。现在窗口在最小尺寸下看起来像这样：

![窗口 3](../Images/cc35bcf5d9acbb07457ed0a37e47de76.png)

对标签的更多限制最终给出了预期的结果：

![窗口 4](../Images/daffa28e1099502d2f140578d3710735.png)

这很棒，但要到达那里需要一些工作。我没有添加一整套约束——两个右手按钮之间的垂直约束是多余的，因为左边的按钮之间已经有一个。对于具有许多控件的窗口，设置足够的约束来覆盖所有视图可能是：a) 非常有用且值得，或者 b) 很麻烦且几乎没有额外价值。这取决于你的情况。一个更简单的方案是将可能重叠的控件的高度（两个按钮和标签）和它们之间的所需空间相加，然后将其设置为窗口的最小高度。

我可以看到任何一种策略都是有用的，具体取决于窗口内容。事实上，我认为它们根本不是两个独立的策略......设置最小窗口尺寸实际上只是您要添加的另一种约束。例如，可能存在一个尺寸，低于该尺寸您的窗口看起来很傻或不是很有用，因此您可以将最小窗口尺寸设置为这些尺寸。同时，您可能希望在按钮之间设置约束以防止本地化版本中的控件重叠（例如，德语名称往往会变得很长）。

# wpf - 从数据网格中获取值

> ID：10462589
> 
> 赞同：0
> 
> 时间：2012-05-05T14:02:41.750
> 
> 标签：wpf, datagrid

所以我阅读了很多关于如何从数据网格中获取值的信息。这是我创建的数据网格。

```
 <DataGrid AutoGenerateColumns="False" Height="257" HorizontalAlignment="Left"              Margin="12,41,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="479" IsReadOnly="True"    CanUserSortColumns="False" SelectionMode="Single">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Id" Binding="{Binding Id}"/>
            <DataGridTextColumn Header="Opgave" Binding="{Binding Name}"/>
            <DataGridTextColumn Header="Udvikler" Binding="{Binding Creator}"/>
        </DataGrid.Columns>
    </DataGrid> 
```

我想要的是从所选行中的第一个单元格中获取值（ID）

这就是我想出的。

```
 string i = dataGrid1.SelectedCells[0].Value; 
```

问题是很多人都在使用这个技巧，但不知何故它不理解关键字的值。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:12:07.847

[`DataGrid.SelectedCells[0]`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.selectedcells.aspx)返回一个[DataGridCellInfo](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcellinfo.aspx)。采用

```
var i = (dataGrid1.SelectedCells[0].Item as YourClass).Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:43:51.900

我宁愿使用绑定对象而不是基于网格获取值。您可以很容易地将对象绑定到所选行。

```
var selectedObject = dataGrid1.SelectedItem as YourClass;
var id = selectedObject.Id; 
```

只需替换`YourClass`为绑定到网格的对象类型即可。

# android - Android RelativeLayout 和相等对齐

> ID：10462596
> 
> 赞同：1
> 
> 时间：2012-05-05T14:04:33.030
> 
> 标签：android, android-relativelayout

我有一个使用相对布局的表格行设置。它有 2 个 TextView，我希望它们具有相等的间距和左对齐的文本。请参阅下面的当前设置。这有一个左对齐和右对齐的文本视图。当我更改为将两者对齐到左侧内容重叠时。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:padding="10dip">
    <TextView
         android:id="@+id/displayLabel"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerVertical="true"
         android:layout_marginLeft="20dp"
         android:layout_toRightOf="@+id/row_image"
         android:text="adasd"
         android:textSize="18sp" />    
    <TextView
        android:id="@+id/displayValue"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="20dp"
        android:text="adasd"    
        android:textSize="18sp"/>

</RelativeLayout> 
```

有什么建议么。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:51:51.897

这似乎是加权 LinearLayout 的工作 - 显示两个大小相等的文本视图：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:padding="10dip">

    <TextView
         android:id="@+id/displayLabel"
         android:layout_width="0dp"
         android:layout_height="wrap_content"         
         android:layout_marginLeft="20dp"
         android:text="adasd"
         android:textSize="18sp" 
         android:layout_weight="1"/>

    <TextView
        android:id="@+id/displayValue"
        android:layout_width="0dp"
        android:layout_height="wrap_content"        
        android:layout_marginRight="20dp"
        android:text="adasd"    
        android:textSize="18sp"
        android:layout_weight="1"/>

</LinearLayout> 
```

然后在模拟器中它看起来像： ![截屏](../Images/18cbf3082538eaccaf0cf8a0d4924ef9.png)

请注意`layout_weight`文本视图和 zero 中的属性`layout_width`。基本上，这意味着视图将获得与指定权重成比例的额外可用空间。因此，对于相同的权重，这些视图将具有相同的宽度。

请参阅[developer.android.com 上的布局指南以](http://developer.android.com/guide/topics/ui/layout-objects.html#linearlayout)获取更多参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:25:05.030

您是否尝试过使用以下 displayValue TextView 而不是 alignParentRight？

```
android:layout_toRightOf="@id/displayLabel" 
```

然后给一些左边距。

# c# - 在 C# 中鼠标悬停时更改 PictureBox 的背景图像？

> ID：10462603
> 
> 赞同：1
> 
> 时间：2012-05-05T14:05:02.677
> 
> 标签：c#, mouseevent, picturebox

当我在 C# 中将鼠标悬停在 PicureBox 上时，如何更改它的背景图像？我正在使用 Visual c# 2010 Express。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T14:08:13.327

您只需要订阅 MouseHover 事件更改图像属性。

这应该可以解决问题：

```
PictureBox o = new PictureBox();
o.MouseHover += (a_sender, a_args) =>
{
    PictureBox pic = a_sender as PicureBox;
    pic.Image = null // New Image..
}; 
```

当您需要恢复以前的图片时再次使用：`MouseLeave`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-17T18:32:08.340

在 PictureBox 属性上，双击事件 MouseEnter 并使用：

```
(sender as PictureBox).Image = Image.FromFile(// path of image1); 
```

然后双击事件 MouseLeave 并使用：

```
(sender as PictureBox).Image = Image.FromFile(// path of image2); 
```

# c# - 订阅 Func<> 中引发的事件

> ID：10462604
> 
> 赞同：3
> 
> 时间：2012-05-05T14:05:03.293
> 
> 标签：c#, events, func

我有一个半通用类，它`Func<>`从另一个类接收一个来告诉它如何转换数据。以某种精简的方式，它看起来像这样的代码：

```
public class A
{
    public B b;

    public void init()
    {
        b = new B(ConvertRawData);
    }

    public double ConvertRawData(double rawData)
    {
        if(rawData == 1023)
            RaiseMalfunctionEvent();
        return rawData;
    }

    public void CalculateData(double rawData)
    {
        b.CalculateData(rawData);
    }
}

public class B
{
    event EventHandler Malfunction;

    Func<double, double> _converter;
    public B(Func<double, double> converter)
    {
        _converter = converter;
    }

    public void CalculateData(rawData)
    {
        var myVal = _converter(rawData);
    }
} 
```

我想要做的是能够在 B 类中引发一个事件，`Func<>`但能够在 B 类中处理该事件。现在该事件实际上是在 A 类中引发的。

所以我的问题是如何在不暴露 B 类中的公共事件处理程序的情况下制作 B 类？或者这甚至可能吗？

**编辑** 只要它是一个事件而不是一个例外。这是来自传感器的外部数据。传感器发送1023表示它处于错误状态，所以我需要标记数据并通知用户，但它真的是我的程序中的异常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:17:39.117

如果您要做的只是捕获可能的错误，则可以抛出异常而不是调用`RaiseMalfunctionEvent`，并在调用函数时捕获该异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:20:45.343

我同意其他人的观点，这看起来最好的方法是使用异常：创建一个新的异常类`ComnversionMalfunctionException`，将其扔到您的委托中，然后将其捕获`CalculateData()`。在 catch 子句中，您可以引发事件。

但是，如果您不想使用异常，可以通过将委托传递给`converter`引发事件的委托来执行此操作：

```
public class A
{
    public double ConvertRawData(Action raiseMalfunctionEvent, double rawData)
    {
        if(rawData == 1023)
            raiseMalfunctionEvent();
        return rawData;
    }
}

public class B
{
    event EventHandler Malfunction;

    Func<Action, double, double> _converter;
    public B(Func<Action, double, double> converter)
    {
        _converter = converter;
    }

    public void CalculateData(rawData)
    {
        var myVal = _converter(() => Malfunction(this, EventArgs.Empty), rawData);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T14:14:04.303

您可以将公共方法添加到调用您的事件的 B 中，并将 B 的实例传递给转换器。在转换器中，您将能够调用此方法。

第二种方法可以修改 CalculateData 方法以捕获特殊异常并通知它。里面转换器只是扔它。

# gwt - 整个窗口上的 GWT 滚动条

> ID：10462612
> 
> 赞同：1
> 
> 时间：2012-05-05T14:05:53.340
> 
> 标签：gwt, uibinder

我有一个包含页眉页脚和主要内容槽的全局演示者，当页眉始终位于顶部时，页脚始终位于底部...

我的问题是：**如何向我的 Global Presenter 添加滚动条？**

我知道有很多这样的问题，但我找不到适合我的答案。

我有 UiBinder 有代码：

```
 <g:RootLayoutPanel width="100%" height="100%">
    <g:layer left="0px" right="0px" top="0px" bottom="0px">
        <g:DockLayoutPanel unit="EM">
            <g:north size="5.0">
                <g:HTMLPanel ui:field="headerContentPanel" />
            </g:north>
            <g:center size="1.0">
                <g:FlowPanel ui:field="mainContentPanel" />
            </g:center>
            <g:south size="1.5">
                <g:HTMLPanel ui:field="footerContentPanel" />
            </g:south>
        </g:DockLayoutPanel>
    </g:layer>
</g:RootLayoutPanel> 
```

我试图添加包含 RootLayotPanel 或其他面板的 ScrollPanel。但所有内部面板的大小都为零。

我尝试在 scrollPanel 内使用垂直面板，但我不能将页脚放在底部。

有人有答案吗？

==================================================== =================================

我成功了，这是我的新代码：

```
 <g:RootLayoutPanel width="100%" height="100%">
    <g:layer>

        <g:ScrollPanel width="100%" height="100%">
            <g:DockPanel width="100%" horizontalAlignment="ALIGN_CENTER" verticalAlignment="ALIGN_MIDDLE">
                <g:Dock direction="NORTH" >
                    <g:HTMLPanel ui:field="headerContentPanel" />
                </g:Dock>
                <g:Dock direction="CENTER" verticalAlignment="ALIGN_MIDDLE" horizontalAlignment="ALIGN_CENTER">
                    <g:FlowPanel ui:field="mainContentPanel" />
                </g:Dock>
                <g:Dock direction="SOUTH"  verticalAlignment="ALIGN_BOTTOM" horizontalAlignment="ALIGN_CENTER">
                    <g:HTMLPanel ui:field="footerContentPanel" />
                </g:Dock>
            </g:DockPanel>
        </g:ScrollPanel>

    </g:layer>
</g:RootLayoutPanel> 
```

但我有一个小问题：无论我尝试什么，我的页脚都没有连接到底部。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:13:38.667

布局面板在滚动面板中无法正常工作。但是 scoll 面板可以在 Layout Panels 中使用：例如滚动中心部分：

> ```
>  <g:DockLayoutPanel unit="EM">
>         <g:north size="5.0">
>             <g:HTMLPanel ui:field="headerContentPanel" />
>         </g:north>
>         <g:center size="1.0">
> 
>           <g:ScrollPanel>
>             <g:FlowPanel ui:field="mainContentPanel" />
>           </g:ScrollPanel>
> 
>         </g:center>
>         <g:south size="1.5">
>             <g:HTMLPanel ui:field="footerContentPanel" />
>         </g:south>
>     </g:DockLayoutPanel> 
> ```

* * *

另一种可能性是使用 DockPanel 代替布局面板。

如果标题包含在滚动条中：

> ```
> <g:ScrollPanel>   
>    <g:DockPanel>
>       <g:Dock direction="NORTH" height="100px">
>           <g:HTMLPanel ui:field="headerContentPanel" />
>       </g:Dock>
>       <g:Dock direction="CENTER">
>           <g:FlowPanel ui:field="mainContentPanel" />
>       </g:Dock>
>       <g:Dock direction="SOUTH" height="100px">
>           <g:HTMLPanel ui:field="footerContentPanel" />
>       </g:Dock>
>   </g:DockPanel> 
> </g:ScrollPanel> 
> ```

然后把它放进去`RootLayoutPanel`或`RootPanel`

* * *

或者在布局面板中使用 DockPanel。例如：我们希望有可滚动的标题和中心部分，但西面板和底部始终在视图中：

> ```
> <g:DockLayoutPanel width="100%">
>   <g:west size="100.0">
>      <g:Label>West side </g:Label>
>   </g:west>
>   <g:center>
>      <g:ScrollPanel>   
>         <g:DockPanel>
>           <g:Dock direction="NORTH" height="100px">
>             <g:HTMLPanel ui:field="headerContentPanel" />
>           </g:Dock>
>           <g:Dock direction="CENTER">
>             <g:FlowPanel ui:field="mainContentPanel" />
>           </g:Dock>
>         </g:DockPanel> 
>      </g:ScrollPanel>
>   </g:center>
>   <g:south size="50">
>      <g:HTMLPanel ui:field="footerContentPanel" />
>   </g:south >
> </g:DockLayoutPanel> 
> ```

然后把这个放进去`RootLayoutPanel`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:09:17.797

暂时忘记所有 GWT (UiBinder) 语法和所有级联布局。只需考虑这个简化的示例：

*   我们有一个窗口，假设当前高度为 1000 像素。
*   我们有一个占据 100% 窗口高度的容器（想象一下一个简单的黑盒子）——所以它的高度是 1000px。

在这种情况下，没有什么可以滚动的。因此，使用 scroll=auto 时，窗口上将没有滚动条。（忘记我们黑匣子内任何可能的滚动条。）

* * *

如果您想要一个标题保持在顶部的布局，而其他所有内容都滚动（滚动条占据 100% 高度），您可能应该从带有“position=fixed”的标题开始。因此，您将在 HTML 中执行以下操作：

```
<div class="headerContent">My header</div>
<div class="everythingElse">
   <div class="mainContent">...</div>
   <div class="footerContent">My footer</div>
</div> 
```

CSS：

```
.headerContent {
  position: fixed;
  top: 0;
  left: 0;
  height: 5.0em;
  width: 100%;
  background-color: red;
}
.everythingElse {
  margin-top: 5.0em; /* Same as the height of the header */
} 
```

您可以在 GWT UiBinder 中执行相同的操作。只需将 div 替换为简单的 FlowPanel（如果您愿意），然后应用 css（使用该`addStyleNames`属性引用的 UiBinder CSS 类）。不需要 DockPanel。当“everythingElse”的高度超过窗口高度时，body标签的默认设置显示滚动条。

# java - 如何将带有打印控制字符的字符串转换为格式化字符串？

> ID：10462613
> 
> 赞同：1
> 
> 时间：2012-05-05T14:05:56.453
> 
> 标签：java, printing

问题是源包含控制字符。这些控制字符在记事本中是不可见的。文本文件查看器（如记事本）无法以正确格式显示文本。

例如（\r\n 是记事本中不可见的控制字符）：

原创

```
AAAAAA                           123.00\r
           BBBBBBB\r\n 
```

最后结果

```
AAAAAA     BBBBBBB               123.00\r\n 
```

该术语似乎是“套印”。有没有办法转换这样的字符串？或者有什么方法可以模拟打印此类文本的打印机？

示例代码

```
String text = getUnformatedText();
BufferedWriter bw = new BufferedWriter(new FileWriter(new File("text.txt")));
bw.write(text);
bw.flush(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:28:22.623

我在 Google Project Hosting 创建了一个项目。该代码适用于我的情况。 [http://code.google.com/p/printing-control-text-to-notepad-ready/](http://code.google.com/p/printing-control-text-to-notepad-ready/)

# android - 为什么设置 ListView 时应用程序崩溃？

> ID：10462615
> 
> 赞同：1
> 
> 时间：2012-05-05T14:06:08.537
> 
> 标签：android, android-listview, android-arrayadapter

我正在尝试运行一个示例，我在一本关于`ListView`. 正如书中所述，我创建了`string-array`in`string.xml`文件，并且其布局`ListView`位于`list_item.xml`内部`res->layout`文件夹中。

问题是，当我运行活动时，应用程序崩溃了。谁能告诉我错误在哪里？

**代码1**：

```
public class ListViewTestActivity extends ListActivity {
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String[] c = getResources().getStringArray(R.array.cities);
    setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, c));
    }} 
```

**字符串.xml**

```
<resources>

<string name="hello">Hello World, ListViewTestActivity!</string>
<string name="app_name">ListViewTest</string>

<string-array
        name="cities">
    <item>Bath</item>
    <item>Birmingham</item>
    <item>Bradford</item>
    <item>Brighton</item>
    <item>Bristol</item>
    <item>Cambridge</item>
    <item>Canterbury</item>
</string-array> 
```

**list_item.xml**：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textSize="28dip">
    </TextView>

</LinearLayout> 
```

**日志猫**：

```
 05-05 22:45:16.018: E/ArrayAdapter(648): You must supply a resource ID for a TextView
05-05 22:45:16.048: E/AndroidRuntime(648): FATAL EXCEPTION: main
05-05 22:45:16.048: E/AndroidRuntime(648): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:347)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.AbsListView.obtainView(AbsListView.java:1430)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.ListView.makeAndAddView(ListView.java:1745)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.ListView.fillDown(ListView.java:670)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.ListView.fillFromTop(ListView.java:727)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.ListView.layoutChildren(ListView.java:1598)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.AbsListView.onLayout(AbsListView.java:1260)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.view.View.layout(View.java:7175)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.view.View.layout(View.java:7175)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.view.View.layout(View.java:7175)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.view.View.layout(View.java:7175)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.os.Looper.loop(Looper.java:130)
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-05 22:45:16.048: E/AndroidRuntime(648):  at java.lang.reflect.Method.invokeNative(Native Method)
05-05 22:45:16.048: E/AndroidRuntime(648):  at java.lang.reflect.Method.invoke(Method.java:507)
05-05 22:45:16.048: E/AndroidRuntime(648):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-05 22:45:16.048: E/AndroidRuntime(648):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-05 22:45:16.048: E/AndroidRuntime(648):  at dalvik.system.NativeStart.main(Native Method)
05-05 22:45:16.048: E/AndroidRuntime(648): Caused by: java.lang.ClassCastException: android.widget.LinearLayout
05-05 22:45:16.048: E/AndroidRuntime(648):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:340) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:12:29.747

如果您为行项目使用该特定布局，则将一个分配`id`给`TextView`并将其传递给适配器的构造函数，以让适配器知道将数据放置在哪里：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/text"  
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:textSize="28dip">
</TextView> 
```

在您的活动中：

```
setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.text, c)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:10:50.063

您的 xml 文件必须是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/monid"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:textSize="28dip" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T14:12:02.033

您可能正在关闭您的线性布局`list_item.xml`。如果这不起作用，请发布日志

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T14:12:21.173

您可能需要在 onCreate 中的某处调用 setContentView(...)。

# objective-c - 如何剪切 UIView 内容？

> ID：10462618
> 
> 赞同：3
> 
> 时间：2012-05-05T14:06:22.293
> 
> 标签：objective-c, ios, ios5

请帮忙！！！我正在使用手势识别器来移动我的 UIView。在移动期间，我正在更改视图的宽度，但内容超出了边界...如何剪切视图内容？我只需要临时剪切它，而不是删除它，因为我需要恢复内容。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T15:39:15.957

将视图的[clipsToBounds](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/clipsToBounds)属性设置为 YES（以编程方式或在界面生成器中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T15:38:13.190

通常，子视图的可见区域不会被裁剪到其父视图的边界，但在 iOS 中，您可以使用 clipsToBounds 属性来更改该行为。

尝试设置

```
myView.clipsToBounds = YES; 
```

# asp.net - ASP.NET 4.0 路由仅用于登录页面

> ID：10462620
> 
> 赞同：1
> 
> 时间：2012-05-05T14:06:23.963
> 
> 标签：asp.net

是否可以仅将路由应用于 Login.aspx？为什么，因为一旦用户登录网站，他们将继续正常浏览。例如。

```
www.test.com/01 
```

可能01是一种用户，登录后可以浏览到

```
www.test.com/products.aspx
www.test.com/sales.aspx 
```

ETC.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:18:10.030

我找到了答案

这是我的配置，

```
routes.Ignore("{*allaspx}", new { allaspx = @".*\.aspx(/.*)?" });<br>
routes.Ignore("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" });<br>
routes.Ignore("{*allaxd}", new { allaxd = @".*\.axd(/.*)?" });<br>
routes.MapPageRoute("Routing", "{Id}", "~/Login.aspx"); 
```

# javascript - 这个字符串替换函数的目的是什么？

> ID：10462626
> 
> 赞同：1
> 
> 时间：2012-05-05T14:07:09.627
> 
> 标签：javascript, replace

[在浏览 Remy Sharp 的Simple Drag and Drop](http://html5demos.com/drag-anything#view-source)演示的源代码时，我发现了这个函数：

```
function entities(s) {
  var e = {
    '"' : '"',
    '&' : '&',
    '<' : '<',
    '>' : '>'
  };
  return s.replace(/["&<>]/g, function (m) {
    return e[m];
  });
} 
```

据我所知，它只是用自己替换了 " 或 & 或 < 或 >。所以不需要那个函数。

我怎么错了？

**更新：** 可以通过单击页面末尾的“查看源代码”来查看源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:10:55.810

我不知道你在哪里看到它（我在你提供的网站上找不到它），但你可能误读了这个函数，或者在浏览器进行了某种解析后阅读了它。

该函数最有可能`<`用`&gt;`和`&`替换`&amp;`。因为您已经通过浏览器看到它，所以浏览器将实体替换回原始字符，导致`< : <`等。

如果这确实是原始函数并且没有错误，则该函数什么也不做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T14:13:32.837

我在 Chrome 中查看了页面的来源，`Ctrl+U`这就是我发现的：

```
function entities(s) {
  var e = {
    '"' : '&quot;',
    '&' : '&amp;',
    '<' : '&lt;',
    '>' : '&gt;'
  };
  return s.replace(/["&<>]/g, function (m) {
    return e[m];
  });
} 
```

显然，这会做一些事情——即，它用转义形式替换特殊字符。

**您看到您所做**的事情的原因是您在“查看源代码”页面上查看的源代码正在*以 HTML*呈现。因此，当源的`&quot;`字符串在“查看源”页面上呈现时，它在 HTML 页面上显示为`"`. HTML5Deoms 确实应该在其查看源页面上转义与号`&amp;quot;`，这样它才能正确显示在呈现的源页面上`&quot;`，但他们不这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T14:09:26.067

你是对的。这个函数什么都不做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T14:13:20.677

我查看了源代码，它是这样说的：

```
function entities(s) {
  var e = {
    '"' : '&quot;',
    '&' : '&amp;',
    '<' : '&lt;',
    '>' : '&gt;'
  }; 
```

它转义了特殊字符，因此可以看到 HTML 标记和源代码，而不会将其解释为 HTML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T14:16:26.313

我不知道您在哪里找到了该功能，但我想 Truth 是正确的。这就是我发现的

```
 function entities(s) {
  var e = {
    '"' : '&quot;',
    '&' : '&amp;',
    '<' : '&lt;',
    '>' : '&gt;'
  };
  return s.replace(/["&<>]/g, function (m) {
    return e[m];
  });
} 
```

# xml - 使用 Powershell 将 XML 文件远程保存到服务器

> ID：10462627
> 
> 赞同：3
> 
> 时间：2012-05-05T14:07:12.777
> 
> 标签：xml, powershell

我有一个脚本可以运行并将文本保存到 XML 文件中。我想将此 XML 文件保存到网络中的远程服务器。对此的命令/代码是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:10:25.863

UNC 路径（\\server\share\file.xml 或 \\server\c$\temp\file.xml）。它要求运行脚本的用户必须对远程服务器上的目标位置具有权限。

# javascript - jquery ajax，每个帖子只返回一个标签

> ID：10462631
> 
> 赞同：0
> 
> 时间：2012-05-05T14:08:21.333
> 
> 标签：javascript, jquery, ajax, jsonp

## [http://jsfiddle.net/Pd2cp/2/](http://jsfiddle.net/Pd2cp/2/)

就像上面的 jsFiddle 一样，当有很多标签时，您会看到每个帖子只返回一个标签。我正在使用下面的 jquery。我如何返回每个帖子的所有标签。作为[参考，我从这里得到了很多信息](http://www.threelas.com/2012/02/basic-blogger-json-feed-api.html)

```
$.ajax({
    url: 'http://www.blogger.com/feeds/2814965631975331659/posts/default?alt=json-in-script&max-results=8',
    type: 'get',
    dataType: "jsonp",
    success: function(data){
        for (var i = 0; i < data.feed.entry.length; i++){
        var title = data.feed.entry[i].title.$t;
        for(var j = 0; j < data.feed.entry[i].category.length; j++){
        var categories = data.feed.entry[i].category[j].term;
        }
        $('#blogContainer').append(title+'<br/>'+categories+'<br/><br/>');
        }
    }
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:11:59.033

在遍历类别的循环中，您将类别值分配给相同的变量`var category`，它在每个循环中都会被覆盖。您需要做的是有一个`category`收集类别标签的数组。

这是工作代码：

```
$.ajax({
    url: 'http://www.blogger.com/feeds/2814965631975331659/posts/default?alt=json-in-script&max-results=8',
    type: 'get',
    dataType: "jsonp",
    success: function(data){
        for (var i = 0; i < data.feed.entry.length; i++){
            var title = data.feed.entry[i].title.$t;
            var categories = []; // collect categories here
            for(var j = 0; j < data.feed.entry[i].category.length; j++){
                categories.push(data.feed.entry[i].category[j].term); // append the label to the category collection
            }
        $('#blogContainer').append(title+'<br/>'+ categories.join(', ') +'<br/><br/>');
        }
    }
});​ 
```

# asp.net-mvc-3 - 在asp.net mvc 3中查看可见

> ID：10462632
> 
> 赞同：0
> 
> 时间：2012-05-05T14:08:45.123
> 
> 标签：asp.net-mvc-3

在我的 asp.net mvc 3 项目中，我有 2 个角色“用户”和“管理员”。如果我登录的用户看不到管理员角色的视图，该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:12:02.157

使用[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:22:54.003

`[Authorize(Roles="User")]`在您需要的每个 Controller 类之上使用。

我个人使用了 Brian Legg 的本[教程](http://www.brianlegg.com/post/2011/05/09/Implementing-your-own-RoleProvider-and-MembershipProvider-in-MVC-3.aspx)

# ssl - 如果我为我的 iOS 或 Android 应用程序使用 SSL 证书与我的服务器通信，可以使用任何 CA

> ID：10462633
> 
> 赞同：0
> 
> 时间：2012-05-05T14:08:55.687
> 
> 标签：ssl, certificate

如果我为我的应用程序使用 SSL 与我的服务器通信，我可以使用任何 SSL 证书，例如 goDaddy 颁发的证书吗？我理解人们购买 Verisign 证书（非常昂贵）的原因是所有浏览器都支持它们。但是如果我没有浏览器组件，并且我的应用程序和我的服务之间的通信，我可以选择更便宜的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:25:11.177

# SSL 的工作原理

SSL 证书的目标是确保中间人不会窃听您的加密通信。当您的应用程序连接到您的服务器时，您的服务器因此会提供一个证书，该证书告诉您使用的加密密钥确实属于您的服务器。该证书由受信任方加密签名，因此中间人无法伪造这样的证书。您的应用程序必须提前知道受信任方的加密密钥才能验证此签名。

# 使用 Godaddy 证书

您可以使用由您的应用程序已知的受信任方制作的任何证书。如果您在应用程序中包含 godaddy 加密密钥（称为根证书），则可以使用 godaddy 证书。

# 使用您自己的零成本证书

对于您和您的应用程序，您自己可以成为证书签名的受信任方。您可以使用自己生成的证书而无需支付任何费用。您只需要在您的应用程序中包含您自己的证书。[您可以在http://www.akadia.com/services/ssh_test_certificate.html](http://www.akadia.com/services/ssh_test_certificate.html)找到有关如何生成自签名证书的教程。

# mysql - MySQL - 当我比较 2 个表时，其中 1 个返回 null 时，我为什么会得到 0 行？

> ID：10462635
> 
> 赞同：2
> 
> 时间：2012-05-05T14:09:17.183
> 
> 标签：mysql

我有 2 张桌子

表 1 tbl1

```
ID | Name
1  | stack 
```

表2 tbl2（空表）

```
ID | Name 
```

我有这个查询

```
SELECT id FROM tbl1 WHERE id != (SELECT id FROM tbl2) 
```

我的子查询返回 null，这意味着 WHERE 比较是 id ！= null 并且由于我的 id = 1，它不应该显示 id 1 吗？

但是我不断得到零或没有行返回。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:14:30.597

我真的不知道，但你有没有试过`SELECT id FROM tbl1 WHERE id NOT IN (SELECT id FROM tbl2)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T14:15:11.643

比较`null`总是会导致`unknown`

如果您想查看是否有某些内容，则`null`必须使用`is`运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T14:16:50.493

为了获得所需的结果，请尝试使用：

```
SELECT id FROM tbl1 WHERE id NOT IN (SELECT id FROM tbl2); 
```

因为您的初始查询仅在`tbl2`恰好包含 1 条记录时才有效。

`NULL`是一个特殊值，您应该在检查它时使用`value IS NULL`或。`value IS NOT NULL`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T14:17:58.743

子选择可能非常昂贵，请尝试使用此左连接

```
SELECT tbl1.id FROM tbl1 LEFT JOIN tbl2 ON tbl2.id = tbl1.id WHERE tbl2.id IS NULL 
```

# javascript - 重新启动 Jquery setInterval 并重置所有变量

> ID：10462640
> 
> 赞同：0
> 
> 时间：2012-05-05T14:09:37.107
> 
> 标签：javascript, jquery, radio-button, setinterval, clearinterval

我有一些带有 class = active 的单选按钮

```
 <div id="radioset1">
   <input type="radio" class="active" id="radio1" name="radio" />
   <input type="radio" class="active" id="radio2" name="radio" />
   <input type="radio" class="active" id="radio3" name="radio" />
  </div>
  <div id="counter_up">xy</div> 
```

我想在 div“counter_up”中添加一个计时器，以显示单选按钮的最后一次更改时间。

因此我添加了一些这样的 jquery 代码：

```
 $('.active').click(function() {

    clearInterval(myInterval);
    var counter = 0;
    var myInterval = setInterval(function() {

      ++counter;
      $('#counter_up').html('Aktiv seit ' + counter + ' Sekunden');

    },1000);

 }); 
```

我的代码正在运行，所以当我第一次单击其中一个单选按钮时，一切正常。

问题是，当我单击另一个单选按钮时，var 计数器不以 0 开头。

我尝试使用 delete var 和 clearInterval，但它不起作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:17:19.513

您应该`myInterval`全局设置并稍微重组您的代码以使其计数`0`：

```
var myInterval = null;
$('.active').click(function() {

    clearInterval(myInterval);
    var counter = 0;
    var timer = function() {
        $('#counter_up').html('Aktiv seit ' + (counter++) + ' Sekunden');
    };
    timer();
    myInterval = setInterval(timer, 1000);

});​ 
```

**演示：http:** [//jsfiddle.net/x3Z6C/](http://jsfiddle.net/x3Z6C/)

# c# - 如何处理动态生成的工具条菜单项

> ID：10462643
> 
> 赞同：0
> 
> 时间：2012-05-05T14:10:34.327
> 
> 标签：c#, database, drop-down-menu, toolstripmenu

如何为在 FormLoad 上从数据库表中获取值生成项目的工具条菜单下拉项编写代码？

在运行程序之前，如何为这些不存在的项目编写 OnClick 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:01:44.453

控件就像任何其他对象一样。我们只是习惯于使用所见即所得的设计器来指定用户界面。

所以是这样的：

```
void AddMenuItems(ToolStripItemCollection itemCollection, DataView view)
{
    foreach (DataRowView rowView in view)
        itemCollection.Add(MakeMenuItem(rowView.Row));
}

ToolStripItem MakeMenuItem(DataRow row)
{
    var item = new ToolStripMenuItem((string)row["Name"]);
    item.Tag = row;
    item.Click += new EventHandler(MenuItem_Click);
    return item;
}

void MenuItem_Click(object sender, EventArgs e)
{
    var row = ((ToolStripItem)sender).Tag as DataRow;
    MessageBox.Show((string)row["HelpText"]);
} 
```

您可能希望对项目数据使用 DataRow 以外的其他内容（例如某种实体），并且可能希望使用完全不同的逻辑来创建项目，但这说明了模式：像创建任何其他对象一样创建项目，添加将它们添加到已经植根于表单的某个菜单（您也可以动态创建根，但很难看出这样做有什么好处），用它们的数据标记项目，并从点击处理程序中的标记获取数据.

这假设您已获取包含两个字符串类型列 Name 和 HelpText 的数据行表。名称用作工具条项目标签，单击项目时显示帮助文本。

您可以使用它来创建一个菜单，表示名称以 A 开头的行，执行如下操作：

```
var view = GetMenuDataSet().Tables[0].DefaultView;
view.RowFilter = "Name LIKE 'A%'";
menu.Items.Clear();
AddMenuItems(menu.Items, view); 
```

这假定 GetMenuDataSet 返回一个 DataSet，其中包含一个包含前面提到的两列的表，并且您已经在设计时在表单上放置了一些名为“menu”的根菜单（例如 ContextMenuStrip）（或者确保它是在此代码运行的时间）。

要构建层次结构，您可以调用 AddMenuItems 并将某些项目的 DropDownItems 集合而不是根菜单的“项目”传递给它 - 两者都是 ToolStripItemCollection 类型。

# javascript - 将多个文件传送到一个响应

> ID：10462649
> 
> 赞同：2
> 
> 时间：2012-05-05T14:11:23.300
> 
> 标签：javascript, node.js, stream, pipe

我正在尝试编写两个文件和更多文本来响应。然而，下面的代码只返回第一个文件和“仅此而已！” 文本。

```
var http = require('http'),
    util = require('util'),
    fs   = require('fs');

server = http.createServer(function(req, res){  
    var stream  = fs.createReadStream('one.html'),
        stream2 = fs.createReadStream('two.html');

    stream.on('end', function(){
        stream2.pipe(res, { end:false});
    });

    stream2.on('end', function(){
        res.end("Thats all!");
    });

    res.writeHead(200, {'Content-Type' : 'text/plain'});
    stream.pipe(res, { end:false});

}).listen(8001); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T05:27:38.720

您需要的是一个双工流，它将数据从一个流传递到另一个流。

```
stream.pipe(duplexStream).pipe(stream2).pipe(res); 
```

在上面的示例中，第一个管道将写入所有数据，然后将数据从`stream`to写入，最后将数据写入可写流。`duplexStream``duplexStream``stream2``stream2``res`

这是 write 方法的一种可能实现的示例。

```
DuplexStream.write = function(chunk, encoding, done) {
   this.push(chunk);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-30T18:30:35.437

您可以使用**stream-stream**这是一个非常基本的节点模块（不使用依赖项）

```
var ss = require('stream-stream');
var fs = require('fs');

var files = ['one.html', 'two.html'];
var stream = ss();

files.forEach(function(f) {
    stream.write(fs.createReadStream(f));
});
stream.end();

res.writeHead(200, {'Content-Type' : 'text/plain'});
stream.pipe(res, { end:false}); 
```

# mysql - $this->db->affected_rows() 在 codeigniter 中查询后返回 -1

> ID：10462651
> 
> 赞同：0
> 
> 时间：2012-05-05T14:11:33.693
> 
> 标签：mysql, codeigniter, codeigniter-2

我在codeigniter中有这样的查询

```
$update= $this->db->query("update aas set aa = 'aa'  where no=" . $this->db->escape($No) . ""); 
```

当我跑

```
echo  $this->db->affected_rows()  or echo $this->db->affected_rows($update) 
```

它返回-1

更新任何存在的行时，我得到 -1 即使我没有要更新的行，它仍然显示 -1。

问题是什么？我正在使用带有 mysqli 驱动程序的 codeigniter 2.1.0

我尝试在 phpmyadmin 中运行它，它根据数据为我提供了正确的 0 或 1 行。但是当我通过 codeigniter 运行它时，即使要更新的值已更改或保持不变，我也会得到 -1

查询始终在 codeigniter 中为真

是不是因为我打开了codeigniter mysqli驱动

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:26:22.660

> 在执行“写入”类型查询（插入、更新等）时显示受影响的行数。

参考：[**这里**](http://ellislab.com/codeigniter/user-guide/database/helpers.html)。

您的语句中不正确（引号）`sql`（因此未执行）

```
$update= $this->db->query("update aas set aa = 'aa'  where no=" . $this->db->escape($No) . ""); 
```

应该

```
$update = $this->db->query("update aas set aa = 'aa'  where no = '{$this->db->escape($No) }'"); 
echo  $this->db->affected_rows(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:50:36.407

这完全取决于您，但您也可以将此查询转换为 CodeIgniter 的[Active Record Class](http://codeigniter.com/user_guide/database/active_record.html#update)。它不仅会自动为您转义所有内容，而且更易于用于简单查询，并避免 SQL 语句中引号不正确的潜在问题。

因此，对于 Active Record，它看起来像这样：

```
$data = array(
    'aa' => 'aa'
);

$this->db->where('no', $No)->update('aas', $data);

echo $this->db->affected_rows(); // this should return 1 now 
```

# unix - 如何在 Solaris 上找到谁或哪个进程向我的进程发送了信号

> ID：10462664
> 
> 赞同：2
> 
> 时间：2012-05-05T14:12:47.290
> 
> 标签：unix, solaris, signals

我在 Sun Java 1.5 上运行 JBoss。有时，它会意外关闭（以有序的方式）。我怀疑其他一些进程正在向它发送 kill 或 CTRL+C 信号。

Unix/Solaris 上有没有办法追踪谁发送了信号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T20:14:34.350

在 Solaris 上，您可以使用一个简单的 dtrace 脚本来查找谁正在杀死您的进程（假设它的名称是`java`，否则请调整它）：

```
dtrace -qn '
proc:::signal-send
/ args[1]->pr_fname == "java" /
{
        printf("Process %d (%s by UID %d) sending signal %d to java (pid=%d)\n",
        pid,execname,uid,arg1,args[1]->pr_pid);
}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:36:32.790

您可以使用`sigaction`来确定信号的来源。pid 可能为零，因为信号是从内核发送的或通过某些用户交互（按 ctrl+c）

```
#include <signal.h>
#include <string.h>
#include <stdio.h>

static void signal_handler(int sig, siginfo_t *info, void *data) {

    printf ("signal: [%d], pid: [%d], uid: [%d]\n", sig,
            info->si_pid,
            info->si_uid );
}

int main(int argc, char *argv[]) {

    struct sigaction sa;
    memset ( &sa, '\0', sizeof ( struct sigaction ) );

    sa.sa_sigaction = &signal_handler;
    sa.sa_flags |= SA_SIGINFO;

    sigemptyset ( &sa.sa_mask );

    sigaction(SIGINT, &sa, NULL);
    sigaction(SIGTERM, &sa, NULL);
    sigaction(SIGQUIT, &sa, NULL);

    while ( 1 ) {
        sleep (1);
    }

    return 0;
} 
```

# xcode - 显示评分星星xcode

> ID：10462669
> 
> 赞同：2
> 
> 时间：2012-05-05T14:13:23.343
> 
> 标签：xcode, cocoa-touch, ios5

在一个新的 xCode 项目中，我正在解析一个评级，例如 3,5。但我想在我的应用程序中显示这个分数。不是作为文本，而是在图像中，例如 3 个填充星和 1 个半填充星。有没有办法做到这一点？是的？我怎么能这样做？

我需要哪些元素来显示星星？有人可以帮帮我吗？就像在 App Store 中一样

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T14:24:53.970

有几种不同的方法可以解决这个问题，比如创建一个`UIView`子类，该子类将实现一个方法来填充自己`UIImageviews`（代表满星或半星），具体取决于评级，但如果你想避免重新发明轮子，你可以找到几个 iOS 组件将完成这项工作。[其中一些可以在这里找到](http://cocoacontrols.com/search?utf8=%E2%9C%93&q=rating)。

# mysql - 别名不适用于 MYSQL 中的 IF 条件

> ID：10462673
> 
> 赞同：3
> 
> 时间：2012-05-05T14:13:35.987
> 
> 标签：mysql, alias, mysql-error-1064

我正在编写一个 mysql 查询并收到错误。

> “‘字段列表’中的未知列‘dat’”

由于在 mysql 的 IF 条件中使用别名而发生此错误。

这是mysql查询：

```
SELECT 
    nCustomerID,
    dDateRegistered,
    (select count(nPlayerID) from credit_logs 
        where nPlayerID=nCustomerID) as total_clog,
    (select count(nPlayerID) FROM bl_transaction_history
        where nPlayerID=nCustomerID) as total_tran,
    (select count(nCustomerID) from customer_freeplays
        where nCustomerID=nCustomerID) as total_free,
    (select dDateAdded from bl_transaction_history
        where nPlayerID=nCustomerID) as dat,
    (select DATEDIFF(now(),dat)/30 ) as date_differece1,
    (select DATEDIFF(now(),dDateRegistered)/30 ) as date_difference2,
    IF (dat IS NOT NULL,(select DATEDIFF(now(),dat)/30 ),
        (select DATEDIFF(now(),dDateRegistered)/30 )) as date_difference
FROM bl_customers
WHERE nAccountStatus=1 
  and bDeleted=0 
having total_clog>0 
    or total_tran>0 
    or total_free>0 
```

任何帮助都会得到帮助.. :)

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T14:22:15.297

您不能在您选择的其他列中使用别名列。您需要一遍又一遍地复制您正在使用别名的查询的整个部分。IE。在初始声明之后，将所有出现的 dat 替换为 (select dDateAdded from bl_transaction_history where nPlayerID=nCustomerID)

# ruby-on-rails - 关于空的 belongs_to 关联的最佳实践

> ID：10462676
> 
> 赞同：82
> 
> 时间：2012-05-05T14:14:08.013
> 
> 标签：ruby-on-rails, ruby, activerecord

想象以下情况：

我有一个`dog`模型和一个`house`模型。一条狗可以属于一个房子，而一个房子可以有很多条狗，所以：

```
Class Dog <  ActiveRecord::Base
  belongs_to :house
end

Class House < ActiveRecord::Base
  has_many :dogs
end 
```

现在，想象一下我也想创造没有房子的狗。他们不属于房子。我仍然可以使用该关系结构并且`:house_id`在创建它时根本不通知 a 吗？

有更好的做法吗？

Obs.：我用这个类比来简化我的问题，但我的真实情况是：我有一个模型，用户可以生成它的实例。他还可以创建这些实例的集合，但他可以将实例留在集合之外。

* * *

## 回答 #1

> 赞同：349
> 
> 时间：2016-03-03T15:02:51.640

在 Rails 5 中注意这一点......

> #belongs_to 默认是必需的
> 
> 从现在开始，每个 Rails 应用程序都会有一个新的配置选项`config.active_record.belongs_to_required_by_default = true`，当试图保存一个 `belongs_to`不存在关联的模型时，它会触发一个验证错误。
> 
> `config.active_record.belongs_to_required_by_default`可以更改为 `false`保留旧的 Rails 行为，或者我们可以在每个定义上禁用此验证`belongs_to`，只需传递一个附加选项`optional: true`，如下所示：

```
class Book < ActiveRecord::Base
  belongs_to :author, optional: true
end 
```

来自：[https ://sipsandbits.com/2015/09/21/whats-new-in-rails-5/#belongs_toisrequiredbydefault](https://sipsandbits.com/2015/09/21/whats-new-in-rails-5/#belongs_toisrequiredbydefault)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-05T14:36:46.800

我认为这是绝对正常的做法。

您可以在数据库中保留不属于其他模型的值`house_id`。`null`

# c# - 处理大量文件

> ID：10462685
> 
> 赞同：9
> 
> 时间：2012-05-05T14:15:48.913
> 
> 标签：c#, file-io, task-parallel-library, async-ctp, tpl-dataflow

我目前正在从事一个涉及索引大量文件（240k）的研究项目；它们主要是 html、xml、doc、xls、zip、rar、pdf 和文本，文件大小从几 KB 到超过 100 MB。

提取所有 zip 和 rar 文件后，我最终得到一百万个文件。

我正在使用支持 TPL Dataflow 和 Async CTP V3 的 Visual Studio 2010、C# 和 .NET 4.0。为了从这些文件中提取文本，我使用 Apache Tika（使用 ikvm 转换）并使用 Lucene.net 2.9.4 作为索引器。我想使用新的 TPL 数据流库和异步编程。

我有几个问题：

1.  如果我使用 TPL，我会获得性能优势吗？它主要是一个 I/O 过程，据我了解，当您大量使用 I/O 时，TPL 不会提供太多好处。

2.  生产者/消费者方法是否是处理此类文件处理的最佳方式，还是有其他更好的模型？我正在考虑使用阻塞集合创建一个具有多个消费者的生产者。

3.  TPL 数据流库对这种类型的流程有用吗？似乎 TPL 数据流最适合用于某种消息传递系统......

4.  在这种情况下我应该使用异步编程还是坚持同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-11T20:42:40.420

**在处理外部资源时，**async/await绝对有帮助——通常是 Web 请求、文件系统或数据库操作。**这里有趣的问题是您需要同时满足**多个要求**：**

 ***   消耗尽可能少的 CPU（这是 async/await 会有所帮助的地方）
*   同时执行多个操作，**并行**
*   **控制**启动的任务数量（！） - 如果您不考虑这一点，您可能会在处理许多文件时用完线程。

你可以看看我在 github 上发布的一个小项目：

[并行树行者](https://github.com/tusmester/ParallelTreeWalker)

它能够有效地*枚举目录结构中的任意数量的文件*。您可以定义要对每个文件执行的异步操作（在您的情况下对其进行索引），同时仍控制同时处理的**最大文件数**。

例如：

```
await TreeWalker.WalkAsync(root, new TreeWalkerOptions
{
    MaxDegreeOfParallelism = 10,
    ProcessElementAsync = async (element) =>
    {
        var el = element as FileSystemElement;
        var path = el.Path;
        var isDirectory = el.IsDirectory;

        await DoStuffAsync(el);
    }
}); 
```

（如果你不能直接将工具作为dll使用，你可能仍然会在源代码中找到一些有用的例子）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:55:34.073

您可以使用[Everything Search](http://www.voidtools.com/)。SDK 是开源的，并有 C# 示例。这是我见过的在 Windows 上索引文件的最快方法。

*从**常见问题解答**：*

> 1.2 索引我的文件需要多长时间？
> 
> “Everything”仅使用文件和文件夹名称，通常需要几秒钟来构建它的 > 数据库。全新安装 Windows XP SP2（大约 20,000 个文件）需要大约 1 秒的时间来建立索引。1,000,000 个文件大约需要 1 分钟。

不过，我不确定您是否可以使用 TPL。**

# node.js - 如何在 Node.js 中同步处理回调？

> ID：10462686
> 
> 赞同：0
> 
> 时间：2012-05-05T14:16:02.993
> 
> 标签：node.js, asynchronous, redis

我正在使用 Redis 为我在内存中存储的模型生成 ID。Redis 客户端需要回调`INCR`命令，这意味着代码看起来像

```
client.incr('foo', function(err, id) {
  ... continue on here
}); 
```

问题是，我已经编写了应用程序的另一部分，它希望`incr`调用是同步的并且只返回 ID，这样我就可以像使用它一样

```
var id = client.incr('foo'); 
```

我遇到这个问题的原因是，到目前为止，我只是在内存中使用简单的闭包计数器函数生成 ID，比如

```
var counter = (function() {
  var count = 0;
  return function() {
    return ++count;
  }
})(); 
```

简化测试和一般设置。

这是否意味着我的应用程序在设计上存在缺陷，我需要重写它以期望在生成 ID 时进行回调？还是有任何简单的方法来同步呼叫？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:22:04.580

Node.js 本质上是一个**异步 I/O 库**（带有插件）。因此，根据定义，那里没有同步 I/O，您应该重写您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T14:35:11.907

这有点痛苦，但是您要做的就是将生成计数器后的逻辑包装到一个函数中，然后从 Redis 回调中调用它。如果你有这样的事情：

```
var id = get_synchronous_id();
processIdSomehow(id); 
```

你需要做这样的事情。

```
var runIdLogic = function(id){
  processIdSomehow(id);
}

client.incr('foo', function(err, id) {
  runIdLogic(id);
}); 
```

您将需要适当的错误检查，但类似的东西应该适合您。

Node 有几个顺序编程层（例如[TameJS](http://tamejs.org/)）可能有助于满足您的需求，但它们通常会进行重新编译或类似的事情：如果您想使用，您必须决定您对它的适应程度他们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:12:58.783

@Sergio 在他的回答中简短地说了这一点，但我想写更多的扩展答案。node.js 是一种异步设计。它在单个线程中运行，这意味着为了保持快速并处理许多并发操作，所有阻塞调用都必须为其返回值提供回调以异步运行它们。

这并不意味着同步调用是不可能的。它们是，并且它与您如何信任 3rd 方插件有关。如果有人决定在他们的插件中编写一个阻塞的调用，那么您将受到该调用的支配，它甚至可能是内部的并且没有在他们的 API 中公开的东西。因此，它可以阻止您的整个应用程序。考虑一下如果 Redis 花费大量时间返回，然后再乘以可能访问同一例程的客户端数量，会发生什么情况。整个逻辑已经序列化，他们都在等待。

在回答您的最后一个问题时，您不应该努力适应阻塞方法。现在看来，这似乎是一个简单的解决方案，但它首先与 node.js 的好处背道而驰。如果您只是更喜欢同步设计工作流程，您可能需要考虑另一个以这种方式设计的框架（使用线程）。如果您想坚持使用 node.js，请重写现有逻辑以符合回调样式。从我看到的代码示例中，它往往看起来像一组嵌套的函数，因为回调使用回调等，直到它可以从该递归堆栈返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T18:54:31.867

node.js 中的应用程序状态通常作为对象传递。我要做的更接近：

```
var state = {}

client.incr('foo', function(err, id) {
  state.id = id;
  doSomethingWithId(state.id);
});

function doSomethingWithId(id) {
  // reuse state if necessary
} 
```

这只是一种不同的做事方式。

# emacs - 当菜单栏模式关闭时，Emacs 的框架会自动向上滑动

> ID：10462693
> 
> 赞同：1
> 
> 时间：2012-05-05T14:16:34.513
> 
> 标签：emacs

我刚刚在支持 Gtk 的 Ubuntu12.04 上编译了 Emacs23.4.1，一切似乎都很好，除非我将“菜单栏模式”和“工具栏模式”都关闭为 nil（在 .emacs 文件中或调用命令），Emacs 框架向上滑动（如“jQuery.slideUp()”的效果）直到只有一行可见，当我将其拉下并释放鼠标时，它再次向上滑动。有没有人遇到过这个问题？我该怎么办？

# java - 在android中删除位图

> ID：10462696
> 
> 赞同：0
> 
> 时间：2012-05-05T14:16:50.760
> 
> 标签：java, android, graphics, bitmap, image

你如何在android中删除位图？我创建了一个名为“太阳”的位图，但一旦我完成一个人走过屏幕，我想添加一个名为“月亮”的新位图，但它只是在太阳上方创建的，我怎么能删除太阳位图？这是我的步行者代码。

```
 switch (counter)
    {

    case 0:
        skyRect.set(0, 0, canvas.getWidth(), 400);
        canvas.drawRect(skyRect, sky);
        canvas.drawBitmap(AndroidDude, changingX, (canvas.getHeight()/2 - (AndroidDude.getHeight()/2)), null);
        if (changingX < canvas.getWidth())
        {
            changingX += 10;
        }
        else 
        {
            changingX = 0;
            sunChangingX = 0;
            counter++;
        }

        grassRect.set(0, 400, canvas.getWidth(), canvas.getHeight());
        canvas.drawRect(grassRect, grass);
        canvas.drawBitmap(cloud, 100, 50, null);
        canvas.drawBitmap(cloud, 700, 100, null);
        canvas.drawBitmap(sun, (canvas.getWidth() - sun.getWidth()), 0, null);
        invalidate();
        break;

    case 1:
        //Remove sun and clouds here?
        canvas.drawBitmap(moon, (canvas.getWidth() - moon.getWidth()), 0, null);
        canvas.drawBitmap(AndroidDude, changingX, (canvas.getHeight()/2 - (AndroidDude.getHeight()/2)), null);
        if (changingX < canvas.getWidth())
        {
            changingX += 10;
        }
        else 
        {
            changingX = 0;
            counter++;
        }
        grassRect.set(0, 400, canvas.getWidth(), canvas.getHeight());
        canvas.drawRect(grassRect, grass);
        canvas.drawBitmap(cloud, 100, 50, null);
        canvas.drawBitmap(cloud, 700, 100, null);
        canvas.drawBitmap(sun, sunChangingX, 0, null);
        invalidate();
        break;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:28:58.640

在要删除的位图上重新绘制背景（天空和草）。做一个刷新功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:29:56.327

你只是在旧的东西上画新的东西。如果您需要“擦除”某些内容，只需重新绘制背景即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T14:33:26.877

```
Canvas.drawColor(Color.WHITE); 
```

**或者**

您可能必须清洁画布，以便可以使用**白色**绘制矩形。

// 或任何你的画布颜色

它看起来像画布是空白的。

并再次画出你想要的。

您的输出将以白色显示。

# android - 黑屏而不是多纹理

> ID：10462699
> 
> 赞同：5
> 
> 时间：2012-05-05T14:17:02.653
> 
> 标签：android, opengl-es-2.0

我已经单独检查了纹理，它们工作正常。每个纹理都是 128*128 像素，我在摩托罗拉 MILESTONE 手机上工作，并测试了所有基本示例（从线条到立方体贴图），在多纹理矩形时卡住了。

如果我不绑定任何一个纹理，着色器工作得很好，但问题始于用于多纹理的两个纹理。

```
private float[] myRotateMatrix = new float[16];
private float[] myViewMatrix = new float[16];
private float[] myProjectionMatrix = new float[16];
private float[] myMVPMatrix = new float[16];
private int aPositionLocation;
private int uMVPLocation;
private int aTextureCoordLocation;
private FloatBuffer rectangleVFB;
private ShortBuffer rectangleISB;
private FloatBuffer textureCFB;
private int program;
private int textureId1;
private int textureId2;
private int uSampler1Location;
private int uSampler2Location;

private void initShapes()  {
    float[] rectangleVFA = {-1,-1,0,  1,-1,0,  1,1,0, -1,1,0};
    short[] rectangleISA = {0,1,2,  0,3,2};
    float[] textureCFA = {0,0,  1,0,  1,1, 0,1};

    ByteBuffer rectangleVBB = ByteBuffer.allocateDirect(rectangleVFA.length * 4);
    rectangleVBB.order(ByteOrder.nativeOrder());
    rectangleVFB = rectangleVBB.asFloatBuffer();
    rectangleVFB.put(rectangleVFA);
    rectangleVFB.position(0);

    ByteBuffer rectangleIBB = ByteBuffer.allocateDirect(rectangleISA.length * 2);
    rectangleIBB.order(ByteOrder.nativeOrder());
    rectangleISB = rectangleIBB.asShortBuffer();
    rectangleISB.put(rectangleISA);
    rectangleISB.position(0);

    ByteBuffer textureCBB = ByteBuffer.allocateDirect(textureCFA.length * 4);
    textureCBB.order(ByteOrder.nativeOrder());
    textureCFB = textureCBB.asFloatBuffer();
    textureCFB.put(textureCFA);
    textureCFB.position(0);
}

public void onSurfaceChanged(GL10 gl, int width, int height)  {
    GLES20.glViewport(0, 0, width, height);
    checkError("glViewport");
    float ratio = (float) width / height;
    Matrix.setLookAtM(myViewMatrix, 0, 0, 0, 6, 0, 0, 0, 0, 1, 0);
    Matrix.frustumM(myProjectionMatrix, 0, -ratio, ratio, -1, 1, 3, 7);

    aPositionLocation = GLES20.glGetAttribLocation(program, "aPosition");
    checkError("glGetAttribLocation");

    uMVPLocation = GLES20.glGetUniformLocation(program, "uMVP");
    checkError("glGetUniformLocation");

    aTextureCoordLocation = GLES20.glGetAttribLocation(program, "aTextureCoord");
    checkError("glGetAttribLocation");

    uSampler1Location = GLES20.glGetUniformLocation(program, "uSampler1");
    checkError("glGetUniformLocation");

    uSampler2Location = GLES20.glGetUniformLocation(program, "uSampler2");
    checkError("glGetUniformLocation");

    int[] textures = new int[2];

    GLES20.glGenTextures(2, textures, 0);
    checkError("glGenTextures");

    textureId1 = textures[0];
    textureId2 = textures[1];

    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureId1);
    checkError("glBindTexture");

    InputStream is1 = context.getResources().openRawResource(R.drawable.brick1);
    Bitmap img1;
    try  {
        img1 = BitmapFactory.decodeStream(is1);
    }finally  {
        try {
            is1.close();
        }catch (IOException ioe) {
        }
    }
    GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, img1, 0);

    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureId2);
    checkError("glBindTexture");

    InputStream is2 = context.getResources().openRawResource(R.drawable.brick2);
    Bitmap img2;
    try  {
        img2 = BitmapFactory.decodeStream(is2);
    }finally  {
        try  {
            is2.close();
        }catch (IOException ioe) {
        }
    }
    GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, img2, 0);

    GLES20.glPixelStorei(GLES20.GL_UNPACK_ALIGNMENT, 1);
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);
}

public void onDrawFrame(GL10 gl)  {
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
    checkError("glClear");

    GLES20.glUseProgram(program);
    checkError("glUseProgram");

    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    checkError("glActiveTexture");
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureId1);
    checkError("glBindTexture");

    GLES20.glUniform1i(uSampler1Location, 0);
    checkError("glUniform1i");

    GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
    checkError("glActiveTexture");
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureId2);
    checkError("glBindTexture");

    GLES20.glUniform1i(uSampler2Location, 1);
    checkError("glUniform1i");

    Matrix.setIdentityM(myRotateMatrix, 0);
    Matrix.rotateM(myRotateMatrix, 0, touchX, 0, 1, 0);
    Matrix.rotateM(myRotateMatrix, 0, touchY, 1, 0, 0);
    Matrix.multiplyMM(myMVPMatrix, 0, myViewMatrix, 0, myRotateMatrix, 0);
    Matrix.multiplyMM(myMVPMatrix, 0, myProjectionMatrix, 0, myMVPMatrix, 0);

    GLES20.glVertexAttribPointer(aPositionLocation, 3, GLES20.GL_FLOAT, false, 12, rectangleVFB);
    checkError("glVertexAttribPointer");

    GLES20.glEnableVertexAttribArray(aPositionLocation);
    checkError("glEnableVertexAttribArray");

    GLES20.glVertexAttribPointer(aTextureCoordLocation, 2, GLES20.GL_FLOAT, false, 8, textureCFB);
    checkError("glVertexAttribPointer");

    GLES20.glEnableVertexAttribArray(aTextureCoordLocation);
    checkError("glEnableVertexAttribArray");

    GLES20.glUniformMatrix4fv(uMVPLocation, 1, false, myMVPMatrix, 0);
    checkError("glUniformMatrix4fv");

    GLES20.glDrawElements(GLES20.GL_TRIANGLES, 6, GLES20.GL_UNSIGNED_SHORT, rectangleISB);
    checkError("glDrawElements");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T10:46:58.630

在 OpenGL ES 2.0 中，每次调用该纹理的参数之后`glBindTexture`和之前`texImage2D`都必须单独指定。

因此，如果有 2 个纹理（如在多重纹理中），那么`glTexParameterf`纹理 1 和 2 将分别需要 4 个，总共 8 个。

# validation - 异常没有为“title”指定表单元素，并且没有从“Spiffy\Zend\Form”自动确定

> ID：10462700
> 
> 赞同：-1
> 
> 时间：2012-05-05T14:17:07.510
> 
> 标签：validation, zend-framework, annotations, doctrine-orm

除了我之前的问题将[zend 过滤器和验证链附加到模型/学说实体](https://stackoverflow.com/questions/10195188/attache-zend-filters-and-validation-chains-to-models-doctrine-entities)中，我尝试了 Spiffy 框架，但我得到了堆栈，但异常如下： Exception No form element was specified for "title" and one not be从“Spiffy\Zend\Form”自动确定。在我的实体中，我有这个：

```
<?php

namespace Entities;
use Doctrine\ORM\Mapping as ORM;
use Spiffy\Doctrine\AbstractEntity as Entity;
use Spiffy\Doctrine\Annotations\Filters as Filter;
use Spiffy\Doctrine\Annotations\Validators as Assert;

/** @ORM\Entity(repositoryClass="Repositories\PostRepository") */
class Post extends Entity {

public function __construct()     
{
    $this->created  = new \DateTime("now");
    $this->comments = new \Doctrine\Common\Collections\ArrayCollection();
}

public function __get($property)
{
    return $this->$property;
}

public function __set($name, $value)
{
    $this->$name = $value;

    return $this->$name;
}

/**
 * @ORM\Id @ORM\Column(type="integer") @ORM\GeneratedValue
 */
private $id;

/**
 * @var string $title
 * @Filter\Alnum
 * @Assert\StringLength(5)
 * @ORM\Column(type="string",length=255) 
 */
private $title;

/**
 * @ORM\Column(type="text")
 */
private $body;

/**
 * @ORM\Column(type="datetime")
 */
private $created;

/**
 * @ORM\OneToMany(targetEntity="Comment", mappedBy="post", fetch="LAZY")
 */
private $comments;
} 
```

我的表格是这样的：

```
 <?php
   use \Spiffy\Zend\Form as Form;
   class Application_Form_Post extends Form
   {

     public function init()
    {

      //var_dump($this->getEntity()); //returns null
      // die;
      $this->add('title');

      $this->add('body');

     $this->addElement('submit', 'submit', array(

    ));

  }
 } 
```

所以我在这里阻止自己。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:12:31.627

在我的 application.ini 中，我注释掉了以下几行：

```
 pluginPaths.Bisna\Application\Resource\ = "Bisna/Application/Resource" 
```

和

```
autoloaderNamespaces[] = Bisna 
```

但我仍然有例外：

```
 Uncaught exception 'ReflectionException' with message 'Class Doctrine\ORM\Mapping\Driver\AnnotationDriver does not exist' in C:\Spiffy\lib\Spiffy\Doctrine\Container.php on line 359 
```

我不清楚的是，在 bisna 资源中我有这样的东西：

```
 \Zend_Registry::set('doctrine', $container); 
```

在我有这样的漂亮资源中：

```
 `Zend_Registry::set('Spiffy_Doctrine', $container);` 
```

但是在我的 Boostrap.php 中，我有这两个：

```
 $this->bootstrap('doctrine');
    $container = $this->getResource('doctrine'); 
```

我被认为是教义和 Spiffy_Doctrine 之间的差异，但事实并非如此。还有一些对我来说是无法理解的。我像这样修改 Spiffy 容器中的一些行：

```
try{
$reflClass = new ReflectionClass($driverClass);
}catch (LogicException $Exception) {
die('Not gonna make it in here...');
}
catch(ReflectionException $Exception)
{
die('Your class does not exist! ' );
} 
```

但我没有发现异常，而是得到了这个：

```
`Uncaught exception 'ReflectionException'` 
```

Ps：很抱歉复制了linekdin学说组的内容，但这些是我的答案。现在我调试我的应用程序，也许我会弄清楚我缺少什么，但任何帮助都会很棒。谢谢你。

# vb.net - 一个MDI表单中可以同时打开多个窗口状态不同的窗口吗？

> ID：10462702
> 
> 赞同：0
> 
> 时间：2012-05-05T14:17:21.797
> 
> 标签：vb.net, visual-studio-2010, windowstate

我做了一个 MDI Winforms 应用程序并注意到我有疑问的行为。

如果其中一个窗体以最大化窗口状态打开，而另一个窗体以正常窗口状态打开，则以前最大化的窗体窗口状态将更改为正常。

一个MDI表单中可以同时打开多个窗口状态不同的窗口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:42:15.303

MDI 只允许一个处于最大化状态的子窗口，即活动窗口。当您使另一个窗口处于活动状态时，它会*强制*此类窗口恢复正常状态，无论该另一个窗口是否最大化。或者换句话说，您不能在最大化的非活动窗口之上拥有处于正常状态的活动窗口。没有解决方法。

# jquery - Jquery Cycle 插件 + 视频

> ID：10462709
> 
> 赞同：0
> 
> 时间：2012-05-05T14:17:55.960
> 
> 标签：jquery, jquery-cycle

我正在处理 Chrome 中的一个 jcycle 错误。我有一个 jcycle 旋转器设置来旋转一个投资组合的 youtube 视频。问题是当在 Chrome 中加载或刷新页面时，应该隐藏的视频之一显示在左上角。当我从常见问题解答中实施 display none 修复时，它会永久隐藏除第一个视频以外的所有视频。请参阅下面的示例。任何帮助将不胜感激。谢谢！

WITHOUT Display none 修复：（视频在左侧弹出：0 顶部：0） [http://www.tweedstudios.com/!/broadcast.php](http://www.tweedstudios.com/!/broadcast.php)

WITH Display none 修复：（视频永久隐藏） [http://www.tweedstudios.com/!/broadcast2.php](http://www.tweedstudios.com/!/broadcast2.php)

此外，Safari 中还有另一个错误。我确定它与 CSS 相关，但我无法确定它。再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:33:16.587

第二个示例中的 youtube iFrame 设置为 displayLnone。我建议您改用可见性：隐藏，然后在 jquery 循环插件上的事件之前的 jquery 循环中，您可以在幻灯片转换之前将其更改为可见。

[我隐藏的 DIV 中的 Youtube 视频仅在显示 DIV 后才开始加载](https://stackoverflow.com/questions/1156794/the-youtube-video-in-my-hidden-div-only-starts-to-load-after-the-div-is-shown)

[http://jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

# java - 当石英作业触发时，它是一个新的作业类实例吗？

> ID：10462714
> 
> 赞同：13
> 
> 时间：2012-05-05T14:18:44.270
> 
> 标签：java, quartz-scheduler, spring-3, job-scheduling

我对 Quartz 很陌生，我对工作的生命周期有些怀疑。

假设我有一个工作被配置为做一些事情。

作业触发并结束其工作。当它再次触发时，它是同一个实例（可能被调度程序设置为睡眠和唤醒）还是一个新的作业实例（一旦作业结束，它被杀死并且当再次满足触发条件时创建一个新的作业实例） ?

我问这样的问题是因为当我调试我的应用程序（spring 3 mvc 支持石英）时，我会看到作业的新实例和 SimpleThreadPool$WorkerThreadRun() 的新线程，每次触发作业时都会打开 SimpleThreadPool$WorkerThreadRun()线程堆积起来并且永远不会终止。

我只是想知道这种行为是否可以，或者我一定要填满内存；-)

谁能给我一些解释？提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T15:31:55.627

Quartz 每次想要触发该作业时都会创建您的作业类的新实例。假设您有数十万个作业计划非常不频繁地触发 - 将所有这些作业保留在内存中会浪费内存。

但是，如果您使用[Spring 对 Quartz 的支持](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/scheduling.html#scheduling-quartz)，尤其是[`MethodInvokingJobDetailFactoryBean`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/scheduling/quartz/MethodInvokingJobDetailFactoryBean.html)，Spring 将处理您的工作的生命周期（它基本上调用您的一个 bean 的指定方法）。但在您的应用程序中似乎并非如此。

当然在作业完成并且没有其他引用指向它之后（这是正常情况）垃圾收集器最终会释放作业占用的内存）。

最后关于线程 - Quartz 创建一个固定的工作线程池（参见[`org.quartz.threadPool.threadCount`](http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/ConfigThreadPool)配置选项）。每次运行作业时，Quartz 可能会决定使用不同的线程——但它不会为每个触发器创建新线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T16:08:36.113

我将写 2.1.5 版（最新版本），但其他版本也可能如此。

[Job](http://quartz-scheduler.org/api/2.1.5/org/quartz/Job.html) - 由具有“newJob”功能的“JobFactory”的某些实例创建的（例如[SimpleJobFactory](http://quartz-scheduler.org/api/2.1.5/org/quartz/simpl/SimpleJobFactory.html)）。调用 JobRunShell 类的“initialize”方法中执行的“newJob [”](http://quartz-scheduler.org/api/2.1.5/org/quartz/core/JobRunShell.html)。[JobRunShell - 对象保存在“](http://quartz-scheduler.org/api/2.1.5/org/quartz/core/JobRunShell.html) [QuartzSchedulerThread](http://quartz-scheduler.org/api/2.1.5/org/quartz/core/QuartzSchedulerThread.html) .run”的局部变量中，不存储在任何其他列表或字段中。

因此，为每个触发时间创建新的[Job](http://quartz-scheduler.org/api/2.1.5/org/quartz/Job.html)实例，执行后它将被垃圾收集器正常清理。

# javascript - 使用 DayLightSaving 的 getTimezoneOffset()

> ID：10462718
> 
> 赞同：1
> 
> 时间：2012-05-05T14:19:12.177
> 
> 标签：javascript, timezone

有没有办法让这个函数通过考虑夏令时返回时区偏移量？

例如，我们在罗马尼亚，比格林威治标准时间（伦敦时间）早 2 小时。但此函数返回 -180（-3 小时）而不是 -120（-2 小时）。

[http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp](http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp)

谢谢你，乔治·佩切尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:28:29.710

看看[http://www.codeproject.com/Articles/58728/JavaScript-code-to-determine-when-DayLight-Savings](http://www.codeproject.com/Articles/58728/JavaScript-code-to-determine-when-DayLight-Savings)，听起来你正在寻找类似的东西。如果不让我知道，我会尽力提供更多帮助。

# android - 创建 Android 应用程序的限时试用版

> ID：10462720
> 
> 赞同：2
> 
> 时间：2012-05-05T14:19:13.287
> 
> 标签：android, time-trial

我已经看到很多关于为 Android 应用程序创建有时间限制的试用版的线程，但它们似乎都没有达到我的目的。几天前，我推出了我的应用程序的付费版本，现在我想提供试用版，我不想从任何方面削弱它。所以我想对试用版有时间限制。我为它创建了一个不同的包名称。早些时候我使用 LVL，现在我也使用相同的，除了我创建了新的许可证库并更改了 setValidityTimestamp(extras.get("VT")); 到 setValidityTimestamp(String.valueOf(System.currentTimeMillis() + (5* MILLIS_PER_MINUTE))); 在 ServerManagedPolicy 中。

这样我就可以测试试用版是否可以工作 5 分钟，然后给我许可证错误。我在应用商店发布了它，下载了它，然后发现它仍然可以工作超过 5 分钟。现在我已经取消发布了。有人可以帮助我创建更好的时间限制应用程序，用户可以运行一周（比如说）。此外，他不应该能够卸载并重新安装它，然后再次永久使用它。我知道我是否可以将信息写入某个外部文件，但是可以再次从 sd 卡中删除该文件，并且可以使用户终身免费访问应用程序。

问候潘卡伊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:26:47.963

在 LVL 的当前功能以及用户对普通手机的控制程度范围内，如果没有服务器端组件，目前没有办法做到这一点。卸载您的应用程序后，所有痕迹（如您所指出的，您可能写入 SD 卡的文件除外，这些文件是用户可见的）都将被删除，因此检查卸载/重新安装的唯一方法是生成一个一致的、特定于设备的标识符，并与服务器组件核对，该组件要么拒绝重新安装，要么接受它作为新的计时试验。即使这也可能被专门的客户欺骗（取决于服务器端组件的行为），因此您需要设计您的软件，以便您的服务器端组件是流程的必要部分（即它不仅仅是许可证检查，它实际上是应用程序功能的一部分）。

如果您想出一些可行的方法，我很想听听，但我会说您不走运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:57:22.477

@Femi 是对的，您需要一个服务器端组件才能始终工作。我倾向于只发布免费版本，而用户则以应用内购买的形式购买完整版本。IAP 服务器是您的服务器端检查用户是否购买了升级。您可以在首次使用时存储首选项，以了解用户何时开始使用该应用程序。如果用户卸载并再次安装您的应用程序，他们将获得一个新的试用期，但这很烦人，很少有人会为了节省几块钱而这样做。如果您在应用程序中添加一条消息，要求用户升级，或者在升级后删除广告，那么这是一个足够好的解决方案。

# android - Android：WebView 中的 Twitter - 通过回调返回 Activity

> ID：10462721
> 
> 赞同：1
> 
> 时间：2012-05-05T14:19:16.597
> 
> 标签：android, twitter, android-activity, webview, back

我尝试创建 Twitter 客户端，现在我通过 OAuth 协议处理授权。我已经创建了“登录”按钮来进入 WebView 并加载 twitter 授权 URL，这是工作。但是，当授权被成功接受并且 Twitter 服务将我重定向到我的回调时，我在 WebView 中收到错误网页。也就是说我没有重定向到我的活动，我仍然停留在 WebView 中。但是如果通过浏览器尝试相同的方式，它就可以工作。那是什么问题？

主要活动：

```
 public class Twitter extends Activity implements OnClickListener {

    Button bSignIn;
    TextView status;
    private OAuthConsumer consumer;
    private OAuthProvider provider;
    private String url;
    final String TAG = getClass().getName();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);

        bSignIn = (Button) findViewById(R.id.bSignIn);
        status = (TextView) findViewById(R.id.tvStatus);
        bSignIn.setOnClickListener(this);
    }

    public void onClick(View v) {
        new OAuthWebViewProcess().execute();
    }

    public class OAuthWebViewProcess extends AsyncTask<Void, Void, Void> {
        ProgressDialog dialog;

        protected void onPreExecute() {
            dialog = ProgressDialog.show(Twitter.this, null,
                    "Connecting, please wait...");
        }

        protected Void doInBackground(Void... params) {
            try {
            consumer = new CommonsHttpOAuthConsumer(Constants.CONSUMER_KEY,
                    Constants.CONSUMER_SECRET);
            provider = new CommonsHttpOAuthProvider(Constants.REQUEST_URL,
                    Constants.ACCESS_URL, Constants.AUTHORIZE_URL);
            url = provider.retrieveRequestToken(consumer,
                        Constants.OAUTH_CALLBACK_URL);
            } catch (Exception e) {
                Log.e(TAG, "Error during OAUth retrieve request token", e);
            }
            return null;
        }

        protected void onPostExecute(Void result) {
            //Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            Intent i = new Intent(Twitter.this, TwitterWebView.class);
            i.putExtra("url", Uri.parse(url).toString());
            startActivityForResult(i, 1);
            dialog.dismiss();
        }
    }
} 
```

Twitter 的 Web 视图：

```
 public class TwitterWebView extends Activity {

    String url;
    WebView TwitterWebView;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.twitterwebview);

        Bundle extras = getIntent().getExtras();
        url = extras.getString("url");

        try {
            TwitterWebView = (WebView) findViewById(R.id.wvTwitter);
            TwitterWebView.setWebViewClient(new TwitterWebViewClient(){
                public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    view.loadUrl(url);
                    return true;
                }
            });
            TwitterWebView.getSettings().setJavaScriptEnabled(true);
            TwitterWebView.getSettings().setDomStorageEnabled(true);
            TwitterWebView.getSettings().setSavePassword(false);
            TwitterWebView.getSettings().setSaveFormData(false);
            TwitterWebView.getSettings().setSupportZoom(false);
            TwitterWebView.loadUrl(url);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="wixanz.app.twitter"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Twitter"
        android:label="@string/app_name"
        android:launchMode="singleInstance" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".TwitterWebView"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.BROWSABLE" />
        </intent-filter>
    </activity>
    <activity
        android:name=".TweetList"
        android:label="TweetList"
        android:launchMode="singleInstance" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="callback"
                android:scheme="twitter" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:38:34.213

我对 LinkedIn、Foursquare 等其他网络也做了同样的事情。但是，我没有使用回调 URL，而是覆盖了[`shouldOverrideUrlLoading (WebView view, String url)`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)WebViewClient（用于显示登录页面）中的方法，以自己捕获访问令牌和令牌机密（如果需要）。

# facebook - 无需征求许可即可区分 facebook 用户

> ID：10462723
> 
> 赞同：0
> 
> 时间：2012-05-05T14:19:58.790
> 
> 标签：facebook

在 facebook 应用程序中，是否有可靠的方法确保每个 facebook 用户只能执行一次给定操作，而不要求用户授权应用程序？

从文档的外观和对[这个问题](https://stackoverflow.com/questions/9900437/get-facebook-uid-in-page-tab-without-asking-for-permission)的积极回应来看，我认为这是不可能的，但我被告知不利 - 没有实际细节。

所以我需要知道：

*   有什么办法可以做到这一点？

    或（如果不是）：

*   是否有任何资源明确指出这是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:57:55.660

您能否提供一个更详细的示例来说明您正在尝试做什么以及您尝试使用哪种语言？

如果您能够像在朋友、点赞或事件关系中一样通过可索引字段访问 user_id，您可以将 user_ids 存储在您自己的数据库中，因为他们在您的页面中执行操作。如果他们已经执行过一次操作，您只需向用户发送一条消息并删除刚刚发生的任何操作。您可以在 fql 文档中找到所有可索引字段。

如果您想从您的应用中出现的随机用户那里获取 id，他们需要先授权您的应用，然后您才能访问他们的信息。

我在 FB 上看到了一些诈骗应用程序，一旦登录用户访问他们的页面，它们就会设法获得用户权限。这些违反了 TOS，很可能会在报告后立即被删除，并且他们的管理员被禁止。

# java - JTextArea 中特定文本的 ActionListener？

> ID：10462725
> 
> 赞同：5
> 
> 时间：2012-05-05T14:20:35.033
> 
> 标签：java, swing, events, mouseevent, jtextarea

我的应用程序中有一个聊天组件，`JTextArea`上面有一个。现在，如何为特定文本（如 student://xxxx）添加类似 ActionListener 的事件？

因此，当我单击该文本 (student://xxxx) 时，会发生一些事情。谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T15:09:55.413

这里试试这个小程序，尝试点击student://开头，会弹出一个消息Dialog

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TextAreaExample extends JFrame
{
    private JTextArea tarea =  new JTextArea(10, 10);
    private JTextField tfield = new JTextField(10);

    private void createAndDisplayGUI()
    {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        tarea.setText("Hello there\n");
        tarea.append("Hello student://");
        JScrollPane scroll = new JScrollPane(tarea);

        tfield.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                tarea.append(tfield.getText() + "\n");
            }
        });

        tarea.addMouseListener(new MouseAdapter()
        {
            public void mouseClicked(MouseEvent me)
            {
                int x = me.getX();
                int y = me.getY();
                System.out.println("X : " + x);
                System.out.println("Y : " + y);
                int startOffset = tarea.viewToModel(new Point(x, y));
                System.out.println("Start Offset : " + startOffset);
                String text = tarea.getText();
                int searchLocation = text.indexOf("student://", startOffset);
                System.out.println("Search Location : " + searchLocation);
                if (searchLocation == startOffset)
                    JOptionPane.showMessageDialog(TextAreaExample.this, "BINGO you found me.");
            }
        });

        getContentPane().add(scroll, BorderLayout.CENTER);
        getContentPane().add(tfield, BorderLayout.PAGE_END);
        pack();
        setLocationByPlatform(true);
        setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new TextAreaExample().createAndDisplayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T14:25:46.590

不，甚至不要考虑这一点，因为 ActionListeners 用于 JButtons 或从 AbstractButton 派生的任何其他东西，但不适用于 JTextComponents（JTextFields 除外）。也许你想要一个 MouseListener。

话虽如此，也许您最好使用两个文本组件，一个用于显示所有响应（包括用户的响应）的 JTextArea，以及在此位置下方的 BorderLayout.SOUTH 类型的位置，一个允许用户在其中输入文本的 JTextField聊天。然后给那个 JTextField 一个 ActionListener（这是合法的），这样“enter”就会启动监听器。

**编辑 1**
您声明：

> 好吧，我有那个 jtextfield ，其中的文本被发送到服务器，服务器将消息发送到出现在 JTextArea 中的所有客户端。但我的问题在这里：当有人点击 student://id text 时，我想弹出一个窗口。

是的，看看您的评论，我的投票是让您不在 JTextArea 中而是在 JList 中显示聊天，其中一个带有 SelectionListener。然后，您可以轻松地响应鼠标单击事件，并且可以更轻松地从单击的“行”中获取有用的信息（如果您使用智能对象填充 JList）。您将需要编写一个允许显示多行文本的自定义单元格渲染器，可能会显示一个 JTextArea，但 JLists 上的教程将帮助您入门。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T14:58:31.177

是按 ENTER 而不是单击鼠标好吗？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class StudentID extends JFrame implements ActionListener
{
    private static final String progname = "StudentID 0.1";

    private JTextField student;
    private JTextArea feedback;
    private JButton exit;

    public StudentID ()
    {
        super (progname);
        JPanel mainpanel = new JPanel ();
        mainpanel.setLayout (new BorderLayout ());
        this.getContentPane ().add (mainpanel);

        student = new JTextField ("student://");
        exit = new JButton ("exit");
        student.addActionListener (this);
        exit.addActionListener (this);
        feedback = new JTextArea ();
        mainpanel.add (student, BorderLayout.NORTH);
        mainpanel.add (feedback, BorderLayout.CENTER);
        mainpanel.add (exit, BorderLayout.SOUTH);

        setSize (400, 400);
        setLocation (100, 100);
        setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        setVisible (true);
    }

    public void actionPerformed (final ActionEvent e)
    {
        SwingWorker worker = new SwingWorker () 
        {
            protected String doInBackground () throws InterruptedException 
            {
                String cmd = e.getActionCommand ();
                if (cmd.equals ("exit"))
                {
                    System.exit (0);
                }
                else if (cmd.matches ("student://[0-9]+")) 
                {
                    feedback.setText ("student found: " + cmd.replaceAll ("student://([0-9]+)", "$1"));
                }
                else
                {
                    feedback.setText ("cmd: " + cmd);
                }
                return "done";
            }
            protected void done () 
            {
                feedback.setText (feedback.getText () + "\ndone");
            }
        };
        worker.execute ();
    }

    public static void main (final String args[])
    {
        Runnable runner = new Runnable () 
        {
            public void run () 
            {
                new StudentID ();
            }
        };
        EventQueue.invokeLater (runner);
    }
} 
```

# iphone - iPhone iOS 如何将文本从 UITextView 导出到文本文件以进行跨平台编辑？（Mac、PC、iPhone 等）

> ID：10462728
> 
> 赞同：1
> 
> 时间：2012-05-05T14:20:56.323
> 
> 标签：iphone, objective-c, ios, export, uitextview

我想让我的应用程序的用户导出他们输入到 UITextView 中的文本。我正在考虑这样做：

```
NSString* string = @"This is the user's text";
[string writeToFile:@"string.txt" atomically:YES];
//then get the file and attach it to email 
```

理想情况下，用户能够将 UITextView 的内容导出到 Dropbox，然后在任何计算机上编辑该文件，并且仍然能够在 UITextView 中对其进行编辑，从而查看来自其他计算机的所有更改。

**关于保存文本，我有什么需要了解的，以便它在 PC、Mac、iPhone 等上显示相同吗？我需要指定一些编码吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:39:12.400

我会使用`writeToFile:atomically:encoding:error:`并指定`NSUTF8StringEncoding`. 参考[这里](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/writeToFile%3aatomically%3aencoding%3aerror%3a)。

除了编码之外，唯一可以改变的是行尾（通常是旧 Mac OS 的 CR，Mac OS X 和其他 Unix/Linux 的 LF，以及 Windows 的 CR+LF）。但是，任何合理的文本编辑器都应该可以毫无问题地处理其中的任何一个，因此您可能无需担心。

# ios - 如何从 iOS 中系统字体的 CGFontRef 创建 FT_Face？

> ID：10462731
> 
> 赞同：2
> 
> 时间：2012-05-05T14:21:17.943
> 
> 标签：ios, c, freetype

在 iOS 中，你不知道字体文件的路径（我的意思是，虽然你可以在 /System 的某个地方看到它们，但没有 API 可以让你获取字体的路径，它们将来可能会改变），访问字体就是它的名字，例如。`[UIFont fontWithName...]`等`CGFontCreateWithFontName`。

我需要在我的项目中使用 FreeType，并且我想将其转换`CGFontRef`为`FT_Face`，但如上所述，我无法获取字体的文件路径，所以我想知道是否有某种方法可以创建`FT_Face`from `CGFontRef`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T08:46:12.567

我找到了解决方案。读出 的表格`CGFontRef`以形成字体，并将数据用于`FT_Face`. 在这里查看：[https](https://gist.github.com/1892760) ://gist.github.com/1892760 。

# windows - C# Windows 应用程序-将变量传递给按钮单击函数

> ID：10462733
> 
> 赞同：0
> 
> 时间：2012-05-05T14:21:28.133
> 
> 标签：windows, button, click

如何在按钮单击事件中使用我在 Form() 函数中定义的变量？

```
public Form2(string a, string b)
    {
        int something=4;
        int something=5;
    }

public void hButton_Click(object sender, EventArgs e)
    {

    } 
```

我想在那个 gButton_Click 事件中使用变量 something 和 something2。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:25:14.877

```
class Form2 {
    int something, something;
    public Form2(string a, string b) {
        something=4;
        something=5;
    }
    public void hButton_Click(object sender, EventArgs e) {
         // example: MessageBox.Show(something.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:25:23.360

您不能使用您编写的代码，因为“某物”变量仅存在于 form2() 函数的范围内。如果您将它们声明为类变量，那么您将能够在按钮单击函数中访问它们。所以像这样：

```
class form2 
{
    int something;

    public Form2(string a, string b)
    {
        something=4;
        something=5;
    }

    public void hButton_Click(object sender, EventArgs e)
    {
        //now you can access something in here
    }
} 
```

# algorithm - 图 - 单源最长路径的 Dijkstra

> ID：10462736
> 
> 赞同：12
> 
> 时间：2012-05-05T14:21:49.133
> 
> 标签：algorithm, data-structures, graph, dijkstra

好的，由于这个练习，我发布了这个问题：

> 我们可以修改 Dijkstra 算法，通过将最小值变为最大值来解决单源最长路径问题吗？如果是这样，那么证明你的算法是正确的。如果不是，请提供一个反例。

对于这个练习或与 Dijkstra 算法相关的所有事情，**我假设图中没有负权重**。否则，它没有多大意义，因为即使对于最短路径问题，如果存在负边缘，Dijkstra 也无法正常工作。

* * *

好的，我的直觉为我回答了这个问题：

是的，我认为它可以修改。

我只是

1.  将距离数组初始化为 MININT
2.  更改`distance[w] > distance[v]+weight`为`distance[w] < distance[v]+weight`

* * *

然后我做了一些研究来验证我的答案。我找到了这篇文章：

[DAG 中从源到某些节点之间的最长路径](https://stackoverflow.com/questions/598174/longest-path-between-from-a-source-to-certain-nodes-in-a-dag)

首先，由于上面的帖子，我认为我的答案是错误的。但是我发现上面帖子中的答案可能是错误的。它将**单源最长路径问题**与**最长路径问题**混为一谈。

[同样在Bellman-Ford algorithm](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)的 wiki 中，它正确地说：

> Bellman-Ford 算法计算加权有向图中的单源最短路径。**对于只有非负边权重的图，更快的 Dijkstra 算法也解决了这个问题**。因此，Bellman-Ford 主要用于具有负边权重的图。

所以我认为我的答案是正确的，对吧？Dijkstra 真的可以是*单源*最长路径问题，我的修改也是正确的，对吧？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T14:25:23.330

不，我们不能¹ - 或者至少，没有多项式减少/修改是已知的 -[最长路径问题](http://en.wikipedia.org/wiki/Longest_path_problem)是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)，而 dijkstra 在多项式时间内运行！

如果我们可以找到对 dijsktra 的修改以在多项式时间内回答最长路径问题，我们可以推导出`P=NP`

> 如果不是，请提供一个反例。

这是一个非常糟糕的任务。反例可以提供一个特定的修改是错误的，而可能有一个不同的修改是好的。
事实是我们不知道最长路径问题是否可以在多项式时间内解决，但一般假设是 - 它不是。

* * *

关于仅仅改变松弛步骤：

```
 A
       / \
      1   2
     /     \
    B<--1---C
edges are (A,B),(A,C),(C,B) 
```

来自 A 的 dijkstra 将首先选择 B，然后 B 永远无法到达 - 因为它不在`distances`.

至少，还必须将最小堆更改为最大堆，但它会有一个不同的反例为什么它会失败。

* * *

(1) 可能，如果 P=NP 有可能，但可能性很小。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T14:45:27.390

我们可以。你的答案几乎是正确的。除了一件事。

你假设**没有负权重**。在这种情况下，Dijkstra 算法无法找到最长路径。

但是如果你**只假设负权重**，你可以很容易地找到最长的路径。为了证明正确性，只需取所有权重的绝对值，就可以得到具有正权重的通常 Dijkstra 算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-13T18:13:32.317

它适用于有向无环图，但不适用于循环图。由于路径将返回轨道，并且在 dijkstra 的算法中无法避免这种情况

# python - Python sqlite fetchmany 和 fetchall 返回有序结果

> ID：10462737
> 
> 赞同：1
> 
> 时间：2012-05-05T14:22:00.197
> 
> 标签：python, sqlite, fetchall

我注意到 Python sqlite fetchall() 和 fetchmany() 语句以排序键顺序而不是原始键顺序返回结果。例如，考虑：

```
list_indexes = [9, 5, 2, 8, 3, 7]

indexsize = len(list_indexes)
cursor.arraysize = indexsize

cursor.execute("select index, details from this_table where index in (%s)" % ','.join('?' * len(list_indexes)), list_indexes)
rows = cursor.fetchmany(indexsize) 
```

返回的行顺序是按排序的键顺序 [2, 3, 5, 7, 8, 9]。

我错过了什么还是这是默认行为？如果是这样，除了按参数索引重新排序行的明显方法之外，是否还有其他解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:41:39.827

这是正常行为。除非您`ORDER BY`在查询中指定，否则结果中的行顺序是未定义的。如果您有一些可用于排序的字段（例如日期），您应该使用它。

您可以使用临时表来执行您想要的操作：

```
; prepare test table
CREATE TABLE this_table (`index` INTEGER, record_details TEXT);
INSERT INTO this_table VALUES (1, 'a1');
INSERT INTO this_table VALUES (2, 'a2');
; ...
INSERT INTO this_table VALUES (10, 'a10');

; do the query
CREATE TEMP TABLE good_indexes(number INTEGER, i integer);
INSERT INTO good_indexes(number, i) VALUES (1, 4);
INSERT INTO good_indexes(number, i) VALUES (2, 2);
INSERT INTO good_indexes(number, i) VALUES (3, 6);

SELECT record_details FROM this_table, good_indexes 
WHERE good_indexes.i = this_table.`index` ORDER BY good_indexes.number;
; result: a4, a2, a6

DROP TABLE good_indexes; 
```

# javascript - Twitter Bootstrap Carousel 使用 Joomla 及其 Mootools

> ID：10462747
> 
> 赞同：6
> 
> 时间：2012-05-05T14:22:40.133
> 
> 标签：javascript, mootools, twitter-bootstrap, joomla2.5

我正在使用 Twitter Bootstrap 为 Joomla 2.5.x 制作模板。我还想为该模板使用 Bootstrap Carousel 插件。

当旋转木马与 Joomla 的 Mootools 实现一起使用时，我遇到了一个问题。Carousel 元素的样式被更改为负边距，使其对用户不可见。为了向您准确展示发生了什么，我为您准备了一个 jsfiddle [http://jsfiddle.net/U2pHH/11/](http://jsfiddle.net/U2pHH/11/)。

由于 Carousels 更改样式属性，Carousel 使用户看不到每一秒图像，但用户应该看到每张幻灯片。

我已经查看了 Carousel Plugin 和 Mootools JS Files 的源代码，但遗憾的是无法找出问题的原因。我想这可能是 jQuery 和 Mootools 之间的函数/类的一些命名问题，但在那里找不到任何问题。

我希望你能在这里帮助我。

编辑：我发现它与 mootools-more.js 的 Fx.Slide 类有关，从源代码中删除该类解决了问题。但这仍然没有真正的解决方案，仍然非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T01:13:43.777

这是特定于 Joomla 和 mootools 的修复程序更多，

在 jq 调用后添加此代码，它可以在任何 js 文件中

添加

```
if (typeof jQuery != 'undefined') { 
(function($) { 
       $(document).ready(function(){
        $('.carousel').each(function(index, element) {
                $(this)[index].slide = null;
               });
         });
 })(jQuery);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T13:03:04.740

Benn 提供的同一事物的另一种实现是

```
if (typeof jQuery != 'undefined' && typeof MooTools != 'undefined' ) {
    Element.implement({
        slide: function(how, mode){
            return this;
        }
    });
} 
```

我最终得到了什么——我创建了**自定义** *Mootools More*构建**而没有** *Fx.Slide*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T09:19:07.457

问题是 Mootools 更多地与 twitter 引导程序发生冲突，这就是为什么它在轮播中表现得很奇怪。我建议你只使用 jQuery 或 Mootools。这里有一个引导 Mootools 实现：[https ://github.com/anutron/mootools-bootstrap](https://github.com/anutron/mootools-bootstrap)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T10:07:05.060

有同样的问题。我正在使用一个名为 JB Library ( [http://www.joomlabamboo.com/joomla-extensions/jb-library-plugin-a-free-joomla-jquery-plugin](http://www.joomlabamboo.com/joomla-extensions/jb-library-plugin-a-free-joomla-jquery-plugin) ) 的插件，它有删除 Mootools 和/或的选项Mootools 来自管理员的更多信息。关闭“关闭”Mootools More 后，Carousel 的问题已“修复”。可能比评论更新内容更容易解决。当然，除非您需要 mootools-more.js 来获取网站上的其他内容。

希望很快会有更好的解决方案出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T10:49:20.603

有同样的问题：Bootstrap carousel 在注册的前端没有工作，因为加载了 mootools-more.js。

我的解决方案：Jquery Easy Plugin ( [http://www.simplifyyourweb.com/index.php/downloads/category/8-loading-jquery](http://www.simplifyyourweb.com/index.php/downloads/category/8-loading-jquery) ) 在 Advanced Options 下带有“Remove Mootools when possible”选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-16T10:34:36.133

```
 (function($)
{
    $(document).ready(function(){
        var bootstrapLoaded = (typeof $().carousel == 'function');
        var mootoolsLoaded = (typeof MooTools != 'undefined');
        if (bootstrapLoaded && mootoolsLoaded) {
            Element.implement({
                hide: function () {
                    return this;
                },
                show: function (v) {
                    return this;
                },
                slide: function (v) {
                    return this;
                }
            });
        }
    });
})(jQuery); 
```

# php - Preg_Match 返回未知修饰符“C”错误

> ID：10462753
> 
> 赞同：1
> 
> 时间：2012-05-05T14:23:34.517
> 
> 标签：php, regex, preg-match

我是正则表达式的新手，正在尝试使用 preg_match 查找字符串，这是我的代码：

```
$artist = $row['ARTIST'];
$bool = preg_match("/$artist/", $description, $match); 
```

我的错误是：

```
Unknown modifier 'C' in ... 
```

如果有人能告诉我我做错了什么，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:26:45.547

您必须转义变量中可能的特殊字符：

```
$bool = preg_match('/' . preg_quote($artist, '/') . '/', $description, $match); 
```

[PHP 手册中的 preg_quote()](http://php.net/manual/en/function.preg-quote.php)：

> preg_quote() 接受 str 并在作为正则表达式语法一部分的每个字符前面放置一个反斜杠。如果您有一个需要在某些文本中匹配的运行时字符串并且该字符串可能包含特殊的正则表达式字符，这将非常有用。

**提示：**尝试回显你的`$artist`变量，你应该看到哪个字符导致了问题

# php - 如何使用 preg_match 获取图像 url

> ID：10462754
> 
> 赞同：-2
> 
> 时间：2012-05-05T14:23:37.593
> 
> 标签：php

我想用来`preg_match`从另一个页面抓取图像 URL，但问题是我的 PHP 代码总是返回一个空结果！我是 php 新手。

这是该页面上图像的结构...

```
<a class="prs_link" href="xxxx"><img src="THE IMAGE URL I WANT TO GET" width="310" height="196"></a> 
```

我目前的代码是：

```
preg_match_all('/a class="prs_link" href="([^"]+)"><img src=.+?><\/a>/',$screen,$results); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:48:51.310

您将在此处看到数百个关于 SO 警告编码人员使用正则表达式解析 HTML 的问答。这些评论/答案是有充分理由的，所以请遵守这一点并避免寻找正则表达式解决方案来解析 HTML。

这是解析 HTML 的一种推荐方式（使用 DOM）：

```
$html = '<a class="prs_link" href="xxxx"><img src="THE IMAGE URL I WANT TO GET" width="310" height="196"></a>';
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($html); // loads your html
$xpath = new DOMXPath($doc);
$src = $xpath->evaluate("string(//a[@class='prs_link']/img/@src)");
echo "src=[$src]\n"; 
```

### 输出：

```
src=[THE IMAGE URL I WANT TO GET] 
```

# intellij-idea - 重命名空包？

> ID：10462756
> 
> 赞同：1
> 
> 时间：2012-05-05T14:24:04.447
> 
> 标签：intellij-idea

如何在 IDEA 11 中重命名空包名称？我只能重命名其中包含文件的包。

例如，我有一个`com.example.test`带有 subfolder的包`parser.xml`。如何重命名`parser`文件夹？按`Ctrl+F6`只会让我重命名`xml`文件夹。

PS。如果我打开系统的文件管理器并在其中重命名文件夹会怎样？IDEA 会正确处理这种重命名吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:45:22.243

单击 Project 视图中的齿轮图标并禁用**Compact Empty Middle Packages**选项。这样，项目文件夹将在树中表示，其中每个子文件夹都是一个单独的节点，因此您可以单独重命名它们。

> PS。如果我打开系统的文件管理器并在其中重命名文件夹会怎样？IDEA 会正确处理这种重命名吗？

不，IDEA 不会将此类重命名作为重构处理，也不会更新任何引用。

# iphone - 如何将 UIImageView 添加到邮件中？

> ID：10462770
> 
> 赞同：-1
> 
> 时间：2012-05-05T14:25:59.507
> 
> 标签：iphone, objective-c, sdk

如何将图像添加到动态添加到 uiimageview 的邮件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:31:58.523

```
- (void)sendMailWithImage:(UIImage *)image
{
if([MFMailComposeViewController canSendMail]) {
MFMailComposeViewController *mailController = [[MFMailComposeViewController alloc] init];
if(mailController!=nil) {
mailController.mailComposeDelegate = self;
NSData *imageData = UIImagePNGRepresentation(image);
[mailController addAttachmentData:imageData mimeType:@"image/png" fileName:@"MyImageName"];
[mailController setSubject:yourSubject];
[mailController setMessageBody:yourBody isHTML:NO];
[self presentModalViewController:mailController animated:YES];
[mailController release];
}
else
{
//Do something like show an alert
}
} 
```

还阅读此以获得更多帮助

[http://mobiledevelopertips.com/email/how-to-send-email-with-attachments-example-using-iphone-camera-to-email-a-photo.html](http://mobiledevelopertips.com/email/how-to-send-email-with-attachments-example-using-iphone-camera-to-email-a-photo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:31:38.133

如果您使用的是 MFMailComposeViewController，则可以使用该视图控制器的此方法：

> addAttachmentData:mimeType:fileName：将指定的数据作为附件添加到消息中。
> 
> -(void)addAttachmentData:(NSData*)attachment mimeType:(NSString*)mimeType fileName:(NSString*)filename
> 
> 参数
> 
> *   附件
> 
> 要附加的数据。通常，这是您要包含的文件的内容。此参数不得为 nil。
> 
> *   哑剧类型
> 
> 指定数据的 MIME 类型。（例如，JPEG 图像的 MIME 类型是 image/jpeg。）有关有效 MIME 类型的列表，请参阅[http://www.iana.org/assignments/media-types/](http://www.iana.org/assignments/media-types/)。此参数不得为 nil。
> 
> *   文件名
> 
> 与数据关联的首选文件名。这是将文件传输到其目的地时应用到文件的默认名称。文件名中的任何路径分隔符 (/) 字符在传输之前都将转换为下划线 (_) 字符。此参数不得为 nil。
> 
> 讨论
> 
> 此方法在消息正文之后但在用户签名之前附加指定的数据。您可以附加多个文件（使用不同的文件名），但必须在显示邮件撰写界面之前这样做。将界面呈现给用户后不要调用此方法。

# python - 如何在 Python 中修改 dbf 文件

> ID：10462771
> 
> 赞同：4
> 
> 时间：2012-05-05T14:26:00.257
> 
> 标签：python, dbf

假设我在根目录下的某些文件夹中有不同数量的 dbf 文件，`d:\myfolder`. dbf 文件的内容如下所示：

```
Field1 
11110481123
12150480021
... 
```

我想添加一个`Field1`仅包含`Field2`.

```
Field1          Field2
11110481123     1123
12150480021     0021
...             ... 
```

然后，我想删除`Field1`.

如何为分散在 Python 中不同文件夹中的所有 dbf 文件完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T14:44:45.170

您需要`dbf`通过 pypi ( `pip install dbf`) 调用的模块。以下是如何从表中添加和删除字段的片段：

```
import dbf

table = dbf.Table('t1', 'field1 N(12, 0)')
for record in ((11110481123,), (12150480021,)):
    table.append(record)
table.close()

# extend the existing table
dbf.add_fields('t1', 'field2 N(4, 0)')

table = dbf.Table('t1')
records = table.sql('select *')
for record in records:
    record.field2 = int(str(record.field1)[-4:])
table.close()

dbf.delete_fields('t1', 'field1') 
```

尽管仅遍历第一个字段并对其进行更改以存储其值的最后 4 位数字会减少计算量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-31T00:26:03.727

使用上面提到的[dbf 库](https://pypi.python.org/pypi/dbf)（加上我的另一个库[antipathy](https://pypi.python.org/pypi/antipathy)），这些是（*大致*）您将采取的步骤：

```
# untested

import dbf
from antipathy import Path

for path, dirs, files in Path.walk('.'):
    files = [f for f in files if f.ext == '.dbf']
    for db in files:
        if I_want_to_change_this_table(db):
            with dbf.Table(db) as db:
                db.add_fields('Field2 C(4)')
                for record in db:
                    dbf.write(Field2=record.Field1[-4:])
                db.delete_fields('Field1')
                db.pack() 
```

`I_want_to_change_this_table()`如果您不想更改每个表，只需更改其中的一些表，这是您提供的功能。如果您想更改它们，您可以删除该行。

# objective-c - 在 UIImageVIew 中显示部分 UIImage

> ID：10462774
> 
> 赞同：3
> 
> 时间：2012-05-05T14:26:24.330
> 
> 标签：objective-c, uiimageview, uiimage

这个问题可能已经得到解答，但经过数小时的谷歌搜索，我找不到解决问题的方法。

我`UIImageView`在**自定义 UITableCell**中有一个`UIImage`（320*320），里面有一个（320*320）。当我点击一个按钮时，`UIImageView`大小调整为 320*80（**动画**）和 UIImage。

我该怎么做才能防止`UIImage`调整大小？我希望它`UIImage`保持不变，并且只显示该图像的一部分（原点为 0/0 的 320*80 帧）

**编辑：裁剪**

我想过将图像裁剪为正确的大小，然后将**UIImageView 的**图像设置为全尺寸图像，但它看起来很难看，因为当用户单击**UIImageView**时，这个仍然是 320*320 但**UIImage**已设置为裁剪后的图像一（320 * 80）所以它被拉伸......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:45:24.140

您可以调整图像大小，然后将 UIImageView 图像替换为调整后的图像。

```
CGImageRef imageToBeResized = yourImage.CGImage;
CGImageRef partOfImageAsCG = CGImageCreateWithImageInRect(imageToBeResized, CGRectMake(0, 0, 320, 80));
CGRelease(imageToBeResized);
UIImage *resizedImage = [UIImage imageWithCGImage:imageToBeResized]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T17:53:07.787

我在我的一个应用程序中做类似的事情，当我创建`UIImageView`对象时，我将属性设置`contentMode`为`UIViewContentModeScaleAspectFill`，并将`clipsToBounds`属性设置为`YES`。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T15:57:19.433

也许你应该考虑在你的 UIImageView 里面使用一个 UIScrollView 。因此，您可以使用其属性来归档所需的行为。

# java - Swing GUI 不更新

> ID：10462775
> 
> 赞同：2
> 
> 时间：2012-05-05T14:26:37.480
> 
> 标签：java, swing, user-interface, concurrency, swingworker

我正在编写一个读取音频、分析这些数据然后实时显示结果的应用程序。目前，我正在使用 SwingWorker 运行启动后台分析的循环，并在每次分析完成时调用循环内的 SwingUtilities.invokeLater 方法来更新 GUI 组件。目前，GUI 似乎在随机更新，有时根本没有。

以下代码显示了我如何尝试完成此操作。TunerListener 是 JPanel 子类的内部类。PrevNote、nextNote、frequency 和 light 变量都是我要更新的 JPanel 子类中的组件：

```
private class TunerListener implements ActionListener {
    private boolean firstUpdate = true;
    private boolean executing = false;
    private TunerWorker tunerWorker = null;

    private final class TunerWorker extends SwingWorker<Void, Void> {

        @Override
        protected Void doInBackground() {
            while (!this.isCancelled()) {

                // Audio analysis in worker thread
                model.update(firstUpdate);

                // Update components in EDT
                if (!this.isCancelled()) {
                    SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                            prevNote.setText(model.getPrev());
                            currentNote.setText(model.getNote());
                            nextNote.setText(model.getNext());
                            frequency.setText("Frequency: "
                                    + model.getFrequency());
                            switch (model.getOffset()) {
                                case -2:
                                    light_2.setIcon(onRed);
                                    light_1.setIcon(off);
                                    light0.setIcon(offBig);
                                    light1.setIcon(off);
                                    light2.setIcon(off);
                                    break;
                                case -1:
                                    light_2.setIcon(off);
                                    light_1.setIcon(onRed);
                                    light0.setIcon(offBig);
                                    light1.setIcon(off);
                                    light2.setIcon(off);
                                    break;
                                case 0:
                                    light_2.setIcon(off);
                                    light_1.setIcon(off);
                                    light0.setIcon(onGreen);
                                    light1.setIcon(off);
                                    light2.setIcon(off);
                                    break;
                                case 1:
                                    light_2.setIcon(off);
                                    light_1.setIcon(off);
                                    light0.setIcon(offBig);
                                    light1.setIcon(onRed);
                                    light2.setIcon(off);
                                    break;
                                case 2:
                                    light_2.setIcon(off);
                                    light_1.setIcon(off);
                                    light0.setIcon(offBig);
                                    light1.setIcon(off);
                                    light2.setIcon(onRed);
                                    break;
                            }
                            firstUpdate = false;
                        }
                    });
                }

            }

            return null;
        }

        @Override
        protected void done() {
        }

    };

    @Override
    public void actionPerformed(ActionEvent ae) {

        if (ae.getActionCommand().equals("tune")) {
            if (!executing) {
                executing = true;
                firstUpdate = true;
                tune.setText("Stop Tuning");
                tunerWorker = new TunerWorker();
                tunerWorker.execute();
            } else {
                tune.setText("Start Tuning");
                executing = false;
                tunerWorker.cancel(true);
            }
        }

    }
} 
```

**编辑** 我注意到，当我使用调试器时，有时我会告诉我找不到源，并且在调试窗口中它会说一些关于 FutureTask$Sync.innerRun 的信息。这会缩小范围吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:18:34.877

作为替代方案，使用此处所示的 的实例[来](https://stackoverflow.com/a/2576909/230513)`javax.swing.Timer`播放所选的，此处[所示](https://stackoverflow.com/a/2065693/230513)。该方法提供异步操作的 a ，并且使得构造 a特别容易。`Start``Stop``Note``play()``SourceDataLine``enum Note``JComboBox`

![笔记](../Images/364e64c17981464d6303974d229e46b9.png)

```
final JComboBox combo = new JComboBox();
for (Note note : Note.values()) {
    combo.addItem(note);
}
combo.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println(combo.getSelectedItem());
    }
});
this.add(combo); 
```

# mysql - 自己的网络服务器上的数据库

> ID：10462778
> 
> 赞同：0
> 
> 时间：2012-05-05T14:26:58.487
> 
> 标签：mysql, database, webserver

我想在我的域（[Strato ）上安装一个数据库，最好是](http://www.strato-hosting.co.uk/)[MySQL](http://dev.mysql.com/downloads/mysql/) ，以使我的数据库可以远程访问。 是否可以？ 有人教程吗？ 我在这方面完全没有经验。我曾经设置的唯一网络服务器是 Apache (XAMPP)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:52:05.420

通常是 apt-get install mysql 或 zypper install mysql。这取决于它安装的Linux。很可能您也可以从源代码构建。然后你需要 gcc 和所有工具。apt-get install gcc 或 zypper install gcc。当您可以透露更多信息时，也许我们可以提供帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:38:15.013

Strato 是一个托管服务提供商。如果您有基本服务，则无法安装或使用 MySQL 数据库。

对于其他级别的服务，请参阅[他们的常见问题解答](http://www.strato-faq.co.uk/746)。

# jquery - $('#div')[0] 中的 '[0]' 是什么意思？

> ID：10462780
> 
> 赞同：0
> 
> 时间：2012-05-05T14:27:44.897
> 
> 标签：jquery

[0] 是什么意思？还有一个参考/手册我可以用来防止问这样的简单问题..

```
 var height = $('.string-parent-container')[0].scrollHeight;
$('.string-parent-container').scrollTop(height); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:28:51.957

表示第一个匹配的元素`$('.string-parent-container')`

`$('.string-parent-container')`返回具有类的元素集合`string-parent-container`。并且`[0]`是具有此类的第一个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:39:09.237

返回 jquery 对象（与 HTMLElement 相对）的另一种方式是：

`$('.string-parent-container:eq(0)')`// 返回该类的第一个对象

这使您可以执行类似的操作

`$('.string-parent-container:eq(0)').show()`

`$('.string-parent-container:eq(0)').addClass('newclass')`

ETC

# java - 是否有移动版的 Java 语言规范？

> ID：10462781
> 
> 赞同：9
> 
> 时间：2012-05-05T14:27:50.520
> 
> 标签：java, kindle, jls

我不确定这是否是绝对最好的提问地点，但我认为这里的答案概率最高（因为主题）。

有没有人遇到过 Java 语言规范的 mobi (Amazon Kindle) 版本？我知道我可以在 Kindle 上阅读 PDF，但与 mobi 相比，它的体验更少。

[http://docs.oracle.com/javase/specs/](http://docs.oracle.com/javase/specs/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-04T09:34:02.920

我用来将 JLS 放入我的 Kindle 的步骤，效果非常好：

1) 在一些站点下载器的帮助下以 HTML 格式下载 JLS。

我使用了 HTTrack（设置：初始 url 是[http://docs.oracle.com/javase/specs/jls/se7/html/index.html](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)，默认的“preferences and mirror options”除了“build”/“local structure type ”，我将其设置为“web/中的html，web/中的图像/其他”）。

结果应该是一个包含 25 个 html 文件、1 个 css 和 1 个图像文件的目录，并且 html 文件中的链接应该被适当地相对化。

2) 编辑 css 文件以删除一些在 Kindle 上看起来不太好的格式（绝对布局、过多的左右边距）。我只是简单地注释掉了“div.chapter div.toc”、“div.chapter”、“ol li”和“ul li”部分，其他所有内容都保持原样。

3）使用Calibre将这组文件转换成mobi。

由此产生的 mobi 流动性很好，到目前为止所有内部链接都按预期工作。

# php - 在 Codeigniter / PHP 中显示类别

> ID：10462782
> 
> 赞同：0
> 
> 时间：2012-05-05T14:27:59.820
> 
> 标签：php, mysql, codeigniter

我正在尝试显示存储在我的数据库中的类别：

[http://dl.dropbox.com/u/16459516/Screen%20shot%202012-05-05%20at%2015.59.40.png](http://dl.dropbox.com/u/16459516/Screen%20shot%202012-05-05%20at%2015.59.40.png)

我的想法是从我的模型中的数据库中获取所有数据，并在我的函数中重建数组：

```
function get_all_categories() {

    $query = $this->db->query('SELECT * FROM categories');

    //code to reconstruct my array like:
    //foreach($query->result_array() as $row) {
        //$categories[$row['niveau_1']] = array[]
    //}

    return $categories;
} 
```

并输出一些数组，如：

```
[0] => Array
       (
       [niveau_1] => main category name
       [niveau_2] => Array(
                        ...children here and children of these childs
                        )
       ) 
```

有谁知道如何做到这一点？我被困在这里，不知道如何创建数组......我知道如何在我的视图中显示它，但让它们进入数组对我来说似乎很难。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:55:51.823

这是一个想法：

1.  foreach 类别（4 级除外）检查它是否存在于结果数组中（`$c`）
2.  如果不是，则使用类别名称的标签创建一个数组
3.  一旦控制类别 2 和 3，您可以在生成的数组中插入最后一个

$query = $this->db->query('SELECT * FROM categories');

```
$raw_categories = $query->result_array();

$c = array();

foreach($raw_categories AS $row)
{
   if(!array_key_exists($row['niveau_2'],$c) && !empty($row['niveau_2']))
   {
      $c[$row['niveau_2']] = array();
   }

   if(!array_key_exists($row['niveau_3'],$c[$row['niveau_2']]) && 
      !empty($row['niveau_3']))
   {
      $c[$row['niveau_2']]['niveau_3'] = array();
   }

   $c[$row['niveau_2']]['niveau_3'][] = $row['niveau_4'];
} 
```

这未经测试，但您可以将其用作一个想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:07:40.783

我认为你的数据库是错误的。据我了解，它是“目录”或类似的（类别、子类别、子子类别等）。“1\. Visie, Beleid...”出现了很多次。

如果我愿意，我会更改数据库：

```
table niveau_1
    id_1 - primary key
    title - string
table niveau_2
    id_2 - primary key
    id_1 - connect to niveau_1 (which niveau_1 is its 'parent')
    title - string
table niveau_3
    id_3 - primary key
    id_2 - connect to niveau_2 (which niveau_2 is its parent)
    title - string 
```

在这种情况下，您的数据库中不会重复元素，我认为您所需的查询会更简单：

```
SELECT
  niveau_1.title AS title_1,
  GROUP_CONCAT(niveau_2.title,"@") AS title_2,
  GROUP_CONCAT(niveau_3.title,"@") AS title_3
FROM niveau_1
LEFT JOIN niveau_2 ON niveau_2.id_1=niveau_1.id_1
LEFT JOIN niveau_3 ON niveau_3.id_2=niveau_2.id_2
GROUP BY niveau_2.id_2 
```

这个查询只是一个半解决方案，它对你来说并不完美，但你可以从这里开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:52:48.050

```
// your model using activerecord
public function getCategories(){
  $q = $this->db->get('categories');
  if($q->num_rows > 0){
    return $q->result();
  }else{
    return false;
  }
}

//your controller
$this->load->model('category_model');
$data['results'] = $this->category_model->getCategories();
foreach($data['results'] as $c){
  //iterate through categories, match them to points.
  //match category_id in results with category_id in the other table results
  //setup a multi dimensional array to build up what you need.
} 
```

# windows-phone-7 - 从特定的 Windows Phone Marketplace 游戏中获取所有评论

> ID：10462783
> 
> 赞同：1
> 
> 时间：2012-05-05T14:28:11.283
> 
> 标签：windows-phone-7, web-crawler, bots, marketplace, app-hub

AppHub 是否能让我们同时查看所有市场对我们应用程序的评论？因为我没有找到，所以花了一些时间编写一些代码将它们全部打印在一个文件中，所以我不会浪费时间在每种语言中寻找它们。

我将不胜感激任何更好的解决方案。在最坏的情况下，我很高兴与任何发现它有用的人分享代码。

它使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)。唯一的参数是应用程序的 id，如下所示：

wp7reviews.py 62289160-6970-4674-85a0-aef3dbe3f93d

这是代码

```
import sys
import getopt
from urllib2 import URLError
from urllib2 import HTTPError
import urllib2
from BeautifulSoup import BeautifulStoneSoup

opts, extraparams = getopt.getopt(sys.argv[1:], '') 
# starts at the second element of argv since the first one is the script name
# extraparms are extra arguments passed after all option/keywords are assigned
# opts is a list containing the pair "option"/"value"
#print 'Opts:',opts
#print 'Extra parameters:',extraparams

try:
    appid = extraparams[0]
except:
    #Awsome Linkit appid as default appid
    appid="62289160-6970-4674-85a0-aef3dbe3f93d"

allreviewsFILE = open("allreviews.txt", "w")

def output(text):
    allreviewsFILE.write(text)
    #print text,

def outputln(text):
    allreviewsFILE.write(text+'\n')
    #print text

def geturl(lang):
    return "http://catalog.zune.net/v3.2/"+lang+"/apps/"+appid
try:

    request = urllib2.Request(geturl("en-us")) 
    fd = urllib2.urlopen(request)
    content = fd.read()
    fd.close()

    soup = BeautifulStoneSoup(content)

    try:
        outputln("App title: "+soup.findAll("a:title")[0].string)
        outputln("");
    except:
        print "Failed to get App Title"

    langs = ["en-us", "en-gb", "de-de",
             "fr-fr", "es-es", "it-it",
             "en-au", "de-at", "fr-be",
             "fr-ca", "en-ca", "en-hk",
             "en-in", "en-ie", "es-mx",
             "en-nz", "en-sg", "de-ch",
             "fr-ch", "zh-hk", "zh-cn",
             "en-hk"]

    outputln("Here we got reviews from each marketplace")
    for lang in langs:
        request = urllib2.Request(geturl(lang)+"/reviews")    
        fd = urllib2.urlopen(request)

        print "Fetching "+lang+"...",
        content = fd.read()
        fd.close()
        print "OK"

        soup = BeautifulStoneSoup(content)
        #print soup.prettify()

        contents = soup.findAll("a:content")
        ratings = soup.findAll("userrating")

        l = len(contents)
        if l > 0:
            outputln("-----------   "+lang+"   ---------------------------------------------------")
            outputln("")
        for i in range(0, l):
            output(ratings[i].string+"/10 - ")
            if len(contents[i].contents) > 0:
                try:
                    outputln(contents[i].contents[0])
                except:
                    outputln("*** Unknown chars ***")
            else:
                outputln("Rating only")
            outputln("")

except HTTPError, e:
    print("Error during request!\n")
    print("Cod.: ", e.code)

except URLError, e:
    print("Invalid URL!\n")
    print("Message: ", e.reason) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:29:56.040

还有一个名为[AppTracker](http://www.windowsphone.com/en-GB/apps/ceb1e261-9909-e011-9264-00237de2db9e)的免费 WP7 应用程序，它允许您跟踪来自不同地区的评论，并将它们翻译成您的母语

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T17:35:21.593

已经有一个网站可以为您提供此信息。看看[http://wp7reviews.tomverhoeff.com/](http://wp7reviews.tomverhoeff.com/)

# java - 如何使用 Eclipse 查找经过的时间/对 Java 方法/代码进行基准测试？

> ID：10462784
> 
> 赞同：1
> 
> 时间：2012-05-05T14:28:12.910
> 
> 标签：java, eclipse

我正在尝试找到一种干净的方法来查找经过的时间。换句话说，我想找出执行给定代码段所需的时间。

我知道以下两种方法：-

1>

```
long start = System.nanoTime();
// Code to measure
long elapsedTime = System.nanoTime() - start; 
```

2>

```
long start = System.currentTimeMillis();
// Code to measure
long elapsedTime = System.currentTimeMillis() - start; 
```

但是这两种方法是肮脏的，因为我必须用我的基准测试代码乱扔原始代码，稍后当基准测试结束时，我将不得不记住删除代码。

我正在寻找一种受 Eclipse/任何其他 IDE 支持的更简洁的方法，在该方法中，我标记了我想要进行基准测试的代码，就像我们指定断点一样，Eclipse 会在到达该部分代码时向我显示经过的时间。

Eclipse/任何其他 IDE 中是否有任何此类方法可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:22:46.303

我推荐 Perf4j perf4j.codehaus.org

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:28:58.497

您可以为代码编写 JUnit 测试。Eclipse 的 JUnit 插件将向您显示运行测试所花费的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:12:16.980

在班级顶部设置一个字段

```
private static final boolean DEBUG_THIS=true; 
```

然后当你有你想使用的线路时，把它们放在这样的地方：

```
if (DEBUG_THIS){
    Log.v("Tag","It took " + System.currentTimeMillis() - start + " ms");
    // perhpas some other debug code
} 
```

然后当你累了或者做完调试的时候，把最上面的那一行代码改一下

```
private static final boolean DEBUG_THIS=false; 
```

您可以将所有调试代码留在原处，如果您再次需要它，并且在运行版本中不会花费您任何费用。

# node.js - 如何在 Heroku 中使用 npm 链接？

> ID：10462787
> 
> 赞同：5
> 
> 时间：2012-05-05T14:28:35.203
> 
> 标签：node.js, heroku, npm

我正在使用此处描述的 npm 链接

[http://npmjs.org/doc/link.html](http://npmjs.org/doc/link.html)

本地一切正常。当我部署到 Heroku 时，我收到错误消息

```
Error: Cannot find module '...' 
```

我怎样才能让这个与 Heroku 一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T00:40:54.460

我希望有一个优雅的解决方案来解决这个问题（它会让我的生活轻松很多）。您的自定义包被符号链接到`node_modules`by `npm link`，但[git 现在不遵循符号链接](https://stackoverflow.com/a/86459/298073)。因此，当您`git push`到 Heroku 时，没有办法让您的自定义包随顺。

但是请注意，根据我的实验，Heroku 将尊重您推送的任何 node_modules，而不是尝试从网络安装它们。它只是运行`npm install --production`，本质上。也许直接指向你的包的开发源的硬链接可以解决问题，但我不确定 Git 是否会很好地使用它。使用风险自负！

编辑：如果你想*确切地*知道 Heroku 做了什么，[它都是开源的](https://github.com/heroku/heroku-buildpack-nodejs/blob/master/bin/compile)。

理想的情况是将软件包（如果它们是开源的）放到 NPM 本身上。这是非常轻松和自动的。

# html - 如何指示浏览器向上移动超过 1 级？

> ID：10462797
> 
> 赞同：0
> 
> 时间：2012-05-05T14:30:30.410
> 
> 标签：html

由于在文件名前使用“../”表示浏览器应该在目录结构中上移 1 级，有没有办法指示浏览器上移 1 级以上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:36:33.430

我认为很简单，除非我不明白这个问题

为这样的每个级别添加 ../

2级

```
../../folder_file 
```

3级

```
../../../folder_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:32:34.980

它会通过添加另一个而上升一个级别`../`

```
../../script.js 
```

# php - WordPress 函数落在行/句子/代码的前面

> ID：10462798
> 
> 赞同：0
> 
> 时间：2012-05-05T14:30:32.050
> 
> 标签：php, wordpress

```
<?php $options = get_option('kittens_options'); if ($options['copyright']!="") echo $options['copyright']; else echo '&copy; '.date('Y').' '.bloginfo('name').'. All Rights Reserved.'; ?> 
```

工作得很好，除了`'.bloginfo('name').'`虽然正确地展示了它的假设，在句子结构中不按顺序排列。

那么应该显示为：

*© 2012 测试。版权所有。*

显示为：

*测试© 2012。保留所有权利。*

由于`'.bloginfo('name').'`不是本机 PHP 函数，是否需要对其进行过滤或转义或其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:31:54.347

那是因为[`bloginfo`^(*Codex*)](http://codex.wordpress.org/Function_Reference/bloginfo)是一个输出函数。它确实输出但不返回字符串。您需要一个返回函数，尝试`get_`在前面添加：[`get_bloginfo`^(*Codex*)](http://codex.wordpress.org/Function_Reference/get_bloginfo)。

`get_`名称开头的函数通常返回字符串而不是在 wordpress 中输出它们，就像`get_option`您已经使用的函数一样。

代码示例：

```
if ("" == ($copyright = $options['copyright'])) 
    $copyright = '&copy; '.date('Y').' '.get_bloginfo('name').'. All Rights Reserved.'
    ;                                  # ^^^^ #
echo $copyright; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:35:38.513

使用`get_bloginfo('name')`代替`bloginfo('name')`

```
<?php $options = get_option('kittens_options'); if ($options['copyright']!="") echo $options['copyright']; else echo '&copy; '.date('Y').' '.get_bloginfo('name').'. All Rights Reserved.'; ?> 
```

参考：[**wordpress**](http://codex.wordpress.org/Function_Reference/get_bloginfo)。

# regex - 使用 .htaccess 文件删除 .php 文件扩展名

> ID：10462799
> 
> 赞同：7
> 
> 时间：2012-05-05T14:30:34.330
> 
> 标签：regex, apache, .htaccess, redirect, mod-rewrite

我希望 www.example.com/about.php 只是 www.example.com/about

我创建了一个 .htaccess 文件并将其放在服务器的根目录中。我正在使用 linux 共享主机。PHP 版本 5.2

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

看起来这段代码应该可以正常工作，但由于某种原因它不能。当我尝试导航到没有 .php 扩展名的页面时出现 404 错误。

这也是我的标记：

```
<nav>
        <div class="container">
            <ul>
                <li><a href="index.php" <?php if (strpos($_SERVER['PHP_SELF'], 'index.php')) echo 'class="current-nav"';?>>home</a></li>
                <li><a href="about.php">about</a></li>
                <li><a href="services">our services</a></li>
                <li><a href="portfolio" <?php if (strpos($_SERVER['PHP_SELF'], 'portfolio.php')) echo 'class="current-nav"';?>>portfolio</a></li>
                <li><a href="testimonials" <?php if (strpos($_SERVER['PHP_SELF'], 'testimonials.php')) echo 'class="current-nav"';?>>testimonials</a></li>
                <!--<li><a href="#">client area</a></li>-->
                <li><a href="contact" <?php if (strpos($_SERVER['PHP_SELF'], 'contact.php')) echo 'class="current-nav"';?>>Contact</a></li>
                <li><a href="order" <?php if (strpos($_SERVER['PHP_SELF'], 'order.php')) echo 'class="current-nav"';?>><strong>Free Quote</strong></a></li>
            </ul>
        </div>
    </nav><!--/navigation--> 
```

您可以看到我尝试使用链接中的 php 扩展名，也尝试不使用。带有 php 扩展名的链接会转到页面，但不要删除扩展名。

我做了一个测试，看看是否通过放入一些垃圾并返回 500 错误来启用 module_rewrite。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-06T13:32:27.870

使用此代码隐藏/删除`.php`扩展：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-06T10:20:47.003

因此，在与谷歌进行了长时间的较量之后，我终于弄清楚了这一点。这适用于 Godaddy 共享主机。它删除了 php 文件扩展名，因此[http://yoursite.com/about.php](http://yoursite.com/about.php)变为[http://yoursite.com/about](http://yoursite.com/about)

```
Options -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f    #If requested is not a filename...
RewriteCond %{REQUEST_FILENAME} !-d    #And not a directory
RewriteRule ^(.*)$ $1.php [L]          # perform this redirect 
```

（上传到服务器前删除评论）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-18T11:44:18.607

我也遇到了这个问题，但我发现这似乎解决了 GoDaddy .htaccess 问题。

```
# Fix Rewrite
Options -Multiviews

# Mod Rewrite
Options +FollowSymLinks
RewriteEngine On
RewriteBase / 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T06:25:05.543

粘贴在我的 .htaccess 文件中的所有内容之上对我有用...

```
## 301 Redirects
RewriteCond %{QUERY_STRING}  ^$
RewriteRule ^(.*)\.asp$ $1? [R=301,NE,NC,L] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T14:37:22.000

您的重写规则不正确，这是错误的方式。试试这个：

```
RewriteRule ^(.*).php$ /$1 [L,R=301] 
```

# sql - 如何处理触发器中的错误？

> ID：10462800
> 
> 赞同：4
> 
> 时间：2012-05-05T14:30:37.460
> 
> 标签：sql, sql-server, error-handling, triggers, sql-server-2008-r2

我正在编写一些在数据库表中插入行时需要执行的 SQL 代码，所以我使用的是 AFTER INSERT 触发器；代码非常复杂，因此仍然可能存在一些错误。

我发现，如果在执行触发器时发生错误，SQL Server 会中止批处理和/或整个事务。这对我来说是不可接受的，因为它会给使用数据库的主应用程序带来问题；我也没有该应用程序的源代码，因此无法对其进行适当的调试。即使我的触发器失败，我也绝对需要所有数据库操作才能成功。

如何对触发器进行编码，以便在发生错误时 SQL Server*不会*中止 INSERT 操作？

此外，我怎样才能执行正确的错误处理，以便我可以真正知道触发器已失败？发送带有错误数据的电子邮件对我来说是可以的（触发器的主要目的实际上是发送电子邮件），但是我如何检测触发器中的错误条件并对其做出反应？

* * *

## 编辑：

感谢您提供有关通过使用触发器以外的其他东西来优化性能的提示，但是从长时间运行或性能密集型的意义上说，这段代码并不“复杂”；它只是构建并发送邮件消息，但为了做到这一点，它必须从各种链接表中检索数据，并且由于我正在对该应用程序进行逆向工程，因此我没有可用的数据库模式并且仍在尝试查找我绕着它走；这就是为什么转换错误或意外/空值仍然会蔓延，导致触发器执行崩溃的原因。

另外，如上所述，**我绝对不能对应用程序本身进行调试**，也不能修改它以在应用程序层做我需要的事情；对应用程序事件做出反应的唯一方法是在应用程序向数据库写入刚刚发生的事情时触发数据库触发器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:02:13.103

如果触发器中的操作很复杂和/或可能长时间运行，并且您不希望活动影响原始事务，那么您需要找到一种方法来解耦活动。

一种方法可能是使用[Service Broker](http://msdn.microsoft.com/en-us/library/ms166043%28v=sql.90%29.aspx)。在触发器中，只需创建消息（每行一个）并在途中发送它们，然后在服务中进行其余处理。

如果这看起来太复杂，那么较旧的方法是将需要处理的行插入工作/队列表中，然后有一项工作不断地从那里拉出正在做的工作。

无论哪种方式，您现在都不会阻止原始事务提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:45:04.727

触发器是事务的一部分。您可以尝试在触发器代码周围捕获燕子，或者更专业地尝试捕获日志燕子，但实际上您应该让它爆炸，然后解决只能在您的触发器中的真正问题。如果以上都不可接受，则不能使用触发器。

# cocoa - 如何从 Cocoa 应用程序创建“打印实用程序”？

> ID：10462804
> 
> 赞同：1
> 
> 时间：2012-05-05T14:30:53.327
> 
> 标签：cocoa, osx-lion

我想创建一个简单的应用程序，在“另存为 pdf”组合框中创建一个新的系统范围的条目。该应用程序的结果可能是“将 pdf 保存到保管箱发票”菜单条目。

![将 pdf 保存到保管箱发票示例](../Images/a5e81c5a0d6c27ddfc68b09fb5bb1481.png)

工作原理：将示例流程从复制粘贴`/Library/PDF Services`到`~/Library/PDF Services`包中并编辑包的内容（一个工作流包含多个项目）。

![示例工作流的内容如下所示：](../Images/ce4bb4e733729f6adb683b340cff6b1e.png)

对于我的应用程序，我想在我的捆绑包中有一个用于此工作流的模板，然后动态编辑然后导出新的工作流到`~/Library/PDF Services`文件夹。这样，我可以启用新菜单条目的本地化，以及其他优势。

那么，创建这样一个“工作流”包的最佳方法是什么，包括 info.plist、一些本地化、...复制/编辑现有的，还是有更神奇的方法？最后，我认为我需要的是动态创建一个新的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:19:32.333

工作流程，包括您所询问的那种打印插件，通常是使用 /Applications/Automator.app 创建的。你熟悉吗？

您的工作流程可以引用“变量”。基于文本模板的变量可以有一个初始值。该值存储在定义工作流的 .wflow 文件（在 .workflow 包内）中。我想您可以在复制工作流程后编辑该初始值以对其进行自定义。这似乎有点脆弱，因为没有记录 .wflow 文件的格式。

除了 Automator 工作流程，您还可以将文件夹、应用程序、命令行工具和 AppleScript 文件或其中任何一个的别名放在 PDF 服务目录中。如果您发现使用其中之一更容易，请这样做。可能最容易动态创建和自定义脚本文件。

有关更多信息，请参阅[在打印对话框中提供 PDF 工作流程选项](https://developer.apple.com/library/mac/#documentation/Printing/Conceptual/PDF_Workflow/pdfwf_concepts/pdfwf_concepts.html#//apple_ref/doc/uid/TP30000167-TPXREF101)。

# c - 缓冲区溢出：将代码写入堆栈并在那里执行

> ID：10462805
> 
> 赞同：2
> 
> 时间：2012-05-05T14:31:16.437
> 
> 标签：c, security, buffer-overflow, exploit

我知道缓冲区溢出是什么，而且我知道（没有 DEP），通常堆栈返回地址会被指向数据或代码部分中某处的地址覆盖。但是如果堆栈返回地址被另一个堆栈地址覆盖，而另一个堆栈地址被可执行文件覆盖怎么办代码？在这种情况下，DEP 是否仍然有效？“数据执行预防”听起来只有“数据”部分得到有效保护

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T14:35:16.343

DEP 阻止在堆栈和堆上执行代码。换句话说，堆栈被视为*数据*。

# c++ - 用于快速 std::wstring 分配的自定义分配器

> ID：10462806
> 
> 赞同：4
> 
> 时间：2012-05-05T14:31:20.300
> 
> 标签：c++, performance, boost, allocator

是否有任何开源分配器（可能在 Boost 中）可用于`std::wstring`实现*快速*分配模式，如[本博](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/19/420038.aspx)文中所示？

Boost.Pool[似乎不太适合这个目的](https://stackoverflow.com/questions/10451585/using-vectorwstring-with-boost-pool-allocator)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:53:24.570

不，没有（我搜索了几个小时，一次）。如果您不关心在使用过程中释放内存，那么您自己做是相当简单的。如果你想动态释放它，那么关于空闲列表管理、LRU 等就变成了很多工作。

# php - 通过扫描目录在对象中丢失了一些东西

> ID：10462811
> 
> 赞同：1
> 
> 时间：2012-05-05T14:31:41.500
> 
> 标签：php

我在 php.ini 中编写了以下对象。它工作正常，但是在我的结构中更改某些内容后，目录爬虫仅保存数组中最后找到的目录。

```
<?php

include_once('root.php');

class crawler
{

private $pages = array();

/**
 * @param string $dir
 * @return array current_dir
 */
function found_dir($dir)
{
//         echo "Found (dir): {$dir}\n";
    // add $dir to $pages
    $parts = explode("/", $dir);
    $current = &$this->pages;
    // e.g. ./content/page/sub_page/
    //  [0] => '.'
    //  [1] => 'content'
    // [-1] => ''
    for ($i = 2; $i < count($parts) - 1; $i++) {
        if (!in_array('sub', $current))
            $current['sub'] = array();
        if (!in_array($parts[$i], $current['sub']))
            $current['sub'][$parts[$i]] = array('name' => $parts[$i]);
        $current = &$current['sub'][$parts[$i]];
    }
    return $current;
}

/**
 * @param string $file
 */
function found_file($file)
{
//        echo "Found (file): {$file}\n";
    // move to current $dir
    $current = &$this->found_dir($file);
    // add $file to $pages
    $parts = explode(".", substr($file, strrpos($file, "/") + 1));
    if (count($parts) == 1) {
        $current[$parts[0]] = file_get_contents($file);
    } else {
        if (strlen($parts[0]) == 0)
            $current[$parts[1]] = true;
        else if (!in_array($parts[0], $current))
            $current[$parts[0]] = array($parts[1] => file_get_contents($file));
        else
            $current[$parts[0]][$parts[1]] = file_get_contents($file);
    }
}

/**
 * @param string $root
 */
function read_all_files($root = '.')
{
    // vars for handling
    $directories = array();
    $last_letter = $root[strlen($root) - 1];
    $root = ($last_letter == '\\' || $last_letter == '/') ? $root : $root . DIRECTORY_SEPARATOR;
    $directories[] = $root;

    while (sizeof($directories)) {
        $dir = array_pop($directories);
        if ($handle = opendir($dir)) {
            while (false !== ($file = readdir($handle))) {
                if ($file == '.' || $file == '..') {
                    continue;
                }
                $file = $dir . $file;
                if (is_dir($file)) {
                    $directory_path = $file . DIRECTORY_SEPARATOR;
                    array_push($directories, $directory_path);

                } elseif (is_file($file))
                    $this->found_file($file);
            }
            closedir($handle);
        }
    }
}

/**
 * @return root
 */
public function generatePages()
{
    // get available files, create temp array
    $this->read_all_files('./content/');
    // print
    print_r($this->pages);
    // loop array
    return new root($this->pages);
}

} 
```

我找不到错误。也许你们中的某些人看到了错误。非常感谢您的帮助！

最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:41:47.970

您在应该使用 isset() 的地方使用 in_array：

```
$pages = array('sub' => array())

in_array('sub', $pages) => false
isset($pages['sub'])    => true 
```

# php - 如何从 PHP 中的 jQuery.Post() 中检索数据？

> ID：10462812
> 
> 赞同：4
> 
> 时间：2012-05-05T14:31:45.557
> 
> 标签：php, javascript, jquery, json

我目前正在尝试将一个字符串发送到一个 php 脚本，该脚本最终将返回一个 JSON 文件。这是我用来发送字符串的代码：

```
var str = "testString";    
$.post("php/getTimes.php", str,
    function(data){
            console.log(data.name);
        console.log(data.time);
    }, "json"); 
```

在'getTimes' php 文件中，我只是想接收我传递的'str' 变量。任何想法如何做到这一点？看起来应该很简单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T14:33:43.560

您必须使用序列化字符串在[POST中命名属性：](http://api.jquery.com/jQuery.post/) `data`

```
var data = "str=testString";
$.post("php/getTimes.php", data, function(json) {
    console.log(json.name);
    console.log(json.time);
}, "json"); 
```

或带地图：

```
var data = {
    str : "testString"
};

$.post("php/getTimes.php", data, function(json) {
    console.log(json.name);
    console.log(json.time);
}, "json"); 
```

要在 PHP 中处理此变量，请使用：

```
$str = $_POST['str']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T14:39:09.937

在 getTimes.php 中：

```
<?php   
$var = $_POST['string']; // this fetches your post action
echo 'this is my variable: ' . $var; // this outputs the variable
?> 
```

同时调整：

```
$.post("php/getTimes.php", str, 
```

到

```
$.post("php/getTimes.php", { string: str }, 
```

# sql - SQL 添加小数导致：将数字转换为数据类型数字的算术溢出错误

> ID：10462814
> 
> 赞同：0
> 
> 时间：2012-05-05T14:31:57.530
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有两个数字作为十进制存储在数据库中，精度等于 9。我的目标是添加这两个数字并更新数据库中的值。

```
DECLARE @v1 DECIMAL(9, 5), @v2 DECIMAL(9, 5)
SET @v1 = 9503.34000
SET @v2 = 1357.62000
SELECT CAST(@v1 + @v2 AS DECIMAL(9, 5)) 
```

当我在 SQL 中添加它时，它会引发溢出错误，但是将其更改为 10,5 会导致**10860.96000**。

我如何告诉 SQL 根据我想要的精度添加和返回结果。我希望这笔款项返回我 9,5 而不是 10,5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T14:37:38.373

它*无法*返回`DECIMAL(9,5)`。小数点前有 5 位数字，因为 9,503 + 1,357 大于 10,000。

如果您只想要总共使用 9 位数字`CAST(@v1 +@v2 as DECIMAL(10,4))`。无论如何，您似乎没有使用小数点后 5 位。

# jquery - jQuery 中转动画无法正常工作

> ID：10462816
> 
> 赞同：0
> 
> 时间：2012-05-05T14:32:01.067
> 
> 标签：jquery, jquery-animate

我只是 jquery 的新手。我刚刚关注了一个链接[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

在那里我发现了一个过渡动画，只是将一个 div 从左到右移动，只是悬停在母 div 上，我已经按照上面的说明完成了所有过程。

我的代码如下：

脚本：

```
$('#div1').hover(
    function () {

        $('#div2').transition({ x: '90px' });

    }); 
```

的CSS：

```
#div1{width:150px;
height:100px;
position:relative;
background:#9F0;}

   #div2
   {
       width:50px;
       height:50px;
       background:
       #F00;} 
```

的HTML

```
<div id="div1"></div><div id="div2"> </div> 
```

你可以[在这里查看](http://jsfiddle.net/amitabhaghosh197/8RMNU/)

我认为我错了。请帮我整理一下。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:43:24.673

是的。首先，您的小提琴不包括 jQuery Transit 插件，也没有设置为首先使用 jQuery。它在 mootools 上。

其次，这不是你使用它的方式。该网站明确表示`$('.parent').transition({<parameters})`。

我建议您先阅读如何使用 jQuery，因为这似乎是主要问题。我建议你从这里开始：http: [//docs.jquery.com/How_jQuery_Works](http://docs.jquery.com/How_jQuery_Works)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:43:41.577

你应该绝对定位 div，试试这个：

[http://jsfiddle.net/8RMNU/1/](http://jsfiddle.net/8RMNU/1/)

# java - 从 Java 中的 HashMap 获取密钥

> ID：10462819
> 
> 赞同：206
> 
> 时间：2012-05-05T14:32:18.983
> 
> 标签：java, data-structures, java-6

我在Java中有一个这样的Hashmap：

```
private Map<String, Integer> team1 = new HashMap<String, Integer>(); 
```

然后我像这样填充它：

```
team1.put("United", 5); 
```

我怎样才能得到钥匙？类似于：`team1.getKey()`返回“United”。

* * *

## 回答 #1

> 赞同：365
> 
> 时间：2012-05-05T14:34:30.233

A`HashMap`包含多个密钥。您可以使用`keySet()`来获取所有键的集合。

```
team1.put("foo", 1);
team1.put("bar", 2); 
```

将`1`使用 key`"foo"`和`2`key存储`"bar"`。遍历所有键：

```
for ( String key : team1.keySet() ) {
    System.out.println( key );
} 
```

将打印`"foo"`和`"bar"`.

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2015-06-18T18:17:17.093

**如果**您知道索引，这是可行的，至少在理论上是可行的：

```
System.out.println(team1.keySet().toArray()[0]); 
```

`keySet()`返回一个集合，因此您将集合转换为数组。

问题，当然，是一套不承诺保持你的订单。如果您的 HashMap 中只有一项，那很好，但如果您有更多，最好像其他答案一样遍历地图。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-05-05T14:36:30.977

检查这个。

[https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html](https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html)

（使用`java.util.Objects.equals`因为 HashMap 可以包含`null`）

使用JDK8+

```
/**
 * Find any key matching a value.
 *
 * @param value The value to be matched. Can be null.
 * @return Any key matching the value in the team.
 */
private Optional<String> findKey(Integer value){
    return team1
        .entrySet()
        .stream()
        .filter(e -> Objects.equals(e.getValue(), value))
        .map(Map.Entry::getKey)
        .findAny();
}

/**
 * Find all keys matching a value.
 *
 * @param value The value to be matched. Can be null.
 * @return all keys matching the value in the team.
 */
private List<String> findKeys(Integer value){
    return team1
        .entrySet()
        .stream()
        .filter(e -> Objects.equals(e.getValue(), value))
        .map(Map.Entry::getKey)
        .collect(Collectors.toList());
} 
```

更“通用”且尽可能安全

```
/**
 * Find any key matching the value, in the given map.
 *
 * @param mapOrNull Any map, null is considered a valid value.
 * @param value     The value to be searched.
 * @param <K>       Type of the key.
 * @param <T>       Type of the value.
 * @return An optional containing a key, if found.
 */
public static <K, T> Optional<K> findKey(Map<K, T> mapOrNull, T value) {
    return Optional.ofNullable(mapOrNull).flatMap(map -> map.entrySet()
            .stream()
            .filter(e -> Objects.equals(e.getValue(), value))
            .map(Map.Entry::getKey)
            .findAny());
} 
```

或者，如果您使用的是 JDK7。

```
private String findKey(Integer value){
    for(String key : team1.keySet()){
        if(Objects.equals(team1.get(key), value)){
            return key; //return the first found
        }
    }
    return null;
}

private List<String> findKeys(Integer value){
   List<String> keys = new ArrayList<String>();
   for(String key : team1.keySet()){
        if(Objects.equals(team1.get(key), value)){
             keys.add(key);
      }
   }
   return keys;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-05T14:35:03.997

您可以使用该方法检索所有的`Map`密钥[`keySet()`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#keySet%28%29)。现在，如果你需要的是得到一个给定*value的**key*，那是完全不同的事情，对你没有帮助；您需要一个专门的数据结构，例如（允许在键和值之间双向查找的映射）来自 Apache 的[Commons Collections](http://commons.apache.org/collections/) - 还要注意几个不同的键可以映射到相同的值。*`Map`[`BidiMap`](http://commons.apache.org/proper/commons-collections/javadocs/api-3.2.1/org/apache/commons/collections/BidiMap.html)*

 ** * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-05T14:37:32.553

当您想获得参数（`United`）时，`5`您也可以考虑使用双向映射（例如由 Guava 提供：[http ://docs.guava-libraries.googlecode.com/git/javadoc/com/google /common/collect/BiMap.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html)）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-09T17:37:23.637

```
private Map<String, Integer> _map= new HashMap<String, Integer>();
Iterator<Map.Entry<String,Integer>> itr=  _map.entrySet().iterator();
                //please check 
                while(itr.hasNext())
                {
                    System.out.println("key of : "+itr.next().getKey()+" value of      Map"+itr.next().getValue());
                } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-02T13:50:27.103

使用函数式操作来加快迭代速度。

```
team1.keySet().forEach((key) -> {
      System.out.println(key);
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-09-28T09:57:41.370

foreach 也可以使用。

```
team1.forEach((key, value) -> System.out.println(key)); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-24T22:50:42.683

如果您只需要一些简单且更多的验证。

```
public String getKey(String key)
{
    if(map.containsKey(key)
    {
        return key;
    }
    return null;
} 
```

然后你可以搜索任何键。

```
System.out.println( "Does this key exist? : " + getKey("United") ); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-10T12:04:22.233

一个解决方案是，如果您知道键位置，将键转换为字符串数组并返回该位置的值：

```
public String getKey(int pos, Map map) {
    String[] keys = (String[]) map.keySet().toArray(new String[0]);

    return keys[pos];
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-16T08:15:13.943

要获取 HashMap 中的键，我们有 keySet() 方法，该方法存在于`java.util.Hashmap`包中。前任 ：

```
Map<String,String> map = new Hashmap<String,String>();
map.put("key1","value1");
map.put("key2","value2");

// Now to get keys we can use keySet() on map object
Set<String> keys = map.keySet(); 
```

现在**键**将在地图中提供您所有的键。例如：[key1,key2]

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-08-05T07:53:23.633

试试这个简单的程序：

```
public class HashMapGetKey {

public static void main(String args[]) {

      // create hash map

       HashMap map = new HashMap();

      // populate hash map

      map.put(1, "one");
      map.put(2, "two");
      map.put(3, "three");
      map.put(4, "four");

      // get keyset value from map

Set keyset=map.keySet();

      // check key set values

      System.out.println("Key set values are: " + keyset);
   }    
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-05-04T09:28:15.673

```
public class MyHashMapKeys {

    public static void main(String a[]){
        HashMap<String, String> hm = new HashMap<String, String>();
        //add key-value pair to hashmap
        hm.put("first", "FIRST INSERTED");
        hm.put("second", "SECOND INSERTED");
        hm.put("third","THIRD INSERTED");
        System.out.println(hm);
        Set<String> keys = hm.keySet();
        for(String key: keys){
            System.out.println(key);
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2016-03-22T16:50:41.157

我要做的非常简单但浪费内存的是用一个键映射值，然后用一个值映射键，使之：

`private Map<Object, Object> team1 = new HashMap<Object, Object>();`

重要的是你使用`<Object, Object>`这样你就可以映射`keys:Value`和`Value:Keys`喜欢这个

`team1.put("United", 5);`

`team1.put(5, "United");`

所以如果你使用 `team1.get("United") = 5`和`team1.get(5) = "United"`

但是，如果您对成对中的一个对象使用某种特定方法，那么制作另一张地图会更好：

`private Map<String, Integer> team1 = new HashMap<String, Integer>();`

`private Map<Integer, String> team1Keys = new HashMap<Integer, String>();`

进而

`team1.put("United", 5);`

`team1Keys.put(5, "United");`

记住，保持简单；）

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2017-05-06T15:10:16.930

获取**Key**及其**值**

例如

```
private Map<String, Integer> team1 = new HashMap<String, Integer>();
  team1.put("United", 5);
  team1.put("Barcelona", 6);
    for (String key:team1.keySet()){
                     System.out.println("Key:" + key +" Value:" + team1.get(key)+" Count:"+Collections.frequency(team1, key));// Get Key and value and count
                } 
```

**将打印：** Key: United Value:5 Key: Barcelona Value:6*

# r - 在 R 中绘制 Haar 函数

> ID：10462824
> 
> 赞同：4
> 
> 时间：2012-05-05T14:32:46.773
> 
> 标签：r, function, haar-wavelet

我想绘制 Haar 函数，其定义为：

```
h_1_0 = function(t){
    if ((t >= 0) & (t <= 1/2)){return(1)}
    else if ((t >= 1/2) & (t <= 1)){return(-1)}
    else{return(0)}
} 
```

那么第 k 个 Haar 函数为：

```
h = function(t,n,k){return(2^((n-1)/2) * h_1_0((2^(n-1)) * t - k))} 
```

例如我想画`h(t,1,1)`，它必须是函数：

```
 1, if 1<=t<=3/2
-1, if 3/2 <=t<=2
 0, otherwise 
```

那么如何在 R 中绘制具有固定 k 和 n 的第 k 个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:02:11.490

如果您可以成功地矢量化您的函数，看起来可以，您可以使用`curve`它来绘制它。

用于`Vectorize`为您的`h`函数创建一个包装器，允许您将向量传递给参数`t`

```
Vh <- Vectorize(h, "t") 
```

用于`curve`绘制矢量化函数

```
curve( Vh(t = x, n = 1, k = 1), from = .5, to = 5) 
```

![Vh(t=x,n=1,k=1)的曲线](../Images/f47183cf9a09a5cb9177c107f680e504.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T14:41:40.220

为域创建一个序列。根据 k 和 n 使用适当的界限：

```
x <- seq(.5, 2.5, .001)
plot(x, sapply(x, function(x) h(x,1,1)), pch='.', type='l') 
```

# c# - Windows Phone 的可观察哈希集

> ID：10462825
> 
> 赞同：1
> 
> 时间：2012-05-05T14:32:47.780
> 
> 标签：c#, silverlight, windows-phone-7

我目前正在开发一个需要使用 Observable Hashset 的 windows phone 项目。我发现github上有一些代码通过继承INotifyCollectionChanged和Hashset来实现。但是没有适用于 windows phone 的哈希集。所以我发现有人指导使用字典替代实现 Windows 手机的哈希集（只有示例代码而不是完整代码）。但是我没有找到任何适用于 windows 手机的替代 Observable Hashset 工具。

所以我想要一些关于 Windows Phone 的 Observable Hashset 实现的指南，或者只是 Windows Phone 的 hashset 的完整代码实现。

最初，我只想要一个没有重复成员的 Obserevable 集合。只是指导我。

# java - 在 windows 中使用 java 将 sql 文件导入 mysql 数据库时出错

> ID：10462826
> 
> 赞同：1
> 
> 时间：2012-05-05T14:33:08.867
> 
> 标签：java, mysql, windows

这是我的代码

```
try{   
String logf = "mysql -p -h localhost ruralcdn<E:\\data\\DBServer\\"+FileName;
System.out.println("Command"+logf);
Runtime rt = Runtime.getRuntime();

Process pr = rt.exec(logf); 
int lm = pr.waitFor();
System.out.println("lm"+lm);

System.out.println("!!Done!!");
}catch(Exception ex){
System.out.println("!!error!!");                

} 
```

当我编译上面的代码时，它会无限期地挂起，并且我的数据库中没有更新任何条目。当我尝试使用下面给出的方法时

```
Connection conn = dbConnectionSource.getConnection();
Statement stmt = conn.createStatement();
stmt.execute(FileUtils.readFileToString(new File("./some-sql-file"))); 
```

控制台显示错误：您的 sql 语法有错误

请帮助我，以便我可以正确地做事。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T14:59:09.397

您的命令 (in `logf`) 包括标准输入的重定向。不幸的是，您不能那样做，因为该`Process.exec(String)`方法不了解如何进行命令重定向、引用和 sso on。它只了解如何执行带有空格分隔的参数的简单命令。

你有两个选择：

*   您可以在 Java 中打开该文件，并将其写入进程对象的输出流，以便它显示在命令标准输入中。

*   您可以告诉 Java`mysql`在可以处理重定向等的 shell / 命令解释器中运行命令。

* * *

您的代码应如下所示：

```
String[] command = new String{
        "cmd",
        "/c",
        "mysql -p -h localhost ruralcdn < E:\\data\\DBServer\\" + fileName;

ProcessBuilder pb = new ProcessBuilder(command);
Process p = pb.start();
p.waitFor(); 
```

您的代码应该做的另一件事是从命令中读取并显示（或丢弃）标准输出/错误。如果你不读它：

*   您将不知道它是否包含任何错误消息，并且
*   该`mysql`命令可能会阻塞，因为它无法再向您未读取的管道写入任何内容。

* * *

> 控制台显示错误：您的 sql 语法有错误

大概说的是实话……

* * *

顺便说一句，`mysql`命令当前永远挂起的原因是它正在等待 Java 进程在其标准输入上向它发送数据。这不会发生，因为您的 Java 代码没有向其写入任何内容。

# c# - WebRequest POST 返回“远程服务器返回错误：(405) Method Not Allowed。”

> ID：10462827
> 
> 赞同：0
> 
> 时间：2012-05-05T14:33:09.177
> 
> 标签：c#, .net

我正在使用 WebRequest 通过控制台应用程序将文件发布到我组织中的服务器。经过一些在线研究，我能够想出下面的代码；

```
try
{
    RegisterString("Uploading encrypted file to server....Please wait!!");
    string url = @"http://localhost:3333/MySite/"
    string filepath = @"C:\test.txt";
    WebRequest request = WebRequest.Create(url);
    request.Method = "POST";
    request.PreAuthenticate = true;
    request.Credentials = new NetworkCredential(ftp_username, ftp_password);
    byte[] byteArray = Encoding.UTF8.GetBytes(filePath);
    request.ContentType = "application/x-www-form-urlencoded";
    request.ContentLength = byteArray.Length;

    //Here is the Business end of the code...
    Stream dataStream = request.GetRequestStream();
    dataStream.Write(byteArray, 0, byteArray.Length);
    dataStream.Close();
    //and here is the response.
    WebResponse response = request.GetResponse();

    Console.WriteLine(((HttpWebResponse)response).StatusDescription);
    dataStream = response.GetResponseStream();
    StreamReader reader = new StreamReader(dataStream);
    string responseFromServer = reader.ReadToEnd();
    Console.WriteLine(responseFromServer);
    reader.Close();
    dataStream.Close();
    response.Close();

    RegisterString("File uploaded sucessfully");                

    try
    {
        //Delete file after transmission
        File.Delete(filePath);
    }
    catch (Exception ex)
    {
        RegisterString(ex.Message);
    }

    WriteToLog("End");
    System.Threading.Thread.Sleep(5000);
}
catch (Exception ex)
{
    RegisterString(ex.Message);
    System.Threading.Thread.Sleep(5000);
    WriteToLog("End");
} 
```

但是我得到异常“405 Method Not Allowed”。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:25:26.343

是ftp服务器吗？如果是这样，方法应该是 PUT，而不是 POST。

# c++ - 如何指定 C++ 类的特定方法使用模板？

> ID：10462830
> 
> 赞同：3
> 
> 时间：2012-05-05T14:33:20.240
> 
> 标签：c++, templates, boost, unity3d

我在使用 C++ 模板时遇到问题。这是对我正在尝试做的事情的解释，以便每个人都可以更好地理解我的问题。

我的框架有一个基类 ,`Component`并且我的框架的用户将派生`Component`以创建具体`Components`的`TransformComponent`和`AudioComponent`。A`ComponentComposite`存储给定用户创建的所有*具体s 的列表。* `Component`

我正在尝试存储具体`Components`via`boost::any`和`boost::any_cast`s 的列表。

`ComponentComposite`以下是我的清单中的两种方法`boost::any`。

```
 class ComponentComposite {

        public:
            ComponentComposite();
            template<class T> bool addComponent(T* component);
            template<class T> T* getComponent();

        private:
            QList<boost::any*>* m_components;
    } 
```

这是 a 的示例代码`GameObject`，它是 a `ComponentComposite`。我正在尝试将两个`Component`s 添加到`GameObject`，然后我尝试访问`Component`添加的两个 s。这样做将是`ComponentComposite`.

```
 GameObject::GameObject() : ComponentComposite()
    {
        addComponent<Components::AudioComponent>(new Components::AudioComponent());
        addComponent<Components::TransformComponent>(new Components::TransformComponent());
        Components::TransformComponent* transform= getComponent<Components::TransformComponent>();
        Components::AudioComponent* audio= getComponent<Components::AudioComponent>();
    } 
```

这样做会引发四个错误（每个函数调用一个错误）：

1.  `...undefined reference to `bool BalaurEngine::Composites::ComponentComposite::addComponent<BalaurEngine::Components::AudioComponent>(BalaurEngine::Components::AudioComponent*)'`
2.  `...undefined reference to `bool BalaurEngine::Composites::ComponentComposite::addComponent<BalaurEngine::Components::TransformComponent>(BalaurEngine::Components::TransformComponent*)'`
3.  `...undefined reference to `BalaurEngine::Components::TransformComponent* BalaurEngine::Composites::ComponentComposite::getComponent<BalaurEngine::Components::TransformComponent>()'`
4.  `...undefined reference to `BalaurEngine::Components::AudioComponent* BalaurEngine::Composites::ComponentComposite::getComponent<BalaurEngine::Components::AudioComponent>()'`

如果有人愿意，我可以发布我的方法的源`template<class T> bool addComponent(T* component);`代码`template<class T> T* getComponent();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:37:37.117

现在已经回答了这个问题 - 请参阅最后一条评论：

@Mutmansky，我不知道在 C++ 中实现的模板化函数需要在头文件中，以及模板化函数的定义。在我这样做之后，按照 Scott Langham 的建议，编译器错误消失了。如果您想查看该文件的源代码，我很乐意在此处发布/发送消息给您。让我知道！

# java - Java Regex 否定某个单词

> ID：10462831
> 
> 赞同：2
> 
> 时间：2012-05-05T14:33:26.290
> 
> 标签：java, regex

我需要一些帮助来创建正则表达式。
我需要获取第一个关键字和最后一个关键字之间的所有单词。

假设第一个关键字是`All`，最后一个关键字是`At`。

样本输入：

> 所有 abc abcd abcccc abdd At

输出必须是：

> abc abcd abccc abdd

这是我现在的正则表达式：

```
(\\s*All (\\w|\\s)+( At)) 
```

我的问题是，如果输入是这样的：

> 所有 abc abc abc abc abc At At

输出是：

> abc abc abc abc abc 在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:39:57.987

尝试对中间的单词进行非贪婪匹配：

```
(\s*All (\w|\s)+?( At)) 
```

注意添加的`?`符号。这应该告诉正则表达式引擎返回该`(\w|\s)+`部分的最短匹配，希望产生您需要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:40:26.660

在之前缩短您的字符串：

```
String toSearchFor = source.substring (source.indexOf ("All"), source.indexOf ("At")+"At".length); 
```

但是，我不知道该怎么办

```
"At At All abc At All def All ghi At jkl At At All" 
```

# c# - 添加方法导致编译错误 C# ASP

> ID：10462833
> 
> 赞同：0
> 
> 时间：2012-05-05T14:33:30.160
> 
> 标签：c#, asp.net, c#-4.0, compiler-errors

我正在尝试创建一个`webpage`，但是当我创建一个并向它`button`添加一个时，当我从按钮中删除它时它工作正常我尝试了这些步骤`method``compilation error occurs``method`

1.  尝试删除页面，并从头开始重做
2.  `CS1061`在线查找错误

3.用不同的方法向按钮添加方法我已经筋疲力尽了，试着找出错误是什么，请帮助我！

```
 Server Error in '/' Application.

    Compilation Error 
```

说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

> 编译器错误消息：CS1061：“ASP.usermodification_aspx”不包含“btnModify_Click”的定义，并且找不到接受“ASP.usermodification_aspx”类型的第一个参数的扩展方法“btnModify_Click”（您是否缺少 using 指令或装配参考？）

```
 Source Error:

        Line 38:         SelectCommand="SELECT RoleName FROM aspnet_Roles"></asp:SqlDataSource>
        Line 39:     <br />
        Line 40:     <asp:Button ID="btnModify" runat="server" Text="Modify" 
        Line 41:         onclick="btnModify_Click" />
        Line 42: 
```

* * *

```
namespace RentACar
 {
    public partial class UserModification : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnModify_Click(object sender, EventArgs e)
        {
            GridViewRow row = gvUserRoles.SelectedRow;

            string username = row.Cells[0].Text;
             string role = row.Cells[1].Text;
             Roles.RemoveUserFromRole(username, role);
            string choosenrole = dllUserRoles.SelectedValue.ToString();
            Roles.AddUserToRole(username, choosenrole);

        }
    }
}` 
```

* * *

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="UserModification.aspx.cs" Inherits="RentACar.UserModification" %>
<asp:Content ID="Content3" ContentPlaceHolderID="HeadContent" runat="server"> 
```

* * *

```
 <asp:Button ID="btnModify" runat="server" Text="Modify" 
        onclick="btnModify_Click" /> 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Security; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:35:28.207

定义`btnModify_Click`方法。

```
void btnModify_Click(object sender, EventArgs e){
    // do something.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:07:14.917

尝试使用`CodeFile`而不是`CodeBehind`在页面标签中。CodeBehind 需要编译解决方案。您的代码可能有问题。在页面标签中使用 CodeFile 属性后，在您的按钮事件处理程序上放置一个断点，看看您是否仍然收到该错误。

# javascript - 单击链接时如何显示确认对话框？

> ID：10462839
> 
> 赞同：314
> 
> 时间：2012-05-05T14:34:47.037
> 
> 标签：javascript, html, dom-events

* * *

## 回答 #1

> 赞同：696
> 
> 时间：2012-05-05T14:38:27.927

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-07-19T05:28:10.317

你也可以试试这个：

```
<a href="" onclick="if (confirm('Delete selected item?')){return true;}else{event.stopPropagation(); event.preventDefault();};" title="Link Title">
    Link Text
</a> 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-05-05T14:39:37.857

我建议避免使用内联 JavaScript：

```
var aElems = document.getElementsByTagName('a');

for (var i = 0, len = aElems.length; i < len; i++) {
    aElems[i].onclick = function() {
        var check = confirm("Are you sure you want to leave?");
        if (check == true) {
            return true;
        }
        else {
            return false;
        }
    };
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bJNVy/1/)。

以上更新以减少空间，但保持清晰/功能：

```
var aElems = document.getElementsByTagName('a');

for (var i = 0, len = aElems.length; i < len; i++) {
    aElems[i].onclick = function() {
        return confirm("Are you sure you want to leave?");
    };
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bJNVy/24/)。

使用有点晚的更新`addEventListener()`（如[bažmegakapa](https://stackoverflow.com/questions/10462839/javascript-confirmation-dialog-on-href-link/10462885#comment13513232_10462885)建议的，在下面的评论中）：

```
function reallySure (event) {
    var message = 'Are you sure about that?';
    action = confirm(message) ? true : event.preventDefault();
}
var aElems = document.getElementsByTagName('a');

for (var i = 0, len = aElems.length; i < len; i++) {
    aElems[i].addEventListener('click', reallySure);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bJNVy/22/)。

以上将一个函数绑定到每个单独链接的事件；当您可以将事件处理（使用委托）绑定到祖先元素时，这可能会非常浪费，例如：

```
function reallySure (event) {
    var message = 'Are you sure about that?';
    action = confirm(message) ? true : event.preventDefault();
}

function actionToFunction (event) {
    switch (event.target.tagName.toLowerCase()) {
        case 'a' :
            reallySure(event);
            break;
        default:
            break;
    }
}

document.body.addEventListener('click', actionToFunction); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bJNVy/23/)。

因为事件处理附加到`body`元素上，该元素通常包含许多其他可点击的元素，所以我使用了一个临时函数 ( `actionToFunction`) 来确定如何处理该点击。如果单击的元素是一个链接，因此具有`tagName`of `a`，则单击处理将传递给该`reallySure()`函数。

参考：

*   [`addEventListener()`](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener).
*   [条件（'三元'）运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator)。
*   [`confirm()`](https://developer.mozilla.org/en/DOM/window.confirm).
*   [`getElementsByTagName()`](https://developer.mozilla.org/en/DOM/element.getElementsByTagName).
*   [`onclick`](https://developer.mozilla.org/en/DOM/element.onclick).
*   [`if () {}`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/if...else).

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-05-05T14:38:59.293

```
<a href="delete.php?id=22" onclick = "if (! confirm('Continue?')) { return false; }">Confirm OK, then goto URL (uses onclick())</a> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-05T19:29:53.593

## 加号

您可以做到，无需编写 JavaScript 代码

```
<head>
   <script src="/path/to/jquery.js" type="text/javascript" charset="utf-8"></script>
   <script src="/path/to/jquery.Aplus.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
...
   <a href="delete.php?id=22" class="confirm" title="Are you sure?">Link</a>
...
</body> 
```

[演示页面](http://japlus.simplit.it/demo.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T14:46:40.013

如果您使用 addEventListener（或 attachEvent）附加事件处理程序，则此方法与上述任一答案略有不同。

```
function myClickHandler(evt) {
  var allowLink = confirm('Continue with link?');
  if (!allowLink) {
    evt.returnValue = false; //for older Internet Explorer
    if (evt.preventDefault) {
      evt.preventDefault();
    }
    return false;
  }
} 
```

您可以使用以下任一方法附加此处理程序：

```
document.getElementById('mylinkid').addEventListener('click', myClickHandler, false); 
```

或者对于旧版本的 Internet Explorer：

```
document.getElementById('mylinkid').attachEvent('onclick', myClickHandler); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-05T15:49:05.910

只是为了好玩，我将在整个文档上使用单个事件，而不是向*所有*锚标记添加事件：

```
document.body.onclick = function( e ) {
    // Cross-browser handling
    var evt = e || window.event,
        target = evt.target || evt.srcElement;

    // If the element clicked is an anchor
    if ( target.nodeName === 'A' ) {

        // Add the confirm box
        return confirm( 'Are you sure?' );
    }
}; 
```

如果你有很多锚标签，这种方法会更有效。当然，当您将此事件添加到具有所有锚标记的容器中时，它会变得更加高效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-15T13:35:24.337

**大多数浏览器不显示传递给`confirm()`.**

`<input>`使用此方法，如果您的用户更改了任何字段的值，您可以显示带有自定义消息的弹出窗口。

您只能将其应用于**某些链接**，甚至是页面中的其他 HTML 元素。只需将自定义类添加到所有需要确认并应用的链接，使用以下代码：

```
$(document).ready(function() {
  let unsaved = false;
  // detect changes in all input fields and set the 'unsaved' flag
  $(":input").change(() => unsaved = true);
  // trigger popup on click
  $('.dangerous-link').click(function() {
    if (unsaved && !window.confirm("Are you sure you want to nuke the world?")) {
      return; // user didn't confirm
    }
    // either there are no unsaved changes or the user confirmed
    window.location.href = $(this).data('destination');
  });
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<input type="text" placeholder="Nuclear code here" />
<a data-destination="https://en.wikipedia.org/wiki/Boom" class="dangerous-link">
    Launch nuke!
</a>
```

尝试更改示例中的输入值以预览其工作原理。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-01-03T06:17:46.437

**使用 PHP、HTML 和 JAVASCRIPT 进行提示**

如果有人想在一个文件中使用**php、html 和 javascript ，下面的答案对我有用。我附上了使用引导图标“垃圾”的链接。**

```
<a class="btn btn-danger" href="<?php echo "delete.php?&var=$var"; ?>" onclick="return confirm('Are you sure want to delete this?');"><span class="glyphicon glyphicon-trash"></span></a> 
```

我在中间使用**php代码的原因是因为我不能从一开始就使用它..**

下面的代码对我不起作用：-

```
echo "<a class='btn btn-danger' href='delete.php?&var=$var' onclick='return confirm('Are you sure want to delete this?');'><span class='glyphicon glyphicon-trash'></span></a>"; 
```

我在第一个代码中对其进行了修改，然后我按照我需要的方式运行。我希望我可以帮助需要我的情况的人。

# uitableview - 工具栏下UItableview滚动问题

> ID：10462842
> 
> 赞同：1
> 
> 时间：2012-05-05T14:35:06.337
> 
> 标签：uitableview, uitoolbar

我有一种情况，我的 ViewController 中有一个 UItableview 和一个 UIToolbar。位于屏幕底部的工具栏和 tableview 占据了整个屏幕。问题是当我向下滚动到表格视图的末尾然后释放时，它会跳回到视图的顶部，而不是停留在我想看到的位置。我知道它与工具栏的位置有关，但我不知道如何解决它。谁能帮我？非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:55:43.403

这应该有帮助：`tableView.contentInset = UIEdgeInsetsMake(0, 0, 44, 0)`. 将“44”替换为工具栏的实际高度。如果它有效，则以相同的方式调整`scrollIndicatorInsets`属性。

# wpf - ContextMenu 根据 DataGrid 的选择显示/隐藏项目？

> ID：10462845
> 
> 赞同：1
> 
> 时间：2012-05-05T14:35:24.417
> 
> 标签：wpf, xaml, user-controls, contextmenu, resourcedictionary

我有一个上下文菜单设置为资源字典（因为它不能是用户控件）：

```
<ResourceDictionary x:Class="Test.FooGridContextMenu"
                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ContextMenu x:Key="FooGridContextMenu" ContextMenuOpening="OnContextMenuOpening">

    </ContextMenu>
</ResourceDictionary> 
```

我将它用于数据网格：

```
<DataGrid ContextMenu="{DynamicResource FooGridContextMenu}">... 
```

上下文菜单资源的代码如下：

```
using System;
using System.Windows;
using System.Windows.Controls;

namespace Test
{
    public partial class FooGridContextMenu : ResourceDictionary
    {
        public FooGridContextMenu()
        {
            InitializeComponent();
        }  

        void OnContextMenuOpening(object sender, ContextMenuEventArgs e)
        {
            Console.WriteLine("here i am");
        }
    }
} 
```

问题：

1) 事件回调方法没有被调用，即我没有看到“Here i am”日志。

2) 如何在开场事件中显示/隐藏一些基于复杂逻辑的上下文菜单项？基本上我在问如何从事件回调访问数据网格以便能够检索选定的行？我知道如何设置`Visibility`，但我不知道如何访问`DataGrid`以检索选定的模型/行。

3）`ResourceDictionary`这里的路要走吗？我首先尝试过`UserControl`，但它抱怨`ContextMenu`不能有一个视觉父级，所以，我想我不能使用它。

谢谢您的帮助！

# mysql - 如何改进此查询以避免使用嵌套视图？

> ID：10462850
> 
> 赞同：-4
> 
> 时间：2012-05-05T14:35:36.350
> 
> 标签：mysql, sql

查找访问过与其保险公司相关的所有骨科医生（专科）的患者。

数据库：[**单击此处查看 SQL Fiddle 中的示例数据脚本。**](http://sqlfiddle.com/#!2/f1601/7)

```
CREATE VIEW Orthos AS
SELECT  d.cid,d.did
FROM    Doctors d
WHERE d.speciality='Orthopedist';

CREATE VIEW OrthosPerInc AS
SELECT  o.cid, COUNT(o.did) as countd4i
FROM Orthos o
GROUP BY o.cid;

CREATE VIEW OrthoVisitsPerPat AS
SELECT v.pid,COUNT(o.did) as countv4d
FROM Orthos o,Visits v,Doctors d
WHERE o.did=v.did and d.did=o.did
GROUP BY v.pid,d.cid;

SELECT  p.pname,p.pid,p.cid
FROM  OrthoVisitsPerPat v, OrthosPerInc i,Patient p
WHERE i.countd4i = v.countv4d and p.pid=v.pid and p.cid=i.cid;

DROP VIEW IF EXISTS Orthos,OrthosPerInc,OrthoVisitsPerPat; 
```

我怎样才能把它写在一个查询上？

# 试图：

到目前为止，这是我解决这个问题的尝试。

```
SELECT  p.pid,p.pname,p.cid,COUNT(v.did)
FROM Visits v 
JOIN Doctors d ON v.did=d.did
JOIN Patient p ON p.pid=v.pid
WHERE d.cid=p.cid and d.speciality="Orthopedist"
GROUP BY p.pid,p.cid;

INTERSECT 

SELECT  p.pid,d.cid,COUNT(d.did)
FROM Doctors d 
JOIN Patient p ON p.cid=d.cid
WHERE d.speciality='Orthopedist'
GROUP BY d.cid; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T15:27:38.393

### 熟悉您拥有的数据：

第一个关键是了解您拥有哪些数据。在这种情况下，您有四个表

*   保险公司
*   病人
*   医生
*   访问

### 你的目标：

查找访问与其保险公司相关的所有骨科医师（专科）的所有患者的列表。

### 让我们退后一步，分小块分析它：

一般来说，从整体上看，这些要求可能会有点压倒性。让我们将需求拆分为更小的组件，以了解您需要做什么。

1.  *A 部分：*您需要找到专长为“骨科医师”的医生名单
2.  *b 部分：*查找在#1 中确定的就诊过医生的患者列表。
3.  *c 部分：*过滤结果 #2 以查找共享同一保险公司的患者和医生的列表。
4.  *d 部分：*找出与患者属于同一保险公司的*骨科医生中的每一位的患者。*

### 如何接近：

1.  您需要确定您的主要目标，在本例中是确定患者列表。因此，首先查询 Patient 表。

2.  你有病人，实际上是所有人，但我们需要找出这些病人中的哪些人去看了医生。让我们不要担心医生是否是骨科医生。我们只需要病人名单和他们去过的医生。Patient 和 Doctors 表之间没有映射。要了解这些信息，

    *在正确的关键字段上加入 Patient 表和 Visits 表。*

    *然后在正确的关键字段上将输出与 Doctors 表连接起来。*

3.  如果您正确地完成了连接，您现在应该拥有他们访问过的所有患者和医生的列表。如果您使用`LEFT OUTER JOIN`，您甚至会发现从未看过医生的患者。如果您使用`RIGHT OUTER JOIN`，您将只找到看过医生的患者。

4.  现在，您拥有他们访问过的所有患者和医生。*但是，要求是只找到骨科*医生。因此，应用条件过滤结果以仅给出所需的结果。

5.  您现在已经实现了将要求拆分为*部分 a*和*部分 b*中的较小组件。您仍然需要由保险公司对其进行过滤。这是棘手的部分，要求并没有说您需要显示保险公司，因此我们不必使用表 InsuranceCompanies。你的下一个问题将`'How am I going to filter the results?'`。有效点。找出三个表中的任何一个`Patient`，`Doctor`并`Visits`包含保险公司信息。`Patient`并且`Doctors`有一个共同的领域。加入该公共字段以过滤结果。

6.  查找每位患者访问过的唯一*骨科医生的数量。*

7.  这是可以通过多种方式完成的部分，其中一种方法是添加一个子查询，该查询将成为输出中的第四列。此子查询将查询表 Doctors 并按专业 = 'Orthopedist' 过滤。除了该过滤器之外，您还必须通过将内部表上的保险公司与主查询上的患者表上的保险公司 ID 进行匹配来进行过滤。此子查询将返回与患者数据匹配的保险公司 ID 的所有骨科医师的计数。

8.  您现在应该拥有来自子查询的字段`patient id`、`patient name`和。然后，您可以添加一个外部连接，该连接将过滤来自此派生表的结果，其中包含与 匹配 的字段。我并不是说这是最好的方法。这是我能想到的一种方法。`patients visits count``total number of Orthopedists in same insurance company``patients visits count``total number of Orthopedists in same insurance company`

9.  如果你按照上面的逻辑，你应该有这个。

看过所有医生的患者名单

仅由骨科医生筛选

由共享相同保险公司信息的患者和医生过滤。

同样，整个输出然后由派生表输出中的两个计数字段过滤。

### 球在你的球场上：

*   一步一步尝试，一旦你找到答案。将其作为单独的答案发布在这里。我会赞成它以弥补你在这个问题上得到的所有反对票。

我相信你可以轻松做到这一点。

### 如果你绊倒...

不要犹豫，将您的问题发布为`comments to this answer`，其他人和我将很乐意为您提供帮助。

### 免责声明

我提供了如何实现此逻辑的多种方法之一。我确信有很多方法可以以更好的方式实现这一点。

# 结果：

请参阅@Ofek Ron 的答案以获取产生所需输出的正确查询。我没有写查询的任何部分。这都是OP的努力。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T16:03:12.080

@Siva 的解释：

这是第 1-5 部分的结果代码：

```
SELECT *
FROM Patient p
JOIN Visits v ON v.pid=p.pid
JOIN Doctors d ON d.did=v.did and d.cid=p.cid
WHERE d.speciality="Orthopedist" 
```

应用第 6 部分：

```
SELECT p.pid,COUNT(d.did)
FROM Patient p
JOIN Visits v ON v.pid=p.pid
JOIN Doctors d ON d.did=v.did and d.cid=p.cid
WHERE d.speciality="Orthopedist"
GROUP BY p.pid 
```

应用其余部分：[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!2/f1601/134)

```
SELECT p.pid,p.cid,COUNT(DISTINCT d.did) as c
FROM Patient p
JOIN Visits v ON v.pid=p.pid
JOIN Doctors d ON d.did=v.did and d.cid=p.cid
WHERE d.speciality="Orthopedist"
GROUP BY p.pid
HAVING (p.cid,c) IN 
  (SELECT d.cid,COUNT(DISTINCT d.did)
  FROM Doctors d
  WHERE d.speciality="Orthopedist"
  GROUP BY d.cid); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T14:49:35.440

也许是这样的：

```
SELECT
    p.pname,
    p.pid,
    p.cid
FROM
    Patient AS p
    JOIN
    (
        SELECT v.pid,COUNT(o.did) as countv4d
        FROM    Doctors d
        JOIN    Visits v ON o.did=v.did
        WHERE d.speciality='Orthopedist'
        GROUP BY v.pid,d.cid;
    ) AS v
    ON p.pid=v.pid
    JOIN 
    (
        SELECT  o.cid, COUNT(o.did) as countd4i
        FROM    Doctors d
        WHERE d.speciality='Orthopedist'
        GROUP BY o.cid;
    ) AS i
    ON p.cid=i.cid
WHERE
    i.countd4i = v.countv4d 
```

# asp.net - iTextSharp 生成 PDF 并直接在浏览器上显示

> ID：10462853
> 
> 赞同：3
> 
> 时间：2012-05-05T14:36:25.753
> 
> 标签：asp.net, pdf-generation, itextsharp

在 ASP.Net 上使用 iTextSharp 创建后如何打开 PDF 文件？我不想将它保存在服务器上，而是直接**在生成新的 PDF 时，它会显示在浏览器上**。有可能这样做吗？

这是我的意思的示例：[单击此处](http://examples.extjs.eu/?ex=download)。但是在这个例子中，文件是直接下载的。

我怎样才能做到这一点？

```
 Dim doc1 = New Document()

    'use a variable to let my code fit across the page...
    Dim path As String = Server.MapPath("PDFs")
    PdfWriter.GetInstance(doc1, New FileStream(path & "/Doc1.pdf", FileMode.Create))

    doc1.Open()
    doc1.Add(New Paragraph("My first PDF"))
    doc1.Close() 
```

上面的代码确实将 PDF 保存到服务器。

非常感谢您！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T14:46:22.930

您需要在`Content Type`_ `Response object`_`binary``pdf``header`

```
 private void ReadPdfFile()
    {
        string path = @"C:\Somefile.pdf";
        WebClient client = new WebClient();
        Byte[] buffer =  client.DownloadData(path);

        if (buffer != null)
        {
            Response.ContentType = "application/pdf"; 
            Response.AddHeader("content-length",buffer.Length.ToString()); 
            Response.BinaryWrite(buffer); 
        }

    } 
```

（或）您可以`System.IO.MemoryStream`用来阅读和显示：

在这里你可以找到这样做的方式

[直接通过代码打开生成的pdf文件，无需保存到磁盘](https://stackoverflow.com/questions/7761007/open-generated-pdf-file-through-code-directly-without-saving-it-onto-the-disk)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T15:09:30.833

用下面的代码解决了这个问题：

```
 HttpContext.Current.Response.ContentType = "application/pdf"
    HttpContext.Current.Response.AddHeader("content-disposition", "attachment;filename=GridViewExport.pdf")
    HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache)

    Dim pdfDoc As New Document()
    PdfWriter.GetInstance(pdfDoc, HttpContext.Current.Response.OutputStream)

    pdfDoc.Open()
    'WRITE PDF <<<<<<

    pdfDoc.Add(New Paragraph("My first PDF"))

    'END WRITE PDF >>>>>
    pdfDoc.Close()

    HttpContext.Current.Response.Write(pdfDoc)
    HttpContext.Current.Response.End() 
```

希望有所帮助！:)

# javascript - javascript如何克隆

> ID：10462855
> 
> 赞同：0
> 
> 时间：2012-05-05T14:36:31.430
> 
> 标签：javascript, jquery, css

[http://jsfiddle.net/89qZM/1/](http://jsfiddle.net/89qZM/1/)

```
...
 searchAndRepairRules: function(externalStyleSheetContents) {
                var contents = [];
                    alert(externalStyleSheetContents); //externalStyleSheetContents
                    contents = externalStyleSheetContents;
                    contents[0] = 0;
                    alert(externalStyleSheetContents); //0
        },
... 
```

为什么当我影响内容时，它也会影响 externalStyleSheetContents，我该如何避免？请帮忙）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T14:37:52.577

因为对象总是通过引用传递。

要克隆数组，请使用`newarr = oldarr.slice(0);`

# html - 如何隐藏侧边栏并阻止 div 容器包装？

> ID：10462862
> 
> 赞同：0
> 
> 时间：2012-05-05T14:37:06.767
> 
> 标签：html, css, overflow, sidebar

我有一个图像和一个侧边栏。

```
<div id="outer" style="max-width:1020px;min-width:730px;overflow:hidden;overflow-x:hidden;overflow-y:hidden;">

  <div id="image" style="float:left;max-width:720px;">
    <img src="image.jpg" alt="" style="max-width:720px;" />
  </div>

  <div id="sidebar" style="width:300px;float:right;">
    content
  </div>

</div>
```

如果调整窗口大小并且没有足够的空间显示侧边栏，我希望侧边栏消失。

不幸的是，当调整窗口大小时，侧边栏会掉到底部并换行。

我试过`white-space: nowrap;`了，但这似乎不适用于这里。图像容器可以有各种高度，所以我不能将它设置为固定高度。

如何`div`在调整窗口大小时阻止“外部”扩展并使侧边栏退出视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:54:12.443

老实说，您应该使用响应式网格来实现这一点，Twitter 的引导程序有一种非常清晰的方式来实现您正在寻找的所需行为，但是那里有很多..

[引导程序](http://twitter.github.com/bootstrap/scaffolding.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:00:17.420

你可以用，

```
window.onresize = function(event) {
    if(document.body.cilentwidth < 1020) 
      document.getElementById('sidebar').style.visibility = 'hidden';
    else
       document.getElementById('sidebar').style.visibility = 'visible';
} 
```

javascript中的resize事件，检查现有窗口的宽度并根据它，然后`document.getElementById('sidebar').style.visibility = 'hidden/visible'`根据您的要求隐藏/显示div。

# c# - 为什么 C# 中没有真正的不可变集合？

> ID：10462863
> 
> 赞同：3
> 
> 时间：2012-05-05T14:37:19.253
> 
> 标签：c#, immutability

我目前正在学习 C#，并且我有一个包含 ISet 的类的情况。我不希望客户直接修改这个集合，大多数客户只添加和删除，我通过我的类提供访问器来做到这一点。

但是，我有一个客户希望更多地了解这一套及其内容。我真的不想用这个客户端的很多方法来混淆包装类本身，所以我希望能够以不可变的方式返回集合本身。

我发现我不能——嗯，不是真的。我似乎唯一的选择是：

1.  返回一个 IEnumerable（否：限制性功能）；
2.  ReadOnlyCollection (No: It's a LIST);
3.  返回一个副本（否：恕我直言，错误的形式，允许客户端修改返回的集合，可能不知道它不会改变真实对象，而且它有性能开销）；
4.  实现我自己的 ReadOnlySet（否：需要从 ISet 派生，因此意味着我需要实现 mutators，可能会触发异常，我宁愿编译时错误 - 而不是运行时）。

我错过了什么吗？我是不是太不讲理了？在我的包装器上提供全套访问器是我唯一的选择吗？我为绝大多数客户保持包装清洁的初衷是否不正确？

所以两个问题：

1.  为什么没有标准的 C# 不可变 Collection 接口？这似乎是一个相当合理的要求？

2.  为什么 ReadOnlyCollection 实际上是一个 ReadOnlyList 时却令人讨厌地称为 ReadOnlyCollection？我打算硬着头皮使用它，直到我发现它是一个列表（并且我使用了一个集合）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T15:22:13.503

> 为什么没有标准的 C# 不可变接口？这似乎是一个相当合理的要求？

*   标准 C# 不可变¹ 接口已经存在：它被调用`IEnumerable`并且所有容器都实现它。

*   更强大的不可变接口是有问题的，因为不可变接口有很[多种](http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx)。如果 BCL 团队决定选择一个不变性的定义并将其提升到*不变性*状态，那么可以肯定的是，寻找另一种不变性的人们会抱怨这种选择。

    让每个人都满意意味着不仅要整理出所有的不变性混乱，还要创建许多接口（祝他们好运也为它们挑选好名字）并将所有这些不变性概念很好地融入语言中，以使不变性成为一等公民——记住这里没有第二次机会，一旦你发布了一个公共类，它的公共接口就永远不可变（双关语）。虽然所有这些可能都很好，但我对[成本/收益比](http://blogs.msdn.com/b/ericgu/archive/2004/01/12/57985.aspx)持怀疑态度。

*   定义 并不难`IReadOnlyList`，`IReadOnlySet`如果您确实需要它们。我假设它们不存在，因为再次减去 100 分。

*   `ReadOnlyCollection`恕我直言，要么是 BCL 内部需要的特许权，要么是向世界公开的类，因为嘿，BCL 团队以非常低的成本提供免费功能（因为无论如何它都必须实施、记录和测试）。无论如何，我不认为它*不是*`System.Collections.Generic`偶然住在迷人的街区。

> 为什么 ReadOnlyCollection 实际上是一个 ReadOnlyList 时却令人讨厌地称为 ReadOnlyCollection？我打算硬着头皮使用它，直到我发现它是一个列表（并且我使用了一个集合）。

我确信 BCL 团队希望能够及时回到过去并修复它，因为它几乎肯定是那些不可避免地潜入任何类似范围的库的小不一致之一。由于`ReadOnlyCollection`实现`IList`了它肯定应该被调用`ReadOnlyList`。

但是，鉴于“列表”提供*的*功能比“集合”更多，我看不出这会如何阻止您。a 也不是`Set`，因此无论如何您都必须在它们之上构建与集合相关的功能（这不是一个好主意；只需在 之上构建只读语义`Set`）。

* * *

¹我们在这里经常折腾“不可变”，但这个词没有单一的含义。我认为使用“只读”会更合适，但为了保持一致性，我会选择您选择的词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:58:58.947

我认为您提供该集合的只读“副本”而不实际将数据复制到相同或不同结构的另一个实例中的唯一方法是使用包装器并实现所有项目添加和-删除方法以引发异常。

如果您的集合仅作为一种方式公开`ISet`，那么消费者只会看到接口上定义的成员，无论您的包装器包含什么 - 这似乎不是一件坏事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T15:08:35.230

这可能会有所帮助， [http://blogs.msdn.com/b/jaredpar/archive/2008/04/22/api-design-readonlycollection-t.aspx](http://blogs.msdn.com/b/jaredpar/archive/2008/04/22/api-design-readonlycollection-t.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T05:53:38.350

我同意，如果 .net 对不变性和只读包装器有更好的支持，那就太好了，尽管我认为重要的是要注意这些概念之间存在巨大差异。只读包装器向它的创建者承诺，它的消费者将无法更改底层对象，但不向消费者承诺底层对象本身不会改变。相比之下，不可变对象向其创建者和消费者承诺其值不会改变。

我不知道为什么有许多不同类型的免疫力的概念应该是一个问题。如果我有`ImmutableList<T>`一个不合格的泛型，`T`我的期望是它将始终包含与`T`创建时相同的 's。该集合绝不会影响`T`'s 的任何属性是否可以更改，因此不应期望它。

如果我有我的 druthers，大多数与集合相关的接口将包括可读、可变和不可变的变体（可变和不可变都将从可读扩展）。我还将添加一个只写逆变 IAppendable 接口，以及一个`IImmutableEnumerable`派生自`IEnumerable`（我将向`ToImmutable`IEnumerable（和 IImmutableEnumerable）添加一个方法；一个实现可以构造一个不可变集合，但在某些情况下可能不是最好的方法。例如，可变对象可能`IEnumerable`通过返回可变元素的可变数量的副本来实现。如果副本数量很大，转换为简单的集合可能会非常浪费。

# python - 如何在 django 中使用 south 将 CharField 替换为 ForeignKey？

> ID：10462864
> 
> 赞同：1
> 
> 时间：2012-05-05T14:37:21.570
> 
> 标签：python, django, django-south

**我的任务模型：**

```
class Tasks(models.Model):
    state = models.CharField(max_length = 150) 
```

我想将状态字段更改为 ForeignKey`state = models.ForeignKey(States)`

**国家模式将是：**

```
class States(model.Model):
    name = models.CharField(max_length = 150) 
```

顺便说一句，我将**Django non-rel**与**django mongodb 一起使用。**

使用南方容易吗？或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:59:52.070

我将分六个步骤（迁移）：

*   第一步 data_migration（南命令）：我创建了 States 对象。
*   第二步schema_migration（南命令）：我在Tasks中添加了一个fk，名称将是state_bk
*   第三步 a data_migration：迁移所有任务并将状态分配给任务
*   Quarter schema_migration：删除 states charfield 并创建 states fk
*   第五个 data_migration：将值从 state_bk 迁移到 state
*   第六个 schema_migration：删除 state_bk 字段

这很容易，但有点乏味

# vb.net - vb.net：关于使用文本框更新 .mdb 文件数据

> ID：10462874
> 
> 赞同：0
> 
> 时间：2012-05-05T14:37:59.253
> 
> 标签：vb.net

我想使用文本框更新 .mdb 文件数据

```
 Dim connStr As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=staffdata.mdb"
    Dim sqlStr As String = "Select * from staff"
    Dim dataAdapter As New OleDb.OleDbDataAdapter(sqlStr, connStr)
    dataAdapter.Fill(dt)
    dataAdapter.Dispose() 
```

如何使用Textbox更新.mdb文件数据，
例如：当我在TextBox1中输入密码后单击更新按钮时，
人员表将更新我的新密码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:36:20.370

它与使用普通的 sqldatabase 相同，您可以使用您学过的任何其他查询的表适配器。

# cocoa - 如何从代码中禁用 NSBox

> ID：10462876
> 
> 赞同：1
> 
> 时间：2012-05-05T14:38:19.793
> 
> 标签：cocoa, nsbox

我在 NSBox 中放置了几个控件（按钮、文本字段、...）。是否可以禁用用户无法访问控件的 NSBox（意味着无法单击按钮或在文本字段中写入）？

nsview 怎么样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T15:22:26.313

NSBox 基本上只是一个带边框的视图，没有办法“禁用”它。如果要禁用框中的所有控件，可以循环遍历其所有子视图并禁用它们，或者我这样做的另一种方法是在整个框上放置一个覆盖视图并覆盖该覆盖中的 mouseDown （以捕获任何 mouseDown 事件，因此它们不会在事件循环中排队）。您还可以将覆盖层设置为半透明的白色，以使框具有禁用的外观。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T16:34:33.750

或者，如果你有一个自定义的 NSBox，你可以覆盖 NSView 的 -hitTest: (有条件地)

```
- (NSView *)hitTest:(NSPoint)aPoint {
    if (!enabled) return nil;
    else return [super hitTest:aPoint];
} 
```

阻止窗口向所有子视图发送事件。

为了提供视觉反馈，有条件地在自定义 NSBox 的 -drawRect 方法中绘制某种叠加层会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T20:52:52.293

是的，您只需要查看 NSBox 的子视图，它通常只是一个 NSView，然后您的实际控件将位于该子视图下。

这是我编写的一个快速 C 风格函数，用于启用/禁用最常见的 UI 控件，包括 NSBox...

```
void SetObjEnabled(NSObject * Obj, bool Enabled)
{
    //Universal way to enable/disable a UI object, including NSBox contents

    NSControl * C = (NSControl *)Obj;

    if([C respondsToSelector:@selector(setEnabled:)])
        [C setEnabled:Enabled];

    if([C.className compare:@"NSTextField"] == NSOrderedSame)
    {
        NSTextField * Ct = (NSTextField*)C;
        if(!Enabled)
            [Ct setTextColor:[NSColor disabledControlTextColor]];
        else //Enabled
            [Ct setTextColor:[NSColor controlTextColor]];
    }
    else if([C.className compare:@"NSBox"] == NSOrderedSame)
    {
        NSBox * Cb = (NSBox*)C;

        //There is typically just one subview at this level
        for(NSView * Sub in Cb.subviews)
        {
            //Here is where we'll get the actual objects within the NSBox
            for(NSView * SubSub in Sub.subviews)
                SetObjEnabled(SubSub, Enabled);
        }
    }
} 
```

# objective-c - 将 struct 与 Objective-C 方法一起使用

> ID：10462880
> 
> 赞同：1
> 
> 时间：2012-05-05T14:38:54.277
> 
> 标签：objective-c, data-structures, objective-c++

我正在编写一个简单的游戏，并认为使用结构会容易得多。但是，我不能声明需要结构的方法。

如何使用结构作为 Objective-C 方法的参数并返回结构的对象？

```
//my structure in the .h file
struct Entity
{
  int entityX;
  int entityY;
  int entityLength;
  int entityWidth;
  int entityType;
  bool isDead;
};

//And the methods i'm trying to use
-(BOOL)detectCollisionBetweenEntity:Entity ent1 andEntity:Entity ent2;

-(struct Entity)createEntityWithX:int newEntityX andY:int newEntityY, withType:int newEntityType withWidth:int newEntityWidth andLength:int newEntityLength; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T16:04:49.723

您可以完全按照您的预期使用结构，您的问题似乎与方法的语法有关：

```
struct Entity
{
  int entityX;
  int entityY;
  int entityLength;
  int entityWidth;
  int entityType;
  bool isDead;
};

//And the methods i'm trying to use
-(BOOL)detectCollisionBetweenEntity:(struct Entity) ent1 andEntity:(struct Entity) ent2;

-(struct Entity)createEntityWithX:(int) newEntityX andY:(int) newEntityY withType:(int) newEntityType withWidth:(int) newEntityWidth andLength:(int) newEntityLength; 
```

方法中的类型需要在括号中，除非你 typedef 否则你必须引用`struct Entity`而不是`Entity`（在普通的 Objective-C 中，Objective-C++ 可能会让你这样做）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T16:07:54.430

在 Objective-C 中，结构一直被用作参数。例如 Apple 的[CGGeometry Reference中的 CGRect](https://developer.apple.com/documentation/coregraphics/cggeometry?language=objc)

```
struct CGRect {
  CGPoint origin;
  CGSize size; 
}; 
typedef struct CGRect CGRect; 
```

你只需要为你的结构创建一个类型，这可以像 Apple 一样完成，或者可以作为

```
typedef struct CGRect {
  CGPoint origin;
  CGSize size; 
} CGRect; 
```

所以在你的情况下：

```
typedef struct
{
  int entityX;
  int entityY;
  int entityLength;
  int entityWidth;
  int entityType;
  bool isDead;
} Entity; 
```

应该允许你定义

```
-(BOOL)detectCollisionBetweenEntity:(Entity) ent1 andEntity:(Entity) ent2;
-(Entity)createEntityWithX:int newEntityX andY:int newEntityY, withType:int newEntityType withWidth:int newEntityWidth andLength:int newEntityLength; 
```

# linux - 从中断返回时必须使用 IRET 吗？

> ID：10462884
> 
> 赞同：4
> 
> 时间：2012-05-05T14:39:13.153
> 
> 标签：linux, assembly, operating-system, linux-kernel, x86

IRET可以从堆栈中恢复寄存器，包括EFLAGS、ESP、EIP等，但我们也可以自己恢复所有寄存器。例如，“movl”可以用来恢复%esp寄存器，“jmp”可以跳转存储在堆栈中的指向EIP的地址。

linux内核通过IRET从所有中断中返回，这是一个权重指令。

一些内核操作（如上下文切换）经常发生。

IRET不是浪费吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T15:51:30.607

除了简单的混合之外，所有繁重的东西`IRET`可以而且经常应该做`POPF+RETF`，它还有一件事要做。它有一个与*不可屏蔽中断*相关的特殊功能（`NMIs`）。

并发的 NMI 会被一一下发给 CPU。`IRET`向 NMI 电路发出信号，表明现在可以提供另一个 NMI。没有其他指令可以发出这种信号。如果 NMI 可以抢占其他 NMI ISR 的执行，它们将能够导致堆栈溢出，这很少是一件好事。除非我们谈论的是这个精彩的网站。:)

所以，总而言之，`IRET`不是浪费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:44:22.067

可能是因为手动完成所有这些都需要更多的 CPU 时钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T14:56:58.957

来自[维基百科](http://en.wikibooks.org/wiki/X86_Assembly/Advanced_Interrupts)：

> 发生中断时调用的实际代码称为中断服务程序 (ISR)。当异常发生、程序调用中断或硬件引发中断时，处理器使用几种方法之一（待讨论）将控制权转移给 ISR，同时允许 ISR 安全地将控制权返回给它之后中断的任何东西执行完毕。至少，保存 FLAGS 和 CS:IP 并加载 ISR 的 CS:IP；但是，某些机制会导致在 ISR 开始之前发生完整的任务切换（以及结束时的另一个任务切换）。

所以`IRET`不是浪费，它是从 ISR 返回的最小（也是最快的方式）。此外，在 ISR 中使用的所有其他 CPU 寄存器必须在开始时保留并在执行前`IRET`恢复！

# objective-c - 使用现有 UINavigationController 在 UIPopoverController 中显示 UIImagePickerController（添加后退按钮）

> ID：10462893
> 
> 赞同：11
> 
> 时间：2012-05-05T14:41:30.217
> 
> 标签：objective-c, ios, uikit, uiimagepickercontroller, uipopovercontroller

所以我有一个`UIPopoverController`我的房子我`UINavigationController`有我的地方`UITableViewController`但是我的一个选择`UITableView`是去选择一个带有`UIImagePickerController`...的图像现在在iPhone上我可以简单地使用`presentModalViewController:animated:`但是从 UIPopoverController 中调用它会导致崩溃所以那就是不可能...

我也知道`UIImagePickerController`自己的需求`UINavigationController`，所以我也不能随便推`pushViewController:animated:`...

所以我发现如果我保留一个指向`UIPopoverController`我创建的链接，然后我可以`setContentViewController:animated:`用来切换到 UIImagePickerController 的 viewController ...

但是，我现在坚持为用户提供一种返回上一个的方法，`UINavigationController`因为我需要能够添加一个取消按钮，`UIImagePickerController`但是当我尝试这样做时，取消按钮不会被添加......

这是我正在使用的代码

```
-(void)doPhotoalbums {
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) {

        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
        [imagePicker setDelegate:self];
        [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
        [imagePicker setContentSizeForViewInPopover:CGSizeMake(320, 480)];

        UIBarButtonItem *cancel = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:nil];
        [imagePicker.navigationItem setLeftBarButtonItem:cancel];

        //[self presentModalViewController:imagePicker animated:YES];
        [[self parentPopoverController] setContentViewController:imagePicker animated:YES];

    } else {
        [UIAlertView showMessage:@"This device does not have any photo albums."];
    }
} 
```

所以我的问题是..有人知道我怎么能解决这个问题吗？通过添加一个取消/后退按钮，我可以连接以使导航控制器切换回来，或者以另一种方式呈现这个（我想避免在两个 UIPopoverControllers 之间切换，但我不知道我还能做什么......

谢谢

利亚姆

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T15:17:05.770

啊..稍事休息后，我发现了这个：[https ://discussions.apple.com/thread/1710435?start=0&tstart=0](https://discussions.apple.com/thread/1710435?start=0&tstart=0)

使用 UINavigationControllerDelegate 您可以使用该`navigationController:willShowViewController:animated:`方法访问导航栏。然后使用一些代码（如下）您可以添加一个按钮。

```
if ([navigationController isKindOfClass:[UIImagePickerController class]]) {

    UINavigationBar *bar = navigationController.navigationBar;
    UINavigationItem *top = bar.topItem;

    UIBarButtonItem *cancel = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(imagePickerControllerDidCancel:)];
    [top setLeftBarButtonItem:cancel];

} else { 

    //do non imagePickerController things 

} 
```

# jquery - 谷歌地图分页

> ID：10462899
> 
> 赞同：-1
> 
> 时间：2012-05-05T14:41:57.707
> 
> 标签：jquery, google-maps, pagination

我正在尝试使用谷歌地图来工作；我已经下载了一个示例并尝试对其进行修改，但我在 jQuery 方面不太擅长。请看这两个链接：

[http://drmorphe.us/tests/googleMaps/jquery-google-maps-extend-with-pagination.html](http://drmorphe.us/tests/googleMaps/jquery-google-maps-extend-with-pagination.html)

该链接工作正常并且位置不断变化，但如果我们有很多记录，这种风格就不好了。我有大约 500 条记录，我打算将它们绑定到“数据表”中，但我不知道如何制作可以正常工作的链接。

看看我想要实现的目标：

[http://drmorphe.us/tests/googleMaps/jquery-google-maps-extend-with-pagination2.html](http://drmorphe.us/tests/googleMaps/jquery-google-maps-extend-with-pagination2.html)

通过这种方式，我可以显示链接，但我需要它们工作，这些应该让我们获得提供的准确经度和纬度 (panTo)。

PS jquery.ui.map.extentions.js 已被修改以实现此目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:52:55.277

这里有一些提示，假设您想从实时数据库中查找这些位置。

1.  呈现链接列表，`id`每个链接都有一个唯一的
2.  让每个点击事件都起作用，返回 false ，这样事件就不会冒泡。
3.  将单击处理程序附加到每个项目，可能通过每个项目上的类。
4.  在处理程序中，检测`id`，并通过 AJAX 将其发送到服务器。
5.  在服务器中，查找坐标，并以 JSON 格式呈现它们。
6.  在 JavaScript 中获取坐标并重新居中地图，或创建一个新图钉等。

那应该让你排序！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:52:56.703

由于 JavaScript 错误，您的应用程序无法正常运行。

请打开`jquery.ui.map.extension2.js`文件并编辑行`119`。事件`onclick`不应以`"function("`. 代替

```
onclick="function(map.panTo(new GLatLng(33.69877782,73.00711869)));" 
```

写

```
onclick="map.panTo(new GLatLng(33.69877782,73.00711869));" 
```

# actionscript-3 - 如何在 AS3 中创建漩涡效果？

> ID：10462901
> 
> 赞同：1
> 
> 时间：2012-05-05T14:42:31.163
> 
> 标签：actionscript-3, flash, graphics

我想对一些 BitmapData 进行操作和动画处理以创建漩涡效果，例如在下面的链接中找到的效果：

[http://www.flash-filter.net/swirl-effect.phtml](http://www.flash-filter.net/swirl-effect.phtml)

我可以应用哪些技术？

顺便说一句：是的，我知道效果很丑......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T16:19:02.203

如果您正在寻找如何实现漩涡效果，即算法。以下是关于如何转换图像的一个很好的分步说明：Image- [Twist and Swirl Algorithm](http://supercomputingblog.com/openmp/image-twist-and-swirl-algorithm/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T19:58:13.637

像素折弯机是克里格！

虽然我同意前面的答案，但我想指出，您可以通过仅使用多年来存在的位图过滤器来实现这种效果：即 DisplacementMapFilter。创建一个以圆形方向移动像素的置换贴图，并将此贴图多次应用于图像。这将为您带来旋转的转变。

这是我的简单实现。
用法非常简单（见课后）。

```
package org.noregret.images
{
    import flash.display.BitmapData;
    import flash.display.BitmapDataChannel;
    import flash.display.BlendMode;
    import flash.display.DisplayObject;
    import flash.display.GradientType;
    import flash.display.InterpolationMethod;
    import flash.display.SpreadMethod;
    import flash.display.Sprite;
    import flash.filters.DisplacementMapFilter;
    import flash.filters.DisplacementMapFilterMode;
    import flash.geom.Matrix;
    import flash.geom.Point;
    import flash.geom.Rectangle;

    /**
     * @author Nox Noctis (http://noregret.org)
     */
    public class Swirl 
    {
        public var target : DisplayObject;
        public var allowCache : Boolean = false;
        public var levels : uint;
        public var isDestroyed : Boolean;

        protected var bitmapMargin : Point;
        protected var filter : DisplacementMapFilter;
        protected var radius : int;
        protected var cache : Object;
        protected var map : BitmapData;

        protected var targetRect : Rectangle;
        protected var mapOffset : Point;
        protected var maxLevel : Number = 1;

        public function Swirl(_target : DisplayObject, _filterLevels : uint = 10, _allowCache : Boolean = true) 
        {

            target = _target;
            allowCache = _allowCache;
            levels = _filterLevels;

            cache = {};

            filter = new DisplacementMapFilter();
            filter.componentX = BitmapDataChannel.RED;
            filter.componentY = BitmapDataChannel.GREEN;
            filter.scaleX = -20;
            filter.scaleY = -20;
            filter.mapPoint = new Point();
            filter.mode = DisplacementMapFilterMode.IGNORE;
        }

        private function createDisplacementMap() : void
        {
            targetRect = target.getRect(target);

            radius = Math.max(Math.max(targetRect.width, targetRect.height), 100) / 2;
            radius = Math.sqrt(2) * radius;

            mapOffset = new Point(radius - targetRect.width / 2, radius - targetRect.height / 2);   

            var mapSprite : Sprite = new Sprite();
            var redLayer : Sprite = new Sprite();
            var greenLayer : Sprite = new Sprite();
            var grayLayer : Sprite = new Sprite();
            mapSprite.addChild(redLayer);
            mapSprite.addChild(greenLayer);
            mapSprite.addChild(grayLayer);

            var gradientMatrix : Matrix;

            gradientMatrix = new Matrix();
            gradientMatrix.createGradientBox(radius * 2, radius * 2, Math.PI / 2, -radius, -radius);

            redLayer.graphics.lineStyle(0, 0, 0);
            redLayer.graphics.beginGradientFill(GradientType.LINEAR, [0xFF0000, 0], [100, 100], [0, 255], gradientMatrix, SpreadMethod.PAD, InterpolationMethod.RGB);

            redLayer.graphics.drawCircle(0, 0, radius);
            redLayer.graphics.endFill();

            greenLayer.graphics.lineStyle(0, 0, 0);
            gradientMatrix.createGradientBox(radius * 2, radius * 2, 0, -radius, -radius);
            greenLayer.graphics.beginGradientFill(GradientType.LINEAR, [0x00FF00, 0x00FF00], [0, 100], [10, 245], gradientMatrix, SpreadMethod.PAD, InterpolationMethod.RGB);

            greenLayer.graphics.drawCircle(0, 0, radius);
            greenLayer.graphics.endFill();
            greenLayer.blendMode = BlendMode.ADD;

            gradientMatrix = new Matrix();
            gradientMatrix.createGradientBox(radius * 2, radius * 2, 0, -radius, -radius);
            grayLayer.graphics.lineStyle(0, 0, 0);
            grayLayer.graphics.beginGradientFill(GradientType.RADIAL, [0x808080, 0x808080], [0, 100], [0, 0xFF], gradientMatrix, SpreadMethod.PAD, InterpolationMethod.RGB);
            grayLayer.graphics.drawCircle(0, 0, radius);
            grayLayer.graphics.endFill();

            var rect : Rectangle = mapSprite.getRect(mapSprite);
            var matrix : Matrix = new Matrix();
            matrix.translate(-rect.x, -rect.y);
            if (map) {
                map.dispose();
            }
            map = new BitmapData(rect.width, rect.height, false, 0xFF808080);
            map.draw(mapSprite, matrix);
            filter.mapBitmap = map;
        }

        public function swirlTo(ratio : Number) : BitmapData
        {
            if (isDestroyed) {
                trace("Swirl: error! Tried to swirl on disposed item.");
                return null;
            }
            if (ratio < 0) {
                ratio = 0;
            }

            var level : uint = Math.round(levels * ratio);
            var cacheName : String = getCacheName(level);
            if (cache[cacheName]) {
                return (cache[cacheName] as BitmapData).clone();
            }

            var rect : Rectangle = target.getRect(target);
            if (!map || rect.width != targetRect.width || rect.height != targetRect.height) {
                createDisplacementMap();
                flushCache();
            }

            var point : Point = new Point(-targetRect.x, -targetRect.y);
            bitmapMargin = new Point(point.x + mapOffset.x, point.y + mapOffset.y);

            var bmp : BitmapData;
            if (cache["l" + maxLevel]) {
                bmp = cache["l" + maxLevel] as BitmapData;
            } else {
                bmp = new BitmapData(map.width, map.height, true, 0);
                var matrix : Matrix = new Matrix();
                matrix.translate(bitmapMargin.x, bitmapMargin.y);
                bmp.draw(target, matrix, null, null, null, true);
            }            

            if (level == 0) {
                cache[cacheName] = bmp.clone();
                return bmp;
            }

            var destPoint : Point = new Point();
            for (var i : Number = maxLevel;i <= level; i++) {
                bmp.applyFilter(bmp, bmp.rect, destPoint, filter);
                if (allowCache) {
                    cache["l" + i] = bmp.clone();
                }
            }
            maxLevel = Math.max(maxLevel, level);

            return bmp;
        }

        private function getCacheName(level : uint) : String
        {
            return "l" + level;
        }

        public function flushCache() : void
        {
            for each (var bmp:BitmapData in cache) {
                bmp.dispose();
            }
            cache = {};
        }

        public function destroy() : void
        {
            flushCache();
            target = null;
            map.dispose();
            map = null;
            isDestroyed = true;
        }
    }
} 
```

使用示例：

```
package
{
    import flash.display.Sprite;
    import flash.display.Loader;
    import flash.events.Event;
    import flash.net.URLRequest;
    import flash.system.LoaderContext;
    import flash.display.Bitmap;
    import org.noregret.images.Swirl;

    [SWF(width="800",height="600",backgroundColor="#FFFFFF",fps="30")]
    public class TestSwirl extends Sprite
    {
        private const loader:Loader = new Loader();
        private const swirlBitmap:Bitmap = new Bitmap();
        private var swirl:Swirl;
        private var time:Number = 0;

        public function TestSwirl()
        {
            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoadComplete);
            var request:URLRequest = new URLRequest("http://i.stack.imgur.com/Vtsvm.gif");
            loader.load(request, new LoaderContext(true));            
        }

        protected function onLoadComplete(event:Event):void
        {
            var original:Bitmap = loader.content as Bitmap;
            addChild(original);

            swirlBitmap.bitmapData = original.bitmapData.clone();
            swirlBitmap.x = original.x + original.width + 10;
            addChild(swirlBitmap);        

            swirl = new Swirl(original,80);
            addEventListener(Event.ENTER_FRAME, onEnterFrame);
        }

        protected function onEnterFrame(event:Event):void
        {
            var ratio:Number = Math.abs(Math.sin(time));
            // ***
            swirlBitmap.bitmapData = swirl.swirlTo(ratio);
            // ***
            time += .02;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T15:08:51.390

为此有一个[Pixel Bender](http://www.adobe.com/devnet/pixelbender.html)过滤器。看看这个链接：

[http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&extid=1536021](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&extid=1536021)

这是关于补间 Pixel Bender 滤镜的教程

[http://plasticsturgeon.com/2011/03/pixel-transition-tweening-a-pixel-bender-filter-in-as3/](http://plasticsturgeon.com/2011/03/pixel-transition-tweening-a-pixel-bender-filter-in-as3/)

您可能还想查看 AS3 ImageProcessing 库

[http://blog.joa-ebert.com/imageprocessing-library/](http://blog.joa-ebert.com/imageprocessing-library/)

这应该给你一个很好的起点

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T15:08:33.933

我建议使用[Pixel Bender](http://www.adobe.com/devnet/pixelbender.html)创建您自己的位图滤镜。

# php - 我可以使用 $string number_format 行来为我的小数上标吗？

> ID：10462902
> 
> 赞同：3
> 
> 时间：2012-05-05T14:42:40.390
> 
> 标签：php, string, decimal, superscript

我想让以下字符串中的小数显示为上标：

```
$string .= number_format(round($value, (int)$decimal_place), (int)$decimal_place, $decimal_point, $thousand_point); 
```

我不是很聪明，但从昨天开始我一直在尝试使用不同的方法，我发现搜索堆栈溢出。像`."<sup>`or just`"<sup>"`和also`.'<sup>'`等许多其他组合，但没有任何效果。由于我在代码中引入的错误，我要么收到错误，要么价格消失，因为正如我所说，我不是棚子里最锋利的工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:51:13.167

请查看我下面的代码，这将格式化您的字符串，然后使用正则表达式为小数上标

```
<?
function superscript_value($value, $prefix = '$') {
    $decimal_place = 2;
    $decimal_point = '.';
    $thousand_point = ',';

    if(round($value, 0) == $value)
        return $prefix . $value;
    else
        return $prefix . preg_replace("/\.(\d*)/", "<sup>.$1</sup>", number_format($value, (int)$decimal_place, $decimal_point, $thousand_point));
}

echo superscript_value(123456.789, '$') . "\n";
// $123,456<sup>.79</sup>
echo superscript_value(10.00, '$') . "\n";
// $10 
```

123,456 ^(.79美元)

10 美元

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T14:46:19.093

您应该为此使用 HTML 格式：

```
$i = 42;
$string .= "<sup>".$i."</sup>"; 
```

它会产生类似^(42)的东西。

# ruby-on-rails - 使用 rails devise invitable 发送密件抄送

> ID：10462903
> 
> 赞同：2
> 
> 时间：2012-05-05T14:42:48.707
> 
> 标签：ruby-on-rails, devise

我在用着：

```
gem 'rails', '3.2.2' 
gem 'devise',           '~> 2.0.0'
gem 'devise_invitable', '~> 1.0.0' 
```

devise_invitable 插件允许我的成员邀请其他成员。

我的控制器看起来像使用类方法邀请！：

```
def create
   #params[resource_name] ==> {"email" => "abc@abc.com"}
   # current_inviter ==> same as current_artist
   # resource_class Artist

   self.resource = resource_class.invite!(params[resource_name], current_inviter)
   ..... 
```

每次通过电子邮件密件抄送发出邀请时，我都希望收到通知，但我不知道在哪里注入。我尝试将密件抄送添加到传递给邀请的哈希中！方法，但这似乎只是设置模型的属性，所以我得到错误：

```
b = Artist.invite!({:email => 'mytest@fjds.com', :name=>'test name', :bcc =>    'test_confirm@gmail.com'},t)

 ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: bcc 
```

我怎样才能得到每个发出的邀请的秘密副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T12:46:34.290

我设法通过重写 DeviseInvitable::Mailer#invitation_instructions 来获得这个功能。这是在生成邀请后负责发送邮件的方法。这可能不是最干净的方法，但它确实有效。

在 config/initializers/devise_invitable.rb 中：

```
module DeviseInvitable
  module Mailer
    def invitation_instructions(record, token, opts = {})
      @token = token
      devise_mail record, :invitation_instructions, opts.merge(bcc: 'recipient@domain.com')
    end
  end
end 
```

这引用了我当前版本`devise_invitable`(1.3.0) 中的实现，但您可以通过查看[Github 中的源代码](https://github.com/scambra/devise_invitable/blob/master/lib/devise_invitable/mailer.rb)轻松找到适合您的实现。

请记住重新启动您的应用程序以使更改生效。更进一步并在配置中设置收件人地址并优雅降级可能也是一个好主意`nil`。

# apache - Apache URL 重写问题

> ID：10462908
> 
> 赞同：2
> 
> 时间：2012-05-05T14:43:49.837
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我已经制定了规则，

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_-]+)/?$ user.php?userid=$1 
```

它将[http://localhost/username](http://localhost/username)重定向到[http://localhost/user.php?id=username](http://localhost/user.php?id=username)工作正常，但对于其他现有文件夹页面仍然重定向到 user.php 页面；不是现有文件夹，例如[http://localhost/folder](http://localhost/folder)它仍然重定向到[http://localhost/folder/?userid=folder](http://localhost/folder/?userid=folder)，它如何使它适用于现有目录，例如当我输入[http://localhost /folder](http://localhost/folder)然后页面应该显示 /folder/ 目录???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:49:47.147

问题是您的第二个 RewriteRule 没有 RewriteConds。您的两个 RewriteConds 仅适用于第一条规则，然后它们停止。因此，第二条规则无条件地适用于每个请求 URI。因此，您的 .htaccess 的这一部分应该如下所示：

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^messages/?$ index.php?page=messages [L,NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_-]+)/?$ user.php?userid=$1 [L,NC,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T13:28:25.857

将您的 .htaccess 代码替换为：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{REQUEST_FILENAME} -l
RewriteRule ^ - [L]

RewriteRule ^(messages)/?$ index.php?page=$1 [L,NC,QSA]

RewriteRule ^(A-Z0-9_-]+)/?$ user.php?userid=$1 [L,NC,QSA] 
```

如果它仍然不起作用，请从 access.log 中发布匹配的长条目，并在您的 httpd.conf 中启用 RewriteLog 并在您的问题中从那里发布日志。

# java - java.lang.ClassNotFoundException：无法成功加载类源

> ID：10462911
> 
> 赞同：4
> 
> 时间：2012-05-05T14:44:44.150
> 
> 标签：java, android, classpath, classnotfoundexception

我正在开发一个 Android 项目 - 到目前为止一切顺利。今天我在项目中添加了一些额外的 Java 代码——我将这里称为 calcCode。这是一些在后台进行计算的代码，不是特定于 Android 的——我只会在我的项目中使用它。

我将该新代码添加到与我在同一项目下的 Android 代码不同的包中。

所以我所拥有的是：

```
Project
 AndroidPackage
  AndroidCode
 SomeJaveCodePackage
  UtilityCode 
```

出于某种原因，当我尝试调试 calcCode 时，我得到了这个恼人的 source not found 错误。仍然 - 代码运行并一如既往地提供正确的结果。我从其他项目中获取了 calcCode 并将文件复制到我的新 Android 项目中。当我看不到源代码时，我删除了所有 calcCode 文件并通过首先在相关包下创建一个类文件然后将代码复制粘贴来手动创建它们。我认为这将有助于 Eclipse 识别类的路径。

我还尝试：“编辑源查找路径”并添加我尝试调试的类的源代码。

这并没有改变任何东西 - 我仍然无法调试代码。我在 StackOverflow 上阅读了这个问题的几个答案。大多数都与 Junit 和 Tomcat 打交道，我遵循了他们的建议，但并没有改变这种情况。

任何人都知道为什么会这样？

我有 Eclipse 靛蓝。

* * *

在 m0skit0 的评论后编辑：感谢 m0skit0 的帮助。我的意思是只问一个问题（我可能在路上弄混了一些东西）。我的问题是：为什么 Eclipse 在调试时找不到我自己的代码。它曾经在以前的项目中工作（我能够在调试期间通过所有应用程序的课程跟踪代码）。

我所做的是在

```
Tour myTour = new Tour("res/raw/td.csv", "readCSV"); 
```

Tour是我自己的手工课。当我按 F5 进入它时，我收到错误：java.lang.ClassNotFoundException 并且在代码窗口中我得到 Source not found 和一个按钮 Edit source lookup path。

这是调用堆栈：

```
Thread [main] (Suspended)
    ClassNotFoundException(Throwable).<init>(String, Throwable) line: 286   
    ClassNotFoundException(Exception).<init>(String, Throwable) line: not available 
    ClassNotFoundException(ReflectiveOperationException).<init>(String, Throwable) line: not available  
    ClassNotFoundException.<init>(String) line: not available   
    URLClassLoader$1.run() line: not available  
    URLClassLoader$1.run() line: not available  
    AccessController.doPrivileged(PrivilegedExceptionAction<T>, AccessControlContext) line: not available [native method]   
    Launcher$ExtClassLoader(URLClassLoader).findClass(String) line: not available   
    Launcher$ExtClassLoader(ClassLoader).loadClass(String, boolean) line: not available 
    Launcher$AppClassLoader(ClassLoader).loadClass(String, boolean) line: not available 
    Launcher$AppClassLoader.loadClass(String, boolean) line: not available  
    Launcher$AppClassLoader(ClassLoader).loadClass(String) line: not available  
    TestAllPlayAll.main(String[]) line: 15 
```

感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T04:56:16.747

问题已经解决了。可悲的是我不知道解决方案。我所做的只是打开一个新项目并使用那里的代码。在我这样做之后，我可以毫无问题地调试代码。

抱歉，我无法为真正解决这个问题做出贡献，也无法帮助社区回答我自己的问题。

感谢所有试图提供帮助的人，D.

# c# - 仅在 XAML 中的数据模板上放置装饰器？

> ID：10462913
> 
> 赞同：5
> 
> 时间：2012-05-05T14:44:48.260
> 
> 标签：c#, wpf

我有以下 DataTemplate ：

```
<DataTemplate>

<Grid>
<1-- Content -->
</Grid>

</DataTempalte> 
```

我想在网格的内容之上放置一个装饰器。

我怎样才能做到这一点？

我要使用的装饰器是另一个网格。

我们可以仅在纯 XAML 中执行此操作吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T11:34:30.557

我使用以下代码获得了非常好的经验：

[http://www.codeproject.com/Articles/54472/Defining-WPF-Adorners-in-XAML](http://www.codeproject.com/Articles/54472/Defining-WPF-Adorners-in-XAML)

将一些类添加到您的代码库后，您可以像这样在 Xaml 中定义 Adorner：

```
<local:AdornedControl x:Name="adornedControl" HorizontalAlignment="Center" VerticalAlignment="Center"
    HorizontalAdornerPlacement="Outside" VerticalAdornerPlacement="Outside" IsAdornerVisible="True"
        IsMouseOverShowEnabled="False">
<local:AdornedControl.AdornerContent>
    <Canvas x:Name="adornerCanvas" HorizontalAlignment="Center" VerticalAlignment="Center">
        <Thumb Canvas.Top="-5" Canvas.Left="-5" />
        <Thumb Canvas.Bottom="-5" Canvas.Left="-5" />
        <Thumb Canvas.Top="-5" Canvas.Right="-5" />
        <Thumb Canvas.Bottom="-5" Canvas.Right="-5" />
    </Canvas>
</local:AdornedControl.AdornerContent> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:04:19.320

不，WPF Adorners 必须在代码中实现，正如您将在[MSDN](http://msdn.microsoft.com/en-us/library/ms746703.aspx)上看到的那样。

如果您无法在代码中创建 Andorner，则可以考虑直接在 DataTemplate 中将所需的 XAML 分层。此外，由于 Adorner 使用[DrawingContext](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingcontext.aspx)进行渲染，您会发现使用 Grid 也不实用。

# android - Android 并扩展了大约两个活动

> ID：10462914
> 
> 赞同：2
> 
> 时间：2012-05-05T14:44:48.510
> 
> 标签：android

我有个问题。我如何扩展两项活动。我有一个必须扩展其他两个活动的活动，但我不能扩展两个活动。我怎么能以另一种方式做到这一点？我需要这个，因为一个活动扩展了 Activity，但在这个活动中也必须扩展 MapActivity，因为我使用的是 mapView。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:50:05.397

[MapActivity 扩展了 Activity](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapActivity)，所以你只需要从 MapActivity 继承。

```
class YourClass extends MapActivity 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T14:50:14.520

在java中你不能同时扩展两个类。有几种方法：

您可以将其中一个类作为成员字段（让我们称之为 this `A`）和另一个（让我们称之为 this `B`）进行扩展。因此，您将可以访问 的私有和受保护方法`B`以及所有公共方法`B`。毕竟扩展 an 的主要原因`Activity`是获取 all`Context`的方法。从那时起，您自己的活动只是添加方法。但是，即使没有继承，您也可以使用它们。

如果可能，您可以进行`A`扩展`B`，然后仅扩展您的新活动`A`。因此，这两个活动的所有方法都将被继承。

**编辑**在你的编辑之后，我可以说你已经是我解释的第 2 种情况了。`MapActivity`本身就是一个`Activity`。您无需同时扩展两者。扩展只是`MapActivity`.

# mysql - MySQL - 主键是否需要“NOT NULL”约束？

> ID：10462918
> 
> 赞同：16
> 
> 时间：2012-05-05T14:45:25.770
> 
> 标签：mysql, sql, database, database-design

是否有必要为 MySQL 数据库中的主键声明“NOT NULL”约束？主键不能有 NULL 值，因为它无论如何都会自动递增并自动填充字段记录。那么我是否正确地说这意味着我可以删除主键的“NOT NULL”约束？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-05T14:47:58.883

*（正如您已标记您的问题`mysql`。）*在 MySQL 中，您不必明确地这样做。从[手册](http://dev.mysql.com/doc/refman/5.5/en/create-table.html#id879566)：

> A`PRIMARY KEY`是一个唯一索引，其中所有键列都必须定义为`NOT NULL`。如果它们没有显式声明为`NOT NULL`，MySQL 会隐含地（并且默默地）声明它们。

当然，仅仅因为您不必这样做*并不*意味着您可能不想为了清楚起见等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T14:56:25.307

是和否您可以删除“Not null”，但这不会删除约束。就我个人而言，我会把它们留在里面，你把它们拿出来没有任何价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:03:26.227

主键不得包含可为空的列。`auto_increment`不是检查约束，（而是默认约束），因此`not null`无论是否存在`auto_increment`. `not null`在 mysql 中创建主键表时不必键入，因为引擎会自动添加此约束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-01T14:43:39.930

我们不需要明确声明该列不为空，因为主键约束使该列不为空。我已经检查了Oracle。

# razor - 在 Umbraco v5 中按日期选择

> ID：10462925
> 
> 赞同：1
> 
> 时间：2012-05-05T14:46:36.823
> 
> 标签：razor, umbraco

有人可以建议我在哪里出错：

```
var results = CurrentPage.Children.Where("raceDate >= DateTime.Now").OrderBy("raceDate"); 
```

在 Umbraco v5.1 RC 中，我尝试创建日期为今天或之后的项目集合，但出现以下错误：

```
Operator '>' incompatible with operand types 'Object' and 'DateTime' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T23:19:31.703

你需要做这样的事情***（***未经测试）：

ults = CurrentPage.Children.Where("raceDate >= @0", DateTime.Now).OrderBy("raceDate");

按照您编写的方式， datetime.now 不会被替换到 where 子句中。

# python - Vlookup XLRD Python

> ID：10462927
> 
> 赞同：1
> 
> 时间：2012-05-05T14:46:47.290
> 
> 标签：python, xlrd, vlookup

我有一个如下所示的 xls 电子表格

```
Number  Code         Unit
1       Widget 1     20.0000 
2       Widget 2     4.6000 
3       Widget 3     2.6000 
4       Widget 4     1.4500 
```

我创建了以下代码：

```
import xlrd
wb=xlrd.open_workbook('pytest.xls')
xlsname = 'pytest.xls'
book = xlrd.open_workbook(xlsname)

sd={}
for s in book.sheets():
    sd[s.name] = s
sheet=sd["Prod"]

Number = sh.col_values(0)
Code = sh.col_values(1)
Unit = sh.col_values(2) 
```

现在这是我卡住的地方，我需要做的是询问他们选择的数字，对于这个例子，假设他们选择 3，它需要打印单位的答案。因此，如果他们选择 4，则会打印 1.450。该文档有 10k 长，因此手动将数据输入 python 是不可行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T00:03:13.420

在这种情况下，您只需要这样做：

```
 Unit[Number.index(value)] 
```

这将返回与为 Number 列指定的值相对应的 Unit 列的值。

Python 序列上的`index()`函数返回序列中提供的值第一次出现的索引。该值被用作从 中查找相应条目的索引`Unit`。

# jquery - jQuery 输入滑块插件无法正常运行

> ID：10462928
> 
> 赞同：0
> 
> 时间：2012-05-05T14:46:48.203
> 
> 标签：jquery, jquery-plugins, slider

我想在这里使用这个插件在我的页面上创建一个滑块：http: [//egorkhmelev.github.com/jslider/](http://egorkhmelev.github.com/jslider/)

不幸的是，在我的演示页面上，我似乎无法正确创建滑块元素，并且我没有在控制台中收到任何 javascript 错误。

这是我的演示页面： http: [//nathanmarks.ca/drivvy_demo/search.php](http://nathanmarks.ca/drivvy_demo/search.php)

我在 script.js 中调用滑块函数，并尝试在页面上的“优化搜索”框中创建它。

我还尝试制作一个带有滑块的空白页面，但遇到了同样的问题！

我会得到任何帮助，谢谢！我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:54:37.763

您正在尝试从标签`$("#SliderSingle")`元素创建滑块。`<input>`你应该使用`<div id="something"></div>`而不是那个。

# java - 如何使用 url 解析 XML 内容

> ID：10462930
> 
> 赞同：0
> 
> 时间：2012-05-05T14:47:16.800
> 
> 标签：java, android

我有网址 www.test.com/test/xml

在xml文件中有

```
<channel>
  <item id="001">
  <title>a001</title>
  <actorlist>
     <actor>
       <name> a1 </name>
       <name_drama> d1 </name_drama>
     </actor>
     <actor>
       <name> a2 </name>
       <name_drama> d2 </name_drama>
     </actor>
    <actor>
   <gallery>
     <gimages>
        <gsmall>  sg1.png  </gsmall>
        <gmedium> mg1.png  </gmedium>
        <glarge>  lg1.png  </glarge>
     </gimages>
     <gimages>
        <gsmall>  sg2.png  </gsmall>
        <gmedium> mg2.png  </gmedium>
        <glarge>  lg2.png  </glarge>
      </gimages>
     <gimages>
   <gallery>
</item>
<item id="002">
  <title>b002</title>
  <actorlist>
     <actor>
       <name> a12 </name>
       <name_drama> d12 </name_drama>
     </actor>
     <actor>
       <name> a22 </name>
       <name_drama> d22 </name_drama>
     </actor>
    <actor>
   <gallery>
     <gimages>
        <gsmall>  sg12.png  </gsmall>
        <gmedium> mg12.png  </gmedium>
        <glarge>  lg12.png  </glarge>
     </gimages>
     <gimages>
        <gsmall>  sg22.png  </gsmall>
        <gmedium> mg22.png  </gmedium>
        <glarge>  lg22.png  </glarge>
      </gimages>
     <gimages>
   <gallery>
</item>
<item id="003">
  <title>c003</title>
  <actorlist>
     <actor>
       <name> a13 </name>
       <name_drama> d13 </name_drama>
     </actor>
     <actor>
       <name> a23 </name>
       <name_drama> d23 </name_drama>
     </actor>
    <actor>
   <gallery>
     <gimages>
        <gsmall>  sg13.png  </gsmall>
        <gmedium> mg13.png  </gmedium>
        <glarge>  lg13.png  </glarge>
     </gimages>
     <gimages>
        <gsmall>  sg23.png  </gsmall>
        <gmedium> mg23.png  </gmedium>
        <glarge>  lg23.png  </glarge>
      </gimages>
     <gimages>
   <gallery>
</item>
<channel> 
```

如何解析到

item1 = 标题：001，名称：a1，名称_戏剧：d1，名称：a2，名称_戏剧：d1。. .

item2 = 标题：002，名称：a12，名称_戏剧：d12，名称：a22，名称_戏剧：d22​​。. .

item3 = 标题：003，名称：a13，名称_戏剧：d13，名称：a23，名称_戏剧：d23。. .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:51:07.693

Android 项目可以使用任何可用于解析 XML 的 Java 库。

[很多解析库的例子](https://stackoverflow.com/questions/373833/best-xml-parser-for-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:52:33.753

如果内存不是问题，则可以使用 java Dom 进行解析，否则请使用 java SAX 解析器。 [这](https://stackoverflow.com/questions/4827344/how-to-parse-xml-using-the-sax-parser)是示例。

# ios - 从 Xib 呈现模态视图控制器

> ID：10462939
> 
> 赞同：4
> 
> 时间：2012-05-05T14:48:53.653
> 
> 标签：ios, modal-dialog, xib, presentmodalviewcontroller

我想显示来自 xib 的模式对话框。显示我的窗口的代码是：

```
self.vcSettings = [[ViewControllerSettings alloc] initWithNibName:@"ViewControllerSettings" bundle:[NSBundle mainBundle]];  

[self presentModalViewController:self.vcSettings animated:YES]; 
```

但是，当它运行时，我得到一个空白屏幕，而不是我的 ViewControllerSettings.xib 里面的内容。我想我以某种方式错误地显示了视图。任何建议表示赞赏。

**编辑：**

我认为这应该是

```
[self.navigationController presentModalViewController:self.vcSettings animated:YES]; 
```

但由于某种原因`self.navigationController`是零。

**编辑：**

Self 是在我的 AppDelegate 中实例化的 UIViewController，如下所示：

```
UIViewController* viewMain = [[ViewController_iPhone alloc]     initWithNibName:@"ViewController_iPhone" bundle:nil];

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.window.backgroundColor = [UIColor whiteColor];
self.window.rootViewController = viewMain;
[self.window makeKeyAndVisible]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T19:52:29.353

您需要创建一个`UINavigationController`，将其根视图设置为您要呈现的 XIB 控制器*（在您的情况下`vcSettings`）*，然后呈现`UINavigationController`

```
self.vcSettings =  [[ViewControllerSettings alloc] initWithNibName:@"ViewControllerSettings" bundle:nil];
UINavigationController *controller = [[UINavigationController alloc] initWithRootViewController:vcSettings];
[self.navigationController presentModalViewController:controller animated:YES]; 
```

# apex-code - SFDC 报告中的州长限制

> ID：10462943
> 
> 赞同：0
> 
> 时间：2012-05-05T14:49:03.733
> 
> 标签：apex-code, force.com, soql

我们的业务要求是在一个表格中显示我们所有项目的成本汇总。

为了将这些成本制成表格，我们必须查询所有客户任务、区域、工作角色、工资率、成本表、可交付成果、工作量和小时记录（客户任务在同一个表中，任务和区域在同一个表中）表和可交付成果、工作量和小时数存储为每月总计）。

由于我必须在对所有内容进行循环之前查询所有这些内容，因此它很快就会遇到大量脚本行。计算上它就像 O(m * n * o * p) 并且我们的一些项目的所有四个变量都上升得非常快。我对如何做到这一点的估计从 9000 万行代码到 6000 亿行不等。

使用批处理顶点，我们可以按任务区域将其分解为 200 个批处理，但这会将计算配置文件减少到 (600 B / 200 ) = 30 亿行代码（远高于销售人员的限制。

我们一直在尝试使用 informatica 进行这些大规模计算，但我们遇到了几个问题，包括 (1) 我们的最终用户不能等待超过五分钟左右，而只是传输数据（如果所有记录都项目立即更新）在 informatica 或 web api 上需要 15 分钟 (2) 我们注意到这些大量计算需要在多个地方进行（更改可交付预测值、创建初始预测等）。

是否有一个能满足我们要求的调速器限制工作（海量数据在 5 分钟左右做出响应？force.com 是我们在这里使用的好平台吗？

这是我一直在做类似计算的方式：

![循环概述](../Images/d1191c30741d759d3191bb7639d33590.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:09:42.977

ERD 会有所帮助，但是您是否考虑过在较小的部分中执行此操作并在 salesforce 中使用报告而不是自定义代码？我的意思是较小的部分，使用汇总汇总字段在您的对象树中获得更高的总数。或者使用顶点触发器，以便在输入小时数时计算成本 * 小时数并将其放入时间记录中，然后汇总到可交付成果。基本上在输入数据时计算您的值，而不必每次都运行您的计算。

然后你可以简单地运行一个报告，告诉我我所有的项目及其总成本或总时间，因为这些总成本/时间已经存储/计算。

汇总摘要仅适用于主从触发器随时工作，但您需要考虑插入、更新以及删除和取消删除！聚合函数将是您的朋友，假设触发器上下文要聚合的记录少于 50,000 条 - 如果单个可交付成果的时间条目超过 50,000 条，我希望它可以做到 b/c :)

希望那有所帮助？

# facebook-comments - 评论无法被搜索引擎抓取？

> ID：10462944
> 
> 赞同：0
> 
> 时间：2012-05-05T14:49:11.063
> 
> 标签：facebook-comments

我想知道搜索引擎蜘蛛是否可以看到评论，当我打开页面的源代码时，评论没有显示（与 disqus 相同），所以我假设搜索引擎何时抓取他们不会看到的页面评论呢？这个假设正确吗？如果是这样，有没有办法改变这种情况？

**找到了解决方案：**

[http://developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

> 如何从我网站上留下的评论中获得 SEO 提升？
> 
> Facebook 评论框在您页面上的 iframe 中呈现，大多数搜索引擎不会抓取 iframe 中的内容。但是，您可以通过上述图形 API 访问您网站上留下的所有评论。只需从 API 中获取评论并将它们呈现在评论框后面的页面正文中。我们建议您缓存结果，因为在每次页面加载时从图形 API 中提取评论可能会减慢页面的呈现时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:58:51.140

只有抓取引擎可以看到被抛出的内容，因此这些评论应该被输出以便能够被抓取并保存到 SE 数据库或它用于收集有关网站的数据的任何内容中，您可以检查连接请求的标头从，如果它属于爬网引擎并且在我们的案例中称为用户代理（浏览器），在这里您可以找到一种使用[PHP](http://www.cult-f.net/detect-crawlers-with-php/)检测爬虫的方法，在检测到它之后，您强制显示评论以便被爬取，这里也是一个很好的资源，关于如何处理来自[谷歌](https://developers.google.com/webmasters/control-crawl-index/docs/crawlers)本身的爬虫。

现在，如果您谈论的是 Facebook 评论，则不可能让它们被爬虫或 SE 索引，当爬虫尝试访问其中一个 Facebook 页面时，由于登录页面，它将无法看到用户的数据，如果你在谈论 Facebook 插件，你可以按照我上面的建议去做，文章谈论[Facebook 评论抓取](http://www.insidefacebook.com/2012/01/09/how-facebook-comments-impact-google-search-rankings/)。

# java - FrameLayout：如何在 GLSurfaceView 之上添加其他视图？

> ID：10462950
> 
> 赞同：1
> 
> 时间：2012-05-05T14:50:14.097
> 
> 标签：java, android, android-layout, android-widget

我是 Andriod 的新手，很难在 GLSurfaceView 上添加控件（视图）。我希望将其添加到角落。（比如右下角）最初我想添加类似操纵杆的小部件，但起初我想添加“左”、“右”、“上”、“下”按钮。我创建了一个布局 XML 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <View
        android:id="@+id/viewControls"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/relativeLayout1"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="140dp" >
    </RelativeLayout>

    <Button
        android:id="@+id/buttonR"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/relativeLayout1"
        android:text="R" />

    <Button
        android:id="@+id/buttonL"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="L" />

</RelativeLayout> 
```

在我的活动中，我尝试如下：

```
public class MyOpenGL2Activity extends Activity {

    private GLSurfaceView mGLview;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        mGLview=new MyOpenGL2SurfaceView(this);

        FrameLayout flayout=new FrameLayout(this);     
        flayout.addView(mGLview);

        View controller=findViewById(R.id.viewControls);

        flayout.addView(controller);       

        setContentView(flayout);
}
... 
```

但是应用程序崩溃说

> 05-05 14:40:08.015: W/dalvikvm(2258): threadid=1: 线程退出未捕获异常 (group=0x40a841f8) 05-05 14:40:08.023: E/AndroidRuntime(2258): 致命异常: main 05-05 14:40:08.023: E/AndroidRuntime(2258): java.lang.RuntimeException: 无法启动活动 ComponentInfo{ausoft.opengl/ausoft.opengl.MyOpenGL2Activity}: java.lang.NullPointerException 05-05 14:40 :08.023: E/AndroidRuntime(2258): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955) 05-05 14:40:08.023: E/AndroidRuntime(2258): 在 android.app.ActivityThread.handleLaunchActivity( ActivityThread.java:1980) 05-05 14:40:08.023: E/AndroidRuntime(2258): at android.app.ActivityThread.access$600(ActivityThread.java:122) 05-05 14:40:08.023: E/AndroidRuntime (2258): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146) 05-05 14:40:08.023: E/AndroidRuntime(2258): 在 android.os.Handler.dispatchMessage(Handler.java:99) 05-05 14:40:08.023: E/AndroidRuntime(2258) : 在 android.os.Looper.loop(Looper.java:137) 05-05 14:40:08.023: E/AndroidRuntime(2258): 在 android.app.ActivityThread.main(ActivityThread.java:4340) 05-05 14:40:08.023: E/AndroidRuntime(2258): 在 java.lang.reflect.Method.invokeNative(Native Method) 05-05 14:40:08.023: E/AndroidRuntime(2258): 在 java.lang.reflect。 Method.invoke(Method.java:511) 05-05 14:40:08.023: E/AndroidRuntime(2258): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 05-05 14:40:08.023: E/AndroidRuntime(2258): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 05-05 14:40:08.023: E/AndroidRuntime(2258): 在 dalvik 。系统。NativeStart.main（本机方法）05-05 14:40:08.023：E/AndroidRuntime（2258）：引起：java.lang.NullPointerException 05-05 14:40:08.023：E/AndroidRuntime（2258）：在 android。 view.ViewGroup.addView(ViewGroup.java:3165) 05-05 14:40:08.023: E/AndroidRuntime(2258): 在 android.view.ViewGroup.addView(ViewGroup.java:3152) 05-05 14:40: 08.023: E/AndroidRuntime(2258): at ausoft.opengl.MyOpenGL2Activity.onCreate(MyOpenGL2Activity.java:35) 05-05 14:40:08.023: E/AndroidRuntime(2258): at android.app.Activity.performCreate(Activity .java:4465) 05-05 14:40:08.023: E/AndroidRuntime(2258): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 05-05 14:40:08.023: E/AndroidRuntime(2258) ): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919) 05-05 14:40:08.023:E/AndroidRuntime(2258): ... 11 更多

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:59:55.907

您正在尝试，`findViewById(R.id.viewControls);`但您之前没有打电话`setContentView()`...视图在哪里`viewControls`？

* * *

如果你愿意，你可以像这样创建视图

```
View controller = new View(this.getApplicationContext()); 
```

管他呢...

# java - Java2D / Graphics2D 性能

> ID：10462952
> 
> 赞同：4
> 
> 时间：2012-05-05T14:50:46.883
> 
> 标签：java, performance, awt, java-2d

也许有人在那里花时间在这上面。我正在使用 Java 开发图形可视化库，我刚刚做了一些性能测试。

当我添加由 1000 - 3000 条边连接的大约 2000 个顶点时，它变得非常非常慢。有一些工具做得更好（例如[gephi](http://gephi.org/)）。他们是怎么做到的？Java2D硬件不是默认加速的吗？我必须使用一些 OpenGL 库吗？

我在 JComponent 中绘制图表，每隔几毫秒由计时器重绘一次（没关系，如果我给它 100 毫秒或 1 毫秒，它会保持非常慢）。

我的方法有缺陷还是不应该为此使用 Java2D？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T01:52:00.003

正如 Torious 建议的那样，如果您使用 Java2D 来获得硬件加速的好处，您可能想要使用[VolatileImage 。](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/VolatileImage.html)

但是 - 如果您想要绝对的最佳性能，您最好选择基于 OpenGL 的解决方案。

LWJGL ( [http://lwjgl.org/](http://lwjgl.org/) ) 是为游戏设计的，但允许您使用几乎所有相关的 OpenGL 功能，因此也非常适合可视化。可能值得一试！

# r - 应用于数据集后解释 knn.cv (R) 结果

> ID：10462957
> 
> 赞同：3
> 
> 时间：2012-05-05T14:51:41.343
> 
> 标签：r, dataset, knn

`knn.cv`我在对来自 FNN 包的 R 中的数据集使用 k-最近邻算法（带有交叉验证）时遇到了一个问题。该数据集由 4601 个电子邮件案例组成，具有 58 个属性，其中 57 个取决于 中的字符或单词频率，`emails(numerical, range [0,100])`最后一个指示它是垃圾邮件（值 1）还是非垃圾邮件（值 0）。

在指示 train 和 cl 变量并使用 10 个邻居之后，运行该包会显示所有电子邮件的列表`7.4032`，其中每列的值都类似，我不知道如何使用。我需要找到包裹分类的垃圾邮件和火腿的百分比，并将其与正确的百分比进行比较。我应该如何解释这些结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:12:02.340

鉴于您描述的数据集（完全匹配）**ElemStatLearn**包中的垃圾邮件数据集，该数据集随附同名的著名书籍，我想知道这是否实际上是一个家庭作业。如果是这种情况，没关系，但您应该将作业标签添加到您的问题中。

这里有一些指示。

该函数的文档`knn.cv`说它返回一个分类向量，以及作为“属性”的 k 个最近邻居的距离和索引。所以当我运行这个时：

```
out <- knn.cv(spam[,-58],spam[,58],k = 10) 
```

该对象`out`看起来像这样：

```
> head(out)
[1] spam  spam  spam  spam  spam  email
Levels: email spam 
```

您引用的其他值是某种“隐藏”的属性，但您可以看到它们在那里使用`str`：

```
> str(out)
 Factor w/ 2 levels "email","spam": 2 2 2 2 2 1 1 1 2 2 ...
 - attr(*, "nn.index")= int [1:4601, 1:10] 446 1449 500 5 4 4338 2550 4383 1470 53 ...
 - attr(*, "nn.dist")= num [1:4601, 1:10] 8.10e-01 2.89 1.50e+02 2.83e-03 2.83e-03 ... 
```

您可以通过以下方式访问这些附加属性：

```
nn.index <- attr(out,'nn.index')
nn.dist <- attr(out,'nn.dist') 
```

请注意，这两个对象最终都是尺寸为 4601 x 10 的矩阵，这是有道理的，因为文档说它们记录了`k = 10`最近邻居的索引（即行号）以及到每个对象的距离。

最后一点，您可能会发现该`table()`函数以及`prop.table()`.

# html - 根据可用空间水平或垂直格式化列表

> ID：10462961
> 
> 赞同：0
> 
> 时间：2012-05-05T14:52:10.703
> 
> 标签：html, css, layout

我想根据可用的水平空间水平或垂直呈现项目列表。列表项的内容可能会动态变化，因此`@media`查询并没有真正的帮助。

例子：

```
item1 item2 item3 item4   |<-- right border of parent box 
```

现在我们更改`item2`为`muchlongeritem2`，布局应更改为：

```
item1                     |
muchlongeritem2           |<-- right border of parent box
item3                     |
item4                     | 
```

有没有办法只使用 CSS 来实现这一点？我可以想出一个 JavaScript 解决方案，但如果有人准备好一些代码，我也很乐意检查一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:57:47.667

我最近使用过类似的东西，这是一个片段：

```
$(document).ready(function () {

    // Fluid navigation helper
    var list_item = $("nav ul").children();
    var list_item_length = list_item.length;
    var list_item_width = Math.floor(978 / list_item_length);
    var left_overs = 978-(list_item_width*list_item_length);
    for (var i = 0, len = list_item.length; i < len; i++ ) {
        list_item[ i ].style.width = list_item_width+"px";
    }
    if (left_overs) {
        $("nav ul li:first-child").css("width", list_item_width+left_overs+"px");
    }

}); 
```

# javascript - 从一个函数中获取变量以在另一个函数中使用

> ID：10462962
> 
> 赞同：-2
> 
> 时间：2012-05-05T14:52:31.320
> 
> 标签：javascript, function, variables

我正在用 javascript 为大学创建一个游戏，我有一个按钮来调用一个函数，但我需要它来包含来自另一个函数的变量

如果我将函数放在变量为按钮的另一个函数中，则不会调用它

有没有办法这样做或获取在第一个函数中创建的变量并在第二个函数中使用它们

这是一个简单的数学游戏，您可以在其中获得一个随机数、一个随机数和另一个随机数（即 5+7、4*3、2/6 等）

所以我有一个函数来显示随机数

```
var ranNum1a=Math.floor(Math.random()*10); 
```

我需要其他功能来检查用户的答案，但我需要知道来自其他功能的随机数是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:57:35.253

您需要将这些变量设为全局示例：

```
var myValue;
function setValue()
{
    myValue = "test";
}

function getValue()
{
    alert(window.myValue); // yup, it's "test"
} 
```

[来源..](http://snook.ca/archives/javascript/global_variable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:59:29.773

对于最简单的情况，将变量传递给另一个函数可能是解决此问题的最佳方法。

这是一个插图：

```
function f1(var1, var2) {
    //do you stuff then pass the variable to another function
    f2(var1, var2);
}

function f2(v1, v2) {
    // here v1 will get the value from var1 and v2 from var2 if passed from within the function f1
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T14:58:50.490

```
var ranNum1a;
function show() {
  ranNum1a = Math.floor(Math.random()*10);
  // show it
}

function check() {
  if (ranNum1a == 42) {
    alert("Ok");
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-12T07:57:05.397

我发现这对于原始问题非常有帮助：

返回您希望在 functionOne 中使用的值，然后在 functionTwo 中调用 functionOne 并将结果放入一个新的 var 中。这应该使您能够在 functionTwo 中使用 functionOne 中声明的 var。

```
function functionOne() {
  var variableThree = 3;
  return variableThree;
}

function functionTwo() {
  var variableOne = 1;
  var var3 = functionOne();

  var result = var3 - variableOne;

  console.log(variableOne);
  console.log(var3);
  console.log('functional result: ' + result);
}

functionTwo(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-08T04:08:52.790

```
function function1() {
            var a = 1;
            localStorage.setItem("var1", a);
            alert("Function1 value of a: " + a); 
        }

        function function2() {
            var a = localStorage.getItem("var1");
            alert("Function2 value of a: " + a); 
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-01T05:42:35.470

```
<!-- first declare the variable -->
<script>
var x;
function something(){
   var x = document.getElementById('hello').innerHTML
}
function other(){
   document.write(x);
`you can use x here x is same as document.getElementById('hello').innerHTML`

}
</script> 
```

# html - xpath，函数通过搜索元素来识别类？

> ID：10462966
> 
> 赞同：1
> 
> 时间：2012-05-05T14:52:52.793
> 
> 标签：html, xpath

我是 xpath 和 html 的新手。是否可以在每个类“authorbox”下的 html 中搜索文本“xxxx”，如果该类有，则自动选择父类 tr。

<tr>

<td class="作者框">

```
 < div class="regsn">

      < a href="/member/profile/xxxx" t="post-usersntxt">xxxx< /a> 
```

……

和桌子继续更多

<tr>

<tr>

<tr>

## 编辑

这是我目前能够制作的 xpath

//td[@class='authorbox']

如果找到文本，我真的不知道如何搜索文本“xxxx”或选择父 tr。如果我愿意，我可以选择每个表，但如果它更自动的话会很好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:08:14.800

**使用**：

```
//tr[td[@class='authorbox']
           //text()[contains(., 'xxxx')]
    ] 
```

这将选择`tr`XML 文档中具有`td`其`class`属性的字符串值是字符串的子级`"authorbox"`并且（该`td`子级）具有其字符串值是包含的字符串的文本节点后代的任何内容`"xxxx"`。

**这可能会更精确**：

**如果文本节点后代的字符串值必须*完全*是字符串`"xxxx"`，则使用**：

```
//tr[td[@class='authorbox']
           //text()[. = 'xxxx']
    ] 
```

**如果文本节点后代的字符串值应该以字符串开头`"xxxx"`，请使用**：

```
//tr[td[@class='authorbox']
           //text()[starts-with(., 'xxxx')]
    ] 
```

**如果文本节点后代 shoud 的字符串值包含`"xxxx"`仅由空格包围的字符串，请使用**：

```
//tr[td[@class='authorbox']
           //text()[normalize-space(., 'xxxx')]
    ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:08:22.360

所以，看起来你已经成功了一半。您只需要在谓词中添加一点牛肉：

```
//tr[td/@class="authorbox" and td/div/a="xxxx"] 
```

此外，如果您想要`tr`，您可以从上面的那个开始，然后将`td`引用向下推到谓词中。

# iphone - 应用内购买和 UIRequiredDeviceCapabilities

> ID：10462969
> 
> 赞同：0
> 
> 时间：2012-05-05T14:53:04.777
> 
> 标签：iphone, in-app-purchase

我想创建一个应用内购买，它添加了用户可以拍照的功能。没有购买的应用程序不需要相机。要使用应用内购买，需要前置摄像头。

是否可以为应用内购买设置 UIRequiredDeviceCapabilities 或者是否应该为整个应用设置 UIRequiredDeviceCapabilities？

我宁愿不使用最后一个选项，因为它会减少可能的用户数量。

如果应用内购买需要比基础应用更多的设备功能，Apple 会拒绝该应用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:15:33.163

为什么不在购买区的应用程序中测试设备功能？然后你不必把它放在 plist 中。

```
if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeCamera]) {
    // display purchase button
} 
```

# xml-parsing - Linq 查询不适用于 XML 字符串

> ID：10462970
> 
> 赞同：0
> 
> 时间：2012-05-05T14:53:08.223
> 
> 标签：xml-parsing, linq-to-xml

我有一个将 xml 数据作为字符串返回的 Web 服务。我正在尝试在服务返回的 xml 字符串上应用 linq。

可以说 xml 搅拌有点像。

```
string str = "<root xmlns=\"http://tempuri.org/Count.xsd\"> <child> <subchild1>1</subchild1><subchild2>1</subchild2><subchild3>1</subchild3></child></root>"; 
```

下面是我正在使用的 c# 代码。

```
 XDocument xdoc = XDocument.Parse(str);  
 var item =  xdoc.Element("root").Element("child").Element("subchild1"); 
```

但上面的查询总是返回 null。

任何人都可以纠正我上面代码和平中的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:54:49.697

这解决了我的问题。

```
XNamespace xnp = xdoc.Root.GetDefaultNamespace();
  var item = xdoc.Element(xnp  + "root").Element(xnp  + "child").Element(xnp  + "subchild1").Value; 
```

# lightbox - 如何将“addThis”社交集成添加到灯箱（jquery prettyphoto 或 jquery fancybox）中？

> ID：10462971
> 
> 赞同：2
> 
> 时间：2012-05-05T14:53:16.177
> 
> 标签：lightbox, social, sharing, addthis

请帮助我，我在灯箱内集成“addthis”社交共享时遇到了一些问题，以便可以从灯箱共享图像。Trid 与 prettyPhoto 和 fancybox 但有一些与回调函数有关，我没有找到办法。

我找到了这个线程，但前景不大：http: [//support.addthis.com/customer/portal/questions/132264-addthis-in-a-lightbox](http://support.addthis.com/customer/portal/questions/132264-addthis-in-a-lightbox)

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-30T14:50:47.277

我知道这很旧，但我一直在寻找类似的东西，我发现调用`addthis.layers.refresh();`可以完成这项工作。

您只需要确保在尝试调用之前定义了该函数：

```
if(addthis.layers && typeof addthis.layers.refresh === 'function'){
    addthis.layers.refresh();
} 
```

[http://support.addthis.com/customer/portal/articles/1692927-using-dashboard-configuration-tools-dynamically](http://support.addthis.com/customer/portal/articles/1692927-using-dashboard-configuration-tools-dynamically)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-30T13:25:36.000

这工作完美，之前添加它`</body>`

```
<script type="text/javascript">
//always refresh on URL change
window.addEventListener("hashchange", function () {
  addthis.layers.refresh();
});
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T07:31:47.377

看看reveal.js而不是灯箱

# ios - 如何使用 Forge 更改 iOS 中最顶部栏（载波/时钟等）的颜色？

> ID：10462974
> 
> 赞同：4
> 
> 时间：2012-05-05T14:53:48.060
> 
> 标签：ios, trigger.io

我正在尝试使用 Trigger/Forge 自定义 iOS 应用程序中最顶部栏的颜色。这甚至可能吗？我似乎在文档中找不到任何关于它的信息。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:10:00.677

**更新：**我们正在重新考虑实施状态栏定制。原因：

*   Android 不支持状态栏样式（只能显示/隐藏）
*   iPad 上的状态栏根本无法设置样式（请参阅[状态栏](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/UIElementGuidelines/UIElementGuidelines.html)）
*   在 Windows Phone 上，系统托盘会根据活动显示和隐藏

在我们找到一些有用且适用的跨平台的共同点之前，我们将暂时搁置。

原答案：

Trigger.io 目前无法做到这一点：您是第一个请求者 :)

我创建了一个故事来解决这个问题，并在完成后在这里报告。预计完成时间：2012 年 6 月 4 日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:43:18.887

我有一个隐藏它的临时解决方案（但是它也可能适用于样式）如果你想隐藏它，你仍然可以在你的构建结果中编辑 Info.plist 文件（每次你完全重新-构建你的应用程序）

编辑：

我刚刚检查过，是的，您可以通过将状态栏样式键添加到 Info.plist 文件来更改状态栏样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T02:09:44.440

现在可以在我们的显示模块中使用全屏选项完全删除状态栏：

[http://docs.trigger.io/en/v1.4/modules/display.html#field-fullscreen](http://docs.trigger.io/en/v1.4/modules/display.html#field-fullscreen)

根据詹姆斯的回答，我们尚未实施状态栏自定义

# python - App Engine Datastore 不会保存 LatLng (Google Maps) 值

> ID：10462975
> 
> 赞同：5
> 
> 时间：2012-05-05T14:53:51.653
> 
> 标签：python, google-app-engine, google-cloud-datastore, geocode

我的网站（在服务器端使用 python/django）接收 Latlng（Google Maps API 2）地理编码的用户输入，并将其存储到 Google Appengine Datastore 中/从中检索。

```
 c = myplace.MyPlace(
            geo_point = latlng,
        c.put() 
```

其中 DB.Model 定义如下：

```
from google.appengine.ext import db

class Myplace(db.Model):
    geo_point   = db.GeoPtProperty() 
```

问题是当我保存 any 时`geocode(e.g. 8.928487062665504, 105.062255859375)`，检索到的总是`37.4229181,-122.0854212`，这是 Google 的山景城位置。在此过程中没有错误消息。

你能告诉我为什么会发生这种情况吗？

* * *

**商店信息.py** ...

```
def new(req):                       
   if req.method == 'POST':
        try:
            u_form = ShopInfoForm(req.POST)
            if not u_form.is_valid():
                return err_page('Invalid input values.')

            # geo_point
            latlng = None
            if req.POST.get('geo_point'):
                latlng = req.POST.get('geo_point').strip()
                latlng = string.replace(latlng, '(', '')
                latlng = string.replace(latlng, ')', '')

            c = myplace.MyPlace(owner = u,
                    nickname = u.nickname,
                    #title = unicode(req.POST['title'].strip(), 'utf8'),
                    #content = unicode(req.POST['content'].strip(), 'utf8'),
                    title = req.POST['title'].strip(),
                    content = req.POST['content'].strip(),
                    geo_point = latlng,
                    post_time = datetime.now())
            c.put()                  ##WRITE HERE

            return HttpResponseRedirect('/shop/'+str(c.key().id())+'/read/')
        except Exception, x:
            return err_page('Error.')
    return err_page('Wrong request')

def read(req, shop_id):         
    if req.method == 'GET':
        user_info = users.get_current_user()
        s = myplace.MyPlace.get_by_id(int(shop_id))  
        if not s:
            return err_page('Wrong request')

        context = {'static_path': STATIC_PATH,
                   'user_info': user_info,
                   'shop' : s}            ##READ HERE
        return render_to_response('shop_read.html', context)
    return err_page('Wrong request')

**shop_read.html**

    {% if shop.geo_point %}
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=" type="text/javascript"></script>
<script src="http://www.google.com/jsapi"></script>
<script type="text/javascript">google.load("jquery", "1");</script>
<script type="text/javascript"> 
```

# cocoa - 弹出的 NSMenu 总是突出显示第一个 NSMenuItem

> ID：10462981
> 
> 赞同：0
> 
> 时间：2012-05-05T14:55:13.607
> 
> 标签：cocoa, nsbutton, nsmenuitem, nsmenu

我有一个 NSButton，当单击它时会调用 [NSMenu popUpMenuPositioningItem:atLocation:inView:]。菜单会在正确的位置弹出，但是最上面的 NSMenuItem 总是以蓝色突出显示，就好像鼠标悬停在它上面一样，但它不是。我似乎找不到任何方法来控制 NSMenuItem 的突出显示。

查看屏幕截图，您可以看到即使鼠标仍然悬停在 NSButton 上，菜单也会突出显示。

![在此处输入图像描述](../Images/5a7727a1cc991ba1f0f340780a6cf65a.png)

我怎样才能解决这个问题？我不希望在单击 NSButton 时突出显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:10:58.093

与其自己弹出菜单，不如将 NSButton 替换为 NSPopUpButton，设置为下拉类型，关闭 Bordered 复选框（您可能必须将其打开然后再次关闭），可能将箭头样式设置为没有（尽管我会把它留在里面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T05:34:23.787

如果您为 popUpMenuPositioningItem:atLocation:inView: 中的第一个参数传递 nil，则不会选择任何内容。

# swing - 自定义 JScrollBar-Thumb 已绘制，但不移动

> ID：10462982
> 
> 赞同：2
> 
> 时间：2012-05-05T14:55:24.133
> 
> 标签：swing, slider, thumbnails, jscrollbar

我决定更深入地研究秋千和定制绘画组件的材料。最近几天，我在 StackOverFlow 和其他论坛上阅读了大量文章、API 文档和问题。但是我在理解这个概念时仍然遇到了一些基本问题。

我想要做什么：基本上，我想为我自己的 Swing GUI 设计一些组件。我在设计自定义 JButton 时没有太多问题。我只是在paint.net中创建一个自定义图像，创建一个ImageIcon并制作JButton.setIcon（ImageIcon），效果很好。如果我想自定义 JSlider 的 Thumb，同样的故事。我在这里找到了一个非常有趣的解决方案。它只是用任何内容覆盖默认拇指，然后在第二步中将“Slider.horizo​​ntalThumbIcon”的自定义 ImageIcon（通过 ClassLoader 使用我的自定义 createImageIcon 类）放置到 UIManger。

```
UIManager.getLookAndFeelDefaults().put("Slider.horizontalThumbIcon", new Icon(){

    public int getIconHeight() {
        return 0;
    }

    public int getIconWidth() {
        return 0;
    }

    public void paintIcon(Component c, Graphics g, int x, int y) {
       //do nothing
    }
}); 
```

和

```
UIManager.getLookAndFeelDefaults().put("Slider.horizontalThumbIcon", 
                                        createImageIcon("images/slider.png")); 
```

但现在问题开始了。如果我没记错的话，滚动条的拇指不是图标，所以我必须创建一个自己的“CustomScrollBarUI”类来扩展 BasicScrollBarUI。此外，我不想要任何箭头键。好的，所以我做了以下事情（从这里的一些示例代码再次启发我）：

```
public class CustomScrollBarUI extends BasicScrollBarUI {

    private ImageIcon img;

    protected JButton createZeroButton() {
        JButton button = new JButton("zero button");
        Dimension zeroDim = new Dimension(0,0);
        button.setPreferredSize(zeroDim);
        button.setMinimumSize(zeroDim);
        button.setMaximumSize(zeroDim);
        return button;
    }

    protected JButton createDecreaseButton(int orientation) {
        return createZeroButton();
    }

    protected JButton createIncreaseButton(int orientation) {
        return createZeroButton();
    }

    protected void paintThumb(Graphics g, JComponent c, Rectangle thumbBounds) {
        BufferedImage img = new LoadBackgroundImage("images/slider.png").getImage();
        g.drawImage(img, 0, 0, new Color(255,255,255,0), null);
    }

    protected void setThumbBounds(int x, int y,int width,int height){
          super.setThumbBounds(x, y, 14, 14);
    }

    protected Rectangle getThumbBounds(){
          return new     Rectangle(super.getThumbBounds().x,super.getThumbBounds().y,14,14);
    } 

        protected Dimension getMinimumThumbSize(){
        return new Dimension(14,14);
    }

    protected Dimension getMaximumThumbSize(){
        return new Dimension(14,14);
    }
} 
```

LoadBackGroundImage 是一个自己的类，它通过 ClassLoader 创建一个 BufferedImage。滚动条的拇指现在是我的自定义“slider.png”，但它不会移动。如果我向下拖动它，窗格会滚动，但拇指仍留在原处。由于我还没有理解所有机制，所以我阅读了有关paintImage方法的信息。在那里你必须提交一个 ImageObserver，我不太了解它的功能。我在网上找到了各种代码示例提交 null （就像我一样），但我认为这不适用于必须移动（并重新绘制）的图像。我该如何解决这个问题？如果我在paintThumb 方法中绘制普通图形，它可以正常工作，但是一旦我绘制图像，它就不会移动。

我希望有人能帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:43:03.920

在您的特定情况下 - 您总是在同一位置绘制图像：

```
protected void paintThumb(Graphics g, JComponent c, Rectangle thumbBounds) {
    BufferedImage img = new LoadBackgroundImage("images/slider.png").getImage();
    g.drawImage(img, 0, 0, new Color(255,255,255,0), null);
} 
```

这里的“0, 0”是滚动条坐标系中的“x, y”坐标（零位于左上角）。

您在指向当前拇指位置的paintThumb 方法（Rectangle thumbBounds）中收到拇指边界 - 只需使用这些值在适当的位置绘制图像。

如果您的拇指图像大小不适合收到的 thumbBounds，您可以计算它的中间点和中心图像。这只是一个例子——你可以用你喜欢的任何其他方式来做。

我想补充一点，几乎各种 UI 中的每个分离的绘制方法都放置在同一个坐标系中，所以你总是必须使用接收到的坐标/边界/...来放置你正在绘制的东西或自己计算它.

# c - 缺少在 Debian Etch 上定义的 IP_MTU 套接字选项？

> ID：10462986
> 
> 赞同：1
> 
> 时间：2012-05-05T14:55:40.577
> 
> 标签：c, linux, sockets, debian

我正在尝试使用套接字选项读取我的**TCP 连接的****MTU** 根据安装在我的**Debian Etch**上（我知道，它已经很老了，但现在改变它不是一个选项）：**`IP_MTU`
`man 7 ip`**

 ****```
SYNOPSIS
       #include <sys/socket.h>
       #include <netinet/in.h>
       #include <netinet/ip.h> /* superset of previous */
[CUT]
IP_MTU Retrieve the current known path MTU of the current socket.
Only valid when the socket has been  connected.  Returns  an integer.  
Only valid as a getsockopt(2). 
```

问题是上述套接字选项不存在于手册页命名的任何包含文件中。（因此我的代码没有编译；））
我发现它定义在`<linux/in.h>`（`grep`是你的朋友）
如果我尝试添加`<linux/in.h>`到我的源代码中，我会得到各种多重定义/重新声明编译错误。有谁知道为什么标题中缺少上述参数以及如何解决该问题？
非常感谢
塞尔吉奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T15:00:00.637

答案是：我认为没有答案。我正在运行 Red Hat Enterprise Linux AS 第 4 版（Nahant Update 8），我遇到了完全相同的问题：

*   man 7 ip 说我可以查询 MTU
*   grep -Re IP_MTU /usr/include/* 表示宏只存在于linux/in.h
*   我不能使用 linux/in.h 或者我得到很多错误

所以，我想唯一要做的就是通过设置 MTU 发现，不断调整 MTU 并观察内核在你尝试发送太大的东西时关闭你。这就是我要做的。****

# visual-studio-2010 - 安装 Visual Studio Ultimate 时出错

> ID：10462987
> 
> 赞同：2
> 
> 时间：2012-05-05T14:55:57.707
> 
> 标签：visual-studio-2010, installation

当我想安装 VS2010 Ultimate 时，我收到了一些错误，例如“setup.exe 已停止工作”，详细信息如下：

```
Problem signature:
  Problem Event Name:   VSSetup
  Problem Signature 01: unknown
  Problem Signature 02: unknown
  Problem Signature 03: unknown
  Problem Signature 04: 1
  Problem Signature 05: engine_startup
  Problem Signature 06: Install_I_Interactive_Crash
  Problem Signature 07: 0xc0000006
  Problem Signature 08: unknown
  Problem Signature 09: unknown
  OS Version:   6.1.7601.2.1.0.256.1
  Locale ID:    1057

Read our privacy statement online:
  http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409

If the online privacy statement is not available, please read our privacy statement offline:
  C:\Windows\system32\en-US\erofflps.txt 
```

有时我收到其他错误“套件集成工具包可执行文件已停止工作”

我的操作系统是安装了 Windows 7 x64 SP1 任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:21:14.597

> 仅供参考，我不使用 dvd，而是使用带有 iso 的虚拟驱动器

那条小评论与问题非常相关。异常代码 0xc0000006 是 STATUS_IN_PAGE_ERROR，这是一个非常低级的事故，当 Windows 尝试从内存映射文件将数据读入 RAM 并且发生阻止数据被读取的 I/O 错误时发生。对于 .exe（例如 setup.exe 程序），这是一个致命错误，因为它无法执行无法读取的代码。

很明显，您使用的任何实用程序都是错误的，很可能是因为它安装的驱动程序有错误。我强烈建议你把它扔掉。一种解决方法是将虚拟磁盘的内容复制到硬盘驱动器并从那里安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T18:05:24.533

我卸载了守护程序工具并安装了旧版本的守护程序工具。我为安装 Visual Studio Ultimate 做了同样的步骤，并成功地安装了 Visual Studio

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:00:45.230

第一步使用控制面板中的添加删除程序卸载Visual Basic，然后使用软件卸载程序（在我的情况下，我使用“YourUninstaller”，你可以选择任何你想要的软件）来清除剩余的垃圾注册表。

确保您已正确安装 .NET Framework 4.0，如果您有 Microsoft SQL Server，请确保在安装 Visual Studio 2010 之前先安装 MS SQL Server

# android - 创建 Phonegab 插件会导致未定义的调用方法 'doAction'

> ID：10462990
> 
> 赞同：0
> 
> 时间：2012-05-05T14:56:13.933
> 
> 标签：android, cordova, phonegap-plugins, native-code

我有一个小问题。我正在尝试创建一个插件来在本机插件中完成一些繁重的工作，并且还解决了 web sqlite 实现中的限制。（数据库限制为 5MB，但我需要更多）。

首先，这是旨在完成这项工作的 Main 类：

```
package com.worker.api;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.phonegap.api.Plugin;
import com.phonegap.api.PluginResult;
import com.phonegap.api.PluginResult.Status;

public class worker extends Plugin{
    public final String version = "1.0";
    public String callback;
    public worker(){

    }

    public PluginResult execute(String action, JSONArray args, String
                                callbackId) {
        this.callback = callbackId;
        PluginResult r = null;
        try{
            if(action.equals("connectDB")){

            }else if(action.equals("closeDB")){

            }else if(action.equals("query")){
                r = this.query();
            }else if(action.equals("insert")){
                r = this.insert();
            }else if(action.equals("update")){
                r = this.update();
            }else if(action.equals("delete")){
                r = this.delete();
            }else if(action.equals("syncronize")){
                r = this.syncronize();
            }else if(action.equals("getVersion")){
                r = this.getVersion();
            }else{
                r = new PluginResult(Status.INVALID_ACTION);
                r.setKeepCallback(true);
            }
        }catch(JSONException ex){
            r = new PluginResult(Status.JSON_EXCEPTION);
        }
        return r;
    }
    public PluginResult query(){
        return null;
    }
    public PluginResult insert(){
        return null;
    }
    public PluginResult update(){
        return null;
    }
    public PluginResult delete(){
        return null;
    }
    public PluginResult syncronize(){
        return null;
    }
    public PluginResult getVersion() throws JSONException{
        JSONObject obj = new JSONObject();
        obj.put(version,this.version);
        return new PluginResult(Status.OK,obj);
    }
} 
```

目前我只实现了 getVersion 部分，因为我仍在对此进行测试

在 plugin.xml 我添加了这个：

```
<plugin name="workerAPI" value="com.worker.api.worker" /> 
```

主 js 文件如下所示：

```
 var workerApi = function(){}

    var genericSuccess = function(e) {
        alert("Success: " + e.toString());
    };

    var fail = function(e) {
        alert("Failure " + e.toString());
    };

    workerApi.prototype.doAction = function(
            operation,
            argument,
            successFunction,
            failFunction
            ){
        var succ = successFunction ? successFunction : genericSuccess;
        var faic = failFunction ? failFunction : fail;
        return PhoneGap.exec(
                succ,
                faic,
                "workerAPI",
                operation,
                [argument]
        );
    };

    PhoneGap.addConstructor(function() {
        PhoneGap.addPlugin(
                    "workApi",
                    new workerApi()
        );
    });

    var WKapi = {
            "openDB": function(){
                window.plugins.workApi.doAction(
                    "connectDB",
                    null
                );
            },
            "closeDB": function(){
                window.plugins.workApi.doAction(
                    "closeDB",
                    null
                );
            },
            "query": function(arg){
                window.plugins.workApi.doAction(
                    "query",
                    arg
                );
            },
            "insert": function(arg){
                window.plugins.workApi.doAction(
                    "insert",
                    arg
                );
            },
            "update": function(arg){
                window.plugins.workApi.doAction(
                    "update",
                    arg
                );
            },
            "delete": function(arg){
                window.plugins.workApi.doAction(
                    "delete",
                    arg
                );
            },
            "sync": function(arg){
                window.plugins.workApi.doAction(
                    "syncronize",
                    arg
                );
            },
            "version": function(){
                window.plugins.workApi.doAction(
                    "version"
                );
            }
    }; 
```

一旦我执行它，记录器 LogCat 就会告诉我错误：

未捕获的类型错误：无法在 file:///android_asset/www/worker.js:79 调用未定义的方法 'doAction'

我真的不知道我做错了什么。

- - -添加在 - - -

这是 index.php 中的代码块

```
 <script lang="text/javascript">
            document.addEventListener("deviceready", onDeviceReady, false);
            var isRun = false;
            function onDeviceReady() {
                WKapi.version();
            };
        </script>
    </div>
</body>
</html> 
```

我仍然得到 Uncaught TypeError: Cannot call method 'doAction' ... 它发生在这个调用上：window.plugins.workerApi.doAction

如果我将 window.plugins.workerApi 放入警报中，它会给我未知的回报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:50:34.880

在您的 Java 类中，您正在寻找“getVersion”，所以这就是需要在此处传递的内容。

```
"version": function(){
    window.plugins.workApi.doAction(
        "getVersion"
        );
    } 
```