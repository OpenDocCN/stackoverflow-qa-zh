# StackOverflow 问答 11862000-11862999

# android - 在 Android 上测试 SSL

> ID：11862002
> 
> 赞同：1
> 
> 时间：2012-08-08T09:55:16.580
> 
> 标签：android, ssl

我编写了将使用 SSL 与 HTTP 服务器通信的应用程序。我正在使用来自[站点](http://blog.antoine.li/2010/10/22/android-trusting-ssl-certificates/)的信息从 Android 发送数据。我知道要测试 Android 代码，我需要生成证书，然后配置 Apache 并编写将从 Android 接收数据的服务器，但我的问题是我对 WEB 开发了解不多，我无法编写任何东西来测试。你知道任何快速简便的方法来测试我的 Android 代码吗？

# c# - 使用 REST 和 C# 实现 Google 音译 API，面临 unicode 和解析问题

> ID：11862004
> 
> 赞同：3
> 
> 时间：2012-08-08T09:55:23.427
> 
> 标签：c#, asp.net, json, rest, unicode

我一直在尝试使用 RESTful 方法使用 Google Transliterate API，因为它很容易通过服务器端语言（此处为 C#）来实现。

因此，我遇到了这种 URL 格式：[http://www.google.com/transliterate/indic?tlqt=1&langpair=en|hi&text=bharat%2Cindia&tl_app=3](http://www.google.com/transliterate/indic?tlqt=1&langpair=en|hi&text=bharat%2Cindia&tl_app=3)以以下格式返回 JSON：

```
[
{
"ew" : "bharat",
"hws" : [
"भारत","भरत","भरात","भारात","बहरत",
]
},
{
"ew" : "india",
"hws" : [
"इंडिया","इन्डिया","इण्डिया","ईन्डिया","इनडिया",
]
},
] 
```

我尝试获取 JSON `HttpWebRequest`，`HttpWebResponse`但它在 Web 浏览器上以 Unicode 格式返回值，例如：

```
[ { "ew" : "bharat", "hws" : [ "\u092D\u093E\u0930\u0924","\u092D\u0930\u0924","\u092D\u0930\u093E\u0924","\u092D\u093E\u0930\u093E\u0924","\u092C\u0939\u0930\u0924", ] }, { "ew" : "india", "hws" : [ "\u0907\u0902\u0921\u093F\u092F\u093E","\u0907\u0928\u094D\u0921\u093F\u092F\u093E","\u0907\u0923\u094D\u0921\u093F\u092F\u093E","\u0908\u0928\u094D\u0921\u093F\u092F\u093E","\u0907\u0928\u0921\u093F\u092F\u093E", ] }, ] 
```

所以，我应用了这篇[文章](https://stackoverflow.com/questions/1615559/converting-unicode-strings-to-escaped-ascii-string)并通过它传递了 JSON**字符串**，它返回：

```
[ { "ew" : "bharat", "hws" : [ "भारत","भरत","भरात","भारात","बहरत", ] }, { "ew" : "india", "hws" : [ "इंडिया","इन्डिया","इण्डिया","ईन्डिया","इनडिया", ] }, ] 
```

**第一个问题**：到目前为止我做得对吗？因为在浏览器中它不显示最后一个`" ] "`，但是`" ] "`存在于 HTML 源代码中（不确定为什么会发生这种情况）。另外，当我尝试解析它时，使用（使用这种技术我可能错了）：

```
var jss = new JavaScriptSerializer();
var dict = jss.Deserialize<Dictionary<string, dynamic>>(the_JSON_string); 
```

它给我错误说：

```
Invalid array passed in, extra trailing ','. 
```

**第二个问题**：如果到目前为止我做得对，我可以获得一些帮助来*解析印地语单词*吗？我应该采取什么方法最好使用`System.Web.Script.Serialization;`. 最终我想获取印地语文本进行进一步处理。

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:17:18.340

我会推荐[Json.Net](http://json.codeplex.com/)来解析 json 字符串。下面的代码（使用您的示例字符串）有效，您不需要做任何事情来取消转义这些字符。Json 解析器将为您处理它。

```
string json = @"[ { ""ew"" : ""bharat"", ""hws"" : [ ""\u092D\u093E\u0930\u0924"",""\u092D\u0930\u0924"",""\u092D\u0930\u093E\u0924"",""\u092D\u093E\u0930\u093E\u0924"",""\u092C\u0939\u0930\u0924"", ] }, { ""ew"" : ""india"", ""hws"" : [ ""\u0907\u0902\u0921\u093F\u092F\u093E"",""\u0907\u0928\u094D\u0921\u093F\u092F\u093E"",""\u0907\u0923\u094D\u0921\u093F\u092F\u093E"",""\u0908\u0928\u094D\u0921\u093F\u092F\u093E"",""\u0907\u0928\u0921\u093F\u092F\u093E"", ] }, ]";

dynamic obj = JsonConvert.DeserializeObject(json);
MessageBox.Show(obj[0].hws[0].ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:13:33.120

我想你可以像下面这样删除最后一个逗号

```
 the_JSON_string =  the_JSON_string.Remove(the_JSON_string.LastIndexOf(',')); 
```

# powershell - 使用 PowerShell 连接到 DB2

> ID：11862005
> 
> 赞同：0
> 
> 时间：2012-08-08T09:55:25.703
> 
> 标签：powershell, db2

我正在尝试连接到 DB2 数据库并执行一些查询。几天前我让它工作了，但现在它给出了一些非常奇怪的错误，我不知道为什么。

PowerShell 连接代码

```
$connection = New-Object System.Data.OleDb.OleDbConnection("Provider=IBMDADB2;Database=X;HostName=X;Protocol=TCPIP;Port=X;Uid=X;Pwd=X;CurrentSchema=X");
$ds = New-Object "System.Data.DataSet"  

$da = New-Object System.Data.OleDb.OleDbDataAdapter($QuerySQL, $connection)
$da.Fill($ds)

$ds.Tables[0].Rows |
    select * -ExcludeProperty RowError, RowState, HasErrors, Name, Table, ItemArray |
    Export-Csv "c:\Scripts\results.csv" -encoding "unicode" -notype 
```

我看到的错误：

> 使用“1”参数调用“填充”的异常：“没有可用的错误消息，结果代码：E_UNEXPECTED(0x8000FFFF)。”

有人知道为什么会出现这种情况吗？

我有其他脚本`Fill()`以完全相同的方式使用并且不会产生错误，所以这真的让我感到困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:44:00.967

好的，我已经想通了。

您需要以管理员身份运行 powershell 才能使用 DB2 驱动程序。为什么会这样，我不知道，但我就是这样解决的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T18:16:56.297

您需要将用户添加到`DB2Users`or`DB2Admns`组。本地管理员组也可以工作，但出于安全原因，其他两个组更合适。这些组通常默认在您安装 DB2 的服务器上创建。他们是本地团体。

# ios - 在 MKMapView 上同步 COCOS2D 层

> ID：11862007
> 
> 赞同：2
> 
> 时间：2012-08-08T09:55:28.153
> 
> 标签：ios, opengl-es, cocos2d-iphone, mkmapview, mapkit

我正在尝试将 cocos2D 图层对象与地图同步，我设法通过将 glView 调整为 MKMapView 的 visibleMapRect 来使其工作。我可以缩放、移动，我的对象跟随地图。但是，MKMapView 和 cocos2D 层之间存在一个小而烦人的延迟。

我在每个显示循环中同步它。

方法：

1) 检索 MKMapView.visibleMapRect

2）设置glViewPort

3) 进行正交投影以将我的图层调整为 MapView。

我已经尝试过其他方法，比如用触摸移动 cocos2D 层，然后根据触摸移动我的地图坐标，仍然滞后。

即使禁用 MapView 的加速和减速也不会消除滞后。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:20:17.687

在黑暗中射击：我们知道 iOS 设备在缩放时使用优化来加速渲染。这对于 Safari 浏览器来说是正确的，当您放大时，实际上只放大了当前显示为浏览器窗口内容的图像。只有在您停止捏合动作后，设备才会更新视图。

您会在旧设备上通过文本特别看到这一点。当设备以新的比例因子重新渲染内容时，文本突然又变得清晰明了。我相信在 MKMapView 中进行了相同的优化。

您可能想要检查 visibleMapRect 值是否在缩放期间实际更新，以及它们是否准确反映当前缩放级别。

我可以想象的另一个问题是 MKMapView + Cocos2D 的帧率很低。特别是缩放可能会消耗大量 CPU 资源。您可能希望启用 cocos2d FPS 显示以查看帧速率。

允许在 cocos2d 中平滑滚动视图（尤其是 UITableView 等复杂视图）所必需的另一个技巧是降低 cocos2d 的最大帧率（animationInterval）和/或在单独的线程上运行 gl 视图的渲染。您的问题可能只是此问题的变体：[UIScrollView pauses NSTimer until scrolling finished](https://stackoverflow.com/questions/605027/uiscrollview-pauses-nstimer-until-scrolling-finishes)

请注意，DisplayLink 控制器也会发生这种情况。[这个问题](https://stackoverflow.com/questions/5133731/how-to-make-ui-responsive-all-the-time-and-do-background-updating)中的信息对我有用。

# jquery - Jquery Plugin - 所有元素的弹出窗口中的错误消息

> ID：11862012
> 
> 赞同：0
> 
> 时间：2012-08-08T09:55:51.157
> 
> 标签：jquery, validation

我正在使用 jquery 插件 - 验证。

它工作得很好，但我需要根据客户的要求进行修改。

是否有任何选项可以显示弹出警报框中突出显示的每个元素的所有错误，而不是显示在单个元素旁边的错误。

评论会有所帮助。

问候。

# .htaccess - 重写 url，删除段

> ID：11862019
> 
> 赞同：2
> 
> 时间：2012-08-08T09:56:06.737
> 
> 标签：.htaccess, url, mod-rewrite

我正在尝试从 url 中删除 /uploads 。我遵循了许多示例，但没有一个有效。

我认为这是最接近的，应该可以正常工作，但什么也没发生。

```
RewriteRule ^/uploads/(.+)$ /$1 [QSA] 
```

这是我在 htaccess 中的内容

```
# Enable URL rewriting for pretty URLs

php_flag magic_quotes_gpc off

<FilesMatch "\.(?i:pdf)$">
  ForceType application/octet-stream
  Header set Content-Disposition attachment
</FilesMatch>

RewriteEngine on
RewriteBase /
RewriteRule ^/uploads/(.+)$ /$1 [QSA]

RewriteRule !\.(php|js|ico|gif|jpg|png|css|html|cgi|pdf|doc|xls|docx|xlsx|ppt|tff|svg|eot|woff|swf|mp3|wma|wav|MP4|AIFF|AAC|m4a|m4p|AVI|MOV|MPG|MPEG)$ index.php [NC]
#RedirectMatch ^/$ /misc/offline.php [NC] 
```

我应该从： [http](http://example.com/storage/uploads/droom.pdf) ://example.com/storage/uploads/droom.pdf 到： [http ://example.com/storage/droom.pdf](http://example.com/storage/droom.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:03:20.883

尝试替换此行：

```
RewriteRule ^/uploads/(.+)$ /$1 [QSA] 
```

有了这个：

```
RewriteRule ^(.*?)/?uploads(.*)$ /$1$2 [L] 
```

# ios - iOS FMDB Sqlite 包装器。记不清

> ID：11862024
> 
> 赞同：0
> 
> 时间：2012-08-08T09:56:21.877
> 
> 标签：ios, sqlite, memory, fmdb

以下代码：

```
-(NSArray *)getContentsWithContextTypes:(NSArray *)contextTypes
                            contextData:(NSArray *)contextData
{
    __block NSString *query = @"SELECT * FROM Texts_original1 WHERE ";
    [contextData enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        NSString *attributeName = [self.contextTypeToDBQueryTexts          
                                        objectForKey:contextTypes[idx]];
        query = [query stringByAppendingFormat:@"%@ = \"%@\"", attributeName, obj];
        if(idx != contextData.count - 1)
        {
            query = [query stringByAppendingString:@" AND "];
        }
    }];

    [self.db open];
    FMResultSet *results = [self.db executeQuery:query];
    NSMutableArray *array = [NSMutableArray array];

    while([results next])
    {
        Content *content = [[TextualContent alloc] initWithResults:results];
        [array addObject:content];
    }

    [self.db close];
    return array;
} 
```

当我运行它时生成以下错误：

> 调用 sqlite3_step 时出错（21：内存不足）rs

它发生在循环的一半。应该有 33 个结果。17 之后我得到那个错误并且循环退出。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T07:25:43.600

重要的是要知道**关闭**FMResultSet 对象，因为它会导致内存问题。这样做如下，`[resultSet close]`

我没有进入您的代码逻辑，但是，我将对数据库代码进行一些修改。

尝试以下操作：

```
-(NSArray *)getContentsWithContextTypes:(NSArray *)contextTypes
                        contextData:(NSArray *)contextData
{
 __block NSString *query = @"SELECT * FROM Texts_original1 WHERE ";
 [contextData enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) 
   {
     NSString *attributeName = [self.contextTypeToDBQueryTexts          
                                    objectForKey:contextTypes[idx]];
     query = [query stringByAppendingFormat:@"%@ = \"%@\"", attributeName, obj];
     if(idx != contextData.count - 1)
     {
        query = [query stringByAppendingString:@" AND "];
     }
  }];

self.db = [FMDatabase databaseWithPath:[self getDBPath]];    

if(![db open])
{
  NSLog(@"Could not open DB");
  return nil;
} 

FMResultSet *results = [self.db executeQuery:query];
NSMutableArray *array = [NSMutableArray array];

while([results next])
{
    Content *content = [[TextualContent alloc] initWithResults:results];
    [array addObject:content];
}

[results close]; //VERY IMPORTANT!
[self.db close];
return array; 
```

}

# mysql - 正则表达式：字符串必须包含 az 和 AZ 以及 0-9

> ID：11862026
> 
> 赞同：2
> 
> 时间：2012-08-08T09:56:23.427
> 
> 标签：mysql, regex, stored-procedures

我正在使用存储过程来验证输入参数。输入参数必须包含 az 和 AZ 以及 0-9。
例如：
`aS78fhE0`->正确
`76AfbRZt`->正确
`76afbrzt`->不正确（不包含大写AZ）
`asAfbRZt`->不正确（不包含数字0-9）
`4QA53RZJ`->不正确（不包含小写az）

什么正则表达式可以像上面的例子一样验证输入参数，.?

非常感谢，
Praditha

**UPDATE**
不允许使用除字母数字以外的其他字符
我正在使用 MySQL 版本 5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:00:48.907

进一步来自约翰斯邮报和随后的评论：

您需要的 MySql 将是

```
SELECT * FROM mytable WHERE mycolumn REGEXP BINARY '[a-z]'
                        AND mycolumn REGEXP BINARY '[A-Z]'
                        AND mycolumn REGEXP BINARY '[0-9]' 
```

添加额外的

```
AND mycolum REGEXP BINARY '^[a-zA-Z0-9]+$' 
```

如果您*只*想要字符串中的字母数字

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T10:07:30.907

使用前瞻断言，您可以这样做：

```
/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).*$/ 
```

***更新*****：**似乎 mysql 不支持环顾断言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T10:00:50.057

您可以将其拆分为 3 个单独的正则表达式来测试每种情况。

`[a-z]`, `[A-Z]`, 和`[0-9]`

并将这些匹配的结果结合在一起，您就可以实现您正在寻找的结果。

编辑：

如果您只想匹配字母数字，您应该`^[a-zA-Z0-9]+$`按照 Ed Head 在评论中的建议进行操作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T10:02:06.877

我的解决方案是导致一个长表达式，因为我将排列所有 6 种可能性，找到的大写字母、小写字母和所需的数字可以排列在字符串中：

```
^(.*[a-z].*[A-Z].*[0-9].*|
  .*[a-z].*[0-9].*[A-Z].*|
  .*[A-Z].*[a-z].*[0-9].*|
  .*[A-Z].*[0-9].*[a-z].*|
  .*[0-9].*[a-z].*[A-Z].*|
  .*[0-9].*[A-Z].*[a-z].*)$ 
```

编辑：忘记了`.*`结尾和开头。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T10:14:44.533

不幸的是，MySQL 不支持环视断言，因此您必须为正则表达式引擎拼出它（假设*只有*这些字符是合法的）：

```
^(
[A-Za-z0-9]*[a-z][A-Za-z0-9]*[A-Z][A-Za-z0-9]*[0-9][A-Za-z0-9]*|
[A-Za-z0-9]*[a-z][A-Za-z0-9]*[0-9][A-Za-z0-9]*[A-Z][A-Za-z0-9]*|
[A-Za-z0-9]*[A-Z][A-Za-z0-9]*[a-z][A-Za-z0-9]*[0-9][A-Za-z0-9]*|
[A-Za-z0-9]*[A-Z][A-Za-z0-9]*[0-9][A-Za-z0-9]*[a-z][A-Za-z0-9]*|
[A-Za-z0-9]*[0-9][A-Za-z0-9]*[a-z][A-Za-z0-9]*[A-Z][A-Za-z0-9]*|
[A-Za-z0-9]*[0-9][A-Za-z0-9]*[A-Z][A-Za-z0-9]*[a-z][A-Za-z0-9]*
)$ 
```

或者，在 MySQL 中：

```
SELECT * FROM mytable WHERE mycolumn REGEXP BINARY "^([A-Za-z0-9]*[a-z][A-Za-z0-9]*[A-Z][A-Za-z0-9]*[0-9][A-Za-z0-9]*|[A-Za-z0-9]*[a-z][A-Za-z0-9]*[0-9][A-Za-z0-9]*[A-Z][A-Za-z0-9]*|[A-Za-z0-9]*[A-Z][A-Za-z0-9]*[a-z][A-Za-z0-9]*[0-9][A-Za-z0-9]*|[A-Za-z0-9]*[A-Z][A-Za-z0-9]*[0-9][A-Za-z0-9]*[a-z][A-Za-z0-9]*|[A-Za-z0-9]*[0-9][A-Za-z0-9]*[a-z][A-Za-z0-9]*[A-Z][A-Za-z0-9]*|[A-Za-z0-9]*[0-9][A-Za-z0-9]*[A-Z][A-Za-z0-9]*[a-z][A-Za-z0-9]*)$"; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-08T11:22:56.807

[a-zA-Z0-9]*[az]+[a-zA-Z0-9]*[AZ]+[a-zA-Z0-9]*[0-9]+[a-zA-Z0 -9]*|[a-zA-Z0-9]*[az]+[a-zA-Z0-9]*[0-9]+[a-zA-Z0-9]*[AZ]+[ a-zA-Z0-9]*|[a-zA-Z0-9]*[AZ]+[a-zA-Z0-9]*[az]+[a-zA-Z0-9]*[0 -9]+[a-zA-Z0-9]*|[a-zA-Z0-9]*[AZ]+[a-zA-Z0-9]*[0-9]+[a-zA- Z0-9]*[az]+[a-zA-Z0-9]*|[a-zA-Z0-9]*[0-9]+[a-zA-Z0-9]*[AZ]+ [a-zA-Z0-9]*[az]+[a-zA-Z0-9]*|[a-zA-Z0-9]*[0-9]+[a-zA-Z0-9] *[az]+[a-zA-Z0-9]*[AZ]+[a-zA-Z0-9]*

# html - 为什么不同的名字会给我不同的结果？

> ID：11862027
> 
> 赞同：-4
> 
> 时间：2012-08-08T09:56:24.457
> 
> 标签：html

我有一个奇怪的问题。我正在为我的网站设计一个主页，我已将我的**index.html**文件发送给我的朋友以进行更正。
他更正并寄回。我已将这个更正后的**index.html**复制 到我的项目文件夹中。

问题是，如果我将名称保留为**index.html**，它将无法正常工作：图片未正确放置。但是，如果我将**index.html**替换为**index1.html**或类似的东西，那么它就可以了。

这是我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ka-ge" lang="ka-ge" >
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<style type="text/css">
#links { 
  postiton:absolute;
    margin: 0 auto; 
    width: 4800px; 
    font-size:50px;
    clear: both; 
    display: block;

}
#test a {
    float: right;
}
a, a:active, a:visited {
    color: yellow;
    a {text-decoration:none;}
}
.image {
    position:relative;
    float:left; /* optional */
}
.image .text {
    position:absolute;
    top:400px; /* in conjunction with left property, decides the text position */
    left:10px;
     font-size:155%;
}
.flagimage {
    position:absolute;
    top:10px; /* in conjunction with left property, decides the text position */
    right:80px;
}
</style>

<body >

<div class="image">
  <img alt="" src="11.gif" />
  <div class="text">
    <a href=" index.html " >მთავარი </a>
&nbsp;
<a href=" ბაკურიანი.html ">ბაკურიანი </a>
&nbsp;
<a href=" გუდაური.html ">გუდაური </a>
&nbsp;
<a href=" ზღვა.html ">ზღვა </a>
&nbsp;
<a href=" კახეთი.html ">კახეთი </a>
&nbsp;
<a href=" სვანეთი.html ">სვანეთი </a>
&nbsp;
<a href=" ვარძია.html ">ვარძია </a>
&nbsp;
<a href=" ქართლი.html ">ქართლი </a>
&nbsp;
<a href=" ძველი_თბილისი.html ">ძველი_თბილისი </a>
&nbsp;
<a href=" დაკავშირება.html ">კონტაქტი </a>
  </div>
</div>

<div class="flagimage">
<a href="eng/index.html"><img src ='english.gif' style="float:right"  width="30" height="30"> </a>
<a href="russ/index.html"><img src ='russian.gif' alt="Russian flag" style="float:right"  width="30" height="30"/></a>
<a href="index.html"> <img src="georgian.jpg"  style="float:right" width="30" height="30"/></a>
</div>
<div id="links">

</div>
</body>
</html> 
```

现在它的名字是**index1.html**并且它工作正常但是如果我将它重命名为**index.html**，那么它就不起作用了。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:07:55.847

[使用此URL](http://www.wikihow.com/Clear-Your-Browser%27s-Cache)清除您的浏览缓存。它应该使用相同的名称。

# objective-c - 查看已加载但未加载其组件

> ID：11862028
> 
> 赞同：1
> 
> 时间：2012-08-08T09:56:25.297
> 
> 标签：objective-c, ios, ipad, view

我正在开发我的 iPad 应用程序，突然间，**在我的第一个视图中我没有看到任何东西，我**做了一个测试以了解它是否加载，`NSLog`并且它确实加载了。

但是它没有显示它的组件，例如按钮，我在模拟器上按下主页按钮，将应用程序置于后台并再次进入，然后，我可以看到我的组件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:37:13.000

检查您的 NIB 文件以确保 .m 文件正确连接到它。确保将视图分配给文件所有者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:00:51.000

在您的应用程序委托中，您是否设置了根视图控制器？

或者

只执行

```
- (void)didReceiveMemoryWarning {

     // Releases the view if it doesn't have a superview.
     [super didReceiveMemoryWarning];
     NSLog(@"recieved memory warning");
} 
```

知道是否由于内存级别而无法加载视图。

# lucene - OpenCMS：对命令执行不同的搜索

> ID：11862030
> 
> 赞同：1
> 
> 时间：2012-08-08T09:56:27.787
> 
> 标签：lucene, opencms

我已经在 OpenCMS 上实现了我的搜索功能。索引资源来自许多路径（例如 /path/alternative/news 和 /path/news）。有一种方法可以对每个资源执行单独的搜索，还是我需要两个单独的索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:29:46.433

一旦索引了单个资源，我们就可以使用搜索 bean 的 setSearchRoot() 方法。如果我想在 /path/alternative/news 中执行搜索，我设置了`setSearchRoot("/path/alternative/news")`其他，`setSearchRoot("/path/news")`.

希望有帮助。

# android - 无法以编程方式设置 TextView 阴影

> ID：11862033
> 
> 赞同：15
> 
> 时间：2012-08-08T09:56:38.167
> 
> 标签：android, textview, shadow

我正在动态创建一个 TextView 并使用此处发布的方法为其设置阴影：[Android - 文本上的阴影？](https://stackoverflow.com/questions/2486936/android-shadow-on-text)

但它不起作用。应用了样式（将 textSize 项进行测试，它可以工作），但没有出现阴影。

文本视图：

```
TextView tv = new TextView(this);
RelativeLayout.LayoutParams layoutPars = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
layoutPars.addRule(RelativeLayout.CENTER_VERTICAL); 
tv.setTextColor(0xffffffff);
tv.setText(label);
tv.setTextSize(11);
tv.setTextAppearance(getApplicationContext(), R.style.BlackShadow); 
```

风格：

```
<style name="BlackShadow">  
    <item name="android:shadowColor">#ff000000</item>
    <item name="android:shadowRadius">1</item>
    <item name="android:shadowDx">-1</item>
    <item name="android:shadowDy">-1</item>
    <item name="android:textSize">26dip</item>
</style> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-08T09:58:34.220

试试这个：

```
tv.setShadowLayer(1.5f, -1, 1, Color.LTGRAY); 
```

从文档

```
setShadowLayer(float radius, float dx, float dy, int shadowColor) 
```

这将在主层下方绘制一个阴影层，具有指定的偏移量和颜色以及模糊半径。

有关更多信息，请查看[http://developer.android.com/reference/android/graphics/Paint.html#setShadowLayer%28float,%20float,%20float,%20int%29](http://developer.android.com/reference/android/graphics/Paint.html#setShadowLayer%28float,%20float,%20float,%20int%29)

# ember.js - Ember 1.0 pre 的 Handlerbars.registerHelper 问题

> ID：11862035
> 
> 赞同：2
> 
> 时间：2012-08-08T09:56:45.687
> 
> 标签：ember.js, handlebars.js

我刚搬到 Ember 1.0 pre 并且遇到了 EM.handlebars.registerHelper 的问题

我正在使用[此处](https://github.com/emberjs/examples/blob/master/contacts/app.js)定义的车把助手：

```
Ember.Handlebars.registerHelper('editable', function(path, options) {
  options.hash.valueBinding = path;
  return Ember.Handlebars.helpers.view.call(this, App.EditField, options);
}); 
```

像那样 ：

```
{{#view App.CardView}}
  {{#with view.content}}
    {{editable name}}
  {{/with}}
{{/view}} 
```

但我得到的不是*name的**值*，而且该字段不可编辑。

如果我写

```
{{#view App.CardView}}
  {{#with view.content}}
    {{name}}
  {{/with}}
{{/view}} 
```

显示名称属性。

任何想法 ？

谢谢

# php - PHP APNs 提供者证书和发布

> ID：11862036
> 
> 赞同：0
> 
> 时间：2012-08-08T09:56:46.047
> 
> 标签：php, certificate, apple-push-notifications

我目前正在开发一个包含 PHP API 的 iPhone 应用程序。用户可以购买它并在自己的 Web 服务器上设置后端。

现在我有了提供内置 APN 并将其包含在 PHP 后端的想法。

所以我的问题是如何处理证书问题？我也可以轻松地包含我的证书吗？发布推送证书会不会很危险？苹果会允许吗？

谢谢，致以诚挚的问候，朱利安

# java - 代码完成后关闭 Swing 应用程序

> ID：11862041
> 
> 赞同：1
> 
> 时间：2012-08-08T09:56:51.800
> 
> 标签：java, swing, jframe

对于专家“浪荡公子”来说，这无疑是一个简单的问题，但经过一些研究，我没有想出任何东西。

我有这种形式的代码：

```
 public static void main(Strings[] args) {
    final JFrame frame = new JFrame("Symbol Formatter");
    final JButton button = new JButton("Begin");
    final JFileChooser filechoose = new JFileChooser();

    button.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
            filechoose.showOpenDialog(frame);
            filename = filechoose.getSelectedFile();

            doSomething(filename);

            button.setEnabled(false);
            frame.setVisible(false); //edit for Andrew Thompson
        }

    });
    JPanel panel = new JPanel();
    panel.add(button);
    frame.add(panel);
    frame.pack();
    frame.setSize(250, 75);
    frame.setLocationByPlatform(true);
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    frame.setVisible(true);
} 
```

我想在`doSomething(filename)`完成后关闭 Swing 应用程序。目前，原始框架保持在原处，应用程序仅在手动关闭框架时终止。我怎样才能关闭一次`doSomething(filename)`运行一次。

我确信这是一个简单的问题，只需要更改`setDefaultCloseOperation`，但是[Jframe](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html)文档对我帮助不大。

另外，有没有办法给它添加标题`showOpenDialog`？这就是像“**选择库文件**”这样的标题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:02:22.377

你可以使用：

`frame.dispose()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:02:41.767

称呼..

```
frame.setVisible(false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T10:29:44.020

我相信如果您将默认关闭操作更改为

```
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

调用`dispose`应该终止应用程序并退出 JVM。

如果失败，如前所述，调用`System.exit(0)`肯定会终止 te JVM

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:06:25.587

有关文件选择器对话框的标题，请参阅[javadoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#setDialogTitle%28java.lang.String%29 "文档")。

# wpf - 如何设置组合框选定值

> ID：11862045
> 
> 赞同：0
> 
> 时间：2012-08-08T09:57:04.137
> 
> 标签：wpf, combobox

在下面显示的代码注释中突出显示的以下错误需要帮助以下方法的目的是按值查找组合框项并将其设置为组合框（如果存在），否则将其添加到组合框然后设置它。

```
private void SetComboBoxValueHelper(ComboBox cb, string valuetoSet)
    {
        bool isValueNotFound = false;

        cb.SelectedValue = valuetoSet;
        isValueNotFound = string.IsNullOrEmpty(Convert.ToString(cb.SelectedValue));

        if (isValueNotFound)
        {   
            //try to ignore case and find the item in combobox
            foreach (ComboBoxItem item in cb.Items) //1.ERROR AFTER ANY ITEM ADDED using my code
            {
                if (string.Compare(Convert.ToString(item.Content), valuetoSet, true) == 0)
                {
                    cb.SelectedValue = item.Content;
                    isValueNotFound = false;
                }
            }

            //if still not found add the item to the combobox
            if (isValueNotFound)
            {
                cb.Items.Add(valuetoSet);
                cb.SelectedValue = valuetoSet;//2.THIS IS NOT WORKING
            }
        }
    } 
```

我使用的示例组合框是

```
<ComboBox Grid.Column="5" Grid.Row="4" Margin="10" Name="cbbox1" SelectedValuePath="Content">
        <ComboBoxItem Content="No" IsSelected="True"  />
        <ComboBoxItem Content="Yes"  />
    </ComboBox> 
```

请让我知道a）我如何修复那条非工作线。b）我在评论中显示的行出现错误。我该如何防止它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:11:30.920

这里的问题是您正在向组合框的项目添加一个字符串：

```
cb.Items.Add(valuetoSet); 
```

您应该改为添加一个新的 ComboBoxItem：

```
cb.Items.Add(new ComboBoxItem { Content = valuetoSet }); 
```

否则，您将在 Items 集合中混合 ComboBoxItems 和字符串。现在，当您将项目作为 ComboBoxItems 进行迭代时，遇到添加的字符串项目时会出现异常。

但是，您应该考虑使用字符串项而不是 ComboBoxItems。这将使您的代码更清晰，您可以通过[SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem.aspx)属性直接处理选定的字符串项，而无需`SelectedValuePath`像`Convert.ToString(item.Content)`.

您甚至可以像这样在 XAML 中定义初始项字符串：

```
<ComboBox xmlns:sys="clr-namespace:System;assembly=mscorlib"
          SelectedIndex="0" ...>
    <sys:String>No</sys:String>
    <sys:String>Yes</sys:String>
</ComboBox> 
```

现在，您的整个 SetComboBoxValueHelper 方法将像 Novitchi 所写的那样简化：

```
private void SetComboBoxValueHelper(ComboBox cb, string valuetoSet)              
{              
    if (!cb.Items.Contains(valuetoSet))
    {
        cb.Items.Add(valuetoSet);
    }

    cb.SelectedItem = valuetoSet;              
} 
```

编辑：如果仍然需要迭代项目，您还将迭代字符串而不是 ComboBoxItems：

```
foreach (string item in cb.Items)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:51:35.223

正如 Clemens 已经建议的那样，您不应该混合 ComboBoxItems 和 String。从 XAML 添加到组合框 ComboBoxItems，从代码添加字符串。一个简单的解决方案是将所有项目设置为字符串。为此，您也应该从代码中添加 Yes, No 项目。然后你的 SetComboBoxValueHelper 应该是这样的：

```
 private void SetComboBoxValueHelper(ComboBox cb, string valuetoSet)
    {
        bool valueNotFound = !cb.Items.Contains(valuetoSet);

        if (valueNotFound)
            cb.Items.Add(valuetoSet);

        cb.SelectedItem = valuetoSet;
    } 
```

wpf 将为您创建 ComboBoxItem，您可以使用它来获取它

```
 cb.ItemContainerGenerator.ContainerFromItem("ItemString"); 
```

# c# - 带有箭头而不是“点”的 2D 散点图

> ID：11862050
> 
> 赞同：1
> 
> 时间：2012-08-08T09:57:25.657
> 
> 标签：c#, .net, data-visualization, zedgraph, scatter-plot

我想制作一个具有以下要求的二维散点图；

*   “点”不应该是点，而是指向向上或向下的箭头，具体取决于它所代表的数据。
*   应该可以指定要在轴上显示的值。
*   用户应该能够在图表上进行缩放和平移。
*   我希望能够指定每个箭头应该有什么颜色。
*   箭头应该是可点击的（即我需要一些方法来注册点击事件并决定点击了哪个箭头）。

我曾尝试使用 ZedGraph 来实现这一点，但我发现很难得到我想要的，尤其是第一个要求。

是否有一个免费的图表库可以让我在 WinForms 中相对容易地做到这一点？或者，关于如何使用 ZedGraph 完成第一个要求的任何一般提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:56:32.537

我现在了解到所有需求都可以使用 ZedGraph 来完成。

> “点”不应该是点，而是指向向上或向下的箭头，具体取决于它所代表的数据。

最干净的解决方案是使用 LineItem 并执行自定义符号类型，就像这篇文章[自定义 ZedGraph LineItem 的符号类型一样](https://stackoverflow.com/questions/11879915/customize-symbol-type-of-a-zedgraph-lineitem)。

> 应该可以指定要在轴上显示的值。

一个简单的解决方案是使用 TextLabels 并手动将它们放置在您想要的位置。

> 用户应该能够在图表上进行缩放和平移。

ZedGraph 内置的功能。

> 我希望能够指定每个箭头应该有什么颜色。

可以为每种颜色创建多个 LineItem，但这要求线条本身不可见。

> 箭头应该是可点击的（即我需要一些方法来注册点击事件并决定点击了哪个箭头）。

使用 Click 事件和 FindNearestPoint 方法轻松制作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:29:27.777

在 Zedgraph 示例中，有一个使用 ects 向数据点添加文本标签的示例`TextObj`。[您可以在此处](http://zedgraph.dariowiz.com/index9769.html?title=Point_Label_Demo)找到此演示示例。

基于此示例，您应该能够使用[ArrowObj ects](http://zedgraph.sourceforge.net/documentation/html/T_ZedGraph_ArrowObj.htm)而不是ects 在所需位置创建向上和向下箭头`TextObj`。

# mysql - 如何在现有的 mysql 表中进行按月分区？

> ID：11862051
> 
> 赞同：0
> 
> 时间：2012-08-08T09:57:27.433
> 
> 标签：mysql, database, partitioning

我有一张包含数十万条记录的表。如何按月对表进行分区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:59:12.893

您可以在其`ALTER TABLE`上创建新的[PARITIONS](http://dev.mysql.com/doc/refman/5.5/en/partitioning-range.html)。

```
ALTER TABLE table_name PARTITION BY RANGE (MONTH(date_column)
(
  PARTITION JAN VALUES LESS THAN (2),
  PARTITION FEB VALUES LESS THAN (3),
  ...
  PARTITION DEC VALUES LESS THAN MAXVALUE
); 
```

# iphone - 根据设备类型定义常量

> ID：11862052
> 
> 赞同：6
> 
> 时间：2012-08-08T09:57:32.037
> 
> 标签：iphone, objective-c, constants, device, definition

我有一个 Constants.h 文件，其中实际上包含一些全局常量。由于我的应用程序是为 iPhone 和 iPad 构建的，我想为这两种设备类型定义相同的常量（即具有相同的名称）。

完整的解释：

```
/******** pseudo code *********/

if (deviceIsIPad){
    #define kPageMargin 20
}
else {
    #define kPageMargin 10
} 
```

我怎样才能做到这一点？谢谢。

L.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-08T10:03:26.073

在预处理步骤中获取设备类型是不可能的。它是在运行时动态确定的。你有两个选择：

1.  创建两个不同的目标（分别用于 iPhone 和 iPad）并在那里定义宏。

2.  创建插入表达式的宏，如下所示：

> ```
>  #define IS_IPAD    (UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
> 
>  #define kMyConstant1 (IS_IPAD ? 100 : 200)
>  #define kMyConstant2 (IS_IPAD ? 210 : 230)
>  #define kMyConstant3 (IS_IPAD ? @"ADASD" : @"XCBX") 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:01:15.310

`#define`在编译时解析，即在您的计算机上

显然，您不能以您想要的方式使它们成为有条件的。我建议创建`static`变量并将它们设置在`+(void)initialise`你的类的方法上。

对于条件，使用类似的东西

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {   
    // iPad 
} else {   
    // iPhone or iPod touch. 
} 
```

所以那会去

```
static NSInteger foo;

@implementation bar

+(void)initialise{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {   
        // iPad 
        foo = 42;
    } else {   
        // iPhone or iPod touch. 
        foo = 1337;
    }
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:00:19.933

嗨，在`appdelegate`课堂上写这段代码

```
 +(NSString *)isAppRunningOnIpad:(NSString *)strNib{
    NSString *strTemp;
    NSString *deviceType = [UIDevice currentDevice].model;
    if ([deviceType hasPrefix:@"iPad"]){
        strTemp=[NSString stringWithFormat:@"%@I",strNib];
    }
    else{
        strTemp=strNib;
    }
    return strTemp;
} 
```

使用此行从您的班级中调用它

```
SecondVC *obj_secondvc = [[SecondVC alloc] initWithNibName:[AppDelegate isAppRunningOnIpad:@"SecondVC"] bundle:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:04:38.940

使用 UIDevice 宏 - [http://d3signerd.com/tag/uidevice/](http://d3signerd.com/tag/uidevice/)

然后你可以编写如下代码；

```
if ([DEVICE_TYPE isEqualToString:DEVICE_IPAD]) {

} 
```

或者

```
if (IS_SIMULATOR && IS_RETINA) {

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T10:09:50.870

您不能使用定义来执行此操作，因为它们在编译时会被扩展。但是，您可以根据用户界面习惯定义变量并设置其初始值：

```
// SomeClass.h
extern CGFloat deviceDependentSize;

// SomeClass.m
- (id)init
{
    // ...
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad])
        deviceDependentSize = 1024.0f; // iPad
    else
        deviceDependentSize = 480.0f; // iPhone

    // etc.
} 
```

# c - 通过引用将二维数组传递给函数

> ID：11862054
> 
> 赞同：3
> 
> 时间：2012-08-08T09:57:37.917
> 
> 标签：c, arrays, pointers, reference

所以在我的主要功能中，我正在创建一个二维数组：

```
int dataDim = 100;
float inData[2][dataDim]; 
```

我想将它传递给一个可以用数据填充它的函数。如何以我可以直接填写的方式传递它？也许

```
function(float** array) 
```

然后访问`array[0][0]`可能不起作用？奇怪的是，我找不到任何关于此的快速示例。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T10:10:52.940

在 C 中，必须知道多维数组的大小才能这样传递，尽管如果您愿意，可以省略一些大小。

**精确的**

```
void function(float array[][100]); 
void function(float (*array)[100]); 
```

**语法有效**

尽管编译器可能会合法地忽略 size `2`。

```
void function(float array[2][100]); 
```

# wpf - WPF中的访问键范围？

> ID：11862060
> 
> 赞同：0
> 
> 时间：2012-08-08T09:58:10.923
> 
> 标签：wpf, input, scoping

我的 XAML 如下所示，

```
<Grid Background="Yellow" AccessKeyManager.AccessKeyPressed="OnKeyPressed">
    <StackPanel Margin="5" Background="Red"  x:Name="stack1">
        <ContentPresenter Content="_File" RecognizesAccessKey="True"/>
        <ContentPresenter Content="_Edit" RecognizesAccessKey="True"/>
        <StackPanel Background="Green" Margin="5" x:Name="stack2">
            <ContentPresenter Content="_Food" RecognizesAccessKey="True"/>
            <ContentPresenter Content="_Earn" RecognizesAccessKey="True"/>
        </StackPanel>
    </StackPanel>
</Grid> 
```

为所有这些项目触发的 AccessKeyPressed 事件，我想限制在特定范围内。例如，如果我按 Alt+F，则应该只触发“文件”项而不是“食物”项。我怎么能限制这个。我试过e.Handled = true;。它没有帮助。

还有其他建议吗？

# windows-vista - 将一个窗口拖到另一个窗口上会导致底层窗口重绘（Windows Vista、Windows 7）

> ID：11862061
> 
> 赞同：0
> 
> 时间：2012-08-08T09:58:18.177
> 
> 标签：windows-vista, repaint, redraw, overlapping

在我的系统上，如果您有一个正在运行的 3D 应用程序，这将是一个问题，这需要一些时间来重绘，并将任何窗口拖到它上面。它会导致非常生涩的运动。如果您将对话框从 3D 应用程序拖到其 3D 窗口上，也会发生这种情况。应用程序实际上会收到一条重绘消息（WM_PAINT？），这会导致它进行完全重绘。Windows不应该将背景窗口缓存为位图或其他东西吗？

我在下面粘贴了 NVIDIA 系统信息转储，请注意我有 2 个 GPU。不知道这是否重要，但我们在办公室的另一台机器上看到了这个问题，它也有 2 个 GPU 和 Windows 7。其他有 1 个 GPU 的机器没有这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:17:35.990

找出问题所在。我运行的是 Windows Vista Basic 配色方案，而不是 Aero。基本上，Windows 可能只有一个缓冲区用于整个屏幕，因此每当移动一个窗口时，它重叠的任何窗口都必须重新绘制。在 Aero 中，每个窗口的“缓冲区”都被缓存以启用 gpu 加速混合（对于窗口的透明部分）。因此，在 Aero 中，不会因为将另一个窗口拖过它而重绘底层窗口。

# javascript - JqxChart 给出错误错误：无效的负值 属性高度=“-1”

> ID：11862064
> 
> 赞同：5
> 
> 时间：2012-08-08T09:58:26.683
> 
> 标签：javascript, jquery

我正在使用 JqxPanel、JqxDocking 和 JqxChart。

JqxPanel 包含运行良好的停靠窗口。当我将 JqxChart 放入窗口时 Chrome 给出错误错误：标签处属性 height="-1" 的负值无效（重复 2 次）

请有人可以在这方面帮助我

JavaScript deviceschart.js

```
var DevicesgenerateData = function () {
            var devicedata = new Array();
            var deviceNames =
            [
            "Working", "GPS Antenna","Power Removed","SIM Problem","Servicing","Damaged"
            ];
            var deviceNos =
            [
            10,10,30,10,20,20
            ];

            for (var i = 0; i < 6; i++) {
                var devicerow = {};

                devicerow["devicenames"] = deviceNames[i];
                devicerow["devicenos"] = deviceNos[i];
                devicedata[i] = devicerow;
            }
            return devicedata;
             }

       var devicesource =
        {
            localdata: DevicesgenerateData(),
                datafields: [
                { name: 'devicenames' },
                { name: 'devicenos' }
            ], 
            datatype: "array"

        };

        var ddataAdapter = new $.jqx.dataAdapter(devicesource);
            //, { async: false, autoBind: true, loadError: function (xhr, status, error) { alert('Error loading "' + source.url + '" : ' + error); } });
            //$('#jqxChart').jqxChart({borderColor: 'Blue'});

        // prepare jqxChart settings
        var devicesettings = {
            //title: "Mobile browsers share in Dec 2011",
           // description: "(source: wikipedia.org)",
            enableAnimations: true,
                borderColor: 'Red',
            showLegend: true,
            legendLayout: { left: 210, top: 50, width: 100, height: 200, flow: 'vertical' },
            padding: { left: 5, top: 5, right: 5, bottom: 5 },
            titlePadding: { left: 0, top: 0, right: 0, bottom: 10 },
            source: ddataAdapter,
            colorScheme: 'scheme02',
            seriesGroups:
                [
                    {
                        type: 'pie',
                        showLabels: true,
                        series:
                            [
                                { 
                                    dataField: 'devicenos',
                                    displayText: 'devicenames',
                                    labelRadius: 70,
                                    initialAngle: 15,
                                    radius: 95,
                                    centerOffset: 0,
                                    formatSettings: { sufix: '%', decimalPlaces: 1 }
                                }
                            ]
                    }
                ]
        };

         <link rel="stylesheet" href="css/jqx.base.css" type="text/css" />

        <script type="text/javascript" src="js/gettheme.js"></script>
        <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="js/jqxcore.js"></script>
        <script type="text/javascript" src="js/jqxscrollbar.js"></script>
        <script type="text/javascript" src="js/jqxbuttons.js"></script>
        <script type="text/javascript" src="js/jqxpanel.js"></script>
        <script type="text/javascript" src="js/jqxwindow.js"></script>
       <script type="text/javascript" src="js/jquery.global.js"></script>
        <script type="text/javascript" src="js/jqxdocking.js"></script>
        <script type="text/javascript" src="js/jqxsplitter.js"></script>

        <script type="text/javascript" src="js/jqxchart.js"></script>
        <script type="text/javascript" src="js/jqxdata.js"></script>

         <script type="text/javascript" src="js/deviceschart.js"></script>

        <script type="text/javascript">
            $(document).ready(function () {
                // Create jqxPanel
                var theme = getTheme();
                $("#panel").jqxPanel({ width: "100%", height: 350, theme: theme });

                $('#maindocking').jqxDocking({ theme: theme, orientation: 'horizontal', width: 990, mode: 'docked' });
                $('#maindocking').jqxDocking('disableWindowResize', 'window1');
                $('#maindocking').jqxDocking('disableWindowResize', 'window2');
                $('#maindocking').jqxDocking('disableWindowResize', 'window3');
                $('#maindocking').jqxDocking('disableWindowResize', 'window4');
                $('#maindocking').jqxDocking('disableWindowResize', 'window5');
                $('#maindocking').jqxDocking('disableWindowResize', 'window6');
        $('#jqxChart').jqxChart(devicesettings);

            });
        </script>
    </head>

    <body class='default'>
        <div id='panel' style=" font-size: 13px; font-family: Verdana;">

          <div id="maindocking">
            <div id="column1docking">
                <div id="window1" style="height: 200px;">
                   <div>Vehicle Information</div>
                        <div style="overflow: hidden;">
                            <div id="jqxChart"></div>   
                        </div>

                </div><!-- window1--->
                  <div id="window2" style="height: 200px;">
                   <div>Vehicle Information</div>
                        <div style="overflow: hidden;">

                        </div>

                </div><!-- window2--->

             </div><!-- Column1 Docking-->

             <div id="column2docking">
                <div id="window3" style="height: 200px;">
                   <div>Vehicle Information</div>
                        <div style="overflow: hidden;">

                        </div>

                </div><!-- window3--->
                  <div id="window4" style="height: 200px;">
                   <div>Vehicle Information</div>
                        <div style="overflow: hidden;">

                        </div>

                </div><!-- window4--->

             </div><!-- Column2 Docking-->

           <div id="column3docking">
                <div id="window5" style="height: 200px;">
                   <div>Vehicle Information</div>
                        <div style="overflow: hidden;">

                        </div>

                </div><!-- window5--->
                  <div id="window6" style="height: 200px;">
                   <div>Vehicle Information</div>
                        <div style="overflow: hidden;">

                        </div>

                </div><!-- window6--->

             </div><!-- Column3 Docking-->

          </div> <!-- MainDocking -->
        </div> <!-- Panel -->
        </body> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T13:55:51.677

我有同样的问题，我通过将包含 div 的宽度设置为足够大以包含指定设置的图表来解决它。

```
<div id="jqxChart" style="width:680px; height:400px; vertical-align: top;  display: inline-block; padding: 10px;"> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-25T21:16:18.460

对我来说，情况确实如此，因为我将图表嵌入在页面加载时不可见的选项卡 div 中。当我将它移动到页面加载时可见的选项卡时，它可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-02T15:35:36.840

@Anon，谢谢您的解决方案。我遇到了同样的问题，但使用“Raphael”框架（raphael-2.1.0.js）来绘制图表，错误消息与 OP 相同。删除父元素的最大宽度（css）解决了我的问题。

（这是作为解决方案发布的，因为需要 50 名声望才能向 Anon 的解决方案添加评论。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T20:34:24.000

所以我收到了这个错误，因为提供的数据与我`series`在`seriesGroups`. 一些数据没有正确定义，所以当我第一次尝试绘制图表时，他们的代码不喜欢丢失的内容，并咳出了其中的几个错误。

此外，我想尝试使用新数据和新的`seriesGroups`. 在进行这样的更改时，我必须在更改其他数据之前调用`jqxChart`并更新。`seriesGroups`

```
 if (chartTableArea.jqxChart("isInitialized") === true) {
            if (gSettings === undefined || gSettings.title === undefined) {
                gSettings = getSettings(); //sets up the gSettings
            }
            chartTableArea.jqxChart({ seriesGroups: gSettings.seriesGroups });
            chartTableArea.jqxChart(gSettings);
        } else {
            //not initialized
            chartTableArea.jqxChart(getSettings());
        } 
```

# php - 使用 move_uploaded_file 后 tmp_name 会消失吗？

> ID：11862068
> 
> 赞同：0
> 
> 时间：2012-08-08T09:58:36.497
> 
> 标签：php

我有这个页面，您可以在其中向多个人发送消息并将文件附加到其中...

这是我的代码

```
<?php
    session_start();
    $inboxfrom = $_SESSION['loginusername'];
    $inboxto = $_POST['inboxto'];
    $inboxsubject = $_POST['inboxsubject'];
    $inboxcontent = $_POST['inboxcontent'];
    $inboxtime = date('g:i A', time()+(6*60*60));
    $inboxdate = date('Y-m-d', time()+(6*60*60));
    mysql_connect("127.0.0.1", "root", "")or die("Cannot Connect toDb");
    mysql_select_db("Abbot_db");
    $count = 0;
    function generateRandomString($length = 8){    
        $string = ""; 
        $possible = "0123456789bcdfghjkmnpqrstvwxyz"; //character that can be used 
        for($i=0;$i < $length;$i++){ 
            $char = substr($possible, rand(0, strlen($possible)-1), 1); 
            if (!strstr($string, $char)){ 
                $string .= $char; 
            } 
        } 
        return $string; 
    } 
    if (count($inboxto) != 0){
        $count = 0;
        while ($count < count($inboxto)){
            $recepient = $_POST['inboxto'][$count];

            mysql_query("INSERT INTO Inbox_tbl(InboxTo, InboxFrom, InboxSubject, InboxContent, InboxTime, InboxDate,InboxStatus,ToDelete,FromDelete)VALUES ('$recepient','$inboxfrom','$inboxsubject','$inboxcontent','$inboxtime','$inboxdate','Unread','No','No')");
            $recepient_result = mysql_query("SELECT * FROM Accounts_tbl WHERE UserID='$recepient'");
            if (mysql_result($recepient_result, 0, "UserTypeID") == 1){
                $notiurl = "LMSadmin_inbox.php";
            } else if (mysql_result($recepient_result, 0, "UserTypeID") == 2) {
                $notiurl = "LMSteacher_inbox.php";
            } else {
                $notiurl = "LMSstud_inbox.php";
            }
            mysql_query("INSERT INTO Noti_tbl(NotiTo,NotiFrom,NotiContent,NotiDate,NotiTime,NotiType,NotiUrl)
                VALUES('$recepient','$inboxfrom','has sent you a message','$inboxdate','$inboxtime','Message','$notiurl')");

//---------------------------------------------------------         
            $countto = 0;
            $cont = generateRandomString(128);
            $folder = "./Attachments/".$cont;
            $name = $_FILES['file']['name'];
            if (!empty($name)){
                    while (is_dir($folder)){
                        $cont = generateRandomString(128);
                        $folder = "./Attachments/".$cont;
                    }   
                    mkdir($folder, 0700, true);

            }
            while ($countto < count($_FILES['file']['name'])){
                $name = $_FILES['file']['name'][$countto];
                $type = $_FILES['file']['type'][$countto];
                $tmp_name = $_FILES['file']['tmp_name'][$countto];
                $folder = "Attachments/".$cont."/";
                move_uploaded_file($tmp_name, $folder.$name);
                $fileurl = $cont."/".$name;
                $dummypost = mysql_query("SELECT * FROM Inbox_tbl ORDER BY InboxID DESC");
                $msgid = mysql_result($dummypost, 0, "InboxID");

                mysql_query("INSERT INTO Attachments_tbl(FileUrl,FileName,AttachType,AttachID)
                    VALUES('$fileurl','$name','Message',$msgid)");
                $countto++;
            }
//----------------------------------------------            

            $count++;   
        }
    }
    header('Location: ' . $_SERVER['HTTP_REFERER']);
?> 
```

现在我放置多个接收者和倍数后的结果是......第一个接收者将获得附件......这意味着附件文件夹将随机生成，文件将放在那里......但在下一个接收者附件不会在各自的文件夹中移动。我可以看到文件夹已创建，但文件没有移动。

我的问题是.. 使用“move_uploaded_file”代码后“temp_name”会消失吗？因为我认为这就是文件没有移动的原因。你能建议我可以使用的任何替代代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:15:38.117

是的，文件被移动了，这就是你找不到它的原因。我建议你：

1.  将内部 while 循环（用于上传文件的循环）移动到第一个 while 循环（用于收件人）之前，并将上传的文件移动到您指定的位置
2.  创建一个新的内部 while 循环，将文件从您之前指定的位置复制到每个用户的附件文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:22:55.283

[`move_uploaded_file()`](http://php.net/manual/en/function.move-uploaded-file.php)将文件重新定位到设置的目标位置，`tmp_name`然后渲染无用。

您应该做的是在最初移动上传文件的位置创建一个“puffer”文件夹，然后[`copy()`](http://php.net/manual/en/function.copy.php)根据需要多次调用以将文件传递到收件人文件夹。当文件被放置到每个需要的位置时，您可以[`unlink()`](http://php.net/manual/en/function.unlink.php)从这个 puffer 文件夹中获取文件。

或者，您可以将文件仅放在一个位置（以消除冗余和过度使用存储空间），并在您`Attachments_tbl`的设置文件夹中创建指向同一文件的链接`attachments`。但是，这需要对系统的工作方式进行改造，以确保（现在是唯一的）附件文件仅在指向它的每条记录也被删除**后才被删除。**

# c# - ASP.NET Web API 中的可选查询字符串参数

> ID：11862069
> 
> 赞同：231
> 
> 时间：2012-08-08T09:58:42.207
> 
> 标签：c#, url, asp.net-web-api, query-string

我需要实现以下 WebAPI 方法：

```
/api/books?author=XXX&title=XXX&isbn=XXX&somethingelse=XXX&date=XXX 
```

所有查询字符串参数都可以为空。也就是说，调用者可以指定从 0 到所有 5 个参数。

在**MVC4 beta**中，我曾经做过以下事情：

```
public class BooksController : ApiController
{
    // GET /api/books?author=tolk&title=lord&isbn=91&somethingelse=ABC&date=1970-01-01
    public string GetFindBooks(string author, string title, string isbn, string somethingelse, DateTime? date) 
    {
        // ...
    }
} 
```

MVC4 RC 不再像这样了。如果我指定的参数少于 5 个，它会回复`404`说：

> 在与请求匹配的控制器“Books”上未找到任何操作。

什么是正确的方法签名，使其表现得像以前一样，而不必在 URL 路由中指定可选参数？

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2012-09-12T11:39:07.843

此问题已在 MVC4 的常规版本中修复。现在你可以这样做：

```
public string GetFindBooks(string author="", string title="", string isbn="", string  somethingelse="", DateTime? date= null) 
{
    // ...
} 
```

一切都会开箱即用。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2014-05-23T14:16:27.143

正如 vijay 建议的那样，可以将多个参数作为单个模型传递。当您使用 FromUri 参数属性时，这适用于 GET。这告诉 WebAPI 从查询参数中填充模型。

结果是一个更简洁的控制器动作，只有一个参数。有关详细信息，请参阅：[http ://www.asp.net/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api](http://www.asp.net/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api)

```
public class BooksController : ApiController
  {
    // GET /api/books?author=tolk&title=lord&isbn=91&somethingelse=ABC&date=1970-01-01
    public string GetFindBooks([FromUri]BookQuery query)
    {
      // ...
    }
  }

  public class BookQuery
  {
    public string Author { get; set; }
    public string Title { get; set; }
    public string ISBN { get; set; }
    public string SomethingElse { get; set; }
    public DateTime? Date { get; set; }
  } 
```

它甚至支持多个参数，只要属性不冲突。

```
// GET /api/books?author=tolk&title=lord&isbn=91&somethingelse=ABC&date=1970-01-01
public string GetFindBooks([FromUri]BookQuery query, [FromUri]Paging paging)
{
  // ...
}

public class Paging
{
  public string Sort { get; set; }
  public int Skip { get; set; }
  public int Take { get; set; }
} 
```

**更新**：
为了确保这些值是可选的，请确保对模型属性使用引用类型或可空值（例如 int？）。

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2012-08-08T11:59:05.050

对所有参数使用初始默认值，如下所示

```
public string GetFindBooks(string author="", string title="", string isbn="", string  somethingelse="", DateTime? date= null) 
{
    // ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T11:51:18.710

如果要传递多个参数，则可以创建模型而不是传递多个参数。

如果你不想传递任何参数，那么你也可以跳过它，你的代码会看起来整洁干净。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T10:54:35.313

不能为未声明的参数提供默认值 ' `optional`'

```
 Function GetFindBooks(id As Integer, ByVal pid As Integer, Optional sort As String = "DESC", Optional limit As Integer = 99) 
```

在你的`WebApiConfig`

```
 config.Routes.MapHttpRoute( _
          name:="books", _
          routeTemplate:="api/{controller}/{action}/{id}/{pid}/{sort}/{limit}", _
          defaults:=New With {.id = RouteParameter.Optional, .pid = RouteParameter.Optional, .sort = UrlParameter.Optional, .limit = UrlParameter.Optional} _
      ) 
```

# asp.net - 将控件标记保存到新的 html 页面并从现有的附加 css

> ID：11862070
> 
> 赞同：0
> 
> 时间：2012-08-08T09:58:46.047
> 
> 标签：asp.net, css, rendercontrol

我有“导出”按钮，onclick 事件创建一些当前 asp.net 页面控件的标记（通过 RenderControl），然后我想将此标记包装到有效的 html 正文中，并将用户作为序号 html 文件。

问题是如何准确、轻松地收集当前页面上引用的所有 css（它可能包括 axd-resources、链接标签和内联样式）并将这个内联附加到我的标记中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:15:19.567

您可以在后面的代码中添加 cssClass 属性

```
 //SlideShowDiv is the id of th div in which you add your sever control
    SlideShowDiv.Controls.Add(new System.Web.UI.WebControls.Image()
        {   CssClass ="YourCssClass",
            ImageUrl = slideShowImages[i].ImageUrl,
            ToolTip = slideShowImages[i].ToolTip,
            Width = slideShowImages[i].Width,
            Height = slideShowImages[i].height,
            ImageAlign = ImageAlign.AbsMiddle
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:26:11.223

需要的是覆盖页面的渲染处理程序并将其标记保存到属性中。然后在控件的 UnLoad 处理程序中使用此属性从中提取 CSS 并使用 RenderControl 方法构造结果页面标记，没有任何问题；）

# c# - 从字符串中获取 XML

> ID：11862071
> 
> 赞同：0
> 
> 时间：2012-08-08T09:58:46.560
> 
> 标签：c#, regex, windows-phone-7.1

我的 Windows Phone 应用程序中有一个 Socket 通信，但是当我调用它时，有时会得到一个结果，看起来像这样

```
\0\0\0\0<RESULT><DATA>...</DATA></RESULT>\0 
```

我想删除它的开头和结尾，所以我只得到 XML，但是最好的方法是什么？我已经考虑过正则表达式，但我无法让它工作:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:07:00.233

这听起来像是您的协议有问题，但是要删除 \0 字符，您可以对字符串进行简单的修剪。

如果您的字符串中有实际的 \ 和 0 个字符，那么您可以执行以下操作：

```
var fixedData = receivedData.Trim(new[] { '\\', '0' }); 
```

如果字符串以空字符开头（编码为 \0），那么您可以：

```
var fixedData = receivedData.Trim(new[] { '\0' }); 
```

这两个示例都假定变量 receviedData 是包含您的数据的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:57:15.807

如果您的结果必须是`XML`并且更多字符（else `\0`）可以在字符串的开头或结尾，这些代码可能很有用：

```
var start = inputString.IndexOf('<');
var end = inputString.LastIndexOf('>');
var result = inputString.Substring(start, end - start); 
```

*   [`String.IndexOf Method (Char)`](http://msdn.microsoft.com/en-us/library/kwb0bwyd)：报告此字符串中第一次出现指定 Unicode 字符的从零开始的索引。
*   [`String.LastIndexOf Method (Char)`](http://msdn.microsoft.com/en-us/library/0w96zd3d)：报告此实例中指定 Unicode 字符最后一次出现的从零开始的索引位置。
*   [`String.Substring Method (Int32, Int32)`](http://msdn.microsoft.com/en-us/library/aka44szs)：从此实例中检索子字符串。子字符串从指定的字符位置开始并具有指定的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:08:15.773

我没有足够的信息来正确回答你，所以我会提出以下建议：

您应该尝试将从套接字接收的数据映射到可序列化的类。然后将 classObject 序列化为 XML 文档。

```
public class socketDataToMap
{
    public string Data {get; set;}
} 
```

接着

```
var ser = new XmlSerializer(typeof(socketDataToMap));
using (var reader = XmlReader.Create(yourSocketStream))
            {
                var deserializedObject = ser.Deserialize(reader) as socketDataToMap;

            } 
```

然后序列化为 XML 文件。我看到你的问题是这样的。

# c++ - c++11中的正则表达式

> ID：11862072
> 
> 赞同：1
> 
> 时间：2012-08-08T09:58:47.370
> 
> 标签：c++, regex, linux, c++11

我想在 Linux 中解析 cpu 信息。我写了这样的代码：

```
// Returns full data of the file in a string
std::string filedata = readFile("/proc/cpuinfo");

std::cmath results;
// In file that string looks like: 'model name : Intel ...'
std::regex reg("model name: *");
std::regex_search(filedata.c_str(), results, reg);

std::cout << results[0] << " " << results[1] << std::endl; 
```

但它返回空字符串。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T10:02:53.920

并非所有编译器都支持完整的 C++11 规范。值得注意的是，`regex_search`在 GCC 中不起作用（从 4.7.1 版开始），但在 VC++ 2010 中起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T10:44:54.960

您没有在表达式中指定任何捕获。

鉴于 的结构`/proc/cpuinfo`，我可能更喜欢面向行的输入，使用`std::getline`，而不是尝试一次完成所有事情。所以你最终会得到类似的东西：

```
std::string line;
while ( std::getline( input, line ) ) {
    static std::regex const procInfo( "model name\\s*: (.*)" );
    std::cmatch results;
    if ( std::regex_match( line, results, procInfo ) ) {
        std::cout << "???" << " " << results[1] << std::endl;
    }
} 
```

我不清楚你想要什么作为输出。可能您还必须捕获该`processor`行，并在处理器信息行的开头输出该行。

需要注意的重要事项是：

1.  您需要接受不同数量的空白：`"\\s*"`用于 0 或更多，`"\\s+"`用于一个或多个空白字符。

2.  您需要使用括号来分隔要捕获的内容。

（FWIW：我的陈述实际上是基于`boost::regex`，因为我无法访问`std::regex`。但是，我认为它们非常相似，并且我的上述陈述适用于两者。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T10:06:23.667

试试`std::regex reg("model_name *: *")`。在我的 cpuinfo 中，冒号前有空格。

# android - 有没有办法在Android的xml builder中使用屏幕高度和宽度？

> ID：11862074
> 
> 赞同：0
> 
> 时间：2012-08-08T09:58:51.863
> 
> 标签：android, height, width, screen

有没有办法在Android的xml builder中使用屏幕高度和宽度？我想在不使用视图重量的情况下将视图高度设置为屏幕的一半。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:00:40.710

处理屏幕高度和宽度的最佳方法是在 onCreate() 方法中以编程方式设置视图的大小。

# jquery - SlideDown/ SlideUp 切换 2 个 div

> ID：11862077
> 
> 赞同：2
> 
> 时间：2012-08-08T09:59:00.683
> 
> 标签：jquery

我有 2 个 div，一个可见，一个不可见。我想通过单击链接来切换可见性，但是当我第二次切换时，我的第一个 div 没有出现。

HTML：

```
<div class="search-extra">
  <a href="#" id="toggle-to-advanced">Toggle to red</a>
</div>

<div class="search-advanced">
  <a href="#" id="toggle-to-normal">Toggle to black</a>
</div>​ 
```

CSS：

```
.search-advanced{display:none;} 
```

jQuery：

```
jQuery('#toggle-to-normal').click(function(e){
    e.preventDefault();
    jQuery('.search-advanced').slideUp('normal').queue( function(){
        jQuery('.search-extra').slideDown('normal');
    });
});

jQuery('#toggle-to-advanced').click(function(e){
    e.preventDefault();
    jQuery('.search-extra').slideUp('normal').queue( function(){
        jQuery('.search-advanced').slideDown('normal');
    });
});​ 
```

演示：

[http://jsfiddle.net/rekQ9/](http://jsfiddle.net/rekQ9/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T10:01:42.030

代替`queue`，您可以使用幻灯片上的回调函数来使其工作：

[http://jsfiddle.net/rekQ9/2/](http://jsfiddle.net/rekQ9/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:05:18.473

```
jQuery('#toggle-to-normal').click(function(e){
    e.preventDefault();
    jQuery('.search-advanced').slideUp('normal',function(){
        jQuery('.search-extra').slideDown('normal');
    });
});

jQuery('#toggle-to-advanced').click(function(e){
    e.preventDefault();
    jQuery('.search-extra').slideUp('normal', function(){
        jQuery('.search-advanced').slideDown('normal');
    });
}); 
```

# sql-server - Power View 连接失败

> ID：11862078
> 
> 赞同：0
> 
> 时间：2012-08-08T09:59:06.330
> 
> 标签：sql-server, ssas, tabular, powerview

当我尝试通过我的 .bism 连接创建 Pover View 报告时，我收到以下错误：

原始 XML

> rsCannotRetrieveModel400加载项目或数据源“http://localhost/rpl/model.bism”的模型时出错。验证连接信息是否正确以及您是否有权访问数据源。http://go.microsoft.com/fwlink/?LinkId=20476&EvtSrc=Microsoft.ReportingServices.Diagnostics.Utilities.ErrorStrings&EvtID=rsCannotRetrieveModel&ProdName=Microsoft%20SQL %20Server%20Reporting%20Services&ProdVer=11.0.2100.60Microsoft SQL Server Reporting Services11.0.2100.60127OsIndependent1033ReportingServicesLibrary加载项目或数据源“http://localhost/rpl/Model.bism”的模型时出错。验证连接信息是否正确以及您是否有权访问 data source.Microsoft.ReportingServices。

可读版本

```
rsCannotRetrieveModel400加载项目或数据源“http://localhost/rpl/model.bism”的模型时出错。
验证连接信息是否正确以及您是否有权访问数据源。http://go.microsoft.com/fwlink/?LinkId=20476&EvtSrc=Microsoft.ReportingServices.Diagnostics.Utilities.ErrorStrings&EvtID=rsCannotRetrieveModel&ProdName=Microsoft%20SQL %20Server%20Reporting%20Services&ProdVer=11.0.2100.60

Microsoft SQL Server Reporting Services11.0.2100.60127OsIndependent1033ReportingServicesLibrary
加载项目或数据源“http://localhost/rpl/Model.bism”的模型时出错。
 验证连接信息是否正确以及您是否有权访问 data source.Microsoft.ReportingServices。
ProcessingCore 无法模拟数据源“TemporaryDataSource”的用户。
Microsoft.ReportingServices。

ServiceRuntimeCannot 将声明标识转换为 Windows 令牌。Microsoft.SharePoint 无法检索有效的 Windows 标识。mscorlib

访问被拒绝

Microsoft SQL Server Reporting Services11.0.2100.60127OsIndependent1033ReportingServicesLibrary
加载项目或数据源“http://localhost/rpl/Model.bism”的模型时出错。
 验证连接信息是否正确以及您是否有权访问 data source.Microsoft.ReportingServices。
ProcessingCore 无法模拟数据源“TemporaryDataSource”的用户。
Microsoft.ReportingServices。

ServiceRuntimeCannot 将声明标识转换为 Windows 令牌。Microsoft.SharePoint 无法检索有效的 Windows 标识。mscorlib

访问被拒绝

```

我正在使用带有 Service Pack 1 的 SQL Server 2012 RTM、Sharepoint 2010、Windows Server 2008 R2 Enterprise。所有 SQL、Analysis Services 和 Sharepoint Windows 服务都使用相同的域帐户运行，该域帐户也是本地计算机的管理员。该域帐户在 SQL 和 Analysis Services 中都是神。它还在 sharepoint 中管理管理员，并且所有 sharepoint 服务都使用该帐户。IIS 应用程序池也使用该帐户运行。我可以通过 SQL Management Studio 等任何其他客户端进行连接。Power View 连接有什么问题？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:33:05.357

在 SharePoint 中央管理中，导航到应用程序管理 -> 管理服务器上的服务。停止“Claims to Windows Token Service”服务并重新启动 IIS。应该解决你的问题。

# c - ldap_search_ext_s：没有这样的对象错误

> ID：11862085
> 
> 赞同：1
> 
> 时间：2012-08-08T09:59:28.770
> 
> 标签：c, ldap

匿名连接到服务器后如何获取有关人员的信息。

我正在搜索 uid=barbara 到匿名绑定的 ldap 服务器，如下所示，

我得到错误，

```
LDAP initialize successful.
Set LDAPv3 client version.
LDAP connection successful.
ldap_search_ext_s: No such object 
```

如果我 chnage char *FIND_DN = "ou=Users,dc=example,dc=com";

rc = ldap_simple_bind_s(ld,root_dn ,root_pw); 它工作正常。
下面的代码：

```
int main(int argc, char**argv) 
{
 LDAP *ld;
 int desired_version = LDAP_VERSION3;
 char *ldap_host     = "localhost";
 char *root_dn       = "cn=Manager, dc=example,dc=com";
 char *root_pw       = "secret";
 char *FIND_DN  = "dc=example, dc=com";

 LDAPMessage  *result, *e;
 BerElement   *ber;
 char         *a;
 char         **vals;
 int          i, rc;

 ldap_initialize( &ld, ldap_host );
 printf("LDAP initialize successful.\n");

 rc = ldap_set_option(ld, LDAP_OPT_PROTOCOL_VERSION, &desired_version);
 if ( rc != LDAP_SUCCESS ) {
    perror( "ldap_set_option failed" );
    exit(EXIT_FAILURE);
 } else {
    printf("Set LDAPv3 client version.\n");
 }

 rc = ldap_simple_bind_s(ld,NULL ,NULL);
 if ( rc != LDAP_SUCCESS ) {
    fprintf(stderr, "ldap_simple_bind_s: %s\n", ldap_err2string(rc));
    exit(EXIT_FAILURE);
 } else {
    printf("LDAP connection successful.\n");
 }

 if ( ( rc = ldap_search_ext_s( ld, FIND_DN, LDAP_SCOPE_SUBTREE,
                                "(uid=barbara)",NULL,0,NULL,NULL,NULL,
                                LDAP_NO_LIMIT, &result ) ) != LDAP_SUCCESS ) {

     fprintf(stderr, "ldap_search_ext_s: %s\n", ldap_err2string(rc));
     ldap_unbind( ld );
     return( 1 );
 }
 ldap_msgfree( result );
 ldap_unbind( ld );

 return( 0 );
} 
```

在 ldapsearch 命令上，我得到

```
输入 LDAP 密码：

# 用户，example.com

dn: ou=Users,dc=example,dc=com

ou：用户

描述：Example.Com 用户

对象类：组织单位

# 马特，用户，example.com

dn: uid=matt,ou=Users,dc=example,dc=com

ou：用户

uid：马特

cn：马特·布彻

sn：屠夫

给定姓名：马特

给定姓名：马修

显示名称：马特屠夫

标题：系统集成商

描述：Example.Com 的系统集成和 IT

员工类型：员工

部门编号：001

员工编号：001-08-98

邮件：mbutcher@example.com

邮件：matt@example.com

房间号：301

电话号码：+1 555 555 4321

手机：+1 555 555 6789

圣：伊利诺伊州

l：芝加哥

街道：西塞罗大街 1234 号。

家庭电话：+1 555 555 9876

homePostalAddress: 1234 home street $ Chicago, IL $60699-1234

用户密码:: c2VjcmV0

首选语言：en-us,en-gb

对象类：人

objectClass: 组织的人

对象类：inetOrgPerson

# barbara，用户，example.com

dn: uid=barbara,ou=Users,dc=example,dc=com

ou：用户

uid：芭芭拉

sn：詹森

cn：芭芭拉·詹森

给定姓名：芭芭拉

显示名称：芭芭拉詹森

邮件：barbara@example.com

用户密码:: c2VjcmV0

对象类：人

objectClass: 组织的人

对象类：inetOrgPerson

＃ 搜索结果

搜索：2

结果：0 成功

# 响应数：4

# numEntries: 3

```

# actionscript-3 - 如何为多图像上传器中的每个图像设置进度条？

> ID：11862087
> 
> 赞同：0
> 
> 时间：2012-08-08T09:59:37.283
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

我正在尝试完成一个多图像上传器。我部分完成了多个图像上传器...我的项目包含一个标题窗口、一个数据网格和 3 个按钮（选择、上传、取消）。数据网格包含 3 列（图像预览、名称、大小）。我还放了两个进度条。一个是显示总图像上传进度..另一个分别作为每个图像上传进度的项目渲染（该进度条显示在数据网格名称列，该进度条的标签是每个图像的名称）..the第一个工作正常..但第二个项目渲染进度条不起作用..我该如何维护它？谁能帮我？？请...

我的演示如下.. [http://demo.enfintech.net/MultipleFileUpload/](http://demo.enfintech.net/MultipleFileUpload/) 有时它可以正常工作。但是上传了超过 4 张图像它不工作.. 意味着进度条不能正常工作..但是图片上传了。。

我的代码如下

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" creationComplete="init()">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";

        global
        {
            font-weight: bold;
        }
    </fx:Style>
    <fx:Script>
        <![CDATA[
            import flash.sampler.NewObjectSample;
            import flash.utils.flash_proxy;
            import flash.utils.setTimeout;

            import mx.charts.renderers.AreaRenderer;
            import mx.collections.ArrayCollection;
            import mx.controls.Alert;
            import mx.events.Request;
            import mx.utils.OnDemandEventDispatcher;
            private var refAddFiles:FileReferenceList=new FileReferenceList;
            private var fileReference:FileReference=new FileReference;
            private var arrSelectList:Array=new Array();
            private var arrRemoveItem:ArrayCollection=new ArrayCollection();
            private var serverSideUrl:String="http://demo.enfintech.net/MultipleFileUpload/fileUploader/uploadFile.php";
            //          private var serverSideUrl:String="http://192.168.1.60/fileUploader/uploadFile.php";
            private var list:Array=new Array();
            public var urlReq:URLRequest;
            private var refAddFilesLength:int=0;
            private var timer:Timer;
            private var i:int=0;
            private var totalSize:Number=0;
            private var isSelected:Boolean=false;
            private var images:Object;
            private var varSize:Number;
            private var numPerc:Number;
            public var crnt:Number;
            private var fileSizeArray:Array=new Array();
            private var fileSize:String;
            public var maxm:Number;
            private var temp:Number=0;
            private var uploadBytes:Number=0;
            private var temptotal:Number=0;
            private var tempVarSize:Number=0;
            private var maximumSize:Number=0;
            private var currentSize:Number=0;
            private var checkCloseClick:Boolean=false;
            [Bindable]  private var files:ArrayCollection = new ArrayCollection();
            private var fileRefUploadFiles:FileReference=new FileReference;
            private function init():void
            {
                Security.loadPolicyFile("http://demo.enfintech.net/crossdomain.xml");
                progressBar2.visible=false;
                refAddFiles.addEventListener(Event.SELECT,fileRefSelect);
                urlReq = new URLRequest(serverSideUrl);
            }

            private function fileSelect(event:Event):void
            {
                Alert.show("");
            }
            private function fileRefSelect(event:Event):void
            {
                progressBar2.visible=false;
                upload1();
                isSelected=true;
            }
            private function fileRefCompleted(event:Event):void
            {

                fileReference=event.target as FileReference;
                fileReference.removeEventListener(Event.COMPLETE, fileRefCompleted);
                fileReference.addEventListener(IOErrorEvent.IO_ERROR,error);
                if(fileReference.size!=0)
                {
                    tet2.text=fileReference.size.toString();
                    varSize=fileReference.size;
                    var tempVarSizeInBytes:Number=varSize;
                    fileSizeArray.push(tempVarSizeInBytes);
                    totalSize=varSize;
                    varSize=varSize/1024;
                    fileSize=String(varSize.toFixed(1))+"Kb";
                    tempVarSize=varSize;

                    if(varSize>1024)
                    {
                        varSize=varSize/1024;
                        fileSize=String(varSize.toFixed(1))+"Mb";
                        tempVarSize=varSize;
                    }
                    else
                    {

                    }
                    temptotal+=tempVarSizeInBytes;
                    progressBar2.maximum=temptotal;
                }
                images= {fileName:fileReference.name,size:fileSize, preview:fileReference.data,close:fileReference.name, maximum:fileReference.size, currentValue:0};
                files.addItem(images);
                select.enabled=false;
                if(checkCloseClick==true)
                {
                    upload0.enabled=true;
                }
                else
                {

                }
                i=0;

            }
            private function uploadFiles():void
            {
                if(files.length==0)

                {
                    Alert.show("Please Select file(s)");
                }
                else
                {
                    var n:int=files.length; 
                    progressBar2.minimum=0;
                    if(i<n)
                    {
                        progressBar2.visible=true;
                        fileRefUploadFiles=refAddFiles.fileList[i];
                        fileRefUploadFiles.upload(urlReq);

                        fileRefUploadFiles.addEventListener(ProgressEvent.PROGRESS,onUploadProgress);
                        fileRefUploadFiles.addEventListener(Event.COMPLETE,fileRefUploadFilesComplete);
                        select.enabled=true;
                        upload0.enabled=false;
                    }
                }
            }
            public function onUploadProgress(event:ProgressEvent):void
            {
                numPerc=Math.round(((event.bytesLoaded+uploadBytes)/temptotal)*100);
                files[i].currentValue=event.bytesLoaded;
                files[i].maXimumValue=event.bytesTotal;
                progressBar2.setProgress(uploadBytes+event.bytesLoaded,temptotal);
                progressBar2.validateNow();
                progressBar2.label=("UPLOADING "+numPerc.toString()+"% ("+(i+1).toString()+"/"+list.length.toString()+")");
            }
            private function fileRefUploadFilesComplete(event:Event):void
            {
                uploadBytes=uploadBytes+Number(fileSizeArray[i]);
                i++;
                uploadFiles();
            }

            public function upload1():void
            {
                list=refAddFiles.fileList;
                var i:int=0;
                var n:int=list.length;

                for(i; i < refAddFiles.fileList.length; i++) 
                {
                    list[i].addEventListener(ProgressEvent.PROGRESS,uploadItemRender);
                    currentSize=crnt;
                    list[i].addEventListener(Event.COMPLETE, fileRefCompleted);
                    list[i].load();
                }
            }   
            private function uploadItemRender(event:ProgressEvent):void
            {
                maximumSize=event.bytesTotal;
                currentSize=event.bytesLoaded;
            }
            public function removeItem():void
            {

                var item:int=dgMain.selectedIndex;
                files.removeItemAt(item);

            }
            private function cancelClick():void
            {
                fileRefUploadFiles.cancel();
                if(files.length!=0)
                {
                    files.removeAll();
                    fileRefUploadFiles.data.clear();
                    progressBar2.enabled=false; 
                }

            }
            private function browsebtn():void
            {

                var arr:Array = [];
                arr.push(new FileFilter("Images", ".gif;*.jpeg;*.jpg;*.png"));
                //                          fileReference.browse(arr);
                refAddFiles.browse(arr);

            }
            private function titleWindowClose():void
            {
                var item:int=dgMain.selectedIndex;
                files.removeAll();
                progressBar2.visible=false;
                checkCloseClick=true;
                select.enabled=true;
            }

        ]]>
    </fx:Script>
    <s:TitleWindow x="204" y="10" width="520" height="325" id="titleWindow"
                   skinClass="TitleSkin" title="File Uploader" close="titleWindowClose()">
        <mx:DataGrid id="dgMain" x="0" y="0" width="518" height="237" allowMultipleSelection="true"
                     dataProvider="{files}" fontFamily="Arial" fontSize="12" headerHeight="0"
                     horizontalScrollPolicy="off" variableRowHeight="true">
            <mx:columns>
                <mx:DataGridColumn dataField="preview" headerText="Preview" width="40" paddingLeft="5" itemRenderer="ImageDatagrdItmRndr">
                </mx:DataGridColumn>
                <mx:DataGridColumn dataField="fileName" headerText="Name" width="380" itemRenderer="itmRndrPrgrsBar"/>
                <mx:DataGridColumn dataField="size" headerText="Size" width="60"/>
                <mx:DataGridColumn id="close" headerText="Size" width="40" itemRenderer="buttonClose"/>
            </mx:columns>
        </mx:DataGrid>
        <mx:ProgressBar id="progressBar2" x="-1" y="237" width="518" barColor="haloblue"

                        labelPlacement="center" mode="manual" themeColor="#eaeaea"
                        trackColors="[white,halosilver]"/>
        <s:Button id="select" bottom="5" width="87" height="30" label="Select files"
                  click="browsebtn()" fontFamily="Arial" fontSize="12" horizontalCenter="-91" skinClass="Skin.setButtonSkin"
                  />
        <s:Button id="upload0" bottom="5" width="79" height="30" label="Upload" click="uploadFiles()"
                  fontFamily="Arial" fontSize="12" horizontalCenter="0" skinClass="Skin.setButtonSkin"/>
        <s:Button id="cancel" bottom="5" width="79" height="30" label="Cancel" fontFamily="Arial"
                  fontSize="12" horizontalCenter="91" skinClass="Skin.setButtonSkin"/>

    </s:TitleWindow>
    <s:VGroup>

        <s:Label id="tet" color="red" visible="false"/>
        <s:Label id="tet2" color="red"/>
    </s:VGroup>
</s:Application> 
```

我的进度条渲染项目是

```
<?xml version="1.0" encoding="utf-8"?>
<s:MXDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                          xmlns:s="library://ns.adobe.com/flex/spark" 
                          xmlns:mx="library://ns.adobe.com/flex/mx" 
                          focusEnabled="true" xmlns:aaronhardy="aaronhardy.*">
    <fx:Script>
        <![CDATA[
            import mx.controls.Alert;
            import mx.events.FlexEvent;

            protected function progressBar1_updateCompleteHandler(event:FlexEvent):void
            {       
                SparkProgressBar.maximum=data.maximum;
                SparkProgressBar.value=data.currentValue;
            }
        ]]>
    </fx:Script>
<aaronhardy:ProgressBar id="SparkProgressBar" maximum="{data.maximum}"  minimum="0" skinClass="aaronhardy.ProgressBarSkin" left="0" right="0" top="0" bottom="0" updateComplete="progressBar1_updateCompleteHandler(event)"/>
<s:Label id="lblData" left="0" right="0"  text="{dataGridListData.label}" verticalCenter="0"/>
</s:MXDataGridItemRenderer> 
```

并且图像 itemrender 是

```
<?xml version="1.0" encoding="utf-8"?>
<s:MXDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                          xmlns:s="library://ns.adobe.com/flex/spark" 
                          xmlns:mx="library://ns.adobe.com/flex/mx" 
                          focusEnabled="true">
    <fx:Script>
        <![CDATA[
        ]]>
    </fx:Script>
<!--    <s:Label id="lblData" top="0" left="0" right="0" bottom="0" text="{dataGridListData.label}" />-->
    <mx:Image left="5" width="31" height="20" source="{data.preview}"/>
</s:MXDataGridItemRenderer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:55:49.873

这里有很好的网站。我希望对你有所帮助。

[多文件上传-with-as3-and-php](http://upshots.org/actionscript-3/multiple-file-upload-with-as3-and-php)

[Flash-AS3-FileReference-选择并上传-多个文件](http://www.sitepoint.com/forums/showthread.php?852608-Flash-AS3-FileReference-Select-and-Upload-Multiple-Files-one-at-a-time)

# plone - Plone 中日历事件的类 RSS 提要

> ID：11862095
> 
> 赞同：2
> 
> 时间：2012-08-08T10:00:29.563
> 
> 标签：plone, google-calendar-api, icalendar, vcalendar

CMS 站点之间是否有任何类型的标准或推荐同步日历事件？

*   Plone 站点将根据其事件内容类型生成此提要

*   其他站点可以将此提要嵌入到他们自己的日历中，以便可以合并来自许多不同来源的事件（Google 日历，仅举一个例子）

*   提要更新将通过 HTTP 自动进行，无需运行手动日历事件导出/导入转储周期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:23:35.533

Mikko，自 Plone 3.3 起，PLIP 246 已合并，因此事件集合应公开 iCal 提要，您可以通过附加 ics_view 访问该提要。

# opends - OpenDS - 无法卸载

> ID：11862096
> 
> 赞同：0
> 
> 时间：2012-08-08T10:00:30.060
> 
> 标签：opends

我在 Windows 7 上的 C:\Users\ 端口 389 下安装了 OpenDS。（可用管理员权限）

但是，我无法卸载它。（我尝试过使用命令行、GUI、stop-ds.bat、Killing windows 服务、以管理员身份运行）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:07:57.137

我假设您未能取消注册 Windows 服务。

否则，卸载 OpenDS 就像删除整个安装目录一样简单

# python - Python使用列表推导从字典中删除

> ID：11862100
> 
> 赞同：3
> 
> 时间：2012-08-08T10:00:41.143
> 
> 标签：python

我正在努力成为一个好的 pythonista 并在可能的情况下使用列表推导......

为什么这不起作用？

```
[del my_dict[r] for r in to_remove] 
```

`to_remove`目标是从我的 dict 对象中删除列表中的条目`my_dict` ：

```
for r in to_remove:
  del my_dict[r] 
```

工作正常，但我试图用列表推导来做到这一点

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T10:02:12.763

您不应该对副作用使用列表推导，它不是 pythonic。

应该使用一个简单的 for 循环。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-08T10:02:43.160

因为`del X`是一个不应该那样使用的语句。它在语法上是不正确的。

只是：

```
for r in to_remove:
    del my_dict[r] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T10:09:38.197

1.  你没有从这里的列表理解中获得任何东西，因为你不是在寻找一个新的列表。
2.  del 不是一个函数，所以你不能将它作为列表理解的一部分来调用。

基本上，只需遍历列表即可：

```
for r in to_remove:
    del my_dict[r] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:05:03.573

你*可以*这样做，但我会听 jamylak 的。当然，这是返回一个*新*列表，而不是从中删除`my_dict`

```
my_dict = [x for x in my_dict if x not in to_remove] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-17T20:10:07.787

你可以这样做：

```
[my_dict.pop(r) for r in to_remove] 
```

`.pop`返回已删除键的值，它会比`del`（[见这里](https://stackoverflow.com/questions/5713218/best-method-to-delete-an-item-from-a-dict)）慢一点，而不是最“pythonic”的方式来做到这一点。所以你可能不应该像其他人建议的那样。

# android - android中如何设置imagebutton的textsize、textcolor等参数？

> ID：11862101
> 
> 赞同：0
> 
> 时间：2012-08-08T10:00:44.467
> 
> 标签：android, xml, user-interface, imagebutton

如何在一个xml中设置文本大小、文本颜色和其他参数，然后将它们分配给android中的imagebutton？我可以为每个按钮手动设置参数，但如果按钮超过 3 个，那就是一场噩梦。这样做的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:03:27.677

您可以为该 [http://developer.android.com/guide/topics/ui/themes.html使用样式](http://developer.android.com/guide/topics/ui/themes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:04:15.043

`style`根据您的要求创建一个，将其添加到您的按钮中，如下所示`style="@style/your_style"`。看看这个教程[样式和主题](http://www.vogella.com/articles/AndroidStylesThemes/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:11:57.457

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="CustomText" parent="@style/Text">
        <item name="android:textSize">20sp</item>
        <item name="android:textColor">#008</item>
    </style>
</resources>

<?xml version="1.0" encoding="utf-8"?>
<EditText
    style="@style/CustomText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Hello, World!" />

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="#00FF00"
    android:typeface="monospace"
    android:text="@string/hello" /> 
```

# c# - 无法通过 XAML 设置 DataContext，但同样可以通过 Code 设置

> ID：11862107
> 
> 赞同：0
> 
> 时间：2012-08-08T10:01:02.877
> 
> 标签：c#, wpf, xaml, datacontext

当我在 XAML 中声明数据上下文时，它不起作用。但是如果在代码中设置，同样的工作。

详细分析。

我的 XAML

```
 <Window x:Class="SimpleDatabindingwithclass.MainWindow"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" Name="windo">
    <Grid DataContext="{Binding ElementName=windo,Path=objectOfStudent}">
    <Grid.RowDefinitions>
        <RowDefinition Height="*"></RowDefinition>
    </Grid.RowDefinitions>
    <TextBox Grid.Row="0" Margin="25" Height="25" Width="100" HorizontalAlignment="Left" Name="TextBox1" Text="{Binding Path=StudentName}"></TextBox>

</Grid>
</Window> 
```

对应的代码。

```
 namespace SimpleDatabindingwithclass
    {
     /// <summary>
     /// Interaction logic for MainWindow.xaml
     /// </summary>
     public partial class MainWindow : Window
     {
         public MainWindow()
         {
              InitializeComponent();
              Student objectOfStudent = new Student();
              objectOfStudent.StudentName = "John diley";
              objectOfStudent.Address = "20, North Travilia, Washington DC.";
              //not setting datacontext here since i set that in xaml
         }
         public class Student
         {
             private string studentname;
             private string address;

             public string Address
             {
                 get { return address; }
                 set { address = value; }
        }
        public string StudentName
        {
            get{return studentname;}
            set{studentname = value;}
        }
    }
} 
```

}

但是，当我使用此 XAML 并通过代码设置 datacontext 时，它同样有效！

即，当我把类似的东西

```
 this.DataContext = objectOfStudent; 
```

在 MainWindow() 中，应用程序工作！你认为问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:14:45.990

绑定仅适用于公共属性，您不能绑定到某些局部变量。`objectOfStudent`作为您的公共`MainWindow`财产。

编辑：

```
public Student objectOfStudent { get; set; }

public MainWindow()
{
    InitializeComponent();
    objectOfStudent = new Student();
    objectOfStudent.StudentName = "John diley";
    objectOfStudent.Address = "20, North Travilia, Washington DC.";
    //not setting datacontext here since i set that in xaml
 } 
```

编辑：

Also you need to implement [INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx) interface in the `MainWindow` and `Student` classes and raise `PropertyChanged` when you set the properties. That is the right way, the binding will be updated everytime you change the properties. Or a simple way: create `objectOfStudent` before calling `InitializeComponent`.

```
public MainWindow()
{
    objectOfStudent = new Student();
    objectOfStudent.StudentName = "John diley";
    objectOfStudent.Address = "20, North Travilia, Washington DC.";
    InitializeComponent();
    //not setting datacontext here since i set that in xaml
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:04:22.223

这是因为您正在尝试使用通过 XAML命名的**局部变量**`objectOfStudent`- 这在 XAML 的上下文中没有任何意义。XAML 只接受字段和属性，不接受局部变量。

# java - 将 jtable 中的第一行保持为默认选择

> ID：11862108
> 
> 赞同：2
> 
> 时间：2012-08-08T10:01:09.220
> 
> 标签：java, swing, jtable

```
table.setRowSelectionInterval(0, 0); 
```

我试过上面的代码，但是当我使用这个代码时，我无法使用下面的代码检索值：

```
int col = table.getSelectedColumn();
int row = table.getSelectedRow();
finalOID=(String)table.getModel().getValueAt(row, col);
System.out.println("first oid:"+finalOID); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T10:06:48.567

看看[JTable的方法](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

```
table.changeSelection(0, 0, false, false); 
```

取决于[选择模式](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)

方法必须被调用`Event Dispatch Thread`，更多在 Oracle 教程[Concurency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

# jquery - jQuery找到最近的父div

> ID：11862109
> 
> 赞同：4
> 
> 时间：2012-08-08T10:01:10.053
> 
> 标签：jquery, next, siblings

我正在尝试通过以下场景学习 jQuery。为此，我在阅读了多个 SO 问题后尝试了以下 jQuery；但它没有用

```
$(this).closest('.viewLogText').parent().find('.reportLog').css("display", "none"); 
```

**设想：**

在具有 Css 类“repeaterRecord”的 div 中有三个子 div 元素。子 div 带有 css 类 - repeaterIdentifier、viewLogTitle 和 reportLog。

有两个具有这种结构的 div（具有 Css 类“repeaterRecord”的 div）。

![在此处输入图像描述](../Images/818bb01ca928eab78e2f21ab12d56ce0.png)

带有 viewLog 类的 div 如下所示。

```
 <div class="viewLogTitle">
        <div class="viewLogText">
            View Report Log
        </div>
        <div>
            <img alt="Expand" src="Images/PlusIcon.GIF" class="expandLogIcon" />
            <img alt="Collapse" src="Images/MinusIcon.GIF" class="collapseLogIcon" />
        </div>
    </div> 
```

当单击collapseLogIcon 图像时，我需要（仅）隐藏最近的具有“reportLog”类的div（与“viewLogTitle”处于同一级别）。我们如何使用 jQuery 来做到这一点？

**更新的工作示例**：

[http://jsfiddle.net/Lijo/L9w4F/11/](http://jsfiddle.net/Lijo/L9w4F/11/)和 [http://jsfiddle.net/Lijo/L9w4F/8/](http://jsfiddle.net/Lijo/L9w4F/8/)和 [http://jsfiddle.net/Lijo/L9w4F/12/](http://jsfiddle.net/Lijo/L9w4F/12/)

**参考**：

1.  [找到下一个匹配的兄弟姐妹的有效，简洁的方法？](https://stackoverflow.com/questions/4933236/efficient-concise-way-to-find-next-matching-sibling)

2.  [jquery选择兄弟姐妹'直到'](https://stackoverflow.com/questions/1829811/jquery-select-siblings-until)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T10:03:02.510

您可以使用`.siblings()`查找最近的`div`.

**[API在这里](http://api.jquery.com/siblings/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:04:22.920

我建议使用：

```
$(this).closest('.viewLogTitle').next('.reportLog').hide(); 
```

请注意，传递给`next()`方法 ( `'.reportLog'`) 的过滤器意味着该元素的下一个兄弟元素*只有在*匹配该选择器`viewLogTitle`时才会受到影响。如果 的下一个兄弟始终*是*目标（HTML 不会改变），则过滤器是不必要的，可以省略。*`.viewLogTitle`*

 **或者，如果他们并不总是连续跟随（但“最近”总是受到影响），对于跟随兄弟姐妹：

```
$(this).closest('.viewLogTitle').nextAll('.reportLog:first').hide(); 
```

或者对于前面的兄弟姐妹（如果在`.reportLog`之前`.viewLogTitle`）：

```
$(this).closest('.viewLogTitle').prevAll('.reportLog:first').hide(); 
```

参考：

*   [`:first`选择器](http://api.jquery.com/first-selector/)。
*   [`next()`](http://api.jquery.com/next/).
*   [`nextAll()`](http://api.jquery.com/nextAll/).
*   [`prevAll()`](http://api.jquery.com/prevAll/).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T10:04:52.437

您可以使用`siblings()`方法：

```
$(this).closest('.viewLogText').siblings('.reportLog').hide() 
```

您也可以尝试与以下`hide()`相同的方法`.css("display", "none");`**

# ruby-on-rails - 通过复选框创建关联资源

> ID：11862112
> 
> 赞同：0
> 
> 时间：2012-08-08T10:01:19.490
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试通过陆军表单中的复选框创建工程师，但它没有被创建。复选框的名称是`siege`并且是我的`Army`模型的一部分：

**模型/军队.rb**

```
class Army < ActiveRecord::Base
 attr_accessible :siege
 attr_reader :siege
 validates_inclusion_of :siege, :in => [true, false]
 has_many :engineers

 def siege=(string_value)
   @siege = (string_value == '1')
 end
end 
```

**模型/工程师.rb**

```
class Engineer < ActiveRecord::Base
  belongs_to :user
  belongs_to :army
end 
```

**军队/new.html.erb**

```
<%= form_for @army do |f| %>
  <%= f.check_box :siege %>
  <%= f.submit "Create Army" %>
<% end %> 
```

**控制器/armies_controller.rb**

```
def new
  @army = Army.new
end

def create
  @army = current_user.armies.build(params[:army])
    if @army.save
      redirect_to new_army_path
    else
      render :new
    end
  end
end 
```

**模型/army_observer.rb**

```
class ArmyObserver < ActiveRecord::Observer
  def after_save(army)
    if army.siege
      Engineer.new({ :user_id => current_user.id, :army_id => :army_id })
    end
  end
end 
```

军队被创建，但工程师没有。我的代码中需要更正哪些内容才能启用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:23:10.563

初始化后您没有保存记录:)

`.new`只是建立一个记录不保存它。

在观察者更改`new`为`create!`

```
Engineer.new({ :user_id => current_user.id, :army_id => :army_id }) 
```

至

```
Engineer.create({ :user_id => current_user.id, :army_id => :army_id }) 
```

或者在建立记录后保存

```
engineer= Engineer.new({ :user_id => current_user.id, :army_id => :army_id }) 
engneer.save 
```

您还需要让您的观察者在配置中注册以使其监听活动

[http://guides.rubyonrails.org/active_record_validations_callbacks.html#registering-observers](http://guides.rubyonrails.org/active_record_validations_callbacks.html#registering-observers)

# c# - 如何比较 2 个数据表并在第 3 个数据表中获取唯一记录？

> ID：11862113
> 
> 赞同：1
> 
> 时间：2012-08-08T10:01:24.570
> 
> 标签：c#

我有 2 个数据表，比如说 dtData1 和 dtData2。我在两个数据表中都有记录，我想比较两个数据表并想创建一个新的数据表，比如说 dtData3 和 uniqe 记录。

假设：dtData1 有 10 条记录，dtData2 有 50 条记录，但是 dtData2 中有什么记录，这 7 条记录与 dtData1 相同。所以在这里我想要 dtData3 中的唯一记录，这意味着我只想要 dtData3 中的 43 条记录。

我们不知道在数据表中我们有重复的地方，我们可能不会有重复，或者我们也有可能会有所有重复的记录。

所以在 dtData3 我需要唯一的记录

有人请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T10:08:49.860

```
var dtData3 = dtData2.AsEnumerable().Except(dtData1.AsEnumerable(), DataRowComparer.Default); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:32:54.727

使用这个..可能它会帮助你。

假设你有两个数据表

```
DataTable dt1 = new DataTable();
            dt1.Columns.Add("Name");
            dt1.Columns.Add("ADD");
            DataRow drow;
            for (int i = 0; i < 10; i++)
            {
                drow = dt1.NewRow();
                drow[0] = "NameA" + 1;
                drow[1] = "Add" + 1;
                dt1.Rows.Add();
            }
            DataTable dt2 = new DataTable();
            dt2.Columns.Add("Name");
            dt2.Columns.Add("ADD");
            DataRow drow1;
            for (int i = 0; i < 11; i++)
            {
                drow1 = dt2.NewRow();
                drow1[0] = "Name" + 1;
                drow1[1] = "Add" + 1;
                dt2.Rows.Add();
            } 
```

现在要解决您的问题，请致电：-

```
DataTable d3 = CompareTwoDataTable(dt1, dt2); 
```

方法是这样的；--

```
public static DataTable CompareTwoDataTable(DataTable dt1, DataTable dt2)
        {
            dt1.Merge(dt2);
            DataTable d3 = dt2.GetChanges();

            return d3;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T05:22:21.493

```
public DataTable CompareTwoDataTable(DataTable dtOriginalTable, DataTable dtNewTable, ArrayList columnNames)
    {
        DataTable filterTable = new DataTable();
        filterTable = dtNewTable.Copy();
        string filterCriterial;
        if (columnNames.Count > 0)
        {
            for (int iNewTableRowCount = 0; iNewTableRowCount < dtNewTable.Rows.Count; iNewTableRowCount++)
            {
                filterCriterial = string.Empty;
                foreach (string colName in columnNames.ToArray())
                {
                    filterCriterial += colName.ToString() + "='" + dtNewTable.Rows[iNewTableRowCount][colName].ToString() + "' AND ";
                }
                filterCriterial = filterCriterial.TrimEnd((" AND ").ToCharArray());
                DataRow[] dr = dtOriginalTable.Select(filterCriterial);
                if (dr.Length > 0)
                {
                    filterTable.Rows[filterTable.Rows.IndexOf(filterTable.Select(filterCriterial)[0])].Delete();
                }
            }
        }
        return filterTable;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:10:58.080

那么需要`dtData1`和哪里比较`dtData2`呢？相反，您可以从 index7 开始`dtData2`复制内容。`dtData3`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T11:34:37.350

首先创建数组变量以保存 datatable3 的唯一列值。将 Foreach 循环与第二个 gridview 行一起使用。如果任何匹配则 dnt 将其保存在数组值中，如果 dnt 匹配则将其保存在数组中。并通过附加第三个网格视图来显示它......

例如

```
string[] name = new string[4];

int i=0,j=0;
foreach(GridViewRows gv in GridView1.rows)
{
    if(gv.Cells[0].Text == GridView2.Rows[i].Cells[0].Text)' //if match
    {
       // dnt save
    } 
    else'  //if dnt match save in array for further use
    {
        name[j] = gv.Cells[0].Text;
        j= j++;
    }
    i=i++;
} 
```

在数组“名称”中保存唯一值后...在第三个 Gridview 中绑定它在第三个 Gridview 的数据绑定期间添加此方法...

```
Private void GridView3_RowDataBound(object sender,EventArgs e)
{
    if(e.Row.RowState == DataControlState.DataRow)
    {
        foreach(string nm in name)
        {
            e.Rows.Cells.Add(name);      
        }
    }
} 
```

# objective-c - addLocalMonitorForEventsMatchingMask 的 CoreFoundation 替代方案

> ID：11862114
> 
> 赞同：2
> 
> 时间：2012-08-08T10:01:27.747
> 
> 标签：objective-c, macos, cocoa, core-foundation

**addLocalMonitorForEventsMatchingMask**函数是 NSEvent 类的成员，它安装一个事件监视器，用于在发送到此应用程序之前接收发布到此应用程序的事件的副本。它的**核心基础**替代品是什么？我不想启用**无障碍访问**。另见[这篇文章](https://stackoverflow.com/questions/11437345/monitor-keyboard-events-inside-process-process-wide)。

# android - 如何修复在我们的应用程序中使用第三方库时发生的 NoClassDefFoundError？

> ID：11862121
> 
> 赞同：0
> 
> 时间：2012-08-08T10:02:12.653
> 
> 标签：android, android-library, android-datepicker

我正在使用[**android 轮**](http://code.google.com/p/android-wheel/)在我的应用程序中选择日期和时间。但是我`NoClassDefFoundError`在使用这个库时已经厌倦了。

我包含`wheel.jar`在`libs`文件夹中，但在运行时仍然出现错误。

这是`logcat`错误：

> main(Native Method) 08-08 15:24:27.601: I/Process(21223): 发送信号。PID：21223 SIG：9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:49:09.937

尝试在项目中订购和导出您的 jar 库。

按照以下步骤（在 Eclipse 中）：

> 1.  转到项目属性
> 2.  选择 Java 构建路径
> 3.  选择最后一个选项卡“订购和导出”
> 4.  将您的 Jar（库）移动到顶部位置
> 5.  清理和构建项目

我不知道到底发生了什么，但是一旦我遇到同样的问题并以上述方式解决了它。希望这对你也有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:08:23.060

你应该试试这个：

1.  `Remove``JAR`从 .-> 您的项目中对 的所有引用`Java Build Path`不应再无错误地构建

2.  `libs folder`在项目的根目录下创建一个if not exist `Copy the JAR into the libs folder`。

3.  如果仍然没有运行确定。右键单击您的项目 > Android 工具 > 修复项目属性

`clean your project`并运行。它会起作用的

看看这个现有的答案[Getting NoClassDefFoundError](https://stackoverflow.com/questions/11823975/getting-noclassdeffounderror-when-using-common-lang-stringutils-in-android-java/11824038#11824038)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T11:13:26.380

Atlast 我找到了解决方案，

不要在构建路径中添加 jar 文件，而是转到项目属性 -> Android -> 单击库部分中的添加 -> 并选择库项目。

![在此处输入图像描述](../Images/e7ac1a42b4f45d27962f6f27850abb63.png)

![在此处输入图像描述](../Images/4d8e0494bcbb77373f27fc1d3c63cbd2.png)

# xcode - 如何在 Xcode 属性列表编辑器中选择更多项目？

> ID：11862126
> 
> 赞同：0
> 
> 时间：2012-08-08T10:02:22.417
> 
> 标签：xcode, plist

你知道如何在 Xcode 属性列表编辑器中选择更多项目吗？我想将它们复制粘贴到另一个 plist 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:37:09.400

无法选择更多项目。

# php - 正则表达式匹配标点符号和字母数字字符

> ID：11862129
> 
> 赞同：2
> 
> 时间：2012-08-08T10:02:39.737
> 
> 标签：php, regex, preg-match

我正在尝试测试一个字符串以查看它是否包含字母数字或标点符号以外的字符，如果包含，则设置错误。我有下面的代码，但它似乎不起作用，因为它让“CZW205é”通过。我对正则表达式绝望，似乎无法解决问题。

```
if(!preg_match("/^[a-zA-Z0-9\s\p{P}]/", $product_id)) {
    $errors[$i] = 'Please only enter alpha-numeric characters, dashes, underscores, colons, full-stops, apostrophes, brackets, commas and forward slashes';
    continue;
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T10:18:14.787

你可以做

```
if(preg_match("/[^a-zA-Z0-9\s\p{P}]/", $product_id)) {
    $errors[$i] = 'Please only enter alpha-numeric characters, dashes, underscores, colons, full-stops, apostrophes, brackets, commas and forward slashes';
    continue;
} 
```

`[^...]`是一个否定字符类，它会在找到不在您的类中的内容时立即匹配。

（因此我删除了之前的否定`preg_match()`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:04:39.093

```
/^[a-zA-Z0-9\s\p{P}]+$/ 
```

不要忘记用`$`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T10:16:41.773

发生这种情况是因为您只匹配第一个字符，请尝试以下代码：

```
if(preg_match("/[^\w\s\p{P}]/", $product_id)) {
    $errors[$i] = 'Please only enter alpha-numeric characters, dashes, underscores, colons, full-stops, apostrophes, brackets, commas and forward slashes';
    continue;
} 
```

注意：`\w`是简写`[a-zA-Z0-9_]`

# scala - finagle 5.0 是否发布在我可以添加到我的 sbt.build (sbt11) 的 Maven 存储库中？

> ID：11862131
> 
> 赞同：1
> 
> 时间：2012-08-08T10:02:41.533
> 
> 标签：scala, finagle

我正在尝试在 Scala 项目中使用 finagle，我想知道是否有一个包含 jar 的 Maven 存储库。我想将它添加为依赖项，而不是在本地编译所有东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:33:20.713

来自[http://twitter.github.com/finagle/](http://twitter.github.com/finagle/)

> 注意：Maven Artifacts 发布到[http://maven.twttr.com](http://maven.twttr.com)上的公共 twitter maven repo 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T11:50:18.173

这是我的一个使用 Finagle 5.0.0 的项目的示例 build.sbt 文件：

[https://github.com/cb372/finagle-beanstalk/blob/d2ac139999fd49a6dc4fcd6e1097b07da234b408/build.sbt](https://github.com/cb372/finagle-beanstalk/blob/d2ac139999fd49a6dc4fcd6e1097b07da234b408/build.sbt)

基本上你需要：

```
resolvers += "Twitter Maven repo" at "http://maven.twttr.com/"

libraryDependencies += "com.twitter" % "finagle-core" % "5.0.0" 
```

当我几天前检查时，Maven repo 中可用的 finagle-core 的最新版本是 5.3.1，所以你应该使用它。

# java - Hibernate 二级命中，但同一实体的数据库仍然被命中

> ID：11862134
> 
> 赞同：0
> 
> 时间：2012-08-08T10:02:53.270
> 
> 标签：java, hibernate, caching

我正在使用 Hibernate 4.1.3，并且很惊讶地看到，即使在二级缓存被命中时，也会针对同一实体咨询数据库：

```
DEBUG net.sf.ehcache.Cache - com.behindmedia.btfd.model.UserCache: com.behindmedia.btfd.model.User store hit for com.behindmedia.btfd.model.User#2
DEBUG org.hibernate.SQL - select user0_.id as id5_3_ .... etc 
```

查看堆栈跟踪，似乎 SQL 是由从二级缓存加载实体的方法执行的：

org.hibernate.event.internal.DefaultLoadEventListener (assembleCacheEntry) 中的 loadFromSecondLevelCache。

我在这里错过了什么吗？我确实在 User 类中使用了 Eager fetch 注释。

编辑

我有两个实体，User 和 UserStats，如下所示：

```
@Entity
public class User {
    @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.EAGER)
    private UserStats stats = new UserStats(this);
    ...
}

@Entity
public class UserStats extends AbstractUserStats {
    @OneToOne(mappedBy = "stats")
    private User user;
    ...
} 
```

我发现问题在于，即使从二级缓存中正确检索到用户，从数据库中加载了从 UserStats 到 User 的反向映射。该用户与从缓存中检索到的用户完全相同，因此对我来说似乎不太合乎逻辑。

# xml - xml分成两半

> ID：11862137
> 
> 赞同：0
> 
> 时间：2012-08-08T10:02:55.147
> 
> 标签：xml, xpath, mule

我想将下面的 xml 拆分为两个部分，每个部分包含两个流。包含的 4 个的产品，有没有什么方法可以使用 xpath 或 xpath-node 来实现这一点，我尝试了表达式：

```
/stream.PurchaseOrder/orderLine/products/stream.Product 
```

它将产品分为 4 个部分，any1 可以帮助我表达或某种技术来实现要求吗？

```
<stream.PurchaseOrder>
  <metaData>
    <supplierId>1001</supplierId>
    <supplier>Supplier1</supplier>
  </metaData>
  <orderLine>
    <manufacturer>Manufacturer-1993628836</manufacturer>
    <location>Location-1616142228</location>
    <products>
      <stream.Product>
        <productId>852693979</productId>
        <productName>ProductName-20</productName>
        <price>100</price>
        <model>Model413</model>
        <quantity>50</quantity>
      </stream.Product>
      <stream.Product>
        <productId>1111</productId>
        <productName>ProductName11</productName>
        <price>40</price>
        <model>Model12</model>
        <quantity>150</quantity>
      </stream.Product>
      <stream.Product>
        <productId>85</productId>
        <productName>ProductName3</productName>
        <price>10</price>
        <model>Model3</model>
        <quantity>5</quantity>
      </stream.Product>
      <stream.Product>
        <productId>11</productId>
        <productName>ProductName4</productName>
        <price>4</price>
        <model>Model4</model>
        <quantity>15</quantity>
      </stream.Product>
    </products>
  </orderLine>
</stream.PurchaseOrder> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:13:30.463

您需要使用`count(/stream.PurchaseOrder/orderLine/products/stream.Product)`计算 Product 元素的数量，然后将其除以 2。使用该`round`函数对其进行四舍五入，以防元素数量为奇数。然后使用`position()`如下所示的函数：

上半场：

```
/stream.PurchaseOrder/orderLine/products/stream.Product[position()<=round(count(/stream.PurchaseOrder/orderLine/products/stream.Product) div 2)] 
```

下半场：

```
/stream.PurchaseOrder/orderLine/products/stream.Product[position()>round(count(/stream.PurchaseOrder/orderLine/products/stream.Product) div 2)] 
```

# c++ - LoadString(AFX_IDP_PARSE_INT) 在 mfc exe 中失败（不在 dll 中）

> ID：11862139
> 
> 赞同：0
> 
> 时间：2012-08-08T10:02:57.160
> 
> 标签：c++, mfc

`AFX_IDP_PARSE_INT`是标准 MFC 错误消息的 id（它在 afxres.h 中定义），但在我的项目中它无法加载，这意味着`LoadString`返回`FALSE`、`GetLastError`返回`ERROR_RESOURCE_NAME_NOT_FOUND`和 CString 保持为空。

即使我尝试在 InitInstanse 的开头加载它，也会发生这种情况：

```
BOOL CMyLegacyProject::InitInstance()
{
    CString string;
    if (!string.LoadString(AFX_IDP_PARSE_INT))
            AfxMessageBox(_T("Failed."));
} 
```

相同的代码适用于新项目，但是 - MFC 的相同链接（我静态链接到它），相同的 WINVER，我尝试使其与旧项目相似，但我无法在新项目上重现该错误开始的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:05:59.460

看起来您的资源没有正确构建。确保您的 .rc 文件也包含所有 AFX 资源。首先，我会尝试从头开始构建一个全新的项目，测试在其中加载字符串，然后看看默认的 .rc 文件是什么样的。

它应该包含一个名为“afxres.rc”的文件，即你的 RC 应该有这样的东西：

```
#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)
#ifdef _WIN32
LANGUAGE 9, 1
#pragma code_page(1252)
#endif //_WIN32
#include "res\MyRes.rc2"  // non-Microsoft Visual C++ edited resources
#include "afxres.rc"         // Standard components
#include "afxprint.rc"       // printing/print preview resources
#endif 
```

# java - Spring - 扫描特定的 jar 文件

> ID：11862152
> 
> 赞同：2
> 
> 时间：2012-08-08T10:03:29.390
> 
> 标签：java, spring, annotations, classpath

是否可以告诉spring只扫描（用于注释）指定给它的那些罐子。我知道我们可以指定类路径，但它很慢，因为它需要进入 web-inf/lib 中的每个 jar 以查找与该类路径匹配的类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:06:45.307

> 是否可以告诉spring只扫描（用于注释）指定给它的那些罐子？

那么你不能扫描罐子，但你可以扫描`packages`里面`jars`，但那些包应该包含`Stereotyped annotated classes`。

> 我知道我们可以指定类路径，但它很慢，因为它需要进入 web-inf/lib 中的每个 jar 以查找与该类路径匹配的类。

你知道的都是错的。Spring 不扫描类路径，而是扫描类路径下的`Stereotyped annotated classes`.

# javascript - 如何使用 jQuery 交换网页中的两个图像（连续两次单击）？

> ID：11862157
> 
> 赞同：-1
> 
> 时间：2012-08-08T10:03:33.000
> 
> 标签：javascript, jquery, html, css

在我想要交换位置的众多图像中，我有两个图像。如果我单击一个图像，然后单击另一个图像，则相应的图像应相互交换，其余图像应保持不变。我是这方面的初学者，所以任何帮助或指导都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:14:09.140

这也适用于每个图像：

```
 <img src="http://stunningwebsitetemplates.files.wordpress.com/2011/12/jquery.png"/>
 <img src="http://bloggerschmidt.de/images/stories/logo-mootools.gif" />
 <img src="http://stunningwebsitetemplates.files.wordpress.com/2011/12/jquery.png"/>
 <img src="http://bloggerschmidt.de/images/stories/logo-mootools.gif" /> 
```

JS

```
 $(function(){
     var src="";
     var old;
     $("img").click(function(){
         if(src=="")
         {
            src=$(this).attr("src"); 
             old=$(this);
         }
         else
         {
             old.attr("src",$(this).attr("src"));
             $(this).attr("src",src);
             src="";
         }
      });
 });​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:41:03.790

另一种没有任何全局变量的解决方案。

html

```
<div id="images">
  <img scr="/images/1.jpg" />&nbsp;
  <img scr="/images/2.jpg" />&nbsp;
  <img scr="/images/3.jpg" />&nbsp;
  <img scr="/images/4.jpg" />&nbsp;
  <img scr="/images/5.jpg" />&nbsp;
</div> 
```

js文件

```
$('img').click(function(){
    if($('#images img').hasClass('selected')){
        var src = $(this).attr('src');
        $('.selected').attr('src',src);
        $(this).attr('src',$('.selected').attr('src'));
        $(this).removeClass('selected');
    }
    else
        $(this).addClass('selected');   
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:11:40.980

试试下面的代码

html

```
<div>
  <img scr="/images/1.jpg" />&nbsp;
  <img scr="/images/2.jpg" />&nbsp;
  <img scr="/images/3.jpg" />&nbsp;
  <img scr="/images/4.jpg" />&nbsp;
  <img scr="/images/5.jpg" />&nbsp;
</div> 
```

js文件

```
(function() {
    var swapArray = [];
    var count=0;
    $('img').click(function(){
        count++;
        swapArray.push($(this).attr('src'));
        $(this).addClass(count);
        if(count==2){
            $('.1').attr('src',swapArray[1]).removeClass('1');
            $('.2').attr('src',swapArray[0]).removeClass('2');
            swapArray.length = 0;
            count=0;
        }
    });
}());​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:15:47.823

请参阅以下示例：http: [//jsfiddle.net/Lvp4j/1/](http://jsfiddle.net/Lvp4j/1/)

```
var selected;
$("img").click(
    function() { 
        if (!selected)
        {
            selected = this; 
            $(selected).addClass("selected");
        }
        else
        {
            var src1 = $(selected).attr("src");
            var src2 = $(this).attr("src");
            $(this).attr("src", src1);
            $(selected).attr("src", src2);
            $(selected).removeClass("selected");
            selected = null;
        }
    }
); 
```

我的代码还添加了一个`selected`类，因此您可以突出显示单击的图像...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T10:23:41.983

这是一种不同的方法，它交换实际元素而不是 img 的 src，也避免使用外部变量进行交换。

```
$('img.swap').on('click', function() {
    var t = $(this);
    if (t.hasClass('clicked')) {
        t.removeClass('clicked');
        return;
    }

    var clicked = $('img.swap.clicked')
    if (clicked.length === 0) {
        t.addClass('clicked');        
        return;
    }
    var placeHolder = $('<div id="placeholder"></div>');
    clicked.before(placeHolder);
    t.after(clicked);
    placeHolder.before(t).remove();
    clicked.removeClass('clicked');
});​ 
```

示例 - [http://jsfiddle.net/BxST9/3/](http://jsfiddle.net/BxST9/3/)（使用 div 而不是 img 但不应该有所作为）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T11:00:36.663

鉴于此 HTML：

```
<img src="image_1.jpg" />
<img src="image_2.jpg" />
<img src="image_3.jpg" />
<img src="image_4.jpg" /> 
```

您可以使用以下 JavaScript：

```
(function() {
    var previous = null;

    $('img').click(function() {
        var current = $(this);
        if (current.is(previous)) {    // clicked same image twice; reset
            reset_clicked();
        } else if (previous != null) { // two images clicked; swap
            swap_src(previous, current);
            reset_clicked();
        } else {
            set_clicked(current);
        }
    });

    function reset_clicked() {
        previous.removeClass('clicked');
        previous = null;
    }

    function set_clicked(img) {
        img.addClass('clicked');
        previous = img;
    }

    function swap_src(img1, img2) {
        var src1 = img1.attr('src');
        img1.attr('src', img2.attr('src'));
        img2.attr('src', src1);
    }
}());​ 
```

该类`'clicked'`是纯粹添加的，因此您可以使用 CSS 来设置单击图像的样式。此类也可用于识别任何先前单击的图像，但我使用了 JavaScript 变量，因为它比 DOM 查找更快。

JSFiddle上有一个演示：[jsfiddle.net/cvthL/2](http://jsfiddle.net/cvthL/2/)

*[此答案作为Jitendra Pancholi 的第一个答案](https://stackoverflow.com/a/11862292/990877)的改进版本和他/她的[第二个答案](https://stackoverflow.com/a/11862771/990877)的替代品发布。*

# c# - 使用 EventWaitHandle 确保跨多个用户的单个实例

> ID：11862159
> 
> 赞同：0
> 
> 时间：2012-08-08T10:03:34.463
> 
> 标签：c#, user-accounts, single-instance, event-wait-handle

合作者使用 Processing 构建了一个原型，该原型连接到 Sparkfun RFID 阅读器，我认为使用的是通过 USB 的串行连接。我们已经将原型部署到了许多试用者的家中，而我愚蠢地忽略了一个常见的使用场景是用户切换。因此，我正在编写一个包装器，以确保只有一个原型应用程序实例在机器上的所有用户中运行。

作为一个简单的控制台应用程序，我正在测试我的第一次尝试。这是代码：

```
 static void Main(string[] args)
    {
        // http://stackoverflow.com/a/2590446/575530
        var users = new SecurityIdentifier(WellKnownSidType.WorldSid, null);
        var rule = new EventWaitHandleAccessRule(users, EventWaitHandleRights.FullControl, AccessControlType.Allow);
        var security = new EventWaitHandleSecurity();
        security.AddAccessRule(rule);
        bool createdStartup;
        using (var whStartup = new EventWaitHandle(false, EventResetMode.AutoReset, "Global/AaltoTokensAppStartupEvent", out createdStartup, security))
        {
            bool createdShutdown;
            using (var whShutdown = new EventWaitHandle(false, EventResetMode.AutoReset, "Global/AaltoTokensAppShutdownEvent", out createdShutdown, security))
            {
                Console.WriteLine("Let other instances shutdown");
                whStartup.Set();
                Console.WriteLine("If other instances exist wait for them to shutdown");
                if (!createdShutdown)
                {
                    whShutdown.WaitOne();
                }
                whShutdown.Reset();
                Console.WriteLine("Start tray app");
                var tokenProc = Process.Start(@"C:\Temp\FAMILY3_WIN\TokensApp.exe");
                Console.WriteLine(tokenProc.ProcessName);
                Console.WriteLine("Wait to see if another instance to tries to start");
                whStartup.Reset();
                whStartup.WaitOne();
                Console.WriteLine("Shutdown if another instance starts");
                //if (tokenProc != null) tokenProc.Kill();
                foreach (var process in Process.GetProcesses())
                {
                    if (process.ProcessName.StartsWith("javaw"))
                    {
                        process.Kill();
                    }
                }
                whShutdown.Set();
            }
        }
        Console.WriteLine("Done...");
        Console.ReadLine();
    } 
```

（注意，我知道这段代码存在以下问题：（1）杀死不是正在运行的原型的 Java 进程，以及（2）没有代码可以响应同时启动的大量实例，一次只有两个。但这不是我的问题是关于。）

在单个用户帐户下进行测试可以正常工作。我可以启动我的应用程序，它反过来启动原型，如果我启动我的应用程序的第二个实例，第一个实例会在第二个实例重新启动原型的另一个实例之前杀死原型的初始实例。

但是，如果我尝试从两个不同的用户帐户执行此操作，它会失败（静默）。如果我

1.  启动我的应用程序的一个实例，它启动原型
2.  切换用户
3.  启动我的应用程序的一个实例，然后它在没有我的应用程序的情况下启动原型，从步骤 1 首先关闭现有实例。

谁能看到我的代码有什么问题？我应该如何在同一台机器上的多个同时用户会话中使用 EventWaitHandle？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:37:46.130

不总是这样吗，写了一个长问题后几分钟，答案就会浮现在脑海！

我以 EventWaitHandle 的名义弄错了斜线。例如替换构造函数调用：

```
new EventWaitHandle(false, EventResetMode.AutoReset, "Global/AaltoTokensAppShutdownEvent", out createdShutdown, security) 
```

有了这个：

```
new EventWaitHandle(false, EventResetMode.AutoReset, @"Global\AaltoTokensAppShutdownEvent", out createdShutdown, security) 
```

解决了我的问题。

# generics - 如何在 F# 中使用通用计量单位指定联合子句？

> ID：11862162
> 
> 赞同：4
> 
> 时间：2012-08-08T10:04:05.230
> 
> 标签：generics, f#, discriminated-union

无论如何定义一个DU，其条款使用通用计量单位？例如

```
type MyDU =
| A  of int<_>
| B  of float<_> 
```

此代码无法编译，但我可以指定一个常规函数，该函数接受具有通用度量单位的数值：

```
let f (n : int<_>) = n * n;;
val f : int<'u> -> int<'u ^ 2> 
```

考虑到每个联合子句最终都是一个函数，它将之后指定的类型转换`of`为私有类型`MyDU.A`，或者`MyDU.B`是否有特定原因为什么它适用于函数定义而不是类型定义？

有没有办法在这里做我想做的事？如果没有，我很想知道为什么它也不起作用！

谢谢，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T10:33:10.630

您需要使用通用联合 -

```
type MyDU<[<Measure>] 't> =
    | A  of int<'t>
    | B  of float<'t> 
```

这是因为 a与 a`int<m>`不同`int<s>`。

请注意，这并不特定于度量类型，它也适用于使用联合创建列表等。

# python - 在 python shell 上查看十六进制字符串

> ID：11862163
> 
> 赞同：0
> 
> 时间：2012-08-08T10:04:08.813
> 
> 标签：python, string, hex

在 Scapy 中，我获取了几个数据包的前 28 个字节，并将每个数据包保存为十六进制字符串。每当我想将这些字符串一起打印（它们保存在列表中）时，会发生以下情况：

```
>>> print myStrings[0]
['E\x00\x00W\x00\x00@\x00\x01\x11\xe7-\x8a`t\x86\xd5\x92\xbd\xef0\x1a\xa4\xe8\x00C\xe2k', ['E\x00\x00W\x00\x00@\x00\x01\x11\xe7-\x8a`t\x86\xd5\x92\xbd\xef0\x1a\xa4\xe8\x00C\xe2k']] 
```

但是如果我想分别打印每个字符串：

```
>>> for p in tmpStrAns:
...     print p[0]
... 
EW@�-�`t�Ւ��0��C�k
E8@�L�`t�Ւ��0��$�L
E8@�L�`t�Ւ��0��$�L 
```

（`MyStrings`是列表的列表`[[string1, [string2,string3,...], ...]`：）

这里发生了什么事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:11:08.963

打印列表时，Python 调用`list.__str__`，它调用`repr`它的每个项目。

打印字符串时，Python 直接输出字符串。

```
>>> print "\x11"
�
>>> print ["\x11"]
['\x11']
>>> print repr("\x11")
'\x11' 
```

字符串上的`repr`方法将不可打印的字符转换为它们的十六进制表示。

# c# - Web API 模型绑定

> ID：11862164
> 
> 赞同：15
> 
> 时间：2012-08-08T10:04:14.040
> 
> 标签：c#, asp.net-web-api, wcf-web-api

给定 ASP.NET Web API 路由：

```
example/{Id} 
```

映射到以下 ApiController 操作方法：

```
public void Example(Model m)
{
    ...
} 
```

模型类定义为：

```
public class Model
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

当我将 JSON 发布`{ "Name": "Testing" }`到 URL`/example/123`时，对象的`Id`属性`Model`未绑定。它保持为 0 而不是 123。

如何使模型绑定也包含路由数据中的值？我宁愿不必为看似常见的用例编写自定义模型绑定器。任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T18:30:18.913

完成您正在寻找的最简单的方法就是向您的方法添加另一个参数，并指定哪个参数来自请求的哪个部分。

例子：

```
[HttpPost]
public void Example([FromUri]int id, [FromBody]Model m) {
    // ...
} 
```

现在您的路由`/examples/{id}`将能够成功绑定 - 因为该`Example`方法有一个调用的参数`id`，它正在 URI 中查找该参数。要填充您的模型，您也可以在其中传递 ID，或者执行以下操作：

```
[HttpPost]
public void Example([FromUri]int id, [FromBody]Model m) {
    m.Id = id; // Make sure the model gets the ID as well.
} 
```

然后就像你上面提到的那样简单`{ "Name": "Testing" }`地发布。`/example/123`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T22:05:15.120

我们内置的 ModelBinding 基础结构不支持从 URI 和正文部分绑定对象。但是，您可以实现自定义 IActionValueBinder 来完成此任务。例如，请参考博文[http://blogs.msdn.com/b/jmstall/archive/2012/04/18/mvc-style-parameter-binding-for-webapi.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/04/18/mvc-style-parameter-binding-for-webapi.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T10:37:43.987

建议的过程通常是发布到`/example`而不是`/example/{id}`. （尽管他们通常使用 Web API `/api/{controller}`）

查看此页面中途的表格：[http ://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)

还要检查“使用 ASP.NET Web API 插入记录”的链接 - [http://stephenwalther.com/archive/2012/03/05/introduction-to-the-asp-net-web-api.aspx](http://stephenwalther.com/archive/2012/03/05/introduction-to-the-asp-net-web-api.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T11:24:19.350

我不认为默认绑定器可以将您的 Id 路由值与您的 Model Id 属性相关联，因此，无论 d1k_is 答案是否尽可能好，恐怕；要么写你自己的活页夹（你也许可以写一个更通用的活页夹？-如果你有一个 DomainEntity 超类或类似的东西......）

# mysql - 计算员工的周年纪念日及其入职日期

> ID：11862175
> 
> 赞同：1
> 
> 时间：2012-08-08T10:04:42.777
> 
> 标签：mysql, sql

作为数据库测试的一部分，我们将验证数据是否正确地从数据库呈现到网页上。

我们有一个名为“emp_details”的表，用于存储员工详细信息。我们在其中存储员工的入职日期。现在，使用这个加入日期字段，我需要列出过去十天内有开始日期或周年日期的所有员工。

我在 MySQL 中尝试了各种 DATEDIFF() 组合，但没有成功。

网页上的格式如下所示：

```
Name       Start Date        Years
----------------------------------
William    07/25/2004          8
Gordon     07/22/2007          5
Jill       07/26/2009          3 
```

谁能帮我查询MySQL DB。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:07:29.207

```
select * from 
employees where 
    dayofyear(`start date`) between dayofyear(curdate())-10 and dayofyear(curdate()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:20:26.467

您可以使用以下 in`WHERE`子句

```
DAYOFYEAR(CURDATE()) - DAYOFYEAR(start_date) < 10 
```

或大于 (365 - 10)

# java - tictactoe 实现

> ID：11862184
> 
> 赞同：0
> 
> 时间：2012-08-08T10:05:09.343
> 
> 标签：java, swing

我已经实现了游戏 tictactoe 的最简单的解决方案，我使用了一个 gui 来表示它。所以我问你是否可以给我一些建议和想法，如何让它更优雅。我要改进的部分是井字游戏类以及mousePressed 和mouseEntered 方法。这是代码。

```
/**The TicTacToe class with the GUI
 */
import java.awt.Color;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.border.Border;
import javax.swing.border.LineBorder;

public class TicTacToe extends JFrame implements MouseListener
{
    JLabel[] jl ={
            new JLabel(),
            new JLabel(),
            new JLabel(),
            new JLabel(),
            new JLabel(),
            new JLabel(),
            new JLabel(),
            new JLabel(),
            new JLabel()} ;

    ImageIcon[] ox = {
            new ImageIcon("tic/o.gif"),
            new ImageIcon("tic/x.gif")  
    };

    static boolean isFirst;
    static int counter = 1;

    public TicTacToe()
    {

        JPanel panel = new JPanel(new GridLayout(3,3));

        Border border = new LineBorder(Color.red, 2);
        Border border2 = new LineBorder(Color.blue, 2);

        for(int i=0; i<jl.length; i++)
        {
            jl[i].setBorder(border2);
            jl[i].addMouseListener(this); 
            panel.add(jl[i] );
        }
        panel.setBorder(border);
        this.add(panel);

    }

    public static String count()
    {
        counter++;

        if(counter % 2 != 0)
        {
            isFirst  = true;
            return "First";
        }
            isFirst = false;
            return "Second";

    }

    @Override
    public void mouseClicked(MouseEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mousePressed(MouseEvent me)
    {
        int count = 0;
        count();

        for(int i=0; i<jl.length; i++)
        {

            if(jl[0].getIcon() == ox[0]   && jl[1].getIcon() == ox[0] && jl[2].getIcon() == ox[0] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with 0 won ");
                System.exit(0);
            }

            else if(jl[3].getIcon() == ox[0]   &&  jl[4].getIcon() == ox[0] && jl[5].getIcon() == ox[0] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with 0 won ");
                System.exit(0);
            }

            else if(jl[6].getIcon() == ox[0]   && jl[7].getIcon() == ox[0] && jl[8].getIcon() == ox[0] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with 0 won ");
                System.exit(0);
            }

            else if(jl[0].getIcon() == ox[0]   && jl[4].getIcon() == ox[0] && jl[8].getIcon() == ox[0] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with 0 won with the major diagonal ");
                System.exit(0);
            }

            else if(jl[2].getIcon() == ox[0]   && jl[4].getIcon() == ox[0] && jl[6].getIcon() == ox[0] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with 0 won with the subdiagonal ");
                System.exit(0);
            }

            else if(jl[0].getIcon() == ox[0]   && jl[3].getIcon() == ox[0] && jl[6].getIcon() == ox[0] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with 0 won  ");
                System.exit(0);
            }

            else if(jl[1].getIcon() == ox[0]   && jl[4].getIcon() == ox[0] && jl[7].getIcon() == ox[0] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with 0 won  ");
                System.exit(0);
            }

            else if(jl[2].getIcon() == ox[0]   && jl[5].getIcon() == ox[0] && jl[8].getIcon() == ox[0] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with 0 won  ");
                System.exit(0);
            }

            else if(jl[0].getIcon() == ox[1]   && jl[1].getIcon() == ox[1] && jl[2].getIcon() == ox[1] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with X won ");
                System.exit(0);
            }

            else if(jl[3].getIcon() == ox[1]   &&  jl[4].getIcon() == ox[1] && jl[5].getIcon() == ox[1] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with X won ");
                System.exit(0);
            }

            else if(jl[6].getIcon() == ox[1]   && jl[7].getIcon() == ox[1] && jl[8].getIcon() == ox[1] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with X won ");
                System.exit(0);
            }

            else if(jl[0].getIcon() == ox[1]   && jl[4].getIcon() == ox[1] && jl[8].getIcon() == ox[1] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with X won with the major diagonal ");
                System.exit(0);
            }

            else if(jl[2].getIcon() == ox[1]   && jl[4].getIcon() == ox[1] && jl[6].getIcon() == ox[1] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with X won with the subdiagonal ");
                System.exit(0);
            }

            else if(jl[0].getIcon() == ox[1]   && jl[3].getIcon() == ox[1] && jl[6].getIcon() == ox[1] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with X won  ");
                System.exit(0);
            }

            else if(jl[1].getIcon() == ox[1]   && jl[4].getIcon() == ox[1] && jl[7].getIcon() == ox[1] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with X won  ");
                System.exit(0);
            }

            else if(jl[2].getIcon() == ox[1]   && jl[5].getIcon() == ox[1] && jl[8].getIcon() == ox[1] )
            {
                JOptionPane.showMessageDialog(null,
                        "Player with X won  ");
                System.exit(0);
            }

            if(me.getSource() == jl[i])
            {

                if(jl[i].getIcon() == ox[0] || jl[i].getIcon() == ox[1])
                {
                    JOptionPane.showMessageDialog(null,
                            "You can't insert at " + (i + 1) +  " the place is already taken ");
                    break;
                }

                if(isFirst)
                {
                    jl[i].setIcon(ox[0]);
                }
                else
                {
                    jl[i].setIcon(ox[1]);
                }
            }
        }

    }

    @Override
    public void mouseReleased(MouseEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseEntered(MouseEvent e) 
    {
        if((jl[0].getIcon() == ox[0] || jl[0].getIcon() == ox[1]) && (jl[1].getIcon() == ox[0] || jl[1].getIcon() == ox[1] ) &&
                 (jl[2].getIcon() == ox[0] || jl[2].getIcon() == ox[1]) && (jl[3].getIcon() == ox[0] || jl[3].getIcon() == ox[1] ) &&
                    (jl[4].getIcon() == ox[0] || jl[4].getIcon() == ox[1]) && (jl[5].getIcon() == ox[0] || jl[5].getIcon() == ox[1] ) &&
                    (jl[6].getIcon() == ox[0] || jl[6].getIcon() == ox[1]) && (jl[7].getIcon() == ox[0] || jl[7].getIcon() == ox[1] )
                    && (jl[8].getIcon() == ox[0] || jl[8].getIcon() == ox[1] ))
            {

                    JOptionPane.showMessageDialog(null,
                            "Draw");
                    System.exit(0);

            }

    }

    @Override
    public void mouseExited(MouseEvent e) {
        // TODO Auto-generated method stub

    }

}

/** The tester class with the main method and the frame
 */
import javax.swing.JFrame;
public class TestTicTacToe 
{
    public static void main(String[] args)
    {
//      JFrame application = new JFrame();
        TicTacToe frame = new TicTacToe();
        frame.setLocationByPlatform(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400,400);
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:16:16.843

不要将图标用作状态！为板子和字段上的标记使用适当的（数字）模型，例如

```
int[] board = new int[3][3];
final static int X_MARK = 1;
final static int O_MARK = -1; 
```

因此，如果玩家点击某个区域，

1.  检查该字段是否为空（对应的数组单元格的值为 0）
2.  将单元格值更改为 1 或 -1
3.  计算我们是赢家还是平局（只需计算行、列和对角线的总和，如果总和为 3 或 -3，则我们有赢家，否则，如果没有字段为 0，我们有平局）

然后，使用模型更新板视图。

# sql - SQL 列定义：默认值而不是空冗余？

> ID：11862188
> 
> 赞同：102
> 
> 时间：2012-08-08T10:05:17.513
> 
> 标签：sql, default-value, ddl, notnull

我多次看到以下语法在创建/更改 DDL 语句中定义列：

```
ALTER TABLE tbl ADD COLUMN col VARCHAR(20) NOT NULL DEFAULT "MyDefault" 
```

问题是：既然指定了默认值，是否还需要指定该列不应接受 NULL ？换句话说， DEFAULT 不会使 NOT NULL 变得多余吗？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-08-08T10:08:47.503

`DEFAULT`是在插入/更新语句中没有显式值的情况下将插入的值。让我们假设，您的 DDL 没有`NOT NULL`约束：

```
ALTER TABLE tbl ADD COLUMN col VARCHAR(20) DEFAULT 'MyDefault' 
```

然后你可以发出这些声明

```
-- 1\. This will insert 'MyDefault' into tbl.col
INSERT INTO tbl (A, B) VALUES (NULL, NULL);

-- 2\. This will insert 'MyDefault' into tbl.col
INSERT INTO tbl (A, B, col) VALUES (NULL, NULL, DEFAULT);

-- 3\. This will insert 'MyDefault' into tbl.col
INSERT INTO tbl (A, B, col) DEFAULT VALUES;

-- 4\. This will insert NULL into tbl.col
INSERT INTO tbl (A, B, col) VALUES (NULL, NULL, NULL); 
```

或者，您也可以根据[SQL-1992](http://www.contrib.andrew.cmu.edu/%7Eshadow/sql/sql1992.txt)标准使用`DEFAULT`in语句：`UPDATE`

```
-- 5\. This will update 'MyDefault' into tbl.col
UPDATE tbl SET col = DEFAULT;

-- 6\. This will update NULL into tbl.col
UPDATE tbl SET col = NULL; 
```

请注意，并非所有数据库都支持所有这些 SQL 标准语法。添加`NOT NULL`约束将导致 statements 错误`4, 6`，而`1-3, 5`仍然是有效的 statements。所以回答你的问题：不，它们不是多余的。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-08T10:06:47.043

即使使用默认值，您也始终可以使用 覆盖列数据`null`。

该`NOT NULL`限制不允许您在使用`null`值创建该行后更新该行

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-17T08:20:19.320

我的 SQL 老师说，如果你同时指定一个`DEFAULT`值 and `NOT NULL`or `NULL`，`DEFAULT`应该总是在`NOT NULL`or之前表示`NULL`。

像这样：

`ALTER TABLE tbl ADD COLUMN col VARCHAR(20) DEFAULT "MyDefault" NOT NULL`

`ALTER TABLE tbl ADD COLUMN col VARCHAR(20) DEFAULT "MyDefault" NULL`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-08T10:08:53.470

我会说不是。

如果该列确实接受空值，那么没有什么可以阻止您在字段中插入空值。据我所知，默认值仅适用于创建新行。

如果设置了 not null，则不能在字段中插入 null 值，因为它会引发错误。

将其视为防止空值的故障安全机制。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-11-19T17:50:03.913

> 换句话说， DEFAULT 不会使 NOT NULL 变得多余吗？

不，这不是多余的。扩展接受的答案。对于可为空的列`col`，即使定义了 DEFAULT，我们也可以插入 NULL：

```
CREATE TABLE t(id INT PRIMARY KEY, col INT DEFAULT 10);

-- we just inserted NULL into column with DEFAULT
INSERT INTO t(id, col) VALUES(1, NULL);

+-----+------+
| ID  | COL  |
+-----+------+
|   1 | null |
+-----+------+ 
```

Oracle 为这种情况引入了额外的语法，以使用 default 覆盖显式 NULL `DEFAULT ON NULL`：

```
CREATE TABLE t2(id INT PRIMARY KEY, col INT DEFAULT ON NULL 10);
-- same as
--CREATE TABLE t2(id INT PRIMARY KEY, col INT DEFAULT ON NULL 10 NOT NULL); 

INSERT INTO t2(id, col) VALUES(1, NULL);

+-----+-----+
| ID  | COL |
+-----+-----+
|  1  |  10 |
+-----+-----+ 
```

在这里，我们尝试插入 NULL 但取而代之的是默认值。

**[db<>小提琴演示](https://dbfiddle.uk/?rdbms=oracle_18&fiddle=4df8629ba2de8e53436414a7e7756cad)**

> [开空](https://docs.oracle.com/database/121/SQLRF/statements_7002.htm#i2157251)
> 
> 如果您指定 ON NULL 子句，则当后续 INSERT 语句尝试分配一个评估为 NULL 的值时，Oracle 数据库将分配 DEFAULT 列值。
> 
> 当您指定 ON NULL 时，将隐式指定 NOT NULL 约束和 NOT DEFERRABLE 约束状态。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-27T19:21:04.337

对于自 12c 以来的 Oracle，您有`DEFAULT ON NULL`这意味着`NOT NULL`约束。

```
ALTER TABLE tbl ADD (col VARCHAR(20) DEFAULT ON NULL 'MyDefault'); 
```

[更改表](https://docs.oracle.com/en/database/oracle/oracle-database/19/sqlrf/ALTER-TABLE.html)

> 开空
> 
> 如果您指定 ON NULL 子句，则当后续 INSERT 语句尝试分配一个评估为 NULL 的值时，Oracle 数据库将分配 DEFAULT 列值。
> 
> 当您指定 ON NULL 时，将隐式指定 NOT NULL 约束和 NOT DEFERRABLE 约束状态。如果您指定与 NOT NULL 和 NOT DEFERRABLE 冲突的内联约束，则会引发错误。

# macos - 如何在我的 Cocoa 应用程序上从 WebView 捕获声音

> ID：11862190
> 
> 赞同：7
> 
> 时间：2012-08-08T10:05:41.047
> 
> 标签：macos, cocoa, core-audio, audio-recording

我正在编写一个具有 WebView 的 Cocoa 应用程序。（Mountain Lion 上的 Xcode 4.4）

我需要您的帮助来从 WebView 中显示的网页录制声音/音频。

我想将音频录制到文件中，该文件来自 WebView，当它显示生成声音的网页时。

有什么简单的方法可以做到这一点吗？如果您能给我任何建议，我将不胜感激。

谢谢。

# wpf - 带文本框的二维动态列表视图

> ID：11862191
> 
> 赞同：0
> 
> 时间：2012-08-08T10:05:45.333
> 
> 标签：wpf, wpf-controls, wpfdatagrid

这是一个带有动态标题和行的动态列表视图。但这里的问题是我尝试使用文本框作为

```
 xaml = "<DataTemplate><TextBox VerticalAlignment=\"Center\" TextChanged=\"{Binding " + propName + "}\" > " + propName + "</TextBox></DataTemplate>"; 
```

而不是在方法 CreateDataTemplate 中具有绑定的复选框，在单击 btn 后无法提取值。

这是带有 CheckBox 的代码。所以任何人都可以帮助我。我还需要文本框内的值。先感谢您

```
<Window x:Class="WpfListView.SalesPerson_SalesRegion_Association"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="SalesPerson_SalesRegion_Association" Height="500" Width="500">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
    </Grid.RowDefinitions>
    <ListView Name="listView1" Width="400" Height="300" Margin="20" HorizontalAlignment="Left">
        <ListView.View>
            <GridView></GridView>
        </ListView.View>
    </ListView>

    <Button Grid.Row="1" HorizontalAlignment="Left" 
            Content="ShowSelectedMapping"
            Name="btnShow" Width="150" Margin="0,10,0,0" Click="btnShow_Click"></Button>

    <TextBlock Name="textBlock1" Grid.Row="2" 
                HorizontalAlignment="Left" Margin="0,10,0,0"></TextBlock>
</Grid> 
```

```
 public partial class SalesPerson_SalesRegion_Association : Window
{
    public SalesPerson_SalesRegion_Association()
    {
        InitializeComponent();
        AddColumnsToListView();
        DataTable dt = DataHelper.GetRegionPersonAssociation();
        listView1.ItemsSource = dt.DefaultView;
    }

    private void btnShow_Click(object sender, RoutedEventArgs e)
    {
        DataView view = listView1.ItemsSource as DataView;
        DataTable userSelectionTbl = view.ToTable();

        DataTable idTable = DataHelper.GetRegionIdPersonIdMatrix();
        List<SalesRegion> lstRegion = SalesRegion.GetRegions();

        string selectedRegion = string.Empty;
        string msg = string.Empty;
        DataRow dRow=null;

        int totRows = userSelectionTbl.Rows.Count;
        int totCols = lstRegion.Count-1;
        string strTempMsg = string.Empty;
        bool isColChecked = false;
        for (int rowIndex = 0; rowIndex < totRows; rowIndex++)
        {
            dRow = userSelectionTbl.Rows[rowIndex];
            strTempMsg = dRow[0].ToString() + "(" + idTable.Rows[rowIndex][0].ToString() + ")" +  " : ";

            string rgnId="";
            isColChecked = false;
            foreach (SalesRegion region in lstRegion)
            {
                if (((bool)dRow[region.RegionName]) == true)
                {
                    rgnId = idTable.Rows[rowIndex][region.RegionName].ToString();
                    strTempMsg += region.RegionName + "(" + rgnId + ")";
                    isColChecked = true;                    }
            }
            if (isColChecked == false)
            {
                strTempMsg += "  : No region selected";
            }
            strTempMsg += Environment.NewLine;

            msg += strTempMsg;
        }

        textBlock1.Text = msg;
        string tt = "t";
    }
    private void AddColumnsToListView()
    {
        List<SalesRegion> lstSalesRegion = SalesRegion.GetRegions();
        List<SalesPerson> lstSalesPerson = SalesPerson.GetSalesPersons();

        GridViewColumn colSalesPerson = new GridViewColumn();
        colSalesPerson.Header = "Sales Person";
        colSalesPerson.DisplayMemberBinding = new Binding("SalesPersonName");
        colSalesPerson.Width = 150;
        GridView grdView = listView1.View as GridView;
        grdView.Columns.Add(colSalesPerson);

        //Since columns are dynamic we need a data template per column
        // in which we bind the checkBox's checked property with 
        //appropriate columnName
        Dictionary<string, DataTemplate> dict = GetDataTemplates(lstSalesRegion);

        foreach (SalesRegion region in lstSalesRegion)
        {
            GridViewColumn col1 = new GridViewColumn();
            col1.Header = region.RegionName;
            DataTemplate dTempl = dict[region.RegionName];
            col1.CellTemplate = dTempl;
            grdView.Columns.Add(col1);
        }
    }

    private Dictionary<string, DataTemplate> GetDataTemplates(List<SalesRegion> lstSalesRegion)
    {
        Dictionary<string, DataTemplate> dict = new Dictionary<string, DataTemplate>();
        foreach (SalesRegion region in lstSalesRegion)
        {
            DataTemplate dTemplate = CreateDataTemplate(region.RegionName);
            dict.Add(region.RegionName, dTemplate);
        }
        return dict;
    }
    private DataTemplate CreateDataTemplate(string propName)
    {
        MemoryStream sr = null;
        ParserContext pc = null;
        string xaml = string.Empty;
        xaml = "<DataTemplate><CheckBox VerticalAlignment=\"Center\" IsChecked=\"{Binding " + propName + "}\"></CheckBox></DataTemplate>";
        sr = new MemoryStream(Encoding.ASCII.GetBytes(xaml));
        pc = new ParserContext();
        pc.XmlnsDictionary.Add("", "http://schemas.microsoft.com/winfx/2006/xaml/presentation");
        pc.XmlnsDictionary.Add("x", "http://schemas.microsoft.com/winfx/2006/xaml");
        DataTemplate datatemplate = (DataTemplate)XamlReader.Load(sr, pc);
        return datatemplate;
    }

} // class ends here 
```

} // DataHelper 类

```
public class SalesPerson
{
    public int SalesPersonId
    { get; set; }
    public string SalesPersonName
    { get; set; }

    public SalesPerson(int salesPersonId, string salesPersonName)
    {
        this.SalesPersonId = salesPersonId;
        this.SalesPersonName = salesPersonName;
    }

    public static List<SalesPerson> GetSalesPersons()
    {
        List<SalesPerson> lst = new List<SalesPerson>();
        lst.Add(new SalesPerson(101, "SalesPerson1"));
        lst.Add(new SalesPerson(201, "SalesPerson2"));
        lst.Add(new SalesPerson(301, "SalesPerson3"));
        lst.Add(new SalesPerson(401, "SalesPerson4"));
        lst.Add(new SalesPerson(501, "SalesPerson5"));
        return lst;
    }
} // class SalesPerson ends here

public class SalesRegion
{
    public int RegionId
    { get; set; }
    public string RegionName
    { get; set; }

    public SalesRegion(int regionId, string regionName)
    {
        this.RegionId = regionId;
        this.RegionName = regionName;
    }
    public static List<SalesRegion> GetRegions()
    {
        List<SalesRegion> lst = new List<SalesRegion>();
        lst.Add(new SalesRegion(501,"North"));
        lst.Add(new SalesRegion(502, "South"));
        lst.Add(new SalesRegion(503, "East"));
        lst.Add(new SalesRegion(504, "West"));
        lst.Add(new SalesRegion(505, "MyRegion"));
        return lst;
    }
} // class SalesRegion ends here

public class DataHelper
{
    public static DataTable GetRegionPersonAssociation()
    {
        DataTable dt = new DataTable();

        //Create data table structure
        // SalesPerson   Region1   Region2   Region3 ....
        DataColumn colSalesPerson = new DataColumn("SalesPersonName", typeof(string));
        dt.Columns.Add(colSalesPerson);

        List<SalesRegion> lstRegions = SalesRegion.GetRegions();
        DataColumn colRegion = null;
        foreach (SalesRegion region in lstRegions)
        {
            colRegion = new DataColumn(region.RegionName, typeof(bool));
            dt.Columns.Add(colRegion);
        }
        //Fill data into the data table
        List<SalesPerson> personList = SalesPerson.GetSalesPersons();
        DataRow dRow = null;
        foreach (SalesPerson sp in personList)
        {
            dRow = dt.NewRow();
            dRow["SalesPersonName"] = sp.SalesPersonName;
            foreach (SalesRegion sr in lstRegions)
            {
                dRow[sr.RegionName] = false;
            }
            dt.Rows.Add(dRow);
        }
        return dt;
    }

    public static DataTable GetRegionIdPersonIdMatrix()
    {
        DataTable dt = new DataTable();

        //Create data table structure
        // SalesPerson   Region1   Region2   Region3 ....
        DataColumn colSalesPerson = new DataColumn("SalesPersonId", typeof(int));
        dt.Columns.Add(colSalesPerson);

        List<SalesRegion> lstRegions = SalesRegion.GetRegions();
        DataColumn colRegion = null;
        foreach (SalesRegion region in lstRegions)
        {
            colRegion = new DataColumn(region.RegionName, typeof(int));
            dt.Columns.Add(colRegion);
        }
        //Fill data into the data table
        List<SalesPerson> personList = SalesPerson.GetSalesPersons();
        DataRow dRow = null;
        foreach (SalesPerson sp in personList)
        {
            dRow = dt.NewRow();
            dRow["SalesPersonId"] = sp.SalesPersonId;
            foreach (SalesRegion sr in lstRegions)
            {
                dRow[sr.RegionName] = sr.RegionId;
            }
            dt.Rows.Add(dRow);
        }
        return dt;
    }    } // class DataHelper ends here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:20:48.120

使用这样的文本框数据模板

```
xaml = "<DataTemplate><TextBox VerticalAlignment=\"Center\" Tag=\"{Binding " + propName + ", Mode=TwoWay}\" > " + propName + "</TextBox></DataTemplate>"; 
```

将文本框的样式添加到您的 listview.resources

```
 <Style TargetType="{x:Type TextBox}">
                <EventSetter Event="TextChanged" Handler="TextBox_TextChanged"></EventSetter>
            </Style> 
```

将处理程序添加到您的代码隐藏中

```
private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        (sender as TextBox).Tag = true;
    } 
```

这将像您的复选框示例一样。

# testing - 使用函数式语言的 UI 自动化

> ID：11862192
> 
> 赞同：3
> 
> 时间：2012-08-08T10:05:47.223
> 
> 标签：testing, f#, ui-automation, canopy-web-testing

有没有人有用函数式语言编写 UI 自动化的例子或经验？我目前正在学习 F# 以更好地理解功能概念，但我很难弄清楚如何用功能语言构建自动化 UI 测试 - 似乎很容易使用与 Java 中相同的页面/屏幕对象模式或 C#，但由于缺乏经验，我很好奇是否有我错过的不同方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T23:27:34.760

使用函数式语言的最大胜利将来自**根本不必使用类，而是能够在它们是正确答案时使用**。**此外，由于类型推断和语法**，F# 允许一个漂亮干净的“dsl”外观测试套件。常见的操作（例如：登录）很容易被抽象为一个函数并在测试中调用。任何特定于页面的功能都可以连同其定义功能（css 选择器等）一起添加到该页面的模块中。

这是一个用[canopy编写的测试示例](http://lefthandedgoat.github.com/canopy)

```
测试（有趣_->
    //测试说明
    描述“注册用户”

    //进入根目录
    网址“/”

    //确保你在登录页面
    在“/帐户/登录”上

    //点击注册链接
    点击“form a[href='/Account/Register']”

    //验证你是否被重定向
    在“/帐户/注册”

    //将输入的值设置为指定的电子邮件地址
    "#Email" << "用户名@example.com"

    //将输入的值设置为“密码”
    "#密码" << "密码"

    //将输入的值设置为“PasswordConfirmation”
    "#PasswordConfirmation" << "密码"

    //点击注册按钮
    点击“输入[值='注册']”

    //验证你是否被重定向
    在 ”/”

    //测试后退出
    网址“/帐户/注销”  
)

```

# 更多关于天篷

我已经用 F# 编写了一个 Web 自动化框架/库（也是 Ruby 中的一个），到目前为止，虽然我认为它的风格不是功能性的，但它没有任何类。几乎所有东西都是函数。您的测试套件是一个正在运行的函数列表。

[github页面](http://lefthandedgoat.github.com/canopy)
[一些例子](https://github.com/lefthandedgoat/canopy/blob/master/basictests/Program.fs)

< 500 LoC 只有 3 个模块、与页面交互的主要功能集、一个简单的测试运行器和一些配置变量。在这一点上，这种范式对我来说非常有效。我不使用类来定义页面，因为对我来说，页面定义就像我使用的 CSS 选择器一样简单。具有一堆值的模块很好地满足了这一需求。

试一试，我认为您会发现这是实现目标的绝佳方式。

抱歉第一次发帖，所以它不会让我显示更多链接。在 github 上查看，你可以在 /canopy/canopy/canopy.fs 看到源代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:52:35.113

您似乎回答了您自己的问题，F# 支持 OOP，OOP 在这种情况下非常适合，并且在这种情况下，命令式与函数式之间的区别与结构是分开的。

因此，就像在 C# 中一样使用类和方法，但以功能方式编写单元测试本身。

# c# - 从 Unity 注册中获取 injectionMemebers

> ID：11862198
> 
> 赞同：0
> 
> 时间：2012-08-08T10:06:16.757
> 
> 标签：c#, unity-container, code-injection, member

是否可以在 Unity 容器中获取 injectionMembers 注册？

我想获得使用特定“ `InjectionConstructor(typeof(MyClass)`”的注册。

这该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:54:00.330

你不能。在`InjectionMembers`Unity 的`IPolicyList`. 这就是注册后剩下的一切。

# c# - 如何分解这个很长的 sql 以简化？

> ID：11862205
> 
> 赞同：1
> 
> 时间：2012-08-08T10:06:30.393
> 
> 标签：c#, sql, oracle

我有这个由以前的开发人员编写的 sql（如下）。我怎样才能将它分成三个或四个部分并再次将它连接在一起而不是这个单一的大 sql？请指教。我对 sql 真的很陌生，不知道如何简化它。谢谢。我正在使用 C# 控制台应用程序。

```
SELECT distinct
  department_name CTG_DEPARTMENT,
  chart_id SPC_CHART_ID,
  concat(process_id, concat('-', item_name)) MONITOR_ITEM,
  product_id CTG_PRODUCT, 
  graphtype SPC_GRAPH_TYPE,
  CASE WHEN viorules LIKE '%9%'  THEN 'OOS'
       WHEN viorules LIKE '%10%' THEN 'OOS'
       WHEN viorules IS NULL     THEN 'OK'
                                 ELSE 'OOC' END SPC_STATUS,
  process_stage,
  'L8B' fab_name 
FROM
(
  SELECT
    'ARRAY' process_stage,
     dept.item_name department_name,
     dept.chart_id,
     proc_id.item_name process_id,
     item.item_name,
     product.item_name product_id, 
     graphtype
  FROM 
  (
    SELECT
      item_name,
      chart_id
    FROM
      aryspch.c_ctg_filter f,
      aryspch.c_ctg_item i,
      aryspch.c_ctg_relate r
    WHERE
      GROUP_ID = 6 
      AND filter_name IN ('Department')
      AND f.filter_id = i.filter_id
      AND i.item_id = r.item_id
  ) dept
  ,
  (
    SELECT
      item_name,
      chart_id
    FROM
      aryspch.c_ctg_filter f,
      aryspch.c_ctg_item   i,
      aryspch.c_ctg_relate r
    WHERE
      GROUP_ID = 6
      AND filter_name IN ('Process_ID')    
      AND f.filter_id = i.filter_id
      AND i.item_id = r.item_id
  ) proc_id
  ,
  (
    SELECT
      item_name,
      chart_id
    FROM
      aryspch.c_ctg_filter f,
      aryspch.c_ctg_item   i,
      aryspch.c_ctg_relate r
    WHERE
      GROUP_ID = 6
      AND filter_name IN ('Item')
      AND f.filter_id = i.filter_id
      AND i.item_id = r.item_id
  ) item
  ,
  (
    SELECT
      item_name,
      chart_id
    FROM
      aryspch.c_ctg_filter f,
      aryspch.c_ctg_item   i,
      aryspch.c_ctg_relate r
    WHERE
      GROUP_ID = 6
      AND filter_name IN ('Product')
      AND f.filter_id = i.filter_id
      AND i.item_id = r.item_id
  ) product
  ,
  (
    SELECT DISTINCT
      chartid,
      graphtype
    FROM
      aryspch.spchis
    WHERE
      reporttime > SYSDATE - 2
  ) a
  WHERE
        dept.chart_id = proc_id.chart_id
    AND dept.chart_id = item.chart_id
    AND dept.chart_id = product.chart_id
    AND dept.chart_id = a.chartid
)
  spc
LEFT JOIN
(
  SELECT
    viorules,
    mtimestamp,
    chartid
  FROM
    aryspch.oochis
)
  oochis
    ON  spc.chart_id = oochis.chartid
    AND mtimestamp > SYSDATE - 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:25:30.960

一种选择是使用公用表表达式来定义每个子查询，然后将这些命名查询连接在一起。

```
WITH
  dept AS
(
  SELECT
    item_name,
    chart_id
  FROM
    aryspch.c_ctg_filter f,
    aryspch.c_ctg_item i,
    aryspch.c_ctg_relate r
  WHERE
    GROUP_ID = 6 
    AND filter_name IN ('Department')
    AND f.filter_id = i.filter_id
    AND i.item_id = r.item_id
)
,
  proc_id  AS
(
  SELECT
    item_name,
    chart_id
  FROM
    aryspch.c_ctg_filter f,
    aryspch.c_ctg_item   i,
    aryspch.c_ctg_relate r
  WHERE
    GROUP_ID = 6
    AND filter_name IN ('Process_ID')    
    AND f.filter_id = i.filter_id
    AND i.item_id = r.item_id
)
,
  item AS
(
  SELECT
    item_name,
    chart_id
  FROM
    aryspch.c_ctg_filter f,
    aryspch.c_ctg_item   i,
    aryspch.c_ctg_relate r
  WHERE
    GROUP_ID = 6
    AND filter_name IN ('Item')
    AND f.filter_id = i.filter_id
    AND i.item_id = r.item_id
)
,
  product AS
(
  SELECT
    item_name,
    chart_id
  FROM
    aryspch.c_ctg_filter f,
    aryspch.c_ctg_item   i,
    aryspch.c_ctg_relate r
  WHERE
    GROUP_ID = 6
    AND filter_name IN ('Product')
    AND f.filter_id = i.filter_id
    AND i.item_id = r.item_id
)
,
  a AS
(
  SELECT DISTINCT
    chartid,
    graphtype
  FROM
    aryspch.spchis
  WHERE
    reporttime > SYSDATE - 2
)
,
  spc AS
(
  SELECT
    'ARRAY' process_stage,
     dept.item_name department_name,
     dept.chart_id,
     proc_id.item_name process_id,
     item.item_name,
     product.item_name product_id, 
     graphtype
  FROM 
    dept,
    proc_id,
    item,
    product,
    a
  WHERE
        dept.chart_id = proc_id.chart_id
    AND dept.chart_id = item.chart_id
    AND dept.chart_id = product.chart_id
    AND dept.chart_id = a.chartid
)
,
  oochis AS
(
  SELECT
    viorules,
    mtimestamp,
    chartid
  FROM
    aryspch.oochis
)

SELECT distinct
  department_name CTG_DEPARTMENT,
  chart_id SPC_CHART_ID,
  concat(process_id, concat('-', item_name)) MONITOR_ITEM,
  product_id CTG_PRODUCT, 
  graphtype SPC_GRAPH_TYPE,
  CASE WHEN viorules LIKE '%9%'  THEN 'OOS'
       WHEN viorules LIKE '%10%' THEN 'OOS'
       WHEN viorules IS NULL     THEN 'OK'
                                 ELSE 'OOC' END SPC_STATUS,
  process_stage,
  'L8B' fab_name 
FROM
  spc
LEFT JOIN
  oochis
    ON  spc.chart_id = oochis.chartid
    AND mtimestamp > SYSDATE - 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:21:43.100

您可以为每个“来自”内容创建一个视图 [http://msdn.microsoft.com/en-us/library/ms187956.aspx](http://msdn.microsoft.com/en-us/library/ms187956.aspx) (CREATE VIEW (Transact-SQL))，并在视图上执行选择。

# java - Java 认为 C:\ 驱动器是隐藏的？

> ID：11862212
> 
> 赞同：2
> 
> 时间：2012-08-08T10:06:48.813
> 
> 标签：java, file, undefined-behavior

我认为最好先说明情况。

## 情况

我正在编写一些过滤 a `Set`of `File`s 的软件。

过滤器如下：如果文件未隐藏，则将其添加到新的`Set`.

问题是当前的行为`File.isHidden()`如下：

```
File f = new File("C:\Documents and Settings\Administrator\Local Settings\Temp\REG28E.tmp");
System.out.println(f.isHidden()); 
```

该程序将输出`false`.

文件本身 ( `REG28E.tmp`) 实际上并未隐藏。*相反，它的路径中*的某个文件夹是隐藏的 ( `Local Settings`)。

我想创建一些代码来检查：

如果文件路径的某处被隐藏，则文件被标记为隐藏。

我想出了以下解决方案来递归检查文件的路径：

```
boolean hidden = file.isHidden();
File parentFile = file.getParentFile();
while ((hidden == false) || (parentFile != null)) {
    hidden = parentFile.isHidden();
    parentFile = parentFile.getParentFile();
}

if (!hidden) {
    acceptedFileList.add(file);
} 
```

## 问题

最后，我们来解决问题。我永远无法达到我实际添加文件的阶段。问题是 Java 认为 C:\ 驱动器**本身**是隐藏的！

我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:26:45.323

我的猜测是您的 while 条件需要`&&`运算符而不是`||`（它可能导致一些 NPE）。
尝试：

```
while (!hidden && (parentFile != null)) {... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:49:20.317

该解决方案涉及添加手动检查以查看`parentFile`对象是否为根目录。

```
while ((hidden == false) && (parentFile != null)) {
    // added the IF statement below:
    if (FileSystemUtils.isRoot(parentFile)) {
        hidden = false;
        break;
    }

    hidden = parentFile.isHidden();
    parentFile = parentFile.getParentFile();
} 
```

* * *

### 检查是否根目录

上面的代码使用了 FileSystemUtils 类。它包含以下方法：

```
public static boolean isRoot(File file) {
    File[] roots = File.listRoots();

    for (File root : roots) {
        if (file.equals(root)) {
        return true;
        }
    }

    return false;
} 
```

感谢所有插话的人...

# c# - 如何将数据表单列的管道分隔 (|) 值拆分为多列

> ID：11862214
> 
> 赞同：0
> 
> 时间：2012-08-08T10:06:58.797
> 
> 标签：c#, .net

我有一个数据表`dtRecords`。它包含一个 column `Token`，其中包含竖线 (|) 分隔的值

例如

```
234|82|91
235|81|90
237|83|95
238|85|98 
```

我希望另一个表中的输出说`dtCompleteRecords`3 列`a, b, c`具有对应的`Token`列的值`dtRecords`。

帮助将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T10:11:28.790

假设你有字符串：

```
string str = "234|82|91 235|81|90 237|83|95 238|85|98" 
```

使用[string.Split](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)获取字符串元素的数组。

```
string[] strArray = str.Split('|'); 
```

稍后您可以在数据表中插入这些值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T10:28:25.020

尝试这个：

```
 var dtCompleteRecords = new DataTable("CompleteRecords");
 dtCompleteRecords.Columns.Add(new DataColumn("a", typeof(string)));
 dtCompleteRecords.Columns.Add(new DataColumn("b", typeof(string)));
 dtCompleteRecords.Columns.Add(new DataColumn("c", typeof(string)));

dtRecords.AsEnumerable()
    .Select(row => row["Token"].ToString().Split('|'))
    .ToList()
    .ForEach(array => dtCompleteRecords.Rows.Add(array)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T10:08:59.093

您正在寻找`Split('|')`适用于字符串的方法。所以例如`myCell.Text.Split('|')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:37:32.033

这将起作用

```
 DataTable dt = yourdatatable;
        DataTable dtable2 = new DataTable();
        dtable2.Columns.Add("column1", System.Type.GetType("System.String"));
        dtable2.Columns.Add("column2", System.Type.GetType("System.String"));
        dtable2.Columns.Add("column3", System.Type.GetType("System.String"));
        string value = "";
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            value = dt.Rows[0][i].ToString();
            string[] splitPipeValue = value.Split('|');
            DataRow drow = dtable2.NewRow();
            drow[0] = splitPipeValue[0].ToString();
            drow[1] = splitPipeValue[1].ToString();
            drow[2] = splitPipeValue[2].ToString();
            dtable2.Rows.Add(drow);
        }
    } 
```

# objective-c - 如何知道 QLPreviewController 是否成功加载文档/加载失败？

> ID：11862215
> 
> 赞同：4
> 
> 时间：2012-08-08T10:07:02.607
> 
> 标签：objective-c, ios

我的 iOS 应用程序使用 QLPreviewController 加载各种文档。我的目标是在文档正确加载时设置一个标志，如果没有则显示错误。

奇怪的是，QLPreviewControllerDelegate 协议没有提供回调来检查这一点，当我尝试加载无效文件时，QLPreviewController 似乎也没有抛出任何异常。

作为记录，我尝试加载无效的 PDF，它只是记录了一条关于无法找到标题的消息并显示了一个空文件。

谁能告诉我如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:22:26.997

If establishing whether an item could be displayed beforehand works for you then a call to the following may be an option:

```
+(BOOL)canPreviewItem:(id<QLPreviewItem>) item 
```

# flash - 使用两个 swc 文件（里面的电影剪辑具有相同的实例名称）；

> ID：11862217
> 
> 赞同：0
> 
> 时间：2012-08-08T10:07:10.000
> 
> 标签：flash, swc

我有两个 SWC 文件 first.swc 和 second.swc 问题：这两个 SWC 文件中的movieclips 具有相同的实例名称（不同之处在于为它们应用的图形）。

**如果它们具有相同的实例名称，我如何从第一个或第二个 SWC 文件中调用影片剪辑。**

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:25:05.090

没门。认为所有 swc 文件中的每个符号都存储在一个 swc 文件中。但是有一个复杂的解决方案：使用像 Maven 这样的工具来构建你的项目。无论如何，我认为你做错了什么。

# php - sh: /sendmail: 没有这样的文件或目录

> ID：11862218
> 
> 赞同：1
> 
> 时间：2012-08-08T10:07:11.953
> 
> 标签：php, linux, sendmail

`sendmail`正在从浏览器工作，但是当我`/usr/bin/php cron.php`从命令行工作时，它会说

```
sh: /sendmail: no such file or directory... 
```

我什至运行了`which`命令，它向我显示了`sendmail`in`/usr/sbin/sendmail`并且`sendmail_path`in`php.ini`是正确的。

为什么要`sendmail`从命令行检查根目录？

附加：我们可以`sendmail`在根`sbin`目录中添加别名（快捷方式）吗？

**编辑：**我坚持使用 sendmail 的原因是标准邮件库不尊重我的返回路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:18:17.743

该`which`命令的工作方式是检查变量`PATH`指向的目录中的给定可执行文件。`PATH`可以使用简单的命令将变量更改为任何所需的值，例如`export PATH=SOMETHING`当您希望它指向不同的事物时。所以我猜如果您的`which`命令指向`/usr/sbin/sendmail`何时从命令行运行并且仍然`cron.php`没有从那里获取它，那么您`cron.php`可能正在更改`PATH`某处的值或者编码出错并且您的代码正在`sendmail`使用绝对路径调用。

首先，确保上面提到的事情是正确的。如果它们是，并且问题仍然存在，正如您所猜测的，您可以[创建一个软链接](http://www.cyberciti.biz/faq/creating-soft-link-or-symbolic-link/)并`/sendmail`指出`/usr/sbin/sendmail`

# c# - 将 gridview 中的客户端 ID 传递给 javascript 函数

> ID：11862225
> 
> 赞同：0
> 
> 时间：2012-08-08T10:07:46.387
> 
> 标签：c#, javascript, asp.net, gridview, modalpopupextender

我有一个动态绑定的gridview。我在每一行都附加了一个链接按钮，它打开了一个模式弹出窗口，我需要显示一些文本，这些文本位于 gridview 的隐藏字段中。

我需要调用一个 javascript 函数，该函数使用隐藏字段的文本在弹出面板中设置标签的值。问题是显示弹出窗口时该值始终为空白。

Java 脚本代码是 -

```
 function SetNotesonModal(note)
   {
        //debugger;
        var notes = document.getElementById(note.id).innerHTML;
        document.getElementById('ctl00_ContentPlaceHolder1_popupLblNote').value = notes;
   } 
```

调用函数的代码是 -

```
lnkViewNotes.Attributes.Add("OnClick", "return SetNotesonModal(" + e.Row.FindControl("lblNote").ClientID + ");"); 
```

gridview 中的控件如下：

```
<ItemTemplate>
     <asp:Label ID="lblNote" runat="server" Text='<%# Bind("notes") %>'></asp:Label>
     <asp:LinkButton ID="lnkViewNotes" runat="server">View</asp:LinkButton>
     <asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="lnkViewNotes" PopupControlID="Panel2" CancelControlID="popupBtnClose">
     </asp:ModalPopupExtender>
</ItemTemplate> 
```

弹出面板是 -

```
<asp:Panel ID="Panel2" runat="server" ScrollBars="Auto" align="center" Style="display: none"
    CssClass="modalPopup">
    <table class="border" style="text-align: left; height: 100%" width="100%">
        <tr align="left" style="background-color: #5D7B9D; color: White">
            <th>
                Notes
            </th>
        </tr>
        <tr>
            <td>
                <asp:Label ID="popupLblNote" runat="server"></asp:Label>
            </td>
        </tr>
        <tr>
            <td>
                <asp:Button ID="popupBtnClose" runat="server" Text="Close" />
            </td>
        </tr>
    </table>
</asp:Panel> 
```

javascript函数被完美调用，它也正确设置了弹出面板中标签的值，但不确定为什么每次弹出窗口都是空白的。

欢迎任何形式的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:13:18.037

对于每个不应触发回发的链接按钮或按钮您应该尝试添加：

```
OnClientClick="return false;" 
```

还可以看看[使用 jquery 的回发](https://stackoverflow.com/questions/6812168/why-doesnt-returning-false-from-onclientclick-cancel-the-postback)

# html - 浏览器渲染能力、限制和标准

> ID：11862227
> 
> 赞同：0
> 
> 时间：2012-08-08T10:07:48.847
> 
> 标签：html, css, internet-explorer, firefox, google-chrome

我需要很好的参考来了解浏览器在呈现 HTML/CSS 方面的差异。以及每个浏览器的限制。

任何人都可以帮忙吗？非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:12:26.803

这是一个很大的问题，但对于 html5，您可以使用此网页； [http://html5test.com/compare/browser/index.html](http://html5test.com/compare/browser/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:09:41.387

已经（大部分）已解决的问题： http: [//modernizr.com/](http://modernizr.com/)可以为您做到这一点。

# android - android删除圆角视图的默认边框

> ID：11862230
> 
> 赞同：2
> 
> 时间：2012-08-08T10:07:57.630
> 
> 标签：android, android-layout, android-widget

我有一个有 2-3 个孩子的布局。使用 android:background 属性将线性布局背景设置为以下可绘制对象。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<solid android:color="#373949"/>
<stroke android:width="3dip" android:color="#FFF"/>
<corners android:radius="30dip" />
<padding android:left="10dip" android:top="10dip" android:right="10dip" android:bottom="10dip" />
</shape> 
```

但是当将半径设置为 30dip 时，会显示圆角，但会返回布局默认的灰色矩形边框。有没有办法摆脱它？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:15:16.350

试试这个代码

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#FFFFFFFF"/>
    <corners android:radius="15px"/>
    <padding android:left="0dp" android:top="0dp" android:right="0dp" android:bottom="0dp" /> 
</shape> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:13:16.480

一旦你改变了视图的背景，这个drawable将不再激活绘制UI，因此视图的默认布局将适用，所以如果你想要灰色布局也被舍入，制作另一个drawable，然后设置那个drawable灰色的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:18:27.373

您看到的圆角边框是您更改背景的布局的父级。如果您的自定义背景属于您的活动，那么您看到的灰色属于系统。您可以使用[层次结构查看器](http://developer.android.com/tools/help/hierarchy-viewer.html)。要详细看。你也可以参考[这个](http://developer.android.com/training/improving-layouts/optimizing-layout.html)供你参考。

# windows - 如何更改 ftp“网络驱动器”的 Windows 7 默认视图？

> ID：11862234
> 
> 赞同：2
> 
> 时间：2012-08-08T10:08:10.250
> 
> 标签：windows, view, ftp, default, drive

我通过使用“映射为网络驱动器”在 Windows 7 中添加了一个 FTP 连接。这很好用。但是没有将默认视图从“tiles”更改为“details”的工作可能性。它总是切换回“瓷砖”。在搜索、尝试和更改注册表项后，行为没有改变。我喜欢这个功能，但我讨厌这个愚蠢的不可更改的默认视图。

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:12:10.307

您是否尝试过（切换到 后`details`）：

工具 -> 文件夹选项 -> 查看 -> 应用到文件夹

# java-me - 如何在 LWUIT 选项卡上显示表单屏幕？

> ID：11862237
> 
> 赞同：-1
> 
> 时间：2012-08-08T10:08:13.923
> 
> 标签：java-me, lwuit, nokia

我在表单上有列表项，当用户单击选项卡时，我必须在选项卡上显示该表单。

如何将该表单添加到选项卡，之后`form.show()`或之前？

我需要在表单屏幕中默认显示第一个选项卡吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:33:17.543

您可以在选项卡中显示表单。表单也是一个组件。

```
Form frmObj = new Form("Tabs Example");
Form frmOne = new Form("One");
Form frmTwo = new Form("Two");

Tabs tabObj = new Tabs();
tabObj.addTab("Form One",frmOne);
tabObj.addTab("Form Two",frmTwo );
frmObj.addComponent(tabObj);
frmObj.show(); 
```

# google-chrome - chromium 作为桌面应用程序容器

> ID：11862245
> 
> 赞同：5
> 
> 时间：2012-08-08T10:08:44.773
> 
> 标签：google-chrome, web-applications, chromium, google-chrome-os

我想开发一个桌面应用程序，但我想将 Web 技术用于表示层。由于某些原因，我不想使用 Adob​​e AIR。所以，我想为什么不在我安装的 Web 应用程序中包含铬。最终的软件包将包括一个启动器，该启动器将启动一个嵌入式码头服务器，并将直接使用应用程序打开包含的 chromium bworser。你觉得可以实现吗？我不是 Firefox 的粉丝，但它可能是铬的更好替代品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:43:34.260

我认为这是非常可行的......我会从[Electron](https://electron.atom.io/)开始，它是一个使用 JavaScript、HTML 和 CSS 等 Web 技术创建本机应用程序的框架。它负责处理困难的部分，因此您可以专注于应用程序的核心。如今，它（也）看起来像“标准”。所有这些都将其用作他们的桌面应用程序：

*   松弛
*   Atom（GitHub 编辑器）
*   WordPress 应用程序
*   Visual Studio Code（我现在正在使用的强大编辑器）
*   WhatsApp（他们的桌面应用程序使用 React 并使用 Electron 进行包装）。

最后但同样重要的是，请查看：[http](http://www.youtube.com/watch?v=j8oFAr1YR-0) ://www.youtube.com/watch?v=j8oFAr1YR-0 它包含启动和构建应用程序所需的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-19T15:55:25.623

> [Electron 框架](https://github.com/electron/electron)允许您使用 JavaScript、HTML 和 CSS 编写跨平台的桌面应用程序。它基于 Node.js 和 Chromium，由 Atom 编辑器和许多其他应用程序使用。

从[快速](https://github.com/electron/electron/blob/master/docs/tutorial/quick-start.md)入门文档：

> Electron 通过提供具有丰富的原生（操作系统）API 的运行时，使您能够使用纯 JavaScript 创建桌面应用程序。您可以将其视为 Node.js 运行时的变体，专注于桌面应用程序而不是 Web 服务器。
> 
> 这并不意味着 Electron 是与图形用户界面 (GUI) 库的 JavaScript 绑定。相反，Electron 使用网页作为其 GUI，因此您也可以将其视为由 JavaScript 控制的最小 Chromium 浏览器。

要快速将其安装为开发依赖项：

```
npm install electron --save-dev 
```

# c# - 绘制的线未显示在组合框上

> ID：11862252
> 
> 赞同：2
> 
> 时间：2012-08-08T10:09:13.647
> 
> 标签：c#, winforms, combobox, system.drawing

我需要您在以下问题上的帮助（使用 .Net 3.5 和 Windows 窗体）：

我只是想在位于表单上的组合框（Windows 窗体）的中间画一条线。我使用的代码是：

```
void comboBox1_Paint(object sender, PaintEventArgs e)
{
  e.Graphics.DrawLine(new Pen(Brushes.DarkBlue),
                      this.comboBox1.Location.X,
                      this.comboBox1.Location.Y + (this.comboBox1.Size.Height / 2),
                      this.comboBox1.Location.X + this.comboBox1.Size.Width,
                      this.comboBox1.Location.Y + (this.comboBox1.Size.Height / 2));
} 
```

要触发绘画事件：

```
private void button1_Click(object sender, EventArgs e)
{
  comboBox1.Refresh();
} 
```

当我执行代码并按下按钮时，不会画线。在调试中，绘制处理程序处的断点没有被命中。奇怪的是，在[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox_events%28v=vs.90%29)上 ComBox 的事件列表中有一个绘制事件，但在 VS 2010 IntelliSense 中并没有在 ComboBox 的成员中找到这样的事件

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:26:46.340

```
public Form1() 
{
  InitializeComponent();
  comboBox1.DrawMode = DrawMode.OwnerDrawFixed;
  comboBox1.DrawItem += new DrawItemEventHandler(comboBox1_DrawItem);
}

void comboBox1_DrawItem(object sender, DrawItemEventArgs e) {
  e.DrawBackground();
  e.Graphics.DrawLine(Pens.Black, new Point(e.Bounds.Left, e.Bounds.Bottom-1),
    new Point(e.Bounds.Right, e.Bounds.Bottom-1));
  TextRenderer.DrawText(e.Graphics, comboBox1.Items[e.Index].ToString(), 
    comboBox1.Font, e.Bounds, comboBox1.ForeColor, TextFormatFlags.Left);
  e.DrawFocusRectangle();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:29:19.130

`Paint`事件不会触发。
您想要的只有在以下情况下才有可能`DropDownStyle == ComboBoxStyle.DropDownList`：

```
 comboBox1.DrawMode = DrawMode.OwnerDrawFixed;
        comboBox1.DropDownStyle = ComboBoxStyle.DropDownList;
        comboBox1.DrawItem += (sender, args) => 
        {
            var ordinate = args.Bounds.Top + args.Bounds.Height / 2;
            args.Graphics.DrawLine(new Pen(Color.Red), new Point(args.Bounds.Left, ordinate),
                new Point(args.Bounds.Right, ordinate));
        }; 
```

这样您就可以自己绘制选定的项目区域。

# r - Read.table 无法获取所有数据行

> ID：11862254
> 
> 赞同：0
> 
> 时间：2012-08-08T10:09:24.210
> 
> 标签：r

当我使用 read.table 获取数据时，有一件奇怪的事情。

```
data=read.table('/home/tiger/nasdaqlisted.txt',head=T,sep='|')
dim(data)
[1] 750   6 
```

实际上，文件中有2454行，有什么问题吗？
[http://freeuploadfiles.com/bb3cwypih2d2](http://freeuploadfiles.com/bb3cwypih2d2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T10:34:27.383

我认为问题在于某些名称包含引号字符`'`（在名称中，例如`Angie's List, Inc.`）。`read.table`要`quote`正确`"\"'"`读取数据，需要更改默认参数。

```
read.table("path/to/file", header=TRUE, sep="|", quote="") 
```

根据@mrdwab 的建议，默认参数`read.delim`无需任何更改即可工作：`"\""``quote`

```
read.delim("path/to/file", header=TRUE, sep="|") 
```

# apache - 为 osm2po 配置 apache

> ID：11862255
> 
> 赞同：0
> 
> 时间：2012-08-08T10:09:28.717
> 
> 标签：apache

我已经运行了 osm2po，它说我可以在“http://localhost:8888/Osm2poService”上看到输出。

但是，我在 Ubuntu 服务器上运行它，并且想从我的台式计算机上查看该页面。

在服务器上，我打开了 8888 端口，但是当我输入 url “http://192.168.7.66/Osm2poService”时，我的桌面浏览器中仍然什么也看不到。我需要配置 apache 才能查看此页面吗？

非常感谢

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:19:42.507

看看`osm2po.config`：

改变

> service.domain = 本地主机

至

> 服务域 = 192.168.7.66

# c# - Nhibernate : 直接更新子实体而不反向

> ID：11862261
> 
> 赞同：0
> 
> 时间：2012-08-08T10:09:41.577
> 
> 标签：c#, .net, nhibernate, fluent-nhibernate

我正在使用流利的 nhibernate 将父子关系映射到 sql 数据库。
大多数时候，我让父实体保存它的子实体，它们被插入到 1 个事务中，如果我没记错的话，如果我使用 .Inverse() 和 sql 标识列，这是不可能的。

我遇到的问题是，在一种特定情况下，我想更新子实体并且只更新子实体。
当我使用当前设置执行此操作时，子记录将失去与其父对象的关系（如果父对象为空）或将完全替换我的父对象（如果我插入一个只有一个 id 的虚拟父对象）。

有谁知道在不影响外键的情况下实现单个记录更新的方法？
我可以想到手动 sql 语句或存储过程，但我希望有一种休眠方式。

我有以下设置（为方便起见进行了简化）：

```
public ProjectMap()
{
  Table("Project");
  Id(p=> p.Id);
  HasMany(p => p.Risks).Not.LazyLoad();
}

public RiskMap()
{
  Table("ProjectRisk");
  Id(r=> r.Id);
  References(r => r.Project).Column("ProjectId");
  Map(r => r.Description);
}

public class Project
{
  public virtual int Id { get; set; }
  public virtual IList<Risk> Risks { get; set; }
}

public class Risk
{
  public virtual int Id { get; set; }
  public virtual string Description{ get; set; }
  public virtual Project Project { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:37:24.633

正如 Miroslav 建议的那样，我现在正在使用 HQL 更新语句。

这对我的口味来说有点乱，但它完成了工作。

```
Session.CreateQuery("update Risk set Closed = :completed where Id = :id")
                    .SetInt32("id", id)
                    .SetBoolean("completed", completed)
                    .ExecuteUpdate(); 
```

# drupal - 如何编辑默认的 drupal 节点视图页面

> ID：11862262
> 
> 赞同：0
> 
> 时间：2012-08-08T10:09:45.280
> 
> 标签：drupal

我正在**尝试**在**Drupal**中**编辑****节点**的默认**页面视图**，我找到了调用的文件，但**即使**我**更改它**，站点上的**节点页面****也没有更新**......****`node.tpl.php`****

 ******那么如何更新节点视图页面，以便添加一些文本、图像等？

我猜那`node_show function () { }`是显示节点的那个，但是那里的代码没有给我足够的关于 HTML 的创建位置的详细信息，所以我可以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:13:33.410

您需要将文件复制到主题的模板文件夹并清除缓存，然后才能使用此文件。原始文件应位于`root/modules/node/`

`node.tpl.php`您还可以通过复制默认文件并将其重命名为来为特定内容类型设置模板`node--CONTENT_TYPE_MACHINE_NAME.tpl.php`******

# iphone - 如何在 iPhone 的网络服务器上上传最大 5 mb 的 mp3 文件

> ID：11862273
> 
> 赞同：0
> 
> 时间：2012-08-08T10:10:21.187
> 
> 标签：iphone, objective-c, ios, web-services

我想将我的 iPhone 应用程序中的音频文件上传到网络服务器，但是当我将其转换为 NSData 时，转换最多需要 30 到 40 分钟，所以你能提供更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:36:20.300

1).将音频文件转换为 NSData：

```
NSString *audioFilePath = @""; // local path where audio stored
NSData *audioData = [[NSData alloc] initWithContentsOfFile:audioFilePath]; 
```

2).上传音频文件：

```
NSString *audioName = @"myAudio.caf";
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"http://someurl.aspx"]];    
[request addData:audioData withFileName:audioName andContentType:@"audio/caf" forKey:@"audioFile"];
[request setDelegate:self];
[request setTimeOutSeconds:500];
[request setDidFinishSelector:@selector(uploadRequestFinished:)];
[request setDidFailSelector:@selector(uploadRequestFailed:)];
[request startAsynchronous];

- (void)uploadRequestFinished:(ASIHTTPRequest *)request
{
    UIApplication* app = [UIApplication sharedApplication];
    app.networkActivityIndicatorVisible = NO;   
    NSData *webData = [[NSData alloc] initWithData:[request responseData]];
    NSString *strEr =  [[NSString alloc] initWithData:webData encoding:NSUTF8StringEncoding];
}

- (void) uploadRequestFailed:(ASIHTTPRequest *)request
{
    NSLog(@"responseStatusCode %i",[request responseStatusCode]);
    NSLog(@"responseString %@",[request responseString]);
    NSError *error = [request error];
    UIApplication* app = [UIApplication sharedApplication];
    app.networkActivityIndicatorVisible = NO;   
} 
```

# javascript - 使用 javascript 时的图像缓存

> ID：11862288
> 
> 赞同：0
> 
> 时间：2012-08-08T10:11:23.257
> 
> 标签：javascript, asp.net

它在这个示例中使用 javascript 的常见地方：

示例：[http ://www.htmlite.com/JS019.php](http://www.htmlite.com/JS019.php)

我的问题是：第二张图片是每次下载还是在页面第一次加载时缓存。如果是这样，服务器如何知道缓存图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:45:00.097

您是在询问图像是缓存在浏览器中还是在服务器中？

在这两种情况下，如果缓存打开，答案都是肯定的。

基本上，您的服务器在收到来自客户端的要求下载此图像的请求时，知道必须将图像放入缓存中。因此，无论是否在您的 HTML 页面上使用 javascript，行为都是相同的。显然，这只适用于在服务器上激活缓存的情况。

# java - Java在char上拆分字符串

> ID：11862293
> 
> 赞同：0
> 
> 时间：2012-08-08T10:11:44.303
> 
> 标签：java, split

我有以下字符串：

```
<stx>1<rs>aaaa<rs>bbbb<rs>cccc<etx> 
```

如何以在数组中得到 1,aaaa,bbbb,cccc 的方式拆分它？

我尝试拆分，`<rs>`但后来我进入`<stx>1,aaaa,bbbb,cccc`了我的数组。

那么我该如何摆脱`<stx>`呢？

`stx`，`rs`并且`etx`是字符顺便说一句。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T10:15:27.767

您可以使用以下正则表达式进行[拆分：](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

```
<\w+> 
```

在 Java 中使用它时，不要忘记转义`\`：

```
String[] splitted = myString.split("<\\w+>"); 
```

# image - 完整的在线系统备份 Debian

> ID：11862296
> 
> 赞同：0
> 
> 时间：2012-08-08T10:11:59.480
> 
> 标签：image, backup, system, debian

我不熟悉 linux 和 debian 系统，我最常使用 Windows 计算机。但是我的一个客户使用 debian linux web 服务器，我需要升级服务器的 raid 阵列。

在我对服务器做任何事情之前，我需要一个完整的系统备份。我通过互联网搜索解决方案以及此站点，但我没有找到可接受的答案。

我需要类似 LVM 快照之类的东西，但我不想为了备份而将所有内容都转换为 LVM 分区。我发现DD可以一点一点地复制硬盘，但是我应该为它卸载驱动器并且我没有太多的离线服务。重新配置raid就足够离线了。我找到了像 TAR 这样的解决方案必要的文件并通过 SSH 发送，但它不是完整的系统备份。我每个月都会备份文件和设置。我需要一个解决方案，为紧急情况制作一个易于恢复的服务器图像文件。如果 raid 配置失败，我将需要 SOS 将整个系统恢复到旧配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:37:35.300

You should use [rsync](https://en.wikipedia.org/wiki/Rsync).

It's not a snapshot, but if you don't want to use LVM, it's a start.

# java - Solr 按距离和新鲜度排序

> ID：11862297
> 
> 赞同：0
> 
> 时间：2012-08-08T10:12:01.073
> 
> 标签：java, solr, lucene, distance

我将 Solr 用于我的移动应用程序，它运行良好。目前，我使用 Solr 搜索用户，按距离排序。但现在我想提升更新鲜的结果，并将最旧的结果留在结果末尾。

我的架构中有一个 last_active_datetime 字段，不是多值的：

```
<field name="last_active_datetime"  type="date" indexed="true" stored="true" multiValued="false" /> 
```

如何按距离对结果进行排序并将旧结果留在最后？在我这样做之前：

```
sort=geodist()asc 
```

现在，我正在尝试这个：

```
sort=geodist()asc, last_active_datetime desc 
```

但我看不出结果有什么不同。我必须对排序字段进行加权吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:10:05.797

这很容易：

1.  如果您还没有使用它，请使用[edismax 解析器](http://wiki.apache.org/solr/ExtendedDisMax)
2.  现在你可以用 bf 加权分数，所以提升更接近的文档，见[这里](http://wiki.apache.org/solr/SpatialSearch/)
3.  并提升最近的文件，请参阅[这个 SO question](https://stackoverflow.com/questions/1486963/solr-boost-function-bf-to-increase-score-of-documents-whose-date-is-closest)

# spring - Spring容器-空参数的注释

> ID：11862299
> 
> 赞同：0
> 
> 时间：2012-08-08T10:12:09.157
> 
> 标签：spring, dependency-injection

在我使用 Spring 容器的应用程序中，我创建了自己的注解，并且我希望在运行时获取使用我的注解进行注解的类的 Class 对象。为此，我想利用 Spring 容器。

在我的 .xml 配置文件中，我把

```
<context:component-scan base-package="some.package" >
   <context:include-filter type="annotation" expression="some.package.Question" />
</context:component-scan> 
```

所以用我的 Question 注释注释的类被 Spring 检测到。问题是这些类没有参数构造函数，所以现在我有 2 个选项：

1.  在这些类中定义无参数构造函数
2.  在 .xml 中定义 bean 并使用 constructor-arg

但是是否可以用一些注释来注释构造函数参数，所以 Spring 会知道它需要`null`在创建 bean 期间传递值？

此外，这些 bean 将具有原型范围，并且从应用程序的角度来看，在创建 bean 期间不知道构造函数参数的内容。

编辑：我不得不使用`@Value("#{null}")`注释构造函数参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:26:57.207

我认为您使用无参数构造函数的第一个建议听起来更清晰-原因是，从您的角度来看，即使实例变量具有空值，创建的对象也被认为已正确初始化-这可以通过使用默认构造函数来表示

如果无法更改，您使用 @Value("#{null}") 的方法也有效，我能够在测试用例中进行测试：

```
@MyAnnotation
public class Component1 {
    private String message;

    @Autowired
    public Component1(@Value("#{null}") String message){
        this.message = message;
    }

    public String sayHello(){
        return this.message;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:57:06.350

这可能不是您想要的，但是如果您想重用 Spring 的类路径扫描器并将其包装在您自己的实现中，您可以使用以下内容；

```
Class annotation = [your class here ];
String offsetPath = [your path here ];

// Scan a classpath for a given annotation class
ClassPathScanningCandidateComponentProvider scanner = new ClassPathScanningCandidateComponentProvider(false);

// MZ: Supply the include filter, to filter on an annotation class
scanner.addIncludeFilter(new AnnotationTypeFilter(annotation));

for (BeanDefinition bd : scanner.findCandidateComponents(offsetPath))
{
    String name = bd.getBeanClassName();
    try
    {
        Class classWithAnnotation = Class.forName(name);

    }
    catch (Exception e)
    {
        //Logger.fatal("Unable to build sessionfactory, loading of class failed: " + e.getMessage(), e);
        return null;
    } 
```

# emacs - 自动插入模式在完整路径上定义

> ID：11862306
> 
> 赞同：1
> 
> 时间：2012-08-08T10:12:35.193
> 
> 标签：emacs, dot-emacs

我正在寻找一种方法来告诉自动插入模式在文件路径上使用不同的模板（不仅在文件扩展名上）。

我希望在目录 */meetings 下创建的所有 .org 文件都具有定义的模板。

以下设置不起作用：

```
(auto-insert-mode)  
(setq auto-insert-directory "~/org/template/") ;;; *NOTE* Trailing slash important
(setq auto-insert-query nil) ;;; If you don't want to be prompted before insertion
(define-auto-insert "\/meetings/\.org" ".meetings_template.org")
(define-auto-insert "\.org" ".template.org") 
```

你有想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:22:58.080

名称与正则表达式匹配。你给会议的那个不是你想做的。试试这个：`"/meeting/.*\\.org"`

# javascript - jquery DataTable 数据格式和警告 - 添加的数据与已知列数不匹配

> ID：11862309
> 
> 赞同：0
> 
> 时间：2012-08-08T10:12:53.940
> 
> 标签：javascript, jquery, json, jquery-plugins, datatables

我有一个将 json 数据加载到 jquery dataTable 中的函数

```
(...)
success: function (response) { LoadData(response.d); }
(...)

function LoadData(data)
        {
            $('#tableAnalysis').dataTable({
            "aaData" : data
            });
        } 
```

我的“数据”如下所示：

```
{"d":[{"Key":"sometext","Value":891},{"Key":"someothertext","Value":287},{"Key":"moretext..","Value":233}]} 
```

我的 html 表如下所示：

```
<table id="tableAnalysis">
  <thead>
    <tr>
      <th>Label</th>
      <th>Frequency</th>
    </tr>
 </thead>
 <tbody>
    <tr>

    </tr>
  </tbody>
</table> 
```

我不断收到“警告 - 添加的数据与已知的列数不匹配”。

我应该如何处理我的“数据”以便采用正确的数据表格式？什么是正确的格式？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:36:18.713

尽管您可以将数组传递给 aaData，但我认为您不能以您正在做的方式将 JSON“对象”传递给它。您只能传递一个直接数组或对象数组。但是您不需要执行 Ajax 调用然后填充 aaData，因为 DataTables 本身已经具有内置的 Ajax 功能。要执行 Ajax 数据检索然后显示它，您可以在 dataTable() 函数本身内完成所有操作：

```
$(document).ready( function() {
  $('#tableAnalysis').dataTable( {
    "sAjaxSource": "http://someurl.com/someresource.jsp" // obviously, a fake URL
  });
}) 
```

预期格式为 JSON。但是，它期望 JSON 以某种方式格式化，包括使用 aaData 参数，该参数将以预期的方式包含数据（只是更多的 JSON）。

整理好之后，您可能需要检查数据集是否与可用列数 (2) 匹配，但在将预期数据传递给 dataTable() 函数之前，没有必要为此担心太多。

所以，关于数据。你可以在这里看到一个例子：http: [//datatables.net/release-datatables/examples/data_sources/ajax.html](http://datatables.net/release-datatables/examples/data_sources/ajax.html)

如果你走这`sAjaxSource`条路，你的数据也需要与你正在做的不同的格式：

```
{
    "aaData": [
        [
            "sometext",
            891
        ],
        [
            "someothertext",
            287
        ],
        [
            "moretext",
            233
        ]
    ]
} 
```

如果您的资源返回以这种方式格式化的数据，我不明白为什么它不起作用。我的一部分担心`<tr>`不包含的元素，`<td>`但我没有仔细检查这方面的要求。

* * *

顺便说一句：对于您的原始 JSON，您对 JavaScript 键值对的创建方式存在一些误解。例如，您有一个名为“Key”的键，其值为“sometext”，然后是另一个名为“Value”的键，其值为“891”。我想你可以通过多种方式使用这个模式，但它的语义开始变得混乱。;-) 大多数情况下，您不会将密钥称为“密钥”，它只是*密钥*：

```
{
  "name" : "Greg",
  "species" : "monkey",
  "level" : 9000
} 
```

在这个关联数组中，冒号左侧的所有内容都是键，右侧的所有内容都是值。

# c# - 带有键列表的 where 语句

> ID：11862310
> 
> 赞同：0
> 
> 时间：2012-08-08T10:12:58.477
> 
> 标签：c#, linq, entity-framework

我的问题是我无法让`Where`语句与 Entity Framework 一起正常工作。

我有一个类，它具有定义数据库中的一行的属性`int`。`long`让我们称这些属性`Id`为 &`Parent`

```
public class Update
{
    public long Id { get; set; }
    public int Parent { get; set; }
} 
```

然后我有这些更新的列表，我希望每个数据库行都应该匹配列表中的那些更新（**两个属性**）。

我尝试过的是，我将这些更新转换为匿名类型，并尝试仅查找那些具有完美匹配的行：int 和 long 都是相同的。

```
// anon type
var mapping = updates.Select(o => new { id = o.Id, parent = o.Parent}).ToList();
var results = from fa in Uvw_MyTable 
              // PROBLEMATIC WHERE
              where mapping.Contains(new { id = fa.Id, parent = fa.Parent })
              select new { fa }; 
```

但不幸的是，我总是收到一个错误：*无法创建“匿名类型”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。*

我也试过这样使用`Any`：

```
where mapping.Any(a => fa.Id == a.id && fa.Parent == a.parent) 
```

但我得到同样的错误。当我使用对象列表时也会发生同样的事情`Update`。*无法创建“xxx.Update”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。*

任何想法如何解决这个问题？

## 更新

这个完全相同的查询在 LINQPad 4 中运行良好

## 更新 2

问题与这个[问题](https://stackoverflow.com/questions/879411/entity-framework-unable-to-create-a-constant-value-of-type-closure-type)有关吗？

## 更新 3

正如 Maarten 指出的那样，这个问题需要使用不同方法来重新产生相同结果的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:20:42.347

我不确定我是否正确理解了您的代码/问题，但在我看来，这样的事情应该有效：

```
var results = from fa in Uvw_MyTable 
                    where updates.Any(u => u.Id fa.Id && u.Parent = fa.Parent)
                    select fa; 
```

我不清楚您希望使用的行为`OtherTable`是什么，但是上面 linq 表达式的一般形式比您使用的要有效得多。

关键是您不需要创建匿名类型来比较多个字段；因此第一个 select (into `mapping`) 是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:10:09.937

您实际上是在代码中执行两个查询。

第一个查询是：

```
var mapping = updates.Select(o => new { id = o.Id, parent = o.Parent}).ToList(); 
```

第二个查询是（好的，查询没有迭代，所以从技术上讲，查询还没有在这里执行 - 挑剔）：

```
var results = from fa in Uvw_MyTable 
              where mapping.Contains(new { id = fa.Id, parent = fa.Parent })
              select new { fa }; 
```

由于您使用的是 ToList() 方法，因此第一个查询是在您的单个语句中定义和执行的。由于现在这是一个对象列表，而不是 IQueryable，EF 无法将其转换为 SQL。您必须将其保留为 IQueryable。如果将其更改为以下内容，它应该可以工作。

```
var mapping = updates
    .Select(o => new { id = o.Id, parent = o.Parent}); // NOT ToList() !!
var results = from fa in Uvw_MyTable 
              where mapping.Contains(new { id = fa.Id, parent = fa.Parent })
              select new { fa }; 
```

为了解释 EF 给出的错误 - EF 只能将 IQueryable 转换为 SQL，或将原始类型（整数、字符串等）转换为参数。EF 无法将对象转换为 SQL，因为它无法以有意义的方式将对象的值传输到数据库。

* * *

更新：

The first query (I see now) is not a query at all, it's source is a variable called updates. If this is a list of objects in-memory, than this query cannot be translated as such, and you have to redesign you query (for example, loading Uvw_MyTable is memory). If 'updates' is an IQueryable (from the same context), than my answer given above should work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:58:51.067

在实体框架或 Linq to sql 中，linq 查询最终会被翻译成 sql 查询。当您使用不可转换为 sql 的类型或类时，您的 linq 查询无法转换为 sql 查询。

# javascript - 从其 iframe 子项开始拖动父项

> ID：11862313
> 
> 赞同：2
> 
> 时间：2012-08-08T10:13:06.700
> 
> 标签：javascript, jquery, iframe, drag-and-drop, draggable

我有这样的东西

```
<div draggable="true">
<iframe width="640" height="360" src="http://www.youtube.com/watch?v=dQw4w9WgXcQ?fs=1&amp;feature=oembed" frameborder="0" allowfullscreen="">
</iframe>
</div> 
```

当我开始拖动时，我希望能够通过单击 div 上的任意位置（包括 iframe）来拖动整个 div。但是 iframe 不会级联事件。我还想保持与 youtube 视频的互动（播放、全屏等）。

有谁知道如何用 html/css/js/jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:29:38.637

在这里你有一个你想要的近乎的例子......只需稍微修复它

```
#dra
{
    width:560px;
    height:315px;
    border:1px solid green;
    cursor:pointer;

}

#dra:hover iframe
{
    z-index:-1;position:absolute;
} 
```

```
<div id="dra"><iframe  width="560" height="315" src="http://www.youtube.com/embed/T6s3d2wdXVg" frameborder="0" allowfullscreen></iframe></div> 
<script>
$( "#dra" ).draggable({stop: function() {

                $( "iframe" ).css('z-index','0');
            }});

</script> 
```

# c# - 更改 WinForm 中标题栏的颜色

> ID：11862315
> 
> 赞同：57
> 
> 时间：2012-08-08T10:13:12.183
> 
> 标签：c#, .net, winforms

是否可以在 C# 中更改 WinForm 标题栏的颜色？

```
 __________________________
         [Form1_______________-|[]|X] <- I want to change the color of this
         |                          |
         |                          |
         |                          |
         |__________________________| 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-18T08:05:43.063

我解决了这个问题。这是代码：

```
[DllImport("User32.dll", CharSet = CharSet.Auto)]
public static extern int ReleaseDC(IntPtr hWnd, IntPtr hDC);

[DllImport("User32.dll")]
private static extern IntPtr GetWindowDC(IntPtr hWnd);

protected override void WndProc(ref Message m)
{
    base.WndProc(ref m);
    const int WM_NCPAINT = 0x85;
    if (m.Msg == WM_NCPAINT)
    {
        IntPtr hdc = GetWindowDC(m.HWnd);
        if ((int)hdc != 0)
        {
            Graphics g = Graphics.FromHdc(hdc);
            g.FillRectangle(Brushes.Green, new Rectangle(0, 0, 4800, 23));
            g.Flush();
            ReleaseDC(m.HWnd, hdc);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-08T10:15:23.143

您可以做的是使用 GDI 将`FormBorderStyle`属性设置为`None`并使用表单执行您想要的任何操作。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2020-02-14T00:37:17.117

如果您想拥有与其他人不同的标题栏，请考虑[为此获得社区许可证](https://syncfusion.com)

我试过一次，它奏效了。我只需要安装它并更改`Form`为`SfForm`

这是使用语句

```
using Syncfusion.WinForms.Controls; 
```

WinForms 的参考资料是`Syncfusion.Core.WinForms`和`Syncfusion.Shared.Base`

* * *

## 回答 #4

> 赞同：-46
> 
> 时间：2012-08-09T01:01:54.587

这很容易做到：

1.  右键单击桌面，然后选择“个性化”。

2.  单击屏幕底部的“窗口颜色”图块。

3.  选择你的新颜色。

    如果您的计算机配置为使用 Aero 主题，您可以选择一种标准颜色或混合一种您自己的颜色。

    如果您使用的是经典主题，您将看到一个“窗口颜色和外观”对话框，您可以使用它来设置颜色。单击示例桌面的标题栏，名为“Active Window”，然后使用“Color 1”和“Color 2”下拉框选择一种新颜色。

我只能假设这就是您的意思，因为绝对***没有理由***只更改应用程序标题栏的颜色。这是一个系统范围的设置是有原因的。

始终服从用户的喜好。如果他们希望您的标题栏具有不同的颜色，他们会选择不同的颜色。

# iphone - 未在 appDelegate 中调用 remoteControlReceivedWithEvent

> ID：11862317
> 
> 赞同：22
> 
> 时间：2012-08-08T10:13:18.233
> 
> 标签：iphone, ios

我在用我的 avplayer 控制 iPhone 控件时遇到问题。

如果我把函数

```
- (void)remoteControlReceivedWithEvent:(UIEvent *)event 
```

在负责播放被调用函数的视图控制器中，但前提是我要在当前视图控制器中进入后台。

如果我要从其他视图控制器返回后台，则该函数永远不会调用。

这就是为什么我想把它放在应用程序委托中。

我尝试了成为第一响应并将该功能放在每个视图控制器中，但它确实有帮助。

我也打电话

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents]; 
```

在里面

```
-(void)applicationWillResignActive:(UIApplication *)application 
```

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-17T10:55:50.067

我已将以下代码用于 iPhone Control -

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
[self becomeFirstResponder]; 
```

用于注册监听遥控器。完成后删除它 -

```
[[UIApplication sharedApplication] endReceivingRemoteControlEvents];
[self resignFirstResponder]; 
```

使应用程序**canBecomeFirstResponder** -

```
- (BOOL)canBecomeFirstResponder {
    return YES;
} 
```

使用委托方法来处理 iPhone 控制，例如双击主页按钮时播放和暂停

```
- (void)remoteControlReceivedWithEvent:(UIEvent *)event {
    //if it is a remote control event handle it correctly
    if (event.type == UIEventTypeRemoteControl) {
        if (event.subtype == UIEventSubtypeRemoteControlPlay) {
           [audioPlayer play];
            NSLog(@"play");
        } else if (event.subtype == UIEventSubtypeRemoteControlPause) {
           [audioPlayer stop];
             NSLog(@"pause");
        } else if (event.subtype == UIEventSubtypeRemoteControlTogglePlayPause) {
            NSLog(@"toggle");
        }
    }
} 
```

就我而言，我能够处理播放和暂停。如果有任何问题，请告知。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-12T16:40:51.283

您可以将函数沿响应者链向上移动到 UIApplication 子类。这样，它将始终在那里捕捉事件。

这种事件在常见的 UI 和控制器类中被忽略，因此它会传播到响应者链的底部，即您的应用程序委托和应用程序本身所在的位置。

[如此处](http://developer.apple.com/library/IOs/#documentation/General/Conceptual/Devpedia-CocoaApp/Responder.html)所述，UIApplication 的委托不是响应者链的一部分（我在这里错了）。UIApplication 在那里，根 UIWidow、链中的所有视图和相应的 UIViewController 也在那里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-16T09:56:04.787

提示：`becomeFirstResponder`必须从[viewDidAppear](https://developer.apple.com/library/ios/samplecode/MixerHost/Listings/Classes_MixerHostViewController_m.html)中调用，而不是`viewWillAppear`...

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self becomeFirstResponder];
} 
```

# jquery - jQGrid TreeGrid 的内联 Nav addRow 方法无法正常工作

> ID：11862318
> 
> 赞同：2
> 
> 时间：2012-08-08T10:13:20.213
> 
> 标签：jquery, jquery-plugins, jqgrid, jqgrid-inlinenav

我正在尝试为 jqGrid Treegrid 使用内联导航“添加新行”功能，但到目前为止我无法正确配置它。我已经阅读了相关的文档和其他帖子，但没有任何效果。我已经为 addRow 设置了选项，但是当我单击添加行图标时，会在网格中添加一个新行并弹出错误“未捕获的 TypeError：无法读取 null jquery.jqGrid.src.js 的属性'长度'： 8963”。对此有什么想法吗？我已经成功配置了内联编辑，它对我来说工作正常，但内联添加没有按预期工作。

我检查了 jqgrid src，错误出现在这个片段中

```
if (treeg) { $("span:first",this).html(""); }
else { $(this).html(""); }
var opt = $.extend({},cm[i].editoptions || {},{id:rowid+"_"+nm,name:nm});
if(!cm[i].edittype) { cm[i].edittype = "text"; }
if(tmp == "&nbsp;" || tmp == "&#160;" || (tmp.length==1 && tmp.charCodeAt(0)==160) ) {tmp='';} 
```

此代码正在列中查找跨度，但是当我通过萤火虫检查该列时，该列的标记中没有呈现跨度标记

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:57:34.633

我认为我面临的问题是由于根据 jQGrid 树网格限制的当前限制，[树](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3atreegrid)网格`"addRowData"`模式不支持。对于内联行添加，`"this method uses two already constructed methods. When calling the method first executes the addRowData method which add a local row. After this the method call editRow method to edit the row"`从[内联编辑添加行文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#addrow)。

因此`"addRowData"`树网格不支持，因此 jqGrid 树网格也不支持内联添加行。jqGrid 文档中的限制列表，需要更新

# objective-c - 如何在目标c上的json解析器框架上将json字符串转换为nsdictionary

> ID：11862319
> 
> 赞同：1
> 
> 时间：2012-08-08T10:13:24.137
> 
> 标签：objective-c

我正在尝试将原始 json 字符串转换为 NSDictionary。但是在 NSDictionary 上，我得到了与 json 字符串不同的对象顺序，但我在 NSDictionary 中需要与 json 字符串完全相同的顺序。以下是我用来转换 json 字符串的代码

```
 SBJSON *objJson = [[SBJSON alloc] init];
 NSError *error = nil;
 NSDictionary *dictResults = [objJson objectWithString:jsonString error:&error]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:18:30.333

来自[NSDictionary 的类参考：](http://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/Classes/NSDictionary_Class/Reference/Reference.html)

> 键的顺序未定义。

所以，基本上你不能在使用标准的 NSDictionary 时这样做。

然而，这可能是继承 NSDictionary 本身的一个很好的理由。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/376090/nsdictionary-with-ordered-keys)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:17:17.367

```
//parse out the json data
    NSError* error;

NSDictionary* json = [NSJSONSerialization 
        JSONObjectWithData:responseData //1

        options:kNilOptions 
        error:&error];

    NSArray* latestLoans = [json objectForKey:@"loans"]; //2

    NSLog(@"loans: %@", latestLoans); //3 
```

来源：点击此链接[http://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5) 很好的教程，但仅适用于 iOS5

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:19:05.590

NSDictionary 是一个关联数组，不保留其元素的顺序。如果您知道所有键，那么您可以创建一些数组，以正确顺序保存所有键（您也可以将它与 JSON 作为附加参数一起传递）。例子：

```
NSArray* ordered_keys = [NSArray arrayWithObjects: @"key1", @"key2", @"key3", .., nil];

for(NSString* key is ordered_keys) {
    NSLog(@"%@", [json_dict valueForKey: key]);
} 
```

# php - 使用 PHP 上传的文件无法通过 FTP 更改

> ID：11862324
> 
> 赞同：0
> 
> 时间：2012-08-08T10:13:43.583
> 
> 标签：php, upload, ftp, file-ownership

我有一个上传文件的脚本，上传文件后，文件的所有者是 48（Apache），当我尝试使用 FTP 删除该文件时，出现访问被拒绝错误，ftp 所有者 ID 为 500。

我有没有控制面板的 CentOS，我用 yum 命令安装了 apache 和 php 以及其他东西。

我应该在 apache 和 php 配置中做什么？因为我不想每次都手动更改文件的所有者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:16:31.260

用 PHP 上传后，执行`chmod("file.txt", 0777)`，这将使所有用户（包括您的 FTP 帐户）都可以写入文件。

# ipython - 如何使用 Ipython 嵌入 qt-console

> ID：11862327
> 
> 赞同：1
> 
> 时间：2012-08-08T10:13:50.867
> 
> 标签：ipython

每当我尝试将 ipython 与 qt 作为 gui 支持一起使用时，它都会给我这个：

```
enter code here $ ipython --gui=qt
                  Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
 Type "copyright", "credits" or "license" for more information.

 IPython 0.12.1 -- An enhanced Interactive Python.
 ?         -> Introduction and overview of IPython's features.
 %quickref -> Quick reference.
 help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.

In [1]: Got bus address:  "unix:abstract=/tmp/dbus-   q      1DAvsew5j,guid=a3ed4bb7c5723eeff9aaed690000006e" 
Connected to accessibility bus at:  "unix:abstract=/tmp/dbus-  q1DAvsew5j,guid=a3ed4bb7c5723eeff9aaed690000006e" 
  Registered DEC:  true 
  Registered event listener change listener:  true 
  Registered event listener change listener:  true 
  Registered event listener change listener:  true 
  Registered event listener change listener:  true 
  Registered event listener change listener:  true 
  Registered event listener change listener:  true 
  Registered event listener change listener:  true 
```

我的问题是：

1.  这是什么，为什么直到键盘中断才停止？

2.  如何在 ipython 中嵌入 qt 控制台？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T23:51:47.447

这个问题也刚开始发生在我身上。我正在运行 Ubuntu 12.04。删除 QT 辅助功能包 (qt-at-spi) 为我解决了这个问题。

这是从终端运行的命令。

```
sudo apt-get remove --purge qt-at-spi 
```

来源： [http ://blog.koppi.me/2012/01/howto-fix-sni-qt19799-warn-024248-774-void-statusnotifieritemfactoryconnecttosnw-invalid-interface-to-snw_service-error-message-on-ubuntu- 11-10/](http://blog.koppi.me/2012/01/howto-fix-sni-qt19799-warn-024248-774-void-statusnotifieritemfactoryconnecttosnw-invalid-interface-to-snw_service-error-message-on-ubuntu-11-10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:20:30.730

理论上，您可以通过设置环境变量 QT_ACCESSIBILITY 来完成相同的事情（停止 QT AT API 消息）而无需清除包

即，添加

```
export QT_ACCESSIBILITY=0 
```

到您的 shell 和/或系统启动（如 ~/.bashrc）

您可以在此处查看 qt 辅助功能包的 README

/usr/share/doc/qt-at-spi/README

# css - 绝对定位及其父元素

> ID：11862330
> 
> 赞同：8
> 
> 时间：2012-08-08T10:13:55.940
> 
> 标签：css, position, css-position

我一直听说，当您使用绝对定位时，要充当其父元素的元素需要具有`position`of `relative`。

我正在尝试构建一个 CSS 下拉菜单，当我希望它的父元素设置为时，我正在努力让下拉菜单项超出主菜单项的宽度`relative`；下拉菜单项中的文本只会换行。

所以我环顾了其他示例菜单，看看他们是如何做到的，我发现一个甚至没有使用任何带有 a`position`的父元素，`relative`即使他们像我一样使用绝对定位。

这个例子在这里： http: [//purecssmenu.com/](http://purecssmenu.com/)

所以我试着移除我的`relative`定位和宾果游戏——我的问题消失了。但是现在我使用的是绝对定位，而它的父母都没有使用`relative`定位，它们都设置为`static`.

所以我想知道这有什么意义——没有`relative`父母不会回到浏览器窗口吗？

如果需要，这是我的 HTML：

```
 <div class="navWrapper">
        <div class="left"></div>
        <div class="nav">
            <ul>
                <li class="home"><a href="/">Home</a></li>
                <li class="spacer"></li>
                <li class="about"><a href="about_us/">About Us</a></li>
                <li class="spacer"></li>
                <li class="trademark"><a href="freetrademarksearch/">Free Trademark Search</a></li>
                <li class="spacer"></li>
                <li class="services">
                    <a href="services/">Services</a>
                    <ul class="sub">
                        <li><a href="">Trademark Search</a></li>
                        <li><a href="">Prepare &amp; File Trademark</a></li>
                        <li><a href="">Trademark Infringement</a></li>
                    </ul>
                </li>
                <li class="spacer"></li>
                <li class="testimonials"><a href="testimonials/">Testimonials</a></li>
                <li class="spacer"></li>
                <li class="more"><a href="javascript:void(0);">More Information</a></li>
                <li class="spacer"></li>
                <li class="contact"><a href="contact-us/">Contact Us</a></li>                 
            </ul>
            <div class="contentClear"></div>
        </div>
        <!-- Nav Ends -->
        <div class="right"></div>
    </div>
    <!-- Nav Wrapper Ends --> 
```

CSS：

```
#header .navWrapper {
    width: 1004px;
}

#header .navWrapper .left {
    float: left;
    width: 4px;
    min-width: 4px;
    height: 47px;
    min-height: 47px;
    background: url('../images/nav-left-bg.png') left top no-repeat;
}

#header .navWrapper .nav {
    float: left;
    width: 994px;
    border-top: 1px solid #e0d0b4;
    border-left: 1px solid #e0d0b4;
    border-right: 1px solid #e0d0b4;
    border-bottom: 1px solid #e8dcc8;
    background: url('../images/nav-button-bg.png') left top repeat-x;
}

#header .navWrapper .nav ul {
    margin: 0 1px;
    display: block;
}

#header .navWrapper .nav li {
    float: left;
    display: block;
    height: 45px;
    font-family: OpenSansBold, Arial;
    font-size: 16px;
    line-height: 2.9;
    text-align: center;
    color: #646464;
}

#header .navWrapper .nav li.spacer {
    width: 2px;
    min-width: 2px;
    height: 45px;
    min-height: 45px;
    background: url('../images/nav-button-spacer-bg.png') left top no-repeat;
}

#header .navWrapper .nav li a,
#header .navWrapper .nav li a:visited
{
    display: block;
    height: 45px;
    padding: 0 20px;
    color: #646464;
    text-decoration: none;
}

#header .navWrapper .nav li a:hover,
#header .navWrapper .nav li a:active,
#header .navWrapper .nav li a:focus
{
    color: #fff;
    background: url('../images/nav-button-bg.png') left bottom repeat-x;
}

#header .navWrapper .nav li.home {
    max-width: 86px;
    text-indent: -1px;
}

#header .navWrapper .nav li ul.sub {
    position: absolute;
}

#header .navWrapper .nav li ul.sub li {
    float: none;
    display: block;
    font-family: OpenSansSemibold, Arial;
    font-size: 14px;
    line-height: 2.3;
    height: auto;
    text-align: center;
    background-color: #f4771d;
    color: #fff;
}

#header .navWrapper .nav li ul.sub li a,
#header .navWrapper .nav li ul.sub li a
{
    color: #fff;
    height: auto;
}

#header .navWrapper .nav li ul.sub li a:hover,
#header .navWrapper .nav li ul.sub li a:focus,
#header .navWrapper .nav li ul.sub li a:active
{
    background: #d66627;
}

#header .navWrapper .right {
    float: right;
    width: 4px;
    min-width: 4px;
    height: 47px;
    min-height: 47px;    
    background: url('../images/nav-right-bg.png') left top no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T10:19:39.600

它回退到最近的*祖先*元素，其位置定义为`relative`、`absolute`或`fixed`- 不仅是，而且是（默认值）`relative`以外的任何值。`static`

通常，您希望根据其父项建立的网格绝对定位该项目。但是，有时将其定位到由更高元素建立的网格是有意义的。

例如：

HTML

```
<body>
    <div id="div1">
        <div id="div2-A">[some content]</div>
        <div id="div2-B">
            <div id="div3">[more content]</div>
        </div>
    </div>
</div> 
```

CSS

```
#div1{
    width:1024px;margin:auto;
    position:relative
}
#div3{
    position:absolute;
    bottom:0px; left:0px;
} 
```

在这种情况下，div3 将一直定位到 div1 的左侧和底部——它的祖父——因为它的直接父级 (div2) 具有默认值`position:static`，因此不会为其子级建立绝对定位上下文/网格. 但是 div3*不会*（必然）一直到视口或页面主体的左侧，因为下一个较高的元素（div1）的位置定义为相对。

**更新**
在您提供的情况下（http://purecssmenu.com/）， position:relative 声明正在应用于 :hover 伪类，因此您不会立即在为 Google Developer Tools 或列出的样式中看到它萤火虫。

您可以通过检查父元素在 Google 开发人员工具中检查它，然后在“样式”面板的右侧，单击“切换元素状态”按钮，（看起来像一个带有虚线边框和一个箭头指向的框它），然后选中 ":hover" 旁边的框。我敢肯定 Firebug 也有类似的东西。

您会看到此声明已添加到列表中：

```
ul.cssMenu li:hover { position: relative; } 
```

这是有效的，因为当您不将鼠标悬停在 parent 上`<li>`时，子菜单`<ul>`会被 隐藏`display:none`，因此它的位置无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-20T08:02:12.820

定位元素时***最近的祖先***的另一个注释。

OP 三年后，像 transform 这样的 CSS3 属性被更广泛地使用，它隐式创建了一个新的包含块，强制元素具有`position: relative/absolute;`

因此，要确保*中间*父元素对子元素的定位没有影响，您需要检查它是否有`position: static`设置`transforms`。

例子

```
 <div id="one">
      <div id="two">
        <div id="three"></div>
      </div>
    </div> 
```

```
 #one {
      position: relative;
    }
    #two {
      position: static;
      transform: none;
    }
    #three {
      position:absolute;
    } 
```

# google-maps - 如何绘制具有固定半径的 Google Maps 圆形叠加层？

> ID：11862337
> 
> 赞同：2
> 
> 时间：2012-08-08T10:14:11.777
> 
> 标签：google-maps, google-maps-api-3

我正在使用 Google Maps API v3 在用户通过文本字段（简单的 HTML 和 JavaScript）提供的特定位置（纬度和经度）绘制圆形叠加层。问题是，当我输入不同的经纬度时，覆盖圈的大小会发生变化。即使我为圆圈提供了固定半径。我不知道如何解决这个问题。我尝试使用“比例”而不是“半径”，但无法这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:51:51.147

由于 google maps API 使用的投影，相同的半径在不同的纬度会出现不同的大小。你需要一个固定的半径还是一个固定的像素大小？它们是不相同的。

对于固定像素大小的圆圈，请参见[此处](https://stackoverflow.com/questions/11617998/how-to-create-circle-in-google-map-v3-with-same-radius-in-all-zoom-level)的答案 （来自右侧的“相关”问题）

# java - 从java中的一行匹配多个关键字

> ID：11862339
> 
> 赞同：1
> 
> 时间：2012-08-08T10:14:42.210
> 
> 标签：java, regex

我有一行要匹配多个关键字。应该匹配整个关键字。

例子，

```
 String str = "This is an example text for matching countries like Australia India England";

 if(str.contains("Australia") ||
    str.contains("India") ||
    str.contains("England")){
    System.out.println("Matches");
 }else{
    System.out.println("Does not match");
 } 
```

这段代码工作正常。但是，如果要匹配的关键字太多，则行会增加。 **是否有任何优雅的方式来编写相同的代码？** 谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T10:15:49.237

你可以这样写一个正则表达式：

```
Country0|Country1|Country2 
```

像这样使用它：

```
String str = "This is an example text like Australia India England";

if (Pattern.compile("Australia|India|England").matcher(str).find())     
    System.out.println("Matches"); 
```

如果您想知道哪些国家/地区已匹配：

```
public static void main(String[] args) {

    String str = "This is an example text like Australia India England";

    Matcher m = Pattern.compile("Australia|India|England").matcher(str);
    while (m.find())        
        System.out.println("Matches: " + m.group());
} 
```

输出：

```
Matches: Australia
Matches: India
Matches: England 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T10:25:16.803

将国家/地区排列起来并使用小助手方法。使用 Set 让它变得更好，但是建立国家集合有点乏味。类似于以下内容，但如果需要，可以使用更好的命名和 null 处理：

```
String[] countries = {"Australia", "India", "England"};
String str = "NAustraliaA";
if (containsAny(str, countries)) {
    System.out.println("Matches");
}
else {
    System.out.println("Does not match");
}

public static boolean containsAny(String toCheck, String[] values) {
    for (String s: values) {
        if (toCheck.contains(s)) {
            return true;
        }
     }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T10:17:56.283

从可读性的角度来看，要匹配的字符串的 ArrayList 将是优雅的。可以形成一个循环来检查单词是否可用，否则它将设置一个标志以指示缺少关键字

类似的东西，以防所有都匹配

```
for (String checkStr : myList) {
 if(!str.contains(checkStr)) {
 flag=false;
 break;
}
} 
```

万一任何应该匹配

```
for (String checkStr : myList) {
 if(str.contains(checkStr)) {
 flag=true;
 break;
}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T10:28:28.493

```
package com.test; 
```

公共类程序{

```
private String str;

public Program() {
    str = "This is an example text for matching countries like Australia India England";
    // TODO Auto-generated constructor stub
}

public static void main(String[] args) {
    Program program = new Program();
    program.doWork();
}

private void doWork() {

    String[] tomatch = { "Australia", "India" ,"UK"};

    for(int i=0;i<tomatch.length;i++){
    if (match(tomatch[i])) {
        System.out.println(tomatch[i]+" Matches");
    } else {
        System.out.println(tomatch[i]+" Does not match");
    }
    }
}

private boolean match(String string) {

    if (str.contains(string)) {
        return true;
    }

    return false;
} 
```

}

//----------------- 输出澳大利亚匹配印度匹配英国不匹配

# iphone - 如何在 webview iphone 应用程序中添加注释？

> ID：11862341
> 
> 赞同：0
> 
> 时间：2012-08-08T10:14:44.473
> 
> 标签：iphone, objective-c, ios5

我有一个带有 UIWebView 的 iPhone 应用程序，它是核心 UI，这个 Web 视图显示了一些我想在旁边添加注释的数据，一个示例场景是：

1.  用户将在 webview 中选择一个文本并出现一个弹出菜单。
2.  他们将按下 AddNotes 按钮。
3.  UI textview 窗口应该出现写入。
4.  用户应按保存，并且应保存有关他按 AddNotes 按钮所在位置的注释。

任何人都可以部分或完全提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:32:31.587

这将帮助您了解使用[Rangy](http://code.google.com/p/rangy/)库选择的测试：

```
- (BOOL) isSelectionActive
{
    NSString * resultStr = [self.contentView stringByEvaluatingJavaScriptFromString:
                            @"rangy.getSelection().isCollapsed"];

    NSLog(@"resultStr: %@", resultStr );

    if ([resultStr isEqualToString:@"true"]) {
        return NO;
    }
    else {
        return YES;
    }
} 
```

当您知道已经做出选择时，然后为 UITextfield 设置动画，以便用户能够在其中输入文本。

# java - 如何为文件中的每个单词循环和生成哈希键

> ID：11862345
> 
> 赞同：1
> 
> 时间：2012-08-08T10:14:49.903
> 
> 标签：java, md5

我可以知道如何循环，以便为文件（.txt）中的所有单词生成哈希码吗？我已经能够为文件生成单个哈希码。

给定的循环读取并取出文本文档中的单词。但我无法循环生成哈希键。

```
public static void main(String[] args) throws NoSuchAlgorithmException, IOException { 

  JFileChooser chooser=new  JFileChooser();
  int returnVal = chooser.showOpenDialog(null);
  if (returnVal == JFileChooser.APPROVE_OPTION) {
    File f = chooser.getSelectedFile();
  }
  FileInputStream fin = new FileInputStream(chooser.getSelectedFile());
  DataInputStream din = new DataInputStream(fin);    
  BufferedReader br = new BufferedReader(new InputStreamReader(din)); 

  ArrayList<String> list = new ArrayList<String> ();
  MessageDigest md = MessageDigest.getInstance("MD5");

  String currentLine;
  byte[] buf = new byte[8192];

  int len = 0;
  while ((currentLine = br.readLine()) != null) {
    list.add(currentLine);
    md.update(buf, 0, len);
    System.out.println(currentLine);
  }
  br.close();

  byte[] bytes = md.digest();

  StringBuilder sb = new StringBuilder(2 * bytes.length);
  for (byte b : bytes) {
    sb.append("0123456789ABCDEF".charAt((b & 0xF0) >> 4));
    sb.append("0123456789ABCDEF".charAt((b & 0x0F)));
  }
  String hex = sb.toString();

  System.out.println (buf);
  System.out.println(sb);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:21:41.363

On high follow below steps.

1.  Read line by line.
2.  Once you get line `split` it on `\\s+`(space).
3.  Now you have all words in array and then iterate it .
4.  For each string (word) call `word.hashCode()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:43:18.763

尝试使用这样的标记器：

```
StreamTokenizer tokenizer = new StreamTokenizer(new FileReader("yourFilePath.txt"));
tokenizer.eolIsSignificant(false);
int token = tokenizer.nextToken();
while (token != StreamTokenizer.TT_EOF) {
    if (token == StreamTokenizer.TT_WORD) {
        System.err.println(tokenizer.sval.hashCode()); // here use any hash method you like
    }
    token = tokenizer.nextToken();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:27:53.347

您生成文件中所有*行*的列表，然后您似乎从未使用过这些行。也许您应该通过在空白处分割每一行来生成文件中所有*单词的列表；*

```
for (String word : currentLine.split("\\s+")) {
  list.add(word);
} 
```

然后你可以使用这个列表为每个单词创建一个哈希列表；

```
List<byte[]> hashes = new ArrayList<byte[]>(list.size());
for (String word : list) {
  md.reset();
  hashes.add(md.digest(word));
} 
```

# c# - 同一张表的实体框架中的两个外键

> ID：11862347
> 
> 赞同：1
> 
> 时间：2012-08-08T10:14:55.347
> 
> 标签：c#, entity-framework, entity-framework-4.1, ef-code-first

我有两个实体：市政当局和 RoadSemgents。Municipality 是父表，RoadSegments 是子表。我需要在同一张表（市政）的 RoadSegments 中有两个外键。

```
 public class Municipality
{
    [Key]
    public int ID { get; set; }
    public string Name { get; set; }
}

public class RoadSegments
{
    [Key]
    public int ID { get; set; }
    //ForeignKeys
    public int CodeMunicipalityLeft_ID { get; set; }
    public int CodeMunicipalityRight_ID { get; set; }

    [ForeignKey("CodeMunicipalityLeft_ID ")]
    public Municipality CodeMunicipalityLeft { get; set; }    // LOOK HERE 
    [ForeignKey("CodeMunicipalityRight_ID ")]
    public Municipality CodeMunicipalityRight { get; set; }   // AND HERE
} 
```

我该如何处理这种情况？我在这里阅读了一些关于多个表的外键的帖子，但没有一个对我有用。

# c# - 从 SQL 数据动态创建对象

> ID：11862349
> 
> 赞同：2
> 
> 时间：2012-08-08T10:14:55.703
> 
> 标签：c#, inline

我一直在考虑使用存储在数据库中的数据动态创建对象。我过去通过序列化每个对象的所有属性做过类似的事情，但那是几年前的事了，时代已经改变了。

我实际上喜欢以下问题的答案中概述的方法： [How to do dynamic object creation and method invocation in .NET 3.5](https://stackoverflow.com/questions/483215/how-to-do-dynamic-object-creation-and-method-invocation-in-net-3-5)

我想知道是否可以更进一步并使用存储的数据设置对象的所有属性。

显然我可以单独设置每个属性 IE： 是否可以做一些更内联的事情（抱歉不太清楚这叫什么），比如属性或字符串可能来自数据库的位置？
`Person p = new Person();
p.Name = "Me";
p.Age = 31;` 
`Person p = new Person() { Name = "Me", Age = 31 };``Name = "Me", Age = 31`

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:30:54.380

您是否考虑过使用 LINQ to SQL？它获取 SQL 数据库的所有表并将它们转换为 c# 类。您通过 DataContext 对象访问所有数据，每个表都成为一个类，您可以通过 LINQ 调用/编辑/更新。

阅读以下材料。网上有很多例子。

[http://msdn.microsoft.com/en-us/library/bb425822.aspx](http://msdn.microsoft.com/en-us/library/bb425822.aspx)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:10:44.033

假设您从 DB 中读取值并将其放入字典中，例如：

```
Dictionary<string, string> parameters = new Dictionary<string, string>()
{
    {"Name","Scott"},
    {"Age","30"}
}; 
```

（看字典的类型：**string, string**但*age*其实是*int*）

您可以动态创建对象

```
var obj = Activator.CreateInstance(Type.GetType("SO.Form2+Person"));

foreach (var pi in obj.GetType().GetProperties())
{
    pi.SetValue(obj, Convert.ChangeType(parameters[pi.Name], pi.PropertyType));
} 
```

--

```
public class Person
{
    public string Name { set; get; }
    public int  Age { set; get; }
} 
```

# python - 这是 Python 中 OOP 的合理示例吗？

> ID：11862351
> 
> 赞同：0
> 
> 时间：2012-08-08T10:15:03.597
> 
> 标签：python, oop

我正在尝试学习 Python (3)，并且想尝试一些 OOP。我编写了这个程序，其中两个计算机“玩家”玩“石头剪刀布”。它有效，但我希望有人可以看看并告诉我我是否犯了任何愚蠢的错误！

```
# rock.py
# example of OOP
import random

class Rock:
    def main(self):
        self.Make_players()
        print("Best of Five - Let's play!\n")
        done  = False
        while done == False:
            self.p1.go_player()
            self.p2.go_player()
            print()
            if self.p2.go == self.p1.go:
                print("No winner!\n")
                continue
            else:
                temp = self.check(self.p1, self.p2)
            if temp == False:
                temp = self.check(self.p2, self.p1)
            print(self.message, end = " ")
            print(temp.name + " won this round.")
            temp.scored()
            print(self.p1.name + ": " + str(self.p1.score))
            print(self.p2.name + ": " + str(self.p2.score))
            if self.p1.score == 3:
                self.winner = self.p1
                done = True
            elif self.p2.score == 3:
                self.winner = self.p2
                done = True
            else:
                done = False
                input()
        print("The winner was " + self.winner.name + "!")

def __init__(self):
    print("**** Welcome to Rock, Paper, Scissors!****\n")
    self.winner = False
    self.main()

def Make_players(self):
    temp = (input("What shall we call Player 1? "))
    self.p1 = Player(temp)
    temp = (input("What shall we call Player 2? "))
    self.p2 = Player(temp)

def check(self, p_a, p_b):
    if p_a.go == "rock" and p_b.go == "scissors":
        self.message = "Rock breaks scissors."
        return p_a
    elif p_a.go == "paper" and p_b.go == "rock":
        self.message = "Paper wraps stone."
        return p_a
    elif p_a.go == "scissors" and p_b.go == "paper":
        self.message = "Scissors cut paper."
        return p_a
    else:
        return False

class Player:
    def __init__(self, name):
        self.choices = ["rock", "paper", "scissors"]
        self.score = 0
        self.name = name
        print("Player:", self.name, "created!\n")

    def go_player(self):
        self.go = random.choice(self.choices)
        print(self.name + " chose " + self.go, end = ". ")
        return self.go

    def scored(self):
        self.score += 1

# Main
game = Rock() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:11:47.553

OOP 的好处是您可以根据角色、职责和关注点将程序划分为不同的对象/类。目前，`Rock`类和`Player`类都有太多的职责。

具体来说，您应该考虑*打印*、*从控制台读取*和*游戏循环*。我会把它们放在一个`Game`类控制器中。

不管你是否考虑它，你也应该把`Rock`主循环放在一个叫做 run 的方法中。它不应该从构造函数开始循环。

最后，您的模块级代码可能如下所示：

```
# Main
game = Game()
game.run()
print("Game ended.") 
```

# iphone - 通过互联网读取/写入文本到 textFile

> ID：11862355
> 
> 赞同：0
> 
> 时间：2012-08-08T10:15:18.487
> 
> 标签：iphone, objective-c, xcode, ios4

我是 Objective C 编程的新手，我需要一些帮助来读/写文件。

我的 FTP 上有一个文本文件 - [ftp://www.abc.com/A.txt](ftp://www.abc.com/A.txt)，它对所有文件都具有完全访问权限。我想在其中读写文本。

感谢
乔治的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:20:50.883

Either...

1.  Download A.txt from the server and store locally.
2.  Append new line/s to an existing text file.
3.  Save it and upload that document to ftp.

Or...

This may help you...[iOS basic FTP setup; Read and Write Stream](https://stackoverflow.com/a/9704225/790794)

# c# - 如何在 LINQ 查询中添加静态

> ID：11862356
> 
> 赞同：1
> 
> 时间：2012-08-08T10:15:21.197
> 
> 标签：c#, asp.net, linq

我对 LINQ 查询有疑问...

我正在检索列表中的数据

```
 public List<Station_Master> GetAllStations()
    {
        var stationlist = from s in dc.Station_Masters
                          select s;
        return stationlist.ToList();

    } 
```

但在这里我的表 Station_Masters 包含一个状态字段作为数据类型 int..

列表将为我提供表格中的所有记录，包括状态...

但我需要将 Status 显示为 String ...

我的意思是如果状态为 0，那么它将返回“活动”，或者如果它是 1，那么它将返回“非活动”

我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T10:19:46.057

有很多方法可以做到这一点，一个例子可能是扩展`Station_Master`类以公开一个属性，该属性将返回状态的字符串表示：

```
public partial class Station_Master
{
    public string StatusText
    {
        get
        {
            switch (Status)
            {
                case 0:
                    return "Active";
                case 1:
                    return "Inactive";
                default:
                    return "Unknown";
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:22:14.027

You need to create a DTO where the Status is a string and not an integer, and leave all other properties as the original object.

Then your method can simply:

```
return dc.Station_Masters
.Select(c => new CustomObject
{
//Map all other fields and then remap the status
Status = c.Status == 0 ? "Active" : "Inactive"
}); 
```

This is however inefficient as if would extract all the rows from the table in order to remap them. You'd better apply the `Select` transformation only after filtering them.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:25:58.993

我认为最好将“活动/非活动”描述远离数据检索逻辑。正如@James 建议的那样 - 只需扩展您的类并显式编译描述属性。

# powershell - 如何在哈希表末尾添加键/值对？

> ID：11862361
> 
> 赞同：1
> 
> 时间：2012-08-08T10:15:28.143
> 
> 标签：powershell, powershell-2.0

我正在尝试使用 PowerShell 脚本计算代码计数。

我在互联网上找到了一个脚本，并试图在最后添加总行。

我已经添加了专栏

```
$CountHash.Add("Total", $Total) 
```

在最后。

```
Param( [string]$path,
       [string]$outputFile,
       [string]$include = "*.*",
       [string]$exclude = "")

Clear-Host

$Files = Get-ChildItem -re -in $include -ex $exclude $path
$CountHash = @{}
$Total=0
Foreach ($File in $Files) {
    #Write-Host "Counting $File.FullName"
    $fileStats = Get-Content $File.FullName | Measure-Object -line
    $linesInFile = $fileStats.Lines
    $CountHash.Add($File.FullName, $linesInFile)

    $Total += $linesInFile
}

$CountHash.Add("Total", $Total)
$CountHash 
```

但是当我显示 $CountHash 时，它会在中间显示“Total”键。通过在末尾添加 Add 并不能确保它在末尾添加。

如何在哈希表末尾添加键/值对？

我将此哈希表导出为 CSV 文件，但总行数在中间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:20:45.683

Assuming the total is just for display, I guess there's no point in adding it to the hash set. Remove the line

```
$CountHash.Add("Total", $Total) 
```

And add this as the last line:

```
Write-Host "Total: $Total" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:12:58.073

我会这样做：

```
$CountHash += @{Total = $total} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T15:21:39.420

哈希表不维护其值的顺序。如果您想要一个类似的具有顺序的数据结构，请尝试使用`System.Collection.Specialized.OrderedDictionary`. 您的示例将如下所示

```
$Files=Get-ChildItem -re -in $include -ex $exclude $path
$CountHash= New-Object System.Collections.Specialized.OrderedDictionary # CHANGED
$Total=0
Foreach ($File in $Files) { 
   #Write-Host "Counting $File.FullName"
   $fileStats = Get-Content $File.FullName | Measure-Object -line
   $linesInFile = $fileStats.Lines
   $CountHash.Add($File.FullName,$linesInFile)

   $Total += $linesInFile
}

$CountHash.Add("Total",$Total)
$CountHash 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T11:14:36.163

[要回答您的问题，您可以像 Kenned 那样](https://stackoverflow.com/questions/11862361/how-to-add-key-value-pair-at-the-end-of-hash-table/11862438#11862438)使用 Add 方法，或者通过指定它来创建一个新键：

```
$CountHash.Total = $Total 
```

但是，我会采取更简单的方法，自定义对象而不是哈希表：

```
Get-ChildItem -Path $path -Include $include -Exclude $exclude -Recurse |
Select-Object FullName, @{Name='LineCount';Expression={ (Get-Content $_.FullName | Measure-Object -Line).Lines}} |
Export-Csv .\files.csv 
```

# iphone - 如何使主屏幕类似于具有相似图标的 iPhone，并允许用户将其拖动、移动到一个文件夹或删除它？

> ID：11862363
> 
> 赞同：0
> 
> 时间：2012-08-08T10:15:28.123
> 
> 标签：iphone

> **可能重复：**
> [创建类似于主视图的跳板](https://stackoverflow.com/questions/4969263/create-springboard-like-main-view)

我想创建一个类似于 iPhone 主屏幕的应用程序。此主屏幕具有您可以移动和删除的图标。您能否与我分享一些带有解释的示例代码或与此相关的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:44:54.073

I suggest you to check this open source class: [GMGridView](https://github.com/gmoledina/GMGridView/) It works similar to a UITableView, with cell recicling, and it even supports holding to move like the iPhone springboard (homescreen).

It is not everything ready, you will need to work on that, but it is an excellent point to start from.

# php - 数据库在php中生成结果和其他字段的数量

> ID：11862366
> 
> 赞同：0
> 
> 时间：2012-08-08T10:15:39.557
> 
> 标签：php, mysql, database

假设我们的数据库中有一个表（在示例中很简单，实际上我们将有更多的表、属性和它们之间的连接）

```
book(book_id, name, attr1, attr2, attr3) 
```

因此，使用搜索表单，用户会创建一个带有 get 参数的 url，它会产生一些结果。在结果页面的 sideSearch 表单中，我想要计算符合搜索条件的书名、attr1、attr2 等。例如，如果用户想要 attr3 = 'something' 我想要在我的 sideSearch 中具有 attr3 = 'something' 的其他字段的数量

```
book_name_1   num_1
book_name_2   num_2
attr1_1       num_1
attr1_2       num_2 
```

在我的应用程序中 book_names 和 attrs 是已知的。我能想到的唯一方法是在 for 循环中（1000-1500 次重复）

```
select count(*) from book where name='book_name_1' and attr3 = 'something' 
```

等等。你能想出一个更好的方法来做到这一点吗？我正在使用 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:23:50.293

我会做的

```
SELECT name,COUNT(name) FROM book WHERE attr3 = 'something' GROUP BY name
SELECT attr1,COUNT(attr1) FROM book WHERE attr3 = 'something' GROUP BY attr1
SELECT attr2,COUNT(attr2) FROM book WHERE attr3 = 'something' GROUP BY attr2 
```

等等。我还会再查询一个结果。所以一般来说，我将在页面中有大约 10 个查询。在我的应用程序中，我保存了 $from 和 $where 部分，因此我不需要再次编写它们，否则我正在考虑使用视图表。如果您想到更好的方法，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:37:55.617

查看 mysql FULLTEXT 索引并在这些字段上搜索，您可能会受益匪浅。你没有提到它 - 如果没有其他原因 - 你应该尝试它，然后如果它不起作用则打折。[http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

我在进行全文搜索的多重搜索中取得了成功，然后如果找到少于 n 个结果，我们将使用 tag= 样式搜索作为替代方法。

# ios - dsym 更多信息显示——

> ID：11862379
> 
> 赞同：0
> 
> 时间：2012-08-08T10:16:36.390
> 
> 标签：ios, crash, symbolicate

我试图符号化一个崩溃文件，但似乎 xcode 无法将 dsym 文件与崩溃报告匹配。

做了一些研究后，我找到了存档的 dsym 文件，当我进入 getinfo 并查看“更多信息：”它显示“--”时，我相信这应该显示 uuid，这就是 xcode 的原因找不到。

我猜我需要更改构建设置中的某些内容，但不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:04:58.297

您可以在终端中使用以下命令找出 dSYM 的 UUID：

```
dwarfdump --uuid YourDSYMPackage.app.dSYM 
```

# c# - 在 asp.net(c#) 中解析 html

> ID：11862380
> 
> 赞同：0
> 
> 时间：2012-08-08T10:16:36.390
> 
> 标签：c#, asp.net, html, parsing

这是目前的情况：
我在asp.net中写了一个html文档。该文档有一个表格。我给每个单元格一个带有 ID 的 div。因此，我将有更多的选择，我以后可以改变。
我的问题：
我想在单元格的每个 div 中插入将动态插入的文本或图像，因为应该在 div 中显示的数据来自数据库。为了实现这一点，我需要解析 HTML 文档。因此，我可以通过 c# 在 asp.net 中为每个 div 分配一个特殊的文本或图像。我想过使用 id 来处理特定的 div。由于我没有做任何关于解析的事情，我不知道如何完成这项任务。我将对每一个建设性的答案和链接都非常有帮助。
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:22:38.820

如果你真的想用 c# 代码解析 html，你应该看看[html agility pack](http://htmlagilitypack.codeplex.com/)。

[但是，您可以使用jquery](http://jquery.com/)在客户端轻松实现您想要实现的结果。您可以使用 div 的客户端 ID 和一些组合来创建 img 标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:22:05.047

You should use XDocument and [XDocument.Parse](http://msdn.microsoft.com/de-de/library/system.xml.linq.xdocument.parse.aspx) to parse your html!

If you don't know Linq you have to learn some new things.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:23:14.690

您可以使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)来解析、操作和保存您的 HTML 文档。

> 什么是 Html Agility Pack (HAP)？
> 
> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

话虽如此，由于您`id`在不同`div`元素上具有属性，因此您可以使用 Javascript 的客户端方法（[jQuery](http://jquery.com/)库使许多需要的任务变得非常容易）并从服务器使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:44:51.510

If you tolerate COM interoperability, you can also use MSHTML component. [http://msdn.microsoft.com/en-us/library/bb508516%28v=vs.85%29](http://msdn.microsoft.com/en-us/library/bb508516%28v=vs.85%29)

# c#-4.0 - Windows Azure 云本地化最佳实践

> ID：11862381
> 
> 赞同：1
> 
> 时间：2012-08-08T10:16:38.643
> 
> 标签：c#-4.0, azure, localization, globalization

我有一个基于 MVC 云的项目，目前支持瑞典和法国两种文化

现在取决于我的客户，我希望根据他的文化创建资源文件

**现在的问题是我不想重新部署到 Azure 云，仍然想动态添加我的资源文件**

如果我使用远程桌面将特定文化的 Dll 直接复制到 Azure，是否有可能

我试过这是我的本地机器，但它失败了，但是当我编译我的解决方案时，添加到 Bin 文件夹的新 Dll 适用于新文化

**什么是基于云的本地化的最佳方法，其中数据库命中是一个主要问题，因为它代价高昂**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:45:55.740

As an alternative to MikeWo's solution you could look at creating a custom **ResourceProviderFactory**. There is [an example on MSDN](http://msdn.microsoft.com/en-us/library/aa905797.aspx) that shows you how to create a sample ExternalResourceProviderFactory that can load external assemblies.

You could modify this class and have it download the assemblies from blob storage. After creating the custom ResourceProviderFactory you can simply add it to your web.config, no need to use startup tasks:

```
<globalization uiCulture="auto" culture="auto"
     resourceProviderFactoryType="CustomResourceProviders.ExternalResourceProviderFactory, CustomResourceProviders, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f201d8942d9dbbb1" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:38:51.287

不要使用 RDP 更改您的解决方案。从长远来看，它不会起作用。（如果内部出现任何问题，Azure 可以使用它拥有的 cspkg 来恢复应用程序，在这种情况下，您通过 RDP 所做的更改将不会反映）您可以尝试将资源文件放入 Azure blobs 并在需要时选择它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:35:30.787

我建议将附属程序集存储在 BLOB 存储中，并让您的应用程序使用后台任务定期从特定 BLOB 容器中获取所有程序集。您可以唤醒 Web 角色的后台进程并查看 BLOB 容器，以及查看它的 bin 文件夹中有哪些附属程序集。如果它在 BLOB 容器中找到新的程序集（或更新的程序集），它可以将其拉下。

我已经很长时间没有使用卫星程序集了，所以我不确定您是否可以更新正在使用的程序集，或者如果它们立即开始工作，您是否可以将新程序集放入垃圾箱中。如果这种“热插拔”方法不起作用，那么您至少可以在启动任务中使用类似的逻辑从 BLOB 存储中获取程序集，然后只需对服务配置执行更新（处理 RoleEnvrionmentChanging 事件） . 请注意，这不会是一个完全重新部署。

# mysql - WHERE-IN 或 FIND_IN_SET

> ID：11862385
> 
> 赞同：0
> 
> 时间：2012-08-08T10:16:55.827
> 
> 标签：mysql, where-in

一个未规范化的数据库有一个名为 batches 的表

表批次具有字段 student_ids ，其中包含多个 id。例如`1311, 1319, 1400`

来自：从批次中选择 student_ids WHERE 1311 IN(student_ids)

我们得到 student_ids：`1311, 1319, 1400`

并且：从批次中选择 student_ids WHERE 1319 IN(1311, 1319, 1400)

工作正常：`1311, 1319, 1400`

但

从批次中选择 student_ids WHERE 1319 IN(student_ids)

或者

从批次 b 中选择 @student_ids := student_ids；从批次中选择 student_ids WHERE FIND_IN_SET(1319, @student_ids)

返回`Null`

我错过了什么？我想我必须将第一个结果转换为数组 - 但是如何？

我已经尝试过 Dash 的建议（非常感谢 Dash），但我仍然遇到问题

我也试过 SELECT id FROM batches WHERE INSTR(','+1319+',', ','+CAST(student_ids AS CHAR) + ',')

正如 Matt Ellen 在另一篇文章中所建议的那样 - 仅在第一项匹配时才有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:20:04.753

try this:

```
SELECT @student_ids := GROUP_CONCAT(CAST(TRIM(student_ids) AS UNSIGNED INTEGER)) 
FROM batches b; 

SELECT student_ids 
FROM batches 
WHERE FIND_IN_SET(1311, @student_ids) ; 
```

or

```
SELECT student_ids FROM batches WHERE CAST(student_ids AS UNSIGNED INTEGER) IN (1319); 
```

# javascript - 在运行时向 Javascript 对象添加属性

> ID：11862387
> 
> 赞同：1
> 
> 时间：2012-08-08T10:17:02.993
> 
> 标签：javascript, jquery, internet-explorer, invokescript

假设我在javascript中有这个功能

```
 function EstablishUserSession(params) {
        gecResult = "noResult";            
        params["callbackOnSuccess"] = Success;
        params["callbackOnException"] = Exception;
        controller.establishUserSessionIAPI(params);
        return "requestSent";
    } 
```

params 是通过 HtmlDocument.InvokeScript 传入的对象。看起来像这样

```
{ iapiUri: "dfdfdsf", language: "en", partnerUsername: "ddddd", integrationPartnerId: 1, cleartextPassword: "dddd"} 
```

以上在 Chrome 和 FFox 中运行良好。在 IE8 中不起作用。我得到对象不支持属性或方法。

```
 function EstablishUserSession(params) {
        gecResult = "noResult";
        jQuery.extend(params, { callbackOnSuccess: Success, callbackOnException: Exception });
        controller.establishUserSessionIAPI(params);
        return "requestSent";
    } 
```

然后我改为 Jquery.extend... 在 Chrome 和 FFox 中工作正常。在 IE8 中不起作用。

有谁知道如何正确扩展对象以添加上述属性！

注意：成功和异常只是回调

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:21:40.557

您可以使用对象的新副本..

```
var newParams = $.extend({ newProp : value}, oldParams); 
```

# unit-testing - IEnumerables 的 `Assert.AreEqual` 和 `CollectionAssert.AreEqual` 之间的 Nunit 区别

> ID：11862388
> 
> 赞同：2
> 
> 时间：2012-08-08T10:17:14.093
> 
> 标签：unit-testing, nunit, ienumerable

在Nunit中，有什么区别

```
Assert.AreEqual(IEnumerable<T>, IEnumerable<T>) 
```

和

```
CollectionAssert.AreEqual(IEnumerable<T>, IEnumerable<T>) 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:45:35.507

没有超载`Assert.AreEqual(IEnumerable<T>, IEnumerable<T>)`，只有`Assert.AreEqual(object, object)`。至少对于`nunit`2.5.10，它们的实现是相同的：

## 集合断言.cs

```
public class CollectionAssert
{
    public static void AreEqual(IEnumerable expected, IEnumerable actual)
    {
      Assert.That((object) actual, (IResolveConstraint) new EqualConstraint((object) expected));
    }
} 
```

## 断言.cs

```
public class Assert
{
    public static void AreEqual(object expected, object actual)
    {
      // EqualConstraint EqualTo(object expected)
      Assert.That(actual, (IResolveConstraint) Is.EqualTo(expected), (string) null, (object[]) null);
    }
} 
```

# android - getheight() 像素还是 dpi？

> ID：11862391
> 
> 赞同：15
> 
> 时间：2012-08-08T10:17:27.670
> 
> 标签：android, dpi

Help.我找到了 ListView 的高度，我不知道 px 或 dpi？我需要dpi

```
final ListView actualListView = mPullRefreshListView.getRefreshableView();

actualListView.getViewTreeObserver().addOnGlobalLayoutListener(
                new ViewTreeObserver.OnGlobalLayoutListener() {
                    public void onGlobalLayout() {
                        height = actualListView.getHeight();  

                    }
                }); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-08T10:23:51.820

*getheight 以像素为单位返回高度*，下面是文档所说的..

```
 public final int getHeight () 
```

> > 自：API 级别 1
> > 
> > 返回视图的高度。退货
> > 
> > 视图的高度，以像素为单位。

您需要将 px 转换为 dp ，使用以下方法将其转换为 dp。

**将像素转换为 dp：**

```
public int pxToDp(int px) {
    DisplayMetrics displayMetrics = getContext().getResources().getDisplayMetrics();
    int dp = Math.round(px / (displayMetrics.xdpi / DisplayMetrics.DENSITY_DEFAULT));
    return dp;
} 
```

或者如果你想在 px 中使用它。

**将 dp 转换为像素：**

```
public int dpToPx(int dp) {
    DisplayMetrics displayMetrics = getContext().getResources().getDisplayMetrics();
    int px = Math.round(dp * (displayMetrics.xdpi / DisplayMetrics.DENSITY_DEFAULT));       
    return px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:22:46.403

它返回像素。 [http://developer.android.com/reference/android/view/View.html#getHeight()](http://developer.android.com/reference/android/view/View.html#getHeight()) 要将像素转换为 dpi，请使用此公式 px = dp * (dpi / 160)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T10:25:00.843

使用此代码，您可以获得运行时显示的宽度和高度

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int height = displaymetrics.heightPixels;
int wwidth = displaymetrics.widthPixels; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-20T10:07:53.360

将 dp 转换为 px 和 px 转换为 dp 的函数应如下所示（在 kotlin 中）：

```
fun convertDpToPx(dp: Int): Int {
    val metrics = Resources.getSystem().displayMetrics
    return dp * (metrics.densityDpi / 160f).roundToInt()
  }

fun convertPxToDp(px: Int): Int {
  val metrics = Resources.getSystem().displayMetrics
  return (px / (metrics.densityDpi / 160f)).roundToInt()
} 
```

# ajax - 来自 Firebug 的 AJAX POST 发布空值？

> ID：11862392
> 
> 赞同：0
> 
> 时间：2012-08-08T10:17:32.877
> 
> 标签：ajax, testing, firebug, security

我正在尝试测试使用 AJAX 请求的应用程序的安全性。

我曾尝试使用 Firebug 终端，但数据无法传送到服务器。

这种类型的测试甚至可以在 Firebug 中进行，还是我需要一个不同的程序？

```
$.ajax({
  url: 'http://127.0.0.1:5000/admin/update',
  type: 'POST',
  data: JSON.stringify(
    {extension:'x', mobile:'x', mobex:'x', altContact:'x', fax:'x', userid:'x', lcode:'x', desk: 'x'}
),
  contentType: "application/json",
  success: function(data) {
  }
}); 
```

后端是 Python：

```
@jsonify
def updateExceptLocationAndDesk(self):
    print "Params:",request.params 
```

结果是：

```
Params: UnicodeMultiDict([]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:26:22.340

我得到了这个工作，但我不确定如何。

```
$.post(
        '/admin/update',
        {'extension':'123', 'mobile':'123', 'mobex':'123', 'altContact':'123', 'fax':'123', 'userid':'19700', 'lcode':'456456', 'desk': '123'},                    
        function (data)
        {
            if(data=='success')
            {
                $('#message').show();
                $('#message').html('Record successfully updated.');
                setTimeout(function(){$('#message').fadeOut('slow')}, 5000);
            }
        },
        'json'
        ); 
```

我不认为 jsonify 改变了任何东西。如果有人遇到这个，至少这里有一个答案！

# android - android内存问题 - 应用程序使用大量内存

> ID：11862393
> 
> 赞同：0
> 
> 时间：2012-08-08T10:17:43.533
> 
> 标签：android, memory, memory-leaks, ram

我的 android 应用程序的内存使用存在一些问题，不知道是什么导致了高内存使用。当我启动我的应用程序时，它使用了高达 40 mb 的内存（DDMS 说），当我打开另一个应用程序时，我的应用程序立即被杀死。

我读了很多关于内存泄漏的文章，我正在解绑可绘制对象，运行 GC 等等，但我的应用程序仍然需要大量内存。

我的应用程序中有大约 3mb 的资源，但是 afaik 它们是按需加载到 ram 中的。我错了吗？这可能会导致 40mb 的内存使用量吗？

编辑：我认为我没有内存泄漏，因为我可以根据需要随时切换每个活动的方向，并且应用程序不会因为内存不足而崩溃。所以它不可能是内存泄漏，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:41:43.560

你使用什么数据结构？非常大的数据结构（长列表、大图、大地图等）会很快耗尽 RAM。

也可能是您在应用程序中的方向更改时泄漏了上下文。

也可能是您的布局与一些繁重的数据结构一起设计得很糟糕。

除非你描述更多关于你的应用试图做什么，否则很难说清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:38:45.353

你需要在你的android应用程序中进行内存管理，请释放不再使用的资源，尝试覆盖Activity的onStop()、onDestroy()、onPause()方法，这些方法将跟踪活动堆栈。

在 OnDestroy() 方法中释放所有可用资源，以便另一个应用程序可以再次使用相同的资源。

# iphone - 带有 Iphone 5.1 Sim 的 XCODE V4.4 中的可怕线程 1 信号 SIGABRT

> ID：11862394
> 
> 赞同：0
> 
> 时间：2012-08-08T10:17:51.883
> 
> 标签：iphone, xcode, keyboard, signals, nsthread

好的，所以基本上我对此非常陌生，现在已经做了大约 3 天。我一直在阅读“傻瓜的 iPhone 应用程序开发”，并一直在构建一个教程应用程序。我刚刚添加了代码来处理键盘出现时的视图滚动，但我收到了上述错误。我知道是哪一行代码导致它，但我不知道如何修复它。这是一些代码：

视图控制器.h

```
 #import <UIKit/UIKit.h>

    @interface ViewController : UIViewController

    @property (retain, nonatomic) IBOutlet UITextField * textField;

    @property (retain, nonatomic) IBOutlet UILabel *lbl;

    @end 
```

视图控制器.m

```
 #import "ViewController.h"

    @interface ViewController ()

    @end

    @implementation ViewController;
    @synthesize lbl;
    @synthesize textField;

    - (void)viewDidLoad:(BOOL)animated
    {
       [super viewDidLoad];
    }
    - (void)viewWillAppear:(BOOL)animated  {

        [[NSNotificationCenter defaultCenter] addObserver: self
    selector:@selector(keyboardWillShow:) //pretty sure its this line causing issues
    name:UIKeyboardWillShowNotification
    object:self.view.window];
      [super viewWillAppear:animated];

    }

    -(void)viewWillDisappear:(BOOL)animated  {
       [[NSNotificationCenter defaultCenter] removeObserver:self name:                                                                                 UIKeyboardWillShowNotification object: nil];
  [super viewWillDisappear:animated];
       }
    // Do any additional setup after loading the view, typically from a nib.

    - (void)viewDidUnload
    {

[self setLbl:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:        (UIInterfaceOrientation)interfaceOrientation
    {
        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
            return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
        } else {
    return YES;
        }
    }

    - (void)dealloc {
[lbl release];
[textField release];
[super dealloc];
    }
    @end 
```

调试控制台中的错误消息是

```
 2012-08-08 10:48:56.873 tester[552:c07] -[ViewController keyboardWillShow:]:         unrecognized selector sent to instance 0x6a5f6b0
    2012-08-08 10:48:56.875 tester[552:c07] *** Terminating app due to uncaught exception         'NSInvalidArgumentException', reason: '-[ViewController keyboardWillShow:]: unrecognized         selector sent to instance 0x6a5f6b0'
    *** First throw call stack:
    (0x14b2022 0xeb2cd6 0x14b3cbd 0x1418ed0 0x1418cb2 0x9d7a29 0x147d855 0x147d778 0x91c19a 0x3ab4cb 0x3a6906 0x3a851f 0x3a85a9 0x3a85f3 0x3a2938 0x103678 0x10312e 0x2e28fb 0x2e45f8 0x2dce29 0x2dc133 0x2dd3bf 0x2dfa21 0x2df97c 0x2d83d7 0x3d1a2 0x3d532 0x23dc4 0x17634 0x139cef5 0x1486195 0x13eaff2 0x13e98da 0x13e8d84 0x13e8c9b 0x139b7d8 0x139b88a 0x15626 0x26b2 0x2625)
    terminate called throwing an exception(lldb) 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:22:33.097

你没有一个名为 的方法`keyboardWillShow:`，所以这有点像给一个朋友一个不存在的地址，当他找不到它时他会发脾气（并且崩溃）。

要解决此问题，只需添加类似的内容；

`- (void)keyboardWillShow:(id)sender { }`

# c# - 大量 KnownTypes 如何影响 DataContractSerializer 的性能

> ID：11862397
> 
> 赞同：2
> 
> 时间：2012-08-08T10:18:00.023
> 
> 标签：c#, .net, wcf, performance, inheritance

任何人都可以提供有关继承链中数据合同上可能的 KnownTypes 数量如何影响 WCF 性能的任何见解`DataContractSerializer`吗？

考虑：

```
[ServiceContract]
BaseClass GetInfo()

[KnownType=Typeof(Class1)]
[DataContract]
public class BaseClass

[DataContract]
public class Class1 : BaseClass 
```

在这里，我只有一个派生类（因此只有一个 knownType）。现在，假设我有 10 个、100 个或 1000 个……类。

知道成千上万的派生类有点 :) 夸大了，但这会如何影响性能`DataContractSerializer`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:13:38.713

如果您对测量任何代码结构的性能感兴趣，我强烈推荐 Vance Morrison 关于[测量 IT](http://msdn.microsoft.com/en-us/magazine/cc507639.aspx)的 msdn 文章。极具教育意义。我自己使用 Measure It 几次来掌握性能问题。

有关整体流程性能，请查看[PerfView](http://blogs.msdn.com/b/vancem/archive/2011/12/28/publication-of-the-perfview-performance-analysis-tool.aspx)

# asp.net - 亚音速数据集排序顺序

> ID：11862399
> 
> 赞同：1
> 
> 时间：2012-08-08T10:18:03.393
> 
> 标签：asp.net, datagrid, subsonic

我在这里的理解水平超出了我的理解水平，但是有一个简单的请求来更改 .NET 数据网格中数据的排序顺序。该系统似乎使用 SubSonic 来进行数据库查询，所以有一个抽象级别，我只是不理解，似乎无法猜测;)。

.aspx 文件中的 gridview 控件下有一行，如下所示：

```
<asp:ObjectDataSource ID="odsCsvReport" runat="server" SelectMethod="FetchAll" TypeName="WFlower.CsvReportController">
</asp:ObjectDataSource> 
```

我在项目中搜索了“CsvReportController”，并且在 App_Code 中有一个名为“CsvReportController.cs”的文件，其中有一个像这样的类：

```
 [DataObjectMethod(DataObjectMethodType.Select, true)]
    public CsvReportCollection FetchAll()
    {
        CsvReportCollection coll = new CsvReportCollection();
        Query qry = new Query(CsvReport.Schema);
        //qry.OrderDesc("CsvReportID");
        coll.LoadAndCloseReader(qry.ExecuteReader());
        return coll;
    } 
```

现在，我只是不知道如何让这些数据按“CsvReportID”字段的降序排序（目前是升序）。

任何人都可以对此有所了解。就像我说的那样，我在这里太深了，但这应该是一件微不足道的事情，我决心追根究底！

谢谢各位！

编辑：好的，所以根据@Mike Walsh 在下面的评论，我尝试了这个：

```
var qry = new Select().From(CsvReport.Schema); 
qry.OrderDesc(new [] {CsvReport.Columns.AssignedToID}); 
return qry.ExecuteAsCollection<CsvReportCollection>(); 
```

然而，现在这在其他地方引发了一个完全不同的错误：

```
Violation of PRIMARY KEY constraint 'PK__OrdersToDelete__245EFE8C'. Cannot insert duplicate key in object 'dbo.OrdersToDelete'.
The statement has been terminated.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: Violation of PRIMARY KEY constraint 'PK__OrdersToDelete__245EFE8C'. Cannot insert duplicate key in object 'dbo.OrdersToDelete'.
The statement has been terminated.

Source Error: 

Line 187:      //Do database management.
Line 188:      int removedUsers = SPs.Hg_DeleteInactiveUsers(14).Execute();
Line 189:      int removedOrders = SPs.Hg_DeleteInactiveOrders(14).Execute();
Line 190:    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:02:56.043

不记得 2.1-2.2-2.3 中的确切差异，但这会为您编译吗？

```
 var qry = new Select().From(CsvReport.Schema); 
    qry.OrderDesc(new [] {CsvReport.Columns.AssignedToID}); 
    return qry.ExecuteAsCollection<CsvReportCollection>(); 
```

# java - 如何让入侵者在java中从左向右移动

> ID：11862400
> 
> 赞同：1
> 
> 时间：2012-08-08T10:18:04.097
> 
> 标签：java, object, game-physics

我正在创建一个小型太空入侵者项目，并且我让外星人不断地从左到右循环。当他们到达屏幕的尽头时，他们会在右侧重新绘制，然后再从左到右。我已经设置了窗口大小，并且查看了有关如何在 Java 中制作空间入侵者的各种教程，但是其中大多数都说与我尝试过的相同的事情。是否有人可以指出我的编码哪里出了问题，以便我知道如何解决它。

这是外星人类的代码。有不同的外星人，但是所有的类看起来都和这个几乎一样：

```
package spaceinvaders2;

import java.awt.Graphics;
import java.awt.Image;
import javax.swing.ImageIcon;

class Alien extends MoveObject 
{
    Image Alien = new ImageIcon(getClass().getResource("alien.gif")).getImage();
Alien(int x, int y, int w, int h) 
{
    super(x, y);
    bounds.width = w;
    bounds.height = h;
}

public void paint(Graphics g) 
{
    System.out.println("Alien generated");
    bounds.x = bounds.x - 2;

    if ((bounds.x + bounds.width)< 0)
    {
        bounds.x = 750;
        dead = false;
    }

    g.drawImage(Alien,bounds.x,bounds.y,bounds.width, bounds.height, this);
}
} 
```

编辑：我的绘画方法在主要游戏功能部分被调用，它绘制所有图形。绘图不是问题，而是这个班级的外星人的运动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:23:16.437

我认为绘画方法只运行一次。您必须添加一个线程来调用 paint() 方法 periodi。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:39:44.663

您需要给外星人一个`direction`属性（+1 或 -1），告诉它它正在向哪个方向移动。当它即将离开屏幕时，翻转方向。例如，如果方向为 +1，则将其更改为 -1，反之亦然。

这是我创建的一个简单示例：

```
public class Alien extends JPanel 

    private int x = 5;
    private int y = 5;
    private int direction = 1;

    @Override
    public void paint(Graphics g) {
        super.paint(g);
        g.clearRect(x, y, getWidth(), getHeight());

        // draw the alien.
        g.drawRect(x, y, 10, 10);

        // move it
        x = x + 5 * direction;

        // is it about to go off-screen?
        if (x < 0 || x + 10 > getWidth()) {
            // change the direction
            direction *= -1;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:39:18.757

根据您的评论，您希望外星人在到达屏幕边界后从左向右移动，而不是从另一侧重新进入。

解决方案很简单，你必须跟踪外星人的方向。一个简单的方法是让它的步长成为一个变量。

你给你的 Alien 类一个`step`这样的成员：

```
int step = -2; 
```

然后：

```
bounds.x = bounds.x + direction;

if ((bounds.x + bounds.width)< 0)
{
    step = +2;
}
else if ((bounds.x - bound.width) > 750)
{
    step = -2;
}
dead = false;

g.drawImage(Alien,bounds.x,bounds.y,bounds.width, bounds.height, this); 
```

题外话，我认为`dead = false`不属于你的`paint`方法。

# php - 将 mongo 查询翻译成 php mongo

> ID：11862402
> 
> 赞同：1
> 
> 时间：2012-08-08T10:18:17.327
> 
> 标签：php, mongodb, database

我正在使用 mongodb 构建一个基本的搜索引擎，我已经验证了基本查询在 mongo shell 中工作。不过，我不太了解如何将其翻译成 PHP。

输入字符串中的空格表示“和”运算符和 | 或管道字符是“或”运算符。输入查询更改，但可能是以下内容（减去引号！）：

```
'o g|ra' 
```

这相当于写：

```
(o&&g)||(ra) 
```

基本的 mongo 查询（请注意，我并不是每次都试图翻译这个确切的查询，我需要它在 $ands 和 $ors 的数量方面具有灵活性）。已经对此进行了测试，并且效果很好：

```
db.scores.find({$or:[{Title:/o/i, Title: /g/i},{Title:/ra/i}]) 
```

我在 PHP 中生成的代码是这样的：

```
if(strstr($textInput, '|') != FALSE)
{
    foreach($orArray as $item)
    {
        $itemMod = explode( " " , $item);
        array_push($stringArray, $itemMod);
    }

    $masterAndQueryStack = array();

    foreach ($stringArray as $varg)
    {
            $multiAndQuerySet = array();

            foreach ($varg as $obj)
            {
                $searchText = '/'. $obj .'/i';
                $regexObj = new MongoRegex( $searchText ) ; 
                $singleQuery = array('Title' => $regexObj); 
                array_push($multiAndQuerySet , $singleQuery);
            }
            array_push($masterAndQueryStack , $multiAndQuerySet);

    }

    $orAndQueryStack =  array('$or' => $masterAndQueryStack);
    return $orAndQueryStack ;
} 
```

这是 PHP 代码返回的查询，您可以看到 和 术语已放入数组中。如果不将它们推送到数组，我看不到任何存储这些的方法，但是似乎 mongodb 的 $or 不喜欢接受数组，我只是不确定如何重新设计搜索算法来解决这个问题。

```
Array 
(
    [$or] => Array
    (
        [0] => Array 
        ( 
            [0] => Array ( [Title] => MongoRegex Object ( [regex] => o [flags] => i ) )
            [1] => Array ( [Title] => MongoRegex Object ( [regex] => g [flags] => i ) ) 
        )
        [1] => Array 
        ( 
            [0] => Array ( [Title] => MongoRegex Object ( [regex] => ra [flags] => i ) ) 
        ) 
    ) 
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:13:40.597

为了进一步解释我的评论，我将告诉您有关 $and 运算符的信息：[http ://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24and](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24and)

您可以将其嵌套在您的第一个 $ 或制作中：

```
Array 
(
    [$or] => Array
    (
        [0] => Array
        (
            [$and] => Array 
            ( 
            [0] => Array ( [Title] => MongoRegex Object ( [regex] => o [flags] => i ) )
            [1] => Array ( [Title] => MongoRegex Object ( [regex] => g [flags] => i ) ) 
            )
        )
        [1] => Array 
        ( 
            [Title] => MongoRegex Object ( [regex] => ra [flags] => i ) 
        ) 
    ) 
) 
```

像那样。您还可以在正则表达式中执行 $and 查询，这里有一些关于正则表达式语法的信息：[http ://www.regular-expressions.info/refadv.html](http://www.regular-expressions.info/refadv.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:01:33.110

不确定您必须搜索哪种类型的数据集，但您当前的方法存在一些重大限制：

*   [不区分大小写的正则表达式匹配将导致全索引扫描](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)
*   您正在将多个正则表达式匹配与 $or 组合（增加性能开销）
*   匹配结果没有相关性排序

如果您没有要搜索的大型数据集，上述所有注意事项可能都很好。

一些性能更高的替代方案是：

*   使用标签索引或标记化搜索关键字（请参阅相关的 wiki 页面[全文搜索在 Mongo 中](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo)）
*   [使用功能更全的全文搜索产品（参见 SO： NoSQL 数据库中的全文搜索的](https://stackoverflow.com/questions/5453872/full-text-search-in-nosql-databases)相关讨论）

# php - 尝试从 php 中的查询结果中定义变量

> ID：11862410
> 
> 赞同：2
> 
> 时间：2012-08-08T10:18:57.573
> 
> 标签：php, variables

我正在尝试从查询结果中定义变量，但我无法让它发挥作用。我试图让我的网站多语言，所以我想定义很多我存储在数据库中的文本项（标识符）。该表如下所示：

```
ID, Identifier, English, Dutch
1, Owned_by, "Owned by", "Eigendom van"
2, Owner_of, "Owner of", "Eigenaar van"
etc
etc 
```

其中列标识符是我要定义的变量，两种语言中的一种是我要赋予变量的值。我已经定义了先前的查询，其结果是用户请求的语言，因此 $language_2 是先前查询的结果。因此，当 $language_2 = "Dutch" 时，我希望表中的所有记录都使用“Dutch”列中的值进行定义。

当我使用下面的代码时，将打印（回显）变量，但我不能将它们用作在我的站点中使用的实际变量。

```
$sql_3 = "SELECT Identifier, ".$language_2." as Language FROM translate";
$result_3 = mysql_query($sql_3) OR die (mysql_error());
while ($row_3 = mysql_fetch_array($result_3))
{
echo "$".$row_3['Identifier']." = '".$row_3['Language']."';<BR>";
} 
```

我怎样才能让它们真正成为我可以在我的站点中使用的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:21:44.997

Add brackets arround the string that is the variable name:

```
${$row_3['Identifier']} = $row_3['Language']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:22:57.943

如果您必须使用旧函数，您可以使用`mysql_fetch_assoc()`获取[关联数组](http://php.net/manual/en/function.mysql-fetch-assoc.php)`mysql_*`，然后使用变量变量来获取您想要的

```
$$row_3['Identifier'] = $row_3['Language']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:23:50.930

```
${$row_3['Identifier']} = $row_3['Language']; 
```

# dependencies - 常春藤解决错误的依赖

> ID：11862411
> 
> 赞同：1
> 
> 时间：2012-08-08T10:18:59.650
> 
> 标签：dependencies, ivy

我正在使用 Ivy 来解决项目中的依赖关系。

我的依赖`ivy.xml`

```
<dependency org="org.mule.tools" name="ibean-archetype" rev="3.1.0" 
            conf="compile;runtime"/> 
```

我在控制台中收到错误消息

```
[ivy:resolve] :: problems summary ::
[ivy:resolve] :::: WARNINGS
[ivy:resolve]           [NOT FOUND  ] org.mule.tools#ibean-archetype;3.1.0!ibean
-archetype.maven-archetype (16ms)
[ivy:resolve]   ==== public: tried
[ivy:resolve]     http://192.168.101.173:8080/nexus/content/groups/public/org/mule/tools/ibean-archetype/3.1.0/ibean-archetype-3.1.0.maven-archetype
[ivy:resolve]           ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:resolve]           ::              FAILED DOWNLOADS            ::
[ivy:resolve]           :: ^ see resolution messages for details  ^ ::
[ivy:resolve]           ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:resolve]           :: org.mule.tools#ibean-archetype;3.1.0!ibean-archetype.maven-archetype
[ivy:resolve]           :::::::::::::::::::::::::::::::::::::::::::::: 
```

为什么`ibean-archetype-3.1.0.jar`下定决心`ibean-archetype-3.1.0.maven-archetype`？？？我很困惑。

我的常春藤使用nexus和nexus中的 `ibean-archetype-3.1.0.jar`信息

```
<dependency>
  <groupId>org.mule.tools</groupId>
  <artifactId>ibean-archetype</artifactId>
  <version>3.1.0</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-20T11:24:18.400

我有同样的问题...

对我来说，解决问题的是更改以下行：

```
<dependency org="io.takari.junit" name="takari-cpsuite" rev="1.2.7"/> 
```

至：

```
<dependency org="io.takari.junit" name="takari-cpsuite" rev="1.2.7">
        <artifact name="takari-cpsuite"/>
</dependency> 
```

我什至不需要在 artifact-name 中指定 ext 或 type 属性来解决问题。

我认为 Ivy 错误地将 pom（已解析库）的包装标签的内容作为扩展名......

我们的两个库`<packaging>`在 .pom 中都有这个标签，

请参阅 [ibean-archetype](http://search.maven.org/#artifactdetails|org.mule.tools|ibean-archetype|3.2.0-M1|maven-archetype)（对于您使用的库）和 [takari](http://search.maven.org/#artifactdetails|io.takari.junit|takari-cpsuite|1.2.7|takari-jar)（对于我使用的库）

# jquery-ui - 自定义 jquery 移动主题

> ID：11862412
> 
> 赞同：1
> 
> 时间：2012-08-08T10:19:00.497
> 
> 标签：jquery-ui, jquery-mobile, themes

我开始构建基于 jquery 移动的应用程序并开始使用[http://jquerymobile.com/themeroller/](http://jquerymobile.com/themeroller/)自定义其主题， 但我没有足够的选项来自定义它，所以我问是否有一些工具可以进一步自定义它?

但是[http://jqueryui.com/themeroller/#](http://jqueryui.com/themeroller/#)有更多选项，但我不确定我可以使用它，因为它的 jquery 而不是 jquery mobile

# opengl - OpenGL - 如何在不影响纹理的情况下跳入单个 TRIANGLE_STRIP？

> ID：11862416
> 
> 赞同：3
> 
> 时间：2012-08-08T10:19:14.717
> 
> 标签：opengl, geometry, textures, gaps-and-islands, gl-triangle-strip

如果将同一个顶点 A 多次放入三角形带中，然后取另一个顶点 B 并将其多次放入三角形带中（数量取决于要继续使用的三角形方向），则可以有效地拥有两个单独的三角形条带仅通过一个绘制调用来渲染（第一个包含顶点 A 之前的所有三角形，第二个包含顶点 B 之后的所有三角形）。

我的问题：

恐怕，即使完整的三角形条带绘制调用将绘制几何简单连接的网格，我在尝试对网格进行纹理处理时也会遇到问题，因为它们之间存在跳跃。我还没到那里，所以我无法测试它。我的假设正确吗？无论如何，在“绘图网格”行业中，我在三角形带中的跳跃是一种有效的技术吗？有什么方法可以适当地对结果进行纹理化，或者有一个等效的更好的跳跃替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:55:11.387

考虑一个由细分为 4 个相似三角形的三角形组成的“网格”：

```
 2
       /\
      /  \
   1 /____\3
    /\    /\
   /  \  /  \
0 /____\/4___\5 
```

假设逆时针（glFrontFace）绕组，三角形：`{0,4,1}, {1,4,3}, {3,2,1}`被编码为条带：`{0,4,1,3,2}`。诀窍是添加三角形：`{4,5,3}`通过添加退化（零面积）三角形，同时保持正确的绕组。简而言之：

`{0,4,1,3,2,2,3,3,5,4}`，添加零面积三角形：`{3,2,2}, {2,2,3}, {3,3,5}`。

如果使用有效的网格[条带化](http://www.google.com.au/search?q=triangle%20mesh%20striping&sugexp=chrome,mod=17&sourceid=chrome&ie=UTF-8)，这会为较大的网格添加可忽略不计的额外几何形状。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:48:15.720

光栅器绘制三角形的区域。具有两个相同点的“三角形”没有面积。因此，没有要渲染的三角形区域。

退化三角形（两个点相同的三角形的技术术语）是连接多个条带的常用技术。这通常在索引数组中通过添加更多索引来完成；网格的实际拓扑无需更改。

# .net - 大型数据库更新无错误信息

> ID：11862417
> 
> 赞同：0
> 
> 时间：2012-08-08T10:19:25.217
> 
> 标签：.net, sql-server, asp.net-mvc

我有一个相对较大但并不庞大的发票生成过程，它创建了一批发票和项目，然后更新了一个 sql 数据库，直到现在一切都运行良好，该过程似乎停止了中途而没有显示任何错误消息或突然停止的原因。

我完全被我的测试环境难住了 我增加了执行超时

```
<httpRuntime
    maxRequestLength="1048576"
    executionTimeout="3600" /> 
```

这似乎有帮助，但服务器仍然失败，没有任何错误很难指出问题，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:09:44.017

由于它是从 UI 保存数据，增加数据库的超时没有任何意义，所以问题似乎只与您的连接部分有关，因为数据被保存，连接丢失并且数据没有完全保存。
尝试使用类似的东西

```
SqlCommand cmd = new SqlCommand("MyReport", conn);
cmd.CommandType = CommandType.StoredProcedure;
cmd.CommandTimeout = 3660; 
```

或者

```
<configuration>
   <appSettings>
      <add name="CommandTimeout" value="3600" />
   </appSettings>
</configuration> 
```

# android - 在发布我的应用之前在 play.google 上获取我的应用的链接

> ID：11862418
> 
> 赞同：8
> 
> 时间：2012-08-08T10:19:33.907
> 
> 标签：android, facebook, hyperlink, google-play

我想使用 facebook api 分享到我的应用程序的链接（play.google 上的链接）。但我必须在将应用程序投放市场之前将其放入我的代码中。除了在发布后立即更新我的应用程序之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T10:20:54.753

用这个

```
https://play.google.com/store/apps/details?id=<your package name> 
```

你可以通过这种方式获取包名。

```
 String packageName = getApplicationContext().getPackageName(); 
```

目前它不会显示任何应用程序，但在发布后会自动重定向到您的应用程序页面。

# android - Android显示两个地理点之间的行车路线

> ID：11862420
> 
> 赞同：2
> 
> 时间：2012-08-08T10:19:41.767
> 
> 标签：android, routes, direction, geopoints

我已经用谷歌搜索了 2-3 天，但我无法为我的问题找到完美的解决方案。

我需要显示两个地理点之间的路线（不是直线，但需要显示行驶方向的路线），但我无法找到任何解决方案。我遇到了[这个问题](https://stackoverflow.com/questions/2023669/j2me-android-blackberry-driving-directions-route-between-two-locations)的解决方案。

但我猜这个解决方案也不起作用。如果你能帮助我，那就太好了。

我找到了解决方案在下面寻找答案...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:25:57.453

我正在使用这个

```
 String url = RoadProvider.getUrl(fromLat, fromLon, toLat, toLon);
 InputStream is = getConnection(url);
 mRoad = RoadProvider.getRoute(is);
 mHandler.sendEmptyMessage(0); 
```

并在处理程序中

```
 MapOverlay mapOverlay = new MapOverlay(mRoad, mapView);
 List<Overlay> listOfOverlays = mapView.getOverlays();
 listOfOverlays.add(mapOverlay); 
```

这是`roadprovider.java`

```
package com.singPost;

import java.io.IOException;
import java.io.InputStream;
import java.util.Stack;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class RoadProvider 
{

        public static Road getRoute(InputStream is) 
        {
                KMLHandler handler = new KMLHandler();
                try {
                        SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
                        parser.parse(is, handler);
                } catch (ParserConfigurationException e) {
                        e.printStackTrace();
                } catch (SAXException e) {
                        e.printStackTrace();
                } catch (IOException e) {
                        e.printStackTrace();
                }
                return handler.mRoad;
        }

        public static String getUrl(double fromLat, double fromLon, double toLat, double toLon) 
        {
            // connect to map web service
                StringBuffer urlString = new StringBuffer();
                urlString.append("http://maps.google.com/maps?f=d&hl=en");
                urlString.append("&saddr=");// from
                urlString.append(Double.toString(fromLat));
                urlString.append(",");
                urlString.append(Double.toString(fromLon));
                urlString.append("&daddr=");// to
                urlString.append(Double.toString(toLat));
                urlString.append(",");
                urlString.append(Double.toString(toLon));
                urlString.append("&ie=UTF8&0&om=0&output=kml");
                return urlString.toString();
        }
}

class KMLHandler extends DefaultHandler {
        Road mRoad;
        boolean isPlacemark;
        boolean isRoute;
        boolean isItemIcon;
        private Stack mCurrentElement = new Stack();
        private String mString;

        public KMLHandler() {
                mRoad = new Road();
        }

        public void startElement(String uri, String localName, String name,
                        Attributes attributes) throws SAXException {
                mCurrentElement.push(localName);
                if (localName.equalsIgnoreCase("Placemark")) {
                        isPlacemark = true;
                        mRoad.mPoints = addPoint(mRoad.mPoints);
                } else if (localName.equalsIgnoreCase("ItemIcon")) {
                        if (isPlacemark)
                                isItemIcon = true;
                }
                mString = new String();
        }

        public void characters(char[] ch, int start, int length)
                        throws SAXException {
                String chars = new String(ch, start, length).trim();
                mString = mString.concat(chars);
        }

        public void endElement(String uri, String localName, String name)
                        throws SAXException {
                if (mString.length() > 0) {
                        if (localName.equalsIgnoreCase("name")) {
                                if (isPlacemark) {
                                        isRoute = mString.equalsIgnoreCase("Route");
                                        if (!isRoute) {
                                                mRoad.mPoints[mRoad.mPoints.length - 1].mName = mString;
                                        }
                                } else {
                                        mRoad.mName = mString;
                                }
                        } else if (localName.equalsIgnoreCase("color") && !isPlacemark) {
                                mRoad.mColor = Integer.parseInt(mString, 16);
                        } else if (localName.equalsIgnoreCase("width") && !isPlacemark) {
                                mRoad.mWidth = Integer.parseInt(mString);
                        } else if (localName.equalsIgnoreCase("description")) {
                                if (isPlacemark) {
                                        String description = cleanup(mString);
                                        if (!isRoute)
                                                mRoad.mPoints[mRoad.mPoints.length - 1].mDescription = description;
                                        else
                                                mRoad.mDescription = description;
                                }
                        } else if (localName.equalsIgnoreCase("href")) {
                                if (isItemIcon) {
                                        mRoad.mPoints[mRoad.mPoints.length - 1].mIconUrl = mString;
                                }
                        } else if (localName.equalsIgnoreCase("coordinates")) {
                                if (isPlacemark) {
                                        if (!isRoute) {
                                                String[] xyParsed = split(mString, ",");
                                                double lon = Double.parseDouble(xyParsed[0]);
                                                double lat = Double.parseDouble(xyParsed[1]);
                                                mRoad.mPoints[mRoad.mPoints.length - 1].mLatitude = lat;
                                                mRoad.mPoints[mRoad.mPoints.length - 1].mLongitude = lon;
                                        } else {
                                                String[] coodrinatesParsed = split(mString, " ");
                                                int lenNew = coodrinatesParsed.length;
                                                int lenOld = mRoad.mRoute.length;
                                                double[][] temp = new double[lenOld + lenNew][2];
                                                for (int i = 0; i < lenOld; i++) {
                                                        temp[i] = mRoad.mRoute[i];
                                                }
                                                for (int i = 0; i < lenNew; i++) {
                                                        String[] xyParsed = split(coodrinatesParsed[i], ",");
                                                        for (int j = 0; j < 2 && j < xyParsed.length; j++)
                                                                temp[lenOld + i][j] = Double
                                                                                .parseDouble(xyParsed[j]);
                                                }
                                                mRoad.mRoute = temp;
                                        }
                                }
                        }
                }
                mCurrentElement.pop();
                if (localName.equalsIgnoreCase("Placemark")) {
                        isPlacemark = false;
                        if (isRoute)
                                isRoute = false;
                } else if (localName.equalsIgnoreCase("ItemIcon")) {
                        if (isItemIcon)
                                isItemIcon = false;
                }
        }

        private String cleanup(String value) {
                String remove = "<br/>";
                int index = value.indexOf(remove);
                if (index != -1)
                        value = value.substring(0, index);
                remove = "&#160;";
                index = value.indexOf(remove);
                int len = remove.length();
                while (index != -1) {
                        value = value.substring(0, index).concat(
                                        value.substring(index + len, value.length()));
                        index = value.indexOf(remove);
                }
                return value;
        }

        public Point2[] addPoint(Point2[] points)
        {
                Point2[] result = new Point2[points.length + 1];
                for (int i = 0; i < points.length; i++)
                        result[i] = points[i];
                result[points.length] = new Point2();
                return result;
        }

        private static String[] split(String strString, String strDelimiter)
        {
                String[] strArray;
                int iOccurrences = 0;
                int iIndexOfInnerString = 0;
                int iIndexOfDelimiter = 0;
                int iCounter = 0;
                if (strString == null) 
                {
                        throw new IllegalArgumentException("Input string cannot be null.");
                }
                if (strDelimiter.length() <= 0 || strDelimiter == null) 
                {
                        throw new IllegalArgumentException("Delimeter cannot be null or empty.");
                }
                if (strString.startsWith(strDelimiter))
                {
                        strString = strString.substring(strDelimiter.length());
                }
                if (!strString.endsWith(strDelimiter))
                {
                        strString += strDelimiter;
                }
                while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
                                iIndexOfInnerString)) != -1) 
                {
                        iOccurrences += 1;
                        iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
                }
                strArray = new String[iOccurrences];
                iIndexOfInnerString = 0;
                iIndexOfDelimiter = 0;
                while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
                                iIndexOfInnerString)) != -1) 
                {
                        strArray[iCounter] = strString.substring(iIndexOfInnerString,
                                        iIndexOfDelimiter);
                        iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
                        iCounter += 1;
                }

                return strArray;
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:22:48.837

嘿伙计们链接中的问题我找到了

Google 已停止以 KML 格式提供 api 响应

同样的解决方案也在[这里](https://stackoverflow.com/a/11745316/1230123)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-23T04:51:14.157

这对我很有用：
**这不是我的代码**，我从 stackoverflow 的一个很好的答案中得到它，但我现在找不到这个答案，所以这里是代码：

将此类添加到您的项目中：

```
package ...;

import java.io.InputStream;
import java.util.ArrayList;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

import com.google.android.gms.maps.model.LatLng;

import android.content.Context;
import android.util.Log;

public class GMapV2Direction {
public final static String MODE_DRIVING = "driving";
public final static String MODE_WALKING = "walking";

public GMapV2Direction() {
}

public Document getDocument(LatLng start, LatLng end, String mode) {
    String url = "http://maps.googleapis.com/maps/api/directions/xml?"
            + "origin=" + start.latitude + "," + start.longitude
            + "&destination=" + end.latitude + "," + end.longitude
            + "&sensor=false&units=metric&mode=driving";
    Log.d("url", url);
    try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse response = httpClient.execute(httpPost, localContext);
        InputStream in = response.getEntity().getContent();
        DocumentBuilder builder = DocumentBuilderFactory.newInstance()
                .newDocumentBuilder();
        Document doc = builder.parse(in);
        return doc;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

public String getDurationText(Document doc) {
    try {

        NodeList nl1 = doc.getElementsByTagName("duration");
        Node node1 = nl1.item(0);
        NodeList nl2 = node1.getChildNodes();
        Node node2 = nl2.item(getNodeIndex(nl2, "text"));
        Log.i("DurationText", node2.getTextContent());
        return node2.getTextContent();
    } catch (Exception e) {
        return "0";
    }
}

public int getDurationValue(Document doc) {
    try {
        NodeList nl1 = doc.getElementsByTagName("duration");
        Node node1 = nl1.item(0);
        NodeList nl2 = node1.getChildNodes();
        Node node2 = nl2.item(getNodeIndex(nl2, "value"));
        Log.i("DurationValue", node2.getTextContent());
        return Integer.parseInt(node2.getTextContent());
    } catch (Exception e) {
        return -1;
    }
}

public String getDistanceText(Document doc) {
    /*
     * while (en.hasMoreElements()) { type type = (type) en.nextElement();
     * 
     * }
     */

    try {
        NodeList nl1;
        nl1 = doc.getElementsByTagName("distance");

        Node node1 = nl1.item(nl1.getLength() - 1);
        NodeList nl2 = null;
        nl2 = node1.getChildNodes();
        Node node2 = nl2.item(getNodeIndex(nl2, "value"));
        Log.d("DistanceText", node2.getTextContent());
        return node2.getTextContent();
    } catch (Exception e) {
        return "-1";
    }

    /*
     * NodeList nl1; if(doc.getElementsByTagName("distance")!=null){ nl1=
     * doc.getElementsByTagName("distance");
     * 
     * Node node1 = nl1.item(nl1.getLength() - 1); NodeList nl2 = null; if
     * (node1.getChildNodes() != null) { nl2 = node1.getChildNodes(); Node
     * node2 = nl2.item(getNodeIndex(nl2, "value")); Log.d("DistanceText",
     * node2.getTextContent()); return node2.getTextContent(); } else return
     * "-1";} else return "-1";
     */
}

public int getDistanceValue(Document doc) {
    try {
        NodeList nl1 = doc.getElementsByTagName("distance");
        Node node1 = null;
        node1 = nl1.item(nl1.getLength() - 1);
        NodeList nl2 = node1.getChildNodes();
        Node node2 = nl2.item(getNodeIndex(nl2, "value"));
        Log.i("DistanceValue", node2.getTextContent());
        return Integer.parseInt(node2.getTextContent());
    } catch (Exception e) {
        return -1;
    }
    /*
     * NodeList nl1 = doc.getElementsByTagName("distance"); Node node1 =
     * null; if (nl1.getLength() > 0) node1 = nl1.item(nl1.getLength() - 1);
     * if (node1 != null) { NodeList nl2 = node1.getChildNodes(); Node node2
     * = nl2.item(getNodeIndex(nl2, "value")); Log.i("DistanceValue",
     * node2.getTextContent()); return
     * Integer.parseInt(node2.getTextContent()); } else return 0;
     */
}

public String getStartAddress(Document doc) {
    try {
        NodeList nl1 = doc.getElementsByTagName("start_address");
        Node node1 = nl1.item(0);
        Log.i("StartAddress", node1.getTextContent());
        return node1.getTextContent();
    } catch (Exception e) {
        return "-1";
    }

}

public String getEndAddress(Document doc) {
    try {
        NodeList nl1 = doc.getElementsByTagName("end_address");
        Node node1 = nl1.item(0);
        Log.i("StartAddress", node1.getTextContent());
        return node1.getTextContent();
    } catch (Exception e) {
        return "-1";        
}
}
public String getCopyRights(Document doc) {
    try {
        NodeList nl1 = doc.getElementsByTagName("copyrights");
        Node node1 = nl1.item(0);
        Log.i("CopyRights", node1.getTextContent());
        return node1.getTextContent();
    } catch (Exception e) {
    return "-1";
    }

}

public ArrayList<LatLng> getDirection(Document doc) {
    NodeList nl1, nl2, nl3;
    ArrayList<LatLng> listGeopoints = new ArrayList<LatLng>();
    nl1 = doc.getElementsByTagName("step");
    if (nl1.getLength() > 0) {
        for (int i = 0; i < nl1.getLength(); i++) {
            Node node1 = nl1.item(i);
            nl2 = node1.getChildNodes();

            Node locationNode = nl2
                    .item(getNodeIndex(nl2, "start_location"));
            nl3 = locationNode.getChildNodes();
            Node latNode = nl3.item(getNodeIndex(nl3, "lat"));
            double lat = Double.parseDouble(latNode.getTextContent());
            Node lngNode = nl3.item(getNodeIndex(nl3, "lng"));
            double lng = Double.parseDouble(lngNode.getTextContent());
            listGeopoints.add(new LatLng(lat, lng));

            locationNode = nl2.item(getNodeIndex(nl2, "polyline"));
            nl3 = locationNode.getChildNodes();
            latNode = nl3.item(getNodeIndex(nl3, "points"));
            ArrayList<LatLng> arr = decodePoly(latNode.getTextContent());
            for (int j = 0; j < arr.size(); j++) {
                listGeopoints.add(new LatLng(arr.get(j).latitude, arr
                        .get(j).longitude));
            }

            locationNode = nl2.item(getNodeIndex(nl2, "end_location"));
            nl3 = locationNode.getChildNodes();
            latNode = nl3.item(getNodeIndex(nl3, "lat"));
            lat = Double.parseDouble(latNode.getTextContent());
            lngNode = nl3.item(getNodeIndex(nl3, "lng"));
            lng = Double.parseDouble(lngNode.getTextContent());
            listGeopoints.add(new LatLng(lat, lng));
        }
    }

    return listGeopoints;
}

private int getNodeIndex(NodeList nl, String nodename) {
    for (int i = 0; i < nl.getLength(); i++) {
        if (nl.item(i).getNodeName().equals(nodename))
            return i;
    }
    return -1;
}

private ArrayList<LatLng> decodePoly(String encoded) {
    ArrayList<LatLng> poly = new ArrayList<LatLng>();
    int index = 0, len = encoded.length();
    int lat = 0, lng = 0;
    while (index < len) {
        int b, shift = 0, result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        LatLng position = new LatLng((double) lat / 1E5, (double) lng / 1E5);
        poly.add(position);
    }
    return poly;
}
} 
```

然后根据您的需要使用此类：例如绘制方向：

```
md = new GMapV2Direction();
mMap = ((SupportMapFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.map)).getMap();
Document doc = md.getDocument(sourcePosition, destPosition,
                    GMapV2Direction.MODE_DRIVING);

ArrayList<LatLng> directionPoint = md.getDirection(doc);
            PolylineOptions rectLine = new PolylineOptions().width(3).color(
                    Color.RED);

            for (int i = 0; i < directionPoint.size(); i++) {
                rectLine.add(directionPoint.get(i));
            }
            Polyline polylin = mMap.addPolyline(rectLine); 
```

sourcePosition, destPosition 来自 LatLng 类型，你给他们想要的分数。我在这里写了我认为可以提供帮助的代码部分，欢迎提出任何问题。

# mysql - 创建仅限于一条记录的表

> ID：11862421
> 
> 赞同：0
> 
> 时间：2012-08-08T10:19:44.887
> 
> 标签：mysql, limit

我们可以在mysql中创建一个仅限于一条记录的表吗？例如：输入利率。应该只有一个记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:22:44.270

另一种选择：你为什么不***按日期****保持利率***？**

 **```
date (DATE, primary) | interest_rate (FLOAT) 
```

这样，您甚至可以获得可用的利率历史记录，无需限制行数，并且您仍然可以获得每天一次利率的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:21:14.380

我认为这在 MySQL 中是不可能的，但你可以通过`TRIGGER`在你的兴趣表上写来做一些技巧。**

# c# - 如果属性已填充，则添加谓词

> ID：11862428
> 
> 赞同：0
> 
> 时间：2012-08-08T10:20:17.230
> 
> 标签：c#, linq

假设，我有一堂课：

```
public class PersonalInfo
{
   public string Firsname {get;set;}
   public string Lastname {get;set;}
   public string Email {get;set;}
   public string Phone {get;set;}
} 
```

数据来自文件。而且，我需要通过这个属性从文件中选择数据：

```
private IList<PersonalInfo> FindByPersonalData(string firstName, string lastName, string email, string phone)
{
...
} 
```

有几个属性可以为空，但如果它们被填满，则按它们进行搜索。我可以检查每个组合，但它很难看。什么是最好的解决方案？
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T10:26:06.573

一个典型的子查询是在每个字段上使用短路。对你的数据结构做一些假设，可能看起来像这样：

```
var result = from p in PersonalInfoList
         where (string.IsNullOrEmpty(firstName) || firstName == p.FirstName)
            && (string.IsNullOrEmpty(lastName) || lastName == p.LastName)
            && (string.IsNullOrEmpty(email) || email == p.Email)
            && (string.IsNullOrEmpty(phone) || phone == p.Phone)
         select p 
```

或者，取决于您的 Linq 偏好：

```
var result = PersonalInfoList.Where(p =>
            (string.IsNullOrEmpty(firstName) || firstName == p.FirstName)
            && (string.IsNullOrEmpty(lastName) || lastName == p.LastName)
            && (string.IsNullOrEmpty(email) || email == p.Email)
            && (string.IsNullOrEmpty(phone) || phone == p.Phone)) 
```

因此，如果任何参数为空/空，将跳过与数据的比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:50:46.133

你可以更优雅地完成你的任务，像这样积累过滤器表达式：

```
Expression<Func<PersonalInfo, bool>> filterExperssion = PredicateExtensions.True<PersonalInfo>();

            if (!String.IsNullOrEmpty(firstName))
                filterExperssion = filterExperssion.And(p => p.FirstName == firstName);
            if (!String.IsNullOrEmpty(lastName))
                ...... 
```

你需要这个小类助手来构建谓词

```
public static class PredicateExtensions
            {
                public static Expression<Func<T, bool>> True<T>() { return f => true; }
                public static Expression<Func<T, bool>> False<T>() { return f => false; }

                public static Expression<Func<T, bool>> Or<T>(this Expression<Func<T, bool>> expression1, Expression<Func<T, bool>> expression2)
                {
                    var invokedExpression = Expression.Invoke(expression2, expression1.Parameters.Cast<Expression>());
                    return Expression.Lambda<Func<T, bool>>
                          (Expression.Or(expression1.Body, invokedExpression), expression1.Parameters);
                }

                public static Expression<Func<T, bool>> And<T>(this Expression<Func<T, bool>> expression1,
                                                                    Expression<Func<T, bool>> expression2)
                {
                    var invokedExpression = Expression.Invoke(expression2, expression1.Parameters.Cast<Expression>());
                    return Expression.Lambda<Func<T, bool>>
                          (Expression.And(expression1.Body, invokedExpression), expression1.Parameters);
                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:27:57.760

@Dan Puzey 的回答非常适合这种情况。但是很高兴知道您可以增量构建 linq 查询：

```
var result = source_list as IEnumerable<IPersonalInfo>;
if (!String.IsNullOrEmpty(firstName))
   result = result.Where(p => p.FirstName == firstName);
if (!String.IsNullOrEmpty(lastName))
   result = result.Where(p => p.LastName == lastName);

... other ifs for other fields ...

return result.ToList(); 
```

# javascript - 在与服务器脚本运行的驱动器不同的驱动器中打开文件

> ID：11862429
> 
> 赞同：0
> 
> 时间：2012-08-08T10:20:17.523
> 
> 标签：javascript, html, perl, window.open, drive

我正在开发一个 Perl 程序，我必须生成一个`.csv`文件，其中包含从执行的查询中获得的数据。我的程序运行良好，它可以正确生成 .csv 文件并进入我想要的路径，即`D:\\Tabelle\name_of_the_csv_file.csv`. 我的 inetpub 文件夹在`C:\\`驱动器内，所以程序。

问题是，我生成了一个 HTML 页面，其中包含一个`"onclick"`属性设置为 window.open( `D:\\Tabelle\name_of_the_csv_file.csv`) 的按钮，以便用户可以根据需要下载文件，但是当我单击它时，它只会打开一个空白页面，里面没有任何东西。这是我有按钮的页面的 HTML 部分：

```
 <form action='' method=get>
         <table align="center">
           <tr>
                <td align="center" colspan=3>
                       <input align="middle" type=button name="csvObtain" value="Esporta tabella in .csv" onclick="window.open('d:\tabelle\Tabella-2012-8-8-12.11.30.csv')">
                </td>

           </tr>
         </table>
    </form> 
```

有人可以帮我解决这个问题吗？我必须创建不同的 JavaScript 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:25:45.387

像这样使用 window.open ，

```
 window.open(D:\Tabelle\name_of_the_csv_file.csv) 
```

它应该引用客户端计算机上的路径，因为路径是在 javascript 中的。如果您希望文件可作为可下载项目使用，只需将`D\tabelle`文件夹映射为应用程序中的子目录（虚拟目录）并使用文件的相对路径。

# database - how to handle huge volume of data transfer in gwt?

> ID：11862432
> 
> 赞同：1
> 
> 时间：2012-08-08T10:20:27.933
> 
> 标签：database, spring, gwt, google-chrome

I have to transfer a huge number of data from database to client side using gwt RPC. the data gets fetched by the service but during mapping of bean it returns error.

Returning cached instance of singleton bean 'org.springframework.context.annotation.internalScheduledAnnotationProcessor' - **on terminal**

Something other than an int was returned from JSNI method '@com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader::readInt()': JS value of type Java Object com.google.gwt.dev.shell.JsValueOOPHM$DispatchObjectOOPHM, expected int - **on browser**

why might this happen?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:59:17.633

使用开发模式时，这是 Chrome 中的一个已知错误。它已经有一段时间了。它[在这里](http://code.google.com/p/google-web-toolkit/issues/detail?id=5778)被跟踪。目前唯一的解决方法是使用 Firefox 而不是 Chrome。

# php - Highcharts exporting once again

> ID：11862434
> 
> 赞同：1
> 
> 时间：2012-08-08T10:20:39.477
> 
> 标签：php, excel, export, highcharts, xls

So i have chart like this [http://jsfiddle.net/9uDmV/](http://jsfiddle.net/9uDmV/)

I wrote function to get export link to xls

```
 {
  text: 'Download as xls',
  onclick: function() {
  location.href="getXLS.php?param1=param&param2=para2";}
   } 
```

But i don't want to use GET as export because it's redirect me to page getXLS. I want to make it like other functions (for example export to png, i click on it and download window appears)

I think I should use AJAX for this but don't know how exacly use it....

for saveing data to xls I will use [http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/) but first I need to POST that data without reloading the page to getXLS.

count on you, guys!

and sorry for bad english ;-)

index_ajax.html

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highcharts Example</title>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript">
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column',
                zoomType: 'xy'
            },
            title: {
                text: 'inbound datas'
            },
            subtitle: {
                text: 'last ten days'
            },
            xAxis: [{
                categories: ['2012-08-01', '2012-08-02', '2012-08-03', '2012-08-04', '2012-08-05', '2012-08-06', '2012-08-07', '2012-08-08', '2012-08-09', '2012-08-10', '2012-08-11', '2012-08-12']
            }],
            exporting: {
            buttons: {
                exportButton: {
                    menuItems: [{},
                    {},
                    {},
                    {}, /* leave standard buttons */
                    {
                        text: 'Download as xls',
                        onclick: function() {
                                    $.get("ajax.php", { param1: "param1", param2: "param2" } );
                                }
                    }]
                }
            }
        },
            yAxis: [{ 
                min: 0,
                max: 100,
                minorGridLineWidth: 0,
                gridLineWidth: 0,
                alternateGridColor: null,
                plotBands: [{ // High wind
                    from: 90,
                    to: 100,
                    color: 'rgba(68, 170, 213, 0.1)',
                    label: {
                        text: 'AR to get',
                        style: {
                            color: '#606060'
                        }
                    }
                }],
                title: {
                    text: 'AR'
                },
                stackLabels: {
                    enabled: true,
                    style: {
                        fontWeight: 'bold',
                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
                    }
                }
            },{ 
                min: 0,
                max: 8000,
                gridLineWidth: 1,
                title: {
                    text: 'Inbound',
                    style: {
                        color: '#AA4643'
                    }
                },
                labels: {
                    formatter: function() {
                        return this.value;
                    },
                    style: {
                        color: '#AA4643'
                    }
                },
                opposite: true
            }],
            tooltip: {
                formatter: function() {
                    var unit = {
                        'AR': '% ',
                        '1': '1',
                        '2': '2',
                        '3': '3'
                    }[this.series.name];

                    return ''+
                        this.x +': '+ this.y +' '+ unit;
                }
            },
            legend: {
                align: 'right',
                x: -100,
                verticalAlign: 'top',
                y: 20,
                floating: true,
                backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'white',
                borderColor: '#CCC',
                borderWidth: 1,
                shadow: false
            },
            plotOptions: {
                column: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true,
                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
                    }
                }
            },
            series: [{
                yAxis: 1,
                name: '1',
                data: [2000, 1000, 3000, 2000, 1000]
            }, {
                yAxis: 1,
                name: '2',
                data: [4000, 7000, 4000, 6000, 5000]
            }, {
                name: '3',
                type: 'spline',
                color: '#F7801F',
                yAxis: 0,
                data: [90, 80, 70, 90, 85],    
            }]
        });
    });

});
        </script>
    </head>
    <body>
<script src="js/highcharts.js"></script>
<script src="js/modules/exporting.js"></script>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

    </body>
</html> 
```

ajax.php

```
<?php
   echo 'a prompt windows should apper';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:09:22.937

如果我猜对了，你想强制下载而不是重定向？如果是这样，请将这些标题添加到顶部`getXLS.php`

```
<?php
  // We'll be outputting an excel file
header('Content-Type: application/vnd.ms-excel;'); // This should work for IE & Opera
header("Content-type: application/x-msexcel");    // This should work for the rest       
// It will be called dataAsExcel.xls
  header('Content-Disposition: attachment; filename="dataAsExcel.xls"');
?> 
```

这将指示浏览器您正在发送 excel 类型的文件，因此浏览器将通过`save as`对话框提示用户。

更多关于 php @ [http://php.net/manual/en/function.header.php中的标头](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:52:39.610

好的，如何做到这一点：

首先，制作函数

```
function postajax(datas)
{
$.post('PHPExcel/export/ajax.php', datas, function(retData) {
  $("body").append("<iframe src='PHPExcel/export/ajax.php' style='display: none;' ></iframe>");
}); 
} 
```

现在创建按钮来下载 xls 文件

```
buttons: {
            exportButton: {
                menuItems: [{},
                {},
                {},
                {}, /* leave standard buttons */
                {
                    text: 'Download as xls',
                    onclick: function() {
                        postajax('My vaariable') 
                    }
                }]
            }
        } 
```

就是这样，现在从[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)下载库 ，你就完成了！

非常感谢@Jugal Thakkar 的帮助和耐心！

# sdk - New iOS6 Maps: can they be stored? Can I provide offline maps on my app?

> ID：11862442
> 
> 赞同：1
> 
> 时间：2012-08-08T10:20:57.227
> 
> 标签：sdk, mkmapview, ios6, ios6-maps

I am currently developing an iPhone App which needs the maps to be stored. I was planning to use OpenStreetMaps but I would like to know if Apple would allow the new map tiles to be stored in order to show them offline. I can't find anything about it in the iOS Dev Center.

Thanks in advance.

# ios - 必应地图 API 交通信息

> ID：11862445
> 
> 赞同：0
> 
> 时间：2012-08-08T10:21:17.017
> 
> 标签：ios, bing-maps

我正在运行几个使用 Google 地图的应用程序。在 Android 和 Windows Phone 上，可以轻松地将当前交通信息显示为地图上的叠加层。但在 iOS 中，这[不是一个可行的选择](https://stackoverflow.com/questions/8821282/is-there-a-google-maps-api-for-ios-which-offers-traffic-information)。

最近微软[已将](http://conversations.nokia.com/2012/05/24/nokia-brings-live-traffic-advice-and-geocoding-to-bing/)诺基亚交通数据添加到 Bing 地图中，我想知道是否可以使用这些地图，包括 iOS 上的交通覆盖？（通过[iOS 地图控件](http://msdn.microsoft.com/en-us/library/gg191758.aspx)）。

如果您有任何想法或指点：非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:19:59.780

您可以在 iOS 上使用 Bing 地图交通磁贴数据，但唯一允许的方法是将 Bing 地图 V7 AJAX 控件与 PhoneGap 一起使用。这实际上是在 iOS 上开发 Bing 地图的推荐方法，并且性能良好。请查看此[博客文章](http://www.soulsolutions.com.au/Blog/tabid/73/EntryId/794/Bing-Maps-on-IPhone-with-Phone-Gap-Apache-Cordova.aspx)以开始使用。然后，您可以使用[交通模块](http://msdn.microsoft.com/en-us/library/hh312804.aspx)将交通流量数据提取到地图上。您还可以访问[Bing 地图 REST 交通服务](http://msdn.microsoft.com/en-us/library/hh441725.aspx)以提取交通事故数据。

# hadoop - error using -libjars while running map reduce job

> ID：11862446
> 
> 赞同：0
> 
> 时间：2012-08-08T10:21:17.010
> 
> 标签：hadoop

I am trying to run a map reduce job using hadoop jar command. I am trying to include external libraries using the -libjars option. The command that I am running currently is ***hadoop jar mapR.jar com.ms.hadoop.poc.CsvParser -libjars google-gson.jar Test1.txt output*** But I am recieveing this as the output ***usage: [input] [output]*** Can anyone please help me out. I have included the the exteranal libraries in my classpath as well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:48:51.340

你能列出你的`main(String args[])`方法的内容吗？您是否使用 ToolRunner 界面来启动您的工作？-libjars 参数的解析是 GenericOptionsParser 的一个函数，它通过 ToolRunner 实用程序类为您调用：

```
public class Driver extends Configured implements Tool {
    public static void main(String args[]) {
        System.exit(ToolRunner.run(new Driver(), args)));
    }

    public int run(String args[]) {
        Job job = new Job(getConf());
        Configuration conf = job.getConfiguration();

        // other job configuration

        return job.waitForCompletion(true) ? 0 : 1;
    }
} 
```

# php - 在主页自定义我的 wordpress 插件

> ID：11862450
> 
> 赞同：0
> 
> 时间：2012-08-08T10:21:34.470
> 
> 标签：php, wordpress, wordpress-theming

我正在使用这个插件[http://wordpress.org/extend/plugins/simple-rss-feeds-widget/](http://wordpress.org/extend/plugins/simple-rss-feeds-widget/) 这对我来说很好。我正在使用 WordPress 3.3.1。现在我希望我的插件在我的主页的中心，而不是在侧面小部件中。我怎样才能做到这一点。？我的意思是，我的插件在小部件列表中，我可以将我的插件拖到后端模板的侧边栏，它会反映在右上角的前端。如何在页面中心的主页中获取我的插件？希望有人能帮助我。换句话说，我怎样才能在我的模板文件中调用我的自定义插件？谢谢韩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:48:42.057

您需要在 functions.php 文件中注册一个新的小部件位置，然后添加代码以在相关模板文件中呈现该小部件的内容。

举个例子。在functions.php中，您会找到正在注册现有小部件位置的代码部分（查找`if (function_exists('register_sidebar')) {`）并在其下方注册一个新位置；

```
 register_sidebar(array(
        'name' => 'Home Widget Container',
        'id'   => 'home-widget',
        'description'   => 'These are widgets for the home position.',
        'before_widget' => '',
        'after_widget'  => '',
        'before_title'  => '<div class="home-widget-header"><h2>',
        'after_title'   => '</h2></div>'
    )); 
```

然后在您用于主页的模板文件中；

```
 <?php
        if (!function_exists('dynamic_sidebar') || !dynamic_sidebar('Home Widget Container')) :
            // This will include your widgets.
        endif; 
    ?> 
```

# ios - Using NSLog in Unit Test, the output is too slow, only few times are fast

> ID：11862456
> 
> 赞同：0
> 
> 时间：2012-08-08T10:21:50.800
> 
> 标签：ios, objective-c, multithreading, unit-testing, grand-central-dispatch

I'm facing a strange problem with using `NSLog` in iOS's unit test.

## The Code

Here is the test code I'm using in my unit test.

```
- (void)testExample
{
  NSOperationQueue *newqueue = [[NSOperationQueue alloc] init];
  NSURLRequest *request2 = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.apple.com"]];

  dispatch_semaphore_t sema2 = dispatch_semaphore_create(0);
  [NSURLConnection sendAsynchronousRequest:request2 queue:newqueue completionHandler:^(NSURLResponse *resp, NSData *data, NSError *error) {
    //    NSLog(@"2: Data: %@", data);
    printf("2: Data: %s\n", [[data description] UTF8String]);
    dispatch_semaphore_signal(sema2);
  }];

  //  sleep(2);
  dispatch_semaphore_wait(sema2, DISPATCH_TIME_FOREVER);
  dispatch_release(sema2);

  NSURLRequest *request = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.google.com"]];
  NSOperationQueue *queue = [[NSOperationQueue alloc] init];

  dispatch_semaphore_t sema = dispatch_semaphore_create(0);
  [NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *resp, NSData *data, NSError *error) {
    NSLog(@"1: Data: %@", data);
    dispatch_semaphore_signal(sema);
  }];

  //  sleep(2);

  dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
  dispatch_release(sema);

  NSLog(@"Over");
} 
```

### To use the code

1.  Create a simple iOS project with Unit Test.
2.  Paste the code above to the xxxTest.m
3.  Press ⌘ + u

## Patterns I tried

1.  Change the order of 2 different urls, for example let `www.google.com` run at first or let `www.apple.com` run at first.
2.  Change the use of `dispatch_semaphore_xxx` to `sleep()`.
3.  Change `NSLog()` to `printf()`
4.  Run this code as a Cocoa console app.
5.  Remove the test of second URL request.

### Results

1.  Running time 0.4s ~ 30s
2.  Running time 0.4s ~ 30s
3.  Running time 0.4s ~ 30s
4.  Running time ~0.4s
5.  Running time ~0.4s

## Questions

1.  What is happening when I try the first 3 patterns?
2.  Do you have a similar problem with you?
3.  Are there any solutions to these?

Thank you guys!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:40:48.393

这是 SenTest 和 NSLog 的问题。基本上，日志通过管道传送到测试运行程序，该运行程序将数据发送回 XCode 中的控制台窗口。

NSLog 写入 stderr，因此如果将其重定向到文件，则可以获取日志数据。

不幸的是，当一切都完成后，仍然需要一段时间才能将其全部写回。

如果我需要在测试期间记录一堆数据，我会将 stderr 重定向到一个文件，然后在测试运行时“tail -f”它，如果我想看它滚动的话。结束后，我可以在 mvim 或 XCode 中查看该文件。

# eclipse - Eclipse TFS plugin: import report from Excel

> ID：11862457
> 
> 赞同：0
> 
> 时间：2012-08-08T10:21:51.193
> 
> 标签：eclipse, tfs, import, export

Is it possible to export a report using the Eclipse TFS plugin?

From the work items I can run a report - all PBIs for example. From here I'd like to be able to export the data into a local file (say Excel or CSV). This can then be shared with others or worked on in offline mode.

This feature is supported from Visual Studio, but I cannot find it in Eclipse.

Any ideas?

Thanks

* * *

I'm using > Mac OS X 10.8 > Eclipse 4.2 with Microsoft Visual Studio Team Explorer Everywhere 2010 with SP1 plugin

Update: I can copy/paste the data into Excel for a local copy, but I would like the ability to import any changes made - is this possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:51:06.607

您应该能够获得查询结果列表，然后右键单击它们以选择 Copy Selected Results 或 Copy All；这会将结果放到剪贴板中，然后您可以将它们作为一组制表符分隔的结果粘贴到文本文件中，或者您也应该能够将其粘贴到 Excel 中。

请参阅以下博客文章中的 #2： [http ://www.woodwardweb.com/vsts/tfs/five_hidden_​​fea.html](http://www.woodwardweb.com/vsts/tfs/five_hidden_fea.html)

# php - Pass Date Parameter From PHP to Crystal Report

> ID：11862458
> 
> 赞同：0
> 
> 时间：2012-08-08T10:21:51.050
> 
> 标签：php, parameters, crystal-reports

I am having substantial trouble passing a date parameter to the Crystal Reports 11 component from PHP5 on Windows. It should be easy, of course, but the various commented-out items don't seem to work:

```
<?php
$my_report = "C:\\xampp\htdocs\wincare\laporan\adm_JumlahPasienPoli.rpt"; // rpt source file
$my_pdf = "C:\\xampp\htdocs\wincare\laporan\adm_JumlahPasienPoli.pdf"; // RPT export to pdf file
//-Create new COM object-depends on your Crystal Report version
$ObjectFactory= new COM("CrystalReports115.ObjectFactory.1") or die ("Error on load"); // call COM port
$crapp = $ObjectFactory-> CreateObject("CrystalDesignRunTime.Application.11"); // create an instance for Crystal
$creport = $crapp->OpenReport($my_report,1); // call rpt report

// to refresh data before

//- Set database logon info - must have
$creport->Database->Tables(1)->SetLogOnInfo("localhost", "db_wincare", "sa", "sa");

//- field prompt or else report will hang - to get through
$creport->EnableParameterPrompting = 0;

// this is the error 

$zz = $creport->ParameterFields(1)->SetCurrentValue("2011-01-01 00:00:00");    

//export to PDF process
$creport->ExportOptions->DiskFileName=$my_pdf; //export to pdf
$creport->ExportOptions->PDFExportAllPages=true;
$creport->ExportOptions->DestinationType=1; // export to file
$creport->ExportOptions->FormatType=31; // PDF type
$creport->Export(false);

//------ Release the variables ------
$creport = null;
$crapp = null;
$ObjectFactory = null;

//------ Embed the report in the webpage ------
print "<embed src=\"adm_JumlahPasienPoli.pdf\" width=\"100%\" height=\"100%\">"

?> 
```

and the messege :

> Fatal error: Uncaught exception 'com_exception' with message '**Source:**
> **Description:** ' in C:\xampp\htdocs\wincare\laporan\pakai.php:36 Stack trace: #0 C:\xampp\htdocs\wincare\laporan\pakai.php(36): variant->SetCurrentValue('2011-01-01 00:0...') #1 {main} thrown in C:\xampp\htdocs\wincare\laporan\pakai.php on line 36

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:21:08.510

我记得大约五年前在这个问题上花了很长时间，并最终找到了一个 hacky 但有效的答案：

```
// This block is strictly guesswork
$application = new COM("CrystalRuntime.Application.9"); // Change to your version
$report = $application->OpenReport($my_report,1);       // From OP's code
$rptParams = $report.ParameterFields
$rptParam = $rptParams->Item(2);                        // From my SitePoint post; 
                                                        // obviously you need to use
                                                        // the right index

// Check that $rptParam->ValueType evaluates to 10 - if it does not
// then modify the type in Crystal Reports itself. Again, see my
// original solution

// This bit should be fine
$oScript = new COM("MSScriptControl.ScriptControl");
$oScript->Language = "VBScript";
$oScript->AllowUI = false;
$oScript->AddObject('rptParam', $rptParam, true);
$oScript->AddCode('Function SetDateParameter(strDate)
rptParam.AddCurrentValue(CDate(strDate))
End Function');
$oScript->Run("SetDateParameter", "25 April 2006"); 
```

这工作得很好，但它不是很优雅！我认为在 Windows Server 2003 上使用 CR9。从[这里](http://www.sitepoint.com/forums/showthread.php?486356-Inserting-date-parameters-into-a-Crystal-report&viewfull=1#post3445617)复制- 在 StackExchange 诞生之前`:)`。

# php - PHP 返回数组键

> ID：11862462
> 
> 赞同：1
> 
> 时间：2012-08-08T10:22:07.590
> 
> 标签：php, multidimensional-array

我有一个数组 $food 像：

```
Array
(
    [apple] => Array
        (
            [color] => red
            [type] => fruit
        )

    [choco] => Array
        (
            [color] => brown
            [type] => candy
        )

) 
```

有没有我可以做的功能：

get_key($food, 0) 它会返回 index 0, apple

get_key($food, 1) 返回 choco

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T10:24:25.480

你可以这样做 ：

```
$keys = array_keys($array);

echo $keys[0];
echo $keys[1]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T10:24:02.490

```
function get_key($array, $index) {
    $allItems = array_keys($array);
    $selectedItem = $allItems[$index];
    return $selectedItem;
} 
```

# actionscript-3 - AS3 addEventListener 到另一个movieclip 中的movieclip

> ID：11862464
> 
> 赞同：0
> 
> 时间：2012-08-08T10:22:12.670
> 
> 标签：actionscript-3, flash, event-handling, movieclip

所以，我有一个名为“LoginScreen”的影片剪辑，里面有一个名为“confirmbutton”的实例。

我想将 LoginScreen 添加到舞台并为其中的按钮设置一个事件侦听器，但我一直收到错误消息。

这是我的代码：

```
var LoginScreen:loginscreen = new loginscreen;
LoginScreen.x = stage.stageWidth / 2;
LoginScreen.y = stage.stageHeight / 2;
addChild(LoginScreen);

LoginScreen.confirmbutton.addEventListener(MouseEvent.CLICK, test);

function test(e:MouseEvent):void{
    trace("Sup?");
} 
```

我得到错误：

```
Symbol 'LoginScreen'    1046: Type was not found or was not a compile-time constant: confirmbutton. 
```

我很确定它存在并且它的命名正确（有没有大写的确切名称），所以我猜它可能是一个范围问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:47:51.870

弄清楚了。将按钮重命名为“confirmButton”（大写“B”）并开始工作。我猜问题是“确认按钮”也是影片剪辑的 AS 链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:51:25.813

尝试使用辅助 gettter 函数来获取内部 MovieClip。因此，在您定义 LoginScreen 类的地方放置了一个简单的 getter 函数，如下所示：

```
public function get ConfirmButton():MovieClip { return this.getChildByName("confirmButton") as MovieClip; } 
```

然后您可以从 LoginScreen 对象访问该 MovieClip，如下所示：

```
LoginScreen.ConfirmButton.addEventListener(MouseEvent.CLICK, test); 
```

# php - Symfony2 开发环境工作，生产环境给出 404 错误

> ID：11862468
> 
> 赞同：24
> 
> 时间：2012-08-08T10:22:28.077
> 
> 标签：php, symfony

我最近在我的机器上成功安装了 Symfony2。

我可以访问`http:/localhost/app_dev.php`（开发环境）

但是，当我尝试访问 prod 环境时：

`http:/localhost/app.php`

我在浏览器中收到以下错误消息：

> **哎呀！发生错误**
> 
> 服务器返回“404 Not Found”。东西坏了。请通过 [email] 给我们发送电子邮件，让我们知道发生此错误时您在做什么。我们会尽快修复它。给您造成的任何不便，请原谅。

我已经检查了显而易见的：文件 app.php 确实存在于与 app_dev.php 相同的文件夹中 - 所以我不知道是什么原因造成的。

有没有人有解决这个问题的方法？

**[[编辑]]**

我已`sudo php app/console cache:clear env=prod no-debug`按照建议键入：清除了缓存。我现在得到一个空白屏幕。令人担忧的是，app/logs/prod.log 中没有记录任何错误消息，所以我对出了什么问题一无所知（prod 环境仍然可以正常工作）。

我的 app/config/routing.yml 文件的内容：

```
### fos routing, remove later
fos_user_security:
    resource: "@FOSUserBundle/Resources/config/routing/security.xml"

fos_user_profile:
    resource: "@FOSUserBundle/Resources/config/routing/profile.xml"
    prefix: /profile

fos_user_register:
    resource: "@FOSUserBundle/Resources/config/routing/registration.xml"
    prefix: /register

fos_user_resetting:
    resource: "@FOSUserBundle/Resources/config/routing/resetting.xml"
    prefix: /resetting

fos_user_change_password:
    resource: "@FOSUserBundle/Resources/config/routing/change_password.xml"
    prefix: /profile

###

# Internal routing configuration to handle ESI
#_internal:
#   resource: "@FrameworkBundle/Resources/config/routing/internal.xml"
#   prefix:   /_internal 
```

这是我的 app/config/routing_dev.yml 文件

```
_welcome:
    pattern:  /
    defaults: { _controller: AcmeDemoBundle:Welcome:index }

_demo_secured:
    resource: "@AcmeDemoBundle/Controller/SecuredController.php"
    type:     annotation

_demo:
    resource: "@AcmeDemoBundle/Controller/DemoController.php"
    type:     annotation
    prefix:   /demo

_assetic:
    resource: .
    type:     assetic

_wdt:
    resource: "@WebProfilerBundle/Resources/config/routing/wdt.xml"
    prefix:   /_wdt

_profiler:
    resource: "@WebProfilerBundle/Resources/config/routing/profiler.xml"
    prefix:   /_profiler

_configurator:
    resource: "@SensioDistributionBundle/Resources/config/routing/webconfigurator.xml"
    prefix:   /_configurator

_main:
    resource: routing.yml 
```

我刚刚注意到我**没有 routing_prod.yml** **

（警钟响起）- Symfony2 不附带生产路由配置文件吗？

我的 Apache 配置文件内容如下图所示：

```
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot /path/to/symfony/web
    ServerName localhost

    # Custom log file
    Loglevel warn
    ErrorLog  /path/localhost.error.log
    CustomLog /path/localhost.access.log combined

    <Directory /path/to/symfony/web>
        AllowOverride None
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f 
        RewriteRule ^(.*)$ app.php [QSA,L]
    </Directory>
</VirtualHost> 
```

**[[更多详细信息]]**

app/logs/prod.log 的内容

> [2012-08-10 18:10:38] security.INFO: Populated SecurityContext with an anonymous Token [] [] [2012-08-10 18:10:38] request.ERROR: Symfony\Component\HttpKernel\Exception\ NotFoundHttpException：在/path/to/symfony/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/EventListener/RouterListener.php第83行找不到“GET /”（未捕获的异常）的路由[] []

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-08T10:26:24.060

有没有开启生产环境并清除缓存？运行控制台并执行以下操作：

```
app/console --env=prod cache:clear 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-08T18:06:08.627

我想我也有类似的问题。我相信预热缓存可以解决我的实例。

```
php app/console cache:warmup --env=prod --no-debug 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-25T23:38:16.027

最近安装了 Symfony 2.2 我也遇到了这个问题，但这实际上是正常行为。开箱即用的含义 Symfony 2.x（在撰写本文时）没有为生产环境提供任何路由/内容。

在您的情况下，您似乎安装了 Friends of Symfony 捆绑包，它确实在您的生产路线 ( `routing.yml`) 中设置了一些路线，但乍一看，这些路线似乎都没有针对您的生产环境的根目录，即`http:/localhost/app.php/`404 可能是预期的. 我不能*完全*确定，因为它正在导入路线，所以细节被掩盖了。检查路由的一个好方法是阅读[可视化和调试路由](http://symfony.com/doc/2.0/book/routing.html#visualizing-debugging-routes)，您可以在其中了解`app/console router:debug`CLI 命令。

`routing.yml`是生产环境中路由的默认位置（意义`routing_prod.yml`不是一个东西）。你会注意到`routing_dev.yml`import `routing.yml`。这意味着您投入生产的所有内容（开箱即用）在开发中都是可访问的。您看到的演示内容是开发环境独有的，这就是您在生产环境中看不到它的原因。随意移动一些东西以满足您的需求，但开发人员导入产品通常是一个好主意，反之亦然。

任何时候您想测试生产中的更改，您都需要按照@tolgap 的建议清除缓存。生产环境严重依赖预编译缓存，因此该命令将强制您的生产缓存刷新。开发环境总是在刷新它的缓存。理解这一点对于使用 Symfony 至关重要。尽管 Symfony.org 上的书是一个很好的切入点，但它并没有完全说明缓存和工作流的字幕这一点。在我意识到开发的软缓存与产品的硬缓存`routing.yml`之间的关系之前，我确实感到困惑了一分钟。`routing_dev.yml`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-05T22:55:52.243

我尝试了@gilden 在他的评论中给出的解决方案；有用。

我跑`php bin/console cache:clear --env=prod`而不是`rm -rf app/cache/*`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-04T14:36:12.853

我很惊讶没有人告诉你：你在 prod 环境中没有路径。

写在 app/config/routing.yml

```
 _welcome:
 pattern:  /
 defaults: { _controller: AcmeDemoBundle:Welcome:index } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-10T14:19:38.063

您需要为您的本地服务器安装 APC，一切都将在 prod mod 中为您工作。还要尝试在 parameters.yml 中找到正确的数据库，因为 dev 正在添加 DATABASENAME_dev。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-09-20T20:46:09.007

今天我遇到了同样的问题并尝试了各种解决方案。直到我想起启用 mod_rewrite apache 服务很重要。为此，请运行以下命令（在 Ubuntu 上）

```
sudo a2enmod rewrite 
```

然后重启服务器

```
sudo service apache2 restart 
```

我希望有人可以提供帮助。问候！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-05T07:00:39.837

我的 symfony 缓存文件夹不可写。当我将缓存完整目录及其文件设置为可写时，它就起作用了。

```
sudo chmod -R 777 . 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2015-06-29T16:29:43.843

（Agrega esto dentro del archivo routing_dev.yml）在routing_dev.yml中添加这个

```
_wellcome:
    pattern: /
    defaults: { _controller:AppBundle:Default:index } 
```

# salesforce - Salesforce 选项列表订单

> ID：11862475
> 
> 赞同：0
> 
> 时间：2012-08-08T10:22:46.260
> 
> 标签：salesforce

在 Salesforce 中，我需要在 Account 中创建多选选项列表字段。但根据我的用例，我需要将选项列表中的第一个选定项目标记为默认值。

我们可以设置选择列表中所选项目的顺序吗？

如果不是，我们如何从选定的选项列表项中将值设置为 FIRST 之一？

任何 ponter 将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-04T08:29:39.923

在帐户对象上创建多个选项列表时，请确保选中此复选框。

**第一个值作为默认值**

# php - Zend：选择对象：如何替换 from() 设置的选定列？

> ID：11862476
> 
> 赞同：7
> 
> 时间：2012-08-08T10:22:50.147
> 
> 标签：php, zend-framework

首先，这就是我想要做的：

在库中的一个类中，我想计算搜索结果的总行数。该类使用由搜索结果的附加模型设置的选择对象。我现在的问题是，这个 select() 已经通过 from() 设置了请求的列，但是为了简单地计算我只想选择 id 的行，因为网站必须是高性能的。我不能简单地更改对象的值，因为我在库中使用它并且变量受到保护。不幸的是，Zend 没有 mySql count 命令的功能，我不想使用静态的 mySql 代码，因为将来我们可能会切换我们的数据库系统。

现在这是我的问题：

Zend_Select 是否有可能更改选定的列？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T12:32:43.880

试试这个：

```
$select->reset(Zend_Db_Select::COLUMNS)
       ->from('thetable', 'COUNT(*)'); 
```

用正确的表名替换“thetable”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:34:30.040

这是来自一个项目，未经测试，但其中之一应该可以工作。

```
$select->from(array("table_name" => "table_name"), array("my_col" => "COUNT(id)")); 
```

**或者**

```
$select->from(array("table_name"), array("my_col" => "COUNT(id)")); 
```

这与

```
SELECT COUNT(id) as my_col FROM table_name 
```

希望有帮助

杰克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-22T15:44:43.677

这个对我不起作用（我只需要从一个连接表中选择）：

```
$select->reset(Zend_Db_Select::COLUMNS)
   ->from('thetable', 'COUNT(*)'); 
```

也许是因为我有一些加入。但是，这里有一个解决方案：先使用 reset()，然后使用 columns()：

```
$select->setIntegrityCheck(false)
        ->from(['t1' => 'table1'])
        ->join(['t2' => 't2'], 't1.id = t2.t1_id')
        ->reset(Zend_Db_Select::COLUMNS)
        ->columns('t1.*'); 
```

仅供参考，Zend Framework 的版本是 1.12

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T11:05:50.230

要在 select 中使用 mysql 命令，您需要使用 Zend_Db_Expr：

```
$select = $this->select()
            ->from('myTable', new Zend_Db_Expr('COUNT(id) as count'));
echo $select; //SELECT COUNT(id) as count FROM myTable; 
```

# inheritance - JPA 多重鉴别器值

> ID：11862479
> 
> 赞同：3
> 
> 时间：2012-08-08T10:23:08.710
> 
> 标签：inheritance, jpa, subtype, discriminator

我们正在建立一个新项目，并决定为 JPA 使用 eclipselink。在创建我们的领域模型时，我们遇到了一个问题。

我们有一个叫做组织的基类。我们还有供应商和客户，它们都扩展了组织。当 JPA 创建表时，我看到它使用了一个鉴别器，问题在于供应商也可以是一个组织。

所以我基本上想要的是（这些是数据库表来获得这个想法）：

![ERD 显示子类型](../Images/76f422148f221f7ba9be544a11d74622.png)

一个小例子来帮助澄清这一点：

我们有一个客户叫 SparklingGlass。SparklingGlass 从我们这里购买计算机，因此 SparklingGlass 被保存为我们的客户。我们反过来从 SparklingGlass 购买窗户，因此 SparklingGlass 也是我们的供应商。这就是我们想要在我们的系统中实现的。

这在 JPA 中是否有可能，如果没有，在这些情况下最佳实践是什么？

顺便说一句，我们使用 JOINED 继承类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:24:13.503

不知道我明白。在 Java 继承中，一个实例只能属于一个类。由于供应商和客户从组织继承，“所有”供应商和“所有”客户都是组织。

对供应商的查询将加入组织和供应商表以构建供应商实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T02:38:23.383

你的数据模型是错误的。供应商不是组织的子类型，而是组织所扮演的角色。

一个组织可以扮演许多角色，例如客户、供应商、供应商、雇主。

# sql-server-2008-r2 - 当我尝试在服务器上运行 SQL 脚本时语法不正确

> ID：11862484
> 
> 赞同：2
> 
> 时间：2012-08-08T10:23:18.963
> 
> 标签：sql-server-2008-r2, aggregate-functions

我有这个需要运行的 SQL 脚本。它创建了我需要的聚合。

```
CREATE AGGREGATE [dbo].[MLRXYZ]
  (@x1 [float], @x2 [float], @x3 [float], @x4 [float])
RETURNS [xml]
  EXTERNAL NAME [dws.MultipleLinearRegression].[dws.MLRXYZ] 
```

当我在本地计算机上运行它时，它运行良好。

但是我需要远程连接到服务器并在安装在其上的 sql server 上运行它。我复制过去的脚本并尝试执行它我得到这个语法错误

> 消息 102，级别 15，状态 1，第 3 行
> ',' 附近的语法不正确。

我的电脑和服务器都有 SQL Server 2008 R2

有人知道这个问题吗？为什么它在本地工作而不是在服务器上工作？

非常感谢

# extjs - ExtJS：setDisabled(true) 使字段太暗/透明而无法读取

> ID：11862486
> 
> 赞同：3
> 
> 时间：2012-08-08T10:23:29.963
> 
> 标签：extjs

[`setDisabled`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-method-setDisabled)当我使用或[`disabled: true`config](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-disabled)将表单字段设置为禁用状态时，例如：

```
form.getComponent(1).setDisabled(true); 
```

由于透明度，它使该字段不可读。有没有改善我的禁用字段的外观和感觉的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:46:16.267

> 这对我有用:)

```
.x-item-disabled {
      filter : '' !important;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T02:25:12.603

一个快速的解决方案是更改 ext-all.css（或 ext-all-debug.css）文件中的不透明度设置。默认设置似乎是：

```
.x-item-disabled .x-form-trigger {
filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=30);
opacity: 0.3; } 
```

如果您将不透明度值更改为 0.6，您将获得一个可读的表格。

显然不理想，因为您正在更改核心框架文件，但我当然没有找到更快的方法来纠正这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-25T17:20:57.573

我做了和你们一样的事情。。

在 ExtJS 中

```
 {
    xtype: 'combobox',
    name: 'comboTest',
    store: "ComboTest",
    fieldLabel: "testCombo",
    queryMode: "local",
    displayField: "display",
    valueField: "value",
    disabledCls: "disabledComboTestCls" // you are now totally overriding the disabled class as set by .x-item-disabled
} 
```

在你的 CSS 文件中

```
.disabledComboTestCls  {
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    filter: alpha(opacity=50);
    -moz-opacity:0.5;
    -khtml-opacity: 0.5;
    opacity: 0.5;
}
.disabledComboTestCls input {
    font-weight: bold;
    color: #888888;
} 
```

这很好用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T10:35:47.480

我们在 Ext.form.Field 上使用覆盖，它隐藏了触发器等，然后我们添加了一个 css 类。然后我们对组件进行样式设置，因为 ExtJS 的禁用功能确实不够可读。

这是示例代码：

```
var originalRender = Ext.form.Field.prototype.onRender;
Ext.override(Ext.form.Field, {
    UxReadOnly: false,
    UxDisplayOnly: function (displayOnly, cls) {
        // If no parameter, assume true
        var displayOnly = (displayOnly === false) ? false : true;

        if (displayOnly) {
            // If a class name is passed in, use that, otherwise use the default one.
            // The classes are defined in displayOnly.html for this example 
            var cls = (cls) ? cls : 'x-form-display-only-field';

            // Add or remove the class
            this.addClass(cls);

            // Set the underlying DOM element's readOnly attribute
            this.setReadOnly(displayOnly);
            this.editable = false;

            // Get this field's xtype (ie what kind of field is it?)
            var xType = this.getXType();

            if (xType == 'combo' | xType == 'combobox' | xType == 'Ext.ux.Combo' | xType == 'Ext.ux.ComboSearch') {
                this.addClass('x-form-display-only-combo');
                this.hideTrigger = true;
                this.on('expand', function (field) {
                    if (field.hideTrigger)
                        field.collapse();
                });
            }
            else if (xType == 'datefield') {
                this.addClass('x-form-display-only-datefield');
                this.hideTrigger = true;
                this.on('expand', function () {
                    if (this.hideTrigger)
                        this.collapse();
                });
                this.editable = false;
            } //elseif for each component u want readonly enabled
            else {
                this.addClass('x-form-display-only-other');
            }

            // For fields that have triggers (eg date,time,dateTime), 
            // show/hide the trigger
            if (this.trigger) {
                this.trigger.setDisplayed(!displayOnly);
            }

        } else {
            this.UxFullField(cls);
        }
    },
    afterRender: function () {
        var me = this;
        me.UxDisplayOnly(me.UxReadOnly, 'x-form-display-only-field');
        this.callParent(arguments);
    },
    UxFullField: function (cls) {
        // If a class name is passed in, use that, otherwise use the default one.
        // The classes are defined in displayOnly.html for this example 
        var cls = (cls) ? cls : 'x-form-display-only-field';

        this.removeCls(cls);

        // Set the underlying DOM element's readOnly attribute
        this.setReadOnly(false);
        this.editable = true;

        // Get this field's xtype (ie what kind of field is it?)
        var xType = this.getXType();

        if (xType == 'combo' | xType == 'combobox' | xType == 'Ext.ux.Combo' | xType == 'Ext.ux.ComboSearch') {
            this.removeCls('x-form-display-only-combo');
            this.setHideTrigger(false);
        }
        else if (xType == 'datefield') {
            this.removeCls('x-form-display-only-datefield');
            this.setHideTrigger(false);
            this.editable = true;
        }//elseif for each component u want readonly enabled
        else {
            this.removeCls('x-form-display-only-other');
        }

        // For fields that have triggers (eg date,time,dateTime), 
        // show/hide the trigger
        if (this.trigger) {
            this.setHideTrigger(false);
        }
    }
}); 
```

使用 CSS，您可以隐藏边框等内容...

```
.x-form-display-only-field{}

.x-form-display-only-other input, .x-form-display-only-other select { background: transparent !important; border: 1px solid transparent !important; cursor: pointer; cursor: default; font-weight: bold; background-image: none !important; background-color: transparent !important; }
.x-form-display-only-combo input, .x-form-display-only-combo select { background: transparent !important; border: 1px solid transparent !important; cursor: pointer; cursor: default; font-weight: bold; background-image: none !important; background-color: transparent !important; }
.x-form-display-only-datefield input, .x-form-display-only-datefield select { background: transparent !important; border: 1px solid transparent !important; cursor: pointer; cursor: default; font-weight: bold; background-image: none !important; background-color: transparent !important; }
.x-form-display-only-file input, .x-form-display-only-file select { background: transparent !important; border: 1px solid transparent !important; cursor: pointer; cursor: default; font-weight: bold; background-image: none !important; background-color: transparent !important; }

.x-form-display-only-checkbox { }
.x-form-display-only-radiogroup { } 
```

现在您可以通过以下方式添加您的字段：

```
Ext.create('Ext.form.field.Text', {
     name: 'example',
     UxReadOnly: true
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-11T18:54:49.693

对于您的 Google 员工，如果您使用的是 Ext 5 及更高版本，这些答案已经过时了。现在有一个`readOnly`布尔值。该字段看起来完全相同，但该值不可编辑。

[文件](http://docs.sencha.com/extjs/5.1.0/api/Ext.form.field.Base.html#cfg-readOnly)

# android - 如何删除列表视图项

> ID：11862490
> 
> 赞同：0
> 
> 时间：2012-08-08T10:23:37.297
> 
> 标签：android

嗨，我想检查所有 listview 项目并从数据库以及 listview 中删除这些项目。如果选择了所有 listview 项目并且只有一个 listitem 未选中，则必须删除选中的项目。为此我使用menu's.我怎么能这样实现？我正在使用以下代码：

```
public void PopulateSentList() {
        String strquery = "SELECT * FROM sent_history";
        Cursor Cursor = (MainscreenActivity.JEEMAAndroSMSDB).rawQuery(strquery,
                null);
        MyAdapter adapter = new MyAdapter(SentHistoryActivity.this, Cursor);
        setListAdapter(adapter);        
        lvhistory.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {
                // TODO Auto-generated method stub
                SQLiteCursor selectedValue = (SQLiteCursor) getListAdapter()
                        .getItem(position);
                String id1 = selectedValue.getString(0);
                System.out.println("DATA-->>>" + id1);
                Intent intent = new Intent(getApplicationContext(),
                        Historydisplay.class);
                intent.putExtra("Id", id1);
                final int result = 1;
                startActivityForResult(intent, result);
            }
        });
    }

    public void onBackPressed() {
        super.onBackPressed();
        Intent intent = new Intent(SentHistoryActivity.this,
                MainscreenActivity.class);
        startActivity(intent);
        finish();
    }

    private void CreateMenu(Menu menu) {
        menu.setQwertyMode(true);
        MenuItem mnu1 = menu.add(0, 0, 0, "Delete");
        {
            mnu1.setAlphabeticShortcut('a');
        }
        MenuItem mnu2 = menu.add(1, 1, 1, "Select All");
        {
            mnu2.setAlphabeticShortcut('s');
        }
    }

    private boolean MenuChoice(MenuItem item) throws Exception {
        switch (item.getItemId()) {
        case 0:         
            if (getStrinValue != null) {
                delhistory(getStrinValue);
            } else {
                Toast.makeText(getApplicationContext(),
                        "Please select an Item", Toast.LENGTH_SHORT).show();
            }           
        case 1:
            if(item.getTitle().equals("Select All")){
                for(int i=0; i < lvhistory.getChildCount(); i++){
                    RelativeLayout itemLayout = (RelativeLayout)lvhistory.getChildAt(i);
                    final CheckBox cb = (CheckBox)itemLayout.findViewById(R.id.check);
                    cb.setChecked(true);           
                    if (cb.isChecked() == true) {                               
                        getStrinValue = getStrinValue + ","
                                + cb.getTag().toString();
                    }
                    cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {                       
                        @Override
                        public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                            // TODO Auto-generated method stub          
                            final long[] checkedIds = lvhistory.getCheckItemIds();
                            for (int i = 0; i < checkedIds.length; i++) {
                                Log.e("checkedIds", "id checked: " + checkedIds[i]);
                            }
                            }                       
                    });                 
                }               
            }

        }
        return true;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        CreateMenu(menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        try {
            return MenuChoice(item);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return false;
    }

    private class MyAdapter extends ResourceCursorAdapter {

        public MyAdapter(Context context, Cursor cur) {
            super(context, R.layout.dummy, cur);
        }

        @Override
        public View newView(Context context, Cursor cur, ViewGroup parent) {
            LayoutInflater li = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            return li.inflate(R.layout.dummy, parent, false);
        }

        @Override
        public void bindView(View view, Context context, Cursor cur) {
            TextView tvListText = (TextView) view.findViewById(R.id.Mobile);
            chkBox = (CheckBox) view.findViewById(R.id.check);          
            tvListText.setText(cur.getString(cur
                    .getColumnIndex(MainscreenActivity.COL_Mobile)));
            chkBox.setTag(cur.getString(cur
                    .getColumnIndex(MainscreenActivity.COL_Sent_id)));

            chkBox.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    CheckBox cb = (CheckBox) v;
                    if (cb.isChecked() == true) {
                        getStrinValue = getStrinValue + ","
                                + cb.getTag().toString();
                    } else {
                        getStrinValue = null;
                    }
                }
            });
        }   

    }

    public void delhistory(String getStrinValue) {
        int pos1 = getStrinValue.indexOf(",");
        if (pos1 > 0) {
            String rowId = getStrinValue.substring(pos1 + 1);
            String delimiter = "\\,";
            String[] sentID = rowId.split(delimiter);
            for (int i = 0; i < sentID.length; i++) {
                String temp0 = sentID[i];
                int id = Integer.parseInt(temp0);
                MainscreenActivity.JEEMAAndroSMSDB
                        .delete(MainscreenActivity.Table_SentHistory, "_id="
                                + id, null);                
            }
            Toast.makeText(getApplicationContext(),
                    "History deleted successfully", Toast.LENGTH_SHORT)
                    .show();
            finish();
            Intent intent = new Intent(getApplicationContext(),
                    SentHistoryActivity.class);
            startActivity(intent);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:33:42.330

您只需要在适配器上调用 remove 方法，如下所示

```
 adapter.remove(list.get(i)); 
```

不要忘记使其无效，以便它也影响列表。

```
adapter.notifyDatasetChanged() 
```

编辑：-作为用户370305，您应该调用上述方法使其无效...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:30:15.153

**试试这个代码： -**

**主文件**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText 
        android:id="@+id/txtItem"
        android:layout_width="240dp"
        android:layout_height="wrap_content"
        android:inputType="text"
        android:hint="@string/hintTxtItem"         
        />

    <Button 
        android:id="@+id/btnAdd"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/lblBtnAdd"
        android:layout_toRightOf="@id/txtItem"
        />

    <TextView 
        android:id="@android:id/empty"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtItem"
        android:text="@string/txtEmpty"
        android:gravity="center_horizontal"        
        />

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"        
        android:layout_below="@id/txtItem"
        android:choiceMode="multipleChoice" >
    </ListView>

    <Button
        android:id="@+id/btnDel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"        
        android:layout_alignParentBottom="true"
        android:text="@string/lblBtnDel" />

</RelativeLayout> 
```

**MainActivity.java**

```
public class MainActivity extends ListActivity {

    /** Items entered by the user is stored in this ArrayList variable */
    ArrayList<String> list = new ArrayList<String>();

    /** Declaring an ArrayAdapter to set items to ListView */
    ArrayAdapter<String> adapter;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        /** Setting a custom layout for the list activity */
        setContentView(R.layout.main);

        /** Reference to the add button of the layout main.xml */
        Button btn = (Button) findViewById(R.id.btnAdd);

        /** Reference to the delete button of the layout main.xml */
        Button btnDel = (Button) findViewById(R.id.btnDel);

        /** Defining the ArrayAdapter to set items to ListView */
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, list);

        /** Defining a click event listener for the button "Add" */
        OnClickListener listener = new OnClickListener() {
                        @Override
                        public void onClick(View v) {
                                EditText edit = (EditText) findViewById(R.id.txtItem);
                                list.add(edit.getText().toString());
                                edit.setText("");
                                adapter.notifyDataSetChanged();
                        }
                };

        /** Defining a click event listener for the button "Delete" */
        OnClickListener listenerDel = new OnClickListener() {
            @Override
            public void onClick(View v) {
                /** Getting the checked items from the listview */
                SparseBooleanArray checkedItemPositions = getListView().getCheckedItemPositions();
                int itemCount = getListView().getCount();

                for(int i=itemCount-1; i >= 0; i--){
                    if(checkedItemPositions.get(i)){                        
                        adapter.remove(list.get(i));
                    }
                }               
                adapter.notifyDataSetChanged();             
            }
        };            

        /** Setting the event listener for the add button */
        btn.setOnClickListener(listener);

        /** Setting the event listener for the delete button */
        btnDel.setOnClickListener(listenerDel);    

        /** Setting the adapter to the ListView */
        setListAdapter(adapter);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:30:24.920

您必须使用 db 的查询从 db 中删除对象，然后您应该创建新适配器或使用 remove() 方法对旧列表适配器

# php - 某些内容类型的 Drupal 7 自定义模板文件

> ID：11862491
> 
> 赞同：2
> 
> 时间：2012-08-08T10:23:39.430
> 
> 标签：php, templates, drupal, drupal-7

我目前正在从事一个drupal 7项目。我为某种内容类型编写了一个自定义模板。该文件已正确命名，`node--type.tpl.php`并且也正确显示。但其他区域和块不可见。其他自定义模板显示所有区域和块。我想提两点，

1.  我不是 Drupal 爱好者/英雄
2.  我正在扩展现有项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T12:03:40.040

需要检查的几件事：

*   确保您还复制了核心 node.tpl.php 文件到您的主题文件夹；没有它，节点的模板覆盖将无法工作。
*   确保您的文件被正确命名，例如对于具有`home_page`模板文件名称的内容类型将被调用`node--home_page.tpl.php`。
*   确保在添加新模板文件后清除了 Drupal 的缓存；主题注册表已缓存，因此需要清除以获取更改。

有关一般主题的更多信息，请参阅[Drupal 7 模板（主题挂钩）建议](http://drupal.org/node/1089656)。

顺便说一句，节点模板文件中没有任何块/区域，它们将始终包含在`page.tpl.php`或某些派生类中。

# java - 传递参数与否

> ID：11862503
> 
> 赞同：0
> 
> 时间：2012-08-08T10:24:13.577
> 
> 标签：java, parameters

想象一下，您有一些具有某些属性的类。这个类有一个私有方法，它根据参数计算一些东西。例如（Java）：

```
public class Foo {
    private Lorem c1;
    private Ipsun c2;
    //...
    private Justo c12;

    private Double selfExplanatoryMethodName(){
        //This method uses c1, c3 and c4
    }
} 
```

将方法的标题设置为更好的做法是：
`private Double selfExplanatoryMethodName(Lorem c1, Amet c3, Sit c4) {/*...*/}`

想象一下，这个方法是一个散列方法，知道它使用什么参数来生成散列可能很有用。

那么，你认为这是一个好习惯吗？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:50:26.803

**参数化还是不参数化是个问题...**

**...当它只是一个接受输入并返回输出而不依赖于对象状态的函数时：**因此，您必须有一个接受参数并执行一些魔术并返回值的方法...一个真正的函数 - - 你应该使用参数。你的方法是一个黑匣子。Java`static`为此类方法提供了关键字，对于仅依赖于参数的任务，您应该使用静态方法。这些案例应该有参数化的方法。例子：

```
 public static String encodeString(String input, String format) 
```

**...当它是一个仅处理对象状态并返回值的函数时：**就像一个`hashcode`方法。你*永远不*应该传递参数......该方法应该是一个实例方法......它应该使用实例字段来发挥作用。这是一个例子：

```
 public String toString(){
    return this.attr1 +", " + this.attr2; //<-- see I haven't passed attr1, attr2
 } 
```

**...当需要一些外部输入和一些状态属性时：**就像您有一个基于外部输入对状态对象进行操作以返回结果的方法。*只*传递外部需要的参数。例如：

```
 public String toFormat(String format){
    if("json".equals(format)  //<-- this is external agent.
      return new JSONObject(this).toString();
    else
      return this.attr1 +", " + this.attr2; //<-- see I haven't passed attr1, attr2

 } 
```

所以，这取决于你在做什么。

* * *

**编辑1：（**回答评论）

来到`Why?`

这是关于最小化冗余。这就是为什么上述几点应作为经验法则：`do not create unnecessary objects; do not bloat the parameter list`。

我提到了在哪种情况下有哪些好的做法。你权衡你的情况并决定使用什么。所以，如果你有一个方法说，

```
int add(int a, int b){returns a+b;} 
```

传递 a 和 b 并将此方法作为静态方法是一种很好的做法。但是在`new Additor(a, b).add();`哪里做

```
public int add(){return this.a + this.b;} 
```

不是那么好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:41:44.337

我不同意乔的观点。

根据我的经验，依赖字段可以使代码更简洁，并通过减少混乱来提高可读性。
类是一个白盒子，读者可以依靠您直观地选择的字段名称来推断该方法对它们的作用。此外，它依赖于更高（可见）[凝聚力](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)的领域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T06:39:02.217

我完全以 Java 程序员的身份说话，但是如果您有一个访问该类字段的方法，我从来没有在方法中放入参数并以这种方式将字段传回。相反，我会在方法的顶部（尤其是使用 javadoc）评论该方法对字段的作用。撕掉字段并传递它们有点违背封装的目的。

至少对于面向对象的编程来说，传递类已经作为字段保存的东西对我来说是没有意义的。通过在类中创建一个字段，我们说“嘿，我认为这对你很有用，你以后可能需要的东西”。如果它从来没有真正为自己使用过这些信息，并且总是在飞行中得到信息，它为什么要保留它呢？

底线：如果变量实际上属于一个字段并且还不够清楚你的函数做了什么，那么添加更多参数并将类的字段传回并不是让你的代码清晰的方法。如果有的话，它会使代码本身更加混乱和不必要的冗长。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:33:47.823

可能取决于您使用的语言。但根据我的经验，我会说**是的，这是一种很好的做法**。

如果包含参数，则更容易/更快地阅读和理解。如果您希望它更糟，您也可以跳过返回值，或者更糟的是只使用全局变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T06:37:59.073

这取决于方法的作用。如果方法对对象做了什么，我认为参数是错误的。如果方法对对象做了一些事情并且需要额外的信息（例如另一个对象），那么参数是强制性的。如果该方法对对象没有任何作用，则应检查它是否应该是静态方法。

# linux - 如何在子文件夹中同步文件模式

> ID：11862508
> 
> 赞同：1
> 
> 时间：2012-08-08T10:24:26.057
> 
> 标签：linux, bash, rsync

我有以下远程文件夹/文件结构：

```
/home/user/backup/siteA/regionA/data.sql
/home/user/backup/siteA/regionA/data.clean.sql
/home/user/backup/siteA/regionA/data.lite.sql
/home/user/backup/siteA/regionA/files/
/home/user/backup/siteA/regionB/data.sql
/home/user/backup/siteA/regionB/data.clean.sql
/home/user/backup/siteA/regionB/data.lite.sql
/home/user/backup/siteA/regionB/files/
/home/user/backup/siteA/regionC/data.sql
/home/user/backup/siteA/regionC/data.clean.sql
/home/user/backup/siteA/regionC/data.lite.sql
/home/user/backup/siteA/regionC/files/
/home/user/backup/siteA/regionD/data.sql
/home/user/backup/siteA/regionD/data.clean.sql
/home/user/backup/siteA/regionD/data.lite.sql
/home/user/backup/siteA/regionD/files/
/home/user/backup/siteB/regionA/data.sql
/home/user/backup/siteB/regionA/data.clean.sql
/home/user/backup/siteB/regionA/data.lite.sql
/home/user/backup/siteB/regionA/files/
/home/user/backup/siteB/regionB/data.sql
/home/user/backup/siteB/regionB/data.clean.sql
/home/user/backup/siteB/regionB/data.lite.sql
/home/user/backup/siteB/regionB/files/
/home/user/backup/a-script.sh
/home/user/backup/backup.log
/home/user/backup/siteC
...
... 
```

我需要 rsync`*.clean.sql`并`*.lite.sql`从 siteA 到本地类似的结构，例如：

```
/var/data/dbs/siteA/regionA/data.clean.sql
/var/data/dbs/siteA/regionA/data.lite.sql 
```

我似乎无法让`rsyn`c 包含/排除正确的东西。我在尝试：

```
/usr/bin/rsync --archive --del --verbose --verbose --compress --progress --exclude-from=excludes.txt --rsh='ssh -q' --dry-run user@remote:/home/user/backup/siteA /var/data/dbs/siteA 
```

我的 excludes.txt 包含：

```
+ *.clean.sql
+ *.lite.sql
- * 
```

但是我只是得到：

```
receiving incremental file list
[sender] hiding directory siteA because of pattern * 
```

我有一个脚本可以在每个站点区域的基础上执行此操作，但不能作为“整体”执行此操作。我尝试在排除列表中添加星号和斜线，但似乎找不到正确的组合。有什么建议么？

## 更新

我有更好的结果

```
/usr/bin/rsync --archive --del --compress --progress --exclude-from=excludes.txt --rsh='ssh -q' user@remote:/home/user/backup/siteA /var/data/dbs/siteA 
```

与 excludes.txt

```
+ */
+ *.clean.sql
+ *.lite.sql
- * 
```

但是，这也会解析所有文件夹的内容（尽管跳过/排除它们），这会减慢它的速度（并用大量的目录列表污染 rsync 输出）。

是否有“最大深度”参数？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:19:19.137

怎么样：

```
cd /home/user/backup
find site* -name data.clean.sql -o -name data.lite.sql > filestobackup
rsync --archive --verbose --del --compress --progress \
--files-from=filestobackup -d \
--rsh='ssh -q' \
user@remote:/home/user/backup/ /var/data/dbs/ 
```

# iphone - 如何为每个表 UITableViewCell 只调用一次 Web 服务？

> ID：11862510
> 
> 赞同：0
> 
> 时间：2012-08-08T10:24:33.217
> 
> 标签：iphone, objective-c

我有一个列出一些州（例如阿萨姆邦、安得拉邦、邦等）的应用程序。选择一个州后，下一个视图会在表格视图中显示位于该特定州的医院。医院名称是使用 Web 服务从数据库中加载的。到目前为止，这已经完成了，不用担心。

我的问题是：假设我列出了一个州的医院。我返回并再次选择相同的状态，再次调用 Web 服务，用户必须等待数据。所以这不是一个好主意。如果我选择相同的状态，我不想再次调用 Web 服务。如果状态选择相同，如何存储和显示数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:25:55.203

您可以`NSURLRequestReturnCacheDataElseLoad`用作`cachePolicy`的`NSURLRequest`。

正如苹果所说：

> NSURLRequestReturnCacheDataElseLoad 指定应该使用现有的缓存数据来满足 URL 加载请求，无论其年龄或到期日期如何。但是，如果缓存中没有对应于 URL 加载请求的现有数据，则从源源加载 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:31:15.260

每次调用一个 void 的 web 服务，把你从 WS 得到的结果放在 AppDelegate 的一个 2D NSMutableArray 属性中，
每次用户选择一个状态，验证你的状态对应的数组是否为 nil

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:27:24.333

此外，SQLite/CoreData 可能是您可能要考虑将数据存储更长时间和永久的一种方法。

如果 currentDate != serverLastUpdatedDate 那么您可以从服务器下载数据，您可以将数据以 plist 的形式存储在每个行文本中，以便更快地实现。看看以下实现它的方法。

**plist** [设置 plist 以存储 iPhone 游戏的应用程序数据（不是设置）](https://stackoverflow.com/questions/4911688/setting-up-a-plist-to-store-application-data-not-settings-for-an-iphone-game)

**SQLite** [http://www.techotopia.com/index.php/An_Example_SQLite_based_iOS_4_iPhone_Application](http://www.techotopia.com/index.php/An_Example_SQLite_based_iOS_4_iPhone_Application)

**CoreData** [http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T05:42:34.260

将您的数据保存在`NSUserDefault`

```
 NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:hospitalAry forKey:@"Hospital"];
    [defaults synchronize]; 
```

# javascript - 如何在javascript中设置网格组合框值？

> ID：11862512
> 
> 赞同：0
> 
> 时间：2012-08-08T10:24:35.013
> 
> 标签：javascript, asp.net, telerik, rad-controls

我在网格项模板中有组合框我如何在 javascript 中设置值

```
<telerik:GridTemplateColumn AutoPostBackOnFilter="true"
                                    CurrentFilterFunction="Contains" DataField="FAULT" FilterControlWidth="100%"
                                    HeaderStyle-Width="80px" HeaderText="Fault" ReadOnly="true" ShowFilterIcon="false"
                                    SortExpression="FAULT" UniqueName="FAULT">
                                    <ItemTemplate>
                                        <telerik:RadComboBox ID="cmbFault" runat="server" AllowCustomText="false" HighlightTemplatedItems="true"
                                            Skin="Outlook" Visible="true" Width="70px">
                                            <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="NF" Value="N" />
                                                <telerik:RadComboBoxItem runat="server" Text="VF" Value="V" />
                                                <telerik:RadComboBoxItem runat="server" Text="CF" Value="C" />
                                                <telerik:RadComboBoxItem runat="server" Text="DF" Value="D" />
                                            </Items>
                                        </telerik:RadComboBox>
                                    </ItemTemplate>
                                                        <HeaderStyle Width="80px" />
                                </telerik:GridTemplateColumn> 
```

我的java脚本

```
function vishali(){
if (difference > 5) {alert("enter into if");
                    document.getElementById('<%=cmbFault.ClientID %>').value = 'C';
                }
                else {
                    alert("enter into else");
                    document.getElementById('<%=cmbFault.ClientID %>').value = 'S';
                }
} 
```

但它不起作用它说在上下文错误中找不到 cmbFault 请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:19:44.997

您可以执行以下 javascript 代码以从 javascript 进行设置。

```
function setCombo() {
    var combo = $find("<%= cmbFault.ClientID %>"); 
    combo.set_text("S");
} 
```

你也可以看看[http://www.telerik.com/help/aspnet-ajax/combobox-client-side-radcombobox.html](http://www.telerik.com/help/aspnet-ajax/combobox-client-side-radcombobox.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T07:05:38.117

要获取 GridTemplateColumn 中的控件，请执行以下操作。JS：

```
function setCombo() {  
        var grid = $find("<%=RadGrid1.ClientID%>");  
        var tableView = grid.get_masterTableView();  
        var items = tableView.get_dataItems();  
        for(var i = 0; i<items.length; i++){  
            var rowValues = items[i]; 
            var Textvalue=rowValues.findElement("cmbFault");//access Combobox 
         }  
    } 
```

# php - 在 MySQL 中使用准备好的语句插入或更新

> ID：11862513
> 
> 赞同：0
> 
> 时间：2012-08-08T10:24:41.503
> 
> 标签：php, sql, pdo, prepared-statement

尝试使用 php 的 pdo 中的准备好的语句插入或更新 sql。首先我想到了使用`REPLACE INTO`命令，但它给了我一个错误，因为我的索引上有一个外键。读到我必须使用`INSERT...ON DUPLICATE KEY UPDATE`语法才能使其工作，但我不清楚如何使用准备好的语句来做到这一点。有什么解决办法吗？谢谢。

sql是：

```
$sql="REPLACE INTO fn_currencies(id,short,name,buy,sell,date) VALUES (:id,:short,:name,:buy,:sell,:update)"; 
```

**UPD：**我在 Yii 中使用 PDO 上的个人包装器进行此查询。当我使用未命名的参数时，会出现这种类型的错误：

```
CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens. The SQL statement executed was: INSERT INTO `fn_currencies` (id,short,name,buy,sell,date) VALUES (?,?,?,?,?,?) ON DUPLICATE KEY UPDATE id=?,short=?,name=?,buy=?,sell=?,date=? 
```

当我使用具有不同名称的命名参数进行插入和更新时，如上所述..我没有收到任何错误，也没有数据插入到我的数据库中。这是数据库的架构：

```
CREATE TABLE IF NOT EXISTS `fn_currencies` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `short` varchar(4) NOT NULL,
  `name` varchar(200) NOT NULL,
  `buy` decimal(10,4) NOT NULL,
  `sell` decimal(10,4) NOT NULL,
  `date` date NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

--
ALTER TABLE `fn_currencies`
  ADD CONSTRAINT `FK_fn_currencies` FOREIGN KEY (`id`) REFERENCES `fn_operations` (`currency_id`); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:26:43.500

感谢 DavaRandom，他指出了我的代码中的一个错误，但这应该可以解决问题。将命名参数替换为`?`并使用数组合并来动态生成 SQL，如下所示：

```
$sql="
    insert INTO fn_currencies(id,short,name,buy,sell,date) 
    VALUES (?,?,?,?,?,?)
    on duplicate key update currencies set 
        short=?, name=?, buy=?, sell=?, update=?";
$values=array("id"=>1, "short"=>36, "name"=>'Bazinga', "sell"=>3.67, "date"=>'2012-08-08');
$db->query($sql, array_merge(array_values($values),array_values($values))); 
```

显然这也会起作用（请参阅页面上关于是/否/可能的评论），但上述内容肯定会起作用：

```
$sql="
    insert INTO fn_currencies(id,short,name,buy,sell,date) 
    VALUES (:id,:short,:name,:buy,:sell,:update)
    on duplicate key update currencies set 
        short=:short, name=:name, buy=:buy, sell=:Sell, update=:update"; 
```

# linux - 使用 Perl 的 telnet 连接出现“模式匹配读取 eof”错误

> ID：11862515
> 
> 赞同：2
> 
> 时间：2012-08-08T10:24:46.073
> 
> 标签：linux, perl, unix, telnet

我正在尝试打开一个 telnet 连接，执行一些命令，然后终止连接。我需要它运行大约 1000 次。该脚本可以正常运行一些尝试 [ 说大约 23 - 25 ]。然后，我收到以下错误：

**“模式匹配在 perlscript.pl 第 23 行读取 eof”**

第23行对应代码

`$tn->waitfor('/Password: /i')`.

在此错误之后，如果我尝试手动打开 telnet 连接，则会收到错误消息：

“**服务和队列已满，请稍后再来**”

我想我得到了第一个错误“模式匹配读取 eof”，因为 telnet 连接由于“服务和队列已满”错误而终止。

我试图更多地调试这个问题，当我检查日志时，我遇到了这个错误：

`2012 08 08 10:27:46 EDT: Exception occured:`
**`java.lang.NullPointerException`**
`at dtw.telnetd.net.Connection.close(Connection.java)`
`at dtw.telnetd.net.ConnectionManager.cleanupBroken(ConnectionManager.java)`
`at dtw.telnetd.net.ConnectionManager.run(ConnectionManager.java)`

关于可能导致此异常的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:35:55.893

```
#!/usr/bin/perl

($user,$pass)=@ARGV;
use Data::Dumper;
%resp=();
use Net::Telnet ();
for (0..100) {
$tn=new Net::Telnet(Timeout=>10, prompt=>'/jamie\@jenks:~\$/');
$tn->open("jenks");
$tn->login($user,$pass);
@lines=$tn->cmd("uname -a");
$resp{$lines[0]}++;
$tn->prompt("//");
@bye=$tn->cmd("logout");
}

print Dumper(\%resp); 
```

这似乎对我有用，在发出注销命令之前将提示设置为空字符串

# matlab - 是否可以将方法动态添加到 MATLAB 类？

> ID：11862523
> 
> 赞同：9
> 
> 时间：2012-08-08T10:25:28.820
> 
> 标签：matlab, class, oop, dynamic-properties

编写一个子类`dynamicprops`允许我向对象动态添加属性：

```
addprop(obj, 'new_prop') 
```

这很棒，但我也很想`set / get`为这些属性动态创建函数。或对这些动态属性起作用的分析函数。

到目前为止，我对 Matlab 的经验是，一旦我创建了一个类的实例，就不可能添加新方法。这非常麻烦，因为我的对象可能包含大量数据，每次我想添加新方法时都必须重新加载（因为我必须这样做`clear classes`）。

那么有没有办法即时添加方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T10:51:40.683

您不能像添加动态属性那样添加方法。但是，有两种方法可以在开发过程中实现新方法，不需要您每次都重新加载数据。

(1) 我将标准方法编写为单独的函数，并`myMethod(obj)`在开发过程中调用它们。一旦我确定它们是稳定的，我就将它们的签名添加到类定义文件中——这`clear classes`当然需要一个 .

(2) 使用 set/get 方法，事情就有点棘手了。如果您使用`dynamicprops`添加新属性，您也可以指定它们的 set/get 方法，但是（这些方法/函数很可能希望接收属性的名称，以便他们知道要引用什么）：

```
addprop(obj,'new_prop');
prop = findprop(obj,'new_prop');
prop.SetMethod = @(obj,val)yourCustomSetMethod(obj,val,'new_prop') 
```

**编辑**

(2.1) 下面是一个如何设置隐藏属性来存储和检索结果的示例（基于[jmlopez 的回答](https://stackoverflow.com/a/20810965/232610)）。显然，如果您对实际设计的内容有更好的了解，则可以大大改善

```
classdef myDynamicClass < dynamicprops
    properties (Hidden)
        name %# class name
        store %# structure that stores the values of the dynamic properties
    end
    methods
        function self = myDynamicClass(clsname, varargin)
            % self = myDynamicClass(clsname, propname, type)
            % here type is a handle to a basic datatype.
            self.name_ = clsname;
            for i=1:2:length(varargin)
                key = varargin{i};
                addprop(self, key);
                prop = findprop(self, key);
                prop.SetMethod = @(obj,val)myDynamicClass.setMethod(obj,val,key);
                prop.GetMethod = @(obj)myDynamicClass.getMethod(obj,key);
            end
        end
        function out = classname(self)
            out = self.name_;
        end
    end
    methods (Static, Hidden) %# you may want to put these in a separate fcn instead
        function setMethod(self,val,key)
           %# have a generic test, for example, force nonempty double
           validateattributes(val,{'double'},{'nonempty'}); %# will error if not double or if empty

           %# store
           self.store.(key) = val;

        end
        function val = getMethod(self,key)
           %# check whether the property exists already, return NaN otherwise
           %# could also use this to load from file if the data is not supposed to be loaded on construction 
           if isfield(self.store,key)
              val = self.store.(key);
           else
              val = NaN;
           end
        end
    end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-28T04:23:46.297

我添加这个答案是因为我认为这不直观。至少此刻对我自己不是。找到这个问题后，我认为我拥有了为我的动态类定义 set/get 方法所需的东西。我想要实现的只是类似于 python 使用它的`__setattr__`方法所做的事情。无论如何，这是@jonas 不久前创建的类的[延续，并进行了一些修改以添加我们的自定义 set 方法。](https://stackoverflow.com/a/7387504/788553)

```
classdef myDynamicClass < dynamicprops
    properties (Hidden)
        name_ %# class name
    end
    methods
        function self = myDynamicClass(clsname, varargin)
            % self = myDynamicClass(clsname, propname, type)
            % here type is a handle to a basic datatype.
            self.name_ = clsname;
            for i=1:2:length(varargin)
                key = varargin{i};
                addprop(self, key);
                prop = findprop(self, key);
                prop.SetMethod = makefunc(key, varargin{i+1});
            end
        end
        function out = classname(self)
            out = self.name_;
        end
    end
end

function h = makefunc(key, argtype)
    h = @newfunc;
    function newfunc(obj, val)
       obj.(key) = argtype(val); 
    end
end 
```

通过这个类，我定义了 set 方法，以便将传递给属性的参数复制到正确的类型。要了解我的意思，请考虑以下用法：

```
>> p_int = myDynamicClass('Point', 'x', @int8, 'y', @int32);
>> p_int.x = 1000 

p_int = 

  myDynamicClass with properties:

    y: []
    x: 127

>> class(p_int.x)

ans =

int8 
```

有了这个，我们强制`x`属性为 8 位整数，它只能保存从 -128 到 127 的整数。还要注意每个属性的类如何为我们提供预期的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-06T15:51:34.100

> 到目前为止，我对 Matlab 的经验是，一旦我创建了一个类的实例，就不可能添加新方法。这非常麻烦，因为我的对象可能包含大量数据，每次我想添加新方法时都必须重新加载（因为我必须这样做`clear classes`）。

对于这个问题的当今读者来说，值得注意的是，这不再是正确的。[从 MATLAB R2014b 开始，](https://mathworks.com/help/matlab/release-notes-R2014b.html#bt_w6ti-14) MATLAB 会在您保存类定义时更新它们，并且现有类实例的行为会[相应地自动更新](https://mathworks.com/help/matlab/matlab_oop/modifying-and-reloading-classes.html)。在添加新方法的情况下，这并不复杂：新方法可以简单地用于调用类实例，即使它们是在方法添加到类之前创建的。

为动态属性选择 set/get 方法给出的解决方案仍然适用。

在某些情况下，您可能希望动态地向实例添加方法，并且该方法不构成属性 set/get 方法。我认为在这种情况下唯一的答案是将函数句柄作为值分配给动态属性。这不会创建真正的方法，但允许您以与方法调用相同的方式调用它：

```
addprop(obj, 'new_method');
obj.new_method = @(varargin) my_method(obj,varargin{:}); 
```

调用`obj.new_method(args)`因此传递给`my_method`; 但是这只适用于标量`obj`；实例数组将具有单独的`new_method`属性值，因此`obj.new_method`不再解析为可以调用的单个函数句柄，如果`obj`是一个数组。

# android - 收到短信后系统短信工具崩溃

> ID：11862528
> 
> 赞同：-1
> 
> 时间：2012-08-08T10:25:50.020
> 
> 标签：android, sms, nullpointerexception

当我收到短信时会发生一些奇怪的事情。当我收到一条短信时，系统短信工具就崩溃了。

这是日志：

```
08-07 11:05:00.750: ERROR/JavaBinder(1369): !!! FAILED BINDER TRANSACTION !!!
08-07 11:05:02.080: ERROR/wifi(1369): [android_net_wifi_getRssiHelper] rssi -41
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574): SMS PDU parsing failed: 
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574): java.lang.NullPointerException
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574):     at com.android.internal.telephony.gsm.SmsMessage$PduParser.getByte(SmsMessage.java:911)
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574):     at com.android.internal.telephony.gsm.SmsMessage$PduParser.getSCAddress(SmsMessage.java:886)
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574):     at com.android.internal.telephony.gsm.SmsMessage.parsePdu(SmsMessage.java:1733)
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574):     at com.android.internal.telephony.gsm.SmsMessage.createFromPdu(SmsMessage.java:184)
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574):     at android.telephony.SmsMessage.createFromPdu(SmsMessage.java:289)
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574):     at android.provider.Telephony$Sms$Intents.getMessagesFromIntent(Telephony.java:765)
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574):     at com.android.mms.transaction.SmsReceiverService.handleSmsReceived(SmsReceiverService.java:645)
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574):     at com.android.mms.transaction.SmsReceiverService.access$100(SmsReceiverService.java:99)
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574):     at com.android.mms.transaction.SmsReceiverService$ServiceHandler.handleMessage(SmsReceiverService.java:425)
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574):     at android.os.Looper.loop(Looper.java:123)
08-07 11:05:02.450: ERROR/[gsm/SmsMessage](1574):     at android.os.HandlerThread.run(HandlerThread.java:60)
08-07 11:05:02.460: ERROR/AndroidRuntime(1574): FATAL EXCEPTION: SmsReceiverService
08-07 11:05:02.460: ERROR/AndroidRuntime(1574): java.lang.NullPointerException
08-07 11:05:02.460: ERROR/AndroidRuntime(1574):     at android.telephony.SmsMessage.getProtocolIdentifier(SmsMessage.java:1077)
08-07 11:05:02.460: ERROR/AndroidRuntime(1574):     at com.android.mms.transaction.SmsReceiverService.insertMessage(SmsReceiverService.java:1691)
08-07 11:05:02.460: ERROR/AndroidRuntime(1574):     at com.android.mms.transaction.SmsReceiverService.handleSmsReceived(SmsReceiverService.java:647)
08-07 11:05:02.460: ERROR/AndroidRuntime(1574):     at com.android.mms.transaction.SmsReceiverService.access$100(SmsReceiverService.java:99)
08-07 11:05:02.460: ERROR/AndroidRuntime(1574):     at com.android.mms.transaction.SmsReceiverService$ServiceHandler.handleMessage(SmsReceiverService.java:425)
08-07 11:05:02.460: ERROR/AndroidRuntime(1574):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-07 11:05:02.460: ERROR/AndroidRuntime(1574):     at android.os.Looper.loop(Looper.java:123)
08-07 11:05:02.460: ERROR/AndroidRuntime(1574):     at android.os.HandlerThread.run(HandlerThread.java:60)
08-07 11:05:05.090: ERROR/wifi(1369): [android_net_wifi_getRssiHelper] rssi -42
08-07 11:05:08.110: ERROR/wifi(1369): [android_net_wifi_getRssiHelper] rssi -44 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:33:08.820

**只需转到您的设置->应用程序->管理应用程序**，然后从该选项卡中转到“全部”选项卡，然后选择“消息传递”，现在单击“清除数据”按钮。它可能会解决您的问题

# c++ - 处理包含和使用标题

> ID：11862530
> 
> 赞同：1
> 
> 时间：2012-08-08T10:25:55.747
> 
> 标签：c++, visual-studio

我有“Hello World”代码，它使用来自另一个具有它的标题的 hi.cpp 文件中的函数 fhi。

如果我的理解有误，请根据以下内容纠正我：

我可以包含 cpp 文件， `#include "c:\c\hi.cpp"`而不是使用 header 没有任何问题，除了它在头文件中看起来更具可读性。

如果我在我的主程序中包含像示例这样的标题`hi.h`，则必须`hi.h`包含`hi.cpp`，否则它会根据相同的文件名自动完成`hi`。我想知道编译器如何知道函数`fhi`体在哪里。

头文件和cpp文件可以有不同的名称吗？

程序：

```
#include "stdafx.h"
#include "c:\c\hi.h"

int _tmain(int argc, _TCHAR* argv[])
{
fhi(1);
return 0;
} 
```

嗨.h

```
 #include <cstdlib>
 #include <iostream>

 int var;
 int  fhi(int f); 
```

嗨.cpp

```
 #include <cstdlib>
 #include <iostream>

 int  fhi(int f)
 {
 return 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:32:46.107

> hi.h 必须包含 hi.cpp

No.`hi.h`仅包含声明，其他 .cpp 文件可以是其他声明。

> 我想知道编译器如何知道函数 fhi 主体在哪里。

它没有。您需要将所有 *.cpp 文件编译成目标文件。在您的情况下，您将有两个目标文件：`program.o`和`hi.o`. 链接器现在可以获取这两个目标文件，并输出可执行文件。对其他函数的引用（在这种情况下是 fhi(..) 的实际定义）在此阶段解决。

另外，为什么在#includes 中使用绝对路径？当您移动“c”目录时它会中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:33:42.657

通常发生的是构建系统将`.cpp`文件编译成目标文件，然后用于构建主可执行文件。将这一点告诉构建系统的方法差异很大。

重要的一点是您`hi.cpp` **必须**包括`hi.h`. 您还应该在 中放置一个包含[保护](http://en.wikipedia.org/wiki/Include_guard)`hi.h`，以确保在翻译单元中多次包含它是安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T10:34:38.770

> 我可以包含像 #include "c:\c\hi.cpp" 这样的 cpp 文件，而不是使用 header 没有任何问题，除了它在头文件中看起来更具可读性。

是的，您可以这样做，但不建议这样做，问题之一是封装；你没有隐藏实现细节。您提到的可读性也是一个问题，标题更容易阅读，因为它清楚地显示了哪些方法是公共的。

> 如果我在我的主程序 hi.h 中包含像 sample 这样的标题，hi.h 必须包含 hi.cpp，否则它会根据相同的文件名 hi 自动完成。我想知道编译器如何知道函数 fhi 主体在哪里。

标头需要显式包含在 hi.cpp 和任何使用标头中定义的类的 .cpp 文件中。

> 头文件和cpp文件可以有不同的名称吗？

是的，但不建议这样做，这会使找到东西变得更加困难。

作为一般规则：想想其他程序员可能想要查看您的代码，因此您需要对其进行结构化，使其易于阅读和理解，并让您在 2 年后更容易记住事情在哪里.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T10:35:02.230

在 Visual Studio 中，项目中包含的所有 CPP 文件都将被编译以生成 OBJ 文件。这些 OBJ 文件将链接在一起形成 EXE 或 DLL。

包含文件类似于将文件的内容粘贴到该位置。唯一的区别是这种粘贴是由预编译器在编译期间完成的。

如果函数是内联的，则由编译器或在创建最终二进制文件时由链接器完成查找函数体所在的位置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-08T10:37:42.283

首先，如果头文件与包含它的源文件位于同一目录中，则可以使用 just

```
#include "hi.h" 
```

换句话说，您不必使用完整路径。（参见例如包含`"stdafx.h"`。）

其次，在您的头文件中，您不需要包含其他头文件，除非您需要这些头文件中的类型。在您的头文件中，您包含的头文件中没有任何需要的东西。

第三，你应该保护头文件头文件不被多次包含在同一个源文件中，这可以通过所谓[的 include guard](http://en.wikipedia.org/wiki/Include_guard)来完成，在某些编译器中通过一个名为[`#pragma once`](http://en.wikipedia.org/wiki/Pragma_once).

第四，在你的头文件中*定义*一个全局变量`var`。然后将在包含头文件的每个源文件中定义此变量，这将导致错误。您需要将变量声明为`extern`：

```
extern int var; 
```

然后在一个源文件中定义变量，就像现在一样。

第五，你不应该在头文件中包含源文件（有一些你不必考虑的特殊例外）。相反，您将所有源文件添加到项目中（我假设您在 MS VisualStudio 中），它们将全部自动构建并链接在一起。

第六，既然您似乎在使用 VisualC++，那么您可能正在使用一种叫做[precompiled headers](http://en.wikipedia.org/wiki/Precompiled_header)的东西。这是编译器用来加速编译的东西。但是，要使其工作，您必须包含`"stdafx.h"`在所有源文件中。该包含实际上必须是每个源文件中的第一个非注释行。

# c# - 如何将所有文件编译成一个exe？

> ID：11862532
> 
> 赞同：11
> 
> 时间：2012-08-08T10:26:04.320
> 
> 标签：c#, ilmerge

我用 C# 编写了一个项目，该项目使用了大量图像、Milk 模型和 openGL，我想将所有内容打包到一个 exe 中，以便将其上传到我的网站。现在我得到了一个依赖于其他文件（如 jpgs 等）的 exe。我尝试过使用 ILMerge，但无法正常工作。有没有更简单的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T10:28:10.800

您可以将所有文件/图像作为**Embedded Resources**放入 exe 中。

请参阅~~[如何使用 Visual C# 嵌入和访问资源](http://support.microsoft.com/kb/319292)~~（此链接当前为 404s）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T10:35:55.480

将其添加为嵌入式资源。

在 Visual Studio 中：

1.  转到解决方案资源管理器，
2.  右击图片，
3.  转到构建操作：选择嵌入式资源。

您将在 exe 中拥有该图像。稍后您可以在运行应用程序时使用反射并获取图像。

========= 从应用程序获取嵌入式图像 =========

首先解决第一个问题：通过将图像作为嵌入资源。

第二个问题：使用反射访问图像：

```
private void Form1_Load(System.Object sender, System.EventArgs e)
{
    System.Reflection.Assembly myAssembly = System.Reflection.Assembly.GetExecutingAssembly();
    Stream myStream = myAssembly.GetManifestResourceStream("EmbeddingExample.image1.bmp");
    Bitmap image = new Bitmap(myStream);

    this.ClientSize = new Size(image.Width, image.Height);

    PictureBox pb = new PictureBox();
    pb.Image = image;
    pb.Dock = DockStyle.Fill;
    this.Controls.Add(pb);
} 
```

[从这里](http://msdn.microsoft.com/en-us/library/aa984367(v=vs.71).aspx)借来的源代码：

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T10:28:14.617

ilmerge 仅用于将 .net CLR 二进制文件合并在一起，通常用于将库捆绑到您的主可执行文件中。

对于艺术资产之类的东西，您希望将它们作为资源嵌入到您的应用程序中。从资源中，您可以获得一个流，让您可以像在文件中一样处理数据。

有关嵌入资源的信息，请参阅此 MSDN 文章：http: [//support.microsoft.com/kb/319292](http://support.microsoft.com/kb/319292)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T10:28:41.643

当您在属性中将图像添加到项目时，您可以将其设置为嵌入式资源，然后它将被添加到二进制文件（dll 或 exe）中

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T10:31:27.850

我更愿意为资源文件创建一个附属程序集。[http://msdn.microsoft.com/en-us/library/21a15yht%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/21a15yht%28v=vs.71%29.aspx)

# android - Robotium 测试随机失败

> ID：11862541
> 
> 赞同：1
> 
> 时间：2012-08-08T10:26:48.167
> 
> 标签：android, user-interface, testing, robotium

我正在使用 Robotium 在我的 Android 应用程序中测试 GUI。当我通过eclipse运行我的测试时，它们都顺利通过，但是当我通过maven运行它们时，测试似乎随机失败。活动屏幕有时会在崩溃之前挂起，有时我会收到无法找到要单击的文本的错误，而我可以在模拟器上看到它。我在所有必要的地方都有`solo.waitForText()`并且`solo.waitForActivity()`尝试了许多不同的代码重写，但我每次都遇到同样的问题。

有没有其他人遇到过 Robotium 的这个问题并找到了解决方案？这是一个很棒的框架，允许对应用程序进行彻底的测试，所以如果可能的话，我想使用它。

查克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:18:38.487

请将 Robotium 更新到 3.4.1 版本。您所描述的问题已在新版本中得到修复。

如果您的问题在 3.4.1 中仍然存在，请提交以下缺陷报告：

[http://code.google.com/p/robotium/issues/list](http://code.google.com/p/robotium/issues/list)

# c++ - MFC/C++ 应用程序中的丰富 gui

> ID：11862544
> 
> 赞同：-1
> 
> 时间：2012-08-08T10:27:01.600
> 
> 标签：c++, user-interface, mfc

我们曾经使用 MFC/C++ 构建应用程序。我们希望制作像 VS 2010 或 Outlook 等有点丰富的 UI……最后，我们希望像 Microsoft 在其产品的每个版本上所做的那样，为我们的应用程序赋予新的外观。

请向我建议我需要研究的主题或建议我选择相同的选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T10:31:02.950

如果您使用的是 Visual Studio 2010 或更高版本，MFC 应用程序向导本身将生成类似于 VS 2010 的 UI，带有选项卡和停靠窗口。事实上，您可以创建一个看起来像 VS 2010 的应用程序，而无需编写任何代码。还支持功能区控件，它取代了新办公应用程序中的菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:50:13.317

正如我假设您将使用 C++/native 代码，MFC 仍然是要走的路，或者您也可以选择 WTL。如果你准备好去一个完全不同的方向，那么 QT 是最先进和现代的跨平台库之一。与QT相比，MFC感觉老了。AFAIK 你不能在没有微软许可的情况下在 QT 中使用功能区控件。另一种选择是采用托管方式，您可以将 WPF 与 C# 一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:46:32.993

如前所述，您可以使用Visual Studio 2008 Service Pack 1 附带的[MFC 功能包中的新类。](http://msdn.microsoft.com/en-us/library/bb982354%28v=vs.90%29)

MSDN 在此处提供了如何将旧的 MFC 应用程序迁移到新的 MFC 功能包类的教程：http: [//msdn.microsoft.com/en-us/library/bb983935%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/bb983935%28v=vs.90%29.aspx)

# php - sendGrid 邮件功能在 yii 框架中不起作用

> ID：11862546
> 
> 赞同：1
> 
> 时间：2012-08-08T10:27:06.510
> 
> 标签：php, yii, sendgrid

我将下面的代码用于 sendGrid 代码，用于从我的项目发送邮件。

```
require_once(YII_BASE_PATH . "/lib/sendgrid-php/SendGrid.php");
require_once(YII_BASE_PATH . "/lib/sendgrid-php/SendGrid_loader.php");   
$sendgrid = new SendGrid('uname', 'pwd');
        $mail = new SendGrid\Mail();
        $mail->addTo('xxxxxxxxxx@gmail.com')->
               setFrom('xxxyyyy5@yahoo.co.in')->
               setSubject('Subject goes here')->
               setText('Hello World!')->
               setHtml('<strong>Hello World!</strong>');
       $sendgrid->smtp->send($mail); 
```

我已经下载了 sendGrid 包并将其放入 yii 的 lib 文件夹中。

如果我执行上面的代码，我会收到类似的错误`"include(Swift_DependencyContainer.php): failed to open stream: No such file or directory"`

如果我包含上述文件，我会收到错误，例如需要包含另一个文件。

请就此提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:14:26.820

SendGrid 似乎依赖于包含路径来加载其依赖项。所以你必须使用一个或几个

```
Yii::setPathOfAlias()
Yii::import() 
```

将 SendGrid 添加到包含路径的语句。也许 ：

```
Yii::setPathOfAlias('SendGrid', YII_BASE_PATH'.'/lib/sendgrid-php');
Yii::import('SendGrid.*'); 
```

见：[http ://www.yiiframework.com/doc/api/1.1/YiiBase#import-detail](http://www.yiiframework.com/doc/api/1.1/YiiBase#import-detail)

我使用 Zend_Mail 而不是 SendGrid，但我遇到了同样的包含路径问题。我已经通过使用这些语句解决了它：

```
Yii::setPathOfAlias('zf', '/path/to/zend/library/folder');
Yii::import('zf.*');
Yii::import('zf.Zend.Loader.Autoloader', true);
Yii::registerAutoloader(array('Zend_Loader_Autoloader', 'autoload')); 
```

我认为您的问题的解决方案是相似的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:00:32.307

这对我有用：

```
// Define constant which SendGrid uses for referencing the path
define('ROOT_DIR', Yii::app()->basePath . '/lib/sendgrid-php/');
// Prevent swift_required from executing
define('SWIFT_REQUIRED_LOADED', true);

// Import SendGrid and Swift libraries
Yii::import('application.lib.sendgrid-php.SendGrid');
Yii::import('application.lib.sendgrid-php.lib.swift.classes.Swift', true);
Yii::registerAutoloader(array('Swift', 'autoload'));
Yii::import('application.lib.sendgrid-php.lib.swift.swift_init', true);

// Register namespace
Yii::setPathOfAlias('SendGrid', Yii::app()->basePath . '/lib/sendgrid-php/SendGrid/'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:07:04.557

最后我让它工作。供您参考，我列出了步骤（也为我自己），

1）我们需要从[https://github.com/sendgrid/sendgrid-php/downloads下载 sendgrid-php 包](https://github.com/sendgrid/sendgrid-php/downloads)

2) 解压文件夹并放入您的项目文件夹，如“app/mail/”。

3) 创建一个 .php 文件用于在该文件夹中发送邮件，如“app/mail/mail.php”。

4）在那个文件中，

```
 <?php
        session_start();
        define("ROOT_DIR", __dir__ . DIRECTORY_SEPARATOR);

        function sendGrid_loader($string) {
            if (preg_match("/SendGrid/", $string)) {
                $file = str_replace('\\', '/', "$string.php");
                require_once ROOT_DIR . $file;
            }
        }

        spl_autoload_register("sendGrid_loader");

        $sendgrid = new SendGrid('sendgrid_username', 'sendgrid_password');
        $mail = new SendGrid\Mail();
    $mail->addTo('foo@bar.com')->
           setFrom('me@bar.com')->
           setSubject('Subject goes here')->
           setText('Hello World!')->
           setHtml('<strong>Hello World!</strong>');
?> 
```

5）当我重定向到邮件发送页面时，我需要发送邮件。所以我在 Actionmailsend() 的控制器文件中编写代码，

```
" header("Location:".AT::getUrl()."/mail/mail.php"); ". 
```

只是重定向。就是这样。邮件发送成功。

*   这里 AT::getUrl() - 用于获取 baseurl。

*   它没有集成到 yii。我们使用邮件功能将 sendGrid 包文件夹放入 yii 项目文件夹中并使用它。

# c# - GridView 导出到 Excel

> ID：11862548
> 
> 赞同：-2
> 
> 时间：2012-08-08T10:27:12.720
> 
> 标签：c#, asp.net, gridview, export-to-excel

我有一个asp.net 页面，其中有一个gridview 和一个按钮。在按钮单击事件上，我编写了将 gridview 导出到 excel 的代码，该代码运行良好。但是当我尝试打开那个导出的 excel 文件时，它会显示一个对话框，上面写着：

> “您尝试打开的文件的格式与文件扩展名指定的格式不同。在打开文件之前，请确认文件没有损坏并且来自受信任的来源”。

不仅如此，我在gmail中将excel文件作为附件发送并尝试在手机中打开它，当时它以html文件的形式打开。我该怎么做，因为我的客户将使用手机查看邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:53:16.897

我建议使用 Excel 文件扩展名创建一个实际的 Excel 文件，而不是 CSV 或 HTML。

实现此目的的一种简单方法是使用[ClosedXML](http://closedxml.codeplex.com/)。

为此，请从 codeplex 站点下载 ClosedXML.dll 和 DocumentFormat.OpenXml.dll，并将它们作为引用添加到您的 ASP.NET 项目中。然后，在您的按钮单击事件中，您可以简单地设置一个 Excel 工作簿，从`DataTable`您绑定到的相同工作表创建一个工作表`GridView`，并将工作簿文件保存在 HTTP 响应中。像这样的东西：

```
var wb = new ClosedXML.Excel.XLWorkbook();
DataTable dt = GetTheDataTable();
dt.TableName = "This will be the worksheet name";

wb.Worksheets.Add(dt);

Response.Clear();
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.AddHeader("content-disposition", "attachment;filename=\"FileName.xlsx\"");

using (var ms = new System.IO.MemoryStream()) {
    wb.SaveAs(ms);
    ms.WriteTo(Response.OutputStream);
    ms.Close();
}

Response.End(); 
```

我会选择 ClosedXML 而不是其他替代方案，因为许可证限制较少，文档极好，开发人员乐于助人且友好，并且该项目目前非常活跃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:42:00.097

在您的按钮单击事件中：

```
 protected void btnExcel_Click(object sender, ImageClickEventArgs e)
    {
        //export to excel
        Response.Clear();
        Response.AddHeader("content-disposition", "attachment;filename=FileName.xls");
        Response.Charset = "";

        // If you want the option to open the Excel file without saving then
        // comment out the line below
        // Response.Cache.SetCacheability(HttpCacheability.NoCache);
        Response.ContentType = "application/vnd.xls";
        System.IO.StringWriter stringWrite = new System.IO.StringWriter();
        System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);
       //GV is the ID of gridview
        GV.RenderControl(htmlWrite);
        Response.Write(stringWrite.ToString());
        Response.End();
    } 
```

并在后面的页面代码中覆盖此方法：

```
 public override void VerifyRenderingInServerForm(Control control)
{
    /* Confirms that an HtmlForm control is rendered for the specified ASP.NET
       server control at run time. */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:32:43.287

当我导出到 excel 时，我只是创建了一个逗号分隔的文件并给它一个 excel 文件扩展名。当我开始使用带双引号的逗号分隔时，该消息消失了。

“一”、“二”、“三”而不是一、二、三

# svn - 在 Liferay 服务器启动时以编程方式将文件添加到文档和媒体库

> ID：11862549
> 
> 赞同：2
> 
> 时间：2012-08-08T10:27:18.553
> 
> 标签：svn, storage, liferay, document

我想在 SVN 结构中提交 2 个文件，因此我们 Liferay 服务器上的任何启动都默认包括文档和媒体库中的两个注册文件。

有没有办法以编程方式在文档和媒体库中添加/编辑文件？

为服务器放置这种`init()`（初始化）代码的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:30:51.880

是的，你可以这样做。

在 中创建`hook`并定义以下内容`portal.properties`：

`application.startup.events=com.my.TwoDocumentsOnStartOfLiferayCreator`

（请参阅Liferay[开发人员指南中的](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/liferay-portal-6-1-development-guide)[扩展和覆盖*portal.properties*](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/extending-and-overriding-%3Cem%3Eportal-properties%3C-e-3)部分）。

现在，`TwoDocumentsOnStartOfLiferayCreator`该类将在 Liferay 门户服务器的每次启动时执行。您可以在其中`TwoDocumentsOnStartOfLiferayCreator`检查现有文件，如有必要，更新或创建新文件。

以编程方式创建文档并不是那么简单，但 liferay 提供了用于创建/更新/删除文档的 API。您可以从检查 liferay 的源代码中的[`EditFileEntryAction#updateFileEntry()`](https://github.com/liferay/liferay-portal/blob/master/portal-impl/src/com/liferay/portlet/documentlibrary/action/EditFileEntryAction.java#L783)方法开始。

# git - Git：在 Visual Studio 打开不好的做法时检查分支吗？

> ID：11862552
> 
> 赞同：2
> 
> 时间：2012-08-08T10:27:38.693
> 
> 标签：git, visual-studio, version-control, git-checkout

当我在 Git 中签出一个分支时，如果我在 Visual Studio 中打开了该项目，程序将检测到文件已更改并提示我重新加载。

只是想知道对此的普遍共识是什么。我是否应该在分支之前关闭 VS，以防止 Visual Studio 尝试更新其状态以反映文件系统而导致的任何不整洁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:10:30.763

现在使用版本控制系统来操作文件系统非常普遍，任何现代 IDE 都应该检测并响应此类更改。

如果您的项目文件被跟踪，它也应该在分支切换时更改，以防止任何潜在的不整洁。我知道 XCode 会在项目文件更改时自动重新加载项目。任何最新版本的 VS 也应该这样做。

# python - Python 模板包含一个页面 if 条件

> ID：11862554
> 
> 赞同：0
> 
> 时间：2012-08-08T10:27:47.247
> 
> 标签：python, google-app-engine, templates, boilerplate

我正在使用 Python 和 Google 应用引擎开发一个小应用程序。我使用样板（https://github.com/coto/gae-boilerplate）作为前端，它遵循 gae 方向和 python 模板，所以没有什么比普通的东西不同的了。

现在，我想要的是这个。当用户登录时，如果未填写姓名和姓氏字段，我希望在主页中进行个人资料编辑。

用于编辑配置文件的页面是一个模板（扩展了 base.html），名为 edit_profile.html，它运行良好。主页也是一个名为 home.html 的模板（扩展 base.html）。

现在，我可以在 home.html 中包含 edit_profile.html 吗？我该怎么做？

这就是我所拥有的，我不知道该放什么而不是???? 我试过了

```
 {% block edit_profile.html %}  {% endblock %} 
```

但不起作用

```
{% if user_info.name and user_info.last_name %}
        ..
        {% else %}
           ????
        {% endif %} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:36:48.337

因此，您只想包含给定模板的某些块。有两种解决方案：

1）创建模板仅用于配置文件编辑表单并将其包含到`edit_profile.html`. 然后将其也包含 `home.html`到`if`条件分支中：

profile_form.html：

```
<form action="{% url some-action %}">
{{ form }}
<input type="submit" value="save"/>
</form 
```

profile_edit.html

```
{% extends "base.html" %}

{% block main %}
{% include "profile_form.html" %}
{% endblock %} 
```

主页.html

```
{% if user_info.name and user_info.last_name %}
{% include "profile_form.html" %}
{% endif %} 
```

2）为扩展模板使用变量：

profile_form.html

```
{% extend BASE_TEMPLATE %} 
```

并根据需要将其设置为具有不同值的上下文：

在 home.html 中（假设`included_form.html`是一些基本模板）

```
{% if user_info.name and user_info.last_name %}
{% with "included_form.html" as BASE_TEMPLATE %}
   {% include "edit_profile.html" %}
{% endwith %}
{% endif %} 
```

如果您想将表单显示为独立页面，请设置`BASE_TEMPLATE`为`base.html`

# python - 使用 locals() 迭代对象名称时获取 KeyError

> ID：11862558
> 
> 赞同：2
> 
> 时间：2012-08-08T10:27:56.997
> 
> 标签：python, locals

我有 5 个对象，`mac5_le()`等等`mac4_le`。我试图从每个对象中提取一些值，如下所示，

```
for i in range(5,-1,-1):
     m = locals()['self.mac'+str(i)+'_le.text()']
     print m 
```

我收到错误消息`KeyError: 'self.mac5_le.text()'.`

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:41:41.780

不知道为什么要以这种方式处理对象，但您的语法肯定是错误的：

```
locals()['self.mac'+str(i)+'_le'].text() 
```

应该管用”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T10:45:38.093

What the what?

```
m = getattr(self, 'mac%d_le' % i).text() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:47:34.770

我发现您的尝试有些问题。首先，`self.name`变量不是本地范围。它们要么是实例的一部分，要么是类的一部分。局部变量是可以从当前函数范围访问的变量，但不能从全局范围访问。例如，在下面的代码中，您会看到`foo`and `bar`，但不是`baz`：

```
baz = 1

def silly():
    # These two variables are local
    foo = 2
    bar = 3
    print locals() 
```

来电`silly()`：

```
>>> silly()
{'foo': 2, 'bar': 3} 
```

其次，`locals()`and`globals()`字典不解析点运算符，也不会调用函数。

您想要做的是使用类似的东西`getattr`，或者创建一个更适合您的 api（您尝试编写的代码不是非常惯用的 Python）。以下是可能的样子`getattr`：

```
for i in range(5,-1,-1):
    m = getattr(self, 'mac'+str(i)+'_le').text()
    print m 
```

`getattr`is 将在引擎盖下进行所有正确的查找以找到`macN_le`. 一旦你有一个对象的引用，你就可以调用`.text()`它。

希望有帮助！

# design-patterns - 在 D 中实现值对象模式

> ID：11862574
> 
> 赞同：6
> 
> 时间：2012-08-08T10:29:16.480
> 
> 标签：design-patterns, constants, d, immutability, value-objects

我想在 D 中实现值对象模式。也就是说，我希望对不可变对象具有可变引用变量。`T`变量应该是可赋值的，但`T`对象不应该改变它们的状态。

`const`我对 D和D之间的区别感到困惑。让我用一个骨架类`immutable`来说明我的疑问：`Rational`

```
class Rational
{
    int num;
    int den; 
```

我应该声明`num`and `den`as `const`or`immutable`吗？整数有区别吗？

```
 invariant()
    {
        assert(den > 0);
        assert(gcd(abs(num), den) == 1);
    } 
```

我应该声明`invariant`为`const`还是`immutable`？将其标记为`immutable`会导致编译时错误，但这可能是由于其他成员没有被标记`immutable`。

```
 this(int numerator, int denominator) { ... } 
```

我应该将构造函数声明为`const`or`immutable`吗？那意味着什么？

```
 string toString()
    {
        return std.string.format("(%s / %s)", num, den);
    }
} 
```

我应该声明`toString`为`const`还是`immutable`？

除了标记单个成员，似乎我还可以标记整个班级：

```
class Rational
const class Rational
immutable class Rational 
```

其中哪一个对值对象模式最有意义？

怎么样`pure`？在值对象模式中，方法应该没有副作用，那么将每个成员声明为 有意义`pure`吗？不幸的是，标记`toString`为`pure`不会编译，因为`std.string.format`它不纯；有什么特别的原因吗？

似乎我也可以将类本身声明为`pure`，但这似乎没有任何效果，因为编译器不再抱怨`toString`调用不纯函数。

像 then 那样声明一个类是什么意思`pure`？它只是被忽略了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T11:22:27.190

## The D Struct

The value object pattern is best represented in D by simply using a [struct](http://dlang.org/struct.html) and its in-built value semantics.

To my understanding, the value object pattern is usually employed in Java due to Java's current lack of in-built aggregates with value semantics.

D's structs work similarly to structs in C and C#, as well as structs and classes in C++. The comparison is perhaps best for the latter, as D structs have constructors and destructors, but with one important exception: there's no inheritance and virtual functions; those features are delegated to [classes](http://dlang.org/class.html), which work much like classes in Java and C# (they are implicit reference types, hence they never exhibit [the slicing problem](http://en.wikipedia.org/wiki/Object_slicing)).

```
struct Rational
{
    int num;
    int den;

    /* your methods here */
} 
```

Instances of Rational are then always passed by value (unless the parameter explicitly specifies otherwise, see [ref and out](http://dlang.org/function.html#parameters)) to functions and copied on assignment.

## Purity

Pure functions cannot read or write to any global state. Pure functions are allowed to mutate explicit parameters as well as the implicit `this` parameter for methods; methods on Rational are thus probably always `pure`.

`std.string.format` not being `pure` is a problem with its current implementation. It will use a different implementation in the future that is `pure`.

## Const and Immutable

If you want to express that the method is pure and also doesn't mutate its own state, you can make it both `pure` and `const`.

Both mutable (`Rational`) and immutable (`immutable(Rational)`) instances can be implicitly converted to `const(Rational)`, hence `const` is the best choice when you don't need the immutable guarantee but you still don't mutate any members.

In general, struct methods that don't need to mutate member fields should be `const`. For classes, the same applies but you also have to think about any derived methods that may override the method - they are bound by the same restriction.

Putting `const` or `immutable` on a `struct` or `class` declaration is equivalent of marking all its members (including methods) `const` or `immutable` respectively.

## Immutable Constructors

If all your constructor does is assign the `num` and `den` fields to their respective constructor parameters, then this functionality is already present on structs by default:

```
struct S { int foo, bar; }

auto s = S(1, 2);
assert(s.foo == 1);
assert(s.bar == 2); 
```

`const` on a constructor doesn't make a lot of sense because any constructor regardless of constancy can construct a const instance since everything is implicitly convertible to const.

`immutable` on a constructor does make sense and is sometimes the only way to construct an immutable instance of a struct or class. A mutable constructor could create aliases for the `this` reference through which the instance could later be mutated, so its result cannot always be implicitly converted to immutable.

However, an immutable constructor is not needed in your case because Rational does not have any indirection, so a mutable constructor can be used and the result copied over. In other words, types with no mutable indirection are implicitly convertible to immutable. This includes primitive types like `int` and `float` as well as structs satisfying the same condition.

## Attributes with no Effect

Attributes put on declarations where they don't have any effect are ignored by all current compilers. This can make sense, because attributes can be applied to multiple declarations at once, with the `attribute { /* declarations */ }` and `attribute: /*declarations*/` syntaxes:

```
struct S
{
    immutable
    {
        int foo;
        int bar;
    }
}

struct S2
{
    immutable:
    int foo;
    int bar;
} 
```

In both of the above examples, `foo` and `bar` are of type `immutable(int)`.

## Using a Class

Sometimes value semantics are not desired, such as for performance reasons associated with frequent copying of large structs. It's possible to explicitly pass structs by reference, such as using `ref` and `out` function parameters or by using pointers, but when value semantics are the default it's easy to make mistakes, and the syntactic overhead can be grinding. Pointers also have a number of other pitfalls.

Classes are reference types and it's impossible to treat them like values. They are typically instantiated with `new`, which always creates a GC-allocated instance of the class (overloading of `new` is deprecated). These two points make classes in D very similar to classes in Java and C# (another notable point is that there are interfaces instead of multiple inheritance). However, classes have the overhead of hidden fields (currently `size_t.sizeof * 2` bytes for all classes) and the ABI of fields is not specified, but classes are also the only option when inheritance and virtual functions are desired.

Here's Rational implemented for the Value Object Pattern:

```
class Rational
{
    immutable int num;
    immutable int den;

    this(int num, int den)
    {
        this.num = num;
        this.den = den;
    }

    /* methods here */
} 
```

This is the implementation most faithful to Java implementations. It uses immutable to prevent mutation of `num` and `den` regardless of the mutability of the instance itself. Methods should be `const` and typically `pure` as with the struct.

Since immutable constructors are not currently fully implemented (read: don't use them at all), the above constructor will actually allow you to create immutable instances of the class (e.g. `new immutable(Rational)(1, 2)`) even though the constructor is free to make mutable aliases of the `this` reference, breaking the immutable guarantee.

A slightly more D-like way would be to leave immutability decisions to user code, implementing it plainly like this:

```
class Rational
{
    int num;
    int den;

    this(int num, int den)
    {
        this.num = num;
        this.den = den;
    }

    /* immutable constructor overload would be here */

    /* methods here */
} 
```

The user can then choose whether to use `Rational` or `immutable(Rational)`. The latter can be safely passed between threads using the [std.concurrency](http://dlang.org/phobos/std_concurrency.html) threading interface, while trying to send the former would be rejected at compile-time.

However, the latter has a glaring problem - because `Rational` is implicitly a reference type, there's no way to type a mutable reference to an immutable instance of Rational. The current solution to this problem is to use [std.typecons.Rebindable](http://dlang.org/phobos/std_typecons.html#Rebindable). There is a [proposed solution](https://github.com/D-Programming-Language/dmd/pull/3) for fixing this in the language.

# python - 重新组织和挑选嵌套列表的元素

> ID：11862576
> 
> 赞同：0
> 
> 时间：2012-08-08T10:29:23.647
> 
> 标签：python, list, parsing

我有一个列表列表。每个嵌套列表包含 4 或 5 个元素（ID、日期、时间、名称、注释）。我希望能够拉出包含每个人每天第一次的嵌套列表。目前我有：

```
NestedList = [[100, 08/08/2012, 8:00, John Smith], [100, 08/09/2012, 9:20, John Smith], [100, 08/08/2012, 10:00, John Smith], ..., [131, 08/10/2012, 8:00, Jane Williams], [131, 08/12/2012, 22:00, Jane Willams], ... (thousands of entries with hundreds of people)] 
```

我想要这样的东西：

```
NewList = [[100, 8/08/2012, 8:00, John Smith], [100, 8/09/2012, 8:02, John Smith], ...,      [131, 8/08/2012, 8:00, Jane Williams], [131, 08/09/2012, 8:05, Jane Williams], ...] 
```

时钟设置为 24 小时制而不是 12 小时制。我已经按 ID 号然后按日期和时间组织了列表，所以老实说，我只需要每个人或 ID 号的第一个条目。如果这是非常基本的，我深表歉意，但我找不到太多可以提供帮助的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:08:26.560

听起来您想为每个日期名称对获取一个子列表。这似乎是字典的一个很好的用例：（日期，名称）是键，该对的最早记录是值。

```
#uses an iterable `seq` to populate a dictionary.
#the function `keyFunc` will be called on each element of seq to generate keys.
#if two elements `a` and `b` have the same key, 
#`compFunc(a,b)` will return which element should belong in the dict.
def make_dict(seq, keyFunc, compFunc):
    d = {}
    for element in seq:
        key = keyFunc(element)
        if key not in d:
            d[key] = element
        else:
            d[key] = compFunc(d[key], element)
    return d

#I've put all your elements in quotes so that it's valid python. 
#You can use whatever types you prefer, 
#as long as the date and name can be used as a key, 
#and the time supports comparison.
NestedList = [
['100', '08/08/2012', '08:00', 'John Smith'], 
['100', '08/09/2012', '09:20', 'John Smith'], 
['100', '08/08/2012', '10:00', 'John Smith'], 
['131', '08/10/2012', '08:00', 'Jane Williams'], 
['131', '08/12/2012', '22:00', 'Jane Williams']
]

#the key is generated from the element's date and name
keyFunc = lambda x: (x[1], x[3])

#prefer the element with the smaller time
compFunc = lambda a,b: a if a[2] < b[2] else b

NewList = make_dict(NestedList, keyFunc, compFunc).values()
NewList.sort() #optional

print NewList 
```

输出：

```
[
['100', '08/08/2012', '08:00', 'John Smith'], 
['100', '08/09/2012', '09:20', 'John Smith'], 
['131', '08/10/2012', '08:00', 'Jane Williams'], 
['131', '08/12/2012', '22:00', 'Jane Williams']
] 
```

# email - XAMPP 1.8.0 中更改了 Sendmail 配置，无法再发送本地邮件

> ID：11862577
> 
> 赞同：2
> 
> 时间：2012-08-08T10:29:24.687
> 
> 标签：email, xampp, sendmail.exe

我刚刚从 XAMPP 1.7.3 升级到 1.8.0，在我重新安装开发环境时，这包括很多更改（PHP 5.4 等）。无论如何，现在一切正常，除了 Sendmail。之前，您在 sendmail.ini 中有这样的配置：

```
#defaults
logfile "C:\XAMPP\sendmail\sendmail.log"

## A freemail service example
account Hotmail
tls on
tls_certcheck off
host smtp.live.com
from [exampleuser]@testmail.loc
auth on
user [exampleuser]@hotmail.com
password [examplepassword]

# Set a default account
account default : Hotmail 
```

加上 php.ini 中的一些值：

```
sendmail_path = "C:\xampp\sendmail\sendmail.exe -t"
SMTP = localhost
smtp_port = 25 
```

现在一切看起来都大不相同了（旧的配置不起作用），例如： http: [//pastebin.com/M83bNmJw](http://pastebin.com/M83bNmJw)

一个小的 php 邮件脚本：

```
<?php
ini_set('display_errors', 1);
error_reporting(E_ALL);
 $to = "someone@hotmail.com";
 $subject = "Hi!";
 $body = "Hi,\n\nHow are you?";
 if (mail($to, $subject, $body)) {
   echo("<p>Message successfully sent!</p>");
  } else {
   echo("<p>Message delivery failed...</p>");
  }
?> 
```

消息传递失败...我想我太愚蠢了，无法更改正确的内容，它只是行不通，而且我的日志文件中几乎没有错误，所以我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:54:24.197

```
 #GMAIL mit XAMPP 1.8.1 und sendmail
[CODE]
[sendmail]
; HOTMAIL
smtp_server=smtp.gmail.com
smtp_port=25
smtp_ssl=tls
tls_certcheck off
error_logfile=error.log
debug_logfile=debug.log
auth_username= xxxx.xxxx@gmail.com
auth_password=xxxxxxx

 this settings in php.ini   
 [mail function]
    ; XAMPP: Comment out this if you want to work with an SMTP Server like Mercury
    ; SMTP = smtp.gmail.com
    ; smtp_port = 25

    ; For Win32 only.
    ; http://php.net/sendmail-from
    sendmail_from = xxxx.xxxx@gmail.com

    ; XAMPP IMPORTANT NOTE (1): If XAMPP is installed in a base directory with spaces (e.g. c:\program filesC:\xampp) fakemail and mailtodisk do not work correctly.
    ; XAMPP IMPORTANT NOTE (2): In this case please copy the sendmail or mailtodisk folder in your root folder (e.g. C:\sendmail) and use this for sendmail_path.  

    ; XAMPP: Comment out this if you want to work with fakemail for forwarding to your mailbox (sendmail.exe in the sendmail folder)
    sendmail_path = "\"C:\sendmail\sendmail.exe\" -t"

    ; XAMPP: Comment out this if you want to work with mailToDisk, It writes all mails in the C:\xampp\mailoutput folder
    ;sendmail_path = "C:\xampp\mailtodisk\mailtodisk.exe"

    ; Force the addition of the specified parameters to be passed as extra parameters
    ; to the sendmail binary. These parameters will always replace the value of
    ; the 5th parameter to mail(), even in safe mode.
    ;mail.force_extra_parameters =

    ; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
    mail.add_x_header = Off

    ; Log all mail() calls including the full path of the script, line #, to address and headers
    mail.log = "C:\xampp\php\logs\php_mail.log" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T05:31:21.520

我的 xampp 是 1.8.2，窗口是 8.1

在 php.ini 中

```
 smtp_port = 587
    sendmail_path = "C:\xampp\sendmail\sendmail.exe -t"
    mail.add_x_header=Off 
```

在 sendmail.ini 中

```
 smtp_server=smtp.gmail.com
    smtp_port=587
    smtp_ssl=auto
    error_logfile=error.log
    auth_username=xxaayy@gmail.com
    auth_password=kskcmhlrjr

    pop3_server=
    pop3_username=
    pop3_password=

    force_sender=xxaayy@gmail.com
    force_recipient=
    hostname= 
```

要帐户 gmail“auth_password”，您需要创建新密码“您的应用程序特定密码”，请查看 [此处][1]

然后按照以下步骤操作：

问题是 sendmail 必须以管理员身份运行。这是帮助任何人解决我的情况的解决方案。

1.  右键单击 sendmail.exe
2.  特性
3.  兼容性
4.  更改所有用户的配置
5.  作为 Windows XP SP 3 执行
6.  以管理员身份执行
7.  测试电子邮件

    ```
    $to = "aaaaaaa@domain.com";
    $subject = "Hi!";
    $body = "Hi,\n\nHow are you?";
    $headers = "From: xxaayy@gmail.com" . "\r\n";
    if (mail($to, $subject, $body, $headers)) {
       echo ("Message successfully sent!");
    } else {
       echo ("Message delivery failed...");
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T09:58:17.870

我看到在1.8.0中，默认会通过mailtodisk.exe发送邮件。您已经在 PHP 配置文件中启用了它，但是您是否禁用了 mailtodisk.exe？

此外，您需要确保`smtp_server`在 sendmail.ini 中设置为`localhost`.

我自己刚刚找到了这个解决方案，所有使用 PHP 发送的邮件都有效。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-10T14:41:56.070

我找到了一个可行的例子，它现在就像一个魅力

[http://blog.joergboesche.de/xampp-sendmail-php-mailversand-fuer-windows-konfigurieren#xampp_180_sendmail](http://blog.joergboesche.de/xampp-sendmail-php-mailversand-fuer-windows-konfigurieren#xampp_180_sendmail)

# silverlight - 数据绑定类到 Silverlight 控件工具提示

> ID：11862579
> 
> 赞同：1
> 
> 时间：2012-08-08T10:29:30.783
> 
> 标签：silverlight, class, xaml, data-binding, silverlight-4.0

在下面有一个作者类

```
Public Class Author
{
  Public String Name{get;set;}
  Public String Description{get;set;}
  Public int NumberOfBooks{get;set;}
} 
```

`List<Author>`并通过 DataTemplate 对 Listbox 进行数据绑定，如下所示

```
<ListBox ItemsSource="{Binding Authors}" BorderThickness="0">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel ToolTipService.ToolTip="{Binding Description}" ToolTipService.Placement="Right">
                                        <TextBlock Text="{Binding Name}"></TextBlock>
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox> 
```

如何使用**Xaml**描述性声明性绑定生成工具提示，如下所示

```
AuthorName ( NumberOfBooks)
Description 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:41:27.343

你可以简单点。

```
<TextBlock Text="{Binding Name}">
    <ToolTipService.ToolTip>
     <ToolTip>
      <StackPanel>
        <TextBlock>
           <Run Text="{Binding AuthorName}"/>
           <Run Text=" "/>
           <Run Text="{Binding NumberOfBooks}"/>
        </TextBlock>
        <TextBlock MaxWidth="150" 
               Text="{Binding Description}" TextWrapping="Wrap"/>
        </StackPanel>
     </ToolTip>
    </ToolTipService.ToolTip>
</TextBlock> 
```

或者变得花哨。

```
<TextBlock Text="{Binding Name}">
    <ToolTipService.ToolTip>
      <ToolTip>
        <StackPanel>
            <Border Background="CadetBlue" Margin="5" Padding="5">
                <TextBlock Text="{Binding AuthorName}" HorizontalAlignment="Center"/>
            </Border>
            <TextBlock Text="{Binding NumberOfBooks, StringFormat='No. of Books: \{0\}'}"/>
            <TextBlock MaxWidth="150" 
               Text="{Binding Description}" TextWrapping="Wrap"/>
        </StackPanel>
      </ToolTip>
    </ToolTipService.ToolTip>
</TextBlock> 
```

希望这可以帮助 ：）

# linux - 如何在保持原始顺序的情况下在 Linux 中复制行？

> ID：11862580
> 
> 赞同：3
> 
> 时间：2012-08-08T10:29:33.673
> 
> 标签：linux

我有一个像这样的文件（只有 1 列）：

```
A
B
Z
D
N 
```

我想做的是复制每一行，所以我得到了这个：

```
A
A
B
B
Z
Z
D
D
N
N 
```

我只能想到对同一个文件使用 cat 然后对其进行排序：

```
cat file1 file1 | sort -k1 > file1_duplicate 
```

但后来我失去了对我很重要的文件顺序：

```
A
A
B
B
D
D
N
N
Z
Z 
```

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T10:32:13.373

试试例如

```
sed p file >newfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:15:49.217

```
awk '{print $1;}{print $1;}' file.txt > duplicatefile.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:11:37.523

你`coreutils` `paste`可以这样做：

```
paste -d'\n' file file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:35:13.250

LSB 有 perl5。这可以解决问题：

```
cat file1 |  perl -pe '$_.=$_' > file1_duplicate 
```

# c# - 对于没有默认无参数构造函数的数据类型，Web API 静默失败

> ID：11862591
> 
> 赞同：2
> 
> 时间：2012-08-08T10:30:16.097
> 
> 标签：c#, .net, asp.net-mvc-4, asp.net-web-api, model-binding

我有一个与这个 SO 问题类似的问题：[在 ASP.NET MVC 3 中将 JSON 反序列化为没有默认构造函数的对象，](https://stackoverflow.com/questions/7360239/deserializing-json-to-object-with-no-default-constructor-in-asp-net-mvc-3)但在 MVC4 中，引用的解决方案对我不起作用。

本质上，如果我有这样的课程；

```
public class MyObject
{
    public string name = "foo";
    public int age = 33;
    public MyObject(string n)
    {
        name = n;
    }
} 
```

我尝试从 Web API 方法返回它；

```
 // GET api/values/5
    public **MyObject** Get(int id)
    {
        return new MyObject("Getted");
    } 
```

管道只是把我的要求扔在地板上。它以 500 错误**静默失败。**现在我可能期望它会挣扎，但我更喜欢例外。目前尚不清楚这是在哪里生成的，但我尝试在多个点（FilterProvider、ValueProvider、ModelBinder）进行拦截，但我看不到管道的哪个部分将其丢弃。

例如，这个自定义模型绑定器甚至**不会**被调用；

```
public class MyObjectModelBinder : DefaultModelBinder
{
    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        return new MyObject("bound model");
    }
} 
```

为了完整起见，这已在 global.asax.cs 中注册；

```
public class WebApiApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        // other stuff...

        ModelBinders.Binders.Add(typeof(MyObject), new MyObjectModelBinder());
    }
} 
```

奇怪的是，如果我添加一个默认构造函数，它实际上从未被调用过，但是没有它，Web API 管道似乎无法工作。

这**确实**有效（奇怪）；

```
public class MyObject
{
    public string name = "foo";
    public int age = 33;
    public MyObject()
    {
        throw new Exception("I am never called! But I must exist");
    }
    public MyObject(string n)
    {
        name = n;
    }
} 
```

我正在考虑在 connect.microsoft.com 上提出有关静默失败的问题，但大概必须有一个解决方法。

谁能阐明我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:29:06.353

我正在尝试使用以下代码重现您的问题，但它工作正常。你能尝试附上一个复制品吗？

```
class Program
{
    private const string baseAddress = "http://localhost:8080/";

    static void Main(string[] args)
    {   
        HttpSelfHostConfiguration configuration = new HttpSelfHostConfiguration(baseAddress);
        configuration.Routes.MapHttpRoute("default", "api/{controller}");
        HttpSelfHostServer server = new HttpSelfHostServer(configuration);

        try
        {
            server.OpenAsync().Wait();

            RunClient();
        }
        finally
        {
            server.CloseAsync().Wait();
        }
    }

    static void RunClient()
    {
        HttpClient client = new HttpClient();
        client.BaseAddress = new Uri(baseAddress);
        HttpResponseMessage response = client.GetAsync("api/Test?id=1").Result;
        response.EnsureSuccessStatusCode();
        Console.WriteLine(response.Content.ReadAsStringAsync().Result);
    }
}

public class MyObject
{
    public string name = "foo";
    public int age = 33;
    public MyObject(string n)
    {
        name = n;
    }
}

public class TestController : ApiController
{
    // GET api/values/5
    public MyObject Get(int id)
    {
        return new MyObject("Getted");
    }
} 
```

你能附上一个复制品吗？

顺便说一句，有一个跟踪包，您可以使用它来找出更多信息出了什么问题。

[http://www.nuget.org/packages/Microsoft.AspNet.WebApi.Tracing/0.3.0-rc](http://www.nuget.org/packages/Microsoft.AspNet.WebApi.Tracing/0.3.0-rc)

[您可以从http://blogs.msdn.com/b/roncain/archive/2012/08/16/asp-net-web-api-tracing-preview.aspx](http://blogs.msdn.com/b/roncain/archive/2012/08/16/asp-net-web-api-tracing-preview.aspx)了解有关如何使用它的更多信息

谢谢！

最好的，红梅

# sql - 是否有可以将列名注释附加到 INSERTed 值的 SQL 格式化程序？

> ID：11862594
> 
> 赞同：6
> 
> 时间：2012-08-08T10:30:24.110
> 
> 标签：sql, comments, format, formatter

我正在寻找可以执行此操作的 SQL 格式化程序：

```
INSERT INTO MyTable (col1, col2, col3, col4)
VALUES (
   1, -- col1
   2, -- col2
   3, -- col3
   4  -- col4
) 
```

我似乎在任何免费的在线 SQL 格式化程序中都找不到此功能，尽管可能是我看起来不够努力 - 因此提出了这个问题。肯定存在这样的事情 - 或者如果不是它看起来很简单，我很想尝试自己写一个......

对于任何不相信这样做的价值的人来说，这里是（许多）实际插入之一 - 很难在没有内联注释的情况下说出这些值代表什么（并且每行有一个值也很有用）：

```
INSERT INTO ForecastAcqControl
(   ForecastImageServiceId, LayerId, Style, IsForecast, IsTiled,
    LatSW, LongSW, LatNE, LongNE, PixelsWidth, PixelsHeight, ZoomLevels,
    TimeCoverageHours, TimeStepMinutes, UpdateIntervalMinutes, CreatedDT
)
VALUES
(
    1,                  -- ForecastImageServiceId: OBSERVATIONS
    1,                  -- LayerId: RADAR_UK_Composite_Highres
    NULL,               -- Style
    FALSE,              -- IsForecast
    FALSE,              -- IsTiled
    47,                 -- LatSW
    -15,                -- LongSW
    61,                 -- LatNE
    5,                  -- LongNE
    1000,               -- PixelsWidth
    1200,               -- PixelsHeight
    4,                  -- ZoomLevels
    -2,                 -- TimeCoverageHours
    5,                  -- TimeStepMinutes
    5,                  -- UpdateIntervalMinutes
    UTC_TIMESTAMP()         -- CreatedDT
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:09:34.127

终于开始自己创建一个实用程序来做这件事。（回想起来，正则表达式可能不是最好的方法——但最终还是成功了！）

工具在这里：[SQL Insert Commenter](http://tinyurl.com/sichtml)

已经做了相当多的测试，但肯定会有一些它不起作用的东西，所以如果有人尝试它可以让我知道任何问题，我将不胜感激......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:58:45.010

我从未见过任何会执行这种特定自定义格式的用户环境。

你可能会更好地使用不同的语法来实现类似的效果......

```
INSERT INTO
  ForecastAcqControl (
    ForecastImageServiceId, LayerId, Style, IsForecast, IsTiled, LatSW,
    LongSW, LatNE, LongNE, PixelsWidth, PixelsHeight, ZoomLevels, TimeCoverageHours,
    TimeStepMinutes, UpdateIntervalMinutes, CreatedDT
  ) 
SELECT
  ForecastImageServiceId =     1,
  LayerId                =     1,
  Style                  =  NULL,
  etc, etc 
```

但是您仍然被迫手动采用这种做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:38:08.587

如果您采用如下格式，MSSQL 允许这样做：

```
INSERT INTO MyTable (col1, col2, col3, col4)
VALUES (
   1 --  col1
   ,2 -- col2
   ,3 -- col3
   ,4 -- col4
) 
```

`MySql`您可以通过以下方式执行上述操作：

```
 INSERT INTO MyTable (col1,col2,col3,col4)
                  values('1'  #col1
                         ,'2' #col2
                         ,'3' #col3
                         ,'4' #col4
                        ); 
```

我已经在 sqlfiddle 中测试过......查看[http://sqlfiddle.com/#!2/88eb8/1](http://sqlfiddle.com/#!2/88eb8/1)

# java - 当布尔值不是开关支持的数据类型时，为什么布尔表达式在 case 块中有效？

> ID：11862597
> 
> 赞同：6
> 
> 时间：2012-08-08T10:30:25.003
> 
> 标签：java, switch-statement, scjp, java-6, ocpjp

昨晚阅读了一些 SCJP 认证后，我开始思考 switch 语句以及表达式是如何计算的，我对一些事情感到有些困惑。

Java 不会让你打开一个布尔值，所以下面的代码不会编译：

```
public static void switchOnBoolean(boolean theBool)
    {
        System.out.println("\n\nAssessing boolean :" + theBool);
        // line below won't compile, since booleans are not valid for the switch statement
        switch(theBool)
        {
            case true:
            {
                System.out.println("The boolean was true");
                break;
            }
            case false:
            {
                System.out.println("The boolean was false");
            }
        }
    } 
```

但是，如果您尝试在 case 块中使用计算结果为布尔值的表达式，编译器不会抱怨，例如：

```
public static void switchOnChar(char theChar)
    {
        System.out.println("\n\nAssessing char : " + theChar);
        switch(theChar)
        {
            case 'a':
            {
                System.out.println("The char was a");
                break;
            }
            case 'b':
            {
                System.out.println("The char was b");
                break;
            }
            case ('c' | 'd'):
            {
                System.out.println("The char was c or d");
                break;
            }
            default:
            {
                System.out.println("The char didn't match anything, must be something else");
            }
        }
    } 
```

最终，我永远无法进入这个案例`('c' | 'd')`，因为它可能会评估为布尔值......

**所以我的问题是：**

1.  为什么使用类似的东西是合法的`('c' | 'd')`？
2.  那怎么可能有用，因为那将无法到达
3.  如果您想要对多个值进行大小写，但不使用默认值，那么您唯一的选择是重新实现为 if-else 语句吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T10:36:26.357

`'c' | 'd'`不会返回布尔值。在这种情况下`|`是按位或而不是布尔或。

你可以在这个例子中看到它是如何计算的

```
System.out.println(Integer.toBinaryString('c'));
System.out.println(Integer.toBinaryString('d'));
System.out.println("=======");
System.out.println(Integer.toBinaryString('c' | 'd')); 
```

输出

```
1100011
1100100
=======
1100111 
```

并且二进制 1100111 等于 103 十进制整数，因此它是*有效*的case 参数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T10:41:06.507

`'c' | 'd'`是按位或导致`'g'`，因此在开关中有效。

您可以匹配多个案例而无需使用 if 语句

```
switch(theChar) {
    case 'a':
        break;
    case 'b':
        break;
    case 'c':
    case 'd':
        System.out.println("c or d");
        break;
    default:
        throw new IllegalStateException();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T10:36:58.313

```
('c' | 'd') 
```

是*按位*的，所以它不会返回*布尔*值，它是完全有效的。

如果你这样尝试：

```
System.out.println('c' | 'd'); 
```

它将打印出 103 ，这是**g**的 ASCII 码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T10:40:07.757

如果你这样做了，`'c' || 'd'`那么你会得到预期的布尔错误并且不会编译。

`'c' | 'd'`是`bitwise OR`

# c++ - 无法打开已编译的项目

> ID：11862599
> 
> 赞同：2
> 
> 时间：2012-08-08T10:30:32.900
> 
> 标签：c++, visual-studio-2010, qt, qmake, nmake

我已经用 qmake (qmake -project; qmake; nmake) 编译了项目。当我打开文件 .pro，重新加载项目时，出现以下错误：

> “debug\moc_Rls.cpp”项已存在于过滤器“Generated Files”下

当我打开解决方案时，现在无法成为项目的一部分。

明显的问题：怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T11:09:11.123

哦，对不起，我以为你在 Linux 上是我的错误。

请按照以下步骤操作：

1.打开`[Project_Name].vcxproj.filters`项目目录下的文件。

2.查看以下几行（我正在粘贴我的）

```
 <ItemGroup>
    <ClCompile Include="Main.c">
      <Filter>Source Files</Filter>
    </ClCompile>
    <ClCompile Include="FunctBank.c">
      <Filter>Source Files</Filter>
    </ClCompile>
  </ItemGroup>
  <ItemGroup>
    <ClInclude Include="funcDef.h">
      <Filter>Header Files</Filter>
    </ClInclude>
  </ItemGroup> 
```

3.在这里您将看到`debug\moc_Rls.cpp`在两个过滤器下定义了两次。

4.我能猜到的其中一个是

```
<ClInclude Include="debug\moc_Rls.cpp">
  <Filter>Generated Files</Filter>
</ClInclude> 
```

而另一个你必须自己检测。

找到删除该过滤器后，您的项目将顺利运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T20:16:36.047

这是一个老问题，但我刚刚遇到了这个问题，所以我分享了解决方案。我曾使用 QTCreator 在另一个子文件夹中创建表单类。这样做时，“重复”文件已添加到 qrc 文件中，出于某种原因，QTCreator 将其视为项目文件。从 qrc 中删除条目修复了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-16T13:21:57.917

我最近遇到了这个问题。即使使用 VS19。从过滤器中删除重复项并没有解决我的问题。因此，要解决它，您还需要**从 .vcxproj 文件中删除它。**

概括：

*   - 从 Yourfancyproject.vcxproj 中删除重复项。
*   - 从 Yourfancyproject.vcxproj.filters 中删除重复项

然后问题应该得到解决。

# .net - 如何在 vb.net 中将字符串转换为代码并查看主项目的静态或公共变量

> ID：11862600
> 
> 赞同：1
> 
> 时间：2012-08-08T10:30:42.113
> 
> 标签：.net, vb.net, reflection, compiler-construction, vbcodeprovider

> **可能重复：**
> [如何将当前程序集公开给 CodeProvider](https://stackoverflow.com/questions/11860742/how-to-expose-current-assembly-to-codeprovider)

我写了一个代码，它从 vb.net 中的文本框中转换字符串，就像在这个例子中一样：[如何在 c# 中将字符串转换为代码](https://stackoverflow.com/questions/825107/how-to-convert-string-to-code-in-c-sharp)

但是在这个类中，我不能从主项目中调用任何静态变量和方法。那是代码vb.net：

```
Dim vb As New VBCodeProvider()
Dim icc As ICodeCompiler = vb.CreateCompiler()
cp = New CompilerParameters
cp.ReferencedAssemblies.Add("System.dll")
cp.ReferencedAssemblies.Add("System.Windows.Forms.dll")
cp.ReferencedAssemblies.Add("System.Xml.dll")
cp.ReferencedAssemblies.Add("Microsoft.VisualBasic.dll")
cp.ReferencedAssemblies.Add("Comatic(de-ch).exe")
cp.ReferencedAssemblies.Add("System.Data.dll")
cp.ReferencedAssemblies.Add("mscorlib.dll")
cp.CompilerOptions = "/t:library"
cp.GenerateInMemory = True
Dim sb As New StringBuilder("")

sb.Append("Imports System" & vbNewLine)
sb.Append("Imports Microsoft.VisualBasic" & vbNewLine)
sb.Append("Imports System.Windows.Forms" & vbNewLine)
sb.Append("Imports System.Xml" & vbNewLine)
sb.Append("Imports Comatic" & vbNewLine)
sb.Append("Imports System.Data" & vbNewLine)
sb.Append("<System.ComponentModel.ToolboxItem(False)> _" & vbNewLine)

sb.Append("Public Class VbCodeEvaler" & vbNewLine)
sb.Append("Public Sub EvalCode()" & vbNewLine)
sb.Append(TxVbCode.Text & vbNewLine)
sb.Append("End Sub" & vbNewLine)
sb.Append("Dim t As New System.Threading.Thread(AddressOf Me.EvalCode)" & vbNewLine) 'System.Threading.
sb.Append("Public Sub StartThred()" & vbNewLine)
sb.Append("t.Start()" & vbNewLine)
sb.Append("End Sub" & vbNewLine)
sb.Append("Public Sub StopThred()" & vbNewLine)
sb.Append("t.Abort()" & vbNewLine)
sb.Append("End Sub" & vbNewLine)
sb.Append("End Class" & vbNewLine)

cr = icc.CompileAssemblyFromSource(cp, sb.ToString())
If cr.Errors.Count > 0 Then
  MsgBox("Error: " & cr.Errors(0).ErrorText)
  Return Null
End If

Dim a As System.Reflection.Assembly = cr.CompiledAssembly
Dim o As Object = a.CreateInstance("VbCodeEvaler")
Dim t As Type = o.GetType()
'Dim mi As MethodInfo = t.GetMethod("EvalCode")
Dim mi As MethodInfo = t.GetMethod("StartThred")
mi.Invoke(o, Null) 
```

如何从主项目中调用所有静态和公共方法和变量？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-09T12:21:33.380

如果您在模块中调用静态方法，则需要将该模块显式定义为公共的。改变：

```
Module Module1 
```

至

```
Public Module Module1 
```

您应该已经能够访问类的任何共享成员

# facebook - Facebook 与 xcode 4.2 和 ios5 的集成

> ID：11862605
> 
> 赞同：1
> 
> 时间：2012-08-08T10:31:09.460
> 
> 标签：facebook, ios5, xcode4.2

我在 ios 5 中创建了一个启用了 ARC 的 Ipad 应用程序。这会将视频上传到 Facebook。当我将 facebook sdk 添加到我的项目时，它给了我与 ARC 相关的错误。我还在 facebook 项目设置的构建阶段下的编译源中将标志设置为“-fno-objc-arc”（不带双引号）。但它仍然给出这些错误。我该如何解决这些问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:59:45.417

这是内存管理问题。在 ARC 中“释放”不可用。我认为你释放了一个导致应用程序崩溃的对象。

# java - View#findViewById 在运行时返回 null 但在调试器中不返回 null

> ID：11862606
> 
> 赞同：1
> 
> 时间：2012-08-08T10:31:13.343
> 
> 标签：java, android

我的 android 项目中有一个非常奇怪的行为。

首先，我创建了一个名为 ANumberPicker 的自定义视图（在操作系统版本 < 3.0 的 Android 设备上使用它）。这是一个类的代码片段：

```
public class ANumberPicker extends LinearLayout {

    // ...

    @NotNull
    private final NumberPickerButton incrementButton;

    @NotNull
    private final NumberPickerButton decrementButton;

    public ANumberPicker(Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);

        setOrientation(VERTICAL);

        // INFLATING LAYOUT
        final LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.number_picker, this, true);

        final InputFilter inputFilter = new NumberPickerInputFilter();
        numberInputFilter = new NumberRangeKeyListener();

        incrementButton = (NumberPickerButton) this.findViewById(R.id.increment);
        incrementButton.setNumberPicker(this);

        decrementButton = (NumberPickerButton) this.findViewById(R.id.decrement);
        decrementButton.setNumberPicker(this);

        // ...
   }

   // ...

} 
```

这是 number_picker.xml 布局：

```
<merge xmlns:a="http://schemas.android.com/apk/res/android">

<org.solovyev.android.view.NumberPickerButton
        a:id="@+id/increment"
        a:layout_width="fill_parent"
        a:layout_height="wrap_content"
        a:background="@drawable/timepicker_up_btn"/>

<EditText a:id="@+id/timepicker_input"
          a:layout_width="fill_parent"
          a:layout_height="wrap_content"
          a:gravity="center"
          a:singleLine="true"
          style="?android:attr/textAppearanceLargeInverse"
          a:textColor="@android:color/primary_text_light"
          a:textSize="30sp"
          a:inputType="numberDecimal"
          a:background="@drawable/timepicker_input"/>

<org.solovyev.android.view.NumberPickerButton
        a:id="@+id/decrement"
        a:layout_width="fill_parent"
        a:layout_height="wrap_content"
        a:background="@drawable/timepicker_down_btn"/> 
```

在 ANumberPicker 构造函数中，我膨胀了“number_picker.xml”布局并尝试通过 id 获取视图：inflater 与 attachToRoot = 'true' 参数一起使用。但是我在这一行的运行时有一个 NullPointerException ：

```
incrementButton.setNumberPicker(this); 
```

即incrementButton = null。

此外，在 Jetbrains IDEA 中调试此代码，我在“Watches”窗口中获得了下一个值（断点设置在 NPE 的源行上）：

```
(NumberPickerButton) this.findViewById(R.id.increment) = {org.solovyev.android.view.NumberPickerButton@830082344688}
R.id.increment = 2131296256
this.getChildAt(0).getId() = 2131296256
incrementButton = null 
```

即完全相同的代码在调试器中返回不为空。而且我无法弄清楚...有什么建议吗？问题可能出在哪里？

PS我清理了项目并重建了它（我使用maven）

编辑我找到了线索：R.id.increment 和 view 有不同的整数标识符（我只是在 Logcat 中记录了它们的 id）。但问题仍然存在——清理项目无济于事......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:18:56.920

已解决：Jetbrains IDEA 将先前构建的 R 文件存储在缓存中，因此“使缓存无效”修复了该问题。

# c# - C# - 将图像列表添加到报告查看器

> ID：11862608
> 
> 赞同：1
> 
> 时间：2012-08-08T10:31:16.840
> 
> 标签：c#, rdlc

我有一个图像列表可供选择以将其添加到报告中。

选择图像列表后，如何将所有选定的图像添加到报表查看器。

# python - 来自具有键和值列表的列表的 Python dict

> ID：11862614
> 
> 赞同：3
> 
> 时间：2012-08-08T10:31:57.390
> 
> 标签：python, arrays, dictionary

我有每个 x 元素的三个列表：

```
stat = ["A","B","C"]
X = [1,2,3]
Y = [10,15,20] 
```

不，我想从列表中创建字典，其中“stat”应该是键，X 和 Y 是存储在每两个元素的列表中的值对。结果可能如下所示：

```
my_dict = {
    "A" : [1,10],
    "B" : [2,15],
    "C" : [3,20]
} 
```

或者甚至可以是一个嵌套的字典，这样我就可以用 my_dict["A"]["X"] 来索引它。

或者有没有其他方法可以在 python 中获取“命名数组”？

因为我有第二个问题与第一个问题非常相关，所以我只是在此处添加它而不是打开一个新问题：

我非常习惯于 R 的数组。因此我的问题是：在 python 中有没有类似命名数组的东西？例如，我有两个列表代表我的列名和行名：

```
columns = ["A","B","C"], rows = ["row_a","row_b","row_c"] 
```

现在我想从这两个列表中创建一个数组：

```
my_array = columns x rows 
```

我想用如下名称索引：

```
my_array["A","row_b"] 
```

并在循环中为“单元格”（填充数组）赋值。

是否有可能在 python 中以简单的方式做这些事情？可能最好使用字典来使用字符串索引来完成此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T10:33:33.417

```
>>> stat = ["A","B","C"]
>>> X = [1,2,3]
>>> Y = [10,15,20]
>>> dict(zip(stat, map(list, zip(X, Y))))
{'A': [1, 10], 'C': [3, 20], 'B': [2, 15]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T10:38:13.977

生成器表达式规则：

```
dict((key, [v1,v2]) for key, v1, v2 in zip(stat, X, Y)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T10:37:29.657

```
>>> stat = ["A","B","C"]
>>> X = [1,2,3]
>>> Y = [10,15,20]
>>> {s:[x,y] for s,x,y in zip(stat, X, Y)}
{'A': [1, 10], 'C': [3, 20], 'B': [2, 15]} 
```

能够使用`my_dict["A"]["X"]`它略有不同。

```
>>> {s:{'X':x, 'Y':y} for s,x,y in zip(stat, X, Y)}
{'A': {'Y': 10, 'X': 1}, 'C': {'Y': 20, 'X': 3}, 'B': {'Y': 15, 'X': 2}} 
```

Python3 语法优于第一种方式：

```
>>> stat = ["A","B","C"]
>>> X = [1,2,3]
>>> Y = [10,15,20]
>>> {k:v for k,*v in zip(stat, X, Y)}
{'A': [1, 10], 'C': [3, 20], 'B': [2, 15]} 
```

# php - 例外和聪明

> ID：11862615
> 
> 赞同：1
> 
> 时间：2012-08-08T10:32:00.660
> 
> 标签：php, exception-handling, smarty, smarty3

我有块try-catch，我想将模板的错误分配给$error。我试过了：

```
catch (Exception $e) {
   $smarty->assign("error", 'Error! Details: '.$e->getMessage());
} 
```

也试过：

```
catch (Exception $e) {
   $error = $e->getMessage());
}
$smarty->assign("error", $error); 
```

但是当没有错误时，smarty 需要这个变量并且所有的崩溃。有什么方法可以不使用 if 来处理它？或者我可能从一开始就做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:42:47.380

你可以简单地做一个

```
{$error|default:''} 
```

你不需要一个`{if}{/if}`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:37:54.500

试试这个
PHP：

```
catch (Exception $e) {
   $smarty->assign("error", true);
   $smarty->assign("error_message", $e->getMessage());
} 
```

聪明的：

```
{if $error}
       {$error_message}
{/if} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:56:35.807

如何让模板检查 $error 变量是否已定义？

```
{if !empty($error)}
  Oops: {$error}
{/if} 
```

否则你可以重新分配变量：

```
$smarty->assign("error", null);
try {
  // …
} catch (Exception $e) {
  $smarty->assign("error", $e->getMessage());
} 
```

# log4j - 为什么 ChainSaw 无法显示记录器名称？

> ID：11862617
> 
> 赞同：0
> 
> 时间：2012-08-08T10:32:28.073
> 
> 标签：log4j, apache-chainsaw

我正在使用最新的[ChainSaw 开发者快照](http://people.apache.org/~sdeboy/)

我正在尝试从具有模式日志的文件中获取日志：

```
[%d] [%t] [%c] [%m]%n 
```

而且我不知道为什么它不起作用 - 整个日志被读取为`%m`. 当我使用没有`%c`正确显示每个日志的模式时。

![在此处输入图像描述](../Images/e18d9d508d2608d8003e26b7bc825edb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:12:01.593

试试这个模式

[时间戳] [线程] [记录器] [消息]

（我假设你的日志也有那些“[]”，否则删除它们）

# java - 如何编译两次？

> ID：11862618
> 
> 赞同：1
> 
> 时间：2012-08-08T10:32:30.197
> 
> 标签：java, maven

我有一个 Web 服务项目，其中：

*   在`src/main/precode`中，我有手动编写的 Java 类，并使用`cxf-java2ws-plugin`插件生成 WSDL 文件。
*   在`src/main/java`，我有我使用`cxf-codegen-plugin`插件从 WSDL 生成的最终类。

问题是要生成WSDL，似乎`cxf-java2ws-plugin`需要编译类，所以我必须在编译阶段之后执行插件。所以，我还需要`cxf-codegen-plugin`在编译阶段之后执行，因为它需要其他插件生成的 WSDL 文件。但是，为了编译我的 SEI（即在编译阶段之前），我需要生成的类`cxf-codegen-plugin`，所以我被卡住了。

我曾考虑将其拆分为两个项目，但我正在寻找一个项目解决方案。我认为如果有可能编译两次，它将解决问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:56:55.380

插件的每次执行都会`phase`按照声明的顺序添加到。

```
pluginA:exectionA:compile
pluginC:exectionA:compile
pluginB:exectionA:compile 
```

将生成一个`compile`具有默认定义`<sourceDirectory></sourceDirectory> (src/main/java )`加上执行的`A, C and B`.

只需在插件声明（也绑定到）之后添加`maven-compiler-plugin`适当`<configuration>`的 in的执行。`compile``cxf-java2ws-plugin``compile`

在`pom.xml`添加目录到：

```
<sourceDirectory></sourceDirectory>
Element : sourceDirectory
3.0.0+
This element specifies a directory containing the source of the 
 project. The generated build system will compile the source in 
 this directory when the project is built. The path given is 
 relative to the project descriptor.` 
```

您还可以配置`compiler plugin`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:12:56.427

我对 cxf maven 插件了解不多，因此正确配置插件执行的输入和输出目录取决于您。话虽如此，这就是我尝试这个的方式（未经测试！）。

*   将执行添加到编译器插件配置以运行`compile`目标。将此执行绑定到`generate-sources`阶段（因为没有更好的东西）。执行 ID 应该类似于“precode-compile”。使用`<includes>`编译目标参数指定`/src/main/precode`目录作为输入。
*   使用在上述步骤中生成的类作为输入，将其配置`cxf-java2ws-plugin`为在该阶段运行。`process-sources`
*   将 配置为`cxf-codegen-plugin`在该阶段也运行`process-sources`，指定 WSDL 作为输入。确保在 java2ws 插件配置之后有此配置，因为绑定到同一阶段的目标按照它们在 POM 中定义的顺序运行。

如果我正确理解了您的用例，我认为绑定的默认编译目标（执行 ID“default-compile”）现在可以了。如果我不太明白，至少你有一些想法可以尝试。

如果您不确定如何为单个插件配置多个执行，请查看[Maven 文档](http://maven.apache.org/guides/mini/guide-configuring-plugins.html)。

# jquery - 绕过jQuery验证插件

> ID：11862621
> 
> 赞同：1
> 
> 时间：2012-08-08T10:32:40.680
> 
> 标签：jquery, jquery-plugins

我正在使用 jQuery 验证。我的表单中有两个提交表单的元素，一个是提交按钮，另一个是我需要提交表单的下拉菜单，以便我可以填充另一个下拉框。我的下拉框必须提交表单，但我想知道是否可以让它绕过表单提交的验证步骤？

谢谢

PS：我试过 class="cancel" 这似乎只适用于按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:28:56.717

您可以为此使用内置的忽略语句：

```
$("#yourform").validate({
    ignore: ".element_to_ignore"
}); 
```

[这是手册的链接： http](http://docs.jquery.com/Plugins/Validation/validate) ://docs.jquery.com/Plugins/Validation/validate

# c++ - 是否可以将 long long 返回值分配给 int64_t 而不会丢失 64 位机器中的精度？

> ID：11862622
> 
> 赞同：0
> 
> 时间：2012-08-08T10:32:41.177
> 
> 标签：c++, c

我已经实现了以下代码：

```
#include<stdio.h>
#include<string.h>
#include<ctype.h>
#include<cstdlib>
#include<sys/types.h>
main()
{
    int64_t i64value1 = 0;
    int64_t i64value2 = 0;
    long long llvalue = 0;
    const char *s = "10811535359";
    i64value1 = atoll(s);
    llvalue = atoll(s);
    i64value2 = llvalue;
    printf("s : [%s]\n",s);
    printf("i64value1 : [%d]\n",i64value1);
    printf("llvalue : [%lld]\n",llvalue);
    printf("i64value2 : [%d]\n",i64value2);
} 
```

上述程序的输出是：

```
s : [10811535359]
i64value1 : [-2073366529]
llvalue : [10811535359]
i64value2 : [-2073366529] 
```

使用的编译器是：

```
 gcc version 4.1.2 20080704 (Red Hat 4.1.2-48) 
```

操作系统是*x86_64 GNU/Linux 2.6.18-194*

由于*long long*是一个有符号的 64 位整数，并且就所有意图和目的而言，与*int64_t*类型相同，逻辑上*int64_t*和*long long*应该是等效的类型。有些地方提到使用*int64_t*而不是*long long*。但是当我查看*stdint.h*时，它告诉我为什么会看到上述行为：

```
# if __WORDSIZE == 64 
typedef long int  int64_t; 
# else 
__extension__ 
typedef long long int  int64_t; 
# endif 
```

在 64 位编译中，*int64_t*是*long int*，而不是*long long int*。

我的问题是，是否有一种解决方法/解决方案可以将 long long 返回值分配给 int64_t 而不会丢失 64 位机器中的精度？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T10:47:38.470

损失不会发生在转换中，而是发生在打印中：

```
printf("i64value1 : [%d]\n",i64value1); 
```

参数被访问，`int64_t`就好像它是一个`int`. 这是未定义的行为，但通常低 32 位是符​​号扩展的。

适当的编译器警告（例如 gcc `-Wformat`）应该抱怨这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:33:32.607

吉尔斯是对的​​。

要么使用`std::cout <<`我认为应该以正确的方式处理它，要么`printf("i64value2 : [%lld]\n",i64value2);`在打印时使用应该解决它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T10:43:15.897

在[x86-64 ABI](http://www.x86-64.org/documentation/abi.pdf)下-`long long`与`long`64 位值相同。在这种情况下没有精度损失。

# .net - ISO 3166-1 alpha-2 到国家名称翻译 .NET

> ID：11862627
> 
> 赞同：2
> 
> 时间：2012-08-08T10:32:53.347
> 
> 标签：.net, country-codes

我将处理一个为我提供两个符合 ISO 3166-1 alpha-2 标准的字母国家/地区代码的提要。例如，英国有代码 GB。我的问题是，当提供“GB”作为某些 .NET 类或函数的输入时，是否有某种方法可以轻松地返回“英国”？换句话说，这个翻译是由 .NET 在某处提供的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:35:07.110

有点儿。.NET 使用“文化”，可以通过语言（使用 ISO 639 两字母标识符）和区域（使用 ISO 3166）的组合来唯一标识。因此，如果您同时了解语言和地区，您可以获得一个描述性名称：

```
var cultureInfo = new CultureInfo("en-gb");

var cultureName = cultureInfo.EnglishName; //"English (Great Britain)"

//your answer is now the text between the parentheses
var countryName = cultureName.Split('(',')')[1]; 
```

了解在这些文化中，地区是次要的语言；该系统支持的每种语言都有一种文化，但不一定适用于使用该语言的每个国家/地区。这意味着两件事；首先，你*必须*了解该语言（例如，因为瑞士和比利时有两种官方语言，德语和法语，而印度和荷兰各有 4 种），其次，您期望的语言的文化列表中可能不存在 ISO 代码，如果语言和地区的组合使用的符号和符号与另一种更知名的文化足够接近，则无需区分（例如，对于说英语的加拿大没有“en-CA”文化，因为它会与“en-US”相同；但是有一个“fr-CA”，因为加拿大的法语文化与大多数其他法语地区非常不同）。

另一个解决方案不会是内置的，但不会非常困难；以制表符分隔或逗号分隔的格式查找或制作 ISO 代码和完整国家/地区名称的列表，然后将文件 slurp 成 a`Dictionary<string, string>`以在恒定时间内翻译：

```
var isoDict = new Dictionary<string, string>();

using(var stream = File.Open("isoCodes.csv"))
{
   using(var reader = new TextReader(stream))
   {
      string currentLine;
      do
      {
        currentLine = reader.ReadLine();
        if(currentLine == null) break;

        //assumes no headers, no format/data errors and 
        //a line format of "cc, Country Name\n";
        //ALWAYS "trust but verify" that the data is sane
        var parts = currentLine.Split(',');
        isoDict.Add(parts[0].Trim(), parts[1].Trim());
      } while(currentLine != null);
   } 
} 
```

# sql-server - 在 Linux 上使用 Node.js 访问 SQLServer

> ID：11862628
> 
> 赞同：11
> 
> 时间：2012-08-08T10:32:54.800
> 
> 标签：sql-server, linux, node.js, express, connector

我正在尝试使用 Node.js 和 Express 编写 REST 服务，我需要连接到 SLQServer 2000 数据库。根据他们的说法，我已经尝试过 Microsoft 连接器，但它不适用于 linux：

> Microsoft Driver for Node.JS for SQL Server 目前作为预览版提供，并且依赖于仅在 Microsoft Windows 和 Windows Azure 操作系统上可用的运行时组件。

我也尝试过 node.js 的模块 tdm 和乏味但没有成功......知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-11T22:54:53.787

再次检查[乏味](https://www.npmjs.org/package/tedious)。版本 0.2 修复了与 TDS 7.1 (SQL Server 2000) 的兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T05:43:00.083

您可以使用[Espresso Logic](http://www.espressologic.com)创建一个 REST API，然后从 .NodeJS 调用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T20:47:44.267

你试过[Edge.js](https://github.com/tjanczuk/edge)吗？

[将 SQL Server 与 node.js 结合使用。](http://blog.codeship.io/2014/04/22/leverage-sql-server-with-node-js-using-edge-js.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-28T14:41:04.383

```
npm install mssql 
```

我相信这是公认的最佳解决方案

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-10-26T18:07:11.710

即使它是一年前的问题，也想回答它，因为它是谷歌出现的第一件事。

有微软维护的[node-sqlserver 。](https://github.com/WindowsAzure/node-sqlserver/ "节点-sqlserver")不过最后一次提交是在 5 个月前进行的。

安装`$ npm install msnodesql` 。

# eclipse - Eclipse插件开发AndroidXmlFormatter

> ID：11862647
> 
> 赞同：0
> 
> 时间：2012-08-08T10:33:42.957
> 
> 标签：eclipse, eclipse-plugin, eclipse-adt, xml-formatting

我正在构建一个修改 android XML(layout) 文件的 eclipse 插件。我在内部使用 dom 解析器来生成输出 XML。然而，XML 格式搞砸了。

我想使用 android xml-formatting 机制。我试过这个 -

```
//xmlFile is a IFile
    IDocumentProvider provider = new TextFileDocumentProvider(); provider.connect(xmlFile); 
    IDocument document = provider.getDocument(xmlFile); 
    xmlFile.setContents(inputStream, IFile.ENCODING_UTF_8, new NullProgressMonitor());
    AndroidXmlFormatter a=new AndroidXmlFormatter();
    IFormattingContext context=new FormattingContext();
    context.setProperty(FormattingContextProperties.CONTEXT_DOCUMENT, Boolean.TRUE);
    a.format(document, context); 
```

但是，该文档未格式化。:( 可能是什么问题？我的问题有替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:49:39.837

仍然没有找到明确的答案。就格式化而言，我使用包 com.android.ide.eclipse.adt.internal.editors.formatting 来格式化 xml 默认的 android 样式。

```
 XmlFormatPreferences xfp=XmlFormatPreferences.create();
        xfp.joinLines=true;
        xfp.removeEmptyLines=true;
        xfp.useEclipseIndent=true;
        return XmlPrettyPrinter.prettyPrint(xmlAsWriter.toString(), xfp, XmlFormatStyle.FILE, "\n"); 
```

# ios - 用户可以在应用程序以外的任何其他地方看到应用程序内购买产品吗？

> ID：11862650
> 
> 赞同：0
> 
> 时间：2012-08-08T10:34:00.723
> 
> 标签：ios, in-app-purchase, app-store-connect

用户是否在除应用程序之外的其他任何地方看到应用程序内购买产品？例如在 iTunes 中？

我不太确定这就是我问的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:40:31.507

您可以在网站、iTunes 和 AppStore 应用程序上查看 AppStore 上的热门购买。但是，我不知道这个列表的限制是什么。在这个示例应用程序中，只有 6 个应用内购买，并且全部显示。如果该应用程序有 100 种产品，我怀疑会显示所有产品。

这些产品也可能不会出现，直到用户至少购买了每种产品中的一种。

![在此处输入图像描述](../Images/9097f29944e4cd7b317655ca4205e822.png)

[[来源]](http://itunes.apple.com/gb/app/angry-gran/id481664999?mt=8)

# javascript - 如何同时调整所有右侧或左侧元素的宽度？

> ID：11862652
> 
> 赞同：1
> 
> 时间：2012-08-08T10:34:06.840
> 
> 标签：javascript, jquery

我有一些 div（兄弟），并且在拖动和调整其中一个的大小时，根据将其调整为西部或东部的大小，我想相应地增加或减小所有其他兄弟的宽度。 ![在此处输入图像描述](../Images/5fc14e7ea3f7f5d1255e2afd56087f43.png)

```
$(function () {
    var west;
    var east;
    var clientX;

    $("#resizable1").resizable({
        start: function (event, ui) {
             west = $(event.srcElement).hasClass('ui-resizable-w');
             east = $(event.srcElement).hasClass('ui-resizable-e');
             clientX = event.clientX;
        },
        resize: function (event, ui) {

            if (east) {
                //decrease one by one --?
                $(this).nextAll().css('width', --? );
            }
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:41:37.583

使它们都共享相同的宽度变量，减少或增加变量以同时影响所有 div。

通过调用函数并使用相同的变量作为所有调用的参数来手动设置每个 div 的大小。

或者让 div 共享一个 css 类并在共享该 css 类的所有 html 元素上调用 resize 函数。

**编辑：**

啊，我完全想念你……让所有的 div 大小相对和浮动，然后它们应该填充它们的父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:54:14.887

将宽度设置为：

```
if (east) {
     //decrease one by one
     var newWidth = ($('#resizable1').width() - $(this).outerWidth(true)) / $(this).nextAll().length
     ...
} 
```

编辑：当您调整第二个兄弟姐妹的大小时，第三个和第四个兄弟姐妹的反应如何？在计算剩余空间时，我只考虑了第一个……如果它们填满了剩余空间，你必须将前一个兄弟的所有外宽度相加，而不是只取 $(this).outerWidth(true)。

顺便说一句，上面的代码没有经过测试，只是建议让剩余空间来填充。

# iphone - 如何在 iPhone 中制作无限滚动视图？

> ID：11862653
> 
> 赞同：6
> 
> 时间：2012-08-08T10:34:06.993
> 
> 标签：iphone, objective-c, ios, ios5

我有`scrollview`5**个宽度为 88 的图像视图**。

我想要`scrollview`滚动到每个图像视图**（不是分页）**

**和**

我想**在 iPhone 中创建一个无限滚动视图，**这意味着当它滚动到最后一个项目时，它将在它旁边显示第一个项目..

我一直在尝试通过偏移量，但是当通过偏移量移动它时它会停止，而且**我使用了苹果街道滚动器，它不允许我将每个元素停止在中心（就像 Picker 视图一样）..**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-31T12:57:29.853

首先，我建议使用 UITableView，这样您就可以保持较低的内存使用量。我在项目中成功使用的一种方法如下：

复制单元格的内容，我的意思是如果您以这种方式有 5 个项目：

| 1 | 2 | 3 | 4 | 5 |

您应该在表的末尾添加相同的（在具有可重用引擎的表视图中，这不是什么大问题），以便看起来像这样：

| 1 | 2 | 3 | 4 | 5 | 1 | 2 | 3 | 4 | 5 |

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView == _yourScrollView) {
        CGFloat currentOffsetX = scrollView.contentOffset.x;
        CGFloat currentOffSetY = scrollView.contentOffset.y;
        CGFloat contentHeight = scrollView.contentSize.height;

        if (currentOffSetY < (contentHeight / 6.0f)) {
            scrollView.contentOffset = CGPointMake(currentOffsetX,(currentOffSetY + (contentHeight/2)));
        }
        if (currentOffSetY > ((contentHeight * 4)/ 6.0f)) {
            scrollView.contentOffset = CGPointMake(currentOffsetX,(currentOffSetY - (contentHeight/2)));
        }
    }
} 
```

如果您几乎到达滚动的最后，上面的代码将滚动位置移动到顶部；或者，如果您几乎在顶部，则将您移至底部...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T10:41:44.527

您可以查看以下两个选项之一：

*   如果您已注册为开发人员，请观看 WWDC 2011 的**高级 ScrollView 技术**会议。
*   来自[http://mobiledevelopertips.com/user-interface/creating-circular-and-infinite-uiscrollviews.html的精彩教程](http://mobiledevelopertips.com/user-interface/creating-circular-and-infinite-uiscrollviews.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T10:40:30.517

这给我带来了很长一段时间的严重问题，所以我真的感受到了你的痛苦。我发现这个控件应该可以解决你的问题： http: [//www.cocoacontrols.com/platforms/ios/controls/infinitescrollview](http://www.cocoacontrols.com/platforms/ios/controls/infinitescrollview)

我还考虑过插入过渡和禁用滚动，使其变得像幻灯片，但任何一种方式都应该有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T10:41:35.713

这是我曾经这样做的解决方案的简短说明。

假设您有从 0 到 9 的计数器，然后，当您进行转换 9 -> 0 时，您实际上在 9 之后（在滚动视图中）欺骗了另一个 0（称为 0'），将动画转换为 0'，而不是使非动画即时过渡到位于 scrollView 顶部的 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-30T08:32:48.580

您可以为此使用**iCarousel**库。 [https://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-31T19:13:14.563

对于其他寻找解决方案的人，您也可以在[https://github.com/Seitk/InfiniteScrollPicker/](https://github.com/Seitk/InfiniteScrollPicker/)上尝试这个库 Infinite Scroll Picker，它基本上是拖放。我在一个项目中使用它，效果很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-18T10:37:52.483

在这个迷你项目中实现了一个简单的无限滚动：

[https://github.com/mcmatan/Infinity-tabBar-scroll-view/blob/master/README.md](https://github.com/mcmatan/Infinity-tabBar-scroll-view/blob/master/README.md)

# jquery - Jquery漂亮的滚动不起作用

> ID：11862656
> 
> 赞同：9
> 
> 时间：2012-08-08T10:34:12.157
> 
> 标签：jquery, nicescroll

我正在为 div 使用 Jquery nice Scroll bar，但是当 div 的内容动态增加时，它不会显示滚动条。如果我删除漂亮的滚动条，Windows 默认滚动条可以正常工作。谁能帮我解决这个问题？

html

```
<div id="div-to-scroll">
</div> 
```

脚本

```
$(document).ready(function(e) {
    var nice = $("#div-to-scroll").getNiceScroll();
    $("#div-to-scroll").niceScroll();
    $("#div-to-scroll").getNiceScroll().resize();
}); 
```

这是我的代码示例。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-09T04:37:04.243

最后这对我有用。

```
$("#div-to-scroll").scroll(function(){
  $("#div-to-scroll").getNiceScroll().resize();
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-05T17:28:05.133

对我来说只适用于

```
$("#div-to-scroll").mouseover(function() {
    $("#div-to-scroll").getNiceScroll().resize();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-01T12:44:27.507

**更新：发现新功能！**

```
 var setScroll = function(i) {
        if($(i).length>0)
        $(i).niceScroll().updateScrollBar();
} 
```

调用这个函数来更新 niceScroll

```
setScroll(".classWithNiceScroll"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T11:10:35.713

一些可能的原因：
1-也许你忘了指定你的 div 高度。修复你的 div 高度。
2-如果你的 div 在宽度上浮动，也可以修复该宽度。
**请记住，您的 DIV STYLE 应该具有：`overflow-y: hidden;`**
**UPDATE**
每次向下滚动时尝试使用 resize() 函数：

```
$("div-to-scroll").slideDown(function(){
  $("div-to-scroll").getNiceScroll().resize();
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-17T08:00:25.203

```
$("html").mouseover(function() {
    $("html").getNiceScroll().resize();
}); 
```

获取全身滚动条

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-13T13:13:33.507

做这个：

```
// Scroll X Axis 
$("#mydiv").getNiceScroll()[0].doScrollLeft(x, duration);
// Scroll Y Axis - 
$("#mydiv").getNiceScroll()[0].doScrollTop(y, duration); 
```

或者：

```
// Scroll X Axis 
$("#mydiv").getNiceScroll(0).doScrollLeft(x, duration);
// Scroll Y Axis - 
$("#mydiv").getNiceScroll(0).doScrollTop(y, duration); 
```

`[0]`之后注意`getNiceScroll()`

# ios - 需要有关 iOS + Google Drive 的帮助

> ID：11862658
> 
> 赞同：0
> 
> 时间：2012-08-08T10:34:28.230
> 
> 标签：ios, iphone, ipad, oauth-2.0, google-drive-api

我想做的事：

*   我需要我的 ipad/iphone 应用程序将文件（图像、pdf 等）保存到中央 google drive 帐户（请注意，此应用程序将分发给多个客户，但所有应用程序都将使用相同的 google drive 帐户）

到目前为止我做了什么：

*   掌握了谷歌驱动器示例和来源
*   做了一个新的测试项目，包括所需的库，构建工作正常

问题：

*   所有示例似乎都使用控制器/视图来验证和使用来自钥匙串的凭据。 **就我而言，我想硬编码电子邮件和密码，在后台进行身份验证，然后将文件推送到 Google Drive。**
*   我还没有找到一些关于如何实现这一点的好的指示或解释，而且谷歌提供的示例代码似乎是一团糟。

我很难弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T06:56:08.920

您可以尝试这样的调用，遵循与 Google 示例中相同的过程，注释掉 viewController 被推到前面的部分

```
[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('Email').value='ur.email@gmail.com';"];

[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('Passwd').value='urPass';"];

[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('signIn).click();"]; 
```

我看了一眼谷歌登录页面的代码，它为文本字段和“开始”按钮提供了这些名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:35:39.477

好吧，这似乎是不可能的，因为凭据和访问令牌总是从用户那里获得，而新的 Google Drive SDK 不支持您想要的。并且 O-Auth 也不会支持您，因为它违反了他们的用户数据保护政策。

# ruby - Ruby - 遍历数据库结果并将它们存储在哈希中

> ID：11862660
> 
> 赞同：1
> 
> 时间：2012-08-08T10:34:31.303
> 
> 标签：ruby

考虑以下：

```
details = Hash.new

# Example of this Hash's final look
details["team1"] = "Example"
details["team2"] = "Another team"
details["foo"]   = "Bar" 
```

我得到两支球队名字的方法是：

```
teams = Match.find(1).teams
=> [#<Team id: 1, name: "England">, #<Team id: 2, name: "Australia">] 
```

现在我想将团队的名称保存到 team1 和 team2 下的 Hash 中。如果我使用数组，我可以这样做：

```
teams.each do |team|
  details << team.name
end 
```

但是，我需要使用上面显示的哈希来执行此操作。一个人将如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:01:38.800

```
Hash[teams.map { |x| ["team_#{x.id}", x.name] }]
# => {"team_1"=>"England", "team_2"=>"Australia"} 
```

如果你想保留 id 1 和 2

```
Hash[a.map.with_index { |x,i| ["team_#{i.succ}", x.name] }]
# => {"team_1"=>"England", "team_2"=>"Australia"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:37:09.227

那这个呢？

```
teams.each_with_index do |team, idx|
  id = "team#{idx + 1}"
  details[id] = team.name
end 
```

在这里，您取出团队对象并从中取出哈希键，然后使用该键设置值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T10:55:26.650

为一个衬里使用注射剂怎么样？

```
teams.inject({}){ |details, team| details["team#{team.id}"] = team.name; details } 
```

返回值将是一个数组或哈希。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:49:57.517

```
{}.tap do |h|
  Match.find(1).teams.each_with_index {|t, i| h["team#{i+1}"] = t.name}
end 
```

# sql - 子查询上的 SQL GROUP BY

> ID：11862661
> 
> 赞同：11
> 
> 时间：2012-08-08T10:34:32.327
> 
> 标签：sql, sql-server, sql-server-2012

我有一个查询，它将使用 UNION ALL 将 2 个表的结果返回到 1 个表中，这一切都按我的需要工作。但是我需要在返回的数据集上运行 GROUP BY 和 ORDER BY 但是我遇到了很多错误，我不知道如何解决它。

这是我的查询：

```
SELECT ProductID, Quantity 
FROM BasketItems 
UNION ALL 
SELECT ProductID, Quantity 
FROM OrderItems 
```

这将返回一个结果集，如下所示：

```
ProductID  Quantity  
15         2
20         2
15         1
8          5
5          1 
```

然后我想`GROUP BY`在`ProductID`场上跑一个，最后`ORDER BY DESC`在场上跑一个`Quantity`。所以在最终输出中，这个特定的结果集最终会导致：

```
ProductID
8
15
20
5 
```

然后我可以像往常一样在这个结果集上运行查询

**编辑：**

如上所述，但可能不够暗示的是，我需要对返回的结果运行查询，这不起作用，因为您无法对具有 ORDER BY 子句的一组结果运行查询（据我收集从错误列表中）

如果您想了解有关该问题的更多信息，请访问：

从这个结果集中，我想从产品表中获取与它们相关的产品

```
SELECT * FROM Products WHERE ID IN (
    SELECT ProductID
    FROM
    (
        SELECT ProductID, Quantity  
        FROM BasketItems  
        UNION ALL  
        SELECT ProductID, Quantity  
        FROM OrderItems 
    ) v
    GROUP BY ProductID
    ORDER BY SUM(Quantity) DESC
) 
```

但是，我收到此错误：ORDER BY 子句在视图、内联函数、派生表、子查询和公用表表达式中无效，除非还指定了 TOP、OFFSET 或 FOR XML。

产品的输出需要按照子查询中返回的顺序（按数量）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T10:41:19.987

```
SELECT Products.*
FROM Products
     INNER JOIN 
(
    SELECT ProductID, Sum(Quantity) as QuantitySum
    from
    (
        SELECT ProductID, Quantity  
        FROM BasketItems  
        UNION ALL  
        SELECT ProductID, Quantity  
        FROM OrderItems 
    ) v
    GROUP BY ProductID
) ProductTotals
    ON Products.ID = ProductTotals.ProductID
ORDER BY QuantitySum DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:54:38.540

这行得通吗？

```
SELECT ProductID
    from
    (
        SELECT ProductID, Quantity  
        FROM BasketItems  
        UNION ALL  
        SELECT ProductID, Quantity  
        FROM OrderItems 
    ) temp
    GROUP BY temp.ProductID
    ORDER BY SUM(temp.Quantity) desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:05:16.817

这是一个 cte 版本（没有现场测试，所以请原谅错误）

**编辑**

```
;WITH myInitialdata_cte(ProductID,Quantity)
AS
    (
    SELECT ProductID, Quantity FROM BasketItems
    UNION ALL  
    SELECT ProductID, Quantity  FROM OrderItems 
    )
SELECT b.ID
FROM 
     myInitialdata_cte a
     INNER JOIN Products b ON
         a.ProductID = b.ID
GROUP BY ProductID
ORDER BY SUM(a.Quantity) DESC 
```

# android - Android：使用 audiorecord 类录制音频播放快进

> ID：11862662
> 
> 赞同：3
> 
> 时间：2012-08-08T10:34:33.347
> 
> 标签：android, audio-streaming, audio-recording, audiorecord

我正在尝试将音频和存储记录到 SD 卡中以及发送到服务器。当我尝试播放录制的声音时，它正在播放，但不是我录制的。如果我录制声音 10 分钟，它会播放 4 分钟，即有人按下快进按钮并发出一些嘈杂的声音。我没有找到我要去的地方。谁能告诉我如何解决这个问题（应该播放我录制的内容，即录制 10 分钟，然后只播放 10 分钟）。

这是代码..抱歉发布批量代码..

```
public class Audio_Call extends Activity {
private static final int RECORDER_BPP = 16;
private static final String AUDIO_RECORDER_FILE_EXT_WAV = "AudioRecorder.wav";
private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";
private static final String AUDIO_RECORDER_TEMP_FILE = "record_temp.raw";
private static final int RECORDER_SAMPLERATE = 8000;
private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_MONO;
private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;

private AudioRecord recorder = null;
// private int bufferSize = 200000;
private int bufferSize = 0;
short[] buffer;
private Thread recordingThread = null;
private boolean isRecording = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.audio_call);

    setButtonHandlers();
    enableButtons(false);

    bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE,
            RECORDER_CHANNELS, RECORDER_AUDIO_ENCODING);

}

private void setButtonHandlers() {
    ((Button) findViewById(R.id.btnStart)).setOnClickListener(btnClick);
    ((Button) findViewById(R.id.btnStop)).setOnClickListener(btnClick);
}

private void enableButton(int id, boolean isEnable) {
    ((Button) findViewById(id)).setEnabled(isEnable);
}

private void enableButtons(boolean isRecording) {
    enableButton(R.id.btnStart, !isRecording);
    enableButton(R.id.btnStop, isRecording);
}

// stores the file into the SDCARD
private String getFilename() {
    System.out.println("---3---");
    String filepath = Environment.getExternalStorageDirectory().getPath();
    File file = new File(filepath, AUDIO_RECORDER_FOLDER);

    if (!file.exists()) {
        file.mkdirs();
    }

    return (file.getAbsolutePath() + "/" + AUDIO_RECORDER_FILE_EXT_WAV);
}

// stores the file into the SDCARD
private String getTempFilename() {
    // Creates the temp file to store buffer
    System.out.println("---4-1--");
    String filepath = Environment.getExternalStorageDirectory().getPath();
    System.out.println("---4-2--");
    File file = new File(filepath, AUDIO_RECORDER_FOLDER);
    System.out.println("---4-3--");

    if (!file.exists()) {
        file.mkdirs();
    }

    File tempFile = new File(filepath, AUDIO_RECORDER_TEMP_FILE);
    System.out.println("---4-4--");

    if (tempFile.exists())
        tempFile.delete();
    System.out.println("---4-5--");
    return (file.getAbsolutePath() + "/" + AUDIO_RECORDER_TEMP_FILE);

}

private void startRecording() {

    int buffercount = 4088 / bufferSize;
    if (buffercount < 1)
        buffercount = 1;

    recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
            RECORDER_SAMPLERATE, RECORDER_CHANNELS,
            RECORDER_AUDIO_ENCODING, bufferSize * buffercount);

    buffer = new short[4088];

    recorder.startRecording();

    isRecording = true;

    recordingThread = new Thread(new Runnable() {

        @Override
        public void run() {

            writeAudioDataToFile();

        }
    }, "AudioRecorder Thread");

    recordingThread.start();

}

private void writeAudioDataToFile() {

    // Write the output audio in byte
    byte data[] = new byte[bufferSize];

    String filename = getTempFilename();
    //
    FileOutputStream os = null;
    //
    try {
        //
        os = new FileOutputStream(filename);
        //
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    int read = 0;

    // if (null != os) {
    while (isRecording) {
        // gets the voice output from microphone to byte format
        recorder.read(buffer, 0, buffer.length);
        // read = recorder.read(data, 0, 6144);

        if (AudioRecord.ERROR_INVALID_OPERATION != read) {
            try {
                // // writes the data to file from buffer
                // // stores the voice buffer

                // short[] shorts = new short[bytes.length/2];
                // to turn bytes to shorts as either big endian or little
                // endian.
                // ByteBuffer.wrap(bytes).order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().get(shorts);

                // to turn shorts back to bytes.
                byte[] bytes2 = new byte[buffer.length * 2];
                ByteBuffer.wrap(bytes2).order(ByteOrder.LITTLE_ENDIAN)
                        .asShortBuffer().put(buffer);

                os.write(bytes2);
                SendAudio(buffer);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    try {
        os.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

// }

private void stopRecording() {
    // stops the recording activity

    if (null != recorder) {
        isRecording = false;

        recorder.stop();
        recorder.release();

        recorder = null;
        recordingThread = null;
    }

    // copy the recorded file to original copy & delete the recorded copy
    copyWaveFile(getTempFilename(), getFilename());
    deleteTempFile();

}

private void deleteTempFile() {
    File file = new File(getTempFilename());

    file.delete();
}

private void copyWaveFile(String inFilename, String outFilename) {
    System.out.println("---8---");
    FileInputStream in = null;
    FileOutputStream out = null;
    long totalAudioLen = 0;
    long totalDataLen = totalAudioLen + 36;
    long longSampleRate = RECORDER_SAMPLERATE;
    int channels = 2;
    long byteRate = RECORDER_BPP * RECORDER_SAMPLERATE * channels / 8;

    byte[] data = new byte[bufferSize];

    try {
        in = new FileInputStream(inFilename);
        out = new FileOutputStream(outFilename);
        totalAudioLen = in.getChannel().size();
        totalDataLen = totalAudioLen + 36;

        AppLog.logString("File size: " + totalDataLen);

        WriteWaveFileHeader(out, totalAudioLen, totalDataLen,
                longSampleRate, channels, byteRate);
        byte[] bytes2 = new byte[buffer.length * 2];
        ByteBuffer.wrap(bytes2).order(ByteOrder.LITTLE_ENDIAN)
                .asShortBuffer().put(buffer);
        while (in.read(bytes2) != -1) {
            out.write(bytes2);
        }

        in.close();
        out.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private void WriteWaveFileHeader(FileOutputStream out, long totalAudioLen,
        long totalDataLen, long longSampleRate, int channels, long byteRate)
        throws IOException {
    System.out.println("---9---");
    byte[] header = new byte[4088];

    header[0] = 'R'; // RIFF/WAVE header
    header[1] = 'I';
    header[2] = 'F';
    header[3] = 'F';
    header[4] = (byte) (totalDataLen & 0xff);
    header[5] = (byte) ((totalDataLen >> 8) & 0xff);
    header[6] = (byte) ((totalDataLen >> 16) & 0xff);
    header[7] = (byte) ((totalDataLen >> 24) & 0xff);
    header[8] = 'W';
    header[9] = 'A';
    header[10] = 'V';
    header[11] = 'E';
    header[12] = 'f'; // 'fmt ' chunk
    header[13] = 'm';
    header[14] = 't';
    header[15] = ' ';
    header[16] = 16; // 4 bytes: size of 'fmt ' chunk
    header[17] = 0;
    header[18] = 0;
    header[19] = 0;
    header[20] = 1; // format = 1
    header[21] = 0;
    header[22] = (byte) channels;
    header[23] = 0;
    header[24] = (byte) (longSampleRate & 0xff);
    header[25] = (byte) ((longSampleRate >> 8) & 0xff);
    header[26] = (byte) ((longSampleRate >> 16) & 0xff);
    header[27] = (byte) ((longSampleRate >> 24) & 0xff);
    header[28] = (byte) (byteRate & 0xff);
    header[29] = (byte) ((byteRate >> 8) & 0xff);
    header[30] = (byte) ((byteRate >> 16) & 0xff);
    header[31] = (byte) ((byteRate >> 24) & 0xff);
    header[32] = (byte) (2 * 16 / 8); // block align
    header[33] = 0;
    header[34] = RECORDER_BPP; // bits per sample
    header[35] = 0;
    header[36] = 'd';
    header[37] = 'a';
    header[38] = 't';
    header[39] = 'a';
    header[40] = (byte) (totalAudioLen & 0xff);
    header[41] = (byte) ((totalAudioLen >> 8) & 0xff);
    header[42] = (byte) ((totalAudioLen >> 16) & 0xff);
    header[43] = (byte) ((totalAudioLen >> 24) & 0xff);

    out.write(header, 0, 4088);
}

private View.OnClickListener btnClick = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.btnStart: {
            AppLog.logString("Start Recording");

            enableButtons(true);
            startRecording();

            break;
        }
        case R.id.btnStop: {
            AppLog.logString("Stop Recording");

            enableButtons(false);
            stopRecording();

            break;
        }
        }
    }
};

public void SendAudio(final short data[]) {
    Thread thrd = new Thread(new Runnable() {
        String LOG_TAG = null;
        long SAMPLE_INTERVAL = 10;

        @Override
        public void run() {
            Log.e(LOG_TAG, "start send thread, thread id: ");

            long file_size = 0;
            int bytes_read = 0;
            int bytes_count = 0;

            // byte[] buf = new byte[bufferSize];
            // buf = data;

            try {
                // byte [] b = "192.168.1.40".getBytes();
                byte[] b = new byte[] { (byte) 192, (byte) 168, (byte) 1,
                        (byte) 39 };

                InetAddress addr = InetAddress.getLocalHost();
                InetAddress addr1 = InetAddress.getByAddress(b);

                HttpClient httpclient = new DefaultHttpClient();

                ServerUrl url = new ServerUrl();

                String url_page = ServerUrl.url_audio;
                // String value = new String(buf);

                // System.out.println("mmdata--------- " + value);

                HttpPost httppost = new HttpPost(url_page);

                // Unix time stamp
                long unixTime = System.currentTimeMillis() / 1000L;
                String timestamp = String.valueOf(unixTime);

                // Json Format
                JSONObject holder = new JSONObject();
                JSONArray jArray = new JSONArray();
                try {
                    holder.put("UserId", "1");

                    holder.put("Timestamp", timestamp);
                    // holder.put("length", value.length());
                    for (int i = 0; i < buffer.length; i++) {
                        jArray.put(i, buffer[i]);
                    }

                    holder.put("MMData", jArray);
                    System.out.println("ARRAYYYY" + jArray);

                } catch (JSONException e1) {
                    e1.printStackTrace();
                }

                try {

                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                            2);

                    nameValuePairs.add(new BasicNameValuePair("MMData",
                            jArray.toString()));

                    httppost.setEntity(new UrlEncodedFormEntity(
                            nameValuePairs));

                    StringEntity se = new StringEntity(jArray.toString());

                    se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
                            "application/json"));

                    httppost.setEntity(se);

                    HttpResponse response = httpclient.execute(httppost);

                } catch (ClientProtocolException e) {
                    System.out.println("-------13");
                    e.printStackTrace();
                } catch (IOException e) {
                    System.out.println("-------14");
                    e.printStackTrace();
                } catch (Exception e) {
                    System.out.println("-------15");
                    System.out.println("Exception");
                    e.printStackTrace();
                }
                bytes_count += bytes_read;
                Log.d(LOG_TAG, "bytes_count : " + bytes_count);
                Thread.sleep(SAMPLE_INTERVAL, 0);

            } catch (InterruptedException ie) {
                Log.e(LOG_TAG, "InterruptedException");
            } catch (UnknownHostException uhe) {
                Log.e(LOG_TAG, "UnknownHostException");
            } catch (IOException ie) {
                Log.e(LOG_TAG, "IOException");
            }
        } // end run
    });
    thrd.start();
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if (keyCode == KeyEvent.KEYCODE_BACK) {

        finish();
    }
    return super.onKeyDown(keyCode, event);
}
} 
```

帮助将不胜感激..我已经对此进行了搜索，但是没有得到适当的解决方案..我正在尝试所有其他可能性，但没有成功。

非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T07:54:16.000

我得到了解决方案..这是我的代码

```
public class Audio_Record extends Activity {
private static final int RECORDER_SAMPLERATE = 8000;
private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_MONO;
private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;
private AudioRecord recorder = null;
private Thread recordingThread = null;
private boolean isRecording = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    setButtonHandlers();
    enableButtons(false);

    int bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE,
            RECORDER_CHANNELS, RECORDER_AUDIO_ENCODING);

    System.out.println("BUFFER SIZE VALUE IS " + bufferSize);

}

private void setButtonHandlers() {
    ((Button) findViewById(R.id.btnStart)).setOnClickListener(btnClick);
    ((Button) findViewById(R.id.btnStop)).setOnClickListener(btnClick);
}

private void enableButton(int id, boolean isEnable) {
    ((Button) findViewById(id)).setEnabled(isEnable);
}

private void enableButtons(boolean isRecording) {
    enableButton(R.id.btnStart, !isRecording);
    enableButton(R.id.btnStop, isRecording);
}

int BufferElements2Rec = 1024; // want to play 2048 (2K) since 2 bytes we
                                // use only 1024
int BytesPerElement = 2; // 2 bytes in 16bit format

private void startRecording() {

    recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
            RECORDER_SAMPLERATE, RECORDER_CHANNELS,
            RECORDER_AUDIO_ENCODING, BufferElements2Rec * BytesPerElement);

    recorder.startRecording();
    isRecording = true;

    recordingThread = new Thread(new Runnable() {

        public void run() {

            writeAudioDataToFile();

        }
    }, "AudioRecorder Thread");
    recordingThread.start();
}

private byte[] short2byte(short[] sData) {
    int shortArrsize = sData.length;
    byte[] bytes = new byte[shortArrsize * 2];

    for (int i = 0; i < shortArrsize; i++) {
        bytes[i * 2] = (byte) (sData[i] & 0x00FF);
        bytes[(i * 2) + 1] = (byte) (sData[i] >> 8);
        sData[i] = 0;
    }
    return bytes;

}

private void writeAudioDataToFile() {
    // Write the output audio in byte

    String filePath = "/sdcard/voice8K16bitmono.pcm";
    short sData[] = new short[BufferElements2Rec];

    FileOutputStream os = null;
    try {
        os = new FileOutputStream(filePath);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    while (isRecording) {
        // gets the voice output from microphone to byte format

        recorder.read(sData, 0, BufferElements2Rec);
        System.out.println("Short wirting to file" + sData.toString());
        try {
            // // writes the data to file from buffer
            // // stores the voice buffer

            byte bData[] = short2byte(sData);

            os.write(bData, 0, BufferElements2Rec * BytesPerElement);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    try {
        os.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private void stopRecording() {
    // stops the recording activity
    if (null != recorder) {
        isRecording = false;

        recorder.stop();
        recorder.release();

        recorder = null;
        recordingThread = null;
    }
}

private View.OnClickListener btnClick = new View.OnClickListener() {
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.btnStart: {
            enableButtons(true);
            startRecording();
            break;
        }
        case R.id.btnStop: {
            enableButtons(false);
            stopRecording();
            break;
        }
        }
    }
};

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if (keyCode == KeyEvent.KEYCODE_BACK) {

        finish();
    }
    return super.onKeyDown(keyCode, event);
}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-14T21:05:50.170

我为自己实现这一点遇到了很多麻烦。我做了很多上面每个人都说的事情。我将其实现为它自己的名为 Recorder 的类（并加入了上述所有“修复”以及其他一些调整）。我希望我的代码可以帮助其他人节省我为此付出的许多时间：

```
public class Recorder {

    //Begin private fields for this class
    private AudioRecord recorder;

    private static final int RECORDER_BPP = 16;
    private static final String AUDIO_RECORDER_FILE_EXT_WAV = "AudioRecorder.wav";
    private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";
    private static final String AUDIO_RECORDER_TEMP_FILE = "record_temp.raw";
    private static final int RECORDER_SAMPLERATE = 8000;
    private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_MONO;
    private static final int RECORDER_CHANNELS_INT = 1;

    private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;

    private int bufferSize = 200000;
    short[] buffer;
    private Thread recordingThread = null;
    private boolean isRecording = false;

    //Constructor
    Recorder(String uniquename)
    {
        //Initilize our recorder object
        /*recorder = new AudioRecord(
                MediaRecorder.AudioSource.MIC, 
                44100, 
                AudioFormat.CHANNEL_IN_MONO, 
                AudioFormat.ENCODING_PCM_16BIT,
                AudioRecord.getMinBufferSize(44100,AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT)
                );
                */

         int bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE,
                    RECORDER_CHANNELS, RECORDER_AUDIO_ENCODING);

            System.out.println("BUFFER SIZE VALUE IS " + bufferSize);

          int buffercount = 4088 / bufferSize;
            if (buffercount < 1)
                buffercount = 1;
        recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
                RECORDER_SAMPLERATE, RECORDER_CHANNELS,
                RECORDER_AUDIO_ENCODING, 44100);

        //recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        //recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        //recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);

    }

    public void start() throws IllegalStateException, IOException
    {

            buffer = new short[4088];

            recorder.startRecording();

            isRecording = true;

            recordingThread = new Thread(new Runnable() 
            {
                @Override
                public void run() {
                    writeAudioDataToFile();
                }
            }, "AudioRecorder Thread");

            recordingThread.start();
    }

    public void stop()
    {
        System.out.println("Told to stop"); 
         stopRecording();
    }

    public boolean isRecording()
    {
        if(recorder.getRecordingState() == AudioRecord.RECORDSTATE_RECORDING)
            return true;
        else
            return false;
    }

    private void stopRecording() {
        // stops the recording activity

        if (null != recorder) {
            isRecording = false;

            recorder.stop();

            recorder.release();

                recorder = null;
                recordingThread = null;}
            // copy the recorded file to original copy & delete the recorded copy
            copyWaveFile(getTempFilename(), getFilename());
            deleteTempFile();
    } // stores the file into the SDCARD
        private String getFilename() {
            System.out.println("---3---");
            String filepath = Environment.getExternalStorageDirectory().getPath();
            File file = new File(filepath, AUDIO_RECORDER_FOLDER);

            if (!file.exists()) {
                file.mkdirs();
            }

            return (file.getAbsolutePath() + "/" + AUDIO_RECORDER_FILE_EXT_WAV);
        }

    private void deleteTempFile() {
        File file = new File(getTempFilename());

        file.delete();
    }

    private void copyWaveFile(String inFilename, String outFilename) {
    System.out.println("---8---");
    FileInputStream in = null;
    FileOutputStream out = null;
    long totalAudioLen = 0;
    long totalDataLen = totalAudioLen + 36;
    long longSampleRate = RECORDER_SAMPLERATE;
    int channels = RECORDER_CHANNELS_INT;
    long byteRate = RECORDER_BPP * RECORDER_SAMPLERATE * channels / 8;

    byte[] data = new byte[bufferSize];

    try {
        in = new FileInputStream(inFilename);
        out = new FileOutputStream(outFilename);
        totalAudioLen = in.getChannel().size();
        totalDataLen = totalAudioLen + 36;

        Controller.doDoc("File size: " + totalDataLen, 4);

        WriteWaveFileHeader(out, totalAudioLen, totalDataLen,
                longSampleRate, channels, byteRate);
        byte[] bytes2 = new byte[buffer.length * 2];
        ByteBuffer.wrap(bytes2).order(ByteOrder.LITTLE_ENDIAN)
                .asShortBuffer().put(buffer);
        while (in.read(bytes2) != -1) {
            out.write(bytes2);
        }

        in.close();
        out.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

    // stores the file into the SDCARD
    private String getTempFilename() {
        // Creates the temp file to store buffer
        System.out.println("---4-1--");
        String filepath = Environment.getExternalStorageDirectory().getPath();
        System.out.println("---4-2--");
        File file = new File(filepath, AUDIO_RECORDER_FOLDER);
        System.out.println("---4-3--");

        if (!file.exists()) {
            file.mkdirs();
        }

        File tempFile = new File(filepath, AUDIO_RECORDER_TEMP_FILE);
        System.out.println("---4-4--");

        if (tempFile.exists())
            tempFile.delete();
        System.out.println("---4-5--");
        return (file.getAbsolutePath() + "/" + AUDIO_RECORDER_TEMP_FILE);
    }
    private void writeAudioDataToFile() {

        // Write the output audio in byte
        byte data[] = new byte[bufferSize];

        String filename = getTempFilename();
        //
        FileOutputStream os = null;
        //
        try {
            //
            os = new FileOutputStream(filename);
            //
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

        int read = 0;

        // if (null != os) {
        while (isRecording) {
            // gets the voice output from microphone to byte format
            recorder.read(buffer, 0, buffer.length);            
            // read = recorder.read(data, 0, 6144);

            if (AudioRecord.ERROR_INVALID_OPERATION != read) {
                try {
                    // // writes the data to file from buffer
                    // // stores the voice buffer

                    // short[] shorts = new short[bytes.length/2];
                    // to turn bytes to shorts as either big endian or little
                    // endian.
                    // ByteBuffer.wrap(bytes).order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().get(shorts);

                    // to turn shorts back to bytes.
                    byte[] bytes2 = new byte[buffer.length * 2];
                    ByteBuffer.wrap(bytes2).order(ByteOrder.LITTLE_ENDIAN)
                            .asShortBuffer().put(buffer);

                    os.write(bytes2);
                 //  ServerInteractor.SendAudio(buffer);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

        try {
            os.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void WriteWaveFileHeader(FileOutputStream out, long totalAudioLen,
            long totalDataLen, long longSampleRate, int channels, long byteRate)
            throws IOException {
        System.out.println("---9---");
        byte[] header = new byte[4088];

        header[0] = 'R'; // RIFF/WAVE header
        header[1] = 'I';
        header[2] = 'F';
        header[3] = 'F';
        header[4] = (byte) (totalDataLen & 0xff);
        header[5] = (byte) ((totalDataLen >> 8) & 0xff);
        header[6] = (byte) ((totalDataLen >> 16) & 0xff);
        header[7] = (byte) ((totalDataLen >> 24) & 0xff);
        header[8] = 'W';
        header[9] = 'A';
        header[10] = 'V';
        header[11] = 'E';
        header[12] = 'f'; // 'fmt ' chunk
        header[13] = 'm';
        header[14] = 't';
        header[15] = ' ';
        header[16] = 16; // 4 bytes: size of 'fmt ' chunk
        header[17] = 0;
        header[18] = 0;
        header[19] = 0;
        header[20] = 1; // format = 1
        header[21] = 0;
        header[22] = (byte) RECORDER_CHANNELS_INT;
        header[23] = 0;
        header[24] = (byte) (longSampleRate & 0xff);
        header[25] = (byte) ((longSampleRate >> 8) & 0xff);
        header[26] = (byte) ((longSampleRate >> 16) & 0xff);
        header[27] = (byte) ((longSampleRate >> 24) & 0xff);
        header[28] = (byte) (byteRate & 0xff);
        header[29] = (byte) ((byteRate >> 8) & 0xff);
        header[30] = (byte) ((byteRate >> 16) & 0xff);
        header[31] = (byte) ((byteRate >> 24) & 0xff);
        header[32] = (byte) (RECORDER_CHANNELS_INT * RECORDER_BPP / 8); // block align
        header[33] = 0;
        header[34] = RECORDER_BPP; // bits per sample
        header[35] = 0;
        header[36] = 'd';
        header[37] = 'a';
        header[38] = 't';
        header[39] = 'a';
        header[40] = (byte) (totalAudioLen & 0xff);
        header[41] = (byte) ((totalAudioLen >> 8) & 0xff);
        header[42] = (byte) ((totalAudioLen >> 16) & 0xff);
        header[43] = (byte) ((totalAudioLen >> 24) & 0xff);

        out.write(header, 0, 4088);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T15:08:35.070

`int channels = 1`而不是`int channels = 2`for `CHANNELS = AudioFormat.CHANNEL_IN_MONO`！

# database - oracle db存储在windows的哪里

> ID：11862665
> 
> 赞同：2
> 
> 时间：2012-08-08T10:34:41.890
> 
> 标签：database, windows, oracle, oracle10g

Windows中oracle中的所有表都存储在哪里？

我的意思是在Windows的哪个文件夹中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:11:55.900

```
select * from dba_data_files; -- The database files (this is where the tables live)
select * from v$logfile; -- The online redo logs
select * from v$controlfiles; -- The controlfiles 
```

# flv - 如何从可以由 Actionscript NetStream 播放的原始 h264 生成 FLV 流？

> ID：11862666
> 
> 赞同：5
> 
> 时间：2012-08-08T10:34:41.297
> 
> 标签：flv, h.264

我对 FLV 流生成有疑问。我开发了 DVR 系统，它应该能够以 FLV 格式流式传输视频（在 Actionscript NetStream 上播放）。我以原始 H264 NAL 单元（0x00 0x00 0x00 0x01）从编码器接收视频，我也可以识别是编码帧 IDR 还是非 IDR。

我创建 FLV 流的解决方案（基于 Adob​​e 规范：视频文件格式规范版本 10）是：

1.  等待 IDR 帧；
2.  放 FLV 标头
3.  把 PrevTagSize(0)
4.  将 FLV 标签与视频标签 VIDEODATA 与 AVCVIDEODATA
5.  把 PrevTagSize
6.  重复步骤 4,5 直到流式传输结束。

Stream看起来不错，ffplay、mplayer、vlc等都可以播放，但是基于Actionscript NetStream的播放器不能播放。

因此，我得到了原始 h264 数据并使用 ffmpeg 将其转换为 FLV：

*ffmpeg -f h264 -i d1.h264 -vcodec 复制 -f flv d1.flv*

并尝试将 flv 的 my 和 ffmpeg 的进行比较。

首先，我看到 ffmpeg 在 FLV 标头之后立即添加了 AVC 序列标头。我已经开始这样做了，但是 NetStream 仍然不支持我的流，并且其他玩家也停止播放它。

好的，那我继续比较flv的。现在我看到 ffmpeg 编码的 FLV 中的 NAL 单元标头发生了一些变化，但我无法理解这些变化的含义。我阅读了许多规格，但没有任何帮助。有人可以澄清我吗？

例如，我的 NAL 单位看起来是这样的：00 00 00 01 XX XX ... - 对于所有单位

FFmpeg NAL：00 00 [14 BA] 61 9A ... - 非 IDR（两个字节变量） 00 00 [7A 02] 65 88 ... - IDR（两个字节变量）00 00 00 40 06 05 ... - SEI

是否添加了一些计数器或其他任何东西？

很高兴看到任何想法、链接等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:45:07.960

尝试使用以下命令来完成这项工作：

```
ffmpeg -y -i test.flv -vcodec copy -vbsf h264_mp4toannexb test.h264 
```

您将获得一个 vlc 可播放的 .h264 文件，所有 NAL 都以 00 00 00 01 开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:33:01.120

有两种常见的 H.264 比特流打包格式。

1.  附件 B 包含起始代码：00 00 01
2.  MP4 的长度前缀为 XX XX XX XX

您正在创建附件 B，但您似乎需要 FLV 的 mp4 打包格式（以长度为前缀）。您必须删除 (00) 00 00 01 并添加长度作为前缀。

# sencha-touch - 自定义煎茶触摸工具栏

> ID：11862667
> 
> 赞同：2
> 
> 时间：2012-08-08T10:34:43.640
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-theming

我想使用 sencha touch 创建一个自定义工具栏。使用 Ext.Toolbar，我能够创建一个像样的屏幕标题栏。但我的要求是将我的公司品牌形象标志放在标题栏的中心，而不是下面代码提供的简单文本。

```
{
   xtype : 'toolbar',
   docked: 'top',
   title: 'My Toolbar'
} 
```

谁能帮我怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T14:10:52.483

尝试这个

```
{
    xtype: 'toolbar',
    docked: 'top',
    layout: {
        type: 'vbox',
        align: 'center',
        pack: 'center'
    },
    items: [
        {
            xtype: 'image',
            width:218,
            height:44,
            src:'http://cdn.sstatic.net/careers/gethired/img/careers2-ad-header-so-crop.png'
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:14:13.253

您可以使用 title 属性在工具栏中添加图像。这是我的一个应用程序中的一些修改代码。此外，通过定义一个自定义类，您可以分配一个自定义 xtype 并重用主工具栏......无论哪种方式，代码都应该具有您正在寻找的内容：

```
Ext.define('myApp.view.Maintoolbar', {
    extend: 'Ext.Toolbar',
    xtype: 'maintoolbar',
    requires: [
        //any necessary requirements
    ],
    config: {
        docked: 'top',
        title: '<div style="text-align:center;"><img src="images/logoSmall.png" width="185" height="36" alt="Company Name"></div>',
        padding: '5 5 5 5',
        items: [{
            iconCls: 'arrow_down',
            iconMask: true,
            ui: 'normal',
            //left: true,
            text: 'Menu',
            action: 'openmenu'
        },{
            xtype: 'spacer'
        },{
            xtype: 'button',
            iconCls: 'arrow_down',
            iconMask: true,
            ui: 'normal',
            align: 'right',
            text: 'Logout',
            action: 'logout'
        }]
    },
    initialize: function() {
        this.callParent();
    }
}); 
```

# html - 对齐按钮的右侧并输入

> ID：11862668
> 
> 赞同：1
> 
> 时间：2012-08-08T10:34:47.217
> 
> 标签：html, css

我在对话框的下一行有一个文本输入字段和 2 个按钮。

如何在对话框中心排列输入字段并将按钮与输入字段的右侧边缘对齐？

我已经设法使用以下代码实现了我所追求的结果，但感觉必须有更好的方法，因为这也会使文本输入向右对齐：

```
<style>

.container
{
    border: 1px solid #ccc;
    text-align: right;
        width: 100%;
        padding-right: 20px;
}

</style>

<div class="container">

<p><input id="selContactLists" name="selContactLists" type="text" class="textbox" id="textbox" /></p>
<input name="" type="button" value="Button"/> 
<input name="" type="button" value="Button"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:42:38.360

CSS：

```
.container {
    display: inline-block;
}

input.text {
    width: 150px;
    display: block;
}

.right {
    float: right;
} 
```

HTML：

```
<div class="container" >
    <input type="text" class="text" />
    <span class="right">
        <input type="button" value="button" />
        <input type="button" value="button" />
    </span>
</div> 
```

工作示例：http: [//jsfiddle.net/GTTFY/](http://jsfiddle.net/GTTFY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:10:07.040

```
<style>

.test
{
    margin-left:auto;
    margin-right:auto;

}
.test td
{
    float:right;
}
</style>

<table class="test">
    <tr>
        <td colspan=2><input name="" type="text" class="textbox" id="textbox" /></td>
    </tr>
    <tr>
        <td><input name="" type="button" value="Button"/> </td>
        <td><input name="" type="button" value="Button"/> </td>
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:46:12.370

```
<style>

.container
{
    margin-left:auto;
    margin-right:auto;
    width:150px;
    }

</style>

<div class="container" >

<input name="" type="text" class="textbox" id="textbox" />
<input name="" type="button" style="float:right;" value="Button"/> 
<input name="" type="button" style="float:right;" value="Button"/> 

</div> 
```

# ios - XCode 和 Facebook IOS SDK - 说明不正确

> ID：11862669
> 
> 赞同：2
> 
> 时间：2012-08-08T10:34:50.383
> 
> 标签：ios, xcode, facebook, sdk

我正在遵循本指南。

[http://developers.facebook.com/docs/mobile/ios/build/](http://developers.facebook.com/docs/mobile/ios/build/)

为我的 XCode 项目设置 Facebook IOS SDK..

我到了说要运行的部分

```
% ~/facebook-ios-sdk/scripts/build_facebook_ios_sdk_static_lib.sh 
```

在终端..

我试过了，但没有用，所以我手动找到了那个脚本文件，它不在指定的文件夹中。我的问题是我错过了什么吗？或者有谁知道文件是否被重命名？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:40:38.463

没错，这个脚本不包含在[github](https://github.com/facebook/facebook-ios-sdk/tree/master/scripts)上的最新版本中。

但是，您可以下载[SDK](https://developers.facebook.com/ios/downloads/)并按照[“入门”部分中的说明使用它 - 启动一个新的 Xcode 项目](https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/#project)。到目前为止，我的项目中的 SDK 3.0 和 ARC 没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:55:09.407

该脚本在我的实例中。facebook-ios-sdk 目录是否可能不在 /Users/yourusername/facebook-ios-sdk 中的主目录的顶层？它需要在那里让您逐字按照说明进行操作。

# android - 在android中读取xls文件

> ID：11862670
> 
> 赞同：-2
> 
> 时间：2012-08-08T10:34:51.127
> 
> 标签：android, android-emulator

我知道他们是相同的 Q. 因为它我尝试同时使用 apache poi 和 jexcel 但是当我在项目中导入 poi/jexcel 时，我的代码仍然显示未定义的单词工作簿和 org.apache.poi ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:40:17.887

只需附加`jxl.jar`并`poi-3.0.2-FINAL.jar`在`prokect.its`.

# android - android 的肥皂请求格式

> ID：11862673
> 
> 赞同：2
> 
> 时间：2012-08-08T10:35:08.183
> 
> 标签：android, web-services, android-ksoap2

我正在尝试使用 ksoap2 从 Android(ICS) 访问 Web 服务。从我的 android 模拟器发送的肥皂请求是这样的（它给出的错误是 'soapenv:Server.generalException' InvalidCredentialsFault）：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
<v:Header />
<v:Body>
<LoginInput xmlns="http://xxxxxxx.com/Schemas/Core/2006-03/Session" id="o0" c:root="1">
<username i:type="d:string">uname</username>
<password i:type="d:string">pass</password>
<group i:type="d:string"></group>
<role i:type="d:string"></role>
</LoginInput>
</v:Body>
</v:Envelope> 
```

但是在 SoapUI 中，成功的登录请求是这样发送的：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ses="http://xxxxxxx.com/Schemas/Core/2006-03/Session">
   <soapenv:Header/>
   <soapenv:Body>
      <ses:LoginInput username="uname" password="pass" group="" role=""/>
   </soapenv:Body>
</soapenv:Envelope> 
```

这是我的android代码部分：

```
try {                   
    final String NAMESPACE = "http://xxxxxxx.com/Schemas/Core/2006-03/Session";
    final String URL = "http://10.0.0.11:9081/toc/services/Core-2006-03-Session?wsdl";
    final String METHOD_NAME = "LoginInput";
    final String SOAP_ACTION = "login";

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("username", "infodba");
    request.addProperty("password", "infodba");
    request.addProperty("group", "");
    request.addProperty("role", "");

    SoapSerializationEnvelope soapenvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    soapenvelope.setOutputSoapObject(request);
    soapenvelope.dotNet = true;

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    androidHttpTransport.debug = true;

    try {
        androidHttpTransport.call(SOAP_ACTION, soapenvelope);
        Object response = (Object) soapenvelope.bodyIn;
        tvResponse.setText(response.toString());
    } catch (Exception e) {
        e.printStackTrace();
        tvResponse.setText("Exception Message:" + e.getMessage());
    }
} catch (Exception e) {
    e.printStackTrace();
    tvResponse.setText("Error: " + e.getClass().getName() + ":" + e.getMessage());
} 
```

我在stackoverflow上浏览了许多相关线程并尝试了这些选项，但未能获得正确的登录响应。

**在 SoapUI 的一次尝试中，当我从请求中删除一个属性 (username="uname") 时，我得到了相同的错误响应，如下所示**：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ses="http://xxxxxxx.com/Schemas/Core/2006-03/Session">
   <soapenv:Header/>
   <soapenv:Body>
      <ses:LoginInput password="pass" group="" role=""/>
   </soapenv:Body>
</soapenv:Envelope> 
```

我也尝试**了 kvmSerializable**实现但同样的错误（[如何通过 ksoap2 创建 SOAP 请求](https://stackoverflow.com/questions/9355707/how-to-create-soap-request-via-ksoap2)）。这是我的**WSDL**文件的一部分：

```
 <wsdl:definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:imp1="http://xxxxxxxx.com/Schemas/Soa/2006-03/Exceptions" xmlns:imp2="http://xxxxxxxx.com/Schemas/Core/2006-03/Session" xmlns:imp3="http://xxxxxxxx.com/webservices/2005-06/schemas/WSFaults" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://xxxxxxxx.com/Services/Core/2006-03" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsi="http://ws-i.org/schemas/conformanceClaim/" xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://xxxxxxxx.com/Services/Core/2006-03">
<wsdl:types>
<xs:schema>
<xs:import namespace="http://xxxxxxxx.com/Schemas/Soa/2006-03/Exceptions" schemaLocation="../schemas/SoaExceptions.xsd"/>
<xs:import namespace="http://xxxxxxxx.com/Schemas/Core/2006-03/Session" schemaLocation="../schemas/Core0603Session.xsd"/>
<xs:import namespace="http://xxxxxxxx.com/webservices/2005-06/schemas/WSFaults" schemaLocation="../schemas/WSFaults.xsd"/>
</xs:schema>
</wsdl:types>

<wsdl:message name="loginRequest">
<wsdl:part element="imp2:LoginInput" name="in0"/>
</wsdl:message>
-------
<wsdl:portType name="Core0603Session">
<wsdl:operation name="login">
<wsdl:input message="tns:loginRequest" name="loginRequest"/>
<wsdl:output message="tns:loginResponse" name="loginResponse"/>
<wsdl:fault message="tns:InternalServerFaultFault" name="InternalServerFaultError"/>
<wsdl:fault message="tns:InvalidCredentialsFaultFault" name="InvalidCredentialsFaultError"/>
</wsdl:operation>
</wsdl:portType>
-------
<wsdl:binding name="Core0603SessionSoapBinding" type="tns:Core0603Session">
<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="login">
<soap:operation soapAction="login" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
<wsdl:fault name="InternalServerFaultError">
<soap:fault name="InternalServerFaultError" use="literal"/>
</wsdl:fault>
<wsdl:fault name="InvalidCredentialsFaultError">
<soap:fault name="InvalidCredentialsFaultError" use="literal"/>
</wsdl:fault>
</wsdl:operation>
--------
</wsdl:binding>
<wsdl:service name="Core0603SessionService">
<wsdl:port binding="tns:Core0603SessionSoapBinding" name="Core-2006-03-Session">
<soap:address location="http://10.0.0.11:9081/toc/services/Core-2006-03-Session"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

和**xsd**文件的一部分：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    targetNamespace="http://xxxxxxxx.com/Schemas/Core/2006-03/Session"
    xmlns:tns="http://xxxxxxxx.com/Schemas/Core/2006-03/Session" 
    elementFormDefault="qualified" attributeFormDefault="unqualified">
------
    <xsd:element name="LoginInput">
    <xsd:complexType>
        <xsd:sequence>
        </xsd:sequence>
        <xsd:attribute name="username" type="xsd:string" use="required">
       </xsd:attribute>
        <xsd:attribute name="password" type="xsd:string" use="required">
       </xsd:attribute>
        <xsd:attribute name="group" type="xsd:string" use="required">
       </xsd:attribute>
        <xsd:attribute name="role" type="xsd:string" use="required">
        </xsd:attribute>
    </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

这是我的响应转储：

```
<?xml version="1.0" encoding="UTF-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soapenv:Body><soapenv:Fault><faultcode>soapenv:Server.generalException</faultcode><faultstring/><detail><ns1:InvalidCredentialsFault xmlns:ns1="http://xxxxxxxx.com/Schemas/Soa/2006-03/Exceptions"><message code="1007" level="1007"/></ns1:InvalidCredentialsFault><ns2:exceptionName xmlns:ns2="http://xml.apache.org/axis/">com.xxxxxxxx.schemas.soa._2006_03.exceptions.InvalidCredentialsException</ns2:exceptionName><ns3:stackTrace xmlns:ns3="http://xml.apache.org/axis/">
    at com.xxxxxxxx.soa.ptier.ExceptionMapper.throwSoaException(Unknown Source)
    at com.xxxxxxxx.soa.ptier.SoapInjector.sendRequestToPTier(Unknown Source)
    at com.xxxxxxxx.services.core._2006_03.Core0603SessionSoapBindingImpl.login(Unknown Source)
    at com.xxxxxxxx.services.core._2006_03.Core0603SessionSoapBindingSkeleton.login(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:45)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:599)
    at org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397)
    at org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186)
    at org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323)
    at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
    at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
    at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
    at org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:454)
    at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281)
    at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
    at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1655)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1595)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
    at com.xxxxxxxx.presentation.gateway.filters.ResponseTimeFilter.doFilter(Unknown Source)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.xxxxxxxx.presentation.gateway.filters.CompressionFilter.doFilter(Unknown Source)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.xxxxxxxx.presentation.gateway.filters.ResponseTimeFilter.doFilter(Unknown Source)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:932)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:272)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1550)
</ns3:stackTrace><ns4:hostname xmlns:ns4="http://xml.apache.org/axis/">xxxxxxx</ns4:hostname></detail></soapenv:Fault></soapenv:Body></soapenv:Envelope> 
```

请原谅我对代码的如此长的描述，但我希望它有助于更​​好地理解问题和我的错误。简而言之，我希望帮助获得类似于 SoapUI 请求的 Soap 请求格式，我知道它不是强制的，但希望它能解决我的问题。如果可能，请给我任何其他替代品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T04:33:05.167

尝试使用 PropertyInfo 设置您的属性

```
import org.ksoap2.serialization.PropertyInfo;

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

            PropertyInfo pi = new PropertyInfo();
            pi.setName("unamestring");
            pi.setValue("passwstring");
            pi.setType(String.class);
            request.addProperty(pi); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:43:45.523

```
List<HeaderProperty> headerList = new ArrayList<HeaderProperty>();
        headerList.add(new HeaderProperty("Authorization", "Basic "
                + org.kobjects.base64.Base64.encode("user:pass"
                        .getBytes())));

transporteHttp.call(SOAP_ACTION, sobre, headerList); 
```

# c++ - 服务器上的 C++ 代码，在客户端机器上运行

> ID：11862675
> 
> 赞同：0
> 
> 时间：2012-08-08T10:35:14.453
> 
> 标签：c++, database, client, client-side

是否可以编写 C++ 代码来与服务器交互，但要在客户端执行，但要在浏览器上而不是在本机上执行？

例如，想象一下使用开源类来生成文件。但是因为您不希望所有这些工作都在服务器上完成，所以您在浏览器上运行它。

这样客户端提供一个或两个或多个文件作为输入，然后代码在他的机器上运行，产生最终结果，然后将该文件上传到服务器上的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:51:50.727

请参阅谷歌本机客户端项目。[http://code.google.com/p/nativeclient/](http://code.google.com/p/nativeclient/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:52:29.777

这是个奇怪的问题。

您可以准备二进制文件来执行您希望在客户端完成的任务，并让服务器在请求时向客户端发送正确的二进制文件。客户端然后运行这个二进制文件并将结果返回给服务器。

如果您知道客户端计算机的配置（二进制文件必须在它们上运行），则可能。它还必须实现一些安全层——你不想让每个二进制文件都在客户端上运行（想象一下当一些恶意代码在客户端上运行时的中间人攻击）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:04:57.087

我认为您的请求与服务器端编程背后的想法相矛盾。使用服务器端程序的主要目的是以受控方式使用数据库、网络等基础设施组件。（服务器端应用程序最典型的用法是使用 JSP 和 ASP 等服务器端编码的网站。）

由于服务器是要保持安全的机器，因此不应允许远程应用程序自由地进行更改或访问文件系统。如果您想在服务器上进行更改，例如执行数据库操作或读取/写入文件，您应该使用在服务器上运行的应用程序或向远程客户端应用程序提供 Web 服务或网站等接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-16T14:10:54.870

因此，如果您想在浏览器上工作，则有几种解决方案，然后将结果发布到服务器数据库中。

首先，您必须设置您的服务器为数据库工作做好准备。我已经使用 MEAN 堆栈完成了这项工作，设置了一个 MongoDB 并将其与 Mongoose API 接口。

现在，对于问题的实质，有很多浏览器做密集工作的例子。这些应用程序中的大多数认为不是 C++，而是 Javascript。

如果您真的想专注于 C++（就像我过去所做的那样，在我问这个问题的时候，想为大学做点大事），那么您可以执行以下操作之一：

*使用谷歌本机客户端 (NaCl)。这是一个沙箱，用于在浏览器中高效、安全地运行编译的 C 和 C++ 代码，独立于用户的操作系统。*也许您应该查看 Emscripten，这是一个将 C 和 C++ 代码转换为 jaascript 的框架。这样，您可以让您的 C 或 C++ 二进制文件正常工作，并将它们翻译成 Javascript，以便它们也可以在浏览器中工作。

# android - 收到文件后，Android 到 C++ Socket 连接关闭

> ID：11862677
> 
> 赞同：1
> 
> 时间：2012-08-08T10:35:19.150
> 
> 标签：android, c++, sockets, message, file-transfer

我有以下问题：我有一个 Android 应用程序，它将图片发送到 C++ 服务器，该服务器计算一些参数并将它们发送回客户端。但是当发送文件并计算所有内容时，手机无法接收消息，并且我的 LogCat 显示“Socket Closed”。

但是如果我注释掉发送和接收图像的代码，客户端就能够从服务器接收到一条消息。为什么在发送图像之后这是不可能的？

这是我的相关代码：

安卓：

```
String picturePath = "/sdcard/DCIM/Camera/IMG_0004.jpg";
            final File picture = new File(picturePath);
                        if (picture.exists()) {
                            try {
                                //reading file and sending to server
                                FileInputStream fis = new FileInputStream(picture);
                                Log.d(TAG, "trying to connect");
                                String st = "laber";
                                Socket s = new Socket("192.168.0.12", port);

                                tv = (TextView) findViewById(R.id.textDesc);
                                tv.setText(st);
                                OutputStream out = s.getOutputStream();
                                DataInputStream in = new DataInputStream (s.getInputStream());
                                byte[] buf = new byte[1024];
                                int read = 0;
                                int totBytes = 0;
                                while ((read = fis.read(buf)) != -1)
                                {
                                    totBytes = totBytes + read;
                                    out.write(buf, 0, read);
                                    Log.d(TAG, "Image - Read: " + read + " - Total " + totBytes + " bytes!");

                                }
                                out.flush();

                                out.close();
                                st = in.readLine();
                                fis.close();

                                Log.d(TAG, "Waiting" + " "+ st+ " " +st.compareTo("laber"));

                                tv.setText(st);

                                // Close connection
                                s.close();
                                Log.d(TAG, "connection closed " + st);
                                dataReceived=true;
                            } catch (UnknownHostException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            } catch (IOException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        } 
```

C++

```
SOCKET TempSock=SOCKET_ERROR;
while(TempSock==SOCKET_ERROR)
{
    std::cout<<"Waiting for incoming connections...\r\n";
    TempSock=accept(Socket,NULL,NULL);
}
Socket=TempSock;
int totalBytes = 0;
ofstream outFile;
char buf[1024] = "";
int received = 0;
if (outFile != NULL) 
{
    outFile.open("C:\\test\\ReceivedFiles\\test.jpg" , ofstream::binary);
    cout << "File opened!" << endl;
} else 
{
    cout << "Can't open file!" << endl;
}
//receiving file and writing to disk
while ((received = recv(Socket, buf, sizeof(buf), 0)) > 0) 
{
    cout << "R:" << received << " ";
    if (received > 0) 
    {
        totalBytes += received;
        if (outFile.is_open()) 
        {
            outFile.write(buf, received); 
            cout << " (Total: " << totalBytes << " B)" << endl;
        } else
        cout << "Error in recv() function, received bytes = " << received << endl;
    } else 
        cout << "R:" << received << " ";
}

std::cout<<"Client connected!\r\n\r\n";

initImageSearch();
readFiles();
keypointMatching();
searchBundleOut();
ransacMatrices();
getRotationOrientation();

//send message back to client
string message = doubleToString(viewingDirectionArray[0])+" "+doubleToString(viewingDirectionArray[1])+" "+doubleToString(viewingDirectionArray[2])+" "+doubleToString(positionArray[0])+" "+doubleToString(positionArray[1])+" "+doubleToString(positionArray[2])+" 0.5 0.5 0.5 baum";
const char *szMessage;
szMessage = "123 456 789 246 135 178 189";//message.c_str();

int msg = send(Socket,szMessage,strlen(szMessage),0);
std::cout<<msg<<endl;
// Shutdown socket
shutdown(Socket,SD_SEND);

// Close socket entirely
closesocket(Socket);

// Cleanup Winsock
WSACleanup(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T00:44:21.500

完成连接后关闭输出流，而不是之前。关闭套接字的输入或输出流会关闭套接字和其他流。关闭围绕另一个流的任何流或读取器或写入器将关闭该流。

# python - 如何右对齐一列数字？

> ID：11862679
> 
> 赞同：2
> 
> 时间：2012-08-08T10:35:25.747
> 
> 标签：python, python-3.x

我有以下python代码：

```
#This program converts the speeds 60 KPH
#through 130 KPH (in 10 kph increments)
#to MPH

#Global constants
START = 60
END = 131
INCREMENT = 10
CONVERSION_FACTOR = 0.6214

def main():
    #Print the table headings
    print('KPH\t\tMPH')
    print('----------------')

    #Print the speeds
    for kph in range(START, END, INCREMENT):
        mph = kph * CONVERSION_FACTOR
        print(kph, '\t\t', format(mph, '.1f'))

#Call the main function
main() 
```

运行此代码，我得到以下结果：

```
KPH     MPH
----------------
60       37.3
70       43.5
80       49.7
90       55.9
100          62.1
110          68.4
120          74.6
130          80.8 
```

如何正确对齐第二列，以便更正确地显示我的结果？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T10:49:51.870

使用[格式规范迷你语言](http://docs.python.org/library/string.html#formatspec)

```
"{:>10.3}".format(12.34) 
```

结果（`_`用于空格`）：`

 ````
______12.3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T10:39:15.200

您也可以使用`printf`样式格式来指定宽度。

```
>>> print('%10.2f' % 1.23456)
      1.12 
```

在您的示例中，您可以使用：

```
print('%-10i%.1f' % (kph, mph)) 
````

# c - execvp 和我；我怎样才能让它为我工作？

> ID：11862685
> 
> 赞同：0
> 
> 时间：2012-08-08T10:35:50.100
> 
> 标签：c, execvp

我创建了一个 shell，当我使用 system(1) 时它可以工作，但规范说不可以。我试图在最后使用 execvp ，但我不太确定如何去做。任何帮助的机会将不胜感激。

代码 ->

```
char *token = NULL;
char line[LINE_MAX];
char *line2 = NULL;
char *tempraryToken = NULL;
char *command = NULL;
char args[LINE_MAX];    

int numSpaces = 0;
int i;
int strleng = 0;
while( 1 )
{
    if( scanf(" %[^\n]", line) > 0) ) //prune off the newline char 
        token = strtok( line, ";" )   //break up different commands 
                                      //on the same line by ;
        do{
            strleng = strlen(token);
            for( i = 0; i < strleng; i++ )
            {
                if(token[i] == ' ') numSpaces++; //find out if there are spaces
            }
            i = 0;
            if( numSpaces >= 1 ) //if there are spaces
            {
                 line2 = token;
                 temporaryToken = strtok( line2, " ") //break by spaces
                 do{
                     //if it's before any spaces
                     if(i == 0){
                         command = temporaryToken;
                     }
                     else strcat(args, temporaryToken);
                 strtok( NULL, " ");
                 while (temporaryToken != NULL);
            }
        execvp(command, args); //this could be any of the exe commands
                               //that's what I'm looking for
        token = strtok( NULL, ";" ) //move to next token
        while( token != NULL );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:41:42.960

基本上，要在`execvp`需要`fork`进程后继续运行，请`execvp`在子进程中运行`wait`或`waitpid`在父进程中运行。考虑到这一点，自己做一些研究；-)

# doctrine-orm - 当有关联以在会话中下订单时，学说2分离不起作用

> ID：11862687
> 
> 赞同：0
> 
> 时间：2012-08-08T10:35:52.703
> 
> 标签：doctrine-orm

我正在尝试将一个对象从教义 2 中的 entity_manager 中分离出来，以便让他进入会话，但它不起作用。不是在有协会的时候。

前任：

```
<?php
namespace Travelyo\CoreBundle\Entity\Order;
use Doctrine\ORM\Mapping as ORM;
/**

 *     @ORM\Table(name="bundles")
 *    /
class Bundle 
{
/**
 * @var integer $id
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @ORM\ManyToOne(targetEntity="Order", inversedBy="orders",cascade={"detach","merge","remove"})
 * @ORM\JoinColumn(name="order_id", referencedColumnName="id")
 */
private $order;
 } 
```

按顺序没有其他关系。

但是当我试图这样做时

```
$em = $this->getDoctrine()->getEntityManager();
$bundle = $em->getRepository('TravelyoCoreBundle:Order\Bundle')->find(27);
$em->detach($bundle);
$em->detach($bundle->order);
serialize($bundle); 
```

它不工作，我有所有的对象依赖，代理，......

如果我在 detach $bundle->setOrder(new Order()); 之前这样做

然后序列化是完美的，我只有捆绑包。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:52:37.527

即使您的对象已分离，它仍然具有对用于创建它的原则组件的引用。

作为一个简单的建议，我可以告诉您简单地序列化对象标识符。这更干净，虽然它需要您在另一端（反序列化部分）执行查询，但您将避免很多问题。

只是不要序列化你的实体，它只是一团糟。

# python - python - 如何从具有列表理解的字典中生成枚举元组？

> ID：11862694
> 
> 赞同：0
> 
> 时间：2012-08-08T10:36:20.083
> 
> 标签：python

如何编写列表理解来枚举键：值对到 Python 字典中的 3 成员元组？

```
d = {'one': 'val1', 'two': 'val2', 'three': 'val3', 'four': 'val4', 'five': 'val5'} 
```

当我尝试这个时：

```
li = [(index, k, val) for index, k, val in enumerate(d.items())] 
```

我得到一个`ValueError: need more than 2 values to unpack`

所需的输出将是：

```
[(0, 'one', 'val1'),
 (1, 'two', 'val2'),
 (2, 'three', 'val3'),
 (3, 'four', 'val4'),
 (4, 'five', 'val5')] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T10:37:44.820

嵌套你的元组。但是顺序可能不理想。

```
li = [(index, k, val) for index, (k, val) in enumerate(d.items())] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:45:50.530

enumerate() 的输出是一个 2 元素元组。由于该元组的值是另一个 2 元素元组，因此您需要使用括号对它们进行分组。

```
li = [(index, k, val) for index, (k, val) in enumerate(d.items())] 
```

但是，由于默认情况下 dict 是无序的，因此您需要创建 OrderedDict。

```
odict = collections.OrderedDict()
odict['one'] = 'val1'
odict['two'] = 'val2'
odict['three'] = 'val3'
odict['four'] = 'val4'

li = [(index, k, val) for (index, (k, val)) in enumerate(odict.items())] 
```

这将为您提供以下值`li`

```
[(0, 'one', 'val1'), (1, 'two', 'val2'), (2, 'three', 'val3'), (3, 'four', 'val4')] 
```

# svn - 使用 Batchscript 进行 SVN 结帐

> ID：11862706
> 
> 赞同：1
> 
> 时间：2012-08-08T10:37:20.097
> 
> 标签：svn, tortoisesvn, batch-file

我正在研究批处理脚本，它将通过使用 svn 来检查文件夹，并且在某些情况下我会成功，这是代码

```
@echo off
echo.
echo. [ SVN Updater ]

set SOURCE=C:\Documents and Settings\himanshu.jain\Desktop\checkout
set SVN=C:\Program Files\TortoiseSVN\bin
echo.
echo. Updating %SOURCE% to SVN...
"%SVN%\TortoiseProc.exe" /command:checkout /path:"%SOURCE%" /closeonend:2
echo. done.
echo.
echo. Operation complete. 
```

但是在这里我遇到了一个问题，我陷入了困境，我能够提供将检出这些东西的路径，但不知道如何在这个批处理脚本中传递 SVN url.... ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:40:40.783

如[TSVN 帮助](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-automation.html)中所述，使用时`/command:checkout`：

> `/path`指定目标目录，并指定`/url`要从中签出的 URL。如果您指定 key `/blockpathadjustments`，则自动结帐路径调整被阻止。`/revision:XXX`指定要签出的修订。

所以你正在寻找`/url`.

# html - 使用 twitter-bootstrap 调整大小的图像

> ID：11862707
> 
> 赞同：4
> 
> 时间：2012-08-08T10:37:26.790
> 
> 标签：html, css, twitter-bootstrap

我正在尝试 twitter 的框架来开发我自己的网站，并且我希望我的图像随着浏览器大小的减小而调整大小。我很困惑并尝试了一切但无法提出解决方案这是我的结构

**HTML**

```
<section id="intro">
      <div class="row" id="ruby">
        <div class="span6" id="heading">
          <h1>Journey Into Ruby and Beyond</h1>
          <p>A blog about my journey into ruby, my experiences and lots of fun!</p>
        </div>

        <div class="span6" id="pic" align="right">
           <p>Akash Soti<br>RoR Developer<br>@xyz company </p>
        </div>
    </section><!--/intro--> 
```

**CSS**

```
#ruby.row{

margin-left: 0px;
padding-right: 0px;
padding-bottom: 0px;
}

#pic{

background: url(img/Akash.png);
background-repeat: no-repeat;
height: 150px;
width: 200px;
margin-left: 200px;

}

#pic img{

max-width:100% ;
    max-height:100% ;
    display:block;

}

#pic p{
position: relative;
right: 110px;
margin-top: 90px;
margin-left: 0px;
text-align: left;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T13:34:47.460

Twitter bootstrap 旨在使图像（和布局）具有响应性，即内容中的图像：

`<img src="path/to/images.jpg" alt="some">`

不是您在 CSS 中用作背景图像的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:35:36.937

你必须使用

```
@media (max-width: 699px) {
#pic{
background: url(img/Akash.png);
background-repeat: no-repeat;
height: 100px;
width: 150px;
margin-left: 200px;
}
} 
```

但是如果你想要响应式设计，尽量避免像素，使用 %。如果您的背景是图片（例如照片，图片）而不是背景类型的图像，请`<img>`改用

# ruby-on-rails-3 - 如何在haml中从此代码中删除空格？

> ID：11862709
> 
> 赞同：0
> 
> 时间：2012-08-08T10:37:30.483
> 
> 标签：ruby-on-rails-3, haml

这是代码

```
 .meta
    = time_ago_in_words(discussion.created_at)
    ago by
    = discussion.user.username
    |
    = link_to "Edit", edit_discussion_path(discussion), class: "meta"
    |
    = link_to "Delete", discussion_path(discussion), method: :delete, confirm: "Are you sure?", class: "meta" 
```

这是输出：

```
 <div class='meta'>
      about 7 hours
      ago by
      foo
      |
      <a href="/discussions/2/edit" class="meta">Edit</a>
      |
      <a href="/discussions/2" class="meta" data-confirm="Are you sure?" data-method="delete" rel="nofollow">Delete</a>
    </div> 
```

这使得输出在`|`.

是否可以删除这些语句之间的空格，而不添加 a`span`到所有内容，或者只使用`erb`or `string interpolation`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:56:14.897

将其显式打印为 Ruby 字符串有帮助吗？

```
.meta
  = time_ago_in_words(discussion.created_at)
  ago by
  = discussion.user.username
  = "|"
  = link_to "Edit", edit_discussion_path(discussion), class: "meta"
  = "|"
  = link_to "Delete", discussion_path(discussion), method: :delete, confirm: "Are you sure?", class: "meta" 
```

我的意思是，这不是最好的代码，我更愿意像您最初的尝试一样放置字符，但是由于 HAML 强制缩进，您可能必须采用某种不同的路径来指定空格/空格字符。我认为这样做可能会为您提供简单的精确方法，只要在任一侧添加特定数量的空格或`&nbsp;`字符（如果您需要多个）。

**编辑：**我注意到标题指定“删除”空格，而不是“平衡”它 - 我的错误。因此，您可以尝试`succeed`，如下所述：[Haml: Control whitespace around text](https://stackoverflow.com/questions/1311428/haml-control-whitespace-around-text)。 `Succeed`没有后续，或者后跟空字符串，应该可以实现你想要的，没有任何空格。

**编辑2：**你是绝对正确的，`>`修饰符不适用于红宝石打印线（如`link to`）。成功应该仍然有效，或者您可以创建一个辅助函数，将所有这些行连接成一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:14:35.497

截至目前（2012 年 10 月 21 日），没有办法优雅地做到这一点。

如果您在阅读本文时可以，请务必回答问题，我会将其标记为答案。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-08-08T11:47:25.313

在 adobe dreamwever 中打开你的代码，然后按 ctrl + f ..

写在下面的代码和勾选正则表达式框

在查找框中：[\r\n]{2,}

在替换框中：\n

n 全部替换...

享受yyy

# android - Android Twitter 有时不会返回到我的 Android 应用程序

> ID：11862720
> 
> 赞同：0
> 
> 时间：2012-08-08T10:37:58.900
> 
> 标签：android, twitter

我制作了一个集成 Twitter 的 Android 应用程序。我的回调 URL 没有返回到我的 Android 应用程序。有时它显示网页不可用。它已被删除或删除。我已用作`Twitter_Test_App Activity://callback`回调 URL。并在我的清单中也给了它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:54:00.557

使用以下 URL 作为回调 URL。

```
public static final String CALLBACK_URL = "x-oauthflow-twitter://callback"; 
```

# python - 从 Crontab 启动但不在本地 shell 中时，Python SimpleXMLRPC 失败

> ID：11862721
> 
> 赞同：0
> 
> 时间：2012-08-08T10:37:58.960
> 
> 标签：python, simplexmlrpcserver

我真的对这个问题感到困惑。我正在使用 python 的 SimpleXMLRPC 为 Web 应用程序提供服务。

问题是，当我从命令行启动我的 xmlrpc 服务器时，一切都运行顺利，但是当它通过 crontab 启动时却没有。

我试图通过睡眠保持启动并检查 /sys/class/net/eth0/device/net/eth0/operstate 但没有运气。

请在附件中找到脚本的来源：

```
#!/usr/local/bin/python2.5
# -*- coding: utf-8 -*-
# License: GNU
# startxmlrpc.py: startup script for xmlrpc server to deal with processing

## {{{ http://code.activestate.com/recipes/439094/ (r1)
import socket
import fcntl
import struct

def get_ip_address(ifname):
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    return socket.inet_ntoa(fcntl.ioctl(
        s.fileno(),
        0x8915,  # SIOCGIFADDR
        struct.pack('256s', ifname[:15])
        )[20:24])
## end of http://code.activestate.com/recipes/439094/ }}}

import xmlrpclib
import urllib2
import os
from SimpleXMLRPCServer import SimpleXMLRPCServer
from time import sleep

def send(img1,img2,lib,filters):

    global HOST_IP

    path = '/var/www/%s/' % MD5Cypher(HOST_IP)
    makedirs(path)
    print "Path: %s" % path

    if lib=='devel':
        os.system("""python ~/devel_funcs.py %s %s "%s" &""" % (img1_path,img2_path, filters))

    if lib=='milena':
            import milena_funcs
            milena_funcs.mln_process(img1_path, filters)

    return HOST_IP + '/' + path.split('/var/www/')[1] + 'out.pgm'

while open('/sys/class/net/eth0/operstate').read().strip() != 'up':
    sleep(5)

HOST_IP = get_ip_address('eth0')
server = SimpleXMLRPCServer((HOST_IP, 7070))
server.register_function(send)
server.serve_forever() 
```

如果我在干净启动后尝试启动我的进程，这是我得到的错误：

```
<class 'xmlrpclib.Fault'>: <Fault 1: "<class 'xmlrpclib.ProtocolError'>:<ProtocolError for 192.168.0.5:7070/RPC2: -1 >"> 
      args = () 
      faultCode = 1 
      faultString = "<class 'xmlrpclib.ProtocolError'>:<ProtocolError for 192.168.0.5:7070/RPC2: -1 >" 
      message = '' 
```

如果我杀死它并再次运行它，它就可以工作。

这是 crontab：

```
usrmln@Slave1:~$ crontab -l
# m h  dom mon dow   command
* * * * * python ~/master_register.py > /dev/null 2>&1
* * * * * python ~/startxmlrpc.py > /dev/null 2>&1
0   5 * * * find /var/www/ -type d -mtime +3 -exec rm -rf {} \; > /dev/null 2>&1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:50:43.817

您没有显示错误是什么，但是，从 cron 运行时可能没有设置 PYTHONPATH。您可以在运行脚本之前设置它。

或者，当然，您以不同的用户身份运行它并且文件权限设置不正确。如果 cron 以其他用户身份运行您的脚本，也`~/devel_funcs.py`不会引用您的主目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:19:31.017

我终于明白了，我在本地使用 python 2.5，我不得不像这样添加到执行中：

*   *   *   *   *   /usr/local/bin/python2.5 /home/username/startxmlrpc.py > /dev/null 2>&1

# .htaccess - 重写 URL 并永久重定向到新 URL

> ID：11862723
> 
> 赞同：0
> 
> 时间：2012-08-08T10:38:12.283
> 
> 标签：.htaccess, redirect, friendly-url

我刚刚花了 2 个小时浏览 Google 和 Stackoverflow 档案，看看我是否能找到我的问题的答案，而不是一无所获，我发现太多了！所以不幸的是，我不得不添加大量 301 重定向问题。对不起。并感谢您看一下这个；）

基本上，我有一个希望简化 URL 的博客。目前，URL 如下所示：

[http://tempertemper.net/post.php?s=2012-05-30-freeagent](http://tempertemper.net/post.php?s=2012-05-30-freeagent)

我希望它们看起来像这样：

[http://tempertemper.net/2012-05-30-freeagent](http://tempertemper.net/2012-05-30-freeagent)

我尝试将 RewriteRule /(.*)$ /post.php?s=$1 添加到我的 .htaccess 文件中，但它没有。

完整文件当前如下所示：

```
<ifModule mod_rewrite.c>

DirectoryIndex index.php index.html

ErrorDocument 404 http://tempertemper.net/error.php

RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.tempertemper\.net$
RewriteCond %{REQUEST_URI} !cron.php
RewriteRule ^(.*)$ http://tempertemper.net/$1 [R=301,L] 

</ifModule> 
```

我尝试在重定向 www 的规范化位之后添加它。到非 www.:

重写规则 ^([a-zA-Z0-9_-]+)$ post.php?s=$1

它有点工作。然后我可以链接到[http://tempertemper.net/2012-05-30-freeagent](http://tempertemper.net/2012-05-30-freeagent)但问题是，[http](http://tempertemper.net/post.php?s=2012-05-30-freeagent) ://tempertemper.net/post.php?s=2012-05-30-freeagent仍然存在。这很可能对 seo 不利，因为在搜索引擎看来，我想我会有重复的内容。我尝试将 [R=301] 放在新行的末尾，但它会停止新链接的工作。还尝试将 ,L 放在方括号中并将其从规范化命令中删除，但没有任何乐趣（L 是最后一个命令，不是吗……？）。

基本上，我毕竟在其中生成或生成了 post.php?s= 的所有 URL 都永久重定向到没有 post.php?s= 的 URL，因此进入这些页面的任何链接都已经被重定向，并且任何未来的链接将直接指向新外观的 URL。

希望这是有道理的……</p>

谢谢，

马丁:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:39:26.510

Apache 实际上修复了本地路径 => 正确的完全限定名称（我最初的假设），但我看到您的文件实际上检查了错误的文件。使用您提供的文件，我认为这将作为文件内容工作：

```
DirectoryIndex index.php index.html
ErrorDocument 404 http://tempertemper.net/error.php

RewriteEngine On
# don't redirect post.php to itself
RewriteCond %{REQUEST_URI} !post.php
# don't redirect error.php to post.php 
RewriteCond %{REQUEST_URI} !error.php
RewriteRule ^(.*)$ "/post.php?$1" [R=301,L] 
```

# java - JOGL 过剩文本不使用窗口和基元调整大小

> ID：11862729
> 
> 赞同：0
> 
> 时间：2012-08-08T10:38:23.407
> 
> 标签：java, opengl, glut, jogl

我目前正在通过使用我用来创建 2d/3d 图形的 JOGL 库（openGL 的 java 包装器）来探索 opengl。目前，我通过“glutBitmapString”方法呈现的文本有一点问题，它没有调整窗口的大小，如下面的屏幕截图所示。不幸的是，我得到的工作规范是这必须在 Java 中完成，所以我不能跳到任何其他具有更好支持的 openGL 版本的语言。

窗口中的所有其他内容都会正确调整大小，因此我假设问题出在我在下面发布的代码中，如果不是，那么我很乐意发布您认为与问题相关的代码。

![默认窗口大小](../Images/e5618a67e5eecc4a06bcc4eb24bb9e3a.png)

![调整大小的窗口](../Images/7f2fc0f8a2703779e7a2cd49fdfa6a63.png)

这是我用来呈现文本的代码片段

```
GL gl = drawable.getGL();
    GLUT glut = new GLUT();

    float textPosx = -0.4f;
    float textPosy = -2.1f;

    gl.glColor3f(1.0f, 0.0f, 0.0f);

    // Move to rastering position
    gl.glRasterPos2f(textPosx, textPosy);

    // convert text to bitmap and tell what string to put
    glut.glutBitmapString(GLUT.BITMAP_HELVETICA_12, "0");

    textPosx = 1.75f;
    textPosy = -2.15f;

    // Move to rastering position
    gl.glRasterPos2f(textPosx, textPosy);

    // convert text to bitmap and tell what string to put
    glut.glutBitmapString(GLUT.BITMAP_HELVETICA_18, "TIME");

    textPosx = -1.0f;
    textPosy = 1.0f;

    gl.glColor3f(0.0f, 1.0f, 0.0f);

    // Move to rastering position
    gl.glRasterPos2f(textPosx, textPosy);

    // convert text to bitmap and tell what string to put
    glut.glutBitmapString(GLUT.BITMAP_HELVETICA_18, "ERRORS"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:14:44.310

glutBitmapString 以 2D 形式绘制文本。2D 文本大小基于字体大小。因此，如果您将字体大小设置为 18（如本例中所示），那么无论您制作多大的窗口或放大多近，它都将是屏幕上的标准 18 pt 字体大小。这不是Java 问题。Java 实际上并没有绘制任何东西。一切都是由 OpenGL 原生库绘制的，这些库是用 C++ 编写的，因此在 C++ 中与在 Java 中完全相同。

有两种方法可以解决这个问题。一种是在放大或缩小时更改文本的字体大小。这会有点尴尬，而且可能很难做到正确。一个更好的选择，imo，将是简单地使用 3D 文本。在 JOGL 中，您使用 TextRenderer 对象来绘制 3D 文本。

在您的 init 方法中创建一个全局变量，如下所示：

```
textr = new TextRenderer(new Font("SansSerif", Font.PLAIN, 18)); 
```

显然，将字体设置更改为您喜欢的任何内容。然后在您的显示循环中：

```
textr.setColor(Color.GREEN);
textr.begin3DRendering();
textr.draw3D("ERRORS", xLocation, yLocation, zLocation, scale);
textr.end3DRendering(); 
```

就个人而言，我更喜欢使用大字体，然后将其缩小一些，这样，当你放大时，它不会像素化。

此外，与 2D 文本不同，3D 文本并不总是面向屏幕。您必须手动执行此操作。这取决于您的相机是如何设置的，但如果您使用基本旋转来移动相机，通常您可以取消 3D 文本对象上的这些旋转，使其面向相机。

对于 x、y 和 z 位置，它们是当前对象内的位置（局部坐标）。将 beginRendering() 到 endRendering() 视为具有自己的局部坐标系的一个对象。通常，我更喜欢在 0,0,0 局部坐标处绘制我的文本，然后将整个对象移动到适当的位置。这样旋转更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:20:02.397

您可以尝试使用 TextRenderer。工作正常。

# c# - SpecFlow：“步骤绑定仍在分析中。请稍候。”

> ID：11862735
> 
> 赞同：6
> 
> 时间：2012-08-08T10:38:58.867
> 
> 标签：c#, visual-studio, bdd, specflow

每当我右键单击场景并“生成步骤定义”或“转到步骤定义”时，我都会不断收到相同的消息。

我第一次尝试时它起作用了，但从那以后就没有了。

我已经提交了错误报告，但与此同时，有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-02-05T22:33:08.120

五年多后，我遇到了同样的问题......这是对我有用的解决方案：

1.  在 Visual Studio 中关闭解决方案。
2.  转到 Windows 资源管理器中的临时目录（在位置栏中输入 %temp%）。
3.  删除“specflow-blah-blah.cache”文件。
4.  在 Visual Studio 中重新加载解决方案，重新构建解决方案并给 SpecFlow 一些时间来自行解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T16:19:09.500

I've found a work around for this problem; close the solution and delete the .SOU file. Re-opening the solution then re-creates this file and the SpecFlow context menu options then work.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T10:43:47.503

ive gotten this issue before, we have about 800 SF tests in one of our projects and when we first load it can sometimes take quite a lot of time for it to load up. For me its always sorted itself out eventually.

Another thing to try would be to upgrade to 1.9 which came out a few days ago, it may have improved performance.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-23T08:20:38.310

虽然我使用的是最后一个（1.9.2），但我遇到了同样的问题。重新打开 VS2010 解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-13T03:32:53.140

当我将外部程序集从 app.config 移动到 specflow.json 文件时，我遇到了同样的问题

1）原来我得到了一个甚至没有specflow nugets的程序集参考。

2) 我重命名了一个程序集，但由于某些原因，旧名称没有在**AssemblyInfo.cs**文件中替换。我手动更改了它，清理了项目。清理了 specflow 缓存（请参阅以前的答案如何执行此操作）并且它有效。

因此，请检查所有引用和程序集名称是否正确。

干杯

PS不要忘记为specflow.json设置“复制到输出目录”选项：D

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-10T14:55:39.750

如果您仍然无法强制步骤绑定，但只需要*获取给*定步骤的定义：

1.  在场景的第一步放置断点
2.  调试测试
3.  步入函数（默认F11）
4.  你在这！VS 导航可能不起作用，但调试器知道方法:)

我知道这可能不是解决步骤不绑定的原始问题的直接解决方案，但我认为它到达了 OP 想要去的地方......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-08T08:32:00.290

我们这样修复它：

1.  关闭视觉工作室
2.  删除了项目下的`obj`和文件夹，`bin`
3.  再次打开 Visual Studio。
4.  重建

之后，`.feature`文件“恢复生机”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-12T16:00:53.070

此问题的根本原因是您的代码性能不佳，导致 Visual Studio 运行缓慢并挂起，或者由于代码性能低下，Visual Studio 处于无响应状态。

解决方案是提高代码的性能。您需要以所有可能的方式优化您的代码：

1.  在每个步骤中使用更少的输入
2.  在参数化方法中使用更少的参数
3.  避免不必要的循环
4.  如果取5个以上的参数，将数字参数分成更多的方法。它将提高性能。
5.  将输入值划分为更多的子步骤或单独的步骤，这将提高代码的性能和速度。
6.  如果有更多情况，请使用 switch case 而不是 if else 语句。
7.  如果引用变量或对象不再使用，则释放占用的内存。
8.  从外部源读取数据并将它们存储到本地对象或列表中，并最小化使其一次从外部源读取一次并访问在列表或任何其他对象/变量中本地复制的值。
9.  关闭或关闭外部文件或在使用后调用它们。

**希望这是提高代码性能的最佳方法，并且这个问题肯定不会发生，并且您的步骤绑定和定义将更加顺畅和容易。**

# c# - c#代码后面的确认消息框

> ID：11862736
> 
> 赞同：-5
> 
> 时间：2012-08-08T10:39:06.010
> 
> 标签：c#, asp.net, .net

> **可能重复：**
> [Web应用程序中的确认消息框](https://stackoverflow.com/questions/11861271/confirmation-message-box-in-webapplication)

我想在后面的代码中创建一个消息框。我的代码在这里。它没有显示任何消息框。请帮我这样做..

```
Button btn = new Button();
btn.OnClientClick = "return confirm('Your requested leave count exceeds the balance leave count.\n It may count as Loss of pay if your requeset approved by your head...\n \nAre you sure you wish to apply?');";
if (true)
{
  //Do something;
}
else
{
  //do something;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:41:48.333

返回的值将仅在客户端中可用 - 在 javascript 中 - 您确实应该在`ClientClick`事件上调用一个 javascript 函数，该函数将能够获取返回值并将其发送到您的服务器（可能使用 AJAX）。

# ios - iOS 游戏中心 - 如何将恶魔列表过滤给也安装了相同应用的朋友

> ID：11862739
> 
> 赞同：0
> 
> 时间：2012-08-08T10:39:15.013
> 
> 标签：ios, game-center

返回的 GKPlayer 似乎不包含任何信息。到目前为止，我在 GameKit 指南或 API 文档中也没有找到任何东西。我真的需要一个单独的服务器来跟踪这些信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:33:23.553

不幸的是，你不能用当前的 API 做到这一点。iOS 6 中的 API 差异列表也无助于解决这个问题。至于传递字符串，您可以在 GKMatch 或 GKTurnBasedMatch 会话期间传递字符串。

并讨论Game Center的用处：我认为您无法看到哪些朋友安装了您的游戏并不是什么大问题。这主要是因为当您尝试邀请 GC 朋友参加 GKMatch/GKTurnbasedMatch 时，无论如何都会发送邀请。如果应用程序未安装在用户手机上，则邀请会将用户引导至应用程序商店中您的应用程序页面 - 更好的销售。

# c++ - 通过引用传递空的或未初始化的 STL 容器

> ID：11862742
> 
> 赞同：0
> 
> 时间：2012-08-08T10:39:20.427
> 
> 标签：c++, stl

通过引用将空的或未初始化的 STL 容器传递给函数总是安全的吗？例如

```
void some_function(deque<string> &passed_by_ref) {

passed_by_ref.push_back("a string");

}

int main() {

deque<string> some_data;

some_function(some_data);

return 0;

} 
```

我对这种方法没有任何问题，但不确定是否可能存在任何 NULL 引用问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:40:52.767

是的，它总是安全的。`deque<T>`不是指针类型 - 它是对象类型。标准容器有一个默认构造函数，所以，在这个语句之后

```
deque<string> some_data; 
```

`some_data`是一个正确构造的空`deque`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:40:44.713

STL 容器具有默认构造函数，在这种情况下会调用它们：

```
deque<string> some_data; 
```

所以容器被初始化了，传递一个对它的引用是完全可以的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T10:42:23.363

线

```
 deque<string> some_data; 
```

确保`some_data`在调用构造函数时至少初始化变量。

因此，您只是传递对空 STL 容器的引用 - 这是安全的。

# bash - 以不敏感的方式在 bash 中查找路径

> ID：11862746
> 
> 赞同：0
> 
> 时间：2012-08-08T10:39:39.243
> 
> 标签：bash, path, find, case

假设像这样的路径

```
/home/albfan/Projects/InSaNEWEBproJECT 
```

尽管事实上不使用这样的名称。有没有办法以不敏感的方式检查路径？

我遇到了这个解决方案，但如果可能的话，我想找到一个内置或 gnu 程序。

```
function searchPathInsensitive {
 # Replace bar with comma (not valid directory character allowing parse dirs with spaces)
 #also remove first / if exist (if not this create a first empty element

 ORG="$1"
 if [ "${ORG:0:1}" = "/" ]
 then
  ORG="${ORG:1}"
 else
  ORG="${PWD:1}/$ORG"
 fi
 OLDIFS=$IF
 IFS=,
 for dir in ${ORG//\//,}
 do
  if [ -z $DIR ]
  then
   DIR="/$dir"
  else
   TMP_DIR="$DIR/$dir"
   DIR=$(/usr/bin/find $DIR -maxdepth 1 -ipath $TMP_DIR -print -quit)
   if [ -z $DIR ]
   then
    # If some of the path does not exist just copy the element
    # exit 1        
    DIR="$TMP_DIR"
   fi
  fi
 done
 IFS=$OLDIFS
 echo "$DIR"
} 
```

使用它只需：

```
 (searching on my home)
$ searchPathInsensitive projects/insanewebproject
/home/albfan/Projects/InSaNEWEBproJECT

(inside a project)
$ searchPathInsensitive src/main/java/org/package/webprotocolhttpwrapper.java
/home/albfan/Projects/InSaNEWEBproJECT/src/main/java/org/package/WebProtocolHTTPWrapper.java

$ searchPathInsensitive src/main/resources/logout.png
/home/albfan/Projects/InSaNEWEBproJECT/src/main/resources/LogOut.PNG 
```

我猜该解决方案与**find -ipath**有任何关系，因为我对该函数所做的只是搜索以不敏感方式给出的路径中的下一个元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:09:28.347

我的错！我想我试过了

```
find -ipath 'projects/insanewebproject' 
```

但这里的诀窍是我必须使用

```
find -ipath './projects/insanewebproject' 
```

那**./**做了改变。谢谢！。

男人说**-path**比**-wholename更便携**

如果您只期望一个结果，您可以添加 | head -n1，当它填充它的缓冲区时，导致这种方式 head 杀死管道，它只有一个行长

```
find -ipath './projects/insanewebproject'| head -n1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:45:19.203

最简单的解决方案：

```
$ find . | grep -qi /path/to/something[^/]*$ 
```

但是，如果您有一些必须检查匹配文件的附加条件，您可以在`grep`里面运行`find`：

```
$ find . -exec sh -c 'echo {} | grep -qi /path/to/something' \; -print 
```

在这里，您将获得目录中的所有文件。如果您只想获取目录的名称：

```
$ find . -exec sh -c 'echo {} | grep -qi /path/to/something[^/]*$' \; -print 
```

使用示例：

```
$ mkdir -p Projects/InSaNEWEBproJECT/src/main/resources/
$ find . -exec sh -c 'echo {} | grep -qi /projects/insanewebproject[^/]*$' \; -print
./Projects/InSaNEWEBproJECT 
```

# c++ - C++ 圆形对象/getArea()

> ID：11862749
> 
> 赞同：0
> 
> 时间：2012-08-08T10:39:45.397
> 
> 标签：c++, arrays, visual-studio-2010, geometry, area

我正在尝试编写一个程序

• 定义一个由五个圆形对象组成的数组，其中半径是使用随机类提供的随机数设置的，该随机类利用参数化的构造函数

• 定义第二个包含五个圆形对象的数组，其中半径是使用随机类提供的随机数设置的，该随机类使用 setRadius 方法

• 显示每个数组中每个圆的面积，使用`getArea()`

我需要帮助以使用 getArea() 方法显示每个数组中每个圆的面积的问题，我需要访问每个数组中具有五个圆的半径值的数组，然后计算出面积 3.14 * Radius * Radius . 然后将该区域显示到屏幕上。

同样在做了一些研究之后，我是否需要对我输入的 Circle 对象进行实例化`Circle myCircle;`。但是它带有一个错误说

> 1>main.obj : 错误 LNK2019: 函数 _main 中引用的未解析外部符号“public: __thiscall Circle::Circle(void)”(??0Circle@@QAE@XZ)

Circle.h 文件

```
#pragma once
#include <string>

class Circle 
{
private:
    float Radius;

public:
    Circle(); // initialised radius to 0
    Circle(float r); // accepts an argument and assign its value to the radius attribute
    void setRadius(float r); // sets radius to a value provided by its radius parameter (r)
    float getRadius(); // returns the radius of a circle
    float getArea(); // calculates and returns the areas of its circle
}; 
```

随机.h 文件

```
#pragma once
#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

class Random
{
public:
    static void initialiseSeed();
    // random number initialised
    // random number has been initialised to the current time.

    static int random(int lower, int upper);
    // this function will return a positive random number within a specific lower and 
    // upper boundary.
}; 
```

Main.cpp 文件

```
#include <iostream>
#include <cstdlib>
#include <ctime>
#include <cmath>
#include <iomanip>
using namespace std;

// Include header files
#include "Circle.h"
#include "Random.h"

int main()
{
    // Instantiate myCircle object
    //Circle myCircle;

    // Array 1
    // an array of five circles objects where radius is set using the random number
    // provided by the random class utilising the parameterised constructor

    int CircleArrayOne [5]; // store the numbers
    const int NUM = 5; // Display 5 random numbers

    srand(time(NULL)); // seed the generator

    // populate the array by calling the random function from the random class
    // within the lower and upper bounds

    for(int x = 0; x < NUM; ++x)
    {
        CircleArrayOne[x] = Random::random(1, 40); // assumed 0 and 40 as the bounds
    }

    // Below is the code I use to output the array to the screen to make sure
    // that is output the correct number of values and it generate number between 1 and 40
    // I am doing this to test the code above that populate the array within lower and upper
    // bounds

    cout << "Checking the radius in the Array 1." << endl;
    for(int i = 0; i < NUM; ++i) 
    {
        cout << CircleArrayOne[i] << endl;
    }

    // Array 2
    // a second array of five circles objects where radius is set using the random number 
    // provided by the random class utilising the setRadius method

    float CircleArrayTwo [5]; // store the numbers
    const int Number = 5; // Display 5 random numbers

    srand(time(NULL)); // seed the generator

    // populate the array with random numbers

    for(int i = 0; i < Number; ++i)
    {
        CircleArrayTwo[i] = rand()%100;
    }

    // Below is the code I use to output the array to the screen to make sure
    // that is output the correct number of values and it generate random values

    cout << "Checking the radius in the Array 2." << endl;
    for(int i = 0; i < Number; ++i)
    {
        cout << CircleArrayTwo[i] << endl;
    }

    // Display the area of each Circle within each array using getArea()

    cout << "\nThe area of each circle within array 1: " << endl;

    cout << "\nThe area of each circle within array 2: " << endl;

    // Display a message that indicates which set of circle has the largest 
    // combined area

    cout << "\nArray: " << "had the largest combined area." << endl;

    // Display a message that indicates which set contains the circle 
    // with the largest area

    cout << "\nArray: " << "contain the circle with the largest area.\n" << endl;

    system("PAUSE");
    return 0;
}

// Calling Circle(float r) from Circle Class
Circle::Circle(float r)
{
    if (r<=0)
    {
        cout << "An invalid radius has been detected." << endl;
        cout << "The radius has been set to 1.0" << endl;
        Radius = 1.0;
    }
    else
        Radius = r;
}

// Calling getArea() from Circle Class
float Circle::getArea()
{
    // Area = pi * radius * radius
    return 3.14 * Radius * Radius;
}

// Calling setRadius(float r) from Circle Class
void Circle::setRadius(float r)
{
    rand()%100;
    Radius = r;
}

// Calling getRadius() from Circle Class
float Circle::getRadius()
{
    return Radius;
}

// Calling random(int lower, int upper) from Random Class
int Random::random(int lower, int upper)
{
    int range = upper - lower + 1;
    return (rand() % range + lower);
}

// Calling initialiseSeed() from Random Class
void Random::initialiseSeed()
{
    srand((unsigned int)time(0));
    rand()%100;
} 
```

如何使用`getArea()`函数获取每个数组中每个圆的面积

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:44:03.600

您还没有为`Circle`的默认构造函数提供定义，请添加

```
Circle::Circle() : Radius(0) {} 
```

到 main.cpp。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:44:25.290

您需要定义`Circle`的默认构造函数：

```
Circle::Circle() : Radius() {} 
```

这也初始化`Radius`为`0.0F`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:43:47.520

您没有给出`Circle()`默认构造函数的定义（实现），而只给出了`Circle(float)`构造函数。一种可能性是：

```
Circle::Circle() : Radius(0) {} 
```

另请注意，当您在头文件中省略时，您不会收到此错误`Circle();`（因为这会阻止编译器为您添加默认构造函数）。

# ios - 自定义 UITableCell：为什么删除图标会出现在单元格视图的内容上？

> ID：11862751
> 
> 赞同：1
> 
> 时间：2012-08-08T10:39:56.430
> 
> 标签：ios, uitableview

我的表格视图中有自定义单元格。**当 uitable view 处于编辑模式时。圆形的删除图标出现在单元格的内容上。**

如何将内容向右移动，以便为那个红色圆形小按钮腾出位置。

在自定义单元格视图 layoutsubview 应该发生一些事情。**我应该调整单元格视图的哪个子视图？**

提前致谢

请看一下我当前的代码

```
- (void) layoutSubviews
 {
[super layoutSubviews];

CGFloat width = self.width - _productImage.right - 20.f;

if (self.accessoryView)
{
    width -= self.accessoryView.width;
}

_productName.width        = width;
_productDescription.width = width;
_productPrice.width       = width;

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationDuration:3.0f];

for (UIView *subview in self.subviews) {

    if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl"]) {
        CGRect newFrame = self.contentView.frame;
        self.contentView.frame = CGRectMake(40, self.contentView.frame.origin.y, newFrame.size.width, newFrame.size.height);
    }
    else if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellEditControl"]) {
        CGRect newFrame = self.contentView.frame;
        self.contentView.frame = CGRectMake(40, self.contentView.frame.origin.y, newFrame.size.width, newFrame.size.height);
    }
    else if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellReorderControl"]) {
        CGRect newFrame = self.contentView.frame;
        self.contentView.frame = CGRectMake(40, self.contentView.frame.origin.y, newFrame.size.width, newFrame.size.height);
    }
}
[UIView commitAnimations]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:44:37.957

您可以检查***[tableview.isEditing](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)***属性。

如果是*YES*，则将 cell.contentView 框架更新为*x-difference* ，否则使用默认值。

希望这是您所需要的。

享受编码:)

# matlab - 迭代字符串常量

> ID：11862756
> 
> 赞同：2
> 
> 时间：2012-08-08T10:40:15.593
> 
> 标签：matlab

我已经预定义了一组字符串常量。对于他们每个人，我想写图形。所以我想做这样的事情：

```
stocks = ['MSFT', 'INTC', 'GOOG']; // incorrect in matlab
for stock = stocks
    ...
    figure;
    plotyy(....
    title(stock)
end 
```

问题是如何声明这样的字符串数组以及如何迭代它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T10:55:57.563

这样做：

```
stocks = {'MSFT', 'INTC', 'GOOG'}; 
for stock = stocks
    ...
    figure;
    plotyy(....
    title(stock{1})
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T10:54:20.683

在 Matlab 中称为单元格。只需将 [] 替换为 {}

也可以使用 curled 进行访问。

# algorithm - 是否可以使用 Baum-Welch 算法估计（隐藏）状态的初始分布？

> ID：11862766
> 
> 赞同：0
> 
> 时间：2012-08-08T10:40:45.423
> 
> 标签：algorithm, statistics, numeric

我已经实现了 Baum-Welch 算法，并且正在使用一些玩具数据，这些数据是用已知分布生成的。数据呈正态分布，根据隐藏状态具有不同的均值和标准差。有2个状态。除了隐藏状态的初始分布之外，该算法似乎对大多数参数都收敛，根据随机数据，隐藏状态总是收敛到 (0; 1) 或 (1; 0)。

这个算法正常吗？如果是这样，我将不胜感激一些参考，如果不是一些提示如何找到错误。

代码 (F#)。首先是一个辅助模块：

```
module MyMath

let sqr (x:float) = x*x

let inline (./) (array:float[]) (d:float) =
  Array.map (fun x -> x/d) array

let inline (.*) (array:float[]) (d:float) =
  Array.map (fun x -> x*d) array

let map f s =
  s |> Seq.map f |> Seq.toArray

let normalize v = 
  let sum = Seq.sum v
  map (fun x -> x/sum) v

let row i array = seq { for j in 0 .. (Array2D.length2 array)-1 do yield array.[i,j]}
let column j array = seq { for i in 0 .. (Array2D.length1 array)-1 do yield array.[i,j]}

let sum (v:float[]) = v |> Array.sum
let sumTo N (f:int->float) = Seq.init N f |> Seq.sum
let sum_column j (array:float[,]) = column j array |> Seq.sum
let sum_row i (array:float[,]) = row i array |> Seq.sum

let mean data = (sum data)/(float (Array.length data))
let var data = 
    let m=mean data
    let N=Array.length data
    let sum=Seq.sumBy (fun x -> sqr(x)) data
    sum/(float N)

let induction start T nextRow =
  let result =  Array.zeroCreate T
  result.[0] <- start
  for t=1 to T-1 do
    result.[t] <- nextRow t result.[t-1]
  result

let backInduction last T previousRow =
  let result =  Array.zeroCreate T
  result.[T-1] <- last
  for t=T-2 downto 0 do
    result.[t] <- previousRow t result.[t+1]
  result

let inductionNormalized start T nextRow =
  let result =  Array.zeroCreate T
  let norm = Array.zeroCreate T
  norm.[0] <- sum start
  result.[0] <- start./norm.[0]
  for t=1 to T-1 do
    result.[t] <- nextRow t result.[t-1]
    norm.[t] <- sum result.[t]
    result.[t] <- result.[t]./norm.[t]
  (result, norm) 
```

主要模块：

```
module BaumWelch

open System
open MyMath

let mu (theta : float[,]) q = theta.[q,0]
let sigma (theta : float[,]) q = theta.[q,1]

let likelihood getDrift getVol dt parameters state observation  =
    let mu = getDrift parameters state
    let sigma =  Math.Abs (getVol parameters state:float)
    let sqrt_dt = Math.Sqrt dt
    let residueSquared = 
        let r = Likelihood.normalizedResidue mu sigma dt sqrt_dt observation in r*r
    let result = (Math.Exp (-0.5*residueSquared))/(sigma * (Math.Sqrt (2.0*Math.PI*dt)))
    if result<0.0 then failwith "Negative density, it certainly shouldn't have happened"
    else result

let alphaBeta b (initialPi:float[]) initialA observations= //notation in comments from the Erratum for Rabiner
    let T = Array.length observations
    let N = Array2D.length1 initialA
    let alphaStart = Array.init N (fun i -> initialPi.[i] * (b i observations.[0]))  //this contains \bar{\alpha}
    let alpha_j_t (previousRow:float[]) t j  = (sumTo N (fun i -> previousRow.[i]*initialA.[i, j]))* (b j observations.[t]) //this contains \bar{\alpha}
    let alphaInductionStep t previousRow = Array.init N (alpha_j_t previousRow t)
    let (alpha, norm) = inductionNormalized alphaStart T alphaInductionStep
    let betaStart = Array.init N (fun i -> 1.0/norm.[T-1])
    let beta_j_t (nextRow:float[]) t j = (sumTo N (fun i -> initialA.[j, i]*nextRow.[i]*(b i observations.[t+1])))/norm.[t]
    let betaInductionStep t nextRow = Array.init N (beta_j_t nextRow t)
    let beta = backInduction betaStart T betaInductionStep
    (alpha, beta, norm) //c_t = 1/norm_t

let log_P_O norm = 
  let result = norm |> Seq.sumBy (fun norm_t -> Math.Log norm_t)//c_t = 1/norm_t
  if Double.IsNaN result then failwith "log likelihood is NaN"
  else result

let gamma (alpha:float[][], beta:float[][], norm:float[])  i t = 
    alpha.[t].[i]*beta.[t].[i]*norm.[t]

let xi b (initialA:float[,]) (alpha:float[][]) (beta:float[][]) (observations:float[]) i j t = 
    alpha.[t].[i]*initialA.[i,j]*(b j observations.[t+1])*beta.[t+1].[j]

let oneStep llFunction dt (initialPi, initialA, initialTheta) observations =
  let T = Array.length observations
  let N = Array2D.length1 initialA
  let b = llFunction dt initialTheta
  let (alpha, beta, norm) = alphaBeta b initialPi initialA observations
  let gamma = gamma (alpha, beta, norm)
  let xi = xi b initialA alpha beta observations
  let pi = Array.init N (fun i -> gamma i 0) //Rabiner (40a)
  let A =  //Rabiner (40b)
    let A_func i j = (sumTo (T-1) (xi i j))/(sumTo (T-1) (gamma i))
    Array2D.init N N A_func
  let mean i = (sumTo T (fun t -> (gamma i t) * observations.[t]))/(sumTo T (gamma i))//Rabiner (53)
  let var i = 
    let numerator = sumTo T (fun t -> (gamma i t) * (sqr (observations.[t]-(mean i))))
    let denumerator = sumTo T (gamma i)
    numerator/denumerator
  let mu i = ((mean i) + 0.5*(var i))/dt
  let sigma i = Math.Sqrt ((var i)/dt)
  let theta = Array2D.init N 2 (fun i k -> if k=0 then mu i else sigma i) 
  let logLikelihood = log_P_O norm //Rabiner (103)
  (logLikelihood, (pi, A, theta))

let print (ll, (pi, A, theta)) = 
  printfn "pi = %A" pi
  printfn "A = %A" A
  printfn "theta = %A" theta
  printfn "logLikelihood = %f" ll

let baumWelch likelihood dt initialParams observations =
  let tolerance = 10e-5
  let rec doStep parameters previousLL =
    //print (previousLL, parameters)
    let (logLikelihood, parameters) = oneStep likelihood dt parameters observations
    if Math.Abs(previousLL - logLikelihood) < tolerance then (logLikelihood, parameters)
    else doStep parameters logLikelihood
  doStep initialParams -10e100 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:37:34.027

我没有尝试通过 F# 猜测我的方式，但这里有一些观察：

1）你有多少初始状态的观察？如果答案是“只有一个”，那么观察的概率可以写成 P(state 0) P(obs | state is 0) + P(state 1) P(obs | state 1)。根据两个 P(obs | state is X) 中的哪一个更高，最大似然解将具有 P(state 0) = 1 或 P(state 1) = 1。我只希望看到中间概率当您可能正在观察从许多不同的初始状态派生的观察结果时的初始状态 - 例如，如果您有多个玩具数据要同时分析。

2）在寻找错误时，它可以帮助生成答案完全显而易见的玩具数据。如果我有 n 条 {0, 0, 0, 0...} 形式的数据和 m 条 {1, 1, 1, 1...} 形式的数据，我可能希望看到分配的状态 0初始概率 n/(m +n) - 或者当然是 m/(n + m)，因为程序不知道我希望与哪个序列关联哪个状态。

3) 检查程序的另一种方法是寻找某种一致性或保护性检查。由于两个初始状态的模型可以与只有一个初始状态的模型相同，第一次观察的一组特殊转换概率，可能还有一个特殊的虚拟第一次观察，你可以检查它在两个初始状态下的行为它的行为只有一个初始状态和一些捏造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T09:13:44.457

我的猜测是，仅使用一个观察序列几乎总是会导致概率收敛到 0/1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:15:16.087

经过一段时间的思考，我认为我描述的行为实际上可能是正确的。原因是在观察到的数据中，这个分布只“使用”了一次，所以直观上没有足够的统计数据来推断分布。话虽如此，我认为算法应该能够（以合理的准确度）恢复隐藏状态变量在时间 0 的实际值——因为这对整个时间序列产生了影响。

# rest - 海边 Smalltalk 中的 REST 服务

> ID：11862769
> 
> 赞同：3
> 
> 时间：2012-08-08T10:40:54.450
> 
> 标签：rest, smalltalk, pharo, seaside, gemstone

我在Pharo有以下课程

```
WARestfulHandler subclass: #PgUserAddHandler
instanceVariableNames:  ' employeeId'
classVariableNames: ''
poolDictionaries: ''
category: 'abc-Model' 
```

我想实现一个呈现 WAComponent 类页面的函数，如下所示，从上面的类中。

```
searchFor: aString
<get>
<path: '/userAdd?add={aString}'>
self render: (PgEmployeeRegisterComponent new) employeeId:aString. 
```

请帮忙 ！！

提前致谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:38:34.623

将最后一行替换为：

```
^ WAHtmlCanvas builder render: WACounter new 
```

返回渲染数据的`WAHtmlCanvas builder render:`字符串。为了获得更大的灵活性，您还可以传入一个块，就像任何画笔一样：

```
^ WAHtmlCanvas builder render: [ :html |
    html heading level: 1; with: 'Counter'.
    html div 
        class: 'counter';
        with: WACounter new ] 
```

请注意，将为每个请求创建一个新的组件实例。不会自动保留任何状态，并且回调不能开箱即用。

# php - 使用 php 创建页面以显示 MySQL 查询

> ID：11862772
> 
> 赞同：0
> 
> 时间：2012-08-08T10:41:03.480
> 
> 标签：php, mysql

如果这不清楚我想要什么，我深表歉意，但我会尽力而为。

我目前是一名 IT 学徒，并被要求创建一个投诉数据库。我决定创建一个表格并将数据回显到一个表格中，以便快速汇总收到的投诉，

```
<table border='1'>
<tr>
<th>CAN No</th>
<th>Contract No</th>
<th>Customer</th>
<th>Supplier</th>
<th>Date filed</th>
<th>Raised by</th>
<th>Details</th>
<th></th>
<th></th>
<th></th>
</tr>

<?php while ($db_field = mysql_fetch_assoc($result)) { ?>
<tr>
<td><? print $db_field['can_no'] ?></td>
<td><? print $db_field['contract_no'] ?></td>
<td><? print $db_field['customer'] ?></td>
<td><? print $db_field['supplier'] ?></td>
<td><? print $db_field['datemade'] ?></td>
<td><? print $db_field['raised_by'] ?></td>
<td><? print $db_field['details'] ?></td>
<td> View » </td>
<td> Edit » </td>
<td> Delete [x] </td>
</tr> 
```

因此，这只是创建了收到的投诉的快速摘要。（我会在某个时候添加一个搜索功能）。我现在要添加的是一种以我喜欢的格式而不是表格来查看整个投诉的方法。例如，我单击查看其中一个的视图，它需要我 www.website.com/complaints?id=1，这将在一个完全不同的页面上显示完整的投诉。

另外，如何让编辑按钮显示已填充数据的同一页面，以便快速编辑？

对不起，如果我没有很好地解释它:(

编辑：我发现了如何做我想做的事情并让它完美地工作。我创建了投诉.php 并使用了 $_GET['id']，然后使用了 SELECT * FROM 投诉 WHERE id = '$id'。

感谢所有帮助过的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:47:56.893

> **警告：**
> 
> 请不要使用`mysql_*`函数来编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。看到[**红框**](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？
> 
> 相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)应该提供一些有关决定使用哪个 API 的详细信息。对于 PDO，这里有一个[很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

首先，您应该阅读有关[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)的更多信息，因为这是一种非常**不安全**的方法。

对于*查看*部分，您可以设置不同的页面来查看个人投诉，并将文本修改为`<a href="view_complaint.php?id= <?php print $db_field['id']; ?>">View</a>`。（我假设您的数据库设置在`id`此处包含一个字段。

```
$result = mysql_query("SELECT * FROM complaints WHERE complaint_id = $id");
$row = mysql_fetch_assoc($result); 
```

现在您有了一个`$row`数组，其中包含可以以您想要的 HTML 格式输出的相同字段。不需要`while`构造，因为我们只有一行。

`www.website.com/complaints?id=1`有点狡猾，因为这不是一个正确的 URL。您要么使用[漂亮的 URL](https://stackoverflow.com/search?q=nice+url)来设置`website.com/complaints/1`，要么使用网站根目录中的 PHP 文件：`website.com/complaints.php?id=1`.

对于版本和删除，如果您不想为该版本重新加载页面，[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)就是您所需要的。这将帮助您设置浏览器不需要重新加载页面来修改内容的方法。为此，您需要了解 JavaScript，并且在此之前，还要熟悉更深层次的 PHP 并**保护您现有的代码**。

对于非异步部分。`?id=1`您可以通过在其请求中传递相同的参数来创建一个处理版本的页面。该站点应`<input>`在表单中包含与数据库中的字段一样多的字段。每个`<input>`字段都有一个`value="foobar"`设置其默认值的属性。就像您现在将内容打印到表格中一样，您可以将其放在页面加载到表单中，您可以在其中根据需要对其进行编辑。发送表单时，您将使用`UPDATE table SET field1=value1, field2=value2 WHERE id = $id`查询来更新您的数据库。

我只能建议你首先让你的系统能够处理编辑和删除，即使它需要调用单独的页面和来自客户端的额外请求，然后继续使用异步方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:56:46.860

在谷歌上查看这个

*   如何传递 id 并通过查询字符串获取它
*   如何从数据库中预填充数据

这两个应该可以帮助你

你的观点应该是 `echo('<a href="www.website.com/complaints?id=' . $db_field['details'] . '">View</a>');`

帮助：$_GET、$_POST

```
$id = (int)$_GET['complaint_id'];  // Where id MUST be an integer
$sql = "SELECT * FROM Complaint WHERE complaint_id = $id";
execute your query 
```

这可能是一个糟糕的代码，但只是为了解释。

另请阅读有关 [SQL 注入的信息](http://en.wikipedia.org/wiki/SQL_injection)

# php - PHP中何时转义文本的标准是什么？

> ID：11862777
> 
> 赞同：0
> 
> 时间：2012-08-08T10:41:18.880
> 
> 标签：php, coding-style, escaping, standards

我有一个用户输入字段，它将存储在 MySQL 数据库中的“tinytext”字段中；很标准的东西。我想知道在使用 php 函数转义 html 特殊字符时是否需要遵守某种标准或最佳实践`htmlentities()`？

我应该`htmlentities()`在将数据存储到数据库之前使用，还是应该在每次从网站输出数据时对数据运行该函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:43:47.753

通常没有理由再使用`htmlentities()`了。只需将所有内容存储在 UTF-8 字段中，并始终坚持[UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)。

将不安全的用户输入输出为 HTML 时`htmlspecialchars()`，最好在输出时使用 , 以便您拥有原始数据的副本。

# tomcat - 使用 Maven3 Eclipse 7 Tomcat 7 出现 404 错误的 WebServlet

> ID：11862783
> 
> 赞同：0
> 
> 时间：2012-08-08T10:41:32.530
> 
> 标签：tomcat, maven, servlets, tomcat7

我的项目名为“A”，我的班级是：

`@WebServlet(urlPatterns={"/test/*"}) public class RequestHandler extends HttpServlet {`

Maven插件：

```
<plugin>
      <groupId>org.apache.tomcat.maven</groupId>
      <artifactId>tomcat7-maven-plugin</artifactId>
      </plugin> 
```

在 src/main/webapp/WEB-INF/web.xml 我有

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0"/> 
```

Tomcat7 在运行 tomcat7:run 时是这样启动的：

```
Running war on http://localhost:8080/A 
```

...

> 2012 年 8 月 8 日下午 12:28:08 org.apache.coyote.AbstractProtocol 初始化信息：初始化 ProtocolHandler [“http-bio-8080”] 2012 年 8 月 8 日下午 12:28:08 org.apache.catalina.core.StandardService startInternal 信息：启动服务 Tomcat 2012 年 8 月 8 日 12:28:08 PM org.apache.catalina.core.StandardEngine startInternal 信息：启动 Servlet 引擎：Apache Tomcat/7.0.25 2012 年 8 月 8 日 12:28:08 PM org. apache.catalina.startup.ContextConfig getDefaultWebXmlFragment 信息：找不到全局 web.xml 2012 年 8 月 8 日下午 12:28:09 org.apache.coyote.AbstractProtocol 开始信息：正在启动 ProtocolHandler ["http-bio-8080"]

当我去`http://localhost:8080/A`或者`http://localhost:8080/A/test`我从 Tomcat7 得到一个 404

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:39:15.233

删除 web.xml 文件。

使用以下命令配置您的 pom.xml：

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.0-SNAPSHOT</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
            </plugin>
        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <configuration>
                <port>8080</port>
                <path>/</path>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>org.apache.tomcat.embed</groupId>
                    <artifactId>tomcat-embed-core</artifactId>
                    <version>7.0.29</version>
                </dependency>
            </dependencies>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
                <showDeprecation>true</showDeprecation>
                <showWarnings>true</showWarnings>
                <fork>true</fork>
            </configuration>
        </plugin>
    </plugins>
</build>
<pluginRepositories>
    <pluginRepository>
        <id>apache.snapshots</id>
        <name>Apache Snapshots</name>
        <url>http://repository.apache.org/content/groups/snapshots-group/</url>
    </pluginRepository>
</pluginRepositories> 
```

# javascript - 选择多选选项限制最多 2 个

> ID：11862787
> 
> 赞同：3
> 
> 时间：2012-08-08T10:41:39.580
> 
> 标签：javascript, html, multi-select

我正在对不同的主题使用多选我想将选择限制为 2 并在用户取消选择时以相同的方式禁用其他选项，同样该选项必须可供用户使用。

```
<select multiple="multiple" class="subjects" name="subjects[]" style="float:left;width:205px;" size="5">
  <option value='1'>subject1</option>
  <option value='2'>subject2</option>
  <option value='3'>subject3</option>
  <option value='3'>subject3</option>
</select> 
```

到目前为止，我已经实现仅取消选择在 2 之后选择的最后一个选项，代码如下

```
 /**
     * Make sure the subject's limit is 2
     */
    $(".subjects option").click(function(e){

        if ($(this).parent().val().length > 2) {
            $(this).removeAttr("selected");
        }
    }); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-08T16:04:37.900

改进的 jQuery 示例，注意 (else enable) 选项，这修复了先前示例中永久禁用选择选项的错误。还删除了“请仅选择两个选项”。尽可能的错误消息。 [http://jsfiddle.net/c9CkG/25/](http://jsfiddle.net/c9CkG/25/)

```
jQuery(document).ready(function () {

jQuery("select").on("change", function(){
  var msg = $("#msg");

  var count = 0;

  for (var i = 0; i < this.options.length; i++)
  {
    var option = this.options[i];

    option.selected ? count++ : null;

    if (count > 2)
    {
        option.selected = false;
        option.disabled = true;
        msg.html("Please select only two options.");
    }else{
        option.disabled = false;
        msg.html("");
    }
  }
}); 
```

});

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T11:11:21.860

作为对 RobG 答案的改进，如果计数 > 2，您可以取消选择一个选项。

有关使用 jQuery 的工作示例，请参阅：http: [//jsfiddle.net/c9CkG/3/](http://jsfiddle.net/c9CkG/3/)。

```
function checkSelected(el) {
  var msgEl = document.getElementById('msg');
  var count = 0;

  for (var i=0, iLen=el.options.length; i<iLen; i++)

      el.options[i].selected? count++ : null;

      // Deselect the option.
      if (count > 2) {
          el.options[i].selected = false;
          el.options[i].disabled = true;

          msgEl.innerHTML = 'Please select only two options';
      }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T11:00:54.417

像下面这样的东西可以完成这项工作：

```
function checkSelected(el) {
  var msgEl = document.getElementById('msg');
  var count = 0;

  for (var i=0, iLen=el.options.length; i<iLen; i++)
      el.options[i].selected? count++ : null;

  msgEl.innerHTML = count > 2? 'Please select only two options' : '';
}
</script>

<span>Please select a maximum of two options:</span>
<select multiple onchange="checkSelected(this);">
  <option>0
  <option>1
  <option>2
  <option>3
</select>
<br>
<span id="msg"></span> 
```

我认为禁用选项不是一个好主意，您只关心在提交表单时只选择了两个。在那之前，没关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-17T06:11:21.513

```
$(document).ready(function() {

  var last_valid_selection = null;

  $('#testbox').change(function(event) {
    if ($(this).val().length > 5) {
      alert('You can only choose 5!');
      $(this).val(last_valid_selection);
    } else {
      last_valid_selection = $(this).val();
    }
  });
}); 
```

# java - 如何检查设备是否具有给定的功能？

> ID：11862798
> 
> 赞同：2
> 
> 时间：2012-08-08T10:41:56.923
> 
> 标签：java, javascript, android, capability

我正在构建一个 webapp，并尝试找出 android 设备具有哪些功能。

我可以在其中查找“功能”或“功能”注册表吗？举个例子：假设我需要知道设备是否具有电话功能或相机功能。是否有一个集中的密钥库，我可以在其中检查这些常量？

我正在尝试创建的内容与此相符：

```
public String HasCapability(String key) {
    return some.mystical.namespace.Capabilities.ContainsKey(key);
} 
```

我对此有点陌生（我是 C# 人），所以请原谅我的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:47:20.840

您可以使用

```
PackageManager pm = context.getPackageManager();

if (pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
} 
```

更多细节

[检查设备是否有摄像头？](https://stackoverflow.com/questions/1944117/check-if-device-has-a-camera)

# iphone - Reachability 的reachabilityWithAddress 不起作用

> ID：11862799
> 
> 赞同：-1
> 
> 时间：2012-08-08T10:41:57.510
> 
> 标签：iphone, ios, reachability

> **可能重复：**
> [iPhone SDKreachabilityWithAddress 问题](https://stackoverflow.com/questions/4070754/iphone-sdk-reachabilitywithaddress-issue)

我正在尝试确定 iphone 是否可以使用以下代码连接到特定的 IP 地址（简单 ping）：

```
struct sockaddr_in server_address;   
server_address.sin_len = sizeof(server_address);
server_address.sin_family = AF_INET;
server_address.sin_port = htons(8888);
server_address.sin_addr.s_addr = inet_addr("192.168.105.44"); // ip address of a server on LAN
Reachability *r = [[Reachability reachabilityWithAddress:&server_address ] retain];
NetworkStatus internetStatus = [r currentReachabilityStatus]; 
```

但它总是说状态是“可达”，不管我在 IP 地址中提供什么。我做错什么了吗？为什么这行不通？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:50:02.467

相同的行为

```
 + (Reachability*) reachabilityWithHostName: (NSString*) hostName; 
```

可达性将始终返回 TRUE，无论您的 HTTP 返回代码是 200 还是 404。如果您不能使用 Prince 发布的链接建议的解决方案，您可以

1.  检查您的互联网可达性
2.  触发基于计时器的 HTTPRequest 并检查返回码

或检查[NetReachability](http://code.google.com/p/polkit/source/browse/trunk/Apple-Networking/NetReachability.m?r=141)。

不知道它是否对您有帮助，因为它使用相同的框架，我没有时间自己测试它。

# android - 加速度计不工作

> ID：11862802
> 
> 赞同：0
> 
> 时间：2012-08-08T10:42:01.297
> 
> 标签：android, accelerometer

我是安卓新手。当我的手机晃动时，我想播放音频文件。我知道加速代码。但是当我编写媒体播放器代码时，我没有从我的设备中获得任何输出。

```
public void onSensorChanged(SensorEvent event) {
        // TODO Auto-generated method stub
        if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
            getAccelerometer(event);

            MediaPlayer mPlayer1 = MediaPlayer.create(null, R.raw.hello);

            try {
                mPlayer1.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            mPlayer1.start();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:51:56.300

使用下面的类作为摇动监听器，

```
import java.util.List;

import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;

public class ShakeListener implements SensorEventListener{

        private MyShakeListener mOnShakeListener = null;  
        private SensorManager mSensorManager;
        private double mTotalForcePrev;
        private double mForceThreshHold = 1.5f;

        private List<Sensor> mSensors;
        private Sensor mAccelerationSensor;

        public ShakeListener(SensorManager sm){
                mSensorManager = sm;

        mSensors = mSensorManager.getSensorList(Sensor.TYPE_ACCELEROMETER);
        if(mSensors.size() > 0) {
                mAccelerationSensor = mSensors.get(0);
                mSensorManager.registerListener(this, mAccelerationSensor, SensorManager.SENSOR_DELAY_GAME);
        }

        }

        public void setForceThreshHold(double threshhold){
                mForceThreshHold = threshhold;
        }
        public double getForceThreshHold(){
                return mForceThreshHold;
        }

        public void onAccuracyChanged(Sensor sensor, int accuracy) {}

    public void onSensorChanged(SensorEvent event) {    
          double totalForce = 0.0f;
          totalForce += Math.pow(event.values[0]/SensorManager.GRAVITY_EARTH, 2.0);
          totalForce += Math.pow(event.values[1]/SensorManager.GRAVITY_EARTH, 2.0);
          totalForce += Math.pow(event.values[2]/SensorManager.GRAVITY_EARTH, 2.0);
          totalForce = Math.sqrt(totalForce);

          if((totalForce < mForceThreshHold) && (mTotalForcePrev > mForceThreshHold)) {
                  OnShake();
          }

          mTotalForcePrev = totalForce;
    }

    public void setOnShakeListener(MyShakeListener listener) 
    {
        mOnShakeListener = listener;
    }  

    private void OnShake()
    {  
        if(mOnShakeListener!=null) 
        {  
                mOnShakeListener.onShake();  
        }  
    }  

}

public interface MyShakeListener {  
    public abstract void onShake();  
} 
```

并像这样在你的主类上添加 lisener 类，

```
public class MainActivity extends Activity
{

MediaPlayer defaultPlayer;
@Override
    public void onCreate(Bundle bundle)
    {
        super.onCreate(bundle);
        setContentView(R.layout.playerscree);
          ShakeListener myShake = new           ShakeListener((SensorManager)getSystemService(Context.SENSOR_SERVICE));
            myShake.setForceThreshHold(1.9);

            myShake.setOnShakeListener(new MyShakeListener()
            {
                @Override
                public void onShake() 
                {
               // do ur work here...
                  defaultPlayer= MediaPlayer.create(getApplicationContext(), R.raw.music);
                  defaultPlayer.start();
                }
            });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:53:20.987

您应该提供一段`Context`时间来创建一个`MediaPlayer`. 例如

```
MediaPlayer.create(getApplicationContext(), R.raw.hello); 
```

此外，建议事先创建一个 MediaPlayer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:01:06.520

像这样修改你的代码。希望这有效。

```
MediaPlayer mPlayer1 = MediaPlayer.create(null, R.raw.hello); 
```

进入

```
MediaPlayer mPlayer1 = MediaPlayer.create(getApplicationContext(), R.raw.hello); 
```

# mysql - 是否可以在工作台中编辑查询结果？

> ID：11862803
> 
> 赞同：4
> 
> 时间：2012-08-08T10:42:17.443
> 
> 标签：mysql

我需要删除查询结果中的一些记录。但是查询结果被标记为`Read Only`。即使我查询主键。问题是我的数据库太大（不多，150 万条记录），我无法右键单击表并选择`Edit table data`，因为我得到错误号。2008：`mysql client ran out of memory`我无法解决（不过，我的电脑有 8 GB RAM）。我的数据库加载在本地主机中，因此客户端是服务器。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:19:00.690

MySQL Workbench 默认设置为安全模式（他们称之为“安全更新”模式），这意味着在未明确定义带有（主）键或 LIMIT 参数的 WHERE 子句之前，无法更新或删除 SQL 编辑器中的行：

所以查询：

```
DELETE FROM table WHERE name='xyz' 
```

在您使用 PK 定义 WHERE 之前，将无法工作（不会真正删除行）：

```
DELETE FROM table WHERE id=100 
```

或者

```
DELETE FROM table WHERE name='xyz' LIMIT 1 
```

要在 Workbench 中禁用安全模式，请进入 Edit->Preferences->SQL Editor 选项卡并取消选中“Safe updates”复选框。但那时要小心！:-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T11:15:57.430

编辑大表：

您可以右键单击***“Send to SQL Editor -> SELECT All Statement”***。

然后在运行之前，添加一个`LIMIT 100`或者`SELECT`一个`WHERE`条件来过滤返回的行。

您还可以转到***“Preferences -> SQL Editor”***并标记***“Limit Rows”***复选框。如果将其设置为 1000，则“编辑表”命令将获取前 1000 行。然后，您可以通过单击“从数据源获取下一帧记录”按钮移动到下一个“页面”。

* * *

你的另一个问题：

并不总是可以编辑结果集。如果它涉及`GROUP BY`或来自多个表的数据，则结果集可能是只读的。在这种情况下，您可以编写一个`DELETE`or`UPDATE`语句来为您执行删除或更新。

# php - 定时器计数器，使用JS从cilent获取当前时间

> ID：11862804
> 
> 赞同：0
> 
> 时间：2012-08-08T10:42:21.980
> 
> 标签：php, javascript, mysql

我的网站有问题。我用 php 代码和 JS 创建了一个倒数计时器。

我的问题是当我回显我的变量 abc 时。没关系（回显正确的时间戳）但是当我通过使用“数据库的结束时间 - 服务器当前时间 + 客户端时间”找到真正的结束时间时，然后回显它。结果只是“数据库的结束时间-服务器当前时间”我该如何解决这个问题？

JS

```
 </script>  
<script type="text/javascript">
var get_client_time = Math.round(new Date().getTime()/1000);

<?php $abc = "<script>document.write(get_client_time)</script>"?>   
</script> 
```

PHP 代码

```
 echo $abc . "</br>";
  $show=mysql_query("SELECT * FROM `room_lists` WHERE `active` = 1");
    while ($array = mysql_fetch_array($show))
    {
        $room_number = $array['room_number'];
        $room_name = $array['room_name'];
        $subject = $array['subject'];
        $s_group = $array['s_group'];
        $active = $array['active'];

        $timeStop = $array['timeStop'];

        //find real ending time
        $endDay = $abc + strtotime($timeStop)-strtotime(date('Y-m-d H:i:s'));
        echo $endDay;
        die();
       ......} //blah blah blah code 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:51:55.877

1) 您可以使用 TheTime.js 更好地处理 JavaScript 中的 Date 对象

文档：[https ://github.com/the-teacher/TheTime.js](https://github.com/the-teacher/TheTime.js)

来源：[https ://github.com/the-teacher/TheTime.js/blob/master/js/the_time.js](https://github.com/the-teacher/TheTime.js/blob/master/js/the_time.js)

```
(new Moment).unix 
```

例如

```
<script>document.write( (new Moment).unix );</script> 
```

2）并尝试用mysql更改时区

[http://dev.mysql.com/doc/refman/5.1/en/time-zone-support.html](http://dev.mysql.com/doc/refman/5.1/en/time-zone-support.html)

```
mysql_query("SET time_zone = SOMETIMEZONE"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:52:25.687

遗憾的是，您不能像这样将 PHP 与 Javascript 混合使用。实现这一目标的唯一方法是使用 ajax，使用一些流行的库[jQuery](http://www.jquery.com)。

第一种方法是使用客户端进入页面后立即提交的背景，例如：

```
<html><head><title>Please wait ...</title></head><body>
<form method="post" action="nextpage.php" id="continue" name="continue">
    <input type="hidden" name="client_time" id="client_time" value="" />
</form>

<script type="text/javascript">
    document.getElementById('client_time').value = Math.round(new Date().getTime()/1000);
    document.continue.submit();
</script>
</body></html> 
```

这样，您将在下一页获得`client_time`包含客户时间的 post 变量。

第二种方法是使用 ajax 并在同一页面上发送和接收数据：[$.post](http://api.jquery.com/jQuery.post/)

[编辑] 两种方法都不可靠。因此，基于客户端 PC 或浏览器，您永远无法完成出色的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:55:46.270

就我个人而言，我不会相信客户的时间/日期来进行这些计算。只需依靠服务器的时间/日期。至少你对此有一定的控制权。至于客户端上的倒计时，请根据服务器认为的时间和客户端认为的时间计算增量 - 并将其仅用于倒计时。要实现这一点，只需在页面中隐藏一个输入变量。

在服务器端，我不会将时间存储为字符串。使用内置数据类型的 MySql 使数学变得更容易。

至于您要达到的目标，我认为您的解释可以改进。

# html - html：页脚位置错误：内部 div 大于外部 div

> ID：11862809
> 
> 赞同：0
> 
> 时间：2012-08-08T10:42:50.340
> 
> 标签：html, css

我有以下布局结构：

```
<div id="wrapper">
    <div id="head"></div>
    <div id="columns">
        <div id="menu"></div>   
        <div id="content"></div>
    </div>            
    <div id="foot">
        <div id="copyright"></div>
        <div id="username"></div>
    </div>
</div> 
```

用这个CSS：

```
div#wrapper {
    position:relative;
    margin-left:auto;
    margin-right:auto;
    top: 20px;
    width:1000px;    
}

div#head {
    position: absolute;
    width:1000px;
    height:50px;
    left:0px;
    top: 0px;
}

div#columns {
    position: relative;
    width: 1000px;
    top: 50px;      
}

div#menu {
    position:absolute;
    width:250px;
    top: 0px;
    left:0px;
}

div#content {
    position: relative;
    width: 750px;
    top: 0px;
    left: 250px;
}

div#foot {      
    position: absolute;
    width: 1000px;
    bottom: 20px;
    left: 0px;
} 
```

问题是，页脚在页面中“向上”显示并且内容 - div“更大”，这意味着它在页脚下方有东西。看：

![截屏](../Images/2e63d90b3df25d8b60e64ea19440f0ae.png)

如果我使用 position: relative 作为页脚，它会显示得稍微低一些，但不会像我预期的那样低于 columns-div。我也尝试过 clear:both 但这并没有改变任何东西。

我不是 css 专家，所以有人可以发布解决方案并解释为什么以这种方式显示页脚吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:53:07.917

```
 <style>

div#wrapper {
    position:relative;
    margin-left:auto;
    margin-right:auto;
    top: 20px;
    width:1000px;    
}

div#head {
    position: absolute;
    width:1000px;
    height:50px;
    left:0px;
    top: 0px;
}

div#columns {
    position: relative;
    width: 1000px;
    top: 50px;      
}

div#menu {
    position:absolute;
    width:250px;
    top: 0px;
    left:0px;
}

div#content {
    position: relative;
    width: 750px;
    top: 0px;
    left: 250px;
}

div#foot {
    margin-top:25px;   
    width: auto;
  }

    </style>

 <div id="wrapper">
    <div id="head"></div>
    <div id="columns">
        <div id="menu"></div>   
        <div id="content"></div> <div id="foot">
        <div id="copyright">Footer</div>
        <div id="username"></div>
    </div>
    </div>            

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:24:09.290

好的，DaveHogans 的评论引导我找到以下解决方案：

```
div#wrapper {    
    position:relative;
    margin-left:auto;
    margin-right:auto;
    top: 20px;
    width:1000px;   
}

div#head {
    position: relative;
    width:1000px;
    height:50px;
    left:0px;
    top: 0px;
}

div#columns {
    position: relative;
    width: 1000px;
}

div#menu {
    position:absolute;
    width:250px;
    top: 0px;
    left:0px;
}

div#content {
    position: relative;
    width: 750px;
    top: 0px;
    left: 250px;
}

div#foot {  
    clear:both;
    position: relative;
    width: 1000px;
    padding-top: 10px;  
    padding-bottom: 50px;
} 
```

# ios - 通过地址获取符号（符号化二进制，iOS 构建）

> ID：11862810
> 
> 赞同：2
> 
> 时间：2012-08-08T10:42:50.577
> 
> 标签：ios, xcode, armv7, symbolicate, object-address

我有有趣符号地址的分配工具快照：

![这是截图](../Images/ad2e50c1bdd7b0161db9689fccb8a628.png)

我想知道，这个地址在代码中的位置。我有相应的 dSYM 文件。我尝试使用`atosym`命令行工具，但它给了我错误的符号（与我的应用程序无关）。

如何得到它？

PS：二进制由XCode 4.3.2构建，代码语言为C++，armv7架构，release构建配置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T07:03:26.690

`dwarfdump`做我需要的：

```
dwarfdump --arch armv7 myApp.dSYM --lookup 0xaabbccdd 
```

# drag-and-drop - 禁止 imageIcon 接受拖放

> ID：11862816
> 
> 赞同：0
> 
> 时间：2012-08-08T10:43:25.213
> 
> 标签：drag-and-drop, imageicon

我在 JPanel 上创建了各种 imageIcon，并且可以将它们拖放到彼此上。但我想禁用其中一些接受拖放的能力。IE 我不希望其中一些被更改。它们已使用 JLabel label = new Jlabel(icon) 等设置任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:16:05.817

没关系，我解决了。我用 null 属性重置 TransferHandler ： mylabel.setTransferHandler(new TransferHandler(null));

# android - Android 服务器发起的 TCP 连接

> ID：11862822
> 
> 赞同：0
> 
> 时间：2012-08-08T10:43:51.327
> 
> 标签：android, tcp, connection

我是 Android 开发新手，我想知道是否有任何方法可以在 Android 设备上建立服务器启动的 tcp 连接。

我想要实现的是使外部服务器能够随时从 Android 手机访问数据，而无需使用耗电的永久连接。

由于手机不可能在`accept()`3G 上做类似的事情，我想知道是否可能有一个“隐藏”通知系统可以用来告诉手机连接到服务器。

另一种选择是让手机每隔 X 秒尝试一次连接，但我不喜欢这个想法，我宁愿在需要时立即创建连接。

是否有任何“干净”的解决方案可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:50:11.527

您可能想查看[适用于 Android 的 Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)。

# php - 继续阅读 websockets 初始握手后的 apache 接收缓冲区

> ID：11862827
> 
> 赞同：0
> 
> 时间：2012-08-08T10:43:59.143
> 
> 标签：php, apache, websocket

PHP 版本：PHP 5.4.3
Apache 版本：2.4.2

我正在尝试编写一个简单的 websocket 服务器。我的问题是握手成功后如何继续读取服务器端接收缓冲区？

我正在使用的虚拟主机不支持 php 套接字，因此在 apache+php 之外创建侦听器不是一种选择，此时也不能更改虚拟主机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:34:03.893

由于 Apache 的体系结构，可能还有其他 HTTPd，这是不可能的。只是软件依赖于 RESTful 连接，其中客户端请求数据，然后服务器响应。

由于数据来回传输，websocket 连接不适合这种格式

# objective-c - 如何使用 iOS 钥匙串存储多个用户名和密码？

> ID：11862828
> 
> 赞同：0
> 
> 时间：2012-08-08T10:43:57.827
> 
> 标签：objective-c, ios, xcode, keychain

我目前正在使用 Apple 的 KeychainWrapper 来存储单个用户名和密码，但我想添加能够登录到不同帐户并在我的应用程序中切换它们的功能。

是否将不同钥匙串的标识符存储在 plist 中，然后每次我想更改帐户时重新初始化钥匙串？或者有更好的方法吗？也许是一个 NSMutableArray 的钥匙串？

谢谢，尼克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:50:31.167

我建议你查看开源的 SFHFKeychainUtils 类。

非常简单，只需要调用一种方法来添加（或更新）：

```
+ (BOOL) storeUsername: (NSString *) username andPassword: (NSString *) password forServiceName: (NSString *) serviceName updateExisting: (BOOL) updateExisting error: (NSError **) error; 
```

...获取存储密码的一种方法：

```
+ (NSString *) getPasswordForUsername: (NSString *) username andServiceName: (NSString *) serviceName error: (NSError **) error; 
```

...以及一种删除方法：

```
+ (BOOL) deleteItemForUsername: (NSString *) username andServiceName: (NSString *) serviceName error: (NSError **) error; 
```

[它在 GitHub 中可用](https://github.com/ldandersen/scifihifi-iphone/tree/master/security/)。您只需拖放类并将安全框架导入您的项目。

# r - R计算矩阵/数组部分的sd

> ID：11862834
> 
> 赞同：3
> 
> 时间：2012-08-08T10:44:42.943
> 
> 标签：r, matrix, standard-deviation

很抱歉发布这个，因为我知道这以前曾以各种形式出现过，但我真的不明白我做错了什么/R的内部工作！

我有一个（多维）数据数组，我从我正在使用的 netcdf 文件中读取这些数据。我想计算部分数组的一些“统计数据”，例如：

```
data <- array(runif(96*73*26*12), dim=c(96,73,26,12))

part.mean <- apply(data[10:23, 42:56, ,], c(3,4), mean) 
```

效果很好。但：

```
part.sd <- apply(data[10:23, 42:56, ,], c(3,4), sd) 
```

失败。

那么，对我的数组进行子集化并计算与我可以在上面计算的平均值相关的 sd 的正确方法是什么？

谢谢你的时间！

亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:11:24.930

`sd`与矩阵的工作方式不同`mean`。它产生列标准偏差而不是整个矩阵，

```
part.sd <- apply(data[10:23, 42:56, ,], c(3,4), function(x) sd(as.vector(x))) 
```

应该给你一个与平均值结果一致的结果。

# php - magento custom pages location

> ID：11862841
> 
> 赞同：-1
> 
> 时间：2012-08-08T10:44:57.047
> 
> 标签：php, html, magento, content-management-system

Where does Magento save the custom cms pages in Filesystem?

I Created a new page but it aint accepting the following in its WYSIWYG editor, although i edited it in the html source design of the page:

```
<style>
html, body, div, span, h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, font, img, ul, li {
margin: 0;
padding: 0;
border: 0;
outline: 0;
font-size: 100%;
vertical-align: baseline;
background: transparent;
}
body {
line-height: 1;
}
ol, ul {
list-style: none;
}

:focus {
outline: 0;
}

</style> 
```

I have also to embed some scripts in the page but it just doesnt accept that...so i though i could find the files created in the file system...where are they stored??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:24:41.317

当您从 magento 后端创建自定义页面或小部件时，它存储在数据库本身中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:56:58.163

Cms 页面存储在**cms_page**表中的 db 中。**cms_block**
中的 Cms 块

# c++ - Is there a static analyzer can check local variables re-assignment in C/C++/Objective-C?

> ID：11862844
> 
> 赞同：2
> 
> 时间：2012-08-08T10:45:04.520
> 
> 标签：c++, objective-c, c, constants, local-variables

Is there any way (such as compiler flag) to set *ALL* local variables `const` automatically without the specifier in C/C++/Objective-C? Just like `let` semantics in functional languages.

Because I want to set `const` to all local variables, but it's too annoying and makes code less readable. If I can set all local variables `const` by default, and I can set some variables `mutable` manually, it would be great for me. But I never heard about it.

If you know something please let me know.

* * *

Edit

I thought a little more about this after reading responses. And I strongly agree to it would disrupt strong C convention (or standard?) because it's already defined as mutable by default.

So my idea is becoming into another form. Kind of static analyzer. Not compiler. if some tool can check reassigned local variables, and can define any mechanism marking mutable variable (for example, a specific empty preprocessor symbol), it would be perfect tool for me. And also, it won't disrupt C conventions.

So I changed question title a little and added this text.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:40:55.093

...通过使用宏来实现错误：

```
int main () {

 #define int const int
 #define float const float

 int x = 5;
 float y = 5.3;

 #undef int
 #undef float

 return 0;
} 
```

你甚至可以将这些 def 和 undef 分成两个不同的头文件，这样你的代码看起来会更干净一些：

```
int main () {

 #include "all_vars_const_begin.h"

 int x = 5;
 float y = 5.3;

 #include "all_vars_const_end.h"

 return 0;
} 
```

但我不确定这种风格是否可以。

# linux - less css for ubuntu (and compilation automatically)?

> ID：11862846
> 
> 赞同：4
> 
> 时间：2012-08-08T10:45:12.870
> 
> 标签：linux, ubuntu, compiler-construction, less

I tried simpless, but is not supported now for linux. I tried with wine, and later another alternatives. I don't want to type: lessc file.less > file.less each time I modify a file.

Any good compiler, confortable, automatically, for less CSS?

What is the linux tool that has same functionality as WinLESS i.e. that compiles less files whenever they change taking into account which less files include which?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:01:57.947

最明显的方法是在 Node.js 上运行 javascript 实现。

对于 Ubuntu，首先安装`nodejs`和`npm`，然后查看[这些使用](https://github.com/cloudhead/less.js/wiki/Command-Line-Usage)Node.js 将 LESS 编译为 CSS 的说明。你应该让它像这样

```
npm install -g less
lessc mystyle.less 
```

# java - Java 不接受 Double 变量的十进制数

> ID：11862848
> 
> 赞同：0
> 
> 时间：2012-08-08T10:45:22.387
> 
> 标签：java, double

我有这些非常简单的 3 行代码，据我了解，它们应该允许用户输入十进制数字，然后将数字吐出。

```
 System.out.print("Enter a number.\n"); 
  double number = input.nextDouble();
  System.out.println(number); 
```

但是，当我输入十进制数时，Java 会抛出 InputMismatchException；虽然当我输入整数时，它吐出的数字显示小数位。这太简单了，我什至无法用谷歌搜索它，但我完全迷路了。

编辑等等什么？我刚刚尝试过，它实际上接受“2,4”但不接受“2.4”。那可以改变吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:48:02.093

不知道您的“输入”元素是什么，我只能推测您可能在这里遇到了语言环境问题？例如输入“2,4”而不是“2.4”？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T10:54:07.303

您需要更改语言环境（我假设您使用的是扫描仪）：

```
scanner.useLocale(Locale.US); 
```

# ruby - ruby 正则表达式分组

> ID：11862854
> 
> 赞同：0
> 
> 时间：2012-08-08T10:45:43.337
> 
> 标签：ruby, regex, grouping

我在使用正则表达式从字符串中提取子字符串时遇到问题。

例如我有一个如下的字符串

```
str = "result[cars][ford]" 
```

现在我需要一个正则表达式，它可以提取汽车并从那个字符串中提取出来，这样当

```
str.match({{regex}})[1] 
```

将提供汽车和

```
str.match({{regex}})[2] 
```

将提供福特

现在我需要那个花括号里面的正则表达式。

任何有助于解决这个问题的链接都非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:51:06.623

其实很简单。

```
s = "result[cars][ford]"
matches = s.scan(/\[(\w+)\]/).flatten # => ["cars", "ford"] 
```

这是一个[演示](http://rubular.com/r/kdtvrB8HiF)。

# c# - 选择下拉选项时出错

> ID：11862855
> 
> 赞同：0
> 
> 时间：2012-08-08T10:45:43.257
> 
> 标签：c#, drop-down-menu

我创建了一个简单的应用程序，其中有一个下拉菜单、一个按钮和两个文本框。当我选择第一个选项时，它应该在 textbox1 中填充一个文本，然后单击按钮，它应该使用 textbox1 文本并在 textbox2 中写一个句子。现在，当我在下拉列表中选择另一个选项时，它会给出应用程序错误。

我的代码：

```
protected void ddSelectOption_SelectedIndexChanged(object sender, EventArgs e)
    {
        string cp = "Optionone";
        if (ddSelectOption.SelectedValue == cp)
        {
            txtwrite.Text = "tagit";
        }
        else
        {
            txtwrite.Text = "dynamictag";
        }
    }

    protected void btnsubmit_Click(object sender, EventArgs e)
    {
        string cp = "Optionone";
        if (ddSelectOption.SelectedValue == cp)
        {
            txttag.Text =  "<u "+ txtwrite.Text + ">" + "hai </u>";
        }
        else
        {
            txttag.Text = "<u "+ txtwrite.Text + ">" + "hai </u>";            }
    }
} 
```

谁能帮我 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:31:43.830

看起来 Asp.net 警告您正在尝试提交 HTML 字符串（使您容易受到 XSS 攻击）。您需要先清理您的输入，例如删除标签然后继续，或者如果您确定没问题，那么您可以通过设置关闭请求验证：

`validateRequest = false;`

如果这是 .Net 4.0，则必须使用：

`<httpRuntime requestValidationMode="2.0" />`

`page`强制它使用旧的 2.0 验证模式，因为 4.0 在解析指令之前执行请求验证 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:57:07.913

试试这个：

```
if (ddSelectOption.SelectedValue!=null)
if (ddSelectOption.SelectedValue.ToString() == cp)
... 
```

一切都会变好。

# php - how to sort php category arrays alphabetically?

> ID：11862856
> 
> 赞同：-1
> 
> 时间：2012-08-08T10:45:47.310
> 
> 标签：php, arrays, sorting

I have the following piece of code that returns a number of categories, along with a counter of items in each category. The problem is that it's not returned alphabetically. How can I force them to be output alphabetically? I think it has to be with "asort" or something but I can't seem to figure out how. I'd greatly appreciate any advice! :)

The array to be alphabetically sorted is:

```
 $category_lang[$cat_details['category_id']] 
```

The complete code:

```
 while ($cat_details = $db->fetch_array($sql_select_categories))
 {
  $subcat_link = basename($_SERVER['PHP_SELF']) . '?parent_id=' .$cat_details['category_id'] . $additional_vars;

  $categoryCounter = (COUNT_CATS == 1 && !empty($src_details['keywords_search'])) ? $cat_counter[$cat_details['category_id']] : $cat_details['items_counter'];

  if ($categoryCounter > 0 || COUNT_CATS == 0) {
  $output .= '<tr> ' .
        '   <td class="contentfont"><a href="' . $subcat_link . '">' . $category_lang[$cat_details['category_id']] . '</a> ' .
        (($categoryCounter) ? '<span class="cnt">(' . $categoryCounter . ')</span>' : '') .
        '  </td> ' .
        '</tr> ';
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:50:56.643

```
$array=$category_lang[$cat_details['category_id']]

asort($array);
 //Now $array is sorted alphabetically. use it as you want. 
```

您可以通过数组元素使用 foreach 循环。

asort，对维护关联元素索引的数组进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:06:52.960

在这种情况下，最好使用 mysql ORDER BY name ASC

# c# - 将多个复杂类型传递给 WCF Rest

> ID：11862863
> 
> 赞同：0
> 
> 时间：2012-08-08T10:46:20.713
> 
> 标签：c#, wcf, rest

我正在编写 WCF Rest 服务，我有一个需要上传文件和一些数据的功能。

问题是，是否可以将多个复杂类型和一个流传递给单个 WCF Rest 函数？如果是的话，有人有什么好的例子吗？

所以例如

```
 [WebInvoke(Method = "POST", UriTemplate = "UploadSomething/")]
    public void UploadSomething(ComplexType ctype, DifferentType dtype, Stream fileContent)
    {

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:56:11.417

当您将 Stream 作为参数时，您不能同时传递另一个参数。相反，您可以创建一个包含其他复杂类型的复杂类型以及可用于上传文件的内存流参数。

前任：

```
public class UploadObject
{
    public ComplexType cType {get;set;}
    public DifferentType dType {get;set;}
    public MemoryStream fileStream {get;set;}
} 
```

现在在您的服务中使用它，如图所示：

```
[WebInvoke(Method = "POST", UriTemplate = "UploadSomething/")]
public void UploadSomething(UploadObject uploadObj)
{

} 
```

# gwt - 如何克服 Selenium 中的 Element id 异常？

> ID：11862866
> 
> 赞同：3
> 
> 时间：2012-08-08T10:46:35.907
> 
> 标签：gwt, selenium, selenium-webdriver, gwt2, selenium-server

T 在 UiBinder 本身中为 GWT 小部件设置“id”。

例如。

 **还添加了**在 *.gwt.xml 中**

 **然后我在 Selenium 测试用例中尝试这个

```
WebElement element = driver.findElement(By.id("gwt-debug-loginButton")); 
```

有时它可以正常工作。但有时它会引发以下异常，

> 无法定位元素：{"method":"id","selector":"gwt-debug-loginButton"} 命令持续时间或超时：62 毫秒

我需要更新什么？谁能帮我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T10:56:24.863

使用 WebDriverWait，在一定时间后搜索元素。像这样的东西。

```
try {
        (new WebDriverWait(driver, seconds, delay)).until(new ExpectedCondition<Boolean>() {
            public Boolean apply(WebDriver d) {
                try {
                    WebElement el = d.findElement(By.id("gwt-debug-loginButton"));
                    return true;
                } catch (Exception e) {
                    return false;
                }
            }
        });
    } catch (TimeoutException t) {
        //Element not found during the period of time
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T17:23:35.517

当您尝试使用`selenium WebDriver`. 您可以`driver`通过使用[隐式等待](http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits)或[显式等待来等待页面完全加载](http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-waits)

**隐式等待**示例（此代码通常在初始化驱动程序后使用）-

```
WebDriver driver = new FirefoxDriver();   
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
```

如果驱动程序找不到您要查找的元素，上述语句使驱动程序等待 10 秒。如果驱动程序即使在 10 秒后也找不到它，则驱动程序会引发异常。

**显式等待**的示例- 在您的情况下，这专门用于单个`WebElement`-

```
new WebDriverWait(driver, 20).until(ExpectedConditions.presenceOfElementLocated(By.id("gwt-debug-loginButton"))); 
```

上面的代码将使驱动程序等待 20 秒，直到找到元素。如果即使在 20 秒后也找不到该元素，则会引发 TimeoutException。[您可以在此处](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#presenceOfElementLocated%28org.openqa.selenium.By%29)检查 ExpectedCondition 的 API （您可以在此类中使用许多有趣的变体）

(**Note** that the driver will wait for the specified period of time only if it cannot find the element your code is looking for, if the driver finds an element then it simply continues with execution)****

# jquery - JQuery .load() 的 YUI 等价物是什么？

> ID：11862873
> 
> 赞同：3
> 
> 时间：2012-08-08T10:46:59.947
> 
> 标签：jquery, yui, external, yahoo

我需要使用 jQuery .load() 函数的 YUI 等效项来加载外部 HTML 模板。我现在使用的 jQuery 代码是 -

```
$('#templates').load('file1.html'); 
```

如何使用 YUI 实现相同的输出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T12:12:34.887

它需要一个特定的子模块`node-load`，但它是相同的符号。

```
YUI().use('node', 'node-load', function (Y) {
  Y.one('#templates').load('file1.html');
}); 
```

jQuery 和 YUI 中的所有方法都有一个很好的列表：http: [//www.jsrosettastone.com/](http://www.jsrosettastone.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:59:39.677

不能完全替代`$.load(...)`但可能会让您朝着正确的方向开始：

> 加载跨域 HTML 文件的唯一方法是使用跨域 XMLHttpRequest 或 Flash。YUI 3 中的 IO 模块支持这两者，但 YUI 2 中不支持。
> 来源：http: //yuilibrary.com/forum/viewtopic.php?p=25704&sid= [33da592b2224850ea738e6947d8dc280#p25704](http://yuilibrary.com/forum/viewtopic.php?p=25704&sid=33da592b2224850ea738e6947d8dc280#p25704)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T11:14:51.827

最后设计了一个加载 HTML 的解决方案。我已经处理了 IE 和 NON-IE 浏览器的案例。是这样的——

函数 fName() {

```
 if(navigator.appName == "Microsoft Internet Explorer") {        
    var xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
    xmlHttp.open( "GET", "templates.html", true );

    xmlHttp.onreadystatechange = function() {
        if( xmlHttp.readyState == 4 && ( xmlHttp.status == 0 || xmlHttp.status == 200 ) )
        {                
            document.getElementById( "div_id_here" ).innerHTML = '"' + xmlHttp.responseText + '"';
        }
    };
    xmlHttp.send();
}

else {
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open("GET", "templates.html", true);
    xmlHttp.onreadystatechange = function()
    {
        if(xmlHttp.readyState == 4 && (xmlHttp.status == 0 || xmlHttp.status == 200))
        {
            document.getElementById("div_id_here").innerHTML = xmlHttp.responseText;
        }
    };
    xmlHttp.send();
  }
} 
```

# java - HashMap value change after "get"

> ID：11862874
> 
> 赞同：4
> 
> 时间：2012-08-08T10:47:03.493
> 
> 标签：java

I have a

```
private Map<String,List<ProductScheme>> discountMap = new HashMap<String,List<ProductScheme>>(); 
```

now if i get list from `discountMap` and add an item in list will i have to put the list again in `discount map` or it will not be required ??

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T10:48:01.860

不，这不是必需的。`get`返回对存储在地图中的列表的引用。因此，无论您对使用 (add, remove...) 获得的列表所做的任何修改都`get`将反映在地图中的列表上，因为它们是同一个对象。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-08T10:49:56.313

如果之前不存在，您只需要添加一个列表。我使用的模式是

```
List<ProductScheme> list = discountMap.get(key);
if (list == null)
    discountMap.put(key, list = new ArrayList<>());
list.add(value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:52:57.267

由于您只能从地图中获取对列表的对象引用，因此您不必再次将其放入地图。

```
List someList = discountMap.get("firstList"); 
```

仍然是同一个列表，只是另一个变量，用于存储指向对象的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:03:36.087

不。您无需将修改后的对象再次添加到 discountMap 变量中。当您从地图调用 get 方法时，它仅返回该特定对象的引用（对象地址），并且您正在修改地图中存在的该对象（实际上即使在地图中，它也具有对象引用。所以相同我们使用其内存位置从两个位置引用的对象）使用上面的对象引用。

这对于我们使用其引用来引用对象的所有情况都是常见的。

[一个有用的链接](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

# mysql - LOAD DATA LOCAL INFILE stuck at end of query

> ID：11862876
> 
> 赞同：0
> 
> 时间：2012-08-08T10:47:14.457
> 
> 标签：mysql

I'm running some `LOAD DATA LOCAL INFILE` statements to insert a large amount of data (gigabytes) into a MySQL 5.5 database. The statements look like this:

```
LOAD DATA LOCAL INFILE '/mnt/feeds/20120801/itunes20120801/application' 
REPLACE INTO TABLE app_store_applications 
FIELDS TERMINATED BY X'01'
LINES TERMINATED BY X'020A'
(export_date, id, title, recommended_age, artist_name, seller_name, company_url, support_url, view_url, artwork_url_large, artwork_url_small, @itunes_release_date, copyright, description, version, itunes_version, download_size)
SET itunes_release_date=STR_TO_DATE(@itunes_release_date, '%Y %m %d') 
```

This has been working the whole time, however, since yesterday the same queries which have worked previously seem to stall every time on the `query end` step (shown by `SHOW PROCESSLIST`).

When I check the table content, **all the data has been correctly inserted** by then, so there's no reason for the query not to finish. Still, a query which has inserted all data after 30 minutes will still be stuck on `query end` after about 10 hours. What could be the reason for this?

**Update:** I recently set up a replication, with this DB acting as the master. It might be that there is some problem writing the data to the binary logs, and that this prevents the query from finishing?

# ios - 尝试在其视图不在窗口层次结构中的 UIViewController 上呈现 UIViewController

> ID：11862883
> 
> 赞同：647
> 
> 时间：2012-08-08T10:47:41.307
> 
> 标签：ios, cocoa-touch, ios6, views, hierarchy

刚开始使用 Xcode 4.5，我在控制台中收到此错误：

> 警告：尝试在视图不在窗口层次结构中的 <ViewController:0x1ec3e000> 上呈现 <finishViewController:0x1e56e0a0>！

该视图仍在显示中，应用程序中的所有内容都运行良好。这是 iOS 6 中的新功能吗？

这是我用来在视图之间更改的代码：

```
UIStoryboard *storyboard = self.storyboard;
finishViewController *finished = 
[storyboard instantiateViewControllerWithIdentifier:@"finishViewController"];

[self presentViewController:finished animated:NO completion:NULL]; 
```

* * *

## 回答 #1

> 赞同：1381
> 
> 时间：2012-09-07T14:36:46.623

你从哪里调用这个方法？我有一个问题，我试图在该`viewDidLoad`方法中呈现一个模态视图控制器。我的解决方案是将此调用移至该`viewDidAppear:`方法。

我的假设是视图控制器的视图在加载时（发送消息时）***不在***窗口的视图层次结构中，但在呈现后（发送消息时）***它***在窗口层次结构中.`viewDidLoad`*`viewDidAppear:`*

 ** * *

**警告**

如果您确实调用`presentViewController:animated:completion:`in ，`viewDidAppear:`您可能会遇到一个问题，即每当视图控制器的视图出现时，总是呈现模态视图控制器（这是有道理的！），因此呈现的模态视图控制器永远不会消失。 .

也许这不是呈现模态视图控制器的最佳位置，或者可能需要保留一些额外的状态，以允许呈现视图控制器决定是否应该立即呈现模态视图控制器。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2015-04-17T19:56:40.040

另一个潜在原因：

当我不小心两次呈现同一个视图控制器时，我遇到了这个问题。（第一次`performSegueWithIdentifer:sender:`是在按下按钮时调用，第二次是直接连接到按钮的 segue）。

实际上，两个segues同时开火，我得到了错误：`Attempt to present X on Y whose view is not in the window hierarchy!`

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2013-02-22T03:10:41.253

`viewWillLayoutSubviews`和`viewDidLayoutSubviews`(iOS 5.0+) 可用于此目的。它们在 viewDidAppear 之前被调用。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2016-03-09T06:22:53.383

要将任何子视图显示到主视图，请使用以下代码

```
UIViewController *yourCurrentViewController = [UIApplication sharedApplication].keyWindow.rootViewController;

while (yourCurrentViewController.presentedViewController) 
{
   yourCurrentViewController = yourCurrentViewController.presentedViewController;
}

[yourCurrentViewController presentViewController:composeViewController animated:YES completion:nil]; 
```

要从主视图中关闭任何子视图，请使用以下代码

```
UIViewController *yourCurrentViewController = [UIApplication sharedApplication].keyWindow.rootViewController;

while (yourCurrentViewController.presentedViewController) 
{
   yourCurrentViewController = yourCurrentViewController.presentedViewController;
}

[yourCurrentViewController dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-12-06T05:35:24.370

当我尝试展示一个`UIViewController`in时，我也遇到了这个问题`viewDidLoad`。詹姆斯贝德福德的回答有效，但我的应用程序首先显示背景 1 或 2 秒。

经过一番研究，我找到了一种使用`addChildViewController`.

```
- (void)viewDidLoad
{
    ...
    [self.view addSubview: navigationViewController.view];
    [self addChildViewController: navigationViewController];
    ...
} 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-07-24T02:30:33.130

可能和我一样，你有一个错误的根`viewController`

我想`ViewController`在`non-UIViewController`上下文中显示一个，

**所以我不能使用这样的代码：**

```
[self presentViewController:] 
```

**所以，我得到了一个 UIViewController：**

```
[[[[UIApplication sharedApplication] delegate] window] rootViewController] 
```

由于某种原因（逻辑错误），这`rootViewController`是与预期不同的东西（正常`UIViewController`）。然后我更正了错误，替换`rootViewController`为 a `UINavigationController`，问题就消失了。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-08-17T19:48:23.963

**TL;DR**您只能拥有 1 个 rootViewController 及其最近呈现的一个。因此，当一个视图控制器已经呈现一个尚未被解除的视图控制器时，不要尝试让它呈现另一个视图控制器。

在做了一些我自己的测试后，我得出了一个结论。

如果您有一个想要呈现所有内容的 rootViewController，那么您可能会遇到这个问题。

这是我的 rootController 代码（open 是我从根目录呈现视图控制器的快捷方式）。

```
func open(controller:UIViewController)
{
    if (Context.ROOTWINDOW.rootViewController == nil)
    {
        Context.ROOTWINDOW.rootViewController = ROOT_VIEW_CONTROLLER
        Context.ROOTWINDOW.makeKeyAndVisible()
    }

    ROOT_VIEW_CONTROLLER.presentViewController(controller, animated: true, completion: {})
} 
```

如果我连续两次调用 open （不管经过了多少时间），这将在第一次打开时工作得很好，但在第二次打开时就不行了。第二次打开尝试将导致上述错误。

但是，如果我关闭最近呈现的视图然后调用 open，当我再次调用 open（在另一个视图控制器上）时它工作得很好。

```
func close(controller:UIViewController)
{
    ROOT_VIEW_CONTROLLER.dismissViewControllerAnimated(true, completion: nil)
} 
```

我得出的结论是，只有 MOST-RECENT-CALL 的 rootViewController 位于视图层次结构中（即使您没有关闭它或删除视图）。我尝试使用所有加载程序调用（viewDidLoad、viewDidAppear 和延迟调度调用），我发现我可以让它工作的唯一方法是只从最顶层的视图控制器调用 present。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2021-01-05T02:35:16.533

**Swift 5 - 后台线程**

如果在后台线程上执行警报控制器，则可能会出现“尝试呈现......其视图不在窗口层次结构中”的错误。

所以这：

```
present(alert, animated: true, completion: nil) 
```

修复了这个：

```
DispatchQueue.main.async { [weak self] in
    self?.present(alert, animated: true, completion: nil)
} 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-09-01T00:38:48.480

**我在Swift 4.2**上遇到了类似的问题，但我的视图没有从视图周期中呈现出来。我发现我要同时呈现多个 segue。所以我使用了 dispatchAsyncAfter。

```
func updateView() {

 DispatchQueue.main.asyncAfter(deadline: .now() + 0.1) { [weak self] in

// for programmatically presenting view controller 
// present(viewController, animated: true, completion: nil)

//For Story board segue. you will also have to setup prepare segue for this to work. 
 self?.performSegue(withIdentifier: "Identifier", sender: nil)
  }
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-05-17T01:59:47.783

我的问题是在调用窗口之前我正在执行`UIApplicationDelegate`'s方法中的 segue。`didFinishLaunchingWithOptions``makeKeyAndVisible()`

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-09-29T23:01:30.393

在我的情况下，我无法将我的放在班级覆盖中。所以，这就是我得到的：

```
let viewController = self // I had viewController passed in as a function,
                          // but otherwise you can do this

// Present the view controller
let currentViewController = UIApplication.shared.keyWindow?.rootViewController
currentViewController?.dismiss(animated: true, completion: nil)

if viewController.presentedViewController == nil {
    currentViewController?.present(alert, animated: true, completion: nil)
} else {
    viewController.present(alert, animated: true, completion: nil)
} 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-07-22T22:03:19.917

您可以调用您的 segues 或在此块内呈现、推送代码：

```
override func viewDidLoad() {
    super.viewDidLoad()
    OperationQueue.main.addOperation {
        // push or present the page inside this block
    }
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-02-20T09:34:52.030

我有同样的问题。我必须嵌入一个导航控制器并通过它呈现控制器。下面是示例代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    UIImagePickerController *cameraView = [[UIImagePickerController alloc]init];
    [cameraView setSourceType:UIImagePickerControllerSourceTypeCamera];
    [cameraView setShowsCameraControls:NO];

    UIView *cameraOverlay = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 768, 1024)];
    UIImageView *imageView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"someImage"]];
    [imageView setFrame:CGRectMake(0, 0, 768, 1024)];
    [cameraOverlay addSubview:imageView];

    [cameraView setCameraOverlayView:imageView];

    [self.navigationController presentViewController:cameraView animated:NO completion:nil];
//    [self presentViewController:cameraView animated:NO completion:nil]; //this will cause view is not in the window hierarchy error

} 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2015-06-18T20:11:26.537

如果您有播放视频的 AVPlayer 对象，则必须先暂停视频。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2015-09-09T10:41:17.970

我遇到过同样的问题。问题是， performSegueWithIdentifier 是由通知触发的，一旦我将通知放在主线程上，警告消息就消失了。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2016-02-22T17:42:19.353

`viewController`考虑到您想从几乎任何地方显示一些代码，我最终得到了最终对我有用的代码（Swift） 。当没有可用的 rootViewController 时，这段代码显然会崩溃，这就是开放式结局。它也不包括通常需要使用的切换到 UI 线程

```
dispatch_sync(dispatch_get_main_queue(), {
    guard !NSBundle.mainBundle().bundlePath.hasSuffix(".appex") else {
       return; // skip operation when embedded to App Extension
    }

    if let delegate = UIApplication.sharedApplication().delegate {
        delegate.window!!.rootViewController?.presentViewController(viewController, animated: true, completion: { () -> Void in
            // optional completion code
        })
    }
} 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2016-05-23T06:37:25.177

它工作正常试试这个。[关联](http://pinkstone.co.uk/how-to-avoid-whose-view-is-not-in-the-window-hierarchy-error-when-presenting-a-uiviewcontroller/)

```
UIViewController *top = [UIApplication sharedApplication].keyWindow.rootViewController;
[top presentViewController:secondView animated:YES completion: nil]; 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2016-09-06T13:56:45.883

如果它可以帮助任何人，我的问题非常愚蠢。当然完全是我的错。通知正在触发调用模式的方法。但是我没有正确删除通知，所以在某些时候，我会收到不止一个通知，因此模态框会被多次调用。当然，在你调用一次模态框之后，调用它的视图控制器就不再在视图层次结构中了，这就是我们看到这个问题的原因。正如您所料，我的情况也引起了许多其他问题。

总而言之，无论您在做什么，请**确保模态不会被多次调用**。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2018-06-11T08:33:18.817

这种警告可能意味着您正在尝试呈现新`View Controller`的，`Navigation Controller`而`Navigation Controller`当前正在呈现另一个`View Controller`. 要修复它，您必须首先关闭当前呈现`View Controller`的并在完成时呈现新的。警告的另一个原因可能是尝试`View Controller`在线程上显示`main`.

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2018-05-17T09:23:27.693

我通过在完成块内移动`start()`函数来修复它：`dismiss`

```
self.tabBarController.dismiss(animated: false) {
  self.start()
} 
```

Start 包含两个调用，`self.present()`一个用于 UINavigationController，另一个用于`UIImagePickerController`.

那为我修好了。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-12-02T21:06:54.160

从嵌入在容器中的视图控制器执行转场时，您也可能会收到此警告。正确的解决方案是使用容器父级的 segue，而不是容器的视图控制器。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-02-18T10:17:54.840

必须写在下面一行。

```
self.searchController.definesPresentationContext = true 
```

代替

```
self.definesPresentationContext = true 
```

在 UIViewController

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-07-29T19:34:35.557

我碰巧**故事板中的segue有点坏了**。删除转场（并再次创建完全相同的转场）解决了这个问题。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2017-01-17T00:30:48.627

**随着斯威夫特 3...**

发生在我身上的另一个可能的原因是从 tableViewCell 到 Storyboard 上的另一个 ViewController 的转场。`override func prepare(for segue: UIStoryboardSegue, sender: Any?) {}`单击单元格时我也使用过。

我通过从 ViewController 到 ViewController 进行 segue 解决了这个问题。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2017-03-30T19:25:37.637

我遇到了这个问题，根本原因是多次订阅按钮单击处理程序（TouchUpInside）。

它在 ViewWillAppear 中订阅，它被多次调用，因为我们添加了导航以转到另一个控制器，然后展开回到它。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2018-01-13T11:39:29.053

在您的主窗口中，可能总是会出现与显示警报不兼容的过渡。为了允许在应用程序生命周期中的任何时间显示警报，您应该有一个单独的窗口来完成这项工作。

```
/// independant window for alerts
@interface AlertWindow: UIWindow

+ (void)presentAlertWithTitle:(NSString *)title message:(NSString *)message;

@end

@implementation AlertWindow

+ (AlertWindow *)sharedInstance
{
    static AlertWindow *sharedInstance;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[AlertWindow alloc] initWithFrame:UIScreen.mainScreen.bounds];
    });
    return sharedInstance;
}

+ (void)presentAlertWithTitle:(NSString *)title message:(NSString *)message
{
    // Using a separate window to solve "Warning: Attempt to present <UIAlertController> on <UIViewController> whose view is not in the window hierarchy!"
    UIWindow *shared = AlertWindow.sharedInstance;
    shared.userInteractionEnabled = YES;
    UIViewController *root = shared.rootViewController;
    UIAlertController *alert = [UIAlertController alertControllerWithTitle:title message:message preferredStyle:UIAlertControllerStyleAlert];
    alert.modalInPopover = true;
    [alert addAction:[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleCancel handler:^(UIAlertAction *action) {
        shared.userInteractionEnabled = NO;
        [root dismissViewControllerAnimated:YES completion:nil];
    }]];
    [root presentViewController:alert animated:YES completion:nil];
}

- (instancetype)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];

    self.userInteractionEnabled = NO;
    self.windowLevel = CGFLOAT_MAX;
    self.backgroundColor = UIColor.clearColor;
    self.hidden = NO;
    self.rootViewController = UIViewController.new;

    [NSNotificationCenter.defaultCenter addObserver:self
                                           selector:@selector(bringWindowToTop:)
                                               name:UIWindowDidBecomeVisibleNotification
                                             object:nil];

    return self;
}

/// Bring AlertWindow to top when another window is being shown.
- (void)bringWindowToTop:(NSNotification *)notification {
    if (![notification.object isKindOfClass:[AlertWindow class]]) {
        self.hidden = YES;
        self.hidden = NO;
    }
}

@end 
```

根据设计，基本用法总是会成功：

```
[AlertWindow presentAlertWithTitle:@"My title" message:@"My message"]; 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2018-06-07T20:45:36.790

可悲的是，接受的解决方案不适用于我的情况。从另一个视图控制器展开后，我试图导航到一个新的视图控制器。

我找到了一个解决方案，方法是使用一个标志来指示调用了哪个 unwind segue。

```
@IBAction func unwindFromAuthenticationWithSegue(segue: UIStoryboardSegue) {
    self.shouldSegueToMainTabBar = true
}

@IBAction func unwindFromForgetPasswordWithSegue(segue: UIStoryboardSegue) {
    self.shouldSegueToLogin = true
} 
```

然后提出想要的VC`present(_ viewControllerToPresent: UIViewController)`

```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    let storyboard = UIStoryboard(name: "Main", bundle: nil)
    if self.shouldSegueToMainTabBar {
        let mainTabBarController = storyboard.instantiateViewController(withIdentifier: "mainTabBarVC") as! MainTabBarController
        self.present(mainTabBarController, animated: true)
        self.shouldSegueToMainTabBar = false
    }
    if self.shouldSegueToLogin {
        let loginController = storyboard.instantiateViewController(withIdentifier: "loginVC") as! LogInViewController
        self.present(loginController, animated: true)
        self.shouldSegueToLogin = false
    }
} 
```

基本上，上面的代码将让我从登录/注册 VC 中捕获展开并导航到仪表板，或者从忘记密码 VC 中捕获展开动作并导航到登录页面。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2019-10-30T09:30:55.243

我通过将最顶层的视图控制器存储到常量中修复了这个错误，该常量在 rootViewController 的 while 循环中找到：

```
if var topController = UIApplication.shared.keyWindow?.rootViewController {
    while let presentedViewController = topController.presentedViewController {
        topController = presentedViewController
    }
    topController.present(controller, animated: false, completion: nil)
    // topController should now be your topmost view controller
} 
```

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2019-12-13T19:00:16.403

我发现这个错误是在更新 Xcode 后出现的，我相信**Swift 5**。当我在展开视图控制器后直接以编程方式启动 segue 时，问题就发生了。

解决方案在修复相关错误的同时出现，即用户现在可以通过向下滑动页面来解除 segues。这打破了我程序的逻辑。

**通过将所有视图控制器上的演示模式从*Automatic*更改为*Full Screen***来修复它。

您可以在界面生成器的属性面板中执行此操作。或查看[此答案](https://stackoverflow.com/a/41095699/794283)以了解如何以编程方式进行操作。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2020-09-09T16:42:46.993

斯威夫特 5

我将 present in`viewDidLayoutSubviews`称为presenting in`viewDidAppear`会导致在加载模式之前视图控制器的瞬间显示，这看起来像一个丑陋的故障

确保检查窗口是否存在并只执行一次代码

```
var alreadyPresentedVCOnDisplay = false

override func viewDidLayoutSubviews() {

    super.viewDidLayoutSubviews()

    // we call present in viewDidLayoutSubviews as
    // presenting in viewDidAppear causes a split second showing 
    // of the view controller before the modal is loaded

    guard let _ = view?.window else {
        // window must be assigned
        return
    }

    if !alreadyPresentedVCOnDisplay {
        alreadyPresentedVCOnDisplay = true
        present(...)
    }

} 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2013-09-17T07:48:56.617

我也遇到了这个问题，但和时间无关。我使用单例处理场景，并将其设置为演示者。换句话说，“自我”并没有与任何东西挂钩。我只是把它的内部“场景”变成了新的演示者，瞧，它奏效了。（瞧，在你了解了它的意思后，它就失去了联系，呵呵）。

所以是的，这不是关于“神奇地找到正确的方法”，而是关于理解你的代码在哪里以及它在做什么。我很高兴苹果公司给出了这样一个简单的英语警告信息，即使它带有情感。向这样做的苹果开发人员致敬！

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2014-09-20T12:44:22.813

如果由于某种原因其他解决方案看起来不太好，您仍然可以使用`workaround`延迟为 0 的这种古老的呈现方式，如下所示：

```
dispatch_after(0, dispatch_get_main_queue(), ^{
    finishViewController *finished = [self.storyboard instantiateViewControllerWithIdentifier:@"finishViewController"];
    [self presentViewController:finished animated:NO completion:NULL];    
}); 
```

虽然我没有看到任何文档保证您的 VC 将在调度块计划执行的时间上位于视图层次结构中，但我观察到它可以正常工作。

使用例如 0.2 秒的延迟也是一种选择。最好的事情是——这样你就不需要在里面弄乱布尔变量了`viewDidAppear:`

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2019-09-11T02:48:58.427

**如果您有可用的导航控制器，这适用于呈现任何视图控制器。** self.navigationController?.present(MyViewController, animated: true, completion: nil) 另外，我还可以显示警报和邮件控制器。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2020-02-17T08:04:43.723

该消息显示为警告，有时代码拒绝工作。（！需要引用：较新的 SDK 可能有严格的规则）。

我遇到它的原因不止一个，主要是复杂的视图控制器场景。这是一个例子。

```
Scenario: MainViewController (responsible to load: ViewControllerA & ViewControllerB) 
```

呈现`ViewControllerA`和`MainViewController`不解散`ViewControllerA`您尝试呈现`viewControllerB`的对象`MainViewController`（使用委托方法）。

在这种情况下，您必须确保关闭 ViewControllerA，然后调用 ViewControllerB。

因为在呈现 ViewControllerA 之后（ViewControllerA 负责显示视图和视图控制器，并且当 MainViewController 尝试加载另一个视图控制器时，它拒绝处理并抛出警告）。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2021-12-03T01:01:55.340

当我试图在我的 navigationController 上呈现它的视图时，它的视图还没有呈现到视图层次结构上，这发生在我身上。我解决这个问题的方法是听[NavigationControllerDelegate 的 didShow 方法](https://developer.apple.com/documentation/uikit/uinavigationcontrollerdelegate/1621848-navigationcontroller)。一旦调用了 didShow 方法，我就知道我可以呈现在我的 navigationController 上。

注意： using`dispatchQueueAsync.await(.now()) { //present }`确实有效，但如果视图需要很长时间才能显示到视图层次结构上，它会很麻烦并且容易出现错误。*

# sybase - 如何在mac os上安装sybase unwired平台

> ID：11862884
> 
> 赞同：0
> 
> 时间：2012-08-08T10:47:42.617
> 
> 标签：sybase, sup

谁能告诉我如何在我的 Macbook 上安装 Sybase Unwired Platform？程序是什么，先决条件是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:19:33.190

根据 Sybase 文档，Sybase Unwired Platform 需要 Windows。这意味着您可能必须通过 Parallels 或 Boot Camp 安装和运行它。

可在此处找到更多信息： [Sybase 无线平台文档](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.pubs.docset-SUP-2.1.0/doc/html/title.html)

可在此处找到有关 Sybase SUP 的下载信息： [Sybase Unwired Platorm](http://www.sybase.in/products/mobileenterprise/sybaseunwiredplatform)

# php - 如何从图表中删除效果

> ID：11862885
> 
> 赞同：0
> 
> 时间：2012-08-08T10:47:49.417
> 
> 标签：php, javascript, graph

我正在用 php 做一个网站，它有一个图形表示。我用过 amchart 图。我已经绘制了图表，但是当我使用折线图时，它的加载有一些影响，我必须消除这种影响。我在小提琴中添加了折线图。请检查它。任何帮助将不胜感激。

> [http://jsfiddle.net/soumyamohanan/Qr7we/2/](http://jsfiddle.net/soumyamohanan/Qr7we/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:52:57.860

试试[这个](http://jsfiddle.net/Qr7we/3/)，

`chart.startDuration = 0;`

# build - typeproviders, websharper, f#, 构建顺序

> ID：11862889
> 
> 赞同：1
> 
> 时间：2012-08-08T10:48:08.780
> 
> 标签：build, f#, type-providers, websharper

所以我在我的应用程序中添加了一些使用 typeproviders 的数据（[github链接](https://github.com/whole/bork/tree/master/Website1)）所以这就是问题所在。

1）我想要的是我`Site.fs`使用数据并根据我给它的规则构建div。一切看起来都很好，除了......

我将后端计算放入 WebSite 项目中，可能是因为 Web 是 WebSite 中的启动项目计算从未完成，也从未推送到数据库中。它只显示已经在数据库中的数据。

另外，有时`${title}`fsharp 中只提供了正文而不是文本（即使使用默认的 sitelet 示例站点）。这正常吗？重新启动 Visual Studio 会有所帮助。

PS：对不起，如果我的代码看起来不那么壮观，我希望它首先工作，然后我会重构它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:31:00.000

如您所料，顶级值（例如 your `Site.items`）在应用程序启动时计算一次。如果您希望在每次页面加载时计算它，则需要在接收`Context<Action>`. [1]

例如，您可以执行以下操作：

```
let getItems() =
    seq {
        for i in borkData.parseData.db.ONEPOST do
            yield [i.Title; i.Link; i.Poslodavac; i.MjestoRada; i.RokZaPrijavu]
    }

let JobsPage =
    Skin.WithTemplate "Jobs" <| fun ctx -> // this is the function that gets called for every page
        let items = getItems()
        [
            for i in items ->
                Div [Class "job"] -<
                  [
                    A [Class "title"] -< [HRef i.[1]] -< [ Text i.[0]]
                    P [Class "posted top"]  -< [ Text i.[3] ]
                    P [Class "employer"]  -< [ Text i.[2] ]
                  ]
        ] 
```

在这里，因为`getItems`是一个函数，所以每次你用`let items = getItems()`.

* * *

`Sitelet.Infer`[1]如果您使用它，您也可以在传递给 的函数中执行此操作。`Content`如果您想要返回取决于，这将很有用`items`，例如，如果您想要使用不同的模板取决于`items`.

# c# - C#：如何使用套接字执行 HTTP 请求？

> ID：11862890
> 
> 赞同：16
> 
> 时间：2012-08-08T10:48:08.477
> 
> 标签：c#, sockets

我正在尝试`HTTP request`使用套接字。我的代码如下：

```
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;
class test
{
    public static void Main(String[] args)
    {
        string hostName = "127.0.0.1";
        int hostPort = 9887;
        int response = 0;

        IPAddress host = IPAddress.Parse(hostName);
        IPEndPoint hostep = new IPEndPoint(host, hostPort);
        Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

        sock.Connect(hostep);

        string request_url = "http://127.0.0.1/register?id=application/vnd-fullphat.test&title=My%20Test%20App";
        response = sock.Send(Encoding.UTF8.GetBytes(request_url));
        response = sock.Send(Encoding.UTF8.GetBytes("\r\n"));

        bytes = sock.Receive(bytesReceived, bytesReceived.Length, 0);
        page = page + Encoding.ASCII.GetString(bytesReceived, 0, bytes);
        Console.WriteLine(page);
        sock.Close();
    }
} 
```

现在，当我执行上述代码时，什么也没有发生，而当我`request_url`在浏览器中输入时，我收到了来自 Snarl 的通知，说`Application Registered`我从浏览器得到的响应是

```
SNP/2.0/0/OK/556 
```

我从我的代码中得到的响应是`SNP/3.0/107/BadPacket`.

那么，我的代码有什么问题。

[Snarl 请求格式规范](http://sourceforge.net/apps/mediawiki/snarlwin/index.php?title=SNP_2.0_API)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-07T17:44:17.307

我对SNP一无所知。您的代码在接收部分有点混乱。我使用下面的示例来发送和读取 HTTP GET 请求的服务器响应。首先让我们看一下请求，然后检查响应。

HTTP GET 请求：

```
GET / HTTP/1.1
Host: 127.0.0.1
Connection: keep-alive
Accept: text/html
User-Agent: CSharpTests

string - "GET / HTTP/1.1\r\nHost: 127.0.0.1\r\nConnection: keep-alive\r\nAccept: text/html\r\nUser-Agent: CSharpTests\r\n\r\n" 
```

服务器 HTTP 响应标头：

```
HTTP/1.1 200 OK
Date: Sun, 07 Jul 2013 17:13:10 GMT
Server: Apache/2.4.4 (Win32) OpenSSL/0.9.8y PHP/5.4.16
Last-Modified: Sat, 30 Mar 2013 11:28:59 GMT
ETag: \"ca-4d922b19fd4c0\"
Accept-Ranges: bytes
Content-Length: 202
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: text/html

string - "HTTP/1.1 200 OK\r\nDate: Sun, 07 Jul 2013 17:13:10 GMT\r\nServer: Apache/2.4.4 (Win32) OpenSSL/0.9.8y PHP/5.4.16\r\nLast-Modified: Sat, 30 Mar 2013 11:28:59 GMT\r\nETag: \"ca-4d922b19fd4c0\"\r\nAccept-Ranges: bytes\r\nContent-Length: 202\r\nKeep-Alive: timeout=5, max=100\r\nConnection: Keep-Alive\r\nContent-Type: text/html\r\n\r\n" 
```

我故意省略了服务器响应的主体，因为我们已经知道它正好是 202 字节，由响应标头中的 Content-Length 指定。

查看 HTTP 规范会发现 HTTP 标头以空的新行（“\r\n\r\n”）结尾。所以我们只需要搜索它。

让我们看看一些实际的代码。假设 System.Net.Sockets.Socket 类型的变量套接字。

```
socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
socket.Connect("127.0.0.1", 80);
string GETrequest = "GET / HTTP/1.1\r\nHost: 127.0.0.1\r\nConnection: keep-alive\r\nAccept: text/html\r\nUser-Agent: CSharpTests\r\n\r\n";
socket.Send(Encoding.ASCII.GetBytes(GETrequest)); 
```

我们已经将请求发送到服务器，让我们接收并正确解析响应。

```
bool flag = true; // just so we know we are still reading
string headerString = ""; // to store header information
int contentLength = 0; // the body length
byte[] bodyBuff = new byte[0]; // to later hold the body content
while (flag)
{
// read the header byte by byte, until \r\n\r\n
byte[] buffer = new byte[1];
socket.Receive(buffer, 0, 1, 0);
headerString += Encoding.ASCII.GetString(buffer);
if (headerString.Contains("\r\n\r\n"))
{
    // header is received, parsing content length
    // I use regular expressions, but any other method you can think of is ok
    Regex reg = new Regex("\\\r\nContent-Length: (.*?)\\\r\n");
    Match m = reg.Match(headerString);
    contentLength = int.Parse(m.Groups[1].ToString());
    flag = false;
    // read the body
    bodyBuff = new byte[contentLength];
    socket.Receive(bodyBuff, 0, contentLength, 0);
}
}
Console.WriteLine("Server Response :");
string body = Encoding.ASCII.GetString(bodyBuff);
Console.WriteLine(body);
socket.Close(); 
```

这可能是在 C# 中执行此操作的最糟糕的方法，在 .NET 中有大量类可以处理 HTTP 请求和响应，但如果您需要它，它仍然可以工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-08T11:22:36.167

您必须在末尾包含内容长度和双新行以指示标题的结尾。

```
var request = "GET /register?id=application/vnd-fullphat.test&title=My%20Test%20App HTTP/1.1\r\n" + 
    "Host: 127.0.0.1\r\n" +
    "Content-Length: 0\r\n" +
    "\r\n"; 
```

HTTP 1.1 规范可以在这里找到： http: [//www.w3.org/Protocols/rfc2616/rfc2616.html](http://www.w3.org/Protocols/rfc2616/rfc2616.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T10:58:09.360

您的要求不正确。根据[wikipedia，HTTP Get 请求](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Client_request)必须如下所示：

```
string request = "GET /register?id=application/vnd-fullphat.test&title=My%20Test%20App HTTP/1.1\r\nHost: 127.0.0.1\r\n"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-24T09:51:40.930

HTTP 请求的最低要求是“GET / HTTP/1.0\r\n\r\n”（如果允许删除主机）。但是在 SNARL 中，您必须输入内容长度（我听到最多的内容）。

所以，

```
 Socket sck = new Socket(AddressFamily.InterNetwork,SocketType.Stream, ProtocolType.Tcp);

        sck.Connect(ip, port);
        sck.Send(Encoding.UTF8.GetBytes("THE HTTP REQUEST HEADER"));
        Console.WriteLine("SENT");
        string message = null;
        byte[] bytesStored = new byte[sck.ReceiveBufferSize];
        int k1 = sck.Receive(bytesStored);
        for (int i = 0; i < k1; i++)
        {
            message = message + Convert.ToChar(bytesStored[i]).ToString();
        }
        Console.WriteLine(message); // PRINT THE RESPONSE 
```

我在几个站点上进行了测试，并且效果很好。如果它不起作用，那么您应该通过添加更多标题来修复它（最有可能的解决方案）。

# python - 如何在 Python 中将 UTF-8 字符串转换为符合 URL 的字符串？

> ID：11862891
> 
> 赞同：0
> 
> 时间：2012-08-08T10:48:10.540
> 
> 标签：python, unicode, utf-8, urllib2, urllib

我确定我不是第一个遇到这个问题的人。但是经过数小时的调试、谷歌搜索和 StackOverflow-ing 却没有找到答案，我决定发布这个问题。如果我错过了什么，请提前抱歉，但现在，我很困惑。

我正在使用 BeautifulSoup 来解析 UTF-8 网站。我正在使用网站上的文本来构建一个 URL 以进一步抓取。我遇到了一些非英文字符的问题。

例如：站点包含字符串`Originální formule`，我想用它来构建 URL:`http://blahblah.com/Originální-formule`或`http://blahblah.com/origin%C3%A1ln%C3%AD-formule`. 问题是，我得到了`http://blahblah.com/Origin\xe1ln\xed-formule`，这会产生错误。我尝试编码、解码等等，但我仍然无法获得正确的 URL。

顺便说一句，当我 时`print u'Origin\xe1ln\xed-formule'`，字符串打印得很好。它只是编码不成功。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:37:20.460

In order to achieve what you are expecting you have to do the following things:

1.  Decompose the url
2.  Get the path part and encode it to utf-8
3.  Quote the path
4.  Join each part to get back a quoted URL

You can perform these with a combination of the following functions:

*   `urlparse.urlparse` ([docs](http://docs.python.org/library/urlparse.html))
*   `urllib.quote` ([docs](http://docs.python.org/library/urllib))
*   `urlparse.unparse` ([docs](http://docs.python.org/library/urlparse.html))

The code will end up like this:

```
from urlparse import urlparse, urlunparse
from urllib import quote
x = u'http://blahblah.com/Originální-formule'
parsed_url = list(urlparse(x.encode('utf-8')))
parsed_url[2] = quote(parsed_url[2])
urlunparse(parsed_url) 
```

Result: `http://blahblah.com/Origin%C3%A1ln%C3%AD-formule`

# javascript - 关于window.location和window.open的区别

> ID：11862893
> 
> 赞同：0
> 
> 时间：2012-08-08T10:48:26.873
> 
> 标签：javascript, w3c

我发现当设置位置属性时，页面不会重定向 util 运行的 javascript，但 window.open 将立即运行。为什么？有这方面的一些文件吗？下面是测试代码..

```
<html>
<head>
<script type="text/javascript">
window.location.href = ("http://www.baidu.com");
window.open('http://google.com');
//alert(1);
</script>
</head>
<body>
<img src="http://pic5.bbzhi.com/fengjingbizhi/zhongguolvyoufengguanggaoqingbizhi/zhongguolvyoufengguanggaoqingbizhi_448610_9.jpg?q=1"
/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:50:16.767

`window.open`修改重定向**当前**页面时打开一个**新**窗口/选项卡。`location.href`

 **在脚本完成之前不会发生重定向的原因只是浏览器在脚本运行时几乎不会做*任何事情*- 它不是多线程环境。**

# javascript - JQUERY 无限滚动，将脚本应用于新加载的元素

> ID：11862895
> 
> 赞同：0
> 
> 时间：2012-08-08T10:48:43.057
> 
> 标签：javascript, jquery, yii, infinite-scroll

我正在使用 Yii 框架。我想对我的内容（图片）进行无限滚动。这部分工作正常。我唯一的问题是我必须有一个脚本才能对我的图像产生一些影响（比如让它们变大并在点击它们时显示一些文本）。当我没有无限滚动时，此脚本可以正常工作：

```
<?php

   Yii::app()->clientScript->registerScript('overlayimage','
        $(".overlay").hide();

        $(".box").click(function() {

            if($(this).hasClass("col5"))
            {
                $(this).removeClass("col5").addClass("col3").fadeIn(400).find(".overlay").fadeOut(400);
                $(".items").masonry("reload");
                $(this).clearQueue();
            }

            else
            {
                $(".items").find(".col5").removeClass("col5").addClass("col3").fadeIn(400).find(".overlay").fadeOut(400);
                $(this).removeClass("col3").addClass("col5").fadeIn(400).find(".overlay").fadeIn(400);
                $(".items").masonry("reload");
                $(this).clearQueue();
            }

        })
   ',CClientScript::POS_READY);
?> 
```

但是，当有无限滚动时（脚本在 中`CClientScript::POS_LOAD`），脚本对新添加的元素不起作用。我尝试在无限滚动后添加相同的脚本，`CClientScript::POS_LOAD`但在这种情况下，对于某些元素，脚本会执行 2 次，我认为在不同的地方重复代码不是正确的方法。

任何人都可以帮助我找出我应该把我的脚本放在哪里也可以为新加载的元素执行？

以防万一[这里](http://xycomm.linkmesrl.com/site/etaoin)是有问题的示例页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:57:48.890

听起来您遇到了添加新项目的问题，我猜测`.box`您的图像的元素，而 jQuery 不会将处理程序附加到这些。这种情况的另一个症状是 jQuery 交互作用于页面首次加载时存在的元素，但不适用于您滚动到的任何新元素。

您需要使用 .on() 而不是[.click()](http://api.jquery.com/on/)。您特别感兴趣的应该是委派事件部分。

无论如何，您可能需要如下格式：

```
$("<parentSelector>").on("click", ".box", function(event) { //do some fancy stuff here }) 
```

parentSelector 需要是一个包含 的元素`.box`，并且是页面的永久部分，即在页面加载时加载并且不会消失。

# jquery - 什么控制 jQuery mobile 中标题项的截断？

> ID：11862902
> 
> 赞同：0
> 
> 时间：2012-08-08T10:49:11.073
> 
> 标签：jquery, jquery-mobile

下面的代码会截断标题“这是一些标题文本”，即使文本似乎有空间显示。可以在有空间的地方显示文本吗？

```
<div data-role="page" id="pageone">

        <div data-role="header" data-theme="b">
                <h4>This is some header text</h4>
        </div>

        <div data-role="content"  data-theme="b" id="mycontent">

        </div>

        <div class="footerDate" data-role="footer" data-theme="b">

        </div>

</div> 
```

截断的文本：

![在此处输入图像描述](../Images/eb4c1a40279f125436d5abc75fc79680.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:11:47.840

您可以通过覆盖 CSS 中的以下类来修改应用于标题文本的样式：

```
.ui-header h<x> {

} 
```

用于`text-overflow: initial;`去除省略号。

玩`margin-left`并`margin-right`最大限度地利用目标设备上的可用空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:15:34.140

您可以尝试更改`jquery.mobile-1.1.1.min.css`（如果您已下载），也可以尝试从您自己的样式表中覆盖样式

```
.ui-header .ui-title, .ui-footer .ui-title { margin: 0.6em 5% 0.8em; } 
```

您可以尝试将其更改为**5%**，它会减少双方的利润，这将解决您的问题，因为它最初是这样的`.ui-header .ui-title, .ui-footer .ui-title { margin: 0.6em 30% 0.8em; }`，所以只需尝试更改**`30%`**为**`5%`**或相应地，希望它可以工作。

# c++ - 从包含的类调用容器类中定义的回调函数的推荐方法是什么？

> ID：11862904
> 
> 赞同：6
> 
> 时间：2012-08-08T10:49:12.883
> 
> 标签：c++, oop

想象一下，您有一个如下所示的类层次结构：

```
class Robot
{
public:
    void OnTaskCompleted() {}

private:
    Task *m_pTask;
};

class Task
{
public:
    virtual void DoTask() = 0;
};

class TidyUp : public Task
{
public:
    void DoTask()
    {
        // When TidyUp task is compeleted invoke OnTaskCompleted() from here.
    }
}; 
```

我需要从`OnTaskCompleted()`打电话`TidyUp::DoTask()`。推荐的方法是什么？

我想避免：

*   使 OnTaskCompleted() 静态
*   将机器人指针传递给任务

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:02:21.423

除非您的程序中只有一个，并且该机器人的实例是静态可用的，否则该`static`路线是不可行的。`Robot`

将 a 传递`Robot`给任务可能没问题，但它可能会泄露太多信息并禁止任务与机器人以外的对象一起使用。

第三种选择是为完成通知创建一个类似接口的类，在 中扩展它`Robot`，并从任务中调用它。不幸的是，C++ 并没有让你进入虚拟继承领域，这让你变得特别容易。

您可以采用 POSIX 线程库中常见的回调方法（传递 void 指针和采用 void 指针的函数指针），但这不是 C++ 风格。

最后，如果您使用的是 C++11，您可以使用[匿名函数](http://en.wikipedia.org/wiki/Anonymous_function#C.2B.2B)，通过将函数和在其上运行的对象包装在单个闭包中，无需使用外部库（例如 boost），即可非常优雅地解决问题。

这是第三种方法的快速示例（[指向 ideone 的链接](http://ideone.com/B1pvK)）：

```
#include <iostream>
#include <string>
using namespace std;

class WithNotification {
public:
    virtual void notify()=0;
};

class Robot : public virtual WithNotification {
private:
    string name;
public:
    Robot(const string& n) : name(n) {}
    virtual void notify() {cout << name << " has been notified" << endl; }
};

class Task {
private:
    WithNotification& onFinished;
public:
    Task(WithNotification& f) : onFinished(f) {}
    void run() {
        cout << "The task is running" << endl;
        onFinished.notify();
    }
};

int main() {
    Robot r1("Quick");
    Robot r2("Brown");
    Task t1(r1);
    Task t2(r2);
    t1.run();
    t2.run();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:31:28.343

根据 Xeo 的建议，我做了这样的事情：

```
#include <iostream>
#include <functional>

typedef std::tr1::function<void (int)> CallbackFunc;

class Task
{
public:
    Task(CallbackFunc callbackFunc) : m_callbackFunc(callbackFunc) {}
    virtual ~Task() {}
    virtual void DoTask() = 0;
protected:
    CallbackFunc m_callbackFunc; 
};

class TidyUp : public Task
{
public:
    TidyUp(CallbackFunc callbackFunc) : Task(callbackFunc) {}
    void DoTask() {
        std::cout << "I love tidying up!" << std::endl;
        m_callbackFunc(6); // When TidyUp task is compeleted invoke OnTaskCompleted() from here.
    }
};

class Robot : private Uncopyable
{
public:
    Robot() : m_pTask(new TidyUp(std::bind(&Robot::OnTaskCompleted, this, std::placeholders::_1))) {}
    ~Robot() { delete m_pTask; }
    void DoTask() { m_pTask->DoTask(); }
    void OnTaskCompleted(int nCleannessLevel) { std::cout << "Done!  Cleanness Level: " << nCleannessLevel << std::endl; }
private:
    Task *m_pTask;
};

int main()
{
    Robot robot;
    robot.DoTask();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:52:52.567

我会传递一个指针。`Task`但是，如果您不仅打算使用，请`Robot`考虑制作一个`TaskDelegate`用于发送通知的接口：

```
class TaskDelegate
{
public:
    virtual void onTaskFinished(Task *sender) = 0; //implement in successors

protected:
    ~TaskDelegate() {} //don't allow deletion via interface pointer
}; 
```

现在您的`Task`课程将如下所示：

```
class Task
{
    Task(TaskDelegate *delegate) {...}
    ...
}; 
```

继承`Robot`成为`delegate`

```
class Robot : public TaskDelegate {...} 
```

因此`Task`能够通知任何实现`TaskDelegate`接口的对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:53:14.267

如果不将任何内容传递给包含的类，就无法解决这个问题。最简单的方法是`Robot`从包含该`OnTaskCompleted`方法的纯虚拟基类继承，并让`Task`该类具有指向该虚拟基类的指针或引用，并将`Robot`实例传递给包含的`Task`类。您可以将其作为模板参数传递给模板化类，而不是让`Robot`该类继承自基`Task`类。

另一种解决方案是制作`Task`一个模板类，并将`this->OnTaskCompleted`函数作为模板参数传递。就像是：

```
template<class Callback>
class Task
{
public:
    void DoTask()
    {
        // ...

        Callback();
    }
};

class Robot
{
public:
    Robot()
    {
        m_pTask = new Task<this->OnTaskCompleted>;
    }

    // ...
}; 
```

如果最后一种方法有效，我实际上不知道，因为我还没有尝试过。

如您所见，无论是从我的答案还是其他答案中，都有很多方法可以做到这一点。它们实际上都不是执行此操作的“官方”或“推荐”方式。但是几乎所有这些都需要您将一个类或一个对象传递给`Task`该类。

# c# - 创建然后删除文件导致 IOException

> ID：11862908
> 
> 赞同：8
> 
> 时间：2012-08-08T10:49:42.570
> 
> 标签：c#, .net

应用程序需要在目录中创建文件，在目录中执行某些操作，然后删除该文件。例如下面的源代码：

```
File.Create("textfile.txt");
// Do something here
File.Delete("textfile.txt"); 
```

如果“某事”是一个只需要很短时间的进程，File.Delete 将抛出 IOException（文件正在被另一个进程使用）。根据另一个 SO 帖子：[Cannot delete directory with Directory.Delete(path, true)](https://stackoverflow.com/questions/329355/cannot-delete-directory-with-directory-deletepath-true)，调用 Thread.Sleep(0) 应该允许前一个进程完成。然而，即使有

```
File.Create("textfile.txt");
// Do something here
Thread.Sleep(0);
File.Delete("textfile.txt"); 
```

仍然会抛出相同的 IOException。

我得到的解决方案是一个while循环，它试图重复删除文件直到它被删除。但我想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-08T10:53:10.287

[File.Create](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx)方法将创建一个文件流，您需要正确处理该文件流。我建议以下代码：

```
using(FileStream fs = File.Create("textfile.txt"))
{
    // Do something here.
}
File.Delete("textfile.txt"); 
```

请注意，此代码完全按照 MSDN 文档中的建议...

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-08T10:52:13.270

`File.Create`返回一个 FileStream，它代表该文件的打开句柄。将该调用的结果包装在 using 块中以确定性地关闭句柄。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T10:59:40.350

另请注意：如果您不想在文件中写入任何内容，则可以通过两种方式避免“使用”：

```
(1) File.WriteAllText("textfile.txt", string.Empty);
(2) File.Create("textfile.txt").Dispose(); 
```

在情况（2）中，避免使用是安全的，因为您没有做任何可能在创建它和处置它之间引发异常的事情。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-08T10:53:48.100

File.Create 返回一个 FileStream，它是该文件的打开句柄。改用这个：

```
using(FileStream fs = File.Create("textfile.txt"))
{}

File.Delete("textfile.txt"); 
```

# python - 计算字典中的值

> ID：11862911
> 
> 赞同：1
> 
> 时间：2012-08-08T10:49:56.877
> 
> 标签：python, list, dictionary, python-3.x

我有一个字典，其中的值是列表，我想计算每个项目在与每个键关联的列表中出现的次数。例如： `my_dict= {10:[23,24,23,23,24],11:[17,23,23,17,24]}` 会生成`10:(23:3,24:2),11:(17:2,23:2,24:1)`

我试过使用

```
from collections import Counter
counts = Counter((k, v) for k, v in my_dict.items())
print(counts) 
```

我在[这里](https://stackoverflow.com/questions/5490078/python-counting-repeating-values-of-a-dictionary)找到了，但没有成功，因为这些值是列表，所以是不可散列的。我一直在摆弄 collections.Counter 和字典的结构一段时间，但似乎没有任何效果。我在网上找到的所有解决方案都是针对每个键一个值的字典，以及整个字典中的重复项，而不是每个键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:51:26.437

```
>>> from collections import Counter
>>> my_dict= {10:[23,24,23,23,24],11:[17,23,23,17,24]}
>>> {k: Counter(v) for k, v in my_dict.items()}
{10: Counter({23: 3, 24: 2}), 11: Counter({17: 2, 23: 2, 24: 1})} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:52:49.040

```
counts = {k:Counter(v) for (k,v) in my_dict.items()} 
```

# python - connection._rollback() django... 多远？

> ID：11862917
> 
> 赞同：0
> 
> 时间：2012-08-08T10:50:07.750
> 
> 标签：python, django, postgresql

我目前正在使用 django 处理 postgresql，但在尝试时遇到了一些问题：除了：postgre 保留旧查询并阻止所有内容的语句。

为了纠正这个问题，我发现 django.db.connection._rollback() 会将连接重置到过去的某个时间点，让我可以要求进一步的查询。

我的问题是： _rollback() 重置了多远？

假设我有一个表成员：

如果我设法创建了 4 个成员，但第 5 个成员已经在数据库中 - 我将更新它：

```
 for members in member_list:
    try:
        create_member(member)
    excepte blabla, e:
        rollback()
        update_member() 
```

它会创建 4 个第一批成员吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:57:04.227

回滚应该将数据库的状态设置回事务开始的时间点。起点当然取决于您正在使用哪种事务管理 - 或者 - 何时发生提交。您应该阅读有关[事务管理](https://docs.djangoproject.com/en/dev/topics/db/transactions/?from=olddocs)的 django 文档。

# asp.net - 使用 ASP 和 VB.net 从三个组合框获取日期为 dd/mm/yyyy

> ID：11862918
> 
> 赞同：0
> 
> 时间：2012-08-08T10:50:08.983
> 
> 标签：asp.net, vb.net, date, combobox

我正在尝试以下拉列表的形式从用户那里获取日期，如下所示：

**ASP 代码**

```
 <div class="content-topwidth">
                    <asp:Label ID="lblDOB" runat="server" Text="Label">Enter DOB</asp:Label>
                    <div id="three-cases-cal">
                    <asp:DropDownList ID="ddlDay" runat="server">
                    </asp:DropDownList>
                    <asp:DropDownList ID="ddlMonth" runat="server">
                    </asp:DropDownList>
                    <asp:DropDownList ID="ddlYear" runat="server">
                    </asp:DropDownList>
                    </div>
                </div> 
```

**像这样的东西：**

![出生日期](../Images/151e9134bdff05ab1ea04bbe428518fb.png)

我必须在 VB 中编写代码并将这些组合框中的值保存在数据库中。

例如：我有一个***USERINFO***表，并且有一列作为***DOB***，因此从这些组合框中获取的日期以 dd/mm/yyyy 形式存储在该列中。

任何人都可以帮助我使用VB代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:00:46.953

您必须连接日、月和年值并将字符串日期转换为`DateTime`使用`DateTime.ParseExact`或`DateTime.TryParseExact`方法。

```
Dim str=ddlDay.SelectedValue & "-" & ddlMonth.SelectedValue & "-" & ddlYear.SelectedValue
Dim myDate as DateTime
IF DateTime.TryParseExact(str,"dd-MM-yyyy",
        System.Globalization.CultureInfo.InvariantCulture,
          System.Globalization.DateTimeStyles.None,myDate) Then
   //valid date
End IF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:01:43.930

我已经在 Page 的 Page_Load 事件中编写了这段代码，希望对你有帮助

```
Protected Sub Page_Load(sender As Object, e As EventArgs)

Dim mdate As String = ddlDay.ToString() & "/" & ddlMonth.ToString() & "/" & ddlYear.ToString()

Dim connection As String = "Data Source=.;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword;" 'Change datasource, username and password Datasource may be . or if you have sqlexpress then it be .\SqlExpress

    Dim query As String = "Insret into USERINFO(DOB) VALUES('"&mdate&"');"
    Dim con As New SqlConnection(connection)
    Dim cmd As New SqlCommand()
    cmd.CommandText = query
    cmd.CommandType = CommandType.Text
    cmd.Connection = con
    con.Open()
    cmd.ExecuteNonQuery()
    con.Close()
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:42:27.027

使用它来收集值并保存到 DateTime

```
Dim year as integer = CInt(ddlYear.SelectedValue)
Dim month as integer = CInt(ddlMonth.SelectedValue)
Dim day as integer = CInt(ddlDay.SelectedValue)

Dim DOB as DateTime  = New DateTime(year, month, day) 
```

所以你可以在数据库中保存DOB

在编辑页面时设置值

用这个

```
ddlYear.SelectedValue = DOB.Year.ToString()
ddlMonth.SelectedValue = DOB.Month.ToString()
ddlDay.SelectedValue = DOB.Day.ToString() 
```

# liferay - 在 Liferay 6.0.6 中更改 .sprint.png 文件名

> ID：11862921
> 
> 赞同：0
> 
> 时间：2012-08-08T10:50:14.363
> 
> 标签：liferay, sprite, liferay-6, siteminder

Liferay 门户版本：6.0.6

在 Liferay 门户中，我正在尝试将自动生成的 .sprite.png 文件名的文件名更改为不以句点开头的内容（。）

原因是 Siteminder 不允许文件以句点 (.) 开头

我签入了 6.1，有一个我们可以设置的门户属性

```
sprite.file.name=_sprite.png
sprite.properties.file.name=_sprite.properties 
```

你们对如何在 6.1 之前的旧版本中进行更改有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:47:22.047

Have you tried setting these values in 6.0.6? I see these two properties in 6.0 PropsValues.java too. Can you try and report back?

# forms - 文本字段不应允许在其上输入任何数据

> ID：11862923
> 
> 赞同：0
> 
> 时间：2012-08-08T10:50:16.987
> 
> 标签：forms

我创建了一个带有一些文本字段的表单，并且根据某些条件，我需要禁用一个文本字段，该字段不应允许在其上输入数据。我可以禁用该字段，但仍然允许在其上输入数据。

我使用了以下代码：

```
var thisItem = document.thisItem;
var state = thisItem.getProperty("state");
if(state=="New") {  
  var correction  = getFieldByName("correction");
        if(correction) {
          var correction_Style = correction.style;
          correction.disabled = true;
          correction_Style.visibility = "visible";
          correction_Style.display = "block";       
          correction_Style.readOnly = true;      
       }
} 
```

请帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:07:04.760

您可以在呈现时将 readonly 属性添加到表单元素吗？这应该会阻止任何人将数据输入其中。

```
<form action="form_action.php">
  Country: <input type="text" name="country" value="uk" readonly="readonly" /><br />
  <input type="submit" value="Submit" />
</form> 
```

# oracle - Oracle DB - 如果 Query1 的结果为空，请尝试 Query2

> ID：11862924
> 
> 赞同：0
> 
> 时间：2012-08-08T10:50:17.577
> 
> 标签：oracle

我“继承”了一个数据库应用程序（基于 Oracle 10g 数据库并用 Delphi 编写），它必须做出如下几个决定：

```
Do Query1.
If the result set is empty, do Query2. 
```

查询是`SELECT`具有相同输出列、有时相似（案例 1）、有时不同（案例 2）输入 (FROM) 和条件 (WHERE) 的查询。

**情况 1：**有时差异是：`col like 'x'`(or col = 'x') 变为`col like '%'`.

*   性能：最好使用两个不同`col = 'x'`的查询（另一个没有它的查询）。
*   可维护性：`col like :param`更好，因为它不需要 2 个查询
*   妥协解决方案：`AND (col = 'x' OR :param = 1)`

**案例 2：**如果 Query1 的结果集中没有数据，我必须使用完全不同的 Query2。

* * *

通过搜索[stackoverflow](https://stackoverflow.com/questions/7321444/if-data-exists-else-using-oracle-sql)和互联网，我知道我的问题有几个解决方案：

1.  使用两个 SQL 查询：让程序代替数据库做工作（但需要查询数据库两次而不是只查询一次）

    ```
    result = executeQuery(Query1)
    if (isEmpty(result))
    result = executeQuery(Query2) 
    ```

2.  使用 UNION：让 Oracle 完成所有工作（但需要执行 Query1 两次）：

    ```
    Query1 UNION ALL Query 2 WHERE NOT EXISTS (Query 1) 
    ```

3.  使用 PL/SQL：让 Oracle 完成大部分工作（但我在某处读到，每次都以这种方式编译查询）

    ```
    begin
     Query1;
    exception when no_data_found then
     Query2;
    end; 
    ```

* * *

我的问题是：

1.  还有其他（更好的）解决方案吗？
2.  您（作为比我更有经验的数据库用户）会使用什么？
3.  有什么（缺点）优点？
4.  有什么注意事项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:55:05.957

在许多情况下，您可以`UNION`通过使用不太严格`WHERE`的子句来避免，但包含一个`ORDER BY`子句以便首先出现更好的匹配结果。如有必要，您可以使用`ROWNUM`伪列将结果限制为第一个。

例如，而不是

```
 BEGIN
   SELECT * INTO myrec FROM mytable WHERE xxx = 'x';
 EXCEPTION
   WHEN NO_DATA_FOUND THEN
     SELECT * INTO myrec FROM mytable WHERE xxx like '%x%';
 END; 
```

你可以写

```
 SELECT * INTO myrec FROM (
   SELECT * FROM mytable WHERE X like '%x%'
     ORDER BY CASE when xxx='x' THEN 1 ELSE 2 END
 ) WHERE ROWNUM=1; 
```

注意嵌套`SELECT`语句；这是必要的，因为否则，该`WHERE ROWNUM=1`子句将在`ORDER BY`发生之前限制结果集。

# zend-framework - PHP Google 日历 API：删除事件

> ID：11862929
> 
> 赞同：1
> 
> 时间：2012-08-08T10:50:36.353
> 
> 标签：zend-framework, google-calendar-api

我正在尝试将谷歌日历集成到我的 php 应用程序中。我正在使用 Zend 框架。我设法添加和检索事件。但是删除事件对我不起作用。这是我的代码（我从 IBM 的教程中复制的）

```
<?php
// load classes
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
Zend_Loader::loadClass('Zend_Gdata_Calendar');
Zend_Loader::loadClass('Zend_Http_Client');

// connect to service    
$gcal = Zend_Gdata_Calendar::AUTH_SERVICE_NAME;
$user = "username@gmail.com";
$pass = "pass";
$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $gcal);
echo 'I m connected ';
$gcal = new Zend_Gdata_Calendar($client);    

// retrieve event
// delete event
try {   

  $event = $gcal->getCalendarEventEntry('http://www.google.com/calendar/
   feeds/default/private/full/xxxxxxxxxxxx');
echo 'eventUrl got';
  $event->delete();
echo 'deleted';
} catch (Zend_Gdata_App_Exception $e) {
  echo "Error: " . $e->getResponse();
}        
echo 'Event successfully deleted!';  
?> 
```

事件没有被删除。'eventUrl got' 没有被打印，也没有捕获到异常！我用我在谷歌日历中找到的cookie替换了getCalendarEventEntry中的xxxxxxx（日历->设置>日历的URL地址-> XML）
我做错了什么？谢谢您的帮助

# python - 在python中跟踪路由多个主机

> ID：11862930
> 
> 赞同：1
> 
> 时间：2012-08-08T10:50:42.307
> 
> 标签：python, file, subprocess, hostname, traceroute

我正在编写一个脚本来为主机名列表执行跟踪路由。我要做的是逐行从文本文件中读取主机名，使用子进程为每个主机执行跟踪并将结果写入另一个文件。这是我的代码

```
 # import subprocess
    import subprocess
    # Prepare host and results file
    Open_host = open('c:/OSN/host.txt','r')
    Write_results = open('c:/OSN/TracerouteResults.txt','a')
    host = Open_host.readline()
    # while loop: excuse trace route for each host
    while host:
       print host
    # execute Traceroute process and pipe the result to a string 
       Traceroute = subprocess.Popen(["tracert", '-w', '100', host],  
     stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
       while True:    
           hop = Traceroute.stdout.readline()
           if not hop: break
           print '-->',hop
           Write_results.write( hop )
       Traceroute.wait()  
    # Reading a new host   
       host = Open_host.readline()
    # close files
    Open_host.close()
    Write_results.close() 
```

我的问题是该脚本仅适用于具有 1 个主机名（或 1 行）的主机文件。当主机文件包含多行时，例如：hostname1.com hostname2.com hostname3.com 它会在第一两行给我这个通知

“无法解析目标系统名称 hostname1.com”

“无法解析目标系统名称 hostname2.com”

并且只给出最后一行的 tracert 结果。

我不确定我的脚本有什么问题，请帮助我修复它。非常感谢。

史蒂文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:55:40.363

`host = host.strip()`拨打电话前先试一下；tracert 似乎在换行符上窒息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T21:14:36.187

你最好只使用scapy。

```
 #! /usr/bin/env python

# Set log level to benefit from Scapy warnings
import logging
logging.getLogger("scapy").setLevel(1)

from scapy.all import *

if __name__ == "__main__":
    hosts   = raw_input('Hostnames you would like to traceroute sepearated by a comma: ')
    ttl     = raw_input("Time To Live: ")
    if not ttl: ttl = 20
    traceroute([x.strip() for x in hosts.split(',')],maxttl=ttl) 
```

参考：[https ://gist.github.com/mwatts272/6192900](https://gist.github.com/mwatts272/6192900)

# jquery - jQuery Dropdown Mouseout 仅在 div 之外时

> ID：11862935
> 
> 赞同：1
> 
> 时间：2012-08-08T10:50:51.087
> 
> 标签：jquery, css, drop-down-menu, mouseover, mouseout

**问题**

只有当用户离开 DIV 时，MouseOut 才会熄灭。所以他们可以将鼠标悬停在链接等上。它只是保持扩展它不会返回

**JS Fiddle 和 DEMO** ( [http://jsfiddle.net/GHaL7/3/](http://jsfiddle.net/GHaL7/1/) )

**jQuery**

```
$(document).ready(function () {
    $("#hoverButton").mouseover(function () {
        $('div.hoverMenu').slideDown(2000)
    });
    $("div.hoverMenu").mouseout(function () {
        $('div.hoverMenu').slideUp(2000)
    }); 
}); 
```

**CSS/HTML**

```
<style type="text/css">
.grooveKhaleelMenu{position:relative;z-index:10000}
.hoverMenu{display:none;width:233px;height:350px;position:absolute;top:26px}
div.hoverMenu ul li{margin-top:2px;margin-bottom:2px}
div.hoverMenu ul li a span{font-size:16px !important}
.nav_zone{float:left;height:24px;margin:0;padding:0;position:relative;z-index:10000}
.nav_menu li{float:left;margin-right:1px;overflow:hidden;width:233px;height:24px;display:block}
.nav_menu a{display:block;margin-top:0px;padding-bottom:2px;text-decoration:none;font-size:18px}
.newshop{position:relative;z-index:700}
.grooveKhaleelMenu li, .grooveKhaleelMenu li a{color:#fff;text-align:center}
.blackLink{background:#000}
.blackLink:hover{background:#525252}
.redLink{background:#d40f20}
.redLink:hover{background:#e82e22}
</style>

<div class="shoulders topofthedress">
    <div class="nav_zone">
        <nav>
            <ul class="nav_menu grooveKhaleelMenu">
                <li class="blackLink" id="hoverButton"><a href="/shop" title="Shop all"><span>SHOP</span></a></li>
                <div class="hoverMenu">
                    <ul>
                        <li class="blackLink"><a href="/shop/cat/sub" title="Sub Cat"><span>Sub Cat</span></a></li>
                                <li class="blackLink"><a href="/shop/cat/sub" title="Sub Cat"><span>Sub Cat</span></a></li>
                                <li class="blackLink"><a href="/shop/cat/sub" title="Sub Cat"><span>Sub Cat</span></a></li>
                                <li class="blackLink"><a href="/shop/cat/sub" title="Sub Cat"><span>Sub Cat</span></a></li>
                                <li class="blackLink"><a href="/shop/cat/sub" title="Sub Cat"><span>Sub Cat</span></a></li>
                                <li class="blackLink"><a href="/shop/cat/sub" title="Sub Cat"><span>Sub Cat</span></a></li>
                        <li class="blackLink"><a href="/shop/cat/sub" title="Sub Cat"><span>Sub Cat</span></a></li>
                        <li class="redLink"><a href="/shop/cat/sub" title="Sub Cat"><span>Sub Sale Cat</span></a></li>
                    </ul>
                </div>
                <li class="blackLink"><a href="/shop/cat"><span>Shop Cat</span></a></li>
                <li class="blackLink"><a href="/shop/cat"><span>Shop Cat</span></a></li>
                <li class="redLink"><a href="/shop/cat"><span>Sale Cat</span></a></li>
            </ul>
        </nav>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:53:58.390

为什么你不在脚本中使用 slideUp()？

可能的解决方案：http: [//jsfiddle.net/GHaL7/23/](http://jsfiddle.net/GHaL7/23/)

# java - 从 PL/pgSQL 函数返回行

> ID：11862936
> 
> 赞同：1
> 
> 时间：2012-08-08T10:50:51.773
> 
> 标签：java, postgresql, jdbc, plpgsql

我在 PostgreSQL 中有一个程序：

```
CREATE OR REPLACE FUNCTION get_geom_difference()
RETURNS void AS
$$
BEGIN
SELECT filedata.num,st_area(ST_Difference(ST_TRANSFORM(filedata.the_geom,70066),filedata_temp.the_geom))
FROM filedata, filedata_temp
Where filedata.num=filedata_temp.num

end;
$$
LANGUAGE 'plpgsql' 
```

我用 Java 调用它并希望得到这个过程的结果。如何更改此程序以使其有可能获得结果？以及如何在 JDBC 中使用它？

现在我用这个：

```
Integer fileId;
Class.forName("org.postgresql.Driver");
Connection connect= null;
connect = DriverManager.getConnection("jdbc:postgresql://localhost:5432/postgis","postgres","123456");
java.sql.CallableStatement proc =  connect.prepareCall("{?=call get_geom_difference()}");
proc.registerOutParameter(1, java.sql.Types.Integer);
proc.execute();
ResultSet results = (ResultSet) proc.getObject(1);
while (results.next()) {
fileId=r.getInt("num");
}
proc.close();
connect.close();
out.println(fileId); 
```

但是当我尝试在 JDBC 中调用该过程时，我得到了

> 错误 org.apache.jasper.JasperException：在第 25 行处理 JSP 页面 /commit_changes.jsp 时发生异常

第 25 行是：`proc.execute();`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T14:48:37.653

### 正确的函数定义

```
CREATE OR REPLACE FUNCTION get_geom_difference()
  **RETURNS TABLE (num mumeric, my_area geometry)** AS
$BODY$
   SELECT f.num
         ,st_area(ST_Difference(ST_TRANSFORM(f.the_geom, 70066), t.the_geom))
   FROM   filedata f
   JOIN   filedata_temp t USING (num);
$BODY$
LANGUAGE sql;
```

您正在返回一个复合类型（两列）的 SET，您必须相应地声明该函数。[`RETURNS TABLE`](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)是最方便的方法。

确保对查询中的列名进行表限定，这样它们就不会与`OUT`同名的列冲突。

您可以为这个基本查询使用一个[`language SQL`函数](http://www.postgresql.org/docs/current/interactive/xfunc-sql.html)（或者您可以只执行原始 SQL），不需要 plpgsql。

### 在 SQL 中调用函数

```
SELECT * FROM get_geom_difference(); 
```

### 通过 JDBC 执行

[我在这里](http://jdbc.postgresql.org/documentation/91/callproc.html#callproc-resultset-setof)引用手册

> 不应通过 CallableStatement 接口调用以集合形式返回数据的函数，而应使用普通的 Statement 或 PreparedStatement 接口。

我还从网站上拿了这个例子并对其进行了调整：

```
Statement stmt = conn.createStatement();
stmt.execute(" <function definition from above goes here> ");
ResultSet rs = stmt.executeQuery("SELECT * FROM get_geom_difference();");
while (rs.next()) {
    // do something
}
rs.close();
stmt.close(); 
```

您也可以使用 refcursor。阅读[手册中的更多内容](http://jdbc.postgresql.org/documentation/91/callproc.html#callproc-resultset-setof)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:58:39.563

在您的定义中，您的函数没有返回任何内容`RETURNS void`。如果您想要 num 数据类型，只需更改为`RETURNS numeric`. 此外，要使其正常工作，请对某个数字变量执行选择`SELECT INTO var`并添加`return var`到函数的末尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-08T17:13:14.457

尽管 Erwin 提供了一个很好的答案，但我想我会分享一个函数接受参数的版本，并且我在函数体内使用了新的 postgres 返回查询语法。不同之处在于它似乎设置参数你必须使用 PreparedStatement 接口而不是更高级别的 Statement。这是我的 pg 函数

```
CREATE OR REPLACE FUNCTION gettools(_userid bigint)
  RETURNS table(id bigint,itemname character varying(250)) AS
$BODY$

begin   
    return query 
    select distinct a.id, a.itemname 
    from tool a inner join tooltie b
     on a.id = b.toolid 
     and b.userid=_userid;
end;
$BODY$
  LANGUAGE plpgsql STABLE
  COST 100; 
```

这是我的java，它只是用数据填充地图

```
 private static final String GET_DATASOURCES = "select * from getdatasources(?)";

    public Map<Long, String> getAuthDataSources(Long userid) {
        Map<Long, String> auths = new TreeMap<>();
        try {
          if (connection == null || connection.isClosed()) {
            init();
          }
          PreparedStatement cs = connection.prepareStatement(GET_DATASOURCES);
          // this is where to set the param ? for the function
          cs.setLong(1, userid);
          connection.setAutoCommit(false);        
          ResultSet result = cs.executeQuery();

          while (result.next()) {
            Long id = result.getLong(1);
            String itemname = result.getString(2);
            auths.put(id, itemname);
          }
          cs.close();
          connection.commit();
          connection.setAutoCommit(true);
          connection.close();
        } catch (SQLException ex) {
          LOG.error("error getting data sources", ex);

        }
        return auths;
      } 
```

希望这可以帮助某人。

# tinymce - tinymce setContent 删除新行

> ID：11862938
> 
> 赞同：3
> 
> 时间：2012-08-08T10:50:54.803
> 
> 标签：tinymce

如果我在 textarea 中预加载了内容，那么我会将新行转换为“br”标签。

但是，如果我尝试通过使用其 setContent 函数将内容动态（而不是粘贴）设置到 tinymce textarea，则缺少新行。

我使用 v.3.4.7，尝试了 v.3.5.6（迄今为止最新的），即使在页面加载时它也会删除新行。

```
<script type="text/javascript">
    tinyMCE.init({
        mode: "textareas",
        editor_selector: "EmailBody",
        theme: "advanced",
        language: "en",
        charLimit: 10,
        plugins: "table,advhr,advlink,insertdatetime,preview,print,contextmenu,paste,directionality",
        theme_advanced_buttons1_add: "fontselect,fontsizeselect",
        theme_advanced_buttons2_add: "separator,insertdate,inserttime,preview,zoom,separator,forecolor,backcolor",
        theme_advanced_buttons2_add_before: "pastetext,pasteword,separator",
        theme_advanced_buttons3_add_before: "tablecontrols,separator",
        theme_advanced_buttons3_add: "advhr,separator,ltr,rtl,separator",
        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "left",
        theme_advanced_statusbar_location: "bottom",
        plugi2n_insertdate_dateFormat: "%Y-%m-%d",
        plugi2n_insertdate_timeFormat: "%H:%M:%S",
        paste_use_dialog: false,
        theme_advanced_resizing: false,
        theme_advanced_resize_horizontal: true,
        paste_auto_cleanup_on_paste: true,
        paste_convert_headers_to_strong: false,
        paste_remove_spans: true,
        width: "100%",
        paste_remove_styles: true,
        valid_elements: "a[href|target=_blank],strong/b,div[align],p,br,i,u",
        content_css: "/css/tinymce_bigger_default_font.css",
        forced_root_block: false,
        force_br_newlines: true,
        force_p_newlines: false,
        apply_source_formatting: false,
        remove_linebreaks: false,
        convert_newlines_to_brs: true
    });
</script>

function Click()
{
    var text = document.getElementById("preText").innerText;
    tinyMCE.activeEditor.setContent(text);
}

<pre id="preText">Text

Text
</pre> 
```

结果必须如下：

```
Text

Text 
```

但相反，我得到：

```
TextText 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T03:46:53.383

如何替换新行以在初始内容集上换行：

`convert_newlines_to_brs`并且`remove_linebreaks`参数已从 tinymce 中删除（检查您的 tinymce 源代码）。

要恢复`convert_newlines_to_brs`功能，请使用以下代码（取自之前版本的 tinymce）：

```
tinyMCE.init({
    setup : function(ed) {
        ed.onBeforeSetContent.add(function(ed, o) {
            if (o.initial) {
                o.content = o.content.replace(/\r?\n/g, '<br />');
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T11:32:13.067

请参阅我的解决方案。我创建了一个 tinymce 小提琴： http: [//fiddle.tinymce.com/vTbaab](http://fiddle.tinymce.com/vTbaab)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T07:21:20.720

您需要做的就是添加

```
tinyMCE.init({
        ...
        remove_linebreaks : false
}); 
```

[这在他们的帮助](http://www.tinymce.com/wiki.php/Configuration3x%3aremove_linebreaks)中有很好的记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T18:29:50.210

我尝试了许多其他方法来尝试使其正常工作。它源于原始开发人员未正确声明帖子类型。

前：

```
'supports' => array('title','slug'), 
```

后：

```
'supports' => array('title','slug','editor'), 
```

# magento - 我的布局没有加载到我的 Magento 管理视图中

> ID：11862940
> 
> 赞同：4
> 
> 时间：2012-08-08T10:50:56.977
> 
> 标签：magento

这是我的控制器

```
<?php
class Desbest_Brands_Adminhtml_BrandController extends Mage_Adminhtml_Controller_action {
    public function indexAction() {
        //echo "showing 123 works!";
        $this->loadLayout(); $this->renderLayout();
    } 
```

这是我的布局

```
<?xml version="1.0"?>
<layout version="1.0.0">
<brands_adminhtml_brand_index>
    <reference name="content">
        <block type="brands/adminhtml_brand" name="brand" />
        <block type="newsletter/subscribe" name="left.newsletter" template="newsletter/subscribe.phtml"/>
    </reference>
</brands_adminhtml_brand_index>
</layout> 
```

然而，当我在我的管理员中显示视图时，没有加载任何内容，甚至没有加载电子邮件订阅表单。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T12:38:21.283

如果您的操作被正确调用（显示了 echo 123），除了缓存问题之外，您的句柄可能有问题。

在您的操作中，尝试将此代码放在`$this->loadLayout()`：

```
var_dump(Mage::getSingleton('core/layout')->getUpdate()->getHandles());
die(); 
```

它将显示为该请求加载的所有句柄。

句柄是从 fullActionName 生成的，简单来说，我们可以说它是这样生成的：

```
route + controller + action 
```

看看你的 config.xml。

如果您的 config.xml 喜欢：

```
<admin>
    <routers>
        <brands>
            <use>admin</use>
            <args>
                <module>Desbest_Brands</module>
                <frontName>brands</frontName>
            </args>
        </brands>
    </routers>
</admin> 
```

对于您的操作，它将生成句柄：`<brands_adminhtml_brand_index>`

如果您的 config.xml 喜欢：

```
<admin>
    <routers>
        <brandsadmin>
            <use>admin</use>
            <args>
                <module>Desbest_Brands</module>
                <frontName>brands</frontName>
            </args>
        </brandsadmin>
    </routers>
</admin> 
```

对于您的操作，它将生成句柄：`<brandsadmin_adminhtml_brand_index>`

更新：

并且不要忘记在 config.xml 中定义您的管理布局，例如：

```
<adminhtml>
    <layout>
        <updates>
            <brandsadmin>
                <file>yourlayoutname.xml</file>
            </brandsadmin>
        </updates>
    </layout>
</adminhtml> 
```

把它放在 app/design/adminhtml/default/[default/youradmintheme]/layout/yourlayoutname.xml 下

# regex - 正则表达式匹配所有以可选空格和单引号开头的行

> ID：11862941
> 
> 赞同：0
> 
> 时间：2012-08-08T10:50:57.507
> 
> 标签：regex

给定这样的文件：

```
'declare a string variable
Dim s as string

For x = 1 to 10
 ' add Hello to string
 s=s+"Hello"
End for 
```

我需要一个正则表达式来删除代码中的所有注释：

正则表达式将返回：

```
'declare a string variable
' add Hello to string 
```

请注意，引号前后可能有空格。

如果它有所作为，我打算通过 grep 运行它以从一堆 *.vb 文件中获取所有评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:53:17.833

搜索这个

`^\s*'`

`^`表示在行首 `\s*`表示匹配尽可能多的空格（可选无空格） `'`是您要查找的注释

并匹配与该正则表达式匹配的任何行，您可以拼接出所有注释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:52:31.633

要匹配行`'`首`^`的 a，请使用：

```
^' 
```

# windows-phone-7 - 当它在文本框中的文本换行时如何增加高度？

> ID：11862942
> 
> 赞同：0
> 
> 时间：2012-08-08T10:51:04.707
> 
> 标签：windows-phone-7, textbox, word-wrap

我们需要在我们的 windows phone 应用程序的文本框中处理更多细节。当用户在文本框中输入一些字符串和文本换行支持时。文本框中的文本内容文本换行时如何增加高度？

作为流：

```
 <StackPanel x:Name="BuildDefaltTask_SP" Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <TextBox x:Name="AddNewTaskContent_TB" Height="150" Margin="-12" FontSize="26" FontWeight="ExtraBold" TextWrapping="Wrap" Style="{StaticResource TextBoxStyle}"></TextBox>
    </StackPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:24:48.097

如果您将 设置`Height`为`Auto`，那么当您输入更多行时，它应该与文本一起增长。

您也可以从代码中执行此操作：例如[将文本框的高度设置为自动在代码隐藏中为动态创建的文本框](https://stackoverflow.com/questions/11385026/setting-height-of-textbox-to-auto-in-code-behind-for-a-dynamically-created-textb)

或者你可以自己控制大小`MeasureText`- [Autoresize textbox control vertical](https://stackoverflow.com/questions/2893059/autoresize-textbox-control-vertically)

# user-interface - 用于 Web 应用程序的规则驱动的用户界面呈现技术/框架

> ID：11862945
> 
> 赞同：1
> 
> 时间：2012-08-08T10:51:09.027
> 
> 标签：user-interface, workflow

我正在设计应满足以下主要要求的 Web 应用程序 -

> 用户界面应根据用户操作和与之关联的业务规则动态呈现。

例如 - 将用户集视为 U1、U2、U3。将角色集视为 Role1、Role2 和 Role3，其映射如下：

```
U1 --> (Role1) 
U2 --> (Role1 and Rol3) 
U3 --> (Role2) 
```

会有一组与用户操作相关的业务规则，例如：

```
If U1 logs in on screen1 and enters amount > 1000 --> disable dropdown list and submit button on screen1
If U1 logs in on screen2 and enters derived amount < 5000 --> enable submit button on screen2 
```

我尝试针对此要求评估 DROOLS；似乎需要构建将使用这些规则、用户角色的自定义组件，然后返回一组需要在用户界面上呈现的 UI 组件。

任何人都可以提出更好的方法吗？

# java - 无法正确理解代码

> ID：11862947
> 
> 赞同：1
> 
> 时间：2012-08-08T10:51:21.557
> 
> 标签：java, swing, jframe, translucency

在下面的代码中，我无法理解`setBackground()`方法设置哪个图层的背景。其次，当我包含这条线时，为什么窗口中会出现一个洞，这意味着当我在窗口之间点击时，它会最小化，因为我点击了其他地方。

```
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
java.awt.GraphicsDevice;
import java.awt.GraphicsDevice.WindowTranslucency;
import java.awt.GraphicsEnvironment;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class transparentWindow extends JFrame {

public transparentWindow() {
    // TODO Auto-generated constructor stub
    //JFrame jfrm=new JFrame("Transparent Window");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(300,200);
    getContentPane().setLayout(new FlowLayout());
    //setBackground(new Color(0,0,0,0));

    add(new JButton("Enter"));
    setOpacity(0.7f);
    setVisible(true);
}
public static void main(String[] args) {
    // TODO Auto-generated method stub
    GraphicsEnvironment ge=GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice gd=ge.getDefaultScreenDevice();
    if(!gd.isWindowTranslucencySupported(WindowTranslucency.TRANSLUCENT))
    {
        System.out.println("Transparency not supported");
        System.exit(0);
    }
    JFrame.setDefaultLookAndFeelDecorated(true);
    SwingUtilities.invokeLater(new Runnable(){public void run(){new transparentWindow();}});
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:53:07.203

所有没有在特定对象上调用的方法，实际上都被调用了`this`，所以

```
setBackground(new Color(0,0,0,0)); 
```

就像

```
this.setBackground(new Color(0,0,0,0)); 
```

这意味着它在`JFrame`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T11:09:40.897

您会发现的另一个问题是，设置框架`opacity`将平等地影响它的所有孩子

如果您想看到一个很好的长时间讨论（和示例），请查看[如何设置 JFrame 背景透明但 JPanel 或 JLabel 背景不透明？](https://stackoverflow.com/questions/11703794/how-to-set-jframe-background-transparent-but-jpanel-or-jlabel-background-opaque/11705029#11705029)

# json - 用它们的持久版本替换浅层 Hibernate 对象

> ID：11862950
> 
> 赞同：0
> 
> 时间：2012-08-08T10:51:28.353
> 
> 标签：json, hibernate, serialization

我正在使用 Hibernate 3.6.10 来持久化一组对象。对象 B 包含对对象 A 的引用：

```
@Entity
@Table(name = "OBJECT_A")
class ObjectA {
    @Id
    String id;

    @Basic
    String name;
}

@Entity
@Table(name = "OBJECT_B")
class ObjectB {
    @Id
    String id;

    @ManyToOne(optional = false)
    @Cascade({CascadeType.SAVE_UPDATE})
    ObjectA objectA;

    @Basic
    String name;
} 
```

我正在尝试`ObjectB`使用对持久对象的引用来创建新的实例，`ObjectA`而无需先从数据库中加载实例`ObjectA`。例如：

```
ObjectA objA = new ObjectA();
objA.id = 42; // same ID as persisted object, but not loaded from db

ObjectB objB = new ObjectB();
objB.objectA = objA;
objB.name = "The Answer";

session.save(objB); 
```

`session.save(objB)`但是失败了：

```
org.hibernate.PropertyValueException: not-null property references a null or transient value: ObjectA.name
    at org.hibernate.engine.Nullability.checkNullability(Nullability.java:100) 
```

显而易见的解决方案是`ObjectA`通过 id 加载实例，但我试图解决`ObjectB`通过从 JSON 反序列化创建实例的情况：

```
{
    "ObjectB" : {
        "objectA" : {"id" : 42},
        "name" : "The Answer"
    }
} 
```

我想为执行反序列化的代码可以与任何映射的 Hibernate 对象一起工作而无需知道其结构的一般情况解决这个问题。给定这样一个反序列化的对象，我可以使用反射递归地遍历所有映射字段，`ObjectB`并用它们持久的等价物（可能使用）“重新水化”它们`Session.merge(…)`，但这听起来像是一个已解决的问题，我不想重新发明轮子.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:42:24.400

您描述的问题没有解决（或者我知道的任何 ORM 都可以解决）。如果要休眠来管理对象关系，则需要从数据库加载对象或调用 merge()。当您调用 save() 时，所有对象树都需要被休眠或需要插入的新对象跟踪。

避免这种情况的方法是自己管理关系，但这会降低使用休眠的价值。您可以尝试检查 MyBatis 是否具有支持您想要使用的功能，因为您可以操纵对象如何持久化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:00:57.737

我希望找到一个现有的解决方案，但似乎不存在。所以我自己写了。这没有经过彻底的测试（尽管我确实有一套集成测试）并且不支持所有类型的 Hibernate 映射，但它对我的目的很有效。来源在[这里](https://gist.github.com/3323253)。它支持任意嵌套的对象。

# c++ - 在一个轴上翻转 D3DX10_SPRITE 不起作用，翻转两个都可以

> ID：11862951
> 
> 赞同：0
> 
> 时间：2012-08-08T10:51:29.463
> 
> 标签：c++, directx, transform, sprite

我正在制作一个 2D 横向滚动游戏（DirectX 10），所以我想在 Y 轴上翻转精灵。由于某种原因，当我在 Y 或 X 方向上指定负缩放值时，精灵不会绘制，但如果我为两者指定正缩放值或负缩放值，它就可以正常绘制。我不认为这是精灵在屏幕外的情况，因为我已经检查了 matWorld 中的值并且它总是在我的视口的值范围内。

设置 matWorld 的代码如下：

```
D3DXMATRIX matTranslation;
D3DXMatrixTranslation(&matTranslation, static_cast<float>(m_X), static_cast<float>(m_Y), m_Z );

D3DXMATRIX matTranslationPointMove;
D3DXMatrixTranslation(&matTranslationPointMove, 0.5f, 0.5f, 0.1f); 

D3DXMATRIX matScaling;
D3DXMatrixScaling(&matScaling, static_cast<float>(m_Width) * m_ScaleX, static_cast<float>(m_Height) * m_ScaleY, 1.0f);

m_Sprite.matWorld = matTranslationPointMove * matScaling * matTranslation; 
```

对于一些不同的缩放值，matWorld 看起来像这样（格式化道歉..）：

```
ScaleX=ScaleY = 1 ---- ScaleX=ScaleY = -1 ------------ ScaleX=-1, ScaleY=1

[24 0 0 0] ---------------- [-24 0 0 0] ------------------------ [-24 0 0 0 ]

[0 18 0 0] ---------------- [0 -18 0 0] ------------------------ [0 18 0 0 ]

[0 0 1 0 ] ----------------- [0 0 1 0  ] ------------------------- [0 0 1 0 ]

[12 52 0.6 1 ] ----------- [-12 52 0.6 1 ] ------------------- [-12 52 0.6 1 ] 
```

绘图代码如下所示：

```
m_pDevice->ClearRenderTargetView(m_pRenderTargetView, D3DXCOLOR(1.0f, 1.0f, 1.0f, 0.0f));
HRESULT hr = NULL;

D3DXMATRIX matProjection;
D3DXMatrixOrthoOffCenterLH(&matProjection,
    -400.0f,
    800.0f,
    -400.0f,
    800.0f,
    0.1f,
    10.0f
);

hr = m_ISprite->SetProjectionTransform(&matProjection);
if (FAILED(hr)) OutputDebugStringA("NOOooooo");

m_ISprite->Begin(D3DX10_SPRITE_SORT_DEPTH_BACK_TO_FRONT);
spriteVector::iterator it = spritesToDraw.begin();
while( it != spritesToDraw.end() )
{
    m_ISprite->DrawSpritesBuffered(*it, 1);
    ++it;
}
m_ISprite->Flush();
m_ISprite->End();
m_pSwapChain->Present(0,0); 
```

我完全不知道出了什么问题，所有的价值观对我来说都是正常的。我做错了什么，还是有其他方法可以做到这一点？如果我也必须手动为所有精灵设置动画，那将是悲伤的一天。提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:40:56.830

未经检验的狂野理论：

*   精灵被渲染为 3D 空间中的纹理多边形
*   翻转它会将背面转向相机
*   3D 渲染设置为忽略背面

# python - 有没有办法在不使用 __import__ 的情况下使用 getattr 调用动态函数？

> ID：11862954
> 
> 赞同：0
> 
> 时间：2012-08-08T10:51:38.467
> 
> 标签：python

我正在使用 getattr 在运行时调用函数。有许多功能，它们存在于几个单独的文件中。我目前正在通过以下方式执行此操作：

假设函数存在于 PACKAGE/functions_*.py

实际调用是在类方法中完成的：

```
class SomeClass(object):
    ...

    def call(self, **kwargs):
        function_name = '{}_{}'.format(self.parms['prefix'], self.parms['name'])
        file_name =  self.parms['prefix']
        mod_name = 'PACKAGE.{}'.format(file_name)
        module = __import__(mod_name, globals(), locals(), [file_name,])
        return getattr(module, function_name)(**kwargs) 
```

上面的代码工作正常，但对我来说似乎过于复杂，而且看起来每次调用此方法时都必须打开 PACKAGE/function_*.py 文件（因为它没有导入语句）。

因为这个方法被执行了数千次，我不希望代码不必要地低效。

**问题**：有没有更好/更有效的方法来做到这一点？还是我对重复打开文件效率低下的担忧毫无根据？

注意：首先导入所有 PACKAGE.function_x.py 文件（没有很多）对我来说似乎更干净，但后来我不知道如何使用 getattr（模块）对象来引用这些导入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:08:06.447

为什么不缓存导入的函数？例如让你的类包含一个`_cached_func`字典：

```
class SomeClass(object):
    def __init__(self):
        self._cached_func = {}

    def call(self, **kwargs):
        function_name = '{}_{}'.format(self.parms['prefix'], self.parms['name'])

        try:
            func = self._cached_func[function_name]
        except KeyError:            
            file_name =  self.parms['prefix']
            mod_name = 'PACKAGE.{}'.format(file_name)
            module = __import__(mod_name, globals(), locals(), [file_name,])
            func = getattr(module, function_name)
            self._cached_func[function_name] = func

        return func(**kwargs) 
```

# sql-server - 为sql server中的一组行生成哈希

> ID：11862957
> 
> 赞同：12
> 
> 时间：2012-08-08T10:51:41.057
> 
> 标签：sql-server, tsql

SQL Server 2012 中是否有任何方法可以生成一组行和列的哈希？

我想生成一个哈希，将其存储在父记录中。当更新到来时，我会将传入的哈希与父记录哈希进行比较，然后我会知道数据是否发生了变化。

所以这样的事情会很好：

```
SELECT GENERATEHASH(CONCATENATE(Name, Description, AnotherColumn))
FROM MyChildTable WHERE ParentId = 2 -- subset of data belong to parent record 2 
```

“CONCATENATE”将是一个聚合函数，它不仅可以连接列，还可以连接结果集中的行。与 MAX 类似，但将所有内容作为字符串连接返回。

希望这可以帮助您了解我的意思！

我要解决的基本问题是我的客户系统执行大量分层数据的导入。如果我可以通过使用哈希来避免处理，那么我认为这将节省大量时间。目前，当必须处理重复数据时，SP 的运行速度要慢 300%。

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-07T13:34:22.013

```
select HashBytes('md5',convert(varbinary(max),(SELECT * FROM MyChildTable WHERE ParentId = 2 FOR XML AUTO))) 
```

但是 HashBytes 仅限于 8000 字节...您可以创建一个函数来获取每 8000 字节的 de Md5 ....

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-08T11:16:22.967

您可以使用[CHECKSUM_AGG](http://msdn.microsoft.com/en-us/library/ms188920.aspx)聚合。它是为此目的而制造的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T10:55:15.957

对于单行哈希：

```
select HASHBYTES('md5', Name + Description + AnotherColumn)
FROM MyChildTable WHERE ParentId = 2 
```

对于表校验和：

```
select sum(checksum(Name + Description + AnotherColumn)*1.0)
FROM MyChildTable WHERE ParentId = 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-10T12:40:50.043

另一种方法：

```
-- compute a single hash value for all rows of a table
begin

    set nocount on;

    -- init hash variable
    declare @tblhash varchar(40);
    set @tblhash = 'start';

    -- compute a single hash value
    select @tblhash = sys.fn_varbintohexsubstring(0, hashbytes('sha1',(convert(varbinary(max),@tblhash+
    (select sys.fn_varbintohexsubstring(0,hashbytes('sha1',(convert(varbinary(max),
    -- replace 'select *' if you want only specific columns to be included in the hash calculation
    -- [target table] is the name of the table to calc the hash from
    -- [row_id] is the primary key column within the target table
    -- modify those in the next lines to suit your needs:
    (select * from [target_table] obj2 where obj2.[row_id]=obj1.[row_id] for xml raw)
    ))),1,0))
    ))),1,0)
    from [target_table] obj1;

    set nocount off;

    -- return result
    select @tblhash as hashvalue;

end; 
```

# android - 我无法使用来自互联网的图像

> ID：11862958
> 
> 赞同：0
> 
> 时间：2012-08-08T10:51:49.807
> 
> 标签：android, web-services, android-emulator, avd

我正在从 url 为我的图像视图调用图像，但它没有出现。我的模拟器浏览器运行完美，但任何使用互联网的应用程序都无法运行，我已在清单文件中授予用户权限。任何人请帮忙。

这是我的代码

```
 package com.example.simpleimage;

import java.io.InputStream;
import java.net.URL;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.widget.ImageView;

public class Simpleimage extends Activity {

    private String Url;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Url = "http://developer.android.com/images/dialog_progress_bar.png";

        ImageView iv = (ImageView)findViewById(R.id.iv);
                  Drawable drawable = LoadImageFromWebOperations(Url);
                  iv.setImageDrawable(drawable);

    }

    private Drawable LoadImageFromWebOperations(String url) {
         try {
                InputStream is = (InputStream) new URL(url).getContent();
                Drawable d = Drawable.createFromStream(is, "src name");
                return d;
            } catch (Exception e) {
                System.out.println("Exc=" + e);
                return null;
            }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:59:07.320

清单中的第一组

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

在下面的方法中传递您的 url 链接后，将返回这样的位图

```
imgView.setImageBitmap(getImage("Your url")) ;
public static Bitmap getImage(String url){
        Bitmap img = null ;
        try {
            URL feedImage = new URL(url);
            HttpURLConnection conn= (HttpURLConnection)feedImage.openConnection();
            InputStream is = conn.getInputStream();
            img = BitmapFactory.decodeStream(is);

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return img ;    
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:12:28.283

看看你不在代理网络上，如果你在模拟器中设置了代理，或者使用手机测试你的应用程序。

最简单和最好的方法是执行以下操作： Android Emulator 2.2 已完成此操作

点击菜单

点击设置

点击无线和网络

前往移动网络

转到接入点名称

在这里你会 Telkila Internet，点击它。

在编辑接入点部分，输入“代理”和“端口”，还提供用户名和密码，

其余字段留空。

# web-services - 在 Azure 窗口中扩展 REST API 以处理数千个请求的合适方法

> ID：11862963
> 
> 赞同：3
> 
> 时间：2012-08-08T10:52:02.010
> 
> 标签：web-services, azure, scalability

我有一个 REST API，我允许用户应用程序（azure 应用程序）通过它向我的数据库发送 perfmon 数据。现在要负载测试这个 REST API，我已经构建了一个 500 个 webrole 的模拟器应用程序，每个实例有 10 个实例（总共 5000 个实例），并且每 1 分钟**50000 个（大约）请求**将数据发布到 REST API，所以我需要扩展我的具有最佳实践的 REST API 来处理如此多的负载。

以下是我扩展 REST API 的测试用例

**中 - 6 个实例 => 可以处理 300 个实例的请求**

**超大 - 2 个实例 => 可以处理 300 个实例的请求**

现在我的问题是这种类型的负载可以通过水平缩放还是垂直缩放来处理？意味着我是否需要增加中型或小型实例的数量，或者我必须使用超大型实例？

此外，此 REST API 将发布数据 SQL Azure 数据库（5 GB 网络版），那么在处理请求方面是否有任何限制？

**在上述情况下，所有申请都考虑在同一地区**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:30:48.137

您的 6 个中型实例 = 12 个核心，而 2 个 XL 实例 = 16 个核心。就价格而言，最好使用 6 个介质，而不是 2 个 XL。

另外，如果您动态扩展，使用 XL 时您只能扩展 8 个内核，而使用中型您可以扩展 2 个内核。我会使用中等实例，如果可能的话，甚至很小。并且将针对水平扩展（又名横向扩展） - 增加/减少实例数量。

在发送到 SQL 之前，我还会考虑某种缓冲数据，而不是直接与 Windows Azure SQL 数据库 (WASD) 通信。对于这种类型的负载，WASD 的每一秒命中很可能会因负载过重而遇到瞬态错误。考虑将数据缓冲到队列（Azure 存储队列或 Azure 服务总线队列）并具有 Worker 角色（可能具有多个实例），批量处理队列消息。

这种类型的量表很可能在 CQRS 模式中更敏感和更可靠。您可以查看[CQRS Journey Project](http://cqrsjourney.github.com/)以获取有关 CQRS 和 Windows Azure 的更多信息和参考实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:13:10.033

这是一条评论，但我的房间用完了。

如果您正在设计用于接收 PERFMON 数据的 REST API 的速度和规模，那么为什么要通过调用 SQL 而不是调用 QUEUE 来减慢 API 速度呢？

如果 SQL 无法跟上处理单个队列的速度，那么 SQL 也将无法跟上来自 6 个 REST 服务的调用。最后 SQL 插入受磁盘 IO 限制。如果设计得当，单个进程可以尽可能快地向 SQL 发送数据。

每分钟 50,000 次插入已经很多，所以看看您如何设计索引以及如何设计插入。当然，您不想要一个会碎片化的索引。如果原始数据具有顺序键，则可以将其用作 PK。否则使用 Iden 作为 PK。

如果你批量插入，你可以增加吞吐量。批处理不一定会增加延迟。如果它准备好进行下一次插入并且队列中只有一个，则插入一批 1。插入的最佳位置（如 100 - 1000）。

我所做的是在前台建立插入，然后插入异步。如果您可以比异步插入更快地构建插入，则 SQL 已完全加载。由于您在内存中构建语法并插入到磁盘构建语法会更快，除非您有一些复杂的处理来构建语法。是的，希望联合拆分磁盘 IO，但首先要优化该插入。德雷珀很受欢迎。我经常使用表值参数。insert into table values() 不会是最快的选择，但它可能会跟上 50,000 / 分钟。

使用队列保护 REST API。然后优化处理该队列。

我会说 Azure 表存储，但它限制为每秒 5,000 个实体和 500 个实体/秒/分区。有了这些吞吐量限制，我认为您不能称 ATS 具有高度可扩展性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T23:21:21.550

这似乎是一个扩展存储的更多问题，并且您希望尽可能接近实时。

在这种情况下，如果 SQL 联合无法解决问题，则可以使用基于租户的方法，该方法具有多个数据库，每个数据库都为一个或多个用户应用程序保留。

# objective-c - Uncrustify 不支持 LLVM 4.0 的新 Objective-C 语法

> ID：11862964
> 
> 赞同：1
> 
> 时间：2012-08-08T10:52:05.953
> 
> 标签：objective-c, code-formatting, uncrustify, llvm-4.0

我使用[Uncrustify](http://uncrustify.sourceforge.net/)来格式化代码。

但是 Uncrustify 不支持 LLVM 4.0 的新 Objective-C 语法。

我要做什么？

Uncrustify 编写的代码：

```
@interface SJTLLVM4Tester()
@property (strong) NSNumber *number;
@end

@implementation SJTLLVM4Tester
-(id)init {
    self = [super init];
    if (self) {
        self.number = @'C';
        self.number = @123;
        self.number = @0x123ul;
        self.number = @-1.2e-3f;
        self.number = @YES;

        NSDictionary *dictionary = @{@"key1":@1,@"key2":@2,@"key3":@3};
        NSMutableArray *array = [[NSMutableArray alloc] initWithArray:@[@1,@2,@3]];

        self.number = dictionary[@"key1"];
        array[0] = self.number;
    }
    return self;
}
@end 
```

执行结果： ![结果](../Images/b34df06281af4e1096525534fec7f7c0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:33:31.047

这已在最新的 uncrustify 版本中得到修复：0.60。

你可以在这里获取它： [https ://github.com/bengardner/uncrustify/archive/uncrustify-0.60.tar.gz](https://github.com/bengardner/uncrustify/archive/uncrustify-0.60.tar.gz)

我正在使用 Brew，必须手动更新 URL 和 SHA1，`brew edit uncrustify`然后`brew upgrade uncrustify`.

以下是我的新公式：

```
require 'formula'

class Uncrustify < Formula
  url 'http://downloads.sourceforge.net/project/uncrustify/uncrustify/uncrustify-0.60/uncrustify-0.60.tar.gz'
  head 'https://github.com/bengardner/uncrustify.git'
  homepage 'http://uncrustify.sourceforge.net/'
  sha1 '769a7649a1cefb80beff9b67b11b4b87a8cc8e0e'

  def install
    system "./configure", "--prefix=#{prefix}", "--disable-dependency-tracking"
    system "make install"
  end
end 
```

现在就像一个魅力。

# php - Magento 在分层导航中获取选定的过滤器

> ID：11862967
> 
> 赞同：12
> 
> 时间：2012-08-08T10:52:12.233
> 
> 标签：php, magento

在 Magento 中，如果在分层导航中选择“颜色”属性，“颜色”的值会自动消失并显示结果。如何检索所选过滤器的名称？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-08T13:31:03.103

所有应用的过滤器都存储在图层状态对象中。您可以使用以下代码段轻松检索它们：

```
$appliedFilters = Mage::getSingleton('catalog/layer')->getState()->getFilters(); 
```

它将返回一个过滤器项目对象数组。您可以通过执行以下操作来检索单个过滤器项的名称和应用值：

```
foreach ($appliedFilters as $item) {
    $item->getName(); // Name of the filter
    $item->getLabel(); // Currently selected value
    $item->getFilter()->getRequestVar(); // Filter code (usually attribute code, except category filter, where it equals "cat")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-18T09:14:44.913

在 Magento 2 中： $this->getLayer()->getState()->getData("filters")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-12T11:27:04.550

您可以通过此代码获取过滤器的属性代码或 id：

```
$appliedFilters = Mage::getSingleton('catalog/layer')->getState()->getFilters();
foreach ($appliedFilters as $item) {
    echo $item->getFilter()->getAttributeModel()->getAttributeId();
    echo $item->getFilter()->getAttributeModel()->getAttributeCode();
} 
```

# jquery - 数组具有格式为“item1,item2”的值。我希望它是 ["item1","item2"]。我应该怎么办？

> ID：11862969
> 
> 赞同：4
> 
> 时间：2012-08-08T10:52:20.270
> 
> 标签：jquery, arrays, string

```
 console.log(jQuery("#tickets-expanded input:checkbox[name='ids[]']:checked"));
        jQuery("#tickets-expanded input:checkbox[name='ids[]']:checked").each(function() {
           selected.push(jQuery(this).val());
        });
        alert(selected);

        jQuery("#ids").val(selected); 
```

这是我的代码。所选数组包含格式为“2,1”的元素。我希望它是 ["2","1"]。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:55:52.330

这就是它的`toString()`回报，如果你想要一个不同的格式手动构造它：

```
str = "[\"" + selected.join("\",\"")​​​​​​​​​​​ + "\"]"​​​​​​; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:58:12.923

考虑代码：

```
var a = "item1,item2,item3";

a = a.split(",");

console.log( a ); 
```

输出将是：

```
["item1","item2","item3"] 
```

现在您可以在最后将这种技术应用于您的代码。你得到的字符串可以是`split`，你会得到数组。

**编辑：**你有多个`id`元素？所以你也可以`split`在其中数据。每个都包含一个值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:56:39.787

```
'5,6,7'.split(',') 
```

[http://www.w3schools.com/jsref/jsref_split.asp](http://www.w3schools.com/jsref/jsref_split.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:54:48.603

```
selected = '[' + selected + ']'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T11:04:29.143

试试这个来获得一组选定的复选框

```
var values = $("#tickets-expanded input:checkbox[name='ids[]']:checked").map(function () {
  return this.value;
}).get(); 
```

# javascript - 如何在 Node.js 中使用诸如模块之类的原型？

> ID：11862971
> 
> 赞同：4
> 
> 时间：2012-08-08T10:52:22.500
> 
> 标签：javascript, node.js

我想用原型扩展标准对象，例如字符串。例如，为 Array添加*diff函数。*Node.js 中组织代码的好方法是模块，但是如何使用原型呢？

例子

```
Array.prototype.diff = function (a) {
    return this.filter(function (i) {
        return !(a.indexOf(i) > -1);
    });
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:30:41.643

我不能说 nodejs，但我猜 Mozilla 的 JS 模块是相似的，我曾经遇到过同样的问题。

问题是每个 JS 模块（可能还有 nodejs 模块）都在自己的 JavaScript 上下文中运行，因此来自不同模块的 Array 构造函数（和原型）是不一样的。它们是完全不同的对象。

我可能会有一个带有辅助函数的模块，该函数将相应的更改添加到给定的对象。但是，这意味着您必须从要从中使用扩展 Array 原型的每个模块中调用辅助函数。

ArrayHelper 模块：

```
function extendArray(arrayConstructor)
{
    arrayConstructor.prototype.diff = function (a) {
      return this.filter(function (i) {
        return !(a.indexOf(i) > -1);
      });
    };
}

exports.extendArray = extendArray; 
```

使用数组的模块：

```
var ArrayHelperModule = require("ArrayHelperModule");

// extending the Array of this module
ArrayHelperModule.extendArray(Array);

// use it
var diff = [1, 2].diff([1]); 
```

ps希望这样的代码是正确的......我只是在这里快速输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:33:46.837

这对我有用。

```
Array.prototype.diff = function( compareArray ) {
    return this.filter(
        function( arrayItem ){
            return this.indexOf( arrayItem ) == -1;
        },
        compareArray
    );
}; 
```

我猜你也可以向原型链添加一个级别，但这需要更多的复杂性，而且似乎还没有那么有用。

Ps 我不确定您打算如何使用过滤器功能。

```
var a = [1,2,3,4];
var b = [3,4,5,6];
console.log( a.diff( b ) );

// Outputs:
[ 1, 2 ] 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-09T12:38:46.043

**由于我的排名较低，我无法发表评论:(所以我正在写一个答案

扩展本机对象是一种非常糟糕的做法，请不惜一切代价避免这种做法。Mootools 采用了这种方法，只需在 Google 上搜索“mootools 碰撞”并查看不断出现的问题。尽管自 1.2.4 版以来他们一直在远离它。

一旦另一个库扩展本机对象（映射，图形库有时根据过去的经验这样做），您就会得到不同的代码，期望这些添加的行为不同。

所以简而言之，创建另一个包含这些功能的“实用程序”类，并包含和使用它。

# javascript - 启动Activity+背景图片钛

> ID：11862973
> 
> 赞同：0
> 
> 时间：2012-08-08T10:52:26.123
> 
> 标签：javascript, android, iphone, titanium-mobile

我正在 Titanium 中创建一个 iPhone/Android 应用程序。我有 2 个 js 文件 1\. app.js 2.rss.js

在 app.js 中，我编写了以下代码：-

```
 if(Titanium.Platform.name != 'android'){
    var rssWindow = Titanium.UI.createWindow(
        {
            url : "rss.js",
            title : "RSS FEEDS",
            barColor:'#0f0f0f',
            backgroundImage:'images/Background.png'
        });
    navigation.open(rssWindow,{animated:true});
  }
  else{
    var intent = Ti.Android.createIntent({
            url: 'rss.js',
    });
    intent.addCategory(Ti.Android.CATEGORY_LAUNCHER);
    Ti.Android.currentActivity.startActivity(intent);
} 
```

此代码将我正确带到 rss.js，但在 rss.js 中，当我尝试设置当前窗口的背景图像时，应用程序在 Android 中运行时崩溃，而在 Iphone 中运行正常。

rss.js

```
 if(Titanium.Platform.name == 'android')
          var activity = Ti.Android.currentActivity;
      var win = Titanium.UI.currentWindow;
      Titanium.API.info('RSS screen loaded');
      win.backgroundImage = 'images/Background.png' 
```

有没有人可以解决这个问题或者我做错了什么。图像路径已检查且正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:27:52.510

我还没有在 iPhone 上检查过我的应用程序，但是是的，我的应用程序中也遇到了类似的意外关闭问题。

问题与在 Titanium 中设置 Window 的背景属性有关。这个属性可以正常工作`titanium sdk 1.7.5 *`

但在那之后它崩溃了。

我只是厌倦了将图像设置为背景的技巧。

刚刚创建了视图

```
var WindowBackground = Ti.UI.createView({

         backgroundImage:'../../Images/General/SelectedimageforBackground.png'

    }); 
```

并将其添加到我所有控件之前的窗口中，这些控件将显示在窗口上。结果看起来与所需的相同..

```
* you can check the sdk in your Tiapp.xml 
```

# android - Android 2D滚动列表视图？

> ID：11862985
> 
> 赞同：1
> 
> 时间：2012-08-08T10:52:57.377
> 
> 标签：android, android-widget, android-listview, android-view, android-gridview

我想创建一个允许在一行内水平滚动的 ListView 小部件。我在 UK Sky+ 应用程序的网格频道视图中看到了类似的情况。

该列表将代表一天中的小时数（垂直），分为 5 分钟时间段（水平）

```
Scroll
^
|
| 08:00 | 08:05 | 08:10 | 08:15 | .... -> Scroll
| 09:00 | 09:05 | 09:10 | 09:15 | .... -> Scroll
|
v
Scroll 
```

每个“单元格”应该能够具有背景颜色以识别时间是否可用（灰色类型功能表示不可用）。

每个“单元格”都应该能够接受触摸事件并在触摸时更改单元格颜色。只能选择一个单元格（时间）。

我想我可以在滚动视图中放置一个大表视图，但并不理想。它也不是一个画廊，因为它不包含图像，我希望内容是结构化的，而不是自动包装等。

感谢您的任何指点

马丁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:01:06.980

您可以创建一个水平列表视图，它具有普通 ListView 小部件的所有功能。

[这个链接会帮助你](http://www.dev-smart.com/archives/34)

我尝试了实现，对我来说效果很好。

# ios - 如何在应用程序启动期间播放视频

> ID：11862989
> 
> 赞同：0
> 
> 时间：2012-08-08T10:53:06.890
> 
> 标签：ios, xcode, mpmovieplayercontroller

我想知道如何在我的应用程序加载时播放视频，然后使用`MPMoviePlayerController`. 我正在将视频加载到`viewDidLoad`. 视频播放完毕后如何跳转到下一页？

示例代码在这里：

```
 - (void)viewDidLoad
  {
      NSLog(@"Welcome to Home Page");
      [super viewDidLoad];
      self.parentViewController.view.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"bg-image-new.png"]];

      NSBundle * bundle =[NSBundle mainBundle];
      NSString * moviepath = [bundle pathForResource:@"opening_ani" ofType:@"mp4"];
      NSURL * movieurl = [[NSURL fileURLWithPath:moviepath]retain];
      MPMoviePlayerController * themovie = [[MPMoviePlayerController alloc]initWithContentURL:movieurl];
      themovie.view.frame=CGRectMake(0, 0, 1024, 768);
      [self.view addSubview:themovie.view];
      [themovie play];
      [themovie setShouldAutoplay:NO];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:59:44.580

**更新**：

我不是 100% 确定您可以在应用程序加载时播放视频。[这里](https://stackoverflow.com/a/7051256/620197)有一个很好的解释。

* * *

在上面的视图控制器中，在调用之前`[themovie play]`，您可以注册一个播放完成的通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(handleNotification:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:nil]; 
```

在您的视图控制器中，您必须定义一个方法`handleNotification:`：

```
 -(void)handleNotification:(NSNotification*)notification {
        if ( [notification.name isEqual:MPMoviePlayerPlaybackDidFinishNotification] ) {
            [[NSNotificationCenter defaultCenter] removeObserver:self
                                                            name:MPMoviePlayerPlaybackDidFinishNotification
                                                          object:nil];
            // move on to your next view here
        }
    } 
```

[更多关于 iOS 中的通知](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)，它通常非常有用。此外，[这里](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)是有关的所有详细信息`MPMoviePlayer`，有一个部分列出了所有可能的通知及其详细信息。

# c# - 如何修复嵌套在gridview中的gridview标题？

> ID：11862990
> 
> 赞同：0
> 
> 时间：2012-08-08T10:53:08.353
> 
> 标签：c#, javascript, asp.net

我有一个嵌套在主gridview中的带有垂直和水平滚动的gridview。我已经为嵌套的gridview实现了水平和垂直滚动。我需要在水平和垂直滚动期间修复这个嵌套gridview的标题。请建议我该怎么做？

```
 <asp:GridView ID="GridProjects" runat="server" AutoGenerateColumns="False"  Width="100%" OnRowDataBound="GridProjects_RowDataBound"  ShowFooter="true"   GridLines="None"  >                           
      <FooterStyle CssClass="grd_footer_bg grd_row_left" />
      <RowStyle CssClass=" grd_odd_row grd_row_left"  Wrap="false" />
      <HeaderStyle CssClass="grd_hdr_bg grd_row_left" Wrap="false"  Font-Bold="True"/>
      <AlternatingRowStyle CssClass="grd_evn_row grd_row_left" Wrap="false"/>  
      <Columns>
       <asp:TemplateField HeaderStyle-CssClass="padding" ItemStyle-Width="10px"        HeaderStyle-HorizontalAlign="Left" HeaderText="Project Name">
            <ItemTemplate > 
              <table >
               <tr>
                <td>
                <a href="javascript:switchViews('div<%# Eval("ProjectName") %>',   'one','GridProjects_GridResources_3','400', '950' , '40' ,'true');"><img id="imgdiv<%# Eval("ProjectName") %>" alt="Click to show/hide Lesson Lists" border="0"
src="images/expand_button_white.jpg"  /></a>
&nbsp;&nbsp;&nbsp;  
</td> 
<td>    <asp:Label ID="lblProjName" runat="server"  Text='<%# Eval("ProjectName") %>'></asp:Label> </td>
                    </tr>
                    </table>
                      </ItemTemplate>      
                </asp:TemplateField>
     <asp:TemplateField>
                    <ItemTemplate>
                            <tr>
                                                <td colspan="3">
                                                <div style="overflow: hidden;" id="DivHeaderRow">
                                                </div>

                                                   <div id="div<%# Eval("ProjectName") %>" onscroll="OnScrollDiv(this)" style="display: none; overflow:auto; position:relative; left: 25px;">                                               
                                                     <asp:Panel ID="pnlgrid" runat="server" Width="1309px" ScrollBars="Horizontal">
                                                        <asp:GridView ID="GridResources" runat="server" OnRowCreated="rowcreate" OnRowDataBound="GridResources_RowDataBound"   CssClass="grid" Width="900px" GridLines="Vertical"  
                                                  ShowFooter="true" AutoGenerateColumns="false" >
                                                             <FooterStyle CssClass="grd_footer_bg grd_row_left" />
                                    <RowStyle CssClass="grd_odd_row grd_row_left" Wrap="False" />
                                    <EditRowStyle BackColor="#999999" />
                                    <SelectedRowStyle CssClass="grd_higlight_row grd_row_left" />
                                    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                                    <HeaderStyle CssClass="grd_hdr_bg grd_row_left fixedHeader"  Font-Bold="True"  HorizontalAlign="Left"
                                        Wrap="False" />
                                    <AlternatingRowStyle CssClass="grd_evn_row grd_row_left" Wrap="False" />
                                                            <Columns>
                                                            <%-- <asp:TemplateField>
                                        <ItemTemplate>
                                            <a href="javascript:switchViews('div<%# Eval("ResourceID") %>', 'one');">
                                                <img id="imgdiv<%# Eval("ResourceID") %>" alt="Click to show/hide Lesson Lists" border="0"
                                                    src="images/expand_button_white.jpg" /></a>
                                        </ItemTemplate>
                                    </asp:TemplateField>
    <asp:TemplateField HeaderText="Vacation/Comp Off">
                                                            <ItemTemplate>
                                                            <asp:TextBox ID="txtvacatcoff"  MaxLength="10" Text='<%# Eval("ReasonVaction") %>' onkeypress="return AllowNumericOnly(this)" runat="server"></asp:TextBox>
                                                            </ItemTemplate>
                                                            </asp:TemplateField>
                                                             <asp:TemplateField HeaderText="In Between Assignment">
                                                            <ItemTemplate>
                                                            <asp:TextBox ID="txtinbassign" MaxLength="10" Text='<%# Eval("ReasonInBtnAssignments") %>' onkeypress="return AllowNumericOnly(this)" runat="server"></asp:TextBox>
                                                            </ItemTemplate>
                                                            </asp:TemplateField>
                                                             <asp:TemplateField HeaderText="Internal Project">
                                                            <ItemTemplate>
                                                            <asp:TextBox ID="txtintproj" MaxLength="10" Text='<%# Eval("ReasonInternalProjects") %>' onkeypress="return AllowNumericOnly(this)" runat="server"></asp:TextBox>
                                                            </ItemTemplate>
                                                            </asp:TemplateField>
                                                             <asp:TemplateField HeaderText="Training">
                                                            <ItemTemplate>
                                                            <asp:TextBox ID="txttraining" MaxLength="10" Width="80px" Text='<%# Eval("ReasonTraining") %>' onkeypress="return AllowNumericOnly(this)" runat="server"></asp:TextBox>
                                                            </ItemTemplate>
                                                            </asp:TemplateField>
                                            <%--<asp:BoundField DataField="RevenueForecast" HeaderText="Revenue Forecast" />--%>
                                              <asp:TemplateField HeaderText="Revenue Forecast">
                                                            <ItemTemplate>
                                                            <asp:Label ID="lblRevenueForecast" Width="80px" Text='<%# Eval("RevenueForecast") %>' runat="server"></asp:Label>
                                                            </ItemTemplate>
                                                              <FooterTemplate>
                                                              <asp:Label ID="lblRevenueTotal" runat="server"></asp:Label>
                                                             </FooterTemplate>
                                             </asp:TemplateField>
                                             <asp:TemplateField HeaderText="Comments">
                                                            <ItemTemplate>
                                                            <asp:TextBox ID="txtComment" MaxLength="300" Text='<%# Eval("Comment") %>' runat="server"></asp:TextBox>
                                                            </ItemTemplate>
                                                            </asp:TemplateField>
                                    </Columns>
                                       </asp:GridView>
                                       </asp:Panel>
                                         </div>
                                         <div id="DivFooterRow" style="overflow:hidden">
                                         </div>
                                        </td>
                                       </tr>

                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:38:12.273

我已经设法使用 jQuery 插件[tableScroll](http://www.farinspace.com/jquery-scrollable-table-plugin/)在 html 表（由 GridView 服务器控件呈现）上设置了一个固定的标题。

要尝试它，请查看演示，找到您的 GridView 呈现的表格的客户端 ID（您可能希望`ClientIdMode="static"`在 GridView 上设置，以便您的客户端 ID 与服务器端相同）。然后你可以调用类似的东西：

```
$('#GridProjects').tableScroll({height:400}); 
```

假设您有对 js 文件 jQuery 和 tableScroll 的脚本引用，以及 tableScroll CSS 文件的链接。

如果你不想设置你的`ClientIDMode="static"`，你可以像这样设置 tableScroll：

```
$('#<%= GridProjects.ClientID %>').tableScroll({height:400}); 
```

# database - Core Data，如何使用 SQLite DB 浏览器在 Mountain Lion Finder 隐藏的 Simulator 文件夹中打开 DataStore.sql？

> ID：11862995
> 
> 赞同：0
> 
> 时间：2012-08-08T10:53:29.867
> 
> 标签：database, sqlite, core-data, osx-mountain-lion

为了让我在使用 Core Data 时清楚地了解正在发生的事情，我对免费的 SQLLite 数据库浏览器 (SQLDBB) 进行了 DL。将 db 从 iOS 模拟器 Documentsfolder 复制到我的桌面然后打开它并在 SQLDBB 中浏览 db 内容很好。

**但**

由于模拟器库文件默认隐藏在 OSX Mountain Lion 中，我无法使用普通的 SQLDBBs 打开文件对话框打开它。

该文件在我的 Mountain Lion Finder 中（使用 Finder > Go > “Go to folder” 获取它）；

```
~/Library/Application Support/iPhone Simulator/5.1/Applications/...aAppIDnr.../Documents/DataStore.sql
```

**有什么建议可以直接在 SQLDBB 中打开它吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:53:17.777

**解决了！** 但由于repurtationrestrictions 无法回答我自己，因此发表了此评论。

```
1\. Browse to your simulator folder as mentioned above. 
2\. Simply "drag & drop" the DataStore.sql file onto the SQLDBB and it will open. 
```

在 Xcode Simulator 中使用 Core Data 时，您现在有了一个“实时”的 DB 查看器，非常方便 :-)

Ps 当前的 SQLDBB (v2.0b1) 没有附加开发人员 ID，因此要在 Mountain Lion 中打开它，您需要在其图标上按住 ctrl > 选择打开...

# c# - 动态对象，可持久保存到 Azure 并可通过 Dynamic Linq 查询

> ID：11862998
> 
> 赞同：4
> 
> 时间：2012-08-08T10:53:46.750
> 
> 标签：c#, linq, entity-framework, dynamic, azure

我要做的是创建一个动态联系人列表。我正在使用 Azure SQL 存储来保存我的数据和 EF。

类型化的**基类“Contact”**拥有 Id、Name、Phone 等道具和**“Profile”类，该类**具有 ContactId、PropName、PropVal 等道具，可以存储无限数量的联系人属性（如性别、地址、年龄等。 .)。

![英孚模型](../Images/b79a239243667937b137edfd77f8a260.png)

所以现在，这有效：

```
var cts = db.Contacts
            .Where(p => p.ContactProfile.Any(pr => pr.PropertyName == "Sex" && pr.ValueString == "F")
            && p.ContactProfile.Any(pr => pr.PropertyName == "City" && pr.ValueString == "Kaunas")); 
```

我希望实现的是创建一个动态 POCO 类，该类将映射到所描述的 EF 结构，并启用使用 Linq 或 (*Dynamic Linq) 查询这些动态属性。我设法实现的是使用动态类的“ [Expando](http://www.west-wind.com/weblog/posts/2012/Feb/08/Creating-a-dynamic-extensible-C-Expando-Object) ”实现创建动态类。

所以我可以像这样将 EF 模型映射到 Expando

```
var contact = db.Contacts.First();    
dynamic dynContact = new Expando();
dynContact["Sex"] = db.ContactProfiles.First(p => p.Contact.Id == contact.Id && p.PropertyName == "Sex").ValueString;
dynContact.City = db.ContactProfiles.First(p => p.Contact.Id == contact.Id && p.PropertyName == "City").ValueString; 
```

我**不知道**如何使这项工作：（因此它会导致与第一个 Linq 查询相同的 SQL 查询）

```
DynamicContact.Where(p=>p["Sex"] = "F" && p.City = "NY") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:52:04.423

[Rob Connery 在他的名为Massive](https://github.com/robconery/massive/)的项目中做了非常相似的事情。它可能会做你想做的事，或者给你拼图中缺失的部分。