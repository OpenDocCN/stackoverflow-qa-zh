# StackOverflow 问答 10245000-10245999

# javascript - javascript变量操作

> ID：10245006
> 
> 赞同：1
> 
> 时间：2012-04-20T11:04:37.660
> 
> 标签：javascript

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)
> [JavaScript 浮点数问题的优雅解决方法](https://stackoverflow.com/questions/1458633/elegant-workaround-for-javascript-floating-point-number-problem)

当我运行以下代码时

```
<html>
<head>
<script type="text/javascript">
var  a=0.1;
var b=0.2;
var c=0.3;
document.write((a+b)+c);
document.write(' ');
document.write(a+(b+c));
document.write('  ');
document.write(a+b);
</script>
</head>
<body>

</body>
</html> 
```

它向我显示了以下结果

```
0.6000000000000001 0.6 0.30000000000000004 
```

我`a+b=0.30000000000000004`也不明白 0.30000000000000004+0.3 怎么等于 0.6？

# spring - 如何在 Spring Secuirty 3.1 中进行没有身份验证和授权的并发会话控制

> ID：10245014
> 
> 赞同：0
> 
> 时间：2012-04-20T11:05:22.450
> 
> 标签：spring, session, spring-security, authorization

我需要使用 Spring Security 的并发会话控制功能。我需要使登录用户的上一个会话无效（单用户登录）。我不需要身份验证和授权功能，因为它已经由应用程序使用 Servlet(Filter) 实现，该应用程序调用调用 dao 层（Hibernate）的服务层。

请指导我如何在没有身份验证和授权的情况下实现并发会话控制。

谢谢， 巴拉尚达尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:08:39.433

一种选择（hack）是使用 Spring 的预身份验证功能。即，您将在过滤器中执行身份验证并在请求对象上设置一个属性，即用户名。然后，请求将被传递到 Spring 和 Spring，在其中可以启用并发会话控制功能。

但实际上最好的选择是在您的过滤器中实现并发会话控制。您甚至可以从 spring 源代码中“借用”一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:30:17.433

简短的回答：除非你重构你的应用程序以完全使用 spring-security，否则你不能。

稍微长一点的答案：您可以“伪造”Java EE 容器登录（预认证）。`AbstractPreAuthenticatedProcessingFilter`这将需要指定从您的 spring 安全 http 配置中派生的登录过滤器。例如，您可以将您的请求包装在您的过滤器中并添加一个标头值并使用`RequestHeaderAuthenticationFilter`，或者您可以编写自己的从您在自己的登录过滤器中为请求设置的请求属性中提取主体。结合一个`PreAuthenticatedAuthenticationProvider`.

稍长的答案＃2：您可以使用一种允许所有类型的设置，您可以像往常一样配置带有会话并发的spring-security，但将所有URL（is `<intercept-url pattern="/*" access="permitAll" />`）的访问权限设置为permitAll。但是，您必须基本上实现`ConcurrentSessionControlStrategy`您自己的登录逻辑中所做的事情，才能将会话注册到 spring security`SessionRegistry`中。在此过程中，您很可能还会遇到许多其他障碍。

但是请注意，由于 spring-security 基于 servlet**过滤器**（而不是 Spring MVC 之类的 servlet）工作，因此您需要将自己的登录名重构为过滤器，并将其放在链中的 spring 安全过滤器之前，如果您是结合您自己的身份验证逻辑和弹簧安全性。

我的建议是，如果你想利用 spring-security 进行并发会话控制，你应该一路走下去，在 spring-security 而不是一些自定义 servlet 之上构建你的身份验证。不要与框架抗争，按预期使用它。或者，根本不使用它。

# asp.net-mvc - 在 ASP.NET MVC 的默认成员资格提供程序中保存电子邮件更改

> ID：10245017
> 
> 赞同：10
> 
> 时间：2012-04-20T11:05:41.747
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-membership, membership-provider

我正在尝试在 ASP.NET MVC 3 的成员资格提供程序中设置和保存电子邮件更改。我不知道如何正确设置和更改成员资格提供程序中的电子邮件属性。

MSDN 似乎建议使用 MembershipUser.Email 属性，“获取或设置会员用户的电子邮件地址”，但我不知道如何让它正常工作。

我正在尝试使用此代码：

```
// change email
MembershipUser u = Membership.GetUser(User.Identity.Name);
u.Email = email; // Is this working as expected?
u.Save();  // this line doesn't do anything - what should it be?
db.Save();  <-- that is what I would do with ordinary database changes, but I don't know what context to use for Membership Provider changes. . . 
```

编辑：

我想到了：

```
// change email
MembershipUser u = Membership.GetUser(User.Identity.Name);
u.Email = email;
System.Web.Security.Membership.UpdateUser(u); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-20T11:12:23.390

尝试更新用户：

```
var user = Membership.GetUser(id);
user.Email = "new@email.com";
Membership.UpdateUser(user); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-08T07:49:59.767

继@Ecnalyr 和@jwaern 之后，我想强调一点。更改电子邮件地址时，如下直接分配电子邮件地址不起作用：

```
System.Web.Security.Membership.GetUser.email = newEmail '(this won't work) 
```

首先，如上面的响应所示，必须将 MembershipUser 分配给一个变量，然后才能影响该变量上的 UpdateUser。

```
Dim mu As MembershipUser = System.Web.Security.Membership.GetUser
mu.Email = email
Membership.UpdateUser(mu) 
```

# mongodb - Mongo 返回结果只匹配数组行

> ID：10245022
> 
> 赞同：1
> 
> 时间：2012-04-20T11:05:46.680
> 
> 标签：mongodb, resultset

我目前有以下数据集（简化）：

```
{  
    'component_id':1,  
    '_locales':[   
        {  
            'url': 'dutch',  
            'locale': 'nl_NL'  
        },  
        {  
            'url': 'english',  
            'locale': 'en_US'  
        }  
    ]  
} (etc more rows similar to this but unique urls) 
```

当我查询特定的 url 和语言环境时，我使用以下查询

```
db.find({'_locales': { '$elemMatch': { 'locale': 'nl_NL', 'url': 'dutch' } }}); 
```

我得到了正确的行但是'_locales'返回了整个数组，包括我不需要的en_US，无论如何它只返回匹配的数组行，在这种情况下：

```
'_locales':[   
{  
     'url': 'dutch',  
     'locale': 'nl_NL'  
}] 
```

我有一种感觉，我必须遍历语言环境并将行与语言环境匹配。感觉不对，是否有更好的解决方案来做到这一点（不迭代结果集）？例如，改变表结构？我希望这样做而不是只为语言环境制作第二张桌子..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:10:26.113

You always query for top level documents. Just because your query criteria involve matching a specific array element doesn't tell MongoDB that it should only return that element. Currently there's no way to return specific array elements other than using the $slice operator which is not what you need here.

There are feature requests in MongoDB JIRA that will allow for what you want but currently it is not possible.

# ruby-on-rails - Rails 3 处理特殊字符

> ID：10245027
> 
> 赞同：0
> 
> 时间：2012-04-20T11:06:10.693
> 
> 标签：ruby-on-rails, ruby

我想为用户提供使用特殊字符（即**¥**和其他字符）填写输入字段的能力。
用户输入可以保存在 xml 文件中，然后获取并呈现回表单输入。

将特殊符号保存到 xml 的最佳做法是什么（可能使用**html 实体或十六进制形式**）？

感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:22:18.173

我会说如果您将文件保存在 utf-8 中，您将没有问题。

如果某些控制器/视图有编码问题，则必须将其放在第一行：

```
# encoding: utf-8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:23:20.050

它们没有什么特别之处，您不需要对它们进行编码。让您的 XML 库处理这个问题，XML 从那时起就支持 unicode，而您所说的“特殊符号”只是 unicode 字符。

# r - 使用矩阵的 Globaltest Pathway 分析

> ID：10245029
> 
> 赞同：0
> 
> 时间：2012-04-20T11:06:15.837
> 
> 标签：r, matrix, analysis

我有一个包含 SAGE 计数数据的矩阵，我想测试 GO 浓缩和通路浓缩。因此我想在 R 中使用 globaltest。我的数据如下所示：

数据文件

```
 KI_1 KI_2 KI_4 KI_5 KI_6 WT_1 WT_2 WT_3 WT_4 WT_6
ENSMUSG00000002012  215  141  102  127  138  162  164  114  188  123
ENSMUSG00000028182   13    5   13   12    8   10    7   13    7   14
ENSMUSG00000002017  111   72   70  170   52   87  117   77  226  122
ENSMUSG00000028184  547  312  162  226  280  501  603  407  355  268
ENSMUSG00000002015 1712 1464  825 1038 1189 1991 1950 1457 1240  883
ENSMUSG00000028180 1129  944  766  869  737 1223 1254  865  871  844 
```

rownames 包含 ensembl 基因 ID，每列代表一个样本。这些样本可分为两组用于测试通路富集：KI1 和 WT2 组

```
 groups <- c("KI1","KI1","KI1","KI1","KI1","WT2","WT2","WT2","WT2","WT2") 
```

我找到了函数 gtKEGG 来做通路分析，但我的问题是怎么做？因为当我运行该函数时，我没有创建任何错误，但我的输出文件是这样的：

```
> gtKEGG(groups, t(data_file), annotation="org.Mm.eg.db")
  holm                                                      alias p-value Statistic Expected Std.dev #Cov
00380   NA                                      Tryptophan metabolism      NA        NA       NA      NA    0
01100   NA                                         Metabolic pathways      NA        NA       NA      NA    0
02010   NA                                           ABC transporters      NA        NA       NA      NA    0
04975   NA                               Fat digestion and absorption      NA        NA       NA      NA    0
04142   NA                                                   Lysosome      NA        NA       NA      NA    0
04012   NA                                     ErbB signaling pathway      NA        NA       NA      NA    0
04110   NA                                                 Cell cycle      NA        NA       NA      NA    0
04360   NA                                              Axon guidance      NA        NA       NA      NA    0 
```

谁能帮我解决这个问题？谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:32:02.497

我找到了解决方案！

```
library(globaltest)
library(org.Mm.eg.db)

eg <- as.list(org.Mm.egENSEMBL2EG)
KEGG<-gtKEGG(as.factor(groups), t(data_file), probe2entrez= eg, annotation="org.Mm.eg.db") 
```

# apache - 使用重定向从 URL 中删除 .html

> ID：10245032
> 
> 赞同：8
> 
> 时间：2012-04-20T11:06:22.997
> 
> 标签：apache, .htaccess, magento, url-rewriting

我们有一个网站，不幸的是所有的 URL 都有`.html`后缀，它是一个 Magento 安装，Magento 允许您在 CMS 上更改它，但不幸的是，所有这些带`.html`后缀的 URL 在 Google 中的排名都很好。我们需要重定向到 non `.html`。

因此，考虑以下场景，我们正在从头开始重建此站点，因此我们在新站点上具有相同的 url，但没有 .html 后缀。

*   现在是： `www.example.de/cool-shoes.html`
*   将会：`www.example.de/cool-shoes`

所以 `www.example.de/cool-shoes.html`将不再存在，我一直在尝试使用*.htaccess*进行重定向，但没有成功。

到目前为止我已经尝试过：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*\.html\ HTTP/
RewriteRule (.*)index\.html$ /$1 [R=301,L] 
```

和：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

但它似乎不起作用......有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T11:35:54.813

好的，经过一些研究，并且未能通过重写规则实现这一点，以下代码行起作用：

```
redirectMatch 301 ^(.*)\.html $1 
```

这对于删除任何 url 扩展名并避免损坏的链接非常有用，希望将来对某人有所帮助...

干杯！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-15T23:45:36.983

这将像这样重写网址[http://example.com/page.html](http://example.com/page.html) -> [http://example.com/page](http://example.com/page)

```
# Remove .html from url
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T16:21:31.367

尝试将以下内容添加到具有 .html 扩展名的站点重定向 URL 的根目录中的 .htaccess 文件中，然后将其删除。

```
Options +FollowSymLinks -MultiViews
DirectorySlash Off

RewriteEngine On

RewriteCond %{SCRIPT_FILENAME}/ -d
RewriteCond %{SCRIPT_FILENAME}.html !-f
RewriteRule [^/]$ %{REQUEST_URI}/ [R=301,L]

RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule ^(.+)\.html$ /$1 [R=301,L]

RewriteCond %{SCRIPT_FILENAME}.html -f
RewriteRule [^/]$ %{REQUEST_URI}.html [QSA,L] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-10T22:20:24.580

这是对我有用的解决方案。

```
 RewriteCond %{THE_REQUEST} \.html [NC]
    RewriteRule ^(.*)\.html$ /$1 [R=301,L]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME}\.html -f
    RewriteRule ^(.*)$ $1.html [L] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T11:35:17.223

按照[步骤](http://www.blog.magentosupport.net/2011/07/remove-html-from-category-or-product-url-for-magento-webshop/)，您将能够从 url 中删除 .html 而无需修改 .htaccess 文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-20T11:21:34.073

这应该可以解决问题：

```
RewriteEngine On
RewriteRule ^(\w+)\.html$ /$1 [R=301,L] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T12:35:13.980

试试这个把你的 .htaccess 文件重定向永久 www.mysite.de/cool-shoes.html www.mysite.de/cool-shoes 这可能对你有帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-21T06:18:42.487

这适用于以 .html /product/raspberrypi.html ---> /product/raspberrypi/ (/product/raspberrypi/index.php) 结尾的 URL，index.php 被隐藏。我花了一段时间才弄清楚这一点。哈哈...

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} \.html$
RewriteRule ^(.*)\.html$ $1 [R=301,L]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

您必须使用“REQUEST_URI”并将其添加到索引重定向规则之前，因为它可能会被应用程序覆盖。重要的是要知道它的 URI 不是我们试图重定向的文件名或目录，因为文件名在根文件夹 (Wordpress) 中都有 index.php。

# javascript - 无法在 google plus 图标中指定单独的链接

> ID：10245034
> 
> 赞同：-1
> 
> 时间：2012-04-20T11:06:31.407
> 
> 标签：javascript, html, google-plus

我使用以下代码在我的网站中使用 google plus 图标

```
<script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script>
 <g:plusone size="medium" href="https://plus.google.com/u/0/b/104806777345217966807/"></g:plusone> 
```

但是每当我单击该按钮时，它会将我重定向到错误的 URL。我该如何改变这个

```
> https://accounts.google.com/ServiceLogin?service=oz&continue=https://plusone.google.com/%2B1/profile/?type%3Dpo%26client%3D1%26gpsrc%3Dwidget%26parent%3Dhttps://plusone.google.com%26proxy%3DI2_1334919708352%26rsz%3D1%26hl%3Den_US%26gpsrc%3Dwidget&hl=en-US#724922462 
```

如果我使用下面的代码，它会将我重定向到给定的路径，但它显示不同的视图

请指导我，我已经在所有博客中搜索过，但我的问题没有得到解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:19:37.437

*+1*按钮的目的是让查看者加 1，或在*Google+上公开推荐链接的网站*

因此，此人必须登录 G+ 才能执行此操作，因此该链接会将您重定向到 Google 登录页面。

如果我理解正确，您需要一个指向该页面的 G+ 图片链接。在这种情况下，只需找到并添加一个 G+ 图标图像并将其包含在`<a />`指向链接的标记中。

# android - android GoogleMaps 内存泄漏（？）

> ID：10245042
> 
> 赞同：2
> 
> 时间：2012-04-20T11:07:29.440
> 
> 标签：android, google-maps, memory-leaks

我正在从事一个处理地图活动的项目。我正在运行一个由单个活动 MaptestActivity 组成的测试应用程序，它扩展了 MapActivity 而没有做任何其他事情。我将设备旋转了十多次，并用 MAT 分析了堆转储。我注意到存在两个主要活动的实例（泄漏？）。我使用仅扩展 Activity 的相同 Activity 重新测试了该应用程序：转储显示系统仅保留一个实例，即当前实例。我附上了这两种情况的截图。我对MAT不太感兴趣，也许我只是误解了结果，一切正常。你能解释一下吗？

[有内存泄漏](http://i.stack.imgur.com/RDZZY.png)

[没有内存泄漏](http://i.stack.imgur.com/Y616C.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:40:15.260

如果旋转设备后内存中仍有两个活动，则确实存在内存泄漏。您可以使用 MAT 查看是什么阻止了该活动通过使用直方图被垃圾收集。搜索类名以找到它。然后右键单击它并选择列表对象/带有传入引用。这将列出该对象在内存中的每次出现。右键单击这些对象之一并选择 GC 根路径/排除弱引用。现在您应该能够看到对象的层次结构，在活动的 onDestroy 完成后，其中的某些内容并未完全清理。诸如对静态上下文的硬引用之类的事情会导致这种情况。为了解决我们的一些内存问题，我们不得不做一些事情，比如在适当的地方使用弱引用，

通常，如果您的活动没有保留像位图这样的大对象，您可以“摆脱”内存泄漏，因为这意味着在超过设备的应用程序堆大小之前会使用大量应用程序。但是，如果说您的所有活动都保存在一个大位图上，那么泄漏活动就变得更重要了。

这是一个好视频：[Android 应用程序的内存管理](http://developer.android.com/videos/index.html#v=_CruQY55HOk) 和一篇好文章：[避免内存泄漏](http://developer.android.com/resources/articles/avoiding-memory-leaks.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T11:34:55.627

在清单文件中为您的活动添加以下行

android:configChanges="keyboardHidden|orientation"

# c# - 垃圾收集和引用 C#

> ID：10245048
> 
> 赞同：1
> 
> 时间：2012-04-20T11:07:48.470
> 
> 标签：c#, collections, garbage-collection

我有一个设计，但我不确定垃圾收集是否会正确进行。
我有一些神奇的苹果，有些很好吃，有些很糟糕。

我有一本字典：（`BasketList = Dictionary <basketID,Basket>`
篮子清单）。

每个`Basket`对象都有一个对象，每个对象`Apple`都`Basket`存储一个对对象的引用`AppleSeperation`。

`AppleSeperation` 存储 2 个字典，`YummyApples = <basketID,Apple>`并且 `BadApples = Dictionary<basketID,Apple>`，所以当我被问到苹果在哪里时，我知道。

一个`Apple`对象 stores `BasketsImIn = Dictionary<ID,Basket>`，它指向 Basket 和 in Shops，以及 Apple in Basket。

我的问题是，如果我从中删除一个篮子`BasketList`并确保我从中删除 Apple`BadApples`和/或`YummyApples`，垃圾收集会正确进行，还是会有一些乱七八糟的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:13:04.117

您仔细考虑这一点是对的；拥有各种引用不仅对垃圾收集有影响，而且对您的应用程序的正常运行也有影响。

但是，只要您小心地删除您设置的所有引用，并且您没有任何其他独立变量持有该引用，垃圾收集器就会完成它的工作。

GC 在收集未引用对象方面实际上相当复杂。例如，它可以收集两个相互引用但在应用程序中没有其他“活动”引用的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:13:02.650

有关垃圾收集的基础知识，请参阅[http://msdn.microsoft.com/en-us/library/ee787088.aspx](http://msdn.microsoft.com/en-us/library/ee787088.aspx)。

从上面的链接中，当垃圾收集发生时......

1.  系统物理内存不足。
2.  托管堆上分配的对象使用的内存超过了可接受的阈值。这意味着已超过托管堆上可接受的内存使用量的阈值。随着流程的运行，此阈值会不断调整。
3.  GC.Collect 方法被调用。在几乎所有情况下，您都不必调用此方法，因为垃圾收集器会持续运行。此方法主要用于特殊情况和测试。

如果您正确执行清理，那么您不必担心！

# ios - 是否可以通过仪器测试准备好的 ipa 文件

> ID：10245049
> 
> 赞同：3
> 
> 时间：2012-04-20T11:07:58.533
> 
> 标签：ios, deployment, air, adobe, instruments

我有一个由 Adob​​e Flashbuilder（使用 AIR）在 IPA 文件中构建的应用程序，该应用程序在 iPad 上运行顺畅。好吧..工作顺利，直到我遇到一些内存泄漏。是否可以使用 Apple 的 Instruments 监控此应用程序的内存使用情况？

现在我通过将 IPA 文件拖入 iTunes 并同步来部署这个应用程序。

我需要监控这个应用程序。可能吗？最终应该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:39:57.360

是的。您可以使用仪器进行分析。

1.  在您的设备中安装您的应用程序。
2.  将您的设备连接到 Mac。
3.  打开 Instruments 并在出现的对话框中选择 Leaks（您实际上可以选择任何选项，例如 Allocations 等）。
4.  在左上角，您将看到“选择目标”。前两个选项是您的设备和您的 Mac。选择您的设备。
5.  在同一个菜单中，第 5 个选项又是“选择目标”。在那里，您将看到设备中所有已安装的应用程序。选择您要分析的应用程序。
6.  最后，按下 Record，您将看到您的应用程序在设备中运行，并且 Leaks/Allocations（无论您选择什么）显示在仪器中。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-02T16:26:41.643

Try running Instruments and select an installed app on your device, if you get this message, you know what's happening

> Target failed to run: Permission to debug com.fantageek.MyApp was denied. The app must be signed with a development identity (e.g. iOS Developer).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:11:25.957

我相信通过 Xcode 组织者是可能的。它将设备上发生的事件输出到日志中。不过不要引用我的话

# ios - 为 CCScrollLayer 使用 CCLayer 的子类

> ID：10245052
> 
> 赞同：0
> 
> 时间：2012-04-20T11:08:09.593
> 
> 标签：ios, objective-c, ios5, cocos2d-iphone, ccscrolllayer

我创建了一个自定义类，它是一个`subclass`并`CCLayer`试图将其用于`CCScrollLayer`

我这样做的方式是：

```
//Store the my layers to an NSMutableArray
for (AACustomClassLayer *cardLayer in levels) {
    [layers addObject:cardLayer];
} 
```

在它的引擎盖下`CCScrollLayer`崩溃：

```
- (void) updatePages
{
    // Loop through the array and add the screens if needed.
    int i = 0;
    for (CCLayer *l in layers_)
    {
        l.anchorPoint = ccp(0,0);
        l.contentSize = [CCDirector sharedDirector].winSize;
        l.position = ccp(  (i * (self.contentSize.width - self.pagesWidthOffset)), 0  );
        if (!l.parent)
            [self addChild:l];
        i++;
    }
} 
```

AACustomClassLayer 类（CCLayer 的子类）的实现如下所示：

```
-(id)initWithChapter:(AALevel *)level {
    self = [super init];
    if (self) {
        self.isTouchEnabled = YES;
//Here I'm adding the CCSprite to my layer

  }
    return self;
} 
```

更新：

**崩溃日志**

```
2012-04-20 14:12:12.344 [15780:10a03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary setAnchorPoint:]: unrecognized selector sent to instance 0x884ab40'
*** First throw call stack:
(0x1a75022 0x200fcd6 0x1a76cbd 0x19dbed0 0x19dbcb2 0xd013f 0xcfe2b 0x102370 0x44c15 0xbe45f 0x8a94be 0x8aa274 0x8b9183 0x8b9c38 0x8ad634 0x282def5 0x1a49195 0x19adff2 0x19ac8da 0x19abd84 0x19abc9b 0x8a9c65 0x8ab626 0xbda06 0x22e5)
terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:35:00.913

我找到了！

```
for (AACustomClassLayer *cardLayer in levels) {
    cardLayer = [[AACustomClassLayer node] autorelease];
    [layers addObject:cardLayer];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:00:48.177

您应该在`for`循环中添加条件检查，以确定您从枚举中获取的对象是否实际上是 CCLayer。您的崩溃日志指出`anchorPoint`setter 在某些对象上不可用，大概是在您的`layers_`数组中的一个对象上，因为这是您发布的处理锚点的代码。

枚举很方便，但是您将所有对象都封装到`CCLayer`其中一个可能不是的时候。我不知道您在哪里添加对象，`layers_`但您是否有可能添加一个实际上不是 a 的对象`CCLayer`？

# bash - bash扩展变量的值以在另一个变量中使用

> ID：10245059
> 
> 赞同：2
> 
> 时间：2012-04-20T11:09:15.570
> 
> 标签：bash, variable-expansion

我希望这个问题有意义，我想做类似的事情：

```
a=test
b=a
echo ${$b} # should echo test 
```

基本上我想`$b`扩展到值`a`并让 bash 回显变量的值`$a`（因为`${a}`is `test`）。

我应该使用什么语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:13:48.040

```
a=test
b=a
echo ${!b} # does echo test 
```

# javascript - FancyBox 2.0.6 的标题超过 1 行

> ID：10245060
> 
> 赞同：2
> 
> 时间：2012-04-20T11:09:15.850
> 
> 标签：javascript, fancybox

我正在尝试做与这里解释的完全相同的事情： [Formatting a title for FancyBox](https://stackoverflow.com/questions/6046680/formatting-a-title-for-fancybox)

问题是我使用的是 FancyBox 2.0.6 版，它与其他主题中解释的版本不同

```
/*
 *  Title helper
 */

F.helpers.title = {
    beforeShow: function (opts) {
        var title, text = F.current.title;

        if (text) {
            title = $('<div class="fancybox-title fancybox-title-' + opts.type + '-wrap">' + text + '</div>').appendTo('body');

            if (opts.type === 'float') {
                //This helps for some browsers
                title.width(title.width());

                title.wrapInner('<span class="child"></span>');

                //Increase bottom margin so this title will also fit into viewport
                F.current.margin[2] += Math.abs(parseInt(title.css('margin-bottom'), 10));
            }

            title.appendTo(opts.type === 'over' ? F.inner : (opts.type === 'outside' ? F.wrap : F.skin));
        }
    }
}; 
```

你能帮助我吗..？我试图添加行 temp=title.split('|'); if(!temp[1]){temp[1]=""}; 在 if (text) 之后但它破坏了一切.. :P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T18:18:09.427

使用**Fancybox v2.x**，您可以在触发 fancybox 的锚点之后将您`title`的设置为单独（隐藏） ，例如：`<div>`

```
<a class="fancybox"  href="images/01.jpg">open image</a>
<div style="display: none;"><!-- my title for fancybox above-->
 <p>Line 1</p>
 <p>line 2 with <a href="#nogo">link</a></p>
</div> 
```

这样，您可以拥有更复杂`title`的多行和 html 内容。然后你可以使用一个更简单的脚本：

```
$(document).ready(function() {
 $(".fancybox").fancybox({
  helpers : { 
   title : { type : 'inside' }
  }, // helpers
  /* the following option works fine until version v2.0.5 or below */
  // afterLoad: function(){
  //  this.title = '<div class="myTitle">'+$(this.element).next('div').html()+'</div>';
  // }
  /* the following option should be set for version v2.0.6+ */
      beforeShow: function(){
       this.title = '<div class="myTitle">'+$(this.element).next('div').html()+'</div>';
      }
 }); // fancybox
}); // ready 
```

您还可以为您设置单独的 css 声明`title`：

```
.myTitle {background-color: #fff; padding: 5px;}
.myTitle p {line-height: 16px; font-size: 12px; padding: 0; margin: 0;}
/* if you want the title stick to the image in fancybox */
.fancybox-title-inside-wrap  {margin-top: 0 !important;} 
```

使用这种方法，您不必弄乱花哨的 js/css 文件。此外，更少的 javascript 意味着更少的 CPU 开销，包括不必要的拆分、大小计算、换行等。

**问题**：如果我有多个图像（画廊）怎么办？

**答案**：对 html 中的每个图像执行相同的操作，例如：

```
<a class="fancybox" rel="gallery" href="images/01.jpg">open image 1</a>
<div style="display: none;"><!-- my title for fancybox above-->
 <p>Line 1</p>
 <p>line 2 with <a href="#nogo">link</a></p>
</div>
<a class="fancybox" rel="gallery" href="images/02.jpg">open image 2</a>
<div style="display: none;"><!-- my second title -->
 <p>Line 1 for second image title</p>
 <p>line 2 with <a href="#nogo">link</a></p>
 <p>a third line here, why not?</p>
</div> 
```

等等......并使用相同的脚本。

**注意**：OP评论说：

> 如果我单击上一个或下一个按钮，标题就会消失。

对于 fancybox v2.0.6，我们需要`title`使用 option来构建`beforeShow`，而不是`afterLoad`这样：

```
 afterLoad: function(){
   this.title = '<div class="myTitle">'+jQuery(this.element).next('div').html()+'</div>';
  } 
```

应该是（从 v2.0.6 开始）：

```
 beforeShow: function(){
   this.title = '<div class="myTitle">'+jQuery(this.element).next('div').html()+'</div>';
  } 
```

[使用 v2.0.6 的工作演示](http://www.picssel.com/playground/jquery/titleFromNextDiv_20apr12.html)

# asp.net - 将大字符串发布到 Web API 控制器

> ID：10245061
> 
> 赞同：1
> 
> 时间：2012-04-20T11:09:20.187
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api, wcf-web-api

我有一个以下控制器

```
public class MyController : ApiController
{
   [HttpPost]
   public string LoadData(string currentState)
   {

   }
} 
```

我从浏览器发布了一些数据`jQuery.post`。状态的长度应该是 29915 个字符，而`currentState`变量只有 21621 个字符。字符串的结尾丢失。我检查了浏览器是否将所有数据发送到服务器并且确实如此。所以问题出在服务器某处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:46:04.323

设置`ReadBufferSize`帮助：

```
protected void Application_Start(object sender, EventArgs e)
{
   GlobalConfiguration.Configuration.Formatters.FormUrlEncodedFormatter.ReadBufferSize = 256 * 1024; // 256 KB
} 
```

# ipad - 是否有理由为 iPad 2 开发购买 iPad 2 而不是购买新的 iPad3？

> ID：10245066
> 
> 赞同：0
> 
> 时间：2012-04-20T11:10:01.917
> 
> 标签：ipad, ipad-2, choice, ipad-3

我的问题真的很基本。

是否有理由为 iPad 2 开发购买 iPad 2 而不是购买新的 iPad3？

我考虑过 nativ 或 Web 应用程序的分辨率问题。

我想为新版本投资，但我不确定这样做是否明智。

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:56:03.283

“...购买 iPad 2 用于 iPad 2 开发...”的原因有很多。您是否打算仅针对 iPad2 而不是针对 iPad3 及更高版本的设备？如果是这样，那么是的，购买 iPad2。

这个问题意味着您还没有 iPad2 用于您的开发。您应该使用哪些设备进行开发取决于您的应用所需的设备功能；您可能不需要 iPad2 或 3；iPad1 甚至模拟器都可以满足您的目的。

苹果（以及排版行业：）多年来一直强调点不是像素。渲染和定位都是分点完成的；只有位图会受到 Retina 显示器更高分辨率的影响。此处的其他答案可以将您指向 UIScreen 缩放方法，该方法允许您检测设备的像素/点比率并对其采取行动。

# iphone - 单击 UISearchBar 中的取消按钮会导致 tableView 中没有选择？

> ID：10245067
> 
> 赞同：0
> 
> 时间：2012-04-20T11:10:02.387
> 
> 标签：iphone, objective-c, ios

我正在使用 UISearchBar，并且搜索工作正常，但是在单击取消按钮进行搜索后，didSelectedRowAtIndexPath 在 UItableView 中不起作用。它不允许我选择任何行以更进一步。

任何想法？

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar 
{
    isSearchOn = YES;
    canSelectRow = NO;
    table.scrollEnabled = NO;
}

- (void) doneSearching:(id)sender 
{   
    isSearchOn = NO;
    canSelectRow = YES;
    table.scrollEnabled = YES;
    self.navigationItem.rightBarButtonItem = nil;

    [table reloadData];
}

- (void)searchBar:(UISearchBar *)searchBar 
    textDidChange:(NSString *)searchText 
{
    if ([searchText length] > 0) {
        isSearchOn = YES;
        canSelectRow = YES;
        table.scrollEnabled = YES;
        [self searchMoviesTableView:searchText];
    }
    else {
        isSearchOn = NO;
        canSelectRow = NO;
        table.scrollEnabled = NO;       
    }
    [table reloadData];
}

- (void) searchMoviesTableView :(NSString*)searchText{
    [searchResult removeAllObjects];

    for (NSDictionary *artistDic in listOfMovies) {
        NSRange titleResultRange = [[artistDic valueForKey:@"artist"] rangeOfString:searchText options:(NSCaseInsensitiveSearch | NSLiteralSearch)];
        if (titleResultRange.length > 0)
            [searchResult addObject:artistDic];
    }
}

-(void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
{
    searchBar.text = @"";
    table.scrollEnabled = true;
    [table reloadData];
    [searchBar resignFirstResponder];
}

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar 
{
    [searchBar resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:34:16.710

这是我的错误...

```
else {
    isSearchOn = NO;
    canSelectRow = NO;
    table.scrollEnabled = NO;       
}

set canSelectRow=YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:34:31.850

我注意到你在打电话：

```
searchBar.text = @""; 
```

in `searchBarCancelButtonClicked:`，这可能会导致`searchBar:textDidChange:`. 在`searchBar:textDidChange:`你设置：

```
canSelectRow = NO; 
```

对于长度为 0 的字符串（对于 是正确的`@""`）。我想知道这是根本原因吗？

# android - 如何将 OnClickListener() 设置为 EditTextPreference 对话框的 OK 按钮？

> ID：10245069
> 
> 赞同：1
> 
> 时间：2012-04-20T11:10:16.567
> 
> 标签：android, android-edittext, android-preferences

> **可能重复：**
> [如何调用 EditTextPreference 中的确定按钮](https://stackoverflow.com/questions/7527894/how-to-call-the-ok-button-in-the-edittextpreference)

我想验证 EditTextPreference 对话框的输入（输入 6 位数字）。

这就是我的（相关）preferences.xml 片段的样子：

```
 <!--EditTextPreference-->
            <com.app.preferences.UpdatePincodePreference
                android:key="PIN_CODE_PREFERENCE"
                android:title="@string/pincode_preference_title" 
                android:summary="@string/pincode_preference_summary"
                android:dialogTitle="@string/pincode_preference_dialog_title"
                android:dialogMessage="@string/pincode_preference_dialog_message" 
                android:inputType="number"
            /> 
```

如何测试用户在首选项对话框的 EditText 中输入的数字是否少于或多于 6 位？

基本上我需要在 OK 按钮上设置一个 onClickListener()，但是如何获得我没有定义的 OK 按钮。它是 EditTextPreference 的默认视图，取消按钮也是如此。

[该问题与“如何调用 EditTextPreference 中的确定按钮](https://stackoverflow.com/questions/7527894/how-to-call-the-ok-button-in-the-edittextpreference)”完全相同，但已接受的解决方案中提供的链接现在已损坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:33:38.533

该解决方案的作者已将他的项目从 Google Code 移至 GitHub。[您可以在https://github.com/Knickedi/android-toolbox](https://github.com/Knickedi/android-toolbox)找到新项目，以及他指的是验证[`DialogPreference`](https://github.com/Knickedi/android-toolbox/blob/39399c5ebe00ccd123cfd79095309c11c88839a0/android_toolbox/src/de/viktorreiser/toolbox/preference/ValidatedDialogPreference.java)和验证的两个文件的链接[`EditTextPreference`](https://github.com/Knickedi/android-toolbox/blob/39399c5ebe00ccd123cfd79095309c11c88839a0/android_toolbox/src/de/viktorreiser/toolbox/preference/ValidatedEditTextPreference.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T05:39:05.640

这可以使用 setOnPreferenceChangeListener() 来实现

```
public UpdatePasswordPreference(Context context, AttributeSet attrs) {

    this.setOnPreferenceChangeListener(new OnPreferenceChangeListener() 
    {   
        @Override
        public boolean onPreferenceChange(Preference preference, Object newValue) 
        {
            MobicopLogger.d("Preference input changed");
            try 
            {
                if(newValue.toString().length() != 6)
                    return false;
                else
                    return true;
            }
            catch(Exception e)
            {
                return false;
            }
        }

    });

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:07:24.487

创建一个自定义布局并通过以下覆盖方法将其应用于首选项：

```
@Override
protected void onPrepareDialogBuilder(AlertDialog.Builder builder) {
    super.onPrepareDialogBuilder(builder);    //To change body of overridden methods use File | Settings | File Templates.
    builder.setView(LayoutInflater.from(ctx).inflate(R.layout.custome_preference_layout,null));
} 
```

# php - 以自定义帖子类型显示标签面板

> ID：10245071
> 
> 赞同：8
> 
> 时间：2012-04-20T11:10:24.117
> 
> 标签：php, wordpress, custom-post-type

我刚刚制作了一个自定义帖子类型。如何在侧边栏上显示与*帖子*类型相同的**标签**面板？

 ** * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-20T11:45:59.183

将此行添加到`register_post_type`主题文件夹中 functions.php 中的部分

```
'taxonomies' => array('category', 'post_tag') 
```

完整的代码是这样的

```
add_action( 'init', 'create_post_type' );
function create_post_type() {
register_post_type( 'posttypename',
        array(
            'labels' => array(
                'name' => __( 'PostTypeName' ),
                'singular_name' => __( 'PostTypeName' )
            ),
            'public' => true,
            'has_archive' => true,
            'rewrite' => array('slug' => 'posttypename'),
            'supports' => array( 'title', 'editor', 'excerpt', 'custom-fields', 'thumbnail' ),
            'taxonomies' => array('category', 'post_tag') // this is IMPORTANT
        )
    );
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-08T08:49:52.070

如果您使用`'taxonomies' => array('category', 'post_tag')`，则 wordpress 默认帖子的标签将显示在自定义帖子类型区域中。

这是“新闻”帖子类型的干净而独特的方式。不与其他自定义帖子类型、默认标签等混合。

您可以[从此链接关注“创建自定义帖子类型和带有类别的标签”的完整详细信息。](http://webexplorar.com/wordpress-create-custom-post-types-with-tags-and-categories/)

```
add_action( 'init', 'news_tag_taxonomies' ); //change order add_action( 'init', 'news_tag_taxonomies', 0 );

//create two taxonomies, genres and tags for the post type "tag"
function news_tag_taxonomies() 
{
  // Add new taxonomy, NOT hierarchical (like tags)
  $labels = array(
    'name' => _x( 'Tags', 'taxonomy general name' ),
    'singular_name' => _x( 'Tag', 'taxonomy singular name' ),
    'search_items' =>  __( 'Search Tags' ),
    'popular_items' => __( 'Popular Tags' ),
    'all_items' => __( 'All Tags' ),
    'parent_item' => null,
    'parent_item_colon' => null,
    'edit_item' => __( 'Edit Tag' ), 
    'update_item' => __( 'Update Tag' ),
    'add_new_item' => __( 'Add New Tag' ),
    'new_item_name' => __( 'New Tag Name' ),
    'separate_items_with_commas' => __( 'Separate tags with commas' ),
    'add_or_remove_items' => __( 'Add or remove tags' ),
    'choose_from_most_used' => __( 'Choose from the most used tags' ),
    'menu_name' => __( 'Tags' ),
  ); 

  register_taxonomy('tag','news',array( // replace your post type with "news"
    'hierarchical' => false,
    'labels' => $labels,
    'show_ui' => true,
    'update_count_callback' => '_update_post_term_count',
    'query_var' => true,
    'rewrite' => array( 'slug' => 'tag' ),
  ));
} 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-19T21:01:56.893

除了默认的 WP codex 模板之外，我需要添加的只是

```
'taxonomies' => array('post_tag'), 
```*

# facebook - Facebook 上的评论弹出框隐藏在 m 网站菜单和其他元素后面。我怎样才能让它在顶部可见

> ID：10245073
> 
> 赞同：1
> 
> 时间：2012-04-20T11:10:26.490
> 
> 标签：facebook, facebook-like, facebook-likebox

我试图弄清楚如何使 facebook 评论弹出框可见，并且不会被其他年龄元素（如菜单和我的 javascript 滚动）隐藏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:19:56.897

您可以尝试将其嵌套在具有 css 样式位置的 div 中：绝对和/或高 z-index（如 999）。

# actionscript-3 - Actionscript 3 嵌入式字体 UTF8

> ID：10245075
> 
> 赞同：0
> 
> 时间：2012-04-20T11:10:41.590
> 
> 标签：actionscript-3, utf-8, fonts, embed

我需要嵌入支持所有类型字符的字体。当我这样做时，我的“swf”文件占用增加了 110kb。我想避免这种情况。在不增加文件大小的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:31:28.597

你确定你需要*所有*的字符（见[维基百科](http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters)）？如果是这样，您可能无法避免 swf 文件大小的增加。但这样的情况是极不可能的。

如果您不需要所有可能的字符，则可以在 Flash IDE 中或使用 Font 元数据标记指定所需的字符范围（请参阅[此页面](http://inspiritgames.com/blog/2010/09/embed-fonts-into-pure-as3-project)以获取示例）。这可以大大减小文件大小。

在最坏的情况下，您可以编译多个 SWF，每个 SWF 都嵌入了自己的 Unicode 范围。然后，在运行时，您可以确定在特定情况下需要哪些范围，并动态加载所需的 SWF。

# macos - /var/log/system.log 文件不在 Mac 上保持写入

> ID：10245077
> 
> 赞同：2
> 
> 时间：2012-04-20T11:11:01.183
> 
> 标签：macos, logging

在我的 mac 系统上，/var/log/system.log 直到两天前才写入。我要它继续写，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:24:14.520

您想查看之前写入 system.log 的内容吗？系统日志被“轮换”。当它变得太大时，它被移到一边并被压缩。为新的日志消息创建一个新的系统日志。旧日志保存为/var/log/system.log.0.bz2、system.log.1.bz2等，可以通过`sudo bzless`命令解压查看。

执行日志轮换的程序是[newsyslog](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man8/newsyslog.8.html)。它的配置文件是[newsyslog.conf](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man5/newsyslog.conf.5.html)。由于 /System/Library/LaunchDaemons/com.apple.newsyslog.plist 中的[launchd plist](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/launchd.plist.5.html)文件，它由[launchd](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man8/launchd.8.html)定期运行。

# .net - 菜单项触发器不起作用

> ID：10245079
> 
> 赞同：3
> 
> 时间：2012-04-20T11:11:06.083
> 
> 标签：.net, wpf, triggers, menuitem, resourcedictionary

我想使用 a`trigger`自动隐藏`MenuItem`禁用的 a 。如果我在这样的特定项目中使用我的风格，`MenuItem`它会起作用 -

```
<MenuItem
    Command="{Binding RelativeSource={RelativeSource FindAncestor, 
                        AncestorType={x:Type ContextMenu}}, 
                        Path=PlacementTarget.DataContext.ExportCommand}"
    Header="Export...">
    <MenuItem.Style>
        <Style TargetType="{x:Type MenuItem}">
            <Style.Triggers>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Visibility" Value="Collapsed" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </MenuItem.Style>
</MenuItem> 
```

但是如果我把它放在`style`这样的地方`ResourceDictionary`，那就行不通了-

```
<Style x:Key="{x:Type MenuItem}" TargetType="{x:Type MenuItem}" >
    <Style.Triggers>
        <Trigger Property="IsEnabled" Value="False">
            <Setter Property="Visibility" Value="Collapsed" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

我想对我的所有菜单项都有这种行为，我不想把这种风格放在`MenuItem`我的`ContextMenu`. 知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:41:40.783

仅当未设置样式时，样式才会自动应用于目标类型的所有实例`x:Key`( [http://msdn.microsoft.com/en-us/library/ms745683.aspx](http://msdn.microsoft.com/en-us/library/ms745683.aspx) )。这是你的情况吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:49:11.987

这似乎有效。我刚刚尝试过：

```
<Grid>
<Grid.Resources>
  <Style x:Key="{x:Type MenuItem}" TargetType="MenuItem" >
    <Setter Property="OverridesDefaultStyle" Value="False" />
    <Setter Property="TextBlock.Foreground" Value="Blue" />
    <Style.Triggers>
      <Trigger Property="IsEnabled" Value="False">
        <Setter Property="Visibility" Value="Collapsed" />
      </Trigger>
    </Style.Triggers>
  </Style>

</Grid.Resources>

<TextBox Text="Hello!" IsReadOnly="True">
  <TextBox.ContextMenu>
    <ContextMenu >
      <MenuItem Header="Item1" />
      <MenuItem Header="Item2" IsEnabled="False"/>
      <MenuItem Header="Item3" />
    </ContextMenu>
  </TextBox.ContextMenu>
</TextBox>
</Grid> 
```

# ios - 在分组的 UITableView 中更改单元格的角半径

> ID：10245084
> 
> 赞同：6
> 
> 时间：2012-04-20T11:11:26.140
> 
> 标签：ios, objective-c, uitableview

经过数小时的谷歌搜索，我想知道是否可以更改 a 的角半径`grouped UITableView`。

我试过了

> hoursTable.layer.cornerRadius = 5.0;

但似乎没有任何改变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T11:13:40.237

确保使用您的代码 hoursTable.layer.cornerRadius = 5.0 剪辑表格视图的子视图；

按代码**`[hoursTable setClipsToBounds:YES];`**

```
hoursTable.layer.cornerRadius = 5.0;
[hoursTable setClipsToBounds:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T11:17:01.257

你确定`<QuartzCore/QuartzCore.h>`在你的应用程序中使用框架吗

您的方法 ( `hoursTable.layer.cornerRadius = 5.0;`) 只为您提供圆角，而无需将您的 tableview 添加到 superView 或剪切它。

也使用

```
[hoursTable setClipsToBounds:YES]; 
```

这仅适用于 ios 3....如果您使用 ios 4 或 ios 5x，请查看[SO answer](https://stackoverflow.com/questions/1106861/round-corners-on-uitableview)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T02:07:07.253

我建议

1）制作一个子类`UITableViewCell`并设置背景颜色清晰

2）制作一个子类`UITableView`并设置分隔符颜色清晰

3）在表格视图中使用此单元格

`UITableViewCell`现在这是在子类中实现的重要方法

在 `- (void)drawRect:(CGRect)rect`方法中尝试相应地制作一个贝塞尔路径来填充和描边路径，直到你的角半径和背景颜色......

您可以通过`self.contentView.frame`绘制新的贝塞尔路径获得的内容矩形。

# excel - Delphi 6 - 从 Delphi 应用程序创建 Excel 图表 - 同一页面上的数据和图表

> ID：10245085
> 
> 赞同：2
> 
> 时间：2012-04-20T11:11:27.500
> 
> 标签：excel, delphi

我需要在 delphi 程序的 excel 页面中创建一个 excel 图表。

我在到达线路时收到“未找到成员”错误。

```
ch1.Chart.SeriesCollection.Item[0].Values := Sheets.Item['Delphi Data'].Range['E5:E15']; 
```

你能帮我解决吗

下面给出的是使用的代码。

```
procedure TForm1.ChartData;
var
     ARange,Sheets,ch1 : Variant; 
     SSeries : Series; 
     num : integer; 
     ChartAxis : Axis; 
     lcid :  Cardinal; 
begin 
  ch1 := XLApp.ActiveWorkBook.Sheets[1].ChartObjects.Add ( 500,100,400,200 ); // creates a new chart in the specified 
  Sheets := XLApp.Sheets; 
  ch1.Chart.ChartWizard ( 
                         Sheets.Item['Delphi Data'].Range['D5:D15'],   // 1  Source 
                         xlBarStacked, //  2  The chart type. 
                         8,            //  3  Format  
                         2,            //  4  PlotBy  
                         8,            //  5  CategoryLabels  
                         3,            //  6  SeriesLabels  
                         True,        //  7  HasLegend - 'true' to include a legend. 
                         'Sijos Report',  // 8  Title - The Chart control title text. 
                         'Y Legend',      // 9  CategoryTitle - The category axis title text. 
                         'X Legend',      // 10  ValueTitle - The value axis title text 
                         2                // 11  ExtraTitle - The series axis title for 3-D charts or the second value axis title for 2-D charts. 
                       ); 
ch1.Chart.SetSourceData(Sheets.Item['Delphi Data'].Range['D5:D15'],xlColumns); 

ch1.Chart.SeriesCollection.Item[0].Values := Sheets.Item['Delphi Data'].Range['E5:E15']; 
ch1.Chart.SeriesCollection.Item[0].XValues := Sheets.Item['Delphi Data'].Range['F5:F15'];  
End; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:17:54.027

我认为您需要`ch1.Chart.SeriesCollection(1)`而不是`ch1.Chart.SeriesCollection.Item[0]`因为 Excel 使用基于 1 的索引。

我也无法获取您的代码，在访问系列对象时使用后期绑定的 COM 来工作。但是，如果您切换到使用早期绑定的 COM，那就没问题了。例如，您需要将 Excel2000 添加到您的 uses 子句中。

```
var
  S: Series;
....
S := IUnknown(ch1.Chart.SeriesCollection(1)) as Series;
S.Values := Sheets.Item['Delphi Data'].Range['E5:E15']; 
S.XValues := Sheets.Item['Delphi Data'].Range['F5:F15']; 
```

如果我是你，我会将整个代码切换到早期绑定。

我认为您的代码基于[Charlie Calvert 的这个 Delphi 3 示例](http://edn.embarcadero.com/article/10129)。我无法让它在我的 Delphi 6 上工作。也许 Delphi 改变了。也许 Excel 发生了变化。无论如何，让它对我有用的是切换到早期绑定的 COM。

# c - 在 C 中蚕食字节

> ID：10245087
> 
> 赞同：0
> 
> 时间：2012-04-20T11:11:33.367
> 
> 标签：c, file, buffer

我需要在 C 中一次蚕食 4 个字节。

C 的读取函数是否为我缓冲，即从文件中读取一个 2^n 大小的块到缓冲区然后从中读取？

或者我应该创建自己的缓冲区来读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:22:03.657

只需创建一个`uint32_t`缓冲区并分块读取。4096 字节通常效果很好，因为它是块大小和单个内存页面的一小部分。然后您可以一次提取一个 32 位字，并使用按位运算符提取 4 个字节中的每一个。

非常粗略地说，类似于：

```
#define BUFFER_SIZE 4096

// Allocate buffer and open input file

uint32_t* buffer = malloc(BUFFER_SIZE);

int fd = open(...);

// Loop while not end-of-file and read chunks

size_t bytes_read = read(fd, buffer, BUFFER_SIZE);

//...

// Process each chunk

unsigned word_count = bytes_read/sizeof(uint32_t);
for (unsigned i = 0; i < word_count; i++)
{
    uint32_t word = buffer[i];

    process(word);
} 
```

如果您需要按名称寻址每个字节，您还可以使用`uint32_t`.

# javascript - 选择本地视频并在 HTML5 videoplayer 中播放（都是本地的，同一个文件夹）

> ID：10245090
> 
> 赞同：3
> 
> 时间：2012-04-20T11:11:43.687
> 
> 标签：javascript, html, video, filechooser

对于学校，我需要使用带有额外控件的 HTML5 视频播放器以及从本地驱动器中选择文件的选项。该页面也在本地运行。所以没有上传。文件（HTML 和视频）位于同一个本地文件夹中。

对于选择的东西，我使用带有`<form><input type="file" id="chosen" /><button type="submit" onclick="open();">Change</button></form>`. 现在这是我应该操纵视频播放器源的 JavaScript：

```
function open()
{
    var file=document.getElementById('chosen');
    var fileURL = window.URL.createObjectURL(file);
    player.src=fileURL;
    player.load();
} 
```

视频播放器如下所示：

```
<video id=player>
<source src="big-buck-bunny_trailer.webm" type="video/webm" />
<source src="trailer_480p.mov" type"video/mp4" />
</video> 
```

当然，我已经将变量“播放器”与我的视频播放器连接起来。player.load()-thing 工作正常，因此该函数被正确调用。

现在我的问题是：Javascript 部分有什么问题或缺失？该项目无法按说明工作。

也许你可以帮助我。谢谢 ;）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T12:22:17.437

我不确定你在问什么，但你的脚本中有一些问题。

```
function openPlayer(){ // open() is a native function, don't override
  var vplayer=document.getElementById('player'); // A reference to the video-element
  var file=document.getElementById('chosen').files[0]; // 1st member in files-collection
  var fileURL = window.URL.createObjectURL(file);
  vplayer.src=fileURL;
  vplayer.load();
  return; // A good manner to end up a function
} 
```

并且不要忘记在`onclick()`.

更多信息`<video>`：[https ://developer.mozilla.org/en/HTML/Element/video](https://developer.mozilla.org/en/HTML/Element/video)

特别是对于脚本：[https ://developer.mozilla.org/en/DOM/HTMLMediaElement](https://developer.mozilla.org/en/DOM/HTMLMediaElement)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:34:56.550

我不确定是否缺少编解码器会导致此处出现问题，您的视频源 URL 应如下所示：

```
<source src="big-buck-bunny_trailer.webm" type='video/webm; codecs="vp8, vorbis"' /> 
```

# string - excel中的iserror公式

> ID：10245091
> 
> 赞同：1
> 
> 时间：2012-04-20T11:11:46.817
> 
> 标签：string, excel, error-handling, find, match

在excel中，如果我有以下

=match("abc",A:A,0)

如果它出错，那么它会抛出一些类似的东西

```
#value 
```

所以我说

=iserror((match("abc",A:A,0),"未找到",match("abc",A:A,0) )

但这似乎是混乱的代码..两次运行相同的公式，可以更好地格式化以给出相同的结果吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T19:48:19.823

您使用的是哪个版本的 Excel？在 Excel 2007 或更高版本中，您可以使用 IFERROR 函数来避免重复

`=IFERROR(MATCH("abc",A:A,0),"Not found")`

或在早期版本中，您可以使用 COUNTIF

`=IF(COUNTIF(A:A,"abc"),MATCH("abc",A:A,0),"Not found")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:43:59.097

我不知道执行此操作的内置方法，但您可以编写自己的 VBA 函数：

```
Function GracefulError(varValue As Variant, strMessage As String) As Variant
    If IsError(varValue) Then
        GracefulError = strMessage
    Else
        GracefulError = varValue
    End If
End Function 
```

用法：

```
=GracefulError(match("abc",A:A,0), "Not found") 
```

# c# - 从 C# 文件中读取一系列数字

> ID：10245093
> 
> 赞同：0
> 
> 时间：2012-04-20T11:11:49.393
> 
> 标签：c#, .net, windows

我目前有一种方法可以从文件中读取整数，并在达到 16 个整数时针对字符串（寄存器）运行正则表达式。尽管从文件中读取整数（或数字）的方式给我带来了问题。它目前从文件中读取所有数字，并忽略任何其他字符，例如字母。因此将收集以下内容：

示例.txt：

> h568fj34fj390fjkkkkf385837692g1234567891011121314fh

输出错误：

> 5683439038583769

正确的输出：

> 1234567891011121

但我只想收集一串连续的数字（如果在数字之间有其他字符，如字母，则不会被计算在内），并且该方法适用于一系列数字（总共 16 个），中间没有其他字符，如字母.

我目前的逻辑如下：

```
 var register = new StringBuilder();

    using(var stream = File.Open(readme.txt, FileMode.Open))
    {
                bool execEnd = false;
                bool fileEnded = false;

                int buffer;
                while(execEnd = true)
                {
                while(register.Length < 16 && !fileEnded)
                    {
                buffer = stream.ReadByte();
                if(buffer == -1)
                {
                fileEnded = true;
                break;
                }

     var myChar = (char)buffer;
     if(Char.IsNumber(myChar))
    register.Append(myChar);
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:20:31.673

这应该是您所需的正则表达式：`\d{16}`

因此，您可以使用 LINQ 查找所有匹配项：

```
var allMatches = 
     System.IO.File.ReadLines(path)
    .Select(l => System.Text.RegularExpressions.Regex.Match(l, @"\d{16}"))
    .Where(m => m.Success)
    .ToList();

foreach (var match in allMatches)
{
    String number = match.Value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:16:48.630

```
string input = "h568fj34fj390fjkkkkf385837692g1234567891011121314fh";
string num = System.Text.RegularExpressions.Regex.Match(input, @"\d{16}").Value; 
```

# objective-c - 通过应用程序委托类更改在模型类中声明为属性的实例变量的值

> ID：10245094
> 
> 赞同：0
> 
> 时间：2012-04-20T11:12:10.750
> 
> 标签：objective-c, cocoa, nsobjectcontroller

**我在我的示例应用程序中做以下事情：**

我创建了一个模型类并在其中声明了一个数组作为属性。

```
@interface MyModel : NSObject

@property (strong, readwrite) NSArray *charactersToDisplay;

@end 
```

在我的应用委托类中，我将 MyModel 声明为一个属性。

```
@interface MyAppDelegate : NSObject <NSApplicationDelegate>

@property (strong, readwrite) MyModel *myModel;
@property (weak) IBOutlet NSObjectController *myModelController;

- (IBAction)test:(id)sender;

@end 
```

在 MainMenu.xib 中，我拖放了一个对象控制器对象，并在 MyAppDelegate 中将其绑定到 myModel。

**我正在努力实现以下目标：**

我在 MyAppDelegateChange 中定义了一个动作测试：它绑定到一个按钮，并尝试更改 charactersToDisplay 中的值。

**问题是：**

当我使用此代码时，它不起作用：

```
[self.myModel setCharactersToDisplay:[[NSArray alloc] initWithObjects:@"1",@"2", @"3", "@4", @"5", nil]]; 
```

但是，如果我尝试使用以下代码通过对象控制器更改其值，它正在工作：

```
[[self.myModelController content] setCharactersToDisplay:[[NSArray alloc] initWithObjects:@"1",@"2", @"3", "@4", @"5", nil]]; 
```

谁能建议我 - 为什么当我尝试通过调用 myModel 上的 setter 方法直接更改值时它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:21:48.553

那是因为如果您想从 appDelegate 访问 myModel，您需要使其具有 IBOutlet，然后在接口构建器中连接该插座。如下将 IBOutlet 添加到 myModel。

```
@interface MyAppDelegate : NSObject <NSApplicationDelegate>

@property (strong, readwrite) IBOutlet MyModel *myModel;
@property (weak) IBOutlet NSObjectController *myModelController;

- (IBAction)test:(id)sender;

@end 
```

然后将该插座连接到界面生成器内的 MyModel 对象。

# android - 碰撞AndEngine后在Box2d中以相同速度反射物体

> ID：10245097
> 
> 赞同：0
> 
> 时间：2012-04-20T11:12:16.707
> 
> 标签：android, box2d, physics, andengine, game-physics

有什么方法可以在碰撞后以相同的速度在 AndEngine 中的 Box2d 中反映物理体。假设如果一个球以速度 X 撞到墙壁并反射，那么反射后的速度必须再次为 X。那可能吗？如果是这样，请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T16:40:18.547

你要找的是第二个参数

```
PhysicsFactory.createFixtureDef(pDensity, pElasticity, pFriction) 
```

如果您将恢复系数（弹性）设置为 1，则身体应该是完全有弹性的，因此在它从墙上反弹后具有相同的速度。那是理论上的。在实践中，由于计算精度有限，身体仍然会失去一点动量。

# c# - Windows Phone 上的独立存储（IsolatedStorageSettings）限制

> ID：10245099
> 
> 赞同：2
> 
> 时间：2012-04-20T11:12:25.283
> 
> 标签：c#, windows-phone-7

我的应用程序中有键值隔离存储，它包含 4 个变量：2 个双精度数、1 个布尔值和 1 个 ObservableCollection 类对象。当我将 ObservableCollection 设置为设置并像这样保存时

```
settings["PlaceMarks"] = PlaceMarks; 
```

它覆盖了我的 bool var，并且在下次启动时出现“找不到密钥”异常

如果我写入此设置，例如字符串或数字

```
settings["PlaceMarks"] = "string"; 
```

一切正常。我的收藏只有三个简单类的实例。所以这是我的问题，为什么我的价值会消失？可能是我不知道的 IsolatedStorageSettings 的一些限制

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:23:35.387

您是否将 Observable Collection 中的那些类标记为 Serializeable ？

ObservableCollection 本身未标记为可序列化。 [http://msdn.microsoft.com/en-us/library/ms668604(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/ms668604(v=vs.95).aspx)

我建议您尝试改用 List

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:34:18.573

只有可序列化的对象（不是 ObservableCollection 的情况）可以保存在 IsolatedStorageSettings 中。

在保存 IsolatedStorageSettings 之前，使用[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer%28v=VS.95%29.aspx)对对象进行序列化。

[https://stackoverflow.com/a/7417049/358596](https://stackoverflow.com/a/7417049/358596)

# php - 如何使用具有不同配置的一个模块？

> ID：10245100
> 
> 赞同：2
> 
> 时间：2012-04-20T11:12:31.290
> 
> 标签：php, joomla

所以我在joomla中使用了latestnews_modules，我在网站的页脚渲染了latest_news，但我还需要在正确的其他latest_news处渲染，但我只看到一个视图default.php，我怎样才能制作那个模块每个位置的工作方式都不一样？？？

如果我像以前一样创建另一个模块，它们的机器人具有相同的行为，如何解决，帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:05:46.957

模块应该有可配置的设置：

1.  转到您要更改的模块
2.  看右边；你应该看到一个标题为“参数”的“面板”
3.  您可以设置诸如总计数、要从中提取文章的部分/类别、要包含的作者和顺序等内容。

如果您的要求与模块提供的不同，您将需要创建自己的自定义扩展，或者找到满足您需求的第三方扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:57:23.963

你想达到什么目的？

a) 如果您想要不同的“行为”，即不同的功能，您需要两个不同的模块，在这种情况下，您需要使用您的修改克隆 latestnews 模块。顺便说一句，如果您正在修改核心模块的代码，您真的应该使用模板覆盖来执行此操作，以防您在安全补丁后最终丢失更改 - 对于此模块来说不太可能，但可能。

b）如果您想要具有不同参数的相同行为，请按照 Bobby Jack 所说的那样，通过转到模块管理器，选择模块并更改其设置来更改其中一个模块的设置，例如要显示多少项目以及从哪个类别.

c) 如果您想要两个模块的不同样式，请使用模块类后缀来更改其中一个模块的类属性并编写 CSS 来覆盖相关模块实例的显示。

# mysql - 运行 Rails 迁移时无法写入 MySQL 临时文件

> ID：10245101
> 
> 赞同：2
> 
> 时间：2012-04-20T11:12:31.987
> 
> 标签：mysql, ruby-on-rails, rake

更新：我公司的系统管理员删除了 /tmp 目录并创建了一个指向已安装驱动器的符号链接（例如 ln -s /mnt/somewhere /tmp）。MySQL 显然不喜欢这个符号链接。一旦在本地文件系统上创建了一个真正的 /tmp 目录，问题就消失了。

* * *

我正在运行一个进程 (rake db:migrate)，它导致 MySQL 尝试创建一个临时文件。但是，出现以下错误：

```
Mysql::Error: Can't create/write to file '/tmp/#sql_196_0.MYI' (Errcode: 13): 
SHOW FIELDS FROM `user_rules` 
```

Errcode 13 显然是文件权限问题。运行该进程的用户对 /tmp 目录具有写权限。我还搜索了网络，有人提到问题可能是文件以井号为前缀（例如“#”）。

我去了 /tmp 目录并尝试创建该文件，并注意到在某些情况下我无法创建该文件。所以我想知道英镑符号是否确实导致了问题。如果是，如何使用 MySQL 或 Rails 来解决问题：

```
cd /tmp
echo "Hello" > #sql_123
touch #sql_123

echo "Hello" > "#sql_123"
touch "#sql_123" 
```

第二个和第三个命令（不带引号）失败。第 4 行和第 5 行（带引号）正在工作。所以也许失败是因为井号没有用引号引起来或用反斜杠转义。但同样，即使这是原因，我也不确定如何告诉 MySQL 或 Rails 如何处理它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:19:59.723

在 shell 中，您需要引号，因为 # 引入了注释，除非被反斜杠或引号转义。那些带有井号前缀的#sql_123 文件是mysql 拥有的临时文件，它们是正常的。但是，您无法移动它们，并且无论何时它们存在，您都无法使用二进制文件移动数据库，您要么需要关闭并移动；或对 SQL 执行 mysqldump。

现在对于您的系统管理员，他是否在 mysql 运行时删除了 /tmp？Mysql 在 /tmp 中打开文件，然后从目录中删除它们，使文件句柄保持打开状态。当服务器启动或关闭时，您会看到磁盘空间的差异。MySQL 将所有临时文件创建为隐藏文件。这可确保在 mysqld 终止时删除临时文件。使用隐藏文件的缺点是你看不到一个大的临时文件填满临时文件目录所在的文件系统。

因此，如果您想保留符号链接（即到更大的磁盘），那么您最好关闭 mysql，创建链接，然后启动 mysql 以发现符号链接没有问题。

# java - 并非所有类都使用自定义系统类加载器

> ID：10245102
> 
> 赞同：3
> 
> 时间：2012-04-20T11:12:34.740
> 
> 标签：java, dynamic-class-loaders

我正在实现一个功能，该功能需要在多个 JVM 实例（通过网络）之间传递动态生成的类型（以二进制表示，用 Kryo 序列化）。为了正确解决加载哪些类型以及不加载哪些类型，我使用了自定义系统类加载器（作为 java`-Djava.system.class.loader`参数传递），其他动态创建的类加载器将其用作父类。这个自定义系统类加载器知道它的子类，如果它找不到一个类，可以询问这些派生类加载器是否有它（这与类加载器的标准层次结构相反）。

这些动态生成的类型可以完美地在不同的 JVM 之间传输和加载。当我尝试反序列化引用动态生成的类型之一的某种类型的实例（从磁盘加载相应的类并且对于所有 JMV 都是相同的）时，就会出现问题——ClassNotFoundException 由 Kryo 的实例引发，它试图`readClass`按动态生成的类型的名称。

在方法内部`readClass`调用`Class.forName`，它不使用指定的自定义类加载器（知道所有动态生成的类型），而是使用 sun.misc.Launcher$AppClassLoader 实例。

是否可以指定自定义系统范围的类加载器，以便所有类都加载它以避免所描述的问题？

* * *

**更新**

进一步分析发现，`ClassLoader.getSystemClassLoader()`实际上返回的是指定的自定义系统类加载器。幸运的是，Kryo 库支持设置自定义类加载器，专门用于在反序列化时加载类。这两个事实构成了解决上述问题的基础。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:18:47.013

如果必须使用该类加载器加载所有类，您将如何加载自定义类加载器？

解决这个问题的一种方法是创建一个本地检测代理。这是在加载任何类之前加载的。

另一种解决方法是编译您自己的 AppClassLoader 版本并将其作为引导类路径的前缀或将其添加到`libs/endorsed`目录中。

# java - 为什么Eclipse返回后总是给我一个错误；

> ID：10245103
> 
> 赞同：-1
> 
> 时间：2012-04-20T11:12:38.230
> 
> 标签：java, eclipse

我对eclipse android有一些问题。

我有一些java文件，但是如果我在返回后调用一个方法；（参见示例）它告诉我删除该方法。为什么？我使用的是安卓 1.6。

```
public void onClick(View paramView)
 {
  switch (paramView.getId())
{
default:
case 2131296257:
}
while (true)
{
  return;
  fetchAlarmSettings();  <-- It tells me to remove this.
  if (this.strAlarmOnOff.equals("0"))
  {
    this.butAlarmSet.setText("Turn Alarm Off");
    this.db.updateSetting("alarmTime", this.strHour.concat(this.strMinute));
    this.db.updateSetting("alarmOnOff", "1");
    switch (this.cal.compareTo(Calendar.getInstance()))
    {
    default:
    case -1:
    }
    while (true)
    {
      this.setNotifications.setAlarm(this.cal);
      break;
      this.cal.roll(5, 1);
    }
  }
  this.butAlarmSet.setText("Turn Alarm On");
  this.db.updateSetting("alarmOnOff", "0");
  this.setNotifications.turnAlarmOff();
}
 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T11:15:18.010

您的方法将在`return`语句被命中的那一刻停止运行。基本上它应该给你一个' `Unreachable code!`'警告，因为 return 语句之后的任何代码都不会被执行。删除`return`关键字应该可以解决问题。

所以基本上 Eclipse 是告诉你删除之后的下一行，`return`因为它永远不会被执行。如果您删除方法调用，它将抱怨您接下来输入的任何一行。

除此之外，您的代码还有其他（根据我）缺陷......`while(true)`在这种情况下有一个没有中断条件的循环似乎很奇怪（但我在这里可能又错了）。此外，该`default`块通常位于一系列`case`语句的末尾。您的第二个`while(true)`循环只会迭代一次，因为一旦`this.setNotifications.setAlarm(this.cal);`执行，循环将由于`break`语句而停止迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:15:39.597

Eclipse 不允许您编写过时的代码，实际上 IDE 使用 java 编译器来实现这一点。

在这种情况下，特定分支中 return 下面的代码（意味着您可以在`if`和之后的代码中有 return `else`）是无法访问的，因此您会收到编译错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T11:16:53.770

简单的回答，'return' 语句后不能执行任何操作。

# blackberry - Blackberry twitter api me 显示不需要的字符

> ID：10245104
> 
> 赞同：0
> 
> 时间：2012-04-20T11:12:41.637
> 
> 标签：blackberry, twitter

我在我的黑莓应用程序中使用 twitter api me 1.8。但是在登录页面中，它显示了不需要的类似框的字符。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:04:10.357

您可能正在使用浏览器内容管理器进行登录。使用`BrowserFieldOAuthDialogWrapper`而不是`BrowserContentManagerOAuthDialogWrapper`.

# java - 创建 servlet 完成时发生错误？

> ID：10245105
> 
> 赞同：0
> 
> 时间：2012-04-20T11:12:42.807
> 
> 标签：java, tomcat, servlets

在 Eclipse 中创建新的 Servlet 时出现此错误：

```
 java.lang.Error: Unresolved compilation problems: 
The import org.eclipse.jst.j2ee.internal cannot be resolved
CreateServletTemplateModel cannot be resolved to a type
CreateServletTemplateModel cannot be resolved to a type
    at org.eclipse.jst.j2ee.web.ServletTemplate.<init>(ServletTemplate.java:3)

at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)

at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)

at java.lang.reflect.Constructor.newInstance(Unknown Source)

at java.lang.Class.newInstance0(Unknown Source)

at java.lang.Class.newInstance(Unknown Source)

at org.eclipse.emf.codegen.jet.JETEmitter.setMethod(JETEmitter.java:279)

at org.eclipse.jst.j2ee.internal.project.WTPJETEmitter.loadClass(WTPJETEmitter.java:358)

at org.eclipse.jst.j2ee.internal.project.WTPJETEmitter.initialize(WTPJETEmitter.java:231)

at org.eclipse.jst.j2ee.internal.project.WTPJETEmitter.<init>(WTPJETEmitter.java:111)

at org.eclipse.jst.j2ee.internal.web.operations.NewServletClassOperation.generateTemplateSource(NewServletClassOperation.java:351)

at org.eclipse.jst.j2ee.internal.web.operations.NewServletClassOperation.generateUsingTemplates(NewServletClassOperation.java:245)

at org.eclipse.jst.j2ee.internal.web.operations.NewServletClassOperation.doExecute(NewServletClassOperation.java:180)

at org.eclipse.jst.j2ee.internal.web.operations.NewServletClassOperation.execute(NewServletClassOperation.java:423)

at org.eclipse.jst.j2ee.internal.web.operations.AddServletOperation.createServletClass(AddServletOperation.java:144)

at org.eclipse.jst.j2ee.internal.web.operations.AddServletOperation.doExecute(AddServletOperation.java:120)

at org.eclipse.jst.j2ee.internal.web.operations.AddServletOperation$1.run(AddServletOperation.java:426)

at org.eclipse.jst.jee.model.internal.JEE5ModelProvider.modify(JEE5ModelProvider.java:237)

at org.eclipse.jst.j2ee.internal.web.operations.AddServletOperation.execute(AddServletOperation.java:432)

at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run(DataModelPausibleOperationImpl.java:376)

at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1797)

at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:401)

at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:352)

at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute(DataModelPausibleOperationImpl.java:242)

at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl(DataModelPausibleOperationImpl.java:214)

at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue(DataModelPausibleOperationImpl.java:89)

at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute(DataModelPausibleOperationImpl.java:202)

at org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard$1$CatchThrowableRunnableWithProgress.run(DataModelWizard.java:211)

at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:369)

at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:313)

at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:934)

at org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard.runOperations(DataModelWizard.java:220)

at org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard.performFinish(DataModelWizard.java:178)

at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:742)

at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:373)

at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:618)

at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:227)

at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)

at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)

at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)

at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)

at org.eclipse.jface.window.Window.runEventLoop(Window.java:820)

at org.eclipse.jface.window.Window.open(Window.java:796)

at org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:182)

at org.eclipse.jface.action.Action.runWithEvent(Action.java:498)

at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:546)

at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:490)

at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:402)

at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)

at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)

at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)

at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)

at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)

at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)

at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)

at org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)

at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)

at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)

at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)

at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)

at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:169)

at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)

at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)

at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)

at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)

at java.lang.reflect.Method.invoke(Unknown Source)

at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:508)

at org.eclipse.equinox.launcher.Main.basicRun(Main.java:447)

at org.eclipse.equinox.launcher.Main.run(Main.java:1173) 
```

我目前正在使用 java 1.6.0_32、Tomcat 7.0.27 和 Eclipse Europa。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:25:13.653

可能是你的 Eclipse 安装有问题。尝试重新安装 WTP 或[获取](http://wiki.eclipse.org/Older_Versions_Of_Eclipse)新的 eclipse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T10:13:06.093

我有类似的问题。我正在使用 eclipse-Kepler-sr2-javaEE。

### 问题出现在 Tomcat-7 服务器中。我从 project-explorer 和 Windows->preferences->server->Runtime Environment 中删除了服务器。

最后，我能够创建 Servlet。

# ios - 从地址簿复制到文本字段而不单击任何值

> ID：10245111
> 
> 赞同：0
> 
> 时间：2012-04-20T11:12:58.390
> 
> 标签：ios, xcode, addressbook

我将地址簿中的姓名、姓氏、电子邮件和电话号码等值复制到文本字段中。这完美地工作。但是如果我点击它推送到联系人详细信息的名称，我总是必须点击一个值。是否有可能如果我打开地址簿，我只单击名称 an，然后他自动将值放入文本字​​段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:20:59.340

在看到您的问题之前，我刚刚遇到了这个问题：http: [//gauravthummar.wordpress.com/2012/04/19/retrive-all-field-value-from-the-address-book-in-iphoneipad-application/](http://gauravthummar.wordpress.com/2012/04/19/retrive-all-field-value-from-the-address-book-in-iphoneipad-application/)

我希望它可以有一些用处。如果没有，也许在那里留下评论以寻求澄清/帮助可能会为您提供更多答案。作者似乎走在了正确的轨道上。

祝你好运！

# android - 如何在android中捕获没有任何背景的签名图像？

> ID：10245116
> 
> 赞同：0
> 
> 时间：2012-04-20T11:13:08.873
> 
> 标签：android, canvas, background, signature

我需要在我的应用程序中捕获用户签名并将其保存到 sdcard 中以备后用。我正在使用以下代码[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html)来绘制我的签名。当我保存我的签名时，它会沿着背景屏幕保存。我只需要保存签名部分。如何在没有任何背景的情况下保存签名图像。请你帮助我好吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:43:52.527

保持无背景...如果这不起作用，请使用 SurfaceView 以下链接 [http://developer.android.com/guide/topics/graphics/2d-graphics.html](http://developer.android.com/guide/topics/graphics/2d-graphics.html)

# javascript - Javascript - JQuery - clearInterval/setInterval - iframe 循环不会在点击时停止

> ID：10245117
> 
> 赞同：0
> 
> 时间：2012-04-20T11:13:13.443
> 
> 标签：javascript, jquery, setinterval, clearinterval

总的来说，我对 Javascript 还很陌生，我从这个网站上主要发现的东西中拼凑了一个小脚本，试图让一个小的 iframe 循环浏览一堆链接，它做得非常好。但是，我还希望它在用户单击 iframe 或其任何内容时停止循环。

这是我到目前为止的代码。HTML 页面上只有一个 iframe。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8">
<!--
var sites = [
  "side/html5.html",
  "side/silverlight.html",
  "side/wordpress.html",
  "side/mysql.html",
  "side/php.html",
  "side/css3.html"
];
var currentSite = sites.length;
var timerId;
var iframeDoc = $("iframe").contents().get(0);

$(document).ready(function ()
{
  var $iframe = $("iframe").attr("src","side/html5.html");

  timerId = setInterval(function()
  {
    (currentSite == 0) ? currentSite = sites.length - 1 : currentSite = currentSite -1;
    $iframe.attr("src",sites[currentSite]);
  }, 4000);

  $(iframeDoc).bind('click', function()
  {
    clearInterval(timerId);
  });

});
//-->
</script>
</head>

<body>

<sidebar>
<iframe name="sideframe" src="side/html5.html"></iframe>
</sidebar> ..etc.. 
```

请帮忙，我正在尝试尽可能快地学习 Javascript，但据我所知，它*应该可以*工作，但实际上并没有。

感谢您能给我的任何帮助，非常感谢。

* * *

编辑：

好的，我现在有了一个新脚本，主要基于 Elias 的工作，但它也不起作用。我已经将它固定在 Firebug 中，它说 timerCallback.currentSite 值正在正确更新，尽管我找不到 $iframe 的 src 值来明确检查它。据我所知，它正在正确更新变量，只是没有正确更新 iframe。我是否在此代码中正确调用/设置 iframe？另外，jquery 库中的链接是否足以满足我的目的？我有点迷失了所有这些要链接到的库...

```
<script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
<script type="text/javascript" charset="utf-8">

<!--

var sites = 
[
  "side/html5.html",
  "side/silverlight.html",
  "side/wordpress.html",
  "side/mysql.html",
  "side/php.html",
  "side/css3.html"
];

var $iframe = $("iframe").attr("src","side/html5.html");

function timerCallback()
{
    timerCallback.currentSite = (timerCallback.currentSite ? timerCallback.currentSite : sites.length) -1;
    $iframe.attr("src",sites[timerCallback.currentSite]);

    $($('iframe').contents().get('body')).ready(function()
    {
        $(this).unbind('click').bind('click',function()
        {
            var theWindow = (window.location !== window.parent.location ? window.parent : window);
            theWindow.clearInterval(theWindow.timerId);
        });
    });

}

var timerId = setInterval(timerCallback, 4000);

//-->

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:48:39.550

如果我是你，我会谨慎行事。既然您说您对 JS 相当陌生，那么它可能会提供非常丰富的信息。

```
function timerCallback()
{
    timerCallback.currentSite = (timerCallback.currentSite ? timerCallback.currentSite : sites.length) -1;
    $iframe.attr("src",sites[timerCallback.currentSite]);
}
var timerId = setInterval(timerCallback, 4000);
$($('iframe').contents().get('body')).unbind('click').bind('click', function()
{
    var theWindow = (window.location !== window.parent.location ? window.parent : window);
    theWindow.clearInterval(theWindow.timerId);
}); 
```

现在我必须承认这段代码根本**没有**经过测试。尽管我认为它提供了一些帮助您上路的东西：

1）间隔是使用回调函数设置的，因为有很多原因它更好

1b）在该回调中，我利用函数是对象这一事实，并创建了一个静态变量，该变量设置为站点数组的长度（当未定义或 0 时），在这两种情况下都减去 1

2) jQuery 的`,get()`方法返回一个 DOM 元素，而不是一个 jquery 对象，这就是为什么我将它包装在`$()`一个新的 jQ obj 中，为您提供所需的方法。

3）由于您正在操作 iFrame 内的 dom，因此最好取消绑定要绑定的事件

4) 在 iF​​rame 内，您无法直接访问间隔所在的父窗口。

您可能想了解如何处理 iFrame，因为它们有时会有点麻烦

**编辑：** David Diez 是对的，最简单的解决方法是将绑定合并到超时函数中：

```
function timerCallback()
{
    timerCallback.currentSide = ...//uncanged
    //add this:
    $($('iframe').contents().get('body')).ready(function()
    {
        $(this).unbind('click').bind('click',function()
        {
            //this needn't change
        });
    });
} 
```

理论上，这应该在加载后将点击事件绑定到正文

**编辑2**

我一直在搞乱，你可以保持你的代码，原样。只需添加一个功能：

```
function unsetInterval()
{
    window.clearInterval(window.timerId);
} 
```

并将其添加到您的 setInterval 函数中：

```
$('#idOfIframe').load(function()
{
    var parentWindow = window.parent;
    $('body').on('click',function()
    {
        parentWindow.clearInterval();
    });
}); 
```

这将在加载 iFrame 内容后立即触发，并绑定单击事件*并*取消设置计时器，就像您想要的那样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:25:32.440

我认为您的代码因此无法正常工作

```
var iframeDoc = $("iframe").contents().get(0); 
```

这可能是获取 iFrame 的标题，因为您将 iframeDoc 值保存到 iframe 的第一个子级`head`标签，实际上，如果您的窗口中有超过 1 个 iframe，iframeDoc 将是`undefined`因为`$("iframe")`获取文档的所有 iframe。

`BTW your currentSite value condition is wrong, you asign the same value for both conditions`

现在我给你一个例子：

```
<iframe id="myFrame" src="http://www.google.com/"></iframe> 
```

和脚本：

```
<script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
<script type="text/javascript">

var sites = [
"site1",
"site2"
];

var myFrame = document.getElementsByTagName('iframe')[0];
var currentSite = myFrame.getAttribute('src');
var timerId;

var myFrameDoc = window.frames[0].document;

$(document).ready(function()
{
    myFrame.setAttribute('src', 'side/html5.html');

    timerId = setInterval(function()
    {
        //WRONGG
        (currentSite == 0) ? currentSite = sites.length - 1 : currentSite = currentSite -1;
        myFrame.setAttribute('src', sites[currentSite]);
        $(myFrame).off("click").on("click", clearInterval(timerId));
    }, 4000);

    //Won't work because you are trying to get events from an inside of a iframe
    //$(myFrameDoc).on("click", clearInterval(timerId));
    //This may work
    $(myFrameDoc).off("click").on("click", clearInterval(timerId));
});

</script> 
```

当您尝试跟踪 iframe 的事件时，您必须小心，因为 iframe 包含一个完全不同的 javascript 目的文档，所以基本上您必须进入新文档，取消绑定您需要使用的事件，然后再次绑定它们正如@Elias 指出的那样，您的功能。但请注意，您会不断更改 iframe 的 src，因此，如果您真的需要这样做，您将不得不分离解除绑定和再次绑定您的 clearInterval 的代码，就此而言，这可能`$.on()`对您有用。

**编辑：** 如果 iframe 的 src 在同一个域内，具有相同的端口和相同的协议，则调用 iframe 应该以这种方式工作：

```
var myFrameDoc = window.frames[0].document; 
```

我添加了一个新变量，因为我们希望将 click 事件绑定和取消绑定到 iframe 的文档，而不是 iframe，我们使用 window.frames 集合属性，但是如果您尝试访问现代浏览器会抛出异常并拒绝访问到一个框架，并且您不在同一个域中使用相同的端口和相同的协议...

另外使用`$.on()`and`$.off()`代替`$.bind`and`$.unbind()`是因为第一个是新的，尽管我们在这里没有使用它，但它们能够不断地观察 DOM 以查找要绑定的新元素（如果添加）；如果此代码仍然不起作用，这可能对这种情况有用。如果是这种情况，您仍然可以更改：

```
var myFrameDoc = window.frames[0].window; 
```

和这个：

```
$(myFrameDoc).off("click", "document").on("click", "document", clearInterval(timerId)); 
```

这会将事件处理程序重新绑定到新文档添加。未经测试，但可以工作。

# mysql - 我们可以在唯一的查询中有两个聚合 count() 函数吗？

> ID：10245125
> 
> 赞同：0
> 
> 时间：2012-04-20T11:13:54.260
> 
> 标签：mysql, sql

一家公司可以有一个或多个报价 一个报价有多个工作

所以：公司 <= 提供 <= numJobs

```
SELECT Count(t_offer.fkCompany) AS companies, 
       Count(t_offer.id) AS offers, 
       Sum(t_offer.nJobs) AS numJobs
FROM t_offer 
```

例如：

```
idOFFER    fkCOMPANY     numJOBS
   1           1            1
   2           3            2
   3           8            1
   4           1            2 
```

查询应该是：

*公司(3) <= 报价(4) <= numJobs(6)*

但结果是：

*公司(4) <= 报价(4) <= numJobs(6)*

**是通过多个查询来做到这一点的唯一方法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:19:20.617

我想你想要*不同*公司的数量？

```
SELECT Count(DISTINCT t_offer.fkCompany) AS companies, 
       Count(t_offer.id) AS offers, 
       Sum(t_offer.nJobs) AS numJobs
FROM t_offer 
```

# php - PHP foreach 和 while 循环来订购时隙

> ID：10245131
> 
> 赞同：0
> 
> 时间：2012-04-20T11:14:42.530
> 
> 标签：php, mysql, html, loops, foreach

经过这里的一点帮助。我正在寻找一些代码来获取传入的数据数组，并按时间对数据进行排序（这我可以很容易地做到）

我的表中有 22 个时间块，所以我需要每行等于 22（数组中的每个项目都有一个块值）我可以这样做

我所追求的是获取该数据数组并说如果一条数据是从上午 09:00 开始的 3 个插槽，则需要 3 个插槽（我可以这样做）但是如果上午 09:00 是当天的第一项，我需要循环首先创建 1 个块槽，直到找到数组中的第一个槽，然后如果下一个槽集在 14:00，它会填充中间的槽

即代替

```
test1, 2slots, 09:00, room1
test1, 1slot, 12:00, room1 
test1, 2slots, 13:00, room1
test1, 4slots, 15:00, room1
10
11
12
13
...
22 
```

我想

```
1
2
3
4
test1, 2slots, 09:00, room1, 6
7
8
9
10
test1, 1slot, 12:00, room1, 11
12
test1, 2slots, 13:00, room1, 14
15
16
test1, 4slots, 15:00, room1, 20
21
22 
```

我的功能目前是（这将返回第一个块）

```
if(is_array($meetrooms)){
$i = 0;
foreach($meetrooms as $valuer){ 
    $b = $valuer['num_blocks'];
    $i += $b;
    ?>
    <span><?php echo $valuer['title'] . " " . $valuer['num_blocks'] . " " . $valuer['room_name']  . " " . $i . " " . br() ;?></span>
<?php       
}
if($i != 22){ 
    while($i <= 22){ ?>
        <span><?php echo $i . br() ;?></span>
<?php
        $i++;
    }
}
} 
```

我的数组减少了，但结构为

```
[0] => Array
    (
        [mr_id] => 3
        [title] => test1 meeting
        [description] => Some meeting going on here
        [staff_id] => 2454
        [room_name] => room1
        [start_date] => 2012-04-20 00:43:58
        [start_time] => 08:00:00
        [end_date] => 2012-04-20 00:43:58
        [end_time] => 09:00:00
        [num_blocks] => 2
    ) 
```

任何帮助都会很棒！！！还需要什么请询问

**编辑**：

我现在有 90% 的路

唯一的问题是它将 while 循环之外的值连接到 while 循环。. . ？？？

```
if(is_array($meetingrooms))
{
$time = date('H:i', strtotime("07:00"));
$i = 1;
foreach($meetingrooms as $valuer)
{ 
    while ($time < $valuer['start_time'])
    { ?>
        <span><?php echo "....." . $time . " " . $i . ".....";?></span>
    <?php
        $prev = date('H:i', strtotime($time));
        $next = strtotime('+30mins', strtotime($prev));
        $time = date('H:i', $next);
        $i++;
    }
    $nummins = $valuer['num_blocks'] * 30 - 30;
    $next = strtotime('+' . $nummins . 'mins', strtotime($time));
    $time = date('H:i', $next);
    $b = $valuer['num_blocks'];
    echo  "td" . $valuer['num_blocks'];
    $i = $i + 1;
}
$timetofinish = date('H:i', strtotime("18:00"));
if ($time < $timetofinish)
{
    while ($time < $timetofinish)
    {
        echo "<span>......$time..." . $i  . "</span>";
        $prev = date('H:i', strtotime($time));
        $next = strtotime('+30mins', strtotime($prev));
        $time = date('H:i', $next); 
        $i++;
    }
}
} 
```

它现在返回的是

```
.....07:00 1..... .....07:30 2..... .....08:00 3..... td2    .....09:00 5..... .....09:30 6..... .....10:00 7..... .....10:30 8..... td1     .....11:00 10..... .....11:30 11..... .....12:00 12..... td4    .....14:00 14..... .....14:30 15..... .....15:00 16..... td1......15:30...18......16:00...19......16:30...20......17:00...21......17:30...22 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T11:03:41.180

检查此示例代码。

```
 <?php 
        //Sample time loop.
        $time = new DateTime('2011-11-17 08:00:00');
        $end = new DateTime('2011-11-17 20:00:00');

        while ($time < $end) {

            echo $stamp = $time->format('h:i a') . '</br>';
            $time->add(new DateInterval('PT' . 30 . 'M'));
        }
    ?> 
```

资源：[PHP foreach 和 while 循环来订购时隙](https://stackoverflow.com/questions/10245131/php-foreach-and-while-loop-to-order-timeslots/22039293#22039293)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:02:26.243

您是否正在尝试创建某种教室预订时间表？

```
date_default_timezone_set ( 'GMT' );
$meetingrooms = array ( /* ... YOUR DATA ... */ );

define ('MAX_SLOTS', 22);
define ('START_TIME', strtotime('05:00'));
define ('END_TIME', strtotime('22:00'));
$rooms = array ( "room1", "room2" );
$reserved = array();
foreach ($rooms as $room) {
    $reserved[$room] = array();
    for($t = START_TIME; $t <= END_TIME; $t = strtotime('+30mins', $t)) {
        $reserved[$room][$t] = "FREE";
    }
}

foreach ($meetingrooms as $valuer) {
   $t = strtotime($valuer['start_time']);
   while ( $t < strtotime($valuer['end_time'])) {
       $reserved[$valuer['room_name']][$t] = $valuer;
       $t += strtotime('+30mins', $t);
   }      
}

foreach ($reserved as $roomname=>$reservations) {
    echo "{$roomname}: ";
    foreach ($reservations as $t=>$valuer) {
        echo date("H:i", $t).( ($valuer === "FREE") ? "...." : $valuer['title'])." | ";
    }
    echo "\n";
} 
```

现在您可以修改输出（添加 HTML/XML/任何内容）以满足您的要求。

# ios - 根据不同的分隔符将 NSString 拆分为单独的字符串

> ID：10245134
> 
> 赞同：1
> 
> 时间：2012-04-20T11:14:56.633
> 
> 标签：ios, nsarray

示例字符串：

```
NSString * exampleString = 
@""
 "#--- delimiter2 ---"
 "bla,"
 "bla,"
 "bla"
 "#--- delimiter2 ---"
 "yoip,"
 "yoip,"
 "yoip"
 "#--- delimiter3 ---"
 "etc,"
 "etc,"
 "etc,"
 "etc,"
 "etc,"
 "etc,"
 "etc"; 
```

我想获取一个数组并将其填充为：

```
[anyArray objectAtIndex:0] = @"bla,bla,bla"

[anyArray objectAtIndex:1] = @"yoip,yoip,yoip"

[anyArray objectAtIndex:2] = @"etc,etc,etc,etc,etc,etc,etc" 
```

如果这有意义...

任何帮助，将不胜感激 ：）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T11:29:48.803

```
NSArray *spliArray = [exampleString componentsSeparatedByString:@"delimiter"]; 
```

# php - PDOException：SQLSTATE [IMSSP]：在 azure 和 sql azure 后端使用 drupal 7 将字符串转换为 UCS-2 时出错

> ID：10245135
> 
> 赞同：0
> 
> 时间：2012-04-20T11:14:56.660
> 
> 标签：php, drupal, iis, azure, azure-sql-database

我最近开始使用 Web 角色和 SQL azure 后端在 Azure 云上建立一个 drupal 7 网站。我非常高兴，直到我遇到了字符集砖墙。

我有一台使用 Windows Server 2008 R2、IIS 7.5、SQL Server 2008 R2 作为开发服务器的虚拟机，在将它们上传到云之前尝试进行更改。我在 drupal 数据库中有一些额外的表来支持我的应用程序自定义模块。除其他外，在某些时候我需要运行一些这样的代码：

```
$r = db_select('my_creators', 'c')
    ->fields('c')
    ->condition('my_url', $creator_url)
    ->execute()
    ->fetchAll(PDO::FETCH_ASSOC);

$creator = $r[0];

foreach ($creator as $k => $vv)
    $s.= t('@key -->> @value<br>', array('@key' => $k, '@value' => $v));

print $s; 
```

我已经删掉了很多额外的代码，但是当 $creator_url 的值带有一些特殊字符（例如 André_Breton）时，这是有问题的代码。这在我的开发机器上完美运行，获取记录并显示数据，所以当我上传到云端并收到此错误时，我感到非常惊讶

*PDOException：SQLSTATE [IMSSP]：将输入参数 7 的字符串转换为 UCS-2 时出错：目标多字节代码页中不存在 Unicode 字符的映射。在 dblog_watchdog() 中（E:\sitesroot\0\modules\dblog\dblog.module 的第 157 行）。*

底层数据库是相同的，实际上我每天将 sql azure 数据库数据同步到开发 sql server 数据库。所有字符数据字段都是 nvarchar。

我交叉检查了 IIS、php、php 扩展、php.ini 的所有版本，所有版本都是相同的。

我设法通过添加来解决这个问题

```
Database::getConnection()->setAttribute(PDO::SQLSRV_ATTR_ENCODING, PDO::SQLSRV_ENCODING_SYSTEM);

$creator_url = iconv('UTF-8', 'UCS-2', $creator_url); 
```

在选择之前，然后用于打印

```
foreach ($creator as $k => $vv) {
    $v=iconv('ISO8859-1', 'UTF-8', $vv);

    $s.= t('@key -->> @value<br>', array('@key' => $k, '@value' => $v));
} 
```

使用此解决方法选择通过，选择并显示正确的记录，但随后我收到几个警告

*警告：htmlspecialchars()：check_plain() 中的参数中的无效多字节序列（E:\sitesroot\0\includes\bootstrap.inc 的第 1572 行）。警告：htmlspecialchars()：check_plain() 中的参数中的无效多字节序列（E:\sitesroot\0\includes\bootstrap.inc 的第 1572 行）。*

这是有道理的，因为通常 drupal 函数期望所有字符串都是 UTF-8。

我现在正在用头撞墙几天，任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:00:03.020

我不熟悉 Drupal 或 PHP。但是根据[http://blogs.msdn.com/b/qingsongyao/archive/2009/04/10/sql-server-and-utf-8-encoding-1-true-or-false.aspx，SQL](http://blogs.msdn.com/b/qingsongyao/archive/2009/04/10/sql-server-and-utf-8-encoding-1-true-or-false.aspx) Server（同样 SQL Azure）不支持 UTF-8。它支持 UTF-16。大多数情况下，SQL Server 会自动转换编码。但是，如果字符存在于 UTF-8 而不是 UTF-16 中，则可能会遇到问题。在这种情况下，请尝试转义该字符。例如，您可以定义一个规则，以便“/myspecialcharacter”对应于 UTF-16 中不存在的特殊字符。我想建议您在 PHP 端转义/取消转义。

此致，

明旭。

# java - 从 JSP 发送 HTTP GET 参数中的小数时出错

> ID：10245138
> 
> 赞同：0
> 
> 时间：2012-04-20T11:15:05.333
> 
> 标签：java, http, jsp, liferay, portlet

在我的程序中，我通过 HTTP GET 将数量作为参数从一个 portlet 发送到控制器。如果参数中有十进制值，则有错误。下面是代码：

```
var link = '<%=themeDisplay.getPortalURL()%>' + '<%=ConfigUtil.getConfigValue("PRINT_PAGE")%>?type=' + type + '&contentId=' + id + '&quantity=' + quantity ;

window.open(link, '', "directories=0,height=480,left=80,location=1,menubar=1,resizable=1,scrollbars=yes,status=0,toolbar=0,top=180,width=760"); 
```

代码没有命中服务器，我得到的错误是

```
2012-04-20 17:06:17,094 ERROR [com.liferay.portal.struts.PortletRequestProcessor] Forward does not exist 
```

# jquery - Jquery标签导航点根据标签的高度定位

> ID：10245139
> 
> 赞同：1
> 
> 时间：2012-04-20T11:15:08.707
> 
> 标签：jquery, tabs

我希望你们能帮助我解决这个问题。

导航，**tabmenunav**在标签的底部有 3 个小点，我需要计算每个标签的高度并将它们放在底部。目前都处于绝对位置，看起来不太好。

**演示：http:** [//jsfiddle.net/QxgDr/24/](http://jsfiddle.net/QxgDr/24/)

**jQuery**

```
(function tabszIndex() {

$('ul.tabmenu > li > a').each(function(e) {
    $("#tabmenunav").append("<a href='javascript:void(0);' class=''>&#8226;</a>");
});

$('ul.tabmenu > li > a').click(function(e) {
    var selectedTabIndex = $(this).parent().attr('id').substring(3); //parseInt(this.hash.substring(4));
    $('ul.tabmenu a').removeClass('active');
    $(this).addClass('active');
    $('#tabmenunav a').removeClass('active');
    $('#tabmenunav a').eq($(this).parent().index()).addClass('active');
    var i = 0;
    $('.tabmenu li').css('z-index', function(index) {
        var z = index < selectedTabIndex ? 1 : (index > selectedTabIndex ? --i : 0);
        return z
    });
    e.preventDefault();
});
$('#tabmenunav a').click(function() {
    var idx = $(this).index();
    $('> a', $('ul.tabmenu > li').eq(idx)).trigger('click');

})
var lastTabIndex = $('.tab').length - 1;
$('.tab').each(function(i) {
    if (i != lastTabIndex) {
        $(this).append("<a href='javascript:void(0)' class='next-tab mover'>Next Tab &#187;</a>");
    }
    if (i != 0) {
        $(this).append("<a href='javascript:void(0)' class='prev-tab mover'>&#171; Prev Tab</a>");
    }
});
var tabMenu = $('.tab');
$('.next-tab, .prev-tab').click(function() {
    var newTabIndex = $(this).hasClass('next-tab') ? 1 : -1;
    var idx = (parseInt($(this).parents('li').attr('id').substring(3)) + newTabIndex);
    $('ul.tabmenu > li#tab' + idx + ' > a').trigger('click');
});
$('> a', $('ul.tabmenu > li').eq(0)).trigger('click'); 
```

})();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:58:52.393

首先想到的事情之一是使用`offset()`. [文档](http://api.jquery.com/offset/#offset2)。您可以使用它来捕获元素的位置，然后转身并使用它来设置另一个元素的位置。我已使用此技术在此处修改您的[jsfiddle](http://jsfiddle.net/QxgDr/25/)。

这是我添加的内容：

```
var offsetGoal = $("#Overview").offset();
$("#Features").offset({ top: offsetGoal.top, left: (offsetGoal.left+100) });
$("#Technical").offset({ top: offsetGoal.top, left: (offsetGoal.left+200) }); 
```

也许这对你有用。

**编辑**：哎呀，我刚刚注意到你问的是移动三个小点。我想出了以下方法来调整它们的位置，您可能会觉得这很有用。

我决定计算菜单中 li 元素的数量（假设最终有更多），然后将其乘以要调整的像素数量。

```
// However many elements in our tab menu should reinforce how far down to shift the navigation elements.
var shiftDotsBy = $(".tabmenu>li").size() * 3;
// Find the current position and just shift it downward
var dotsCurrentPos = $("#tabmenunav").offset();
$("#tabmenunav").offset({top: (dotsCurrentPos.top+shiftDotsBy), left: dotsCurrentPos.left}); 
```

[工作示例](http://jsfiddle.net/QxgDr/26/)。

**编辑**：此[jsfiddle](http://jsfiddle.net/QxgDr/28/)已更新，并根据单击的选项卡及其相对高度差移动点。这是方法：

```
// tab index is one-based; assuming each tab is twenty pixels lower than the previous one
var shiftDotsBy = (selectedTabIndex - 1) * 20;
var dotsCurrentPos = $("#tabmenunav").offset();
// Based on the original position of the dots determined outside this event, shift the dots by how far each tab extends down
$("#tabmenunav").offset({top: (dotsOrigPos.top+shiftDotsBy), left: dotsCurrentPos.left}); 
```

考虑到这些想法，你应该对你希望你的点如何出现和移动有很大的控制权。

# php - htaccess 删除文件夹的文件扩展名

> ID：10245140
> 
> 赞同：1
> 
> 时间：2012-04-20T11:15:09.490
> 
> 标签：php, apache, .htaccess, mod-rewrite

我试过查看其他教程和示例，但没有什么适合我的场景。我的 htaccess 文件如下所示：

```
RewriteEngine on

rewritecond %{http_host} ^example.com [nc]
rewriterule ^(.*)$ http://www.example.com/$1 [r=301,nc]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !\..+$
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) http://www.example.com/$1/ [R=301,L]

RewriteRule ^([^/\.]+)/?$ index.php?page=$1 [L]
RewriteRule ^view/([^/]+)/([^/]+)/?$ index.php?page=view&id=$1&title=$2

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([a-zA-Z0-9]+)
RewriteRule ^([a-zA-Z0-9]+)$ /%1/? [R=301,L]

ErrorDocument 404 /404 
```

我正在使用 PHP，需要重写 /index.php?page=page&moreparamaters=1

但是我在服务器上还有一个名为 /admin/ 的文件夹，我想从该文件夹中的文件中删除 .php 扩展名，以便：

`/admin/lol.php`变成`/admin/lol/`

我有很多这些文件，所以我不能真正单独添加每个文件。如何在不影响我的 index.php 重写的情况下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T20:36:37.630

你必须反过来想。假设所有文件都直接放在文件夹中（意思是没有子文件夹），这将起作用：

```
RewriteRule ^admin/([^\/]*)? /admin/$1.php [L,R] 
```

然后在你的链接中你可以写 /admin/lol/ 或 /admin/lol，两者都会被重定向到 /admin/lol.php

# php - 在 cURL 上获得 200 OK 而不是 302

> ID：10245142
> 
> 赞同：0
> 
> 时间：2012-04-20T11:15:13.057
> 
> 标签：php, curl

我在 PHP 上使用 cURL 来访问 ASPX 网站。在我的浏览器上，它显示根据请求我得到一个`302 Found`（实际上是重定向到另一个站点），然后立即对重定向页面发出另一个请求。

在我的 cURL 上，我总是得到`200 OK`，具有讽刺意味的是错误的，因为我正在访问的下一页（模仿重定向）返回 a `500`，可能在前一页中做错了什么。

作为测试，我尝试访问我自己的网站，我在该网站上重定向页面。我也得到了一个`200 OK`关于`curl_getinfo($curl);`但返回页面的内容特别显示标题`HTTP/1.1 302 Found` 更奇怪的事情是`curl_getinfo($curl);`返回 200 OK 一直，即使当我访问我自己的网站时我实际上知道我正在重定向。

有什么想法为什么我的 200 OK 而不是 302 `curl_getinfo`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:19:56.827

我的猜测`CURLOPT_FOLLOWLOCATION`是开启。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T11:30:54.567

除了[CURLOPT_FOLLOWLOCATION](http://docs.php.net/function.curl-setopt)答案：
您还可以设置 CURLOPT_HEADERFUNCTION 选项并查看重定向，例如通过

```
curl_setopt($ch, CURLOPT_HEADERFUNCTION, 'read_header');
...
curl_exec($ch);
...
function read_header($curl, $header) {
  echo $header;
  return strlen($header);
} 
```

启用 CURLOPT_FOLLOWLOCATION 后，您应该得到类似的输出

```
HTTP/1.0 301 Moved Permanently
Date: Fri, 20 Apr 2012 11:26:37 GMT
Server: Apache
Location: http://www.spiegel.de/
Content-Length: 230
Content-Type: text/html; charset=iso-8859-1
X-Cache: MISS from lnxp-3968.srv.mediaways.net
X-Cache-Lookup: MISS from lnxp-3968.srv.mediaways.net:91
Via: 1.0 lnxp-3968.srv.mediaways.net (squid/3.1.4)
Connection: close

HTTP/1.0 200 OK
Date: Fri, 20 Apr 2012 11:25:38 GMT
Server: Apache-Coyote/1.1
X-Powered-By: Servlet 2.4; JBoss-4.0.3SP1 (build: CVSTag=JBoss_4_0_3_SP1 date=200510231054)/Tomcat-5.5
Cache-Control: max-age=120
Expires: Fri, 20 Apr 2012 11:27:38 GMT
X-Host: lnxp-2885
X-Robots-Tag: index, follow, noarchive
Content-Type: text/html;charset=ISO-8859-1
Content-Length: 161305
Vary: Accept-Encoding
Age: 59
X-Cache: HIT from lnxp-3954.srv.mediaways.net
X-Cache-Lookup: HIT from lnxp-3954.srv.mediaways.net:90
Via: 1.1 www.spiegel.de, 1.0 lnxp-3954.srv.mediaways.net (squid/3.1.4)
Connection: close 
```

在这种情况下，这表明对[http://spiegel.de](http://spiegel.de)的请求被重定向到[http://www.spiegel.de](http://www.spiegel.de)

# hbase - 我看不到 'hbase(main):001:0>' 提示并且在尝试 'create' 命令时抛出错误

> ID：10245147
> 
> 赞同：0
> 
> 时间：2012-04-20T11:15:32.493
> 
> 标签：hbase

```
$ bin/hbase shell 
```

HBase 外壳；输入“帮助”以获得支持的命令列表。键入“exit”以离开 HBase Shell 版本 0.92.1, r1298924, Fri Mar 9 16:58:34 UTC 2012

创建'emp'，'n1' 创建'emp'，'n1'

错误：java.lang.NoClassDefFoundError：org/apache/zookeeper/KeeperException

以下是此命令的一些帮助： 创建表；传递表名，每个列族的规范字典，以及可选的表配置字典。字典在下面的一般说明部分中进行了描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:15:25.860

尝试将 hbase\lib 的完整路径添加到 hbase\conf\hbase-env.sh 中的 HBASE_CLASSPATH

就个人而言，我在 Windows 7 Environment + Cygwin 上的 hbase-env.sh 中设置了以下内容：

```
export HBASE_CLASSPATH=/cygdrive/c/programs/hbase-0.92.1/lib/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T16:03:19.330

创建命令 *create 'emp','n1'* 似乎是正确的。错误提示要么您没有在 hbase-site.xml 文件中指定 ZookeeperQuorum，要么 ZK jar 不在 classPath 中，请尝试适当地设置 HBASE_HOME 和 HADOOP_HOME。

# search - 搜索包含 ! 的文件名 （感叹号）在 Windows 上

> ID：10245150
> 
> 赞同：8
> 
> 时间：2012-04-20T11:15:53.170
> 
> 标签：search, windows-7

在 Windows 7 上，文件夹搜索框中使用的以下查询无法过滤文件夹中具有“！”的文件 其中的感叹号。

```
filename:! 
```

请问有什么方法可以进行这个搜索吗？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-28T20:24:41.390

在您的具体示例`filename:"*!*"`中似乎在 Win7 中工作（不确定 Vista）

![Win7搜索](../Images/a7833ddd4c0945635cb2f20f8013bbf7.png)

如果您需要搜索名称奇怪的文件或 Windows 未索引的文件内容，我仍然建议使用 3rd-party 工具，如[Agent Ransack](http://www.mythicsoft.com/page.aspx?type=agentransack&page=home)、[BareGrep](http://www.baremetalsoft.com/baregrep/)或[Everything 。](http://www.voidtools.com/)（在 Win9x/NT5 上，您可以键入`Win`+ `F` `*.dll` `Tab` `CreateThread` `Enter`，您会在所有本地驱动器上找到包含字符串“CreateThread”的所有 DLL，在 NT6 上做同样的事情是不可能的 AFAIK！）

# ajax - CakePHP Prototype Ajax Checkbox 禁用 onCreate onComplete 事件

> ID：10245151
> 
> 赞同：0
> 
> 时间：2012-04-20T11:15:57.823
> 
> 标签：ajax, cakephp, prototype

我的代码中有两个`checkboxes`，如下所述：

`<input type="checkbox" id="event_id" name="data[Noncompetitor][event_id][]" value="1">` `<input type="checkbox" id="event_id" name="data[Noncompetitor][event_id][]" value="2">`

现在我正在做像 onCreate 和 onComplete 之类的 Ajax 功能，我想在它启动时禁用复选框，并希望再次启用作为完成的请求。我不确定如何实现，`Prototype JS`并且上述两个复选框都具有相同`id`的 .

```
onCreate: function(){

            document.getElementById("event_id").setAttribute("disabled", "disabled");               
            Element.show('loading_message');
        }, 

onComplete: function(){

            document.getElementById("event_id").removeAttribute("disabled");                                
            Element.hide('loading_message');
        }, 
```

我上面的代码有效，但它只禁用第一个复选框，所以请在这里帮助我。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:19:12.780

您不能在 HTML 页面中拥有两个相同的 id，没有什么可以阻止您在 HTML 页面中放置两个相同的 id，但是每次这样做都会杀死一只小猫，而且拥有两个 id 会让自己感到困惑在这种情况下。`document.getElementById`每当您在 HTML 页面中有两个相同的 id 时，它会返回它找到的第一个 id 并停止关心另一个，因此它只适用于一个复选框。

您可以为您的复选框分配类，或者如果您的表单也被命名，您可以使用名称属性引用您的复选框。

[http://jsfiddle.net/Q5qNg/7/](http://jsfiddle.net/Q5qNg/7/)

# iis-7 - Windows Server - 无法访问本地网站

> ID：10245154
> 
> 赞同：1
> 
> 时间：2012-04-20T11:16:04.760
> 
> 标签：iis-7, windows-server-2003

我的服务器上运行了一些网站（Windows Server 2003 R2），它们都适用于访问网站等的人。但是，当我通过 RDP 登录到机器时，我无法使用它的 url 访问网站。

我刚得到`Internet Explorer cannot display the webpage`。

我认为这可能是主机文件的事情，但对我来说看起来不错，只有：

```
 127.0.0.1       localhost 
```

# javascript - Jquery在div中向下滑动一个元素

> ID：10245164
> 
> 赞同：2
> 
> 时间：2012-04-20T11:16:55.707
> 
> 标签：javascript, jquery, slidedown

我有一个这样的div：

```
<div>
  <font class='slideclick'>Click here to slidedown dynamic content</font>
  <div class='slidedownonclick'> This is the content that slides down </div>
</div> 
```

当单击“slideclick”时，jquery 会触发“slidedownonclick”向下滑动。这很好用，但我在同一个网页中从 mysql 数据库中重复出现这些 div 并且数量不定。给他们唯一的 id 是不可能的。有没有什么办法可以让我在同一个 div 中只获得与其各自的 'slideclick' 相同的 'slidedownonclick' 以在单击时向下滑动。

任何帮助将非常感激，

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:19:01.253

在`.slideclick`处理程序上，您会发现该兄弟具有：

```
$(this).find('+ .slidedownonclick'); 
```

或者：

```
$(this).next('.slidedownonclick'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:22:10.680

单击时，这将向下滑动下一个`.slidedownonclick`div `.slideclick`：

```
$('.slideclick').click(function() {
    $(this).next('.slidedownonclick').slideDown();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:24:40.677

```
$('.slideclick').click(function() {
 $(this).next('.slidedownonclick').animate({
    height: '+=50'
  }, 1000);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T11:25:54.930

检查[jQuery.next()](http://api.jquery.com/next/)，这就是你想要的。
使用它，您可以获得下一个兄弟姐妹哪个 class/id 是选择器。
**编辑：**

**直到 jQuery 1.6.4**

```
 jQuery(document).delegate('font.slideclick', 'click', function() {
        jQuery(this).next('slidedownonclick').slideToggle();
    }); 
```

**jQuery 1.7 +**

```
jQuery(document).on('click', 'font.slideclick', function() {
    jQuery(this).next('slidedownonclick').slideToggle();
}); 
```

# algorithm - 移动点之间距离的局部比例差的基于距离的度量

> ID：10245180
> 
> 赞同：2
> 
> 时间：2012-04-20T11:17:33.257
> 
> 标签：algorithm, graph, cluster-analysis, metrics, variance

我正在尝试形成一个指标来模拟以下场景。

给定欧几里得空间中点的三元组（称为三元组 abc）的各种组合，其中所有点都随着时间独立移动。让我们假设每个三元组都由边 E(a,b) 和 E(b,c) 连接，但没有来自 a->c 的直接边。

我希望形成一个误差度量，它惩罚边缘（a，b）和边缘（b，c）长度的任何变化，并进行局部缩放，但也考虑从 a->c 步行的平均总距离。 . 这样，那些三元组的组合，其相对缩放的互连距离保持最小不变并且从 a->c 的步行很小，具有最大的“度量”值。

我最初的想法显然是计算边长 (a,b) 和 (b,c) 的标准差以及平均值 (a->b->c)。我们分别称它们为 SD(EL:ab)、SD(EL:bc) 和 M(EL:abc)。

我想我也可以通过各自的方式或 M(EL:abc) 缩放两个 SD，以使它们在本地缩放。

但我真的不确定如何最好地结合这 3 个参数以最好地实现我正在寻找的指标。

非常感谢任何帮助。

# iphone - 在导航堆栈中加载 UIViewController 两次

> ID：10245182
> 
> 赞同：0
> 
> 时间：2012-04-20T11:17:39.863
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller

我有一个`UIViewController`（比如说A）。单击`UIViewController`(A) 中的按钮后，我加载了一个`UIWebView`. 单击 中的组件时`UIWebView`，我需要再次按下`UIViewController`(A)。我知道，从概念上讲，这不是正确的做法。这里有什么替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:29:36.790

问题是，你想要一个新的 UIViewController 实例，还是只想更新第一个 UIViewController？对于第一个选项，您必须创建一个新的 UIViewController 实例并推送它。对于第二个选项，您必须弹出 UIWebView 控制器并向第一个 UIViewController 发送消息以更新自身，或者生成 UIViewController 侦听的通知以更新自身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:20:31.313

您不能`UIViewController`在导航堆栈上两次推送相同的内容。但是你可以创建一个类 A 的新实例并推送它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:34:34.317

试试这个代码：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-13T05:56:03.223

确保您对同一个按钮没有多个操作。就我而言，我为同一个按钮提供了 2 个 IBAction。

# python - 在嵌套的while循环中使用matplotlib进行多个绘图

> ID：10245184
> 
> 赞同：2
> 
> 时间：2012-04-20T11:17:48.633
> 
> 标签：python, matplotlib, nested-loops

我正在制作一个程序来控制 LCR 仪表（细节并不重要）。因此我需要两个嵌套`while`循环（简单示例）：

```
while x <= stopFrequency:
    y = startVoltage
    while y <= stopVoltage:
        getCapacity = y * 2
        y += stepValueVoltage 
    x += stepValueFrequency 
```

`y`现在我需要为和的不同频率（外环）绘制图`getCapacity`。我可以得到一个频率`y`的图`getCapacity`。但更重要的是，我不知道如何在一个情节上获得图表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:30:57.937

要将多个图（“图表”）放在同一轴（“图”）上，只需`plt.plot`为每个图调用一次。

```
import matplotlib.pyplot as plt
import itertools
markers = itertools.cycle([ '+', '*', ',', 'o', '.', '1', 'p', ])
while x <= stopFrequency:
    y = startVoltage
    ys = []
    vals = []
    while y <= stopVoltage:
        ys.append(y)
        vals.append(getCapacity)
        getCapacity = y * 2
        y += stepValueVoltage
    plt.plot(ys, vals, 
             label = 'x: {0}'.format(x),
             marker = next(markers))
    x += stepValueFrequency
plt.legend(loc = 'best')
plt.show() 
```

# wordpress - WordPress 无法识别元数据

> ID：10245187
> 
> 赞同：0
> 
> 时间：2012-04-20T11:18:03.877
> 
> 标签：wordpress, metadata

我已将新建的 WordPress 站点从远程服务器的子目录移至根目录。我有几个自定义帖子类型，其中包含与之关联的元数据，包括图像元数据（即文件和 URL）。显然我必须从 URL 中删除子目录。我通过替换 SQL 查询来做到这一点。

现在 wordpress 无法识别元数据。当我编写以下代码时：

```
 $img = get_post_meta($post->ID,"mf_logo",true);
 var_dump($img); 
```

我得到“布尔（假）”。我试图上传一张新图片，它正在显示。然后我通过 MySQL 手动更改了它的 URL，它再次未被识别。

需要注意的是，问题只发生在数组形式的元数据上，而不是“正常”元数据

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:35:22.460

使用元数据 ( `update_post_meta`, `get_post_meta`...) 时，数组将在 db 中自动序列化：

[http://codex.wordpress.org/Function_Reference/update_post_meta](http://codex.wordpress.org/Function_Reference/update_post_meta)

> 传递的数组将被序列化为字符串。

而且您不能简单地替换序列化数组中的字符串：

```
$data = array('key'=>'value');
echo serialize($data); 
```

这将输出：`a:1:{s:3:"key";s:5:"value";}`

如果您只是用更短/更长的字符串替换*键*或*值*， il 将破坏数据：

*   `a:1:{s:3:"key";s:5:"replace";}`是不正确的
*   `a:1:{s:3:"key";s:7:"replace";}`是正确的

你可以做一个批处理来处理这个。

**但在此之前**，你知道你可以让 wordpress 在它自己的目录中，并使其可以从根目录访问，而不会破坏链接吗？

看看这里：[http ://codex.wordpress.org/Giving_WordPress_Its_Own_Directory#Using_a_pre-existing_subdirectory_install](http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory#Using_a_pre-existing_subdirectory_install)

# google-app-engine - 在谷歌应用引擎上上传应用

> ID：10245190
> 
> 赞同：1
> 
> 时间：2012-04-20T11:18:43.020
> 
> 标签：google-app-engine

我是 python 和谷歌应用程序的新手。我已经在 python 和谷歌应用引擎中创建了一个应用程序。我已经下载了应用程序的源代码并对其进行了自定义。我下载的源代码中没有 app.yaml 和 index.yaml。现在我想知道，如果我在没有 app.yaml 和 index.yaml 的情况下将我的应用程序上传到谷歌应用程序引擎上，那么我在实时服务器上的数据是否有可能丢失。请告诉我正确的道路我做错了什么。我也不知道如何在谷歌应用引擎上上传单个文件。我应该上传整个应用程序吗？我使用以下命令在 localhost 上下载源代码：

```
appcfg.py download_app -A <your_app_id> -V <your_app_version> <output-dir> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:26:16.377

您无法上传没有 app.yaml 的应用程序。app.yaml 文件包含运行应用程序所需的配置，例如要使用的处理程序、应用程序 ID、运行时等。

此外，您不能将单个文件上传到 App Engine，您始终会上传整个应用程序。

我强烈建议您先阅读“入门”指南： [https](https://developers.google.com/appengine/docs/python/gettingstartedpython27/) ://developers.google.com/appengine/docs/python/gettingstartedpython27/ ，然后再花更多时间试图弄清楚为什么事情不起作用。

# c - 给定一个可执行文件，显示其完整路径

> ID：10245192
> 
> 赞同：-6
> 
> 时间：2012-04-20T11:18:47.837
> 
> 标签：c, linux

给定一个可执行文件，它的完整路径应该显示在 linux 中（使用 C）。可执行文件可以在当前目录中，也可以在其他目录中。

它应该类似于 unix 中的 TYPE 命令。例如`type cp`，结果应该是`/bin/cp`。

谁能给我代码吗？至少有一个与之相关的系统调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:23:53.453

这很简单。除了基本的想法，我不想给你任何代码。

*   迭代 $PATH 环境变量中的所有路径。
*   对于每个路径，检查您要查找的可执行文件是否存在。
    *   如果存在，则回显当前路径。

这是我很久以前为使用 .net 2.0 搜索命令的 Windows 操作系统编写的项目[findcom 。](https://github.com/shiplu/findcom)你可能会从源头得到一些想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:27:42.040

要获取在您键入命令时将运行的可执行文件的完整路径，请使用 which

```
$ which bash
/bin/bash 
```

要搜索所有路径（包括 MANPATH），请使用 whereis

```
$ whereis bash
bash: /bin/bash /etc/bash.bashrc /usr/share/man/man1/bash.1.gz 
```

如果您在路径的不同部分有同名的可执行文件，例如 Solaris 系统上的 sysV 关闭 (/usr/sbin/shutdown) 和 berkeley 关闭 (/usr/ucb/shutdown)，则 whereis 会很有帮助。`which`告诉您默认运行哪一个，并`whereis`为您提供所有可能性。

如果您没有收到回复，这意味着它是内置的 shell 而不是可执行文件，

```
$ which while
$ whereis while
while: 
```

但是，如果它作为 shell 内置和可执行文件存在，它将返回可执行文件的路径，但会运行内置文件，除非指定了可执行文件的路径。

```
$ which test
/usr/bin/test
$ whereis test
test: /usr/bin/test /usr/share/man/man1/test.1.gz 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:32:20.030

Linux 使用 $PATH 环境变量来查找可执行程序。您通常不会给出执行程序的完整路径（即您只执行 ls，而不是 /usr/bin/ls）。在 $PATH 下的目录下搜索可执行文件名称。$PATH 环境变量类似于：

```
$ 回声 $PATH
/usr/bin:/usr/sbin:/bin

```

系统会在 :-separated 目录下找到可执行文件。您要做的就是将此字符串与“：”分开，然后将程序名称连接到末尾；发出统计调用。如果 stat 成功返回，则表示程序存在。如果不去下一个候选人。系统，就像你会做的那样，将执行第一个找到的路径。

# java - 在另一个类中使用特定于对象的变量

> ID：10245198
> 
> 赞同：1
> 
> 时间：2012-04-20T11:19:18.040
> 
> 标签：java, oop, object, instance, non-static

我一直在查看所有其他问题，但似乎找不到问题的答案：我需要使用非静态字段（对于我创建的每个对象都是单独的），并且我需要在另一个中访问该变量班级。一段代码：（Enemytank.java）

```
public class Enemytank extends MoveableGameItem implements IStepListener, IAlarmListener
{
    private Battlefield mygame;

    private Enemytank enemyTank1;   
    private static int enemyWaveSize = 1;
    private static int remainingKills = enemyWaveSize;
    private static double startupEnemyHealth = 100.00;
    private double enemyHealth = startupEnemyHealth;
    public int enemyStage = 0;              

    /**
     * Constructor.
     */
    public Enemytank(Battlefield mg)
    {
        mygame = mg;
        setImage("/images/enemytank.png", 27, 33);
        setPosition(25, 35);
        // snelheid 5, naar rechts
        setDirectionSpeed(0, 4);
        startMoving();
        mygame.addStepListener(this);
    }
} 
```

还有我需要变量*enemyStage*的类：（Playertank.java）

```
public void collisionOccured(GameItem collidedItem)
    {
        Enemytank enemyTank1 = new Enemytank(mygame);
        System.out.println("pt= " + enemyTank1.getEnemyStage());
        if ((collidedItem instanceof Enemytank) && (playerShields > 0) && (enemyTank1.getEnemyStage() != 3))
        {
            this.playerShields--;
            mygame.setShieldsonDashboard(playerShields);

        }
        else if ((collidedItem instanceof Enemytank) && (playerShields <= 0) && (enemyTank1.getEnemyStage() != 3))
        {
            System.out.println("hit player!");
            this.playerLives--;
            mygame.setLivesonDashboard(playerLives);
        }
        if (collidedItem instanceof Shield)
        {
            this.playerShields++;
            mygame.setShieldsonDashboard(playerShields);
            mygame.deleteGameItem(collidedItem);
            this.playerUpgrades();
        }
    } 
```

我现在从enemytank1.getEnemyStage() 得到的值是0，因为我相信我用*EnemytankenemyTank1 = new Enemytank(mygame); 创建了一个新对象；*. 如何引用现有对象并获得该特定值？enemyStage 用于检查怪物是死了还是快死了。

提前谢谢 :) 火焰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:27:43.383

您需要利用多态性。`getEnemyStage`在类中声明方法`GameItem`（或者它是接口？），然后您将能够`collidedItem.getEnemyStage()`从该对象中询问并获取数据。或者，*向下转换*`collidedItem`为并`EnemyTank`调用该方法：`((EnemyTank)collidedItem).getEnemyStage()`

另外， make`enemyStage` `private`不需要这样`public`，因为它将通过调用 getter 方法间接访问。

```
if (collidedItem instanceof Enemytank && playerShields > 0 && 
    ((Enemytank)collidedItem).getEnemyStage() != 3) {
  ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:30:52.737

当您调用碰撞发生时，您将引用传递给对象。因此，将碰撞发生更改为：

```
public void collisionOccured(GameItem collidedItem, Enemytank enemyTank) //a change here
    {
        System.out.println("pt= " + enemyTank.getEnemyStage()); // now you can call enemyTank with the correct refrence
        if ((collidedItem instanceof Enemytank) && (playerShields > 0) && (enemyTank1.getEnemyStage() != 3))
        {
            this.playerShields--;
            mygame.setShieldsonDashboard(playerShields);

        }
        else if ((collidedItem instanceof Enemytank) && (playerShields <= 0) && (enemyTank.getEnemyStage() != 3))
        {
            System.out.println("hit player!");
            this.playerLives--;
            mygame.setLivesonDashboard(playerLives);
        }
        if (collidedItem instanceof Shield)
        {
            this.playerShields++;
            mygame.setShieldsonDashboard(playerShields);
            mygame.deleteGameItem(collidedItem);
            this.playerUpgrades();
        }
    } 
```

而且，当您从 EnemyTank 类中调用 collisionOccured 时，您会喜欢这样：

```
collisionOccured(collidedItem, this); //where this refrence to this object (which is a EnemyTank) 
```

有了这个答案，我假设您从 EnemyTank 类中调用了 collisonOccured，因为您没有发布该调用的位置。如果不是，则在调用 collisionOccured 时需要对 EnemyTank 的对象进行引用（因此`this`在调用中更改对正确对象的引用）

# maven - maven - 从命令行选择插件阶段

> ID：10245204
> 
> 赞同：0
> 
> 时间：2012-04-20T11:19:27.213
> 
> 标签：maven, maven-plugin, phase

我不是 Maven 专家。在我的 maven2 项目中，我有几个报告插件（依赖项、tattletale 等）。其中一些绑定到“站点前”阶段，一些绑定到“站点”阶段。这样我在我的网站上有一个很好的报告。

但有时，当测试没有通过时，我需要这份报告来检查问题所在。有没有办法在编译之后甚至在依赖解析之后运行相同的插件（以正确的顺序）？我只想跳过在站点阶段运行的所有 findubs、checkstyle 等，并快速获得这个单一报告来检查我的项目为什么无法编译或测试失败的原因

我正在寻找类似的东西：

```
mvn -P tattletale-report 编译

```

但任何其他合理的方式都可以

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:22:37.933

我特别不知道这个插件，但在码头插件上调用目标，它适用于

```
mvn jetty:run-exploded 
```

举个例子。不知道插件，我说过

```
mvn tattletale:report 
```

应该管用。通常插件文档应该给你正确的目标和命令。但是在谷歌中破解一些单词，它似乎有点复杂。

# iphone - iPhone解雇多个控制器？

> ID：10245213
> 
> 赞同：0
> 
> 时间：2012-04-20T11:20:07.687
> 
> 标签：iphone, uinavigationcontroller, modalviewcontroller

我怀疑很多人都遇到过这种情况——你展示了模态视图控制器，然后展示了导航视图控制器，它有许多表视图控制器推送到堆栈上。基本上，推送和展示控制器。当你走到最后时，你必须把它们全部解散，然后返回根视图控制器

我是否必须要求每个模态控制器关闭，以及每个推送的控制器弹出，还是有更好的方法来做到这一点？

如果以某种方式相关，我正在使用 iOS5 故事板。

编辑：感谢您的回答，但它比这更复杂一些 - 基本上我从根控制器呈现模态视图控制器，而不是推送几个控制器，然后呈现一个更多的模态视图。当时我想去根控制器。所以只是弹出视图控制器想要这样做，其中一些必须被解雇

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:24:31.007

您可以通过调用返回到根导航控制器：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

然后释放你的模态视图控制器

# primefaces - 重置primefaces中的输入字段

> ID：10245215
> 
> 赞同：3
> 
> 时间：2012-04-20T11:20:16.547
> 
> 标签：primefaces

我有一个对话框来输入详细信息。第一次，***InputText***是空的。但是从第二个输入开始，***InputText***保持之前的值。

这是我的代码：

```
 <p:commandButton id="showDialogButton1" type="button" value="add" onclick="dlg1.show()" update="firstname1"/>
     <p:dialog id="dialogAjout" header="add department" widgetVar="dlg1" resizable="false">  
          <h:panelGrid columns="2" style="margin-bottom:10px">  
                <h:outputLabel for="firstname1" value="Libellé :" />  
                <p:inputText id="firstname1" value="#{departementBean.departement.libelleDepartement}" />
          </h:panelGrid>  
          <p:commandButton id="submitButton1" value="Valider" oncomplete="dlg1.hide();" action="#{departementBean.addDept()}" update="tabView"/> 
     </p:dialog> 
```

请问这个怎么解决啊！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T10:25:43.077

您可以使用这个 primefaces 组件： http: [//www.primefaces.org/showcase/ui/misc/resetInput.xhtml](http://www.primefaces.org/showcase/ui/misc/resetInput.xhtml) 关于一般对话框：不要将它们放在表单中。改为：`<p:dialog><h:form>...` 关于 update="" 值，如果您的 appendToBody 为真，请在 id 前面放置一个冒号（这意味着它是另一种形式）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-07T06:54:09.083

您应该使用以下代码：

```
<h:commandButton value="Reset" style="margin-right:20px;">
    <p:ajax update="registrationForm" resetValues="true" />
</h:commandButton> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-11T19:39:16.020

添加`resetValues="true"`到您的命令按钮

```
<p:commandButton resetValues="true" action="#{departementBean.prepareDialog}"  id="showDialogButton1" type="button" value="add" oncomplete="dlg1.show()" update=":dialogAjout"/> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-20T11:27:00.380

像这样修改你打开按钮：打开对话框中`oncomplete`和之前通过将其 id 添加到`update`属性来更新它并添加操作方法来执行服务器端逻辑以实际初始化对话框字段（填充/重置）

```
<p:commandButton action="#{departementBean.prepareDialog}"  id="showDialogButton1" type="button" value="add" oncomplete="dlg1.show()" update=":dialogAjout"/> 
```

顺便说一句，看起来您的对话框与您的打开按钮一起位于您的表单内，这是一种“不好的做法”，将您的对话框从该表单移开并在对话框内放置一个新表单，例如`<p:dialog><h:form>`...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-29T17:33:33.313

我这样解决了这个问题

```
<p:dialog header="myDialog" widgetVar="dlg1" minHeight="40">
   <h:outputLabel for="fild1" value="Fill the field" /> 
   <p:password id="fild1" value="#{myBean.attribute}" required="false" label="Field" redisplay="false" /><br />
   <p:commandButton action="#{myBean.method()}" value="Send" oncomplete="dlg1.hide()" update="field1" />
</p:dialog> 
```

当我使用p:commandButton的属性**update="field1"时。**提交表单后，字段**p:password 的值将为空。**

我尝试了 Dani 的建议，但是当我提交表单时我的属性为空，并且在提交后没有保持为空

# ruby-on-rails - 使用 jQuery/Ajax 进行数学计算

> ID：10245216
> 
> 赞同：1
> 
> 时间：2012-04-20T11:20:19.587
> 
> 标签：ruby-on-rails, jquery

我的表格中有这个

```
 <%= f.label :price, "price"%> 
<%= f.text_field :price, :size=>20, :id =>"price" %>

<%= f.label :quantity, "Quantity"%>
<%= f.text_field :quantity, :size=>20, :id =>"qty" %>

<%= f.label :amount, "Amount"%>
<%= f.text_field :amount, :size=>20, :id =>"amount"%> 
```

一旦我在“价格”和“数量”中输入值，我希望 {price*quantity} 在“金额”字段中发生，即计算应该在提交之前进行。我是 jQuery/Ajax 的新手，所以任何帮助都可以。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:23:29.017

你可以做这样的事情

```
$(function() {
    $("#price, #qty").keyup(function() {
        var p = $("#price").val();
        var q = $("#qty").val();
        $("#amount").val(q * p);
    });
}); 
```

但是您必须为金额字段提供 ID“金额”，而不是重复使用“价格”作为 ID。

# java - Java图像调整大小，保持纵横比

> ID：10245220
> 
> 赞同：75
> 
> 时间：2012-04-20T11:20:44.840
> 
> 标签：java, image, rescale

我有一个我调整大小的图像：

```
if((width != null) || (height != null))
{
    try{
        // scale image on disk
        BufferedImage originalImage = ImageIO.read(file);
        int type = originalImage.getType() == 0? BufferedImage.TYPE_INT_ARGB
                                               : originalImage.getType();

        BufferedImage resizeImageJpg = resizeImage(originalImage, type, 200, 200);
        ImageIO.write(resizeImageJpg, "jpg", file); 

       } catch(IOException e) {
           System.out.println(e.getMessage());
       }
} 
```

这就是我调整图像大小的方式：

```
private static BufferedImage resizeImage(BufferedImage originalImage, int type,
                                         Integer img_width, Integer img_height)
{
    BufferedImage resizedImage = new BufferedImage(img_width, img_height, type);
    Graphics2D g = resizedImage.createGraphics();
    g.drawImage(originalImage, 0, 0, img_width, img_height, null);
    g.dispose();

    return resizedImage;
} 
```

现在的问题是，我还需要保持纵横比。也就是说，我需要新的 200/200 图像来包含缩放的新图像。像这样的东西： ![在此处输入图像描述](../Images/ca58a3a31c58dfbcfe60ea63ffac99d1.png)

我尝试了一些东西，但它们没有按预期工作。任何帮助表示赞赏。非常感谢。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-04-20T11:43:52.787

开始了：

```
Dimension imgSize = new Dimension(500, 100);
Dimension boundary = new Dimension(200, 200); 
```

根据边界返回新大小的函数：

```
public static Dimension getScaledDimension(Dimension imgSize, Dimension boundary) {

    int original_width = imgSize.width;
    int original_height = imgSize.height;
    int bound_width = boundary.width;
    int bound_height = boundary.height;
    int new_width = original_width;
    int new_height = original_height;

    // first check if we need to scale width
    if (original_width > bound_width) {
        //scale width to fit
        new_width = bound_width;
        //scale height to maintain aspect ratio
        new_height = (new_width * original_height) / original_width;
    }

    // then check if we need to scale even with the new height
    if (new_height > bound_height) {
        //scale height to fit instead
        new_height = bound_height;
        //scale width to maintain aspect ratio
        new_width = (new_height * original_width) / original_height;
    }

    return new Dimension(new_width, new_height);
} 
```

如果有人还需要图像大小调整代码，[这是一个不错的解决方案](https://stackoverflow.com/a/11371387/1031312)。

如果您不确定上述解决方案，[有不同的方法](https://stackoverflow.com/a/11959928/1031312)可以达到相同的结果。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-09-20T12:09:37.460

从[这里](https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio#14731922)翻译：

```
Dimension getScaledDimension(Dimension imageSize, Dimension boundary) {

    double widthRatio = boundary.getWidth() / imageSize.getWidth();
    double heightRatio = boundary.getHeight() / imageSize.getHeight();
    double ratio = Math.min(widthRatio, heightRatio);

    return new Dimension((int) (imageSize.width  * ratio),
                         (int) (imageSize.height * ratio));
} 
```

您还可以使用[imgscalr](https://github.com/thebuzzmedia/imgscalr)调整图像大小，同时保持纵横比：

```
BufferedImage resizeMe = ImageIO.read(new File("orig.jpg"));
Dimension newMaxSize = new Dimension(255, 255);
BufferedImage resizedImg = Scalr.resize(resizeMe, Method.QUALITY,
                                        newMaxSize.width, newMaxSize.height); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-20T11:46:14.207

您将需要查看[Image.getScaledInstance()](http://docs.oracle.com/javase/6/docs/api/java/awt/Image.html#getScaledInstance%28int,%20int,%20int%29)以及此答案中的更多内容：[如何提高用于调整图像大小的 g.drawImage() 方法的性能](https://stackoverflow.com/questions/3967731/java-scale-image-best-practice)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-12T09:14:33.657

加载图像：

```
BufferedImage bufferedImage = ImageIO.read(file); 
```

调整它的大小：

```
private BufferedImage resizeAndCrop(BufferedImage bufferedImage, Integer width, Integer height) {

    Mode mode = (double) width / (double) height >= (double) bufferedImage.getWidth() / (double) bufferedImage.getHeight() ? Scalr.Mode.FIT_TO_WIDTH
            : Scalr.Mode.FIT_TO_HEIGHT;

    bufferedImage = Scalr.resize(bufferedImage, Scalr.Method.ULTRA_QUALITY, mode, width, height);

    int x = 0;
    int y = 0;

    if (mode == Scalr.Mode.FIT_TO_WIDTH) {
        y = (bufferedImage.getHeight() - height) / 2;
    } else if (mode == Scalr.Mode.FIT_TO_HEIGHT) {
        x = (bufferedImage.getWidth() - width) / 2;
    }

    bufferedImage = Scalr.crop(bufferedImage, x, y, width, height);

    return bufferedImage;
} 
```

使用 Scalar 库：

```
<dependency>
    <groupId>org.imgscalr</groupId>
    <artifactId>imgscalr-lib</artifactId>
    <version>4.2</version>
</dependency> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-27T03:32:28.253

试试这个

```
float rateX =  (float)jpDisplayImagen.getWidth()/(float)img.getWidth();
float rateY = (float)jpDisplayImagen.getHeight()/(float)img.getHeight();
if (rateX>rateY){
    int W=(int)(img.getWidth()*rateY);
    int H=(int)(img.getHeight()*rateY);
    jpDisplayImagen.getGraphics().drawImage(img, 0, 0,W,H, null);
}
else{
    int W=(int)(img.getWidth()*rateX);
    int H=(int)(img.getHeight()*rateX);
    jpDisplayImagen.getGraphics().drawImage(img, 0, 0,W,H, null);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-07T07:15:12.020

```
public class ImageTransformation {

public static final String PNG = "png";

public static byte[] resize(FileItem fileItem, int width, int height) {

    try {
        ResampleOp resampleOp = new ResampleOp(width, height);
        BufferedImage scaledImage = resampleOp.filter(ImageIO.read(fileItem.getInputStream()), null);

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ImageIO.write(scaledImage, PNG, baos);

        return baos.toByteArray();
    } catch (Exception ex) {
        throw new MapsException("An error occured during image resizing.", ex);
    }

}

public static byte[] resizeAdjustMax(FileItem fileItem, int maxWidth, int maxHeight) {

    try {
        BufferedInputStream bis = new BufferedInputStream(fileItem.getInputStream());  
        BufferedImage bufimg = ImageIO.read(bis);   

        //check size of image 
        int img_width = bufimg.getWidth();
        int img_height = bufimg.getHeight();
        if(img_width > maxWidth || img_height > maxHeight) {
            float factx = (float) img_width / maxWidth;
            float facty = (float) img_height / maxHeight;
            float fact = (factx>facty) ? factx : facty;
            img_width = (int) ((int) img_width / fact);
            img_height = (int) ((int) img_height / fact);
        }

        return resize(fileItem,img_width, img_height);

    } catch (Exception ex) {
        throw new MapsException("An error occured during image resizing.", ex);
    }

} 
```

}

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-30T11:04:45.590

这是我的解决方案：

```
/*
Change dimension of Image
*/
public static Image resizeImage(Image image, int scaledWidth, int scaledHeight, boolean preserveRatio) {  

    if (preserveRatio) { 
        double imageHeight = image.getHeight();
        double imageWidth = image.getWidth();

        if (imageHeight/scaledHeight > imageWidth/scaledWidth) {
            scaledWidth = (int) (scaledHeight * imageWidth / imageHeight);
        } else {
            scaledHeight = (int) (scaledWidth * imageHeight / imageWidth);
        }        
    }                   
    BufferedImage inputBufImage = SwingFXUtils.fromFXImage(image, null);     
    // creates output image
    BufferedImage outputBufImage = new BufferedImage(scaledWidth, scaledHeight, inputBufImage.getType());       
    // scales the input image to the output image
    Graphics2D g2d = outputBufImage.createGraphics();
    g2d.drawImage(inputBufImage, 0, 0, scaledWidth, scaledHeight, null);
    g2d.dispose();      
    return SwingFXUtils.toFXImage(outputBufImage, null);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-31T06:14:53.987

这是我编写的一小段代码，它调整图像大小以适应容器，同时保持图像的原始纵横比。它将容器的宽度、高度和图像作为参数。您可以对其进行修改以满足您的需要。它很简单，适用于我的应用程序。

```
private Image scaleimage(int wid, int hei, BufferedImage img){
    Image im = img;
    double scale;
    double imw = img.getWidth();
    double imh = img.getHeight();
    if (wid > imw && hei > imh){
        im = img;
    }else if(wid/imw < hei/imh){
        scale = wid/imw;
        im = img.getScaledInstance((int) (scale*imw), (int) (scale*imh), Image.SCALE_SMOOTH);
    }else if (wid/imw > hei/imh){
        scale = hei/imh;
        im = img.getScaledInstance((int) (scale*imw), (int) (scale*imh), Image.SCALE_SMOOTH);
    }else if (wid/imw == hei/imh){
        scale = wid/imw;
        im = img.getScaledInstance((int) (scale*imw), (int) (scale*imh), Image.SCALE_SMOOTH);
    } 
    return im;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-26T13:16:17.593

所有其他答案都显示了如何根据新图像宽度计算新图像高度，反之亦然，以及如何使用 Java Image API 调整图像大小。对于那些正在寻找直接解决方案的人，我推荐任何可以在一行中完成此操作的 java 图像处理框架。

下面的示例使用[Marvin 框架](http://marvinproject.sourceforge.net/)：

```
// 300 is the new width. The height is calculated to maintain aspect.
scale(image.clone(), image, 300); 
```

**必要的进口：**

```
import static marvin.MarvinPluginCollection.* 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-27T07:13:32.393

我发现所选答案在升级时存在问题，因此我（还）制作了另一个版本（我已经测试过）：

```
public static Point scaleFit(Point src, Point bounds) {
  int newWidth = src.x;
  int newHeight = src.y;
  double boundsAspectRatio = bounds.y / (double) bounds.x;
  double srcAspectRatio = src.y / (double) src.x;

  // first check if we need to scale width
  if (boundsAspectRatio < srcAspectRatio) {
    // scale width to fit
    newWidth = bounds.x;
    //scale height to maintain aspect ratio
    newHeight = (newWidth * src.y) / src.x;
  } else {
    //scale height to fit instead
    newHeight = bounds.y;
    //scale width to maintain aspect ratio
    newWidth = (newHeight * src.x) / src.y;
  }

  return new Point(newWidth, newHeight);
} 
```

用 Android 术语写的 :-)

至于测试：

```
@Test public void scaleFit() throws Exception {
  final Point displaySize = new Point(1080, 1920);
  assertEquals(displaySize, Util.scaleFit(displaySize, displaySize));
  assertEquals(displaySize, Util.scaleFit(new Point(displaySize.x / 2, displaySize.y / 2), displaySize));
  assertEquals(displaySize, Util.scaleFit(new Point(displaySize.x * 2, displaySize.y * 2), displaySize));
  assertEquals(new Point(displaySize.x, displaySize.y * 2), Util.scaleFit(new Point(displaySize.x / 2, displaySize.y), displaySize));
  assertEquals(new Point(displaySize.x * 2, displaySize.y), Util.scaleFit(new Point(displaySize.x, displaySize.y / 2), displaySize));
  assertEquals(new Point(displaySize.x, displaySize.y * 3 / 2), Util.scaleFit(new Point(displaySize.x / 3, displaySize.y / 2), displaySize));
} 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2016-03-23T03:10:49.510

只需在 Ozzy 的代码中再添加一个块，就可以使事情看起来像这样：

```
public static Dimension getScaledDimension(Dimension imgSize,Dimension boundary) {

    int original_width = imgSize.width;
    int original_height = imgSize.height;
    int bound_width = boundary.width;
    int bound_height = boundary.height;
    int new_width = original_width;
    int new_height = original_height;

    // first check if we need to scale width
    if (original_width > bound_width) {
        //scale width to fit
        new_width = bound_width;
        //scale height to maintain aspect ratio
        new_height = (new_width * original_height) / original_width;
    }

    // then check if we need to scale even with the new height
    if (new_height > bound_height) {
        //scale height to fit instead
        new_height = bound_height;
        //scale width to maintain aspect ratio
        new_width = (new_height * original_width) / original_height;
    }
    // upscale if original is smaller
    if (original_width < bound_width) {
        //scale width to fit
        new_width = bound_width;
        //scale height to maintain aspect ratio
        new_height = (new_width * original_height) / original_width;
    }

    return new Dimension(new_width, new_height);
} 
```

# entity-framework - 实体框架和 SQL Server 2012 分页

> ID：10245221
> 
> 赞同：9
> 
> 时间：2012-04-20T11:20:48.400
> 
> 标签：entity-framework, sql-server-2012, entity-framework-5

SQL Server 2012 引入了一种更有效的分页机制，用于使用 FETCH 和 OFFSET 进行分页，这可能会对使用大量分页的应用程序的性能产生重大影响。Entity Framework 5 支持这个吗？因此，如果我使用 EF 使用 Take + Skip 进行分页，如果 EF 以 SQL Server 2012 为目标，LINQ 查询是否会被转换为新的 2012 TSQL？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T20:46:15.457

正如@Ladislav 所说，EF 5 不支持 OFFSET & FETCH。话虽如此，我想补充一点观点。我不认为这应该很重要。

当您购买像实体框架这样的 ORM 时，您将外包查询生成（出于完全正当的理由）。EF 是使用“旧” `CTE`样式查询`Row_Number()`还是新`Fetch`/`Offset`是一个实现细节。Microsoft 可以随时更新 EF 代码并将查询生成更改为使用其中一种。

如果您想控制查询生成，您可以：

*   使用 EF 的“存储过程映射”功能
*   直接在 EF 中使用存储过程（我经常这样做）
*   自己编写 ADO/SQL，或者
*   使用更有限的微观结构，如大规模/PetaPoco

*那么这有关系吗？*

好吧，对于编写查询的开发人员来说，新语法将是一种可喜的解脱。另一方面，旧 CTE 方法和新语法之间[似乎没有](http://blogs.technet.com/b/dataplatforminsider/archive/2011/11/01/my-top-5-sql-server-2012-features-by-aaron-bertrand-guest-blogger.aspx)真正的[性能差异。](http://stevestedman.com/2012/04/tsql-2012-offset-and-fetch/)所以从 EF 的角度来看 - 不是真的。我们使用 EF 会产生[很大的开销](http://ormeter.net/images/stories/results-2010.07/Scorecard-Performance.png)，分页方法可能不会成为您的断点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-20T11:31:42.283

EF 5 不支持此功能 - 实际上我认为 EF 中没有任何 SQL Serve 2012 功能可用。[您可以在Data UserVoice](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/2541081-use-offset-and-fetch-for-take-and-skip-for-sql-ser)上投票支持此功能，以便在 ADO.NET 团队产品积压中将其提升。

# java - 注销时单击后退按钮后浏览器不应允许我进入工作页面（始终显示 login.jsp）页面

> ID：10245223
> 
> 赞同：-2
> 
> 时间：2012-04-20T11:20:52.517
> 
> 标签：java, jsp

我使用了下面给出的代码，但它仍然无法正常工作

```
response.setHeader("Cache-Control", "no-store, no-cache, must-revalidate, 
max-age=0, private");; 
response.setDateHeader("Expires", 0);
response.setHeader("Pragma", "no-cache"); 
```

编辑：添加 jsp 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:34:00.057

您需要在要禁用浏览器缓存的所有 JSP 上设置这些响应标头，而不仅仅是在注销页面或其他地方。

您通常为此使用[过滤器](https://stackoverflow.com/tags/servlet-filters/info)，这样您就不需要在所有 JSP 上复制粘贴同一段代码。下面是过滤器的样子，假设所有受限页面共享相同的 URL 模式，例如`/app/*`：

```
@WebFilter("/app/*")
public class NoCacheFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletResponse response = (HttpServletResponse) res;
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
        response.setDateHeader("Expires", 0); // Proxies.
        chain.doFilter(req, res);
    }

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:16:45.927

您需要在服务器端检查会话 - 一种典型的方法是使用过滤器，如果没有可用的会话，则重定向到您的登录页面。

请参阅[此问题](https://stackoverflow.com/questions/7370885/session-validation-filter-which-logs-off-the-user-when-session-is-expired)以了解如何执行此操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T11:25:23.390

在注销页面上使用此代码将解决问题。

```
<script language="JavaScript">
javascript:window.history.forward(1);
</script> 
```

# c++ - 如何管理大型阵列

> ID：10245227
> 
> 赞同：3
> 
> 时间：2012-04-20T11:21:10.587
> 
> 标签：c++, optimization, memory-management

我有一个 c++ 程序，它使用了几个非常大的双精度数组，我想减少程序这个特定部分的内存占用。目前，我分配了 100 个，每个可以是 100 Mb。

现在，我确实有优势，这些数组的一部分最终在程序执行的后期部分变得过时，并且几乎不需要在任何时候将其中任何一个都保存在内存中。

我的问题是这样的：

在我用 new 或 malloc 创建数组后，有什么方法可以告诉操作系统它的一部分不再需要了？我得出的结论是，实现这一点的唯一方法是声明一个指针数组，每个指针都可能指向一个块，比如 1Mb 的所需数组，这样不再需要的旧块可以重新用于数组的新位。在我看来，这就像编写一个自定义内存管理器，看起来有点像大锤，这也会对性能造成一些影响

我无法移动数组中的数据，因为它会导致过多的线程争用问题。数组可以随时被大量线程中的任何一个访问，尽管只有一个线程会写入任何给定的数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:26:37.760

这取决于操作系统。POSIX - 包括 Linux - 有系统调用`madvise`来提高内存性能。从手册页：

> madvise() 系统调用建议内核如何处理地址范围内的分页输入/输出，地址范围从地址 addr 开始，大小为长度字节。它允许应用程序告诉内核它希望如何使用一些映射或共享内存区域，以便内核可以选择适当的预读和缓存技术。此调用不会影响应用程序的语义（MADV_DONTNEED 除外），但可能会影响其性能。内核可以随意忽略这些建议。

`madvise`有关更多信息，请参见手册页。

**编辑：**显然，上面的描述不够清楚。所以，这里有一些更多的细节，其中一些是特定于 Linux 的。

您可以使用它`mmap`来分配一块内存（直接来自操作系统而不是 libc），它不受任何文件的支持。对于大块内存，`malloc`正在做完全相同的事情。您必须使用`munmap`来释放内存 - 无论使用`madvise`：

```
void* data = ::mmap(nullptr, size, PROT_READ | PROT_WRITE,
    MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);
// ...
::munmap(data, size); 
```

如果你想摆脱这个块的某些部分，你可以使用`madvise`告诉内核这样做：

```
madvise(static_cast<unsigned char*>(data) + 7 * page_size,
    3 * page_size, MADV_DONTNEED); 
```

地址范围仍然有效，但不再受物理 RAM 和存储支持。如果您稍后访问这些页面，内核将动态分配一些新页面并将它们重新初始化为零。请注意，不需要的*页面*也是进程虚拟内存大小的一部分。可能需要对虚拟内存管理进行一些配置更改，例如激活过度提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:28:46.783

如果我们有更多的细节会更容易回答。

1°）“在我用 new 或 malloc 创建数组后，有什么方法可以告诉操作系统它的一部分不再需要了？”这个问题的答案。是“不是真的”。这就是 C 和 C++ 以及任何让您手动处理内存的语言的意义所在。

2°）如果您使用的是 C++ 而不是 C，则不应使用 malloc。

3°) 也不是数组，除非有非常特殊的原因。使用 std::vector。

4°）最好，如果您需要经常更改数组的内容并减少内存占用，请使用链表（std::list），尽管单独“访问”列表的内容会更昂贵（但如果你只迭代它，速度几乎一样快）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T11:29:53.693

带有`std::deque`指向的指针`std::array<double,LARGE_NUMBER>`可以完成这项工作，但您最好使用双端队列创建一个专用容器，这样您就可以重新映射索引，最重要的是，定义何时不再使用条目。

专用容器还可以包含读/写锁，因此可以以线程安全的方式使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T11:27:43.827

您可以尝试使用列表而不是数组。当然 list 比 array 更“重”，但另一方面，重建一个 list 很容易，这样你就可以在它过时时扔掉它的一部分。您还可以使用一个包装器，它只包含索引，说明列表的哪一部分是最新的，哪一部分可以重用。这将帮助您提高性能，但需要更多（可重用）内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T11:51:22.743

`delete[]`在途中按块和-ing 和-ing分配`new[]`似乎是一个很好的解决方案。尽可能少地进行内存管理是可能的。不要自己重用块，只需释放旧块并在需要时分配新块。

# asp.net - 使用 Active Directory 的 ASP.NET MVC3 应用程序的自定义角色

> ID：10245230
> 
> 赞同：0
> 
> 时间：2012-04-20T11:21:20.520
> 
> 标签：asp.net, asp.net-mvc-3, active-directory

我的 AD 中有一些角色，例如角色 1、角色 2，我想在应用程序中创建可用于验证控制器的角色。当然我可以使用类似的东西：

```
[Authorize(Roles = "role1")] 
```

但是如果有人在 AD 中更改组的名称，那么我必须在我使用它的所有控制器中更改此角色。所以我试图在我将在控制器中使用的应用程序中定义我自己的角色：

```
MyRole = role1 
```

我也可以在这里将多个角色放在 App 中。我正在尝试使用类似的东西：

```
string UserName = HttpContext.Current.User.Identity.Name;
string[] roles = Roles.GetRolesForUser(UserName);
if (roles.Contains("role"))
{
    Roles.CreateRole("MyRole");
    Roles.AddUserToRole(UserName, "MyRole");
} 
```

但是方法*CreateRole*和*AddUserToRole*不适用于 Windows 身份验证。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:22:56.890

该解决方案是集中身份验证管理的好方法。它不允许你创建新角色，老实说，这可能不是一个好主意。如果您无法控制它们，正如您所暗示的那样......无论是谁都可能不会对您在整个地方创建角色不满意。

此外，您必须授予 Web 应用域管理员权限才能创建角色，这不是一个好的安全做法。

# ruby - Rspec - 模拟一个活动记录表

> ID：10245231
> 
> 赞同：1
> 
> 时间：2012-04-20T11:21:21.300
> 
> 标签：ruby, rspec, mocking

我可以模拟一个活动记录表吗？不是单个模型对象。

我正在寻找像我们在黄瓜中做的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-11T18:01:35.693

我认为[rspec-activemodel-mocks](https://github.com/rspec/rspec-activemodel-mocks)是您可能正在寻找的。

它提供了两个助手：

*   `mock_model`创建一个假模型（例如`mock_model(Person, name: "Fred")`）
*   `stub_model`存根现有的（例如`stub_model(Person).as_new_record`）

希望这仍然可以帮助某人！

# path - 使用prolog寻找路径

> ID：10245232
> 
> 赞同：0
> 
> 时间：2012-04-20T11:21:22.007
> 
> 标签：path, prolog, path-finding

我想知道是否有从一个点到另一个点的路径。

例如，`2 -> 4 -> 7` `1 -> 3 -> 2 -> 9` `5 -> 1 -> 6 -> 8`

这些是路径。我想写一个谓词路径（开始，结束），弧由一组弧（From，To）事实表示。

例如，当给出 path(1, 7) 时，它必须返回 true。当给出 path(6, 1) 时，这必须返回 false。因为弧是有方向的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:28:43.250

1.  If there is an arc between X and Y, then Path=arc(X,Y). That is, if arc(X,Y) then path(X,Y)). Or, in Prolog this is:

    path(X,Y,[arc(X,Y)]) :- arc(X,Y).

2.  Otherwise, if there is an arc between X and some other node Z, and there is a path from Z to Y, then there is a path from X to Y too. That is, if arc(X,Z) and path(Z,Y) then path(X,Y). In Prolog this is:

    path(X,Y,[arc(X,Z)|P]) :- arc(X,Z),path(Z,Y,P).

Taken from [this](http://www.cs.ccsu.edu/~markov/ccsu_courses/prolog.txt) site.

You could also bundle this into one predicate that simply takes a list of arcs and recursively searches for a path

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:29:58.997

Try to answer splitting the problem in elementary problems.

```
path(From, To) :-
  arc(From, Intermediate),
  path(Intermediate, To). 
```

But, do you see where path should stop? And if there are cycles, what happens?

What's miss it's the trivial case, stating that `path(X, X)` it's always true. Add to above rule:

```
path(To, To). 
```

Maybe it's clearer if we write a single rule, using If Then Else

```
path(From, To) :-
  (   From \= To
  ->  arc(From, Intermediate),
      path(Intermediate, To)
  ;   true
  ). 
```

# android - Android：如何从子自定义视图调用父 Activity 方法？

> ID：10245239
> 
> 赞同：0
> 
> 时间：2012-04-20T11:21:57.540
> 
> 标签：android, parent-child, android-custom-view, method-call

请给我一个提示如何解决这种情况：

我的 Activity 中有两个自定义视图，我想在单击其中一个自定义视图 (Y) 中的按钮后调用 Activity 方法。
我可以通过从父 Acitivity 获取 X 视图`findViewById()`并将其称为公共方法。但是我怎样才能让父母 Activivy 知道按钮被按下了呢？

**我是否必须将 Activity 引用传递给视图 Y 才能从 OnClickListener 调用 Activity 方法？**

![例子](../Images/d685e673a0ff3898f46855d1852923ce.png)谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:31:38.913

```
button = (Button)customviewY.findViewById(R.id.btnClick);

button.setOnClickListener(new OnClick..(){
    onClick(View v)
    {
        textView= (TextView)customviewY.findViewById(R.id.txtView);
        textView.setText("");
    }
}); 
```

# hibernate - 返回日期只要在实体中

> ID：10245246
> 
> 赞同：1
> 
> 时间：2012-04-20T11:22:26.453
> 
> 标签：hibernate, jpa, entity

嘿，我需要从表中返回很长的日期（毫秒）。我需要访问的列在 oracle db 上，属于时间戳类型（名称 ROW_TMSTP）。

我所做的是：

```
@Column(name = "ROW_TMSTP")
@Override
@Temporal(TemporalType.TIMESTAMP)
public Date getEntityTimeStamp() {
    return entityTS;
}

@Transient
public Long getVersion() {
    return entityTS.getTime();
} 
```

这有效..有时。如果我想选择版本高于 x 的记录，它不起作用。

如何编写一个在时间戳上工作得很好的实体类？

请不要试图说服我改变数据库结构。我必须坚持现有的，我必须通过 getVersion 返回一个字段。

谢谢！

**编辑**

getVersion 中缺少映射使我的选择查询导致标识符无效。删除`@Transient`和添加正确的映射解决了这个问题。

```
@Column(name="ROW_TMSTP", updatable=false, insertable=false)
public Long getVersion() {
     return entityTS.getTime();
} 
```

一个有点棘手，虽然比较久远......但这不是我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:09:18.413

> 如果我想选择版本高于 x 的记录，它不起作用

一种替代方法是，而不是在 where 子句中使用版本，您可以将 long 转换为时间戳并在 where 子句中使用 entityTimestamp 我猜应该这样做

# objective-c - 表格单元格点击短暂延迟

> ID：10245248
> 
> 赞同：1
> 
> 时间：2012-04-20T11:22:30.383
> 
> 标签：objective-c, uiactivityindicatorview, tablecell

当我单击表格单元格时，在加载下一个视图之前会有 1-2 秒的短暂延迟。我见过一些应用程序在那段时间显示活动指示器，这就是我想做的。我添加了一个这样的

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

  UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
  spinner.frame = CGRectMake(200,200,200,200);
  UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
  cell.accessoryView = spinner;
  [spinner startAnimating];
  [spinner release];

  VenueViewController *vviewcontroller = [[VenueViewController alloc] initWithNibName:@"VenueViewController" bundle:[NSBundle mainBundle]];

  [self.navigationController pushViewController:vviewcontroller animated:YES];
  [vviewcontroller release];
  vviewcontroller = nil;} 
```

然而，这也会延迟出现，就在下一个视图显示之前。单击表格单元格后，该应用程序似乎冻结了 1-2 秒，因此它甚至不显示活动指示器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:09:15.163

我认为秘诀在于您应该使用 performSelector 方法调用 load 方法。另一个技巧是隐藏或显示活动，这样它就不会消耗这个操作的时间。

所以这可能是那个的伪代码

在您的 ViewController 类定义中：

```
IBOutlet UIActivityIndicatorView *spin;  // created in view and hidden 
```

在您的实施中...

```
-(void) load{ // your code
  VenueViewController *vviewcontroller = [[VenueViewController alloc] initWithNibName:@"VenueViewController" bundle:[NSBundle mainBundle]];

  [self.navigationController pushViewController:vviewcontroller animated:YES];
  [vviewcontroller release];
  vviewcontroller = nil;

  spin.hidden=YES;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

  spinner.hidden=NO;

  [self performSelector:@selector(load) withObject:nil afterDelay:0];

} 
```

希望能帮助到你。

# c# - 将 Crystal Reports 导出为 HTML 格式时会创建 Additional/temp/extra 文件夹

> ID：10245249
> 
> 赞同：0
> 
> 时间：2012-04-20T11:22:30.520
> 
> 标签：c#, .net, crystal-reports

--> 将 ctystal 报告导出为 HTML 格式时正在创建附加临时文件夹。

HTML 导出只有这个问题，所有其他导出格式（.doc、.excel、.pdf..）都没有这个问题。

请让我知道是否有人遇到此问题和相同的解决方案。

前任：

```
ExportOptions crExportOptions = new ExportOptions();
DiskFileDestinationOptions crDiskFileDestinationOptions = 
            new DiskFileDestinationOptions();

CString ExportPath = @"C:\"
//set path for rept file
crDiskFileDestinationOptions.DiskFileName = ExportPath + "\\Reportrpt.rpt";

HTMLFormatOptions HTML40Formatopts = new HTMLFormatOptions();
crExportOptions.ExportDestinationType = ExportDestinationType.DiskFile;
crExportOptions.ExportFormatType = ExportFormatType.HTML40;
//given destination path
HTML40Formatopts.HTMLBaseFolderName = ExportPath;
HTML40Formatopts.HTMLFileName = "default.html";
HTML40Formatopts.HTMLEnableSeparatedPages = bSeparatedPages;

crExportOptions.DestinationOptions = crDiskFileDestinationOptions;
crExportOptions.FormatOptions = HTML40Formatopts;

reportDocloc.Export(crExportOptions); 
```

此代码将 html 文档导出到 C:\Reportrpt\Default.html，创建附加文件夹“Reportrpt”并导出到 C:\Reportrpt。

有什么办法可以抑制这个文件夹的创建？还是我的代码错了？？

谢谢提前！！

*   Prsanth（项目负责人）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:30:47.603

我没有得到任何回复……所以我与 SAP CR 人员进行了沟通。

问题出在 SAP 水晶报表上，他们正在解决这个问题。

一旦我获得修复/补丁/sp 信息，我将向您更新所有信息。从那些家伙那里。

问候，普拉桑特。

# android - 获取用于下载应用程序的 Google ID

> ID：10245250
> 
> 赞同：10
> 
> 时间：2012-04-20T11:22:32.937
> 
> 标签：android, in-app-purchase, account, accountmanager

我怎样才能知道是哪个 google 帐户下载了该应用程序？

此问题与[Get the Google ID used in an in-app billing purchase有关](https://stackoverflow.com/questions/9792571/get-the-google-id-used-in-an-in-app-billing-purchase)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:47:36.517

我认为最好的答案可以在这里找到：[How to get the Android device's primary e-mail address](https://stackoverflow.com/questions/2112965/how-to-get-the-android-devices-primary-e-mail-address) 这可能不是您想要的，但在不询问用户的情况下，我认为这是您可以获得的最接近的答案。

# matlab - 加载matlab数据文件

> ID：10245253
> 
> 赞同：1
> 
> 时间：2012-04-20T11:22:53.077
> 
> 标签：matlab, enums, constants

我想在一个文件中设置所有常量、参数，然后我可以从另一个类访问任何变量

例如 const 文件 const.m

```
FILE='file';
EDIT='edit';
COLOR_RED ='red',
COLOR_BLUE ='Blue'
START ='Start'
.....
... 
```

如果我想访问任何变量，则可以从任何其他文件中访问：

```
a = const.EDIT 
```

这样我就不必在每个文件中设置 ='file' 了。

我怎么能用 matlab 做到这一点？怎么还能用枚举？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:45:16.203

您不需要结构，只需使用 save 命令： http: [//www.mathworks.com/help/techdoc/ref/save.html](http://www.mathworks.com/help/techdoc/ref/save.html)并指定要保存的工作区变量。如果在您的示例中有小的，它们将很容易在记事本中阅读，以便在 matlab 中访问。在matlab中只需使用加载功能。

例如在 matlab 中创建两个变量：

```
Var1 = 'Red'
Var2 = [1 2; 3 4] 
```

现在输入

```
save('myData.mat'); 
```

这应该在您当前的工作文件夹中创建一个名为 myData.mat 的文件。

现在在另一个 Matlab 脚本中，您想设置一个变量以将值保存为 Var1，这样您就可以去

```
NewVar = load('myData.mat', Var1) 
```

如果在保存时添加 -ascii 参数，您可以在文本编辑器（例如记事本或 gedit（或 emacs 或 ms word 或其他））中轻松编辑 .mat 文件中的值。

但是您也可以通过再次使用 save() 并指定变量名称来重写变量。

# javascript - 将值从 Objective-C 传递到 Phonegap

> ID：10245257
> 
> 赞同：1
> 
> 时间：2012-04-20T11:23:06.683
> 
> 标签：javascript, objective-c, cordova, dom-events

我正在使用 phonegap 创建一个应用程序，我需要检查一个文档是否存在，如果它存在则读取该文档并将值传递给 phonegap。我还想在 Objective-C 中制作初始屏幕，然后按下按钮进入 phonegap 版本。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:40:35.857

要回答您的第一个问题 - 您可以使用 PhoneGap/Cordova 提供的 File 对象。如果它不完全符合您的要求，那么您可以编写自己的插件。

要回答您的第二个问题 - 您可以使用 PhoneGap/Cordova WebView 作为 iOS 上的组件。阅读此链接了解详情 - [https://github.com/apache/incubator-cordova-ios/blob/master/guides/How%20to%20Use%20Cordova%20as%20a%20Component.md](https://github.com/apache/incubator-cordova-ios/blob/master/guides/How%20to%20Use%20Cordova%20as%20a%20Component.md)

# android - 编辑打包在 android apk 中的文本文件

> ID：10245263
> 
> 赞同：0
> 
> 时间：2012-04-20T11:23:31.683
> 
> 标签：android, text, edit, apk

我正在使用属性文件来获取在我的应用程序中调用 Web 服务的 URL。有没有办法通过一些android活动来编辑它。属性文件位于 src/resources 文件夹中。我正在使用 Resourcebundle 访问该文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:28:12.763

You cant edit any file in application pkg file, however you can have following options to achieve this:

1.  Have Preferences, if when you fetched preferences are null, load preferences with that property file, else let it be as it is.
2.  Edit values in preferences.

If you still insist to use a text file only, copy property file to filesystem, and edit that file whatever you want to edit.

# android - 在 string.xml 中定义时服务操作不起作用

> ID：10245264
> 
> 赞同：1
> 
> 时间：2012-04-20T11:23:34.310
> 
> 标签：android, android-manifest, android-service

我面临一个奇怪的问题。我已经在清单中定义了我的服务操作`string.xml`并在清单中使用它，如下所示：

```
<service android:name=".MyService" >
    <intent-filter >
        <action android:name="@string/my_service_action" />
    </intent-filter>
</service> 
```

同样在启动服务时，我是这样开始的：

```
Intent serviceIntent = new Intent(getResources().getString(R.string.my_service_action));
startService(serviceIntent); 
```

谁能告诉我问题出在哪里。

如果我对相同的操作值进行硬编码，则效果非常好。经过一番尝试后，我发现它仅在清单文件中使用时才起作用（例如，仅在 java 代码中硬编码动作值而不是清单）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:32:12.490

我认为您不能将字符串引用用作服务的操作字符串。它必须是一个具体的字符串值。根据javadoc：

> **android:name**使用 Java 风格的命名约定处理的操作的名称。[细绳]

例如：

```
<service android:name=".MyService" >
    <intent-filter >
        <action android:name="com.demo.service.MY_SERVICE" />
    </intent-filter>
</service> 
```

然后您应该将其用作：

```
Intent serviceIntent = new Intent("com.demo.service.MY_SERVICE");
startService(serviceIntent); 
```

# java - .class 文件何时创建？

> ID：10245266
> 
> 赞同：2
> 
> 时间：2012-04-20T11:23:37.457
> 
> 标签：java

java是如何被解释和编译的？还有什么时候在这个编译和解释之间创建 .class 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:32:39.210

简单的答案是 Java 解释器使用 .class 文件作为其输入，而 .class 文件是 Java 虚拟机“硬件”的机器目标代码。`javac`编译器将您的 .java 源代码编译为 .class 对象，然后 JavaVM 可以执行（解释）这些对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:05:39.400

什么时候创建类文件？

答案-> 编译器开始编译时生成的类文件，恰好在那个时候解释器（JRE）生成类文件。解释器将我们的编码解码为二进制代码（机器语言），这个二进制代码被我们的系统或任何系统（机器）使用，或者我们可以说任何操作系统，如 linux、ubntu、windows、fadora。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:33:23.733

.class 文件的创建是编译步骤，因此两者之间没有任何关系。

.java 文件被编译为存储在 .class 文件中的字节码。.class 文件由 JRE 解释。

# java - 所选 JRE 不支持 1.5 的编译器合规性级别

> ID：10245270
> 
> 赞同：1
> 
> 时间：2012-04-20T11:24:00.023
> 
> 标签：java, blackberry

我在 blackerry 7 中创建了我的项目。当尝试运行项目时，它显示“项目无法打包，因为它没有关联的 BlackBerry JRE。未知的 BlackBerry 打包问题”我选择了编译器 1.4。我使用了 Vector 之类的类，它显示将编译器合规级别更改为 1.5 的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:44:07.947

检查您的项目在构建路径中使用的是 Blackberry JRE/JDE，而不是标准的 Java JRE。Blackberry 项目的编译器合规性应为 1.3（AFAIK，除非这已随 BB JDE 7 更改），您被要求将级别更改为 1.5 的原因可能是您在构建路径中定义了标准 JRE，并且您正在尝试使用 Java 1.5 之前不可用的泛型 ( `Vector<SomeClass>`)（因此不能在 BlackBerry 项目中使用）。

# asp.net - App_GlobalResources 资源没有编译到 bin/App_GlobalResources.dll

> ID：10245276
> 
> 赞同：0
> 
> 时间：2012-04-20T11:24:05.323
> 
> 标签：asp.net, resources

我是 ASP.NET 的新手。使用 msbuild + msdeploy 部署 Web 应用程序时出现错误。

```
System.IO.FileNotFoundException: Could not load file or assembly 'App_GlobalResources' or one of its dependencies. The system cannot find the file specified.

=== Pre-bind state information ===
LOG: User = NT AUTHORITY\NETWORK SERVICE
LOG: DisplayName = App_GlobalResources
 (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: App_GlobalResources | Domain ID: 2
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///C:/inetpub/wwwroot/MyServiceApp/
LOG: Initial PrivatePath = C:\inetpub\wwwroot\MyServiceApp\bin
Calling assembly : MyServiceApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\inetpub\wwwroot\MyServiceApp\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/MyServiceApp/b220778e/cc04677/App_GlobalResources.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/MyServiceApp/b220778e/cc04677/App_GlobalResources/App_GlobalResources.DLL.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/MyServiceApp/bin/App_GlobalResources.DLL.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/MyServiceApp/bin/App_GlobalResources/App_GlobalResources.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/MyServiceApp/b220778e/cc04677/App_GlobalResources.EXE.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/MyServiceApp/b220778e/cc04677/App_GlobalResources/App_GlobalResources.EXE.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/MyServiceApp/bin/App_GlobalResources.EXE.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/MyServiceApp/bin/App_GlobalResources/App_GlobalResources.EXE. 
```

我的 msbuild 任务：

```
 <Target Name="Build">
    <MSBuild Projects="$(ProjectFilePath)"
      Targets="Package"
      Properties="OutDir=$(BuildDir)\;Configuration=$(Configuration);Platform=$(Platform);PackageLocation=$(WebPackageDir)\$(WebSiteName).zip"/>
  </Target>
...
  <Target Name="MsDeploy">
    <Exec Command="$(WebPackageDir)\$(WebSiteName).deploy.cmd /Y /m:http://$(DeployServer)/MSDeployAgentService /U:$(DeployServerUser) /P:$(DeployServerPsw)" 
          ContinueOnError="false" />
  </Target> 
```

bin目录包含en/MyServiceApp.resources.dll、de/MyServiceApp.resources.dll等。为什么web服务器要搜索文件App_GlobalResources.dll？MyServiceApp.App_GlobalResources.Xxx.xx.resources 文件出现在 obj 文件夹中，但 App_GlobalResources 未编译到 bin/App_GlobalResources.dll 中。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:03:20.087

我想到了。问题是Eazfuscator。为了修复这个错误，我将资源从业务层 dll 移到了一个单独的未混淆的 dll 中。

# bash - 如何在没有“test”的情况下创建 if 或 while 循环并使用“not”运算符？

> ID：10245277
> 
> 赞同：0
> 
> 时间：2012-04-20T11:24:06.323
> 
> 标签：bash, conditional-statements

如果我做：

```
if grep someexpression somefile >/dev/null; then
   ...
fi 
```

一切正常。

做一个“不”，我知道我可以做到这一点（使用 [] 这是测试命令）：

```
if [ '!' somecondition ] ; then
   ...
fi 
```

一个简单的解决方法：

```
grep someexpression somefile >/dev/null
if [ '!' $? ]; then
   ...
fi 
```

但是上面的解决方法不适用于while循环，所以我需要编写一个函数，这很烦人。我该如何正确地使用上面的 grep 东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:27:40.097

尝试：

```
if ! grep someexpression somefile >/dev/null; then
   ...
fi 
```

请注意，后面的空格`!`是强制性的，否则它将（尝试）调用历史扩展。

# html - 在标签中包装 HTML 表格行

> ID：10245279
> 
> 赞同：58
> 
> 时间：2012-04-20T11:24:20.920
> 
> 标签：html, html-table

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-01-22T10:20:44.697

*2021 年编辑：*
现在似乎有更好的选择，它们更语义化，对屏幕阅读器更友好。查看例如[Jans 解决方案](https://stackoverflow.com/a/61589399/540725)。

*原始答案：*
作为每个 td 中的链接不是一个好的选择，使用 js 有点脏，这是另一种 html/css 方法：

HTML：

```
<div class="table">
    <a class="table-row" href="/mylink">
        <div class="table-cell">...</div>
        <div class="table-cell">...</div>
        <div class="table-cell">...</div>
    </a>
</div> 
```

CSS：

```
.table { display:table; }
.table-row { display:table-row; }
.table-cell { display:table-cell; } 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-04-20T11:26:40.303

它呈现这样是因为浏览器尊重 W3C 规范并且只允许`<tr>`标签作为`<table>`.

作为一种解决方案，您可以在*每个*指向相同 URL的`<a>`标签内放置一个标签： *`<td>`*

 *```
<table>
    <tr>
        <td>
            <a href="http://url/stuff">
                First column
            </a>
        </td>
        <td>
            <a href="http://url/stuff">
                Second column
            </a>
        </td>
    </tr>
</table> 
```

或者您可以将`onClick`处理程序绑定到`<tr>`with JavaScript。一个 jQuery 示例是这样的：

```
$('table tr').click(function() {
    window.location = 'http://location/here';
}); 
```

或者，更好的是，使用委托事件（jQuery 1.7+）：

```
$('table').on('click', 'tr', function() {
    window.location = 'http://location/here';
}); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-02-05T17:46:36.980

另一个简单的、纯 CSS 的解决方案是`<a>`变成块元素

```
<tr>
  <td><a href="#">name 1</a></td><td><a href="#">link 1</a></td>    
</tr>
<tr>
  <td><a href="#">name 2</a></td><td><a href="#">link 2</a></td>    
</tr> 
```

CSS 将是：

```
td > a {
  display: block;
} 
```

然后`<a>`将占用整个`<td>`, 并且如果为一行中的每个单元格重复链接，则无需 JS 就可以点击整行。

[https://jsfiddle.net/evwa451n/](https://jsfiddle.net/evwa451n/)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-04-20T11:26:56.840

`thead`具有除 之外的任何元素`tbody`或`tfoot`作为 a 的直接子元素是无效的 HTML `table`，并且这些元素仅`tr`作为*其*有效子元素。

任何其他内容必须在 a 内`td`或`th`才有效。

您所看到的是浏览器重组您的 DOM 以使其尽可能有效。依赖这种行为的问题在于不同的浏览器以不同的方式做出反应。

如果您需要`tr`进行交互（以及点击这些元素以引导某处/做某事），您应该使用 JavaScript。

但是，简短的回答，是的，你*可以*这样做，但这样做是无效的，所以请不要这样做。

但是，对于交互式表格行，一种解决方案（在纯 JavaScript 中）：

```
var rows = document.getElementsByTagName('tr'),
    url;

for (var i=0,len=rows.length; i<len; i++){
    rows[i].onclick = function(){
        uri = this.getAttribute('data-url');
        window.location = uri;
    };
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LaDEz/)。

（显然，这要求`tr`元素有一个`data-url`属性来指定它们应该链接到的位置。）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-04-20T11:31:29.740

You could use onclick, so you can get the content dynamically

```
<td onclick="window.location='http://www.google.com';" style='cursor: pointer;'>Hello</td> 
```

[http://jsfiddle.net/ankJw/](http://jsfiddle.net/ankJw/)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-05-04T09:50:00.820

**新奇的解决方案：**有趣的是，到 2021 年，对于带有链接的表格行仍然没有干净的解决方案——我建议您改用显示网格。使用`repeat(YOUR_COLUMN_COUNT, minmax(0, auto))`for`grid-template-columns`使网格的行为与表格非常相似 - 您可以自动调整大小和调整列。此外，您可以使用锚标签，甚至创建一个粘性标题而不会发疯：

```
<div style="display: grid; grid-template-columns: repeat(3, minmax(0, auto));">
  <div>Header column 1</div>
  <div>Header column 2 (Any content size works)</div>
  <div>Header column 3</div>
  <a href="https://example.com" style="display: contents;">
    <div>Every column adjusts dynamically</div>
    <div>Content 2</div>
    <div>Content 3</div>
  </a>
  <a href="https://example.com" style="display: contents;">
    <div>Content 1</div>
    <div>Content 2</div>
    <div>Content 3</div>
  </a>
  <a href="https://example.com" style="display: contents;">
    <div>Content 1</div>
    <div>Works like a table!</div>
    <div>Content 3</div>
  </a>
</div>
```

**更新：**不幸的是，除非使用 javascript 动态插入表行（参见下面的示例），否则下面的原始解决方案不起作用。当通过 javascript 插入新元素时，浏览器会跳过语法检查，这样就可以让锚标记留在表格中并防止浏览器将它们移到外面。

```
let tbody = document.getElementById("myTBody");

for (let i = 0; i < 2; i++) {
  let anchor = document.createElement("a");

  anchor.setAttribute("style", "display: contents;");
  anchor.setAttribute("href", "https://example.com");

  let row = document.createElement("tr");

  let col1 = document.createElement("td");
  let col2 = document.createElement("td");
  col1.append(document.createTextNode("Column 1"));
  col2.append(document.createTextNode("My longer Column 2"));

  row.appendChild(col1);
  row.appendChild(col2);

  anchor.appendChild(row);
  tbody.appendChild(anchor);
}
```

```
<p>This table doesnt work with anchors around the rows:</p>
<table>
  <thead>
    <tr>
      <th>Column 1</th>
      <th>Column 2</th>
    </tr>
  </thead>
  <tbody>
    <a href="https://example.com" style="display: contents !important;">
      <tr>
        <td>Column 1</td>
        <td>My longer Column 2</td>
      </tr>
    </a>
    <a href="https://example.com" style="display: contents !important">
      <tr>
        <td>Column 1</td>
        <td>Column 2</td>
      </tr>
    </a>
  </tbody>
</table>
<p>This table does work with anchors around the rows:</p>
<table>
  <thead>
    <tr>
      <th>Column 1</th>
      <th>Column 2</th>
    </tr>
  </thead>
  <tbody id="myTBody">
    <!-- Rows get inserted by javascript -->
  </tbody>
</table>
```

**原文：**你也可以使用`display: contents;`. 这会导致 a 标签子项的行为就像它们是 a 标签父项的子项一样。

在您的 HTML 中：

```
<table>
  <thead>
    <tr>
      <th>Column 1</th>
      <th>Column 2</th>
    </tr>
  </thead>
  <tbody>
    <a href="https://example.com" style="display: contents;">
      <tr>
        <td>Column 1</td>
        <td>Column 2</td>
      </tr>
    </a>
    <a href="https://example.com" style="display: contents;">
      <tr>
        <td>Column 1</td>
        <td>Column 2</td>
      </tr>
    </a>
  </tbody>
</table>
```

大多数情况下，不同浏览器的支持应该足够了（请参阅[https://caniuse.com/#feat=css-display-contents](https://caniuse.com/#feat=css-display-contents)）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-04-20T11:27:11.473

为什么你不想在点击事件`tr`？不可能有你想要的锚标签，所以你可以制作点击事件并添加额外的 CSS 使其看起来像锚。

**查询：**

```
$("table tr").click(function() {
    window.location = "http://www.google.com/";
}); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-06-24T16:17:43.103

除了其他人之外，我必须补充一点，我个人更喜欢这样做

```
<tr onclick="window.location='http://www.google.com';" >
  <td>Text...</td>
</tr> 
```

在**ASP.NET MVC**的情况下，这样做

```
<tr onclick="window.location = '@Url.RouteUrl("Product", new { SeName = @product.SeName })';"> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-02T14:55:35.010

此处提供的解决方案对我有帮助，但我认为使用 window.location 不是一个好方法，因为用户无法执行 ctrl+click、在另一个选项卡中打开或查看 url 的去向。我正在构建这个页面，我喜欢在不点击它的情况下看到构建的 url，chrome 会在悬停时显示这个。我无法克服这一点，所以我决定使用上面的@Bojangles 建议来用链接包装每个 td。

首先，按照其他人的建议，将 data-href 添加到每个 tr。

然后，通过 js 将每个 td 包装在一个链接中：

```
 jQuery(document).ready(function ($) {
        //wrap each td's contents with a hyperlink targeting the data-href 
        $('*[data-href]').children("td").wrapInner(function () {
            return "<a href='" + this.parentElement.attributes["data-href"].value + "'></a>";
        });
    }); 
```

可选地，使用 css 使超链接用完所有单元格

```
 table tr a {
        display:block; /*the link occupies the whole cell, so it's all clickable*/
    } 
```*

# c - 使用 sk_buff 添加以太网帧头

> ID：10245281
> 
> 赞同：6
> 
> 时间：2012-04-20T11:24:21.440
> 
> 标签：c, linux-kernel, kernel, kernel-module, netfilter

我有一个捕获传出 Internet 流量的内核模块（Netfilter 钩子：LOCAL_OUT） 在这个钩子上，仍然没有以太网标头。

我构建了以太网标头并可以使用，但是如何将其附加到**skb**以便我可以将整个 skb 结构发送到**dev_queue_xmit()**？

是否有任何关于如何操作 sk_buff 数据的指南，您可以提供给我以获取更多信息？

作为示例，我尝试对所有 ECHO ICMP 流量做我想做的事情；这是我的代码。但是当在另一台机器上检查 Wireshark 时，我得到了一个正常工作的以太网报头，但是一个 EMPTY IP 数据包......怎么会？

> ```
> static unsigned int post_icmp_check(unsigned int hooknum,
>                  struct sk_buff *skb,
>                  const struct net_device *in,
>                  const struct net_device *out,
>                  int (*okfn)(struct sk_buff *))
> {
>   struct iphdr *iph;
>   struct icmphdr *icmph;
>   struct sk_buff *sb;
>   struct ethhdr *ethh;
>   unsigned char *frame = NULL; //Used just to copy the skb->data and replace it, that's all
>   unsigned char *ptr;
> 
>   /* Allocations and initial assignations  */
>   sb = skb_copy(skb, GFP_ATOMIC); /* Making a private copy because we cannot modify all fields in the public one */
>   iph = ip_hdr(sb);
> 
>   if(iph->protocol == IPPROTO_ICMP){
>       printk(KERN_ALERT"POST ICMP traffic!\n");
> 
>       icmph = icmp_hdr(sb);
>       if(icmph->type == ICMP_ECHO){
>           frame = (unsigned char *)kmalloc(ntohs(iph->tot_len) + (ETH_HLEN*8), GFP_KERNEL);
>           ptr = (frame +  (ETH_HLEN * 8));
> 
>           ethh = (struct ethhdr*) frame;      //00:1a:80:7e:96:ba
>           ethh->h_source[0] = 0x00;   
>           ethh->h_source[1] = 0x1a;           
>           ethh->h_source[2] = 0x80;
>           ethh->h_source[3] = 0x7e;
>           ethh->h_source[4] = 0x96;
>           ethh->h_source[5] = 0xba;
>           ethh->h_dest[0] = 0xff;
>           ethh->h_dest[1] = 0xff;
>           ethh->h_dest[2] = 0xff;
>           ethh->h_dest[3] = 0xff;
>           ethh->h_dest[4] = 0xff;
>           ethh->h_dest[5] = 0xff;
>           ethh->h_proto = htons(ETH_P_IP);
>           memcpy(ptr, skb->data, ntohs(iph->tot_len)); /* Copying the rest of the data from the skb to sb */
>           sb->data = frame;
> 
>           //icmph = icmp_hdr(sb);
> 
>           //icmph->un.echo.sequence = htons(i++);         
>           //icmph->checksum = 0;
>           //icmph->checksum =  in_cksum((unsigned short *)icmph, ntohs(iph->tot_len) - sizeof(struct iphdr));
>           sb->dev = out;
>           printk(KERN_ALERT"%s\n",sb->dev->name);
>           if(sb->dev == NULL)
>               printk(KERN_ALERT"dev is NULL!");           
>           dev_queue_xmit(sb);
>           return NF_STOLEN;
> } 
> ```

编辑：是的，我正在硬编码我自己的 MAC 并广播帧，只是为了简单起见。

**EDIT2：** 所以我给这个函数原始的 sk_buff 由 net_filter 和适当的 net_device 我试着按照你说的去做，并阅读了一些关于 sK_buff 函数的指南。尽管如此，当我 dev_queue_xmit() 这个函数返回的 sk_buff 时，我得到一个完整的内核崩溃。

```
static struct sk_buff* set_skb(struct sk_buff *org_skb, struct net_device *dev)
{
    int header_size;
    unsigned char *data;
    struct icmphdr *icmph;
    struct iphdr *iph;      
    struct icmphdr *temp_icmph;
    struct iphdr *temp_iph;         
    unsigned char myaddr[] = {0x00,0x1a,0x80,0x7e,0x96,0xba};
    unsigned char addr [] = {0xff,0xff,0xff,0xff,0xff,0xff};    
    struct sk_buff *skb;

    temp_iph = ip_hdr(org_skb); 
    temp_icmph = icmp_hdr(org_skb);

    skb = alloc_skb(ntohs((temp_iph->tot_len) + (ETH_HLEN*8)), GFP_KERNEL); /* Allocating enough space for everything */

    /* icmp_hlen which is always 8, ip_hlen */
    header_size = 8 + ntohs(temp_iph->ihl*4);

    /* reserve headroom This actually allocates the IP and ICMP headers memory */
    skb_reserve(skb, header_size);

    /* payload */
    data = skb_put(skb, org_skb->data_len);/* This function allocates room for the data */
    memcpy(data, org_skb->data, org_skb->data_len);

    icmph = (struct icmphdr*)skb_push(skb, 8); 
    /* set up icmp header here */
    memcpy(icmph, temp_icmph, 8);   

    iph = (struct iphdr*)skb_push(skb, temp_iph->ihl*4);
    /* set up ip header here */
    memcpy(iph, temp_iph, temp_iph->ihl*4); 

    /*
     * This function sets up the ethernet header,
     * destination address addr, source address myaddr
     */
    dev_hard_header(skb, dev, ETH_P_IP, addr, myaddr, dev->addr_len);
    return skb;
} 
```

**编辑3：**

```
Apr 20 23:44:09 DHS-1022CYB kernel: [ 1139.520104] Loading Test module...
Apr 20 23:44:09 DHS-1022CYB kernel: [ 1139.520168] *********************HERE WE GO**********************
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.760448] PGD 114952067 PUD 12d932067 PMD 0 
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.760762] CPU 0 
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.760809] Modules linked in: myModule(P) binfmt_misc rfcomm ppdev sco bridge stp bnep l2cap joydev fbcon tileblit font bitblit softcursor vga16fb vgastate snd_hda_codec_realtek pcmcia arc4 snd_hda_intel snd_hda_codec snd_hwdep snd_pcm_oss snd_mixer_oss snd_pcm snd_seq_dummy snd_seq_oss snd_seq_midi snd_rawmidi snd_seq_midi_event iwlagn snd_seq iwlcore snd_timer radeon ttm drm_kms_helper snd_seq_device mac80211 tifm_7xx1 led_class usbhid yenta_socket hid rsrc_nonstatic btusb bluetooth uvcvideo videodev v4l1_compat v4l2_compat_ioctl32 snd drm tifm_core i2c_algo_bit psmouse sony_laptop pcmcia_core serio_raw cfg80211 soundcore snd_page_alloc video output intel_agp lp parport ohci1394 ieee1394 r8169 mii
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.762642] Pid: 3423, comm: ping Tainted: P           2.6.32-33-generic #70-Ubuntu VGN-CR31Z_R
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.762753] RIP: 0010:[<ffffffffa042c081>]  [<ffffffffa042c081>] post_icmp_check+0x81/0x1e0 [myModule]
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.762891] RSP: 0018:ffff88011494f948  EFLAGS: 00010246
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.762965] RAX: 0000000000000000 RBX: ffff88013bb62000 RCX: 00000000000000d0
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.763059] RDX: 0000000000000000 RSI: ffff88013bb62000 RDI: 0000000000000000
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.763153] RBP: ffff88011494f988 R08: 00000000ffffffff R09: 0000000000000001
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.763248] R10: ffffffff81591000 R11: ffff880137c9c9ef R12: ffff880130ba8100
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.763346] R13: ffffffff81831070 R14: ffff880130ba8100 R15: 0000000000000003
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.763441] FS:  00007f3377ef6700(0000) GS:ffff880028200000(0000) knlGS:0000000000000000
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.763546] CS:  0010 DS: 0000 ES: 0000 CR0: 000000008005003b
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.763626] CR2: 0000000000000000 CR3: 0000000114863000 CR4: 00000000000006f0
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.763721] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.763815] DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.763910] Process ping (pid: 3423, threadinfo ffff88011494e000, task ffff880139b6c4d0)
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.764052]  ffff88011494fde8 0000000000000040 0000000000609420 0000000000000000
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.764195] <0> ffff88011494fa10 0000000080000000 ffffffff81831070 ffff880130ba8100
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.768380] <0> ffff88011494f9d8 ffffffff81486f1c ffff88013bb62000 0000000000000000
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff81486f1c>] nf_iterate+0x6c/0xb0
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff81491b20>] ? dst_output+0x0/0x20
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff81486fd4>] nf_hook_slow+0x74/0x100
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff81491b20>] ? dst_output+0x0/0x20
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff81493c3f>] __ip_local_out+0x9f/0xb0
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff81493c66>] ip_local_out+0x16/0x30
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff81493f0a>] ip_push_pending_frames+0x28a/0x410
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff8148cd02>] ? ip_route_output_flow+0x82/0xb0
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff814b40b5>] raw_sendmsg+0x3a5/0x5c0
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff814be5b9>] inet_sendmsg+0x29/0x60
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff81285389>] ? apparmor_socket_sendmsg+0x19/0x20
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff8145004b>] sock_sendmsg+0x10b/0x140
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff81084cc0>] ? autoremove_wake_function+0x0/0x40
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff8144f5b4>] ? move_addr_to_kernel+0x64/0x70
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff8145a706>] ? verify_iovec+0x66/0xd0
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff814504c3>] sys_sendmsg+0x233/0x3a0
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff811131c9>] ? __do_fault+0x439/0x500
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff81541845>] ? _spin_lock_irq+0x15/0x20
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff810787ae>] ? do_sigaction+0x13e/0x1e0
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff815444a8>] ? do_page_fault+0x158/0x3b0
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  [<ffffffff810121b2>] system_call_fastpath+0x16/0x1b
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.770015]  RSP <ffff88011494f948>
Apr 20 23:44:12 DHS-1022CYB kernel: [ 1142.887370] ---[ end trace 404e94883c3bf110 ]--- 
```

这就是崩溃后的内核日志结果。

**EDIT4：** 为了让事情更清楚，这是实际调用我的 set_skb() 的代码部分

```
if(icmph->type == ICMP_ECHO){
            memcpy(dev, out, sizeof(*out)); 
            sb = set_skb(skb, dev);
            printk(KERN_ALERT"%s\n",sb->dev->name);           
            dev_queue_xmit(sb);
            return NF_STOLEN;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:49:42.210

哇，你不要那样做。不要直接弄乱 skb 内部指针。只需分配一个 skb 并将标头和有效负载复制到新的。

假设您要添加 ICMP、IP 和以太网标头并从`orig_skb`. 像这样做：

```
struct skbuff *skb = skb_alloc(full_len, GFP_KERNEL);

/* icmp_hlen, ip_hlen and payload_size should be known */
int header_size = icmp_hlen + ip_hlen;

/* reserve headroom */
skb_reserve(skb, header_size);

/* payload */
unsigned char *data = skb_put(skb, payload_size);
memcpy(data, orig_skb->data, payload_size);

struct icmphdr *icmph = skb_push(skb, icmp_hlen);
/* set up icmp header here */

struct iphdr *iph = skb_push(skb, ip_hlen);
/* set up ip header here */

/*
 * This function sets up the ethernet header,
 * destination address addr, source address myaddr
 */
dev_hard_header(skb, dev, ETH_P_IP, addr, myaddr, dev->addr_len); 
```

如果要添加传输、网络等标头，可以推送多个标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-30T10:52:31.933

```
 unsigned int snoop_hook1( unsigned int hooknum, struct sk_buff *skb,
    const struct net_device *in, const struct net_device *out,
    int(*okfn)( struct sk_buff * ) )    
{      
    int offset, len,tcplen;
    struct ethhdr *ethh;
    struct iphdr *iph;
    struct tcphdr *tcph;
    uint16_t t;
    bool flag = false;
    struct sk_buff *nskb;
    struct net_device *eth1_dev , *lo_dev;

    if (!skb) return NF_ACCEPT;
    iph = ip_hdr(skb);
    if (!iph) return NF_ACCEPT;
    tcph = tcp_hdr(skb);
    /* skip lo packets */
    if (iph->saddr == iph->daddr) return NF_ACCEPT;
    if (tcph->dest == htons(80))
            flag=true;
    // add similar conditions for true flags
    if(flag != true)
            return NF_ACCEPT;

    /* print packet information */
    printk(KERN_INFO "HELLO !!!\n");
    printk(KERN_INFO "HOOK=NF_INET_LOCAL_OUT");
    printk(KERN_INFO "INDEV %s OUTDEV %s",in->name,  out->name);
    printk(KERN_INFO "sk_buff::dev %s",skb->dev->name);
    //printk(KERN_INFO "MAC ADDRESSES as in eth header %pM->%pM", &(ethh->h_source), &(ethh->h_dest));
    printk( KERN_INFO " %pI4->%pI4\n", &(iph->saddr), &(iph->daddr));
    printk(KERN_INFO "TCP SRC:%d, TCP DST:%d",ntohs(tcph->source),ntohs(tcph->dest));

    // correct the IP checksum
    printk(KERN_INFO "IP checksum =%d",iph->check);
    iph->check = 0;
    ip_send_check (iph);
    printk(KERN_INFO "IP checksum new =%d",iph->check);

    //correct the TCP checksum
    printk(KERN_INFO "TCP checksum =%d",tcph->check);
    offset = skb_transport_offset(skb);
    len = skb->len - offset;
    printk(KERN_INFO "skb->len=%d",skb->len);
    printk(KERN_INFO "offset=%d",offset);
    printk(KERN_INFO "len=%d",len);
    tcph->check = 0;
    if(skb->len > 60){
    tcph->check  = csum_tcpudp_magic((iph->saddr), (iph->daddr), len, IPPROTO_TCP, csum_partial((unsigned char *)tcph,len,0));
    printk(KERN_INFO "TCP checksum new=%d",tcph->check);
    }
    else{
    tcph->check  = ~csum_tcpudp_magic((iph->saddr), (iph->daddr), len, IPPROTO_TCP, 0);
    printk(KERN_INFO "TCP checksum new*=%d",tcph->check);
    }
    printk(KERN_INFO "************************************************************");

    //send to dev
    eth1_dev = dev_get_by_name(&init_net,"eth1");
    lo_dev = dev_get_by_name(&init_net,"lo");
    skb->dev = eth1_dev;
    ethh = (struct ethhdr *) skb_push(skb, ETH_HLEN);
    skb->protocol = ethh->h_proto = htons(ETH_P_IP);
    memcpy (ethh->h_source,eth1_dev->dev_addr , ETH_ALEN);
    memcpy (ethh->h_dest, d_mac, ETH_ALEN);
    dev_queue_xmit(skb);
    return NF_STOLEN;
} 
```

这是一个老问题（和答案）。我需要做一些完全相似的事情，我最终得到了这段代码。想把它展示出来帮助别人。它至少对我有用，我在这里发送相同的 skb。d_mac 是网关的 mac 或 lan 中的另一个 mac。它可以从传入的数据包或从 arp 中获得。

# xslt - 如何在输出 XML 中避免 xmlns="http://www.w3.org/1999/xhtml"

> ID：10245282
> 
> 赞同：0
> 
> 时间：2012-04-20T11:24:22.517
> 
> 标签：xslt

我正在以 QTI 格式 (qti.xml) 将 XHTML 转换为 XML。我的 XSLTcode 是这样的

```
<?xml version="1.0" encoding="ISO-8859-1"?><xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:x="http://www.w3.org/1999/xhtml" exclude-result-prefixes="x" >

<xsl:template match="x:div[@id='item']">

        <itemBody>

            <p class="direction"><xsl:apply-templates select="x:div[@id='directions']" /></p>
            <p class="supplemental-elements"> <xsl:apply-templates select="x:div[@id='supplemental-elements']" /></p>
            <xsl:apply-templates select="x:div[@id='options']" />

        </itemBody>
    </xsl:template> 
```

执行后我得到了`<itemBody xmlns="http://www.w3.org/1999/xhtml">`。我只想`<itembody>.` 我也使用 exclude-result-prefixes="x"。但它没有帮助。你能帮帮我吗？

安巴达斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:47:44.410

好吧，如果你`xmlns="http://www.w3.org/1999/xhtml"`从`xsl:stylesheet`元素中删除问题应该得到解决。你为什么有这个？您需要在 XHTML 名称空间中创建一些元素吗？

# c# - 如何检查按钮是否悬停并输出消息

> ID：10245283
> 
> 赞同：-3
> 
> 时间：2012-04-20T11:24:24.920
> 
> 标签：c#, .net, winforms

我在应用程序中有 40 个按钮，我需要自定义悬停在状态字段中显示。我已经制作了一个用于添加某个消息和一个要删除的函数，因此在悬停时，它会调用该函数，并且与离开按钮相同。

我想要 40 条不同的消息，其中一种方法是检查鼠标悬停在哪个按钮上。

```
if(button1.hovered == true){
  string message = "scenario1";
}
elseif(button2.hovered == true){
  scenario2...etc
} 
```

有没有办法检查是否悬停？并在 if 语句中检查它？

我决定添加更多信息，这样可能更容易理解我的观点。

鼠标悬停时向列表视图添加消息。

```
 void messAdd(object sender, EventArgs e)
    {

        string now = DateTime.Now.ToString("M/d/yyyy") + " - " + DateTime.Now.ToString("HH:mm:ss tt");
        string message = "message 1";
        found = false;

        ListViewItem item = new ListViewItem(message);
        foreach (ListViewItem z in listView1.Items)
        {
            if (z.Text == message)
            { found = true; }
        }

        if (found == false)
        {
            item.SubItems.Add(now.ToString());
            listView1.Items.Add(item);
            listView1.EnsureVisible(item.Index);
        }
        else
        {
            DeleteIfNecessary(message);
        }
    } 
```

鼠标离开时从列表框中删除消息：

```
 void messdel(object sender, EventArgs e)
    {

        string message = "message 1";
        found = false;

        ListViewItem item = new ListViewItem(message);
        foreach (ListViewItem z in listView1.Items)
        {
            if (z.Text == message)
            { found = true; }
        }

        if (found == true)
        {
            DeleteIfNecessary(message);
        }

    } 
```

我可以为每个按钮制作 4 个这样的功能，但是因为我需要 40 条不同的消息，愚蠢的是，但是没有办法通过该功能发送消息参数，所以我需要使用 if 测试并检查女巫按钮是否悬停然后将消息输出到指定的按钮。我正在使用 Visual Studio 和 Windows 窗体，抱歉没有提到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:28:58.873

There is a `Control.MouseHover` event. You can implement:

```
private void button_MouseHover(object sender, System.EventArgs e)
{
    doSomething(sender);
} 
```

and for all of your buttons, set event handler for `MouseHover` to `button_MouseHover` in IDE, or do it in code:

```
this.button1.MouseHover += new System.EventHandler(this.button_MouseHover); 
```

By checking the `sender` parameter you can know which button is calling the event handler.

**Update**

According to your update in the question, I think you can just use `messAdd` as the event handler for `MouseEnter` event for all of your buttons, and use `messdel` as the event handler for `MouseLeave`. Again, you don't need to create a copy of these two methods for all of your buttons, you just need to assign the **same** event handler method for all the buttons, and check `sender` to know who is calling the event handler - then creating different messages.

The `sender` is your `Button` object. Just cast it to a `Button` and access what you want (text, tag, name, etc.) to know which `Button` is trying to add/remove message on the list view.

**Update 2**

```
Button button = sender as Button;
if (button == null) {
    // not a button, do nothing
    return;
}

string message = String.Empty;
if (sender.Equals(button1)) {
    message = "message1";
} else if (sender.Equals(button2)) {
    message = "message2";
} ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:35:12.593

我将假设这是 WinForms，因为您没有另外指定。

您可以创建一个 int`hoveredId`表示悬停的按钮（值`-1`表示没有悬停）。创建按钮时，将 Tag 属性设置为按钮的 ID 号。

然后将每个按钮注册到这两个功能：

```
private void buttons_MouseEnter(object sender, System.EventArgs e)
{
    Button btn = ((Button)sender);

    hoveredId = (int)btn.Tag;
}

private void buttons_MouseLeave(object sender, System.EventArgs e)
{
    Button btn = ((Button)sender);

    if ((int)btn.Tag == hoveredId)
        hoveredId = -1;
} 
```

检查悬停的按钮时，可以使用 switch 语句：

```
switch (hoveredId)
{
  case 1:
    string message = "scenario1";
    break;
  case 2:
    scenario2...etc
    break;
} 
```

# ruby-on-rails - Rails 3 - 活动管理员 - 缺少 flash_notice

> ID：10245284
> 
> 赞同：1
> 
> 时间：2012-04-20T11:24:25.220
> 
> 标签：ruby-on-rails, ruby, activeadmin, notice

几天来我一直在尝试和寻找任何解决方案..

我在我的 rails 3 应用程序中使用了 active_admin gem，但我只在登录后收到 flash 通知 - 而不是在任何 update/delete/add -action 之后。

有谁知道这个问题的根源是什么？我对Rails有点陌生..

西蒙

# php - 在 PHP OOP 中使用公共变量是否有任何有效的用例？

> ID：10245299
> 
> 赞同：7
> 
> 时间：2012-04-20T11:26:15.607
> 
> 标签：php, oop, variables, getter-setter

变量封装、Set/Get 方法是最佳实践，但如果它不打算使用，为什么我们有机会声明一个公共变量？如果变量在默认情况下始终是私有的并且没有机会将它们公开，因为我阅读的所有教程都说它们应该用 set/get 方法封装，那会更好吗？至少在 PHP OOP 中是否有任何有效的公共变量用例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T11:32:26.357

事实上恰恰相反：理论上 getter/setter 是*错误*的。属性定义对象的状态，方法定义行为。Getters/Setters 只是拦截了对属性的读写访问，但它们完全打破了语义：现在读取对象的状态是对象的一种行为。

为了使属性再次看起来像属性，路上有一个 RFC :) [https://wiki.php.net/rfc/propertygetsetsyntax](https://wiki.php.net/rfc/propertygetsetsyntax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:35:14.313

> Set/Get 方法是最佳实践，但如果它不打算使用，为什么我们有机会声明一个公共变量？

最佳实践和不打算使用是不一样的。一种语言需要为不同的用例提供不同的工具，并且应该保持一致。

PHP 对象始终支持公共成员，当引入差异化可见性时，出于向后兼容的原因，公共成员非常有用。

> 如果变量在默认情况下始终是私有的并且没有机会将它们公开，因为我阅读的所有教程都说它们应该用 set/get 方法封装，那会更好吗？

这个问题无法具体回答，它太主观了，而且有太多不同的用例会导致不同的答案。

> 至少在 PHP OOP 中是否有任何有效的公共变量用例？

从向后兼容性开始。如果你不能重构你的代码但需要一直完全重写它，这将是非常昂贵的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T11:54:42.053

[让我们看看.. 这是来自CakePHP EmailComponent](http://book.cakephp.org/1.3/en/view/1284/Class-Attributes-and-Variables)的真实世界电子邮件 API 类。要使用这个类，你只需要“设置”一些属性然后就可以了`send()`

```
$this->Email->to = 'ss@b.co';
$this->Email->from = 'me@b.co';
$this->Email->title = 'xxx';
$this->Email->msg = 'blabla..';
$this->Email->send(); 
```

事实上，这个类中有很多私有属性和函数，但它是私有的。

**班级**有（单一）责任做某事。 **封装**是只发布人们用来做那件事的东西，并将内部的技术/基础设施保持为**私有**。

# .net - 我是否需要在服务器上安装 Crystal Reports 中的某些内容？

> ID：10245302
> 
> 赞同：2
> 
> 时间：2012-04-20T11:26:24.840
> 
> 标签：.net, crystal-reports

我正在 Visual Studio 2010 中开发一个 Web 应用程序项目。它已发布到 Windows 2008 服务器。

我添加了对以下内容的引用：

CrystalDecisions.CrystalReports.Engine

CrystalDecisions.Shared

CrystalDecisions.Web

并将 CrystalReportViewer 添加到 .aspx 页面。

查看器要显示的水晶报表文件位于应用程序发布到的服务器上。

如果我在本地运行应用程序 - 它工作正常并且报告显示在查看器中。

如果我将应用程序发布到服务器，它会因缺少“log4net”组装消息而崩溃。

我是否需要在服务器上安装 Crystal Reports 中的某些内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:49:18.883

是的 - 您需要安装相关的 Crystal Reports 运行时/重新分发；

[http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp](http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp)

应该有你需要的。

如果您遇到版本问题，请尝试通过将其添加到您的 app/web .config 来修复：

```
<runtime> 
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="CrystalDecisions.CrystalReports.Engine" publicKeyToken="692fbea5521e1304" culture="neutral"/>
        <bindingRedirect oldVersion="xx.x.xxxx.x" newVersion="yy.y.yyyy.y"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="CrystalDecisions.Shared" publicKeyToken="692fbea5521e1304" culture="neutral"/>
        <bindingRedirect oldVersion="xx.x.xxxx.x" newVersion="yy.y.yyyy.y"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="CrystalDecisions.ReportSource" publicKeyToken="692fbea5521e1304" culture="neutral"/>
        <bindingRedirect oldVersion="xx.x.xxxx.x" newVersion="yy.y.yyyy.y"/>
      </dependentAssembly>
      <dependentAssembly>
        ...
    </assemblyBinding>
  </runtime> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T12:22:07.360

我只需从 IIS 的高级设置中将启用 32 位应用程序勾选为 true，就能够解决该错误。单击您选择的应用程序池>广告设置>将弹出一个对话框。

# java - 如何在 JTable 上添加图像背景，滚动 JTable 时不滚动

> ID：10245305
> 
> 赞同：3
> 
> 时间：2012-04-20T11:26:32.953
> 
> 标签：java, swing, background, jtable, jscrollpane

我需要在我的 JTable 后面添加一个图像背景，在滚动我的 JTable 时不应该向下滚动。目前我已经添加了一个图像作为我的 JTable。使用绘画方法。

```
public void paint(Graphics g) 
            {
                // First draw the background image - tiled
                Dimension d = getSize();
                for (int x = 0; x < d.width; x += image.getIconWidth())
                    for (int y = 0; y < d.height; y += image.getIconHeight())
                        g.drawImage(image.getImage(), x, y, null, null);
                // Now let the regular paint code do it's work
                super.paint(g);
            } 
```

问题是这样的。这个 JTable 位于 JScrollPane。和滚动窗格时。也向下滚动图像。并在每次滚动时重复图像。

有什么方法可以限制仅在背景上滚动。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T11:31:21.770

`JScrollPane`而是在上面绘制背景。您还需要使用 使`JTable`和单元格渲染器都透明`setOpaque(false)`。*（并`paintComponent`在覆盖时使用该方法）。*

下面的代码产生了这个截图：

![截屏](../Images/d93178e16fdd5072107dcc0f87f22024.png)

```
public static void main(String[] args) throws IOException {
    JFrame frame = new JFrame("Test");

    final BufferedImage image = ImageIO.read(new URL(
            "http://upload.wikimedia.org/wikipedia/en/2/24/Lenna.png"));

    JTable table = new JTable(16, 3) {{
        setOpaque(false);
        setDefaultRenderer(Object.class, new DefaultTableCellRenderer() {{
            setOpaque(false);
        }});
    }};

    frame.add(new JScrollPane(table) {{
            setOpaque(false);
            getViewport().setOpaque(false);
        }
        @Override
        protected void paintComponent(Graphics g) {
            g.drawImage(image, 0, 0, getWidth(), getHeight(), this);
            super.paintComponent(g);
        }

    });
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T11:38:00.980

*   您可以绘画`JTable's backgroung`，与其余部分相同/相似`JComponents`

*   你必须覆盖`paintComponent()`而不是方法`paint()`

*   [关于 paintComponent() 的示例，包括自定义行选择](https://stackoverflow.com/a/6060678/714968)

*   可以画到的`JXLayer(Java6)`，`JLayer (Java7)`还有

*   [你可以画到 GlassPane](https://stackoverflow.com/q/8715807/714968)

*   [你可以画到 JViewport](https://stackoverflow.com/q/8614972/714968)

# iphone - 分发使用“App Store”配置文件构建的 iPhone 应用程序

> ID：10245314
> 
> 赞同：-1
> 
> 时间：2012-04-20T11:26:51.357
> 
> 标签：iphone, ios4, app-store, xcode4.2

是否可以分发使用“App Store”配置文件构建的 iPhone 应用程序？（未提交至 App Store）

我知道我可以通过创建 Ad-Hoc 配置文件和链接设备 ID 来运行应用程序。我想运行该应用程序，但我想在不向开发人员门户或未添加到门户的设备中添加任何设备 ID 的情况下运行该应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:31:54.457

没有越狱是不可能的。您必须使用带有设备 ID 的分发配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:32:03.280

不，那是不可能的。分发 iOS 应用程序有 3 种方式：

*   通过应用商店。
*   通过构建到设备（确实需要将设备的 ID 添加到配置文件中）。
*   无线（Ad Hoc），它确实需要您将每个设备的 ID 添加到配置文件中。

# backbone.js - 当我更改某些属性的值或从列表中删除时如何通知视图？

> ID：10245315
> 
> 赞同：3
> 
> 时间：2012-04-20T11:26:54.537
> 
> 标签：backbone.js

我需要创建一个模型来保存一个元素的 css 属性。我的模型如下所示：

```
StyleModel = Backbone.Model.extend( {
    defaults : {
        productName : '',
        styles:{
            'font-weight':'normal',
            'font-style':'normal',
            'text-decoration':'none',
            'visibility':'visible'
            'color':'blue',
            'border-width':'1px',
            'border-color':'white',
            'font-color':'white'
        }
    },
    initialize : function(property, values) {}
...} 
```

当我更改某些属性的值或从列表中删除时如何通知视图？（例如，当用户将**边框宽度**设置为**3px**或删除**font-weight**时。或者不将属性保存在哈希中并将每个属性设置为模型中的元素是更好的解决方案吗？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T11:44:10.467

Backbone 无法自行识别哈希中的设置。但是您可以创建为您处理此问题的方法：

```
 Backbone.Model.extend({
  setCss: function(key, value){
    var css = this.get("styles");
    css[key] = value;
    this.trigger("change", this, key, value);
    this.trigger("change:css", key, value);
    this.trigger("change:css:" + key, value);
  }
}); 
```

然后你会打电话`model.setCss("background-color", "#ff0faf")`，它会触发三个“改变”事件，让你绑定到你的视图中。

在视图中，您可以在初始化程序中绑定更改事件，并让 jQuery 将所有样式应用于视图控制的 DOM 元素：

```
 Backbone.View.extend({
  initialize: function(){
    this.model.on("change:css", this.setCss, this);
  },

  setCss: function(){
    var css = this.model.get("styles");
    this.$el.setCss(css);
  }
}); 
```

在应用新集合之前，您可能需要清除现有的 css，以确保您摆脱任何已删除的内容。但是，更有可能的是，您希望`deleteCss`在模型上有一个方法，让它`css:deleted`从模型中引发一个事件，并让视图通过删除相关的 css 属性来响应该事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:36:51.193

[使用模型http://documentcloud.github.com/backbone/#Model-change](http://documentcloud.github.com/backbone/#Model-change)上可用的更改事件

让您的视图绑定到事件。[http://documentcloud.github.com/backbone/#Events-on](http://documentcloud.github.com/backbone/#Events-on)

# console - 如何使用 vimrc 插件更改 vim 的背景和颜色？

> ID：10245320
> 
> 赞同：0
> 
> 时间：2012-04-20T11:27:15.333
> 
> 标签：console, terminal, vim, vi

我在使用 Vim 颜色方案时遇到问题。我已经下载并安装了[这个插件](http://www.vim.org/scripts/script.php?script_id=625)，但我不知道如何让我的选择永久化。

你能告诉我怎么做吗？

这是我的`.vimrc`配置文件的一部分：

```
set nocompatible        " not compatible with the old-fashion vi mode
set bs=2                " allow backspacing over everything in insert mode
set history=50          " keep 50 lines of command line history
set ruler               " show the cursor position all the time
set autoread            " auto read when file is changed from outside
set number              " setting number always 
set showcmd             " display an incomplete command 
set background=wombat256     " or light 
```

我已经选择`wombat256`了，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T20:00:26.017

更改此行：

```
set background=wombat256     " or light 
```

到

```
colorscheme wombat256 
```

并且不要错过阅读文档的好机会：`:help 'background'`和`:help colorscheme`.

# html - 将 Html 文本添加到 Html5 画布

> ID：10245328
> 
> 赞同：2
> 
> 时间：2012-04-20T11:27:47.027
> 
> 标签：html, canvas

我从另一个应用程序中获得了来自用户输入的 html 格式的文本。（使用字体 b br ul 等，一个片段中不同的字体和颜色）

我想把它写在画布上。

喜欢`context.write("<b>Hello</b> World <font...>more text </font>");`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T17:28:02.130

首先，如果需要，您必须为画布提供您正在使用的所有字体`@font-face`。

然后你必须描述绘制文本所需的所有操作，记住画布只是一个绘图表面。您必须遍历这些步骤：

1.  指定要使用的字体：（与 CSS 字体属性的语法相同）

    ```
    context.font = "12px Arial bold" 
    ```

2.  测量将要绘制的字符串以知道放置下一个字符串的位置：

    ```
    context.measureText(txt).width 
    ```

3.  绘制文本（填充或描边）：

    ```
    context.fillText(txt, x, y) 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:17:34.703

这应该有帮助

[https://developer.mozilla.org/en/Drawing_text_using_a_canvas](https://developer.mozilla.org/en/Drawing_text_using_a_canvas)

尽管您需要从 html 中读取格式并使用此方法重新应用。

# php - jQuery克隆项目

> ID：10245331
> 
> 赞同：0
> 
> 时间：2012-04-20T11:27:59.180
> 
> 标签：php, jquery

我正在研究来自[http://tympanus.net/codrops/2010/03/22/interactive-image-vamp-up-with-jquery-css3-and -php/](http://tympanus.net/codrops/2010/03/22/interactive-image-vamp-up-with-jquery-css3-and-php/)

我的问题，如何使物品克隆并获得克隆位置？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:31:27.447

```
var cloned = $("#itemtoclown").clone(); //clone an element
$("body").append(cloned); //Insert it into DOM

//Access the positions like with
var positions = cloned.position();
console.log(positions.top); //Access the top 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:34:43.170

为了获得某个元素的位置，它必须附加到 HTML DOM 树中。否则你会得到 top: **0**和 left: **0**

```
$(document).ready(function(){
    position = $('div:first').clone().appendTo(document.body).position();
    alert( 'top:' + position.top + ' left: ' + position.left );
}); 
```

[jsFiddle 示例](http://jsfiddle.net/teneff/zAspw/)

# language-agnostic - 单线程/内核上的并行性如何可能？

> ID：10245337
> 
> 赞同：10
> 
> 时间：2012-04-20T11:28:17.770
> 
> 标签：language-agnostic, parallel-processing, computer-science

现代编程语言为其用户提供了作为一等公民的并行性和并发机制。我了解并行算法是如何编程的，并且可以很好地想象多核 CPU 上的两个线程如何并行运行。

然而，这些平台中的大多数还支持在单个线程上运行并行进程。

*   这些过程真的并行运行吗？
*   在汇编级别上，如何在单个线程上同时执行两个不同的例程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T11:36:34.203

TLTR; ：单个非超线程 CPU 内核上的并行性（在真正的**同时执行的意义上）是不可能的。**

* * *

**硬件**(<- EDIT) 可以在多个级别上实现并行。按粒度递减排序：

1.  多主机
2.  多处理器
3.  多核
4.  多线程（“超线程”，即“HT”）（编辑：我自愿省略几个 ALU 可以由同一个内核*驱动的向量化计算的情况）*

您的问题与在案例 3.（以防 HT 不可用/禁用）或 4 中运行两个软件线程有关。

*   在这两种情况下，进程实际上并不并行运行。由于在 CPU 级别执行的极快的上下文切换，用户有一种同时性的印象，这往往会按顺序将物理核心（相应线程）时间分配给一个或另一个软件线程

*   在这两种情况下，这些例程都不会同时执行，而是按顺序执行

分配给这两个例程中的每一个的相对优先级可以通过您赋予进程的“优先级”在各种操作系统上设置，这将由操作系统的调度程序处理，而调度程序又将分配 CPU 时间。

HTH。

要执行测试以更好地理解此主题，您可能需要搜索“cpu affinity”。这将让您在多核 CPU 的一个物理单核上运行一个双线程进程，并计算每个线程所花费的时间，同时修改它们的优先级等......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-12T19:04:03.557

是的，每个线程都有*并行*性，无论您使用哪种编程语言，您都可以免费获得它（尽管并行性的数量可能会有所不同）。

它被称为[指令级并行](http://en.wikipedia.org/wiki/Instruction_level_parallelism)。细节相当复杂，并且在不同的处理器微架构之间有所不同。

[Computer Architecture: A Quantitative Approach](https://rads.stackoverflow.com/amzn/click/com/B0067KU84U)是一本很棒的书，其中包括关于指令级并行性的一章，书中的示例教授了如何理性地思考工程。

查看以下链接以获取更多信息：

[http://en.wikipedia.org/wiki/Superscalar](http://en.wikipedia.org/wiki/Superscalar)

[http://en.wikipedia.org/wiki/Instruction_pipelining](http://en.wikipedia.org/wiki/Instruction_pipelining)

[http://en.wikipedia.org/wiki/Out-of-order_execution](http://en.wikipedia.org/wiki/Out-of-order_execution)

# asp.net - 下载 Office 文件会导致 aspx 页面在打开文件之前重新加载 3 次

> ID：10245342
> 
> 赞同：2
> 
> 时间：2012-04-20T11:28:40.287
> 
> 标签：asp.net, ms-office, download

我有一个允许从服务器下载文件的 Web 应用程序。文档可能是 Office 文件（.docx、pptx、.xslx）或 Pdf。

逻辑非常简单：从客户端单击时调用 Web 服务并调用传递所需参数的 aspx 页面 (Print.aspx)。打印页面调用 Web 服务来检索选定的文档二进制文件并将它们写入响应中：

```
protected void Page_Load(object sender, EventArgs e)
    {
        string fileName = Request.QueryString["fname"];
        if (string.IsNullOrEmpty(documentID) == false)
        {
            byte[] document = GetPhysicalFile(documentID); //Get the binaries
            showDownloadedDoc(document, fileName);
        }
    }

private void showDownloadedDoc(byte[] document, string fileName)
{
Response.Clear();
Response.ContentType = contentType;

Response.AppendHeader("content-disposition", string.Format("attachment; filename=\"{0}\"", fileName));
Response.BufferOutput = false;
Response.BinaryWrite(document);
Response.Close();

 } 
```

Pdf 文档在 Print.aspx 页面中打开，并且 aspx 页面仅加载一次。对于 Office 文件，Page_Load() 方法被调用 3 次。

在第一次打开/保存文档的对话框后，如果单击“打开”ic，则 Page_Load 被调用两次，然后文档最终在 MS Word 中打开。

有没有办法可以防止加载多个页面来打开这些文档？我想避免必须将文件保存在服务器端并重定向到该 URL，因为将为每个访问创建一个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:59:29.633

我怀疑您通过单击进行回发，然后避免让响应重播以通知 ViewState 命令已完成并更新页面上的内容。

因此，在下一次单击时，旧命令仍在等待并按页面重新发送，现在您有两个命令 - 两个调用，但是您再次不让返回再次更新视图状态，页面认为必须再次等待。

这在每次下一次调用时都会继续，后面的代码实际上是尝试运行所有前一个。

对此的解决方案是直接链接到处理程序，而不是使用 ajax 从后面的代码中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:21:05.047

这是一个带有 GenericHandler 的示例

```
public void ProcessRequest(HttpContext context)
{

  string filePath; // get from somewhere
  string contentType; // get from somewhere

  FileInfo fileInfo = new FileInfo(filePath);

  context.Response.Clear();
  context.Response.ContentType = contentType;
  context.Response.AddHeader("content-disposition", "attachment; filename=" + Path.GetFilename(filePath));
  context.Response.AddHeader("Content-Length", fileInfo.Length.ToString());
  context.Response.TransmitFile(filePath);
} 
```

# iphone - 如何从互联网下载音频/视频文件并存储在 iPhone 应用程序中？

> ID：10245345
> 
> 赞同：19
> 
> 时间：2012-04-20T11:28:49.873
> 
> 标签：iphone, ios, download, audio-streaming, audio-player

我正在为音乐开发 iPhone 应用程序。我想为用户提供一些选项，以便他们可以**通过流媒体收听歌曲/音乐，**或者他们可以**在应用程序中下载音乐**。我知道如何以编程方式在应用程序中流式传输音频文件。但是，我不知道如何**在应用程序中下载音频文件并**在下载后播放音频。用户还可以在下载时暂停下载。有可能吗？谁能指导我并为我分享任何示例代码或教程？我还有一个疑问：您能帮我在应用程序内创建一个文件夹吗？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-20T12:10:21.310

**创建文件夹**

对于每个应用程序，您都有一个`Documents Folder`. 您在应用程序中使用的任何文件都存储在这里。如果你想在这里创建更多目录，那么你会做这样的事情：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"MyNewFolder"];

if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
    [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:&error]; //Create folder if it doesn't already exist 
```

**下载**

如果你想从互联网上下载音频文件，那么你想看看一种异步方法。这意味着应用程序可以在您的下载在后台进行时继续执行操作。

为此，我建议您使用[ASIHTTPREQUEST](http://allseeing-i.com/ASIHTTPRequest/)。它非常适合执行任何下载请求，为您提供许多选项，例如*暂停*下载（根据您的要求）。

该网站提供了大量有关下载和存储文件的文档。查看[此](http://allseeing-i.com/ASIHTTPRequest/How-to-use)页面上的“*下载文件*”部分。

您只需执行以下操作：

```
NSURL *url = [NSURL URLWithString:@"http://www.fileurl.com/example.mp3"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setDownloadDestinationPath:[NSString stringWithFormat:@"%@",dataPath]]; //use the path from earlier
[request setDelegate:self];
[request startAsynchronous]; 
```

然后只需通过 ASIHTTPRequest 提供的委托方法来处理进度和完成。

**播放**

播放文件非常简单。一旦它在设备上并且您知道它在哪里，只需将其加载到音频播放器中即可。

这里有一个关于使用[AVAudioPlayer](http://mobileorchard.com/easy-audio-playback-with-avaudioplayer/)播放声音的很棒的教程。在您的情况下使用它的一个非常简单的示例是：

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/audiofile.mp3",dataPath];

NSError *error;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];

if (audioPlayer == nil)
    NSLog([error description]);
else
    [audioPlayer play]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:12:22.577

是的，您可以通过 AVAudioPlayer 下载音频文件和播放下载的文件。我不完全知道下载时如何暂停，但我已经下载了音频并播放了。您可以从 ASIHTTP Request 或其他下载。

您可以点击这些链接。

1.  [http://allseeing-i.com/ASIHTTPRequest/How-to-use#tracking_progress](http://allseeing-i.com/ASIHTTPRequest/How-to-use#tracking_progress)
2.  [关于使用 ASIHttpRequest 下载文件](https://stackoverflow.com/questions/3341658/about-download-file-using-asihttprequest)

# jquery - jQuery“堆叠”div（如乐高）

> ID：10245347
> 
> 赞同：1
> 
> 时间：2012-04-20T11:28:56.213
> 
> 标签：jquery, html, css, lego

我一直在做一些有趣的事情，像乐高一样堆叠我的 div。我已经能够使用 appendTo 和定位将其堆叠一次，但是如果您多次单击 div 会出现在一个意想不到的（对我而言）位置！

你可以在这里看到我的意思：[jsfiddle example](http://jsfiddle.net/Kyle_Sevenoaks/Dk585/2/)。（可以点击红色的div去掉堆叠的div）

有没有办法让 div 像第一个一样堆叠，像乐高塔一样彼此“叠放”？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:36:02.490

```
var lastPos = [-4, -3];
$('.cube, .cubeStack').click( function() {
    lastClicked = $('<div class="cubeStack"></div>')
       .css({top:lastPos[0], left:lastPos[1]})
       .appendTo($(this));

    lastPos[0] -= 1;
    lastPos[1] -= 1;
}); 
```

*   将`.cubeStack`位置设置为绝对
*   每次添加新堆栈时递减

[http://jsfiddle.net/Dk585/8/](http://jsfiddle.net/Dk585/8/)

> PS我发现它实际上很可爱<3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:34:32.920

远“堆叠” div 使用 prependTo()。不同之处在于 appendTo() 将元素添加为最后一个子元素，而 prependTo() 将元素作为第一个子元素添加到元素。

# java - 从 Tortoisesvn 获取以前的 java 代码

> ID：10245353
> 
> 赞同：0
> 
> 时间：2012-04-20T11:29:05.793
> 
> 标签：java, eclipse, tortoisesvn

我正在研究 TortoiseSVN，需要帮助解决一个问题。我正在处理的当前代码已更改，但我需要查看之前处理的代码（通过代码）。前面的代码也存在于 svn 位置。我需要知道如何在 Eclipse IDE 中查看该代码。也就是说，我想在eclipse中查看以前的java代码和新的java代码并进行比较。我已通过以下链接将 svn 安装到 eclipse 中：http: [//subclipse.tigris.org/update_1.6.x](http://subclipse.tigris.org/update_1.6.x)

请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:05:44.857

尝试将存储库制作到您的本地驱动器中。然后使用 svn checkout 将您的 svn 文件下载到该存储库文件夹中。您之前的代码必须在存储库文件夹中。然后使用现有源选项在 Eclipse 中打开一个新项目并找到您的本地存储库>您的项目文件夹。这将打开一个包含您以前的代码的新项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:07:16.447

在 Eclipse 中导入 svn 项目时，您有机会指定要导入的修订版（默认情况下，头修订版）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:11:16.323

感谢 Shiam Shabbir Himel 和 Estragon，但实际上我想查看以前的代码，我的意思是一段时间以前的代码，我没有结帐。虽然我找到了答案：您需要通过以下链接在 Eclipse 中安装 SVN：http: [//subclipse.tigris.org/update_1.6.x](http://subclipse.tigris.org/update_1.6.x)。SVN安装好后，需要在eclipse中导入最新的代码，然后在代码窗口右击选择：Compare with>>Revision。这将为您提供所有修订历史记录，您只需选择要与之比较的版本。它将向您显示两个屏幕，并在它们之间进行清晰的比较。它就是这样儿的！！

# jquery - jQuery Crossslide alternative? Photo moving into a direction

> ID：10245357
> 
> 赞同：0
> 
> 时间：2012-04-20T11:29:18.703
> 
> 标签：jquery, slideshow

I am developing a website for a church. As you can imagine, a church is quite tall in height. If you place a photo of that building into a horizontal banner of a size of let's say 700x200 there's no way you will see much of the building in the photo.

I can't really change much of the design anymore so I searched around and found Crossslide:

[http://tobia.github.com/CrossSlide/](http://tobia.github.com/CrossSlide/)

If you scroll down to the 2nd example (Slide and cross-fade) you will see that one image is shown and it goes from top to bottom so to speak. I tried implementing this script but failed and gave up after many, many hours. Another issue is that the creater of that plugin doesn't give any more support. So now I am hoping if you guys/girls have alternative idea's / plugin's.

We do not want to use Flash though. So jQuery would be the best solution. Does anyone know a nice plugin that does that CrossSlide did in the 2nd example?

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:59:26.767

我知道这很旧，但我猜你只是用 1 张图片来尝试它。

我自己刚刚搞砸了这个并且遇到了同样的问题，即使使用相同的图像添加了另一个模块并且它工作得非常好。

例子：

```
var $image = 'images/our_practice_banner.jpg'

$('#banner').crossSlide({
  loop: 1,
  fade: 1
}, [
  {
    src:  $image,
    from: 'top right 1.5x',
    to:   'center center 1x',
    time: 4
  },{
    src:  $image,
    from: 'center center 1x',
    to:   'center center 1x',
    time: 4
  }
]); 
```

# android - change custom listview item

> ID：10245360
> 
> 赞同：1
> 
> 时间：2012-04-20T11:29:29.877
> 
> 标签：android, listview

Infact i have a listview and it has "two images + two Textviews" as an item.

What i exactly want to do is that i want to change the textview's text when user clicks the image.

`public class ListViewCustomAdapter extends BaseAdapter implements OnClickListener{`

```
`ViewHolder holder;`
`ArrayList<Object> itemList;`

`public Activity context;`
`public LayoutInflater inflater;`

`public ListViewCustomAdapter(Activity context,ArrayList<Object> itemList) {`
    `super();`

    `this.context = context;`
    `this.itemList = itemList;`

    `this.inflater =` `(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);`
`}`

`@Override`
`public int getCount() {`
    `// TODO Auto-generated method stub`
    `return itemList.size();`
`}`

`@Override`
`public Object getItem(int position) {`
    `// TODO Auto-generated method stub`
    `return itemList.get(position);`
`}`

`@Override`
`public long getItemId(int position) {`
    `// TODO Auto-generated method stub`
    `return 0;`
`}`

`public static class ViewHolder`
`{`
    `ImageView plus;`
    `ImageView minus;`
    `TextView question;`
    `TextView score;`
`}`

`@Override`
`public View getView(int position, View convertView, ViewGroup parent) {`
    `// TODO Auto-generated method stub`

    `if(convertView==null)`
    `{`
        `holder = new ViewHolder();`
        `convertView = inflater.inflate(R.layout.listitem_row, null);`

        `holder.plus = (ImageView) convertView.findViewById(R.id.plus);`
        `holder.minus = (ImageView) convertView.findViewById(R.id.minus);`

        `holder.plus.setOnClickListener(this);`
        `holder.minus.setOnClickListener(this);`

        `holder.question = (TextView) convertView.findViewById(R.id.question);`
        `holder.score = (TextView) convertView.findViewById(R.id.score);`

                    `convertView.setTag(holder);`
    `}`
    `else`
        `holder=(ViewHolder)convertView.getTag();`

    `ItemBean bean = (ItemBean) itemList.get(position);`

    `holder.minus.setImageResource(bean.getminus());`
    `holder.plus.setImageResource(bean.getplus());`
    `holder.question.setText(bean.getquestion());`
    `holder.score.setText(bean.getscore());`

    `return convertView;`
`}`

`@Override`
`public void onClick(View v) {`
    `switch(v.getId()) {`
        `case R.id.minus:`
        `{`

            `int score = Integer.getInteger(holder.score.getText().toString());`
            `holder.score.setText(Integer.toString(score-1));`
            `break;`
        `}`
        `case R.id.plus:`
        `{`

            `int score = Integer.getInteger(holder.score.getText().toString());`
            `holder.score.setText(Integer.toString(score+1));`
            `break;`
        `}`
    `}}` 
```

`}`

I am getting null pointer exception. What i think the problem is, program is not able to understand that which textview it sould target, like there are multiple items in this listview, and each item contains this Score Textview item.

Plz help me out!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:16:23.267

感谢大家。

但是我的问题的解决方案非常简单和聪明。我已经解决了。

我已经使用 holder.minus.setTag( holder ); 针对每行列表视图的每个项目（按钮/图像视图），然后在该特定按钮/图像视图的 Onclick 侦听器中，我正在使用 holder = (ViewHolder)v.getTag(); 为 ListView 的该项目使用特定的 Holder :) 玩得开心

@Override public View getView(int position, View convertView, ViewGroup parent) {

```
 int type = getItemViewType(position);

        System.out.println("getView " + position + " " + convertView + " type = " + type);
        if (convertView == null) {
            holder = new ViewHolder();
            switch (type) {
                case TYPE_ITEM:
                    convertView = mInflater.inflate(R.layout.item, null);
                    holder.score = (TextView)convertView.findViewById(R.id.score);
                    holder.question = (TextView)convertView.findViewById(R.id.question);
                    holder.plus = (ImageView)convertView.findViewById(R.id.plus);

                    holder.minus = (ImageView)convertView.findViewById(R.id.minus); 
```

持有人.plus.setTag(持有人); holder.minus.setTag(holder);

```
 holder.minus.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {

                            holder = (ViewHolder)v.getTag();

                            String test =holder.score.getText().toString();

                    }
                        }
                    });

                    holder.plus.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {

                            holder = (ViewHolder)v.getTag();

                            String test =holder.score.getText().toString();

                                                    }
                    });

                    break;
                case TYPE_SEPARATOR:

                    convertView = mInflater.inflate(R.layout.heading, null);
                    holder.score = (TextView)convertView.findViewById(R.id.textSeparator);
                    holder.score.setText(mData.get(position));
                    break;
            }
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder)convertView.getTag();
        }
        switch (type) 
        {
            case TYPE_ITEM:

                String temp = mData.get(position);

                break;
            case TYPE_SEPARATOR:

                holder.score.setText(mData.get(position));

                break;
        }
        return convertView;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:52:40.430

而不是 convertView.setTag(holder);holder=(ViewHolder)convertView.getTag();` 使用 convertView.setId(holder); 和持有人=（ViewHolder）convertView.getId（）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T11:36:28.863

最好的办法是在创建 ListItem 时为其设置 onClickListener。然后，您可以指定 ListItem 在单击时执行的操作，以便您可以告诉它更改其 TextView 文本。

这是一个关于创建该设置的非常好的教程： [http ://www.ezzylearning.com/tutorial.aspx?tid=1351248&q=handling-android-listview-onitemclick-event](http://www.ezzylearning.com/tutorial.aspx?tid=1351248&q=handling-android-listview-onitemclick-event)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T11:46:22.417

首先，您没有将**onClick**侦听器分配给 Base 适配器中的任何视图。

其次，我建议您将**OnItemClickListener**用于您的 ListLiew ，而不是对行中的视图使用**onClick事件。**这非常简单，更适合用于行项目点击

 **例如：

```
private OnItemClickListener lstClick = new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view,
                 int position, long id) {

        //do whatever you want here
    }
}; 
```

并将其设置为您的 ListView 为：

```
listView.setOnItemClickListener(lstClick); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T11:38:21.013

不要使用 else 替换下面的代码

```
`if(convertView==null)`
    `{`
        `holder = new ViewHolder();`
        `convertView = inflater.inflate(R.layout.listitem_row, null);`

        `holder.plus = (ImageView) convertView.findViewById(R.id.plus);`
        `holder.minus = (ImageView) convertView.findViewById(R.id.minus);`

        `holder.plus.setOnClickListener(this);`
        `holder.minus.setOnClickListener(this);`

        `holder.question = (TextView) convertView.findViewById(R.id.question);`
        `holder.score = (TextView) convertView.findViewById(R.id.score);`

                    `convertView.setTag(holder);`
    `}
        `holder=(ViewHolder)convertView.getTag();`

    `ItemBean bean = (ItemBean) itemList.get(position);`

    `holder.minus.setImageResource(bean.getminus());`
    `holder.plus.setImageResource(bean.getplus());`
    `holder.question.setText(bean.getquestion());`
    `holder.score.setText(bean.getscore());`

    `return convertView;`
`}` 
```**

# objective-c - 自动排序绑定到 NSArrayController 的表列内容

> ID：10245362
> 
> 赞同：0
> 
> 时间：2012-04-20T11:29:42.577
> 
> 标签：objective-c, cocoa, sorting, nstableview, nsarraycontroller

**所以，这是我的情况：**

我有一个`NSMutableArray`（`NSMutableDictionary`实例）绑定到一个`NSArrayController`. 每个元素的`name`值依次绑定到第一个表列的值。

**事情是 ：**

我应该如何使它对特定表列（我的`NSTableView`）中的元素进行自动排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:11:25.760

该列是否可以通过用户操作进行排序？对于表列的值绑定，您可以启用 Creates Sort Descriptor 选项。这通常是默认启用的。您还应该在属性检查器中设置排序键和选择器。

如果您尝试在第一次加载窗口时对表格进行排序，您应该构造一个数组`NSSortDescriptors`并将其传递给数组控制器的`-setSortDescriptors:`方法。执行此操作的好时机是在`-windowDidLoad`窗口控制器中或在`-awakeFromNib`.

# pydev - Builtin functions and values being tagged as undefined

> ID：10245363
> 
> 赞同：2
> 
> 时间：2012-04-20T11:29:45.910
> 
> 标签：pydev

False, isinstance, list, int, setattr, range, and many others are being tagged as undefined. I"m running Aptana Studio 3 version 3.2.

I have run both of the interpreter updates:
- Window / Preferences / Interpreter - Python / Apply
- Properties / PyDev - PYTHONPATH / Apply
cleared error markers, etc. Nothing seems to work.

...Thanks,
...Ken

I am curious as to what happened, but my patience gave way to irritation, so I re-installed from scratch and all is well. I'm guessing the latest update from Aptana ate something that disagreed with it, but it's hard to tell. I did save the previous install in case someone has an idea for me to test.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:38:26.673

通常这意味着 PyDev 无法为 shell 创建 shell/sockets（通常意味着你要么启用了一些防火墙来阻止通信，要么你的 pythonpath 中配置错误）。

因此，如果您可以分享旧安装中的错误日志中是否有某些内容，那就太好了 - 但如果这一切都适用于您的新安装，我不确定是否值得花时间:)

也相关： http: [//pydev.org/faq.html#PyDevFAQ-WhenIdoacodecompletion%2CPyDevhangs%2CwhatcanIdo%3F](http://pydev.org/faq.html#PyDevFAQ-WhenIdoacodecompletion%2CPyDevhangs%2CwhatcanIdo%3F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-02T18:47:47.467

我有同样的问题并切换到pycharm。太棒了！

# objective-c - NSRunLoop 正在消耗大量的 cpu 和内存

> ID：10245365
> 
> 赞同：3
> 
> 时间：2012-04-20T11:29:50.427
> 
> 标签：objective-c, cocoa, nsrunloop, cfrunloop

我有一个无限循环来驱动我的工作线程。

```
-(void) myThread
{
    NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];   
    while(![myThread isCancelled])
    {
        [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:600]];
    }
    [pool release];
} 
```

但有时这些线程会占用大量 CPU（50-100%）和内存（1.5GB）。当我在这种状态下对应用程序进行采样时，我得到了以下跟踪

```
 453 +[NSDate dateWithTimeIntervalSinceNow:]
          309 -[__NSPlaceholderDate initWithTimeIntervalSinceReferenceDate:]
            295 CFDateCreate
              268 _CFRuntimeCreateInstance
                115 malloc_zone_malloc
                  64 __spin_lock
                    64 __spin_lock
                  43 szone_malloc
                    22 tiny_malloc_from_free_list
                      22 tiny_malloc_from_free_list
                    19 szone_malloc
                    2 spin_unlock
                      2 spin_unlock
                  4 malloc_zone_malloc
                  3 dyld_stub__spin_unlock
                    3 dyld_stub__spin_unlock
                  1 dyld_stub__spin_lock
                    1 dyld_stub__spin_lock
                99 __bzero
                  99 __bzero
                29 malloc_size
                  23 szone_size
                    23 szone_size
                  6 malloc_size
                13 CFAllocatorAllocate
                  13 CFAllocatorAllocate
                12 _CFRuntimeCreateInstance
              20 CFDateCreate
              4 CFDateGetTypeID
                4 CFDateGetTypeID
              3 memset
                3 memset
            14 -[__NSPlaceholderDate initWithTimeIntervalSinceReferenceDate:]
          60 CFAbsoluteTimeGetCurrent
            48 gettimeofday
              38 __gettimeofday
                21 __nanotime
                  21 __nanotime
                17 __gettimeofday
              10 gettimeofday
            11 CFAbsoluteTimeGetCurrent
            1 __gettimeofday
              1 __gettimeofday
          47 +[NSObject alloc]
            25 objc_msgSend
              25 objc_msgSend
            11 +[NSDate allocWithZone:]
              8 +[NSObject self]
                8 +[NSObject self]
              3 +[NSDate allocWithZone:]
            7 +[NSObject alloc]
            2 +[__NSPlaceholderDate immutablePlaceholder]
              2 +[__NSPlaceholderDate immutablePlaceholder]
            2 dyld_stub_objc_msgSend
              2 dyld_stub_objc_msgSend
          24 +[NSDate dateWithTimeIntervalSinceNow:]
          7 objc_msgSend
            7 objc_msgSend
          4 CFMakeCollectable
            4 CFMakeCollectable
          1 dyld_stub_gettimeofday
            1 dyld_stub_gettimeofday
          1 dyld_stub_objc_msgSend
            1 dyld_stub_objc_msgSend
        354 -[NSRunLoop(NSRunLoop) runUntilDate:]
          307 -[NSRunLoop(NSRunLoop) runMode:beforeDate:]
            153 _CFRunLoopFinished
              125 __CFRunLoopFindMode
                110 CFSetGetValue
                  85 __CFSetFindBuckets1b
                    36 __CFSetFindBuckets1b
                    17 CFEqual
                      9 __CFRunLoopModeEqual
                        7 CFEqual
                          7 CFEqual
                        2 __CFRunLoopModeEqual
                      8 CFEqual
                    16 __CFStringHash
                      16 __CFStringHash
                    12 _CFHash
                      12 _CFHash
                    3 CFHash
                      3 CFHash
                    1 __CFRunLoopModeHash
                      1 __CFRunLoopModeHash
                  24 CFSetGetValue
                  1 CFEqual
                    1 CFEqual
                14 __CFRunLoopFindMode
                1 _CFRuntimeSetInstanceTypeID
                  1 _CFRuntimeSetInstanceTypeID
              12 _CFRunLoopFinished
              9 __CFRunLoopModeIsEmpty
                8 CFSetGetCount
                  8 CFSetGetCount
                1 __CFRunLoopModeIsEmpty
              6 __spin_lock
                6 __spin_lock
              1 spin_unlock
                1 spin_unlock
            82 -[NSCFString isEqual:]
              23 -[NSCFString isEqual:]
              22 objc_msgSend
                22 objc_msgSend
              17 CFStringGetLength
                17 CFStringGetLength
              9 CFStringGetCStringPtr
                9 CFStringGetCStringPtr
              6 NSClassFromObject
                2 -[NSObject class]
                  2 -[NSObject class]
                2 NSClassFromObject
                2 object_getClass
                  2 object_getClass
              3 object_getClass
                3 object_getClass
              1 dyld_stub_objc_msgSend
                1 dyld_stub_objc_msgSend
              1 dyld_stub_object_getClass
                1 dyld_stub_object_getClass
            37 _CFRunLoop0
              16 _CFRunLoop0
              12 CFDictionaryGetValue
                10 __CFDictionaryFindBuckets1a
                  10 __CFDictionaryFindBuckets1a
                2 CFDictionaryGetValue
              8 pthread_main_np
                8 pthread_main_np
              1 spin_unlock
                1 spin_unlock
            12 -[NSRunLoop(NSRunLoop) runMode:beforeDate:]
            11 __spin_lock
              11 __spin_lock
            6 dyld_stub_OSSpinLockUnlock
              6 dyld_stub_OSSpinLockUnlock
            3 CFRunLoopGetCurrent
              3 CFRunLoopGetCurrent
            1 dyld_stub_CFStringGetCStringPtr
              1 dyld_stub_CFStringGetCStringPtr
            1 dyld_stub_pthread_self
              1 dyld_stub_pthread_self
            1 spin_unlock
              1 spin_unlock
          25 -[__NSCFDate retain]
            15 OSAtomicCompareAndSwapLongBarrier
              8 __compare_and_swap32
                8 __compare_and_swap32
              7 OSAtomicCompareAndSwapLongBarrier
            4 -[__NSCFDate retain]
            4 _CFRetain
              4 _CFRetain
            1 CFRetain
              1 CFRetain
            1 __compare_and_swap32
              1 __compare_and_swap32
          14 -[NSRunLoop(NSRunLoop) runUntilDate:]
          7 objc_msgSend
            7 objc_msgSend
          1 dyld_stub__CFRunLoopFinished
            1 dyld_stub__CFRunLoopFinished
        51 objc_msgSend
          51 objc_msgSend
        39 -[NSObject(NSObject) autorelease]
          28 __NSAutoreleaseObject
            24 __NSAutoreleaseObject
            4 _NSAPAddPage
              2 _NSAPAddPage
              2 malloc
                2 malloc_zone_malloc
                  2 szone_malloc
                    2 small_malloc_from_free_list
                      1 small_free_list_add_ptr
                        1 small_free_list_add_ptr
                      1 small_malloc_from_free_list
          8 NSAutoreleaseObject
            7 NSAutoreleaseObject
            1 objc_collecting_enabled
              1 objc_collecting_enabled
          1 -[NSObject(NSObject) autorelease]
          1 dyld_stub_pthread_getspecific
            1 dyld_stub_pthread_getspecific
          1 pthread_getspecific
            1 pthread_getspecific
        19 +[NSRunLoop(NSRunLoop) currentRunLoop]
          14 +[NSThread currentThread]
            13 +[NSThread currentThread]
            1 pthread_getspecific
              1 pthread_getspecific
          3 +[NSRunLoop(NSRunLoop) currentRunLoop]
          1 dyld_stub_pthread_getspecific
            1 dyld_stub_pthread_getspecific
          1 pthread_getspecific
            1 pthread_getspecific
        14 -[NSThread _rl]
          14 -[NSThread _rl]
        13 -[MessageSendingModule startSender]
        12 -[NSThread isCancelled]
          12 -[NSThread isCancelled]
        9 OSAtomicCompareAndSwapLongBarrier
          5 OSAtomicCompareAndSwapLongBarrier
          4 __compare_and_swap32
            4 __compare_and_swap32
        6 CFRelease
          6 CFRelease
        6 _CFRelease
          6 _CFRelease
        1 -[__NSCFDate release]
          1 -[__NSCFDate release]
        1 NSAutoreleaseObject
          1 NSAutoreleaseObject
        1 dyld_stub_objc_msgSend
          1 dyld_stub_objc_msgSend
      115 objc_msgSend
        115 objc_msgSend
      4 dyld_stub_objc_msgSend
        4 dyld_stub_objc_msgSend
      1 CFRelease
        1 CFRelease 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T11:44:00.257

一个空的 runloop（没有任何输入源或计时器的 runloop）将立即从`runUntilDate:`.

如果您想保留线程并为其运行循环提供服务，您可以在运行循环中添加一个计时器。

您是否有任何理由不使用 libdispatch 进行线程调度？这样可以避免自己管理线程和运行循环的麻烦。

# asp.net-mvc - Pre-Existing Code or Template for Intranet User Provisioning (i.e. role assignment) in MVC3

> ID：10245371
> 
> 赞同：0
> 
> 时间：2012-04-20T11:30:00.583
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-membership, roleprovider

When you create a new MVC project in Visual Studio, you get an AccountController that supports user self-registration and self-help changing passwords. This is great as a basic first step for a public internet site. But for an intranet site where an admin is responsible for creating users and assign them roles, is there any equivalent pre-existing template to start from?

To clarify, I am looking for a template that continues to use basic auth and that continues to use the ASP.Net membership and role services, as does the internet template, but provides UIs for user and role management that are intended for use by an administrator. The site is going to be on the internet but is not going to be "public" per se. There will be one or more sys-admin accounts that will have the ability to provision other users. The site will hosted by a yet-to-be-selected hosting provider.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:10:25.857

是的，它被称为 Intranet 应用程序。我知道，谁会认为 Intranet 应用程序是 Intranet 应用程序？

MVC3 有 3 个模板，Empty、Internet Application 和 Intranet Application。

![在此处输入图像描述](../Images/a344cfee3c47ea552255340d3a31490a.png)

# vbscript - 从 VB 脚本中清除 VBA 中的所有断点

> ID：10245374
> 
> 赞同：1
> 
> 时间：2012-04-20T11:30:16.643
> 
> 标签：vbscript, excel, vba

如何从 VB 脚本中清除 VBA 模块中的所有断点？

我需要确保我的 VBA 代码始终运行，但有时我调试它并忘记删除所有断点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:35:51.460

如果我关闭 Excel 并再次打开工作簿，这些点就消失了。

我已经在 Windows 7 上的 Office 2007 中确认了这一点。

谢谢你的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T12:39:53.367

您可以通过按 CTRL SHIFT F9 或从调试菜单中选择“清除所有断点”来清除所有断点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-07T16:09:35.413

坚持初始化 VBA 模块 -- SendKeys "^+{F9}"

# c# - VB.Net 相当于 C# 中的 ^ 运算符

> ID：10245375
> 
> 赞同：2
> 
> 时间：2012-04-20T11:30:18.817
> 
> 标签：c#, vb.net, operators

***VB.Net 中^***的等效运算符是什么（这是用于 C#）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:33:11.497

[Xor](http://msdn.microsoft.com/en-us/library/csw1x2a6.aspx)运算符是等效的。

> 对两个布尔表达式执行逻辑排除，或对两个数值表达式执行按位排除。

C#[`^`](http://msdn.microsoft.com/en-US/library/zkacc7k1.aspx)运算符是：

> 二进制 ^ 运算符是为整数类型和 bool 预定义的。对于整数类型，^ 计算其操作数的按位异或。对于 bool 操作数，^ 计算其操作数的逻辑异或；也就是说，当且仅当其操作数之一为真时，结果才为真。

* * *

如果您的意思是 VB.NET[电源运算符`^`](http://msdn.microsoft.com/en-us/library/zh100ckf.aspx)：

> 将一个数字提高到另一个数字的幂。

它没有 C# 等效项 - 您需要使用[`Math.Pow`](http://msdn.microsoft.com/en-us/library/system.math.pow.aspx).

* * *

有一些列表比较了两种语言的语法和特性——我喜欢[这个](http://www.harding.edu/fmccown/vbnet_csharp_comparison.html)和[这个](http://aspalliance.com/625)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:34:01.407

[Xor在此处](http://www.harding.edu/fmccown/vbnet_csharp_comparison.html)检查 C# 运算符的 VB.Net 等效项

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T11:34:20.350

[异或运算符](http://msdn.microsoft.com/en-us/library/csw1x2a6%28v=vs.100%29.aspx)

> 对两个布尔表达式执行逻辑排除，或对两个数值表达式执行按位排除。

```
result = expression1 Xor expression2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T11:32:37.507

`Math.Pow`应该做的伎俩！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T11:32:48.867

```
public static double Math.Pow(double x, double y) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T11:34:55.463

你的意思是 ^[按位 XOR](http://msdn.microsoft.com/en-us/library/zkacc7k1.aspx)吗？在这种情况下，它将是[Xor](http://msdn.microsoft.com/en-us/library/csw1x2a6.aspx)

# eclipse - 为 Eclipse 安装 GWT 插件

> ID：10245380
> 
> 赞同：1
> 
> 时间：2012-04-20T11:30:50.503
> 
> 标签：eclipse, gwt

我试图为 eclipse helios 安装 GWT 插件。当我尝试收到此消息时：

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Google Web Toolkit SDK 2.4.0 2.4.0.v201203300216-rel-r36 (com.google.gwt.eclipse.sdkbundle.e36.feature.feature.group 2.4.0.v201203300216-rel-r36) 缺少要求：用于 Eclipse 3.6 2.5.2.v201203300216-rel-r36 的 Google 插件（com.google.gdt.eclipse.suite.e36.feature.feature.group 2.5.2.v201203300216-rel-r36）需要 'org.eclipse.wst .css.core 0.0.0' 但找不到无法满足依赖关系：来自：Google Web Toolkit SDK 2.4.0 2.4.0.v201203300216-rel-r36 (com.google.gwt.eclipse.sdkbundle.e36.feature .feature.group 2.4.0.v201203300216-rel-r36）收件人：com.google.gdt.eclipse.suite.e36.feature.feature.group 2.5.2..

尝试使用本地文件并使用 eclipse 下载。似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:30:20.787

请参阅[https://developers.google.com/eclipse/docs/faq#wstinstallerror](https://developers.google.com/eclipse/docs/faq#wstinstallerror)

您必须先安装 WST，然后才能安装 Google Plugin for Eclipse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-05T16:05:09.760

此消息通常表示尝试连接到 Helios 更新服务器时出现问题。因为在安装 GWT 时，您需要从中获取额外的包。

在尝试为 Eclipse 安装 Google 插件时，我遇到了与 Luna 64bit eclipse 类似（相同？）的问题。这是我建议的解决方案： 1\. 转到首选项 -> 安装更新 -> 可用软件更新。2\. 删除 Helios 条目。退出日食。确保您的网络正常。重新打开日食。返回并重新添加 Helios 条目。点击重新加载。3\. 如果在步骤2中没有找到Helios条目，则只需添加它，无需执行else。

# android - How can we make the BroadcastReceiver respond when the Checkbox in the activity is enabled?

> ID：10245385
> 
> 赞同：1
> 
> 时间：2012-04-20T11:30:59.597
> 
> 标签：android, android-activity, checkbox, broadcastreceiver

I'm a newbie in Android.Here, I have a Checkbox in my Activity. What I actually want is, on enabling the Checkbox ,my BroadcastReceiver needs to respond. So for that what do I do? How is it done.

Can anyone give a sample code for doing that?

Can you please tell me whether I can do this:

```
public MyActivity extends Activity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

....
.....
.....
 //Check a condition and if its true declare a BroadcastReceiver like this here

class MyReceiver extends BroadcastReceiver 
{
    @Override
    public void onReceive(Context context, Intent intent) {
        // do something
    }
} 
```

Thanks in Advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:48:37.733

尝试这个

```
if(_cb.isChecked()){
  startService(serviceIntent);
  registerReceiver(broadcastReceiver, new IntentFilter(YourService.BROADCAST_ACTION));
}else{
  stopService(serviceIntent);
  unregisterReceiver(broadcastReceiver);
} 
```

并发布您的代码..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:35:47.497

这有点像问“我如何在打开电视时让电话响起？”。当然，这里的答案是必须有东西在监视电视，并且当它打开时，必须拨打您的电话号码。或者，在您的情况下，您需要在选中复选框时调用一个侦听器，并且作为响应，它必须广播一个 Intent，其操作和过滤器与您的广播接收器配置接收的内容相匹配。

# mfc - 应用程序退出时的访问冲突

> ID：10245391
> 
> 赞同：0
> 
> 时间：2012-04-20T11:31:22.840
> 
> 标签：mfc, visual-studio-2005

我在基于 MFC 的 VS 2005 C++ 应用程序的出口处出现访问冲突。它使用 MFC 作为共享库和多字节字符集选项。调用堆栈揭示了如下功能

```
CAfxStringMgr::Free(ATL::CStringData * pData=0x00e07c47) 第 154 行 + 0x9 字节 C++

__crtExitProcess
 退出（）
出口（）
__tmainCRTStartup()
WinMainCRTStartup()

```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:28:36.783

您可以尝试使用[ATL/MFC 跟踪工具](http://msdn.microsoft.com/en-us/library/ms241448%28v=vs.80%29.aspx)来诊断问题。

# json - jQuery Horizontal Stock Ticker with Continuous looping

> ID：10245393
> 
> 赞同：0
> 
> 时间：2012-04-20T11:31:27.657
> 
> 标签：json, jsf, jquery, jquery-plugins

I have following in the html page for the jStockticker.

```
<div id="ticker" class="stockTicker" style="width: 100%">
    <span class="quote">Stock Quotes: </span>
        <span id="tickerValues-AAPL">
              <span class="up"> 
                <span class="quote">AAPL</span>
                462.12
              </span>
          <span class="down">
                <span class="quote">AAPL</span>
            232.32
               </span>
          <span class="eq"> 
                 <span class="quote">AAPL</span>
          451.52
              </span>
        </span>
            <span id="tickerValues-GOOG">
              <span class="up"> 
                <span class="quote">GOOG</span>
                623.12
              </span>
          <span class="down">
                <span class="quote">GOOG</span>
            502.32
               </span>
          <span class="eq"> 
                 <span class="quote">GOOG</span>
          545.52
              </span>
        </span>
    </div> 
```

and with jQuery im updating the real time values with ajax

```
$(document).ready(function() {
  $("#ticker").jStockTicker({interval: 45});

         var i = setInterval(function ()
                {

                    $.ajax({
                          type : "POST",
                          url : 'http://localhost:8080/Data.xhtml',
                          dataType : "json",

                          success: function(data) {   

                                    $.each(data, function(i, item) {

                                       if(data[i].LastT == "+"){
                    $("span[id*='tickerValues-"+data[i].Symbol+"']").html("<span class=\"up\"><span class=\"quote\">"+data[i].Symbol+"</span> "+data[i].LastTPrice+"</span>");
                               }else if(data[i].LastT == "-"){
                            $("span[id*='tickerValues-"+data[i].Symbol+"']").html("<span class=\"down\"><span class=\"quote\">"+data[i].Symbol+"</span> "+data[i].LastTPrice+"</span>");
                   }else if(data[i].LastT == " "){
                    $("span[id*='tickerValues-"+data[i].Symbol+"']").html("<span class=\"eq\"><span class=\"quote\">"+data[i].Symbol+"</span> "+data[i].LastTPrice+"</span>");
                   }
                                    }); 

                                  $("#ticker").jStockTicker({interval: 45});

                                  },
                          error : function() {
                            alert("");
                          }
                        });
                    return false;
                }, 6000);

}); 
```

The issue is when an update occur the ticker scrolling goes back to the beginning and starts scrolling rather than getting the updated value while scrolling continuously.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T15:06:06.950

我意识到这是一个旧帖子，但也许这里看到的工具... [http://www.bitbenderz.com/stockticker/index.html](http://www.bitbenderz.com/stockticker/index.html) ... 可能更符合您的喜好。

# visual-studio-2010 - 试图加载格式不正确的程序集

> ID：10245394
> 
> 赞同：2
> 
> 时间：2012-04-20T11:31:29.373
> 
> 标签：visual-studio-2010, visual-studio-2008, sgen

我正在同时为不同的项目使用**VS2008**和**VS2010**。最近我尝试为实体项目生成序列化程序集，但无法通过 Visual Studio 2010 生成相同的程序集。这会引发以下错误：

```
An attempt was made to load an assembly with an incorrect format: X:\Dev\Proj\X.Entities\bin\Debug\X.entities.dll. 
```

这是我为实体项目设置的构建后事件

```
"$(FrameworkSDKDir)\Bin\sgen" /nologo /force $(TargetFileName)
copy "$(TargetDir)X.Entities.Serializer.dll" "$(SolutionDir)\X.Site\Bin" 
```

**我能够从 VS 2010 命令行生成 Serializer dll。** 对于VS2008项目；线路工作正常。但是，错误出现在 VS2010 项目上！

`FrameworkSDKDir`VS2010有不同的变量吗？如果没有，我该如何修改它以同时使用 VS2010 和 VS2008 项目？

顺便说一句，我使用 win 2008 Server 32 位操作系统，IIS 7 进行开发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:49:10.630

您指向的 sgen 用于 CLR 2.0。理想情况下，它将位于 C:\Program Files\Microsoft SDKs\Windows\v7.0A\bin。

“C:\Program Files\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools”下有一个 4.0 版本的 sgen 可以解决这个问题。

您的后期构建命令应该像这样开始：

```
"$(FrameworkSDKDir)\bin\NETFX 4.0 Tools\sgen" 
```

# jpa - Cannot create TypedQuery for query with more than one return

> ID：10245397
> 
> 赞同：2
> 
> 时间：2012-04-20T11:31:41.827
> 
> 标签：jpa

I am using the following JPA query and i am getting the java.lang.IllegalArgumentException: Cannot create TypedQuery for query with more than one return Exception.

```
TypedQuery<RaBdrRating> uQuery = 
  (TypedQuery<RaBdrRating>)entityManager.createQuery("
     SELECT r.activePackage,SUM(r.duration),SUM(r.charge),COUNT(r) 
     FROM RaBdrRating r WHERE r.callType = :callType 
     and r.startDate between :startDate and :endDate 
     GROUP BY r.activePackage",RaBdrRating.class);

uQuery.setParameter("callType", model.getCallType());
uQuery.setParameter("startDate",startDate);
uQuery.setParameter("endDate",endDate);
List<RaBdrRating> listOfPackages = uQuery.getResultList(); 
```

Can any one tell me what is wrong in my query.....I am new to JPA and i am not getting what is the problem and strucked up here.If any one have idea please tell me.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:40:16.587

我遇到同样的错误：Cannot create TypedQuery for query with more than one return using requested result type

解决方案：

有这样的查询：

```
Select e.fieldA, e.fieldB, e.fieldC From Entity e 
```

您必须使用查询中指定的参数声明构造函数：

```
 package somepackage;

    public class Entity {
    ...
       public class Entity() {}

       public class Entity(Type fieldA, Type fieldB, Type fieldC) {
           this.fieldA = fieldA;
           this.fieldB = fieldB;
           this.fieldC = fieldC;
       }
    ....
    } 
```

最后，修改您的查询

```
Select NEW somepackage.Entity(e.fieldA, e.fieldB, e.fieldC) From Entity e 
```

您正在指示如何创建对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:53:00.897

这似乎是这个错误：[https ://hibernate.onjira.com/browse/HHH-6304](https://hibernate.onjira.com/browse/HHH-6304)

它显然已在 4.1.5 版中修复。

# hibernate - JPA call a Stored Procedure in database that contains multiple out parameters

> ID：10245401
> 
> 赞同：0
> 
> 时间：2012-04-20T11:32:03.047
> 
> 标签：hibernate, postgresql, stored-procedures, jpa

I have a store procedure in database which contains multiple OUT parameters. I want to use JPA (with Hibernate) to get the resultset. Is there any way to get all results from the OUT parameters?

E.g. When using CallableStatement you can use ".registerOutParameter" for those parameters. I want the equivalent for JPA (if exists/possible).

Database used is PostgreSQL.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:39:47.800

JPA2.1 将根据您的需要提供 StoredProcedure 支持（尚未最终确定）。提供此 AFAIK 预览功能的唯一 JPA 实现是[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_1/jpa/stored_procedures.html)。其他 JPA impls 可能有自己的非标准支持，所以如果想走这条路，请查看您的手册

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-19T13:56:09.130

在这里，您可以通过实现自定义存储库轻松地从 Spring Data JPA 存储库调用存储过程。

1.  创建一个接口并定义您的方法。
2.  为它创建 impl 使用 @Repository 进行注释
3.  下面的方法实现下是ti实现的方式

    ```
     StoredProcedureQuery storedProcedure = entityManager.createStoredProcedureQuery("Your Stored Procedure name");

    // Set the parameters of the stored procedure.
    String firstParam = "first param name";
    storedProcedure.registerStoredProcedureParameter(firstParam, Long.class, ParameterMode.IN);
    storedProcedure.setParameter(firstParam, first Param value);

    // Set the second parameters of the stored procedure.
    String secondParam = "second parameter name";
    storedProcedure.registerStoredProcedureParameter(secondParam, String.class, ParameterMode.IN);
    storedProcedure.setParameter(secondParam, "second paramter value);

    //Your OUT parameters.
    storedProcedure.registerStoredProcedureParameter("First OUT parameter name", Integer.class, ParameterMode.OUT);
    storedProcedure.registerStoredProcedureParameter("OUT second parameter name", Integer.class, ParameterMode.OUT);
    storedProcedure.execute();
    //Replace MyObject with your actual POJO
    MyObject myObject= new MyObject();
    myObject.setFirstParameterOutput((Integer) storedProcedure.getOutputParameterValue("first OUT parameter name"));
    myObject.setSecondParameterOutput((Integer) storedProcedure.getOutputParameterValue("second OUT parameter name"));
    return MyObject; 
    ```

注意：即使您可以通过注释 @Procedure 从存储库本身调用也不行

```
@Procedure
public Integer procedure_name(String firstParameter, Date secondParameter);

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-24T00:10:21.917

这个解释是基于 Spring Boot + Spring Data JPA + Hibernate。

1.  在实体类中`@NamedStoredProcedureQuery`为您的存储过程定义一个，如下所示。`Example`在此示例中，假定存储过程具有`IN`,`INOUT`和`OUT`type 参数。

    ```
    @NamedStoredProcedureQueries({
        @NamedStoredProcedureQuery(
            name = "Example.myStoredProcedure",
            procedureName = "db.MY_STORED_PRODEDURE",
            parameters = {
                @StoredProcedureParameter(mode = ParameterMode.IN, name = "pInParam", type = String.class),
                @StoredProcedureParameter(mode = ParameterMode.OUT, name = "pOutParam", type = Date.class),
                @StoredProcedureParameter(mode = ParameterMode.INOUT, name = "pInOutParam", type = Integer.class),
            }
        )
    })
    @Entity
    public class Example {
        @Id
        Integer id;

        ...
    } 
    ```

2.  在类中定义一个方法，`ExampleRepository`只使用存储过程的`IN`和`INOUT`参数。正确设置参数`procedureName`和`value`的值`@Procedure`。此方法的返回类型应始终为`Map<String, ?>`.

    ```
    @Repository
    public interface ExampleRepository extends JpaRepository<Example, Integer> {
           @Procedure(value = "Example.myStoredProcedure", procedureName = "db.MY_STORED_PRODEDURE")
            Map<String, ?> executeMyStoredProcedure(@Param("pInParam") String pInParam, @Param("pInOutParam") String pInOutParam);

    } 
    ```

3.  在类中调用上面定义的方法，`ExampleService`如下所示。您现在可以使用步骤 1 中定义的名称从方法返回的值中检索多个`OUT`值（`INOUT`s 太） 。`Map<String, ?>``@StoredProcedureParameter`

    ```
    @Service
    public Class ExampleService {
       final ExampleRepository exampleRepository;

       public ExampleService(ExampleRepository exampleRepository) {
           this.exampleRepository = exampleRepository;
       }

       public void executeMyStoredProcedure(String someString, Integer someInteger) {
           Map<String, ?> result = exampleRepository.executeMyStoredProcedure(someString, someInteger);

           Date dateValue = (Date) result.get("pOutParam");
           Integer integerValue = (Integer) result.get("pInOutParam");

           ...

       }
    } 
    ```

# sql - SQL中的自定义顺序

> ID：10245403
> 
> 赞同：6
> 
> 时间：2012-04-20T11:32:07.807
> 
> 标签：sql, sql-server-2008

我们正在查询数据库以按以下方式检索数据

从表 1 中选择 a,b,...f，其中 id 在 (6,33,1,78,2)

我从查询中得到的结果按照 1、2、6、33、78 的顺序排列。

我希望结果以相同的顺序（6,33,1,78,2）。有没有办法以相同的顺序检索数据。

**编辑** **我正在使用 SQL 2008* *

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T11:35:35.983

添加此 order by 子句

```
order by case 
         when id = 6 then 1 
         when id = 33 then 2  
         when id = 1 then 3  
         when id = 78 then 4  
         when id = 2 then 5  
      end 
```

如果使用 MySQL，你可以这样做

```
ORDER BY FIND_IN_SET(id, '6,33,1,78,2') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T11:54:55.430

使用[表值构造函数](http://technet.microsoft.com/en-us/library/dd776382%28v=sql.105%29.aspx)：

```
SELECT a, b, ... f 
FROM 
        table1 
    JOIN
        ( VALUES 
            (1,  6), 
            (2, 33), 
            (3,  1), 
            (4, 78), 
            (5,  2) 
        ) AS ordering (position, id)
      ON  ordering.id = table1.id
ORDER BY position 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T11:39:36.573

我不知道背景，但通常我在一个额外的 orderIndex 列中实现这个自定义订单。这样我可以在插入表时手动管理顺序并将此列添加到默认查询的 ORDER BY 子句中

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T11:44:04.100

如果您使用 SQL Server，您可以使用`charindex`.

```
select A, B
from Table1
where ID in (6,33,1,78,2)
order by charindex(','+cast(ID as varchar(10))+',', ',6,33,1,78,2,') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T11:39:07.597

丑陋的解决方案：

```
select a,b,...f from table1 where id in 6
UNION
select a,b,...f from table1 where id in 33
and so on.. 
```

“更好”的解决方案：在您的查询中添加另一列，然后执行案例 6，然后执行 0，案例 33，然后执行 1，依此类推

```
select a,b,...f , case id when 6 then 0 when 33 then 1 <and so on> end
from table1 where ... 
```

然后按这个新列排序

# prolog - Prolog：在不使用 clp(FD) 的情况下查找所有 3x3 幻方

> ID：10245405
> 
> 赞同：0
> 
> 时间：2012-04-20T11:32:15.260
> 
> 标签：prolog, magic-square

我想找到所有可能的 3x3 幻方。

引用[英文维基百科](https://en.wikipedia.org/wiki/Magic_square)：

> 幻方是不同数字的排列（即每个数字只使用一次），通常是整数，在方格中，其中每行和每列中的数字以及主对角线和辅助对角线中的数字都相加最多相同的数字。

这是*一个*示例解决方案：

> 8 1 6
> 3 5 7
> 4 9 2

我如何编写一个 Prolog 程序来找到*所有*解决方案而不使用`library(clpfd)`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:57:56.083

这是一个使用 SWI-Prolog 但不是 clpfd 的解决方案：

```
square(L) :-
    setof(S, carre(S), L).

carre(L) :-
    L = [[A, B, C],
         [D, E, F],
         [G, H, I]],
    flatten(L, LF),
    numlist(1,9, LN),
    init(LF, LN),
    15 is A + B + C,
    15 is D + E + F,
    15 is G + H + I,
    15 is A + D + G,
    15 is B + E + H,
    15 is C + F + I.

init([H|T], L) :-
    select(H, L, L1),
    init(T, L1).
init([], []). 
```

# javascript - 如何重命名javascript预定义函数

> ID：10245407
> 
> 赞同：1
> 
> 时间：2012-04-20T11:32:15.580
> 
> 标签：javascript, function, jsp, rename

是否可以像使用 php 一样重命名 JavaScript 中的预定义函数：

```
<?php
rename_function('mysql_connect', 'connect' );
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:41:03.973

js也是可以的。看到这个函数。

```
function rename_function(obj, oldf, newf){
    obj[newf]=obj[oldf];
    delete obj[oldf];
} 
```

这里`obj`是函数的闭包。通常，如果您的函数没有闭包，则它位于 window 对象下。`rename_function(window, 'alert', 'al')`

# php - 同一 DIV 上的 Javascript 函数不起作用

> ID：10245408
> 
> 赞同：0
> 
> 时间：2012-04-20T11:32:17.150
> 
> 标签：php, javascript, ajax

我有两个在同一个 div 上的 Ajax 函数，第一个在完整页面完全加载时执行并调用 ccslider 方法，而不是第二个检查我在菜单上单击了哪个菜单 ID，以便为不同的动态加载不同的内容页。

我可以看到加载的内容（例如：图片），但不幸的是我在 ccslider 中看不到它们；似乎没有执行滑块。

但我知道这是可行的，因为如果我测试它，删除`swapContent()`函数并将我的 PHP 代码与 MySQL 查询放在我的主页中，图片就会加载到工作的 ccslider 中。

有关如何解决此问题的任何提示？

```
$(window).load(function(){
   $('#sliding').slider({
      _Options: {
      imageWidth: 300,
      imageHeight: 200
      }
   });
});

function swapContent(cv) {
var url = "testing_cover.php";
    $.post(url, {contentVar: cv}, function(data) {
       $("#sliding").html(data).show();
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:42:55.393

您可能必须在 swapContent() 函数中再次调用滑块方法。试试这个。

```
function swapContent(cv) {
  var url = "testing_cover.php";
  $.post(url, {contentVar: cv}, function(data) {
     $("#sliding").html(data).show();
     $('#sliding').slider({
        _Options: {
        imageWidth: 300,
        imageHeight: 200
         }
     });

 });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:48:48.230

我无法访问您正在使用的那种插件，但从看起来，您可能正在修改其功能所需的 HTML 结构。尝试将 HTML 插入到 #sliding 元素内的包装器中，而不是直接插入其中。

# android - 将前一个索引传递给微调器的 onItemSelectedListener

> ID：10245411
> 
> 赞同：0
> 
> 时间：2012-04-20T11:32:29.703
> 
> 标签：android, spinner, listener

我在我的应用程序中使用微调器。在微调器中选择索引后，我打开

一个新的活动，然后回到第一个。现在我的微调器正在显示之前选择的值，如果我再次选择相同的索引，则没有任何反应。

文档说`onItemSelectedListener`如果索引与以前的索引不同，则调用。当我回来时，我无法将其设置为默认值（0）。

那么有没有其他解决方案可以做到这一点？请帮我。谢谢。这是我的代码：

```
companyspin.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onNothingSelected(AdapterView<?> arg0) {
            }

            public void onItemSelected(AdapterView<?> arg0,
                    android.view.View arg1, int arg2, long arg3) {
                Object o = companyspin.getSelectedItem();
                network = CheckNetworkStateReceiver.isOnline(context);
                selectCompany = o.toString().trim();
                Data.homeCommunityValue = arg2;
                setCompanyList(arg2);
                flagCatageory = false;
                try {
                    tracker.trackEvent("Home", // Category
                            "Drop Down Selection", // Action
                            selectCompany, // Label
                            arg2); // Value
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });`` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:01:44.590

由于您希望在返回主要活动时选择第一项，您可以尝试

```
companyspin.setSelection(0); 
```

在`onCreate()`主要活动中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:41:29.463

您在微调器中选择新活动后立即开始？

只需从 onItemSele.... 侦听器中的活动所需的微调器中获取数据。放 `mySpinner.setSelection(your_position)`

在您的新活动开始之前。如果您希望它在微调器中保持相同的值，激活您的选择的按钮似乎更容易，并且对于用户来说更不容易出错，具体取决于选择的用途。

编辑：之后选择仍然相同，因此回调永远不会触发。您可以在位置（0）放置一个安慰剂对象，其中包含一些信息文本“选择此处...”，您可以在有效选择后使用 setSelection 返回该对象。如果它是一个有效的选择或安慰剂，只需在监听器中添加一个检查。

# c - 替换文本文件中的字符 - 逻辑错误？

> ID：10245415
> 
> 赞同：1
> 
> 时间：2012-04-20T11:32:40.943
> 
> 标签：c, argv

用户键入 $./replace i xy data.txt
**data.txt**包含“这是一个测试文件，仅测试文件”的字样。因此，所有 i 都将被 xy 替换，即 thxys xys 一个测试 fxyle，仅测试 fxyle

我想我已经很接近了。但是，我的代码没有将 i 替换为 xy，而是将 i 替换为 x。我认为错误在第 38 行 strcpy。但是，从第 30 行到第 40 行的逻辑是否正确？我想说....

对于第一个缓冲区（buf）中的每个元素， 如果 buf element == 'i'将
buf 元素复制到另一个缓冲区（temp），则一次一个字符 将 'xy' 复制到 'i'

```
#include <stdio.h>
#include <unistd.h>
#include <fcntl.h>
#include <string.h>
#include <stdlib.h> 

#define BUFFERSIZE 4096

/*replace i xy data.txt */

int main(int ac, char *av[])
{

    int in_fd, out_fd, n_chars, BufElement,j,x;
    ssize_t nread,nwrite;
    off_t newpos;
    char buf[BUFFERSIZE],temp[300];

        /*Open file containing original data*/
        if ( (in_fd=open(av[3], O_RDWR)) == -1 )
        {
            printf("Cannot open %s\n", av[3]);
            exit(1);
        }

        /*Read characters from file to buffer*/
        while ( (nread = read(in_fd , buf, BUFFERSIZE)) > 0 )
        {
            for (BufElement=0;BufElement < nread;BufElement++)
            {
                for (j=0; j < strlen(av[1]); j++)
                {
                    temp[BufElement] = buf[BufElement];
                    if (buf[BufElement] == av[1][j])
                        strncpy(temp+BufElement,av[2],strlen(av[2])); /*ERROR*/

                }

            }
        }

        printf("%s\n",buf);
        printf("%s\n",temp);

            newpos = lseek(in_fd, 0, SEEK_SET); 

            nwrite = write(in_fd,temp,36); 

            close(in_fd);
        }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:10:45.680

你只有一个增量`BufElement`，但是因为你的 dest-buffer 可能比输入更大或更小，你应该有两个计数器/指针；一个用于下一个写入目标缓冲区的位置，另一个类似于输入缓冲区。

**编辑**：伪代码：

```
while src[i]
  if match
    dest[j] = replacement
    j += strlen(replacement)
    i += 1
  else
    dest[j] = src[i];
    i += 1
    j += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:10:03.500

您`i`被替换为`xy`，但随后被您的第一个(buf)`y`中的字母替换为。`buf``temp[BufElement] = buf[BufElement]`

就像 Peter Miehle 所说，每次更换时都需要一个计数器来标记班次：

```
strncpy(temp+BufElement,av[2],strlen(av[2])) 
```

# php - 强制用户使用 Chrome/FireFox 而不是 IE

> ID：10245417
> 
> 赞同：0
> 
> 时间：2012-04-20T11:32:53.110
> 
> 标签：php

我有一个使用 PHP 和 HTML 构建的网站。如果用户使用 IE 浏览我的网站，我想显示一条消息：“请使用 Firefox 或 Google Chrome”而不是呈现索引页面。

可能吗？如果是这样怎么做？

请注意，我对 PHP 的了解并不那么先进。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:42:16.903

你也可以这样做：

```
<?php 
function using_ie(){
    $user_agent = $_SERVER['HTTP_USER_AGENT'];
    $ub =false;
    if(preg_match('/MSIE/i',$user_agent))
    {$ub = true;}
    return $ub;
}

if(using_ie()==true){
    //Show notice
}else{
    //Cont
}

?> 
```

不要忘记，IE 用户仍然拥有 30% 的市场份额，这意味着 3.3 分之一的用户将使用 IE [http://www.w3counter.com/globalstats.php](http://www.w3counter.com/globalstats.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-30T01:10:06.773

我会给你最好的答案

将此代码包含在`<head>`

```
<!--[if IE]>
<script>
  alert("Here you can write the warning box like this website is not supported by IE");
</script>
<script type="text/javascript">
window.location = "insert here the link of the webpage you want to redirect the users after clicking ok";
</script>
<![endif]-->
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T11:39:24.920

您可以使用[浏览器供应商 (Microsoft) 记录的条件注释](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)来做到这一点。

有了这些，您可以使 IE 用户可以访问隐藏在所有其他符合标准的浏览器的评论中的 HTML，例如下载其他浏览器的消息。您甚至可以完全隐藏页面的其余部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T11:39:57.457

这是可能的，但我只想告诉你，这真的不是解决问题的好方法。可以做到的方法是：

```
$browserinfo = get_browser();
$browser = $browserinfo['browser']

if ($browser == "Internet Explorer" || $browser == "InternetExplorer" || $browser == "IE") {
    include("path/to/your/errorMessage.php");
    exit(0);
} 
```

这确实需要browscap。另一种选择是：

```
$u_agent = $_SERVER['HTTP_USER_AGENT']; 
$ub = false; 

if(preg_match('/MSIE/i',$u_agent)) 
{ 
    include("path/to/your/errorMessage.php");
    exit(0);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T11:35:27.950

请按照此处的说明签出用户代理 [http://icfun.blogspot.de/2008/07/php-how-to-check-useragent.html](http://icfun.blogspot.de/2008/07/php-how-to-check-useragent.html)

我希望这是你正在寻找的;-)

# wpf - 使用右下角的标准“确定”和“取消”按钮创建标准登录窗口

> ID：10245419
> 
> 赞同：1
> 
> 时间：2012-04-20T11:32:57.243
> 
> 标签：wpf, silverlight, xaml

我正在寻找使用右下角的确定和取消按钮创建标准对话框/登录窗口的示例。

我不确定是否使用 StackPanels、Grids 或停靠面板。我知道使用 Canvas 通常是不正确的，因为您必须输入 x 和 y 值。

到目前为止，我创建的是 Ok 和 Cancel 按钮

```
 <StackPanel Orientation="Horizontal" 
            FlowDirection="RightToLeft" Height="32">
        <Button Width="72" TabIndex="45" Margin="2,2,2,2">Cancel</Button>
        <Button Width="72" TabIndex="40" Margin="2,2,2,2">OK</Button>
    </StackPanel> 
```

我要创建的窗口类型是标准对话框窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:19:36.720

我更喜欢以下标记：

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="2*"/>
        <ColumnDefinition Width="3*"/>
    </Grid.ColumnDefinitions>     

    <Grid Grid.ColumnSpan="2">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions> 

        <TextBlock VerticalAlignment="Center">Username:</TextBlock>
        <TextBlock VerticalAlignment="Center" Grid.Row="1">Password:</TextBlock>
        <TextBox Grid.Column="1"  />
        <TextBox Grid.Row=1"" Grid.Column="1"  />
    </Grid>

    <Button Grid.Row="1">Ok</Button>
    <Button Grid.Row="1" Grid.Column="1">Cancel</Button>
</Grid> 
```

是的，也可以将网格数量减少到 1，但我认为这没有意义。也可以使用 StackPanel 代替外部网格。

“最轻的标记”短语可以有不同的解释。对开发者来说最轻的就是最简单明了的。最轻的计算机是最快的初始化和渲染。至于给定的情况，区别实际上在于 1 个额外的布局容器。这确实不是进行优化的情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:03:04.827

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"></ColumnDefinition>
        <ColumnDefinition Width="*"></ColumnDefinition>
    </Grid.ColumnDefinitions>     
    <TextBlock grid.row=1 grid.column=0 text="user name" />
    <TextBlock grid.row=1 grid.column=1 text="password" />
    <TextBox grid.row=2 grid.column=0  />
    <TextBox grid.row=2 grid.column=1  />
    <Button grid.row=3 grid.column=0 text="OK" />
    <Button grid.row=3 grid.column=1 text="Cancel" />
  </Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T17:42:59.690

对于我的应用程序，我喜欢使用 ChildWindow。然后在每个页面上，我都可以验证用户是否经过身份验证，如果不是，则弹出子窗口。如果您在 silverlight 中使用导航类型的项目，这也是很好的使用书签。

```
 <toolkit:BusyIndicator IsBusy="False" Name="LoginBusy" >
        <Grid x:Name="LayoutRoot" Margin="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="189*" />
                <ColumnDefinition Width="189*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="65*" />
                <RowDefinition Height="32" />
                <RowDefinition Height="32" />
                <RowDefinition Height="26*" />
                <RowDefinition Height="35" />
            </Grid.RowDefinitions>
            <Button x:Name="OKButton" Content="OK" Click="OKButton_Click" Width="75" Height="23" HorizontalAlignment="Right" Margin="0,12,0,0" Grid.Row="4" Grid.Column="1" TabIndex="3" />
            <sdk:Label Grid.Row="1" Name="label1" HorizontalAlignment="Right" Content="Username" Margin="4"  />
            <sdk:Label Grid.Row="2" Name="label2" HorizontalAlignment="Right" Content="Password" Margin="4" />
            <TextBox Grid.Column="1" Grid.Row="1" Name="Username" Margin="4" Text="{Binding Username,Mode=TwoWay}" TextChanged="TextInserted" TabIndex="1" />
            <PasswordBox Grid.Column="1" Grid.Row="2" Name="Password" Margin="4" Password="{Binding Password,Mode=TwoWay}" PasswordChanged="TextInserted" TabIndex="2" />
            <TextBlock Grid.Column="1" Grid.Row="3" Height="37" HorizontalAlignment="Left" Visibility="Collapsed" Margin="19,13,0,0" Name="ErrorBlock" Text="Authentication Failed." VerticalAlignment="Top" Width="161" Foreground="Red" FontWeight="Bold" />
            <Button Grid.Row="4" Height="23" HorizontalAlignment="Left" Margin="46,4,0,0" Visibility="Collapsed" Name="button1" Content="CANCEL" VerticalAlignment="Top" Width="75" Click="CancelButton_Click" IsTabStop="False" />
            <Image Name="image1" Stretch="Fill" Source="Images/logo.png" />
        </Grid>
    </toolkit:BusyIndicator> 
```

这是我的子窗口的内容，没有标题位。请注意，我直接绑定到实现 InotifyPropertyChanged 的​​用户对象。此外，当 Web 服务执行验证时，我启用繁忙指示器，以便用户看到他的请求正在处理中。

干杯，

# c# - 从菜单中删除特定项目并通过asp.net中的内容页面替换新菜单？

> ID：10245421
> 
> 赞同：0
> 
> 时间：2012-04-20T11:33:03.973
> 
> 标签：c#, asp.net, master-pages

我的母版页中有一个菜单和标签，我想根据登录的用户类型对其进行更新。

首先，我从菜单中删除了一些运行良好但未显示在母版页中的 MenuItems。相反，旧菜单也只能看到有限用户的所有菜单项。当我调试标签文本时显示我设置的内容，但是当页面加载时它也没有更新。

我正在使用以下代码。

```
Label lbWelcomeMessage = new Label();
    protected void Page_Load(object sender, EventArgs e)
    {
        Master.FindControl("CAMenu").Visible = false;
    }

    protected void btnLogin_Click(object sender, EventArgs e)
    {
        string userName = txtUsername.Text;
        string password = txtPassword.Text;
        Common common = new Common();
        DataTable tab = new DataTable();
        tab= common.GetUserDetails(userName);
        string firstName = string.Empty;
        string userPassword = string.Empty;
        string RoleID=string.Empty;

        if (tab.Rows.Count == 1)
        {
            firstName = tab.Rows[0][2].ToString();
            userPassword = tab.Rows[0][4].ToString();
            RoleID = tab.Rows[0][5].ToString();
        }
        if (userPassword == password)
        {
            if (RoleID != "1")
            {
                Menu CAMenu = new Menu();
                CAMenu = (Menu)Master.FindControl("CAMenu");
                int count = CAMenu.Items.Count;

                for (int i = 3; i > 0; i--)
                {
                    string text = CAMenu.Items[i - 1].Text;
                    CAMenu.Items.RemoveAt(i - 1);
                }

                lbWelcomeMessage = (Label)Master.FindControl("lbLoginMessage");
                lbWelcomeMessage.Text = "Welcome"+" "+ firstName;
                ((SiteMaster)Page.Master).MyText = lbWelcomeMessage.Text;
                Response.Redirect("AdHocSMS.aspx");
            }
            else
            {
                lbWelcomeMessage = (Label)Master.FindControl("lbLoginMessage");
                lbWelcomeMessage.Text = lbWelcomeMessage.Text+" "+firstName ;
                Response.Redirect("NewTemplate.aspx");
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:03:08.493

我假设您已经在 login.aspx 中编写了此代码。单击登录按钮时，它会将您带到另一个页面，并且页面的所有生命周期都会再次运行。和母版页内容被重置。

这个问题的解决方案可能是。将此逻辑移至您的母版页代码，例如

```
protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        if (Session.Count == 0 || Session["Username"] == null)
            Response.Redirect("~/Login.aspx", true);
        CheckRole();
    }
    public void CheckRole()
    {
        if (System.Web.HttpContext.Current.Session.Count > 0)
        {
            tab= common.GetUserDetails(Session["Username"]);
            if (tab.Rows.Count == 1)
         {
                 firstName = tab.Rows[0][2].ToString();
                 userPassword = tab.Rows[0][4].ToString();
                 RoleID = tab.Rows[0][5].ToString();
        }

           if (RoleID != "1")
            {
                 Menu CAMenu = new Menu();
                 int count = CAMenu.Items.Count;

                 for (int i = 3; i > 0; i--)
                  {
                    string text = CAMenu.Items[i - 1].Text;
                    CAMenu.Items.RemoveAt(i - 1);
                  }

    //your label logic
            lbWelcomeMessage.Text = "Welcome"+" "+ firstName;
            ((SiteMaster)Page.Master).MyText = lbWelcomeMessage.Text;
            Response.Redirect("AdHocSMS.aspx");
        }
        else
        {
    //Logic
            Response.Redirect("NewTemplate.aspx");
        }
    }
    else
    {
        Session.Abandon();
        Response.Redirect("~/Login.aspx", true);
    }
} 
```

您必须在 Session 中放置一个 UserId 或 Username 这是一个缺点，但对于每个页面，您都不必担心任何事情。

对于生命周期，请阅读这篇文章[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

让我知道它是否解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:16:35.673

我所做的是这样的

在 Site.Mater 中：-

```
 public void CheckRole()
    {
        try
        {
            if (System.Web.HttpContext.Current.Session.Count > 0)
            {
                string firstName = string.Empty;
                // string userPassword = string.Empty;
                string RoleID = string.Empty;
                Common common = new Common();
                DataTable tab = new DataTable();
                string userName = (string)Session["UserName"];
                User user = new User(userName);
                tab = user.GetUserDetails(userName);

                if (tab.Rows.Count == 1)
                {
                    firstName = tab.Rows[0][1].ToString();
                    RoleID = tab.Rows[0][3].ToString();
                }

                if (RoleID != "1")
                {
                    int count = CAMenu.Items.Count;
                    if (count == 5)
                    {
                        for (int menuCount = 3; menuCount > 0; menuCount--)
                        {
                            string text = CAMenu.Items[menuCount - 1].Text;
                            CAMenu.Items.RemoveAt(menuCount - 1);
                        }
                    }
                    lbLoginMessage.Text = "Welcome," + " " + firstName;
                    loginStatus.Visible = true;
                }
                else
                {
                    lbLoginMessage.Text = "Welcome," + " " + firstName;
                    loginStatus.Visible = true;
                }

            }
            else
            {
                Session.Abandon();
                Response.Redirect("~/Login.aspx", true);
            }
        }
        catch (Exception ex)
        {
            new Logger().Log("ShortCom.SiteMaster.CheckRole()", ex.Message);
            Response.Redirect("~/Error.aspx");
        }
    } 
```

在 Login.Apsx 中：-

```
 protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            Master.FindControl("CAMenu").Visible = false;
            Master.FindControl("loginStatus").Visible = false;
        }
        catch (Exception ex)
        {
            new Logger().Log("ShortCom.Login.btnLogin_Click(object sender, EventArgs e)", ex.Message);
            Response.Redirect("~/Error.aspx");
        }
    }
    protected void LoadMessageBox(string MessageID)
    {
        try
        {
            messages = new GUIMessages();
            popupExtend = new ModalPopupExtender();
            lbMessage = (Label)Master.FindControl("label5");
            lbMessage.Text = messages.GetGUIMessage(GUIModule.Login, MessageID);
            popupExtend = (ModalPopupExtender)Master.FindControl("popupExtender");
            popupExtend.Show();
        }
        catch (Exception ex)
        {
            new Logger().Log("ShortCom.Login.LoadMessageBox(string MessageID)", ex.Message);
            Response.Redirect("~/Error.aspx");
        }
    }

    protected void btnLogin_Click(object sender, EventArgs e)
    {
        try
        {
            string userName = txtUsername.Text;
            string password = txtPassword.Text;

            if (userName == string.Empty && password == string.Empty)
            {
                LoadMessageBox("5");
                txtUsername.Focus();

                return;
            }
            if (userName == string.Empty)
            {
                LoadMessageBox("1");
                txtUsername.Focus();
                return;
            }
            else if (password == string.Empty)
            {
                LoadMessageBox("3");

                txtPassword.Focus();
                return;
            }

            User user = new User(userName);
            DataTable tab = new DataTable();
            tab = user.GetUserDetails(userName);
            string firstName = string.Empty;
            string userPassword = string.Empty;
            string RoleID = string.Empty;
            string userID = string.Empty;
            Session["UserName"] = userName;
            if (tab.Rows.Count == 0)
            {
                LoadMessageBox("6");
                txtPassword.Text = string.Empty;
                txtUsername.Text = string.Empty;
                txtUsername.Focus();
                return;
            }

            if (tab.Rows.Count == 1)
            {
                userID = tab.Rows[0][0].ToString();
                firstName = tab.Rows[0][1].ToString();
                userPassword = tab.Rows[0][2].ToString();
                RoleID = tab.Rows[0][3].ToString();
                Session["UserID"] = userID;
            }
            //if (firstName != userName)
            //{
            //    LoadMessageBox("2");
            //    txtUsername.Focus();
            //    return;
            //}
            //else
            {
                if (userPassword == password)
                {
                    Response.Redirect("~/Default.aspx");
                }
                else
                {
                    LoadMessageBox("4");
                    txtPassword.Focus();
                    return;
                }
            }
        }
        catch (Exception ex)
        {
            new Logger().Log("ShortCom.Login.btnLogin_Click(object sender, EventArgs e)", ex.Message);
            Response.Redirect("~/Error.aspx");
        }
    } 
```

# json - 时区与日期选择器和 UTC 时间混淆

> ID：10245425
> 
> 赞同：1
> 
> 时间：2012-04-20T11:33:14.417
> 
> 标签：json, datepicker, utc

我有一个带有 DatePicker 控件（来自 Kendo UI）的网页。

首先，我在新西兰，UTC +12:00

当我在日期选择器中选择 2012 年 10 月 31 日的日期时，它会存储在 JavaScript 对象中，如下所示：

2012 年 10 月 31 日星期三 00:00:00 UTC+1300

这似乎是错误的！

它被序列化为 JSON（使用 JSON.stringify）为 2012-10-30T11:00:00.000Z，这是错误的。

回到服务器，解析 JSON 时，会在 2012 年 10 月 30 日 23:00 输出。

有人可以向我解释一下吗？解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T21:22:57.480

我现在知道了 - 日期选择器控件工作正常，至于 10 月 31 日，新西兰将处于夏令时，所以在那个日期，我们将是 UTC +1300。

我的问题是我的服务器代码正在根据今天的日期转换为 UTC，而不是使用实际日期的偏移量。

# mysql - MySQL 狡猾的选择

> ID：10245428
> 
> 赞同：0
> 
> 时间：2012-04-20T11:33:16.557
> 
> 标签：mysql, greatest-n-per-group

无法理解如何进行选择：表结构：

```
id name value date
1 ivan    2    2010-01-01
2 ivan    3    2010-05-08
3 ivan    1    2009-04-14
4 sasha   2    2011-11-11
5 sasha   9    2012-04-04 
```

怎么获得？：

```
name value(in last time)
ivan  3
sasha 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:36:49.673

这是未经测试的，但应该可以工作：

```
SELECT
    name,
    MAX(value)
FROM
    structure
GROUP BY
    name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:11:07.670

此查询应该有效

```
select f.name, f.value, f.date
from (
   select id,name,max(date) as dat from tableName group by name
) as x inner join tableName as f on f.name = x.name and f.date = x.dat; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:37:08.777

```
SELECT DISTINCT name, value FROM table ORDER BY date DESC 
```

到目前为止，这就是我从您目前的描述中所理解的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T11:37:38.993

像这样的东西：

```
SELECT
    MAX(value),
    name
FROM
    Table
GROUP BY
    name 
```

# asp.net - 从代码隐藏向列表项添加类

> ID：10245433
> 
> 赞同：0
> 
> 时间：2012-04-20T11:33:40.417
> 
> 标签：asp.net, c#-4.0

我正在尝试从 cs 文件向我的分页添加类。但是css没有被应用到它上面。

```
if (pageCount > 0)
    {
        ListItem lp = new ListItem("Previous", "1", currentPage > 1);
        lp.Attributes.Add("class","pages previous");
        pages.Add(lp);
        //pages.Add(new ListItem("First", "1", currentPage > 1));
        for (int i = 1; i <= pageCount; i++)
        {
           // pages.Add(new ListItem(i.ToString(), i.ToString(), i != currentPage));
            ListItem li = new ListItem(i.ToString(), i.ToString(), i != currentPage);
            li.Attributes.Add("class", "pages");

            pages.Add(li);
        }
        ListItem ll = new ListItem("Next", pageCount.ToString(), currentPage < pageCount);
        ll.Attributes.Add("class", "pages next");
        pages.Add(ll);
        //pages.Add(new ListItem("Last", pageCount.ToString(), currentPage < pageCount));
    } 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:43:09.370

请参阅[以编程方式将 css 类添加到 ListItem](https://stackoverflow.com/questions/1030844/programmatically-add-css-class-to-listitem)

如果没有应用 CSS，那么发布生成的 HTML 以及您希望应用的 CSS 规则可能会更有用。

# php - 为 Drupal 创建一个简单的 SMTP 模块

> ID：10245434
> 
> 赞同：0
> 
> 时间：2012-04-20T11:33:40.780
> 
> 标签：php, email, smtp, drupal-modules

*我想写一个简单的 Drupal7 模块，其中包含以下代码，用于发送邮件。不要让我使用 Phpmailer 或其他人。你能帮忙吗？非常感谢！*

```
<?php

    include('Mail.php');

    $recipients = array( 'someone@example.com' ); # Can be one or more emails

    $headers = array (
        'From' => 'someone@example.com',
        'To' => join(', ', $recipients),
        'Subject' => 'Testing email from project web',
    );

    $body = "This was sent via php from project web!\n";

    $mail_object =& Mail::factory('smtp',
        array(
            'host' => 'prwebmail',
            'auth' => true,
            'username' => 'YOUR_PROJECT_NAME',
            'password' => 'PASSWORD', # As set on your project's config page
            #'debug' => true, # uncomment to enable debugging
        ));

    $mail_object->send($recipients, $headers, $body); 
```

# mysql - SQL - 连接两个表

> ID：10245439
> 
> 赞同：0
> 
> 时间：2012-04-20T11:34:13.310
> 
> 标签：mysql, sql, join

我有两张桌子

**用户：**（id，姓名）

**关系：**（user_id，relation_id）

User_id 和 relation_id 都是表中的 id `users`。

我想要的是恢复与特定用户成为朋友的所有用户。

这是我的 sql 命令：这不起作用：

```
SELECT *
FROM users
NATURAL JOIN relations
WHERE user_id IN (SELECT id FROM users WHERE name='John doe'); 
```

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:41:02.370

```
SELECT users.*
FROM relations
INNER JOIN users
  ON relations.relation_id = users.id
WHERE relations.user_id = 12345; 
```

您还可以使用子查询获取 id，就像您在示例中所做的那样：

```
WHERE relations.user_id IN (SELECT id FROM users WHERE name='John doe'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T11:56:45.547

要获取一个人拥有的所有关系，以下查询将起作用..

SELECT * FROM users us JOIN 关系 re ON us.id = re.relation_id WHERE re.user_id = ( SELECT id FROM users WHERE name = 'John doe' )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T11:39:05.183

试试这个

```
SELECT * FROM users as a 
JOIN relations as b on a.id = b.user_id 
WHERE b.user_id IN (SELECT id FROM users WHERE name='John doe') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T11:40:17.940

```
SELECT user_id
FROM relations re
JOIN users us
ON us.id = re.user_id
WHERE relation_id = (
    SELECT id
    FROM users
    WHERE name = 'John Doe'
) 
```

旁注：您不能`NATURAL JOIN`在此处使用，因为在两个表中没有具有相同名称和类型的列。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T11:42:59.733

这不只是通过您要查找的 userId 查询关系表的问题吗？

```
select * 
from relations
where  user_id = @IdYouArelookingFor or relation_id = @IdYouArelookingFor 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-20T11:45:53.360

```
SELECT friend.*
FROM users AS friend
  JOIN relations AS r
    ON r.relation_id = friend.id
  JOIN users AS u 
    ON u.id = r.user_id
WHERE u.name = 'John doe' ; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-20T11:48:56.700

朋友是具有相同relation_id的人吗？

```
SELECT a.name FROM users a JOIN relations b on a.id = b.user_id
WHERE b.relation_id in 
(select relation_id from relations where id = 'userid of user you are looking for') 
AND a.id !=  'userid of user you are looking for' 
```

如果您的逻辑不同，请告诉它是如何工作的

# git - 如何修复 Git 中不正确的推送提交？

> ID：10245445
> 
> 赞同：1
> 
> 时间：2012-04-20T11:34:26.240
> 
> 标签：git, git-push, git-commit, git-amend

我太笨了，我提交并推送到服务器，发现提交消息是错误的。所以我使用 --amend 来修复评论。但现在我不能再推送到服务器了：S

该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:36:12.603

您需要使用 -f 推送来强制推送，因为您正在重写历史：

```
git push -f origin master 
```

# c# - RegEx.Replace 在文本框中

> ID：10245454
> 
> 赞同：0
> 
> 时间：2012-04-20T11:34:40.617
> 
> 标签：c#, .net, regex, winforms, textbox

我有一个文本框和以下代码，只允许数字：

```
textBox1.Text = Regex.Replace(textBox1.Text, "[^\\d]", ""); 
```

现在，当我键入数字以外的另一个键时，焦点转到文本框的开头......我需要什么才能不让这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:36:56.290

不要问如何删除数字。问如何只为数字制作一个文本框：[如何制作一个只接受数字的文本框？](https://stackoverflow.com/questions/463299/how-do-i-make-a-textbox-that-only-accepts-numbers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:40:21.073

请改用[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)，指定[Mask](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx)属性。

# magento - 为什么我需要两次实例化产品？

> ID：10245457
> 
> 赞同：0
> 
> 时间：2012-04-20T11:34:53.537
> 
> 标签：magento

在下面的代码中，我打印了一个产品列表、一个库存列表，出于某种原因，使其工作的唯一方法是在循环它们的同时再次实例化产品。否则我会错过价格和库存。

有任何想法吗？

这是我的代码，

```
 $data = Mage::getModel('catalog/product')->getCollection()
                        ->addAttributeToSelect('name')
                        ->addAttributeToSelect('type_id')
                        ->addAttributeToSelect('sku')
                        ->addAttributeToSort('name', 'ASC')
                        ->addFilter('type_id', 'simple');

        ?><table dir="ltr" summary="Stock report table">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Type</th>
                    <th>SKU</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Stock</th>
                </tr>
            </thead>
            <tbody>
                <?php

        $i = 0;
        foreach($data as $product){

            $p = Mage::getModel('catalog/product')->load($product->getId());

            echo "<tr>";

            echo "<td>".$p->getId()."</td>";
            echo "<td>".$p->getTypeId()."</td>";
            echo "<td>".$p->getSku()."</td>";
            echo "<td>".$p->getName()."</td>";
            echo "<td>&pound;".number_format($p->getPrice(), 2)."</td>";
            echo "<td>".$p->getData('stock_item/qty')."</td>";

            $i++;
//            if($i == 1){ break; }
        }

        ?></tbody>
        </table>
        <?php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:59:06.037

看起来 Stock 不是 Catalog 模块的一部分！它有自己的名为 CatalogInventory 的模块，用于处理产品的 stock_item 部分。

所以我不得不添加以下内容，

选择我的收藏时

```
$data = Mage::getModel('catalog/product')->getCollection()
                ->addAttributeToSelect('name')
                ->addAttributeToSelect('type_id')
                ->addAttributeToSelect('sku')
                ->addAttributeToSelect('price')
                ->addAttributeToSort('name', 'ASC')
                ->addFilter('type_id', 'simple'); 
```

然后，在循环实例化库存项目并返回数量数据项目时，

```
$stock = Mage::getModel('cataloginventory/stock_item')->loadByProduct($product)->getQty(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:44:30.097

在加载集合之前，您应该添加这些属性（价格和库存状态）：

```
$data = Mage::getModel('catalog/product')->getCollection()
                    ->addAttributeToSelect('name')
                    ->addAttributeToSelect('type_id')
                    ->addAttributeToSelect('sku')
                    ->addAttributeToSort('name', 'ASC')
                    ->addFilter('type_id', 'simple')
                    ->addAttributeToSelect('price')
                    ->addAttributeToSelect('stock_status'); 
```

# ember.js - 计算属性未更新

> ID：10245461
> 
> 赞同：2
> 
> 时间：2012-04-20T11:35:02.230
> 
> 标签：ember.js

**问题：当控制器修改“pages”数组时，计算属性“tnop”没有得到更新，如下所示：**

## 相关书籍型号代码：

```
sections: []
tnop: function() 
{
var n = 0;
var sections = this.get('sections');
if (!sections)
  return n;

for (var i=0; i < sections.length; i++) {
  n += sections[i].pages.length;
}
return n;
}.property('sections.@each.pages.length') 
```

* * *

## 相关控制器代码：

```
var sections = EM.model.getPath('book.sections');
var aps = EM.model.getPath("ps");
$.each(sections, function(si, section) {
  var bp = [];
  if (json && json.ia) {
    bp = section.get("pages");
    var ns = aps[json.ssi];

      var lp = ns.get("lp");
      var rp = ns.get("rp");
    if (rp) {
      bp.insertAt(lp.number-1, rp);
      bp[lp.number-1] = rp;
    }
    if (lp) {
      bp.insertAt(lp.number-1, lp);
      bp[lp.number-1] = lp;
    }
  }
}); 
```

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T11:53:53.497

就目前而言，您无法直接观察到 @each 之外的深层嵌套路径。相反，您必须使用嵌套的 @each 代理，例如：

属性（'sections.@each.pages.@each.length'）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T21:48:00.277

使用以下代码解决了同样的问题：

```
filters: [],
content: [],

filterFun: function()
{

}.property('content.@each', 'filters.@each').cacheable(), 
```

# java - 用javascript更改网页元素的支持bean的值？

> ID：10245462
> 
> 赞同：2
> 
> 时间：2012-04-20T11:35:03.160
> 
> 标签：java, javascript, html, javabeans

如何从 javascript 更改支持 bean web 元素的值？

xhtml：

```
<h:form >
<input type="hidden" id="elementid" name="element" value="#{BackingBean.elementid}" /> 
```

豆子：

```
public class BackingBean implements Serializable {

protected String elementid = ""; 
```

javascript:

```
document.getElementById('elementid').value = 'new value'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:50:42.020

答案是 Javascript 中使用的元素的 ID 必须是正确的。因此，如果对象在表单中，则必须将表单名称添加到组件名称中。最好的方法是在浏览器中查看页面的源代码。

因此，在上面的示例中，应将 id 添加到表单中。并且输入也应该转换为 jsf，所以我们会用这个 id 调用 getElementById：'mainForm:formid:elementid'

document.getElementById('mainForm:formid:elementid').value = '新值';

# mysql - 从外键的引用行中选择字段到同一个表

> ID：10245469
> 
> 赞同：0
> 
> 时间：2012-04-20T11:35:27.413
> 
> 标签：mysql, select, foreign-keys

我有一个表，其中一些行有一个字段通过外键引用同一个表中的另一行。我想执行一个从引用行返回另一个字段而不是无意义的键值的选择。

有没有办法通过某种方式利用外键来做到这一点，或者我是否必须执行与字段匹配的连接，就好像不存在外键一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:51:12.783

您需要在外键上自连接表，为两个表副本指定不同的名称，然后选择所需的字段：

```
SELECT t2.field_you_want 
FROM your_table AS t1 JOIN your_table AS t2 ON t1.foreign_key = t2.primary_key
WHERE ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T19:52:29.830

感谢西蒙，就我而言，我有两张桌子并使用

```
SELECT s.student_name,s.student_profile_pic,a.attendance FROM 
smaced.studentattendanceclassx as a join smaced.student as s on s.student_id= a.student_attendancce
where a.school_attendance='school 2'
and a.tcsID_attendance='tcs 1'; 
```

# c# - 以编程方式区分高匿名代理、匿名代理、透明代理

> ID：10245471
> 
> 赞同：0
> 
> 时间：2012-04-20T11:35:34.950
> 
> 标签：c#, .net, proxy, transparentproxy

假设我有一个代理 IP 地址，但没有关于它的信息。

这是否可以从头开始知道它是哪种代理（远程网络服务器不知道我在代理后面，远程网络服务器知道我在代理后面但不知道我的 IP，远程网络服务器知道这两个信息） ?

是否有一个简单的测试来验证我在导航时知道哪些关于我的信息？

[编辑]

如果有人有一个简单的答案，比如“不，因为 [等]”，他会受到欢迎。我的第一个问题是“是否可行”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T01:01:06.523

Joshua Drake 在评论中提到的[Lagado Proxy Text是可行的。](http://www.lagado.com/proxy-test)现在重要的是要了解它是如何工作的。

它的操作非常简单：只是一个网站。因此，如果您有能力建立一个网站，该网站的功能完全相同，并且可以处理您要发送给它的所有流量，那么问题就解决了。

这样的网站应该做什么？检查客户端发送的标头。Lagado 的页面上提到了相关的：Via、Forwarded、X-Forwarded-For 和 Client-ip。

其余的应该很容易。

并回答您的第二个问题：请参阅[BrowserSpy](http://browserspy.dk/)。

# encryption - 如何在 ssl 密钥交换期间查看 Wireshark 中的加密密钥？

> ID：10245473
> 
> 赞同：1
> 
> 时间：2012-04-20T11:35:38.587
> 
> 标签：encryption, ssl, wireshark

在 Wireshark 中，我可以看到来自我的 PC 的加密数据。它不使用 diffie hellman 算法进行密钥交换，因为我只看到`Client Key Exchange`数据包但**没有** `Server Key Exchange`数据包。这意味着浏览器正在向服务器发送加密密钥（使用服务器的公钥加密）。
但我在该数据包（“客户端密钥交换”）中看不到任何加密数据。如何查看加密的密钥？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T13:25:48.360

你不会看到加密的共享密钥，它没有被交换。[使用RSA 认证密钥交换](https://www.rfc-editor.org/rfc/rfc4346#appendix-F.1.1.2)时，您可以看到加密的预主密钥。（请注意，使用 Ephemeral Diffie-Hellman 并不是看不到服务器密钥交换消息的唯一原因：它也可以使用`DH_DSS`密码`DH_RSA`套件，但据我所知这是不寻常的）。

如果您按照有关[使用 Wireshark 解密 SSL](http://wiki.wireshark.org/SSL)的说明进行操作，请使用“SSL 调试文件”选项将日志存储到文件中。（请注意，在较新版本的 Wireshark 中，用户界面在配置私钥的方式上略有变化。）

日志文件将包含预主密钥和共享密钥。

（顺便说一句，您当然需要服务器的私钥来执行此操作。）

使用 Wireshark 页面上提供的示例数据，您可以获得：

```
pre master encrypted[128]:
65 51 2d a6 d4 a7 38 df ac 79 1f 0b d9 b2 61 7d 
73 88 32 d9 f2 62 3a 8b 11 04 75 ca 42 ff 4e d9 
cc b9 fa 86 f3 16 2f 09 73 51 66 aa 29 cd 80 61 
0f e8 13 ce 5b 8e 0a 23 f8 91 5e 5f 54 70 80 8e 
7b 28 ef b6 69 b2 59 85 74 98 e2 7e d8 cc 76 80 
e1 b6 45 4d c7 cd 84 ce b4 52 79 74 cd e6 d7 d1 
9c ad ef 63 6c 0f f7 05 e4 4d 1a d3 cb 9c d2 51 
b5 61 cb ff 7c ee c7 bc 5e 15 a3 f2 52 0f bb 32 

pre master secret[48]:
03 00 ff 84 56 6d a0 fb cc fd c6 c8 20 d5 f0 65 
18 87 b0 44 45 9c e3 92 f0 4d 32 cd 41 85 10 24 
cb 7a b3 01 36 3d 93 27 12 a4 7e 00 29 96 59 d8 

master secret[48]:
1e db 35 95 b8 18 b3 52 58 f3 07 3f e6 af 8a a6 
ab c3 a4 ed 66 3a 46 86 b6 e5 49 2a 7c f7 8c c2 
ac 22 bb 13 15 0f d8 62 a2 39 23 7b c2 ff 28 fb 

key expansion[136]:
11 60 e4 e1 74 e9 a1 cf 67 f9 b7 bc ef bc a7 c7 
b3 f7 33 aa b2 42 d0 1c a6 4e fb e9 9b 13 dd 29 
63 aa 17 1f 47 71 95 71 08 e0 4b 8e e1 da 7b 4a 
5a f3 c2 32 bd e0 a5 82 6d 14 44 3a d6 cb 2d c0 
7d 57 be a8 37 de 5d d9 a1 07 fd 1b 22 71 b9 4b 
7a 1e 0f 70 37 14 97 0a f0 db 98 3b 7b 74 e3 2d 
51 66 2e 31 68 90 ac 6f e6 53 3c c9 5e 48 0c 05 
bc 9f 92 e7 f9 91 98 f5 95 1c c4 bf d9 cb 26 ef 
35 70 5e ad 21 22 3e f6 
Client MAC key[20]:
11 60 e4 e1 74 e9 a1 cf 67 f9 b7 bc ef bc a7 c7 
b3 f7 33 aa 
Server MAC key[20]:
b2 42 d0 1c a6 4e fb e9 9b 13 dd 29 63 aa 17 1f 
47 71 95 71 
Client Write key[32]:
08 e0 4b 8e e1 da 7b 4a 5a f3 c2 32 bd e0 a5 82 
6d 14 44 3a d6 cb 2d c0 7d 57 be a8 37 de 5d d9 
Server Write key[32]:
a1 07 fd 1b 22 71 b9 4b 7a 1e 0f 70 37 14 97 0a 
f0 db 98 3b 7b 74 e3 2d 51 66 2e 31 68 90 ac 6f 
Client Write IV[16]:
e6 53 3c c9 5e 48 0c 05 bc 9f 92 e7 f9 91 98 f5 
Server Write IV[16]:
95 1c c4 bf d9 cb 26 ef 35 70 5e ad 21 22 3e f6 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T12:25:46.313

很棒的文章在这里解释了 SSL 的工作原理，在握手期间任何时候都不会注意到私钥是通过网络发送的。

[http://4orensics.wordpress.com/2011/10/21/ssl-in-a-nutshell/](http://4orensics.wordpress.com/2011/10/21/ssl-in-a-nutshell/)

长话短说，没有服务器的私钥就无法解密 SSL 流（除非您为 NSA 或其他机构工作），但是您可能需要考虑在握手期间进入服务器和客户端之间，如果用户不这样做检查您在业务中出示的证书的有效性。

这是一个可以为您做的工具

[http://mitmproxy.org/](http://mitmproxy.org/)

值得注意的是，我强烈推荐关于 SSL Mitm（中间人）攻击的 sans 阅读室文章。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T05:21:17.097

直到最近，对 ClientKeyExchange 的剖析是这样的（1.6 及以下版本）：

```
TLSv1 Record Layer: Handshake Protocol: Client Key Exchange
    Content Type: Handshake (22)
    Version: TLS 1.0 (0x0301)
    Length: 134
    Handshake Protocol: Client Key Exchange
        Handshake Type: Client Key Exchange (16)
        Length: 130 
```

但是如果你使用[这个](http://www.wireshark.org/download/automated/)版本（1.7.2 以上），关键剖析将是这样的：

```
TLSv1 Record Layer: Handshake Protocol: Client Key Exchange
    Content Type: Handshake (22)
    Version: TLS 1.0 (0x0301)
    Length: 134
    Handshake Protocol: Client Key Exchange
        Handshake Type: Client Key Exchange (16)
        Length: 130
        RSA Encrypted PreMaster Secret
            Encrypted PreMaster length: 128
            Encrypted PreMaster: 761b1beac35e59de9a3bb9f74ebf9109b738e8ad346 
```

可以看到加密的pre-master：）

# java - 如何将字符串 Mac 地址转换为字节数组

> ID：10245474
> 
> 赞同：3
> 
> 时间：2012-04-20T11:35:40.787
> 
> 标签：java, string, bytearray, mac-address

我有字符串 MacAddress，我需要将其转换为字节数组。Java 不允许我进行直接转换并抛出 numberformat 异常。这就是我现在正在做的

```
clientMac[0] = (byte)Integer.parseInt(strCameraMacId.substring(0, 2)); 
```

我试着一步一步做

```
String mc = strCameraMacId.substring(0,2);
        int test = Integer.parseInt(mc);
        clientMac[0] = (byte) test; 
```

但是字符串 mc 包含一个值“08”，并且在将 int 转换为字节之后，我失去了零。我试图转换的mac地址是“08-00-23-91-06-48”，我最终可能会丢失所有的零。我会吗？有没有人知道如何解决这个问题？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T11:46:23.373

您不会丢失“0”。因为 a`byte`不是 a `string`， 8 和 08 是一样的。

但更重要的是您的代码中的这个*错误：*

您正在使用该`parseInt`方法。这会将您的地址解析为十进制整数。这不起作用，因为 MAC 地址在拆分时显示它们的方式通常是十六进制数字。例如，您可能会遇到“A8”而不是“08”。

您需要使用不同的方法：

```
Integer.parseInt(String s, int radix) 
```

通过`radix`as 16，你应该很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T11:44:01.917

零将隐含在字节值中。请记住 0x08 == 8。您应该能够将您的数组转换为 6 个字节的数组。您的方法很好，请记住，如果要将其转换回字符串，则需要让 Java 知道您要将每个数字填充回 2 个字符。这将使您的隐含零点恢复原状。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-11T18:33:46.563

[IPAddress Java 库](https://seancfoley.github.io/IPAddress/)将为您执行此操作，并将处理许多不同的 MAC 地址字符串格式，例如 aa:bb:cc:dd:ee:ff、aa-bb-cc-dd-ee-ff、aabb.ccdd.eeff ， 等等。披露：我是那个图书馆的项目经理。

以下是获取字节数组的方法：

```
 String str = "aa:bb:cc:dd:ee:ff";
    MACAddressString addrString = new MACAddressString(str);
    try {
         MACAddress addr = addrString.toAddress();
         byte bytes[] = addr.getBytes();//get the byte array
         //now convert to positive integers for printing
         List<Integer> forPrinting = IntStream.range(0, bytes.length).map(index -> 0xff & bytes[index]).boxed().collect(Collectors.toList());
         System.out.println("bytes for " + addr + " are " + forPrinting);
    } catch(AddressStringException e) {
        //e.getMessage provides validation issue
    } 
```

输出是：

```
 bytes for aa:bb:cc:dd:ee:ff are [170, 187, 204, 221, 238, 255] 
```

# oracle - 防止用户放弃自己的触发器

> ID：10245477
> 
> 赞同：1
> 
> 时间：2012-04-20T11:35:48.410
> 
> 标签：oracle

我在 Oracle DB 中创建了一个只读用户 A。（谁可以访问模式 X 但不能更改任何内容）然后我被要求授予用户 A 在模式 X 上创建表的权限。

但是据我所知，我可以给用户 A**创建任何表权限或****创建表**权限。其中一个是在他/她自己的模式上创建表，另一个是在所有模式上创建表，这不应该是首选。

所以我给了用户 A**创建任何表**的权限，然后创建了一个触发器，阻止用户 A 在 X 以外的模式上创建表。

但是，我需要将触发器创建为用户 A，现在用户 A 可以轻松删除该触发器，因为 A 是所有者。有什么办法可以防止用户 A 放弃触发器，即使他/她是所有者？

据我所知，用户 A 不需要删除任何触发器或管理数据库触发器权限，因为触发器已经是他/她自己的了。

有什么解决方法吗？或者我应该寻找一种替代方法来授予对其他模式的创建表权限。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:14:53.577

不，没有办法阻止用户删除它拥有的对象。

也没有办法直接允许用户 A 在用户 X 的模式中创建对象，除非您开始授予“ANY”权限。

一种可能的解决方法是在用户 X 的架构中创建一个存储过程，该存储过程将在用户 X 的架构中创建对象（立即执行），并将所述存储过程的 EXECUTE 权限授予用户 A。

因此，通过这种方式，用户 A 可以执行以下操作：

```
exec create_in_x_schema('create table blah(a number)'); 
```

该过程只会对传入的字符串立即执行。

```
A procedure that looks something like:
create or replace procedure create_in_x_schema(doit varchar2)
begin
  execute immediate doit;
end;
/ 
```

应该这样做。

（代码未经测试，但应该给你一些想法。）

希望有帮助。

# c# - Linq Query，搞砸了方法中的 where 子句

> ID：10245479
> 
> 赞同：5
> 
> 时间：2012-04-20T11:35:51.740
> 
> 标签：c#, silverlight, entity-framework, windows-phone-7, linq-to-entities

我有一个查询应该返回本周报告的总小时数。下面的代码返回正确的总小时数，但不是针对数据库中的特定用户。

```
 public int reportedWeekTime(int currentWeek, string username)
        {
            var totalTime = (from u in context.Users
                         from r in context.Reports
                         from w in context.Weeks
                         from d in context.Days
                         where u.Id == r.UserId && r.weekNr.Equals(currentWeek) && r.Id   == w.ReportId && w.DayId == d.Id
                         select d.Hour).DefaultIfEmpty(0).Sum();
            return totalTime;
        } 
```

第一种方法返回数字 24，这是正确的，但正如我所说，不适用于特定用户。

我正在尝试这样做，但它给了我 0 作为回报。我究竟做错了什么？

```
 public int reportedWeekTime(int currentWeek, string username)
        {
            var totalTime = (from u in context.Users
                         from r in context.Reports
                         from w in context.Weeks
                         from d in context.Days
                         where u.Id == r.UserId && r.weekNr.Equals(currentWeek) && r.Id == w.ReportId && w.DayId == d.Id && u.Username.Contains(username)
                         select d.Hour).DefaultIfEmpty(0).Sum();
            return totalTime;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:21:04.517

**更新**- 故障排除方法，使用 u.Username 属性、字符串用户名和比较创建一个新的匿名类。将更容易可视化正在发生的事情

```
var users = (from u in context.Users
             select new
             { 
               UsernameDb = u.Username,
               UsernameSearch = username,
               Comparison = u.Username.Contains(username),
             }).ToList(); 
```

**原来的**

我会稍微修改您的查询：

1.  使用`join`'s 而不是`from`'s with`where`子句
2.  去除那个`DefaultIfEmpty(0)`

（1）更多的是为了可读性，但我认为（2）是你的问题的原因

```
var totalTime = (from u in context.Users
                 join r in context.Reports on u.Id equals r.UserId
                 join w in context.Weeks on r.Id equals w.ReportId
                 join d in context.Days on w.DayId equals d.Id
                 where r.weekNr.Equals(currentWeek) && u.Username.Contains(username)
                 select d.Hour).Sum(); 
```

我还将确保以下查询返回结果。如果没有，那将是你的问题

```
var users = from u in context.Users
            where u.Username.Contains(username)
            select u; 
```

# batch-file - .bat 程序搜索和查找特定的 .exe 文件，然后运行该文件一次

> ID：10245486
> 
> 赞同：0
> 
> 时间：2012-04-20T11:36:16.233
> 
> 标签：batch-file

我想创建一个 .bat 文件，它可以帮助我在特定位置的文件夹中查找/搜索特定的 .exe 文件，然后运行该 .exe 文件。
例如

1.  在特定位置搜索文件，例如“\G:\data”，在这个主要位置有很多文件夹，在那个文件夹中有很多子文件夹。并且 .exe 文件在这些子文件夹之一中可用，并且位置我不知道。只有我知道 .exe 文件的名称。
2.  bat 文件需要搜索该文件，然后运行该文件。

以下两个无法找到并运行该文件。
第一个节目

```
pushd G:\data-a\test
FOR /F "delims=" %F IN ('dir /S /b autorun.exe') DO SET ExePath="%F"
%ExePath%e 
```

第二个节目

```
for /r G:\data-a\test %a in (autorun.exe) do "%a" 
```

从上述两个不同的程序中，我将其放入记事本中以创建两个不同的 .bat 文件并在另一个文件之后执行一个。但这无法找到并运行 autorun.exe 文件。

例如，我的 autorun.exe 文件的确切位置是

```
G:\data-a\test\test1\t1 and G:\data-a\test\test1\t1 
```

但在 G:\data-a\test 位置可能有几个子文件夹。

所以要一个一个运行autorun.exe，很难在子文件夹中找到文件。我想在程序中给出路径 G:\data-a\test ，所有文件都将在子文件夹中找到，然后自动运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:52:34.160

三列（如果包装在批处理文件中，则使用 %%F）。

```
pushd G:\data
FOR /F "delims=" %F IN ('dir /S /b something.exe') DO SET ExePath="%F"
%ExePath% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T19:48:20.960

或命令提示符下的一行：

```
for /r g:\data %a in (filename.exe) do "%a" 
```

如果调用目录路径中有空格，请使用 %a 的引号

# actionscript-3 - as3 child as movieclip - 不接受函数

> ID：10245490
> 
> 赞同：0
> 
> 时间：2012-04-20T11:36:39.900
> 
> 标签：actionscript-3, flash

这是我认为已回答的最后一个问题的后续，但由于某种原因，当我将舞台上的孩子（显示对象）视为影片剪辑时，我无法应用我想要的常用功能：

```
var mc1:MovieClip = this.getChildByName("mc1") as MovieClip;
if(mc1) {
    mc1.useHandCursor = true;
    mc1.buttonMode = true;
    mc1.addEventListener(MouseEvent.CLICK, fillDriveway);
} 
```

任何智慧都将不胜感激......并且很抱歉提出与以前类似的问题......

提前致谢。

编辑：来自该项目的 AS 的更多代码以获取上下文：

```
import flash.display.*

ImageUploader.visible = false;

function showUploader(e:MouseEvent):void {
    ImageUploader.visible = true;
    ImageUploader.gotoAndPlay(2);
}

pic.addEventListener(MouseEvent.CLICK,addNewPoint);

var n:Number = 0;
var joinPointsArray:Array = new Array;

function addNewPoint(e:MouseEvent):void {
    n++;
    pointNo.text = String(n);
    if(n==1){
        var nextPoint:MovieClip = new mcstart();
        addChild(nextPoint);
        nextPoint.name = "mc"+pointNo.text;
        nextPoint.x = e.target.mouseX;
        nextPoint.y = e.target.mouseY;
    }else{
        var nextPoint2:MovieClip = new newPoint();
        addChild(nextPoint2);
        nextPoint2.name = "mc"+pointNo.text;
        nextPoint2.x = e.target.mouseX;
        nextPoint2.y = e.target.mouseY;
    }

    var joinPoints:MovieClip = new MovieClip();
    this.addChild(joinPoints);
    joinPointsArray.push(joinPoints);
    joinPoints.graphics.lineStyle(0.5,0xFF0000);
    joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
    for(var i:int=2; i<=n; ++i){
        joinPoints.graphics.lineTo(this.getChildByName("mc"+i).x, this.getChildByName("mc"+i).y);
    }
}

pic.addEventListener(MouseEvent.CLICK, addNewPoint);

function fillDriveway(eventObject:MouseEvent) {
    var joinPoints:MovieClip = new MovieClip();
    this.addChild(joinPoints);
    for(var p:int=0; p<(joinPointsArray.length); ++p) {
        joinPointsArray[p].alpha = 0;
    }
    this.getChildByName("mc1").alpha = 0;
    joinPoints.graphics.beginFill(0xFFFFFF, 0.7);
    joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
    for(var m:int=2; m<=n; ++m){
        joinPoints.graphics.lineTo(this.getChildByName("mc"+m).x, this.getChildByName("mc"+m).y);
    }
    joinPoints.name = "driveshape";
    filledDrive.text = "filled";
}

function undoit(eventObject:MouseEvent) {
    if(n > 0) {
        if(filledDrive.text.indexOf("filled") != -1) {
            this.removeChild(this.getChildAt(this.numChildren -1));
            filledDrive.text = "";
            }else{
            this.removeChild(this.getChildAt(this.numChildren -1));
            this.removeChild(this.getChildAt(this.numChildren -1));
            n--;
            pointNo.text = String(n);
        }
    }
}

function maskDrive(eventObject:MouseEvent) {
    if(filledDrive.text.indexOf("filled") != -1) {
        var finishA:MovieClip = new finishMC();
        this.addChild(finishA);
        finishA.x = 310;
        finishA.y = 100;
        finishA.mask = getChildByName("driveshape");
        finishA.gotoAndPlay(2);
    }
}

//BTN RollOvers
function btn1over(myEvent:MouseEvent) {
    btn1.gotoAndPlay(2);
}
function btn1out(myEvent:MouseEvent) {
    btn1.gotoAndPlay(11);
}
function btn2over(myEvent:MouseEvent) {
    btn2.gotoAndPlay(2);
}
function btn2out(myEvent:MouseEvent) {
    btn2.gotoAndPlay(11);
}
function btn3over(myEvent:MouseEvent) {
    btn3.gotoAndPlay(2);
}
function btn3out(myEvent:MouseEvent) {
    btn3.gotoAndPlay(11);
}
function undoover(myEvent:MouseEvent) {
    undo.gotoAndPlay(2);
}
function undoout(myEvent:MouseEvent) {
    undo.gotoAndPlay(11);
}

//BTN Calls
btn1HIT.addEventListener(MouseEvent.CLICK, fillDriveway);
btn1HIT.addEventListener(MouseEvent.ROLL_OVER, btn1over);
btn1HIT.addEventListener(MouseEvent.ROLL_OUT, btn1out);
btn1HIT.buttonMode = true;
btn1HIT.useHandCursor = true;
btn2HIT.addEventListener(MouseEvent.CLICK, maskDrive);
btn2HIT.addEventListener(MouseEvent.ROLL_OVER, btn2over);
btn2HIT.addEventListener(MouseEvent.ROLL_OUT, btn2out);
btn2HIT.buttonMode = true;
btn2HIT.useHandCursor = true;
btn3HIT.buttonMode = true;
btn3HIT.useHandCursor = true;
btn3HIT.addEventListener(MouseEvent.ROLL_OVER, btn3over);
btn3HIT.addEventListener(MouseEvent.ROLL_OUT, btn3out);
btn3HIT.addEventListener(MouseEvent.CLICK, showUploader);
undoHIT.addEventListener(MouseEvent.CLICK, undoit);
undoHIT.addEventListener(MouseEvent.ROLL_OVER, undoover);
undoHIT.addEventListener(MouseEvent.ROLL_OUT, undoout);
undoHIT.buttonMode = true;
undoHIT.useHandCursor = true;

var mc1:MovieClip = this.getChildByName("mc1") as MovieClip;
if(mc1) {
    mc1.useHandCursor = true;
    mc1.buttonMode = true;
    mc1.addEventListener(MouseEvent.CLICK, fillDriveway);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:58:21.737

您确定影片剪辑是放在舞台上还是实际转换为影片剪辑？试试`stage.getChildByName()`。你把这段代码放在哪里了？在框架内还是在主文档类内？为了确保您可以检查孩子们是否已添加到舞台上，并查看他们的名字。您可以使用此代码

```
 for ( var i :int = 0; i < this.numChildren; i++ )
        {
            babe = this.getChildAt( i );
            if ( babe is MovieClip)  {
                trace( babe.name);
            }
        } 
```

这个我也看到了，不知道好不好用。

```
if (stage.contains(mc1)) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:01:49.340

哇！弄清楚了！

通过弹出

```
var mc1:MovieClip = this.getChildByName("mc1") as MovieClip; 
```

在我的 AS 结尾处，我指的是子“mc1”在它存在之前 - 在用户单击“pic”电影剪辑上的某个位置之前它不会被创建。所以解决方案是将我对“mc1”的操作（包括将其声明为 MovieClip）放入一个单独的函数中：

```
function createstartEndMC():void {
    var startEnd:MovieClip = (this.getChildByName("mc1")) as MovieClip;
    startEnd.useHandCursor = true;
    startEnd.buttonMode = true;
    startEnd.addEventListener(MouseEvent.CLICK, fillDriveway);
} 
```

然后在创建“mc1”子项后调用此函数：

```
function addNewPoint(e:MouseEvent):void {
    n++;
    pointNo.text = String(n);
    if(n==1){
        var nextPoint:MovieClip = new mcstart();
        addChild(nextPoint);
        nextPoint.name = "mc"+pointNo.text;
        nextPoint.x = e.target.mouseX;
        nextPoint.y = e.target.mouseY;
        createstartEndMC();
    } 
```

最后它工作了，“mc1”（或者我称之为“startEnd”，一旦它被创建并制作成一个 MC）最终表现得像一个正常的时间线 MC 应该的！

我很高兴-感谢您的所有指导！

凸轮

# reporting-services - SSRS 2005 中的条件列可见性

> ID：10245492
> 
> 赞同：3
> 
> 时间：2012-04-20T11:36:47.627
> 
> 标签：reporting-services, reportingservices-2005

这可能吗？

我在 TableColumn 可见性隐藏字段中创建了一个表达式，它在 BIDS（商业智能开发工作室）预览中运行良好，但在 Internet Explorer 中部署和查看时不起作用。

```
=IIF(Parameters!n_CURRENTPERIOD.Value<Month(Now),true,false) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-22T23:51:13.313

简短的回答是肯定的，这是可能的。

我敢打赌，您的问题不在您的 SSRS 2005 环境中。就像@MikeTWebb 所说，你确定你指向正确的数据源吗？另外，你的问题很薄。你试过其他浏览器吗？您是否尝试过 VS2005 Express，它是免费的，在我看来应该是您应该使用的，而不是 BIDS。

但是，这样做的方法非常简单：

SSRS2005 中的大多数控件都有一个`Visibility`属性，并且可以设置，正如您所知道的`IFF()`功能。

例如，查看我的一份报告的 RDL，我控制 TableRow 对象的可见性，如下所示：

```
 <Details>
              <TableRows>
                <TableRow>
                  <Visibility>
                    <Hidden>=IIf(RowNumber("table1_Group1") &lt; 5 And Fields!CourseName.Value = "Enterprise",True,False)</Hidden>
                  </Visibility>
                  <TableCells>
..etc.. 
```

在 SSRS2005 本身中，只需指向您需要有条件地隐藏的对象并在那里放置一个类似的 IFF() 函数调用。

[![在此处输入图像描述](../Images/d5770d45223e814545c0d9dd29a2633a.png)](https://i.stack.imgur.com/oWKfI.jpg)

[![在此处输入图像描述](../Images/bab623b5871fb7503f2f5f68ac8be7c0.png)](https://i.stack.imgur.com/omIZq.jpg)

我相信你知道这一切，但为了确保直接回答你的问题，答案是肯定的！

您只需要了解有关您尝试运行它的环境的更多信息。

# java - 来自Java的mysql执行时间

> ID：10245493
> 
> 赞同：1
> 
> 时间：2012-04-20T11:36:49.297
> 
> 标签：java, mysql, optimization

我正在回顾我前一段时间构建和发布的应用程序。当时优化的时间不多，但我现在有一些时间来优化它。

我有一个 java DAL 类，它从数据库中加载一个包含项目的对象，如下所示：

```
sql = "SELECT COUNT(*) FROM projects";
count = execute(sql) // this returns the count

sql = "SELECT p.*, m.name AS clientName"
...
sql = sql + " FROM projects p"
sql = sql + " LEFT JOIN clients m ON p.clientID = m.id";

Project[] p = execute(sql, count); //this returns Project array 
```

我遇到的问题是计数脚本需要超过 4 秒才能运行，而选择脚本需要大约 2 秒。虽然这是异步传递到表现层的，但是6秒的等待时间还是很长的（projects表只有300条左右的记录）。

我在想我可以通过添加存储过程并可能在脚本中添加额外的过滤器来改进这一点，例如“where active=1”。但我想知道是否有人可以提出更好的整体解决方案？

谢谢

编辑：我一直在用 System.nanoTime() 做一些进一步的测试，我发现计数脚本的 4 秒（3.8 秒）中最大的一块发生在执行函数中的一行中：

```
Connection c = getCon(); 
```

getCon 函数执行此操作：

```
if (con == null) {
try {
Class.forName("com.mysql.jdbc.Driver").newInstance();
con = DriverManager.getConnection(db_connect_string,db_userid,db_password);
}
... 
```

所以我现在有一个新问题——为什么需要 3.8 秒才能获得 db 连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:40:51.497

尝试使用`SELECT COUNT(1) FROM projects`而不是`COUNT(*)`. 众所周知，它可以提高一些性能。

### 编辑

关于您的编辑，看起来您没有使用连接池机制。如果你不使用一个，每次调用都会尝试打开一个新的连接，这可能会很昂贵。另一方面，连接池维护一个连接池，随时可以使用。如果您`connection.close()`在代码中执行 a ，它只会进入池以供重用，而不是完全断开连接。

您可能想要查看常用连接池的[列表。](http://java-source.net/open-source/connection-pools)我更喜欢 DBCP 或 C3P0。

注意：如果您使用 WebSphere / WebLogic / JBoss 等应用程序服务器，则无需担心这一点，因为它已经为您处理好了。您所要做的就是让您的应用程序使用`DataSource`s 而不是直接`DriverManager.getConnection()`在您的应用程序服务器上配置连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:42:42.093

确保你的表上有索引，但在更改任何代码之前，我会编写一些自动化测试来获取数字。

然后，当您进行更改时，您可以比较实际数字并查看最适合您的数字。

这样，如果您尝试存储过程，例如，您可以看到它是如何工作的。

# php - 通过 Jquery 的 HTTP 命令

> ID：10245496
> 
> 赞同：0
> 
> 时间：2012-04-20T11:36:53.763
> 
> 标签：php, asp.net, ajax, jquery

有人问我如何发送和接收 HTTP 请求来触发移动文本计费服务。计费服务没有 Web 服务来响应/触发这些消息，并且只会接受来自白名单 IP 的请求。因此，我假设我们需要编写一个可以处理客户端请求的服务器端 Web 服务 - 触发计费消息并向客户端 jquery/ajax 返回回复。

这是来自后端知识有限的前端开发人员！因此，在我回应之前，有人同意我的假设吗？

干杯保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:51:45.953

webService 是最可取的。它为前端架构（或类型）的未来更改提供了更大的灵活性

# spring-mvc - 使用 Spring MVC 框架在服务器端和客户端之间进行 XML 交换

> ID：10245498
> 
> 赞同：0
> 
> 时间：2012-04-20T11:37:03.070
> 
> 标签：spring-mvc

我在客户端使用 Spring MVC 框架版本 3.0.2。服务器端已经开发（使用 django）并上传到服务器上。此外，服务器端实现了 REST Web 服务。在服务器上有这样的东西：

```
 <atom:link rel="data" type="application/xml" href="http://www.../ckp/data/"/> 
```

我想做的是从[http://www.../ckp/data/](http://www.../ckp/data/)获取这些数据（xml 文件），并使用 spring 框架将其打印在视图上。其实我很新，我不知道如何对待这个。我应该在客户端更改什么以及在哪里更改？我的意思是我应该在 dispatcher-servlet-Config.xml 或 web.xml 或其他地方更改某些内容吗？在控制器中？我应该写什么或打电话？是否有可用于从特定 url 获取 xml 文档的注释？

我问题的第二部分是如何将 xml 文件发送到服务器端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:28:32.583

我认为你应该看起来像这个[样本](http://forum.springsource.org/showthread.php?82146-Spring-RESTful-Client-Server-tutorial)。它解释了如何使用 Spring 3 做一个 REST Web 服务

# html - 从css悬停时定位两个单独的元素

> ID：10245499
> 
> 赞同：2
> 
> 时间：2012-04-20T11:37:07.910
> 
> 标签：html, css

是否可以定位同时内联显示的两个单独的表？当光标越过`tr` `td`第一个或第二个表时，我想同时在两个表上产生悬停效果。

这是一个小例子：http: [//jsfiddle.net/Ksb2W/17/](http://jsfiddle.net/Ksb2W/17/)

（现在分开工作）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:43:03.697

您可以模拟这种行为，因为将鼠标悬停在第一个上`div`会触发`table`包含在兄弟姐妹中的响应`div`：

```
div:hover,
div:hover + div table td {
    background-color: #f90;
    border-color: #f90;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Ksb2W/18/)。

但是您不能将鼠标悬停在第一个`table`上以在第二个中触发响应，因为这需要先到达`table`的父`div`级，然后到达兄弟级，然后到达子表。

同样，如果没有 JavaScript，您将无法根据第一个表中当前悬停的元素在特定行或单元格中触发响应。也不能在第二个`table`（或`div`）悬停时触发第一个响应。

# javascript - 将数组合并为一个基数

> ID：10245502
> 
> 赞同：1
> 
> 时间：2012-04-20T11:37:18.957
> 
> 标签：javascript, multidimensional-array

将数组初始化为一个值，这将是合并到第二个数组而不是第一个数组的最佳方法？

```
var a = [[0,0,0,0], [0,0,0,0]]; // 2x4
var b = [[1,1], [2,2]]; 
```

对于一个简单的维度，可以使用：

```
var base = [0, 0, 0, 0, 0, 0, 0, 0];
var add = [1, 2, 3, 4];
for (i in add) {
    base[i] = add[i];
}

>>> base
[1, 2, 3, 4, 0, 0, 0, 0] 
```

但是 2 或 3 维呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:43:31.933

两个维度：

```
for (i in add) {
    for (j in add[i])
        base[i][j] = add[i][j];
} 
```

三个维度：

```
for (i in add) {
    for (j in add[i])
        for (k in add[i][j])
            base[i][j][k] = add[i][j][k];
} 
```

等等

对于任意数量的维度，您可以递归地解决问题：

```
function merge(source, destination){
  if (source[0] instanceof Array) {
    for (i in source) merge(source[i], destination[i]) // go deeper
  }  
  else {
    for (i in source) destination[i] = source[i];
  }
} 
```

你用以下方式调用它：`merge (add, base);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:49:00.633

尝试这个：

```
var mergeArr = function(arrFrom, arrTo) {
  for(var i=0;i<arrFrom.length; i++) {
    if (Array.isArray(arrFrom[i]) && Array.isArray(arrTo[i])) {
      mergeArr(arrFrom[i], arrTo[i]);
    } else {
      arrTo[i] = arrFrom[i];
    }
  }
} 
```

应该适用于你扔给它的任何维度。

# sparql - 用于查找艺术家属性的 dbpedia SPARQL 查询

> ID：10245503
> 
> 赞同：4
> 
> 时间：2012-04-20T11:37:26.737
> 
> 标签：sparql, dbpedia

我正在尝试通过 DBPedia 和 SPARQL 查询语言获取有关艺术家的详细信息，但是，（以我的理解）如何获取某些信息似乎几乎是不可能的。

我正在尝试获取艺术家并获取诸如他们的家乡之类的信息。我猜查询应该类似于：

```
SELECT ?c WHERE {
  ?b <http://dbpedia.org/property/Artist> <http://dbpedia.org/resource/Arctic_Monkeys>.
  ?b <http://www.w3.org/2002/07/owl#ObjectProperty> <http://dbpedia.org/ontology/hometown>.
  ?b rdfs:label ?c.
} 
```

如果有人能启发我应该如何做，那就太棒了。

我一直在尝试以下查询：

[http://dbpedia.org/sparql](http://dbpedia.org/sparql)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T14:58:19.747

如果你想找到他们家乡的标签，试试这个：

```
SELECT ?hometownLabel WHERE {
  <http://dbpedia.org/resource/Arctic_Monkeys> <http://dbpedia.org/ontology/hometown> ?hometown .
  ?hometown <http://www.w3.org/2000/01/rdf-schema#label> ?hometownLabel .
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T02:35:23.287

也许您对 SPARQL 语法没有很好的理解。与 SQL 不同，SPARQL 通过在 WHERE 子句中编写一些带有未知变量的三元组来搜索结果。你可以试试：

```
prefix dbpedia-owl:<http://dbpedia.org/ontology/>
SELECT ?c 
WHERE {
    <http://dbpedia.org/resource/Arctic_Monkeys> dbpedia-owl:hometown ?c.
} 
```

通过此搜索，您将获得Arctic_Monkeys 的家乡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-20T06:57:11.567

```
SELECT ?hometown 
WHERE {
dbr:Arctic_Monkeys dbo:hometown ?label.
?label rdfs:label ?hometown.
FILTER(langMatches(lang(?hometown), "en"))
} 
```

# .net - SqlParameter 名称前是否需要添加@？

> ID：10245510
> 
> 赞同：32
> 
> 时间：2012-04-20T11:37:54.620
> 
> 标签：.net, vb.net, ado.net

在我们的一个应用程序中，参数以这种方式传递给存储过程

```
Dim parm As New SqlParameter("searchText", SqlDbType.VarChar)
parm.Direction = ParameterDirection.Input
parm.Size = 50
parm.Value="test"

cmd.Parameters.Add(parm) 
```

并且该过程包含一个参数`@searchText`

即代码传递的参数名是`searchText`，存储过程中的参数名是`@searchText`。

但它工作正常，我总是得到所需的结果。

所以我的问题是这样的，所以不需要在参数之前指定**@**？是否会附加**@**，任何人都可以为此给出答案。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-20T11:43:48.580

根据[文档](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.parametername.aspx)，名称必须以`@`：

> ParameterName 以@paramname 的形式指定。

根据源代码（查看[`SqlCommand`](https://referencesource.microsoft.com/#system.data/system/data/sqlclient/SqlCommand.cs)并[`SqlParameter.ParameterNameFixed`](https://referencesource.microsoft.com/#system.data/fx/src/data/System/Data/SqlClient/SqlParameter.cs,e0b0ddfdcb0fca98,references)在参考源中）`@`，如果需要，会自动添加一个。

所以是的，它有效，但它是一个未记录的功能。最佳实践建议您不要依赖此方法，而是手动在参数名称前加上`@`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T11:44:21.343

参考：[SqlParameter.ParameterName 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.parametername.aspx)和[IDataParameter.ParameterName 属性](http://msdn.microsoft.com/en-us/library/system.data.idataparameter.parametername.aspx)

> ParameterName 以@paramname 的形式指定。您必须在执行依赖参数的 SqlCommand 之前设置 ParameterName。如果您使用 Sql Server 作为数据库，那么您必须在参数名称之前指定 @。

您的参数名称必须与后端相同，例如。那么`@searchText`在你的参数规范中它必须是`SqlParameter("@searchText"`..

你的代码应该是这样的

```
Dim parm As New SqlParameter("@searchText", SqlDbType.VarChar)
parm.Direction = ParameterDirection.Input
parm.Size = 50
parm.Value="test"

cmd.Parameters.Add(parm) 
```

注意：[Oracle](http://OracleCommand.Parameters%20Property)和 SqLite 使用不同的字符来指定参数，可能有 @ 符号没有使用 ado.net 的规范指定。

编辑：通过评论

当您指定[链接](http://typedescriptor.net/browse/members/402789-System.Data.SqlClient.SqlParameter.ParameterNameFixed#)时，它也是某种修复，但根据 msdn 文档，无论您使用任何数据提供程序 oledb、sql、odbc，都必须使用“@”指定位置参数。[参考](http://books.google.co.in/books?id=iXpWt3E9Sc8C&pg=PA441&lpg=PA441&dq=system.data.sql%20parameter%20@%20symbol&source=bl&ots=Qx20F3Tylx&sig=7Cduocvnk7Ws517kcx83SM_2E7o&hl=en&sa=X&ei=o1qRT-_nAYvjrAep2cGIBQ&ved=0CEUQ6AEwBQ#v=onepage&q=system.data.sql%20parameter%20@%20symbol&f=false)

```
if (0 < parameterName.get_Length() && '@' != parameterName.get_Chars(0))
        {
            parameterName = "@" + parameterName;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T20:22:42.127

指定@ 不是强制性的。但是，它是最佳实践。

它类似于字符串。在 .NET 中定义这样的字符串当然没有什么坏处：

```
string s;
//Rest of the code follows; 
```

但同样，将它们定义为：

```
string s = string.Empty; 
```

你看，这是一个约定和最佳实践的问题！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T19:28:31.983

我建议您在参数名称中使用添加“@”标记。SqlParameter 有助于自动添加，但其他参数可能不会。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-06T05:51:32.187

是否需要“@”符号？是和否。当您使用 DbCommand 添加参数时，无论您是否使用 SQL Server，它都是可选的：

```
// Look Ma no @ required!    
DbCommand command = database.GetStoredProcCommand("StoredProctologistAndGambler");
database.AddInParameter(command, "Bet", DbType.Int32, fromLineNumber);
database.AddOutParameter(command, "Diagnosis", DbType.String, -1); 
```

但是，如果您稍后要引用该命令，则需要“@”前缀。微软认为很难将其转移到 API 的其余部分。

```
var examResult =  command.Parameters["@Diagnosis"];   // Ma! Microsoft lied! It requires the "@" prefix. 
```

# zooming - highcharts 平移

> ID：10245515
> 
> 赞同：6
> 
> 时间：2012-04-20T11:38:15.883
> 
> 标签：zooming, highcharts, panning

我正在尝试基于此示例实现 highcharts 平移：http: [//jsfiddle.net/HXUmK/5/](http://jsfiddle.net/HXUmK/5/)

但我希望能够用鼠标左键缩放并用鼠标右键平移。所以我修改了上面的代码并设法让它工作了一点，但是当我按住鼠标右键平移时，图表也会缩放。

有没有办法可以禁用鼠标右键放大highcharts？

编辑：对不起，不是很清楚。jsfiddle 中的代码不是我的代码。忘记那个代码，这只是我开始的一个示例表单。我正在尝试修改该代码以获得左键缩放和右键平移。所以我禁用了鼠标滚轮缩放并激活了标准 highcharts 缩放

Edit2：这是我的代码：http: [//jsfiddle.net/TKPQN/](http://jsfiddle.net/TKPQN/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:49:02.457

您可以尝试选择事件：

```
chart: {
        ...
        events:{
            selection: function(event) {
                if (lastButton == 1)
                    event.preventDefault();
            }
       }
    } 
```

见[http://jsfiddle.net/TKPQN/48/](http://jsfiddle.net/TKPQN/48/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T20:09:23.380

我想使用`Shift`键进行缩放，所以这是我的解决方案

```
 $('#container').highcharts('StockChart', {
    chart: {
        //zoomType: 'x', // we declare it without zoom, so the pan is enabled
        // ...
    }}); 
    var chart = $('#container').highcharts();
    chart.pointer.cmd = chart.pointer.onContainerMouseDown;
    chart.pointer.onContainerMouseDown = function (a){
        //in my case, I need only X zooming, so I enable it if shift is pressed
        this.zoomX=this.zoomHor=this.hasZoom=a.shiftKey;
        this.cmd(a);
    }; 
```

似乎工作正常，所以希望它对你有帮助

这是一个 JSFiddle 工作示例：http: [//jsfiddle.net/73bc23zq/](http://jsfiddle.net/73bc23zq/)

# java - 处理连接错误和 JSoup

> ID：10245519
> 
> 赞同：7
> 
> 时间：2012-04-20T11:38:26.857
> 
> 标签：java, connection, jsoup

我正在尝试创建一个应用程序来从网站上的多个页面中抓取内容。我正在使用 JSoup 进行连接。这是我的代码：

```
for (String locale : langList){
        sitemapPath = sitemapDomain+"/"+locale+"/"+sitemapName;
        try {
            Document doc = Jsoup.connect(sitemapPath)
                    .userAgent("Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.21 (KHTML, like Gecko) Chrome/19.0.1042.0 Safari/535.21")
                    .timeout(10000)
                    .get();

            Elements element = doc.select("loc");   
            for (Element urls : element) {
                System.out.println(urls.text());
                }
        } catch (IOException e) {
            System.out.println(e);
        }
    } 
```

大多数时候一切都完美无缺。但是，我希望能够做一些事情。

首先，有时会返回 404 状态或 500 状态可能会返回 301。使用下面的代码，它只会打印错误并移至下一个 url。我想做的是尝试能够返回所有链接的 url 状态。如果页面连接打印一个200，如果没有打印相关的状态码。

其次，我有时会捕获此错误“java.net.SocketTimeoutException：读取超时”我可以增加我的超时但是我更愿意尝试连接 3 次，在第三次失败时我想将 URL 添加到“失败”数组所以我可以在以后重试失败的连接。

比我有更多知识的人可以帮助我吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-24T13:10:00.317

上面为我返回了一个 IOException 而不是 execute() 返回正确的状态代码。

使用[JSoup-1.6.1](http://jsoup.org/download)我不得不将上面的代码更改为使用[ignoreHttpErrors(true)](http://jsoup.org/apidocs/org/jsoup/Connection.html#ignoreHttpErrors%28boolean%29)。

现在，当代码返回响应而不是抛出异常时，您可以检查错误代码/消息。

```
Connection.Response response = null;
            try {
                response = Jsoup.connect(bad_url)
                        .userAgent("Mozilla/5.0 (Windows NT 6.0) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5")
                        .timeout(100000)
                        .ignoreHttpErrors(true) 
                        .execute();
            } catch (IOException e) {
                System.out.println("io - "+e);
            }

            System.out.println("Status code = " + response.statusCode());   
            System.out.println("Status msg  = " + response.statusMessage()); 
```

输出：

```
Status code = 404
Status msg  = Not Found 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-20T14:38:24.663

对于您的第一个问题，您可以分两步进行连接/读取，停止询问中间的状态码，如下所示：

```
Connection.Response response = Jsoup.connect(sitemapPath)
                        .userAgent("Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.21 (KHTML, like Gecko) Chrome/19.0.1042.0 Safari/535.21")
                        .timeout(10000)
                        .execute();

int statusCode = response.statusCode();
if(statusCode == 200) {
    Document doc = connection.get();
    Elements element = doc.select("loc");   
    for (Element urls : element) {
        System.out.println(urls.text());
    }
}
else {
    System.out.println("received error code : " + statusCode);
} 
```

请注意，如果无法连接到服务器、响应格式错误的 HTTP 等，该`execute()`方法将失败`IOException`，因此您需要处理该问题。但是，只要服务器说出有意义的话，您就可以读取状态码并继续。此外，如果您已要求 Jsoup 跟踪重定向，您将不会看到`30x`响应代码 b/c Jsoup 将设置从最后获取的页面获取的状态代码。

至于你的第二个问题，你所需要的只是一个围绕我刚刚给你的代码示例的循环，该代码示例包含一个 try/catch 块和`SocketTimeoutException`. 当您捕获异常时，循环应该继续。如果您能够获取数据，则返回或中断。如果您需要更多帮助，请大声喊叫！

# iphone - 在 iPhone 中查找方向，例如 North 等

> ID：10245520
> 
> 赞同：3
> 
> 时间：2012-04-20T11:38:28.437
> 
> 标签：iphone, objective-c, direction

我的应用程序有一个问题我想知道从当前纬度和经度到纬度和经度的方向

```
-(void)showDirection
{
 CGFloat latitude = Lat;
 if (latitude < 0) {
    latitude = -latitude;
    strDirection = @"S";
 } else {
    strDirection = @"N";
 }
 // Longitude
 CGFloat longitude = Long;
 if (longitude < 0) {
    longitude = -longitude;
    strDirection = @"W";
 } else {
    strDirection = @"E";
 }
 NSLog(@"direc %@",strDirection);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T11:47:34.597

试试下面的代码：

在添加初始化 CLLocationManager 对象并导入 CLLocationManager 头文件后，首先在项目**CoreLocation.Framework中添加框架。**

你的视图控制器.h

```
#import <CoreLocation/CoreLocation.h>
@interface Yourviewcontroller :UIViewController <CLLocationManagerDelegate>
{
      CLLocationManager *locationManager;
} 
```

你的视图控制器.m

```
locationManager=[[CLLocationManager alloc] init];
locationManager.desiredAccuracy = kCLLocationAccuracyBest;
locationManager.delegate = self;
//Start the compass updates.
[locationManager startUpdatingHeading]; 
```

添加获取当前方向的功能

```
-(void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading
{
    float mHeading = newHeading.magneticHeading;
    if ((mHeading >= 339) || (mHeading <= 22)) {
        //[direction setText:@"N"]; 

    }else if ((mHeading > 23) && (mHeading <= 68)) {
        //[direction setText:@"NE"];    

    }else if ((mHeading > 69) && (mHeading <= 113)) {
        //[direction setText:@"E"]; 

    }else if ((mHeading > 114) && (mHeading <= 158)) {
        //[direction setText:@"SE"];

    }else if ((mHeading > 159) && (mHeading <= 203)) {
        //[direction setText:@"S"]; 

    }else if ((mHeading > 204) && (mHeading <= 248)) {
        //[direction setText:@"SW"];    

    }else if ((mHeading > 249) && (mHeading <= 293)) {
       // [direction setText:@"W"];

    }else if ((mHeading > 294) && (mHeading <= 338)) {
       // [direction setText:@"NW"];

     }
} 
```

**注意：指南针仅适用于真正的 iphone 设备，不适用于 iphone 模拟器..！**

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-20T11:48:57.370

你可以试试[LocateMe](http://developer.apple.com/library/ios/#samplecode/LocateMe/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007801-Intro-DontLinkElementID_2)。它将为您提供用户当前位置的经纬度。
或者您可以尝试查看本[教程](http://www.switchonthecode.com/tutorials/getting-your-location-in-an-iphone-application)

希望这可以帮助！

# jquery - jqplot饼图数据标签格式精度无尾随零

> ID：10245521
> 
> 赞同：1
> 
> 时间：2012-04-20T11:38:30.043
> 
> 标签：jquery, formatting, jqplot, printf, pie-chart

我想知道如何**格式化****饼图**上的数据标签，使其**最多显示 2 个十进制**字符，并且**从不**显示**尾随零**，例如：

```
2 -> 2
2.0 -> 2
2.566 -> 2.57 
```

换句话说，我在问**如何设置`dataLabelFormatString`参数**？我知道它正在使用`sprintf`，因此我尝试了 '%.2f' 和 '%g'。他们虽然没有解决我的问题。由于第一个使每个数字显示为十进制字符，另一个只是删除尾随零，但不能精确地工作，因为在这种情况下，您放在它前面的数字，例如 '%.2g' 是指总长度性格。

我不知道如何有效地将这两者结合起来（甚至可能吗？）。如何设置参数，例如，首先使用 '%.2f' 格式化，然后使用 '%g' 应该可以解决问题，但是该怎么做呢？

我可以在格式中“注入”一个 if/else，如果可以，那么如何？

否则，我能想到的唯一方法是，一旦绘制了情节，运行一个 jquery 脚本来获取标签并应用于`parseFloat(label.toFixed(2))`每个标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:31:29.320

为了结束这个话题，我在这里发布我的答案。我设法解决了这个问题，感谢`jQuery`. 在做客户端时，它似乎又是一个真正的救星。:)

我的处理方法与我在问题中提到的想法类似，即使用`parseFloat(label.toFixed(2))`. 虽然我以一种稍微颠倒的方式做到了。我决定将图表设置为`label`用于`dataLabels`参数。`$.jqplot.postDrawHooks.push(...)`图表绘制完成后，我使用绑定我的函数以执行。我的函数修改图例标签以显示名称，而不是我在将它们设置为数据数组之前计算的百分比值。

这种方法完全符合我的要求。[对于那些感兴趣的人，请在此处找到我的 jsfiddle 显示解决方案。](http://jsfiddle.net/Boro/NYewy/)

如果有人有更好的解决方案**，我非常渴望随时从我的答案中接受**。

# html - CSS3过渡与不同的轻松不工作

> ID：10245522
> 
> 赞同：0
> 
> 时间：2012-04-20T11:38:33.983
> 
> 标签：html, css

我已经尝试将代码与一些来源进行比较，包括我遵循的教程和我的转换不起作用，它只是从它的起始状态跳到没有动画的结束。先感谢您。

HTML：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<head>
<link rel="stylesheet" type="text/css" href="style.css" />
</head> 
<body>
    <div id="no">no</div>
    <div id="one">one</div>
    <div id="two">two</div>
    <div id="three">three</div>
    <div id="four">four</div>
    <div id="five">five</div>
    <div id="minustwo">minustwo</div>
</body> 
```

CSS：

```
div {
width: 300px;
margin: 5px 0;
padding: 5px;
color: white;
background-color: #ED8029;
text-align: left;
border-radius: 5px;
}

div:hover  {
width: 700px;
}

div.no {
-webkit-transition: 3s linear;
-moz-transition: 3s linear;
-o-transition:  3s linear;
-ms-transition: 3s linear;
transition: 3s linear 2s;
}

div.one {
-webkit-transition: 3s linear 1s;
-moz-transition: 3s linear 1s;
-o-transition: 3s linear 1s;
-ms-transition: 3s linear 1s;
transition: 3s linear 1s;
}

div.two {
-webkit-transition: 3s linear 2s;
-moz-transition: 3s linear 2s;
-o-transition: 3s linear 2s;
-ms-transition: 3s linear 2s;
transition: 3s linear 2s;
}

div.three {
-webkit-transition: 3s linear 3s;
-moz-transition: 3s linear 3s;
-o-transition: 3s linear 3s;
-ms-transition: 3s linear 3s;
transition: 3s linear 3s;
}

div.four {
-webkit-transition: 3s linear 4s;
-moz-transition: 3s linear 4s;
-o-transition: 3s linear 4s;
-ms-transition: 3s linear 4s;
transition: 3s linear 4s;
}

div.five {
-webkit-transition: 3s linear 5s;
-moz-transition: 3s linear 5s;
-o-transition: 3s linear 5s;
-ms-transition: 3s linear 5s;
transition: 3s linear 5s;
}

div.minustwo {
-webkit-transition: 3s linear -2s;
-moz-transition: 3s linear -2s;
-o-transition: 3s linear -2s;
-ms-transition: 3s linear -2s;
transition: 3s linear -2s;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:45:34.943

指定过渡时，需要指定要设置动画的属性。因此，例如，您应该编写如下内容：

```
div.no {
-webkit-transition: all 3s linear;
-moz-transition: all 3s linear;
-o-transition: all 3s linear;
-ms-transition: all 3s linear;
transition: all 2s linear;
} 
```

[这是有关使用过渡的更多信息。](http://www.w3schools.com/css3/css3_transitions.asp)

# mysql - 针对列值的全文搜索？

> ID：10245533
> 
> 赞同：0
> 
> 时间：2012-04-20T11:39:52.253
> 
> 标签：mysql, sql, full-text-search, match-against

我读过这个：

[MySQL全文搜索对列值？](https://stackoverflow.com/questions/2011477/mysql-fulltext-search-against-column-value)

但这很荒谬，我不明白为什么不可能这样做。

有人知道一些解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:54:15.017

这是我的旧程序，在您的情况下也可以尝试类似的方法-

```
BEGIN
  declare done default 0;
  declare csv1 varchar(100);
  declare cur1 cursor for select csv from table; 
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done=1;
  open cur1;
  repeat
  fetch cur1 into csv1;
  -
  -
  -
  -
  update company set (something) where match(csv) against(concat("'",csv1,"'"));
  until  done end repeat;
  -
  -
  close cur1;
  select * from table;
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:45:48.623

因为数据存储在目录中。当您查询全文索引时，您是从创建它的目录中读取数据，而不是从索引指向的表中读取数据。

当您“填充”目录时，您是在告诉您的服务器从表中读取数据并插入到目录中。如果您有一个非静态值，您将如何读取它？

# c# - MouseLeave 事件处理程序太慢

> ID：10245539
> 
> 赞同：2
> 
> 时间：2012-04-20T11:40:28.467
> 
> 标签：c#, .net, events, mouseleave

我正在使用 MouseLeave 事件来检查用户是否离开了我的表单并关闭我的窗口，但是使用 `this.MouseLeave += new System.EventHandler(this.InvisibleForm_Leave);` 速度太慢了，只有当我要慢慢地离开我的表单时才会触发事件，以正常方式移动它/快一点我没有得到休假事件。

因此，我尝试自行检查鼠标是否离开了我的表单：

```
private void checkPos()
    {
        Rectangle rec = this.Bounds;
        while (true)
        {
            Point point = new Point(Cursor.Position.X, Cursor.Position.Y);
            if (!rec.Contains(point))
            {
                Console.WriteLine("leaving");
                this.Close();                    
            }
            Thread.Sleep(100);
        }
    } 
```

创建表单后在自己的线程中开始：

```
public MyForm()
    {
        InitializeComponent();
        Thread m_mouseListenerThread = new Thread(new ThreadStart(this.checkPos));
        m_mouseListenerThread.Start();            
    } 
```

但是有了这个我或多或少有同样的问题，离开该区域后检查它仍然返回true，`rec.Contains(point)`仅在一秒钟后他将执行if代码，但有时他会立即得到它。

第二个问题是我在方法的`this.Close();`行中遇到了线程异常`checkPost()`：

> 跨线程操作无效：控件“MyForm”从创建它的线程以外的线程访问。

现在我真的不知道如何以另一种方式实现鼠标离开部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:42:13.117

我不认为 MouseLeave 性能是这里的问题。我使用了 MouseLeave（结合 MouseEnter 和 MouseMove）来自动淡入/淡出表单。有用 ：）。这是一个只有标签的示例表单：

![](../Images/2f1c9ccc659ffa7540d28bc4ebead23d.png)

如果同时为 Label 和 Form 处理 MouseLeave，则无论我移动鼠标的速度有多快，事件处理程序都会触发。例如：

```
this.label1.MouseLeave += new System.EventHandler(this.HandleMouseLeave);
this.MouseLeave += new System.EventHandler(this.HandleMouseLeave);

private void HandleMouseLeave(object sender, EventArgs e)
{
   Debug.WriteLine(string.Format("MouseLeave: {0}", DateTime.Now));
} 
```

但是，如果我删除 label1 的 MouseLeave 处理程序，我就能够重现您所看到的行为。如果我将鼠标从 label1（橙色）缓慢移动到表单（绿色）和外部，事件就会触发。如果我将鼠标从 label1 快速移动到表单外部，则不会触发该事件。

所以，**我认为正在发生的是表单的子控件正在触发 MouseLeave 事件，而您没有处理该事件**。当您缓慢移动鼠标时看到事件触发的原因是因为您在表单区域上悬停的时间足够长以产生事件。

此外，产生一个单独的线程来监视 MouseLeave 事件不是一个好方法。您的性能将受到影响，因为此线程会轮询事件状态（而不是等待事件），您正在为启动/停止线程造成不必要的头痛，并且您需要随时调用 UI 线程对表格做任何事情（如你所学）。如果您有时间重新访问 MouseLeave 事件方法，我强烈建议您这样做。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T11:45:34.280

1.  对于鼠标离开部分，我不太确定。也许您可以尝试通过 MouseMove 事件来处理？
2.  对于无效的跨线程操作问题，您根本无法访问由另一个线程拥有的控件（在您的情况下是 UI 线程）。请改用[Control.BeginInvoke](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)或[Control.Invoke](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invoke.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-30T09:38:38.037

我遇到了同样的问题，这样做：

1.  将计时器放入表格中。
2.  将您的代码放入计时器滴答事件中，例如鼠标离开：

    ```
    Label1.BackColor=Color.PaleGreen; 
    ```

3.  将计时器间隔设置为小于 30

4.  使用此功能

    ```
    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        timer1_Tick(label1(example), e); 
    } 
    ```

5.  把它放在表单加载事件中

    ```
    timer1.Tick += timer1_Tick; 
    ```

代码将运行得非常快和容易，你再也不会看到这样的问题了

# apache - 尾随斜杠导致错误代码 500

> ID：10245542
> 
> 赞同：2
> 
> 时间：2012-04-20T11:40:36.827
> 
> 标签：apache, .htaccess

我有这个`htaccess`脚本

```
Options -Indexes
Options +FollowSymlinks

RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.+)$ /$1.php [L,QSA] 
```

所以我可以访问一个页面，`example.com/test`但是当我尝试访问`example.com/test/`它时会引发 500 错误。有人可以告诉我需要改变什么才能工作吗？可能是一个愚蠢的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:56:11.377

将模式从 更改`^(.+)$`为将分别处理尾部斜杠的模式：`^(.*[^/])/?$`

```
Options -Indexes +FollowSymlinks

RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*[^/])/?$ /$1.php [L,QSA] 
```

这对两者都有效，`/test`并且`/test/`- 两者都将被重写为`/test.php`.

如果你想要不同的行为，有`/test`工作但有“404 Not Found”错误`/test/`（而不是愚蠢的“500 服务器端”错误），你可以使用这个：

```
Options -Indexes +FollowSymlinks

RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.+)$ $1.php [L] 
```

上面的规则将在进行重写之前检查目标文件是否存在。所以如果`/test.php`不存在，则不会发生重写。

# c++ - 在 c 或 c++ 中的空行后开始打印

> ID：10245550
> 
> 赞同：-5
> 
> 时间：2012-04-20T11:41:17.470
> 
> 标签：c++, c

假设我们有一个名为 text 的指针，它以这种格式打印这个东西：

```
Date: Fri, 20 Apr 2012 11:42:05 GMT
Server: Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2
PHP/5.3.6
X-Powered-By: PHP/5.3.6
Content-Length: 12
Connection: close
Content-Type: text/html
         <--- empty line 
```

开始打印这个

当您在 c 或 c++ 中检测到空行时，如何开始打印某些内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:44:24.847

如果您逐行阅读，只需检查行的长度。如果长度为零，那么你有一个空行。

如果您必须检查内存缓冲区，请在换行时将计数器重置为零。如果您到达换行符并且计数器已经为零，那么您有一个空行。

**编辑：**一些代码如何使用内存缓冲区执行此操作：

```
char *buffer = "Hello\nWorld\n\nFoo\n";
char *data_start = NULL;

char *line_beg, *p;
for (line_beg = p = buffer; *p; p++)
{
    if (*p == '\n')
    {
        if (line_beg == p)
        {
            /* Empty line */
            data_start = p + 1;
            break;
        }
        line_beg = p + 1;
    }
}

if (data_start != NULL)
    printf("Data: %s", data_start); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:55:06.627

由于这是上一篇文章的延续[，](https://stackoverflow.com/questions/10244569/send-http-post-request-to-php-code-in-c-or-c)我想您不妨探索一下[fdopen](http://pubs.opengroup.org/onlinepubs/009604499/functions/fdopen.html) 。[使用fgets](http://pubs.opengroup.org/onlinepubs/007904875/functions/fgets.html)逐行读取输出将是一种更简单的方法。然后您可以轻松识别空白行，

# c++ - C++ STL 或模板和 DLL

> ID：10245555
> 
> 赞同：-1
> 
> 时间：2012-04-20T11:41:33.113
> 
> 标签：c++

我可以有 C++ 共享库，其中有返回的导出函数`std::vector<t>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:49:15.020

是的，提供 DLL 和使用它的 C++ 代码

*   使用相同的 C++ 编译器构建
*   正在使用相同版本的 STL（这可能对 STL 调试定义也很敏感）
*   正在使用相同的共享运行时库（即共享、调试与发布、单线程与多线程、相同版本），以便在同一内存堆上分配和释放对象

那么它应该可以正常工作。其中一些可能有一点余地，但总的来说，最好是安全的并尽可能保持一切相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:49:34.900

如果 in`std::vector<t>`是`t`未知类型，即如果您想将 a 存储`template`在共享库中，而不是某些固定模板实例化，*则答案是**否定***的。

需要一种将类型`t`注入共享库的方法，但没有。

在代码方面：

```
// This is NOT possible:
template <typename T>
std::vector<T> something () {...}

// This IS:
std::vector<int> something () {...} 
```

# jar - 使 JFileChooser 在其自己的 .jar 内的文件夹中启动

> ID：10245559
> 
> 赞同：1
> 
> 时间：2012-04-20T11:41:42.907
> 
> 标签：jar, directory, executable-jar, jfilechooser

我有一个打包到 .jar 存档中的程序。在档案的顶层，我有一个主类和一个名为 images 的文件夹。如何`JFileChooser`在 .jar 存档中的图像文件夹中开始？

如果我使用`JFileChooser open = new JFileChooser("images");`它，它将在档案之外的一个名为 images 的文件夹中开始，但这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:45:24.487

JFileChooser 与文件系统一起工作，它不会将 jar/zip 文件视为文件系统。

您需要实现自己的类来导航您的 jar 文件。

考虑[Apache VFS](http://commons.apache.org/vfs/)项目。

# postgresql - 运行 UPDATE 时 PostgreSQL 中的死锁

> ID：10245560
> 
> 赞同：38
> 
> 时间：2012-04-20T11:41:48.423
> 
> 标签：postgresql, transactions, database-deadlocks

我对 PostgreSQL 死锁的阅读有点困惑。

一个典型的死锁例子是：

```
-- Transaction 1
UPDATE customer SET ... WHERE id = 1
UPDATE customer SET ... WHERE id = 2

-- Transaction 2
UPDATE customer SET ... WHERE id = 2
UPDATE customer SET ... WHERE id = 1 
```

但是，如果我将代码更改如下：

```
-- Transaction 1
UPDATE customer SET ... WHERE id IN (1, 2)

-- Transaction 2
UPDATE customer SET ... WHERE id IN (1, 2) 
```

这里会有死锁的可能吗？

本质上我的问题是：**在第二种情况下，PostgreSQL 是一个接一个地锁定行，还是锁定条件覆盖的整个范围`WHERE`？**

提前致谢！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-20T12:14:34.593

在 PostgreSQL 中，行将在更新时被锁定——事实上，这实际上工作的方式是每个元组（行的版本）都有一个系统字段`xmin`，用于指示哪个事务使该元组成为当前状态（通过插入或更新）以及一个系统字段`xmax`，用于指示哪个事务使该元组过期（通过更新或删除）。当您访问数据时，它会检查每个元组以确定它是否对您的事务可见，方法是根据这些值检查您的活动“快照”。

如果您正在执行 UPDATE 并且与您的搜索条件匹配的元组有一个 xmin 可以使其对您的快照可见，并且有一个活动事务的 xmax，它会阻塞，等待该事务完成。如果首先更新元组的事务回滚，则您的事务唤醒并处理该行；如果第一个事务提交，您的事务将唤醒并根据当前事务隔离级别采取行动。

显然，死锁是这种情况以不同顺序发生在行上的结果。RAM中没有可以同时为所有行获得的行级锁，但是如果行以相同的顺序更新，则不能进行循环锁定。不幸的是，建议的`IN(1, 2)`语法并不能保证这一点。不同的会话可能有不同的活动成本因素，后台“分析”任务可能会在生成一个计划和另一个计划之间更改表的统计信息，或者它可能正在使用 seqscan 并受到 PostgreSQL 优化的影响，从而导致新的 seqscan加入一个已经在进行中的程序并“循环”以减少磁盘 I/O。

如果您以相同的顺序、在应用程序代码中或使用游标一次更新一个，那么您将只有简单的阻塞，而不是死锁。但是，一般来说，关系数据库容易出现序列化失败，最好通过一个框架来访问它们，该框架将基于 SQLSTATE 识别它们并从一开始就自动重试整个事务。在 PostgreSQL 中，序列化失败的 SQLSTATE 总是 40001 或 40P01。

[http://www.postgresql.org/docs/current/interactive/mvcc-intro.html](http://www.postgresql.org/docs/current/interactive/mvcc-intro.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-17T18:37:30.623

> PostgreSQL 是一个接一个地锁定行，还是锁定整个范围

PostgreSQL 一个接一个地锁定行。

令人沮丧的是，没有办法像选择和插入那样对更新（或删除）进行排序。

解决方案是预先锁定记录`SELECT FOR UPDATE`并自行加入。

```
UPDATE customer AS c SET ...
FROM (
  SELECT ctid
  FROM customer
  WHERE id IN (1, 2)
  ORDER BY id -- the optimal ordering varies, but it must be strict and consistent
  FOR UPDATE
) AS c2
WHERE c.ctid = c2.ctid 
```

（这里我使用行的物理 ID，`ctid`这对于连接可能会稍微快一些。）

PostgreSQL 会找到记录，*按顺序锁定记录，*然后更新记录。

您可以检查查询计划以使自己相信这一点。

有一些开销，但它是最小的，特别是考虑到这`UPDATE`通常不是一个轻量级的操作。

# silverlight - 禁用另一个控件中一个控件的按钮

> ID：10245564
> 
> 赞同：0
> 
> 时间：2012-04-20T11:42:10.140
> 
> 标签：silverlight, windows-phone-7.1, windows-8

嗨，我正在开发 Silverlight 中的 Win 8 Metro 应用程序。

我有两个控件 Control1 和 Control2

Control2 在 Control1 内

Control2 有一个列表视图，而 Control1 有按钮。单击 listview 必须禁用 Control1 中的按钮。

我试图通过使用后面的代码来实现这一点

```
 public bool OverriddenFlag
{
    get { return _overriddenFlag; }
    set
    {
        _overriddenFlag= value;
        NotifyPropertyChanged("OverriddenFlag");
    }
} 
```

并在 xaml

```
<Button x:Name="ShowDetails" FontWeight="bold" FontSize="12" Content="+" click="ShowDetails_Click" IsEnabled="{Binding OverriddenFlag, Mode=OneWay}"/> 
```

但它并没有禁用该按钮。如何禁用按钮。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:30:49.587

OverridenFlag 应该是 Control2 中的依赖属性，如下所示：

```
 public static readonly DependencyProperty OverriddenFlagProperty = DependencyProperty.Register("OverriddenFlag",
        typeof(bool), typeof(Control2), null);

    public bool OverriddenFlagProperty
    {
        get { return (bool)GetValue(OverriddenFlagProperty); }
        set
        {
            SetValue(OverriddenFlagProperty, value);
        }
    } 
```

然后尝试将您的绑定修改为：

```
<Button x:Name="ShowDetails"  IsEnabled="{Binding OverriddenFlag, ElementName=Control2}"/> 
```

# security - 为什么 base64 编码 API 授权密钥？

> ID：10245566
> 
> 赞同：10
> 
> 时间：2012-04-20T11:42:20.043
> 
> 标签：security, api, amazon-web-services, authorization

我们目前正在设计一个 web api，并且正在实施授权。我们已经（大部分）关注了[亚马逊](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)的实施，但有一部分我真的不完全理解。

也就是说，base64 编码生成的 hmac 有什么意义？长度的差异可以忽略不计，至少对于大多数站点而言。亚马逊可能会注意到差异。这是唯一的原因吗？它可能与ascii / unicode有关吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-20T11:47:34.927

哈希算法和 HMAC 不提供十六进制字符串输出，这是许多人倾向于相信的；它们都输出二进制数据。Base64 为您提供了一种将二进制数据轻松且可移植地表示为字符串的方法。

至于原因，可能只是为了方便并在其软件的许多不同部分之间使用标准编码。除了它是一种广泛使用的编码之外，它没有什么特别之处。

# model-view-controller - CFWheels - 重定向后如何使用 errorMessagesFor？

> ID：10245568
> 
> 赞同：1
> 
> 时间：2012-04-20T11:42:33.630
> 
> 标签：model-view-controller, coldfusion, railo, cfwheels, bluedragon

在控制器中重定向后有什么方法可以使用 #errorMessagesFor()# 方法吗？

我问的原因是我希望表单保持在同一页面上。

我有一个像这样的网址：

/链接/提交/

使用张贴到的表格：

/链接/链接提交/

但我希望它重新回到 /link/submit/。

我可以做到这一点，并且它有效，但是在我看来 #errorMessagesFor()# 不再有效。

我不想为此使用“flash”消息，因为我希望为表单上的字段显示特定的错误消息。有没有办法将验证错误传递给 Flash 消息？

谢谢，迈克尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T21:37:05.807

Wheels 并不是真正为您建议的模式设计的。您需要做的是`linksubmit`在验证失败后在您的操作中呈现表单页面。

这是要遵循的模式：

```
<cffunction name="linksubmit">
    <cfscript>
        link = model("link").new(params.link);

        if (link.save()) {
            redirectTo(route="someRoute", success="The link was created successfully.");
        }
        else {
            flashInsert(error="There was an error saving the link. Please review the errors below and try again.");
            renderPage(action="submit");
        }
    </cfscript>
</cffunction> 
```

# php - CRC64文件校验和PHP实现

> ID：10245575
> 
> 赞同：5
> 
> 时间：2012-04-20T11:42:59.970
> 
> 标签：php, checksum, crc

我需要使用 PHP 获取文件的 CRC64 校验和。

使用此代码

```
file_put_contents('example.txt', 'just an example');

echo hash_file('crc32', 'example.txt'); 
```

我得到 CRC32 校验和“c8c429fe”；

但我需要使用 CRC64 算法获得校验和（

![在此处输入图像描述](../Images/c7909f6cf3c260bef9c417722b5c2522.png))

我从这里拿了它：[http ://en.wikipedia.org/wiki/Cyclic_redundancy_check](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)

如何在 PHP 中实现这个散列算法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T10:40:17.520

在 php 64bit 上实现 crc64()

[https://www.php.net/manual/en/function.crc32.php#111699](https://www.php.net/manual/en/function.crc32.php#111699)

```
<?php

/**
* @return array
*/
function crc64Table()
{
    $crc64tab = [];

    // ECMA polynomial
    $poly64rev = (0xC96C5795 << 32) | 0xD7870F42;

    // ISO polynomial
    // $poly64rev = (0xD8 << 56);

    for ($i = 0; $i < 256; $i++)
    {
        for ($part = $i, $bit = 0; $bit < 8; $bit++) {
            if ($part & 1) {
                $part = (($part >> 1) & ~(0x8 << 60)) ^ $poly64rev;
            } else {
                $part = ($part >> 1) & ~(0x8 << 60);
            }
        }

       $crc64tab[$i] = $part;
    }

    return $crc64tab;
}

/**
* @param string $string
* @param string $format
* @return mixed
*
* Formats:
*  crc64('php'); // afe4e823e7cef190
*  crc64('php', '0x%x'); // 0xafe4e823e7cef190
*  crc64('php', '0x%X'); // 0xAFE4E823E7CEF190
*  crc64('php', '%d'); // -5772233581471534704 signed int
*  crc64('php', '%u'); // 12674510492238016912 unsigned int
*/
function crc64($string, $format = '%x')
{
    static $crc64tab;

    if ($crc64tab === null) {
        $crc64tab = crc64Table();
    }

    $crc = 0;

    for ($i = 0; $i < strlen($string); $i++) {
        $crc = $crc64tab[($crc ^ ord($string[$i])) & 0xff] ^ (($crc >> 8) & ~(0xff << 56));
    }

    return sprintf($format, $crc);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:52:33.333

hash_file 只是一个包装器，它从 file_get_contents($file) 获取结果到包装器，因此您可以使用任何函数而不是“crc32”。

你必须使用crc64吗？如果您只想对文件进行哈希处理，您可以使用 md5 和 sha，它们可以像使用

```
$hash = hash_file("sha1", $file); 
```

否则，只需制作自己的 crc64 实现和

```
function crc64($string){
    // your code here
}

$hash = hash_file("crc64", $file); 
```

# android - 带有 passwordMask 或 keyboardType 设置的文本字段在 android 上崩溃

> ID：10245577
> 
> 赞同：0
> 
> 时间：2012-04-20T11:43:04.163
> 
> 标签：android, titanium-mobile

我有一个工厂类，可以为我即时创建输入窗口。创建这个工厂类的原因是为了简化输入窗口的创建，因为我有很多。我们目前正在将我们的应用程序从 iOS 移植到 android，这就是我们发现这个问题的时候。

我正在尝试像这样创建一个文本字段：

```
 textField = Ti.UI.createTextField
    left: indentLeft
    right: 10
    color: "#336699"
    borderStyle: Ti.UI.INPUT_BORDERSTYLE_NONE
    field: field
    hintText: field.hint
    value: field.value
    tag: field.name
    autocorrect: field.autocorrect
    autocapitalization: field.autocapitalization
    enabled: (field.enabled != false)
    keyboardType: field.keyboardType
    passwordMask: field.passwordMask
    returnKeyType: Ti.UI.RETURNKEY_DEFAULT
    textAlign: field.textAlign 
```

这在 iOS 上工作得非常好，并且 field.keyboardType 和 field.passwordMask 指定的值是根据titianium docs完全合法的值。但是，除非我注释掉 passwordMask 和 keyboardType，否则我的 android 应用程序会崩溃……知道为什么会发生这种情况吗？这是android崩溃日志：

```
 E/TiApplication( 1216): (main) [249,918] Sending event: exception on thread: main msg:java.lang.IllegalArgumentException: Unable to convert null to boolean.; Titanium 2.0.1,2012/04/12 16:36,999c68a
    E/TiApplication( 1216): java.lang.IllegalArgumentException: Unable to convert null to boolean.
    E/TiApplication( 1216):     at org.appcelerator.titanium.util.TiConvert.toBoolean(TiConvert.java:342)
    E/TiApplication( 1216):     at org.appcelerator.titanium.util.TiConvert.toBoolean(TiConvert.java:355)
    E/TiApplication( 1216):     at ti.modules.titanium.ui.widget.TiUIText.handleKeyboard(TiUIText.java:368)
    E/TiApplication( 1216):     at ti.modules.titanium.ui.widget.TiUIText.processProperties(TiUIText.java:171)
    E/TiApplication( 1216):     at org.appcelerator.kroll.KrollProxy.setModelListener(KrollProxy.java:737)
    E/TiApplication( 1216):     at org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(TiViewProxy.java:530)
    E/TiApplication( 1216):     at org.appcelerator.titanium.proxy.TiViewProxy.handleGetView(TiViewProxy.java:522)
    E/TiApplication( 1216):     at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:500)
    E/TiApplication( 1216):     at org.appcelerator.titanium.proxy.TiViewProxy.forceCreateView(TiViewProxy.java:485)
    E/TiApplication( 1216):     at ti.modules.titanium.ui.widget.tableview.TiTableViewRowProxyItem.refreshControls(TiTableViewRowProxyItem.java:133)
    E/TiApplication( 1216):     at ti.modules.titanium.ui.widget.tableview.TiTableViewRowProxyItem.setRowData(TiTableViewRowProxyItem.java:280)
    E/TiApplication( 1216):     at ti.modules.titanium.ui.widget.tableview.TiTableViewRowProxyItem.setRowData(TiTableViewRowProxyItem.java:84)
    E/TiApplication( 1216):     at ti.modules.titanium.ui.widget.tableview.TiTableView$TTVListAdapter.getView(TiTableView.java:216)
    E/TiApplication( 1216):     at android.widget.AbsListView.obtainView(AbsListView.java:1315)
    E/TiApplication( 1216):     at android.widget.ListView.makeAndAddView(ListView.java:1727)
    E/TiApplication( 1216):     at android.widget.ListView.fillDown(ListView.java:652)
    E/TiApplication( 1216):     at android.widget.ListView.fillSpecific(ListView.java:1284)
    E/TiApplication( 1216):     at android.widget.ListView.layoutChildren(ListView.java:1570)
    E/TiApplication( 1216):     at android.widget.AbsListView.onLayout(AbsListView.java:1147)
    E/TiApplication( 1216):     at android.view.View.layout(View.java:7035)
    E/TiApplication( 1216):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
    E/TiApplication( 1216):     at ti.modules.titanium.ui.widget.tableview.TiTableView.onLayout(TiTableView.java:516)
    E/TiApplication( 1216):     at android.view.View.layout(View.java:7035)
    E/TiApplication( 1216):     at org.appcelerator.titanium.view.TiCompositeLayout.onLayout(TiCompositeLayout.java:519)
    E/TiApplication( 1216):     at android.view.View.layout(View.java:7035)
    E/TiApplication( 1216):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
    E/TiApplication( 1216):     at android.view.View.layout(View.java:7035)
    E/TiApplication( 1216):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
    E/TiApplication( 1216):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
    E/TiApplication( 1216):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
    E/TiApplication( 1216):     at android.view.View.layout(View.java:7035)
    E/TiApplication( 1216):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
    E/TiApplication( 1216):     at android.view.View.layout(View.java:7035)
    E/TiApplication( 1216):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
    E/TiApplication( 1216):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
    E/TiApplication( 1216):     at android.os.Handler.dispatchMessage(Handler.java:99) 
    E/TiApplication( 1216):     at android.os.Looper.loop(Looper.java:123)
    E/TiApplication( 1216):     at android.app.ActivityThread.main(ActivityThread.java:4627)
    E/TiApplication( 1216):     at java.lang.reflect.Method.invokeNative(Native Method)
    E/TiApplication( 1216):     at java.lang.reflect.Method.invoke(Method.java:521)
    E/TiApplication( 1216):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    E/TiApplication( 1216):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    E/TiApplication( 1216):     at dalvik.system.NativeStart.main(Native Method)
D/dalvikvm( 1216): GC_FOR_MALLOC freed 4053 objects / 380032 bytes in 77ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:51:51.780

在 org.appcelerator.titanium.util.TiConvert.toBoolean(TiConvert.java:342)

上述错误表明在第 342 行的 TiConvert.java 类中，您正在尝试将空值转换为布尔检查。

# ruby-on-rails - rails 控制台在 rails 3.2.1 中不起作用

> ID：10245589
> 
> 赞同：1
> 
> 时间：2012-04-20T11:44:06.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在开发一个使用 rails 3.2.1 的 rails 应用程序。我为它创建了一个单独的 gem 集并安装了 gem。到目前为止，一切正常，但是当我进入 rails 控制台时，我收到以下错误：

```
/home/santosh/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/irb/completion.rbin require': no such file to load -- readline (LoadError)
from /home/santosh/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/irb/completion.rb:9:in'
from /home/santosh/.rvm/gems/ruby-1.9.2-p290@sample/gems/railties-3.2.1/lib/rails/commands/console.rbin require'
from /home/santosh/.rvm/gems/ruby-1.9.2-p290@sample/gems/railties-3.2.1/lib/rails/commands/console.rb:3:in'
from /home/santosh/.rvm/gems/ruby-1.9.2-p290@sample/gems/railties-3.2.1/lib/rails/commands.rb:38:in require'
from /home/santosh/.rvm/gems/ruby-1.9.2-p290@sample/gems/railties-3.2.1/lib/rails/commands.rb:38:in'
from script/railsin require'
from script/rails:6:in' 
```

通过谷歌浏览并尝试安装 readline 但没有用。那我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:52:45.297

由于使用 rvm 安装 ruby​​，我遇到了类似的问题。

为了解决这个问题，我卸载了我的 ruby​​ 版本，并使用以下命令对其进行了安装：

```
rvm install 1.9.2 --with-readline-dir=$rvm_path/.rvm/usr
```

我希望它有帮助

# kinect - 关于 Kinect 的冲突信息

> ID：10245591
> 
> 赞同：0
> 
> 时间：2012-04-20T11:44:16.927
> 
> 标签：kinect, sensors, depth, motion, openni

我想开始使用运动控制（使用深度传感器）制作应用程序，但我不知道从哪里开始。我正在寻找可用硬件和软件选项的*当前*比较。比如华硕Xiton、Kinect SDK、OpenNI，
可惜我没成功。信息要么是旧的，要么是相互矛盾的。我想知道给定的硬件/软件设置可以做什么（这也是“更容易”启动），然后选择一个。
我会很感激任何信息/链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:23:58.223

如果你想要一些简单的东西，带有 Kinect SDK 的 Kinect 绝对是市场上最简单的选择。

但是请注意，kinect 是消费级产品，因此它的准确性和分辨率将无法与 primesense 的其他设备相媲美。

# android - 如何在 IntelliJ IDEA 上为我的 android 项目添加 Ksoap2 Jar 文件

> ID：10245598
> 
> 赞同：1
> 
> 时间：2012-04-20T11:44:46.413
> 
> 标签：android, intellij-idea, ksoap2

我在 Ksoap2 webservices 上做 android 项目，我需要在 Intellij IDEA 上添加 ksoap2 jar 文件任何人帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:48:08.640

请参阅[模块依赖项](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)帮助部分。

# php - Selection box not working with JQuery

> ID：10245604
> 
> 赞同：0
> 
> 时间：2012-04-20T11:45:28.727
> 
> 标签：php, jquery, ajax

I am writing a script in JQUery that when you select an option from a select box that has been brought in through AJAX, it loads results from a database based on your selection...

I know that when you bring in data via AJAX, you have to use .live() to use events, however i still seem too get problems.

Any ideas:

```
$('#schoolselect').live('blur',function(){

    school = $(this).val();
    console.log(school);

    $.ajax({
    type: "POST",
    url: "./script/moduleandcourse.php",
    data: {school:school,type:choice},
    dataType: "html",
    success: function(result){

    console.log(choice);

        $('#module_section').html(result).fadeIn(500);

    console.log('#' + choice + 'select');

    }
    })

 });

 $('#moduleselect').live(blur,function(){

 console.log("Selection Made");

 }); 
```

the ID of the select box initally returned from AJAX is moduleselect.

Any help would be much apreciated :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:48:44.917

Can you give blur in quotes? That seems to be the issue.

```
$('#moduleselect').live('blur',function(){
    console.log("Selection Made");
}); 
```

# ruby-on-rails - Ruby-on-Rails 3.2：导出包含大型数据集（100,000 条记录）的 CSV

> ID：10245613
> 
> 赞同：3
> 
> 时间：2012-04-20T11:46:01.633
> 
> 标签：ruby-on-rails, csv, scalability, delayed-job, ruby-on-rails-3.2

**介绍**

我有一个有多个表的应用程序，有些有关联，有些没有关联。

一些表格将需要容纳大约 100,000 个条目。

该应用程序在 Ruby 1.9 上使用 Rails 3.2，并托管在 Heroku 上。如果需要，我可以接触到工人。

**有问题的要求**

该应用程序的一个重要要求是允许用户将数据导出为 CSV - 对此的要求是允许用户过滤他们想要导出的数据，但我现在并不担心，正如您将看到的下面的数据，我已经硬编码了要导出的数据，但这确实排除了创建一个 rake 任务来导出整个表。

此外，实现的方法必须考虑到允许多个表使用，以避免不必要的代码重复。

**当前解决方案**

我正在我的应用程序中实现延迟作业并在作业中执行 CSV 生成。在这样做的同时，我正在关注“abdullah”的[http://www.ayokasystems.com/blog/delegating-long-running-jobs-in-rails/上的解决方案。](http://www.ayokasystems.com/blog/delegating-long-running-jobs-in-rails/)

想法是生成 CSV 格式的数据并将其保存在 UserJobs 表的 LONGTEXT 字段中，以允许用户在完成后和将来的时间下载。

**问题**

上述教程中使用的方法在我的应用程序中运行良好，直到我一次运行 100,000 条记录的工作。为了克服这个问题，我尝试将很酷的 find_each 函数添加到 perform 方法中，但是延迟的作业工作者每次尝试处理它时都会报告一个错误：

```
[Worker(host:*** pid:18637)] ReportJob failed with NoMethodError: undefined method `each' for #<Title:0x007ff20c1ec1b0> - 0 failed attempts
[Worker(host:*** pid:18637)] ReportJob failed with NoMethodError: undefined method `each' for #<Title:0x007ff20ec47f18> - 1 failed attempts
[Worker(host:*** pid:18637)] 2 jobs processed at 10.5219 j/s, 2 failed ... 
```

我的 perform 方法代码是：

```
def perform
  Title.find_each do |titles|
    csv_data = CSV.generate do |csv|
      titles.each do |t|
        csv << t.to_csv
      end
    end
    user_job = UserJob.find(user_job_id)
    user_job.update_attribute :data, csv_data
  end
end 
```

任何人都可以看到问题可能是什么，我想我在循环事物的方式上犯了一个愚蠢的错误。

我对如何完成相关要求的任何其他建议持开放态度，但请记住我对 Heroku 的限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:05:28.517

您正在尝试使用*each*进行迭代，但在这种情况下，标题是标题的实例（不是数组）。

```
csv_vals = []
columns = [:name, :release_date, :studio]

Title.find_each(:select => columns) do |title| 
  columns.each {|value| csv_vals << "#{title[value]}"}
end

# comma separated string 
csv_string = csv_vals.join(',') 
```

有更优雅的方式来制定 CSV 字符串，但我懒得做实验。

重要的是您只在需要的列上执行 SELECT。对于 100 000 条记录，这会大大减少带宽 DB 通信。只需*find_each 即可*获得每一行的所有列，而您不需要它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:52:07.427

`find_each`为块产生单个记录，而不是集合，因此您在调用`each`单个记录时出错。看看[find_in_batches](http://api.rubyonrails.org/classes/ActiveRecord/Batches.html#method-i-find_in_batches)，或者修复您的代码以使用单个记录：

```
Title.find_each do |title|
  CSV.generate do |csv|
    csv << title.to_csv
  end
  user_job = UserJob.find(user_job_id)
  user_job.update_attribute :data, csv_data
end 
```

# java - 从 Map 获取 HashSet 并对其进行更改后，我是否必须将其放回原处？

> ID：10245614
> 
> 赞同：0
> 
> 时间：2012-04-20T11:46:02.883
> 
> 标签：java, map, pass-by-reference

它是这样工作的：

```
Set<Integer> nums = numMap.get(id);
nums.add(new Integer(0));
// now do i have to:
numMap.put(id,nums)?
// or is it already stored? 
```

问候 && tia noircc

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T11:47:25.457

您不必将其放回原处，除非您对其进行深度克隆。一切都基于 Java 中的引用。

你总是可以通过编写一个简单的程序来测试它。

```
public static void main(String... args) {
    Map<Integer, Set<Integer>> numMap = new HashMap<Integer, Set<Integer>>();

    Set<Integer> set = new HashSet<Integer>();
    set.add(10);

    numMap.put(0, set);

    System.out.println("Map before adding is " + numMap);

    set.add(20);

    System.out.println("Map after adding is " + numMap);
} 
```

哪个打印

```
Map before adding is {0=[10]}
Map after adding is {0=[20, 10]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:52:17.390

不，您不必重新插入它。

`numMap`存储对值的引用，并且s*引用*`Set`不会因为您更改 Set 的内容而改变。

如果您*将*`Set`用作哈希映射中的*键*，则必须重新插入它，因为更改 Set 的内容会更改 Set 的哈希码。

```
Map<Set<Integer>, String> map = new HashSet<Set<Integer>, String>();

Set<Integer> nums = ...
map.put(nums, "Hello");    // Use a Set<Integer> as *key*.

nums.add(new Integer(0));  // This changes the keys hashCode (not allowed)

// now do i have to:
numMap.put(nums)? 
```

您需要在更改密钥之前删除映射，并在更改密钥后重新插入映射。

# iphone - iOS Facebook SDK - 检索好友个人资料图片

> ID：10245615
> 
> 赞同：1
> 
> 时间：2012-04-20T11:46:07.157
> 
> 标签：iphone, objective-c, ios, facebook

我正在使用 Facebook iOS SDK 并检索了用户好友列表。现在我有了每个朋友的姓名和身份证。

我想找回好友头像，可以吗？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T11:49:02.680

您可以使用此 URL 获取该图片

[http://graph.facebook.com/IdOfTheUer/picture?type=normal](http://graph.facebook.com/IdOfTheUer/picture?type=normal)

您也可以像这样使用他们的用户名：

例如

[http://graph.facebook.com/facebook/picture?type=normal](http://graph.facebook.com/facebook/picture?type=normal)

[http://graph.facebook.com/11239244970/picture?type=normal](http://graph.facebook.com/11239244970/picture?type=normal)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-20T15:32:13.867

在 cellForRowAtIndexPath 中，您已经获得了 facebook 用户的 id .....我说得对吗？？？之后，只需使用下面的 url 通过 URLRequest 获取个人资料图片....

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if([friends count]!=0)
    {                        
        NSString *strurl = [[NSString alloc] initWithFormat:@"https://graph.facebook.com/%@/picture",[[friends objectAtIndex:indexPath.row] objectForKey:@"id"]];
        NSURL *url=[NSURL URLWithString:strurl];///here you can retrive the image
        [cell setObjItem:url title:[[friends objectAtIndex:indexPath.row] objectForKey:@"name"]];
        // Configure the cell.
    }
    else
    {
        NSLog(@"<<<<<<<<<<------Array Null-------->>>>>>>");
    }
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T12:46:13.223

```
 -(void)fbFriends {
        [self.facebook requestWithGraphPath:@"me/friends" andDelegate:self];
    }
    -(void)fbFriendsInfo :(NSString *)profileid {
        [self.facebook requestWithGraphPath:profileid andDelegate:self];
    }

    - (void)request:(FBRequest *)request didLoad:(id)result{
        [self hideSpinner];

        lblGender.text = [result objectForKey:@"gender"];
        lblName.text = [result objectForKey:@"name"];
        self.idi = [result objectForKey:@"id"];

        NSString *first_name = [result objectForKey:@"first_name"];
        NSString *gender = [result objectForKey:@"gender"];
        NSString *last_name = [result objectForKey:@"last_name"];
        NSString *link = [result objectForKey:@"link"];
        NSString *name = [result objectForKey:@"name"];
        NSString *updated_time = [result objectForKey:@"updated_time"];

        NSLog(@"Profile Info : \n\n%@,\n%@,\n%@,\n%@,\n%@,\n%@,\n%@",first_name,gender,idi,last_name,link,name,updated_time);

        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:AlertName message:@"Facebook Done." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [alert release];
    } 
```

使用共享控制器类并调用`fbFriends`所以你会得到朋友的 id 然后调用`fbFriendsInfo`它会返回你朋友的所有信息。

# java - 在多个类中共享常量（android扫雷）

> ID：10245620
> 
> 赞同：3
> 
> 时间：2012-04-20T11:46:31.823
> 
> 标签：java, android, constants

我正在使用扩展按钮创建一个类的实例并直接访问一个整数变量以获得更好的性能。我正在使用常量来轻松识别变量的当前设置。

我在 Button 类和实例化它们的 Activity 类中都声明了常量。我发现了类似的问题并阅读了创建一个类只是为了保存常量并不是一个好习惯。

在两个类中使用相同常量声明的最佳方法是什么？

我是一个初学者程序员，所以很可能我忽略了一个简单的解决方案。

按钮类：

```
public class GridButton extends Button {
  public int displayStatus;

  // constants for mine display status
  private static final int UNTOUCHED = 1;
  private static final int UNCOVERED = 2;
  private static final int FLAGGED = 3;
  private static final int HIT = 4;
  ...
} 
```

活动类：

```
public class PlayGameActivity extends Activity {      
  private GridButton[][] gridButtons;      

  // constants for mine display status
  private static final int UNTOUCHED = 1;
  private static final int UNCOVERED = 2;
  private static final int FLAGGED = 3;
  private static final int HIT = 4;
  ...

  // e.g. accessing displayStatus value
  if (gridButtons[currentRow][currentColumn].displayStatus == FLAGGED)
  {
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T11:50:36.013

要共享内容，您可以将常量放在单独的类中并静态访问它

```
class Constants {
  public static final int UNTOUCHED = 1;
} 
```

然后在这两个课程中你都可以去`Constants.UNTOUCHED`。

在这种情况下，我会避免使用幻数并用枚举替换它们。

```
enum DisplayStatus {
  Untouched, Uncovered, Flagged, Hit
} 
```

并将您的所有内容替换`int displayStatus`为`DisplayStatus displayStatus`. 现在，您和代码的其他读者清楚地知道它`int`代表了什么。

理想情况下，您总是希望使用特定类型来限制可能值的范围。在您的示例中，只有数字 1-4 有效，但您的类型与`int`任何值一样宽（例如`-1`或`23543`）。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T11:49:55.770

> 在两个类中使用相同常量声明的最佳方法是什么？

定义它们一次（例如，在 中`PlayGameActivity`）并从两个地方使用它们（通过删除`private`修饰符）。`GridButton`可以参考`PlayGameActivity.UNTOUCHED`等等，如果你摆脱`private`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T12:17:05.397

我认为枚举是一个很好的解决方案，如前所述。但是，由于您有不同的网格按钮状态，您可以考虑使用 Java [State 设计模式](http://onjavahell.blogspot.com/2009/05/simple-example-of-state-design-pattern.html)。正如您所说，由于您是初学者，您可能会觉得这有点令人困惑甚至是不必要的，但我相信它会帮助您培养扎实的编程技能。最后，我记得我自己开发了一个扫雷器，不过是用纯 Java 而不是 android 开发的，并且我使用了[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)作为网格按钮。一旦一个按钮发生变化，它就会通知相邻的按钮也改变它们的状态。

# maven - 如何从具有所有优点的多模块 Maven 项目继承？

> ID：10245621
> 
> 赞同：7
> 
> 时间：2012-04-20T11:46:33.770
> 
> 标签：maven, pom.xml, multi-module

我找不到一个好的、可扩展的解决方案的问题：

我有一个项目可以提供给定工件的多种风格。这已被设置为一个多模块项目，目前有 3 个模块：

*   /flavor1_module
*   /flavor2_module
*   /flavor3_module

问题是我还有另外 50 个项目需要以相同的方式设置，即提供 3 种风格。

考虑的解决方案：

1.  将已经创建的多模块项目变成所有其他 50 个项目的父项目
    *   **缺点：**它只是不起作用。保存在父模块中的指令不会被继承，因此它们不会被执行。
2.  使用[maven-archetype-plugin](http://maven.apache.org/archetype/maven-archetype-plugin/)创建[一个多模块项目模板](http://maven.apache.org/archetype/maven-archetype-plugin/examples/create-multi-module-project.html)，然后基于该模板创建全部 50 个项目
    *   **缺点：**如果我需要 flavor4，我需要手动更新所有 50 个项目以添加 flavor4_module（并复制其内容）。不可扩展。
3.  将所有风味的配置嵌入到单个 pom 中，并根据配置文件启用或禁用它们（即使用配置文件组合而不是通过模块继承）。然后将 50 个项目指向它，作为它们的父级。这将创建“内联”模块
    *   **缺点：**我需要实现我自己的机制，这些机制由开箱即用的模块提供。（例如，在单独的目录中构建每种风味）。我也会失去模块提供的清晰分隔。

任何想法如何做得很好？还有其他选择吗？

谢谢，卢卡斯

**编辑：**

另一种选择是使用*reactor:inject-modules目标扩展*[maven-reactor-plugin](http://maven.apache.org/plugins/maven-reactor-plugin/index.html)，该目标将从外部工件下载模块定义，并将其定义附加为普通模块。这将动态创建一个新模块。然后所有 50 个项目都可以将此 pom.xml 作为其父项。

 *配置看起来像这样（草稿）：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-reactor-plugin</artifactId>
  <version>1.0</version>
  <executions>
    <execution>
      <id>inject</id>
      <phase>initialize</phase>
      <goals>
        <goal>inject-modules</goal>
      </goals>
      <configuration>
        <modules>
          <module>
            <artifactId>flavour1_module</artifactId>
            <groupId>[ groupId ]</groupId>
            <version>[ version ]</version>
          </module>
          <module>
            <artifactId>flavour2_module</artifactId>
            <groupId>[ groupId ]</groupId>
            <version>[ version ]</version>
          </module>
          <module>
            <artifactId>flavour3_module</artifactId>
            <groupId>[ groupId ]</groupId>
            <version>[ version ]</version>
          </module>
        </modules>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

走这条路有意义吗？

**更新：**

编写一个操作要执行的模块列表的插件（我上面描述的模块注入的想法）似乎无法实现，因为模块是由 maven 核心处理的，并且该机制不是为了扩展而设计的一个插件。这可以通过两个插件完成类似工作的事实得到证实，即操纵要执行的项目列表：

*   [maven-reactor-plugin](http://maven.apache.org/plugins/maven-reactor-plugin/index.html)
*   [maven-invoker-plugin](http://maven.apache.org/plugins/maven-invoker-plugin/)

通过执行系统调用来创建 Maven 子进程来解决问题。对我来说，这不是要走的路，因为它是一个非常不稳定的解决方案。实际上[maven-reactor-plugin](http://maven.apache.org/plugins/maven-reactor-plugin/index.html)变得与 Maven3[不兼容。](https://cwiki.apache.org/MAVEN/maven-3x-plugin-compatibility-matrix.html)

[maven-invoker-plugin](http://maven.apache.org/plugins/maven-invoker-plugin/)看起来仍然很有希望。该插件最初设计用于运行集成测试，但可以使用它来扩展例如编译阶段。但它要求将子 pom.xml-s 视为资源并即时修改。对于我在此处描述的问题，解决方案将过于复杂且不稳定。我更喜欢在构建 maven 模型时可以在内存中运行的更轻量级的东西。

所以现在我使用配置文件，试图使它们尽可能紧凑。可能在一段时间内，我需要再次考虑这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:14:42.133

现在您可以使用[maven-tiles](https://github.com/maoo/maven-tiles/)插件来获得所需的行为。

使用 maven-tiles，您可以在不同的 pom 中定义构建行为并将它们**导入**到您喜欢的任何位置。

[MNG-5102](http://jira.codehaus.org/browse/MNG-5102?focusedCommentId=310175#comment-310175)附有一个工作示例--> [daddy3.zip](http://jira.codehaus.org/secure/attachment/61530/daddy3.zip)

Maven 的仅限继承的紧身衣现已正式删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T00:29:56.580

根据我的经验，**选项 3**效果最好，但我不必像你需要的那样扩展它——当我不得不这样做时，我使用了 maven-ant-plugin 创建了一个参数化的 ant 脚本来做定制。它有一些缺点——即同时使用 ant 和 maven，因此实际的 POM 更难以理解，但它确实比 maven 提供了更大的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T13:04:48.483

在我看来，您可以为此创建多个不同的程序集描述符，并配置多个插件执行，每个执行引用不同的描述符。您必须将项目维护为单个模块而不是多模块项目。如果您的发行版包含相同的类集但不同的资源或库，它就可以工作。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.2.1</version>
            <executions>
                <execution>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <id>assembly</id>
                    <phase>package</phase>
                    <configuration>
                        <descriptors>
                                <descriptor>one.xml</descriptor>
                        </descriptors>
                    </configuration>
                </execution>
                <execution>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <id>assembly</id>
                    <phase>package</phase>
                    <configuration>
                        <descriptors>
                                <descriptor>two.xml</descriptor>
                        </descriptors>
                    </configuration>
                </execution>
                <execution>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <id>assembly</id>
                    <phase>package</phase>
                    <configuration>
                        <descriptors>
                                                      <descriptor>three.xml</descriptor>
                        </descriptors>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

您可以创建一个父 pom，并在那里配置装配 pluing，以便您可以从那里控制分发的数量和包装的变化。您的项目不需要了解不同包装的细节。

我强烈建议将本机库保留为单独的模块，并使用存储库机制将已编译的库安装到其中。您可以使用不同的分类器来隔离平台，例如，

```
mylib-2.0.0-win32_x86.dll
mylib-2.0.0-linux_x86.so
mylib-2.0.0-linux_x86_64.so 
```

然后，您可以将这些库作为项目中的依赖项引用，然后能够将它们与您的发行版一起打包。

整体解决方案将在很大程度上取决于各种发行版的差异以及打包发行版的整体过程，但我认为这会奏效。

最终且更具可扩展性的解决方案是通过实施 Maven 插件来创建自己的打包。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-01T15:14:08.213

If you are using maven 3, you can define profiles the parent pom and activate them base on file existance. On the child modules you can "inherit flavours" by simply creating empty files.

This is better documented on the links below:

*   [Import maven plugin configuration by composition rather than inheritance. Can it be done with build extensions?](https://stackoverflow.com/questions/11749375/import-maven-plugin-configuration-by-composition-rather-than-inheritance-can-it)
*   [http://jira.codehaus.org/secure/attachment/60790/daddy2.zip](http://jira.codehaus.org/secure/attachment/60790/daddy2.zip)
*   [http://jira.codehaus.org/browse/MNG-5127](http://jira.codehaus.org/browse/MNG-5127)*

# css - span 标签内的 IE 8 文本超出了 div

> ID：10245624
> 
> 赞同：1
> 
> 时间：2012-04-20T11:46:42.947
> 
> 标签：css, alignment, html

我正在使用`<span>`在弹出 div 中显示一行地址，它在所有浏览器中都可以正常工作，但在 IE 8（仅）中它不起作用，跨度内容会从弹出 div 中消失

在弹出 div 内，所有内容都使用表格显示，并为 td 分配宽度。

**其他浏览器的输出**

```
|------------------|<--DIV message
|line1<--td1       |
|line2<--td1       |
|Here it goes the a|<--<tr><td>span</td></tr>
|ddress not goes   |  
| outside          |
|__________________| 
```

**IE8 中的输出**

```
|------------------|<--DIV message
|line1<--td1       |
|line2<--td1       |
|Here it goes the a|ddress and it goes outside<--<tr><td>span</td></tr>
|                  |
|__________________| 
```

包括跨度在内的所有内容在所有浏览器中都可以正常工作，但在 IE8 中它超出了范围。在 IE8 中，它不关心我分配给 td 的宽度。

HTML：

```
<div class="message">
<table>
<tr>
<td>
<span>Here it goes the a|ddress and it goes outside</span>
</td>
</tr>
</table>
</div> 
```

CSS：

```
.message {width:320px;height:220px;}
.message table td{width:80px;}
.message table td span{width:80px;}//I tried like this it works in other browsers not in IE8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:54:31.413

像这样试试

```
.message table td span{width:80px; white-space:normal;} 
```

# scala - Scala Lift - 返回 json 对象以进行响应

> ID：10245626
> 
> 赞同：0
> 
> 时间：2012-04-20T11:46:48.620
> 
> 标签：scala, lift

我有以下内容：

```
def response() = {

    if (value == 1) { 

        ("code" -> "API_001") ~ ("result" -> "OK - Room created")

    }

}

JsonResponse(

    ("response" -> response) 

) 
```

但我收到以下错误：

```
No implicit view available for Any => net.liftweb.json.package.JValue 
```

非常感谢您的帮助，在此先感谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:10:45.333

`def response()`是类型`Any`，因为您的`if`子句是（如果`value != 1`，它需要返回`(): Unit`，所以表达式的整体类型是`JValue`和的超类型`Unit`）。您需要添加一个`else`返回适当类型的子句。

# c# - Lambda 参数和 Visual Studio 2008 自动完成

> ID：10245629
> 
> 赞同：0
> 
> 时间：2012-04-20T11:47:15.300
> 
> 标签：c#, visual-studio, visual-studio-2008, intellisense

当使用带有委托的签名调用方法时，使用 Lamba 语法，Visual Studio 2008 将我的任意参数名称替换为自动完成的名称。

```
private void parseIntCell(DataGridViewCell focusCell, Action<Receipt_Detail, int> recorder) 
```

当我键入以下内容时：

```
parseDecimalCell(focusCell, 2, ((x, 
```

只要我输入逗号，Visual Studio 就会把它变成

```
parseDecimalCell(focusCell, 2, ((XmlReadMode, 
```

我最终想要输入的内容

```
parseDecimalCell(focusCell, 2, ((x,y) => x.Grower_Box_Weight = y)); 
```

有什么方法可以配置我的代码或 Visual Studio，这样我就可以输入这些类型的lambas，而无需按 esc 撤消自动完成，同时仍然可以自动完成正常的代码工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:50:05.097

尝试同时按 CTRL+Alt+Space，这不会禁用自动完成，但为了自动完成，您需要从列表中进行选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:00:00.857

与其将 lambda 表达式括在括号中，不如将 lambda 函数的主体括在大括号中，如下所示：

```
private void doSomethingWithADelegate(Action<int, int> myFunc)
{
    // ...
}

void Foo()
{
    int a = 0;
    doSomethingWithADelegate((x, y) => { a = a + x + y; });
} 
```

当我使用这种语法时，Intellisense 在输入“(x”) 后不会尝试进行任何更改。

# excel - Excel 更改条件格式公式

> ID：10245638
> 
> 赞同：2
> 
> 时间：2012-04-20T11:47:48.230
> 
> 标签：excel, conditional-formatting, vba

我有一张表，其中包含许多代表时间线的单元格（每分钟一个单元格，宽度非常小），我想在此表中可视化包含三个阶段的操作。（一条线可以有多台手术，代表一间手术室）

例如，如果准备工作从 10:00 开始，实际操作从 10:23 开始，那么这两个时间之间的所有 23 个单元格都应该变红，接下来的 55 个，代表 10:23 到 11:18 之间的实际操作，应该是绿色的，等等，像这样：

```
 17    18      19    20    21      22     23     00     01      02      03     04
   |      |      |      |     |      |      |      |      |       |       |      |
OR1______________++++=================****______________++=========***____________
OR2______________________+++++======================*****_________________________ 
```

如果每个单元格的时间值（取自额外的行）在两个开始/结束值之间，则每个单元格都会被格式化，对于午夜前后的数字有特殊情况。

为了自动化这个（有很多操作），我编写了一个宏，它贯穿时间表（四个时间列用于三个阶段的开始和结束，一个代表手术室）并将每一列分配给大表格（带有彩色单元格）三种条件格式，应该可以正常工作（我手动检查了它们）：

```
T = time.Address(RowAbsolute:=True, ColumnAbsolute:=False)
Z1 = t1.Address
Z2 = t2.Address
Z3 = t3.Address
Z4 = t4.Address

fnc1 = "=OR(AND(" & Z1 & "<=" & T & ";" & T & "<" & Z2 & ");AND(" & Z2 & "<" & Z1 & ";" & Z1 & "<=" & T & ");AND(" & T & "<" & Z2 & ";" & Z2 & "<" & Z1 & "))"
fnc2 = "=OR(AND(" & Z2 & "<=" & T & ";" & T & "<" & Z3 & ");AND(" & Z3 & "<" & Z2 & ";" & Z2 & "<=" & T & ");AND(" & T & "<" & Z3 & ";" & Z3 & "<" & Z2 & "))"
fnc3 = "=OR(AND(" & Z3 & "<=" & T & ";" & T & "<" & Z4 & ");AND(" & Z4 & "<" & Z3 & ";" & Z3 & "<=" & T & ");AND(" & T & "<" & Z4 & ";" & Z4 & "<" & Z3 & "))"

Dim currentLine As Range
Set currentLine = Range(Cells(dline, data.Column), Cells(dline, data.Column).Offset(0, width))

Set frmt1 = currentLine.FormatConditions.Add(XlFormatConditionType.xlExpression, Formula1:=fnc1)
Set frmt2 = currentLine.FormatConditions.Add(XlFormatConditionType.xlExpression, Formula1:=fnc2)
Set frmt3 = currentLine.FormatConditions.Add(XlFormatConditionType.xlExpression, Formula1:=fnc3)

frmt1.Interior.Color = RGB(255, 0, 0)
frmt2.Interior.Color = RGB(0, 255, 0)
frmt3.Interior.Color = RGB(0, 0, 255) 
```

't1' .. 't4' 是表格中带有开始/结束时间的单元格，'time' 是可视化表格中每一列的额外行（10:01、10:02、... , 与‘data’等宽)，‘data’为可视化表格，‘dline’为当前格式化的行数，根据手术室计算。“宽度”现在通常是 300，但通常是 60 * 显示的小时数（所以只是那个时间的分钟数）。

整个过程没有错误，并且生成了正确的格式字符串（我在调试模式下检查了 fnc1..fnc3）。他们看起来像这样，他们应该这样做：

```
=OR(AND($KR$10<=C$13;C$13<$KS$10);AND($KS$10<$KR$10;$KR$10<=C$13);AND(C$13<$KS$10;$KS$10<$KR$10)) 
```

C13是时间的第一个单元格，KR10和KS10是这个操作的't1'和't2'（准备开始，实际操作开始/准备结束）。

但是：一旦格式字符串保存到excel（宏完成），它们就不再一样了。通常像

```
=OR(AND($KR$10<=XCS$13;XCS$13<$KS$10);AND($KS$10<$KR$10;$KR$10<=XCS$13);AND(XCS$13<$KS$10;$KS$10<$KR$10)) 
```

出来 - 'time' 单元格的值，这是唯一的相对值，变为奇怪的高值（'XCS'、'WTC'、'XBR'...）。如果我也使该行相对，它也会发生变化（我得到了像 163552 这样的数字）。

这似乎与宏无关，因为我首先在 IronPython 中尝试了整个事情，它的工作方式相同（我实际上是从该代码中翻译了宏）并产生了相同的错误。

当我手动分配公式进行测试时，我什至有时会遇到同样的错误，所以我强烈怀疑 Excel 是真正的错误......

现在，由于我找不到有关类似错误的任何信息，这可能与记忆有关吗？比如，细胞太多？或者特定于我的计算机/安装/代码/...的东西？

我使用 Excel 2007。“数据”表的单元格没有特殊格式，时间都是 hh:mm:ss。

我希望我已经足够清楚了整个东西是如何工作的；否则，只需要求更多代码或所需的任何信息。感谢您的任何提示，我已经坚持了一个星期了，我的想法已经用完了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:43:46.617

（归功于蒂姆·威廉姆斯）

这个问题似乎与活动单元格的位置有关，在此过程中会发生变化。以下代码有效并且将被使用（我还纠正了我以前看不到的另一个错误）：

```
T = time.Address(True, False)
' here I initially forgot to update the row (not related to problem)
Z1 = Cells(tline, t1.Column).Address
Z2 = Cells(tline, t2.Column).Address
Z3 = Cells(tline, t3.Column).Address
Z4 = Cells(tline, t4.Column).Address

fnc1 = "=OR(AND(" & Z1 & "<=" & T & ";" & T & "<" & Z2 & ");AND(" & Z2 & "<" & Z1 & ";" & Z1 & "<=" & T & ");AND(" & T & "<" & Z2 & ";" & Z2 & "<" & Z1 & "))"
fnc2 = "=OR(AND(" & Z2 & "<=" & T & ";" & T & "<" & Z3 & ");AND(" & Z3 & "<" & Z2 & ";" & Z2 & "<=" & T & ");AND(" & T & "<" & Z3 & ";" & Z3 & "<" & Z2 & "))"
fnc3 = "=OR(AND(" & Z3 & "<=" & T & ";" & T & "<" & Z4 & ");AND(" & Z4 & "<" & Z3 & ";" & Z3 & "<=" & T & ");AND(" & T & "<" & Z4 & ";" & Z4 & "<" & Z3 & "))"

Dim currentLine As Range
Set currentLine = Range(Cells(dline, data.Column), Cells(dline, data.Column).Offset(0, width))
currentLine.Select ' <- neccessary change solving the problem

Set frmt1 = currentLine.FormatConditions.Add(XlFormatConditionType.xlExpression, Formula1:=fnc1)
Set frmt2 = currentLine.FormatConditions.Add(XlFormatConditionType.xlExpression, Formula1:=fnc2)
Set frmt3 = currentLine.FormatConditions.Add(XlFormatConditionType.xlExpression, Formula1:=fnc3)

frmt1.Interior.Color = RGB(255, 0, 0)
frmt2.Interior.Color = RGB(0, 255, 0)
frmt3.Interior.Color = RGB(0, 0, 255) 
```

# selenium - 等待特定条件时通过 WebDriver 刷新网页

> ID：10245641
> 
> 赞同：167
> 
> 时间：2012-04-20T11:48:26.377
> 
> 标签：selenium, refresh, webdriver, selenium-webdriver

我正在寻找更优雅的方式在测试期间刷新网页（我使用 Selenium2）。我只是发送 F5 键，但我想知道驱动程序是否有刷新整个网页的方法这是我的代码

```
 while(driver.findElements(By.xpath("//*[text() = 'READY']")).size() == 0 )
        driver.findElement(By.xpath("//body")).sendKeys(Keys.F5);
        //element appear after text READY is presented      
    driver.findElement(By.cssSelector("div.column a")).click(); 
```

也许是在手动刷新页面上查找元素的更好解决方案

* * *

## 回答 #1

> 赞同：319
> 
> 时间：2012-04-20T21:31:47.400

在 Java 或 JavaScript 中：

```
driver.navigate().refresh(); 
```

这应该刷新页面。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-04-20T13:44:44.527

在 Python 中有一种方法可以做到这一点：`driver.refresh()`. 在 Java 中可能不一样。

或者，您可以`driver.get("http://foo.bar");`，尽管我认为刷新方法应该可以正常工作。

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2014-02-12T11:37:48.170

在蟒蛇

使用内置方法

```
driver.refresh() 
```

或者，执行 JavaScript

```
driver.execute_script("location.reload()") 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2016-12-02T18:49:20.570

**使用 Selenium Webdriver 刷新网页的 5 种不同方法**

没有特殊的额外编码。我刚刚以不同的方式使用了现有的功能来让它工作。他们来了 ：

1.  使用**sendKeys.Keys**方法

    ```
    driver.get("https://accounts.google.com/SignUp");
    driver.findElement(By.id("firstname-placeholder")).sendKeys(Keys.F5); 
    ```

2.  使用**navigate.refresh()**方法

    ```
    driver.get("https://accounts.google.com/SignUp");  
    driver.navigate().refresh(); 
    ```

3.  使用**navigate.to()**方法

    ```
    driver.get("https://accounts.google.com/SignUp");  
    driver.navigate().to(driver.getCurrentUrl()); 
    ```

4.  使用**get()**方法

    ```
    driver.get("https://accounts.google.com/SignUp");  
    driver.get(driver.getCurrentUrl()); 
    ```

5.  使用**sendKeys()**方法

    ```
    driver.get("https://accounts.google.com/SignUp"); 
    driver.findElement(By.id("firstname-placeholder")).sendKeys("\uE035"); 
    ```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2014-11-13T09:45:01.297

找到了各种方法来刷新 selenium 中的应用程序：-

```
1.driver.navigate().refresh();
2.driver.get(driver.getCurrentUrl());
3.driver.navigate().to(driver.getCurrentUrl());
4.driver.findElement(By.id("Contact-us")).sendKeys(Keys.F5); 
5.driver.executeScript("history.go(0)"); 
```

对于实时代码，请参考链接[http://www.ufthelp.com/2014/11/Methods-Browser-Refresh-Selenium.html](http://www.ufthelp.com/2014/11/Methods-Browser-Refresh-Selenium.html)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2015-07-08T14:30:06.297

这是稍微不同的 C# 版本：

```
driver.Navigate().Refresh(); 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-09-04T12:39:52.673

替代**页面刷新 (F5)**

```
driver.navigate().refresh(); 
```

**（或者）**

```
Actions actions = new Actions(driver);
actions.keyDown(Keys.CONTROL).sendKeys(Keys.F5).perform(); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-06-09T20:33:21.747

需要注意的一件重要事情是 driver.navigate().refresh() 调用有时似乎是异步的，这意味着它不会等待刷新完成，它只是“开始刷新”并且不会阻止进一步执行当浏览器重新加载页面时。

虽然这似乎只在少数情况下发生，但我们认为最好通过添加手动检查页面是否真的开始重新加载来确保其 100% 正常工作。

这是我在基本页面对象类中为此编写的代码：

```
public void reload() {
    // remember reference to current html root element
    final WebElement htmlRoot = getDriver().findElement(By.tagName("html"));

    // the refresh seems to sometimes be asynchronous, so this sometimes just kicks off the refresh,
    // but doesn't actually wait for the fresh to finish
    getDriver().navigate().refresh();

    // verify page started reloading by checking that the html root is not present anymore
    final long startTime = System.currentTimeMillis();
    final long maxLoadTime = TimeUnit.SECONDS.toMillis(getMaximumLoadTime());
    boolean startedReloading = false;
    do {
        try {
            startedReloading = !htmlRoot.isDisplayed();
        } catch (ElementNotVisibleException | StaleElementReferenceException ex) {
            startedReloading = true;
        }
    } while (!startedReloading && (System.currentTimeMillis() - startTime < maxLoadTime));

    if (!startedReloading) {
        throw new IllegalStateException("Page " + getName() + " did not start reloading in " + maxLoadTime + "ms");
    }

    // verify page finished reloading
    verify();
} 
```

一些注意事项：

*   由于您正在重新加载页面，因此您不能只检查给定元素的存在，因为该元素将在重新加载开始之前和完成之后都存在。因此，有时您可能会得到正确的结果，但页面甚至还没有开始加载。
*   当页面重新加载时，检查 WebElement.isDisplayed() 将抛出 StaleElementReferenceException。剩下的只是覆盖所有的基地
*   getName()：获取页面名称的内部方法
*   getMaximumLoadTime()：返回页面应该允许加载多长时间的内部方法（以秒为单位）
*   verify()：内部方法确保页面实际加载

同样，在绝大多数情况下，do/while 循环运行一次，因为在浏览器实际完全重新加载页面之前，navigate().refresh() 之外的代码不会被执行，但我们已经看到了以下情况：实际上，通过该循环需要几秒钟的时间，因为在浏览器完成加载之前， navigate().refresh() 不会阻塞。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-09-10T09:39:45.863

你也可以试试

```
Driver.Instance.Navigate().Refresh(); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-06-30T09:11:40.837

还有一种情况是您只想刷新页面上的特定 iframe 而不是整个页面。

你这样做如下：

```
public void refreshIFrameByJavaScriptExecutor(String iFrameId){
        String script= "document.getElementById('" + iFrameId+ "').src = " + "document.getElementById('" + iFrameId+ "').src";
       ((IJavaScriptExecutor)WebDriver).ExecuteScript(script);
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-06-15T16:07:09.263

在 PHP 中：

```
$driver->navigate()->refresh(); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-12-22T06:01:32.843

**在 Java 中使用 selenium 刷新当前页面的另一种方法。**

```
//first: get the current URL in a String variable
String currentURL = driver.getCurrentUrl(); 
//second: call the current URL
driver.get(currentURL); 
```

使用它会刷新当前页面，就像单击浏览器的地址栏并按回车一样。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-11-01T03:40:57.130

在[R](https://cran.r-project.org/web/packages/RSelenium/vignettes/basics.html)中，您可以使用 refresh 方法，但首先我们使用 navigate 方法导航到 url：

```
remDr$navigate("https://...")
remDr$refresh() 
```

# java - Nutch-Hadoop:- 我们如何只抓取 url 中的更新以进行重新抓取？

> ID：10245642
> 
> 赞同：0
> 
> 时间：2012-04-20T11:48:26.707
> 
> 标签：java, hadoop, nutch

请任何人告诉我如何识别要重新抓取的 url 中的更新？当页面要重新抓取时，我只想抓取页面的更新内容，而不是已经抓取的旧内容。提前致谢。普拉亚..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:42:02.527

我认为您的意思是，只有在服务器端修改了内容时，您才想重新抓取 url。您希望 nutch 识别它，从而明智地决定是否获取内容。

Nutch 有这样的概念，即维护页面的“最后修改”时间，并且在重新抓取页面时将其存储并且不投入使用。[他们知道](http://osdir.com/ml/search.nutch.devel/2004-11/msg00245.html)这会节省磁盘空间和带宽，但由于其他小东西，它没有引起人们的兴趣。[人们提出了](http://lucene.472066.n3.nabble.com/Last-Modified-metatag-in-nutch-td628964.html)这个问题，但我仍然没有看到 nutch 开发团队的任何活动。[已努力](https://stackoverflow.com/questions/1252289/why-doesnt-nutch-seem-to-know-about-last-modified)改进，我仍然不确定当前版本使用“最后修改”字段的精确程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:38:31.337

您不能告诉 nutch 只获取页面的更新内容而忘记其余未更改的数据。每次都会得到完整的内容。您可以巧妙地设置重新抓取频率，以便页面在更新后重新抓取。

# iphone - 从核心数据加载的 iPhone UIImage 逆时针旋转 90 度。怎么修？

> ID：10245649
> 
> 赞同：4
> 
> 时间：2012-04-20T11:48:50.090
> 
> 标签：iphone, objective-c, ios, core-data, uiimage

我正在使用 AVCaptureSession 从相机捕获图像：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection 
```

图像被转换为​​ UIImage 并被添加到图像视图中。正如预期的那样，图像以纵向显示。

我正在尝试在捕获会话之间将图像保存到核心数据中。我的核心数据实体具有二进制数据类型的图像属性。

```
coreDataEntity.image = UIImagePNGRepresentation(imageView.image); 
```

一旦用户重新加载之前保存的会话，图像视图就会使用以下方法恢复其图像：

```
 imageView.image = [UIImage imageWithData:coreDataEntity.image]; 
```

但是，恢复的图像逆时针旋转 90 度，顶部指向左侧。

**图像在什么时候旋转？**是在保存期间还是在从核心数据加载期间？

我有一种将 UIImage 旋转 90 度的方法，但似乎在随后重新加载同一图像时，它会额外旋转 90 度。我怎么知道我已经旋转了一次 UIImage？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-19T15:26:01.840

一年后你可能自己解决了这个问题，但我最近自己也遇到了这个问题，我想我会提出我的解决方案。

我将存储的图像格式更改为JPEG。

改变

```
coreDataEntity.image = UIImagePNGRepresentation(imageView.image); 
```

到

```
coreDataEntity.image = UIImageJPEGRepresentation(imageView.image,1.0f); 
```

图像恢复如初

```
imageView.image = [UIImage imageWithData:coreDataEntity.image]; 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T12:00:48.640

我不会在数据库中强制使用格式。通过在将其存储到数据库之前转换为 PNG，您正在删除可能需要的信息（如方向）。

如果我的假设是正确的，请尝试像这样序列化 UIImage：

```
[NSKeyedArchiver archivedDataWithRootObject:image] 
```

并以此反序列化

```
[NSKeyedUnarchiver unarchiveObjectWithData:imageData] 
```

另外，请务必查看[`NSValueTransformer`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSValueTransformer_Class/Reference/Reference.html)，它可以封装此转换，这样您就不必在它工作后处理它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-15T00:39:09.843

采用

```
let imageData = image.jpegData(compressionQuality: 1) 
```

代替

```
let imageData = image.pngData() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T11:56:47.433

我的猜测是它既不是在加载期间也不是在保存期间。我发现您有一种将图像旋转 90 度的方法很可疑，而这正是您的图像发生的情况。尝试修改您的方法以旋转不同的角度（例如零）并查看它是否会影响您的错误。我怀疑你的旋转方法被调用了，你不知道。

另一种可能性是您在拍照时将 iPhone/iPad 横向握持，但您的应用程序不支持设备旋转。

您的帖子中确实没有太多信息，所以我只是在这里钓鱼:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-07T05:04:06.150

Swift 4 > ：在将图像保存为 pngData() 之前调用此函数并在此处使用返回的图像：

```
 func rotatedCopy() -> UIImage {
    if self.imageOrientation == UIImage.Orientation.up {
        return self
    }

    UIGraphicsBeginImageContext(size)

    //draws the image in current context respecting orientation
    draw(in: CGRect(origin: CGPoint.zero, size: size))
    let copy = UIGraphicsGetImageFromCurrentImageContext()

    UIGraphicsEndImageContext()

    return copy!
 } 
```

# android - 点击 itemizeoverlay 的自定义对话框

> ID：10245652
> 
> 赞同：-1
> 
> 时间：2012-04-20T11:48:58.697
> 
> 标签：android

我正在开发地图应用程序，其中我有显示谷歌地图和覆盖项目。现在我想要自定义对话框点击覆盖项目，所以你能告诉我有没有我可以轻松实现的类？

谢谢尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:56:45.573

检查以下演示：

[http://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html](http://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:07:15.650

在你的过度类调用的 ontap 方法中，像这样

```
@Override
    protected boolean onTap(int index)
    {
        item = mOverlays.get(index);
        displaySearchResultBubble();

        return true;
    } 
```

方法是

```
private void displaySearchResultBubble() {

        //Hide the bubble if it's already showing for another result
        mapView.removeView(bubble);
        bubble.setVisibility(View.GONE);

        ///
        GeoPoint point11 = item.getPoint();
        ///
        //Set some view content

        venueName.setText("Your Message");
        MapView.LayoutParams params = new MapView.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,
            point11, MapView.LayoutParams.BOTTOM_CENTER);

        bubble.setLayoutParams(params);

        mapView.addView(bubble);

        mapView.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
        Runnable r = new Runnable() {
            public void run() {
                Animation fadeIn = AnimationUtils.loadAnimation(mContext, R.anim.fadein);
                bubble.setVisibility(View.VISIBLE);
                bubble.startAnimation(fadeIn);
            }
        };

        //This projection and offset finds us a new GeoPoint slightly below the actual OverlayItem,
        //which means the bubble will end up being centered nicely when we tap on an Item.
        Projection projection = mapView.getProjection();
        Point p = new Point();

        projection.toPixels(point11, p);
        p.offset(0, -(bubble.getMeasuredHeight() / 2));
        GeoPoint target = projection.fromPixels(p.x, p.y);

        //Move the MapView to our point, and then call the Runnable that fades in the bubble.
        mapView.getController().animateTo(target, r);
     } 
```

你的泡沫是

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:gravity="center"
  android:paddingLeft="62dip"

  >
  <LinearLayout

   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:orientation="vertical"

   >
  <TextView
  android:layout_width="185dip"
  android:layout_height="wrap_content"
  android:id="@+id/venuename"
  android:gravity="center_vertical"
  android:singleLine="true"
  android:hint="Hello"
  android:textSize="26px"
  >
  </TextView>
</LinearLayout>
</RelativeLayout> 
```

将此添加到您的 on create 方法中

```
LayoutInflater inflater = ((Activity) mContext).getLayoutInflater();
bubble = (RelativeLayout) inflater.inflate(R.layout.bubble, mapView, false);
venueName = (TextView) bubble.findViewById(R.id.venuename); 
```

希望你得到你的答案这是完整的解决方案

# seo - 多语言网站的 SEO：无需更改 URL 的语言特定结果？

> ID：10245655
> 
> 赞同：36
> 
> 时间：2012-04-20T11:49:04.137
> 
> 标签：seo, multilingual

我有一个有 2 种语言的网站：英语和瑞典语。

我想要的是，如果有人在瑞典搜索该网站，它应该显示瑞典的结果。也就是说，我希望瑞典的谷歌 (google.se) 抓取该网站的瑞典版本。对于任何其他地方，我希望能够抓取英文版。

我阅读了以下内容：http:
[//googlewebmastercentral.blogspot.se/2010/03/working-with-multilingual-websites.html](http://googlewebmastercentral.blogspot.se/2010/03/working-with-multilingual-websites.html)

它说我应该为网站设置 2 个单独的页面。有没有办法让我不需要更改网址中的任何内容？

我的意思很简单，如果 google.se 上的任何人搜索 example.com，它应该显示瑞典语的结果，其他任何地方，英语。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-05-18T12:27:35.783

这是我[关于如何为多语言网站构建 URL 的完整答案](https://webmasters.stackexchange.com/a/44289/14543)。

有许多可接受的方式来构建您的网站以实现 SEO 和国际化。每个都有优点和缺点。

## 顶级域

在多个顶级国家/地区域购买相同的域名，例如`example.com`,`example.es`和`example.de`.

**优点**

*   完全由谷歌支持。您可以将这些网站添加到[Google 网站管理员工具](http://www.google.com/webmasters/tools/)，其中有选项可以告诉 Google 如何定位它们。
*   通常受到倾向于喜欢在其国家/地区的 TLD 上发布的内容的用户的青睐
*   域名本身可以本地化。许多国际用户可能对英语单词或发音为英语的域名反应不佳。这对于不使用拉丁字母的语言尤其重要。
*   支持按国家/地区本地化。您可以拥有不同的网站，例如`example.co.uk`并`example.com.au`针对不同国家/地区的受众。这些网站可能有重复的内容，有轻微的拼写差异，但排名仍然很好。事实上，同一种语言的多个本地化站点可能比该语言的单个站点排名更好。
*   可以通过将 DNS 指向目标国家/地区的 Web 服务器来本地化托管。

**缺点**

*   购买许多域名既昂贵又耗时。特别是如果您必须处理擅自占地者。
*   Cookie 不能跨多个区域共享，这意味着用户必须分别登录到每个站点。
*   仅按语言进行本地化没有很好的选择，因为许多语言有多个国家，并且没有国家 TLD 可能是语言代码。即使在 TLD 与语言代码（如`es`.

## 子域

购买单个域，并使用子域，例如`en.example.com`, 和`es.example.com`

**优点**

*   完全由谷歌支持。
*   支持按国家*或*按语言进行本地化。
*   可以通过将 DNS 指向靠近用户的 Web 服务器来本地化托管。
*   与购买多个域名相比，实施起来既简单又便宜。
*   Cookie 可以在所有地区共享，从而实现单点登录以获得更无缝的用户体验。

**缺点**

*   没有机会本地化域名本身
*   与顶级域相比，用户可能看起来不那么本地化。

## 子目录

购买单个域，并使用子目录，例如`example.com/en/`, 和`example.com/es/`

**的优点和缺点**

*   与子域相同，只是有一个 DNS 条目会阻止您在多个国家/地区为不同的语言环境托管您的站点。

* * *

## **不**推荐的技术

*   **文件名**：使用不同的文件名，例如`index_en.html`和`index_de.html`。Google 不完全支持此技术。例如，无法在网站管理员工具中设置定位。
*   **URL 参数**：使用 URL 参数，例如`lang=en`. 不推荐使用不同文件名的原因相同。
*   **接受语言标题**：根据标题自动切换语言`Accept-Language`。
    *   许多用户没有正确设置此标头。对于可能正在使用朋友的计算机或网吧的出国旅行的用户来说尤其如此。对于安装了英语网络浏览器并了解足够英语的国际用户来说，通常也是如此，但他们更喜欢不同语言的内容。
    *   [谷歌刚刚宣布，Googlebot 将发送`Accept-Language`标头并从不同的地理位置抓取](http://googlewebmastercentral.blogspot.com/2015/01/crawling-and-indexing-of-locale.html)。但是，Google 仍然建议您为不同语言的内容设置单独的 URL。
    *   您可以使用标题来建议用户可能更喜欢网站的不同版本，方法是在他们访问的网站与标题`Accept-Language`不匹配时显示一条消息。`Accept-Language`
*   **地理 IP 地址**：根据 IP 地址的地理位置自动切换语言。
    *   Geo-ip 数据库不准确。 [多达 10% 的访客可能被分配到错误的国家](http://www.stateofsearch.com/geotargeting-based-on-ip-address-is-broken/)。
    *   一些国家（如加拿大）使用不止一种语言
    *   您可以使用 IP 地址国家/地区来建议用户可能感兴趣的一种或多种语言。

* * *

## 页面标记

当支持多种语言时，您应该清楚地标记语言元数据。

在`html`标签中使用 lang 属性：

```
<html lang="en"> 
```

[按照Google](http://googlewebmastercentral.blogspot.com/2011/12/new-markup-for-multilingual-content.html)的建议，使用其他语言的 rel 替代链接指向同一页面：

```
<link rel="alternate" hreflang="es" href="http://www.example.com/" />
<link rel="alternate" hreflang="es-ES" href="http://es-es.example.com/" />
<link rel="alternate" hreflang="es-MX" href="http://es-mx.example.com/" /> 
<link rel="alternate" hreflang="en" href="http://en.example.com/" /> 
```

或者，[可以将此信息放入站点地图文件](http://googlewebmastercentral.blogspot.com/2012/05/multilingual-and-multinational-site.html)中。

## 向 Google 介绍您的网站

您应该将网站的每种语言（或区域设置）添加到[Google Webmaster Tools](http://www.google.com/webmasters/tools/)。这可以为顶级域、子域或子目录完成。

如果您的网站是按国家/地区定位的，您应该使用网站管理员工具来设置网站定位。导航到“配置”->“设置”->“地理目标”，然后从下拉列表中选择正确的国家/地区。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-04-27T19:01:04.497

这是[谷歌关于多语言网站的官方文档](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=182192#1)。它与您链接到的 blogspot 条目具有基本相同的信息。他们写：

> 将每种语言的内容保存在单独的 URL 上。

然后就他们认为的最佳用户体验实践提供建议。

鉴于此，如果您想要获得最佳的 Google 体验，您应该遵循他们的指南并拥有特定于语言的网址。谷歌搜索当然是对语言敏感的，当人们搜索它时，它应该返回网站的适当版本。

如果您打算使用单个 URL，您打算如何设置语言？基于语言标题？Javascript检测？饼干？这些对于 SEO 来说都是潜在的问题，并且由于 Google 认为它们不是好方法，因此他们没有提供有关如何使用它们来优化 SEO 的建议。

**您最好的选择可能是听从 Google 的建议并拥有多个 URL。**

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-08-31T13:47:08.490

# 2015 年更新：

**谷歌现在支持[对语言环境自适应页面的抓取和索引](http://googlewebmastercentral.blogspot.com/2015/01/crawling-and-indexing-of-locale.html)！**

从链接的帖子中引用，他们支持：

...

*   **除了 Googlebot 当前使用的似乎来自美国的当前 IP 地址之外，Googlebot 将开始*使用似乎来自美国以外的 IP 地址的***地理分布式抓取。****
***   **与语言相关的抓取**，Googlebot 将在请求中使用*Accept-Language HTTP 标头*开始抓取。**

 **...

尽管他们仍然建议[使用单独的 URL](https://support.google.com/webmasters/answer/189077)。**

# android - android 应用程序在 2.1 之外无法运行（完美运行）

> ID：10245661
> 
> 赞同：0
> 
> 时间：2012-04-20T11:49:29.877
> 
> 标签：android, android-version

我已经构建了一个基于 2.1 的应用程序 .. 发生前向兼容性错误。虽然它在 logcat 上没有显示任何错误，但点击事件在 android 2.1 之后的任何更高版本上都不起作用。在 2.1 上它工作得很好。在我的清单中我用过使用 minsdk=7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:57:07.283

您可以使用 Eclipse 的 ADT 中包含的新 Lint 工具。此工具会通知您版本不兼容性，并向您展示在运行时哪些代码会导致崩溃，例如，Android 1.6

Eclipse--> 窗口--> 运行 android lint--> 你的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:33:23.573

你好机器人你可以像这样在manifest.xml中使用

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="11"/> 
```

# .net - 通过 Http 范围请求快速检测 GIF 尺寸（在本地工作，在 Azure 上失败）

> ID：10245662
> 
> 赞同：0
> 
> 时间：2012-04-20T11:49:37.747
> 
> 标签：.net, http, azure

[对于给定的 URL（例如http://covers.oreilly.com/images/0636920022886/bkt.gif](http://covers.oreilly.com/images/0636920022886/bkt.gif) ） ，或多或少类似于下面的例程在几个不同的环境中工作，但在 Azure 上失败，但出现以下异常：

> System.ArgumentException：参数无效。在 System.Drawing.Image.FromStream（流流，布尔 useEmbeddedColorManagement，布尔 validateImageData） 在 System.Drawing.Image.FromStream（流流）

在所有情况下，有问题的程序集都是 System.Drawing，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a，所以我假设收到的数据在 Azure 上有所不同。

```
 public static DimensionResult Is404(string url)
    {
        DimensionResult result = null;

        HttpWebRequest request = Http.PrepareGetRequest(new Uri(url), false, false, "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)");
        request.Timeout = 2500;
        request.Method = "GET";
        request.AddRange(0, 2048);
        request.KeepAlive = false;
        request.AllowAutoRedirect = true;

        try
        {
            result = new DimensionResult();

            using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
            {
                result.ContentEncoding = response.ContentEncoding;
                result.Url = response.ResponseUri.ToString();
                result.Is404 = (response.StatusCode != HttpStatusCode.PartialContent && response.StatusCode != HttpStatusCode.OK) || System.Text.RegularExpressions.Regex.IsMatch(response.ContentType, "text|html", System.Text.RegularExpressions.RegexOptions.IgnoreCase);

                if (!result.Is404)
                        using (System.Drawing.Image image = System.Drawing.Image.FromStream(response.GetResponseStream()))
                        {
                            result.Width = image.Width;
                            result.Height = image.Height;
                        }
            }
        }
        catch (Exception ex)
        {
            result.Exception = ex;
            result.Is404 = true;
        }

        return result;
    } 
```

请不要关注请求的字节数（这是一个简化版本），而是关注 .NET 网络堆栈中的哪些设置可以解释服务器之间的不同响应？

在这两种情况下，到目前为止，我已经记录了响应标头并且它们是相同的，还没有网络跟踪：

> 日期：格林威治标准时间 2012 年 4 月 20 日星期五 11:47:05，服务器：Apache，接受范围：字节，最后修改时间：格林威治标准时间 2012 年 2 月 24 日星期五 17:21:00，内容范围：字节 0-2048/3556 ,Content-Length:2049,Content-Type:image/gif,Cache-Control:max-age=2592000,Expires:Sun, 20 May 2012 11:47:05 GMT,Connection:close

**更新**：我已经记录了在两种环境中收到的字节，它们恰好是相同的！所以相同的响应头，相同的响应长度，相同的响应内容，相同的程序集，不同的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:05:42.607

根据[http://en.wikipedia.org/wiki/Graphics_Interchange_Format](http://en.wikipedia.org/wiki/Graphics_Interchange_Format)，一个 gif 文件以字符“GIF87a”或“GIF89a”开头，然后是它的宽度/高度。因此，如果您只需要宽度/高度信息，则可以读取字节 6-9。不需要 GDI+ (System.Drawing.dll)。根据我的经验，在服务器环境，特别是 Windows Azure 中使用 System.Drawing.dll 会导致不可预知的结果。如果您需要高级位图处理，您可以使用 WIC 或 WPF（在挂钩下使用 WIC）。

此致，

明旭。

# android - 如何跟踪一个应用程序包含超过 300 个事件

> ID：10245666
> 
> 赞同：3
> 
> 时间：2012-04-20T11:49:48.077
> 
> 标签：android, flurry

我的应用程序包含 450 个事件。尝试使用 flurry 检查示例应用程序包含 500 个事件时，事件摘要列表仅显示 300 个事件。是否有任何工具可以跟踪我的申请？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:44:08.260

您唯一真正的选择是让一些常见事件合并事物并使用参数进行定义。快速获取数据，您需要下载 .csv 文件以进行详细分析。

例如，我有一个事件专门用于报告我捕获的各种异常。我使用相同的事件，但随后有一个类的参数，消息形式异常，自定义消息形式代码。然后我用我的自定义数据填充的固定名称填充参数。

# java - 如何使用 Hibernate Search 处理集合更新

> ID：10245667
> 
> 赞同：0
> 
> 时间：2012-04-20T11:49:53.317
> 
> 标签：java, hibernate, lucene, hibernate-search

我正在使用 Entitymanager 执行更新，如下所示：

```
Query query1 = em.createQuery("update user u set u.changed = true where u.changed is null");
query1.executeUpdate(); 
```

changed 是一个注释字段，如下所示：

```
@Column(nullable = false)
@Field(analyzer=@Analyzer(impl=StandardAnalyzer.class))
@FieldBridge(impl=org.hibernate.search.bridge.builtin.BooleanBridge.class)
private Boolean changed = false; 
```

更新后，lucene 索引不会更新。我该怎么做才能使 lucene 索引也得到更新？

亲切的问候克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T08:54:28.927

执行 SQL 查询会绕过会话生命周期。因此，自动索引更新将不起作用。你基本上有两个选择：

1.  通过条件查询加载受影响的实体，修改它们然后保存它们（当然都在会话中）
2.  通过搜索索引 API 手动索引实体。不过这里的想法相同，您需要选择/查询要索引的正确实体

# eclipse - 重复日食

> ID：10245673
> 
> 赞同：2
> 
> 时间：2012-04-20T11:50:12.850
> 
> 标签：eclipse, configuration, duplicates, setting

我有 eclipse Indigo 版本，我可以在其中运行 java 和 C++ 项目。但我只想使用另一个 Eclipse 来编写 C++ 项目。所以我将eclipse的源文件夹（不是工作区）复制（未剪切）到不同的位置。我原以为 eclipse 会询问工作场所的位置，并且项目资源管理器中不会有项目，但是有我的旧项目并且没有询问工作场所的位置。我不知道如何制作新的日食，而我不想删除或损坏旧的日食。顺便说一句，我没有快速的互联网连接来再次下载 Eclipse。如果你知道如何解决我的问题，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:57:52.220

如何创建一个新工作区（通过选择*File* > *Switch Workspace*或通过重新启动 Eclipse）。

只要 Eclipse 从新工作区运行，您就可以导入所需的项目。您可以通过右键单击 Package Explorer View 并选择*Import*来执行此操作。然后选择*General*选项卡并在其中选择*Existing Projects into Workspace*。

从这里，您可以导航到现有项目并选择它。如果您想独立于其他工作区编辑它，您还应该能够指定您希望它在磁盘上创建此项目的单独副本。

（创建新工作区后的另一个选择是简单地将项目文件夹从旧工作区复制到新工作区。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:27:13.327

正如 Treebranch 的回答中所详述的，您可以只安装一个具有不同工作区的 Eclipse。

但是，没有提示您在重复的 Eclipse 文件夹中选择新工作区的原因是最近的工作区列表也被复制 - 它存储在以下文件中（无论如何在 Eclipse 3.6 中）：

```
\Eclipse\configuration\.settings\org.eclipse.ui.ide.prefs 
```

如果您使用记事本打开它，您可能会看到标志`SHOW_WORKSPACE_SELECTION_DIALOG`设置为`false`（因此不会在 Eclipse 启动时显示对话框）。如果设置为`true`，下次启动时Eclipse会提示

或者，可以安全地删除此文件，Eclipse 也会在启动时重新创建它

# html - 网页中文本选择的颜色变化

> ID：10245676
> 
> 赞同：1
> 
> 时间：2012-04-20T11:50:17.937
> 
> 标签：html, css

css/javascript选择文本时如何更改文本的颜色？跨浏览器兼容的解决方案将是首选。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:59:55.520

只需`::selection`在您的样式表中使用。[您可以在 quirksmode.org 上](http://www.quirksmode.org/css/selection.html)查看示例。正如您[可以在此处阅读](http://www.quirksmode.org/css/contents.html#t315)的那样，所有现代浏览器都支持这一点，除了 Internet Explorer <9。

# android - Android ColorFilter - Porter-Duff 模式

> ID：10245681
> 
> 赞同：14
> 
> 时间：2012-04-20T11:50:34.533
> 
> 标签：android, colors, filter, porter-duff, colorfilter

我正在尝试解决 android 的问题`ColorFilters`。文档很差，所以主要方法是尝试不同的变体。

问题：

有一个位图。有些像素的 alpha=255，有些像素的 alpha=0。我正在尝试用特定颜色绘制一个圆圈。我希望位图中的 alpha 通道保持不变，但是在绘制时我想将颜色与位图 alpha 相乘。

因此，在绘制圆圈时，我希望不绘制 alpha=0 的像素，但要以我想要的颜色绘制 alpha=255 的像素。Alpha 通道不应该改变。

我正在尝试使用 porter-duff ColorFilter（android sdk 中的 PorterDuffColorFilter 类）。

官方网站上有太多模式和无法理解的描述：http: [//developer.android.com/reference/android/graphics/PorterDuff.Mode.html](http://developer.android.com/reference/android/graphics/PorterDuff.Mode.html)

我想我应该使用`DST_ATOP`or `SRC_ATOP`，但它们不像我描述的那样工作。

另外，porter-duff colorfilter 的构造函数中有一个奇怪的参数`srcColor`。

我不明白公式中的“Sa”和“Sc”是什么意思`[Da, Sc * Da + (1 - Sa) * Dc]`。它可以来自传递给颜色过滤器构造函数的颜色，也可以由“paint.setColor”设置颜色。

有谁知道，它是如何工作的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T12:02:12.917

`Sa`并且`Sc`分别是“source alpha”和“source color”的缩写。构造函数中的`srcColor`参数`PorterDuffColorFilter`是用于这些值的颜色。

对于您的情况，`Mode.MULTIPLY`可能效果最好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T07:31:27.377

请注意，Porter-Duff 模式仅被定义为与预乘 alpha 一起正常工作。这意味着 R、G 或 B 分量都不能超过 alpha 值。

[用于展示所有 Porter-Duff 模式的 Android 项目的GitHub 项目](https://github.com/ldo/porter_duff_browser_android)。[Android 应用程序](https://play.google.com/store/apps/details?id=nz.gen.geek_central.porter_duff_browser&hl=en)也可在 Playstore 上找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T18:46:13.070

经过一些研究，我得出了关于 Android 中 PorterDuff 颜色模式的结论，

*   Sa 和 Sc 是源 Alpha 和源颜色，例如，如果我将 ColorFilter 设置为类似 myDrawable.setColorFilter(desiredColor,Mode.SRC_ATOP) 的可绘制对象，则 Sa 和 Sc 值将取自 desiredColor 而不是 myDrawable。Da 和 Dc 将是 myDrawable 的原始 alpha 和颜色值。
*   我有一个图像，我想使用来自用户输入的 alpha 值应用某些颜色。我尝试使用 PorterDuff 模式，我最初的 myDrawable 是一个九个补丁可绘制对象，它具有透明背景和三角形角，如消息气泡三角形。当我使用

    公共静态最终 PorterDuff.Mode SRC [Sa, Sc]

它应用了源颜色和源 Alpha，我认为上述 setColorFilter 方法所需的颜色的颜色和 Alpha 值，我得到了正确的颜色值，即颜色和 alpha 已正确应用于新的 Drawable，但该图像上的三角形已完全清洗/删除。所以我不得不使用 ColorMatrixFilter 和设置矩阵并将 alpha 值分别设置为可绘制。

# facebook - 创建自定义应用程序 Facebook 页面

> ID：10245683
> 
> 赞同：0
> 
> 时间：2012-04-20T11:50:38.853
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我如何在 facebook 上创建一个像[http://www.facebook.com/AmyPorterfield/app_208412272531040这样的自定义页面？](http://www.facebook.com/AmyPorterfield/app_208412272531040)我将使用它连接到收藏夹中的时间线页面，如果您能帮助我，不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:36:28.180

你需要去developers.facebook.com 并在那里注册一个应用程序。您必须在一些开发包（Visual Studio）中创建您的应用程序。您还必须主持它。然后将 facebook 中的应用程序指向服务器上的应用程序。

希望这可以帮助

# php - 当android应用程序关闭时向服务器发送通知

> ID：10245684
> 
> 赞同：0
> 
> 时间：2012-04-20T11:50:49.370
> 
> 标签：php, android, notifications

我创建了一个用于定位其他人和服务器的应用程序...现在如果有人通过 Advanced Task Killer 关闭应用程序（此应用程序用于杀死不必要的应用程序）我如何发送通知或消息到服务器说这个人已经关闭了应用程序。示例：- 我有一个应用程序可以检测其他人的位置。我的另外 2 个朋友也有。有一个服务器检查我们的位置。现在，如果我的一个朋友如上所述关闭应用程序，我如何向创建的服务器发送消息或通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:00:12.300

在调用finish()之前；（如果你打电话）或在 onDestory(); 使用 HttpClient 发布请求将“已关闭”作为请求参数发送到您的服务器 url，例如“http:YOUR_SERVER_URL/?status=closed”。

在服务器捕获它作为 request.getparamer("status");//它的 JSP 代码

如果您想告知您的朋友，请使用 C2DM 作为推送通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:59:06.753

> 我如何向服务器发送通知或消息说此人已关闭应用程序

你没有。如果用户强制停止您的应用程序，您将无法控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:59:11.813

看一下活动生命周期。我认为您正在寻找的是在当前活动中调用 onDestory() 中的服务器...

# magento - 如何显示magento联系页面面包屑？

> ID：10245686
> 
> 赞同：2
> 
> 时间：2012-04-20T11:50:54.050
> 
> 标签：magento, breadcrumbs

我是 magento 的新手。未显示联系页面面包屑。我可以在 magento 联系页面中创建一个面包屑，但面包屑显示在所有页面上。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T05:13:31.780

是的，我修好了。在contacts.xml 我添加代码

```
<reference name="root">
  <action method="unsetChild"><alias>breadcrumbs</alias></action>
  <block type="page/html_breadcrumbs" name="breadcrumbs" as="breadcrumbs">
    <action method="addCrumb">
      <crumbName>home</crumbName>
      <crumbInfo><label>Home</label><title>Home</title><link>/</link></crumbInfo>
    </action> 
    <action method="addCrumb">
      <crumbName>contacts</crumbName>
      <crumbInfo><label>Contact us</label><title>Contact us</title></crumbInfo>
    </action>
  </block>
</reference> 
```

# xcode - Xcode - 更改公司名称和用户名

> ID：10245689
> 
> 赞同：39
> 
> 时间：2012-04-20T11:51:13.923
> 
> 标签：xcode, xcode4.2

我想改变这个：

```
//
//  ViewController.h
//  MyApp
//
//  Created by _username on 12-04-05.
//  Copyright _company_name. All rights reserved.
// 
```

我试过了：http: [//macdevelopertips.com/xcode/change-company-name-in-xcode.html](http://macdevelopertips.com/xcode/change-company-name-in-xcode.html)并没有奏效。

我也试过这个： http: [//iosdevelopertips.com/xcode/change-company-name-from-within-xcode-on-a-per-project-basis.html](http://iosdevelopertips.com/xcode/change-company-name-from-within-xcode-on-a-per-project-basis.html)但它在 Xcode 4 中不存在。

我正在使用 Xcode 4.2

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-20T11:57:46.997

转到系统偏好设置->用户和组->单击您的用户名

在该页面上应该有一个按钮说`Open...`单击它并更改您的联系人中的记录。当您创建一个新类时，它应该从该记录中获取信息！

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-11-22T05:28:19.117

要在 Xcode 6 中更改作者姓名，只需进入`User & Groups`系统偏好设置，右键单击当前用户（确保权限已解锁），选择`Advanced Options`，更改“全名”部分。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-05-04T17:02:49.070

**对于用户名：**

打开通讯录并转到您的用户帐户，然后编辑您的姓名（顶部的粗粗线）。（地址簿默认是应用程序文件夹中的第一个应用程序。）

如果您不知道哪个联系人是您的用户帐户：打开系统偏好设置。转到用户和组（在系统行中）；您的用户帐户应该已经被选中。单击通讯簿卡的“打开...”按钮。

在通讯簿中更改您的姓名不会更改任何已创建的文件；它只会影响您创建的新文件。

**公司名称：**

在 Xcode 4 中，打开您的项目。选择 Project Navigator 中最顶部的项目（MyProjectName、1 个目标、iOS SDK 4.3 或其他）。打开文件检查器（查看->实用程序）。在项目文档部分，您应该看到“组织”行。编辑它，您创建的新文件将显示新的组织名称。这是一个项目设置，因此您必须为每个项目都这样做。

对于您创建的新项目，组织名称将是之前打开的项目中的任何值。（您可以在创建新项目时对其进行编辑。）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-06-29T07:35:13.513

我知道这个问题已经很老了，但是我找到了一种无需更改全名即可自定义模板的方法。它基本上包括创建一个名为 IDETemplateMacros.plist 的自定义 plist 文件，创建一个名为`FILEHEADER`under的新键`Root`并将标题文本作为值。然后，您需要将此标头复制到以下位置之一：

*   项目用户数据：`<ProjectName>.xcodeproj/xcuserdata/[username].xcuserdatad/`

*   项目共享数据：`<ProjectName>.xcodeproj/xcshareddata/IDETemplateMacros.plist`

*   工作区用户数据：`<WorkspaceName>.xcworkspace/xcuserdata/[username].xcuserdatad/`

*   工作区共享数据：`<WorkspaceName>.xcworkspace/xcshareddata/`

*   用户 Xcode 数据：`~/Library/Developer/Xcode/UserData/`

我尝试将其复制到我的用户 Xcode 数据文件夹

更多信息可以在[这里找到](https://medium.com/@silmy/how-to-easily-change-your-file-header-text-in-xcode-347fa77d76f4)

可以在[此处](https://oleb.net/blog/2017/07/xcode-9-text-macros/#text-macros-reference)找到可用宏的完整列表或查看 Xcode 帮助

# objective-c - 如何使用 TBXML 的方法从给定的 url 加载 XML 文档？

> ID：10245690
> 
> 赞同：0
> 
> 时间：2012-04-20T11:51:17.140
> 
> 标签：objective-c, ios, xcode4, tbxml

我正在尝试使用 TBXML 的方法：

```
+ (id)tbxmlWithURL:(NSURL*)aURL success:(TBXMLSuccessBlock)successBlock failure:(TBXMLFailureBlock)failureBlock; 
```

来自 TBXML+HTML.h 但我找不到任何关于`TBXMLSuccessBlock`and的信息`TBXMLFailureBlock`。即使在官方教程中，您也只能看到：

```
TBXML * tbxml = [[TBXML tbxmlWithURL:[NSURL URLWithString:@"http://www.w3schools.com/XML/note.xml"]] retain]; 
```

但是当我尝试它时，Xcode 告诉我没有这样的类方法。顺便说一句，我正在使用 ARC（所以我不写`retain`）。

所以问题是：如何从给定的 url 使用 TBXML 的方法加载 XML 文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:15:28.777

`TBXMLSuccessBlock`并`TBXMLFailureBlock`用作实现从给定 URL 成功和不成功检索 XML 数据的条件的有效方法。查看 Apple 的[Blocks 编程指南](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)，了解有关 Objective-C 块的更深入信息。

如果你只是想要一些关于如何使用它的示例代码，这里是（使用最新版本的 TBXML）：

```
TBXMLSuccessBlock s = ^(TBXML *tbxml) {
    NSLog(@"yay");
    // Do something with TBXML object "tbxml
    // ...
    // An example - print the name of an element
    TBXMLElement *e = [TBXML childElementNamed:@"head" parentElement:tbxml.rootXMLElement];
    NSString *a = [TBXML elementName:e];
    NSLog(@"%@",a);
};

TBXMLFailureBlock f = ^(TBXML *tbxml, NSError *error) {
    // Do something to recover from the failure here
    // ....
    NSLog(@"nay");
};

[TBXML newTBXMLWithURL:[NSURL URLWithString:@"http://www.google.co.nz"]
                              success: s
                              failure: f]; 
```

当您执行此代码时，如果您有权访问以下 URL，则应该执行 TBXMLSuccessBlock。如果您无法访问该网站，TBXMLFailureBlock 将执行。

附带说明一下，如果您使用的库是非 ARC（假设该库是源代码而不是静态或动态库）并且您尝试将其集成到 ARC 化的源中，您可以在 Xcode 下通过转到您的 xcodeproj 文件 -> 构建阶段 -> 编译源并为每个不使用 ARC 的 .m 文件输入编译器标志，该标志`-fno-objc-arc`将告诉编译器不要使用 ARC 编译它。

# php - 统计一个按钮的点击次数，保存到MYSQL然后显示当前值（AJAX，PHP）

> ID：10245693
> 
> 赞同：1
> 
> 时间：2012-04-20T11:51:31.150
> 
> 标签：php, jquery, ajax

这是我想在[http://geheimprojekt.nomachines.org/上完成的任务](http://geheimprojekt.nomachines.org/)

1.  用户点击“Nochmal！” 按钮（生成新词组合）
2.  将点击发送到我的 MySQL 数据库（无需重新加载页面），将“点击”行增加 1
3.  更新段落中的文本“到目前为止已经生成了 n 个单词组合”。

这是我第一次尝试使用 AJAX。我有 jQuery 知识，但我无法连接看起来的点。

SQL

```
CREATE TABLE IF NOT EXISTS `sggcount` (
  `counter` bigint(20) NOT NULL DEFAULT '2'
) ENGINE=MyISAM DEFAULT CHARSET=latin1 COLLATE=latin1_german2_ci;

--
-- Dumping data for table `sggcount`
--

INSERT INTO `sggcount` (`counter`) VALUES
(2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:04:57.363

让它工作非常简单。您需要一些 html 用于将来要放置计算的 div：

```
<div id="counting"></counting> 
```

然后在 generator() 函数的末尾添加：

```
function generator(){
    /*your code here...*/    
    var element = document.createElement("div");
    element.setAttribute("id", "result");
    element.appendChild(document.createTextNode(name));
    document.getElementById("placeholder").appendChild(element);
    /*the ajax code here*/
    var url='urltophpfile/phpfile.php';
    $.get(url,function(data){
        $('#counting').html(data+' Word combinations have been generated so far.');
    });
 } 
```

现在在您的 phpfile.php 文件中，您将需要代码来增加计数。如果现在我也可以提供帮助，我想您知道该怎么做。我将在此处添加一些示例代码，以便您有所了解。

```
<?php
  mysql_connect('localhost', 'db-sgg', 'password') or die('Cannot connect to database server');
  mysql_select_db('db1152127-sgg') or die('Cannot select database');
  $databasecall = mysql_query("SELECT counter FROM sggcount WHERE counter > 1");
  /*so here you select the already stored value and then you make an update to increment it*/
  mysql_query("UPDATE sggcount SET counter=counter+1");
  $count = mysql_fetch_assoc($databasecall);
  echo $count['counter']+1;
?> 
```

通过执行上面的回显，您将返回增加的值，并且 ajax 将显示它。

# 更新 1

添加了更全面的 php 代码

注意：如果您添加 jquery 脚本，请将生成器函数更改为使用 jquery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:00:21.060

在点击使用时发送 AJAX 请求：

```
$('#button').click(function(){ // when user `click` element with `id="button"` (#button)
 $.ajax({ // Start AJAX call
  url: 'accept.php', // URL to send AJAX request
  success: function(data) { // Function to execute on SUCCESS reply (reply data as paramenter)
    var cc = $('#clicks_count').html(); // In your element with `id="clicks_count"` you store your click count (`<a id="clicks_count">21</a>`). Assign to `cc` javascript variable value of clicls_count
    $('#clicks_count').html(cc + 1); // Increasing clicls_count on 1 and write it to `<a id="clicks_count">22</a>`
  }
});
}); 
```

在 accept.php 使用脚本将点击计数器增加 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:58:47.643

使用 jQuery，您可以将点击事件绑定到您的按钮并发出 ajax 请求。

*   [jQuery ajax 文档](http://api.jquery.com/jQuery.ajax/)

在服务器端，您的 PHP 页面应该更新 SQL 数据。跟随 Javascript 演示代码

```
$(document).ready(function(){
    $('button-selector').click(function(){
        //use jquery ajax call to call php server page that update SQL data
        $.ajax({
              url: "updateClick.php",
             context: document.body
             }).success(function() { 
                     //success callback
             });
    });
}); 
```

# continuous-integration - TeamCity 工件打包

> ID：10245695
> 
> 赞同：2
> 
> 时间：2012-04-20T11:51:35.643
> 
> 标签：continuous-integration, teamcity, teamcity-7.0

TeamCity 具有非常有用的功能，可以在构建后获取所有工件 - 全部下载 (.zip)

我想知道是否有办法以某种方式计算该聚合 zip（例如 MD5）的校验和？当然，我可以设置一个新的构建配置来下载工件，计算总和并发布它，但我正在寻找简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:05:16.543

最后以自定义步骤压缩所有工件，然后计算校验和并让 TeamCity 自动压缩我的存档和总和文件。

# vb.net - “索引超出范围。必须为非负数且小于集合的大小。参数名称：索引”

> ID：10245696
> 
> 赞同：0
> 
> 时间：2012-04-20T11:51:40.320
> 
> 标签：vb.net, exception

我正在运行 VB.NET 程序并出现错误

“索引超出范围。必须为非负数且小于集合的大小。参数名称：索引”

我的代码如下所示。

```
 If Status.InvokeRequired Then
        Try
            Status.Invoke(New delegateoneArg(AddressOf onChangeEvent), ws)
            Catch ex As DivideByZeroException
            MessageBox.Show(ex.Message)

        End Try
    Else
        onChangeEvent(ws)
    End If 
```

我有错误... Status.Invoke(New delegateoneArg(AddressOf onChangeEvent), ws)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:55:20.757

检查`Invoke`状态对象的方法。这是访问具有超出范围值的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:56:27.447

检查`onChangeEvent`处理程序的定义。您可能已经访问过那里的索引。发布更多详细信息以获得可靠的答案。

# jquery - 如何从文本区域的每一行独立提取文本？

> ID：10245697
> 
> 赞同：0
> 
> 时间：2012-04-20T11:51:40.470
> 
> 标签：jquery, html

我有下面的代码。我将在文本区域中放置一个值列表。并且 iframe 应该将 a 行中的值连接到硬编码的 URL，当我单击下一步时，它应该连接下一行的值；当我单击上一行中的值时。

```
<HTML>
<Head>
<button>Previous</button>
<button>Next</button>
<textarea rows="10" cols="20">
Values here
</textarea>
</br>
</head>
<body>
<iframe src="http://www.domain.com/"*&rowValue from the textarea* height="1200px" width="1200px">
  <p>Your browser does not support iframes.</p>
</iframe>
</body>
</HTML> 
```

这是@Adeneo 回复后的代码： 这是我使用您的参考编写的代码，但我无法让它工作。此外，如果可能的话，脚本是否还可以在 iframe 上方显示我当前正在查看的 ASIN？

```
<HTML>
<Head>
<button id="prev">Previous</button>
<button id="next">Next</button>
<textarea rows="10" cols="20" value="">
ASINs here
</textarea>
<button id="go">Go</button>
<br/>
</head>
<body>
<iframe id="myframe" src="http://www.amazon.co.uk/dp/" height="100%" width="100%">
  <p>Your browser does not support iframes.</p>
</iframe>
<script>var domain='http://www.amazon.co.uk/dp/';

$('#prev, #next').on('click', function(e) {
    var Myval = $('textarea').val().split('\n'),
        now = $('#myframe').attr('src').replace(domain, '');
    if (Myval.indexOf(now)==-1) {
        var src=domain+Myval[0];
    }else{
        var p = Myval.indexOf(now)!==0 ? Myval.indexOf(now)-1 : Myval.length-1,
            n = Myval.indexOf(now)==(Myval.length-1) ? 0 : Myval.indexOf(now)+1,
            src = e.target.id=='next' ? domain+Myval[n] : domain+Myval[p];
    }
    $("#myframe").attr('src', src);
    console.log(src);
});
?
</script>
</body>
</HTML> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:52:50.560

也许这样的事情会有所帮助：

```
var domain='http://www.domain.com/'; //could also be gotten from src attr.

$('#prev, #next').on('click', function(e) {
    var Myval = $('textarea').val().split('\n'),
        now = $('#myframe').attr('src').replace(domain, '');
    if (Myval.indexOf(now)==-1) {
        var src=domain+Myval[0];
    }else{
        var p = Myval.indexOf(now)!==0 ? Myval.indexOf(now)-1 : Myval.length-1,
            n = Myval.indexOf(now)==(Myval.length-1) ? 0 : Myval.indexOf(now)+1,
            src = e.target.id=='next' ? domain+Myval[n] : domain+Myval[p];
    }
    $("#myframe").attr('src', src);
}); 
```

[小提琴](http://jsfiddle.net/adeneo/hxxVD/1/)

并且不要将您的 HTML 放在文档的头部，阅读文档类型、头部、正文等。

# android - 为什么获取额外数据总是返回null？

> ID：10245701
> 
> 赞同：2
> 
> 时间：2012-04-20T11:51:49.217
> 
> 标签：android, alarms

我正在为药物和约会设置警报……当我设置警报时，我会添加额外的数据，以便稍后在警报响起时使用它们……。这是在我的公共类 AlarmUtil 中设置药物警报的一些代码：

```
 private static void setLimitedDurationAlarms(Context ctxt, MedicineClass med)
{
    long ONE_DAY = 86400000;
    AlarmManager mgr = (AlarmManager) ctxt.getSystemService(Context.ALARM_SERVICE);
      // set up the first alarm
    Calendar firstDoseTime = med.getFirstDoseTime();
    // get firstDoseDate
    Calendar firstDoseToday = med.getStartDate();
    // set the time for the first dose for today.
    firstDoseToday.set(Calendar.HOUR_OF_DAY, firstDoseTime.get(Calendar.HOUR_OF_DAY));
    firstDoseToday.set(Calendar.MINUTE, firstDoseTime.get(Calendar.MINUTE));
    Intent i = new Intent(ctxt, OnAlarmReceiver.class);

    i.putExtra("MEDICINE", med.getName());
    i.putExtra("LAST_ALARM", "FALSE");

    PendingIntent pi = PendingIntent.getBroadcast(ctxt, getUniqueID(), i, 0);
    mgr.set(AlarmManager.RTC_WAKEUP, firstDoseToday.getTimeInMillis(), pi);
      ……….
     …… 
```

接到警报时…… 我需要获取警报的额外数据以了解它是用于药物还是约会.. 并且还需要使用每个药物或应用程序的特定数据来获取对象并在通知中显示其信息.. 如下一个代码..

```
public class OnAlarmReceiver extends BroadcastReceiver
{

@Override
public void onReceive(Context ctxt, Intent intent)
{
    Log.d("Alarm", "Alarm OFF! BEEP BEEP BEEP!");

    Bundle data = intent.getExtras();
    String medicine = (String) data.getCharSequence("MEDICNIE");
    String appointment = (String) data.getCharSequence("APPOINTMENT");
    String AppAction = (String) data.getCharSequence("APP_ACTION");

    if (medicine == null)
       // this alarm is not for medicine = for App
    // use "appointment" values to get the appointment object from appointment list
      else
       // this is medicine alarm..
       // use "medicine" value to get the medicine object form medicines list
        ……. 
```

问题是我从意图额外数据中获得的所有数据总是返回 null ！

如果有人知道这个问题，我希望以最简单的方式回答我，因为我对 android 很陌生 ..
等待帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:56:07.043

您只需在意图中设置两个键：

*   药物
*   LAST_ALARM

但是您尝试获取未设置的键：

*   预约
*   APP_ACTION

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:01:48.660

检查您的医学拼写

设置时：

```
i.putExtra("MEDICINE", med.getName()); 
```

阅读时：

```
data.getCharSequence("MEDICNIE"); 
```

其中“ **MEDICNIE** ”与“ **MEDICINE** ”不同

# selenium - 使用 Selenium 进行图像评级

> ID：10245705
> 
> 赞同：0
> 
> 时间：2012-04-20T11:52:07.250
> 
> 标签：selenium

我正在尝试使用硒对某些图像进行评分。

我给评级为`4`（点击第 4 星），我`xpath`使用 firebug add on 找到评级字段。xpath是

```
css=img[alt="4"] 
```

所以，我写了

```
selenium.click("css=img[alt="4"]"); 
```

但它给出了错误..

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:41:14.683

您没有找到[XPath](http://www.w3.org/TR/xpath/)，而是[CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)。

XPath 解决方案：

```
selenium.click("xpath=//img[@alt='4']"); 
```

CSS选择器解决方案：

```
selenium.click("css=img[alt=4]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:33:46.233

给出哪个错误？？如果找不到元素，请使用 xpath 作为

```
xpath=//img[@alt='4'] 
```

# sql - PostgreSQL 循环中的变量

> ID：10245712
> 
> 赞同：0
> 
> 时间：2012-04-20T11:52:24.520
> 
> 标签：sql, postgresql, variables, loops, plpgsql

我有以下功能（返回一组自定义类型）

```
CREATE OR REPLACE FUNCTION myfunction(in_myvar integer)
  RETURNS SETOF my_type AS
$BODY$

DECLARE
    v_data my_type%rowtype;
    v_another_var text;
BEGIN
    FOR v_data IN (

        -- I want to be able to do a SELECT INTO v_another_var in each iteration
        -- of the loop, ideally so I can use this value throughout the select
        -- statement e.g.:
        -- SELECT INTO v_another_var regex_replace(col3, '[^a-zA-Z0-9 ]', '');

        SELECT DISTINCT 
            col1
            col2,
            -- v_another_var AS some_column
            -- etc.
            -- perhaps use this v_another_var again here
            -- as part of something else.
          FROM mytable
          WHERE v_another_var = 'test' + some_function() = 'something'
                    -- want to use the variable again here.
    ) LOOP
        RETURN NEXT v_data;
    END LOOP;
    RETURN;
$BODY$ 
```

是否可以分配一个变量并以这种方式在每个选择语句中作为循环的一部分使用它？即使这是可能的，SELECT INTO 语句是否可以在我拥有它的地方工作（col3 可以访问吗？）

postgres 有没有办法实现这种变量的使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:44:19.560

您需要在控制循环的查询中选择 v_another_var 的值，或者在`LOOP`/`END LOOP`构造内部，如果您希望在循环的每次迭代中使用不同的值。如果需要，您总是可以有额外的查询来分配循环内的其他值。

如果没有更具体的例子，很难提出更具体的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T16:15:30.907

你的问题一团糟。其中大部分根本没有任何意义。

> 是否可以分配一个变量并以这种方式在每个选择语句中作为循环的一部分使用它？

*   您的问题中只有*一个*SELECT 语句。你没有道理。

*   SELECT 语句中没有“循环”。您可以遍历 SELECT 语句产生的行。

> 即使这是可能的，INSERT INTO 语句是否可以在我拥有它的地方工作（col3 可以访问吗？）

*   它根本不会。无论你在哪里拥有它，也不是你在那里拥有什么。
    *   也许你的意思是 SELECT INTO？
    *   没有`FROM`子句，`col3`是未定义的。
    *   FOR 循环中只有*一个*语句。更多关于这进一步。

此外 ...

*   FOR 循环的 SELECT 不需要括号。

*   [`regexp_replace()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)，不是`regex_replace()`。

*   PostgreSQL 中的文本连接：`'test' || some_function()`
    不是`'test' + some_function()`

*   你需要括号`WHERE x = (a || b)`

*   缺少语言声明。`language plpgsql`在最后添加。

* * *

您**可能会问**`FOR`什么（疯狂猜测）：是的，您可以在一个循环中分配多个变量。[我在这里引用手册：](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-RECORDS-ITERATING)

> 目标是记录变量、行变量或以逗号分隔的标量变量列表。

但是，您不能像您尝试的那样混合记录变量和标量变量。你必须...

a) 将复合类型拆分`v_data`为标量变量并按顺序列出它们，然后附加`v_another_var`到 FOR 目标列表。

`v_another_var`或 b)向复合类型添加一个文本列（而不是） `my_type`。但是，在这种情况下，您必须重新组织`RETURN NEXT`语句。由于我只是猜测您的问题可能是什么，因此我不会详细说明。

如果您想要一个准确的答案，请清理您的问题并提出一个准确的问题。

# c# - 使用大量样本绘制信号

> ID：10245717
> 
> 赞同：0
> 
> 时间：2012-04-20T11:52:44.973
> 
> 标签：c#, .net, drawing

我需要显示一组信号。每个信号由数百万个样本定义。仅处理样本的集合（用于根据位图大小将样本转换为点）需要大量时间（尤其是在滚动期间）。

所以我实施了某种下采样。我只是跳过一些点：根据信号特征，每 2 点、每 3 点、每 50 点取一次。它极大地提高了速度，但显着扭曲了信号形式。

有没有更聪明的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:17:30.170

我们在最近的一个应用程序中遇到了类似的问题。我们的可视化（一个简单的折线图）在缩小以查看数据的全部范围时变得过于混乱（大约 7 天的样本，或多或少每 6 秒采集一次样本），因此下采样实际上是要走的路. 如果我们不这样做，缩小就没有多大意义，因为你所看到的只是一大块线条涂抹在屏幕上。

这完全取决于您将如何实施下采样。有两种（简单）方法：在您获取样本时下采样或在显示时下采样。在这两种情况下，真正能大幅提升性能的是正确选择数据源。

假设您有 700 万个样本，而您的查看窗口只对最后一百万个点感兴趣。如果您的实现依赖于 IEnumerable，这意味着 IEnumerable 必须在实际启动之前 MoveNext 600 万次。但是，如果您使用的是针对随机读取优化的东西（想到一个 List），您可以为此实现自己的枚举器，或多或少像这样：

```
public IEnumerator<T> GetEnumerator(int start, int count, int skip)
{
    // assume we have a field in the class which contains the data as a List<T>, named _data
    for(int i = start;i<count && i < _data.Count;i+=skip)
    {
        yield return _data[i];
    }
} 
```

显然这是一个非常幼稚的实现，但是你可以在 for 循环中做任何你想做的事情（使用基于周围样本的算法来平均？）。但是，这种方法通常会消除信号中的任何极端尖峰，因此请注意这一点。

另一种方法是为不同的范围创建数据集的一些通用版本，当您收到新信号时，它们会自行更新。您通常不需要更新完整的数据集；仅仅更新你的集合的结尾可能就足够了。这允许您对数据进行更高级的处理，但会消耗更多内存。您必须在应用程序中缓存不同的“层”细节。

但是，阅读您的（简短）解释，我认为显示时间优化可能就足够了。如果您进行概括，您的信号总会出现失真。您总是会丢失数据。这取决于您选择的算法如何发生这种失真，以及它会有多明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:56:40.700

您需要更好的采样算法，也可以使用 c# 的并行处理功能。请参阅[任务并行库](http://msdn.microsoft.com/en-us/magazine/cc163340.aspx)

# c# - .net 移动文件丢失原始和父文件夹安全权限

> ID：10245719
> 
> 赞同：2
> 
> 时间：2012-04-20T11:52:56.683
> 
> 标签：c#, iis-7, permissions, windows-server-2008, iis-7.5

我有一个 CMS 驱动的网站，它运行得非常好。我们最近将它从 Windows 2008 服务器移到了 Windows 2008 R2 服务器。

据我所知，文件夹权限已正确复制，但我们发现通过 .net CMS 添加的文件没有继承文件夹权限。

我什至已经将网站文件夹的根目录设置为完全控制权限，但这似乎也无济于事。

我以前从未在 Windows 2008 服务器上遇到过这个问题。所以我唯一可以将其归因于 2008 R2。

有什么建议么？

**更新：**

我对此进行了更多研究，似乎从表单发布作品中保存了文件，但是当我将其从临时文件夹移动到活动文件夹时，它没有获得新文件夹的权限，实际上它甚至失去了权限原来，它减少到：

System（完全控制）、Network service（完全控制）、Administrators（完全控制）、IIS_Users（特殊）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:08:13.413

你看过 FileAttributes 方法吗？

它没有经过测试，但是当您上传文件时，类似的东西可能会起作用：

```
 FileAttributes attributes = File.GetAttributes(path);

  if ((attributes & FileAttributes.ReadOnly) == FileAttributes.ReadOnly)
  {
      attributes = FileAttributes.Normal;

      File.SetAttributes(path, attributes);
  } 
```

# ruby-on-rails - Ruby & Rails：字符串中的变量

> ID：10245722
> 
> 赞同：0
> 
> 时间：2012-04-20T11:53:09.107
> 
> 标签：ruby-on-rails, ruby

这是我的代码，它被加载到一个辅助类中

```
output += '<button class="del_account" param-del="{account.id}">delete</button>' 
```

当我将其呈现为 html 时，account.id 只是转换为字符串。而不是我需要的'id'。我该如何解决这个问题？因为这也行不通。

```
output += '<button class="del_account" param-del="#{account.id}">delete</button>' 
```

或这个

```
output += '<button class="del_account" param-del="' +account.id +'">delete</button>' 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:08:08.253

如果您需要同时使用`"`和`'`符号，那么这是处理它们的简单方法：

```
output += %[<button class="del_account" param-del="#{account.id}">delete</button>] 
```

这样您就可以安全地放置任何提到的符号，而不必担心逃脱它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:11:49.470

您可以使用 Rails 辅助方法`content_tag`（[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag)），它使事情变得更干净、更易读。

```
output += content_tag(:button, "delete", :class => "del_account", :'param-del' => account.id) 
```

此外，从技术上讲，“param-del”会使您的 HTML 无效 - 您的自定义属性应以“data-”开头，因此上面的更新将变为：

```
output += content_tag(:button, "delete", :class => "del_account", :'data-account-id' => account.id) 
```

# html - 使用 style="color:#fff" 为表格行着色以在电子邮件中显示

> ID：10245724
> 
> 赞同：27
> 
> 时间：2012-04-20T11:53:12.100
> 
> 标签：html, css, html-table, html-email

我们想在电子邮件中将订单详细信息显示为表格

```
​&lt;table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>blah blah</td>
            <td>blah blah</td>
            <td>blah blah</td>
        </tr>
    </tbody>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

理想情况下，我们希望标题的背景颜色为“#5D7B9D”，文本颜色为“#fff”。
我们正在使用`bgcolor='#5D7B9D'`更改背景颜色，但无法找到替代方法来更改文本颜色。
由于大多数电子邮件提供商都剥离了 CSS，我们根本无法使用`style`属性。

问题是

1.  如何使标题文本显示为白色？
2.  有没有替代方法？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-20T13:11:26.400

对于电子邮件模板，内联 CSS 是正确使用样式的方法：

```
<thead>
    <tr style="color: #fff; background: black;">
        <th>Header 1</th>
        <th>Header 2</th>
        <th>Header 3</th>
    </tr>
</thead> 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-20T12:18:06.253

你可以很容易地这样做： -

```
 <table>
    <thead>
        <tr>
          <th bgcolor="#5D7B9D"><font color="#fff">Header 1</font></th>
          <th bgcolor="#5D7B9D"><font color="#fff">Header 2</font></th>
           <th bgcolor="#5D7B9D"><font color="#fff">Header 3</font></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>blah blah</td>
            <td>blah blah</td>
            <td>blah blah</td>
        </tr>
    </tbody>
</table> 
```

演示：- [http://jsfiddle.net/VWdxj/7/](http://jsfiddle.net/VWdxj/7/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-20T12:04:32.523

尝试使用`<font>`标签

```
​&lt;table> 
    <thead> 
        <tr> 
            <th><font color="#FFF">Header 1</font></th> 
            <th><font color="#FFF">Header 1</font></th> 
            <th><font color="#FFF">Header 1</font></th> 
        </tr> 
    </thead> 
    <tbody> 
        <tr> 
            <td>blah blah</td> 
            <td>blah blah</td> 
            <td>blah blah</td> 
        </tr> 
    </tbody> 
</table> 
```

但我认为这也应该有效：

```
​&lt;table> 
    <thead> 
        <tr> 
            <th color="#FFF">Header 1</th> 
            <th color="#FFF">Header 1</th> 
            <th color="#FFF">Header 1</th> 
        </tr> 
    </thead> 
    <tbody> 
        <tr> 
            <td>blah blah</td> 
            <td>blah blah</td> 
            <td>blah blah</td> 
        </tr> 
    </tbody> 
</table> 
```

**编辑：**

跨浏览器解决方案：

使用十六进制颜色的大写字母。

```
<th bgcolor="#5D7B9D" color="#FFFFFF"><font color="#FFFFFF">Header 1</font></th> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-08T19:12:18.113

您可以编辑颜色的 css 属性，而不是使用直接标记，以便您制作的任何表格都将具有相同的颜色标题文本。

```
thead {
    color: #FFFFFF;
} 
```

# vb.net - 字符串随机化器

> ID：10245726
> 
> 赞同：2
> 
> 时间：2012-04-20T11:53:13.053
> 
> 标签：vb.net, visual-studio-2010

一位朋友让我为她玩的游戏制作一个字符串随机化器。我让代码工作了，但现在她想让字符每隔三个字符用破折号（或空格）分隔，但我无法让它工作。任何帮助将不胜感激。

```
 For x As Integer = 1 To 10
                  strb.Append(chars(Int(Rnd() * UpperBound)))
          If x Mod 2 = 0 Then 
          strb.Append("-") 
```

字符需要分开，但是如何防止在随机字符末尾添加破折号？

感谢伙计们（和女孩们）的帮助，它正在工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:59:17.070

只需每隔三个字符附加一个破折号（或其他）：

```
For x As Integer = 1 To 5
  strb.Append(chars(Int(Rnd() * UpperBound)))
  If x Mod 3 = 0 Then      
    strb.Append("-")
  End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:08:09.020

由于我还没有使用过那些旧的 VB 函数，我将向您展示如何使用 VB.NET 来完成它，它也可以很容易地转换为 C#：

```
Private Function RandomString(rnd As Random, size As Integer) As String
    Dim chars() As String = {"a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"}
    Dim builder As New System.Text.StringBuilder()
    For i As Integer = 0 To size - 1
        builder.Append(chars(rnd.Next(0, chars.Length)))
    Next

    Return builder.ToString()
End Function 
```

让我们生成一个包含 5 个字符的随机字符串：

```
Dim rnd = New Random()
Dim rndString = RandomString(rnd, 5) 
```

请注意，我正在传递随机实例。如果我将在方法中创建它并在循环中调用它，它将生成相同的字符串，因为`Random`它将使用与种子相同的时间。

**编辑**：我刚刚看到你需要分离结果。您可以使用重载版本：

```
Private Overloads Function RandomString(rnd As Random, size As Integer, separator As String, everyNChar As Int32) As String
    Dim builder = New System.Text.StringBuilder()
    Dim chars() As String = {"a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"}
    For i As Integer = 0 To size - 1
        If i > 0 AndAlso i Mod everyNChar = 0 Then
            builder.Append(chars(rnd.Next(0, chars.Length))).Append(separator)
        Else
            builder.Append(chars(rnd.Next(0, chars.Length)))
        End If
    Next

    Return builder.ToString()
End Function 
```

请注意，这不会计算分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:23:24.173

您可以使用正则表达式来替换字符串。更改正则表达式和管理更改请求将很简单:)

只需替换`TextBox1.Text = rndstring`为：

`TextBox1.Text = Regex.Replace(rndstring, "[a-zA-Z0-9]{3}", "$& ")`

`Imports System.Text.RegularExpressions`请注意，如果尚未完成，您需要添加。

**编辑：**我已经给出了上述解决方案，在每三个字符之后插入一个“”（空格）。如果您想要连字符 (-)，只需将第二个正则表达式更改为`"$&-"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T04:31:16.213

如果我对您的理解正确，请将 if 语句从 更改`If x Mod 2 = 0 Then`为`If x Mod 2 = 0 And x <> 10 Then`。这样，如果它在最后一个元素上，它就不会附加破折号。

# c++ - 通过函数传递自定义比较器

> ID：10245728
> 
> 赞同：2
> 
> 时间：2012-04-20T11:53:20.333
> 
> 标签：c++, comparator

我有一个有函数的类

```
MyClass::doStuff(std::vector<MyCustomData*> toSort) { ... 
```

我称之为

```
std::sort(toSort.begin(), toSort.end(), MyClass::SortByZ()); 
```

myClass::SortByZ() 是一个自定义比较器。现在这可行，但我想实现以下目标：

我有几个类，每个类都应该有自己的比较器函子来对“MyCustomData”进行排序。所以例如 Class1... 应该有

```
class Class1 {
    struct SortData {
        bool operator ()(MyCustomData *lhs, MyCustomData *rhs) {
        return lhs->something1 > rhs->something1;
        }
    };
    //...many more functions/vars
} 
```

而 Class2 对于相同的数据类型有不同的比较器函子，例如

```
class Class2 {
    struct SortData {
        bool operator ()(MyCustomData *lhs, MyCustomData *rhs) {
        return lhs->something2 > rhs->something2;
        }
    };
    //...many more functions/vars
} 
```

现在我希望能够调用函数 MyClass::doStuff(...)

```
doStuff(myData, Class1::SortData) 
```

或者

```
doStuff(myData, Class2::SortData) 
```

并且函数 MyClass::doStuff(...) 应该使用各自的排序顺序。

我没有找到这样做的方法，有吗？我想要一个简单的解决方案（不必支持模板或任何东西）。如果需要，我愿意使用 boost，但首选没有 boost 的解决方案。

我希望我能够描述我想要实现的目标？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T11:59:27.247

您将必须制作`doStuff`一个模板：

```
template <typename Comparator>
void doStuff(std::vector<MyCustomData*> toSort, Comparator compare) {
   // ...
   std::sort(toSort.begin(), toSort.end(), compare);
   // ...
} 
```

此外，它可能希望通过引用获取第一个参数。照原样，它将对参数的副本进行排序，丢弃该副本，并保持调用者的向量不变；虽然也许这就是你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T12:00:43.353

使用函数模板，以接受任何类型的比较函数（或函子）：

```
template <typename Comparator>
void doStuff(std::vector<MyCustomData> toSort, Comparator comparator)
{
    ...
    std::sort(toSort.begin(), toSort.end(), comparator);
    ...
}
...
doStuff(myData, Class1::SortData());
doStuff(myData, Class2::SortData()); 
```

这就是标准算法提供通用性的方式。

# css - 位置：绝对时如何删除左属性？

> ID：10245729
> 
> 赞同：145
> 
> 时间：2012-04-20T11:53:31.880
> 
> 标签：css, css-position

选择特定语言时，我将站点 CSS 覆盖为 RTL 版本。

我有一个必须具有绝对定位的元素。在 LTR 版本中，我这样做`left: 0px;`并且它与左侧对齐；在 RTL 版本中，我想用 做相反的事情`right`，但该`left`属性没有被覆盖，所以它仍然保持在左边。

*   我试过用 hacking `!important`，但是没有用。
*   我试过设置`left: none`，但没有奏效。

如何在覆盖时将其设置为无或完全删除？

* * *

## 回答 #1

> 赞同：343
> 
> 时间：2012-04-20T11:55:07.447

```
left:auto; 
```

这将默认`left`返回浏览器默认值。

* * *

因此，如果您的标记/CSS 为：

```
<div class="myClass"></div>

.myClass
{
  position:absolute;
  left:0;
} 
```

设置 RTL 时，您可以更改为：

```
<div class="myClass rtl"></div>

.myClass
{
  position:absolute;
  left:0;
}
.myClass.rtl
{
  left:auto;
  right:0;
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-11-04T14:53:13.037

将来人们将`left: unset;`用于取消设置 left 的值。

截至今天 2014 年 11 月 4 日`unset`，仅 Firefox 支持。

[在 MDN 中阅读有关 unset 的更多信息。](https://developer.mozilla.org/en-US/docs/Web/CSS/unset)

我的猜测是，当 IE 11 被适当地淘汰时，我们将能够在 2022 年左右使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-15T12:17:33.027

```
left: initial 
```

这也将设置`left`回浏览器默认值。

但重要的是要知道`property: initial`在 IE 中不受支持。

# jquery - 重新加载页面/jQuery时如何在输入文本上保持红色

> ID：10245730
> 
> 赞同：0
> 
> 时间：2012-04-20T11:53:32.067
> 
> 标签：jquery, forms, events, keypress, page-refresh

页面重新加载/刷新/按 f5 后是否可以保留红色输入文本（即电子邮件错误时）？问题是，当我按 f5 或刷新页面时，输入文本颜色从红色变为默认黑色。如果有人向我展示适当的代码，我会很高兴。提前Tnx！

这是代码：

```
$(document).ready(function(){

    var form=$("#form");
    var email=$("#email");
    var emailVal="неправилен email адрес";

form.submit(function(){
     if(validateEmail()) {return true;}
     else{return false;};
                        });

email.keyup(function(){
     var a=$("#email").val();
     var match_e=/^[A-Za-z0-9]+[A-Za-z0-9_.-]+[A-Za-z0-9]+@[A-Za-z0-9]+[A-Za-z0-9.-]+  [A-Za-z0-9]+.[a-z]{2,4}$/;

  if(match_e.test(a)){email.css('color','#000');}});

function validateEmail(){
     var a=$("#email").val();
     var match_e=/^[A-Za-z0-9]+[A-Za-z0-9_.-]+[A-Za-z0-9]+@[A-Za-z0-9]+[A-Za-z0-9.-]+[A-Za-z0-9]+.[a-z]{2,4}$/;

   if(match_e.test(a)){ 
        email.css('color','#000');
        return true;
  }else{
        email.val(emailVal).css('color','red');
        return false;}
}
}); 
```

或者还有一个提议。可能更好的选择是刷新以返回其初始值文本，例如 value="email"，并删除错误消息。保留红色文本或在页面刷新时将其删除对我来说都是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:31:23.643

***注意：***要发生这种情况，您应该非常确定在重新加载时，您的文本值仍然存在，这意味着您必须从服务器发送值。

现在进行验证使用[验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

```
<script src="dist/jquery.min.js"></script>
<script src="dist/jquery.validate.js"></script>

<script>
    $(function() {
        $(window).load(function () {
            $('#your_form_id').valid();
        });
    });
</script>
<style>
    .error{
        color:red;
    }
</style> 
```

**<form id='your_form_id'>** `<input name='txt' id='txt' class='email' value='YOUR DEFAULT VALUE'></input>`
**</form>**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:03:19.007

除了表单事件之外，您应该在 DOM 准备好之后调用您的验证器函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:04:58.067

为什么不`validate`重新渲染后的页面？这可以在`ready`事件中完成。读[这个](http://api.jquery.com/ready/)

# android - HTTP POST 请求 ANDROID 4（在 2.3 中工作）？

> ID：10245731
> 
> 赞同：3
> 
> 时间：2012-04-20T11:53:34.187
> 
> 标签：android, http-post, android-4.0-ice-cream-sandwich, http-request

好的，这就是交易，我编写了一个应用程序，该应用程序通过来自 web url 的 HTTP（post）数据请求，数据使用 JSon 数组返回，我解析这些数组以获得我想要的。

直到使用 android 2.3.x 没有问题，但是当我在 Android 4 中测试它时它根本不起作用。

这是我的代码：

```
public boolean testConexio(){

    boolean status = false;

    String rutaServer = "URL.php";
    //Log.e("log_tag", "Ruta server: "+rutaServer);
    InputStream is = null;
    String result = "";
    String temporal;

    //Valors a demanar/enviar
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("param1",config.getUserDB())); // parametros POST!
    nameValuePairs.add(new BasicNameValuePair("param2",config.getPassDB())); // parametros POST!

    //http post
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(rutaServer);
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,"UTF-8")); // valors POST UTF 8 coded <-- I KNOW! this is the way i need them spanishfag here
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    }catch(Exception e){
        Log.e("log_tag", "Error in http connection "+e.toString());
    }

    //Convierte la respuesta a String
    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"),8); // again, spanishfag here
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
    }catch(Exception e){
        Log.e("log_tag", "Error converting result "+e.toString());
    }

    //Parse la respuesta JSon
    try{
        JSONObject jArray = new JSONObject(result);
        temporal = jArray.getString("status");
        if(temporal.equals("true")){
            status = true;
        }
        Log.i("log_tag","Status: "+jArray.getString("status"));
    }catch(JSONException e){
        Log.e("log_tag", "Error parsing data "+e.toString());
    }

    return status;
} 
```

谁能告诉我我做错了什么？或者我需要改变什么，我现在一直在寻找一些东西，但我无法让它在 android 4 上运行。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T12:00:18.967

你需要把它放在一个异步任务中，它不会在 3.0 的主线程中运行>

用这个：

```
public class PostTask extends AsyncTask<Void, String, Boolean> {

        @Override
        protected Boolean doInBackground(Void... params) {
            boolean result = false;

            //All your code goes in here 

            //If you want to do something on the UI use progress update

            publishProgress("progress");
            return result;
        }

        protected void onProgressUpdate(String... progress) {
            StringBuilder str = new StringBuilder();
                for (int i = 1; i < progress.length; i++) {
                    str.append(progress[i] + " ");
                }

        }
    } 
```

您需要在异步任务之外引用它

```
PostTask posttask; 
```

那么你需要启动它

```
posttask = new PostTask();
posttask.execute(); 
```

前几天我遇到了同样的问题，祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:02:09.127

使用 Android 4.0，您不能在不使用线程的情况下使用 http 连接（使用可运行的 asyinctask ...）

**你能做的最好的就是实现一个线程**，但如果你不能这样做，你就不能在 android manifest android:targetVersion="14" 中删除。

如果您需要 14 或更高版本的某些元素，例如 Holo 主题或您可以在其中配置的东西

在项目中右击 --> Propierties --> Android --> Project Built Target = 14 或者你想要的

# java - morphia 可以和 gridfs mongo 通话吗

> ID：10245733
> 
> 赞同：1
> 
> 时间：2012-04-20T11:53:35.407
> 
> 标签：java, mongodb, morphia, gridfs

我们计划使用 gridfs-mongo 来存储数百万张图片。我们可以使用 Morphia 与这个 gridfs 数据库对话吗？此外，如果我们使用自定义 DAO 层（而不是 Morphia），我们应该如何使用 Mongo 从 Java 端处理连接池。请指教。

〜vish

# php - DIV 元素没有被其中的内容下推

> ID：10245734
> 
> 赞同：0
> 
> 时间：2012-04-20T11:53:38.170
> 
> 标签：php, html, css, while-loop

我有一个 div 没有被里面的内容下推。相反，内容只是与 div 重叠。我认为这是因为 div 标签之间有一个 PHP while 循环？我该如何解决？

```
session_start();
if (!$_SESSION["user_name"])
{
    header("Location: index.php");
}

include('header.php');
$id = $_GET['id'];
if(isset($id)) {
    connect_to_db();
    mysql_query("DELETE FROM content WHERE id='$id'");
    $deleted = 'Content Successfully Deleted.<br>';
}
echo '<div id="content">';
echo '<h2>Delete Content</h2>';
if(isset($deleted)){
    echo $deleted;
}
connect_to_db();
$query="SELECT id, date, title, image FROM content ORDER BY date DESC";
$result=mysql_query($query);
while($row = mysql_fetch_array($result)){
    echo '<div id="delete" align="center">';
    echo '<a href="delete.php?id='.$row['id'].'"><img src="'.$row['image'].'" style="border:1px solid black; width:100px;"><br>Delete</a>';
    echo '</div>';
}
echo '</div>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:06:42.737

将`overflow: hidden;`CSS 规则放在其中包含重叠内容的 div 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:59:26.713

尝试清除while循环内的div，也许像

```
while($row = mysql_fetch_array($result)){
echo '<div id="delete" align="center">';
echo '<a href="delete.php?id='.$row['id'].'"><img src="'.$row['image'].'" style="border:1px solid black; width:100px;"><br>Delete</a>';
echo '<div style="clear:both"></div></div>';
} 
```

可以帮助吗？或将`<a>`元素声明为块元素？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:02:02.883

使用 PHP 循环与此问题无关，重要的是提供给 Web 浏览器的 HTML 代码。

尝试向有`clear: both;`问题的 div 添加样式：

```
<div id="delete" align="center" style="clear: both;"> 
```

您也可以使用 CSS 而不是 HTML 属性对齐：

```
<div id="delete" style="text-align: center; clear: both;"> 
```

**更新**我看到你的 DIV 元素是重叠的，而不是像我最初想象的那样彼此浮动。

检查您的 CSS 并查看是否可以找到`position: absolute`适用于这些 DIV 元素的任何内容，然后将其删除。此外，您应该使用`class="delete"`而不是`id="delete"`，因为多个元素不应共享相同的`id`属性。

对于测试，您可以尝试：

```
<div id="delete" style="text-align: center; position: block;"> 
```

# html - 诺基亚 5800 浏览器中的 div 溢出

> ID：10245737
> 
> 赞同：2
> 
> 时间：2012-04-20T11:54:00.310
> 
> 标签：html, overflow, nokia

我在内部 div 中有一个外部 div、内部 div 和一个表。外部 div 的溢出样式属性设置为隐藏，其宽度设为 100%。内部 div 的溢出属性设置为 auto.table 的宽度为 300%。

诺基亚 5800 中的浏览器在底部为我提供水平滚动条，而该页面在诺基亚 603 浏览器中正确显示。

即使外部 div 设置了上述样式，屏幕溢出的原因可能是什么？

与 div 而不是 table 的相同安排适合 correclty。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:00:41.720

宽度通常继承自父控件。的父母是`outer div`什么？第二点要注意的是，最`table`里面的宽度是 300% ？这显然会溢出。可以发你的`HTML`吗？

# php - PHP CSV 导出脚本，有点逻辑上的挣扎

> ID：10245738
> 
> 赞同：0
> 
> 时间：2012-04-20T11:54:03.667
> 
> 标签：php, csv, php-5.3

好的，我有这个正在运行的 CSV 导出脚本，但我想添加另一个查询，该查询将获取每个订单的订单项目。

并将每个订单的订单项放在每行的最后一个单元格中，如下所示：

Order_Items：项目 1、项目 2、项目 3 等...

我有订单项目的查询，但我不确定如何将它与复杂的 while 和 for each 循环相匹配。

这是我到目前为止的代码。

```
 <?php
  include "../Config/db.config.php";;

 // Make a MySQL Connection
 $link =  mysql_connect(EZSQL_DB_HOST, EZSQL_DB_USER, EZSQL_DB_PASSWORD);

 if (!$link) {
    die('Could not connect: ' . mysql_error());
 }

if (!mysql_select_db(EZSQL_DB_NAME, $link)) {
   echo 'Could not select database';
  exit;
}

 $select = "SELECT intOrderID as Order_ID, strPaymentMethod as Payment_Method, strPaymentRef as Payment_Ref, strPaymentStatus as Payment_Status,
       dtmDate as Date, curPaymentAmount as Net_Price, curShippingFee as Shipping_Fee FROM tbl_mod_ShopOrders";

$items = "SELECT intProductID, strProductTitle, curPrice, intQty FROM tbl_mod_ShopOrderItems WHERE intOrderID = $value";

$export = mysql_query ($select) or die ( "Sql error : ". mysql_error() );

$fields = mysql_num_fields ( $export );

for ( $i = 0; $i < $fields; $i++ )
{
   $header .= mysql_field_name( $export , $i ) . ",";  
}

$header .= 'Order_Items'; // Added additional cell title. 

while( $row = mysql_fetch_row( $export ) )
{
   $line = '';
foreach( $row as $value )
{                                            
    if ( ( !isset( $value ) ) || ( $value == "" ) )
    {
        $value = ",";
    }
    else
    {
        $value = str_replace( '"' , '""' , $value );
        $value = '"' . $value . '"' . ",";
    }
    $line .= $value;
}
    $data .= trim( $line ) . "\n";
 }
    $data = str_replace( "\r" , "" , $data );

 if ( $data == "" )
 {
     $data = "\n(0) Records Found!\n";                        
}

 header("Content-type: application/octet-stream");
 header("Content-Disposition: attachment; filename=Customer_export.csv");
 header("Pragma: no-cache");
 header("Expires: 0");
 print "$header\n$data";
 exit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:06:43.507

我在这里不是 100% 的查询，它可能需要调整才能得到你想要的。我觉得这里重要的是查询，您可以让 MySQL 为您完成大部分繁重的工作。我在`fputcsv()`这里使用了格式化数据的方法，因为它会产生最好的结果。我也不愿意使用`or die()`，但由于这是您在上述代码中处理错误的方式，所以这就是我在这里所做的。

希望这会给您一个不错的起点：

```
<?php

  // Make a MySQL Connection
  include "../Config/db.config.php";;
  $link = mysql_connect(EZSQL_DB_HOST, EZSQL_DB_USER, EZSQL_DB_PASSWORD)) or die('Could not connect: '.mysql_error());
  mysql_select_db(EZSQL_DB_NAME, $link)) or die('Could not select database: '.mysql_error($link));

  // Get data from database
  $query = "
    SELECT
      `o`.`intOrderID` AS 'Order_ID',
      `o`.`strPaymentMethod` AS 'Payment_Method',
      `o`.`strPaymentRef` AS 'Payment_Ref',
      `o`.`strPaymentStatus` AS 'Payment_Status',
      `o`.`dtmDate` AS 'Date',
      `o`.`curPaymentAmount` AS 'Net_Price',
      `o`.`curShippingFee` AS 'Shipping_Fee',
      `i`.`Order_Items`
    FROM `tbl_mod_ShopOrders` `o`
    LEFT JOIN (
      SELECT
        `intOrderID`,
        GROUP_CONCAT(CONCAT('ID=', `intProductID`, '; Title=', `strProductTitle`, '; Price=', `curPrice`, '; Qty=', `intQty`) SEPARATOR '\\n') AS 'Order_Items'
      FROM `tbl_mod_ShopOrderItems`
      GROUP BY `intOrderID`
    ) `i` ON `o`.`intOrderID` = `i`.`intOrderID`
  ";
  $result = mysql_query($query) or die("Query error: ".mysql_error($link));

  // Check there were some results
  mysql_num_rows($result) or die('No data to output');

  // Open fake file pointer to output buffer
  $outFp = fopen('php://output', 'w') or die('Unable to open file pointer for output buffer');

  // Send headers for CSV download
  header("Content-Type: text/csv");
  header("Content-Disposition: attachment; filename=Customer_export.csv");
  header("Pragma: no-cache");
  header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");

  // Output columns headers and first row
  $row = mysql_fetch_assoc($result);
  fputcsv($outFp, array_keys($row));
  fputcsv($outFp, $row);

  // Output rest of data...
  while ($row = mysql_fetch_row($result)) {
    fputcsv($outFp, $row);
  }

  // ...and we're done.
  exit; 
```

请注意，这`LEFT JOIN`可以说是不必要的，因为您永远不会收到没有任何物品的订单，但为了安全也是如此。

# wcf - WCF 中的自定义消息编码器，支持 ReaderQuotas

> ID：10245739
> 
> 赞同：1
> 
> 时间：2012-04-20T11:54:04.653
> 
> 标签：wcf, mtom, custom-binding, readerquotas

**在这里找到答案（最后一篇文章）：[http ://social.msdn.microsoft.com/Forums/eu/wcf/thread/f5c0ea22-1d45-484e-b2c0-e3bc9de20915](http://social.msdn.microsoft.com/Forums/eu/wcf/thread/f5c0ea22-1d45-484e-b2c0-e3bc9de20915)**

我在实现我的自定义 ( [TextOrMtomEncoder](https://stackoverflow.com/questions/10128887/supporting-both-mtom-and-text-as-messageencoding-in-wcf) ) 时遇到了最后一个问题，即 ReaderQuotas 的实现。

我在网上搜索了很多，但我无法弄清楚最后一块拼图。

[我有一个类](http://pastebin.com/v52eseJx)，其中包含我对“BindingElementExtensionElement”和“MessageEncodingBindingElement”的实现。

MessageEncodingBindingElement 实现包含以下内容的覆盖：

```
T GetProperty<T>(BindingContext context) 
```

我从默认的 .NET MessageEncoding 实现中“借用”了它，[例如 TextMessageEncoding](http://reflector.webtropy.com/default.aspx/WCF/WCF/3@5@30729@1/untmp/Orcas/SP/ndp/cdf/src/WCF/ServiceModel/System/ServiceModel/Channels/TextMessageEncodingBindingElement@cs/1/TextMessageEncodingBindingElement@cs)。

这必须是正确的实现，[因为 MSDN 是这么说](http://msdn.microsoft.com/en-us/library/aa344798.aspx)的。

从 web.config 加载配置很好，我可以看到我的两个类中的 ReaderQuotas 属性设置正确，但看起来 .NET 没有从我的 MessageEncodingBindingElement 实现中读取 ReaderQuotas 配置。

我的猜测是 .NET 使用 GetProperty 方法来加载配置，因为 MessageVersion 是通过此方法请求的。但问题是，T 永远不会等于 XmlDictionaryReaderQuotas，因此 ReaderQuotas 永远不会开始请求。

我的问题的根源是奇怪的顺便说一句，我正在使用 IIS7.5 的 Windows 7 x64 机器上开发。在我的机器上发布“大”文件（如 100 KB）。但是当我将服务部署到 Windows Server 2008 R2（尝试了 2 个不同的服务器）时，我收到以下错误：

> 格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数 [http://socialproxy.infocaster.net:argument](http://socialproxy.infocaster.net:argument)时出错。InnerException 消息是“反序列化 System.Object 类型的对象时出错。读取 XML 数据时已超出最大数组长度配额 (16384)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxArrayLength 属性来增加此配额。第 1 行，位置 1584.'。有关更多详细信息，请参阅 InnerException。

就像我说的，它可以在我的机器上运行：-/

谁能告诉我如何解决这个问题？

提前谢谢了！

WCF 服务配置：

```
<system.serviceModel>
    <extensions>
        <behaviorExtensions>
            <add name="wsdlExtensions" type="WCFExtras.Wsdl.WsdlExtensionsConfig, WCFExtras, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
            <add name="textOrMtomMessageBehavior" type="InfoCaster.SocialProxy.lib.TextOrMtom.TextOrMtomMessageBehavior, InfoCaster.SocialProxy" />
        </behaviorExtensions>
        <bindingElementExtensions>
            <add name="textOrMtomEncoding" type="InfoCaster.SocialProxy.lib.TextOrMtom.TextOrMtomEncodingElement, InfoCaster.SocialProxy" />
        </bindingElementExtensions>
    </extensions>
    <bindings>
        <customBinding>
            <binding name="TextOrMtomBinding">
                <textOrMtomEncoding messageVersion="Soap11">
                    <readerQuotas maxDepth="32" maxStringContentLength="5242880" maxArrayLength="204800000" maxBytesPerRead="5242880" maxNameTableCharCount="5242880" />
                </textOrMtomEncoding>
                <httpTransport maxBufferSize="5242880" maxReceivedMessageSize="5242880" transferMode="Buffered" authenticationScheme="Anonymous" />
            </binding>
        </customBinding>
    </bindings>
    <services>
        <clear />
        <service name="InfoCaster.SocialProxy.SocialProxy" behaviorConfiguration="InfoCaster.SocialProxy.ISocialProxyServiceBehavior">
            <endpoint name="SocialProxyServiceEndpoint" address="" binding="customBinding" bindingConfiguration="TextOrMtomBinding" contract="InfoCaster.SocialProxy.ISocialProxy" behaviorConfiguration="InfoCaster.SocialProxy.ISocialProxyEndpointBehavior" />
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <clear />
            <behavior name="InfoCaster.SocialProxy.ISocialProxyServiceBehavior">
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true" />
                <!-- To receive exception details in faults for debugging purposes, set the value below to true. Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="true" />
            </behavior>
        </serviceBehaviors>
        <endpointBehaviors>
            <clear />
            <behavior name="InfoCaster.SocialProxy.ISocialProxyEndpointBehavior">
                <textOrMtomMessageBehavior />
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:21:38.453

在这里找到答案（最后一篇文章）：[http ://social.msdn.microsoft.com/Forums/eu/wcf/thread/f5c0ea22-1d45-484e-b2c0-e3bc9de20915](http://social.msdn.microsoft.com/Forums/eu/wcf/thread/f5c0ea22-1d45-484e-b2c0-e3bc9de20915)

> 好的，我找到了。您必须将 readerquotes 传递给标准编码器。不幸的是，这里没有构造函数，所以你必须设置属性。

```
class TextOrMtomEncoder : MessageEncoder   {
    MessageEncoder _textEncoder;
    MessageEncoder _mtomEncoder;
    public TextOrMtomEncoder(MessageVersion messageVersion, XmlDictionaryReaderQuotas readerQuotas)
    {
      TextMessageEncodingBindingElement textEncoderBindingElement = new TextMessageEncodingBindingElement(messageVersion, Encoding.UTF8);
      MtomMessageEncodingBindingElement mtomEncoderBindingElement = new MtomMessageEncodingBindingElement(messageVersion, Encoding.UTF8);

      readerQuotas.CopyTo(mtomEncoderBindingElement.ReaderQuotas);
      readerQuotas.CopyTo(textEncoderBindingElement.ReaderQuotas);

      _mtomEncoder = mtomEncoderBindingElement.CreateMessageEncoderFactory().Encoder;
      _textEncoder = textEncoderBindingElement.CreateMessageEncoderFactory().Encoder;
    } 
```

# asp.net-mvc - MVC 自定义验证属性被默认 ModelValidator 覆盖。值“null”无效

> ID：10245740
> 
> 赞同：1
> 
> 时间：2012-04-20T11:54:04.860
> 
> 标签：asp.net-mvc, validation

我有一个带有一些布尔对象的模型

```
 [DisplayName("Is student still at school")]
    //[ValidBoolDropDown("IsStillAtSchool")]
    public bool? IsStillAtSchool { get; set; } 
```

正在使用一些布尔编辑器下拉模板实现

```
 @model bool?
@{
    int intTabIndex = 1;
    if (ViewData["tabindex"] != null)
    {
        intTabIndex = Convert.ToInt32(ViewData["tabindex"]);
    }
 }

 @{
    string strOnChange = "";
    if (ViewData["onchange"] != null)
    {
        strOnChange = ViewData["onchange"].ToString();
    }
}

<div class="editor-field">
    @Html.LabelFor(model => model): 

   @Html.DropDownListFor(model => model, new SelectListItem[] { new SelectListItem() { Text = "Yes", Value = "true", Selected = Model == true ? true : false }, new SelectListItem() { Text = "No", Value = "false", Selected = Model == false ? true : false }, new SelectListItem() { Text = "Select", Value = "null", Selected = Model == null ? true : false} }, new { @tabindex = intTabIndex, @onchange = strOnChange })

    @Html.ValidationMessageFor(model => model)
</div> 
```

在帖子中，我仍然收到默认模型验证错误

值“null”对于 Is studentstill at school 无效。（又名 IsStillatSchool）

我什至实现了自定义 ValidationAttribute

```
public class ValidBoolDropDown : ValidationAttribute
{
    public ValidBoolDropDown(string dropdownname) :base("Please Select for {0}")
    {

        DropDownName = dropdownname;
    }

    private string DropDownName;

    protected override ValidationResult IsValid(object value,ValidationContext validationContext)
    {

        var boolres = GetBool(validationContext);

        //if (!boolres.HasValue)
        //{
        //    return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
        //}

        return ValidationResult.Success;
    }

    public override string FormatErrorMessage(string name)
    {
        return string.Format(ErrorMessageString, name);
    }
    protected bool? GetBool(ValidationContext validationContext)
    {
        var propertyInfo = validationContext
                              .ObjectType
                              .GetProperty(DropDownName);
        if (propertyInfo != null)
        {
            var boolValue = propertyInfo.GetValue(validationContext.ObjectInstance, null);
            if (boolValue == null)
                return null;
            return boolValue as bool?;
        }
        return null;
    }
} 
```

这会触发但会被覆盖，并且该属性的 Model.Value.Error 仍然失败

我看到了一些关于在 Glocal.asx 中为值类型关闭自动所需标志的内容

```
 DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

但这不起作用..是为应用程序创建自定义 MetadataValidatorProvider 还是有其他事情发生

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:05:58.403

好的，问题出在该行的下拉模板中

```
 @Html.DropDownListFor(model => model, new SelectListItem[] { new SelectListItem() { Text = "Yes", Value = "true", Selected = Model == true ? true : false }, new SelectListItem() { Text = "No", Value = "false", Selected = Model == false ? true : false }, **new SelectListItem() { Text = "Select", Value = "null", Selected = Model == null ? true : false}** }, new { @tabindex = intTabIndex, @onchange = strOnChange }) 
```

和

**new SelectListItem() { Text = "Select", Value = "null", Selected = Model == null ? 真假}**

成为问题选择列表项

当默认模型绑定器尝试将表单数据绑定回模型时，字符串“null”不等于 null（空对象）

一旦将其更改为

```
new SelectListItem() { Text = "Select", Value = ""} 
```

一切都很顺利，验证属性开始发挥作用

谢谢

[ASP.NET MVC：下拉列表验证](https://stackoverflow.com/questions/3628066/asp-net-mvc-dropdownlist-validation)

:D

# ruby - 在文本框中输入多行字符串，然后用换行符分割结果

> ID：10245744
> 
> 赞同：0
> 
> 时间：2012-04-20T11:54:29.467
> 
> 标签：ruby, ruby-on-rails-3, split

在我的应用程序中，用户可以在具有多行的文本框中输入字符串，如下所示：

```
This is line 1
This is line 2 
```

该结果存储在如下表中“这是第 1 行 这是第 2 行”。

我想要的是能够在将字符串从表中拉出后用换行符分割字符串。像这样的东西：

```
 "This is line 1 This is line 2".split('/n') 
```

为了让我给出字符串跨越不同行的原始结果。但是，它似乎没有“记住”原始字符串超过 2 行。进行这种拆分的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:14:06.167

我做了以下工作：

```
"This is line 1 This is line 2".split(/\r?\n/) 
```

根据[这里的答案](https://stackoverflow.com/questions/6551128/split-on-different-newlines)

# php - PHP：上传带有HTTP路径前缀的图像名称的图像？

> ID：10245750
> 
> 赞同：0
> 
> 时间：2012-04-20T11:54:50.450
> 
> 标签：php, mysql, sql, database, phpmyadmin

我有以下 php 将图像上传到服务器并在数据库中插入名称：

```
<?php

//Uploading File to server php folder//
$uploaddir = ''; //Uploading to same directory as PHP file

$file = basename($_FILES['userfile']['name']);

$uploadFile = $file;

$randomNumber = rand(0000, 99999); 

$newName = $uploaddir . $randomNumber . $uploadFile;

if (is_uploaded_file($_FILES['userfile']['tmp_name'])) {
echo "Temp file uploaded. \r\n";
 } 

else {
echo "Temp file not uploaded. \r\n";
}

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $newName)) {
$postsize = ini_get('post_max_size'); 
$canupload = ini_get('file_uploads');  
$tempdir = ini_get('upload_tmp_dir'); 
$maxsize = ini_get('upload_max_filesize');
echo "http://localhost/abc/images/{$newName}" . "\r\n" . $_FILES['userfile']['size'] .    "\r\n" . $_FILES['userfile']['type'] ;
}

//Making sql db connection to store image path in db table//

$host = "localhost";

$username = "root";
$password = "****";

$database = "userauth";

mysql_connect($host, $username);

mysql_select_db($database) or die("Unable to find database");

$image = $_GET["images"];

$qry = "INSERT INTO image VALUES ('','$newName')";

mysql_query($qry);

mysql_close();
    ?> 
```

上面的代码很容易上传临时名称的文件：upload_image 前面加上随机数到以下 xampp 文件夹路径：[http://localhost/abc/images/](http://localhost/abc/images/)

在 db 表中，我将图像名称更改为“randomnumber”upload_image.jpg。我需要的是我需要 db 表将图像名称以及完整路径显示为[http://localhost/abc/images/](http://localhost/abc/images/) 'rand.number'upload_image.jpg

我怎样才能做到这一点？

我尝试将 uploaddir 替换为“http://localhost/abc/images/”并尝试将其添加到新文件名中，但它返回了以下警告：

```
<b>Warning</b>:  move_uploaded_file(http://localhost/abc/images/33760upload_image.jpg)   [<a href='function.move-uploaded-file'>function.move-uploaded-file</a>]: failed to open   stream: HTTP wrapper does not support writeable connections in    <b>/Applications/XAMPP/xamppfiles/htdocs/xampp/abc/images/imageupload.php</b> on line    <b>24</b><br />
<br />
<b>Warning</b>:  move_uploaded_file() [<a href='function.move-uploaded-file'>function.move-uploaded-file</a>]: Unable to move '/Applications/XAMPP/xamppfiles/temp/phpdlCc5N' to 'http://localhost/abc/images/33760upload_image.jpg' in <b>/Applications/XAMPP/xamppfiles/htdocs/xampp/abc/images/imageupload.php</b> on line   <b>24</b>
<br /> 
```

需要宝贵的指导。

PS：权限设置为读取和写入表包含两个字段：ID 和图像，ID 设置为主要和自动增量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:59:57.017

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

使用`$_SERVER`数组，您可以访问一些 http 请求详细信息，例如路径

您不应该尝试将上传的文件从 / 移动到像 http 这样的只读协议。而是从 php tmp 目录中获取它。也不要在移动它时开始这样的文件名，我认为这会导致你的错误。

# java - 如何使用 SOAP 服务在我的应用程序中连接 WSDL 文件？

> ID：10245751
> 
> 赞同：0
> 
> 时间：2012-04-20T11:54:52.347
> 
> 标签：java, soap, wsdl, bpel

我正在使用 Java 和 BPEL 做一个项目。我成功地在 Java 中创建了 Web 服务，并使用 BPEL 将它们集成在一起。我只生成了一个输出 WSDL 文件。现在，我必须使用 SOAP 通信在我的应用程序中使用这个输出 WSDL 文件。我怎样才能做到这一点？这种情况有什么帮助吗？演练真的很感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:22:42.593

如果它是 Java 应用程序，那么使用服务的最简单方法是使用 JAX-WS。从 WSDL 创建 Web 服务客户端非常容易。

[看到这个链接](http://www.ibm.com/developerworks/webservices/tutorials/ws-jax/index.html)

在服务器上部署 BPEL 项目后，请在使用应用程序中使用[http://server:port/application/YourBPELProjectService?WSDL 引用 WSDL](http://server:port/application/YourBPELProjectService?WSDL)。您将需要根据 BPEL 类型（同步、异步等）编写不同的客户端代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:23:52.397

根据您的应用程序的体系结构（标准 Java、基于 Spring...），可能有或没有使用基于 SOAP 的 Web 服务的文档化过程。

另一方面，您总是可以自由选择 Web 服务开发框架来处理它。例如，您可以选择 CXF 或 AXIS2（我相信这是两个最流行的 Java WebServices 框架）。这些框架中的每一个都提供了一个名为“wsdl2java”的工具，可以帮助您生成客户端/服务器端/两个 Java 类。然后，您可以轻松地将这些类和所需的库添加到您的应用程序中。

过去使用过 CXF，它甚至提供了几种使用 Web 服务的方式

*   生成客户端类
*   使用 CXF 动态客户端工厂：基本上，您将从工厂对象中检索端点代理。

希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T01:01:51.433

我从[SoapUI](http://soapui.org)（或可从[sourceforge](http://sourceforge.net/projects/soapui/files/soapui/4.0/soapUI-x32-4_0_0.exe)下载）开始，它可以让您使用 WSDL 并触发针对您的服务器的请求。通常，我会访问其他人的网络服务，并在开始将代码连接在一起之前试图弄清楚数据的样子，但在您的情况下，它只是验证服务是否正在工作。

然后，正如@KHY 所说，您可以使用 wsdl2java 自动将 wsdl 转换为 java 并开始编码（查看此 SO 屏幕右侧面板上的**相关列表下）**

# php - PHP：如何从按钮中删除带有 onclick 事件的 cookie

> ID：10245762
> 
> 赞同：1
> 
> 时间：2012-04-20T11:55:32.207
> 
> 标签：php, forms, button, cookies, unset

我正在尝试使用 php 创建一个退出按钮。我可能会以完全错误的方式解决这个问题，但无论如何我都试图通过单击按钮来删除 cookie。

```
 <?php 
    function logOut() {
        setcookie('userDetails[username]',"", time()-1200);
    }

if(isset($_COOKIE["userDetails"])) {
    echo "<table id='rtgLoginBox'>" ;
        echo "<tr>" ;
            echo "<td> Cookie " . $_COOKIE["userDetails"]["username"] . "!";
            echo "<td></td>" ;
        echo "</tr><tr>" ;
            echo "<td><input id='rtgLoginBtn' type='submit' value='Log Out' onclick=\"logOut();\" /></td>" ;
            echo "<td>";
            echo "<td></td>" ;
            echo "<td></td>" ;
        echo "</tr><tr>" ;
            echo "<td></td>" ;
            echo "<td></td>" ;
        echo "</tr>" ;
    echo "</table>" ;
} else {
    echo "<table id='rtgLoginBox'>" ;
        echo "<tr>" ;
            echo "<td><form action='process.php' method='post'>Username:</td>" ;
            echo "<td><input name='usernamein' id='rtgUsernameTxt' type='text' size='20' class='rtgSignUpTxt'/></td>" ;
        echo "</tr><tr>" ;
            echo "<td>Password:</td>" ;
            echo "<td><input name='passwordin' id='rtgPasswordTxt' type='password' size='20' class='rtgSignUpTxt' /></td>" ;
        echo "</tr><tr>" ;
            echo "<td></td>" ;
            echo "<td><input id='rtgLoginBtn' type='submit' value='Log In' />  </form><input id='rtgLoginBtn' type='submit' value='Sign Up' onclick=\"location.href='SignUp.php'\" /></td>" ;
        echo "</tr><tr>" ;
            echo "<td></td>" ;
            echo "<td><a href='mysite.com'><p style='padding:0 !important;'>Forgot Login Details?</p></a></td>" ;
        echo "</tr>" ;
    echo "</table>" ;
    }

    ?> 
```

据我在网上阅读，这应该有效吗？我也尝试将函数放在回显表下，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:01:08.343

如果用户按下注销按钮，此代码将导致用户注销，然后将他们重定向到名为whatever.php 的新页面。您显然可以将其更改为您想要的任何内容。

```
<?php 
    function logOut() {
        setcookie('userDetails[username]',"", time()-1200);
        unset($_COOKIE['userDetails']);
    }

if ('POST' === $_SERVER['REQUEST_METHOD'])
{
    logOut();
    header('Location: /whatever.php');
    exit;
}

if(isset($_COOKIE["userDetails"])) {
    echo "<form action='".htmlspecialchars($_SERVER['PHP_SELF'])."' method='post'><table id='rtgLoginBox'>" ;
        echo "<tr>" ;
            echo "<td> Cookie " . $_COOKIE["userDetails"]["username"] . "!";
            echo "<td></td>" ;
        echo "</tr><tr>" ;
            echo "<td><input id='rtgLoginBtn' type='submit' value='Log Out' /></td>" ;
            echo "<td>";
            echo "<td></td>" ;
            echo "<td></td>" ;
        echo "</tr><tr>" ;
            echo "<td></td>" ;
            echo "<td></td>" ;
        echo "</tr>" ;
    echo "</table></form>" ;
} else {
    echo "<table id='rtgLoginBox'>" ;
        echo "<tr>" ;
            echo "<td><form action='process.php' method='post'>Username:</td>" ;
            echo "<td><input name='usernamein' id='rtgUsernameTxt' type='text' size='20' class='rtgSignUpTxt'/></td>" ;
        echo "</tr><tr>" ;
            echo "<td>Password:</td>" ;
            echo "<td><input name='passwordin' id='rtgPasswordTxt' type='password' size='20' class='rtgSignUpTxt' /></td>" ;
        echo "</tr><tr>" ;
            echo "<td></td>" ;
            echo "<td><input id='rtgLoginBtn' type='submit' value='Log In' />  </form><input id='rtgLoginBtn' type='submit' value='Sign Up' onclick=\"location.href='SignUp.php'\" /></td>" ;
        echo "</tr><tr>" ;
            echo "<td></td>" ;
            echo "<td><a href='mysite.com'><p style='padding:0 !important;'>Forgot Login Details?</p></a></td>" ;
        echo "</tr>" ;
    echo "</table>" ;
    }

    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:23:48.187

正如你所说的“onclick ='logOut（）'”，你是从javascript调用函数logOut（），而不是php......

我们可能认为程序总是交互式的，并且我们总是可以在发生某些事情时调用某种函数，但是 php 不是这样工作的……要理解这一点，您应该更多地了解浏览器/服务器模型。

由于有人需要一个 php 页面，例如 index.php，服务器获取需求并根据您给它的 URL 在其磁盘上查找 index.php....然后它将整个 php 文件解释为 html 并传输html 文档到浏览器....所以屏幕前面的不再是 php 代码，而是静态 HTML 文档...

如果您想使页面具有交互性，请将 JavaScript 插入您的网页，JavaScript 以纯文本形式传输到浏览器，它在浏览器中运行，而不是在服务器上运行。

所以一个网站同时使用js和php，php用于处理服务器端的工作，比如查询数据库和管理整个网站……而javascript在页面上工作……

因此，如果您想以交互方式更改或删除 cookie，您需要的是 javascript，您可以在 javascript 中声明一个“logOut()”函数，并用它来控制 cookie....或者如果您真的想用php，使用js通过ajax将命令传递给某个php文件，并删除php中的cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-01T00:41:23.500

好的，我有一个奇怪但有效的解决方案来解决这个问题。问题是您不能调用 php 函数，是的，但是您可以通过向表单添加一个值为“whatever”的隐藏输入框来调用 POST 到 PHP，然后使用按钮的 onclick 事件来更改该值像“cut”这样的东西。然后在调用 POST 方法时检查 key = "cut" 的值。您可能无法使用此过程将值更改回“notCut”，但如果您有足够的创造力，您可以设置一个计时器，每隔一段时间将值更改回“notCut”......我自己测试了它效果很好！

```
<?php 
 if (array_key_exists('cutter', $_POST)) {
            if ($_POST["cutter"] == 'cut') {
            setcookie("yourCookie", "cookie", time() - 60 * 60);
            echo "You ate the cookie!";
        }
        }
?>

    <form method="post">
        <input type="text" id="cutter" name="cutter" value="NOTcut" hidden="true">
        <input id='cutter' type="submit" value="Cookie Cutter" onclick="document.getElementById('cutter').value='cut'">
    </form> 
```

# java - 带有 UiBinder 的 GWT LazyPanel

> ID：10245763
> 
> 赞同：0
> 
> 时间：2012-04-20T11:55:45.663
> 
> 标签：java, gwt, lazy-loading

我已经完成了[使用 UiBinder 的教程，](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Lazy)并尝试使用教程最后一节中提到的 LazyPanel。

在我看来，该教程似乎暗示只需将一个元素包装在一个 LazyPanel 中就足以使这件事发挥作用。但是，当我尝试编译和运行这个项目时，GWT 编译器会抱怨并告诉我

```
Rebind result 'com.google.gwt.user.client.ui.LazyPanel' cannot be abstract 
```

如何使用 UiBinder 使用 LazyPanel？我的配置有问题还是我缺少什么？

我正在使用 GWT 2.4（这是 AFAIK 最新的稳定版本）。

--

**编辑**：这是我正在使用的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:g="urn:import:com.google.gwt.user.client.ui" xmlns:s="urn:import:de.dfv.yankee.client.tabs.start"
    xmlns:b="urn:import:de.dfv.yankee.client.tabs.bewerber" xmlns:f="urn:import:de.dfv.yankee.client.tabs.firmen"
    xmlns:k="urn:import:de.dfv.yankee.client.tabs.kommunikation" xmlns:a="urn:import:de.dfv.yankee.client.tabs.admin"
    xmlns:v="urn:import:de.dfv.yankee.client.tabs.abrechnung" xmlns:u="urn:import:de.dfv.yankee.client.tabs.user"
    xmlns:svg="urn:import:org.vectomatic.dom.svg.ui">

    <ui:with field="svgBundle" type="de.dfv.yankee.client.tabs.Tabs.SVGBundle" />

    <g:TabLayoutPanel barUnit="PX" barHeight="30"
        ui:field="tabs">

        <g:tab>
            <g:header>Start</g:header>
            <s:StartTab ui:field="startTab" />
        </g:tab>

        <g:tab>
            <g:header>Bewerber</g:header>
            <b:BewerberSucheTab ui:field="bewerberSucheTab" />
        </g:tab>

        <g:tab>
            <g:header>Bewerber Ergebnis</g:header>
            <g:HTMLPanel>
                <svg:SVGImage ui:field="svgImage" resource="{svgBundle.plz}" />
            </g:HTMLPanel>
        </g:tab>

        <g:tab>
            <g:header>Firmen</g:header>
            <g:LazyPanel>
                <f:FirmenSucheTab ui:field="firmenSucheTab" />
            </g:LazyPanel>
        </g:tab>

        <g:tab>
            <g:header>Firma Ergebnis</g:header>
            <g:HTMLPanel>

            </g:HTMLPanel>
        </g:tab>

        <g:tab>
            <g:header>Kommunikation</g:header>
            <k:KommunikationsTab ui:field="kommunikationsTab" />
        </g:tab>

        <g:tab>
            <g:header>Abrechnung</g:header>
            <v:VermittlungenTab ui:field="vermittlungenTab" />
        </g:tab>

        <g:tab>
            <g:header>Userverwaltung</g:header>
            <u:UserTab ui:field="userTab" />
        </g:tab>

        <g:tab>
            <g:header>Admin</g:header>
            <a:AdminTab ui:field="adminTab" />
        </g:tab>

    </g:TabLayoutPanel>

</ui:UiBinder> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:05:38.150

**编辑开始**

这是正确的解决方案：

```
<g:TabLayoutPanel barHeight="2" barUnit="EM" width="250px" height="150px">
  <g:tab>
    <g:header>T1</g:header>
    <t:MyLazyPanel1 />
  </g:tab>
  <g:tab>
    <g:header>T2</g:header>
    <t:MyLazyPanel2 />
  </g:tab>
</g:TabLayoutPanel> 
```

`MyLazyPanel1`：

```
public class MyLazyPanel1 extends LazyPanel {
  Label l = new Label("label1");
  @Override
  protected Widget createWidget() {
    System.out.println("now1");
    return l;
  }
} 
```

`MyLazyPanel2`：

```
public class MyLazyPanel2 extends LazyPanel {
  Label l = new Label("label2");
  @Override
  protected Widget createWidget() {
    System.out.println("now2");
    return l;
  }
} 
```

现在，您可以在应用程序启动时在控制台中看到“now1”，单击第二个选项卡时会显示“now2”。

**编辑结束**

这有效：

```
<g:TabLayoutPanel barHeight="2" barUnit="EM" width="250px" height="150px">
  <g:tab>
    <g:header>T1</g:header>
    <t:MyLazyPanel>
      <g:Label>ABC</g:Label>
    </t:MyLazyPanel>
  </g:tab>
  <g:tab>
    <g:header>T2</g:header>
    <t:MyLazyPanel>
      <g:Label>123</g:Label>
    </t:MyLazyPanel>
  </g:tab>
</g:TabLayoutPanel> 
```

在哪里`MyLazyPanel`：

```
public class MyLazyPanel extends LazyPanel {
  @Override
  protected Widget createWidget() {
    return null;
  }
} 
```

但我不知道它是否真的很懒惰

...至少它编译并且结果看起来像expexted

看看这里：http: [//google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/LazyPanel.html](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/LazyPanel.html)

# xpages - 是否可以在自定义控件设计定义中确定方面内容？

> ID：10245764
> 
> 赞同：2
> 
> 时间：2012-04-20T11:56:01.933
> 
> 标签：xpages

我将自定义控件的设计定义放在一起，并希望根据不同的自定义控件是否已放置在其中一个方面区域中来改变它的显示方式。这可能与设计定义有关吗？如果可以，怎么做？

我知道我可以通过使用“this”来引用自定义控件的属性，但我无法猜测如何获取方面内容信息。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:29:47.997

担，

您能否将可编辑区域作为 javax.faces.component.UIComponent 获取，然后执行 .getFacets()？

顺便说一句，希望你一切都好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:29:11.547

在设计定义中，您可以添加一个回调节点，您的构面应该出现在其中。当您将控件添加到另一个页面时，这应该会公开可编辑区域。

回调节点的格式类似于

`<xp:callback id="callbackID" facetName="facetname" />`

# c# - Application_OnPostAuthenticateRequest 和自定义主体缓存

> ID：10245766
> 
> 赞同：1
> 
> 时间：2012-04-20T11:56:09.057
> 
> 标签：c#, session

我已经实施了一个自定义主体方法，如第 5 步中所述[：](http://www.asp.net/web-forms/tutorials/security/introduction/forms-authentication-configuration-and-advanced-topics-cs)使用**自定义主体**

然后，我从数据库中检索用户凭据以与自定义主体一起使用，但这会导致对每个请求的数据库调用，因此答案自然是将我的用户对象保存在某个位置，会话或缓存。

但是，似乎`HttpContext.Current.Session`无法从内部访问 `Application_OnPostAuthenticateRequest`，因此 Cache 似乎是要走的路

[问题是这里](https://stackoverflow.com/a/1147292/1021958)和[这里](https://stackoverflow.com/a/6362717/1021958)的这两个答案提供了相互矛盾的建议。第一个建议

> 不，不要使用 HttpCurrent.Current.Cache 来存储用户特定的信息，因为缓存对所有用户都是通用的，你会遇到冲突。请改用 HttpContext.Current.Session，因为这将特定于用户。

第二个建议

> 使用缓存而不是会话

那么哪个是首选方法？
如果`Session`是要走的路，我如何将我的用户对象从`Application_OnPostAuthenticateRequest`方法中放入 Session 对象中。
如果`Cache`是前进的道路，我将面临什么问题？例如，缓存中的项目是否有时间限制？（我知道通过使用来自用户对象的唯一键来解决潜在的冲突）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:19:19.403

不确定您是否仍在寻找答案，但在`Ticket.UserData`写票时存储身份验证信息的最佳位置是在属性中。

我假设如果您使用的是自定义提供程序，那么您将覆盖该`SetAuthCookie`方法。

如果是这种情况，那么该方法将让您传递额外的信息以进行存储。存储友好的用户名、角色或其他身份验证详细信息等内容很常见。

请参阅此链接以[在身份验证 Cookie 中设置 UserData](http://www.asp.net/web-forms/tutorials/security/introduction/forms-authentication-configuration-and-advanced-topics-vb "在身份验证 Cookie 中设置 UserData")

# java - 无法在 Java 代码中使用 .dll 文件

> ID：10245767
> 
> 赞同：0
> 
> 时间：2012-04-20T11:56:09.660
> 
> 标签：java, dll, java-native-interface

> **可能重复：**
> [如何在 java 代码中使用 .dll 文件？](https://stackoverflow.com/questions/10208914/how-to-use-dll-files-in-java-code)

我正在使用的 dll 文件出现错误：

错误信息是：

```
java.lang.UnsatisfiedLinkError: Expecting an absolute path of the library: Eagleye_parser
    at java.lang.Runtime.load0(Runtime.java:767)
    at java.lang.System.load(System.java:1005)
    at test.TestDllJava.<clinit>(TestDllJava.java:15)
Exception in thread "main" 
```

这是代码：

```
public class TestDllJava {

    private static native String[] eagleye_fmu(String A);

    public static void main(String[] args){
        String[] ag = null;
        String parameter =  null;
        parameter = "356188030442449 10250000 0001F464 0000EB34 0002CC7D 4xA0";
         ag = eagleye_fmu(parameter);
        System.out.println(ag);
    }

    static { 
        System.load("Eagleye_parser");
    } 
} 
```

请纠正我，我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:06:02.483

正如[load() 的文档所](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#load%28java.lang.String%29)指定的：

> 从本地文件系统加载具有指定文件名的代码文件作为动态库。**文件名参数必须是完整的路径名。**

不说明库的绝对路径的更好方法是使用[loadLibrary()](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#loadLibrary%28java.lang.String%29)或也许.`load(`[`mapLibraryName(..)`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#mapLibraryName%28java.lang.String%29)`)`

在 Eclipse 中，您可以通过项目属性 -> Java 构建路径 -> 选项卡库 -> 展开您的系统库，在项目中指定本机库文件夹，单击本机库位置。Eclipse 将为`java.library.path`您构建，`loadLibrary()`然后会很容易地看到它。

![项目属性截图](../Images/c3f911eb58b48130b856cdc575a09bae.png)

# c++ - 在 Visual Studio 2010 和 11 之间共享 C++ 解决方案

> ID：10245771
> 
> 赞同：15
> 
> 时间：2012-04-20T11:56:31.440
> 
> 标签：c++, visual-studio

我和我的伙伴都通过颠覆共享一个 c++ 解决方案。

他使用的是 Visual Studio 11，而我使用的是 Visual Studio 2010。

在他第一次提交并且我更新后，我收到以下错误：

`Error 31 error MSB8008: Specified platform toolset (v110) is not installed or invalid. Please make sure that a supported PlatformToolset value is selected.`

另外，在头文件中，我收到以下错误`#include <stdio.h>`：

`error: cannot open source file "stdio.h"`

我猜这是一个兼容性问题。我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-23T10:22:50.920

在 Visual Studio 11 中，有一个属性选项允许您指定平台工具集。

如果您从 Visual Studio 11 开始创建新项目，则默认使用 Platform Toolset v110，但如果可以将其更改为 Visual Studio 2010 使用的 v100。

![工具集选项](../Images/31445ad610fa4efe85fbd798f07d97c0.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T12:03:08.113

保存在 Visual Studio 11 中的 .sln 和 .vcxproj 文件不向后兼容 VS2010。即使它们是兼容的，最终你也会遇到一个在 VS11 中可编译但在 VS10 中不可编译的代码。

最好的（也可能是唯一的）方法是同意使用完全相同的开发环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:45:58.570

讨论有点晚了，但由于您使用的是源代码控制，您可以从存储库中删除项目和解决方案文件并仅共享源代码。显然，如果您将新模块等添加到项目中，则必须在其他解决方案中手动添加它们，但至少您不必担心这种不兼容性。如果您想深入了解它，可以仅使用编译器和链接器开关从命令行构建应用程序，这往往在修订版之间更加兼容。最后，您可以使用另一个构建工具（除了 MSBuild），它在工作室版本之间保持兼容。

如果您决定删除解决方案和项目文件，需要考虑的一件事是将原始 YourApp.sln 的副本保存为 YourApp.sln.2010。然后，您将有一些东西可以用来播种未来的解决方案，但项目和解决方案的更新都需要从 VS 2010 完成，然后将文件复制到它们的 .2010 版本并手动维护。

如果 SVN 支持补丁，或者如果你愿意在外部运行被子（或者如果你切换到 mercurial，你可以使用 MQ 扩展），你可以创建从 2010 到 2011 的补丁文件并删除升级补丁(s) 同步前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T12:39:54.010

Drake 的解决方案对我不起作用，因为解决方案中所有项目的属性都已正确设置为 v100。但是，确实有效的修复是清理构建并删除所有其他不是源文件或项目文件的文件。我认为它可能正在删除`projname.vcxproj.user`修复它的文件，因为工具链首选项可能以某种方式在用户首选项中被覆盖。

# javascript - 如何解决“无法调用未定义的方法……”错误？

> ID：10245779
> 
> 赞同：7
> 
> 时间：2012-04-20T11:56:50.447
> 
> 标签：javascript, google-maps-api-3

```
 function calcRoute() {
        var start = document.getElementById("start_").value;
        var end = document.getElementById("end_").value;
        var request = {
            origin: start,
            destination: end,
            travelMode: google.maps.TravelMode.DRIVING
        };
        directionsService.route(request, function (response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
            }
        });
    } 
```

在 Chrome 中给出错误消息：“未捕获的 TypeError：无法调用未定义的方法 'setDirections'”。有人可以建议解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T12:19:27.073

你失踪了（全局变量）

```
//var directionsService = new google.maps.DirectionsService();
var directionsDisplay = new google.maps.DirectionsRenderer({ 'map': map }); 
```

所以`directionsDisplay`是未定义的。

# css - 页面宽度溢出，但没有元素超出其宽度

> ID：10245782
> 
> 赞同：0
> 
> 时间：2012-04-20T11:56:54.383
> 
> 标签：css

所见的页面元素恰好在浏览器滚动条开始的地方结束，但存在水平滚动条。

有问题的页面：[http ://www.ivault.sg/shop/power](http://www.ivault.sg/shop/power)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:00:26.970

在你的 CSS 中使用它：

```
body {
    overflow-x: hidden;
} 
```

# java - 有谁知道队列和堆栈实现/操作的数组列表表示的任何好的例子？

> ID：10245784
> 
> 赞同：2
> 
> 时间：2012-04-20T11:57:06.790
> 
> 标签：java, arraylist, stack, queue, implementation

有谁知道队列和堆栈的数组列表表示以及Java中相关操作/方法的实现的任何好的例子？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:02:14.280

[`ArrayDeque`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html)是`Deque`接口的可调整大小的数组实现，推荐替换[`Stack`](http://docs.oracle.com/javase/6/docs/api/java/util/Stack.html)（从 Java6 开始）。它还实现了[`Queue`](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html):-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:59:31.893

[`ArrayBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)是 的数组列表实现`Queue`。（[文档`Queue`](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)列出了许多实现。）

[`Stack`](http://docs.oracle.com/javase/6/docs/api/java/util/Stack.html)实际上是一个类，而不是一个接口，所以`Stack`它本身已经是一个实现。`Stack`extends`Vector`几乎是一个（同步的）数组列表。

然后有一个[`ArrayDeque`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html)提供堆栈操作（如[`push`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html#push%28E%29), ）[`pop`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html#pop%28%29)和队列操作（如[`addLast`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html#addLast%28E%29)和[`removeFirst`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html#removeFirst%28%29)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:01:23.813

是的，看`java.util.concurrent.ArrayBlockingQueue`和`java.util.Stack`。源代码随 JDK 一起提供。

# php - 解析数据 org.json.JSONException 时出错：org.json.JSONObject$1 类型的 lat 值为 null 无法转换为双精度

> ID：10245787
> 
> 赞同：-1
> 
> 时间：2012-04-20T11:57:18.930
> 
> 标签：php, android, mysql, database, http

我收到以下错误，andoroid 试图从 PHP 返回数据

```
try {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();

    result=sb.toString();
} catch(Exception e) {
    Log.e("log_tag", "Error converting result "+e.toString());
}

//parse json data
try {
    JSONArray jArray = new JSONArray(result);

    //-----------------------------------------

    //----------------------------------------
    for(int i=0;i<jArray.length();i++) {
        JSONObject json_data = jArray.getJSONObject(i);
        map = new HashMap<String, String>();
        map.put("nomclt", (String) json_data.get("nomclt"));
        map.put("prenomclt", (String) json_data.get("prenomclt"));
        // map.put("adresse", (String) json_data.get("adresse"));
        //enfin on ajoute cette hashMap dans la arrayList
        listItem.add(map) 
```

脚本 php

```
<?php
    header('Content-type: application/json');

    mysql_connect("localhost","root","");
    mysql_select_db("test");

    $sql=mysql_query("SELECT * FROM client");
    $output = array();
    while($row=mysql_fetch_array($sql))
        $output[]=$row;

    print(json_encode($output));

    mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T22:28:42.180

哪一行导致Android端提示异常？键入这个来解析 JSONObject 字符串：

```
map = new HashMap<String, Object>(); 
```

希望它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:00:13.330

我不知道这是否是问题，但 json_encode() 仅适用于 UTF-8 值： http: [//php.net/json_encode](http://php.net/json_encode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:35:10.927

这可能是 JSON 中的问题。通过粘贴 json 或 php 文件的 url，使用[JSONLint](http://jsonlint.org/)检查 php 返回的 json。

# c# - 我需要将多个模型传递给视图还是有另一种方法可以做到这一点？

> ID：10245788
> 
> 赞同：0
> 
> 时间：2012-04-20T11:57:19.697
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

在我的应用程序中，我有“联系人”和“邀请”当我想创建新的邀请时，我希望用户从他的联系人中选择要邀请的人“例如使用多个复选框。在 Invitation Controller 中，我想将邀请模型以及用户拥有的联系人列表传递给视图。

我如何在 ASP.net MVC 3 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T11:59:22.993

为什么没有复杂类型的模型？就像是：

```
public class MyModel
{
    public Invitation Invitation { get; set; }
    public List<Contact> Contacts { get; set; }
} 
```

然后在视图中您的模型声明是（假设您使用的是剃须刀）：

```
@model MyModel 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:01:11.047

2个选择：

*   使用 ViewModel（新类引用了您需要的所有类）
*   使用一个类作为模型和第二个类的 ViewBag

# iphone - Twitter 集成在 (ios 5) 中没有响应

> ID：10245792
> 
> 赞同：1
> 
> 时间：2012-04-20T11:57:31.660
> 
> 标签：iphone, ios5, twitter, ios4

我正在开发一个应用程序，其中我使用这些[Twitter-Oath-iPhone](https://github.com/bengottlieb/Twitter-OAuth-iPhone)集成了 Twitter 。这些库在低于 ios 5 的版本上运行良好我如何在 ios 5 中使用 twitter。我不知道 Twitter 是否在 API 中进行了更改，或者苹果在 ios 5 中进行了任何更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:26:13.803

`"SA_OAuthTwitterEngine.m"`您在 IOS 5 中使用的 API 工作良好，只在类中进行了微小的更改

`"SA_OAuthTwitterEngine.m"`在类中替换此函数

```
- (SA_OAuthTwitterEngine *) initOAuthWithDelegate: (NSObject *) delegate 
{
    if (self = (id) [super initWithDelegate: delegate]) {
        self.requestTokenURL = [NSURL URLWithString: @"https://twitter.com/oauth/request_token"];
        self.accessTokenURL = [NSURL URLWithString: @"https://twitter.com/oauth/access_token"];
        self.authorizeURL = [NSURL URLWithString: @"https://twitter.com/oauth/authorize"];
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:20:53.873

尝试通过替换此功能`"SA_OAuthTwitterEngine.m"`

```
- (SA_OAuthTwitterEngine *) initOAuthWithDelegate: (NSObject *) delegate {
    if (self = (id) [super initWithDelegate: delegate]) {
        self.requestTokenURL = [NSURL URLWithString: @"http://twitter.com/oauth/request_token"];
        self.accessTokenURL = [NSURL URLWithString: @"http://twitter.com/oauth/access_token"];
        self.authorizeURL = [NSURL URLWithString: @"http://twitter.com/oauth/authorize"];
    }
    return self;
} 
```

代替此代码使用此代码

```
- (SA_OAuthTwitterEngine *) initOAuthWithDelegate: (NSObject *) delegate {
    if (self = (id) [super initWithDelegate: delegate]) {
        self.requestTokenURL = [NSURL URLWithString: @"https://api.twitter.com/oauth/request_token"];
        self.accessTokenURL = [NSURL URLWithString: @"https://api.twitter.com/oauth/access_token"];
        self.authorizeURL = [NSURL URLWithString: @"https://api.twitter.com/oauth/authorize"];
    }
    return self;
} 
```

这个解决了我的问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:04:03.557

[iOS 5 教程的 Twitter 集成](http://tonyngo.net/2011/10/twitter-integration-tutorial/)：

> iOS 5 中令人兴奋的新功能之一是 Twitter 集成。照片、YouTube、Safari 和地图完全集成。随着大多数 iOS 5 用户加入了 Twitter 的潮流（Twitter 的 CEO 表示，Twitter 的每日注册量增加了两倍），允许您的用户发布有关您的应用程序的推文有助于将其展示在更多人面前。在这篇 iDevBlogADay 帖子中，我想编写一个教程，用于将您的应用程序与 Twitter 集成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T13:59:52.523

对于 ios 5 中的 twitter 集成非常容易，因为在 ios 5 中添加了新框架，只需按照以下步骤操作：1\. 添加 twitter.framework 2.[从 twitter 官方网站关注](https://dev.twitter.com/docs/ios/how-add-twitter-framework-your-ios-project)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T16:07:15.767

在 ios-5 中有一个非常简单的方法来集成 Twitter，只需添加 Twitter 框架并使用此代码。链接如下。

[http://bit.ly/FLTwitter](http://bit.ly/FLTwitter)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-21T10:34:59.613

您还可以将此代码与 iOS5 中 Twiiter 的内置框架一起使用.....只需`Twitter.framework`从您的构建库中添加，然后只需在您的 viewcontroller.h 文件中导入波纹管头文件

```
#import <Twitter/TWTweetComposeViewController.h> 
```

afetr 当你想在 twitter 上分享你的消息时，只需再次使用 viewcontroller.m 文件中的波纹管代码，只需导入

```
#import <Twitter/TWTweetComposeViewController.h> 
```

......

```
- (IBAction)shareOnTwitter:(id)sender {

    TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];

    [twitter setInitialText:@"It's really that simple!"];
    [twitter addImage:[UIImage imageNamed:@"yourimage.jpg"]];//if required
    [twitter addURL:[NSURL URLWithString:@"your url link"]];//if required

    [self presentViewController:twitter animated:YES completion:nil];

    twitter.completionHandler = ^(TWTweetComposeViewControllerResult res) {

        if(res == TWTweetComposeViewControllerResultDone)
        {

            UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:@"Succes!" message:@"Your Tweet was posted succesfully" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

            [alertView show];

        }else if(res == TWTweetComposeViewControllerResultCancelled)
        {

            UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:@"Canceled" message:@"Your Tweet was not posted" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

            [alertView show];

        }

        [self dismissModalViewControllerAnimated:YES];

    };

} 
```

希望这可以帮助您，并且此代码有时可能无法在模拟器中工作，因此请在设备中对其进行测试.....

# shell - Shell 脚本： export test1="ab c" 有效，但 $(echo 'export test2="ab c"') 无效

> ID：10245799
> 
> 赞同：1
> 
> 时间：2012-04-20T11:58:05.013
> 
> 标签：shell, escaping, zsh

我似乎遇到了一些 shell 脚本（尤其是 ZSH）的问题，其中 shell 无法理解带有空格的导出。该问题仅在使用 `runco​​mmand` 或 $(runco​​mmand) 时发生。

测试用例：

```
# Works fine:
export test1="a b c"

# Does not work:
$(echo 'export test2="a b c"') 
```

该错误类似于`export:4: not valid in this context: c"`. 在空格和/或引号之前添加 1-2 `\`-escapes 可能会将错误消息更改为`export:4: not valid in this context: b\`.

可能有人能洞察问题是什么？谢谢你。

（我这样做的原因是允许python通过动态生成在.myshellrc中运行的代码来设置shell变量；如果有人知道更优雅的方法来做到这一点，那将非常欢迎作为评论。谢谢你。）**编辑**：为了澄清，我正在寻找一种方法来完成上述工作，或者另一种方法来允许外部脚本决定要导出的内容。

（*叹气*，我希望这不是 4.3.12 中特定于版本的问题......我认为这在过去可能有效。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:21:43.753

这里的问题是工作拆分是在作为命令运行之前对输出进行的。你最终得到的是`export`用 3 个参数调用 - `test1="a`,`b`和`c"`.

`eval`正如其他答案所提到的那样，使用它是解决它的一种方法。

另一种解决方案是使用[流程替换](http://zsh.sourceforge.net/Intro/intro_7.html)。如果您的脚本正在生成多行代码，这将特别有用。

例子：

```
zsh% source =(echo export test1=\"a b c\")
zsh% echo $test1                          
a b c 
```

ps 您可能希望使用`<(...)`语法而不是`=(...)`允许它在 bash 中工作的语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:06:17.580

看看[这个](http://www.gnu.org/software/bash/manual/bash.html#Quote-Removal)。你可以试试：

```
eval 'export test2="a b c"' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T12:16:39.537

执行此操作的通常方法是使用`eval`kev 所说的并将相关程序的完整输出传递给它。然后程序应该自己生成有效的 shell 代码：

`eval "$(your_script.py)"`

并且`your_script.py`会打印类似的东西`export var1="a b c"`（是的，在输出中使用括号是可以的）。

使用这种技术的程序的一个例子是[rbenv](https://github.com/sstephenson/rbenv)。用户必须放入`eval "$(rbenv init -)"`他的 shell 初始化文件，并且`rbenv init`实际上输出了相当多的代码：

```
export PATH="/opt/rbenv/shims:${PATH}"
source "/opt/rbenv/libexec/../completions/rbenv.zsh"
rbenv rehash 2>/dev/null
rbenv() {
  local command="$1"
  if [ "$#" -gt 0 ]; then
    shift
  fi

  case "$command" in
  shell)
    eval `rbenv "sh-$command" "$@"`;;
  *)
    command rbenv "$command" "$@";;
  esac
} 
```

# html - HTML5 有效的命名空间标签前缀

> ID：10245807
> 
> 赞同：1
> 
> 时间：2012-04-20T11:58:48.423
> 
> 标签：html, tags, w3c, w3c-validation

验证我的页面时，W3-Validator 给我一个错误

```
<tag addthis:title="AddThis share title" /> 
```

我的代码中的属性。如何使这些属性对 HTML5 有效，以便页面验证？我需要这些标签，所以 addthis 为我的共享链接使用正确的标题，所以我无法摆脱它们......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:02:42.060

我不得不假设“addthis”是一个 XML 命名空间；html标签是否声明了类似的东西`<html xmlns:addthis="..">`？如果不是，它将不会验证，因为该文档的命名空间未定义。如果是这样，它不会验证，因为“addthis”不是标准命名空间。

见：[http ://www.w3.org/TR/2011/WD-html5-20110405/namespaces.html](http://www.w3.org/TR/2011/WD-html5-20110405/namespaces.html)

让您感到困惑的是“HTML 语法不支持名称空间声明，即使在外来元素中也是如此”。

查看[http://www.w3.org/TR/2011/WD-html5-20110405/syntax.html#elements-0](http://www.w3.org/TR/2011/WD-html5-20110405/syntax.html#elements-0)`cdr:license`示例。

不幸的是（在您的情况下）HTML5 不是 XML，因此 XML 命名空间在 HTML5 中不一定有效。您唯一真正的选择是忽略验证错误。

并非不相关的问题：[HTML5 验证器在 Facebook OpenGraph XML 命名空间 xmlns:og 上失败](https://stackoverflow.com/questions/8338499/html5-validator-failing-on-facebook-opengraph-xml-namespace-xmlnsog)

哦，当你在那里时，`<tag />`语法也是 XML，*而不是*HTML5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:20:35.897

你不能使它们有效。不在 HTML 中，不在 XHTML 中。HTML5 中唯一允许的有效自定义属性以“data-”开头。

您可以使您的标记有效的 HTML5+something 或 XHTML5+something，但让验证器来检查它是一项不平凡的任务。

# java - 如何查询列表是否包含某些值

> ID：10245808
> 
> 赞同：2
> 
> 时间：2012-04-20T11:58:51.933
> 
> 标签：java, objectify

我正在尝试将此 JDO 查询转换为 Objectify 查询：

```
 Query query = pm.newQuery(User.class,
      "someList.contains(userParam) && someProperty== null");
    query.declareParameters("String userParam");
    query.setRange(0, 1);
    query.execute(user.getId()); 
```

这是我的 Objectify 实现，但我不确定这是否正确：

```
 Query<Question> queryResult = dao.query().filter("someProperty", null)
            .filter("someList.contains", user.getId())
            .limit(1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:23:55.317

Objectify 的工作方式类似于 Java 低级 API。只需在列表属性上使用相等过滤器：

```
Query<Question> queryResult = dao.query(User.class)
        .filter("someProperty", null)
        .filter("someList", user.getId())
        .limit(1); 
```

# jquery - 动态启用/禁用 Fancybox

> ID：10245814
> 
> 赞同：0
> 
> 时间：2012-04-20T11:59:08.580
> 
> 标签：jquery, fancybox

我正在尝试打开/关闭我的 Fancybox 我找不到如何操作！

我试过 $("#element").unbind('click.fb') 但它没有用......

这是我的例子：http: [//jsfiddle.net/gbTZn/23/](http://jsfiddle.net/gbTZn/23/)

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:02:22.187

简单地切换默认的 preventDefault 方法怎么样？

IE

```
var isFBActive = true;
$(document).ready(function(e)
{
.. after your FB initilisation code ..
$('.yourimageclass').click(function (e) { if (!isFBActive) {e.preventDefault();} });
}); 
```

# ruby-on-rails - 更改选择框时的动态嵌套表单

> ID：10245818
> 
> 赞同：6
> 
> 时间：2012-04-20T11:59:24.390
> 
> 标签：ruby-on-rails, nested-forms

我使用了 Ryan bates 嵌套模型形式，它工作正常，但
我有两个模型，即存储和订单都有嵌套模型称为项目。

贮存：

```
has_many :orders  
has_many :items, :dependent => :destroy
accepts_nested_attributes_for :items 
```

命令：

```
belongs_to:storage         
has_many :items, :dependent => :destroy
accepts_nested_attributes_for :items 
```

为了查看有存储选择框，

```
<%= f.select :storage_id,
            Storage.all.map{|s| [s.store_no, s.id]} %> 
```

在选择存储编号时，相应的项目应部分显示在订单表格中，
任何人都可以告诉我最好的方法。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T20:22:49.837

首先，您需要查看该输入字段以查看它是否已更改。所以，假设：

1.  存储选择器的 id 为“存储”
2.  存储选择器将“存储”的 id 作为其值

...你可以把它放在你的`storage.coffee.js`文件中：

```
jQuery ->
  $('select#storage').change ->
    storage_id = $('option:selected',this).val()
    $.get 'storages/' +storage_id+ '/orders.js' 
```

然后，假设 Orders 嵌套在 storage 下，如果您的 OrdersController 如下所示：

```
OrdersController < ApplicationController

  def index
    @storage = Storage.find(params[:storage_id])
    @orders = @storage.orders
  end

end 
```

...如果您有部分`app/views/orders/_order.html.erb`...

...如果您`div#orders`的页面上有一个您希望将订单放入...

...那么你应该能够`app/views/orders/index.js.erb`像这样制作一个文件：

```
$('div#orders').html('<%= escape_javascript(render @orders) %>'); 
```

这应该为属于给定存储的订单的每个实例呈现部分副本，并将其附加到存储选择器之后的 dom。

发生了什么：当更改选择菜单时，它会将JS触发到给定存储的订单索引请求。然后，该请求将自动尝试提供 index.js 页面，并在该视图可用的控制器中设置实例变量。该视图中的 js 将在插入任何插值 ruby​​ 后执行，因此您可以使用 rails 函数（如`render @orders`），然后将这些函数的输出通过 注入到 dom 中`$('div#orders').html('your rendered orders will be inserted in here by rails')`。

显然，您必须对其进行调整以适合您的页面，我只是猜测您页面的哪些元素被调用等，但是这个基本概念应该可以正常工作。如果您有任何问题，请告诉我。

# jruby - JRuby 中的 GC::Profiler.enable

> ID：10245826
> 
> 赞同：1
> 
> 时间：2012-04-20T11:59:56.447
> 
> 标签：jruby

我正在尝试分析我的应用程序，看看我可以在哪里调整内存管理和速度。我已阅读垃圾收集，我正在尝试使用

```
GC::Profiler.enable 
```

在我的应用程序中。但是，当我在 Jruby 中调用它时，我得到了一个

```
org.jruby.exceptions.RaiseException: (NameError) uninitialized 
```

我知道垃圾收集是在 Jruby 上的 JVM 中完成的——所以这可能就是为什么它没有被初始化这是有道理的，在 Jruby 中使用的替代方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:04:30.053

这是一个 MRI 特定的 API - 可能由于 JVM 的工作方式，JRuby 没有等效的 API（大多数 VM 有多种 GC 策略，并且没有一致的 API 可以与 GC 一起使用，即使`System.gc()`调用也不需要触发垃圾收集立即地）。

但是有一个标准的监控 API（称为**MX**）可用于 Java 应用程序，并且由于您的 JRuby 应用程序是一个 Java 应用程序，您可以使用它们，当然您可能需要了解一些内部结构，例如 JVM 如何看到您的 ruby​​ 类，但这并不难。

尝试从这里开始：[http ://www.engineyard.com/blog/2010/monitoring-the-jvm-heap-with-jruby/](http://www.engineyard.com/blog/2010/monitoring-the-jvm-heap-with-jruby/)

以下是可用于 JRuby 的 Java 工具摘要：http: [//blog.headius.com/2010/07/browsing-memory-jruby-way.html](http://blog.headius.com/2010/07/browsing-memory-jruby-way.html)

不要忘记检查 wiki，例如有一个关于分析对象分配的页面： [https ://github.com/jruby/jruby/wiki/Profiling-Object-Allocations](https://github.com/jruby/jruby/wiki/Profiling-Object-Allocations)

# c# - 项目模板不显示替换

> ID：10245833
> 
> 赞同：0
> 
> 时间：2012-04-20T12:00:06.153
> 
> 标签：c#, itemtemplate

我正在为我的一个客户构建一个自定义类项目模板，一旦我完成了我的部分开发，他将接管我的开发。

在模板中，我想通过注册的组织，但这对我不起作用。

我确认注册组织已在注册表中提供，HKLM/Software/Microsoft/Windows NT/CurrentVersion/RegisteredOrganization

在 vstemplates 文件中，我启用了 ReplaceParameters="true"。在我的类模板中，我想提取模板文档中所述的值 $registeredorganization$ ，但这不会带回存储在注册表中的值“MyCompany”？

# asp.net - 存储文件的 SQL Server 16G 数据库上的 SqlException 超时

> ID：10245836
> 
> 赞同：0
> 
> 时间：2012-04-20T12:00:13.157
> 
> 标签：asp.net, sql, database, timeout, sqlexception

好的 - 我知道这是一个糟糕的举动，但我们最终决定将文件保存到数据库中以方便......现在问题来了。

我们有一个名为“XXX_DataStore”的数据库，我们将上传的文件保存到一个表中，并将二进制文件数据分离到一个名为“FileData”的表中，以便仅在需要数据时使用。

每个文件小于 60M（90% 文件小于 1M），但是从上周开始，当用户上传大于 50M 的文件时，系统会抛出“SqlException Timeout”类异常（ASP.NET 应用程序） - 任何小于50M的文件都可以上传成功？！

我试图增加 web.config 中 sqlString 的“连接超时”以及 ASP.NET 应用程序请求的超时 - 没有一个有效。

对此有什么帮助吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:04:29.457

您需要增加的超时是 SqlCommand 超时 - 这将默认为 30 秒。

# deployment - Play framework 2.0 中的路由不适用于 Nginx 下的独立应用程序

> ID：10245839
> 
> 赞同：2
> 
> 时间：2012-04-20T12:00:17.097
> 
> 标签：deployment, routing, nginx, playframework-2.0

我正在使用 Play 框架 2.0。我正在使用“play dist”创建一个独立的应用程序。

我也使用 Nginx 作为前端。所以，我有 Nginx 配置：

```
location /terra {
         proxy_pass http://127.0.0.1:9000;

         proxy_redirect          off;
         proxy_set_header        Host            $host;
         proxy_set_header        X-Real-IP       $remote_addr;
         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
     } 
```

我的路由文件如下所示：

```
GET /  controllers.Application.index()           
GET /projects     controllers.Application.projects() 
```

当我启动一个应用程序时

```
sh start -Dhttp.address=127.0.0.1 -Dhttp.port=9000 
```

要不就

```
sh start 
```

并转到[http://hostnamehere/terra](http://hostnamehere/terra)我得到： Action not found For request 'GET /terra'

如果我`GET / controllers.Application.index()`改为`GET /terra controllers.Application.index()`- 它也不起作用。

此外，当我在本地运行我的应用程序并转到“localhost:9000/WRONG_ROUTING_NAME”时，我得到了同样的错误，但我可以看到“这些路由已按此顺序尝试：”和方法列表。部署应用程序后，我看不到相同的列表。

当我使用时，`curl myhost.com:9000`我得到：`curl: (52) Empty reply from server`– Azee 12 秒前编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:26:54.097

问题不在于路由。如果你运行`play dist`，你会得到一个独立的应用程序。但是您只能在同一台本地机器上运行它。似乎“dist”还会在某处复制一些配置文件。如果要在远程服务器上运行独立应用程序，则必须`play dist`在该主机上调用。我在 Play 文档中找不到任何相关内容。但我需要这些信息来准备 debian 包......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:02:40.963

我发现要运行由“dist”创建的应用程序，仅复制创建的目录是不够的。您必须复制整个项目目录并创建一个 - 从 zip（或某些特定文件？）解压缩并从该目录运行应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T20:13:07.200

问题出在不同的 Java 版本中。该应用程序是使用 java 7 编译的，但远程服务器在 java 6 上运行该应用程序。

我在java 6中编译并打包了应用程序，它解决了这个问题。

现在我正在使用不同架构的 Web 应用程序，但该特定应用程序仍在 1.6 上运行。

# ssas - ssas存储使用的文件有哪些

> ID：10245846
> 
> 赞同：3
> 
> 时间：2012-04-20T12:00:50.300
> 
> 标签：ssas

请帮助我了解用于存储在 ssas 中的文件。我知道一些有关 ROLAP、HOLAP 等的基础知识。我想了解 ssas 为这些 ROLAP、HOLAP、MOLAP 方法创建和使用的文件类型.（例如，在普通的 sql 数据库中，我们知道 .mdf 文件，并且该文件在逻辑上分为 8kb 文件，它们的数据以行方式存储..etc）。

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:12:17.677

SSAS 存储与 DBEngine 完全不同。使用 MOLAP，数据分布在许多文件中，当您考虑 OLAP 查询的典型访问模式（读取：随机访问）时，这很有意义，因为 OLTP 查询本质上通常更具顺序性。

如果您查看 SSAS 实例的 DATA 目录，您将看到每个 AS 数据库的文件夹。在内部，您为多维数据集中的每个对象（维度、度量组等）都有单独的文件夹。这就是为什么将 DistinctCount 度量值放在自己的度量值组中的原因。

![在此处输入图像描述](../Images/4926f7981ce4d371f72cfbf18c7cbc73.png)

在维度文件夹中，您将看到每个属性的一**组**单独文件。该集合由多种文件类型组成，具体取决于设计。除了默认键之外，是否定义了它们的属性关系？聚合呢？用户层次结构？

![在此处输入图像描述](../Images/abf0a2e4b0b6a61355b0ab792e907fb9.png)

度量值组更直接一些。每个分区都有一个单独的文件，其中包含实际的事实/数据。其他一切都与聚合有关（将维度文件链接到事实文件）。

有关文件类型和物理存储的详细信息，请查看本书... [Microsoft SQL Server 2005 Analysis Services](https://rads.stackoverflow.com/amzn/click/com/B007F824SG)

# java - 使用 Hibernate Criteria API 读取

> ID：10245848
> 
> 赞同：0
> 
> 时间：2012-04-20T12:01:05.327
> 
> 标签：java, hibernate, criteria, hibernate-criteria

我在我的项目中使用 Hibernate Criteria API。在此 API 中，`list()`方法用于从 db 获取许多记录。我的问题是：如何从数据库中只获取一条记录（不使用`list()`方法，因为不需要）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T12:07:37.623

如果您确定查询将最多返回一条记录，请使用[`Criteria#uniqueResult()`](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Criteria.html#uniqueResult()).

如果查询可以返回多条记录，但您只需获得第一个结果就可以了，您可以`uniqueResult()`结合[`Criteria#setMaxResults()`](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Criteria.html#setMaxResults(int)).

# c++ - c++ 这里的正确语法是什么？

> ID：10245852
> 
> 赞同：2
> 
> 时间：2012-04-20T12:01:16.517
> 
> 标签：c++, visual-c++

检查变量值然后在相同条件下设置变量同时检查新设置变量 var 的正确语法是什么，全部在一个 if 语句中？

所以基本上像

```
if(this->somevar > 0 && this->newvar = this->GetNewVar(this->somevar),this->newvar > 0) 
```

我知道这不是正确的语法，或者至少它对我不起作用，因此这个话题，我以它为例，所以如果`this->somevar`是 null 或 0，我不希望它执行下一个条件，即`&& this->newvar = this->GetNewVar(this->somevar,this->newvar`而是跳过该语句并忽略该部分。

像这样的东西的正确语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:07:53.980

`&&`是具有短路评估的运算符，如果左侧部分为真，则不执行右侧部分。但是你为什么不简单地写：

```
if(this->somevar > 0)
{
  this->newvar = this->GetNewVar(this->somevar);
  if (this->newvar > 0)
  {
    ... 
```

这肯定会让事情变得更清楚......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T12:03:10.733

如果计算结果为零，则逻辑 AND`&&`运算符短路，这意味着在这种情况下不会计算**if**`this->somevar`表达式的其余部分

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T12:08:06.103

逗号后的表达式不是必需的。此外，还缺少一件事，括号周围的作业：

`if(this->somevar > 0 && (this->newvar = this->GetNewVar(this->somevar)) > 0)`

如果没有括号，您最终可能会设置`this->newvar`为 boolean expression 的值，该值 `this->GetNewVar(this->somevar),this->newvar > 0`将被评估为布尔结果（true/false 反过来，根据编译器，转换时可能会转换为 0 或 1 或 -1的类型`this->newvar`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T12:15:00.947

我认为只有逗号后的位被评估为 if 条件。逗号左边的表达式被忽略。

```
int main() {
        if( false, true) { cout << " got to if( false, true ) "; }
        if ( true, false ) { cout << "got to if( true, false ) "; }
} 
```

要回答您的问题，您可以在逗号左侧放置任何内容并执行您喜欢的任何操作，只要您要评估的表达式是列表中的最后一个表达式。

所以 if ( exp1, exp2, exp3 , exp4 ) dowhatever(); 仅在 exp4 为真时运行。为了可读性，您真的应该在 if 条件之外运行 exp1 到 exp3。**

# xml - 在 SQL Server 2008 中将 xml 结果导出为 txt 文件

> ID：10245853
> 
> 赞同：1
> 
> 时间：2012-04-20T12:01:20.003
> 
> 标签：xml, sql-server-2008, file, text-files

我想知道是否有人可以帮助我...我有一个返回 xml 结果的存储过程。我需要将此结果保存在以下格式的文本文件中：

清除

CHIAVE REG

VEND REP=1,qty=1,PRICE=130,DES='coffee'

邱腾=1

数量、价格和描述来自 xml 结果。这可能吗？提前致谢...：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:20:08.103

您可以构建一个 varchar 字符串并将其保存到最后的文本文件中。但这里的限制是最大 varchar 值 (8000)。

我用这个存储过程来做到这一点；

```
alter PROCEDURE spWriteStringToFile
 (
@String Varchar(max), --8000 in SQL Server 2000
@Path VARCHAR(255),
@Filename VARCHAR(100)

--
)
AS
DECLARE  @objFileSystem int
        ,@objTextStream int,
        @objErrorObject int,
        @strErrorMessage Varchar(1000),
        @Command varchar(1000),
        @hr int,
        @fileAndPath varchar(80)

set nocount on

select @strErrorMessage='opening the File System Object'
EXECUTE @hr = sp_OACreate  'Scripting.FileSystemObject' , @objFileSystem OUT

Select @FileAndPath=@path+'\'+@filename
if @HR=0 Select @objErrorObject=@objFileSystem , @strErrorMessage='Creating file "'+@FileAndPath+'"'
if @HR=0 execute @hr = sp_OAMethod   @objFileSystem   , 'CreateTextFile'
    , @objTextStream OUT, @FileAndPath,2,True

if @HR=0 Select @objErrorObject=@objTextStream, 
    @strErrorMessage='writing to the file "'+@FileAndPath+'"'
if @HR=0 execute @hr = sp_OAMethod  @objTextStream, 'Write', Null, @String

if @HR=0 Select @objErrorObject=@objTextStream, @strErrorMessage='closing the file "'+@FileAndPath+'"'
if @HR=0 execute @hr = sp_OAMethod  @objTextStream, 'Close'

if @hr<>0
    begin
    Declare 
        @Source varchar(255),
        @Description Varchar(255),
        @Helpfile Varchar(255),
        @HelpID int

    EXECUTE sp_OAGetErrorInfo  @objErrorObject, 
        @source output,@Description output,@Helpfile output,@HelpID output
    Select @strErrorMessage='Error whilst '
            +coalesce(@strErrorMessage,'doing something')
            +', '+coalesce(@Description,'')
    raiserror (@strErrorMessage,16,1)
    end
EXECUTE  sp_OADestroy @objTextStream
EXECUTE sp_OADestroy @objTextStream 
```

# rest - 泽西岛值的映射错误

> ID：10245868
> 
> 赞同：2
> 
> 时间：2012-04-20T12:02:16.683
> 
> 标签：rest, jersey

我有一个使用[Jersey JAX-RS](https://eclipse-ee4j.github.io/jersey/)实现的 REST 应用程序。我必须在一些错误和值之间进行映射。

像这样的东西：

> 400 - 错误请求 -> 请求包含无效数据（例如丢失、错误的参数值）
> 
> 404 - 未找到 -> 无效的 URL

如何向应用程序指定如何将错误代码与特定异常/错误相关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:14:04.153

您可以执行以下操作：

```
try{ 
```

.... }catch(...){ return Response.status(Status.NOT_FOUND); }

响应是包 javax.ws.rs.core.Response

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T05:41:34.653

您可以使用异常映射功能 javax.ws.rs.ext.ExceptionMapper；

我这里有示例，请使用完整内容参考

[LetzRestOnJersey](https://github.com/itzdilip/LetzRestOnJersey)

# php - Zend ACL 与模块和控制器访问问题

> ID：10245874
> 
> 赞同：2
> 
> 时间：2012-04-20T12:02:42.070
> 
> 标签：php, zend-framework, module, acl

我已经为此工作了几天无济于事。

使用 ZF Boilerplate，我正在尝试设置一个包含模块的 ACL（因为在我的架构中有一些具有相同名称的控制器，并且无法更改）。我以为我的工作很好，只是意识到访问从未被处理过，我想我缺少一些东西，但我不确定是什么。

这是我的设置：

library/App/Action/Helpers/PrivilegesManage.php 中的助手

```
<?php 
class App_Action_Helpers_PrivilegesManage extends Zend_Controller_Action_Helper_Abstract
{
//the acl object
public $acl;
//the constructor of the our ACL
public function __construct()
{
    $this->acl = new Zend_Acl();
}

//function that sets roles for the people
public function setRoles()
{
    $this->acl->addRole(new Zend_Acl_Role('guest'));
    $this->acl->addRole(new Zend_Acl_Role('crew'));
    $this->acl->addRole(new Zend_Acl_Role('client'));
    $this->acl->addRole(new Zend_Acl_Role('admin'));
}

//function that set the resources to be accessed on the site
public function setResources()
{
    $this->acl->add(new Zend_Acl_Resource('site:error'));
    $this->acl->add(new Zend_Acl_Resource('site:index'));
    //me
    $this->acl->add(new Zend_Acl_Resource('me:clients'));
    $this->acl->add(new Zend_Acl_Resource('me:crew'));
    $this->acl->add(new Zend_Acl_Resource('me:error'));
    $this->acl->add(new Zend_Acl_Resource('me:index'));
    $this->acl->add(new Zend_Acl_Resource('me:jobs'));
    $this->acl->add(new Zend_Acl_Resource('me:people'));
    $this->acl->add(new Zend_Acl_Resource('me:system'));
    //admin
    $this->acl->add(new Zend_Acl_Resource('admin:clients'));
    $this->acl->add(new Zend_Acl_Resource('admin:crew'));
    $this->acl->add(new Zend_Acl_Resource('admin:error'));
    $this->acl->add(new Zend_Acl_Resource('admin:index'));
    $this->acl->add(new Zend_Acl_Resource('admin:jobs'));
    $this->acl->add(new Zend_Acl_Resource('admin:people'));
    $this->acl->add(new Zend_Acl_Resource('admin:system'));
}

//function that sets the privileges for the different roles
public function setPrivileges()
{
    $this->acl->allow('guest', 'site:error', 'index');
    $this->acl->deny('guest', 'site:index', 'index');

    $this->acl->allow('crew', 'site:index');
    $this->acl->allow('crew', 'site:error');
    $this->acl->allow('crew', 'me:crew');       
    $this->acl->allow('client', 'me:clients');
    $this->acl->allow('client', 'site:index', array('logout'));
    $this->acl->deny('client', 'me:crew');
    $this->acl->deny('guest', 'admin:crew', array('add'));

}

public function setAcl()
{
    Zend_Registry::set('acl', $this->acl);
}
?> 
```

然后我在 App/Plugin/Acl.php **[EDITED]中也有一个插件**

```
<?php
class App_Plugin_Acl extends Zend_Controller_Plugin_Abstract
{
/**
 *
 * @var Zend_Auth
 */
protected $_auth; //Zend_Auth instance for user access

protected $_acl; //Zend_Acl instance for user privileges
protected $_module;
protected $_action;
protected $_controller;
protected $_currentRole;
protected $_resource;

public function __construct(Zend_Acl $acl, array $options = array()) {
    $this->_auth = Zend_Auth::getInstance();
    $this->_acl = $acl;

}

 public function preDispatch(Zend_Controller_Request_Abstract $request) {

    $this->_init($request);

   if ($this->_acl->has($this->_resource)) {
        // if the current user role is not allowed to do something
        if (!$this->_acl->isAllowed($this->_currentRole, $this->_resource, $this->_action)) {

            if ('guest' == $this->_currentRole) {
                $request->setModuleName('site');
                $request->setControllerName('index');
                $request->setActionName('login');
            } 
            else {
                $request->setModuleName('site');
                $request->setControllerName('error');
                $request->setActionName('denied');

            }
        }
    }
}

protected function _init($request) 
{
    $this->_module = $request->getModuleName();
    $this->_action = $request->getActionName();
    $this->_controller = $request->getControllerName();
    $this->_currentRole = $this->_getCurrentUserRole();
    $this->_resource = $this->_module  . ':' . $this->_controller; 
}

protected function _getCurrentUserRole() 
{      

    if($this->_auth->hasIdentity()) {
        $authData = $this->_auth->getIdentity();
        //$role = isset($authData->myType())?strtolower($authData->property->privilage): 'guest';
        //retrieving the UserType
            $authTypeCheck = $authData->myType();
        if(isset($authTypeCheck)){
            $role = strtolower($authData->myType());
        }
    } else {
        $role = 'guest';
    }
    return $role;
}
}
?> 
```

现在在这里，似乎 $acl 从来没有任何资源，当我打印出 $acl 的内容时，我确实得到了一些资源。

最后在引导程序中我有：

```
 protected function _initAclControllerPlugin() {

    $this->bootstrap('frontcontroller');

    $front = Zend_Controller_Front::getInstance();
    $aclhelper= new App_Action_Helpers_PrivilegesManage();
    $aclhelper->setRoles();
    $aclhelper->setResources();
    $aclhelper->setPrivileges();
    $aclhelper->setAcl();

    $aclPlugin = new App_Plugin_Acl($aclhelper->acl);
    $front->registerPlugin($aclPlugin);
} 
```

我对 Zend 尤其是 ACL 还很陌生，因此非常欢迎任何建议和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:25:04.433

您没有定义您的资源在您的 acl 插件中执行此操作

```
protected function _init($request) 
{

    $this->_module = $request->getModuleName();
    $this->_action = $request->getActionName();
    $this->_controller = $request->getControllerName();
    $this->_currentRole = $this->_getCurrentUserRole();
   $this->_resource = $this->_module  . ':' . $this->_controller; // <-----
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T21:40:56.130

可能和这个方法有关：

```
protected function _getCurrentUserRole() 
{      

    if($this->_auth->hasIdentity()) {
        $authData = $this->_auth->getIdentity();
        //$role = isset($authData->myType())?strtolower($authData->property->privilage): 'guest';
        //retrieving the UserType
            $authTypeCheck = $authData->myType();
        if(isset($authTypeCheck)){
            $role = strtolower($authData->myType());
        }
    } else {
        $role = 'guest';
    }
    return $role;
} 
```

看起来如果 $authTypeCheck 未设置，则角色未定义。不确定 $authData->myType() 究竟做了什么，但这可能是原因。

您可以尝试将 else 添加到 if(isset($authTypeCheck)){ // } else { $role = 'guest'; }

在注释行之一中仔细查看了与此类似的代码。

抱歉，如果不是这样，至少与我的用例相比，您采用了一种看起来相当复杂的方法。您可能可以将所有代码包装到 Acl Plugin Predispatch 方法中，这可能会排除很多可能的问题。

# c++ - 删除包含重复项的动态指针数组

> ID：10245876
> 
> 赞同：1
> 
> 时间：2012-04-20T12:02:58.737
> 
> 标签：c++, arrays, duplicates, delete-operator

在这里释放内存的正确方法是什么？指针数组包含重复项！

```
class HashTable
{
   Bucket<E>** index = new Bucket<E>*[indexSize];
   ...
}

~ExtHash( ) 
{
  for (size_t i = 0; i < indexSize; ++i) 
     delete index[i];

   delete[] index;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:11:32.450

我会认真考虑您是否希望该容器负责删除对象；将它们存储在其他地方会更简单，只使用这个容器来引用它们，而不是管理它们的生命周期。

或者，您可以使用`std::shared_ptr`来管理对象；那么当您丢弃所有它们时，它们将被自动删除。

如果您真的想这样做，则需要在删除每个重复项后删除重复项；就像是

```
for (size_t i = 0; i < indexSize; ++i) {
    Bucket<E> * victim = index[i];
    indexSize = std::remove(index+i+1, index+indexSize, victim) - index;
    delete victim;
} 
```

[注意：此代码很可能是错误的；我在写它时确实犯了几个错误。如果您真的想以艰难的方式管理动态对象，那么您需要彻底测试它]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:10:28.853

排序`index`，删除相邻的重复项`std::unique`。O(N log N) 和它一样好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T12:07:53.687

在您的情况下，以这种方式存储原始指针是危险的。更好地使用 std::shared_ptr 并重置共享指针。并且在所有指针都将被重置之后，它们将被安全地释放。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T12:09:35.220

或许是这样的：

```
~ExtHash( ) 
{
  std::sort(index, index + indexSize);
  size_t new_end = std::unique(index, index + indexSize) - index;

  for (size_t i = 0; i < new_end; ++i) 
     delete index[i];

   delete[] index;
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T12:30:49.647

每次创建一个指针时，`push_back`它都会变成一个向量。该向量将保存您创建的所有指针，并且每个指针仅保存一次。

稍后，迭代该向量和`delete`指针。这就像编写自己的简单垃圾收集器一样。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-20T12:52:01.263

使用集合删除重复项：

```
std::set<Bucket*> uniqueBuckets(index, index + indexSize);

for(Bucket* bucket: uniqueBuckets)
    delete bucket; 
```

# database - i18n 数据库表按文化获取字段的值

> ID：10245877
> 
> 赞同：1
> 
> 时间：2012-04-20T12:03:00.317
> 
> 标签：database, internationalization, translation

我正在将我的申请国际化。假设我有一张这样的桌子：

`task_priority`：

```
id | description 
```

然后我创建一个名为`table_priority_i18n`：

```
id | culture | description 
```

其中 id 和culture 是主键，id 是id 的外键`task_priority`。

为了获得描述，我在表之间进行左连接

```
select tp.id, t.description 
from task_priority tp 
  left join task_priority_i18n t 
    on t.id = tp.id and t.culture = :culture. 
```

但我想更改我的查询，所以如果 i18n 表中没有翻译，它会返回基表中的值。

我知道我可以删除我只使用 i18n 表的那一列，但目前工作量太大。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:23:37.297

```
select tp.id, NVL( t.description, tp.description)
from task_priority tp 
  left outer join task_priority_i18n t 
    on t.id = tp.id 
    and t.culture = :culture 
```

# java - 构建多个共享库

> ID：10245881
> 
> 赞同：0
> 
> 时间：2012-04-20T12:03:07.130
> 
> 标签：java, java-native-interface

嗨，我有一个 java 程序，它必须调用一个本地程序，这个本地程序由两个 so 文件给出。所以我创建了我的 so 文件，以便使用这个本机程序 API 为我的 java 程序做一些事情。我试图将两个so文件与我创建的so文件合并为一个，然后运行我的java程序。但是，它似乎以这种方式失败了。更具体地说，这是我的例子。

我有一个 java 程序 A 必须调用一些本机代码。因此，我编写了一些本机代码并将其构建为共享库（称为：C.so）。

不幸的是，我编写的本机代码必须使用其他 so 文件中的其他代码。（A.so，B.so）

因此，任何想法如何用 A.so 和 B.so 编译我的 so 文件以使我的 java 程序工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:08:17.553

我假设以下内容：

*   当您链接 c.so 时，您将在命令行上列出 a.so 和 b.so。
*   当您在 c.so 上运行 ldd 时，您会看到 a.so 和 b.so。
*   运行时，设置 -Djava.library.path 以包括包含所有三个的目录。
*   运行时，不要设置 LD_LIBRARY_PATH 以包含包含所有三个的目录。

如果您将 LD_LIBRARY_PATH 环境变量设置为包含包含库的目录，您将获得所需的结果。

有关更多解释和替代方法，请参阅[https://github.com/bimargulies/jni-origin-testbed](https://github.com/bimargulies/jni-origin-testbed)。

# xsd - 在 BizTalk 表达式中使用 nillable 元素

> ID：10245884
> 
> 赞同：1
> 
> 时间：2012-04-20T12:03:15.350
> 
> 标签：xsd, biztalk

我在 xsd 模式中定义了 nillable 十进制元素，如下所示：

```
<xs:element name="myDecimalValue" nillable="true" type="xs:decimal" /> 
```

这是一个杰出的领域，我想检查它的表达式形状是否为零。我可以像这样使用 xpath() 函数：

```
xpath("string(//*[local-name()='myDecimalValue']/@*[local-name()='nil'])") == "true" 
```

但对于简单的空值检查来说，它看起来有点复杂。所以我想知道我是否遗漏了什么并且有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:28:25.157

您可以尝试使用决定形状而不是 xpath

你的决定形状会像这样询问 myDecimalValue 是否为空

```
 msgName.myDecimalValue != null here 
```

比你可以继续你的逻辑

如果您使用杰出的字段，则使用它对其他开发人员更具可读性

**编辑：**

你能试试
varString = System.Convert.ToString(msgName.myDecimalValue);

然后询问 varString 是否为空

我试过了，它编译得很好

希望它有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:15:50.663

我怀疑这无法实现。

具体来说，来自[http://support.microsoft.com/kb/942250](http://support.microsoft.com/kb/942250)

> 消息上下文中不允许具有空值的属性。因此，如果将空值写入消息上下文，则该值将被删除。

（这在与Promoted 和Distinguished 属性相关的文档部分中，所以我假设它适用于两者）。

因此，看起来您的 xpath 解决方案可能是所需的解决方案，因为该可分辨属性无论如何都不会出现在消息上下文中。

# ruby - Ruby On Rails 和 VIM

> ID：10245889
> 
> 赞同：1
> 
> 时间：2012-04-20T12:03:30.873
> 
> 标签：ruby, ruby-on-rails-3, vim

VIM 最好的 IDE 插件是什么？

我正在寻找一个 VIM 插件

*   易于使用和安装
*   支持自动完成
*   支持跳转到方法/类定义
*   不会更改我的 Rails 项目的文件（我在一个不是每个人都使用 VIM 的软件项目中合作）
*   应该与最新的 Rails 版本兼容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:11:25.947

**Rails.vim**是目前最好的

[https://github.com/tpope/vim-rails](https://github.com/tpope/vim-rails)

[http://www.vim.org/scripts/script.php?script_id=1567](http://www.vim.org/scripts/script.php?script_id=1567)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:18:25.683

vim 有一些自动完成的插件，但可能最直接的一个就是内置的“关键字完成”。它不知道任何特定的语言，但如果您使用，例如，`set complete=.,b,k`它将扫描当前文件 (.)、其他加载的文件 (b) 以及任何设置为字典的文件 (使用`set dictionary=/some/file`) 以查找匹配项。将这些内容添加到您的 .vimrc 中。要使用补全，输入几个字母并在 INSERT 模式下按 ctrl-p，你会得到一个候选人的弹出窗口。它不显眼且易于使用。有关`complete`尝试的更多信息`:help E535`。

WRT 到类/方法索引，有 taglist 插件：

[http://vim-taglist.sourceforge.net/feature.html](http://vim-taglist.sourceforge.net/feature.html)

它将索引包括 ruby​​ 在内的一堆语言（如果您同时使用 js 工作，那就太好了，等等）。大约需要 30 秒才能弄清楚。如果您不能使用鼠标切换窗口，那么在纯 ncurses 版本（即不是 gvim）中使用会稍微尴尬一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T15:36:30.367

这是有关如何将 VIM 用作 ror ide 的信息。

[http://biodegradablegeek.com/2007/12/using-vim-as-a-complete-ruby-on-rails-ide/](http://biodegradablegeek.com/2007/12/using-vim-as-a-complete-ruby-on-rails-ide/)

此外，以下插件可能很有用。

NERDTree
FuzzyFinder
snipMate

# java - JDB：带有 WITH 子句和两个主变量的 DB2-Query 不起作用

> ID：10245890
> 
> 赞同：0
> 
> 时间：2012-04-20T12:03:47.220
> 
> 标签：java, sql, jdbc, db2

我已经使用 WITH 子句优化了我的 DB2 查询。现在它很快，但不再在 JDBC 下工作。有人有想法吗？谢谢！

```
WITH tmp AS (SELECT ID_EINSENDUNG, BEURTEILUNG, VERSANDDAT_BVD, LASTUSER 
FROM BVDT.TEINSENDUNG_BVD WHERE VERSANDDAT_BVD = 
'2008-02-26' --HOST VARIABLE 1
) 
SELECT ID_EINSENDUNG, VERSANDDAT_BVD FROM tmp WHERE ID_EINSENDUNG > 
4100  --HOST VARIABLE 2 
```

> 错误消息：ERRORCODE=-4461，SQLSTATE=42815 SQLState：42815 错误代码：-4461

Java 代码：

```
public DBCursor searchViewLandwirtOhrmarke() throws Exception {

    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append("WITH tmp AS " +
            "(SELECT ID_EINSENDUNG, BEURTEILUNG, VERSANDDAT_BVD, LASTUSER FROM BVDT.TEINSENDUNG_BVD WHERE VERSANDDAT_BVD = ?) " +
            "SELECT ID_EINSENDUNG, VERSANDDAT_BVD FROM tmp WHERE ID_EINSENDUNG > ?");

    prepareStatement(stringBuilder.toString());

    ps.setDate(1, DateUtils.getSQLDate("26.02.2008"));  
    ps.setInt(2,new Integer(4100));

    executeCursorSelect();
    return this;
}   

public EinsendungBvd nextViewLandwirtOhrmarke() throws Exception {
    if (endFetch()) {
        return null;
    }
    EinsendungBvd result = new EinsendungBvd(dbConn);
    result.setId_einsendung(new Integer(rs.getInt(1)));
    if (rs.wasNull()) {
        result.setId_einsendung(null);
    }
    result.setVersanddat_bvd(rs.getDate(11));

    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:15:12.583

[**查看IBM Data Server Driver for JDBC and SQLJ 发布的**](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.apdv.java.doc/src/tpc/imjcc_rjvjcsqc.html)IBM DB2 LUW 9.7 版错误代码以获取错误代码`-4461`：

> -4461 text-from-getMessage 42815
> 
> 说明: 指定的值无效或超出范围。
> 
> 用户响应：调用 SQLException.getMessage 以检索有关问题的特定信息。

要尝试的事情：

1.  记录 的值`SQLException.getMessage()`。
2.  验证 和 的数据`VERSANDDAT_BVD`类型`ID_EINSENDUNG`。
3.  一次用一个参数测试查询；隔离哪个参数是违规者。
4.  验证`DateUtils.getSQLDate()`是否正确解析您的日期字符串；比较from和from`Date.getTime()`的结果。`Date``DateUtils.getSQLDate()``Date`[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)`.parse()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:18:55.200

对我来说，这似乎是一个日期格式问题。尝试将您的日期更改`ps.setDate(1, DateUtils.getSQLDate("26.02.2008"));`为`ps.setDate(1, DateUtils.getSQLDate("2008-02-26"));`. 我不知道 DateUtil 规范，所以这只是一个疯狂的猜测..（有关 SQLSTATE/ERRORCODES 的列表，请参见[此处）](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z9.doc.codes/src/tpc/db2z_sqlstatevalues.htm)

# javascript - 主干.js 从 JSON 渲染多个 livel ul-list

> ID：10245903
> 
> 赞同：0
> 
> 时间：2012-04-20T12:04:45.923
> 
> 标签：javascript, backbone.js

我正在从服务器获取对象集合。

```
[
 {"id":1,"name":"test1","parent_id":null},
 {"id":2,"name":"test2","parent_id":null},
 {"id":3,"name":"test3","parent_id":2},
 {"id":4,"name":"test4","parent_id":2}
] 
```

我想将 json 转换为 ul-list

```
<ul>
  <li>test1</li>
  <li>
    <ul>
      test2
      <li>test3</li>
      <li>test4</li>
    </ul>
  </li>
</ul> 
```

我该如何渲染它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:08:40.907

在用 fguillen 给的小提琴玩了 allot 之后。我终于解决了我的问题，反过来也解决了这里的主要问题。

我的个人任务是使用backbone.js创建 [引导选项卡。](http://twitter.github.com/bootstrap/javascript.html#tabs)

请在这里浏览这个小提琴：[嵌套无序列表](http://goo.gl/cgzY6)

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:25:30.373

@DanieleB 比我快:).. 但我仍然要公开我认为非常相似的方法：

```
var data = [
  {"id":1,"name":"test1","parent_id":null},
  {"id":2,"name":"test2","parent_id":null},
  {"id":3,"name":"test3","parent_id":2},
  {"id":4,"name":"test4","parent_id":2}
]

var NestedView = Backbone.View.extend({
  render: function(){
    this.$el.html( "<ul id='ul-null'></ul>" )
    this.collection.each( function( model ){ this.renderElement( model ) }, this )
  },

  renderElement: function( model ){
    var ul = this.getParentUl( model );
    this.appendElement( ul, model );
  },

  getParentUl: function( model ) {
    var ul = this.$el.find( "#ul-" + model.get( "parent_id" ) );
    if( ul.length == 0 ) {
      this.appendListInElement( model );
      ul = this.$el.find( "#ul-" + model.get( "parent_id" ) );
    }

    return ul;
  },

  appendListInElement: function( model ){
    var li = this.$el.find( "#li-" + model.get( "parent_id" ) );
    li.after( "<ul id='ul-" + model.get( "parent_id" ) + "'></ul>" );
  },

  appendElement: function( ul, model ){
    ul.append( "<li id='li-" + model.get( "id" ) + "'>" + model.get( "name" ) + "</li>" );
  }
});

var elements = new Backbone.Collection( data );
var nestedView = new NestedView({ el: "#wrapper", collection: elements });
nestedView.render();
​
​ 
```

[检查工作中的jsfiddle](http://jsfiddle.net/fguillen/7exR2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:02:14.113

如果您向我们解释您如何组织您的应用程序，我们可能会更好地回答您。

到目前为止，我能说的是最好的策略是一个一个地渲染模型。查看[todo 示例代码](http://documentcloud.github.com/backbone/examples/todos/todos.js)以更好地理解我在说什么。

我还假设您使用 jquery。

在该示例中，您在主应用程序中拥有一个适用于整个集合 (addAll) 的函数，以及另一个适用于单个模型的函数。

```
// Add all items in the **Todos** collection at once.
addAll: function() {
  MYCOLLECTION.each(this.addOne);
},

addOne: function(todo) {
  var view = new TodoView({model: MYMODEL});
  this.$("#list").append(view.render().el);
}, 
```

在这个框架中，你只需要在单个模型函数的视图中的 view.render() 中进行一些编码，就像这样

```
 el:$('ul .test0'),
  render: function() {
  if (!_.isNull(this.model.get('parent_id')) ){
      if($("." + this.model.get('parent_id')).length == 0) { 
        //the class doesn't exist because the <ul> hasn't been created yet
        //so create the <ul> tag
        $('#'+this.model.get('parent_id')).append("<ul class='"+this.model.get('id')+"'></ul>");
        }
      //now append the <li> element
      $('.'+this.model.get('parent_id')).append("<li id='"+this.model.get('id')+"'>"+this.model.get('name')+"</li>");
      }
  else{
        $(this.el).append("<li id='"+this.model.get('id')+"'>"+this.model.get('name')+"</li>");
        }
  this.$el.html(this.template(this.model.toJSON()));
  this.$el.toggleClass('done', this.model.get('done'));
  this.input = this.$('.edit');
  return this;
}, 
```

最后你会有一个这样的列表

```
 <ul class='1'>
   <li id='1'>test1</li>
   <li id='2'>test2</li>
   <ul class='2'>
     <li id='3'>test3</li>
     <li id='4'>test4</li>
   </ul>
 </ul> 
```

明白了吗？希望这可以帮助。

# scala - 在深度复制到地图值时避免使用镜头重复

> ID：10245904
> 
> 赞同：14
> 
> 时间：2012-04-20T12:04:54.230
> 
> 标签：scala, scalaz, lenses

我有一个不可变的数据结构，其中我在 Maps 中有嵌套值，如下所示：

```
case class TradingDay(syms: Map[String, SymDay] = Map.empty)
case class SymDay(sym: String, traders: Map[String, TraderSymDay] = Map.empty)
case class TraderSymDay(trader: String, sym: String, trades: List[Trade] = Nil) 
```

另外，我有一个当天所有交易的清单，我想生成`TradingDay`结构，其中

```
case class Trade(sym: String, trader: String, qty: Int) 
```

我试图通过折叠我的交易来弄清楚如何用镜头更新这个结构（见附录）：

```
(TradingDay() /: trades) { (trd, d) =>
  def sym = trd.sym
  def trader = trd.trader
  import TradingDay._
  import SymDay._
  import TraderSymDay._
  val mod =
    for {
      _ <- (Syms member sym).mods(
             _ orElse some(SymDay(sym)))
      _ <- (Syms at sym andThen Traders member trader).mods(
             _ orElse some(TraderSymDay(trader, sym)))
      _ <- (Syms at sym andThen (Traders at trader) andThen Trades).mods(
             trd :: _)
      x <- init
    } yield x
  mod ! d
} 
```

这行得通；但我想知道我是否可以减少重复性（在添加到地图然后修改地图键处的值方面。它似乎并不比相关的深层副本更烦人。

**附录 - 镜片**

```
object TradingDay {
  val Syms = Lens[TradingDay, Map[String, SymDay]](_.syms, (d, s) => d.copy(syms = s))
}

object SymDay {
  val Traders = Lens[SymDay, Map[String, TraderSymDay]](_.traders, (d, t) => d.copy(traders = t))
}

object TraderSymDay  {
   val Trades = Lens[TraderSymDay, List[Trade]](_.trades, (d, f) => d.copy(trades = f))
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T14:44:40.803

和

```
type @>[A,B] = Lens[A, B] 
```

并保持这个镜头

```
val Syms : Lens[TradingDay, Map[String, SymDay]] 
```

并定义这些镜头：

```
val F : Map[String, SymDay] @> Option[SymDay] = ...
val G : Option[SymDay] @> Map[String, TraderSymDay] = ...
val H : Map[String, TraderSymDay] @> Option[TraderSymDay] = ...
val I : Option[TraderSymDay] @> List[Trade] = ...

val J: TradingDay @> List[Trade] = Syms >=> F >=> G >=> H >=> I 
```

你可以得到这个：

```
(trades /: TradingDay()){ (trd, d) => (J.map(trd :: _).flatMap(_ => init)) ! d } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:01:45.543

***Jordan West*** ( [@_jrwest](https://twitter.com/#!/_jrwest) )*提供的答案*

这只是一个微小的变化，涉及引入以下转换：

```
implicit def myMapLens[S,K,V] = MyMapLens[S,K,V](_)
case class MyMapLens[S,K,V](lens: Lens[S,Map[K,V]]) {
  def putIfAbsent(k: K, v: => V) 
    = lens.mods(m => m get k map (_ => m) getOrElse (m + (k -> v)))
} 
```

然后我们可以这样使用它：

```
(TradingDay() /: trades) { (d, trade) =>
  def sym = trade.sym
  def trader = trade.trader
  def traders = Syms at sym andThen Traders
  def trades = Syms at sym andThen (Traders at trader) andThen Trades
  val upd =
    for {
      _ <- Syms putIfAbsent (sym, SymDay(sym))
      _ <- traders putIfAbsent (trader, TraderSymDay(trader, sym))
      _ <- trades.mods(trade :: _)
    } yield ()
  upd ~> d
} 
```

# objective-c - 在 Objective-c 中绘图

> ID：10245907
> 
> 赞同：0
> 
> 时间：2012-04-20T12:05:10.157
> 
> 标签：objective-c, core-graphics

这是我第一次绘图，所以它一定是很愚蠢的东西，但是我的 drawRect: 方法不起作用......这是我的代码：

```
- (void)drawRect:(CGRect)rect {
    CGPoint center = CGPointMake(self.bounds.origin.x + self.bounds.size.width / 2, self.bounds.origin.y + self.bounds.size.height / 2);self.bounds.origin.y + self.bounds.size.height / 2)
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [[UIColor redColor] setStroke];
    CGFloat radius = (self.bounds.size.width > self.bounds.size.height) ? self.bounds.size.width - 30 : self.bounds.size.height - 30;
    CGContextBeginPath(ctx);
    CGContextAddArc(ctx, center.x, center.y, radius, 0, 2 * M_PI, YES);
    CGContextStrokePath(ctx);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:23:03.257

弧的半径是从其中心测量的。您正在使用几乎整个视图的宽度/高度，以便将弧线绘制在可见区域之外。使用较小的半径，你会看到你的弧线。

顺便说一句，如果你只想画一个圆（角度为 2π 的圆弧也是一样的），`CGContextAddEllipseInRect`使用起来会更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:25:00.427

您正在视图外绘制圆圈。`CGContextAddArc`以半径为参数。在您的情况下，您正在给出方法直径。快速解决：

```
radius/=2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:31:17.387

你的例子很有效。它实际上是在绘制，但是您看不到圆，因为半径变量可能会获得一个很大的值，从而使圆在视图边界之外被绘制。只需将手动半径值替换为一个值，例如 20，您就会发现它工作正常。

问候

# android - 将 iPhone 代码转换为 Android

> ID：10245908
> 
> 赞同：0
> 
> 时间：2012-04-20T12:05:17.250
> 
> 标签：android, iphone, user-agent

我在 Android 上提出了一个问题，但没有得到任何答案，但我在 iPhone 平台上发现了一个类似的问题，但我不知道如何将其转换为 Java 代码。请精通这两种语言的任何人都可以尝试一下。

```
NSString* userAgent = @"Mozilla/5.0";

NSURL *url = [NSURL URLWithString:[@"http://www.translate.google.com/translate_tts?tl=el&q=Καλημέρα" 
                        stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

NSMutableURLRequest* request = [[[NSMutableURLRequest alloc] initWithURL:url] autorelease];

[request setValue:userAgent forHTTPHeaderField:@"User-Agent"];

NSURLResponse* response = nil;
NSError* error = nil;
NSData* data = [NSURLConnection sendSynchronousRequest:request
                                 returningResponse:&response
                                             error:&error];

[data writeToFile:@"/var/tmp/tts.mp3" atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:24:52.273

好的，我想通了，（据我所知）

他正在尝试从网络下载文件并将其保存到 i-phone 的本地存储中，

在android中试试这段代码，

```
try {
        URL url = new URL("http://www.translate.google.com/translate_tts?tl=el&q=Καλημέρα");
        URLConnection connection = url.openConnection();
        connection.connect();
        // this will be useful so that you can show a typical 0-100% progress bar
        int fileLength = connection.getContentLength();

        // download the file
        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream("/sdcard/tts.mp3");

        byte data[] = new byte[1024];
       int count;
        while ((count = input.read(data)) != -1) {
            output.write(data, 0, count);
        }
       output.flush();
        output.close();
        input.close();
    } catch (Exception e) {
    } 
```

还要在您的 Android Manifest.xml 文件中提及 Use-Permission，例如，

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

现在，这会将您下载的 mp3 文件存储在外部存储中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:16:05.403

```
HttpClient httpclient = new DefaultHttpClient();

HttpGet httpget = new HttpGet("http://www.translate.google.com/translate_tts?tl=el&q=Καλημέρα");

HttpResponse response = httpclient.execute(httpget); 
```

然后从响应中获取文件？抱歉，我的 atm 没有 IDE。

也许是这样的？

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = builder.parse(response.getEntity().getContent()); 
```

我不知道如何解析 mp3 文件？

怎么样的东西

```
InputStream is = response.getEnitity().getContent();
BufferedInputStream bis = new BufferedInputStream(is);
ByteArrayBuffer baf = new ByteArrayBuffer(50);
int current = 0;
while ((current = bis.read()) != -1) {
   baf.append((byte) current);
}

FileOutputStream fos = new FileOutputStream(file);
fos.write(baf.toByteArray());
fos.close(); 
```

# mysql - Mysql更新所有具有值的列说'ram'

> ID：10245909
> 
> 赞同：-3
> 
> 时间：2012-04-20T12:05:25.503
> 
> 标签：mysql, sql

我在表中有很多列，需要根据某些值进行检查，如果找到匹配项，则需要替换值..

所以基本上我正在寻找一个查询，它将列名作为变量排序并遍历表并更新列值（如果匹配）..

我可以用 php 做到这一点，查询与列一样多..但这就是我不想要的..

ps 我知道这是一个糟糕的设计，在正常情况下不会出现这样的要求，但遗憾的是它就是这样......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T12:16:02.860

在许多声明中：

```
UPDATE tableX 
SET   col_1 = 'newvalue' 
WHERE col_1 = 'ram';

UPDATE tableX 
SET   col_2 = 'newvalue' 
WHERE col_2 = 'ram';

...

UPDATE tableX 
SET   col_N = 'newvalue' 
WHERE col_N = 'ram'; 
```

* * *

在一份声明中

```
UPDATE tableX 
SET   col_1 = CASE WHEN col_1 = 'ram'
                     THEN 'newvalue' 
                     ELSE col_1 
              END
    , col_2 = CASE WHEN col_2 = 'ram'
                     THEN 'newvalue' 
                     ELSE col_2 
              END
    ...

    , col_N = CASE WHEN col_N = 'ram'
                     THEN 'newvalue' 
                     ELSE col_N 
              END
 ; 
```

* * *

您可以手动或使用动态 SQL 编写语句（如果要工作的列和表太多）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:30:45.890

这是另一个错误的问题，字面的回答是没有用的。

如果您需要这样的循环，那么您的数据库设置肯定是错误的。

一列必须包含不同的值，而不是在其他列之间共享。

如果您尝试实现某种一对多关系，则必须将这些双列移动到单独表中的列中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T12:08:09.760

```
UPDATE tablename SET columnname = 'newvalue' WHERE columnname = 'currentvalue'; 
```

**更新**

这个 PHP 脚本将遍历每个列名并将查询应用到它

```
<?php
$result = mysql_query("SHOW COLUMNS FROM tablename ");
while ($row = mysql_fetch_assoc($result)) {
    mysql_query("UPDATE tablename SET ".$row['field']." = 'newvalue' WHERE ".$row['field']." = 'currentvalue'");
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T12:23:26.327

在 php 中创建它，我将创建列数组，值对 form `column=value`，一个用于旧值，一个用于新值，然后分解这个数组，这样查询看起来像

```
"UPDATE table SET ".explode(',', $newvalues)." WHERE ".explode(' AND ', $oldarray) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T12:16:10.443

[http://dev.mysql.com/doc/refman/5.5/en/show-table-status.html](http://dev.mysql.com/doc/refman/5.5/en/show-table-status.html)

您可以使用该 SHOW TABLE STATUS ... 命令在 php 中获取表结构，然后从结果中构建一个更新命令，该命令使用匹配的数据更新每一列以进行更改。

它可以通过使用 SHOW TABLE STATUS LIKE ... 或 SHOW TABLE STATUS WHERE name = ... 来获取您想要的表

# iphone - 如何转到“/var/mobile/Applications/some value/Documents”文件夹 iPhone

> ID：10245912
> 
> 赞同：0
> 
> 时间：2012-04-20T12:05:43.247
> 
> 标签：iphone, xcode

我想在我的 iphone 设备的路径“/var/mobile/Applications/somevalue/Documents”中检查我保存的文件。

谁能告诉我怎么才能走那条路...

我需要测试这个路径，看看我的文件是否保存在路径中，我无法通过 iPhone 模拟器检查，因为我使用的是 MPMusicPlayer，所以我无法使用模拟器播放和保存歌曲

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:16:05.313

尝试

```
 NSArray *files = [fileManager contentsOfDirectoryAtPath:YOURPATH error:&error];
 if (files == nil) {
     // error...
 }

 for (NSString *file in files) {
    //HANDLE FILE HERE IN YOUR CASE CHECK NAME
 } 
```

# c# - 如何通过 C# async/await 为同步程序添加并发性

> ID：10245916
> 
> 赞同：2
> 
> 时间：2012-04-20T12:05:54.550
> 
> 标签：c#, multithreading, asynchronous, concurrency, async-await

我想学习如何在一些同步程序中添加并发，并以斐波那契算法为例。我写了这些代码，但我发现它根本没有任何并发​​性。所有代码都在单个线程中运行，直到完成。谁能向我解释为什么它不反映异步？

```
 async static Task<int> Fibonacci(int n)
    {
        if (n == 0) { return 0; }
        else if (n == 1) { return 1; }
        else
        {
            var t1 = Fibonacci(n - 1);
            var t2 = Fibonacci(n - 2);
            return (await t1) + (await t2);
        }
    }

    static int Main(string[] args)
    {
        var fib = Fibonacci(25);
        fib.Wait();
        Console.WriteLine( fib.Result );
        Console.ReadKey();
        return 0;
    } 
```

在迈克尔的提示下，我尝试在异步函数中创建任务，它可以工作。但我注意到异步函数返回一个任务类型值，它与 Task.Run() 相同。这两个任务都会立即运行，但**t1**不会自动运行到新线程中。谁能告诉我，这两个任务有什么不同。我可以让异步函数自动运行到新线程吗？

```
 async static Task<string> Async1()
    {
        return DateTime.Now.ToString();
    }
    static void Main(string[] args)
    {
        Task<string> t1 = Async1();
        Task<string> t2 = Task.Run<string>(() => { return DateTime.Now.ToString(); });
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T12:10:07.710

首先，您正在为 .NET 4.5 的 async/await 模型使用实验性 CTP。在这样的环境中，你应该预料到事情会表现得笨拙。

其次，你知道你最后会无限期地睡觉吗？

第三，您的应用程序本质上是同步的。您创建一个异步任务，然后立即等待它。async/await 模型不添加并发，只添加异步。它只是让您的应用程序在执行多项操作时具有响应性；它不会自动并行化。这就是为什么您的应用程序表现得好像它是同步的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:50:50.887

这种行为有两个原因。

首先，异步方法同步运行，直到它们必须评估等待语句。您在等待之前进行递归，因此所有递归都将在等待任何内容之前同步完成。

其次，如果等待的任务已经完成，那么它们的等待可能会同步运行。您的代码永远不会创建尚未完成的任务。它要么在一个任务中同步包装并返回 0 或 1，要么同步添加两个同步完成的任务并返回该结果。

您需要在某处引入非同步方面。例如：

```
async static Task<int> Fibonacci(int n)
{
    if (n == 0) { return 0; }
    else if (n == 1) { return 1; }
    else
    {
        // run one of the recursions concurrently
        var t1 = Task.Factory.StartNew(() => Fibonacci(n - 1));
        var t2 = Fibonacci(n - 2);
        return (await (await t1)) + (await t2);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:35:11.830

您根本没有在线程池上启动任务。await 默认情况下不引入并行性。

将其更改为：

```
 var t1 = Task.Factory.StartNew(() => Fibonacci(n - 1)).Unwrap();
        var t2 = Task.Factory.StartNew(() => Fibonacci(n - 2)).Unwrap(); 
```

这并不像它所能得到的那样有效，但它会让你开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-18T13:03:37.453

```
 private async Task<int> ComputeFibAsync(int n)
    {
        return await Task.Run(
            async () =>
            {
                if (n < 2)
                {
                    return 1;
                }
                else
                {
                    var result = await Task.WhenAll<int>(ComputeFibAsync(n - 1), ComputeFibAsync(n - 2));
                    return result[0] + result[1];
                }
            }
            );
    } 
```

# iphone - 是否有包含所有 iOS 设置本地化字符串的资源？

> ID：10245918
> 
> 赞同：0
> 
> 时间：2012-04-20T12:06:01.590
> 
> 标签：iphone, ios, ipad, localization

我的应用程序需要一些与设置应用程序中的相同的本地化字符串。我对谷歌并不幸运，但也许有人知道一个资源，它试图将所有语言的字符串放在一起进行复制和粘贴？

谈论设置的“国际”和“常规”等字符串。当 Apple 为我们做了艰苦的工作时，为什么要重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:19:08.500

您是否正在寻找[为本地化准备 Nib 文件](https://developer.apple.com/library/ios/#documentation/MacOSX/Conceptual/BPInternational/Articles/LocalizingInterfaces.html#//apple_ref/doc/uid/20002138-BBCBFFDF)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:24:08.497

苹果在提供翻译方面真的很糟糕。Microsoft 有一个完整的词汇表，您可以查找和搜索 ( [https://www.microsoft.com/Language/en-US/Search.aspx](https://www.microsoft.com/Language/en-US/Search.aspx) )，一般来说这很有帮助。但是，对于 iOS，您希望使用 Apple 为您的应用程序使用的相同翻译。例如，西班牙语中的“设置”始终是“Ajustes”——尽管许多其他操作系统使用“Configuraciones”。

我从来没有找到一个苹果词汇表，所以我们最终自己整理了一个。你可以在这里找到它：http: [//www.ibabbleon.com/glossary](http://www.ibabbleon.com/glossary)

# vb.net - VB.NET 中的异步 lambda 表达式

> ID：10245922
> 
> 赞同：2
> 
> 时间：2012-04-20T12:06:04.903
> 
> 标签：vb.net, lambda, async-await

像这样异步`Sub`：

```
Dim f As Func(Of Task) = Async Sub()
                         End Sub 
```

产生编译器错误：

> **错误 BC36670：**嵌套子没有与委托“System.Func(Of System.Threading.Tasks.Task)”兼容的签名。

等效的 C# 代码编译良好：

```
Func<Task> f = async () => { }; 
```

重写`Async Sub`为`Async Function`make 代码有效。

为什么`Async Sub()`不能转换为返回值为 type 的委托类型`Task`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:10:27.700

VB.NET`Sub`相当于 C# 返回`void`. `async void Foo() {}`和之间有区别`async Task Foo() {}`，您的 VB.NET 正在执行前者，而您想要后者。正如你所提到的，`Async Function`让它工作，因为它实际上是后者。

编辑：更多细节：

C＃：

```
async void Foo() { }

async Task Bar() { }

void Baz()
{
    object dummy;
    dummy = (Action) Foo; // OK
    dummy = (Func<Task>) Foo; // error
    dummy = (Action) Bar; // error
    dummy = (Func<Task>) Bar; // OK
} 
```

但是，当使用委托时，这会变得更加混乱，因为 和 的委托等价物`Foo`看起来`Bar`是一样的`async () => { }`：

唯一的区别是在 VB.NET 中，委托看起来不一样，因为`Sub`or`Function`关键字仍然是那里的语法的一部分。

# java - 尝试在 Eclipse 中安装 ADT 时出现大量错误消息

> ID：10245923
> 
> 赞同：0
> 
> 时间：2012-04-20T12:06:06.673
> 
> 标签：java, android, eclipse, adt

我正在尝试在运行 Mac OS X Lion 的 64 位 Mac 上使用 Eclipse 设置 Android 开发环境，但没有成功。

我已经从[http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/heliossr1下载了最新版本的 Eclipse](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/heliossr1)

当我转到帮助 >> 安装新软件时，我可以选择添加[http://dl-ssl.google.com/android/eclipse](http://dl-ssl.google.com/android/eclipse)存储库，该存储库会显示可用的 ADT 下载。但是，在尝试安装时，我会收到这些对我来说毫无意义的错误消息。

```
 Your original request has been modified.
    "Android Development Tools" will be ignored because it is already installed.
    Cannot complete the install because of a conflicting dependency.
    Software being installed: Android Traceview 18.0.0.v201203301601-306762(com.android.ide.eclipse.traceview.feature.group 18.0.0.v201203301601-306762)
    Software currently installed: Eclipse IDE for Java EE Developers 1.3.1.20100916-1202 (epp.package.jee 1.3.1.20100916-1202)
  Only one of the following can be installed at once: 
    Eclipse UI 3.6.1.M20100826-1330 (org.eclipse.ui 3.6.1.M20100826-1330)
    Eclipse UI 3.6.2.M20110203-1100 (org.eclipse.ui 3.6.2.M20110203-1100)
    Eclipse UI 3.6.0.I20100603-1100 (org.eclipse.ui 3.6.0.I20100603-1100)
  Cannot satisfy dependency:
    From: Android Traceview 18.0.0.v201203301601-306762 (com.android.ide.eclipse.traceview.feature.group 18.0.0.v201203301601-306762)
    To: org.eclipse.ui 3.6.2
  Cannot satisfy dependency:
    From: Eclipse IDE for Java EE Developers 1.3.1.20100916-1202 (epp.package.jee 1.3.1.20100916-1202)
    To: org.eclipse.epp.package.jee.feature.feature.group [1.3.1.20100916-1202]
  Cannot satisfy dependency:
    From: Java EE IDE Feature 1.3.1.20100916-1202 (org.eclipse.epp.package.jee.feature.feature.group 1.3.1.20100916-1202)
    To: org.eclipse.platform.feature.group [3.6.1.r361_v20100909-9gF78GrkFqw7GrsZnvz0JWNTeb6fue6896L]
  Cannot satisfy dependency:
    From: Eclipse Platform 3.6.1.r361_v20100909-9gF78GrkFqw7GrsZnvz0JWNTeb6fue6896L (org.eclipse.platform.feature.group 3.6.1.r361_v20100909-9gF78GrkFqw7GrsZnvz0JWNTeb6fue6896L)
    To: org.eclipse.rcp.feature.group [3.6.1.r361_v20100827-9OArFLdFjY-ThSQXmKvKz0_T]
  Cannot satisfy dependency:
    From: Eclipse RCP 3.6.1.r361_v20100827-9OArFLdFjY-ThSQXmKvKz0_T (org.eclipse.rcp.feature.group 3.6.1.r361_v20100827-9OArFLdFjY-ThSQXmKvKz0_T)
    To: org.eclipse.ui [3.6.1.M20100826-1330] 
```

我还尝试下载 ADT-18.0.0.zip 文件并将其添加为存档，这会产生相同的结果。

有人对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:51:50.473

我也有同样的问题。我有最新的 Eclipse，但是当我尝试更新 ADT 时遇到同样的错误。不过，我有一个解决方法。我通过更新除 TraceView 之外的所有内容解决了这个问题。为此，我单击 Eclipse/About Eclipse 并单击底部的“安装详细信息”按钮。然后我一一选择了Android组件，点击更新。除了 TraceView，其他一切都更新得很好。

顺便说一句，如果您是第一次尝试安装 ADT，请查看是否可以禁用 TraceView 并继续。

祝你好运

# ios - iOS：如何从功能“isEqual”的钥匙串中获取用户名/密码？

> ID：10245924
> 
> 赞同：0
> 
> 时间：2012-04-20T12:06:15.760
> 
> 标签：ios, keychain, autologin

我想在用户登录时自动登录用户。凭据保存在钥匙串中，但现在我必须比较它们..

我怎样才能把它们拿出来进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:09:22.340

看看Apple 制作的[GenericKeychain类。](https://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html)这显示了如何安全地访问钥匙串。

**编辑**

看看这篇博文：[简单的 iPhone 钥匙串访问](http://useyourloaf.com/blog/2010/3/29/simple-iphone-keychain-access.html)。

# java - 如何在 WebStart 进程中使用 JMX RMI 代理？

> ID：10245925
> 
> 赞同：3
> 
> 时间：2012-04-20T12:06:16.277
> 
> 标签：java, jmx, jnlp, java-web-start

我正在尝试为通过 WebStart 的应用程序启动器实现基于 JMX 的 RMI 连接器的监视控制。

从命令行或 IDE 启动应用程序时，无论我如何启动它们，连接器都能正常工作。但是，当我通过使用 javaws 调用 JNLP 文件启动它时尝试检查它时，一切都变了。

我尝试了几种方法：

*   使用内置的 JMX 功能，通过在 JAVAWS_VM_ARGS 中指定以下变量（文档说它应该在 1.6 中工作，但人们报告它没有；如果我检查，它们似乎在结果过程中根本没有设置它使用附加 API）：

    ```
    -Dcom.sun.management.jmxremote
    -Dcom.sun.management.jmxremote.local.only=true
    -Dcom.sun.management.jmxremote.port=SOME_PORT_HERE
    -Dcom.sun.management.jmxremote.authenticate=false
    -Dcom.sun.management.jmxremote.ssl=false 
    ```

*   使用内置的 JMX 功能，通过在 JNLP 文件中指定以下变量（有人说这不应该工作，实际上当我使用 Attach API 检查时它们似乎没有设置；JNLP 设置为所有- 权限）：

    ```
    <property name="com.sun.management.jmxremote.local.only" value="true" />
    <property name="com.sun.management.jmxremote.port" value="SOME_PORT_HERE" />
    <property name="com.sun.management.jmxremote.authenticate" value="false" />
    <property name="com.sun.management.jmxremote.ssl" value="false" /> 
    ```

*   使用内置的 JMX 功能，通过使用 -J 选项向调用`javaws`程序指定以下变量（如果我使用 Attach API 检查它，它们似乎根本没有在结果过程中设置）：

    ```
    -J-Dcom.sun.management.jmxremote
    -J-Dcom.sun.management.jmxremote.local.only=true
    -J-Dcom.sun.management.jmxremote.port=SOME_PORT_HERE
    -J-Dcom.sun.management.jmxremote.authenticate=false
    -J-Dcom.sun.management.jmxremote.ssl=false 
    ```

*   使用带有以下代码的自定义 JMXConnectorServer （连接仍然像以前的尝试一样被拒绝，“连接失败。重试？连接不成功。”）：

    ```
     try {
            final MBeanServer  mbs     = ManagementFactory.getPlatformMBeanServer();
            final String       jmxPort = System.getProperty("jmx.port");

            if (jmxPort != null) {
                final int port = Integer.parseInt(jmxPort);

                System.out.println("settings JMX properties");
                System.setProperty("java.rmi.server.randomIDs", "true");
                Map<String, String> env = new HashMap<String, String>();
                env.put("com.sun.management.jmxremote.ssl", "false");
                env.put("com.sun.management.jmxremote.authenticate", "false");
                env.put("com.sun.management.jmxremote.local.only", "true");
                System.out.println("Creating Locate Registry");
                LocateRegistry.createRegistry(port);
                System.out.println("Creating JMX Service URL");
                JMXServiceURL url = new JMXServiceURL("service:jmx:rmi:///jndi/rmi://localhost:" + port + "/server");
                System.out.println("Creating new JMX Connector Server");
                JMXConnectorServer cs = JMXConnectorServerFactory.newJMXConnectorServer(url, env, mbs);
                cs.start();
            }
        } catch (final RemoteException e) {
            e.printStackTrace();
        } catch (final MalformedURLException e) {
            e.printStackTrace();
        } catch (final IOException e) {
            e.printStackTrace();
        } 
    ```

我尝试使用此 JMXServiceURL 与 JConsole 连接（最终，这将通过另一个程序完成，但我尝试从 JConsole 验证 JMX 服务是否正常运行）：

```
 service:jmx:rmi:///jndi/rmi://localhost:SOME_PORT_HERE/jmxrmi 
```

有谁知道如何以编程方式或如何将这些属性传递给 WebStart-ed 进程来执行此操作？

提前致谢。

## 补充说明

*   这适用于 Java 1.6+（不是 1.5）。
*   当我直接调用我的程序并通过命令行传递它们时，这些选项**确实有效。**
*   有些人提到直接指定 IP，使用 java.rmi.server.hostname=YOUR_IP。但是，当进程正常启动时，这似乎不需要，所以我认为它与 WebStart 场景无关。
*   我可以使用与 Attach API 的连接通过 PID 与 JConsole 或 JVisualVM 连接到进程，但最终产品不能依赖于此，因为它需要 JDK 或捆绑 tools.jar，我不认为有是开放的替代品。如果有，那实际上会容易得多，所以如果你知道，请告诉我。

* * *

**更新：**

实际上，当使用我最后一个带有显式的示例时`JMXConnectorServer`，我在 WebStart 进程的启动时得到一个 NPE，其中：

```
12:39:28,743 WARN  [App] [trce] java.lang.NullPointerException
 at org.jboss.security.jndi.LoginInitialContextFactory.getInitialContext(LoginInitialContextFactory.java:81)
 at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:667)
 at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
 at javax.naming.InitialContext.init(InitialContext.java:223)
 at javax.naming.InitialContext.<init>(InitialContext.java:197)
 at javax.management.remote.rmi.RMIConnectorServer.bind(RMIConnectorServer.java:619)
 at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServer.java:412)
 // line invoking .start() on the JMXConnectorServer's instance 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:46:19.473

尝试从 Windows 上的命令行设置以下参数

设置 JAVAWS_VM_ARGS=-Dcom.sun.management.jmxremote.port=9400 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false

然后从同一命令提示符启动 jnlp 文件。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:26:17.293

正如问题评论中与[jtahlborn](https://stackoverflow.com/users/552759/jtahlborn)所讨论的那样，我们发现这确实特定于应用程序的设置。

要使 JMX 为 WebStart-ed 应用程序工作，需要解决一些缺陷，并且对使用多个 JNDI 上下文工厂也有一些影响。

在这种特殊情况下，应用程序`jndi.properties`在启动时读取并填充配置设置，因此 JBoss JNDI 上下文工厂甚至已经在 WebStart-ed 应用程序的入口点/主类的静态块的调用点。

由于这些 JNDI 属性对于程序的其余部分是必需的，因此解决方案只是在以`JMXServerConnector`编程方式创建时覆盖这些属性。

这是一个例子：

```
 @SuppressWarnings("serial")
    private static Properties   initProperties() {
        return (new Properties() {{
            // overrides for the JNDI factory
            // mostly changing the INITIAL_CONTEXT_FACTORY from:
            //   "org.jboss.security.jndi.JndiLoginInitialContextFactory"
            // to:
            put(Context.INITIAL_CONTEXT_FACTORY,
                "org.jnp.interfaces.NamingContextFactory");
            put(Context.PROVIDER_URL, "jnp://localhost/");

            // Required JMX properties and other things ...
            //  YMMV of course, these were for my current settings
            put("java.rmi.server.randomIDs", "true");
            put("java.rmi.server.hostname", host); // host needs to be an IP
            put("com.sun.management.jmxremote.ssl", "false");
            put("com.sun.management.jmxremote.authenticate", "false");
            put("com.sun.management.jmxremote.local.only", "true");
            put("com.sun.management.jmxremote.port", String.valueOf(port));
        }});
    } 
```

和：

```
 // error handling left out for clarity
    private static void startJMXAgent() throws TheWorld {
        Registry           reg  = LocateRegistry.createRegistry(port);
        JMXConnectorServer cs   =
            JMXConnectorServerFactory.newJMXConnectorServer(
                new JMXServiceURL(
                    "service:jmx:rmi://" + host + ":" + port + "/" +
                    "jndi/rmi://" + host + ":" + port + "/" +
                    servicename
                ),
                initProperties(),
                ManagementFactory.getPlatformMBeanServer()
            );
        cs.start();
    } 
```

* * *

*注意：*我假设您可能会以相反的方式执行此操作，并在命令行或 JNLP 文件中覆盖这些属性，然后将它们重置为以后上下文所需的任何内容。但是，这不适合这里的用例，所以我没有真正研究它。

# javascript - 重置复选框字段客户端

> ID：10245927
> 
> 赞同：0
> 
> 时间：2012-04-20T12:06:18.097
> 
> 标签：javascript, asp.net

我在网页上有一个复选框控件和一个重置按钮。我希望在按下休息按钮时取消选中复选框。这应该是一个客户端进程。

我怎样才能实现它？可以通过使用 document.getelementbyID() 来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:10:56.873

可以尝试以下方法。

```
$get("<%=checkbox.ClientID%>").checked = false; 
```

或者为了更容易理解，因为您可以使用`$get`只是参考`document.getElementById`

```
var checkbox = document.getElementById(<%=checkbox.ClientID%>),
    button = document.getElementById(<%=button.ClientID%>);

button.onclick = function(){
    checkbox.checked = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:11:35.647

使用纯 javascript，您可以这样做

```
<input type="checkbox" id="chkYes" checked="checked"  /> Yes <br/>
<input type="button" id="btnReset" value="reset" onclick="UnSet();" /> 
```

脚本

```
function UnSet()
{ 
    document.getElementById("chkYes").checked=false;
} 
```

示例：http: [//jsfiddle.net/cF6pN/6/](http://jsfiddle.net/cF6pN/6/)

如果您已经在页面中使用 jQuery，您可以这样做

```
$(function(){
    $("#btnReset").click(function(){
       $("#chkYes").removeAttr('checked'); 
    });    
});​ 
```

假设你有这样的 HTML

```
<input type="checkbox" id="chkYes" checked="checked"/> Yes <br/>
<input type="button" id="btnReset" value="reset" />​ 
```

示例：http: [//jsfiddle.net/hNm6k/2/](http://jsfiddle.net/hNm6k/2/)

# php - 在 Firefox 和 Chrome 中保存和打开标签页

> ID：10245931
> 
> 赞同：0
> 
> 时间：2012-04-20T12:06:43.950
> 
> 标签：php, ajax, jquery, jquery-plugins

我想使用 jQuery 和 Ajax 等创建选项卡。我想在 Chrome 和 Firefox 中实现选项卡功能，从而在用户启动浏览器时再次打开用户会话中最后打开的选项卡。

当用户再次打开站点时，站点关闭时打开的所有选项卡都会再次打开。

我正在询问我如何做到这一点的想法。我使用 PHP 作为编程语言。我想在我的网站中创建类似的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:17:39.553

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

支持历史管理、持久 cookie、ajax 填充等等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:33:29.767

对于历史管理，我建议查看[History.js](https://github.com/balupton/History.js/)

对于持久性 cookie，您还需要 cookie 插件：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

# blackberry - 在黑莓的 sd 卡中录制和保存音频文件

> ID：10245932
> 
> 赞同：0
> 
> 时间：2012-04-20T12:06:51.157
> 
> 标签：blackberry

我的代码如下 - 我尝试了黑莓网站的文档。它没有创建音频文件。如何解决这个问题呢 ？。提前致谢。

```
import net.rim.device.api.ui.*;
import net.rim.device.api.ui.container.*;
import net.rim.device.api.ui.component.*;
import java.lang.*;

import javax.microedition.io.Connector;
import javax.microedition.io.file.FileConnection;
import javax.microedition.media.*;
import javax.microedition.media.Manager;

import java.io.*;
import javax.microedition.media.control.*;

public class AudioRecording extends UiApplication
{
public static void main(String[] args)
{
     AudioRecording app = new AudioRecording();
     app.enterEventDispatcher();
}

public AudioRecording()
{
     pushScreen(new AudioRecordingDemoScreen());
}

private class AudioRecordingDemoScreen extends MainScreen  
{   
    private AudioRecorderThread _recorderThread;
    ByteArrayOutputStream  bt;
    DataOutputStream  ot;
    public AudioRecordingDemoScreen()
    {
        //setTitle("Audio recording demo");

        addMenuItem(new StartRecording());
        addMenuItem(new StopRecording());
    }

    private class StartRecording extends MenuItem 
    {
        public StartRecording() 
        {
            super("Start recording", 0, 100);
        }

        public void run() 
        {
            try 
            {
                AudioRecorderThread newRecorderThread = new AudioRecorderThread();
                newRecorderThread.start();
                _recorderThread = newRecorderThread;
            }  
            catch (Exception e) 
            {
                Dialog.alert(e.toString());
            }
        }
    }

    private class StopRecording extends MenuItem 
    {
        public StopRecording() 
        {
            super("Stop recording", 0, 100);
        }

        public void run() 
        {
            try 
            {
                if (_recorderThread != null) 
                { 
                    _recorderThread.stop();
                }
            } 
            catch (Exception e) 
            {
                Dialog.alert(e.toString());
            }
        }
    }

    private class AudioRecorderThread extends Thread implements javax.microedition.media.PlayerListener
    {
        private Player _player;
        private RecordControl _recordControl;

        AudioRecorderThread()
        {
        }

        public void run() 
        {
            try 
            {
                _player = javax.microedition.media.Manager.createPlayer("capture://audio?encoding=amr");

                _player.addPlayerListener(this);

                _player.realize();
                _recordControl = (RecordControl) _player.getControl( "RecordControl" );

                FileConnection  fc = (FileConnection)Connector.open("file:///Device Memory/home/user/music/recordingFile.amr", Connector.READ_WRITE );
                if(!fc.exists()){
                    fc.create();
                }
                 ot = fc.openDataOutputStream();
                _recordControl.setRecordStream(ot);

                _recordControl.startRecord(); 
                _player.start();

            }
            catch( IOException e ) 
            {
                Dialog.alert(e.toString());
            }
            catch( MediaException e ) 
            {
                Dialog.alert(e.toString());
            }
        }
        public void stop() 
        {
        /*    if (_player != null) 
            {
                 _player.close();
                 _player = null;
            }

            if (_recordControl != null) 
            {
                _recordControl.stopRecord();*/

                try 
                {

                    _recordControl.commit();

                } 
                catch (Exception e) 
                {
                    Dialog.alert(e.toString());
                }
               /* _recordControl = null;
            } */

        }

        public void playerUpdate(Player player, String event, Object eventData) 
        {
            Dialog.alert("Player " + player.hashCode() + " got event " + event + ": " + eventData);
        }
    }
}
} 
```

它没有创建文件。如何解决这个问题呢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:08:36.727

试试下面的代码 -

```
import net.rim.device.api.ui.*;
import net.rim.device.api.ui.container.*;
import net.rim.device.api.ui.component.*;
import java.lang.*;

import javax.microedition.io.Connector;
import javax.microedition.io.file.FileConnection;
import javax.microedition.media.*;
import javax.microedition.media.Manager;

import java.io.*;
import javax.microedition.media.control.*;

public class AudioRecording extends UiApplication
{
public static void main(String[] args)
{
     AudioRecording app = new AudioRecording();
     app.enterEventDispatcher();
}

public AudioRecording()
{
     pushScreen(new AudioRecordingDemoScreen());
}

private class AudioRecordingDemoScreen extends MainScreen  
{   
    private AudioRecorderThread _recorderThread;
    ByteArrayOutputStream  bt;
    DataOutputStream  ot;
    public AudioRecordingDemoScreen()
    {
        //setTitle("Audio recording demo");

        addMenuItem(new StartRecording());
        addMenuItem(new StopRecording());
    }

    private class StartRecording extends MenuItem 
    {
        public StartRecording() 
        {
            super("Start recording", 0, 100);
        }

        public void run() 
        {
            try 
            {
                AudioRecorderThread newRecorderThread = new AudioRecorderThread();
                newRecorderThread.start();
                _recorderThread = newRecorderThread;
            }  
            catch (Exception e) 
            {
                Dialog.alert(e.toString());
            }
        }
    }

    private class StopRecording extends MenuItem 
    {
        public StopRecording() 
        {
            super("Stop recording", 0, 100);
        }

        public void run() 
        {
            try 
            {
                if (_recorderThread != null) 
                { 
                    _recorderThread.stop();
                }
            } 
            catch (Exception e) 
            {
                Dialog.alert(e.toString());
            }
        }
    }

    private class AudioRecorderThread extends Thread implements javax.microedition.media.PlayerListener
    {
         private Player _player;
           private RecordControl _rcontrol;
           private ByteArrayOutputStream _output;
           private byte _data[];

           AudioRecorderThread() {}

           private int getSize()
           {
               return (_output != null ? _output.size() : 0);
           }

           private byte[] getVoiceNote()
           {
              return _data;
           }

           public void run() {
              try {
                  // Create a Player that captures live audio.
                  _player = Manager.createPlayer("capture://audio");
                  _player.realize();

                  // Get the RecordControl, set the record stream,
                  _rcontrol = (RecordControl)_player.getControl("RecordControl");

                  //Create a ByteArrayOutputStream to capture the audio stream.
                  _output = new ByteArrayOutputStream();
                  _rcontrol.setRecordStream(_output);
                  _rcontrol.startRecord();
                  _player.start();

              } catch (final Exception e) {
                 UiApplication.getUiApplication().invokeAndWait(new Runnable() {
                    public void run() {
                       Dialog.inform(e.toString());
                    }
                 });
              }
           }

           public void stop() {
              try {
                   //Stop recording, capture data from the OutputStream,
                   //close the OutputStream and player.
                   _rcontrol.commit();
                   _data = _output.toByteArray();

                   saveRecordedFile(_data);

                   _output.close();
                   _player.close();

              } catch (Exception e) {
                 synchronized (UiApplication.getEventLock()) {
                    Dialog.inform(e.toString());
                 }
              }
           }

           public void playerUpdate(Player player, String event, Object eventData) 
           {
               Dialog.alert("Player " + player.hashCode() + " got event " + event + ": " + eventData);
           }
        }
}

public static boolean saveRecordedFile(byte[] data) {
    try {
        String filePath1 = System.getProperty("fileconn.dir.music");
        String fileName = "sample";
        boolean existed = true;
        for (int i = 0; i < Integer.MAX_VALUE; i++) {
            try {
                FileConnection fc = (FileConnection) Connector.open(filePath1 + fileName+ ".amr");
                if (!fc.exists()) {
                    existed = false;
                }
                fc.close();
            } catch (IOException e) {
                Dialog.alert("unable to save");
                return existed;
            }
            if (!existed) {
                fileName += i + ").amr";
                filePath1 += fileName;
                break;
            }
        }
        System.out.println(filePath1);
        System.out.println("");
        FileConnection fconn = (FileConnection) javax.microedition.io.Connector .open(filePath1, javax.microedition.io.Connector.READ_WRITE);
        if (fconn.exists())
            fconn.delete();
        fconn.create();

        OutputStream outputStream = fconn.openOutputStream();
        outputStream.write(data);
        outputStream.close();
        fconn.close();
        return true;
    } catch (Exception e) {
    }
    return false;
}

 } 
```

# c# - 如何通过C#中的函数为数组的指针参数分配内存

> ID：10245933
> 
> 赞同：2
> 
> 时间：2012-04-20T12:07:00.773
> 
> 标签：c#

如何在 C# 中向函数发送 ref 指针并将地址返回到分配的内存。以下代码无法编译：

```
class Test
{
    public byte [] byteArr_1 = new byte [1024];
    //public byte* P_byte;

    public unsafe void SetAddress(ref byte* p_b)
    {
        p_b = &byteArr_1[0];
    }
} 
```

这是我收到的错误：

> 您只能在固定语句初始化程序中获取未固定表达式的地址

最初我使用的是一个 USB 传输 dll，它在建立连接时接收并初始化一个缓冲区的 *byte 指针。现在我想用不同的平台更改该dll，代码更改最少，所以我需要自己初始化缓冲区。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T15:08:39.517

*如果您正在调用的非托管代码长时间*需要指向缓冲区的指针，那么您首先不想传递托管缓冲区。为什么？因为托管缓冲区必须被*固定*很长时间，这使得垃圾收集器做额外的工作。

相反，使用非托管内存分配器分配非托管缓冲区，并将指向该缓冲区的指针传递给非托管代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T12:17:40.437

如前所述，您可以使用[fixed 语句固定](http://msdn.microsoft.com/en-us/library/f58wzh21%28v=vs.90%29.aspx)对象，但这对您不起作用，因为您通过 ref 参数返回指针。如果您尝试使用固定语句，代码将编译，但结果指针可能在使用时无效。这是因为一旦退出固定语句块，对象就会被取消固定，这使得它的地址可以随时更改。

在这种情况下，您需要使用[GCHandle.Alloc](http://msdn.microsoft.com/en-us/library/a95009h1.aspx)固定缓冲区：

```
class Test
{
    public byte [] byteArr_1 = new byte [1024];
    private GCHandle pinned;
    //public byte* P_byte;

    public unsafe void SetAddress(ref byte* p_b)
    {
        pinned = GCHandle.Alloc(byteArr_1, GCHandleType.Pinned);
        p_b = (byte*)pinned.AddrOfPinnedObject();
        // NOTE: Don't forget to free the GCHandle at some point via GCHandle.Free!
        // Remember that once this handle is freed, the pointer should not be used in any way.
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:14:23.553

编译器告诉您需要使用[固定的 Statement](http://msdn.microsoft.com/en-us/library/f58wzh21%28v=vs.90%29.aspx)。

# android - 即使在调用 notifyDataSetCanged() 后，列表视图 java.lang.IllegalStateException 也会出现相同的错误

> ID：10245936
> 
> 赞同：0
> 
> 时间：2012-04-20T12:07:17.170
> 
> 标签：android, listview, android-listview, illegalstateexception

java.lang.IllegalStateException：适配器的内容已更改，但 ListView 没有收到通知。确保适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。

注意：这个问题已经被问过了，我想得到一个有效的答案

我的列表视图包含大量数据

当列表中的数据发生更改时，我正在使用处理程序调用波纹管代码

```
 listviewAdapter.notifyDataSetChanged(); 
```

但我有时会遇到同样的错误，而不是每次我加载它都提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:26:34.237

因为有 2 个线程（UI 线程，处理程序线程），所以此错误即将删除该处理程序，因为它在后台工作。仅在 UI 线程中编写代码（它是一个主线程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:19:41.433

使用下面的代码片段，您想在 thred 中更新 UI

```
runOnUiThread(new Runnable() {
                        public void run() {

                            //update UI

                       }
                    }); 
```

# android - 模拟器不显示全屏

> ID：10245937
> 
> 赞同：1
> 
> 时间：2012-04-20T12:07:17.723
> 
> 标签：android, emulation

我的模拟器在半屏中显示应用程序 sest in blackcolor oly 为什么它会这样显示，但在其他一些模拟器中它显示完美..我将布局高度设置为仅填充父级，但仍然没有完全显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:14:34.723

问题在于我用于模拟器的皮肤。为此，我在清单文件中使用了它

```
 <supports-screens android:resizeable="false" 
    android:smallScreens="true" android:normalScreens="true"
    android:largeScreens="true" 
    android:anyDensity="true" /> 
```

# java - 在java中附加arraylist

> ID：10245938
> 
> 赞同：-1
> 
> 时间：2012-04-20T12:07:23.023
> 
> 标签：java, arraylist, append

是否可以连接两个或多个 arraylist ？我有以下情况：

```
 private Arraylist<Double> getContextVectorsize(int sizeContext){
     ArrayList<Double> contextList = new ArrayList<Double>();
     for(int i =0 ; i< sizeContext; i++){
         contextList = //TODO 
     }   
} 
```

我想按顺序附加所有的arraylist，并想生成一个arraylist `size = sizeContext*ArraylistOfSingleMember`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T12:08:49.323

您可以使用 addAll() 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-05T14:11:52.253

使用 list1.addAll(list2)，如果它工作并更新 list1，则返回 true。这是来自 tutorialspoint.com 的完整代码示例。

```
import java.util.ArrayList;

public class ArrayListDemo {
   public static void main(String args[]) {

   // create an empty array list1 with an initial capacity
   ArrayList<Integer> arrlist = new ArrayList<Integer>(5);

   // use add() method to add elements in the list
   arrlist.add(12);
   arrlist.add(20);
   arrlist.add(45);

   // let us print all the elements available in list1
   System.out.println("Printing list1:");
   for (Integer number : arrlist) {
   System.out.println("Number = " + number);
   }

   // create an empty array list2 with an initial capacity
   ArrayList<Integer> arrlist2 = new ArrayList<Integer>(5);

   // use add() method to add elements in list2
   arrlist2.add(25);
   arrlist2.add(30);
   arrlist2.add(31);
   arrlist2.add(35);

   // let us print all the elements available in list2
   System.out.println("Printing list2:");
   for (Integer number : arrlist2) {
   System.out.println("Number = " + number);
   }

   // inserting all elements, list2 will get printed after list1
   arrlist.addAll(arrlist2);

   System.out.println("Printing all the elements");
   // let us print all the elements available in list1
   for (Integer number : arrlist) {
   System.out.println("Number = " + number);
   }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:09:13.887

```
for(int i =0 ; i< sizeContext; i++){
    contextList.addAll( an instance of ArrayList<Double>);
} 
```

# java - Maven 程序集、jar-with-dependencies 和排除的项目类

> ID：10245940
> 
> 赞同：1
> 
> 时间：2012-04-20T12:07:28.613
> 
> 标签：java, maven, jar, dependencies, main

我有一个 Maven 项目，其中一个类带有 main 方法，我想用 Maven 创建一个大的可执行 jar。这是配置：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <archive>
                    <manifest>
                        <mainClass>com.kawaiisoft.Miku</mainClass>
                    </manifest>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

类在`mainClass`元素中指定。接下来我做：

```
mvn assembly:single 
```

和 Maven 创建`target/miku-cli-1.0.0-SNAPSHOT-jar-with-dependencies.jar`. 到目前为止很棒。除了所有依赖项都存在时，jar 中不包含主类。我究竟做错了什么？

# c++ - 在 MonoTouch 和 MonoDroid 中使用现有的 c++ 库

> ID：10245941
> 
> 赞同：4
> 
> 时间：2012-04-20T12:07:36.877
> 
> 标签：c++, mono, xamarin.ios, pinvoke, xamarin.android

Mono noobie在这里，

我想在为 iPhone 和 Android 编写的应用程序中使用现有的 c++ 库。我正在尝试找到将其绑定到我的 Mono 项目的最佳策略，以便平台之间的变化最小。

我试图在网上阅读它并遇到了 CXXI、P/Invoke 等，但无法理解这些方法是否适用于所有平台。另外，我不知道 CXXI 是否足够稳定，或者它是否适合 MonoDroid 和 MonoTouch。

您认为哪种方法最方便、最跨平台？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T19:27:53.460

目前最简单的方法是在您的**C++库上编写****C**包装器，然后为您的（新）C API 编写 p/invokes。这种方法用于开发 Moonlight（Silverlight 的开源实现），其中核心是 C++，但所有内容都作为 C 公开给托管世界。

 **某些平台会有特殊要求（例如，在 iOS 上，您需要构建一个静态库），但这不应该阻止您。

您最好的选择是使用 Swig 之类的工具绑定内容**

# asp.net - IIS 和主机名中的 ASP.NET 缓存

> ID：10245944
> 
> 赞同：2
> 
> 时间：2012-04-20T12:07:53.457
> 
> 标签：asp.net, asp.net-mvc-3, iis, caching

我在 ISS 运行一个 MVC3 网站。我们有一个从数据库中获取图像的控制器。实际获取哪个图像取决于请求的主机名，例如[http://hostA.site.com/image/23返回与](http://hostA.site.com/image/23)[http://hostB.site.com/image/23](http://hostB.site.com/image/23)不同的图像，即使两者都url 引用 IIS 中的相同应用程序。

在启用缓存之前，这可以正常工作。我使用以下代码来允许在服务器和客户端上进行缓存：

```
Response.Cache.SetExpires(DateTime.Now.AddHours(1));
Response.Cache.SetCacheability(System.Web.HttpCacheability.Public); 
```

这会导致 IIS 缓存响应，这正是我们想要看到的。然而，IIS 在缓存时似乎并没有区分不同的主机名。当我第一次获取[http://hostA.site.com/image/23时，对](http://hostA.site.com/image/23)[http://hostB.site.com/image/23](http://hostB.site.com/image/23)的后续调用会导致 IIS 返回从前一个请求缓存的图像。我认为发生这种情况是因为 IIS 认为这些请求是相同的，因为它们具有相同的站点和相同的 URI。

有没有人知道一种方法来完成这项工作，而不必为每个主机创建不同的应用程序？我现在已经为 Private 设置了 Cacheability，但我真的很想让 IIS 缓存这些图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T23:20:13.147

缓存发生在客户端，而不是服务器上。所以 IIS 不是这里的问题，除非您使用它来提供内容过期标头。

如果两个 URL 都指向同一个应用程序，那么无论 URL 是什么，您最终都会添加相同的过期标头。除非您明确查看调用 URL 并相应地调整您发送的响应，否则该代码将在这两种情况下运行。

```
var url = Request.Url.Host;
// Determine which host was called.
// Adjust cache to either 0 or 1 hour based on this 
```

# php - 带有 URL 的 Facebook 分享和推特发布问题

> ID：10245948
> 
> 赞同：0
> 
> 时间：2012-04-20T12:08:00.420
> 
> 标签：php, facebook, twitter

我有以下获取当前 URL 的 PHP 函数：

```
function getCurrentUrl() {
  $isHTTPS = ( isset($_SERVER["HTTPS"] ) && $_SERVER["HTTPS"]  ==  "on" );
  $port = ( isset($_SERVER["SERVER_PORT"] ) && (( !$isHTTPS && $_SERVER["SERVER_PORT"] != "80" ) || ( $isHTTPS && $_SERVER["SERVER_PORT"] != "443" )));
  $port = ($port) ? ':'.$_SERVER["SERVER_PORT"] : '';
  $url = ( $isHTTPS ? 'https://' : 'http://').$_SERVER["SERVER_NAME"].$port.$_SERVER["REQUEST_URI"];
  return $url;
 } 
```

接下来我有以下代码：

```
<ul>
  <li id="face"><a href="https://www.facebook.com/sharer.php?u=<?php echo getCurrentUrl(); ?>&t=<?php echo $title; ?>" class="popup" title="Facebook">Share</a></li>
  <li id="tweet"><a href="http://twitter.com/home?status=<?php echo getCurrentUrl(); ?>" class="popup" title="Tweeter">Tweet</a></li>
</ul> 
```

如果我回显 URL 并`<?php echo getCurrentUrl(); ?>`返回正确的结果：`http://mydomain.com/index.php?menu=13&page=7`

但是当我试图将当前 URL 分享到 Facebook 或 Twitter 时，`page`被切断了，所以共享的 URL 总是看起来像`http://mydomain.com/index.php?menu=13`

我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:10:54.557

您是否尝试过对您的网址进行[urlencode 编码？](http://php.net/manual/en/function.urlencode.php)

```
function getCurrentUrl()
{
  $isHTTPS = ( isset($_SERVER["HTTPS"] ) && $_SERVER["HTTPS"]  ==  "on" );
  $port = ( isset($_SERVER["SERVER_PORT"] ) && (( !$isHTTPS && $_SERVER["SERVER_PORT"] != "80" ) || ( $isHTTPS && $_SERVER["SERVER_PORT"] != "443" )));
  $port = ($port) ? ':'.$_SERVER["SERVER_PORT"] : '';
  $url = ( $isHTTPS ? 'https://' : 'http://').$_SERVER["SERVER_NAME"].$port.$_SERVER["REQUEST_URI"];

  return urlencode($url);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:13:34.573

我认为问题在于，在 facebook 分享按钮中，您在 url 之后有“&t=”，这可能会导致 url 错误并被切断，因为 &page= 可能会让人感到困惑。所以我说你试着这样做：

```
<ul>
 <li id="face"><a href="https://www.facebook.com/sharer.php?t=<?php echo $title; ?>&u=<?php echo getCurrentUrl(); ?>" class="popup" title="Facebook">Share</a></li>
 <li id="tweet"><a href="http://twitter.com/home?status=<?php echo getCurrentUrl(); ?>" class="popup" title="Tweeter">Tweet</a></li>
</ul> 
```

我不确定应该可以使用的推特。

# ios - 关闭 EAGLView 并停止所有进程

> ID：10245957
> 
> 赞同：4
> 
> 时间：2012-04-20T12:08:29.937
> 
> 标签：ios, opengl-es

重新启动我的游戏时，它会因内存不足警告而崩溃。我正在寻找一种方法来关闭 EAGLView 并停止所有进程。我不确定要向您展示什么，所以如果需要，请询问更多信息。

我有一个带有 mainGameLoop 的 EAGLView，如下所示。

```
- (void)mainGameLoop {

    // Create variables to hold the current time and calculated delta
    CFTimeInterval      time;
    float               delta;

    // This is the heart of the game loop and will keep on looping until it is told otherwise
    while(true) {

        // Create an autorelease pool which can be used within this tight loop.  This is a memory
        // leak when using NSString stringWithFormat in the renderScene method.  Adding a specific
        // autorelease pool stops the memory leak
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

        // I found this trick on iDevGames.com.  The command below pumps events which take place
        // such as screen touches etc so they are handled and then runs our code.  This means
        // that we are always in sync with VBL rather than an NSTimer and VBL being out of sync
        while(CFRunLoopRunInMode(kCFRunLoopDefaultMode, 0.02, TRUE) == kCFRunLoopRunHandledSource);

        // Get the current time and calculate the delta between the lasttime and now
        // We multiply the delta by 1000 to give us milliseconds
        time = CFAbsoluteTimeGetCurrent();
        delta = (time - lastTime) * 1000;

        // Go and update the game logic and then render the scene
        [self updateScene:delta];
        [self renderScene];

        // Set the lasttime to the current time ready for the next pass
        lastTime = time;

        // Release the autorelease pool so that it is drained
        [pool release];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:30:31.380

我发布了一个游戏，我使用了 EAGLView。我还使用了一个计时器来控制我的帧数/秒（据说这也是控制设备本身电源利用率的好方法）。

最好的方法是在游戏退出时识别所有实例（甚至按下主页按钮）并控制退出程序的每一点。如果实现上面的定时器，你可以停止定时器，dealloc 的东西，等等......

在重新进入时，您会在 API 中获得例程，如果您实施这些例程，您将有机会知道您是从游戏中状态重新进入，而不是您的应用程序完全从头开始重新启动。

# ios - 检查 coredata 对象是否为零

> ID：10245958
> 
> 赞同：14
> 
> 时间：2012-04-20T12:08:31.323
> 
> 标签：ios, core-data, nspredicate

我想找出核心数据中的对象，我的代码：

类型：

`signedDate`（日期）

`alarmDate`（日期）

`starTime`（NS日期）

`endTime`（NS日期）

```
NSString *str = @"(signedDate >= %@) AND (signedDate < %@) AND (alarmDate == nil)";
NSPredicate *predicate = [NSPredicate predicateWithFormat:str, starTime, endTime];
[request setPredicate:predicate];
NSArray *results=[context executeFetchRequest:request error:nil]; 
```

谓词错了？如何判断一个coredata对象是nil？谓词应该是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-20T12:39:02.173

我不认为谓词语法需要 == nil。只使用一个 =

```
NSString *str = @"(signedDate >= %@) AND (signedDate < %@) AND (alarmDate = nil)"; 
```

您上面的代码工作正常。它应该是 YES，因为它是 nil。

```
BOOL ok;
predicate = [NSPredicate predicateWithFormat:@"firstName = nil"];
ok = [predicate evaluateWithObject:[NSDictionary dictionary]];

ok = [predicate evaluateWithObject:
[NSDictionary dictionaryWithObject:[NSNull null] forKey:@"firstName"]]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-20T12:13:27.087

来自[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html)

**空值测试**

如果要匹配空值，除了其他比较之外，还必须包括特定测试，如下面的片段所示。

```
predicate = [NSPredicate predicateWithFormat:@"(firstName == %@) || (firstName = nil)", firstName];
filteredArray = [array filteredArrayUsingPredicate:predicate];
NSLog(@"filteredArray: %@", filteredArray);

// Output:
// filteredArray: ( { lastName = Turner; }, { birthday = 1972-03-23 20:45:32 -0800; firstName = Ben; lastName = Ballard; } 
```

暗示，与空值匹配的空值测试返回真。在以下代码片段中，两个谓词评估的 ok 都设置为 YES。

```
BOOL ok;
predicate = [NSPredicate predicateWithFormat:@"firstName = nil"];
ok = [predicate evaluateWithObject:[NSDictionary dictionary]];

ok = [predicate evaluateWithObject:
    [NSDictionary dictionaryWithObject:[NSNull null] forKey:@"firstName"]]; 
```

# c++ - 存储有关对象类型的信息

> ID：10245964
> 
> 赞同：2
> 
> 时间：2012-04-20T12:08:43.010
> 
> 标签：c++, rtti

我需要将对象的类型存储在一个类中。
这看起来像：

```
template<class T>
class box
{
private:

    type_info type;
    T data;
} 
```

我需要存储类型信息的原因很难解释，无论如何我会知道这在 C++ 中是否可行。
当我尝试编译如下指令时：

```
type=typeid(data); 
```

我收到一个语法错误：
“std::type_info”的初始化没有匹配
所以看起来 type_info 没有没有参数的构造函数。那么有可能以某种方式将对象的类型记忆到数据中吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T12:18:02.677

typeinfo 是不可复制的——它的构造函数和赋值运算符是私有的（在 C++11 中它们被标记为已删除）。你可能会追求这些方面的东西：

```
template<class T>
class box
{
public:
    box() : data(), type(typeid(data))
    {
    }
private:
    T data;
    const type_info& type;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:17:45.840

您可以从 typeid 表达式返回的对象中获取指针：

```
const std::type_info* const type = &typeid( data ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:21:11.337

可以获取类/对象的名称并将其存储：

`std::string name = typeid(data).name();`

# javascript - 在 ASP.NET 中使用 JavaScript 上传多个图像

> ID：10245965
> 
> 赞同：-2
> 
> 时间：2012-04-20T12:08:43.013
> 
> 标签：javascript, asp.net, file-upload, sharepoint-2010

为了上传多张图片，我正在使用这个 javascriptL

```
 function AddMoreImages() {
        if (!document.getElementById && !document.createElement)
            return false;
        var fileUploadarea = document.getElementById("fileUploadarea");
        if (!fileUploadarea)
            return false;
        var newLine = document.createElement("br");
        fileUploadarea.appendChild(newLine);
        var newFile = document.createElement("input");
        newFile.type = "file";
        newFile.setAttribute("class", "fileUpload");

        if (!AddMoreImages.lastAssignedId)
            AddMoreImages.lastAssignedId = 100;
        newFile.setAttribute("id", "FileUpload" + AddMoreImages.lastAssignedId);
        newFile.setAttribute("name", "FileUpload" + AddMoreImages.lastAssignedId);
        var div = document.createElement("div");
        div.appendChild(newFile);
        div.setAttribute("id", "div" + AddMoreImages.lastAssignedId);
        fileUploadarea.appendChild(div);
        AddMoreImages.lastAssignedId++;
    }
<div id="fileUploadarea">
                                    <asp:FileUpload ID="UploadImage" runat="server" CssClass="fileUpload" />
</div> 
```

但问题是，当我上传多张 2MB 大小的图片时，JavaScript 无法正常工作，并且页面不会回发到我的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:21:33.377

> 但问题是当我上传多张 2mb 大小的图片时......

您可能会遇到为 ASP.NET (4MB) 设置的默认最大上传大小。您可以将其添加到您的 web.config 以增加默认值：

```
<system.web>
  <httpRuntime executionTimeout="240" maxRequestLength="20480" />
</system.web> 
```

这会将最大上传大小一次增加到 20MB。

如果您想进一步阅读，这里有一篇关于此主题的非常详细的文章：[ASP.NET 中的大文件上传](http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx)。

*注意：您说“javascript 不工作”，但并没有真正详细说明。如果您可以对此进行扩展，我很乐意再看一下*

# java - java swing GUI popupMenu 位于另一个程序或文件窗口的界面之上

> ID：10245967
> 
> 赞同：2
> 
> 时间：2012-04-20T12:08:59.440
> 
> 标签：java, macos, swing

我正在 mac osx 上开发 Swing GUI 应用程序。有一个问题，当我右键单击在我的应用程序上打开一个弹出窗口时，然后我单击其他应用程序。我的 pop 仍然打开，我可以在其他 GUI 上工作。

如图所示。

![在此处输入图像描述](../Images/6eba0b19c4e64fbc6d89099a2ee930f0.png)

哪个应该是解决此问题的最佳方法？当焦点转移到其他程序时，我应该关闭窗口上的所有弹出窗口吗？或者是其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:04:30.753

我使用 apple mac os 属性将我的 JMenu 固定到 Os 菜单。一切都很完美。

```
System.setProperty("apple.laf.useScreenMenuBar", "true"); 
```

此链接对于看起来像本机操作系统的摇摆应用程序非常有用。

[http://www.devdaily.com/apple/mac/java-mac-native-look/References.shtml](http://www.devdaily.com/apple/mac/java-mac-native-look/References.shtml)

# javascript - 在 Internet Explorer 中从 JavaScript 中止解析器

> ID：10245972
> 
> 赞同：1
> 
> 时间：2012-04-20T12:09:13.770
> 
> 标签：javascript, internet-explorer

`window.stop()`在 Gecko 和 WebKit 中，您可以通过调用托管文档的浏览上下文的`Window`对象来中止活动的 HTML 解析器。

有没有办法从 IE 中的 JavaScript 中止 HTML 解析器，而不会导致在其他地方导航（`window.location`），也不会删除文档的内容并立即创建一个新的解析器（`document.open()`）？

也就是说，有没有办法使用JavaScript来触发用户按下停止按钮的效果？

（用例是研究在 IE 中中止解析器的影响。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:13:12.393

请参阅[停止 iframe 加载](https://stackoverflow.com/questions/8961455/stop-iframe-from-loading)

引用：

*对于 IE，你可以用 document.execCommand('Stop') 做同样的事情：*

```
window.frames[0].document.execCommand('Stop') 
```

# python - 从python中的列表创建位置映射字典

> ID：10245975
> 
> 赞同：0
> 
> 时间：2012-04-20T12:09:16.313
> 
> 标签：python

我有很多单词的列表。

从中，我想创建一个字典，其中包含列表中的每个唯一单词作为键，并且它出现在（列表索引）中的第一个位置作为键的值。

有没有一种**有效**的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T12:13:12.687

```
>>> l = ['a', 'b', 'c', 'b', 'a', 'd']
>>> import itertools as it
>>> dict(it.izip(reversed(l), reversed(xrange(len(l)))))
{'a': 0, 'b': 1, 'c': 2, 'd': 5} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T12:13:29.483

由于无论如何您都必须查看每个单词，因此不会比这更快：

```
index = {}

for position, word in enumerate(list_of_words):
    if word not in index:
        index[word] = position 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T12:34:21.413

```
>>> l = ['a', 'b', 'c', 'b', 'a', 'd']
>>> dic = {l[i]:i for i in range(len(l)-1,-1,-1)}
>>> print(dic)
{'a': 0, 'c': 2, 'b': 1, 'd': 5} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T12:28:21.990

@eumiro 解决方案的修改版

```
>>> from itertools import count, izip
>>> l = ['a', 'b', 'c', 'b', 'a', 'd']
>>> dict(izip(reversed(l),count(len(l)-1,-1))) #In Py 3 just use zip
{'a': 0, 'c': 2, 'b': 1, 'd': 5} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T06:18:43.367

尝试这个

```
l = ['a', 'b', 'c', 'b', 'a', 'd']
l2 = set(l)
mydict = {v:l.index(v) for  v in   l2} 
```

输出

`{'a': 0, 'b': 1, 'c': 2, 'd': 5}`

# video - MPEG-4 解码器与 MPEG 2 解码器与 3GP 解码器，哪个更快，为什么？

> ID：10245976
> 
> 赞同：0
> 
> 时间：2012-04-20T12:09:22.060
> 
> 标签：video, ffmpeg, mpeg-4, 3gp, mpeg-2

在带有 ARM 和/ DSP 的 Android 平台上，哪个解码器会更快：MPEG-4 或 MPEG-2 还是 3GP？为什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:33:10.563

“更快”是一个相对术语。鉴于您问题中的信息，无法回答。但总的来说，MPEG-4**比**MPEG-2 复杂得多。功能列表太长，无法在此处列出... MPEG-4 ASP 中的功能之一是 MPEG-2 中不存在的[qpel 。](http://en.wikipedia.org/wiki/Qpel)

顺便说一句，3GP 是一种容器格式，而不是解码器。看[这里](http://en.wikipedia.org/wiki/3GP_and_3G2)

# cassandra - Cassandra 集群单节点

> ID：10245980
> 
> 赞同：1
> 
> 时间：2012-04-20T12:09:25.913
> 
> 标签：cassandra, replication, cluster-computing

好吧，我有一个节点集群，我分为两个地址 127.0.0.1 和 127.0.0.2。如果我尝试将数据插入 127.0.0.1，请使用 Cassandra 客户端。数据成功添加到 127.0.0.1，我也可以查看它，但是如果我尝试从 127.0.0.2 连接查看，我看不到任何更新。没有数据。我想我上次无法很好地解释它。这是我将两个 cassandra 复制到同一节点上名为 Cassandra 1 和 Cassandra 2 的不同文件夹中的内容。相应地更新 Cassandra.yaml。

1)

```
cluster_name: 'Test Cluster'
initial_token: 
data_file_directories: - /Cassandra/1/var/lib/cassandra/data
commitlog_directory: /Cassandra/1/var/lib/cassandra/commitlog
saved_caches_directory: /Cassandra/1/var/lib/cassandra/saved_caches 
- seeds: "127.0.0.1,127.0.0.2" 
listen_address: 127.0.0.1 
rpc_address: 127.0.0.1 
```

2)

```
cluster_name: 'Test Cluster' 
initial_token: 
data_file_directories: - /Cassandra/2/var/lib/cassandra/data
commitlog_directory: /Cassandra/2/var/lib/cassandra/commitlog
saved_caches_directory: /Cassandra/2/var/lib/cassandra/saved_caches
- seeds: "127.0.0.1,127.0.0.2" 
listen_address: 127.0.0.2 
rpc_address: 127.0.0.2 
```

其他设置是默认设置，我没有修改任何内容。然后我使用以下方法创建一个键空间和列族：

```
CREATE KEYSPACE demo with placement_strategy = 'org.apache.cassandra.locator.SimpleStrategy' and strategy_options = [{replication_factor:2}]; 
```

我没有指定任何分区器，所以我猜默认是随机的。

```
use demo; 

create column family order with comparator=UTF8Type and key_validation_class=UTF8Type and default_validation_class=UTF8Type and column_metadata=[{column_name: member, validation_class: UTF8Type},{column_name: user, validation_class: UTF8Type, index_type: KEYS},{column_name: instrument, validation_class: UTF8Type},{column_name: price, validation_class: DoubleType}, {column_name: quantity, validation_class: Int32Type},{column_name:datetime, validation_class: DateType}]; 
```

现在，如果我尝试连接到 127.0.0.1 并插入数据，我相信应该为 127.0.0.1 和 127.0.0.2 插入数据，但事实并非如此。

```
Set orders[KEY][user] = 'ABC' list orders; 
```

有什么问题吗 ？我应该怎么做才能使它可行。

如果有的话，请给我一个详细的例子。我认为我在创建键空间、列族和数据插入时做错了。如果您有一个带有两个节点插入的示例，那也很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-17T10:41:51.447

在尝试为本地传输提供不同的端口号后，我遇到了类似的问题。必须是同一个端口（默认9042），否则节点找不到对方。IP 地址必须不同，以防止节点之间的端口冲突。

用于`./nodetool status`检查您是否确实创建了一个集群，而不仅仅是两个孤立的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:37:29.840

您是否使用两个 IP 作为种子，将其设置为单个 IP，以先启动为准。

“nodetool --host [127.0.0.1|127.0.0.2] 响”是什么意思，说。你能在 custer 中看到两个 ip。

# java - 将多个 JPanel 添加到 JFrame

> ID：10245982
> 
> 赞同：0
> 
> 时间：2012-04-20T12:09:30.683
> 
> 标签：java, swing, layout, jframe

好吧，现在我有一个包含 JLayeredPane 的 JFrame。所以它现在运行一个游戏 GUI。我想在这个框架的一侧添加按钮，以便我可以通过按钮接收用户的输入。有任何想法吗？

```
class mapGUI extends JFrame{
        layeredPane = new JLayeredPane();
    mapSize = new Dimension(mapColumn * 16 , mapRow * 16);

    layeredPane.setPreferredSize(mapSize);
    //Adding the layeredPane to the frame.
    getContentPane().add(layeredPane);

    //Adds the appropriate labels to the panels and adds them to the layeredPane.
    addPlayerPos();
    addDungeonItems();
    addDungeonFloor();

    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setResizable(false);
    pack();
    setLocationRelativeTo(null);
    setVisible(true);
} 
```

这是我创建 JFrame 并将 JLayeredPane 添加到其中的代码部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:34:57.270

1) 不要使用[JLayeredPane](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)，因为最多有 6 层限制。使用基于(Java6)的[JLayer (Java7 )](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)`JXLayer`

2) 使用[JLayeredPane](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)大约是`setSize`/ `setBounds`，这不适合 resizeable`Container`

3）使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)而不是[JLayeredPane](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)，

4) 或使用[JTabbedPane](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:25:54.930

您应该首先学习有关[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)的基本知识。如前所述，根据您的要求特别查看 BorderLayout

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T12:18:26.953

如果您想在整个游戏中使用按钮，您可以使用 BorderLayout 并将按钮放在布局的东/西，然后将 LayeredPane 添加到中心。如果按钮需要与游戏屏幕重叠，您可以使用`layeredPaneObj.add(buttonPanel,new Integer(0))`这将使面板保持在顶部。

# c# - MVVM 设计模式问题

> ID：10245984
> 
> 赞同：3
> 
> 时间：2012-04-20T12:09:42.203
> 
> 标签：c#, wpf

我是 WPF 和 MVVM 的新手，并且在如何设计我的应用程序方面遇到了很多困难（因此这里有很多问题）并且即将进行重构。我有一个 SQL 后端并且正在使用 LINQtoSQL，因此 LINQTOSQL 生成的类将成为我的模型。我还没有看到一个很好的综合示例，说明如何使模型类远离视图 - 在我现在查看的示例中，视图绑定到 ModelClass.Something，而不是具有引用 ModelClass.Something 的 ViewModel 属性。我认为这很糟糕（如果数据库中的该字段更改视图中断）是否正确？

我目前正在努力的是下拉列表。示例：我有一个名为 MessageType 的查找表，其中包含一个 id 和文本字段以及一个用于获取它们的存储库方法。所以在我看来，我想避免将 DisplayMemberPath 和 SelectedValue 路径绑定到模型的 MessageType 类上的字段，所以我需要创建一个新类并在我的 ViewModel 中公开该类的属性吗？像这样：

```
public class MessageTypeViewModel : ViewModelBase
{
    public MessageTypeViewModel(MessageType t)
    {
        MessageTypeText = t.messageTypeText;
        MessageTypeId = t.messageTypeId;
    }
    public string MessageTypeText { get; private set; }//bind DisplayMember and SelectedValue to these properties
    public int MessageTypeId { get; private set; }
} 
```

像这样填充：

```
get
{
if (textMessageSelectionOptions == null)
    {
        var list = repository.GetMessageTypes().Select(x=>new MessageTypeViewModel(x)).ToList();
        textMessageSelectionOptions =new ReadOnlyCollection<MessageTypeViewModel>(list);
    }
return textMessageSelectionOptions;
} 
```

我还有一个 Mission 对象，它有一个 MessageType 的外键，那么如果我现在有了这个新类，如何将组合框的 SelectedItem 绑定到mission.MessageType？我真的很难用任务对象、它的孩子和它的父母来获得模式，我找不到任何全面的例子来说明人们使用 MVVM 进行 CRUD 操作。我是不是太过分了还是错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:34:52.290

MVVM 的目标是让您的应用程序更易于维护，并让您不必花费大量时间调试紧密耦合的意大利面条式代码。如果 MVVM 模式的纯实现为您实现了这一点，那么值得您花时间充分应用它。另一方面，如果您花费大量时间为您的模型类编写 ViewModel 代理，但您的应用程序很小，并且一旦完成就不会发生太大变化，那么纯粹的 MVVM 方法可能会过大。

如果您想避免将模型完全暴露给视图，您可能必须创建模型的特定于 ViewModel 的版本并复制所有依赖项（例如 Mission -> MessageType）。

您可能会发现这篇文章很有用：http: [//msdn.microsoft.com/en-us/magazine/ff798279.aspx](http://msdn.microsoft.com/en-us/magazine/ff798279.aspx)，尤其是关于集合的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:43:23.100

看起来你`MessageType`真的是一个不可变的值类型，所以我认为视图模型是不必要的。

假设您正在使用一个绑定到类似 a 的视图，`MissionViewModel`并且有一个下拉列表要填充`MessageType`绑定到您已为其显示 getter 的属性的选项，我认为您正在做的很好。

默认情况下，使用对象填充下拉列表`MessageType`（通过绑定到`ItemsSource`）应显示调用`ToString()`每个项目的结果。如果这不能给你想要的结果，你可以使用视图模型或者创建一个`IValueConverter`实现来显示你想要的。

如果您的下拉列表中有视图模型而不是`MessageType`对象本身，那么您可以`mission.MessageType`通过`SelectedItem`使用`IValueConverter`将视图模型转换为`MessageType`. 要执行此转换，您可以

A. 将底层暴露`MessageType`为视图模型的公共属性，
B. 使视图模型本身实现`IValueConverter`，以便转换操作可以访问私有`MessageType`字段，或
C.`IValueConverter`再次创建视图模型的嵌套类所以它可以访问私有`MessageType`字段

选项 B 的一个缺点是您需要一个公共的无参数构造函数来在 XAML 中添加转换器`ResourceDictionary`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:23:45.000

您需要使用命令而不是直接从视图模型中访问视图，反之亦然。请参阅[具有模型-视图-视图模型设计模式的 WPF 应用程序](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

# c# - .NET 应用程序中的大内存块。处理它们的最佳/推荐/可扩展方式是什么？

> ID：10245994
> 
> 赞同：4
> 
> 时间：2012-04-20T12:10:44.960
> 
> 标签：c#, optimization, memory-management, large-files

想象一个通过组合和/或编辑其他文件来创建大文件的应用程序。例如，一个应用程序：

*   打开图像档案
*   添加或替换一些图像
*   更改现有图像的一部分
*   使用生成的图像集创建新存档

可以按任何顺序添加/替换/更改图像，因此在执行结束之前无法创建新存档。

天真的方法是为`MemoryStream`原始存档中的每个图像创建一组对象，然后在需要时更改/删除/替换流，然后将该组写入新存档。这种方法可能会在执行速度方面给出最好的结果。

问题很明显：并不总是有足够的内存来保存一组流。

*在这种情况下你会推荐什么？*

我想我应该用一些速度换取内存，并使用某种临时的非内存存储。不过，我不确定要使用什么。

*我应该使用内存映射文件吗？还是带有某种创建和删除机制的普通旧临时文件？也许还有别的？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:14:07.320

您可以`FileStream`像使用`MemoryStream`. 它本质上将确定缓冲的负担以及所有这些都放在了操作系统上。操作系统确实最了解，并让驱动程序和硬件处理复杂的缓存和微调。只需编写易于理解和配置文件的代码，配置文件，配置文件。

如果分析显示需要，您可能可以混合这两种类型的流以获得性能良好且看起来不错的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:01:13.667

首先，请注意[.net 对 LOH 的限制](http://connect.microsoft.com/VisualStudio/feedback/details/521147/large-object-heap-fragmentation-causes-outofmemoryexception)，基本上对于 LOH 对象，内存不会进行碎片整理，因此如果您连续创建和处理大量大对象，您“很可能”会得到“内存不足异常”因为碎片化的内存孔可能无法给您足够大的连续内存空间（.net 4.5 及更高版本已对此进行了一定程度的优化，但问题仍然存在）。因此，要回答您的问题，很大程度上取决于您的机器的体系结构，如果它是具有大量 RAM 的 64 位，并且您知道您的文件将恰好适合 LOH 问题，请使用内存中的对象，否则为迈克尔建议使用文件流颠簸必然会发生。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T12:56:26.873

一种方法是使用文件和文件系统——大部分是——并提供某种内存缓存或映射。

如果您正在处理大量或相当大的文件-那么您无法真正将其与内存大小相匹配（或解压缩内存中的完整存档）-除非我们谈论的是额外的硬件、RAM。

具体来说，我个人会选择......

```
class MemoryArchive {} 
```

...它冒充文件的前端，在后端存档。

您解压缩磁盘上的存档文件，临时文件夹 - 与大多数解压缩工具一样，然后处理“较小单元”的访问，即文件。

你`MemoryArchive`的行为基本上就像所有都在内存中，所以你需要有一些映射来代替内存流（或者你决定用于直接访问对象级别的任何东西）到磁盘上的临时文件，文件流。

并且可能是一些处理同步的强大方法 - 和/或错误，问题 - 因为您需要确保内存中的内容与磁盘上的内容同步 - 并保持“集成”完好无损。

那时（并且取决于系统的性质等），主要任务可能是编写某种事务 - 围绕文件系统存储 - 这是您开始类似于数据库管理系统的地方。但那将是“规模的另一端”——如果你可以没有它生活，并保持简单，它可能不会有那么大的问题。

只是一个想法，尽管这完全取决于您的具体细节 -
即事物的规模（可能会有很大差异 - 即如果内存允许在某些情况下您可以加载，并且处理速度足够快），“小变化”如何' 档案内与档案的大小、更改的频率和性质。

在最简单的情况下，我几乎会将内容存储为临时文件并根据需要处理较小的增量更改。

并且拥有某种方式`MemoryArchive`会给你未来的事情提供一个围栏 - 所以你可以改变它，或者根据档案的大小等混合几种方法。实际上，在这些情况下，一些“混合方法”通常是最好的，因为在处理不同的文件、大小时，您几乎无法做出“一刀切”的解决方案。

希望这可以帮助，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T12:14:37.127

> 我应该使用内存映射文件吗？

这肯定是首先想到的。这种方法的唯一问题是文件大小是否最终会占用所有映射空间。