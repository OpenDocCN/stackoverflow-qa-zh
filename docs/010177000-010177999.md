# StackOverflow 问答 10177000-10177999

# rdf - 在 SparQL 的 rdf 中查找关系

> ID：10177005
> 
> 赞同：3
> 
> 时间：2012-04-16T15:24:06.780
> 
> 标签：rdf, sparql

我刚刚开始使用名为 MyExperiment 的服务的 SparQL 端点。我对语义网完全陌生。

服务端点网址是这样的：[http ://rdf.myexperiment.org/sparql](http://rdf.myexperiment.org/sparql)

基本上我已经弄清楚了如何进行基本查询。就像通过以下查询列出一些对象（例如工作流）：

```
BASE <http://www.myexperiment.org/> 
PREFIX myexp: <http://www.myexperiment.org/> 
PREFIX mecontrib: <http://rdf.myexperiment.org/ontologies/contributions/> 
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> 
SELECT ?workflow WHERE { ?workflow rdf:type mecontrib:Workflow} 
```

我有两个问题。

1.  我需要找到 RDF 中不同概念之间的关系。就像我知道一个RDF中有一个叫做“工作流”的概念，另一个RDF中有一个叫做“用户”的概念，我怎样才能找到这两者之间的关系？

2.  如何创建查询以混合两个或多个概念。就像我想查看用户名创建的工作流列表或查找用户创建的工作流？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:38:27.447

Sparql 查询的 WHERE 子句是一种图形模式，由一个或多个通过变量或空白节点连接的三元组组成（如果值不使用/不重要）。该图针对三元组存储进行检查，尝试绑定使用的变量并因此返回结果集。

将 WHERE 子句视为一组三元组主谓宾语句，需要满足这些语句才能使特定实例出现在结果集中。

关于你的第一个问题。这是在图中找到路径的任务。如果这两个概念都属于单个或相关（例如引用）格式良好的本体，则可以通过玩这样的查询来给出一些提示（以您提供的示例为基础）：

```
SELECT DISTINCT ?prop, ?range WHERE { ?workflow a mecontrib:Workflow .
                                       ?workflow ?prop ?value .
                                       ?prop rdfs:range ?range } 
```

在其中，我们要求列出工作流概念的所有可用的不同谓词（可能被视为属性）及其范围。范围定义属性值的类型（参见[OWL 规范](http://www.w3.org/TR/owl-ref/#range-def)）。通过将范围与所需类型进行比较，可以找到将两个概念相互关联的属性。然而，这个公理并不总是被定义，但是当它被定义时，它可以在最简单的情况下用于检查某个概念是否具有将其与另一个概念相关联的属性。此外，[属性路径](http://www.w3.org/TR/sparql11-property-paths/)可用于跟踪任意长度的路径，但这仍在进行中，可能并非所有 rdf 存储都支持（参见[链接](http://www.w3.org/2009/sparql/wiki/Feature%3aPropertyPaths)）。

因此，最简单的方法似乎是分析您正在研究的本体以找到特定案例的答案，而不是尝试找到通用解决方案。

关于第二个问题。只需在 WHERE 子句中使用几个三元组模式。考虑以下示例：

```
SELECT ?book, ?authorName FROM <http://myrdfgraph>
WHERE { ?book a Book .
        ?book hasAuthor ?author
        ?author hasName ?authorName } 
```

我们正在询问基于图书馆本体的假想图，其中包含具有属性 hasName 的概念书。hasAuthor 的范围是 Author 概念的实例。Author 概念有属性 hasName 表示小说家的名字。这样的查询将返回带有作者姓名的所有书籍的列表。希望这将帮助您在您的案例中应用示例。

另外，考虑学习[SPARQL 规范](http://www.w3.org/TR/rdf-sparql-query)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-27T11:57:13.173

将所有关系放入 RDF 图的 SPARQL 查询是：

```
SELECT ?domain ?property ?range
WHERE{  
       ?property rdf:type owl:ObjectProperty .
       ?property rdfs:range ?range .
       ?property rdfs:domain ?domain
     } 
```

# mysql - SQL UPDATE 语句使用来自另一个没有唯一标识符的表中的值更新表

> ID：10177008
> 
> 赞同：1
> 
> 时间：2012-04-16T15:24:17.790
> 
> 标签：mysql, sql, unique

我有一个具有非唯一标识符的表，我需要使用另一个具有唯一标识符的表中的值来更新相应的列。

基本上我有两张桌子

表格1

```
| Col1 | Col2 |
---------------
|  A   |  1   |
---------------
|  A   |  2   |
---------------
|  B   |  4   |
---------------
|  C   |  6   |
---------------
|  C   |  9   |
--------------- 
```

表2

```
| Col1 | Col2 |
---------------
|  A   |  1   |
---------------
|  B   |  2   |
---------------
|  C   |  3   |
--------------- 
```

我想使用 MySQL 使用 Table2.Col2 中的相应值对 Table1.Col2 执行计算，其中 Table1.Col1 = Table2.Col1。

例如：

```
| Col1 | Col2 |
---------------
|  A   |  1   | // (1/1)
---------------
|  A   |  2   | // (2/1)
---------------
|  B   |  2   | // (4/2)
---------------
|  C   |  2   | // (6/3)
---------------
|  C   |  3   | // (9/3)
--------------- 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:30:18.857

看起来你需要这样的东西：

```
UPDATE Table1
    JOIN Table2
        ON Table1.Col1 = Table2.Col2
SET Table1.Col2 = Table1.Col2/Table2.Col2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T15:30:51.203

加入表格并使用算术运算符 /

```
select Table1.Col2 / Table2.Col2 as result
from Table1 
inner join Table2 on Table1.Col1=Table2.Col2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:31:35.210

您可以执行以下操作：

```
// for an update
update table1 
join table2 
    on table1.col1 = table2.col1
set table1.col2 = (table1.col2 /table2.col2)

// for a select 
SELECT (t1.col2 /t2.col2) as results
from table1  t1
join table2 t2
    on t1.col1 = t2.col1 
```

# android - 适用于 Android/iphone/ipad 的开源或其他 pgp/gpg 库

> ID：10177011
> 
> 赞同：2
> 
> 时间：2012-04-16T15:24:30.643
> 
> 标签：android, iphone, pgp

这可能是时间敏感的，除非目前有一个项目提供标准。

是否有经过测试的 android 和 iOS 库提供 PGP/GPG 实现来解密通过网络请求接收的数据？

我希望保护通过 SSL 传输的数据，以便在设备被盗或越狱的特定事件中以加密形式将其写入磁盘。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:33:17.580

我在我的一个项目中遇到了同样的问题，我确实用 openssl 和自己的加密解决了这个问题。

主要是因为...

1.  没有支持 Android/iOS（c 或 c++）的 PGP/GPG 框架。
2.  我发现的唯一一个合理的框架是[GPGME](http://www.gnupg.org/related_software/gpgme/)，它在 GNU 许可下（不适用于 iOS！）
3.  使用 openssl 并没有我想象的那么困难。:)

您需要仔细查看 EVP openssl 加密功能，...尤其 是`EVP_SealInit()`//`EVP_SealUpdate()``EVP_SealFinal()`

然后，您还可以查看[我关于加密的 stackoverflow 问题](https://stackoverflow.com/questions/7868754/is-my-encryption-safe-as-openpgp-smime)之一。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T14:26:24.113

对于 iOS，您现在可以轻松使用[UNNetPGP](https://github.com/upnext/unnetpgp)。它基于 NetBSD 库 netpgp，并且很容易与 Cocoapods 一起部署。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T02:17:53.210

对于 Android，您可以使用重新打包的 bouncycastle 版本。您需要重新打包的版本，因为 Android 中已经有一个不完整的版本。

# javascript - jQuery插件如何处理按钮事件

> ID：10177014
> 
> 赞同：0
> 
> 时间：2012-04-16T15:24:38.143
> 
> 标签：javascript, jquery

我正在编写一个 jQuery 插件，非常基本的模态窗口插件。

所有的模态窗口都会有一个动作按钮，它可以“保存”“发送”或“确定”等。未来可能还会有更多的东西。打这个电话的最佳地点在哪里。我应该将它构建到插件中，还是有更好的方法将调用与插件分开？我想我的想法是，如果我将它放在插件之外，它将为我需要的任何情况下的许多自定义操作打开大门。不确定将点击事件绑定到插件中生成的模式窗口中的按钮有多容易。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:03:22.817

有很多选择，但在不完全了解您在做什么的情况下，我认为回调将是一个不错的选择。

例如，插件的“保存”处理程序会调用`options.saveCallback.call(this);`

因此，您创建一个`saveCallback`选项，并在初始化插件时将其传入。这里有一个很好的例子：[jQuery插件：添加回调功能](https://stackoverflow.com/questions/2534436/jquery-plugin-adding-callback-functionality)

现在如果人。想要自定义保存按钮的作用，他们可以使用回调。

# malloc - Monodevelop：如何找到 malloc “双重释放”错误的原因？

> ID：10177015
> 
> 赞同：2
> 
> 时间：2012-04-16T15:24:46.117
> 
> 标签：malloc, monodevelop

我找到了这个线程[How to find the cause of a malloc "double free" error？](https://stackoverflow.com/questions/971249/how-to-find-the-cause-of-a-malloc-double-free-error)但这并没有提供有关如何在单声道环境中调试此错误的任何有用信息：

那么有人知道如何在 Monodevelop 中调试这样的错误吗？

```
MyApp(2121,0xb0185000) malloc: *** error for object 0x1068310: double free
*** set a breakpoint in malloc_error_break to debug 
```

在他们提到设置符号断点的链接线程中，但我无法在 monodevelop 中找到相同的功能。

非常感谢您的帮助！

亨宁

# file - 获取文件扩展名的脚本

> ID：10177017
> 
> 赞同：3
> 
> 时间：2012-04-16T15:24:50.653
> 
> 标签：file, bash

我需要获取文件夹中的所有文件扩展名类型。例如，如果目录的 ls 给出以下内容：

```
a.t  
b.t.pg  
c.bin  
d.bin  
e.old  
f.txt  
g.txt 
```

我应该通过运行脚本来得到这个

```
.t  
.t.pg  
.bin  
.old  
.txt 
```

我有一个 bash 外壳。

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T15:36:05.063

请参阅[ParsingLS 上的 BashFAQ 条目，了解](http://mywiki.wooledge.org/ParsingLs)为什么其中许多答案是邪恶的。

以下方法避免了这个陷阱（顺便说一下，完全忽略了没有扩展名的文件）：

```
shopt -s nullglob
for f in *.*; do
  printf '%s\n' ".${f#*.}"
done | sort -u 
```

其中的优点：

*   正确性：`ls`行为不一致，可能导致不适当的结果。请参阅顶部的链接。
*   效率：最小化调用子进程的数量（只有一个，，`sort -u`如果我们想使用 Bash 4 的关联数组来存储结果，也可以删除）

仍然可以改进的地方：

*   正确性：这将正确丢弃第一个之前的文件名中的换行符`.`（其他一些答案不会） - 但是第一个之后的换行符`.`将被视为单独的条目`sort`。这可以通过使用空值作为分隔符或通过上述 bash 4 关联数组存储方法来解决。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T15:40:25.360

尝试这个：

```
ls -1 | sed 's/^[^.]*\(\..*\)$/\1/' | sort -u 
```

*   `ls`列出文件夹中的文件，每行一个文件
*   `sed`魔术提取扩展
*   `sort -u`对扩展进行排序并删除重复项

sed 魔法读作：

*   `s/ / /`: 将第一个和第二个/之间的任何内容替换为第二个和第三个之间的任何内容/
*   `^`: 匹配行首
*   `[^.]`: 匹配任何不是点的字符
*   `*`: 尽可能多地匹配它
*   `\(`和`\)`：记住这两个括号之间的匹配项
*   `\.`: 匹配一个点
*   `.`: 匹配任意字符
*   `*`: 尽可能多地匹配它
*   `$`: 匹配行尾
*   `\1`：这是括号之间匹配的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:47:22.537

人们真的过于复杂了 - 特别是正则表达式：

```
ls | grep -o "\..*" | uniq 
```

`ls`- 获取所有文件
`grep -o "\..*"`-`-o`仅显示匹配项；`"\..*"`匹配第一个“。” & 之后的所有内容
`uniq`- 不要打印重复但保持相同的顺序

喜欢也可以排序，但排序与示例不符

这是运行它时发生的情况：

```
> ls -1
a.t
a.t.pg
c.bin
d.bin
e.old
f.txt
g.txt

> ls | grep -o "\..*" | uniq
.t
.t.pg
.bin
.old
.txt 
```

# delphi - 为什么我在调用 Microsoft Communicator 2007 的 IMessengerContacts.Count 方法时会遇到访问冲突？

> ID：10177021
> 
> 赞同：2
> 
> 时间：2012-04-16T15:24:59.793
> 
> 标签：delphi, pascal, office-communicator

我想将列表中的联系人显示到 TListBox 上。我在运行 Delphi XE 的 Windows 7 PC 上安装并运行了 Communicator。我正在使用 CommunicatorAPI_TLB 和 CommunicatorPrivate_TLB。

我单击登录和注销按钮，程序按预期运行：我的 Communicator 登录和注销。凉爽的。

问题是当我尝试单击列表用户按钮时。该`Contacts.Count`方法似乎给我带来了访问冲突。我在小组中尝试过，结果相同。谁能发现我做错了什么？

```
 { This IMessenger3 Class Inherits from the IMessenger2 interface -> IMessenger... }
  Communicator : IMessenger3;
  Contacts     : IMessengerContacts;
  Contact      : IMessengerContact;
  Groups       : IMessengerGroups;
  Connected    : Boolean;

End;

Var
  frmMain: TfrmMain;

Implementation

{$R *.dfm}

{ ---------------------------------------------------------------------------- }

Procedure TfrmMain.FormCreate(Sender: TObject);
Begin    
  Communicator := CoMessenger.Create;      
End; { FormCreate Procedure }

Procedure TfrmMain.btnSignInClick(Sender: TObject);
Begin    
  Communicator.AutoSignin;
  Connected := True;        
End;  { btnSignInClick Procedure }

Procedure TfrmMain.btnSignOutClick(Sender: TObject);
Begin    
  Communicator.Signout;
  Connected := False;      
End;  { btnSignOutClick Procedure }

Procedure TfrmMain.btnLoadContactsClick(Sender: TObject);
Var
  ContactIndex : Integer;                                                       
Begin      
  { Load my contacts into a listbox }
  Contacts := IMessengerContacts (Communicator.MyContacts);
  Groups   := IMessengerGroups (Communicator.MyGroups);

  If (Contacts <> Nil) Then Begin

    try
      showmessage (inttostr(Groups.Count));
      showmessage (inttostr(Contacts.count));
    except    
    end;
  (*
    For ContactIndex := 0 To (Contacts.Count) Do Begin

     Contact := IMessengerContact (Contacts.Item (ContactIndex));

     { Add the contact to the list }
     lbxContacts.AddItem (Contact.FriendlyName, Nil);

    End; { For }
  *)
  End; { If <> Nil }

End; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:03:58.590

更改要使用的两个类型转换`as`。如果问题是接口不可用，您至少会收到一条有意义的错误消息。

改变

```
Contacts := IMessengerContacts(Communicator.MyContacts); 
Groups   := IMessengerGroups (Communicator.MyGroups); 
```

至

```
Contacts := Communicator.MyContacts as ImessengerContacts; 
Groups   := Communicator.MyGroups as IMessengerGroups; 
```

您可能应该对其他要进行类型转换以获得接口的地方做同样的事情。尽可能礼貌地要求他们总比强行抓住他们要好。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:51:37.193

自从我编写任何 Delphi（大约 14 年）以来，已经过了很长一段时间，但我会冒险猜测一下。

出于安全原因，IMessenger 接口中的一些方法被标记为 NotScriptable。我的猜测是，界面将您的 Delphi 应用程序视为脚本语言，即不是本机 C++ 代码，这会导致访问冲突。您可以通过查看[参考](http://msdn.microsoft.com/en-us/library/bb758755%28office.12%29.aspx)来证明这一点，以确定哪些是可编写脚本的，哪些不是，并查看哪些引发访问冲突。

至于修复它 - 正如我所说，我不是 Delphi 专家，但还有其他方法可以实例化 IMessenger 对象吗？[或者用另一种语言围绕 API 创建一个包装器，以便从 Delphi 调用（这里](https://stackoverflow.com/questions/4325808/mygroups-not-implemented-in-communicator-uiautomation/4327134#4327134)有一个示例）

# oracle - oracle路径已更改，Toad无法定位oracle

> ID：10177028
> 
> 赞同：0
> 
> 时间：2012-04-16T15:25:12.070
> 
> 标签：oracle, toad

我已经在外置硬盘上安装了oracle，外置硬盘的驱动器名称已更改。现在我打开toad但无法找到oracle。请尽快给出解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:36:40.733

如果我是正确的并且您正在运行 Windows，则可以使用 SUBST c 命令行命令来创建驱动器号别名。例如，如果您的外部硬盘最初是驱动器 F:，当您安装 Oracle 时，现在它显示为 E:，那么命令

```
SUBST F: E:\ 
```

在命令窗口中将导致 F: 驱动器号分配给路径 E:\，这可能只是让事情正常工作。请注意，要使其正常工作，只能使用 F: 驱动器号。

分享和享受。

# g++ - “非法指令：4”出现在 OS X Lion 中

> ID：10177038
> 
> 赞同：10
> 
> 时间：2012-04-16T15:25:42.547
> 
> 标签：g++, osx-lion, illegal-instruction

一些 C++ 应用程序在 OS X Snow Leopard 中无缝编译和运行，但我最近更改为 OS X Lion，在这里，虽然没有编译错误，但当我尝试运行它时，我收到错误“非法指令：4”，我不知道，可能是什么原因？

PS：

这些是我使用的链接标志

```
-Wl,-stack_size,0x10000000,-stack_addr,0xc0000000 
```

这是我做的时候得到的输出`sudo truss executable`

```
setrlimit returned result = -1
    SYSCALL(args)        = return
getpid(0x0, 0x0, 0x0)        = 32993 0
__sysctl(0xBFFFF5EC, 0x3, 0xBFFFF5E8)        = 0 0
issetugid(0xBFFFF5EC, 0x3, 0xBFFFF5E8)       = 0 0
csops(0x0, 0x0, 0xBFFFF65C)      = 0 0
shared_region_check_np(0xBFFFD5E0, 0x0, 0xBFFFF65C)      = 0 0
stat64("/usr/lib/dtrace/libdtrace_dyld.dylib\0", 0xBFFFE830, 0xBFFFF65C)         = 0 0
open("/usr/lib/dtrace/libdtrace_dyld.dylib\0", 0x0, 0x0)         = 3 0
pread(0x3, "\312\376\272\276\0", 0x1000, 0x0)        = 4096 0
pread(0x3, "\316\372\355\376\a\0", 0x1000, 0x6000)       = 4096 0
mmap(0x4D3000, 0x2000, 0x1, 0x12, 0x3, 0x3)      = 0x4D3000 0
mmap(0x4D5000, 0x1000, 0x3, 0x12, 0x3, 0x3)      = 0x4D5000 0
mmap(0x4D6000, 0x1EF0, 0x1, 0x12, 0x3, 0x3)      = 0x4D6000 0
close(0x3)       = 0 0
stat64("/usr/lib/libstdc++.6.dylib\0", 0xBFFFE690, 0x1)      = 0 0
stat64("/usr/lib/libgcc_s.1.dylib\0", 0xBFFFE690, 0x1)       = 0 0
stat64("/usr/lib/libSystem.B.dylib\0", 0xBFFFE560, 0x1)      = 0 0
stat64("/usr/lib/libc++abi.dylib\0", 0xBFFFE5D0, 0x1)        = 0 0
stat64("/usr/lib/system/libcache.dylib\0", 0xBFFFE360, 0x1)      = 0 0
stat64("/usr/lib/system/libcommonCrypto.dylib\0", 0xBFFFE360, 0x1)       = 0 0
stat64("/usr/lib/system/libcompiler_rt.dylib\0", 0xBFFFE360, 0x1)        = 0 0
stat64("/usr/lib/system/libcopyfile.dylib\0", 0xBFFFE360, 0x1)       = 0 0
stat64("/usr/lib/system/libdispatch.dylib\0", 0xBFFFE360, 0x1)       = 0 0
stat64("/usr/lib/system/libdnsinfo.dylib\0", 0xBFFFE360, 0x1)        = 0 0
stat64("/usr/lib/system/libdyld.dylib\0", 0xBFFFE360, 0x1)       = 0 0
stat64("/usr/lib/system/libkeymgr.dylib\0", 0xBFFFE360, 0x1)         = 0 0
stat64("/usr/lib/system/liblaunch.dylib\0", 0xBFFFE360, 0x1)         = 0 0
stat64("/usr/lib/system/libmacho.dylib\0", 0xBFFFE360, 0x1)      = 0 0
stat64("/usr/lib/system/libmathCommon.A.dylib\0", 0xBFFFE360, 0x1)       = 0 0
stat64("/usr/lib/system/libquarantine.dylib\0", 0xBFFFE360, 0x1)         = 0 0
stat64("/usr/lib/system/libremovefile.dylib\0", 0xBFFFE360, 0x1)         = 0 0
stat64("/usr/lib/system/libsystem_blocks.dylib\0", 0xBFFFE360, 0x1)      = 0 0
stat64("/usr/lib/system/libsystem_c.dylib\0", 0xBFFFE360, 0x1)       = 0 0
stat64("/usr/lib/system/libsystem_dnssd.dylib\0", 0xBFFFE360, 0x1)       = 0 0
stat64("/usr/lib/system/libsystem_info.dylib\0", 0xBFFFE360, 0x1)        = 0 0
stat64("/usr/lib/system/libsystem_kernel.dylib\0", 0xBFFFE360, 0x1)      = 0 0
stat64("/usr/lib/system/libsystem_network.dylib\0", 0xBFFFE360, 0x1)         = 0 0
stat64("/usr/lib/system/libsystem_notify.dylib\0", 0xBFFFE360, 0x1)      = 0 0
stat64("/usr/lib/system/libsystem_sandbox.dylib\0", 0xBFFFE360, 0x1)         = 0 0
stat64("/usr/lib/system/libunc.dylib\0", 0xBFFFE360, 0x1)        = 0 0
stat64("/usr/lib/system/libunwind.dylib\0", 0xBFFFE360, 0x1)         = 0 0
stat64("/usr/lib/system/libxpc.dylib\0", 0xBFFFE360, 0x1)        = 0 0
open("/dev/dtracehelper\0", 0x2, 0xBFFFF5B0)         = 3 0
ioctl(0x3, 0x80086804, 0xBFFFF540)       = 0 0
close(0x3)       = 0 0
__sysctl(0xBFFFF1FC, 0x2, 0xBFFFF1F4)        = 0 0
bsdthread_register(0x92C9F6BC, 0x92C9F6E0, 0x1000)       = 0 0
thread_selfid(0x92C9F6BC, 0x92C9F6E0, 0x1000)        = 2500945 0
mmap(0x0, 0x2000, 0x3, 0x1002, 0x1000000, 0xAC308375)        = 0x4D8000 0
mprotect(0x4D8000, 0x44, 0x1)        = 0 0
mmap(0x0, 0xD000, 0x3, 0x1002, 0x1000000, 0x4D8034)      = 0x4DA000 0
mprotect(0x4DA000, 0x1000, 0x0)      = 0 0
mprotect(0x4E6000, 0x1000, 0x0)      = 0 0
mmap(0x0, 0xD000, 0x3, 0x1002, 0x1000000, 0x4DB000)      = 0x4E7000 0
mprotect(0x4E7000, 0x1000, 0x0)      = 0 0
mprotect(0x4F3000, 0x1000, 0x0)      = 0 0
mmap(0x0, 0x1000, 0x3, 0x1002, 0x1000000, 0x4E8000)      = 0x4F4000 0
mprotect(0x4F4000, 0x1000, 0x1)      = 0 0
mprotect(0x4D8000, 0x44, 0x3)        = 0 0
mmap(0x0, 0x200000, 0x3, 0x1002, 0x7000000, 0x4F4000)        = 0x4F5000 0
munmap(0x4F5000, 0xB000)         = 0 0
munmap(0x600000, 0xF5000)        = 0 0
mprotect(0x4D8000, 0x44, 0x1)        = 0 0
getpid(0x4D8000, 0x44, 0x1)      = 32993 0
__mac_syscall(0x973E8E8E, 0x2, 0xBFFFF0C8)       = 0 0
stat64("/AppleInternal\0", 0xBFFFF130, 0xBFFFF0C8)       = -1 Err#2
audit_session_self(0x92C1F4B6, 0xBFFFF130, 0xBFFFF0C8)       = 5635 0
geteuid(0x92C1F4B6, 0xBFFFF130, 0xBFFFF0C8)      = 0 0
getegid(0x92C1F4B6, 0xBFFFF130, 0xBFFFF0C8)      = 0 0
getaudit_addr(0xBFFFF0A8, 0x30, 0xBFFFF0C8)      = 0 0
csops(0x80E1, 0x7, 0xBFFFECF8)       = 0 0
mmap(0x0, 0x2000, 0x3, 0x1002, 0x1000000, 0xACA5EB00)        = 0x4F5000 0
mprotect(0x4F5000, 0x44, 0x1)        = 0 0
mmap(0x0, 0xD000, 0x3, 0x1002, 0x1000000, 0x4F5034)      = 0x600000 0
mprotect(0x600000, 0x1000, 0x0)      = 0 0
mprotect(0x60C000, 0x1000, 0x0)      = 0 0
mmap(0x0, 0xD000, 0x3, 0x1002, 0x1000000, 0x601000)      = 0x60D000 0
mprotect(0x60D000, 0x1000, 0x0)      = 0 0
mprotect(0x619000, 0x1000, 0x0)      = 0 0
mprotect(0x4F4000, 0x1000, 0x3)      = 0 0
mprotect(0x4F4000, 0x1000, 0x1)      = 0 0
mprotect(0x4F5000, 0x44, 0x3)        = 0 0
mmap(0x0, 0x200000, 0x3, 0x1002, 0x7000000, 0x4F4004)        = 0x61A000 0
munmap(0x61A000, 0xE6000)        = 0 0
munmap(0x800000, 0x1A000)        = 0 0
mprotect(0x4F5000, 0x44, 0x1)        = 0 0
getrlimit(0x1003, 0xBFFFF8DC, 0x1)       = 0 0
setrlimit(0x1003, 0xBFFFF8DC, 0x1)       = -1 Err#22
getrlimit(0x1008, 0xBF835C60, 0x1)       = 0 0
fstat64(0x1, 0xBF836090, 0x1F)       = 0 0
mmap(0x0, 0x1000000, 0x3, 0x1002, 0x2000000, 0xACA5B3E0)         = 0x800000 0
munmap(0x1000000, 0x800000)      = 0 0 
```

PS2：如果我删除前面提到的链接标志，程序运行，没有错误。但是当我向程序输入真实数据时，我得到

```
Segmentation fault: 11 
```

我记得这个程序的堆栈有问题，所以不得不增加它。在Linux中，我做到了这一点并且可以工作

```
 const rlim_t kStackSize = 256L * 1024L * 1024L;   // min stack size = 64 Mb
    struct rlimit rl;
    int result;

    result = getrlimit(RLIMIT_STACK, &rl);
    if (result == 0)
    {
            if (rl.rlim_cur < kStackSize)
            {
                    rl.rlim_cur = kStackSize;
                    result = setrlimit(RLIMIT_STACK, &rl);
                    if (result != 0)
                    {
                            fprintf(stderr, "setrlimit returned result = %d\n", result);
                    }
            }
    } 
```

但是在 OS X 中，由于那不起作用，我使用了前面提到的链接标志，并且没有问题是 OS X Snow Leopard，所以我在 OS X Lion 中似乎仍然存在堆栈溢出问题，但链接标志并没有解决这。我能做什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-16T01:26:51.910

我在 Mountain Lion (10.8) 上构建产品然后在 Lion 上运行时遇到了这个问题。(10.7)。原因是我对构建环境进行了一些更改。

（我正在使用 mkbundle 发布使用 Mono 的产品。）

修复非常简单，我不得不告诉 clang 生成的二进制文件需要在 OSX 10.6 上运行。我在 clang 中添加了以下参数：

```
-mmacosx-version-min=10.6 
```

问题解决了！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T00:13:48.823

在 OS X Lion（但也是 10.5）中，堆栈大小硬限制为 65532 kbytes（略低于 64 MiB）。这可以通过以下方式看到：

```
bswift$ ulimit -Hs
65532 
```

即使是 root，我也无法增加这个值。

软限制默认为仅 8 MiB：

```
bswift$ ulimit -Ss
8192 
```

在开始应用程序之前尝试将值提高到此最大值：

```
bswift$ ulimit -Ss unlimited
bswift$ ulimit -Ss
65532 
```

注意：（`segmentation fault (SIGSEGV)`编号 11）您观察到的信号是根据超出堆栈限制时发送给进程的信号`man setrlimit`

注意：由于`ulimit`命令需要是内置的 shell，您会发现它记录在`man bash`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:14:38.047

这可能是[权限问题。](https://discussions.apple.com/thread/3207713?start=0&tstart=0)

`sudo dtruss`要进一步诊断，请从带有前缀的终端运行程序。在抛出错误之前查看它运行的系统调用。

例子：`sudo dtruss /path/to/application`

您还可以使用 Xcode 或 GDB 调试器对其进行诊断。

# java - 有条件地在 JSF 组件标签中设置一个属性

> ID：10177048
> 
> 赞同：1
> 
> 时间：2012-04-16T15:26:15.907
> 
> 标签：java, jsf, jsf-2, el

我需要根据来自支持 bean 的布尔值有条件地在 JSF 组件标签中设置一个属性。我应该怎么做？

如果布尔值为真，则应在组件标签中添加/指定属性，或者如果布尔值为假，则不应为该组件设置该属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:53:41.230

You can either:

*   If the value is boolean - define default value you desire in bean and assign it to JSF component's attribute. e.g. `rendered="#{bean.componentRendered}"`
*   If there are more options for attribute (not boolean) - bind your component to backing bean and initialize it and required attributes on server-side. e.g. `binding="#{bean.component}"`

I am not sure if it is possible to achieve what I mentioned in second option. If it is impossible, then please edit my answer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:42:23.913

虽然你的问题对我来说不是很清楚。我还是会试着回答这个

1）如果您必须在文本字段中填充一个值（假设），那么您可以在 bean 类的构造函数中设置该值，并且在构造函数中您可以检查布尔值并相应地设置该值。

2）如果您不想显示该字段，则可以根据要求将渲染字段设置为false。

请详细说明，以便我们为您提供更多帮助

# java - 限制java进程的网络带宽

> ID：10177053
> 
> 赞同：9
> 
> 时间：2012-04-16T15:26:48.160
> 
> 标签：java, bandwidth-throttling

有没有一种有效的方法来限制某个java进程的带宽？

我熟悉诸如`trickle`在运行时限制某个进程的带宽的解决方案

```
sudo trickle -s -d 1024 /path/to/app.sh 
```

但是在处理 java 进程时，它变得更具挑战性，因为应用程序启动一个`JVM`或在某些情况下启动一个 WRAPPER 服务，`JVM`这意味着像“涓流”这样的解决方案将不起作用。

我可以尝试限制（使用`trickle`）整个java进程（通过包装/弄乱`/usr/bin/java` s.link） - UGLY。有谁知道限制java进程带宽的更好解决方案（`JVM`）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-23T14:38:54.753

不幸的是，我认为trickle 做不到。我有类似的问题，我通过限制特定端口上的带宽解决了这个问题。例如，您的应用程序打开端口 34567 进行通信，然后您可以应用防火墙设置并限制它。

在我使用“ipfw”的 Mac 上，例如：

```
sudo ipfw pipe 1 config bw 5KByte/s
sudo ipfw add 2 pipe 1 src-port 6666 
```

在 linux 上，我使用“tc”，示例和来源：[http ://www.cyberciti.biz/faq/linux-traffic-shaping-using-tc-to-control-http-traffic/](http://www.cyberciti.biz/faq/linux-traffic-shaping-using-tc-to-control-http-traffic/)

作为最终解决方案，您可以创建 bash 脚本来监控进程并选择您需要的进程并对其进行端口限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:36:19.650

这个问题不是很清楚。您是否可以控制 Java 代码？否则，您是系统管理员吗？

如果您使用的是 Java 代码，则可以使用 Socket 范例，然后使用以下方法限制每个套接字连接：*setPerformancePreferences(int connectionTime, int latency, int bandwidth)*。在另一种情况下，带宽限制能力取决于操作系统和 Java 应用程序的执行方式。

# ios - 一个 iOS App 的不同 App Store 发布者能否在不同地区发布同名的同一个 App？

> ID：10177054
> 
> 赞同：2
> 
> 时间：2012-04-16T15:26:48.810
> 
> 标签：ios, app-store

使用不同苹果帐户的不同发行商能否在不同地区发布完全相同的应用（相同名称、相同捆绑 ID）？

比如，你有一个美国出版商，一个亚洲出版商？

如果不是，需要采取哪些步骤来完成上述操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:46:36.000

我不这么认为
我认为您只能提交一次特定名称或捆绑 ID
但是如果这是您的目标，您可以设置不同的定价方案或制作两个应用程序版本；“App USA”和“App ASIA”，并在所需地区独立分发

# asp.net - asp.net：验证失败后禁用回发

> ID：10177058
> 
> 赞同：3
> 
> 时间：2012-04-16T15:27:03.520
> 
> 标签：asp.net, validation, postback

验证失败后，我的控件（下拉列表或按钮）出现问题，应该会导致新的回发。我会尽量解释清楚...

我的页面的目的是在数据库中保存五个日期。该页面具有以下控件：

*   五个文本框，每个文本框包含一个日期

*   重置按钮 (CausesValidation=false) 用于在 5 个文本框之一中恢复默认日期

*   将 5 个日期应用于 5 个文本框的预定义模板的下拉列表 (AutoPostback=true, CausesValidation=false)

*   将日期保存到数据库的按钮

文本框可以手动编辑。因此，当我单击“保存”按钮时，如果日期格式无效，则验证失败并中止保存。问题就在那之后。如果我单击“重置”按钮或在下拉列表中选择一个项目，则不会触发回发。如果我再试一次，那么它会起作用。有没有办法让它在第一次验证失败后第一次工作？在更改下拉列表中的选择时，我尝试在客户端停用验证，但回发仍然没有发生。

这是代码的相关部分：

```
<asp:DropDownList ID="cboScheduleTemplates" runat="server" AutoPostBack="true" CausesValidation="false" />
<asp:TextBox ID="txtDateDelivery1" runat="server" />
<asp:RegularExpressionValidator ID="revDateDelivery1" runat="server" Display="Dynamic" ValidationGroup="Schedule" ControlToValidate="txtDateDelivery1" Text="*" />
<asp:TextBox ID="txtDateYearbookQuantity" runat="server" />
<asp:RegularExpressionValidator ID="revDateYearbookQuantity" runat="server" Display="Dynamic" ValidationGroup="Schedule" ControlToValidate="txtDateYearbookQuantity" Text="*" />
<asp:TextBox ID="txtDateDelivery2" runat="server" />
<asp:RegularExpressionValidator ID="revDateDelivery2" runat="server" Display="Dynamic" ValidationGroup="Schedule" ControlToValidate="txtDateDelivery2" Text="*" />
<asp:TextBox ID="txtDatePersonalizations" runat="server" />
<asp:RegularExpressionValidator ID="revDatePersonalizations" runat="server" Display="Dynamic" ValidationGroup="Schedule" ControlToValidate="txtDatePersonalizations" Text="*" />
<asp:TextBox ID="txtDateDelivery3" runat="server" />
<asp:Button ID="btnSetDefaultDelivery3" runat="server" ValidationGroup="Schedule" CausesValidation="false" />
<asp:RegularExpressionValidator ID="revDateDelivery3" runat="server" Display="Dynamic" ValidationGroup="Schedule" ControlToValidate="txtDateDelivery3" Text="*" />
<asp:Button ID="btnSaveSchedule" runat="server" CssClass="btnAction" Text="Save" ValidationGroup="Schedule" />
<asp:ValidationSummary ID="validationSummarySchedule" runat="server" ValidationGroup="Schedule" DisplayMode="List" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-05T15:58:23.167

正如[这篇文章](https://stackoverflow.com/questions/7769597/why-wont-my-form-post-back-after-validation)中所建议的，问题来自对 Page_ClientValidate 的调用。所以我像这样包装了客户端功能，问题就消失了：

```
函数 DoPageClientValidate(validationGroupName)
{
     var 结果 = Page_ClientValidate(validationGroupName);
     Page_BlockSubmit = false;
     返回结果；
}

```

# netty - 单个服务器上的netty多重查询

> ID：10177066
> 
> 赞同：0
> 
> 时间：2012-04-16T15:27:34.037
> 
> 标签：netty

我正在尝试使用 netty 同时从服务器下载多个地图图块图像。但到目前为止，我总是遇到各种错误： - 超时 - 冻结 - org.jboss.netty.handler.codec.PrematureChannelClosureException

每 10 次正常工作一次......我尝试了几种不同的方法，但没有一个能正常工作。

我有人可以解决它（我认为这是一个基本的 nio 客户端问题），我将不胜感激：

```
 package bench;

    import java.net.InetSocketAddress;
    import java.util.ArrayList;
    import java.util.List;
    import java.util.Map;
    import java.util.concurrent.ConcurrentHashMap;
    import java.util.concurrent.Executors;
    import org.apache.derby.iapi.services.io.ArrayOutputStream;
    import org.jboss.netty.bootstrap.ClientBootstrap;
    import org.jboss.netty.channel.*;
    import org.jboss.netty.channel.socket.nio.NioClientSocketChannelFactory;
    import org.jboss.netty.handler.codec.http.*;

    public class NettyDebug {

        public static void main(String[] args) {

            String host = "tile.openstreetmap.org";
            int port = 80;

            final List<String> requests = new ArrayList<String>();
            requests.add("/5/16/8.png");
            requests.add("/5/18/12.png");
            requests.add("/5/18/13.png");
            requests.add("/5/14/10.png");
            requests.add("/5/20/11.png");
            requests.add("/5/19/13.png");
            requests.add("/5/22/11.png");
            requests.add("/5/16/13.png");
            requests.add("/5/20/14.png");
            requests.add("/5/21/14.png");
            requests.add("/5/19/12.png");
            requests.add("/5/21/11.png");
            requests.add("/5/15/10.png");
            requests.add("/5/15/15.png");
            requests.add("/5/22/14.png");
            requests.add("/5/14/15.png");
            requests.add("/5/17/8.png");
            requests.add("/5/18/8.png");
            requests.add("/5/13/9.png");
            requests.add("/5/22/12.png");
            requests.add("/5/13/16.png");
            requests.add("/5/22/13.png");
            requests.add("/5/17/13.png");
            requests.add("/5/17/12.png");
            requests.add("/5/16/14.png");
            requests.add("/5/19/8.png");
            requests.add("/5/20/8.png");
            requests.add("/5/14/9.png");
            requests.add("/5/23/14.png");
            requests.add("/5/14/16.png");
            requests.add("/5/16/12.png");
            requests.add("/5/23/11.png");
            requests.add("/5/16/11.png");
            requests.add("/5/13/15.png");
            requests.add("/5/17/11.png");
            requests.add("/5/13/10.png");
            requests.add("/5/19/14.png");
            requests.add("/5/20/13.png");
            requests.add("/5/19/11.png");
            requests.add("/5/18/11.png");
            requests.add("/5/18/14.png");
            requests.add("/5/17/14.png");
            requests.add("/5/15/9.png");
            requests.add("/5/23/13.png");
            requests.add("/5/21/13.png");
            requests.add("/5/20/12.png");
            requests.add("/5/15/16.png");
            requests.add("/5/21/8.png");
            requests.add("/5/23/12.png");
            requests.add("/5/22/8.png");
            requests.add("/5/18/16.png");
            requests.add("/5/19/9.png");
            requests.add("/5/20/10.png");
            requests.add("/5/15/14.png");
            requests.add("/5/19/10.png");
            requests.add("/5/21/12.png");
            requests.add("/5/16/9.png");
            requests.add("/5/23/8.png");
            requests.add("/5/23/15.png");
            requests.add("/5/23/10.png");
            requests.add("/5/16/16.png");
            requests.add("/5/13/13.png");
            requests.add("/5/13/12.png");
            requests.add("/5/22/10.png");
            requests.add("/5/14/14.png");
            requests.add("/5/17/16.png");
            requests.add("/5/17/9.png");
            requests.add("/5/20/9.png");
            requests.add("/5/21/16.png");
            requests.add("/5/21/10.png");
            requests.add("/5/18/10.png");
            requests.add("/5/15/12.png");
            requests.add("/5/21/15.png");
            requests.add("/5/23/16.png");
            requests.add("/5/21/9.png");
            requests.add("/5/15/11.png");
            requests.add("/5/13/8.png");
            requests.add("/5/19/16.png");
            requests.add("/5/19/15.png");
            requests.add("/5/14/11.png");
            requests.add("/5/14/8.png");
            requests.add("/5/20/16.png");
            requests.add("/5/18/15.png");
            requests.add("/5/15/13.png");
            requests.add("/5/20/15.png");
            requests.add("/5/18/9.png");
            requests.add("/5/22/15.png");

            final ClientBootstrap BOOTSTRAP = new ClientBootstrap(
                    new NioClientSocketChannelFactory(
                    Executors.newCachedThreadPool(),
                    Executors.newCachedThreadPool()));
            BOOTSTRAP.setPipelineFactory(new PipeFactory());

            final Map<Integer, ArrayOutputStream> results = new ConcurrentHashMap<Integer, ArrayOutputStream>();

            for(final String query : requests){
                final ChannelFuture cf = BOOTSTRAP.connect(new InetSocketAddress(host, port));
                cf.addListener(new ChannelFutureListener() {
                    @Override
                    public void operationComplete(ChannelFuture future) throws Exception {
                        final Channel channel = future.getChannel();
                        results.put(channel.getId(), new ArrayOutputStream());

                        final HttpRequest request = new DefaultHttpRequest(
                                HttpVersion.HTTP_1_1, HttpMethod.GET, query);
                        request.setHeader(HttpHeaders.Names.CONNECTION, HttpHeaders.Values.CLOSE);
                        request.setHeader(HttpHeaders.Names.ACCEPT_ENCODING, HttpHeaders.Values.BYTES);

                        if (channel.isOpen() && channel.isWritable()) {
                            channel.write(request);
                        }

                    }
                });
            }

            //HOW TO HANDLE THOSE MULTIPLE QUERIES ?

        }

        private static class PipeFactory implements ChannelPipelineFactory {

            @Override
            public ChannelPipeline getPipeline() throws Exception {
                // Create a default pipeline implementation.
                final ChannelPipeline pipeline = org.jboss.netty.channel.Channels.pipeline();
                pipeline.addLast("codec", new HttpClientCodec());
                pipeline.addLast("handler", new QueryHandler());
                return pipeline;
            }
        }

        private static class QueryHandler extends SimpleChannelUpstreamHandler {

            @Override
            public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
                System.out.println( e.getMessage().getClass() );
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:31:48.073

这是 netty 3.4.0.Final 中的一个错误。我刚刚提交了一个修复程序，我们将尽快发布 3.4.1.Final。

# ios - 在 Kiwi (iOS) 中模拟代表的期望

> ID：10177072
> 
> 赞同：5
> 
> 时间：2012-04-16T15:27:49.883
> 
> 标签：ios, objective-c, testing, mocking, kiwi

**问题的简短版本：**

以下 Kiwi/iOS 模拟期望有什么问题？

```
[[mockDelegate should] receive:@selector(connectionDidSucceedWithText:andStatus:) withArguments:[testString1 stringByAppendingString:testString2],theValue(value),nil]; 
```

**长版问题：**

我正在尝试在 Kiwi，iOS 中为一个处理 NSConnection 的简单类编写测试。为了测试该类是否处理来自 NSConnection 的回调，我将其发送给 NSConnection 通常执行的委托方法。我在班级中有一个代表，可以将数据发送回使用我班级的任何人。要测试我的课程，我必须注入一个模拟委托，然后检查是否调用了我想要的方法。就那么简单 ：）

我的 Kiwi 测试代码是：

```
//Some ivars declared elsewhere:
testString1 = @"asd323/4 d14";
testString2 = @"as98 /2y9h3fdd14";
testData1 = [testString1 dataUsingEncoding:NSUTF8StringEncoding];
testData2 = [testString2 dataUsingEncoding:NSUTF8StringEncoding];
mockURLRespons = [NSHTTPURLResponse mock];
int value = 11111;
id mockDelegate = [KWMock mockForProtocol:@protocol(SharepointConnectionDelegate)];
communicator = [[SharepointCommunicator alloc] init];

it (@"should send recieve data back to delegate2", ^{
   [communicator setDelegate:mockDelegate];
   [mockURLRespons stub:@selector(statusCode) andReturn:theValue(value)];
   [(id)communicator connection:niceMockConnector didReceiveResponse:mockURLRespons];
   [(id)communicator connection:niceMockConnector didReceiveData:testData1];
   [(id)communicator connection:niceMockConnector didReceiveData:testData2];
   [(id)communicator connectionDidFinishLoading:niceMockConnector]; 

   [[mockDelegate should] receive:@selector(connectionDidSucceedWithText:andStatus:) withArguments:[testString1 stringByAppendingString:testString2],theValue(value),nil];

}); 
```

在我的 SharepointCommunicator.m 中：

```
-(void)connection:(NSURLConnection *)aConnection didReceiveResponse:(NSURLResponse *)response {
  if (connection != aConnection) {
      [connection cancel];
      connection = aConnection;
  }
  responseData = [[NSMutableData alloc] init];
  statusCode = [(NSHTTPURLResponse*)response statusCode];
}

-(void)connection:(NSURLConnection *)aConnection didReceiveData:(NSData *)data {
  if (aConnection != self.connection)
    return;
  [responseData appendData:data];
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection {
  NSString *txt = [[NSString alloc] initWithData:responseData encoding: NSASCIIStringEncoding];
  NSLog(@"Statuscode: %i", statusCode);
  NSLog(@"Data is: %@",txt);
  [delegate connectionDidSucceedWithText:txt andStatus:statusCode];
  [self.connection cancel];
  self.connection = nil;
} 
```

此代码有效且正确。使用检查点对其进行调试表明它按预期进行。statusCode 的值为 11111。txt 为 testString1+textString2。它仍然在测试的最后一行失败，并出现以下错误：

```
error: -[kiwiSharepointCommunicatorTest Sharepointcommunicator_AStateTheComponentIsIn_ShouldSendRecieveDataBackToDelegate2] : 'Sharepointcommunicator, a state the component is in, should send recieve data back to delegate2' [FAILED], mock received unexpected message -connectionDidSucceedWithText："asd323/4 d14as98 /2y9h3fdd14" andStatus：11111 
Test Case '-[kiwiSharepointCommunicatorTest Sharepointcommunicator_AStateTheComponentIsIn_ShouldSendRecieveDataBackToDelegate2]' failed (3.684 seconds). 
```

删除测试中的最后一行仍然会产生相同的错误。我想我对 receive:withArguments: 的理解是错误的..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T18:27:56.103

您必须在调用`[[mockDelegate should] receive...` *之前*调用`connectionDidFinishLoading`以准备 mockDelegate 以接收它即将接收的消息。

# java - 我应该如何使用事务来防止内存不足异常？

> ID：10177073
> 
> 赞同：0
> 
> 时间：2012-04-16T15:27:55.620
> 
> 标签：java, hibernate, memory-management, transactions

我不知道在我的服务类上使用什么注释来最小化应用程序所需的内存。

以一个客户/订单场景为例，我想找到单个客户的最大总支出。总共有100万个订单和100个客户，每个客户下了10,000个订单。

我能想到的最简单的例子是：

```
public class MyService {
    @Transactional(readOnly=true)
    public int getMaxSpend() {
        int maxSpend = 0;
        List<Customer> customers = customerDao.findAll();
        for(Customer customer : customers) {
            List<Order> orders = orderDao.getOrders(customer);
            for(Order order : orders) {
                if(order.getTotal() > maxSpend) maxSpend = order.getTotal();
            }
        }
        return maxSpend;
    }
} 
```

由于交易跨越了每个客户订单的加载，我相信休眠会话中最终会有一百万个对象，这远非理想。`Order`一旦为该客户完成迭代，我想通过垃圾收集每个客户的订单来最小化内存中的实例数量。

在以下示例中，客户没有引用他们的订单集合，也没有订单引用他们的客户：

```
public class MyService {
    @Transactional(propagation=Propagation.NEVER)
    public int getMaxSpend() {
        int maxSpend = 0;
        List<Customer> customers = getAllCustomers();
        for(Customer customer : customers) {
            int customerSpend = getCustomerSpend(customer);
            if(customerSpend > maxSpend) maxSpend = customerSpend;
        }
        return maxSpend;
    }

    @Transactional(readOnly=true)
    private List<Customer> getAllCustomers() {
        return customerDao.findAll();
    }

    @Transactional(readOnly=true)
    private int getCustomerSpend(Customer customer) {
        int customerSpend = 0;
        List<Order> orders = orderDao.getOrders(customer);
        for(Order order : orders) {
            customerSpend += order.getTotal();
        }
        return customerSpend;
    }
} 
```

不幸的是，当我在 jprofiler 中分析内存时，仍然有 100 万个`Order`加载实例。我期待一个休眠异常，因为我认为私有方法不能是事务性的，但这从未发生过。以上是正确的方法，我已经以某种方式打开了交易，还是有不同的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:34:33.593

如果`getTotal()`返回一个持久字段的值，最好的方法是使用聚合函数编写 HQL 查询：

```
select max(o.total) from Order o 
```

`clear()`或者，您可以通过在循环内调用（或通过调用已`detach()`处理的对象）定期清除会话缓存。清除缓存会使实体进入分离状态，很快就会被 GC 收集。这是使用 Hibernate 实现批处理操作的常见做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:31:59.740

只需编写一条返回所需结果的 sql 语句。

# jquery-mobile - 带有分隔符的 jQuery Mobile 可搜索列表也是可折叠的？

> ID：10177078
> 
> 赞同：0
> 
> 时间：2012-04-16T15:28:02.290
> 
> 标签：jquery-mobile

我使用带有分隔符的 jQuery Mobile 搜索过滤器：http: [//jquerymobile.com/test/docs/lists/lists-search-with-dividers.html](http://jquerymobile.com/test/docs/lists/lists-search-with-dividers.html)

我需要分隔线在单击时折叠和展开它们下面的列表项，例如这里的示例：http: [//jquerymobile.com/test/docs/content/content-collapsible.html](http://jquerymobile.com/test/docs/content/content-collapsible.html)

我知道 jQuery Mobile 可以轻松处理可折叠的 div，但它可以与我的列表结合使用，还是我需要编写一些自定义 jQuery 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:20:25.283

不确定您是否已解决问题。但我有一些对我有用的东西如下。这是我第一次在这里回答问题。我从这个论坛中受益匪浅，所以如果可以的话，我应该回馈一下。

这是我第一次做 Jquery Mobile，所以解决方案可能不是最好的。但这对我有用：

```
// Build up the divider programatically.
var listHTML = "<ul data-role='listview' data-filter='true'";
listHTML += "<li data-icon='arrow-u'  class='ui-btn-icon-left'>";
listHTML += "<a class='cl-CategoryDivider' id= 'id-Category";
listHTML += categoryCounter;
listHTML += "' > ";
listHTML += CategoryName;
listHTML += "</a>";                         
listHTML += "</li>";                            

// The listview must have this class
listHTML += "<li class='cl-Category";
listHTML += categoryCounter;
listHTML += "'> ";

....................... 
```

然后，使用以下代码来处理单击分隔线以折叠和取消折叠该分隔线下的项目：

```
$('.cl-CategoryDivider').live ("click", function (event)
{   
var ID = this.id.substring(this.id.indexOf("y")+1,this.id.length);
var $span = $(this).parents("li").find ("span.ui-icon");
if ($span.hasClass ("ui-icon-arrow-u")) 
{
    $(".cl-Category"+ID).hide();
    $span.removeClass ("ui-icon-arrow-u");
    $span.addClass ("ui-icon-arrow-d");
} else {
    if ($span.hasClass ("ui-icon-arrow-d")) 
    {
        $(".cl-Category"+ID).show();
        $span.removeClass ("ui-icon-arrow-d");
        $span.addClass ("ui-icon-arrow-u");
    }
}
}); 
```

希望能帮助到你。

# cocoa - 将表视图绑定到字典数组

> ID：10177083
> 
> 赞同：0
> 
> 时间：2012-04-16T15:28:36.307
> 
> 标签：cocoa, cocoa-bindings, nsarraycontroller

我有一个`NSTableView`，并且我使用 Interface Builder 将其**Content**绑定到子类的实例`NSArrayController`。我将**控制器密钥**设置为`arrangedObjects`.

到目前为止一切顺利：如果我只是将一个字符串数组加载到我的`NSArrayController`（使用`addObjects)`并将**模型键路径**留空，这些字符串将显示在表中。

但是，如果我将一个字典数组添加到 my`NSArrayController`中，这样每个字典都有一个`name`属性，并且我将**Model Key Path**设置为`name`，那么该表只会显示整个`arrangedObjects`数组*n*次的字符串化版本，其中*n*是数组的长度. 实际上，无论**Model Key Path**是否设置为`name`、`foo`或空白，都会发生这种情况。

我只想在`NSTableView`中显示`name`每个字典的属性`arrangedObjects`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:58:39.847

想通了：除了绑定上述`NSTableView`的**Content**（结果证明是不相关的）之外，我还绑定了相应`NSTableColumn`的**Value**以拥有控制器`arrangedObjects`，没有**Model Key Path**。设置它以`name`使一切正常。

# asp.net - 单点登录无法在一个 ASP.NET 上运行

> ID：10177089
> 
> 赞同：1
> 
> 时间：2012-04-16T15:28:52.337
> 
> 标签：asp.net, single-sign-on

我在几个公司的 ASP.NET Web 应用程序中设置了 SSO。他们都工作得很好，期待一个。这个应用程序是托管在 ASP.NET 中的 Silverlight 应用程序。这个应用程序也是在 VS11 中编辑的，而不是像其他站点一样在 VS2010 中编辑。每次我尝试访问此站点时，它都会提示输入密码。每个站点都在同一台服务器上。我在每个 web.config 上都有以下代码

```
 <authorization>
     <deny users ="?" />
     <allow users = "*" />
  </authorization>
  <machineKey  validationKey="935A714D87189B6077B0CC3C1B8AC0A2395F8373AC4037B3798F6AEC589FB0383A4C39640004E6BD7A0C9C0D8A1D5F17DC0525FC57377B5858AFB7AE640BF724"
                decryptionKey="B4E1A4285F1F96239047514F70386F9BB7A791F6976D32B22AFE7267A7287D54"
                validation="SHA1" decryption="AES" /> 
```

我只是很困惑为什么这个应用程序需要我再次登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:31:47.200

验证您是否可以提供 HTML、图像或空白 .aspx 页面。

如果 Silverlight 应用程序正在访问应用程序池权限之外的本地或网络资源，它将提示。

# xml - 使用 XSLT 删除 XML 中未定义级别的重复条目

> ID：10177099
> 
> 赞同：0
> 
> 时间：2012-04-16T15:29:48.853
> 
> 标签：xml, xslt

我对 XSL Transformation 很陌生，这是问题所在。如果我有这个 xml 文件：

```
 <root> 
        <node id="a">
            <section id="a_1">
               <item id="0">
                    <attributes>
                        <color>Red</color>
                    </attributes>
               </item>
            </section>
            <section id="a_2">
               <item id="0">
                    <attributes>
                        <color>Red</color>
                    </attributes>
               </item>
            </section>            
        </node>

        <node id="b">
            <section id="b_1">
                <user id="b_1a">
                    <attribute>
                        <name>John</name>
                    </attribute>
                </user>

                <user id="b_1b">
                    <attribute></attribute>
                </user>

                <user id="b_1a">
                    <attribute>
                        <name>John</name>    
                    </attribute>
                </user>
            </section>
        </node>
 </root> 
```

我希望输出是这样的：

```
<root> 
        <node id="a">
            <section id="a_1">
               <item id="0">
                    <attributes>
                        <color>Red</color>
                    </attributes>
               </item>
            </section>
            <section id="a_2">
               <item id="0">
                    <attributes>
                        <color>Red</color>
                    </attributes>
               </item>
            </section>            
        </node>

        <node id="b">
            <section id="b_1">
                <user id="b_1a">
                    <attribute>
                        <name>John</name>
                    </attribute>
                </user>

                <user id="b_1b">
                    <attribute></attribute>
                </user>

            </section>
        </node>
 </root> 
```

问题是我不知道这个级别可以走多深，但只要它在同一级别并且有重复，我们就会将其删除。这有可能做到吗。我整天都在尝试解决这个问题，但没有任何线索。任何帮助将不胜感激。

干杯，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:37:00.887

试试这个：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <!--If you want to remove any duplicate element (not just user,
  change the match to: match="*[@id = preceding::*/@id]"-->
  <xsl:template match="user[@id = preceding::user/@id]"/>

</xsl:stylesheet> 
```

另外，我不确定“在同一级别”是什么意思，但如果元素名称也必须匹配，请使用此模板：（注意：此模板在 Saxon 9.3 中有效，但在 Xalan 或 Saxon 6.5 中无效.5.)

```
<xsl:template match="*[@id = preceding::*[name() = name(current())]/@id]"/> 
```

**更新：**这是一个似乎适用于 Xalan 和 Saxon 6.5.5 的模板：

```
 <xsl:template match="*[@id = preceding::*/@id]">
    <xsl:if test="not(@id = preceding::*[name() = name(current())]/@id)">
      <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
    </xsl:if>
  </xsl:template> 
```

# java - Jena NoClassDefFoundError 与 Maven

> ID：10177100
> 
> 赞同：0
> 
> 时间：2012-04-16T15:29:49.060
> 
> 标签：java, maven, noclassdeffounderror, jena

我有一个不久前开发的 Java Maven 项目，但它不再起作用了。它使用父 pom 和另一个 Maven 项目，我认为 Jena 版本已更改，它还使用使用 Jena 的外部库。Maven依赖是：

```
<dependency>
 <groupId>com.hp.hpl.jena</groupId>
 <artifactId>jena</artifactId>
 <version>2.6.4</version>
</dependency> 
```

当我执行我的测试时，我收到以下错误：

*   **java.lang.NoClassDefFoundError：无法初始化类 com.hp.hpl.jena.query.ARQ**
*   **java.lang.NoClassDefFoundError: org/apache/jena/iri/IRIFactory** at org.openjena.riot.system.PrefixMap.add(PrefixMap.java:54) at com.hp.hpl.jena.sparql.util.MappingRegistry.addPrefixMapping (MappingRegistry.java:33) 在 com.hp.hpl.jena.query.ARQ.init(ARQ.java:449) [...]

这些错误不是由我的代码直接引发的，而是由我包含的库引发的。我可以通过降级父 pom 中的 Jena 版本来防止这种情况发生吗？或者我可以在这里做什么？

PS：我现在有一个重现错误的最小代码示例（java.lang.NoClassDefFoundError: org/apache/jena/iri/IRIFactory）：

```
import org.junit.Test;
import com.hp.hpl.jena.query.ARQ;

public class DependencyTest
{
    @Test
    public void testARQ()
    {
        ARQ a = new ARQ();      
    }   
} 
```

我猜它来自这种依赖：

```
<dependency>
  <groupId>org.apache.jena</groupId>
  <artifactId>jena-arq</artifactId>
  <version>2.9.1-incubating-SNAPSHOT</version>
</dependency> 
```

我知道可能有工厂而不是构造函数，但我想这仍然表明问题出在哪里。

PS：我注意到我有依赖项“jena”、“arq”和“jena-arq”：

```
<dependency>
 <groupId>com.hp.hpl.jena</groupId>
 <artifactId>arq</artifactId>
 <version>2.8.8</version>
</dependency>

<dependency>
 <groupId>org.apache.jena</groupId>
 <artifactId>jena-arq</artifactId>
 <version>2.9.1-incubating-SNAPSHOT</version>
</dependency>

 dependency>
 <groupId>com.hp.hpl.jena</groupId>
 <artifactId>jena</artifactId>
 <version>2.6.4</version>
</dependency> 
```

所以我想也许我有太多重叠的依赖关系并注释掉了“jena”和“arq”。但我仍然得到错误

```
java.lang.NoClassDefFoundError: Could not initialize class com.hp.hpl.jena.query.ARQ
    at com.hp.hpl.jena.sparql.engine.http.QueryEngineHTTP.<init> [...] 
```

我还尝试强制使用非快照版本 2.9.0-incubating，但是在使用和不使用“jena”和“arq”依赖项的情况下，我仍然得到 NoClassDefFoundError。

PP:

即使我使用以下依赖项，我仍然会遇到相同的错误：

```
 <dependency>
  <groupId>org.apache.jena</groupId>
  <artifactId>jena-arq</artifactId>
 <version>2.9.0-incubating</version>
</dependency>

<dependency>
  <groupId>org.apache.jena</groupId>
  <artifactId>jena-core</artifactId>
 <version>2.7.0-incubating</version>
</dependency>

<dependency>
  <groupId>org.apache.jena</groupId>
  <artifactId>jena-iri</artifactId>
 <version>2.7.0-incubating</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:10:57.620

您可以使用 Maven Central 搜索应用程序搜索缺少的类

*   [http://search.maven.org/#search|ga|1|fc%3A%22com.hp.hpl.jena.query.ARQ%22](http://search.maven.org/#search|ga|1|fc%3A%22com.hp.hpl.jena.query.ARQ%22)

它表明您似乎缺少的依赖项是：

```
<dependency>
    <groupId>com.hp.hpl.jena</groupId>
    <artifactId>arq</artifactId>
    <version>2.6.0</version>
</dependency> 
```

似乎不是 2.6.4 版本，但最好建议您使用更现代的版本（该项目最近捐赠给 apache）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:49:45.720

使用 Apache Jena 和 Maven 的说明如下：

[incubator.apache.org/jena/download/maven.html](http://incubator.apache.org/jena/download/maven.html)

将ARQ 2.9.0 指定为项目中的依赖项`pom.xml`将引入您需要的其他 Jena 组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:36:31.473

我终于通过排除作为传递依赖项从某个库引入的“jena”-Dependency 解决了这个错误。

# java - 在公共无效方法（）内的for循环中创建新线程

> ID：10177101
> 
> 赞同：2
> 
> 时间：2012-04-16T15:29:51.620
> 
> 标签：java, multithreading, thread-safety, ping, void

我有一个 ping IP 地址的类。要开始 ping，我有公共 vod run() 方法来开始 ping。问题是我想同时 ping 更多的 IP 地址（对于每个 IP 地址我需要新的线程）。那么如何在 for 循环中创建新线程。这是我的 ping 类的代码：

```
public void run()
    {
    if (dbConnection.ConnectToDB())
    {           
        for (;GateWayKey<=GateWayKeyStop;GateWayKey++)
        {
            if(stop || this.isInterrupted()){
                return;
            }
            ip="192.168."+GateWayKey+".1";
            InetAddress address;
            try {
                address = InetAddress.getByName(ip);
                try {

                    if (address.isReachable(PingTime))
                    {

                        //System.out.println("Pronaden GateWay: "+ip)
                    //  labele.IP
                        sql="INSERT INTO `iptables` (`IP` , `COMPUTER_NAME` , `GATEWAY_KEY`) VALUES ('"+ip+"', '"+address.getHostName().toString()+"', '"+GateWayKey+"');";

                        framedocs.WriteMonitorData (ip, address.getHostName().toString(),"2000","DA",dbConnection.WriteToDB(sql));
                        for (;SubNetKey<=SubNetKeyStop;SubNetKey++)
                        {
                            if(stop || this.isInterrupted()){
                            return;
                            }
                            InetAddress addressIps = InetAddress.getByName("192.168."+GateWayKey+"."+SubNetKey);
                            System.out.println("Provjeravam IP: "+addressIps);
                            if (addressIps.isReachable(PingTime))
                            {
                                ip="192.168."+GateWayKey+"."+SubNetKey;
                                System.out.println("Pronaden IP: "+ip);
                                sql="INSERT INTO `iptables` (`IP` , `COMPUTER_NAME` , `GATEWAY_KEY`) VALUES ('"+ip+"', '"+addressIps.getHostName().toString()+"', '"+GateWayKey+"');";
                                framedocs.WriteMonitorData (ip, address.getHostName().toString(),"2000","DA",dbConnection.WriteToDB(sql));                          
                            }
                            else
                            {
                                framedocs.WriteMonitorData (addressIps.toString(), "N/A","2000","NE","N/A");
                            }

                        }
                    }
                    else
                    {
                            framedocs.WriteMonitorData (ip, "N/A","2000","NE","N/A");
                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    framedocs.WriteMonitorData (ip, "N/A","2000",e.getMessage(),"N/A");
                }
            } catch (UnknownHostException e) {
                // TODO Auto-generated catch block
                ;
                framedocs.WriteMonitorData (ip, "N/A","2000",e.getMessage(),"N/A");
            }
        }

    }
    else
    {
        framedocs.WriteMonitorData ("MySQL error", "N/A","N/A","N/A","N/A");
    } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:04:56.137

执行此类任务的一般方法是，首先，创建一个类来保存您希望从每个线程获得的结果：

```
final class PingResult {
    public String ip;
    public String hostname;
    //... other things you want go here
} 
```

然后创建一个执行实际工作的可调用对象

```
class PingTask extends Callable<PingResult>{
    private final String gateWayKey, subNetKey;
    //... other parameters you need go here
    public Ping( String gwKey, String snKey /*+ others? */ ){
        // This is just a way to pass parameters to your pinging function
        this.gateWayKey = gwKey;
        this.subNetKey = snKey;
        // ...
    }

    public PingResult call(){

        // Do actual pinging work here

        if ( /* Success */ )
        {
            PingResult result = new PingResult();
            result.ip= /*Fill these in*/;
            result.hostname = /* ... */;
            return result;
        }
        // Otherwise we failed, I'm using null as a failure sentinel
        // (you can come up with something better)
        return null;
    }
} 
```

然后在您的调用代码中，设置一个线程池，提示请求，然后处理结果。

```
// Might need to tweak the # for best performance
final int NUM_THREADS = Runtime.getRuntime.availableProcesses(); 
ExecutorService exec = Executors.newFixedThreadPool( NUM_THREADS );

List<Future<PingResult>> results = new ArrayList<PingResult>();

for(/* ... */){
    results.add( exec.submit( new PingTask( gateway, subnet ) ) );
}

for( Future<PingResult> future : results ){
    PingResult result = future.get();

    // Process the result here (this is where you insert into the DB)
}

exec.shutdown(); // VERY IMPORTANT. If you don't do this the JVM will never stop. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:34:13.430

在主类中创建一个新类并在每次需要创建新线程时在该内部类中执行操作只需启动该内部类的新实例并调用为此目的创建的方法
如果您发现此答案没有用检查我关于多线程的其他答案。

# iphone - 将具有相同 iPhone 应用名称的 iPad 应用上传到 Appstore

> ID：10177106
> 
> 赞同：1
> 
> 时间：2012-04-16T15:30:15.957
> 
> 标签：iphone, ipad, app-store

伙计们。我在 AppStore 上有一个 iPhone 应用程序。我打算将 iPad 版本（非通用）上传到 Appstore。我应该创建一个新的应用程序 ID 吗？我想使用相同的应用名称。但我无法在 iTunes Connect 上创建具有相同应用名称的新应用。帮我。欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:36:00.997

iTunes connect 中给出的应用程序名称必须是唯一的！然后`CFBundleDisplay`（图标下的名称）名称可以多次存在。

你将需要罚款另一个名字或做“通用”。

通常人们在 iPad 应用程序的标准名称后添加“HD”。示例“[AppName] HD”

# android - 在 RadioButton 中居中两行文本时出现问题

> ID：10177107
> 
> 赞同：1
> 
> 时间：2012-04-16T15:30:16.207
> 
> 标签：android, radio-button

我有一个，里面`RadioGroup`有几个`RadioButtons`。当 RadioButton 中的文本有两行时，我的 RadioButton 会出现不需要的上边距。

有人可以帮忙吗？

**更新**

我尝试将 RadioButtons 的填充设置为 0，我还尝试使用 LinearLayout 和 Buttons。没有任何作用...

![在此处输入图像描述](../Images/7b26d6b56f2e8fdd50ef2137c66b1969.png) ![在此处输入图像描述](../Images/25131f8b289043b22bdfc78b02683414.png)

```
<RadioGroup
    android:id="@+id/filter_bar"
    android:layout_width="400dp"
    android:layout_height="40dp"
    android:background="@drawable/bg_filter"
    android:checkedButton="@+id/btn_filter_1"
    android:orientation="horizontal">

    <RadioButton
        android:id="@+id/btn_filter_1"
        android:layout_width="80dp"
        android:layout_height="40dp"
        android:background="@drawable/btn_filter"
        android:button="@null"
        android:gravity="center"
        android:text="@string/filter_1"
        android:textColor="#ffffff"
        android:textSize="13sp" />

    <RadioButton
        android:id="@+id/btn_filter_2"
        android:layout_width="80dp"
        android:layout_height="40dp"
        android:background="@drawable/btn_filter"
        android:button="@null"
        android:gravity="center"
        android:text="@string/filter_2"
        android:textColor="#ffffff"
        android:textSize="13sp" />

    <!-- 3 more RadioButtons -->

</RadioGroup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:34:36.137

正如[文档](http://developer.android.com/reference/android/widget/TextView.html#setGravity%28int%29)中所说， SetGravity 指定了当文本小于视图时如何通过视图的 x 轴和/或 y 轴对齐文本。这不是这里的情况。

# c# - 根据值切换类别

> ID：10177109
> 
> 赞同：1
> 
> 时间：2012-04-16T15:30:29.847
> 
> 标签：c#

我有两个共享相同方法的类，我想根据需要在代码中切换它们。如果您查看下面的示例，您会发现代码的相同部分是重复的。CacheFile 和 CacheMemory 类是相同的，我确信这段代码可以收缩并且 CacheFile 和 CacheMemory 类可以切换。

```
 if (_cacheLocation == CacheLocation.File)
    {
        if (!CacheFile.Get(key, out value))
        {
            // Do lookup based on caller's logic.   
            context.Proceed();
            value = context.ReturnValue;
            CacheFile.Add(value, key, _cacheType, _expiry);
        }
    }

    if (_cacheLocation == CacheLocation.Memory)
    {
        if (!CacheMemory.Get(key, out value))
        {
            // Do lookup based on caller's logic.   
            context.Proceed();
            value = context.ReturnValue;
            CacheMemory.Add(value, key, _cacheType, _expiry);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T15:33:37.977

如果您使 CacheLocation 和 Cache Memory 实现一个公共接口，则可以使用该接口而不是单个类。

[http://msdn.microsoft.com/en-us/library/ms173156.aspx](http://msdn.microsoft.com/en-us/library/ms173156.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:34:35.550

使用封装复制行为的类（定义公开此行为的接口）。在执行 CacheLocation.File 和 CacheLocation.Memory 的预期操作的两个类上实现此接口。

然后，您可以使用返回 ICache 的工厂，给定一个 CacheLocation 并且消费者可以使用它，而无需知道它在下面使用哪种实际存储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:37:01.223

您可以定义如下接口，从中继承 CacheFile 和 CacheMemory。

```
public interface ICache
{
   Get();
   Add();
} 
```

它可以减少代码膨胀。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T15:35:21.193

有几种方法可以处理这个问题。如果 CacheMemory 和 CacheFile 相互继承，或者是一个公共基类，您可以声明父类的变量并使用它。或者，如果您不想从另一个（或两者都从公共基础）派生一个，您可以让它们都实现公共接口并使用声明为接口实例的变量。

# powershell - 让powershell“读取”特定文件夹中的所有文件并检查是否为空

> ID：10177119
> 
> 赞同：0
> 
> 时间：2012-04-16T15:30:59.063
> 
> 标签：powershell

我每天都会将一些文件保存到特定文件夹（xls）中。有没有一种方法可以让 powershell 将每个文件收集到一个不同的变量中（可能是 2 个文件，也可能是 5 个），然后查看每个文件中是否有超过 2 行的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:51:59.163

我认为您不一定需要将它们收集到一个变量中，这取决于您找到文件后想要做什么。

基本示例：如果我创建了 3 个名为 Test1.txt、Test2.txt、Test3.txt 的文本文件。仅使用基本的“行 x”来描述行号。一个说Test1.txt的内容是

```
 Line 1
Line 2
Line 3 
```

Test2.txt 停在“第 2 行”，然后 Test3.txt 只有“第 1 行”。在这种情况下可以使用的单线解决方案，它只会输出多于 2 行的名称：

```
 dir *.txt | foreach {if ((Get-Content $_).Count -gt 2) {$_.Name} 
```

此代码的输出为我提供了 Test1.txt。

在您的情况下，您可以`dir`对“*.xls”或您正在使用的任何文件扩展名执行命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T13:02:24.667

这是一段很棒的脚本。我需要添加第二个项目，它也是文件中的最后一行，这就是我完成的方式。再次非常感谢！

**目录 *.log | foreach {if ((Get-Content $ *).Count -gt 1) {$* .Name + ", " +(Get-Content $_)[-1]} }**

# scorm - SCORM - 报告失败

> ID：10177122
> 
> 赞同：0
> 
> 时间：2012-04-16T15:31:12.340
> 
> 标签：scorm, scorm1.2

我正在尝试创建一个非常简单的 SCORM 课程，但如果我在最后一页之前退出，它仍然会说我已经完成了课程。这是为什么？

*   **[我正在构建的简单课程的源文件](http://dl.dropbox.com/u/775928/course-example.zip)**
*   **[SCORM 引擎调试日志](http://cloud.scorm.com/sc/guest/ViewDebugLog?logId=1018569b-84d0-4872-8f00-129449a5ee02&courseTitle=Test)**

我很感激我得到的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:14:56.237

啊，我需要使用 set a `cmi.core.lesson_status`。

现在它工作得很好！

# facebook - facebook fql 应用程序洞察表是否有效？

> ID：10177125
> 
> 赞同：1
> 
> 时间：2012-04-16T15:31:28.440
> 
> 标签：facebook, facebook-fql

我正在运行一些 fql 查询来尝试将洞察数据提取到我自己的表中，以便我可以显示它们。问题是没有返回任何内容 - 这是一个示例查询

```
SELECT metric, value FROM insights WHERE object_id='000' AND metric='application_stream_stories' AND end_time = end_time_date('2012-04-02') AND period=period('day') 
```

这将返回一对空方括号。它甚至不返回具有零值的列名。

如果我做另一个查询 - 这次更改指标 - 它返回一个零值 json 数组

```
SELECT metric, value FROM insights WHERE object_id='000' AND metric='application_active_users' AND end_time = end_time_date('2012-04-02') AND period=period('month') 
```

结果——

```
[{"metric":"application_active_users","value":0}] 
```

我已经尝试使用 php 和 facebook 上的 fql 控制台进行这些查询 - 这个表格是否有效（http://developers.facebook.com/docs/reference/fql/insights/#application_content）我已经循环查看了大多数指标，一无所获在职的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:58:57.510

是的，它有效，请确保您获得`read_insights`许可。如果不这样做，您将得到一个空数组。`application_active_users`不仅需要`read_insights`有效的访问令牌。

> 任何`access_token`对公开可用的`application_active_users`指标有效的

[https://developers.facebook.com/docs/reference/fql/insights/](https://developers.facebook.com/docs/reference/fql/insights/)

# c# - 当批次中的一个被拒绝时缺少推送通知

> ID：10177129
> 
> 赞同：0
> 
> 时间：2012-04-16T15:31:36.190
> 
> 标签：c#, ios, push-notification, apple-push-notifications

我正在使用 C# Windows 服务向 APNs 发送通知。它工作得很好。但是，今天我收到了来自 Apple 的错误 8（无效令牌）。

我添加了处理这种情况的代码（从数据库中删除令牌，以便我不再发送任何通知）。但是，正如 Apple 所说，我正在通过同一个渠道发送一批通知......并且这些通知是在同一个连接上发送的（在他们返回响应之前我不知道它失败了），但我看到其他通知没有被传递。

这是正常的吗？你怎么处理这个？我正在考虑存储所有通知，并在发送完所有通知后等待 5 秒钟……如果 Apple 没有发送任何通知，那一切都好……如果发生任何事情，请检查错误，删除失败的通知并发送剩余的，直到没有收到错误。

这有意义吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:23:13.297

这正是我们最终在[JavaPNS](http://code.google.com/p/javapns/)中所做的。推送通知列表，收到该列表中特定通知的错误响应数据包，库使用相同的列表重新开始发送通知，但从失败后的通知开始。循环直到没有收到错误响应数据包。

这确实意味着，如果您的列表中有多个无效消息，您将一遍又一遍地发送大量通知......但根据经验，这似乎是成功使用 APNS 的唯一方法。

# java - 如何制作一个网络爬虫，访问作为用户查询信息的搜索结果获得的链接？

> ID：10177130
> 
> 赞同：1
> 
> 时间：2012-04-16T15:31:42.233
> 
> 标签：java, web, web-crawler

如何制作一个网络爬虫，访问作为用户查询信息的搜索结果获得的链接？说，如果用户对某个主题提出一些查询，爬虫必须只访问一些顶部链接。谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:35:13.340

Google 的[自定义搜索 API](https://developers.google.com/custom-search/v1/overview)可能是您最好的选择。它是免费的，旨在以编程方式与之交互。

但是，如果您需要与不知名的站点进行交互，或者需要细粒度的控制，我已经使用[HtmlUnit](http://htmlunit.sourceforge.net/)编写了几个爬虫。这有点冗长，但绝对有效。

# c# - 如何解决未设置为对象实例的对象引用。

> ID：10177134
> 
> 赞同：0
> 
> 时间：2012-04-16T15:31:52.240
> 
> 标签：c#, asp.net

由于错误对象引用未设置为对象实例而使我头疼不已。请参阅下面的代码。违规行标有 <!--->>>>>>>

```
string htmlOutput = " ";

    htmlOutput +=  "<h3>employee: " + employee.lastName + ", " + employee.firstName + " (" + thisForm.employeeID + ")</h3>" +
        "<h3>Submitted To: " + thisForm.boss + "</h3>" +

    if (job1.JRN != "" || job1.JRN != "INVALID")
    {
        <!--->>>>>>>htmlOutput += "<hr /><h4>Job 1</h4> " + "<h3>" + database.getjobName(job1.JRN) + " (" + job1.JRN + ")</h3>";
        htmlOutput += "<h3>Date of Last Attendance: " + job1.month + " " + job1.day + ", " + job1.year + "</h3>";
        htmlOutput += "<h3>Pass/Fail: " + job1.passFail + "</h3>";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:35:28.750

使用`String.Format("{0}{1}", obj1, obj2 ?? "")`. 并使用调试器，在这一行设置断点并检查对象，然后添加验证逻辑。也许问题出在`database.getjobName`方法代码中。您始终可以使用[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)。切勿像您的示例中那样使用字符串连接，它非常丑陋且容易出错。

# c# - 通过四舍五入计算折扣且不超出预期

> ID：10177137
> 
> 赞同：2
> 
> 时间：2012-04-16T15:32:00.407
> 
> 标签：c#, loops

这是场景。

我正在编写应用折扣的代码，但遇到了各种各样的麻烦。

让我们假设我的订单有以下内容，作为销售代表，我决定为该订单给客户 23.47 英镑的折扣。

我有 3 个订单项，其中两个花费 150.00 英镑，一个花费 10.00 英镑。订单总价值为 310.00 英镑

因此，我需要计算每个订单项的 %discount（因为外部接口无法处理订单级别的折扣，而只能处理订单项折扣）。此外，外部接口只能处理 Discount% 字段中的一位小数。

逻辑：

1.  我计算订单的总额（折扣前）。价格为 310.00 英镑。
2.  我计算出折扣金额占总订单价值的百分比，即 23.47 英镑 / 310.00 英镑

折扣百分比为 7.570967741935484%。但是，这需要四舍五入到 7.6%。如果我这样做了，那么每个行项目的折扣金额会更高。每个行项目的折扣金额较高。我最终给予的总折扣是 23.56 英镑，比我打算给予的 23.47 英镑多 0.08 英镑。

每个订单项应获得 11.36 英镑、11.36 英镑和 0.76 英镑的折扣，但我最终给出 11.40 英镑、11.40 英镑和 0.76 英镑的折扣。

我需要的是计算出我在四舍五入中为每个行项目获得的“错误”，并补偿可以应用的最低价格项目中的错误，以便折扣价格尽可能接近我打算给（但是，它应该向上取整，从不向下取整）。

在对每个订单项应用折扣时，我是否必须“记住”需要应用的剩余折扣金额？

伪代码如下。

```
iterating through each line item
//first line item where I have given more discount than intended. 4p more. So, the remaining discount is not £12.11 but actually £12.07
//Calculate the discount% for remaining line items, i.e., 
//And, I am confused :-) 
```

这样做的最佳方法是什么？

PS：不确定是否需要在这里。但是，如果不适用于 SE 网站，请随时指出我正确的方向或将其删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:42:28.113

不要四舍五入到 7.6%，使用完整的 7.570967741935484% 计算每个项目的确切（ish）折扣。

这会给你一个分数结果。如有必要，请四舍五入，但无论哪种方式都可以解决您的小数误差。

在您的下一项上，在决定如何四舍五入之前**添加上一项的错误。**

重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:42:55.217

如果您被限制在不超过小数点 1 位的折扣百分比，恐怕并不总是能够实现。

想象以下输入：您只销售一件商品，价格为 1000 英镑，并且您想提供 1 便士的折扣。因此，您要么给予 0.1% 的折扣（导致整个 1 英镑），要么给予 0%（导致根本没有折扣）。

实际上，您可能给予的折扣可以用最小商品价格的 1/1000 表示（从 1 到 1000），可能会加上从第二小的商品价格等的折扣。

所以，有时您无法获得您真正想要的折扣金额——在这种情况下可以做些什么？

一个简单的方法是尝试组合不同的折扣。显然，您可以以 P（其正常价格），999/1000 * P，998/1000 * P，... 0/1000 * P 的价格出售每件商品。因此，您可以尝试为每件商品找到一个系数，即使总金额尽可能接近所需金额。不幸的是，如果购买的商品数量很大，这个简单的想法就会太慢。

（顺便说一句：如果我们不局限于正折扣，我们实际上可以做以下技巧：找到所有项目价格的最大公约数，并且有了它，我们可以轻松地以 GCD 的精度组成任何价格/1000。）

关于负折扣的注意事项：假设您也*可以*提供负折扣。例如，您可以给予 -1% 的折扣，导致客户为该商品*多支付 1%。*通过这种方式，您可以获得更准确的近似值。示例：如果您有 2 件商品，价格分别为 1000 英镑和 990 英镑，并且您想提供 1 便士的总折扣：您可以通过为第一个商品提供 0.1% 的折扣和为第一个商品提供 -0.1% 的折扣来实现此目的第二项，因此客户为第一项支付 1000 英镑 * 99.9% = 999 英镑，为第二项支付 990 英镑 * 100.1% = 990.99 英镑。总共是 1989.99 英镑，比 1990 英镑便宜 1 便士。仅仅通过积极的折扣是无法达到如此精确的，你明白吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-13T16:16:46.233

如果您对每一行应用折扣百分比，则由于四舍五入，您无法将相同的折扣百分比应用于总价并获得相同的答案。您需要将每行的折扣价格相加才能得出总数。

我已经在许多系统上多次看到这种情况，只有一种方法可以让它工作。每条线都有正确的价格/价值，所以你需要总结它们。

# php - 在 CakePHP 中使用多个数据库表

> ID：10177138
> 
> 赞同：0
> 
> 时间：2012-04-16T15:32:04.167
> 
> 标签：php, cakephp, cakephp-2.1, cakephp-model

在我的应用程序中，我有许多控制器常用的方法。起初我将它们复制到控制器，然后我发现我必须将它们放在 AppController 中。所以我。通过“$this->commonmethod”从派生控制器中访问这些方法

我放入 AppController 的方法会创建不同类型的数据，因此我需要将它们放入数据库中的 4-5 个不同的表中。大多数表之间没有关系。

但是我的大多数控制器都会使用这些表来为它们获取相关数据。

（我查看了食谱中的示例，有关于博客、类别和标签的示例。表格之间有关系）

1.  我应该将我的通用控制器代码放入插件或组件中吗？或者决策标准是什么？
2.  是否可以使用来自控制器或组件的多个数据库表？
3.  数据源或行为是否适合这种情况。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:38:04.897

最好的方法是（如果可能的话）**重新设计数据库**，因为在 cakephp 中一个好的数据库设计可以解决你一半的问题。如果这是不可能的，那么第二个是使用**组件**，使用这个组件你可以使用多个数据库表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:43:51.170

很难说最好的方法是什么，因为我们对数据库结构、控制器方法的作用以及它们的使用方式知之甚少。

但是您的一个问题非常简单：

> 是否可以使用来自控制器或组件的多个数据库表？

是的，这是可能的。只需为每个表创建一个模型（`public $useTable = 'tablename`如果 cake 无法从您的模型名称中自动检测到表名称，请使用）。然后，在`AppController`（考虑到你的代码会留在那里），使用这个：

```
public $uses = array('List', 'all', 'models', 'you', 'need'); 
```

# java - 如何根据自定义 java 对象而不是原始类型从列表中删除重复项？

> ID：10177139
> 
> 赞同：15
> 
> 时间：2012-04-16T15:32:05.020
> 
> 标签：java, list, arraylist, set

[在我发布这个问题之前，我发现这里](https://stackoverflow.com/questions/203984/how-do-i-remove-repeated-elements-from-arraylist)发布了类似的问题。但答案是基于一个字符串。但是，我在这里有不同的情况。我不是要删除字符串，而是要删除另一个名为 AwardYearSource 的对象。这个类有一个叫做 year 的 int 属性。所以我想根据年份删除重复项。即，如果不止一次提到 2010 年，我想删除该 AwardYearSource 对象。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-16T15:36:23.260

根据字段删除元素的最简单方法如下（保留顺序）：

```
Map<Integer, AwardYearSource> map = new LinkedHashMap<>();
for (AwardYearSource ays : list) {
  map.put(ays.getYear(), ays);
}
list.clear();
list.addAll(map.values()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:57:14.197

相当简单。尽管地图版本让我有些烦恼（并不是我怀疑它们会起作用，但不知何故，这似乎有点矫枉过正——尽管这个版本在这方面不一定更好）。
答案是功能性的，并且是线程安全的（假设`AwardYearSource`是不可变的）。

```
public static List<AwardYearSource> removeDuplicateYears(
                                          final Collection<AwardYearSource> awards) {
    final ArrayList<AwardYearSource> input = new ArrayList<AwardYearSource>(awards);
    // If there's only one element (or none), guaranteed unique.
    if (input.size() <= 1) {
        return input;
    }
    final HashSet<Integer> years = new HashSet<Integer>(input.size(), 1);
    final Iterator<AwardYearSource> iter = input.iterator();
    while(iter.hasNext()) {
        final AwardYearSource award = iter.next();
        final Integer year = award.getYear();
        if (years.contains(year)) {
            iter.remove();
        } else {
            years.add(year);
        }
    }
    return input;       

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:44:39.033

另一种方法是覆盖`hashCode()`和`equals(Object obj)`为您的对象。由于它只有一个字段用于确定相等性，因此非常简单。就像是：

```
public boolean equals(Object obj) {
  if (obj == null || !(obj instanceof AwardYearSource)) {
    return false;
  }
  return (this.year == ((AwardYearSource)obj).year);
}
public int hashCode() {
  return this.year;
} 
```

然后，您可以将所有对象粘贴到 a`Set`中以删除重复项：

```
Set<AwardYearSource> set = new Set<AwardYearSource>();

set.add(new AwardYearSource(2011));
set.add(new AwardYearSource(2012));
set.add(new AwardYearSource(2011));

for (AwardYearSource aws : set) {
  System.out.println(aws.year);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T15:37:56.867

创建一个 HashMap 对象，其中 int 作为键类型，您的类作为值类型。然后遍历列表并将每个元素插入到地图中：

```
mymap.put(source.year, source); 
```

然后从原始列表中删除所有元素并遍历地图并将每个元素插入到列表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T15:36:33.180

您可以使用地图并以年份为键存储对象：

```
Map<Integer, AwardYearSource> map = new HashMap<Integer, AwardYearSource>();
map.put(someAwardYearSource1.getYear(), someAwardYearSource1);
map.put(someAwardYearSource2.getYear(), someAwardYearSource2);

etc. 
```

最后，地图将按年份包含唯一值，您可以使用 values 方法调用它：

```
Collection<AwardYearSource> noDups = map.values(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T15:47:54.167

如果您的 AwardYearSource 类覆盖了 equals 和 hashcode 方法（Eclipse 可以生成两者），那么您可以将它们添加到 Set。该集合将不包含任何重复项。

```
public class AwardYearSource
{
    private final int year;

    public AwardYearSource(int year)
    {
        this.year = year;
    }

    @Override
    public int hashCode()
    {
        final int prime = 31;
        int result = 1;
        result = prime * result + year;
        return result;
    }

    @Override
    public boolean equals(Object obj)
    {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        AwardYearSource other = (AwardYearSource) obj;
        if (year != other.year)
            return false;
        return true;
    }

    @Override
    public String toString()
    {
        return String.valueOf(year);
    }

    public static void main(String[] args)
    {
        Set<AwardYearSource> set = new HashSet<AwardYearSource>();
        set.add(new AwardYearSource(2000));
        set.add(new AwardYearSource(2000));
        set.add(new AwardYearSource(2000));
        set.add(new AwardYearSource(2000));

        System.out.println(set);
    }
} 
```

输出为 [2000]。套装中只有一件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-17T18:52:24.777

```
Set<Integer> set = new HashSet<>();
list.removeIf(i -> set.contains(i.getYear()) ? true : !set.add(i.getYear())); 
```

这应该有帮助，在这种情况下，重复是根据某些属性（或属性的组合）来决定的，在这种情况下是年份。希望这可以帮助。

# python - QWebview 的 Dymo 标签打印机？

> ID：10177140
> 
> 赞同：2
> 
> 时间：2012-04-16T15:32:06.820
> 
> 标签：python, qt, printing, qwebview

我正在尝试使用 Dymo 示例页面从基于 Python/Qt 的应用程序中的 QWebview 打印标签。该示例在主流浏览器中运行良好（IE、FF、Chrome 已经过测试）。但是，当在 QWebview 中加载示例页面时，我收到以下错误：

`DYMO.Label.Framework.js line 1: Error: DYMO Label Framework Plugin is not installed`

我不确定为什么它可以在另一个浏览器中正常工作，但在我的应用程序的 Web 视图中却不行。将这些 Dymo 示例加载到 webview 中的正确方法是什么？

这是在主要浏览器中工作的示例页面，在 QWebview 中失败（您需要一台 Dymo 打印机来打印，否则它会加载一个警告，告诉您没有找到打印机）：[http://labelwriter。 com/software/dls/sdk/samples/js/PreviewAndPrintLabel/PreviewAndPrintLabel.html](http://labelwriter.com/software/dls/sdk/samples/js/PreviewAndPrintLabel/PreviewAndPrintLabel.html)

当我在 webview 中加载它时，我什至没有收到警报（这是有道理的，因为在第 1 行发现了上面的错误）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:41:03.920

我与供应商交谈，并被告知这不是他们软件的受支持使用。因此，我没有使用 QWebView，而是使用该`win32com`包通过 Dymo 的 SDK 执行此操作。下面的代码使用 Dymo LabelWriter 打印带有 1 个变量字段的单个标签。

```
from win32com.client import Dispatch

labelCom = Dispatch('Dymo.DymoAddIn')
labelText = Dispatch('Dymo.DymoLabels')
isOpen = labelCom.Open('test.label')
selectPrinter = 'DYMO LabelWriter 450'
labelCom.SelectPrinter(selectPrinter)

labelText.SetField('VAR_TEXT', 'QGJ2148')

labelCom.StartPrintJob()
labelCom.Print(1,False)
labelCom.EndPrintJob() 
```

`StartPrintJob`和`EndPrintJob`包装因为根据`Print`SDK 说明它更快。

# sql - 加入子查询

> ID：10177146
> 
> 赞同：1
> 
> 时间：2012-04-16T15:32:30.573
> 
> 标签：sql, ms-access, join, subquery

我想在其中一个表上连接带有 id 的两列后对两个表执行简单的连接。

第一步：

```
SELECT cars.hhid & cars.vmid
FROM cars 
```

现在我想将此结果与另一个表（table2）进行比较。

新结果应该是 table1 (cars) 中与 table2 中的 id 匹配的每一行。

怎么了？

我的代码：

```
SELECT Cars.* 
FROM (SELECT Cars.hhid & Cars.vmid AS zid
FROM cars) x
JOIN table2 ON table2.id = x.zid; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:06:41.743

从您在问题中所说的内容来看，我根本不明白您为什么需要子查询。

尝试这个：

```
select cars.*
from cars 
inner join table2 on cstr(table2.id) = cars.hhid & cars.vmid 
```

*（测试* `double` *为所有三个字段的数据类型）*

您不需要子查询，因为您可以将“连接的列”直接放入子句中（当然，如果您需要它们，`JOIN`您也可以将它们放入子句中）。`SELECT`

但是，一旦您连接列，Access 似乎将它们视为，`string`因此您无法将它们直接加入. 这就是为什么您需要将 table2 中的列转换为带有.`double``table2`
`CStr()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:30:09.127

尝试

```
SELECT x.* 
FROM (SELECT Cars.hhid & Cars.vmid AS zid
FROM cars) x
INNER JOIN table2 ON table2.id = x.zid; 
```

MS Access 像要指定的连接类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:38:08.450

*** TSQL 的答案，在学习之前是 MS-Access ***

SQL 没有`double`数据类型，因此您需要使用浮点数。

要使用连接运算符，需要使用或`+`将值转换为字符串`CAST``CONVERT`

数据：

```
declare @cars table (hhid float, vmid float)
declare @table2 table (id float)

insert @cars values (1,1),(2,2)
insert @table2 values (11),(22),(12),(21) 
```

询问：

```
SELECT x.* 
FROM (
    SELECT CAST(c.hhid AS nvarchar(20)) + CAST(c.vmid AS nvarchar(20)) AS zid
    FROM @cars c
    ) x
INNER JOIN @table2 t ON t.id = x.zid 
```

*** 尝试 MS-Access ***

这样做效果更好吗，对我来说，您的表格引用似乎有些扭曲

```
SELECT x.* 
FROM (SELECT c.hhid & c.vmid AS zid
FROM cars c) x
JOIN table2 t ON t.id = x.zid; 
```

# javascript - chrome中的Javascript警报

> ID：10177149
> 
> 赞同：2
> 
> 时间：2012-04-16T15:32:34.307
> 
> 标签：javascript, firefox, google-chrome, alert

我有一个警告框，当我在 Firefox 中运行该代码时，无论我在 firefox 上使用什么程序，firefox 都会在打开的其他程序上自动弹出窗口。

但是，这在 Chrome 中不起作用。

是什么赋予了？这会是一个偏好更改，还是有一行代码表示关注此窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:52:44.813

我用了

```
window.blur();
window.focus(); 
```

这解决了我的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:35:07.883

的实现`alert`是特定于浏览器的。不幸的是，没有一行 javascript 代码可以改变这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:40:39.017

如果您想拥有可定制的（并且在每个浏览器中都一样）警报窗口，请使用[jquery UI](http://jqueryui.com/demos/dialog/#modal)。

注意：它将在实际页面上，而不是在（其他）窗口上。

# mysql - mysql if 在 where 子句中

> ID：10177152
> 
> 赞同：0
> 
> 时间：2012-04-16T15:32:51.553
> 
> 标签：mysql

这可能很容易，只是我很厚-我试图阻止保留的物品在记录中被提取，但只有当库存大于 0 时，我不知道该怎么做，除非

```
"....WHERE blah blah AND (reserved = 0 OR reserved < ".(time()-1200).")" 
```

所以我正在查看的列称为“股票”列，如果该值为 0，那么我确实想显示结果

所以我想我能做到

```
if(stock<>0,reserved = 0 OR reserved < ".(time()-1200.") 
```

但是那个错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:37:14.973

你不能在 if() 子句中做这样的赋值。格式是

```
if (condition, true_value, false_value) 
```

可能这样的事情会做：

```
if (stock <> 0, 0, time()-1200) AS reserved 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:41:15.727

我可能误解了，但不会：

```
"WHERE blah blah AND (stock = 0 OR reserved = 0 OR reserved < ".(time()-1200).")))" 
```

做你需要的？

# c# - 如何不连续地从服务器下载数据？

> ID：10177156
> 
> 赞同：0
> 
> 时间：2012-04-16T15:33:03.103
> 
> 标签：c#, windows-phone-7

我需要从服务器下载一个大数据，因为数据太大，我一次不能下载，你知道吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:41:23.313

我能想到的唯一合乎逻辑的方法是将数据预先排列成块，以便使用 index.html 进行下载。索引随着接收到的块的数量而增加，因此当服务器发送文件时，它知道它可以跳过`(chunkCount * chunkSize)`字节流并开始发送下一个`chunkSize`字节。

当然，这意味着相当多的请求，所以 YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:50:50.293

如果服务器支持，您可以使用 HTTP 字节范围来请求文件的特定部分。

本页描述 HTTP 字节范围请求： [http ://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.1)

以下代码创建一个请求，该请求将要求跳过前 100 个字节，但返回文件的其余部分：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(@"http://example.com/somelargefile");
request.Headers.Add("Range", "bytes=100-"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:38:43.623

MSDN 上有一个[后台传输服务](http://msdn.microsoft.com/en-us/library/hh202959%28v=vs.92%29.aspx)代码示例可能会有所帮助。我从未使用过它，但该示例可能会给您一个起点。

# sql-server - SSRS 报告上的 SQL Server 索引重组伪影

> ID：10177160
> 
> 赞同：1
> 
> 时间：2012-04-16T15:33:21.827
> 
> 标签：sql-server, reporting-services, indexing

我一直在重新组织 EAM 软件（Rimses）使用的表的索引。它大大减少了我们在 SSRS 上的报告的处理时间/资源使用情况。这是我的意图。但是我是否也有可能从报告中得到其他“结果”？

背景信息：其中一个主表的碎片率为 99%，我进行了重组，因为我认为索引的重组/重建应该经常进行。我是一名学生！

感谢您的时间！杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:49:37.570

> 但是我是否也有可能从报告中得到其他“结果”

不会。重组/重建索引只是检查表中的实际数据并确保索引匹配，并修复索引结构以保持一致。想想一副纸牌，你会以随机顺序获得这些纸牌。无论它们是否属于它们，它们都会不断地插入堆栈的顶部。您只是将牌重新洗牌以符合正确的逻辑顺序。

此处更改数据的唯一可能性是您以前的索引是否有某种错误或损坏。

当您删除记录时，它也会在甲板上留下孔，这可能会导致碎片。

> 我认为应该经常进行索引的重组/重建

情况不一定如此。如果表/索引是大量写入，那么定期检查碎片是个好主意。

如果数据没有改变，或者你有一个自动递增的键，或者你没有做很多插入，那么你不太可能有碎片。这没有硬性规定。您会发现大多数 SQL 问题的答案是`It depends.`

# java - 在 Checkstyle 中，是否可以在一个值处发出警告而在另一个值处发出错误？

> ID：10177161
> 
> 赞同：0
> 
> 时间：2012-04-16T15:33:24.100
> 
> 标签：java, checkstyle

我想将 checkstyle 配置为对某些规则进行 2 级验证。例如，对于“最大行长”规则，如果行长超过 120 个字符，我希望严重性为，但如果行长超过 160 个字符 ，则`warn`升级为严重性。`error`

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:04:36.263

在肖恩评论的同时找到了答案。只需添加第二个声明。忘了你能做到。在 Eclipse 中，使用 eclipse-cs，您可以`Add...->`多次单独配置一个模块并分别配置它们。

# html - 使用 xpath 查找具有特定内容的跨度

> ID：10177169
> 
> 赞同：17
> 
> 时间：2012-04-16T15:33:44.177
> 
> 标签：html, xml, xpath, selenium

我有一些像这样的跨度：

```
<span> 
  <span>foobar</span>  
  <span>thisisatest</span> 
</span> 
```

我正在尝试使用 xpath 来查找其中包含“thisisatest”的跨度。

我试过这个：

`span[text()='thisisatest']`

它似乎没有工作。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-16T15:48:50.993

您`//`在 XPath 的开头丢失了。

*   一个斜线表示“作为根节点子节点的跨度”。
*   两个斜线的意思是“用该文本找到我的任何跨度”。

`//span[text()='thisisatest']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:36:21.493

你可以试试这个：

```
span[span= "thisisatest"] 
```

`<span>`至少包含一个`<span>`值为 thisistest 的子元素的所有元素。

希望能帮助到你！

# smartgwt - SmartGWT DateTimeItem：接受 12 小时格式

> ID：10177171
> 
> 赞同：0
> 
> 时间：2012-04-16T15:33:59.547
> 
> 标签：smartgwt

我正在使用 SmartGWT DateTimeItem 组件。默认情况下，组件接受 24 小时格式的时间（即 11:15、15:30）。我想知道如何配置组件以接受 12 小时格式的时间（即上午 11:15，下午 3:30）？

技术规格：

*   智能GWT v3.0
*   火狐 11
*   即 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:48:51.080

```
DateTimeItem.setTimeFormatter(TimeDisplayFormat.TOPADDEDTIME); 
```

没有测试，但它看起来像你想要的！

# objective-c - 拉动刷新

> ID：10177177
> 
> 赞同：0
> 
> 时间：2012-04-16T15:34:18.623
> 
> 标签：objective-c, ios5, pull-to-refresh

我的代码始终使用“标准”UITableview，但现在我在视图控制器中植入了 Tableview。我的代码不起作用（拉刷新）有人知道为什么吗？

在普通的 UITableview 中它可以工作，但是嗯，也许我错过了一些东西，因为它是 ViewController 中的 tableview。

我正在使用; [https://github.com/enormego/EGOTableViewPullRefresh](https://github.com/enormego/EGOTableViewPullRefresh)

```
- (void)reloadTableViewDataSource{

    //  should be calling your tableviews data source model to reload
    //  put here just for demo
    _reloading = YES;

}

- (void)doneLoadingTableViewData{

    //  model should call this when its done loading
    _reloading = NO;
    [_refreshHeaderView egoRefreshScrollViewDataSourceDidFinishedLoading:self.tableView];

} 
```

我使用了 NSlog，它同时调用了这两个函数，但它没有显示蓝色的“拉动刷新”栏，加载后也不会向上滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:48:42.320

请参考下面的链接。

[https://github.com/shiki/STableViewController](https://github.com/shiki/STableViewController)

[https://github.com/vincentmac/PullToRefresh](https://github.com/vincentmac/PullToRefresh)

[https://github.com/thermogl/PullToRefreshTransform](https://github.com/thermogl/PullToRefreshTransform)

[https://github.com/leah/PullToRefresh](https://github.com/leah/PullToRefresh)

[https://github.com/pothibo/PHRefreshTriggerView](https://github.com/pothibo/PHRefreshTriggerView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:37:42.743

为什么不转向已经编码的、稳定的、众所周知的外部代码呢？看看[EGOTableViewPullRefresh](https://github.com/enormego/EGOTableViewPullRefresh)。

它可能会解决您的问题。

# php - 如何在 PHP / MySQL 中对某个日期范围内的行求和

> ID：10177180
> 
> 赞同：0
> 
> 时间：2012-04-16T15:34:54.637
> 
> 标签：php, mysql

我有一个数据库，其中包含几行数据，如下所示：

```
Username: BillyBob
TotalPrice: 19.99
CreationDate: 2012-02-20 14:30:58 
```

我需要在 PHP 中执行一个类似这样的 SQL 语句。

```
$sql = mysql_query(" Add up Total Price Where Username='BillyBob' Where CreationDate is within this month "); 
```

我怎么会做那样的事情。我也想做一些事情，比如过去 30 天、上周、特定日期范围等。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:50:23.380

只需要添加对错误和输入的处理（给定月份的总回报），您只需要使用您感兴趣的任何时期来更改 monthStart 和 monthEnd 逻辑/值。

```
//Parameters for query
$month = '2012-02';
$username = 'BillyBob';

//Make date start and end
$monthStart = $month.'-01 00:00:00';
$monthEnd = $month.'-'.date('t', strtotime($monthStart)).' 23:59:59';

//Make the query
$query = sprintf("
    SELECT SUM(TotalPrice)
    WHERE Username = '%s'
    AND CreationDate >= '%s'
    AND CreationDate <= '%s'",
    mysql_real_escape_string($username),
    mysql_real_escape_string($monthStart),
    mysql_real_escape_string($monthEnd)
);

$result = mysql_query($query);

if ($result) {
    if (mysql_num_rows($result) == 1) {
        //Output / process number e.g.:
        list($total) = mysql_fetch_num($result);
        echo 'Total for '.$username.' from '.date('l, jS F Y', strtotime($monthStart)).' to '.date('l, jS F Y', strtotime($monthEnd)).' = &pound;'.number_format($total, 2);
    } else {
        //error handling
    }
} else {
    //error handling
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:40:01.683

[http://www.tizag.com/mysqlTutorial/mysqlsum.php](http://www.tizag.com/mysqlTutorial/mysqlsum.php)

你可以使用mysql总和。请参阅此处并应用于您的数据库结构

可能类似于 Select *,sum(totalPrice) from tbl where Username='BillyBob' and CreationDate <'2012-02-20 14:30:58'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:40:04.983

我会尝试这样的事情（未经测试）：

```
$sql = mysql_query("SELECT SUM(TotalPrice) FROM myTable WHERE Username = 'BillyBob' AND CreationDate BETWEEN CURDATE() - INTERVAL 30 DAY AND CURDATE()"); 
```

# java - 添加滚动到文本区域

> ID：10177183
> 
> 赞同：31
> 
> 时间：2012-04-16T15:35:00.147
> 
> 标签：java, swing, jpanel, jscrollpane, jtextarea

如何将滚动条添加到我的文本区域。我已经尝试过使用此代码，但它不起作用。

```
middlePanel=new JPanel();
middlePanel.setBorder(new TitledBorder(new EtchedBorder(), "Display Area"));

// create the middle panel components
display = new JTextArea(16, 58);
display.setEditable(false); // set textArea non-editable
scroll = new JScrollPane(display);
scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);

//Add Textarea in to middle panel
middlePanel.add(scroll);
middlePanel.add(display); 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-16T15:44:45.473

在此处将 JTextArea 添加到 JScrollPane 后：

```
scroll = new JScrollPane(display); 
```

您不需要像您一样将其再次添加到其他容器中：

```
middlePanel.add(display); 
```

只需删除最后一行代码，它就会正常工作。像这样：

```
 middlePanel=new JPanel();
    middlePanel.setBorder(new TitledBorder(new EtchedBorder(), "Display Area"));

    // create the middle panel components

    display = new JTextArea(16, 58);
    display.setEditable(false); // set textArea non-editable
    scroll = new JScrollPane(display);
    scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);

    //Add Textarea in to middle panel
    middlePanel.add(scroll); 
```

JScrollPane 只是另一个容器，它在需要时在组件周围放置滚动条，并且还具有自己的布局。当您想将任何内容包装到滚动中时，您只需将其传递给 JScrollPane 构造函数即可：

```
new JScrollPane( myComponent ) 
```

或像这样设置视图：

```
JScrollPane pane = new JScrollPane ();
pane.getViewport ().setView ( myComponent ); 
```

**额外的：**

这是完全有效的示例，因为您仍然无法正常工作：

```
public static void main ( String[] args )
{
    JPanel middlePanel = new JPanel ();
    middlePanel.setBorder ( new TitledBorder ( new EtchedBorder (), "Display Area" ) );

    // create the middle panel components

    JTextArea display = new JTextArea ( 16, 58 );
    display.setEditable ( false ); // set textArea non-editable
    JScrollPane scroll = new JScrollPane ( display );
    scroll.setVerticalScrollBarPolicy ( ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS );

    //Add Textarea in to middle panel
    middlePanel.add ( scroll );

    // My code
    JFrame frame = new JFrame ();
    frame.add ( middlePanel );
    frame.pack ();
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );
} 
```

这就是你得到的： ![在此处输入图像描述](../Images/5322bbfcfddbd1516ea86e8850e31298.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-12T17:59:39.147

我天真的假设是滚动窗格的大小将自动确定......

唯一对我有用的解决方案是***明确地看到 JScrollPane 的界限***：

```
import javax.swing.*;

public class MyFrame extends JFrame {

    public MyFrame()
    {
        setBounds(100, 100, 491, 310);
        getContentPane().setLayout(null);

        JTextArea textField = new JTextArea();
        textField.setEditable(false);

        String str = "";
        for (int i = 0; i < 50; ++i)
            str += "Some text\n";
        textField.setText(str);

        JScrollPane scroll = new JScrollPane(textField);
        scroll.setBounds(10, 11, 455, 249);                     // <-- THIS

        getContentPane().add(scroll);
        setLocationRelativeTo ( null );
    }
} 
```

也许它会帮助一些未来的访客:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-20T22:46:25.727

尝试将这两行添加到您的代码中。我希望它会奏效。它对我有用:)

```
display.setLineWrap(true);
display.setWrapStyleWord(true); 
```

输出图片如下所示

[![在此处输入图像描述](../Images/be38e8969639285e733b4cd71f8e967b.png)](https://i.stack.imgur.com/FZHHY.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-26T03:40:54.110

使用 java swing 实现滚动条的最简单方法如下：

1.  导航到设计视图
2.  右键单击文本区域
3.  使用 JScrollPane 选择环绕

# asp.net - 从当前页面asp.net的url检查并获取参数

> ID：10177185
> 
> 赞同：0
> 
> 时间：2012-04-16T15:35:19.873
> 
> 标签：asp.net, .net, httpwebrequest

我试图从请求页面的查询字符串中获取参数“id”，如下所示

```
If Request.QueryString IsNot Nothing AndAlso _
            Request.QueryString.GetKey("id") IsNot Nothing Then
            DeleteVehicle(Request.QueryString.GetKey("id"))
 End If 
```

但我得到这个错误

```
System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

Line 16:         If Request.QueryString IsNot Nothing AndAlso _
Line 17:             Request.QueryString.GetKey("id") IsNot Nothing Then

Source File: G:\projects_backup\Toaab\Toaa\admin\vehicle\view.aspx.vb    Line: 16 
```

请你帮帮我

编辑

我在 page_load 事件中调用它

通过超链接调用同一页面（具有自动生成的链接）

我也将代码更改为

```
If Request.QueryString("id") IsNot Nothing OrElse Request.QueryString("id") IsNot String.Empty Then
 DeleteVehicle(Request.QueryString("id").ToString)
End If 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T15:52:52.267

要查看 QueryString 中是否存在值，请检查该值是否等于空字符串而不是 null：

试试这个：

```
If String.IsNullOrEmpty(Request.QueryString("id")) = False Then
    DeleteVehicle(Request.QueryString("id"))
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:59:52.217

1.  没有在函数`C#/VB.Net`中提供字符串参数的重载。`GetKey`
2.  如果您检查 的所有事件 `Page Life Cycle`，则`Request.QueryString`值永远不会为空（此外，它包含一些非空值）。
3.  尝试更改您的代码，如下所示。

* * *

```
If Request.QueryString("id") IsNot Nothing 
                 AndAlso String.IsNullOrEmpty(Request.QueryString("id")) = False Then
    DeleteVehicle(Request.QueryString("id").ToString)
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-18T23:33:36.890

我建议使用 Params 集合。它适用于 Querystring 以及基于表单的参数。您可以像这样对“id”进行简单的测试。

```
Request.Params.AllKeys.Contains("id") 
```

# ruby-on-rails - 来自蓝图 css 的资产预编译错误 - ActionView::Template::Error（未预编译蓝图/screen.css） - 内部服务器错误 500

> ID：10177186
> 
> 赞同：0
> 
> 时间：2012-04-16T15:35:20.583
> 
> 标签：ruby-on-rails, deployment, asset-pipeline, blueprint-css

我正在尝试部署一个 Rails 应用程序，但我遇到了资产预编译错误。根据生产日志，错误是由名为 screen.css 的“蓝图”css 脚本引起的（如您在下面的错误输出中所见）。然而，根据生产日志，该资产实际上是经过预编译的。我尝试在 application.rb 和 config/environments/production.rb 文件中显式添加 screen.css 和 print.css 到预编译数组，如下所示

```
config.assets.precompile = %w(screen.css print.css) 
```

但无济于事。我还尝试在本地预编译我的资产并将整个内容推送到服务器。我已经尝试了这里列出的所有建议：[blueprint/screen.css 没有预编译](https://stackoverflow.com/questions/7443536/blueprint-screen-css-isnt-precompiled) ，这里： [blueprint css rails 3.1 help](https://stackoverflow.com/questions/7300532/blueprint-css-rails-3-1-help) ，同样的问题在这里仍未解决：[Ruby on Rails 3.2 编译的资产不起作用](https://stackoverflow.com/questions/9105027/ruby-on-rails-3-2-compiled-assets-are-not-working)

我不知道接下来要尝试什么来解决此错误。任何帮助将不胜感激！下面是日志输出，以及我的部署文件、cap 文件和 application.rb 文件。提前感谢您提出的任何建议！

这是部署后日志文件的一些输出，您可以在其中看到 screen.css 已预编译。错误输出如下：

```
Compiled application.js  (5ms)  (pid 16431)
Compiled jquery.js  (2ms)  (pid 16431)
Compiled jquery_ujs.js  (0ms)  (pid 16431)
Compiled microposts.js  (94ms)  (pid 16431)
Compiled pages.js  (1ms)  (pid 16431)
Compiled sessions.js  (0ms)  (pid 16431)
Compiled users.js  (0ms)  (pid 16431)
Compiled application.css  (17ms)  (pid 16431)
Compiled blueprint/ie.css  (0ms)  (pid 16431)
Compiled blueprint/plugins/buttons/screen.css  (0ms)  (pid 16431)
Compiled blueprint/plugins/fancy-type/screen.css  (0ms)  (pid 16431)
Compiled blueprint/plugins/link-icons/screen.css  (0ms)  (pid 16431)
Compiled blueprint/plugins/rtl/screen.css  (0ms)  (pid 16431)
Compiled blueprint/print.css  (0ms)  (pid 16431)
Compiled blueprint/screen.css  (0ms)  (pid 16431)
Compiled blueprint/src/forms.css  (0ms)  (pid 16431)
Compiled blueprint/src/grid.css  (0ms)  (pid 16431)
Compiled blueprint/src/ie.css  (0ms)  (pid 16431)
Compiled blueprint/src/print.css  (0ms)  (pid 16431)
Compiled blueprint/src/reset.css  (0ms)  (pid 16431)
Compiled blueprint/src/typography.css  (0ms)  (pid 16431)
Compiled custom.css  (0ms)  (pid 16431)
Compiled microposts.css  (13ms)  (pid 16431)
Compiled pages.css  (1ms)  (pid 16431)
Compiled scaffolds.css  (15ms)  (pid 16431)
Compiled sessions.css  (1ms)  (pid 16431)
Compiled users.css  (1ms)  (pid 16431)

Started GET "/" for 12.13.14.15 at 2012-04-05 14:15:50 -0700
Processing by PagesController#home as HTML
Rendered pages/home.html.erb within layouts/application (1.1ms)
Rendered layouts/_stylesheets.html.erb (1.3ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (blueprint/screen.css isn't precompiled):
    1: <!--[if lt IE9]>
    2: <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    3: <![endif]-->
    4: <%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %>
    5: <%= stylesheet_link_tag 'blueprint/print', :media => 'print' %>
    6: <!--[if lt IE 8]><%= stylesheet_link_tag 'blueprint/ie' %><![endif]-->
    7: <%= stylesheet_link_tag 'custom', :media => 'screen' %>
  app/views/layouts/_stylesheets.html.erb:4:in `_app_views_layouts__stylesheets_html_erb___2010157553399413981_33056460'
  app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb__4294160261947576619_31749320' 
```

这是部署文件：

```
$:.unshift(File.expand_path('./lib', ENV['rvm_path'])) # Add RVM's lib directory to the load path.
require "rvm/capistrano"                  # Load RVM's capistrano plugin.
require "bundler/capistrano"

set :application, "Project"

set :scm, "git"
set :repository,  "ssh://server.example.ca/usr/local/git_root/project.git"
set :user, "deploy"

#set :rvm_bin_path, "/usr/local/rvm/bin"
set :rvm_ruby_string, "ruby-1.9.2-p290@project"
set :normalize_asset_timestamps, false

ssh_options[:forward_agent] = true

set :branch, "master"

set :deploy_via, :remote_cache

# If you aren't deploying to /u/apps/#{application} on the target
# servers (which is the default), you can specify the actual location
# via the :deploy_to variable:
set :deploy_to, "/usr/local/www/sites/project.example.ca/"

set :use_sudo, false

set :domain, 'project.example.ca'

role :app, domain
role :web, domain
role :db,  domain, :primary => true

before "deploy:symlink", "assets:precompile"

namespace :assets do
  desc "Compile assets"
  task :precompile, :roles => :app do
    run "cd #{release_path} && bundle exec rake RAILS_ENV=#{rails_env} assets:precompile"
  end
end 
```

这是我的capfile：

```
load 'deploy' if respond_to?(:namespace) # cap2 differentiator
Dir['vendor/plugins/*/recipes/*.rb'].each { |plugin| load(plugin) }
load 'config/deploy'
load 'deploy/assets' 
```

这是 application.rb 配置文件：

```
require File.expand_path('../boot', __FILE__)

require 'rails/all'

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module Arbiterapi
  class Application < Rails::Application

    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password]

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'

    # Precompile problem assets
    config.assets.precompile = %w(screen.css print.css)

  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:24:50.173

我遇到了同样的问题。但事实证明，我丢失的资产被编译成 application.js（因为它合并了所有文件），所以我只需要删除对特定文件的引用（在我的例子中是 webcam.js）。

您的文件已合并到 application.css 等...

# vim - 什么是vim中的排除正则表达式模式

> ID：10177189
> 
> 赞同：3
> 
> 时间：2012-04-16T15:35:24.800
> 
> 标签：vim

我想匹配一些东西但排除 `\t

在红宝石中： `[^\t]` 这意味着`match anything but`\t`

vim 中的等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T15:52:48.607

在 vim 的语法中，您通常必须转义这些括号。但是你可以在你的正则表达式的开头使用一个开关`\v`，它会打开“非常神奇”的处理，所以你不需要。

更改默认的正则表达式语法不利于兼容性，但我不想一直键入反斜杠。我的 .vimrc 中有这些，它会自动为我插入非常神奇的开关。

```
" set the "very magic" option in common searches
nnoremap / /\v
vnoremap / /\v
cnoremap s/ s/\v 
```

有关`:help \v`更多示例，请参阅。

# javascript - 动态添加到 iframe 的 SVG 无法正确呈现

> ID：10177190
> 
> 赞同：3
> 
> 时间：2012-04-16T15:35:27.237
> 
> 标签：javascript, iframe, svg

具体来说，IRI 引用（例如`fill="url(#myLinearGradient)"`）似乎不起作用。

这里的例子：http: [//jsfiddle.net/QYxeu/2/](http://jsfiddle.net/QYxeu/2/)

屏幕截图（右侧的 iframe）：

![在此处输入图像描述](../Images/61c2123647fe747aa9ff1e484b597216.png)

线性渐变未呈现在右侧。

我在 Chrome、Firefox 中遇到了这个问题，但奇怪的是 Safari 还可以。

有谁知道问题可能是什么以及如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:13:24.160

这个问题可以通过打开和关闭 iframe 文档一次来解决。似乎某些浏览器需要先初始化 iframe 的内容文档，然后才能使用它来解析 url 片段。

```
var iframe = document.createElement('iframe');
document.body.appendChild(iframe);
iframe.contentDocument.open();
iframe.contentDocument.close(); 
```

您的示例的[修改版本](http://jsfiddle.net/QYxeu/3/)运行良好。

# objective-c - “CGImageBlock 的行字节与 CGImage 的行字节不匹配！” 警告信息

> ID：10177197
> 
> 赞同：1
> 
> 时间：2012-04-16T15:36:17.227
> 
> 标签：objective-c, core-graphics

我正在为 CIFilter 创建一个 CIImage 对象以添加过滤器。创建 CIImage 对象时，我看到一条警告消息“CGImageBlock 的行字节与 CGImage 的行字节不匹配！”。仅当我在真实设备上测试应用程序时才会出现此警告消息。当我使用模拟器时，不会出现这样的警告信息。

我通常使用以下两种方式之一从 UIImage 对象创建 CIImage 对象：

**方法一：**

```
NSString * path = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/an_image_file_name.png"];
UIImage * uiimage = [UIImage imageWithContentsOfFile:path];
CIImage * ciimage = [[CIImage alloc] initWithImage:uiimage]; // This shows warning (on real device testing) 
```

**方法二：**

```
UIImage * uiimage = [UIImage imageNamed:@"filename_in_bundle.png"];
CIImage * ciimage = [[CIImage alloc] initWithImage:uiimage]; // This does not show warning 
```

问题是：只有方法 1 显示警告消息。我试图从互联网上找到这样的问题，但我找不到任何有用的东西。尽管该应用程序在设备上运行良好，但我不确定这是否会导致最终产品出现任何问题。

注意：我使用 Xcode 4.3.2 和 iOS 5 SDK

![在此处输入图像描述](../Images/5e2f62d027578fdef98c56be90c17bd9.png)

# mysql - 更新列值，替换字符串的一部分

> ID：10177208
> 
> 赞同：394
> 
> 时间：2012-04-16T15:36:37.017
> 
> 标签：mysql, sql

我在 MySQL 数据库中有一个包含以下列的表

```
[id, url] 
```

网址如下：

```
 http://domain1.com/images/img1.jpg 
```

我想将所有网址更新到另一个域

```
 http://domain2.com/otherfolder/img1.jpg 
```

保持文件名不变。

我必须运行什么查询？

* * *

## 回答 #1

> 赞同：835
> 
> 时间：2012-04-16T15:39:09.120

```
UPDATE urls
SET url = REPLACE(url, 'domain1.com/images/', 'domain2.com/otherfolder/') 
```

* * *

## 回答 #2

> 赞同：198
> 
> 时间：2012-04-16T15:39:15.427

```
UPDATE yourtable
SET url = REPLACE(url, 'http://domain1.com/images/', 'http://domain2.com/otherfolder/')
WHERE url LIKE ('http://domain1.com/images/%'); 
```

相关文档：[http ://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-04-16T15:40:04.683

尝试使用[替换功能](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)：

```
mysql> SELECT REPLACE('www.mysql.com', 'w', 'Ww');
        -> 'WwWwWw.mysql.com' 
```

请注意，它区分大小写。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-07-11T01:52:03.927

试试这个...

```
update [table_name] set [field_name] = 
replace([field_name],'[string_to_find]','[string_to_replace]'); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-11-24T23:27:19.813

您需要**WHERE子句****仅**替换符合 WHERE 子句中条件的记录（而不是所有记录）。您使用**%**符号表示部分字符串：IE

```
LIKE ('...//domain1.com/images/%'); 
```

表示所有以**BEGIN 开头**并`"...//domain1.com/images/"`在 AFTER 之后有任何内容的记录（这是`%`for...）

另一个例子：

```
LIKE ('%http://domain1.com/images/%') 
```

这意味着所有记录包含`"http://domain1.com/images/"`

在字符串的任何部分...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-09-24T06:27:13.463

**首先，必须检查**

SELECT * FROM `university`WHERE course_name LIKE '%&%'

**接下来，必须更新**

更新大学 SET course_name = REPLACE(course_name, '&', '&') WHERE id = 1

**结果：**工程与技术 =>**工程与技术**

# c# - 将表解析为数组

> ID：10177212
> 
> 赞同：0
> 
> 时间：2012-04-16T15:36:50.513
> 
> 标签：c#

我有这张桌子：

```
List<string>

 Total HTTP Packets              727       0.004459
  HTTP Request Packets            372       0.002281          51.17%
   GET                             372       0.002281         100.00%
  HTTP Response Packets           353       0.002165          48.56%
   ???: broken                       0       0.000000           0.00%
   1xx: Informational                0       0.000000           0.00%
   2xx: Success                    337       0.002067          95.47%
    200 OK                          331       0.002030          98.22
    204 No Content                    5       0.000031           1.48
    206 Partial Content               1       0.000006           0.30
   3xx: Redirection                 10       0.000061           2.83%
    302 Found                         3       0.000018          30.00
    304 Not Modified                  7       0.000043          70.00
   4xx: Client Error                 6       0.000037           1.70%
    408 Request Time-out              6       0.000037         100.00
   5xx: Server Error                 0       0.000000           0.00%
  Other HTTP Packets                2       0.000012           0.28% 
```

我想将此表解析为数组（每行分为 4 个部分），但我的问题是第一列，因为字符串长度发生了变化。我用 Tab 分割每一行，但不幸的是我确实点包含 Tabs。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:38:38.313

我会使用正则表达式（Regex 类）。正则表达式正是出于这个原因而摇摆不定。或者，如果您以 XML 格式获取输入（看起来不像），XPath 也可能对您有用。

我更喜欢正则表达式，因为它更容易编写。您可能只需要知道它`\s`代表空白空间。最好的写它的地方是[Rubular](http://rubular.com/)，在那里你可以粘贴你的内容，输入你的正则表达式，并*在你输入*时查看匹配的内容。

# c# - 无法访问该文件，因为它正被另一个进程使用

> ID：10177213
> 
> 赞同：1
> 
> 时间：2012-04-16T15:36:54.773
> 
> 标签：c#

我知道，这个问题已经在很多地方被反复问过了。但我试图用谷歌搜索它并检查这个网站的解决方案，但仍然不足。即使使用了所有建议的解决方案，我仍然遇到这个问题。

基本上，我有两个独立的程序。每个程序的功能如下所示。

1.  **ProgramA** - 功能：不断更新到源文件（txt）
2.  *ProgramB* * - 功能：不断将源文件复制到目标位置。

使用 ProgramB，我想模拟做 ctrl+c 操作。因此，我正在尝试存档可以更新文件的位置，操作员也可以复制它。

这是我到目前为止所尝试的。下面是测试功能的示例程序。

# 程序A

```
static void Main(string[] args)
{
    // just prepare the data
    List<string> tempList = new List<string>();
    for(int i = 0; i < 50000; i++)
    {
        tempList.Add(string.Format("xxx_{0}", i.ToString()));
    }

    try
    {
        // just to simulate constart update
        for (int j = 0; j < 20000; j++)
        {
            using (FileStream file = new FileStream(tmpFilePath, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite))
            {
                using (StreamWriter sw = new StreamWriter(file))
                {
                    foreach (string tmpName in tempList)
                    {
                        sw.WriteLine(tmpName);
                    }
                    sw.Close();
                }
                file.Close();
            }
        }
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex);
        Console.ReadKey();
    }
} 
```

# 程序B

```
static void Main(string[] args)
{
    string source = @"C:\temp\test.txt";
    string dest = @"C:\temp\dest\test.txt";
    while (true)
    {
        try
        {
            File.Copy(source, dest, true);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:45:00.880

不要使用[File.Copy](http://msdn.microsoft.com/en-us/library/9706cfs5.aspx)，而是尝试使用[FileStream](http://msdn.microsoft.com/en-us/library/5h0z48dh.aspx)并自己复制这些位。上面的代码会出错，因为[File.Copy](http://msdn.microsoft.com/en-us/library/9706cfs5.aspx)没有指定它对文件设置的 [FileShare权限。](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:44:26.817

这应该是一个评论，但它太长了。它更多的是设计建议，而不是编码答案。

我假设这两个程序都在计时器上，或者在 FileSystemWatcher 上，这意味着缺乏可预测性。您无法保证何时调用程序 A 或何时调用程序 B，这与执行读/写操作所需的时间有关。

换句话说，由于设计中固有的缺乏控制，您无法预测文件何时会被锁定。

如果可能的话，我会把这两个程序结合起来。真的，我假设您想要的是在程序 A 完成写入后立即复制文件（程序 b 功能）。没有（明显的）原因您不能对其进行编码，以便程序 A 在写入文件后立即复制文件。

如果缺乏可预测性是问题的根源，请消除不可预测性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:46:27.010

如果这两个程序都在同一台机器上运行，您可以在写入和复制文件时使用命名[互斥锁和锁定。](http://msdn.microsoft.com/en-us/library/f55ddskf.aspx)

所以在程序A中你会添加

```
using (Mutex m = new Mutex(false,"MyMutex"))
{
    m.WaitOne();
    // Your file writing code
    m.ReleaseMutex();
} 
```

并围绕您的文件复制代码做同样的事情。

# java - GWT 中的复合材料

> ID：10177214
> 
> 赞同：1
> 
> 时间：2012-04-16T15:36:56.750
> 
> 标签：java, gwt

在一个面板中，我添加了 3 个复合

```
public class frame {

//Initialization
....
....
public Service service = new Service();

public frame () {
    initWidget(getFramePanel());
}

private HorizontalPanel getFramePanel() { 
    if (hp== null) {
        hp= new HorizontalPanel();
        hp.setSize("1442px", "750px");
        hp.add(getTree());// **are composites**
        hp.add(getTable()); // **are composite**

    }
    return hp;
} 
```

我的理解是这两个都`tree`被`table`添加到`hp`同一个类中，所以我可以使用在这个类中初始化的变量或对象，在这两个组合中

**例如：** `service`对象在课堂`frame`上，所以我想知道我是否可以`service`在两个组合中使用。

在树和表复合中。如果是，那么如何？

**此代码可能不正确，因为我没有复制粘贴代码。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:01:46.800

您可以尝试使用观察者模式，创建一个具有调用服务的方法的接口，例如。"callService" 并创建一个对象**"MyInterfaceImpl"**在类 "fr​​ame"中**实现此接口**。该对象将实现接口，以便获取和使用两个子组合（getTree() 和 getTable()）的值。

**通过构造函数或方法**将此对象**MyInterfaceImpl 传递**给两个组合，然后您始终可以从组合的 UI 对象的 eventHandler调用此对象**MyInterfaceImpl的方法。**

 ****希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:41:48.153

您可以在树和表上设置的任何回调、事件处理程序等中使用该服务。但我相信你必须让它成为最终的。****

# c - Solaris 中的 pthread 互斥锁与原子操作

> ID：10177217
> 
> 赞同：5
> 
> 时间：2012-04-16T15:37:00.910
> 
> 标签：c, pthreads, solaris, mutex, atomic

我正在使用一个简单的程序进行一些测试，该程序使用 atomic_add_64 与互斥锁方法测量 64 位值上的简单原子增量的性能。令我困惑的是 atomic_add 比互斥锁慢 2 倍。

编辑！！！我又做了一些测试。看起来原子比互斥锁更快，并且可以扩展到 8 个并发线程。之后，原子的性能显着下降。

我测试过的平台是：

SunOS 5.10 Generic_141444-09 sun4u sparc SUNW,Sun-Fire-V490

CC：Sun C++ 5.9 SunOS_sparc 补丁 124863-03 2008/03/12

该程序非常简单：

```
#include <stdio.h>
#include <stdint.h>
#include <pthread.h>
#include <atomic.h>

uint64_t        g_Loops = 1000000;
volatile uint64_t       g_Counter = 0;
volatile uint32_t       g_Threads = 20;

pthread_mutex_t g_Mutex;
pthread_mutex_t g_CondMutex;
pthread_cond_t  g_Condition;

void LockMutex() 
{ 
  pthread_mutex_lock(&g_Mutex); 
}

void UnlockMutex() 
{ 
   pthread_mutex_unlock(&g_Mutex); 
}

void InitCond()
{
   pthread_mutex_init(&g_CondMutex, 0);
   pthread_cond_init(&g_Condition, 0);
}

void SignalThreadEnded()
{
   pthread_mutex_lock(&g_CondMutex);
   --g_Threads;
   pthread_cond_signal(&g_Condition);
   pthread_mutex_unlock(&g_CondMutex);
}

void* ThreadFuncMutex(void* arg)
{
   uint64_t counter = g_Loops;
   while(counter--)
   {
      LockMutex();
      ++g_Counter;
      UnlockMutex();
   }
   SignalThreadEnded();
   return 0;
}

void* ThreadFuncAtomic(void* arg)
{
   uint64_t counter = g_Loops;
   while(counter--)
   {
      atomic_add_64(&g_Counter, 1);
   }
   SignalThreadEnded();
   return 0;
}

int main(int argc, char** argv)
{
   pthread_mutex_init(&g_Mutex, 0);
   InitCond();
   bool bMutexRun = true;
   if(argc > 1)
   {
      bMutexRun = false;
      printf("Atomic run!\n");
   }
   else
        printf("Mutex run!\n");

   // start threads
   uint32_t threads = g_Threads;
   while(threads--)
   {
      pthread_t thr;
      if(bMutexRun)
         pthread_create(&thr, 0,ThreadFuncMutex, 0);
      else
         pthread_create(&thr, 0,ThreadFuncAtomic, 0);
   }
   pthread_mutex_lock(&g_CondMutex);
   while(g_Threads)
   {
      pthread_cond_wait(&g_Condition, &g_CondMutex);
      printf("Threads to go %d\n", g_Threads);
   }
   printf("DONE! g_Counter=%ld\n", (long)g_Counter);
} 
```

在我们的盒子上运行的测试结果是：

```
$ CC -o atomictest atomictest.C
$ time ./atomictest
Mutex run!
Threads to go 19
...
Threads to go 0
DONE! g_Counter=20000000

real    0m15.684s
user    0m52.748s
sys     0m0.396s

$ time ./atomictest 1
Atomic run!
Threads to go 19
...
Threads to go 0
DONE! g_Counter=20000000

real    0m24.442s
user    3m14.496s
sys     0m0.068s 
```

您在 Solaris 上遇到过这种类型的性能差异吗？任何想法为什么会发生这种情况？

在 Linux 上，相同的代码（使用 gcc __sync_fetch_and_add）与互斥锁版本相比，性能提高了 5 倍。

谢谢，奥克塔夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T04:37:13.283

你必须小心这里发生的事情。

1.  创建线程需要大量时间。因此，可能并非所有线程都同时执行。作为证据，我拿了你的代码并删除了互斥锁，每次运行它时都得到了正确的答案。这意味着没有一个线程同时执行！您不应该计算在测试中创建/销毁线程的时间。在开始测试之前，您应该等到所有线程都创建并运行。

2.  你的测试不公平。您的测试人为地具有非常高的锁争用。无论出于何种原因，原子 add_and_fetch 在这种情况下都会受到影响。在现实生活中，你会在线程中做一些工作。一旦你添加*了一点点*工作，原子操作的性能就会好很多。这是因为出现竞态条件的机会显着下降。没有争用时，原子操作的开销较低。当没有争用时，互斥锁比原子操作有更多的开销。

3.  线程数。运行的线程越少，争用就越低。这就是为什么在这个测试中更少的线程对原子性能更好。您的 8 线程数*可能*是您的系统支持的同时线程数。这可能不是因为您的测试如此偏向于争用。在我看来，您的测试将扩展到允许的同时线程数，然后达到稳定状态。我无法弄清楚的一件事是，为什么当线程数高于系统可以处理的同时线程数时，我们看不到线程休眠时互斥锁被锁定的情况的证据。也许我们会，我只是看不到它发生。

最重要的是，在大多数现实生活中，原子的速度要快得多。当您必须长时间持有锁时，它们并不是很好……无论如何您都应该避免这种情况（至少在我看来！）

我更改了您的代码，这样您就可以在没有工作、几乎没有任何工作的情况下进行测试，以及更多的工作以及更改线程数。

6sm = 6 个线程，几乎没有任何工作，互斥锁 6s = 6 个线程，几乎没有任何工作，原子

使用 capitol S 获得更多工作，没有 s 获得不工作。

这些结果表明，对于 10 个线程，工作量会影响原子的速度。在第一种情况下，没有工作，原子速度几乎没有。加一点工作，差距翻倍到 6 秒，加倍工作，几乎达到 10 秒。

```
(2) /dev_tools/Users/c698174/temp/atomic 
[c698174@shldvgfas007] $ t=10; a.out $t ; a.out "$t"m
ATOMIC FAST g_Counter=10000000 13.6520 s
MUTEX  FAST g_Counter=10000000 15.2760 s

(2) /dev_tools/Users/c698174/temp/atomic 
[c698174@shldvgfas007] $ t=10s; a.out $t ; a.out "$t"m
ATOMIC slow g_Counter=10000000 11.4957 s
MUTEX  slow g_Counter=10000000 17.9419 s

(2) /dev_tools/Users/c698174/temp/atomic 
[c698174@shldvgfas007] $ t=10S; a.out $t ; a.out "$t"m
ATOMIC SLOW g_Counter=10000000 14.7108 s
MUTEX  SLOW g_Counter=10000000 23.8762 s 
```

20 个线程，原子仍然更好，但幅度较小。没有工作，它们的速度几乎相同。经过大量工作，原子再次领先。

```
(2) /dev_tools/Users/c698174/temp/atomic 
[c698174@shldvgfas007] $ t=20; a.out $t ; a.out "$t"m
ATOMIC FAST g_Counter=20000000 27.6267 s
MUTEX  FAST g_Counter=20000000 30.5569 s

(2) /dev_tools/Users/c698174/temp/atomic 
[c698174@shldvgfas007] $ t=20S; a.out $t ; a.out "$t"m
ATOMIC SLOW g_Counter=20000000 35.3514 s
MUTEX  SLOW g_Counter=20000000 48.7594 s 
```

2个线程。原子占主导地位。

```
(2) /dev_tools/Users/c698174/temp/atomic 
[c698174@shldvgfas007] $ t=2S; a.out $t ; a.out "$t"m
ATOMIC SLOW g_Counter=2000000 0.6007 s
MUTEX  SLOW g_Counter=2000000 1.4966 s 
```

这是代码（redhat linux，使用 gcc atomics）：

```
#include <stdio.h>
#include <stdint.h>
#include <string.h>
#include <pthread.h>

volatile uint64_t __attribute__((aligned (64))) g_Loops = 1000000 ;
volatile uint64_t __attribute__((aligned (64))) g_Counter = 0;
volatile uint32_t __attribute__((aligned (64))) g_Threads = 7; 
volatile uint32_t __attribute__((aligned (64))) g_Active = 0;
volatile uint32_t __attribute__((aligned (64))) g_fGo = 0;
int g_fSlow = 0;

#define true 1
#define false 0
#define NANOSEC(t) (1000000000ULL * (t).tv_sec + (t).tv_nsec)

pthread_mutex_t g_Mutex;
pthread_mutex_t g_CondMutex;
pthread_cond_t  g_Condition;

void LockMutex() 
{ 
  pthread_mutex_lock(&g_Mutex); 
}

void UnlockMutex() 
{ 
   pthread_mutex_unlock(&g_Mutex); 
}

void Start(struct timespec *pT)
{
   int cActive = __sync_add_and_fetch(&g_Active, 1);
   while(!g_fGo) {} 
   clock_gettime(CLOCK_THREAD_CPUTIME_ID, pT);
}

uint64_t End(struct timespec *pT)
{
   struct timespec T;
   int cActive = __sync_sub_and_fetch(&g_Active, 1);
   clock_gettime(CLOCK_THREAD_CPUTIME_ID, &T);
   return NANOSEC(T) - NANOSEC(*pT);
}
void Work(double *x, double z)
{
      *x += z;
      *x /= 27.6;
      if ((uint64_t)(*x + .5) - (uint64_t)*x != 0)
        *x += .7;
}
void* ThreadFuncMutex(void* arg)
{
   struct timespec T;
   uint64_t counter = g_Loops;
   double x = 0, z = 0;
   int fSlow = g_fSlow;

   Start(&T);
   if (!fSlow) {
     while(counter--) {
        LockMutex();
        ++g_Counter;
        UnlockMutex();
     }
   } else {
     while(counter--) {
        if (fSlow==2) Work(&x, z);
        LockMutex();
        ++g_Counter;
        z = g_Counter;
        UnlockMutex();
     }
   }
   *(uint64_t*)arg = End(&T);
   return (void*)(int)x;
}

void* ThreadFuncAtomic(void* arg)
{
   struct timespec T;
   uint64_t counter = g_Loops;
   double x = 0, z = 0;
   int fSlow = g_fSlow;

   Start(&T);
   if (!fSlow) {
     while(counter--) {
        __sync_add_and_fetch(&g_Counter, 1);
     }
   } else {
     while(counter--) {
        if (fSlow==2) Work(&x, z);
        z = __sync_add_and_fetch(&g_Counter, 1);
     }
   }
   *(uint64_t*)arg = End(&T);
   return (void*)(int)x;
}

int main(int argc, char** argv)
{
   int i;
   int bMutexRun = strchr(argv[1], 'm') != NULL;
   pthread_t thr[1000];
   uint64_t aT[1000];
   g_Threads = atoi(argv[1]);
   g_fSlow = (strchr(argv[1], 's') != NULL) ? 1 : ((strchr(argv[1], 'S') != NULL) ? 2 : 0);

   // start threads
   pthread_mutex_init(&g_Mutex, 0);
   for (i=0 ; i<g_Threads ; ++i)
         pthread_create(&thr[i], 0, (bMutexRun) ? ThreadFuncMutex : ThreadFuncAtomic, &aT[i]);

   // wait
   while (g_Active != g_Threads) {}
   g_fGo = 1;
   while (g_Active != 0) {}

   uint64_t nTot = 0;
   for (i=0 ; i<g_Threads ; ++i)
   { 
        pthread_join(thr[i], NULL);
        nTot += aT[i];
   }
   // done 
   printf("%s %s g_Counter=%llu %2.4lf s\n", (bMutexRun) ? "MUTEX " : "ATOMIC", 
    (g_fSlow == 2) ? "SLOW" : ((g_fSlow == 1) ? "slow" : "FAST"), g_Counter, (double)nTot/1e9);
} 
```

# iphone - 如何在 iPhone 4S 中使用 htmnl 标签发送图像？

> ID：10177223
> 
> 赞同：0
> 
> 时间：2012-04-16T15:37:18.043
> 
> 标签：iphone, ios5

我正在尝试在 iPhone 4S 上的我的 iPhone 应用程序中从邮件中发送带有 HTML 标签的图像，但每次邮件中都缺少图像，但相同的代码在 iPhone 4 上运行良好。iPhone 4S 有什么问题以及它是如何做到的得到解决？谢谢-

# asp.net - 开始日期 - 使用比较验证器失火的结束日期验证

> ID：10177224
> 
> 赞同：3
> 
> 时间：2012-04-16T15:37:19.207
> 
> 标签：asp.net, webforms, comparevalidator

我需要我的结束日期总是大于开始日期，我尝试使用 CompareValidator 进行验证。

代码如下：

我有一个文本框开始日期

```
<asp:TextBox ID="TxtStartDate"
             runat="server" />

<asp:CalendarExtender Enabled="True"
                      ID="TxtStartDate_CalendarExtender"
                      TargetControlID="TxtStartDate"
                      runat="server" /> 
```

另一个文本框结束日期。

```
<asp:TextBox ID="TxtEndDate"
             runat="server" />

<asp:CalendarExtender Enabled="True"
                      ID="TxtEndDate_CalendarExtender"
                      TargetControlID="TxtEndDate"
                      runat="server" />

<asp:CompareValidator ControlToCompare="TxtStartDate"
                      ControlToValidate="TxtEndDate"
                      Display="Dynamic"
                      ErrorMessage="CompareValidator"
                      ID="CompareValidator1"
                      Operator="GreaterThan"
                      Type="Date"
                      runat="server" /> 
```

但是比较字段验证器会出错。

例如，当开始日期为 2/04/2012 并且结束日期为 10/04/2012 时，它会触发。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T12:15:12.047

只需您可以像这样尝试

```
<asp:CompareValidator ID="cmpVal1" ControlToCompare="txtStartDate" 
         ControlToValidate="txtEndDate" Type="Date" Operator="GreaterThanEqual"   
         ErrorMessage="*Invalid Data" runat="server"></asp:CompareValidator> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T09:47:41.813

这个是正确的..它解决了我的问题。

```
<asp:CompareValidator ID="cmpVal1" ControlToCompare="txtStartDate" ControlToValidate="txtEndDate" Type="Date" Operator="GreaterThanEqual"  ErrorMessage="ToDate should be greater than FromDate" runat="server"></asp:CompareValidator> 
```

别忘了写：

```
cmpVal1.Validate() 
```

在发生比较的事件上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-05T18:49:45.097

## 开始日期（从）和结束日期（到）使用 JAVASCRIPT 验证

它关心 From date 和 To date 都应该小于今天的日期（Currentdate）。从日期应该小于到日期。

文本框

```
<asp:TextBox ID="txtFromDate" runat="server" onChange="javascript: txtFromDateChanged(this)"></asp:TextBox>
<asp:TextBox ID="txtToDate" runat="server" onChange="javascript: txtToDateChanged(this);" ></asp:TextBox> 
```

java脚本（将脚本块放在头部）

```
<script type="text/javascript">

        function txtToDateChanged(sender, args) {
            var date = new Date();
            var startDate = Date.parse(document.getElementById('<%= txtFromDate.ClientID %>').value);
            var endDate = Date.parse(document.getElementById('<%= txtToDate.ClientID %>').value);
            var timeDiff = endDate - startDate;
            var daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));

            if (date > endDate) {
                document.getElementById('<%= txtToDate.ClientID %>').value = "";
                alert('*Select date greater than Today.');
            }
            if (daysDiff < 0) {
                document.getElementById('<%= txtToDate.ClientID %>').value = "";
                alert('*FromDate should be less than Todate');
            }

        }
        function txtFromDateChanged(sender, args) {
            var date = new Date();
            var startDate = Date.parse(document.getElementById('<%= txtFromDate.ClientID %>').value);
            if (date > startDate) {
                document.getElementById('<%= txtFromDate.ClientID %>').value="";
                alert('*Select date greater than Today.');
            }
        }
    </script> 
```

# google-chrome - Jquery Mobile Dialog 不使用 chrome 关闭

> ID：10177228
> 
> 赞同：0
> 
> 时间：2012-04-16T15:37:41.497
> 
> 标签：google-chrome, jquery-mobile

我在一个页面中有两个对话框。

```
<div data-role="page" id="connect" data-id="connect">
<div id="header-connect" data-role="header" data-id="bs_header" data-theme="a">
    <h1>{t}Connect{/t}</h1>
</div>
<div data-role="content">
    <ul data-role="listview">
        <li><a href="#test" data-rel="dialog">Test</a></li>
    </ul>
</div>
</div>

<div data-role="page" id="test" data-id="test">
    <div id="header-test" data-role="header" data-id="bs_header" data-theme="a">
        <h1>{t}Test{/t}</h1>
    </div>
    <div data-role="content">
       <a href="#" data-rel="back">Back</a>
       <a href="javascript:;" onclick="$('.ui-dialog').dialog('close');">Close</a>
    </div>
</div> 
```

当我尝试使用 javascript 关闭第一个时，它不适用于 Chrome 和 Chrome Mobile，但适用于 firefox。我使用 Jquery Mobile 1.0.1。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:30:08.047

我已经设法解决了

```
$('*[data-icon="delete"]').on("click",function(){
   $('.ui-dialog').dialog('close');
}); 
```

在对话框代码中......糟糕的解决方案但对我有用，因为它是我案例中唯一的对话框，但也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:57:44.437

我们使用这样的事件找到解决方案：

```
('#connect').live('pagehide', function(){
if (id_dialog_page != '') {
    $.mobile.changePage('#'+id_dialog_page, {role: 'dialog'});
}
id_dialog_page = '';
}); 
```

我们还在打开一个新的对话框模式框之前强制关闭#connect。目标模态框由变量找到。

# google-app-engine - App Engine 内置 Python 2.7

> ID：10177231
> 
> 赞同：2
> 
> 时间：2012-04-16T15:37:47.003
> 
> 标签：google-app-engine

我正在转换为 Python 2.7

这样做，内置在 yaml 中是无效的

应用程序：nameofapp 版本：1 运行时：python27 api_version：1 线程安全：true

内置：-datastore_admin：打开-remote_api：打开

以上是我的 YAML 文件和内置条目中的条目：部分错误 - 我做错了什么或遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:46:29.190

从 1.6.1 发行说明：

> 警告：从实验性 Python 2.7 运行时的 1.6.2 版本开始，将不支持 mapreduce 和 datastore_admin 内置函数。

使用 datastore_admin 工具的“正确”方法是通过管理控制台启用它，而不是启用 app.yaml 中的内置函数。

[信用](https://groups.google.com/forum/?fromgroups#!topic/google-appengine-python/L0z_sONQHc0)

# xml - 在 xml 文件中使用 xmlread 搜索文本

> ID：10177241
> 
> 赞同：0
> 
> 时间：2012-04-16T15:38:32.183
> 
> 标签：xml, matlab, search

我想在 xml 文件中搜索文本并使用 Matlab 检查它是否具有正确的值。

我试过 ：

```
myFolder = 'folder1';
OutputFile = fullfile(myFolder ,'info.xml');
xmlNode = xmlread(OutputFile ); 
```

我想检查“特征”、“颜色”选项是否存在，并且它们分别具有以下值：混合和红色？

info.xml 内容----------

```
<?xml version="1.0" encoding="utf-8"?>
<Custom_project name="" val="True" name="file1" path="file:/C:/Users/Local/Temp/info.xml" version="1.0">
   <verif="true" name="values" path="file:/C:/Users/Temp/folder1">
      <optList name="values">
         <opt name="color">red</option>
         <opt name="police">calibri</option>
         <opt name="font">blue</option>
      </optList>
    </verif>
   <toto="myvalue" name="option1">
      <opt name="myvalue_1">32</option>
      <opt name="-total">All</option>
      <opt name="characteristic">hybrid</option>
   </toto> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:40:23.540

如果`xmlread`不需要使用，这是一种可能的解决方案。不检查相同 XML 选项的多个定义，因此任何匹配的选项名称 - 选项值对都被视为匹配项。

% 用于`regexp`在 XMLdata 中查找匹配字符串的函数。

```
function [IsMatch] = xmlmatch(XMLdata, Variable, Value)
IsMatch = ~isempty(regexp(XMLdata, [ '.*<opt\s*name="', Variable, '">', Value, '</option>.*' ]));
return 
```

% 打开文件，获取文件ID

```
fid = fopen('info.xml'); 
```

% 读取文件内容（假设是文本文件）。

```
XMLdata = fscanf(fid, '%s'); 
```

% 检查 XMLdata 的变量值：

```
IsColorRed = xmlmatch(XMLdata, 'color', 'red');
IsColorRed =
    1

IsColorBlue = xmlmatch(XMLdata, 'color', 'blue');
IsColorBlue =
    0

IsCharacteristicHybrid = xmlmatch(XMLdata, 'characteristic', 'hybrid');
IsCharacteristicHybrid =
    1

IsCharacteristicHybr = xmlmatch(XMLdata, 'characteristic', 'hybr');
IsCharacteristicHybr =
    0 
```

% 关闭文件。

```
fclose(fid); 
```

# mongodb - 导入成功后，mongoimport 不显示集合

> ID：10177242
> 
> 赞同：1
> 
> 时间：2012-04-16T15:38:32.447
> 
> 标签：mongodb, filesize, tsv, mongoimport

我正在使用以下命令导入一个大的，大约。50Gb，mongo 中的文件。我正在使用以下命令：

```
./mongoimport --host localhost --db <dbname> --collection part1 --type tsv --file part1_Final.tsv --headerline --upsert 
```

几个小时后，它说成功导入了行，但是当我去检查我的数据库时，它没有显示出来。但是，当我对一个更小的文件使用相同的命令时，它可以正常工作。

请让我知道是否有人遇到类似的问题并让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T16:05:18.473

我注意到在 Google Groups 上也有人问过这个问题，并且在那里得到了解决。
[http://groups.google.com/group/mongodb-user/browse_thread/thread/715806c48d03db8d/f84ed96da990c9fb](http://groups.google.com/group/mongodb-user/browse_thread/thread/715806c48d03db8d/f84ed96da990c9fb)

操作需要一段时间的事实加上输出表明行已成功导入的事实表明该集合已导入某处。

`show dbs`您可以通过在 JS shell 中键入来查看所有数据库名称。您可以通过键入在数据库之间切换，`use <database name>`您可以通过键入查看每个数据库中的集合`show collections`。可能是 type-o 导致集合被导入到您预期之外的数据库中？

正如 Eliot 在 Google Groups 页面上所说，服务器日志可能会指示集合的导入位置。

希望这将帮助您找到您的收藏！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-02T08:00:19.670

看起来 mongo import 命令有一些变化。

从集群中**连接按钮**下的“与 mongo shell 连接”获取*连接字符串。*

 **连接字符串通常以数据库名称结尾：

```
mongodb+srv://cluster0.hfsei.mongodb.net/<DB Name> 
```

对我有用的命令如下：

```
mongoimport "mongodb+srv://cluster0.hfsei.mongodb.net/<DB Name>" --username <db username> --password <password> --type csv --collection=<collection_name> --file=<file csv> --headerline 
```**

# jquery - z-index 不适用于谷歌浏览器中的 fancybox

> ID：10177243
> 
> 赞同：0
> 
> 时间：2012-04-16T15:38:33.050
> 
> 标签：jquery, css, fancybox

我正在使用 FancyBox 创建的灯箱。它会打开一个 youtube 视频，并且效果很好。在谷歌浏览器中，我确实注意到关闭按钮在视频后面。我弄乱了 z-index 并且它在谷歌浏览器中无法正常工作。我在Firefox中弄乱了它，它工作得很好。位置已确定，一切都已确定。有任何想法吗？

这是网站：[http](http://theadamgrp.com/test/hcsmu/) ://theadamgrp.com/test/hcsmu/ 单击右侧缩略图旁边的“单击此处观看他的推荐”。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:52:35.967

我可以看到铬 17 / ubuntu 中描述的问题。

将以下内容添加到 YouTube iframe 的 URL 可以为我修复它：

```
&wmode=transparent 
```

YouTube 将`wmode`URL 参数传递给 SWF 对象。Adobe 有[更多](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html#main_Using_Window_Mode__wmode__values_)关于 Flash`wmode`属性的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:03:13.070

确保您使用 position:relative/abosulte/etc... 作为定位的 DIV，否则 z-index 将无关紧要。

# java - 将多行的详细信息从 JSP 传递给 Servlet

> ID：10177247
> 
> 赞同：0
> 
> 时间：2012-04-16T15:38:56.060
> 
> 标签：java, jsp, jakarta-ee, servlets

我的 JSP 文件中有一个员工列表，对于每个员工，我提供了一个更新位置的选项（下拉菜单）。结果被传递到“SaveTubeDetails”servlet，它负责保存数据。

这是我目前使用的代码：

```
<form action="SaveTubeDetails" method="POST">
 <table>
 <% 
   for(Iterator<Employee> itr = employeeArr.iterator(); itr.hasNext();){ 
   Employee emp= itr.next();
 %> 

<tr> 
  <td>
  <select name="location">
  <% for(int count=0; count<locArr.size(); count++){ %>     
  <option value="<%= locArr.get(count) %>" ><%= locArr.get(count) %></option>   
  <%} %>
  </select>
  </td> 
</tr>
</table>
</form> 
```

我的问题是，如何将其保存为可以传递给 Servlet 的员工列表？

*注意：我没有使用 Spring 和 Hibernate。而且我知道不应该使用 scriptlet，但我别无选择，因为我正在更新现有代码。虽然这里只显示了 Employee 的 Location 详细信息，但实际上还有更多的列，例如 Age、DOB 等。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:43:12.770

在您的特定示例中，所有提交的值都作为可用的字符串数组[`HttpServletRequest#getParameterValues()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterValues%28java.lang.String%29)，其顺序与输入出现在 HTML 标记中的顺序完全相同。

```
String[] location = request.getParameterValues("location");
// ... 
```

作为替代方案，您可能需要考虑在输入名称中包含员工 ID，以避免任何潜在的竞争条件（例如，在显示表单和处理表单之间，员工已被不同的最终用户从数据库中删除时）提交）：

```
<select name="location_<%=emp.getId()%>"> 
```

然后可以根据现有的员工列表将其收集到 servlet 中，如下所示：

```
List<Employee> employees = employeeService.list();

for (Employee employee : employees) {
    String location = request.getParameter("location_" + employee.getId());
    // ...
} 
```

# javascript - JavascriptMVC - 保存模型时出现验证错误

> ID：10177248
> 
> 赞同：0
> 
> 时间：2012-04-16T15:39:02.680
> 
> 标签：javascript, javascriptmvc

我想在我的新项目中使用 JavascriptMVC，但我遇到了问题。

```
client = new Client($('#create-client-form').formParams());
client.save(successhandler, errorhandler); 
```

[文档](http://javascriptmvc.com/docs.html#!jQuery.Model.static.create)：

> 您只需要使用包含新实例的 id 和应在实例上设置的任何其他属性的对象来调用成功。

但是如果服务器端验证失败怎么办？在这种情况下，我的回调应该是一个包含错误消息的对象，而不是一个 id？有人使用 JavascriptMVC 并处理过这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:39:26.583

如何处理服务器验证错误或任何服务器错误取决于您。您仍然可以返回 200 成功 HTTP 代码，然后成功处理程序将在 javascript 端被调用，您需要处理服务器返回的任何内容。

更好的方法是让服务器返回一些 4xx HTTP 错误代码（您可以使用现有的或选择自己的），并在响应中发送不同的 json 对象，然后错误处理程序将被调用并传入这些参数：`(jqXHR, textStatus, errorThrown)`

来源：[jQuery ajax](http://api.jquery.com/jQuery.ajax/)

在错误处理程序中，您可以从 jqXHR 中解析出 json。

希望有帮助！

# html - 上标在 html 电子邮件中留下空格

> ID：10177251
> 
> 赞同：0
> 
> 时间：2012-04-16T15:39:12.717
> 
> 标签：html, css, outlook-2007

上标导致我的 html 电子邮件中有额外的空间。

```
<sup style="vertical-align:baseline; bottom:0.4em; position:relative;">&reg;</sup> 
```

现在这适用于网页。但是对于 html 电子邮件，Mac 上 Outlook 2007 客户端的空间仍然存在。

有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:59:48.670

上标通常会导致行间距问题。你是这个意思吗？通常，代码中的样式有助于解决此类问题。（我不确定您是指垂直间距还是水平间距。）无论如何，删除`sup`标记和相关样式应该会有所帮助。注册标志 ® 旨在或多或少地显示为类似上标的字形，因此将其设置为上标很容易使其变得小而难以辨认（并且可能有些错位）。

# powershell - 如何获取 MSMQ 私有队列的当前权限？

> ID：10177255
> 
> 赞同：2
> 
> 时间：2012-04-16T15:39:20.907
> 
> 标签：powershell, permissions, msmq, system.messaging

有人知道如何从 Powershell 中的 MSMQ 私有队列中读取用户\组访问权限吗？我想将此作为对安装 NServiceBus 服务的部署脚本的健全性检查，以确保服务用户在安装服务之前实际上具有对相应队列的读取权限。

从 System.Messaging.MessageQueue 类的文档看来，似乎有很多方法可以为队列设置权限，但没有方法可以获取权限。

任何帮助是极大的赞赏！

-杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:03:18.803

没有 .net 方法可以检索 msmqueue 上的实际 ACL。

你需要做一些 P/invoke:: [MQGetQueueSecurity](http://msdn.microsoft.com/en-us/library/ms703223%28v=vs.85%29.aspx)

这里 c# 代码在 powershell:: [pinvoke.net中添加类型](http://www.pinvoke.net/default.aspx/mqrt/MQGetQueueSecurity.html)

# php - Facebook 的 profile.php?=id 是如何工作的？

> ID：10177256
> 
> 赞同：-3
> 
> 时间：2012-04-16T15:39:21.203
> 
> 标签：php, mysql, html, facebook

我注意到，当转到 facebook 上的个人资料页面时，它会将您定向到页面 www.facebook.com/profile.php?=id。我很好奇这到底是如何工作的。我想建立一个用户拥有不同个人资料的网站，我认为通过我的 profile.php 路由它会效果最好。但是，我不确定如何做到这一点。我想直接访问 profile.php，但我认为我的 html 和 css 不会被考虑在内。我知道您可以在同一个文件中使用 php 和 html，但是如何将 php 生成的内容定向到 html 中的正确 div？对不起，如果这个问题有点令人困惑。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T15:57:13.030

Web 应用程序将在数据库中包含用户配置文件记录，其中一列为其`id`. 当用户访问时`www.facebook.com/profile.php?id=5`，页面中的代码会在数据库中搜索 id 为 5 的配置文件，然后通过将此数据放入 html 中来显示该配置文件的信息：

```
<div><?= $someRecordVariable ?></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:55:35.103

我相信它使用 MVC 框架。它将根据 URL 变量路由流量。

以下是有关如何创建的信息： http: [//anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/](http://anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/)

还有一些预构建的框架，如 larvel、cakePHP 和 codeigniter。你应该研究那些最适合你正在尝试做的事情。

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T16:10:43.653

您需要某种不涉及将主 PHP 内联与 ​​HTML 混合的框架。就我个人而言，我喜欢自己做，因为我保持控制。

一个非常简单的例子是使用模板文件（例如 Profile-tpl.php），您在 php 的末尾包含它，它会根据 Profile-tpl.php 中的 HTML 和 CSS 回显您想要输出的任何内容。

```
 <HTML>
    ...
        <div>
            <?php echo (!empty($content)) ? $content : ''; ?>
        </div>
    ...
    </HTML> 
```

我个人的编程风格是使用干净的 URL（例如 domain.com/p/12345 -> index.php?page=p&id=12345）通过 index.php 路由所有内容，根据查询加载模块（我已经确定 p加载配置文件），然后从模板文件加载适当的格式。

# jsf-2 - Richface 4.2 DragandDrop 不工作

> ID：10177258
> 
> 赞同：1
> 
> 时间：2012-04-16T15:39:39.930
> 
> 标签：jsf-2, drag-and-drop, richfaces

我有两个面板，一个是源，另一个是接收器。

![在此处输入图像描述](../Images/38e7b11ebcdcc7e7da64d24657b5d4fd.png)

现在我想将对象从源移动到 PHP 面板

代码 ：

```
public class DragDropBean{
    private List<String> source;
    private List<String> target;
// ----------> NOW getter and setter of all three element
    public DragDropBean() {
        initList();
    }

    private void initList() {
        source = Lists.newArrayList();
        target = Lists.newArrayList();
        source.add("A");
        source.add("B");
        source.add("C");
        source.add("D");
    }

    public void moveItem(String obj) {
        source.remove(obj);
        target.add(obj);
    } 
```

事件 bean 的代码

```
public class DragDropEventBean implements DropListener {
    @ManagedProperty(value = "#{dragDropBean}")
    private DragDropBean dragDropBean;
// -----> NOW getter setter of  dragDropBean

    public void processDrop(DropEvent event) {
        dragDropBean.moveItem((String) event.getDragValue());
    } 
```

xhtml 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">
    <f:view>
    <h:head></h:head>
    <h:outputStylesheet>
        .panelc { width:25%; }
        .valign { vertical-align:top; }
        .dropTargetPanel { width: 90%; }
        .footerClass {
            text-align: center;
            padding-top: 5px;
        }
        .rf-ind-drag{
            font-size:11px;
            cursor:pointer;
            width:100px;
            border:1px solid gray;
            padding:2px
        }
        .rf-ind-acpt{border:2px solid green}
        .rf-ind-rejt{border:2px solid red}
    </h:outputStylesheet>
    <h:form id="form">
        <h:panelGrid columnClasses="panelc valign, valign, valign, valign" columns="4" width="100%">
            <rich:panel style="width:133px">
                <f:facet name="header">
                    <h:outputText value="Source List" />
                </f:facet>
                <h:dataTable 
                    id="src" 
                    columns="1" 
                    value="#{dragDropBean.source}"
                    var="fm1" 
                    footerClass="footerClass">
                    <h:column>
                        <a4j:outputPanel layout="block" styleClass="rf-ind-drag">
                            <rich:dragSource 
                                type="PHP"
                                dragValue="#{fm1}" />
                            <h:outputText value="#{fm1}"></h:outputText>
                        </a4j:outputPanel>
                    </h:column>
                </h:dataTable>
            </rich:panel>

            <rich:panel>
                <f:facet name="header">
                    <h:outputText value="PHP Frameworks" />
                </f:facet>
                <rich:dropTarget 
                    acceptedTypes="PHP"
                    dropListener="#{dragDropEventBean.processDrop}"
                    render="phptable, src" />
                <h:dataTable 
                    id="phptable" 
                    columns="1"
                    value="#{dragDropBean.target}" 
                    var="fm2">
                    <h:column>
                        <h:outputText value="#{fm2}"></h:outputText>
                    </h:column>
                </h:dataTable>
            </rich:panel>

        </h:panelGrid>
     </h:form>
    </f:view>
</ui:composition> 
```

dragDropEventBean 是请求范围，dragDropBean 是视图范围。

我无法将对象从面板源移动到 PHP。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:16:48.160

尝试在[此处](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=dragDrop&skin=blueSky)或[此处](http://anonsvn.jboss.org/repos/richfaces/branches/4.0.X/examples/richfaces-showcase)获取完整的 DragAndDrop 示例。

这些链接具有您正在使用的相同代码，但它是完整的。我明白了，对我有好处。也许你删除了一些重要的代码。

除此之外，您可以`<a4j:log/>`在页面中插入以显示调试信息并检查是否有异常。

# windows-phone-7 - windows phone 7上的图像编辑

> ID：10177261
> 
> 赞同：0
> 
> 时间：2012-04-16T15:39:49.300
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

我的目的是允许我的用户使用自定义文本构建自定义锁屏/壁纸，并且可能是其他图像。有人可以向我指出一些资源如何按照 Windows Phone 7 SDK 执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:45:04.180

此[MSDN 链接](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx)提供了许多示例 Windows Phone 应用程序。使用这些示例中的一个或组合应该使您处于合理的位置。

我希望这有帮助。

# oracle - 如何从 raise_application_error() 获取信息？

> ID：10177262
> 
> 赞同：1
> 
> 时间：2012-04-16T15:39:56.107
> 
> 标签：oracle, exception, stored-procedures, plsql

```
...PROCEDURE...
.....
WHEN DUP_VAL_ON_INDEX THEN
DBMS_OUTPUT.PUT_LINE(SQLCODE || ' ' || SQLERRM);
RAISE_APPLICATION_ERROR(-20021, 'Attempted to add duplicate primary key into table A2PROD');
..... 
```

**结果：**

```
-1 ORA-00001: unique constraint (SYSTEM.SYS_C004235) violated 
```

**我想将结果显示为：**

```
-20021 ORA-20021 Attempted to add duplicate primary key into table A2PROD 
```

我试图将 DOPL 放在 raise_application_error 函数之后，但仍然无法正常工作。我想引发应用程序错误并获取错误消息和代码以将它们打印到 oracle 开发人员的输出控制台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:48:50.857

我不完全确定我理解这个问题。如果`DOPL`是的缩写，`dbms_output.put_line`并且您希望`SQLCODE`是 -20021 并`SQLERRM`成为“ORA-20021：尝试将重复的主键添加到表 A2PROD”中，则需要将`dbms_output.put_line`调用放在捕获自定义错误消息的异常处理程序中。当然，你也可以做类似的事情

```
WHEN dup_val_on_index
THEN
  l_err_code := -20021;
  l_err_msg  := 'Attempted to add duplicate primary key into table A2PROD';
  dbms_output.put_line( l_err_code || ' ' || l_err_msg );
  raise_application_error( l_err_code, l_err_msg );
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:48:15.950

发布的过程是从另一个过程调用的吗？还是您以其他方式运行它？

RAISE_APPLICATION_ERROR 将异常号及其消息传递给调用程序。那么这*对*异常有什么作用呢？例如，如果它有一个糟糕的异常处理程序，像这样......

```
 your_proc_here(p_new_id=>1);
exception
    when others then
        null;
end; 
```

...您永远不会看到 -20021 错误，只会看到 DBMS_OUTPUT 输出。

# iphone - UIViewController 中的触摸事件而不是 UIView

> ID：10177263
> 
> 赞同：1
> 
> 时间：2012-04-16T15:39:57.760
> 
> 标签：iphone, ios, cocoa-touch

我无法让 UIViewController 子类处理来自子视图之一的触摸事件。这是层次结构：

```
 UIViewController
        |
  MYGeneric_UIVC
        |
MyAppSpecific_UIVC----- UIView[view_all] 
                           |
                           +-- UIView[view_top] (top section of screen)
                           +-- UIControl subclass[view_middle] (middle section)
                           +-- UIView[view_bottom] (bottom section) 
```

触摸事件一直在 view_middle（UIControl 子类）中工作，但我意识到为了修改 view_top 和 view_bottom 中的 UILabel 文本以对 view_middle 中发生的事情做出反应，我应该改为处理 MyAppSpecific_UIVC 中的事件（而不是发送消息围绕使用我看到其他人建议的指针和委托，这似乎有点混乱）。

* * *

所以我从 view_middle 中删除了 4 个触摸事件处理方法，并将它们添加到 MyAppSpecific_UIVC 中。我认为应该发生的是，如果 view_middle 不处理事件，那么它应该再次尝试向上提升层次结构（view_all，然后是 MyAppSpecific_UIVC）。

* * *

但是 MyAppSpecific_UIVC 从来没有收到任何触摸事件，我也尝试过 view_all 但这也不起作用。

* * *

也许笔尖文件链接的东西可能是错误的？该文件的所有者是 MyAppSpecific_UIVC。文件所有者的“视图”指向“view_all”。

* * *

view_middle (UIControl) 的“已发送事件”是否应该指向 IB 中的任何内容？

* * *

view_all 是否应该启用用户交互（它已关闭）？

* * *

我正在使用以下方法加载 nib 文件：

```
nibObjects = [[NSBundle mainBundle] loadNibNamed:resource owner:self options:nil]; 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:43:35.317

将您的 Uiview 类更改为 UIControll 它将接受触摸事件。

# html - IE 无法识别 href 按钮

> ID：10177264
> 
> 赞同：1
> 
> 时间：2012-04-16T15:39:59.060
> 
> 标签：html, internet-explorer

您知道为什么 IE 根本无法将下面的这些按钮识别为链接吗？

```
<a href="#zanas" class="content-loader"><div id="zanas"></div></a>
<a href="#dizain" class="pics_holders"><div id="dizain"></div></a>
<a href="#izkustvo"><div id="izkustvo"></div></a>
<a href="#kontakti" class="content-loader"><div id="kontakti"></div></a> 
```

还可以查看网站（按钮位于灯的形状上）- [http://lambev-design.com/](http://lambev-design.com/)

**更新：**我看到元素必须包含一些东西（空格不起作用），并且知道 div 位于 4 个不同的地方，而不是创建一个跨度标签，我选择简单地将图像放在那些不透明的 div 中0 但我不知道这是否是 CrossBrowser 命令以及是否可以在任何地方使用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:46:33.973

我猜是因为`<a><div></div></a>`标记无效（嗯，不仅，第二个原因是 IE 本身......）。尝试替换`<div>`with`<span>`并添加一些 CSS 规则：

```
a.content-loader span { 
    display: block; 
    position: relative;
    z-index: -1;
}
a.content-loader { display: inline-block; } 
```

这种奇怪的摆弄有助于解决 IE7 问题，并且应该是跨浏览器有效的。请参阅在 IE7 中工作的[http://jsfiddle.net/Fttyh/3/ （与](http://jsfiddle.net/Fttyh/3/)[原始 fiddle](http://jsfiddle.net/Fttyh/)不同）。

我最近遇到了非常[相似的问题](https://stackoverflow.com/q/5735158/684229)，我采用[了您的问题的答案](https://stackoverflow.com/a/9969886/684229):-) 所以请参阅那里了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:44:00.837

尝试将其添加`id="..."`到 a-tag 中：

```
<a href="#dizain" class="pics_holders" id="dizain"></a> 
```

不知道这是否有帮助，但我想我以前做过......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:46:15.197

标签不会在 IE 中生成 Div，作为一种解决方法，您可以这样写：

```
<a href="#zanas" class="content-loader"><div onclick="window.location.hash='#zanas'" id="zanas"></div></a> 
```

# windows - MFC 程序在打开名称中包含日文字符的文件时崩溃

> ID：10177270
> 
> 赞同：0
> 
> 时间：2012-04-16T15:40:05.490
> 
> 标签：windows, unicode, mfc, internationalization

我在英国的一家软件公司工作。我们有一个最近移植到 64 位 Windows 的程序。在我们构建 64 位版本的同时，我们也从 Visual Studio 2003 切换到 2010，继续使用 MFC 的代码页版本（mfc100.dll）。

在我们完全发布程序后不久，我们收到了来自使用 64 位 Windows 7 的日本用户的错误报告。如果以交互方式打开名称中包含日文字符（甚至文件夹名称中包含日文字符）的文件，程序失败并显示消息：“遇到不正确的参数”

尝试用新名称保存文件是类似的。该程序的 Visual Studio 2003 版本按预期工作。

该程序使用 MFC 类 CFileDialog 来提示用户和 Windows CopyFile() 函数将文件复制到/从用户指定的位置。

有没有关于如何解决这个问题的线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:16:01.690

如果您使用 MBCS 而不是 Unicode，则只有当您的系统区域设置为日语时，才会正确处理日语路径/文件名。

如果您的系统区域设置未设置为日语，则路径/文件名将被转换为您的代码页并包含垃圾（通常以????? 的形式）。

将您的语言环境设置为日语并测试您的程序。如果它按预期工作，那么您就解决了问题。

可能的解决方案是仅为 CFileDialog 切换到 Unicode。调用底层 Win32 API 的 Unicode 版本而不是 CFileDialog 类方法。将所有路径/文件名作为 unicode (wchar_t*) 获取，然后使用[WideCharToMultibyte](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx)函数将它们转换为 MBCS。

# javascript - 更改单击/切换脚本以添加其他按钮

> ID：10177271
> 
> 赞同：0
> 
> 时间：2012-04-16T15:40:14.497
> 
> 标签：javascript, jquery, input, toggle

我需要在此脚本中再添加三个按钮，总共 5 个。

我首先为两个按钮制作了脚本，但现在我需要再添加三个。

我会只关心这部分吗？这是我唯一需要改变的地方吗？

```
 var varval = '';
    if ($(this).hasClass('button-toggle-on')) {
        varval = $(this).hasClass('gnF') ? 'Female' : 'Male'; 
```

链接：http: [//jsfiddle.net/9cr4F/9/](http://jsfiddle.net/9cr4F/9/)

这是我的脚本：

```
$(function() {
var $buttons = $("input[type='button']");
$buttons.click(function() {

    $(this).parent().siblings('.bx, #bxGender .gender').css({'background':'#2F2F2F','color':'#fff'});
    $buttons.not(this).removeClass('button-toggle-on');
    $(this).toggleClass('button-toggle-on').attr('style','');

    var varval = '';
    if ($(this).hasClass('button-toggle-on')) {
        varval = $(this).hasClass('gnF') ? 'Female' : 'Male';

    $(this).siblings('input[type="button"]').css('background-position','0 -180px');
    }
    else {
          $(this).siblings('input[type="button"]').attr('style','');
       $(this).parent().siblings('.bx').attr('style',''); 
    }
    $("#gender").val(varval);
});
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:49:58.223

根据我从您的代码中得到的信息，您现在有两个按钮：`Male`和`Female`. 当您单击一个时，它会将某些`#gender`元素的值更改为男性或女性，具体取决于它是否具有某些类。

我想您想为性别添加另外三个可能的值，因此添加了三个新按钮。如果是这种情况，那么您的代码中有一个关键位置需要修改：

```
varval = $(this).hasClass('gnF') ? 'Female' : 'Male'; 
```

现在，您正在使用三元运算符来确定正确的值。如果您正在查看五个可能的值而不是原来的两个，那将会变得很脏。

除非您的 HTML 有任何更改，否则我建议您改用 a `switch`。

但是关于你真正的问题`is that the only thing I need to change?`，我不得不说，从它的外观来看，如果你正确地设置了你的 HTML，你真的可以让你的代码变得简单得多。

就像是：

```
<input type="button" data-gender="Male" />
<input type="button" data-gender="Female" /> 
```

... 使执行此操作变得容易得多：

```
var varval = $(this).attr('data-gender'); 
```

最重要的是，不管你有多少按钮，它都有效。

# sql-server - 有没有办法在 where 子句中使用 `exec`？

> ID：10177273
> 
> 赞同：6
> 
> 时间：2012-04-16T15:40:22.807
> 
> 标签：sql-server

我正在尝试查询 SQL Server 的实例，以给我一个包含特定名称表的数据库列表。这是我目前所拥有的......

```
select name
from master..sysdatabases
where (exec('use ' + name + '; select 1 from information_schema.tables 
  where table_name = ''TheTableName'';')) = 1; 
```

但我收到以下错误消息

```
Msg 156, Level 15, State 1, Line 4
Incorrect syntax near the keyword 'exec'.
Msg 102, Level 15, State 1, Line 4
Incorrect syntax near 'name'. 
```

`exec()`在 where 子句中使用 call 的正确语法是什么？还是有另一种方法可以做我想做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T15:51:08.557

不，您不能`exec`在`where`子句中使用。一些动态SQL怎么样：

```
DECLARE @sql NVARCHAR(MAX);

SET @sql = N'SELECT name = NULL WHERE 1 = 0';

SELECT @sql = @sql + N'
  UNION ALL SELECT name = ''' + name + ''' 
  WHERE EXISTS (SELECT 1 FROM ' + QUOTENAME(name)
  + '.sys.tables WHERE name = ''TheTableName'')'
  FROM sys.databases;

EXEC sp_executesql @sql; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T22:08:11.850

Powershell 就是为此而构建的：

```
$server = new-object Microsoft.SqlServer.Management.Smo.Server ".";
foreach ($db in $server.Databases) {
   $t = $db.Tables | where {$_.Schema -eq 'YourSchema' -and $_.Name -eq 'TableName'};
   if ($t -ne $null) {
      $db.Name;
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:53:11.473

This SQL statement will give you all of the database names that contain the table you are looking for:

```
EXEC sp_MSForEachDB 'USE [?]; select ''?'' from information_schema.tables where table_name = ''TheTableName''' ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T16:02:12.697

您必须使用临时表从 exec 获取信息。

尝试这个

```
Create Table #TableLocations(DatabaseName varchar(255) not null)
Declare @databaseName VarChar(255)
Declare @QueryString VarChar(255)
Declare DatabaseNameCursor Cursor For Select [Name] From sys.databases
Declare @TableName VarChar(255)
Select @TableName = 'Put your table name here'
Open DatabaseNameCursor
Fetch Next From DatabaseNameCursor Into @databaseName
While @@Fetch_Status = 0
Begin
  Select @QueryString = 'Use ' + @databaseName + ' Insert into #TableLocations Select ''' + @databaseName + ''' From information_schema.tables Where Table_Name = ''' + @TableName + ''''
  Exec(@QueryString)
  Fetch Next From DatabaseNameCursor Into @databaseName 
End
Close DatabaseNameCursor
DeAllocate DataBaseNameCursor
Select * from #TableLocations
Drop Table #TableLocations 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T14:39:07.117

您还可以将存储过程的结果存储在临时表中，然后将其添加到 WHERE 子句

# e-commerce - Facebook 应用程序/画布页面上的电子商务

> ID：10177275
> 
> 赞同：1
> 
> 时间：2012-04-16T15:40:27.523
> 
> 标签：e-commerce, facebook-apps, facebook-canvas

将电子商务应用程序作为 Canvas 页面运行是否违反 Facebook TOS？我正在阅读[Facebook 平台政策](https://developers.facebook.com/policy/)，我看到游戏有特定的标注，并且政策规定游戏只能使用 Facebook 积分。是否所有其他应用程序都需要使用 Facebook Credits 作为唯一可接受的付款方式？或者，我可以使用 PayPal、Google Checkout 或任何其他可用的商家服务供应商吗？澄清一下，我希望能够做一些与 FB 平台集成的事情：

*   销售产品
*   提供SaaS解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:45:15.367

我已经阅读了平台政策，也没有找到任何东西。

我不确定[这](http://www.insidefacebook.com/2011/04/22/canvas-connect-websites-best/)是一个可靠的来源，但引用它：

> Canvas 应用程序可以使用 Facebook 积分作为他们的付款方式（所有游戏必须在 2011 年 7 月 1 日之前这样做），使付款更容易，因为用户可能已经有积分余额 但是，积分附带 30% 的税到脸书。非游戏可以根据需要处理付款，并且不需要支付 Facebook 的税。

因此，您似乎可以使用任何其他支付网关。实际上你应该这样做，因为 FB 30% 的信用削减似乎太多了。

# python - Pyparsing setParseAction 函数没有参数

> ID：10177276
> 
> 赞同：16
> 
> 时间：2012-04-16T15:40:27.853
> 
> 标签：python, parsing, pyparsing

我正在尝试解析一个简单的 key = value 查询语言。我实际上已经用一个巨大的怪物解析器完成了它，然后我再通过它来清理解析树。我想做的是从下到上进行干净的解析，其中包括使用 (key,val) 对的集合以便消除冗余对等。虽然我之前让它工作过，但我不觉得就像我完全理解为什么 pyparsing 会以这种方式运行一样，所以我做了很多工作等，有点与谷物作斗争。

目前，这是我的“简化”解析器的开始：

```
from pyparsing import *   

bool_act = lambda t: bool(t[0])
int_act  = lambda t: int(t[0])

def keyval_act(instring, loc, tokens):
    return set([(tokens.k, tokens.v)])

def keyin_act(instring, loc, tokens):
    return set([(tokens.k, set(tokens.vs))])

string = (
      Word(alphas + '_', alphanums + '_')
    | quotedString.setParseAction( removeQuotes )
    )
boolean = (
      CaselessLiteral('true')
    | CaselessLiteral('false')
    )
integer = Word(nums).setParseAction( int_act )
value = (
      boolean.setParseAction(bool_act)
    | integer
    | string
    )
keyval = (string('k') + Suppress('=') + value('v')
          ).setParseAction(keyval_act)
keyin = (
    string('k') + Suppress(CaselessLiteral('in')) +
    nestedExpr('{','}', content = delimitedList(value)('vs'))
    ).setParseAction(keyin_act)

grammar = keyin + stringEnd | keyval + stringEnd 
```

目前，“语法”非终结符只是一个存根，我最终会在键中添加可嵌套的连词和析取词，以便可以解析这样的搜索：

```
a = 1, b = 2 , c in {1,2,3} | d = 4, ( e = 5 | e = 2, (f = 3, f = 4)) 
```

不过，就目前而言，我无法理解 pyparsing 如何调用我的 setParseAction 函数。我知道在传递多少个参数方面有一些魔力，但是我收到一个错误，根本没有参数传递给函数。所以目前，如果我这样做：

```
grammar.parseString('hi in {1,2,3}') 
```

我收到此错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.6/site-packages/pyparsing.py", line 1021, in parseString
    loc, tokens = self._parse( instring, 0 )
  File "/usr/lib/python2.6/site-packages/pyparsing.py", line 894, in _parseNoCache
    loc,tokens = self.parseImpl( instring, preloc, doActions )
  File "/usr/lib/python2.6/site-packages/pyparsing.py", line 2478, in parseImpl
    ret = e._parse( instring, loc, doActions )
  File "/usr/lib/python2.6/site-packages/pyparsing.py", line 894, in _parseNoCache
    loc,tokens = self.parseImpl( instring, preloc, doActions )
  File "/usr/lib/python2.6/site-packages/pyparsing.py", line 2351, in parseImpl
    loc, resultlist = self.exprs[0]._parse( instring, loc, doActions, callPreParse=False )
  File "/usr/lib/python2.6/site-packages/pyparsing.py", line 921, in _parseNoCache
    tokens = fn( instring, tokensStart, retTokens )
  File "/usr/lib/python2.6/site-packages/pyparsing.py", line 675, in wrapper
    return func(*args[limit[0]:])
TypeError: keyin_act() takes exactly 3 arguments (0 given) 
```

从回溯中可以看出，我使用的是 python2.6，而 pyparsing 是 1.5.6

谁能给我一些关于为什么函数没有得到正确数量的参数的见解？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-17T03:55:11.850

好吧，最新版本`setParseAction`确实做了一些额外的魔法，但不幸的是以牺牲一些开发简单性为代价。setParseAction 中的参数检测逻辑现在依赖于在解析操作中引发异常，直到使用正确数量的参数调用它，从 3 开始并逐渐下降到 0，之后它只是放弃并引发异常锯。

除了在这种情况下，来自解析操作的异常不是由于参数列表不匹配，而是代码中的真正错误。为了更好地了解这一点，请在您的解析操作中插入一个通用的 try-except ：

```
def keyin_act(instring, loc, tokens): 
    try:
        return set([(tokens.k, set(tokens.vs[0]))]) 
    except Exception as e:
        print e 
```

你得到：

```
unhashable type: 'set' 
```

实际上，您从中创建返回集的列表的第二个元素本身就是一个集合，一个可变容器，因此不能散列以包含在集合中。如果您将其更改为使用frozenset，那么您将获得：

```
[set([('hi', frozenset([]))])] 
```

为什么冻结集是空的？我建议您将结果名称“vs”的位置更改为：

```
nestedExpr('{','}', content = delimitedList(value))('vs') 
```

现在解析'hi in {1,2,3}'返回的解析结果是：

```
[set([('hi', frozenset([([1, 2, 3], {})]))])] 
```

这有点乱，如果我们将这一行放在 parse 操作的顶部，您将看到不同的命名结果实际包含什么：

```
print tokens.dump() 
```

我们得到：

```
['hi', [1, 2, 3]]
- k: hi
- vs: [[1, 2, 3]] 
```

所以'vs'实际上指向一个包含一个列表的列表。所以我们可能想从 构建我们的集合`tokens.vs[0]`，而不是`tokens.vs`。现在我们的解析结果如下所示：

```
[set([('hi', frozenset([1, 2, 3]))])] 
```

关于语法的其他一些提示：

*   尝试使用 CaselessKeyword，而不是 CaselessLiteral。关键字是语法关键字的更好选择，因为它们本质上可以避免将“inside”的前导“in”误认为是语法中的关键字“in”。

*   不确定从解析操作返回集合的方向 - 对于键值对，元组可能会更好，因为它会保留标记的顺序。在程序的解析后阶段建立您的键和值集。

*   对于其他语法调试工具，请查看`setDebug`和`traceParseAction`装饰器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-14T18:27:55.340

Paul 已经解释了根本问题是什么：`TypeError`您的 parse 操作引发的问题混淆了 pyparsing 的自动计算您的 parse 操作期望的参数数量的方法。

这是我用来避免这种混淆的方法：`TypeError`如果使用更少的参数再次调用该函数，则该装饰器会重新引发被装饰函数抛出的任何内容：

```
import functools
import inspect
import sys

def parse_action(f):
    """
    Decorator for pyparsing parse actions to ease debugging.

    pyparsing uses trial & error to deduce the number of arguments a parse
    action accepts. Unfortunately any ``TypeError`` raised by a parse action
    confuses that mechanism.

    This decorator replaces the trial & error mechanism with one based on
    reflection. If the decorated function itself raises a ``TypeError`` then
    that exception is re-raised if the wrapper is called with less arguments
    than required. This makes sure that the actual ``TypeError`` bubbles up
    from the call to the parse action (instead of the one caused by pyparsing's
    trial & error).
    """
    num_args = len(inspect.getargspec(f).args)
    if num_args > 3:
        raise ValueError('Input function must take at most 3 parameters.')

    @functools.wraps(f)
    def action(*args):
        if len(args) < num_args:
            if action.exc_info:
                raise action.exc_info[0], action.exc_info[1], action.exc_info[2]
        action.exc_info = None
        try:
            return f(*args[:-(num_args + 1):-1])
        except TypeError as e:
            action.exc_info = sys.exc_info()
            raise

    action.exc_info = None
    return action 
```

以下是如何使用它：

```
from pyparsing import Literal

@parse_action
def my_parse_action(tokens):
    raise TypeError('Ooops')

x = Literal('x').setParseAction(my_parse_action)
x.parseString('x') 
```

这给了你：

```
Traceback (most recent call last):
  File "test.py", line 49, in <module>
    x.parseString('x')
  File "/usr/local/lib/python2.7/dist-packages/pyparsing-2.0.2-py2.7.egg/pyparsing.py", line 1101, in parseString
    loc, tokens = self._parse( instring, 0 )
  File "/usr/local/lib/python2.7/dist-packages/pyparsing-2.0.2-py2.7.egg/pyparsing.py", line 1001, in _parseNoCache
    tokens = fn( instring, tokensStart, retTokens )
  File "/usr/local/lib/python2.7/dist-packages/pyparsing-2.0.2-py2.7.egg/pyparsing.py", line 765, in wrapper
    ret = func(*args[limit[0]:])
  File "test.py", line 33, in action
    return f(*args[:num_args])
  File "test.py", line 46, in my_parse_action
    raise TypeError('Ooops')
TypeError: Ooops 
```

将此与您在没有`@parse_action`装饰的情况下获得的回溯进行比较：

```
Traceback (most recent call last):
  File "test.py", line 49, in <module>
    x.parseString('x')
  File "/usr/local/lib/python2.7/dist-packages/pyparsing-2.0.2-py2.7.egg/pyparsing.py", line 1101, in parseString
    loc, tokens = self._parse( instring, 0 )
  File "/usr/local/lib/python2.7/dist-packages/pyparsing-2.0.2-py2.7.egg/pyparsing.py", line 1001, in _parseNoCache
    tokens = fn( instring, tokensStart, retTokens )
  File "/usr/local/lib/python2.7/dist-packages/pyparsing-2.0.2-py2.7.egg/pyparsing.py", line 765, in wrapper
    ret = func(*args[limit[0]:])
TypeError: my_parse_action() takes exactly 1 argument (0 given) 
```

# android - 如何确保未以编程方式单击视图？

> ID：10177279
> 
> 赞同：0
> 
> 时间：2012-04-16T15:40:37.097
> 
> 标签：android

我正在android中创建一个自定义视图（子类视图类）。它将是可点击的，但我需要它只能由用户点击，而不是以编程方式。所以不会有欺诈点击。我不确定这是否可能，但是有解决此问题的方法吗？

我也想知道 AdMob 的 adview 是如何处理这个问题的？

谢谢。

# sharepoint - InfoPath 显示特定 SharePoint 文件夹的内容

> ID：10177282
> 
> 赞同：0
> 
> 时间：2012-04-16T15:40:53.867
> 
> 标签：sharepoint, connection, infopath

我正在尝试在 InfoPath 表单中显示 SharePoint 上特定文件夹的内容。这是我当前表单的设置：

1.  用户从从 SharePoint 上的列表数据填充的下拉列表中选择客户。列表中的一列是 Sharepoint 上特定文件夹的 URL，其中包含与该客户相关的文档。

2.  我希望根据选择客户时指定的 URL，在第二个下拉列表中填充该特定文件夹中文件的名称。

我似乎想不出一种方法来使用数据连接来做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:26:59.963

您可以在表单后面的代码中执行此操作。从下拉列表中获取文件夹的 url 并将其传递给代码。就像是：

```
using (SPSite site = new SPSite(SPContext.Current.Site.Url))
{
    SPWeb web = site.RootWeb;
    SPFolder folder = web.GetFolder(urloffolder);
    foreach (SPFile in folder.Files)
    {
       //populate drop down with each file
    }
} 
```

# javascript - requirejs：缩短依赖列表

> ID：10177283
> 
> 赞同：1
> 
> 时间：2012-04-16T15:40:58.167
> 
> 标签：javascript, requirejs

我用 require.js 开发了一个 Web 应用程序。
随着整个事情的增长和增长，某些 amd 模块的依赖列表也增长并变得非常复杂（让我想起了在我开始使用 require.js 之前 index.html 页面中的大量脚本标签）。
所以我开始把核心模块——我一直需要的——放在新的 amd 模块中：

```
define(["config", "eventObj", "registry", "log", "userObj"], 
  function (conf, event, reg, log, user) {
    var core = {
      conf: conf,
      event: event,
      reg: reg,
      log: log,
      user: user
    };
    return core;
}); 
```

但是自从这种变化之后，奇怪的事情发生了，例如，有一次这个“核心”在那里，但后来，在另一个模块中，它也被称为依赖项，它是未定义的。
有没有更好的方法来缩短依赖关系列表，对各种模块进行分组，而不必将这些东西放在一个文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:36:51.663

我们在 BoilerplateJS 中使用了类似的方法，如果您担心可读性，这看起来更清晰：

```
define(function (require) {

    return {
        conf : require("config"),
        event : require("eventObj"),
        reg : require("registry"),
        log: require("log"),
        user : require ("userObj")
    };
}); 
```

从[https://github.com/ectechno/boilerplatejs/blob/master/src/core/_boiler_.js采用的代码](https://github.com/ectechno/boilerplatejs/blob/master/src/core/_boiler_.js)

但我不明白为什么您的设置无法正常工作。你确定你指向正确的路径吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:29:52.350

当您像这样声明依赖项的路径时

```
define(["config", "eventObj", "registry", "log", "userObj"] 
```

它在调用此模块的目录中搜索依赖项。所以为了避免这种情况，[Require.js中有一种干净的方式来定义路径](http://requirejs.org/docs/api.html)

```
require.config({
    baseUrl: "/another/path",
    paths: {
        "some": "some/v1.0"
    }
  }); 
```

现在您可以在任何地方使用“some”作为依赖项。这对于为用户模块添加依赖关系是可以的。但是在定义一个核心模块时，Janith 上面提到的内容更干净。正如我所看到的，它缩短了依赖关系列表。

# xslt - XSLT：父样式表导入子样式表，但子样式表看不到父样式表

> ID：10177285
> 
> 赞同：-1
> 
> 时间：2012-04-16T15:41:02.373
> 
> 标签：xslt, variables, import, include

我有一个这样定义的父样式表：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"> 
    <xsl:import href="external/webcommon/WebappTransform.xsl" />
    <xsl:variable name="webAppFinalName">rf</xsl:variable>
</xsl:stylesheet>` 
```

导入的样式表`WebappTransform.xsl`包含某些模板中包含的一些内联 CSS：

```
@import url("/{$webAppFinalName}/external/webcommon/css/print.css"); 
```

转换发生在 Java servlet 过滤器中，我无法准确地看到输出 HTML，但是从最终结果中可以清楚地看出该变量没有被正确插入。

如果我手动插入变量并尝试使用完整的 XSL，那么一切都很好。

有人可以解释一下这里有什么问题吗？咨询一些在线资源表明这种方法应该有效。

真诚的感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:52:58.473

根据[http://www.w3.org/TR/xslt#import](http://www.w3.org/TR/xslt#import)任何“xsl:import 元素只允许作为顶级元素。xsl:import 元素子元素必须在 xsl:stylesheet 的所有其他元素子元素之前element”，因此您`xsl:variable`前面的代码段`xsl:import`的顺序错误，我希望 XSLT 处理器会引发错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:12:51.223

这个：

```
@import url("/{$webAppFinalName}/external/webcommon/css/print.css"); 
```

只是一个普通的字符串。在转换过程中不会发生变量替换。

试试这个：

```
<xsl:value-of select="concat('@import url(&quot;/', $webAppFinalName, 
                     '/external/webcommon/css/print.css&quot;);')"/> 
```

# iis - IIS 网站下的所有应用程序是否都可以访问彼此的 cookie？

> ID：10177286
> 
> 赞同：0
> 
> 时间：2012-04-16T15:41:06.920
> 
> 标签：iis, dns

我了解同一域名下的应用程序可以通过 cookie 相互通信。但这在 IIS 级别如何转换？所有这些应用程序是否必须位于同一个 IIS 网站下，才能读取彼此的 cookie？我相信为应用程序池选择的隔离级别也很重要。

所以这个问题的简短版本是，在 IIS 中，需要什么来分离 Web 应用程序，才能读取彼此的 cookie？

这是一个纯粹的理论问题。

更新：在进一步阅读 cookie 之后，似乎当您设置 cookie 时，您还可以指定它应该可用于哪些域。（例如，我可以通过将域设置为 .com 创建一个可供所有人使用的 cookie）如果这是真的，那么 IIS 配置与 cookie 的可访问性无关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:43:19.817

cookie 访问与 IIS 设置无关。设置 cookie 的代码决定谁（来自同一域或所有域的请求）有权访问 cookie。

# asp.net - asp.net DataGrid 并强制它与我现有的结构一起工作

> ID：10177287
> 
> 赞同：2
> 
> 时间：2012-04-16T15:41:08.560
> 
> 标签：asp.net

所以我现有的结构是

```
<table>
<tr>
    <th>header</th>
</tr>
<tr>
    <td>cotent</td>
</tr>
</table> 
```

DataGrid 正在添加一堆我不想在那里的东西，是否可以删除这些额外的信息，这样我就不必对我的 CSS 文件进行大量修改？

这是上表在 DataGrid 之后的样子。

```
<table id="ContentPlaceHolder1_articleList" headertext="File Name" rules="all">
    <tr>
        <td>Header</td> <!-- I need this to be a TH?? -->
    </tr>
    <tr>
        <td>Content</td>
    </tr>
</table> 
```

这里最大的问题是我需要标题行是`<th>`而不是`<td>`。而且我需要这张桌子只是`ID`而且`runat="server"`不是大交易，不确定它的`rules="all"`作用。

这是我的 asp.net 代码。

Page_Load 背后的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    DirectoryInfo dirInfo = new DirectoryInfo(Server.MapPath("examfilemanager"));

    articleList.DataSource = dirInfo.GetFiles();
    articleList.DataBind();
} 
```

页面：

```
<asp:DataGrid Enabled="false" runat="server" ID="articleList" AutoGenerateColumns="false" AlternatingItemStyle-BackColor="#EEEEEE" HeaderText="File Name">
    <Columns>
        <asp:HyperLinkColumn DataNavigateUrlField="Name" DataTextField="Name" HeaderText="File Name" />
        <asp:BoundColumn DataField="LastWriteTime" HeaderText="Last Write Time" ItemStyle-HorizontalAlign="Center" DataFormatString="{0:d}" />
        <asp:BoundColumn DataField="Length" HeaderText="Filer Server" ItemStyle-HorizontalAlign="Right" DataFormatString="{0:#,### bytes}" />
    </Columns>
</asp:DataGrid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:48:21.723

尝试设置`UseAccessibleHeader`为真：

```
<asp:DataGrid ID="DataGrid1" runat="server" UseAccessibleHeader="true" ...> 
```

如果可能的话，您确实应该使用`GridView`控件并利用控件不可用的许多功能`DataGrid`。在这一点上，传统的`DataGrid`控制更像是过时的遗物。

# jquery - 需要帮助让 jQuery ScrollTo 插件运行

> ID：10177291
> 
> 赞同：0
> 
> 时间：2012-04-16T15:41:26.970
> 
> 标签：jquery, scrollto

所以我一直试图让 Ariel Flesher 的 jQuery ScrollTo 插件工作，但没有运气。我已经检查了有关该插件的另一篇文章，但没有帮助。所以我创建了自己的帖子。

HTML：

```
<header>
    <nav role="navigation">
        <ul class="nav">
            <li>a href="/" title="">Box</a></li>
            <li>a href="/" title="">Table</a></li>
            <li>a href="/" title="">Chair</a></li>
        </ul>
    </nav>
</header>
<div id="main">
    <div id="box"></div>
    <div id="table"></div>
    <div id="chair"></div>
</div> 
```

JS：

```
$(document).ready(function(){
    $('.nav').scrollTo('#chair');
}); 
```

所以我需要能够点击椅子，它会向上滑动椅子部分等等。我不知道为什么，但它似乎不起作用。请任何帮助都会很棒。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:47:08.753

做这样的事情：

JS：

```
$(document).ready(function(){
  $('.nav a').bind('click', function() {
    // Get href value from clicked link: "#chair", "#box"...
    var target = $(this).attr('href');

    // Scroll to it
    $.scrollTo($(target));
  });
}); 
```

HTML：

```
<header>
    <nav role="navigation">
        <ul class="nav">
            <li><a href="#box" title="">Box</a></li>
            <li><a href="#table" title="">Table</a></li>
            <li><a href="#chair" title="">Chair</a></li>
        </ul>
    </nav>
</header>
<div id="main">
    <div id="box"></div>
    <div id="table"></div>
    <div id="chair"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:43:21.337

您应该使用锚标记：

```
<a id="chair" /> 
```

# search - 如何从命令行确定 Maven 工件是否在我的仓库中？

> ID：10177292
> 
> 赞同：21
> 
> 时间：2012-04-16T15:41:37.573
> 
> 标签：search, maven, artifacts

我想从命令行检查是否`groupId.artifactId.version`可以在存储库中找到某个坐标（）。

如果可能的话，可以用部分坐标（例如`artifactId.version`）来完成吗？我可以指定回购吗？

我不要求解决方法 - 我可以简单地在我的本地存储库中开始文件搜索，或者在 POM 中输入工件并等待错误，或者安装 Nexus 并在 UI 上搜索......

这是一件方便的事情——一旦在 CLI 上，能够快速检查就很好了。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-16T15:49:21.427

这是我认为你会得到的最接近的：

```
mvn dependency:get -Dartifact=g:a:v -o -DrepoUrl=file://path/to/your/repo 
```

我试过了，如果工件（例如“junit：junit：4.8.2”）在您的仓库中，它会成功，如果不是，则失败，但是您必须将本地仓库的完整路径写为 URL .

关键是使用 -o（离线）标志，否则 maven 将始终检查中央仓库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:48:51.717

我从来没有听说过这样的事情。`get`插件的目标可能`dependency`以某种方式接近，但它仍然不是您正在寻找的。恐怕没有这样的事。但是，编写自己的 Maven 插件来做你想做的事情可能非常简单。Maven 3 中的新工件解析机制，称为 Aether，具有非常好的和简单的 API。

无论如何，看看依赖插件：

[http://maven.apache.org/plugins/maven-dependency-plugin/get-mojo.html](http://maven.apache.org/plugins/maven-dependency-plugin/get-mojo.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-18T21:26:38.200

派对迟到了，

您可以在 Maven 中央存储库搜索 ( [https://search.maven.org/](https://search.maven.org/)`fc:` ) 上搜索具有语法的完整类名。

例子：

`fc:org.apache.wink.common.annotations.Parent`

用于查找对不再维护的库的引用。

# java - SuperCSV 引用每个导出的单元格

> ID：10177293
> 
> 赞同：3
> 
> 时间：2012-04-16T15:41:42.543
> 
> 标签：java, csv, export-to-csv, quote, supercsv

我正在使用 superCSV 将 bean 数据导出到 CSV。我希望每个单元格都双引号，而不仅仅是带有特殊字符的单元格。

现在，使用 CsvPreference.EXCEL_NORTH_EUROPE_PREFERENCE，即使是带有特殊字符的单元格也不会被引用。（使用 EXCEL_PREFERENCE 设置包含“。”的地址被引用。）

我的目标是以 MS Office（匈牙利语）可以使用的方式导出地址、电话号码和所有内容，即不会将 +36000000000 之类的电话号码转换为 36000000000。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:32:07.663

**编辑：**超级 CSV 2.1.0 的更新

从 Super CSV 2.1.0 开始，您现在可以`QuoteMode`通过首选项指定 a 以在通常不需要引号时启用引号。要引用每一列，您可以使用内置的`AlwaysQuoteMode`. 如果要为特定列启用引号，请使用`ColumnQuoteMode`. 请注意，您不能以这种方式禁用引用，您必须自己`CsvEncoder`提供才能这样做。

* * *

感谢您提请我注意该[论坛帖子](http://sourceforge.net/projects/supercsv/forums/forum/718794/topic/2010277)！看起来 Kasper 并没有解决这个问题。我会看看我能为即将发布的版本做些什么:)

您可以在自己的项目中扩展 Super CSV 实现，而不是破解 Super CSV 源代码来添加“引用所有内容”功能。正如您所提到的，Super CSV 仅在包含特殊字符（引号、逗号等）时才引用整个字段 - 如果字段包含前导/尾随空格，它也会这样做。

考虑到这一点，您没有理由不能编写自己的方法`Writer`来覆盖该`escapeString()`方法（您只需确保它尚未被引用）。

```
package org.supercsv.io;

import java.io.Writer;

import org.supercsv.prefs.CsvPreference;

public class QuoteAllCsvBeanWriter extends CsvBeanWriter {

    public QuoteAllCsvBeanWriter(Writer writer, CsvPreference preference) {
        super(writer, preference);
    }

    @Override
    protected String escapeString(String csvElement) {

        // perform normal escaping
        final String escaped = super.escapeString(csvElement);

        // add surrounding quotes if required
        final String quote = String.valueOf((char) preference.getQuoteChar());
        if (escaped.startsWith(quote) && escaped.endsWith(quote)){
            return escaped;
        } else {
            return quote + escaped + quote;
        }
    }

} 
```

# javascript - 如果我的所有页面都不同，如何避免页面内 Javascript 并使用外部 Javascript 文件？

> ID：10177294
> 
> 赞同：0
> 
> 时间：2012-04-16T15:41:55.410
> 
> 标签：javascript

我进行了很多搜索，发现了几种有关如何使用外部文件调用页面特定 javascript 的方法。

我发现的最好方法是在 HTML 页面中调用单行函数，例如

```
frontEnd.ContactPageLoad(); 
```

但这需要有页面内的javascript..

其他方法是在 body 或 at 有一个 id /attribute ，`<script> tag`这可以调用你想要的。

这种情况我该怎么办？

**编辑**
这就是我想要的.. [http://paulirish.com/2009/markup-based-unobtrusive-comprehensive-dom-ready-execution/](http://paulirish.com/2009/markup-based-unobtrusive-comprehensive-dom-ready-execution/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:19:08.453

根据您提出问题的方式：

> js怎么知道应该从哪里开始呢？

Javascript 是一种脚本语言，这意味着它将逐行评估脚本中编写的所有内容。

因此，如果您将 myFunction() 放在文件的开头或结尾，则无关紧要，只要定义了 myFunction。除了一些框架之外，没有什么需要在您的 html 中包含 javascript。

编写一个名为 myscript.js 的脚本，然后在您的 html 页面中添加一个脚本标签：

```
<script src='myscript.js' type='text/javascript></script> 
```

你试过这个吗？

# java - 如何在 netbeans 7.1.1 中安装 jstl.jar 和 standard.jar 以及如何解决 taglib 的 uri

> ID：10177295
> 
> 赞同：3
> 
> 时间：2012-04-16T15:42:04.837
> 
> 标签：java, jar, netbeans-7

我刚开始使用Netbeans 7.1.1，我在使用的时候遇到了一个问题`taglib`，它说是`uri cannot be resolved in web.xml`nor jar 文件。

我应该怎么办？

我还发现这个问题可以通过在WEB-INF文件中添加`jstl.jar`和来解决。`standard.jstl`但没有任何改善。

那么有人可以建议如何解决这个URI问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T19:09:26.620

右键单击您的项目和属性-> 库-> 添加库-> JSTL 1.1

# c++ - Winsock 错误 C++ 不支持协议族

> ID：10177302
> 
> 赞同：0
> 
> 时间：2012-04-16T15:42:36.133
> 
> 标签：c++, sockets, winsock

我对 winsock2 api 函数的 getnameinfo 有疑问。

我有一个名为 CISocket 的类，其中包含这样的文件：

```
vector<char>* ip; 
```

并具有用于创建名为的套接字的功能：

```
CreateSocket(const vector<char>* ipA,unsigned short nPort,SocketType stype,bool nonBlocking,bool bBindSocket)
{
    ...
    struct addrinfo *result = 0;
struct addrinfo *ptr = 0;
//The addrinfo structure is used by the getaddrinfo function to hold host address information
struct addrinfo hints;
char local_hostname[1025];
const vector<char>* host = ipA;

    ....
    ZeroMemory(&hints,sizeof(hints));

    hints.ai_family = IsIPv46Socket() ? AF_UNSPEC : (IsIPv6Socket() ? AF_INET6 : AF_INET);
hints.ai_socktype = IsStream() ? SOCK_STREAM : SOCK_DGRAM;
hints.ai_protocol = IsStream() ? IPPROTO_TCP : IPPROTO_UDP;
hints.ai_flags = AI_PASSIVE
    #if !IRNET_UNDER_WINDOWS || _WIN32_WINNT>=0x600
    | AI_ADDRCONFIG
    #endif

    getaddrinfo(local_hostname,port,&hints,&result)
    for (ptr=result;ptr;ptr=result->ai_next)
{
         ....
         vector<char>::pointer chPtr = ip->data();
        if (status = GetIPAndPort(this->fd,/*&(*this->ip)*/&(*chPtr),&this->port))
        {
            char* err = gai_strerrorA(status);
            cout<< "Failed To Get Local IP and port.";
            CloseSocket(&this->fd);
            continue;
        }           
    }
} 
```

从这个函数内部，我调用另一个名为 GetIPAndPort 的方法

```
GetIPAndPort( int32_t fd,__out /*vector<char>*/char* ip,__out uint16_t* nPort )
{
if (nPort)
{
    *nPort = 0;
}

if (this->fd > 0)
{
    int status;
    struct sockaddr_storage ss;//retrieved transport address holder
    if (status = GetSocketAddress(this->fd,&ss))
    {
        //cout<< "GetSocketAddress has failed with status code: %d", status"
        return -1;
    }
    int ret = GetSocketIPAndPort((struct sockaddr*)&ss,ip,nPort);
    return ret;
}
} 
```

此方法出现的主要问题：

```
GetSocketIPAndPort( struct sockaddr* ss, char* pIP, uint16_t* nPort )
{
int status = -1;
/*typedef char ip_t[65];
ip_t* pip ={0};
vector<char>* chr = new vector<char>(65);
vector<char>::pointer ptr = pIP->data();*/
if (ss->sa_family == AF_INET)
{
    sockaddr_in *sin = (struct sockaddr_in*)ss;
    if (nPort)
    {
        *nPort = Endianness::HostToNetwork(sin->sin_port);
        status = 0;
    }
    if (pIP)
    {
        if (status = getnameinfo((struct sockaddr*)&sin,sizeof(sockaddr),pIP,/*sizeof(*pIP)*/1025,0,0,NI_NUMERICHOST))
        {
            char* serr = gai_strerrorA(status);
            return status;
        }
    }
}
} 
```

在这个方法中，当 getnameinfo 调用一个错误时说：

**使用了与请求的协议不兼容的地址。**

我该如何解决这个错误？我的错误是什么？

# javascript - 正确对齐 Google Plus One 和 Facebook Like 按钮

> ID：10177304
> 
> 赞同：3
> 
> 时间：2012-04-16T15:42:39.923
> 
> 标签：javascript, facebook, facebook-like, google-plus

我正在尝试将 Google Plus One 和 Facebook Like 按钮并排放置。出于某种原因，Facebook 的点赞按钮在顶部有一个缺口，将其向下移动了几个像素，使其看起来很有趣。

示例：http: [//jsfiddle.net/Chevex/yF4yz/](http://jsfiddle.net/Chevex/yF4yz/)

有没有更好的方法来对齐这两个按钮？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T16:01:16.763

问题是css样式正在加载图像。您可以在页面上（推荐）或在 javascript 中设置 css，在加载时创建文档，并在填充图像后更改值。

添加这个 css 将使 facebook 图标向上移动 3 个像素，向左移动 25 个像素，在 google 图标旁边。

```
div.fb-like
{
    top:-3px;
    left:-25px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:47:23.947

这似乎适用于 Chrome：http: [//jsfiddle.net/yF4yz/8/](http://jsfiddle.net/yF4yz/8/)

# math - 如何获取旋转矩形边界框的宽度和高度

> ID：10177308
> 
> 赞同：1
> 
> 时间：2012-04-16T15:42:49.000
> 
> 标签：math, geometry, trigonometry

> **可能重复：**
> [从旋转的矩形计算边界框坐标，](https://stackoverflow.com/questions/622140/calculate-bounding-box-coordinates-from-a-rotated-rectangle-picture-inside)
> [旋转精灵的 AABB 内的图片？](https://stackoverflow.com/questions/6657479/aabb-of-rotated-sprite)

我有一个宽度为 w 高度为 h 的矩形。我将矩形旋转 r 度（从其中心点开始）。

如何确定旋转后边界框的宽度（w2）和高度（h2）。

![在此处输入图像描述](../Images/08f8a2a1c9d1bc4e2a38f0b51f5d3e4a.png)

# jersey - 如何根据线程策略和参数在嵌入式 Grizzly 实例上调整我的 Jersey 部署

> ID：10177310
> 
> 赞同：1
> 
> 时间：2012-04-16T15:43:11.187
> 
> 标签：jersey, grizzly

如何为线程池实现设置参数？有哪些可能的配置选项，我如何找到相关文档来开始微调我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T06:59:29.400

您是否尝试过研究核心灰熊配置？ [http://grizzly.java.net/nonav/docs/docbkx2.0/html/core-config.html](http://grizzly.java.net/nonav/docs/docbkx2.0/html/core-config.html)

# javascript - 使用 jqueryui 效果与 spinjs

> ID：10177312
> 
> 赞同：0
> 
> 时间：2012-04-16T15:43:18.393
> 
> 标签：javascript, jquery, jquery-ui, coffeescript, spine.js

我正在使用这个依赖项

*   jquery-ui-1.8.18.custom.min.js（自定义但包含所有 jqueryui 组件）
*   jquery-1.7.1.min.js
*   脊柱 1.0.6

我正在使用 jqueryui 开发小型 spinjs 应用程序。我有非常基本的spine.controller

[http://pastie.org/3798705](http://pastie.org/3798705)

我尝试在 show 方法中使用一些 jqueryui 效果。根据此文档，这应该可以工作[http://jqueryui.com/demos/show/](http://jqueryui.com/demos/show/)。

```
@sidebar.el.show('slow')
//or
@sidebar.el.show('bounce',{ percent: 100 },2000);
//or
@sidebar.el.show('explode',{to: { width: 280, height: 185 }},2000); 
```

不幸的是，我看不到任何动画效果，但完成动画后的回调就可以了。此外，如果我将动画速度设置为非常高的数字，例如 5000，我可以看到延迟，然后显示 html 元素并触发回调（完成动画）

ps：fadeIn() 函数按我的预期工作

ps2：我删除了我所有的css，只留下了这个

```
.sidebar
  background-color: red;
  width: 300px;
  height: 300px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:36:51.777

这可能是因为当您开始动画时，您尝试制作动画的元素的父“堆栈”仍处于隐藏状态。

从控制器的构造函数中调用 render() 函数会更有意义，该函数处理将元素附加到堆栈。您可以在此处查看如何执行此操作的一些示例：http: [//spinejs.com/docs/controller_patterns](http://spinejs.com/docs/controller_patterns)

# php - 表格显示错误和备用行着色不适用于第一个表格之后的表格

> ID：10177314
> 
> 赞同：0
> 
> 时间：2012-04-16T15:43:24.487
> 
> 标签：php, mysql, html-table, rows

在我的应用程序中显示页面时，我需要您的帮助。学生档案正在收集学生已修读超过 10 个学期的课程的相关数据。查询工作正常，但显示未按我希望的那样显示。此外，JavaScript 备用行着色不适用于第一个表之后的所有剩余表。我希望在页面显示中有这种性质的东西。

```
 RAIN SEMESTERS
     Year1  Year2  Year3 Year4   Year5       

          HARMATTARN SEMESTERS 
 Year1   Year2   Year3  Year4   Year5 . 
```

这是生成表格的 PHP 示例，其余 9 个表格与不同的年份（1-5）和学期相同：Rain/Harmattan

```
 echo "<div id=\"contentRight\">" ;
             echo "<span class=\"header\">";
  echo "<p><b>Matric Number: $matric_       no</b></p>";
       echo "<p><b>Year: 100 ; Semester:         Hamattarn</b></p>";
           echo "<table class=\"altrowstable\" id=\"alternatecolor\" bgcolor=gold >\n";
                 echo "<tr align=center>\n";
         for ($i=0; $i<$number_cols1; $i++)
                     {
echo "<th>" . mysql_field_name($query1,     $i). "</th>\n";
                     }
                     echo "</tr>\n";
               while ($row = mysql_fetch_row        ($query1))
                    {
                    echo "<tr align=center>\n";
          for ($i=0; $i<$number_cols1; $i++)
                    {
                    echo "<td>";
            if (!isset($row[$i]))
                    {echo "NULL";}
                    else
                    {
                    echo "<b>".$row[$i]."</b>";
                    }
                    echo "</td>\n";
                    }
                    echo "</tr>\n";
                    }
                    echo "</table>";
                    echo"</span>" ; 
```

**CSS**

```
 table.altrowstable td {
 border-width: 2px;
 padding: 4px;
 border-style: solid;
 border-color: #a9c6c9;
 }
 .oddrowcolor{
  background-color:#d4e3e5;
  }
  .evenrowcolor{
  background-color:#c3dde0;
  } 
```

**当前显示的内容**

![](../Images/b32365cd8c594e281a8e093761495003.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:46:11.317

你为什么不使用 jquery 来做交替，这样你的服务器就不会被客户端可以做的事情所困扰。

使用 jquery [:odd](http://api.jquery.com/odd-selector/)选择器，结合[addclass()](http://api.jquery.com/addClass/)

```
// Just a quick example.
$('.classSelector:odd').addClass('oddrowcolor'); 
```

然后，您可以摆脱`for()`php 语句中的 ，而无需自定义格式即可回显数据。

在每一个上`tr`，添加一个名为`classSelector`

只需将其放在结束`</body>`标签之前即可。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
    $('.classSelector:odd').addClass('oddrowcolor');
</script> 
```

这是一个工作示例：http: [//jsfiddle.net/kNGpB/](http://jsfiddle.net/kNGpB/)

# php - PHP：替换字符串中的双引号，而不是 HTML 标记中的双引号

> ID：10177315
> 
> 赞同：1
> 
> 时间：2012-04-16T15:43:32.803
> 
> 标签：php, regex, preg-replace

寻找关于如何用弯引号替换文本块中的常规引号的最佳解决方案，但不更改在 html 标记标记 <....> 中找到的引号我尝试使用 preg-replace，例如：

```
$pattern = '/(?<!=)"\b/';
$lyrics = preg_replace($pattern, "\u201c", $lyrics);
$pattern = '/\b"(?!>)/';
$lyrics = preg_replace($pattern, "\u201d", $lyrics);
$pattern = '/\."/'; // find regular quotes after a period
$lyrics = preg_replace($pattern, ".\u201d", $lyrics);
$pattern = '/\!"/'; // find regular quotes after an exclamation
$lyrics = preg_replace($pattern, "!\u201d", $lyrics);
$pattern = '/"\s/'; // find regular quotes before a space
$lyrics = preg_replace($pattern, "\u201d ", $lyrics); 
```

例如，如果我有以下内容：

```
<a href="http://somelink.com">"This is a quotation." 
```

我希望它最终成为：

```
<a href="http://somelink.com">“This is a quotation.” 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:46:16.547

使用允许您轻松访问文本节点的 HTML 解析器。正则表达式[并不真正适合](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:51:26.513

如果格式正确，您甚至可以使用 xml 解析器。但是您需要首先打开和关闭所有标签（或以这种方式：）`< /br>`。然后，您可以[将带有 php 的 xhtml 解析](http://php.net/manual/en/book.xml.php)为常规 xml。

已编辑：可能重复[突出显示文本，但 html 标记除外](https://stackoverflow.com/questions/2591046/highlight-text-except-html-tags)

# javascript - 返回通过 jQuery 解析的 XML 数据

> ID：10177319
> 
> 赞同：1
> 
> 时间：2012-04-16T15:43:50.310
> 
> 标签：javascript, xml, jquery, xml-parsing, scope

我正在做的是读取一个 XML 文件并通过 jQuery 将数据获取到我的 HTML 文件中。

正如我在许多教程中发现的那样，我使用的是 jQuery 的`.get()`方法。除了一个问题，它对我很有帮助！

**这是 XML 文件：**

```
<?xml version="1.0" encoding="utf-8" ?>
<books>
  <book title="CSS Mastery" imageurl="images/css.jpg">
    <description>
      info goes here.
    </description>
  </book>

  <book title="Professional ASP.NET" imageurl="images/asp.jpg">
    <description>
      info goes here.
    </description>
  </book>

  <book title="Learning jQuery" imageurl="images/lj.jpg">
    <description>
      info goes here.
    </description>
  </book>
</books> 
```

**这是我的带有 jQ​​uery 代码的 HTML 文件：**

```
<!doctype html>
<html>
  <head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" >
      $("document").ready(function() {
        $.get("one.xml", function(d) {
          var title = [];
          var description = [];

          $(d).find("book").each(function() {
            title.push($(this).attr("title"));
            description.push($(this).find("description").text());
          });

          console.log(title);
        });
      });
    </script>
  </head>
  <body>
    // BODY contents...
  </body>
</html> 
```

我想要做的是我希望返回标题和描述，以便我可以在其他函数中使用这些数组。根据 jQuery 代码，我的`title`数组现在正在打印，`console`但是当我尝试在它说`title`的方法之外打印数组时。`.get()``"title is undefined"`

我尝试在函数末尾返回数组，但没有运气。我不确定我是否已经明确了我的问题，所以我粘贴了给我以下错误的代码：

```
<!doctype html>
<html>
  <head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
      $("document").ready(function() {
        $.get("one.xml", function(d){
          var title = [];
          var description = [];

          $(d).find("book").each(function() {
            title.push($(this).attr("title"));
            description.push($(this).find("description").text());
          });
        });

        console.log(title);
      });
    </script>
  </head>
  <body>
    // BODY contents...
  </body>
</html> 
```

在这段代码中，它说`"title isn't defined`并注意到我`title`在方法之外安慰数组`.get()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:56:44.607

只需使用如下：

```
title = [];
description = []; 
```

如果您不在`var`变量名之前使用，它将在全局范围内，因此您也可以在其他函数中使用这两个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:38:32.507

由于范围可变，请看[这里](https://stackoverflow.com/questions/500431/javascript-variable-scope)。如果您想在 javascript 的任何其他函数中使用标题和描述，那么您可以在保存标题和描述（的回调函数内部`$.get`）后立即直接调用该 javascript 函数，如下所示。

```
$("document").ready(function(){
$.get("one.xml", function(d){
    var title       = [];
    var description = [];
    $(d).find("book").each(function(){
        title.push($(this).attr("title"));
        description.push($(this).find("description").text());
    });
    call_to_your_function_with_title_and_desc(title, description)
}); 
```

# android - LocationListener 警报对话框多次弹出

> ID：10177320
> 
> 赞同：0
> 
> 时间：2012-04-16T15:43:50.757
> 
> 标签：android, dialog, location, listener, alert

我有一个位置监听器，它会弹出一个关于接近度的警报对话框。但是，当我四处走动时，它会一次又一次地弹出相同的警报对话框。有没有办法在弹出警报对话框时禁用位置监听器，并在用户提交或关闭警报对话框时重新启用位置监听器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:00:33.617

显示警报对话框后

```
 alertDialog.show(); 
```

称呼

```
 locManager.removeUpdates(locListener);
  //here locManager is your LocationManager object and locListener is your LocationListener 
```

然后在用户单击警报对话框的某个按钮后，再次像这样注册位置侦听器..

```
 alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
  public void onClick(DialogInterface dialog, int which) {

   //here register for location listener again..

     locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, updateInterval, updateDistance, locListener);

} }); 
```

# android - 适用于 Panda Board 的 Android Root ICS

> ID：10177323
> 
> 赞同：3
> 
> 时间：2012-04-16T15:44:16.380
> 
> 标签：android, pandaboard

我已经下载了 ICS 源代码并为我的熊猫板构建了它。在[Pandaboard](http://pandaboard.org/)上安装 ICS 后，我意识到它没有植根。

有人可以指导我如何在熊猫板上植根 ICS 吗？我可以更改内核源代码，但我怀疑必须有其他方法。

基本上我有一个应用程序需要执行一个需要超级用户权限的命令，所以我需要对我的熊猫板进行超级用户访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T05:59:30.327

如果您知道如何构建 AOSP 源代码树，您应该能够编辑 ./system/core/rootdir/init.rc 文件并调整权限。例如，要获得控制台根访问权限，您需要编辑“服务控制台/system/bin/sh”部分并将用户和组更改为根。

```
service console /system/bin/sh
    class core
    console
    disabled
    user root
    group root 
```

在此之后，您可以重建您的引导映像以使用新的 init.rc 更新您的 ramdisk。只需运行 make bootimage，然后将新创建的带有 fastboot 的启动映像上传到您的 PandaBoard SD 卡。

```
fastboot flash boot 
```

确保将 PandaBoard 置于快速启动模式。

# machine-learning - 为什么权重向量与神经网络中的决策平面正交

> ID：10177330
> 
> 赞同：41
> 
> 时间：2012-04-16T15:44:47.230
> 
> 标签：machine-learning, neural-network, artificial-intelligence, perceptron, biological-neural-network

我是神经网络的初学者。我正在学习感知器。我的问题是为什么权重向量垂直于决策边界（超平面）？我参考了很多书，但都提到权重向量垂直于决策边界，但没有人说为什么？

谁能给我解释或参考一本书？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-27T19:59:29.833

权重只是定义分离平面的系数。目前，忘掉神经元，只考虑 N 维平面的几何定义：

```
w1*x1 + w2*x2 + ... + wN*xN - w0 = 0 
```

您也可以将其视为一个点积：

```
w*x - w0 = 0 
```

其中`w`和`x`都是长度为 N 的向量。这个方程适用于平面上的所有点。回想一下，我们可以将上面的方程乘以一个常数，它仍然成立，所以我们可以定义常数，使向量`w`具有单位长度。现在，拿出一张纸并画出你的坐标`x-y`轴（在上面的等式中）。接下来，在原点附近的某处画一条线（ 中的平面）。是从原点到平面的垂直距离，是从原点沿该垂线指向的单位矢量。如果现在从原点到平面上的任意点绘制一个向量，该向量与单位向量的点积将始终等于`x1``x2``2D``w0``w``w``w0`所以上面的等式成立，对吧？这只是平面的几何定义：一个单位向量定义了平面的垂线 ( ) 和从原点到平面`w`的距离 ( )。`w0`

现在我们的神经元只是表示与上述相同的平面，但我们只是对变量的描述略有不同。我们称`x`“输入”的分量，`w`“权重”的分量，我们称距离`w0`为偏差。这里的所有都是它的。

超出您的实际问题，我们并不真正关心飞机上的点。我们真的很想知道一个点落在平面的哪一侧。虽然`w*x - w0`在平面上正好为零，但平面一侧的点为正值，另一侧的点为负值。这就是神经元的激活功能发挥作用的地方，但这超出了您的实际问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-17T10:47:55.840

直观地说，在二元问题中，权向量指向“1”类的方向，而“0”类则指向远离权向量的方向。因此，决策边界应垂直于权重向量绘制。

请参阅图像以获取简化示例：您有一个只有 1 个输入的神经网络，因此具有 1 个权重。如果权重为 -1（蓝色向量），则所有负输入都将变为正，因此整个负谱将分配给“1”类，而正谱将是“0”类。因此，2 轴平面中的决策边界是通过原点的垂直线（红线）。简单地说它是垂直于权重向量的线。

让我们用几个值来看看这个例子。如果所有的总和`inputs * weights`大于 0（默认阈值），则感知器的输出为 1 类，否则如果输出小于 0 的阈值，则该类为 0。您的输入值为 1。权重应用于这个单一的输入是 -1，所以`1 * -1 = -1`它小于 0。因此输入被分配为 0 类（注意：0 类和 1 类可能刚刚被称为 A 类或 B 类，不要将它们与输入和权重混淆值）。相反，如果输入为-1，`input * weight`则为`-1 * -1 = 1`，大于 0，所以输入被分配到类 1。如果你尝试每个输入值，你会看到这个例子中所有的负值都有一个大于 0 的输出，所以它们都属于类 1。所有正值的输出都小于 0，因此将被归类为 0 类。画一条分隔所有正负输入值的线（红线），您会看到这条线垂直于权重向量。

另请注意，权重向量仅用于修改输入以适应所需的输出。没有权重向量会怎样？输入 1 将导致输出 1，大于阈值 0，因此类为“1”。

![图片](../Images/63ab3249f81f979108fcfacf0bf2b82b.png)

[此页面](http://www.mathworks.nl/help/toolbox/nnet/ug/bss4hat-2.html)上的第二张图片显示了一个带有 2 个输入和一个偏差的感知器。第一个输入与我的示例具有相同的权重，而第二个输入的权重为 1。因此，如图所示，相应的权重向量与决策边界一起发生了变化。由于增加了 1 的偏差，决策边界也向右平移。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-12-07T19:36:05.300

这是从更基本的线性代数/微积分的角度来看的观点：

平面的一般方程是 Ax + By + Cz = D（可以扩展到更高维度）。可以从这个方程中提取法向量：[ABC]；它是与平面上所有其他向量正交的向量。

现在如果我们有一个权重向量 [w1 w2 w3]，那么 w^T * x >= 0（得到正分类）和 w^T * x < 0（得到负分类）什么时候做。WLOG，我们也可以做 w^T * x >= d。现在，你知道我要去哪里了吗？

权重向量与第一部分的法线向量相同。正如我们所知，这个法线向量（和一个点）定义了一个平面：这正是决策边界。因此，因为法向量与平面正交，所以权向量也与决策边界正交。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-12-11T10:11:26.233

1.  从最简单的形式开始，`ax + by = 0`，权向量为`[a, b]`，特征向量为`[x, y]`
2.  然后`y = (-a/b)x`是有斜率的决策边界`-a/b`
3.  权重向量有斜率`b/a`
4.  如果将这两个斜率相乘，结果是`-1`
5.  这证明了决策边界垂直于权重向量

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-08T01:16:50.193

虽然这个问题是2年前提出的，但我想很多学生都会有同样的疑问。我得到了这个答案，因为我问了同样的问题。

现在，想想 X，Y（笛卡尔坐标系是一个坐标系，它通过一对数值坐标唯一地指定平面中的每个点，这些坐标是从该点到两条固定的垂直有向线的有符号距离 [[来自维基百科](http://en.wikipedia.org/wiki/Cartesian_coordinate_system)] ）。

如果 Y = 3X，在几何中 Y 垂直于 X，则令 w = 3，然后 Y = wX，w = Y/X 如果我们想画出 X 之间的关系，w 我们将有两条垂直线，就像当我们画出 X、Y 之间的关系。所以总是认为 w 系数垂直于 X 和 Y。

# c++ - 理解写得不好的代码，第二年的 CS 过去的论文

> ID：10177331
> 
> 赞同：10
> 
> 时间：2012-04-16T15:44:57.350
> 
> 标签：c++, c, algorithm, coding-style

问题是描述代码做什么，函数做什么。

以下代码是第二年 C 和 C++ 模块过去试卷的一部分。任务是描述以下代码的作用。我已经完全按照呈现的方式编写了代码，并添加了我自己的一些注释。

```
int g(int * y, unsigned size, int z) {
    int tmp = y[0];
    // what type is unsigned size? Int I presume. Why would you add an int to an array of ints?
    int * b = y + size; 
    y[0] = z;
    // I have the most difficulty understanding the following.
    while (1) if (*(--b)==z){y[0] = tmp; return b - y;};
    // are the following 3 lines ever even reached?
    y[0] = tmp;
    if (tmp == z) return 0;
    else return -1;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T15:55:38.020

```
// what type is unsigned size? 
```

这是一个`unsigned int`叫`size`. 您可以像在普通指针算术中一样将它添加到指针 - 将此指针推进到数组的最末端。

```
while (1) if (*(--b)==z){y[0] = tmp; return b - y;}; 
```

好的，我们有

*   `while(1)`= while(true)，或“永远循环”
*   `*(--b)`预减 b 并从数组的索引中读取值
*   如果我们找到了 z，用我们从中读取的值替换第一个元素并返回`b-y`- 我们所在的数组索引的指针算法

即我们正在向后扫描数组以找到最后一个实例`z`并返回我们找到它的索引。我们总是会`z`在数组中找到，因为我们将它作为第一个元素放在那里，即如果`z`不在数组中，则返回 0。

```
// are the following 3 lines ever even reached? 
```

不，我不这么认为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-16T15:55:35.340

> what type is unsigned size

`unsigned` is short for `unsigned int`.

> Why would you add an int to an array of ints?

Pointers and arrays are not the same thing. The code you've shown is using pointers, not arrays. After the `int * b = y + size;` line, `b` is a pointer that points to the entry `size` entries from where `y` is pointing. For example, if `size` were `2`, `b` would be pointing to the third entry. ASCII-art:

```
+---------+
| entry 0 |<--- `y` points here
| entry 1 |
| entry 2 |<--- `b` points here if `size` is `2`
| entry 3 |
| entry 4 |
+---------+ 
```

> I have the most difficulty understanding the following.
> 
> `while (1) if (*(--b)==z){y[0] = tmp; return b - y;};`

The loop looks at the entries in the memory pointed to by `y` starting with the entry *before* the one identified by `size`. If the entry is `==` to `z`, it sets `y[0]` to `tmp` and returns the index at which the entry was found (by using pointer arithmetic, `b - y` returns the number of entries between where `b` is pointing and the beginning of `y`. Since `--b` decrements the pointer, the loop works backward through the memory.

> are the following 3 lines ever even reached?

No. The `return` will exit the function when the first matching entry is found, which may be at the beginning (as `y[0]` is set to `z` early on). As Ted Hoff points out in the comments, though, the loop will start and continue past the beginning (where `y` is pointing) if `size` is `0` on entry, which would probably eventually cause the program to fail with a memory access violation.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-16T16:16:14.347

这段代码做的第一件事就是证明作者无能。但我认为这是任务的一部分：理解不称职的人编写的代码。

对于初学者：

*   `unsigned`是一个有效的 C++ 类型，是`unsigned int`. 通常最好避免，除非您进行位操作。

*   您的代码中没有数组；您正在向指针添加一个整数。奇怪的`[]`是，不是数组索引，而是
    定义`a[b]`为完全等价于`*(a+b)`. （至少对于内置类型。）你可能想找一本关于 C 的书来解释这一点；在 C++ 中，我们通常使用`std::vector`, 正是为了避免所有关于指针运算的混淆。

至于你难以理解的部分：对于初学者，让我们以理智的方式编写它：

```
while ( true ) {
    -- b;
    if ( *b == z ) {
        y[0] = tmp;
        return b - y;
    }
} 
```

唯一会引起问题的是 return 语句：这是指针减法；在这种情况下，因为`y`是数组的第一个元素（从代码的其余部分判断），`b - y` 所以计算 指向的元素的索引`b`。

在这里使用指针将是纯粹的混淆，除了这个习惯用法在 C 中无处不在，并且在 C++ 中使用迭代器进行。

你是对的，循环之后的代码永远不会被执行；离开循环的唯一方法是通过`return`.

编写循环的更简洁的方法是：

```
int i = size;
while ( i != 0 && y[i - 1] != z ) {
    -- i;
}
y[0] = tmp;
return i; 
```

# jquery - 如何在使用 jquery 加载 ajax 后删除一个类？

> ID：10177338
> 
> 赞同：2
> 
> 时间：2012-04-16T15:45:34.237
> 
> 标签：jquery

如何在使用 jquery 加载 ajax 后删除一个类？

首先，我将一个仅包含列表信息的 html 文件加载到 ul_list 的 ul id 中

```
 $("#ul_list").load("testListResults"); 
```

接下来，我尝试删除所有高亮类文件：

```
 $("#ul_list li").removeClass("highLight"); // this is not working, still see the list background high light color. 
```

接下来，我尝试获取第一个列表的文本信息。

```
 $("#ul_list li:first").text();  // this is not working either, showing empty. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:46:25.143

将您的更改添加到回调函数。这将确保在 ajax 加载完成之前不会运行脚本。

```
$("#ul_list").load("testListResults", function(){
   $("#ul_list li").removeClass("highLight");
   $("#ul_list li:first").text();
}); 
```

关于您的第二点，我不知道您要做什么，`$("#ul_list li:first").text();`因为您没有将其分配给变量，而是尝试`.html()`：

```
$("#ul_list li:first").html(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:46:40.913

```
$("#ul_list").load("testListResults", function() {
    $("#ul_list li").removeClass("highLight");
    $("#ul_list li:first").text();
}); 
```

# java - 如何扩展 complexType 但子类型中没有子元素？

> ID：10177341
> 
> 赞同：0
> 
> 时间：2012-04-16T15:45:55.880
> 
> 标签：java, xml, xsd, jaxb

我目前有一个xsd的以下部分......

```
<xs:element name="requestExtension">
    <xs:complexType>
        <xs:complexContent>
            <xs:extension base="abstractRequest"> 
                <xs:sequence>
                        <xs:element name="unusedReqPart" type="xs:string" minOccurs="0"/>   
                    </xs:sequence>
                </xs:extension>
            </xs:complexContent>
    </xs:complexType>
</xs:element> 
```

我需要 requestExtension 来扩展 abstractRequest 但如何摆脱 usedReqPart 以便我的 jaxb 生成仍然有效？

为清楚起见进行编辑：我“希望”包含超类的元素。我不想删除它们。我只希望删除上面称为“unusedReqPart”的子类型元素。我只是暂时把它放在那里，这样我的 jaxb 东西才能正确编译。我已经通过使用 minOccurs="0" 使其遵守现有协议，因为该元素从未使用过（所以如果可以的话，我宁愿完全删除它）。

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T23:44:51.267

这几乎感觉像是一个技巧问题......除非语言就是这样，否则它很简单：

```
<xs:element name="requestExtension"> 
    <xs:complexType> 
        <xs:complexContent> 
            <xs:extension base="abstractRequest"/>
        </xs:complexContent> 
    </xs:complexType> 
</xs:element> 
```

没有理由不使用“空”粒子来扩展它。反过来，它允许您在基本类型之上没有任何新内容的具体（因此可用）类型。

我确定您不想接受限制（如答案之一所述）；那里的效果是它消除了整个内容模型（有效地使其为空）。

听到 JAXB 无法与我在上面提出的建议一起使用，我会感到惊讶；如果您发现没有，请使用您正在使用的 JAXB 的特定版本号以及未通过验证的生成类的片段更新您的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:53:30.340

您可以将 abstractRequest 拆分为 2 种类型，一种 (A) 扩展另一种 (B)，其中 A 定义了仅 A 需要的部分。您的 requestExtension 然后可以扩展 B，因此不会有不需要的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:01:02.527

当您想要限制来自父级的元素时，您应该使用如下：

```
<xs:restriction base="abstractRequest">
   <xs:sequence>

  </xs:sequence>
</xs:restriction> 
```

这将阻止元素在父级的子级中生成。

# iphone - 滚动 - 从图像创建缩略图

> ID：10177343
> 
> 赞同：0
> 
> 时间：2012-04-16T15:45:58.690
> 
> 标签：iphone, objective-c, ios, uiscrollview

有人可以讨论一下如何修改[滚动项目](https://developer.apple.com/library/ios/#samplecode/Scrolling/Introduction/Intro.html)，使其显示一个图像，而其他图像部分显示在左右两侧吗？就像您转到页面管理器时的移动 safari...这是关键，以便用户在向右滚动时知道还有更多图像。**这两种方法都取自 Scrolling 项目。**

设置滚动视图的方法：

```
ViewDidLoad {

self.view.backgroundColor = [UIColor viewFlipsideBackgroundColor];

// 1\. setup the scrollview for multiple images and add it to the view controller
//
// note: the following can be done in Interface Builder, but we show this in code for clarity
[scrollView1 setBackgroundColor:[UIColor blackColor]];
[scrollView1 setCanCancelContentTouches:NO];
scrollView1.indicatorStyle = UIScrollViewIndicatorStyleWhite;
scrollView1.clipsToBounds = YES;        // default is NO, we want to restrict drawing within our scrollview
scrollView1.scrollEnabled = YES;

// pagingEnabled property default is NO, if set the scroller will stop or snap at each photo
// if you want free-flowing scroll, don't set this property.
scrollView1.pagingEnabled = YES;

// load all the images from our bundle and add them to the scroll view
NSUInteger i;
for (i = 1; i <= kNumImages; i++)
{
    NSString *imageName = [NSString stringWithFormat:@"image%d.jpg", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

    // setup each frame to a default height and width, it will be properly placed when we call "updateScrollList"
    CGRect rect = imageView.frame;
    rect.size.height = kScrollObjHeight;
    rect.size.width = kScrollObjWidth;
    imageView.frame = rect;
    imageView.tag = i;  // tag our images for later use when we place them in serial fashion
    [scrollView1 addSubview:imageView];
    [imageView release];
}

[self layoutScrollImages];  // now place the photos in serial layout within the scrollview
} 
```

设置布局的方法：

```
- (void)layoutScrollImages
{
UIImageView *view = nil;
NSArray *subviews = [scrollView1 subviews];

// reposition all image subviews in a horizontal serial fashion
CGFloat curXLoc = 0;
for (view in subviews)
{
    if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
    {
        CGRect frame = view.frame;
        frame.origin = CGPointMake(curXLoc, 0);
        view.frame = frame;

        curXLoc += (kScrollObjWidth);
    }
}

// set the content size so it can be scrollable
[scrollView1 setContentSize:CGSizeMake((kNumImages * kScrollObjWidth), [scrollView1 bounds].size.height)];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:40:30.360

在我以前的应用程序中，我创建了图像厨房视图，我在滚动视图上放置了一些自定义按钮，因此用户可以在单击该按钮时看到完整图像。

这是代码希望它会帮助你

```
 UIScrollView *Sview = [[UIScrollView alloc] 
                      initWithFrame:[[UIScreen mainScreen] bounds]];

int row = 0;
int column = 0;
for(int i = 0; i < self.data.getCustomers.count; ++i) {

     customerToEdit = [self.data.getCustomers objectAtIndex:i];

     NSURL* imgUrl = [NSURL URLWithString:@"your image url array objects"];

    UIImage* thumb = [UIImage imageWithData:[NSData dataWithContentsOfURL:imgUrl]];

    //UIImage *thumb = [_thumbs objectAtIndex:i];

    UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];

    button.frame = CGRectMake(column*100+24, row*80+10, 64, 64);

    [button setImage:thumb forState:UIControlStateNormal];

    [button addTarget:self 
               action:@selector(buttonClicked:) 
     forControlEvents:UIControlEventTouchUpInside];

    button.tag = i; 

    [Sview addSubview:button];

    if (column == 2) {
        column = 0;
        row++;
    } else {
        column++;
    }

}

[view setContentSize:CGSizeMake(320, (row+1) * 80 + 10)];   
self.view = view; // or u can  [self.view addsubview:Sview]; 
```

# .net - 分组数据上的淘汰赛 foreach 数据绑定

> ID：10177344
> 
> 赞同：0
> 
> 时间：2012-04-16T15:46:02.463
> 
> 标签：.net, json, jquery-mobile, knockout.js, igrouping

我试图弄清楚如何使用淘汰赛 foreach 数据绑定遍历 .Net 分组。我遇到的问题是，一旦将 IGroupings 序列化为 JSON，我不知道如何迭代 .Net 集合......

在服务器端，我有一个如下所示的 .Net 对象：

```
public class BookingResult
{
    public IEnumerable<IGrouping<DateTime, BookingLeg>> Grouped { get; set; }
} 

public class BookingLeg
{
    public string DepartureDate { get; set; }
    public string ArrivalDate { get; set; }
    public string Name { get; set; }

    public DateTime StartDate { get; set; }
} 
```

我正在通过将实体`Grouped`集合`BookingLeg`按其分组来创建属性`StartDate`。`BookingResult`然后我使用 JSON返回实体。为该`Grouped`属性生成的 JSON 如下所示（我已折叠并展开节点，以便您更好地了解生成的内容）：

![在此处输入图像描述](../Images/b82f1247ccd8369c4b8c1cbd75fd8d9e.png)

我想在我的客户端上做的是创建一个模板并绑定到敲除 foreach 绑定，将键作为列表标题输出，然后对于该键中的每个值，从该值中输出一些详细信息。它看起来像这样：

```
01/01/2012
  - Transfer
  - Flight
  - Transfer
03/01/2012
  - Transfer
  - Cruise

... 
```

我试图这样做：

```
<ul data-role="listview" data-bind="foreach: Grouped">
    <li data-role="list-divider"><span data-bind="text: Key"></span></li>
    <li data-bind="text: Name, click: $parent.getBookingLegDetail"></li>
</ul> 
```

我知道以上是错误的，因为一个 - 分组中不存在密钥。

**有谁知道如何创建模板以正确输出列表中分组的键和值？** 顺便说一句，我在这里也使用 jquery mobile（因此是数据角色的东西）。

谢谢！

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:04:01.410

JavaScriptSerializer 不处理 IGrouping 对象中的 Key 属性。有关类似问题和可能的解决方案，请参阅[此问题。](https://stackoverflow.com/q/1449142/360053)

# objective-c - 带有 NSPopover 和 NSTextField 的 NSStatusItem

> ID：10177359
> 
> 赞同：3
> 
> 时间：2012-04-16T15:46:54.357
> 
> 标签：objective-c, nstextfield, nsstatusitem, nspopover

我有一个 NSStatusItem ，它显示一个 NSPopover ，其中包含一个 NSTextField 但文本字段不可编辑，尽管它在 Xcode 中一直如此。现在这是一个已知的错误，显然有人在[这里](https://stackoverflow.com/questions/7214273/nstextfield-on-nspopover/7794324#7794324)发布了一个解决方案。我真的需要解决这个错误。

为方便起见，我将在这里引用答案：

> 主要问题是键盘事件的工作方式。虽然 NSTextField（和他所有的超级视图）接收键盘事件，但他没有做任何动作。发生这种情况是因为附加弹出窗口的视图位于不能成为关键窗口的窗口中。你绝对不能访问那个窗口，至少我不能。因此解决方案是使用类别覆盖应用程序中每个 NSWindow 的方法 canBecomeKeyWindow。

```
NSWindow+canBecomeKeyWindow.h
@interface NSWindow (canBecomeKeyWindow)

@end

NSWindow+canBecomeKeyWindow.m
@implementation NSWindow (canBecomeKeyWindow)

//This is to fix a bug with 10.7 where an NSPopover with a text field cannot be edited if its parent window won't become key
//The pragma statements disable the corresponding warning for overriding an already-implemented method
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wobjc-protocol-method-implementation"
- (BOOL)canBecomeKeyWindow
{
    return YES;
}
#pragma clang diagnostic pop

@end 
```

> 这使得弹出框完全响应。如果您需要另一个必须对 canBecomeKeyWindow 响应 NO 的窗口，您总是可以创建一个子类。

我真的不明白我应该做什么。我是否只创建这两个文件 NSWindow+canBecomeKeyWindow (.h 和 .m) 就可以了？因为它对我不起作用。

我对此不确定，但这仅在我实际使用显示 NSPopover 的 NSWindow 时才有效吗？我没有使用 NSWindow，如何让 NSTextField 可编辑？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T04:06:40.137

是的，只需将 NSWindow+canBecomeKeyWindow（.h 和 .m）文件添加到您的项目中，它应该可以工作。我在我目前正在开发的应用程序中使用了这种技术，并且效果很好。确保 NSWindow+canBecomeKeyWindow.m 列在项目构建阶段的“编译源”下。

顺便说一句，我在使用 NSPopover 显示来自 NSStatusItem 的窗口时遇到了其他问题。我实际上并没有尝试在我的项目中使用它，但这[看起来](https://github.com/shpakovski/Popup)很有希望作为替代方案。

# hadoop - 如何运行计算并照顾远程 Hadoop 集群的计算过程？

> ID：10177362
> 
> 赞同：2
> 
> 时间：2012-04-16T15:47:01.510
> 
> 标签：hadoop

我有一个 java 程序，我想将任务（jar）从它发送到远程 Hadoop。我当然需要将特殊参数传递给 jar。
如果计算任务刚刚结束，java程序必须知道这一点。

我可以通过hadoop API来做吗？
我在哪里可以获得文章或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:42:00.510

Hadoop为此提供了一些API。因此，如果您为 Hadoop 作业编写 Java 代码，您可以定义作业特征，例如：

job.SetMapperClass()、job.setReducerClass()、job.setPartitionerClass()、job.setInputPath()等。

然后你运行你的工作，你可以通过使用等待工作完成

job.waitForCompletion(true)

# c# - 模拟具体 FileInfo 对象

> ID：10177363
> 
> 赞同：4
> 
> 时间：2012-04-16T15:47:06.570
> 
> 标签：c#, mocking, justmock

我想模拟 System.IO.FileInfo.Extension 方法并让它返回“.xls”，但我什么也做不了

[此示例](http://www.telerik.com/help/justmock/advanced-usage-mscorlib-mocking.html#MockingFileInfo)适用于删除但不适用于扩展（代码不会编译）

```
 [ClassInitialize]
      public static void Initialize(TestContext context)
      {
         Mock.Partial<FileInfo>().For((x) => x.Extension);
      } 
```

我也尝试过使用这个[例子](http://www.telerik.com/help/justmock/advanced-usage-concrete-mocking.html)，但代码是错误的。

*   我有 JustMock 的完全许可副本
*   我正在使用 VS 2010 .net 4.0

编辑：我知道我可以设置一个接口并以这种方式进行测试，但付费版本的 JustMock 应该模拟具体的类。既然我付了钱，我想知道怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:55:24.133

It sounds to me like you just need to abstract that dependency into another wrapper class and then it would be easy to mock.

```
 public class FileInfoAbstraction
 {
      protected FileInfo _fileInfo = null;

      public virtual string Extension
      {
          get { return _fileInfo.Extension; }
      }

      public FileInfoAbstraction(string path)
      {
          _fileInfo = new FileInfo(path);
      }
 } 
```

Then, wherever you were using the FileInfo class, insert your abstraction:

```
 var myFileInfo = new FileInfoAbstraction(somePath); 
```

Because the extension is marked as virtual now, most mocking frameworks will be able to modify it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:02:38.150

猜我错过了一个属性

```
[TestClass, MockClass] // **MockClass Added**
public class UnitTest1
{
        [ClassInitialize]
        public static void Init(TestContext context)
        {
             Mock.Partial<FileInfo>().For<FileInfo, string>(x => x.Extension);
        }

       [TestMethod]
       public void ShouldAssertFileInfoExtension()
       {
           var fileInfo = Mock.Create<FileInfo>(Constructor.Mocked);

           string expected = "test";

           Mock.Arrange(() => fileInfo.Extension).Returns(expected);

           Assert.AreEqual(fileInfo.Extension, expected);
       }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T17:16:34.873

使用最新版本的 JustMock（2012 年第二季度）。您不再需要 MockClassAtriibute 来模拟 MsCrolib 成员。

您可以通过以下方式编写上述测试：

```
[TestClass]
public class UnitTest1
{
        [ClassInitialize]
        public static void Init(TestContext context)
        {
            Mock.Replace<FileInfo, string>(x=> x.Extension).In<UnitTest1>();
        }

       [TestMethod]
       public void ShouldAssertFileInfoExtension()
       {
           var fileInfo = Mock.Create<FileInfo>(Constructor.Mocked);

           string expected = "test";

           Mock.Arrange(() => fileInfo.Extension).Returns(expected);

           Assert.AreEqual(fileInfo.Extension, expected);
       }
} 
```

# java - 如何从 repl 中检查 Clojure 生成的 java 字节码？

> ID：10177364
> 
> 赞同：9
> 
> 时间：2012-04-16T15:47:06.640
> 
> 标签：java, clojure, bytecode

我找不到关于这个主题的太多信息。看起来jswat可以用来完成这个，但我找不到任何分步教程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-23T01:34:38.040

您可以为此使用 no-disassemble 库。[https://github.com/gtrak/no.disassemble](https://github.com/gtrak/no.disassemble)

在 Leiningen 项目中作为插件添加：`:plugins [[lein-nodisassemble "0.1.3"]]`

```
=> (use 'no.disassemble)
nil
=> (println (disassemble (fn [] (+ 1 2))))
// Compiled from form-init9238501799627991.clj (version 1.5 : 49.0, super bit)
public final class vecperf.bench$eval1426$fn__1427 extends clojure.lang.AFunction {

  // Field descriptor #7 Lclojure/lang/Var;
  public static final clojure.lang.Var const__0;

  // Field descriptor #9 Ljava/lang/Object;
  public static final java.lang.Object const__1;

  // Field descriptor #9 Ljava/lang/Object;
  public static final java.lang.Object const__2;

  // Method descriptor #12 ()V
  // Stack: 2, Locals: 0
  public static {};
     0  ldc <String "clojure.core"> [14]
     2  ldc <String "+"> [16]
     4  invokestatic clojure.lang.RT.var(java.lang.String, java.lang.String) : clojure.lang.Var [22]
     7  checkcast clojure.lang.Var [24]
    10  putstatic vecperf.bench$eval1426$fn__1427.const__0 : clojure.lang.Var [26]
    13  lconst_1
    14  invokestatic java.lang.Long.valueOf(long) : java.lang.Long [32]
    17  putstatic vecperf.bench$eval1426$fn__1427.const__1 : java.lang.Object [34]
    20  ldc2_w <Long 2> [35]
    23  invokestatic java.lang.Long.valueOf(long) : java.lang.Long [32]
    26  putstatic vecperf.bench$eval1426$fn__1427.const__2 : java.lang.Object [38]
    29  return
      Line numbers:
        [pc: 0, line: 1]

  // Method descriptor #12 ()V
  // Stack: 1, Locals: 1
  public bench$eval1426$fn__1427();
    0  aload_0 [this]
    1  invokespecial clojure.lang.AFunction() [41]
    4  return
      Line numbers:
        [pc: 0, line: 1]

  // Method descriptor #43 ()Ljava/lang/Object;
  // Stack: 4, Locals: 1
  public java.lang.Object invoke();
     0  lconst_1
     1  ldc2_w <Long 2> [35]
     4  invokestatic clojure.lang.Numbers.add(long, long) : long [49]
     7  invokestatic clojure.lang.Numbers.num(long) : java.lang.Number [53]
    10  areturn
      Line numbers:
        [pc: 0, line: 1]
        [pc: 0, line: 1]
      Local variable table:
        [pc: 0, pc: 10] local: this index: 0 type: java.lang.Object

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T16:19:52.327

查看[cider-decompile](https://github.com/clojure-emacs/cider-decompile)。仅当您的编辑器是 Emacs 时才有用，因为它是 Clojure IDE 和 Emacs 的 REPL（构建在 nREPL 之上）的扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T10:02:19.783

您可以调用 javap -c 命令： [http ://docs.oracle.com/javase/7/docs/technotes/tools/windows/javap.html](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javap.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T09:23:00.720

这个怎么样：[https ://github.com/nathanmarz/serializable-fn](https://github.com/nathanmarz/serializable-fn)

来自自述演示：

```
(use 'serializable.fn)

;; note that this function being created has a function value in its closure
(def f (let [x + c 2]
          (fn [a b] (x a b c))))

(println (f 1 2))

;; 5

(def b (serialize f))

(println (seq b))

;; (0 0 0 2 0 0 0 -79 0 0 0 2 0 1 99 0 0 0 90 0 0 0 3 0 0 0 82 -84 -19 0 5 115 114 0 14 106 97 118 97 46 108 97 110 103 46 76 111 110 103 59 -117 -28 -112 -52 -113 35 -33 2 0 1 74 0 5 118 97 108 117 101 120 114 0 16 106 97 118 97 46 108 97 110 103 46 78 117 109 98 101 114 -122 -84 -107 29 11 -108 -32 -117 2 0 0 120 112 0 0 0 0 0 0 0 2 0 1 120 0 0 0 25 0 0 0 1 0 0 0 17 0 12 99 108 111 106 117 114 101 46 99 111 114 101 0 1 43 0 4 117 115 101 114 0 36 40 115 101 114 105 97 108 105 122 97 98 108 101 46 102 110 47 102 110 32 91 97 32 98 93 32 40 120 32 97 32 98 32 99 41 41)

;; now, restart the repl

(def b
(byte-array (map byte '(0 0 0 2 0 0 0 -79 0 0 0 2 0 1 99 0 0 0 90 0 0 0 3 0 0 0 82 -84 -19 0 5 115 114 0 14 106 97 118 97 46 108 97 110 103 46 76 111 110 103 59 -117 -28 -112 -52 -113 35 -33 2 0 1 74 0 5 118 97 108 117 101 120 114 0 16 106 97 118 97 46 108 97 110 103 46 78 117 109 98 101 114 -122 -84 -107 29 11 -108 -32 -117 2 0 0 120 112 0 0 0 0 0 0 0 2 0 1 120 0 0 0 25 0 0 0 1 0 0 0 17 0 12 99 108 111 106 117 114 101 46 99 111 114 101 0 1 43 0 4 117 115 101 114 0 36 40 115 101 114 105 97 108 105 122 97 98 108 101 46 102 110 47 102 110 32 91 97 32 98 93 32 40 120 32 97 32 98 32 99 41 41))))

(use 'serializable.fn)

(def f (deserialize b))

(println f 1 2)

;; 5 
```

# jquery - JQUERY - 如何编写一个 jquery 函数来根据选择的下拉选项填充带有地址的文本区域字段

> ID：10177370
> 
> 赞同：0
> 
> 时间：2012-04-16T15:47:18.903
> 
> 标签：jquery, html

通过 jquery 执行此操作的最佳方法是什么？

我有一个带有位置名称/标题的保管箱 [中心标题]。我需要将地址与名称相关联，然后在更改保管箱时，我需要将地址填充到两个文本区域框中

有一堆中心和它们对应的地址，所以我想我想把它放在一个外部的js文件中。

这是我的 html，我只是无法清楚地了解 jquery。

```
<fieldset name="Group1">
                <legend>Group box</legend>
                Center Title:<select name="ctrTitles" id="ctrTitles">
                <option value="Corp 1">Corp 1</option>
                <option value="Shamrock Gold">Shamrock Gold</option>
                <option value="Hensin Way">Hensin Way</option>
            </select><br /><br />
            Address 1: <textarea name="TextArea1" id="TextArea1" cols="20" rows="2"></textarea><br /><br />
            Address 2: <textarea name="TextArea2" id="TextArea2"cols="20" rows="2"></textarea>
            </fieldset> 
```

​在这里查看我的 jsFiddle：`http://jsfiddle.net/justmelat/WcXpk/`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:55:00.720

something like this?

```
$('#ctrTitles').change(function() {
   address = $(this).val();
   $("#TextArea1, #TextArea2").val(address);    
}); 
```

[http://jsfiddle.net/WcXpk/3/](http://jsfiddle.net/WcXpk/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:05:22.637

```
$('select#ctrTitles').change(function() {
    var index = $(':selected', this).index();
    $("#TextArea1, #TextArea2").val(centerLocations[index]['address']); // if your address array sync with `<select><option>` order
}); 
```

这是完整的代码：

```
var centerLocations = new Array(
    {value : 'Corp 1', address : 'Address 1'},
    {value : 'Shamrock Gold', address : 'Shamrock Gold Address 2'},
    {value : 'Hensin Way', address : 'Hensin Way Address 3'}
);

function findAddress(value) {
    var address = '';
    $.each(centerLocations, function() {
        if(new RegExp(this.value, 'ig').test(value)) {
            address = this.address;
        }
    });
    return address;
}
$('select#ctrTitles').change(function() {
    var index = $(':selected', this).index(),
        val = $(this).val();
    $("#TextArea1, #TextArea2").val(findAddress(val));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:58:28.637

```
 $('#ctrTitles').change(function() {
       var centreName = $(this).val();

    var address = '';
    for (var i = 0; i < centerLocations.length; ++i) {
    if (centerLocations[i].value == centreName) {
    address = centerLocations[i].address;
break;
    }

    }

       $("#TextArea1, #TextArea2").val(address);    
    });​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T15:57:28.757

我猜你想要 adress1 textarea [http://jsfiddle.net/WcXpk/4/中的值](http://jsfiddle.net/WcXpk/4/)

# jquery - 使用 PhantomJS 将 JQuery 注入 Amazon.com 页面会导致 JQuery 出现问题

> ID：10177381
> 
> 赞同：5
> 
> 时间：2012-04-16T15:48:02.317
> 
> 标签：jquery, phantomjs

我正在打开 Amazon.com 域中的任何页面（例如“http://www.amazon.com”），然后尝试像这样注入 JQuery：

```
var injected = page.injectJs('jquery-1.7.1.js');
console.log("jquery was injected successfully: " + injected); 
```

此代码将打印`true`到控制台。但是，尝试像这样`$(document)`从内部访问`page.evaluate()`：

```
page.onLoadFinished = function (status) {
    var results = page.evaluate(function() {
        $(document);    
    });

phantom.exit();
}; 
```

将打印`TypeError: 'undefined' is not a function`到控制台。

此代码适用于我尝试过的大多数其他域。我注意到亚马逊似乎有自己加载的 JQuery 版本，我想知道它是否可能与我正在加载的 JQuery 版本冲突。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T00:10:37.640

您只需要将 jQuery 置于 noConflict 模式，并使用一个备用变量名，如下所示：

```
var results = page.evaluate(function () {
    $jq = window.jQuery;
    $jq.noConflict();

    console.log("Title: " + $jq('title').text());
}); 
```

为我工作！希望这对你有用！:)

# cakephp - CakePHP 2 Shell 参数帮助/示例

> ID：10177383
> 
> 赞同：3
> 
> 时间：2012-04-16T15:48:09.287
> 
> 标签：cakephp, cakephp-2.0

我似乎找不到一个简单的具体示例来说明如何在 CakePHP 2 shell 脚本上接收参数。

```
 class TestShell extends AppShell {
        public function argumentTest(){
            $parser = parent::getOptionParser();
            $parser->addArgument('testArgument', array('short' => 't','help' => 'The test argument'));
            var_dump($this->params);
        }
    } 
```

然后我尝试调用它：

*   控制台/蛋糕 TestShell 参数Test --t 45

*   控制台/蛋糕 TestShell 参数Test -t 45

*   控制台/蛋糕 TestShell argumentTest --testArgument 45

*   控制台/蛋糕 TestShell 参数Test -testArgument 45

有了以上所有，我得到了这个作为回应：

```
Usage:
cake lot_web_service [-h] [-v] [-q] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T17:13:01.430

您应该在设置选项解析器时设置参数：

```
public function getOptionParser() {
    $parser = parent::getOptionParser();
    //configure parser
    return $parser;
} 
```

这可确保在调度调用之前设置选项和参数。此外，从它的外观来看，您想要`addOption()`的是`addArgument()`.

# algorithm - 广义的两蛋拼图

> ID：10177389
> 
> 赞同：11
> 
> 时间：2012-04-16T15:48:23.573
> 
> 标签：algorithm, puzzle, dynamic-programming

这是问题描述：

假设我们想知道 N 层建筑中的哪些楼层可以安全地掉落鸡蛋，哪些楼层会导致鸡蛋在落地时破裂。我们做了一些假设：一个在跌倒中幸存下来的鸡蛋可以再次使用。

*   必须丢弃破损的鸡蛋。
*   跌倒对所有鸡蛋的影响都是一样的。
*   如果一个鸡蛋在掉落时会破裂，那么如果从更高的窗户掉落它就会破裂。
*   如果一个鸡蛋在坠落中幸存下来，那么它会在较短的坠落中幸存下来。
*   不排除一楼窗户打碎鸡蛋，也不排除N楼窗户不打碎鸡蛋。

给定一栋 N 层建筑和 d 个鸡蛋的供应，找出最小化（在最坏情况下）确定起床所需的实验下降次数的策略。

* * *

我已经看到并解决了 2 个鸡蛋的这个问题，其中 N=100 的答案是 14。我试图使用 DP 从 wiki 理解通用解决方案，但无法理解他们想要做什么。请告诉他们如何到达 DP 以及它是如何工作的？

**编辑 ：**

[本文](http://www.scribd.com/api_user_11797_WebGuru/d/7217370-Egg-Puzzle-Generalized-Solution-for-Any-Number-of-Eggs)给出的最高层可以用 d 滴和 e 鸡蛋测试的重现性如下：

```
f[d,e] = f[d-1,e] + f[d-1,e-1] + 1 
```

复发很好，但我无法理解它是如何得出的？

这个解释对我来说不是很清楚......我只是希望有人用更清楚的语言向我解释这种复发。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T21:21:50.223

**(1) 考虑第一滴打碎鸡蛋的情况。**然后，当且仅当它至多为 f[d-1, e-1] 时，您才能确定破底。因此，您不能从高于 f[d-1, e-1] + 1 开始（当然也不应该从更低开始）。

**(2) 如果你的第一滴没有打破鸡蛋，**那么你在 f[d-1, e] 的情况下，只是从你的第一滴 + 1 的地板开始，而不是 1 层。

**所以，你能做的最好的事情**就是在 f[d-1, e-1] + 1 层开始下蛋（因为 (1)），你可以爬到更高的 f[d-1, e] 层比那个（因为（2））。那是

```
f[d, e] = f[d-1, e-1] + 1 + f[d-1, e] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-11T09:01:36.203

从[Wiki Egg Dropping 谜题](http://en.wikipedia.org/wiki/Dynamic_programming#Egg_dropping_puzzle)中，我们知道状态转移方程为：

> `W(n,k) = 1 + min{ max(W(n − 1, x − 1), W(n,k − x)) } , x = 1, 2, ..., k`
> 
> `W(n,1)=1, W(1,k)=k`
> 
> `n`= 可用测试鸡蛋的数量
> 
> `k`= 待测试的（连续）楼层数

以下是我的理解。

我们有`k`地板，`n`鸡蛋，假设我们用鸡蛋在`x`地板上进行测试。只有两种可能的结果：

1.  它坏了，所以问题递归到：`x-1`地板，`n-1`鸡蛋，这反映到`W(n-1,x-1)`
2.  它不会中断，所以问题递归地出现：`k-x`地板，`n`鸡蛋，这反映到`W(n,k-x)`

由于问题需要最坏情况，我们必须选择更大的情况以确保最坏情况有效，这就是我们在`W(n-1,x-1)`和之间添加最大值的原因`W(n,k-x)`。

此外，由于我们刚刚假设在`x`floor 中进行测试，`x`可以从`1`to `k`，在这种情况下，我们肯定需要选择最小值以确保 min 实验下降来找出`N`，这就是为什么我们在之间添加一个 min `{max(W(n − 1, x − 1), W(n,k − x)): x = 1, 2, ..., k}`

最后，由于我们使用`1`了 x floor 的下降，所以方程必须添加`1`，这反映到方程的第一部分。

希望能解决你的难题:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-08T06:28:05.663

此处提供基于动态编程的解决方案 - [http://algohub.blogspot.in/2014/05/egg-drop-puzzle.html](http://algohub.blogspot.in/2014/05/egg-drop-puzzle.html)

我相信这是不言自明的..如果任何部分不清楚，请随时询问..将很乐意解释

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-31T12:46:07.130

这个问题可以通过以下 3 种方法（我知道）来解决：

1.  动态规划
2.  使用二叉搜索树的解决方案
3.  通过获得可以用给定数量的鸡蛋和给定的滴数测试或覆盖的最大楼层数的直接数学公式来解决

让我先定义一些在之后进行的分析中使用的符号：

```
e = number of eggs
f = number of floors in building
n = number of egg drops 
Fmax(e, n) = maximum number of floors that can be tested or covered with e eggs and n drops 
```

动态规划方法的关键在于以下 Fmax 的递归公式：

```
Fmax(e, n) = 1 + Fmax(e-1, n-1) + fmax(e, n-1) 
```

而获得 Fmax 的直接数学公式的关键在于以下 Fmax 的递推公式：

```
Fmax(e, n) = { ∑Fmax(e-1,i) for i = 1 to n } - Fmax(e-1, n) + n 
```

对于这个问题，使用二叉搜索树 (BST) 的替代解决方案也是可能的。为了方便我们的分析，我们画出BST，稍作修改如下：

```
1\.    If egg breaks then child node is drawn on left down side
2\.    If egg does not break then child node is drawn straight down side 
```

如果我们用上述表示方式绘制 BST，那么 BST 的宽度代表鸡蛋的数量。

任何具有 f 个节点的 BST，以上述表示形式绘制并受到 BST <= e（鸡蛋数）的约束宽度是一个解决方案，但它可能不是最佳解决方案。

因此，获得最优解相当于获得 BST 中节点的排列方式，其最小高度受到约束：BST 的宽度 <= e

有关以上 3 种方法的更多详细信息，请查看我的博客：[解决广义蛋掉落问题的 3 种方法](http://rushikdm.blogspot.in/2016/12/e-eggs-f-floors-puzzle.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-08T07:31:53.540

这个问题不在于应该从哪个地板上掉下鸡蛋，而是要尽量减少掉下的次数。

*   假设，那么我们有 n 个鸡蛋和 k 个楼层，
*   基本情况：
    *   那么当 floor 为 1 时，MinNoOfDrops(n, 1)=1
    *   而当egg为1时，MinNoOfDrops(1, k)=k
*   通用解决方案：
*   MinNoOfDrops(n, k) = 1 + min{ max(MinNoOfDrops(n - 1, x - 1),
    MinNoOfDrops(n,k - x)) } , x = 1, 2, ..., k

* * *

**动态规划算法：**

*   创建 (totalEggs + 1) X (totalFloors + 1) 的 dp 表

*   基本情况：当egg为0或1时，设置为第i层，table[0][i] = 0；和表[1][i] = i

*   基本情况：地板为零或一，然后设置为鸡蛋 j，table[j][0] = 0 和 table[j][1] = 1

*   将鸡蛋 i 从 2 迭代到 total_eggs

    *   将层 j 从 2 迭代到 total_floors
        *   设置表[i][j] = INFINITY
        *   将楼层 k 从 1 迭代到 j
        *   设置 maxDrop = 1 + max(table[i-1][k-1], table[i][jk])
        *   如果 table[i][j] > maxDrop 那么
            *   设置表[i][j] = maxDrop

* * *

```
public class EggDroppingPuzzle {

    /** Not efficient  **/
    public static int solveByRecursion(int totalEggs, int totalFloors) {

        /** Base Case: When no floor **/
        if (totalFloors == 0) {
            return 0;
        }

        /** Base case: When only one floor **/
        if (totalFloors == 1) {
            return 1;
        }

        /** Base case: When only one eggs, then we have to try it from all floors **/
        if (totalEggs == 1) {
            return totalFloors;
        }

        int minimumDrops = Integer.MAX_VALUE;
        /** Now drop a egg from floor 1 to totalFloors **/
        for (int k = 1; k <= totalFloors; k++) {

            /** When an egg breaks at kth floor **/
            int totalDropWhenEggBreaks = solveByRecursion(totalEggs - 1, k - 1);

            /** When egg doesn't break at kth floor **/
            int totalDropWhenEggNotBreaks = solveByRecursion(totalEggs, totalFloors - k);

            /** Worst between above conditions **/
            int maxDrop = Math.max(totalDropWhenEggBreaks, totalDropWhenEggNotBreaks);

            /** Minimum drops for all floors **/
            if (minimumDrops > maxDrop) {
                minimumDrops = maxDrop;
            }
        }

        return minimumDrops + 1;
    }

    public static int solveByByDP(int totalEggs, int totalFloors) {
        int[][] table = new int[totalEggs + 1][totalFloors + 1];

        /** Base Case: When egg is zero or one **/
        for (int i = 0; i < totalFloors + 1; i++) {
            table[0][i] = 0;
            table[1][i] = i;
        }

        /** Base case: Floor is zero or one **/
        for (int j = 0; j < totalEggs + 1; j++) {
            table[j][0] = 0;
            table[j][1] = 1;
        }

        /** For floor more than 1 and eggs are also more than 1 **/
        for (int i = 2; i < totalEggs + 1; i++) {
            for (int j = 2; j < totalFloors + 1; j++) {

                table[i][j] = Integer.MAX_VALUE;
                for (int k = 1; k <= j; k++) {

                    /** When an egg breaks at kth floor **/
                    int totalDropWhenEggBreaks = table[i - 1][k - 1];

                    /** When egg doesn't break at kth floor **/
                    int totalDropWhenEggNotBreaks = table[i][j - k];

                    /** Worst between above conditions **/
                    int maxDrop = 1 + Math.max(totalDropWhenEggBreaks, totalDropWhenEggNotBreaks);

                    /** Minimum drops for all floors **/
                    if (maxDrop < table[i][j]) {
                        table[i][j] = maxDrop;
                    }
                }
            }
        }

        return table[totalEggs][totalFloors];
    }
} 
```

# c# - Uri.TryCreate 的输入参数，有什么问题？

> ID：10177391
> 
> 赞同：1
> 
> 时间：2012-04-16T15:48:33.427
> 
> 标签：c#, .net, url, uri, relative-url

我们下载的 HTML 页面很少，有损坏的链接（相对路径），并且我们有每个页面下载的原始 URL。

我们正在使用 - 将所有相对链接转换为绝对链接 -

```
Foreach (anchorElement in page) -
    Uri.TryCreate( originalPageURI, hrefRelativeURI, hrefAbsoluteURI ) 
```

这适用于大多数情况，但以下情况除外 -

```
originalPageURI = http://somewebsite.com/post.jsp?item=22

hrefRelativeURI = ?item=97 
```

对于上述失败`Uri.TryCreate()`的情况，输入参数是什么？`TryCreate()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:26:51.353

您无法使用 Uri 解决问题，因为`?item=97`它不是相对路径，而是查询字符串。

因此，您需要做的是手动构建新的 URL 来连接这些部分。

你应该使用：

*   `originalFolderPath`，作为原始 URL 的最后一部分`'/'`。您可以加入到此路径的“真实”相对路径以获取绝对 uri。（即那些不以 开头的`?`）

*   `originalFilePath`，作为原始 URL 的一部分，直到`'?'`. 您可以加入此部分的“假”相对路径。false 是那些表示查询字符串参数的参数（即以 开头的参数`?`）。

# php - 是否有用于 Microsoft Word 的嵌入式可视化 (PHP) 解析器？

> ID：10177402
> 
> 赞同：4
> 
> 时间：2012-04-16T15:48:54.520
> 
> 标签：php, parsing, ms-word

我正在写我为文档编写的代码，主要是在 PHP 中。我还有其他要写的语言，但我想知道在 word 文档中显示代码的最简单方法是什么。我可以只导入 Notepad++ 文档的打印屏幕，但我想要一种简单的方法将代码包含到 Microsoft Word 中，而不必每次我想进行更改时都打印屏幕。我正在寻找可以让我在 word 中编辑代码但显然不起作用的东西。我希望有某种视觉解析，以便与 Notepad++ 类似，它更具可读性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:59:19.657

您不需要在 Notepad++ 中打印屏幕。您可以将文本导出/复制为 RTF 并保留语法突出显示和格式。

我现在不在我的电脑上，但该选项位于 TextFX 菜单或插件菜单下。

效果很好。

编辑：

[![在此处输入图像描述](../Images/73db50a5d615d22a0c5f3c75b0f4a738.png)](http://cloud.addictivetips.com/wp-content/uploads/2011/12/Greenshot-image-editor_2011-12-28_17-42-41.png)

在此菜单中，按“将 RTF 复制到剪贴板”，即可粘贴到 Word 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:04:45.733

除了使用 word 来记录您的代码，您还可以查看一种称为 Latex 的文档标记语言。

它允许轻松记录代码（和数学），因此是创建科学报告的非常好的工具。

[http://www.latex-project.org/](http://www.latex-project.org/)

这是有关其工作原理的基本教程：

[http://www.youtube.com/watch?v=SoDv0qhyysQ](http://www.youtube.com/watch?v=SoDv0qhyysQ)

（这个 youtube 视频解释了基础知识）

# azure - 以调试或发布模式发布到 Windows Azure

> ID：10177406
> 
> 赞同：3
> 
> 时间：2012-04-16T15:49:07.163
> 
> 标签：azure

我有一个 Windows Azure 应用程序（Asp Net Mvc 4）。这个应用程序中有一些 ajax。一些具有简单内存服务器逻辑的请求（没有 sql，没有外部 Web 服务）。当我在本地以调试模式运行它时，ajax 请求大约需要 900 毫秒才能得到响应。本地在释放模式下，大约需要 30 毫秒（没关系）。当我将应用程序发布到 Azure 时，请求需要 450 毫秒才能得到响应。我尝试调试模式和发布，以及云和本地服务配置。在所有情况下都需要 450 毫秒。问题：有什么我没有考虑到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:56:27.280

要正确诊断 ASP.NET MVC 应用程序的性能，您需要考虑：

1.  您的客户端计算机和服务器之间的延迟。使用 ping 实用程序来测量它。
2.  建立 HTTP 和/或 HTTPS 连接所需的时间。
3.  等待浏览器可能发出的其他并发请求所花费的时间。
4.  发送请求和检索响应的数据传输时间。
5.  由于过载而在 Web 服务器上排队。
6.  服务器实际处理请求所花费的时间。[您可以使用本文](http://coderjournal.com/2010/10/timing-the-execution-time-of-your-mvc-actions/)中描述的[StopwatchAttribute](https://github.com/managedfusion/managedfusion-web/blob/master/src/Web/Mvc/StopwatchAttribute.cs)来衡量这一点。不过请使用 GitHub 上的当前代码，因为本文中的代码与 ASP.NET MVC 3 不兼容。

Chrome 和 Internet Explorer 的开发者工具、Firefox 的 Firebug 和 Yahoo 的 YSlow 等工具可以让您更深入地了解应用程序的性能。

# c# - 克隆和处理源位图后如何修复“参数无效”异常

> ID：10177414
> 
> 赞同：1
> 
> 时间：2012-04-16T15:49:25.743
> 
> 标签：c#

我有以下两个课程：

```
public class ImageHandler
{
    private Bitmap _currentBitmap;
    private Bitmap _bitmapbeforeProcessing;

    public Bitmap CurrentBitmap
    {
        get
        {
            if (_currentBitmap == null)
            {
                _currentBitmap = new Bitmap(1, 1);
            }
            return _currentBitmap;
        }
        set { _currentBitmap = value; }
    }

    public string CurrentBitmapPath { get; set; }

    public void ResetBitmap()
    {
        if (_currentBitmap != null && _bitmapbeforeProcessing != null)
        {
             Bitmap temp = (Bitmap)_currentBitmap.Clone();
            _currentBitmap = (Bitmap)_bitmapbeforeProcessing.Clone();
            _bitmapbeforeProcessing = (Bitmap)temp.Clone();
        }
    }

    internal void RestorePrevious()
    {
        _bitmapbeforeProcessing = _currentBitmap;
    }
 } 
```

和：

```
public class RotationHandler
{
    private ImageHandler imageHandler;

    public void Flip(RotateFlipType rotateFlipType)
    {
        this.imageHandler.RestorePrevious();
        Bitmap bitmap = (Bitmap) this.imageHandler.CurrentBitmap.Clone();
        this.imageHandler.CurrentBitmap.Dispose(); // dispose of current bitmap
        bitmap.RotateFlip(rotateFlipType);
        this.imageHandler.CurrentBitmap = bitmap;
   }
 } 
```

`ResetBitmap()`旋转后调用时，显示：

> 参数无效

但如果：

```
this.imageHandler.CurrentBitmap.Dispose(); 
```

被评论然后它工作正常。但是，如果`Flip()`多次调用方法，则会发生 Out Of Memory 异常。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:13:11.807

虽然 Bitmap 是一个 C# 对象，但它实际上是一个 win32 对象，因此，您必须在完成后调用 Dispose()。

你正在做：

```
_CurrentBitmap = _CurrentBitmap.Clone(); 
```

当你应该做的时候：

```
_Temp = _CurrentBitmap.Clone();
_CurrentBitmap.Dispose();
_CurrentBitmap = _Temp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-26T13:10:54.183

我刚刚处理了具有相同错误的类似问题。

调用`Clone()`一个`Bitmap`对象只会创建一个浅拷贝；它仍将引用相同的底层图像数据，因此调用`Dispose()`其中一个对象将删除原始和副本的数据。调用`RotateFlip()`已处置的`Bitmap`对象会导致您看到的异常：

> System.ArgumentException：参数无效

解决此问题的一种方法是`Bitmap`基于原始对象创建一个新对象，而不是使用`Clone()`. 这将复制图像数据以及托管对象数据。

例如，而不是：

```
Bitmap bitmap = (Bitmap) this.imageHandler.CurrentBitmap.Clone(); 
```

利用：

```
Bitmap bitmap = new Bitmap(this.imageHandler.CurrentBitmap); 
```

请注意，如果源位图对象为空，这也会导致`ArgumentException`，因此通常以下更好（为简洁起见，我将源位图重命名`currentBitmap`为）：

```
Bitmap bitmap = (currentBitmap == null) ? null : new Bitmap(currentBitmap) 
```

# java - ACTION_MEDIA_BUTTON 的广播接收器不起作用

> ID：10177417
> 
> 赞同：18
> 
> 时间：2012-04-16T15:49:37.730
> 
> 标签：java, android, android-intent, broadcastreceiver

我正在为 Android OS 版本 4.0.3 (ICS) 编写一个 Android 应用程序。问题是我没有在 BroadcastReceiver 的 onReceive() 方法中从 Log.d() 获取输出，这意味着我的应用程序没有正确处理广播。

我已经阅读了无数关于如何在单击 ACTION_MEDIA_BUTTON 时运行代码的问题。当我的代码不起作用时，我什至复制+粘贴代码，只是为了看看它是否会起作用。

我要处理的 ACTION_MEDIA_BUTTON 是耳机上的**单个**按钮，允许用户接听/结束通话、播放/暂停音乐。**当我点击它时，我的 Nexus S Android 上的音乐播放器开始播放歌曲，而不是我的应用程序处理这个按钮**。

我没有将我的代码放在另一个类中，也许这就是它不起作用的原因？

这是在 onCreate() 方法上找到的代码（在我编写的代码不起作用后，我从网站上复制了这个特定代码）：

```
IntentFilter mediaButtonFilter = new IntentFilter(
            Intent.ACTION_MEDIA_BUTTON);
    mediaButtonFilter.setPriority(IntentFilter.SYSTEM_HIGH_PRIORITY);
    BroadcastReceiver brMediaButton = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            Log.d("Event", "Media button!");
            this.abortBroadcast();

            KeyEvent key = (KeyEvent) intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);
            if(key.getAction() == KeyEvent.ACTION_UP) {
                int keycode = key.getKeyCode();
                if(keycode == KeyEvent.KEYCODE_MEDIA_NEXT) {
                    Log.d("TestApp", "Next Pressed");
                } else if(keycode == KeyEvent.KEYCODE_MEDIA_PREVIOUS) {
                    Log.d("TestApp", "Previous pressed");
                } else if(keycode == KeyEvent.KEYCODE_HEADSETHOOK) {
                    Log.d("TestApp", "Head Set Hook pressed");
                }
            }

        }
    };
    registerReceiver(brMediaButton, mediaButtonFilter); 
```

我真正需要测试的只是 KEYCODE_HEADSETHOOK，但是在那里有其他代码进行测试并没有什么坏处，一旦我能让一切正常工作，我会修复它。

在我的清单中：

```
<intent-filter android:priority="2147483647" >
            <action android:name="android.intent.action.MEDIA_BUTTON" />
</intent-filter> 
```

我最初认为这可能是权限问题，因为我没有为此指定任何权限，但是我没有收到任何错误消息。

就像我之前说的，我已经尝试了很多变化。一个示例是在此链接处使用代码[广播接收器 onReceive 问题 ACTION_MEDIA_BUTTON Android](https://stackoverflow.com/questions/6603170/broadcastreceiver-onreceive-problem-action-media-button-android)与 CommonsWare 的更正。但是，我再次对其进行了修改，因此它不在单独的班级中。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-04-08T14:15:03.507

我在装有 Android 4.4.2 的三星 Galaxy S5 上对此进行了测试。那么什么是重要的，什么**是其他帖子中没有提到的**：

*   *在AndroidManifest.xml*中的*应用程序*标签内注册接收器，但在每个*活动*标签外。
*   您的接收器*Broadcastreceiver*需要是公共的和静态的
*   一个活动需要注册一个*MediaButtonEventReceiver*来监听按钮按下

好的，这里有一些**示例代码**：

```
mAudioManager =  (AudioManager) getSystemService(Context.AUDIO_SERVICE);
mReceiverComponent = new ComponentName(this,YourBroadcastReceiver.class);
...
mAudioManager.registerMediaButtonEventReceiver(mReceiverComponent);
...
// somewhere else
mAudioManager.unregisterMediaButtonEventReceiver(mReceiverComponent); 
```

这里的**接收器**：

```
public static class YourBroadcastReceiver extends BroadcastReceiver{

    // Constructor is mandatory
    public MediaBroadcastReceiver ()
    {
        super ();
    }
    @Override
    public void onReceive(Context context, Intent intent) {
        String intentAction = intent.getAction();
        Log.i (TAG_MEDIA, intentAction.toString() + " happended");
        if (!Intent.ACTION_MEDIA_BUTTON.equals(intentAction)) {
            Log.i (TAG_MEDIA, "no media button information");
            return;
        }
        KeyEvent event = (KeyEvent)intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);
        if (event == null) {
            Log.i (TAG_MEDIA, "no keypress");
            return;
        }
        // other stuff you want to do
    }
} 
```

这里是**清单**片段。如果需要，为意图过滤器添加优先级，但我不需要：

```
<application>
    <receiver android:name="OuterClass$YourBroadcastReceiver">
        <intent-filter>
           <action android:name="android.intent.action.MEDIA_BUTTON" />
         </intent-filter>
    </receiver>
    <activity> ... </activity>
</application> 
```

对于参考：

*   [http://developer.android.com/training/managing-audio/volume-playback.html](http://developer.android.com/training/managing-audio/volume-playback.html)
*   [MediaButtonIntentReceiver 在 Android 4.0+ 中不起作用](https://stackoverflow.com/questions/13257982/mediabuttonintentreceiver-not-working-in-android-4-0)
*   [BroadcastReceiver：无法实例化类；没有空的构造函数](https://stackoverflow.com/questions/10305261/broadcastreceiver-cant-instantiate-class-no-empty-constructor/10305338#10305338)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T08:47:01.710

```
mediaButtonReceiver = new ComponentName(getPackageName(), MediaButtonReceiver.class.getName());

mAudioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);

mAudioManager.registerMediaButtonEventReceiver(mediaButtonReceiver); 
```

此代码将您的耳机按钮绑定到您的应用，并且仅在您调用之前您的应用：

```
mAudioManager.unregisterMediaButtonEventReceiver(mediaButtonReceiver); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-12T06:15:38.107

您可以使用此处描述的 MediaSession 避免使用适用于 Android >5.0（API 级别 21 LOLLIPOP）的广播接收器：[https ://stackoverflow.com/a/39413753/1386969](https://stackoverflow.com/a/39413753/1386969)

# sql - SQL Powershell 创建对象备份

> ID：10177418
> 
> 赞同：0
> 
> 时间：2012-04-16T15:49:38.347
> 
> 标签：sql, powershell

我想创建一个 powershell 脚本，我可以在更新对象之前运行它来将对象备份到文件中。我的目标是在更改对象之前备份对象，以防出现问题。我想传递参数以运行如下：

backupobjects.ps1 -servername -databasename -schemaname -objectname -outputdirectory

因此，如果我调用此 powershell 脚本并传入参数，该脚本将连接到数据库并找到对象并保存 CREATE 脚本并将对象保存到传入的输出目录中，并将 BEFORE_objectname.sql 作为文件名。

我刚开始使用 powershell，所以接受我还没有学过的参数。

任何指导或建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:55:06.273

与其为你写，不如给你一些建议：

1）param是你在powershell中传递参数的方式。我喜欢这样做：

```
param (
   [string] $server = (Read-Host "Enter a server name"),
   [string] $db = (Read-Host "Enter a database name")
) 
```

然后，您稍后在脚本中引用 $server 和 $db，就好像您已明确初始化它们一样。

2) SQL server 中的大多数（如果不是全部）对象都附加了一个 Script() 方法。例如看一下[Table 类](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.table.aspx)。

3) 您可以使用 ScriptingOptions 类控制对象的脚本编写方式。当您在对象上调用 Script() 方法时，将 ScriptingOptions 对象作为参数传递，脚本行为将受其控制。

# javascript - 设置间隔从现有数据表更新数据点

> ID：10177421
> 
> 赞同：1
> 
> 时间：2012-04-16T15:49:52.827
> 
> 标签：javascript, highcharts

我想让 HighChart 通过将下一个数据点添加到图表来更新系列，以便图表“播放”。我有一个包含 X 和 Y 分量的数据系列。我希望在本系列中的下一点更新图表（比如每秒）。我在使用 DotNet.HighCharts API 的 VB.NET 4 站点中使用它。我跟随了几个演示（例如[这个](http://www.highcharts.com/demo/dynamic-update)），所有这些都使用了一些随机生成的值。如何让图表使用现有的一组点？这是一个使用随机函数的 jsFiddle - [http://jsfiddle.net/tQpNN/3/](http://jsfiddle.net/tQpNN/3/) 我只是不知道如何遍历传入的数据系列（如果这样做的话）或制作 DotNet。 HighCharts 为我迭代。

**编辑**一些代码：

```
 Dim stfipsList4 = (From r In dt4.AsEnumerable() Select r("areaname")).Distinct().ToList()
    Dim SeriesList4 As New List(Of Series)(stfipsList4.Count)
    Dim seriesItem4(stfipsList4.Count) As Series
    Dim xDate4 As DateTime
    Dim fakeDate4 As String
    Dim sX4 As Integer

    sX4 = 1
    For Each state In stfipsList4
        Dim data As New Dictionary(Of DateTime, Decimal)
        Dim stateVal As String = state.ToString
        Dim recCount As Integer = dt4.Rows.Count - 1
        Dim seriesPointCount As Integer = dt4.Compute("Count(population)", "areaname = '" + stateVal + "'")
        Dim chartData As Object(,) = New Object(seriesPointCount - 1, 1) {}
        Dim x As Integer = 0
        For i As Integer = 0 To recCount
            If dt4.Rows(i)("areaname").ToString = stateVal Then
                fakeDate4 = "1/1/" + dt4.Rows(i)("periodyear").ToString
                xDate3 = DateTime.Parse(fakeDate4)
                chartData.SetValue(xDate4.Date, x, 0)
                chartData.SetValue(dt4.Rows(i)("population"), x, 1)
                x += 1
            End If

        Next

        seriesItem4(sX4) = New Series With {
                    .Name = state.ToString, _
                    .Data = New Helpers.Data(chartData)
        }

        SeriesList4.Add(seriesItem3(sX4))

        sX4 = sX4 + 1
    Next

    Dim iterateData As String = JsonSerializer.Serialize(New Helpers.Data(New Object() {seriesItem3(1).Data}))

    Dim chart4 As Highcharts = New Highcharts("chart4").SetOptions(New Helpers.GlobalOptions() With { _
        .[Global] = New [Global]() With { _
                .UseUTC = False _
            } _
        }).InitChart(New Chart() With { _
         .DefaultSeriesType = ChartTypes.Spline, _
         .MarginRight = 10, _
         .Events = New ChartEvents() With { _
          .Load = "ChartEventsLoad" _
         } _
        }).SetTitle(New Title() With { _
         .Text = "Live data" _
        }).SetXAxis(New XAxis() With { _
         .Type = AxisTypes.Datetime, _
         .TickPixelInterval = 150 _
        }).SetSeries(New Series() With { _
             .Data = New Helpers.Data(New Object() {})
            }) _
    .AddJavascripVariable("counter", "0") _
    .AddJavascripVariable("stockData", iterateData) _
    .AddJavascripFunction("ChartEventsLoad", "// set up the updating of the chart each second" & vbCr & vbLf & _
                          " var series = this.series[0];" & vbCr & vbLf & _
                          " setInterval(function() {" & vbCr & vbLf & _
                          " var x = stockData[counter].key;" & vbCr & vbLf & _
                          " var y = stockData[counter].value;" & vbCr & vbLf & _
                          " series.addPoint([x, y], true, series.points.length > 10);" & vbCr & vbLf & _
                          " counter++;" & vbCr & vbLf & _
                          "}, 1000);") 
```

这会传入我的一系列数据（可能是 1 个或多个不同的单个系列）。我想要做的是通过一次添加一个点来“播放”系列点（通过缩放 x 轴，但我不想删除任何点）。这个虚拟版本只是在给定时刻添加一个新的随机 y 值。我不确定如何迭代我现有的数据。

这确实将“stockData”javascript var 设置为我的数据集。我在 FireBug 中看到错误说明

> stockData[counter] 未定义

var与和图表一起`counter`定义。有关DotNet.Highcharts API 吐出的内容，请参阅[http://jsfiddle.net/ZvYT6/ 。](http://jsfiddle.net/ZvYT6/)迭代的内联 javascript 如下所示：`$(document).ready(function)``stockdata``chart4`

```
 function ChartEventsLoad(){
        // set up the updating of the chart each second
 var series = this.series[0];
 setInterval(function() {
 var x = stockData[counter].key;
 var y = stockData[counter].value;
 series.addPoint([x, y], true, series.points.length > 10);
 counter++;
}, 1000);
    }
}); 
```

我真正不确定的部分是`stockData[counter]`键/值。这在javascript中叫什么？stockdata 是一个数据列表，如下所示：

```
 var stockData = { data: [{ data: [[Date.parse('01/01/1900 00:00:00'), 530000],
    ....,
[Date.parse('01/01/2010 00:00:00'), 18801310]]
    }]
    }; 
```

**编辑 v4：** 好的，现在我可以使用一些讨厌的 javascript 解析出我的数据数组。

```
 Dim iterateData As String = JsonSerializer.Serialize(seriesItem3(1))

    Dim chart4 As Highcharts = New Highcharts("chart4").SetOptions(New Helpers.GlobalOptions() With { _
        .[Global] = New [Global]() With { _
                .UseUTC = False _
            } _
        }).InitChart(New Chart() With { _
         .DefaultSeriesType = ChartTypes.Spline, _
         .MarginRight = 10, _
         .Events = New ChartEvents() With { _
          .Load = "ChartEventsLoad" _
         } _
        }).SetTitle(New Title() With { _
         .Text = "Live data" _
        }).SetXAxis(New XAxis() With { _
         .Type = AxisTypes.Datetime, _
         .TickPixelInterval = 150 _
        }).SetSeries(New Series() With { _
             .Data = New Helpers.Data(New Object() {})
            }) _
    .AddJavascripVariable("counter", "0") _
    .AddJavascripVariable("stockData", iterateData.ToString) _
    .AddJavascripFunction("ChartEventsLoad", "// set up the updating of the chart each second" & vbCr & vbLf & _
                          " var result = stockData.data;" & vbCr & vbLf & _
                          " var series = this.series[0];" & vbCr & vbLf & _
                          " setInterval(function() {" & vbCr & vbLf & _
                          " var p = String(result[counter]);" & vbCr & vbLf & _
                          " var splitp = p.split("","");" & vbCr & vbLf & _
                          " var x = splitp[0];" & vbCr & vbLf & _
                          " var y = splitp[1];" & vbCr & vbLf & _
                          " series.addPoint([x, y], true, false, true);" & vbCr & vbLf & _
                          " counter++;" & vbCr & vbLf & _
                          "}, 1000);")

    ltrChart4.Text = chart4.ToHtmlString() 
```

如果我查看 firebug 中的 x 和 y 值，我可以看到这些是预期值。但是，我的图表只是在 x 轴上从 ~1900 小时开始更新，并且每秒添加一个点（根据 javascript 函数），但没有 y 值。此外，y 轴似乎从 -2.5 开始 - 我使用的值都不小于 1000，更不用说 0。我非常接近......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:23:49.493

终于得到了这个工作。这是我的解决方案 - 可能不是最漂亮的，但它有效。重要的是`iterated`通过`iterateData.ToString()`. 从这一点开始，您可以循环遍历它，然后拆分每个元素。我添加了一项检查，以确保在到达数据集中的最后一个点后停止添加点。要做的仍然是让它处理多个系列并“播放”它们。

```
 Dim stfipsList4 = (From r In dt4.AsEnumerable() Select r("areaname")).Distinct().ToList()
    Dim SeriesList4 As New List(Of Series)(stfipsList4.Count)
    Dim seriesItem4(stfipsList4.Count) As Series
    Dim xDate4 As DateTime
    Dim fakeDate4 As String
    Dim sX4 As Integer

    sX4 = 1
    For Each state In stfipsList4
        Dim data As New Dictionary(Of DateTime, Decimal)
        Dim stateVal As String = state.ToString
        Dim recCount As Integer = dt4.Rows.Count - 1
        Dim seriesPointCount As Integer = dt4.Compute("Count(population)", "areaname = '" + stateVal + "'")
        Dim chartData As Object(,) = New Object(seriesPointCount - 1, 1) {}
        Dim x As Integer = 0
        For i As Integer = 0 To recCount
            If dt4.Rows(i)("areaname").ToString = stateVal Then
                fakeDate4 = "1/1/" + dt4.Rows(i)("periodyear").ToString
                xDate3 = DateTime.Parse(fakeDate4)
                chartData.SetValue(xDate4.Date, x, 0)
                chartData.SetValue(dt4.Rows(i)("population"), x, 1)
                x += 1
            End If

        Next

        seriesItem4(sX4) = New Series With {
                    .Name = state.ToString, _
                    .Data = New Helpers.Data(chartData)
        }

        SeriesList4.Add(seriesItem3(sX4))

        sX4 = sX4 + 1
    Next

    Dim iterateData As String = JsonSerializer.Serialize(seriesItem3(1))

    Dim chart4 As Highcharts = New Highcharts("chart4").SetOptions(New Helpers.GlobalOptions() With { _
        .[Global] = New [Global]() With { _
                .UseUTC = False _
            } _
        }).InitChart(New Chart() With { _
         .DefaultSeriesType = ChartTypes.Column, _
         .MarginRight = 10, _
         .Events = New ChartEvents() With { _
          .Load = "ChartEventsLoad" _
         } _
        }).SetTitle(New Title() With { _
         .Text = "Live data" _
        }).SetXAxis(New XAxis() With { _
         .Type = AxisTypes.Datetime, _
         .TickPixelInterval = 150 _
        }).SetSeries(New Series() With { _
             .Data = New Helpers.Data(New Object() {}), _
             .Name = seriesItem3(1).Name
            }) _
    .AddJavascripVariable("iterated", iterateData.ToString) _
    .AddJavascripFunction("ChartEventsLoad", "// set up the updating of the chart each second" & vbCr & vbLf & _
                          " var result = iterated.data;" & vbCr & vbLf & _
                          " var counter = 0;" & vbCr & vbLf & _
                          " var series = this.series[0];" & vbCr & vbLf & _
                          " var loopseries = function() {" & vbCr & vbLf & _
                          " if (counter <= result.length) {" & vbCr & vbLf & _
                          " var p = String(result[counter]);" & vbCr & vbLf & _
                          " var splitp = p.split("","");" & vbCr & vbLf & _
                          " var x = Number(splitp[0]);" & vbCr & vbLf & _
                          " var y = Number(splitp[1]);" & vbCr & vbLf & _
                          " series.addPoint([x, y], true, series.points.length > 10, true);" & vbCr & vbLf & _
                          " counter++;" & vbCr & vbLf & _
                          " } else {" & vbCr & vbLf & _
                          " clearInterval(loopseries);" & vbCr & vbLf & _
                          " }};" & vbCr & vbLf & _
                          " setInterval(loopseries, 100);")

    ltrChart4.Text = chart4.ToHtmlString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T00:11:36.293

[您可以在DotNet.Highchart 项目的](http://dotnethighcharts.codeplex.com/)[示例项目](http://dotnethighcharts.codeplex.com/releases/view/85324)中看到“Spline Update Each Second”的演示

无论如何，这是一个示例代码，当您迭代数据时，您可以如何在图表中每秒添加点：

```
Highcharts chart = new Highcharts("chart")
            .SetOptions(new GlobalOptions { Global = new Global { UseUTC = false } })
            .InitChart(new Chart
                       {
                           DefaultSeriesType = ChartTypes.Spline,
                           MarginRight = 10,
                           Events = new ChartEvents
                                    {
                                        Load = "ChartEventsLoad"
                                    }
                       })
            .SetTitle(new Title { Text = "Live data" })
            .SetXAxis(new XAxis
                      {
                          Type = AxisTypes.Datetime,
                          TickPixelInterval = 150
                      })
            .SetSeries(new Series
                       {
                           Name = "Live data",
                           Data = new Data(new[] { new Point { X = Tools.GetTotalMilliseconds(DateTime.Now), Y = 0 } })
                       })
            .AddJavascripVariable("counter", "0")
            .AddJavascripVariable("stockData", JsonSerializer.Serialize(ChartsData.StockData))
            .AddJavascripFunction("ChartEventsLoad",
                                  @"// set up the updating of the chart each second
                                   var series = this.series[0];
                                   setInterval(function() {
                                      var x = (new Date()).getTime(); // current time
                                      var y = stockData[counter];
                                      series.addPoint([x, y], true, series.points.length > 10);
                                      counter++;
                                   }, 1000);"); 
```

对不起 C# 代码。我希望这会有所帮助，并且您可以找到好的转换器。

# c++ - 真实 3D 环境中的寻路（例如建筑物）

> ID：10177424
> 
> 赞同：5
> 
> 时间：2012-04-16T15:50:15.863
> 
> 标签：c++, algorithm, 3d, graph-algorithm, path-finding

是否有一种寻路算法也适用于真实的 3D 环境，例如具有多个楼梯的真实建筑物等。C++ 库或开放式实现会很棒;-) 我看到的一个解决方案是 Djikstra，但我想知道是否有更优化的解决方案。普通 A* 不会比 Djikstra 工作得更好，因为距离启发式不能很好地工作（位于目的地上方一层）。我目前正在考虑的另一个解决方案是将 3d 环境映射到 2d 图形上。因此，如果有一些可用的 C++ 实现/库以这种方式运行，那也会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:18:02.653

如果路径必须考虑通过障碍物导航的能力（即运动是空间中已知体积的某个实体的运动），那么我建议查看有关机器人运动规划的文献。配置空间的概念允许您处理姿势的变化以处理障碍物。参见让-克劳德·拉通贝 (Jean-Claude Latombe) 的经典教科书

对于更简单的场景，您可以使用第一人称计算机游戏中使用的路径规划算法，类似于 Dijkstra，A* [（示例）](http://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&ved=0CE8QFjAE&url=http%3A%2F%2Fciteseerx.ist.psu.edu%2Fviewdoc%2Fdownload%3Fdoi%3D10.1.1.109.2798%26rep%3Drep1%26type%3Dpdf&ei=22GMT7L_Ccz34QTOgtTpCQ&usg=AFQjCNFPp9mlXuY1QqYOsfsxqQ0juO3WGQ&sig2=Mv3dcRszJvNDix_v5wfTWQ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:04:08.783

对于近似算法，您可以轻松地将 3d 映射到 1d 曲线并使用格雷码遍历八叉树。这样你就可以重新排序每条路径。我不知道是否可以保证在最佳解决方案内，但它必须比任何启发式方法更好。

# android - 添加指南针以旋转 MapView

> ID：10177426
> 
> 赞同：0
> 
> 时间：2012-04-16T15:50:22.820
> 
> 标签：android, android-mapview, compass-geolocation

我正在使用 MapsDemo Sample 的代码绘制根据指南针旋转的地图，但 enableCompass 无法在 MapView 上显示指南针。我试图添加这个指南针[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/Compass.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/Compass.html)。但是当我将它添加到我的应用程序时，箭头显示为冻结。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:20:34.997

请记住，它仅适用于实际硬件。

将此行放入`onCreate`：

```
 MyLocationOverlay me = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(me); 
```

然后添加这个：

```
@Override
protected void onResume() {
    super.onResume();
    me.enableCompass();
}

@Override
public void onPause() {
    super.onPause();
    me.disableCompass();
} 
```

这是一个[示例项目](https://github.com/commonsguy/cw-android/tree/master/Maps/NooYawk)，它启用了`MyLocationOverlay`绝对有效的指南针，但您需要替换为您自己的`android:apiKey`值。

# sqlite - 如何提高使用 QT 的 sqlite3 数据库的性能？

> ID：10177430
> 
> 赞同：1
> 
> 时间：2012-04-16T15:50:33.090
> 
> 标签：sqlite, qsqltablemodel

我在 sqlite3 数据库上使用 QSQlQuery。为了获取特定项目，我从 4 个不同的表中填充了结果。我认为加入表格会提高性能/速度并更快地获得结果。所以我最初加入了 2 个表，但加入表后获取数据需要更长的时间（？）

任何有关如何提高性能的建议将不胜感激。此外，我正在查看[http://qt-project.org/doc/qt-4.8/qsqlquery.html](http://qt-project.org/doc/qt-4.8/qsqlquery.html)并提到使用 setForwardOnly 会提高某些数据库的性能。知道它是否适用于 SQLite3 吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:36:47.330

根据这个链接，

[http://sqlite.org/cvstrac/wiki?p=PerformanceTuning](http://sqlite.org/cvstrac/wiki?p=PerformanceTuning)

SQLite 通过将 USING 子句翻译成一些额外的 WHERE 子句来实现 JOIN USING。NATURAL JOIN 和 JOIN ON 也是如此。因此，尽管这些结构可能对人类读者有所帮助，但它们对 SQLite 的查询优化器并没有真正的影响。

- 我错了加入两个表并期望获取速度更快。它不适用于 SQLite 数据库。相反，使用“where”子句并直接连接两个结果肯定会对性能产生一些积极影响。

（例子 ：

select * from A,B where A.id = B.id where A.id = 1; 代替

select * from A left outer join B on A.id = B.id where A.id = 1)

SQLite 在编译之前将第一条语句转换为第二条语句，您可以通过直接使用第二条语句来节省少量的 CPU 时间

# c# - 如何有效地在 WPF 中显示图形？

> ID：10177432
> 
> 赞同：7
> 
> 时间：2012-04-16T15:50:42.937
> 
> 标签：c#, .net, wpf, graphics

我们的软件有时间线功能。它显示了几行小斑点，这些小斑点表示不同时间点的数据。代码是 c#、.Net 4 和 WPF。为了显示一个 blob，我们目前正在创建一个边框（*给它一个画笔*）并将其添加到网格中。然后将该网格添加到形成行的父网格中。

当时间线显示的 blob 数量相对较少时，这很好，但是当数据非常繁忙时，渲染会变慢，内存使用率上升，并且 UI 变得无响应。（*毫不奇怪*）。

我知道我们没有以最好的方式做到这一点 - 我的问题是在 wpf 中显示这样的图形的最佳方式是什么？

**编辑：**感谢您的回复 - 我将调查这些选项。然而，每个都需要大量的重新编码，我的问题更简单；是否有一些控制或效果可以用来替换资源成本较低的 Border？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T15:59:57.067

对于像这样的数据可视化，我真的很喜欢[DynamicDataDisplay](http://dynamicdatadisplay.codeplex.com/releases/view/26761)。该组件目前仅针对 Silverlight 进行维护/开发，但 WPF 有一个开源（链接中）版本，这确实是一个很棒的库。

该库使用`IObservable`集合并支持`DateTime`轴值。

有一个内置的标记图类型（下面的示例）。

您可以使用自定义标记，它支持缩放和滚动，以及许多其他不错的功能等。它也非常快，即使有相当大的数据集。

由于数据集是`IObservable`图表组件，因此图表组件会动态响应基础数据集中的变化，因此您的图表会在数据集合更新时随时更新。

**编辑**

这是一个例子：

用途：

```
using System.ComponentModel;
using Microsoft.Research.DynamicDataDisplay;
using Microsoft.Research.DynamicDataDisplay.Charts;
using Microsoft.Research.DynamicDataDisplay.DataSources;
using Microsoft.Research.DynamicDataDisplay.PointMarkers; 
```

主要的 ：

```
 public Window1()
    {
        InitializeComponent();
        //
        const int N = 100;
        List<double> x = new List<double>();
        List<double> y = new List<double>();

        DateTimeAxis dtAxis = new DateTimeAxis();
        _plotter.HorizontalAxis = dtAxis;

        Random rand = new Random();
        for (int i = 0; i < N; i++)
        {   //generate some random data
            x.Add(dtAxis.ConvertToDouble(DateTime.Now.AddDays(i)));
            y.Add(rand.Next(N));
        }

        EnumerableDataSource<double> gX = new EnumerableDataSource<double>(x);
        EnumerableDataSource<double> gY = new EnumerableDataSource<double>(y);
        _MarkerGraph.DataSource = new CompositeDataSource(gX,gY);

        //no scaling - identity mapping
        gX.XMapping = xx => xx;
        gY.YMapping = yy => yy;

        CirclePointMarker mkr = new CirclePointMarker();
        mkr.Fill = new SolidColorBrush(Colors.Red);
        mkr.Pen = new Pen(new SolidColorBrush(Colors.Black),2.0);
        _MarkerGraph.Marker = mkr;
    } 
```

XAML：

```
<Window x:Class="WpfApplication1.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d3="clr-namespace:Microsoft.Research.DynamicDataDisplay;assembly=DynamicDataDisplay"
Title="Window1" Height="481" Width="651">
<Grid>
    <d3:ChartPlotter Name="_plotter">
        <d3:MarkerPointsGraph Name="_MarkerGraph"/>
    </d3:ChartPlotter>
</Grid> 
```

输出 ： ![程序运行...](../Images/da68919c6cbd4c0fd60ba74ca7e7bd28.png)

DateTime 轴可以很好地缩放，调整天、月、小时、秒的刻度……只要合适。非常简单！

如果您确实使用此包，我**强烈**建议您下载源代码并将其作为第二个项目添加到您的解决方案中。D3 的文档非常糟糕，在项目中拥有源代码有助于弄清楚事情是如何工作的。如果需要，它还可以很容易地添加/扩展内容。如果您这样做，请务必引用您的解决方案中的项目，而不是编译的 DLL。

另请注意，许多可用的文档和在线示例都针对维护的 Silverlight 组件，而不是针对开放的 WPF 组件。这两个版本之间的许多组件都不同，因此您必须深入了解 WPF 组件以查看其中的内容。上面的示例适用于 v0.3 WPF 组件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T16:14:22.187

如果您想绘制大量不断变化的视觉效果，WPF 必须提供的最快方法是覆盖`OnRender`并绘制到`DrawingContext`.

如果视觉效果大部分是静态的，但有时会发生变化，最快的方法是`DrawingVisual`为每个视觉效果创建一个，然后可以根据需要进行修改。

[此问题](https://stackoverflow.com/questions/2319365/performance-of-drawingvisual-vs-canvas-onrender-for-lots-of-constantly-changing)，链接文章和答案中的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-29T11:10:57.240

在我看来，drawingcontext 或 drawingvisual 有点慢和复杂

所以wpf的位图图像速度很快，可以试试，可以比drawingcontext或drawingvisual更快

实现代码；

```
public BitmapImage yuklenenResim;
public OpenFileDialog selectImage;

yuklenenResim = new BitmapImage();
yuklenenResim.BeginInit();
yuklenenResim.UriSource = new Uri(selectImage.FileName);
yuklenenResim.CacheOption = BitmapCacheOption.OnDemand;
yuklenenResim.EndInit();

/// imgSource is Image on wpf xaml side
imgSource.Source = yuklenenResim; 
```

# solr - 如何构造与关键字匹配并按外部关键字排名排序的 SOLR 查询和模式

> ID：10177434
> 
> 赞同：0
> 
> 时间：2012-04-16T15:50:57.090
> 
> 标签：solr

希望有人可以帮助我在这个 SOLR 问题上朝着正确的方向前进......

我有一个包含酒店功能和评级的数据集。功能的示例是“游泳池”、“健身房”、“免费 wifi”。每个功能的评分在 1 到 10 之间。我想使用 SOLR 来查询这些功能/评分对，并结合其他一些与酒店相关的标准，如“酒店名称”或“位置”，以便匹配最匹配和最高的酒店评级功能会显示在搜索结果的顶部。这是一个例子：

想象一下，最终用户正在搜索纽约市（位置：“纽约市”）的酒店，该酒店为“免费 wifi”和“游泳池”。理想情况下，搜索结果顶部的匹配项是纽约市的酒店'free wifi' 和 'pool' 的评分最高。希望这是有道理的吗？任何人都可以向我发送允许执行此类查询的 SOLR 功能的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:49:50.910

我将使用 edismax 处理程序并分两部分执行此操作。

首先，酒店有游泳池吗？使用具有多个值的字段，以便您可以搜索设施：游泳池、设施：健身房等，或者使用一组布尔字段，池：真，健身房：真。

其次，有一个评分字段，并使用提升功能来提升每个评分。分数将乘以提升。我使用了 max() 来确保零或负评级不会导致问题。这是一个示例定义，它将进入 solrconfig.xml 中的请求处理程序配置：

```
<str name="boost">product(max(pool_rating,1),max(gym_rating,1))</str> 
```

product() 接受多个参数，因此您可以继续添加它们。

# r - 在 R 中获取股票多年的年度财务数据

> ID：10177435
> 
> 赞同：0
> 
> 时间：2012-04-16T15:50:58.550
> 
> 标签：r, quantmod, quantitative-finance

假设我想回归总收入的 R 毛利润。我需要这方面的数据，而且越多越好。CRAN 上有一个我觉得非常有用的库： quantmod ，它可以满足我的需要。

```
library(quantmod)
getFinancials(Symbol="AMD", src="google")
#to get the names of the matrix: rownames(AMD.f$IS$A)
Total.Revenue<-AMD.f$IS$A["Revenue",]
Gross.Profit<-AMD.f$IS$A["Gross Profit",]

#finally:
reg1<-lm(Gross.Profit~Total.Revenue) 
```

我遇到的最大问题是，这个库只为我提供了 4 年的数据（4 次观察，谁运行回归只有 4 次观察？？？）。是否有任何其他方式（可能是其他图书馆）可以获得超过 4 年的数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T22:16:23.487

我同意这不是一个 R 编程问题，但无论如何我都会在这个问题（可能）结束之前发表一些评论。

归结为：即使您有钱可以花，也很难获得跨行业和市场的可靠基本面数据。如果你在看美国，那么有很多选择，但所有主要的（读作“相对可靠的”）提供商每月都需要数千美元——FactSet、Bloomberg、Datastream 等等。对于它的价值，对于处理基本数据，我更喜欢并使用 FactSet。

一般来说，因为每个提供商提供的 Excel 工具都比较成熟，我发现用数据填充电子表格然后将数据读入 R 更容易。再说一次，我通常最多处理几十家公司的基本面，因为一旦您离开“已知”公司的领域，检查异常所需的时间就会成倍增加。

有许多潜在的“陷阱”。最明显的是，定义因部门而异。例如，工业公司的“销售”与银行的“销售”非常不同。另一个问题是定义的变化。几乎每年都会发生一些会计法规或其他变化并破坏您的数据系列。去年*这里*报告了少数族裔，但今年这个项目被移到了损益表中的另一个位置，依此类推。

另一个问题是公司本身的变化。例如，如何处理合并、收购和分拆？这种事情可以使衡量有机销售增长几乎是不可能的。要记住的另一点是，如果您要处理营业利润或净利润，则必须考虑例外情况以及是否对其进行调整。

与美国以外的公司打交道会增加一大堆进一步的问题。当然，主要的数据提供商试图在全球范围内进行标准化（例如 FactSet Fundamentals）。这只是增加了另一层抽象，通常很难检查数据是如何被操纵的。

简而言之，获取数据很繁重，而且我知道没有可靠的免费资源。除非您正在为非常同质的公司集团处理最简单的项目，否则即使您确实拥有数据，这也是一堆蠕虫。

# jquery - 使用 jquery 单独修改内容 od divs 元素

> ID：10177438
> 
> 赞同：0
> 
> 时间：2012-04-16T15:51:08.717
> 
> 标签：jquery, ajax, arrays

我正在尝试通过ajax将共享同一类“ip”的多个div（为简单起见限制为3）的内容（IPv4地址）发送到一个php文件，返回相应的国家，但我遇到了问题为他们每个人获得良好的个人价值。Firebug 向我展示了这些值一个接一个地正确发送，但是我只获得了所有 3 个 div 的最后一个 IP 的 IP 分辨率。

```
<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <title>form test</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
</head>
<body>
    <form name="form" action="">
        <div class="inp"><input type="checkbox" /><div class="ip">57.20.123.87</div></div>
        <div class="inp"><input type="checkbox" /><div class="ip">54.220.223.47</div></div>
        <div class="inp"><input type="checkbox" /><div class="ip">37.120.23.97</div></div>
    </form>
    <script type="text/javascript">
        $(document).ready(function(){
            $(".ip").each(function(i) {
                var ipfromT = new Array();
                ipfromT = $(this).html();
                $.ajax({
                    url: 'http://localhost/ic/jsonquery.php',
                    data: "ipfromT="+ipfromT,
                    dataType: 'json',
                    success: function(data) {
                        var ipfield = data[0];
                        var iprevealed = data[1];
                        $("[class='ip']").html("<b>sent IP:</b> "+ipfield+" <b>Location:</b> "+iprevealed);
                        }
                });
            });
        }); 
    </script>
</body>
</html> 
```

我已经搜索了几个小时来创建一个包含各种值的数组，一次通过 ajax 发送它们，然后将它们放回去，但我无法做到，所以我寻求建议/帮助/建议。

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:55:51.643

您不应`$('[class="ip"]')`在`success`回调中使用，而应为当前迭代元素使用缓存的 var：

```
$(document).ready(function(){
    $(".ip").each(function(i) {
        var ipfromT = new Array();
        ipfromT = $(this).html();
        var $ip = $(this);

        $.ajax({
            url: 'http://localhost/ic/jsonquery.php',
            data: "ipfromT="+ipfromT,
            dataType: 'json',
            success: function(data) {
                var ipfield = data[0];
                var iprevealed = data[1];
                $ip.html("<b>sent IP:</b> "+ipfield+" <b>Location:</b> "+iprevealed);
            }
        });
    });
}); 
```

随着`$('[class="ip"]')`您在文档上获得所有具有“ip”类的元素，而不仅仅是您试图通过 Ajax 获得的元素。这就是为什么在迭代中必须获取当前正在使用的迭代，并将其用于 Ajax 请求的回调函数。

# ruby-on-rails-3 - 如何删除 mongodb 数据库？

> ID：10177445
> 
> 赞同：3
> 
> 时间：2012-04-16T15:51:26.540
> 
> 标签：ruby-on-rails-3, mongodb, mongoid

Mongodb菜鸟问题！

我想做一些类似于 rake db:drop 但在 mongodb 中的操作，以清除文档的内容。

到目前为止，我已经找到了命令 db.dropDatabase() 但我必须从 mongodb 交互式 shell 输入它是否正确？（有关如何进入 shell 的任何提示将不胜感激，我尝试按照 Mongodb 站点上的说明进行操作，但我无法启动并运行它）。

有没有更简单的方法可以从命令行执行此操作？

**编辑**：我试着打字`mongo`，shell弹出了大声笑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-10T13:01:18.097

rake db:mongoid:drop

这会起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:35:11.713

这里有大量关于 shell 的信息： [http ://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell](http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell)

但是要删除一个 mongodb 它的 .Drop()

# javascript - 根据计数在路径上插入具有变化距离的节点

> ID：10177448
> 
> 赞同：0
> 
> 时间：2012-04-16T15:51:38.140
> 
> 标签：javascript, d3.js

我需要做的是在路径上插入节点（或者只是没有路径的坐标），这将尊重节点位置（例如 node.x 和 node.y）并根据它们的计数动态重新计算它们的距离。

我试过：

```
d3.scale.linear().domain([0,width]).range([height, 0]); 
```

但它只计算 svg 元素的对角线。有没有办法实现这一目标？为了更好地理解我想要做什么，我附上了一张图片说明。更好的办法是将节点放在非线性路径上，但我无法弄清楚如何做到这一点。

![路径上的节点](../Images/b77e3c011cb84622303ceec227a4eb13.png)

谢谢

卢卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:19:42.853

我设法通过减少节点距离来实现这种行为，并根据对角路径长度动态计算新节点距离。我添加了一个对用户隐藏的路径，如下所示：

```
var points = [
                [0, height],
                [width, 0]                                                            
                ];

            var pth = svg.append("path")
                .data([[points]])
                .attr("class","diag")
                .attr("d", d3.svg.line()
                .tension(1)
                // Catmull–Rom
                .interpolate("basis")); 
```

计算它的长度：

```
halfDiagLength = pth.node().getTotalLength()/2; 
```

然后简单地得到新的距离。然后，使用对角函数设置 x 和 y 坐标：

```
var x = d3.scale.linear().domain([0,width]).range([height, 0]);    
n.x = Math.round(l.source.x)+linkLength;
n.y = x(n.x); 
```

希望它可以帮助某人。

卢卡斯

# .net - 选择调度机制

> ID：10177452
> 
> 赞同：0
> 
> 时间：2012-04-16T15:52:02.310
> 
> 标签：.net, windows-services, scheduled-tasks

作为依赖于来自 Internet 的不同数据馈送的 Web 应用程序的一部分，我需要创建一个组件来从网络上的不同位置提取数据，并使它们可用于我的 Web 应用程序。它有一个要获取的资源列表，以及每个资源的不同时间。例如，它需要每 1 小时拉一次 RSS 提要，每 30 分钟调用一次某个 REST API。

我已经实现了获取部分。我现在正在徘徊如何实现调度部分。

我知道我可以使用 Windows 计划任务或 Windows 服务，并且我已经阅读了有关此主题的答案，但它们是一般性的。我在徘徊你认为最适合我的具体情况。（也欢迎其他选项）此外，您建议如何实施该解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:09:53.040

试试[石英网](http://quartznet.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:12:18.123

我经常看到在类似情况下犯的一个错误是尝试将所有内容都作为同一个 Web 应用程序的一部分。假设您从“不同位置”提取的“数据”足够平坦且足够简单，因此可以将其存储到文件系统或数据库中（相对于必须驻留在内存中的这种性质 - 例如复杂的互连对象图），我会让你的“爬虫”成为一个单独的过程。

现在，该进程应该是一个简单的命令行，由 Windows 任务计划程序激活，还是一个 Windows 服务，由 Quartz.Net 之类的东西激活，实际上取决于它每次启动时必须初始化多少东西以及它需要多久起床。举两个极端，如果它每天运行一次，就让它成为一个命令行应用程序。如果它每 5 秒运行一次，并且需要 3 秒来启动并 JIT 其所有代码，则将其设为 Windows 服务。如果您希望它由用户激活并且它的反应时间必须是瞬时的，请再次将其设为 Windows 服务。

您始终可以从命令行开始并在需要时转移到服务，您不必重新实现太多，如果您将处理和调度部分分开，您的架构最终会变得更简单，这就是命令行方法对你施加力量。

# c# - 我必须在终结器中删除 eventHandlers 吗？

> ID：10177455
> 
> 赞同：5
> 
> 时间：2012-04-16T15:52:16.467
> 
> 标签：c#, wpf

我有一个有`Saved`事件的模型类。这个想法是，如果两个视图模型使用该模型对象，如果其中一个更改它，另一个将被更新。

当我不再使用它的视图模型时，我是否必须删除事件处理程序？这是我的代码：

```
protected AbstractEntityViewModel(AbstractEntity ae)
{
    this.ae = ae;

    ae.Saved += delegate(object o, EventArgs e) 
    { 
        base.OnPropertyChanged(null);
    };
} 
```

这可以吗，还是我需要更改它以便`-=`在不再使用视图模型时摆脱委托？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:00:27.370

总而言之，是的。如果 AbstractEntity 对象仍然具有对辅助对象的引用，则不能释放辅助对象。如果有可能释放对象并且事件仍然存在（这也适用于静态事件），那么您需要手动删除事件处理程序，否则对象将不会被释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T12:23:13.907

## 事件参考方向

要知道您是否真的需要分离事件处理程序，您首先必须了解：

```
ae.Saved += delegate(object o, EventArgs e) 
{ 
    base.OnPropertyChanged(null);
}; 
```

手段`ae`现在正在引用`this`. 因此，带有事件的对象正在使用事件处理程序引用该对象。不是相反（事件处理程序引用事件）。

## GC root 没有引用的对象可以被收集

此外，虽然理想情况下要被垃圾收集的对象不被任何其他对象引用，但这并不是绝对必要的：

垃圾收集器可以收集所有未被 GC 根以任何方式（路径）引用的对象。这意味着如果您有一个孤立的对象图（对象引用图中的其他对象，但图外没有对象引用图内的对象[也没有 GC 根]），那么整个对象图最终将被垃圾收集。图越交织，GC 收集它的成本就越高。分离事件处理程序有助于更快地分解此类图表。

## 正确清理对象

.Net 没有析构函数。取而代之的是`IDisposable`模式和终结器（请参阅[实现终结和处置以清理非托管资源](http://msdn.microsoft.com/en-us/library/vstudio/b1yfkh5e%28v=vs.100%29.aspx)）。

长话短说：

*   当对象管理非托管资源时，需要终结方法 ( `~Foo () { }`for )。`class Foo`它们在 GC 收集对象时由垃圾收集器调用。所以确切的时间不取决于你。
*   一次性模式可用于清理托管和非托管资源。如果对象有非托管资源，它仍然必须有一个终结器。为什么？该`Dispose()`方法由您调用。不能保证它正在执行。如果应用程序调用该`Dispose()`方法失败，仍然有调用 finalize 的 GC。因此，基本上在 Dispose 中进行非托管资源清理只是一种性能改进（在某些情况下，这可能非常重要，除非您想在计算机中插入更多 GB 的 RAM ......）。

如果你打算使用终结器，我强烈建议你阅读上面的文档，因为有很多东西我没有在这里介绍。请参阅[实施 Finalize 和 Dispose 以清理非托管资源](http://msdn.microsoft.com/en-us/library/vstudio/b1yfkh5e%28v=vs.100%29.aspx)

## 你的例子

回到你的例子，在你构造 a 之后`AbstractEntityViewModel`，只要`AbstractEntity`你传递给它，它就会保持活动`AbstractEntityViewModel`状态，反之亦然。但是当这两个都没有被 GC 根引用时，它们都会被垃圾回收。

如果分离事件处理程序，`AbstractEntityViewModel`即使不能，也可以对（或者更确切地说是具体的子类实例）进行垃圾收集`AbstractEntity`。

另请参阅：[了解 .NET 中的垃圾收集](https://www.simple-talk.com/dotnet/.net-framework/understanding-garbage-collection-in-.net/)

* * *

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T16:28:03.387

事件可以看作是一个原始的观察者实现：主体为每个订阅的观察者保留一个处理程序，这意味着它们无法被垃圾收集。为了允许观察者被垃圾收集，它必须作为观察者从主体中移除。

唯一不需要手动删除事件处理程序的情况是主体和观察者是同一个实例，因为垃圾收集器将检测循环引用并随后完成对象。

# jquery - 如何禁用对手机网站的访问？

> ID：10177456
> 
> 赞同：3
> 
> 时间：2012-04-16T15:52:23.873
> 
> 标签：jquery, html, css, jquery-mobile

我的网页不适用于移动设备，所以我想禁用移动访问，至少现在是这样。是否有一个 jQuery/javascript 脚本来禁止访问智能手机和移动设备的网站？是否可以将其重定向到一个小的 404 页面（或类似页面），我将设置它说您必须在计算机上访问该网站？另外，你有什么关于设计移动访问网站的好的参考资料吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T16:02:56.990

[Detect Mobile Browsers](http://detectmobilebrowsers.com/)提供了各种开源手机检测脚本（包括 JavaScript 和 jQuery），您可能会发现它们很有用。

要使用它：

“下载移动浏览器重定向脚本并更改`http://detectmobilebrowser.com/mobile`为您的移动网站的 URL。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T16:05:07.883

您可能想要的是一个服务器端进程，该进程确定用户拥有什么设备并将他重定向到正确的站点。我们使用 Wurlf 进行设备检测。它具有用于 Java 和 PHP 的 API，因此您可以查询它并相应地重定向。它还在服务器端为您提供了大量的设备功能。[http://wurfl.sourceforge.net/](http://wurfl.sourceforge.net/)。

如果您想要客户端检测，我建议您使用modernizr： http: [//modernizr.com/](http://modernizr.com/)

您不想做的是阻止访问。有东西总比什么都没有好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T16:02:01.557

实际上，您可以做[一些谷歌搜索](https://stackoverflow.com/a/3540295/304588)来了解您需要做什么。但请注意，这很像浏览器嗅探，这通常是一个坏事™。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T16:04:58.430

不要阻止该网站，只需在顶部注明该网站尚未（尚未？）针对智能手机进行优化，因此如果出现问题，他们应该使用计算机。

# cassandra - Cassandra - 使用 CLI 插入文本时，哪些字符需要转义？

> ID：10177457
> 
> 赞同：1
> 
> 时间：2012-04-16T15:52:24.453
> 
> 标签：cassandra, command-line-interface

我正在尝试使用 CLI 在 Cassandra db 中插入 HTML 作为文本值。我收到各种不太有用的错误消息，但我知道错误的发生是因为我需要转义某些字符。我已经转义了引号和双引号。还有什么需要逃避的？简而言之，使用 Cassandra CLI 插入文本的转义规则是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:06:19.570

好的，我设法找到了解决方案。唯一需要转义的字符是引号和双引号。问题在于换行符。我从我的 html 数据中删除了所有换行符，并且正确插入了值。

# security - 防止浏览器泄露用户输入

> ID：10177458
> 
> 赞同：0
> 
> 时间：2012-04-16T15:52:25.153
> 
> 标签：security

是否可以加载网页，然后可靠且永久地阻止浏览器（以及潜在的敌对网页）泄露在该页面上进行的任何用户输入？跨浏览器？

用例将是一个在线实用程序，公开一些有关个人信息的服务。此实用程序在加载后不需要发出任何服务器请求。

以下过程解释了这个问题，但可能不够充分，也没有效率：

1.  加载网页
2.  下线
3.  与网页交互
4.  关闭页面
5.  删除 cookie
6.  清除网络存储
7.  上网

# sql-server-2005 - 带有主干.js 的 SubSonic ORM

> ID：10177459
> 
> 赞同：1
> 
> 时间：2012-04-16T15:52:25.187
> 
> 标签：sql-server-2005, orm, backbone.js, subsonic, underscore.js

我正在使用 Rob Connery 的 Subsonic ORM 和 Backbone.Js 来构建 javascript 单页演示应用程序。在一个服务端点中，有一个合同发送数据源中存在的所有记录，如下所示

```
[WebMethod]
[ScriptMethod(UseHttpGet = true)]
public TaskCollection GetAllTasks()
{
    TaskCollection coll = new TaskCollection();
    coll.Load();
    return coll;
} 
```

但似乎`Task`集合中的每一个都被大量仅在服务器端需要的属性所污染。这是根据请求返回的 JSON

```
[{
    "__type": "DAL.Task",
    "Taskid": 1,
    "Taskname": "welcome to india",
    "Createdon": "\/Date(1334591056903)\/",
    "Modifiedon": "\/Date(1334591056903)\/",
    "ValidateWhenSaving": true,
    "DirtyColumns": [],
    "IsLoaded": true,
    "IsNew": false,
    "IsDirty": false,
    "TableName": "task",
    "ProviderName": null,
    "NullExceptionMessage": "{0} requires a value",
    "InvalidTypeExceptionMessage": "{0} is not a valid {1}",
    "LengthExceptionMessage": "{0} exceeds the maximum length of {1}",
    "Errors": []
}] 
```

我只需要 CreatedOn,ModifiedOn 和 TaskName, TaskId 。我如何确保使用 SubSonic ORM 仅将这些发送到线路上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T01:01:03.827

这里有几个想法......

使用视图模型自动选择属性：

```
public class TaskView
{
    public int TaskID { get; set; }
    public string TaskDescription { get; set; }
}
...
var results = new Select().From(Tables.Task).ExecuteTypedList<TaskView>(); 
```

使用匿名类型

```
var qry = new Select(new string[] { Task.Columns.TaskID, Task.Columns.TaskDescription }).From(Tables.Task);
var resultList = new List<object>();
using (IDataReader rdr = qry.ExecuteReader())
{
    while (rdr.Read())
        resultList.Add(new 
        {
            TaskID = rdr[0].ToString(),
            TaskDescription = rdr[1].ToString(),
        });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:52:58.253

我不使用 SubSonic，但我不得不承认这似乎是一个很好的例子，说明您可能希望在哪里使用 ViewModel，即从您的模型中专门为视图填充的模型。现在就将 ViewModel 绑定到模型，和/或可能从视图的模型中为许多 ViewModel 生成属性（因为对于一堆模型来说，生成 ViewModel 肯定是乏味且容易出错的），好吧，我听说了的几种通用解决方案。我实际上是在尝试找到一个我对自己满意的解决方案；与此同时，我被迫手写它们，直到找到更好的解决方案。我相信如果您想要强类型的 ViewModel，您可以使用 AutoMapper 之类的工具，尽管我自己从未使用过它。一世'

我使用 ViewModels 的主要原因是我可以轻松控制日期的格式。但使用不同的 JSON 序列化程序可能会做得更好。当然，使用 ViewModels 还可以让您灵活地根据需要更改数据层。但我不得不承认，这很乏味。我认为通过一些自动化可以更好地处理我的实现，但到目前为止我不知道如何处理。

我意识到这只是部分答案。我很好奇可能会出现什么其他答案。

# eclipse - Eclipse 比较编辑器中是否有下一个差异和上一个差异的键绑定？

> ID：10177460
> 
> 赞同：29
> 
> 时间：2012-04-16T15:52:27.793
> 
> 标签：eclipse, keyboard-shortcuts

在比较编辑器中有[按钮](https://stackoverflow.com/questions/6773648/)

*   下一个差异
*   以前的差异
*   下一个变化
*   以前的变化

我想为*Next Difference*和*Previous Difference*按钮分配键绑定。但是在首选项中，我只看到*Select Next Change*和*Select Previous Change命令（都在**Compare*类别中）。如何将键绑定分配给引用差异的按钮？

我的 Eclipse：
版本：Indigo Service Release 2
Build id：20120216-1857

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-16T15:56:57.450

这些有默认快捷方式： `CTRL`- `.`( `next`) 和`CTRL`- `,`( `previous`)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-09T16:09:57.977

**下一个差异，上一个差异**：

*   没有键映射（仍在 Eclipse Neon 中）:(

**下一个变化，上一个变化：**

*   将“何时”设置为“在编辑器中比较”对我有用。

[![在此处输入图像描述](../Images/14653911f05782276fdf2c981f281de1.png)](https://i.stack.imgur.com/LR1uG.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-07T20:16:36.573

在 Eclipse Mars 中，还是和 moeTi 解释的一样。我正在添加一些细节。要设置自定义键盘快捷键，请转到：

*   打开窗口->首选项
*   通用->键

以下是您想要的命令和相关映射的列表：

*   **上一个差异**（在比较编辑器中选择上一个差异）
    *   **“导航**”类别中的命令“**上一个”**

***   **下一个差异** （在比较编辑器中选择下一个差异）
    *   **“导航**”类别中的“**下一步**”命令
    ***   **从右到左复制当前更改**（用他们的代码替换您的代码）
    *   **'比较**'类别中的命令'**从右到左复制**'
    ***   **从左到右复制当前更改**（通常不是一个选项）
    *   **'比较**'类别中的命令'**从左到右复制**'******

# mysql - MySQL CLI 解释器中的 Grep

> ID：10177465
> 
> 赞同：18
> 
> 时间：2012-04-16T15:52:37.387
> 
> 标签：mysql, command-line-interface

有什么方法可以 grep MySQL 解释器（CentOS 5.x）的输出？例如，我知道我需要一个表名中包含“用户”的表。理想情况下，我会喜欢这样的东西：

```
DESCRIBE TABLES; | grep "user" 
```

我知道我可以退出 MySQL，然后在 bash 中执行它：

```
mysql -u me -p "USE someTable; DESCRIBE TABLES;" | grep "user" 
```

但我更愿意留在 MySQL 中。谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-16T16:01:29.937

试试这个！

```
mysql> pager grep user
PAGER set to 'grep user'
mysql> USE someTable;
mysql> DESCRIBE TABLES; 
```

我刚刚用 Mysql v5.0.83 尝试过，它做了你想的；）

# c# - 带有启用和禁用图像按钮的 Gridview

> ID：10177467
> 
> 赞同：0
> 
> 时间：2012-04-16T15:52:41.050
> 
> 标签：c#, gridview, asp.net-ajax

我在 asp.net 应用程序中有 gridview。我想插入一个带有图像按钮的列，单击它将启用或禁用用户或更改数据库中的状态字段，并相应地更改图像按钮图像用户状态。

含义：我想为禁用和启用的用户显示不同的图像。

如何在 C# 中执行此操作并将数据绑定到图像按钮？

任何人请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:51:42.377

示例用户模型：

```
public class UserModel {    
        public string Name { get; set; }
        public bool IsEnabled { get; set; }
} 
```

这是 GridView 代码：

```
<asp:GridView ID="GridView" runat="server" AutoGenerateColumns="false" 
    onrowcommand="GridView_RowCommand" onrowdatabound="GridView_RowDataBound">
    <Columns>
        <asp:TemplateField>
            <ItemStyle HorizontalAlign="Center" />
            <ItemTemplate>
                <asp:ImageButton ID="EnabledImgBtn" runat="server" 
                    CommandArgument='<%# Eval("Name") %>'
                    CommandName="ResetUserState" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="Name" HeaderText="Name" />
         //Other columns....
    </Columns>
</asp:GridView> 
```

根据您的需要设置“CommandArgument”。例如用户的 ID。网格视图的示例代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack){
        LoadGridView();
    }
}

private void LoadGridView()
{
    this.GridView.DataSource = GetUsersFromDatabase();
    this.GridView.DataBind();
}

protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var user = e.Row.DataItem as UserModel;
        var enabledImgBtn = e.Row.FindControl("EnabledImgBtn") as ImageButton;
        if (enabledImgBtn != null)
            enabledImgBtn.ImageUrl = user.IsEnabled ? "~/YourImagePath/enabled.png"
                                                    : "~/YourImagePath/disalbed.png";
    }
}

protected void GridView_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "ResetUserState")
    {
        if (e.CommandArgument!= null)
           { 
            var userName = e.CommandArgument.ToString();            
            //Change user enabled state and Update database
            //Sample code:
             var user = FindUserByName("userName");
             user.IsEnabled = !user.IsEnabled;
             //SaveInDatabase(user);
             LoadGridView();
           }
    }
} 
```

您可以考虑使用类型等于“Image”而不是“TemplateField”的“CommandField”，但这种方法存在问题，[请阅读更多](http://www.codeproject.com/Articles/19942/ASP-NET-GridView-Image-Command-Button-Problem-Mult)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:56:58.180

利用 ItemDataBound 事件。您可以在此处检查网格的每一行并对其应用更改。然后您可以隐藏/取消隐藏或更改按钮：

下面是 VB.net，但您可以轻松转换为 C#：

```
 Dim ib As ImageButton = CType(e.Item.FindControl("ibFav"), ImageButton)
            ib.Visible = False
            Dim ib2 As ImageButton = CType(e.Item.FindControl("ibRemFav"), ImageButton)
            ib2.Visible = True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T10:40:46.740

```
<asp:GridView ID="GridView" runat="server" AutoGenerateColumns="false" 
    onrowcommand="GridView_RowCommand" onrowdatabound="GridView_RowDataBound">

    <Columns>
         <asp:TemplateField HeaderText="Change Status" ItemStyle-CssClass="GrdItemImg">
                            <ItemTemplate>
                                <asp:ImageButton ID="ibtnChangeActiveStatus" CommandArgument='<%#Eval("RecordID")%>'
                                    CommandName='GRDSTATUS' runat="server" ImageUrl='<%# getStatusImage(Convert.ToInt32(DataBinder.Eval(Container.DataItem,"IsApproved"))) %>' />
                            </ItemTemplate>
                        </asp:TemplateField>

        <asp:BoundField DataField="Col2" HeaderText="Col2" />
         //Other Respective  columns....
                ...........
                ..........
    </Columns>

</asp:GridView> 
```

并在 CS 文件中添加以下功能。

```
public string getStatusImage(int intStatus)
    {
        string strStatus = string.Empty;

        if (intStatus == 1)
        {            
            strStatus = "~/images/active.png";
        }
        else
        {
            strStatus = "~/images/inactive.png";
        }

        return strStatus;
    } 
```

因此，在“intStatus”的基础上，将设置相应的活动/非活动图像。

# sql - 值为“”时无法从表中的列中获取数据

> ID：10177474
> 
> 赞同：0
> 
> 时间：2012-04-16T15:52:58.547
> 
> 标签：sql, null

当我从表中的列中获取值时，我的项目中有一个问题。我通过 c# 代码创建数据库。

这是我的代码：

```
 public static int typeTransactionIncome = 1; // thu
    public static int typeTransactionExpense = 2; // chi
    public static int typeTransactionDebt = 3; // nợ
    public static int typeTransactionLoan = 4; // cho vay

    public static string tableNameCategory = "categories";

    private static string createTableTransactionString = "CREATE TABLE IF NOT EXISTS \"transactions\" " + "(\"id\" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL ,"
        + "\"name\" VARCHAR(140) ," + "\"amount\" FLOAT NOT NULL  DEFAULT (0) ," + "\"type\" INTEGER NOT NULL ,"
        + "\"created_date\" DATETIME NOT NULL  DEFAULT (CURRENT_DATE) ," + "\"displayed_date\" DATETIME NOT NULL  DEFAULT (CURRENT_DATE) ,"
        + "\"cat_id\" INTEGER NOT NULL  DEFAULT (0) ," + "\"with_person\" VARCHAR(50)," + "\"remind_date\" DATETIME,"
        + "\"remind_num\" INTEGER DEFAULT (0) ," + "\"note\" VARCHAR(140) ," + "\"status\" BOOL NOT NULL  DEFAULT (0),"
        + "\"user_id\" INT NOT NULL  DEFAULT (1))"; 
```

这是插入代码：插入一些列，并且有 2 个插入方法

```
public void insertNewIncome(string _name, string _note, double _amount, DateTime _displayedDate, int _catId, int _usertId)
    {
        try
        {
            openConnection();

            SqliteCommand cmd = conn.CreateCommand();
            cmd.CommandText = "INSERT INTO " + tableNameTransaction + "(type, name, note, amount, displayed_date, cat_id, user_id) values (@type, @name, @note, @amount, @displayed_date, @cat_id, @user_id)";
            cmd.Parameters.Add("@type", typeTransactionIncome);
            cmd.Parameters.Add("@name", _name);
            cmd.Parameters.Add("@note", _note);
            cmd.Parameters.Add("@amount", _amount);
            cmd.Parameters.Add("@displayed_date", _displayedDate);
            cmd.Parameters.Add("@cat_id", _catId);
            cmd.Parameters.Add("@user_id", _usertId);
            cmd.ExecuteNonQuery();
            //MessageBox.Show("income");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            closeConnection();
        }
    }

public void insertNewDebt(string _debter, string _note, double _amount, DateTime _ngay_vay, DateTime _ngay_tra, int _user_id)
    {
        try
        {
            openConnection();

            SqliteCommand cmd = conn.CreateCommand();
            cmd.CommandText = "INSERT INTO " + tableNameTransaction + "(type, with_person, note, amount, displayed_date, remind_date, user_id) VALUES (@type, @with_person, @note, @amount, @displayed_date, @remind_date, @user_id)";
            cmd.Parameters.Add("@type", typeTransactionDebt);
            cmd.Parameters.Add("@with_person", _debter);
            cmd.Parameters.Add("@note", _note);
            cmd.Parameters.Add("@amount", _amount);
            cmd.Parameters.Add("@displayed_date", _ngay_tra);
            cmd.Parameters.Add("@remind_date", _ngay_tra);
            cmd.Parameters.Add("@user_id", _user_id);
            cmd.ExecuteNonQuery();
            //MessageBox.Show("debt");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
        finally
        {
            closeConnection();
        }
    } 
```

我通过 insertNewDebt 和 insertNewIncome 方法向表中插入了一些记录，没关系，没有任何错误。

这是获取表中所有记录的方法：

```
public List<ItemTransaction> loadTransactionAll(DateTime _start_date, DateTime _end_date, int _user_id)
    {
        List<ItemTransaction> li = new List<ItemTransaction>();
            openConnection();

            SqliteCommand cmd = conn.CreateCommand();
            cmd.CommandText = "SELECT transactions.id AS master_id,transactions.name,transactions.amount,transactions.type,transactions.created_date, transactions.displayed_date,transactions.cat_id, transactions.with_person,transactions.remind_date,remind_num, transactions.note,transactions.status,transactions.user_id,categories.id,categories.name,categories.icon,categories.type,IFNULL(sub_amount,0) AS sub_amount "
                    + "FROM transactions "
                    + "LEFT JOIN categories ON transactions.cat_id = categories.id "
                    + "LEFT JOIN ("
                    + "SELECT sub_trans_id, IFNULL(SUM(sub_amount),0) AS sub_amount "
                    + "FROM (SELECT trans_id AS sub_trans_id,SUM(amount) AS sub_amount "
                    + "FROM sub_transactions "
                    + "WHERE type = @type_income "
                    + "GROUP BY sub_trans_id "
                    + "UNION ALL SELECT trans_id AS sub_trans_id,SUM(amount) * -1 AS sub_amount "
                    + "FROM sub_transactions "
                    + "WHERE type = @type_expense GROUP BY sub_trans_id) GROUP BY sub_trans_id) ON sub_trans_id = master_id "
                    + "WHERE (displayed_date BETWEEN @start_date AND @end_date) "
                    + "AND transactions.user_id = @user_id "
                    + "ORDER BY displayed_date DESC, transactions.type ASC, status ASC";
            cmd.Parameters.Add("@type_income", DatabaseProccess.typeTransactionIncome);
            cmd.Parameters.Add("@type_expense", DatabaseProccess.typeTransactionExpense);
            cmd.Parameters.Add("@start_date", _start_date);
            cmd.Parameters.Add("@end_date", _end_date);
            cmd.Parameters.Add("@user_id", _user_id);

            SqliteDataReader reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                ItemTransaction item = new ItemTransaction();
                item.master_id = reader.GetInt32(0);
                item.name = reader.GetString(1);
                item.amount = reader.GetDouble(2);
                item.type = reader.GetInt32(3);
                item.created_date = reader.GetDateTime(4);
                item.displayed_date = reader.GetDateTime(5);
                item.cat_id = reader.GetInt32(6);
                item.with_person = reader.GetString(7);
                item.remind_date = reader.GetDateTime(8);
                item.remind_num = reader.GetInt32(9);
                item.note = reader[10].ToString();
                item.status = reader.GetBoolean(11);
                item.user_id = reader.GetInt32(12);
                item.setCategory(reader.GetInt32(13), reader.GetString(14), reader.GetString(15), reader.GetInt32(16));
                item.sub_amount = reader.GetDouble(17);

                li.Add(item);
            }

        return li;
    } 
```

但是当我执行插入时：

```
insertNewIncome("", "note", "1000", DateTime.Today, 1, 1); 
```

带有“名称”字段值 =“”

我无法读取“名称”字段。调试说：

[请在此处查看错误屏幕截图](https://lh3.googleusercontent.com/-Kt50cNn0iOo/T4w_yQGRz4I/AAAAAAAAATA/4fc7jzK2POI/s925/Capture%2520%25282%2529.jpg)

这是 ItemTransaction 类：

[请在此处查看 ItemTransaction 类](https://lh5.googleusercontent.com/-UTZXshiCbI4/T4xAK1ldRkI/AAAAAAAAATI/Z5JdIc_huOA/s506/1.jpg)

我不明白这个错误。

请，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:57:03.687

您收到此错误是因为`name`为 NULL。

以下 if 语句将解决此问题：

```
if (reader(1) != null){
  item.name = reader.GetString(1);
} 
```

但是，如果您要传递 value `""`，则不应将其存储为 NULL。

检查您的数据库并查看值是什么。也许您有一个触发器可以更新`""`到`null`.

# audio - Windows 8 - 低延迟音频

> ID：10177477
> 
> 赞同：5
> 
> 时间：2012-04-16T15:53:00.957
> 
> 标签：audio, windows-8, tablet, low-latency

我正在考虑为即将推出的 Windows 8 开发一个应用程序。该应用程序需要低延迟的音频录制和播放，我正在尝试找出操作系统是否会支持它（而不是[其他平台](http://code.google.com/p/android/issues/detail?id=3434)）。

所以我想知道的是：

1.  Windows 8 中是否有低延迟音频 API？
2.  它会在 PC 以外的平台（例如平板电脑）上得到支持吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T05:36:07.770

[WASAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371455%28v=vs.85%29.aspx)是在 Windows Vista 中作为低延迟音频 API 引入的。它可用于桌面和 Windows 8 上的 Metro 风格应用程序。因为它是一个非常低级的 API，使用它并不简单，但它为您提供了最大的功能。它适用于 Windows 8 和新推出的 Windows RT (Arm)。

[XAudio2](http://msdn.microsoft.com/en-us/library/windows/apps/hh405049.aspx)也是可用的，它是一个稍微高级一点的 API，更易于使用。它是 DirectSound 的替代品，专为游戏开发人员设计，但可能适用于您的目的。这也适用于 Windows 8 和 Windows RT。

[本文](http://msdn.microsoft.com/en-us/library/windows/desktop/ee415813%28v=vs.85%29.aspx)底部对这两个 API 进行了一些比较。只有当您发现 XAudio2 不能满足您的需求时，我才会从 XAudio2 开始并转向 WASAPI。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T03:43:53.207

我会考虑使用 XAudio2。微软提供[基本音频播放示例](http://code.msdn.microsoft.com/windowsapps/Basic-Audio-Sample-9a5bb0b7)，方便上手

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T16:05:27.877

是的，您可以访问一个低延迟 API。它被称为[WASAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371455%28v=vs.85%29.aspx "WASAPI")

据我了解，所有平板电脑/笔记本电脑/台式机/任何运行 Windows 8 的设备都可以访问它。唯一的缺点是它更难使用（因为它的级别较低），但是您可以直接与发送到扬声器的字节数组进行交互，并且延迟非常低。

# c# - MVC 3 - 在我的“视图”上创建搜索的最佳方法

> ID：10177485
> 
> 赞同：3
> 
> 时间：2012-04-16T15:53:33.983
> 
> 标签：c#, .net, asp.net-mvc-3, search

我想知道在 MVC 3 中创建站点搜索的最佳方法是什么。我希望能够以某种方式索引我所有的静态 .cshtml 视图文本并使其可搜索。

我搜索了一下，认为 IndexTank 可能是要走的路，但它似乎是最近收购的，不再受支持。

我对 MVC 很陌生，所以最简单的方法就是我在这里所追求的。:)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:04:22.867

最简单的解决方案是在您的网站中嵌入一个仅搜索您的域的 Google 搜索框。

```
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/search">
  <label for="q">Search:</label>
  <input id="q" name="q" size="20" maxlength="255" value="" type="text"/>
  <input name="domains" value="http://www.mydomain.com/" type="hidden"/>
  <input name="sitesearch" value="http://www.mydomain.com/" checked="checked" id="mysite" type="radio"/>
  <label for="mysite">Just this site</label>
  <input name="sitesearch" value="" id="www" type="radio"/>
  <label for="www">WWW</label>
  <input name="btnG" value="Go" type="submit"/>
</form>
<!-- SiteSearch Google --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:11:03.087

将您的静态内容移动到资源文件，然后使用诸如[Lucene.net 之类的东西对资源文件进行搜索](http://incubator.apache.org/lucene.net/)

这是某人使用它的示例[http://www.ifdefined.com/blog/post/2009/02/Full-Text-Search-in-ASPNET-using-LuceneNET.aspx](http://www.ifdefined.com/blog/post/2009/02/Full-Text-Search-in-ASPNET-using-LuceneNET.aspx)

# php - Foreach code not working

> ID：10177486
> 
> 赞同：-4
> 
> 时间：2012-04-16T15:53:34.137
> 
> 标签：php, foreach, if-statement

I cannot figure out whats wrong with this segment of code:

```
}else{
$error_message = '<span class="error">';
foreach($error as $key => $values){
    $error_message.= "$values<br />";
}
$error_message.="</span><br /><br />";
} 
```

I get the error:

> Warning: Invalid argument supplied for foreach() in FILE DIRECTORY on line 45

Line 45 is the `foreach($error...` line

**Solved**: My issue was I messed up the placement of curly brackets which in turn messed up the array

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T15:56:15.527

错误消息说这`$error`不是一个数组。您可以`var_dump($error);`在循环之前检查它以检查它是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:13:37.500

如果`$error`有时为空，那么以下内容就足够了：

```
}else{
    if(!empty($error)){ // only attempt to build error messages if there are errors
        $error_message = '<span class="error">';
        foreach($error as $key => $values){
            $error_message.= "$values<br />";
        }
        $error_message.="</span><br /><br />";
    }
} 
```

# javascript - JS - 动态更改文本字段

> ID：10177487
> 
> 赞同：4
> 
> 时间：2012-04-16T15:53:39.523
> 
> 标签：javascript, forms, dynamic, input

我正在尝试将一个文本字段中的值从另一个文本字段的值更改为没有任何提交的值。例子：

[文本字段 1（输入“你好”）]

[文本字段 2（此处也插入了“你好”）]

下面是我的表格：

```
<form action="#" id="form_field">
   <input type="text" id="textfield1" value="">
   <input type="text" id="textfield2" value="">
</form> 
```

我对JavaScript不太了解，这甚至可能吗？将不胜感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T15:57:45.730

```
<form action="#" id="form_field">
   <input type="text" id="textfield1" value="" onKeyUp="document.getElementById('textfield2').value=this.value">
   <input type="text" id="textfield2" value="">
</form> 
```

看看它在行动：http: [//jsfiddle.net/4PAKE/](http://jsfiddle.net/4PAKE/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:07:59.257

你可以做：

**HTML：**

```
<form action="#">
    <input type="text" id="field" value="" onChange="changeField()">
</form> 
```

**JS：**

```
function changeField() {
    document.getElementById("field").value="whatever you want here";
} 
```

**有时这行不通。**所以你需要使用[micha](https://stackoverflow.com/users/859877/micha)的解决方案：

```
<form action="#" id="form_field">
   <input type="text" id="textfield1" value="" onChange="document.getElementById('textfield2').value=this.value">
   <input type="text" id="textfield2" value="">
</form> 
```

[在这个jsFiddle](http://jsfiddle.net/4PAKE/)中查看这个解决方案

`.value` [您可以在此处](http://www.javascript-coder.com/javascript-form/javascript-form-value.phtml)阅读更多信息。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:56:50.143

如果你想用jquery来做，请添加以下脚本

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script> 
```

然后编写以下代码：

```
$("#textfield1").bind("input", function() {
    $("#textfield2").val($("#textfield1").text());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T16:10:55.657

正如@sarwar026 提到的，您可以使用[jQuery](http://jquery.com/)来完成此操作，但他的回答存在一些问题。你可以用 jQuery 用这个代码来做：

```
$('#textfield1').blur(function() { 
    $("#textfield2").val($("#textfield1").val());
}​);​ 
```

为了使用 jQuery，您需要将它包含在您的页面中，在您的脚本之前。

# asp.net - MoonAPNS. Error processing certificate. Impossible to call to SSPI

> ID：10177490
> 
> 赞同：1
> 
> 时间：2012-04-16T15:53:44.730
> 
> 标签：asp.net, apple-push-notifications

I'm developing a chat that uses APNS.

To do that I'm using MoonAPNS wrapper in C#.

I've developed an ASP web service that uses this dll.

I've followed all the steps in the [tutorial](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2) where I found the code.

I'm using the notification over an app with development sign.

I've been debugging and in the method: SendQueueToapple in this line:

```
_apnsStream.BeginRead(response, 0, 6, ReadResponse, new MyAsyncInfo(response, _apnsStream)); 
```

I'm getting this error:

InnerException: Unknown error processing certificate. -2146893017

I've reviewed the certificate, the device token and everything is ok according with the tutorial, but I'm still getting this error.

Anyone has idea what I'm doing wrong?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T07:35:55.680

我不知道 2 年后这是否会有所帮助，但我将答案留给 iOS8。

Apple 已更改服务器安全性，您必须从 SSL 更改为 TLS：

原始代码：

```
_apnsStream.AuthenticateAsClient(host,certificates,System.Security.Authentication.SslProtocols.Ssl3, false); 
```

新代码：

```
_apnsStream.AuthenticateAsClient(host,certificates,System.Security.Authentication.SslProtocols.Tls, false); 
```

我希望这些信息对某人有所帮助。

有人在 GIT 论坛上评论了这个

# python - 在 ipython 中保存函数定义

> ID：10177492
> 
> 赞同：16
> 
> 时间：2012-04-16T15:53:48.867
> 
> 标签：python, macros, ipython

使用 ipython 时，我经常想保存我在会话期间定义的特定函数，例如：

```
In [1]: def func1():
...:        pass
...: 

In [2]: %save func1.py func1
func1 is neither a string nor a macro. 
```

相反，我必须从中选择函数定义行号`enumerate(_ih)`，或者如果我有函数，则从 vim 手动复制和粘贴`%edit`。

有没有办法实现`%save func1.py func1`？我觉得这应该是可能的，因为 ipython 在使用 %edit 时可以访问定义。

**编辑**

如果我在某些时候使用`%ed`. 在这种情况下，我正在寻找一种方法来保存*新*的函数定义。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-16T16:00:52.097

您可以使用以下方法保存行的`1`内容`%save`：

```
In [2]: %save func1.py 1
The following commands were written to file `func1.py`:
def func1():
    pass 
```

可通过以下方式获得帮助`%save`：

```
In [2]: %save?
Type:       Magic function
...
Docstring:
Save a set of lines or a macro to a given filename.

Usage:
  %save [options] filename n1-n2 n3-n4 ... n5 .. n6 ... 
```

您可以`%edit`使用以下功能体：

```
In [3] %edit func1
 done. Executing edited code... 
```

在`%edit`-ing 你的函数之后`func1`，你可以使用 IPython 获得以下输出`_`：

```
In [4]: _
Out[4]: 'def func1():\n    print "Hello World"\n\n' 
```

`%macro`然后，您可以使用更新`func1`内容定义或重新定义 a ，如下所示：

```
In [5]: %macro new_func1_macro _
Macro `new_func1_macro` created. To execute, type its name (without quotes).
=== Macro contents: ===
def func1():
    print "Hello World" 
```

最后，您可以像这样保存新版本的`func1`with`%save`和 new `%macro`：

```
In [6]: %save func1.py new_func1_macro
The following commands were written to file `func1.py`:
def func1():
    print "Hello World" 
```

希望澄清。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-08T21:16:18.920

```
 In [1]: def a():
   ...:     print('hello')
   ...:     return

In [2]: from inspect import getsource

In [3]: %save a.py getsource(a)

The following commands were written to file `a.py`:
def a():
    print('hello')
    return 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T20:58:57.993

对我来说，ipython 最简单的方法是调用：

```
%edit foo 
```

然后在 vim 中执行：

```
:saveas directory/name.py
:x 
```

这样您就可以为自己获得一份副本。如果要将其转储到特定文件中，请使用 vim

```
:read directory/file 
```

导入内容。

# php - AS3 & MySQL - 将输出字符串添加到变量

> ID：10177493
> 
> 赞同：0
> 
> 时间：2012-04-16T15:53:58.617
> 
> 标签：php, mysql, actionscript-3, flash

我很确定我的问题有一个非常简单的解决方法，但无论如何我会尽可能详细地解释。

基本上我使用 PHP 和 MySQL 使用 GET 将信息发送到我的 flash 文件。

使用 FlashVars，我设法获得了用户的“id”，我可以将我的问题/搜索发送到访问数据库并将信息返回到 html 页面的 PHP 脚本。

我现在想做的是将发送回 html 页面的信息添加到 flash 内的变量中，例如：

```
var usr_name = get_user_name(id) || 'Unknown'; // "Unknown" should just be for offline use. 
```

但这只是返回“未知”

这是使用的功能：

```
 public function get_user_name(usr_id){
                loadData('search.php',"quest=name",'usr_id='+usr_id);
        }

private function loadData(page_Name='search.php',get1='g1=1',get2='g2=2',get3='g3=3'):void {
            var randomParam:String = "?p=" + Math.floor(Math.random() * (10000000));
            var create_URL = (URL + page_Name + randomParam + '&'+ get1 + '&' + get2 + '&' + get3) ;
            trace(create_URL);

            _loader = new URLLoader();
            _request = new URLRequest(create_URL);          
            _request.method = URLRequestMethod.POST;
            _loader.addEventListener(Event.COMPLETE, onLoadData);
            _loader.addEventListener(IOErrorEvent.IO_ERROR, onDataFiledToLoad);
            _loader.addEventListener(IOErrorEvent.NETWORK_ERROR, onDataFiledToLoad);
            _loader.addEventListener(IOErrorEvent.VERIFY_ERROR, onDataFiledToLoad);
            _loader.addEventListener(IOErrorEvent.DISK_ERROR, onDataFiledToLoad);
            _loader.load(_request);
        }

public function onLoadData(e:Event):String {
            return(e.target.data);
        } 
```

这一切似乎都很好，只是当我尝试不使用 or 语句（|| 'Unknown'）时，我收到此错误：

```
TypeError: Error #2007: Parameter text must be non-null.
    at flash.text::TextField/set text()
    at App/frame1() 
```

如果我只是在网络浏览器中输入 URL，我会得到输出的名称。

我不确定为什么会出现这样的问题。

谢谢伊莱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:12:35.523

```
public function onLoadData(e:Event):String {

            return(e.target.data);
        } 
```

如果您期望上述函数将响应字符串返回到变量中，那么您就错了。

您必须让`onLoadData`填充变量本身。试试这个方法：

```
var usr_name = 'Unknown'; 

get_user_name(id);

function get_user_name(usr_id) {

    loadData('search.php',"quest=name",'usr_id='+usr_id);
}

function loadData(page_Name='search.php',get1='g1=1',get2='g2=2',get3='g3=3'):void {

    var randomParam:String = "?p=" + Math.floor(Math.random() * (10000000));
    var create_URL = (URL + page_Name + randomParam + '&'+ get1 + '&' + get2 + '&' + get3);
    trace(create_URL);

    _loader = new URLLoader();
    _request = new URLRequest(create_URL);
    _request.method = URLRequestMethod.POST;
    _loader.addEventListener(Event.COMPLETE, onLoadData);
    _loader.addEventListener(IOErrorEvent.IO_ERROR, onDataFiledToLoad);
    _loader.addEventListener(IOErrorEvent.NETWORK_ERROR, onDataFiledToLoad);
    _loader.addEventListener(IOErrorEvent.VERIFY_ERROR, onDataFiledToLoad);
    _loader.addEventListener(IOErrorEvent.DISK_ERROR, onDataFiledToLoad);
    _loader.load(_request);
}

function onLoadData(e:Event) {

    usr_name = e.target.data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:54:40.570

好的，粗略地看一下您的代码，很明显您不知道 AS3 中 URL 请求的“异步”性质。

当您这样做时，Flash 实际上会在不同的*线程*`_loader.load()`上打开此管道，可以这么说。这可确保加载 URL 请求时应用程序不会冻结。

 *你所需要的就是这样的：

```
public function get_user_name(usr_id){
    loadData('search.php',"quest=name",'usr_id='+usr_id);
}

private function loadData(page_Name='search.php',get1='g1=1',get2='g2=2',get3='g3=3'):void {
    var randomParam:String = "?p=" + Math.floor(Math.random() * (10000000));
    var create_URL = (URL + page_Name + randomParam + '&'+ get1 + '&' + get2 + '&' + get3) ;
    trace(create_URL);

    _loader = new URLLoader();
    _request = new URLRequest(create_URL);          
    _request.method = URLRequestMethod.POST;
    _loader.addEventListener(Event.COMPLETE, onLoadData);
    _loader.addEventListener(IOErrorEvent.IO_ERROR, onDataFiledToLoad);
    _loader.addEventListener(IOErrorEvent.NETWORK_ERROR, onDataFiledToLoad);
    _loader.addEventListener(IOErrorEvent.VERIFY_ERROR, onDataFiledToLoad);
    _loader.addEventListener(IOErrorEvent.DISK_ERROR, onDataFiledToLoad);
    _loader.load(_request);
}

public function onLoadData(e:Event):String {
    usr_name = e.target.data || 'Unknown';
} 
```

你称之为

```
var usr_name = "";
get_user_name(); 
```

我注意到您的代码不是强类型的。即您不将数据类型分配给您的变量。这可能会导致问题并降低可读性。

此外，最好删除所有添加的事件侦听器（使用`removeEventListener`），以便对加载程序进行垃圾收集。*

# java - Is there a way to set the priority of the background thread used by a SwingWorker?

> ID：10177494
> 
> 赞同：5
> 
> 时间：2012-04-16T15:54:12.797
> 
> 标签：java, multithreading, swing, swingworker, thread-priority

In Java is there a way to set the priority for the thread that will be calling the `doInBackground()` method of a `SwingWorker` object?

In the Thread API there is a `setPriority()` method. The `SwingWorker.execute()` method schedules the swingworker for execution on a worker thread. I would like to have access to that worker thread to set it's priority.

From my understanding this worker thread comes from a default worker thread pool. Would the only way to handle this is to use my own executor?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T18:50:46.567

JDK7 [SwingWorker javadoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)暗示设计者不打算让用户直接与后台线程交互或更改后台线程：

`... the exact strategy of choosing a thread for any particular SwingWorker is unspecified and should not be relied on.`

SwingWorker.getWorkersExecutorService() 的实现似乎强化了这个想法，因为他们以一种不容易改变的方式实现了它。

SwingWorker 是典型案例的样板解决方案，您没有典型案例。我建议你编写代码来处理运行后台任务，而不是试图破解 SwingWorker 来做你想做的事。这样，将来维护您的代码的任何人（甚至您自己！）都不会想知道为什么 SwingWorker 的行为不符合预期。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T15:59:37.310

我能想到的唯一方法是让 execute 方法使用`Thread.currentThread()`. 然后，您可以设置此线程的优先级（前提是允许调用者）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T20:43:37.190

由于 SwingWorker 是一个`Runnable`，您可以将其提交给任何`java.util.concurrent.ExecutorService`

# android - Calling WCF from android over https with credentials

> ID：10177498
> 
> 赞同：0
> 
> 时间：2012-04-16T15:54:18.887
> 
> 标签：android, wcf, https

I am trying to call my RESTful WCF service over https on Android. I keep getting a 401: unauthorized error whenever I make the call. The other parts of my code work, ive tested it locally.

Here is the pertinent code:

```
// http scheme
schemeRegistry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
// https scheme
schemeRegistry.register(new Scheme("https", new EasySSLSocketFactory(), 443));

credentialsProvider = new BasicCredentialsProvider();
credentialsProvider.setCredentials(new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT),
            new UsernamePasswordCredentials("user", "pass"));
clientConnectionManager = new ThreadSafeClientConnManager(params, schemeRegistry);

context = new BasicHttpContext();
context.setAttribute("http.auth.credentials-provider", credentialsProvider);

HttpGet request = new HttpGet(SERVICE_URI + URL1 + EID);
request.setHeader("Accept", "application/json");
request.setHeader("Content-type", "application/json");

DefaultHttpClient client = new DefaultHttpClient(clientConnectionManager, params);
client.setCredentialsProvider(credentialsProvider);
HttpResponse response = client.execute(request, context);

HttpEntity responseEntity = response.getEntity(); 
```

EasySSLSocketFactory uses an implementation of X509TrustManager. I know that code works as well. Can someone please provide some advice. Nothing I have found works correctly.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:03:34.757

事实证明，HttpClient 不支持开箱即用的 NTLM 身份验证（我使用带有 Windows 身份验证的 IIS）。这个链接给了我我需要的一切。只需复制和粘贴，然后忘记它。

[http://hc.apache.org/httpcomponents-client-ga/ntlm.html](http://hc.apache.org/httpcomponents-client-ga/ntlm.html)

# ios - Call to CFReadStreamRead stops execution in thread

> ID：10177500
> 
> 赞同：1
> 
> 时间：2012-04-16T15:54:35.613
> 
> 标签：ios, nsthread, core-foundation, cfstream

> ***NB:** The entire code base for this project is so large that posting any meaningful amount wold render this question too localised, I have tried to distil any code down to the bare-essentials. I'm not expecting anyone to solve my problems directly but I will up vote those answers I find helpful or intriguing.*

This project uses a modified version of [AudioStreamer](https://github.com/mattgallagher/AudioStreamer) to playback audio files that are saved to locally to the device (iPhone).

The stream is set up and scheduled on the current loop using this code (unaltered from the standard AudioStreamer project as far as I know):

```
CFStreamClientContext context = {0, self, NULL, NULL, NULL};
CFReadStreamSetClient(
                          stream,
                          kCFStreamEventHasBytesAvailable | kCFStreamEventErrorOccurred | kCFStreamEventEndEncountered,
                          ASReadStreamCallBack,
                          &context);
CFReadStreamScheduleWithRunLoop(stream, CFRunLoopGetCurrent(), kCFRunLoopCommonModes); 
```

The `ASReadStreamCallBack` calls:

```
- (void)handleReadFromStream:(CFReadStreamRef)aStream
               eventType:(CFStreamEventType)eventType 
```

On the AudioStreamer object, this all works fine until the stream is read using this code:

```
BOOL hasBytes = NO;  //Added for debugging
hasBytes = CFReadStreamHasBytesAvailable(stream);

length = CFReadStreamRead(stream, bytes, kAQDefaultBufSize); 
```

`hasBytes` is `YES` but when `CFReadStreamRead` is called execution stops, the App does not crash it just stops exciting, any break points below the `CFReadStreamRead` call are not hit and `ASReadStreamCallBack` is not called again.

I am at a loss to what might cause this, my best guess is the thread is being terminated? But the hows and whys is why I'm asking SO.

Has anyone seen this behaviour before? How can I track it down and ideas on how I might solve it will be very much welcome!

### Additional Info Requested via Comments

1.  This is 100% repeatable
2.  `CFReadStreamHasBytesAvailable` was added by me for debugging but removing it has no effect

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:26:18.880

首先，我假设它`CFReadStreamScheduleWithRunLoop()`在同一个线程上运行`CFReadStreamRead()`？

这个线程正在处理它的运行循环吗？未能做到这一点是我的主要怀疑。你`CFRunLoopRun()`在这个线程上有类似或同等的电话吗？

通常没有理由产生一个单独的线程来异步读取流，所以我对你的线程设计有点困惑。这里真的有后台线程吗？此外，通常`CFReadStreamRead()`会在您的客户端回调中（当您收到`kCFStreamEventHasBytesAvailable`事件时（它似乎在链接代码中），但您建议`ASReadStreamCallBack`永远不会调用。您如何修改 AudioStreamer？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:29:22.867

流指针可能只是以某种方式损坏。如果字节可用，CFReadStreamRead 肯定不会阻塞（对于本地文件，它肯定不会阻塞超过几毫秒）。您能否提供用于创建流的代码？

或者，CFReadStreams 异步发送消息，但它有可能（但不太可能）阻塞，因为没有处理运行循环。

如果你愿意，我已经上传了我的 AudioPlayer，灵感来自于[https://code.google.com/p/audjustable/](https://code.google.com/p/audjustable/)上托管的 Matt 的 AudioStreamer 。它支持本地文件（以及 HTTP）。我认为它可以满足您的需求（不仅仅是来自 HTTP 的流文件）。

# pentaho - How to migrate tables with foreign keys in Pentaho Kettle?

> ID：10177502
> 
> 赞同：1
> 
> 时间：2012-04-16T15:54:51.970
> 
> 标签：pentaho

I am trying to use Pentaho Keetle to do some data migration. I would like to create a transformation to accomplish the following:

I have the following tables in the source:

**table 1**

id [PK]

name

**table 2**

id [PK]

source_id [FK with table 1.id]

state

I have the same structures in the destination server. Let's say i would like to migrate 10 rows from **table 1** along with their relations from **table 2** in the destination server.

How would i do that with a Keetle transformation?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:17:56.773

您将在 2 次转换中完成此操作，并围绕它们进行工作。先做table1，再做table2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T23:21:57.177

如何在 Pentaho Kettle 中迁移带有外键的表？

创建 3 个表“USER”、“USER_STATE”、“USER_MIGRATE”</p>

## 用户

如屏幕截图所示，在 USER 表中创建 2 个字段“ID”和“NAME”

![在此处输入图像描述](../Images/141d6d5b740c83acadae726efe323b30.png)

## USER_STATE

如屏幕截图所示，在 USER_STATE 表中创建 3 个字段“ID”、“USER_ID”、“STATE”。这里 USER_ID 是“USER”表的外键。

![在此处输入图像描述](../Images/91b490b610277dc2af657478fede3656.png)

## USER_MIGRATE

这是我们将从其他两个表“USER”和“USER_STATE”迁移数据的表。创建 5 个字段“ID”、“USER_ID”、“USER_STATE_ID”、“USER_NAME”、“USER_STATE”，如屏幕截图所示

![在此处输入图像描述](../Images/b2ae8eec77a47d5d3a8b2a4865235bae.png)

在此表中，“USER_STATE_ID”是表 USER_STATE 的外键

我们可以在一次转换中做到这一点。我们将使用连接查询从两个表“USER”和“USER_STATE”中选择数据。然后我们可以将这些数据放入我们的第三张表，即迁移表中

请在下面找到加入查询

下面的屏幕截图讲述了如何映射表字段

![在此处输入图像描述](../Images/915576e3a53f65619c7917535b6791b0.png)

这是用于将数据从源表迁移到目标表的转换

![在此处输入图像描述](../Images/f07bb630c07f7432f8be7f2f2f905f7b.png)

# javascript - Relay mouse position in iFrame to parent window

> ID：10177503
> 
> 赞同：1
> 
> 时间：2012-04-16T15:54:52.507
> 
> 标签：javascript, javascript-events

I have a page **A.html** where I embed **B.html**, I want to get mouse position in A.html, there is a problem, when my mouse clicks on A.html when over the **iframe** element, it does not show me the mouse position

**A.html**

```
<style>
  .iframe_1{height:150px; width: 150px; top:360px; left:365px; overflow:hidden;
            position:absolute;}
</style>
<iframe id="iframe" class="iframe_1" src="http://www.example.com/B.html">
</iframe> 
```

**my.js**

```
document.onclick=getMouPo;
function getMouPo(ev){
  if ( ev == null )
    ev = window.event;

  var point = {
    x:0,y:0
  };
  if ( typeof window.pageYOffset != 'undefined'){
    point.x = window.pageXOffset;
    point.y = window.pageYOffset;
  }
  else if(typeof document.compatMode != 'undefined' && document.compatMode != 'BackCompat'){
    point.x = document.documentElement.scrollLeft;
    point.y = document.documentElement.scrollTop;
  }
  else if(typeof document.body != 'undefined'){
    point.x = document.body.scrollLeft;
    point.y = document.body.scrollTop;
  }

  point.x += ev.clientX;
  point.y += ev.clientY;
  alert (point.x +","+ point.y);
  return point;
} // getMouPo(ev) 
```

# java - Apache Commons Mail Erroring on Server Contact

> ID：10177504
> 
> 赞同：0
> 
> 时间：2012-04-16T15:54:55.540
> 
> 标签：java, email, networking, apache-commons-email

I have a Java app that sends email via Apache Commons Email. The app works just find on my development environment, but when I deploy it to the server, I'm getting an error that Commons couldn't connect to the email server.

org.apache.commons.mail.EmailException: Sending the email to the following failed : 255.255.255.255 :587 ...Error authenticating with server.

Just to be sure this wasn't my configuration, I've tried on 2 different email providers, 1) Our email company email provider 2) Gmail. Both work on my dev and both fail with the same message on the server.

I've tried several ports and IP combinations. I've turned SSL on and off. I've checked with our email provider. I'm left with a configuration of either the server or the network.

I work remotely so I'm not on the same network as our servers, but I the app works for me even if I am on VPN.

I've used telnet from within the server and I can connect to the email provider on the proper port.

Does anyone have anything else I can try? Thanks.

**Edit** The error I'm getting is an authentication error. Could there be a security setting to prevent the credentials from being passed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:15:21.903

看来我错过了 1 行代码。假设“电子邮件”是我的邮件对象......

email.setSSL(true);

现在一切正常。我不确定为什么它以前不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:12:39.337

听起来仍然像一个权限问题。1024 以下的端口受到限制。使用 sudo 权限启动您的应用程序。

# c++ - Adding Verbosity to a Program

> ID：10177506
> 
> 赞同：1
> 
> 时间：2012-04-16T15:55:02.407
> 
> 标签：c++, c, linux, verbosity

This is a very n00b question but I'm writing a nix based tool and would like to have verbosity flags, based on the number of vvv's passed in I would go about printing debug/information statements in my program.

My question is how would I go about using opargs for this, since optargs can only parse one character at a time.

Also suppose I know I'm at verbosity level 3, do all my print statements have to be in an if condition? Or there a clever way of going about it using the pre-processor?

Also if someone could point me to some code online which does this, that would be awesome.

Thanks

I figure it out, thought I'd post here if someone else comes across this in the future:

Basically for all my different verbosity statements I defined a special print using the preprocessor like:

```
#define dprintf \
    if (verbosity == 1) printf 
```

I then put in the statements as needed in the code e.g.

```
dprintf ("Verbosity is at level 1."); 
```

My opt atgs looks something like this

```
case 'v':
    verbosity++;
break; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:12:48.340

详细级别在编译时是未知的，因此您需要准备好代码来处理用户选择的任何级别。

一种简单且易于理解的方法是在不透明的编译单元中分离您的日志记录功能，并使用静态变量跟踪详细程度。然后，您可以使用“set_logging_level(level)”之类的内容对其进行初始化，并编写由该静态变量保护的日志记录函数。然后，您只需公开初始化和日志记录功能，并在代码中根据需要使用它们。

```
static level = 0;
void set_logging_level(int l) { level = l; }

void log_info(char* msg) {
  // Will always print
}

void log_debug(char *msg) {
  if(level > 0)
    // Write to stdout or stderr, whichever fits
}

void log_details(char *msg) {
  if(level > 1)
    // As above
}

void log_insanity(char *msg) {
  if(level > 2)
    // As above
} 
```

编辑：更健全的记录条件。特别是如果您想要在详细级别上升时包含日志记录......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:06:32.430

[条件编译](http://www.gnu.org/prep/standards/html_node/Conditional-Compilation.html)怎么样？

您还可以通过为详细级别设置一个数字而不是传递那么多*v*来简化。

```
#if VERBOSE_LEVEL == 3
  print("A verbose message");
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:15:21.930

我不太确定这是否是您的意思，但这就是我在另一个项目中实现它的方式：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#define TRUE    1
#define FALSE   0

int usage( char *name, int quit );

int main (int argc, char **argv) {
    int c;
    static int vlevel = 0;

    while ( (c = getopt(argc, argv, ":abc:d:hv012")) != -1) {
        int this_option_optind = optind ? optind : 1;
        switch (c) {

            case 'v':
                vlevel++;
                printf ("verbosity level is %d\n", vlevel);
                break;

            case ':':       /* Option without required operand */
                fprintf(stderr, "option -%c requires an operand\n", optopt);
                break;

            case 'h':
            case '?':
                usage( argv[0], TRUE );
                break;

            default:
                printf ("?? getopt returned character code 0%o ??\n", c);
        }
    }

    if (optind < argc) {
        printf ("non-option ARGV-elements:\n");
        while (optind < argc)
            printf ("\t%s\n", argv[optind++]);
    }

    exit (0);
}

int usage( char *progname, int quit )
{
    printf ( "Usage:\n\t%s [-vh]\n", progname );
    if ( quit ) exit( 1 );
    return 0;
} 
```

这将为您提供以下内容：

```
eroux@smaug:~$ ./testverbose -h
Usage:
    ./testverbose [-vh]
eroux@smaug:~$ ./testverbose -vvvv
verbosity level is 1
verbosity level is 2
verbosity level is 3
verbosity level is 4
eroux@smaug:~$ 
```

从那里您应该能够使用 vlevel 变量 [in main()] 在相关详细级别期间打印正确的消息。

# objective-c - method for performing lot of read/write operations on a database

> ID：10177507
> 
> 赞同：1
> 
> 时间：2012-04-16T15:55:02.747
> 
> 标签：objective-c, xcode, sqlite, core-data

I am developing an iPad application where I would have to perform a lot of read/write operations on a database(i have to store the clicks on the view in a database nad based on the clicks make perform some operations). I am confused as to how to proceed in this case. Should I just create a SQLIte database and perform the read/writes(will this slow down the response time of the app??) or is there some other technique(i have heard of Core data but not sure if this work for my case). Please help me

Thanks

Ajith

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T00:30:15.910

如果您只是要按顺序保存它们，然后以相同的顺序读回它们，那么常规文件可能是最好的。但是，如果您要执行其他任何操作，请使用 CoreData。它不仅仅是一个关系数据库。它允许持久对象图。此外，如果您使用 UIManagedDocument 或您自己的父/子 NSManagedObjectContext 安排，您甚至不会看到数据库命中，因为这一切都发生在后台线程中。

来吧，测试一下。覆盖开始/移动/结束触摸，并在每次触摸时将对象放入数据库。如果您按照我的描述进行操作，您甚至不会注意到数据库命中。

假设模型中有两个实体，MyTouchEvent 和 MyTouch，其中 MyTouchEvent 与 MyTouch 是一对多的关系。

```
// Call this from touchesBegan, touchesMoved, and touchesEnded...
- (void) saveTouches:(NSSet*)touches kind:(NSString*)kind
{
    NSManagedObjectContext *moc = self.document.managedObjectContext;
    MyTouchEvent *myTouchEvent = [NSEntityDescription insertNewObjectForEntityForName:@"MyTouchEvent" inManagedObjectContext:moc];
    myTouchEvent.kind = kind;
    for (UITouch *touch in touches) {
        CGPoint touchPoint = [touch locationInView:self];
        MyTouch *myTouch = [NSEntityDescription insertNewObjectForEntityForName:@"MyTouch" inManagedObjectContext:moc];
        myTouch.x = [NSNumber numberWithFloat:touchPoint.x];
        myTouch.y = [NSNumber numberWithFloat:touchPoint.y];
        [myTouchEvent addTouchesObject:myTouch];
    }
    [self.document updateChangeCount:UIDocumentChangeDone];
} 
```

如果您的对象创建成本很高，您可以添加一个方法来创建私有上下文，并在其中完成所有工作，有两种选择。您可以将其作为文档的主要上下文的父级，在这种情况下，您所要做的就是将代码嵌入一个块中，然后在 MOC 上调用 save ...

```
- (NSManagedObjectContext*)moc
{
    if (!_moc) {
        _moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
        _moc.parentContext = self.document.managedObjectContext;
    }
    return _moc;
}
- (void) saveTouches:(NSSet*)touches kind:(NSString*)kind
{
    NSManagedObjectContext *moc = self.moc;
    [self.moc preformBlock:^{
        MyTouchEvent *myTouchEvent = [NSEntityDescription insertNewObjectForEntityForName:@"MyTouchEvent" inManagedObjectContext:moc];
        myTouchEvent.kind = kind;
        for (UITouch *touch in touches) {
            CGPoint touchPoint = [touch locationInView:self];
            MyTouch *myTouch = [NSEntityDescription insertNewObjectForEntityForName:@"MyTouch" inManagedObjectContext:moc];
            myTouch.x = [NSNumber numberWithFloat:touchPoint.x];
            myTouch.y = [NSNumber numberWithFloat:touchPoint.y];
            [myTouchEvent addTouchesObject:myTouch];
        }
        NSError *error = nil;
        [moc save:&error];
    }];
} 
```

或者，您可以将其设为兄弟，在这种情况下，所有数据库都不会在主线程上运行（ UIManagedDocument 的主上下文在主线程上运行，因此在上述情况下，主线程将传递对象到执行保存的上下文）。但是，在这种情况下，您的 document.managedObjectContext 必须执行 FETCH 才能获取放入数据库的任何内容。但是，它在存储期间不会对主线程造成任何性能影响。

```
- (NSManagedObjectContext*)moc
{
    if (!_moc) {
        _moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
        _moc.parentContext = self.document.parentContext;
    }
    return _moc;
} 
```

现在，这些将进入数据库，但如果您的文档想要查看它们，则必须执行提取。根据您的用例选择最好的。不过，我想你会很好地处理第一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:27:56.047

您最好的选择是将您的操作流式传输到文件系统上的文件中。然后你可以把它留在那里，或者如果你真的需要，通过 Core Data 将它上传到 SQLite。这样做的原因是，如果你`ManagedObjectContext`为每一个偶数都提交你的，事情会运行得很慢。

使用：`backingFile = [NSFileHandle fileHandleForUpdatingAtPath:eventsFilePath];`将您的事件附加到使用`[backingFile writeData:...];`

请记住，关系数据库的主要目的是“搜索”数据。如果您不打算搜索 UI 点击事件（我怀疑您会这样做），那么流式传输到文件是您最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:26:16.513

如果有很多点击，您肯定不想将它们中的每一个单独写入数据库。也许，累积鼠标动作并将它们保存在`-mouseUp:`事件中是一个很好的折衷方案。

通过简化程序，Core Data 可能会有所帮助。它使您可以非常快速地创建对象并推迟将它们保存到持久存储中。但是，如果你安装一个，你可以用 SQLite 达到同样的效果`CFRunLoopObserver`，等到没有事件，然后将一批数据写入数据库。

无论您选择什么，策略都是累积点击并批量保存。

# c++ - Deleting an object polymorphically

> ID：10177508
> 
> 赞同：1
> 
> 时间：2012-04-16T15:55:04.763
> 
> 标签：c++, virtual-destructor

```
Base* optr=new Derived();

delete optr; 
```

I know that if Base class has a non-virtual destructor, only ~Base() destructor is going to be called when deleting `optr` pointer. But I found out that even without ~Derived() destructor being called the memory that was taken by the Derived Object was freed. So my question is can an object get freed without calling it's destructor?

If the answer is **yes**, can I use a non-virtual destructor if my Derived class does not contain any dynamically allocated variables so I don't care if it did not get called?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T16:04:54.770

从标准 C++ 的角度来看，答案很简单：结果是未定义的行为，所以你得到的是*完全*不可预测的

我有点不明白你为什么要关心。如果您可以从类中消除*所有*虚函数，则每个实例都会变小（按 vtable 指针的大小）。但是，使用基类这样的东西很少有意义——为了明智地用作基类，您几乎需要在基类中至少有一个虚函数来覆盖派生类。一旦你有了一个虚函数（任何虚函数），添加更多实际上是免费的——对象不会因为添加更多虚函数而变得更大。

直接回答您的问题：是的，可以在不调用析构函数的情况下释放内存。真正的问题是当你做到这一点时会发生什么（这个问题真的没有答案）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:04:47.423

未定义行为的问题是，有时它*似乎有效*。

该标准并没有说如果基类析构函数不是虚拟的，您的程序就必须失败，它说当析构函数*是虚拟的时它必须**工作*。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T16:02:00.053

如果派生类不添加任何成员，您*也许可以在没有虚拟析构函数的情况下逃脱。*内存占用是相同的，并且成员都将在基类析构函数中被销毁。但是，标准并不能保证这一点，您将受制于编译器的实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T16:02:55.617

有两件不同的事情：调用对象析构函数和释放内存。

标准堆规范不要求您在释放内存块时传递它的大小。也就是说，堆实现应该自己推断出内存块的大小。

因此 -**是**的。如果您`Derived`不包含必须通过适当方式销毁的额外内容（例如在堆上分配的内存、文件句柄等） - 您不需要虚拟析构函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T15:57:46.273

看这里：[虚拟析构函数](http://blogs.msdn.com/b/oldnewthing/archive/2004/05/07/127826.aspx)*

# javascript - Detect or prevent page load from object tag?

> ID：10177509
> 
> 赞同：1
> 
> 时间：2012-04-16T15:55:16.790
> 
> 标签：javascript, html, internet-explorer-6, object-tag

I need to detect if a page is loaded from an `<object>` tag. On most browsers, several javascript iframe detection techniques flag this as an iframe (e.g. `window.top === window.self`), which is just fine.

The page is loaded via an object tag as such:

```
<object width="0" height="0" data="/target/"></object> 
```

Some versions of Internet Explorer 6 are the exception (big surprise). The browser version is not controllable. IE 6.0.2800 does not identify as an iframe, and will pass any expected width & height values along.

**EDIT**: If there is a way to have the target page break any loads from object tags (at least IE6, but any others would be okay), that would be fine with me.

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-16T15:58:23.577

它真的需要在 IE6 下工作吗？我是说...

[http://www.w3schools.com/browsers/browsers_stats.asp](http://www.w3schools.com/browsers/browsers_stats.asp) ... IE 只有 18.6% 而使用 IE 6 的人...

# asp.net - Best way to allow postback on a gridview without viewstate

> ID：10177511
> 
> 赞同：0
> 
> 时间：2012-04-16T15:55:19.823
> 
> 标签：asp.net, gridview, postback, viewstate

My gridview is basically a hit list of results from which the user selects one, and I want to get a postback saying which one he has selected. There is no need for the grid contents to survive the postback round-trip because the hit list disappears as soon as he has selected an item.

I don't want to use viewstate because the hit list is likely to be large. I don't want to databind from the database in PageLoad to repopulate the grid because the search may take a while.

what I'm thinking at the moment is that I can put some javascript on the 'select' link to store the ID of the selected item in a hidden field and then call __doPostBack

this still seems a bit clunky. can you think of a cleaner way?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:06:09.047

如果在用户单击行中的任意位置时应触发回发，请使用该`ItemDataBound`事件附加客户端`onclick`处理程序：

```
protected void GridView1_ItemDataBound(object sender, GridViewRowEventArgs e)
{
    var dataItem = e.Item as GridViewRow;
    if (dataItem != null)
    {
        dataItem.Attributes["onclick"] = string.Format("__doPostBack(this, '{0}')", e.Row.RowIndex);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:15:36.920

所选项目的 ID 是不是用户不应该看到的敏感信息？

如果不是，您可以将您的选择按钮设置为指向下一页的链接，并将 ID 作为查询字符串变量。点击只会移动到下一页，不需要回发。

# comments - Doxygen @file 删除了除@brief 之外的其他命令格式

> ID：10177513
> 
> 赞同：0
> 
> 时间：2012-04-16T15:55:26.013
> 
> 标签：comments, doxygen

如果我有带有 doxygen 注释的 ac 头文件：

```
/*!
*    @file    MyHeaderFile.h
*    @brief   Brief header file description
*    @author  Me Myself
*    @date    2012.4.16
*/ 
```

这导致像这样的html：

![在此处输入图像描述](../Images/c6dd98862da2c62aa6926a004103b01b.png)

同样的语法在函数注释中也能正常工作：

![在此处输入图像描述](../Images/4203a72cbc9312830d39cdcb4c031f20.png)

我做错了什么还是这一切都受支持？

编辑：正常功能评论：

```
/*!
*    @brief This function does things
*
*    @author Me Myself
*    @date   2012.4.16
*   
*    @returns    void
*/
void MyFunctionThing(void)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:50:08.317

尽管给定您的示例，我无法真正重现该问题，但这很可能是 Markdown 支持（在 1.8.0 版中引入）的结果，尤其是[代码块功能](http://www.doxygen.nl/manual/markdown.html#md_codeblock)。您可以尝试避免/解决此问题的选项：

*   在配置文件中将 MARKDOWN_SUPPORT 设置为 NO
*   缩进评论块中的文本，空格少于 4 个（在 之后`*`）。

# java - URLClassLoader 不读取插件的外部 JAR 库

> ID：10177517
> 
> 赞同：0
> 
> 时间：2012-04-16T15:55:43.380
> 
> 标签：java, plugins, jar, classloader, urlclassloader

我已经用 Java 实现了一个简单的基于插件的应用程序。主插件类派生自称为“插件”的抽象类。应用程序从 JAR 文件中读取该类并通过创建该类的实例来运行插件。我猜是标准程序:)

直到现在一切都很好。但是当我在我的插件中包含一个库时会出现问题，比如 MySQL 连接器。执行后抛出异常 NoClassDefFoundError 和 ClassNotFoundException。我通过将 MySQL 连接器库添加到主应用程序来克服这个问题，但那有什么意义呢？:)

我不是 Java 专家，所以我不确定是否有任何替代解决方案，例如为库定义类路径等。

这是我的插件加载器：http: [//pastebin.com/90rQ9NfJ](http://pastebin.com/90rQ9NfJ)

这是我的插件基类： http: [//pastebin.com/Juuicwkm](http://pastebin.com/Juuicwkm)

我正在从 GUI 执行：

```
 private void jButtonAddActionPerformed(java.awt.event.ActionEvent evt) {
        JFileChooser fileChooser = new JFileChooser();
        fileChooser.setFileFilter(new FileNameExtensionFilter("JTask Plugin (*.JAR)", "JAR"));

        if (fileChooser.showOpenDialog(this) == JFileChooser.APPROVE_OPTION)
        {
            File pluginFile = fileChooser.getSelectedFile();
            PluginLoader pluginLoader = new PluginLoader();
            Plugin plugin = pluginLoader.loadPlugin(pluginFile);
            if (plugin != null)
                jPanelPlugins.add(new PluginControl(jPanelPlugins, plugin));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:23:49.960

如果是这种情况，您的类是一个 Mysql 驱动程序，您必须排除（在类调用时）不可用的类。在 .jar 文件的文件夹中，有一个名为“integration”的文件夹，其中包含“jboss”和“c3p0”，目前不存在。

```
while (en.hasMoreElements()) { 
                JarEntry entry = new JarEntry(en.nextElement());
                String name = entry.getName();
                if (name.contains("/integration/")) {
                  continue;
                } else {
                 if (!entry.isDirectory() && name.toLowerCase().endsWith(".class"))
                 {
                    classList.add(name.replace(".class", ""));
                 }
                }
} 
```

这应该加载一个 mysql.xxx.jar 文件。尝试这个

* * *

**动态加载.java**

* * *

```
package dynamicloading;

import java.io.File;
import java.net.URL;
import java.net.URLClassLoader;
import java.sql.Connection;
import java.sql.Statement;
import java.sql.Driver;
import java.sql.DriverManager;
import java.sql.DriverPropertyInfo;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Enumeration;
import java.util.Properties;
import java.util.jar.JarEntry;
import java.util.jar.JarFile;

/**
 *
 * @author Administrator
 */
class com_mysql_jdbc_Driver implements Driver {
    private Driver driver;
    com_mysql_jdbc_Driver(Driver cmjd) {
        this.driver = cmjd;
    }
    @Override
    public boolean acceptsURL(String aurlS) throws SQLException {
        return this.driver.acceptsURL(aurlS);
    }
    @Override
    public Connection connect(String aurlS, Properties pP) throws SQLException {
        return this.driver.connect(aurlS, pP);
    }
    @Override
    public int getMajorVersion() {
        return this.driver.getMajorVersion();
    }
    @Override
    public int getMinorVersion() {
        return this.driver.getMinorVersion();
    }
    @Override
    public DriverPropertyInfo[] getPropertyInfo(String aurlS, Properties pP) throws SQLException {
        return this.driver.getPropertyInfo(aurlS, pP);
    }
    @Override
    public boolean jdbcCompliant() {
        return this.driver.jdbcCompliant();
    }
}

public class DynMain {

    /**
     * @param args the command line arguments
     */

    public static void main(String[] args) throws Exception {
        /* please set to your path*/
        File file = new File("U:/mozsamples/mysql-connector-java-5.1.19-bin.jar");
        Driver cmjdD;
        String aktCS;
        String urlS = "jdbc:mysql://localhost/db";
        String userS = "must-be-set";
        String passS = "must-be-set";
        Connection con;
        Statement stmt;
        URLClassLoader clazzLoader = URLClassLoader.newInstance(new URL[]{file.toURI().toURL()});
        JarFile jarFile = new JarFile(file);
        Enumeration<JarEntry> entries = jarFile.entries();

        while (entries.hasMoreElements()) {
            JarEntry element = entries.nextElement();
            if (element.getName().endsWith(".class")) {
                String name = element.getName();
                if (name.contains("/integration/")) {
                  System.out.println( "ignored: " + name );
                  continue;
                } else
                {
                try {    
                    aktCS = element.getName().replaceAll(".class", "").replaceAll("/", ".");
                    clazzLoader.loadClass(aktCS);
                    if (name.contains("com/mysql/jdbc/Driver")) {
                        cmjdD = (Driver)Class.forName(aktCS, true, clazzLoader).newInstance();
                        try {
                        DriverManager.registerDriver(new com_mysql_jdbc_Driver(cmjdD));
                        System.out.println( "register Class: " + aktCS );
                        } catch (SQLException e) {
                          e.printStackTrace();
                        }
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
                }
            }
        } 
    try {
    con = DriverManager.getConnection(urlS,userS,passS);
    stmt = con.createStatement();
    /*ResultSet rs = stmt.executeQuery("select * from idcart where ID=255"); */

    stmt.close();
    } catch (SQLException esql) {
        esql.printStackTrace();
    }
   int j=0 ;
   System.out.println("loaded Driver----------------------------------");
   for( Enumeration en = DriverManager.getDrivers() ; en.hasMoreElements() ; j++)
         System.out.println( en.nextElement().getClass().getName() );

   if (j==0) { System.out.println("Driverlist empty"); }

    System.out.println("-----------------------------------------------");
    }
} 
```

**输出：**

```
register Class: com.mysql.jdbc.Driver
ignored: com/mysql/jdbc/integration/c3p0/MysqlConnectionTester.class
ignored: com/mysql/jdbc/integration/jboss/ExtendedMysqlExceptionSorter.class
ignored: com/mysql/jdbc/integration/jboss/MysqlValidConnectionChecker.class
loaded Driver----------------------------------
sun.jdbc.odbc.JdbcOdbcDriver
dynamicloading.com_mysql_jdbc_Driver
----------------------------------------------- 
```

好的 ？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:04:45.440

你真的应该包括你的源代码。

您是如何通过命令行或从 GUI 执行该类的？如果从命令行，则 MySQLConnector 库以及任何其他依赖库必须包含在类路径中 (java -classpath)。这个问题的最佳答案应该对您有所帮助[-Java：如何从命令行导入 jar 文件](https://stackoverflow.com/questions/945962/java-problem-running-a-jar-file-in-command-line)

# java - 使用超类初始化子类对象java

> ID：10177523
> 
> 赞同：21
> 
> 时间：2012-04-16T15:55:54.743
> 
> 标签：java

```
SuperClass object = new SubClass(); 
```

为什么要使用超类来实例化上面的子类对象？因为我学会实例化对象的唯一方法是：

```
SubClass object = new SubClass(); 
```

我正在学习java。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T15:57:32.850

您可能有一个只接受`SuperClass`. 由于`SubClass` *is a* `SuperClass`，您可以使用 的实例`SubClass`并将其视为`SuperClass`。

使用接口时使用相同的行为：

```
List someList = new ArrayList(); 
```

这就是多态的美妙之处。它允许您在不破坏其余代码的情况下更改类内部的实现。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-16T16:00:48.157

这被称为多态性。想象以下示例：

```
Musician musician = new Pianist(); 
```

或者

```
Musician musician = new Drummer(); 
```

假设`Musician`类有一个方法：`play()`. 不管音乐家是谁，如果你调用 play 方法，你就会知道如何演奏确定的乐器，基于具体的课程，在这种情况下，无论是 Pianist 还是 Drummer。

每个具体类，覆盖它的`play()`方法，可以自己玩：

例如`Pianist`上课：`play() { playsBeethoven(); }`

详细信息请查看[http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)

记住将它与继承一起使用总是好的[http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-16T15:59:52.043

这样做的主要原因是需要超类的函数调用。如果你有一个类`A`有这样的方法

```
public static void insert(SuperClass b) {
    //do something
} 
```

你有

```
SuperClass object = new SubClass(); 
```

你可以做

```
A.insert(object); 
```

但如果你这样做

```
SubClass object new SubClass(); 
```

你不能做

```
A.insert(object); 
```

除非您将这样的方法添加到 A

```
public static void insert(SubClass b) {
     //do something
} 
```

这可以帮助您减少冗余或复制的代码并保持清洁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T15:58:55.773

您所做的只是在编译时告诉 JVM 引用的类型。

在第一种情况下，您说对象引用具有超类的静态类型。当您创建一个新的子类对象时，您可以让该引用指向它，因为子类是超类实例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T16:02:34.057

这是您使用继承的主要原因之一。您将 SuperClass 视为抽象，并且在编译时您不需要知道派生类型，或者另一个类不需要知道派生类型。这允许您在使用多态性调用派生类的方法时使用对 SuperClass 的引用。

这使您能够

a.) 创建工厂，这样您就不需要在编译时知道类型，并且您有一些创建派生类型的运行时方法。想想 COM、GStreamer、DirectShow、Glib 等……

b.) 通过仅公开基类型引用来隐藏其他对象的复杂性，即使它们是派生类型的实例。考虑返回对象或将对象引用作为参数的方法。

c.) 更多可能性，但这些可能是与您最相关的两种用途。

# php - ExpressionEngine 类别 - 需要帮助使用 if 语句添加动态类

> ID：10177524
> 
> 赞同：0
> 
> 时间：2012-04-16T15:55:58.677
> 
> 标签：php, if-statement, categories, expressionengine

这是一个简单的问题，但在过去的两个小时里我一直在努力想办法让它发挥作用。

基本上我有一个 jquery 导航设置。我有 4 个选项卡，每个选项卡都是带有子类别的父类别。单击选项卡时，会出现一个带有子项的下拉列表。我已经完成了所有设置，但无法根据选择的任何类别将一类“活动”添加到子类别中。

除非我已经空白并且这是就在我眼前，否则我找不到明显的方法来做到这一点。我认为问题是，我没有硬编码导航链接，因为客户希望自己管理这些链接，所以我动态显示了类别，向其中添加“if”语句就是将 if 语句添加到所有类别，因此该类被添加到所有子选项卡中。

这是我的代码：

```
<div id="tabbed-cats">
    {exp:channel:entries channel="product"}
    <ul class="tabs">
        <li class="nav-one"><a href="#bathroom" {categories}{if category_id == "1"}class="current"{/if}{/categories}>Bathroom</a></li>
        <li class="nav-two"><a href="#homecare" {categories}{if category_id == "2"}class="current"{/if}{/categories}>Homecare</a></li>
        <li class="nav-three"><a href="#transfer-equipment" {categories}{if category_id == "3"}class="current"{/if}{/categories}>Transfer Equipment</a></li>
        <li class="nav-four last"><a href="#mobility" {categories}{if category_id == "4"}class="current"{/if}{/categories}>Mobility</a></li>
    </ul>
    {/exp:channel:entries}

    <div class="list-wrap">
        {exp:channel:entries channel="product"}
        <ul id="bathroom" {categories}{if category_id == "2" OR category_id == "3" OR category_id == "4"}class="hide"{/if}{/categories}>
            {exp:child_categories channel="product" parent="1" category_group="1" show_empty="yes"}
            {child_category_start}
            <li><a {categories}{if category_id == "5"}class="active"{/if}{/categories} href="{path='products/category/{child_category_url_title}'}">{child_category_name}</a></li>
            {child_category_end}
            {/exp:child_categories}
        </ul>
        {/exp:channel:entries}

        {exp:channel:entries channel="product"}
        <ul id="homecare" {categories}{if category_id == "1" OR category_id == "3" OR category_id == "4"}class="hide"{/if}{/categories}>
            {exp:child_categories channel="product" parent="2" category_group="1" show_empty="yes"}
            {child_category_start}
            <li><a {categories}{if category_id == "6"}class="active"{/if}{/categories} href="{path='products/category/{child_category_url_title}'}">{child_category_name}</a></li>
            {child_category_end}    
            {/exp:child_categories}
        </ul>
        {/exp:channel:entries}

        {exp:channel:entries channel="product"}
        <ul id="transfer-equipment" {categories}{if category_id == "1" OR category_id == "2" OR category_id == "4"}class="hide"{/if}{/categories}>
            {exp:child_categories channel="product" parent="3" category_group="1" show_empty="yes"}
            {child_category_start}
            <li><a {categories}{if category_id == "8"}class="active"{/if}{/categories} href="{path='products/category/{child_category_url_title}'}">{child_category_name}</a></li>
            {child_category_end}    
            {/exp:child_categories}
        </ul>
        {/exp:channel:entries}

        {exp:channel:entries channel="product"}
        <ul id="mobility" {categories}{if category_id == "1" OR category_id == "2" OR category_id == "3"}class="hide"{/if}{/categories}>
            {exp:child_categories channel="product" parent="4" category_group="1" show_empty="yes"}
            {child_category_start}
            <li><a {categories}{if category_id == "7"}class="active"{/if}{/categories} href="{path='products/category/{child_category_url_title}'}">{child_category_name}</a></li>
            {child_category_end}    
            {/exp:child_categories}
        </ul>
        {/exp:channel:entries}
    </div><!-- END LIST WRAP -->
    <br style="clear:both;" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:15:15.923

在 EE 2.4 中，您现在可以使用`{if active}class="foobar"{/if}`试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:42:57.770

您希望根据 URL 中的类别 URL 标题进行计算。我对您使用的子类别插件并不完全熟悉，但它似乎应该在您的`{exp:child_categories}`循环中工作：

`{if child_category_url_tile == segment_3} class="active"{/if}`

我不完全理解您在代码中所做的事情，因为您调用相同的通道条目循环 5 次，然后每次根据条件类别语句过滤您显示的内容。如果这实际上是您的完整代码，您应该认真考虑重新思考和重构。你在这里的开销是疯狂的！

# arrays - 如何在 const 中定义一个数组？

> ID：10177531
> 
> 赞同：9
> 
> 时间：2012-04-16T15:56:14.533
> 
> 标签：arrays, constants, inno-setup, pascalscript

`const`我在 Inno Setup 的代码部分下定义字符串数组时遇到了一些问题，我有以下内容：

```
[Code]

const
  listvar: array [0..4] of string =
     ('one', 'two', 'three', 'four', 'five'); 
```

这就是说我需要一个`=`where the `:`is，但是我不能将它定义为一个数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-27T16:42:53.820

不久前我做了一个小实用函数。它不允许您在常量上分配数组，但它可以为单行中的变量解决问题。希望这有帮助。

你可以这样使用它：

```
listvar := Split('one,two,three,four,five', ','); 
```

```
{ ============================================================================ }
{ Split()                                                                      }
{ ---------------------------------------------------------------------------- }
{ Split a string into an array using passed delimeter.                         }
{ ============================================================================ }
Function Split(Expression: String; Separator: String): TArrayOfString;
Var
    i, p : Integer;
    tmpArray : TArrayOfString;
    curString : String;

Begin
    i := 0;
    curString := Expression;

    Repeat
        SetArrayLength(tmpArray, i+1);
        If Pos(Separator,curString) > 0 Then
        Begin
            p := Pos(Separator, curString);
            tmpArray[i] := Copy(curString, 1, p - 1);
            curString := Copy(curString, p + Length(Separator), Length(curString));
            i := i + 1;
        End Else Begin
             tmpArray[i] := curString;
             curString := '';
        End;
    Until Length(curString)=0;

    Result:= tmpArray;
End; 
```

# php - 如何列出成功上传的文件名？

> ID：10177533
> 
> 赞同：0
> 
> 时间：2012-04-16T15:56:41.207
> 
> 标签：php, javascript, jquery

我有一个包含文件输入和上传按钮的表单

```
<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='stopImageUpload(this);' class='imageuploadform' >
    <p class='imagef1_upload_form' align='center'><label>Image File: <input name='fileImage' type='file' class='fileImage' /></label>
        <input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>
    </p>
    <p><span class='list></span></p>
</form> 
```

现在我想要的是，如果图像已完成上传，则在此表单的底部（在跨度标记“列表”中）我想要已上传文件的名称。因此，当文件成功上传后，它应该显示上传文件的名称。如果第二个文件成功上传，则它会在第一个文件的名称下方显示上传的第二个文件的名称。这在Javascript中可能吗？

我已经上传了所有用 php 和 javascript 整理的文件。下面是上传完成后的javascript函数：

```
function stopImageUpload(success) {
    var result = '';
    if (success == 1) {
        result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
    }
    else {
        result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
    };
    return true;
}​ 
```

此函数在 fomr 中的同一页面中，但与上传脚本不在同一页面中，但在上传脚本中确实使用以下 javascript 代码调用此函数：

```
<script language="javascript" type="text/javascript">window.top.window.stopImageUpload(<?php echo $result; ?>);</script> 
```

以下是将文件上传到服务器的部分上传 php 代码：

```
move_uploaded_file($_FILES["fileImage"]["tmp_name"],"ImageFiles/" . $_FILES["fileImage"]["name"]);
$result = 1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:07:22.980

您的 PHP 回调应该包含当前上传的文件的名称，甚至是所有上传文件的数组。

然后，在`stopImageUpload`函数中，读取第二个参数并`#list`相应地操作（更新/添加 html）：

```
<ul id="list"></ul> 
```

```
function stopImageUpload(success, filename) {
    var result;
    if (success == 1)
        result = '<li class="msg">The file '+filename+' was uploaded successfully!</li>';
    else
        result = '<li class="emsg">There was an error during upload of file '+filename+'!</li>';
    $('#list').append(result);
    return true;
}​ 
```

# java - 桌面应用程序连接到安卓设备

> ID：10177534
> 
> 赞同：1
> 
> 时间：2012-04-16T15:56:41.487
> 
> 标签：java, android, synchronization

我必须创建一个桌面应用程序来同步 PC 和 Android 设备（在本例中为平板电脑）之间的应用程序同步将非常基本，我需要复制一些文件。而且，如果平板电脑没有我的应用程序，桌面应用程序应该能够将 apk 安装到平板电脑上。

我已经到处搜索了，我发现的唯一指针提到了我可以使用的 ddmlib（一个 AndroidDebugBridge 库），但我还没有找到在哪里找到它或如何使用它。

那么问题是我如何使用 ddmlib？或者是否有其他选项可以将我的桌面应用程序与我的 Android 应用程序同步？

在此先感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:16:06.327

如果我正在编写您的同步软件，我会使用**adb**命令在手机上**安装**应用程序，然后使用**adb forward**创建到手机的 tcp/ip 连接，并使用该连接传输您的应用程序想要发回的任何数据第四，甚至可能对流量进行加密。

我建议不要使用 adb 进行数据传输，因为它不会读取或写入您的应用程序私有文件，其中保存了所有机密，并且将数据发送到世界可读的 /sdcard 是不好的，原因有两个：

1.  它是世界可读和可写的，您的数据将公开给所有人
2.  某些设备只是没有 /sdcard 或者由于其他原因而将其卸载或不可用

附言。对于加分，您可以尝试不使用**adb**命令，而是直接访问 adb 服务器（它通常侦听本地 TCP 端口 5037）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:22:45.370

使用 android 调试桥，您需要运行：

```
adb push <local> <remote> 
```

复制到设备，

```
adb pull <remote> [<local>] 
```

从设备复制或

```
adb install [-l] [-r] [-s] <file> 
```

在设备上安装 apk。

# iphone - 使用 iOS 从在线数据库中获取信息

> ID：10177535
> 
> 赞同：0
> 
> 时间：2012-04-16T15:56:43.543
> 
> 标签：iphone

我正在尝试查询 ncbi 公共数据库。当我查看网络流时，我只能看到响应头是 text/html。这是否意味着我必须解析 iOS 中的 text/html 才能在数据库中获取我想要的信息？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:03:14.663

如果您以 HTML 文档的形式获取数据，则确实必须解析 HTML 以提取数据。

# c# - 使用 C# 程序通过 SFTP 远程删除文件

> ID：10177538
> 
> 赞同：2
> 
> 时间：2012-04-16T15:56:57.040
> 
> 标签：c#, sftp, sharpssh

我想问一下如何使用 sftp 远程删除文件我尝试过使用 SharpSSH 但它不起作用，我得到了 SftpException

我首先在 sftp.cs 中添加了这段代码

> ```
>  public void Delete(string path)
>     {
>         SftpChannel.rm(path);
>     } 
> ```

然后我在程序中输入了这个

> Sftp ftp = new Sftp("ip地址", "用户名", "密码"); ftp.连接（）；ftp.Delete("路径");

谢谢，问题已解决问题是我忘记在路径前放一个“/”，所以它失败了

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T16:03:49.327

我使用[Renci.SshNet](http://sshnet.codeplex.com)来完成我的 SFTP 职责。它对我来说真的很好用。这是您尝试执行的操作的示例：

```
using Renci.SshNet;
using Renci.SshNet.Sftp;

public void DeleteFile(string server, int port, string username, string password, string sftpPath)
{
    using (SftpClient sftpClient = new SftpClient(server, port, username, password))
    {
        sftpClient.Connect();
        sftpClient.DeleteFile(sftpPath);
        sftpClient.Disconnect();
    }
} 
```

# ios - 我的应用程序在其他语言中崩溃。Xibs 似乎没有加载。为什么？

> ID：10177541
> 
> 赞同：0
> 
> 时间：2012-04-16T15:57:02.600
> 
> 标签：ios

我有一个本地化为两种语言的应用程序：英语和丹麦语。如果我将设备设置为任何其他语言（例如法语），应用程序就会崩溃。似乎它并没有真正加载 XIB 文件，或者没有正确初始化它们的通用版本。

我想我天真地假设如果应用程序设置为英语或丹麦语以外的语言，它会加载英语版本。

我该怎么办？有没有办法确保这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:03:16.487

原因：XCode 不知何故创建了两组 en.lproj 和 da.lproj 目录。一组位于项目根目录中（哦，这里的 en.lproj 称为 English.lproj），另一组位于 Classes 中。“丢失”的 XIB 文件位于 Classes 的目录中。

解决方案：将 XIB 文件复制到根目录下的适当文件夹中。从项目中删除原始文件（继续说移动到 thrash，你只是复制了它们......）。将副本添加到项目的正确位置 - 只需一次拖动操作即可完成 - 并且不要复制到项目（它们已经在正确的位置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:42:39.280

如果您将设备语言设置为例如法语，则应用程序应加载英语版本。

您应该详细说明如何加载 XIB。如果不了解您的具体实现，就不可能回答这个问题。

# c - 使用 timeval 结构和 gettimeofday 的奇怪错误——因为 #define 中的分号

> ID：10177547
> 
> 赞同：1
> 
> 时间：2012-04-16T15:57:14.757
> 
> 标签：c, gettimeofday, timeval

我收到了一些奇怪的编译错误。这是一个家庭作业（帮助是好的）。这个想法是实现一个程序来测试用户每秒点击一次“输入”的能力。我应该使用 gettimeofday 来获取每个“输入”的一些时间值，然后找出平均时间和标准偏差......我试图通过检查标准输入的 '\n' 来做到这一点，然后如果是的，使用 gettimeofday 填充 timeval 结构，然后将所述结构存储在数组中以供以后使用...

我在编译（`gcc -Wextra homework1.c`）时遇到的错误是：

```
homework1.c: In function ‘main’:
homework1.c:19:29: error: expected ‘]’ before ‘;’ token
homework1.c:27:17: error: expected ‘)’ before ‘;’ token
homework1.c:32:4: error: ‘entry_array’ undeclared (first use in this function)
homework1.c:32:4: note: each undeclared identifier is reported only once for each function it appears in 
```

我不明白为什么会出现前两个语法错误，然后我不明白为什么在“main”开头明确声明“entry_array”时未声明它。建议？

我觉得我因为不知道如何使用 timeval 结构而被烧毁......最初我尝试像使用任何其他结构一样全局定义 struct timeval，但是在覆盖 struct timeval 的定义时遇到错误。 .这是因为它是在“sys/time.h”库中定义的吗？

这是代码：

```
 GNU nano 2.2.6                        File: homework1.c                                                       
//prototypes 
int GetAverage(long array[]);
int GetStdDev(long array[]);

//# of keystrokes tracked by user
#define MAX_STROKES 1;

int main(int argv, char ** argc) {
        struct timeval entry_array[MAX_STROKES]; //container for tv_usec fields from timeval struct
        double average = 0; 
        double std_deviation = 0;
        int count = 0; 

        printf("This program will test your ability to hit enter every 1 second, for 10 seconds.  Ready when yo$

        //loop to build array of timeval's
        while (count < MAX_STROKES) {
                struct timeval time_val;
                int input = getc(stdin);
                if (input == '\n') {
                        gettimeofday(&time_val, NULL);
                        entry_array[count] = time_val;
                        ++count;
                }
        }
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T15:59:20.923

问题是`MAX_STROKES`宏。因为这是家庭作业，所以我不会告诉你它到底有什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:02:01.547

1.  这： `#define MAX_STROKES 1;`无论您在哪里使用“MAX_STROKES”，都可能成为语法错误（找出“为什么”是您的工作；））。

2.  我希望您已将其注释掉：`GNU nano 2.2.6 File: homework1.c`

3.  我不确定您的“printf()”是否正常：在您的剪切/粘贴中，它在这里被切断：`Ready when yo$`

4.  我希望你#includ'ing所有你需要的文件，比如“stdio.h”和“time.h”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T16:18:35.777

做了一些研究，并确定我的 MAX_STROKES 宏想法不太正确。多谢你们。我的猜测是它不代表我想要的。我正在寻找“int MAX_STROKES = 1”...默认情况下1是一个字符吗？我不太清楚它到底是什么。阅读后我决定使用“static const int MAX_STROKES = 1;” 相反，它编译得很好。

# c# - Telerik RadChart“输入字符串的格式不正确”

> ID：10177548
> 
> 赞同：0
> 
> 时间：2012-04-16T15:57:28.850
> 
> 标签：c#, asp.net, .net, telerik

我收到以下异常：

DataBind() 行上的“输入字符串格式不正确”。

我相信正在发生的事情是民意调查是用数字/整数创建的，而 Telerik 很聪明，将它们视为整数而不是字符串。

有没有办法告诉 Telerik RadChart 将所有内容视为字符串或基于每个条目格式化内容。

这两个人遇到了类似的问题；

[http://www.telerik.com/community/forums/aspnet-ajax/chart/x-axis-values-mixed-strings-and-ints.aspx](http://www.telerik.com/community/forums/aspnet-ajax/chart/x-axis-values-mixed-strings-and-ints.aspx)

[http://www.telerik.com/community/forums/wpf/chart/error-binding-string-value-to-x-axis-using-mvvm.aspx](http://www.telerik.com/community/forums/wpf/chart/error-binding-string-value-to-x-axis-using-mvvm.aspx)

CS

```
private void PopulatePollResults(int pollID)
    {
        SqlHelper sql = new SqlHelper();
        DataSet dsResults = sql.ExecuteDataSet("ReturnPollResults", pollID);

        dsResults.Tables[0].DefaultView.Sort = "AnswerID DESC";

        trcResults.DataSource = dsResults.Tables[0].DefaultView;
        trcResults.DataBind();

        trcResults.PlotArea.Appearance.Dimensions.Margins.Top = 10;
        trcResults.PlotArea.Appearance.Dimensions.Margins.Right = 5;
        trcResults.PlotArea.Appearance.Dimensions.Margins.Bottom = 10;
        trcResults.PlotArea.Appearance.Dimensions.Margins.Left = 177;

        lblNoOfVotes.Text = dsResults.Tables[1].Rows[0]["Count"].ToString() + " vote(s)";
    } 
```

ascx

```
<telerik:RadChart ID="trcResults" runat="server"
        ChartTitle-Visible="false"
        Legend-Visible="false"
        SeriesOrientation="Horizontal"
        Height="160px"
        Width="240px" >
        <Series>
            <telerik:ChartSeries DataYColumn="Votes"
                DefaultLabelValue="#%">
                <Appearance FillStyle-FillType="Solid" 
                    FillStyle-MainColor="#660066" 
                    Border-Visible="false"
                    TextAppearance-TextProperties-Font="Arial" >
                    <FillStyle FillType="Solid" MainColor="102, 0, 102">
                    </FillStyle>
                    <TextAppearance TextProperties-Font="Arial, 9pt">
                    </TextAppearance>
                    <Border Visible="False" />
                </Appearance>
            </telerik:ChartSeries>
        </Series>
        <Appearance Border-Visible="False" FillStyle-FillType="Solid" 
            FillStyle-MainColor="Transparent" Dimensions-AutoSize="false" 
            Dimensions-Width="220px" Dimensions-Height="160px" >
            <FillStyle MainColor="Transparent">
            </FillStyle>
            <Border Visible="False" />
        </Appearance>
        <PlotArea>
            <YAxis2>
                <AxisLabel>
                    <Appearance RotationAngle="0">
                    </Appearance>
                </AxisLabel>
            </YAxis2>
            <Appearance FillStyle-FillType="Solid" FillStyle-MainColor="Transparent" 
                Border-Visible="False" >
                <FillStyle FillType="Solid" MainColor="Transparent">
                </FillStyle>
                <Border Visible="False" />
            </Appearance>
            <XAxis DataLabelsColumn="AnswerText" IsZeroBased="False">
                <Appearance MajorTick-Color="#333333"
                    TextAppearance-TextProperties-Color="#333333"
                    TextAppearance-TextProperties-Font="Arial" >
                    <TextAppearance TextProperties-Color="51, 51, 51" 
                        TextProperties-Font="Arial, 8pt">
                    </TextAppearance>
                </Appearance>
                <AxisLabel>
                    <Appearance RotationAngle="270">
                    </Appearance>
                </AxisLabel>
                <Items>
                    <telerik:ChartAxisItem>
                        <TextBlock>
                            <Appearance TextProperties-Font="Arial, 8.25pt">
                            </Appearance>
                        </TextBlock>
                    </telerik:ChartAxisItem>
                    <telerik:ChartAxisItem Value="1">
                        <TextBlock>
                            <Appearance TextProperties-Font="Arial, 8.25pt">
                            </Appearance>
                        </TextBlock>
                    </telerik:ChartAxisItem>
                    <telerik:ChartAxisItem Value="2">
                        <TextBlock>
                            <Appearance TextProperties-Font="Arial, 8.25pt">
                            </Appearance>
                        </TextBlock>
                    </telerik:ChartAxisItem>
                    <telerik:ChartAxisItem Value="3">
                        <TextBlock>
                            <Appearance TextProperties-Font="Arial, 8.25pt">
                            </Appearance>
                        </TextBlock>
                    </telerik:ChartAxisItem>
                    <telerik:ChartAxisItem Value="4">
                        <TextBlock>
                            <Appearance TextProperties-Font="Arial, 8.25pt">
                            </Appearance>
                        </TextBlock>
                    </telerik:ChartAxisItem>
                    <telerik:ChartAxisItem Value="5">
                        <TextBlock>
                            <Appearance TextProperties-Font="Arial, 8.25pt">
                            </Appearance>
                        </TextBlock>
                    </telerik:ChartAxisItem>
                    <telerik:ChartAxisItem Value="6">
                        <TextBlock>
                            <Appearance TextProperties-Font="Arial, 8.25pt">
                            </Appearance>
                        </TextBlock>
                    </telerik:ChartAxisItem>
                    <telerik:ChartAxisItem Value="7">
                        <TextBlock>
                            <Appearance TextProperties-Font="Arial, 8.25pt">
                            </Appearance>
                        </TextBlock>
                    </telerik:ChartAxisItem>
                </Items>
            </XAxis>
            <YAxis>
                <Appearance Visible="false" />
                <AxisLabel>
                    <Appearance RotationAngle="0">
                    </Appearance>
                </AxisLabel>
            </YAxis>
        </PlotArea>
        <ChartTitle Visible="False">
            <Appearance Visible="False">
            </Appearance>
        </ChartTitle>
        <Legend Visible="False">
            <Appearance Visible="False">
            </Appearance>
        </Legend>
    </telerik:RadChart> 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:27:16.933

[http://www.telerik.com/community/forums/aspnet-ajax/chart/input-string-was-not-in-a-correct-format.aspx#2074677](http://www.telerik.com/community/forums/aspnet-ajax/chart/input-string-was-not-in-a-correct-format.aspx#2074677)

Telerik support proposed the following solution.

...attach handlers to DataBinding and BeforeLayout events and in the first prepend a sentinel symbol to all values and in the second remove the sentinel symbol

```
 ...
 this.trcResults.DataBinding += this.trcResults_DataBinding;
 this.trcResults.BeforeLayout += this.trcResults_BeforeLayout;
 this.trcResults.DataSource = pcl;
 this.trcResults.DataBind();
}

void trcResults_DataBinding(object sender, EventArgs e)
{
 var senderChart = (RadChart)sender;
 var pcl = senderChart.DataSource as IEnumerable<PollContainer>;

 foreach (var pollContainer in pcl)
 {
  // prepend a sentinel symbol
  pollContainer.AnswerText = "x" + pollContainer.AnswerText;
 }
}

void trcResults_BeforeLayout(object sender, EventArgs e)
{
 foreach (var axisItem in this.trcResults.PlotArea.XAxis.Items)
 {
  // remove the sentinel symbol
  axisItem.TextBlock.Text = axisItem.TextBlock.Text.Remove(0, 1);
 }
} 
```

# android - 如何在 Android 上创建 Unix 时间戳？

> ID：10177552
> 
> 赞同：66
> 
> 时间：2012-04-16T15:57:45.050
> 
> 标签：android, unix-timestamp

如何在 Android 上创建 Unix 时间戳？

我想在 URL 的末尾创建一个带有 Unix 时间戳的 URL 发布请求。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-04-16T16:36:39.237

```
 long unixTime = System.currentTimeMillis() / 1000L; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-16T15:59:31.880

这很简单：

```
long timestamp = Calendar.getInstance().getTime() / 1000; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-16T09:08:02.313

```
long timeStamp = Calender.getInstance().getTime() / 1000L ; 
```

# dynamic - Jade: how does one assign the 'checked' attribute to dynamically generated radio button inputs?

> ID：10177555
> 
> 赞同：9
> 
> 时间：2012-04-16T15:57:51.470
> 
> 标签：dynamic, radio-button, pug

I'm using Jade templates in an edit view where I edit a user's details, and a dynamically generated radio button like so (comes from my mongodb):

```
li Role:
      br
      label Subscriber
      input(type="radio", name="user[role]", val="subscriber")
      br
      label Admin
      input(type="radio", name="user[role]", val="admin")
      br
      label Super Admin
      input(type="radio", name="user[role]", val="superadmin") 
```

How do I set one to checked dynamically?

So if in my db, my role is `subscriber` , how do I check for that? "Normally", I would do a `if(user.role == 'subscriber'){'checked'}` and so on for all of the different values.

Where/how does that logic go into this bit of Jade?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-05T18:34:55.537

`input(type ='radio', name=user[role], checked)`

**To dynamically check, see examples below:**

```
input(type ='radio', name=user[role], checked=true)   
input(type ='radio', name=user[role], checked=false)   
input(type ='radio', name=user[role], checked=role=='user') 
```

# python - Py2exe 似乎在 library.zip 中找不到我的文件

> ID：10177556
> 
> 赞同：0
> 
> 时间：2012-04-16T15:57:57.600
> 
> 标签：python, gtk, pygtk, exe, py2exe

我正在尝试从我用 Python 2.7（使用 GTK+ 布局）编写的程序创建一个 exe 文件。我已经查阅了本指南： http: [//www.py2exe.org/index.cgi/Py2exeAndPyGTK](http://www.py2exe.org/index.cgi/Py2exeAndPyGTK)并尝试相应地设置我的文件。我成功地制作了一个 .exe 文件，但是在尝试运行它时，我收到了这个错误：

```
Traceback (most recent call last):
  File "cipherka.py", line 183, in <module>
  File "cipherka.py", line 18, in __init__
GError: Nelze otevřít soubor "C:\Repa\cipherka\dist\library.zip\gui.xml": No such file or directory 
```

虽然我在 library.zip 存档中找不到 gui.xml 文件，但它与主 .exe (cipherka.exe) 文件在同一级别上可用。如果我自己将其复制到 .zip 文件中，则无法解决问题。

这是我的 setup.py 文件：

```
from distutils.core import setup
import py2exe
import glob

setup(
    name="cipherka",
    windows = [
                  {
                      'script': 'cipherka.py',
                  }
              ],

    options = {
                  'py2exe': {
                      'packages':'encodings',
                      'includes': 'cairo, pango, pangocairo, atk, gobject, gio',
                  }
              },
    data_files=['gui.xml',
                'README',
                ("modules", glob.glob("modules/*.*")),
                ("media", glob.glob("media/*.png"))
    ]
) 
```

任何帮助将不胜感激！我可以在需要时为您提供任何必要的信息。谢谢

## 更新：

好的，我实施了更改。但是，它会做一些奇怪的事情。当我使用：

```
path = os.path.dirname(__file__).replace('\\library.zip','') 
```

从 .py 文件运行时它可以工作，但在出现以下错误时编译失败：

```
Traceback (most recent call last):
  File "cipherka.py", line 217, in <module>
  File "cipherka.py", line 18, in __init__
NameError: global name '__file__' is not defined 
```

当我使用

```
path = os.path.dirname('gui.xml').replace('\\library.zip','') 
```

相反 - 程序停止从 python 运行，编译后的版本给了我以下信息：

```
C:\Repa\cipherka\dist\cipherka.exe:188: GtkWarning: gtk_tree_path_append_index: assertion `index >= 0' failed
C:\Repa\cipherka\dist\cipherka.exe:188: GtkWarning: gtk_tree_model_get_iter: assertion `path->depth > 0' failed
Traceback (most recent call last):
  File "cipherka.py", line 217, in <module>
  File "cipherka.py", line 55, in __init__
  File "cipherka.py", line 188, in changed_cb
IndexError: could not find tree path 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:27:30.350

`"gui.xml"`在 中`"C:\Repa\cipherka\dist\"`，而不是`"C:\Repa\cipherka\dist\library.zip"`您的代码所假设的。

无论您的程序是否已编译，这都应该有效。

```
path = os.path.dirname(__file__).replace('\\library.zip','')
xml_file = open(os.path.join(path, 'gui.xml')) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-09T06:46:42.933

报告的错误是由于运行的脚本`py2exe`没有`__file__`全局。检测到这一点并`sys.argv[0]`在您的`.py`文件中使用。

# c# - Windows 应用程序图标的确切尺寸是多少

> ID：10177564
> 
> 赞同：5
> 
> 时间：2012-04-16T15:58:31.533
> 
> 标签：c#, wpf

任务栏（大图标、小图标）、桌面、开始菜单等有不同的维度。Windows 应用程序需要哪些维度？有没有办法将它们全部放入一个文件中？

我已经在 Photoshop 中设计了图标。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T16:02:48.707

好吧，仅桌面就可以使用几乎任何标准尺寸（Joey 提到了大多数，如果不是全部的话）尺寸。

我发现将 16x16、32x32、48x48 和 256x256（可能还有更多尺寸）组合到一个 .ico 文件中效果很好。我使用 IcoFx，从一张 256x256 图像创建多尺寸图标非常容易。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-16T16:00:30.793

[图标文件 ( `.ico`)](http://en.wikipedia.org/wiki/Icon_file)可以包含各种大小。Windows 上图标的常见尺寸有：

*   16×16（例如在任务栏的通知区域或应用程序系统菜单的默认设置中）。由于面积较小，这通常会显示与其他尺寸不同的图标，例如，透视图经常被忽略（如果我没记错的话，这也在图标的建议中）。
*   24×24
*   32×32（例如在任务栏中，除非为其配置了小图标）
*   48×48
*   64×64
*   128×128
*   256×256

如果缺少某个尺寸，则将使用较大的尺寸对图像进行下采样，或者，如果不存在较大的尺寸，则将对较小的尺寸进行上采样（质量损失）。因此，不同的尺寸并不是特别重要，只是让艺术家可以对标准尺寸的图标进行一些控制（拥有矢量格式的图标并编辑各种尺寸的光栅化版本以使其在所有这些中看起来都不错） .

上述用途是近似的，取决于各种因素，例如用户的 DPI 设置。

# javascript - HTML5 画布未更新：浏览器错误还是我做错了什么？

> ID：10177565
> 
> 赞同：0
> 
> 时间：2012-04-16T15:58:31.717
> 
> 标签：javascript, html, canvas

我有一些 HTML 5 代码，它以两个黑色画布开始，然后通过为每一行绘制一条红线来一次更新一行画布。它应该看起来像一个从黑色背景上垂下来的红色窗帘。

奇怪的是，起初看起来随机行（比如 5%）被跳过并留下黑色。我以为我有一个错误。但后来我注意到，如果我调整浏览器窗口的大小，黑线都会变成红色。所以我认为这是某种浏览器重绘错误。然后我注意到 Chrome 和 Safari 都有这种行为。

那么您认为这两个浏览器都有相同的错误还是我做错了什么？

有趣的是，如果两个画布都使用 style="width:100%; height:100%"，这个问题就会消失。

```
<html>
<table>
    <tr>
        <td><canvas id="myCanvas1" style="width:100%; height:100%"></canvas></td>
        <td><canvas id="myCanvas2" style="width:200px; height:400px"></canvas></td>
    </tr>
</table>
<script type="text/javascript">
    var canvases = [document.getElementById("myCanvas1"), document.getElementById("myCanvas2")];

    for(var i = 0; i < canvases.length; i++) {
        var canvas = canvases[i];
        var ctx = canvas.getContext("2d");
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    function updateRow(rowNum) { 

        var done = true;
        for(var i = 0; i < canvases.length; i++) {
            var canvas = canvases[i];

            if(rowNum >= canvas.height) {
                return;
            }
            done = false;

            var ctx = canvas.getContext("2d");

            var imageDataForRow = ctx.getImageData(0, rowNum, canvas.width, 1);

            for(var offset = 0; offset < imageDataForRow.data.length; offset += 4) {
                imageDataForRow.data[offset] = 255;
                imageDataForRow.data[offset + 1] = 0;
                imageDataForRow.data[offset + 2] = 0;
                imageDataForRow.data[offset + 3] = 255;
            }

            ctx.putImageData(imageDataForRow, 0, rowNum);
        }

        if(!done) {
            var paintNextRow = function() {
                updateRow(rowNum + 1);
            }
            setTimeout(paintNextRow, 1);
        }
    }

    updateRow(0);

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:14:50.930

这是你的问题：

`<canvas id="myCanvas1" style="width:100%; height:100%">`

`<canvas>`您正在使用 CSS 宽度和高度而不是html 属性设置画布的宽度和高度。您实际上是在拉伸大小为 300x150（默认值）的画布以在整个屏幕上倾斜。

您需要在画布标签中定义宽度/高度：`<canvas width="500" height="500">`

或在代码中：

```
var canvas = document.getElementById("canvas");
canvas.width = 500;
canvas.height = 500; 
```

而不是CSS。如果你这样做：

`<canvas style="width: 500px; height: 500px;">`

然后你会有一个 300x150 的画布（默认大小），它被缩放/扭曲为 500x500，这几乎肯定是你得到的。

* * *

看起来您希望动态更改画布宽度。这没关系，但你必须做几件事之一。一种是使用窗口的`onresize`事件，并在每次发生这种情况时将画布宽度设置为等于 div 的 clientWidth（当然，如果 clientWidth 已更改）。另一种方法是做一个简单的通用计时器，每半秒左右检查一次相同的事情，并设置`canvas.width`为`div.style.clientWidth`.

（我写了上面的手绘，所以可能有错字，但你明白了）

# redirect - Play Framework (1.2.4) 中是否有一个选项可以始终作为 HTTPS 进行重定向？

> ID：10177568
> 
> 赞同：1
> 
> 时间：2012-04-16T15:58:42.187
> 
> 标签：redirect, https, playframework, playframework-1.x

我一直无法找到一种方法来做到这一点。我们需要做一个从[http://www.doortodoororganics.com](http://www.doortodoororganics.com)到[https://www.doortodoororganics.com/landing](https://www.doortodoororganics.com/landing)的 302 重定向。我们现在的做法是重定向到[http://www.doortodoororganics.com/landing](http://www.doortodoororganics.com/landing)，然后 Apache 重定向到 https。我意识到我可以在控制器中更改它，但是我们在代码中有几个地方进行重定向，我更愿意设置一次，以便*所有*重定向都转到 HTTPS。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:09:18.933

编写一个 Base Controller 并有一个 Before Interceptor 可以设置

> play.mvc.Http.Request.secure

属性始终为**真**。

Play 框架在重定向之前检查此属性。如果为 true，它会执行 https 重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:43:05.907

在您的播放应用程序前面使用充当代理的前端 http 服务器。这可以使用 apache httpd 轻松完成：[http](http://www.cyberciti.biz/tips/howto-apache-force-https-secure-connections.html) ://www.cyberciti.biz/tips/howto-apache-force-https-secure-connections.html它也可以在任何其他 http 服务器中完成，例如 nginx...

# iphone - pushViewController 时UITabBarController 消失

> ID：10177569
> 
> 赞同：1
> 
> 时间：2012-04-16T15:58:51.877
> 
> 标签：iphone, objective-c, uinavigationcontroller, uitabbarcontroller, pushviewcontroller

我有一个带有 UITabBar 和 NavigationController 的应用程序。当我使用 pushViewController 时，新的 ViewController 与 NavigationController 和后退按钮一起出现，但 UITabBarController 消失了。我知道这里有很多相同的问题，但其中任何一个都解决了我的问题，也许是因为我不明白给出的答案。

有什么建议吗？

```
 ActivityViewController *activityController = [[ActivityViewController alloc] initWithNibName:@"ActivityViewController" bundle:nil];
    [self.navigationController pushViewController:activityController animated:NO]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T16:06:59.703

这可能是因为您的 rootViewController（用于您的主 UIWindow）设置为 Navigationcontroller 而不是您的 TabBar。如果您不希望 Tabbar 消失，只需将其设置为您的根视图控制器

在 AppDelegate 的 appDidFinishLaunching 中执行以下操作

```
LoginViewController *loginViewController = [[FirstViewController alloc] init];
UINavigationController *loginNavigationController = [[UINavigationController alloc] loginViewController];
[firstViewController release];

self.window.rootViewController = loginNavigationController; 
```

然后在您的登录页面中：

```
- (void)loginSuccessfull
{
    FirstViewController *firstViewController = [[FirstViewController alloc] init];
    UINavigationController *firstNavigationController = [[UINavigationController alloc] initWithViewController:firstViewController];
    [firstViewController release];

    SecondViewController *secondViewController = [[SecondViewController alloc] init];
    UINavigationController *secondNavigationController = [[UINavigationController alloc] initWithViewController:secondViewController];
    [secondViewController release];

    UITabBarController *tabBarController = [[UITabBarController alloc] init];
    [tabBarController setViewControllers:
[NSArray arrayWithObjects:firstNavigationController, secondNavigationController, nil]];

    [firstNavigationController release];
    [secondNavigationController release];

    [self.navigationController pushViewController:tabBarController];
    [tabBarController release]; 
```

}

如果您仍然需要导航功能，只需将您的 viewControllers 包装在 UINavigationController 中，并将周围的 navigationController 添加到 tabBar，而不是 UIViewcontroller

# c# - 当两个方法在替换类型参数后具有相同的签名时，将覆盖错误的重载

> ID：10177571
> 
> 赞同：12
> 
> 时间：2012-04-16T15:58:56.180
> 
> 标签：c#, generics, compiler-construction, overriding, overload-resolution

我们相信这个例子展示了 C# 编译器中的一个错误（如果我们错了，请取笑我）。这个错误可能是众所周知的：毕竟，我们的示例是对[这篇博](http://blogs.msdn.com/b/samng/archive/2008/02/13/generic-method-substitutions-and-unification.aspx)文中描述的内容的简单修改。

```
using System;

namespace GenericConflict
{
  class Base<T, S>
  {
    public virtual int Foo(T t)
    { return 1; }
    public virtual int Foo(S s)
    { return 2; }

    public int CallFooOfT(T t)
    { return Foo(t); }
    public int CallFooOfS(S s)
    { return Foo(s); }
  }

  class Intermediate<T, S> : Base<T, S>
  {
    public override int Foo(T t)
    { return 11; }
  }

  class Conflict : Intermediate<string, string>
  {
    public override int Foo(string t)
    { return 101;  }
  }

  static class Program
  {
    static void Main()
    {
      var conflict = new Conflict();
      Console.WriteLine(conflict.CallFooOfT("Hello mum"));
      Console.WriteLine(conflict.CallFooOfS("Hello mum"));
    }
  }
} 
```

这个想法只是创建一个具有两个虚拟方法的类，其签名将在“邪恶”选择and`Base<T, S>`后变得相同。该类只重载了其中一种虚方法，而且由于 的​​存在，应该明确定义哪一种！`T``S``Conflict``Intermediate<,>`

但是当程序运行时，输出似乎表明错误的重载被覆盖了。

当我们阅读 Sam Ng 的[后续帖子时](http://blogs.msdn.com/b/samng/archive/2008/03/04/generic-method-substitutions-and-unification-part-two.aspx)，我们得到了该错误未修复的表达，因为他们认为总是会抛出类型加载异常。但在我们的示例中，代码编译并运行没有错误（只是意外输出）。

* * *

2020 年的新增内容：这已在更高版本的 C# 编译器（Roslyn？）中得到纠正。当我问这个问题时，输出是：

```
11
101 
```

截至 2020 年，`tio.run`给出[以下输出](https://tio.run/##lZFLa8MwDIDv@RWipwS6su64bDussAdsbJDAzp6rFoMfxVIyRulvz5xX6SOk7GKDrE@fJEu6kiSrqiBl15D9EqNJo8gKg7QREuEZLXolF86utJIcbSMAqQURPArCu3wK2UMI1WGATfEdkqBUnguhQVmGJ@fiHDhp3rfgkQtvYZ7CbozIgE6Im5o4ROrUhdA6pH@s8gFHXYeTE9ERlQ14aoo6qhG2w75aRm9wqQR3Q8PtyAZcid6rJY6tYH4m6ZccSh/5iH34nSm092VZm3duvA7K3hlOYsEBb92f3q29MPva3WPp1BLehbJxV6w5AUrhQfbt3oPFn333cZJ2SSFCTuPsyyvGN2Ux7pHZwc9NXlBrB6Ywk@RfaDaEtuPtquoP)：

```
101
2 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-16T17:52:53.137

> 我们认为此示例显示 C# 编译器中的错误。

让我们在出现编译器错误时做我们应该做的事情：**仔细对比预期和观察到的行为。**

观察到的行为是程序分别产生 11 和 101 作为第一和第二输出。

预期的行为是什么？有两个“虚拟插槽”。第一个输出应该是调用`Foo(T)`槽中的方法的结果。第二个输出应该是调用`Foo(S)`槽中的方法的结果。

这些插槽中有什么？

在方法的实例中`Base<T,S>`进入槽，方法进入槽。`return 1``Foo(T)``return 2``Foo(S)`

在一个实例中`Intermediate<T,S>`，`return 11`方法进入`Foo(T)`槽，`return 2`方法进入`Foo(S)`槽。

希望到目前为止你同意我的看法。

在 的实例中`Conflict`，有四种可能性：

*   可能性一：`return 11`方法入`Foo(T)`槽，`return 101`方法入`Foo(S)`槽。
*   可能性二：`return 101`方法入`Foo(T)`槽，`return 2`方法入`Foo(S)`槽。
*   可能性三：该`return 101`方法适用于两个插槽。
*   可能性四：编译器检测到程序有歧义，报错。

根据规范的第 10.6.4 节，您希望这里会发生两件事中的一件。任何一个：

1.  编译器会判断 in 的方法`Conflict`覆盖了 in 的方法`Intermediate<string, string>`，因为中间类中的方法是先找到的。在这种情况下，可能性二是正确的行为。或者：
2.  编译器将确定 in 中的方法对于它覆盖的*原始*`Conflict`声明是模棱两可的，因此可能性四是正确的。

 *在这两种情况下，可能性都不是正确的。

我承认，这不是 100% 清楚，这两者中哪一个是正确的。我个人的感觉是，更明智的行为是将*覆盖方法*视为中间类的*私有实现细节*；我想到的相关问题不是中间类是否*覆盖*基类方法，而是它是否*声明*了具有匹配签名的方法。在这种情况下，正确的行为是选择可能性四。

编译器实际所做的是您所期望的：它选择了可能性二。因为中间类有一个匹配的成员，所以我们选择它作为“要覆盖的东西”，而不管中间类中没有*声明*该方法的事实。编译器确定这`Intermediate<string, string>.Foo`是被 覆盖的方法`Conflict.Foo`，并相应地发出代码。它不会产生错误，因为它判断程序没有错误。

因此，如果编译器正确地分析了代码，选择了可能性二并且没有产生错误，那么为什么在*运行时编译器似乎**选择*了可能性一，而不是可能性二？

 ***因为在泛型构造下制作一个导致两种方法统一的程序是运行时的实现定义的行为**。在这种情况下，运行时可以选择做*任何事情*！它可以选择给出类型加载错误。它可能会产生可验证性错误。它可以选择允许程序，但根据自己选择的某些标准填充插槽。事实上，后者就是它所做的。运行时会查看 C# 编译器发出的程序，并自行决定分析该程序的正确方法。

所以，现在我们有一个相当哲学的问题，这是否是编译器错误；编译器遵循规范的合理解释，但我们仍然没有得到我们期望的行为。从这个意义上说，它在很大程度上是一个编译器错误。**编译器的工作是将用 C# 编写的程序翻译成用 IL 编写的完全等效的程序**。编译器没有这样做；它将用 C# 编写的程序转换为用 IL 编写的程序，该程序具有实现定义的行为，而不是 C# 语言规范指定的行为。

正如 Sam 在他的博客文章中清楚地描述的那样，我们很清楚 C# 语言赋予哪些类型拓扑具有特定含义与 CLR 赋予哪些拓扑具有特定含义之间的这种不匹配。C# 语言相当清楚，可能性 2 可以说是正确的一种，但是*没有任何代码可以让 CLR 做到这一点，*因为*CLR 从根本上具有实现定义的行为，只要两个方法统一以具有相同的签名*。因此，我们的选择是：

*   没做什么。允许这些疯狂的、不切实际的程序继续具有与 C# 规范不完全匹配的行为。
*   使用启发式。正如 Sam 所指出的，我们可以更聪明地使用元数据机制来告诉 CLR 哪些方法会覆盖哪些其他方法。但是……**这些机制使用方法签名来消除歧义**，现在我们又回到了以前的状态；我们现在使用具有实现定义行为的机制来消除具有实现定义行为的程序的歧义！这是一个非首发。
*   导致编译器在可能发出其行为由运行时实现定义的程序时产生警告或错误。
*   修复 CLR，以使导致方法在签名中统一的类型拓扑的行为得到明确定义并与 C# 语言的行为相匹配。

最后一个选择非常昂贵。支付这笔费用给我们带来了微乎其微的用户利益，并直接从解决用户编写明智程序所面临的*实际问题中抽走了预算。*无论如何，这样做的决定完全不在我的掌控之中。

因此，我们 C# 编译器团队选择了第一种和第三种策略的组合；有时我们会为这种情况产生警告或错误，有时我们什么也不做，让程序在运行时做一些奇怪的事情。

由于在实践中这类程序很少出现在现实的业务线编程场景中，所以我对这些极端情况并不感到很糟糕。如果它们便宜且易于修复，那么我们会修复它们，但它们既不便宜也不易于修复。

如果您对此主题感兴趣，请参阅我的文章，了解另一种导致两种方法统一导致警告和实现定义的行为的方式：

[http://blogs.msdn.com/b/ericlippert/archive/2006/04/05/odious-ambiguous-overloads-part-one.aspx](http://blogs.msdn.com/b/ericlippert/archive/2006/04/05/odious-ambiguous-overloads-part-one.aspx)

[http://blogs.msdn.com/b/ericlippert/archive/2006/04/06/odious-ambiguous-overloads-part-two.aspx](http://blogs.msdn.com/b/ericlippert/archive/2006/04/06/odious-ambiguous-overloads-part-two.aspx)**

# c - 代码执行在子进程中从哪里开始？

> ID：10177572
> 
> 赞同：3
> 
> 时间：2012-04-16T15:59:16.327
> 
> 标签：c, linux, process, fork

考虑代码：

```
#include <stdio.h>
#include <errno.h>
#include <sys/types.h>
#include <unistd.h>

/* main --- do the work */

int main(int argc, char **argv)
{
    pid_t child;

    if ((child = fork()) < 0) {
        fprintf(stderr, "%s: fork of child failed: %s\n",
            argv[0], strerror(errno));
        exit(1);
    } else if (child == 0) {
                    // do something in child
            }
    } else {
    // do something in parent
    }
} 
```

我的问题是子进程在代码中从哪里开始执行，即首先执行哪一行？如果它执行整个代码，它也会创建自己的子进程，事情会继续发生，这肯定不会发生！！！

如果它在 fork() 命令之后开始，它首先如何进入 if 语句？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T16:04:57.510

当你执行一个`fork()`线程时，线程被复制到内存中。

因此，实际发生的情况是，您将有两个线程执行您发布的代码段，但它们的`fork()`返回值会有所不同。

因为子线程`fork()`将返回0，所以`if`不会执行另一个分支，父线程也会发生同样的事情。

当`fork()`被调用时，操作系统为将要产生的新线程分配一个新的地址空间，然后启动它，它们将共享相同的代码段，但由于返回值不同，它们将执行代码的不同部分（如果正确拆分，例如您的示例）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-16T16:05:01.497

它在 fork 函数的返回中开始执行子进程。不在代码的开头。fork在父进程中返回子进程的pid，在子进程中返回0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T16:06:08.040

孩子开始执行 fork 之后的下一条指令（不是行）。因此，在您的情况下，它是将 fork 的返回值分配给子变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T16:11:40.713

好吧，如果我正确理解你的问题，我可以告诉你，你的代码已经作为一个进程运行了。当你运行一个代码时，它已经是一个进程，所以这个进程无论如何都会执行 if 语句。在 fork() 之后，您将拥有另一个进程（子进程）。

在 Unix 中，一个进程可以创建另一个进程，这就是发生这种情况的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-11T19:01:51.487

子进程中的代码执行从`fork()`系统调用之后的下一条指令开始。

`fork()`系统调用只是为子进程创建一个单独的地址空间，因此它是父进程的克隆副本，并且**子进程具有其父进程的所有内存元素**。

因此，在通过 fork() 生成子进程后，两个进程（父进程和子进程）都会从***系统调用******之后的下一条指令恢复执行`fork()`***。

# web-parts - WebPartZone 动词的事件名称

> ID：10177573
> 
> 赞同：0
> 
> 时间：2012-04-16T15:59:18.630
> 
> 标签：web-parts

试图弄清楚如何挂钩一些 Web 部件动词事件；具体来说，我想知道用户何时最小化或恢复任何 Web 部件，以及是哪一个。我不在共享点平台上——严格来说是 asp.net (4) ajax (2)。

我在 Web 部件的页面加载中调用以下代码（我的 Web 部件继承了 UserControl 并实现了 IWebPart）：

```
Sub test_WebPartZoneVerbEventHandlers()

    Dim i As Integer = 0

    For Each z As WebPartZone In WebPartManager.GetCurrentWebPartManager(Me.Page).Zones
        Dim restoreVerb As WebPartVerb = z.RestoreVerb
        Dim minimizeVerb As WebPartVerb = z.MinimizeVerb
        If Not IsNothing(restoreVerb) Then
            If Not IsNothing(restoreVerb.ClientClickHandler) Then
                testTextArea.InnerHtml = testTextArea.InnerHtml & i & "<br/>" & restoreVerb.ClientClickHandler
            End If

            If Not IsNothing(restoreVerb.ServerClickHandler) Then
                testTextArea.InnerHtml = testTextArea.InnerHtml & i & "<br/>" & restoreVerb.ServerClickHandler().ToString()

            End If
        End If

        If Not IsNothing(minimizeVerb) Then
            If Not IsNothing(minimizeVerb.ClientClickHandler) Then
                testTextArea.InnerHtml = testTextArea.InnerHtml & i & "<br/>" & minimizeVerb.ClientClickHandler
            End If

            If Not IsNothing(minimizeVerb.ServerClickHandler) Then
                testTextArea.InnerHtml = testTextArea.InnerHtml & i & "<br/>" & minimizeVerb.ServerClickHandler().ToString()

            End If

        End If

        i = i + 1
    Next

End Sub 
```

但我没有得到处理程序的任何名称。这是输出（testTextArea 的内容）：

```
0<br/>0<br/>1<br/>1<br/>2<br/>2<br/>0<br/>0<br/>1<br/>1<br/>2<br/>2<br/> 
```

任何人都知道为什么客户端/服务器单击处理程序没有显示任何内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:23:55.850

无法弄清楚事件名称是什么，坦率地说，我已经厌倦了 UpdatePanels 并考虑完全摆脱它们，但我能够通过覆盖我的 web 部件上的 verbs 属性来解决我的问题。

```
Imports ((myprojectName)).icBase
Imports System.Web.UI.WebControls.WebParts

''' <summary>
''' Base class for web parts.
''' </summary>
''' <remarks></remarks>
Public MustInherit Class icBaseWebPartControl
    Inherits icBaseUserControlAjax
    Implements IWebPart, IWebActionable

#Region "IWebPart Properties"

    Private _Title As String
    Private _TitleUrl As String
    Private _TitleIconImageUrl As String
    Private _Description As String
    Private _CatalogIconImageUrl As String

    Public ReadOnly Property Subtitle As String Implements IWebPart.Subtitle
        Get
            Return Nothing
        End Get
    End Property
    Public Property Title() As String Implements IWebPart.Title
        Get
            Return Me._Title
        End Get
        Set(ByVal value As String)
            Me._Title = value
        End Set
    End Property
    Public Property Description() As String Implements IWebPart.Description
        Get
            Return Me._Description
        End Get
        Set(ByVal value As String)
            Me._Description = value
        End Set
    End Property

    Public Property TitleUrl() As String Implements IWebPart.TitleUrl
        Get
            Return Me._TitleUrl
        End Get
        Set(ByVal value As String)
            Me._TitleUrl = value
        End Set
    End Property
    Public Property TitleIconImageUrl() As String Implements IWebPart.TitleIconImageUrl
        Get
            Return Me._TitleIconImageUrl
        End Get
        Set(ByVal value As String)
            Me._TitleIconImageUrl = value
        End Set
    End Property

    Public Property CatalogIconImageUrl() As String Implements IWebPart.CatalogIconImageUrl
        Get
            Return Me._CatalogIconImageUrl
        End Get
        Set(ByVal value As String)
            Me._CatalogIconImageUrl = value
        End Set
    End Property

    ''' <summary>
    ''' Gives us some functionality of a full web part without actually extending WebPart.  (Me is only an IWebPart, not a true WebPart)
    ''' </summary>
    ''' <remarks></remarks>
    Public ReadOnly Property WebPart() As WebPart
        Get
            Dim wpm As WebPartManager = WebPartManager.GetCurrentWebPartManager(Me.Page)
            Return wpm.WebParts(Me.ID)
        End Get
    End Property

#End Region

    Public Overridable ReadOnly Property Verbs As System.Web.UI.WebControls.WebParts.WebPartVerbCollection Implements System.Web.UI.WebControls.WebParts.IWebActionable.Verbs
        Get

            Dim minimizeVerb As WebPartVerb = New WebPartVerb(ID & "minimizeVerb", AddressOf VerbMinimize, "OnMinimizeClicked('" & Me.ID & "')") With {.Text = "Minimize", .Description = "Minimize this web part"}
            Dim restoreVerb As WebPartVerb = New WebPartVerb(ID & "restoreVerb", AddressOf VerbRestore, "OnRestoreClicked('" & Me.ID & "')") With {.Text = "Restore", .Description = "Restore this web part"}

            Dim collection As Collection = New Collection
            Dim returnValue As New WebPartVerbCollection

            If Me.WebPart.ChromeState = PartChromeState.Minimized Then
                collection.Add(restoreVerb)
                returnValue = New WebPartVerbCollection(collection)
            End If
            If Me.WebPart.ChromeState = PartChromeState.Normal Then
                collection.Add(minimizeVerb)
                returnValue = New WebPartVerbCollection(collection)
            End If
            Return returnValue
        End Get
    End Property

    Protected Shared Sub VerbRestore(ByVal sender As Object, ByVal e As WebPartEventArgs)

        e.WebPart.ChromeState = PartChromeState.Normal

    End Sub

    Protected Shared Sub VerbMinimize(ByVal sender As Object, ByVal e As WebPartEventArgs)

        e.WebPart.ChromeState = PartChromeState.Minimized

    End Sub
End Class 
```

然后我在上面调用的客户端脚本中执行以下操作：

```
 // fired when user clicks restore on  any web part 
    function OnRestoreClicked(webPartID) {
        switch (webPartID) {
            case 'ucMyTimekeeping':
                // don't need to refresh any update panels in this case, because none of the controls in timekeeping are server-side
                // (unlike files and docs, which have server-side tab containers and tabs)
                dbLoadTime();
                break;
            case 'ucMyDocuments':

                //wait a few milliseconds for the server to un-hide the web part  (see icBaseWebPartControl.vb)
                //hpTODO:  There has GOT to be a better way to do this...  maybe autopostback on the restore link, but not sure how to go about that.
                setTimeout(function () {
                    HpDocs.UpdatePanel();
                    dbLoadDocs();
                }, 200);
                break;
            case 'ucMyFiles':
                // hpTODO:  same as for ucMyDocuments
                setTimeout(function () {
                    HpFiles.UpdatePanel();
                    dbLoadFiles();
                }, 200);
                break;
            default:
                __doPostBack(webPartID, '');

        }
       //            return false;
    }; 
```

下面是 UpdatePanel() 函数的样子：

```
// do partial postback on the update panel inside the My Files  .ascx
HpFiles.UpdatePanel = function () {
    var myFiles = $("[id$='_upMyFiles']").attr('id');
    __doPostBack(myFiles);
}; 
```

# javascript - jQuery .text 不起作用

> ID：10177576
> 
> 赞同：1
> 
> 时间：2012-04-16T15:59:31.053
> 
> 标签：javascript, jquery, forms, validation

我有一个 jQuery 验证函数，可以添加类并更改一些关于模糊的信息文本。.addClass 和 .removeClass 方法工作正常，但 .text 不行。我有一种感觉，我错过了一些简单而基本的东西，但我糟糕的 JavaScript 知识可能是一个障碍。感谢任何能提供帮助的人！

```
$(document).ready(function(){
  $('.required-text').on('blur', function() {
    $(this).removeClass('error');
    if($.trim(this.value).length < 1) {
      $(this).addClass('error');
      var fieldText = "#" + this.id + "_info";
      $(fieldText).removeClass('forminfo');
      $(fieldText).addClass('forminfo_error');
      $(fieldText).text = "This field is required.";
    }
  }
});

<input type="text" name="first_name" id="first_name" value="" class="form-text required-text">
<span id="first_name_info" class="forminfo">Required</span> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T16:00:07.773

试试 `$(fieldText).text("This field is required.");`吧

请参阅有关文档`text()`： http: [//api.jquery.com/text/](http://api.jquery.com/text/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:01:42.930

```
$(fieldText).removeClass('forminfo').addClass('forminfo_error').text("This field is required."); 
```

# sql-server-2008 - 使用 2 种不同的配置运行 SSIS 包

> ID：10177578
> 
> 赞同：2
> 
> 时间：2012-04-16T15:59:32.250
> 
> 标签：sql-server-2008, ssis

我们有一个名为 ExportData 的 SSIS 作业，它接受“ExportType”参数。ExportType 参数可以是“schedule”或“unschedule”。

我创建了名为“@ExportType”的变量并创建了 SSIS 配置并在配置文件中公开了该变量并将其命名为“ScheduleConfig”。我复制了该文件并将值更改为“unschedule”并将其命名为“UnscheduleConfig”。

我在 SQL Server 2008 中创建了 SSIS 作业，并为“计划”和“取消计划”设置了 2 个步骤。我为每个步骤附加了正确的配置文件。但无论我运行哪一步，它总是执行“计划”。我确定并仔细检查了配置文件和步骤。

如何使用 2 个不同的配置文件运行 2 个不同的作业？

我确实尝试过使用 SetValues 方法，但它也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T18:45:03.573

我建议您不要将 @ExportType 存储在 SSIS 配置中。您可以通过添加类似于以下内容的 SET 开关来覆盖 DTEXEC 命令行中的值：

/SET "\Package.Variables[ExportType].Properties[Value]";计划

您可以使用上述相同的 PackagePath 在“设置值”选项卡上的“SQL 代理集成服务作业步骤类型”中覆盖此变量值。

希望这会有所帮助，安迪

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:05:12.943

你不能那样做。SSIS 不会读取新配置。

您需要调用该程序包两次，一次使用配置文件 A，一次使用配置文件 B。在每个配置文件上，您会将 @ExportType 变量设置为“schedule”和“unschedule”。

您只能设置一次参数。即使您将 DTEXEC 与 /Config 选项一起使用，例如，您也不能覆盖已设置的参数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T17:45:43.637

如果我正确理解您的要求。这是一个在其中创建的示例包`SSIS 2008 R2`，可以满足您的需求。该示例使用单个包，该包在两个不同的 SQL 代理作业步骤下执行，并且这两个步骤都使用同一配置文件的不同副本。配置文件为包内使用的变量保存不同的值。

*   创建了一个名为`SO_10177578`. 在包中，创建了一个名为**`ExportType`**data type的包变量`String`。此外，将 放置`Execute SQL Task`在“控制流”选项卡上。此任务将有助于识别传递给变量的值`ExportType`。

![新包装](../Images/19432f2ba19018cb00fa3a760bd1343b.png)

*   将 OLE DB 连接添加到示例数据库并将连接命名为`SQLServer`. 我选择为此连接管理器使用 SQL Server 身份验证。

![连接管理器](../Images/c16ca5cca10285c4cccd5f914d15a4c9.png)

*   在 SQL 数据库中，创建了一个`dbo.ExportData`具有以下结构的表。`Id`column 是一个标识列。

![表结构](../Images/613080a95473a30ded13944cb0eabbe1.png)

*   该表不包含任何开始的数据。该表将在执行包时填充数据。

![没有数据开始](../Images/a175449cfe8bccfe890d3538419c7f5b.png)

*   在 SSIS 包上，单击`SSIS`菜单 --> 选定`Package Configuration`选项。在 Package Configurations Organizer 对话框中，选中*Enable package configuration*复选框并单击*Add*按钮。创建了一个新的包配置类型`XML Configuration file`。选择了存储文件的路径。

![包装类型](../Images/be0be6d4e2d23fd9947c681e167491f3.png)

*   将变量的**Value**`ExportType`属性和连接管理器的**ConnectionString**`SQLServer`属性添加到配置文件中。

![添加到文件中的值](../Images/745e495ad2589548d387d12a63a3d80c.png)

*   在执行 SQL 任务上，选择要连接的*连接*并将*SQLStatement*属性`SQLServer`设置为***`INSERT INTO dbo.ExportData (PackageName, ExportTypeValue) VALUES (?, ?)`***

 *![执行 SQL 任务一般](../Images/82d90fcf5c9165a3a370f8cacbe21314.png)

*   将这两个参数配置为包上可用的适当变量。现在包已准备好部署。

![参数映射](../Images/e4d89aa95f6b06ca36ff0ad69db9abe5.png)

*   在数据库服务器的 SQL 代理节点上，创建了一个名为`Test_ExportData`. `Owner`字段信息被删除以隐藏敏感信息。

![SQL 作业](../Images/b387926dd7c7199ef072afae93f74347.png)

*   在 SQL 作业的步骤页面上，创建了两个名为`Step_01`和的步骤`Step_02`。

![SQL 作业步骤](../Images/8a201bbf39a6f09359d209a24f7dd8b5.png)

*   步骤 1 配置如下，包存储在路径中`c:\temp\SO_10177578.dtsx`。

![第 1 步包](../Images/ba230dbafeb9b98d19c243ab570b3701.png)

*   复制使用包创建的包配置文件并将变量的值更改`ExportType`为**Schedule**。将配置文件命名为`ScheduleConfig.dtsConfig`. 屏幕截图仅显示部分配置文件以隐藏敏感的连接字符串信息。

![调度配置](../Images/0f3233b924ba80156d91653ec4e15678.png)

*   在作业的第 1 步中，从路径中引用了新创建的包配置文件`c:\temp\Test\ScheduleConfig.dtsConfig.`

![第 1 步配置](../Images/5b5b5d3ff87eb761b612e7aff63e9d99.png)

*   步骤 2 配置如下，它使用与`c:\temp\SO_10177578.dtsx`步骤 1 相同的路径中存储的包。

![第 2 步包](../Images/312378c7ce3784ecfb31daf3faf88fef.png)

*   复制使用包创建的包配置文件并将变量的值更改`ExportType`为**Unschedule**。将配置文件命名为`UnscheduleConfig.dtsConfig`. 屏幕截图仅显示部分配置文件以隐藏敏感的连接字符串信息。

![取消调度配置](../Images/170fa361dce97b41c41ef8bebfc95d53.png)

*   在作业的第 2 步中，从路径中引用了新创建的包配置文件`c:\temp\Test\UnscheduleConfig.dtsConfig.`

![步骤 2 配置](../Images/b1e325bbb27358b44b21c0ed5d786970.png)

*   现在，这两个步骤都已配置。执行了新的 SQL 代理作业。

![已执行的作业](../Images/03c49596599678752172c5d416db1c11.png)

*   查询表`ExportData`。您会注意到该包被执行了两次，并且 SQL 代理作业的步骤中的每次执行都使用了步骤中指定的适当配置文件。

![数据验证。](../Images/52d202fd9eb5c9f1ca19f86a714c50c3.png)

希望有帮助。*

# migration - 将大型 svn 存储库拆分为多个 git 存储库并跨“svn mv”跟踪历史记录

> ID：10177579
> 
> 赞同：1
> 
> 时间：2012-04-16T15:59:34.437
> 
> 标签：migration, git-svn

我有一个大型 svn 存储库，我正在拆分并迁移到几个 git 存储库。

所以这个单一的 svn 存储库，

```
software/project_1/
        /project_2/
        /project_X/ 
```

将成为这些 git 存储库：

```
repositories/project_1.git
            /project_2.git
            /project_X.git 
```

由于历史记录中的某个时间，我无法保存跨多个 git 存储库的文件`svn mv`的历史记录。

例如，考虑以下存储库：

```
software/project_1/<core_stuff>
                  /project_X/ 
```

`software/project_1/project_X/`在它被`svn mv`编辑成一个独立的版本之前，它进行了一段时间的开发`software/project_X/`

现在，就我所有的`project_X`历史而言，`project_1.git`有前科`svn mv`，也`project_X.git`有后科`svn mv`。

这种情况常见吗？在这种情况下是否可以有意义地跟踪文件的历史记录？

# java - Java 主类未找到错误

> ID：10177583
> 
> 赞同：-4
> 
> 时间：2012-04-16T15:59:41.110
> 
> 标签：java, ubuntu

我在 ubuntu 上运行了一个 jar，它运行良好，但一段时间后，程序无法启动，当我尝试从终端运行 jar 时出现此错误。

```
> Exception in thread "main" java.lang.NoClassDefFoundError:
> jar-CafePilot_Server Caused by: java.lang.ClassNotFoundException:
> jar-CafePilot_Server  at
> java.net.URLClassLoader$1.run(URLClassLoader.java:202)    at
> java.security.AccessController.doPrivileged(Native Method)    at
> java.net.URLClassLoader.findClass(URLClassLoader.java:190)    at
> java.lang.ClassLoader.loadClass(ClassLoader.java:306)     at
> sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)     at
> java.lang.ClassLoader.loadClass(ClassLoader.java:247) Could not find
> the main class: jar-CafePilot_Server.  Program will exit. 
```

为什么我会收到此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:12:26.390

语法是`java -jar CafePilot_Server.jar`，不是`java jar-CafePilot_Server`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:13:56.483

你应该检查你的 CLASSPATH。

试试这个答案：[linuxquestions](http://www.linuxquestions.org/questions/linux-software-2/installing-cafe-pilot-java-error-604098/)

# graph - Neo4j 和 Lucene 多键查询（或者：我应该使用 Cypher 吗？）

> ID：10177584
> 
> 赞同：0
> 
> 时间：2012-04-16T15:59:44.573
> 
> 标签：graph, lucene, neo4j, cypher

我在 Neo4j 中有一个图，其中节点表示平面中的随机点，每个节点的坐标都存储为属性（x 和 y，值类型为`double`）。
我创建节点并索引它们：

```
 IndexManager index = graph.index();
    Index<Node> nodesIndex = index.forNodes("points");

    for (int i = 0; i < points.length; i++) {
        Point p = points[i]; 
        Node n;

        Transaction tx = graph.beginTx();
        try {
            n = graph.createNode();
            n.setProperty("x", p.getX());
            n.setProperty("y", p.getY());

            nodesIndex.add(n, "x", new ValueContext(p.getX()).indexNumeric());
            nodesIndex.add(n, "y", new ValueContext(p.getY()).indexNumeric());

            tx.success();
        } finally {
            tx.finish();
        }
    } 
```

现在，我需要做的是查询正方形区域中的节点。所以例如我做了这个查询：

```
http://localhost:7474/db/data/index/node/points?query=x:[0.0 TO 3.0] AND y:[0.0 TO 3.0] 
```

这是回应：

```
 Node
    Properties
    y   1.0
    x   14.0
    Node info
    self    /db/data/node/10

    Node
    Properties
    y   1.0
    x   2.0
    Node info
    self    /db/data/node/7

    Node
    Properties
    y   1.0
    x   6.0
    Node info
    self    /db/data/node/8

    Node
    Properties
    y   1.0
    x   7.0
    Node info
    self    /db/data/node/9

[Etc...] 
```

如您所见，它不起作用。而且我不明白为什么（也许我需要配置索引？）。*请注意，我*
不必使用 Lucene。如果有一种方法可以使用 Cypher 收集该信息（从以正方形区域为中心的节点开始）实际上会更好，因为我还需要找到的节点之间的关系。

 ***附加信息** 如果这很重要，该图表示平面上随机点集上的 Delaunay 三角剖分。用更抽象的术语来说，我需要“提取”位于给定区域中的整个子图。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:39:03.917

恐怕你不能通过 Cypher 做到这一点。Cypher 无法推断出您想对该查询使用数字值上下文（可能在未来版本的某些索引元信息中），并且您需要能够以您想要的方式查询 Lucene。REST 上最简单的方法可能是使用 Groovy，请参阅[http://docs.neo4j.org/chunked/snapshot/gremlin-plugin.html#rest-api-send-an-arbitrary-groovy-上的自定义排序（相同问题）脚本---lucene排序](http://docs.neo4j.org/chunked/snapshot/gremlin-plugin.html#rest-api-send-an-arbitrary-groovy-script---lucene-sorting)*

# python - 重定向通过python执行的shell脚本的输出

> ID：10177587
> 
> 赞同：1
> 
> 时间：2012-04-16T15:59:53.057
> 
> 标签：python

您好我正在尝试使用以下命令从 python 执行 shell 脚本。

```
os.system("sh myscript.sh") 
```

在我的 shell 脚本中，我编写了一些 SOP，现在如何在我的 Python 中获取 SOP，以便我可以将它们记录到某个文件中？

我知道使用`subprocess.Popen`我可以做到，由于某种原因我不能使用它。

```
p=subprocess.Popen(
        'DMEARAntRunner \"'+mount_path+'\"',
         shell=True,
         stdout=subprocess.PIPE,
         stderr=subprocess.STDOUT
)
while 1:
    line=p.stdout.readline()[:-1]
    if not line:
        break
    write_to_log('INFO',line)
    p.communicate() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:27:29.023

如果我正确理解你的问题，你想要这样的东西：

```
import subprocess
find_txt_command = ['find', '-maxdepth', '2', '-name', '*.txt']
with open('mylog.log', 'w') as logfile:
    subprocess.call(find_txt_command, stdout=logfile, shell=False) 
```

如果需要，您可以使用 Popen 代替 call，语法非常相似。请注意，命令是一个包含您要运行的进程和参数的列表。通常，您希望使用带有 shell=False 的 Popen/call，它可以防止难以调试的意外行为，并且更便于移植。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:21:11.443

请查看这个在 python 中使用 subprocess 模块的[官方文档。](http://docs.python.org/library/subprocess.html#module-subprocess)目前推荐的方式是通过 os.system 调用来执行系统函数并检索结果。上面的链接提供了非常接近您需要的示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T16:08:26.387

我个人建议您将`shell`参数保留为默认值`False`。在这种情况下，第一个参数不是您在终端中键入的字符串，而是一个“单词”列表，第一个是程序，之后是参数。这意味着不需要引用参数，使您的程序对空格参数和[注入攻击](https://www.owasp.org/index.php/Command_Injection)更具弹性。

这应该可以解决问题：

```
p = subsprocess.Popen(['DMEARAntRunner', mount_path], 
    stdout=subprocess.PIPE,stderr=subprocess.STDOUT) 
```

与执行 shell 命令一样，问题仍然是它是否是解决问题的最简单/最好的方法，但这完全是另一个讨论。

# jquery - jQuery UI Datepicker beforeShowDay - 启用测试后的第二天

> ID：10177591
> 
> 赞同：0
> 
> 时间：2012-04-16T16:00:08.430
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我正在与 beforeShowDay 事件作斗争：

我正在设置的日期选择器建议一些学习计划的开始日期，它需要以这种方式运行：

*   对于某些课程，开始日期是预定义的日期，我让这部分工作正常。
*   对于其他一些程序，我只需要星期一可用（已经完成），但如果星期一是假期，我会禁用它。（这对我来说也很好用）。我唯一想念的是，我不仅想禁用这个星期一，还想启用下一个星期二（最初应该禁用，因为我只想选择星期一）。

这是我到目前为止所做的（可能没有优化，但是一旦一切都启动并运行，我会看看我能做什么）：

```
function availableDays(date) {
    var holidays = $("#holidays").text(); // "1-1-2012,2-20-2012,4-6-2012,4-9-2012,5-21-2012,7-2-2012,8-6-2012,9-3-2012-10-8-2012,11-11-2012,12-25-2012,12-26-2012"
    var holidaysDates = new Array();
    holidaysDates = holidays.split(",");

    var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();

    var selectedCourseStartingDates = $("#courseName option:selected").attr("startingdates");
    if(selectedCourseStartingDates != "") {
        var courseStartingDates = new Array();
        courseStartingDates = selectedCourseStartingDates.split(",");

        for(i = 0; i < courseStartingDates.length; i++) {
            if($.inArray((m+1) + '-' + d + '-' + y,courseStartingDates) != -1 || new Date() > date) {
                if($.inArray((m+1) + '-' + d + '-' + y,holidaysDates) != -1) {
                    return [false];
                }
                else {
                    return [true];
                }
            }
            else {
                return [false];
            }
        }
    }
    else {
        // If not Monday
        if(date.getDay() != 1) {
            return [false];
        }
        else {
            if($.inArray((m+1) + '-' + d + '-' + y,holidaysDates) != -1) {
                return [false];
            }
            else {
                return [true];
            }
        }
    }
}

function noWeekendsOrHolidays(date) {
    var noWeekend = $.datepicker.noWeekends(date);
    return noWeekend[0] ? availableDays(date) : noWeekend;
} 
```

我在 beforeShowDay 事件中调用“noWeekendsOrHolidays”。我以这种格式“md-yyyy”从 2 个字符串（特定启用日期和假期到禁用）中获取我的日期。

我需要你的帮助来找出这个循环中的哪个位置（以及如果它实际上是如何可能的）我可以告诉 datepicker 实例在当前正在测试的一次之后的日期返回 true 还是 false ？

当我星期一放假时，是否有可能在下一次迭代（日历上的第二天）放置一个标志，测试可以考虑这个标志，以便在星期二返回 true 而不是 false，因为它应该表现在第一名？

好吧，我希望我足够清楚？英语不是我的母语，所以如果我使用的某些术语不正确，请告诉我。

非常感谢您对此的帮助！

塞德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:56:54.800

在这里发布我的问题实际上让我能够退后一步找到解决方案。

这是我更新的代码：

```
function availableDays(date) {
    var holidays = $("#holidays").text(); // "1-1-2012,2-20-2012,4-6-2012,4-9-2012,5-21-2012,7-2-2012,8-6-2012,9-3-2012-10-8-2012,11-11-2012,12-25-2012,12-26-2012"
    var holidaysDates = new Array();
    holidaysDates = holidays.split(",");

    var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();

    var selectedCourseStartingDates = $("#courseName option:selected").attr("startingdates");
    if(selectedCourseStartingDates != "") {
        var courseStartingDates = new Array();
        courseStartingDates = selectedCourseStartingDates.split(",");

        for(i = 0; i < courseStartingDates.length; i++) {
            if($.inArray((m+1) + '-' + d + '-' + y,courseStartingDates) != -1 || new Date() > date) {
                if($.inArray((m+1) + '-' + d + '-' + y,holidaysDates) != -1) {
                    return [false];
                }
                else {
                    return [true];
                }
            }
            else {
                return [false];
            }
        }
    }
    else {
        // If not Monday
        if(date.getDay() != 1) {
            /* UPDATED */
            if($.inArray((m+1) + '-' + (d-1) + '-' + y,holidaysDates) != -1) {
                return [true];
            }
            else {
                return [false];
            }
            /**********/
        }
        else {
            if($.inArray((m+1) + '-' + d + '-' + y,holidaysDates) != -1) {
                return [false];
            }
            else {
                return [true];
            }
        }
    }
}

function noWeekendsOrHolidays(date) {
    var noWeekend = $.datepicker.noWeekends(date);
    return noWeekend[0] ? availableDays(date) : noWeekend;
} 
```

当我遇到一个不是星期一的假期时，我只是在前一天（d-1）进行测试。

祝你今天过得愉快 ！

塞德里克

# objective-c - iPad 模拟器不适用于 iPhone 应用程序中的 UIImagePickerController

> ID：10177592
> 
> 赞同：9
> 
> 时间：2012-04-16T16:00:14.657
> 
> 标签：objective-c, xcode, uiimagepickercontroller

我正在创建一个 iPhone 应用程序，它使用 UIImagePickerController 让用户从照片库中选择图像。

选择器允许我从照片库中成功获取图像：

*   iPhone 模拟器
*   运行 5.0.1 的真实 iPhone
*   真正的 iPad 运行 5.0.1
*   真正的 iPad 运行 5.1
*   iPad模拟器 v4.3

但是，如果我在以下位置测试此应用程序，则选择器无法获取图像：

*   iPad模拟器 v5.0
*   iPad模拟器 v5.1

在这2个测试环境中，图像选择器成功出现。当我点击我需要的图像时，它只是没有通过方法“ **- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info** ”从“ **[info objectForKey:UIImagePickerControllerOriginalImage] ”给我任何东西**

 **“信息”字典是这样的：

```
{
    UIImagePickerControllerMediaType = "public.image";
    UIImagePickerControllerReferenceURL = "assets-library://asset/asset.PNG?id=7632C58F-AF74-4EEB-AF17-891E35949CBA&ext=PNG";
} 
```

在前 5 个测试环境中，“信息”是这样的：

```
{
    UIImagePickerControllerMediaType = "public.image";
    UIImagePickerControllerOriginalImage = "<UIImage: 0x6bb7810>";
    UIImagePickerControllerReferenceURL = "assets-library://asset/asset.PNG?id=7632C58F-AF74-4EEB-AF17-891E35949CBA&ext=PNG";
} 
```

您可以看到 UIImagePickerControllerOriginalImage 丢失了。我不确定这是否只是我？

注意：我使用 Xcode 4.3.2 和 iOS 5 SDK

注意 2：我没有使用 AssetsLibrary 框架来获取图像。

注 3（2012 年 8 月 2 日添加）：我已升级到安装了 Mountain Lion 的 Xcode 4.4。同样的问题仍然存在。但是现在如果我在 iPad 模拟器 v5.0 中运行它会出现一条新的错误消息（如果我在 iPad 模拟器 v5.1 上运行它不会出现错误消息）。错误消息显示：**找不到命名服务“com.apple.PersistentURLTranslator.Gatekeeper”。assetsd 已关闭或配置错误。事情不会像你期望的那样工作。**

注 4（添加于 2012 年 11 月 25 日）：使用 Xcode 4.5.2，此问题在 iPad 模拟器 5.0、5.1 和 6.0 中仍然存在

注 5（2012 年 3 月 6 日添加）：使用 Xcode 4.6，此问题在 iPad 模拟器所有版本中仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:55:41.527

我不知道那个问题，但临时选择，

imagePicker.allowsEditing = YES；

这将为您提供 UIImagePickerControllerOriginalImage 的图像，

我知道这不是办法，但...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:22:54.440

在实际设备上试试这个

```
 - (IBAction)BrowseImage:(id)sender {

  if ([UIImagePickerController isSourceTypeAvailable:
     UIImagePickerControllerSourceTypeSavedPhotosAlbum])
{
    UIImagePickerController *imagePicker =
    [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType = 
    UIImagePickerControllerSourceTypePhotoLibrary;
    imagePicker.mediaTypes = [NSArray arrayWithObjects:
                              (NSString *) kUTTypeImage,
                              nil];
    imagePicker.allowsEditing = NO;
    [self presentModalViewController:imagePicker animated:YES];
    //newMedia = NO;
}   

-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
  {

[self dismissModalViewControllerAnimated:YES];

 } 
```**

# hibernate - 合并后读取集合时出现 LazyInitializationException

> ID：10177597
> 
> 赞同：1
> 
> 时间：2012-04-16T16:00:31.020
> 
> 标签：hibernate

我正在将 Eclipselink 应用程序转换为使用与 JBoss 6 捆绑的 Hibernate 3.6，因此需要修改延迟加载的完成方式。这不是我第一次使用休眠。

但是，似乎我的集合在合并完成后变得未初始化。我不记得以前见过这种行为。例如：

```
Entity entity = entityDAO.getEntity(id);
System.out.println(entity.getMyCollection().size()); // OK, no exception
entity = entityDAO.update(entity);
System.out.println(entity.getMyCollection().size()); // Throws LazyInitializationException 
```

EntityDAO 片段：

```
public Entity getEntity(Long id){
    Entity e = entityManager.find(Entity.class, id);
    Hibernate.initialize(e.getMyCollection());
    return e;
}

public Entity update(Entity entity){
    return entityManager.merge(entity);
} 
```

实体片段：

```
@OneToMany(mappedBy="entity", cascade=CascadeType.ALL, orphanRemoval=true)
private List<AnotherEntity> myCollection = new ArrayList<AnotherEntity>(); 
```

这真的是预期的行为吗？hibernate 在合并期间会丢弃数据似乎很奇怪..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:29:57.277

这确实是预期的行为。`merge()`在由

*   获取与作为参数传递的分离实体具有相同 ID 的实体，
*   将分离实体的状态复制到附加实体，
*   并返回附加的实体

因此，显然，如果您不重新初始化返回的附加实体的惰性集合，则不会加载该集合。

# .htaccess - Joomla 多语言网站有 2 个 URL，其中一个必须重定向到子目录

> ID：10177601
> 
> 赞同：0
> 
> 时间：2012-04-16T16:00:54.090
> 
> 标签：.htaccess, url-rewriting, joomla1.5

我有一个带有 2 个网址 www.acb.be 和 www.atlantec.fr 的 Joomla 网站

这 2 个 url 都去同一个 joomla 网站。现在客户要求我将 www.atlantec.fr 重定向到网站上的法语版本，在 www.atlantec.fr/fr/ 上找到

提供商（Hostbasket Telenet）无法帮助我。我阅读了很多关于更改我的 .htaccess 的文章，但它不起作用。

有人可以帮我吗？

[在http://www.acb.be/htaccess.txt](http://www.acb.be/htaccess.txt)上查看我的 .htaccess

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:44:50.873

尝试添加：

```
RewriteCond %{HTTP_HOST} ^(www\.)?atlantec\.fr$ [NC]
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^(.*)$ http://www.atlantec.fr/fr/ [R=301,L] 
```

但这总是会迫使访问 www.atlantec.fr 的用户使用法语版本。

# blackberry - 黑莓 - 删除项目后防止 ListField 滚动

> ID：10177602
> 
> 赞同：1
> 
> 时间：2012-04-16T16:00:57.667
> 
> 标签：blackberry, scroll, listfield

我有一个 ListField，它是一个很长的垂直项目列表，您可以选择和删除。删除项目后，列表会滚动回顶部。我可以使用 setSelectedIndex(rowIndex) 返回到我一直在查看的列表中的位置，但这不会保留我一直在屏幕上查看的行。相反，该行出现在屏幕底部，因为一旦正确的索引出现在屏幕上，它就会停止滚动。

有没有办法可以删除一行并保留我的列表视图/位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:28:26.540

刚刚意识到我使用了错误的 ListField.setSize() 函数。

ListField.setSize(int size) 将焦点发送回列表顶部，但如果需要，您可以使用 ListField.setSize(int size, int focusRow) 将焦点留在“currentIndex”。希望这可以帮助某人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T02:33:04.613

1.  保存列表中的当前位置（通过`myListField.getSelectedIndex()`），比如说

    int myVar = myListField.getSelectedIndex();

2.  除去项目

3.  使用`myVar`, 并使用当前列表大小和值通过使用另一个线程`myVar`计算和设置列表索引，并为此操作避免在更新应用程序 UI 时出现事件锁定问题。`myListField.setSelectedIndex(int index);``Application.invokeLater(Runnable thread);`

就是这样。

# jquery - Jquery对话框窗口示例不起作用

> ID：10177606
> 
> 赞同：3
> 
> 时间：2012-04-16T16:01:14.850
> 
> 标签：jquery

尝试学习 Jquery 并处于放弃的边缘！花了2天时间试图让一个对话框显示！

任何人都可以帮助解释为什么这段代码不起作用？我只是在页面顶部打招呼！

jQuery：

```
<script src="js/jquery-1.5.2.min.js" type="text/javascript"></script>
<script src="js/jquery.ui.core.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
    var $dialog = $('#dialog')
    //.html('This dialog will show every time!')
    .dialog({
        autoOpen: false,
        title: 'Basic Dialog'
    });
    $('#opener').click(function() {
        $dialog.dialog('open');
        // prevent the default action, e.g., following a link
        return false;
    });
});
</script> 
```

HTML

```
<div id="dialog">hello</div>
<button id="opener" style="margin-left:66px;margin-top:3px;font-size:11px;width:60px">Click</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:05:12.867

确保您的 jQuery UI Core 文件已包含 Widget 工厂。看一看：

***[http://jqueryui.com/download](http://jqueryui.com/download)***

即使您没有包含 jQuery UI CSS 文件，它仍然可以工作：

***[参见 jsFiddle 演示](http://jsfiddle.net/DotNetScott/dY5da/)***

* * *

***[试试我在 jsBin 的这段代码：](http://jsbin.com/ibuguv/edit#html,live)***

```
<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>jQuery Dialog Demo</title>
  <link rel="stylesheet" type="text/css" href="//ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/themes/cupertino/jquery-ui.css" />
</head>
<body>
  <div id="dialog" style="display: none;">hello</div>
  <button id="opener">Open Dialog</button>
  <script type="text/javascript" src="//ajax.aspnetcdn.com/ajax/jquery/jquery-1.5.2.min.js"></script>
  <script type="text/javascript" src="//ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/jquery-ui.min.js"></script>
  <script type="text/javascript">
    var $dialog = $("#dialog").dialog({ autoOpen: false, title: "Basic Dialog" });
    $("#opener").click(function() { $dialog.dialog("open"); });
  </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:03:48.610

听起来您没有加载 CSS 样式表。

# sql - 查找重复的 SQL

> ID：10177610
> 
> 赞同：0
> 
> 时间：2012-04-16T16:01:31.437
> 
> 标签：sql, sql-server-2008

让我首先给出一些示例表，这将使我的问题更容易理解。

```
Column1      Column2      Column3
Valuea       Value123     Value456
Valueax      Value123     Value456
Valueb       Value123     Value456
Valueb       Value123     Value456

select   Column1,
     Column2,
         Column3,
         count(*)
from     ColumnName
group by 
     Column1,
     Column2,
     Column3,
having   count(Count2+Count3) > 1 
```

我想返回“column1”、“column2”、“column3”，其中第 2and3 列将包含更多重复项，但“column1”必须不同。所以目前上面的代码会返回：

```
Valueb       Value123     Value456 2 
```

但我希望它回来

```
Valuea       Value123     Value456
Valueax      Value123     Value456 
```

其中 column1 具有不同的值，但 column2 和 column3 的值相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:09:59.890

您不能通过连接进行分组。这会将“xxx”+“yyy”视为“x”+“xxyyy”。得到怎么样

```
;WITH x AS 
(
   SELECT Column2, Column3 
   FROM dbo.table GROUP BY Column2, Column3
   HAVING COUNT(*) > 1
)
SELECT t.Column1, t.Column2, t.Column3
FROM x INNER JOIN dbo.table AS t
ON x.Column2 = t.Column2
AND x.Column3 = t.Column3
GROUP BY t.Column1, t.Column2, t.Column3
HAVING COUNT(*) = 1; 
```

这假定这些列都不是 NULLable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:49:35.730

如果我正确理解你的问题，

您希望为您的表提供唯一的行记录。除了使用`Group By`Aaron 提到的人之外，您不能在连接中使用。

但是，您可以使用它`Over`来执行此操作。

**更新**：您需要考虑您需要将什么组合在一起，因为 Aaron 提到“x”+“yy”与“xy”+“y”相同

```
With Data AS
(
SELECT ROW_NUMBER() Over 
     (Partition By "Key" Order by "Key") as R,
     Column1, Column2, Column3
)
SELECT * FROM Data 
WHERE R = 1 
```

# php - Action View Helper - 获取控制器/动作名称

> ID：10177612
> 
> 赞同：0
> 
> 时间：2012-04-16T16:01:36.483
> 
> 标签：php, zend-framework

使用以下控制器：

```
class mydvbController extends Zend_Controller_Action
{
    public function indexAction()
    {

    }

    public function careerAction()
    {

    }

    public function naviAction()
    {

    }
} 
```

以及以下视图脚本 - index.phtml：

```
<?php echo $this->action('navi', 'mydvb'); ?>
Some stuff..... 
```

和career.phtml：

```
<?php echo $this->action('navi', 'mydvb'); ?>
Some other stuff..... 
```

我想在 naviAction() 中获取操作的名称，具体取决于哪个操作称为操作视图助手（在我的示例索引或职业中）。当然有可能在参数中传递它，如下所示：

```
 <?php echo $this->action('navi', 'mydvb', null, array('actionName' => $this->naviAction)); ?> 
```

但是这样做意味着我必须将每个动作的动作名称传递给它的视图，并将视图作为参数传递给动作视图助手。我想知道是否有更简单的方法可以从动作视图助手中获取动作的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:30:24.440

在您的情况下，从请求中获取操作名称不是更容易吗？

```
$front = Zend_Controller_Front::getInstance();
$actionName = $front->getRequest()->getActionName();
echo $actionName; 
```

# php - 嵌套的多维关联数组 foreach

> ID：10177615
> 
> 赞同：0
> 
> 时间：2012-04-16T16:01:49.820
> 
> 标签：php, arrays

如果我有一个 5 层的数组，我可以在第 3 层开始一个 foreach 吗？

```
foreach($people['group']['person'] as $key => $value) 
```

............

还是只会给我第一个？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:07:46.583

只要您要迭代的项目是数组或可迭代对象，它就可以工作。

```
$test1 = array();
$test1['level1'] = array( 'level2' => 
    array( 'level3' => 
        array( 'level4' => 
            array( 'one', 'two', 'three' ))));

foreach($test1['level1']['level2']['level3']['level4'] as $k => $v) 
    echo( $k . ': ' . $v . '<br>'); 
```

将输出：

```
0: one 
1: two 
2: three 
```

# android - 从 iOS 切换到 Android 开发 - 我应该尝试扩展 Activity/ListActivity 吗？

> ID：10177618
> 
> 赞同：1
> 
> 时间：2012-04-16T16:01:58.677
> 
> 标签：android, android-layout, inheritance, android-activity, android-view

我正在从 iOS 切换到 Android，我想知道您如何在 Android 中重用视图配置。在 iOS 中，我通常会创建一个`BaseViewController`处理我的应用程序如何“主题化”的方法，并配置一些我希望随处可用且始终可用（或带有条件）的常见视图组件。然后我会子类`BaseViewController`化以满足我特定于视图的需求。这可能不是处理这类事情的理想方式，但它对我有用。

在 Android 中，我不确定我应该做什么。

似乎有更多选项可用于视图配置；我知道您可以像 iOS 一样，通过从 XML 布局文件膨胀或以编程方式创建视图来创建视图。我也知道，由于 Java 提供继承，您可以扩展`Activity`该类。所以我看到了一些路径：您可以创建一个`base_view.xml`文件并将其包含在未来的布局文件中，但由于某种原因，我认为这有点 hacky。您还可以创建该`base_view.xml`文件，在不可实现的`BaseActivity`类中使用它，并将其子类化为`BaseActivity`可实现和特定于活动的版本。或者，您可以在`BaseActivity`子类中以编程方式进行。我也隐约知道 Android 中的“主题”选项可能会简化其中的一些。

我几乎可以肯定我会以错误的方式解决这个问题，并且有成千上万的人不得不处理之前重新使用某些视图配置的问题，因此感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:14:05.347

您可能想要重复使用许多不同的东西。你没有像我们希望的那样具体。例如，这些只是您可能想要重复使用的一些东西：

*   **样式和主题：**如果您只关心应用程序的外观，那么您只需创建一个主题并将其应用于整个应用程序。`android:theme`您可以通过在文件的应用程序标记中配置属性来做到这一点`AndroidManifest.xml`。
*   **基本布局：**您可能已经知道，android 应用程序通常使用 actionbar ui 模式。对于这类事情，您可以创建一个`BaseActvitiy`处理和配置操作栏的程序（查看 iosched 应用程序源代码）。但是，在这些情况下，我建议坚持使用[ActionBarSherlock 之](https://github.com/JakeWharton/ActionBarSherlock)类的库，这将使事情变得更容易和更好。
*   **行为**：例如，您希望在所有活动中都有一个搜索按钮，它所做的只是调用该`startSearch`方法。在这些情况下，鼓励继承。
*   **UI 组件**：例如，您想重用一些对话框。在这些情况下，以及大多数 OOP 情况下，鼓励组合而不是继承。您将了解到，在大多数情况下，您将需要传递您的活动参考（作为`Context`）。对于这种情况，一般来说，我强烈建议您坚持使用支持库，以便您可以使用 Fragments API；我知道一开始使用起来可能有些困难，但绝对值得付出努力。

如果您的需求更具体，请随时发表评论，以便我可以尝试建议如何进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:19:17.140

1.  我建议不要以编程方式设置布局。您几乎可以使用 xml 以声明方式执行任何操作（动画；平板电脑的特殊布局、纵向、横向不同的 dpi 等）阅读[文档](http://developer.android.com/guide/topics/resources/index.html)应该可以为您以后省去很多麻烦 :-)
2.  您可以通过将它们包含在 include 标记中来重用布局 xml 文件。[这](http://developer.android.com/resources/articles/layout-tricks-reuse.html)是一个很好的解释
3.  如果您有不同活动的相同代码，通常您将活动子类化。如果两个活动有共同的观点，请参阅 2。）
4.  另一方面，样式和主题用于更改特定视图的外观（样式），活动或应用程序中的所有视图（主题）。[文档](http://developer.android.com/guide/topics/ui/themes.html)-

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:07:53.940

你在说什么样的视图配置？听起来你可能会让事情变得过于复杂，但也许不是——这取决于你想要实现的目标。[您是否在此处](http://developer.android.com/resources/tutorials/views/index.html)查看了 Android 开发者网站上有关视图的各种教程？这可能有助于回答您的一些问题。

# android - 在选项卡文本上方对齐 ActionBar 导航选项卡图标？

> ID：10177623
> 
> 赞同：10
> 
> 时间：2012-04-16T16:02:10.723
> 
> 标签：android, actionbarsherlock, android-actionbar

该应用程序有一个 ActionBar，ActionBar 有导航选项卡，每个选项卡都包含文本。除了文本之外，我还需要向选项卡添加图标。

我已`ActionBar.Tab.setIcon(drawable)`成功添加图标，但图标显示在选项卡文本的左侧。

如何移动标签图标，使其位于导航标签文本上方？

（我正在使用 ActionBarSherlock，但认为解决方案将适用于本机和 ABS 实现）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T01:20:22.590

您可以为每个选项卡设置自定义视图。

[https://gist.github.com/3167287](https://gist.github.com/3167287)

**PropositionListActivity.java**

```
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockActivity;
import android.os.Bundle;
import android.app.Activity;
import android.graphics.Color;
import android.graphics.drawable.Drawable;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.ImageView;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.app.NavUtils;

public class PropositionListActivity extends SherlockActivity implements ActionBar.TabListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 

        setContentView(R.layout.proposition_list);

        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        createTab(R.layout.tab_to_opine, R.id.tab_to_opine_title, "Vou Opinar");
        createTab(R.layout.tab_opined, R.id.tab_opined_title, "Já Opinei");
        createTab(R.layout.tab_feedback, R.id.tab_feedback_title, "Feedback");
    }

    public void createTab(int view, int titleView, String title) {
        ActionBar.Tab tab = getSupportActionBar().newTab();
        tab.setTabListener(this);
        tab.setCustomView(view);
        getSupportActionBar().addTab(tab);

        ((TextView) findViewById(titleView)).setText(title);
    }
} 
```

**tab_to_opine.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/tab_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/tab_to_opine"
        android:background="@android:color/transparent" />

    <TextView
        android:id="@+id/tab_to_opine_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:19:11.180

在styles.xml 文件中，您可以添加一个 `<item name="android:drawableTop">@drawable/your_image.</item>` 如果您希望所有图像在顶部都相同，这将起作用。不幸的是，我不太清楚如何为使用不同图像的标签执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T13:54:41.147

它非常简单，只需将 android:drawableTop="@drawable/your_image" 添加到您的 Textview 并删除 ImageView

```
<?xml version="1.0" encoding="utf-8"?> 
```

`<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical" >`

```
<TextView
    android:id="@+id/tab_to_opine_title"
    android:layout_width="wrap_content"
    android:drawableTop="@drawable/your_image" 
    android:layout_height="wrap_content" />

</LinearLayout> 
```

# playframework-2.0 - Play Framework 2.0 在服务器启动时安排 Akka Actor

> ID：10177626
> 
> 赞同：5
> 
> 时间：2012-04-16T16:02:22.747
> 
> 标签：playframework-2.0, akka

我有一个 Akka 演员，它验证随机数据并根据该数据的显示时间对其进行一些更改并更新它。目前我正在做的是在控制器中使用此代码：

```
static ActorRef instance = Akka.system().actorOf(new Props(ValidateAndChangeIt.class));
static {
    Akka.system().scheduler().schedule(
        Duration.Zero(),
        Duration.create(5, TimeUnit.MINUTES),
        instance, "VALIDATE"
    );
} 
```

在控制器中使用 this 的问题是，有人必须访问由该控制器处理的页面才能启动 actor，如果这没有发生，一切都会暂停。

有没有办法在服务器启动时做到这一点？如果演员产生异常，我实际上不知道它的行为。它会停止未来的计划还是继续？如果没有，有没有办法让演员重新安排时间，以防发生任何崩溃或错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T20:01:49.307

要在服务器启动时运行代码，请查看[Global 对象](https://github.com/playframework/Play20/wiki/JavaGlobal)：将代码从控制器移动到`onStart()`方法：

```
public class Global extends GlobalSettings {

  @Override
  public void onStart(Application app) {
    ActorRef instance = Akka.system().actorOf(new Props(ValidateAndChangeIt.class));
    Akka.system().scheduler().schedule(
        Duration.Zero(),
        Duration.create(5, TimeUnit.MINUTES),
        instance, "VALIDATE"
    );
  }  

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-09T05:49:57.637

Play Framework 提供了一种方法，可以在`Global.java`不显式调用它的情况下完成作业调度。

```
public class Global extends GlobalSettings {

    private Cancellable scheduler;

    @Override
    public void onStart(Application app) {
        super.onStart(app);
        schedule();
    }

    @Override
    public void onStop(Application app) {
    //Stop the scheduler
        if (scheduler != null) {
            scheduler.cancel();
            this.scheduler = null;
        }
    }
    private void schedule() {
        try {
            ActorRef helloActor = Akka.system().actorOf(new Props(HelloActor.class));
            scheduler = Akka.system().scheduler().schedule(
                    Duration.create(0, TimeUnit.MILLISECONDS), //Initial delay 0 milliseconds
                    Duration.create(30, TimeUnit.MINUTES),     //Frequency 30 minutes
                    helloActor,
                    "tick",
                    Akka.system().dispatcher(), null);
        }catch (IllegalStateException e){
            Logger.error("Error caused by reloading application", e);
        }catch (Exception e) {
            Logger.error("", e);
        }
    }
} 
```

并创建Actor，`HelloActor.java` 在on`onReceive`方法中，可以做数据的处理，发送邮件等。

```
public class HelloActor extends UntypedActor {

    @Override
    public void onReceive(Object message) throws Exception {
        // Do the processing here. Or better call another class that does the processing.
        // This method will be called when ever the job runs.
        if (message.equals("tick")) {
            //Do something
            // controllers.Application.sendEmails();
        } else {
            unhandled(message);
        }
    }
} 
```

希望这可以帮助。

# spring - 休眠“没有 CurrenetSessionContext”错误

> ID：10177630
> 
> 赞同：0
> 
> 时间：2012-04-16T16:02:37.463
> 
> 标签：spring, hibernate

我一直在尝试启动一个 Spring / Hibernate 项目，但似乎无法让它运行。我收到以下错误。我想我已经接近让它工作了，但我显然错过了一些东西。有人可以告诉我我的代码有什么问题吗？我很想知道，因为我花了 4 天的时间试图让它发挥作用，但一无所获。

这是我得到的错误：

```
Exception in thread "main" org.hibernate.HibernateException: No CurrentSessionContext configured!
    at org.hibernate.impl.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:542)
    at cmsutil.dao.ContentComponentDAOImpl.getContentComponents(ContentComponentDAOImpl.java:37)
    at cmsutil.util.Driver.main(Driver.java:22) 
```

应用上下文

```
 <context:property-placeholder location="jdbc.properties"/>

  <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        p:driverClassName="${jdbc.driverClassName}"
        p:url="${jdbc.url}"
        p:username="${jdbc.username}"
        p:password="${jdbc.password}"/>

  <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
        p:dataSource-ref="dataSource"
        p:configurationClass="org.hibernate.cfg.AnnotationConfiguration"
        p:packagesToScan="cmsutil.dao">
    <property name="hibernateProperties">
      <props>
        <prop key="hibernate.dialect">${hibernate.dialect}</prop>
        <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
        <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
        <prop key="hibernate.generate_statistics">${hibernate.generate_statistics}</prop>
      </props>
    </property>
    <property name="eventListeners">
      <map>
        <entry key="merge">
          <bean class="org.springframework.orm.hibernate3.support.IdTransferringMergeEventListener"/>
        </entry>
      </map>
    </property>

  </bean>

  <tx:annotation-driven transaction-manager="txnManager"/>

  <bean id="txnManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager"
        p:sessionFactory-ref="sessionFactory"/>
</beans> 
```

hibernate.cfg.xml

```
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
        <mapping resource="contentcomponent.hbm.xml"/>
    </session-factory>
</hibernate-configuration> 
```

道

```
import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

@Transactional
@Repository("contentComponentDAO")
public class ContentComponentDAOImpl implements ContentComponentDAO {

    @Autowired
    private SessionFactory sessionFactory;

    public ContentComponentDAOImpl(SessionFactory sessionFactory) {
        setSessionFactory(sessionFactory);
    }

    public ContentComponentDAOImpl() {
    }

    @Override
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    @Override
    public List<ContentComponent> getContentComponents() throws DAOException {
        Session session = sessionFactory.getCurrentSession();
        List<ContentComponent> documents;

        Query query = session.getNamedQuery("ContentComponent.findAllContentComponents");
        documents = query.list();
        return documents;
    } 
```

最后，测试驱动程序：

```
package cmsutil.util;

import cmsutil.dao.ContentComponentDAOImpl;
import cmsutil.exceptions.DAOException;
import java.util.Iterator;
import java.util.List;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;
import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Driver {

    public static void main(String[] args) throws DAOException {
        AbstractApplicationContext factory = new ClassPathXmlApplicationContext("applicationContext.xml");
        SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
        Session session = sessionFactory.openSession();
        ContentComponentDAOImpl c = new ContentComponentDAOImpl();
        c.setSessionFactory(sessionFactory);
        List l = c.getContentComponents();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:13:32.857

您的测试驱动程序没有任何意义。如果要确保 Spring 应用程序上下文正常工作，请使用从上下文中获取的 bean：

```
public static void main(String[] args) throws DAOException {
    AbstractApplicationContext factory = new ClassPathXmlApplicationContext("applicationContext.xml");        
    ContentComponentDAO c = factory.getBean(ContentComponentDAO.class);
    List l = c.getContentComponents();  
} 
```

您也不需要`hibernate.cfg.xml`，因为在您的情况下，Hibernate 是在 Spring 应用程序上下文中配置的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:09:19.570

您的 dao 不是由 spring 管理的，您只是手动创建了一个 dao 实例。因此，不会自动装配任何内容。

您有两个选择 - 允许将休眠会话注入 dao（作为构造函数中的参数传入）。或者从加载的应用上下文中调用你的 bean。

如果是为了单元测试，你可以传入一个模拟对象。

# .net - 在 PLC 组件中使用 COM 可调用包装器

> ID：10177632
> 
> 赞同：1
> 
> 时间：2012-04-16T16:02:42.950
> 
> 标签：.net, portability, plc, ccw, iec61131-3

我有一个基于 Motorolla 的可编程逻辑控制 (PLC) 设备，我使用 IEC-61131 结构化编程语言在其中编写代码。问题是我有一些复杂的计算要做，所以我试图在 COM Callable Wrapper 中编写代码。所以问题是，是否可以访问在.NET 框架上开发的 CCW 中编码的功能以访问基于摩托罗拉的 PLC 设备？

所以简而言之，我还要问的是，这个 CCW 是否可以在非 .NET Framework 设备上访问？

非常感谢您提前。

问候伊尔凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:19:11.657

不。您应该用 ST（结构化文本 Pascal，如 IEC-61131 语言）重新实现您的 .NET 逻辑，或者在 PC 上运行您的 .NET 逻辑，然后通过它支持的某种协议（MODBUS、PROFIBUS...）不断与 PLC 通信，并且将基于 PC 的计算结果写入一些 PLC 标签，这些标签将在 PLC 中进一步处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:24:06.810

一种方法是为您的设备获取一个 OPC 服务器，然后编写一个与实现您的逻辑的 OPC 服务器通信的 OPC 客户端。这样您就可以用任何 .NET 语言（或其他语言）编写程序逻辑。

您可以与摩托罗拉联系，看看他们是否为您的设备配备了 OPC 服务器。

# javascript - javascript 中带有 {} 的列表是什么？

> ID：10177633
> 
> 赞同：1
> 
> 时间：2012-04-16T16:02:48.050
> 
> 标签：javascript, list

```
var my = {};

my["1"] = "tom";

my["2"] = "tony";

document.writeln(my["2"]); 
```

一个简单的问题，{} 叫什么？我知道 [] 被称为 arraylist，我可以对其执行 my.indexOf() 等，但这不适用于 {}。

在哪里可以找到我可以使用 list with {} 执行的操作列表

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T16:03:41.817

`{}`被称为对象，在您的声明中：

```
var my = {}; 
```

您只是在创建一个空对象，然后可以向其中添加属性。

数组和对象都可以使用`[x]`语法访问。数组最适合用于具有数字索引的顺序访问，如下所示：

```
x[1]
x[2] 
```

对象最适合使用非顺序字符串索引进行访问，例如：

```
my["autoSaveTime"]
my.autoSaveTime 
```

有些人还将对象视为哈希表或关联数组，因为它们通常可以用于与其他编程结构类似的目的。

根据您在评论中提出的问题，数组具有类似的属性和类似`.length`的方法`.push()`和`.pop()`。对象没有。MDN 是此类事情的参考信息的良好来源。这是[关于数组方法的 MDN 页面](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array)，这里是关于使用对象的一个[​​很好的概述](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)。

对象没有这些方法。由于对象没有顺序，因此您只需分配给它们或读取它们或迭代它们或删除属性，因为不需要像数组一样尝试更改它们的顺序。

```
var x = my.autoSaveTime;
my.autoSaveTime = 200;
for (var key in my) {
    var item = my[key];
    // do something with item or key here
} 
```

要理解的一件棘手的事情是，数组实际上是从对象派生的，并添加了额外的数组功能。也就是说，数组还可以包含任意字符串命名的属性，如对象，并具有对象所具有的所有泛型方法。对象没有数组功能和方法。因此，数组是对象的超集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:05:57.920

具体来说，`{}`在这种情况下，表示*对象文字表示法*。它是语言的一个句法特征，是创建`Object`.

这个...

```
var my = {}; 
```

...只需创建一个不直接拥有任何属性的对象。

您可以使用相同的*对象字面*量语法立即赋予 Object 属性。

```
var my = {
    '1': 'tom',
    '2': 'tony'
}; 
```

创建空对象的等效代码是使用`Object`构造函数...

```
var my = new Object(); 
```

您应该知道 JavaScript 中的 Object 是无序的。您给它的数字索引在枚举对象时不会保证任何排序。要获得有序循环，您需要获取一个键数组，对它们进行排序，然后迭代该数组。

例如...

```
var my_keys = Object.keys(my);

my_keys.sort(function(a,b) {
    return a - b;
});

for (var i = 0; i < my_keys[i]; i++)
    console.log(my[my_keys[i]]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:05:09.783

一个“对象” [http://www.dyn-web.com/tutorials/obj_lit.php](http://www.dyn-web.com/tutorials/obj_lit.php)

# iphone - UILocalizedIndexedCollat ion 是如何工作的？（文档中的示例代码）

> ID：10177637
> 
> 赞同：3
> 
> 时间：2012-04-16T16:03:00.210
> 
> 标签：iphone, objective-c, uitableview

怎么`UILocalizedIndexedCollation`工作？

我正在阅读文档中的`simpleIndexedTableView` [示例代码](http://developer.apple.com/library/ios/#samplecode/TableViewSuite/Listings/3_SimpleIndexedTableView_Classes_RootViewController_m.html#//apple_ref/doc/uid/DTS40007318-3_SimpleIndexedTableView_Classes_RootViewController_m-DontLinkElementID_18)`RootViewController`，已初始化，我们向它发送了一些数据（`rootViewController.timeZonesArray = timeZones;`），但此时，`collation`已在视图控制器中使用：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // The number of sections is the same as the number of titles in the collation.
    return [[collation sectionTitles] count];
} 
```

基本上这就是魔法似乎发生的地方，那么 `[collation sectionTitles]`包含什么？有些东西必须是自动的，但我不明白整个事情是如何运作的？

```
- (void)configureSections {

    // Get the current collation and keep a reference to it.
    self.collation = [UILocalizedIndexedCollation currentCollation];

    NSInteger index, sectionTitlesCount = [[collation sectionTitles] count];

    NSMutableArray *newSectionsArray = [[NSMutableArray alloc] initWithCapacity:sectionTitlesCount];

    // Set up the sections array: elements are mutable arrays that will contain the time zones for that section.
    for (index = 0; index < sectionTitlesCount; index++) {
        NSMutableArray *array = [[NSMutableArray alloc] init];
        [newSectionsArray addObject:array];
        [array release];
    }

    // Segregate the time zones into the appropriate arrays.
    for (TimeZoneWrapper *timeZone in timeZonesArray) {

        // Ask the collation which section number the time zone belongs in, based on its locale name.
        NSInteger sectionNumber = [collation sectionForObject:timeZone collationStringSelector:@selector(localeName)];

        // Get the array for the section.
        NSMutableArray *sectionTimeZones = [newSectionsArray objectAtIndex:sectionNumber];

        //  Add the time zone to the section.
        [sectionTimeZones addObject:timeZone];
    }

    // Now that all the data's in place, each section array needs to be sorted.
    for (index = 0; index < sectionTitlesCount; index++) {

        NSMutableArray *timeZonesArrayForSection = [newSectionsArray objectAtIndex:index];

        // If the table view or its contents were editable, you would make a mutable copy here.
        NSArray *sortedTimeZonesArrayForSection = [collation sortedArrayFromArray:timeZonesArrayForSection collationStringSelector:@selector(localeName)];

        // Replace the existing array with the sorted array.
        [newSectionsArray replaceObjectAtIndex:index withObject:sortedTimeZonesArrayForSection];
    }

    self.sectionsArray = newSectionsArray;
    [newSectionsArray release]; 
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T17:30:20.610

`[collation sectionTitles]`只包含标准的字母排序，以便在表格视图的右侧显示。即使您只有以“B”和“F”开头的项目，侧面的索引也始终显示完整的字母表。但是由于用于对字符串进行排序的标准字母表会根据区域设置而变化，Apple 让我们`UILocalizedIndexedCollation`可以轻松地向用户展示他们的期望。

# c - 在内核中处理线程的正确方法？

> ID：10177641
> 
> 赞同：18
> 
> 时间：2012-04-16T16:03:12.733
> 
> 标签：c, multithreading, linux-kernel, zombie-process

我已经看到了一些零散的信息，但我似乎无法得到一个最终答案。你如何清理内核中的僵尸线程？

为了确保并产生处理内核线程的最终正确方法，我想更广泛地提出这个问题。**如何在 Linux 内核中创建、终止和清理线程？**

我到目前为止是这样的：

```
thread_func:
    exited = 0;
    while (!must_exit)
        do stuff
    exited = 1;
    do_exit(0)

init_module:
    must_exit = 0;
    exited = 1;
    kthread_run(thread_func, ...)    /* creates and runs the thread */

cleanup_module:
    must_exit = 1;
    while (!exited)
        set_current_state(TASK_INTERRUPTIBLE);
        msleep(1);
    /* How do I cleanup? */ 
```

我发现最接近清理解决方案的是[release_task](http://tomoyo.sourceforge.jp/cgi-bin/lxr/source/kernel/exit.c#L168)，但我没有找到任何谈论它的地方。我想既然线程函数是`kthread_create`等`kthread_run`，应该有一个`kthread_join`or `kthread_wait`，但没有。`do_wait`似乎也有可能，但不需要`struct task_struct *`.

此外，我不确定这是否`do_exit`是一个好主意，或者是否有必要。有人可以提出如何创建、终止和清理 kthread 的最小草图吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-16T16:59:36.900

执行此操作的“正确”方法之一是让您的线程函数检查它是否`kthread_should_stop`，如果它确实需要停止则简单地返回。

你不需要调用`do_exit`，如果你打算`kthread_stop`从模块退出函数调用它，你可能不应该。

您可以通过查看`kthread_create_on_node`in的文档来了解这一点[`kernel/kthread.c`](http://lxr.free-electrons.com/source/kernel/kthread.c)（从 Linux 内核 3.3.1 中提取）：

> /**
> * kthread_create_on_node - 创建一个 kthread。
> * @threadfn：在 signal_pending(current) 之前运行的函数。
> * @data：@threadfn 的数据指针。
> * @node：内存节点号。
> * @namefmt：线程的 printf 样式名称。
> *
> * 描述：此辅助函数创建并命名内核
> * 线程。线程将被停止：使用 wake_up_process() 来启动
> 它。另请参见 kthread_run()。
> *
> * 如果线程要绑定在特定的 cpu 上，
> 则在 @node 中给它的节点 *，以获得 kthread 堆栈的 NUMA 亲和性，否则给 -1。
> * 当被唤醒时，线程将运行 @threadfn() 并使用 @data 作为它的
> * 参数。**@threadfn() 可以直接调用 do_exit() 如果它是一个****没有人会调用 kthread_stop() 的独立线程，或者**
> ***当 'kthread_should_stop()' 为真时返回**（这意味着 * kthread_stop() 已被调用） . 返回值应为零 * 或负错误号；它将被传递给 kthread_stop()。 * * 返回一个 task_struct 或 ERR_PTR(-ENOMEM)。 */

 ****存在“匹配”评论`kthread_stop`：

> 如果 threadfn() 可能调用 do_exit() 本身，**调用者必须确保 task_struct 不能消失**。

（而且我不确定你是怎么做到的 - 可能会坚持`struct_task`使用`get_task_struct`.）

如果你走线程创建的路径，你会得到类似的东西：

```
kthread_create                                           // macro in kthread.h
  -> kthread_create_on_node                              // in kthead.c
    -> adds your thread request to kthread_create_list
    -> wakes up the kthreadd_task 
```

`kthreadd_task`设置在`init/main.c`中`reset_init`。它运行`kthreadd`函数（来自`kthread.c`）

```
kthreadd                                                 // all in kthread.c
  -> create_kthread
    -> kernel_thread(kthread, your_kthread_create_info, ...) 
```

`kthread`函数本身会：

```
kthread
  -> initialization stuff
  -> schedule() // allows you to cancel the thread before it's actually started
  -> if (!should_stop)
    -> ret = your_thread_function()
  -> do_exit(ret) 
```

...因此，如果`your_thread_function`只是返回，`do_exit`将以其返回值调用。不需要自己做。****

# c# - .NET RSA 签名/验证数据许可密钥

> ID：10177647
> 
> 赞同：0
> 
> 时间：2012-04-16T16:03:39.300
> 
> 标签：c#, licensing, system, rsa

伙计们，我得到了一个项目（服务器端 c# sn 生成器），我必须为其实施基本许可系统（它更像是一个测试而不是实际项目），但是有一些要求：

1.  它必须使用 RSA 2048
2.  它必须产生对人类友好的 16 个字符 (0-F)，由 3 个破折号分隔（总共 19 个符号）

客户端部分也在验证序列号，如下所示：

```
VerifyMyKey(p1, p2, p3); 
```

在哪里：

*   p1 是 xml 编码的公共/指数值
*   p2 是散列的唯一用户 ID（在我的情况下，项目使用的是 sha1）
*   bp3 是漂亮的序列号

是否有任何 SignData 生成数字的示例，例如：

```
1111-1111-1111-1111 
```

或类似的东西，因为我现在得到的只是正在工作的base64编码字符串，但它对人类不友好。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:10:00.383

你的意思是签名应该正好是 16 个字节长？这对于 2048 位 RSA 是不可能的。根据定义，一个密文块（包括数字签名）的长度与密钥大小相同，即 2048 位 = 256 字节。RSA 适用于块，它不是流密码。任何东西都不会正确解密/验证。

如果您希望输出具有任意长度但包含 16 个十六进制数字，那是另一回事。RSA 将数据输出为字节数组，随意将它们表示为十六进制数字 - 每个字节两位数。一个 2048 位二进制数据块的长度为 512 个十六进制数字。

# javascript - 使用 JQuery.getJSON() 从 json 文件加载 contecxtmenu

> ID：10177648
> 
> 赞同：0
> 
> 时间：2012-04-16T16:03:40.590
> 
> 标签：javascript, jquery, json, jstree

我需要从 json 文件中加载 jsTree 的上下文菜单。上下文菜单保存在此文件（“test.json”）中：

```
{
    "item1" : {
        "label" : "voce1"
    },
    "item2" : {
        "label" : "voce2"
    }
} 
```

加载上下文菜单的代码是：

```
$(function () {

    $("#tree").jstree({ 
        "plugins" : [ "themes", "json_data", "ui", "contextmenu" ],

        // other code ....

        "contextmenu" : {
        "items" : customMenu
    }

    })
});

function customMenu(node) {

    $.getJSON( "test.json", function(json) {
        return json;
    });
} 
```

这样，我看不到上下文菜单。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:10:02.160

我不知道 jstree 插件是如何工作的，但也许你应该尝试不同的方法，首先加载发出 Ajax 请求的 JSON 数据，然后在完成后初始化 jstree：

```
$(function () {
 $.getJSON( "test.json", function(json) {
  $("#tree").jstree({ 
    "plugins" : [ "themes", "json_data", "ui", "contextmenu" ],
    "contextmenu" : {
      "items" : json
    }
  });
 });
}); 
```

这是因为 Ajax 调用是异步的，因此您的`customMenu()`函数不会向您`"items"`的`"contextmenu"`.

# javascript - 如何用 getElementsByClassName 替换 getElementById 函数调用

> ID：10177655
> 
> 赞同：0
> 
> 时间：2012-04-16T16:04:03.190
> 
> 标签：javascript, list, getelementbyid, getelementsbyclassname

我想使用 CMS （[https://stackoverflow.com/a/1933623/1336540](https://stackoverflow.com/a/1933623/1336540)）的 getElementsByClassName 函数调用，该函数使列表可折叠并且目前仅与 getElementById 一起使用 - [http://acmeous.blogspot。 com/2011/03/how-to-create-easy-collapsible-and.html](http://acmeous.blogspot.com/2011/03/how-to-create-easy-collapsible-and.html)

因为同一个类可以有多个 HTML 元素，CMS 使用循环来查找和处理它们。我试图调整他的代码，但由于循环使用它超出了我的 JS 能力。

原始CMS函数调用：

```
function toggle_visibility(className) {
var elements = getElementsByClassName(document, className),
   n = elements.length;
for (var i = 0; i < n; i++) {
var e = elements[i];

if(e.style.display == 'block') {
   e.style.display = 'none';
 } else {
   e.style.display = 'block';
 }
}
} 
```

如何转换此函数调用以将 getElementById 替换为 CMS getElementsByClassName？

```
if (window.addEventListener) {
   window.addEventListener("load", function()
   {makeCollapsible(document.getElementById('listCategories'), 1);}, false);
} else if (window.attachEvent) {
   window.attachEvent("onload", function()
   {makeCollapsible(document.getElementById('listCategories'), 1);});
} else {
   window.onload = function()
   {makeCollapsible(document.getElementById('listCategories'), 1);};
} 
```

感谢大家阅读本文并试图帮助我！

编辑：函数makeCollapsible：

```
function makeCollapsible(listElement,listState){
  if(listState!=null) defaultState=listState;

  // removed list item bullets and the sapce they occupy
  listElement.style.listStyle='none';
  listElement.style.marginLeft='0';
  listElement.style.paddingLeft='0';

  // loop over all child elements of the list
  var child=listElement.firstChild;
  while (child!=null){

    // only process li elements (and not text elements)
    if (child.nodeType==1){

      // build a list of child ol and ul elements and show/hide them
      var list=new Array();
      var grandchild=child.firstChild;
      while (grandchild!=null){
        if (grandchild.tagName=='OL' || grandchild.tagName=='UL'){
          if(defaultState==1) grandchild.style.display='block';
          else grandchild.style.display='none';
          list.push(grandchild);
        }
        grandchild=grandchild.nextSibling;
      }

      // add toggle buttons
      if(defaultState==1) {
          var node=document.createElement('img');
          node.setAttribute('src',expandedImage);
          node.setAttribute('class','collapsibleOpen');
          node.style.marginRight="5px";
          node.style.display = "inline";
          node.onclick=createToggleFunction(node,list);
          child.insertBefore(node,child.firstChild);
      } else {
          var node=document.createElement('img');
          node.setAttribute('src',collapsedImage);
          node.setAttribute('class','collapsibleClosed');
          node.style.marginRight="5px";
          node.style.display = "inline";
          node.onclick=createToggleFunction(node,list);
          child.insertBefore(node,child.firstChild);
  }
}

child=child.nextSibling;
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:35:31.780

所以，我猜你有一个这样的dom：

```
<ul id="listCategories">
     <li class="category"><!-- one collapsible list --></li>
     <li class="category"><!-- another collapsible list --></li>
     <li class="category">...
</ul> 
```

并想从 迁移`makeCollapsible(document.getElementById('listCategories'), 1)`到`makeCollapsible(getElementsByClassName(document, 'category'), 1)`？

然后你需要遍历给定的节点列表，而不是给定元素的子节点：

```
function makeCollapsible(lists, listState){
    if (listState!=null) defaultState=listState;
    for (var i=0; i<lists.length; i++) {
        var child = lists[i];
        if (child.nodeType!=1) continue; // not really neded
        // and then build the list and add the buttons:
        var list=new Array();
        ...
        if(defaultState==1) {
            ...
        } else {
            ...
        }
    }
} 
```

# extjs - ExtJS4 - 根据模型中的数据在卡片布局中选择卡片

> ID：10177659
> 
> 赞同：0
> 
> 时间：2012-04-16T16:04:23.447
> 
> 标签：extjs, extjs4, extjs-mvc

有没有办法在加载记录时自动选择卡片布局中的卡片？

我想在一个表单中有多个互斥的字段组。我想根据模型中的值在它们之间自动切换。卡片布局可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:13:01.240

据我所知，没有什么是自动存在的。您必须根据您在控制器中加载的信息手动显示/隐藏它们。

# haskell - 定义 getPara 错误所需的 Haskell 实例 Num [Char]

> ID：10177665
> 
> 赞同：0
> 
> 时间：2012-04-16T16:04:48.197
> 
> 标签：haskell

```
getPara :: (Num [Char])  =>  [Char] -> Integer -> [Char]
getPara "" _ = ""

getPara str nr 
    | (nr == 0 ) && ((head str) == ')' ) = ')' : getPara "" 0 
    | ( nr == 0 ) && ( (head str) == '(' ) = '(' : (getPara (tail str) 0)
    | (nr /= 0 ) && ( (head str) == '(') = (getPara (tail str) nr-1) 
    | (nr == 0 ) && ( (head str) /= '(' ) = (head str) : (getPara (tail str) 0 )
    | otherwise = (getPara (tail str) nr) 
```

我想要做的是从字符串中获取 nr 组括号，我得到的错误是：

```
Illegal Haskell 98 class constraint in type declaration
*** Expression : getPara
*** Type       : Num [Char] => [Char] -> Integer -> [Char] 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:55:51.040

从马特的回答开始，让我们美化代码（虽然我没有检查它是否有效）。`head`首先，列表的模式匹配比很多和要好得多`tail`：

```
getPara :: [Char] -> Integer -> [Char]
getPara "" _ = ""
getPara (x:xs) nr 
    | (nr == 0 ) && ( x == ')' )  = ')' : getPara "" 0 
    | (nr == 0 ) && ( x == '(' ) = '(' : getPara xs 0
    | (nr /= 0 ) && ( x == '(' )  =  getPara xs (nr-1)  -- here!
    | (nr == 0 ) && ( x /= '(' ) = x : getPara xs 0 
    | otherwise = getPara xs nr 
```

现在您可以进行更多模式匹配：

```
getPara :: [Char] -> Integer -> [Char]
getPara "" _ = ""
getPara (')':xs) 0                 = ')' : getPara "" 0 
getPara ('(':xs) 0                 = '(' : getPara xs 0
getPara ('(':xs) nr   | nr /= 0    = getPara xs (nr-1)  -- here!
getPara (x:xs) 0      | x /= '('   = x : getPara xs 0 
getPara (_:xs) nr                  = getPara xs nr 
```

**[编辑]**

正如丹尼尔所指出的，仔细分析会发现剩下的守卫总是真实的。

```
getPara :: [Char] -> Integer -> [Char]
getPara "" _ = ""
getPara (')':xs) 0   = ')' : getPara "" 0 
getPara ('(':xs) 0   = '(' : getPara xs 0
getPara ('(':xs) nr  = getPara xs (nr-1)  -- here!
getPara (x:xs) 0     = x : getPara xs 0 
getPara (_:xs) nr    = getPara xs nr 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:11:48.433

`getPara`不允许您的类型签名，但根本问题是您在定义的深处缺少括号。如果您将代码更改为：

```
getPara :: [Char] -> Integer -> [Char]
getPara "" _ = ""

getPara str nr 
    | (nr == 0 ) && ((head str) == ')' )  = ')' : getPara "" 0 
    | (nr == 0 ) && ( (head str) == '(' ) = '(' : (getPara (tail str) 0)
    | (nr /= 0 ) && ( (head str) == '(')  = (getPara (tail str) (nr-1))  -- here!
    | (nr == 0 ) && ( (head str) /= '(' ) = (head str) : (getPara (tail str) 0 )
    | otherwise = (getPara (tail str) nr) 
```

它编译......但我不确定它是否有效。

有两个变化：

1.  的类型签名`getPara`
2.  `nr-1`用括号括起来

    ```
    | (nr /= 0 ) && ( (head str) == '(')  = (getPara (tail str) (nr-1)) 
    ```

# scala - Play 2.0中看不懂Iteratee、Enumerator、Enumeratee

> ID：10177666
> 
> 赞同：26
> 
> 时间：2012-04-16T16:04:51.650
> 
> 标签：scala, playframework, playframework-2.0, iterate

我刚刚开始学习 Play 2.0 框架。我无法理解的一件事是[play tutorial](http://www.playframework.org/documentation/2.0/Iteratees)中描述的 Iteratee、Enumerator 和 Enumeratee 模式。我在函数式语言方面的经验很少。

这个模式有什么作用？

它如何帮助我编写非阻塞/反应式代码？

一些简单的例子会有所帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-17T01:44:45.070

playframework 2.0 下载附带一些示例。其中两个有 Iteratee/Comet 示例。例如，comet-clock[示例应用程序](https://github.com/playframework/playframework/blob/2.0.8/samples/scala/comet-clock/app/controllers/Application.scala)显示：

```
lazy val clock = Enumerator.fromCallback { () =>
  Promise.timeout(Some(dateFormat.format(new Date)), 100 milliseconds)
} 
```

然后它是这样使用的：

```
Ok.stream(clock &> Comet(callback = "parent.clockChanged")) 
```

这会将结果以块的形式提供给客户端。该`Enumerator`对象还具有`fromFile`, `fromStream`（如`java.io.InputStream`）实用枚举器函数。

我不确定这是在哪里完成的，但假设这个分块处理没有占用线程。看到一些基准测试会非常有趣，因为迭代器的实现肯定存在开销，因为要处理的数据以及计算被包装在各种对象中。

从枚举器提供的数据被包装，以便它可以指示有更多数据要处理或数据已到达末尾 (EOF)。迭代器的处理结果也被包装，以便它可以指示是否已经在某些输入上计算了结果，或者需要更多输入来计算结果。我推荐 John De Goes 的[nescala 演示文稿](http://marakana.com/s/learn_about_efficient_functional_io_in_scala_from_john_de_goes_presentation_at_nescala,1130/index.html)，它展示了从 fold 到 Iteratees 的演变。编辑：Brendan McAdams 有一个关于异步和非阻塞的 Scala Days 2012[演示文稿- 在演示文稿结束时（约 26 分钟），它涉及迭代器以及它如何帮助以异步样式处理数据库游标样式 IO。](http://skillsmatter.com/podcast/home/nonblocking-scala/js-4104)

一个被吹捧的好处`Iteratees`是他们组成。以下是它们的几种组合方式：

*   你可以喂一个枚举*器然后*另一个
*   您可以将类型函数*映射*`(T) => U`到枚举器上`T`以获取枚举器`U`
*   你可以*交错*两个枚举器
*   一个 iteratee 可以留下一些输入供另一个 iteratee 使用

# php - PHP 生成图像预览并不总是有效（尺寸太大？）

> ID：10177669
> 
> 赞同：0
> 
> 时间：2012-04-16T16:04:56.263
> 
> 标签：php, image, readfile

我得到了这个脚本来调整图片大小并输出它：

```
<?php
/**
 * Produce a preview of the picture
 *
 */
class CtrlImagePreview {

    const EXT_DOC = 'doc';
    const EXT_FILE = 'file';
    const EXT_XLS = 'xls';

    /**
     * Get the appropriate icon in function of the extension
     * @param string $ext
     */
    public function icon($ext) {

        //put the extension in lowercase
        $ext = strtolower($ext);

        //check if icon exist
        if(file_exists('picture/icon/'.$ext.'.png')) {

            //display the approriate icon
            $url = 'picture/icon/'.$ext.'.png';

        } else {

            //display 
            $url = 'picture/icon/file.png';
        }

        header("Cache-Control: private, max-age=10800, pre-check=10800");
        header("Pragma: private");
        header("Expires: " . date(DATE_RFC822,time()+60*60*24*30));
        header('Content-Type: image/png');
        header('Content-Transfer-Encoding: binary');
        readfile($url);
    }

    /**
     * Resize and output preview of the image
     * @param File $file
     */
    public function resize(File $file) {
        header("Cache-Control: private, max-age=10800, pre-check=10800");
        header("Pragma: private");
        header("Expires: " . date(DATE_RFC822,time()+60*60*24*30));

        header('Content-Type: image/png');
        header('Content-Transfer-Encoding: binary');

        $this->image('../upload/'.$_SESSION['c']->getId().'/'.$file->getProject()->getId().'/'.$file->getName(), true, 45);
    }

    /**
     * NOTE: this function has been imported for image resizing, output mime: image/jpeg
     * @param unknown_type $image
     * @param unknown_type $crop
     * @param unknown_type $size
     * @return boolean
     */
    private function image($image, $crop = null, $size = null) {
        $image = ImageCreateFromString(file_get_contents($image));

        if (is_resource($image) === true) {
            $x = 0;
            $y = 0;
            $width = imagesx($image);
            $height = imagesy($image);

            /*
             CROP (Aspect Ratio) Section
            */

            if (is_null($crop) === true) {
                $crop = array($width, $height);
            } else {
                $crop = array_filter(explode(':', $crop));

                if (empty($crop) === true) {
                    $crop = array($width, $height);
                } else {
                    if ((empty($crop[0]) === true) || (is_numeric($crop[0]) === false)) {
                        $crop[0] = $crop[1];
                    } else if ((empty($crop[1]) === true) || (is_numeric($crop[1]) === false)) {
                        $crop[1] = $crop[0];
                    }
                }

                $ratio = array(0 => $width / $height, 1 => $crop[0] / $crop[1]);

                if ($ratio[0] > $ratio[1]) {
                    $width = $height * $ratio[1];
                    $x = (imagesx($image) - $width) / 2;
                }

                else if ($ratio[0] < $ratio[1]) {
                    $height = $width / $ratio[1];
                    $y = (imagesy($image) - $height) / 2;
                }

            }

            /*
             Resize Section
            */

            if (is_null($size) === true) {
                $size = array($width, $height);
            }

            else {
                $size = array_filter(explode('x', $size));

                if (empty($size) === true) {
                    $size = array(imagesx($image), imagesy($image));
                } else {
                    if ((empty($size[0]) === true) || (is_numeric($size[0]) === false)) {
                        $size[0] = round($size[1] * $width / $height);
                    } else if ((empty($size[1]) === true) || (is_numeric($size[1]) === false)) {
                        $size[1] = round($size[0] * $height / $width);
                    }
                }
            }

            $result = ImageCreateTrueColor($size[0], $size[1]);

            if (is_resource($result) === true) {
                ImageSaveAlpha($result, true);
                ImageAlphaBlending($result, true);
                ImageFill($result, 0, 0, ImageColorAllocate($result, 255, 255, 255));
                ImageCopyResampled($result, $image, 0, 0, $x, $y, $size[0], $size[1], $width, $height);

                ImageInterlace($result, true);
                Imagepng($result, null, 0);
            }
        }

        return false;
    }
}

?> 
```

问题是这个脚本有时工作有时不工作，而且它似乎不适用于大图像（仅在我的服务器上，在本地模式下很好！）。

这是此脚本生成的图片：

![图像预览](../Images/c6642a1cda18d3483b0b2faa471856d1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:46:57.783

这可能并不明显，但是当使用 PHP 函数处理图像时，图像会在内存中解压缩。如果您有一张分辨率为 2500×1500 的 1 MB JPEG 照片（大约是 4 MPix 图片），则未压缩的大小为 2500 × 1500（分辨率）× 4（每像素字节数）= 15 MB。使用更多压缩 JPEG，压缩数据与未压缩数据之间的比率很容易达到 1:30 甚至更大。对于正确的图像处理，您甚至可能需要*两倍*的可用内存（用于输入图像*和*输出）。

通常的解决方案是增加内存限制（在 PHP 的配置中`memory_limit`）或使用外部库，如 ImageMagick。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:49:12.487

大图像需要大量内存来调整大小。占用的内存通常超过（例如）mod_php 已分配的最大值。我以前通过某种队列（数据库，甚至只是将其放入特定目录）将图像文件名发送到外部进程，然后有一个基于命令行的 PHP 脚本（或其他一些图像调整程序）使用尽可能多的内存执行操作，然后将新副本放在某个地方。

如果您愿意，还有其他一些关于如何安排这样的队列的问题。

# android - 以编程方式更改我的 relativeLayout 的样式

> ID：10177672
> 
> 赞同：2
> 
> 时间：2012-04-16T16:04:59.090
> 
> 标签：android, android-layout

我有这个xml：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    style="@style/FragmentSecondary" >
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:layout_alignParentTop="true"/>

<RelativeLyout> 
```

我的风格是 style="@style/FragmentSecondary"，想以编程方式将其更改为 style=@style/FragmentTrains。我不想重写另一个xml。我需要把它写在代码中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:25:24.873

我不相信您可以以编程方式设置样式。为了解决这个问题，您可以创建一个指定样式的模板布局 xml 文件，例如在 res/layout create tvtemplate.xml 中，内容如下：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is a template"
        style="@style/my_style" /> 
```

然后膨胀这个来实例化你的新TextView：

```
TextView myText = (TextView)getLayoutInflater().inflate(R.layout.tvtemplate, null); 
```

希望这可以帮助。

另请参考此[LINK](https://stackoverflow.com/questions/3241729/android-dynamically-change-style-at-runtime) & [set style from code](https://stackoverflow.com/questions/8369504/why-so-complex-to-set-style-from-code-in-android)

# ruby - 如何在 XML (UTF-8) 中嵌入上传的二进制文件 (ASCII-8BIT)？

> ID：10177674
> 
> 赞同：4
> 
> 时间：2012-04-16T16:05:03.427
> 
> 标签：ruby, ruby-on-rails-3

我有一个通过常规上传的文件`form_for`，这给了我`ActionDispatch::Http::UploadedFile`params 哈希中的一个对象，我可以调用它`.read`来获取内容。我现在需要将文件嵌入到 XML 文档中。我现在使用常规的 Ruby 字符串来构造 XML。Rails 字符串的默认编码是 utf-8。

因此我得到错误`Encoding::UndefinedConversionError`，`"\x89" from ASCII-8BIT to UTF-8`。

以下文件会发生这种情况：

```
what-matters-now-1.pdf：应用程序/八位字节流；字符集=二进制
example.csv：文本/纯文本；字符集=utf-8
调查.png：图片/png；字符集=二进制

```

它不会发生在：

```
my_test.txt：文本/纯文本；charset=us-ascii
```

我尝试更改编码，但出现相同的错误：

```
params[:file].read.encode('utf-8') 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T08:15:43.383

我在尝试打开和写图片时遇到了同样的问题（错误）。在将“wb”添加为 open 方法的权限后，它成功了。之前是“w”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:33:32.623

首先，如果不进行某种类型的文本转换，就无法将二进制文件嵌入到 XML 文档中。[`Base64`](https://ruby-doc.org/stdlib-2.1.3/libdoc/base64/rdoc/Base64.html)在您开始尝试将其内容视为字符串而不是字节序列之前，至少需要以某种方式对 PDF 文档和 PNG 图像进行编码 - 可能是这样。

`UndefinedConversionError`表示您正在尝试将 Ruby 认为是 ASCII 的文本转换为 UTF-8 。但是源文本包含一个字节，其值为 0x89（十进制 137），超出了 ASCII 范围。如果源文件是二进制文件，那一点也不意外，base64 编码可以解决这个问题。

但是，如果生成该错误的源文件已经是文本，那么您需要确定并指定它实际使用的字符集。0x89 表示它既不是 ASCII 也不是 UTF-8，因此最可能的选项是 Latin-1 或 Windows-1252。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:39:47.267

您可以在将字符串嵌入到 xml 之前对字符串进行 base 64 编码：

```
require 'base64'
encoded_string = Base64.encode64(the_string) 
```

现在`encoded_string`应该可以毫无问题地嵌入。当然，您需要在另一端对其进行解码。

# wpf - WPF：使用 WinDbg 在 Win 7 64 上对偶尔出现高 CPU 利用率的应用程序进行故障排除

> ID：10177679
> 
> 赞同：1
> 
> 时间：2012-04-16T16:05:15.553
> 
> 标签：wpf, windbg, windows-7-x64

我有一个 .NET 3.5 WPF 应用程序，当仅在 Win 7 64 位上运行时，它偶尔会占用 96-99% 的 CPU 时间。当然，当这种情况发生时，甚至应用程序本身也会停止正常工作。这是另一个仅在 64 位版本的 Windows 7 上发生的问题。

应用程序当前处于这种状态，我想使用 WinDbg 或其他一些调试工具来捕获尽可能多的信息。任何在线可以实时提供帮助的人？

首先，这是我可以从 Process Explorer 中获得的信息：如附图所示![在此处输入图像描述](../Images/baa5f9324a5027c958d03112eb2e976b.png)，我的线程数为 40，其中一堆具有起始地址：

```
mscorwrks.dll!GetMetaDataInternalInterfaceFromPublic+0x934c. 
```

目前大约有 24 个线程将其显示为起始地址。但我无法将其与我的代码中的任何内容联系起来。

因此，我目前使用 WinDbg 附加到该进程，该进程已暂停所有线程。然后我做了

```
!runaway 3 
```

这给了我：

```
0:039> !runaway 3
 User Mode Time
  Thread       Time
  33:29bc      0 days 0:27:48.711
  21:2880      0 days 0:26:22.021
  34:18cc      0 days 0:24:38.873
  18:2a04      0 days 0:23:56.753
  23:2618      0 days 0:18:58.947
  24:27e8      0 days 0:17:36.859
  30:21d4      0 days 0:17:05.800
  32:248c      0 days 0:17:04.286
  35:2b00      0 days 0:16:20.809
  22:2680      0 days 0:15:37.597
   5:2a28      0 days 0:15:10.234
  31:ee4       0 days 0:15:07.348
  20:20f0      0 days 0:14:32.903
  17:29ac      0 days 0:14:02.202
  10:20dc      0 days 0:00:51.152
  11:2ad0      0 days 0:00:11.247
  37:2c14      0 days 0:00:06.489
  38:2f3c      0 days 0:00:01.466
  25:1db8      0 days 0:00:00.920
   1:2a84      0 days 0:00:00.452
   0:1494      0 days 0:00:00.093
   2:1ba0      0 days 0:00:00.078
  29:53c       0 days 0:00:00.015
  27:278c      0 days 0:00:00.015
   7:8d4       0 days 0:00:00.015
   4:2620      0 days 0:00:00.015
  39:215c      0 days 0:00:00.000
  36:2088      0 days 0:00:00.000
  28:26e0      0 days 0:00:00.000
  26:2960      0 days 0:00:00.000
  19:2a10      0 days 0:00:00.000
  16:2a70      0 days 0:00:00.000
  15:24a8      0 days 0:00:00.000
  14:2208      0 days 0:00:00.000
  13:2bcc      0 days 0:00:00.000
  12:2a6c      0 days 0:00:00.000
   9:1a38      0 days 0:00:00.000
   8:2a98      0 days 0:00:00.000
   6:1200      0 days 0:00:00.000
   3:2af8      0 days 0:00:00.000
 Kernel Mode Time
  Thread       Time
  11:2ad0      0 days 0:00:03.650
  10:20dc      0 days 0:00:02.230
  33:29bc      0 days 0:00:00.686
  34:18cc      0 days 0:00:00.577
  21:2880      0 days 0:00:00.327
  18:2a04      0 days 0:00:00.327
  24:27e8      0 days 0:00:00.280
  35:2b00      0 days 0:00:00.249
   1:2a84      0 days 0:00:00.218
  30:21d4      0 days 0:00:00.156
  22:2680      0 days 0:00:00.140
   5:2a28      0 days 0:00:00.140
  37:2c14      0 days 0:00:00.124
  23:2618      0 days 0:00:00.109
   2:1ba0      0 days 0:00:00.109
  25:1db8      0 days 0:00:00.093
  20:20f0      0 days 0:00:00.093
  17:29ac      0 days 0:00:00.093
   0:1494      0 days 0:00:00.078
   7:8d4       0 days 0:00:00.062
  32:248c      0 days 0:00:00.046
   3:2af8      0 days 0:00:00.046
  31:ee4       0 days 0:00:00.031
   8:2a98      0 days 0:00:00.031
  38:2f3c      0 days 0:00:00.015
  27:278c      0 days 0:00:00.015
  16:2a70      0 days 0:00:00.015
  15:24a8      0 days 0:00:00.015
  39:215c      0 days 0:00:00.000
  36:2088      0 days 0:00:00.000
  29:53c       0 days 0:00:00.000
  28:26e0      0 days 0:00:00.000
  26:2960      0 days 0:00:00.000
  19:2a10      0 days 0:00:00.000
  14:2208      0 days 0:00:00.000
  13:2bcc      0 days 0:00:00.000
  12:2a6c      0 days 0:00:00.000
   9:1a38      0 days 0:00:00.000
   6:1200      0 days 0:00:00.000
   4:2620      0 days 0:00:00.000 
```

当我发出`g`继续该过程时，我得到

```
0:039> g
(2944.1d6c): Break instruction exception - code 80000003 (first chance)
mscorlib_ni+0x367240:
000007fe`f8337240 cc              int     3 
```

并且进程保持暂停。我该如何继续？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:12:19.710

首先，您需要修复您的符号。附加 windbg 后，执行以下操作：

.symopt+0x100;.symfix c:\websym;.reload

我的猜测是线程 39 是注入的调试器线程，因此可以在点击 g 后获得一次中断指令。如果你不止一次得到它，那就有问题了。

但在点击 g 之前，切换到 !runaway 输出中的第一个线程（在您的情况下为 33），如下所示：~33s

然后加载正确的 .NET 调试器扩展 dll。如果在 .NET 4 之前，请执行以下操作：

.loadby sos.dll mscorwks

如果 .NET 4 及更高版本执行以下操作：

.loadby sos.dll clr

现在执行此操作以查看托管堆栈：

!clrstack

然后按g，让它运行几秒钟，再次闯入，然后再次发出！clrstack。重复几次，让您了解线程 33 正在做什么。请注意，每次中断时，您都必须在发出 !clrstack 之前切换回线程 33。

如果未显示托管堆栈，则发出 kb 以查看本机堆栈。

您可能还想查看您是否为该线程管理了异常。!pe 将为您执行此操作（在您切换到该线程后）。您还可以转储所有托管异常对象。我认为命令是！dumpallexceptions，但请检查帮助（使用！帮助）以确定。请注意，.NET 在启动时预分配了 3 个异常对象，这些异常对象（大多数情况下）可以在 !dumpallexceptions 输出中被忽略（其中一个与内存不足的情况有关）。

马克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:38:20.527

我认为 clr 异常是阻止您继续该过程的原因。使用“sxi clr”抑制这些异常并继续

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:04:51.350

一个简单的技巧是在 CPU 使用率高时捕获一组挂起转储（一分钟间隔），然后在 WinDbg 中对其进行分析。使用 runaway 可以查看哪些线程消耗 CPU 最多，然后检查其调用堆栈以找到可能的原因。

您所做的称为实时调试，对于初学者来说并不容易。

# sql - VBA 查询中臭名昭著的“无效使用 Null”

> ID：10177680
> 
> 赞同：2
> 
> 时间：2012-04-16T16:05:21.510
> 
> 标签：sql, ms-access, vba, null

先上代码：

```
 bncSql = "UPDATE mrTool " & _
        " SET mrTool.Action = 'Y', mrTool.TQA = FALSE," & _
        " mrTool.OPID = 'SYS', mrTool.ReasonCode = 'AOK'," & _
        " mrTool.History = 'AOK'" & _
        " WHERE (Nz(CCur([Amount]),0) + Nz(CCur([SFS]),0) <=  0" & _
        " AND mrTool.Action Is Null);"
    DoCmd.RunSQL bncSql 
```

mrTool.Action 被定义为 Text(1) （即单个字符），这是我假设的位置。“Is Null”似乎在其他任何地方都有效 - 当我用“=''”（零长度字符串）替换它时，认为可能是因为它是 Text 而不是 Variant，它完全停止工作。

我应该补充一点，我在其他地方有相同的格式，它似乎工作正常 - 在我使用它之前，它不会在其他 23 个地方给我一个运行时错误。因此，我认为这可能是 SFS 和 Amount 中的错误，因此是 Nz()，但这无济于事 - 仍然出现错误。

我很茫然...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:12:30.943

也许？

```
WHERE (CCur(Nz([Amount],0)) + CCur(Nz([SFS],0)) <=  0 
```

# php - 使用 OpenID 而不要求用户知道他们的 OpenID url？

> ID：10177682
> 
> 赞同：2
> 
> 时间：2012-04-16T16:05:22.633
> 
> 标签：php, zend-framework, authentication, openid

我正在实现一个 OpenID 提供程序，并让它在标准 OpenID 请求中顺利运行（最终用户知道他们的 OpenID url）。但是，我希望消费者能够在不预先知道最终用户 OpenID url 的情况下使用提供者，这将在用户登录时确定。

我发现通过阅读[这个 stackoverflow question](https://stackoverflow.com/questions/8890811/how-to-use-openid-without-asking-user-for-his-openid-url)理论上这是可能的，但是它并没有为我提供很多细节来收集自己开发所需的信息，事实上它是 DotNet 并没有帮助。

谁能指导我到哪里可以找到有关如何设置的更多信息？

我正在使用 Zend Framework，但在它的文档中找不到任何有用的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:28:01.353

OpenID*是*一个 URL，所以我看不出您如何在不知道它的情况下登录，而不是在不知道传统身份验证用户名的情况下登录。

已经声明，如果您的目标只是帮助用户，也许您可​​以提供某种下拉列表，列出常见的提供者，询问相关部分，并允许用户填写它们？

由于 OpenID 是去中心化的，并且任何站点都可以成为 OpenID，因此无法预测所有可以使用的 URL，但您当然可以涵盖流行的 URL。[事实上，这篇 SO 帖子涵盖了它们。](https://stackoverflow.com/questions/1116743/where-can-i-find-a-list-of-openid-provider-urls)

“其他”选项可以允许直接输入 URL 来处理所有其他情况。

我想说的是，加上[Zend_OpenId_Consumer/Zend_Auth 集成文档](http://framework.zend.com/manual/en/zend.openid.consumer.html)将是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:05:33.893

消费者可以指定提供者“应该选择属于最终用户的标识符”。在这种情况下，提供者将选择属于用户的标识符（即最有可能登录到提供者的用户），而消费者不必提供 openid url。请参见第*9.1 节。请求参数，* [OpenId 规范页面](http://openid.net/specs/openid-authentication-2_0.html)上的项目*openid.identity*。基本上，参数 openid.identity 设置为。`http://specs.openid.net/auth/2.0/identifier_select`

关于如何设置的问题：有关更多信息，您应该阅读[OpenId 2.0 的规范](http://openid.net/specs/openid-authentication-2_0.html) 此外，阅读[Google 的 OpenId 开发人员页面](https://developers.google.com/accounts/docs/OpenID)可能会很有用。

# java - 使用哪种设计模式（我需要类似中介模式的东西）？

> ID：10177683
> 
> 赞同：6
> 
> 时间：2012-04-16T16:05:26.917
> 
> 标签：java, design-patterns, architecture

我有一个带有很多控件的 GUI 应用程序。它们中的大部分都有事件，并且控件在逻辑上连接到每个那里。例如，我有 5 个组合框。如果我在**cb1**和**cb3**中选择某些内容，则**cb2**必须更改其可用值的列表。如果我在**cb2**和**ch4**中选择某些东西，它们**cb5**必须加载其可用值列表。我在网上找到的所有文章都说我应该使用*中介模式*在这种情况下。但在所有这些文章中，调解员 - 就​​像一个上帝类，它了解所有控制的一切，并决定在发生某些事件时应该做什么。如果我有 5-6 个控制器 - 一切都很好。但是如果我有 20 或 40 个控件呢？我猜在这种情况下，中介类会变成怪物。很难用它做点什么（修改或添加新功能）。

是否有任何其他模式或中介路径的好例子，这将有助于解决这种情况？

PS：对不起，如果这个主题已经存在问题 - 有太多同名的问题，从所有这些主题中找到我真正需要的东西并不容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:34:15.780

调解器确实是这里的正确选择，但是还有使用 OBSERVER 模式的替代选项，它允许您保持逻辑分离。（cb2 观察 cb1 并做出适当反应，cb3->cb2 等）。

使用 OBSERVER 模式，您一次只能链接 2 个控件，这就像链。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:31:39.447

尝试将属于自定义组件（扩展 JComponent 或 JPanel）的组件组合在一起。这些自定义组件侦听其子级的事件并在必要时更新其他子级（-> 它们成为调解器）。自定义组件也可以触发它们自己的自定义事件，从而通知它们的父 Mediator。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:13:47.310

使用不同的动作作为策略[Strategy Pattern并从](http://en.wikipedia.org/wiki/Strategy_pattern#Example)**Mediator**调用特定的策略，这样如果你明天需要添加更多的控制器，你只需要更改几行代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T16:07:17.737

[中介者模式 - Wiki](http://en.wikipedia.org/wiki/Mediator_pattern)

如果来自维基百科，但它很简单并且易于理解。

当我过去研究模式时，这个代码是最好的。简单而高效...是的，对于您所描述的，我会使用**调解器模式**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T18:50:05.300

gof 书 说：

" ... 相关模式

Facade (185) 与 Mediator 的不同之处在于它抽象了对象子系统以提供更方便的接口。它的协议是单向的；也就是说，Facade 对象向子系统类发出请求，反之则不然。相比之下，Mediator 实现了同事对象不提供或不能提供的协作行为，并且协议是多向的。

同事可以使用 Observer (293) 模式与调解员进行通信。……”。

我怀疑观察者和调解者或门面的组合会很好地工作。

请记住，设计模式的品质之一是每次您实现一种模式时，它们都是不同的。

# apache - Apache虚拟主机变成动态IP

> ID：10177688
> 
> 赞同：1
> 
> 时间：2012-04-16T16:05:39.917
> 
> 标签：apache, configuration, webserver, virtualhost

我想要实现的是以下内容：

在任何给定的时间点，如果局域网中的任何人，包括我，知道我的 IP 地址和他或她拥有的主机文件`192.168.1.xxx beta.example.com`，通过访问`beta.example.com`他或她将从我的 apache 获得 beta.example.com。这个除了我，我可以有我自己的`127.0.0.1 beta.example.com`。

我试过这个，它只在本地有效。对于外部连接，它默认为`DocumentRoot`，如果用户尝试访问，应用程序将无法正确获取其路径`http://beta.example.com/example.com/`。

```
 Listen *:80
    ServerName localhost:80
    DocumentRoot "c:/www"

<VirtualHost beta.example.com>
    DocumentRoot "c:\www\example.com"
    ServerName beta.example.com
</VirtualHost>

<Directory "c:\www\example.com">
    Options +FollowSymLinks
    AllowOverride All
</Directory> 
```

我应该改变什么？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:42:20.993

做到了。很简单。替换`<VirtualHost beta.example.com>`为：

```
 NameVirtualHost *:80
   <VirtualHost *:80> 
```

# jquery - 缓动滚动上的旋转动画

> ID：10177691
> 
> 赞同：0
> 
> 时间：2012-04-16T16:05:57.763
> 
> 标签：jquery, css, easing

我有一个元素，我正在使用 jquery/css3 在滚动时旋转。问题是当你滚动时它有点跳动，当你停止时它立即停止。我希望它更流畅地播放旋转，当您开始滚动时开始，然后在您停止滚动后逐渐停止，而不是每次滚轮移动时仅旋转一组度数。我的代码和链接如下：

[http://pollenbrands.com/rjj/](http://pollenbrands.com/rjj/)（向下滚动至 100% 水果）

```
var angle = 1;
jQuery(window).scroll(function() {
    jQuery(".rotate").css('-moz-transform', 'rotate('+angle+'deg)').css('-webkit-transform', 'rotate('+angle+'deg)').css('-o-transform', 'rotate('+angle+'deg)').css('-ms-transform', 'rotate('+angle+'deg)');
    angle+=6;
    if(angle==360) {
        angle=0;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:18:07.990

您是否尝试过使用 .animate？这可能会帮助您控制这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:28:14.140

实现此目的的一种*粗略而快速的方法是延迟滚动处理程序的执行。*

```
$(window).scroll(function() {
    setTimeout(function(){
        //Call scroll functionality here..
    }, 300);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T14:41:26.163

我同意neuDev33。对滚动功能使用动画和缓动。像easeOutCirc 这样的东西可能会很好用。这里有一个很棒的备忘单。

[http://easings.net/](http://easings.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T17:21:35.680

似乎问题可能在于将动画附加到滚动功能。每次用户滚动时都会调用它，因此它会在前一个有机会完成之前开始一个新的转换。当用户第一次滚动时，您可能想尝试触发一个更长的事件（例如旋转更大的度数），然后推迟任何未来的事件，直到第一个事件有时间完成。根据您的缓动函数，您可以使用带有标志的 setTimeout() 方法。

# dynamic - 如何根据变量的值动态构造 ExtJS 对象？

> ID：10177694
> 
> 赞同：0
> 
> 时间：2012-04-16T16:05:59.710
> 
> 标签：dynamic, extjs, constructor

我有以下代码。我想根据是否选择 url.local 或 url.remote 使代理的类型和 url 属性动态化。

```
var url = {
    local: './grid-filtering/sample.json',  // static data file
    remote: '/Customer/Get'
};

Ext.require('sbpm.model.Product');
Ext.define('sbpm.store.Customer', {
    extend: 'Ext.data.JsonStore',
    constructor: function (cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({

            // store configs

            autoDestroy: true,
            storeId: 'Customer',
            model: 'sbpm.model.Product',
            proxy: {
                type: 'jsonp',
                url: url.local,
                reader: {
                    root: 'data',
                    totalProperty: 'total'
                }

            },
            remoteSort: false,
            sorters: [{
                property: 'company',
                direction: 'ASC'
            }],
            pageSize: 50
        }), cfg]);
    } 
}); 
```

换句话说，我想做的是指定（在伪代码中）：

```
if (url.local)
{
 proxy:{
  type: 'jsonp'
  url: url.local,
  // etc
 }

}
else if (url.remote)
{
 proxy:{
  type: 'rest'
  url: url.remote,
  // etc
 }
} 
```

很抱歉，但我不知道要添加什么样的上下文来进一步解释这个场景，或者如果 stackoverflow 只是使用某种文本/代码比率来衡量它，看到我已经解释过这会很烦人场景非常简洁，如果人们不理解，可以提出更详细的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:40:02.960

`AbstractStore`类有两个方法`setProxy()`/ `getProxy()`。您可以使用它们即时切换代理。如果你需要更多的东西——比如在里面有两个不同的代理并在它们之间切换而不重新创建——你可能需要扩展现有的类。

# fonts - 任何人都可以在 Windows 上为 gVIM 推荐更易读的默认字体吗？

> ID：10177701
> 
> 赞同：2
> 
> 时间：2012-04-16T16:06:28.297
> 
> 标签：fonts, vi, vim

我发现 Windows 上 gVim 中使用的默认字体与其他编辑器相比显得原始且不可读。我热衷于坚持使用 vim，因为它是我在 *nix 世界中选择的编辑器，所以有人可以推荐更好的字体吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:16:26.880

（这个问题可能属于超级用户，但因为我有同样的反应......）

这是真的，默认字体几乎是咬人的。我使用 Consolas，根据[Wikipedia](http://en.wikipedia.org/wiki/Consolas) ，它是 Windows 上唯一一个带有斜线穿过零的标准字体。我相信它是专门为开发人员设计的；不知道我在哪里听到的。

这是在我的 .gvimrc 中（当然由平台保护）：

```
:set guifont=Consolas:h9:cANSI 
```

# actionscript-3 - Adobe AIR 文件权限的详细信息是什么？

> ID：10177702
> 
> 赞同：1
> 
> 时间：2012-04-16T16:06:29.610
> 
> 标签：actionscript-3, file-io, air

我需要知道***adobe AIR 应用程序***的文件权限的详细信息。

具体来说，它可以在哪里写入文本文件？本地系统上的任何地方？我听说 Adob​​e 有一组“*沙盒权限*”，但这些只是让我感到困惑，因为我不知道它们适用于何处。

此外，我想知道您是否需要某种特殊权限才能**附加**到系统上某处的文件。

任何帮助/意见将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:17:41.447

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)

您几乎可以在任何地方编写文本文件或编辑文本文件。我知道的唯一例外是 applicationDirectory（安装您的应用程序的目录），但即便如此，也有解决此问题的方法（但建议不要在 applicationDirectory 中乱来）。编辑文件不需要特殊权限。检查上面的链接以获取写入文本文件的适当位置（通常是 applicationStorageDirectory 或 documentsDirectory）。

我不太确定的一个问题是 Windows Vista/7 UAC 权限，您有时需要授予管理员访问权限来编辑文件。我不确定 AIR 如何处理这个问题（可以想象以管理员身份运行 AIR 应用程序应该可以工作）。

# java - Java：何时将服务器层组件作为守护进程 JAR 运行，何时使用 EAR

> ID：10177705
> 
> 赞同：0
> 
> 时间：2012-04-16T16:06:40.973
> 
> 标签：java, deployment, architecture, jar, ear

维基百科将企业档案 (EAR) 描述为：

> ...Java EE 使用的一种文件格式，用于将一个或多个模块打包到单个存档中，以便将各种模块部署到应用程序服务器上同时且连贯地进行。

但我仍然想知道在尝试确定将 Java 组件部署为“**守护程序 JAR** ”还是 EAR 时应用了哪些“逻辑规则”。我所说的“守护进程 JAR”是指一个无头、可执行的 JAR，它被编码为通过端口侦听和通信，并且它像任何传统的守护进程/服务一样永久地存在和运行服务器端。

显然，部署到 JBoss 或 GlassFish 之类的应用程序服务器是有好处的，否则 EAR 和应用程序服务器将不存在！

**我想知道应该考虑哪些具体考虑因素，以帮助开发人员决定如何打包/部署后端组件。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:25:29.403

好吧，应用服务器例如负责所有的网络工作。很难以稳定、可扩展的方式实现，所以我强烈建议使用应用服务器而不是尝试实现自己的服务器。

EJB 和 Web 服务只是一些带有一些注释的 POJO。甚至数据库事务和安全/访问权限也可以通过 EJB 上的一些注释来控制。

# .net - 没有 RDC 的 Windows 和 GUI 测试上的 Jenkins

> ID：10177708
> 
> 赞同：18
> 
> 时间：2012-04-16T16:07:09.403
> 
> 标签：.net, continuous-integration, hudson, jenkins, white-framework

我们有 Jenkins 的主从配置。我们的 .NET 项目是由在 Windows 上运行的从属 Jenkins 实例构建的。

有一堆 GUI 测试，但是它们似乎只有在远程桌面连接 (RDC) 会话打开时才会运行。

当尝试在没有 RDC 的情况下运行测试时，Jenkins 没有显示任何测试进度。然而，然后，我连接到 Slave 的桌面，可以看到启动的应用程序的主窗口，但是 UI 测试框架（白色）无法执行任何操作。

Jenkins 从站通过 Java Web Start 启动。

我在几个网站上读到，不幸的是，没有 RDC 会话就无法运行 GUI 测试。

我只是想确认这是真的，并想知道是否有任何解决方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T19:54:47.427

您的从机必须在桌面上才能正常运行测试。我们遇到了同样的问题。

解决方案是让测试机器启动并自动登录到桌面。为了确保测试仅在桌面可用后开始，我们添加了一个计划任务，设置为在用户登录时运行，这将通过 Java Web Start 启动 Jenkins 从站。这样，Jenkins 只会在桌面运行时看到从属服务器。之后，一切正常。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-30T02:27:12.777

我有一个运行不同类型的 GUI 测试、win32、swing、selenium 的 Jenkins 集群。他们以无人值守的方式 24x7 运行数千个测试。这是我的解决方案：

1.  如何保持 GUI 测试有效 - RDC 不起作用，GUI 应用程序只有在 RDC 会话处于活动状态时才能正常运行。我已经尝试了不同的方法，所以不要费心再试一次。在 RDC 窗口最小化或断开连接后，您的测试将中断。到目前为止的解决方案是将 VNC 服务器（我使用的是 UltraVNC）安装为服务，并确保它在登录期间启动。还要确保您没有使用 RDC 连接到您的测试机器，因为 RDC 会中断 VNC 会话。如果可能，也将其与 VNC 客户端连接。但这取决于你。我所做的是当我需要在机器上调试某些东西时，我会对其进行 RDC 并重新启动它以确保设置了 #2 和 #3。

2.  自动登录 - SysInternalsSuite 中有一个工具 autologon.exe，在您的从站上运行它

3.  自动注册奴隶 - 你需要的是 Swarm 插件 - [https://wiki.jenkins-ci.org/display/JENKINS/Swarm+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Swarm+Plugin)。编写一个简单的批处理并在您的启动文件夹中放置一个快捷方式。每次您的机器自动登录时，它都会自动注册为从机。

我实际上将 #2 和 #3 组合为一个简单的批处理文件：

```
autologon.exe <user> <domain> <password>
REM Here to make sure the logonCount is properly generated
REG ADD "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v AutoLogonCount /t REG_DWORD /d 0xFFFF /f

start /min java -jar I:\CDC\jenkins\swarm-client-1.9-jar-with-dependencies.jar -executors 1 -fsroot c:\Jenkins -labels "Prod Win7 %ComputerName%" -master <Jenkins URL> -name farm-%ComputerName% -username <username> -password <password> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-27T14:35:28.030

在没有 Windows 自动登录的情况下，还有另一种方法（在少数机器上对我有用）。

1\. 转到**计算机管理 -> 服务和应用程序 -> 服务 -> Jenkins Slave -> 属性**
2\. 在**登录**选项卡中选择**本地系统帐户**并选中**允许服务与桌面交互3\. 单击** **确定**
关闭此窗口，然后重新启动**Jenkins 从**服务 4\. 转到您的测试应用程序所在的目录，然后在您的应用程序可执行文件上选择Properties 5. **在**Security**选项**卡上单击**Edit...** 6\. 在新窗口中单击**Add..** 7\. 在新窗口中单击 **************位置...**并选择本地计算机（列表中最顶部的选项），单击**确定**
8\. 将**本地服务**放在窗口的白色区域并单击**检查名称**，单击**确定**
9\. 允许该用户**完全控制**，单击**确定**，关闭所有windows

这应该就是一切。请让我知道这对你有没有用。************

 ***** * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-18T08:44:16.763

正如其他答案已经说明的那样，需要一个配置，其中 Windows 机器自动登录到真实用户，有关详细信息，请参阅其他答案。然而这对我来说还不够，我需要[设置一个 UltraVNC 服务器](http://wiki.imacros.net/How_to_keep_the_Windows_desktop_active)作为服务运行来解决问题。

在该网站上提到，通过 RDP 登录是该技巧的一个问题，即与 VNC 连接或在 RDP 访问后重新启动。****

# asp.net-mvc - 无法部署 ASP.NET MVC 3

> ID：10177714
> 
> 赞同：0
> 
> 时间：2012-04-16T16:07:32.160
> 
> 标签：asp.net-mvc, deployment

我正在尝试使用 asp.net MVC 3 和 jQuery Mobile 实现 iPad 应用程序。谁能帮我弄清楚为什么我不能部署我的应用程序？

我的服务器：Windows 2008 R2 标准 64 位 IIS：7.5 应用程序池：ASP.NET v4.0

MvcDiagnositics 信息如下

* * *

Microsoft ASP.NET MVC 诊断信息

此页面旨在帮助诊断与不匹配或冲突的 ASP.NET MVC 二进制文件相关的常见错误。

如果发现已知问题，它将在下方以红色文本显示。有关 ASP.NET MVC 或此实用程序的问题或问题，请访问[http://forums.asp.net/1146.aspx](http://forums.asp.net/1146.aspx)的 ASP.NET MVC 论坛。

**环境信息**

**操作系统：** Microsoft Windows NT 6.1.7600.0

**.NET Framework 版本：** 4.0.30319.225（32 位）**<----- 这应该是 64 位？？？**

**网络服务器：** Microsoft-IIS/7.5

**集成管道：**错误

**工作进程：** w3wp.exe

**AppDomain：**同质 = True，FullTrust = True

**ASP.NET MVC 程序集信息 (System.Web.Mvc.dll)**

程序集版本：未知版本（3.0.20105.0）

全名：System.Web.Mvc，Version=3.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35

代码库：file:///F:/Projects/Mobile/bin/System.Web.Mvc.DLL

部署：bin-deployed

ASP.NET MVC 期货程序集信息 (Microsoft.Web.Mvc.dll)

尚未将 ASP.NET MVC Futures 程序集加载到此应用程序中。为此下载

ASP.NET MVC Futures 版本不可用。MVC Futures 程序集的预发布版本

一旦该版本的 ASP.NET MVC 进入 RTM，就不再可用。

所有加载的程序集

加载了 48 个程序集。

•App_global.asax.ur2ey1at，版本=0.0.0.0，文化=中性，PublicKeyToken=null [ver = n/a，GAC = False]

•App_Web_umu0ymeo，版本=0.0.0.0，文化=中性，PublicKeyToken=null [ver = n/a，GAC = False]

•EntityFramework，版本=4.1.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.1.10331.0，GAC = False]

•FiftyOne.Foundation，版本=2.0.6.2，文化=中性，PublicKeyToken=e0b3a8da0bbce49c [ver = 2.0.6.2，GAC = False]

•Microsoft.Build.Utilities.v4.0，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a [ver = 4.0.30319.1，GAC = True]

•Microsoft.CSharp，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a [ver = 4.0.30319.1，GAC = True]

•Microsoft.JScript，版本=10.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a [ver = 10.0.30319.1，GAC = True]

•Microsoft.Web.Infrastructure，版本=1.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 1.0.20105.407，GAC = False]

•移动，版本=1.0.0.0，文化=中性，PublicKeyToken=null [ver = 1.0.0.0，GAC = False]

•mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.0.30319.225，GAC = True]

•SMDiagnostics，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.0.30319.1，GAC = True]

•系统，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.0.30319.1，GAC = True]

•System.Activities，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.1，GAC = True]

•System.ComponentModel.DataAnnotations，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.1，GAC = True]

•System.Configuration，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a [ver = 4.0.30319.1，GAC = True]

•System.Core，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.0.30319.1，GAC = True]

•System.Data，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.0.30319.1，GAC = True]

•System.Data.DataSetExtensions，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.0.30319.1，GAC = True]

•System.Data.Entity，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.0.30319.1，GAC = True]

•System.Drawing，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a [ver = 4.0.30319.1，GAC = True]

•System.EnterpriseServices，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a [ver = 4.0.30319.1，GAC = True]

•System.IdentityModel，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.0.30319.1，GAC = True]

•System.Runtime.Caching，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a [ver = 4.0.30319.1，GAC = True]

•System.Runtime.DurableInstancing，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.1，GAC = True]

•System.Runtime.Serialization，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.0.30319.1，GAC = True]

•System.ServiceModel，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.0.30319.1，GAC = True]

•System.ServiceModel.Activation，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.1，GAC = True]

•System.ServiceModel.Activities，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.1，GAC = True]

•System.ServiceModel.Web，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.1，GAC = True]

•System.Web，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a [ver = 4.0.30319.206，GAC = True]

•System.Web.Abstractions，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.1，GAC = True]

•System.Web.ApplicationServices，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.1，GAC = True]

•System.Web.DynamicData，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.1，GAC = True]

•System.Web.Extensions，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.206，GAC = True]

•System.Web.Helpers，版本=1.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 1.0.20105.407，GAC = False]

•System.Web.Mobile，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a [ver = 4.0.30319.1，GAC = True]

•System.Web.Mvc，版本=3.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 3.0.20105.0，GAC = False]

•System.Web.Razor，版本=1.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 1.0.20105.407，GAC = False]

•System.Web.RegularExpressions，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a [ver = 4.0.30319.1，GAC = True]

•System.Web.Routing，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.1，GAC = True]

•System.Web.Services，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a [ver = 4.0.30319.1，GAC = True]

•System.Web.WebPages，版本=1.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 1.0.20105.407，GAC = False]

•System.Web.WebPages.Deployment，版本=1.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 1.0.20105.407，GAC = False]

•System.Web.WebPages.Razor，版本=1.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 1.0.20105.407，GAC = False]

•System.WorkflowServices，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.1，GAC = True]

•System.Xaml.Hosting，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 [ver = 4.0.30319.1，GAC = True]

•System.Xml，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.0.30319.1，GAC = True]

•System.Xml.Linq，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089 [ver = 4.0.30319.1，GAC = True]

诊断版本：2010 年 12 月 10 日星期五 (v11)

## 报告生成时间：2012 年 4 月 16 日星期一上午 10:08:33

我的 Global.asax 信息如下

routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapRoute("Default", // 路由名称

"{controller}/{action}/{id}", // 带参数的 URL

new { controller = "Home", action = "Index", id = UrlParameter.Optional } // 参数默认值

);

* * *

我的 Web.config 信息如下

* * *

当我从本地机器测试它时，我可以看到这个默认页面，如下所示

欢迎来到移动主页

以下是有关请求设备的一些信息：

•屏幕宽度：640

•屏幕高度：480

•布局引擎：三叉戟

有关 Request.Browser 属性的详细信息，请参阅 MSDN。

有关用户指南，请参阅 51Degrees.mobi。

请参阅 51Degrees.mobi 设备数据了解其他数据属性的详细信息并获取每周数据更新。

* * *

请求设备不是移动设备。该页面必须是直接请求的。

## 尝试从移动设备或移动设备模拟器访问该网站。可以在此处找到流行的移动模拟器列表。

我试图在服务器上安装 aspnet_regiis.exe -i

我得到这个错误如下

C:\Windows\Microsoft.NET\Framework64\v4.0.30319>aspnet_regiis.exe -i 开始安装 ASP.NET (4.0.30319)。................完成安装 ASP.NET (4.0.30319)。安装程序在操作过程中检测到一些错误。有关详细信息，请阅读安装日志文件 C:\Users\ADMINI~1.HIS\AppData\Local\Temp\2\ASPNETSetup_00009.log

* * *

**那是因为 64 位的 aspnet_regiis.net 没有正确安装吗？

我一直试图在服务器上部署我的应用程序 3 天，但我没有找到任何运气。

请帮我找出问题所在。

非常感谢您。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:51:19.467

尝试这个

在您的服务器上安装 mvc 框架并将您的网站发布到一个文件夹并将该文件夹复制到您的服务器。

1.  打开 IIS 管理器
2.  右键点击“网站”</li>
3.  点击“添加网站...”</li>
4.  输入站点名称
5.  点击“选择...”按钮选择一个应用程序池
6.  选择“ASP.NET v4.0”（管道模式：集成）
7.  在“内容目录”组中输入/浏览网站部署文件夹的路径（您将其复制到服务器的位置）
8.  点击“测试设置...”按钮以验证凭据是否符合要求
9.  在“绑定”组中输入类型、IP 地址、端口和主机名
10.  在左侧的树形视图中选择新网站
11.  双击功能视图（中间视图）中的“身份验证”图标
12.  在新视图中选择“匿名身份验证”行
13.  在操作面板（右侧）中单击“编辑...”
14.  在弹出视图中选择“Application Pool Identity”单选按钮，点击 OK
15.  可选：回收应用程序池并重新启动网站

# windows - 在 Windows XP 上手动安装 Perl 模块

> ID：10177715
> 
> 赞同：-2
> 
> 时间：2012-04-16T16:07:38.897
> 
> 标签：windows, perl, module, windows-xp, installation

（已更新，请看EDIT，谢谢！）

首先我想指出我不能使用任何自动化工具来安装模块，因为代理不会解析名称。我已经问过如何在这里解决这个问题，但无济于事。

所以 AFAIK 我必须下载 Perl 模块的 .tar.gz 包，解压缩，然后运行：

```
perl Makefile.pl
make
make test
make install 
```

所以这就是我得到的：

```
D:>perl Makefile.PL
Set up gcc environment - 4.5.2

It looks like you don't have either nmake.exe or dmake.exe on your PATH,
so you will not be able to execute the commands from a Makefile.  You can
install dmake.exe with the Perl Package Manager by running:

    ppm install dmake

Writing Makefile for PowerBuilder::ORCA 
```

我不知道为什么在我安装 nmake 的时候它说 taht...

所以下一个命令（使用 NMAKE）

```
D:>nmake

Microsoft (R) Program Maintenance Utility   Version 1.50
Copyright (c) Microsoft Corp 1988-94\. All rights reserved.

syntax error at -e line 1, near "'755')
"
Missing right curly or square bracket at -e line 1, at end of line
Execution of -e aborted due to compilation errors.
NMAKE : fatal error U1077: 'C:\WINDOWS\system32\cmd.exe' : return code '0xff'
Stop. 
```

好的，现在使用 MAKE（来自 MinGW）：

```
D:>C:\MinGW\msys\1.0\bin\make
make: rem: Command not found
make: *** [blibdirs] Error 127 
```

我的 Perl 版本：

```
This is perl 5, version 12, subversion 3 (v5.12.3) built for MSWin32-x86-multi-thread
(with 9 registered patches, see perl -V for more detail) Copyright 1987-2010, Larry 
Wall Binary build 1204 [294330] provided by ActiveState http://www.ActiveState.com 
Built Feb 9 2011 14:38:22 
```

关于为什么会发生这种情况的任何提示？提前致谢！

编辑：感谢 Sinan Ünür，我编译了该模块。我用 安装它`dmake install`，但在导入它时，它说：

`Compilation failed in require`

执行时说：

`Can't load 'C:/Perl/site/lib/auto/PowerBuilder/ORCA/ORCA.dll' for module PowerBuilder::ORCA: load_file:El acceso a la dirección de memoria no es válido at C:/Perl/lib/DynaLoader.pm line 201`（*无效的内存访问*）

我认为这是因为我正在针对错误的 Perl 版本进行编译，但怎么会呢？我使用了 5.12 的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:22:49.193

那个版本`nmake`比较老了。我的说`10.00.30319.01`。此外，如果您没有与之配套的编译器套件，或者如果您拥有的编译器套件与构建您的编译器套件不兼容，那么`perl`拥有`nmake`不会有什么不同。

我假设你已经安装了 ActivePerl，但你没有提到版本。`MinGW` `make`因为它不能处理为`nmake`or编写的 makefile `dmake`。

如果您有 ActivePerl 5.10，您可以获取此[PPD](http://trouchelle.com/ppm10/unstable/PowerBuilder-ORCA.ppd)和此[存档](http://trouchelle.com/ppm10/unstable/MSWin32-x86-multi-thread-5.10/PowerBuilder-ORCA-0.05.zip)，将 PPD 放在一个目录中，并将 ZIP 放在该目录下的相应目录中并用于`ppm`安装它。

否则，您将不得不找到一种方法，将带有适当构建工具的编译器套件安装到该机器上。

你的 MinGW 安装有`dmake`吗？仍然无法保证`gcc`安装中的 与用于构建的编译器兼容`perl`，但可能值得一试。

你真正需要的是[`ppm install MinGW`](http://www.activestate.com/blog/2009/01/ppm-install-mingw).

[该线程](http://code.activestate.com/lists/perl-win32-users/32477/)可能会有所帮助：

> 问题是我的主计算机没有直接连接到互联网，所以我不能发出“ppm install MinGW”命令。

请记住，这些`ppd`文件特定于`perl`版本，因此您可能必须修复该答案中提到的路径。我不能为你这样做，因为你，AFAIK，你还没有告诉我们你的`perl`版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:28:12.237

据我所知，当您看到“设置 gcc 环境 - 4.5.2”时，它正在重新配置 Perl 以使用 MinGW 和`dmake`.

您是否有理由不简单地执行以下操作？

```
cpan PowerBuilder::ORCA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:25:30.877

我在 Windows 上很少使用 perl，但根据我的经验，Strawberry Perl 是该环境中可用的最佳实现。我已经将它用于一些相当复杂的程序并安装了多个 CPAN 模块，完全没有问题。如果您遇到重大问题，绝对值得一试。

[http://strawberryperl.com/](http://strawberryperl.com/)

# ssh - Capistrano、sudo 命令和多个密码

> ID：10177716
> 
> 赞同：0
> 
> 时间：2012-04-16T16:07:41.087
> 
> 标签：ssh, capistrano, sudo

我使用 capistrano 运行命令。我有基于 ssh-key 的身份验证，但每台机器上的 sudo 密码不同。

我的 capfile 看起来像这样

```
default_run_options[:pty] = true
role :admin, "server1","server2","server3"

desc "myCommand"
task :mycommand, :roles=>:admin do
    run "cd <workdir> && #{sudo} <command>"
end 
```

当我运行它时，我得到以下输出：

```
 * executing `myCommand'
  * executing "cd <workdir> && sudo -p 'sudo password: ' <command>"
    servers: ["server1", "server2", "server3"]
    [server2] executing command
    [server3] executing command
Password: 
 ** [out :: server2] 
 ** [out :: server3] 
    [server1] executing command
 ** [out :: server1] 
 ** [out :: server3] CMD-OUTPUT
*** [out :: server2] Sorry, try again.
 ** [out :: server2] Sorry, try again.
Password: 
 ** [out :: server2] 
 ** [out :: server1] 
 ** [out :: server2] CMD-OUTPUT
 ** [out :: server1] 
 ** [out :: server1] Sorry, try again.
 ** [out :: server1] sudo: 3 incorrect password attempts
    command finished in 14411ms
failed: "sh -c 'cd <workdir> && sudo -p '\\''sudo password: '\\'' <command>'" on server1 
```

显然 capistrano 假设我在每台服务器上都有相同的密码，这可能吗？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:12:58.993

对于此类自动安装，最常见的做法是使用未设置密码的 SSH 密钥。仅拥有私钥就足以允许登录（因此文件本身实际上就是密码）。

您可以通过在 SSH 配置中限制密钥可以从哪个 IP 地址连接以及允许运行哪些命令来进一步保护系统，以防该文件泄露。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:05:17.123

Capistrano 不支持使用不同密码的多个服务器。您可以将需要通过 sudo 运行的某些命令设置为不需要相关用户的密码，而不是将它们全部更改为相同的密码（不建议这样做）。

要让用户 bob sudo 无需密码即可访问 cat，您可以将其添加到您的 sudoers 文件中：

```
bob ALL=NOPASSWD: /bin/cat 
```

这里显然存在一些安全问题，但我觉得它们比让你的上限用户完全 sudo 访问你所有的盒子要少。请务必通读“man sudoers”并仔细限制您允许使用 NOPASSWD 的命令。

# php - PDO Singleton 类未连接到 sqlite 数据库。PHP

> ID：10177718
> 
> 赞同：0
> 
> 时间：2012-04-16T16:07:43.463
> 
> 标签：php, sqlite, pdo

我有一个 sqlite 数据库，它不是我自己创建的，而是来自一个位于名为“数据库”的文件夹中的可信来源。该文件夹存储在我的 localhost 文件夹中的另一个文件夹中。

但是，当我尝试运行一个简单的应用程序时收到的错误是：

SQLSTATE[HY000] [14] 无法打开数据库文件

有谁知道这是指什么？我怀疑这是我的代码，但它是：

pdo.class.php

```
class pdoClass {
// private statics to hold the connection
private static $dbConnection = null;

// make the next 2 functions private to prevent normal
// class instantiation
private function __construct() {
}
private function __clone() {
}

public static function getConnection() {
    // if there isn't a connection already then create one
    if ( !self::$dbConnection ) {
        try {
        self::$dbConnection = new PDO('sqlite:/database/library.sqlite');
        self::$dbConnection->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
        }
        catch( PDOException $e ) {

            echo $e->getMessage();
        }
    }
    // return the connection
    return self::$dbConnection;
}

}

?> 
```

然后它被另一个类引用，该类需要这个类将任何 sql 数据输出为 XML 格式。非常感谢为什么我的 sqlite 数据库似乎不想打开的任何帮助（文件设置为读取和写入）。

谢谢蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:17:58.417

代码看起来不错，我的感觉是问题出在路径 /database/library.sqlite

这是一条绝对路径。所以il会在文件系统的根目录下搜索数据库目录是不是你想要的？或者数据库可能是与您的运行脚本处于同一级别的目录？在这种情况下 sqlite:database/library.sqlite'

# c++ - QWT 安装错误 - nmake 失败

> ID：10177725
> 
> 赞同：0
> 
> 时间：2012-04-16T16:08:33.160
> 
> 标签：c++, qt, charts, installation, qwt

为了在我的 C++ 项目中显示图表，我想将*QWT*与*Qt*一起使用。我已经从*sourceforge*下载了最新版本的*QWT*，并且我已经从官方网页下载了 MSVC2008（我的编译器）的 Qt 库 4.8.1。现在我想安装*QWT*，但我无法完成安装。我在 SO 上找到的线程并没有解决我的问题。

 **这是*QWT*文档中解释的安装：

```
F.e Qt >= 3.0, MSVC with nmake:
qmake qwt.pro
nmake
cd examples
qmake examples.pro
nmake 
```

我从 Qt 4.8.1 命令提示符启动*qmake ，它创建了三个 *Makefile*s。*现在我应该启动*nmake*，但*nmake*失败，无法找到任何*Qt*头文件。我从 Visual Studio 命令提示符调用*nmake 。*

```
c:\program files (x86)\qwt\include\qwt_array.h(25) : fatal error C1083: Cannot open include file: 'qmemarray.h': No such file or directory
qwt_plot_curve.cpp
c:\program files (x86)\qwt\include\qwt_array.h(25) : fatal error C1083: Cannot open include file: 'qmemarray.h': No such file or directory
qwt_plot_grid.cpp
c:\program files (x86)\qwt\include\qwt_array.h(25) : fatal error C1083: Cannot open include file: 'qmemarray.h': No such file or directory
qwt_plot_item.cpp
c:\program files (x86)\qwt\include\qwt_array.h(25) : fatal error C1083: Cannot open include file: 'qmemarray.h': No such file or directory
Generating Code...
Compiling...
qwt_plot_print.cpp
src\qwt_plot_print.cpp(14) : fatal error C1083: Cannot open include file: 'qpaintdevicemetrics.h': No such file or directory 
```

我做错了什么？我应该如何安装*QWT*才能看到我的*Qt*包含文件？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:25:38.247

好的，我通过下载*QWT*的最新发布候选版本并按照**INSTALL**文件中该版本的说明解决了我的问题。但是为什么旧版本没有编译 - 我没有任何线索！**

# algorithm - matlab的遗传算法如何使用分类精度作为适应度函数

> ID：10177726
> 
> 赞同：2
> 
> 时间：2012-04-16T16:08:54.283
> 
> 标签：algorithm, matlab, classification, genetic-algorithm

我有一个问题，我想用 matlab 遗传算法工具箱解决，但我不知道如何解决。我想以最大化函数的方式计算公式中的 3 系数，该函数是 SVM 分类模型的分类精度。系数的公式是 a*A+b*B+c*C 其中 a,b,c 是我想找到它们的优化值的系数，A,B,C 是数据集的 3 个属性的值. 我也有约束 a+b+c=1 和 a,b,c>0

我应该如何使用遗传算法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:23:18.613

你首先需要随机生成一个初始可行解，作为第一代。

这些可行的解决方案中的每一个都应该满足`a + b + c = 1`和`a, b, c > 0`。

然后根据你的适应度函数，对每一个答案进行评估，选择更好的作为“父母”。对这些父母应用诸如“交叉”或“突变”之类的遗传算法技术，以产生一组后代，作为下一代。

重复这个过程一段时间，比如 500 代。

例如，您可以定义一个变量`fitness`，值越大意味着其对应的候选者是更合适的解决方案。由于您正在最大化此功能，因此：

适应度 = a * A + b * B + c * C

在您的每个 GA 操作（交叉、变异等）中，请记住始终产生满足您的初始约束（`a + b + c = 1`和`a, b, c > 0`）的新候选者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-14T05:33:55.930

根据我的经验，最好的解决方案之一是实现 MATLAB 的 GA。生成 GA 工具箱是为了寻找此类函数的最小值，但通过使用对称性，它会导致您正在寻找的函数的最大化。按着这些次序：

*   A、B、C = 输入数据
*   归一化 a,b,c 导致 a+b+c=1
*   您的适应度函数是*A+b* B+c*C 并定义它
*   定义对你来说是 3 的 nvars
*   将 LB （下边界）放在您的情况 [0 0 0] 中，即 a,b,c>0
*   运行 [x, fval]=ga(...) for x 将是最终结果 x=[abc]

如果有任何问题，请给我发电子邮件以获得更多帮助：mahdigh242@yahoo.com

希望最好的

# c++ - 如何在 C++ 中更快地读取和写入文件？

> ID：10177729
> 
> 赞同：0
> 
> 时间：2012-04-16T16:09:00.353
> 
> 标签：c++, writing

我使用通常的写作方法

```
fp = fopen("file", "w");
fprintf(fp, "P2\n");
sprintf(tmp,...);
fputs(tmp,fp); 
```

和阅读

```
fopen_s(&fp,"file", "r"); 
fscanf(fp,...); 
```

我不得不说我正在处理图像，所以我必须处理像这样的循环

```
for(i = 0; i < height; i++)
{
    for(j = 0; j < width; j++)
    { 
        .........
    }
} 
```

不过这需要很多时间，我正在寻找一种更快的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:13:32.913

也许您可以使用[内存映射文件](http://en.wikipedia.org/wiki/Memory-mapped_file)。

# ruby-on-rails - 为什么升级 Rails 后会出现语法错误？

> ID：10177740
> 
> 赞同：1
> 
> 时间：2012-04-16T16:10:07.850
> 
> 标签：ruby-on-rails, ruby

我有一个工作的 Rails 网站，我有一段时间没有接触过。我现在在 Rails 3.1.0 和 Ruby 1.9.2p290 中打开它。

在我看来，我有这种语法：

```
<%= form_tag ("save", :method=>"get", :id=>"save") do  %> 
```

我现在在处理视图时收到此 Rails 错误：

```
syntax error, unexpected keyword_ensure, expecting $end): 
```

我读过我应该改用这个，但我不知道为什么：

```
<%= form_tag :action=>"save", :method=>"get", :id=>"save" do  %> 
```

这确实向用户呈现了一些东西，但它呈现了一个没有“ `id`”属性的表单，就像以前一样；它应该是“ `save`”。我发现许多链接建议将参数放入`{...}`或执行其他操作，但`id`从未生成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T16:33:47.693

删除之后的空格字符`form_tag`以使其：

```
<%= form_tag("save", :method=>"get", :id=>"save") do  %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:20:07.680

尝试：

```
<%= form_tag url_for(:action=>"save"), :method=>"get", :id=>"save" do %> 
```

# fonts - Safari，自定义字体的字母间距

> ID：10177742
> 
> 赞同：4
> 
> 时间：2012-04-16T16:10:38.497
> 
> 标签：fonts, font-size, custom-font, letter-spacing

使用来自 Google Webfonts 的 Dosis 字体...

```
@import url(http://fonts.googleapis.com/css?family=Dosis:400,300,200,500,600,700,800); 
```

在 Firefox 和 Safari 中进行了广泛的测试之后，虽然我完全清楚我永远不会让这两种浏览器都像我的 Photoshop 中的原始设计视图那样完美地查看它，但我偶然发现了最令人不安的问题：

**字母间距**

无论我尝试什么，我都无法在 webkit 浏览器中获得正确的字母间距。

一个简单的例子：

```
.text-basic {
    font-weight:        200;
    font-size:          16px;
    letter-spacing:     0.52px;
    line-height:        22px;
} 
```

这在 Firefox 中以我想要的方式呈现得非常好（如果我将 FF 修改为 15.5px 字体大小会更好，这没关系[除非有人反对]）。

但是，在 Safari 中，字母间距不起作用。

经过一些研究，我发现它不允许低于 1px 的字母间距，但据说如果我使用*em*度量它会这样做。随它吧。

如果我最多使用：

```
letter-spacing: 0.0618em 
```

没发生什么事。不用找了。字母间距太小了。

但如果我使用：

```
letter-spacing: 0.0619em 
```

突然它突然响起，字母间距太高了。就像一个 10 个单词的文本块突然占用了 50 多个额外的像素宽度。

我不明白。

有谁知道如何解决这一问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:54:22.207

我相信无论您使用什么单位，Safari 都会四舍五入到整个像素。

所以 0.0618em 和 0.0619em 之间的差异是它从 0px 舍入到 1px 的点。

如果你注意到 safari 中的字母空间是相同的，使用 0.0619em 和 1px；

不幸的是，我没有解决方案，但希望这有助于解释您所看到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:56:08.093

这个问题没有合适的解决方案。Safari / Webkit 会错误地渲染这些东西。

[可以在此处找到](https://stackoverflow.com/questions/7811225/is-there-a-way-to-make-css-letter-spacing-0-5-px)另一个涵盖类似问题的线程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T14:38:31.900

这似乎只是由 svg 字体引起的！重新排序您的字体网址，将 svg 放在最后，它应该可以解决问题。但是 svg 字体不会被使用并且渲染可能很脏（呃）

# php - 我应该在哪个目录安装官方的 PHP mongodb 驱动程序？

> ID：10177743
> 
> 赞同：0
> 
> 时间：2012-04-16T16:10:39.280
> 
> 标签：php, mongodb, installation

我在这里找到了官方驱动程序：

```
https://github.com/mongodb/mongo-php-driver 
```

我的问题是：我不知道应该在哪个位置开始安装过程？我在 Mac OS X Snow Leopard 上，我的机器上同时安装了 Mamp 和 Mamp pro。

有人可以帮我安装这个 php mongodb 驱动程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:24:42.403

一般情况应该通过运行 PHP 来解决，并查看它实际在哪里寻找扩展：

```
# php -i | grep extension_dir 
```

在我的（linux）服务器上，这将返回以下行：

```
extension_dir => /usr/lib/php5/20090626 => /usr/lib/php5/20090626 
```

安装任何此类模块的常用方法是使用 Pecl - 例如`pecl install mongo`. 必须手动将其移动到位可能意味着首先有其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:26:07.027

就像任何其他扩展一样，它应该使用“pecl install mongo”安装。这将为您下载并编译驱动程序并将其安装在正确的目录中。然后你需要做的就是在你的 php.ini 中添加一个“extension=mongo.so”。

# maven - 使用 maven 自动生成 jaxb.in dex 文件

> ID：10177744
> 
> 赞同：2
> 
> 时间：2012-04-16T16:10:41.640
> 
> 标签：maven, xml-serialization, jaxb, jaxb2

我有一个包含多个 java 类的包。
我需要使用包的类数据读取 xml 文件。
是否有自动方式（使用 maven）从包的内容生成 ObjectFactory 类或 jaxb.in​​dex 文件？
我知道我可以使用特定的类启动 jaxb 上下文，但这将迫使我在每次添加新类时更改代码。
提前致谢，
阿夫纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:27:19.737

您必须使用 jaxb2-maven 插件来生成其他东西。如果类有适当的注释，那应该不是问题。

```
<groupId>org.codehaus.mojo</groupId>
<artifactId>jaxb2-maven-plugin</artifactId>
<version>1.3.1</version> 
```

见这里：http: [//mojo.codehaus.org/jaxb2-maven-plugin/](http://mojo.codehaus.org/jaxb2-maven-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:14:09.507

在做了一些研究之后，我选择使用 API JAXBContext.newInstance，它接受一个类数组。我编写了一个简短的包装器，它接受包名称并使用 spring 扫描它们以查找相关类（基于 XmlRootElement 注释）。然后我使用上面的 API 来创建 jaxb 上下文。由于这是一项昂贵的操作，您应该考虑缓存这些上下文（它们是线程安全的）以供将来使用。

# silverlight - Silverlight 自定义对象未从 Control 继承

> ID：10177745
> 
> 赞同：0
> 
> 时间：2012-04-16T16:10:42.037
> 
> 标签：silverlight, templates

我试图弄清楚添加自定义 UI 的最佳方法是什么（我不想故意将其称为自定义控件）。我想创建一个自定义控件，但我并不需要对其进行模板化。我想使用其他控件直观地实现它。在我的示例中，我正在尝试创建一个控件，该控件使用 Path 对象进行实现。我希望它在创建时将路径控件“添加”到可视化树中。我希望它公开几个依赖属性，并且我希望它在依赖属性更改时更新 Path 对象。

我的第一种方法是从 Control 继承它，定义路径“Part”，将其定位在“OnApplyTemplate”例程中，并在需要时对其进行更新，但这似乎是一个巨大的矫枉过正。我现在实现的控件能够获取不同的控件模板，但它完全没用，因为该功能必须假定其中有一个路径对象，并且它覆盖了该路径的大部分属性。它还公开了许多我不需要的属性，例如 Background、BorderBrush、BorderThickness，我不使用所有这些属性，而是根据我公开的其他属性进行计算。

所以问题是，我是否应该从 FrameworkElement 继承，如果是，我如何“植入”我想用来实现新的自定义控件的 Path 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:01:51.130

正如[MSDN 所说](http://msdn.microsoft.com/ru-ru/library/ms602714%28v=vs.95%29.aspx)：

> 直接派生并不常见，`FrameworkElement`因为用于 UI 表示的类的某些预期服务（例如模板支持）并未在该级别完全实现。
> 
> ...
> 
> `FrameworkElement`提供对许多基本方案的支持，但在用于在 XAML 中创建 UI 的构建块的意义上，缺少一些“UI 元素”所需的功能。许多这些特性是在`Control`. 或 . 的其他直接子类上实现的`FrameworkElement`。

Silverlight 库的反编译还表明您根本无法在 a 中“绘制”任何内容`FrameworkElement`，如果它的后代，则需要使用它。WPF 中的可能在 Silverlight 中并不总是可能的，尤其是在核心级别。

我会坚持一个`Control`后代。我将 a`TemplatePartAttribute`应用于类定义以指定它需要有一个`Path`对象：

```
[TemplatePart(Name="ThePath", Type=typeof(Path))]
public class MyControl { ... } 
```

然后`OnApplyTemplate`我会检查新模板是否有路径。这样，如果模板中`Path`有多个，它就会知道使用哪个。`Path`

这种方法有一个显着的优势：如果有人（甚至是您）想要在控件的视觉外观上添加一些东西而不改变其逻辑，只需定义一个新模板即可。例如，一个`Path`用盒子包装的模板：

```
<ControlTemplate TargetType="MyControl">
  <Border BorderThickness="{TemplateBinding Control.BorderThickness}"
          BorderBrush="{TemplateBinding Control.BorderBrush}"
          Background="{TemplateBinding Control.Background}">
    <Path Name="ThePath" Stroke="{TemplateBinding Control.Foreground}"
          StrokeThickness="1.5"/>
  </Border>
</ControlTemplate> 
```

至于公开的属性，请尝试至少将最相关的继承属性用于默认行为。

# php - Base32 或 Base64 的自定义实现

> ID：10177757
> 
> 赞同：0
> 
> 时间：2012-04-16T16:12:05.810
> 
> 标签：php, base64, base32

我需要 PHP 中 Base32 或 Base64 的自定义实现（库或类/函数集）

函数应返回 URL 安全字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:28:12.990

由于您无权访问 base64 内置函数，我建议您这样做：

```
<?php

echo bencode("Gabriel Malca");
// R2FicmllbCBNYWxjYQ==

function bencode($string='') {
    $binval = convert_binary_str($string);
    $final = "";
    $start = 0;
    while ($start < strlen($binval)) {
        if (strlen(substr($binval,$start)) < 6)
            $binval .= str_repeat("0",6-strlen(substr($binval,$start)));
        $tmp = bindec(substr($binval,$start,6));
        if ($tmp < 26)
            $final .= chr($tmp+65);
        elseif ($tmp > 25 && $tmp < 52)
            $final .= chr($tmp+71);
        elseif ($tmp == 62)
            $final .= "+";
        elseif ($tmp == 63)
            $final .= "/";
        elseif (!$tmp)
            $final .= "A";
        else
            $final .= chr($tmp-4);
        $start += 6;
    }
    if (strlen($final)%4>0)
        $final .= str_repeat("=",4-strlen($final)%4);
    return $final;
}

function convert_binary_str($string) {
    if (strlen($string)<=0) return;
    $tmp = decbin(ord($string[0]));
    $tmp = str_repeat("0",8-strlen($tmp)).$tmp;
    return $tmp.convert_binary_str(substr($string,1));
}

?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T16:27:48.260

我会使用这些函数来使字符串 URL 安全。

```
function base64_url_encode($input) {
 return strtr(base64_encode($input), '+/=', '-_,');
}

function base64_url_decode($input) {
 return base64_decode(strtr($input, '-_,', '+/='));
} 
```

# ruby-on-rails - Rspec未登录用户进行测试

> ID：10177761
> 
> 赞同：0
> 
> 时间：2012-04-16T16:12:18.917
> 
> 标签：ruby-on-rails, rspec

我正在尝试测试我的控制器的“CREATE”方法以在成功时重定向到 root_url。

```
# templates_controller.rb

require 'open-uri'

class TemplatesController < ApplicationController
  before_filter :authenticate_user! # Authenticate for users before any methods are called

  def create
    @template = current_user.templates.build(params[:template])
    if @template.save
      flash[:notice] = "Successfully uploaded the file."

      if @template.folder #checking if we have a parent folder for this file
        redirect_to browse_path(@template.folder) #then we redirect to the parent folder
      else
        redirect_to root_url
      end
    else
      render :action => 'new'
    end
  end
end 
```

这是我的规格文件

```
describe "POST 'create'" do    

  let(:template) { mock_model(Template) }

  before(:each) do
    controller.stub_chain(:current_user, :templates, :build) { template }
  end

  context "success" do
    before(:each) do
      template.should_receive(:save).and_return(true)
      post :create
    end

    it "sets flash[:notice]" do
      flash[:notice].should == "Successfully uploaded the file."
    end

    it "redirects to the root_url" do
      response.should redirect_to(root_url)
    end

  end
end 
```

这是我得到的错误

```
 TemplatesController POST 'create' success sets flash[:notice]
   Failure/Error: flash[:notice].should == "Successfully uploaded the file."
     expected: "Successfully uploaded the file."
          got: nil (using ==)
   # ./spec/controllers/templates_controller_spec.rb:35:in `block (4 levels) in <top (required)>'

12) TemplatesController POST 'create' success redirects to the root_url
   Failure/Error: response.should redirect_to(root_url)
     Expected response to be a redirect to <http://test.host/> but was a redirect to <http://test.host/users/sign_in>
   # ./spec/controllers/templates_controller_spec.rb:39:in `block (4 levels) in <top (required)>'

13) Template should be valid
   Failure/Error: Template.new.should be_valid
     expected valid? to return true, got false
   # ./spec/models/template_spec.rb:5:in `block (2 levels) in <top (required)>' 
```

该测试显然没有登录用户，因为它重定向到[http://test.host/users/sign_in](http://test.host/users/sign_in)。如何让 rspec 登录用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:35:00.267

我不完全清楚#authenticate_user 是什么！正在做，但我的猜测是你在某些部分的身份验证之上嘲弄：

```
controller.stub_chain(:current_user, :templates, :build) { template } 
```

另一种可能性是您由于之前的另一个过滤器而被重定向，例如在 ActiveRecord::NotFound 时重定向的过滤器。我建议用真实的电话替换模拟/期望，直到你找出问题所在。

您还可以查看 Devise，特别是 Devise::TestHelpers#sign_in，以获取有关身份验证测试的灵感。

# android - 我可以通过支持库在 Android api <9 中使用 Equalizer 类吗？

> ID：10177762
> 
> 赞同：0
> 
> 时间：2012-04-16T16:12:25.317
> 
> 标签：android, api, equalizer

我需要在我的应用程序中显示均衡器，但[`Equalizer`](http://developer.android.com/reference/android/media/audiofx/Equalizer.html)至少需要 Android 2.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:26:07.983

> 我可以通过支持库在 Android api <9 中使用 Equalizer 类吗？

不，对不起。

话虽如此[，它的源代码是可用的](https://github.com/android/platform_frameworks_base/blob/master/media/java/android/media/audiofx/Equalizer.java)，因此您可以尝试将其重构到您自己的项目中并使用它。但是，由于整个`AudioEffect`框架直到 API 级别 9 才添加，我怀疑你会成功。

# sql - 如何找到存储过程调用？

> ID：10177767
> 
> 赞同：7
> 
> 时间：2012-04-16T16:12:40.290
> 
> 标签：sql, sql-server-2005, stored-procedures

有没有办法可以找到在 SQL Server 2005 数据库中调用存储过程的位置？

我尝试使用 Find，但这不像在 Visual Studios 中那样工作。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T16:20:52.423

如果您需要按名称查找数据库对象（例如表、列、触发器） - 请查看名为[SQL Search的](http://www.red-gate.com/products/sql-development/sql-search/)**免费**Red-Gate 工具，它会在您的整个数据库中搜索任何类型的字符串。

因此，在您的情况下，如果您**知道**您感兴趣的存储过程被称为什么 - 只需将其键入搜索框中，SQL Search 就会快速向您显示调用该存储过程的所有位置。

![在此处输入图像描述](../Images/06aa8195296565da03113074a84f9fa1.png)

![在此处输入图像描述](../Images/2b38d4018a9fbf766a665542ad2c611d.png)

对于任何 DBA 或数据库开发人员来说，它都是一个很棒的必备工具——我是否已经提到它完全**免费**用于任何用途？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T16:21:08.450

您可以尝试`View Dependencies`在 SQL Server Management Studio 中使用。

右键单击存储过程并选择`View Dependencies`. 但是我发现它并不总是 100% 准确。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-16T16:21:59.177

您可以创建一个“查找”SP

我用这个来搜索数据库对象中的文本：

```
CREATE sp_grep (@object varchar(255))
as

SELECT distinct
'type' = case type
when 'FN' then 'Scalar function'
when 'IF' then 'Inlined table-function'
when 'P' then 'Stored procedure'
when 'TF' then 'Table function'
when 'TR' then 'Trigger'
when 'V' then 'View'
end,
o.[name],
watchword = @object
FROM dbo.sysobjects o (NOLOCK)
JOIN dbo.syscomments c (NOLOCK)
ON o.id = c.id
where c.text like '%'+@object+'%' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-02T14:12:40.797

[查看存储过程的依赖关系](https://msdn.microsoft.com/en-us/library/ms345404.aspx)：

```
select *
from sys.dm_sql_referencing_entities('[SchemaName].[SPName]', 'OBJECT'); 
```

# c# - ConcurrentBag - 添加多个项目？

> ID：10177768
> 
> 赞同：49
> 
> 时间：2012-04-16T16:12:41.100
> 
> 标签：c#, concurrency, concurrent-collections

有没有办法一次将多个项目添加到 ConcurrentBag，而不是一次一个？我在 ConcurrentBag 上没有看到 AddRange() 方法，但有一个 Concat()。但是，这对我不起作用：

```
ConcurrentBag<T> objectList = new ConcurrentBag<T>();

timeChunks.ForEach(timeChunk =>
{
    List<T> newList = Foo.SomeMethod<T>(x => x.SomeReadTime > timeChunk.StartTime);
    objectList.Concat<T>(newList);
}); 
```

此代码曾经位于 Parallel.ForEach() 中，但我将其更改为上述代码，以便对其进行故障排除。变量 newList 确实有对象，但是在 objectList.Concat<> 行之后，objectList 中总是有 0 个对象。Concat<> 不是这样工作的吗？我是否需要使用 Add() 方法一次向 ConcurrentBag 添加一个项目？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2015-06-30T17:38:04.550

（我知道这是一个旧帖子，我想我会添加一些东西）。

就像其他人说的：是的，您需要一一添加。在我的例子中，我添加了一个小的扩展方法来让事情变得更简洁，但在引擎盖下它做同样的事情：

```
 public static void AddRange<T>(this ConcurrentBag<T> @this, IEnumerable<T> toAdd)
    {
        foreach (var element in toAdd)
        {
            @this.Add(element);
        }
    } 
```

进而：

```
 ConcurrentBag<int> ccBag = new ConcurrentBag<int>();
    var listOfThings = new List<int>() { 1, 2, 4, 5, 6, 7, 8, 9 };
    ccBag.AddRange(listOfThings); 
```

我还研究了使用 AsParallel 在扩展方法中添加，但是在对添加各种大小的字符串列表进行了一些测试之后，与传统的 for 循环相比，使用 AsParallel（如此处所示）始终慢。

```
 public static void AddRange<T>(this ConcurrentBag<T> @this, IEnumerable<T> toAdd)
    {
        toAdd.AsParallel().ForAll(t => @this.Add(t));
    } 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-16T16:18:48.160

`Concat`是LINQ提供的一种扩展方法。它是一个不可变的操作，它返回另一个`IEnumerable`可以枚举源集合，紧随其后的是指定集合。它不会以任何方式更改源集合。

您将需要一次将您的项目添加到`ConcurrentBag`其中一个。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-21T14:09:50.273

我遇到了类似的问题，试图并行处理较小的数据块，因为一个大块正在超时我用来在发送端访问我的数据的 Web 服务，但我不希望通过处理每个块来让事情运行得更慢串行。逐条处理数据记录甚至更慢 - 因为我调用的服务可以处理批量请求，所以最好尽可能多地提交而不超时。

就像弗拉德说的那样，将并发包连接到对象类型的列表不会返回并发包，所以 concat 不起作用！（我花了一段时间才意识到我做不到。）

试试这个 - 创建一个`List<T>`，然后创建一个`ConcurrentBag<List<T>>`. 在每次并行迭代中，它将向并发包中添加一个新列表。并行循环完成后，循环遍历`ConcurrentBag`and concat（或联合，如果您想消除可能的重复项）到`List<T>`您创建的第一个，以将所有内容“展平”到一个列表中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-29T16:39:33.093

该`Concat`方法是包含在支持库（内部程序集）的公共**[`Enumerable`](https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable)**静态类中的一种方法。*[`System.Linq`](https://docs.microsoft.com/en-us/dotnet/api/system.linq)**[`.NET System.Core`](https://referencesource.microsoft.com/#System.Core)*

但是，`Concat`包含限制以向[`ConcurrentBag<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentbag-1)对象提供“添加范围”要求，其行为如下图所示（在 Visual Studio 中的第 47 行）：

[![在此处输入图像描述](../Images/8afa0234c31b6c43971dcac3fd60bbc8.png)](https://i.stack.imgur.com/Jg8It.png)

要`Concat`方法匹配“添加范围”要求，需要更新当前[`ConcurrentBag<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentbag-1)对象实例；如果程序需要添加多个范围，则有必要从当前[`ConcurrentBag<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentbag-1)（递归）为每个范围创建自动引用实例。

[![在此处输入图像描述](../Images/886d36c59f8530ed0fd55bd5230e2d17.png)](https://i.stack.imgur.com/I6vyS.png)

然后，我不使用`Concat`方法，如果我可以推荐，我不推荐。我遵循[**Eric**](https://stackoverflow.com/users/5066490/eric)的回答中的一个类似示例，在那里我开发了一个派生类，从中[`ConcurrentBag<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentbag-1)为我提供了 AddRange 方法，该方法使用[`ConcurrentBag<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentbag-1)基本方法将[`IEnumerable<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.ienumerable-1)项目添加到派生实例，如下所示：

> ```
> public class ConcurrentBagCompleted<T> : ConcurrentBag<T>
> {
>     public ConcurrentBagCompleted() : base() { }
> 
>     public ConcurrentBagCompleted(IEnumerable<T> collection):base(collection)
>     {
>     }
> 
>     public void AddRange(IEnumerable<T> collection)
>     {
>         Parallel.ForEach(collection, item =>
>         {
>             base.Add(item);
>         });
>     }
> } 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-24T13:21:27.817

还有第二个构造函数，`ConcurrentBag<T>`它以 IEnumerable 作为参数并从中构造包。对于这种情况，这是我发现的最快、最安全的方法。请参考[`ConcurrentBag<T>(IEnumerable<T>)`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentbag-1.-ctor?view=netframework-4.8#System_Collections_Concurrent_ConcurrentBag_1__ctor_System_Collections_Generic_IEnumerable__0__) 所以，在问题的情况下，解决方案是：

```
 ConcurrentBag<T> objectList = new ConcurrentBag<T>();

        timeChunks.ForEach(timeChunk =>
        {
            List<T> newList = Foo.SomeMethod<T>(x => x.SomeReadTime > timeChunk.StartTime);
            newList.AddRange(objectList.ToList());
            objectList=new ConcurrentBag<T>(newList);
        }); 
```

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-04-16T16:16:03.953

是的 ：）

`Concat`也许是`Enumerable`扩展之一。它不会向 中添加任何内容`ConcurrentBag`，它只是返回一些时髦的对象，其中包含原始包以及您尝试添加的任何内容。

请注意，结果不再`Concat`是 a `ConcurrentBag`，因此您不想使用它。它是通用 LINQ 框架的一部分，可以组合不可变序列。当然，该框架不会尝试将操作数的并发属性扩展到结果，因此结果对象将不太适合多线程访问。

（基本上，`Concat`适用于`ConcurrentBag`因为它暴露了`IEnumerable<T>`接口。）

# sql-server - 如何从 SQL Server 读取昨晚的错误或警告日志？

> ID：10177769
> 
> 赞同：0
> 
> 时间：2012-04-16T16:12:45.563
> 
> 标签：sql-server, sql-server-2008

昨晚我们的 sql server 数据库出现了问题。如何从 SQL Server 数据库中读取这些日志？数据库事务日志文件中会出现这些错误吗？

请指点我找出问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:20:24.067

这取决于您收到的错误类型......但这篇 MSDN 文章描述了如何[查看 Sql Server 错误日志](http://msdn.microsoft.com/en-us/library/ms187885%28v=sql.100%29.aspx)：

> 默认情况下，错误日志位于 Program Files\Microsoft SQL Server\MSSQL.n\MSSQL\LOG\ERRORLOG 和 ERRORLOG.n 文件中。

# c++ - 使用 CUDA 的 Thrust 库来减少阵列

> ID：10177781
> 
> 赞同：2
> 
> 时间：2012-04-16T16:13:37.977
> 
> 标签：c++, visual-studio-2008, cuda, thrust

我正在使用推力来查找数组的总和，c，但我不断收到编译器错误“错误：表达式必须具有类类型”

```
float tot = thrust::reduce(c.begin(), c.end()); 
```

这是不起作用的代码行，c 是一个浮点数组，是其他 2 个数组的元素总和。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T20:33:56.653

可以将指针传递给`thrust::reduce`. 如果你有一个指向主机内存中数组的指针，你可以这样做：

```
float tot = thrust::reduce(c, c + N); // N is the length of c in words 
```

如果您的指针指向设备内存中的数组，则需要将其转换为`thrust::device_ptr`第一个：

```
thrust::device_ptr<float> cptr = thrust::device_pointer_cast(c);
float tot = thrust::reduce(cptr, cptr + N); // N is the length of c in words 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T16:35:32.623

c 应该是一个`thrust`类型，例如`thrust::host_vector`or `thrust::device_vector`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T16:48:27.453

[Thrust github 页面](https://github.com/thrust/thrust)上有一个关于thrust::reduce 的示例。您不能在普通的旧数组上调用 .begin() ，因为它不是对象的实例，即它没有意义。例如，就像在下面的代码中对数组“b”调用 .begin() 一样。

```
int main(void)
{
    thrust::host_vector<float> a(10);
    float b[10];

    thrust::fill(a.begin(), a.end(), 1.0);
    thrust::fill(b, b+10, 2.0);

    cout << "a: " << thrust::reduce(a.begin(), a.end()) << endl;
    cout << "b: " << thrust::reduce(b, b+10) << endl;

    return 0;
} 
```

# python - 在 Python 中用蛮力求解 Euler #14

> ID：10177782
> 
> 赞同：-6
> 
> 时间：2012-04-16T16:13:37.950
> 
> 标签：python, brute-force

我试图用python暴力[破解欧拉问题14 ，但没有取得多大成功。](http://projecteuler.net/index.php?section=problems&id=14)

我使用了 itertools 模块，但它太慢了。然后我找到了解决问题的公式。

有没有办法使用蛮力解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:37:18.067

您可以将中间值存储在字典中并进行一种动态编程。

```
numbers = {1:0}
max = -1
startMax = -1
for i in range(2, 1000 000):
    n = i
    steps = 0
    while n>=i:
        if n&2 == 0:
            n = n/2
        else:
            n = 3*n + 1
        steps = steps + 1
    # n < i, hence it must already be stored in the dictionary
    steps = steps + numbers[n]
    if steps > max:
        max = steps
        startMax = i
    numbers[i] = steps
    return startMax 
```

另一种方法可能是存储您遇到的每个号码，并始终检查您当前所在的号码是否在地图中。但我想这可能需要更多的字典查找时间：

```
numbers = {1:0}
max = -1
for i in range(2, 1000 000):
    if i in numbers:
        steps = numbers[i]
    else:
        n = i
        steps = 0
        found = False

        while not found:
            if n&2 == 0:
                n = n/2
            else:
                n = 3*n + 1
            if n in numbers:
                steps = numbers[n]
                found = True
            else:
                newNumbers.append(n)
        # Store all the new numbers into the dictionary
        for num in newNumbers:
            steps = steps + 1
            numbers[num] = steps
    if steps>max:
        max = steps
        startMax = i
return startMax 
```

您可能想进行一些测试以找出哪个更好，但我的赌注是第一个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T16:17:12.683

[pypy](http://pypy.org/)是“启用了优化的 python”。

在这里获取：http: [//pypy.org/download.html#default-with-a-jit-compiler](http://pypy.org/download.html#default-with-a-jit-compiler)

要使用它，只需写`pypy`在你通常写的地方`python`。它非常兼容。主要区别在于为 python 编写的基于 C 的扩展在 pypy 中不起作用，尽管许多人正在努力解决这个问题。

* * *

我觉得有必要为我的答案辩护。鉴于这个非常简单的蛮力解决方案：

```
"Solve Project-Eueler #14"
from collections import namedtuple
Chain = namedtuple('Chain', 'length, start')

def calculate_chain(i):
    start = i
    length = 1
    while i != 1:
        length += 1
        if i & 1: # `i` is odd
            i = 3 * i + 1
        else:
            # Divide by two, efficiently.
            i = i >> 1
    return Chain(length, start)

def find_largest_chain(maxint):
    largest_chain = Chain(0, 0)
    for i in xrange(1, maxint+1):
        chain = calculate_chain(i)
        if chain > largest_chain:
            largest_chain = chain
    return largest_chain

def commandline_interface():
    from sys import argv
    maxint = int(argv[1])
    print find_largest_chain(maxint)

if __name__ == '__main__':
    commandline_interface() 
```

python中的运行时间是23秒：

```
$ /usr/bin/time python 10177836.py 999999
Chain(length=525, start=837799)
22.94user 0.04system 0:23.09elapsed 99%CPU (0avgtext+0avgdata 15648maxresident)k
0inputs+0outputs (0major+1109minor)pagefaults 0swaps 
```

在 pypy 中是 0.93 秒：

```
$ /usr/bin/time ~/packages/pypy-1.8/bin/pypy 10177836.py 999999
Chain(length=525, start=837799)
0.66user 0.10system 0:00.93elapsed 81%CPU (0avgtext+0avgdata 63152maxresident)k
48inputs+0outputs (1major+4194minor)pagefaults 0swaps 
```

简单地使用 pypy 可以提高 2373% 的速度，并使用特定的算法。我看不出为什么 OP 不会用他自己的代码看到类似的改进。

# windows - 创建 vbs 脚本以将 .bat 文件安装到远程 IP

> ID：10177784
> 
> 赞同：0
> 
> 时间：2012-04-16T16:13:42.280
> 
> 标签：windows, batch-file, cmd, vbscript

我有一个需要在我们网络上的远程 IP 上运行的 .bat 文件。我想做的是提示输入 IP 地址的 10.xx 部分，然后让脚本执行一个从 .1 开始并继续到 .254 的循环，这样 .bat 文件就会被推送到 10.xx1 - 10.xx254

到目前为止，这就是我得到的：

```
Dim WshShell
set WshShell = CreateObject("wscript.shell")

strUserInput = InputBox("enter network" )

Wshshell.exec("cmd /k CD ../directory/file.bat" & strUserInput) 
```

如果我手动打开一个 cmd 并导航到正确的目录并运行 file.bat 10.xxx，如果 .bat 文件在网络上，它将在远程计算机上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:46:47.057

这适用于正确创建和显示字符串：

```
Sub test()
    Dim location As String
    location = InputBox("enter network")
    MsgBox ("cmd /k CD ../directory/file.bat" & location)
End Sub 
```

# javascript - 创建一个简单的多人 JavaScript 游戏需要什么？

> ID：10177791
> 
> 赞同：0
> 
> 时间：2012-04-16T16:14:03.860
> 
> 标签：javascript, multiplayer

一开始我想保持简单。基本上允许两个人用箭头键移动两个方格，也许让他们检测到他们何时互相撞击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:33:26.363

以最抽象的方式：

除非您还想编写某种分布式网络代码（提示：您不需要。）

几乎任何类型的“服务器”都可以做到这一点。服务器将让玩家互相交谈。

一旦你得到消息在用户之间流动，那么你需要弄清楚如何处理他们。

如果我是你，我会去查找一些基本的聊天室软件，那里有很多，它会告诉你一种进行消息传递的方法。然后也许尝试看看是否有某种方法可以在此基础上构建游戏。

# wpf - 使用 WPF 在 Win Phone 7 中访问图片

> ID：10177792
> 
> 赞同：1
> 
> 时间：2012-04-16T16:14:05.173
> 
> 标签：wpf, windows-phone-7

我想编写一个 WPF Windows 应用程序，可以访问我的 Windows Phone 上的图像。

当我插入电话时，我看不到它。我有其他手机在 Windows 资源管理器中显示为另一个硬盘驱动器，您可以在手机上/从手机上复制图像。

如何在 WPF 应用程序中访问 Windows 7 Phone 上的图像？我该如何开始？哪些命名空间最相关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:39:19.500

您只能通过 Zune 从手机上获取图像，遗憾的是没有用于获取图片的官方 API。

[此链接](https://stackoverflow.com/questions/1015286/zune-api-zunecore-dll)可能会有所帮助。

# jquery - 选项根据另一个选项更改属性

> ID：10177797
> 
> 赞同：1
> 
> 时间：2012-04-16T16:14:27.760
> 
> 标签：jquery, options, update-attributes

我有 2 个下拉菜单。第一个下拉菜单是设计颜色。第二个是要打印的设计。有时我们有红色设计，但它们不能印在红色包装上，因为颜色会混合在一起。我正在尝试拆分第一个选项以给我它的颜色，如果它与下面的选项匹配以禁用它。选择另一个选项时，禁用选项将刷新。

我的想法是创建一个 str 并使用它来查看它是否在选项名称中。它似乎不起作用，所以我想我错过了一些小东西。例如，如果我将“str”替换为“Red”，它会禁用红色，但它不会即时工作，这是我需要它做的。任何帮助将不胜感激。

这是我苦苦挣扎的部分： $(designColor).children('option:contains(str)').attr('disabled','disabled');

```
<p>
<select onchange="change_option('SELECT___LX-03675___185',this.options[this.selectedIndex].value)" name="SELECT___LX-03675___185">
<option selected="" value="0">Choose Water Bottle WRAP Color</option>
<option value="1343">Black Water Bottle</option>
<option value="1052">Green Water Bottle</option>
<option value="1874">Purple Water Bottle</option>
<option value="1051">Red Water Bottle</option>
<option value="1053">Royal Water Bottle</option>
<option value="1813">Pink Water Bottle</option>
</select><br>
<select onchange="change_option('SELECT___LX-03675___529',this.options[this.selectedIndex].value)" name="SELECT___LX-03675___529">
<option selected="" value="0">Choose Water Bottle DESIGN Color</option>
<option value="2519">Pink Design Water Bottle</option>
<option value="2520">Red Design Water Bottle</option>
<option value="2521" disabled="disabled">White Design Water Bottle</option>
<option value="2522">Black Design Water Bottle</option>
<option value="2523">Blue Design Water Bottle</option>
</select>
</p>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){

var wrapColor = $('select[name=SELECT___LX-03675___185]');
var designColor = $('select[name=SELECT___LX-03675___529]');

$(wrapColor).change(function () {
      var str = "";
      $(wrapColor).children("option:selected").each(function () {
            str += $(this).text().split(' ')[0] + " ";
          });

$(designColor).children('option').removeAttr('disabled');
$(designColor).children('option:contains(str)').attr('disabled','disabled');

    })
    .trigger('change');
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:15:44.377

我认为应该是（未测试）

```
$(designColor).children('option:contains('+str+')').prop('disabled',true); 
```

# ipv6 - struct in6_addr 在 gcc c99 上崩溃

> ID：10177804
> 
> 赞同：1
> 
> 时间：2012-04-16T16:15:10.820
> 
> 标签：ipv6, c99

我有一段代码，它获取本地 IPv6 地址。带有 std=c99 的 gcc 和 clang 在这些行上崩溃：

```
ipv6addr.s6_addr16[i] = htons((unsigned short int)tmp);

if (!(IN6_IS_ADDR_LOOPBACK(ipv6addr.s6_addr32)
        || IN6_IS_ADDR_UNSPECIFIED(ipv6addr.s6_addr32)
        || IN6_IS_ADDR_LINKLOCAL(ipv6addr.s6_addr32))){

ipv6.c:43:13: error: no member named 's6_addr16' in 'struct in6_addr'
                    ipv6addr.s6_addr16[i] = htons((unsigned short int)tmp);
                    ~~~~~~~~ ^
ipv6.c:45:39: error: no member named 's6_addr32' in 'struct in6_addr'
            if (!(IN6_IS_ADDR_LOOPBACK(ipv6addr.s6_addr32)
                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~ 
```

等等

使用标准选项编译会成功。这是为什么？完整源代码可在[http://pastebin.com/hQ3VBSKe获得](http://pastebin.com/hQ3VBSKe)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:54:05.577

从 2007-2009 年的相关帖子来看，这似乎是一个 OSX 神器，

```
+#if defined(__APPLE__) || defined(__darwin__)
+/* OSX seems not to define these. */
+#ifndef s6_addr16
+#define s6_addr16 __u6_addr.__u6_addr16
+#endif
+#ifndef s6_addr32
+#define s6_addr32 __u6_addr.__u6_addr32
+#endif
+#endif 
```

[http://archives.seul.org/or/cvs/Jul-2007/msg00167.html](http://archives.seul.org/or/cvs/Jul-2007/msg00167.html)

加，

> [RFC 2553](http://www.ietf.org/rfc/rfc2553.txt)，UNP 和 SUS，in6_addr{} 只需要 s6_addr

[http://seclists.org/nmap-dev/2009/q1/493](http://seclists.org/nmap-dev/2009/q1/493)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:56:17.740

请参阅 struct in6_addr 的声明。您需要编译为 gnu99 才能获得扩展。

顺便说一句错误！=崩溃

# .net - 如何为多个解决方案配置 TeamCity Inspections (.NET) Runner

> ID：10177808
> 
> 赞同：2
> 
> 时间：2012-04-16T16:15:22.740
> 
> 标签：.net, teamcity, teamcity-7.0

我正在使用 TeamCity Professional 7.0.2（内部版本 21349）并添加了*Inspections (.NET)*运行程序（用于收集 JetBrains ReSharper 检查结果的运行程序）作为构建步骤。

解决方案文件路径是必填字段，[根据当前文档](http://confluence.jetbrains.net/display/TCD7/Inspections+%28.NET%29)，这是“.sln 文件的路径。指定的路径应该相对于检出目录。”

我有多种解决方案（超过 20 种），因此尝试过`*.sln`但失败了（我猜这是意料之中的）。

```
[16:33:17]Step 5/5: ReSharper Inspections (Inspections (.NET)) (1m:17s)
[16:34:32][Step 5/5] Invalid char '*' in path *.sln
[16:34:34][Step 5/5] Inspections (.NET) execution failure
[16:34:34][Step 5/5] Step ReSharper Inspections (Inspections (.NET)) failed 
```

我想知道是否有人知道解决方法？

我已经[在支持网站上发布了一个功能请求](http://youtrack.jetbrains.com/issue/TW-21113)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T07:49:22.590

JetBrains 的回应：

> 现在唯一的解决方法是定义几个构建步骤，每个解决方案一个。

[http://youtrack.jetbrains.com/issue/TW-21113](http://youtrack.jetbrains.com/issue/TW-21113)

# c++ - C++ 扩展继承的函数

> ID：10177809
> 
> 赞同：7
> 
> 时间：2012-04-16T16:15:23.863
> 
> 标签：c++

考虑一个简单的继承类：

```
class Base 
{
  void func() {
     cout << "base" << endl;
  }
};

class Derived : public Base
{
  void func() {
      cout << "derived" << endl;
  } 
}; 
```

如果我运行 Derived::func() 我得到

```
derived 
```

我想修改此代码以获得

```
base
derived 
```

比覆盖更类似于扩展的东西。

我已经能够用构造函数得到类似的东西，但不能用普通函数。

非常感谢，卢西奥

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-16T16:17:40.067

```
class Derived : public Base
{
  void func() {
      Base::func();   // Call the base method before doing our own.
      cout << "derived" << endl;
  } 
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T16:17:30.373

要从派生类访问基类函数，您可以简单地使用：

```
Base::func(); 
```

在您的情况下，您将把它作为派生实现的第一行`func()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-05T04:50:58.140

使用`Base::func();`是正确的，就像其他一些已经说过的那样。

请记住，基类的构造函数总是首先被调用，然后是派生类的构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-05T03:41:50.773

你讲过构造函数，派生类的构造函数会调用基类的构造函数，不管你是否使用继承构造函数，这是有道理的，因为派生类应该能够构造从基类继承的成员。默认情况下，构造函数不会被继承。

**但是，“正常”方法的方式大不相同。**

首先，请确保在大多数情况下，派生类中的方法不必调用基类中的同名方法，相反，它会**覆盖**基类的方法，尽管它确实继承了它。

所以如果你真的想调用基类一，你应该明确告诉编译器。使用`baseclass::somemethod`将满足您的要求。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2018-04-05T03:06:47.213

你不能这样做。你必须这样做

```
 Void derived:: func()
 {
  this->func(); /*you should use 'this pointer' to 
  access the base class functions*/
  cout<<"derived";
  } 
```

# javascript - 选择框上的 onChange 事件什么都不做

> ID：10177811
> 
> 赞同：1
> 
> 时间：2012-04-16T16:15:25.617
> 
> 标签：javascript, html

我有一个选择输入，该输入应在选择选项时调用JavaScript函数。

我正在使用这段代码来做到这一点：

```
<select id="main-category" name="main-category" class="dropdown" tabindex="2" onChange="showSubcats(this.value);">
<option value="">Please Select</option>
<option value="1">First Option</option>
<option value="2">Second Option</option>
</select> 
```

但是，`showSubcats()`当所选选项发生更改时，永远不会调用该函数。我尝试测试它，我什至尝试调用一个不存在的函数来查看是否会收到 Javascript 错误 - 没有，该函数从未被调用。我究竟做错了什么？

功能是什么并不重要，假设它只是`document.getElementById("some_id").innerHTML = "test"`我现在在那里用于测试目的的功能。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:18:30.067

请看一下[http://jsfiddle.net/8pnDw/](http://jsfiddle.net/8pnDw/)

我所做的只是：将您的函数调用更改为 alert(...)。它完美地工作。如果您在使用 JavaScript 时遇到问题，请告诉我们。

希望能帮助到你！

# wpf - WPF 样式和派生类无法识别属性

> ID：10177812
> 
> 赞同：2
> 
> 时间：2012-04-16T16:15:31.943
> 
> 标签：wpf, xaml, wpf-controls, styles

我在为自定义 wpf 类创建样式时遇到问题。

这就是我所拥有的...

我有一个名为 FalconToggleButton 的类，它继承了 System.Windows.Controls.Primitives.ToggleButton

FalconToggleButton 有一个新的自定义属性，称为：

```
Public Property ButtonHoverIcon As System.Uri 
```

FalconToggleButton 还有其他类似的新方法和属性。

当我使用该类时，我没有任何问题，当其他类继承它时，当它们通过 xaml 或通过代码定义时，它们可以使用 ButtonHoverIcon。

当我尝试为 FalconToggleButton 制作样式时会出现问题

```
<Style x:Key="ToolBarMenuItemStyleDefault" TargetType="{x:Type DrawControl:FalconToggleButton}" BasedOn="{x:Null}">
    <Setter Property= "ButtonOffIcon" Value="pack://application:,,,/Images/WaitIcon.png"/>
</Style> 
```

Property="ButtonOffIcon" 未被识别为有效属性

当我运行代码时，我收到一条通用的“发生 XamlParseException”消息：“Set property 'System.Windows.Setter.Property' throw an exception。” 行号“12”和行位置“10”。

我是否需要在某处注册一些东西才能让我的属性显示在样式结构中？

任何帮助将不胜感激，MS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:47:17.007

您必须将您的财产注册为[DependencyProperty](http://msdn.microsoft.com/en-us/library/ms752914.aspx)。

# jquery - ajax调用后Jquery Mobile选择刷新不起作用

> ID：10177815
> 
> 赞同：0
> 
> 时间：2012-04-16T16:15:49.113
> 
> 标签：jquery, jquery-mobile

我有一个可折叠的选择框。我正在尝试进行 ajax 调用并从结果中动态添加选项。不幸的是，选择上的刷新不起作用，现在仍然显示选项。任何指针？我正在使用 jquery mobile 1.1.rc2

```
$.getJSON(myurl, function(data) {
    $.each(data, function(key,value) {
        myDropDown.append($("<option />").val(key).text(value));
    });
    myDropDown.selectmenu("refresh");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:29:05.227

您是否尝试过[强制重建](http://jquerymobile.com/demos/1.1.0/docs/forms/selects/methods.html)您的选择菜单？

```
//refresh and force rebuild
$('select').selectmenu('refresh', true); 
```

# vb.net - 根据填充有 Acces 数据库的组合框可更新标签文本

> ID：10177816
> 
> 赞同：1
> 
> 时间：2012-04-16T16:15:49.127
> 
> 标签：vb.net, ms-access

嗨，我使用的是 Visual Basic 2008 Express Edition，所以我有一个组合框，其中填充了使用 Microsoft Acces 制作的数据库中的项目，该组合框填充了存储在 de 数据库表中的列中的值，因此用户可以从中选择一个“选项”，我想添加显示该列相应行的值的标签。我使用“数据源”面板拖放与我想要的值相对应的标签，它可以在我编译应用程序时显示我想要的值（至少我认为是这样，它可能只是选择了第一个条目）问题是，当我在组合框中选择一个不同的条目时，标签不会用新值刷新。我怎样才能做到这一点？

*编辑*

好的，我想我真正的问题是 Visual Basic 如何填充 de 组合框并获取其他 Acces DB 条目的值来更改标签的 .text 值？我的意思是执行此操作的实际代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T23:32:05.697

在组合框的 on_click 事件中放置一些代码以适当地更改标签标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:40:32.317

看看[这是否有帮助](http://database.ittoolbox.com/groups/technical-functional/excel-l/dynamic-excel-forms-using-vba-1037672#M1101469)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:32:36.697

好的，我想通了，每次从数据源面板拖放项目时，可视化都会创建新的数据源，因此您所要做的就是确保 VB 使用组合框和标签中使用的相同数据源因此，当您从组合框中选择一个选项时，它们会自动更新，我通过在我的项目的*Form1.Designer.vb*文件中找到适当的元素并编辑标签的“DataBindings.Add”属性来做到这一点。

# iframe - 跨域将 HTML 注入 iframe

> ID：10177817
> 
> 赞同：0
> 
> 时间：2012-04-16T16:15:50.207
> 
> 标签：iframe

在 html 中，有一个 iframe 从不同的域加载外部页面。而且我无法更改此外部页面的源代码。

现在我想在iframe中注入一些html代码，比如在外部页面中添加一个链接。

我这样做的可能方法是什么？

我尝试使用 contentWindow.document，但遇到了权限问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:25:36.103

我认为这是不可能的。但是，如果您想不惜一切代价这样做，您可以使用服务器端下载所需的页面，例如 file_get_contents('http://www.google.com'); 在 php.ini 中。并对其进行更改，将其保存在服务器上的文件中，然后在您想要的 iframe 中打开它。

# mysql - MAMP -- MySQL 服务器 -- LION 问题

> ID：10177822
> 
> 赞同：2
> 
> 时间：2012-04-16T16:16:15.883
> 
> 标签：mysql, osx-lion, mamp

是否有其他人无法使用他们的 mysql 服务器而不是从 lion 开始。有时它开始有时它没有，这真的让我很生气。在我开始使用狮子之前，这从未发生过。如果其他人遇到此问题或知道解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:27:32.680

我要在这里站出来，说它因为 Skype 而无法正常工作。

如果您在启动 MAMP 之前运行 Skype，那么这将导致 apache 无法启动。

这是因为 MAMP 和 Skype 都使用端口 80。只需关闭 Skype，apache 应该会再次工作。希望这可以帮助！

# iphone - 尝试将文本转换为图像时出现 CGContext 错误

> ID：10177824
> 
> 赞同：0
> 
> 时间：2012-04-16T16:16:25.220
> 
> 标签：iphone, objective-c, ios, xcode, cgcontext

我正在尝试将文本转换为图像并将该图像用作子视图。但是我得到了一些错误。我从另一个 stackoverflow 帖子中得到了一段脚本；

```
/* Creates an image with a home-grown graphics context, burns the supplied string into it. */
- (UIImage *)burnTextIntoImage:(NSString *)text :(UIImage *)img {

    UIGraphicsBeginImageContext(img.size);

    CGRect aRectangle = CGRectMake(0,0, img.size.width, img.size.height);
    [img drawInRect:aRectangle];

    [[UIColor redColor] set];           // set text color
    NSInteger fontSize = 14;
    if ( [text length] > 200 ) {
        fontSize = 10;
    }
    UIFont *font = [UIFont boldSystemFontOfSize: fontSize];     // set text font

    [ text drawInRect : aRectangle                      // render the text
             withFont : font
        lineBreakMode : UILineBreakModeTailTruncation  // clip overflow from end of last line
            alignment : UITextAlignmentCenter ];

    UIImage *theImage=UIGraphicsGetImageFromCurrentImageContext();   // extract the image
    UIGraphicsEndImageContext();     // clean  up the context.
    return theImage;
} 
```

我用代码调用这段代码：

```
[self burnTextIntoImage:textInsert :textImage]; 
```

我得到的错误是：

```
<Error>: CGContextSetFillColorWithColor: invalid context 0x0
<Error>: CGContextSetStrokeColorWithColor: invalid context 0x0
<Error>: CGContextSetFont: invalid context 0x0
<Error>: CGContextSetTextMatrix: invalid context 0x0
<Error>: CGContextSetFontSize: invalid context 0x0
<Error>: CGContextSetTextPosition: invalid context 0x0
<Error>: CGContextShowGlyphsWithAdvances: invalid context 0x0 
```

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:26:25.787

```
////Drawing text using Quartz 2D in an iOS application

- (void)drawRect:(CGRect)rect

{

  CGContextRef theContext = UIGraphicsGetCurrentContext();

  CGRect viewBounds = self.bounds;

  CGContextTranslateCTM(theContext, 0, viewBounds.size.height);

  CGContextScaleCTM(theContext, 1, -1);

  // Draw the text using the MyDrawText function

  MyDrawText(theContext, viewBounds);
}

 ////Drawing text
void MyDrawText (CGContextRef myContext, CGRect contextRect) // 1

{

float w, h;

w = contextRect.size.width;

h = contextRect.size.height;

CGAffineTransform myTextTransform; // 2

CGContextSelectFont (myContext, // 3

                "Helvetica-Bold",

                 h/10,

                 kCGEncodingMacRoman);

CGContextSetCharacterSpacing (myContext, 10); // 4

CGContextSetTextDrawingMode (myContext, kCGTextFillStroke); // 5

CGContextSetRGBFillColor (myContext, 0, 1, 0, .5); // 6

CGContextSetRGBStrokeColor (myContext, 0, 0, 1, 1); // 7

myTextTransform =  CGAffineTransformMakeRotation  (MyRadians (45)); // 8

CGContextSetTextMatrix (myContext, myTextTransform); // 9

CGContextShowTextAtPoint (myContext, 40, 0, "Quartz 2D", 9); // 10

UIImage *theImage=  UIGraphicsGetImageFromCurrentImageContext();

 UIGraphicsEndImageContext();

} 
```

更多请访问以下链接...

[Quartz 2D 如何绘制文本](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_text/dq_text.html)

希望，这会帮助你......冷静......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:35:13.110

```
<Error>: CGContextSetFillColorWithColor: invalid context 0x0
... 
```

没有活动的图形上下文。IOW，您正在请求抽签，但没有操作员或目的地。

当本地存在图形上下文时（例如，当`drawRect:`被调用时），您需要执行此调用，或者您必须为进程显式创建上下文（例如`CGBitmapContextCreate`）。

如果您正在使用`UIGraphicsBeginImageContext`，那应该仅来自主线程。您可以使用`CGBitmapContext`来自任何线程的。

# android - Android 客户端登录到 Django 服务器，如何通过 crsf :|

> ID：10177827
> 
> 赞同：3
> 
> 时间：2012-04-16T16:16:36.913
> 
> 标签：android, django

我正在构建一个 Android 客户端应用程序来连接到 Django 服务器。这里的问题是我无法登录到我的服务器:(。怎么了，帮帮我:| 这是我的 loginFunction()：

1.  创建一个 DefaultHttpClient：

    ```
    DefaultHttpClient httpClientStatic = new DefaultHttpClient(); 
    ```

2.  从服务器获取 crsf 的函数：

    ```
    public String getCsrfFromUrl(String url) {
        HttpGet httpGet = new HttpGet(url);

        HttpResponse httpResponse = httpClientStatic.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();
        List<Cookie> cookies = httpClientStatic.getCookieStore().getCookies();
        if (cookies.isEmpty()) {
            Log.e("COOKIES GET ",  "Empty Cookies");
        } else {
            for (int i = 0; i < cookies.size(); i++) {
                Log.e("COOKIES GET ",  cookies.get(i).getName()+"--"+cookies.get(i).getValue());
            }
        }
        return cookies.get(0).getValue();
    } 
    ```

3.  将用户名、传递、crsf 发布到服务器的功能：

    ```
    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP GET request to get csrfmiddlewaretoken:
        try {
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));
            Log.e("JSON", "In login user 02.4");
            HttpResponse httpResponse = httpClientStatic.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
            .....
            //Next is read respone, and return json type
        } 
    ```

4.  登录功能：

    ```
    public JSONObject loginUser(String username, String password){
        // Building Parameters

        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("username", username));
        params.add(new BasicNameValuePair("password", password));
        csrfmiddlewaretoken = new JSONParser().getCsrfFromUrl(loginURL);
        params.add(new BasicNameValuePair("csrfmiddlewaretoken", csrfmiddlewaretoken));
        JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
        return json;
    } 
    ```

它仍然返回 401 错误 anh 500 状态：|。

# c# - 优化嵌套循环

> ID：10177830
> 
> 赞同：4
> 
> 时间：2012-04-16T16:16:42.783
> 
> 标签：c#, .net, lucene.net

我的应用程序有一个嵌套 for 循环的内存问题，我不知道如何改进它。我尝试过使用 linq，但我想在内部它是相同的，因为内存泄漏仍然存在。

**编辑：**正如我被要求的那样，我将提供有关我的问题的更多信息。

我已经在 Lucene 文档存储中索引了我的所有客户（大约 400.000）。每个客户可以出现在多个代理机构中，其中一些客户可以在 200-300 家代理机构中退出。

我需要从“全球”客户索引中检索我的所有客户，并为每个代理商建立一个单独的索引，只包含它可以看到的客户。有一些业务规则和安全规则需要应用到每个代理索引，所以现在，我无法为我的所有代理维护一个客户索引。

我的过程如下所示：

```
int numDocuments = 400000;

// Get a Lucene Index Searcher from an Index Factory
IndexSearcher searcher = SearcherFactory.Instance.GetSearcher(Enums.CUSTOMER);

// Builds a query that gets everything in the index
Query query = QueryHelper.GetEverythingQuery();
Filter filter = new CachingWrapperFilter(new QueryWrapperFilter(query));

// Sorts by Agency Id
SortField sortField = new SortField("AgencyId, SortField.LONG);
Sort sort = new Sort(sortField);

TopDocs documents = searcher.Search(query, filter, numDocuments, sort);

for (int i = 0; i < numDocuments; i++)
{
     Document document = searcher.Doc(documents.scoreDocs[i].doc);

     // Builds a customer object from the lucene document
     Customer customer = new Customer(document);

     // If this nested loop is removed, the memory doesn't grow
     foreach(Agency agency in customer.Agencies)
     {
          // Gets a writer from a factory for the agency id.
          IndexWriter writer = WriterFactory.Instance.GetWriter(agency.Id);

          // Builds an agency-specific document from the customer
          Document customerDocument = customer.GetAgencyDocument(agency.Id);

          // Adds the document to the agency's lucene index
          writer.AddDocument(customerDocument);
     }
} 
```

**编辑：**解决方案

问题是我没有在内部循环中重用“文档”对象的实例，这导致我的服务的内存使用量不雅增长。只需在整个过程中重用 Document 的单个实例就可以解决我的问题。

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T16:46:59.870

我相信这里发生的是：

您在循环中创建了太多对象。如果可能的话，不要在循环中使用 new() 关键字。初始化可跨循环重用的对象并将数据传递给它们以进行处理。不要在这么多循环中构造新对象，因为垃圾收集会成为一个严重的问题，垃圾收集器可能无法跟上你的速度，并且会推迟收集。

如果这是真的，你可以做的第一件事是尝试强制垃圾收集每个 X 循环并等待挂起的终结器。如果这会降低内存，您就知道这是问题所在。解决它很容易：只是不要在每次循环迭代时创建新实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:25:29.783

关键可能是您如何初始化`customers` 和`customer.Agencies`. 如果可以，不要返回类型 of ，而是`List`返回类型`IEnumerable<Customer>`and `IEnumerable<Agency>`。这可能允许延迟执行发生，这应该消耗更少的内存，但可能会使操作花费更长的时间。

另一种选择是分批运行代码，因此请使用上面的代码，但要`List<Customer> customers`分批填充，例如一次 10,000 个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T13:22:05.890

首先，您应该重用您传递给的实例，`Document`以最大程度地减少内存使用并减轻垃圾收集器的压力。`Field``IndexWriter.AddDocument()`

> • 重用 Document 和 Field 实例 从 Lucene 2.3 开始，有新的 setValue(...) 方法允许您更改 Field 的值。这允许您在许多添加的文档中重用单个 Field 实例，这可以节省大量的 GC 成本。最好创建一个 Document 实例，然后向其中添加多个 Field 实例，但保留这些 Field 实例并通过更改每个添加的文档的值来重新使用它们。例如，您可能有一个 idField、bodyField、nameField、storedField1 等。添加文档后，您可以直接更改字段值（idField.setValue(...) 等），然后重新添加您的 Document 实例.
> 
> 请注意，您不能在 Document 中重复使用单个 Field 实例，并且在将包含该 Field 的 Document 添加到索引之前，您不应更改 Field 的值。

[http://wiki.apache.org/lucene-java/ImproveIndexingSpeed](http://wiki.apache.org/lucene-java/ImproveIndexingSpeed)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T16:34:15.017

正如@RedFilter 所说，尝试将 IEnumerable 与 yield 语句一起使用。

这可能会有所帮助：

[http://csharpindepth.com/Articles/Chapter11/StreamingAndIterators.aspx](http://csharpindepth.com/Articles/Chapter11/StreamingAndIterators.aspx)

[http://www.alteridem.net/2007/08/22/the-yield-statement-in-c/](http://www.alteridem.net/2007/08/22/the-yield-statement-in-c/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T16:34:45.383

循环遍历内存中已经加载到内存中的列表，您不会更改列表正在使用的内存量。

一定是您对列表中的项目执行的操作导致内存使用。

您需要查看您正在尝试实现的目标并重新设计您的程序，以便不会同时在内存中存储所有数据。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-16T16:41:57.280

如果您的意思是要减少内存使用量，那么基本答案就是将其分解。

因此，将一个机构的所有客户都放入 CustomersForAgency 集合中，然后进行处理。

清除或让 CustomersForAgency 集合超出范围，将使所有这些客户和（可选该机构）超出范围，从而允许 .net 重用内存。

这当然是假设大部分内存分配是给客户的，而不是用于处理的其他持久实例，你简化了。

# mysql - 将日期转换为 int

> ID：10177831
> 
> 赞同：1
> 
> 时间：2012-04-16T16:16:43.333
> 
> 标签：mysql, datetime, casting, integer

请帮我解决这个问题：

在 MySQL 中，为什么会这样：

```
CAST(FROM_UNIXTIME(`STG_users`.`lastlogindate`/1000,'%Y%m%d') AS UNSIGNED) 
```

（`STG_users.lastlogindate`a在哪里`BIGINT`）

如果不这样做：

```
CAST(DATE_FORMAT(`Login_Activity_Temp`.`timestamp`,'%Y%m%d') AS UNSIGNED) 
```

（`Login_Activity_Temp.timestamp`a在哪里`DATETIME`）

我需要最后一个（或类似的东西）才能工作。

- - 更新 - -

我工作！！！（谢谢大家）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:28:42.270

DATE_FORMAT 返回格式化为字符串的日期。

CAST（Login_Activity_Temp.timestamp AS UNSIGNED）

应该这样做，不需要转换成字符串。

# java - 如何在多次运行中让 FindBugs 安静下来

> ID：10177832
> 
> 赞同：0
> 
> 时间：2012-04-16T16:16:50.187
> 
> 标签：java, findbugs

我在我的项目上运行 FindBugs 并且看到了一些 FindBugs 抱怨潜在错误的实例，但我对它的编码方式感到满意，并且相信它不会产生实际的错误。

我正在翻阅 FindBugs 文档，但找不到“安静”/抑制这些“误报”的方法，因此当我将来运行 FindBugs 时，它不会抱怨我想要抑制的特定错误。

这可能吗？还是 FindBugs 的反哲学？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:24:45.533

使用 findbugs SuppressWarnings 注释对方法、类或声明进行注释。例如：

```
@edu.umd.cs.findbugs.annotations.SuppressWarnings(
            value = "NP",
            justification = "if null, it'll throw a NPE as documented") 
```

有关 FindBugs 注释的更多信息，请[点击此处](http://findbugs.sourceforge.net/manual/annotations.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:23:03.757

您可以使用注释抑制警告：http: [//findbugs.sourceforge.net/manual/annotations.html](http://findbugs.sourceforge.net/manual/annotations.html)

或使用过滤器：http: [//findbugs.sourceforge.net/manual/filter.html#d0e1812](http://findbugs.sourceforge.net/manual/filter.html#d0e1812)

# ruby-on-rails - Rails 项目无法启动 - 意外错误：期待 $end

> ID：10177833
> 
> 赞同：1
> 
> 时间：2012-04-16T16:16:57.500
> 
> 标签：ruby-on-rails, ruby

[我想从这个 git 存储库](http://git://github.com/barmstrong/ribbot.git)中获取 ribbot 一个开源代码。我已经下载了 rails 及其必要的 gem，以及 mongo db 并安装了“捆绑包”。但是在运行项目时出现以下错误。

如何解决？

> /Library/Ruby/Gems/1.8/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:234:in `load': /Users/hansarijanto/Desktop/Impact/ribbot/config/initializers/session_store.rb :4:
> 
> 语法错误，意外 ':'，期待 $end (SyntaxError) ...sion_store :cookie_store, key: '_ribbot_session', :domain =>...

我已经使用语法错误跟踪文件 session_store.rb 目前看起来像这样：

```
# Be sure to restart your server when you modify this file.

# See environment specific overrides also
Ribbot::Application.config.session_store :cookie_store, key: '_ribbot_session', :domain => :all, :expire_after => 10.years

# Use the database for sessions instead of the cookie-based default,
# which shouldn't be used to store highly confidential information
# (create the session table with "rails generate session_migration")
# Ribbot::Application.config.session_store :active_record_sto 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:20:43.100

您正在使用 Ruby 1.8，[但](http://breakthebit.org/post/8453341914/ruby-1-9-and-the-new-hash-syntax)在`config/initializers/session_store.rb`. 以下片段：

```
key: '_ribbot_session' 
```

应该

```
:key => '_ribbot_session' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:26:38.477

由于 ribbot 使用的是 ruby​​ 1.9，您应该更新您的 ruby​​ 版本，而不是更改代码以使其工作，当前的 ruby​​ 版本是 1.9.3 [http://www.ruby-lang.org/en/downloads/](http://www.ruby-lang.org/en/downloads/)

安装说明

*   如果您使用的是 mac 操作系统：

[http://pragmaticstudio.com/blog/2010/9/23/install-rails-ruby-mac](http://pragmaticstudio.com/blog/2010/9/23/install-rails-ruby-mac)

*   如果您使用的是 ubuntu linux：

[http://www.rubyinside.com/how-to-install-ruby-1-9-2-and-rails-3-0-on-ubuntu-10-10-4148.html](http://www.rubyinside.com/how-to-install-ruby-1-9-2-and-rails-3-0-on-ubuntu-10-10-4148.html)

*   如果您使用的是 Windows： [http ://rubyinstaller.org/](http://rubyinstaller.org/)

# asp.net - asp.net DataGrid 文件结构并链接回它

> ID：10177835
> 
> 赞同：3
> 
> 时间：2012-04-16T16:17:10.353
> 
> 标签：asp.net

我正在使用数据网格：

```
<asp:DataGrid runat="server" ID="articleList" UseAccessibleHeader="true" AutoGenerateColumns="false" AlternatingItemStyle-BackColor="#EEEEEE" HeaderText="File Name">
    <Columns>
        <asp:HyperLinkColumn DataNavigateUrlField="DirectoryName" DataTextField="Name" HeaderText="File Name" />
        <asp:BoundColumn DataField="LastWriteTime" HeaderText="Modified" ItemStyle-HorizontalAlign="Center" DataFormatString="{0:f}" />
        <asp:BoundColumn DataField="Length" HeaderText="Size" ItemStyle-HorizontalAlign="Right" DataFormatString="{0:#,### bytes}" />
        <asp:BoundColumn DataField="Extension" HeaderText="Type" ItemStyle-HorizontalAlign="Left" />
    </Columns>
</asp:DataGrid> 
```

这是我的代码隐藏页面：

```
protected void Page_Load(object sender, EventArgs e)
{
    DirectoryInfo dirInfo = new DirectoryInfo(Server.MapPath("examfilemanager"));

    articleList.DataSource = dirInfo.GetFiles();
    articleList.DataBind();
} 
```

这个目录里面的文件是：

```
01.jpg
02.jpg
MyDoc.doc 
```

我正在尝试为客户提供直接链接以单击并下载此链接。似乎我能得到的唯一链接是文件夹examfilemanager 中的名称“01.jpg”。

文件信息属性的名称属性只返回名称。(01.jpg)

链接的 href 是 01.jpg，我需要这样才能`examfilemanager/01.jpg`使这成为可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:11:21.290

尝试这个：

```
<asp:HyperLinkColumn DataNavigateUrlField="Name" 
      DataTextField="Name" 
      HeaderText="File Name"
      DataNavigateUrlFormatString="~\examfilemanager\{0}" /> 
```

# c# - 在文本框中编译代码并保存到 exe

> ID：10177841
> 
> 赞同：0
> 
> 时间：2012-04-16T16:17:27.307
> 
> 标签：c#, compiler-construction, compilation, exe

是否可以在文本框中编译任何给定的 C# 代码，然后将其保存到 exe？

这可能吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T16:22:55.417

对的，这是可能的。您可以使用[CodeDOM](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)。这是[一个例子](http://blogs.msdn.com/b/lukeh/archive/2007/07/11/c-3-0-and-codedom.aspx)：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.CSharp;
using System.CodeDom.Compiler;
class Program
{
    static void Main(string[] args)
    {
        var csc = new CSharpCodeProvider(new Dictionary<string, string>() { { "CompilerVersion", "v3.5" } });
        var parameters = new CompilerParameters(new[] { "mscorlib.dll", "System.Core.dll" }, "foo.exe", true);
        parameters.GenerateExecutable = true;
        CompilerResults results = csc.CompileAssemblyFromSource(parameters,
        @"using System.Linq;
            class Program {
              public static void Main(string[] args) {
                var q = from i in Enumerable.Rnge(1,100)
                          where i % 2 == 0
                          select i;
              }
            }");
        results.Errors.Cast<CompilerError>().ToList().ForEach(error => Console.WriteLine(error.ErrorText));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:24:45.883

除了在运行时编译代码之外，您还可以将文本框中的代码保存到磁盘，然后使用`csc.exe`它来编译它。该命令类似于以下内容：

```
%systemroot%\Microsoft.NET\Framework\v3.5\csc /out:filename.exe filename.cs 
```

# jquery - Rails 3，在生产中运行时“找不到”javascript

> ID：10177843
> 
> 赞同：1
> 
> 时间：2012-04-16T16:17:32.553
> 
> 标签：jquery, ruby-on-rails, assets, production, precompiled

我知道它与资产有关，我确实预编译了资产

```
bundle exec rake assets:precompile 
```

但是浏览器只为一个 javascript (jquery.formalize.min.js) 文件给了我 404，由于某种原因没有生成该文件。然而，在预编译的 application-xxxxxx.js 中有 jquery.formalize.min.js 的代码。

我将它包括在内：

```
<%= javascript_include_tag "formalize/jquery.formalize.min", "main" %> 
```

Chrome 中的错误消息如下所示：

```
GET http://example.com/assets/jquery.formalize.min-724f21bf646762e539aa18c8db1d4d43.js 404 (Not Found) 
```

形式化 js 文件的完整路径是 app/assets/formalize/jquery.formalize.min.js。

当然，application.js 加载正常。

```
<%= javascript_include_tag "application", "main" %> 
```

如何加载formalize/jquery.formalize.min.js？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:03:53.437

检查您的清单文件，默认情况下是 app/assets/javascript/application.js。//= 条目控制哪些文件被预处理到组合文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:38:45.097

这是由于另一个事实，即 v3 以上的 Rails 没有类似的东西：

```
config.assets.precompile += %w( *.js *.css ) 
```

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/10218740/rails-javascript-asset-missing-after-precompile)。

# javascript - PhoneGap 焦点（）故障

> ID：10177844
> 
> 赞同：2
> 
> 时间：2012-04-16T16:17:37.240
> 
> 标签：javascript, css, ios, cordova

我正在开发适用于 iOS 的 PhoneGap 应用程序。我有一个功能，当用户导航到页面时，它会自动关注主要字段。会发生什么：

1.  field.focus() 被调用
2.  键盘弹出
3.  视口似乎发生了变化（见图）
4.  几毫秒后（明显的持续时间），它看起来也应该如此。

我猜它与PhoneGap提供的视口有关，这是一个渲染故障。是否有针对此的 CSS 或 JS 修复？

![在此处输入图像描述](../Images/59f4d2ac8cf8ded8380ae56771ef0712.png)

# c++ - 合并 IplImage 和 cv::Mat 的设计决策是什么？

> ID：10177850
> 
> 赞同：3
> 
> 时间：2012-04-16T16:17:48.737
> 
> 标签：c++, opencv

在 OpenCV 2.0 中，他们从具有单独的图像和矩阵类转换为一个统一的类，称为`cv::Mat`. 那里的设计决定是什么？对我来说，我每天都使用图像和矩阵，它们是非常不同的对象，只是碰巧有一个共同点：它们都可以在网格中访问。但是，在我看来，使矩阵成为矩阵的事情是您可以做到`y = A*x`，其中 A 是 m x n，x 是 n x 1，y 是 m x 1。当 A 是图像时，这几乎没有意义会想做这个操作。

`CV_32FC3`合并这些类也有需要模板和奇数矩阵类型（如3 通道浮点矩阵/图像）的讨厌的副作用。既然我知道从事 OpenCV 工作的人并不疯狂，那么让他们合并图像和矩阵类的设计决策是什么？是代码重用吗？不知何故是效率吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:59:20.707

主要缺点是你不能重载'*'来做乘法，但我认为你不应该为比内置类型更复杂的东西重载'*'。

什么是卷积核——图像还是矩阵？

您只需学习一次所有处理程序/ctor 函数 - 而不是两组

# jqplot - jqPlot 单独更改轴刻度标签颜色

> ID：10177856
> 
> 赞同：1
> 
> 时间：2012-04-16T16:18:28.810
> 
> 标签：jqplot

在 jqPlot 中，是否可以单独更改轴刻度标签的颜色？

例如，我希望它们都是黑色的，但我希望它们中的两个是蓝色的。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:12:35.597

您可以看到，即使是示例和选项，我们也可以为所有刻度提供单个字体系列、颜色，您只能在 jqplot 图表中为不同系列定义不同的颜色

# qt - 在 Linux 上的 QFileDialog 中过滤可执行文件

> ID：10177858
> 
> 赞同：4
> 
> 时间：2012-04-16T16:18:35.087
> 
> 标签：qt, pyqt

我正在尝试制作一个文件选择器来选择一个程序（可执行文件）。

我对 QDir 和 QFileDialog 文档的理解是，下面应该显示一个只有可执行文件的文件对话框。但是，即使目录中有可执行文件，它也根本不显示文件（也没有目录）。

```
 self.browseDialog = QtGui.QFileDialog()
    self.browseDialog.setFilter(QtCore.QDir.Executable | QtCore.QDir.Files)
    self.browseDialog.exec_() 
```

难道我做错了什么？这可以实现吗？我还想做一些更复杂的事情：显示可执行文件*或*以某些扩展名结尾的文件。

我在 Ubuntu Maverick 上使用 PyQt 4.7.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-27T14:46:05.570

我正在使用 PyQt5，但只需要 .txt 文件就必须做类似的事情。为此，我使用了 getFileOpenName() 和 filter= 选项。它对我的目的很好。函数名称已从 PyQt4 更改为 PyQt5，但下面的链接包含 PyQt4 替代品的名称。

[http://pyqt.sourceforge.net/Docs/PyQt5/pyqt4_differences.html](http://pyqt.sourceforge.net/Docs/PyQt5/pyqt4_differences.html)

> PyQt4 的 QFileDialog 的 getOpenFileNameAndFilter()、getOpenFileNamesAndFilter() 和 getSaveFileNameAndFilter() 方法现在在 PyQt5 中分别重命名为 getOpenFileName()、getOpenFileNames() 和 getSaveFileName()。PyQt5 不支持 PyQt4 的 getOpenFileName()、getOpenFileNames() 和 getSaveFileName() 实现。

# java - Jsoup - 提取文本

> ID：10177867
> 
> 赞同：8
> 
> 时间：2012-04-16T16:19:54.420
> 
> 标签：java, iteration, jsoup, text-extraction

我需要从这样的节点中提取文本：

```
<div>
    Some text <b>with tags</b> might go here.
    <p>Also there are paragraphs</p>
    More text can go without paragraphs<br/>
</div> 
```

我需要建立：

```
Some text <b>with tags</b> might go here.
Also there are paragraphs
More text can go without paragraphs 
```

`Element.text`只返回 div 的所有内容。`Element.ownText`- 不在子元素内的所有内容。两者都是错误的。遍历`children`忽略文本节点。

是否有办法迭代元素的内容以接收文本节点。例如

*   文本节点 - 一些文本
*   节点 <b> - 带有标签
*   文本节点 - 可能会在这里。
*   节点 <p> - 还有段落
*   文本节点 - 更多文本可以不带段落
*   节点 <br> - <空>

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T20:45:27.320

[Element.children()](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#children%28%29)返回一个[Elements](http://www.xom.nu/apidocs/nu/xom/Elements.html)对象 - [Element](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html)对象的列表。查看父类[Node](http://jsoup.org/apidocs/org/jsoup/nodes/Node.html)，您将看到允许您访问任意节点的方法，而不仅仅是元素，例如[Node.childNodes()](http://jsoup.org/apidocs/org/jsoup/nodes/Node.html#childNodes%28%29)。

```
public static void main(String[] args) throws IOException {
    String str = "<div>" +
            "    Some text <b>with tags</b> might go here." +
            "    <p>Also there are paragraphs</p>" +
            "    More text can go without paragraphs<br/>" +
            "</div>";

    Document doc = Jsoup.parse(str);
    Element div = doc.select("div").first();
    int i = 0;

    for (Node node : div.childNodes()) {
        i++;
        System.out.println(String.format("%d %s %s",
                i,
                node.getClass().getSimpleName(),
                node.toString()));
    }
} 
```

结果：

```
1 个文本节点
 一些文字
2 元素<b>带标签</b>
3 TextNode 可能会放在这里。
4元素<p>还有段落</p>
5 TextNode 更多文字可以不用段落
6元素<br/>

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-13T21:10:25.140

```
for (Element el : doc.select("body").select("*")) {

        for (TextNode node : el.textNodes()) {

                    node.text() ));

        }

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-16T20:21:27.853

假设您只想要文本（没有标签），我的解决方案如下。
输出是：
一些带有标签的文本可能会出现在这里。还有段落。更多文本可以不带段落

```
public static void main(String[] args) throws IOException {
    String str = 
                "<div>"  
            +   "    Some text <b>with tags</b> might go here."
            +   "    <p>Also there are paragraphs.</p>"
            +   "    More text can go without paragraphs<br/>" 
            +   "</div>";

    Document doc = Jsoup.parse(str);
    Element div = doc.select("div").first();
    StringBuilder builder = new StringBuilder();
    stripTags(builder, div.childNodes());
    System.out.println("Text without tags: " + builder.toString());
}

/**
 * Strip tags from a List of type <code>Node</code>
 * @param builder StringBuilder : input and output
 * @param nodesList List of type <code>Node</code>
 */
public static void stripTags (StringBuilder builder, List<Node> nodesList) {

    for (Node node : nodesList) {
        String nodeName  = node.nodeName();

        if (nodeName.equalsIgnoreCase("#text")) {
            builder.append(node.toString());
        } else {
            // recurse
            stripTags(builder, node.childNodes());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-21T18:41:40.773

您可以为此目的使用 TextNode：

```
List<TextNode> bodyTextNode = doc.getElementById("content").textNodes();
    String html = "";
    for(TextNode txNode:bodyTextNode){
        html+=txNode.text();
    } 
```

# php - 将成对的输入字段插入mysql

> ID：10177868
> 
> 赞同：0
> 
> 时间：2012-04-16T16:20:04.813
> 
> 标签：php, mysql, forms, input

我需要将表单中的输入值对插入 mysql 数据库。例如这里是我的输入框：

```
<input type="text" name="roomType1" size="30" />       
<input type="text" name="roomRate1" size="30" />

<input type="text" name="roomType2" size="30" />       
<input type="text" name="roomRate2" size="30" />

<input type="text" name="roomType3" size="30" />       
<input type="text" name="roomRate3" size="30" /> 
```

ETC..

我的sql数据库设置如下：

```
RoomType
RoomRate
HID 
```

所以基本上我需要弄清楚如何将两个输入字段一起传递到同一行中的每个字段中。我不确定是否应该执行一个 for 循环，或者如何获取每两个循环并使用相同的 ID 插入它。我希望这是有道理的。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:26:26.530

这些输入必须是带有 method="post" 的表单的一部分。然后，在 php 端使用这个：

```
<?php
$i = 1;
while(isset($_POST['roomType'.$i]))
{
    $roomType = $_POST['roomType'$i];
    $roomRate = $_POST['roomRate'$i];

    // perform your sql statements here

    $i++;  
}
?> 
```

由于您的输入是成对的，因此只需检查其中一个是否存在就足够了；

# silverlight - Silverlight，WCF RIA 构建失败，TFS MSBuild

> ID：10177870
> 
> 赞同：0
> 
> 时间：2012-04-16T16:20:15.167
> 
> 标签：silverlight, msbuild, ria

我们有一个大型 Silverlight、基于 WCF RIA 的解决方案，可以在我的桌面上使用 VS2010 构建得很好。但是，在 TFS 服务器上，我们看到以下内容：

```
ViewModels\MyVM.cs (47): The type 'TestService.Web.SystemAccount' exists in both
'd:\Builds\1\MyProduct\Binaries\Silverlight\TestService.dll' and 'd:\Builds\1\MyProduct
\Binaries\Silverlight\CommonService.dll' 
```

.. 和 ...

```
Generated_Code\TestService.Web.g.cs (37476): The type 'TestService.Web.GroupToRule' in
'd:\Builds\1\MyProduct\Sources\Source\UI\TestService\Generated_Code\TestService.Web.g.cs' 
conflicts with the imported type 'CommonService.GroupToRule' in 'd:\Builds\1\MyProduct
\Binaries\silverlight\CommonService.dll'. Using the type defined in 'd:\Builds\1\MyProduct
\Sources\Source\UI\CommonService\Generated_Code\CommonService.Web.g.cs'. 
```

直到周末开发人员检查（不幸的是，检查非常大）之前，所有人都很高兴。我们已经查看了变更集中的变化，但没有发现任何东西。

我们使用的方法与此[问题](https://stackoverflow.com/q/7503617/134294)和[此处](https://stackoverflow.com/a/7558566/134294)提到的方法类似，因此我们有一个预构建解决方案来避免 RIA 代码生成过程可能引入的循环引用。

我们的怀疑是构建顺序已被更改并正在检查这一点，但任何人都可以提出一些诊断步骤或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:23:34.930

我们解决了根本原因（我们认为，至少它现在可以在 TFS 上使用 MSBuild 进行编译）。

我们有自己的 DomainServiceFactory 来创建 WCF RIA 域服务实例。在这个工厂中，我们使用自定义对象注入当前经过身份验证的用户（假设用户已经登录并且域服务需要经过身份验证的用户）。此外，我们还有其他服务使用的公共域服务。

好的，设置场景。

造成这种混乱的罪魁祸首似乎是我们用来表示经过身份验证的用户的自定义对象。不知何故，我们在编译时遇到了这种情况，即从公共域服务和其他引用公共域服务的域服务中可以看到该对象。

解决方案是使用服务定位器将公共域与需要它的服务分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:10:26.117

根据给定的信息，很难说任何合理的事情。

如果您确定在某些变更集之前一切都构建良好，您可以获得该“好”修订版和后来的“坏”修订版的**干净**构建日志并比较它们。一个好的差异工具可能有助于完成这项任务。由于 MSBuild 日志可能非常冗长，因此可能需要一些可能是手写的分析工具。

另外，请在您引用的主题中查看[此答案。](https://stackoverflow.com/a/7558566/795861)这个建议可以被认为是官方的，因为 MSBuild 团队的一个人在他们的博客中提出了同样的建议。

# objective-c - ASIHTTPRequest 通过 3G 和 WIFI 返回不同格式的 html

> ID：10177871
> 
> 赞同：0
> 
> 时间：2012-04-16T16:20:19.730
> 
> 标签：objective-c, ios, xcode, asihttprequest

我正在使用 ASIHTTPRequest 下载一些 http 并解析 iut 以从中获取某些文本，但是我发现在使用 3G 时我的解析不起作用（导致崩溃）。似乎返回的 html 中没有像使用 WiFi 时那样的换行符。

这是移动网络正在做的事情，还是 iPhone 正在做的事情？有什么方法可以更改返回的 html 以使它们相同，以便我可以相同地解析它们？

# c# - 除了文本框进行编辑时，如何阅读 gridview 单元格？

> ID：10177875
> 
> 赞同：0
> 
> 时间：2012-04-16T16:20:26.427
> 
> 标签：c#, asp.net, visual-studio-2010, gridview

我有点进退两难，我不知道如何解决这个问题。如果我正在编辑网格视图，我正在读取这些行

```
 cmd.Parameters.Add("@X", SqlDbType.Char).Value = ((TextBox)GridView1.Rows[e.RowIndex].Cells[15].Controls[0]).Text;
 cmd.Parameters.Add("@Y", SqlDbType.Char).Value = ((TextBox)GridView1.Rows[e.RowIndex].Cells[15].Controls[0]).Text; 
```

当 gridview 处于编辑模式时，单元格 X 和 Y 都有文本框，因为这是默认的编辑模式。我手动创建了列，我希望单元格 X 为“只读”。如何更改代码以便在没有文本框的情况下读取单元格 X？帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:30:57.553

这可能有点太简单了，但是如何：

```
 var lblHolder = (Label) GridView1.FindControl("lblMyLabel")
    cmd.Parameters.Add("@X", SqlDbType.Char).Value = lblHolder.Text 
```

直接搜索你的标签（或任何持有你价值的东西）

然后你的网格视图看起来像这样

```
 <asp:GridView ID="gvData" runat="server"                         AutoGenerateColumns="false" Width="95%" Font-Names="Verdana">
                    <RowStyle Height="40px" />
                    <Columns>
                        <asp:TemplateField HeaderText="Col1">
                            <ItemTemplate>
                                <asp:Label ID="lblMyLabel" runat="server" 
                                     Text='<%# eval("MyDataBaseField")%>' />
                                   </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView> 
```

然后，您只需要将数据源连接到网格。当然还有很多其他方法可以做到这一点，但是通过它们的 ID 搜索控件比试图找出它们在数组中的编号要容易得多

# objective-c - 调整 NSWindow 的大小以适应子 NSView

> ID：10177882
> 
> 赞同：5
> 
> 时间：2012-04-16T16:20:56.753
> 
> 标签：objective-c, cocoa, nswindow

我有一个空的主 NSWindow 和 5 个 NSView。NSViews 有不同的按钮和标签等，窗口是空的。显示的第一个视图是一个菜单，链接到其他视图并返回。这工作正常，视图切换良好。

但是，如果 NSWindow 是某个大小，并且 NSView 更大，那么它会溢出 NSWindow 并被切断。

有什么办法可以让我这样做：

```
[_window setContentView: theNewView]; 
```

还要`_window`调整大小以适应新视图？如果这是可能的，这可以用动画来完成吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-16T17:05:44.300

`-[NSWindow setContentSize:]`这样做（没有动画）。给它所需的内容视图大小，它将适当地调整内容视图和窗口的大小，例如

```
[_window setContentSize:theNewView.frame.size];
[_window setContentView:theNewView]; 
```

对于动画，您需要手动计算窗口大小`frameRectForContentRect:`，然后使用以下命令更改窗口的框架`animate:YES`：

```
[_window setContentView:theNewView];
NSRect viewScreenFrame = /*translate theNewView.frame to screen coordinates*/;
NSRect wndFrame = [_window frameRectForContentRect:viewScreenFrame];
[_window setFrame:wndFrame display:YES animate:YES]; 
```

# c# - C# - RadGrid 在 RadGrid 外部的控件中重新绑定

> ID：10177883
> 
> 赞同：0
> 
> 时间：2012-04-16T16:20:58.303
> 
> 标签：c#, asp.net, .net, telerik, radgrid

我有一个 RadGrid 控件。当我在其排序/过滤事件处理程序中调用 RadGrid.Rebind() 时，数据会更新。当我在 RadGrid 外部的链接按钮内调用 rebind() 时，会触发 NeedDataSource 并适当更改数据源，但 RadGrid 本身不会使用新数据源更新单元格值。我可以让它刷新的唯一方法是手动刷新浏览器。

有人知道为什么会这样吗？

（为 .NET 使用 Telerik AJAX 控件）

编辑：我的 Linkbutton 没有包裹在 RadAjaxPanel 中。我现在把它放在 RadGrid 和链接按钮周围的标记中。什么都没有发生..我不知道这会如何改变事情..当然我必须对这个 RadAjaxPanel 做点什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:25:53.410

如果您使用的是 a`RadAjaxPanel`或`RadAjaxManager`，则需要确保`LinkButton`是在 a 中`RadAjaxPanel`或定义为管理器中的设置，其中 RadGrid 是`UpdatedControls`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:41:08.270

控件是否都包含在 RadAjaxPanel 中，或者如果您使用的是 RadAjaxManager，LinkBut​​ton 是否会更新 RadGrid？

如果将网格和链接按钮包装在 RadAjaxPanel 中，它应该可以工作。

# c#-4.0 - WebRequest.在路径中创建未编码的反斜杠

> ID：10177884
> 
> 赞同：1
> 
> 时间：2012-04-16T16:21:03.817
> 
> 标签：c#-4.0, url-encoding

我有一个休息服务，需要将加密密钥作为路径的一部分传递。我对密钥进行了 urlencode，它在放置在浏览器中时效果很好。但是，在我的代码中，我使用了 WebRequest.Create 并且它似乎替换了由加密密钥生成的任何反斜杠。这导致服务认为它是路由的一部分并以 404 失败。这是 .net 框架中的已知缺陷还是我遗漏了什么？似乎是一件大事。

编辑：（简化示例代码）

字符串键 = System.Web.HttpUtility.UrlEncode(TripleDESEncode("sharedkey")); string uri = string.Format("http://mydomail.com/deposit/{0}.{1}", key, "json");

//uri 在这里看起来像这样[http://mydomail.com/deposit/FHnapfF5yBCEKt3%2f3YOQ5g%3d%3d.json](http://mydomail.com/deposit/FHnapfF5yBCEKt3%2f3YOQ5g%3d%3d.json)

HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(uri);

//现在HttpWebRequest中的地址是这样的... //http://mydomail.com/deposit/FHnapfF5yBCEKt3/3YOQ5g%3d%3d.json

希望这会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:46:51.803

好的，我最终与我的客户达成了妥协，并跳过了直接序列化为 base64 的加密。由于我所传递的性质，这只是可以接受的。未来将需要加密，我认为这是一个需要解决的主要问题。至少提出了一个解决方法。如果我遇到一个，我会发布它。

感谢大家！

最终代码：

HttpUtil.UrlEncode(Convert.ToBase64String(Encoding.UTF8.GetBytes("sharedKey")));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:15:21.453

`UrlPathEncode`当值是路径的一部分而不是查询字符串的一部分时使用该方法：

```
string key = System.Web.HttpUtility.UrlPathEncode(TripleDESEncode("sharedkey")); 
```

# cakephp - AppModel aftersave，获取控制器函数名

> ID：10177889
> 
> 赞同：0
> 
> 时间：2012-04-16T16:21:17.050
> 
> 标签：cakephp, cakephp-2.1, cakephp-model

我正在尝试记录每个写入操作，因此我在 AppModel 中使用 afterSave 和 afterDelete 回调。基本上我需要登录（暂时）：模型，控制器功能，登录用户数据和远程ip似乎我能够获得所有这些，但我不知道如何获得控制器功能名称. 这是我现在拥有的 aftersave 功能：

```
public function afterSave($created) {
    App::uses('Folder', 'Utility');
    $month = date("y-m");
    if(!is_dir('../tmp/logs/'.$month)) {
        $dir = new Folder('../tmp/logs/'.$month, true);
    }
    App::uses('CakeSession', 'Model/Datasource');
    $user_id = CakeSession::read('Auth.User.username');
    if($created) {
        $id =   'New';
    } else {
        $id =   $this->data[$this->alias]['id'];
    }
    $str = 'WRITE Action. Model: '.$this->alias.'. Controller: functon_name. ID:'.$id.'. Username: '.$user_id.'. Client IP: '.$this->getIP();
    CakeLog::write($month.'/'.date("d-m-y"), $str);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:53:45.760

您正在模型上执行此操作，该模型不了解控制器（实际上不应该）。我建议将`CakeRequest`对象复制到模型中，以便您获得该信息。这是一种方法：

```
//controller
function beforeFilter() {
  $this->{$this->modelClass}->request = $this->request;
} 
```

然后您可以从模型中访问请求对象。用于`$this->request['params']['action']`获取当前调度的动作。

值得建议您可能希望将其移至`read()`自定义数据源上的方法，因为`afterSave()`可能会被跳过，因此不会被记录。

# php - 如何在 PHP 中将带分隔符的字符串存储在数组中

> ID：10177892
> 
> 赞同：0
> 
> 时间：2012-04-16T16:21:45.397
> 
> 标签：php

我有一个这样的字符串：

```
$string = '"Joe Bob" "John Doe" "Amber Page" "Jordan Tole"'; 
```

我想将它存储在一个数组中，其中“”之间的每个项目都是数组内部的一个元素。

例如

```
$Array = StringToArray($string); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:26:29.350

使用[PHP 的 explode 函数](http://php.net/manual/en/function.explode.php)和[substr](http://us3.php.net/manual/en/function.substr.php)的组合， 您可以构建一个名称数组，如下所示：

```
$string = '"Joe Bob" "John Doe" "Amber Page" "Jordan Tole"';
$string = substr($string,1,-1);
$names = explode('" "', $string); 
```

这将输出以下内容：

```
Array
(
    [0] => Joe Bob
    [1] => John Doe
    [2] => Amber Page
    [3] => Jordan Tole
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:39:03.667

您可以使用[`preg_split`](http://php.net/preg_split)将字符串拉开：

```
$string = '"Joe" "John" "Amber" "Jordan"';

$names = preg_split('~(^"|" "|"$)~', $string, 0, PREG_SPLIT_NO_EMPTY); 
```

结果：

```
array(4) {
  [0]=> string(3) "Joe"
  [1]=> string(4) "John"
  [2]=> string(5) "Amber"
  [3]=> string(6) "Jordan"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:23:29.583

等待您更正上面的字符串..

```
$string = '"Joe" "John" "Amber" "Jordan"'; 
```

使用爆炸。`<?php $arr = explode('" "', $string);`将为您提供以下内容：`$arr = array( 0 => '"Joe"', 1 => '"John"'...`

* * *

但是，如果您的意思是：

```
<?php
$string = "Joe John Amber Jordan";
$arr = explode(' ', $string);
// will provide the samething without the " and ". 
```

# java - JSONArray 对象未在 JSP 上显示

> ID：10177893
> 
> 赞同：0
> 
> 时间：2012-04-16T16:21:46.580
> 
> 标签：java, jsp, struts, arrays

我陷入了困境。请帮帮我。

我正在使用struts1.2。我已经以我在 struts-config.xml 中定义的一种形式制作了 JSONObjects 的 JSONArray。我想在我的 jsp 上使用这个 JSONArray。我无法做到这一点..请帮助我。

我的 stuts-config 代码是

```
<form-beans>
    <form-bean name="Admin" type="form.adminForms.Admin" />
</form-beans>

<action-mappings>
    <action path="/adminLoginAction" type="action.adminActions.AdminLoginCheck" name="Admin">
    <forward name="success" path="baseLayoutAdmin" />
    <forward name="failure" path="loginFailure" />
</action>
</action-mappings> 
```

我的tiles-defs.xml

```
<definition name="baseLayoutAdmin" path="/adminJSP/newsletter.jsp">
    <put name="title" value="AMSS::NL::Control Panel" />
    <put name="header" value="../adminJSP/header.jsp" />
    <put name="secondHeader" value="../adminJSP/belowHeader.jsp" /> 
    <put name="center" value="../adminJSP/center.jsp" />
    <put name="right" value="../adminJSP/right.jsp" />
    <put name="footer" value="/adminJSP/footer.jsp" />
</definition> 
```

我想在 center.jsp 上使用我的 form 属性（上面定义了！！）

中心.jsp

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"  %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<%@ page language="java" import="net.sf.json.JSONArray" %>
<form name="Admin" method="post">
    ${Admin.userName}
    ${Admin.listOfExcelFileJSONArray}
</form> 
```

在上面，用户名显示但 listOfExcelFileJSONArray 没有显示。这两个属性都在我的表单中设置。

请为我提供一种在 JSP 上使用此 JSONArray 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:29:40.150

是的..我在我的表单管理员中错过了一个基本的东西，即我没有为 listOfExcelFileJSONArray 变量创建 getter 和 setter ！

当我制作这些时，它也出现在 JSP 上。！！

# c++ - 如何在使用 Eclipse CDT 进行调试时向 gdb 提示符输入命令？

> ID：10177897
> 
> 赞同：19
> 
> 时间：2012-04-16T16:22:19.577
> 
> 标签：c++, gdb, eclipse-cdt

我正在使用 Eclipse (Helios SR1) CDT 进行 C++ 开发。Eclipse 与 GDB 接口进行调试，但我不知道如何在通过 Eclipse 接口进行调试时手动向 GDB 输入命令。例如，能够输入`p myVar`而不是单击并滚动局部变量窗口会很好。

注意：我想使用 Eclipse 界面进行调试的唯一原因是因为我喜欢它显示正在逐步执行的代码的方式。因此，如果有人有其他建议可以让我查看正在逐步执行的代码，请提出建议！（我用过DDD，但不是特别喜欢。）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-16T20:46:10.237

其实很简单。

开始调试（eclipse 将切换到 Debug Perspective）。然后确保显示控制台视图。如果它没有显示它（窗口-> 显示视图...）。在该视图中，您将找到“显示选定的控制台”图标。选择旁边的向下箭头，选择名为“gdb”的控制台（不是 gdb 跟踪！）。

您在此控制台中输入的内容将直接转发到 gdb（您可以使用所有 gdb 命令）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T17:07:59.883

如果你不是在 Windows 下调试，你可以试试 gdb [TUI](http://davis.lbl.gov/Manuals/GDB/gdb_21.html "文字界面")。习惯起来有点尴尬，有时也有问题，但总的来说效果还不错。您可以在一个窗口中看到正在逐步执行的代码，同时仍然可以输入命令。

假设您的 gdb 版本是使用`--enable-tui`配置选项构建的，只需启动 gdb 并按下`C-x C-a`进入 TUI。然后，为了确保您可以看到代码和命令窗口，请按`C-x 2`（对于两个窗口布局）我已经有一段时间不得不使用 TUI，但它应该可以满足您的要求。

# java - 如何在 Java 中使用 ArrayList

> ID：10177898
> 
> 赞同：1
> 
> 时间：2012-04-16T16:22:44.703
> 
> 标签：java, arrays, arraylist

我有 3 个类（**Car**（超类）、**CarToRent**和**CarToSell**（扩展汽车）。

我正在制作一个界面（CarCompany）并希望在`ArrayList`其中存储一辆汽车。我该怎么做呢？请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:28:18.877

在一个接口中，你不能设置属性，因为它们默认都有 final 修饰符，所以只需要为你的接口声明`get`and`set`方法。让实现者拥有属性并覆盖这些方法。

```
public interface CarCompany {
    List<? extends Car> getCarList();
    void setCarList(List<? extends Car> carList);
} 
```

更新：

首先，`ArrayList`即使可以，也不应该使用接口，而是使用`List`接口`ArrayList`实现该接口（有关此的更多信息：[“编程到接口”是什么意思？](https://stackoverflow.com/q/383947/1065197)）：

```
List<Car> carList = new ArrayList<Car>(); 
```

其次，如果你有一个超类，列表属性不应该用于超类，而是用于支持所有该类生成的模板。让我们看一个示例：您有一个以不同方法返回 a`List<CarToRent>`和 a的 DAO 类。`List<CarToSell>`稍后，在商务舱中，您需要阅读 a 的所有元素并将汽车的 a`List<Car>`用于`price`某些公式。你会创建一个方法来转换 from `List<CarToRent>`to`List<Car>`和一个 for `List<CarToSell>`to`List<Car>`吗，如果以后你需要为 a 创建一个新的 like 子级，`Car`你会创建第三个转换器吗？因此，您可以使用that 为您做“肮脏的工作”，而不是所有的痛苦：`WreckedCar``CarWorkshop``List<? extends Car>`

```
public void executeSomeFormula(List<? extends Car> carList) {
    //getting the actual VAT value (just for a sample);
    double actualVAT = getActualVATValue();
    //every object in the list extends Car, so it can be threatened as a Car instance
    for(Car car : carList) {
        car.setTotalPrice(car.getPrice() * (1 + actualVAT));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:24:15.550

您应该创建一个`ArrayList<CarCompany>`能够存储来自实现您的`CarCompany`接口的类的各种对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:33:36.097

```
import java.util.ArrayList;

ArrayList<TYPE> al = new ArrayList<TYPE>();
so if you need CarCompany
eg.
ArrayList<CarCompany> al = new ArrayList<CarCompany>(); 
```

另请查看有关[Class ArrayList的文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T16:33:45.333

你`interface`不应该有一辆`List`汽车。它可以定义 getter 和设置方法，`List`但不应该定义它。实现接口的具体类应该定义`List`.

```
public class CarCompany{
    private List<Car> myList = new ArrayList<Car>();
} 
```

# php - PHP cURL没有获取网页

> ID：10177899
> 
> 赞同：-1
> 
> 时间：2012-04-16T16:22:45.297
> 
> 标签：php, curl

正如您在代码中看到的，我正在尝试执行 FQL 查询并检索结果。我生成的查询完全没问题，因为我已经通过浏览器对其进行了测试。我首先使用 file_get_contents() 来检索网页，但它让我遇到了 400 错误请求错误。有人建议改为使用 cURL。

下面给出的代码段给了我$query 的**错误**。如果我取消注释 urlencode() 行，脚本会继续运行并达到最大执行时间限制。我究竟做错了什么？

```
 $limit = $start + 100;
    $query = "select post_id, created_time, actor_id, message, attachment, comments, likes, type  from stream where source_id = $id limit $start, ". $limit;
    $url = "https://graph.facebook.com/fql?q=$query&access_token=$token";
    //$url = urlencode($url);
    echo $url.'<br>';
    $curl_handle=curl_init();
    curl_setopt($curl_handle, CURLOPT_URL, $url);
    curl_setopt($curl_handle, CURLOPT_CONNECTTIMEOUT, 2);
    curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl_handle, CURLOPT_PROXY, "tcp://10.3.3.3:8080"); 
    curl_setopt($curl_handle, CURLOPT_USERAGENT, 'Hi!');
    $query = curl_exec($curl_handle);
    var_dump($query);
    curl_close($curl_handle); 
```

编辑：访问另一个 URL，file_get_contents 给了我这个错误“无法打开流：无法通过代理连接到 HTTPS 服务器”。由于这也是 HTTPS，cURL 也可能面临同样的问题。我认为这可能会导致答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:25:21.220

你应该是`urlencode`ing`$query`和`$token`，而不是整个 URL。

```
$url = "https://graph.facebook.com/fql?q=" . urlencode($query) . "&access_token=" . urlencode($token); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:27:49.320

对于初学者，您`$query`可以在转储变量之前重用它。

`$query`其次，在您的（第一个）变量上使用 urlencode 。（Facebook 的 $token 不需要 url 编码）

* * *

**编辑**（不适合在评论中）

我自己试过这个：

```
<?
    $token = $_GET["token"];
    $id = $_GET["id"];
    $start = 0;
    $limit = $start + 100;
    $query = urlencode("select post_id, created_time, actor_id, message, attachment, comments, likes, type from stream where source_id = $id limit $start, ". $limit);
    $url = "https://graph.facebook.com/fql?q=$query&access_token=$token";

    echo $url.'<br>';
    $curl_handle=curl_init();
    curl_setopt($curl_handle, CURLOPT_URL, $url);
    curl_setopt($curl_handle, CURLOPT_CONNECTTIMEOUT, 2);
    curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, 1);

    $curlres = curl_exec($curl_handle);
    var_dump($query);
    print "\n\n";
    var_dump($curlres);
    curl_close($curl_handle);
?> 
```

这没有问题。如果你想试试这个，请PM我，我会给你网址。我不喜欢将它发布到野外.. 或许来源是你的代理..

* * *

**编辑**

哦，到底是什么......发疯了！;)

[http://hal.su/on/fbCurlTest.php?token=the%20token&id=the%id&start=0](http://hal.su/on/fbCurlTest.php?token=the%20token&id=the%id&start=0)

将%20token 替换为您的令牌，并将%20id 替换为您的ID。

# c++ - 方法名称之前的这个 const 是什么意思？

> ID：10177904
> 
> 赞同：0
> 
> 时间：2012-04-16T16:22:55.160
> 
> 标签：c++

在我们的一本教科书中，建议我们应该使用 C++ 中的接口作为一种良好的设计实践。他们给出了下面的例子；

```
class IAnimation
{
  public:
      virtual void VAdvance(const int deltaMilisec) = 0;
      virtual bool const VAtEnd() const = 0;
      virtual int const VGetPostition() const = 0;
}; 
```

我没有得到以下含义：

```
virtual bool const VAtEnd() const = 0;
virtual int const VGetPostition() const = 0; 
```

我知道 const 在 () 之后使用以使它们可以从 const 实例中调用。但是 VAtEnd 和 VGetPosition （方法名称）之前的 const 是什么意思？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T16:23:47.157

这意味着返回类型是 const，它与以下内容相同：

```
virtual const bool VAtEnd() const = 0;
virtual const int VGetPostition() const = 0; 
```

但是它没有实际意义，因为无论如何都会复制返回值。

如果您要返回一个对象：

```
struct A
{
    void goo() {}
};

const A foo() {return A();}

int main()
{
    A x = foo();
    x.goo();      //ok
    foo().goo();  //error
} 
```

# latex - 乳胶 - \addsec 和 headepline

> ID：10177907
> 
> 赞同：1
> 
> 时间：2012-04-16T16:22:57.433
> 
> 标签：latex

当我写的时候`\addsec{Acronymes}`，LaTeX 把它放在目录中，并做标题部分。当我写的时候`\addsec*{Acronymes}`，LaTeX 没有把它放在目录中，也没有把它写在 headepline 部分。但我希望它不会出现在目录中，而是出现在头条中。

那么怎么做呢？

这就是我为此所做的：

```
\documentclass[a4paper, 12pt, german, headsepline, footsepline, listtotoc, bibtotoc]     {scrartcl}
\bibliographystyle{annotate}

\usepackage[T1]{fontenc} 
\usepackage{lmodern} 
\usepackage[ansinew]{inputenc} 
\usepackage[ngerman]{babel}
\usepackage[babel, german=quotes]{csquotes}

\usepackage[printonlyused]{acronym}

%head and footsepline
\usepackage[headsepline,plainheadsepline]{scrpage2}
\clearscrheadfoot
\pagestyle{scrheadings}
\automark[subsection]{section}
\ihead{my title}
\ohead{\headmark}
\ifoot{my name}
\ofoot{\pagemark}

\usepackage{hyperref}
\hypersetup{
colorlinks,
citecolor=blue,
filecolor=blue,
linkcolor=blue,
urlcolor=blue
}

\begin{document}

\input{include/Abstract}
\newpage
\tableofcontents
\newpage
\listoffigures
\newpage
\listoftables
\newpage
\addsec*{Acronymes}
%\addsec{Acronymes}
\begin{acronym}
\acro{HTTP}{Hypertext Transfer Protocol}
\end{acronym}

\end{document} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:23:47.463

您可以暂时删除`\addcontentsline`- 负责向 ToC 添加元素的宏 - 使用

```
{% \begingroup
 \renewcommand{\addcontentsline}[3]{}% Remove functionality of \addcontentsline
 \addsec{Acronymes}%
}% \endgroup 
```

分组通过`{`并`}`确保在分组结束后恢复命令重定义。

# php - PHP正则表达式提取HTML链接

> ID：10177910
> 
> 赞同：-1
> 
> 时间：2012-04-16T16:23:11.947
> 
> 标签：php, html, regex, hyperlink, extraction

我整个上午都在试图解决这个问题，但没有任何效果。

基本上我要做的是获取一个网站，并*特别*从页面中提取一个链接。基本上，该网站是一个论坛，在页面的最底部有一个部分，上面写着“最新成员是*MEMBERNAMEHERE* )”。成员名称是一个链接，指向他们的用户资料。我能够从页面上获取链接，但是当我将正则表达式设置为从页面上删除每个链接时，它似乎并没有走那么远。我的代码：

```
$url = "[The forum's url goes here.]";
$input = file_get_contents($url) or die("Could not access file: $url");
$regexp = "The newest member is <a.*href=\"(.*?)\".*?\>(.*)\<\/a\>+/)";
preg_match_all("The newest member is /\<a.*href=\"(.*?)\".*?\>(.*)\<\/a\>+/)", $input, $match, PREG_SET_ORDER);
echo($match[0][2]); 
```

我要在文档中匹配的是

```
The newest member is <a href="http://forumurl.com/profile/usernumber">MEMBERNAME</a>) 
```

我需要将 MEMBERNAME 从上面的脚本中删除。该网址几乎位于页面的最底部，所以我想知道为什么它不能正常工作。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:31:05.527

代码将改为：

```
$url = "[The forum's url goes here.]";
$input = file_get_contents($url) or die("Could not access file: $url");
$regexp = "/The newest member is \<a.*href=\"(.*?)\".*?\>(.*)\<\/a\>\)/";
preg_match_all($regexp, $input, $match, PREG_SET_ORDER);
echo($match[0][2]); 
```

这成功回显：“会员名”。

但是，您需要注意同一案例不超过一个，或者如果您在多个论坛中这样做，您需要确保这是一致的。否则，您可以在正则表达式函数的开头或结尾包含更多代码。

您可以使用此[正则表达式测试工具](http://www.solmetra.com/scripts/regex/index.php)来帮助您，或许还可以了解更多有关 Regex 工作原理的信息。

# jquery - 使用 jquery post 重定向到操作

> ID：10177911
> 
> 赞同：0
> 
> 时间：2012-04-16T16:23:19.147
> 
> 标签：jquery, asp.net-mvc-3, post, redirect, razor

我正在使用 MVC3。我在做一个 jquery 帖子后试图重定向ToAction。

编辑：抱歉没有具体说明。每当它到达返回 RedirectToAction 时，它只是刷新同一个页面并返回到同一个当前视图。

我的查看代码如下：

```
 $("button[name='command']").click(function () {

        var checked_status = null;
        if ($("#select_all").is(':checked')) {
            checked_status = true;
        } else {
            checked_status = false;
        }

        $.post('@Url.Action("SaveInvitations", "Contractors")',
              {
                  command: $(this).val(),
                  selectedContractors: $("input[name='selectedContractors']:checked").map(function () { return $(this).val(); }).get().join(","),
                  page: $(".selected").text(),
                  CheckedAll: checked_status
              });
    }); 
```

我的控制器具有以下内容：

```
 if (command == "skip")
        {
            TempData["message"] = string.Format("No contractors where selected");
            RedirectToAction("Index", "Home");
        }
        else
        {
...
TempData["message"] = string.Format("The invitations have been send successfully.");
                Session["subModel"] = null;
                return RedirectToAction("Index", "Home");
} 
```

再说一次，我只是想在 jquery $.post 之后做一个 redirectToAction。我必须做些什么才能让它发挥作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T16:30:01.857

RedirectToAction 是一种服务器端方法。由于您正在编写 jQuery 帖子，因此您可能需要在帖子完成后执行此操作。

```
 $.post('@Url.Action("SaveInvitations", "Contractors")',
              {
                  command: $(this).val(),
                  selectedContractors: $("input[name='selectedContractors']:checked").map(function () { return $(this).val(); }).get().join(","),
                  page: $(".selected").text(),
                  CheckedAll: checked_status
              },function(){
  window.location.href='@Url.Action("Index", "Home")';
}); 
```

这是编写上述方法的另一种方法，使用显式调用`done`使其更具可读性。

```
 var url='@Url.Action("SaveInvitations", "Contractors")';
 var data =  {
                  command: $(this).val(),
                  selectedContractors: $("input[name='selectedContractors']:checked")
                          .map(function () { return $(this).val(); }).get().join(","),
                  page: $(".selected").text(),
                  CheckedAll: checked_status
             };
 $.post(url,data)
  .done(function(){
        window.location.href='@Url.Action("Index", "Home")';
   }); 
```

如果您在 jQuery ajax 操作之后进行重定向，为什么不直接调用 Action 方法（普通表单发布）然后从那里进行重定向？人们通常使用 jQuery ajax 操作来进行部分页面更新。你确定要这样做吗？

# asp.net - ASP.net DataGrid 向我不想要的表添加额外信息

> ID：10177915
> 
> 赞同：0
> 
> 时间：2012-04-16T16:23:33.503
> 
> 标签：asp.net

这是 DataGrid 对我的表所做的：

```
<table id="ContentPlaceHolder1_articleList" cellspacing="0" style="border-width:0px;border-collapse:collapse;" headertext="File Name" rules="all"> 
```

如何从表格中删除不必要的信息？

我不想要 cellSpacing，任何风格的东西。我用 CSS 处理所有这些，因为这些是内联的，所以它覆盖了我的 CSS 声明。

我不在乎是否存在 ID 或 rules="all" （甚至不确定它是做什么的）或 HeaderText 是否存在，但我很想摆脱其余的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:57:35.200

正如 Curt 建议的那样，您可以使用`Repeater`控件来更好地控制输出。另一个选项是`ListView`控件，它为您提供比实际更多的选项`Repeater`。

```
<asp:ListView ID="ListView1" runat="server">
    <LayoutTemplate>
        <table class="myclass">
            <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
        </table>
    </LayoutTemplate>
    <ItemTemplate>
        <tr>
            <td><%# Eval("ColumnName", "{0:#,###} bytes") %></td>
        </tr>
    </ItemTemplate>
</asp:ListView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:26:37.073

如果您真的想完全控制您的桌子，我建议您改用[中继器](http://www.w3schools.com/aspnet/aspnet_repeater.asp)。与`DataGrid`控件不同的是，`Repeater`控件不会呈现不在内部的任何 HTML，`ItemTemplate`从而使您可以完全控制呈现的代码。

```
<table>
  <tr>
    <td>Column Header</td>
  </tr>
  <asp:repeater id="rep" runat="server">
    <itemtemplate>
      <tr>
        <td>
           <%#eval("ColumnName") %>
        </td>
      </tr>
  </asp:repeater>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:09:28.363

> 由于 Eval/DataItem 会给 object/String 返回值。为了转换成 3,546 字节输出，需要将其转换成整数。对于该`onitemdatabound`事件，将需要注册。

## 标记

```
<asp:ListView ID="ListView1" runat="server" onitemdatabound="rpt_ItemDataBound">
    <LayoutTemplate>
        <table class="myclass">
            <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
        </table>
    </LayoutTemplate>
    <ItemTemplate>
        <tr>
            <td><asp:Label ID="lbl" runat="server" ></asp:Label></td>
        </tr>
    </ItemTemplate>
</asp:ListView> 
```

* * *

## 代码背后

```
protected void rpt_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item)
    {
        Label lbl= (Label)e.Item.FindControl("lbl");
        lbl.Text = String.Format("{0:#,### bytes}", 
              Convert.ToInt32(((YourClassName)e.Item.DataItem).YourProperty);
    }
} 
```

# c - openSSL：如何初始化公钥加密的密钥？

> ID：10177916
> 
> 赞同：0
> 
> 时间：2012-04-16T16:23:37.683
> 
> 标签：c, linux, ssl, openssl, public-key-encryption

对于使用 openSSL API 进行公钥加密，如何在 C 程序中初始化密钥（公钥和私钥），给定 *.key 文件格式的私钥和 *.pem 文件格式的公钥：

```
 EVP_PKEY *key;
 /* How is key initialized ?
  */
  ctx = EVP_PKEY_CTX_new(key); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:31:39.317

尝试这个：

```
 EVP_PKEY *pkey;
        FILE *f = fopen("<path for your PEM or DER encoded key>", "rb");
        if (f == NULL){
                // error handling...
        }
    //if your key is PEM encoded use this
        pkey = PEM_read_PUBKEY(f, NULL, NULL, NULL); // pkey now contains the pubKey. 
    //We are passing NULL to the others parameters because we dont need password to read a public key

    //if your key is DER encoded use this
        pkey = d2i_PUBKEY_fp(f, NULL);

        if (pkey == NULL){
                // error handling...
        } 
```

我没有测试，但应该工作。

# custom-controls - 使用 WATIR WebDriver 单击按钮

> ID：10177921
> 
> 赞同：5
> 
> 时间：2012-04-16T16:24:09.840
> 
> 标签：custom-controls, watir, watir-webdriver

我整个早上都在为此苦苦挣扎，希望能得到一些帮助。我在一个网页上有这个按钮，它会拉出一个控制面板，让用户选择要显示的小部件。我正在尝试使用 watir webdriver 和 firefox 9.0 来启动它，但一点运气都没有。我可以登录该站点，进入包含该按钮的页面，但无法单击“选择您的功能”按钮。

```
<div class="personalizationButton">
  <span class="personalizationStatus"></span>
  &nbsp;
  <b class="widgetPanelLink neo-button button-white">
    <span>CHOOSE YOUR FEATURES</span>
  </b>
</div>` 
```

我一直专注于使用 div 类“personalizationButton”，但也许我需要指出那个“b 类”？只是不知道如何格式化。以下是我尝试过的一些示例

```
$browser.div(:class, 'personalizationButton').when_present.click 
$browser.button(:text => 'CHOOSE YOUR FEATURES').click 
$browser.button(:div => 'personalizationButton').click 
```

等等等等......只是不确定我的格式是否正确。我看着它进入页面，我在页面上看到“选择您的功能”按钮，但它从不点击它。通常我会收到这样的错误，具体取决于使用的版本：

```
unable to locate element, using {:text=>"CHOOSE YOUR FEATURES", :tag_name=>"button"} 
```

这是我认为应该可以工作的版本，当我尝试它时，我没有收到任何错误，但在浏览器中也没有发生任何事情：

```
$browser.div(:class => "personalizationButton").click 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T17:45:12.480

我没有在 HTML 中看到任何固有的可点击（带输出）内容。使用 IRB 输出，它显示它正在查找 div，但单击它时没有任何操作。该`<b>`元素只是“粗体”样式，因此我们不需要尝试。

如果您可以使用文本 CHOOSE YOUR FEATURES 访问跨度，那应该是您的按钮。

```
$browser.span(:text => "CHOOSE YOUR FEATURES").click 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:42:40.607

. . 我试过用 godaddy.com 做同样的事情，买它确实有效。在主页上有一个标记为“立即购买”的按钮，使用下面的代码 brow.div(:class => 'gdhp-domain-link gdhp-rounded-corners').span(:text => 'Buy Now') .click 我是

# php - 使用 PHP 和 Mysql 登录的不同用户角色

> ID：10177926
> 
> 赞同：-2
> 
> 时间：2012-04-16T16:24:21.033
> 
> 标签：php, mysql, oop

我有一个用于执行管理功能的项目，所以我的问题是这个。我会尽量说清楚。我将有一个超级用户来更新其他普通用户/人（作为我们的客户）的所有信息。客户/普通用户登录时只会看到他们的信息和下载由超级用户上传的文件，而普通用户看不到。

因此，如果您是 Client:#01，您将看到仪表板（欢迎页面）和您的信息。任何人都可以为此建议可能的数据库设计。如何在用户和文件表之间使用左/右 sql-joins？

**更新**

我有一个用户表以及用户所属的公司表。所以本质上我想要这样的东西::

$sql = 选择用户表中的所有用户名并将 = 传递给给定的表单，然后将该用户名左或右加入他所属的公司。

然后他们会看到他们的信息。如果登录成功。因为用户 #01 属于公司 #03 /#01 等... USER TABLE 看起来如此

```
`id` int(11) NOT NULL AUTO_INCREMENT,
`fname` varchar(50) NOT NULL,
'lname` varchar(100) NOT NULL,
`username` varchar(50) ,
`password` varchar(100) ,
`company`  varchar(50) // the company name that ther user belongs to
PRIMARY KEY (`id`) 
```

**公司表**

```
'id' int(11) not null auto_increment,
'user_id' int(11) //This is to tie the users to this table
'description' varchar(text),
'filename' varchar(25) not null,
'mimetype' varchar (25) not null
PRIMARY KEY ('id') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:52:48.653

好吧，这取决于您想要多简单或多复杂。有了这样的东西，我通常会保持相对简单，并有一个主用户数据库（适用于所有用户）示例：

```
 CREATE TABLE IF NOT EXISTS `user` (
    `user_id` int(255) NOT NULL AUTO_INCREMENT,
    `user_name` varchar(50) NOT NULL,
    `user_pass` varchar(100) NOT NULL,
    `user_permissions` tinyint(1) NOT NULL DEFAULT '0',
    `active` tinyint(1) NOT NULL DEFAULT '1',
    `date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`)
  ) ENGINE=MYISAM; 
```

然后我可能会有第二张权限表，具体取决于我将拥有多少权限。如果您将拥有的只是用户和超级用户，那么您可能只需为用户分配值 0，然后为超级用户分配值 1。

然后在您的 PHP 脚本中，它会根据用户的“user_permissions”值来区别对待用户。

现在，如果您打算拥有许多不同级别的权限，那么我肯定会再创建至少一个表来定义权限示例：

```
 CREATE TABLE IF NOT EXISTS `permission` (
    `permission_id` int(255) NOT NULL AUTO_INCREMENT,
    `permission_name` varchar(100) NOT NULL,
    `permission_value` int(10) NOT NULL,
    PRIMARY KEY (`id`)
  ) ENGINE=MYISAM; 
```

然后在权限表中，您可以分配各种不同的权限...读取、写入、发布、管理员、普通用户、超级用户等。

这只是一个非常简单的起点。希望有帮助。

# java - Eclipse 及其虚假文件管理

> ID：10177929
> 
> 赞同：0
> 
> 时间：2012-04-16T16:24:31.527
> 
> 标签：java, eclipse

我有一个相当大的 Eclipse 项目，在过去的 6 个月中经历了几次重大的重构。已添加、删除、重命名（使用`Refactor >> Rename`）包，这些包中的源文件也是如此。

今天我想数一数我在项目根目录下有多少源文件，并被 AgentRansack 返回的内容吓了一跳。我期待大约 200 - 250 的东西，但它转回了 ~325。我开始查看文件列表，果然，其中一些是我很久以前删除的 Java 文件。

我打开 Windows 资源管理器并查看了我的项目目录，当然，看到它们都只是坐在我的文件系统上，就像它们什么都没发生过一样。

显然，Eclipse 正在呈现我的项目目录的“视图”（某种形式），并使用某种元数据来标记“已删除”、重命名等。但对于文件系统，没有任何变化。

通常我不会对此感到不安，但我只是去导入一个*曾经*被打包为 的类`org.me.myproj.fizz.Widget`，但后来被重构为打包为`org.me.myproj.buzz.Widget`. 当我点击快捷方式 ( `Ctrl+Shift+O`) 时，Eclipse 询问我`Widget`想要哪个 - 但第一个甚至不应该存在了！！！

当我在 Eclipse 中删除包/文件夹/文件时，或者我通过 重命名/移动它们时`Refactor >> Rename/Move`，**如何确保更改对底层文件系统是永久性的？**

# objective-c - Objective c 在异步 https 请求中检查服务器证书

> ID：10177931
> 
> 赞同：0
> 
> 时间：2012-04-16T16:24:36.030
> 
> 标签：objective-c, ssl, asynchronous, https, certificate

我构建了一个使用 ssl 服务器连接的 iPhone 应用程序。到目前为止一切进展顺利。目前我对服务器证书有一个小问题。

我从该服务器下载了证书。所以我的项目浏览器中有证书。

我正在尝试将来自服务器的证书与我之前在请求的委托方法中下载的证书进行匹配 `- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {}`

问题是，我完全不知道如何在代码中引入 .cer 文件来检查密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:48:31.000

在这里找到完美的示例代码：[http ://www.iphonedevsdk.com/forum/iphone-sdk-development/89542-ssl-connection.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/89542-ssl-connection.html)

复制-粘贴-完成，对我有用。我不知道为什么其他snipplets这么复杂。唯一的问题是本地证书必须在钥匙串中。但我完全看不出缺点。也许有人可以告诉我区别。

```
// prompted by SSL connection 
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
if([protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust])
{NSLog(@"Attempting SSL Connection...");
    return YES;
}

NSLog(@"Cannot connect through SSL");
return NO;}
-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)theChallenge{   
challenge = theChallenge;

// "trust" related authentication challenge, prompted by SSL connection
if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust])
{
    //This takes the serverTrust object and checkes it against your keychain
    SecTrustResultType result;
    SecTrustEvaluate(challenge.protectionSpace.serverTrust, &result);

    if (result == kSecTrustResultInvalid)
        NSLog(@"SSL Challenge Result: Invalid");
    else if (result == kSecTrustResultProceed)
        NSLog(@"SSL Challenge Result: Proceed");
    else if (result == kSecTrustResultConfirm)
        NSLog(@"SSL Challenge Result: Confirm");
    else if (result == kSecTrustResultDeny)
        NSLog(@"SSL Challenge Result: Deny");
    else if (result == kSecTrustResultUnspecified)
        NSLog(@"SSL Challenge Result: Unspecified");
    else if (result == kSecTrustResultRecoverableTrustFailure)
        NSLog(@"SSL Challenge Result: Recoverable Trust Failure");
    else if (result == kSecTrustResultFatalTrustFailure)
        NSLog(@"SSL Challenge Result: Fatal Trust Failure");
    else if (result == kSecTrustResultOtherError)
        NSLog(@"SSL Challenge Result: Other Error");

    if(result == kSecTrustResultProceed || result == kSecTrustResultConfirm || result == kSecTrustResultUnspecified)
    {
        [challenge.sender useCredential:[NSURLCredential credentialForTrust: challenge.protectionSpace.serverTrust] forAuthenticationChallenge: challenge];
    }
    else
    { 
        [self promptForTrust];
    }
}}
-(void)promptForTrust{//display an error if there are any issues with the connection
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Cannot Verify Server Identity" message:[NSString stringWithFormat:@"xxxx can't verify the identity of \"%@\". Would you like to continue anyway?", [[Model sharedManager] returnServer]] delegate:self cancelButtonTitle:@"Continue" otherButtonTitles:@"Cancel",@"Details",nil];
[alert show];
[alert release];}-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{if (buttonIndex == 0)
{
    //May need to add a method to add serverTrust to the keychain like Firefox's "Add Exception"

    // if the user decides to trust
    [challenge.sender useCredential:[NSURLCredential credentialForTrust: challenge.protectionSpace.serverTrust] forAuthenticationChallenge: challenge];
}
else if (buttonIndex == 1)
{// if the user decides not to trust 
    [[challenge sender] cancelAuthenticationChallenge:challenge];
}
else if (buttonIndex == 2)
{
    // show details of certificate

}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:07:52.953

这是我使用的一种方法：

```
NSArray *paths = [[NSBundle mainBundle] pathsForResourcesOfType:@"p12" inDirectory:nil];
NSMutableArray *idents = [NSMutableArray array];
for (NSString *certPath in paths) {
    CFDataRef certData = (CFDataRef)[[NSData  alloc] initWithContentsOfFile:certPath];
    const void *keys[] = {kSecImportExportPassphrase};
    const void *values[] = {(CFStringRef)kPassword}; // kPassword should be your password
    CFDictionaryRef optsDict = CFDictionaryCreate(NULL, keys, values, 1, NULL, NULL);

    OSStatus status = -1;
    CFArrayRef items = NULL;
    status = SecPKCS12Import(certData, optsDict, &items);
    if (status == 0) { // noErr or errSecSuccess
       CFDictionaryRef item = CFArrayGetValueAtIndex(items, 0);
       SecIdentityRef bundleIdent = (SecIdentityRef)CFDictionaryGetValue(item, kSecImportItemIdentity);
       [idents addObject:(id)bundleIdent];
    }
    if (optsDict) CFRelease(optsDict);
    if (items) CFRelease(items);
    if (certData) CFRelease(certData);
} 
```

瞧——你已经准备好了一切`SecIdentityRefs`。`idents`

* * *

编辑：这是[Apple 文档](https://developer.apple.com/library/mac/documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW10)，它描述了如何做你想做的事。

# python - Spotify 最佳之前计划。我究竟做错了什么？

> ID：10177932
> 
> 赞同：0
> 
> 时间：2012-04-16T16:24:36.737
> 
> 标签：python, puzzle, spotify

我正在尝试回答 Spotify 问题[Best Before](http://www.spotify.com/se/jobs/tech/best-before/)并且我的代码对于我能想到的每个测试用例都能正常工作。但是，根据他们的服务器，我错了。

谁能告诉我我的代码哪里出错了？

这是我的代码：

```
from itertools import permutations
import datetime
import fileinput

def checkdate(d,m,y):
    """Gets possible values for day, month and year 
        and generates valid permutations of dates"""
    b = permutations([d,m,y])
    for p in b:
        try:
            yield datetime.date(p[0], p[1], p[2])
        except ValueError:
            yield None

def validvalue(a):
    return a > 0 and a <= 2999

c = raw_input()
d,m,y = c.split('/')
d,m,y = int(d), int(m), int(y)

if validvalue(d) and validvalue(m) and validvalue(y):
    valid = [x for x in checkdate(d,m,y) if x is not None]
    if valid:
        print "2" + str(min(valid))[1:]
    else:
        print "%s is illegal" % c
else:
    print "%s is illegal" % c 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:55:02.390

从问题描述：

> 2000 可以表示为“2000”、“00”或“0”

您的代码不接受`00`或`0`作为有效年份。

# android - 检测受损的 oauth 消费者密钥/秘密？

> ID：10177939
> 
> 赞同：1
> 
> 时间：2012-04-16T16:25:04.607
> 
> 标签：android, oauth, consumer

我正在使用 oauth 开发一个利用 google 服务的 android 应用程序。我想知道是否有任何方法可以检测我的消费者密钥/秘密是否已被泄露，以便我可以在需要时采取行动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:34:26.967

一旦你部署你的应用程序，你的密钥/秘密就被泄露了。由于最终您必须将其作为字符串传输，因此任何隐藏的尝试都只是徒劳的混淆努力。真的没有办法解决。

# java - Java 游戏 - ClassCastException

> ID：10177943
> 
> 赞同：1
> 
> 时间：2012-04-16T16:25:22.173
> 
> 标签：java, swing, java-2d, classcastexception, jscrollbar

我正在开发一个简单的 java 游戏，我的滚动条引发了异常。滚动条应该是一个“游戏滑块”。

> 线程“Thread-3”java.lang.ClassCastException 中的异常：sun.java2d.d3d 的 sun.java2d.d3d.D3DRenderer.copyArea（未知来源）处的 sun.java2d.NullSurfaceData 无法转换为 sun.java2d.d3d.D3DSurfaceData .D3DSurfaceData.copyArea(Unknown Source) at sun.java2d.SunGraphics2D.doCopyArea(Unknown Source) at sun.java2d.SunGraphics2D.copyArea(Unknown Source) at javax.swing.BufferStrategyPaintManager.copyArea(Unknown Source) at javax.swing.RepaintManager .copyArea(Unknown Source) at javax.swing.JViewport.blitDoubleBuffered(Unknown Source) at javax.swing.JViewport.windowBlitPaint(Unknown Source) at javax.swing.JViewport.setViewPosition(Unknown Source) at javax.swing.plaf.basic .BasicScrollPaneUI$Handler.hsbStateChanged(Unknown Source) at javax.swing.plaf.basic。BasicScrollPaneUI$Handler.stateChanged(Unknown Source) at javax.swing.DefaultBoundedRangeModel.fireStateChanged(Unknown Source) at javax.swing.DefaultBoundedRangeModel.setRangeProperties(Unknown Source) at javax.swing.DefaultBoundedRangeModel.setValue(Unknown Source) at javax.swing。 JScrollBar.setValue(Unknown Source) at GameEnvironment.GamePanel.gameUpdate(GamePanel.java:171) at GameEnvironment.GamePanel.run(GamePanel.java:73) at java.lang.Thread.run(Unknown Source)GamePanel.gameUpdate(GamePanel.java:171) 在 GameEnvironment.GamePanel.run(GamePanel.java:73) 在 java.lang.Thread.run（未知来源）GamePanel.gameUpdate(GamePanel.java:171) 在 GameEnvironment.GamePanel.run(GamePanel.java:73) 在 java.lang.Thread.run（未知来源）

代码行如下：

```
 if (reachedMiddle)
        scrollPane.getHorizontalScrollBar().setValue(player.getX() - (widthHorizontalScrollBar / 2)); 
```

异常将或多或少随机引发。到目前为止我还没有想通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:32:39.483

我会确保这段代码在 GUI 事件线程上运行。如果您在其他线程上调用 Swing 组件，您可能会遇到奇怪的随机错误。

查看使用[SwingUtilities.invokeLater(Runnable)](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)执行更新 Swing 组件的任务。

# google-app-engine - App Engine 复制数据存储区

> ID：10177947
> 
> 赞同：0
> 
> 时间：2012-04-16T16:25:33.220
> 
> 标签：google-app-engine

我现在使用 python 2.7 并且有数据存储管理员工作我想将数据存储从一个应用程序复制到另一个应用程序。我找到的所有文档都指的是 Python 2.5 哪里是 Python 2.7 的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:46:37.510

Datastore Admin 独立于您使用的版本，因此您不必担心。请通过管理控制台启用 Datastore Admin。

# c# - 解析文本文件，处理新行？

> ID：10177952
> 
> 赞同：0
> 
> 时间：2012-04-16T16:25:54.043
> 
> 标签：c#

我正在尝试编写一个简单的程序，它需要一个文本文件，将所有字符设置为小写并删除所有标点符号。我的问题是，当有回车（我相信这就是它的名字）和新行时，空格被删除。

IE

> 这是一个
> 测试语句

变成

> 这是见证

第一行的最后一个单词和下一行的第一个单词连接在一起。

这是我的代码：

```
public static void ParseDocument(String FilePath, String title)
    {
        StreamReader reader = new StreamReader(FilePath);
        StreamWriter writer = new StreamWriter("C:/Users/Matt/Documents/"+title+".txt");

        int i;
        char previous=' ';
        while ((i = reader.Read())>-1)
        {
            char c = Convert.ToChar(i);
            if (Char.IsLetter(c) | ((c==' ') & reader.Peek()!=' ') | ((c==' ') & (previous!=' ')))
            {
                c = Char.ToLower(c);
                writer.Write(c);                    
            }
            previous = c;

        }

        reader.Close();
        writer.Close();
    } 
```

这是一个简单的问题，但我想不出一种检查新行以插入空格的方法。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:34:48.920

取决于您要如何处理空行，但这可能有效：

```
 char c = Convert.ToChar(i);

 if (c == '\n')  
    c = ' ';     // pretend \n == ' ' and keep ignoring \r

 if (Char.IsLetter(c) | ((c==' ') & reader.Peek()!=' ') | ((c==' ') & (previous!=' ')))
 {
    ... 
```

* * *

我确实希望这是一个练习，在通常的实践中，你会阅读一个带有`System.IO.File.ReadAllLines()`或的文本文件`System.IO.File.ReadLines()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:29:49.500

尝试

> myString.Replace(Environment.NewLine, "替换文本")

[替换字符串 C# 中的换行符](https://stackoverflow.com/questions/238002/replace-line-breaks-in-a-string-c-sharp)

# ruby-on-rails - Rails 3.2 NoMethodError (undefined method `price=') in line_item 使用敏捷书

> ID：10177953
> 
> 赞同：1
> 
> 时间：2012-04-16T16:26:06.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在关注敏捷 Web 开发书籍教程，在第 12 章的检查中进行了一些小改动。

我收到以下错误：

```
NoMethodError (undefined method `price=' for #<LineItem:0x00000103a0de18>):
app/models/cart.rb:11:in `add_deal'
app/controllers/line_items_controller.rb:45:in `create' 
```

这是我的购物车模型：

```
class Cart < ActiveRecord::Base
# attr_accessible :title, :body
has_many :line_items, dependent: :destroy

def add_deal(deal_id)
  current_item = line_items.find_by_deal_id(deal_id)
  if current_item
    current_item.quantity += 1
  else
    current_item = line_items.build(deal_id: deal_id)
    current_item.price = current_item.deal.price
  end
current_item
end
def total_price
  line_items.to_a.sum { |item| item.total_price }
end
end 
```

这是我在 line_items_controller 中的创建操作，其中相关的第 45 行冻结：

```
def create
  @cart = current_cart
  deal = Deal.find(params[:deal_id])
  @line_item = @cart.add_deal(deal.id) 
```

我的订单项模型：

```
class LineItem < ActiveRecord::Base
attr_accessible :cart_id, :deal_id, :quantity
belongs_to :order
belongs_to :deal
belongs_to :cart

def total_price
  deal.price * quantity
end
end 
```

这是我的交易模型：

```
class Deal < ActiveRecord::Base
  attr_accessible :description, :expiration, :featured, :image_url, :inventory, :price, :sold, :title, :value, :deal_id

has_many :line_items

before_destroy :ensure_not_referenced_by_any_line_item

validates :price, numericality: {greater_than_or_equal_to: 0.01}
validates :title, uniqueness: true
validates :title, :description, :image_url, presence: true

private

# ensure that there are no line items referencing this product
def ensure_not_referenced_by_any_line_item
  if line_items.empty?
    return true
  else
    errors.add(:base, 'Line Items present')
    return false
  end
end
end 
```

当我尝试使用控制台时，item.deal.price 工作得很好，但 item.price 却不行。

在 line_item 模型中，我尝试了 attr_accessible :price 但它确实解决了任何问题。

我检查了我的代码和书，我根本看不出有任何显着差异。

一个想法是为 LineItems 的价格设置一个数据库字段，但本书没有这样做，它违反了 DRY 原则。

任何帮助将不胜感激，因为我已经盯着源代码几个小时并且找不到任何错误。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:52:48.747

你在看书的时候分心了。`LineItem`模型确实包含该`price`字段。这完全符合 DRY 原则，因为`Product`未来有可能改变 a 的价格，并且`LineItem`模型显示为交易历史。

# java - Hibernate 4.0 的事务锁定问题

> ID：10177959
> 
> 赞同：3
> 
> 时间：2012-04-16T16:26:21.427
> 
> 标签：java, hibernate, locking, timeout, derby

有时我遇到锁定问题，例如：

```
java.sql.SQLTransactionRollbackException: A lock could not be obtained within the time requested 
```

我正在使用带有 C3p0 池的 Hibernate，并将 Hibernate 配置为乐观锁定。

我还有一些代码绕过休眠并通过独立配置的 c3p0 池与数据库对话。这纯粹是因为这段代码在我迁移到 Hibernate 之前就已经存在并且运行良好，所以我当时认为没有必要更改它。

现在我想知道拥有两个独立配置的 c3p0 池是否会导致问题。如果不是，我如何追查这些异常的原因，我将池设置为 20 到 100 个连接，并且我最多同时有 12 个线程，我认为当我完成它们时我的所有事务/会话都将被关闭。

编辑：现在有单个池但仍然出现问题，出现以下错误但没有详细说明其原因，我注意到的一件事是它总是说**托管线程：3**

```
Exception with lookup
12:42:36,627  WARN ThreadPoolAsynchronousRunner:608 - com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@1ff96a2 -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!
12:42:36,628  WARN ThreadPoolAsynchronousRunner:624 - com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@1ff96a2 -- APPARENT DEADLOCK!!! Complete Status: 
    Managed Threads: 3
    Active Threads: 3
    Active Tasks: 
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StatementCloseTask@fdfb9a (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0)
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StatementCloseTask@914847 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2)
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StatementCloseTask@205390 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1)
    Pending Tasks: 
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StatementCloseTask@4e171b
        com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask@ceeecb
        com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask@19f7cec
        com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask@1c299f9
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StmtAcquireTask@10ab38a
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StmtAcquireTask@1916a2f
        com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask@1d23fbf
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StmtAcquireTask@573b7c
        com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask@1027733
        com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask@dfd9b0
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StmtAcquireTask@4cecbb
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StatementCloseTask@4a0d0b
        com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask@19e809d
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StmtAcquireTask@10de0f8
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StmtAcquireTask@2ce568
Pool thread stack traces:
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0,5,JAIKOZ Thread Group]
        org.apache.derby.impl.jdbc.EmbedStatement.close(Unknown Source)
        com.mchange.v1.db.sql.StatementUtils.attemptClose(StatementUtils.java:41)
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StatementCloseTask.run(GooGooStatementCache.java:404)
        com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2,5,JAIKOZ Thread Group]
        org.apache.derby.impl.jdbc.EmbedStatement.close(Unknown Source)
        com.mchange.v1.db.sql.StatementUtils.attemptClose(StatementUtils.java:41)
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StatementCloseTask.run(GooGooStatementCache.java:404)
        com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1,5,JAIKOZ Thread Group]
        org.apache.derby.impl.jdbc.EmbedStatement.close(Unknown Source)
        com.mchange.v1.db.sql.StatementUtils.attemptClose(StatementUtils.java:41)
        com.mchange.v2.c3p0.stmt.GooGooStatementCache$1StatementCloseTask.run(GooGooStatementCache.java:404)
        com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547) 
```

可能是这个问题

[https://forum.hibernate.org/viewtopic.php?p=2390809](https://forum.hibernate.org/viewtopic.php?p=2390809)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T01:37:09.587

鉴于这`SQLTransactionRollbackException`是数据库级锁定故障，单独配置的 c3p0 池不是导致此问题的原因。如果是这种情况，您将无法运行同一个基于 Hibernate 的应用程序的两个实例。

这里的第一步应该是使用调试器在抛出异常时停止。然后检查其他数据库连接池线程，看看它们是否正在对数据库进行任何操作。如果是，那将是第一个查看的地方，因为您可能遇到了由数据库级锁引起的死锁。如果您可以在仍然重现问题的同时减少池中的线程数，则此步骤可能会更容易。

虽然原因可能是另一个线程获得了数据库锁，然后没有释放。如果是这种情况，您将不得不使用您的数据库工具来找出抛出异常的线程无法获取哪些资源，然后尝试找出谁拥有该锁以及原因。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:02:55.160

我在嵌入式环境中遇到过 Hibernate 问题。我们使用 SQLite 来执行客户端数据库操作。我发现嵌入式数据库处理多线程操作的方法有限或粗糙。您可能必须在提交甚至可能启动任何事务之前检查数据库上的锁定。

使用 SQLite，您可以在事务正在进行时让线程进入读取。但是，您不能让一个或多个线程同时写入或打开事务。此外，很难找到真正的坚持者，您不能在任何查询发生时提交事务！否则，您将遇到与您遇到的类似的锁定异常。

我实际上创建了一个信号量锁来跟踪所有打开的读取操作并启用与事务的安全交互：

```
 /**
     * Enter read section. Increment the latch so commiting
     * threads know how many reads are left till it's appropriate
     * to write/commit.
     *
     * @throws InterruptedException the interrupted exception
     */
    public void enterReadSection() throws InterruptedException {
        if (enableReadLock && (transactionLock.availablePermits()==0)) {
            readLock.lock();
            try {
                log.debug("Waiting on database unlock.");
                readWait.await();
            } finally {
                readLock.unlock();
                log.debug("Database Unlocked.");
            }
        }

        if (enableReadLock) {
            synchronized(this) {
                latch = new CountDownLatch((int)latch.getCount()+1);
            }
        }
    }

    /**
     * Exit read section.
     */
    public void exitReadSection( ) {
        if (enableReadLock)
            latch.countDown();
    }

   /**
     * Trx lock.
     *
     * @throws InterruptedException the interrupted exception
     */
    public void trxLock() throws InterruptedException {
        if (enableTrxLock)
            transactionLock.acquire();
    }

    /**
     * Trx unlock.
     */
    public void trxUnlock() {
        if (enableTrxLock)
            transactionLock.release();
    }

    /**
     * Commit lock.
     *
     * @throws InterruptedException the interrupted exception
     */
    public void commitLock() throws InterruptedException {
        if (enableCommitLock) {
            commitLock.acquire();

            //Wait for reading threads to complete
            latch.await();
        }
    }

    /**
     * Commit unlock.
     *
     * @throws InterruptedException the interrupted exception
     */
    public void commitUnlock() throws InterruptedException {
        if(enableCommitLock) {
            commitLock.release();
            releaseRead();
        }
    } 
```

我知道，那里正在发生一些深刻的魔法，但这是我经过多次尝试和错误后想出的。我希望它可以更简单，但通常客户端/服务器前端到数据库卸载了大部分并发问题，所以你不会看到它与 Oracle、mysql、postgres 等一样多......

我想您在使用 derby 时也需要某种并发检查机制、信号量或锁存器。我对 derby 了解不多，但听起来它也内置了原始的线程安全机制。您可能必须解决这些限制。祝你好运！

# c# - LINQ：将 OrderBy 添加到查询

> ID：10177963
> 
> 赞同：0
> 
> 时间：2012-04-16T16:26:26.853
> 
> 标签：c#, xml, linq

我在大学项目的终点线上，我有点坚持完成一个查询。工作查询如下所示：

```
var Report = from query in Document.Descendants("order")
                         group query by query.Element("seller").Value
                            into qGroup
                            select new Orders
                            {
                                Seller = qGroup.Key,
                                Quantity = qGroup.Sum(p => int.Parse(p.Element("quantity").Value)).ToString()
                            }; 
```

如果您能告诉我如何按给定的“数量”按降序排列结果，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:30:04.943

```
var Report = (from query in Document.Descendants("order")
              group query by query.Element("seller").Value into qGroup
              select new Orders
              {
                  Seller = qGroup.Key,
                  Quantity = qGroup.Sum(p => int.Parse(p.Element("quantity").Value)).ToString()
              })
              .OrderByDescending(order => order.Quantity); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:33:41.857

请这样做：

```
var Report = (from query in Document.Descendants("order")
                            group query by query.Element("seller").Value
                            into qGroup
                            select new Orders
                            {
                                Seller = qGroup.Key,
                                Quantity = qGroup.Sum(p => int.Parse(p.Element("quantity").Value)).ToString()
                            }).OrderByDescending(x => x.Quantity); 
```

呼！！！！

（对[LINQ Orderby 降序查询表示敬意](https://stackoverflow.com/questions/5344805/linq-orderby-descending-query)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:50:34.607

Skippy 和 Andrei 的答案有效，但你也可以写成

```
var Report = from query in Document.Descendants("order")
             group query by query.Element("seller").Value
             into qGroup
             let qty = qGroup.Sum(p =>int.Parse(p.Element("quantity").Value)).ToString()
             orderby qty descending
             select new Orders
             {
                 Seller = qGroup.Key,
                 Quantity = qty
             }; 
```

如果您宁愿将其全部保存在一种语法中。

# ios - 如何从弹出窗口中显示的 UIViewController 中找到 UIPopoverController？

> ID：10177965
> 
> 赞同：20
> 
> 时间：2012-04-16T16:26:32.513
> 
> 标签：ios, ipad, popover

使用 UIViewController 的实例，有什么方法可以找到用来呈现它的 UIPopoverController 吗？我还想首先找到显示 UIPopoverController 的 UIViewController。

我通常会使用委托或其他类型的通知将信号从显示的视图控制器发送到显示的视图控制器，但在这种情况下，我正在尝试创建一个可重用的自定义 segue 来关闭弹出框，然后转到另一个视图在主视图中。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-02T05:49:43.567

你会认为这很简单（`UIViewController`甚至有私有`_popoverController`财产！），但事实并非如此。

一般的答案是，您必须在创建时保存对`UIPopoverController`它所`UIViewController`呈现的 的引用`UIViewController`。

1.  如果您以`UIPopoverController`编程方式创建，那么是时候将引用存储在您的`UIViewController`子类中了。

2.  如果您正在使用 Storyboards 和 Segue，则可以`UIPopoverController`在方法中摆脱 segue `prepareForSegue`：

    ```
    UIPopoverController* popover = [(UIStoryboardPopoverSegue*)segue popoverController]; 
    ```

当然，请确保您的 segue 确实是 UIStoryboardPopoverSegue！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-18T18:53:00.790

我的建议是结合使用您自己的自定义属性和 UIKit 中的私有 API。为避免应用商店被拒绝，任何私有 API 都应针对发布版本进行编译，并且仅应用于检查您的实现。

首先让我们将自定义属性构建到`UIViewController`. 这允许在实现中获得一些好处，并且不需要您返回并从某个自定义视图控制器子类派生每个类。

```
// UIViewController+isPresentedInPopover.h

#import <UIKit/UIKit.h>

@interface UIViewController (isPresentedInPopover)

@property (assign, nonatomic, getter = isPresentedInPopover) BOOL presentedInPopover;

@end 
```

现在实现 - 我们将使用 Objective C 运行时的关联对象 API 来为这个属性提供存储。请注意，选择器是用于存储对象的唯一键的不错选择，因为它由编译器自动唯一，并且极不可能被任何其他客户端用于此目的。

```
// UIViewController+isPresentedInPopover.m

#import "UIViewController+isPresentedInPopover.h"
#import <objc/runtime.h>

@implementation UIViewController (isPresentedInPopover)

- (void)setPresentedInPopover:(BOOL)presentedInPopover
{
    objc_setAssociatedObject(self,
                             @selector(isPresentedInPopover),
                             [NSNumber numberWithBool:presentedInPopover],
                             OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (BOOL)isPresentedInPopover
{
    NSNumber *wrappedBool = objc_getAssociatedObject(self, @selector(isPresentedInPopover));
    BOOL userValue = [wrappedBool boolValue];
    return userValue ?: [[self parentViewController] isPresentedInPopover];
}

@end 
```

因此，将其用作类别有一个方便的副作用 - 您可以调用 the`parentViewController`并查看它是否也包含在弹出框中。这样您就可以在 a 上设置属性，`UINavigationController`并且它的所有子视图控制器都将正确响应`isPresentedInPopover`. 要使用子类完成此操作，您要么尝试在每个新的子视图控制器上设置它，要么将导航控制器子类化，或其他可怕的事情。

## 更多运行时魔法

对于这个特定问题，Objective C 运行时还必须提供更多功能，我们可以使用它们来跳转到 Apple 的私有实现细节并检查您自己的应用程序。对于发布版本，这些额外的代码将编译出来，因此在提交到商店时无需担心~~Sauron Apple 的全视之眼。~~

从中可以看出`UIViewController.h`，有一个 ivar 定义为`UIPopoverController* _popoverController`with `@package`scope。幸运的是，这仅由编译器强制执行。就运行时而言，*没有什么是神圣的，从任何地方访问该 ivar 都非常容易。*我们将对属性的每次访问添加仅调试运行时检查，以确保我们保持一致。

```
// UIViewController+isPresentedInPopover.m

#import "UIViewController+isPresentedInPopover.h"
#import <objc/runtime.h>

@implementation UIViewController (isPresentedInPopover)

- (void)setPresentedInPopover:(BOOL)presentedInPopover
{
    objc_setAssociatedObject(self,
                             @selector(isPresentedInPopover),
                             [NSNumber numberWithBool:presentedInPopover],
                             OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (BOOL)isPresentedInPopover
{
    NSNumber *wrappedBool = objc_getAssociatedObject(self, @selector(isPresentedInPopover));
    BOOL userValue = [wrappedBool boolValue];

#if DEBUG
    Ivar privatePopoverIvar = class_getInstanceVariable([UIViewController class], "_popoverController");
    UIPopoverController *popover = object_getIvar(self, privatePopoverIvar);
    BOOL privateAPIValue = popover != nil;

    if (userValue != privateAPIValue) {
        [NSException raise:NSInternalInconsistencyException format:
         @"-[%@ %@] "
         "returning %@ "
         "while private UIViewController API suggests %@. "
         "Did you forget to set 'presentedInPopover'?",
         NSStringFromClass([self class]), NSStringFromSelector(_cmd),
         userValue ? @"YES" : @"NO",
         privateAPIValue ? @"YES" : @"NO"];
    }
#endif

    return userValue ?: [[self parentViewController] isPresentedInPopover];
}

@end 
```

如果不正确地使用该属性，您将在控制台上收到如下消息：

> `2012-09-18 14:28:30.375 MyApp[41551:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Consistency error in -[UINavigationController isPresentedInPopover]: returning NO while private UIViewController API suggests YES. Did you forget to set 'presentedInPopover'?'`

...但是在关闭 DEBUG 标志或设置为 0 的情况下进行编译时，它会编译为与以前完全相同的代码。

## 为自由者和愚者

也许你正在做 Ad-Hoc/Enterprise/personal build，或者你足够大胆地看到 Apple 对 App Store 的这个想法。无论哪种方式，这是一个*仅*使用当前运行时即可工作的实现`UIViewController`- 无需设置属性！

```
// UIViewController+isPresentedInPopover.h

#import <UIKit/UIKit.h>

@interface UIViewController (isPresentedInPopover)

@property (readonly, assign, nonatomic, getter = isPresentedInPopover) BOOL presentedInPopover;

@end 
```

* * *

```
// UIViewController+isPresentedInPopover.m

#import "UIViewController+isPresentedInPopover.h"
#import <objc/runtime.h>

@implementation UIViewController (isPresentedInPopover)

- (BOOL)isPresentedInPopover
{
    Ivar privatePopoverIvar = class_getInstanceVariable([UIViewController class], "_popoverController");
    UIPopoverController *popover = object_getIvar(self, privatePopoverIvar);
    BOOL privateAPIValue = popover != nil;
    return privateAPIValue ?: [[self parentViewController] isPresentedInPopover];
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-22T12:12:17.983

正如@joey 上面所写，Apple 消除了对 iOS 8 中虚拟控件的需求，其`popoverPresentationController`属性定义为`UIViewController`“视图控制器层次结构中最近的祖先，它是一个弹出显示控制器。（只读）”。

这是一个在 Swift 中`UIPopoverPresentationController`定义在故事板上的基于 segue 的示例。在这种情况下，以编程方式添加了一个按钮，并且可以通过这种方式将其定义为弹出框的锚点。发件人也可以是选定的`UITableViewCell`或来自它的视图。

```
override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) {
    if segue.identifier == "showCallout" {
        let button = sender as UIButton
        let calloutViewController = segue.destinationViewController as CalloutViewController
        if let popover = calloutViewController.popoverPresentationController {
            popover.sourceView = button
            popover.sourceRect = button.bounds
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T02:38:09.613

最有帮助的可能是使 popover 成为一个类变量，因此在将要呈现 popover 的类的 .m 文件中，执行以下操作：

```
 @interface ExampleViewController()
    @property (nonatomic, strong) UIPopoverController *popover
    @end

    @implementation
    - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
        if ([segue.identifier isEqualToString:@"some segue"])
        {
            //prevent stacking popovers
            if ([self.popover isPopoverVisible])
            {
                [self.popover dismissPopoverAnimated:YES];
                self.popover = nil;
            }
            [segue.destinationViewController setDelegate:self];
            self.popover = [(UIStoryboardPopoverSegue *)segue popoverController];
         }
     }
     @end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-08T09:13:35.860

从 ndoc 的 anwser 起飞：[这个答案](https://stackoverflow.com/a/15486240/2329079)在 iOS 6 中展示了一种更简洁的方式来防止弹出窗口通过 segues 多次显示。链接中的方法对我来说非常有效，可以防止弹出框堆叠。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-14T21:36:52.870

If you JUST want to know if your controller is being presented inside a popover (not interested to get a reference to the popover controller), you can simply do this, without storing variables nor hacking private API's.

```
-(BOOL)isPresentedInPopover
{
    for (UIView *superview = self.view.superview; superview != nil; superview = superview.superview)
    {
        if ([NSStringFromClass([superview class]) isEqualToString:@"_UIPopoverView"])
            return YES;
    }
    return NO;
} 
```

# c# - 对应于 T-SQL 的 INT(32) 的 C# 类型（可能是 NAN）

> ID：10177976
> 
> 赞同：0
> 
> 时间：2012-04-16T16:27:07.127
> 
> 标签：c#, sql, tsql, primary-key, int32

我的 C# 操作从数据库中读取的 ID。最初，它们以**CHAR(32) NOT NULL**格式存储。（这是表的主键）

一旦在 C# 中，这将转换为 Int32（逻辑上？）

但是当我需要将这些值插入到另一个具有类似结构的表中，但主键的类型是**INT IDENTITY(1, 1) NOT NULL)**时，我（逻辑上）得到以下错误，因为大多数 CHAR(32)不是有效的整数：

> 输入字符串的格式不正确。无法存储在 ID 列中。预期类型是 Int32。

假设我想为我的目标 ID 列保留 INT 类型，C# 代码应该如何将“E6802AA26C748A5A0EDE987384D2C48”发送到 SQL 服务器，以免抱怨这不是真正的 Integer ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:31:13.353

E6802AA26C748A5A0EDE987384D2C48 不是 Int32。这是一个 GUID。您需要 128 位来存储它，而不是 32 位。

# facebook - 测试 facebook 与 selenium 的连接

> ID：10177980
> 
> 赞同：1
> 
> 时间：2012-04-16T16:27:22.867
> 
> 标签：facebook, selenium, selenium-ide

我在 Selenium IDE 中的弹出窗口之间切换时遇到问题。我正在使用 Facebook 的测试用户系统来创建一个测试用户（这部分工作得很好），然后写了一些步骤来删除他们所属的应用程序的授权（有点烦人的是 Facebook 不允许你指定你是否'希望您的测试帐户已经授权该应用程序）。无论如何，一旦我有一个新的测试用户在我的应用程序没有现有授权的情况下登录 Facebook，我让它打开包含连接按钮的页面，然后：

1.  `waitForCondition selenium.browserbot.getCurrentWindow().document.getElementById('fbSignInAnchor')`
2.  `click css=#fbSignInAnchor > img`

此时，Facebook 会使用授权启动该弹出窗口。我试过使用`waitForPopup`，但它无法检测到弹出窗口。所以现在我有了它，`pause 5000`但是`selectWindow title=Log into [my app's name]`当它按顺序运行时会失败——如果我手动执行这一步，它工作正常。

让它等待弹出窗口的最佳方法是什么，然后选择它以便我可以运行接下来的步骤，即`clickAndWait name=grant_required_clicked`和`click name=grant_clicked`（单击两个提交按钮以授权应用程序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:55:43.807

您可以尝试此[解决方法](https://stackoverflow.com/questions/4197217/selenium-href-blank-new-window-test/4865433#4865433)并为您的弹出窗口分配一些 ID：

```
getEval | selenium.browserbot.findElement('css=#fbSignInAnchor>img').target='my_window'
getEval | window.open("", "my_window")
click | css=#fbSignInAnchor > img
selectWindow | my_window
waitForElementPresent | name=grant_required_clicked
clickAndWait | name=grant_required_clicked 
```

# xml - SVG圆角

> ID：10177985
> 
> 赞同：104
> 
> 时间：2012-04-16T16:27:34.493
> 
> 标签：xml, image, svg, vector-graphics

我有以下 SVG：

```
<svg>
  <g>
    <path id="k9ffd8001" d="M64.5 45.5 82.5 45.5 82.5 64.5 64.5 64.5 z" stroke="#808600" stroke-width="0" transform="rotate(0 0 0)" stroke-linecap="square" stroke-linejoin="round" fill-opacity="1" stroke-opacity="1" fill="#a0a700"></path>
    <path id="kb8000001" d="M64.5 45.5 82.5 45.5 82.5 64.5 64.5 64.5 z" stroke="#808600" stroke-width="0" transform="rotate(0 0 0)" stroke-linecap="square" stroke-linejoin="round" fill-opacity="1" stroke-opacity="1" fill="url(#k9ffb0001)"></path>
  </g>
</svg>
```

我想获得类似 CSS 的`border-top-right-radius`效果`border-top-bottom-radius`。

我怎样才能达到那种圆角效果？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2016-06-30T09:20:15.467

以下是使用 SVG 路径创建圆角矩形的方法：

```
<path d="M100,100 h200 a20,20 0 0 1 20,20 v200 a20,20 0 0 1 -20,20 h-200 a20,20 0 0 1 -20,-20 v-200 a20,20 0 0 1 20,-20 z" /> 
```

**解释**

**m100,100：** *移动到点（100,100）*

**h200：** *从我们所在的位置画一条 200px 的水平线*

**a20,20 0 0 1 20,20：** *顺时针绘制一条 X 半径为 20px、Y 半径为 20px 的圆弧，到 X 轴和 Y 轴相差 20px 的点*

**v200：** *从我们所在的位置画一条 200px 的垂直线*

**a20,20 0 0 1 -20,20：** *顺时针绘制一条 X 和 Y 半径为 20px 的圆弧，到 X 轴差为 -20px，Y 轴差为 20px 的点*

**h-200：** *从我们所在的位置画一条-200px的水平线*

**a20,20 0 0 1 -20,-20：** *顺时针绘制一条 X 和 Y 半径为 20px 的圆弧，到 X 轴差为 -20px，Y 轴差为 -20px 的点*

**v-200：** *从我们所在的位置画一条-200px的垂直线*

**a20,20 0 0 1 20,-20：** *顺时针绘制一条 X 和 Y 半径为 20px 的圆弧，到 X 轴相差 20px，Y 轴相差 -20px 的点*

**z：** *关闭路径*

```
<svg width="440" height="440">
  <path d="M100,100 h200 a20,20 0 0 1 20,20 v200 a20,20 0 0 1 -20,20 h-200 a20,20 0 0 1 -20,-20 v-200 a20,20 0 0 1 20,-20 z" fill="none" stroke="black" stroke-width="3" />
</svg>
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2015-09-30T20:46:17.777

不知道为什么没有人发布实际的 SVG 答案。这是一个顶部带有圆角（半径为 3）的 SVG 矩形：

```
<path d="M0,0 L0,27 A3,3 0 0,0 3,30 L7,30 A3,3 0 0,0 10,27 L10,0 Z" /> 
```

这是移动到 (M)、线到 (L)、弧到 (A)、线到 (L)、弧到 (A)、线到 (L)、闭合路径 (Z)。

逗号分隔的数字是绝对坐标。圆弧是用指定圆弧半径和类型的附加参数定义的。这也可以通过相对坐标来完成（L 和 A 使用小写字母）。

这些命令的完整参考在 W3C [SVG 路径](https://www.w3.org/TR/SVG/paths.html#PathDataMovetoCommands)页面上，关于 SVG 路径的其他参考资料可以在[这篇文章](https://css-tricks.com/svg-path-syntax-illustrated-guide/)中找到。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2014-11-20T04:49:12.770

[正如我对Applying rounded corners to paths/polygons](https://stackoverflow.com/questions/19269622/applying-rounded-corners-to-paths-polygons/27031874#27031874)的回答中所引用的，我在 javascript 中编写了一个例程，用于对 SVG 路径进行一般圆角，并附有示例：http: [//plnkr.co/edit/kGnGGyoOCKil02k04snu](http://plnkr.co/edit/kGnGGyoOCKil02k04snu)。

它将独立于您可能拥有的任何中风效果。要使用，请包含 Plnkr 中的 rounding.js 文件并像这样调用函数：

```
roundPathCorners(pathString, radius, useFractionalRadius) 
```

结果将是圆形路径。

结果如下所示：

![SVG 路径舍入示例](../Images/5562a448b1843f9e7d307c24c8ff3fcd.png)

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2012-04-17T03:08:37.457

您已明确设置您的`stroke-linejoin`to`round`但您的`stroke-width`to `0`，所以如果您没有要圆的笔划，您*当然*不会看到圆角。

这是一个通过笔划制作的圆角的修改示例：http:
[//jsfiddle.net/8uxqK/1/](http://jsfiddle.net/8uxqK/1/)

```
<path d="M64.5 45.5 82.5 45.5 82.5 64.5 64.5 64.5 z"
      stroke-width="5"
      stroke-linejoin="round"
      stroke="#808600"
      fill="#a0a700" /> 
```

否则——如果你需要一个真正的圆形填充而不仅仅是一个圆形的脂肪笔划——你必须按照@Jlange 所说的做一个真正的圆形。

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2014-09-01T06:42:50.213

我还考虑使用`<rect>`提供`rx`and`ry`属性的普通旧的

[MDN SVG docs](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Basic_Shapes#Rectangles) <- 注意第二个绘制的 rect 元素

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2018-10-15T14:34:51.900

我今天自己也遇到了这个问题，并设法通过编写一个小的 JavaScript 函数来解决它。

据我所知，没有简单的方法在 SVG 圆角中提供路径元素，**除非**您只需要圆角边框，在这种情况下，（CSS）属性`stroke`，`stroke-width`最重要`stroke-linejoin="round"`的是完全足够了。

但是，在我的例子中，我使用了一个路径对象来创建具有*n 个*角的自定义形状，这些角用某种颜色填充并且没有可见的边框，就像这样：

[![在此处输入图像描述](../Images/76d7cccb4d71f3bb9d2a4567813145e1.png)](https://i.stack.imgur.com/HR6NL.png)

我设法编写了一个快速函数，该函数采用 SVG 路径的坐标数组并返回完成的路径字符串以放入`d`路径 html 元素的属性中。生成的形状将如下所示：

[![在此处输入图像描述](../Images/07d6df2a0d9af316b0562cef96689986.png)](https://i.stack.imgur.com/0LwUX.png)

这是功能：

```
/**
 * Creates a coordinate path for the Path SVG element with rounded corners
 * @param pathCoords - An array of coordinates in the form [{x: Number, y: Number}, ...]
 */
function createRoundedPathString(pathCoords) {
    const path = [];
    const curveRadius = 3;

    // Reset indexes, so there are no gaps
    pathCoords = pathCoords.slice();

    for (let i = 0; i < pathCoords.length; i++) {

      // 1\. Get current coord and the next two (startpoint, cornerpoint, endpoint) to calculate rounded curve
      const c2Index = ((i + 1) > pathCoords.length - 1) ? (i + 1) % pathCoords.length : i + 1;
      const c3Index = ((i + 2) > pathCoords.length - 1) ? (i + 2) % pathCoords.length : i + 2;

      const c1 = pathCoords[i];
      const c2 = pathCoords[c2Index];
      const c3 = pathCoords[c3Index];

      // 2\. For each 3 coords, enter two new path commands: Line to start of curve, bezier curve around corner.

      // Calculate curvePoint c1 -> c2
      const c1c2Distance = Math.sqrt(Math.pow(c1.x - c2.x, 2) + Math.pow(c1.y - c2.y, 2));
      const c1c2DistanceRatio = (c1c2Distance - curveRadius) / c1c2Distance;
      const c1c2CurvePoint = [
        ((1 - c1c2DistanceRatio) * c1.x + c1c2DistanceRatio * c2.x).toFixed(1),
        ((1 - c1c2DistanceRatio) * c1.y + c1c2DistanceRatio * c2.y).toFixed(1)
      ];

      // Calculate curvePoint c2 -> c3
      const c2c3Distance = Math.sqrt(Math.pow(c2.x - c3.x, 2) + Math.pow(c2.y - c3.y, 2));
      const c2c3DistanceRatio = curveRadius / c2c3Distance;
      const c2c3CurvePoint = [
        ((1 - c2c3DistanceRatio) * c2.x + c2c3DistanceRatio * c3.x).toFixed(1),
        ((1 - c2c3DistanceRatio) * c2.y + c2c3DistanceRatio * c3.y).toFixed(1)
      ];

      // If at last coord of polygon, also save that as starting point
      if (i === pathCoords.length - 1) {
        path.unshift('M' + c2c3CurvePoint.join(','));
      }

      // Line to start of curve (L endcoord)
      path.push('L' + c1c2CurvePoint.join(','));
      // Bezier line around curve (Q controlcoord endcoord)
      path.push('Q' + c2.x + ',' + c2.y + ',' + c2c3CurvePoint.join(','));
    }
    // Logically connect path to starting point again (shouldn't be necessary as path ends there anyway, but seems cleaner)
    path.push('Z');

    return path.join(' ');
} 
```

您可以通过在顶部设置*curveRadius*变量来确定舍入强度。对于 100x100（视口）坐标系，默认值为 3，但根据 SVG 的大小，您可能需要对其进行调整。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-05-31T23:07:38.663

这个问题是谷歌搜索“svg圆角路径”的第一个结果。Phrogz 的使用建议`stroke`有一些限制（即，我不能将笔画用于其他目的，并且必须根据笔画宽度校正尺寸）。

Jlange 建议使用曲线更好，但不是很具体。我最终使用二次贝塞尔曲线来绘制圆角。考虑这张在相邻边缘上标有蓝点和两个红点的角的图片：

![标记为蓝色的图形的角，相邻边缘上有两个点](../Images/3c7e253214c6a9890afa3344456f0fa4.png)

这两行可以用`L`命令来完成。要将这个尖角变成一个圆角，从左边的红点开始画一条曲线（`M x,y`用来移动到那个点）。现在，二次贝塞尔曲线只有一个控制点，您必须将其设置在蓝点上。将曲线的终点设置在右侧的红点。由于两个红点处的切线与前面的线的方向一致，您将看到流畅的过渡，“圆角”。

现在继续圆角之后的形状，可以通过在两个角之间的线上设置控制点来实现贝塞尔曲线中的直线。

为了帮助我确定路径，我编写了这个接受边缘和半径的 Python 脚本。矢量数学使这实际上非常容易。输出的结果图像：

![从脚本输出创建的形状](../Images/69c8968fc97867da7029ad9b0e4462f1.png)

```
#!/usr/bin/env python
# Given some vectors and a border-radius, output a SVG path with rounded
# corners.
#
# Copyright (C) Peter Wu <peter@lekensteyn.nl>

from math import sqrt

class Vector(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def sub(self, vec):
        return Vector(self.x - vec.x, self.y - vec.y)

    def add(self, vec):
        return Vector(self.x + vec.x, self.y + vec.y)

    def scale(self, n):
        return Vector(self.x * n, self.y * n)

    def length(self):
        return sqrt(self.x**2 + self.y**2)

    def normal(self):
        length = self.length()
        return Vector(self.x / length, self.y / length)

    def __str__(self):
        x = round(self.x, 2)
        y = round(self.y, 2)
        return '{},{}'.format(x, y)

# A line from vec_from to vec_to
def line(vec_from, vec_to):
    half_vec = vec_from.add(vec_to.sub(vec_from).scale(.5))
    return '{} {}'.format(half_vec, vec_to)

# Adds 'n' units to vec_from pointing in direction vec_to
def vecDir(vec_from, vec_to, n):
    return vec_from.add(vec_to.sub(vec_from).normal().scale(n))

# Draws a line, but skips 'r' units from the begin and end
def lineR(vec_from, vec_to, r):
    vec = vec_to.sub(vec_from).normal().scale(r)
    return line(vec_from.add(vec), vec_to.sub(vec))

# An edge in vec_from, to vec_to with radius r
def edge(vec_from, vec_to, r):
    v = vecDir(vec_from, vec_to, r)
    return '{} {}'.format(vec_from, v)

# Hard-coded border-radius and vectors
r = 5
a = Vector(  0,  60)
b = Vector(100,   0)
c = Vector(100, 200)
d = Vector(  0, 200 - 60)

path = []
# Start below top-left edge
path.append('M {} Q'.format(a.add(Vector(0, r))))

# top-left edge...
path.append(edge(a, b, r))
path.append(lineR(a, b, r))
path.append(edge(b, c, r))
path.append(lineR(b, c, r))
path.append(edge(c, d, r))
path.append(lineR(c, d, r))
path.append(edge(d, a, r))
path.append(lineR(d, a, r))

# Show results that can be pushed into a <path d="..." />
for part in path:
    print(part) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-02-10T10:58:28.683

对于我的情况，我需要半径开始和结束`path`：

[![在此处输入图像描述](../Images/a3b4566efdad86a8ffad7449d8f01bc5.png)](https://i.stack.imgur.com/MmzQg.png)

随着`stroke-linecap: round;`我将其更改为我想要的：

[![在此处输入图像描述](../Images/3182c0f073e091201bfff192d095e054.png)](https://i.stack.imgur.com/LdAI5.png)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-05-11T17:28:09.867

以下是选项卡的一些路径：

[https://codepen.io/mochime/pen/VxxzMW](https://codepen.io/mochime/pen/VxxzMW)

```
<!-- left tab -->
<div>
  <svg width="60" height="60">
    <path d="M10,10 
             a10 10 0 0 1 10 -10
             h 50   
             v 47
             h -50
             a10 10 0 0 1 -10 -10
             z"
      fill="#ff3600"></path>
  </svg>
</div>

<!-- right tab -->
<div>
  <svg width="60" height="60">
    <path d="M10 0   
             h 40
             a10 10 0 0 1 10 10
             v 27
             a10 10 0 0 1 -10 10
             h -40
             z"
      fill="#ff3600"></path>
  </svg>
</div>

<!-- tab tab :) -->
<div>
  <svg width="60" height="60">
    <path d="M10,40 
             v -30
             a10 10 0 0 1 10 -10
             h 30
             a10 10 0 0 1 10 10
             v 30
             z"
      fill="#ff3600"></path>
  </svg>
</div>
```

其他答案解释了机制。我特别喜欢 hossein-maktoobian 的回答。

笔中的路径首当其冲，可以修改值以适应任何所需的尺寸。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-12-07T17:22:46.450

这基本上与[Mvins answer](https://stackoverflow.com/a/52819132/4655042)相同，但它是一个更加压缩和简化的版本。它的工作原理是返回与拐角相邻的线的半径距离，并用控制点在原始拐角点的贝塞尔曲线连接两端。

```
function createRoundedPath(coords, radius, close) {
  let path = ""
  const length = coords.length + (close ? 1 : -1)
  for (let i = 0; i < length; i++) {
    const a = coords[i % coords.length]
    const b = coords[(i + 1) % coords.length]
    const t = Math.min(radius / Math.hypot(b.x - a.x, b.y - a.y), 0.5)

    if (i > 0) path += `Q${a.x},${a.y} ${a.x * (1 - t) + b.x * t},${a.y * (1 - t) + b.y * t}`

    if (!close && i == 0) path += `M${a.x},${a.y}`
    else if (i == 0) path += `M${a.x * (1 - t) + b.x * t},${a.y * (1 - t) + b.y * t}`

    if (!close && i == length - 1) path += `L${b.x},${b.y}`
    else if (i < length - 1) path += `L${a.x * t + b.x * (1 - t)},${a.y * t + b.y * (1 - t)}`
  }
  if (close) path += "Z"
  return path
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-04-26T23:11:25.157

只是为了简化@hmak.me 的实现答案，这里有一段注释的 React 代码来生成圆角矩形。

```
const Rect = ({width, height, round, strokeWidth}) => {
    // overhang over given width and height that we get due to stroke width
    const s = strokeWidth / 2;

    // how many pixels do we need to cut from vertical and horizontal parts
    // due to rounded corners and stroke width
    const over = 2 * round + strokeWidth;

    // lengths of straight lines
    const w = width - over;
    const h = height - over;

    // beware that extra spaces will not be minified
    // they are added for clarity
    const d = `
        M${round + s},${s}
        h${w}
        a${round},${round} 0 0 1 ${round},${round}
        v${h}
        a${round},${round} 0 0 1 -${round},${round}
        h-${w}
        a${round},${round} 0 0 1 -${round},-${round}
        v-${h}
        a${round},${round} 0 0 1 ${round},-${round}
        z
    `;
    return (
        <svg width={width} height={height}>
            <path d={d} fill="none" stroke="black" strokeWidth={strokeWidth} />
        </svg>
    );
};

ReactDOM.render(
    <Rect width={64} height={32} strokeWidth={2} round={4} />,
    document.querySelector('#app'),
); 
```

[Jsfiddle 链接。](https://jsfiddle.net/Lygfbvks/2/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-07-09T04:43:29.273

我找到了一个解决方案，但它**有点老套**，所以它可能并不总是有效。我发现如果你有一个值非常小的弧（A 或 a），它会迫使它在一个点创建一条曲线，从而形成一个圆角......

```
<svg viewBox="0 0 1 0.6" stroke="black" fill="grey" style="stroke-width:0.05px;">
  <path d="M0.7 0.2 L0.1 0.1 A0.0001 0.0001 0 0 0 0.099 0.101 L0.5 0.5Z"></path>
</svg>
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-26T22:20:18.550

我编写了这个小打字稿函数，这样我就可以动态地为一个复杂的圆角矩形创建路径，该矩形的功能类似于带有`border-radius`.

`export function roundedRectPath( x: number, y: number, width: number, height: number, bevel: [number, number, number, number] = [3, 3, 3, 3] ): string { return "M" + x + "," + y + `m 0 ${bevel[0]}` + `q 0 -${bevel[0]} ${bevel[0]} -${bevel[0]}` + `l ${width - bevel[0] - bevel[1]} 0` + `q ${bevel[1]} 0 ${bevel[1]} ${bevel[1]}` + `l 0 ${height - bevel[1] - bevel[2]}` + `q 0 ${bevel[2]} -${bevel[2]} ${bevel[2]}` + `l -${width - bevel[2] - bevel[3]} 0` + `q -${bevel[3]} 0 -${bevel[3]} -${bevel[3]}` + `z`; }`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-29T23:07:47.630

这是一段反应代码，用于生成具有不同角半径的矩形：

```
const Rect = ({width, height, tl, tr, br, bl}) => {
    const top = width - tl - tr;
    const right = height - tr - br;
    const bottom = width - br - bl;
    const left = height - bl - tl;
    const d = `
        M${tl},0
        h${top}
        a${tr},${tr} 0 0 1 ${tr},${tr}
        v${right}
        a${br},${br} 0 0 1 -${br},${br}
        h-${bottom}
        a${bl},${bl} 0 0 1 -${bl},-${bl}
        v-${left}
        a${tl},${tl} 0 0 1 ${tl},-${tl}
        z
    `;
    return (
        <svg width={width} height={height}>
            <path d={d} fill="black" />
        </svg>
    );
};

ReactDOM.render(
    <Rect width={200} height={100} tl={20} tr={0} br={20} bl={60} />,
    document.querySelector('#app'),
); 
```

[https://jsfiddle.net/v1Ljpxh7/](https://jsfiddle.net/v1Ljpxh7/)

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2012-04-16T22:49:57.067

您正在使用路径元素，为什么不给路径一条曲线？请参阅此处了解如何使用路径元素制作曲线：http: [//www.w3.org/TR/SVG/paths.html#PathDataCurveCommands](http://www.w3.org/TR/SVG/paths.html#PathDataCurveCommands)

# c# - ActionLink 和参数

> ID：10177987
> 
> 赞同：0
> 
> 时间：2012-04-16T16:27:48.073
> 
> 标签：c#, asp.net-mvc-3

我正在建立一个有产品的网站，您可以对产品发表评论。我在产品页面上有一个链接，上面写着“发表评论”

在我的代码中，它看起来像这样：

```
@Html.ActionLink("Leave a Review", "AddReview", "Product", new { id = Model.ProductId }, null) 
```

当我运行我的应用程序时，链接工作正常，但是当我提交评论时它崩溃并说：

> 参数字典包含“MyProject.Controllers.ProductController”中方法“System.Web.Mvc.ActionResult Product(System.String, Int32)”的不可空类型“System.Int32”的参数“id”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

仅当我`new { id = Model.ProductId }`的 ActionLink 中有此错误时才会发生此错误。

这可能看起来像 ProductId 为空，但这是不可能的。要首先加载产品页面，需要一个 ProductId，另外我使用了一个 RenderAction，它使用相同的 id 在页面上显示有关该产品的评论：

```
@{Html.RenderAction("Reviews", "product", new { id = Model.ProductId});} 
```

所以基本上，为什么我会收到这个错误？它与 GET 和 POST AddReview 方法有关吗？我认为它不应该考虑链接会拉取 GET 并且当我提交表单时它应该是 POST。如何将 productId 放入表单中？

**编辑** 回答一些问题：

我的表格如下所示：

```
@using (Html.BeginForm("AddReview", "Product"))
{
    <p>Title @Html.TextBoxFor(x => x.Title)</p>
    <p>Rating: @Html.TextBoxFor(x => x.Rating)</p>
    <p>Body: @Html.TextBoxFor(x => x.Body)</p>
    <input type="submit" value="Save"/>
    Html.ActionLink("Cancel", "Index", "Home");
} 
```

我生成的标签如下所示：

```
<a href="/Product/AddReview?ProductId=9">Leave a Review</a> 
```

**编辑**

在修复了链接问题后，我意识到我仍然收到错误的原因是因为我的控制器中的 RedirectToAction 调用被破坏了。多么愚蠢的错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:38:30.743

```
<a href="/Product/AddReview?ProductId=9">Leave a Review</a> 
```

不好。你应该得到：

```
<a href="/Product/AddReview/9">Leave a Review</a> 
```

或者：

```
<a href="/Product/AddReview?id=9">Leave a Review</a> 
```

因为您的控制器操作需要一个不可为空的 int 参数，称为`id`. 您收到此错误网址的原因可能是您弄乱了路线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:43:26.717

```
@Html.ActionLink("Leave a Review", "AddReview", "Product", new { @id = Model.ProductId }, null) 
```

如果您在此模型的 ProductId 属性中有一个有效值，这应该会生成一个如下所示的链接

```
<a href="/Product/AddReview/9">Leave a Review</a> 
```

确保`ProductId`正确加载了属性值。

您可以使用`@`符号作为与 HTML 属性同名的参数的前缀。看到我用`@id`而不是`id`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:34:44.887

听起来您没有在表单中设置 ProductId。您需要设置表单操作以在路由中包含 id：`@Html.BeginForm("AddReview","Product", new {Id = Model.ProductId})`或包含 productId 的隐藏输入，例如`@Html.Hidden("id",Model.ProductId")`

# objective-c - 应用音量

> ID：10177990
> 
> 赞同：0
> 
> 时间：2012-04-16T16:27:59.083
> 
> 标签：objective-c, ios, volume, mpvolumeview

我需要用户控制设备的媒体音量。我见过许多使用音量视图或 AVAudioPlayer 的解决方案，但我想使用设备音量按钮来设置应用程序音量，就像许多应用程序一样。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:33:12.173

要使用此功能，您需要将音频会话设置为播放。这是通过以下方式完成的：

```
AVAudioSession *session = [AVAudioSession sharedInstance];
[session setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T13:06:55.497

倾倒在 appdelegate 中

```
 - (BOOL)application:(UIApplication *)application
    didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        [[NSNotificationCenter defaultCenter]
         addObserver:self
         selector:@selector(volumeChanged:)
         name:@"AVSystemController_SystemVolumeDidChangeNotification"
         object:nil];
    }

    - (void)volumeChanged:(NSNotification *)notification
    {
        float volume =
        [[[notification userInfo]
          objectForKey:@"AVSystemController_AudioVolumeNotificationParameter"]
         floatValue];

        // Do stuff with volume
    } 
```

# arrays - Perl CGI 滚动列表不会打印哈希数组

> ID：10177994
> 
> 赞同：0
> 
> 时间：2012-04-16T16:28:08.703
> 
> 标签：arrays, perl, hash, cgi

我正在尝试编写一个打印 /etc/passwd 用户的 Perl CGI 脚本，但是当我打开我的 CGI 时，我的滚动列表只打印出多行：

```
"HASH(0x27836d8)" 
```

这是我的代码，我在其中获取 etc passwd 并将其打印到滚动列表。谁能帮我把它正确打印到滚动列表中？

```
setpwent();
while (@list = getpwent())
{
    ($LOGIN,$PASSWORD,$UID,$GID,$QUOTA,$COMMENT,$GECOS,$HOMEDIR,$SHELL) = @list[0,1,2,3,4,5,6,7,8];
    if( $UID >= 1001 )
    {
            push @users, { login => "$LOGIN"};
    }
}
endpwent();

print scrolling_list(-name=>'user_list',
                            -values=>[@users],
                            -size=>15); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:36:29.423

您给列表提供了一堆哈希引用，所以这就是显示的内容。改变

```
push @users, { login => "$LOGIN"}; 
```

至

```
push @users, $LOGIN; 
```

* * *

```
use strict;
use warnings;

...

setpwent();
while (my @list = getpwent()) {
    my ($user, $uid) = @list[2, 3];
    push @users, $user
        if $ui >= 1001;
}
endpwent();

print scrolling_list(
   -name   => 'user_list',
   -values => \@users,
   -size   => 15,
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:39:12.043

如[CGI perldoc](http://cpansearch.perl.org/src/MARKSTOS/CGI.pm-3.59/cgi_docs.html)中所述，您使用 -values 传递的内容应该是一个列表引用，但是您已经为哈希列表创建了一个列表引用（由于您使用了上面的花括号）。这是一个固定版本：

```
 setpwent();
    while (@list = getpwent())
    {
        ($LOGIN,$PASSWORD,$UID,$GID,$QUOTA,$COMMENT,$GECOS,$HOMEDIR,$SHELL) = @list[0,1,2,3,4,5,6,7,8];
        if( $UID >= 1001 )
        {
                push @users, $LOGIN;
        }
    }
    endpwent();

print scrolling_list(-name=>'user_list',
                            -values=>\@users,
                            -size=>15); 
```

# php - 延迟社交网络加载

> ID：10177995
> 
> 赞同：0
> 
> 时间：2012-04-16T16:28:11.153
> 
> 标签：php, javascript, jquery, html

我正在尝试延迟为社交网络加载以下代码：并且仍然可以正常工作。

```
<div id="social">
<div id="socialButton"><div id="fb-root"></div><script src="http://connect.facebook.net/en_US/all.js#appId=229705657056288&amp;xfbml=1"></script><fb:like href="http://example.com" send="false" layout="button_count" width="100" show_faces="false" font="arial"></fb:like>&nbsp;&nbsp;&nbsp;<<< Facebook Like</div>
<div id="socialButton"><g:plusone></g:plusone>&nbsp;<<< Google +1</div>
<div id="socialButton"><a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="example" ></a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script><<< Twitter Tweet</div>
<div id="socialButton"><a class="DiggThisButton DiggCompact"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<<< Digg this</div>
<div id="socialButton"><script src="http://www.stumbleupon.com/hostedbadge.php?s=1"></script>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<<< Stumble Upon

</div>
</div> 
```

我想使用 JS 或 Jquery 来执行此操作并计划使用 $(document).ready(function() { }); 以确保在加载社交网络之前加载文档。

知道我可以使用什么，以及如何实现它...我想我要离开 div #socail 并让它 document.write 到它，但我不知道如何才能实现它。

所有建议均已采纳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:33:30.793

使用 JavaScript，您可以使用 setTimeout 在延迟后执行代码。例如：

```
setTimeout(function(){
    //use jQuery to generate that code block and append it to the document
}, 10000); 
```

这将在 10,000 毫秒（10 秒）后执行匿名函数内的代码。

或者，您可以让代码在页面中正常运行，但将其隐藏。在您选择的延迟之后，显示社交媒体元素。这可能更简单，因为您可能想假设 Facebook 和 Twitter 脚本将运行未知代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:57:15.360

您可以简单地使用标签`defer`上的属性：`<script>`

```
<script type="text/javascript" src="https://apis.google.com/js/plusone.js" defer="defer"></script> 
```

这会导致它们在页面呈现后加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:34:20.393

在类似的场景中，我实现了一个小函数来加载使社交按钮正常工作所需的脚本：

```
_MYNS.appendSocialWidget = function(id, url) {
   var js, fjs = document.getElementsByTagName('script')[0];
   if (document.getElementById(id)) { return; }
   js = document.createElement('script'); js.id = id;
   js.charset = "utf-8";
   js.src = url;
   fjs.parentNode.insertBefore(js, fjs);
}; 
```

然后当`document.ready`事件发生时，我加载了我需要的所有插件，就像这样

```
if ($('#social').length) {

    /* Facebook send and like */
    $('<div id="fb-root" />').appendTo($('body'));
    _MYNS.appendSocialWidget('facebook-jssdk', '//connect.facebook.net/it_IT/all.js#xfbml=1');

    /* twitter: tweet */        
    $('<a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>').appendTo($('#social'));
    _MYNS.appendSocialWidget('twitter-widget', '//platform.twitter.com/widgets.js');

    /* Google : +1 */
    $('<div class="g-plusone" data-size="medium" data-annotation="bubble" \
        data-expandTo="top"></div>').appendTo($('#social'));
    _MYNS.appendSocialWidget('google-plusone', 'https://apis.google.com/js/plusone.js');

    ...
}; 
```

当然我有一些页面没有社交按钮，所以我在元素存在之前检查。`_MYNS`是一个简单的命名空间，只是为了不污染全局范围

我不知道我是否说到点子上了，但无论如何希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T16:34:38.550

```
<div id="social">
</div>
<script id="socialTemplate" type="text/plain">
<div id="socialButton"><div id="fb-root"></div><script src="http://connect.facebook.net/en_US/all.js#appId=229705657056288&amp;xfbml=1"></script><fb:like href="http://example.com" send="false" layout="button_count" width="100" show_faces="false" font="arial"></fb:like>&nbsp;&nbsp;&nbsp;<<< Facebook Like</div>
<div id="socialButton"><g:plusone></g:plusone>&nbsp;<<< Google +1</div>
<div id="socialButton"><a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="example" ></a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script><<< Twitter Tweet</div>
<div id="socialButton"><a class="DiggThisButton DiggCompact"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<<< Digg this</div>
<div id="socialButton"><script src="http://www.stumbleupon.com/hostedbadge.php?s=1"></script>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<<< Stumble Upon
</script>
<script type="text/javascript">
window.addEventListener("load",function(){
document.getElementById("social").innerHTML = document.getElementById("socialTemplate").innerHTML;
});
</script> 
```

因为 socialTemplate 具有类型`text/plain`，所以它被视为这样。但是，当您将其内容放入空的社交标签时，浏览器会对其进行初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T16:35:19.700

只需在`html()`函数调用中将其全部拍下来：

```
$(document).ready(function() {
    $('#social').html(
        '<div id="socialButton"><div id="fb-root"></div><script src="http://connect.facebook.net/en_US/all.js#appId=229705657056288&amp;xfbml=1"></script><fb:like href="http://example.com" send="false" layout="button_count" width="100" show_faces="false" font="arial"></fb:like>&nbsp;&nbsp;&nbsp;<<< Facebook Like</div>' +
        '<div id="socialButton"><g:plusone></g:plusone>&nbsp;<<< Google +1</div>' +
        '<div id="socialButton"><a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="example" ></a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script><<< Twitter Tweet</div>' +
        '<div id="socialButton"><a class="DiggThisButton DiggCompact"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<<< Digg this</div>' +
        '<div id="socialButton"><script src="http://www.stumbleupon.com/hostedbadge.php?s=1"></script>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<<< Stumble Upon/div>'
        );
}); 
```

离开`<div id="social"></div>`页面，为空。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T04:20:35.840

我无法用上面的方法修复它，它不断损坏代码或在脚本位置而不是在社交 div 中显示代码。

我想知道它是否能够稍后通过延迟加载以下脚本并将其余部分保持不变来加载脚本：

```
<script src="resources/scripts/main_script.js" type="text/javascript"></script>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
<script src="http://connect.facebook.net/en_US/all.js#appId=229705657056288&amp;xfbml=1"></script> 
```

因为我的主要目标是 p