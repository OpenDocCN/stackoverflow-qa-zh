# StackOverflow 问答 10513000-10513999

# facebook-graph-api - 无法删除成就

> ID：10513000
> 
> 赞同：0
> 
> 时间：2012-05-09T09:08:31.027
> 
> 标签：facebook-graph-api, curl, facebook-opengraph

当我尝试发布成就时出现错误：({error:{message:"(#3401) 成就计数 1004 超过此应用程序的最大值 1000", type:"OAuthException", code:3401}})

所以我试图删除这个成就，使用 JavaScript 帖子，具有完全相同的成就 URL，我得到：({error:{message:"(#3403) 成就尚未为此应用程序注册。见[https://developers.facebook.com/docs/achievements/](https://developers.facebook.com/docs/achievements/) ”，输入：“OAuthException”，代码：3403}}）

使用 JavaScript 删除有问题吗？因为如果我尝试使用带有成就 ID 而不是 URL 的 Curl 来做同样的事情，它就可以工作了！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:54:12.700

也许您对 URL 的编码不正确？打开网络检查器并检查正在发生的确切帖子参数。Facebook 的服务器对于 JS 和 PHP 并没有什么不同。

# jquery - 使用 jQuery 在悬停的图像下方添加一个 DIV

> ID：10513003
> 
> 赞同：0
> 
> 时间：2012-05-09T09:08:51.613
> 
> 标签：jquery

我目前有一个鼠标悬停/鼠标悬停事件 - 我想在鼠标悬停动画完成后显示一个 div，并在鼠标悬停动画开始之前隐藏 div。

我无法让它相对于动画后显示的 div 显示，或者正确排队。

[http://jsfiddle.net/q2Fh7/](http://jsfiddle.net/q2Fh7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:26:23.907

您需要使用 的回调函数参数将div`animate()`附加到相关的. 你也应该使用它。试试这个：`message``box``hover`

```
$('.box').hover(
    function() {
        var $box = $(this);
        $box.stop().animate(
            { width: '280px', height: '420px'},
            650,
            function() {
                var $div = $("<div></div>").addClass("message").text("Message text");
                $box.append($div);
                $div.fadeIn();
            }
        );
    },
    function() {
        var $box = $(this);
        $(".message", $box).fadeOut(function() {
            $box.stop().animate({ width: '100px', height: '100px' }, 650);
        });        
    }
); 
```

[**示例小提琴**](http://jsfiddle.net/q2Fh7/26/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:22:05.223

我认为这不是你想要的。但我认为它会让你走上正确的道路：http: [//jsfiddle.net/r6xbp/](http://jsfiddle.net/r6xbp/)

编辑：优化 [http://jsfiddle.net/r6xbp/2/](http://jsfiddle.net/r6xbp/2/)

# memory - 释放用 newCString 分配的内存

> ID：10513007
> 
> 赞同：10
> 
> 时间：2012-05-09T09:09:02.203
> 
> 标签：memory, haskell, memory-management, ffi

正如库文档所说`CString`，创建的`newCString`必须使用`free`函数释放。我一直期待`CString`创建它时会占用一些内存，而当它被释放时`free`内存使用量会下降，但事实并非如此！这是示例代码：

```
module Main where

import Foreign
import Foreign.C.String
import System.IO

wait = do
  putStr "Press enter" >> hFlush stdout
  _ <- getLine
  return ()

main = do
  let s = concat $ replicate 1000000 ['0'..'9']
  cs <- newCString s
  cs `seq` wait   -- (1)

  free cs
  wait   -- (2) 
```

当程序在 (1) 处停止时，`htop`程序显示内存使用量在 410M 左右——这没关系。我按回车，程序在第 (2) 行停止，但内存使用量仍然是 410M，尽管`cs`已经`free`d！

这怎么可能？用 C 编写的类似程序的行为应如此。我在这里想念什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T12:50:56.923

问题是它`free`只是向垃圾收集器表明它现在可以收集字符串。这实际上并没有强制垃圾收集器运行——它只是表明 CString 现在是垃圾。仍然由 GC 根据堆压力启发式决定何时运行。

您可以通过在调用 to 之后直接调用来*强制*进行主要收集，这会立即将内存减少到 5M 左右。`performGC``free`

例如这个程序：

```
import Foreign
import Foreign.C.String
import System.IO
import System.Mem

wait = do
  putStr "Press enter" >> hFlush stdout
  _ <- getLine
  return ()

main = do
  let s = concat $ replicate 1000000 ['0'..'9']
  cs <- newCString s
  cs `seq` wait   -- (1)

  free cs
  performGC
  wait   -- (2) 
```

行为符合预期，具有以下内存配置文件 - 第一个红点是对 的调用`performGC`，立即解除分配字符串。然后程序在 5M 左右徘徊直到终止。

![在此处输入图像描述](../Images/e54f34b40d149fe98b04078b9877709f.png)

# javascript - 将参数传递到 FOR 循环

> ID：10513010
> 
> 赞同：0
> 
> 时间：2012-05-09T09:09:10.293
> 
> 标签：javascript, for-loop

我知道我可以简单地`while`为此编写一个循环..

我只是想知道如何通过`argument`这样的：

```
 function i(a,z){

      for (a; a<2; z){

          //do something...

      }
   } 
```

我试过

```
 i(0,a++);
    i(0,'a++');
    i(0,a=a+1);

    var z = "a= a+1";
    i(0,z); 
```

一切都没有奏效。

* * *

**​[更新]**

我知道我可以将功能更改为

```
 function i(a,z){

      for (a; a<2; a=a+z){

          //do something...

      }
   } 
```

然后

```
 i(0,1); 
```

**但我在这里想知道的是如何在`a=a+z`不更改函数的情况下将其作为参数传递...**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T09:14:10.657

也许你想要这个变种？

```
function i(start, end, delta){

      for (var i = start; i<end; i += delta) {

          //do something...

      }
} 
```

用它`i(0, 10, 1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:16:02.123

我不确定我是否理解正确，但我想你会想要这样的东西：

```
function i(a, z){
    for (a; a < 2; a = z(a)){
        //do something...
    }
} 
```

然后你这样称呼它：

```
i(0, function(a) { 
     a++; 
     return a;
}); 
```

请注意，它与您所拥有的非常相似，只是 for 的最后一部分是一个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:24:51.103

```
function i(o){
    for (; o.a<2; o.z()){
        //do something...
        console.log('x');
    }
}
var o = {
    a:0, 
    z:function(o) {
        this.a++
    }
};

i(o); 
```

# java - 提高“drawString”方法的文本质量

> ID：10513014
> 
> 赞同：1
> 
> 时间：2012-05-09T09:09:23.300
> 
> 标签：java, swing, drawstring

我正在用 Java 制作验证码，但我无法提高“drawString”方法在我的图像上生成的文本质量。

文本质量示例：

![](../Images/ccee887c0cc342eb6ef6e2ea823ef05e.png)

您实际上可以在文本上看到可怕的边缘。

Java代码：

```
File file = new File("C:\\captcha.png");
File file2 = new File("C:\\captcha2.png");
File fontfile = new File("C:\\xerox.ttf");
BufferedImage bfimage = ImageIO.read(file);
Graphics2D g = bfimage.createGraphics();
Font myfont = Font.createFont(Font.PLAIN, fontfile);
myfont = myfont.deriveFont(50f);
g.setFont(myfont);
g.setColor(Color.black);
AffineTransform att = new AffineTransform();
g.translate(100, 50);
att.rotate(Math.toRadians(15), 100, 50);
g.setTransform(att);
g.drawString("12345", 100, 50);
RenderedImage rimg = bfimage;
ImageIO.write(rimg, "PNG", file2); 
```

php中使用相同字体的示例，但这里的质量要好很多，边缘平滑：

![](../Images/5afec311220529a797e8b4e059ba203e.png)

如何提高 Java 中“drawString”方法生成的文本质量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:15:00.463

Graphics 和 Graphics2D 提供了一个渲染提示框架，允许您配置组件渲染的某些部分。使用抗锯齿渲染提示：

```
g2d.setRenderingHint( RenderingHints.KEY_TEXT_ANTIALIASING, 
RenderingHints.VALUE_TEXT_ANTIALIAS_DEFAULT); 
```

你应该在你的验证码上获得抗锯齿文本。

[http://docs.oracle.com/javase/6/docs/api/java/awt/RenderingHints.html](http://docs.oracle.com/javase/6/docs/api/java/awt/RenderingHints.html)供参考

# c# - 如何针对 XSL 运行 xml 数据（作为服务的响应）并在 C# 中获取 html 输出

> ID：10513022
> 
> 赞同：0
> 
> 时间：2012-05-09T09:10:09.403
> 
> 标签：c#, asp.net, .net, xslt

我需要以行列方式显示服务的响应（以 XML 形式获取）。我们有一个 XSL 文件来进行格式化。现在我需要知道如何使用 C# 4.0 我不想保存 XML 文件或 HTML。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:18:57.220

如果您有可以获取 XML 数据的 URL，则必须：

*   使用 System.Net.WebClient 下载 XML 文件
*   使用 System.Xml.XmlDocument 解析该 XML 文件。
*   现在，当您解析了 XML 响应后，您可以使用 StringBuilder 或任何其他类将该 XML 转换为可读的 HTML。

一切都在内存中制作，无需创建任何临时文件。

# javascript - 如果输入的数据不在自动完成列表中，如何清空文本框

> ID：10513025
> 
> 赞同：1
> 
> 时间：2012-05-09T09:10:25.107
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, validation, autocomplete

我在教育表格中有一个文本框，显示大学模型中大学名称的自动完成列表。我想要做的是防止用户添加新条目，即如果大学名称不在自动完成列表中，用户无法添加新名称但我不是能够做到这一点。如果用户键入的名称不在自动完成列表文本框中，则应清除

以下是我的教育/表格，html.haml 代码：

```
= f.label :college_id, "College<em>*</em><small>college name</small>".html_safe
= f.text_field :college_id
:javascript
$(document).ready(function() {   
    var a = ["abcd","abc"];
    $('#education_college_id').focus().autocomplete(#{colleges_names_arr});
}); 
```

在我的 application_helper 中，我为自动完成编写了以下代码。

```
def colleges_names_arr(colleges=[])
req_colleges = College.all
colleges_names = req_colleges.collect{|col|col.full_name}.to_json
end 
```

我应该写什么来防止用户添加新数据和空文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:46:44.577

认为您需要 Combobox 示例而不是 JQuery-UI 自动完成的默认功能。

[http://jqueryui.com/demos/autocomplete/#combobox](http://jqueryui.com/demos/autocomplete/#combobox)

比简单文本框复杂得多，因为它包括一些检查以确保输入文本包含来自提供的列表的值（或用空白替换文本）。

或者您可以检查提交时的参数（无论如何这样做都是一个好主意），以确保参数值包含在大学列表中。

另一点是，您似乎没有将学院 ID 传递给仅选择学院名称的选择 - 让自动完成功能同时返回学院的 ID 和名称将是一件痛苦的事情（也许看看[https://github. com/crowdint/rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)）。

在更新和创建操作中，您必须使用提供的学院名称并在保存记录之前通过 College.find_by_name() 查找。可能通过使用 text_field_tag 大学名称来返回 params[:college_name] （这将不依赖于教育表格的其余部分）然后类似

_form.html.haml

```
= label_tag :college_name, "College<em>*</em><small>college name</small>".html_safe
= text_field_tag :college_name
:javascript
$(document).ready(function() {   
    var a = ["abcd","abc"];
    $('#college_name').focus().autocomplete(#{colleges_names_arr});
}); 
```

教育控制器.rb

*在创建和更新操作中

```
education = Education.create!(params)
college = College.find_by_name(params[:college_name])
if college
  education.college = college
end 
```

绝对有一种更清洁的方法可以做到这一点。

# algorithm - 开放式锦标赛配对算法

> ID：10513029
> 
> 赞同：2
> 
> 时间：2012-05-09T09:10:35.953
> 
> 标签：algorithm, optimization, graph-theory, tournament

我正在为虚拟城市商业游戏 ( [Urbien.com](http://urbien.com) ) 开发锦标赛模型，并希望获得一些算法建议。这是场景和当前的“基本”实现：

**设想**

*   参赛作品以决斗风格配对，就像在原始的 Facemash 或 Pixoto.com 上一样。
*   “玩家”是一名裁判，他得到一系列决斗对，并且必须为每一对选择一个获胜者。
*   比赛永无止境，人们可以随时提交新的参赛作品，并根据该日期的数据选择日/周/月/千年的获胜者。

**需要解决的问题**

*   评分算法 - 如何对锦标赛参赛作品进行评分以及如何在每场比赛后调整其评分？
*   配对算法 - 如何选择下一对来喂玩家？

**当前解决方案**

*   评分算法 - 目前在国际象棋和其他锦标赛中使用的 Elo 评分系统。
*   配对算法——我们当前的算法承认两个必要条件：
    1.  对迄今为止决斗次数较少的条目给予更多的决斗
    2.  以更高的概率匹配具有相似评分的人

给定：
N = 锦标赛中的参赛
总数 D = 迄今为止所有玩家在锦标赛中进行的决斗总数
Dx = 玩家 x 到目前为止进行了多少决斗

为了选择玩家 x 和 y 进行决斗，我们首先选择玩家 x 的概率：

p(x) = (1 - (Dx / D)) / N

然后按照以下方式选择玩家 y： 按等级对玩家进行排序 让在排序列表中的索引 jIdx 处选择玩家 j 的概率为： p(j) = ... 0, if (j == x) n*r^ abs(jIdx - xIdx) 否则

其中 0 < r < 1 是要选择的系数，n 是归一化因子。

基本上，从 x 的任一方向的概率形成一个几何级数，归一化，因此它们总和为 1。

**关注点**

*   最大化决斗的信息价值 - 将评分最低的条目与评分最高的条目配对不太可能为您提供任何有用的信息。
*   速度——我们不想为了选择一对而进行大量的计算。一种替代方法是使用类似瑞士配对系统的系统，一次配对所有参赛作品，而不是一次选择一个新的决斗。这有一个缺点 (?)，即在给定时间范围内提交的所有参赛作品将经历大致相同数量的决斗，这可能是可取的，也可能不是可取的。
*   Equilibrium - Pixoto 的 ImageDuel 算法会检测条目何时不太可能进一步提高其评分，并从那时起减少他们的决斗。这种检测的好处是有争议的。一方面，如果你“暂停”一半的条目，你可以节省计算量。另一方面，具有既定评级的条目可能是新条目的完美匹配，以建立新手的评级。
*   条目数 - 如果只有几个条目，比如 10 个，也许应该使用更简单的算法。
*   赢/输 - 如果有的话，玩家的赢/输比如何影响下一次配对？
*   存储 - 每个条目和锦标赛本身要存储什么？当前存储： 锦标赛条目：到目前为止 # 次决斗，# 胜，# 负，评级 锦标赛：到目前为止 # 次决斗，# 项

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:57:30.240

您可以使用基于最大似然法的标准方法，而不是使用 ELO 和临时概率公式。

最大似然法是一种参数估计方法，它的工作原理是这样的（示例）。每个参赛者（玩家）都被分配了一个参数 s[i]（1 <= i <= N，其中 N 是参赛者的总数），用于衡量该玩家的力量或技能。您选择一个公式，将两个玩家的优势映射为第一个玩家获胜的概率。例如，

```
P(i, j) = 1/(1 + exp(s[j] - s[i])) 
```

这是逻辑曲线（参见[http://en.wikipedia.org/wiki/Sigmoid_function](http://en.wikipedia.org/wiki/Sigmoid_function)）。当您有一个显示用户之间**实际**结果的表格时，您可以使用全局优化（例如梯度下降）来找到那些使实际观察到的匹配结果的概率最大化的强度参数 s[1] .. s[N]。例如，如果您有三个参赛者并观察到两个结果：

*   玩家 1 战胜了玩家 2
*   玩家 2 战胜了玩家 3

然后你会找到最大化产品价值的参数 s[1], s[2], s[3]

```
 P(1, 2) * P(2, 3) 
```

顺便说一句，最大化可能更容易

```
 log P(1, 2) + log P(2, 3) 
```

请注意，如果您使用逻辑曲线之类的东西，那么只有强度参数的差异才重要，因此您需要将值锚定在某处，例如任意选择

```
 s[1] = 0 
```

为了让最近的比赛“权重”更多，您可以根据他们的年龄调整比赛结果的重要性。如果 t 测量自匹配发生以来的时间（以某些时间单位），您可以最大化总和的值（使用示例）

```
 e^-t log P(1, 2) + e^-t' log P(2, 3) 
```

其中 t 和 t' 是比赛 1-2 和 2-3 的年龄，因此最近发生的比赛权重更大。

这种方法的有趣之处在于，当强度参数有值时，可以立即使用 P(...) 公式来计算任何未来比赛的赢/输概率。要配对参赛者，您可以配对 P(...) 值接近 0.5 的参赛者，然后选择那些经过时间调整的比赛次数（e^-t1 + e^-t2 + ... ) 匹配年龄 t1, t2, ... 是低的。*最好*的办法是计算全球两名球员之间输赢的总影响，然后选择那些对收视率有最大*预期*影响的比赛，但这可能需要大量计算。

您不需要一直运行最大似然估计/全局优化算法；您可以将它作为批处理运行，例如每天运行一次，并使用第二天的结果将人们匹配在一起。无论如何，时间调整的匹配质量都可以实时更新。

在算法方面，您可以根据他们的 s 参数对最大似然运行后的球员进行排序，因此非常容易快速找到同等实力的球员。

# sql-server - 向存储过程添加 IF ...ELSE 语句以跳过重复的主键

> ID：10513031
> 
> 赞同：3
> 
> 时间：2012-05-09T09:10:42.453
> 
> 标签：sql-server, tsql, stored-procedures

我在我的物理 C# 代码中有一个 try catch，它只是在发生错误时跳过此插入过程并继续循环以填充数据库。然而，这是不好的编码习惯。

所以我想在`IF`下面的存储过程中添加一个语句，如果主键已经存在，它将跳过。我的主键是`@id`.

我该怎么办？

```
CREATE PROCEDURE InsertProc
    (
    @id int, 
    @to nvarchar(100), 
    @from nvarchar(100), 
    @subject nvarchar(100), 
    @date datetime
    )
AS
    INSERT INTO Emails_Log (Email_ID, e_To, e_From, e_Subject, e_Date) 
    VALUES (@id, @to, @from, @subject, @date) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T09:14:03.883

```
CREATE PROCEDURE InsertProc
    (
    @id int, 
    @to nvarchar(100), 
    @from nvarchar(100), 
    @subject nvarchar(100), 
    @date datetime
    )
    AS
    IF NOT EXISTS (SELECT NULL FROM Emails_Log
                    WHERE Email_ID = @ID)
    BEGIN
        INSERT INTO Emails_Log (Email_ID, e_To, e_From, e_Subject, e_Date) 
            VALUES (@id, @to, @from, @subject, @date)
    END 
```

如果你真的想更新记录，如果已经存在，如果不存在，则插入，模式如下：

```
CREATE PROCEDURE InsertProc
    (
       @id int, 
       @to nvarchar(100), 
       @from nvarchar(100), 
       @subject nvarchar(100), 
       @date datetime
    )
    AS
       UPDATE Emails_Log
          SET e_To = @to, 
              e_From = @from, 
              e_Subject = @subject, 
              e_Date = @date
        WHERE Email_ID = @ID
       -- If there was no update it means that @ID does not exist,
       -- So we proceede with insert
       IF @@ROWCOUNT = 0
       BEGIN
          INSERT INTO Emails_Log (Email_ID, e_To, e_From, e_Subject, e_Date) 
               VALUES (@id, @to, @from, @subject, @date)
       END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:15:55.987

```
CREATE PROCEDURE InsertProc
    (
    @id int, 
    @to nvarchar(100), 
    @from nvarchar(100), 
    @subject nvarchar(100), 
    @date datetime
    )
    AS
    IF EXISTS(SELECT * From Emails_Log Where Email_ID = @id)
    UPDATE Emails_Log (Email_ID, e_To, e_From, e_Subject, e_Date) 
            SET e_To = @to, e_From = @from, e_Subject = @subject, e_Date = @date
            WHERE Email_ID = @id
    ELSE
    INSERT INTO Emails_Log (Email_ID, e_To, e_From, e_Subject, e_Date) 
            VALUES (@id, @to, @from, @subject, @date) 
```

另一种方法是使用[MERGE](http://msdn.microsoft.com/en-us/library/bb510625.aspx)命令。

查看[SO 上的这个线程以了解更多信息](https://stackoverflow.com/questions/639854/check-if-a-row-exists-otherwise-insert)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T09:58:13.717

您可以检查表中是否存在记录并在一条语句中插入记录。

![在此处输入图像描述](../Images/8bd07397fa61896c2e760c001e86e7fe.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T09:28:08.147

试试这个代码

```
CREATE PROCEDURE InsertProc
(
@id int, 
@to nvarchar(100), 
@from nvarchar(100), 
@subject nvarchar(100), 
@date datetime
)
AS
IF NOT EXISTS (SELECT Email_ID From Emails_Log Where Email_ID = @id)
BEGIN
    INSERT INTO Emails_Log (Email_ID, e_To, e_From, e_Subject, e_Date) 
        VALUES (@id, @to, @from, @subject, @date)
END 
```

# php - 散列或加密要在 url 中发送的变量

> ID：10513035
> 
> 赞同：5
> 
> 时间：2012-05-09T09:10:57.053
> 
> 标签：php, mysql, url, encryption, hash

我有一个需要生成的链接，以便可以将其放置在电子邮件中。当用户单击此链接时，系统将匹配电子邮件中发送给用户的代码，因此它可以提取该用户的记录。

但是，我不太确定要使用哪种加密/散列方法。对于本站管理系统的登录，我使用数据库中的 PBKDF2 作为密码（加盐）和 AES 加密，当它发送到会话变量时，但我不知道 PBKDF2 和 AES 使用的字符是否网址兼容。

基本上，我需要散列/生成随机代码以存储在数据库中的最佳方法和加密方法，以便我可以将年份和代码（我之前提到过）放在 url 中。如果有帮助，我正在使用 PHP 和 MySQL。

你们有什么感想？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T12:10:03.713

大多数加密（或散列等）例程的输出是任意二进制数据，如果不对其进行编码，就无法安全地将其包含在 URL 中。

[正如 eggyal 所说](https://stackoverflow.com/a/10513074)，简单地使用`urlencode()`数据就足够了。然而，标准的 URL 编码可能不是编码随机二进制数据的最紧凑方式。 [Base64](http://en.wikipedia.org/wiki/Base64)编码会更有效，但不幸的是，由于它使用了`+`字符，它并不完全是 URL 安全的。

幸运的是，base64 编码存在标准化的 URL 安全变体，在[RFC 4648](https://www.rfc-editor.org/rfc/rfc4648)中指定为“base64url”。这是一对在 PHP 中使用这种编码对数据进行编码和解码的函数，[基于“gutzmer at usa dot net”的回答](http://www.php.net/manual/en/function.base64-encode.php#103849)：

```
function base64url_encode($data) {
    return rtrim(strtr(base64_encode($data), '+/', '-_'), '=');
}

function base64url_decode($data) {
    return base64_decode(strtr($data, '-_', '+/'));
} 
```

（我已经稍微简化了解码功能，因为至少当前版本的 PHP 显然不需要`=`在输入中填充字符`base64_decode()`。）

* * *

附言。为了首先安全地生成随机令牌，请参见例如[这个问题](https://stackoverflow.com/questions/1182584/secure-random-number-generation-in-php)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T09:13:44.783

根据需要执行散列，然后[`urlencode()`](http://php.net/manual/en/function.urlencode.php)在将其插入 URL 之前执行结果。

# javascript - 花式框顶部位置

> ID：10513037
> 
> 赞同：1
> 
> 时间：2012-05-09T09:11:04.777
> 
> 标签：javascript, jquery, fancybox

我正在使用带有 centerOnScroll = true 选项的fancybox，因此当fancybox 打开时，它显示在页面中心和滚动鼠标上，fancybox 随之移动。问题是我想在它打开时将fancybox移到顶部附近，我在这个线程中找到了一个解决方案：

[如何将fancybox放在顶部](https://stackoverflow.com/questions/3197877/how-to-position-fancybox-on-top)

我也使用了这个 css 技巧，但问题是如果我使用这个 css 代码，那么fancybox 不会滚动滚动。

```
#fancybox-wrap {
  top: -100px !important;
} 
```

这是我的脚本链接（请点击图库）：[http ://travianstation.com/index.html](http://travianstation.com/index.html)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-22T10:54:50.673

尝试使用边距或 translateY 更改它相对于自身的位置：

```
#fancybox-wrap {
  margin-top: -100px;

#fancybox-wrap {
  transform: translateY(-100px);
} 
```

# mysql - 在什么条件下使用 concat，好还是坏？

> ID：10513039
> 
> 赞同：1
> 
> 时间：2012-05-09T09:11:13.153
> 
> 标签：mysql, where-clause, concat

## 一个简单的测验：

想必很多小伙伴都知道，

在我的应用程序中有一个查询，其中我在这样的条件下使用 concat，

v_book_id 和 v_genre_id 是我的程序中的 2 个变量。

```
SELECT link_id 
FROM link
WHERE concat(book_id,genre_id) = concat(v_book_id,v_genre_id); 
```

现在，我知道这有一个问题/错误，在你的一生中只会发生两次。你能告诉我它是什么吗？

**我昨天发现了这一点，并认为我应该对所有其他人在练习这一点发出声音。**

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:15:14.677

我们来看一下

```
WHERE concat(book_id,genre_id) = concat(v_book_id,v_genre_id); 
```

与

```
WHERE book_id = v_book_id AND genre_id = v_genre_id; 
```

那里。第二种解决方案是

*   更快（最佳索引使用）
*   更容易编写（更少的代码）
*   更容易阅读（作者到底是怎么想连接数字的？？？）
*   更正确（正如[Alnitak](https://stackoverflow.com/users/6782/alnitak)在问题评论中所说）。查看此示例数据：

    ```
    book_id | genre_id
    1       | 12
    11      |  2 
    ```

    现在添加（或连接）`v_book_id = 1`并`v_genre_id = 12`查看您将如何通过`concat()`查询获得有趣的结果

请注意，某些数据库（包括 MySQL）允许对*tuples*进行操作，这可能是上述聪明作者真正打算做的事情：

```
WHERE (book_id, genre_id) = (v_book_id, v_genre_id); 
```

这种元组谓词的一个工作示例：

```
SELECT * FROM (
  SELECT 1 x, 2 y FROM DUAL UNION ALL
  SELECT 1 x, 3 y FROM DUAL UNION ALL
  SELECT 1 x, 2 y FROM DUAL 
) a
WHERE (x, y) = (1, 2) 
```

请注意，某些数据库需要在右侧 tuple 周围加上额外的括号：`((1, 2))`

# javascript - 在 html 锚链接上下载音频文件，单击独立于浏览器操作

> ID：10513040
> 
> 赞同：3
> 
> 时间：2012-05-09T09:11:14.943
> 
> 标签：javascript, jquery, asp.net, html

我在页面上有一个指向 MP3 文件的锚链接。`Right-click + Save Target As..`我希望能够**通过单击链接**下载此文件。

目前，我面临一个问题，即不同的浏览器有不同的行为。IE 以 WMP 播放文件，Firefox 提示下载框，Chrome 开始内联播放文件。单击时的预期行为是浏览器应该下载文件或给我一个下载对话框。

我试过以下：

*   在页面上创建一个隐藏`iframe`并将其作为我的锚链接的目标，还尝试使用我想要的 MP3 文件位置创建一个表单作为其在此内部的操作，`iframe`并在锚链接单击事件上提交表单
*   `window.location = MP3 URL`链接点击设置
*   尝试了多种组合`window.open`

这些都无法帮助我。我只是无法在链接单击时获得下载对话框。

无辜的锚链接看起来像：

```
<a id="someID" href="myMP3file" target="whatever" title="Download" class="someClass">Download Me!</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:29:17.940

只是为了发布正确答案的开始。我想我会使用 http 处理程序 (.ashx) 文件来为这些文件编写一些自定义处理 - 本[教程](http://www.dotnetperls.com/ashx)显示了一个示例。

您的链接将类似于

```
<a href="MyMp3Handler.ashx?fileName=MyFile">Click here to download</a> 
```

处理程序将完成流式传输工作。

处理程序的外观示例（基于此[SO question](https://stackoverflow.com/questions/5596747/download-stream-file-from-url-asp-net)）

```
public void ProcessRequest (HttpContext context) {

    var filePath = Server.MapPath(context.Request.QueryString["fileName"].ToString()) + ".mp3";          
    if (!File.Exists(filePath))             
        return;          

    var fileInfo = new System.IO.FileInfo(filePath);         
    Response.ContentType = "application/octet-stream";         
    Response.AddHeader("Content-Disposition", String.Format("attachment;filename=\"{0}\"", filePath));         
    Response.AddHeader("Content-Length", fileInfo.Length.ToString());         
    Response.WriteFile(filePath);         
    Response.End();
} 
```

处理程序还需要在 web.config 中注册。

但请注意 - 这不是我的想法，所以代码需要调整才能工作。只是想我会弹出我将如何开始

**附加说明**

一位同事刚刚指出，即使将内容类型设置为`application/octet-stream`它仍然取决于浏览器实现如何呈现它，因此它仍然可能不会流式传输。也就是说，我做了类似的事情，但在 PHP 中，我在 Firefox、IE 和 Chrome 中得到了 mp3 文件，所以这个原理确实有效。我在 asp.net 中提供了示例，因为这就是您的问题被标记的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:51:19.903

@CrabBucket - 这是我解决问题的方法！！对我来说效果很好:) 我正在使用控制器操作从该服务器端启动此下载（这就是我没有使用处理程序的原因）。从控制器返回一个 http 响应最初似乎很棘手，但后来我想出了一种方法来欺骗这个东西；）我不得不在我的控制器操作中编写以下代码 -

```
{
    HttpWebRequest myRequest = (HttpWebRequest)HttpWebRequest.Create(FileURL);
    HttpWebResponse myResponse = (HttpWebResponse)myRequest.GetResponse();

    Stream myStream = myResponse.GetResponseStream();

    Response.ContentType = "application/octet-stream";
    Response.AddHeader("Content-Disposition", "attachment; filename=\"SaveMe.MP3\"");

    var readBytes = 10000000;
    var myAudResponse = new byte[readBytes];
    int fileLength;
    do {
        fileLength = myStream.Read(myAudResponse, 0, (int)readBytes);
        Response.OutputStream.Write(myAudResponse, 0, fileLength);
        Response.Flush();
    } while (fileLength > 0);
    myStream.Close();

    return new EmptyResult();
} 
```

根据您的智慧使用基本的 Try-Catch 等 :) 非常感谢各种网络论坛以及 CrabBucket（您发布代码的 SO 问题，有一个非常有帮助的答案！）没有说！

* * *

抱歉多次修改！我的代码失败了一会儿。我想，循环总是要走的路！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-22T03:47:21.770

您可以简单地使用锚标记的“下载”属性。

```
<a href='your_link' download='file_name'>Download_ME!</a> 
```

这对我和个人都有效，我更喜欢坚持使用提供的任何默认自定义。

# .net - 休眠应用程序

> ID：10513041
> 
> 赞同：0
> 
> 时间：2012-05-09T09:11:17.087
> 
> 标签：.net, scheduled-tasks

我有一组代码必须每天运行 3 次，即早上 8 点、中午 12 点和下午 4 点。在 C# 或 VB 中安排这些任务的最佳方法是什么。我不想使用 Windows 调度程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T09:14:06.197

最好的方法*是*windows 调度程序。

亚军：使用带有计时器的 Windows 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:18:00.017

如果您不想使用调度程序。

您可以编写自己的 Windows 服务，它可以触发您的“代码集”

**如何：以编程方式编写服务**

[http://msdn.microsoft.com/en-us/library/76477d2t(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/76477d2t(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:19:04.413

我同意最好的方法是窗口调度程序。但是[Cron 的开源实现](http://code.google.com/p/ncron/)可能是一个有趣的替代方案。反正我没测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T09:33:36.227

在您的情况下，带有计时器滴答事件的 Windows 服务是最好的解决方案。在这里解释如何使用计时器创建窗口服务：

[http://www.codeguru.com/csharp/.net/cpp_managed/windowsservices/article.php/c6919/Using-Timers-in-a-Windows-Service.htm](http://www.codeguru.com/csharp/.net/cpp_managed/windowsservices/article.php/c6919/Using-Timers-in-a-Windows-Service.htm)

# ruby-on-rails-3 - rubyrails 3.2，缓存操作和 ajax 调用

> ID：10513044
> 
> 赞同：0
> 
> 时间：2012-05-09T09:11:34.270
> 
> 标签：ruby-on-rails-3, caching, ruby-on-rails-3.1, memcached, browser-cache

我有个问题 。在页面产品中，我只显示 30 个产品，当滚动到底部时，它调用 ajax 加载更多产品，然后附加到页面。因为我有一个大数据，所以我不想在刷新页面时一次又一次地加载它，所以我使用缓存。

在控制器中，我在函数 ajax 中编写 caches_action :index 我在控制器中调用 action get_more

所以它只缓存第一页（在滚动 ajax 触发之前）。我想在ajax调用成功时缓存页面。我怎样才能做到这一点？

非常感谢 ：）

# java - Java - 管理令牌 - Struts - 多个会话

> ID：10513052
> 
> 赞同：0
> 
> 时间：2012-05-09T09:12:30.293
> 
> 标签：java, session, struts, token

感谢 TokenProcessor.java 类，我在 Struts 中使用令牌。但是，如果用户打开一个新选项卡，则会与令牌发生冲突，因为令牌与会话而不是类相关联。

我尝试使用它： http: [//www.coderanch.com/t/312306/EJB-JEE/java/Synchronizer-Token-EE-pattern-book](http://www.coderanch.com/t/312306/EJB-JEE/java/Synchronizer-Token-EE-pattern-book) 但它似乎不起作用。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:55:47.027

TokenProcessor 生成一个令牌并将其存储在一个名为“org.apache.struts.action.TOKEN”的会话属性中（来自常量 Globals.TRANSACTION_TOKEN_KEY）。这意味着，正如您所发现的，如果用户为同一会话打开了多个页面，例如，如果他们打开多个选项卡，则它不会起作用。如果您需要能够支持此用例，那么我认为您必须以不同的方式实现令牌检查。

看起来有人提交了一个补丁来解决这个问题（请注意，我没有看过它的作用）：[https ://issues.apache.org/jira/browse/STR-1609](https://issues.apache.org/jira/browse/STR-1609)

# c# - C# .Net 中的 Win32 应用程序

> ID：10513055
> 
> 赞同：1
> 
> 时间：2012-05-09T09:12:40.097
> 
> 标签：c#, visual-c++, com, wrapper, unmanaged

我开发了一个基于本机调用的基于窗口的应用程序。在这个应用程序中，我处理了大量的鼠标事件、键盘挂钩、绘画等。

我的问题是如何在 C# .Net 中使用该 win32 应用程序（非托管）？

我已经阅读了有关用于包装 win32 应用程序的托管包装器的信息，如果您认为这是最好的选择，那么请向我推荐任何可以帮助我前进的书籍或教程参考。否则，建议您认为在这种情况下最好的任何其他选项。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:28:27.003

如果您想从另一个应用程序“控制”一个应用程序，您有多种选择，其中一个是本机应用程序，另一个是托管应用程序。

您是否考虑过使用[命名管道](http://www.switchonthecode.com/tutorials/interprocess-communication-using-named-pipes-in-csharp)来“控制”您的应用程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:16:04.160

至少您可以通过 COM Interop 使用您的 .dll。

# git - git-svn 不工作，报告“致命：无法执行 'git-svn'：不是目录”

> ID：10513057
> 
> 赞同：1
> 
> 时间：2012-05-09T09:12:43.957
> 
> 标签：git, git-svn

我正在尝试将 svn 存储库迁移到 git。但我被困在

```
git svn clone https://svn.xxx.com/repos/xxx/trunk ~/temp 
```

抛出“致命：无法执行'git-svn'：不是目录”错误

假设我在目录 ~/temp 中，即使我只运行“git svn”，我也会收到相同的错误消息。

试过了

```
man git-svn 
```

效果很好。

请问有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:46:49.263

我建议您使用 SubGit 项目 ( [subgit.com](http://subgit.com) ) 进行迁移。它比 git-svn 更好地保留了最重要的 SVN 概念（EOL、忽略、标签、合并等）。它还保持同步 SVN 和 Git 存储库，因此您可以同时使用 SVN 和 Git 界面，直到您运行

```
subgit uninstall <path/to/svn/repo> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:45:39.207

做完这些后，问题似乎消失了。我得到了一个新版本的git 1.7.3.4，不确定是不是1.7.2版本的问题

```
sudo port deactivate git-core
sudo port install git-core +svn 
```

参考[http://redlinesoftware.com/blog/2008/2/24/converting-subversion-repositories-to-git](http://redlinesoftware.com/blog/2008/2/24/converting-subversion-repositories-to-git)

**但是我的 git-svn 和 git-svnimport 被破坏了！**部分

# c# - 使用查询字符串参数发布请求

> ID：10513058
> 
> 赞同：1
> 
> 时间：2012-05-09T09:12:46.157
> 
> 标签：c#, post, asp.net-web-api

我正在尝试为复杂类型的搜索构建 Web API。我想在结果中支持分页。搜索的“状态”很复杂，因此并不真正适合在查询字符串中持久化。但我希望将分页选项包含在查询字符串中。

我已经实现了两种方法，如下所示，web api 代码*似乎*理解我想要做什么，但查询字符串参数从未被分配。对此的任何提示或建议将不胜感激：

```
public Task<HttpResponseMessage<SearchResults>> Post(SearchRequest request) //Method 1
{
    return Post(request, null, null);
}

public async Task<HttpResponseMessage<SearchResults>> Post(SearchRequest request, string page, string pageSize) //Method 2
{
    //All of the complex code, including...
    if (PageNo < TotalPages)
    {
        searchResults.AddLink(new Link { Uri = Url.Route("DefaultApi", new {
             controller = "AdvancedSearch",
             page = (PageNo + 1).ToString(),
             pageSize = PageSize.ToString() }),
             Relation = "nextPost" });
    }
    //Final wrap up, etc
} 
```

在 POST a `SearchRequest`to`/api/AdvancedSearch`时，调用方法 1，然后调用方法 2，后者进行搜索并打包结果。正如您所希望看到的，包含在此结果中（如果有更多结果页面可用）是为下一页发布的 URL。基于此生成的 URL`/api/AdvancedSearch?page=2&pageSize=20`正是我所希望的。

然后，在我的调用代码中，我执行`POST`到第二个 URL。仅调用方法 2（如预期的那样）。但是，两者`page`和`pageSize`都是`null`。

我究竟做错了什么？或者你还需要看什么才能回答这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:16:12.717

# 下面不需要

~~您需要使用以下方法装饰您的参数`[FromUri]`：~~

 ~~```
public async Task<HttpResponseMessage<SearchResults>> Post(SearchRequest request, 
   [FromUri]string page, 
   [FromUri]string pageSize) 
```~~  ~~* * *

正如我在评论中所说，由于 Content 属性将执行所有需要的操作，`HttpResponseMessage<T>`因此被删除。`HttpResponseMessage`

* * *

我检查并在帖子中传递了查询字符串参数，没问题。~~

# c - 在 C++ 中复制字符串的函数选择，注重性能

> ID：10513060
> 
> 赞同：2
> 
> 时间：2012-05-09T09:12:47.237
> 
> 标签：c, string, performance, copy

我正在编写一段代码，需要将值从一个 char 指针复制到另一个。主要要求是代码应该尽可能快地运行，并且可以在尽可能多的平台上运行。

我看到我可以使用以下两个函数之一来执行此字符串复制：

```
char * strncpy ( char * destination, const char * source, size_t num ); 
```

和

```
void * memcpy ( void * destination, const void * source, size_t num ); 
```

我如何确定最适合我的要求？

一般来说，我怎样才能找出两个不同功能（跨平台）的相对速度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T09:16:36.473

他们不做同样的事情。如果您确定源缓冲区和目标缓冲区大小相同，请使用`memcpy`. 如果没有，`strncpy`进行绑定检查，这是要走的路。

但是，除非您进行数百万次操作，否则这不应该是您做出决定的因素。先做一些分析，看看你节省了多少时间（如果有的话）`memcpy`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T09:14:59.330

从性能 POV 来看，`memcpy`速度更快，因为它不检查内容本身，只是复制它。

关于兼容性 - memcpy 是 C 标准的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T09:19:36.363

如果您必须复制字符串（除非您事先知道它们的大小），您应该始终使用`strncpy`.

即使底层实现没有那么不同`memcpy`也会快得多，因为它不必检查它正在复制的内容，当它复制*字符串*字符（）`strncpy`的结尾时会停止。*`NULL`*

 ***编辑**
关于性能的一些注意事项`strncpy`与`memcpy`.
我们可以假设有两个 - 例如 - 512 字节的缓冲区，我们想要将内容（一个`NULL`终止字符串 - 比如说 - 32 个字符）从第一个缓冲区复制到第二个缓冲区。

**`strncpy`将做什么：**将一个字节一个字节地从源复制到目标。它会在复制`NULL`字符时停止，然后将其他所有内容设置为 0。这是此功能的可能实现：

```
char *strncpy(char *dest, const char *src, size_t n)
{
    char *ret = dest;
    do {
        if (!n--)
            return ret;
    } while (*dest++ = *src++);
    while (n--)
        *dest++ = 0;
    return ret;
} 
```

**`memcpy`将做什么：**将所有内容从源文件批量复制到目标文件。这是此功能的可能实现：

```
void *memcpy(void *dest, const void *src, size_t n)
{
    char *dp = dest;
    const char *sp = src;
    while (n--)
        *dp++ = *sp++;
    return dest;
} 
```

即使两个版本都**没有**优化，您也可以看到它执行的操作要少得多，但只有当字符串长度比总缓冲区长度短得多时它才会变慢（它将保存`*sp++`在第二个中`while`）。所以即使是性能测试也不可靠，因为它取决于*真实的输入（所以你应该有来自***现实世界**的某种统计数据）。

**注意事项**
此外，我们应该记住，真正的实现并不是那么简单！！！看看这个实现`strncpy`： http: [//sourceware.org/git/ ?p=glibc.git;a=blob;f=string/strncpy.c;h=f6ee27832da95d9da9aef8a6fcf73f53f997c796;hb=HEAD](http://sourceware.org/git/?p=glibc.git;a=blob;f=string/strncpy.c;h=f6ee27832da95d9da9aef8a6fcf73f53f997c796;hb=HEAD)

现在看看`memcpy`实现： http: [//sourceware.org/git/ ?p=glibc.git;a=blob;f=string/memcpy.c;h=3080fcb4de4cec83a57b65bf07995a1e41abb1f6;hb=HEAD](http://sourceware.org/git/?p=glibc.git;a=blob;f=string/memcpy.c;h=3080fcb4de4cec83a57b65bf07995a1e41abb1f6;hb=HEAD)

`memcpy`即使在我之前说过的极端情况下，也总是比`strncpy`任何现实世界的情况都要快（看 PAGE_COPY_FWD_MAYBE）。

**注意**
这不是你的情况，因为你会大量使用它，但总的来说，我认为*如果你必须复制一个字符串，那么使用 strncpy*。总是。可能您在那里不需要任何性能提升，它会为您处理 NULL 终止符，并且总是很清楚您正在复制一个将读取您的代码的字符串。
您的情况不同，因为您确实进行了大量计算，那么如果知道缓冲区大小，则应该使用`memcpy`它，因为它可能会快得多（特别是如果缓冲区不是很小）。

**参考**
Demo 实现来自：[http](http://clc-wiki.net/wiki/)
://clc-wiki.net/wiki/ memcpy 性能测试： http: [//eetimes.com/design/embedded/4024961/Optimizing-Memcpy-improves-speed](http://eetimes.com/design/embedded/4024961/Optimizing-Memcpy-improves-speed)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T09:21:39.857

您在此处选择的功能具有不同的功能。选择您需要的那个。

*   memcpy 将复制所有内容，并且两个缓冲区的大小必须相同
*   strncpy 将从较小的 c 字符串复制并用 /0 填充目标缓冲区的其余部分
*   strcpy 只会将字符串从目标复制到目标（但您应该使用安全变体之一）。

关于性能：memcpy 与 strncpy - memcpy 更快，但您需要知道输入字符串的大小。如果您的字符串大小变化很大， strcpy 可能是最快的，因为它在复制时确定了所需的大小。*

# javascript - Google Charts - X 轴上带有日期的堆积条形图

> ID：10513061
> 
> 赞同：1
> 
> 时间：2012-05-09T09:12:55.613
> 
> 标签：javascript, date, charts

我有一个代表费用的数据集，如下所示：

```
[{
    '1.1.2012': [{
        'name': 'Company 1',
        'costs': '400'
    }, {
        'name': 'Company 2',
        'costs': 500
    }],
    '2.1.2012': [{
        'name': 'Company 3',
        'costs': '1000'
    }, {
        'name': 'Company 4',
        'costs': 100
    }]
}] 
```

我的目标是使用 Google 的 Chart API 显示堆积条形图。我希望 X 轴代表发生费用的日期，而 y 轴应该代表计算成本。

如果我在 x 轴上使用自己的标签，谷歌似乎不喜欢它，而我发现使用日期的只是：[https](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline) ://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline ，这不适用于条形图。

我担心的另一个问题是图表应该显示接下来 14 天的费用，因此可能会有每月甚至每年的重叠。

任何指针我需要如何将我的数据传递给`arrayToDataTable()`谷歌提供的功能？

非常感谢你的帮助！

# ruby - Ruby - Rails - 在 rails 的源代码中加密存储的密码

> ID：10513067
> 
> 赞同：0
> 
> 时间：2012-05-09T09:13:21.120
> 
> 标签：ruby, ruby-on-rails-3

如何加密 Rails 源代码中存储的密码？这些不是用户的密码，而是应用程序用于访问其他外部服务的密码；对于 SOAP、REST api 等。我不能单向散列它，因为应用程序必须发送一个文本传递来对其他服务进行身份验证。Base64 编码/解码不是最佳选择，因为它可以从源代码复制并反转。

# ruby-on-rails-3 - 是否可以将脚本中的代码注入正在运行的 Rails 应用程序中

> ID：10513068
> 
> 赞同：0
> 
> 时间：2012-05-09T09:13:21.373
> 
> 标签：ruby-on-rails-3, runtime, inject

假设我有一个正在运行的 ruby​​ on rails 应用程序。我正在创建由运行时提供的描述定义的类（db-models）。

现在，我正在使用 rails 应用程序（通过浏览器）来触发代码生成——因此该应用程序“知道”它的新类。

但是，是否可以从 rails app 目录中执行的脚本注入代码？
喜欢……</p>

```
$ [path/to/app] rails s   
$ [path/to/app] script/apply_schema 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:39:48.573

由于 RoR 支持许多帮助程序来生成表、列等。我不明白为什么要使用脚本注入来执行此操作。这不仅是一种非常奇怪的输入和呈现数据的方式，而且还会产生相当大的安全风险。

然后是我的第二个问题（在运行时）您将如何定义身份验证？因为你试图注入代码？

我建议使用 SQL 助手来创建/更新/销毁属性。这是基于一个被广泛使用和有效的架构。还使用关系使您能够构建很多东西，同时仍然保持在 RoR 提供的“安全”环境中。

如果您想尝试在运行时提供数据注入的框架，请尝试 Meteor

# javascript - 使用 javascript 进行链接跟踪

> ID：10513069
> 
> 赞同：0
> 
> 时间：2012-05-09T09:13:22.030
> 
> 标签：javascript

我需要为客户制作一些链接跟踪/合作系统。它应该检测包含我的 javascript 的网站上的链接点击，计算点击次数，然后从 href 重定向到链接，然后检查目标页面上的一些用户操作。您是否有任何可能有用的参考资料、链接、教程、书名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:18:32.243

一种常见的做法是让您的 javascript 在重定向到链接 url 目标之前加载跟踪像素。如果您想在客户端离开您的页面后进一步跟踪它，该像素还允许您设置 cookie。

# windows-phone-7 - 想要在 Scrolltohorizo ntal 偏移方法中实现延迟滚动以平滑滚动

> ID：10513072
> 
> 赞同：0
> 
> 时间：2012-05-09T09:13:31.587
> 
> 标签：windows-phone-7, silverlight-4.0, windows-phone-7.1

设置滚动水平偏移值时，我需要平滑滚动。从 1000 偏移，如果我滚动到 5000，它会突然闪烁移动并将视图固定在 5000。我需要像动画一样缓慢而平滑地滚动，并且必须到达目的地。如果不使用故事板，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:12:55.233

我发现如果不实现情节提要动画，我们就无法实现平滑滚动。我参考了这门课并得到了结果。

[http://blog.devarchive.net/](http://blog.devarchive.net/)

# python - 显示项目列表的文本用户界面，显示特定项目的更多信息

> ID：10513076
> 
> 赞同：0
> 
> 时间：2012-05-09T09:13:50.633
> 
> 标签：python, design-patterns, user-interface, command-line, tui

我创建了一个 Python 命令行应用程序。*其中一个功能是，当您使用-l*开关调用它时，它会打印从数据库中获取的项目列表。每个项目都有相关的详细描述。

```
1: item1
2: item2
3: item3
4: item4 
```

当用户想要显示列表中特定项目的描述时，TUI 设计（在命令行中）对于用户来说直观和舒适的好模式是什么？

现在，我的应用程序相当繁琐。*该项目以数字为前缀，当您想查看描述时，函数 getch() 等待间隔(1..9)*中的按键并打印具有给定索引的项目的描述。我不能使用鼠标位置（这会更舒服），因为它是命令行应用程序。另一件事是，在哪里最适合打印描述，能够反复删除它并打印另一个项目的描述，这样屏幕就不会被无趣的信息杂乱无章？用户应该只显示他在特定时刻感兴趣的信息。

列表的长度是无限的。区间*(0..9)*是临时解决方案。

此 TUI 设计的最佳实践是什么？你会使用一些 TUI 库来帮助解决这个问题吗？如果是这样，请展示一些典型的模式，无论是否使用您选择的库。

我正在使用*Python*，但如果可以在*Python中实现相同的功能，请随意使用另一种命令式语言*

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:26:31.200

1）这个问题[https://stackoverflow.com/questions/791261/python-text-user-interface](https://stackoverflow.com/questions/791261/python-text-user-interface)在其答案中提到了许多似乎适合这项任务的优秀库。

2）我建议提供箭头键作为有效输入[上面的一些库可以处理这个]而不是仅基于数字的部分。例如，[NCDU](http://dev.yorhel.nl/ncdu)工具（这是一个基于 ncurse 的磁盘使用工具）有一个很棒的基于文本的 UI，使用箭头键，您可能希望将其作为示例来引用。

# asp.net - 如何在asp.net中查看一页中的所有数据？

> ID：10513077
> 
> 赞同：-1
> 
> 时间：2012-05-09T09:13:59.050
> 
> 标签：asp.net

我在 asp.net Web 应用程序中有五个页面。我在第一页输入了信息，然后单击下一步。它转到下一页并在此页面中输入信息。我继续这个过程五页。在点击第五页的提交按钮之前，我需要在点击审核按钮的所有先前页面中输入的所有信息后进行审核。这是怎么做的？请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:21:38.140

我个人认为你在这件事上走错了路。在页面之间传递数据会给你带来各种各样的麻烦。

有许多方法可以在单个页面上实现这一点。您可以创建 5 个单独的控件并将它们全部放在单个页面上（如果它们不是太大并减慢页面加载速度），然后根据用户要查看的内容使适当的控件可见。例如，当您单击下一步时，将当前控件的可见属性设为 false，然后显示下一个。然后在过程结束时，当您单击完成时，您可以从每个控件访问输入的数据，您可以在控件中创建一个花哨的函数，该函数返回一个填充的类，甚至通过引用传递（我们不会进入到这里）。

您也可以考虑使用[Views](http://www.tutorialspoint.com/asp.net/asp.net_multi_views.htm)。这是您可以在单个页面上实现的另一种方法。

如果您坚持使用多个页面，那么您可以将数据临时存储在数据库中，然后在最后一页上从会话中获取 ID，并最终将其全部存储为一个。但我不建议这样做，尽管这取决于情况。如果您希望他们能够填写一半的表格，然后在以后继续，那么建议使用数据库方法，但如果您只想在完成时存储数据，那么您最终会得到很多完成一半的冗余数据使用这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:18:00.063

您可以在执行这些步骤时将数据存储在数据库中，并在最后一步中检索它。您也可以将其存储在 Session 中，作为替代方案。

当然还有其他方法可以实现这个场景，但想法是以某种方式持久化数据并在最后一步中检索它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:36:51.833

解决方案完全取决于您使用的框架和方法。我将尝试帮助您使用 ASP.Net MVC3 解决方案，因为我认为 MVC3 确实是使用 ASP.Net 时的最佳选择。

*   当用户单击“下一步”按钮时，只需使用 JavaScript / jQuery Ajax 方法加载部分视图（包含下一步 html），或者使用 jQuery 显示 / 隐藏功能仅显示下一步。
*   将表单数据保存在一个 html 表单标签（或至少一个 holder-div）中。
*   当您需要在最后一步提交信息时，只需使用单个 jQuery 序列化调用收集信息并将其发送到您的 ASP.Net 接收器。

一些代码片段：

从 Razor 视图引擎显示局部视图：
`@Html.Partial("/Views/Instance/_General.cshtml", Model)`

通过 jQuery 加载局部视图 - 更多详细信息，请参阅[http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)
`@Html.Partial("/Views/Instance/_General.cshtml", Model)`

通过 jQuery 将数据发布到服务器：

```
$("#submit-button-id").click(function () {
    var data = $("#form-id").serialize();

    $.ajax({
        url: "/Example/Save",
        type: "POST",
        data: data,
        cache: false,
        success: function (success) {
            if (success) {
                // things worked out just fine..
            }
            else {
                // present some kind of error..
            }
        }
    });
}); 
```

# iphone - ObjC - 自动视图旋转

> ID：10513083
> 
> 赞同：0
> 
> 时间：2012-05-09T09:14:11.860
> 
> 标签：iphone, autorotate

我和我的同学为 iPhone 编写了一个 Objective-c 程序。但是我们有一个大问题：

我们的应用程序以纵向模式编码，但应以横向模式（直接）显示 2 或 3 个视图。我们在这些视图中激活了横向自动旋转，但是，如果我们现在打开其中一个视图，我们会再次获得纵向，并且当我们转动设备时它只会变成横向。

（已经在我们的测试设备上，IOS模拟器没问题！）

有人可以帮助我们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:40:06.030

唯一对我有用的是使用

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

***在我的 ViewController 中并用presentModalViewController***呈现它。这迫使视图保持在横向。

# ajax - 找出 XMLHttpRequest 到底在请求什么

> ID：10513085
> 
> 赞同：0
> 
> 时间：2012-05-09T09:14:13.147
> 
> 标签：ajax, windows-phone-7, cordova

我们正在使用 PhoneGap 开发一个跨平台应用程序。有一次，它向相对路径发出 AJAX 请求，这在 Android 和 iOS 上都可以正常工作，但在 Windows Phone 上却不行——它会得到 404 响应。绝对 URL 可以正常工作。以下代码：

```
var a = document.createElement('a');
a.setAttribute('href', 'personalData.html');
console.log(a.href); 
```

也解析为正确的绝对 URL。但是，以下内容：

```
var xhr = new XMLHttpRequest();
xhr.open("GET", "personalData.html", true);
xhr.onreadystatechange = function () {
    if (xhr.readyState === 4) {
        console.log(xhr);
    }
}; 
```

返回 404。我想知道发生了什么。有什么方法可以知道 XHR 请求的绝对路径是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:31:18.753

在这些情况下，[Fiddler Web Debugger](http://www.fiddler2.com/fiddler2/)是无与伦比的。它会准确地告诉你请求在做什么。

它也[适用于 Windows Phone 模拟器](http://blogs.msdn.com/b/fiddler/archive/2010/10/15/fiddler-and-the-windows-phone-emulator.aspx)。要调试实际设备，请将 Fiddler 设置为接受外部连接并将 Fiddler 指定为手机上的代理。我已经完成了这两种情况，工作正常。

试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:47:53.110

XMLHttpRequest 是由 Microsoft 设计并被 Mozilla、Apple 和 Google 采用的 JavaScript 对象，它与 Phonegap 无关。

[https://developer.mozilla.org/en/DOM/XMLHttpRequest](https://developer.mozilla.org/en/DOM/XMLHttpRequest)

说到这里，您可以尝试使用像 Fiddler 这样的 http 代理来查看所有 http 流量。

[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

此致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T16:14:18.870

我在我的项目（Phonegap/WinPhone7）中尝试了您的代码，并且您的代码在我初始化请求（）之前没有得到任何东西`xhr.send();`。

如果没有这种方法，我不知道你是如何提出请求的。

# design-patterns - 抽象工厂模式

> ID：10513086
> 
> 赞同：47
> 
> 时间：2012-05-09T09:14:14.137
> 
> 标签：design-patterns, c#-4.0, architecture, abstract-factory

1.  C# 中抽象工厂模式的好例子？
2.  C#中抽象工厂模式的优点是什么？
3.  如何在抽象工厂模式中使用 C# 泛型？
4.  如何使用抽象工厂模式进行单元测试？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-05-09T09:47:15.183

首先，我建议您阅读抽象工厂模式，例如[这里](http://en.wikipedia.org/wiki/Abstract_factory_pattern)。现在我将尝试解释为什么你会使用这种模式。

通常，如果您使用工厂模式，您将在工厂中创建对象。当您有多个给定类（或多个类）的实现时，就会出现问题。现在，这些多个实现被分组。当您有工厂时，您将使用`Abstract Factory pattern`，但您希望按组对对象的创建进行分组。

好的，上面的解释可能不是很清楚，所以我举个例子。

假设您有一个带有数据代理的类库。数据代理为您提供访问和存储不同数据的方法。当然，有多种存储数据的方法。例如：在数据库中、在 XML 文件中、通过服务、. 对于这些可能的方式中的每一种，您都希望拥有数据代理。现在的问题是，您不希望有人将 DataAgentA 用于 XML 文件和 DataAgentB 用于数据库（假设我们有实体 A 和 B）。用户应该只使用一个存储引擎。

让我向您介绍抽象工厂模式。

您将确保用户不能直接实例化您的数据代理，但他们必须将这些数据代理从工厂中取出。（一个额外的优势是，当您使用例如数据库 (EF) 时，您可以进行内部连接以确保您的数据代理使用相同的上下文等）我们如何实现这一点？我们将数据代理的构造函数设置为“内部”。除此之外，我们为每个存储引擎创建不同的工厂。现在，由于这些工厂都做同样的事情，我们也有这些接口（就像我们的数据代理一样，因为它们都必须做同样的事情，对吧！？）。

下面我们有我们的接口。基本上这是工厂模式，但只是现在我们谈论的是*接口而不是**类*。

 *```
public interface IAgentA 
{
    // Add some methods here!
}

public interface IAgentB
{
    // Add some methods here!
}

public interface IAgentFactory
{
    IAgentA CreateAgentA();
    IAgentB CreateAgentB();
} 
```

现在对于这两个代理，我们有两种可能的实现，一种用于 XML，另一种用于数据库存储（再次说明：这是一个示例，您可以拥有任意数量的实现类型）。这些实现看起来像这样（见下文）。请注意，我制作了构造函数`internal`！这是该代码块之后的部分所必需的。

```
public class AgentA_Xml : IAgentA
{
    internal AgentA_Xml()
    { /* Construction here */}

    // IAgentA method implementations
}

public class AgentB_Xml : IAgentB
{
    internal AgentB_Xml()
    { /* Construction here */}

    // IAgentB method implementations
}

public class AgentA_Database : IAgentA
{
    internal AgentA_Database()
    { /* Construction here */}

    // IAgentA method implementations
}

public class AgentB_Database : IAgentB
{
    internal AgentB_Database()
    { /* Construction here */}

    // IAgentB method implementations
} 
```

现在因为构造函数是内部的。这导致您无法在程序集之外实例化这些类，这通常是您对这些情况所做的事情。现在我们必须创建我们的工厂。

```
public class XMLAgentFactory : IAgentFactory
{
    public IAgentA CreateAgentA()
    {
        return new AgentA_Xml();
    }

    public IAgentB CreateAgentB()
    {
        return new AgentB_Xml();
    }
}

public class DatabaseAgentFactory : IAgentFactory
{
    public IAgentA CreateAgentA()
    {
        return new AgentA_Database();
    }

    public IAgentB CreateAgentB()
    {
        return new AgentB_Database();
    }
} 
```

由于两个工厂都实现了`IAgentFactory`接口，用户可以轻松更改`AgentFactory`实现（如果在这种情况下，他想使用不同的存储引擎），而无需更改他编写的任何其他代码（针对代理），只要他编程针对接口（显然）。

以上解释希望能回答您的问题（1）和（2）。

> 1.  C# 中抽象工厂模式的好例子？
> 2.  c# 中抽象工厂模式的优点是什么？

回答你的问题（3）。

> 1.  如何将 C# 泛型与抽象工厂模式结合使用？

您仍然可以使用泛型，当您使用抽象工厂模式时，这不会有任何改变。当然，您必须创建通用工厂方法（create 方法），但这不应该有任何问题。

回答你的问题（4）。

> 1.  How does unit test with Abstract factory pattern?

Just the same as you would unit test any other class. Only one thing will be different.

Since you probably also want to test the constructor of your classes (and maybe other internal methods), you need to make the internal constructors (methods) visible to your unit test project (and you don't want to change the `internal` to `public`). This is easily done by adding the following line to your `AssemblyInfo.cs` file of your project (the project where your factory and classes are in):

```
[assembly: System.Runtime.CompilerServices.InternalsVisibleTo("My.UnitTest.Namespace")] 
```

You can find more information (and remarks) about the InternalsVisibleTo attribute on [**MSDN**](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx).

I hope this kind of answers your question.*

# c - 通过传递给函数的指针修改结构成员

> ID：10513090
> 
> 赞同：0
> 
> 时间：2012-05-09T09:14:21.967
> 
> 标签：c, pointers

例如这段代码：

```
struct test{
    int ID;
    bool start;
};

struct test * sTest;

void changePointer(struct test * t)
{
    t->ID = 3;
    t->start = false;    
}

int main(void)
{
    sTest->ID = 5;
    sTest->start = true;
    changePointer(sTest);
    return 0;
} 
```

如果我要执行这段代码，那么输出会是什么？（即，如果我传递这样的指针，它会更改引用还是只是一个副本？）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:17:57.903

你的程序没有任何输出，所以不会有。

它也从不初始化`sTest`指向某个有效内存的指针，因此结果完全未定义。该程序调用未定义的行为，并且在运行时应该/可能/可能会崩溃。

*如果*指针已被初始化为指向类型的有效对象`struct test`，则该结构的字段将被更改，因此在末尾`main()`，`ID`将是 3。内部`changePointer()`所做的更改与在同一内存中完成的更改`main()`.

一个简单的解决方法是：

```
int main(void)
{
   struct test aTest;
   sTest = &aTest;    /* Notice the ampersand! */
   sTest->start = true;
   changePointer(sTest);

   return 0;
} 
```

另请注意，C99 之前的 C 没有`true`关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:18:22.200

1）首先你的代码会崩溃，因为你没有分配内存来保存结构..你可能需要添加

```
 sText  = malloc(sizeof(struct test)); 
```

2）纠正崩溃后，您可以传递结构指针，您在changePointer函数中所做的更改将反映在main和vizeversa中。

3）但是由于您没有打印任何内容，因此您的程序不会有任何输出..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:21:10.450

唯一的问题是为什么在全局命名空间中需要一个测试指针？其次是你没有任何内存分配操作。你有一个指针作为你的函数的输入参数。因此，它指向的结构将在“changePointer”中更改。

# .net - 同一查询中不同项目的不同存储库

> ID：10513093
> 
> 赞同：0
> 
> 时间：2012-05-09T09:14:41.837
> 
> 标签：.net, asp.net-mvc-3, entity-framework, dependency-injection, ninject

我正在将 ASP.NET MVC3 与实体框架一起使用，并使用带有 DI (Ninject) 的通用存储库模式。

我有一个其他站点连接到它的主项目（类库）。主项目有它自己的存储库和自己的上下文（它自己的 .edmx 文件），它们连接到公共表。每个站点都有自己的存储库，这些存储库连接到它自己的表。我的问题是，当我尝试运行将站点表与主项目表结合起来的复杂 linq 查询时，我得到“同一查询中的不同上下文”异常。拜托，你能告诉我我做错了什么吗？

异常类型：

> 系统不支持的异常

异常消息：

> 指定的 LINQ 表达式包含对与不同上下文关联的查询的引用。

这是堆栈跟踪：

> System.Data.Objects.ELinq.Funcletizer.FuncletizingVisitor.InlineObjectQuery(ObjectQuery inlineQuery, Type expressionType) 在 System.Data.Objects.ELinq.Funcletizer.FuncletizingVisitor.InlineValue(Expression expression, Boolean recompileOnChange) 在 System.Data.Objects.ELinq。 Funcletizer.FuncletizingVisitor.Visit(Expression exp) 在 System.Linq.Expressions.EntityExpressionVisitor.VisitExpressionList(ReadOnlyCollection'1 original) 在 System.Linq.Expressions.EntityExpressionVisitor.VisitMethodCall(MethodCallExpression m) 在 System.Linq.Expressions.EntityExpressionVisitor.Visit( System.Linq.Expressions.EntityExpressionVisitor.VisitLambda(LambdaExpression lambda) 在 System.Linq.Expressions 的 System.Data.Objects.ELinq.Funcletizer.FuncletizingVisitor.Visit(Expression exp) 的表达式 exp)。EntityExpressionVisitor.Visit(Expression exp) 在 System.Data.Objects.ELinq.Funcletizer.FuncletizingVisitor.Visit(Expression exp) 在 System.Linq.Expressions.EntityExpressionVisitor.VisitUnary(UnaryExpression u) 在 System.Linq.Expressions.EntityExpressionVisitor.Visit(表达式 exp) 在 System.Data.Objects.ELinq.Funcletizer.FuncletizingVisitor.Visit(Expression exp) 在 System.Linq.Expressions.EntityExpressionVisitor.VisitExpressionList(ReadOnlyCollection'1 original) 在 System.Linq.Expressions.EntityExpressionVisitor.VisitMethodCall(MethodCallExpression m ) 在 System.Linq.Expressions.EntityExpressionVisitor.Visit(Expression exp) 在 System.Data.Objects.ELinq.Funcletizer.FuncletizingVisitor.Visit(Expression exp) 在 System.Data.Objects.ELinq.Funcletizer.Funcletize(表达式表达式，Func '1& recompileRequired) 在 System.Data.Objects.ELinq.ExpressionConverter..ctor(Funcletizer funcletizer, Expression expression) 在 System.Data.Objects.ELinq.ELinqQueryState.CreateExpressionConverter() 在 System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan( Nullable'1 forMergeOption) 在 System.Data.Objects.ObjectQuery'1.GetResults(Nullable'1 forMergeOption) 在 System.Data.Objects.ObjectQuery'1.System.Collections.Generic.IEnumerable.GetEnumerator() 在 System.Data。 Entity.Internal.Linq.InternalQuery'1.GetEnumerator()GetExecutionPlan(Nullable'1 forMergeOption) 在 System.Data.Objects.ObjectQuery'1.GetResults(Nullable'1 forMergeOption) 在 System.Data.Objects.ObjectQuery'1.System.Collections.Generic.IEnumerable.GetEnumerator() 在系统。 Data.Entity.Internal.Linq.InternalQuery'1.GetEnumerator()GetExecutionPlan(Nullable'1 forMergeOption) 在 System.Data.Objects.ObjectQuery'1.GetResults(Nullable'1 forMergeOption) 在 System.Data.Objects.ObjectQuery'1.System.Collections.Generic.IEnumerable.GetEnumerator() 在系统。 Data.Entity.Internal.Linq.InternalQuery'1.GetEnumerator()
> 在 System.Data.Entity.Infrastructure.DbQuery'1.System.Collections.Generic.IEnumerable.GetEnumerator() 在 System.Linq.SystemCore_EnumerableDebugView'1.get_Items()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:32:22.503

想一想：您有两个不同的上下文，它们在概念上代表两个不同的数据库连接，因此假设 EF 可能甚至是两个不同服务器上的两个不同数据库。您根本无法*对数据库上下文中两个单独服务器中*包含的数据进行连接- 这就是 EF 强制您使用相同上下文以使其抽象仍然有效的原因。

正如@GertArnold 在评论中建议的那样，唯一可行的方法是从数据源A 中获取相关数据，从数据源B 中获取相关数据并在内存中进行连接（这就是`.AsEnumerable()`本质上会做的事情）。现在在大多数情况下，您不想这样做，因为您将比必要的更多的数据具体化到内存中。

因此，强烈考虑重构代码以使用工作单元模式，以便存储库可以使用*相同的上下文*来避免这个问题。这就像使用构造函数注入将上下文传递给您的类库类一样简单。

# visual-c++ - boost::shared_array 赋值使应用程序崩溃(VC++ 2010)

> ID：10513096
> 
> 赞同：0
> 
> 时间：2012-05-09T09:15:00.073
> 
> 标签：visual-c++, queue, shared-ptr

为我的应用修改了以下循环队列代码。

该队列最多可容纳 32 个元素，我已将这些元素声明为类中的结构数组。要将元素添加到队列中，您必须调用 CreateElement() 函数，该函数会检查空闲元素并返回索引。当我在处理 CreateElement 函数中的以下行后重用元素时崩溃

```
 boost::shared_array<char> tData(new char[bufferSize]);

    m_QueueStructure[queueElems].data = tData; 
```

根据文档，赋值运算符应该销毁早期的对象并分配新的对象。为什么会崩溃？谁能告诉我我在哪里搞砸？

```
#include "boost/thread/condition.hpp"
#include "boost/smart_ptr/shared_array.hpp"
#include <queue>

#define MAX_QUEUE_ELEMENTS 32

typedef struct queue_elem
{
    bool            inUse;
    int             index;
    int             packetType;
    unsigned long   compressedLength;
    unsigned long   uncompressedLength;
    boost::shared_array<char> data;
}Data;

class CQueue
{
private:
    int                         m_CurrentElementsOfQueue;
    std::queue<Data>            the_queue;
    mutable boost::mutex        the_mutex;
    boost::condition_variable   the_condition_variable;
    Data                        m_QueueStructure[MAX_QUEUE_ELEMENTS];

public:

    CQueue()
    {
        m_CurrentElementsOfQueue = 0;

        for(int i = 0; i < MAX_QUEUE_ELEMENTS; i++)
        {
            m_QueueStructure[i].inUse = false;
            m_QueueStructure[i].index = i;
        }
    }

    ~CQueue()
    {
        for(int i = 0; i < m_CurrentElementsOfQueue; i++)
        {
            int index = wait_and_pop();

            Data& popped_value = m_QueueStructure[index];

            popped_value.inUse = false;
        }
        m_CurrentElementsOfQueue = 0;
    }

    void push(Data const& data)
    {
        boost::mutex::scoped_lock lock(the_mutex);

        the_queue.push(data);

        lock.unlock();      

        the_condition_variable.notify_one();
    }

    bool empty() const
    {
        boost::mutex::scoped_lock lock(the_mutex);
        return the_queue.empty();
    }

    bool try_pop(Data& popped_value)
    {
        boost::mutex::scoped_lock lock(the_mutex);
        if(the_queue.empty())
        {
            return false;
        }

        popped_value=the_queue.front();
        the_queue.pop();
        return true;
    }

    int wait_and_pop()
    {
        boost::mutex::scoped_lock lock(the_mutex);

        while(the_queue.empty())
        {
            the_condition_variable.wait(lock);
        }

        Data& popped_value=the_queue.front();

        the_queue.pop();

        return popped_value.index;
    }

    int CreateElement(int bufferSize, unsigned long _compressedLength, 
        unsigned long _uncompressedLength, int _packetType) /* Send data length for this function */
    {

        int queueElems = 0;

        if(m_CurrentElementsOfQueue == 32)
        {
            CCommonException ex(QERROR, QUEUE_FULL, "Circular Buffer Queue is full");
            throw ex;
        }

        for(queueElems = 0; queueElems < MAX_QUEUE_ELEMENTS; queueElems++)
        {
            if(m_QueueStructure[queueElems].inUse == false)
                break;
        }

        boost::shared_array<char> tData(new char[bufferSize]);

        m_QueueStructure[queueElems].data = tData;

        m_QueueStructure[queueElems].inUse  = true;

        m_QueueStructure[queueElems].compressedLength = _compressedLength;

        m_QueueStructure[queueElems].uncompressedLength = _uncompressedLength;

        m_QueueStructure[queueElems].packetType         = _packetType;

        m_CurrentElementsOfQueue++;

        return queueElems;
    }

    Data& GetElement(int index)
    {
        Data& DataElement = m_QueueStructure[index];

        return DataElement;
    }

    void ClearElementIndex(Data& delValue)
    {
        m_CurrentElementsOfQueue--;

        delValue.inUse = false;
    }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:23:30.807

`for(queueElems = 0; queueElems < MAX_QUEUE_ELEMENTS; queueElems++)`循环后`queueElems`的值为 32，但`m_QueueStructure`只有 32 个元素，因此您尝试访问`m_QueueStructure[queueElems].data`第 33 个元素。那个问题。

编辑：尝试使用`m_QueueStructure[queueElems].data.reset(new char[bufferSize]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:20:41.593

解决了这个问题。我做了两个改变。在 wait_and_pop 函数中，我返回的是索引而不是 Data&。当我返回 Data& 时，这解决了分配问题。由于 shared_array.get() 的 memset 发生了另一次崩溃。吸取的教训，永远不要 memset 一个 shared_array 或一个 shared_ptr。

# java - PMD规则冲突：一个方法应该只有一个退出点，并且应该是方法中的最后一个语句

> ID：10513098
> 
> 赞同：5
> 
> 时间：2012-05-09T09:15:11.763
> 
> 标签：java, pmd

有时我发现一些 PMD 规则相互冲突，因此您无法编写满足所有 PMD 规则的代码。

例如，以下两条规则似乎相互排斥：“将对象分配给 null 是一种代码异味。考虑重构。” 和“一个方法应该只有一个退出点，并且应该是方法中的最后一个语句”

以下是我的示例代码：

![在此处输入图像描述](../Images/08d8a3c502a2bdbd625b18d61a2fc9eb.png)

如果我使用 get1()，我将违反前一条规则，如果我使用 get2()，那么我将违反后一条规则。我更喜欢 A 方法应该只有一个退出点，但我不希望 PMD 报告“将对象分配给 null 是一种代码气味”，有人有什么好主意吗？非常感谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T09:17:46.267

在这两种情况下，我都会使用条件运算符：

```
return condition > 5 ? Integer.valueof(123) : null; 
```

不过，就我个人而言，我*不会*试图坚持一个退出点。很多时候，这会降低代码*的*可读性——通常你可以在方法的开头告诉返回值应该是什么（例如，因为它是一个基本情况）......那么为什么不直接返回它呢？教条式地坚持“只有一个出口点”的代码通常会以不必要的嵌套代码结束，这样就更难浏览了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:21:53.773

使用

```
return (condition > 5) ? Integer.valueOf(123) : null; 
```

但我不知道这是否也是“代码气味”...... :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-30T08:01:24.967

只需删除第一种方法（get1）的else。在 Java 中对象默认为 null，不需要这个赋值（result = null）。

# javascript - Javascript - 交换层和分组

> ID：10513120
> 
> 赞同：0
> 
> 时间：2012-05-09T09:16:39.157
> 
> 标签：javascript, jquery, forms, configuration, swap

我正在尝试制作一个“简单”的产品配置器...现在我可以使用下拉菜单。

你可以在这里查看（我做了一个衬衫的例子——但实际上它也应该适用于其他产品）：

[http://jsfiddle.net/obmerk99/9t4f4/15/](http://jsfiddle.net/obmerk99/9t4f4/15/)

如您所见，它适用于下拉菜单，明显的问题是它不是添加功能，而是替换它（对于每个选项组）。

我尝试使用 append() - 你可以看到它在代码中被注释掉了，但在这种情况下，它不会删除（并且将永远追加 - 导致 50 个 div ..

我的问题是：

1.  我怎样才能使它也适用于单选按钮和复选框？
2.  如果它来自另一个组，如何添加“选项”，以及当它来自同一组时如何“删除”它？
3.  如何使划分为“选项组”自动工作？

（我知道理论上我可以为每个选项制作一个 div 并为每个选项制作一个函数 - 但配置将有大约 60 个 - 所以我需要在 ONE 函数中有一些可靠的逻辑）

**编辑我：**

我刚刚注意到另一个错误：如果一个人选择了同一级别的所有选项（例如 - 从所有 3 个下拉列表中选择 #3），然后返回到另一个组下拉列表 - 并再次选择同一级别 - 它将不起作用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T01:40:08.433

完整的答案将在这里：

[http://jsfiddle.net/obmerk99/9t4f4/23/](http://jsfiddle.net/obmerk99/9t4f4/23/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T09:31:48.333

使用复选框将是问题的适当解决方案，使用某个类将它们组合在一起

```
<input type="checkbox" class="option" value="9"> 
```

现在您可以编写简单的 jquery 来切换 src 图像

```
$('.option').change(function() {
    if(this.checked){
     $('#prod-image').attr('src', data[value].img);
    }else{
     $('#prod-image').attr('src', "");
    } 
```

# magento - 如何复制 Magento 产品并仅通过一个“保存”操作添加新 SKU

> ID：10513121
> 
> 赞同：4
> 
> 时间：2012-05-09T09:16:43.447
> 
> 标签：magento

我想复制一个产品并在一次保存操作中连续给它一个新的 sku。

我怎样才能做到这一点 ？？

我试过这段代码：

```
$sku = '123456';
$product = Mage::getModel('catalog/product')
   ->loadByAttribute('sku',$sku); 

$newProduct = $product->duplicate();
$newProduct->setStatus(1);
$newProduct->setSku($sku.'-v2');
$newProduct->save(); 
```

但它抛出了这个异常：

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '3569-1' for key 'IDX_STOCK_PRODUCT' 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-02T19:53:24.133

```
$newProduct->save(); 
```

实际上应该是：

```
$newProduct->getResource()->save($newProduct); 
```

# oracle - 将查询结果合并到单行 - Oracle

> ID：10513124
> 
> 赞同：-1
> 
> 时间：2012-05-09T09:16:49.357
> 
> 标签：oracle, plsql, string-aggregation

我可以在 oracle 中这样做吗？我有一些这样的数据：

```
No | Data |
===========
 1 | A    |
 1 | B    |
 1 | C    |
 1 | D    | 
```

是否有任何查询可以产生这样的结果，。？

```
No | Data       |
=================
 1 | A, B, C, D | 
```

非常感谢 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:21:30.803

也许[此页面](http://www.dba-oracle.com/t_converting_rows_columns.htm)显示您正在寻找的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-18T17:37:24.133

[SQL小提琴](http://sqlfiddle.com/#!4/682458/1)

**Oracle 11g R2 模式设置**：

```
CREATE TABLE TEST ( ID, DATA ) AS
          SELECT 1, 'A' FROM DUAL
UNION ALL SELECT 1, 'B' FROM DUAL
UNION ALL SELECT 1, 'C' FROM DUAL
UNION ALL SELECT 1, 'D' FROM DUAL
UNION ALL SELECT 2, 'E' FROM DUAL
UNION ALL SELECT 2, 'F' FROM DUAL; 
```

**查询 1**：

```
SELECT ID,
       LISTAGG( DATA, ',' ) WITHIN GROUP ( ORDER BY DATA ) AS AGGREGATED_DATA
FROM   TEST
GROUP BY ID 
```

**[结果](http://sqlfiddle.com/#!4/682458/1/0)**：

```
| ID | AGGREGATED_DATA |
|----|-----------------|
|  1 |         A,B,C,D |
|  2 |             E,F | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:43:31.050

在 Oracle 中，我们可以使用`wm_concat`函数。以下是上述示例的查询：

```
SELECT no, wm_concat(data) from table group by no 
```

参考：[wm_concat](https://stackoverflow.com/questions/1120706/is-there-an-oracle-sql-query-that-aggregates-multiple-rows-into-one-row)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-18T17:30:01.877

```
select 
   no,
   rtrim (xmlagg (xmlelement (d, data|| ',')).extract ('//text()'), ',') data
from 
   table_name
group by 
   no
; 
```

# asp.net - 添加一个类以及皮肤中指定的类

> ID：10513125
> 
> 赞同：3
> 
> 时间：2012-05-09T09:16:53.277
> 
> 标签：asp.net, css, themes, skin

我们正在使用主题来设置我们的控件样式。

对于文本框，我们在皮肤中添加了这样的内容

```
<asp:TextBox runat="server" CssClass="txt edit_txt" /> 
```

现在在某些情况下，我们希望在这 2 个类中添加另一个类。

当我们在 aspx 中添加这样的文本框时

```
<asp:TextBox ID="txtnameE" runat="server" MaxLength="30" CssClass="RequiredCheckClass"></asp:TextBox> 
```

在渲染时，它没有采用“RequiredCheckClass”类，而只采用了皮肤中指定的其他 2 个类。

那么有没有办法从aspx页面添加一个类以及皮肤中指定的类。

PS：现在我将使用@Curt 建议或将使用 EnableTheming=false 并将所有必需的类添加到此控件。如果有人除了这些之外还有其他想法，请更新....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:31:33.930

一种选择是在皮肤文件中创建另一个 TextBox 控件，例如：

```
<asp:TextBox SkinID="Required" runat="server" CssClass="txt edit_txt RequiredCheckClass" /> 
```

然后在您的标记文件中使用以下内容：

```
<asp:TextBox ID="txtnameE" runat="server" MaxLength="30" SkinID="Required"></asp:TextBox> 
```

除此之外我不确定。我一直避免使用 ASP.NET 主题，因为我发现它们有多么严格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T23:37:55.960

您可以使用“类”属性 - 就像在常规 HTML 元素中使用它一样。这就是我正在使用的旁路。

```
<asp:TextBox SkinID="Required" runat="server" class="RequiredCheckClass" CssClass="txt edit_txt" /> 
```

# xcode - 没有找到合适的申请记录。验证应用程序时

> ID：10513129
> 
> 赞同：11
> 
> 时间：2012-05-09T09:17:03.527
> 
> 标签：xcode

好的，我将我的应用程序注册到 Itunes connect。我确保正确的应用程序名称和捆绑包可用。

然后我归档我的项目，然后我想验证。

然后我收到了这条消息。

到底错在哪里？

苹果是否无法找出具有相同捆绑 ID 和相同应用程序名称的任何应用程序？哪一个不匹配？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-09T10:58:52.737

这是一个常见的错误。只需确保将应用的状态设置为**等待上传**

来自 Apple 的文档：

> 故障排除：如果 Xcode 没有为您的应用程序找到 iTunes Connect 应用程序记录，则会出现“未找到合适的应用程序记录”对话框。当应用程序记录状态至少不是等待上传时，也会出现此对话框。

当您注册您的应用程序时，它首先变为“准备上传”。您必须通过单击 iTunes Connect 中的右下角按钮手动将其置于“等待上传”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T05:57:25.647

我将添加另一个答案，因为我刚刚花了最后 30 分钟试图弄清楚为什么我无法让验证工作......

如果您有多个 iTunes Connect 帐户，请确保您使用在 iTunesConnect 中创建应用程序时使用的正确帐户登录。

这听起来很简单，但组织者会记住您上次验证部署时使用的凭据。我发布的最后一个应用程序是几个月前在我的承包商证书下发布的。我的新应用程序使用我自己的凭据，但我试图使用保存的承包商凭据进行身份验证。啊。

# objective-c - uiscrollview 中的 uiwebview 提示

> ID：10513130
> 
> 赞同：0
> 
> 时间：2012-05-09T09:17:11.560
> 
> 标签：objective-c, xcode, cocoa, ios5

我有一个`UIScrollview`允许分页，还有一个`UIWebview`关于里面的详细视图。我知道根据 Apples Class Reference，您不应该这样做，但我没有看到其他选择。

为了做出更好的响应和体验，我禁用了`UIWebview`, 的滚动：

```
[[[webView subviews] lastObject] setScrollEnabled:FALSE]; 
```

但现在我正在寻找一种解决方案，使 webview 的大小合适，具体取决于内容。有没有一种简单的方法可以做到这一点，其中 webview 的宽度保持不变，但是当需要显示完整文章时高度会（自动）增长？这将消除滚动问题，因为它位于滚动视图，他将负责此场景中的所有滚动。

那有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:23:30.997

从 UIWebView 的文档中，它指出：

> 重要提示：您不应该在 UIScrollView 对象中嵌入 UIWebView 或 UITableView 对象。如果这样做，可能会导致意外行为，因为两个对象的触摸事件可能会混淆并错误处理。

更合适的方法是将您的 UIWebView 添加到 UIViewController 中，并在其下方添加一个 UIScrollView（或 UITableView）。我会意识到您将为滚动视图留下的空间量，特别是如果您正在处理 iPhone。

希望这是朝着正确方向的推动。

**更新：**

在研究了这个（我确信会有办法）之后，似乎我设法想出的最好方法是将你的 UIWebView 添加到 UITableView 的标题视图中。

```
 //create webview
    _webView = [[UIWebView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 280.0)];

    //load request and scale content to fit
    [_webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.stackoverflow.com/"]]];
    [_webView setScalesPageToFit:YES];

    //add web view to table header view
    [[self tableView] setTableHeaderView:_webview]; 
```

这会在单元格显示在下面之前将 UIWebView 添加到表格视图的标题中。请注意，表格标题视图（以及页脚视图）与节标题（和页脚）不同，因此如果您使用 UITableViewStylePlain，您仍然可以使用这两个视图。

确保衰减 webview 的框架以允许下面的任何单元格可见，否则用户将无法滚动 tableview，因为任何触摸都将被 webview 拦截。

这仍然违反 UIWebView 文档（如上所述），但实际上，只要 webview 不覆盖视图的整个可滚动区域，此实现实际上就可以正常工作。

这是我制作的测试应用程序的屏幕截图：![在此处输入图像描述](../Images/e57104e3898624dd1ab346f59df1a54b.png)

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:37:18.663

有更好的方法来做到这一点。

从 iOS 5.0 开始，苹果公开了 UIWebView 中的 UIScrollView。所以要根据内容调整 webview 的大小，这就是你要做的。

1.  使 UIWebView 的父级成为该 UIWebView 的委托。
2.  实现 webViewDidFinishLoad: 并在该函数中执行此操作。

    CGSize sz = [webView.scrollView contentSize]; CGRect 矩形 = webView.frame; rect.size.height = sz.height; webView.frame = 矩形；

即使有多个加载开始和结束，也没关系，因为最终我们将调整 web 视图的大小以适应内容。

如果您不希望用户看到动态调整大小，您可以将 webview 的 alpha 设置为 0，当所有内容加载并完成调整大小时，您可以使用动画将其转换为 alpha 1。

# javascript - 动态创建单选按钮和标签

> ID：10513131
> 
> 赞同：1
> 
> 时间：2012-05-09T09:17:15.723
> 
> 标签：javascript, jquery, html, ajax

好的，我想要实现的是它为我从网络服务返回的每条记录自动创建它。

```
<label for="ZAALID_1">Zaal 1</label>
                    <input id="ZAALID_1" type="radio" name="RESERVATIE.ZAALID" value="1" MSGCHECKED="~IF(CHKPROP(@RESERVATIE.ZAALID,'1'),CHECKED,)~" /> 
```

我用 ajax 调用来调用这个 web 服务。这个电话没有任何问题。我通过打印值来测试它。

```
$.ajax({
            url: "~SYSTEM.URL~~CAMPAIGN.URL~/SelligentMobile/Webservice/WebService.asmx/getReservaties",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: "{'DATUM_BEGIN':'2012-05-09 10:10:36','DATUM_EINDE':'2012-05-09 12:10:45'}",
            success: function (response) {       
            var zalen = response.d;
              if (zalen.length > 0) {   
                       $.each(zalen, function (index, zaal) {
                    createRadioElement(zaal.zaalId);
                    createLabel(zaal.zaalNaam,zaal.zaalId);
                });
            } 
            }        
        }); 
```

所以我认为 CreateRadioElement 和 createLabel 有错误。这是这两个功能。

```
function createRadioElement( id ) {
      var radioInput;
        try {
                var radioHtml = '<input id="ZAALID_' + id +  '" type="radio" name="RESERVATION.ZAALID" value="' + id + '" MSGCHECKED="~IF(CHKPROP(@RESERVATIE.ZAALID,' + 1 + '),CHECKED,)~ ';
                radioHtml += '/>';
            radioInput = document.createElement(radioHtml);
            } catch( err ) {
                radioInput = document.createElement('input');
                radioInput.setAttribute('type', 'radio');
                radioInput.setAttribute('name', 'RESERVATION.ZAALID');
            }
     return radioInput;
    }
    function createLabel(name,id) {
        var label;  
        var labelHTML = '<label for="ZAALID_' + id + '">'+ name +'</label>';

        label = document.createElement(labelHTML);
        return label;
    } 
```

现在我想做的另一件事是将这些单选按钮放在 id=zaalField 的 div 中，这是该 div 的 HTML

```
<div id=ZaalField data-role="fieldcontain" class="knoppen_boven">
                <LABEL for=zaal>Zalen ter beschikking: </LABEL> 

                    //Here should go the radiobuttons and labels.

            </div> 
```

有人可以帮忙吗？

亲切的问候

**- -编辑 - -**

```
 function getZalen()
    {
        var dateB = $("#DATUM_BEGIN").val();
        var dateE = $("#DATUM_EINDE").val();
        console.log(dateB);
        $.ajax({
            url: "~SYSTEM.URL~~CAMPAIGN.URL~/SelligentMobile/Webservice/WebService.asmx/getReservaties",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: "{'DATUM_BEGIN':'2012-05-09 10:10:36','DATUM_EINDE':'2012-05-09 12:10:45'}",
            success: function (response) {       
            var zalen = response.d;
            alert(JSON.stringify(zalen));
              if (zalen.length > 0) {   
                    $.each(zalen, function (i, entity) {
                    $('ZaalField ').append(
                            $('<label />', { 'for': 'ZAALID_' + entity.zaalId, 'text': entity.zaalNaam }),
                            $('<input />', { 'id': 'ZAALID_' + entity.zaalId, 'type': 'radio', 'name': 'RESERVATION.ZAALID', 'value': entity.zaalId, 'MSGCHECKED': '~IF(CHKPROP(@RESERVATIE.ZAALID,' + 1 + '),CHECKED,)~ ' }), $('<br />'));
                });
            } 
            }        
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:59:21.020

```
 $(document).ready(function () {
            var data = { "d": [{ "__type": "Reservatie", "zaalId": 2, "opmerking": null, "zaalNaam": "Zaal 2" }, { "__type": "Reservatie", "zaalId": 3, "opmerking": null, "zaalNaam": "Zaal 3"}] };

            //            $.ajax({
            //                url: "/SelligentMobile/Webservice/WebService.asmx/getReservaties",
            //                type: "POST", contentType: "application/json; charset=utf-8",
            //                dataType: "json", data: { 'DATUM_BEGIN': '2012-05-09 10:10:36', 'DATUM_EINDE': '2012-05-09 12:10:45' },
            //                success: function (data) {
            if (data.d.length > 0) {
                $.each(data.d, function (i, entity) {
                    $('body').append(
                            $('<label />', { 'for': 'ZAALID_' + entity.zaalId, 'text': entity.zaalNaam }),
                            $('<input />', { 'id': 'ZAALID_' + entity.zaalId, 'type': 'radio', 'name': 'RESERVATION.ZAALID', 'value': entity.zaalId, 'MSGCHECKED': '~IF(CHKPROP(@RESERVATIE.ZAALID,' + 1 + '),CHECKED,)~ ' }), $('<br />'));
                });
            }
            //                }
            //            });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:39:46.597

```
function createLabel(id, name){
    var name = "Zaal 2";
    var label = document.createElement("label");
    label.setAttribute("for","RANDOM"+id);
    label.innerHTML = name;
    return label;
}

var label = createLabel(2, "Zaal 2");
$(document.body).append(label); //add it to the body, or to whatever else you want to add it to. 
```

这段代码对我有用，而您编写的代码则不行。

# wordpress - Wordpress 主题二十如何将评论框放置在已发布评论上方

> ID：10513132
> 
> 赞同：1
> 
> 时间：2012-05-09T09:17:17.860
> 
> 标签：wordpress, comments

大家好，我在 wordpress.org 博客的评论部分遇到了这个问题。问题是当我的博客收到这么多评论（大约 200 多条）时，评论会被推到博客文章的底部，直到它到达页脚附近。每个读者都不想要这个（我也不想要）。

如果有人可以帮助我编辑以将评论框**重新定位**到先前发布的评论的顶部。我只希望评论框*（姓名、电子邮件、网站和评论框）*在发布评论之前首先出现。

我的读者会更容易发表评论，也会鼓励他们发表评论。

我不想实现评论分页，因为我已经尝试过了，并且收到了读者的负面反馈。

我知道要求编辑下面的这些代码太多了（对不起），但我本质上不是程序员:(但请帮助我。我一直在阅读一些教程，但我无法理解所有这些。

我的错。

希望你能帮我？

```
<?php
/**
 * The template for displaying Comments.
 *
 * The area of the page that contains both current comments
 * and the comment form.  The actual display of comments is
 * handled by a callback to twentyten_comment which is
 * located in the functions.php file.
 *
 * @package WordPress
 * @subpackage Twenty_Ten
 * @since Twenty Ten 1.0
 */
?>

            <div id="comments">
<?php if ( post_password_required() ) : ?>
                <p class="nopassword"><?php _e( 'This post is password protected. Enter the password to view any comments.', 'twentyten' ); ?></p>
            </div><!-- #comments -->
<?php
        /* Stop the rest of comments.php from being processed,
         * but don't kill the script entirely -- we still have
         * to fully load the template.
         */
        return;
    endif;
?>

<?php
    // You can start editing here -- including this comment!
?>

<?php if ( have_comments() ) : ?>
            <h3 id="comments-title"><?php
            printf( _n( 'One Response to %2$s', '%1$s Responses to %2$s', get_comments_number(), 'twentyten' ),
            number_format_i18n( get_comments_number() ), '<em>' . get_the_title() . '</em>' );
            ?></h3>

<?php if ( get_comment_pages_count() > 1 && get_option( 'page_comments' ) ) : // Are there comments to navigate through? ?>
            <div class="navigation">
                <div class="nav-previous"><?php previous_comments_link( __( '<span class="meta-nav">&larr;</span> Older Comments', 'twentyten' ) ); ?></div>
                <div class="nav-next"><?php next_comments_link( __( 'Newer Comments <span class="meta-nav">&rarr;</span>', 'twentyten' ) ); ?></div>
            </div> <!-- .navigation -->
<?php endif; // check for comment navigation ?>

            <ol class="commentlist">
                <?php
                    /* Loop through and list the comments. Tell wp_list_comments()
                     * to use twentyten_comment() to format the comments.
                     * If you want to overload this in a child theme then you can
                     * define twentyten_comment() and that will be used instead.
                     * See twentyten_comment() in twentyten/functions.php for more.
                     */
                    wp_list_comments( array( 'callback' => 'twentyten_comment' ) );
                ?>
            </ol>

<?php if ( get_comment_pages_count() > 1 && get_option( 'page_comments' ) ) : // Are there comments to navigate through? ?>
            <div class="navigation">
                <div class="nav-previous"><?php previous_comments_link( __( '<span class="meta-nav">&larr;</span> Older Comments', 'twentyten' ) ); ?></div>
                <div class="nav-next"><?php next_comments_link( __( 'Newer Comments <span class="meta-nav">&rarr;</span>', 'twentyten' ) ); ?></div>
            </div><!-- .navigation -->
<?php endif; // check for comment navigation ?>

<?php else : // or, if we don't have comments:

    /* If there are no comments and comments are closed,
     * let's leave a little note, shall we?
     */
    if ( ! comments_open() ) :
?>
    <p class="nocomments"><?php _e( '', 'twentyten' ); ?></p>
<?php endif; // end ! comments_open() ?>

<?php endif; // end have_comments() ?>

<?php comment_form(); ?>

</div><!-- #comments --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:31:18.737

您正在寻找的功能`<?php comment_form(); ?>`也是检查comments.php 模板，您可以从一个中心位置编辑所有帖子的呈现方式。

# java - JTree 右键单击 行为，就像在任何文件浏览器中一样

> ID：10513136
> 
> 赞同：5
> 
> 时间：2012-05-09T09:17:29.143
> 
> 标签：java, swing, jtree, jpopupmenu

我正在尝试实现一个 JTree 来表示一个数据库！Root 是数据库，它可以有几个关系。每个关系都可以具有属性和功能依赖关系。每个节点（数据库、关系、属性和 fd）都有不同的右键菜单。第一步是以标准方式实现弹出菜单（首先左键单击节点，然后右键单击以显示弹出菜单）。

现在我想将其更改为文件浏览器的标准行为。右键单击选择节点并显示正确的弹出菜单。

目前我可以右键单击并显示一个弹出菜单，但菜单不正确。它是上一个选定节点的菜单。

这是树的示例图片：

![在此处输入图像描述](../Images/0d97cfaea067a965795902154810444b.png)

这是我的课：

```
public class ShowPopupMouseListener extends MouseAdapter {
  // Refernece: http://goo.gl/plojB
  private JTree tree;
  private JPopupMenu dbPopUpMenu;
  private JPopupMenu relPopUpMenu;
  private JPopupMenu attrPopUpMenu;
  private JPopupMenu fdPopUpMenu;
  private AttrPopupFactory attrPopupFactory;

  public ShowPopupMouseListener(JTree jTree) {
    this.tree = jTree;
    DbPopupFactory dbPopupFactory = new DbPopupFactory(tree);
    dbPopUpMenu = dbPopupFactory.getDbPopupMenu();

    RelPopupFactory relPopupFactory = new RelPopupFactory(tree);
    relPopUpMenu = relPopupFactory.getRelPopupMenu();

    attrPopupFactory = new AttrPopupFactory(tree);
    attrPopUpMenu = attrPopupFactory.getAttrPopupMenu();

    FdPopupFactory fdPopupFactory = new FdPopupFactory(tree);
    fdPopUpMenu = fdPopupFactory.getFdPopupMenu();
  }

  public void mousePressed(MouseEvent e) {
    showMenuIfPopupTrigger(e);
  }

  public void mouseClicked(MouseEvent e) {
    showMenuIfPopupTrigger(e);
  }

  public void mouseReleased(MouseEvent e) {
    showMenuIfPopupTrigger(e);
  }

  private void showMenuIfPopupTrigger(final MouseEvent e) {

    if (e.isPopupTrigger()) {
      setSelectedItemsOnPopupTrigger(e);

      if (tree.getLastSelectedPathComponent() instanceof DatabaseNode) {
        addRightClickPopUpMenu(tree, dbPopUpMenu);
      } else if (tree.getLastSelectedPathComponent() instanceof RelationNode) {
        addRightClickPopUpMenu(tree, relPopUpMenu);
      } else if (tree.getLastSelectedPathComponent() instanceof AttributeNode) {
        attrPopupFactory.updateKeyCheckboxes();
        addRightClickPopUpMenu(tree, attrPopUpMenu);
      } else if (tree.getLastSelectedPathComponent() instanceof FunctionalDependencyNode) {
        addRightClickPopUpMenu(tree, fdPopUpMenu);
      }
    }
  }

  private void addRightClickPopUpMenu(Component component,
      final JPopupMenu popUpMenu) {
    component.addMouseListener(new MouseAdapter() {
      public void mousePressed(MouseEvent e) {
        if (e.isPopupTrigger()) {
          showPopUpMenu(e);
        }
      }

      public void mouseReleased(MouseEvent e) {
        if (e.isPopupTrigger()) {
          showPopUpMenu(e);
        }
      }

      private void showPopUpMenu(MouseEvent e) {
        popUpMenu.show(e.getComponent(), e.getX(), e.getY());
      }
    });
  }

  private void setSelectedItemsOnPopupTrigger(MouseEvent e) {
    TreePath p = tree.getPathForLocation(e.getX(), e.getY());
    if (!tree.getSelectionModel().isPathSelected(p)) {
      tree.getSelectionModel().setSelectionPath(p);
    }
  }

} 
```

在我的树中，我通过以下方式对其进行初始化：

```
UIManager.put("PopupMenu.consumeEventOnClose", Boolean.FALSE);
tree.getSelectionModel().setSelectionMode(TreeSelectionModel.DISCONTIGUOUS_TREE_SELECTION);
tree.addMouseListener(new ShowPopupMouseListener(tree)); 
```

有什么建议为什么这不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T03:22:15.930

你应该尽量保持简单，以下是你真正需要的：

```
 class RightMouseListener implements MouseListener {

    @Override
    public void mouseClicked(MouseEvent e) {

        if (SwingUtilities.isRightMouseButton(e)) {

            int row = tree.getClosestRowForLocation(e.getX(), e.getY());
            tree.setSelectionRow(row);
            popupMenu.show(e.getComponent(), e.getX(), e.getY());
        }
    }

    ...

    //other overrides

    ...
 }; 
```

这是实现您要求的功能所需的最低限度，您显然可以根据需要添加更多自定义功能。

# javascript - 谷歌地图不渲染

> ID：10513138
> 
> 赞同：1
> 
> 时间：2012-05-09T09:17:36.580
> 
> 标签：javascript, google-maps

我试图使用fancybox以模式显示带有谷歌地图的位置的地图，但它向谷歌地图网络服务发出所有请求，但不呈现地图。这是我的代码

```
function show_map(options) {
        var html = '<div id="map-canvas" style="width:100%; height=100%"></div>';
        $.fancybox({
            'width':550,
            'height':450,
            'content':html,
            'modal' : false,
            'transitionIn' : 'none',
            'transitionOut': 'none',
            'speedIn' : 300,
            'speedOut' : 300,
            'autoScale' : false,
            'scrolling' : 'no',
            'centerOnScroll':true,
            'onComplete':function() 
            {
              var myOptions = {
              center: new google.maps.LatLng(options.lat,options.lng),
              zoom: 8,
              mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);
            }
        })
    } 
```

当我使用 chrome 的 dom 检查器检查模式时，我看到了生成的 html，但地图没有显示。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:37:57.017

您似乎没有将`map-canvas`元素添加到 dom。所以 GoogleMap API 找不到它。尝试以下操作：

```
var mapCanvas = document.createElement('div');
mapCanvas.setAttribute('id','map-canvas');
mapCanvas.setAttribute('style','width:100%; height=100%');

document.getElementById('divParentContainer').appendChild(mapCanvas); 
```

将 替换为`divParentContainer`充当 div 父级的容器的 id。

# c - 如何从原始套接字获取 IP src 地址

> ID：10513140
> 
> 赞同：-1
> 
> 时间：2012-05-09T09:17:39.307
> 
> 标签：c, raw-sockets

我想通过原始套接字发送 TCP 数据包，然后我被 tcp 标头的校验和字段卡住了。由于我不知道如何计算原始套接字使用的实际 IP 地址，因此似乎不可能构造 TCP 伪标头以进行校验和计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:43:50.177

你知道IP地址。

因为：在通过此套接字发送任何数据之前，您应该`bind()`这样做，为此您需要指定您要查找的 IP 地址。

* * *

**更新：**

Binding to`INADDR_ANY`绑定到任何本地接口。要获取有关所有本地接口的信息（包括每个接口的 IP 地址），您可以使用`getifaddrs()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:37:48.927

如果有帮助，请查看以下代码。我用这段代码制作了我自己的 send_raw_tcp() 函数，所以我知道它可以工作。

```
//---cat rawtcp.c---
// Run as root or SUID 0, just datagram no data/payload
#include <unistd.h>mm
#include <netinet/tcp.h>
// Packet length
#define PCKT_LEN 8192

// May create separate header file (.h) for all
// headers' structures
// IP header's structure
struct ipheader {
 unsigned char      iph_ihl:5, /* Little-endian */
                    iph_ver:4;
 unsigned char      iph_tos;
 unsigned short int iph_len;
 unsigned short int iph_ident;
 unsigned char      iph_flags;
 unsigned short int iph_offset;
 unsigned char      iph_ttl;
 unsigned char      iph_protocol;
 unsigned short int iph_chksum;
 unsigned int       iph_sourceip;
 unsigned int       iph_destip;
};

/* Structure of a TCP header */
struct tcpheader {
 unsigned short int tcph_srcport;
 unsigned short int tcph_destport;
 unsigned int       tcph_seqnum;
 unsigned int       tcph_acknum;
 unsigned char      tcph_reserved:4, tcph_offset:4;
 // unsigned char tcph_flags;
  unsigned int
       tcp_res1:4,       /*little-endian*/
       tcph_hlen:4,      /*length of tcp header in 32-bit words*/
       tcph_fin:1,       /*Finish flag "fin"*/
       tcph_syn:1,       /*Synchronize sequence numbers to start a connection*/
       tcph_rst:1,       /*Reset flag */
       tcph_psh:1,       /*Push, sends data to the application*/
       tcph_ack:1,       /*acknowledge*/
       tcph_urg:1,       /*urgent pointer*/
       tcph_res2:2;
 unsigned short int tcph_win;
 unsigned short int tcph_chksum;
 unsigned short int tcph_urgptr;
};

// Simple checksum function, may use others such as Cyclic Redundancy Check, CRC
unsigned short csum(unsigned short *buf, int len)
{
        unsigned long sum;
        for(sum=0; len>0; len--)
                sum += *buf++;
        sum = (sum >> 16) + (sum &0xffff);
        sum += (sum >> 16);
        return (unsigned short)(~sum);
}

int main(int argc, char *argv[])
{
int sd;
// No data, just datagram
char buffer[PCKT_LEN];
// The size of the headers
struct ipheader *ip = (struct ipheader *) buffer;
struct tcpheader *tcp = (struct tcpheader *) (buffer + sizeof(struct ipheader));
struct sockaddr_in sin, din;
int one = 1;
const int *val = &one;

memset(buffer, 0, PCKT_LEN);

if(argc != 5)
{
printf("- Invalid parameters!!!\n");
printf("- Usage: %s <source hostname/IP> <source port> <target hostname/IP> <target port>\n", argv[0]);
exit(-1);
}

sd = socket(PF_INET, SOCK_RAW, IPPROTO_TCP);
if(sd < 0)
{
   perror("socket() error");
   exit(-1);
}
else
printf("socket()-SOCK_RAW and tcp protocol is OK.\n");

// The source is redundant, may be used later if needed
// Address family
sin.sin_family = AF_INET;
din.sin_family = AF_INET;
// Source port, can be any, modify as needed
sin.sin_port = htons(atoi(argv[2]));
din.sin_port = htons(atoi(argv[4]));
// Source IP, can be any, modify as needed
sin.sin_addr.s_addr = inet_addr(argv[1]);
din.sin_addr.s_addr = inet_addr(argv[3]);
// IP structure
ip->iph_ihl = 5;
ip->iph_ver = 4;
ip->iph_tos = 16;
ip->iph_len = sizeof(struct ipheader) + sizeof(struct tcpheader);
ip->iph_ident = htons(54321);
ip->iph_offset = 0;
ip->iph_ttl = 64;
ip->iph_protocol = 6; // TCP
ip->iph_chksum = 0; // Done by kernel

// Source IP, modify as needed, spoofed, we accept through command line argument
ip->iph_sourceip = inet_addr(argv[1]);
// Destination IP, modify as needed, but here we accept through command line argument
ip->iph_destip = inet_addr(argv[3]);

// The TCP structure. The source port, spoofed, we accept through the command line
tcp->tcph_srcport = htons(atoi(argv[2]));
// The destination port, we accept through command line
tcp->tcph_destport = htons(atoi(argv[4]));
tcp->tcph_seqnum = htonl(1);
tcp->tcph_acknum = 0;
tcp->tcph_offset = 5;
tcp->tcph_syn = 1;
tcp->tcph_ack = 0;
tcp->tcph_win = htons(32767);
tcp->tcph_chksum = 0; // Done by kernel
tcp->tcph_urgptr = 0;
// IP checksum calculation
ip->iph_chksum = csum((unsigned short *) buffer, (sizeof(struct ipheader) + sizeof(struct tcpheader)));

// Inform the kernel do not fill up the headers' structure, we fabricated our own
if(setsockopt(sd, IPPROTO_IP, IP_HDRINCL, val, sizeof(one)) < 0)
{
    perror("setsockopt() error");
    exit(-1);
}
else
   printf("setsockopt() is OK\n");

printf("Using:::::Source IP: %s port: %u, Target IP: %s port: %u.\n", argv[1], atoi(argv[2]), argv[3], atoi(argv[4]));

// sendto() loop, send every 2 second for 50 counts
unsigned int count;
for(count = 0; count < 20; count++)
{
if(sendto(sd, buffer, ip->iph_len, 0, (struct sockaddr *)&sin, sizeof(sin)) < 0)
// Verify
{
   perror("sendto() error");
   exit(-1);
}
else
   printf("Count #%u - sendto() is OK\n", count);
sleep(2);
}
close(sd);
return 0;
} 
```

# iphone - 通过单击键盘按钮关闭屏幕键盘的事件

> ID：10513141
> 
> 赞同：1
> 
> 时间：2012-05-09T09:17:44.070
> 
> 标签：iphone, ios, xcode, cocoa-touch

我一直在到处寻找......也许我没有使用正确的搜索词，因为我相信这是一个常见问题。

当用户通过单击按钮降低键盘来关闭键盘时，我可以处理一个事件。

![红色标记的按钮](../Images/4a80acc923c9656c840d54b85c92eec4.png)

当 uitextfield 成为第一响应者时，我将视图向上移动，但是当点击此按钮时，我想再次将其向下移动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:37:41.923

尝试使用通知。将其添加到您的`viewDidLoad`：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil]; 
```

然后创建一个名为`keyboardWillHide`：

```
- (void)keyboardWillHide:(NSNotification *)notification {
  //do whatever you need
} 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:26:33.633

查看“管理键盘”部分的第二段：http: [//developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:06:27.760

通过使用 NSNotificationCenter，您可以获得键盘事件。您可以在 viewWillAppear 中注册键盘事件，并且不要忘记在 viewWillDisapper 中取消注册。
我们将在这里使用两个通知：

1.  UIKeyboardDidShowNotification[苹果文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html)
2.  UIKeyboardDidHideNotification[苹果文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html)

    你可以做这样的事情：

    *   (void) viewWillAppear:(BOOL)animated {
        [super viewWillAppear:animated];
        NSLog(@"注册键盘事件");

    // 注册事件
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector (keyboardDidShow:) name: UIKeyboardDidShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector (keyboardDidHide:) name: UIKeyboardDidHideNotification object:nil];

    // 设置内容大小 scrollview.contentSize = CGSizeMake(SCROLLVIEW_CONTENT_WIDTH, SCROLLVIEW_CONTENT_HEIGHT);//例如 (320,460)

    //最初键盘是隐藏的keyboardVisible = NO;//在.h中声明BOOL keyboardVisible; }

-(void) viewWillDisappear:(BOOL)animated {
NSLog (@"注销键盘事件");
[[NSNotificationCenter defaultCenter] removeObserver:self];
}

**-(void)keyboardDidShow: (NSNotification *)notif** {
NSLog(@"键盘可见");
// 如果键盘可见，返回
if (keyboardVisible) {
NSLog(@"键盘已经可见。忽略通知。");
返回;
}

```
// Get the size of the keyboard.
NSDictionary* info = [notif userInfo];
NSValue* aValue = [info objectForKey:UIKeyboardBoundsUserInfoKey];
CGSize keyboardSize = [aValue CGRectValue].size;

// Save the current location so we can restore
// when keyboard is dismissed
offset = scrollview.contentOffset; //in .h declare CGPoint offset and UIScrollView *scrollview.;

// Resize the scroll view to make room for the keyboard
CGRect viewFrame = scrollview.frame;
viewFrame.size.height -= keyboardSize.height;
scrollview.frame = viewFrame;

CGRect textFieldRect = [activeField frame];//in .h UITextField *activeField;
textFieldRect.origin.y += 10;
[scrollview scrollRectToVisible:textFieldRect animated:YES];    

// Keyboard is now visible
keyboardVisible = YES; 
```

}

**-(void) keyboardDidHide: (NSNotification *)notif** {
// 键盘是否已经显示
if (!keyboardVisible) {
NSLog(@"键盘已经隐藏。忽略通知。");
返回;
}

```
// Reset the frame scroll view to its original value  
scrollview.frame = CGRectMake(0, 0, SCROLLVIEW_CONTENT_WIDTH, SCROLLVIEW_CONTENT_HEIGHT);  

// Reset the scrollview to previous location
scrollview.contentOffset = offset;

// Keyboard is no longer visible
keyboardVisible = NO; 
```

}

-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
[textField resignFirstResponder];
返回是；
希望
能帮助你:)

# gwt - 如何在 uibinder 网格中设置指定单元格中的文本

> ID：10513148
> 
> 赞同：0
> 
> 时间：2012-05-09T09:18:07.933
> 
> 标签：gwt, grid, uibinder

```
<g:Grid>
    <g:row>
        <g:customCell>
            <g:HTMLPanel styleName="{style.loginPrompt}">
                <div>
                    <ui:msg description="LoginPrompt">Please <b>Log In</b></ui:msg> 
               </div>                       
            </g:HTMLPanel>  
        </g:customCell>         
    </g:row> 
... 
```

我希望我的单元格文本将在第二个单元格中，就像在 java 中一样：

```
Grid g = new Grid(5, 5);
g.setText(0, 1, "asdf"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:09:36.153

`g:row`如果你想要 5 行和 5 列，我认为你必须在 UiBinder 中使用适当数量的和`g:cell`（或`g:customCell`）来定义它们。没有等价物，`setText`但您可以`setHTML`使用 a `g:cell`（并且`g:customCell`等价于`setWidget`）来做等价物。

```
<g:Grid>
   <g:row>
      <g:customCell><!-- whatever --></g:customCell>
      <g:cell>asdf</g:cell>
<!-- continue here for 5 rows, 5 cells per row --> 
```

# javascript - eval() 和全局范围

> ID：10513149
> 
> 赞同：2
> 
> 时间：2012-05-09T09:18:10.683
> 
> 标签：javascript, eval

我正在调试和升级一些遗留的 PHP 和 JavaScript 代码，我发现了一些我无法摆脱的 eval() 函数。来自桌面编程环境，使用 C/C++ 等编译语言，我从未在 javascript 中使用过 eval() 函数，主要是因为我不知道它的存在。我已经用谷歌搜索了一段时间，从我读过的所有内容中，我了解到 eval() 评估一个字符串，就好像它是合法的 javascript 代码并执行它一样。我已经设法摆脱了用于访问动态属性和解码 JSON 对象的 eval() 函数，但是有一个相当高级（且晦涩）的类定义使用 eval() 我无法击败.

示例代码：

```
 function Ddl(N) {
   this.lyr = document.getElementById(N);
   this.obj = N+"DDL_Lyr";
   eval(this.obj+"=this");
   this.lyr.setAttribute("onchange", this.obj+".onChange();");
 } 
```

这个函数是一个对象构造函数。DDL 对象在网页中用作：

```
 ddl_name = new Ddl('id_of_select');
 ddl_name.onChange = event_function; 
```

据我所知，`eval(this.obj + "=this")`应该与onchange 事件函数相同，`this.obj = this;`但`event_function`不会触发 onchange 事件函数。我一直无法猜测为什么使用萤火虫。如果我使用`this.obj = this`，我可以看到 this.obj 的值从更改`id_of_selectDDL_Lyr`为指向 DDL 对象本身的指针，因此我可以弄清楚为什么 setAttribute 失败，但是使用 eval() 函数 `this.obj`并不能反映代码执行时的更改，它始终保持为“id_of_selectDDL_Lyr”，但是它正在*做某事，*因为如果我将其注释掉，则不会触发 onchange 事件。

我怀疑它可能与本地或全局范围有关，因为我读过 eval() 调用是在不同的范围内执行的，但我不知道如何检查它，也不知道如何用正常替换 eval() javascript代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:30:20.800

我*认为*这段代码是等价的：

```
function Ddl(N) {
   var self = this;
   this.lyr = document.getElementById(N);
   this.obj = N + "DDL_Lyr";
   window[this.obj] = this;
   this.lyr.onchange = function() {
       self.onChange();
   };
} 
```

这`eval`并不是说`this.obj = this`，它正在创建一个*名为*“N + DDL_Lyr”的新*全局*变量（其中是变量）。*`N`*

 ** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T09:31:18.247

改变

```
this.lyr.setAttribute("onchange", this.obj+".onChange();"); 
```

到

```
this.lyr.onchange = this.obj+".onChange();"; 
```*

# php - 将用户提交的日期放入变量中

> ID：10513152
> 
> 赞同：0
> 
> 时间：2012-05-09T09:18:27.207
> 
> 标签：php

我想从用户那里获取日期并将该日期与另一个日期进行比较。如何将提交的日期存储在变量中？

我试过这段代码： -

```
$month = 2;
$year = 2012;

$saturday = strtotime('First Saturday '.date('F o', mktime(0,0,0, $month, 1, $year)));
echo date('Y/M/d', $saturday); 
```

在`$saturday`我现在计算日期时，我想从用户那里获取另一个日期并将该日期与`$saturday`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:21:56.457

您需要创建一个表单和一个带有提交按钮的输入元素，然后当用户提交该表单时，您将根据表单中指定的方法在 POST 或 GET 变量中获得数据。

# bash - 使用 bash 脚本查找特定行并在该行中复制特定内容

> ID：10513155
> 
> 赞同：0
> 
> 时间：2012-05-09T09:18:35.300
> 
> 标签：bash

我有一个文件 system.mss 文件的一些内容是：

`BEGIN lmb_bram_if_cntlr`
`PARAMETER INSTANCE = dlmb_cntlr_0`
`PARAMETER HW_VER = 3.00.b`
`PARAMETER C_BASEADDR = 0x00000000`
`PARAMETER C_HIGHADDR = 0x0003ffff`
`BUS_INTERFACE SLMB = dlmb_0`
`BUS_INTERFACE BRAM_PORT = calmb_0_BRAM_PORTA`
`END`

`BEGIN lmb_bram_if_cntlr`
`PARAMETER INSTANCE = ilmb_cntlr_0`
`PARAMETER HW_VER = 3.00.b`
`PARAMETER C_BASEADDR = 0x00000000`
`PARAMETER C_HIGHADDR = 0x0003ffff`
`BUS_INTERFACE SLMB = ilmb_0`
`BUS_INTERFACE BRAM_PORT = ilmb_cntlr_0_BRAM_PORT`
`END`

`BEGIN lmb_bram_if_cntlr`
`PARAMETER INSTANCE = dlmb_cntlr_1`
`PARAMETER HW_VER = 3.00.b`
`PARAMETER C_BASEADDR = 0x00000000`
`PARAMETER C_HIGHADDR = 0x0000ffff`
`BUS_INTERFACE SLMB = dlmb_1`
`BUS_INTERFACE BRAM_PORT = calmb_1_BRAM_PORTA`
`END`

`BEGIN lmb_bram_if_cntlr`
`PARAMETER INSTANCE = ilmb_cntlr_1`
`PARAMETER HW_VER = 3.00.b`
`PARAMETER C_BASEADDR = 0x00000000`
`PARAMETER C_HIGHADDR = 0x0000ffff`
`BUS_INTERFACE SLMB = ilmb_1`
`BUS_INTERFACE BRAM_PORT = ilmb_cntlr_1_BRAM_PORT`
`END`

我只想为 'PARAMETER INSTANCE = ilmb_cntlr_n' 复制 'PARAMETER C_HIGHADDR = (value)'

注意：可以有“n”个这样的内容，但我只想复制 ilmb_cntlr 的地址

我怎样才能做到这一点？

一旦地址被复制'例如0x0003ffff，我希望它被复制为0x0003FFB0'

最后两个 ff 被 B0 替换

并且任何其他“f”都被“F”替换，并且地址的其余部分保持不变

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:43:50.730

这是一个 bash 解决方案：

```
while read line ; do
    if [[ $line =~ ^PARAMETER\ INSTANCE\ =\ ilmb_cntlr_[0-9] ]] ; then
        found=1
    fi
    if [[ $line =~ ^PARAMETER\ C_HIGHADDR\ =\  ]] ; then
        value=$line
    fi
    if [[ $line = '' ]] ; then                      # end of block
        if (($found)) ; then                        # we are interested in the block
            value=${value//f/F}                     # capitalize f's
            echo ${value%FF}B0                      # replace last two characters with B0
        fi
        unset found                                 # reset variables so we can check the next block
        unset value
    fi
done 
```

不过，我宁愿使用 Perl 来完成这样的任务。

# php - php：如何知道哪个文件包含一个被调用的 php 函数

> ID：10513156
> 
> 赞同：0
> 
> 时间：2012-05-09T09:18:46.937
> 
> 标签：php

> **可能重复：**
> [如何找出函数的定义位置？](https://stackoverflow.com/questions/2222142/how-to-find-out-where-a-function-is-defined)

在客户的网站上，我有一个 php 代码：

```
return userHasActivePurchase($iId); 
```

该网站充满了包含，需要。我在“userHasActivePurchase”上进行了全文搜索，以找出包含此功能的 php 文件，但没有成功。

我的问题是：**我有一个函数名，我想知道哪些 php 文件包含该函数。**

我试过：

```
print_r(userHasActivePurchase); 
```

没有成功。

请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:22:44.430

根据[这个stackoverflow线程](https://stackoverflow.com/questions/2222142/how-to-find-out-where-a-function-is-defined)：

```
$reflFunc = new ReflectionFunction('function_name');
echo $reflFunc->getFileName() . ':' . $reflFunc->getStartLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:24:42.803

您可以使用 grep 命令或通过任何编辑器在目录函数中的本机搜索在整个代码库中搜索文本“function userHasActivePurchase”。

如果您发现此函数在多个位置定义，您可以通过在所有文件中的函数内添加一条语句来识别它

`echo __FILE__`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T09:23:42.150

获得一个体面的 ide（phpstorm、eclipse pdt），它可以让您遵循代码 - 甚至最坏的情况下，您可以在整个项目中搜索给定的术语。

# iphone - 将 2 个屏幕与 2 个实体合并

> ID：10513160
> 
> 赞同：0
> 
> 时间：2012-05-09T09:18:54.757
> 
> 标签：iphone, objective-c, ios, xcode, core-data

我有 4 个 UITableView，它代表我的 UITabBar 中的 4 个选项卡。所以我有一个独特的自定义 TableViewController，它根据它必须显示的实体（在 CoreData 上）控制每个屏幕。为了从 CoreData 中获取元素，我使用 NSFetchedResultsController。

但我的问题是，出于营销原因，我必须合并 2 个屏幕，这意味着在同一屏幕上显示 2 个实体。所以我必须从 2 个不同的实体中获取元素。我还有一个抽象实体“元素”，它是一个超类，我在 TableViewController 中使用它来抽象地控制每个实体。

什么是最好的解决方案？

*   我是否必须重写我的模型来合并这两个实体（这是一个问题，因为这两个实体有点不同）
*   我可以告诉我的 NSFetchedResultsController 获取 2 个实体吗？如何 ？
*   我可以告诉我的 NSFetchedResultsController 来获取 Element 实体，然后再对这些实体进行谓词吗？如何 ？

先感谢您 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:47:04.667

三者中最好的解决方案是使用正确的谓词获取 Element 实体。NSfetchRequest 只能获取一个实体..

我还会考虑一种不同的方法来满足您的营销需求。您可以只执行两个不同的提取，然后组合结果..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:45:09.223

我终于找到了一个我没有提出的解决方案。

我添加了一个新的抽象实体，它是我想要合并的 2 的超类，但它也是一个“元素”子级。

所以我的 ElementListViewController 仍然显示“元素”，我可以为我的屏幕显示合并的实体。

我现在正在努力将旧模型迁移到新模型。

愿这篇文章有一天对您有所帮助...

# memory-management - MPMoviePlayerViewController 的IOS分配问题

> ID：10513162
> 
> 赞同：0
> 
> 时间：2012-05-09T09:19:00.340
> 
> 标签：memory-management, ios-simulator, instruments, static-memory-allocation

在 viewDidLoad 的 ipad 应用程序中，我在第一个视图中设置了一个视频，以便进行介绍。在分配工具中，我看到在运行视频时分配的内存增长到 120MB，好吧我不在乎，但是在视频完成后，我希望该内存再次变为 0，但坚持到 120MB，我做错了什么？

```
- (void)viewDidLoad{
NSString *url = [[NSBundle mainBundle] 
                 pathForResource:@"sfed" 
                 ofType:@"mp4"];

playerViewController = [[MPMoviePlayerViewController alloc] 
 initWithContentURL:[NSURL fileURLWithPath:url]];

[[NSNotificationCenter defaultCenter] 
 addObserver:self
 selector:@selector(movieFinishedCallback:)
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:[playerViewController moviePlayer]];

[videoview addSubview:playerViewController.view];

MPMoviePlayerController *player = [playerViewController moviePlayer];
player.view.frame = CGRectMake(1024, 748, 0, 0);
[player setControlStyle:MPMovieControlStyleNone];

[player play];
}

- (void) movieFinishedCallback:(NSNotification*) aNotification {
 MPMoviePlayerController *player = [aNotification object];
 [[NSNotificationCenter defaultCenter] 
 removeObserver:self
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:player];
 [player stop];
 [player release];  

[UIView beginAnimations:nil context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationDuration:1];

[videoview setAlpha:0];

[UIView commitAnimations];
[videoview release]; 
```

}

# regex - 连接正则表达式 s+ w+ ... perl

> ID：10513163
> 
> 赞同：0
> 
> 时间：2012-05-09T09:19:01.810
> 
> 标签：regex, perl

我有这样的条目：

```
 XYZABC------------HGTEZCW
    ZERTAE------------RCBCVQE 
```

我只想得到 HGTEZCW 和 RCBCVQE 。我想使用一个通用的正则表达式。

```
$temp=~ s/^\s+//g;     (1)
$temp=~ s/^\w+[-]+//g; (2) 
```

如果我使用 (1) + (2) ，它可以工作。我得到了它的工作原理：`HGTEZCW`，然后`RCBCVQE`......

我想知道是否可以在一行中做到这一点：

```
$temp=~ s/^\s+\w+[-]+//g; (3) 
```

当我使用（3）时，我得到了这个结果：`XYZABC------------HGTEZCW`

我不明白为什么不能在一行中连接 1 + 2。

对不起，我的条目是：

```
 XYZABC------------HGTEZCW
    ZERTAE------------RCBCVQE 
```

此外，正则表达式 1 删除了空间，但是当我使用 regex2 时，它删除了 XYZABC------------ 。但是组合（3）不起作用。我有这个`XYZABC------------HGTEZCW`

@Tim所以每个字符串的开头总是有空格吗？是的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:24:07.573

您的正则表达式 (1) 从字符串的开头删除空格。所以它对您的示例字符串没有任何作用。

Reges (2) 删除字符串开头的所有字母数字加上任何后面的破折号，返回最后一个破折号后面的任何内容。

如果将两者结合起来，正则表达式会失败，因为没有空格`\s+`可以匹配 - 因此整个正则表达式都会失败。

要解决此问题，只需将空格设为可选。此外，您不需要将`-`括号括起来：

```
$temp=~ s/^\s*\w+-+//g; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:19:22.393

这应该可以解决问题。

```
$Str = '
    XYZABC------------HGTEZCW
    ZERTAE------------RCBCVQE
';

@Matches = ($Str =~ m#^.+-(\w+)$#mg);

print join "\n",@Matches ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:12:37.460

如果您只需要每个条目的最后七个字符，则可以执行以下操作：

```
$temp =~ /.{7}$/; 
```

# html - 如何拒绝显示图像、PDF 文件 - 并只允许下载它们？

> ID：10513166
> 
> 赞同：0
> 
> 时间：2012-05-09T09:19:09.733
> 
> 标签：html, file, browser

我在我的 FTP 上上传了一张图片，因为它们非常大（有时大于 10MB），它们的显示需要很多时间，有时根本不显示。

这就是为什么我想拒绝显示这些文件并只允许用户下载它们 - 怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:42:58.520

[这](https://stackoverflow.com/a/1509097/984621)是我一直在寻找的。

进入`.htaccess`

```
<Files *.pdf>
  Header set Content-Disposition attachment
</Files> 
```

# java - 如何使用 Spring 测试具有 @PostConstruct 方法的类的构造函数？

> ID：10513167
> 
> 赞同：24
> 
> 时间：2012-05-09T09:19:10.510
> 
> 标签：java, spring, unit-testing, junit, postconstruct

如果我有一个带有@PostConstruct 方法的类，我如何使用JUnit 和Spring 测试它的构造函数以及它的@PostConstruct 方法？我不能简单地使用 new ClassName(param, param) 因为它没有使用 Spring——@PostConstruct 方法没有被触发。

我在这里遗漏了一些明显的东西吗？

```
public class Connection {
    private String x1;
    private String x2;

    public Connection(String x1, String x2) {
        this.x1 = x1;
        this.x2 = x2;
    }

    @PostConstruct
    public void init() {
        x1 = "arf arf arf";
    }

}

@Test
public void test() {
    Connection c = new Connection("dog", "ruff");
    assertEquals("arf arf arf", c.getX1());
} 
```

我有一些类似的东西（虽然稍微复杂一些），并且@PostConstruct 方法没有受到影响。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-09T11:15:27.160

如果容器管理的唯一部分`Connection`是您的`@PostContruct`方法，只需在测试方法中手动调用它：

```
@Test
public void test() {
  Connection c = new Connection("dog", "ruff");
  c.init();
  assertEquals("arf arf arf", c.getX1());
} 
```

如果还有更多，例如依赖项等，您仍然可以手动注入它们，或者 - 正如 Sridhar 所说 - 使用弹簧测试框架。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-09T09:28:37.010

看看[Spring JUnit Runner](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/testing.html#testcontext-junit4-runner)。

您需要在测试类中注入您的类，以便 spring 构建您的类并调用 post 构造方法。参考宠物诊所的例子。

例如：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:your-test-context-xml.xml")
public class SpringJunitTests {

    @Autowired
    private Connection c;

    @Test
    public void tests() {
        assertEquals("arf arf arf", c.getX1();
    }

    // ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:24:18.897

`@PostConstruct`必须改变对象的状态。因此，在 JUnit 测试用例中，获取 bean 后检查对象的状态。如果与 设置的状态相同`@PostConstruct`，则测试成功。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-09T09:53:39.790

默认情况下，Spring 不会意识到 @PostConstruct 和 @PreDestroy 注释。要启用它，您必须注册“CommonAnnotationBeanPostProcessor”或在 bean 配置文件中指定“”。

`<bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor" />`

或者

`<context:annotation-config />`

# textfield - Install4j：如何在文本字段中使用字符串数组

> ID：10513168
> 
> 赞同：0
> 
> 时间：2012-05-09T09:19:11.477
> 
> 标签：textfield, arrays, install4j

在我的安装程序中有一个带有**文本字段的屏幕，它会****在循环中多次**出现以配置不同的服务实例。为了清洁，我想**将这些值保存在字符串数组**中。

**如何将数组的特定索引绑定到 texfield？我在文本字段的“变量名”字段中写入了什么？**

我已经尝试了所有可能的组合，例如`${installer:vars[0]}`，但没有一个有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:47:59.510

这种绑定是不可能直接进行的。您必须将文本字段绑定到一个临时变量，例如`tempVar`，在屏幕的验证表达式中，您必须将其推送到一个列表变量中，例如`myList`使用以下代码：

```
List values = (List)context.getVariable("myList");
if (values == null) {
    values = new ArrayList<String>();
    context.setVariable("myList", values);
}
values.add(context.getVariable("tempVar")); 
```

# codeigniter - 从 CodeIgniter 中的助手获取数据

> ID：10513172
> 
> 赞同：1
> 
> 时间：2012-05-09T09:19:49.873
> 
> 标签：codeigniter

我遇到了 CodeIgniter 的问题。我想从我在视图中调用的助手获取（恢复）数据。我会用代码解释

这是我的看法：

```
// CALL THE FUNCTION FROM THE HELPER
    <?php recup_email(); ?>

// DATA RECOUP FROM THE HELPER
    <?php foreach($em as $e): ?>
       <?php echo $e->email_membre; ?>
    <?php endforeach; ?> 
```

如您所见，我调用了该函数，并且在我想使用我已经收回的数据之后。

这是我的帮手：

```
function recup_email()
{
    $CI =& get_instance();
    $CI->load->model('unite_model');

    $data['em'] = $CI->unite_model->email_membre_model();        
} 
```

但我不知道如何在不使用的情况下恢复数据

```
 $layout_network['contenu'] = $this->load->view('list_vote_friend', $data, TRUE);
    $this->load->view('layout_network',$layout_network); 
```

因为视图已经加载。

我希望你能理解，对不起我的英语不好。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:17:49.360

在您给出的示例中，为什么不直接从辅助函数返回数据？

```
function recup_email()
{
    $CI =& get_instance();
    $CI->load->model('unite_model');

    $membres = $CI->unite_model->email_membre_model();  
    return $membres;      
} 
```

这就是你的看法；

```
// CALL THE FUNCTION FROM THE HELPER
    <?php $em = recup_email(); ?>

// DATA RECOUP FROM THE HELPER
    <?php foreach($em as $e): ?>
       <?php echo $e->email_membre; ?>
    <?php endforeach; ?> 
```

# extjs4 - 使用 ExtJS4 的父组件查询？

> ID：10513173
> 
> 赞同：0
> 
> 时间：2012-05-09T09:19:50.657
> 
> 标签：extjs4, extjs4.1

有没有办法查询“向上”？我在一个组件中，并希望使用 control() 为其父事件注册侦听器。这需要一个 Query 让我成为我的主视图的父级。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T09:37:21.203

在 ExtJS4 中，您可以使用来自 Ext 元素的 'up()'。

参数是您希望找到的父元素的字符串，例如：

```
var parentEl = Ext.get('childID').up('div.parentClass'); 
```

如果您提供有关组件/元素结构的一些详细信息，我可以给出一个适合的具体示例。

编辑：显示从组件“向上”

```
var myComponent = // however you've got it

var theParentEl = myComponent.getEl().up('div.parentClass'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:03:32.423

通常`up('PARENTCLASS')`对于你想要做的事情就足够了。这是我在整个代码中所做的，因此元素会为它们所在的表单生成事件：

```
items: [
...
   { xtype: 'checkbox', listeners: {
      change: function() { this.up('window').fireEvent('checkboxchanged'); }
   }}
...
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T17:50:50.187

据我了解，您希望专门从子组件的控制器控制功能中侦听组件的父级调度的事件。

没有像“parent < component”这样的查询选择器，您可以将其放入子控制器的控制函数中以侦听父事件。

通常我只会将父视图添加到孩子的控制器中，然后您可以收听它的事件。但我假设你没有这样做，因为你试图委托给不同的控制器或其他东西。

每当父事件发生时，您都可以在子组件中触发事件。在父控制器内部，您可以这样做：

```
var child = parent.down('child');
child.fireEvent('myOwnEventName', arg1, arg2, arg3, etc); 
```

然后，您将在子控制器的控制函数中为“myOwnEventName”添加一个处理程序，以运行您想要的逻辑。

如果父级没有控制器，那么您应该将父组件作为视图添加到子级控制器中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T19:00:10.577

Sencha 帮助说“可以测试来自候选组件的成员表达式。如果表达式返回真实值，则候选组件将包含在查询中：”在[http://docs.sencha.com/ext-js/4 -0/#!/api/Ext.ComponentQuery](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.ComponentQuery)帮助。

我花了一段时间才意识到我可以在我的控制器中执行以下操作：

```
this.control({
  'window{down("testcomp")}[down]': { beforedestroy: this.doNotCloseIfUnsaved }
}); 
```

使用 {} 操作，我们可以调用任意代码。 **从效率的角度来看真的很糟糕**，但它完成了工作。我必须添加 [down] 因为它从右到左运行组件查询，所以我们必须确保 down() 在我们尝试运行它之前存在（在每个组件上）。因此，我能够将事件附加到包含我的组件的任何窗口。

当然，也可以使用其他函数，比如 child() 而不是 down() 如果你想确保它是直接的孩子而不是下面的任何地方。

# coffeescript - Jekyll 转义 CoffeeScript 转换器的输出（使用 Octopress）

> ID：10513176
> 
> 赞同：0
> 
> 时间：2012-05-09T09:20:05.610
> 
> 标签：coffeescript, jekyll

我正在运行一个基于[Jekyll的](https://github.com/mojombo/jekyll)[Octopress](http://octopress.org/)博客。现在我想添加一些我喜欢用 CoffeeScript 编写的 Javascript。

我按照这个[Gist](https://gist.github.com/959938)创建了一个将 CoffeeScript 编译为 Javascript 的简单转换器：

```
module Jekyll
  require 'coffee-script'

  class CoffeeScriptConverter < Converter
    safe true
    priority :low

    def matches(ext)
      ext =~ /coffee/i
    end

    def output_ext(ext)
      '.js'
    end

    def convert(content)
      begin
        CoffeeScript.compile content
      rescue StandardError => e
        puts "CoffeeScript error: #{e.message}"
      end
    end
  end
end 
```

问题是生成的 Javascript 文件中的所有引号都被转义了（单引号 by`&#8216;`和双引号 by `&#8220;`）

当我在`convert`方法中输出生成的 Javascript 代码时，它看起来很好（引号没有转义）。我google了很多，但似乎没有人有这个问题。这里可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:15:26.393

结果是 Octopress 默认通过 RubyPants 运行内容[（](https://github.com/jmcnevin/rubypants)请参阅参考资料`plugins/octopress_filters.rb`）。禁用 RubyPants 就成功了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:23:41.567

由于 RubyPants 忽略了 HTML 注释中的内容，我们可以通过包围 HTML 注释中的输出来动态禁用 RubyPants 过滤。这也消除了修改 OctoPress 原始代码的需要。

我已经在[这个要点](https://gist.github.com/2925325)中做到了。

# java - 编写 Java 比较器

> ID：10513179
> 
> 赞同：3
> 
> 时间：2012-05-09T09:20:23.240
> 
> 标签：java, vector, sorting, comparator

我创建了一个 Vector 对象来将对象中的数据存储`Table`为`Vector<Table>`. `Vector<Table>`包含如下组件。

```
[Vector<Record> records, String tableName, String keyColumnName, int recordCount, int columnCount] 
```

我需要按照`tableName`我自己的顺序在上面的 Vector 中排序并返回`Vector<Table>`以`sorted tableNames`用于其他进程。

我写了如下方法。

```
private Vector<Table> orderTables(Vector<Table> loadTables) {

    List<String> tableNames = new ArrayList<String>();

    for (Table table : loadTables) {

        String tblName = table.getTableName();
        tableNames.add(tblName);

    }
    Collections.sort(tableNames, new MyComparable());

    return null;
} 
```

但我不知道如何写`Comparator`这个。我自己的排序顺序存储在`.properties`文件中。我可以阅读并获得价值。但我不知道如何比较它。

我怎么能做到？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T09:29:35.310

# 澄清前

您需要为委托给比较器`Comparator`的`Table`对象编写一个`tableName`：

```
new Comparator<Table>() {
    @Override public int compare(Table one, Table two) {
        return one.getTableName().compareTo(two.getTableName());
    }
} 
```

**请注意，**这将认为`Table`具有相同名称的 s 是相等的。`HashMap`如果您将这些表放在 a或中，这可能会搞砸`HashSet`。为避免这种情况，您可以检测这种情况并`one.hashCode() - two.hashCode()`在表名相同时返回。

[Guava`ComparisonChain`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ComparisonChain.html)是编写此类多阶段比较的便捷方式：

```
new Comparator<Table>() {
    @Override public int compare(Table one, Table two) {
        return ComparisonChain.start()
                 .compare(one.getTableName(), two.getTableName())
                 .compare(one.hashCode(), two.hashCode())
                 .result();
    }
} 
```

# 澄清后

好的，问题是强加一个预定义的排序顺序，而不是`Table`按名称对 s 进行排序。在这种情况下，您需要`Comparator`知道`.properties`文件中定义的顺序。

实现此目的的一种方法是初始化表名到排序顺序索引的映射，并在比较期间引用该映射。给定属性值：

`SORT_ORDER = SALES,SALE_PRODUCTS,EXPENSES,EXPENSES_ITEMS`

映射应如下所示：

```
{
    SALES: 0,
    SALE_PRODUCTS: 1,
    EXPENSES: 2,
    EXPENSES_ITEMS: 3
} 
```

这是比较器的样子：

```
private static class PredefinedOrderComparator implements Comparator<Table> {

    public PredefinedOrderComparator() {

        // Initialize orderIndex here

    }

    private final Map<String, Integer> orderIndex;

    @Override public int compare(Table one, Table two) {
        return orderIndex.get(one.getTableName()) - orderIndex.get(two.getTableName());
    } 

} 
```

### 要从属性值填充`orderIndex`，您需要：

1.  `getProperty()`使用您提到的获取逗号分隔的列表
2.  用逗号分割该值（我建议使用[Guava's`Splitter`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)，但[`String.split`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)或者其他人也可以）
3.  初始化一个新`HashMap<String, Integer>`的和一个`int index = 0`
4.  遍历拆分标记，将当前标记映射到`index`并递增`index`

**请注意隐含的假设，即所有表名中都没有逗号。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:29:05.663

```
 public class MyComparable implements Comparator<Table>{
   @Override
   public int compare(Table table1, Table table2) {
    return (table1.getTableName().compareTo(table2.getTableName());
   }
 } 
```

确保您已经覆盖了 Table 类中的 hashcode 和 equals 来实现这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T09:47:10.813

我给你写了一个关于如何使用比较器的非常简单的例子。如果你创建一个名为 Main 的类，将下面的内容复制粘贴到其中，编译并运行它，你可以看到发生了什么。

比较器只需要实现一个接口。为此，它需要实现一种方法（public int compare(T arg0, T arg1)。您可以在其中指定集合将如何排序；在这种情况下，根据 alfabet。

我希望这可以帮助你。

```
import java.util.*;

public class Main {

    public static void main(String[] args) {
        System.out.println("Start\n");
        List<Item> items = new ArrayList<Item>();
        for(String s : new String[]{"mzeaez", "xcxv", "hjkhk", "azasq", "iopiop"}) {
            items.add(createItem(s));
        }
        System.out.println("Items before sort:");
        System.out.println(Item.toString(items));
        Collections.sort(items, new ItemComparator());
        System.out.println("Items after sort:");
        System.out.println(Item.toString(items));
        System.out.println("End");
    }

    private static Item createItem(String s) {
        Item item = new Item();
        item.setS(s);
        return item;
    }

}

class Item {

    private String s;

    public String getS() {
        return s;
    }

    public void setS(String s) {
        this.s = s;
    }

    @Override
    public String toString() {
        return "Item: " + s;
    }

    public static String toString(Collection<Item> items) {
        String s = "";
        for(Item item : items) {
            s += item + "\n";
        }
        return s;
    }    

}

class ItemComparator implements Comparator<Item> {

    @Override
    public int compare(Item item1, Item item2) {
        return item1.getS().compareTo(item2.getS());
    }

} 
```

# variables - 整数变量在 forall 构造后不再可用

> ID：10513183
> 
> 赞同：1
> 
> 时间：2012-05-09T09:20:28.980
> 
> 标签：variables, integer, fortran

我有一个整数变量，它在我的子程序的开头声明。在我将它用作`forall`构造内的控制变量后，我不能再将它用作`do`循环的控制变量。编译器（英特尔，v. 12.0.3）抱怨

```
xyz.f90(1210): error #6404: This name does not have a type, and must have an explicit type.   [I]
            do i=1,sp_basis%num_dim
---------------^
xyz.f90(1210): error #6063: An INTEGER or REAL data type is required in this context.   [I]
        do i=1,sp_basis%num_dim 
```

`-c`我试图写一个小例子来复制这种行为（并使用与实际有问题的相同的编译器选项编译文件，除了`implicit none`适用于该代码所属的整个模块）：

```
subroutine xyz(stuff)

   use data, only: ppm, npeaks

   ! some declarations
   integer :: i ! ...

   associate(sp_basis => public_spectra%basis(counter))

      spots = npeaks * np

      allocate(ref_curves(spots,npeaks,sp_basis%num_dim), stat=stat)
      if (stat.ne.0) then
         ! ...
      end if

      forall (i=1:max_dim) uppers(i) = ubound(sp_int%int,i)
      forall (i=1:max_dim) lowers(i) = lbound(sp_int%int,i)
      forall (i=1:npeaks,j=1:sp_basis%num_dim) peak_pos_hertz(j,i) = ppm_to_hertz(ppm(permutation(j),i), sp_axes(j))

      do peak_considered=1,npeaks
         do pos=(peak_considered-1)*np+1,peak_considered*np
            do i=1,sp_basis%num_dim   ! <-- COMPLAINT 
```

如果我更改`i`为未用作`forall`构造控制变量的名称，一切正常。另外，这是我第二次遇到这个问题。

这就是编译完成的方式（xyz.f90 是构成整个程序的众多文件之一）：

```
ifort -c -g -C -check noarg_temp_created -traceback -warn -warn nodeclarations -nogen-interface xyz.f90 
```

你们中有人知道问题可能是什么吗？

非常感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:46:29.263

对于所有感兴趣的人，这是英特尔编译器中的一个错误。[在这里](http://software.intel.com/en-us/forums/showthread.php?t=105016&p=1)你可以阅读更多关于它的信息。此外，听起来这个错误将在 2012 年某个时间发布的编译器版本中得到修复。

# xml - ROR + 使用 XML 文件生成文本报告

> ID：10513189
> 
> 赞同：1
> 
> 时间：2012-05-09T09:20:41.513
> 
> 标签：xml, ruby-on-rails-3, report

在 Rails 3.1 中，我想使用 xml 文件为患者记录生成一个文本报告，但我没有办法实现它。

请建议使用 XML 文件生成报告的方式。

# c# - Web 服务返回 EndPointNotFoundException

> ID：10513195
> 
> 赞同：0
> 
> 时间：2012-05-09T09:21:11.787
> 
> 标签：c#, wcf, web-services, rest

我有一个 Web 服务 (LoginService) 我从另一个 Web 服务 (AndroidService) 调用。我有一个简单的方法来测试连接，但它不起作用。

在 LoginService 中，我有一个名为 getStuff(string password) 的方法——它以 JSON 格式返回一个字符串。当我通过浏览器直接访问它时，在[http://localhost/LoginService/LoginService.svc/getStuff/foo](http://localhost/LoginService/LoginService.svc/getStuff/foo)它应该可以正常工作。当我通过其他 Web 服务尝试相同的操作时，它失败并出现主题异常和 InnerException“服务器返回 404 Not Found”。

这是 LoginService 定义：

```
 [WebInvoke(Method = "GET",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        UriTemplate = "getStuff/{password}")]
        string getStuff(string password); 
```

这是来自 AndroidService 的代码：

```
 public string getStuff(string password)
    {
        string endpoint_address = "http://localhost/LoginService/LoginService.svc/";

        BasicHttpBinding binding = new BasicHttpBinding();
        EndpointAddress address = new EndpointAddress(endpoint_address);

        client = new LoginServiceClient(binding, address);
        return client.getStuff(password);
    } 
```

和 AndroidService 定义：

```
 [OperationContract]
    [WebInvoke(Method = "GET",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        UriTemplate = "getStuff/{password}")]
    string getStuff(string password); 
```

这是完整的例外：

```
Request Error
The server encountered an error processing the request. The exception message is 'There was no endpoint listening at http://localhost/LoginService/LoginService.svc that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.'. See server logs for more details. The exception stack trace is:

Server stack trace: at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason) at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout) at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout) at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) Exception rethrown at [0]: at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) at AndroidServiceSpace.LoginServiceReference.ILoginService.getStuff(String password) at AndroidServiceSpace.LoginServiceReference.LoginServiceClient.getStuff(String password) in C:\AndroidServiceUUS\trunk\services\AndroidService\AndroidService\Service References\LoginServiceReference\Reference.cs:line 264 at AndroidServiceSpace.AndroidService.getStuff(String password) in C:\AndroidServiceUUS\trunk\services\AndroidService\AndroidService\AndroidService.svc.cs:line 77 at SyncInvokegetStuff(Object , Object[] , Object[] ) at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs) at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

我的 web.config：

```
<?xml version="1.0"?>
<configuration>
<configSections>
</configSections>
<system.web>
  <compilation debug="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
  <bindings >
      <webHttpBinding>
          <binding name="BasicHttpBinding_UserService" maxBufferSize="2147483647"
              maxReceivedMessageSize="2147483647">
              <security mode="None" />
          </binding>
      </webHttpBinding>
  </bindings>      
     <client>
      <endpoint address="http://localhost/LoginService/LoginService.svc" binding="webHttpBinding"
          bindingConfiguration="BasicHttpBinding_UserService" contract="LoginServiceReference.ILoginService" />
  </client>      
<services>
  <service behaviorConfiguration="AndroidBehaviour" name="AndroidServiceSpace.AndroidService">
    <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding"
      contract="AndroidServiceSpace.IAndroidService" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="AndroidBehaviour">
      <serviceMetadata httpGetEnabled="True" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
    <behavior>
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp />
    </behavior>
  </endpointBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>
</configuration> 
```

移动 LoginService 以删除服务器以获取 Fiddler 请求：

```
#   Result  Protocol    Host    URL Body    Caching Content-Type    Process Comments    Custom  
4   502 HTTP    10.0.4.12:50271 /AndroidService.svc/getStuff/ggnore 512     text/html; charset=UTF-8    chrome:4132         
5   502 HTTP    10.0.4.12:50271 /favicon.ico    512     text/html; charset=UTF-8    chrome:4132         
6   400 HTTP    localhost:50271 /AndroidService.svc/getStuff/ggnore 4 565   private     text/html   chrome:4132         
7   404 HTTP    localhost:50271 /favicon.ico    2 310   private     text/html; charset=utf-8    chrome:4132         
8   200 HTTP    Tunnel to   clients4.google.com:443 0           chrome:4132         
9   404 HTTP    maker.server    /LoginService/LoginService.svc/$metadata    1 565   private     text/html; charset=UTF-8    vwdexpress:5772         
10  200 HTTP    maker.server    /LoginService/LoginService.svc  2 790   private     text/html; charset=UTF-8    vwdexpress:5772         
11  200 HTTP    maker.server    /LoginService/LoginService.svc/mex  10 195  private     application/soap+xml; charset=utf-8 vwdexpress:5772         
12  404 HTTP    maker.server    /LoginService/LoginService.svc  1 565   private     text/html; charset=UTF-8    vwdexpress:5772         
13  200 HTTP    maker.server    /LoginService/LoginService.svc?disco    289 private     text/xml; charset=UTF-8 vwdexpress:5772         
14  200 HTTP    maker.server    /LoginService/LoginService.svc?wsdl 3 902   private     text/xml; charset=UTF-8 vwdexpress:5772         
15  200 HTTP    maker.server    /LoginService/LoginService.svc?xsd=xsd0 1 969   private     text/xml; charset=UTF-8 vwdexpress:5772         
16  200 HTTP    maker.server    /LoginService/LoginService.svc?xsd=xsd2 1 521   private     text/xml; charset=UTF-8 vwdexpress:5772         
17  200 HTTP    maker.server    /LoginService/LoginService.svc?xsd=xsd1 2 273   private     text/xml; charset=UTF-8 vwdexpress:5772         
18  200 HTTP    localhost:50271 /   2 756       text/html; charset=utf-8    chrome:4132         
19  404 HTTP    localhost:50271 /favicon.ico    2 310   private     text/html; charset=utf-8    chrome:4132         
20  400 HTTP    localhost:50271 /AndroidService.svc/getStuff/ggnore 4 565   private     text/html   chrome:4132         
21  404 HTTP    localhost:50271 /favicon.ico    2 310   private     text/html; charset=utf-8    chrome:4132 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:46:24.733

显示与您类似的场景：

登录服务：

```
[OperationContract]
[WebGet(ResponseFormat = WebMessageFormat.Json,UriTemplate = "getStuff/{password}")]
string getStuff(string password); 
```

安卓服务：

```
[OperationContract]
[WebGet(ResponseFormat = WebMessageFormat.Json,UriTemplate = "getStuff/{password}")]
string getStuff(string password); 
```

现在我的 LoginService 实现：

```
public string getStuff(string password)
{
    if ( password == "test")
          return "Success";
    else
          return "Failure";
} 
```

现在我的 AndroidService 实现：

```
public string getStuff(string password)
{
    // NOTE: Below 2 lines to acccess the login service via SOAP 
    // assuming that you have added a service reference to your project and added the needed config entries in you androidservice config file
    LoginServiceClient client = new LoginServiceClient(binding, address);
    return client.getStuff(password);

     // NOTE: Below code to access it RESTfully 
     string responseMessage = null;
     var request = WebRequest.Create("http://localhost/LoginService/LoginService.svc/getStuff/" + password) as HttpWebRequest;
    if (request != null)
    {
        request.ContentType = "application/json";      
        request.Method = "GET";
        var response = request.GetResponse() as HttpWebResponse;
                if(response.StatusCode == HttpStatusCode.OK)
                {
                    Stream responseStream = response.GetResponseStream();
                    if (responseStream != null)
                    {
                        var reader = new StreamReader(responseStream);

                        responseMessage = reader.ReadToEnd();                        
                    }
                }
                else
                {
                    responseMessage = response.StatusDescription;
                }
    }
    if (responseMessage == "Success")
    {
        return "Success";
    }
    else
    {
        return "Failure";
    }
} 
```

现在从提琴手我执行以下请求（显示为原始）

```
GET http://localhost:50271/AndroidService.svc/getStuff/ggnore HTTP/1.1
Host: localhost
Content-Type: application/json 
```

Web.config 如图所示：

```
<?xml version="1.0"?>
<configuration>
<configSections>
</configSections>
<system.web>
  <compilation debug="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
  <bindings >
      <webHttpBinding>
          <binding maxBufferSize="2147483647"
              maxReceivedMessageSize="2147483647">
              <security mode="None" />
          </binding>
      </webHttpBinding>
      <basicHttpBinding>
           <binding name="BasicHttpBinding_ILoginService" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
      </basicHttpBinding>
  </bindings>
  <client>
        <endpoint address="http://maker.server/LoginService/LoginService.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ILoginService"
    contract="ILoginService" name="BasicHttpBinding_ILoginService" />
  </client>             
<services>
  <service behaviorConfiguration="AndroidBehaviour" name="AndroidServiceSpace.AndroidService">
    <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding"
      contract="AndroidServiceSpace.IAndroidService" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="AndroidBehaviour">
      <serviceMetadata httpGetEnabled="True" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
    <behavior>
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp />
    </behavior>
  </endpointBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>
</configuration> 
```

注意：我假设您的 LoginService 作为单独的 RESTful 服务托管，因此使用 WebRequestClass 访问它。如果 LoginService 在同一个项目中，那么为 LoginService 定义一个类似于 AndroidService 的服务元素就足够了。

# c++ - C++ 将字符数组转换为大写（无 MFC）

> ID：10513196
> 
> 赞同：0
> 
> 时间：2012-05-09T09:21:15.927
> 
> 标签：c++, keypress, uppercase, character-arrays

我试图让我的应用程序将字符数组转换为大写字母，以便我可以将它们作为按键传递。我知道我快要让这段代码正常工作了，但我只是看不到问题所在。

```
 int a, b, c, d;
        char text[25];
        char upper[25];

        for (a = 0, b = sizeof(login); a < b; a++)
        {
            if (isalpha(login[a])){
                l[a] = toupper(login[a]);
                Sleep(1000);
                GenerateKey(l[a], FALSE);}
            else{
                GenerateKey(l[a], FALSE);
                Sleep(1000);
                l[a] = login[a];}
        }
        login[a]='\0';
        GenerateKey(0x09, FALSE);

        for (c = 0, d = sizeof(pass); c < d; c++)
        {
            if (isalpha(pass[c])){
                p[c] = toupper(pass[c]);
                GenerateKey(p[c], FALSE);
                Sleep(1000);}
            else{
                GenerateKey(p[c], FALSE);
                p[c] = pass[c];
                Sleep(1000);}
        }
        pass[a]='\0';

        GenerateKey(0x09, FALSE);
        Sleep(1000);
        GenerateKey(0x09, FALSE);
        Sleep(1000);
        GenerateKey(0x0D, FALSE); 
```

这是 GenerateKey 函数：

```
void GenerateKey(int vk, BOOL bExtended) {

KEYBDINPUT  kb = {0};
INPUT       Input = {0};

/* Generate a "key down" */
if (bExtended) { kb.dwFlags  = KEYEVENTF_EXTENDEDKEY; }
kb.wVk  = vk;
Input.type  = INPUT_KEYBOARD;
Input.ki  = kb;
SendInput(1, &Input, sizeof(Input));

/* Generate a "key up" */
ZeroMemory(&kb, sizeof(KEYBDINPUT));
ZeroMemory(&Input, sizeof(INPUT));
kb.dwFlags  =  KEYEVENTF_KEYUP;
if (bExtended) { kb.dwFlags |= KEYEVENTF_EXTENDEDKEY; }
kb.wVk = vk;
Input.type = INPUT_KEYBOARD;
Input.ki = kb;
SendInput(1, &Input, sizeof(Input));

return;
 } 
```

任何帮助都会很棒！

**编辑：**

此应用程序正在尝试打开网页，然后输入登录信息并按提交（使用选项卡选择用户名、密码字段等）。回答@Rup，`l[]`并`p[]`在此代码块上方进行初始化。

```
 char l[180];
        char p[180]; 
```

l 是用户的登录名，p 是他们的密码。我正在尝试将它们转换为大写以在 GenerateKey 中传递它们。例如`GenerateKey('A', FALSE);`

目前，代码似乎根本没有通过任何按键，但应用程序冻结了，所以我相信它卡在某个地方的 for 循环中。

**编辑2：**

感谢@William 提供有用的代码。使用 toUpper 函数我非常接近解决这个问题。我现在唯一遇到的问题是传递的登录名和密码包含额外的字符。例如，如果我将 login 作为传递`username`，然后重新运行程序并在`user`我得到输出时传递 login `userame`。

这是我现在使用 GenerateKey 和 toUpper 函数的代码：

```
 // Convert to uppercase to be passed as keypresses
        toUpper(login, sizeof(login));
        toUpper(pass, sizeof(pass));
        int a;
        for(a=0; a<sizeof(login);a++){
            GenerateKey(login[a], FALSE);}
        login[a]='\0';
        GenerateKey(0x09, FALSE);
        a=0;
        for(a=0; a<sizeof(pass);a++){
            GenerateKey(pass[a], FALSE);}
        pass[a]='\0';
        GenerateKey(0x09, FALSE);
        Sleep(1000);
        GenerateKey(0x09, FALSE);
        Sleep(1000);
        GenerateKey(0x0D, FALSE); 
```

**解决方案：**

在上面的代码中使用`strlen(login);`清除了我遇到的所有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:49:13.573

```
void toUpper(char* pArray, int arrayLength)
{
    for(int i = 0; i < arrayLength; i++)
    {
        if(pArray[i] >= 'a' && pArray[i] <= 'z')
            pArray[i] -= ' ';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:33:27.387

我已经用以下代码解决了这个问题：

代码在评论中解释。

```
 // Convert to uppercase to be passed as keypresses
        toUpper(login, sizeof(login));
        toUpper(pass, sizeof(pass));
        int a;
        // Loop through the character array and send the key presses
        for(a=0; a<strlen(login);a++){
            GenerateKey(login[a], FALSE);}
        GenerateKey(0x09, FALSE);
        for(a=0; a<strlen(pass);a++){
            GenerateKey(pass[a], FALSE);}
        // Additional keypresses
        GenerateKey(0x09, FALSE);
        Sleep(1000);
        GenerateKey(0x09, FALSE);
        Sleep(1000);
        GenerateKey(0x0D, FALSE); 
```

还需要提供的 GenerateKey 函数和 toUpper 函数才能使此代码正常运行。

感谢您在此问题上提供的所有帮助。

# ios - IOS通讯录更新联系人或合并记录

> ID：10513199
> 
> 赞同：1
> 
> 时间：2012-05-09T09:21:28.080
> 
> 标签：ios, addressbook

在我的 iOS 应用程序中，我创建了自己的联系表单，该表单附加了我的应用程序的唯一标识符。我想将通讯录中的联系人更新为 sql "update" 语句。

在 iOS 中，我只看到 ABAddressBookAddRecord 和 ABAddressBookRemoveRecord 方法。我该怎么做 UpdateContact？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:00:22.150

In our app, we let the user decide, whether to add a new contact or merge the new data into an existing one. We did it like that: (assuming you use a navigationViewController)

```
ABUnknownPersonViewController *view = [[ABUnknownPersonViewController alloc] init];
view.unknownPersonViewDelegate = self;
view.displayedPerson = <YOUR-ABRecordRef-HERE>;
view.allowsAddingToAddressBook = YES;
view.allowsActions = YES;
[self.navigationController pushViewController:view animated:YES]; 
```

The user then sees the record in single view (just your "new" data) and has buttons to import or merge to existing contact.

# php - MySQL 不是有效的资源

> ID：10513202
> 
> 赞同：0
> 
> 时间：2012-05-09T09:21:30.763
> 
> 标签：php, mysql, web

输出：

警告：mysql_query(): 6 在第 94 行的 C:...\mysql_helper.php 中不是有效的 MySQL-Link 资源

```
$con = mysql_connect($GLOBALS['mysql_host'], $GLOBALS['mysql_username'], $GLOBALS['mysql_password']) or die(mysql_error());
$db = mysql_select_db($GLOBALS['mysql_database']) or die(mysql_error($con));

$username=sanitize_mysql($username);
$password=sanitize_mysql($password);
$email=sanitize_mysql($email);

if(check_exists("users", "username", $username) == FALSE){ 
    $query = "INSERT INTO users VALUES('".$username."','".$password."','".$email."','".$status."','".$reg_date."','".$own_ref_id."','')";
    $result = mysql_query($query,$con) or die(mysql_error($con));
    return TRUE;
} else {
    return FALSE;
}
mysql_close($con); 
```

适用于像这样构建的所有其他功能（复制/粘贴）

这是 check_exists

```
 function check_exists($table,$specifier,$value)
{
    $con = mysql_connect($GLOBALS['mysql_host'], $GLOBALS['mysql_username'], $GLOBALS['mysql_password']) or die(mysql_error());
    $db = mysql_select_db($GLOBALS['mysql_database']) or die(mysql_error($con));

    $query = "SELECT * FROM ".$table." WHERE ".$specifier." = '".$value."'";
    $erg = mysql_query($query) or die(mysql_error());

    while ($row = mysql_fetch_array($erg)) {
        mysql_close($con);
        return TRUE;
    }
    mysql_close($con);
    return FALSE;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T09:35:12.420

看起来`$con`in`check_exists()`与您的范围相同`$con`，因此，`check_exists()`首先覆盖（并丢失）您的原始连接，然后在调用`mysql_close($con)`.

您最好保持一个单独的连接，以便使用所有此类功能。

# javascript - 在 iframe 中编辑另一个网页的样式的方法，即使是表面上？

> ID：10513204
> 
> 赞同：0
> 
> 时间：2012-05-09T09:21:31.497
> 
> 标签：javascript, html, css

有什么方法可以编辑页面在 iframe 中的外观吗？我想更改特定链接的颜色，例如，iframe 中的 google 搜索。

另外，当google.com正常加载时，为什么下面的代码在javascript控制台中不起作用？

```
document.body.getElementsByTagName("a")[0].style.color='red'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:31:51.483

即使通过 iFrame，您也无法使用 Javascript 修改来自另一个域的内容。如果你想尝试这样的事情，你可以站点抓取获取所有 html 元素，然后使用服务器端语言将它们显示在你自己的页面上（绕过 JavaScript 的域限制）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T09:23:01.400

您没有从一个框架到另一个从不同域加载的框架的 javascript 访问权限。

对于第二个问题，测试这个：

```
var test = document.body.getElementsByTagName("a");
for (var i=0; i<test.length; i++) test[i].style.color="red"; 
```

您的代码的不同之处在于我更改了所有“a”元素，而不仅仅是第一个。

# iphone - 是否可以在 viewWillAppear 和 viewDidAppear 之间调用 UIEvent？

> ID：10513214
> 
> 赞同：1
> 
> 时间：2012-05-09T09:22:02.833
> 
> 标签：iphone, objective-c, ios5, ios4, uievent

是否可以处理 viewWillAppear 和 viewWillDisappear 之间的 UIEvents？例如：

假设我有一个带有 UITableView 的视图控制器。当按下一个单元格时，我将另一个视图控制器推送到导航控制器（当然还显示它）。是否有可能在推送视图的 viewWillAppear 事件之后（并且在 viewDidAppear 之前）我仍然可以按下 UITableView 中的单元格之一？

我问这个是因为我在我的应用程序的日志中看到了这个，我从没想过这样的事情是可能的..

你们（或女孩）怎么看？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:55:56.333

我有一个想法可能会起作用，您在 viewWillAppear 中使用 performSelector 0.01 或其他时间使用延迟参数并在此处调用您的方法，

希望，这对你有帮助。:)

# c# - 将权限/身份验证复制到子线程...？

> ID：10513215
> 
> 赞同：17
> 
> 时间：2012-05-09T09:22:03.273
> 
> 标签：c#, multithreading, task-parallel-library, dynamics-crm-2011, silverlight-5.0

这是我注意到的非常奇怪的事情。

我正在编写一个 CRM 2011 Silverlight 扩展，而且，在我的本地开发实例上一切都很好。应用程序使用 OData 进行通信，并`System.Threading.Tasks.Task`在后台执行所有操作（`FromAsync`是一种祝福）。

然而，我决定在 CRM 2011 Online 中测试我的应用程序，令我惊讶的是，它不再工作了。结束检索任务时，我会收到安全异常。

使用 Fiddler，我发现 CRM 试图将我重定向到实时登录页面，考虑到我已经登录，这没有多大意义。

经过更多尝试，我发现错误是因为我从与 UI 线程不同的线程访问服务。

这是一个简单的例子：

```
 //this will work
    private void button1_Click(object sender, RoutedEventArgs e)
    {
        var query = ctx.AccountSet;
        query.BeginExecute((result) =>
        {
            textBox1.Text = query.EndExecute(result).First().Name;
        }, null);
    }

    //this will fail
    private void button2_Click(object sender, RoutedEventArgs e)
    {
        System.Threading.Tasks.Task.Factory.StartNew(RestAsync);
    }

    void RestAsync()
    {
        var query = ctx.AccountSet;
        var async = query.BeginExecute(null, null);
        var task = System.Threading.Tasks.Task.Factory.FromAsync<Account>(async, (result) =>
        {
            return query.EndExecute(result).First(); // <- Exception thrown here
        });
        textBox1.Dispatcher.BeginInvoke(() =>
        {
            textBox1.Text = task.Result.Name;
        });
    } 
```

似乎很明显，我缺少一些关于线程如何使用权限的基础知识。由于在我的情况下最好使用单独的线程，有没有办法“复制”权限/身份验证？也许是某种模仿？

`Task`编辑：如果其他人为此苦苦挣扎，只要`query.BeginExecute(null, null);`在 UI 线程上执行，就可以使用其他线程（或视情况而定）。您需要一种方法来检索返回`IAsyncResult`给调用线程，但您可以使用`ManualResetEvent`.

但我仍然想知道为什么线程之间不共享该死的权限/身份验证......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T18:59:33.143

我不太确定，这是否会有所帮助。但我找到了 Jeffrey Richter 第 770 页的描述

默认情况下，文化和身份信息不会流向新的线程池线程，因此代表客户端完成的任何其他工作现在都不会使用客户端的文化和身份信息。理想情况下，我们希望文化和身份信息流向仍在代表同一客户工作的其他线程池线程。”

这是他的例子，我希望这会有所帮助。

```
private static AsyncCallback SyncContextCallback(AsyncCallback callback) 
{
  SynchronizationContext sc = SynchronizationContext.Current;
  // If there is no SC, just return what was passed in
  if (sc == null) return callback;
  // Return a delegate that, when invoked, posts to the captured SC a method that
  // calls the original AsyncCallback passing it the IAsyncResult argument
  return asyncResult => sc.Post(result => callback((IAsyncResult)result), asyncResult);
}

protected override void OnMouseClick(MouseEventArgs e) {
  // The GUI thread initiates the asynchronous Web request
  Text = "Web request initiated";
  var webRequest = WebRequest.Create("http://Wintellect.com/");
  webRequest.BeginGetResponse(SyncContextCallback(ProcessWebResponse), webRequest);
  base.OnMouseClick(e);
}

private void ProcessWebResponse(IAsyncResult result) {
  // If we get here, this must be the GUI thread, it's OK to update the UI
  var webRequest = (WebRequest)result.AsyncState;
  using (var webResponse = webRequest.EndGetResponse(result)) {
      Text = "Content length: " + webResponse.ContentLength;
  }
} 
```

这是我在我的应用程序中使用的

```
 public override void UpdateCanvas(object parameter)
 {
      Action<GraphPane> startToUpdate = StartToUpdate;
       GraphPane selectedPane = Canvas.HostingPane.PaneList.Find(p =>  p.Title.Text.Equals(defaultPanTitle));
       startToUpdate.BeginInvoke(selectedPane, FormSyncContext.SyncContextCallback(RefreshCanvas), selectedPane);
 }

 public static AsyncCallback SyncContextCallback(AsyncCallback callback)
 {
       // Capture the calling thread's SynchronizationContext-derived object
       SynchronizationContext sc = SynchronizationContext.Current;

       // If there is no SC, just return what was passed in
       if (sc == null) return callback;

       // Return a delegate that, when invoked, posts to the captured SC a method that
       // calls the original AsyncCallback passing it the IAsyncResult argument
       return asyncResult => sc.Post(result => callback((IAsyncResult)result), asyncResult);
 } 
```

# c# - 复选框颜色未设置..根据需要

> ID：10513224
> 
> 赞同：0
> 
> 时间：2012-05-09T09:22:48.820
> 
> 标签：c#, winforms

我已经在交流表单上动态添加了复选框......
并且在加载表单时它们被禁用......
默认情况下每个复选框都有红色......我以编程方式将其分配为黑色......
但是当表单被加载时它是红色的……我不知道为什么会这样……

```
private void Form2_Load(object sender, EventArgs e)
{
    for (int i = 0; i < list.Count; i++)
    {
         CheckBox c = new CheckBox();
         c.Text = i.ToString();
         c.Width = 120;
         flowLayoutPanel1.Controls.Add(c);
         c.ForeColor = Color.Black;
    }
    flowLayoutPanel1.Enabled = false;
} 
```

只有在我启用 flowLayoutPanel 后它才会变成黑色......
我希望复选框即使在加载表单时也有黑色......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:55:47.780

这是一种方法。将您的代码更改为：

```
for (int i = 0; i < list.Count; i++)
{
    CheckBox c = new CheckBox();
    c.Text = "";
    c.Tag = i.ToString();
    c.Width = 120;
    flowLayoutPanel1.Controls.Add(c);
    c.Paint += new PaintEventHandler(c_Paint);

}
    flowLayoutPanel1.Enabled = false; 
```

在 c_Paint 方法中，您可以绘制控件的文本（保存在 Tag 属性中）

```
void c_Paint(object sender, PaintEventArgs e)
{
    Control c = sender as Control;
    if (c != null)
    {
        string text = c.Tag.ToString();
        e.Graphics.SmoothingMode = 
            System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
        RectangleF rect = new RectangleF(
            new PointF(19, 5), 
            e.Graphics.DrawString(text, this.Font, Brushes.Black, new PointF(19, 5));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:13:03.967

您应该创建一个函数来执行此操作并`InitializeComponent();`在表单构造函数中调用它。您也应该先启用面板。

```
public partial class YourForm: Form
    {
        public YourForm()
        {
            InitializeComponent();
           // put your function here
        } 
```

# php - ImageMagick 在高负载下的表现如何？

> ID：10513225
> 
> 赞同：2
> 
> 时间：2012-05-09T09:22:48.813
> 
> 标签：php, canvas, imagemagick, image-manipulation

我正在开发的应用程序的一小部分包括照片滤镜。我目前处于研究/模拟阶段，并发现以下选项似乎运作良好。

1.  服务器端处理通过 ajax 发送并在 DOM 中替换的图像，使用 GD 和 ImageMagick 的组合来执行处理。

2.  使用 html5 画布和 javascript 的客户端处理。

我有两者的模型，并且可能会根据浏览器支持使用两者的组合。

但是我想知道随着应用程序的扩大，ImageMagick 的适用性如何。随着用户群的增长，我是否可能会遇到性能问题？如果我要使用这个实现，有什么我应该注意的吗？

最后，还有其他高性能替代品吗？执行基于浏览器的图像过滤的最快方法是什么（我们正在谈论棕褐色/灰度/油画风格的过滤器）

我意识到这是一个相当广泛的问题，但希望有人对此问题有一些经验或评论。提前致谢。

# iphone - 如何从我自己的应用程序打开 iphone 邮件应用程序？

> ID：10513226
> 
> 赞同：19
> 
> 时间：2012-05-09T09:22:49.220
> 
> 标签：iphone, objective-c, ios, ios4

我正在开发注册功能。当用户创建帐户成功时，在此功能中。我要求他或她激活他的帐户。如果用户说是，我想打开 iphone 的邮件应用程序。现在我的问题很简单，如何从我自己的应用程序中打开邮件应用程序？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-09T09:25:58.883

```
#define URLEMail @"mailto:sb@sw.com?subject=title&body=content"

 NSString *url = [URLEMail stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding ]; 
 [[UIApplication sharedApplication]  openURL: [NSURL URLWithString: url]]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-09T09:26:29.257

试试这个。

```
-(void)launchMailAppOnDevice
{
    NSString *recipients = @"mailto:myemail@gmail.com?subject=subjecthere";
    NSString *body = @"&body=bodyHere";

    NSString *email = [NSString stringWithFormat:@"%@%@", recipients, body];
    email = [email stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:email]];
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-06-09T21:25:13.130

stringByAddingPercentEscapesUsingEncoding 和 openURL 已弃用。

现在使用这个：

```
#define URLEMail @"mailto:sb@sw.com?subject=title&body=content"

NSString * encodedString = [URLEMail stringByAddingPercentEncodingWithAllowedCharacters:[NSCharacterSet URLFragmentAllowedCharacterSet]];

UIApplication *application = [UIApplication sharedApplication];
    [application openURL:[NSURL URLWithString: encodedString] options:@{} completionHandler:nil]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-09T09:29:13.150

哎哟！

它的长短是；你不能。

您可以创建电子邮件撰写视图以发送电子邮件（请参阅[MFMailComposeViewController](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)），但您不能无目的随意打开应用程序。

请参阅上一篇文章以获得澄清：[从另一个（iPhone）中启动应用程序](https://stackoverflow.com/questions/419119/launch-an-app-from-within-another-iphone)

确实，用户关闭您的应用程序并打开邮件并不费力，所以无论如何我都不会太担心。

# php - 从 Wordpress 中的特色图片中删除链接

> ID：10513232
> 
> 赞同：0
> 
> 时间：2012-05-09T09:23:18.077
> 
> 标签：php, wordpress, slider

我有一个滑块，它使用各种帖子中的特色图片中的图片。当您单击滑块上的图像时，它们会链接回帖子。如何完全删除链接？我不希望滑块图像链接到任何东西。这是我的代码：

```
 <?php if ( has_post_thumbnail() )the_post_thumbnail(array( 650,999 ),  array( 'alt' => get_the_title(), 'title' => get_the_title(), 'class' => 'slidethumb' )); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:15:35.870

在您的代码段中没有创建链接。当你这样做时，你的源代码会说什么：

```
var_dump(get_the_post_thumbnail(
    array( 650,999 ),
    array( 'alt' => get_the_title(), 'title' => get_the_title(),'class' => 'slidethumb' )
)); die(); 
```

# android - 在 android 中使用 DTMF 音调

> ID：10513233
> 
> 赞同：1
> 
> 时间：2012-05-09T09:23:21.340
> 
> 标签：android, phone-call, dtmf

我想在android中做以下事情。可能吗 ？

1) 呼叫 +xx xxxxxxx

2）等到第一个音结束

3) 插入通行证：xxxx

4）等待短暂的高音结束

5) 按 1 直到您听到特定的声音。

这里的音调是 DTMF 音调，我试图用呼叫意图来做到这一点，但我如何使用代码输入正在进行的呼叫？

有人可以指导我吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:16:31.177

您可能无法直接从 Android 设备执行此操作，但您可以使用使用[Call Control XML (CCXML)](http://www.w3.org/TR/ccxml/)的可编程服务来完成此操作。您将调用 CCXML 应用程序，该应用程序将依次拨打您要与之交互的系统的电话号码。然后 CCXML 应用程序将接管您描述的自动化过程。如您的流程中所述，侦听音调通常称为[呼叫进度分析](http://en.wikipedia.org/wiki/Call_progress_analysis)。[Voxeo 的 Prophecy](http://evolution.voxeo.com/)是一个拥有出色 CCXML 和呼叫进度分析的平台。您可以免费试用。由于您正在收听 DTMF 音调，您可能希望使用 CCXML 和[VoiceXML的组合](http://www.w3.org/TR/voicexml20/). 预言支持两者。VoiceXML 可以检测特定的 DTMF 音调。没有办法告诉 VoiceXML 或 CCXML 发送 DTMF。这是处理的方式是播放 DTMF 的录音。您可以[在此处获取适用于 Prophecy 的 DTMF 音调的录音](http://evolution.voxeo.com/library/audio/prompts/dtmf/index.jsp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:26:11.043

无法写入电话流，抱歉。

# svn - 在 SVN 提交上强制“消息”？

> ID：10513234
> 
> 赞同：2
> 
> 时间：2012-05-09T09:23:23.003
> 
> 标签：svn

1.  在将工作提交到 SVN 存储库时，如何强制用户输入描述？
2.  是否可以强制用户输入一组特定的文本？

我希望开发人员总是写下他/她所做的更改的描述，然后在新的一行写上“IAMSURE”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:31:42.710

在 repo 上有一个`pre-commit`钩子，它将查找空消息并停止提交。

[http://svnbook.red-bean.com/nightly/en/svn.reposadmin.create.html](http://svnbook.red-bean.com/nightly/en/svn.reposadmin.create.html)

# python - 从字节字符串创建 ipaddr-py IPv6Address

> ID：10513235
> 
> 赞同：2
> 
> 时间：2012-05-09T09:23:23.737
> 
> 标签：python, ip-address

我经常需要将原始的字节编码 IPv6 地址转换为[ipaddr-py 项目](http://code.google.com/p/ipaddr-py/)中的 IPv6Address 对象。初始化程序不接受字节编码的 IPv6 地址，如下所示：

```
>>> import ipaddr   
>>> byte_ip = b'\x20\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01'
>>> ipaddr.IPAddress(byte_ip)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "ipaddr.py", line 78, in IPAddress
    address)
ValueError: ' \x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01' does
 not appear to be an IPv4 or IPv6 address 
```

将字节编码转换为 ipaddr-py 可以理解的格式的最简单方法是什么？我正在使用 ipaddr.py 的 v. 2.1.10。

到目前为止，我唯一的解决方法对于简单的任务来说太长了：

```
>>> def bytes_to_ipaddr_string(c):
...     c = c.encode('hex')
...     if len(c) is not 32: raise Exception('invalid IPv6 address')
...     s = ''
...     while c is not '':
...         s = s + ':'
...         s = s + c[:4]
...         c = c[4:]
...     return s[1:]
...
>>> ipaddr.IPAddress(bytes_to_ipaddr_string(byte_ip))
IPv6Address('2000::1') 
```

**编辑：**我正在寻找一个跨平台的解决方案。仅 Unix 不行。

有人有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:52:40.243

在 Unix IPv6 bin -> 字符串转换很简单 - 你只需要[`socket.inet_ntop`](http://docs.python.org/library/socket.html#socket.inet_pton)：

```
>>> socket.inet_ntop(socket.AF_INET6, b'\x20\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01')
'2000::1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:24:02.930

看看[`ipaddr_test.py`](http://code.google.com/p/ipaddr-py/source/browse/trunk/ipaddr_test.py)：

```
[...]
# Compatibility function to cast str to bytes objects
if issubclass(ipaddr.Bytes, str):
    _cb = ipaddr.Bytes
else:
    _cb = lambda bytestr: bytes(bytestr, 'charmap')
[...] 
```

然后

```
_cb('\x20\x01\x06\x58\x02\x2a\xca\xfe'
    '\x02\x00\x00\x00\x00\x00\x00\x01') 
```

为您提供`Bytes`模块识别的包含压缩地址的对象。

我没有测试它，但它看起来好像是它的意图......

* * *

同时我测试了它。这些`_cb`东西可能适用于没有`Bytes`对象的旧 moule 版本。所以你可以做

```
import ipaddr
b = ipaddr.Bytes('\x20\x01\x06\x58\x02\x2a\xca\xfe' '\x02\x00\x00\x00\x00\x00\x00\x01')
print ipaddr.IPAddress(b) 
```

这将导致

```
2001:658:22a:cafe:200::1 
```

这可能是你需要的。

# sql-server - 将包括所有表和数据的数据库从 SQL Server 导出到 file.sql 文件的简单方法是什么？

> ID：10513239
> 
> 赞同：3
> 
> 时间：2012-05-09T09:23:38.073
> 
> 标签：sql-server, sql-server-2008-express

我正在使用 SQL Server[s] 2008 R2 [Express]。

我想为示例数据库创建一个安装 file.sql 文件。

在 file.sql 中，我的意思是一个将从 Microsoft SQL Server Management Studio 作为查询运行的文件。

我想要一个包含数据库本身以及所有表和数据的文件。

如何将整个数据库导出到这样的文件中？

附言

这是一个非常小的数据库。

我不担心新服务器上的数据库名称重复。

数据中有 Unicode 字符和许多特殊字符，包括 {[(<`.,'|"?*&/>)]}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T09:28:12.837

在管理工作室

右键单击数据库名称

选择任务 > 生成脚本

接下来，选择“脚本整个数据库”

接下来，进入高级

要编写脚本的数据类型 => 选择“架构和数据”（并根据您的需要检查其他选项）

选择要保存到的文件

结束。

编辑 ：

如果仅在 Management Studio 中使用，则使用 Backup and Recovery 会更快！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T10:44:00.660

我只想补充一点，如果您有大量数据（> 1000 条记录），那么您需要一次将插入语句批处理成 <= 1000 个插入的组。批量大小有限制。

您可能还需要注意插入发生的顺序以避免约束冲突。一种安全的方法是将 FK 约束提取到最后执行的单独文件中。

# php - 如何设置 HTML 文件字段的值？

> ID：10513243
> 
> 赞同：3
> 
> 时间：2012-05-09T09:23:44.957
> 
> 标签：php, html

> **笔记：**
> 
> 下面的答案和评论反映了 2009 年旧版浏览器的状态。现在，您实际上可以在 2017 年使用 JavaScript 动态/编程地设置文件输入元素的值。
> 
> 有关详细信息以及演示，请参阅此问题中的答案：
> [如何以编程方式设置文件输入值（即：拖放文件时）？](https://stackoverflow.com/q/47515232/584192)

在 HTML 中，我们可以通过编写来设置文本字段的值：

```
<input type="text" name="doc_intitule" maxlength="100" size="24" value="<?php echo $ret['doc_intitule']; ?>"> 
```

但是如何设置`file`字段的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T09:29:29.437

请参考这个

[在 ASP.NET MVC 中验证失败后如何保持输入类型 = 文件字段值？](https://stackoverflow.com/questions/967916/how-to-keep-input-type-file-field-value-after-failed-validation-in-asp-net-mvc)

据我所知，出于安全目的，您不应该预先设置文件字段值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T09:26:10.140

您**不能**以任何方式设置文件字段的值。见这里：[信息](http://www.cs.tut.fi/~jkorpela/forms/file.html#value)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T09:26:24.350

您不能为文件字段设置默认值。

这是一个安全问题：您可以通过代码提交表单，因此您可以强制用户在他们不知情的情况下上传文件。

# python - 使用 Python 从文件中读取字符串时，双引号（“xxx”）意外更改为两个双引号（“”xxx“”）

> ID：10513247
> 
> 赞同：1
> 
> 时间：2012-05-09T09:24:03.923
> 
> 标签：python, string, quotes, decode

这是一个困扰我很多关于 Python 的问题，我真的可以在这方面使用一些帮助：

我正在尝试从文件中读取一些字符串。这些文件是 .rc 后缀，其中每个文件都包含一种本地化字符串。基于不同的语言，我使用不同的代码页进行解码。这里我只以法语文件为例，它的代码页是1252。可悲的是，每次如果有双引号，当我在Python shell中打印字符串时，都会意外出现两个双引号。

*.rc 源文件中的行：*

La fonction "Test de télécopie" 验证。

*Python shell 中的输出字符串：*

La fonction ""Test de télécopie"" 验证。

*我做过的一些活动：*

```
f = open(filename,"r")         #Used to open .rc source file
for strline in f.readlines():  #Used to read file line by line
    print strline                #Used to print in Python shell 
```

*附加信息：*

一种。.rc 源字符串中的双引号十六进制代码是：`&#22;`

湾。如果我用网络浏览器打开 .rc 源文件，它也会意外显示两个双引号。

C。.rc 源文件是保密的，所以我没有在这里附上。

d。操作系统：Enu Win7 x64\Python：v2.7

我是 Python 的新手。任何想法都会非常感激。

最好的祝福， ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:41:33.040

所有的误解都来自于我不熟悉 .rc 文件（我以前从未使用过 C++）以及开发人员如何处理字符串。如果我的回答看起来如此未经指导，请不要打我。:)

与相关开发者交谈后，确认是.rc文件创建者添加的一种机制，用于处理字符串中的双引号。

就像下面的字符串：GUI 期望 - 你好吗，“马克”？

在 .rc（或网络浏览器）中-“你好吗，”“马克”“”？

.rc 文件创建者添加了这种机制，即在字符串中添加一个双引号来包围原始字符串，以确保一旦调用该字符串在 GUI 中显示，它就不会被识别为：-“你好吗”，“标记” ？” ==>“你好吗，”标记“？”==>这将是一个混乱的双引号匹配，GUI 无法正确显示。

所以我添加了一个过滤器来删除这个额外的双引号，以获得我想要的。我相信这对 Python 用户来说很容易。

这不是一个专业的答案，但我只是希望让遇到同样问题的人从不同的角度思考。

我非常感谢之前帮助我确定上述问题的每个人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:06:18.910

您的控制台正在使用 1252 以外的另一个代码页。

**编辑：**

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

str=u"""La fonction "Test de télécopie" vérifie."""
print str
flat=str.encode("cp1252")
convts=unicode(flat, encoding="cp850") #Change the testing code page here.
print convts 
```

# jquery - 如何使用 jQuery 绑定 asp.net gridview 控件？

> ID：10513254
> 
> 赞同：-1
> 
> 时间：2012-05-09T09:24:30.887
> 
> 标签：jquery, asp.net, gridview

我必须在 jqModal 弹出窗口中将 asp.net gridview 与 jquery 绑定我进行 ajax 发布调用并获取列表。我需要将此列表绑定到 ajax 调用的成功回调上的 asp.net 网格。请在下面找到我正在使用的代码，在 bindGrid 方法中，我需要将列表绑定到 asp.net gridview。请帮忙！

功能页面加载（发件人，参数）{

```
 var param = null;
         $(function () {
             var myBlock = $('#myBlock'); // cache jq obj
             $().ajaxStart(function () {
                 $.blockUI(myBlock);
             }).ajaxStop($.unblockUI);
         });

         var showModalPopup = function (container, path, leftMargin, topMargin, triggerElement, postData) {
             // alert('in popup');
             //(container, path, leftMargin, topMargin, triggerElement, postData) {
             ///<summary>This method is used for displaying remote pages in modal popup.</summary>
             ///<param name="container">ID of the div which is displayed as popup.</param>
             ///<param name="path">URL of the page which will be displayed as popup.</param>
             ///<param name="leftMargin">Width of left margin in "%". Used for alignment of popup.</param>
             ///<param name="topMargin">Width of top margin in "%". Used for alignment of popup</param>
             ///<param name="triggerElement">Element which triggered the popup. Used for contexts.</param>
             ///<returns></returns>
             var divBlock = '#' + container;
             if (typeof leftMargin === 'undefined') {
                 leftMargin = '20%';
             }

             if (typeof topMargin === 'undefined') {
                 topMargin = '10%';
             }
             //if the 3rd parameter type is object,we would treat it as postdata  
             if (typeof leftMargin === 'object') {
                 postData = leftMargin;
                 leftMargin = '10%';
             }
             if (typeof triggerElement !== 'undefined') {
                 //Select the id of immediate fieldset of the element which opened popup.
                 //e.g., if "NameSearchButton" is the trigger element, find the fieldset containing this button.
                 var parentFieldsetId = triggerElement.parents('fieldset')[0].id;
                 //Store the fieldset by adding it as custom attribute to divPopup.
                 $(divBlock).attr('parentContext', parentFieldsetId);
             }

             $.blockUI({ message: $(divBlock),
                 css: {
                     padding: 10,
                     margin: 0,
                     left: leftMargin,
                     top: topMargin,
                     width: '',
                     height: '',
                     centerX: true,
                     centerY: true,
                     textAlign: 'center',
                     color: '#000',
                     opacity: '80',
                     border: '3px solid #aaa'
                 },
                 overlayCSS: {
                     backgroundColor: '#000',
                     opacity: 0.7
                 },
                 fadeIn: 0,
                 fadeOut: 0
             });

             if (path !== 'local') {
                 $(document).data('formInstance', false);
                 if (postData) {
                     $.post(path, postData, function (response) {

                         $(divBlock).html(response);
                     });
                 }
                 else {

                     $(divBlock).load(path);
                 }
             }

             $(divBlock).attr('IsPopupDiv', 1);

         };

         var bind = function (success) {
             if (success !== null || success !== undefined) {
                 //Bind to the grid #ContentPlaceHolder1_grdPopUpGrid
             }

         };
         var bindGrid = function () {
             var objBind = '06'; //$('#ContentPlaceHolder1_txtBeginsWithText').val();
             var conStrBind = $('#ContentPlaceHolder1_ConnStrHidden').val();

             if (param == null || param == '' || param == undefined) {

                 drpParamBind = $('#ContentPlaceHolder1_drpSearchBy').val();
             }
             else {
                 drpParamBind = param;
             }
             var webMethodURL = 'testPage.aspx/HitMethod';
             var newobj = { 'obj': objBind, 'conStr': conStrBind, 'drpParam': drpParamBind };
             $.ajax({
                 type: "POST",
                 url: webMethodURL,
                 contentType: "application/json; charset=utf-8",
                 data: JSON.stringify(newobj),
                 dataType: "json",
                 success: function (response) {

                     var success = '';
                     if (response !== undefined) {
                         if (response.d !== null || response.d !== '') {
                             success = response.d;
                             bind(success);

                         }
                     }
                 }
                 //            ,error: function(XHR, errStatus, errorThrown) {
                 //            }
             });
         };
         var con = $('#imgSearchSpouse').parent();
         var test = $('#txtPartnerNo').val();

         $("#ContentPlaceHolder1_imgSearchSpouse").click(function () {
             // alert('hello');

             showModalPopup('ContentPlaceHolder1_Spousepopupdiv', 'local', '13%', '15%');

         });
         $('#ContentPlaceHolder1_btnSearchpopup').click(function () {

             bindGrid();
         });

     }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:33:20.687

我使用了以下示例，它运行良好 [http://www.aspsnippets.com/Articles/Bind-Dataset-to-ASPNet-GridView-using-jQuery-AJAX.aspx](http://www.aspsnippets.com/Articles/Bind-Dataset-to-ASPNet-GridView-using-jQuery-AJAX.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T06:27:20.413

我正在处理与她的 Jquery Ajax 方法相同的事情

函数获取详细信息（pk）{

```
 var paramList = '{"Foreignkey":"' + pk + '"}';
        alert(paramList);
        $.ajax({
            type: "POST",
            url: "GetData.aspx/getDetails",
            dataType: "json",
            contentType: "application/json",
            processData: false,
            data: paramList,
            success: function (msg) {
                alert('success');
                for (var i = 0; i < msg.d.length; i++)
                {
                    $("#NamesGridView").append("<tr><td>"+ msg.d.id+"</td><td>"+msg.d.GraduatedYear+"</td><td>"+msg.d.SchoolName+"</td></tr>");
                }
                //Show the Dialog
                OpenDialog_Details();
                //closeDialog_Details();
            },
            error: function (msg) {
                alert("error " + msg.responseText);
            }
        });
        return false;
    } 
```

这是网络方法

```
 [WebMethod]
    public static Details[] getDetails(string Foreignkey)
    {

        SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["RepeaterDBConnection"].ConnectionString);
        SqlCommand comm = new SqlCommand();
        DataTable dt = new DataTable();
        List<Details> list = new List<Details>();
        try
        {

            comm.Connection = con;
            comm.CommandType = CommandType.StoredProcedure;
            comm.CommandText = "[dbo].[GetDetail]";
            comm.Parameters.Add(new SqlParameter("@PIFK", SqlDbType.Int)).Value = Convert.ToInt32( Foreignkey);
            SqlDataAdapter da = new SqlDataAdapter(comm);
            da.Fill(dt);

            foreach (DataRow row in dt.Rows)
            {
                Details detobj = new Details();
                detobj.id = Convert.ToInt32( row["id"].ToString());
                detobj.GraduatedYear = row["GraduatedYear"].ToString();
                detobj.SchoolName = row["SchoolName"].ToString();
                list.Add(detobj);
            }
        }
        catch (SqlException Ex)
        {
            //lblResultMessage.Text = Ex.Message;
        }
        return list.ToArray();
    } 
```

这是我的班级 public class Details { private int _id;

```
 public int id
    {
        get { return _id; }
        set { _id = value; }
    }
    private string _GraduatedYear;

    public string GraduatedYear
    {
        get { return _GraduatedYear; }
        set { _GraduatedYear = value; }
    }
    private string _SchoolName;

    public string SchoolName
    {
        get { return _SchoolName; }
        set { _SchoolName = value; }
    }

} 
```

我希望它能给您提供解决方案的想法

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-30T09:17:57.833

公共 int id { 获取 { 返回 _id; } 设置 { _id = 值；} } 私人字符串 _GraduatedYear;

```
public string GraduatedYear
{
    get { return _GraduatedYear; }
    set { _GraduatedYear = value; }
}
private string _SchoolName;

public string SchoolName
{
    get { return _SchoolName; }
    set { _SchoolName = value; }
} 
```

}

# java - 正则表达式找不到字符串

> ID：10513255
> 
> 赞同：0
> 
> 时间：2012-05-09T09:24:38.197
> 
> 标签：java, regex

我遇到了这段代码的问题：由于某种原因，它总是无法匹配代码。

```
for (int i = 0; i < pluginList.size(); i++) {
    System.out.println("");
    String findMe = "plugins".concat(FILE_SEPARATOR).concat(pluginList.get(i));

    Pattern pattern = Pattern.compile("("+name.getPath()+")(.*)");
    Matcher matcher = pattern.matcher(findMe);

    // Check if the current plugin matches the string.
    if (matcher.find()) {
        return !pluginListMode;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:27:58.037

现在我们只能猜测，因为我们不知道`name.getPath()`会返回什么。

我怀疑它失败了，因为该字符串可能包含在正则表达式中具有特殊含义的字符。再试一次

```
Pattern pattern = Pattern.compile("("+Pattern.quote(name.getPath())+")(.*)"); 
```

看看会发生什么。

此外，这`(.*)`部分（甚至是`name.getPath()`结果周围的括号）似乎根本不重要，因为您没有对匹配结果本身做任何事情。在这一点上，问题是你为什么首先使用正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T09:46:52.047

你真正需要的是

```
return ("plugins"+FILE_SEPARATOR+pluginName).indexOf(name.getPath()) != -1; 
```

但是您的代码也没有任何意义，因为该`for`循环无法进入第二次迭代——它无条件返回。所以更有可能你需要这样的东西：

```
for (String pluginName : pluginList)
  if (("plugins"+FILE_SEPARATOR+pluginName).indexOf(name.getPath()) != -1)
    return false;
return true; 
```

# excel - 如果已输入数据，则保存时锁定单元格

> ID：10513260
> 
> 赞同：1
> 
> 时间：2012-05-09T09:24:55.970
> 
> 标签：excel, locking, vba

这是这个问题的后续，[Lock Cells after Data Entry](https://stackoverflow.com/questions/10396006/lock-cells-after-data-entry)。我从问这个问题取得了进展，但遇到了更多问题，所以我觉得我应该问一个新问题。工作簿由多个用户编辑。为了防止篡改以前的数据，一旦输入数据并保存文件，单元格就会被锁定。

我在代码中有几个小错误：

1.  如果用户选择`SaveAs`然后尝试保存现有文件通常的“您要替换此文件吗？” 对话框出现。如果用户选择否，则会出现运行时错误。我在下面的代码中突出显示了错误的位置，但我不确定如何修复它。

2.  如果用户已输入数据，则尝试退出并使用关闭时出现的保存对话框保存文件，文件已保存但数据未锁定。我一直在尝试调用我的主代码以在退出保存时锁定单元格，但我一直遇到参数而不是可选错误。

这是完整的代码：

```
Option Explicit
Const WelcomePage = "Macros"
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
'Written by Alistair Weir (alistair.weir@communitypharmacyscotland.org.uk, http://alistairweir.blogspot.co.uk/)

Dim ws As Worksheet
Dim wsActive As Worksheet
Dim vFilename As Variant
Dim bSaved As Boolean

'Turn off screen updating
With Application
    .EnableEvents = False
    .ScreenUpdating = False
End With

'Record active worksheet
Set wsActive = ActiveSheet

'Prompt for Save As
If SaveAsUI = True Then
    MsgBox "Are you sure you want to save? Data entered cannot be edited once the file has been saved. Press cancel on the next screen to edit your data or continue if you are sure it is correct.", vbCritical, "Are you sure?"

    vFilename = Application.GetSaveAsFilename("", fileFilter:="Excel Files (*.xls), *.xls")
    If CStr(vFilename) = "False" Then
        bSaved = False
    Else
        'Save the workbook using the supplied filename
        Call HideAllSheets
        '--> The vFilename Variant in the next line is the problem **
        '--> when trying to overwrite an existing file  **
        ThisWorkbook.SaveAs vFilename
        Application.RecentFiles.Add vFilename
        Call ShowAllSheets
        bSaved = True
    End If
Else
    'Save the workbook, prompt if normal save selected not save As
    Call HideAllSheets
    If MsgBox("Are you sure you want to save? Data entered cannot be edited after saving", vbYesNo, "Save?") = vbYes Then
        ThisWorkbook.Save
        Call ShowAllSheets
        bSaved = True
        Else
        Cancel = True
    End If
    Call ShowAllSheets
End If

'Restore file to where user was
wsActive.Activate
'Restore screen updates
With Application
    .ScreenUpdating = True
    .EnableEvents = True
End With

'Set application states appropriately
If bSaved Then
    ThisWorkbook.Saved = True
    Cancel = True
Else
    Cancel = True
End If

'Lock Cells before save if data has been entered
    Dim rpcell As Range
With ActiveSheet
    If bSaved = True Then
    .Unprotect Password:="oVc0obr02WpXeZGy"
    .Cells.Locked = False
    For Each rpcell In ActiveSheet.UsedRange
        If rpcell.Value = "" Then
            rpcell.Locked = False
        Else
            rpcell.Locked = True
        End If
    Next rpcell
    .Protect Password:="oVc0obr02WpXeZGy"
    Else
    MsgBox "The LogBook was not saved. You are free to edit the RP Log again", vbOKOnly, "LogBook Not Saved"
    End If
End With

End Sub

Private Sub Workbook_Open()
    Application.ScreenUpdating = False
    Call ShowAllSheets
    Application.ScreenUpdating = True
    ThisWorkbook.Saved = True
End Sub

'Called to hide all the sheets but enable macros page
Private Sub HideAllSheets()
    Dim ws As Worksheet
    Worksheets(WelcomePage).Visible = xlSheetVisible
    For Each ws In ThisWorkbook.Worksheets
        If Not ws.Name = WelcomePage Then ws.Visible = xlSheetVeryHidden
    Next ws
    Worksheets(WelcomePage).Activate
End Sub

'Called to show the data sheets when macros are enabled
Private Sub ShowAllSheets()
    Dim ws As Worksheet
    For Each ws In ThisWorkbook.Worksheets
        If Not ws.Name = WelcomePage Then ws.Visible = xlSheetVisible
    Next ws
    Worksheets(WelcomePage).Visible = xlSheetVeryHidden
End Sub 
```

谢谢 ：）

**编辑**

现在我正在通过绕过 excel 的默认“你想保存吗？”来解决问题 2。通过做这个：

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)

    If MsgBox("Are you sure you want to quit? Any unsaved changes will be lost.", vbYesNo, "Really quit?") = vbNo Then
    Cancel = True
    Else
    ThisWorkbook.Saved = True
    Application.Quit
    End If

End Sub 
```

我愿意接受更好方法的建议，但仍然没有解决第一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:56:57.060

一种可能性是在保存函数中编写自己的确认，如下所示：

```
Private Function SaveSheet(Optional fileName) As Boolean

HideAllSheets

If fileName = "" Then
    ThisWorkbook.Save
    SaveSheet = True
Else
    Application.DisplayAlerts = False

    If Dir(fileName) <> "" Then
        If MsgBox("Worksheet exists. Overwrite?", vbYesNo, "Exists") = vbNo Then Exit Function
    End If

    ThisWorkbook.saveAs fileName
    SaveSheet = True

    Application.DisplayAlerts = True
End If

ShowAllSheets

End Function 
```

并将您的原始代码更改为：

```
If SaveAsUI Then
    If MsgBox( _
        "Are you sure you want to save? Data entered cannot be edited once the file has been saved. " & _
        "Press cancel on the next screen to edit your data or continue if you are sure it is correct.", _
        vbYesNo, "Are you sure?" _
    ) = vbYes Then
        vFilename = Application.GetSaveAsFilename("", fileFilter:="Excel Files (*.xls), *.xls")

        If vFilename <> "" Then
            If SaveSheet(vFilename) Then bSaved = True
        End If
    End If
Else
    If MsgBox( _
        "Are you sure you want to save? Data entered cannot be edited after saving", _
        vbYesNo, "Save?" _
    ) = vbYes Then
        If SaveSheet("") Then bSaved = True
    End If
End If 
```

我还没有完全测试上述内容，但它应该会给你一些想法。

# c# - 如何使用带有 C# 的 ASP.Net 拆分网格标题

> ID：10513261
> 
> 赞同：0
> 
> 时间：2012-05-09T09:24:56.433
> 
> 标签：c#, asp.net

![在此处输入图像描述](../Images/4bd5c125be6bbdc2a72258daf246afe2.png)

第一个是我现有的网格视图，但我想拆分网格视图标题看起来像第二个网格视图图像下方。

![在此处输入图像描述](../Images/97ade67ef6bc9333d0caeefad9420f60.png)

这是我处理该输出的代码：

```
<div style="width: 100%">
<asp:GridView ID="GridView4" Font-Size="12px" runat="server" OnRowDataBound="gvSubClaims_RowDataBound" SkinID="GridView1" Width="100%">
 <Columns>
  <asp:TemplateField HeaderText="SubClaim#">
  <ItemTemplate>
   <asp:Label ID="lblSubCliamNo" runat="server" Text='<%# Eval("SubClaimNo")  %>'></asp:Label></ItemTemplate>
     <ItemStyle Width="10%" />
      </asp:TemplateField>
      <asp:TemplateField HeaderText="Features">
       <ItemTemplate>
       <asp:Label ID="lblFeatures" runat="server" Text='<%# Eval("Features") %>'></asp:Label></ItemTemplate>
       <ItemStyle Width="10%" />
       </asp:TemplateField>
       <asp:TemplateField HeaderText="Current Reverse">
       <ItemTemplate>
       <asp:Label ID="lblPolCoverage" runat="server" Text='<%# Eval("PolicyCoverage") %>'></asp:Label></ItemTemplate>
        <ItemStyle Width="10%" />
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Total Paid ($)">
        <ItemTemplate>
        <asp:Label ID="lblDamages" runat="server" Text='<%# Eval("Damage") %>'></asp:Label></ItemTemplate>
        <ItemStyle Width="10%" />
        </asp:TemplateField>
       <asp:TemplateField HeaderText="Recovery ($)">
       <ItemTemplate>
       <asp:Label ID="lblStatus" runat="server" Text='<%# Eval("SubClaimStatus") %>'></asp:Label></ItemTemplate>
       <ItemStyle Width="10%" />
       </asp:TemplateField>
      <asp:TemplateField HeaderText="Outstanding ($)">
       <ItemTemplate>
      <asp:Label ID="lblStatus" runat="server" Text='<%# Eval("SubClaimStatus") %>'></asp:Label></ItemTemplate>
      <ItemStyle Width="10%" />
       </asp:TemplateField>
       </Columns>
       </asp:GridView>
       </div> 
```

我可以更改/添加什么来达到预期的效果？

有人请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:34:53.887

如果您使用中继器而不是 GridView，您可以更好地控制它如何呈现为 HTML，例如

```
<asp:repeater ... >
<HeaderTemplate>
    <table>
        <tr>
            <th colspan="2">
            </th>
            <th colspan="4">
                Expense
            </th>
            <th colspan="4">
                Indemnity
            </th>
        </tr>
        <tr>
            <th>
                SubClaim
            </th>
            <th>
                Feature
            </th>
            <th>
                Current<br/>Reserve<br/>($)
            </th>
            ...
         </tr>
</HeaderTemplate>
<ItemTemplate>
    <tr>
        <td>
            <asp:Label ID="lblSubCliamNo" runat="server" Text='<%# Eval("SubClaimNo")  %>'></asp:Label>
        </td>
        <td>
             <asp:Label ID="lblFeatures" runat="server" Text='<%# Eval("Features") %>'></asp:Label>
        </td>
        ...
    </tr>
</ItemTemplate>
<FooterTemplate>
    </table>
</FooterTemplate>
</asp:repeater> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:31:00.773

我认为您可以通过在组标题中创建多行来实现这一点。

您将在 GridView 中找到有关[添加分组/多行标题的](http://dotnetarmy.blogspot.co.uk/2008/06/add-grouped-multiple-row-header-in.html)更多信息。

还有一篇很好的文章，但在 vb 中关于[在 gridview ASP.NET 中创建多行/组标题](http://redsouljaz.wordpress.com/2009/06/12/create-multiple-row-group-header-in-gridview-asp-net/)

# javascript - javascript代码中的模型属性

> ID：10513263
> 
> 赞同：1
> 
> 时间：2012-05-09T09:24:59.310
> 
> 标签：javascript, asp.net-mvc

我有以下`javascript`代码：

```
$(window).bind("scheduleComplete", (function (event, params) {

    var hallCount = "@Model.EventSchedules.Actual().Hall.Levels.Count";
    var level; 
    //other code

})); 
```

我只想在`if`语句为时绑定`true`：

```
if("@Model.EventSchedules.Count" !== "0")
{
 $(window).bind("scheduleComplete", (function (event, params) {

        var hallCount = "@Model.EventSchedules.Actual().Hall.Levels.Count";
        var level; 
        //other code

    }));
} 
```

`Model.EventSchedules.Count`equals `0`，但其中的代码仍然运行。
哪里有问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:41:37.630

我会向您推荐一种替代方法：

```
<script type="text/javascript">
    var count = @Html.Raw(Json.Encode(Model.EventSchedules.Actual().Hall.Levels.Count));
    if(count > 0) {
        $(window).bind("scheduleComplete", (function (event, params) {
            //other code
        }));
    }
</script> 
```

将呈现为：

```
<script type="text/javascript">
    var count = 5;
    if(count > 0) {
        $(window).bind("scheduleComplete", (function (event, params) {
            //other code
        }));
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:32:08.737

您正在使用需要完全匹配的 !== 运算符。如果您使用 != 它将使用类型强制，这可能会使其工作。如果是这样，您就知道存在打字问题。也许尝试不带引号并从那里开始工作。

您也可以在服务器端进行检查，仅在需要时输出 JS。

# jcs - 如何在 JCS（java 缓存系统）中进行最大匹配搜索

> ID：10513264
> 
> 赞同：0
> 
> 时间：2012-05-09T09:24:59.897
> 
> 标签：jcs

我正在开发一个使用 JCS 的应用程序。当 searchkey 是一个完整的字符串时，我确实知道如何从 catch 中检索数据。我需要在 JCS 中实现最大匹配搜索。

例如：缓存包含以下数据。

*   书号 | 书名
*   123 | EJB
*   321 | 头先Java
*   121 | Jsp 和 servlet
*   111 | 蚂蚁脚本

当用户只为书号输入 1 时，它应该获取所有书名以 1 开头的书名。即它应该列出

*   EJB
*   Jsp 和 servlet
*   蚂蚁脚本

这是我们在 sql 中使用 'like 和 %' 进行的那种搜索。

请帮助我。

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:40:09.873

您应该能够执行以下操作：

```
JCSAdminBean admin = new JCSAdminBean();
LinkedList<CacheElementInfo> cacheElements = admin.buildElementInfo("myCache");
for (CacheElementInfo e : cacheElements) {
    if (e.getKey().startsWith("1")) {
        //do something.. store it in a list?
    }
} 
```

试试看，让我知道这是否适合你。

# asp.net - 向客户端发送 XML 文件

> ID：10513274
> 
> 赞同：0
> 
> 时间：2012-05-09T09:25:46.720
> 
> 标签：asp.net, xml

我有一个需要由客户端下载的 XDocument 对象。此 xml 将在 page_load 上生成，然后作为下载发送给用户。

我无法弄清楚如何在没有实际文件的情况下将对象发送给客户端。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:12:50.727

如前所述，我检查[了另一个帖子](https://stackoverflow.com/questions/5806675/how-to-dynamically-creating-the-xml-file-content-and-sending-as-a-text-file-in)，不太一样，但足够接近。

```
Response.Clear(); 
Response.ContentType = "text/xml";
Response.AppendHeader("Content-Disposition","attachment;filename=" + DateTime.Now+".xml");
Response.Write(doc.ToString());
Response.End(); 
```

# iphone - UINavigationController 的通用右 UIBarButton

> ID：10513275
> 
> 赞同：2
> 
> 时间：2012-05-09T09:25:50.997
> 
> 标签：iphone, objective-c, ios

如何将通用右/左添加`UIBarButtonItem`到 a `UINavigationController`？我正在尝试使用相同的左右导航栏按钮制作一个基于导航的应用程序，`UIViewController` 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:32:44.727

创建一个基础 UIViewController

```
@interface BaseController : UIViewController
{

}
@end

@implementation BaseController
- (id)init
{
    //set the universal barbuttonitem
    self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:yourView] autorelease];
}
@end 
```

那么你所有的 viewController 都应该从 BaseController 扩展

完成了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:56:25.063

```
You can add the rightbarButtonItem in this way :-

UIBarButtonItem *btnName= [[[UIBarButtonItem alloc initWithTitle:@"btnTitle"   style:UIBarButtonItemStyleBordered target:self action:@selector(btnAction)]autorelease];         
self.navigationItem.rightBarButtonItem = btnName; 
```

# android - 合并膨胀

> ID：10513282
> 
> 赞同：4
> 
> 时间：2012-05-09T09:26:27.137
> 
> 标签：android, layout, merge, frame, inflate

嗨，我正在尝试使用`<merge>`标签来扩展我的布局，这是我的 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.osmgames.kartuves.LinesLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/lines" />

</merge> 
```

这是我的 LinesLayout.java：

```
public class LinesLayout extends FrameLayout {

    public LinesLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        super.onLayout(changed, l, t, r, b);
    }
    @Override
    public boolean onInterceptTouchEvent(MotionEvent event) {
        super.onInterceptTouchEvent(event);
        return false;
    }
} 
```

还有我的 main.java：

```
public class main extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }} 
```

所以我想将下面的 XML 膨胀到 main.xml。我怎样才能做到这一点？

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent">

    <ImageView   
         android:layout_width="40dp" 
         android:layout_height="40dp"
         android:layout_gravity="center" 
         android:layout_marginTop="75dp" 
         android:layout_marginRight="40dp"
         android:src="@drawable/line" />

    <ImageView   
         android:layout_width="40dp" 
         android:layout_height="40dp"
         android:layout_gravity="center" 
         android:layout_marginTop="75dp" 
         android:src="@drawable/line" />

    <ImageView   
         android:layout_width="40dp" 
         android:layout_height="40dp"
         android:layout_gravity="center" 
         android:layout_marginTop="75dp" 
         android:layout_marginLeft="40dp"
         android:src="@drawable/line"  />
</FrameLayout> 
```

这是我得到的日志：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.osmgames.kartuves/com.osmgames.kartuves.InGame}: android.view.InflateException: <merge /> can be used only with a valid ViewGroup root and attachToRoot=true
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method)

Caused by: android.view.InflateException: <merge /> can be used only with a valid ViewGroup root and attachToRoot=true
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at **com.osmgames.kartuves.InGame.onCreate(InGame.java:59)**
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
... 11 more 
```

InGame.java:59 是：

```
58 FrameLayout item = (FrameLayout)findViewById(R.id.lines);
59 View child = getLayoutInflater().inflate(R.layout.letters3, null);
60 item.addView(child); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:38:57.203

合并标签应该在膨胀的布局中使用，它在父 ViewGroup 中合并自身。

试试这个 ：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent">

    <com.osmgames.kartuves.LinesLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/lines" />

</FrameLayout > 
```

还有这个 ：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView   
         android:layout_width="40dp" 
         android:layout_height="40dp"
         android:layout_gravity="center" 
         android:layout_marginTop="75dp" 
         android:layout_marginRight="40dp"
         android:src="@drawable/line" />

    <ImageView   
         android:layout_width="40dp" 
         android:layout_height="40dp"
         android:layout_gravity="center" 
         android:layout_marginTop="75dp" 
         android:src="@drawable/line" />

    <ImageView   
         android:layout_width="40dp" 
         android:layout_height="40dp"
         android:layout_gravity="center" 
         android:layout_marginTop="75dp" 
         android:layout_marginLeft="40dp"
         android:src="@drawable/line" />
</merge> 
```

希望它会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:29:21.897

采用

```
 View headerView = View.inflate(this, R.layout.layout_name, null);
    lv.addHeaderView(headerView); 
```

膨胀你的布局，它会给你你的父布局，其中所有视图都存在，然后对它进行类型转换，或者如果你想添加然后直接将它添加到另一个布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-11T19:41:38.237

你应该更好地使用

```
58 FrameLayout item = (FrameLayout)findViewById(R.id.lines);
59 View child = getLayoutInflater().inflate(R.layout.letters3, item, false);
60 item.addView(child); 
```

或者你可以使用

```
58 FrameLayout item = (FrameLayout)findViewById(R.id.lines);
    59 View child = getLayoutInflater().inflate(R.layout.letters3, item, true); 
```

当你通过 true 时，它​​会自动为你做这些事情。

这将是一个更少的视图，而不是您添加的无用的 FrameLayout 来代替合并标记。

# java - 为什么要使用结果集！=null 它是否检查 null

> ID：10513288
> 
> 赞同：0
> 
> 时间：2012-05-09T09:26:37.813
> 
> 标签：java, jdbc

我有以下代码

```
if (rs != null)
{
  out.println("result set has got something");
  while (rs.next())
  { 
    //I am processing result set now
  }
}
else
{
  out.println("result set is empty");
} 
```

即使 rs 为空，它也会打印**"resultset has got something"**。为什么会这样，我如何检查空结果集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T09:31:48.630

您可以通过以下方式进行检查：

```
if(rs != null && rs.next()) {
    out.println("result set has got something");
    do {
        // do what you have to do
    } while (rs.next());
} else {
    out.println("result set is empty");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:36:26.493

作为查询结果返回的 JDBC ResultSet 对象永远不会为空，请阅读 javadoc。所以你检查的方式是错误的。您可以改用`ResultSet.next()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:43:47.057

一个`ResultSet`对象维护一个指向其当前数据行的游标 - 除非您的调用方法不能保证传递的结果集是通过特定查询执行语句生成的，然后使用处理空指针；

```
if(rs !=null && rs.next())
{
 ..
} 
```

是必不可少的 - 但如果你正在处理

```
ResultSet rs = stmt.executeQuery(..); 
```

那么就不需要进行Null点检查了，直接问ResultSet是否有数据即可；

```
String name=null;
while (rs.next()) 
{
 name =rs.getString(1);
} 
```

然后处理这样的值；

```
if(name !=null && name.length()>0)
{
 ..        
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-18T09:01:31.340

对于记录集，最好使用 Java 提供的三元运算符。例如：

假设您要将名称设置为用户对象 pojo。

```
myUser.setName(null != recordSet.getString("name") ? recordSet.getString("name") : "Guest"); 
```

希望这可以帮助。

# android - Android - 动画后如何与视图交互？

> ID：10513289
> 
> 赞同：2
> 
> 时间：2012-05-09T09:26:44.303
> 
> 标签：android, android-animation

我有一个使用[TranslateAnimation](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html)动画的视图：

```
TranslateAnimation translateAnim = new TranslateAnimation(fromX, toX, fromY, toY);
translateAnim.setDuration(SLIDING_SPEED);
translateAnim.setInterpolator(new BounceInterpolator());
translateAnim.setFillAfter(true);
mSlidingView.startAnimation(translateAnim); 
```

动画效果很好，但完成后我不能再点击视图了。相反，我仍然可以单击它以前的位置。

我在 StackOverflow 上搜索了类似的问题（[这里](https://stackoverflow.com/questions/7743903/clicking-a-view-on-translate-animation)、[这里](https://stackoverflow.com/questions/7509206/can-not-active-click-event-after-animation-of-the-view)和[这里](https://stackoverflow.com/questions/9182893/android-unable-to-click-the-bottom-textview-after-translate-animation-within-a)），但没有一个提供任何解决方案。我听说[ObjectAnimator](http://developer.android.com/reference/android/animation/ObjectAnimator.html#setPropertyName%28java.lang.String%29)解决了这个问题，但是我可以使用以前的 API 做些什么吗？（我不想依赖像[NineOldAndroids](https://github.com/JakeWharton/NineOldAndroids)这样的另一个第三方库来支持 pre-honeycomb 设备上的新动画 API）。哦，我试图使视图[无效](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)，但它并没有改变任何东西。

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:43:41.037

好吧，我想没有链接，但是您尝试过吗：（在 setFillAfter 之前）

```
translateAnim.setFillEnabled(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T13:39:00.297

在**API 11+**中，我们可以通过**ObjectAnimator**类来做到这一点。

在**API 10-**中，当我们翻译视图时，视觉视图将被翻译，但物理位置仍然在旧位置，在完成动画后更改翻译视图的边距可以解决问题。

# php - Yii命名空间的使用方法

> ID：10513290
> 
> 赞同：7
> 
> 时间：2012-05-09T09:26:50.933
> 
> 标签：php, yii

我对从 Yii 文档中理解命名空间感到困惑，因为它们不足以理解，因为我是 Yii 框架的新手，请给出一些简单而详细的示例，以便我理解它的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-23T14:46:07.513

您可以尝试阅读此文档[http://yiiframework.ru/doc/guide/en/basics.namespace](http://yiiframework.ru/doc/guide/en/basics.namespace) 一般来说 Yii 命名空间 - 它是文件夹的别名。IE

```
 'aliases' => array(
            'frontend' => dirname(__FILE__) . '/../..' . '/frontend',
            'common' => dirname(__FILE__) . '/../..' . '/common',
            'backend' => dirname(__FILE__) . '/../..' . '/backend',
            'vendor' => dirname(__FILE__) . '/../..' . '/common/lib/vendor'
  ),

  ...

  'import' => array(
           'common.extensions.components.*',
           'common.components.*',
           'common.helpers.*',
           'common.models.*',
           'application.controllers.*',

// In result "common" = dirname(__FILE__) . '/../..' . '/common' 
```

# ios - 在 iOS 中重命名类

> ID：10513291
> 
> 赞同：2
> 
> 时间：2012-05-09T09:27:11.220
> 
> 标签：ios, xcode, refactoring, rename, file-rename

我正在研究 Xcode 4.3.2 我想重命名我的类，所以我使用了**refactor>rename**，但在那之后我改变了主意并决定回到旧名称。但是当我再次做之前做过的同样的事情时，会出现一个警告对话框，上面写着：

**yourclass.h 不是此工作区中任何目标的构建阶段的一部分，因此无法重构。将文件添加到此工作区中目标的构建阶段，或在另一个文件中进行选择。**

什么是构建阶段？我怎么解决这个问题？

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:48:35.600

删除项目派生数据可能是值得的

1.  Organizer --> Projects --> 点击相关项目的删除派生数据按钮

2.  退出 XCode

3.  打开 XCode

4.  构建项目。这将重新索引您的项目，并且已知可以修复各种环境问题，例如

码感

自动完成和

**编译器目标**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T09:31:56.157

在 Xcode 中，在左侧文件树的顶部选择您的项目。

从那里选择您的目标，然后单击“构建阶段”选项卡。确保您要重命名的类的 .m 文件列在“编译源”下

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T09:31:25.720

您可以在此处检查您是否有该文件：

**目标**=> 选择作为您的方案尝试运行的选择目标的目标 => 选项卡**构建阶段**=>**编译源**

检查那里是否有问题（如红色文件）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T09:41:56.883

当您通过重构选项重命名类时，xCode 通常会拍摄快照。您可以转到文件 > 恢复 SnapShote .. 并选择要检索到的快照，您将取回所有更改的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-06T11:48:27.540

就我而言，.m 文件位于编译源下。我确实清除了项目派生数据并重新启动了 xcode，但无济于事。

不过我发现，尝试重构 .m 文件中的特定属性是可行的，并在标题和其余项目引用中重命名了该属性。

# java - 在 WAR 中打包项目时修改 Servlet 3.0 中的 WebInitParam

> ID：10513292
> 
> 赞同：4
> 
> 时间：2012-05-09T09:27:11.540
> 
> 标签：java, servlets, servlet-3.0

在我的项目中，我使用的是 Servlet 3.0，并且我尝试使用注释。

要初始化数据库的连接参数，我在我的 servlet 中使用它：

```
@WebServlet(name = "FrontServlet", urlPatterns = {"/index"},
        initParams = {
        @WebInitParam(name = "userDB", value = "root"),
        @WebInitParam(name = "passwordDB", value = "*****")}) 
```

现在，当我将项目打包到 WAR 中时，我没有 web.xml，因此我无法像以前使用旧 servlet 版本那样编辑 init 参数。

我的问题是，当项目打包在 WAR 中时，我可以编辑我的 init 参数吗？如果是怎么办？否则我应该使用什么方法来存储我的初始化参数并能够在 WAR 中修改它们？

如果可能的话，我想避免使用所有 URL 模式等重新创建整个 web.xml ......

编辑 ：

最后我保留了：

```
@WebServlet(name = "FrontServlet", urlPatterns = {"/index"}) 
```

我使用[Properties](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)加载数据库参数，访问配置文件`getClass().getClassLoader().getResourceAsStream("servlet/config/config.ini")`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:29:59.243

在 Servlet 3.0 中，注释提供了默认值，但这些可以在 web.xml 中被覆盖，因此您可以将以下内容添加到 web.xml 以更改参数。

```
 <servlet>
    <servlet-name>FrontServlet</servlet-name>
    <servlet-class>fully.qualified.ClassName</servlet-class>
    <init-param>
      <param-name>passwordDB</param-name>
      <param-value>NewValue</param-value>
    </init-param>
  </servlet> 
```

至少在Tomcat中，你需要指定类名和Servlet名。无需进一步研究合并代码（自从我研究它以来已经有一段时间了），其中一个就足够了。现在，您需要同时使用两者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T09:42:17.163

AFAIK 没有在运行时修改初始化参数的标准方法。此外，将配置放在那里是一种不好的做法，尤其是以明文形式放在那里的数据库凭据。

通常最佳实践是将配置放在外部文件中。它可能是一些自定义属性或 xml 文件。

对于数据库连接，通常使用 JNDI。所以基本上在代码中你会寻找一个 JNDI 资源，而 JNDI 本身是在容器级别配置的。谷歌找到很多如何通过 JNDI 为 Jetty、Tomcat、JBoss 等配置数据库连接的示例。

# magento - 在 Magento 中为类别设置规范标签

> ID：10513295
> 
> 赞同：1
> 
> 时间：2012-05-09T09:27:14.863
> 
> 标签：magento, magento-1.6, canonical-link

这可能吗，或者是否可以添加一些代码，以便我可以为 Magento 中的类别设置不同的规范 URL？我可以很好地设置产品。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T18:54:41.813

刚刚在搜索有关规范 URL 支持的信息时发现了这个问题。

我不确定是哪个版本添加了这个（在发行说明中找不到任何内容），但现在 1.7.0.2 开箱即用地支持它。

在管理员中：系统 >> 配置 >> 目录 >> 搜索引擎优化

最后两个选项启用类别和产品的规范 URL。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T10:44:05.273

开箱即用，我对此一无所知。您将需要开发或构建自己的方法来执行此操作。

当您在类别页面上时，您需要在 layout.xml 文件中创建一个条目，以便在页面的 head 部分放置一个附加模板（这可能位于 catalog_Category_view 块中）。您可能还需要一个视图文件和一个 Block 对象来获取您要使用的 URL（从技术上讲，您可以将它放在视图文件中，但是拥有块对象更像是“Magento”）。

您的 layout.xml 块看起来像这样

```
<catalog_category_view>
    <reference name="head">
        <block type="canonical/canonical" name="head_url" as="head_url" template="ocaff/canonical/head.phtml" />
    </reference>
</catalog_category_view> 
```

该块引用了一个 head.phtml 文件。该文件将包含：

```
<link rel="canonical" href="<?php echo $this->getCanonicalUrl() ?>" /> 
```

这会回调一个块对象，该对象具有一个名为 getCanonicalUrl() 的函数。在此功能中，您将找到并确定您想要的规范。很可能您希望它成为 URL 键，但您可能会想到其他逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:49:49.563

Magento 从 1.5 开始支持产品和类别页面的规范 url

在管理员中：系统 >> 配置 >> 目录 >> 搜索引擎优化

# ios5 - 在 xcode 4.3.2 中将 ios 部署目标从 5.1 升级到 5.1.1

> ID：10513303
> 
> 赞同：5
> 
> 时间：2012-05-09T09:27:59.157
> 
> 标签：ios5, xcode4.3

如何将我的 ios 部署目标版本从 5.1 升级到 5.1.1。我已经在我的 iPad 上安装了 5.1.1，但是在 xcode 部署目标中，我无法从（项目->信息->部署目标->ios 开发目标和目标->摘要->的下拉列表中获取最新版本ios应用程序目标->部署目标）。但是在这个下拉列表中，我没有得到最新的 ios 版本。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T23:28:06.020

我今天遇到了这个问题，当我试图从 5.1.1 上的手机中符号化崩溃报告时。地址不会符号化，因为 symbolicatecrash.pl 找不到 5.1.1 的符号。Apple 的解决方案在这里：基本上插入一个 5.1.1 的手机，Xcode 将加载符号。

[https://discussions.apple.com/docs/DOC-3461/diff?secondVersionNumber=8](https://discussions.apple.com/docs/DOC-3461/diff?secondVersionNumber=8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T07:40:03.267

好的，我迟到了，但这就是我的问题。我的 xCode 在 iOS 5.1.1 (9B206) 上调试得很好，但是，我的另一部 iPhone 正在运行 iOS 5.1.1 (9B208)，因此您面临上述问题。

解决方案是将调试符号从工作版本复制到非工作版本。这是如何

*   启用显示隐藏文件
*   导航`~/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/System/Library/Caches/com.apple.dyld`
*   复制可用的三个文件
*   导航`~/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B208)/Symbols/System/Library/Caches/com.apple.dyld`
*   粘贴文件。
*   卸下设备并重新连接。

非常适合我.. =)

# javascript - 在 FF3.x 中使用 iframe 重新加载页面

> ID：10513304
> 
> 赞同：0
> 
> 时间：2012-05-09T09:28:00.873
> 
> 标签：javascript, html, firefox

我有一个包含 iframe 的 jsp 文件。

```
<html>
<body>
<iframe name="appcontentframe" id="appcontentframe" src="something.jsp" frameborder="0"
                  style="position:absolute; top:0px; bottom:0px; border:0px;">
<button name="tst" onclick="parent.location.reload();" > Test</button>
</iframe>
</body>
</html> 
```

现在在 javascript 中，我动态地将 iframe 的 src 更改为 other.jsp。在 iframe 页面中，我有一个按钮

```
<button name="tst" onclick="parent.location.reload();" > Test</button> 
```

重新加载整个页面。当我单击此按钮时，在所有其他浏览器中，iframe 包含硬编码为“something.jsp”的 src，但在 FF 3.x 系列中，它加载“other.jsp”。但是当我按下浏览器的刷新时，它会加载“something.jsp”。我的要求是，它也应该在单击“测试”按钮时加载 somthing.jsp。

# android - Android - 动态添加多个视图

> ID：10513307
> 
> 赞同：0
> 
> 时间：2012-05-09T09:28:08.373
> 
> 标签：android, layout, dynamic

在我的代码中，我在图片下方添加了图片和文字。我有一个带有相对布局的 XML，它包含一个 ImageView 和一个 TextView。我动态地扩展了这个 xml 布局并将其添加到根 XML 中的 LinearLayout 中。我面临的问题是，如果我添加更多屏幕可以容纳（宽度）的图片，最后一张图片会变小。我希望能够拥有相同的结构并添加一个新行，例如我希望每行最多有 4 张图片，我该如何实现？

下面是我的根 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content">
<TextView 
    android:id="@+id/text"
    android:text="Friends who likes this:"
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:layout_centerHorizontal="true"/>
<LinearLayout 
    android:id="@+id/wrapper"
    android:layout_below="@+id/text"
    android:layout_marginTop="5dip"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:orientation="horizontal"/>  
</RelativeLayout> 
```

这是我的 xml 布局，其中有 imageview 和 textview：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:id="@+id/root"
android:layout_width="fill_parent"
android:layout_height="wrap_content">
<ImageView 
    android:id="@+id/image"
    android:layout_width="35dip"
    android:layout_height="35dip"
    android:layout_marginLeft="3dip"
    android:src="@drawable/default_profile_picture"/>
<TextView 
    android:id="@+id/username"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/image"
    android:layout_marginTop="2dip"
    android:layout_marginLeft="3dip"
    android:textSize="9sp"
    android:text="Damian M."/>
</RelativeLayout> 
```

和Java代码膨胀这个：

```
LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate(R.layout.likes_view, this, true);
    LinearLayout wrapper = (LinearLayout) findViewById(R.id.wrapper);
    TextView text = (TextView) findViewById(R.id.text);
    text.setTypeface(tf);
    if(users.isEmpty()){
        text.setVisibility(View.INVISIBLE);
    }

    RelativeLayout friendsView;
    ImageView image;
    TextView username;
    for(User user : users){
        friendsView = (RelativeLayout) View.inflate(ctx, R.layout.likes_view_friends, null);
        image = (ImageView) friendsView.findViewById(R.id.image);
        if(user.getImage() != null){
            image.setImageBitmap(user.getImage());
        }
        username = (TextView) friendsView.findViewById(R.id.username);
        username.setTypeface(tf);
        String firstLetterLastName = user.getLastName().substring(0,1);
        StringBuilder dotLastName = new StringBuilder(firstLetterLastName).append(".");         
        username.setText(user.getFirstName() + " " + dotLastName.toString());
        wrapper.addView(friendsView);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:34:09.470

考虑使用[`GridView`](http://developer.android.com/reference/android/widget/GridView.html). Android 开发人员资源[Hello Views提供了一个教程](http://developer.android.com/resources/tutorials/views/hello-gridview.html)

# vba - VBA 性能问题 - 执行任务前检查

> ID：10513308
> 
> 赞同：1
> 
> 时间：2012-05-09T09:28:09.363
> 
> 标签：vba, excel

我的 Excel 工作簿中有一些性能问题。我有 2 个不同的工作表：

*   第一张表有很多信息
*   第二张表只显示有用的东西（对于不每天使用它的人）。

在第二张纸上，我需要检查排序函数中是否标记了任何行，目前我在 VBA 中这样做：

```
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=1
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=2
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=3
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=4
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=5
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=6
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=7
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=8
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=9
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=10
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=11
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=12
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=13
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=14
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=15
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=16
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=17
ActiveSheet.Range("$A$12:$R$132").AutoFilter Field:=18 
```

与我正在执行的任务相比，这需要太多时间。我对 VBA 很陌生，我想知道是否有更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:54:30.367

如果您只想删除自动过滤器，可以使用：

```
ActiveSheet.AutoFilterMode = False 
```

如果您想在函数运行后移除过滤器并重新打开，那就更复杂了。

当与 VBA 中的工作表交互时，请确保使用它来使您的代码运行得更快：

```
Application.ScreenUpdating = False
'do your stuff, like turn autofilter off
'and when you are done:
Application.ScreenUpdating = True 
```

# c# - &&= 在 C# 中？（布尔表达式）

> ID：10513309
> 
> 赞同：10
> 
> 时间：2012-05-09T09:28:11.977
> 
> 标签：c#, boolean-operations

> **可能重复：**
> [为什么没有 ||= 或 &&= 运算符？](https://stackoverflow.com/questions/6346001/why-are-there-no-or-operators)

纯属偶然，我今天发现

```
 a &= GetBool(); 
```

不一样

```
 a = a && GetBool(); 
```

我一定误解了很多年。在第一个示例中，`GetBool()`即使“a”为假，也会执行“”。在第二个，它不是。

有什么可以在 C# 中实现类似“&&=”的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T09:39:06.350

> 有什么可以在 C# 中实现类似“&&=”的东西吗？

嗯，你可以写

```
a = a && getBool(); 
```

相反......老实说，我想不出很多我真的*想做不同的事情。*即使是上述内容也很少见，IME。

没有为`&&`, `||`or定义复合赋值运算符`??`（这是明显的“短路”运算符）。有关复合赋值运算符的完整列表，请参见 C# 4 规范的第 7.17 节，有关复合赋值的详细信息，请参见第 7.17.2*节*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T09:37:29.033

从[文档](http://msdn.microsoft.com/en-us/library/e669ax02%28VS.80%29.aspx)中：

> 使用 &= 赋值运算符的表达式，例如
> 
> x &= y
> 
> 相当于
> 
> x = x & y
> 
> 除了 x 只被评估一次。& 运算符对整数操作数执行按位逻辑与运算，对布尔操作数执行逻辑与运算。

我会说，为了避免在不必要时评估 y，请使用

```
x = x && y 
```

并避免对 x 进行两次评估（无论这意味着什么），请使用

```
x &= y 
```

你不能把两者结合起来。

微优化（至少对于理论上的情况），它将是：

```
if (x) x = y; 
```

如果 x 已经是 ，则无需执行任何操作`false`。

# amazon-ec2 - 与 RabbitMQ 相比，Amazon SQS 的性能较慢

> ID：10513317
> 
> 赞同：7
> 
> 时间：2012-05-09T09:28:43.843
> 
> 标签：amazon-ec2, rabbitmq, amazon-sqs

我想在我的 Web 应用程序中集成一个消息队列中间层。我测试了 Rabbitmq 和 Amazon SQS，但发现 Amazon SQS 很慢。我在 Amazon SQS 中获得 80 个请求/秒，而在 Rabbitmq 中获得 2000 个请求/秒。我问这个问题是因为我对 Amazon SQS 更感兴趣，因为我将 Amazon 的所有服务用于我的 Web 应用程序。谁能告诉我为什么这么慢？或者，如果有人对 Amazon SQS 有任何好的基准，您可以分享一下吗？任何帮助都将得到回报。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-18T05:53:59.353

这里要记住的一件事是，SQS 正在跨多个 AZ 复制您的数据。与单个 Rabbit 或其他 MQ 实现相比，这将增加时间复杂度。

如果您的单个 RabbitMQ 实例出现故障，您是否可以处理无法处理消息或可能丢失数据？如果是，您可能不需要复制甚至磁盘持久性。但我猜大多数用例都会关心，因此，SQS 提供了一个非常不干涉的分布式 MQ 解决方案，从理论上讲，它与单点故障隔离。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T13:10:14.543

根据[这篇文章](http://notes.variogr.am/post/67710296/replacing-amazon-sqs-with-something-faster-and-cheaper)，您可以在 Amazon AWS (EC2) 上运行 RabbitMQ，它会更快并且可能更便宜，每秒有一条消息和财务比较。RabbitMQ[网站上还有其他一些操作指南](http://www.rabbitmq.com/how.html)

# javascript - 带有回传的 MVC 上传（或者它可能被称为回调）

> ID：10513320
> 
> 赞同：0
> 
> 时间：2012-05-09T09:28:51.920
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, razor

我正在使用 MVC 上传一些文件。以下代码工作正常，但我想从服务器返回一些信息（例如消息或 ID）。我想做的很简单，但我担心我没有说清楚。有人可以帮忙吗？

看法

```
 @using (Html.BeginForm("AddFileX", "Upload", FormMethod.Post, new { enctype = "multipart/form-data" }))
     {
         <input type="file" name="files" multiple="true" />
         <input id="submit" type="submit" value="Upload" />
     } 
```

控制器

```
 [HttpPost]
    public ActionResult AddFileX(IEnumerable<HttpPostedFileBase> files)
    {
        foreach (var file in files)
        {
            if (file.ContentLength > 0)
            {
                var fileName = Path.GetFileName(file.FileName);
                var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
                file.SaveAs(path);
            }
        }
        // I would like to return a message or an ID of something
        // (eg "you are about to overwrite your files" or the ID of something not shown here)
        return View("IdxUpload");  // This line probably needs to be changed
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:41:48.747

查看这篇 Scott Hanselman 文章的底部。他基本上演示了如何将有关文件上传状态的信息发送回用户。特别是，他创建了一个 ViewModel 来保存 fileUpload 结果，根据每个文件的上传状态创建一个结果列表，然后通过将信息传递给要呈现的 View 将信息发送回用户。

[http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx](http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx)

**编辑：**

如果您希望在上传时提示用户确认（如果文件已经存在），您可以：

(a) 使用 javascript ajax 调用来检查文件是否存在并在发布之前提示用户 - 或 -

(b) 允许用户提交，将文件保存到临时位置，在另一个视图中提示用户确认，如果用户确认则处理文件。

示例 (a)：

[控制器]

```
public ActionResult AddFileForm() {
   return View();
}

[HttpPost]
public ActionResult AddFileX(IEnumerable<HttpPostedFileBase> files) {
   // do what you need to save your files and/or update your db
   foreach (var file in files) {
      if (file.ContentLength > 0) {
         var fileName = Path.GetFileName(file.FileName);
         var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
         file.SaveAs(path);
      }
   }

   // collect the updated file ids and send to View to render (should prob use Strongly typed class(es))
   string[] results = {"123", "456", "789"};

   return View(results);
}

[HttpPost]
public JsonResult FileExists(List<string> filelist) {
   //check if file(s) exist given filename 

   // return ids for files that already exist on your system
   string[] results = {"123", "", "789"};
   return Json(results);
} 
```

[查看] AddFileForm

```
@using (Html.BeginForm("AddFileX", "File", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
   <input id="f1" type="file" name="files" multiple="true" />
   <input id="f2" type="file" name="files" multiple="true" />
   <input id="overwrite" type="hidden" value="false" />
   <input id="submit" type="submit" value="Upload" />
}

<script>
   $(document).ready(function () {
      $('#submit').click(function (e) {
         if ($('#overwrite').val() == 'true')
            return; //proceed w/ submit

         e.preventDefault();

         // collect filenames of proposed file updates
         var files = [];
         $('input[type=file]').each(function () {
            var filename = $(this).val();
            files.push(filename);
         });

         // send request to check if files exist
         $.ajax({
            type: "POST",
            url: "/File/FileExists",
            data: { filelist: files },
            success: function (data) {
               confirmUpload(data);
            },
            traditional: true
         });
      });
   });

   function confirmUpload(results) {
      var existing = false;
      $(results).each(function () {
         var fid = $(this)[0];
         if (fid.length > 0) {
            existing = true; //file exists on Server, fid returned.

            //do stuff..highlight table row..etc
         }
      });

      if (existing) {
         //do whatever to request confirmation, show a message div, etc
         var answer = confirm("Overwrite files?");
         if (answer) {
            // if confirmed, set flag submit form
            $('#overwrite').val('true');
            $('#submit').click();   //$('form').submit() - unreliable
         }
      }
   }
</script> 
```

希望这能给你一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T17:12:17.967

如果您不想使用 ajax 文件上传插件，您可以做一件非常简单的事情。

假设您拥有文件上传元素的视图名为 view1，因此当视图 1 发布到操作方法时，请检查文件是否已上传或已经存在（这部分我认为您已经完成）

接下来在 viewbag 中添加一条消息，如下所示 ViewData.Message = "Files has been loaded"; 并返回相同的视图

在您的视图中的任何地方添加一行（最好在最后）。@ViewData.Message。这样，您想向用户显示的任何消息都将显示给用户

# windows-phone-7 - Fire ManipulationStarted 在 WP7 中手动启动

> ID：10513321
> 
> 赞同：10
> 
> 时间：2012-05-09T09:28:52.913
> 
> 标签：windows-phone-7

我在 WP7 中有一个 webscrollview，它最初没有焦点（内容是 hittestVisible，因此带走了滚动查看器 hittestvisibility ）。当我将其内容的可见性设置为 false 时，我可以滚动滚动查看器，但只有在抬起手指并再次放回它之后。我真的希望焦点转移，然后重新应用焦点，以便我可以在滚动视图获得焦点后滑动，而不是等待下一个操作启动事件触发。这是我的代码：

```
<UserControl 
x:Class="WTFApp.Resources.ViewControllers.DetailedItemContentControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:local="clr-namespace:EiBaseApi.Animation;assembly=EiBaseApi"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="480"
shell:SystemTray.IsVisible="True" >

<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="10"/>
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid.Resources>
        <Storyboard x:Name="MediatedListBoxContentAnimator">
            <DoubleAnimation x:Name="MediatedAnimation"
                             Storyboard.TargetName="WebScrollViewMediator"
                             Storyboard.TargetProperty="ScrollableWidthMultiplier" >
            </DoubleAnimation>
        </Storyboard>

    </Grid.Resources>

    <ScrollViewer x:Name="Scroller"
                  HorizontalScrollBarVisibility="Auto" 
                  VerticalScrollBarVisibility="Disabled"
                  ManipulationMode="Control"
                  Grid.Row="1" 
                  Grid.RowSpan="2" >
        <StackPanel Name="WebScrollView" Orientation="Horizontal">
            <UserControl Name="LeftContentControl"   MinWidth="480" />
            <UserControl Name="MiddleContentControl" MinWidth="480" />
            <UserControl Name="RightContentControl"  MinWidth="480" />
        </StackPanel>
    </ScrollViewer>
    <local:ScrollableItemAnimationMediator x:Name="WebScrollViewMediator" 
                                           ScrollViewer="{Binding ElementName=Scroller}"/>        
</Grid> 
```

在 C# 中：

```
protected override void TouchFrameDelta( object sender, TouchFrameEventArgs e )
    {
        if ( UserManipulating == ManipulationState.ManipulationStopped )
        {
            UserManipulating = ManipulationState.ManipulationStarted;
            ManipulationStartingPoint = e.GetPrimaryTouchPoint( null ).Position;
        }
        //if we are already manipulating the scrollviewer, we do nothing
        if ( UserManipulating != ManipulationState.ManipulationStarted )
        {
            return;
        }
        TouchPoint touchPoint = e.GetPrimaryTouchPoint( null );
        float differenceStart = ( float )( touchPoint.Position.X - ManipulationStartingPoint.X );
        if ( Math.Abs( differenceStart ) >= 25 )
        {
            if ( BrowserListIsHitTestVisible )
            {
                BrowserListIsHitTestVisible = false;
                MiddleContentControl.Focus( );
                MiddleContentControl.UpdateLayout( );
                return;
            }

            float differenceDelta = ( float ) ( touchPoint.Position.X - ManipulationDeltaPoint.X );
            if ( touchPoint.Action == TouchAction.Up )
            {                    
                UserManipulating = ManipulationState.ManipilatingScrollViewCompleted;
                OnManipulationCompleted( differenceDelta );
            }                          
        }
        ManipulationDeltaPoint = touchPoint.Position;      
    } 
```

TouchFrameDelta 是一个 Touch.FrameReported 事件。有谁知道为什么这不起作用，以及如何解决？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:39:25.757

只是为了向您澄清，`ManipulationStarted`（和 Completed）不能手动触发，因为它们的 EventArgs 是密封的，没有任何公共构造函数。

你所要求的，不是我认为可能的。由于您的子项目最初不支持任何交互，因此即使您`IsHitTestVisible`在执行另一个事件之前进行了设置，事件也不会被冒泡到它上面。

我看不到你到底想在这里存档什么，但是我不建议在 7.0/7.5 中使用滚动和 WebBrowser，因为该控件的功能非常有限。

# android - 关于反向地理编码的 XML 解析

> ID：10513322
> 
> 赞同：0
> 
> 时间：2012-05-09T09:29:00.633
> 
> 标签：android, xml, eclipse, sax, reverse-geocoding

我正在尝试使用谷歌地图对我的位置进行反向地理编码，以检索我当前位置的街道名称，也许还有邮政编码。我尝试了许多使用本地化的项目，但我认为我的国家总是让它返回一个空值（我来自新加坡）。

使用 XML，我有点不确定我应该如何解析从谷歌地图获得的文件。

`serverAddress = new URL("http://maps.google.com/maps/geo?q=" + Double.toString(loc.getLatitude()) + "," + Double.toString(loc.getLongitude()) + "&output=xml&oe=utf8&sensor=true&key=Hidden");`

谁能给我一个前进的方向？我应该使用 Document 函数保存然后继续使用 SAX 解析文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:37:14.573

试试这个：

```
 String urlStr = "http://maps.google.com/maps/geo?q=" + lat + "," + lon + "&output=json&sensor=false";
  String response = "";
  List<Address> results = new ArrayList<Address>();
  HttpClient client = new DefaultHttpClient();

  Log.d("ReverseGeocode", urlStr);
  try {
         HttpResponse hr = client.execute(new HttpGet(urlStr));
         HttpEntity entity = hr.getEntity();

         BufferedReader br = new BufferedReader(new InputStreamReader(entity.getContent()));

         String buff = null;
         while ((buff = br.readLine()) != null)
            response += buff;
          } catch (IOException e) {
              e.printStackTrace();
       } 
```

有关 ReverseGeocode 的更多详细信息，请参见此[示例](http://code.google.com/p/android/issues/attachmentText?id=8816&aid=-9179841478848829245&name=ReverseGeocode.java&token=5b4fa0ac90429947339cf4740e3d66a3)

# svn - 如何远程访问我的 visualsvn 服务器

> ID：10513324
> 
> 赞同：5
> 
> 时间：2012-05-09T09:29:08.580
> 
> 标签：svn, windows-server-2008-r2, visualsvn-server, windows-server

我目前在 Windows Server 2008 R2 x64 机器上运行 VisualSVN Server Enterprise，并且在本地安装和设置它没有问题。我需要为英国的用户提供远程访问权限，并且想知道这是如何在 Windows Server 上完成的。我认为他将使用 https 访问它，但我不知道我需要在本地做什么才能授予远程访问权限。任何帮助或方向将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T09:43:22.190

首先，您能否检查一下它正在侦听的端口和 IP 上的 Visual SVN：

为此，请转到开始 > VisualSVN 服务器管理器 > 右键单击​​ VisualSVN 服务器（本地）> 属性

检查网络，Servername 应该是服务器的**公共 ip 地址**。

您可以在 www.whatsmyip.org 上找到您的公共 IP

当您更改它时，请尝试服务器 ip 和端口，如果它有效。

例如： [https://YourPublicIP:YourPort/svn/](https://YourPublicIP:YourPort/svn/)

通常，VisualSVN 采用端口：8443 并为 IIS 保留 443。

如果您无法连接到您的公共 IP 和 SVN，最好的办法是检查您的防火墙设置。

**你的服务器之前有防火墙吗？如果是，打开 VisualSVN 使用的端口？** **您的 windows 2008 防火墙是否绕过此端口？**

如何更改 Windows 2008 上的防火墙设置：http: [//www.windowsnetworking.com/articles_tutorials/configure-Windows-Server-2008-advanced-firewall-MMC-snap-in.html](http://www.windowsnetworking.com/articles_tutorials/configure-Windows-Server-2008-advanced-firewall-MMC-snap-in.html)

# c - C - 释放指向指针的指针

> ID：10513326
> 
> 赞同：4
> 
> 时间：2012-05-09T09:29:12.740
> 
> 标签：c, pointers, malloc, free

在我的代码中，我分配了一些需要释放的二维数组。然而，每次我认为我已经掌握了指针的概念时，它们总是让我感到惊讶，因为它们没有按照我的期望去做；）

那么谁能告诉我如何处理这种情况？：

这就是我为指针分配内存的方式：

```
typedef struct HRTF_ {
  kiss_fft_cpx freqDataL[NFREQ]
  kiss_fft_cpx freqDataR[NFREQ]
  int nrSamples;
  char* fname;
} HRTF;

HRTF **_pHRTFs = NUL;
int _nHRTFs = 512;

_pHRTFs = (HRTF**) malloc( sizeof(HRTF*) *_nHRTFs );

int i = _nHRTFs;
while( i > 0 )
  _pHRTFs[--i] = (HRTF*) malloc( sizeof( HRTF ) );

// Load data into HRTF struct 
```

这就是我认为我应该释放已用内存的方式：

```
if( _pHRTFs != NULL )
{
  __DEBUG( "Free mem used for HRTFs" );
  for( i = 0; i < _nHRTFs; ++i )
  {
    if( _pHRTFs[i] != NULL )
    {
      char buf[64];
      sprintf( buf, "Freeing mem for HRTF #%d", i );
      __DEBUG( buf );
      free( _pHRTFs[i] );
    }
  }
  __DEBUG( "Free array containing HRTFs" );
  free( _pHRTFs );
} 
```

释放个人`_pHRTFs[i]`的作品，`__DEBUG`打印最后一条语句，但最后一条`free( _pHRTFs )`给我一个分段错误。为什么？

**没关系**- 在最后一个之后添加调试语句`free( _pHRTFs )`表明此代码实际上正在工作，而我的问题出在其他地方.. 感谢您的时间！

乔纳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:06:07.500

代码没问题。我试过运行它，它工作正常。下面是我测试的代码（我用 int 替换了未知的数据类型）和我得到的输出表明这里没有错。您得到的错误是因为其他原因。

```
#include <stdio.h>
#include <stdlib.h>

typedef struct HRTF_ {
      int freqDataL[10];
      int freqDataR[10];
      int nrSamples;
      char* fname;
} HRTF;

HRTF **_pHRTFs = NULL;
int _nHRTFs = 512;

int main(){
    printf("allocatingi\n");
    _pHRTFs = (HRTF**) malloc( sizeof(HRTF*) *_nHRTFs );

    int i = _nHRTFs;
    while( i > 0 )
          _pHRTFs[--i] = (HRTF*) malloc( sizeof( HRTF ) );

    printf("Allocation complete. Now deallocating\n");
    for( i = 0; i < _nHRTFs; ++i )
    {
        if( _pHRTFs[i] != NULL )
        {
            char buf[64];
            sprintf( buf, "Freeing mem for HRTF #%d", i );
            //__DEBUG( buf );
            free( _pHRTFs[i] );
        }
    }
    printf("complete without error\n");
    return 0;
} 
```

并输出：

```
adnan@adnan-ubuntu-vm:desktop$ ./a.out 
allocatingi
Allocation complete. Now deallocating
complete without error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:17:35.780

内存分配和取消分配似乎很好。我也在将类型更改为 int 后编译了上面的代码，我得到了以下输出。问题出在其他地方。

```
Freeing mem for HRTF #0
Freeing mem for HRTF #1
......
Freeing mem for HRTF #509
Freeing mem for HRTF #510
Freeing mem for HRTF #511 
```

# 3d - 以编程方式将平面纹理变形为球形（3d）纹理

> ID：10513331
> 
> 赞同：0
> 
> 时间：2012-05-09T09:29:22.190
> 
> 标签：3d, webgl, texture-mapping

*我正在尝试以编程*方式将平面纹理变形为球形纹理，以便我可以在球体上使用它而不会得到奇怪的鱼眼效果。基本上，我想拍摄一张普通图像并对其进行更改，使其在没有鱼眼的情况下映射到球体上。

我正在编写一个 webgl 应用程序，基于我基本上缓存在 youtube 存储桶中的一些视频，所以我可以在必要时执行此服务器端（当前使用 python），或者如果它在客户端上的 javascript 中足够快。目前使用墨卡托投影技术绘制球体和映射预变形纹理，看起来不错，所以我只需要弄清楚如何进行变形。

非常感谢任何建议！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:18:39.993

您可以尝试编辑片段着色器，而不是使图像变形。片段着色器正在执行纹理查找，在极点附近，您希望它查找图像中靠得更近的值，而在赤道处，您希望它继续使用图像的整个宽度进行查找。

# iphone - Default.png - en-gb / Worldworld 本地化

> ID：10513332
> 
> 赞同：2
> 
> 时间：2012-05-09T09:29:23.833
> 
> 标签：iphone, objective-c, ios, localization

是否有可能为 en_GB 设置 1 个 Default.png(@2x) 而为所有其他国家/地区设置 1 个。

我今天早上试图这样做：

1/ 添加文件/然后分组并选择“英语 - 英国”作为他们的本地化

2/ 添加了另一个 Default.png(@2x) 并且没有在它们上选择本地化

但是，当我为英语 - 英国的手机构建时，它显示的 Default.png(@2x) 没有设置本地化。

我真的希望这是可能的，我不必添加所有语言并这样做！

请指教。

谢谢-JM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:35:51.813

您应该能够通过在 Xcode 中选择您的图像并在右侧文件检查器上单击“+”来为图像添加本地化来完成此操作。

![在此处输入图像描述](../Images/51330e85c2bac4de66db66972d51fd2f.png)

# scala - 新的 Scala TypeTags 如何改进（已弃用的）Manifests？

> ID：10513336
> 
> 赞同：28
> 
> 时间：2012-05-09T09:29:30.853
> 
> 标签：scala, type-erasure, scala-2.10

> **可能重复：**
> [Scala 2.10：什么是 TypeTag 以及如何使用它？](https://stackoverflow.com/questions/12218641/scala-2-10-what-is-a-typetag-and-how-do-i-use-it)

我一直在阅读与新反射 api 一起出现的新 TypeTags。清单似乎应该被这个新概念所取代。任何人都可以发布一些代码示例来展示好处吗？

一些参考资料：

*   [类型标签 API](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/scala/reflect/api/TypeTags.html)
*   [SIP：自清洁宏](https://docs.google.com/document/d/1O879Iz-567FzVb8kw6N5OBpei9dnbW0ZaT7-XNSa6Cs/edit?pli=1)
*   [Scala 中的元编程](http://scalamacros.org/talks/2012-04-28-MetaprogrammingInScala210.pdf)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-09T15:52:16.927

清单是谎言。它不知道变体（假设所有类型参数都是协变体），并且它不支持路径相关、存在或结构类型。

TypeTag 是*编译器理解*的类型。不是“喜欢”编译器理解它们，而是“像”编译器理解它们——编译器本身使用 TypeTags。这不是 1 对 1，只是 1。:-)

# mysql - 我不能在 node.js 项目上安装 db-mysql

> ID：10513339
> 
> 赞同：1
> 
> 时间：2012-05-09T09:29:54.560
> 
> 标签：mysql, node.js

在 node.js proeject 上安装 db-mysql 包时。发生此错误

```
npm http GET http://registry.npmjs.org/db-mysql
npm http 304 http://registry.npmjs.org/db-mysql

> db-mysql@0.7.6 install D:\vhosts\node.m.com\node_modules\db-mysql
> node-waf configure build

'node-waf' is not recognized as an internal or external command,
operable program or batch file.

> db-mysql@0.7.6 preuninstall D:\vhosts\node.m.com\node_modules\db-mysql
> rm -rf build/*

'rm' is not recognized as an internal or external command,
operable program or batch file.
npm WARN continuing anyway db-mysql@0.7.6 preuninstall: `rm -rf build/*`
npm WARN continuing anyway `cmd "/c" "rm -rf build/*"` failed with 1

npm ERR! db-mysql@0.7.6 install: `node-waf configure build`
npm ERR! `cmd "/c" "node-waf configure build"` failed with 1
npm ERR!
npm ERR! Failed at the db-mysql@0.7.6 install script.
npm ERR! This is most likely a problem with the db-mysql package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-waf configure build
npm ERR! You can get their info via:
npm ERR!     npm owner ls db-mysql
npm ERR! There is likely additional logging output above.
npm ERR!
npm ERR! System Windows_NT 6.1.7600
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nod
ejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "db-mysql" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:19:12.437

您正在尝试使用 npm 从 Windows 下的源代码安装二进制模块，目前该模块开箱即用时效果不佳。node-waf 只是一个构建工具，您至少还需要编译器和节点头文件。

可能的解决方案：

*   尝试手动安装（阅读[这篇文章](http://joseoncode.com/2012/04/10/writing-your-first-native-module-for-node-dot-js-on-windows/)）
*   使用非二进制、仅 JavaScript 的模块，例如[node-mysql](https://github.com/felixge/node-mysql) ( `npm install mysql`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:23:19.987

试试这个命令：**`npm install mysql`**从你的命令提示符或终端...安装 node.js 包的最常见方法是通过 npm。

# javascript - 带有动画的 Mouseenter 和 mouseleave

> ID：10513340
> 
> 赞同：3
> 
> 时间：2012-05-09T09:29:59.130
> 
> 标签：javascript, jquery, slidedown, slideup, mouseenter

我制作了一个简单的鼠标进入和鼠标离开动画。当鼠标进入 div 时。比链接 div 会打开。鼠标移出时，div 将关闭。我用slideUp和slideDown设置了一个动画。

我的动画有问题。页面上有很多 .comment div。当我快速将鼠标悬停在项目上时。幻灯片动画很疯狂，你会看到很多次动画。我该如何解决？谢谢！

```
$("#comments .comment .links").hide();
$("#comments .comment").mouseenter(function() {
    $(".links",this).slideDown(300);
}).mouseleave(function() {
    $(".links",this).slideUp(300);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T09:34:02.203

用于`stop(true)`清除每个事件的动画队列：

```
$("#comments .comment .links").hide();
$("#comments .comment").mouseenter(function() {
    $(".links",this).stop(true).slideDown(300);
}).mouseleave(function() {
    $(".links",this).stop(true).slideUp(300);
}); 
```

此外，您可以使用以下代码压缩此代码`hover()`：

```
$("#comments .comment .links").hide();
$("#comments .comment").hover(
    function() { $(".links", this).stop(true).slideDown(300); },
    function() { $(".links", this).stop(true).slideUp(300); }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T09:40:14.200

你做什么行为？也许你可以在开始动画之前停止它为所有其他人设置动画

```
$("#comments .comment").mouseenter(function() {
    $("#comments .comment").stop();
    $(".links",this).slideDown(300);
}).mouseleave(function() {
    $(".links",this).slideUp(300);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T10:26:20.923

这里同样的问题！

$("#spezial_navi_btn_20").mouseenter(function() {

```
 $("#content").stop(true).fadeOut("slow");
    $("#spezial_navi").css('background-image', 'url(http://#)');
    $("#spezial_navi_20").stop(true, true).slideUp("fast");
    $("#spezial_navi_desc_20").stop(true, true).slideDown('slow', function() {
        $("body").ezBgResize({
        img : "http://#",
        opacity : 1,
        center  : true 
        });
    });
    $("#spezial_navi_desc_30").stop(true, true).slideUp('slow');
    $("#spezial_navi_30").stop(true, true).slideDown('slow'); 
    $("#spezial_navi_desc_40").stop(true, true).slideUp('slow');
    $("#spezial_navi_40").stop(true, true).slideDown('slow'); 
}); 
```

**解决了 ！！** 而不是： $("#spezial_navi_20").stop(true, true).slideUp("fast"); 和： $("#spezial_navi_desc_20").stop(true, true).slideDown('slow', function() { 我做了：$("#spezial_navi_20").slideUp("fast"); 和：$(" #spezial_navi_desc_20").slideDown('slow', function() {

# asp.net - 在网页中显示 OLAP SQL Server？

> ID：10513342
> 
> 赞同：5
> 
> 时间：2012-05-09T09:30:04.253
> 
> 标签：asp.net, sql-server-2005, reporting-services, ssas, olap

我有这种情况：

WServer 2008、SQL Server 2005、MS 分析服务 (SSAS)、ISS7 和 OLAP CUBE。

我需要**将 OLAP 结果嵌入到**现有站点的网页中。

**我不需要任何**维度的选择，没有任何向下钻取，没有任何 3 维度，只是预设 MDX 查询的被动结果。

下面是使用的 MDX 查询示例：（**一段时间内代理的销售统计）**

```
SELECT NON EMPTY { [Measures].[Valore] } ON COLUMNS,
    NON EMPTY { ([Prodotti].[Top Marca].[Top Marca].ALLMEMBERS * [Calendario].[Anno -  Mese].[Mese].ALLMEMBERS * [Agenti].[Cod Agente].[Cod Agente].ALLMEMBERS ) }
    DIMENSION PROPERTIES MEMBER_CAPTION, MEMBER_UNIQUE_NAME ON ROWS FROM ( SELECT ( { [Calendario].[Anno].&[2012] } ) ON COLUMNS 
    FROM ( SELECT ( { [Agenti].[Vw Agenti].&[005] } ) ON COLUMNS FROM [Vendite])) 
    CELL PROPERTIES VALUE, BACK_COLOR, FORE_COLOR, FORMATTED_VALUE, FORMAT_STRING, FONT_NAME, FONT_SIZE, FONT_FLAGS 
```

下面是我需要在网站上显示的简单结果：

![奥拉普结果](../Images/195a37113c73a0730c9cbaaaf6c3dc0c.png)

我尝试使用报告查看器，但似乎无法解决此错误：

> 远程报表处理需要 Microsoft SQL Server 2008 Reporting Services 或更高版本

而且我无法安装 SQL Server 2008，所以我需要一个替代解决方案。

我尝试了一些开源，但他们需要安装 JAVA 等，大多数也没有连接到 SQL Server 或需要不同的 Web 服务器。

我也尝试使用 TSQL 查询，但它只返回 1 列的月份，而实际上我需要许多列来计算月份

*注意：用户有很多不同的操作系统和浏览器，如 iPad、Mac、Windows、Linux，......所以结果必须是 HTML 输出*

**所以我的问题是：**

开发一个简单的网页（asp 或 aspx）（服务器端或客户端）来查询多维数据集以获得简单结果**（必须是 HTML）**的最佳方法是什么，如上所示，无需用户进行任何选择？

或者在这种情况下我根本不明白什么？

提前感谢谁能帮助我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T09:42:26.463

好吧，您在此处显示的是 SSRS 报告的结果，并且您想从您的应用程序中访问它，对吗？

基本上有 3 种方式可以从应用程序中与 SSRS 进行交互：报表服务器 Web 服务（也称为 SOAP，这是报表管理器的构建方式）、URL 访问（报表服务器上报表的纯 url）和报表查看器控件。

使用 ReportViewer 控件时，您可以使用本地处理模式或远程处理模式。远程处理模式是当控件从 SSRS 服务器检索完全处理的报告时。因此，顾名思义，处理是远程的。

我从您的问题中了解到，您没有可连接的 SSRS 实例，但您有报告。这是您将使用本地处理模式的场景。在这种类型的处理模式下，报表以 .rdlc 文件扩展名存储在本地，控件打开报表定义，对其进行处理，然后在视图区域中呈现报表。

您还需要将报表文件添加到 VS 项目中，并且有一些小限制，例如报表只能使用 PDF、excel 和图像格式显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:50:25.077

根据您的要求，不需要 ReportViewer 控件等。

有 ADOMD.NET（而不是标准的 ADO.NET）应该允许您仅使用静态 MDX 查询来获取所需的所有数据。您需要考虑的唯一部分是如何正确解析结果对象以获取所需格式的 HTML 表。

这将是一个更轻量级的解决方案，它使用报表查看器之类的东西。

我没有任何关于如何解析它的示例，因为它是我目前正在研究的东西，但从我目前所看到的情况来看，这并不难，而且它肯定包含您需要的所有信息。

在访问多维数据集方面，您可以使用 TCP/IP 直接连接（似乎在您提到您执行 TSQL 查询时可用），或者您可以设置 MSMDPUMP 访问。

这不会提供任何类型的交互性，但您说这不是问题。

当我知道如何从 ADOMD.NET 结果集中解析信息时，我将尝试更新它。

# asp.net - 更改asp菜单中的主菜单颜色

> ID：10513343
> 
> 赞同：0
> 
> 时间：2012-05-09T09:30:08.503
> 
> 标签：asp.net

我正在使用asp菜单控件。

我需要根据菜单选择更改主菜单颜色。

```
<asp:Menu ID="mMainMenus" DataSourceID="xmlDataSource" runat="server"   
DynamicHorizontalOffset="2" Font-Names="Verdana" ForeColor="Black"   StaticSubMenuIndent="10px" StaticMenuItemStyle-Font-Bold="true" 
StaticDisplayLevels="1" StaticEnableDefaultPopOutImage="false" DynamicEnableDefaultPopOutImage="false" Orientation="Horizontal"
Width="100%" >
<DataBindings>
    <asp:MenuItemBinding DataMember="MenuItem" NavigateUrlField="NavigateUrl" TextField="Text"
        ToolTipField="ToolTip"   />
</DataBindings> 
```

我将仅更改选定的主菜单颜色 o 主菜单选择更改。单击子菜单时，我需要更改/突出显示主菜单。即，更改活动菜单的颜色。

谢谢，

普加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:37:05.513

尝试向[Menu.StaticSelectedStyle](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.menu.staticselectedstyle.aspx)属性和[Menu.DynamicSelectedStyle](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.menu.dynamicselectedstyle.aspx)属性添加不同的背景颜色

# .net - 使用 web 服务的 SharePoint webparts 页面在不重负载时超时。

> ID：10513350
> 
> 赞同：0
> 
> 时间：2012-05-09T09:30:23.733
> 
> 标签：.net, wcf, sharepoint

我有一个加载六个 Web 部件的共享点页面，每个 Web 部件都使用一个 wcf 服务。还有一些对已完成 pr 请求的 web 服务的 ajax 调用。

加载页面大约 10-20 次后页面停止加载。我从 SharePoint 日志中得到的只是请求超时。

在调试问题时，似乎最终调用了 Web 服务，只是晚了。最初请求页面后大约 4-5 分钟，错误消息将显示在 SharePoint 中。

webservices 和 Sharepoint 安装在同一个 windows 2008 服务器上。在开发中，这个问题最常发生的地方，sql 2008 也安装在同一台服务器上（不要告诉我，我知道，应该不同）。

如果我将其放置约 15-20 分钟，而没有向服务器发出请求，则页面会再次正常加载。sharepoint 上的其他页面不会受到影响，即使它们也可能使用 Web 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:35:07.580

问题是由于我的 WCF 服务回调到 SharePoint 要求用户角色和权限级别。在一定的点击量后，SharePoint 停止响应 WCF 服务，进而停止响应 SharePoint，造成大混乱。

目前，除了确保服务器不太忙之外，我没有做太多修复它，它似乎还没有在生产中引起问题，因为问题只发生在生产服务器的重负载下。

# javascript - 需要使用 Javascript 访问 sqlite 数据库

> ID：10513354
> 
> 赞同：0
> 
> 时间：2012-05-09T09:30:29.877
> 
> 标签：javascript, html, database, sqlite

如何使用 Javascript 访问 sqlite 数据库？哪个是最简单的 Javascript 安装/使用开发工具？

实际上，服务器是轻量级的（thttpd），并且在 arm 处理器上运行。我只需要访问 sqlite db 并在单击超文本或按钮时在网页上显示一些详细信息。希望您知道在 arm 平台上安装上述软件包并不简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:49:55.847

我会选择[node.js](http://nodejs.org/)作为平台，并使用[sqlite3](http://search.npmjs.org/#/sqlite3) npm 包来访问数据库。

# android - Webview重新加载蜂窝中的方向变化

> ID：10513355
> 
> 赞同：4
> 
> 时间：2012-05-09T09:30:34.067
> 
> 标签：android, android-webview, orientation-changes, android-orientation

我有一个正在加载 url 的 webview。如果我更改平板电脑的方向，则 webview 加载的 URL 将再次出现。如何在方向更改时保留 webview 的状态，以便它不会重新加载 url。到目前为止，我已经尝试过：-

```
 @Override
   public void onSaveInstanceState(Bundle savedInstanceState) {
        //Save the state of Webview
        wv.saveState(savedInstanceState);
        super.onSaveInstanceState(savedInstanceState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        // Restore the state of webview
       wv.restoreState(savedInstanceState);
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    WindowManager.LayoutParams.FLAG_FULLSCREEN );
    setContentView(R.layout.html);

    if(savedInstanceState!=null){
        // Restore webview state 
        wv.restoreState(savedInstanceState);
     }

    WebView wv = (WebView) findViewById(R.id.webView1);

    wv.getSettings().setJavaScriptEnabled(true);
        wv.getSettings().setBuiltInZoomControls(true);
        wv.setPadding(0, 0, 0, 0);
        wv.setInitialScale(50);
        wv.getSettings().setLoadWithOverviewMode(true);
        wv.getSettings().setUseWideViewPort(true);

        _dialog = ProgressDialog.show(HtmlActivity.this, "", "Loading...", true, true);
        _dialog.setCancelable(true);
        _dialog.show();

        wv.loadUrl("http://www.samsung.com");

        wv.setWebViewClient(new WebViewClient()
        {

                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url) {

                    return super.shouldOverrideUrlLoading(wv, url);
                }

                @Override
                public void onPageStarted(WebView view, String url, Bitmap favicon) {
                    //_dialog =ProgressDialog.show(HtmlActivity.this, "", "Please wait..."); 
                        super.onPageStarted(wv, url, favicon);
                }

                @Override
                public void onPageFinished(WebView view, String url) {
                    try{
                         _dialog.dismiss();
                        }catch (Exception e) {
                            // TODO: handle exception
                        }
                      //  super.onPageFinished(wv, url);
                }
        });
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T09:42:30.347

在您的清单文件中，为 web 视图的活动编写：

```
 android:configChanges="orientation|screenSize" 
```

对于较新的 API，`screenSize`也添加属性...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:48:09.283

除了@Pallavi 的回答，请阅读[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)以了解**为什么会发生重新加载**。Activity 重启是 Android 中 Activity 生命周期的重要组成部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-29T10:23:37.857

在您的清单文件中，用于网络视图的活动

```
android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale" 
```

# nfc - 开放式 NFC 目标未出现在 AVD 管理器上

> ID：10513356
> 
> 赞同：0
> 
> 时间：2012-05-09T09:30:36.600
> 
> 标签：nfc

我按照从[http://open-nfc.org/wp/home/downloads](http://open-nfc.org/wp/home/downloads)下载的 zip 文件中的手册安装了 Open NFC 插件。Open NFC 插件出现在 SDK 管理器上并已安装，但是当我要创建新的 AVD 时，它没有出现在目标上。谁能告诉我有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:43:59.250

只是创建一个 avd 但不要打开它..

现在打开连接中心和 NFC 模拟器，然后运行 ​​avd 然后它可以工作

# python - Python中的冒泡排序，用于处理列表

> ID：10513358
> 
> 赞同：0
> 
> 时间：2012-05-09T09:30:40.753
> 
> 标签：python, bubble-sort

代码很简单

```
def bubble_sort(l):
    for i in xrange(0, len(l)-1) :
        for n in xrange(0, len(l)) :
            if l[i] > l[i+1] :
                l[i], l[i+1] = l[i+1], l[i]

lst = [[1, 8, 2], [3, 2, 5], [2, 13, 3], [2, 5, 5], [2, 5, 6], [5, 11, 6], [5, 5, 6]]
print(lst)
bubble_sort(lst)
print(lst) 
```

* * *

结果：

```
[[1, 8, 2], [3, 2, 5], [2, 13, 3], [2, 5, 5], [2, 5, 6], [5, 11, 6], [5, 5, 6]]
[[1, 8, 2], [2, 13, 3], [2, 5, 5], [2, 5, 6], [3, 2, 5], [5, 5, 6], [5, 11, 6]] 
```

排序不正确。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:41:21.940

问题是您只进行一次迭代，而在冒泡排序中，您应该一遍又一遍地迭代，直到不再有交换对为止。像这样：

```
def bubble_sort(l):
    ok = False

    while not ok:
        ok = True
        for i in range(len(l) - 1):
            if l[i] > l[i+1]:
                l[i], l[i+1] = l[i+1], l[i]
                ok = False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:40:33.543

您必须`n`用作索引变量，而不是`i`. 因为它是你一次又一次地比较相同的元素`len(l)`。试试这个：

```
def bubble_sort(l):
    for i in xrange(0, len(l)) :
        for n in xrange(0, len(l)-1) :
            if l[n] > l[n+1] :
                l[n], l[n+1] = l[n+1], l[n] 
```

# load-balancing - 负载均衡节俭流量

> ID：10513359
> 
> 赞同：1
> 
> 时间：2012-05-09T09:30:49.743
> 
> 标签：load-balancing, thrift, thrift-protocol

我有一个基于节俭的客户端/服务器架构设计。有人对如何负载平衡基于节俭的服务有经验吗？我正在寻找一些负载平衡方法，甚至可以应用一些算法，例如。循环，加权等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:53:10.510

我还没有尝试过，但是如果您使用的是 HTTP 传输，您也许可以使用一些标准的 HTTP 代理/负载平衡器，例如 nginx 或 lighttpd。

但是您的服务器端实现不应在任何负载平衡节点中保持任何状态，以便它们每个都可以处理每个请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:49:11.160

如果您的问题仍然有效，您可以从 twitter 尝试这个 api：

[http://twitter.github.com/commons/apidocs/com/twitter/common/thrift/package-summary.html](http://twitter.github.com/commons/apidocs/com/twitter/common/thrift/package-summary.html)

# javascript - 使用谷歌地图 api v3 将折线捕捉到道路

> ID：10513360
> 
> 赞同：26
> 
> 时间：2012-05-09T09:30:49.750
> 
> 标签：javascript, google-maps, google-maps-api-3

在谷歌地图 api v2 中很容易，

```
var map = new GMap2(document.getElementById("map"));
    map.setCenter(new GLatLng(53.7877, -2.9832),13)
//    map.addControl(new GLargeMapControl());
//    map.addControl(new GMapTypeControl());
    var dirn = new GDirections();

//      var firstpoint = true;
    var gmarkers = [];
    var gpolys = [];
    var dist = 0;

// == When the user clicks on a the map, get directiobns from that point to itself ==

gmarkers.push(new google.maps.LatLng(53.7877, -2.9832));
gmarkers.push(new google.maps.LatLng(53.9007, -2.9832));
gmarkers.push(new GLatLng(53.600, -2.700));

for (var i = 0; i < gmarkers.length-1; i++) {
    console.log(gmarkers[i]);
                dirn.loadFromWaypoints([gmarkers[i].toUrlValue(6),gmarkers[i+1].toUrlValue(6)],{getPolyline:true});

}

// == when the load event completes, plot the point on the street ==
    GEvent.addListener(dirn,"load", function() {
// snap to last vertex in the polyline
        var n = dirn.getPolyline().getVertexCount();
            map.addOverlay(dirn.getPolyline());
            gpolys.push(dirn.getPolyline());
            dist += dirn.getPolyline().getDistance();
            document.getElementById("distance").innerHTML="Path length: "+(dist/1000).toFixed(2)+" km. "+(dist/1609.344).toFixed(2)+" miles.";
           });
    GEvent.addListener(dirn,"error", function() {
        GLog.write("Failed: "+dirn.getStatus().code);
    });
console.log(dirn); 
```

在 google api V3 中，这种简单的方式不起作用。有类似方向服务的东西，但我不知道如何通过我的点绘制折线，折线将被捕捉到道路。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-09T11:51:19.640

您在方向服务的正确轨道上。这是示例代码：

```
var map, path = new google.maps.MVCArray(),
    service = new google.maps.DirectionsService(), poly;

function Init() {
  var myOptions = {
    zoom: 17,
    center: new google.maps.LatLng(37.2008385157313, -93.2812106609344),
    mapTypeId: google.maps.MapTypeId.HYBRID,
    mapTypeControlOptions: {
      mapTypeIds: [google.maps.MapTypeId.ROADMAP, google.maps.MapTypeId.HYBRID,
          google.maps.MapTypeId.SATELLITE]
    },
    disableDoubleClickZoom: true,
    scrollwheel: false,
    draggableCursor: "crosshair"
  }

  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  poly = new google.maps.Polyline({ map: map });
  google.maps.event.addListener(map, "click", function(evt) {
    if (path.getLength() === 0) {
      path.push(evt.latLng);
      poly.setPath(path);
    } else {
      service.route({
        origin: path.getAt(path.getLength() - 1),
        destination: evt.latLng,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
      }, function(result, status) {
        if (status == google.maps.DirectionsStatus.OK) {
          for (var i = 0, len = result.routes[0].overview_path.length;
              i < len; i++) {
            path.push(result.routes[0].overview_path[i]);
          }
        }
      });
    }
  });
} 
```

另外，请参阅我的工作示例： http: [//people.missouristate.edu/chadkillingsworth/mapsexamples/snaptoroad.htm](http://people.missouristate.edu/chadkillingsworth/mapsexamples/snaptoroad.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-03T14:01:39.943

最好使用 Snap to Roads API，并将 interpolate 设置为 true 以获得完美的捕捉折线。 [https://developers.google.com/maps/documentation/roads/snap](https://developers.google.com/maps/documentation/roads/snap)

# scala - 使用 sbt gen-idea 时缺少播放源

> ID：10513364
> 
> 赞同：4
> 
> 时间：2012-05-09T09:31:06.100
> 
> 标签：scala, playframework, intellij-idea, sbt

我在一个项目中使用 Play 框架，并使用 IntelliJ 作为我选择的 IDE。

我遇到的问题是 IntelliJ 无法访问播放源 jar，这意味着我无法进入播放代码等。

当我使用`> sbt gen-idea`scalatra 源时附加到 IntelliJ 中的项目但由于某种原因未附加播放源。

是否有需要运行的特殊命令？我目前正在使用 sbt 0.11。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:49:35.843

似乎正确的答案是`withSources`在 sbt 中使用该命令。

```
sbt idea withSources 
```

这类似于 eclipse 插件

```
sbt eclipsify withSources=true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:43:04.087

你有没有尝试过

```
sbt gen-idea sbt-classifiers 
```

如果源是由构建（插件）而不是在您的构建文件中添加的，则默认情况下它不会添加到 IDEA 配置中。

[sbt 最近](https://github.com/harrah/xsbt/issues/304)有一个错误，您必须在本地仓库中安装您正在使用的任何插件的源代码，然后此命令才能正常工作。我想我`sbt-idea`从 github 签出并`sbt install`编辑它来解决这个问题。

sbt-idea 的插件作者在[此评论](https://github.com/mpeltonen/sbt-idea/issues/119#issuecomment-3597764)中解释了它。该错误已在 sbt 的更高版本中得到修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-03T17:30:02.833

sbt update-classifiers sbt update-sbt-classifiers sbt gen-idea sbt-classifiers

在 Build.scala 中创建一个命令别名来链接所有这些命令。

sbt 生成项目

[http://www.plotprojects.com/create-an-intellij-idea-project-with-library-sources-attached/](http://www.plotprojects.com/create-an-intellij-idea-project-with-library-sources-attached/)

# c - Xlib - 在窗口上仅绘制位图的设置位

> ID：10513367
> 
> 赞同：2
> 
> 时间：2012-05-09T09:31:14.667
> 
> 标签：c, linux, x11, xlib

我正在尝试在窗口上绘制位图。我只需要在位图中绘制1位对应的像素；对应于 0 位的那些应保持不变。我正在使用这样的代码：

```
XImage *image;
uint8_t bitmap[8192]; /* 256 x 256 / 8 */

memset(bitmap, 0xaa, sizeof(bitmap));

XSetForeground(g_display, g_gc, 0x000000ff);
XSetBackground(g_display, g_gc, 0x00000000);

image = XCreateImage(g_display, g_visual, 1, XYBitmap,
    0, (char *)bitmap, 256, 256, 32, 0);
XPutImage(g_display, g_wnd, g_gc, image, 0, 0, 10, 10, 255, 255);
XFree(image); 
```

（是的，我知道像我这样直接指定颜色是错误的，但现在对我来说没问题）。

显然，位图的 0 位是用背景色（即黑色）绘制的。我希望它们根本不被绘制。实现它的最佳方法是什么？有什么方法可以指定掩码或其他东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:56:57.997

首先，对于非透明位图，您不需要从位图数据创建全深度图像。创建一位像素图并使用`XCopyPlane`.

对于透明位图，您需要操作 GC 的剪辑蒙版。

```
Pixmap bitmap;
...; /* create 1-bit-deep pixmap */
XSetClipMask(display, gc, bitmap);
XSetClipOrigin(display, gc, x, y);
/* 1-bits of the bitmap are filled with the foreground color,
   and 0-bits are left intact */
XFillRectangle(display, window, gc, x, y, width, heiht); 
```

# seo - 为什么即使在指定 URL 之后，robot.txt 文件中也会出现此错误？

> ID：10513373
> 
> 赞同：0
> 
> 时间：2012-05-09T09:31:35.610
> 
> 标签：seo, robots.txt, googlebot, robot, google-search-console

在 robots.txt 文件中，我放置了一个 URL `/custompages/*`，Google bot 不应抓取与“/custompages/”匹配的页面。

但是当我查看网站管理员时，我仍然可以从这些链接中看到错误消息。

```
User-agent: *        
Disallow: /search/application/*
Disallow: /custompages/* 
```

以上是我的robot.txt 文件。

在网站管理员上，我可以看到`Googlebot couldn't access the contents of this URL because the server had an internal error when trying to process the request. These errors tend to be with the server itself, not with the request.` 网址

`custompages/savesearch?alid=9161`

哪里可能发生了错误..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:58:22.283

```
Disallow: /search/application/
Disallow: /custompages/ 
```

就够了，不需要*号。

# java - 异常与 throws 子句不兼容的原因是什么？

> ID：10513374
> 
> 赞同：24
> 
> 时间：2012-05-09T09:31:39.110
> 
> 标签：java, exception, exception-handling

谁能告诉我异常可能有什么原因，与“抛出”条款不兼容

例如：

```
class Sub extends Super{

    @Override
    void foo() throws Exception{

    }

}

class Super{

    void foo() throws IOException{

    }
} 
```

**Exception 异常与 Super.foo() 中的 throws 子句不兼容**

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-09T09:38:46.553

如果没有完整的代码示例，我只能猜测：您正在覆盖/实现子类中的方法，但子类方法的异常规范与超类/接口方法的异常规范不兼容（即不是子类）？

如果声明基方法根本不抛出异常，或者例如`java.io.IOException`（这是`java.lang.Exception`您的方法的子类试图在此处抛出），则可能会发生这种情况。基类/接口的客户期望它的实例遵守基方法声明的契约，因此`Exception`从该方法的实现中抛出会破坏契约（和[LSP](http://en.wikipedia.org/wiki/Liskov_substitution_principle)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T09:42:00.147

要修复它，请使用**RuntimeException**

```
public T findById(long id) throws RuntimeException {
    try {
          return whatEver.create();
    } catch (SystemException e) {
          throw new RuntimeException(e);
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T17:59:59.777

检查异常旨在用于方法可能期望其调用者准备处理可能出现的某些问题的情况。如果调用者 of`BaseFoo.Bar()`不需要处理 a `FnordException`，那么方法`DerivedFoo.Bar()`不能期望它的调用者处理 a `FnordException`（因为它的许多调用者将是那些没有准备好`BaseFoo.Bar()`抛出它的调用者）。

从概念上讲，这很棒。在实践中，并没有那么多。问题是语言中检查异常的设计假设要么没有调用者准备好优雅地处理特定问题，要么所有调用者都准备好处理它。实践中的正常情况是调用者没有准备好处理异常——即使是一些调用者可能能够处理的异常。大多数情况下，当代码收到它没有明确期望的已检查异常时，正确的操作过程是将其包装在未检查异常中并抛出该异常。具有讽刺意味的是，最简单的做法——添加“抛出”子句并让检查的异常冒泡，可能是最不可能正确的做法。虽然有一些情况（例如`IOException`) 在这种行为有意义的情况下（例如，当尝试从文件中读取集合时，读取一项时的 I/O 错误是读取集合时的 ​​I/O 错误），从嵌套方法调用中抛出的异常将表示与外部方法抛出的相同类型的异常不同的条件，并且准备处理后者的代码可能不准备处理前者。

在您的情况下，您最好的选择可能是将其捕获`IOException`并包装在派生自 的其他类型中`RuntimeException`，并意识到您的调用者不太可能处理它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-29T20:20:27.107

确保您在界面中声明了 throw。如果您这样做了，但问题仍然存在 - 尝试保存/重建项目。

# iphone - iOS 允许应用导入不支持的文件格式

> ID：10513377
> 
> 赞同：0
> 
> 时间：2012-05-09T09:31:45.010
> 
> 标签：iphone, ios, document

我想允许用户将不支持的文件格式导入我的应用程序（通过 Webview >“打开方式...”）

谁能推荐我怎么做？假设我想添加 .HTM 或 .ODT（更新：ODT、MHT、ODS、ODP、ODG....）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:00:32.437

[关于文档交互](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Introduction/Introduction.html)可能是一个不错的起点。

它描述了如何使用`CFBundleDocumentTypes`注册 UTI 文件类型（包括`public.data`其他不受支持的类型）。

# jquery - 如何在窗口调整大小时调整/重新制作 jQuery GalleryView 滑块？

> ID：10513378
> 
> 赞同：1
> 
> 时间：2012-05-09T09:31:45.447
> 
> 标签：jquery, plugins, slider, responsive-design, galleryview

我正在尝试在具有响应宽度的页面上使用 jquery GalleryView 滑块插件（http://spaceforaname.com/galleryview/） - 因此，当调整窗口大小时，包含滑块的列也会发生变化。

调整窗口大小时，我需要调整滑块的大小。

[您可以在http://www.folknfuture.com/product.php?id_product=1](http://www.folknfuture.com/product.php?id_product=1)看到该页面

到目前为止，我已经这样做了......

在插件里面我放了这个（大约在第 220 行）以使滑块适合其包含的 div：

```
 var parentW = $('#pb-right-column').width();

            // panels
            dom.gv_panel.css({
                width: parentW,//this.opts.panel_width,
                height: this.opts.panel_height
            });
            dom.gv_panelWrap.css({
                width: gv.outerWidth(dom.gv_panel),
                height: gv.outerHeight(dom.gv_panel)
            });
            dom.gv_overlay.css({
                width: parentW//this.opts.panel_width
            }); 
```

然后我创建了工作正常的画廊 - 但我不知道如何在窗口宽度改变时改变宽度。我尝试将 'gal' 设置为 null，然后创建一个新画廊 - 但它不起作用，因为图像已从其初始包含的 div 中删除。

```
var gal;
$(document).ready(function(){
    gal = $("#images").galleryView();
});

$(window).resize(function() {
    //gal.init();
}); 
```

我需要重新初始化画廊吗？当我在浏览器中检查脚本时，我什至找不到任何画廊对象。帮助将不胜感激。提前致谢..

* * *

不，这不起作用，因为创建图库时#images div 已经消失。所以我尝试了以下方法：

```
 var gal; 
$(document).ready(function(){ 
gal = $("#images").galleryView(); 
}); 

function setGallery(width) { 
gal.opts.panel_width = width; // panel_height:height 
} 

$(window).resize(function () { 
//calculate relative height and width 
var parentW = $('#pb-right-column').width(); 
setGallery(parentW); 
}); 
```

但这也不起作用，因为它说 gal 对象是未定义的。还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:39:28.343

我认为你可以尝试这样的事情。代码未经测试-

```
 var gal;
    $(document).ready(function(){
        setGallery(300, 700)
    });
    var gal;
    function setGallery(height, width)
    {
        gal = $("#images").galleryView({
          panel_width:width,
          panel_height:height
        });
    }
    $(window).resize(function () {
        //calculate relative height and width
        setGallery(height, width);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T13:32:50.257

不幸的是，Anup Das Gupta 的答案不起作用，但解决方案（我承认这有点脏）是在 galleryview 更改所有内容之前将纯列表的 HTML 存储在一个变量中，然后您可以销毁 galleryview div每次调整大小并恢复旧的 HTML 版本，然后您可以重新应用galleryview。

```
var old_html;
$(document).ready(function(){
    old_html = $('#containing-div').html();
    setGallery(300, 700);
});
function setGallery(height, width)
{
    $("#images").galleryView({
      panel_width:width,
      panel_height:height
    });
}
$(window).resize(function () {
    $('.gv_galleryWrap').remove(); //remove the galleryview butchered code
    $('#containing-div').html(old_html); //reinstate the original HTML
    //calculate relative height and width here
    setGallery(height, width);
}); 
```

这显然非常密集，因为它会在每次调整大小时破坏并重新创建画廊，但它确实解决了问题。

# html - iFrame 与网站通信

> ID：10513383
> 
> 赞同：0
> 
> 时间：2012-05-09T09:31:52.933
> 
> 标签：html, iframe, communication

总结一下情况：我有一个加载一堆内容的 iFrame。在这种情况下，它会加载我们的客户可以参加的课程。这些课程的描述是多语言的，应该与用户的语言相对应。

访问语言变量非常容易，但棘手的部分是与 iFrame 通信。那么，我怎样才能（轻松）将网站的语言变量传递给 iFrame？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T21:25:54.490

我认为您可以为此目的使用查询字符串变量。假设 iram url 是 foo.com。当您进入页面时，您知道语言是EN。然后，您使用 foo.com?language=DE 之类的内容创建 iframe 的 url

# java - 如何将 Spring 依赖项注入消息驱动 EJB？

> ID：10513385
> 
> 赞同：1
> 
> 时间：2012-05-09T09:31:55.720
> 
> 标签：java, spring, ejb

有没有办法将 Spring 依赖项注入到消息驱动的 EJB 中？豆子：

```
@MessageDriven( ......)
public class MessageBean implements MessageListener {       

     @Autowired private someDAO; // <-how to wire a Spring managed bean here?

     public void onMessage(Message message) {

              TextMessage textMsg = (TextMessage)message;
              try { someDAO.persist(message); //handle message, save to DB } 
              catch(Exception e) {}
     }
........... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:55:36.000

如果必须使用 spring，则提供注释以支持非托管 bean 上的 DI。

见[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-atconfigurable](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-atconfigurable)

正如 duffymo 所说，我也会使用其中一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:28:07.257

你有几个选择：

*   使用[SpringBeanAutowiringInterceptor](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/ejb/interceptor/SpringBeanAutowiringInterceptor.html)，这至少需要 Spring 2.5.1 和 EJB 3
*   如果你在 JBoss 5 或更高版本上，你可以使用[snowdrop spring deployer](http://docs.jboss.org/snowdrop/2.0.0.Final/html/ch03.html#d0e618)
*   如果您使用 JBoss Seam 3.1 或更高版本，您可以使用[Seam Spring](http://docs.jboss.org/seam/3/spring/latest/reference/en-US/html/)

# java - 如何在 C 中实现注释？

> ID：10513387
> 
> 赞同：1
> 
> 时间：2012-05-09T09:32:00.080
> 
> 标签：java, c, linux, elf

我看到JNI使用这些类型的功能，但我不知道它是什么：

```
JNIEXPORT void JNICALL Java_ClassName_MethodName
   (JNIEnv *env, jobject obj)
 {
     /*Implement Native Method Here*/
 } 
```

就 c 语言功能而言，“JNIEXPORT”和“JNICALL”是什么？

是否可以创建这样的注释：

```
ROUTE("/test/whatever") 
void function(int x)
{
} 
```

并使其有效 C? 我需要能够以某种方式在运行时将这些注释与相应的函数相关联。有*没有*办法做到这一点？我知道可以在运行时从 ELF 文件中读取函数指针，因此这部分已经完成。现在我只需要一些方法来注释函数。我不在乎实现有多丑陋，它只需要在 Linux 上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:38:10.097

`JNIEXPORT`是一个宏，其计算结果类似于`__declspec(dllexport)`，具体取决于您的编译器/平台。并`JNICALL`评估调用约定，即`__stdcall`或适合您的编译器/平台的任何内容。

至于问题的第二部分，C 中没有运行时反射能力，因此没有注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:12:51.977

如果您有时间并接受丑陋的、特定于 Linux 的解决方案，您还可以考虑使用[MELT](http://gcc-melt.org)扩展（MELT 是一种高级域特定语言，具有类似 Lisp 的语法来扩展 GCC）或使用 GCC 插件编码来**定制您的 GCC 编译器**在 C.

定制或扩展 GCC（或任何其他工业级 C 或 C++ 编译器）需要时间（几周，而不是几小时），因为 GCC 是一个非常复杂的程序。您必须了解 GCC 中端内部表示（尤其是*Gimple*和*Tree* -s）和传递，两者都是复杂的事情。[你可以在gcc-melt.org](http://gcc-melt.org/)上找到一些关于 MELT 的幻灯片，它们提供了关于它们的参考和解释。

您可以为 [运行时反射] 注释使用例如编译指示或内置函数自定义 GCC（并且您会喜欢使用您的或使用您的编译指示或内置`#define`函数的宏）；那么您将不得不通过例如添加特定的通行证来处理您的特定编译指示或内置函数来扩展 GCC。`JNIEXPORT``JNICALL`

# javascript - 为什么javascript collapseToStart()会抛出错误

> ID：10513391
> 
> 赞同：0
> 
> 时间：2012-05-09T09:32:19.457
> 
> 标签：javascript, select

我正在运行这段代码，用于在用户选择 iframe 之外的另一个单词时取消选择用户在 iframe 中选择的单词：

```
function getCurrentWord() {
    var range;
    var w = "";

    if (document.selection) {
        ////IE
        range = document.selection.createRange();
        w = trim(range.text);
    } else {
        ////NOTIE
        w = trim(window.getSelection().toString());
    }

    if (w != "" && document.getElementById("frmBook")) {
        var oTextRange;
        if (document.selection) {
            ////IE
            oTextRange = document.getElementById("frmBook").contentWindow.document.selection.createRange();
            oTextRange.expand("word");
            oTextRange.execCommand("unselect") ;
        } else {
            ////NOTIE       
            oTextRange = document.getElementById("frmBook").contentWindow.getSelection();
            oTextRange.collapseToStart();
        }
    }

    if (w == "" && document.getElementById("frmBook")) {
        if (document.selection) {
            ////IE
            range = document.getElementById("frmBook").contentWindow.document.selection.createRange();
            w = trim(range.text);
        } else {
            ////NOTIE
            w = trim(document.getElementById("frmBook").contentWindow.getSelection().toString());
            /*
            IF I PUT IT HERE IT DOESN'T SHOW AN ERROR
            oTextRange = document.getElementById("frmBook").contentWindow.getSelection();
            oTextRange.collapseToStart();
            */
        }
    }
    return w;
} 
```

问题是我在 Firefox 错误控制台上收到此错误：

> 时间戳：2012 年 9 月 5 日 12:20:42 μμ 错误：未捕获的异常：[异常...“尝试使用不可用或不再可用的对象”代码：“11”nsresult： “0x8053000b (NS_ERROR_DOM_INVALID_STATE_ERR)”位置：“ [http://192.168.0.88/test.js](http://192.168.0.88/test.js)行：295”]

当代码位于

```
oTextRange.collapseToStart(); 
```

线。

我试图像这样在一行中运行它：

```
document.getElementById("frmBook").contentWindow.getSelection().collapseToStart(); 
```

但我得到同样的错误

frmBook 是 iframe 的 ID

如果我运行那段导致我已将其注释掉的错误的代码，它不会显示错误，这很奇怪！

有人知道我在做什么错吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:40:31.250

[查看http://dxr.lanedo.com/mozilla-central/layout/generic/nsSelection.cpp.html](http://dxr.lanedo.com/mozilla-central/layout/generic/nsSelection.cpp.html)上的源代码（可能是旧版本）`collapseToStart`，如果实际上什么都没有，似乎会产生该错误选择。您可以检查是否`oTextRange.rangeCount`< 1，如果是，则根本不进行折叠。（如果出于某种原因这应该是不可能的，那么您可能会遇到不同的问题。）

# facebook - 单击 fb like 按钮会使计数器增加 2

> ID：10513392
> 
> 赞同：1
> 
> 时间：2012-05-09T09:32:23.450
> 
> 标签：facebook, facebook-like

我在主页和其他页面上有类似 FB 的按钮。而且问题只出现在主页上。

点击btn等FB后，计数器加1并弹出评论窗口。

1.  如果我单击“关闭”，一切正常，
2.  如果我没有输入任何评论并单击“发布到 Facebook”，那么 evereting 也可以。
3.  但是，如果我输入任何文本并单击“发布”，那么在页面重新加载后，我可以看到我的计数器又增加了一次

我在我的网站上使用下一个 js 代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&app_id=MY_CODE";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

和那个标签

```
<div class="fb-like" data-send="false" data-layout="button_count" data-width="150" data-show-faces="true"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:37:19.043

这是预期的行为，因为 Like Button 显示不仅`likes`计数。

这在[Like Button](https://developers.facebook.com/docs/reference/plugins/like/)社交小部件的文档中有所描述：

> **我的“赞”按钮上显示的数字是由什么组成的？**
> 
> 显示的数字是以下各项的总和：
> 
> *   此网址的点赞数
> *   此 URL 的共享数量（这包括将链接复制/粘贴回 Facebook）
> *   Facebook 上有关此 URL 的故事的点赞数和评论数
> *   包含此 URL 作为附件的收件箱邮件数。

# android - 在代码中声明 RelativeLayout 页脚

> ID：10513393
> 
> 赞同：0
> 
> 时间：2012-05-09T09:32:27.333
> 
> 标签：android, xml, layout, ads

我几乎尝试了一切。我认为在 XML 中放置广告并不安全，所以我想通过代码来做到这一点。这就是我用 XML 制作的方法

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <com.google.ads.AdView
        android:id="@+id/adViewContactsList"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        ads:adUnitId="My Unit id"
        ads:adSize="BANNER"
        ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID"
        ads:loadAdOnCreate="true"/>

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:layout_weight="200"
        android:layout_above="@id/adViewContactsList">

        <ListView
            android:id="@+id/contactsList"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:cacheColorHint="#0000"
            android:listSelector="@drawable/listview_background_pressed"
            android:divider="@color/convListSep"
            android:dividerHeight="0.5dp"
            android:fadingEdge="none"
            android:scrollingCache="false" >
        </ListView>

        <View
            android:layout_width="fill_parent"
            android:layout_height="5dp"
            android:background="@drawable/background_shadow" />

    </FrameLayout>
</RelativeLayout> 
```

每次我尝试通过它为广告制作页脚时，它都像 FrameLayout 一样工作（它涵盖了列表的底部）。这是我的代码（当然是在删除 XML 中的广告之后）

```
adView = new AdView(this, AdSize.BANNER, GateSMSApp.AD_ID);
RelativeLayout layout = (RelativeLayout)findViewById(R.id.layoutContactsList);
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
adView.setLayoutParams(params);

AdRequest adRequest = new AdRequest();
adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
adView.loadAd(adRequest);
layout.addView(adView);

RelativeLayout.LayoutParams frameLayoutParams = (RelativeLayout.LayoutParams) findViewById(R.id.frameLayoutList).getLayoutParams();
FrameLayout frameList = (FrameLayout) findViewById(R.id.frameLayoutList);
RelativeLayout.LayoutParams viewParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);
viewParams.addRule(RelativeLayout.ABOVE, adView.getId());
frameList.setLayoutParams(viewParams); 
```

哈，明白了。

代码没问题，但在代码中创建的视图 id 是 -1 或不同的东西。重点是我所要做的就是更改 adView 的 ID：

```
adView.setId(123123); 
```

# java - 从 jar 中删除类后是否没有构建编译问题？

> ID：10513397
> 
> 赞同：0
> 
> 时间：2012-05-09T09:32:59.043
> 
> 标签：java, eclipse, jar

我正在使用 Eclipse 3.6 IDE 进行开发。

我正在处理现有应用程序（不是我开发的代码），此代码以 Jar 文件的形式存在（类名为 ViewOprions）

在这段代码中，我得到了一个 ArrayIndexOutOfBoundsException，因此出于调试目的，我从那个 jar 中删除了这个类，构建了一个新 jar 并将其添加到应用程序中。

我的问题是，删除该类后，我期待代码中出现编译问题，但什么也没出现。

有人可以告诉我为什么从 jar 中删除类后没有构建问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:34:52.380

您的代码没有使用它，您正在使用的 JAR 中的任何类也没有使用。

正如 Jigar 在下面正确指出的那样，当您实际运行代码时，您可能仍然会遇到问题。

我建议不要摆弄不属于您的第 3 方 JAR。最好找出原始异常的根本原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:38:21.993

该类只能通过反射访问，因此编译器看不到任何问题。看看您是否可以运行现有的应用程序。此外，该 IOBE 的堆栈跟踪将有助于更好地帮助您。

# compilation - 编译 Inno Setup 脚本时是否可以调用批处理文件？

> ID：10513398
> 
> 赞同：12
> 
> 时间：2012-05-09T09:33:03.113
> 
> 标签：compilation, inno-setup

我想在 Inno Setup 编译过程开始时调用一个批处理文件。即在它开始编译之前，执行一个外部操作。这是可能的还是我的外部活动应该包装 Inno Setup 编译过程？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T16:26:14.413

如果你安装了 Inno 的 ISPP（它现在是内置的），那么你可以使用[`Exec()`](http://www.jrsoftware.org/ispphelp/index.php?topic=exec)预处理器功能来运行你的批处理文件。编译将暂停，直到它返回（将其放在文件的开头）。

```
#expr Exec("c:\file.bat") 
```

如果您的命令带有参数，则必须将其编写为：

```
#expr Exec('c:\my_cmd.exe','some_argument') 
```

您还可以从批处理文件运行它，然后调用设置编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-07T14:33:43.743

*作为已接受答案的附录，这里是[Exec()](http://www.jrsoftware.org/ispphelp/index.php?topic=exec)的文档，以防帮助页面出现故障。*

**Inno 设置预处理器：Exec**

**原型**
int Exec(str 1, str? 2, str? 3, int? 4, int? 5)

**说明**
执行指定的可执行文件。

第一个参数指定要执行的模块的文件名。

第二个参数可用于指定要执行的命令行。

第三个参数可用于指定进程的工作目录。

如果您不希望等待该过程完成，则第四个参数应设置为零，否则应设置为非零。默认情况下，假定非零值。

第五个参数可以是 ISPPBuiltins.iss 文件中定义的任何 SW_* 常量。对于 GUI 进程，它指定第一次调用 ShowWindow 时的默认值。默认情况下，假定为 SW_SHOWNORMAL（即 1）。

如果第四个参数被省略或不为零，则函数返回进程的退出代码。否则，函数结果指示进程是否已成功启动（非零表示成功）。

# php - 我喜欢通过 PHP（使用 '?' AND '&'）从 Mysql 中检索记录中的三个值，并使用 $_GET 方法将其发送到另一个表单

> ID：10513399
> 
> 赞同：-2
> 
> 时间：2012-05-09T09:33:06.177
> 
> 标签：php

*

我喜欢通过 PHP（使用 '?' AND '&'）从 Mysql 中检索记录中的三个值，并使用 $_GET 方法将其发送到另一个表单

*`// 表单发送值 form1

```
$connection=mysql_connect("localhost", "root","");
 mysql_select_db("xxxxxx_Database",$connection);
 $v= mysql_query("Select * from patient_details order by P_id");
 while ($row = mysql_fetch_array($v))
{ 
 echo "<tr><td>".$row['P_id']."</td><td>".$row['P_name']."</td><td>".$row['P_age']."       </td><td>"."<a href=Editing_Patient_Detail.php>Edit</a>   </td><td><a href=Delete_Patient_Detail.php?P_id=".$row['P_id']."&P_name=".$row['P_name']."&P_age="."row['P_age']".">Delete</a>";
}
          mysql_close( $connection);

 // form recieving the get values

 $connection=mysql_connect("localhost", "root","");
           mysql_select_db("Aravind_Database",$connection);
           if ($_GET['P_id']!= '')
          {     
        $v= mysql_query(" Select * from patient_details order by P_id");

        while ($row = mysql_fetch_array($v))

    {   
      if ($row['P_id'] == $_GET['P_id'])
     {
                               ?>
              <input type="text" value='<?php $_GET['P_id']?>' /><br>
        <input type="text" width="145" value='<?php $_GET['P_name']?>' /><br>
        <input type="text" value    ='<?php $_GET['P_age']?>' /><br> <?php 
       break;
      }
        }
  }

// I am recieving only the P_id and P_name values, I can't recieve the P_age value     through //get "Sorry friends, while pasting on the website I typed it wrongly (P_age)"

            ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:37:05.233

那是因为您**只**发送 id 和名称：
[a href=Delete_Patient_Detail.php?P_id=".$row['P_id']."&P_name=".$row['P_name']."&x="。 "10".">删除[/a>";

要使其工作，您必须添加该参数：

[a href=Delete_Patient_Detail.php?P_id=".$row['P_id']."&P_name=".$row['P_name']."&P_age=".$row['P_age']."&x=" ."10".">删除[/a>";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:38:21.427

你确定你发送了所有 3 个参数吗，看起来你只发送了 2 个

```
href=Delete_Patient_Detail.php?P_id=".$row['P_id']."&P_name=".$row['P_name']."&x="."10". 
```

你错过了发送`P_age`

```
&P_age=".$row['P_age']." 
```

# javascript - 如何使用jquery将焦点转移到滚动条

> ID：10513409
> 
> 赞同：0
> 
> 时间：2012-05-09T09:34:00.087
> 
> 标签：javascript, jquery-selectors, focus, jquery

我将 select 与 onchange 事件一起使用。当用户在选择中选择一个项目时，我正在使用 jquery post 加载下面的内容。它工作正常。但是焦点仍然在选择上，当我使用键盘上的向下箭头向下滚动时，选择会改变加载不同的内容。

我想知道在更改事件之后如何将焦点从选择转移到滚动条。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:40:04.027

你不需要关注滚动条（我什至不知道这是否可能）。您所要做的就是将注意力转移到您的选择上。

所以在你的 onchange 处理程序中：

```
$(this).trigger('blur'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:47:29.187

您可以在 Jquery 发布请求
位置成功

```
 $('#select').next().focus(); 
```

**例子 ：**

```
 $.ajax 
                ({
                    type: "GET",
                    url: URL
                    success: function (html)
                    {
                      // your code here 
                      $('#select').next().focus();
                    }
                }); 
```

# javascript - Javascript 生成的 ul 在 Internet Explorer 中看起来不同

> ID：10513410
> 
> 赞同：0
> 
> 时间：2012-05-09T09:34:02.153
> 
> 标签：javascript, css, internet-explorer, youtube

[jsFiddle](http://jsfiddle.net/HJsUM/)

我正在尝试使用 javascript 和 html 创建一个播放列表小部件，它在 chrome 上看起来很棒，但是当我在 IE 中测试它时它看起来是静态的并且只显示一行。我试图弄清楚这一点，但我做不到。

请帮帮我。

ps 这是我第一次做 html 和 javascript :)

[http://animaonline.com/api/yt/pls/v1/](http://animaonline.com/api/yt/pls/v1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:38:16.103

您忘记`<a>`使用`</a>`. 我`</a>`在标签之后添加了右边`<img>`，结果是：

[http://jsfiddle.net/HJsUM/3/](http://jsfiddle.net/HJsUM/3/)

如果您想将整个内容（图像、标题和描述）包含在`<a>`标签中，那么您应该将`<a>`标签更改为块元素，因为您不能将块元素（div 和 ul）包含在内联元素中。所以更新的小提琴看起来像这样：

[http://jsfiddle.net/HJsUM/4/](http://jsfiddle.net/HJsUM/4/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T09:45:49.363

首先 - 不是 HTML 没有正确显示，而是您的 JavaScript 似乎到处都有一些缺陷。

我认为你让事情变得比必要的复杂一些。其他人已经为您解决了很多挑战。看看 knockoutjs 可能会很好，它允许您使用优雅的 JavaScript 解决方案填充模板。看看它，你可能会喜欢它[http://knockoutjs.com/](http://knockoutjs.com/)

祝你好运！

# javascript - 使用 http.get 时的 ENOBUFS

> ID：10513415
> 
> 赞同：4
> 
> 时间：2012-05-09T09:34:10.053
> 
> 标签：javascript, node.js

我已经设置了一个节点网络服务器，它在每个传入请求（通过 http.get）时查询多个网络服务。当请求返回时，Web 服务器会将聚合的内容返回给用户（由 协调`async`）。

目前，我正在对位于同一台机器上的 8 个不同的 web 服务进行大约 10 个并发请求。（这是一个测试设置）

从浏览器触发设置时一切正常，但是当我在短时间内`ab`给系统（）施加一点负载时，我不断收到错误。`ab -n 1500 -c 42 127.0.0.1:31330/``ENOBUFS`

关于这个问题，我在互联网上发现的很少。这是否与我的操作系统的连接池简单地过载并因此无法执行更多请求以及接受任何新连接这一事实有关？或者它只是一个不会出现在任何其他类似unix的系统上的windows问题？（我使用的是 Win 7 x64）如果它与连接有关，那么无论使用什么技术（node.js、python、php 等），任何操作系统上都存在这个问题吗？

**更新：** 似乎确实某种连接池正在填满，当我从节点收到该错误时，同时访问任何其他网页不再可能了。

这里有什么可以做的吗？

# c# - 使用 c# 将 .doc 转换为 .docx

> ID：10513417
> 
> 赞同：2
> 
> 时间：2012-05-09T09:34:14.760
> 
> 标签：c#, sharepoint

我有一堆（10k+）文件，实际上不仅是 .doc，还有 .ppt 和 .xls 文件需要转换为 docx、pptx 和 xlsx。我要将这些文档上传到 SharePoint 并拥有一个带有 SharePoint、Visual Studio、Office 2010 Pro 等的环境。

是否有任何最佳实践来执行此操作？我一直在看 Aspose.Words，但 2500 美元似乎有点超出了一次性转换的上限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:49:57.040

您必须使用 microsoft interop dll，并且您需要拥有 ms office2007 或 2010。它或多或少是最安全的做法。但是正如您所说的 10K+ 文档，这将需要很多时间。这是一个三步过程。打开文件。另存为文件并关闭文件循环遍历所有文件。您可以借助答案中提供的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:41:46.133

您可以在 c# 中自动使用 Word（和 PowerPoint），[看看这里作为起点](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word%28office.11%29.aspx)，您可以在旧文件之间循环并以编程方式调用新格式的保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T11:03:56.247

也许有用，

使用 PowerShell 将 DOC 转换为 DOCX

[http://row5is.wordpress.com/2012/07/06/convert-doc-to-docx-using-powershell/](http://row5is.wordpress.com/2012/07/06/convert-doc-to-docx-using-powershell/)

[Basic Powershell - 将 Word Docx 批量转换为 PDF](https://stackoverflow.com/questions/16534292/basic-powershell-batch-convert-word-docx-to-pdf)

[http://kiquenet.wordpress.com/2014/02/20/convert-doc-office-97-2003-to-docx-office-2010/](http://kiquenet.wordpress.com/2014/02/20/convert-doc-office-97-2003-to-docx-office-2010/)

恕我直言，它可以轻松移植到 C#。

# jquery - jQuery - 选择/选项问题+单击/模糊冲突

> ID：10513420
> 
> 赞同：1
> 
> 时间：2012-05-09T09:34:41.740
> 
> 标签：jquery, select, click, option, blur

情况如下：我有一个带有 div 的垂直菜单。每个 div 都有一个 id。当我单击一个 div 时，它会使用以下方法在 div 中添加一个选择列表：

```
$ ( '#mydiv' ).on ( 'click', function ( ) {
  var select = '<select name="menuList"><option value="test">test</option>...</select>';
  $ ( '#mydiv' ).html ( select );
} ) ; 
```

我想做的很简单。我想在选择选项后将用户选择定义为文本。我已经尝试过了，但它不起作用：

```
$ ( 'select[name="menuList"]').on ('blur', function ( ) {
  $ ( '#mydiv' ).html ( $ ( 'select[name="menuList"] option:selected' ).val ( ) );
} ); 
```

此外，另一个问题是，当我从列表中选择一个选项时，所选字段不会保留为用户选择，它会回到列表的第一个位置。基本上，问题不是真正的问题，因为我立即用包含他选择的文本字段替换列表，但我想了解为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:38:52.593

因为您在单击事件上设置 HTML（破坏性），所以每次单击 div 时都会替换 html。您最好在 document.ready 上设置 html 并使用 hide / show 或创建您在设置内容时设置的标志并在每次单击时检查它，这样您就知道不要重新创建菜单。

# lua - Lua Lanes: 尝试索引全局 'os' (一个 nil 值)

> ID：10513424
> 
> 赞同：5
> 
> 时间：2012-05-09T09:35:03.440
> 
> 标签：lua

我想用[Lua Lanes](https://github.com/LuaLanes/lanes)做一个多线程并记录所用的时间。这是代码：

```
require "lanes"

function performTest ()
    os.execute("testJson-mt.lua")
end

for i=1,10,1 do
    f= lanes.gen(performTest)
    a=f()
    startTime = os.time()
    print("ID "..a[1].." completed.")
    endTime = os.time()
    diff = os.difftime (endTime, startTime)
    print(i..","..os.date("%x %X",startTime)..","..os.date("%x %X",endTime)..","..startTime..","..endTime..","..diff)
end 
```

但是，当我运行代码时，控制台返回错误：`lua: testLanes.lua:4: attempt to index global 'os' (a nil value)`.

此错误代码指向这一行，其中`os.execute("testJson-mt.lua")`. 我不太明白这个错误。请指教。

注意：我使用[Lua for Windows](https://code.google.com/p/luaforwindows/)作为 IDE。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T09:49:23.997

默认情况下，[`lanes.gen`不加载库](http://kotisivu.dnainternet.net/askok/bin/lanes/)，甚至不加载基础库。因此`'*'`作为第一个参数传递`lanes.gen`以获取`os`通道中的和其他模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:12:23.587

你也可以这样做`require "os"`。

# c++ - 什么是“::operator new”和“::operator delete”？

> ID：10513425
> 
> 赞同：8
> 
> 时间：2012-05-09T09:35:04.040
> 
> 标签：c++, new-operator, operator-keyword, delete-operator

我知道`new`并且`delete`是关键字。

```
int obj = new int;
delete obj;

int* arr = new int[1024];
delete[] arr; 
```

`<new>`标头是 C++ 标准标头的一部分。它有两个运算符（我不确定它们是运算符还是函数）：

`::operator new`

`::operator delete`

这些运算符的使用如下：

```
#include <new>
using namespace std;

int* buff = (int*)::operator new(1024 * sizeof(int));
::operator delete(buff); 
```

什么是“::operator new”和“::operator delete”？它们`new`与`delete`关键字不同吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T10:31:25.270

`new`关键字（单独使用）与函数`operator new`不同。

打电话

```
Object* p = new Object(value); 
```

等效于调用

```
void* v = operator new(sizeof(Object));
p = reinterpret_cast<Object*>(v);
p->Object::Object(value); //this is not legal C++, it just represent the implementation effect 
```

运算符 new（或更好的`void* operator new(size_t)`变体）只是分配内存，但不进行任何对象构造。

`new`关键字调用 operator new 函数，然后调用对象构造函数。

为了将分配与构造分开，运算符 new 的变体被声明为

```
void* operator new(size_t, void* at)
{ return at; } 
```

前面的代码通常写成

```
Object* p = reinterpret_cast<Object*>(operator new(sizeof(Object))); //no contruction here
new(p) Object(value); //calls operator new(size_t, void*) via keyword 
```

`operator new(size_t, void*)`本身什么都不做，但是，被关键字调用将导致构造函数被调用。

反过来，销毁和释放可以用

```
p->~Object();
operator delete(p); //no destructor called 
```

而不是`delete p`; 调用析构函数然后`operator delete(void*)`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-09T09:36:25.993

`::`告诉编译器调用全局命名空间中定义的运算符。
它是全局`new`和`delete`运算符的完全限定名称。

请注意，可以[替换全局`new`和`delete`运算符以及重载类特定的`new`和`delete`运算符](https://stackoverflow.com/a/4421791/452307)。所以一个程序中可以有两个版本的`new`and`delete`运算符。具有范围解析运算符的完全限定名称告诉编译器您指的是运算符的全局版本，而不是特定于类的运算符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T09:57:27.170

它们是分配器和释放器函数。操作符做了`new`两件事：它调用分配器函数来获取内存，它调用对象的构造函数。操作符还做了`delete`两件事：它调用析构函数，然后调用一个释放函数。默认分配器函数是`::operator new`，默认释放器函数是`::operator delete`。两者都可以由用户更换。

请注意，在新表达式中，`::operator new`函数的查找方式与从成员函数中调用普通函数的方式大致相同。对于普通函数，您可以限定操作符以更改查找：如果成员存在，`new MyClass`将查找成员；将使用默认分配器，即使定义了一个成员。`operator new``::new MyClass``MyClass``operator new`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-09T09:37:09.180

`::`意味着只是一个全局命名空间

# windows - 排除数据被 WASAPI 中的环回模式捕获

> ID：10513431
> 
> 赞同：1
> 
> 时间：2012-05-09T09:35:33.480
> 
> 标签：windows, audio, wasapi

是否可以排除`IAudioClient`环回模式捕获的音频数据 ( `AUDCLNT_STREAMFLAGS_LOOPBACK`) 或渲染不会包含在环回捕获的音频数据中的音频流。

独占模式 ( `AUDCLNT_SHAREMODE_EXCLUSIVE`) 的流不会被捕获，但它也会阻止其他应用程序在同一设备上呈现音频数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:15:29.517

客户端只能为共享模式流 (AUDCLNT_SHAREMODE_SHARED) 启用环回模式。独占模式流不能在环回模式下运行。

# integration - yaf与博客引擎2.0集成

> ID：10513436
> 
> 赞同：0
> 
> 时间：2012-05-09T09:35:47.797
> 
> 标签：integration, blogengine.net, yaf

我成功安装了另一个论坛（yaf）代码，并将其与博客引擎 2.0 成功集成。现在我想为博客引擎 2.0 和 yaf 进行通用登录，即当我自动登录 blogengine2.0 时，必须登录 yaf。谁能建议我解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:43:23.920

将 webconfig 中的 MembershipPorivder 更改为以下内容：

```
//I have changaned the following to be able to genrate a password myself and to be    able to retrive it when i want to login the use, you can change this if you want or just leave it as it is.
<membership defaultProvider="YafMembershipProvider" hashAlgorithmType="NONE" >
        <providers>
            <clear/>
            <add connectionStringName="yafnet" applicationName="YetAnotherForum" name="YafMembershipProvider" passwordFormat="Clear" requiresUniqueEmail="true" useSalt="false" enablePasswordRetrieval="true" type="YAF.Providers.Membership.YafMembershipProvider"/>
        </providers>
    </membership> 
```

这里的这个方法将创建一个 YAFUser，所有这些方法都是从 YAF 库的代码中提取的，我刚刚对它们做了很多工作以提取我想要的一切：

```
 /// <summary>
    /// Register YAF User
    /// </summary>
    /// <param name="userName"></param>
    /// <param name="password"></param>
    /// <param name="email"></param>
    /// <param name="displayName"></param>
    public static MembershipUser RegisterYAF_User(string userName, string password, string email, string displayName)
    {
        //Intilize YAFMembershipProvider
        MembershipCreateStatus status;
        YafMembershipProvider provider = new YafMembershipProvider();
        NameValueCollection valueCollection = new NameValueCollection();
        valueCollection.Add("connectionStringName", "yafnet");
        valueCollection.Add("applicationName", "YetAnotherForum");
        valueCollection.Add("passwordFormat", "Clear");
        provider.Initialize("YafMembershipProvider", valueCollection);

        //Register YAFMembershipUser
        MembershipUser user = provider.CreateUser(userName, password, email, "What is your favorite football team ?", "None", true, new YAF.Providers.Profile.DB().GetProviderUserKey("YetAnotherForum", userName), out status);

        //Register YAFUser
        if (user != null)
        {
            //Add user to role
            RoleMembershipHelper.AddUserToRole(user.UserName, "Registered");

            // setup inital roles (if any) for this user
            RoleMembershipHelper.SetupUserRoles(YafContext.Current.PageBoardID, userName);

            // create the user in the YAF DB as well as sync roles...
            int? userID = RoleMembershipHelper.CreateForumUser(user, user.UserName, YafContext.Current.PageBoardID);

            // create empty profile just so they have one
            YafUserProfile userProfile = YafUserProfile.GetProfile(user.UserName);

            // setup their inital profile information
            userProfile.Location = "USA";
            userProfile.Homepage = string.Empty;
            userProfile.Save();

                 LegacyDb.user_save(
            UserMembershipHelper.GetUserIDFromProviderUserKey(user.ProviderUserKey),
            YafContext.Current.PageBoardID,
            null,
            null,
            null,
            YafContext.Current.TimeZoneUser.ToType<int>(),
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null);
             }

        return user;
    } 
```

此函数用于登录 YAFUser：

```
 //Login yaf user
    /// <summary>
    /// Login
    /// </summary>
    /// <param name="userName"></param>
    /// <param name="password"></param>
    public static void LoginYAF_User(string userName, string password)
    {
        MembershipCreateStatus status;
        YafMembershipProvider provider = new YafMembershipProvider();
        NameValueCollection valueCollection = new NameValueCollection();
        valueCollection.Add("connectionStringName", "yafnet");
        valueCollection.Add("applicationName", "YetAnotherForum");
        valueCollection.Add("passwordFormat", "Clear");
        provider.Initialize("YafMembershipProvider", valueCollection);

        bool Authenticated = false;
        if (provider.ValidateUser(userName, password))
        {
            Authenticated = true;
            FormsAuthentication.SetAuthCookie(userName, true);
        }
        else if (new YafBoardSettings().EnableDisplayName)
        {
            var id = new DefaultUserDisplayName(YafContext.Current.ServiceLocator).GetId(userName);

            if (id.HasValue)
            {
                // get the username associated with this id...
                userName = UserMembershipHelper.GetUserNameFromID(id.Value);

                // validate again...
                if (provider.ValidateUser(userName, password))
                {
                    Authenticated = true;
                }
            }
        }

        //These 2 lines of code is to redirect to the fourm main page
        //YafContext.Current.Get<IRaiseEvent>().Raise(new SuccessfulUserLoginEvent(YafContext.Current.CurrentUserData.UserID));
        //YafBuildLink.Redirect(ForumPages.forum);
    } 
```

之后转到 YAFMembershipProvider.cs 并添加一个重载方法，如下所示：

```
 public string GetPassword(string username)
{
    // Check for null arguments
    if ((username == null))
    {
        ExceptionReporter.ThrowArgument("MEMBERSHIP", "USERNAMEPASSWORDNULL");
    }

    UserPasswordInfo currentPasswordInfo = UserPasswordInfo.CreateInstanceFromDB(
      "YetAnotherForum",
      username,
      false,
      this.UseSalt,
      this.HashHex,
      this.HashCase,
      "",
      this.MSCompliant);

    return currentPasswordInfo.Password;
} 
```

在这我给出了 99% 的百分比，其余的只是简单的编码，至于博客你应该使用相同的概念。搜索 DataLayer 并获取您需要在任意数量的应用程序之间同步的所有方法。

# php - PHP中的变量

> ID：10513439
> 
> 赞同：0
> 
> 时间：2012-05-09T09:36:07.347
> 
> 标签：php, variables

我有 10 个变量：`$c1=a;`通过`$c10=j;` 我也有一个变量`$i=1;`

我现在想知道是否有可能我可以`abcdefghij`在页面上写而不必写`echo $c1.$c2.$c3.$c4.$c5.$c6.$c7.$c8.$c9.$c10;`

我一直在尝试：

```
if ($i<11){
echo "$c$i";
$i++;
} 
```

但当然，这不起作用，而且我尝试的几乎所有其他组合都只是将纯文本输出到屏幕上。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T09:38:39.833

用这个：

```
if ($i<11) {
  echo ${'c'.$i}; // will be evaluated to $c1, $c2, ...
  $i++;
} 
```

但正如评论中所述，您应该坚持使用数组！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T09:41:27.830

鉴于您的要求，您可以使用可变变量：

```
<?php
//Your variables
$c1 = 'a';
$c2 = 'b';
$c3 = 'c';
$c4 = 'd';
$c5 = 'e';
$c6 = 'f';
$c7 = 'g';
$c8 = 'h';
$c9 = 'i';
$c10 = 'j';

$i = 1;

//Loop through
for ($i = 1; $i < 11; $i++){
    $var = 'c' . $i;
    echo $$var; //use "variable" variables
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:52:59.000

请试试这个

```
$i = 1;
while($i<=3){
   $b = "c{$i}";
   echo $$b;
   $i++;
} 
```

谢谢

# java - Java FileUtils 复制备份目录

> ID：10513440
> 
> 赞同：0
> 
> 时间：2012-05-09T09:36:07.753
> 
> 标签：java, backup, apache-commons, file-comparison, fileutils

我正在使用 Commons.IO 的 FileUtils 并且我正在尝试创建一个备份脚本，简单的规则是将 dest 中不存在的所有文件（和子目录）从源复制到 dest 目录，或者如果源具有 lastmodified日期比其他日期新。

我不明白 FileUtils.copyDirectory() 是否是正确的选择，而不是如何设置正确的 FileFilter。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:40:58.677

`FilenameFilter`唯一匹配文件或目录的*名称*。它不能帮助您根据是否存在于不同的树中来决定是否包含一个项目。但是，`copyDirectory()`似乎可以根据您的需要做正确的事情，只是效率低下 - 如果您想从复制中排除未更改的文件，您需要自己添加该逻辑。（该解决方案仍然可以在`copyDirectory()`内部使用，除非您希望在每个级别上进行日期比较。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:43:37.523

正如@romain 在他对问题 rsync 对此问题的评论中指出的那样（仅复制更改，包括文件内的更改）

话虽如此，您必须将在文件过滤器中获得的文件与另一个目录中的“相同”文件进行比较，只需更改文件路径的顶部并检查它们。

或者为了更好地查看有关文件系统目录遍历的 java 7 I/O 改进。性能优于 Commons FileUtils。

# ruby-on-rails - 我们很抱歉，但有些不对劲。- 使用 Rails、Apache、Passenger

> ID：10513450
> 
> 赞同：25
> 
> 时间：2012-05-09T09:37:01.530
> 
> 标签：ruby-on-rails, apache, passenger, webrick

我有`Rails`3.2.3`Apache`和`Passenger`.

我有一个在开发模式下工作的项目。当我将项目切换到生产模式（`Passenger`标准）时，它给了我一个`HTTP Error 500`：

> 我们很抱歉，但有些不对劲。

即使使用`WEBrick`. 有人可以帮助我吗？

**编辑**：

我的生产环境文件： http: [//pastebin.com/ZAudSzkc](http://pastebin.com/ZAudSzkc)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-09T09:49:53.603

确保你已经跑了`$ bundle install`。如果这不成功，请转到您的生产环境并使用 ssh 和`$ tail -f log/production.log`您当前的生产应用程序连接到您的服务器。

这将生成一个可能显示错误的输出。

如果这在 log/ 目录中没有显示错误，`$ ls -la`如果有任何乘客.error 文件，请打开最新的并检查那里的错误。

希望这对您有所帮助！

* * *

除了 log/production.log，您还应该查看 Web 服务器错误日志，通常是`/var/log/apache2/error.log`或`/var/log/nginx/error.log`. 一些错误被写在那里。更多信息可以在乘客手册的故障排除部分找到：

*   [Nginx 版本](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#_generic_troubleshooting_tips)
*   [阿帕奇版本](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_generic_troubleshooting_tips)
*   [单机版](http://www.modrails.com/documentation/Users%20guide%20Standalone.html#_generic_troubleshooting_tips)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-28T18:22:26.477

我正在努力解决类似类型的问题，并发现通过在 config/environments/production.rb 中将 config.consider_all_requests_local 更改为 true，我可以在生产中显示错误消息并查看实际问题是什么。显然，一旦你解决了问题，就把它改回来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T10:21:10.213

我们遇到了同样的问题，同样的消息，500 错误代码，但它处于开发模式，没有记录任何有用的信息。它只发生在我的一所大学设置中。

问题是字符串中的非 ASCII 字符（这里：像 ü、ß 等变音符号）。我们现在简单地翻译所有内容`I18n.t('text_to_translate')`（在 /config/locales/ 中找到相应的 yaml 翻译文件，有关 I18N 的更多信息，请参见[http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-14T10:49:11.847

我在乘客环境中安装 django 时遇到了类似的问题。

对我来说问题是在`passenger_wsgi.py`文件中自定义 virtualenv Python 安装的路径是错误的。

# mysql - 游戏排名位置

> ID：10513469
> 
> 赞同：0
> 
> 时间：2012-05-09T09:37:50.570
> 
> 标签：mysql, ranking

我有一个高分游戏中的玩家列表。如果我的名字是“jimbo”，我想得到我的分数，并得到我的排名位置和排名中仅次于我的人，好 2 位，差 2 位。

```
CREATE TABLE `players` (
  `id` bigint(100) NOT NULL AUTO_INCREMENT,
  `playername` varchar(15) NOT NULL,
  `email` varchar(300) NOT NULL,
  `highscore` bigint(100) NOT NULL,
  PRIMARY KEY (`id`)
 ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=106 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:48:24.860

实现此目的的一种方法是使用临时表：

```
CREATE TEMPORARY TABLE ranked_players AS
SELECT id, playername, @rownum:=@rownum+1 AS rank
FROM players
JOIN (SELECT @rownum:=0) AS RANK
ORDER BY highscore DESC; 
```

您可能想要添加`id`，或者`playername`如果您想确保具有相同`highscore`.

现在您需要计算玩家的排名（注意 MySQL 不允许您在同一查询中使用临时表两次，因此不能将其放入下一条语句的子查询中）：

```
SELECT rank
INTO @myrank
FROM ranked_players
WHERE playername = 'jimbo'; 
```

然后，您需要获得排名从 2 位到 2 位以下的玩家范围：

```
SELECT players.*
FROM players
JOIN ranked_players USING (id)
WHERE rank BETWEEN (@myrank - 2) AND (@myrank + 2)
ORDER BY highscore DESC; 
```

然后清理临时表：

```
DROP TEMPORARY TABLE ranked_players; 
```

最后，如果您使用实际表中的用户列表预先计算用户列表，则可以将其减少为单个查询，`rank`只要对您的应用程序有意义，您就会刷新（我想这是性能和实时之间的折衷 -尼斯）。您随后使用的查询可以很容易地从上述查询中派生出来，不同之处在于您不受我提到的临时表的限制。

# django - 我无法更新 Django 的 RedirectView。它一直引用状态为 301 Moved Permenantly 的旧 URL

> ID：10513470
> 
> 赞同：5
> 
> 时间：2012-05-09T09:37:52.127
> 
> 标签：django, apache, http-status-code-301, django-class-based-views

抱歉，如果这个问题应该出现在 Server Vault 中。我真的不知道这是编程错误还是服务器配置错误。

我最近将我的 git 提交推送到实时服务器，我注意到一些非常令人沮丧的事情。

不管我怎么编辑`urls.py`，我似乎无法更新`RedirectView`！

这是我的根`mysite/urls.py`

```
urlpatterns = patterns('',
    url(r'^$', RedirectView.as_view(url=reverse_lazy('order_list')), name='home'),
    url(r'^doors/', include('doors.urls')),
    url(r'^accounts/', include('registration.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^{}/'.format(settings.DAJAXICE_MEDIA_PREFIX), include('dajaxice.urls')),
) 
```

命名的 URL`order_list`来自我的应用程序之一`urls.py`

```
urlpatterns = patterns('doors.views',
    url(r'^order/$', OrderListView.as_view(), name='order_list'),
    # And more URL patterns...
) 
```

所以基本上我只是在最后一次提交中更改`r'^orders/$'`为。`r'^order/$'`但每当我这样做时`{% url home %}`，我注意到服务器一直在尝试重定向到**旧**路径`/doors/orders/`而不是`/doors/order/`. 我还注意到重定向是一个`301 Moved Permanently`.

所以我尝试添加并`permenant=False`重新`RedirectView`启动服务器。但它*仍然*会发生`/doors/orders/`并且重定向仍然是`301`（应该是`302`）！

为什么我没有`RedirectView`重定向到更新后的 URL？

* * *

**服务器信息**

在 Gentoo Linux 上使用 mod_wsgi 和 Django 1.4 运行 Apache 2.2.21

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-09T10:15:15.480

原来，`301`重定向被缓存在**浏览器**上！

所以我清除了浏览器的缓存，一切正常。`301`当我并没有真正理解和那之间的区别时，很难知道在哪里寻找错误`302`。我也意识到，因为我`RedirectView`基本上是一个占位符，直到我写一个真正的家庭模板。我应该使用`permanent=False`总是创建一个`302`. 查看[文档](https://docs.djangoproject.com/en/dev/ref/class-based-views/base/#django.views.generic.base.RedirectView.permanent)以了解详细信息。

# c# - C#中的线程+ TabControl

> ID：10513471
> 
> 赞同：4
> 
> 时间：2012-05-09T09:37:54.333
> 
> 标签：c#, winforms, multithreading

这是一个有点奇怪的设置，我正计划重做它，但是，如果没有别的，我希望我能因此而学到更多关于线程的知识。

目前，我正在构建一个应用程序，它使用 TabControl Windows 窗体作为其设计的基础。我有很多不同的事情需要做，所以我认为这可能是最好的方法。

现在，我将宏功能编码到程序中，以便用户可以记录和回放鼠标和键盘操作。这非常好，将它与 System.Timers.Timer 混合也可以。但是，我使用的 DLL 使用 Thread.Sleep(x) 在击键和鼠标执行之间暂停线程。

此时，按钮在不同的标签页上，并切换到不同的页面。但是，点空白设置导致程序在等待宏执行完成时挂起。

为了更好地解释：

*   用户单击主选项卡控件中的按钮。
*   Tabcontrol.SelectedIndex 切换到正确的页面，但不刷新页面（我试过调用this.Refresh()，没用）
*   宏执行
*   Tabcontrol 完成页面加载，但此时，必要的宏已经执行，加载的页面是多余的。

为了解决这个问题，我开始研究线程并了解如何使用它。我在一个类中提出了以下代码：

```
Class X{
  Thread othread;
  ...        
  public void Play()
  {
    if ((othread != null) && !(othread.IsAlive))
    {
        othread = new Thread(playValues);
        GC.Collect();
    }
    else if (othread == null) othread = new Thread(playValues);
    else return;
    othread.Start();
  }

  public void PlayValues(){
  ...
  Thread.CurrentThread.Abort();
  }

} 
```

线程被销毁的原因是，每次用户在主窗体中单击“播放”时，都会调用 X.Play()，所以我需要重用线程（我研究了 Monitor.Pulse()，但是给了我异步调用错误），或者每次完成时永久销毁它。

现在，目前，代码工作正常。然而，每次我必须播放宏时我都会不断地创建和销毁线程这一事实有点令人担忧，而且荒谬的 GC 调用量也让我担心。

如果没有此设置，我能否获得一些关于线程的指示，以及如何更好地做到这一点？事实上，二级标签是一个网页，宏是在网页的表单上执行的。

*   编辑：我不知道我是否没有说清楚，但宏正在使用鼠标和键盘模拟器。另一个选项卡是一个网络浏览器设置，它在里面嵌套了一个小程序，所以我正在模拟硬件功能以执行自动设置。这很有帮助，因为我不需要锁定任何东西（所有鼠标和键盘调用都由模拟器操作，并且与第三选项卡控制的值无关），我只需要能够 a）让线程执行每当用户按下按钮时都具有相同的功能，并且 b) 移除一些多余的材料。

我还被告知'Thread.CurrentThread.Abort'是线程安全的，因此如果你想永远结束它，那么它是结束线程的好方法，但如果我可以让线程重复它的功能而不是杀死它，那就是精彩的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:50:53.047

`AutoResetEvent`要重用播放线程，您可以使用`Set()`主线程中的一个。当线程空闲时也是如此 - 主线程准备播放所需的数据，然后`Set()`sa 不同`AutoResetEvent`，导致播放线程启动。

因此`startPlayingAutoResetEvent`，下面的示例导致线程等待，直到主线程告诉它“开始”，而这`stopPlayingAutoResetEvent`导致播放线程在不执行步骤时响应主线程告诉它“停止”。

**主线程：**

```
// prepare data to play
startPlayingAutoResetEvent.Set();
// ...
stopPlayingAutoResetEvent.Set(); 
```

**播放线程：**

```
while (true)
{
    // wait for the main thread to signal "start"
    startPlayingAutoResetEvent.WaitOne();
    // ensure the stopPlaying is in an unsignalled state
    stopPlayingAutoResetEvent.Reset();

    // gather the data the main thread has prepared

    while (stepsToPlay)
    {
        // wait until main thread signals to stop OR timeout has elapsed
        if (stopPlayingAutoResetEvent.WaitOne(timeout))
        {
            // abort current run and put thread in idle mode, waiting for new commands
            break;
        }
        else
        {
            // play next step
        }
    }
} 
```

# extjs - extjs 应用程序在 Architect 中创建后将无法启动

> ID：10513472
> 
> 赞同：1
> 
> 时间：2012-05-09T09:37:56.647
> 
> 标签：extjs, sencha-architect

我在 Sencha Architect 中创建了一个应用程序。我也制作了商店和模型，视口是初始视图。当我现在在 Firefox 中测试它时，我得到一个错误：

> “c 不是构造函数”

什么也没有发生。生成了很多文件，但生成的一个名为 app.js 的文件包含以下内容：

```
Ext.Loader.setConfig({
enabled: true
});

Ext.application({
models: [
    'providerModel',
    'schedulingModel'
],
stores: [
    'comboboxProviders',
    'gridScheduling',
    'comboboxDriver',
    'comboboxVehicle',
    'comboboxStop',
    'gridLiveMapVehicles',
    'gridConfigurationProviders',
    'comboboxVehicleType',
    'comboboxVehicleProvider',
    'gridConfigurationVehicles',
    'gridConfigurationDrivers',
    'gridConfigurationStops',
    'gridConfigurationRoutes',
    'comboboxTimezone',
    'comboboxRoutes',
    'gridConfigurationRouteXYZ',
    'gridConfigurationDepots',
    'gridConfigurationOperationalDay',
    'gridConfigurationOperationalHour',
    'comboboxClockType',
    'comboboxSpeedFormat',
    'comboboxScheduleMode'
],
autoCreateViewport: true,
name: 'MyApp'
}); 
```

可能是什么问题？

# javascript - 右键单击文本字段是否应该像左键一样移动插入符号？

> ID：10513477
> 
> 赞同：4
> 
> 时间：2012-05-09T09:38:18.820
> 
> 标签：javascript, html, firefox, selection

Firefox 的右键单击行为与 Chrome 和 IE 不同。当我右键单击文本字段时，插入符号不会移动。这是仅适用于Firefox的标准吗？这让我很沮丧。

我希望插入符号移动，然后我可以知道它在哪里`element.selectionStart`，然后找出用户选择的单词。除了firefox，其他浏览器都可以正常工作！

有人知道标准是什么或如何解决这个问题吗？当发生右键单击时，Firefox 确实知道用户选择的确切单词，因为检查拼写有效。但我不知道。

我的代码：-

```
function onContextMenu(evt){
        var el = evt.getTarget(), selStart, r, ln = el.value.length;
        // Get the location of the cursor
        if (el.createTextRange) { // IE
            r = document.selection.createRange().duplicate();
            r.moveEnd('textedit');
            selStart = (r.text == '') ? ln : ln - r.text.length;
        } else { // All compliant browsers
            selStart = el.selectionStart;         //works fine for chrome
        }
} 
```

描述该问题的屏幕截图：-

![在此处输入图像描述](../Images/aa173e7c50cb0ae183145739fba68a89.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:03:06.430

好的。在 Firefox 中，可以使用 event.rangeOffset。

# javascript - html5画布图像数组-将图像绘制到画布

> ID：10513480
> 
> 赞同：1
> 
> 时间：2012-05-09T09:38:23.173
> 
> 标签：javascript, html5-canvas, drawimage

我正在使用 HTML5 画布和 JavaScript 来制作一个基本游戏，我有一个数字 1-10 的图像数组，然后还有另一个数字 1-10 的威尔士单词数组。

我想要做的是从图像数组中选择一个随机元素，从单词数组中选择一个随机元素，并将它们都显示在画布上。然后，用户将单击一个勾号以指示该单词是否代表正确的数字，如果不是，则单击叉号。

问题是我不确定如何将数组元素绘制到画布上。我有以下代码，在我考虑如何随机选择绘制的元素之前，我将使用它来测试它是否有效：

```
function drawLevelOneElements(){
            /*First, clear the canvas */
            context.clearRect(0, 0, myGameCanvas.width, myGameCanvas.height);
            /*This line clears all of the elements that were previously drawn on the canvas. */
            /*Then redraw the game elements */
            drawGameElements();
            /*Now draw the elements needed for level 1 (08/05/2012) */
            /*First, load the images 1-10 into an array */
            var imageArray = new Array();
            imageArray[0] = "1.png";
            imageArray[1] = "2.png";
            imageArray[2] = "3.png";
            imageArray[3] = "4.png";
            imageArray[4] = "5.png";
            imageArray[5] = "6.png";
            imageArray[6] = "7.png";
            imageArray[7] = "8.png";
            imageArray[8] = "9.png";
            imageArray[9] = "10.png";

            /*Then create an array of words for numbers 1-10 */
            var wordsArray = new Array();
            wordsArray[0] = "Un";
            wordsArray[1] = "Dau";
            wordsArray[2] = "Tri";
            wordsArray[3] = "Pedwar";
            wordsArray[4] = "Pump";
            wordsArray[5] = "Chwech";
            wordsArray[6] = "Saith";
            wordsArray[7] = "Wyth";
            wordsArray[8] = "Naw";
            wordsArray[9] = "Deg";

            /*Draw an image and a word to the canvas just to test that they're being drawn */
            context.drawImage(imageArray[0], 100, 30);
            context.strokeText(wordsArray[3], 500, 60);
        } 
```

但由于某种原因，当我在浏览器中查看页面时，在 firebug 控制台中，我收到错误：

> 无法转换 JavaScript 参数 arg 0 [nsIDOMCanvasRenderingContext2D.drawImage] context.drawImage(imageArray[0], 100, 30);

我不确定这是否是我要访问数组元素 0 中的图像的方式......有人可以指出我做错了什么吗？

*** 编辑 ***

我已将 to 数组下方的代码更改为：

```
var image1 = new Image();
            image1.src = imageArray[0];

            /*Draw an image and a word to the canvas just to test that they're being drawn */
            context.drawImage(image1, 100, 30);
            context.strokeText(wordsArray[3], 500, 60); 
```

但由于某种原因，wordsArray 中的唯一元素被绘制到画布上——imageArray 中的图像元素根本不显示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:43:53.273

您需要创建一个 src 设置为您的数组值的 javascript 图像

```
 var img = new Image();
        img.src = imageArray[0];

        ctx.drawImage(img, 100, 30); 
```

如果不这样做，您会尝试让画布绘制一个“1.png”字符串，例如，这不是您想要的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:53:37.117

这是 drawGameElements() 的代码

```
/* This function draws the game elements */
        function drawGameElements(){

            /* Draw a line for the 'score bar'. */
            context.moveTo(0, 25);
            context.lineTo(700, 25);
            context.stroke();

            /* Draw current level/ total levels on the left, and current score on the right. */
            context.font = "11pt Calibri"; /* Text font & size */
            context.strokeStyle = "black"; /* Font colour */
            context.strokeText(currentLevel + "/" + totalLevels, 10, 15);
            context.strokeText(currentScore, 650, 15);
        } 
```

从字面上看，它所做的只是在画布上绘制一个“分数条”，它只是顶部的一条线、当前级别/总级别以及用户的当前分数。我不认为这是问题所在，因为此函数要显示的元素正在正确显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:41:35.550

这是一个旧的，但图像未显示的原因可能是因为您必须调用 onLoad 然后像这样设置 src：

```
var img = new Image();
img.onLoad = function() {ctx.drawImage(img, 100, 30);};
img.src = imageArray[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-28T19:48:55.447

我使用递归调用 img.onload 方法来绘制图像解决了这个问题。例如：

```
 var cx = 10;//x initial position to draw
    var cy = 10;//y initial position to draw
    var space = 300; //distance between images to draw
    var imageArray = new Array();
    imageArray[0] = "1.png";
    imageArray[1] = "2.png";
    imageArray[2] = "3.png";
    //etc....
    //build a Image Object array
    var imgs = new Array();
    for(i = 0; i < imageArray.length; i++){
     imgs[i] = new Image();
     imgs[i].src = imageArray[i];//attention if the images are in a folder 
    }
    var ri = 1;//index of images on the array
    imgs[0].onload = function(){
     context.drawImage(imgs[0], cx, cy);
     cy += imgs[0].height + space;
     callDraw(context, imgs, cx, cy, ri, space);
    } 
```

递归函数定义如下：

```
 function callDraw(context, imgs, cx, cy, ri, space){
     if(ri == imgs.length) 
      return;
     context.drawImage(imgs[ri], cx, cy);
     cy += imgs[ri].height + space;
     ri++;
     callDraw(context, imgs, cx, cy, ri, space);
    } 
```

# refresh - Mahout - FileDataModel：刷新后删除文件？

> ID：10513483
> 
> 赞同：0
> 
> 时间：2012-05-09T09:38:37.960
> 
> 标签：refresh, mahout, datamodel, mahout-recommender

我使用[FileDataModel](https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/cf/taste/impl/model/file/FileDataModel.html)作为 Mahout 中推荐的 DataModel。我首先生成基本文件（例如 prefs.txt）。不时会有一些更改，写入更新文件（prefs.1.txt，prefs.2.txt，...）。

我可以在将旧的更新文件加载到模型后删除它们吗？当我尝试删除它们（在 Windows 中）时，资源管理器说该文件当前由 Java 使用。为什么不允许删除原始文件？我相信数据现在存储在内存中，因此 Mahout 不再需要该文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:35:05.457

它不会重新读取旧文件，只会重新读取新的更新数据。但是，它确实希望“主”数据文件始终存在，因为它一直在寻找其最后修改时间。

一般的想法是，您有时会推送数据文件的完整副本，在此期间，更频繁地推送小型更新文件。如果您这样做，它应该可以按预期工作，并且，是的，您可以在读取更新文件后删除它们。

（当然，如果您重新启动服务器，它必须从最后一个主数据文件以及剩下的任何更新文件重新开始，这可能不完整或不一致。我只会在您推送新的主数据后删除更新数据文件。）

我不知道为什么您不能删除它们，因为它们从未保持打开状态。也许这是一个奇怪的 Windows 事情。

# matlab - 重新编号 MATLAB 图而不保存和打开 .fig 文件

> ID：10513488
> 
> 赞同：2
> 
> 时间：2012-05-09T09:38:46.847
> 
> 标签：matlab, matlab-figure

在 MATLAB R2011b 中，我有一个脚本，它明确指定了一个数字（比如图 1）并在其上绘图。我希望保持此图打开并使用不同的参数再次运行脚本，以便我可以直观地比较新图和以前的图。

如何重命名前一个图（例如，图 2），以便新图不会覆盖它，从而允许两个图都可见，而无需

*   修改脚本，或
*   将前一个图形保存为 .fig 文件并将其重新打开为另一个图形

从两者

1.  命令行，和
2.  使用图形的 GUI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:03:27.157

您可以使用`getobj`将一个图形的内容复制到另一个图形：

```
% get handle of the old figure
oldFigHandle = gcf;

% create new figure 
newFigHandle = figure+1;

% copy the contents from one figure the other
copyobj(get(oldFigHandle , 'children'), newFigHandle); 
```

可以使用`set`和`get`命令复制其他属性：

```
set(newFigHandle, 'color', get(oldFigHandle , 'color')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:42:11.160

根据 H.Muster 的回答，我编写了这个函数来克隆一个图形：

```
%% Clone a figure
%  clone_figure()     - Clone the current figure to a new figure
%  clone_figure(N)    - Clone the current figure to figure N
%  clone_figure(0, M) - Clone figure M to a new figure
%  clone_figure(N, M) - Clone figure M to a figure N
function clone_figure(new_index, old_index)
    % Get handle of original figure
    if (exist('old_index', 'var'))
        if (not(ishandle(old_index)))
            error('myApp:argChk', ['Figure ',num2str(old_index),' undefined']);
        end
        figure(old_index);
    end
    old_handle = gcf;
    % Get handle of clone
    if (exist('new_index', 'var') && new_index)
        if (new_index < 0)
            error('myApp:argChk', ['Index ',num2str(new_index),' invalid']);
        end
        figure(new_index);
    else
        figure;
    end
    new_handle = gcf;
    % Copy figure's contents and properties
    copyobj(get(old_handle, 'Children'), new_handle);
    copyobj(get(old_handle, 'CurrentAxes'), new_handle);
    set(new_handle, 'Alphamap', get(old_handle, 'Alphamap'));
    set(new_handle, 'CloseRequestFcn', get(old_handle, 'CloseRequestFcn'));
    set(new_handle, 'Color', get(old_handle, 'Color'));
    set(new_handle, 'Colormap', get(old_handle, 'Colormap'));
    set(new_handle, 'CurrentPoint', get(old_handle, 'CurrentPoint'));
    set(new_handle, 'DockControls', get(old_handle, 'DockControls'));
    set(new_handle, 'FileName', get(old_handle, 'FileName'));
    set(new_handle, 'IntegerHandle', get(old_handle, 'IntegerHandle'));
    set(new_handle, 'InvertHardcopy', get(old_handle, 'InvertHardcopy'));
    set(new_handle, 'KeyPressFcn', get(old_handle, 'KeyPressFcn'));
    set(new_handle, 'KeyReleaseFcn', get(old_handle, 'KeyReleaseFcn'));
    set(new_handle, 'MenuBar', get(old_handle, 'MenuBar'));
    set(new_handle, 'Name', get(old_handle, 'Name'));
    set(new_handle, 'NextPlot', get(old_handle, 'NextPlot'));
    set(new_handle, 'NumberTitle', get(old_handle, 'NumberTitle'));
    set(new_handle, 'PaperUnits', get(old_handle, 'PaperUnits'));
    set(new_handle, 'PaperOrientation', get(old_handle, 'PaperOrientation'));
    set(new_handle, 'PaperPosition', get(old_handle, 'PaperPosition'));
    set(new_handle, 'PaperPositionMode', get(old_handle, 'PaperPositionMode'));
    set(new_handle, 'PaperSize', get(old_handle, 'PaperSize'));
    set(new_handle, 'PaperType', get(old_handle, 'PaperType'));
    set(new_handle, 'Pointer', get(old_handle, 'Pointer'));
    set(new_handle, 'PointerShapeCData', get(old_handle, 'PointerShapeCData'));
    set(new_handle, 'PointerShapeHotSpot', get(old_handle, 'PointerShapeHotSpot'));
    set(new_handle, 'Position', get(old_handle, 'Position'));
    set(new_handle, 'Renderer', get(old_handle, 'Renderer'));
    set(new_handle, 'RendererMode', get(old_handle, 'RendererMode'));
    set(new_handle, 'Resize', get(old_handle, 'Resize'));
    set(new_handle, 'ResizeFcn', get(old_handle, 'ResizeFcn'));
    set(new_handle, 'SelectionType', get(old_handle, 'SelectionType'));
    set(new_handle, 'ToolBar', get(old_handle, 'ToolBar'));
    set(new_handle, 'Units', get(old_handle, 'Units'));
    set(new_handle, 'WindowButtonDownFcn', get(old_handle, 'WindowButtonDownFcn'));
    set(new_handle, 'WindowButtonMotionFcn', get(old_handle, 'WindowButtonMotionFcn'));
    set(new_handle, 'WindowButtonUpFcn', get(old_handle, 'WindowButtonUpFcn'));
    set(new_handle, 'WindowKeyPressFcn', get(old_handle, 'WindowKeyPressFcn'));
    set(new_handle, 'WindowKeyReleaseFcn', get(old_handle, 'WindowKeyReleaseFcn'));
    set(new_handle, 'WindowScrollWheelFcn', get(old_handle, 'WindowScrollWheelFcn'));
    set(new_handle, 'WindowStyle', get(old_handle, 'WindowStyle'));
    set(new_handle, 'WVisual', get(old_handle, 'WVisual'));
    set(new_handle, 'WVisualMode', get(old_handle, 'WVisualMode'));
    set(new_handle, 'ButtonDownFcn', get(old_handle, 'ButtonDownFcn'));
    set(new_handle, 'Clipping', get(old_handle, 'Clipping'));
    set(new_handle, 'CreateFcn', get(old_handle, 'CreateFcn'));
    set(new_handle, 'DeleteFcn', get(old_handle, 'DeleteFcn'));
    set(new_handle, 'BusyAction', get(old_handle, 'BusyAction'));
    set(new_handle, 'HandleVisibility', get(old_handle, 'HandleVisibility'));
    set(new_handle, 'HitTest', get(old_handle, 'HitTest'));
    set(new_handle, 'Interruptible', get(old_handle, 'Interruptible'));
    set(new_handle, 'Parent', get(old_handle, 'Parent'));
    set(new_handle, 'Selected', get(old_handle, 'Selected'));
    set(new_handle, 'SelectionHighlight', get(old_handle, 'SelectionHighlight'));
    set(new_handle, 'Tag', get(old_handle, 'Tag'));
    set(new_handle, 'UIContextMenu', get(old_handle, 'UIContextMenu'));
    set(new_handle, 'UserData', get(old_handle, 'UserData'));
    set(new_handle, 'Visible', get(old_handle, 'Visible'));
    % from get(gcf) but skip CurrentCharacter, CurrentObject, BeingDeleted, Type
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-30T14:17:50.970

刚刚与 Mathworks 员工交谈，并被告知更好的解决方案是将图形的“HandleVisibility”参数设置为“关闭”以保护它。例如，要保留图 1 和图 2，请执行

```
 set(1:2, 'HandleVisibility', 'off') 
```

然后，MATLAB 会将对这些图形的任何引用映射到新图形，以便原始图形（包括工具设置）保持不变。

虽然这并不能完全回答问题，但它实现了我想要做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T09:44:57.833

[http://www.weizmann.ac.il/matlab/techdoc/ref/figure.html](http://www.weizmann.ac.il/matlab/techdoc/ref/figure.html)

您可以只保存[当前图形的句柄](http://www.mathworks.com/help/techdoc/ref/gcf.html)

```
h = [];
for i = 1:NumGraphs
    h(i) = gcf;
    figure;

    %Your code to create the next graph here
end 
```

然后返回一个特定的图表：

```
figure(h(i)); 
```

# php - Symfony 2 安全组件：使用来自控制器的 loadUserByUsername

> ID：10513497
> 
> 赞同：0
> 
> 时间：2012-05-09T09:39:07.760
> 
> 标签：php, security, symfony

有没有办法使用

loadUserByUsername（UserProviderInterface 实现方法取决于安全配置）

通过服务或其他干净的东西从控制器操作？

我不使用 FOSUserBundle

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:18:47.240

由于本机 EntityUserProvider 是**抽象**的，因此不可能......但是，如果您在自己的公共服务中定义您的方法 loadUserByUsername 并从 EntityUserProvider 调用它，则可以从任何 ContainerAware 类中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:53:56.363

AFAIK Symfony2 不会直接访问已注册的用户提供商。一种肮脏`security.yml`的方法是，用例如`load()`方法解析`DependencyInjection/BundleExtension.php`

```
//DependencyInjection/BundleExtension.php
public function load(array $configs, ContainerBuilder $container)
{
    //...
    //parse security.yml
    //create an array mapping each provider keys in the firewall to the providers 
    //set the array as global parameter using $container->setParameter('provider.mappings', $array)
} 
```

然后在控制器中你可以做

```
$mapping = $this->container->getParameter('provider.mappings');
$providerKey = $this->get('security.context')->getToken()->getProviderKey();
$user = $mapping[$providerKey]->loadUserByUsername('user_name'); 
```

# sql - SQL 查询不同 - 分组依据

> ID：10513498
> 
> 赞同：1
> 
> 时间：2012-05-09T09:39:19.177
> 
> 标签：sql

我在使用 sql 查询时遇到问题。

我有下表（我简化了一点）：

```
 ChainId    ComponentId    TransmitEndpointId
   1            156               NULL
   1            156               7
   1            157               7
   2            510               6
   2            510               6
   2            511               6
   2            511               8 
```

我需要做的是在“唯一”ChainId 中获取 TransmitEndpointId 的 foreach“唯一”ComponentId 的数量。因此上述数据的结果将是：5（链 1 中的 2 个唯一组件 ID 和链 2 中的 2 个唯一组件 ID，具有 2 个不同的 TransmitId ==> NULL 值不计算在内）

这是相当复杂的，不知道如何从这个查询开始。

有人可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:45:57.797

这将为您提供每个 ChainID/ComponentId 组合的唯一计数。

```
SELECT ChainId,
       ComponentId,
       count(distinct TransmitEndpointId)
FROM your_table
GROUP BY ChainId, ComponentId 
```

现在您可以在派生表中使用它来获取总数：

```
SELECT sum(distinct_count)
FROM  (
  SELECT ChainId,
         ComponentId,
         count(distinct TransmitEndpointId) as distinct_count
  FROM your_table
  GROUP BY ChainId, ComponentId
) t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:00:08.093

添加 `where TransmitEndpointId is not null`or 你会得到一个 0 因为 NULL

```
SELECT ChainId,
       ComponentId,
       count(distinct TransmitEndpointId)
FROM chain
where TransmitEndpointId is not null
GROUP BY ChainId, ComponentId

select sum(endPointNr) from 
(
SELECT count(distinct TransmitEndpointId) as     endPointNr
FROM chain
where TransmitEndpointId is not null
GROUP BY ChainId, ComponentId
) X 
```

![在此处输入图像描述](../Images/d6acc53d07b557fa12c563a0d13e6181.png)

编辑（为什么添加 `TransmitEndpointId is not null`）

![在此处输入图像描述](../Images/b1c92b2589ad4638ab619fc5a85a72ca.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:05:46.660

我想这就是你想要的

请尝试此代码

```
SELECT COUNT(DISTINCT ChainId,ComponentId,TransmitEndpointId)
FROM your_table
WHERE TransmitEndpointId IS NOT NULL 
```

# jquery - 自动完成按钮单击jquery

> ID：10513507
> 
> 赞同：0
> 
> 时间：2012-05-09T09:39:42.403
> 
> 标签：jquery, jquery-autocomplete

我想在单击按钮时显示整个自动完成列表。我已经尝试了下面的代码，但它不起作用。

```
 $("#<%= btnCompanyList.ClientID%>").live('click', function (e) {
        alert("hi");
        $("#txtDefaultCompany").autocomplete({
                    source: function (request, response) {
                        $.ajax({
                            url: "AutoComplete.asmx/GetCompanyname",
                            data: "{'prefixText':" + JSON.stringify(request.term) + "}",
                            dataType: "json",
                            type: "POST",
                            contentType: "application/json; charset=utf-8",
                            dataFilter: function (data) { return data; },
                            success: function (data) {
                                alert(data.d);
                                response($.map(data.d, function (item) {
                                    return {
                                        label: item.company_name,
                                        value: item.company_branch
                                    }
                                }))
                            }
                        });
                    },
                    minLength:0

                });

    }); 
```

单击按钮时，文本框可能为空。但我想显示整个列表。请有任何想法或建议。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:12:17.590

您需要根据文档在自动完成对象上调用[.search](http://docs.jquery.com/UI/Autocomplete#method-search)

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T19:05:46.500

简单的，

你在这里有一个例子：[在 jsfiddle](https://jsfiddle.net/stefan_pacurar/82swjoos/)

但是，如果您想将它与 ajax 调用一起使用，则只需将以下内容添加到 ajax "success:" 函数中：

```
$(yourtxt).autocomplete({
    source: JSON.parse(resultData),
    minLength: 0
}).on("focus", function () {
    $(this).autocomplete("search", '');
});

// set product combobox source
$(yourtxt).autocomplete('search', ''); 
```

# c# - 当 Horizo ntalAlignment = Stretch 时，VisualStateManager 更改模板化控件的背景

> ID：10513509
> 
> 赞同：1
> 
> 时间：2012-05-09T09:39:44.800
> 
> 标签：c#, silverlight, xaml, visualstatemanager

我在 silverlight 应用程序中使用了这个出色的[CollapsibleGridSplitter](http://shemesh.wordpress.com/2010/07/10/silverlight-gridsplitter-with-a-collapse%C2%A0button-%E2%80%93-best/)。控制模板如下。

我想做的是当拆分器是垂直或水平时，更改 CollapsibleGridSplitter 的背景。例如，当 VerticalAlignment=Stretch 时将 Background 设置为 SplitterBackgroundV，当 Horizo​​ntalAlignment=Stretch 时将 Background 设置为 SplitterBackgroundH。

![在此处输入图像描述](../Images/18c8f954f59f8b4e4813e4fd074c5cfe.png)

（请参阅设置默认背景的样式的第一行`<Setter Property="Background" Value="{StaticResource SplitterBackgroundV}" />`）

由于这是 Silverlight，我需要使用 VisualStateManager（我对它的了解比 WPF 触发器少得多）。

有什么建议么？

提前致谢！

```
 <LinearGradientBrush x:Key="SplitterBackgroundV" StartPoint="0,0" EndPoint="1,0">
    <GradientStop Color="#FFC3C3C3"/>
    <GradientStop Color="#FFDDDDDD" Offset="0.4"/>
    <GradientStop Color="#FFDDDDDD" Offset="0.6"/>
    <GradientStop Color="#FFC3C3C3" Offset="1"/>
  </LinearGradientBrush>

  <LinearGradientBrush x:Key="SplitterBackgroundH" StartPoint="0,0" EndPoint="0,1">
    <GradientStop Color="#FFC3C3C3"/>
    <GradientStop Color="#FFDDDDDD" Offset="0.4"/>
    <GradientStop Color="#FFDDDDDD" Offset="0.6"/>
    <GradientStop Color="#FFC3C3C3" Offset="1"/>
  </LinearGradientBrush>

  <Style TargetType="Controls:CollapsibleGridSplitter">
    <Setter Property="Background" Value="{StaticResource SplitterBackgroundV}" />
    <Setter Property="IsTabStop" Value="False" />
    <Setter Property="PreviewStyle" Value="{StaticResource GridSplitterPreviewStyle}" />
    <Setter Property="VerticalHandleStyle" Value="{StaticResource VerticalGridSplitterHandleStyle}" />
    <Setter Property="HorizontalHandleStyle" Value="{StaticResource HorizontalGridSplitterHandleStyle}" />
    <Setter Property="HorizontalAlignment" Value="Center" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Controls:CollapsibleGridSplitter">
          <Grid x:Name="Root" IsHitTestVisible="{TemplateBinding IsEnabled}">
            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal" />
                <VisualState x:Name="MouseOver" />
                <VisualState x:Name="Disabled"/>
              </VisualStateGroup>
              <VisualStateGroup x:Name="FocusStates">
                <VisualStateGroup.Transitions>
                  <VisualTransition GeneratedDuration="0" />
                </VisualStateGroup.Transitions>
                <VisualState x:Name="Unfocused" />
                <VisualState x:Name="Focused">
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="FocusVisual" Storyboard.TargetProperty="Opacity" To="1" Duration="0" />
                  </Storyboard>
                </VisualState>
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Border x:Name="SplitterBackground" BorderThickness="1,0,1,0" BorderBrush="#FF999999" 
                    DataContext="{TemplateBinding IsCollapsed}"
                    IsHitTestVisible="{Binding Converter={StaticResource InverseBooleanConverter}}"
                    Opacity="{Binding Converter={StaticResource BooleanToValueConverter}}"
                    Background="{TemplateBinding Background}">
            </Border>
            <Grid x:Name="HorizontalTemplate">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="*" />
              </Grid.ColumnDefinitions>
              <ToggleButton x:Name="HorizontalGridSplitterHandle" Grid.Column="1" IsHitTestVisible="True" Style="{TemplateBinding HorizontalHandleStyle}" RenderTransformOrigin="0.5,0.5" IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsCollapsed, Mode=TwoWay}">
                <ToggleButton.RenderTransform>
                  <ScaleTransform ScaleY="1" />
                </ToggleButton.RenderTransform>
              </ToggleButton>
            </Grid>
            <Grid x:Name="VerticalTemplate" Visibility="Collapsed">
              <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="50" />
                <RowDefinition Height="*" />
              </Grid.RowDefinitions>
              <ToggleButton x:Name="VerticalGridSplitterHandle" Grid.Row="1" IsHitTestVisible="True" Style="{TemplateBinding VerticalHandleStyle}" RenderTransformOrigin="0.5,0.5" IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsCollapsed, Mode=TwoWay}">
                <ToggleButton.RenderTransform>
                  <ScaleTransform ScaleX="1" />
                </ToggleButton.RenderTransform>
              </ToggleButton>
            </Grid>
            <Rectangle x:Name="FocusVisual" Stroke="#FF6DBDD1" StrokeThickness="1" Opacity="0" IsHitTestVisible="false" />
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:56:12.503

复制“SplitterBackground”边框并将其粘贴到模板的网格中两次 - 为每个实例命名不同（并记住相应地设置`Grid.ColumnSpan`）`Grid.RowSpan`。对于每个新边框，设置您需要的背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:18:18.823

我不认为 VisualStateManager 是正确的方法。相反，将控件子类化，然后重写 OnApplyTemplate，然后自己设置背景属性。另一种方法是声明一个附加属性，该属性侦听 PropertyChanged 事件并相应地交换背景。

# sql - 简单的 SQL 嵌套选择查询不再起作用

> ID：10513510
> 
> 赞同：1
> 
> 时间：2012-05-09T09:39:46.367
> 
> 标签：sql, sql-server-2008, view, nested

我有一个相对简单的查询，通常需要不超过 10 秒才能返回。如下：

```
SELECT personid 
FROM vw_has_copyright 
WHERE (Orderid IN (SELECT orderid 
                   FROM orders WHERE eventid = 1234)) 
GROUP BY personid 
ORDER BY personid 
```

现在它只是在我运行这个查询时挂起。如果我运行`select orders.orderid from orders where orders.eventid = 1234`- 然后使用从此查询生成的列表，`select personid from vw_has_copyright where Orderid in (*my list here...*)`它工作正常。

那么为什么它不再使用嵌套选择查询呢？看起来很奇怪，但我不确定如何调试它？提前致谢！！

- -编辑 - -

相当尴尬的是，问题在于我没有正确维护我的索引。由于我的订单表索引上的高度碎片化，查询突然停止工作，但是在重建和重组它们之后，查询现在又可以工作了！故事的寓意 - 照顾你的数据库！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:47:38.443

`IN`非常棘手，特别是在通常有大量记录的订单表上。我建议将其更改为 EXISTS 甚至是常规加入。

[这](http://weblogs.sqlteam.com/mladenp/archive/2007/05/18/60210.aspx)是一个很好的链接，解释了这三个操作数之间的区别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:50:17.317

尝试这样的事情

```
SELECT CopyRight.personid 
FROM vw_has_copyright CopyRight
     Inner Join orders order on order.orderid = CopyRight.Orderid
WHERE  order.eventid = 1234
GROUP BY CopyRight.personid 
ORDER BY CopyRight.personid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:23:11.170

您应该定期执行索引维护和统计更新，以确保查询始终如一地执行。

检查执行计划以查看 SQL Server 是否在执行任何意外（表扫描与索引查找）也很重要。

# git - 如何使用 Git 挂钩部署我的网站？

> ID：10513515
> 
> 赞同：0
> 
> 时间：2012-05-09T09:39:51.797
> 
> 标签：git, repository, githooks

我最近开始在我的日常工作流程中使用 Git，我真的很喜欢使用它。

我在我的 VPS 上名为 website.git 的文件夹下有一个裸在线 repo (git init --bare --shared)，并在需要时从本地推送更改，这绝对没问题。现在，当我在本地存储库中保存数据时，我将更改推送到网上，但随后我也必须手动将文件移动到 public_html 文件夹中，正如您可以想象的那样，这真的很痛苦。

我尝试过使用[http://toroid.org/ams/git-website-howto](http://toroid.org/ams/git-website-howto)中描述的 git 钩子，但它的权限对我不起作用。

public_html 和 website.git 文件夹都归 www-data:developers 所有，但是当 post-receive 钩子启动时，它无法取消链接旧文件，并且任何新文件都自动归 jack:jack 所有，这是我使用 SSH 连接到服务器的用户。

我的 hooks/post-receive 文件是可执行的并且包含：

```
#!/bin/sh
GIT_WORK_TREE=/home/web/website.com/public_html git checkout -f 
```

我的在线回购存储在

```
/home/web/website.com/website.git 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:13:10.153

这是一个基本的操作系统权限问题：当您用于`ssh`推送更改时，git 用于`ssh`连接到远程主机（作为您选择的某些用户——这就是为什么 url 允许 ssh:// *user@host* /path）所以为了在主机上运行命令，这些命令会拾取被推送的对象（提交、树、blob 和/或标签）并将它们插入到目标 repo 中。不管那个用户是谁，然后也运行钩子。因此，当 post-receive 挂钩运行时，它会以该用户身份运行。

您可以使 public_html 目录更具可写性（以便您的所有`git push`用户都可以写入）；您可以以用户身份登录`www-data`；或者您可以使用 set-uid 程序以`git checkout -f`www-data 用户身份运行，但具有任何 set-uid 程序的所有常见危险。（该`sudo`命令可以用于最后一种技术。`sudo -n -u www-data`我想你会想要的，虽然我从来没有真正设置过这种东西。）

* * *

注意：我做了一些实验，在目标主机上安装了一个旧的（1.7.0.3）版本的 git。这有一个相对路径失败的错误。为了解决这个问题，这是我最终得到的结果`hooks/post-receive`（注意，这是非常原始的，因为它不检查推送到的内容）：

```
#! /bin/sh
umask 0 # let everyone have write permission on everything
export GIT_DIR=$(readlink -f $(git rev-parse --git-dir))
export GIT_WORK_TREE=$(readlink -f /tmp/t)
(cd $GIT_WORK_TREE && git checkout -f) 
```

在较新的 git（已修复错误）中，您将不需要上述所有内容（尽管它确实在手动运行时使钩子工作，这很方便）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:53:38.087

我遇到了与您类似的权限问题，并使用[了另一种技术](https://stackoverflow.com/a/13165630/412426)进行部署，但我确实将我的 apache 更改为使用我的 git 用户。它对我`git 1.7.9`有用`Ubuntu 12.04.1 LTS`。`Apache/2.2.22`

我的 git 用户被调用`git`，我的 apache 使用了该`ubuntu`用户。我必须编辑 apache 配置`/etc/apache2/conf.d/security`（你也可以这样做`/etc/apache2/http.conf`）以包括：

```
User git
Group git 
```

现在我`/var/www/myproject`在推送上部署所有文件，使用`git:git`用户/组创建文件，我的 apache 使用相同的用户/组运行。

`hooks/post-receive`您可以随时将其添加到脚本的末尾：

```
chown -R www-data:developers /home/web/website.com/public_html 
```

现在您只需要重新启动服务器或执行`service apache2 restart`

# amazon-ec2 - Cassandra Amazon EC2 ，大量的 IOWait

> ID：10513516
> 
> 赞同：4
> 
> 时间：2012-05-09T09:39:54.623
> 
> 标签：amazon-ec2, cassandra, iowait

我们在 Amazon EC2/Rightscale m1.large 实例上的单节点 cassandra 上有以下统计信息，其中包含 2 个带有 raid0 的临时磁盘。（7.6 GB 总内存）

4 GB RAM 分配给 cassandra Heap，800MB 是 Heap NEW 大小。

以下统计数据来自 OpsCenter 社区 2.0

每秒读取请求 285 到 340 每秒
写入请求 257 到 720
操作系统负载 15.15 到 17.15
写入请求延迟 293 到 685 微秒
操作系统发送的网络流量 18 MB 到 30 MB 每秒
操作系统接收的网络流量 22 MB 到 34 MB 每秒
操作系统磁盘队列大小 23 到 26 个请求
读取请求待处理 8 到 20 个
读取请求延迟 69140 到 92885 微秒
OS 磁盘延迟 37 到 42 毫秒
OS 磁盘吞吐量 12 到 14 Mb/秒
磁盘 IOP 读取 600 到 740 每秒
磁盘 IOP 写入 2 到 7 次第二

IOWait 60 到 70 % CPU 平均

空闲 24 到 30 % CPU 平均

行缓存被禁用。

上述统计数据是否满足所提供的配置......或者我们如何进行更多调整以减少 IOWait............因为我们认为我们正在经历很多 IOWait......我们如何调整它以获得最佳效果。

读取请求是混合的............一些来自一个超级列系列和一个标准，拥有超过百万个键......并且不同的没有。超级列最多 14 个，数量不等。从 1 到 10000 的子列和不同的编号。标准列族中最多 14 列......子列本质上非常薄，值为 0 字节......名称为 8 个字节。

过程是从超级列族中删除数据并将处理后的数据写入标准列族。

EBS 磁盘会更好地工作吗……在 Amazon EC2 上

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:25:49.690

我不确定您是否可以轻松调整配置以获得更高的磁盘性能，但使用 Snappy 压缩可以帮助您减少应用程序的整体读取需求。使用新的复合键布局而不是超级列也*可能会*有所帮助。

我可以肯定地说一件事：EBS*不会*更好地工作。如果您关心延迟，请不惜一切代价远离它。

# redirect - 使用 DNS 而不是 iframe 显示其他域

> ID：10513520
> 
> 赞同：0
> 
> 时间：2012-05-09T09:40:11.247
> 
> 标签：redirect, dns

我在不同的提供商处购买了 2 个域名，我希望[http://aaaaa.com](http://aaaaa.com)显示[http://bbbbb.com/aaaaa](http://bbbbb.com/aaaaa)

这可能只使用DNS吗？我必须将域转移到拥有[http://bbbb.com](http://bbbb.com)域的托管服务提供商吗？我真的不想使用重定向或 iframe。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:54:07.177

您可以通过两种方式在 DNS 级别执行此操作：

根据您的提供商，您可以使用掩码将[http://DomainA.com/](http://DomainA.com/)重定向到[http://DomainB/Folder](http://DomainB/Folder)现在，如果 SEO 对您很重要，这是不成熟的做法。

如果您有自己的服务器，或者您可以在服务器上添加虚拟目录，您可以将 DomainA 指向该服务器并将[http://DomainB/文件夹](http://DomainB/Folder)位置作为起点。

这可以通过 Apache、Nginx 或 IIS 完成。

请你能给我更多关于你有什么操作系统和什么样的主机的解释，以便我可以帮助你吗？还有什么样的应用程序，因为如果您使用 .net 它与使用普通的 PHP 或 HTML 或 wordpress 有点不同......您将需要添加虚拟目录来实现这一点。

如果您使用共享主机并拥有 Apache 网络服务器，那么最简单的方法是：.htaccess 和 Apache 也可以处理这种重定向。 [http://www.site5.com/blog/apache/htaccess/redirect-to-blog/20090427/](http://www.site5.com/blog/apache/htaccess/redirect-to-blog/20090427/)

问候并希望这会有所帮助。

# sharepoint - 报告查看器配置错误

> ID：10513522
> 
> 赞同：0
> 
> 时间：2012-05-09T09:40:27.290
> 
> 标签：sharepoint, reportviewer

我想在 SharePoint 中显示报告。我的 ASPX 页面包含一个`Microsoft.ReportViewer.WebForms.ReportViewer`控件。当我尝试打开此页面时，出现错误：

> 报告查看器配置错误
> 
> 报告查看器 Web 控制 HTTP 处理程序尚未在应用程序的 web.config 文件中注册。添加 <add verb="*" path="Reserved.ReportViewerWebControl.axd" type = "Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />到 web.config 文件的 system.web/httpHandlers 部分，或添加 <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting. WebForms.HttpHandler、Microsoft.ReportViewer.WebForms、Version=10.0.0.0、Culture=neutral、PublicKeyToken=b03f5f7f11d50a3a" /> 到 Internet Information Services 7 或更高版本的 system.webServer/handlers 部分。
> 
> 连接到报表服务器的尝试失败。检查您的连接信息以及报表服务器是否为兼容版本。
> 
> 客户端发现响应内容类型为 'text/html; charset=utf-8'，但应为 'text/xml'。请求失败并显示错误消息：-- 401 UNAUTHORIZED<RSError xmlns="http://www.microsoft.com/sql/reportingservices"><MoreInformation><Message>Unbekannter Fehler beim Reporting Services-Endpunkt für diese SharePoint-Website . Wenden Sie sich an den Administrator der SharePoint-Website。</Message></MoreInformation></RSError> --。

我是否确实需要将此部分添加到 web.config 中？我应该在哪里添加这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T13:15:45.487

尝试添加以下部分，

```
<add verb="*" path="Reserved.ReportViewerWebControl.axd" type = "Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" /> 
```

在`system.web`部分`handlers`

并添加以下部分

```
<add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" /> 
```

在`system.webserver`部分`handlers`

实际上，错误消息说明了一切！希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-17T08:29:00.440

这是我解决此问题后的完整 web.config：

```
 <?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
 <system.web>
    <httpHandlers>
      <add verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    </httpHandlers>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <defaultDocument>
      <files>
        <add value="PreviewReport.aspx" />
      </files>
    </defaultDocument>
    <handlers>
      <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    </handlers>
  </system.webServer>
</configuration>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-13T16:04:55.613

谢谢 。我将godaddy与共享主机一起使用，这个解决方案非常适合我的应用程序，非常感谢。

```
<system.webServer>
<validation validateIntegratedModeConfiguration="false" />
<handlers>

    <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />

</handlers>
</system.webServer> 
```

# perl - perl（良好实践）：套接字的词法文件句柄

> ID：10513523
> 
> 赞同：7
> 
> 时间：2012-05-09T09:40:29.523
> 
> 标签：perl, sockets

在 perdoc [Socket](http://perldoc.perl.org/Socket.html)页面中，他们使用套接字的全局文件句柄。但是，如果我在子进程调用的子例程中创建一个套接字，那么使用仍然使用 Socket 的词法文件句柄会更好吗？

像这样：

```
use strict;
use Socket;
sub sendData
{
    my $proto = getprotobyname('tcp');
    my $socket;
    socket($socket, PF_INET, SOCK_STREAM, $proto);
    ...
    close($socket)
} 
```

代替：

```
sub sendData
{
    my $proto = getprotobyname('tcp');
    socket(SOCKET, PF_INET, SOCK_STREAM, $proto);
    ...
    close(SOCKET)
} 
```

似乎还可以，但是我不知道这是更好的做法还是完全没用...

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T09:50:18.987

是的，使用词法文件句柄是一种更好的做法。但是 Perl 5.0 没有它们，所以有很多使用全局文件句柄的旧代码和文档，其中大部分还没有更新为使用词法句柄。

PS你知道你可以说

```
socket(my $socket, PF_INET, SOCK_STREAM, $proto); 
```

而不是放在`my`前一行，对吧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:08:44.157

是的，使用词法范围而不是全局总是更好。如果您需要唯一的句柄，尽管是全局的，请尝试[Symbol 包](http://search.cpan.org/~flora/perl-5.14.2/lib/Symbol.pm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:44:08.223

`Socket`如果您需要对套接字的配置方式进行一些低级调整，该模块很有用，但对于大多数用途（如果不是几乎所有用途），该[`IO::Socket::INET`](http://p3rl.org/IO%3a%3aSocket%3a%3aINET)模块提供了一个更简单的界面。它的构造函数将套接字句柄作为对象返回，无需担心全局文件句柄。

# c# - 从 HTML 表中获取数据到数据表中

> ID：10513529
> 
> 赞同：5
> 
> 时间：2012-05-09T09:40:43.227
> 
> 标签：c#, html, linq, xpath, html-agility-pack

好的，所以我需要查询一个实时网站以从表中获取数据，将此 HTML 表放入 DataTable 中，然后使用此数据。到目前为止，我已经设法使用 Html Agility Pack 和 XPath 来访问我需要的表中的每一行，但我知道必须有一种方法可以将其解析为 DataTable。(C#) 我目前使用的代码是：

```
string htmlCode = "";
using (WebClient client = new WebClient())
{
htmlCode = client.DownloadString("http://www.website.com");
}
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();

doc.LoadHtml(htmlCode);

//My attempt at LINQ to solve the issue (not sure where to go from here)
var myTable = doc.DocumentNode
.Descendants("table")
.Where(t =>t.Attributes["summary"].Value == "Table One")
.FirstOrDefault();

//Finds all the odd rows (which are the ones I actually need but would prefer a
//DataTable containing all the rows!
foreach (HtmlNode cell in doc.DocumentNode.SelectNodes("//tr[@class='odd']/td"))
{
string test = cell.InnerText;
//Have not gone further than this yet!
} 
```

我正在查询的网站上的 HTML 表如下所示：

```
<table summary="Table One">
<tbody>
<tr class="odd">
<td>Some Text</td>
<td>Some Value</td>
</tr>
<tr class="even">
<td>Some Text1</td>
<td>Some Value1</td>
</tr>
<tr class="odd">
<td>Some Text2</td>
<td>Some Value2</td>
</tr>
<tr class="even">
<td>Some Text3</td>
<td>Some Value3</td>
</tr>
<tr class="odd">
<td>Some Text4</td>
<td>Some Value4</td>
</tr>
</tbody>
</table> 
```

我不确定使用 LINQ + HAP 或 XPath + HAP 是否更好/更容易获得所需的结果，正如您可能看到的那样，我尝试了两者都取得了有限的成功。这是我第一次编写程序来查询网站甚至以任何方式与网站交互，所以我现在非常不确定！提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T08:22:29.253

使用上面 Jack Eker 的一些代码和 Mark Gravell 的一些代码（[请参阅此处的帖子](https://stackoverflow.com/questions/655603/html-agility-pack-parsing-tables)），我设法提出了一个解决方案。此代码段用于获取撰写本文时南非 2012 年的公共假期

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Web;
using System.Net;
using HtmlAgilityPack;

namespace WindowsFormsApplication
{
    public partial class Form1 : Form
    {
        private DataTable dt;
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            string htmlCode = "";
            using (WebClient client = new WebClient())
            {
                client.Headers.Add(HttpRequestHeader.UserAgent, "AvoidError");
                htmlCode = client.DownloadString("http://www.info.gov.za/aboutsa/holidays.htm");
            }
            HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();

            doc.LoadHtml(htmlCode);

            dt = new DataTable();
            dt.Columns.Add("Name", typeof(string));
            dt.Columns.Add("Value", typeof(string));

            int count = 0;

            foreach (HtmlNode table in doc.DocumentNode.SelectNodes("//table"))
            {

                foreach (HtmlNode row in table.SelectNodes("tr"))
                {

                    if (table.Id == "table2")
                    {
                        DataRow dr = dt.NewRow();

                        foreach (var cell in row.SelectNodes("td"))
                        {
                            if ((count % 2 == 0))
                            {
                                dr["Name"] = cell.InnerText.Replace("&nbsp;", " ");
                            }
                            else
                            {

                                dr["Value"] = cell.InnerText.Replace("&nbsp;", " ");

                                dt.Rows.Add(dr);
                            }
                            count++;

                        }

                    }

                }

                dataGridView1.DataSource = dt;

            }
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T09:55:06.107

HTML Agility Pack 中没有这种开箱即用的方法，但创建一个应该不会太难。那里有从 Linq-to-XML 将 XML 转换为 Datatable的[示例。](http://naspinski.net/post/XML-to-DataTable-with-LINQ.aspx)这些可以重新加工成您需要的东西。

如果需要，我可以帮助创建整个方法，但不是今天 :)。

也可以看看：

*   [HTML 敏捷包 - 解析表](https://stackoverflow.com/questions/655603/html-agility-pack-parsing-tables)
*   [使用 HTMLAGILITYPACK 解析 html 并加载到数据表 C#](https://stackoverflow.com/questions/9265313/parsing-html-with-htmlagilitypack-and-loading-into-datatable-c-sharp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T09:30:49.567

这是我的解决方案。可能有点混乱，但目前运行良好：D

```
string htmlCode = "";
using (WebClient client = new WebClient())
{
client.Headers.Add(HttpRequestHeader.UserAgent, "AvoidError");
htmlCode = client.DownloadString("http://www.website.com");
}
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();

doc.LoadHtml(htmlCode);

DataTable dt = new DataTable();
dt.Columns.Add("Name", typeof(string));
dt.Columns.Add("Value", typeof(decimal));

int count = 0;
decimal rowValue = 0;
bool isDecimal = false;
foreach (var row in doc.DocumentNode.SelectNodes("//table[@summary='Table Name']/tbody/tr"))
{
DataRow dr = dt.NewRow();
foreach (var cell in row.SelectNodes("td"))
{
if ((count % 2 == 0))
{
dr["Name"] = cell.InnerText.Replace("&nbsp;", " ");
}
else
{
isDecimal = decimal.TryParse((cell.InnerText.Replace(".", "")).Replace(",", "."), out rowValue);
if (isDecimal)
{
dr["Value"] = rowValue;
}
dt.Rows.Add(dr);
}
count++;
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-25T11:12:20.907

将 htmltable 转换为 datatable 的简单逻辑：

```
//Define your webtable
public static HtmlTable table
            {
                get
                {
                    HtmlTable var = new HtmlTable(parent);
                    var.SearchProperties.Add("id", "searchId");
                    return var;
                }
            }

//Convert a webtable to datatable
public static DataTable getTable
            {
                get
                {
                    DataTable dtTable= new DataTable("TableName");
                    UITestControlCollection rows = table.Rows;
                    UITestControlCollection headers = rows[0].GetChildren();
                    foreach (HtmlHeaderCell header in headers)
                    {
                        if (header.InnerText != null)
                            dtTable.Columns.Add(header.InnerText);
                    }
                    for (int i = 1; i < rows.Count; i++)
                    {
                        UITestControlCollection cells = rows[i].GetChildren();
                        string[] data = new string[cells.Count];
                        int counter = 0;
                        foreach (HtmlCell cell in cells)
                        {
                            if (cell.InnerText != null)
                                data[counter] = cell.InnerText;
                            counter++;
                        }
                        dtTable.Rows.Add(data);
                    }
                    return dtTable;
                }
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-14T04:46:11.547

你可以试试

```
 DataTable.Rows[i].Cells[j].InnerText; 
```

其中 DataTable 是表的 id，i 是行，j 是单元格。

# android - Android 4.0 c2dm 问题

> ID：10513530
> 
> 赞同：2
> 
> 时间：2012-05-09T09:40:48.937
> 
> 标签：android, push-notification, android-c2dm, android-4.0-ice-cream-sandwich

当我使用 android c2dm 向我的设备推送通知时，我遇到了一个奇怪的问题。

如果我使用“管理应用程序->我的应用程序->强制停止”关闭应用程序并尝试向我的设备发送推送，则它不起作用。

它适用于我所有其他 Android 版本低于 4.0 的设备。

有任何想法吗？

谢谢

编辑：好的，我进行了更多调查，似乎以这种方式杀死应用程序时无法运行后台代码。

系统日志向我显示：

```
05-09 11:43:15.450: W/GTalkService(25542): [DataMsgMgr] broadcast intent callback: result=CANCELLED forIntent { act=com.google.android.c2dm.intent.RECEIVE cat=[net.scimob.xxxxxx] (has extras) } 
```

我不知道为什么它适用于以前版本的 android 而不是 4.0 及更高版本。也许谷歌在他们的代码中改变了一些东西。

ps：当我使用任务杀手时，它不会使用相同的方式来杀死应用程序并且c2dm推送仍然有效。

我希望这会在未来有所帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:02:00.793

> 如果我使用“管理应用程序->我的应用程序->强制停止”关闭应用程序并尝试向我的设备发送推送，则它不起作用。

正确的。不要那样做。

> 它适用于我所有其他 Android 版本低于 4.0 的设备。

从 Android 3.1 开始就可以看到这种效果。首次安装或强制停止的应用程序在用户手动启动某些活动之前不会再次运行。

# regex - 我应该为此示例使用什么正则表达式？

> ID：10513531
> 
> 赞同：0
> 
> 时间：2012-05-09T09:40:51.637
> 
> 标签：regex, notepad++

我有这样的命令输出

```
hdisk10                  128000         200B75Y4191001707210790003IBMfcp
hdisk11                  128000         200B75Y4191001807210790003IBMfcp
hdisk13                  128000         200B75Y4191001A07210790003IBMfcp
hdisk14                  128000         200B75Y4191001B07210790003IBMfcp
hdisk15                  128000         200B75Y4191001C07210790003IBMfcp
hdisk16                  128000         200B75Y4191001D07210790003IBMfcp
hdisk17                  128000         200B75Y4191001E07210790003IBMfcp
hdisk18                  128000         200B75Y4191001F07210790003IBMfcp
hdisk19                  128000         200B75Y4191002007210790003IBMfcp 
```

`hdisk`我只想要包含名称的第一列。我想删除`hdiskXX`每一行中的所有内容。`XX`可以是1-3位数，多为2位数。

我尝试了以下正则表达式

**寻找 ：** `hdisk[0-9][0-9].*`

**替换:** :`hdisk[0-9][0-9]`

但结果字符串就像`hdisk[0-9][0-9]`而不是`hdisk10`. 为什么它不解释`[0-9]`为正则表达式并简单地按字面意思对待它？

我应该在这里使用什么正则表达式来完成我想要的？

我在支持正则表达式搜索和替换的 Notepad++ 上尝试这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:43:21.547

您需要使用捕获组。尝试搜索`(hdisk[0-9]+).*`并将其替换为`\1`.

`\1`意思是“在第一个括号内找到的*任何东西”*。

（参考： http: [//ozansafi.wordpress.com/2008/12/11/notepad-regular-expression-usage/](http://ozansafi.wordpress.com/2008/12/11/notepad-regular-expression-usage/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:43:55.553

这是非常普遍的，但应该工作。查找`\s+\d+\s+200B.*`并替换为空字符串。我不确定您是否可以在记事本++中使用 \d 和 + ...自己检查

# html - 如何避免谷歌页面速度的过度序列化？

> ID：10513551
> 
> 赞同：0
> 
> 时间：2012-05-09T09:42:08.300
> 
> 标签：html, seo

我注意到谷歌的页面速度在实验规则中存在错误，以避免过度序列化。 [https://developers.google.com/pagespeed/#url=http_3A_2F_2Fim.7arena.com&mobile=false](https://developers.google.com/pagespeed/#url=http_3A_2F_2Fim.7arena.com&mobile=false)

任何人都可以说，如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:21:27.513

通过提供来自多个主机名的内容：http: [//www.faresweb.net/tutorial/web-site-optimization-avoid-excess-serialization](http://www.faresweb.net/tutorial/web-site-optimization-avoid-excess-serialization)

# javascript - jQuery `.val` 报告一个选择的值，没有选择任何选项

> ID：10513553
> 
> 赞同：0
> 
> 时间：2012-05-09T09:42:19.583
> 
> 标签：javascript, jquery

我有一个看起来像这样的选择：

```
<select id   = "baz"
        name = "Baz"
        size = 1>
  <option value="A1"> foo</option>
  <option value="A2"> bar</option>
  ...etc
  <option value="A99"> bat</option>
</select> 
```

我已经从 Firebug 中提取了这段代码（并对其进行了编辑），因为选项本身是由 CGI 从服务器读取的`#include`。

选择的值最终被 JavaScript 读取如下：

```
var $input_baz = $("#baz");
...
var baz_pl = $input_baz.val(); 
```

问题：选择位于隐藏的 div 中，没有进行任何选择，但`baz_pl`包含 value `A1`。为什么`.val()`在没有选择任何内容时返回第一个条目，是否有一个简单的解决方法？选择出现在弹出窗口中，我可以添加代码来检测是否单击了弹出“确定”按钮，但如果可能的话，我宁愿正确执行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T09:51:43.330

默认情况下始终选择第一个选项。您可以添加一个虚拟条目作为第一个条目，其值不会出现在列表中。

例如：

```
<option value="-1">-- Please select --</option> 
```

# blackberry - 如何在黑莓中创建自定义管理器

> ID：10513554
> 
> 赞同：0
> 
> 时间：2012-05-09T09:42:22.357
> 
> 标签：blackberry

我正在寻找黑莓中的自定义管理器，它连续使用 5 个不同的字段。所有字段都应该是交互式的。我已经粘贴了我希望使用 blackberry 5.0 SDK 实现的图像。请帮助开始

![在此处输入图像描述](../Images/0e341912493d9cfe4c56b236cea011c6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:29:19.847

我试过这样的东西 -![在此处输入图像描述](../Images/f50bdd090878c5f36817ff6201a457fe.png)

试试下面的代码 -

```
 import net.rim.device.api.system.Bitmap;
    import net.rim.device.api.ui.component.BitmapField;
    import net.rim.device.api.ui.component.ButtonField;
    import net.rim.device.api.ui.component.LabelField;
    import net.rim.device.api.ui.container.HorizontalFieldManager;
    import net.rim.device.api.ui.container.MainScreen;
    import net.rim.device.api.ui.container.VerticalFieldManager;

public class scree_align extends MainScreen{

public scree_align(){

    HorizontalFieldManager hfm_main=new HorizontalFieldManager();/*{
         protected void sublayout(int maxWidth, int maxHeight) 
          { 
              super.sublayout(Display.getWidth(),200); setExtent(Display.getWidth(),200);
          }
      };*/

    HorizontalFieldManager hfm_1=new HorizontalFieldManager();
    final Bitmap back = Bitmap.getBitmapResource("image.png");
    hfm_1.add(new BitmapField(back));
    hfm_1.setMargin(5,5,0,0);

    VerticalFieldManager vfm_1=new VerticalFieldManager();
    ButtonField btn1=new ButtonField("Button1");
    ButtonField btn2=new ButtonField("Button1");
    vfm_1.add(btn1);
    vfm_1.add(btn2);

    VerticalFieldManager vfm_2=new VerticalFieldManager();
    ButtonField btn3=new ButtonField("Button2");
    ButtonField btn4=new ButtonField("Button2");
    vfm_2.add(btn3);
    vfm_2.add(btn4);

    HorizontalFieldManager hfm_2=new HorizontalFieldManager();
    LabelField lab=new LabelField("Text");
    hfm_2.add(lab);
    hfm_2.setMargin(30,0,0,5);

    hfm_main.add(hfm_1);
    hfm_main.add(vfm_1);
    hfm_main.add(vfm_2);
    hfm_main.add(hfm_2);

    add(hfm_main);

}

} 
```

# asp.net-mvc-3 - autofac如何选择一个实现

> ID：10513559
> 
> 赞同：0
> 
> 时间：2012-05-09T09:42:48.227
> 
> 标签：asp.net-mvc-3, dependency-injection, autofac

我尝试在 MVC3 应用程序中理解 Autofac。当我有一个接口的多个实现时，我如何以及在哪里可以决定要使用哪一个？或者拥有多个实现是否“不好”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:17:35.910

[可以使用名称和键来区分同一服务的许多实现。](http://code.google.com/p/autofac/wiki/TypedNamedAndKeyedServices)

# google-maps-api-3 - 处理 Google Streetview 自定义全景图上的叠加层

> ID：10513560
> 
> 赞同：2
> 
> 时间：2012-05-09T09:42:49.863
> 
> 标签：google-maps-api-3, google-street-view

我正在尝试在自定义谷歌街景全景图上使用叠加层。我可以简单地把一个放在我的全景图上，但位置是完全随机的（我做了一些尝试，直到效果没问题），并且渲染模式的变化（在渲染为球体的 chrome 中）改变了效果。问题很清楚：自定义全景图没有关于其尺寸的信息（它只有一个 LatLng），因此相对位置是错误的。我错过了什么吗？我唯一需要做的就是在房间的墙壁上放置一些可点击的标签，这些标签会随着旋转的全景图而自行修改。我搜索了很多，但我的努力没有结果。Mapsicle 似乎做了我需要的，但如果我理解正确，这是一个死项目。

# android - android在webview中加载本地（在Asset/Res/External Storage中）pdf文件

> ID：10513561
> 
> 赞同：3
> 
> 时间：2012-05-09T09:42:50.177
> 
> 标签：android, android-webview

```
我想在 webview 中显示 pdf 文件。
我尝试使用此代码显示空白页。
文件检索 perfacly 但不在 webView 中显示。
当我运行应用程序时，将 webview 的屏幕截图显示 webview。
显示空白网页视图。像这样....
```

![在此处输入图像描述](../Images/bd6cd9fab4c4fd771d303fb432d121ba.png)

```
private WebView view;
Uri path;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        view = (WebView) findViewById(R.id.webView);
        File file = new File(Environment.getExternalStorageDirectory()
                .getAbsolutePath() + "/Documents/MyPDFFILE.pdf");
        path = Uri.fromFile(file);
        view.setContentDescription("application/pdf");
        view.getSettings().setJavaScriptEnabled(true);
        view.getSettings().setLoadsImagesAutomatically(true);
        view.getSettings().setPluginsEnabled(true);
        view.getSettings().setAppCacheEnabled(true);
        view.loadUrl(path.toString());

        // view.loadUrl("http://grail.cba.csuohio.edu/~matos/notes/cis-493/lecture-notes/Android-Chapter10-WebKit.pdf");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T09:47:16.913

因为，Android`WebView`不支持**PDF**文件功能。并且`WebView`无法渲染 PDF。

您在评论中发布的 URL 在本机网络浏览器中显示 pdf 文件，因为它**使用 Google Docs**。

如果你想在你的 webview 中显示 pdf 文件，那么使用 Google Docs 传递你的 pdf 文件的 url，它位于服务器上而不是你的本地。

**更新：** 用于在 webview 中显示位于网络上的 pdf 文件的代码。

```
WebView webview = (WebView) findViewById(R.id.webview);
webview.getSettings().setJavaScriptEnabled(true); 
String pdf = "http://www.xxxx.com/xxxx/xxxx.pdf";
webview.loadUrl("http://docs.google.com/gview?embedded=true&url=" + pdf); 
```

# sharepoint - 从列表中读取共享点页面标题

> ID：10513567
> 
> 赞同：0
> 
> 时间：2012-05-09T09:43:00.253
> 
> 标签：sharepoint, title, sharepoint-designer, sharepoint-list

我有一个 SharePoint 2007 页面，它使用查询字符串从列表中动态显示新闻详细信息，所有新闻都显示在`NewsDetails.aspx`这样的页面中`NewsDetails.aspx?ID=112`，我想要做的是从新闻列表中读取页面标题，以便它显示不同的每个页面取决于页面中的新闻标题，使网站对搜索引擎更加友好，

我注意到页面标题来自

```
 <asp:Content ContentPlaceHolderId="PlaceHolderPageTitle" runat="server">
<SharePoint:EncodedLiteral runat="server" text="<%$Resources:wss,multipages_homelink_text%>" EncodeMethod="HtmlEncode"/> 
- 
<SharePoint:ProjectProperty Property="Title" runat="server"/> 
```

有没有办法将其更改`<%$Resources:wss,multipages_homelink_text%>`为列表字段值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:27:00.907

您可以修改母版页并将 PlaceHolderPageTitle 占位符的内容替换为您的自定义控件。此自定义控件可以检查请求的 url 是否包含 NewsDetails.aspx 如果是这样您可以设置自定义文本在所有其他情况下您可以显示 multipages_homelink_text

# javascript - 如果链接包含某些文本，则更改链接颜色

> ID：10513573
> 
> 赞同：0
> 
> 时间：2012-05-09T09:43:22.237
> 
> 标签：javascript, html, css

```
var test = document.body.getElementsByTagName("a");
for (var i=0; i<test.length; i++) 
if(test[i].innerHTML().indexOf("search string") != -1){test[i].style.color="black";} 
```

希望我正在尝试做的事情很明显 - 如果页面上有包含搜索短语的链接，请将其颜色更改为黑色。这虽然行不​​通。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:46:25.487

`innerHTML`是属性而不是函数，所以不要使用`()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T09:47:02.280

innerHTML 不是一个函数，它是一个属性。尝试这样做：

```
var test = document.body.getElementsByTagName("a");
for (var i=0; i<test.length; i++) 
if(test[i].innerHTML.indexOf("search string") != -1){test[i].style.color="black";} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:50:15.300

```
var test = document.body.getElementsByTagName("a");
for (var i=0; i<test.length; i++) {
  var newElem = test[i].innerHTML;
  if(newElem.indexOf("searchString") != -1){
    test[i].style.color="black";
  }
} 
```

​innerHTML 是没有功能的！是财产！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T09:54:19.620

一种更简洁的方法是使用 jQuery：

```
var searchTerm = 'term1';

$('a').filter(function (a) {
    if (this.innerHTML.indexOf(searchTerm) != -1)
        return true;
    return false;           
}).css('color','red') 
```

# copy - Install4j：如何在运行时复制和修改启动器

> ID：10513578
> 
> 赞同：1
> 
> 时间：2012-05-09T09:43:33.627
> 
> 标签：copy, runtime, launcher, install4j

在我的安装程序中，我需要一些启动器，根据用户输入将它们安装为服务。除了名称中的索引之外，这些启动器都是相同的。

我不想手动创建所有这些启动器，因为那将无法维护。

**有没有办法在安装程序运行时复制和修改启动器，然后将它们安装为服务？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:57:55.293

没有理由在运行时复制服务启动器。您可以使用“安装服务”操作来安装具有不同服务名称的多个服务。为此，请在该操作的“服务”属性中选择“其他服务可执行文件”，然后您可以选择和可执行*以及*（变量）服务名称以及变量参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T14:10:01.173

我也有一个用例，我想在其中将启动器重命名为运行时。

假设您想要有一个 Testinfrastructure，您不仅要测试程序的一个实例，而且要测试多个实例。并且您想使用 Install4J 中的启动器来启动您的应用程序。

假设您有 5 个服务需要启动以提供所需的功能。现在考虑为 10 个客户提供 10 个实例，您想进行测试。此外，您不想在 10 台不同的机器、Docker、VM 或任何其他机器上测试它，而是在一台机器上测试它。

这是不可能的，因为您无法在运行时重命名服务。沃尔夫冈，我理解你的问题。我的也是类似的。

我玩了一下 Launcher.exe。也许您的案例有解决方案。假设您想要的 Launchernames 的长度都相同，例如： - Launcher_01.exe - Launcher_02.exe - Launcher_03.exe - Launcher_04.exe - Launcher_05.exe

然后，您可以生成一个名为“Launcher_xy.exe”的启动器。

现在可以打开您最喜欢的 Hex-Editor 并搜索“Launcher_xy”，将其重命名为“Launcher_01”并将数据保存回 exe 文件。但请注意不要更改名称的长度。如果您更改长度，它将不起作用。

因此，如果您更改了名称，然后执行

```
Launcher_xy.exe -install non-interactive 
```

您将在 Windows-Services 下获得一个名为“Launcher_01.exe”的新服务。

# ruby-on-rails - 在对虾中使用列表

> ID：10513581
> 
> 赞同：13
> 
> 时间：2012-05-09T09:43:45.357
> 
> 标签：ruby-on-rails, prawn

我使用 prawn 创建包含大量表格格式数据和一些列表的 pdf。列表的问题在于，我只是将文本用作列表，因为没有与 ul > li 列表等效的语义，就像我在 webfrontend 中使用它们一样。所以这些列表是不合理的。使用多条线的列表点看起来令人毛骨悚然，因为我不适合列表图标。如何在虾中实现看起来不像垃圾的列表？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-23T16:10:40.697

Prawn 是一个很好的 PDF 库，但问题在于它自己的视图系统。有[虾格式](https://github.com/sandal/prawn-format)，但不再维护。

我建议使用[WickedPDF](https://github.com/mileszs/wicked_pdf)，它允许您在 PDF 中包含简单的 ERB 代码。

*使用 Prawn*：另一个**肮脏和丑陋**的解决方案是*没有边框*的两列表格，第一列包含列表项目符号，第二列文本：

```
table([ ["•", "First Element"],
        ["•", "Second Element"],
        ["•", "Third Element"] ]) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-05T21:37:02.250

我刚刚遇到了类似的问题，并在 Prawn 中以与使用表格略有不同的方式解决了它：

```
["Item 1","Item 2","Item 3"].each() do |list-item|

  #create a bounding box for the list-item label
  #float it so that the cursor doesn't move down
  float do
    bounding_box [15,cursor], :width => 10 do
      text "•"
    end
  end

  #create a bounding box for the list-item content
  bounding_box [25,cursor], :width => 600 do
    text list-item
  end

  #provide a space between list-items
  move_down(5)

end 
```

这显然可以扩展（例如，您可以使用 each_with_index() 而不是 each() 来创建编号列表）。它还允许边界框中的任意内容（在表格中是不允许的）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-11T14:57:17.813

一个很好的解决方案，它尊重光标位置并像一个真正的列表一样用少量代码呈现：

```
items = ["first","second","third"]
def bullet_list(items)
  start_new_page if cursor < 50
  items.each do |item|
    text_box "•", at: [13, cursor]
    indent(30) do
      text item
    end
  end
end 
```

start_new_page 子句涵盖项目符号行项目可能需要进入下一页的情况。这使项目符号与项目符号内容保持一致。

示例 PDF 渲染屏幕截图：

![示例呈现列表](../Images/5a8dc440efbabc9d27f671abb81d0399.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-02T16:43:06.080

要使用 Adob​​e 的内置字体创建项目符号，请使用 \u2022。

```
\u2022 This will be the first bullet item
\u2022 blah blah blah 
```

Prawn 支持带有 WinAnsi 代码的符号（又名字形），这些符号必须编码为 UTF-8。有关更多详细信息，请参阅此帖子：[https ://groups.google.com/forum/#!topic/prawn-ruby/axynpwaqK1g](https://groups.google.com/forum/#!topic/prawn-ruby/axynpwaqK1g)

Prawn 手册有一个完整的受支持字形列表。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-30T09:41:28.133

刚刚为客户做了这个。对于想要呈现包含 ul / ol 列表的预格式化 html 的每个人：

```
def render_html_text(text, pdf)
  #render text (indented if inside ul)
  indent = 0 #current indentation (absolute, e.g. n*indent_delta for level n)
  indent_delta = 10 #indentation step per list level
  states = [] #whether we have an ol or ul at level n
  indices = [] #remembers at which index the ol list at level n, currently is

  #while there is another list tag do
  #  => starting position of list tag is at i
  #  render everything that comes before the tag
  #  cut everything we have rendered from the whole text
  #end
  while (i = text.index /<\/?[ou]l>/) != nil do
    part = text[0..i-1]
    if indent == 0 #we're not in a list, but at the top level
      pdf.text part, :inline_format => true
    else
      pdf.indent indent do
        #render all the lis
        part.gsub(/<\/li>/, '').split('<li>').each do |item|
          next if item.blank? #split may return some ugly start and end blanks

          item_text = if states.last == :ul
                        "• #{item}"
                      else # :ol
                        indices[indices.length-1] = indices.last + 1
                        "#{indices.last}. #{item}"
                      end

          pdf.text item_text, :inline_format => true
        end
      end
    end

    is_closing = text[i+1] == '/' #closing tag?
    if is_closing
      indent -= indent_delta
      i += '</ul>'.length

      states.pop
      indices.pop
    else
      pdf.move_down 10 if indent == 0

      type_identifier = text[i+1] #<_u_l> or <_o_l>
      states << if type_identifier == 'u'
                  :ul
                elsif type_identifier == 'o'
                  :ol
                else
                  raise "what means type identifier '#{type_identifier}'?"
                end
      indices << 0

      indent += indent_delta
      i += '<ul>'.length
    end

    text = text[i..text.length-1] #cut the text we just rendered
  end

  #render the last part
  pdf.text text, :inline_format => true unless text.blank?
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-18T14:43:41.913

一种解决方法是创建一种类似于 crm 答案的方法。不同之处在于当文本转到另一个页面时它不会中断，并且您也可以有多个级别。

```
def bullet_item(level = 1, string)
    indent (15 * level), 0 do
        text "• " + string
    end
end 
```

只需像这样调用此方法：

```
bullet_item(1, "Text for bullet point 1")
bullet_item(2, "Sub point") 
```

随意重构。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-25T15:36:09.267

我认为更好的方法是使用 Nokogiri**预处理**HTML 字符串，只留下 Prawn 可以使用“inline_format”选项管理的基本标签，如以下代码所示：

```
def self.render_html_text(instr)
   # Replacing <p> tag
   outstr = instr.gsub('<p>',"\n")
   outstr.gsub!('</p>',"\n")
   # Replacing <ul> & <li> tags
   doc = Nokogiri::HTML(outstr)
   doc.search('//ul').each do |ul|
     content = Nokogiri::HTML(ul.inner_html).xpath('//li').map{|n| "• #{n.inner_html}\n"}.join
     ul.replace(content)
   end
   #removing some <html><body> tags inserted by Nokogiri
   doc.at_xpath('//body').inner_html
end 
```

# vim - 重新加载缓冲区中的所有文件后文件类型设置丢失

> ID：10513583
> 
> 赞同：10
> 
> 时间：2012-05-09T09:43:49.060
> 
> 标签：vim

运行后`:bufdo e!` 我的所有文件都会丢失它们的文件类型设置，我必须`:set ft=XXX`在每个文件中手动运行。

有谁知道如何解决这个问题？

运行`:bufdo set ft=XXX`不起作用，我无论如何都不想将所有文件设置为相同的文件类型。

干杯。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T10:29:19.820

出于性能原因，该`bufdo`命令不会更新语法突出显示：

来自 vim 文档：

*注意：在执行此命令时，通过将语法自动命令事件添加到“eventignore”来禁用它。这大大加快了每个缓冲区的编辑速度*

您可以通过重新运行来更新受影响缓冲区的语法突出显示：

`:syntax on`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T11:27:57.407

您可以通过以下 autocmd 自动修复此问题：

```
" Enable syntax highlighting when buffers were loaded through :bufdo, which
" disables the Syntax autocmd event to speed up processing.
augroup EnableSyntaxHighlighting
    " Filetype processing does happen, so we can detect a buffer initially
    " loaded during :bufdo through a set filetype, but missing b:current_syntax.
    " Also don't do this when the user explicitly turned off syntax highlighting
    " via :syntax off.
    " Note: Must allow nesting of autocmds so that the :syntax enable triggers
    " the ColorScheme event. Otherwise, some highlighting groups may not be
    " restored properly.
    autocmd! BufWinEnter * nested if exists('syntax_on') && ! exists('b:current_syntax') && ! empty(&l:filetype) | syntax enable | endif

    " The above does not handle reloading via :bufdo edit!, because the
    " b:current_syntax variable is not cleared by that. During the :bufdo,
    " 'eventignore' contains "Syntax", so this can be used to detect this
    " situation when the file is re-read into the buffer. Due to the
    " 'eventignore', an immediate :syntax enable is ignored, but by clearing
    " b:current_syntax, the above handler will do this when the reloaded buffer
    " is displayed in a window again.
    autocmd! BufRead * if exists('syntax_on') && exists('b:current_syntax') && ! empty(&l:filetype) && index(split(&eventignore, ','), 'Syntax') != -1 | unlet! b:current_syntax | endif
augroup END 
```

**Edit**: Add autocmd nesting for proper restore of highlight groups and handle buffer reloads, as the question explicitly asked for this.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-24T11:48:39.023

If you're checking for changed files (for example after switching branches in your VCS) then `:checktime` may be a more appropriate solution than `:bufdo e!` - it's designed for this purpose and doesn't have the syntax highlighting issue.

# c++ - 如何以更少的开销管理字符串切片？

> ID：10513590
> 
> 赞同：4
> 
> 时间：2012-05-09T09:44:12.823
> 
> 标签：c++, substring, cstring, slice, stdstring

我正在处理 C++ 程序中的巨型（最多 2GB）字符串及其切片。在这种情况下，C 风格的字符串似乎不可靠，但可以简单地切片（最后没有 '\0'）。另一方面，据我了解， std::string::substr 复制切片，因此我应该为每个索引执行至少一个额外的加法操作（索引 + 基数），以保持内存使用合理。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T09:51:08.550

最通用的解决方案是使用您需要的接口创建一个切片对象，然后使用它。切片对象可以由两个迭代器组成，开始和结束。

# php - 在电子邮件中附加 base64_encoded 字符串 - Codeigniter

> ID：10513596
> 
> 赞同：0
> 
> 时间：2012-05-09T09:44:26.167
> 
> 标签：php, codeigniter

我花了最后一天创建一个脚本，当客户从我们的网站购买东西时，它将创建一个 PDF 收据。创建 PDF 后，我使用[ob_get_clean()将输出保存到变量](http://php.net/manual/en/function.ob-get-clean.php)

然后我把这个变量变成一个 base64_encoded 字符串。完成后，我将字符串保存到数据库中。现在，在那之后我想做的是获取字符串并以某种方式将其保存为电子邮件的附件，以便用户可以将其作为文件下载。我试过谷歌，但我没有发现任何真正有用的东西。

我找到了这个线程，但据我在 Codeigniter 电子邮件库中看到的（我可能错过了），请求的功能没有实现。这是请求，[电子邮件类：从字符串添加附件](http://codeigniter.com/forums/viewthread/89686/#452473)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:50:32.773

您可以创建自己的库并使用 php 邮件功能和适当的标头发送电子邮件。

```
function send_email($to, $from, $subject, $body, $attachment_string)
{

$filename = "receipt.pdf";
$uid = md5(uniqid(time())); 
$attachment=chunk_split($attachment_string);

$headers = "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
$headers .= "From: <".$from.">\r\n";
$headers .= "This is a multi-part message in MIME format.\r\n";
$headers .= "--".$uid."\r\n";
$headers .= "Content-type:text/html; charset=iso-8859-1\r\n";
$headers .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$headers .= $body."\r\n\r\n";
$headers .= "--".$uid."\r\n";
$headers .= "Content-Type: application/pdf; name=\"".basename($filename)."\"\r\n"; // use different content types here
$headers .= "Content-Transfer-Encoding: base64\r\n";
$headers .= "Content-Disposition: attachment; filename=\"".basename($filename)."\"\r\n\r\n";
$headers .= $attachment."\r\n\r\n";
$headers .= "--".$uid."--";

if(mail($to, $subject, $body, $headers))
{
    echo "success";
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-27T12:48:01.733

在 codeigniter 电子邮件类中，当我们将 mime 类型作为参数传递时，将执行以下代码。

```
$file_content =& $file; // buffered file

$this->_attachments[] = array(
        'name'      => array($file, $newname),
        'disposition'   => empty($disposition) ? 'attachment' :    $disposition,  // Can also be 'inline'  Not sure if it matters
        'type'      => $mime,
        'content'   => chunk_split(base64_encode($file_content)),
        'multipart' => 'mixed'
    ); 
```

`chunk_split(base64_encode($file_content))` 将破坏我们传递给`$this->email->attach()`函数的 base64 文件。

所以我将代码更改为

```
 $file_content =& $file; // buffered file
    $file_content = ($this->_encoding == 'base64') ? $file_content   :  chunk_split(base64_encode($file_content)); 
```

现在附件数组为：

```
 $this->_attachments[] = array(
        'name'      => array($file, $newname),
        'disposition'   => empty($disposition) ? 'attachment' :  $disposition,  // Can also be 'inline'  Not sure if it matters
        'type'      => $mime,
        'content'   => $file_content,
        'multipart' => 'mixed'
    ); 
```

现在，当我使用以下命令初始化电子邮件时：

```
 $config['_bit_depths'] = array('7bit', '8bit','base64');
   $config['_encoding'] = 'base64'
   $this->load->library('email',$config); 
```

可能是我做错了，但它有效。

```
 $this->email->attach($base64,'attachment','report.pdf','application/pdf'); 
```

下载修改后的电子邮件类：

[https://github.com/aqueeel/CI-Base64EmailAttach](https://github.com/aqueeel/CI-Base64EmailAttach)

# javascript - 如何在 jquery 表达式中使用函数的字符串参数

> ID：10513602
> 
> 赞同：0
> 
> 时间：2012-05-09T09:44:36.563
> 
> 标签：javascript, jquery, html, javascript-events

我有一些链接和选择框。我的html代码如下

```
<div>
    <div>
        <a href='#' onclick='set_checked(false,"checkbox1")'>clear</a>
        <a href='#' onclick='set_checked(true,"checkbox1")'>select</a>
    </div>
    <div>
        <input type='checkbox' name='checkbox1'/>
    </div>
</div>

<div>
    <div>
        <a href='#' onclick='set_checked(false,"checkbox2")'>clear</a>
        <a href='#' onclick='set_checked(true,"checkbox2")'>select</a>
    </div>
    <div>
        <input type='checkbox' name='checkbox2'/>
    </div>
</div> 
```

现在我的要求是，当我单击`select`链接时，我必须根据它的参数检查复选框。并反转以清除。在这里，我传递了 2 个参数。一种是传递布尔值（即如果为真，则检查否则取消选中），另一种是传递复选框字段的名称参数。
我正在使用以下功能来选中或取消选中复选框

```
function set_checked(checked,inputFeildName){
   $('input[name=inputFeildName]').attr('checked',checked);
} 
```

但上面的代码不起作用。这是我的小提琴[http://jsfiddle.net/vu6fs/5/](http://jsfiddle.net/vu6fs/5/)。

我还有一个要求，在选择任何复选框之前，必须禁用所有清除链接，在选择复选框后，必须启用相应的清除链接。我在javascript中应用了不透明度和“禁用”属性，但它不起作用，任何人都可以告诉我我的错在哪里..

任何人都可以帮助我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:47:37.523

**jQuery 1.6+**

```
function set_checked(checked,inputFeildName){

   $('input[name="'+ inputFeildName +'"]').prop('checked',true);

} 
```

**jQuery 1.5 及以下**

```
function set_checked(checked,inputFeildName){

   $('input[name="'+ inputFeildName +'"]').attr('checked','checked');

} 
```

这是您扩展问题的示例（您想要的更多，关于`a`复选框更改时禁用/启用标签）

**CSS**

```
.disButton {
    background: transparent;
    border: none;
}
.disButton a {
    text-decoration: none;
    color: #ddd;
} 
```

**jQuery**

```
$('input:checkbox').on('change', function() {
    enable_clear(this, this.checked);
}).change();

function enable_clear(el, checked) {
    var target = $(el).parent('div').prev('div').find('a:contains(clear)');
    if (checked) {
        target.unwrap();
    } else {
        target.wrap($('<button/>', {
            disabled: true,
            'class': 'disButton',
            width: target.width() + 'px'
        }));
    }
}
$('a').on('click', function(e) {
    e.preventDefault();
    var target = $(this).parent().next('div').find('input:checkbox');
    if (!target.is(':checked') && $(this).text() == 'select') target.click();
    if ($(this).text() == 'clear') target.click();
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/ucqDT/6/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:46:24.927

您忘记附加我按如下方式执行的字符串，这将解决您的问题

```
function set_checked(checked,inputFeildName)
{
    $('input[name="'+ inputFeildName+'"]').attr('checked',checked);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T09:47:00.953

我认为这就是你想要做的......顺便说一句，你拼错`field`了，所以再次使用变量/属性时要小心。

```
function set_checked(checked,inputFeildName){
   $('input[name="'+inputFeildName+'"]').attr('checked',checked);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T10:31:20.293

您的小提琴中有一些错误：

*   您的函数`set_checked`在 onLoad-Handler 中声明（如所选），并且仅在本地可用而不在全局范围内可用。通过选择“no wrap (head)”删除包装功能或将您的功能分配给`window.set_checked`.
*   请注意，该`checked`属性仅代表复选框的*默认值*，要更改您需要使用该[`checked`属性](https://developer.mozilla.org/en/DOM/HTMLInputElement)的实际状态（使用 jQuery，您可以使用[val()](http://api.jquery.com/val/)）。
*   如果要更改默认值，则无法通过将属性设置为 (the string) 来实现`false`。该属性通过其存在表示一个选中的复选框，您需要`removeAttribute()`用于禁用。`defaultChecked`将属性与布尔值一起使用会更容易。
*   最后但并非最不重要的是，所有其他人都检测到了一个明显的错误：要使用变量，您需要*使用它*而不是将其名称放入字符串中（就像在 PHP 中一样）。

`id`你也可能对s 比对`name`属性更满意。我已经用适当的解决方案更新了你的小提琴：http: [//jsfiddle.net/vu6fs/7/](http://jsfiddle.net/vu6fs/7/)

在不合适时禁用清除/选择链接：

*   你不能`disable`像表单元素一样使用链接（锚点）（请参阅[使用 javascript 禁用链接](https://stackoverflow.com/questions/3929598/disable-link-using-javascript)、[jQuery 禁用链接](https://stackoverflow.com/questions/970388/jquery-disable-a-link)、[使用 css 禁用链接](https://stackoverflow.com/questions/2091168/disable-a-link-using-css)）。好的，我们真的不需要禁用它的功能（没有任何变化），所以我猜你只想把它变灰。
    这可以通过 CSS 完成，您需要在用户更改事件和设置上触发更新`set_checked`。[http://jsfiddle.net/vu6fs/9/](http://jsfiddle.net/vu6fs/9/)上的示例代码
*   仅使用一个切换选中状态的链接可能会更容易。它的字母可能会在“清除”和“选择”之间变化，具体取决于当前状态。

我现在[编写了一个插件](http://jsfiddle.net/mL4Z3/)（即一个 jQuery 原型函数）来动态地将这些链接添加到任何复选框元素。这意味着它也可以使用（范围）点击处理程序而不是全局范围污染`set_checked`函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T09:57:43.753

该函数有一点错误：

```
function set_checked(checked,inputFeildName){  
     $(**'input[name='+inputFeildName+']'**).attr('checked',checked);
} 
```

# visual-c++ - 如何在托管 C++ 中将属性名称作为字符串获取

> ID：10513604
> 
> 赞同：6
> 
> 时间：2012-05-09T09:44:44.693
> 
> 标签：visual-c++, properties, c++-cli, managed-c++

我看到很多在 C# 中执行此操作的条目，但对于 C++ 则没有

我在一些托管 C++ 代码中有一组属性，用于在 C# 部分和 c++ 部分之间传递数据。在 C# 方面，[这里](https://stackoverflow.com/questions/4266426/c-sharp-how-to-get-the-name-in-string-of-a-class-property)提供的答案非常有效，我想用 C++ 做类似的事情。链接中包含的解决方案副本：

```
string NameOf<T>(Expression<Func<T>> expr) {
    return ((MemberExpression) expr.Body).Member.Name;
}

var gmtList = new SelectList(repository.GetSystemTimeZones(),
    NameOf(() => tz.Id),
    NameOf(() => tz.DisplayName)); 
```

我的问题是我似乎无法获得正确的调用语法，特别是本节：

```
() => tz.DisplayName 
```

我似乎无法在网上找到有关如何在 C++ 中执行此操作的资源，因此，如果有人有任何经验或链接，我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T19:09:41.557

我已经为所有这些 lambdas 和很酷的 System::Linq 命名空间（包括 CLinq 库和其他东西）苦苦挣扎了几个小时，然后......我只是想：为什么不使用纯粹的静态决策？

我们只是声明

```
/// Convert X to "X", the classical preprocessing trick
#define GetPropName(TheClassName, ThePropertyName) #ThePropertyName 
```

然后我们可以做

```
Console::WriteLine( GetPropName(TimeZone, Id) ); 
```

将“Id”打印在屏幕上。

是的……现在是有趣的部分。类型安全。我听到关于这个解决方案的评论风暴（“不！这不好，它不检查 ThePropertyName 是否在课堂上！”）

好的。解决方案：让我们使用在虚拟 TheClassName 实例中使用 ThePropertyName 的宏生成一些无意义的代码。

```
/// This macro will produce the compilation error if ThePropertyName is not in the class named TheClassName
#define CheckForPropertyExistence(TheClassName, ThePropertyName) \
/* Create an array of Objects which will be converted to string and ignored*/ \
(gcnew array<System::Object^> { (gcnew TheClassName())->ThePropertyName })->ToString()

/// We get the property name using the "dinosaur strategy" - good old macro concatenated with the empty string which in turn is formed in CheckFor() macro
#define GetPropertyName(TheClassName, ThePropertyName) \
(gcnew System::String(#ThePropertyName)) + CheckForPropertyExistence(TheClassName, ThePropertyName)->Substring(0,0) 
```

现在我们可以给出完整的示例：

```
using namespace System;

/// Sample class
public ref class TheTimeZone
{
public:
    TheTimeZone()
    {
        _Id = 0;
        _DisplayName = "tmp";
    }

    property int Id
    {
    public:
        int get() {return _Id;}
        void set(int v) { _Id = v; }
    }

    property String^ DisplayName
    {
    public:
        String^ get() { return _DisplayName; }
        void set(String^ v) { _DisplayName = v; }
    }

private:
    int _Id;
    String^ _DisplayName;
};

/// This macro will produce the error if ThePropertyName is not in the class named TheClassName
#define CheckForPropertyExistence(TheClassName, ThePropertyName) \
/* Create an array of Objects which will be converted to string and ignored*/ \
(gcnew array<System::Object^> { (gcnew TheClassName())->ThePropertyName })->ToString()

/// We get the property name using the "dinosaur strategy":
/// good old macro concatenated with the empty string
/// which in turn is formed in CheckFor() macro
#define GetPropertyName(TheClassName, ThePropertyName) \
(gcnew System::String(#ThePropertyName)) + \
CheckForPropertyExistence(TheClassName, ThePropertyName)->Substring(0,0)

/// To get properties from objects with no default constructor
#define GetPropertyNameForObject(TheObject, ThePropertyName) \
(gcnew System::String(#ThePropertyName)) + \
(gcnew array<System::Object^> { (TheObject)-> ThePropertyName })->ToString()->Substring(0,0)

/// Test for our macros
int main(array<System::String ^> ^args)
{
    /// Prints "Length"
    /// We cannot use default constructor here
    Console::WriteLine(GetPropertyNameForObject (gcnew System::String("test"), Length) );

    /// Prints "Id"
    Console::WriteLine(GetPropertyName (TheTimeZone, Id) );

/// Uncomment and get the error
    //Console::WriteLine(GetPropertyName (TheTimeZone, Id23) );

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:12:03.187

C# 中的 Lambda 表达式是委托的语法糖，因此您必须找到与 lambda 表达式等效的委托才能在 C++/CLI 中具有相同的功能。

为了让您的生活更轻松，您可以探索为 Linq 提供 C++/CLI 包装器的[CLinq （请参阅“Lambda 表达式”部分）](http://www.codeproject.com/Articles/17844/CLinq-LINQ-support-for-the-C-CLI-language)

*注意*：不要将 C++11 lambda 表达式与 C# lambda 表达式混淆。前者仅支持本机代码。可以使用 C++11 lambda，但您需要做一些额外的工作来为它们提供委托（[这篇 CodeProject 文章](http://www.codeproject.com/Articles/277612/Using-lambdas-Cplusplus-vs-Csharp-vs-Cplusplus-CX)探讨了这个主题）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-11T19:17:56.637

我意识到这是一个旧线程，但这样的事情也可能有效：

```
String^ NameOfSanityCheck(Object^ object, String^ name) { return name; } // could parse with a regex string like: "(->)|(::)|(\.)"

#define nameof(s) NameOfSanityCheck(s, #s) 
```

# design-patterns - 这是一种模式吗？

> ID：10513606
> 
> 赞同：0
> 
> 时间：2012-05-09T09:44:49.187
> 
> 标签：design-patterns

一个天真且难以测试的方法实现可能看起来像这样

```
public void getFromDatabaseComputeAndStore(SomeType param) {
     Collection<Something> s = dao.retrieveSomethingFromDatabase(param);
     Collection<Other> o = dao.retrieveOtherFromDatabase(param);
     Result r = null;
     <do massive computation, call other methods, figure out what r should be>
     <based on s and o>
     dao.store(r);
} 
```

通常我会将其重构为类似

```
public void getFromDatabaseComputeAndStore(SomeType param) {
     Computer computer = new Computer();
     Collection<Something> s = dao.retrieveFromDatabase(param);
     Collection<Other> o = dao.retrieveOtherFromDatabase(param);
     computer.setSomething(s);
     computer.setOther(o);
     computer.execute();
     Result r = computer.getResult();
     dao.store(r);
} 
```

其中`Computer`类是关键。这个类不与数据库或其他外部系统交互并且没有副作用，例如它是纯粹的功能。给定相同的`somethings`和`others`，`result`将始终相同。

所以我的问题是：

*   这是一个有名字的已知模式吗
*   具有以下功能的类的通用名称是什么`Computer`

我看过`Strategy`、`Mediator`和`Command`模式，但我觉得它们并不完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:39:04.867

您的计算机是 Builder 的一种形式。

Builder 的一种用途是允许对对象的复杂构造进行封装，以使 builder 的客户端永远无法访问部分构造或无效的对象。您配置 Builder，然后从中获取已完成的对象。

请注意，GoF 有一个包含多态结果的构建器示例。这种用法也很常见，但我不认为这是严格要求的。

.NET 和 Java 在它们的框架中都有充分的例子来说明这两种用法。

# android - 如何存储数据

> ID：10513612
> 
> 赞同：1
> 
> 时间：2012-05-09T09:44:59.147
> 
> 标签：android

```
public class SaveData extends Activity implements OnClickListener {  
    private DataManipulator dh;     
    static final int DIALOG_ID = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addname);

        View add = findViewById(R.id.Button01add);
        add.setOnClickListener(this);
        View home = findViewById(R.id.Button01home);
        home.setOnClickListener(this);           
    }

    public void onClick(View v){
        switch(v.getId()){

        case R.id.Button01home:
            Intent i = new Intent(this, DatabaseSample.class);
            startActivity(i);
            break;

        case R.id.Button01add:
            View editText1 = (EditText) findViewById(R.id.name);
            String myEditText1=((TextView) editText1).getText().toString();

            this.dh = new DataManipulator(this);
            this.dh.insert(myEditText1);

            showDialog(DIALOG_ID);
            break;

        }
    }  
    protected final Dialog onCreateDialog(final int id) {
        Dialog dialog = null;
        switch(id) {
        case DIALOG_ID:
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Information saved successfully ! Add Another Info?")
            .setCancelable(false)
            .setPositiveButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    SaveData.this.finish();

              }
            })
            .setNegativeButton("Yes", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
            AlertDialog alert = builder.create(); 
            dialog = alert;
            break;

        default:

        }
        return dialog;
    }
} 
```

当我单击模拟器上的保存数据时，我无法将数据保存到数据库中，它显示 java.lang.IllegalArgumentException: Can't pass bindargs for this sql :into newtable (name) values (?)

```
public class DataManipulator {
    private static final  String DATABASE_NAME = "mydatabase.db";
    private static final int DATABASE_VERSION = 1;
    static final String TABLE_NAME = "newtable";
    private static Context context;
    static SQLiteDatabase db;

    private SQLiteStatement insertStmt;

    private static final String INSERT = " into "   + TABLE_NAME + " (name) values (?)";

    public DataManipulator(Context context) {
        DataManipulator.context = context;
        OpenHelper openHelper = new OpenHelper(DataManipulator.context);
        DataManipulator.db = openHelper.getWritableDatabase();
        this.insertStmt = DataManipulator.db.compileStatement(INSERT);

    }
    public long insert(String name) {
        this.insertStmt.bindString(1, name);
        return this.insertStmt.executeInsert();
    }

    public void deleteAll() {
        db.delete(TABLE_NAME, null, null);
    }

    public List<String[]> selectAll()
    {

        List<String[]> list = new ArrayList<String[]>();
        Cursor cursor = db.query(TABLE_NAME, new String[] { "name"},  null, null, null, null, null); 

        int x=0;
        if (cursor.moveToFirst()) {
            do {
                String[] b1=new String[]{cursor.getString(0)};

                list.add(b1);

                x=x+1;
            } while (cursor.moveToNext());
        }
        if (cursor != null && !cursor.isClosed()) {
            cursor.close();
        } 
        cursor.close();

        return list;
    }

    public void delete(int rowId) {
        db.delete(TABLE_NAME, null, null); 
    }

    private static class OpenHelper extends SQLiteOpenHelper {

        OpenHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + TABLE_NAME + " (name TEXT)");
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
            onCreate(db);
        }
    }
} 
```

谁能帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:56:26.767

改变;

```
public long insert(String name) {
        this.insertStmt.bindString(1, name);
        return this.insertStmt.executeInsert();
} 
```

到：

```
public long insert(String name) {
    ContentValues args = new ContentValues();
    args.put("name", name);
    return db.insert(TABLE_NAME, null, args);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:57:34.053

您的插入语句需要阅读：

```
private static final String INSERT = "INSERT into "   + TABLE_NAME + " (name) values (?)"; 
```

编辑：Waqas 发布的方式是在 Android 中使用 SQLite 的更好方式。用他说的。

# jquery - 在html中使用未定义属性是否标准

> ID：10513614
> 
> 赞同：1
> 
> 时间：2012-05-09T09:45:04.107
> 
> 标签：jquery, html, css

我有时使用未定义的属性。

* * *

**例子**

```
<ul>
  <li id="goFirst" url="abcd.jsp">menu1</li>
  <li id="goSecond" url="abcd2.jsp">menu2</li>
</ul> 
```

* * *

通过使用属性（“ **url** ”），我可以很容易地通过 jQuery 访问属性。

**jQuery中的用法**

```
var url = $("#goFirst").attr(url);
location.href="url"; 
```

但是，我不确定这是正确的使用方式还是非标准方式。

对不起我的英语不好。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T09:46:41.093

改为使用`data-url`，这是[有效的 HTML](http://caniuse.com/#search=datase)。

```
<li id="goFirst" data-url="abcd.jsp"> 
```

然后你可以使用：

```
var url = $("#goFirst").attr("data-url"); 
```

或者：

```
var url = $("#goFirst").data("url"); 
```

# php - 如果页面/帖子为空，则在 Wordpress 中显示静态内容

> ID：10513615
> 
> 赞同：2
> 
> 时间：2012-05-09T09:45:06.697
> 
> 标签：php, wordpress, wordpress-theming

如果 Wordpress 页面为空（例如“仍在进行中”），我想显示一条消息。

我的循环如下所示：

```
<?php get_header(); ?>

<!-- Main-menu open -->
<div id ="menu-maincontent">

<?php if ( have_posts() ) while ( have_posts() ) : the_post() ; ?>

<h2><?php echo the_title(); ?></h2>

</div>
<!-- Main-menu close -->

<!-- Main-content open -->
<div id="main-content">

<!-- Main-content-in open -->
<div id="main-content-in">

<?php the_content(); ?>

</div>

<div class="cleared"></div>

<?php if ( comments_open() ) : ?>
<?php comments_template( '', true ); ?>
<?php endif; // End if comments_open() ?>

</div><!-- Main-content close -->

<?php  endwhile; ?> 

<?php get_sidebar(); ?> 
```

我如何在此消息中编码？如果我可以有一个单独的 PHP 文件来调用它会更好（因为我在主题中有很多页面模板）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:34:37.790

我只更改了必要的部分，即*div#main-content-in*。

```
<!-- Main-content-in open -->
<div id="main-content-in">

<?php 
    // Get the content
    $content = get_the_content();

    if(trim($content) == "") // Check if the string is empty or only whitespace
    {
        echo "Static content";
        get_template_part('slug','name');
    }
    else
    {
        // Apply filters the same as the_content() does: 
        $content = apply_filters('the_content', $content);
        $content = str_replace(']]>', ']]&gt;', $content);
        echo $content;
    }
?>

</div>
<!-- Main-content-in close --> 
```

资料来源：

*   [http://codex.wordpress.org/Function_Reference/the_content](http://codex.wordpress.org/Function_Reference/the_content)
*   [http://codex.wordpress.org/Function_Reference/get_the_content](http://codex.wordpress.org/Function_Reference/get_the_content)
*   [http://codex.wordpress.org/Function_Reference/get_template_part](http://codex.wordpress.org/Function_Reference/get_template_part)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:38:43.403

检查我最后做了什么

```
<?php get_header(); ?>

    <!-- Main-menu open -->
    <div id ="menu-maincontent">

    <?php if ( have_posts() ) while ( have_posts() ) : the_post() ; ?>

    <h2><?php echo the_title(); ?></h2>

    </div>
    <!-- Main-menu close -->

    <!-- Main-content open -->
    <div id="main-content">

    <!-- Main-content-in open -->
    <div id="main-content-in">

    <?php the_content(); ?>

    </div>

    <div class="cleared"></div>

  <?php if ( comments_open() ) : ?>
    <?php comments_template( '', true ); ?>
    <?php endif; // End if comments_open() ?>

    </div><!-- Main-content close -->

    <?php endwhile; else: ?>

  <? require('page_not_found.php'); ?>

    <?php endif; ?>

    <?php get_sidebar(); ?> 
```

# javascript - JavaScript 正则表达式邮政编码验证问题

> ID：10513623
> 
> 赞同：4
> 
> 时间：2012-05-09T09:45:52.950
> 
> 标签：javascript, regex

我正在使用以下正则表达式来验证 5 位邮政编码。但它不起作用。

```
var zipcode_regex = /[\d]{5,5}/;
if (zipcode_regex.test($.trim($('#zipcode').val())) == false)
alert('invalid zipcode'); 
```

我也在代码片段中使用 jQuery。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T09:59:23.967

*如果您的字符串*中某处有一个五位数的子字符串，您的正则表达式也会匹配。如果你想验证“只有五位数，没有别的”，那么你需要[锚定](http://www.regular-expressions.info/anchors.html)你的正则表达式：

```
var zipcode_regex = /^\d{5}$/;
if (zipcode_regex.test($.trim($('#zipcode').val())) == false)
    alert('invalid zipcode'); 
```

你可以更容易地得到它：

```
if (!(/^\s*\d{5}\s*$/.test($('#zipcode').val()))) {
    alert('invalid zipcode');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:48:26.460

此正则表达式恰好匹配 5 位数字：

```
/^\d{5}$/ 
```

# delphi - Delphi：使用类助手更改按钮颜色

> ID：10513628
> 
> 赞同：1
> 
> 时间：2012-05-09T09:46:17.260
> 
> 标签：delphi, delphi-2007

我需要更改我的 delphi 表单控件的视觉样式，以便从 .Net 环境中显示它们。为此，我需要将 delphi 控件的颜色更改为蓝色（$00FCF5EE）。我广泛使用了没有“颜色”属性的“TButton”控件。因此，我没有将按钮更改为速度按钮，而是通过引入父表单并从该父表单继承所有其他表单来尝试不同的方法形式。在父窗体中，我有一个类助手来更改按钮的颜色。这是代码：（我使用的是Delphi 2007）

```
TButtonHelper=class helper for TButton
private
  procedure doChangeColor;
public
  procedure DrawChangeColor;
end;

TParentForm = class(TForm)
public
  procedure AfterConstruction; override;
end; 
```

在实施部分，我有

```
 procedure TButtonHelper.doChangeColor;
    var
      SaveIndex: Integer;
      FCanvas:TCanvas;
      rect:TRect;
    begin
      if csDestroying in ComponentState then exit;
      FCanvas:=TCanvas.Create;

        SaveIndex := SaveDC(Self.Handle);
        FCanvas.Lock;
        try
          FCanvas.Handle := Handle;
          FCanvas.Font := Font;
          FCanvas.Brush := self.Brush;
          FCanvas.Brush.Color:=$00FCF5EE;
          FCanvas.FillRect(BoundsRect);//Omitting the code to draw the text
        finally
          FCanvas.Handle := 0;
          FCanvas.Unlock;
          RestoreDC(handle, SaveIndex);
          FCanvas.Free;
        end;
    end;

    procedure TButtonHelper.DrawChangeColor;
    begin
        doChangeColor;
        self.Repaint;
    end;

procedure TParentForm.AfterConstruction;
    var
     i : Integer;
     wc: TControl;
    begin
      inherited;
      for i := 0 to self.ControlCount - 1 do begin
         wc:=Controls[i];
         if wc is  TButton then
            TButton(wc).DrawChangeColor;
      end;
    end; 
```

但这不起作用。虽然执行了 doChangeColor 方法，但它并没有改变按钮的颜色。请让我知道我在这里缺少什么。

谢谢大家，

普拉迪普

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:07:25.633

这是一个向标准 TButton 添加颜色属性的类：

```
unit u_class_colorbutton;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, StdCtrls, Buttons, ExtCtrls;

type
  TColorButton = class(TButton)
  private
    ShowBackColor  : Boolean;
    FCanvas        : TCanvas;
    IsFocused      : Boolean;
    FBackColor     : TColor;
    FForeColor     : TColor;
    FHoverColor    : TColor;
    procedure SetBackColor(const Value: TColor);
    procedure SetForeColor(const Value: TColor);
    procedure SetHoverColor(const Value: TColor);
  protected
    procedure CreateParams(var Params: TCreateParams); override;
    procedure WndProc(var Message : TMessage); override;

    procedure SetButtonStyle(Value: Boolean); override;
    procedure DrawButton(Rect: TRect; State: UINT);

    procedure CMEnabledChanged(var Message: TMessage); message CM_ENABLEDCHANGED;
    procedure CMFontChanged(var Message: TMessage); message CM_FONTCHANGED;
    procedure CNMeasureItem(var Message: TWMMeasureItem); message CN_MEASUREITEM;
    procedure CNDrawItem(var Message: TWMDrawItem); message CN_DRAWITEM;
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
  published
    property BackColor : TColor read FBackColor  write SetBackColor default clBtnFace;
    property ForeColor : TColor read FForeColor  write SetForeColor default clBtnText;
    property HoverColor: TColor read FHoverColor write SetHoverColor default clBtnFace;
  end;

procedure Register;

implementation

constructor TColorButton.Create(AOwner: TComponent);
begin
 inherited Create(AOwner);
 ShowBackColor := True;
 FCanvas := TCanvas.Create;
 BackColor := clBtnFace;
 ForeColor := clBtnText;
 HoverColor := clBtnFace;
end;

destructor TColorButton.Destroy;
begin
 FreeAndNil(FCanvas);
 inherited Destroy;
end;

procedure TColorButton.WndProc(var Message : TMessage);
begin
 if (Message.Msg = CM_MOUSELEAVE) then
  begin
   ShowBackColor := True;
   Invalidate;
  end;
 if (Message.Msg = CM_MOUSEENTER) then
  begin
   ShowBackColor := False;
   Invalidate;
  end;
 inherited;
end;

procedure TColorButton.CreateParams(var Params: TCreateParams);
begin
 inherited CreateParams(Params);
  with Params do
    Style := Style or BS_OWNERDRAW;
end;

procedure TColorButton.SetButtonStyle(Value: Boolean);
begin
 if Value <> IsFocused then
  begin
   IsFocused := Value;
   Invalidate;
  end;
end;

procedure TColorButton.CNMeasureItem(var Message: TWMMeasureItem);
begin
 with Message.MeasureItemStruct^ do
  begin
   itemWidth  := Width;
   itemHeight := Height;
  end;
end;

procedure TColorButton.CNDrawItem(var Message: TWMDrawItem);
var
  SaveIndex: Integer;
begin
 with Message.DrawItemStruct^ do
  begin
   SaveIndex := SaveDC(hDC);
   FCanvas.Lock;
   try
    FCanvas.Handle := hDC;
    FCanvas.Font   := Font;
    FCanvas.Brush  := Brush;
    DrawButton(rcItem, itemState);
   finally
    FCanvas.Handle := 0;
    FCanvas.Unlock;
    RestoreDC(hDC, SaveIndex);
   end;
 end;
 Message.Result := 1;
end;

procedure TColorButton.CMEnabledChanged(var Message: TMessage);
begin
 inherited;
 Invalidate;
end;

procedure TColorButton.CMFontChanged(var Message: TMessage);
begin
 inherited;
 Invalidate;
end;

procedure TColorButton.SetBackColor(const Value: TColor);
begin
 if FBackColor <> Value then
  begin
   FBackColor:= Value;
   Invalidate;
  end;
end;

procedure TColorButton.SetForeColor(const Value: TColor);
begin
 if FForeColor <> Value then
  begin
   FForeColor:= Value;
   Invalidate;
  end;
end;

procedure TColorButton.SetHoverColor(const Value: TColor);
begin
 if FHoverColor <> Value then
  begin
   FHoverColor:= Value;
   Invalidate;
  end;
end;

procedure TColorButton.DrawButton(Rect: TRect; State: UINT);

var Flags, OldMode: Longint;
    IsDown, IsDefault, IsDisabled: Boolean;
    OldColor: TColor;
    OrgRect: TRect;
    NewCaption : string;

begin
 NewCaption := Caption;
 OrgRect := Rect;
 Flags := DFCS_BUTTONPUSH or DFCS_ADJUSTRECT;
 IsDown := State and ODS_SELECTED <> 0;
 IsDisabled := State and ODS_DISABLED <> 0;
 IsDefault := State and ODS_FOCUS <> 0;

 if IsDown then Flags := Flags or DFCS_PUSHED;
 if IsDisabled then Flags := Flags or DFCS_INACTIVE;

 if (IsFocused or IsDefault) then
  begin
   FCanvas.Pen.Color   := clWindowFrame;
   FCanvas.Pen.Width   := 1;
   FCanvas.Brush.Style := bsClear;
   FCanvas.Rectangle(Rect.Left, Rect.Top, Rect.Right, Rect.Bottom);
   InflateRect(Rect, - 1, - 1);
  end;

  if IsDown then
  begin
   FCanvas.Pen.Color   := clBtnShadow;
   FCanvas.Pen.Width   := 1;
   FCanvas.Brush.Color := clBtnFace;
   FCanvas.Rectangle(Rect.Left, Rect.Top, Rect.Right, Rect.Bottom);
   InflateRect(Rect, - 1, - 1);
  end
 else
  begin
   DrawFrameControl(FCanvas.Handle, Rect, DFC_BUTTON, Flags);
  end;

  if IsDown then OffsetRect(Rect, 1, 1);

  OldColor := FCanvas.Brush.Color;
  if ShowBackColor then
   FCanvas.Brush.Color := BackColor
  else
   FCanvas.Brush.Color := HoverColor;
  FCanvas.FillRect(Rect);
  FCanvas.Brush.Color := OldColor;
  OldMode := SetBkMode(FCanvas.Handle, TRANSPARENT);
  FCanvas.Font.Color := ForeColor;
  if IsDisabled then
   DrawState(FCanvas.Handle, FCanvas.Brush.Handle, nil, Integer(NewCaption), 0,
             ((Rect.Right - Rect.Left) - FCanvas.TextWidth(NewCaption)) div 2,
             ((Rect.Bottom - Rect.Top) - FCanvas.TextHeight(NewCaption)) div 2,
             0, 0, DST_TEXT or DSS_DISABLED)
  else
   begin
    InflateRect(Rect, -4, -4);
    DrawText(FCanvas.Handle, PChar(NewCaption), - 1, Rect, DT_WORDBREAK or DT_CENTER);
   end;

  SetBkMode(FCanvas.Handle, OldMode);

 if (IsFocused and IsDefault) then
  begin
   Rect := OrgRect;
   InflateRect(Rect, - 4, - 4);
   FCanvas.Pen.Color   := clWindowFrame;
   FCanvas.Brush.Color := clBtnFace;
   DrawFocusRect(FCanvas.Handle, Rect);
  end;
end;

procedure Register;
begin
  RegisterComponents('Standard', [TColorButton]);
end;

initialization
  RegisterClass(TColorButton); // needed for persistence at runtime

end. 
```

您可以轻松地将其破解到您的应用程序中：在 .pas 和 .dfm 文件中查找/替换对 TColorButton 的所有 TButton 引用。您可以为背景、字体和悬停设置单独的颜色。

如果您想在应用程序范围内添加样式，也许最好使用具有本地支持的库（如 DevExpress、TMS 等）创建一个 GUI……就我个人而言，我最喜欢 DevExpress，但这是个人品味的问题。

# css - 如何在drupal 7中为特定页面使用css文件？

> ID：10513629
> 
> 赞同：0
> 
> 时间：2012-05-09T09:46:18.507
> 
> 标签：css, drupal-7

我想在 drupal 7 中为特定页面使用 css 文件，并且我想取消此页面的默认主题。

我使用名为 drupal_add_css 的方法，它正在工作，但此方法不允许取消默认主题

帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:26:40.203

您可以使用[Themekey](http://drupal.org/project/themekey)模块来配置为哪个页面显示哪个主题。如果您为要取消默认主题的页面设置主题`Stark`（作为 D7 核心的一部分包含的简洁无样式主题），您将能够通过`drupal_add_css()`.

# java - 为什么Java静态方法可以调用构造函数，但不能引用this？

> ID：10513633
> 
> 赞同：11
> 
> 时间：2012-05-09T09:46:36.027
> 
> 标签：java, constructor, static, instance

*我的假设*：

1.  静态方法不能调用非静态方法。
2.  构造函数是一种没有返回类型的**方法**。

鉴于这个例子......

```
 public class Main {
        public static void main(String[] args) {
            Main p = new Main();  // constructor call
            k();  // [implicit] `this` reference
        }

        protected Main() {
            System.out.print("1234");
        }

        protected void k() {
        }
    } 
```

*   此行打印 1234：`Main p = new Main()`
*   此行引发异常：`k()`

*为什么示例代码做了这两件事？它们不与我的上述假设相冲突吗？我的假设是否正确？*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T09:49:00.740

> 1 - 静态方法不能调用非静态方法。

当然可以，但是他们**需要一个对象来调用**.

在静态方法中，没有`this`可用的引用，因此`foo()`（相当于`this.foo()`）是非法的。

> 2 - 构造函数是一种没有返回类型的方法。

如果要将它们[与 methods 进行比较](https://stackoverflow.com/questions/29145700/can-we-say-contructors-are-methods-in-java)，我会说**构造函数更接近非静态方法**（因为构造函数内部确实存在`this`引用）。

鉴于这种观点，您应该清楚为什么静态方法可以毫无问题地调用构造函数。

* * *

所以，总结一下：

```
Main p = new Main(); 
```

没关系，因为`new Main()`不依赖于任何现有对象。

```
k(); 
```

不行，因为它等效于您的（静态）主要方法`this.k()`并且`this`在您的（静态）主要方法中不可用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T09:49:33.287

不。在这方面，构造函数不是普通的方法。构造函数的全部意义在于，构造一个新的类实例。

所以它也可以在静态范围内调用。想一想：如果您需要类的现有实例来创建它的新实例，那么您将永远无法实例化它。

一些澄清：

> 静态方法不能调用非静态方法。

不完全的。您可以从静态方法内部调用非静态方法，只需要将其*范围*限定为该类的特定对象。IE

```
p.k(); 
```

将在您上面的代码示例中完美运行。

通话

```
k(); 
```

在实例（非静态）方法中会很好。它相当于

```
this.k(); 
```

隐含`this`指的是类的当前实例。每当编译器在实例方法中看到不合格的调用`k()`时，它会自动将其范围使用`this.`. 但是，由于静态方法不绑定到类的任何实例，您（和编译器）不能`this`在静态方法内部引用。因此，您需要显式命名类的实例以调用实例方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-09T09:50:25.143

> 规则很简单：
> 1 - 静态方法不能调用非静态方法。

这根本不是真的。静态方法*可以*调用非静态方法，只需通过“目标”引用。例如，这在静态方法中很好：

```
Integer x = Integer.valueOf(10);
int y = x.intValue(); // Instance method! 
```

*真正的*重点是“`this`静态方法中没有引用”。

> 2 - 构造函数是一种没有返回类型的方法。

老实说，这不是一个真正有用的模型。（从调用者的角度来看）将构造函数视为具有与声明类相同的返回类型的静态方法*更有意义，但无论如何这也不是一个完美的模型。*

我建议您将构造函数视为不同类型的成员。拥抱构造函数和方法之间的差异，而不是试图隐藏它们。

# c# - 在 C# 中的 Http.Post 中将字典作为参数传递

> ID：10513634
> 
> 赞同：3
> 
> 时间：2012-05-09T09:46:38.210
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, forms, razor

我正在尝试将字典传递给 Html.Post 中的操作方法

```
Html.BeginForm("ProcessStage2", "Supplier", new {bookVars = Model.BookVars} , FormMethod.Post, new { name = "frmBook" }) 
```

我可以传递模型的其他属性（int、string、...），但不能传递 Dictionary。有没有机会实现这一目标？因为字典有 29 对，似乎太多了，无法拆分并将它们分开传递。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:01:04.863

序列化您的字典并将其作为字符串传递（可能是 base64 编码）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T09:58:02.487

您可以使用隐藏字段和编辑器模板。举个例子：

模型：

```
public class MyViewModel
{
    public IDictionary<string, string> BookVars { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel
        {
            // fill the dictionary with some dummy data
            BookVars = Enumerable
                .Range(1, 5)
                .ToDictionary(x => "key" + x, x => "value" + x)
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        // the model.BookVars property will be properly bound here
        return View(model);
    }
} 
```

查看 ( `~/Views/Home/Index.cshtml`):

```
@model MyViewModel

@using (Html.BeginForm())
{
    @Html.EditorFor(x => x.BookVars)
    <button type="submit">OK</button>
} 
```

编辑器模板（~/Views/Home/EditorTemplates/KeyValuePair`2.cshtml）：

```
@model KeyValuePair<string, string>

@Html.Hidden("Key", Model.Key)
@Html.Hidden("Value", Model.Value) 
```

注意将为字典的每个元素自动呈现的编辑器模板的名称：KeyValuePair`2.cshtml

抱歉，我无法使用 SO 的编辑器正确格式化，但文件名应该是：重音[字符](http://www.fileformat.info/info/unicode/char/0060/index.htm)`KeyValuePair[grave accent]2.cshtml`在哪里。`[grave accent]`

另外不要忘记阅读默认模型绑定器希望更好地了解幕后发生的事情的集合和字典的[有线格式。](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T09:49:40.677

不，您不能将对象作为参数传递。唯一的方法是将对象存储在数据库中并仅传递该对象的 POST id。您应该创建包含该字典的模型：

```
public int id {get;set;}
public Dictionary<string, int> Dictionary {get;set}; 
```

并从服务器端通过 id 加载它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:35:14.403

您可以使用例如 json 序列化来做到这一点。我推荐这个，因为它非常灵活并且看起来很优雅。

您的模型可以包含任何对象集。在您的情况下，它是：

```
public class MyViewModel
{
    public IDictionary<string, string> BookVars { get; set; }
} 
```

在控制器中，您可以根据我们的需要存根一些数据：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        // mock data
        var model = new MyViewModel
                            {BookVars = new Dictionary<string, string> {{"key1", "value1"}, {"key2", "value2"}}};

        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        // the binded model is avaliable
        return View(model);
    }
} 
```

该视图包含一个表单，并包含一个用于 ajax 提交的自定义脚本。这些值可以以任何方式持久化和修改。例如，您可以使用隐藏字段。

```
@model MyViewModel

<script src="/Scripts/script.js" type="text/javascript"></script>

<script type="text/javascript">
        $(document).ready(function () {
            $('form').frmBookSubmit();
        });
</script>

@using (Html.BeginForm("Index", "Home", FormMethod.Post, new { name = "frmBook" }))
{
    <div class="books">
        @foreach (var item in Model.BookVars)
        {
            <input type="hidden" key="@item.Key" value="@item.Value" />        
        }
    </div>
    <input type="submit" />
} 
```

Script.js，使用数据的 json 序列化为 ajax 提交创建一个简单的 jquery 插件：

```
(function ($) {

    $.fn.frmBookSubmit = function () {
        var $this = $(this);
        if ($this != null && $this != 'undefined' && $this.length > 0) {
            $this.submit(function (e) {
                e.preventDefault();

                var myviewmodel = new Object();
                myviewmodel.BookVars = $this.find(".books").booksCollect();
                var data = { model: myviewmodel };
                var jsonString = JSON.stringify(data);

                $.ajax({
                    url: $this.attr("action"),
                    type: 'POST',
                    dataType: 'json',
                    data: jsonString,
                    contentType: 'application/json; charset=utf-8'
                });

            });
        }
    };

    $.fn.booksCollect = function () {
        var books = new Array();
        $(this).find("input").each(function () {
            var k = $(this).attr('key');
            var v = $(this).attr('value');
            var item = {
                Key: k,
                Value: v
            };
            books.push(item);
        });
        return books;
    };

})(jQuery); 
```

如果您觉得它有用，您还可以使用例如 Newtonsoft.Json 库编写您的自定义 json binder。

你完成了。

# asp-classic - VBScript - 数据库 - 记录集 - 如何在数据库中传递 DateDiff 值

> ID：10513640
> 
> 赞同：2
> 
> 时间：2012-05-09T09:46:55.213
> 
> 标签：asp-classic, vbscript, sql-server-2000

我正在使用 ASP 的 DateDiff() 函数来查找两个日期之间的日期差异。

该函数可以正常工作并显示两个日期之间的确切日期差异，但是当在数据库中插入这个值时，它需要 9 作为值，而不考虑任何日期差异。

假设两个日期之间的差异超过 15 或 20 天，在数据库中需要“9”。

我已将 INT 用作显示日期差异的列的数据类型。

DATA TYPE 在这里造成问题吗？我什至尝试使用会话变量来存储值但没有运气 - 下面是我的代码：

```
if request.Form("sub") <> "" then
        sql = "Select * from emp_leave_details"
        rs.open sql , con, 1, 2
        dim diff
        dim todate
        dim fromdate            
        fromdate= rs("leave_from")
        todate= rs("leave_to")
        session("date_diff")=datediff("d",fromdate,todate)
        rs.addnew

        rs("emp_name") = request.Form("name")
        rs("emp_no") = request.Form("number")
        rs("address") = request.Form("address")
        rs("contact_no") = request.Form("contact")
        rs("mobile_no") = request.Form("mobile")
        rs("contact_onleave") = request.Form("contact_details")
        rs("leave_type") = request.Form("rad")
        rs("other_leave_details") = request.Form("PS")
        rs("leave_from") = request.Form("from")
        rs("leave_to") = request.Form("to")
        rs("applied_by") = request.Form("apply")
        rs("accepted_by") = request.Form("accept")
        rs("approved_by") = request.Form("approve")
        rs("no_of_leave_taken")= session("date_diff")
        rs.update

        response.Write("<script language='javascript'>{update();}</script>")

        rs.close
        end if 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:59:22.620

数据类型与此无关。在会话中存储值不是解决方案。您可以使用常规变量。

从您的代码看来，您总是对`fromdate`and使用相同的值`todate`。这是因为您不迭代结果集中的行。

```
if not rs.bof and not rs.eof then
    do while not rs.eof

        '' code to execute for each row            

        rs.moveNext
    loop
end if 
```

在您当前的脚本`rs`中将始终返回查询返回的第一行的结果。

您遇到的第二个问题可能是`Date`数据类型。使用将您的值转换为日期`cDate`并使用它来计算差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:08:19.643

您的问题是，您搜索“Select * from emp_leave_details”，它始终提供该表中的所有记录。您检索第一条记录的值并对它们进行比较，结果总是相同的值，这是正常的。从您的问题来看，您还不清楚您真正想要做什么。我想所以想要这样选择一个记录

```
Select * from emp_leave_details where emp_name=<%=request.Form("name")%> 
```

并在此基础上添加一条带有计算出的 no_of_leave_taken 的新记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T05:19:32.360

对不起，我的坏人......这是我调用的数据库字段名称而不是

```
fromdate= request.form("from")
todate= request.form("to") 
```

我打电话给这个

```
fromdate= request.form("leave_from")
todate= request.form("leave_to") 
```

再次抱歉..但我真的很感谢你们为我提供了所有可能的解决方案。

谢谢。

# exception - 抛出额外异常以避免代码重复

> ID：10513646
> 
> 赞同：6
> 
> 时间：2012-05-09T09:47:09.713
> 
> 标签：exception, theory, code-duplication

首先，我知道标准答案是永远不会将异常用于流量控制。虽然我完全同意这一点，但我一直在思考我有时会做的事情，我将用以下伪代码来描述：

```
try
    string keyboardInput = read()
    int number = int.parse(keyboardInput)
    //the conversion succeeds
    if(number >= 1000) 
        //That's not what I asked for. The message to display to the user
        //is already in the catch-block below.
        throw new NumberFormatException() //well, there IS something wrong with the number...
 catch(NumberFormatException ex)  //the user entered text
    print("Please enter a valid number below 1000.") 
```

首先，**以非常抽象的方式来举这个例子。**这不一定要发生。情况很简单：

> 用户输入需要受到约束，并且可能以两种方式出错，一种是语言定义的抛出异常，另一种是检查。用户以相同的方式报告这两个错误，因为他们不需要知道导致它的技术差异。

我想了几种方法来解决它。首先，最好抛出一个定制的异常。然后我面临的问题是，如果我在本地捕获它，如何处理另一个异常？在 se 中，自定义异常将导致第二个 catch 块，其中消息也将被复制到其中。我的解决方案：

```
//number is wrong
throw new MyException()
catch(NumberFormatException ex) 
    throw new MyException()
catch(MyException ex) {
    print("Please enter...") 
```

异常名称的含义就是这里的一切。这种自定义异常的应用程序被广泛接受，但**基本上**我没有做任何与第一种方式不同的事情：我被迫进入一个 catch-block，尽管抛出一个自定义异常而不是标准库异常。

将异常抛出到调用方法的相同方法（因此没有自定义异常的 catch 块）似乎更有意义。我的方法在**技术上**可能有两种方式出错，但**本质上是**一种方式：错误的用户输入。因此，人们会编写一个`UserInputException`并让方法抛出这个。新问题：如果这是应用程序的**主要方法怎么办？**

我目前并没有为实现这种行为的特定应用程序而苦苦挣扎，我的问题纯粹是**理论上**的和**非语言特定的。**

**解决这个问题的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T02:37:29.907

我会认为第一个异常是低级的，我会在调用点处理它（在这种情况下通过翻译）。我发现这导致代码更容易维护和稍后重构，因为您需要处理的异常类型更少。

```
try
  string keyboardInput = read()
  try
    int number = int.parse(keyboardInput)
  catch(NumberFormatException ex)
    throw MyException("Input value was not a number")

  //the conversion succeeds
  if(number >= 1000) 
    throw MyException("Input value was out of range")

catch(MyException ex)  //the user entered text
  print( ex.ToString() )
  print("Please enter a valid number below 1000.") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:58:58.263

在此特定示例中，您不需要任何例外。

```
int number;
if (int.TryParse(keyboardInput, out number) && number < 1000) // success
else // error 
```

但是，您描述的情况在商业软件中很常见，并且抛出异常以到达统一的处理程序是很常见的。

一种这样的模式是 XML 验证，然后是 XSLT。在某些系统中，无效 XML 是通过捕获验证异常来处理的。在这些系统中，重用 XSLT 中现有的异常处理是很自然的（它可以自然地检测到特定验证语言无法检测到的某些类型的数据错误）：

```
<xsl:if test="@required = 'yes' and @prohibited = 'yes'>
    <xsl:message terminate='yes'>Error message</xsl:message>
</xsl:if> 
```

重要的是要看到，如果这种情况极为罕见（预计仅在早期集成测试期间发生，并且随着其他模块中的缺陷得到修复而消失），[则大多数关于](http://c2.com/cgi/wiki?DontUseExceptionsForFlowControl)不使用异常进行流控制的典型问题并不真正适用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T10:00:05.557

我的看法是这样的：

假设没有其他方法可以解析不会引发异常的 int ，那么您现在的代码是正确且优雅的。

唯一的问题是您的代码是否处于某种循环中，在这种情况下，您可能会担心抛出和捕获不必要的异常的开销。在这种情况下，您将不得不牺牲一些代码的美感，而只在必要时处理异常。

```
error=false;

try {
    string keyboardInput = read();
    int number = int.parse(keyboardInput);
    //the conversion succeeds
    if(number >= 1000) {
        //That's not what I asked for. The message to display to the user
        //is already in the catch-block below.
        error=true;
} catch(NumberFormatException ex) { //the user entered text
    error=true;
}

if (error)
    print("Please enter a valid number below 1000."); 
```

您还可以考虑为什么要尝试将两个错误聚合为一个。相反，您可以告知用户他们犯了什么错误，这在某些情况下可能更有帮助：

```
try {
    string keyboardInput = read();
    int number = int.parse(keyboardInput);
    //the conversion succeeds
    if(number >= 1000) {
        //That's not what I asked for. The message to display to the user
        //is already in the catch-block below.
        print("Please enter a number below 1000.");

} catch(NumberFormatException ex) { //the user entered text
    print("Please enter a valid number.");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T02:07:49.533

我认为您基本上有几种方法可以在考虑到代码重复最少的情况下进行处理：

1.  使用布尔变量/存储异常：如果您正在执行的特定任务的一般逻辑中的任何地方出现错误，您会在第一个错误迹象时退出并在单独的错误处理分支中处理它。

    *优点*：只有一处处理错误；您可以使用任何您喜欢的自定义异常/错误条件。

    *缺点*：你试图实现的逻辑可能很难发现。

2.  创建一个通用函数，您可以使用它来通知用户错误（预先计算/存储所有描述一般错误的信息，例如显示用户的消息），这样您就可以在出现错误时调用一个函数发生。

    *优点*：对于代码的读者来说，你的意图逻辑可能更清晰；您可以使用您喜欢的 anu 自定义异常/错误条件。

    *缺点*：错误必须在不同的地方处理（尽管使用预先计算/存储的值，没有太多的复制粘贴，但是通知用户部分很复杂）。

3.  如果意图很明确，我认为从 try 块中显式抛出异常不是一个坏主意。如果您不想抛出系统提供的异常之一，您始终可以创建自己的从其中之一派生的异常，因此您只需要最少数量（最好是一个）的 catch 块。

    *优点*：只有一个地方可以处理错误情况——如果在 try-block 中基本上只有一种类型的异常抛出。

    *缺点*：如果抛出不止一种类型的异常，则需要嵌套的 try-catch 块（将异常传播到最外层的异常）或非常通用的（例如 Exception）catch 块，以避免重复错误报告。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T02:20:35.543

如何通过编写几个接受输入并返回错误或不返回错误的验证器类来解决这个验证问题。至于您与异常的斗争：将该逻辑放入每个验证器中，并根据具体情况进行处理。

之后，您找出正确的验证器用于您的输入，收集它们的错误并处理它们。

这样做的好处是：

1.  验证器只做一件事，验证单个案例
2.  由验证功能决定如何处理错误。您是在第一次验证错误时中断还是将它们全部收集然后处理它们？
3.  您可以编写代码，使主验证函数可以使用相同的代码验证不同类型的输入，只需使用您最喜欢的技术选择正确的验证器。

和缺点：

1.  您最终将编写更多代码（但如果您使用的是 java，则应将其放入“好处”桶中）

这是一些示例伪代码：

```
validate(input):
   validators = Validator.for(input.type)
   errors = []
   for validator in validators:
       errors.push(validator.validate(input))

   if errors:
       throw PoopException 
```

和一些验证器：

```
MaxValidator extends IntValidator: 
    validate(input):
        errors = []
        errors.push(super.validate(input))
        if input > 1000:
            errors.push("bleee!!!! to big!")
        return errors

IntValidator:
     validate(input):
        try:
           int.parse(input)
        catch NumberFormatException:
           return ['not an int']
        return [] 
```

当然，您需要做一些技巧来使父验证器可能返回输入的有效版本，在这种情况下，字符串“123”转换为 int，以便最大验证器可以处理它，但这可以通过以下方式轻松完成使验证器有状态或其他一些魔法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-21T19:22:48.657

我在这里的任何地方都看不到这个答案，所以我将其作为另一种观点发布。

众所周知，如果您对规则足够了解，您实际上*可以*打破规则，因此如果您知道这是适合您的情况的最佳解决方案，则可以使用抛出异常进行流量控制。从我所见，它通常发生在一些愚蠢的框架中......

也就是说，在 Java 7（它给我们带来了强大的[构造](http://www.baptiste-wicht.com/2010/05/better-exception-handling-in-java-7-multicatch-and-final-rethrow/)）之前，这是我避免代码重复的方法：[`multicatch`](http://i.imgur.com/AezlJ.jpg)

```
try {
    someOffendingMethod();
} catch (Exception e) {
    if (e instanceof NumberFormatException || e instanceof MyException) {
        System.out.println("Please enter a valid number.");
    }
} 
```

这也是 C# 中的一种有效技术。

# css - Magento Top Menu 突然停止写入“Active”类

> ID：10513650
> 
> 赞同：0
> 
> 时间：2012-05-09T09:47:17.227
> 
> 标签：css, magento, php

我遇到了一个奇怪的问题，magento 似乎已经停止将 Active 和 Active 父类写入我的菜单。

我一直在使用默认的 Magento 菜单，它已经运行了一个月左右。我已清除缓存并重新索引类别和产品。

任何建议表示赞赏..这可能是文件权限问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-26T15:27:29.240

对我来说，local.xml 中的这个 xml 更改解决了这个问题：

```
<default>
    <reference name="catalog.topnav">
        <action method="unsetData"><key>cache_lifetime</key></action>
        <action method="unsetData"><key>cache_tags</key></action>
    </reference>
</default> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:43:57.597

遵循 Benmarks 的建议，禁用块 Html 缓存，并且再次编写活动类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:07:48.570

Magento 的 HTML 块缓存是一个相当奇怪的野兽。他们只启用了几个块来使用它，其中之一是顶部菜单（模板文件因您使用的 Magento 版本而异）。

如果你想保持块缓存并摆脱这个错误，那么你可以创建一个具有新块类型的模块

```
extends Mage_Catalog_Block_Navigation 
```

`_construct()`并在您的块的方法中设置以下数据：

```
$this->addData(array(
   'cache_lifetime'    => null,
   'cache_tags'        => array(Mage_Catalog_Model_Category::CACHE_TAG, Mage_Core_Model_Store_Group::CACHE_TAG),
)); 
```

这会将缓存时间设置为空，即禁用它。

然后，在您的布局文件中，您需要找到（在`page.xml`）导航栏。它将具有以下标签：

```
<block type="catalog/navigation"... 
```

您需要将其替换为您自己的模块的导航块类：

```
<block type="mycompany/navigation" 
```

刷新你的缓存，你应该会发现你的类行为正常。有关 Magento 布局的更多信息，我真的推荐 Alan Storm 的优秀书籍[“No Frills Magento Layout”](http://store.pulsestorm.net/products/no-frills-magento-layout)，对于 Magento 调试工具的一个很好的补充，请查看[这个模块](http://www.fabrizio-branca.de/magento-advanced-template-hints.html)，它向您显示哪些块正在被缓存（以及整个负载其他有用的块信息）。

# javascript - 压缩/调整 jpeg 大小并在 Javascript 中获取 Base64

> ID：10513651
> 
> 赞同：1
> 
> 时间：2012-05-09T09:47:28.053
> 
> 标签：javascript, resize, compression, base64, image-resizing

如何减少 Jpeg 图像的 base64 字符串的大小？我有一张 2000x1000px 照片的 base64。如何获得 500x250px base64 压缩照片？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T10:00:02.907

将base64放在图像标签中

```
var img = document.createElement("img");
img.src = "data:image/gif;base64," + yourBase64; 
```

将其绘制到缩放的画布上

```
var canvas = document.createElement("canvas");
canvas.width = img.width;
canvas.height = img.height;
var ctx = canvas.getContext("2d");
ctx.scale(0.25, 0.25);
ctx.drawImage(img); 
```

获取base64

```
var base64 = canvas.toDataURL("image/jpeg"); 
```

我实际上并没有对此进行测试，因此调整大小的部分可能是错误的，但它会是这样的。

尝试搜索如何使用画布标签调整图像大小。

# jquery - 如何查看文档scrollTop？

> ID：10513654
> 
> 赞同：1
> 
> 时间：2012-05-09T09:47:36.337
> 
> 标签：jquery, scrolltop

```
if( $('html,body').scrollTop() != 150 ){
    $('html,body').animate({scrollTop: 150},'slow');
} 
```

我正在尝试检查卷轴的高度是否不是 150，如果是这样，我想将卷轴移动到 150，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T09:52:55.233

嗨**，试试这个工作演示** [http://jsfiddle.net/jqj9T/](http://jsfiddle.net/jqj9T/)

这会有所帮助，如果我遗漏了什么，请告诉我，

`scrollTop: $(window).scrollTop() + 150`应该做的伎俩。

**jQuery代码**

```
 if ($('html,body').scrollTop() != 150) {
    $('html,body').animate({
        scrollTop: $(window).scrollTop() + 150
    }, 'slow');
}​ 
```

# c# - 如何使用 C# 以编程方式部署数据库

> ID：10513664
> 
> 赞同：2
> 
> 时间：2012-05-09T09:48:11.743
> 
> 标签：c#, visual-studio, database-schema, web-deployment, web-deployment-project

我的解决方案中有一个数据库项目，要求很简单（对实现不太确定）。

有没有办法以编程方式部署数据库项目？

PS：我不是说要附加 MDF 文件。我的意思是将数据库部署到 SQL Server 实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:53:33.533

您可以使用普通的 sql 命令来实现这一点。

[http://msdn.microsoft.com/en-us/library/49b92ztk(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/49b92ztk(v=vs.80).aspx)

[http://www.codeproject.com/Articles/16231/Deploy-your-Application-and-Database](http://www.codeproject.com/Articles/16231/Deploy-your-Application-and-Database)

最好的祝福

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T10:53:24.940

您可以将创建数据库的脚本添加为“嵌入式资源”，然后在需要时使用标准执行它`ExecuteNonQuery(...)`。但是您将来可能需要对其进行升级，因此想法是，首先删除一部分，在某处保留模式版本的某个表，然后有多个嵌入式资源包含脚本以跳转到一个版本到下一个版本。当服务启动时，根据预期的版本检查版本，如果不同，则启动所需的脚本以达到当前版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:47:16.370

创建您喜欢的数据库 SQL 并将其包含在您的项目中。然后只需对服务器执行 SQL 脚本。

当我在我的项目中包含 SQLite 数据库时，我会使用它。

# jquery - 在jqGrid Tree Grid中删除所有子节点时如何更改父节点的图标

> ID：10513666
> 
> 赞同：0
> 
> 时间：2012-05-09T09:48:14.437
> 
> 标签：jquery, jqgrid

我正在使用 jqGrid 树网格来显示一些分层数据。我必须实现删除功能，到目前为止做得很好，唯一引起问题的**是“当删除特定节点的所有子节点时，该节点应该成为叶节点，即它的图标应该是从箭头变为叶一**“

我正在使用以下代码从网格中删除节点

```
$trackerGrid.jqGrid('delTreeNode', actoinItemEntityId);
var record = getRowRecord(baseId);
var siblingArray = $trackerGrid.jqGrid('getNodeChildren', record);

if(!siblingArray || !siblingArray.length) {                                         

    $trackerGrid.jqGrid('collapseNode', record);
    setLeafColumnValue(baseId, false);  
} 
```

节点被成功删除，但父节点的图标没有改变，图标仍然是展开节点的图标。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:21:05.813

通常情况下，TreeGrid 中没有子节点的节点与叶子节点不同。您可以将节点想象为文件夹，将叶子想象为文件。即使您从文件夹中删除所有文件，它也将保留文件夹并且不会转换为文件。

如果在您的用例中您描述的行为有意义，我建议您执行以下操作：

*   从空节点获取当前数据。我认为您可以使用rowid`getLocalRow`获取本地`data`信息；
*   删除现在没有子节点的节点；
*   然后使用`addChildNode`与以前相同的数据添加新节点，但使用`isLeaf: true`.

在这种情况下，您将拥有包含所有 TreeGrid 标准的代码，它将在 jqGrid 的下一个版本中工作。

# jquery - 使用 jQuery 触发计时器

> ID：10513672
> 
> 赞同：1
> 
> 时间：2012-05-09T09:48:42.543
> 
> 标签：jquery

我有一个标签列表。

您将鼠标悬停在选项卡上，它会加载到选项卡内容中。

我的客户想要做的是当您将鼠标悬停在主页选项卡中时。现在这导致我的悬停出现一些问题，因为您将鼠标悬停在列表下方，并且它总是轻弹回主页选项卡。这是正确的，但我想做的是等待 3 或 4 秒以重新加载主页选项卡。或者以其他方式加载序列中的下一个悬停选项卡。

希望这是有道理的，

我目前的代码是...

```
$('div.vertical_tabs ul.st_tabs li a').hover(
        function() {
            $(this).trigger('click');
} , function() {
            $('.home').trigger('click');
}           
}); 
```

对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:06:12.120

基本上它应该是这样的：

```
$('div.vertical_tabs ul.st_tabs li a').hover(function() {
    clearTimeout($('.home').data('timeout'));
    $(this).trigger('click');   
}, function() {
    var t = setTimeout(function() {
        $('.home').trigger('click');
    }, 2000);
    $('.home').data('timeout', t);
}); 
```

这是一个演示：

[http://jsbin.com/uyizud/edit#javascript,html,live](http://jsbin.com/uyizud/edit#javascript,html,live)

# c - Linux C：如何知道上网的默认界面？

> ID：10513673
> 
> 赞同：2
> 
> 时间：2012-05-09T09:48:51.717
> 
> 标签：c, linux, routing, ip, default

我想找出正在使用的默认网络。我目前的方法是查找所有 IP 地址并将其与默认网关 IP 地址进行比较，但这听起来很愚蠢。正确的做法是什么？

**更新**

我想使用 C 程序，而不是通过命令...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:52:44.187

您可以尝试一种稍微脏一点但非常简单的方法：

```
cnicutar@lemon:~$ ip route show to 0.0.0.0/0
default via X.Y.Z.T dev eth0  proto static
                        ^^^^ 
```

所以你可以试试：

```
FILE *cmd = popen("ip route show", "r");
fgets(str, LEN, cmd); 
```

然后你可以使用`strtok`，`strstr`等等。

# windows - 如何在 Delphi 中为 Windows 7 上的 Windows 搜索集成编写属性处理程序

> ID：10513677
> 
> 赞同：1
> 
> 时间：2012-05-09T09:49:01.827
> 
> 标签：windows, delphi

我想为我的应用程序的文件格式创建一个属性处理程序。我只需要它在 Windows 7 中工作。我知道我需要为不同版本的 Windows 构建 32 位和 64 位，所以不需要提醒我，虽然现在我被卡住了使用 Delphi 2007。我只需要指出正确的方向即可开始。我应该创建哪种类型的项目，以及要完成这项工作还必须执行哪些其他步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:46:16.183

创建一个`ActiveX Library`项目（文件 > 新建 > 其他 > Delphi 项目 > ActiveX > ActiveX 库），它将生成一个带有默认类型库的 DLL 项目。打开该项目，向其中添加一个 COM 对象（文件 > 新建 > 其他 > Delphi 项目 > ActiveX > COM 对象）。随意命名。在生成的实现代码中，将所需的任何其他 COM 接口添加到生成的类中，并根据需要实现它们的方法。编译，然后使用 Windows 的命令行`regsvr32.exe`实用程序注册 DLL。

# mysql - 为什么它在两行中显示相同的结果？

> ID：10513678
> 
> 赞同：0
> 
> 时间：2012-05-09T09:49:12.390
> 
> 标签：mysql

嗨，我有这样的 sql 代码：

```
SELECT vote_id, (SELECT type FROM vote_types WHERE id= 1) AS answer
FROM poll_answers
WHERE question_id =1; 
```

它向我显示：

![在此处输入图像描述](../Images/228466155e235eb33c81f0e1363889ab.png)

如何提出这个问题，以便它可以在第二行显示另一个 answer2 which vote_id = 2 而不再显示 answer1 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:53:29.280

我不知道你的桌子。但我认为 - 查询应该是

```
SELECT vote_id, type as answer 
    FROM poll_answers, vote_types
    WHERE question_id =1 and question_id = id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:21:52.850

```
SELECT poll_questions.id, vote_types.type AS answer
FROM   poll_questions
  JOIN poll_answers ON poll_questions.id    = poll_answers.question_id
  JOIN vote_types   ON poll_answers.vote_id = vote_types.id
WHERE  poll_questions.referendum_id = 1 
```

# spring-security - 将 security=none 应用于上下文根和静态资源：spring security 3.1 版

> ID：10513688
> 
> 赞同：3
> 
> 时间：2012-05-09T09:49:50.057
> 
> 标签：spring-security

我的应用程序编译为 ROOT.war，这基本上意味着我没有除 / 之外的上下文根。有需要保护的页面；但是有些 URL 不需要它；例如我的[http://localhost:8080/](http://localhost:8080/)给出了这个应用程序的主页；并且有类似的页面，例如关于我们、联系我们等不需要安全性的页面。所以我将它添加到配置中

```
 <security:intercept-url pattern="/" access="permitAll" />
  <security:intercept-url pattern="/resources/**" access="permitAll" />
  <security:intercept-url pattern="/register/confirm" access="isAuthenticated()" />
  <security:intercept-url pattern="/register/accept" access="isAuthenticated()" />
  <security:intercept-url pattern="/shopper/**" access="isAuthenticated()" /> 
```

但这只是说允许用户“无需身份验证”访问这些 URL，如果您访问这些 URL，则安全过滤器都已应用，如下面的调试日志所示

```
DEBUG: org.springframework.security.web.FilterChainProxy - / at position 1 of 12 in additional filter chain; firing Filter: 'ConcurrentSessionFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - / at position 2 of 12 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
DEBUG: org.springframework.security.web.context.HttpSessionSecurityContextRepository - No HttpSession currently exists
DEBUG: org.springframework.security.web.context.HttpSessionSecurityContextRepository - No SecurityContext was available from the HttpSession: null. A new one will be created.
DEBUG: org.springframework.security.web.FilterChainProxy - / at position 3 of 12 in additional filter chain; firing Filter: 'LogoutFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - / at position 4 of 12 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - / at position 5 of 12 in additional filter chain; firing Filter: 'OpenIDAuthenticationFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - / at position 6 of 12 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - / at position 7 of 12 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - / at position 8 of 12 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - / at position 9 of 12 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
DEBUG: org.springframework.security.web.authentication.AnonymousAuthenticationFilter - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
DEBUG: org.springframework.security.web.FilterChainProxy - / at position 10 of 12 in additional filter chain; firing Filter: 'SessionManagementFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - / at position 11 of 12 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
DEBUG: org.springframework.security.web.FilterChainProxy - / at position 12 of 12 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
DEBUG: org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/'; against '/'
DEBUG: org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [permitAll]
DEBUG: org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS
DEBUG: org.springframework.security.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@2b06c17b, returned: 1
DEBUG: org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Authorization successful
DEBUG: org.springframework.security.web.access.intercept.FilterSecurityInterceptor - RunAsManager did not change Authentication object
DEBUG: org.springframework.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
DEBUG: org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name 'appServlet' processing GET request for [/ 
```

]

当我尝试使用此配置时（按下面提到的顺序）：

```
 <!-- No Security required for the ROOT Context -->
  <security:http pattern="/**" security="none" />

 <!-- Apply secyrity for shopper URLs -->
 <security:http auto-config="true" use-expressions="true" access-denied-page="/denied">
  <security:intercept-url pattern="/" access="permitAll" />
  <security:intercept-url pattern="/resources/**" access="permitAll" />
  <security:intercept-url pattern="/register/confirm" access="isAuthenticated()" />
  <security:intercept-url pattern="/register/accept" access="isAuthenticated()" />
  <security:intercept-url pattern="/shopper/**" access="isAuthenticated()" /
 ....
  </security:http>

<security:http pattern="/resources/**" security="none" /> 
```

它打破了给出错误

```
DEBUG: org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/auth/login'; against '/'
DEBUG: org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/auth/login'; against '/resources/**'
DEBUG: org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/auth/login'; against '/register/confirm'
DEBUG: org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/auth/login'; against '/register/accept'
DEBUG: org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/auth/login'; against '/shopper/**'
DEBUG: org.springframework.security.config.http.DefaultFilterChainValidator - No access attributes defined for login page URL
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@5bebacc8: defining beans [placeholderConfig,dataSource,entityManagerFactory,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,transactionManager,org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor#0,registrationService,shopperService,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.security.filterChains,org.springframework.security.filterChainProxy,org.springframework.security.web.PortMapperImpl#0,org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0,org.springframework.security.authentication.ProviderManager#0,org.springframework.security.web.context.HttpSessionSecurityContextRepository#0,org.springframework.security.core.session.SessionRegistryImpl#0,org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy#0,org.springframework.security.web.savedrequest.HttpSessionRequestCache#0,org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler#0,org.springframework.security.access.vote.AffirmativeBased#0,org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0,org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator#0,org.springframework.security.authentication.AnonymousAuthenticationProvider#0,org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint#0,org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0,org.springframework.security.openid.OpenIDAuthenticationFilter#0,org.springframework.security.openid.OpenIDAuthenticationProvider#0,org.springframework.security.userDetailsServiceFactory,org.springframework.security.web.DefaultSecurityFilterChain#0,org.springframework.security.web.DefaultSecurityFilterChain#1,org.springframework.security.authentication.dao.DaoAuthenticationProvider#0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher#0,org.springframework.security.authenticationManager,passwordEncoder,registrationAwareUserDetailsService,registrationAwareAuthSuccessHandler,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
INFO : org.hibernate.impl.SessionFactoryImpl - closing
ERROR: org.springframework.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChainProxy': Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: A universal match pattern ('/**') is defined  before other patterns in the filter chain, causing them to be ignored. Please check the ordering in your <security:http> namespace or FilterChainProxy bean configuration 
```

我无法真正理解这背后的原因。我必须实现自己的请求模式匹配器吗？

**解决方案**

```
 <beans:bean id="filterChainProxy" class="org.springframework.security.web.FilterChainProxy" >
 <beans:constructor-arg>
  <beans:list>
   <security:filter-chain pattern="/resources/**"
    filters="none" />
   <security:filter-chain pattern="/aboutus"
    filters="none" />   
   <security:filter-chain pattern="/contactus"
    filters="none" />
   <security:filter-chain pattern="/news"
    filters="none" />    
  </beans:list>
 </beans:constructor-arg>
</beans:bean> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:11:35.707

`security="none"`with 模式`/**`捕获所有 URL，因此不能应用其他规则。什么是您在第二个示例中收到错误的原因。

但是可以`filter-chains`为不同的 URL 模式定义不同的。我没有新语法的例子，但这里是旧语法的例子（顺序`filter-chains`很重要）：

```
<bean id="springSecurityFilterChain" class="org.springframework.security.web.FilterChainProxy">
    <sec:filter-chain-map path-type="ant">
        <sec:filter-chain pattern="/dwr/**" filters="securityContextPersistenceFilter,securityContextHolderAwareRequestFilter,rememberMeAuthenticationFilter,anonymousAuthenticationFilter" />
        <sec:filter-chain pattern="/**" filters="channelProcessingFilter,securityContextPersistenceFilter,logoutFilter,authenticationFilter,securityContextHolderAwareRequestFilter,rememberMeAuthenticationFilter,anonymousAuthenticationFilter,sessionManagementFilter,exceptionTranslationFilter,filterSecurityInterceptor,switchUserProcessingFilter" />
    </sec:filter-chain-map>
</bean> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T09:12:32.060

这是我最终选择坚持的语法；因为它使 XML 更容易阅读和理解

```
 <!-- Non secure URLs -->
 <security:http pattern="/" security='none' /> 
 <security:http pattern="/home" security='none' />
 <security:http pattern="/aboutus" security='none' />
 ...
 ...
 <security:http pattern="/resources/**" security='none' />
 <security:http pattern="/favicon.ico" security='none' />

 <!-- URLs under security config -->
  <security:http auto-config="true" use-expressions="true" pattern="/admin/**" access-denied-page="/denied">
         <security:intercept-url pattern="/admin/**" access="ROLE_ADMIN" requires-channel="https" />
  </security:http> 
```

# android - 如何为 android 2.3 模拟器的 sdcard 授予读写权限？

> ID：10513694
> 
> 赞同：1
> 
> 时间：2012-05-09T09:50:05.483
> 
> 标签：android

嗨，我需要将图像保存在我的 SD 卡中。因此，为此我尝试将图像推送到 sdcard 中，但它在 ddms 中显示 sdcard d--------。**如何授予 emulator 2.3.3 版本的读写权限？**请帮我解决这个问题......

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T09:56:58.267

从那以后，我认为权限字符串没有改变。只需添加

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

您需要先在模拟器上添加“虚拟”外部存储器。在 AVD 中，选择您的模拟器，选择 Edit，然后在 SD Card - Size 下输入您想要的 sdcard 的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:56:55.643

您可以按照本教程：[http](http://androidblogger.blogspot.de/2009/02/tutorial-how-to-emulate-sd-card-with.html) : //androidblogger.blogspot.de/2009/02/tutorial-how-to-emulate-sd-card-with.html 在您的模拟器上创建一个 sdCard。

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`然后在您的清单文件中添加此权限：

问候，塞巴斯蒂安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:57:02.540

`<uses-permission>`在清单中给出

[http://developer.android.com/guide/topics/manifest/manifest-intro.html#perms](http://developer.android.com/guide/topics/manifest/manifest-intro.html#perms)

# java - 为什么我在运行 java 程序时会收到此消息？

> ID：10513700
> 
> 赞同：3
> 
> 时间：2012-05-09T09:50:21.833
> 
> 标签：java, c++, java-native-interface

Java 代码：

```
package Package;

public class MyExceptionTester {

private native void compute() throws Exception;

public static void main(String... args) {
    try {
        MyExceptionTester met = new MyExceptionTester();
        met.compute(); // This method will throw an exception which gets printed from the catch block
    } catch(Exception exc) {
        System.out.println("From Java :" + exc);
    }
}

static {
    System.loadLibrary("MyExceptionTester");
 }
} 
```

C++ 代码：

```
#include "iostream"
#include "Package_MyExceptionTester.h"

void Java_Package_MyExceptionTester_compute
   (JNIEnv *env, jobject obj) {
        jthrowable exc;
        try {
            jint i = 1/0;
            throw "C++ Message : Hey ! Can't Divide By Zero";
        } catch(char *str) {
            jclass excClass = env->FindClass("java/lang/Exception");
            if(excClass == NULL) {
                    return;
                }
            env->ThrowNew(excClass,str);
          } 
```

}

当我在包含 dll 后运行 java 程序时，我收到以下消息：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_INT_DIVIDE_BY_ZERO (0xc0000094) at pc=0x65c4121a, pid=5292, tid=6000 
#
# JRE version: 7.0
# Java VM: Java HotSpot(TM) Client VM (20.0-b01 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  [MyExceptionTester.dll+0x121a] 
#
# An error report file with more information is saved as:
# W:\elita\jnitesters\workspace\java\JNI\build\classes\hs_err_pid5292.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

为什么我会收到此消息？为什么我看不到应该是从 java *catch*块打印的消息的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:55:08.467

```
 jint i = 1/0;
 throw "C++ Message : Hey ! Can't Divide By Zero"; 
```

此异常不会被您的`try/catch`块捕获，因为程序在 throw 语句之前崩溃。并且除以`0`不是您可以捕获的例外。

也许可能会有所帮助：

```
int d = 0;
jthrowable exc;
try 
{
    if ( d == 0 )
        throw "C++ Message : Hey ! Can't Divide By Zero";
    jint i = 1/d;
} catch(char *str) 
{
    jclass excClass = env->FindClass("java/lang/Exception");
    if(excClass == NULL) 
    {
       return;
    }
    env->ThrowNew(excClass,str);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T10:31:01.963

本机代码调用已在 JVM 内部。由于本机程序在抛出异常之前就崩溃了，因此本机程序中的崩溃也会导致 JVM 崩溃。

# c - 查找默认网关 ip 地址，而不是解析 proc 文件系统

> ID：10513704
> 
> 赞同：3
> 
> 时间：2012-05-09T09:50:29.017
> 
> 标签：c, linux, default, routes

我应该如何获取默认网关的 IP 地址？而不是从 /proc 读取条目，是否有任何独立的 API 可用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T10:38:56.197

您可以使用[libnl](http://www.infradead.org/~tgr/libnl/)这是一个通过 NETLINK 套接字与内核通信的库。

获取默认路由的一个简单示例是（请添加错误检查和所需的标头）

```
 void cb_route (struct nl_object *cb, void *arg) {
        struct rtnl_route *route = (struct rtnl_route*) cb;
        /* do what you need to do with rtnl_route object 
         * e.g. copy it to arg, etc.
         */
        struct nl_addr *tmp_addr;
        tmp_addr = rtnl_route_get_gateway(route);
        len = nl_addr_get_len(tmp_addr);
        memcpy(arg, nl_addr_get_binary_addr(tmp_addr), len);
   }

   int get_route () {
        struct nl_handle *nlh;
        struct nl_cache *route_cache;
        struct rtnl_route *filter;
        struct nl_addr *dst;
        char *gw = malloc(16); //enough room for IPv6 if needed
        char n = '0';

        nlh = nl_handle_alloc();
        if (!nlh)
            return -1;

        nl_connect(nlh, NETLINK_ROUTE);
        route_cache = rtnl_route_alloc_cache();

        if (nl_cache_is_empty(route_cache))
             return 0;

        dst = nl_addr_build(AF_INET, &n, 0);
        filter = rtnl_route_alloc();
        rtnl_route_set_scope(filter, RT_SCOPE_UNIVERSE);
        rtnl_route_set_family(filter, AF_INET);
        rtnl_route_set_table(filter, RT_TABLE_MAIN);
        rtnl_route_set_dst(filter, dst);

        nl_cache_foreach_filter(route_cache, (struct nl_object*) filter, cb_filter_route, gw);
        /* gw should now contain the binary representation of the default gw. use inet_ntop to convert it */

        return 0;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:31:05.183

一个技巧是使用套接字 api 尝试连接到无法访问的 ip。“无法到达的目的地”的响应将来自您的默认网关。

# javascript - 为什么委托在“p”标签中不起作用？

> ID：10513713
> 
> 赞同：1
> 
> 时间：2012-05-09T09:50:57.583
> 
> 标签：javascript, jquery

当使用标签委托时`p`，它不起作用[http://jsfiddle.net/peswe/wbVMV/4/](http://jsfiddle.net/peswe/wbVMV/4/)

HTML：

```
<p id='test'>
    <div>box 1
        <div>box in box1</div>
    </div>
</p> 
```

​ JavaScript：

```
$('p#test').delegate('div','click',function(){
    alert('test');
}) 
```

* * *

更改`p#test`为`span#test`or `body`，它可以工作[http://jsfiddle.net/peswe/wbVMV/3/](http://jsfiddle.net/peswe/wbVMV/3/)

HTML：

```
<span id='test'>
    <div>box 1
        <div>box in box1</div>
    </div>
</span>
​ 
```

JavaScript：

```
$('span#test').delegate('div','click',function(){
    alert('test');
}) 
```

请告诉我一些关于它的事情。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:05:19.617

这就是浏览器（HTML 解析器）的工作原理，因为`<div>`它是[Flow 元素](http://dev.w3.org/html5/markup/common-models.html#common.elem.flow)并且`<p>`是[Phrasing 元素](http://dev.w3.org/html5/markup/common-models.html#common.elem.phrasing)，在大多数情况下，phrasing 元素不能包含任何流元素，这称为**错误嵌套标签**，HTML 解析器会通过某些步骤神奇地修复这些问题：

1.  读取时`<p>`，它会生成一个`<p>`元素
2.  读取时`<div>`，由于`<div>`不能驻留在`<p>`元素中，HTML解析器关闭最后一个`<p>`元素，然后打开一个`<div>`元素
3.  读取时`</div>`，关闭`<div>`元素
4.  读取时`</p>`，由于前一个`<p>`元素是关闭的，解析器将其识别为**`<p>`缺少开始标签的元素**，因此解析器会自动在此处插入`<p>`开始标签以创建完整`<p>`元素

因此，最终的 DOM 构造是：

```
<p id="test"></p> <!-- auto closed -->
<div>
  box1
  <div>
    box in box1
  </div>
</div>
<p></p> <!-- auto generated --> 
```

很明显`<div>`and`<p>`处于同一级别，没有形成包含关系，所以委托在这里失败了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:03:38.793

浏览器正在更正您的无效 HTML 并`div`移动`p`. 他们成为兄弟姐妹，因此事件委托不起作用。只需检查元素并亲自查看：

第一种情况：

```
<body>
  <p id="test"></p>
    <div>box 1
        <div>box in box1</div>
    </div>
    <p></p>
</body> 
```

第二种情况：

```
<body>
  <span id="test">
    <div>box 1
        <div>box in box1</div>
    </div>
  </span>
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T10:06:19.277

`p`标签只能包含`inline elements`, 而标签（作为一个很好地处理内联块元素的跨浏览器标识的`<span>`标签）可以很好地接受标签（在视觉上导致代码混乱）`div`，尽管要么不正确。

它不会在严格的 4.01 doctype 和 HTML5 中验证。

The appropriate way would be to wrap it in a block-level element : a `div`.

# twitter-bootstrap - 根据水平浏览器视口隐藏 div

> ID：10513715
> 
> 赞同：11
> 
> 时间：2012-05-09T09:51:25.610
> 
> 标签：twitter-bootstrap

我使用带有流体布局（响应式设计）的 Twitter 的 Bootstrap 2，如果浏览器的水平尺寸小于 800 像素，我想隐藏一个 div 框。

我怎样才能做到？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-09T12:45:37.820

您可以将自定义类应用于您希望隐藏的元素并向其添加`display:none`属性以将其隐藏在`@media`针对您选择的宽度的查询中，如下所示：

```
@media (max-width: 800px) {
    .hidden-800 {
        display:none !important;
    }
} 
```

只需确保将`@media`查询方式放在自定义样式表的末尾即可。

# c++ - 在非透明父窗口之上创建一个透明子窗口（win32）

> ID：10513716
> 
> 赞同：2
> 
> 时间：2012-05-09T09:51:32.167
> 
> 标签：c++, windows, winapi

我有一个不是我写的程序。我没有它的来源，该程序的开发人员正在独立开发。他给了我那个程序的`HWND`和`HINSTANCE`句柄。

我使用`win32`api 在他的窗口上创建了一个子窗口。

我需要的第一件事是让这个子窗口在某些区域具有透明度，而在其他区域不透明（例如游戏的平视显示器（HUD）），以便用户可以在两个窗口中看到东西。

我需要的第二件事是将所有输入定向到父窗口。我的子窗口不需要输入。

我知道`WS_EX_TRANSPARENT`这只会让孩子像画家算法一样在最后画画。

我不能使用`WS_EX_LAYERED`，因为它是一个子窗口。

ps

尽管互联网上有类似的问题，但我到处寻找，但没有找到任何解决方案。

实际上，这是一款类似于 HUD 的游戏。由于多线程的复杂性以及其他许多原因，我无法直接在父窗口上绘制。

- 编辑 - - - - - - - - - - - - - -

我仍在努力。我正在尝试不同的方式与你们所有人的建议。有没有办法结合和`directX`功能`SetWindowRgn()`或功能？我认为这会奏效。目前我正在测试所有的东西作为一个子窗口和一个分层窗口。`directx``BitBlt()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T05:24:20.117

好的朋友，最后我做了一些疯狂的事情来实现它。但效率不高，比如直接使用 DirectX 进行绘图。

我反对：

*   使用`(WS_EX_TRANSPARENT | WS_EX_LAYERED | WS_EX_ TOOLWINDOW)`并`()`开启`CreateWindowEx`
*   创建窗口后，`(WS_EX_DLGMODALFRAME | WS_EX_CLIENTEDGE | WS_EX_STATICEDGE)`从窗口样式中删除，也`(WS_EX_DLGMODALFRAME | WS_EX_CLIENTEDGE | WS_EX_STATICEDGE | WS_EX_APPWINDOW)`从扩展窗口样式中删除。
*   这给了我一个没有边框的窗口，它现在也显示在任务栏中。hittest 也被传递给我窗户后面的任何东西。
*   子类化另一个窗口的窗口过程并得到
    *   `WM_CLOSE`, `WM_DESTROY`, 将`WM_CLOSE`or`WM_DESTROY`分别发送到我的窗口
    *   `WM_SIZE`, `WM_MOVE`, 根据另一个窗口调整和移动我的窗口
    *   `WM_LBUTTONUP`, `WM_RBUTTONUP`, `WM_MBUTTONUP`, 使我的窗口被带到顶部，并且仍然保持焦点在另一个窗口上，这样我的窗口就不会隐藏在另一个窗口后面
*   使 DirectX 设备有两个通道：
    *   在第一遍中，它在白色背景上绘制黑色的所有元素，并将后缓冲数据复制到另一个表面（因此它给出了黑白的二进制图像）。
    *   在第二遍中，它正常绘制事物。
*   `SetWindowRgn()`创建另一个线程以通过使用该函数读取该黑白表面来保持窗口透明。

这工作得很好，唯一的问题是它不太擅长让事情变得透明。

另一个问题是对绘制的对象进行 alpha 混合。

`SetLayeredWindowAttributes()`但是您可以使用该功能轻松设置总 alpha（透明度） 。

感谢你们提供的所有帮助，你们告诉我的所有东西都被使用了，他们指导了我，正如你所看到的。:)

可悲的是，由于效率问题，我们决定不使用这种方法:(

但我学到了很多东西，这是一次很棒的经历。这对我来说很重要:)

谢谢你 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:02:55.243

您可以`WS_EX_LAYERED`用于Windows 8 及更高版本的[子窗口](http://msdn.microsoft.com/en-us/library/windows/desktop/ff700543%28v=vs.85%29.aspx)。

要支持早期版本的窗口，只需创建一个水平分层窗口作为弹出窗口（没有镶边）并确保其位于游戏窗口上的适当位置。大多数用户不会一直移动他们正在使用的窗口，因此，虽然您需要监视父窗口的移动，并重新定位 HUD，但这不应该成为阻碍。

不获取焦点（在子窗口的情况下）或激活（在弹出窗口的情况下）更有趣，但仍然非常可行：- 操作系统实际上不会自动分配焦点或激活，到单击的窗口 - Windows WindowProc 始终通过调用或自身`SetFocus`的某种变体来获得焦点或激活。这里重要的是，如果您使用所有鼠标和非客户端鼠标消息而不将它们传递给 DefWindowProc，您的 HUD 将永远不会因单击而从游戏窗口窃取激活或键盘焦点。`SetActiveWindow``SetForegroundWindow`

作为弹出窗口或另一个线程上的窗口，您可能必须手动处理您的窗口 proc 确实获得的任何鼠标消息，并将它们发布到游戏窗口。否则，响应[`WM_NCHITTEST`](http://msdn.microsoft.com/en-us/library/windows/desktop/ff700543%28v=vs.85%29.aspx)with `HTTRANSPARENT`（与实现的效果类似`WS_EX_TRANSPARENT`）可以让系统继续将鼠标消息向下传递到堆栈，直到找到目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:43:08.873

您可以使用在父窗口中打一个洞`SetWindowRgn`。

此外，仅仅因为它不是您的窗口并不意味着您不能使其成为分层窗口。

[http://msdn.microsoft.com/en-us/library/ms997507.aspx](http://msdn.microsoft.com/en-us/library/ms997507.aspx)

最后，您可以通过使用子类来控制另一个窗口 - 本质上，您将 Wndproc 替换为他们的，以处理您希望处理的消息，然后将其余部分传递给他们原来的 wndproc。

# magento - Magento：如何以编程方式获取刚刚复制的产品的 id

> ID：10513719
> 
> 赞同：-1
> 
> 时间：2012-05-09T09:51:39.407
> 
> 标签：magento

如何在 Magento 中以编程方式获取刚刚复制的产品的 id？

（或最后插入的产品 ID，如果第一个解决方案不退出）

感谢帮助。

**[编辑]**

这是我用来复制我的产品的代码：

```
$sku = '123456';
$product = Mage::getModel('catalog/product')
   ->loadByAttribute('sku',$sku); 

$newProduct = $product->duplicate();
$newProduct->setStatus(1);
$newProduct->setSku($sku.'-v2');
$newProduct->save(); 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:56:32.943

您可以在以下位置找到新的产品 ID：

```
$newProduct->getId() 
```

这在调用后可用：

```
$newProduct = $product->duplicate(); 
```

仅供参考：要获取最后一个insertedId（通常），您可以使用：

```
Mage::getSingleton('core/resource')->getConnection('core_read')->fetchOne('SELECT last_insert_id()') 
```

# c# - 系统资源不足，无法完成请求的服务

> ID：10513722
> 
> 赞同：3
> 
> 时间：2012-05-09T09:51:43.603
> 
> 标签：c#, iis-6

我在 Windows Server 2003 机器上的 IIS 6 中托管了一个 Web 应用程序，并且必须处理 2 个大约 7-8mb 的大型 PDF 文件，这些文件由网站从网络共享读取，并将字节传递给 WCF 服务以保存在其他地方.

这是我用来读取文件的代码：

```
public static byte[] ReadFile(string filePath)
{
    int count;
    int sum = 0;
    byte[] buffer;
    FileStream stream = new FileStream(filePath, FileMode.Open, FileAccess.Read);

    try
    {
        int length = (int)stream.Length;
        buffer = new byte[length];

        while ((count = stream.Read(buffer, sum, length - sum)) > 0)
            sum += count;

        return buffer;
    }
    catch (Exception)
    {
        throw;
    }
    finally
    {
        stream.Close();
        stream.Dispose();
    }
} 
```

上抛出一个错误`stream.Read()`，错误是：

> 系统资源不足，无法完成请求的服务

此代码在我的开发环境中有效，但一旦我发布到我们的生产环境，我们就会收到此错误消息。我已经看到这个错误已经出现了几次搜索轮次和解决方法是使用`File.Move()`但我们不能这样做，因为文件需要传递给 WCF 服务方法。

IIS6 中是否有需要更改以允许在读取文件时在内存中保留 15-20mb 的内容？还是还有其他需要配置的东西？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:02:00.853

看到这个：

[为什么我需要逐个读取文件以缓冲？](https://stackoverflow.com/questions/1974200/why-i-need-to-read-file-piece-by-piece-to-buffer)

看来您正在阅读整个文件，没有缓冲..

缓冲区=新字节[长度]；

最好的祝福。

# java - 未捕获的错误：没有为对象 Facebook JDK 注册 polyfill

> ID：10513723
> 
> 赞同：4
> 
> 时间：2012-05-09T09:51:47.863
> 
> 标签：java, facebook-login

我使用 Facebook JDK 登录时遇到以下错误，很确定这只是在过去 1 或 2 天内才开始发生，有人也遇到过这种情况吗？这是我的 JS 代码，然后是错误

```
FB.getLoginStatus(function(response) {
    if (response.authResponse) {
        //Fire Login Ajax
    } else {
        FB.login(function(response) {
            if (response.authResponse) {
                FB.api('/me', function(response) {
                    //Fire Login Ajax
                });
            }
        });
    }
});

Uncaught Error: No polyfill registered for object
q    all.js:24
FB.subclass.process    all.js:118
FB.provide._processElement.processor    all.js:82
FB.provide._processElement    all.js:82
FB.provide.parse    all.js:82
q    all.js:24
FB.provide.parse 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:57:35.407

这是一个错误。据报道[https://developers.intern.facebook.com/bugs/420667497951980](https://developers.intern.facebook.com/bugs/420667497951980)，正在调查中。

请查看[Facebook Actionscript API 'Facebook.Init()' 调用突然返回空会话对象。为什么？](https://stackoverflow.com/questions/10510907/facebook-actionscript-api-facebook-init-call-is-suddenly-returning-null-sess)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:50:45.920

我昨晚的一个网站也发生了同样的事情。我将问题追溯到这一行：

```
FB.XFBML.parse(); 
```

如果我评论这一行，则不会发生错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:23:55.603

这是一个 FB API 问题。

JS SDK 今天上午 7:42 发布 目前，all.js 文件在加载时抛出异常。我们现在正在努力修复。有关更多信息和更新，请订阅错误 420667497951980。

时刻关注 FB 开发者页面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:05:41.393

如果 FQL 失败，这将有效

```
FB.api({
    method: 'fql.query',
     query: 'SELECT name, uid, pic_square FROM user WHERE uid=me()'
    },
   function(rows) {
      // Process here
    }
 ) 
```

# xcode - 如何在 XCode 中将裸 if 语句变成编译器警告？

> ID：10513724
> 
> 赞同：1
> 
> 时间：2012-05-09T09:51:48.480
> 
> 标签：xcode, compiler-warnings

我们继承了一个包含许多裸 if 语句的代码库，如下所示：

```
if (some_condition)
    do_something(); 
```

我们的房子风格禁止这样做，所以我希望（如果可能的话）它是一个编译器警告。我可以在 XCode 中做到这一点，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:15:55.467

特洛伊木马是对的，没有办法得到警告。您可以通过`-Weverything`在“其他警告标志”中输入“构建设置”来检查。

[Uncrustify](http://uncrustify.sourceforge.net/)是一个非常好的代码美化器，适用于许多语言，包括 Objective-C。对于您想要的 if 语句，配置需要一些时间来设置：

```
# Add or remove braces on single-line 'if' statement. Will not remove the braces if they contain an 'else'.
mod_full_brace_if                        = force 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T16:01:07.210

这可以通过 ObjClean [http://objclean.com/index.php来完成](http://objclean.com/index.php)

# jquery - 从另一个页面链接到特定选项卡

> ID：10513726
> 
> 赞同：1
> 
> 时间：2012-05-09T09:51:58.237
> 
> 标签：jquery, css, tabs, url-routing, hashcode

一些帮助将不胜感激 - 我正在尝试显示带有来自另一个页面的链接的特定选项卡。[[此处](http://www.canberra.edu.au/media/asdf/home.html)显示的示例]目标页面包含大部分代码 - 请记住选项卡运行良好，因为它们是我只需要能够定位选项卡中的特定内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:03:48.547

这应该有效：

```
// remove current selection 
$(".tablist ul.tabs li").removeClass("current");

// check if the desired tab exists 
if ( $("#" + (window.location.hash.replace("#", ""))) ) {

    // selected desired tab
    $("#" + (window.location.hash.replace("#", ""))).addClass("current");

} else {

    // select first tab
    $('ul.tabs li:first').addClass('current');
} 
```

# asp.net-mvc - 在 Asp MVC Telerik Grid 和实体框架中处理枚举

> ID：10513727
> 
> 赞同：4
> 
> 时间：2012-05-09T09:52:00.107
> 
> 标签：asp.net-mvc, entity-framework, enums, telerik, telerik-grid

对于开发中的 Web 应用程序（ASP.Net MVC），我使用的是 Telerik 网格。网格绑定到我的列表的 IQueryable，因为它是一个大表，我希望 Telerik 在列表上应用它的过滤器，然后执行这个结果，而不是下载 10'000 行（带有连接的表），然后使用过滤器，仅使用行。

我正在使用（我真的需要它用于此页面，它是关键功能之一）网格的过滤器/顺序。

主要列之一（确定数据的种类）是枚举。

问题是我一`"Specified type member is not supported in linq to entities"`尝试过滤/排序就得到了。

我必须将它绑定到枚举（而不是映射的 int）上，因为如果我使用 id，filters/order by 将在一个 int 上，我不能指望用户知道外部表的 id。

我只是无法再次实现自己的所有网格参数（位于 url 中）（我假设，要么我什么都做，要么什么都不做）并正确过滤，正确排序）。

您有解决方法的想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T02:15:39.260

我不知道你的实体模型是什么样子，但我假设你有这样的模型：

```
public partial class Project
{    
    public int Id { get; set; } 
    public string Name { get; set; }
    public int Status { get; set; }
} 
```

并且 Status 属性代表你的枚举值，那么你有这个枚举：

```
public enum ProjectStatuses
{
    Current = 1,
    Started = 2,
    Stopped = 3,
    Finished = 4,
} 
```

然后像这样创建新的 ViewModel：

```
public class ProjectDetails
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public int Status { get; set; }
        public ProjectStatuses StatusValue { get { return (ProjectStatuses) Status; } }
        // This property to display in telerik ClientTemplate
        public string StatusName { get { return Enum.GetName(typeof (ProjectStatuses), Status ); } }            
    } 
```

因为我喜欢扩展方法，所以我会添加这个：

```
public static class ModelListExtensions
{
        public static IQueryable<ProjectDetails> ToViewModelDetails(this IQueryable<Project> modelList)
        {
            return modelList.Select(m => new ProjectDetails
                                             {
                                                 Id = m.Id,
                                                 Name = m.Name,
                                                 Status = m.Status,
                                              };
         }
} 
```

* * *

***更新 ：***

**这是控制器**

```
 public ActionResult Index()
    {
        int total;
        var viewModel = getGridList(out total);
        ViewBag.Total = total;
        return View(viewModel);
    }

    //this Action to get ajax pages
    [GridAction(EnableCustomBinding = true)]
    public ActionResult ReGetIndex(GridCommand command, int roleId)
    {
        int total;
        var list = getGridList(out total, roleId, command);
        return View(new GridModel {Data = list, Total = total});
    }

    private IEnumerable<ProjectDetails> getGridList(out int total, GridCommand command = null)
    {
        command = command ?? new GridCommand {Page = 1};
    foreach (var descriptor in command.SortDescriptors)
    {
        if (descriptor.Member == "StatusValue")
            descriptor.Member = "Status";

    }
    foreach (FilterDescriptor descriptor in command.FilterDescriptors)
    {
        if (descriptor.Member == "StatusValue")
            descriptor.Member = "Status";
    }

    var list = modelService.AllAsQuery()
            .ToViewModelDetails() // To convert it to our ViewModel if we have one
            .Where(command.FilterDescriptors);

    total = list.Count();

    return (IEnumerable<ProjectDetails>) list.Sort(command.SortDescriptors)
                                                  .Page(command.Page - 1, command.PageSize)
                                                  .GroupBy(command.GroupDescriptors).ToIList();
} 
```

**这就是视图**

```
@model IEnumerable<ProjectDetails>
@{
    Html.Telerik()
        .Grid(Model)
        .Name("ProjectsGrid")
        .Sortable()
        .Filterable()
        .EnableCustomBinding(true)
        .DataBinding(dataBinding => dataBinding
                                        .Ajax()
                                        .Select("ReGetIndex", "Projects"))
        .Pageable(page => page.Style(GridPagerStyles.PageSizeDropDown | GridPagerStyles.NextPreviousAndNumeric).Total(ViewBag.Total))
        .Columns(column =>
                     {
                         column.Bound(m => m.Id).Hidden(true);
                         column.Bound(m => m.Name);
                         column.Bound(m => m.StatusValue).ClientTemplate("<#= StatusName #>");
                     })
        .Render();
} 
```

***更新 ：***

*如果您想强制执行至少一种排序顺序，您可以使用如下内容：*

```
 if (!command.SortDescriptors.Any())
 {
     command.SortDescriptors.Add(new SortDescriptor {Member = "YourDefaultProperty"});
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:58:17.440

你真的没有选择（或者很少有恼人的选择）

您是否使用类而不是枚举（但如果您使用枚举，那是因为它更好）。

或者你“伪排序”你的枚举，并使用映射的 int。

```
public enum TT
    {
        Brown = 0,
        Green = 1
    } 
```

当然，您必须检查数据库中的实际数据（映射的 int）并更新它们以符合新顺序（无法更改枚举顺序而不产生影响）。每次您想在现有枚举值之间插入一个值时，您都必须这样做。

或者你等待下一个 EF / linq / c# 版本，它应该在 linq2entities 中支持枚举

# javascript - 设置为 buttonset() 后禁用单选按钮

> ID：10513729
> 
> 赞同：6
> 
> 时间：2012-05-09T09:52:01.997
> 
> 标签：javascript, jquery, jquery-ui

我有 3 个单选按钮

```
<div id="test">
<input type="radio" id="time1" name="radio" value="1" /><label for="time1">Test 1</label>
<input type="radio" id="time2" name="radio" value="2" /><label for="time2">Test 2</label>
<input type="radio" id="time3" name="radio" value="3" /><label for="time3">Test 3</label>
</div> 
```

在jQuery中

```
$("#test").buttonset(); 
```

**之后**，我想禁用它们（当然，禁用放在`if`语句中）

```
$("#test input").attr("disabled", true);  //or
$("#test input").prop("disabled", true); 
```

但它不起作用，按钮仍然启用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T10:04:02.803

您正在使用 jQuery-UI，将单选按钮更改为 后`buttonset`，它们不再影响 UserInterface，因为它包含：

```
<div id="test" class="ui-buttonset">
<input type="radio" id="time1" name="radio" value="1" class="ui-helper-hidden-accessible"><label for="time1" aria-pressed="false" class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-left" role="button" aria-disabled="false"><span class="ui-button-text">Test 1</span></label>
<input type="radio" id="time2" name="radio" value="2" class="ui-helper-hidden-accessible"><label for="time2" aria-pressed="false" class="ui-button ui-widget ui-state-default ui-button-text-only" role="button" aria-disabled="false"><span class="ui-button-text">Test 2</span></label>
<input type="radio" id="time3" name="radio" value="3" class="ui-helper-hidden-accessible"><label for="time3" aria-pressed="true" class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-right ui-state-active" role="button" aria-disabled="false"><span class="ui-button-text">Test 3</span></label>
</div> 
```

所以你需要 jQuery UI 函数来禁用“按钮”（这是`spans`！）

```
$("#test input").button("disable") 
```

[**现场演示**](http://jsfiddle.net/P3Faw/2/)

[jQuery-UI 源码](http://jqueryui.com/demos/button/#method-disable)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T09:57:43.813

```
$("#test > input:radio").button({disabled:true}); 
```

**[演示](http://jsbin.com/amutum/6/edit)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T10:16:00.373

再次禁用调用 $("#test").buttonset() 后。

```
$("#test").buttonset(); 
```

然后：

```
$("#test input").attr("disabled", true);  //or
$("#test input").prop("disabled", true);
$("#test").buttonset(); 
```

我测试它并为我工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-06T18:57:49.003

根据[jQuery 文档](http://api.jqueryui.com/buttonset/#method-refresh)，正确的做法是：

$( '#test' ).buttonset( 'option', 'disabled', true ).buttonset( 'refresh' );

我无法得到任何其他建议。这个对我来说。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-23T13:13:28.930

我使用的方法是（无线电组 ID 是按钮集 ID）：

```
$('#RadioGroupID').buttonset('disable').buttonset('refresh'); 
```

现在，假设您想将其中一个单选按钮设置为被选中，触发您可能已编程到相关单选按钮的单击事件然后禁用，您可以将所有这些链接如下：

```
$('#RadioButtonID').prop('checked',true).trigger('click').parent().buttonset('disable').buttonset('refresh'); 
```

# java - 通过点击返回按钮转到 jsp 页面

> ID：10513745
> 
> 赞同：9
> 
> 时间：2012-05-09T09:53:05.187
> 
> 标签：java, forms, jsp, servlets

我有`2 jsp pages and one Servlet`。我正在通过 servlet 从数据库中获取数据并将结果发送到`result.jsp`我显示结果的页面。但我想添加一个`Back button`，`result.jsp`通过点击`back button`我想去`index.jsp`，但问题是当我每次收到消息时都点击后退按钮`Confirm form submission`，这让我很恼火。我怎样才能避免这种情况`Confirm form submission`？也许它是在 servlet 中完成处理时出现的。

索引.jsp

```
<form method="post" action="Student">

<input type="text" name="studentname"/>
<input type="submit" value="search"/>

</form> 
```

学生 servlet

```
 String student_name=request.getParameter("studentname");

  -------fetching data from database------------
  -------------------sending to result.jsp------

  String nextJSP = "/result.jsp";
      RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(nextJSP);
      dispatcher.forward(request,response); 
```

结果.jsp

```
 //displaying data here

<form action="index.jsp">

 <input type="submit" value="back"/>// a back button is here which is going to index.jsp   
</form> 
```

**编辑**

从`result.jsp`我要去另一个页面`result1.jsp`，如下所示

在`result.jsp`我写了以下内容：

```
<a  href="result1.jsp.jsp?a code=<%out.println(student_name);%>"><%out.println(student_name);%></a> 
```

通过单击上面的超链接，我去了`result1.jsp`

我想在此处添加一个后退按钮（在 result1.jsp 中），单击后我想对 result.jsp 执行操作，但是当单击后退按钮时，我`Confirm form submission`每次都会得到。我写了以下内容`result1.jsp`

```
<input type="button" value="Back" onclick="javascript:history.go(-1)"> 
```

我仍然收到该消息`Confirm form submission`。我怎样才能避免这种情况？我想`result.jsp`直接去没有这个消息。这怎么可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T09:58:18.743

您也可以使用它返回一页

```
<button type="button" name="back" onclick="history.back()">back</button> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-17T07:48:58.197

您可以编写下面的代码，让您进入`index.jsp`您的`result.jsp`页面

```
<a href="index.jsp">Back</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T11:34:11.593

如果你想要一个返回按钮去 index.jsp，为什么不做一个普通的链接呢？

```
<a href="index.jsp">Back</a> 
```

只有两种方法可以摆脱消息，普通链接或`window.location`. 如果上一页始终相同，则无需使用复杂的功能客户端。如果页面可能不同，只需发布​​指向 result.jsp 的链接并使用它来实际打印反向链接！

编辑 ：

以前的.jsp

```
<form method="post" action="Student">
<input type="hidden" name="back" value="previous.jsp" />
<input type="text" name="studentname"/>
<input type="submit" value="search"/>
</form> 
```

结果.jsp

```
out.println("<a href=\"" + request.getParameter("back") + "\">Back</a>"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T12:52:26.373

尝试这个

```
<button type="button" 
    name="back" 
    onclick='window.location='<your_path>/index.jsp'>back</button> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-27T15:39:59.287

这是使用 goBack() 方法创建返回按钮的最简单方法。这与单击浏览器顶部使用的“返回按钮”相同。

```
 <!DOCTYPE html>
    <html>
    <head>
    <script>
    /* The back() method loads the previous URL in the history list. 
       This is the same as clicking the "Back button" in your browser.
    */
    function goBack() {
        window.history.back()
    }
    </script>
    </head>
    <body>

    <button onclick="goBack()">Go Back</button>

    <p>Notice that clicking on the Back button here will not result in any action, because there is no previous URL in the history list.</p>

    </body>
    </html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-05T13:51:09.567

I experienced that form submit confirmation with Safari (not with IE/Chrome/FF).

The work around is submitting your form with "get" method. Of course this is only valid for "small" forms (max 2048 K).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T09:59:09.903

您可以使用常见的`button`.

```
<input type="button" value="Back" onclick="javascript:history.go(-1)"> 
```

使用`history.go(-1)`，您的浏览器将通过从缓存中读取来简单地显示上一页，它不会将您的数据重新提交到服务器，因此不会`Confirm form submission`发生。

**编辑**

我错了！

您只需要一个客户端重定向，您可以`result.jsp`在它处理从提交的表单后在您的中编写类似的内容`index.jsp`：

```
response.sendRedirect("result.jsp"); 
```

因此，您将需要一个参数来帮助您`result.jsp`判断它是简单的*显示*请求还是表单提交，如下所示：

```
String action = request.getParameter(action);
if("submit".equals(action)) {
    // handle form data
    response.sendRedirect("result.jsp");
} else {
    // other code to display content of result.
} 
```

在你的`index.jsp`，它会是这样的：

```
....
<form action="result.jsp?action=submit" ...> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-12T15:43:11.863

尝试这个

```
<a href="${pageContext.request.contextPath}/index.jsp" class="btn btn-success">
    Back
</a> 
```

从[这里使用 bootstrap.css](http://getbootstrap.com/)

# objective-c - 隐藏/显示带有隐藏属性的 UILabel 不起作用

> ID：10513748
> 
> 赞同：-1
> 
> 时间：2012-05-09T09:53:11.723
> 
> 标签：objective-c, cocoa-touch, uilabel

我在 CustomViewController 的方法 viewDidLoad 中实现了以下代码，以根据我的需要打开/关闭标签可见性：

```
- (void)viewDidLoad
{
 [super viewDidLoad];

 myLabel.hidden=NO;

if (x==1) {

   myLabel.hidden=YES;//here is correctly hidden
}
else {
    [self.view bringSubviewToFront:myLabel];

    if(!myLabel.hidden){

      NSLog(@"I'm not hidden!");// the log displays correctly! so myLabel is not Hidden but I can't see it!
      [self.view bringSubviewToFront:myLabel];
    }
} 
```

MyLabel 在 CustomViewController.h ("IBOutlet UILabel *myLabel;") 中声明，并连接到 Xib 文件中其对应的 UILabel 接口。

为什么即使它的“隐藏”属性是假的，我也看不到它？

ps将UILabel文本赋值给xib文件中的UILabel接口

谢谢卢卡

**解决**了谢谢伙计们我觉得很愚蠢。标签不在舞台上，所以我可以看到它。我刚刚重新定位它，现在它工作正常

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T10:19:56.547

您的代码中有错字：您的出口似乎是，`myLabel`但您的`if`声明使用`mylabel`（应使用大写“L”）。另请注意，此属性的 getter`isHidden`并不`hidden`像您预期​​的那样（虽然这不是问题的根源，但 Apple 在他们的文档中说明了它，所以我认为值得一提）。

**编辑：**

你说：

> MyLabel 在 CustomViewController.h ("IBOutlet UILabel *infoPostRist;") 中声明，并连接到 Xib 文件中其对应的 UILabel 接口。

那么，你不应该检查`infoPostRist`而不是`myLabel`那时吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:16:58.707

`(void)viewWillAppear:(BOOL)animated`您是否在or中尝试过您的代码`- (void)viewDidAppear:(BOOL)animated`？

加载视图控制器时隐藏/显示视图可能无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:32:51.180

您可以尝试将其从视图中删除：

```
[myLabel removeFromSuperview]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T07:13:37.703

为了知识，我回答了我自己的问题：问题是标签不在舞台上，所以我看不到它。我只是重新定位它，现在它工作正常

# .net - System.Collections.Concurrent 集合上的扩展方法是线程安全的吗？

> ID：10513749
> 
> 赞同：3
> 
> 时间：2012-05-09T09:53:18.283
> 
> 标签：.net, extension-methods, concurrentdictionary

例如，在 ConcurrentDictionary 类上有几个扩展方法，因为它实现了 IEnumerable 接口。这些方法（例如 First、Sum、Take 等）是否本质上是线程安全的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:08:29.580

扩展方法不会添加或删除任何线程安全。但是您不能真正忽略迭代集合永远不是线程安全的，无论您是显式执行还是让 Linq 执行。您必须确保没有其他线程可以同时修改该集合。

请注意，由于其延迟执行行为，这在 Linq 中特别棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:16:04.227

Linq-To-Objects 扩展方法在 上实现为静态方法[`System.Linq.Enumerable`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)，MSDN 声明它们都是线程安全的：

> 此类型的任何`public static`（`Shared`在 Visual Basic 中）成员都是线程安全的

如果您将它们与线程安全参数（[即）一起使用，`ConcurrentDictionary`则](http://msdn.microsoft.com/en-us/library/dd287191.aspx)应该没有任何问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T06:31:29.437

现在您可以使用 .Net 4.0 中引入的线程安全的高级并发集合。这真是一个很棒的概念。无需管理锁或任何东西。

# c# - 快速文本阅读器 c#

> ID：10513753
> 
> 赞同：-1
> 
> 时间：2012-05-09T09:53:36.090
> 
> 标签：c#, c#-4.0

我正在使用以下代码来读取和组合一个字符串中的文本数量：

```
 foreach (string path in filePaths)
            {

                StreamReader singfile = new StreamReader(path);

                string  file_text = singfile.ReadToEnd();
                combinetexts += file_text + "\n";

                fs.Close();

            } 
```

据我所知，字符串 combinetexts 将复制文件路径数量的 n 倍。是否可以使用字符串生成器来执行该操作？我试过了，但没有。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T09:58:24.673

这是一个简短的 LINQ 方法：

```
string result = string.Join("\n", filePaths.Select(x => File.ReadAllText(x))); 
```

或者使用 C# 4（它可以更好地处理类型推断 wrt 方法组转换）：

```
string result = string.Join("\n", filePaths.Select(File.ReadAllText)); 
```

如果您使用的是 .NET 3.5，则需要创建一个字符串数组，因为`string.Join`那时没有那么多重载：

```
string result = string.Join("\n", filePaths.Select(x => File.ReadAllText(x))
                                           .ToArray()); 
```

诚然，这样做的缺点是在执行连接之前读取所有*文件*- 但它仍然比原始代码中的重复连接要好。它也*可能*比使用更有效`StringBuilder`- 这取决于`string.Join`实现。

请参阅我的[文章，`StringBuilder`](http://pobox.com/~skeet/csharp/stringbuilder.html)了解为什么原始代码确实效率低下。

编辑：请注意，这不*包括*末尾的尾随`\n`。如果你*真的*想添加它，你可以:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:56:25.063

当然可以，使用

```
StringBuilder combinetexts = new StringBuilder();
...

combinetexts.Append(file_text);
combinetexts.Append("\n");; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T09:58:13.523

这是您使用 StringBuilder 而不是字符串的示例：

```
var sb = new StringBuilder();

foreach (string path in filePaths) 
    sb.AppendLine(File.ReadAllText(path)); 

string result = sb.ToString(); 
```

（我还冒昧地缩短/优化了您的代码[。File.ReadAllText](http://msdn.microsoft.com/en-us/library/ms143368.aspx)无需手动打开 StreamReader 即可读取文件的完整内容。此外，在末尾`AppendLine`自动添加一个。）`\n`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:03:34.720

是的，可以使用 StringBuilder，有多种方法可以“优化”这段代码。

**TL;DR** : 跳到这篇文章的最后一部分，以获得最好的方法。

这是您的代码的第 1 阶段更改：

```
StringBuilder combinetexts = new StringBuilder();
foreach (string path in filePaths)
{
    StreamReader fs = new StreamReader(path);

    string  file_text = fs.ReadToEnd();
    combinetexts.Append(file_text).Append("\n");

    fs.Close();
} 
```

其次，在构建之前，`StringBuilder`您可以计算实际需要多少空间，这将进一步减少复制字符串的机会：

```
long totalSize = 0;
foreach (string path in filePaths)
    totalSize += new FileInfo(path).Length + 1; // +1 = \n

StringBuilder sb = new StringBuilder(Convert.ToInt32(totalSize));
foreach (string path in filePaths)
{
    StreamReader fs = new StreamReader(path);

    string  file_text = fs.ReadToEnd();
    combinetexts.Append(file_text).Append("\n");

    fs.Close();
} 
```

最后我会使用`using (...)`而不是`fs.Close();`调用：

```
long totalSize = 0;
foreach (string path in filePaths)
    totalSize += new FileInfo(path).Length + 1; // +1 = \n

StringBuilder sb = new StringBuilder(Convert.ToInt32(totalSize));
foreach (string path in filePaths)
{
    using (StreamReader fs = new StreamReader(path))
    {
        string  file_text = fs.ReadToEnd();
        combinetexts.Append(file_text).Append("\n");
    }
} 
```

然后我会更多地使用 LINQ 并切换到 using`File.ReadAllText`而不是显式`StreamReader`，然后将代码行组合一下：

```
long totalSize = filePaths.Sum(path => new FileInfo(path).Length + 1);

StringBuilder sb = new StringBuilder(Convert.ToInt32(totalSize));
foreach (string path in filePaths)
{
    combinetexts.Append(File.ReadAllText(path)).Append("\n");
} 
```

然而，事实证明，有一个更好的方法来做到这一点：

```
string combinetexts = String.Join("\n", filePaths.Select(path => File.ReadAllText(path))); 
```

或在 C# 4.0 中可以更好地推断处理方法组转换的正确方法：

```
string combinetexts = String.Join("\n", filePaths.Select(File.ReadAllText)); 
```

这将完成上述*所有*操作，它将：

1.  读入所有文件
2.  String.Join 将计算保存整个字符串所需的总大小
3.  然后它将合并所有文本，每个文本`\n`之间都有一个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T09:57:19.180

使用 StringBuilder 来操作字符串更有效。

[http://www.codeproject.com/Articles/14936/StringBuilder-vs-String-Fast-String-Operations-wit](http://www.codeproject.com/Articles/14936/StringBuilder-vs-String-Fast-String-Operations-wit)

此致

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T09:58:37.327

试试下面的代码：

```
StringBuilder strBuilder= new StringBuilder();
foreach (string path in filePaths)
{
     StreamReader singfile = new StreamReader(path);
     string  file_text = singfile.ReadToEnd();
     strBuilder.AppendLine(file_text);
     fs.Close();
}
Console.WriteLine(strBuilder.ToString()); 
```

# mysql - 存储过程中的mysql变量和循环

> ID：10513755
> 
> 赞同：1
> 
> 时间：2012-05-09T09:53:43.447
> 
> 标签：mysql, stored-procedures, loops

尝试在存储过程的循环中使用时间戳变量时遇到问题。在下面，gtime 是一个 TIMESTAMP 输入变量，而 samples 是一个 INTEGER 输入变量

```
...
DECLARE t TIMESTAMP DEFAULT CURRENT_TIMESTAMP;
DECLARE i,step INT DEFAULT 0;

SET t = gtime;

myLabel: LOOP
    IF i = samples THEN
        LEAVE myLabel;
    END IF;

    SELECT a, b FROM myTable 
        WHERE myField = 1
        AND g_time > t
        AND g_time < '2011-09-06 00:00:09';

        SET i = i + 1;      
        SET t = t + 1500;   

    ITERATE myLabel;
END LOOP myLabel;
... 
```

虽然 i 正确更改其值并且循环执行“样本”次，但 t 不受影响，因此 SELECT 语句无法正常工作。t 变量始终具有其原始值。

任何想法为什么 t 变量保持不变？我也尝试使用 while 语句，但问题仍然存在。是否禁止在 SELECT 中使用随循环而变化的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:02:34.480

您不能将整数添加`1500`到`TIMESTAMP`. 要执行日期算术，您需要使用`INTERVAL`：

```
SET t = t + INTERVAL 25 MINUTE; 
```

# python - Django 用户在 Twitter 上发帖

> ID：10513759
> 
> 赞同：1
> 
> 时间：2012-05-09T09:54:00.013
> 
> 标签：python, django, twitter

我使用 Django-social-auth 对 Django 项目的用户进行身份验证。因此，我想我拥有 Twitter 用户的所有必要信息，可以代表他们在他们的 Twitter 帐户上发帖。那么我真的需要安装一个新的应用程序吗？或者手头的信息我该怎么做？这不只是将相关信息发布到 Twitter API 的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:08:50.227

您可以将代码提取到您自己的项目中，这样就可以了。但是使用开源库的好处是，当 Twitter 或 Social Network X 更改它的 API 时，很有可能该库如果流行，就会得到更新，而不是您需要进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:55:05.543

因此，如果您使用 Django Social Auth，您可以：

```
import urllib
import settings
import oauth2 as oauth

try:
    twitter_user = user.social_auth.get(provider='twitter')
except:
    return
if not twitter_user.tokens:
    return
access_token = twitter_user.tokens['oauth_token']
access_token_secret = twitter_user.tokens['oauth_token_secret']

token = oauth.Token(access_token,access_token_secret)
consumer_key = settings.TWITTER_CONSUMER_KEY
consumer_secret = settings.TWITTER_CONSUMER_SECRET
consumer = oauth.Consumer(consumer_key,consumer_secret)
client = oauth.Client(consumer,token)

data = {'status':'Your tweet goes here'}
request_uri = 'https://api.twitter.com/1/statuses/update.json'
resp, content = client.request(request_uri, 'POST', urllib.urlencode(data)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:42:21.617

是的，我相信如果您有必要的用户 twitter 帐户详细信息，那么您可以编写一个 (django) 应用程序来执行此操作。你可以使用类似[python-twitter](http://code.google.com/p/python-twitter/)的东西来发布到 twitter。

您应该可以[在此处](https://dev.twitter.com/docs)找到有关 Twitter api 的更多信息。

# vim - 在 VIm/gvim 的普通模式下使用宏内容时的操作差异（删除特定列）

> ID：10513760
> 
> 赞同：0
> 
> 时间：2012-05-09T09:54:03.290
> 
> 标签：vim, macros, norm

定义了一个宏

`let @a='$F|vF|<80>kr^V5jd'`

示例输入文件

```
+--------------------+---------+---------
|           Name     |   S1    |    S2
+--------------------+---------+---------
|           A        | -4.703  | -2.378  
|           B        | -3283.2 | -3204.5 
|           C        |  8779   |  7302   
|           D        |  22078  |  18018  
+--------------------+---------+--------- 
```

当我将它用作宏时，它执行 1 个任务

`:%norm @a`

结果 1

```
+--------------------+---------+---------
|           Name     |    S2
+--------------------+---------
 -2.378  
 -3204.5 
  7302   
  18018  
---------+--------- 
```

当尝试做同样的操作时

`:%norm $F|vF|<80>kr^V5jd`在同一个文件上

它正在做不同的任务

结果 2

```
|           D        |  22078  |  18018  
+--------------------+---------+--------- 
```

在正常模式下处理可视块内容宏时，我们需要特别注意吗？

有什么不对的吗。

实际上，我想做的是删除`S1`列，任何人都可以以这种方式提供帮助！

期望的输出

```
+--------------------+---------
|           Name     |   S2    
+--------------------+---------
|           A        | -2.378    
|           B        | -3205.5  
|           C        |  7302      
|           D        |  18018    
+--------------------+--------- 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:59:40.333

这就是我得到的：

`gg` `f+` `Ctrl-v` `Shift-g` `;;` `h` `d`

# android - Nvidia Tegra 3 上的 glDrawTexOES

> ID：10513763
> 
> 赞同：0
> 
> 时间：2012-05-09T09:54:16.340
> 
> 标签：android, opengl-es, tegra

我无法让 ((GL11Ext) gl).glDrawTexfOES / glDrawTexiOES 扩展在我的 Tegra 3 设备 (HTC One X) 上工作。启用 GL 错误后，我得到以下 GLException：“内存不足”。

相同的代码适用于我尝试的所有其他 Android 设备/模拟器，但我的 One XI 总是会出现此错误。我已经尝试过减小纹理大小，但没有任何区别。（是的，纹理尺寸总是 2 的幂）。

有没有其他人遇到过这个问题？有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:07:46.603

It looks like Tegra 3 just doesn't support this extension. So in the end, I changed TexFont to render textured "quads" and it seems to work ok.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T08:48:28.340

```
for(int lines = fntTexHeight-1; lines>0 ; --lines) {    
    pix.put(bits, lines * lineLen, lineLen);
}

**pix.position(0);**  //need this

// Place bitmap in texture

gl.glBindTexture(GL10.GL_TEXTURE_2D, texID); 
```

# java - 保护多租户 SaaS 应用程序

> ID：10513777
> 
> 赞同：0
> 
> 时间：2012-05-09T09:55:25.893
> 
> 标签：java, security, saas, multi-tenant

我在 Java、Spring、Struts2 和 Hibernate 中使用多租户 SaaS Web 应用程序。经过一番研究，我选择在共享数据库、共享模式、共享表方法中实现多租户。并使用tenantId 标记每个数据库行。

我已经重写了我的应用程序，因此 Managers 和 Dao 将把tenantId 作为参数来只提供正确的数据库资源。

这在获取信息时非常适合所有视图。并且还用于创建新内容（使用登录的用户tenantId 来存储信息）。

但是，对于更新和删除内容，我不确定如何保护我的应用程序。例如：当用户想要编辑一个对象时，url 将是：`/edit?objectId=x` 这被映射到一个动作，该动作将通过 Id 检索这个对象。这意味着任何登录的用户都可以通过 url-modification 查看任何对象。我可以通过将tenantId 添加到 Dao 来解决这个问题，因此如果用户试图查看其租户之外的对象，他将一无所获。

好的，那没关系，但是关于在编辑表单中发送时？如果用户修改了请求，弄乱了隐藏字段`objectId`，那么操作将收到更改不属于用户租户的对象的请求。

或者如果用户 url 修改了删除操作`/delete?objectId=x`

基本上我需要某种方式来确保登录用户可以访问他正在尝试做的任何事情。对于所有人来说都很容易。只需将tenantId 放在where 子句中即可。但是对于更新和删除，我不确定该往哪个方向发展。

我可以查询数据库的每次更新和删除以查看用户是否有权访问该对象，但我试图将 db-interaction 保持在最低限度。因此，我发现为每个此类操作进行额外的 db-call 是不切实际的。

有人对我的问题有任何提示或提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:40:51.510

阅读同样适用于写入/更新：用户只能查看/访问/更改他们拥有的内容。您的问题更多是关于数据库而不是其他任何问题。您应用于查看数据的相同约束也必须应用于写入数据。

在这种情况下，您不想先消耗查询的性能，然后再进行更新。这很好，因为您可以使用条件更新数据库。由于在您的情况下这似乎是数据库级别的，您需要知道您的数据库能够做什么（一次性完成）。例如，oracle 有 merge 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-12T18:54:15.483

我对这个线程很晚了，也许你已经构建了你在这里询问的解决方案。无论如何，我已经使用 Spring Boot 2 实现了一个每租户数据库的多租户 Web 应用程序，并使用 Spring Security 5 保护了 Web 访问。数据访问是通过 Spring JPA（使用 Hibernate 5 作为 JPA 提供程序）。一定要看看[这里](https://sunitkatkar.blogspot.com/2018/04/building-saas-style-multi-tenant-web.html)。

# mysql - Mac 上的 Visual Studio + MySQL：Virtual Box 与 Parallels

> ID：10513782
> 
> 赞同：0
> 
> 时间：2012-05-09T09:56:00.053
> 
> 标签：mysql, visual-studio, macos, parallel-processing, virtualbox

我被迫在 Mac 上完成我的 Windows 项目——它是一个连接到 MySQL 数据库的 Visual Studio C#。我已经在 Virtual box 上很好地安装了它，一切看起来都很好（嗯......除了 VB 本身的外观，由于某些原因我无法更改屏幕分辨率，所以我只使用了大约 50% 的屏幕）。当我把这件事告诉我的朋友时，他对 Mac 充满热情，他向我推荐了 Parallels，甚至提供了他的副本。虽然它看起来更好并且理论上“更好”，但我并不能真正在 VS 和 MySQL 之间的连接上正常工作：当我试图通过向导添加数据源时，我要么得到系统无法连接到 ODBC 的错误（是的，我已经重新安装了连接器）或向导继续，但在按下任何按钮后消失（即当我尝试键入“localhost”时）。

有人在使用 Parallels 时遇到过这样的问题吗？或者我应该尝试在 Virtual Box 上工作并修复屏幕问题（任何提示将不胜感激）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:05:39.947

到目前为止，我已经使用 Parallels 和 Visual Studio / SQL Server 超过 4 年了，它就像一个魅力！如果出于某种原因您的虚拟机可能会变慢，我可以建议您为心爱的 Apple 获取一些额外的内存。

特别是在运行 Windows 时，Parallels 有一些花哨的集成工具，与 VirtualBox 相比，它具有一些专业性。

我目前的 Mac 有 8GB 的​​内存和一个 SSD 驱动器。我为我的虚拟机分配了 4GB。我没有注意到 OSX 和虚拟机上的任何减速。事实上，我的 Windows 启动速度比我的一台本地 Windows 机器还快！

# ubuntu - Virtual Box 上的 Ubuntu 12.04 中的 USB 蓝牙

> ID：10513790
> 
> 赞同：0
> 
> 时间：2012-05-09T09:56:35.043
> 
> 标签：ubuntu, bluetooth, virtualbox, windows-7-x64

我在 Windows 7 的虚拟框中安装了 UBUNTU 12.04。问题似乎是 ubuntu 系统没有检测到蓝牙 USB 设备。我已经在ubuntu上安装了蓝牙，我打开它，我看不到我的USB蓝牙设备。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:10:30.263

在您的虚拟机中安装蓝牙管理器（blueman）。然后检查右上角的蓝牙图标。

# django - 无法使用 Django 和 mongoDB 运行 syncdb

> ID：10513795
> 
> 赞同：2
> 
> 时间：2012-05-09T09:56:59.057
> 
> 标签：django, mongodb, django-nonrel

我从 github得到`django-nonrel`,`djangotoolbox`和如下：`mongodbengine``setting.py`

```
DATABASES = {
    'default': {
        'ENGINE': 'django_mongodb_engine', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'admin',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
)

ROOT_URLCONF = 'ptl.urls'

TEMPLATE_DIRS = ('/Users/bxshi/PycharmProjects/ptl/templates',)

INSTALLED_APPS = (
    'django.contrib.contenttypes',
    'django.contrib.sessions',
) 
```

除此之外，我的项目中`settings.py`没有任何其他`.py`文件。

我得到的错误是：

```
BaoxuShis-MacBook:ptl bxshi$ python manage.py syncdb
Creating tables ...
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    execute_manager(settings)
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 351, in handle
    return self.handle_noargs(**options)
  File "/Library/Python/2.7/site-packages/django/core/management/commands/syncdb.py", line 109, in handle_noargs
    emit_post_sync_signal(created_models, verbosity, interactive, db)
  File "/Library/Python/2.7/site-packages/django/core/management/sql.py", line 190, in emit_post_sync_signal
    interactive=interactive, db=db)
  File "/Library/Python/2.7/site-packages/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/Library/Python/2.7/site-packages/django/contrib/contenttypes/management.py", line 11, in update_contenttypes
    content_types = list(ContentType.objects.filter(app_label=app.__name__.split('.')[-2]))
  File "/Library/Python/2.7/site-packages/django/db/models/query.py", line 84, in __len__
    self._result_cache.extend(self._iter)
  File "/Library/Python/2.7/site-packages/django/db/models/query.py", line 275, in iterator
    for row in compiler.results_iter():
  File "build/bdist.macosx-10.7-intel/egg/djangotoolbox/db/basecompiler.py", line 335, in results_iter
  File "build/bdist.macosx-10.7-intel/egg/djangotoolbox/db/basecompiler.py", line 430, in build_query
  File "build/bdist.macosx-10.7-intel/egg/django_mongodb_engine/compiler.py", line 160, in add_filters
  File "build/bdist.macosx-10.7-intel/egg/django_mongodb_engine/compiler.py", line 168, in add_filters
ValueError: need more than 3 values to unpack 
```

我发现有关 mongodbengine 的这个错误的一些东西，BBS 上的一个线程谈论这个，但它说这已经修复了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:47:29.180

只需使用[https://django-mongodb-engine.readthedocs.org/en/latest/topics/setup.html上的官方安装说明](https://django-mongodb-engine.readthedocs.org/en/latest/topics/setup.html)

# java - 如何在java中实现文件过滤器

> ID：10513798
> 
> 赞同：-1
> 
> 时间：2012-05-09T09:57:02.660
> 
> 标签：java

如何在 Java 中实现文件过滤器，以便我可以限制在“选择文件”对话框中向用户显示的可能文件，或者限制在列出目录中的文件时看到的文件列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:58:40.590

在谷歌搜索'java文件过滤器'之后，首先出现这个结果：

[http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html#filters](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html#filters)

该文档应该告诉你所有你需要知道的。

# xml - XML 字段 - 查询

> ID：10513800
> 
> 赞同：0
> 
> 时间：2012-05-09T09:57:04.937
> 
> 标签：xml, sql-server-2008, xml-serialization

我无法构建正确的语法来在我的 sql sever 2008 上执行与 XML 字段相关的任何查询。

我有一个简单的表，其中包含 Idproduct、ProductName 和 XmlProduct 等字段。..和 XmlProduct 字段如下所示：

```
<DynamicProfile xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/WinTest">
  <AllData xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
    <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MyFirstKey</d2p1:Key>
      <d2p1:Value>MyFirstValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>
    <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MySecondKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>
  </AllData>
</DynamicProfile> 
```

例如，我需要编写一个查询，将包含节点值的所有行提取到“MySecondKey”。怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:59:06.343

这是带有 xquery 运算符的 ans-->

```
declare @xmldata xml
    set @xmldata = 
    '<DynamicProfile xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/WinTest">
  <AllData xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
    <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MyFirstKey</d2p1:Key>
      <d2p1:Value>MyFirstValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>
    <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MySecondKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>
    <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MySecondKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>  <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MyFirstKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>  <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MyFirstKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>  <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MySecondKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>  <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MySecondKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>  <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MyFirstKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>  </AllData>
</DynamicProfile>'

;WITH XMLNAMESPACES 
(
    DEFAULT 'http://schemas.datacontract.org/2004/07/WinTest',
    'http://schemas.microsoft.com/2003/10/Serialization/Arrays' as d2p1
)
SELECT  x.c.value('(d2p1:Key)[1]', 'varchar(100)') as key3, x.c.value('(d2p1:Value)[1]', 'varchar(100)') as value
FROM @xmldata.nodes('/DynamicProfile/AllData/d2p1:KeyValueOfstringstring') x(c) where x.c.value('(d2p1:Key)[1]', 'varchar(100)') = 'MySecondKey' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:18:50.327

您可以使用以下 TSQL 代码-->

```
declare @xmldata xml
    set @xmldata = 
    '<DynamicProfile xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/WinTest">
  <AllData xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
    <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MyFirstKey</d2p1:Key>
      <d2p1:Value>MyFirstValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>
    <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MySecondKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>
    <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MySecondKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>  <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MyFirstKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>  <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MyFirstKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>  <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MySecondKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>  <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MySecondKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>  <d2p1:KeyValueOfstringstring>
      <d2p1:Key>MyFirstKey</d2p1:Key>
      <d2p1:Value>MySecondValue</d2p1:Value>
    </d2p1:KeyValueOfstringstring>  </AllData>
</DynamicProfile>'

 DECLARE @hDoc int, @rootxmlns varchar(100)
 SET @rootxmlns = '<AllData xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" />'

 EXEC sp_xml_preparedocument @hDoc OUTPUT, @xmldata, @rootxmlns  

 SELECT *
 FROM OPENXML(@hDoc, '//d2p1:KeyValueOfstringstring',2)
 WITH ([d2p1:Key] varchar(100) , [d2p1:Value] varchar(100)) where [d2p1:Key] = 'MySecondKey'

 --clean up 
 EXEC sp_xml_removedocument @hDoc 
```

# java - 使用 Hibernate 和 Oracle 的奇怪查询

> ID：10513801
> 
> 赞同：1
> 
> 时间：2012-05-09T09:57:15.657
> 
> 标签：java, sql, oracle, hibernate, jpa

也许任何人都可以使用hibernate和oracle来帮助我解决一个非常奇怪的行为。这是我第一次使用hibernate和oracle，所以这对你来说可能是一个简单的步骤:)。

但是让我们详细介绍一下。一个简单的 count(*) 结果：

```
 select * from ( select count(*) as col_0_0_ from TABLE tbl ) where rownum <= ? 
```

这没什么大不了的，但是如果我有一个要返回的行数有限的选择，它看起来像这样：

```
select * from ( select SOME_FIELDS from TABLE tbl order by tbl.ID desc ) where rownum <= 20 
```

这不是很快。如果我自己做

```
select * from from TABLE tbl where rownum <= 20 order by tbl.ID desc 
```

它和预期的一样快。有什么可以反对的吗？也许我的实体需要更多标签？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:12:24.723

第一个查询没有多大意义，因为 a`select count(*)`只返回 1 行。

第二个可能是你真正想要的。

第三个看起来像第二个，但根本不做同样的事情。order by 子句应用在 where 子句之后。所以第三个查询从表中选择前 20 行，没有任何特定的顺序，并按 ID 对这 20 行进行排序。第二个查询从表中选择行，按 ID 对它们进行排序，并仅返回这些排序行中的前 20 行。

# php - 如何将 JSON 编码的对象发送到将 PHP 类对象作为变量的 PHP 函数？

> ID：10513802
> 
> 赞同：1
> 
> 时间：2012-05-09T09:57:15.703
> 
> 标签：php, json, zend-framework

我有一个 java aplet 将 JSON 编码对象发送到 Zend Framework JSON 服务器。

我遇到的问题是代码设置如下：

服务器控制器：

```
public function jsonAction()
{

$server = new Zend_Json_Server();
$Server->setClass('Application_Model_ClassObject', 'co');

if('GET' == $_SERVER['REQUEST_METHOD'])
{
    $server->setTarget('...')
           ->setEnvelope(Zend_Json_Server_Smd::ENV_JSONRPC_2);
    $smd = $server->getServiceMap();

    header('Content-Type: application/json');

    echo $smd;
    return
}

echo $server->handle();
} 
```

类对象函数：

```
/**
* DoSomethign description
* @param ClassObject
*/
public function doSomething(Application_Model_ClassObject $obj)
{

    $someVariable = $obj->getSomeValue();
    ...
} 
```

我从服务器收到一个错误响应，说`obj`需要是`ClassObject`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:38:00.993

好的，这就是我们最终要做的（快速而肮脏的版本）......虽然我相信有更好的方法。

1.  删除了类型提示，以便该函数能够接收任何数据。
2.  在“Application_Model_ClassObject”中创建一个新函数，它将处理数据数组或对象。
3.  在“doSomething”中添加了一些额外的行，以便其余的可以正常进行。

以下是一些细节：

```
/**
* DoSomethign description
* @param ClassObject
*/
public function doSomething($data)
{
    $obj = new Application_Model_ClassObject();
    $obj->populate($data);

    $someVariable = $obj->getSomeValue();
    ...
}

/**
*
* Application_Model_ClassObject class
*/
class Application_Model_ClassObject
{
    ...

    public function populate($row)
    {
        if (is_array($row)) {
        $row = new ArrayObject($row, ArrayObject::ARRAY_AS_PROPS);
        }

        if (isset ($row->SomeValue)) {
        $this->setSomeValue($row->SomeValue);
        }

        return $this;
    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T10:16:31.993

如果删除类型提示“ClassObject”，则 doSomething 方法将接受任何传入的数据。然后由 doSomething 方法对 json 字符串进行解码，并对其进行一些有用的操作。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-09T10:02:00.537

> 公共函数 doSomething(ClassObject obj) { ... }

嗯，通常你不会写这样的 PHP 函数，因为它不是强类型的。通常，它看起来像这样：

公共函数 doSomething($obj) {...}

看起来您试图编写一个混合了一些 Java 语法的 PHP 函数。

# http - Esper CEP 实施中的 httpadapter

> ID：10513810
> 
> 赞同：0
> 
> 时间：2012-05-09T09:57:46.217
> 
> 标签：http, xmlhttprequest, adapter, esper, complex-event-processing

我需要使用 httpadapter 从 esper 引擎向网页发送数据。我按照示例中提到的步骤进行操作。不知何故，它没有工作。我需要使用普通的 java 对象发送。还让我知道如何为请求和响应配置 Web 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:03:39.110

如果您从网页发送到 Web 服务器。请检查您所有的 java/Event 类变量是否以小写字母开头。

例如：如果您声明 CardId : 将不起作用.. 给 null carId : 将起作用。

配置网络服务器：HttpOutputAdapter

```
Its all matters in URI. your web server uri and service name you invoke.

 http://host:port/servicename?parameters. 
```

# c# - 在消息框中显示 WebService 表的值

> ID：10513812
> 
> 赞同：1
> 
> 时间：2012-05-09T09:58:01.820
> 
> 标签：c#, windows-phone-7

我们想从 WebService 上的 Xml 表中检索惩罚。我们的代码从第一个表中读取惩罚值和第二个表的惩罚值，但在运行时它给了我们第一个值 2 次，而不是导致两个表的 2 个不同值。有谁知道我应该如何编辑我的代码以给出更高的指定结果？这是我的代码：

```
void pp_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    XElement resultElements = XElement.Parse(e.Result);

    List<StudentPunishment> sp = new List<StudentPunishment>();
    studentPunishmentsTables = resultElements.Element("studentPunishmentsTables").Value;

    string p = s.penalty;

    foreach (XElement nod in resultElements.Elements(@"studentPunishmentsTable"))
    {
        p = resultElements.Element("studentPunishmentsTable").Element("penalty").Value;
        MessageBox.Show(p);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T16:35:30.470

这段代码对我来说很好。

```
foreach (XElement nod in resultElements.Elements(@"studentPunishmentsTable"))
{
        s.penalty = nod.Element("penalty").Value;
        Console.WriteLine(s.penalty);     //MessageBox.Show(s.penalty);
} 
```

但请记住定义's'对象实例。

[http://prntscr.com/96nbh](http://prntscr.com/96nbh)

# php - 想象不工作

> ID：10513819
> 
> 赞同：2
> 
> 时间：2012-05-09T09:58:17.970
> 
> 标签：php, codeigniter, imagemagick, thumbnails

我正在从 pdf 文件的第一页创建缩略​​图。我几乎厌倦了网络上所有可用的解决方案以使 ImageMagick 运行，但我仍然收到以下错误

```
Fatal error: Class 'Imagick' not found in C:\wamp\www\mediabox\application\controllers\cron.php on line 153 
```

到目前为止我所做的。

1.  安装 GPL Ghostscript
2.  安装 ImageMagick-6.7.6-Q16
3.  在我的 php 安装的 ext 文件夹中下载并复制了 php_imagick.dll 文件。
4.  在我的 php.ini 文件中添加了 extension=php_imagick.dll 行。
5.  多次重启apache服务器和windows :)
6.  我正在使用 codeigniter 框架。
7.  php 5.3.10、apache 2.2.21、mysql 5.5.20、wamp 2.2 和 win 7

在我的本地主机页面上加载的扩展类别“Imagemagick 未列出”

我写的代码是

```
$image = explode('.', $filename_new);
$image_name = 'files/import/' . $ftp_upload["path"] ."/". $image[0] .".jpg";
//exec("convert -colorspace RGB -geometry 300x400! -density 200 " .$pdf_file."[0] ". $image_name);  
$img = $image[0].".jpg" ;
$im = new Imagick($img);
$im->pingImage($img);
$im->readImage($img);
$im->thumbnailImage(100, null);
$im->writeImage( 'files/import/' . $ftp_upload["path"] ."/".$img);
$im->destroy(); 
```

exec 命令创建图像但速度很慢我想使用 Imagick 类创建缩略图图像，我希望它比 exec 和 convert thingy 更快。

任何想法我应该怎么做才能使 Imagick 类可用于我的 php ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:21:06.063

我不确定你从哪里得到你的二进制文件，但这似乎是我大约一个月前经历的事情。我尝试的一些二进制文件会`phpinfo()`出现在`phpinfo()`.

然后我就按照我的问题[在这里](https://stackoverflow.com/questions/10084493/compiling-a-php-extension-as-non-thread-safe)编译了我自己的二进制文件。

我刚刚去为你编译了这些二进制文件。它们适用于 x86，用 VC9 编译，有线程安全和非线程安全版本。版本为 3.1.0RC1（最新）。

你可以在这里下载它们：http: [//min.us/mtg0Z66BI](http://min.us/mtg0Z66BI)

请让我知道这对你有没有用 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-21T22:01:36.443

在我的服务器上，pecl-imagick 扩展仅适用于 mod_mpm_prefork - 它不适用于 mod_mpm_worker.so 或 mod_mpm_event.so

那可能是你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:54:04.717

如果您只创建 jpg 将 jpg 提示添加到 exec() 命令，这将比 Imagick 更快。

在读取图像之前使用 -define jpeg:size=200x200 - 200x200 是输出图像大小。

我怀疑 Imagick 没有正确安装

# sql-server - 将 SQL 列转换为行

> ID：10513820
> 
> 赞同：4
> 
> 时间：2012-05-09T09:58:18.790
> 
> 标签：sql-server, rows

我想将一个记录列拆分为多行。

如果我有如下 SQL 语句：

```
SELECT 1,2,3 
```

结果：

```
1 | 2 | 3 
```

如何将其转换为以下结果？

```
1
2
3 
```

我目前正在使用 MS SQL 2008。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:07:34.417

```
SELECT 1
UNION
SELECT 2
UNION
SELECT 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:52:40.403

总结一下上面的评论：

*   如果要将列转换为行，则需要使用 T-SQL [UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)子句。

    如果要拆分包含逗号分隔值的单列，则需要创建一个函数（[此处为示例](http://www.sqlservercentral.com/Forums/Topic968028-338-1.aspx#bm968044)）

# c++ - 格式化输出：列

> ID：10513823
> 
> 赞同：2
> 
> 时间：2012-05-09T09:58:26.673
> 
> 标签：c++, fstream, formatted

我正在拼命尝试使用 fstream: 列来生成格式化输出。

有两个函数（无论函数 Func1，Func2）产生输出（写入同一个文件，“example.dat”）：

```
#include <fstream>

int main()
{
    std::ofstream fout;    
    fout.open("example.dat");

    for (int i=0; i<10; i++)
    {
        fout << Func1(i) << std::endl;
    };

    // Func2 depends on Func1, thus them **cannot** be written at the same time: 
    // fout << Func1() << " " << Func2() << std::endl;

    for (int i=0; i<10; i++)
    {
        fout << Func2(i) << std::endl;
    };

    return 0;
} 
```

输出将类似于：

功能1(0)

功能1(1)

.

. .

功能1(9)

功能2(0)

函数2(1)

.

.

.

函数2(9)

我的问题是：如何将此输出生成为两列：

功能 1(0) 功能 2(0)

功能 1(1) 功能 2(1)

.

.

.

虽然它们不是同时写入的。

我怀疑我需要使用 seekp()、tellp()，但不幸的是我不是这方面的大专家。

请帮忙！

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:11:12.247

```
vector<ostringstream> streams(10);

for (int i=0; i < 10; ++i)
{
    streams[i] << Func1(i);
}

for (int i=0; i < 10; ++i)
{
    streams[i] << " " << Func2(i);
}

ofstream fout("example.dat");

for (int i=0; i < 10; ++i)
{
    fout << streams[i].str() << endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:14:37.270

为什么需要 seekp 和 tellp （无论如何，对于粗心的人来说，写入文件中间充满了陷阱）

使用 std::vector （语法可能是错误的），因此：

```
std::vector<std::string> res1;
std::vector<std::string> res2;
res1.reserve(10);
res2.reserve(10);
for (std::size_t i = 0; i < 10; ++i)
{
    std::stringstream s;
    s << func1(i);
    res1[i] = s.str();
}
//same for res2, func2
for (std::size_t i = 0; i < 10; ++i)
{

    cout << res1[i] << " " << res2[i] << "\n";
} 
```

这可能是错误的格式，需要调整位。std::list 可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:04:09.107

假设您确实无法将它们保存在内存中，您可以写入两个文件，回到开头，逐行读取它们并输出到最终文件以创建连接列。

像这样的东西可能会起作用（我没有测试过）：

```
#include <fstream>
#include <string>
int main()
{
    std::fstream  fs_func1;
    std::fstream  fs_func2;
    std::ofstream fout;

    fs_func1.open("func1.dat")
    for (int i=0;i<10;i++)
    {
        fs_func1 << Func1(i) << std::endl;
    }
    fs_func1.seekg(0); // Set get pointer to start of file

    fs_func2.open("func2.dat");
    for (int i=0;i<10;i++)
    {
        fs_func2 << Func2(i) << std::endl;
    };
    fs_func2.seekg(0); // Set get pointer to start of file

    fout.open("example.dat");
    while (!fs_func1.eof() && !fs_func2.eof())
    {
        std::string func1_line;
        std::string func2_line;

        std::getline(fs_func1, func1_line);
        std::getline(fs_func2, func2_line);

        fout << func1_line << " " << func2_line << std::endl;
    }

    return 0;
} 
```

可能有一个 Unix 命令行工具可以一步完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:33:10.297

未经测试，但想法是将您的文件视为网格。

```
const int COLUMN_COUNT = 2;
const int COLUMN_WIDTH = 8;
const int ROW_WIDTH = COLUMN_COUNT * COLUMN_WIDTH + 1; // + 1 is for endl

void write_cell(std::ostream& out, int row, int column, double value) {

  // how many rows is there in the file ?
  out.seekp(0, std::ios_base::end);
  int row_count = out.tellp() / ROW_WIDTH;

  // Do we need to create more rows ?
  for(int i = row_count; i <= row; i++) {
    out.seekp(ROW_WIDTH - 1, std::ios_base::cur);
    out << endl;
  }

  // compute cell position
  int pos = row * ROW_WIDTH + column * COLUMN_WIDTH;

  // move to cell position
  out.seekp(pos);

  // write the cell content
  out << std::setw(COLUMN_WIDTH) << value;
}

int main()
{
  std::ofstream fout;    
  fout.open("example.dat");

  for (int i=0; i<10; i++)
  {
    write_cell(fout, i, 0, Func1(i));
  };

  for (int i=0; i<10; i++)
  {
    write_cell(fout, i, 1, Func2(i));
  };

  return 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-09T11:07:49.433

```
for (int i=0;i<10;i++)  
{  
    fout << Func1(i);  
};  
fout<<endl;  

for (int i=0;i<10;i++)  
{  
    fout << Func2(i);  
};  
fout<<endl; 
```

# java - 用于生成交互式图形的 Java 库

> ID：10513824
> 
> 赞同：7
> 
> 时间：2012-05-09T09:58:27.417
> 
> 标签：java, graph, visualization, graphviz

我想将我们的 SOA 服务可视化为图形。我们有业务服务和域服务。

```
 -> domain service 1
e.g. business service 1 -> domain service 2
                        -> domain service 3 
```

我目前使用 graphviz/dot 来生成图表——到目前为止一切都很好。图很大。现在我正在寻找一种工具，它允许我生成“交互式”图表，我可以在其中单击一个节点（业务服务），它将居中放置在视图中，并且它的所有依赖项（其他节点）都围绕它对齐。

有没有图书馆可以做到这一点？我已经看过“JUNG”，但没有找到实现这一目标的例子。

期待您的回复

marcel ps：如果有非java工具我也会感兴趣

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:19:24.267

在 Java 中

*   [Netbeans 可视化库](http://platform.netbeans.org/graph/)
*   [预熔](https://github.com/prefuse/Prefuse)

Javascript：

*   [D3](http://d3js.org/)
*   [Protovis](http://mbostock.github.com/protovis/ex/)（D3 的前身）
*   [JavaScript Infovis 工具包](http://thejit.org/)

闪光

*   [耀斑](http://flare.prefuse.org/)

# c# - WCF 方法需要不同的时间来执行

> ID：10513827
> 
> 赞同：0
> 
> 时间：2012-05-09T09:58:34.690
> 
> 标签：c#, wcf, performance

我有一个 WCF 服务和一个方法名称 areaGetStreetTypes。我使用 Fiddler 进行测试，因为我正在使用 json。我的问题是通话有时需要不到一秒钟，但有时需要 8-10 秒。部分解决方案是重新创建被调用的存储过程，但这不是永久的解决方案。

想法？

```
internal List<TvStreet> areaGetStreetTypes(int city_id, int language_id){
            List<TvStreet> responseList = new List<TvStreet>();
            Database db = new Database();
            using (db.sqlConnection){
                db.sqlConnection.Open();
                using (var cmd = new SqlCommand("areaGetStreetTypes", db.sqlConnection)) {
                    cmd.CommandType = System.Data.CommandType.StoredProcedure;
                    cmd.Parameters.Add(new SqlParameter("@city_id", city_id));
                    cmd.Parameters.Add(new SqlParameter("@language_id", language_id));
                    using (SqlDataReader dr = cmd.ExecuteReader())
                    {
                        while (dr.Read()) {
                            responseList.Add(new TvStreet() { name = dr["name"].ToString(), street_type = dr["triname"].ToString()});
                        }
                    }
                }
            }
            return responseList;
        } 
```

# java - 检票口选择选项 在 Select 进行的 getDefaultModelObject() 调用上返回 null

> ID：10513833
> 
> 赞同：1
> 
> 时间：2012-05-09T09:58:49.430
> 
> 标签：java, html, wicket

[我对wicket 中 Dynamic <optgroup> 支持](https://stackoverflow.com/questions/8521320/dynamic-optgroup-support-in-wicket)问题的回答包括一个选择框，该框使用 WebMarkupContainer 和 SelectOptions 组件进行样式设置。

我实际上是在尝试在扩展 Form 的类中使用它，并在超类构造函数中使用具有“选择”属性（以及其他）的 bean 作为 CompoundPropertyModel。MyBean 类型的 Bean 可以属于一个由 Group2Bean 表示的内部组，而其中的每一个又可以属于一个由 Group1Bean 表示的外部组。

代码（修改为隐藏机密和数据库检索）或多或少如下：

选择的 HTML 代码：

```
<select wicket:id="select">
    <wicket:container wicket:id="outerRV">
        <optgroup wicket:id="optGroup1">
          <wicket:container wicket:id="rv">
            <optgroup wicket:id="optGroup2">
              <wicket:container wicket:id="selectOptions">
                <option wicket:id="option"></option>
              </wicket:container>
            </optgroup>
          </wicket:container>
        </optgroup>
    </wicket:container>
</select> 
```

整个表单的 Java 代码：

```
public class MyForm extends Form<FilterBean> {

public MyForm(String id, FilterBean filterBean) {

super(id, new CompoundPropertyModel<FilterBean>(filterBean);

/*
 * ...code to get group1Beans and group2Beans...
 */

/* Select */
Select select = new Select("select");
select.setRequired(true);
add(select);

/* markup repeater for each group1 division */
RepeatingView rvOuter = new RepeatingView("outerRV");
select.add(rvOuter);

for(Group1Bean group1Bean : group1Beans){ /* for each group1 division */

    /* container with unique wicket ID */
    WebMarkupContainer overOptgroup1 = new WebMarkupContainer(rv.newChildId());
    rv.add(overOptgroup1);

    /* outer optgroup, name taken from group1Bean */
    WebMarkupContainer optGroup1 = new WebMarkupContainer("optGroup1");
    overOptGroup.add(optGroup1);
    optGroup1.add(
        new AttributeModifier("label",true,
                              new Model<String>(group1Bean.getName()
        ))
    );

    /* markup repeater for each group2 division */
    RepeatingView rv = new RepeatingView("rv");
    select.add(rv);

    for(Group2Bean group2bean : group2Beans){ /* for each group2 division */

      /* container with unique wicket ID */
      WebMarkupContainer overOptgroup2 =
              new WebMarkupContainer(rv.newChildId());
      rv.add(overOptgroup2);

      /* inner optgroup, name taken from group2Bean and indented */
      WebMarkupContainer optGroup2 = new WebMarkupContainer("optGroup2");
      overOptGroup.add(optGroup2);

      optGroup2.add(new AttributeModifier("style",true,
          new Model<String>("padding-left:15px")));

      optGroup2.add(new AttributeModifier("label",true,
          new Model<String>(group2Bean.getName())));

      /* fetches and displays MyBean options for selected group2 division */
      optGroup2.add(
          new SelectOptions<MyBean>(
              "selectOptions",fetchMyBeansUnder(group2Bean)
              new MyBeanRenderer()
          ).add(new AttributeModifier("style",true,
                   new Model<String>("padding-left="30px")))
      );
    }
} 
```

问题是，**模型的 select 属性没有更新**。按下（默认）提交按钮会给我一个“需要选择”反馈，即使我在生成的 webapp 界面上更改了我的选择，并尝试将此组件链接到进一步失败的组件，但无法检索到 select 属性的值。

尝试从具有通用 Select 的 1.4.6 更新到 1.5.6，但问题并没有得到解决。当Select 的 inputConverter() （在按下提交按钮后**调用）在 option 上调用 getDefaultModelObject() 时，**扩展和摆弄 Select 导致我将问题缩小到**返回 null 的所选 SelectOption**。

 **有什么想法吗，伙计们？提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:24:08.313

好吧，我发现了，一个愚蠢的错误。使用 SelectOption 的构造函数，模型不会为每个选项自动创建，而是由 MyBeanRenderer 的 getModel() 方法创建；我返回了一个空模型，而不是从 bean 参数创建的模型。我什至不认为它可能是渲染器......只是将一种方法更改为以下方法：

```
public IModel<T> getModel(T bean){
    return new Model<T>(bean);
} 
```

仍然不敢相信我在这上面花了几个星期却没有看到。**

# android - Android 1.6+ 中的 Android LruCache

> ID：10513835
> 
> 赞同：3
> 
> 时间：2012-05-09T09:58:57.403
> 
> 标签：android, memorycache

我需要在 Android 1.6+ 中使用 LruCache（来自 Android 3.1 的 api）

我使用支持 LruCache 的 Android Support Library v4（根据本手册[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html#memory-cache](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html#memory-cache)）但问题是我得到了NoClassDefNotFoundError 一直都是。我在我的项目中包含了 support.v4 库（在其他活动中我使用 ViewPager...）

任何人都知道为什么会这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T10:10:01.810

您不需要使用，`android.support.v4.util.LruCache<K, V>`因为`android.util.LruCache<K, V>`第二个仅存在于 API >= 12 的 android 上...检查是否从支持库而不是从 SDK 导入了...

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-09T11:52:33.303

为了避免这个问题，我将 LruClass.java 包含在我自己的项目中，并且 NoClassDefNotFoundError 不再出现

LruClass.java 位于：

**Android sdk 位置 /extras/android/support/v4/src/java/android/support/v4/util/LruCache.java**

# string - 在 url 中查找查询字符串

> ID：10513837
> 
> 赞同：0
> 
> 时间：2012-05-09T09:59:00.757
> 
> 标签：string, pattern-matching, preg-match, query-string

我有一个网址，就像一个字符串

```
http://www.php.net/index.php?page=mypage&keywords=mykeyword&title=mytitle 
```

我想抓取“mykeyword”，因为它是关键字查询部分的值，我只是将 url 作为一个刺，而不是 index.php 的 php 页面代码

我知道我应该用字符串匹配和一些 php 函数（如“preg_match”）做一些事情，但我不知道如何使用 thme

也许我应该切断与“＆”连接的部分的网址并转到“=”之后的值

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:05:13.817

如果您将 URL 作为字符串，则可以使用 parse_str。

```
$str = "http://www.php.net/index.php?page=mypage&keywords=mykeyword&title=mytitle";

parse_str($str);

echo $keywords; 
```

如果你想从 URL 请求它，你可以使用 $_REQUEST['keywords']

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:06:21.720

我从未使用过它，但这个功能看起来很有前途：

[http://php.net/manual/en/function.parse-str.php](http://php.net/manual/en/function.parse-str.php)

我建议使用输出参数变量来保持你的 $_GET 和 $_POST 变量不变。

# c - C基本交互超过for循环

> ID：10513839
> 
> 赞同：1
> 
> 时间：2012-05-09T09:59:04.750
> 
> 标签：c, for-loop

我正在对循环进行练习并且有疑问。

我有一个数组，`ints`并且想要遍历这个数组以获取`sum`数组元素。必须完成此迭代，在每次传递中，将第一个元素和最后一个元素相加，在第二次迭代中，将第二个元素和最后一个元素相加减去 1，依此类推。

如果我有一个包含偶数个元素的数组，我会这样做：

```
int main(){
    int i,sum=0,arraySize=10;
    int array[] = {1,2,3,4,4,4,7,8,9,10};

    for (i=0;i <arraySize/2;i++){
        sum+=array[i] + array[arraySize-i-1];
    }

    printf("The sum is %d\n", sum);

    return 0;
} 
```

但如果我有一个奇数，我会这样做：

```
int main(){
    int i,sum=0,arraySize=11;
    int array[] = {1,2,3,4,4,4,7,8,9,10,11};

    for (i=0;i <(arraySize/2)+0.5;i++){
        if (i != (arraySize/2)){
            sum+=array[i] + array[arraySize-i-1];
        }
        else{
             sum+=array[i];
        }
    }

    printf("The sum is %d\n", sum);

    return 0;
} 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:05:05.877

我会这样做：

```
 for(i=0, j= arraySize-1; i <= j; i++,j--){
   sum += array[i];
   if(i!=j){ sum+= array[j]; }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:02:27.840

我会这样做 - 避免浮动，除非你真的需要它们：

```
for (i=0; i < (arraySize / 2) + (arraySize & 1); i++) { 
```

`(arraySize & 1)`奇数为 1，偶数为 0。

或者更简单：

```
for (i = 0; i < (arraySize + 1) / 2; i++) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:33:27.117

这是一个针对可读性以及最少的分支/比较进行了优化的版本：

```
#include <stdio.h>
#include <stdio.h>

int calc_sum_in_weird_manner (const int* array, size_t n)
{
  int sum=0;
  const int* begin = &array[0];
  const int* end   = &array[n-1];

  while(begin < end)
  {
    sum += *begin + *end;
    begin++;
    end--;
  }

  if(begin == end) /* odd number */
  {
    sum += *begin;
  }

  return sum;
}

int main()
{
  const int array[] = {1,2,3,4,4,4,7,8,9,10,11};
  int sum;

  sum = calc_sum_in_weird_manner (array,
                                  sizeof(array)/sizeof(int));

  printf("The sum is %d.\n", sum);

  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:20:10.927

```
krithika.595> cat file1.cc
#include<iostream>

using namespace std;

int main()
{     
int i,sum=0,arraySize=10;     
int array[] = {1,2,3,4,4,4,7,8,9,10};
int j;
for (i=0,j=(arraySize-1);i<=j;i++,j--)
{         
if(i==j)
sum+=array[i];
else
sum+=array[i] + array[j];     
}
cout <<sum<<endl;
}
krithika.596> ./a.out
52
krithika.597> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T10:44:43.947

```
for (i=0;(i <arraySize/2)||(array[i]==array[arraySize-i-1]);i++){
        if (array[i]==array[arraySize-i-1]) {
             sum+=array[i];

        }else{

        sum+=array[i] + array[arraySize-i-1];
        }
    }

    printf("The sum is %d\n", sum); 
```

# c# - 从 Dropbox 下载文件

> ID：10513840
> 
> 赞同：1
> 
> 时间：2012-05-09T09:59:05.140
> 
> 标签：c#

我正在寻找有关如何通过按 c# 中的按钮从我的保管箱帐户下载文件的指南或视频。我想存储用户可以通过我的 Dropbox 帐户下载的小文件。

我的程序只是一个 Windows 窗体应用程序。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:07:55.540

[REST API](https://www.dropbox.com/developers/reference/api)是您开始阅读的好地方。还有一些用于 .NET 的[第三方开发工具包](https://www.dropbox.com/developers/reference/sdk)，它们将此 API 包装到可重用的客户端库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:11:35.963

[在https://www.dropbox.com/developers/start](https://www.dropbox.com/developers/start)查看 Dropbox API 。它提供了足够的信息和示例来帮助您入门！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-14T08:24:11.563

Dropbox 网站提供了一个示例控制台应用程序 .NET 代码，用于下载和执行其他操作。查看[https://www.dropbox.com/developers/documentation/dotnet#tutorial](https://www.dropbox.com/developers/documentation/dotnet#tutorial)。在您的情况下，您可以绑定按钮的 onClick 操作来执行下载功能。

# c++ - 使用 strtok 拆分字符串

> ID：10513841
> 
> 赞同：2
> 
> 时间：2012-05-09T09:59:09.793
> 
> 标签：c++, arrays

```
 char *strings[30];
 char Policystr[4096] = "the|string|to|split"; 
 char delims[] = "|";
 int i = 0;

 strings[i] = strtok( Policystr, delims )
 while( strings[i] != NULL  ) 
{
        MessageBoxA(NULL,strings[i],"stringsComparison",MB_OK);
        strings[++i] = strtok( NULL, delims );          
}
for ( int j = 0; j < i; j++ ) 
 {
     MessageBoxA(NULL,strings[j],"strings",MB_OK);
 } 
```

我是 C++ 新手，如果我能够在第二个循环中打印相同的字符串，我会在第一个循环中得到所有字符串我不知道你没有得到

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:06:28.503

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(void)
{
    char *strings[30];
    char Policystr[4096] = "the|string|to|split"; 
    char delims[] = "|";

    int i = 0;
    strings[i] = strtok( Policystr, delims );
    while( strings[i] != NULL  ) 
    {
        printf("%d '%s'\n", i, strings[i]);
        strings[++i] = strtok( NULL, delims );          
    }

    for ( int j = 0; j < i; j++ ) 
    {
        printf("%d '%s'\n", j, strings[j]);
    }
} 
```

输出：

```
0 'the'
1 'string'
2 'to'
3 'split'
0 'the'
1 'string'
2 'to'
3 'split' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T01:20:14.073

您的问题被标记为 C++，但您正在像 1985 年的 C 程序员一样操作字符串数据（没有冒犯，只是`strtok`现在通常不鼓励使用）。由于您使用的是 C++，因此我建议您避免使用 C 库函数，而是使用 C++ 标准库中提供的功能。`std::string`这是在 C++中拆分 a 的一种方法的完全独立的工作示例。我是 C++ 的新手，所以这可能不是最有效的方法。这种方法的好处是：

1.  内存管理是自动处理的，您的程序对输入或输出的大小没有任意限制。

2.  不使用旧的（不鼓励的）C 库函数。

3.  您不必修改原始输入数据来拆分字符串，这意味着您可以对 const 限定的输入进行操作。这`strtok`是无法做到的，因为`strtok`修改了原始输入。

4.  如果你有一个`char *`或`char []`缓冲区，你仍然可以使用这个方法，因为你可以把它变成一个`std::string`（如果它没有被一个空字符终止，你还需要给构造函数提供缓冲区的长度）。

5.  如果你想从`std::string`向量中的一个对象创建一个消息框，你可以使用`.c_str()`成员函数，例如

    ```
    MessageBoxA(NULL, results[i].c_str(), "strings", MB_OK); 
    ```

* * *

```
#include <string>
#include <iostream>
#include <vector>

int main(void)
{
    std::string delims = "|";
    std::string policyStr = "the|string|to|split";
    std::vector<std::string> results;
    size_t lastOffset = 0;

    while(true)
    {
        size_t offset = policyStr.find_first_of(delims, lastOffset);
        results.push_back(policyStr.substr(lastOffset, offset - lastOffset));
        if (offset == std::string::npos)
            break;
        else
            lastOffset = offset + 1; // add one to skip the delimiter
    }

    for (size_t i = 0; i < results.size(); i++)
        std::cout << results[i] << std::endl;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:04:53.537

`i=0`在开始使用它之前尝试初始化。在第一个循环中，您必须编写`MessageBoxA(NULL,strings[i],"stringsComparison",MB_OK);`

# php - 用于生产的 LAMP 堆栈？使用 PHP 5.4.x、Apache 2.4.x、MySQL 5.5.x

> ID：10513844
> 
> 赞同：4
> 
> 时间：2012-05-09T09:59:23.170
> 
> 标签：php, mysql, linux, apache, ubuntu

好的，我想我会尝试在我的测试服务器上安装最新最好的 LAMP 堆栈，以准备在生产中使用它。我决定使用 Ubuntu 服务器 12.04、Apache (2.4.2)、MySQL 5.5.24 和 PHP 5.4.2 并使用 PHP-FPM/fast-cgi。然后，我将所需的步骤写到[一个史诗列表中](http://pastebin.com/0gRLeBYN)，以便在需要迁移到我的生产 VPS 时轻松复制它们。

*   Ubuntu服务器安装没有问题。
*   我从源代码安装了 Apache，它加载了测试页面。
*   MySQL 从源代码编译并安装
    良好。但后来运行失败，我无法修复 mysql.sock 错误，所以我放弃了。然后我刚刚做了一个`apt-get install mysql-server`
    5.5.22 版本，这是一些过时的版本，但
    它运行正常，所以我想没关系。
*   所以接下来是 PHP，它可以很好地编译、测试和安装。现在是
    最后一步：将其与 Apache 链接。你可以猜到它
    失败了。它没有使用必要的 libphp5.so 模块进行编译，所以现在这不起作用。'无法将 /usr/local/apache2/modules/libphp5.so 加载
    到服务器中：/usr/local/apache2/modules/libphp5.so：无法打开
    共享对象文件：没有这样的文件或目录'。

谷歌搜索了所有这些错误并尝试修复但无处可去。所以暂时放弃了手动安装，因为到目前为止已经浪费了两个晚上。

1.  有没有可以在生产中使用的像样的 LAMP 堆栈？
2.  您应该在生产中使用一个，还是应该手动安装所有内容？每个人都是如何解决这个问题的？
3.  我知道有很多 LAMP 堆栈，例如 XAMPP 等，但它们从不经常更新，而且总是落后几个版本。为什么他们从不让他们保持最新？
4.  即使在生产中，您如何保持安装最新？

另外我想我可以做 apt-get 来安装所有东西。我喜欢单线安装，但即使是那些下载的版本也落后了。Apache 2.4 会很好地提高速度，我认为最好的做法是与 PHP 保持同步，这样您就可以获得安全性增强。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:11:27.897

我个人使用 debian-testing，但我听说 dotdeb 存储库是一个不错的选择。

[http://www.dotdeb.org/](http://www.dotdeb.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T21:27:36.080

一切对我来说都很好，请遵循这些 tuts：

[http://edin.no-ip.com/blog/hswong3i/apache-2-4-php5-4-pdo-oci-ubuntu-12-04-howto](http://edin.no-ip.com/blog/hswong3i/apache-2-4-php5-4-pdo-oci-ubuntu-12-04-howto) http://www.ui3net.com/basic-installation -of-mysql-from-source/

;)

# javascript - 是否有一个 JQuery 插件可以在您向下滚动页面时保持元素不变？

> ID：10513850
> 
> 赞同：-3
> 
> 时间：2012-05-09T09:59:43.530
> 
> 标签：javascript, jquery, html, css

我不是在谈论`position:fixed.`

当我向下滚动页面时，我希望元素与页面一起向下滚动，直到它通过浏览器的视图。当它通过视图时，它应该保持在页面顶部附近，但仍然可见，因此用户可以单击它。

您可以在右侧栏中的 Facebook 广告中看到这一点。（去脸书查一下）

是否有执行此操作的 JQuery 插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:01:29.323

请参阅[ScrollToFixed](https://github.com/bigspotteddog/ScrollToFixed)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:02:12.437

最近一直在使用几乎所有的 twitters bootstrap 真的很好，一个适合你：http: [//twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:04:32.483

你可以看看这个......它可能会有所帮助
[http://jsfiddle.net/ZczEt/167/](http://jsfiddle.net/ZczEt/167/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:11:03.880

你也可以检查[这个插件](http://www.vertstudios.com/blog/jquery-sticky-scroller-position-fixed-plugin/)

这是一个[演示](http://vertstudios.com/blog/demo/stickyscroller/demo.php)

jQuery [Waypoints](http://imakewebthings.com/jquery-waypoints/)也是一个非常好的插件，它有许多其他的功能，[这里](http://imakewebthings.com/jquery-waypoints/sticky-elements/#)是一个使用航点的粘性导航的例子。:)

# java - 从 MQSeries 读/写字符字节

> ID：10513851
> 
> 赞同：1
> 
> 时间：2012-05-09T09:59:43.923
> 
> 标签：java, character-encoding

我需要使用**IBM-1047**字符编码读取/写入字符串。但是当我尝试`java`使用`String.getBytes("IBM-1047")`a时`UnsupportedCharacterEncodingException`会抛出异常。

我的 Windows XP 系统上安装了字符编码（在 中确认`Control Panel > Regional And Language Options > Advanced Tab`）。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:24:26.787

您需要使用该`-encoding`选项将您正在使用的编码传递给编译器。有关详细信息，请参阅[此](http://illegalargumentexception.blogspot.ca/2009/05/java-rough-guide-to-character-encoding.html)链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:42:27.130

看看[在 Java 中将字符串从 ASCII 转换为 EBCDIC？](https://stackoverflow.com/questions/368603/convert-string-from-ascii-to-ebcdic-in-java)，它几乎会给你一个完整的答案。

您要使用的字符编码是`Cp1047`. [您可以在此处查看](http://docs.oracle.com/javase/1.4.2/docs/guide/intl/encoding.doc.html)支持的字符编码的完整列表。

# objective-c - 如何将自定义模式对话框设计为常规视图控制器？

> ID：10513854
> 
> 赞同：1
> 
> 时间：2012-05-09T09:59:53.850
> 
> 标签：objective-c, ios, cocoa-touch

我经常需要一个不填满整个屏幕的自定义模式对话框，例如 iOS SDK 附带的操作表。这个对话框必须处理一些棘手的场景和条件，例如界面旋转，并且还经常携带大量代码来处理用户选择。因此，将对话框构建为常规视图+控制器组合并使其像 UI 中的一等公民一样工作似乎是非常可取的。

`presentModalViewController:animated:`系统模态控制器 API（

控制器包含 API 看起来很有前途，因为它允许同时在屏幕上显示多个视图，每个视图由不同的控制器管理。（这正是常规视图控制器顶部的模态对话框的情况。）但是[正如我发现的那样](https://stackoverflow.com/questions/10512911)`UINavigationController`，与标准容器控制器（如 ）的相互作用是不稳定的。

有没有人有一种可行的技术可以将非全屏模式对话框保持为常规视图控制器并让它们与 UI 的其余部分很好地配合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:17:58.890

如果你绝对希望它成为一个视图控制器，你将不得不使用 iOS 5 中引入的容器 api，这听起来好像你已经在玩弄了。我完全同意你的看法——这有点棘手，因此我通常会选择不同的方法。

我创建了一个子类 NSObject 的控制器，并将其作为对象添加到 interfacebuilder 中。然后我将控制器设置为同时具有容器和内容视图。我创建了一个将 containerView 作为参数的初始化方法，并在该方法中执行我通常在 viewWillAppear 中所做的事情。初始化方法，我从视图控制器调用，负责将containerView交给模态控制器。

一旦初始化，模态控制器就负责它的容器和内容视图。一旦模态控制器应该关闭，它就会简单地将它们从他们的超级视图中删除。

这是我从 iPad 应用程序中的主视图控制器调用的方法。无关内容的摘要:)

```
- (IBAction)showAddProduct:(UIButton *)sender {
  UIView *containterForAddProduct = self.darken;
  containterForAddProduct.alpha = 0;
  [self.view addSubview:containterForAddProduct];
  [self.addEditProductController beginAddingProductInContainerView:containterForAddProduct andManagedObjectContext:self.gridController.managedObjectContext];
} 
```

# ruby-on-rails - 为什么当前目录没有被使用？

> ID：10513855
> 
> 赞同：0
> 
> 时间：2012-05-09T09:59:55.140
> 
> 标签：ruby-on-rails, apache, capistrano, symlink, thin

Rails 应用程序通过 Capistrano（在运行*Apache 前端*的 gentoo 机器上）很好地部署，Symlink 指向正确的（最新）目录。只有服务器继续使用旧目录，重新启动 Thin 无济于事。看起来好像正在进行一些缓存？

第二天运行通常的瘦服务器重启以进行测试……</p>

```
thin restart -s1 -p 3004 -e production 
```

…突然确实使用了最新的目录。但是任何新的部署再次无法使用，场景又重新开始。

```
# remote directories, via Capistrano
/release…1
/release…2
/release…3 # Server uses this directory, why?
/release…4
/release…5 # symlink 'current' points here 
```

解决了：

我试图一遍又一遍地从同一个 shell 中的当前重新启动 Thin。这令人尴尬地意味着我留在了同一个符号链接的 /current 目录中以重新启动。显然，与此同时，当前实际上是通过 Capistrano 推出的新产品。

tl;博士

```
#from current
cd ..
cd current/
Thin restart 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:27:32.637

您的 capistrano 配方是否正在重新启动服务器？

# google-bigquery - Bigquery 提高准确性问题

> ID：10513857
> 
> 赞同：1
> 
> 时间：2012-05-09T09:59:57.293
> 
> 标签：google-bigquery

我们有一个提高 BigQuery 准确性的问题，我们的使用案例如下，我们正在使用一个 16 亿条记录的表，一个对于我们的问题来说不是很大的表，并且我们正在尝试寻找唯一用户。

首先，我们认为使用“不同计数”，但正如文档中所说的大量数据，您可以获得估计结果。为了改善这一点，我们尝试使用“count + group by”代替“count distinct”语句。但是 bigquery 的结果是响应太大。我们首先按 UserID 分组，我们继续这个想法，但减少了数据数量，选择了特定的campaing，大大减少了数据量。但结果是一样的，反应太大了。

关于如何在 bigQuery 中准确获取唯一用户的任何想法或意见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:49:15.627

`COUNT(DISTINCT field)`如您所见，返回一个近似答案。您可以通过使用`COUNT(DISTINCT field, n)`较大的 N 值来提高准确性。该值越大，结果越准确，但如果设置得太高可能会出现“结果太大”的错误。

您可以使用 GROUP EACH BY 获得确切的唯一计数。这可能会使计算同一查询中的其他值变得困难，但 GROUP EACH BY 将适用于任何大小的表。例如：

```
select count(*) from (select field from dataset.table GROUP EACH BY field) 
```

# iphone - 如何更改 UISearchBar 以将文本字段内的搜索图标替换为文本

> ID：10513858
> 
> 赞同：3
> 
> 时间：2012-05-09T10:00:01.087
> 
> 标签：iphone, objective-c, ios

我有 UISearchBar，我想删除搜索标记（放大镜图标）并放置一个文本而不是它

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T10:24:02.713

您可以通过以下方式更改放大图标，使其适应您的需求：-

```
#import <UIKit/UIKit.h>

@interface SearchBoxExperimentsViewController : UIViewController {  
    IBOutlet UISearchBar *searchBar;
}
@end 

#import "SearchBoxExperimentsViewController.h"
@interface SearchBoxExperimentsViewController (Private)
- (void)setSearchIconToFavicon;
@end

@implementation SearchBoxExperimentsViewController
- (void)viewDidLoad 
{  
    [self setSearchIconToFavicon];  
    [super viewDidLoad];
}

#pragma mark Private
- (void)setSearchIconToFavicon 
{  
    // Really a UISearchBarTextField, but the header is private.  
    UITextField *searchField = nil;  
    for (UIView *subview in searchBar.subviews) {    
        if ([subview isKindOfClass:[UITextField class]]) {      
            searchField = (UITextField *)subview;      
            break;    
        }  
    }    
    if (searchField) {      
        UIImage *image = [UIImage imageNamed: @"favicon.png"];   
        UIImageView *iView = [[UIImageView alloc] initWithImage:image];    
        searchField.leftView = iView;    
        [iView release];  
    }  
}
@end 
```

它对我有用:)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-10-10T09:04:30.113

您可以使用 UIAppearance 方法

斯威夫特 3.0

```
UISearchBar.appearance().setImage(UIImage(named: "image_name"), for: .search, state: .normal) 
```

目标-c

```
[[UISearchBar appearance] setImage:[UIImage imageNamed:@"image_name"] forSearchBarIcon:UISearchBarIconSearch state:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T10:42:33.217

更经批准的 API 友好的是使用普通的 UITextField 代替，使用以下代码在 UITextField 中添加标签（如果您想移除放大镜，那么您对搜索框的吸引力是什么？）：

```
UILabel *searchFieldLeftLabel = [[UILabel alloc] initWithFrame:CGRectMake(5, 0, 32, 15)];
searchFieldLeftLabel.text = @"find:";
searchFieldLeftLabel.placeholder = @"e.g. wings, Boathouse";
searchFieldLeftLabel.font = [UIFont systemFontOfSize:14];
searchFieldLeftLabel.textColor = [UIColor grayColor];
self.searchFieldLeftLabel.leftView = locationSearchFieldLeftLabel;
[searchFieldLeftLabel release]; 
```

结果是一个漂亮的文本框，如下所示：

![在此处输入图像描述](../Images/0c82f0f3242e2a145ecc1049df1222b0.png)

当您开始输入文本时，它会替换占位符，但标签仍然存在：

![在此处输入图像描述](../Images/387ca0e1cab27595436e5a87b76a3ae7.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T10:29:25.450

请参阅这篇文章[删除 UISearchbar 左侧的图像](https://stackoverflow.com/questions/3245342/uisearchbar-image)。没有公共 API 可以更改或删除放大镜，您应该只使用 UITextField。

# sql-server - 如何使用包内 Excel 文件第一行中指定的列名？

> ID：10513867
> 
> 赞同：4
> 
> 时间：2012-05-09T10:01:02.223
> 
> 标签：sql-server, ssis

谁能告诉我在将数据从 Excel 源导入到 SSIS 2005 中的 OLEDB 目标时如何更改默认列名（*F1*、*F2*、*F3*等）。

示例：我的 Excel 电子表格中的数据如下所示

```
Title         | ProvinceID | DistrictID |
--------------|------------|------------|
Construction  |      12    |      32    | 
```

问题是，当我从工作表导入数据时，它会获取数据，但列标题名称显示为 F1、F2 和 F3，我希望列名称与 Excel 电子表格中定义的一样。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:06:48.297

### 解决方案：

您可以通过`First row has column names`在配置`Excel Connection Manager`.

### 例子：

下面是一个使用 SSIS 2008 R2 说明这一点的示例。

*   假设您有一个如下所示的 Excel 文件，其中第一行包含列名。

![Excel文件](../Images/3d90e0ae27bd534899d5fcee87370014.png)

*   配置*Excel 连接管理器*时，需要选择 Excel 文件。在 Excel 连接管理器上，您会注意到有一个名为`First row has column names`. 如果您想使用在 Excel 文件第一行中指定的列名在 SSIS 包中可见，请选中此框。

![Excel 连接管理器](../Images/2b3e7f95d9fd5a164e16694f5b750e53.png)

*   因此，当您在数据流任务中配置 Excel 源时，您会注意到 Excel 文件第一行中指定的列名正确显示。*以下屏幕*截图显示了在`Excel Source`.

![Excel源连接](../Images/3fa3c2191a4f379e9656fab1471c1b94.png)

![Excel 源列](../Images/8ce3db5a4b3adf1199e122b29a1f0fe2.png)

### 您的问题的原因：

*   您看到列名称为 F1、F2 和 F3 的原因是您可能没有选中`First row has column names`Excel 连接管理器上的框。在这种情况下，它将显示在 Excel 源代码中。

![没有列的 Excel 源](../Images/5dc05cd9c19e57e5ddec83f585700018.png)

希望有帮助。

# html - 当我在 Chrome 中单击页面上的任意位置时，Div（不确定其是否为 div）会自动调整大小

> ID：10513869
> 
> 赞同：0
> 
> 时间：2012-05-09T10:01:08.853
> 
> 标签：html, css

我在 Chrome V18 中遇到问题。如果我单击页面上的任意位置，我的灰色登录框会自动重新调整大小。

有人对可能导致此问题的原因有任何想法吗？

编辑：您会注意到我收到以下错误：

> event.layerX 和 event.layerY 在 WebKit 中被破坏和弃用。它们将在不久的将来从引擎中移除。

我在另一个运行 jQuery 1.7.2 的受保护目录中有一个确切的代码；这不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:13:06.900

替换`<br class="clear" />`为`<div class="clear"></div>`。

`<br />`是一个特殊标签，其高度取决于您的全局字体，因此如果您要使用“clear:both”之类的功能标签，那么 div 或其他大小为 0 的元素可能是一个更好的主意。

PS。您引用的消息无关紧要，但这是给您的一些信息：

1.  这称为警告，而不是错误。
2.  虽然它正在等待被弃用，但它目前仍在工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:12:53.720

删除该中断' `<br class="clear">`'标签，或替换为`<div class="clear"></div`

我希望它会工作..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:32:14.003

值得学习如何在代码中使用 clearfix 方法：http: [//css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

让生活变得非常轻松:)

# asp.net-mvc - 流畅的休眠和动态更新

> ID：10513871
> 
> 赞同：0
> 
> 时间：2012-05-09T10:01:19.087
> 
> 标签：asp.net-mvc, nhibernate, fluent-nhibernate

我有 NH 映射

```
public class TblContentMap : ClassMap<TblContent> {

        public TblContentMap() {
            Table("tbl_content");
            DynamicUpdate();

            Id(x => x.Id).GeneratedBy.Identity().Column("id");
....
            Map(x => x.ArticleType).Column("article_type").Not.Nullable();

        }
    } 
```

然后在我的控制器中映射为

```
public ActionResult Save(TblContent model) 
```

但是当我调用flush时它会抛出异常。非空属性引用空值或瞬态值 SocialDB.NDbModel.TblContent.ArticleType

问题是为什么？据我了解，动态更新应跟踪更改了哪些属性并仅更新该值。

PS。我知道如果首先获取然后更新模型 var item = MvcApplication.CurrentSession.GetContentById(model.Id); item.Content = model.Content.StripHtml(false);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:25:37.417

DynamicUpdate 仅用于更新，不插入新对象。

NH 已经告诉你问题出在哪里

> 非空属性引用空值或瞬态值 SocialDB.NDbModel.TblContent.ArticleType

在保存之前将 ArticleType 属性设置为某个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:47:11.380

通常它像在 EF 中一样工作，要使用动态更新需要选择项目并更新字段，然后将其推送到数据库，这样它只会更新修改过的字段。

# jsf - 启用选择时，DataModel 必须实现 org.primefaces.model.SelectableDataModel

> ID：10513873
> 
> 赞同：24
> 
> 时间：2012-05-09T10:01:40.213
> 
> 标签：jsf, primefaces

我试图实现一个启用 RowSelection 的 DataTable Editable。

但它抛出了一个异常：

> 启用选择时，DataModel 必须实现 org.primefaces.model.SelectableDataModel。

我在对象类和托管 bean 类中都实现了 DataModel，但错误是一样的。现在对我来说只有一个空白表。请帮忙。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-09T10:41:52.470

这个问题有两种解决方案：

1.  给dataTable添加rowKey、selection和selectionMode属性
2.  实现 SelectableDataModel 接口并扩展像 ListDataModel 这样的 DataModel 来填充数据表

第一个更简单。添加`rowKey="#{myEntity.carID}"`到您的`p:dataTable`应该可以解决您的问题

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-21T14:23:39.993

如果您尝试将新项目添加到基础列表并忘记为新项目的 rowKey 分配值（rowKey 为空），则可能会出现此错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-25T04:51:23.537

除了 rags 给出的解决方案之外，我想提一下，如果行键为“NULL”或者您的整个 List 为“NULL”，即使您已完成上述所有步骤，您也可能会遇到相同的错误。如果要显示 0 行，请返回一个包含 0 个项目的列表。不要返回`null`列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T10:08:31.593

错误消息表明您的 DataModel 未实现`SelectableDataModel`接口。它需要是一个单独的类。这是来自 PF 展示如何完成数据表定义的示例：

```
import org.primefaces.model.SelectableDataModel;  

public class CarDataModel extends ListDataModel<Car> implements SelectableDataModel<Car> {    
   ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-22T02:42:12.003

不要忘记在 EL 语法中包围 rowKey 值。

```
rowKey="row.id" 
```

会失败但是

```
rowKey="#{row.id}" 
```

将会成功。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-26T07:14:10.450

可能错误是因为在我的情况下 row.id 为空或 null 解决方案是更改此：

```
rowKey="row.id" 
```

对此：

```
rowKey="row" 
```

以及数据表的对象，例如

```
List<Row> collectionOfDataTable = new ArrayList<>(); 
```

行（对象）实现可序列化：

```
public class Row implements Serializable{...} 
```

# javascript - Jquery滑块 - 减少滑块手柄高度

> ID：10513874
> 
> 赞同：0
> 
> 时间：2012-05-09T10:01:42.100
> 
> 标签：javascript, jquery, jquery-ui, jquery-slider

我在我的网络应用程序中使用 jquery 滑块..需要做一些设计调整。这是我正在使用的 jquery 滑块 UI 的 css 代码[https://gist.github.com/2643478](https://gist.github.com/2643478)

在这里，我想降低滑块手柄的高度。当我在此代码中修改高度时它不起作用：

```
.slider .ui-slider .ui-slider-handle { position: absolute; z-index: 2; width: 10px; height: px; cursor: pointer; } 
```

但我可以控制手柄的宽度。为什么这里不能降低高度？

谢谢！

# c# - 无法从文本框中获取数据

> ID：10513876
> 
> 赞同：1
> 
> 时间：2012-05-09T10:01:42.770
> 
> 标签：c#, asp.net

我正在尝试从文本框中获取数据，但它显示未定义的 id 或类似的东西。这是我的代码。我不明白问题是什么。Text1、Text2 和 Text3 是我的文本框 ID。

```
 SqlCommandBuilder thisBuilder = new SqlCommandBuilder(thisAdapter);
     DataSet thisDataSet = new DataSet();
     thisAdapter.Fill(thisDataSet, "Odunc");
     DataRow thisRow = thisDataSet.Tables["Odunc"].NewRow();

    thisRow["Book_Name"] = "" + Text1.Text;
    thisRow["Reader_Name"] = "" + Text2.Text;
    thisRow["Expiration_Date"] = "" + Text3.Text;
     thisDataSet.Tables["Odunc"].Rows.Add(thisRow);
     thisAdapter.Update(thisDataSet, "Odunc"); 
```

asp部分

```
 <table style="width:100%;">
    <tr>
        <td class="style1">
            Name of Reader</td>
        <td>
    <input id="Text1" name="Text1" type="text" /></td>
        <td>
            &nbsp;</td>
    </tr>
    <tr>
        <td class="style1">
            Name of Book</td>
        <td>
    <input id="Text2"  name="Text2" type="text" /></td>
        <td>
            &nbsp;</td>
    </tr>
    <tr>
        <td class="style1">
            Expiration Date</td>
        <td>
    <input id="Text3"  name="Text3" type="text" /></td>
        <td>
            &nbsp;</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:02:54.033

您需要添加`runat="server"`要使用服务器代码访问的输入元素。

**例子**

```
<%-- markup --%>
<input runat="server" id="Text1" name="Text1" type="text" />

// server code
string value = this.Text1.Value; // not ".Text" 
```

或者，您可以使用服务器控件`asp:Textbox`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:05:53.817

使 TextBox 成为服务器端控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:06:47.560

为什么不使用 asp 控件？

```
<asp:TextBox ID="txtExample" runat="server" /> 
```

在您的代码隐藏中，您可以访问它并设置文本：

```
txtExample.Text = "Test"; 
```

# c# - Asp.net 中的 WinFormsControlLibrary

> ID：10513878
> 
> 赞同：-1
> 
> 时间：2012-05-09T10:01:46.513
> 
> 标签：c#, asp.net

我正在使用`windowformscontrol`库来捕获图像，它指的是一个 dll“ ***test.dll*** ”。

当我`windowformscontrol`在我的应用程序中使用该库时，`Asp.net`它在资源管理器中运行时会引发错误..

```
Exception : Unable to load the assembly test.dll 
```

请解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:05:40.273

理想情况下，您不应在 Web 上使用 Windows dll。看看这些帖子是否能帮助您解决问题 [http://www.beansoftware.com/ASP.NET-Tutorials/Place-Windows-Control-To-Web-Form.aspx](http://www.beansoftware.com/ASP.NET-Tutorials/Place-Windows-Control-To-Web-Form.aspx)

# jquery - jquery未定义的全局变量

> ID：10513885
> 
> 赞同：0
> 
> 时间：2012-05-09T10:02:03.530
> 
> 标签：jquery, global-variables

我有以下内容：

```
 var ImageArray = [];
    var Images = $('#ImageSelection').children('img');

    var i = 0;

    Images.each(function() {
        var ImageSource = $(this).attr('src');
        var ImageTitle = $(this).attr('alt');
        var ImageHeight;
        getImageDimensions(ImageSource, function(data) {
            ImageHeight = data.height;
            alert(typeof ImageHeight + ' ' + ImageHeight);
        });
        alert(typeof ImageHeight + ' ' + ImageHeight);
        $(this).attr('id', i);
        ImageArray[i] = {
            'src': ImageSource,
            'title': ImageTitle,
            'height': ImageHeight,
            'id': i
        };
        i++;
    }); 
```

运行此代码后，`ImageArray[0].height`未定义，但回调函数中的警报显示高度很好，而不在回调中的警报显示未定义。

getImageDimensions：

```
 function getImageDimensions(path, callback) {
        var img = new Image();
        img.onload = function() {
            callback({
                height: img.height
            });
        }
        img.src = path;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:52:19.303

代码`var ImageArray = [];`不会`ImageArray`全局化；恰恰相反！由于您指定`var`，因此该变量将在定义它的范围内是本地的。

您可能已经包装了`$(document).load(function(){ ... })`可以解释该行为的代码。

解决方案：摆脱`var`并为 any 之外的变量赋值`{}`：

```
 <script type="text/javascript">ImageArray = [];</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:16:56.230

似乎是一个同步问题。查询 ImageHeight 时，回调没有设置它。您应该在回调函数中设置 ImageArray[i]。

以下代码应该可以工作：

```
 var Images = $('#ImageSelection').children('img');
    var ImageArray = [];
    var i = 0;

    Images.each(function() {

        $(this).attr('id', i);

        getImageDimensions($(this), function(data) {
            var ImageHeight = data.height;
            alert(typeof ImageHeight + ' ' + ImageHeight);

            ImageArray[data.id] = {
                'src': data.src,
                'title': data.title,
                'height': data.height,
                'id': data.id
            };
        });

        i++;

    });

    function getImageDimensions($img, callback) {
        var img = new Image();
        img.onload = function() {
            callback({
                id: $img.attr('id'),
                height: img.height,
                src: $img.attr('src'),
                title: $img.attr('alt')
            })
        };
        img.src = $img.attr('src');
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T10:17:09.633

这是一个异步问题。

尝试重现您的代码行为。假设我们在 Images 数组中有一张图像。

1.  输入每个函数体
2.  调用 getImageDimension()
3.  在 getImageDimension() 中，创建一个图像，并附加一个事件处理程序。就是这样：你的程序继续。
4.  在每个函数体中，将维度存储在 ImageArray 数组中。在这个时间点，它仍然是未定义的

在不久的将来，您的图像的 onload 回调将被调用，并且您的变量将被初始化。但为时已晚：您的每个功能都已经完成。

你需要：

1.  在循环中创建所有图像，并附加您的处理程序。
2.  等待您的所有处理程序被触发（例如使用计数器）
3.  现在显示了所有图像，您可以选择它们并获取它们的当前高度。

希望能帮助到你 ！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T10:14:04.687

我已经改进了代码以跟踪图像加载并在准备好时调用 processAfterLoading

```
var Images = $('#ImageSelection').children('img');
// new introduced Image-Load-Counter
var ImagesToLoad=Images.length;
var ImageArray = [];
var i = 0;

Images.each(function() {

    $(this).attr('id', i);

    getImageDimensions($(this), function(data) {
        var ImageHeight = data.height;
        alert(typeof ImageHeight + ' ' + ImageHeight);

        ImageArray[data.id] = {
            'src': data.src,
            'title': data.title,
            'height': data.height,
            'id': data.id
        };
        // Keep track of the amount of images to load before working with ImageArray
        ImagesToLoad--;
        if (ImagesToLoad<1) processAfterLoading()
    });

    i++;

});

function getImageDimensions($img, callback) {
    var img = new Image();
    img.onload = function() {
        callback({
            id: $img.attr('id'),
            height: img.height,
            src: $img.attr('src'),
            title: $img.attr('alt')
        })
    };
    img.src = $img.attr('src');
};

function processAfterLoading() {
    // Do ALL the things with ImageArray
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T10:21:48.677

试试这个：

```
var ImageArray = [];
var Images = $('#ImageSelection').children('img');

var i = 0;

Images.each(function() {
    var ImageSource = $(this).attr('src');
    var ImageTitle = $(this).attr('alt');
    var ImageHeight;
    getImageDimensions(ImageSource, function(data) {
        ImageHeight = data.height;
         window.ImageArray[i] = {
        'src': ImageSource,
        'title': ImageTitle,
        'height': ImageHeight,
        'id': i
    };
    });

    $(this).attr('id', i);

    i++;
}); 
```

# html - 是否可以对 3 个或更多 OG 对象使用相同的 OG 操作？

> ID：10513886
> 
> 赞同：0
> 
> 时间：2012-05-09T10:02:05.300
> 
> 标签：html, facebook, facebook-opengraph

我们使用一些默认的 og 对象，如文章、书籍、个人资料等。是否可以为所有人创建相同的 og 操作？

例如，我想要我自己的 copychanges ：

“Ildiko**喜欢**此站点上的XY**主题**”，或“Ildiko**喜欢**站点上的James**个人资料**”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:31:21.820

不，这目前是不可能的。

您可以在标题中包含“{user} {action'd} {object} on {appname}”。如果您想为该故事添加上下文，您可以使用对象引用或操作引用将操作或对象链接到另一个对象。然后可以在故事标题下方的故事附件中显示此引用对象的详细信息。

# mysql - MySQL 数据库 - 从 webmin 访问时从存储引擎收到错误 28

> ID：10513887
> 
> 赞同：11
> 
> 时间：2012-05-09T10:02:06.407
> 
> 标签：mysql, database

我正在尝试从 webmin 控制台访问 MySQL 数据库。但是我无法访问数据库，因为它会引发以下错误消息：

```
SQL select table_schema,table_name from information_schema.views where table_schema = ? 
failed : Got error 28 from storage engine 
```

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-18T05:34:31.517

检查您的磁盘空间使用情况。

我也面临同样的问题。我通过将文件移动到另一个磁盘来修复。

如果您使用的是 Linux 操作系统。您可以使用以下命令检查磁盘使用情况：

```
> df -k

    Filesystem           1K-blocks      Used Available Use% Mounted on
    /dev/xvda1             8256952   7857928         0 100% /
    udev                    860884         4    860880   1% /dev
    tmpfs                   347492       188    347304   1% /run
    none                      5120         0      5120   0% /run/lock
    none                    868724         0    868724   0% /run/shm
    /dev/xvdb            350891748    199364 332868104   1% /mnt 
```

我从 /dev/xvda1 -> /dev/xvdb 分区中移动了一些文件。

并检查磁盘使用情况。

```
> df -k
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/xvda1             8256952   2520216   5317308  33% /
udev                    860884         4    860880   1% /dev
tmpfs                   347492       188    347304   1% /run
none                      5120         0      5120   0% /run/lock
none                    868724         0    868724   0% /run/shm
/dev/xvdb            350891748    415456 332652012   1% /mnt 
```

现在 MySQL 服务器工作正常。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-11T15:21:26.110

是的，这是一个磁盘空间问题，但它可以通过伪装。我建议打开 2 个控制台并在其中一个中运行

```
观看 -n1 "df -h"
```

另一方面尝试重现错误，同时查看第一个控制台。在我的情况下，/tmp 为 35% (1G)，它变为 100%，当命令完成时又回到 35%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-15T14:36:46.177

实际上在我自己的情况下，这是一个化装舞会。我使用 Siteground 托管该站点，当我使用他们的 SuperCacher 刷新系统时，一切又开始工作了。我只是为任何人添加这个答案

# symfony - 如何在控制器中访问别名值？

> ID：10513895
> 
> 赞同：0
> 
> 时间：2012-05-09T10:02:39.913
> 
> 标签：symfony

我在我的存储库中创建了一个查询，它返回标记的总和，并且我给了它一个别名。以下是代码：-

```
public function findAllResults()
    {
        $query = $this->getEntityManager()
                ->createQuery("
                SELECT res, sum(res.marks) as total 
                FROM CollegeStudentBundle:Results res, CollegeStudentBundle:Student std
                WHERE std.id = res.student_id group by std.firstname");
        return $query->execute();
    } 
```

如果我想检查 res 中的任何字段，我将代码编写为：-

```
echo "<pre>"; print_r($results[0][0]->getStudentId()->getfirstname()); exit; 
```

现在我的问题是，当我尝试这段代码时，我也想打印总数：-

```
echo "<pre>"; print_r($results[0][0]->getTotal()); exit; 
```

它给了我错误。我如何访问该值。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:48:41.897

做一个`var_dump`。`$result`我认为`total`字段在找到的实体对象之外。所以`$result[0]['total']`可能有效。

# vbscript - 使用 vbScript 检查 SCCM 中是否存在对象

> ID：10513897
> 
> 赞同：0
> 
> 时间：2012-05-09T10:02:49.883
> 
> 标签：vbscript, sccm

我有一个存储在 vbscript 数组中的计算机名称列表，需要检查这些计算机名称是否在 SCCM 中有对象。

我尝试使用类似于： **set accounts = sQbemServices.ExecQuery("select * FROM SMS_R_System WHERE name = '" & testForName & "'")** 的查询来查看 SCCM。只要计算机名称有效，就可以正常工作，但是一旦达到无效名称，它似乎就会停止。我试过输出错误号，但这总是返回一个'0'并检查结果是否为空，但这不起作用。

这是检查计算机对象是否存在的最佳方法吗？如果是，谁能告诉我我做错了什么？如果没有，任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T16:08:41.607

`SWbemServices.ExecQuery`通常返回一个`SWbemObjectSet`. 如果您的查询找到一台有效的计算机，`accounts.Count`则应为 1 或更多，否则为 0。例如：

```
If (accounts.Count > 0) Then 
    WScript.Echo "Found Computer in SCCM"
Else
    WScript.Echo "Computer is not in SCCM"
End If 
```

有关以下信息的更多信息`SWbemServices`：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa393866(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393866(v=vs.85).aspx)

# django - 在 Django 表单中使用替代 ForeignKey

> ID：10513900
> 
> 赞同：0
> 
> 时间：2012-05-09T10:02:58.460
> 
> 标签：django, forms, django-forms

我有两个模型：

```
class Account1(models.Model):
    uuid = models.CharField(max_length=22, unique=True)
    user = models.ForeignKey(User)

class Account2(models.Model):
    uuid = models.CharField(max_length=22, unique=True)
    account_1 = models.ForeignKey(Account1) 
```

“uuid”是一个自定义 CharField，将短 uuid（如“mfAiC”）存储为表单中的索引。URL 看起来像 /view/uuid/。我想在所有 URL/HTML 中隐藏真实 ID。

以及模型 Account2 的形式：

```
class Account2Form(forms.ModelForm):
    class Meta:
        model = Account2
        fields = (
            'account_1',
        )

    def __init__(self, user, *args, **kwargs):
        super(Account2Form, self).__init__(*args, **kwargs)
        self.fields['account_1'].queryset = Account1.objects.filter(user=user) 
```

呈现的 HTML 将是：

```
<select name="account_1" id="id_account_1">
    <option value="" selected="selected">---------</option>
    <option value="1">account 1 name</option>
</select> 
```

我需要的是在表单中使用 uuid 而不是 id，例如：

```
<select name="account_1" id="id_account_1">
    <option value="" selected="selected">---------</option>
    <option value="mfAiC">account 1 name</option>
</select> 
```

我知道我可以手动完成。我可以禁用 account_1，创建一个表单字段，例如 uuid，然后为其动态设置选项。然后在表单验证或视图中验证表单数据。

但是还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:19:41.933

```
class Account2Form(forms.ModelForm):
    account_1 = forms.ChoiceField(label='Account 1', choices=(1,1))
    class Meta:
        model = Account2
        fields = (
            'account_1',
        )

    def __init__(self, user, *args, **kwargs):
        super(Account2Form, self).__init__(*args, **kwargs)
        self.fields['account_1'].choices = [(acc1.uuid, acc1.account_name) for acc1 in Account1.objects.filter(user=user)] 
```

# setinterval - 将 setInterval 与 PageMethods 一起使用

> ID：10513912
> 
> 赞同：0
> 
> 时间：2012-05-09T10:04:00.727
> 
> 标签：setinterval, scriptmanager, pagemethods

我正在尝试使用 setInterval 每 X 秒调用一次 LoadFile() 函数，并且我想在我的文档就绪函数中调用它，并且我的 aspx 页面上的脚本管理器将 EnablePageMethods 设置为 true。但这似乎不起作用并返回 PageMethod not defined 错误。我的代码如下

* * *

```
<script type="text/javascript" >
    $(document).ready(function () {
        setInterval(function () {
            PageMethods.LoadFile();              
        }, 1000); 
    });
</script> 
```

* * *

```
 [WebMethod]
    public void LoadFile()
    {
        Collection<string> stringcollection = new Collection<string>();
        divLogSummary2.InnerHtml = "";
        try
        {
            StringBuilder content = new StringBuilder();
            if (string.IsNullOrEmpty(logFilePath))
            {
                return;
            }

            if (File.Exists(logFilePath))
            {

                using (FileStream fs = new FileStream(logFilePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
                {
                    using (StreamReader sr = new StreamReader(fs))
                    {
                        while (!sr.EndOfStream)
                        {
                             stringcollection.Add(sr.ReadLine());
                        }
                    }                        

                }
                for (int i = stringcollection.Count - 30 ; i < stringcollection.Count; i++)
                {
                    divLogSummary2.InnerHtml = divLogSummary2.InnerHtml + " <BR> " +                       stringcollection[i];
                }

            }
        }
        catch (Exception)
        {

        }
    } 
```

我对 Ajax 比较陌生，非常感谢任何帮助和见解。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:08:33.957

您的方法应声明为静态，以便与 PageMethods 一起使用。

```
[WebMethod]
public static void LoadFile()
{
  .....
} 
```

最好的祝福

# java - Convex Hull - 确定点的顺序

> ID：10513920
> 
> 赞同：3
> 
> 时间：2012-05-09T10:04:33.833
> 
> 标签：java, algorithm, convex-hull, convex-polygon

因此，我正在学习 Convex Hull 算法，并编写从幼稚的 Bruteforce 到 Graham Scan 的所有算法。

这是我的蛮力 O(n^4) 算法。一开始，假设所有点都是船体的一部分。对于每个可能的三角形，消除位于三角形内的所有点。最后，那些没有被淘汰的点将成为船体的一部分。

这是 Java 代码（已修复：使用 Thomash 的解决方案）

```
public List<Point> naive(List<Point> points) {
    if (points == null)
        return Collections.emptyList();
    if (points.size() <= 3)
        return points;
    boolean[] extremePoints = new boolean[points.size()];
    Arrays.fill(extremePoints, true);
    for (int i = 0, sz = points.size(); i < sz; i++) {
        if (extremePoints[i])
            for (int j = 0; j < sz; j++) {
                if (i != j && extremePoints[j]) {
                    for (int k = 0; k < sz; k++) {
                        if (k != i && k != j) {
                            for (int l = 0; l < sz; l++) {
                                if (extremePoints[l] && l != i && l != j
                                        && l != k) {
                                    // Check if P[l] lies in triangle formed
                                    // by
                                    // P[i],P[j],P[k]

                                    Polygon p = new Polygon();
                                    p.addPoint(points.get(i).x,
                                            points.get(i).y);
                                    p.addPoint(points.get(j).x,
                                            points.get(j).y);
                                    p.addPoint(points.get(k).x,
                                            points.get(k).y);
                                    if (p.contains(points.get(l)))
                                        extremePoints[l] = false;
                                }
                            }
                        }
                    }
                }
            }
    }

    Point centerOfHull = null; // Arbitrary point inside the hull
    // Order?
    for (int i = 0; i < extremePoints.length; i++) {
        if (!extremePoints[i]) {
            centerOfHull = points.get(i);
            break;
        }
    }
    List<Point> convexHull = new ArrayList<Point>();
    for (int i = 0; i < extremePoints.length; i++) {
        if (extremePoints[i]) {
            convexHull.add(points.get(i));
        }
    }
    Collections.sort(convexHull, new PointComp(centerOfHull));
    // or use a heap. still O(nlogn)
    return convexHull;
}

private class PointComp implements Comparator<Point> {

    private Point center;

    public PointComp(Point center) {
        this.center = center;
    }

    @Override
    public int compare(Point o1, Point o2) {
        double angle1 = Math.atan2(o1.y - center.y, o1.x - center.x);
        double angle2 = Math.atan2(o2.y - center.y, o2.x - center.x);
        if (angle1 < angle2)
            return 1;
        else if (angle2 > angle1)
            return -1;
        return 0;
    }
} 
```

我试着在视觉上看到这些点，它们似乎是正确的，但是我不知道如何建立点的顺序来绘制凸包多边形？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:13:14.147

如果你强行找出哪些点是船体的一部分，你还不如继续做丑陋的事情来找到点的顺序。

1.  从最左上角的点开始。
2.  计算从该点到所有其他点的角度。
3.  选取角度最接近 0 度的点。这是围绕船体顺时针方向的下一个点。
4.  冲洗，起泡，重复。

当你绕过船体时，你必须调整目标角度，但这很有效（这是你在纸上做的一种方式。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:18:35.613

在凸包内选择一个点 O 和另一个点 A。对于凸包中的每个 B，计算角度 AÔB 并使用这些角度对点进行排序（如果 AÔB < AÔB' 那么我们认为 B < B'）。

# wpf - 我们可以在 WPF 应用程序中创建电子邮件收件箱吗

> ID：10513921
> 
> 赞同：0
> 
> 时间：2012-05-09T10:04:35.580
> 
> 标签：wpf

在我的 WPF 项目中，我有一个邮箱选项。用户只能从他的 EmailID 发送电子邮件。现在我想在我的应用程序中实现电子邮件收件箱，用户可以在其中看到他的电子邮件帐户（雅虎、Gmail ..等）的电子邮件。这行得通吗..请帮助我。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:08:22.473

它可以，您需要探索可用于从 Yahoo 和 Gmail 调用用户邮件的 API。在这种情况下，有时 api 不会公开，您需要使用 http post 方法、http web 请求，然后获取结果并显示用户电子邮件。

我建议搜索是否有一些 api 可用于从用户收件箱中检索邮件

# ruby - ~/.rvm/bin/rvm 与 ~/.rvm/scripts/rvm

> ID：10513925
> 
> 赞同：1
> 
> 时间：2012-05-09T10:04:56.383
> 
> 标签：ruby, rvm

我是 ruby​​ 新手，只是想知道***~/.rvm/bin/rvm***和***~/.rvm/scripts/rvm之间有什么区别***

按照此处所述安装 ruby​​ 时：[https](https://rvm.io/rvm/install/) ://rvm.io/rvm/install/我注意到以下行已添加到我的 .bashrc 文件中

```
PATH=$PATH:$HOME/.rvm/bin # 将 RVM 添加到 PATH 以进行脚本编写

```

但是当我尝试安装一些 gem 时，它们会被安装，但是当调用它们时，它会要求我再次安装 gem。

我发现[https://rvm.io/rvm/basics/](https://rvm.io/rvm/basics/)上的文档指示将以下行添加到 .bashrc 文件中：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # 这会将 RVM 加载到 shell 会话中。

```

添加后，一切正常。

那么这两个令人困惑的 rvm 脚本有什么区别呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:17:24.827

`bin/rvm` - this is just a wrapper to source `scripts/rvm` and run `rvm $@`

to see how to use RVM watch this: [http://screencasts.org/episodes/how-to-use-rvm](http://screencasts.org/episodes/how-to-use-rvm)

# mysql - 仅使用 LIKE 运算符检索标头代码

> ID：10513926
> 
> 赞同：0
> 
> 时间：2012-05-09T10:04:58.457
> 
> 标签：mysql, coldfusion, sql-like

我有一个简单的问题。我有一个头部代码和相关子代码的列表：

*   `100.001` *（头部代码）*
*   `100.001.001-100.001.010` *（子代码）*
*   `990.001` *（头部代码）*
*   `990.001.001-120.001.010` *（子代码）*

头代码都列出来了，在它们下面是它们的子代码。我只想列出头部代码。我尝试了很多变化，但没有一个奏效。

我也想从 to 获取代码`760.001`，`790.001`我很容易做到这一点：

```
WHERE ACCOUNT_CODE >= '760'
AND   ACCOUNT_CODE <= '790' 
```

然后我想只得到头部代码：

```
WHERE ACCOUNT_CODE LIKE '7%0.00%` 
```

但它仍然列出了从`760.001.001`到的所有代码`790.001.010`。如何正确过滤它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:08:28.207

您想使用`_`通配符仅匹配一个字符，而不是`%`匹配任意数量字符的通配符 - 例如：

```
ACCOUNT_CODE LIKE '7_0.00_' 
```

# arrays - MIPS help (convert from c++) - 初始化一个整数数组并计算最大值

> ID：10513928
> 
> 赞同：-2
> 
> 时间：2012-05-09T10:05:12.780
> 
> 标签：arrays, assembly, mips

我需要帮助将此 C++ 代码转换为 MIPS 汇编语言。

```
int arr[10];
int min = 10000;
int max = -10000;
for (int i=0; i<10; i++)
    cin >> arr[i];

for (int i=0; i<10; i++) {
    if (arr[i] < min)
        min = arr[i];
    if (arr[i] > max)
        max = arr[i];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T23:23:35.770

这些是用于处理器 32 的程序，它计算整数数组中的最大值和最小值，用户插入它的大小和元素

```
[#------Data segment-------
.data
arr1: .word 0       #array "A"
str: .byte 0x0A 0x0 # to make new line
hello: .asciiz " \t\t\t \t \t ---welcome---\n \t\t\t\t\t Name: Ahmed Kattash \t\t\t\t\t Number=0014 \n\t\t\t\t\t class 14\n this a program an array and a number from the user and we have three choice:\n 1-return a max element in the array\n 2-return  a min element in the array\n 3- show an error message if we entered a number unlike 1 or 2 \n"
str1: .asciiz " put the size of the array  : "
str2: .asciiz " insert elements of array : \n"
str3: .asciiz "Select achoice \n  press 1 to get max of array \n press 2 to get min of array "
str4: .asciiz " The max element of an array Max =   "
str5: .asciiz "The min element of an array Min =   "
str6: .asciiz "Your choice is worong please  try again \n  "
str7: .asciiz "\t\t\t\t thanks for using our program\n\n\n"
#--------- Text Segment ----------
.text
.globl start

start:
li $v0, 4 # print Hello  note
la $a0, hello
syscall

li $v0, 4 # tell the user to enter the size of array
la $a0, str1
syscall

li $v0, 5 # getting the size of the array
syscall

move $s3, $v0 #put in $s3 size of array "A"
move $t0, $v0 #put into $t0 size of array A
move $t1, $v0 #put into $t1 size of array A
li $v0, 4 #tell the user to enter the array
la $a0,str2
syscall

la $t3, arr1 #put address of array "A" in $t3

level1:
beq $zero, $t0, out # $t0 contain size of array
li $v0, 5 #read int
syscall

sw $v0, 0($t3) #store int in the memory
addi $t3, $t3, 4 #moving to the next location in the array
addi $t0, $t0,-1 # for the loop
j level1

out:

lw $t3, arr1 #load first word (4 bytes) from array A
la $s0, arr1 #put in $s0 addrress of array A
move $s1,$t3 #put the first number of array in $s1 "max"
move $s2,$t3 #put the first number of array in $s2 "min"

level2:

beq $t1,$zero, out2 # $t1 contains size of enterd array A
slt $t0, $s1, $t3 # if the number in $s1 "max value" less than number in $t3"number in A" put into $t0 "1"
beq $t0 ,$zero, more
move $s1, $t3 # move the number in $t3 in "max"
j here

more:
slt $t0, $t3, $s2 # if the number in $t3 "number in A" less than "Min" put into $t0 "1"
beq $t0 ,$zero, here
move $s2,$t3# move the number in $t3 in "max"
j here

here:
addi $s0, $s0, 4
lw $t3, 0($s0) # take word from "A"
addi $t1, $t1 ,-1
j level2

out2:
li $v0, 4 #print string
la $a0, str3
syscall

li $s6,1 #put in $s6 the value '1'
li $s7,2 #put in $s7 the value '2'
li $v0,5 # getting the size of the array
syscall

beq $s6,$v0,max # if a choice that user select is 1 go to label max
beq $s7,$v0,min # if a choice that user select is 2 go to label min
li $v0, 4 #print string
la $a0, str6
syscall
j out2

max:
li $v0, 4 #print string
la $a0, str4
syscall
li $v0, 1 #print a max value
move $a0, $s1
syscall
j exit

min:
li $v0, 4 #print string
la $a0, str5
syscall
li $v0, 1 #print a min value
move $a0, $s2
syscall
j exit

exit:
li $v0, 4 # to make new line
la $a0, str
syscall
li $v0, 4 #print string
la $a0, str7
syscall
li $v0, 10
syscall # end of program

] 
```

# c# - 从 POST 发回请求

> ID：10513931
> 
> 赞同：3
> 
> 时间：2012-05-09T10:05:34.690
> 
> 标签：c#, asp.net-mvc-3

我正在尝试在我的应用程序中实施支付提供商 (AdYen)。付款完成后，AdYen 将通过 HTTP POST 请求向我在后台提供的 URL 发送通知。例如：

[http://myhost.com/Payment/FinishPayment/](http://myhost.com/Payment/FinishPayment/)

FinishPayment 是支付控制器中的一个 Action 方法。调用确实以该方法结束，但 AdYen 给了我以下错误：

> 所需的字符串“[accepted]”不在所有结果中

不知何故，我必须在“notificationResponse”中返回字符串“[accepted]”。但是怎么做？

我看到了一个 PHP 示例，它是这样的：

```
function FinishPayment( ) // function is called by AdYen
{
    // Do stuff...

    return array("notificationResponse" => "[accepted]");
} 
```

任何人都知道如何在 C#.NET MVC3 中发回响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:15:18.120

这已经相当老了，但正如我目前正在使用的那样，也许它可以在未来帮助任何人

选择 HTTP POST 而不是 SOAP 将导致 Adyen 为每个通知创建一个 POST，因此在 MVC 3（或 4，或简单的 ASP .Net）中，您可以创建一个通用处理程序来处理这些请求，然后只创建一个`context.Response.Write("[accepted]");`. 至少在测试环境中，他们似乎接受了这些响应。

顺便说一句，它们不会将数据的任何签名作为 POST 参数发送，但如果您配置用户和密码，它们将通过 Authorization Header 使用基本的 Http 身份验证进行身份验证，以验证服务器中的请求。

# java - 在 Java 中读取和执行简单的预定义编程语言

> ID：10513935
> 
> 赞同：0
> 
> 时间：2012-05-09T10:05:47.540
> 
> 标签：java

我们必须读取并执行一个用编造的编程语言编写的外部文件。以下是该语言的示例：

```
[while
   [x-is-larger-than 300]
   [seq
      [command1]
      [command2]
   ]
] 
```

我们正在考虑为每个命令或条件使用不同的类。

我们的问题是：我们如何按顺序读取和执行这些命令？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:08:07.703

我强烈建议你

1.  为发明的语言写一个语法
2.  使用解析器生成器为语言生成解析器

进而

1.  使用解析器解析给定的程序。
2.  通过直接遍历 AST 来执行程序，
    或者，
    将 AST 编译为易于逐语句解释的顺序程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:18:45.363

将所有命令放在堆栈/列表中

所以你会有：

```
6: ]
5: ]
4: [command2]
3: [command1]
2: [seq
1: [x-is-larger-than 300]
0: [while 
```

因此，如果您阅读“While” .... 保存它的堆栈位置并运行它...

1.  0 -> 开始时
2.  1 -> x 大于 300 ？
3.  2 -> if 2\. sequence start else clear stack
4.  3 -> 运行命令直到 ] 到达
5.  4 -> 从保存的堆栈位置 (0) 开始 -> 从 1 开始。

这就是我会做的。将命令转换为代码（解析）将是你的！;)

# jquery - jquery :- 获取 div 元素 html

> ID：10513940
> 
> 赞同：1
> 
> 时间：2012-05-09T10:06:13.597
> 
> 标签：jquery

```
 <div id="id1" class="desc">Hello World 1</div>
    <div id="id2" class="desc">Hello World 2</div>
    <div>test</div> 
```

在 document.ready 中，

```
$(function(){   
   var $dvObj = $('div.desc');   
   alert($dvObj[0]); 
   alert($dvObj[0].text());  //Nothing comes up
   alert($dvObj[0].html());  //Nothing comes up
}); 
```

我无法获取 div html。请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:08:04.727

当您使用方括号访问 jQuery 对象的元素时，您会得到实际的 DOM 元素，而不是 jQuery 对象。DOM 节点没有`text`or`html`方法。

您可以使用该[`eq`](http://api.jquery.com/eq/)方法获取包含指定索引处元素的 jQuery 对象：

```
$(function(){ 
    var $dvObj = $('div.desc');
    alert($dvObj.eq(0)); 
    alert($dvObj.eq(0).text());
    alert($dvObj.eq(0).html());
}); 
```

# jmeter - JMeter Correlator + Interleave Controller 在采样器错误时重置？

> ID：10513941
> 
> 赞同：0
> 
> 时间：2012-05-09T10:06:16.670
> 
> 标签：jmeter

我有一个具有以下结构的测试部件：

```
Test Part
-Correlator
--Debug Sampler
--Interleave Controller
---Page 1
---Page 2
----Response Assertion
---Page 3 (etc)
--Regular Expression Extractor
--Post Debug Sampler 
```

当一切正常时，这工作正常，但我一直在添加断言以检查我收到的响应是否正确。线程组设置为在采样器失败时启动下一个循环。当第 2 页下的 Response Assertion 失败时，下一个循环开始，但是当它到达 Interleave Controller 时，它直接跳转到第 3 页，这导致了问题。

有没有办法在采样器故障时重置交错控制器状态？

谢谢

威利斯特曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:51:16.747

这是预期的行为；交错控制器被设计成这样工作。从任何断言中得到什么结果都无关紧要，它仍然会移动到列表中的下一个采样器以进行下一个循环。像这样：

Loop1 将执行Page 1
Loop2 将执行 Page 2
Loop3 将执行 Page 3 Loop4 将
执行 Page 1
Loop5 将执行 Page 2
Loop6 将执行 Page 3
Loop7 将执行 Page 1
...等等。

没有直接的方法——据我所知——重置交错控制器的位置。相反，JMeter 中有大量的逻辑控制器（If、While、For Each 等）以及计数器甚至 beanshell 逻辑，因此大多数事情都是可能的。

# sharepoint - SharePoint 移动客户端开发选项

> ID：10513944
> 
> 赞同：1
> 
> 时间：2012-05-09T10:06:20.163
> 
> 标签：sharepoint

我已阅读了大量[文档](http://msdn.microsoft.com/en-us/library/hh313619.aspx) [和](http://msdn.microsoft.com/en-us/library/ee537247.aspx)一些[博客](http://msdn.microsoft.com/en-us/library/ee705814.aspx)[，](http://praveenbattula.blogspot.co.uk/2010/02/sharepoint-2010-complete-details-about.html)并希望了解我对 SharePoint 移动客户端开发选项的理解，而无需在 SharePoint 服务器本身上进行开发。

共享点 2010

1.  **服务器对象模型**：不适用，因为代码必须在 SharePoint 服务器上运行。
2.  **客户端对象模型 (JavaScript)**：不适用，因为不允许跨站点脚本。
3.  **客户端对象模型（托管 .Net 代码）**：可能，但需要额外的 .Net 服务器才能与 SharePoint 服务器通信。然后，这个新服务器可以为移动客户端提供 JSON。
4.  **RESTful**：功能有限，但与托管客户端对象模型不同，不需要额外的服务器。

共享点 2007

1.  **服务器对象模型**：不适用，因为代码必须在 SharePoint 服务器上运行。
2.  **不推荐使用的 SOAP Web 服务**：可能。

问题：这个列表是否详尽？我的总结准确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:15:15.950

我相信对于 SharePoint 2007，也可以通过 FrontPage RPC 调用完成一定数量的工作。Web 服务接口有一点小错误，而且经常不完整，我不确定它是否被广泛使用，而且它似乎也没有得到很好的支持。

当我在一家广泛使用 SharePoint 的公司工作时，我们拥有自己的 Web 服务，该服务与服务器对象模型一起使用。即使这样也遇到了问题，因为对象模型的一部分并没有很好地暴露出来，而且即使在 Microsoft 内部也似乎并不总是很好理解，但这是获得与 Sharepoint 远程集成的充分程度的唯一方法。

# c# - 为类或接口声明 IDisposable？

> ID：10513948
> 
> 赞同：59
> 
> 时间：2012-05-09T10:06:36.587
> 
> 标签：c#, .net, dispose, idisposable

从以下情况开始：

```
public interface ISample
{
}

public class SampleA : ISample
{
   // has some (unmanaged) resources that needs to be disposed
}

public class SampleB : ISample
{
   // has no resources that needs to be disposed
} 
```

SampleA 类应该实现接口 IDisposable 来释放资源。您可以通过两种方式解决此问题：

**1.在类SampleA中添加需要的接口：**

```
public class SampleA : ISample, IDisposable
{
   // has some (unmanaged) resources that needs to be disposed
} 
```

**2.将其添加到接口ISample并强制派生类实现它：**

```
public interface ISample : IDisposable
{
} 
```

如果将其放入接口中，则强制任何实现都实现 IDisposable，即使它们没有可处置的东西。另一方面，很清楚地看到接口的具体实现需要一个 dispose/using 块，并且您不需要强制转换为 IDisposable 进行清理。两种方式都可能有更多的优点/缺点......你为什么建议使用一种优于另一种的方式？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-10-17T09:31:56.833

遵循[SOLID的接口](http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))[隔离原则](http://en.wikipedia.org/wiki/Interface_segregation_principle)，如果您将 IDisposable 添加到接口，您将向不感兴趣的客户端提供方法，因此您应该将其添加到 A。

除此之外，接口永远不是一次性的，因为一次性与接口的具体实现有关，与接口本身无关。

任何接口都可能在有或没有需要处理的元素的情况下实现。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-09T10:58:29.353

如果您将`using(){}`模式应用到所有界面，最好`ISample`从中派生，`IDisposable`因为设计界面时的经验法则是支持*“易于使用”*而不是*“易于实现”*。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-09T10:10:28.103

就个人而言，如果 all`ISample`应该是一次性的，我会把它放在界面上，如果只有一些，我只会把它放在应该放在的类上。

听起来你有后一种情况。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-09T15:17:02.100

如果至少有一些实现可能会实现一个接口，那么接口`IFoo`可能应该实现，并且至少在某些情况下，对实例的最后一个幸存引用将存储在类型的变量或字段中。如果任何实现可以实现并且实例将通过工厂接口创建（就像 的实例一样，在许多情况下是通过工厂接口创建的），它几乎肯定应该实现。`IDisposable``IDisposable``IFoo``IDisposable``IDisposable``IEnumerator<T>``IEnumerable<T>`

比较`IEnumerable<T>`有`IEnumerator<T>`指导意义。一些实现了的类型`IEnumerable<T>`也实现`IDisposable`了，但是创建这种类型实例的代码会知道它们是什么，知道它们需要处理，并将它们用作它们的特定类型。这样的实例可以作为 type 传递给其他例程`IEnumerable<T>`，而那些其他例程将不知道对象最终需要处理，但*在大多数情况下，那些其他例程不会是最后一个保存对对象的引用的例程*。相比之下， 的实例`IEnumerator<T>`通常是由代码创建、使用并最终放弃的，这些代码对这些实例的底层类型一无所知，除了它们是由`IEnumerable<T>`. 的一些实现`IEnumerable<T>.GetEnumerator()`如果在放弃之前没有调用它们的方法，则return 的实现`IEnumerator<T>`将泄漏资源，并且大多数接受类型参数的代码将无法知道是否可以将此类类型传递给它。尽管可以包含一个属性来指示是否必须释放返回的对象，或者只是要求调用的例程检查返回对象的类型以查看它是否实现，但无条件调用方法会更快更容易这可能不会做任何事情，而不是确定是否有必要并仅在必要时调用它。`IDisposable.Dispose``IEnumerable<T>``IEnumerable<T>``EnumeratorTypeNeedsDisposal``IEnumerator<T>``GetEnumerator()``IDisposable``Dispose``Dispose`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-09T10:53:13.177

IDispoable 是一个非常常见的接口，让你的接口继承它并没有什么坏处。您将因此避免在代码中进行类型检查，唯一的代价是在您的某些 ISample 实现中实现无操作实现。因此，从这个角度来看，您的第二个选择可能会更好。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-10-13T15:21:38.883

我开始认为放置`IDisposable`接口会导致一些问题。这意味着实现该接口的所有对象的生命周期都可以安全地同步结束。即，它允许任何人编写这样的代码，并且需要*所有*实现来支持`IDisposable`：

```
using (ISample myInstance = GetISampleInstance())
{
    myInstance.DoSomething();
} 
```

只有访问具体类型的代码才能知道控制对象生命周期的正确方法。例如，一个类型可能一开始就不需要处理，它可能支持`IDisposable`，或者在您使用完它之后可能需要`awaiting`一些异步清理过程（例如，[此处的选项 2 之类的东西](https://blog.stephencleary.com/2013/03/async-oop-6-disposal.html)）。

接口作者无法预测实现类的所有可能的未来生命周期/范围管理需求。接口的目的是允许对象公开一些 API，以便它可以对某些消费者有用。一些接口*可能*与生命周期管理相关（例如其`IDisposable`自身），但是将它们与与生命周期管理无关的接口混合可能会使编写接口的实现变得困难或不可能。如果您的接口实现很少，并且您的代码结构使得接口的使用者和生命周期/范围管理器在同一个方法中，那么这种区别一开始并不明确。但是如果你开始传递你的对象，这会更清楚。

```
void ConsumeSample(ISample sample)
{
    // INCORRECT CODE!
    // It is a developer mistake to write “using” in consumer code.
    // “using” should only be used by the code that is managing the lifetime.
    using (sample)
    {
        sample.DoSomething();
    }

    // CORRECT CODE
    sample.DoSomething();
}

async Task ManageObjectLifetimesAsync()
{
    SampleB sampleB = new SampleB();
    using (SampleA sampleA = new SampleA())
    {
        DoSomething(sampleA);
        DoSomething(sampleB);
        DoSomething(sampleA);
    }

    DoSomething(sampleB);

    // In the future you may have an implementation of ISample
    // which requires a completely different type of lifetime
    // management than IDisposable:
    SampleC = new SampleC();
    try
    {
        DoSomething(sampleC);
    }
    finally
    {
        sampleC.Complete();
        await sampleC.Completion;
    }
}

class SampleC : ISample
{
    public void Complete();
    public Task Completion { get; }
} 
```

在上面的代码示例中，我演示了三种类型的生命周期管理场景，添加到您提供的两种。

1.  `SampleA`具有`IDisposable`同步`using () {}`支持。
2.  `SampleB`使用纯垃圾收集（它不消耗任何资源）。
3.  `SampleC`使用阻止它被同步处理的资源，并`await`在其生命周期结束时需要一个（以便它可以通知生命周期管理代码它已完成消耗资源并冒泡任何异步遇到的异常）。

通过将生命周期管理与您的其他接口分开，您可以防止开发人员错误（例如，意外调用`Dispose()`）并更清晰地支持未来未预料到的生命周期/范围管理模式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-09T10:10:55.787

就我个人而言，我会选择 1，除非你为两个做一个具体的例子。两个的一个很好的例子是`IList`.

`IList`意味着您需要为您的集合实现一个索引器。但是，an`IList`实际上也意味着您是`IEnumerable`，并且您的班级应该有 a `GetEnumerator()`。

在您的情况下，您对实现的类`ISample`是否需要实现犹豫不决`IDisposable`，如果不是每个实现您的接口的类都必须实现，`IDisposable`那么不要强迫它们。

特别关注`IDispoable`，`IDispoable`特别是迫使程序员使用你的类来编写一些相当丑陋的代码。例如，

```
foreach(item in IEnumerable<ISample> items)
{
    try
    {
        // Do stuff with item
    }
    finally
    {
        IDisposable amIDisposable = item as IDisposable;
        if(amIDisposable != null)
            amIDisposable.Dispose();  
    }
} 
```

不仅代码很糟糕，而且在确保有一个 finally 块来处理该列表的每次迭代的项目时，即使`Dispose()`只是在实现中返回，也会有显着的性能损失。

粘贴代码以回答此处的评论之一，更易于阅读。

# c++ - 这些行号在此错误中意味着什么？

> ID：10513950
> 
> 赞同：0
> 
> 时间：2012-05-09T10:06:41.593
> 
> 标签：c++, build, g++, clang++

编译一些代码时，我收到如下错误：

> `endpointer.h:88:24: error: expected ‘)’ before ‘*’ token`

是什么`:88:24`意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T10:08:16.513

第一位是行，另一位是列。你应该这样读：

在文件 endpointer.h 的第 88 行和第 24 列

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T10:08:08.040

这是代码中发生错误的行号和列号。这意味着你忘记了一个角色。

# css - IE7 标头问题

> ID：10513952
> 
> 赞同：1
> 
> 时间：2012-05-09T10:06:45.900
> 
> 标签：css, html

**我正在使用.. IE-tester 和 adobe browser lab 来检查 IE Comparability.. 但一位朋友告诉我使用 IE Developer Toolbar 及其功能.. IE Browser Mode to IE7 .. 整个网站看起来与 IE tester 和adobe浏览器实验室..有人可以告诉我..哪个是值得信赖的..**

[我在http://www.mulberrydesignerkitchens.com/](http://www.mulberrydesignerkitchens.com/)上工作，但在 IE7 中，它的标题完全崩溃了.. 请有人帮我解决这个问题.. 我已经尝试了所有已知的方法，但输出效果不佳。

这是我在 IE7 中面临的错误：（*来自@matmuchrapna 的图片*）

![在此处输入图像描述](../Images/53d18d59d195e1daa10d6ae1c50236d7.png)

任何人都可以帮我解决问题。

我使用 html5

```
<header>
    <a href="/">
        <img id="logo" src="images/logo.png" height="75" width="287" title="HomePage" alt="Mulberry Kitchen Studios" /></a>
    <div id="telephone">
        <p>Showrooms: Norwich </p><img src="images/tel-norwich.gif" alt="" /><p> Beccles </p><img src="images/tel-beccles.gif" alt="" />
    </div>
    <nav id="primary-menu">
        <div class="menu-mainnav-container">
            <ul id="menu-mainnav" class="menu superfish sf-js-enabled">
                <li id="menu-item-13" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13"><a title="Contemporary Kitchens" href="http://www.mulberrydesignerkitchens.com/contemporary-kitchens/">Contemporary Kitchens</a></li>
                <li id="menu-item-75" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-75"><a title="Traditional Kitchens" href="http://www.mulberrydesignerkitchens.com/traditional-kitchens/">Traditional Kitchens</a>
                    <ul class="sub-menu">
                        <li id="menu-item-81" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-81"><a title="Traditional Oak Kitchens" href="http://www.mulberrydesignerkitchens.com/traditional-kitchens/traditional-oak-kitchens/">Traditional Oak Kitchens</a></li>
                        <li id="menu-item-395" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-395"><a title="Unique Traditional Kitchens" href="http://www.mulberrydesignerkitchens.com/norwich-kitchens/unique-traditional-kitchens/">Unique Traditional Kitchens</a></li>
                        <li id="menu-item-73" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-73"><a title="Quality Kitchens" href="http://www.mulberrydesignerkitchens.com/classic-kitchens/">Classic Kitchens</a></li>
                    </ul>
                </li>
                <li id="menu-item-74" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-74"><a title="Bespoke Kitchens" href="http://www.mulberrydesignerkitchens.com/bespoke-kitchens/">Bespoke Kitchens</a></li>
                <li id="menu-item-72" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-72"><a title="Accessories &amp; Appliances" href="http://www.mulberrydesignerkitchens.com/kitchen-accessories-appliances/">Accessories &#038; Appliances</a></li>
                <li id="menu-item-71" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-71"><a title="All inclusive service" href="http://www.mulberrydesignerkitchens.com/all-inclusive-service/">All inclusive service</a></li>
                <li id="menu-item-736" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-736"><a href="http://www.mulberrydesignerkitchens.com/norwich-kitchens/recent-projects/">Recent Projects</a></li>
                <li id="menu-item-70" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-70"><a title="Information &amp; Articles" href="http://www.mulberrydesignerkitchens.com/kitchen-information/">Information &#038; Articles</a></li>
                <li id="menu-item-69" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-69"><a title="Contact Us &amp; Maps" href="http://www.mulberrydesignerkitchens.com/contact-us-maps/">Contact Us &#038; Maps</a></li>
            </ul>
        </div>
    </nav>
</header> 
```

**CSS**

```
header{
    position: relative;
    background:#7a2652;
    height: 75px;
    display: block;
}
header #telephone {
    color: #FFFFFF;
    float: right;
    margin-top: 10px;
    padding-right: 10px;
    width: 370px;
    position: relative;
    top: 0px;
}
header #telephone p {
    padding: 0;
    margin: 0;
    font-size: 10px;
    float: left;
    margin-top: 2px;
    color: #fff;
}
header #telephone img {
    float: left;
    margin-left: 5px;
    margin-right: 5px;
}
nav#primary-menu {
    height: 37px;
    position: absolute;
    right: 2px;
    top: 38px;
    width: 685px;
    list-style: none outside none;
}

nav#primary-menu div {
    background: none repeat scroll 0 0 #833B5D;
    float: right;
    height: 37px;
    margin-left: 32px;
    width: 645px;
}

nav#primary-menu ul#menu-mainnav {
    list-style: none outside none;
}

nav#primary-menu ul#menu-mainnav li {
    height: 37px;
    margin: 0 -10px 0 -37px;
    overflow: visible;
    padding-left: 37px;
    padding-right: 10px;
    position: relative;
    width: 80px;
    z-index: 1;
    float:left;
    display: inline-block;
    list-style: none outside none;
}

nav#primary-menu ul#menu-mainnav li:hover:last-child {
    background: url("images/nav-last-bg.png") no-repeat transparent;
}

nav#primary-menu ul#menu-mainnav li:first-child {
    background: url("images/nav-first-bg.png") no-repeat scroll left center transparent;
}       

nav#primary-menu ul#menu-mainnav li:hover {
    background: url("images/nav-current-bg.png") no-repeat scroll left center transparent;
}

nav#primary-menu ul#menu-mainnav li.current-menu-item {
    background: url("images/nav-current-bg.png") no-repeat scroll 0 0 transparent;
}

nav#primary-menu a {
    color: #FFFFFF;
    float: left;
    font-size: 9px;
    line-height: 120%;
    padding-bottom: 8px;
    padding-top: 7px;
    text-align: left;
    text-decoration: none;
    width: 60px;
}

nav#primary-menu a:hover {
    color: #FFFFFF;
}

nav#primary-menu a:visited {
    color: #FFFFFF;
}

nav#primary-menu ul#menu-mainnav li ul.sub-menu {
    list-style: none outside none;
}

/*
nav#primary-menu ul#menu-mainnav li ul.sub-menu li {
    background-color: #833B5D;
    height: auto;
} 
*/

nav#primary-menu ul#menu-mainnav li ul.sub-menu li {
    background-color: #833B5D;
    height: auto;
    margin: 0;
    padding: 6px 12px;
    width: 120px;
}
nav#primary-menu ul#menu-mainnav li ul.sub-menu li a {
    margin: 0;
    padding: 5px;
    width: 120px;
}

nav#primary-menu ul#menu-mainnav li ul.sub-menu li:hover {
    background-color: #8e4d69;
}

nav#primary-menu ul#menu-mainnav li ul.sub-menu li.current-menu-item {
    background: none repeat scroll 0 0 #8E4D69;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:43:05.593

尝试添加这个

```
#telephone {
    position: absolute;
    right: 0;
} 
```

在我的即：

![在此处输入图像描述](../Images/196551ef6c5d4e1bc8d0c7050c2554c5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:48:57.417

只需使用`position: absolute;`标签：

```
div#telephone {
    position: absolute;
    top: 10px;
    right: 0px;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T10:15:02.620

设置要显示的标题：block; 并下载并使用 HTML5 shiv：

[http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

希望有帮助:)

# android - 本地化应用程序在 Android 4.0 上崩溃

> ID：10513954
> 
> 赞同：0
> 
> 时间：2012-05-09T10:06:46.507
> 
> 标签：android, localization

我在 Android 目标版本 2.2 上开发了一个应用程序。

我在其中实现了三种语言的本地化，它在 2.2 到 2.3.x 版本的设备上运行良好，`ldpi`但在 Android 4.x 设备上崩溃。`mdpi``hdpi`

对于荷兰语，我使用了以下文件夹，对于其他语言也类似：

> 可绘制的-de-rDE
> 
> 可绘制的-de-rDE-hdpi
> 
> 可绘制的-de-rDE-mdpi
> 
> 可绘制的-de-rDE-xhdpi

**错误：**

```
Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f02002a a=-1 r=0x7f02002a} 
```

**注意：** 当我将图像放入其中时，`drawable-xhdpi`它可以正常工作。

有人可以指导我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:21:52.827

我认为您混合了布局限定符和值限定符。

语言文件应该在默认语言的 values/strings.xml 中，对于德语的 values-de/strings.xml 等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:06:38.960

经过大量搜索后，我终于找到了我的问题的解决方案。

我创建了一个**res/drawable-de/**文件夹，其中包含一个图标，当语言设置为**German 但位置不是 Germany**时，应用程序将使用该图标。

创建drawable-de和drawable-de-rDE的区别如下：

```
 drawable-de - Defualt German language folder

     drawable-de-rDE - German Language images folder with **rDE** specifying region. 

     rCH - German language in China
     drawable-fr-rCA - French language in Canada. 
```

这就是它解决我的问题的方式。

谢谢大家帮我解决这个问题。

# javascript - Element.hover 不适用于 Raphael Javascript 库

> ID：10513956
> 
> 赞同：2
> 
> 时间：2012-05-09T10:07:02.050
> 
> 标签：javascript, raphael

我有一个使用 raphael javascript 库的功能齐全的“剪贴簿”类型的东西。因为转换后的图像重叠，所以我进行了悬停效果，将图像带到前面并添加了光晕，然后在离开时移除了光晕。然后单击事件将图像显示在颜色框中。除了在 IE 7 和 8 中，所有这些都工作得非常好——悬停工作并将图像向前推进，但辉光没有被移除，因此以下点击事件根本不起作用。删除条目悬停事件部分已修复单击事件，但我真的很想实现这种悬停效果。

这是脚本块：

```
paper.forEach(function (el) {
    el.hover(
        function() {
            el.toFront();
            el.g = this.glow();
        },
        function() {
            el.g.remove();
        }
    );

    // el.click block goes here and breaks if the el.hover block above is uncommented in IE 7 and 8
}); 
```

其余代码都是从数据库动态生成的，很难进入这里并对每个人都有意义。只是想知道上面有什么问题吗？我已经让其他一切工作正常，但这是我第一次和拉斐尔一起外出，所以我不是很自信！

谢谢。

# forms - 通过类引导字段数据并显示 W3C 验证结果

> ID：10513958
> 
> 赞同：0
> 
> 时间：2012-05-09T10:07:12.290
> 
> 标签：forms, class, post, w3c-validation

我正在慢慢处理一个加载类的表单，并且需要通过该类运行表单字段以使用[W3C 的 HTML Validator's API](http://validator.w3.org/docs/api.html)验证代码。表单字段将包含 url。我还没有开始验证输入的数据。我只是想获得相同的页面来返回数据。[在如何在表单操作中执行 PHP 函数的](https://stackoverflow.com/questions/595358/how-can-i-execute-a-php-function-in-a-form-action)帮助下，我获得了 form.php 代码？现在是：

```
<?php
require_once ( 'api_w3cvalidation.class.php' );
$validate = new W3cValidateApi;
if (isset($_POST)) {
  $uri = $_POST['uri']; // this will get you what was in the
                                    // textfield if the form was submitted
                                    $a = $validate->validate($uri);
                                    if($a){
                                        echo 'Verified!';
                                    } else {
                                        echo 'Not verified!<br>';
                                        echo 'Errors found: ' . $validate->ValidErrors;
                                    }
};

?>

<form name="form1" method="post" action="<?php echo($_SERVER['PHP_SELF']) ;?>" >
  <p>Your uri is: <?php echo $uri;?></p>
    <label>
      <input type="text" name="uri" id="textfield">
    </label>
    <label>
      <input type="submit" name="button" id="button" value="Submit">
    </label>
</form> 
```

我正在使用的课程是：

```
<?
/*
   Author:  Jamie Telin (jamie.telin@gmail.com), currently at employed Zebramedia.se

   Scriptname: W3C Validation Api v1.0 (W3C Markup Validation Service)

   Use:     
        //Create new object
            $validate = new W3cValidateApi;

            //Example 1
                $validate->setUri('http://google.com/');    //Set URL to check
                echo $validate->makeValidationCall();       //Will return SOAP 1.2 response

            //Example 2
                $a = $validate->validate('http://google.com/');
                if($a){
                    echo 'Verified!';
                } else {
                    echo 'Not verified!<br>';
                    echo 'Errors found: ' . $validate->ValidErrors;
                }

            //Example 3
                $validate->ui_validate('http://google.com/'); //Visual display

            //Settings
                $validate->Output       //Set the type of output you want, default = soap12 or web
                $validate->Uri          //Set url to be checked
                $validate->setUri($uri) //Set url to be checked and make callUrl, deafault way to set URL
                $validate->SilentUi     //Set to false to prevent echo the vidual display
                $validate->Sleep        //Default sleeptime is 1 sec after API call
*/

class W3cValidateApi{

    var $BaseUrl = 'http://validator.w3.org/check';
    var $Output = 'soap12';
    var $Uri = '';
    var $Feedback;
    var $CallUrl = '';
    var $ValidResult = false;
    var $ValidErrors = 0;
    var $Sleep = 1;
    var $SilentUi = false;
    var $Ui = '';

    function W3cValidateApi(){
        //Nothing...
    }

    function makeCallUrl(){
        $this->CallUrl = $this->BaseUrl . "?output=" . $this->Output . "&uri=" . $this->Uri;
    }

    function setUri($uri){
        $this->Uri = $uri;
        $this->makeCallUrl();
    }

    function makeValidationCall(){
        if($this->CallUrl != '' && $this->Uri != '' && $this->Output != ''){
            $handle = fopen($this->CallUrl, "rb");
            $contents = '';
            while (!feof($handle)) {
                $contents .= fread($handle, 8192);
            }
            fclose($handle);
            $this->Feedback = $contents;
            sleep($this->Sleep);
            return $contents;
        } else {
            return false;
        }
    }

    function validate($uri){
        if($uri != ''){
            $this->setUri($uri);
        } else {
            $this->makeCallUrl();
        }

        $this->makeValidationCall();

        $a = strpos($this->Feedback, '<m:validity>', 0)+12;
        $b = strpos($this->Feedback, '</m:validity>', $a);
        $result = substr($this->Feedback, $a, $b-$a);
        if($result == 'true'){
            $result = true;
        } else {
            $result = false;
        }
        $this->ValidResult = $result;

        if($result){
            return $result;
        } else {
            //<m:errorcount>3</m:errorcount>
            $a = strpos($this->Feedback, '<m:errorcount>', $a)+14;
            $b = strpos($this->Feedback, '</m:errorcount>', $a);
            $errors = substr($this->Feedback, $a, $b-$a);
            $this->ValidErrors = $errors;
        }
    }

    function ui_validate($uri){
        $this->validate($uri);

        if($this->ValidResult){
            $msg1 = 'This document was successfully checked';
            $color1 = '#00CC00';
        } else {
            $msg1 = 'Errors found while checking this document';
            $color1 = '#FF3300';
        }
        $ui = '<div style="background:#FFFFFF; border:1px solid #CCCCCC; padding:2px;">
                    <h1 style="color:#FFFFFF; border-bottom:1px solid #CCCCCC; margin:0; padding:5px; background:'.$color1.'; font-family:Arial, Helvetica, sans-serif; font-size:16px; font-weight:bold;">
                     '.$msg1.'
                    </h1>
                    <div>
                        <strong>Errors:</strong><br>
                        '.$this->ValidErrors.'
                    </div>
                </div>';
        $this->Ui = $ui;
        if($this->SilentUi == false){
            echo $ui;
        }
        return $ui;

    }

}
?> 
```

我需要做什么才能使添加到文本字段的 url 通过类并在提交 url 后显示是否已验证？

**更新**

进行了一些更改，验证似乎有效。只有它仍然显示在实际验证之前未验证的站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:53:04.443

您不小心测试了是否设置了 POST 超全局。

```
<?php
/* ... */
if (isset($_POST)) {
  /* ... */
} 
```

该变量几乎总是被设置。相反，请尝试测试其中是否有任何数据。

```
<?php
if (count($_POST)) {
  /* ... */
} 
```

如果您想真正准确地测试此页面加载是否是 POST 的结果（例如，即使没有发布任何值，您仍然希望以不同的方式处理请求），您可以直接检查请求方法。

```
<?php
if ($_SERVER['REQUEST_METHOD'] === "POST") {
  /* ... */
} 
```

# jquery - JQuery stopPropagation 不能防止事件冒泡

> ID：10513960
> 
> 赞同：1
> 
> 时间：2012-05-09T10:07:22.710
> 
> 标签：jquery, droppable, event-bubbling, stoppropagation

我有一个应用程序，几个列表可以堆叠在一起。列表项可以通过拖放在列表之间交换。当我将列表项放在覆盖另一个列表的列表上时，我希望最上面的列表仅用于处理放置事件。

目前我的问题是所有事件处理程序都会触发，无论我使用`e.stopPropagation`,`e.preventDefault`还是`return false`.

[http://jsfiddle.net/D6fLw/6/](http://jsfiddle.net/D6fLw/6/)

非常感谢任何指导方针

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:55:59.843

看起来有一个关于这件事的错误，参与者提供了一些代码，可以帮助您解决问题。

[jQuery UI 票 #3452](http://bugs.jqueryui.com/ticket/3452)

# php - 在 PHP 中上传 30 多个文件

> ID：10513962
> 
> 赞同：2
> 
> 时间：2012-05-09T10:07:28.597
> 
> 标签：php, file-upload

我是 php 新手，我正在尝试在`file upload`(php) 中上传 30 多个文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:09:46.943

有一个名为 php.ini 的设置[`max_file_uploads`](http://www.php.net/manual/en/ini.core.php#ini.max-file-uploads)。将其更改为 30，您的问题应该得到解决。

话虽如此，您可能还需要更改其他设置：[`upload_max_filesize`](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize)和[`post_max_size`](http://www.php.net/manual/en/ini.core.php#ini.post-max-size). 它们共同控制最大的单个和组合文件大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:10:31.693

你可以`max_file_uploads`在你的 php.ini 文件中设置一个更高的数字。

# matlab - matlab尝试写max函数

> ID：10513964
> 
> 赞同：0
> 
> 时间：2012-05-09T10:07:35.903
> 
> 标签：matlab, max

我正在尝试编写matlab的max函数：

```
B = max(A,B); 
```

这是正确的吗？

```
for i=1:size(A,1)
    for j=1:size(A,2)
       if A(i,j) > B(i,j)
         B(i,j) = A(i,j);
       end
    end
end 
```

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:15:20.927

如果你的意思是`B = max(A,B)`应该输出一个矩阵，每个索引 (i,j) 包含 A(i,j) 或 B(i,j) 中的最大值，那么是的，它是正确的（如果你提供二维矩阵 A 和 B 与`size(A)>=size(B)`)

然而，标准的[max](http://www.mathworks.nl/help/techdoc/ref/max.html)函数并不完全像那样工作。例如，它还可以处理更高维的矩阵输入，您可以指定要沿哪个维度计算最大值，...

# java - Java Swing 控件中不支持 Unicode

> ID：10513967
> 
> 赞同：0
> 
> 时间：2012-05-09T10:07:50.667
> 
> 标签：java, swing, unicode

我想开发一个 JavaSE 应用程序，它需要以我的本地语言（即僧伽罗语和泰米尔语）处理 Unicode 字符。当我插入 Swing 控件时，我尝试了多少，我无法显示 Unicode 字符，但是当我添加 AWT 控件时，它们正确显示了 Unicode。我的问题是我无法使用 AWT 控件实现与 Swing 控件相同的功能。有没有办法克服这个问题？

# c++ - V8 实例化变量的顺序（多线程）

> ID：10513971
> 
> 赞同：0
> 
> 时间：2012-05-09T10:08:06.040
> 
> 标签：c++, v8, cvv8

我是 Google V8 的新手，我不确定如何充分使用它们提供的变量类型。我将首先解释我希望流动的内容：

1.  在主线程中，我想编译 JS 脚本。
2.  在几个线程中，当我使用 instance->SetAccessor(...) 或 prototype->Set(...) （或任何其他选项，如果有的话）“添加”到上下文不同的信息时，我想运行脚本。

我不确定何时需要执行以下操作：

*   何时何地创建`v8::handleScope`？在主线程中创建一个就足够了吗？或者我每个线程都需要一个？
*   何时何地创建`v8::isolate`和`v8::locker`？它应该是每个线程吗？应该在之前还是之后`v8::handleScope`？

任何信息都会有所帮助（：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:46:07.763

如果您想从每个线程并行运行脚本而没有跨线程共享，那么每个线程都需要自己的隔离。您可能需要也可能不需要主线程，或者您可以使用默认隔离。我建议确保在运行任何线程之前已初始化默认隔离，以防万一您的其他线程之一最终初始化它。如果您使用隔离物，您应该没问题，但可以肯定的是它不会造成任何伤害。

如果您需要对象等的跨线程共享，那么您需要对此进行研究，这可能会很困难。甚至不确定 v8 是否真的可以支持它。拥有单独的隔离区并避免共享对象要容易得多。

您应该能够在一个隔离的上下文中编译您的脚本，该隔离旨在用于将在主线程中执行它的线程，然后将脚本和隔离传递给线程，并且在主线程中不再触及任何一个，直到工作线程完成了它。这应该可以工作，但是我没有检查 v8 是否检查了创建隔离的线程 ID 和执行它的线程 ID。值得编写一个小测试应用程序来检查它是否可以工作。

另一种选择是在主线程中检查编译并在工作线程中再次编译并将隔离封装在线程中。这是我过去的做法。它更容易但效率较低。

句柄范围应仅在需要的函数中分配在堆栈上。不要为句柄范围使用全局变量或在堆上分配它。您编译的脚本应该使用持久句柄。进入隔离范围后进入句柄范围。

# java - Java：如何以像素为单位调整缓冲图像的大小？

> ID：10513974
> 
> 赞同：3
> 
> 时间：2012-05-09T10:08:08.707
> 
> 标签：java, resize, pixel, bufferedimage

我需要将原始缓冲图像的大小调整为 100 px 并保留宽度/高度比。下面是正在使用的代码。有人可以帮我吗？提前致谢。

```
int width = 100;
int height = 100;

BufferedImage resizedImage = new BufferedImage(width, height, type);
Graphics2D g = resizedImage.createGraphics();
g.drawImage(originalImage, 0, 0, width, height, null);
g.dispose(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T01:12:45.973

您可能想看看 imgscalr，它是一个简单的单个类，它使用一组简单的静态方法来完成此操作：[http ://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-图书馆/](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/)

示例用法如下所示：

```
BufferedImage img = Scalr.resize(src, 100); 
```

如果您需要它们，还有许多关于质量、速度和简单图像操作的高级功能可供您使用，并且该库已在许多项目和 Web 应用程序的生产中部署。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:27:44.240

```
int imageWidth = originalImage.getWidth();
int imageHeight = originalImage.getHeight();
height = imageHeight * width / imageWidth;
// Integer arithmetic doing lossless division last. 
```

然而，高度现在可能小于或大于 100。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:13:36.927

好吧，你能试试

```
int width = 100;
int height = 100;
height = originalImage.height() / (originalImage.width()/width) 
```

# php - 使用 PHP 网络传输大量小文件的快速方法

> ID：10513975
> 
> 赞同：5
> 
> 时间：2012-05-09T10:08:10.730
> 
> 标签：php

我在同一个 LAN 上有 2 台 Linux 服务器。
使用 PHP 我需要将 100000 个小 (10KB) 文件从服务器 A 复制到服务器 B。

现在我正在使用 ssh2_scp_send 并且它非常慢（20 分钟内有 10K 个文件）。

如何让它更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:39:25.673

通过 SSH 隧道使用 gzipped TAR 非常快。数量级比 pure 快`scp`，尤其是对于许多小文件。这是*linux 命令行*的示例：

> user@local# cd /source/ ; 焦油 czf - * | ssh user@remote "cd /target/ ; tar xzf -"

* * *

*更新：*根据要求，您可以使用纯 PHP 解决方案 - 玩弄这个棘手的部分。

注意：您需要[PHP 的 libssh 扩展](http://php.net/manual/en/book.ssh2.php)才能使其工作。此外，STDIN 似乎仅在使用 SSH 的流包装器时可用。

这几乎没有开销，因为它直接在流上运行，并且您的 CPU 很可能总是比您用于传输的网络链接快。

`-z`要权衡网络与 CPU 速度，您可以从命令行中删除该选项。（较少的 CPU 使用率，但线路上的更多数据）

代码示例：

```
<?php
$local_cmd = "cd /tmp/source && tar -czf - *";
$remote_cmd = "tar -C /tmp/target -xzf -";

$ssh = new SSH_Connection('localhost');
$auth = $ssh->auth_password('gast', 'gast');
$bytes = $ssh->command_pipe($local_cmd, $remote_cmd);
echo "finished: $bytes bytes of data transfered\n";

class SSH_Connection {
    private $link;
    private $auth;

    function __construct ($host, $port=22) {
        $this->link = @ssh2_connect('localhost', 22);
    }  

    function auth_password ($username, $password) {
        if (!is_resource($this->link))
            return false;
        $this->auth = @ssh2_auth_password($this->link, $username, $password); 
        return $this->auth;
    }   

    function command_pipe ($localcmd, $remotecmd) {
        if (!is_resource($this->link) || !$this->auth)
            return false;
        // open remote command stream (STDIN)
        $remote_stream = fopen("ssh2.exec://{$this->link}/$remotecmd", 'rw');
        if (!is_resource($remote_stream))
            return false;
        // open local command stream (STDOUT)
        $local_stream = popen($localcmd, 'r');
        if (!is_resource($local_stream))
            return false;
        // connect both, pipe data from local to remote
        $bytes = 0;
        while (!feof($local_stream)) 
            $bytes += fwrite($remote_stream,fread($local_stream,8192));
        // close streams
        fclose($local_stream);
        fclose($remote_stream);
        return $bytes; 
    }   

    function is_connected () { return is_resource($this->link); }
    function is_authenticated () { return $this->auth; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:32:19.497

另一种选择是 Zip：

```
<?php
$zip = new ZipArchive();

if ($zip->open('TempFileToTransfer.zip', ZIPARCHIVE::CREATE)!==TRUE) {
    exit("cannot open <$filename>\n");
}

$zip->addFile('File 1');
$zip->addFile('File 2');
$zip->addFile('File 3');
$zip->close();
?> 
```

传输该文件并在另一端解压缩，然后在另一端使用 zip_entry_open 和 zip_entry_read。

我还建议一次说 1000 个文件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:25:19.483

您可以通过 PHP 执行外部进程吗？如果可以，rsync 是更快的复制方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:37:03.017

发送大量小文件的开销很可能是这里的减速。

您可以将其存档在本地服务器 shell_exec()

发送到远程服务器，ssh2_scp_send()

然后在另一端展开它。ssh2_exec()

我的感觉是archving/expanding的开销会更少，但我还没有测试过。

# android - 如何在android中将图像转换为字节数组并将字节数组转换为base64字符串？

> ID：10513976
> 
> 赞同：42
> 
> 时间：2012-05-09T10:08:15.900
> 
> 标签：android, image, bytearray

有人可以告诉我将图像转换为字节数组并将字节数组转换为base64字符串的代码。我写下面的代码没有得到正确的结果。

```
 String filepath = "/sdcard/Image/ic_launcher.jpg";
   File imagefile = new File(filepath);
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(imagefile);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        Bitmap bm = BitmapFactory.decodeStream(fis);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();  
        bm.compress(Bitmap.CompressFormat.JPEG, 100 , baos);    
        byte[] b = baos.toByteArray(); 

        String encodedImage = Base64.encodeToString(b, Base64.DEFAULT); 
```

我得到的结果是

```
 [-1, -40, -1, -32, 0, 16, 74, 70, 73, 70, 0, 1, 1, 1, 0, 72, 0, 72, 0, 0, -1, -20, 4, -7, 68, 117, 99, 107, 121, 0, 1, 0, 4, 0, 0, 0, 75, 0, 2, 4, -28, 0, 0, 2, 112, 0, 68, 0, 111, 0, 110, 0, 110, 0, 97, 0, 32, 0, 83, 0, 105, 0, 109, 0, 112, 0, 115, 0, 111, 0, 110, 0, 32, 0, 117, 0, 115, 0, 101, 0, 115, 0, 32, 0, 97, 0, 32, 0, 99, 0, 111, 0, 109, 0, 112, 0, 117, 0, 116, 0, 101, 0, 114, 0, 32, 0, 116, 0, 111, 0, 32, 0, 99, 0, 104, 0, 101, 0, 99, 0, 107, 0, 32, 0, 97, 0, 32, 0, 115, 0, 105, 0, 116, 0, 101, 0, 32, 0, 116, 0, 104, 0, 97, 0, 116, 0, 32, 0, 112, 0, 97, 0, 121, 0, 115, 0, 32, 0, 104, 0, 101, 0, 114, 0, 32, 0, 109, 0, 111, 0, 110, 0, 101, 0, 121, 0, 32, 0, 116, 0, 111, 0, 32, 0, 117, 0, 112, 0, 108, 0, 111, 0, 97, 0, 100, 0, 32, 0, 118, 0, 105, 0, 100, 0, 101, 0, 111, 0, 32, 0, 99, 0, 108, 0, 105, 0, 112, 0, 115, 0, 32, 0, 111, 0, 102, 0, 32, 0, 104, 0, 101, 0, 114, 0, 32, 0, 101, 0, 97, 0, 116, 0, 105, 0, 110, 0, 103, 0, 32, 0, 97, 0, 116, 0, 32, 0, 104, 0, 101, 0, 114, 0, 32, 0, 104, 0, 111, 0, 109, 0, 101, 0, 32, 0, 105, 0, 110, 0, 32, 0, 79, 0, 108, 0, 100, 0, 32, 0, 66, 0, 114, 0, 105, 0, 100, 0, 103, 0, 101, 0, 44, 0, 32, 0, 78, 0, 101, 0, 119, 0, 32, 0, 74, 0, 101, 0, 114, 0, 115, 0, 101, 0, 121, 0, 46, 0, 46, 0, 46, 0, 68, 0, 111, 0, 110, 0, 110, 0, 97, 0, 32, 0, 83, 0, 105, 0, 109, 0, 112, 0, 115, 0, 111, 0, 110, 0, 32, 0, 117, 0, 115, 0, 101, 0, 115, 0, 32, 0, 97, 0, 32, 0, 99, 0, 111, 0, 109, 0, 112, 0, 117, 0, 116, 0, 101, 0, 114, 0, 32, 0, 116, 0, 111, 0, 32, 0, 99, 0, 104, 0, 101, 0, 99, 0, 107, 0, 32, 0, 97, 0, 32, 0, 115, 0, 105, 0, 116, 0, 101, 0, 32, 0, 116, 0, 104, 0, 97, 0, 116, 0, 32, 0, 112, 0, 97, 0, 121, 0, 115, 0, 32, 0, 104, 0, 101, 0, 114, 0, 32, 0, 109, 0, 111, 0, 110, 0, 101, 0, 121, 0, 32, 0, 116, 0, 111, 0, 32, 0, 117, 0, 112, 0, 108, 0, 111, 0, 97, 0, 100, 0, 32, 0, 118, 0, 105, 0, 100, 0, 101, 0, 111, 0, 32, 0, 99, 0, 108, 0, 105, 0, 112, 0, 115, 0, 32, 0, 111, 0, 102, 0, 32, 0, 104, 0, 101, 0, 114, 0, 32, 0, 101, 0, 97, 0, 116, 0, 105, 0, 110, 0, 103, 0, 32, 0, 97, 0, 116, 0, 32, 0, 104, 0, 101, 0, 114, 0, 32, 0, 104, 0, 111, 0, 109, 0, 101, 0, 32, 0, 105, 0, 110, 0, 32, 0, 79, 0, 108, 0, 100, 0, 32, 0, 66, 0, 114, 0, 105, 0, 100, 0, 103, 0, 101, 0, 44, 0, 32, 0, 78, 0, 101, 0, 119, 0, 32, 0, 74, 0, 101, 0, 114, 0, 115, 0, 101, 0, 121, 0, 32, 0, 74, 0, 117, 0, 110, 0, 101, 0, 32, 0, 56, 0, 44, 0, 32, 0, 50, 0, 48, 0, 49, 0, 48, 0, 46, 0, 32, 0, 83, 0, 105, 0, 109, 0, 112, 0, 115, 0, 111, 0, 110, 0, 44, 0, 32, 0, 52, 0, 50, 0, 44, 0, 32, 0, 119, 0, 104, 0, 111, 0, 32, 0, 119, 0, 101, 0, 105, 0, 103, 0, 104, 0, 115, 0, 32, 0, 109, 0, 111, 0, 114, 0, 101, 0, 32, 0, 116, 0, 104, 0, 97, 0, 110, 0, 32, 0, 54, 0, 48, 0, 48, 0, 32, 0, 112, 0, 111, 0, 117, 0, 110, 0, 100, 0, 115, 0, 32, 0, 40, 0, 50, 0, 55, 0, 50, 0, 32, 0, 107, 0, 103, 0, 41, 0, 32, 0, 97, 0, 110, 0, 100, 0, 32, 0, 97, 0, 105, 0, 109, 0, 115, 0, 32, 0, 116, 0, 111, 0, 32, 0, 114, 0, 101, 0, 97, 0, 99, 0, 104, 0, 32, 0, 49, 0, 44, 0, 48, 0, 48, 0, 48, 0, 32, 0, 112, 0, 111, 0, 117, 0, 110, 0, 100, 0, 115, 0, 32, 0, 40, 0, 52, 0, 53, 0, 53, 0, 32, 0, 107, 0, 103, 0, 41, 0, 44, 0, 32, 0, 105, 0, 115, 0, 32, 0, 119, 0, 97, 0, 103, 0, 105, 0, 110, 0, 103, 0, 32, 0, 97, 0, 32, 0, 99, 0, 97, 0, 109, 0, 112, 0, 97, 0, 105, 0, 103, 0, 110, 0, 32, 0, 116, 0, 111, 0, 32, 0, 98, 0, 101, 0, 99, 0, 111, 0, 109, 0, 101, 0, 32, 0, 116, 0, 104, 0, 101, 0, 32, 0, 119, 0, 111, 0, 114, 0, 108, 0, 100, 0, 39, 0, 115, 0, 32, 0, 104, 0, 101, 0, 97, 0, 118, 0, 105, 0, 101, 0, 115, 0, 116, 0, 32, 0, 108, 0, 105, 0, 118, 0, 105, 0, 110, 0, 103, 0, 32, 0, 119, 0, 111, 0, 109, 0, 97, 0, 110, 0, 44, 0, 32, 0, 97, 0, 100, 0, 109, 0, 105, 0, 116, 0, 116, 0, 105, 0, 110, 0, 103, 0, 32, 0, 116, 0, 104, 0, 97, 0, 116, 0, 32, 0, 115, 0, 104, 0, 101, 0, 32, 0, 105, 0, 115, 0, 32, 0, 97, 0, 115, 0, 32, 0, 104, 0, 117, 0, 110, 0, 103, 0, 114, 0, 121, 0, 32, 0, 102, 0, 111, 0, 114, 0, 32, 0, 97, 0, 116, 0, 116, 0, 101, 0, 110, 0, 116, 0, 105, 0, 111, 0, 110, 0, 32, 0, 97, 0, 115, 0, 32, 0, 115, 0, 104, 0, 101, 0, 32, 0, 105, 0, 115, 0, 32, 0, 102, 0, 111, 0, 114, 0, 32, 0, 99, 0, 97, 0, 108, 0, 111, 0, 114, 0, 105, 0, 101, 0, 45, 0, 114, 0, 105, 0, 99, 0, 104, 0, 32, 0, 102, 0, 111, 0, 111, 0, 100, 0, 46, 0, 32, 0, 80, 0, 105, 0, 99, 0, 116, 0, 117, 0, 114, 0, 101, 0, 32, 0, 116, 0, 97, 0, 107, 0, 101, 0, 110, 0, 32, 0, 74, 0, 117, 0, 110, 0, 101, 0, 32, 0, 56, 0, 44, 0, 32, 0, 50, 0, 48, 0, 49, 0, 48, 0, 46, 0, 32, 0, 82, 0, 69, 0, 85, 0, 84, 0, 69, 0, 82, 0, 83, 0, 47, 0, 76, 0, 117, 0, 99, 0, 97, 0, 115, 0, 32, 0, 74, 0, 97, 0, 99, 0, 107, 0, 115, 0, 111, 0, 110, 0, 32, 0, 40, 0, 85, 0, 78, 0, 73, 0, 84, 0, 69, 0, 68, 0, 32, 0, 83, 0, 84, 0, 65, 0, 84, 0, 69, 0, 83, 0, 32, 0, 45, 0, 32, 0, 84, 0, 97, 0, 103, 0, 115, 0, 58, 0, 32, 0, 72, 0, 69, 0, 65, 0, 76, 0, 84, 0, 72, 0, 32, 0, 83, 0, 79, 0, 67, 0, 73, 0, 69, 0, 84, 0, 89, 0, 41, 0, 0, -1, -37, 0, 67, 0, 8, 6, 6, 7, 6, 5, 8, 7, 7, 7, 9, 9, 8, 10, 12, 20, 13, 12, 11, 11, 12, 25, 18, 19, 15, 20, 29, 26, 31, 30, 29, 26, 28, 28, 32, 36, 46, 39, 32, 34, 44, 35, 28, 28, 40, 55, 41, 44, 48, 49, 52, 52, 52, 31, 39, 57, 61, 56, 50, 60, 46, 51, 52, 50, -1, -37, 0, 67, 1, 9, 9, 9, 12, 11, 12, 24, 13, 13, 24, 50, 33, 28, 33, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, -1, -64, 0, 17, 8, 1, 32, 1, -52, 3, 1, 34, 0, 2, 17, 1, 3, 17, 1, -1, -60, 0, 28, 0, 0, 0, 7, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6, 7, 8, -1, -60, 0, 76, 16, 0, 1, 3, 2, 4, 3, 6, 3, 5, 4, 8, 4, 5, 2, 7, 0, 1, 2, 3, 17, 0, 4, 5, 18, 33, 49, 6, 65, 81, 19, 34, 97, 113, -127, -111, 20, 50, -95, 7, 66, -79, -63, -16, 21, 35, 82, -47, 36, 51, 98, 114, -126, -94, -31, -15, 22, 83, -62, -46, 37, 99, -110, -109, -78, 8, 115, 52, 53, 68, 85, 100, -77, -30, -1, -60, 0, 26, 1, 0, 3, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6, -1, -60, 0, 45, 17, 0, 2, 2, 2, 2, 2, 1, 3, 3, 3, 5, 1, 0, 0, 0, 0, 0, 1, 2, 17, 3, 33, 18, 49, 4, 65, 81, 19, 34, 97, 113, -79, -16, 20, -111, -47, 5, 35, 50, 66, -95, -31, -1, -38, 0, 12, 3, 1, 0, 2, 17, 3, 17, 0, 63, 0, -21, -96, -17, 64, -11, -92, -125, 74, -98, -75, -56, 116, 7, -17, 71, -52, -46, 65, -97, 10, 85, 0, 40, 80, -102, 33, 52, 40, 1, 92, -7, 82, 78, -44, 13, 36, -21, 64, 7, 67, -42, -109, 71, 64, 7, -46, -114, -109, -45, 106, 51, 64, 2, -116, -47, 80, 39, 77, 77, 0, 42, -118, -123, 9, -96, 3, -94, -10, -95, -25, 68, 117, -38, -104, 7, 66, -118, 104, 82, 0, 80, -95, -27, 69, 76, 0, 104, -89, -91, 3, 69, 64, 7, -67, 23, -67, 9, -94, -25, 64, 3, -34, -116, -111, 73, 49, 52, 9, 20, 0, 40, -113, -42, -118, -121, -122, -76, -64, 26, -46, 105, 81, 69, 20, -128, 17, -54, -123, 8, -93, -118, 64, 20, 82, -94, -124, 82, -128, -96, 4, -88, 119, 23, -24, 40, -109, 78, 44, 119, 21, 61, 69, 36, 10, 98, 22, -102, 113, 59, 82, 6, -44, -32, -90, -124, 56, 41, 66, -110, 41, 66, -87, 0, -79, 71, 69, 70, 61, 106, -47, 33, -51, 28, -47, 80, -96, 66, -88, -26, -109, 64, 26, 0, 57, -42, -114, 105, 51, 66, 105, 5, 11, -102, 20, -112, 124, 69, 29, 0, 42, -118, 104, 10, 28, -88, 0, 81, 107, 71, 66, -99, 0, 40, 81, 80, -102, 64, 84, -125, -46, -107, 34, -112, 15, -123, 43, 88, -48, 86, 38, -95, -119, -91, -45, 114, 121, -46, -3, -88, 0, -63, -93, -102, 42, 20, 0, 9, -92, -88, -47, -103, -92, 19, -50, -128, 20, 40, 77, 36, 31, 42, 19, -42, -128, 21, 52, 116, -119, -93, -15, -96, 5, 80, 59, 122, -47, 10, 7, 97, -74, -30, -128, 21, 52, 38, -109, 71, 64, 7, 66, -110, 77, 28, -48, 1, -48, -102, 76, -48, -96, 3, -102, 34, 104, 81, 19, 64, 2, -123, 10, 34, 69, 48, 4, -47, 19, 66, -128, -96, 2, 62, -76, -103, -91, 30, -76, -104, -90, 0, 20, 98, -120, 80, 19, 72, 5, 77, 39, -54, -124, -51, 21, 0, 44, 80, -46, -117, 125, -23, 67, 90, 64, 24, 20, -80, 5, 36, 68, -46, -58, -76, -60, 18, -57, 113, 95, -34, 20, -108, -118, 91, -122, 19, 29, 85, -7, 82, 69, 0, 44, 82, -59, 32, 82, -59, 52, 38, 44, 82, -123, 32, 82, -22, -48, -123, 81, -118, 64, -91, 77, 82, 1, 84, 116, 83, 66, -104, -125, -25, 67, -107, 21, 0, 117, -92, 1, -125, 66, 104, -124, -64, -95, 53, 32, 40, 116, -93, -92, -47, -118, 96, 42, 69, 9, -94, -95, 62, 84, 8, 30, -15, -46, -114, -118, 104, 72, -102, 96, 15, 57, -94, -34, -124, -47, 122, -48, 5, 35, 119, -115, 56, -128, -76, 25, 73, -25, 75, 23, 41, -102, -95, -78, 37, 41, 82, 12, 127, 16, -4, -22, 88, -41, 104, -84, 104, -44, -79, 114, -19, 73, 0, 54, -62, -100, 81, -97, -68, 18, 7, -103, -2, 64, -46, 62, 42, -20, 110, -59, -78, -68, 3, -85, 7, -36, -93, -14, -88, 15, 57, -39, 50, -73, 114, 41, 121, 6, 108, -88, 65, 82, -107, -32, 0, -44, -97, 42, -120, -116, 102, -43, 87, 1, -91, 118, -19, 44, -126, 66, 87, 106, -24, 49, -44, -9, 96, 122, -47, 64, -109, 52, 45, 92, -123, -50, 102, -36, 105, 67, 112, -79, -89, -95, 26, 31, -44, -45, -95, -44, -98, -66, -43, 66, 47, -112, -30, 101, -112, -91, 13, -91, 64, -89, -24, 105, 11, 122, -31, 99, -25, 41, 7, -110, 52, -94, -128, -48, 41, 99, -81, -91, 37, 74, 51, 89, -26, -46, -92, -72, 12, -86, 100, 107, 52, -1, 0, 15, 37, 45, 96, -84, -74, -128, 18, -128, -91, -108, -92, 108, 37, 68, -97, -87, 38, -114, -128, -71, -111, 66, 105, -68, -38, 81, -51, 32, 28, -109, 67, 53, 34, 122, -5, 81, -125, 64, 14, 77, 2, 118, -13, 20, -119, -91, 125, -47, -3, -31, 52, 0, -70, 42, 41, 52, 38, -128, 12, -102, 20, -109, 66, -104, 10, -96, 77, 36, -102, 18, 104, 1, 83, 68, 72, -25, 73, -102, 19, 64, 7, 52, 71, 78, -108, 38, -123, 0, 20, -7, -47, -47, 81, -19, 69, -128, 41, 42, -93, -92, -109, -19, 64, 21, 92, 65, -60, -104, 95, 12, -39, 11, -84, 73, -41, 6, 109, 27, 101, -122, -13, -72, -28, 111, 3, 64, 7, -119, 32, 120, -51, 115, 59, -1, 0, -74, -53, -27, -87, 67, 9, -64, -20, -38, 108, 24, 11, -67, 121, 110, -85, -52, -124, 101, 3, -36, -7, -42, -17, -120, -101, -73, -65, -62, -18, 123, 118, -112, -76, 40, 110, -95, 48, 6, -43, -61, 113, -101, 70, -84, -18, 22, -106, -13, -72, -127, -79, 73, 76, 15, 45, -87, -82, -10...

and at end of this byte array im getting this 3 dots and array is not completed ,so how can i get correct byte array 
```

base64 字符串是

```
/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB
AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEB
AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAEgAcwDASIA
AhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQA
AAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3
ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWm
p6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEA
AwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSEx
BhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElK
U1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3
uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+wC2k
D/aRgsZBGA2OJRuthgfM5HcZYSlvMPE5n33aSAFBOfnUmIA5yZMG3BU7jIVwjDBO9XEhAaUyMb3P
t5g4BxvD+UVwR++VmtyOz4yvZt5cuCRKZc3ugko2k3ALZ8pRknMgUwHBOJAMeYcHEmVZsifzcXn5
AlbZyWsYpLRpOU27rltdJ3atpeLcpNwk/wBKSt1V0teZJ3UW0mvdV1K6d29Wm23ze9YT5sc3D7xC
vT/Xf8e/ydZNu3zOPv8AmeZH+7n87/TLMXzz3BwJ96w/PnZ53z2Y+7l9o+fH/LXeHzibzs3mday/
aQGAaHzPLBDHmX5rU4YjzMbTId2S5cOcmcyf6XoJ823+Pf5Kc/8ALb/j0/cnmTaF8ziT955nmjmf
zf8ATJXf+601r9rmXz1jF2s01JbzVOLqOi125k1urpW195dVFPtqtZQVy9bcqo67kibZnO/Edl+8
3bpOE8zlMyeb5g/1/m/6W5Jd235d28Qt1Hzk/Zvn/wBbLtx9oH7v98JNw+ebzv8ATK9uJsIuNyuI
pAc53qDZAY+Zj8iv8x/eiXzCpFw0ga7Ixny/l3bkg/izv/5B/P35P7/T95v39ZvO/wBMvo3br1S7
VHr7rd7ws7trbldpK6Sv9yW3nFX0g9JJ6ddWmm2+bRUZmHFs27yz84+/+8g5+6/Az85zJvzF+8m8
/wD0zObm124zvjgOzOfO5s13bt0m0fvNm3955hl3fv8AzM3hJyY/4/NEfOeLnLWPON0nlhvM6fPu
MnWbzsXee6+bjA3ZFsOv+s2iABeTN3Od37zzPNAzIJv9LSeklbrHS27UmtnHu18ScurSbhMLeTen
bpZq9rP+W/VNNpOTTi7CfNt/j3+SnP8Ay2/49P3J5k2hfM4k/eeZ5o5n83/TCPnZ+9J3+SvTr/x6
cfekx9/hzv8AM4+afzv9Lz1+bH/LTf5fXjz8eVz0k2ld/T955vmDmfzv9NsKM/w7twiH3vv52/L1
k6+Z9795v87rP5v+mz1t/n/NGL3Te8pbrylebrQb11t+TfRtbJ9lt8rpQLSc/Zj97LxjP97/AI81
xjc/9/Zn95v3q26fz83s0Yz5fy7tyQfxZ3/8g/n78n9/p+837+s3nf6ZnqN32X5bR9xReT/rP9R8
mMy4A39cSeYGdsT+f5t5PIuVj+TduSIZ3583MdqNpG6XGfMxn95v87rN5v8AprStGT35p227rlvr
Ft/FfVv1bd2LXm02gnay1tJP+TrbdRe/XVNU+bb/AB7/ACU5/wCW3/Hp+5PMm0L5nEn7zzPNHM/m
/wCmWJOTH/H5oj5zxc5ax5xuk8sN5nT59xk6zedi7rp823+Pf5Kc/wDLb/j0/cnmTaF8ziT955nm
jmfzf9MJJi0OZZ9+8AsCQA/FjldpeQKP3rFW+cN5h/14uCbwSvfrt2u1eSe6d73v8VndXU3Jzmd/
+Dvstk7fCloubWyacZJaCfNt/wCWm/yX4487H2b9/wBZNoXf/qvn8zef9d5v+mV4xny/l3bkg/iz
v/5B/P35P7/T95v39ZvO/wBMIxny/l3bkg/izv8A+Qfz9+T+/wBP3m/f1m87/TBJ92zI3eY0Of8A
prN/ofP3nwR5hwPmjk8xeZ/OP2un1j69NftU9uW21rf3nGHwyi0Lu/Lp/hlvKP8ASvJ3TV5Y+dn8
W/yG6/63/jz/AHv3pMY8z/V/vPM83/lv5n+mV052cW7Z8rqfv5+x/N958Z8zlPm3+b9y48z/AEwX
kobhQxkEe49TLk2Q+ZQ0pHErEgbzJvCkzm4JvIJMXWzyFDhhFlc/6wZsjjLM4QgEj/lpu8x+Jmmz
edN/z031132fRp6662s3zcx3+VtHrf7+601etnf3nK1GM+X8u7ckH8Wd/wDyD+fvyf3+n7zfv6ze
d/phGM+X8u7ckH8Wd/8AyD+fvyf3+n7zfv6zed/pldJfu/Lu4hA6/vD/AKJ8v+skwfl4b94JPNX5
ZfOP2wT5tv8AHv8AJTn/AJbf8en7k8ybQvmcSfvPM80cz+b/AKZyt3v537dee2nK3tOL6721k1zC
81tbounLfeH91999brmbYvOzvny/fOfsf/XTdu8z/ppu8z/lt53+mC87O+fL985+x/8AXTdu8z/p
pu8z/lt53+mLGMhPs4LllhIGQm//AI8jzkyD7pXAJl3FvvTecBeVlG7+DzN6QHrjzv8Aj0+Y8SbS
PM4H7zzPOPM/mf6b0W38vJ72d+nS2vqt0mCv91uj/u9ou3w/js7A/JUdd/kDb97zvntztz+92/63
duzJv8/GZ/M3XsCS58poAWVjCpIOTOVFqAhJWQKSWCl/3iSedjMwmzeJKNxh+Tf5nlDrzcZS1+Xp
J5ZbzfvfPu8/rNvzeV0G7Z8nmb3ROuPO+5+5HEm0jzOZP3m/zhzN5n+mVFWVv73ptJrbT+brrts9
ZEVZNf3o9F0k1/Knrf18222WEX7Rg7d+dgbnHm7TZxun8eCfNJ3ZcyeccCUyAXddRnHFw27Yvy8+
Z/qfkHEuf9Z8h/fbvNh+SXzP9MFnxjK7vuBun7xF8ranSTGcffHmmTzTlZfN/wBKhjG6WNceZuYD
y84MmXAxuzJjf5m3P7zPmA5m83N20ui2t+tr6K2z+/Rtr2jYl0X9a2vZLs/v0ba9o21V3Y+S4ffJ
GOG/13+r+VOZNu3zPmT955nmf8e8/nf6ZZeWAlBt3YWIE5x5oCwoVORIVJO5cr5hZpwQZxIWu851
hEufvM+0kDks2+DBJLMfkLqSg3iQOzBZzKReDywFQANxeSJg24BZRugKyAjzM7fOH32czb0jCSrL
m6Xy7P8Ay2j/AHtt/PXUWnTs+nfTaP8Ae2387OzUDdn5Q+94n6/63HlfvvvSYC7v9X+88zcP9d53
+l1iBg5AN0xhH3yRIQ1uzPgCRVAZ+Ad4ff8Adn87F5BGN3l/KH3pEOv+ux9n4+9JtVd/B+fzd/8A
y387/TERc7bci6O7ys9QZNv2UEnBcAqHJxh9yyt88wkb7XorarTpa6u37yjoldaqOvk9G4qLcpdb
dr6Rt/Pdrk1Svu9U1HVylZkfmt5ePm3iJuWc+Zj7Jgn535G/hvm8zzB81z53+nZ6jd/B5m9ID1x5
3/Hp8x4k2keZwP3nmeceZ/M/03QSHOzndlYiMMP3gb7JlhlZcL+8XO7zXk8w/LN5x+110t9+3jf5
qxZyQfM2/ZeT9/kb2/vK/mHH2jzh9sy6bfh5Jfy+ff721IpW8um68orrF9fzT1vcekOQIMZ3CMFc
Z3A/Y3ZCm6TbsDht/wA5cttzMZm+2CfNt/j3+SnP/Lb/AI9P3J5k2hfM4k/eeZ5o5n83/TBLfdt/
i3rCfvD94rfZsr1kx/x8t8370yeZ92bzT9ssRwbtnO/ekP8AF/rox9k55D/u13tgHdK+8cz+a32z
lSdrbJbLW32r9Gt7rrpzSbknPnFfW/W3vJb2bt0vtOMkru12lZ2kV0t923+LesJ+8P3it9myvWTH
/Hy3zfvTJ5n3ZvNP2zQS3+7wWwIV+8f3gH2fMn3pMAeX9z94ZN5+aXzj9rEt/u8FsCFfvH94B9nz
J96TAHl/c/eGTefml84/a9C3gLYwC4kKB2yP32DAG6q21sMuSA4csFUTGYm8eivZe7a9u6TXdX/g
vz+J7zTuWve6ata7t0bkv5Xd865ktfiSu4pt5k8JOnawqZcSf2NZE4B3jfDw2S56kMOZDJvKgy+c
zXtfTxk/d3Z387vvYe3OcbpMhfM3YzJ5nm7czeZm86C/g3WN8J/3nmXuhjO4/vEItth4EmONoZVL
+YZDkzmcvd0LaD5UBG4MIscn94R9kjL5DTBQN4Jz5m/eoAnM5N51Wk1ay1tZq95O9XdOOnMknzO8
Wr6N8zlyK0fed7JuMU+Xa6i7e62lFWaTu25NWbcr7GnjMaDZu8xbfjdzcZWEdd0nl7t2M5fcDnM3
n7rzdsOY3Oc7jGuQM7/3lt8mMydN+d2ZfMMgGZ/Oze5cHzWitnfuDnzMYMmWszu2ZfAbzN2P3m4T
MN03m5vd61G7sX3iPvjz8ix5PzPtzuzj95uBxmXz83m2GXuSbV7RttfVPV3dOT7bty/m0cU8bdO0
o9F1fpfbW6s+0nH3jfthljxu8xouCf8Aj5yIxnO6Tyt+7aeWznO6bz83d62GecBslBuzw+JrX5SM
vkLv+9+88wytzPv3XVG2GWPG7zGi4J/4+ciMZzuk8rfu2nls5zum8/N3ethnnAbJQbs8Pia1+UjL
5C7/AL37zzDK3M+/ddehht38lt/170ty/hZ9+R/EZ/zadZdPP/Au3zttK1o7FsMh/lVtxQZL/wCs
zcW3ykeY3ynzOuJN5mJzP5nmXk45RRgNvEA2lv8AW/Lb/Kx82TC/PnOZNxfGJfNzdV0O7vv3+WmC
f9d80X7l/nk2oN/yyfvN+88zeb/plmD5vLGJ3yV4VuXwtvz/AKx8Rruzn5vMVl/ezebm59zBpavy
S2ju3Vl/K+23xa35U21Lz+v/AA3dL16/02idZSe2/eIyclj5sY2YBw7/ACDzF4G938w/NcecPtc6
zZxgBsiMDJPz48nIb97JhePlY+aJPNbCSecPtUC844VtzDqfv57t8z4U+Zx9/f5jfNP53+li844V
tzDqfv57t8z4U+Zx9/f5jfNP53+l7JpbeX8r/lta3rfrq425nbn4rJ9Pwf8AdXbt+Lb1ukXV529D
kRD72d2fsfB/fSZB8zj/AFm7zW4l8z/S51mztzzu8sH5h8wP2fH/AC2kx/rxx+9L7vvyeZ/pVFfm
/wBveYl5b/XY2fum/eSbUXfw/wC88zeOZvN/0xYJd2M/MXMew7jmQb7faCPMbauwcEmTf5nWZpQb
xptadLq+ku6js49VfTqpSje61z5U9e2/zfXTr5/ffUtx3H7wNkMD5I5PMmDbFed0mFzInJDlzJnM
ol23UyTg7MYbKxMOfv4+y/7cmAcr8373f5hyj+aftOUk+dmPm/1RX5vvj/Q+mZ39FyTvLeacLL5n
+kiT52Y+b/VFfm++P9D6Znf0XJO8t5pwsvmf6T5yaW0k7vVtXb1Vtoq+mive8ZRV2ph9Veuj/wDJ
dNGu+mru/TvFs2UmHy8Zz5bHBX5iPJxj95JtHHI/eCTech/MX7QJ823q+8Rjg/67Hk8L877dm/5j
8/mb2+aXzP8ASKdvKSB+9t2LmHGWJEmXtcZ/eSHJUkn7+/eoxKHIu5V5298hP4uufL5/1r5znp8+
71k87/SWru+nk+u7itlF7ttq+6aXvNy5sXGza7W+y1fXzXdP8W7NF5OdvGcmE8H7/wDx6/OvL/L8
3K/Pv3dZfM/fwJMPl4zny2OCvzEeTjH7yTaOOR+8Em85D+Yv2gthnHBOfL5DZ3YktOcb5Pu78kfP
vEhGZfMzcqpzCvOdwT3L4EPQ7nwE3fNy/mbusvm5uWvedrdG9m+76Qb1T663adpRd5THdrfW17N9
10Ut79XfunJtggzt6vuEYOD/AK0jysKPnfbtzy3z+Zvb5pfMP2iBRKcY+fcI1HL/ALwjysn/AFsn
AycL+9J3j5pN7/aplGdvU7guec7h+7xj94+R8/P3y2TzJ5h+0CjO3qdwXPOdw/d4x+8fI+fn75bJ
5k8w/aO36p/T9Gtff9G/P2m6aTtRt+HRrsukez/4dNAnzber7xGOD/rseTwvzvt2b/mPz+Zvb5pf
M/0iWBPMQt5LTcJ+8B4P7tOMeVcY9zv+YkvmTd9plprzt75Cfxdc+Xz/AK185z0+fd6yed/pMkLi
RS2wPxH85BbIMUZBG1Z8AgjqwJJLnzd32mTihuvVW0lrbXstfe793zauU1GLvp9+3ZdHF/Z6S77p
HypbTBjstwGLmMKoORIv+j5IGZAAolj/AHeGaQuV/eictdaCPB8vG7lOuf3n+p+ZuZNuMn/nqJMt
/rvNb7ZkW04baPs4IYRswyAJAPsYYqC0pChZVKlS5dWADTGc/a9FfPaL9zbb8ugBypEh3Wy5HyyE
YZ9xB80ymQDE5kJu/itbWs2vO93ooN6RejTt1d5KetnzfdJaX0X5ayk19m3Vy3tZ8l3NuTntxOcK
F3BzHnp+8Um3yMkNt4kUE/vBJ5jKDO07C72E+bb/AB7/ACU5/wCW3/Hp+5PMm0L5nEn7zzPNHM/m
/wCmc+s9w2xrgF+YuARiUKIem4uVUAnbxIzLIDic3DfathPm28W77zF1P+ux9n4PMu3b5nL/ALzz
PMb97P53+lnfe2iu+rsrve1+Vq7d27q6s6ik4vT59n/NJdI7XTaSbW9rSeti2lD7cgvnyghyfnPm
WIVcEt0HOW3h/MIZpjMDeWEn3bMjd5jQ5/6azf6Hz958EeYcD5o5PMXmfzj9rrp823+Pf5Kc/wDL
b/j0/cnmTaF8ziT955nmjmfzf9ME+bb/AB7/ACU5/wCW3/Hp+5PMm0L5nEn7zzPNHM/m/wCmO/Ra
9r2b3bvdJ6tyUrpP3uVpSfI5vb+vT8NHo3s5Jte/YebdtOA5YR7+TiVitoSuMvgFj1UvuEuR5wmH
2vPuZMbSfnDLFnOP3mwWpC8ebwofhsuZVlBJlaQ/bLDCcgHGVcRJjP8ArkP2YYPEhOA6lf8AWCTz
s7p2lxeY7y5AuFCuJGjUEEESAfZ8Ebt4IBlU8NI0okI3TmbN5MdLvRx6xata7bWlmlZLmirOzbim
5u7N27Ju1umjtzKT1jf3v5k/eu72V5O/ajIYbc79nHXzci2GM4fH+s2jmTf5xP7/AMz/AExVl3Y+
TfvMadD+8B8nj70uP9f/ANNTJ5h5l84/bM63lGQP9Gff5ZJB/wBaMW2W5MpUKZA2QZAwlLb7jzh9
rcku7d5yl8lM/MMygmLphZMcMRgly+/rKZgbxqz5tO8r2630Wkd2+WybbbktOZq6WqWjslGL0Xm2
9Ify6a3+J+81F819Zd2Pk37zGnQ/vAfJ4+9Lj/X/APTUyeYeZfOP2ywoz/Du3CIfe+/nb8vWTr5n
3v3m/wA7rP5v+m46y9Pk3fNGe37wfu/9uTAG3k/vGk8xvlm83/TJxyBcEbw5jBOR+8Cm3B6q4Byx
ByWMgfP74SFrssr36aW0u3rGSsrWfuxj13mlrFJyNLO6a2V2rrXmi73g7a8z63bad3zN6KjP8O7c
Ih977+dvy9ZOvmfe/eb/ADus/m/6axhuhiG3fuul4B/1mRaDnmXrv25/ebxIW3T+duvYbUZDDbnf
s46+bkWwxnD4/wBZtHMm/wA4n9/5n+mLINyWvy20m680UcnBk5tOAP3vTf8AMMSbw8S7ZfN23hH3
VJbq/K9OilBX1hZ3cNneOu0pJWHF+ifI3o/+fs2vsxi9+vNvdatyegkv3fl3cQgdf3h/0T5f9ZJg
/Lw37wSeavyy+cftgkv3fl3cQgdf3h/0T5f9ZJg/Lw37wSeavyy+cftmevzY/wCWm/y+vHn48rnp
JtK7+n7zzfMHM/nf6bYUZ/h3bhEPvffzt+XrJ18z737zf53Wfzf9NXW337/zRi+jerlPddbO81Ug
Oy1tfT/JtbRe/Ku+7te+thPm2/x7/JTn/lt/x6fuTzJtC+ZxJ+88zzRzP5v+mCfNt/j3+SnP/Lb/
AI9P3J5k2hfM4k/eeZ5o5n83/TM+SXdtJG8P5KgZ/wBaq+RgchyGXd8o+fzPNJYzCXN5YSfO3A37
xEBnP75R5PyHl8AZXn5nfzTzcecPtb6dfmtN2ndu+qtJyXvWjzOTk1VUhdfLtfzs1tdNJWt9q8U7
RjIsJ823+Pf5Kc/8tv8Aj0/cnmTaF8ziT955nmjmfzf9MEl+78u7iEDr+8P+ifL/AKyTB+Xhv3gk
81fll84/bM9Zd2Pk37zGnQ/vAfJ4+9Lj/X/9NTJ5h5l84/bBfmx/y03+X148/Hlc9JNpXf0/eeb5
g5n87/TTXr89/nq/Lm3fW8tqs2Jb3T8vw6NduTa+7Wq5L2EnztwN+8RAZz++UeT8h5fAGV5+Z380
83HnD7XXkl3bSRvD+SoGf9aq+RgchyGXd8o+fzPNJYzCXN4L82P+Wm/y+vHn48rnpJtK7+n7zzfM
HM/nf6bA8wIBI3ZMZwc/vMGFhxiXHEj8BpN4kJJmaY/a3FPVa9FfzvU5b3Td246Plvz83uucnGK8
lvdW0Vvikuz3XTrFNXtG7jQbtnyeZvdE64877n7kcSbSPM5k/eb/ADhzN5n+mCDds+TzN7onXHnf
c/cjiTaR5nMn7zf5w5m8z/TBBu2fJ5m90TrjzvufuRxJtI8zmT95v84czeZ/plaSWEhEGHZvLOch
t3+pUYUl1Ox5Q+7MjyCVWUTs6/autbX7cvf+5bp/d83vo7atbX7cvf8AuW6f3fN76O2qiXPRN+7Z
1wfNj+XB4dvkHmfN1lfzDjz/ADl+1V5JNxCkbgzRGMZH71Vkg/eA7mOVMo+Q+YZNwLGYTf6WAbs/
Lv3vE/3v9bjyv34+aTaF3cxfP5u4f67zv9LS1OVPOd4Rs9fNzBAPMxul2/6zBT59/mg5m83deCXT
Xote15LZw6WVum13f4hLpr0Wva8ls4dLK3Ta7v8AFDJyEH+lHJiPJzv/AHkHzFd0uGG/JXa2+R3/
ANd5ubzPSbOz5N+5IfX96v8Aou0fffp5q8cl9/JuPOP2u+yg/wCkAAhzEwGT++UtbEN9+XGGf7g8
xpDIB+/87/TaCW+/b/H5qxfxD94R9m+bo/Pzf7QfzDg3HnD7XWq3VtuiaabfSy6c3V3TcbXk2LfV
We1ne17Saum4t25oRs23ve7TuLaDcenmb1i4zjzsrYnLcvtzu3Y/eb87cz+fm8mtRkr8u7Oznd97
59OPTc+cb93/AC08wuRmfzc3kNoNx6eZvWLjOPOyticty+3O7dj95vztzP5+bxtr55KZXOVhYHHE
nNkzZyX6MVDH5/MMgwJTMReZ238n99mtNut/RPRxV0h239V/7bZbaX6XVtXpdSvoJLv2/Lu81oX/
AOujj7Nl/wDWSbSPMOE/eJLuX5p/N/02hGMhPs4LllhIGQm//jyPOTIPulcAmXcW+9N... 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-05-09T10:36:47.023

试试这个：

```
// convert from bitmap to byte array
public byte[] getBytesFromBitmap(Bitmap bitmap) {
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.JPEG, 70, stream);
    return stream.toByteArray();
}

// get the base 64 string
String imgString = Base64.encodeToString(getBytesFromBitmap(someImg), 
                       Base64.NO_WRAP); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-14T04:18:22.320

我编写了以下代码将图像从 sdcard 转换为 Base64 编码的字符串以作为 JSON 对象发送。它工作得很好：

```
String filepath = "/sdcard/temp.png";
File imagefile = new File(filepath);
FileInputStream fis = null;
try {
    fis = new FileInputStream(imagefile);
    } catch (FileNotFoundException e) {
    e.printStackTrace();
}

Bitmap bm = BitmapFactory.decodeStream(fis);
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
bm.compress(Bitmap.CompressFormat.JPEG, 100 , baos);    
byte[] b = baos.toByteArray(); 
encImage = Base64.encodeToString(b, Base64.DEFAULT); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T10:26:38.433

他们已经包装了大多数需要解决您的问题的东西，其中一项[测试](https://github.com/nzakas/cssembed/blob/master/tests/net/nczonline/web/cssembed/CSSURLEmbedderTest.java)如下所示：

```
String filename = CSSURLEmbedderTest.class.getResource("folder.png").getPath().replace("%20", " ");
String code = "background: url(folder.png);";

StringWriter writer = new StringWriter();
embedder = new CSSURLEmbedder(new StringReader(code), true);
embedder.embedImages(writer, filename.substring(0, filename.lastIndexOf("/")+1));

String result = writer.toString();
assertEquals("background: url(" + folderDataURI + ");", result); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-21T12:45:19.737

这是另一个解决方案...

```
System.IO.Stream st = new System.IO.StreamReader (picturePath).BaseStream;
byte[] buffer = new byte[4096];

System.IO.MemoryStream m = new System.IO.MemoryStream ();
while (st.Read (buffer,0,buffer.Length) > 0) {
    m.Write (buffer, 0, buffer.Length);
}  
imgView.Tag = m.ToArray ();
st.Close ();
m.Close (); 
```

希望能帮助到你！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-07T09:28:35.360

试试这个简单的解决方案将文件转换为 base64 字符串

```
String base64String = imageFileToByte(file);

public String imageFileToByte(File file){

    Bitmap bm = BitmapFactory.decodeFile(file.getAbsolutePath());
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bm.compress(Bitmap.CompressFormat.JPEG, 100, baos); //bm is the bitmap object
    byte[] b = baos.toByteArray();
    return Base64.encodeToString(b, Base64.DEFAULT);
} 
```

# java - 在 index.jsp 加载之前调用控制器

> ID：10513982
> 
> 赞同：1
> 
> 时间：2012-05-09T10:08:21.147
> 
> 标签：java, html, jsp

我是 JSP 的新手，我需要一些帮助。

我有一个 index.jsp 文件，显然如果你输入“localhost//”，默认情况下它会自动调用 index.jsp。我想知道这是如何工作的，因为我计划在加载 index.jsp 之前先调用一个控制器。

我试图解决它。在我的 index.jsp 中，我放了如下内容：

```
 if(request.getParameter("submit") == null && 
    request.getAttribute("submit") == null){
    response.sendRedirect("getInformation"); 
 } 
```

在这里，我强制 index.jsp 直接调用我的控制器/servlet。（我在我想调用的控制器上使用了@WebServlet("/getInformation"）。

我想知道是否有更好的方法来做到这一点，因为我希望我的控制器/servlet 上的所有逻辑代码和 .jsp 中的所有 html 代码尽可能多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:23:20.033

IMO，这是最好的方法。您可以在`web.xml`. 在下面的示例中，创建一个“愚蠢的”index.html 设置一个 META 标记重定向到您的控制器`SomeController`（将一些计算从服务器委托给客户端）：

**web.xml**

```
<welcome-file-list>
  <welcome-file>/WEB-INF/jsp/index.html</welcome-file>
</welcome-file-list> 
```

**索引.html**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="refresh" content="0; URL=./SomeController" />
<title>Some title</title>
</head>
<body>
If you are not automatically redirected please click <a href="./SomeController">here</a>.
</body>
</html> 
```

# javascript - 赞按钮和赞框不仅显示在我网站的某些页面上。其余的工作正常

> ID：10513988
> 
> 赞同：0
> 
> 时间：2012-05-09T10:08:38.097
> 
> 标签：javascript, facebook, facebook-like, facebook-likebox

我将进入第三个小时试图找出我的页面上出了什么问题，但我仍然处于零基础。
点赞按钮和点赞框不再显示，Facebook 评论计数也不再显示。
昨晚工作得很好，今天早上他们只是不想再工作了。

适用于：
[http](http://www.purelie.com/post/42)

: //www.purelie.com/post/42 不适用于：
[http](http://www.purelie.com/user/Qloudify)
://www.purelie.com/user/Qloudify 和主页（不能链接超过 2 个链接，只需单击在徽标上）。

如果有人对此有任何想法..任何提示或想法都是有帮助的。
点赞按钮是相同的，点赞框和 fb-root 也是相同的。我只是不知道下一步该怎么做才能让它发挥作用。
先感谢您。

我已经修好了。正是 Facebook 的评论数打破了一切。昨晚不知何故，facebook 开发人员打破了计数，它抛出了错误，阻止任何其他 FB js 工作。
我做了什么：我评论了 facebook 的评论计数，直到他们修复它，然后我从头部删除了 << xmlns:fb="http://ogp.me/ns/fb#" >>。现在工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:30:40.453

它没有显示在第二个链接上，因为页面上有一个 javascript 异常导致脚本的其余部分不触发。在 Chrome 之类的东西中打开第二页，然后按 F12 打开开发者工具。如果您单击控制台选项卡，您将看到一条错误消息：“没有为对象注册 polyfill”。

如果您可以修复导致该错误的任何原因，您的喜欢按钮应该会再次出现。看起来这可能与两个页面之间的类似按钮的 HTML 不同有关，但如果不详细阅读代码，我不能说 100%。

# iphone - 帖子仅对所有其他用户可见

> ID：10513992
> 
> 赞同：0
> 
> 时间：2012-05-09T10:09:00.650
> 
> 标签：iphone, ios

我已将 facebook 与我的应用程序集成在一起，并且连接良好。问题是我发布的内容在我浏览时不可见，但我的朋友可以看到该消息。有什么问题？

```
 NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"123456789", @"app_id",
                                   @"https://developers.facebook.com/docs/reference/dialogs/", @"link",
                                   @"http://fbrell.com/f8.jpg", @"picture",
                                   @"Facebook Dialogs", @"name",
                                   @"Reference Documentation", @"caption",
                                   @"Using Dialogs to interact with users.", @"description",
                                   @"Facebook Dialogs are so easy!",  @"message",
                                   nil];

    [facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

用我的应用程序 ID 替换 1234567。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:54:08.620

默认情况下，Facebook 在您的墙上发布项目，您的朋友可以在他们的新闻提要中看到这些帖子。您是否尝试过检查您的墙或新闻提要以查看那里是否有帖子？

# objective-c - 在 YouTube 横向视频后将 UIView 返回纵向

> ID：10513993
> 
> 赞同：1
> 
> 时间：2012-05-09T10:09:04.760
> 
> 标签：objective-c, ios4, youtube, orientation

我使用带有嵌入 UIWebView 的 UIView 来查看 YouTube 视频。当 YouTube 视频播放时如果用户在横向模式下打开一切都可以，但是当按下完成时返回 UIview 但在横向中，尽管我已经声明 shouldAutorotateToInterfaceOrientation: 仅纵向。

# model - Enterprise Architect (9.3) 中的 SysML FlowProperties 和 FlowSpecification

> ID：10513999
> 
> 赞同：1
> 
> 时间：2012-05-09T10:09:20.250
> 
> 标签：model, block, enterprise-architect, flow, sysml

我正在尝试定义一个 SysML FlowSpecification 并向其添加 FlowProperties。我找不到添加流属性的任何特定方法，并且标准添加属性对话框不提供流属性特定属性，例如“方向”。我尝试使用手工制作的 flowProperty 原型和使用 direction=in 约束将 flowProperties 添加为标准属性，但 EA 并未在相应的 Block 隔间中显示方向约束。

在 MagicDraw 中，所有这些都是无缝的，所以我怀疑我对 SysML 方法本身是正确的。

非常感谢任何有关如何在 EA 中正确建模 FlowSpecifications 的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T02:31:01.663

在 Enterprise Architect 中，如果您将流端口添加到任何块，那么流端口将为您提供适当/必需的属性。

它还显示了“流动端口”隔间，包括方向。

我希望这有帮助。

汤姆