# StackOverflow 问答 10001000-10001999

# visual-studio - “编辑并继续”不起作用 - 带有 TFS 的 VS2010 - 解决方案中的锁定文件

> ID：10001002
> 
> 赞同：1
> 
> 时间：2012-04-03T20:36:27.333
> 
> 标签：visual-studio, visual-studio-2010, tfs, edit-and-continue, locked-files

在我的 Visual Studio 2010 中，使用 TFS 下的特定解决方案的编辑和继续调试功能不起作用。没有错误，但是当应用程序的执行在断点处停止时，我无法使用代码修改文件。似乎 TFS 已为我的用户锁定文件。

我试过了：

1) 确保文件的读/写权限

2) 验证所有项目都是**严格**为 x86 构建的（我有 Win7 64 位）

3) 在 Options/Debug 中禁用 check JIT

4) 我还尝试使用 Tools/Import-Export Settings 将 VS 2010 设置恢复到初始条件

5）我试图从我的合作者的电脑导入设置，其中编辑并继续运行良好

使用其他解决方案，不存储在 TFS 中，我没有问题。如何允许此解决方案的编辑并继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:45:15.410

好的，问题是与 SQL Compact 一起使用的 Visual Studio 插件。我已经看到如果我在安全模式下启动 Visual Studio 就没有问题。

# c# - Fluent NHibernate automapping table per hierarchy: can I split a hierarchy?

> ID：10001008
> 
> 赞同：0
> 
> 时间：2012-04-03T20:37:29.833
> 
> 标签：c#, nhibernate, fluent

I have a rather large class hierarchy that I'd like to use table per hierarchy with, but with a slight twist. My hierarchy looks like:

```
Event --> [specific_events] --> Transaction --> [specific_transactions] 
```

I'd like to split this hierarchy into two tables, Event and Transaction. However, all transactions are events, and I believe NHibernate will attempt to put the entire hierarchy in the Event table.

How can I tell it to split the hierarchy between Events and Transactions?

EDIT: I got the hierarchy slightly wrong. All specific_events derive from Event and all Transactions derive from Event, not specific_events.

```
Event --> [specific_events]
Event --> Transaction --> [specific_transactions] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:26:33.347

It is not possible as I know. Why do you want to split them in 2 different tables?

Also there is a very good explanation about different strategies for hierarchy mappings in NHibernate in Action book. It helped me a lot.

# php - 用 PHP 将 EXIF 写入 JPG

> ID：10001012
> 
> 赞同：5
> 
> 时间：2012-04-03T20:37:43.477
> 
> 标签：php, exif, imagick

几天来，我正在尝试使用 PHP 在 JPG 图像中写入（或更新）EXIF 信息（地理标记、纬度和经度）。在咨询了许多网站都没有成功后，我认为最好的选择是使用 Imagick，但虽然我似乎可以使用 setImageProperty() 设置纬度和经度，但是当我写图片时 EXIF 没有保存。

这里我给出一个代码片段：

```
//Loading existing image
$edited = new Imagick(dirname(__FILE__)."/mini.jpg");
//Stripping the curren EXIF info. I think is not mandatory and I try to comment but nothing...
$edited->stripImage();
//Setting the new properties
$edited->setImageProperty('exif:GPSLatitude', '30/1, 46/1, 58605/1000');
$edited->setImageProperty('exif:GPSLongitude', '63/1, 57/1, 35550/1000');
$propiedades = $edited->getImageProperties();
var_dump($propiedades);
var_dump($edited->writeImage('mini_edited.jpg'));

//reading the new image EXIF Info
$readedited = new Imagick(dirname(__FILE__)."/mini_edited.jpg");
$propiedades_edited = $readedited->getImageProperties(); 
```

图片保存成功，但exif信息没有更新。

任何人都知道如何使用此工具或任何其他工具解决此问题？唯一的要求是使用 PHP

非常感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T12:01:32.367

我发现的唯一方法是安装[PEL - PHP Exif Library](https://github.com/pel/pel)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-04T12:37:06.360

**gd**或**ImageMagick**库将帮助您完成此类工作。如果您使用的是共享主机，可能已经为您安装了一个（或两个）。

# c - 在不重新启动进程的情况下更新共享库

> ID：10001013
> 
> 赞同：9
> 
> 时间：2012-04-03T20:37:51.997
> 
> 标签：c, linux, dll, shared-libraries

如果我的进程正在加载 .so 库并且如果有新版本的库可用，是否可以在不重启进程的情况下切换到新库？或者答案取决于库中现有函数之一是否有参数更改？

我在一个相当大的系统中工作，该系统运行 100 个进程，每个进程加载 10 个库。这些库提供特定的功能，由不同的团队提供。因此，当库中的一个更改（可以说是错误修复）时，理想的做法是在不影响运行过程的情况下在后台发布它。可能吗 ？

**编辑**谢谢！在我的情况下，当一个新库可用时，所有正在运行的进程都必须开始使用它。让他们使用旧版本运行并稍后再选择新版本是不可取的。所以看起来更安全的选择是重新加载进程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T23:46:10.213

一种有趣的技术，虽然它在检查点恢复步骤中有些容易失败，但它是进行不可见的重新启动。

您的服务器进程或任何其他进程都将其所有必要信息保存到磁盘文件中。包括文件描述符编号和当前状态。然后，服务器进程执行`exec`系统调用来执行自身，替换自身的当前版本。然后它从磁盘文件中读取它的状态并继续提供它的文件描述符，就好像什么都没发生一样。

如果一切顺利，重启是不可见的，新进程正在使用所有更新的库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-03T21:25:16.603

您无法在进程运行的情况下即时升级链接库。您甚至可以尝试，但如果您成功（并且您不会因“文本文件正在使用”错误消息而失败），您将不得不重新启动该过程以使其将新库映射到内存中。

您可以使用 lsof 命令检查链接了哪些库（运行时或链接时）：

```
lsof -p <process_pid> | grep ' mem ' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T12:14:03.927

至少，您必须确保库的接口不会在版本之间发生变化。如果可以确定，那么我会尝试使用 dlopen/dlsym 动态加载库，看看 dlclose 是否允许您重新加载。

我自己从来没有做过这些，但这是我首先要追求的道路。如果你这样走，你能公布结果吗？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-18T09:22:32.283

Linux提供了几种动态加载器接口，进程可以在运行时加载动态库。linux 提供的 dlopen 和 dlsysm 可以解决你的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-03T22:28:07.710

如果您希望库定期更改，并且希望保持正常运行，我认为应该重新设计您的系统，以便这些库实际上成为松散耦合的组件（例如服务）。

话虽如此，我对这个问题的回答是肯定的：在某些情况下，*可以*在不重新启动进程的情况下更新共享库。在大多数情况下，我认为这是不可能的，例如当你的库的 API 发生变化时，当你的数据段的排列发生变化时，当库维护内部线程时。名单很长。

对于代码的非常小的错误修复，您仍然可以使用[ptrace](http://linux.die.net/man/2/ptrace)写入进程内存空间，然后从那里重做[/lib/ld-linux.so](http://www.kernel.org/doc/man-pages/online/pages/man8/ld.so.8.html)在动态链接方面所做的工作。老实说，这是一项极其复杂的活动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-03T22:05:26.307

有时您可以升级正在使用的 .so，有时则不能。这主要取决于您如何尝试，还取决于您运行的内核的安全保证。

不要这样做： cat new.so > old.so ...因为最终，您的进程可能会尝试请求页面某些内容，并发现它不再位于正确的位置。这是一个问题，因为东西的地址可能会改变，它仍然是同一个inode；你只是覆盖文件中的字节。

但是，如果你： mv new.so old.so 在大多数系统上你会没事的，因为你正在运行的进程可以为旧库保留一个现在未命名的 inode，而你的进程的新调用会得到新文件。但是，有些内核不喜欢让你 mv 一个正在使用的 .so，也许是出于谨慎，也许是为了它们自己的简单性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-03T20:57:31.053

ldd 进程的二进制文件是找出答案的一种方法。尽管理论上可行，但不建议修改正在运行的进程，尽管我确信存在一些实用程序，例如可以修改正在运行的 linux 内核的 ksplice。

您可以简单地升级并且运行过程将继续使用旧版本，并在重新启动时选择新版本，假设您的包管理系统很好并且知道可以安装什么。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-03T21:07:44.443

您可能想了解共享库版本控制和 ld`-h`选项。

一种使用方法如下：

您在构建系统中维护一个版本计数器。您使用以下方式构建共享库：

```
ld ..... -h mylibrary.so.$VERSION 
```

但是，你把它放在你的开发树的库中，就像 plain 一样`mylibrary.so`。（还有一个涉及将整个 .so 放入 .a 文件的技巧）。

现在，在运行时，使用该库的进程会查找完整版本的名称。要推出新版本，只需*将*新版本添加到图片中即可。运行与旧版本链接的程序继续使用它。当程序重新链接并针对新程序进行测试时，您会推出新的可执行文件。

# php - 通过 jquery .ajax 到 php 的 Textarea 列表

> ID：10001015
> 
> 赞同：0
> 
> 时间：2012-04-03T20:37:59.887
> 
> 标签：php, jquery, ajax, textarea

我有一个我想通过 ajax 提交的文本区域。当我尝试输出值时，我只得到 [object Object]

jQuery（阿贾克斯）

```
$("#insertAddresses").click(function() {

   $.ajax({
      type: "POST",
      url: "insertAddr.php",
      data: 'addresses=' +  
   }).done(function(list) {
      //getList();  // run query to get addresses and populate list
   });
}); 
```

PHP（我试过）

```
$_POST['addresses']; 
```

或者

```
$addresses = explode("\n", $_POST['addresses']); 
```

无论我尝试过什么，总是返回 [object Object]

帮助？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:45:18.903

您的服务器脚本正在返回一个 json 对象，该对象被 JavaScript 正确识别为对象。你可以用那个对象做很多事情，但你不能把它放在你的网站上，因为它不是 html 或文本。

以下是 json 的简短描述：[http ://en.wikipedia.org/wiki/JSON](http://en.wikipedia.org/wiki/JSON)

我不知道您的数据是如何构成的，所以我无法告诉您如何访问您的数据。但是在这样的 json 中（来自维基百科的示例）：

```
{
     "firstName": "John",
     "lastName" : "Smith",
     "age"      : 25,
     "address"  :
     {
         "streetAddress": "21 2nd Street",
         "city"         : "New York",
         "state"        : "NY",
         "postalCode"   : "10021"
     },
     "phoneNumber":
     [
         {
           "type"  : "home",
           "number": "212 555-1234"
         },
         {
           "type"  : "fax",
           "number": "646 555-4567"
         }
     ]
 } 
```

您可以，即，简单地使用以下方法超出 firstName：

```
data.firstName 
```

瞧，有你预期的数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-03T20:47:24.827

你的数据应该是一个对象：

```
data: { adresses: "value" } 
```

*   只是一个小提示：你在 jQuery 中所做的事情的简写 ajax-call 是 $.post(.... 然后你可以失去“类型”。完全一样，但我认为它只是更整洁一点.

# mercurial - hg shelve 相当于 git stash drop

> ID：10001017
> 
> 赞同：40
> 
> 时间：2012-04-03T20:38:04.227
> 
> 标签：mercurial, shelving

我安装了 hg shelve（不是阁楼）扩展，我想删除一个补丁。在 git 中它会是`git stash drop`. 我如何使用搁置扩展来做到这一点？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-08-28T21:23:27.467

从[Mercurial 搁置文档](http://www.selenic.com/mercurial/hg.1.html#shelve)（或使用`hg help shelve`）：

> 要删除特定搁置的更改，请使用“--delete”。要删除所有搁置的更改，请使用“--cleanup”。
> 
> 选项：
> 
> -d --delete 删除命名搁置的更改

因此，如果您的补丁被调用`my-patch`，那么您将使用以下命令将其删除：

```
hg shelve -d my-patch 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-01T19:22:22.343

如果您不想使用货架，您可以通过以下方式进行操作。

```
hg diff > mylocalchanges.txt
hg revert -a
# Do your merge here, once you are done, import back your local mods
hg import --no-commit mylocalchanges.txt 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-04-03T20:41:06.283

Mercurial shelve 扩展将补丁存储在 .hg/shelved 下。每一个都是一个简单的补丁文件，文件名就是补丁的名字。因此，要删除名为“mypatch”的补丁，我可以简单地从 .hg/shelved 中删除文件“mypatch”：

`rm .hg/shelved/mypatch`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T18:37:26.893

我根据 minaz 的回答创建了两个 shell 脚本：

**搁置**

```
#!/bin/sh
hg diff > $1 && hg revert -a 
```

**hgunshelve**

```
#!/bin/sh
hg import --no-commit $1 && trash $1 
```

把它们放进去`~/bin`。您需要`sudo apt-get install trash-cli`该`trash`命令（或修改脚本以不删除补丁文件，或根据`rm`需要使用）。

# python - 将 MySQL 检查从“程序端”更改为 MySQL 服务器本身

> ID：10001023
> 
> 赞同：0
> 
> 时间：2012-04-03T20:38:24.663
> 
> 标签：python, sql, sqlite, python-3.x

所以我做了很多插入，只有当名称在表中不“存在”时，我才想插入到某个表中，即我不想有任何重复。我现在正在以这种方式接近它：

```
def create_artist(artist_name):
    artistid = has_artist(artist_name)
    if not artistid:
        sql['cursor'].execute("INSERT INTO artists VALUES (NULL, ?)", (artist_name,))
        artistid = has_artist(artist_name)
    return artistid[0]

def has_artist(artist_name):
    sql['cursor'].execute("SELECT id FROM artists WHERE artist_name = ?", (artist_name,))
    return (sql['cursor'].fetchone()) 
```

它基本上会查找表中是否有同名的艺术家，如果没有，它会插入一个，否则它只是返回查找。必须有更好的方法来做到这一点，是否可以将整个过程移动到查询中，这样我就可以将这一切移动到 SQL 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:43:47.327

查看[INSERT IGNORE](http://dev.mysql.com/doc/refman/5.5/en/insert.html)。这将要求您在表上有一个唯一索引，这将导致 IGNORE 触发。

```
INSERT IGNORE INTO artists VALUES (NULL, ?) 
```

# objective-c - NSPersistentDocument 的轻量级迁移

> ID：10001026
> 
> 赞同：46
> 
> 时间：2012-04-03T20:38:46.977
> 
> 标签：objective-c, cocoa, core-data, osx-lion, nspersistentdocument

我正在尝试对 Core Data 中的 SQLite 存储进行轻量级迁移。使用 Xcode 4.3.1 在 Lion 10.7.3 上工作。

在我的 NSPersistentDocument 子类 (AccountDocument) 中，我重写了用于配置持久存储协调器的方法，以便它获得正确的迁移选项：

```
- (BOOL)configurePersistentStoreCoordinatorForURL:(NSURL *)url ofType:(NSString *)fileType modelConfiguration:(NSString *)configuration storeOptions:(NSDictionary *)storeOptions error:(NSError **)error
{
    NSMutableDictionary *newStoreOptions;
    if (storeOptions == nil) {
        newStoreOptions = [NSMutableDictionary dictionary];
    }
    else {
        newStoreOptions = [storeOptions mutableCopy];
    }
    [newStoreOptions setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
    [newStoreOptions setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

    BOOL result = [super configurePersistentStoreCoordinatorForURL:url ofType:fileType modelConfiguration:configuration storeOptions:newStoreOptions error:error];
    return result;
} 
```

（感谢 Malcolm Crawford 的提示：[http](http://homepage.mac.com/mmalc/CocoaExamples/controllers.html) ://homepage.mac.com/mmalc/CocoaExamples/controllers.html ）

当我运行该应用程序时，它在 NSPersistentDocument 的实现中失败`-managedObjectModel`：

```
* thread #1: tid = 0x2703, 0x00007fff931d9350 libobjc.A.dylib`objc_msgSend_vtable13 + 16, stop reason = EXC_BAD_ACCESS (code=13, address=0x0)
    frame #0: 0x00007fff931d9350 libobjc.A.dylib`objc_msgSend_vtable13 + 16
    frame #1: 0x00007fff8935e975 CoreData`-[NSKnownKeysDictionary1 _setValues:retain:] + 197
    frame #2: 0x00007fff8935f288 CoreData`_newReadModelFromBytes + 648
    frame #3: 0x00007fff8935b93e CoreData`+[NSManagedObjectModel(_NSManagedObjectModelPrivateMethods) _newModelFromOptimizedEncoding:error:] + 9310
    frame #4: 0x00007fff89359451 CoreData`-[NSManagedObjectModel(_NSManagedObjectModelPrivateMethods) initWithContentsOfOptimizedURL:] + 305
    frame #5: 0x00007fff89358d7b CoreData`-[NSManagedObjectModel initWithContentsOfURL:] + 443
    frame #6: 0x00007fff893e9519 CoreData`+[NSManagedObjectModel mergedModelFromBundles:] + 377
    frame #7: 0x00007fff8ded7037 AppKit`-[NSPersistentDocument managedObjectModel] + 301
    frame #8: 0x00007fff8ded70b3 AppKit`-[NSPersistentDocument managedObjectContext] + 75
    frame #9: 0x00007fff8ded6e3f AppKit`-[NSPersistentDocument _persistentStoreCoordinator] + 18
    frame #10: 0x00007fff8ded6b5d AppKit`-[NSPersistentDocument configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:] + 51
    frame #11: 0x0000000100003193 BeanCounter`-[AccountDocument configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:] + 419 at AccountDocument.m:298 
```

从文档中我可以看出，默认实现如下所示：

```
- (id)managedObjectModel
{
    NSManagedObjectModel *result = [NSManagedObjectModel mergedModelFromBundles:nil];
    return result;
} 
```

因此，为了进一步调试问题，我使用以下方法覆盖了该方法：

```
- (id)managedObjectModel
{
    NSBundle *bundle = [NSBundle mainBundle];
    NSURL *url = [bundle URLForResource:@"AccountDocument2" withExtension:@"momd"];
    NSManagedObjectModel *result = [[[NSManagedObjectModel alloc] initWithContentsOfURL:url] autorelease];  
    return result;
} 
```

（感谢 Jeff LaMarche 的想法：http: [//iphonedevelopment.blogspot.com/2009/09/core-data-migration-problems.html](http://iphonedevelopment.blogspot.com/2009/09/core-data-migration-problems.html)）

捆绑包和 url 都指向我期望的位置（并且我已按照 Marcus Zarra 的建议清理项目，因此应用程序包中没有任何杂散的 .mom 或 .momd 捆绑包：[使用 mergeModelFromBundles：和版本控制（CoreData）](https://stackoverflow.com/questions/2282105/using-mergedmodelfrombundles-and-versioning-coredata)）。然而，应用程序在从 url 加载模型时继续崩溃。

我检查了 AccountDocument2.xcdatamodeld 是一个包含两个版本控制模型的包：AccountDocument 2.xcdatamodel 和（原始）AccountDocument.xcdatamodel。文件属性中的“Versioned Core Data Model”弹出菜单设置为“AccountDocument 2”。

两种模型之间的唯一区别是一个实体有一个额外的（和可选的）属性。我的理解是，这使模型有资格进行轻量级迁移。

显然，我在这里做错了什么，但我不知道是什么。任何帮助将不胜感激……</p>

**更新：**

根据 Martin 的建议（以及对 NSPersistentDocument 文档的检查），我尝试将以下代码用于访问器：

```
- (id)managedObjectModel
{
    static id sharedManagedObjectModel = nil;

    if (sharedManagedObjectModel == nil) {
        NSBundle *bundle = [NSBundle mainBundle];
        NSURL *url = [bundle URLForResource:@"AccountDocument2" withExtension:@"momd"];
        sharedManagedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:url];
    }

    return sharedManagedObjectModel;
} 
```

还在崩溃……</p>

**更新**

在 Twitter 上提出一些建议后，我升级到 Xcode 4.3.2，但问题仍然存在。

**愤怒更新**

我刚刚在 Snow Leopard 上使用 Xcode 4.2 创建了版本化模型包 (AccountDocument2.xcdatamodeld)。构建并运行应用程序后，一切都按预期工作。

然后我将 AccountDocument2.xcdatamodeld 文件包带回 Lion 和 Xcode 4.3.2。当我构建并运行该应用程序时，它在加载 .momd 资源时继续崩溃。是的，孩子们，这意味着 Xcode 4.3.x 和数据模型编译器 (MOMC) 是罪魁祸首。除了在 Snow Leopard 上进行所有构建之外，我没有看到其他解决方法。

我不是抨击 Xcode 4 的人，但是当我们发现自己处于工具链无法从不透明规范（.xcdatamodel 和 .xcdatamodeld）生成不透明文件（.mom 和 .momd）的情况下，很难对 Mac 和 iOS 工具的状态持乐观态度。荒谬的是，这些平台的核心组件损坏到我无法在最新版本的 SDK 和开发人员工具上构建和运行我的应用程序的程度。

**它来到了这个更新**

更多证据表明这是 Xcode 4.3.2 中数据模型编译器 (MOMC) 的一个严重错误：如果我将 Xcode 4.2 创建的 Resource 文件夹中的 .momd 包复制到我的项目中，并将它们作为复制文件添加到构建中构建阶段，应用程序工作正常。

我还做了一些测试，删除了各种实体的属性的验证规则和默认值（基于下面 Marcus 的建议。）没有变化，编译器仍然会创建一个无效的 .momd。我还尝试创建一个没有任何更改的版本化模型：编译后的 .momd 继续崩溃。因此，无论您在当前模型中拥有什么（以及它们所代表的数据）都是问题的根源。

另请注意：此错误并非孤立于 NSPersistentDocument （正如我在开始此问题时最初所想的那样。）我可以通过使用`[[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL]`.

现在，我将在 Snow Leopard 上使用 Xcode 4.2 编辑/版本控制我的模型，并将编译后的资源转移到 Lion 上的 Xcode 4.3.2。如果您以任何方式使用 Core Data，我建议您在解决此错误之前也这样做。相信我，如果你不这样做，你会花几天时间弄清楚到底发生了什么。

现在提交雷达…</p>

**雷达更新**

我刚刚提交了这个雷达：

[http://www.openradar.me/11184500](http://www.openradar.me/11184500)

**哦，废话，它一定是狮子更新**

[我刚刚从http://developer.apple.com/downloads](http://developer.apple.com/downloads)下载并安装了 Xcode 4.2 for Lion 工具。Radar 中使用的示例应用程序仍然崩溃。

（注意：您不能安装 Xcode 4.2.1，因为用于签署 DeveloperTools.pkg 的证书已过期。只有 Xcode 4.2 可以使用。）

如果您处于 NDA 之下，您还会发现 beta 工具也无济于事。

希望您有一份带有 Xcode 4.2 的 Snow Leopard 副本：http: [//furbo.org/2012/03/28/vmware-for-developers/](http://furbo.org/2012/03/28/vmware-for-developers/)

**WTF 获取请求与版本化实体和属性更新有关**

通过 Evadne Wu 在 Twitter 上：

[https://twitter.com/#!/evadne/status/187625192342818818](https://twitter.com/#!/evadne/status/187625192342818818)

以及她是如何做到的：

[https://twitter.com/#!/evadne/status/187629091518816258](https://twitter.com/#!/evadne/status/187629091518816258)

（.mom 文件是二进制 plist。）

问题的根源在于单个 Fetch Request。这如何影响数据从一个模型到另一个模型的迁移需要 Apple 的一位工程师来弄清楚。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T23:48:31.860

已编译的 .momd 资源可以在“existingPartner”获取请求从以下位置更改后加载：

```
name == $name 
```

至：

```
name == $NAME 
```

不影响数据持久性的对象模型的一部分破坏了版本控制和轻量级迁移，这是违反直觉的。从文档中可以清楚地看出，情况并非如此：

> Core Data 对版本控制的看法是，它只对影响持久性的模型特性感兴趣。

使用[CHOCKLOCK](http://chocklock.com)的强大功能来修复您的 Fetch Requests 或完全删除它们并依赖[在代码中创建的 NSPredicates](http://furbo.org/2012/04/05/core-data-without-fetch-requests/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:50:22.410

我认为您需要将托管对象模型存储在实例变量中。您正在返回一个自动释放的对象，这可能是导致错误访问的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T04:13:24.860

根据您的理论，这是 MOMC 的问题，您在 mom 中是否有任何验证规则？

我已经看到了验证规则在 4.x MOMC 中不存在的报告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T08:14:39.387

这可能与我在 iOS5 首次推出测试版时使用 Fetch Requests 时遇到的问题有关。它会导致构建警告，并会在启动时使应用程序崩溃。我并没有真正使用获取请求，所以我删除了它并且一切正常： [核心数据警告：“版本哈希信息不适用于所有模型”](https://stackoverflow.com/questions/6978822/core-data-warning-version-hash-information-not-available-for-all-models/9013307#9013307)

# php - 如何访问这个 Javascript 数组（JSON 对象？）？

> ID：10001028
> 
> 赞同：1
> 
> 时间：2012-04-03T20:38:53.507
> 
> 标签：php, javascript, jquery, string

我的问题是，在我之前的人设计的数据库字段很糟糕。我们正在水平访问表格行。

我现在正在使用 PHP 和 jQuery，我正在通过 AJAX 来回传递数据。在 PHP 中，我像这样访问这个数组：

```
$attendance['date_lesson_' . $lessonCount] 
```

其中，lessonCount 是一个从 1-10 递增的数字，即如果`lessonCount = 1`then 以上将是`$attendance['date_lesson_1']`

我正在通过出勤数组`json_encode`

因此，我如何`data_lesson_`在 jQuery 中访问此字段 1 到 10？

我正在尝试做：

```
var lessonCount = 1;

attendance[i].date_lesson_+lessonCount

//do some stuff with attendance.date_lesson_ 
lessonCount++; 
```

在 PHP 中这很容易，因为您将字符串与点连接起来，`"."`但这不是我在 jQuery/JavaScript 中处理的字符串，那么我到底该怎么做呢？

是的，我知道。这很尴尬。我同意 100%。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T20:40:58.390

您需要使用括号表示法：

```
attendance['date_lesson_' + lessonCount] 
```

[点表示法只能与标识符名称一起用作属性名称。](http://mathiasbynens.be/notes/javascript-properties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:43:53.837

只是一个猜测，我不知道那个json是什么样子的。

```
attendance["date_lesson_"+lessonCount] 
```

# ruby - 如何防止方法改变其参数？

> ID：10001031
> 
> 赞同：4
> 
> 时间：2012-04-03T20:39:06.393
> 
> 标签：ruby, string, concatenation, mutable

我想使用的有问题的方法在`gem`这里（第 17-42 行）：[https ://github.com/rails/rails/blob/master/railties/lib/rails/generators/actions.rb](https://github.com/rails/rails/blob/master/railties/lib/rails/generators/actions.rb)

如您所见，`name`在第 19 行分配给第一个 arg，然后在第 23 行`message`分配给`name`，最后`message`在第 26 行用`<<`. 不幸的是，这意味着我作为第一个参数传入的字符串在方法之外发生了变异。

我有一个数组哈希，并按如下方式迭代它们：

```
groups = { foo: %w(foo, bar), bar: %w(foobar) }

groups.each do |group, gems|
  gems.each do |name|
    gem(name, "42")
  end
end 
```

之后，由于内部的突变，我的哈希看起来像这样`gem`：

```
groups => { foo: ["foo (42)", "bar (42)"], bar: ["foobar (42)"] } 
```

如何在不破坏方法的情况下防止这些字符串（以及哈希及其数组）发生突变？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T20:58:04.217

你不能阻止方法改变它的参数（除了提交错误报告，因为这是它不应该做的事情）。

您可以做的是使用您的字符串的克隆调用该方法，如下所示：

```
gem(name.dup, "42") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:58:19.303

您可以使用以下方式调用它`name.dup`：

```
gem(name.dup, "42") 
```

背景：随着`gem(name)`您将参数传递给方法。被调用方法内部的任何修改，也会改变原始变量。

与`name.dup`您一起制作对象的副本。此副本在被调用方法内部进行了修改，但原始值未更改。

* * *

警告：`dup`并不总是有效，这取决于数据。`dup`不做*深拷贝*。看这个例子：

```
arr = ['a', 'b']
arr.dup.map{|x| x << '1'}
p arr #["a1", "b1"] 
```

Explanation: The array `arr` is copied, but not the content inside the array. Inside the `map` you modify the data of the copied array. But the elements of the original and the copied array are the same. So you also change the content of the original array.

# php - Magento 即时编码脚本并生成下载链接

> ID：10001033
> 
> 赞同：0
> 
> 时间：2012-04-03T20:39:25.713
> 
> 标签：php, magento, encoding, ioncube, zend-guard

我正在考虑在我的网站上销售 Magento 模块，需要您的建议，什么是最好的方法。

这是我的想法：

1.  在我的网站上安装 Magento 商店
2.  当客户从我的商店购买模块时 - 他需要输入他的域名
3.  如果订单成功处理并收到付款 - Magento 或独立脚本使用**ionCube**或**Zend Guard** “On-The-Fly”对购买的模块进行编码，并生成仅在提供的域名上工作的许可证。

有没有可以完成所有这些的脚本？还是我应该编写自己的代码？您如何看待编码脚本以保护您的工作？

欢迎任何想法和建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:10:37.277

这确实是一个见仁见智的问题，值得商榷，但以下是我对此的感受：

> 加密代码的缺点：
> 
> *   显然：（几乎）不可能根据自定义需求进行修改或扩展，而无需联系原始开发人员，这会增加最终用户的成本并为“自定义”开发带来更多时间。
> *   为了执行加密代码，需要像 Zend Optimizer 这样的第三方服务器软件。这本身就令人头疼。
> *   二进制和文本数据传输过程中的混乱，最终破坏您的二进制加密数据。
> *   不可能让其他人为您的代码做出贡献以改进它，和/或帮助查找和修复错误。
> *   作为店主或维护者，我不太相信您没有使用从我的商店收集的任何数据。
> *   维护变得混乱。必须重新加密每个版本，可能会非常痛苦。如果您需要向所有使用它的客户提供错误修复，则尤其如此 - 但是，具有“自定义”版本的那些将需要对所有人进行重新加密。除非您使用某种为您自动处理此问题的发布管理。大多数我不确定。

全文：[http ://www.molotovbliss.com/magento-module-developers-stop-encrypting-and-domain-jailing](http://www.molotovbliss.com/magento-module-developers-stop-encrypting-and-domain-jailing)

话虽如此，我已经改变了对家庭电话的看法。自从我发布了这篇文章。

如果您有一个简单的观察者这样做并且做得正确，我可以使用模块打电话给开发人员网站以检查许可（正确地我的意思是不要破坏我的网站，因为您的电话家庭服务器已关闭，并且不要让我的最终用户等待验证），只要它不干扰模块的整体功能，我不会认为混淆这部分代码有任何问题，即它严格用于检查一个许可证，没有加密模块功能。我相信 Boris ( [unigry](http://www.unirgy.com/) ) 这样做并且效果很好，即使我有时不得不跳过很多圈才能让 ionCube loader 在不同的环境中工作，所以这仍然是值得考虑的事情，并且只是对人们的正直抱有希望诚实不盗版。

话虽如此，域广泛接受应该是标准的，我不需要发送支持请求来将我的子域添加到您的域白名单中。就个人而言，如果您可以在不需要 apache/php 模块的情况下进行混淆和编码，那将是一个巨大的优势。一般最终用户有时不知道在哪里删除此类代码。

要回答您的问题，家庭 brew 脚本和流程将是理想的，因为使用 cookie 切割器解决方案更容易进行逆向工程。

# c# - 无法在用 C# 创建的 Notes 文档中获取换行符

> ID：10001036
> 
> 赞同：0
> 
> 时间：2012-04-03T20:39:29.270
> 
> 标签：c#, lotus-notes

我有用于在 Notes 数据库中写入条目的 C# 代码。下面是我正在做的事情的一个简单示例。

```
var text = "Line 1\r\nLine 2\r\nLine 3";
doc.ReplaceItemValue("Body", text);
doc.Save(false, false); 
```

我希望当我在 Notes 中查看文档时，我会看到格式如下的正文：

```
Line 1
Line 2
Line 3 
```

但是，Notes 似乎吃掉了换行符，而我实际看到的是：

```
Line 1Line 2Line 3 
```

我也尝试过使用`Environment.Newline`and `\n`，但这对我在 Notes 中观察到的格式没有任何影响。

我没有做很多 Notes 编程，所以我有点困惑为什么这对我不起作用，因为我遇到的每个示例都与我的代码相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:18:13.320

如果要在文档正文中添加新行，可以使用 NotesRichTextItem 方法，如下所示：

```
//(note this is pseudo-code as I'm typing this from memory)
var richTextItem = new NotesRichTextItem(doc, "Body")
richTextItem.AppendText("Line 1");
richTextItem.AddNewLine(1);

doc.Save(false,false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:27:49.040

如果它是一个简单的文本字段，请将其定义为注释表单中的多值字段，然后您可以执行类似的操作

```
dim item as notesitem
set item = doc.replaceitemvalue("Body","Line 1")
call item.appendToTextlist("Line 2")
call item.appendToTextList("Line 3") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T19:16:10.737

这看起来很像 java API 8.5 之前的换行问题。您应该能够在任何文本项中添加换行符，而不仅仅是 RichText 并且不使用诸如弄乱列表之类的技巧。

在 8.5 中的修复之前，一种解决方法是使用`session.evaluate`来操作公式语言中的文本。

# php - php中的数组和日期

> ID：10001037
> 
> 赞同：0
> 
> 时间：2012-04-03T20:39:32.400
> 
> 标签：php, date, foreach

我的 var_dump 看起来像这样，我知道我收到了错误，因为我传递的是数组而不是字符串。但是我该如何解决呢？

```
array
  0 => 
    array
      'date_submitted' => string '2012-03-22 19:28:22' (length=19)
  1 => 
    array
      'date_submitted' => string '2012-03-28 21:31:28' (length=19) 
```

我的功能

```
function getArticle() {

    $article = new Article('x');
    $arr = $article->getArticles();

    $date= null;
    foreach($arr as $record){
        $currentDate = date('l, F j', strtotime($record['date_submitted']));

        if ($currentDate != $date) {
            echo set_format_date($record['date_submitted'],'l, F j');
        }
        $date = $currentDate;
    }
} 
```

尝试使用`$x=0;`then`$x++;`但返回`Undefined offset: 0` 这样`$record[$x]['date_submitted'];`，它没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:44:49.950

如果您希望在 foreach 循环中操作数组本身，则必须引用该值。

```
foreach($arr as &$record){
  // ...
} 
```

如果您现在在循环内操作 $record， $arr 实际上将包含您操作的值。否则 $record 只是在循环的范围内。

# google-chrome - sudo apt-get install xvfb

> ID：10001038
> 
> 赞同：1
> 
> 时间：2012-04-03T20:39:35.723
> 
> 标签：google-chrome, cucumber, selenium-chromedriver

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following package was automatically installed and is no longer required:
  libruby1.8
Use 'apt-get autoremove' to remove them.
The following extra packages will be installed:
  xserver-common
The following NEW packages will be installed:
  xvfb
The following packages will be upgraded:
  xserver-common
1 upgraded, 1 newly installed, 0 to remove and 308 not upgraded.
1 not fully installed or removed.
Need to get 0 B/899 kB of archives.
After this operation, 2,068 kB of additional disk space will be used.
Do you want to continue [Y/n]? Y
Setting up apt (0.8.16~exp5ubuntu13.2) ...
gpg: symbol lookup error: /usr/local/lib/libreadline.so.6: undefined symbol: UP
gpg: symbol lookup error: /usr/local/lib/libreadline.so.6: undefined symbol: UP
dpkg: error processing apt (--configure):
 subprocess installed post-installation script returned error exit status 127
Errors were encountered while processing:
 apt
E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

为什么我无法安装 xvfb？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:58:22.560

让你的管理员运行这个：

```
su
mkdir temp
mv /usr/local/lib/libreadline* temp
ldconfig 
apt-get update 
```

然后再次运行你的 apt-get

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:57:58.817

似乎包 xvfb 在安装后脚本中使用了命令“gpg”。gpg 命令似乎依赖于 libreadline，它似乎与 gpg 不兼容。

这真的很奇怪。通常 Debian/Ubuntu 系统不会在 /usr/local 下安装任何东西，并且依赖项是有序的。可能是您自己将 libreadline 安装到 /usr/local/lib 中吗？

询问包管理器哪个包拥有文件 /usr/local/lib/libreadline.so.6：

```
dpkg -S /usr/local/lib/libreadline.so.6 
```

如果它告诉您文件所属的包，请尝试删除该包

```
dpkg -P packagename 
```

如果没有包拥有它，请删除该文件。

如果你想保留 /usr/local/lib/libreadline.so.6 并且仍然有一个工作系统，你应该阻止程序使用它，除非明确告知这样做。您可能已经修改了 /etc/ld.so.conf 中的动态链接器配置。撤消这些更改以恢复正常工作的系统。

# jquery - 使用 JSON

> ID：10001040
> 
> 赞同：1
> 
> 时间：2012-04-03T20:39:40.300
> 
> 标签：jquery, json

我现在正在学习 json 并让我的壮举变得湿透，可以这么说，我想知道获取包含 json 信息的文件并用它填充网站的最佳方法是什么。该文件将是这样的：

```
window.test =
{
    "header1":
    [
        { "title": "title1", "author": "author1"},
        { "title": "title2", "author": "author2"},
        { "title": "title3", "author": "author3"}
    ],
    "header2":
    [
        { "title": "title1", "author": "author1"},
        { "title": "title1", "author": "author2"},
        { "title": "title1", "author": "author3"}
    ]
}; 
```

那么代码会是这样的吗？

```
$(function() {
    $.getJSON('jsonFile.js',function(data){
        $.each(data, function(){
            console.log(header1.title);
            console.log(header2.title);
        });
    });
}); 
```

同样，我是 JSON 的新手，所以任何教程、建议以及任何能帮助我理解核心概念的东西都会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T20:52:25.043

你的json：

```
{ 
    "header1": 
    [ 
        { "title": "title1", "author": "author1"}, 
        { "title": "title2", "author": "author2"}, 
        { "title": "title3", "author": "author3"} 
    ], 
    "header2": 
    [ 
        { "title": "title1", "author": "author1"}, 
        { "title": "title1", "author": "author2"}, 
        { "title": "title1", "author": "author3"} 
    ] 
} 
```

你的代码：

```
$(function() {   
    $.getJSON('jsonFile.js',function(data){

        console.log(data.header1[0].title);   
        console.log(data.header2[0].title);     
    });   
}); 
```

（可选）对 data.header1 和 data.header2 执行 each()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:45:54.780

正如其他人所说，您应该删除`window.text`和结尾的分号。然后当你像这样直接读取文件时，它会被编码为文本，所以你需要在迭代之前将它翻译成 JSON。

您可以`var jsonData = JSON.parse(data));`从 data 参数中获取 JSON 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:46:10.510

对于您拥有的 JSON 结构，如下所示的循环应该是正确的。

[**演示**](http://jsfiddle.net/skram/S2M3B/)

```
$.each(test, function(key, val) {
    console.log(key); //this will print the header
    $.each(val, function(index, val1) {
        console.log(val1.title + ' ' + val1.author); //this will print the header contents
    });
}); 
```

# wxpython - 菜单栏出现 50% 的时间，wxPython，Ubuntu 11.10，Python 2.7，wxPython 2.8 GTK2

> ID：10001051
> 
> 赞同：0
> 
> 时间：2012-04-03T20:40:31.390
> 
> 标签：wxpython

我在这里遇到了一个非常不稳定的问题。菜单栏在运行时随机出现。我曾多次尝试在整个程序中重复使用 self.SetMenuBar(self.menuBarr) 但它似乎不会影响成功率。有谁知道任何类型的触发器的位置，它指示菜单栏是否已显示，以便我可以在需要时自动重新加载它？

或者，我在[这里](https://stackoverflow.com/questions/1078661/wxpython-menu-doesnt-display-image)和[这里](https://stackoverflow.com/questions/5023255/wxpython-menu-bar-not-displaying)看到了一些类似（但不同）的帖子，所以如果它与注意到的错误有关，那么有人知道我将如何调整黑客（在第一个链接中）以适用于简单的菜单栏吗？

在初始 wx.Frame 构造函数中，对 menu() 方法的调用已从创建序列的开头移至结尾，这也可能是有用的信息，但它也不影响菜单栏项的可靠性. 没有异常被调用。

提前感谢您提供的任何帮助！

代码：

```
#!usr/bin/python
#Window Manager - Owned by Main

import wx, os, EmptyTestClass, isolationboard, controlpanel, logger, configmenu

ID_BUTTON=100
ID_EXIT=200
ID_SPLITTER=300

class WindowMan(wx.Frame):
    def __init__(self, parent, gsettings):
        logprefix='WindowMan Entry: '
        self.width=gsettings['width']
        self.height=gsettings['height']
        self.title=gsettings['title']
        self.dirname='~/'
        self.main=parent
        self.logman=logger.logg(logprefix)
        self.app=wx.App(False)
        super(WindowMan, self).__init__(None, title=self.title, size=(int(self.width), int(self.height)))
        try:
            self.menu()
        except Exception, e:
            self.logman.error("error creating file menu: "+str(e))
            print e
        self.splitter=wx.SplitterWindow(self, ID_SPLITTER, style=wx.SP_3D)
        self.testnames, self.testclasses=self.gettestnames(gsettings['tests'])
        self.sashpos=32
        self.InitTests()
        self.InitUI()
        self.show1()

    def gettestnames(self, tests): #Helper which parses the test settings array
        testnames=[]
        testclasses=[]
        testarr=tests.split(',')
        for currtest in testarr:
            temp=currtest.split(';')
            if temp==None:
                self.logman.error("Unable to load test "+currtest)
            else:
                testnames.append(temp[0])
                testclasses.append(temp[1])
        return testnames, testclasses

    def menu(self):
        #Create the Menu
        filemenu= wx.Menu()
        menuOpen = filemenu.Append(wx.ID_OPEN, "&Open"," Open a file to edit")
        menuAbout= filemenu.Append(wx.ID_ABOUT, "&About"," Information about this program")
        menuExit = filemenu.Append(wx.ID_EXIT,"E&xit"," Terminate the program")
        menuDConfig=filemenu.Append(wx.ID_PROPERTIES, "&Configuration", "Edit Configuration")
        self.menuBarr = wx.MenuBar()
        self.menuBarr.Append(filemenu,"&File") # Adding the "filemenu" to the MenuBar
        print self.SetMenuBar(self.menuBarr)
        # Events.
        self.Bind(wx.EVT_MENU, self.OnOpen, menuOpen)
        self.Bind(wx.EVT_MENU, self.OnExit, menuExit)
        self.Bind(wx.EVT_MENU, self.OnAbout, menuAbout)
        self.Bind(wx.EVT_MENU, self.OnConfig, menuDConfig)

    def OnConfig(self, e):
        self.logman.debug("Config menu called")
        self.configframe=configmenu.configmenu(self)

    def InitUI(self): 
        try:
            self.panel=controlpanel.controlpanel(self.splitter, self, self.testnames) #splitter must be parent
            self.splitter.SplitHorizontally(self.panel, self.test[0],self.sashpos) #Splitter function, 40 specifies size of top section
            self.splitter.Bind(wx.EVT_SPLITTER_SASH_POS_CHANGED,self.fixsash)
            self.splitter.SetMinimumPaneSize(20)
            self.currwindow=self.test[0] #Start with first test as default window
            self.logman.info("Main UI Constructed Successfully")
        except Exception, e:
            self.logman.error("Error creating control panel object: "+str(e))

    def InitTests(self):
        self.test=[]
        for classtorun in self.testclasses:
            try:
                if classtorun=="isolation":
                    self.test.append(isolationboard.isolation(self.splitter))
                elif classtorun=="emptytest":
                    self.test.append(EmptyTestClass.emptytest(self.splitter))
                else:
                    self.logman.error("Encountered unknown test class reference: "+str(classtorun)+". Please check config file.")
                    raise Exception('Unknown Test Class Implemented In Config File: '+str(classtorun))
            except Exception as inst:
                self.logman.error(inst)
        self.logman.info("Main UI Constructed Successfully")

    def show1(self): #Shows and starts app
        self.Centre()
        self.Show()
        self.app.MainLoop()

    def OnAbout(self,e):
        # Create a message dialog box
        dlg = wx.MessageDialog(self, "blahblahblah")
        dlg.ShowModal() # Shows it
        dlg.Destroy() # finally destroy it when finished.

    def OnExit(self,e):
        self.Close(True)  # Close the frame.

    def OnOpen(self,e): #Not used yet, taken from wxPython example for convenience
        """ Open a file"""
        dlg = wx.FileDialog(self, "Choose a file", self.dirname, "", "*.*", wx.OPEN)
        if dlg.ShowModal() == wx.ID_OK:
            self.filename = dlg.GetFilename()
            self.dirname = dlg.GetDirectory()
            f = open(os.path.join(self.dirname, self.filename), 'r')
            self.control.SetValue(f.read())
            f.close()
        dlg.Destroy()

    def fixsash(self, event):  #Fixes splitter window if accidentally resized.
        self.splitter.SetSashPosition(self.sashpos) 

    def switchpanel(self, event):
        try:
            button=event.GetEventObject()
            #self.Hide()
            self.logman.debug("pressed button: "+button.GetLabel())
            testtoswitch=self.testnames.index(button.GetLabel())
            self.splitter.Unsplit(self.currwindow)
            self.currwindow=self.test[testtoswitch]
            self.splitter.SplitHorizontally(self.panel, self.test[testtoswitch],self.sashpos)
            self.splitter.SetMinimumPaneSize(20)
            self.splitter.Bind(wx.EVT_SPLITTER_SASH_POS_CHANGED,self.fixsash)
            #self.Show()
        except Exception, e:
            self.logman.error("Error in Panel switch: "+str(e)) 
```

**更新** 现在这开始变得非常奇怪。我已经通过以管理员权限执行程序解决了这个问题。我的任何脚本都不会删除 shell 命令，所以我完全不知道为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:15:24.277

菜单是否像 Mac 一样出现在任务栏区域？我认为在较新的 Ubuntu 版本中有一些禁用菜单的设置。我不记得它现在叫什么了，但我认为你必须安装一个插件，否则它会根据主题被禁用。另请参阅[http://wxpython-users.1045709.n5.nabble.com/help-no-show-menubar-in-ubuntu-td3292261.html](http://wxpython-users.1045709.n5.nabble.com/help-no-show-menubar-in-ubuntu-td3292261.html)

你没有提到你正在使用哪个 wxPython。如果不是 2.8.12，请尝试升级到该版本并查看是否已修复：[https ://groups.google.com/forum/?fromgroups#!topic/wxpython-users/7tx9i1TpfZc](https://groups.google.com/forum/?fromgroups#!topic/wxpython-users/7tx9i1TpfZc)

# python - 尝试访问同一个表（SQLite）时，两个使用 SqlAlchemy 的程序会发生冲突吗？

> ID：10001052
> 
> 赞同：3
> 
> 时间：2012-04-03T20:40:33.273
> 
> 标签：python, sqlite, orm, sqlalchemy, declarative

我将有两个独立的程序（使用 SqlAlchemy / ORM / Declarative）
，它们将不可避免地尝试同时访问相同的数据库文件/表（SQLite）。
他们都可能想要读取或写入该表。
发生这种情况时会不会发生冲突？
如果答案是肯定的，该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:48:48.900

正如您所描述的，Sqlite 可以抵抗任何问题。[http://www.sqlite.org/howtocorrupt.html](http://www.sqlite.org/howtocorrupt.html)为您提供了可能导致问题的详细信息，并且它们通常与代码可能意外执行的任何操作相隔离。

如果您对应用程序数据访问的性质感到担忧，请酌情使用`BEGIN TRANSACTION`和`COMMIT`/ `ROLLBACK`。如果您的事务是单一查询访问（也就是说，您不是在一个查询中读取一个值，然后相对于您已经读取的内容在另一个查询中更改它），这应该是没有必要的。

# sockets - C - 使用信号时 write() 对关闭的 tcp 连接的影响（SIGPIPE，SIG_IGN）；

> ID：10001057
> 
> 赞同：0
> 
> 时间：2012-04-03T20:40:59.870
> 
> 标签：sockets, tcp

关闭连接是指另一端优雅地关闭它。我希望从`write()`as 返回值中收到 0，但如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:53:37.543

确切的行为可能取决于底层操作系统，但通常你应该得到一个错误，即，`write`将返回`-1`并设置`errno`（`ECONNRESET`例如）。

# c# - 用于在查询中预先加载的动态 Include 语句 - EF 4.3.1

> ID：10001061
> 
> 赞同：16
> 
> 时间：2012-04-03T20:41:13.320
> 
> 标签：c#, entity-framework, c#-4.0, entity-framework-4.1, entity-framework-4.3

我有这个方法：

```
public CampaignCreative GetCampaignCreativeById(int id)
        {
            using (var db = GetContext())
            {
                return db.CampaignCreatives
                    .Include("Placement")
                    .Include("CreativeType")                    
                    .Include("Campaign")
                    .Include("Campaign.Handshake")
                    .Include("Campaign.Handshake.Agency")
                    .Include("Campaign.Product")
                    .AsNoTracking()
                    .Where(x => x.Id.Equals(id)).FirstOrDefault();
            }
        } 
```

我想使包含列表动态化。我试过：

```
public CampaignCreative GetCampaignCreativeById(int id, string[] includes)
        {
            using (var db = GetContext())
            {
                var query = db.CampaignCreatives;

                foreach (string include in includes)
                {
                    query = query.Include(include);
                }

                return query.AsNoTracking()
                    .Where(x => x.Id.Equals(id)).FirstOrDefault();                    
            }
        } 
```

但它没有编译。我收到了这个错误：

*无法将类型“System.Data.Entity.Infrastructure.DbQuery”隐式转换为“System.Data.Entity.DbSet”。存在显式转换（您是否缺少演员表？）*

有谁知道如何使包含列表动态化？

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-10-04T11:09:16.917

我更喜欢定义包含的非字符串表达方式。主要是因为它不依赖于魔术字符串。

对于示例代码，它看起来像这样：

```
public CampaignCreative GetCampaignCreativeById(int id) {
    using (var db = GetContext()) {
        return db.CampaignCreatives
            .Include(cc => cc.Placement)
            .Include(cc => cc.CreativeType)                    
            .Include(cc => cc.Campaign.Select(c => 
                 c.Handshake.Select(h => h.Agency)))
            .Include(cc => cc.Campaign.Select(c => c.Product)
            .AsNoTracking()
            .Where(x => x.Id.Equals(id))
            .FirstOrDefault();
    }
} 
```

为了使这些动态化，您可以这样做：

```
public CampaignCreative GetCampaignCreativeById(
    int id, 
    params Expression<Func<T, object>>[] includes
) {
    using (var db = GetContext()) {
        var query = db.CampaignCreatives;
        return includes
            .Aggregate(
                query.AsQueryable(), 
                (current, include) => current.Include(include)
            )
            .FirstOrDefault(e => e.Id == id);
    }
} 
```

这是这样使用的：

```
var c = dataService.GetCampaignCreativeById(
     1, 
     cc => cc.Placement, 
     cc => cc.CreativeType, 
     cc => cc.Campaign.Select(c => c.Handshake.Select(h => h.Agency)),
     cc => cc.Campaign.Select(c => c.Product
); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-03T20:46:49.010

使`query`变量可查询：

```
public CampaignCreative GetCampaignCreativeById(int id, string[] includes)
{
    using (var db = GetContext())
    {
        var query = db.CampaignCreatives.AsQueryable();
        foreach (string include in includes)
        {
            query = query.Include(include);
        }

        return query
            .AsNoTracking()
            .Where(x => x.Id.Equals(id))
            .FirstOrDefault();                    
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T22:27:25.887

`IQueryable<CampaignCreative>`通过使用而不是给编译器一个提示`var`也可以。

```
IQueryable<CampaignCreative> query = db.CampaignCreatives;
// or
DbQuery<CampaignCreative> query = db.CampaignCreatives; 
```

使用编译器`var`推断which 比返回的类型更具体（即(=base class of ) implementation ），因此您不能再将结果分配给变量。因此编译器错误就行了。`DbSet<T>``query``Include``DbQuery<T>``DbSet<T>``IQueryable<T>``query``query = query.Include(include)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-14T21:31:51.207

我编写了这个方法来根据它们的类型动态检索任何一组实体。我使用该`IDbEntity`接口提供了一个有效的密钥来搜索所有类中的 userId。该`Util.GetInverseProperties<T>()`方法用于获取`Include`语句中所需的属性。

```
public IEnumerable<T> GetItems<T>(string userId) where T : class, IDbEntity
{
    var query = db.Set<T>().Where(l => l.UserId==userId);

    var props = Util.GetInverseProperties<T>();
    foreach (var include in props)
        query = query.Include(include.Name);

    return query
        .AsNoTracking()
        .ToList();
} 
```

```
public interface IDbEntity
{
    public string UserId { get; set; }
} 
```

```
public static List<PropertyInfo> GetInverseProperties<T>()
{
    return typeof(T)
        .GetProperties()
        .Where(p => Attribute.IsDefined(p, typeof(InversePropertyAttribute)))
        .ToList();
} 
```

# ios - 直到drawRect之后才知道UIView的最终帧大小？

> ID：10001064
> 
> 赞同：0
> 
> 时间：2012-04-03T20:41:40.860
> 
> 标签：ios, core-graphics

我在 UIView 中绘制了一个数据网格，在创建 UIView 时`drawRect`我不知道最终大小，因为列数和行数是动态的。当然，我可以在创建 UIView 之前进行计算，但这并没有什么意义，因为我还将在 UIView 子类中进行这些计算，而不必提取它。

那么我该如何处理呢？我是否使用非常大的框架进行初始化并在 drawRect 完成后对其进行调整？

我还将将此视图设置为 UIScrollView 的内容，以防它太大而无法在分配给它的区域中查看。

我要绘制的视图如下所示：![定价网格](../Images/a0576b41431137bdbb0668616fb96bae.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:12:15.440

也许其他人有另一种解决方案，但我认为在你的情况下我会覆盖 setFrame: 并调用 setNeedsDisplay 以便在你的框架更改后调用 drawRect 。您是否已经尝试过这种方法？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T04:44:30.843

*   在您的视图中添加一个方法，根据其数据确定它应该有多大。这需要与`drawRect:`.
*   在您的视图控制器中，当您设置视图时，调用该方法以获取该大小。
*   然后将视图的边界和/或框架设置为该大小。
*   并将滚动视图设置`contentSize`为该大小。

关键概念是：将“确定我的视图的东西有多大”和“绘制我的视图的东西”的想法分开。现在，您正在绘制时进行尺寸计算，但您需要能够更早地进行。

如果您想变得花哨，可以考虑`layoutSubviews`在视图的超级视图中进行覆盖——这将是检查视图所需大小是否已更改的好地方，然后更新视图的大小和滚动视图的`contentSize`. 但没有必要这样做才能开始。

# c# - Sharepoint 2010 客户端 OM - 如何获得最后批准的文档版本？

> ID：10001065
> 
> 赞同：1
> 
> 时间：2012-04-03T20:41:46.393
> 
> 标签：c#, sharepoint-clientobject

我正在尝试将 sharepoint Foundation 2010 用作网站的文件存储。每个文档更新都必须经过一个批准周期，最终达到批准状态以显示在最终用户的网站上。在 sharepoint 中更新文档时，即使先前的版本已获得批准，状态也会重置为“草稿”。这是预期的行为。

File.Versions 给了我版本列表。

如何获得上次“批准”的版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:26:58.547

您将需要遍历 ListItem 的版本并找到已发布的最新版本。使用[SPListItemVersionCollection](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitemversioncollection.aspx)循环浏览版本并检查[SPFileLevel](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfilelevel.aspx)

根据[Sebastian Wojciechowski对](http://msdn.microsoft.com/en-us/library/community/history/microsoft.sharepoint.splistitemversioncollection%28v=office.12%29.aspx?id=1)[SPListItemVersionCollection](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitemversioncollection.aspx)上 MSDN 文章的社区补充

```
SPListItem.Versions[0] //this is current version of the item
SPListItem.Versions[1] //this is previous version of the item
SPListItem.Versions[SPListItem.Versions.Count - 1] //this is first version of the item 
```

版本以相反的顺序（从最新到最旧）索引，因此您的代码将类似于：

```
// Retrieve all versions
SPListItemVersionCollection itemVersions = item.Versions;
for (int i = 0; i < itemVersions.Count - 1; i++)
{
    // Check if version is published
    if (itemVersions[i].Level == SPFileLevel.Published)
    {
        return itemVersions[i];
    }
} 
```

# html - 两者都需要 wmode="transparent" 属性吗 To get flash to sit behind html elements on a page I read that I have to add this inside the object tag: <param 0="" 1148="" name="wmode" va="" 问问题="" user967451="" 2012-04-03t20:41:56.877="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" to="" get="" flash="" sit="" behind="" html="" elements="" a="" page="" i="" read="" that="" have="" add="" inside="" the="" object="" tag:="" <param="" value="transparent"> And this to the embed tag: wmode="transparent" Is it necessary to add both? Because in FF I got it to work with just the second, just wondering if that may cause issues in other browsers and devices. What is the rationale behind "0xHHHHHHHH" formatted Microsoft error codes? Why does Microsoft tend to report "error codes" as hexadecimal values? Error codes are 32-bit double word values (4 byte values.) This is likely the raw integer return code of whatever C-style function has reported an error. However, why report the error to a user in hexadecimal? The "0x" prefix is worthless, and the savings in character length is minimal. These errors end up displayed to end users in Microsoft software and even on Microsoft websites. For example: 0x80302010 is 10 characters long, and very cryptic. 2150637584 is the decimal equivalent, and much more user friendly. Is there any description of the "standard" use of a 32-bit field as an error code mechanism (possibly dividing the field into multiple fields for developer interpretation) or of the logic behind presenting a hexadecimal code to end users? htmlflash 4 1 回答 1 This answer is useful 0 有的浏览器用的有的用的<embed>，都需要加上wmode才能支持所有浏览器 于 2012-04-03T20:45:14.923 回答 Related 1 vb.net - VB.Net Len（结构）=结构中的无效类型 1 php - 使用 php for API 1.1 读取 Twitter JSON 数据 2 jquery - 如何动态创建和删除复杂的 div 并在其中获取输入以创建动态链接和文本区域？ 1 c# - 如何配置 Code First Entity Framework 多对多映射表？ 1 haskell-snap-framework - Snap：抢劫模板路径 2 android - 如何在 webview 上播放视频 1 zend-framework - Zend：在 CLOB 和 BLOB 中插入大数据？ 1 php - 输入文本中的 JQuery 移动和 ASCII 字符 1 java - 当没有对该类的对象进行提交时，数据如何存储在“歌手”表中？ 1 wordpress - get_permalink() 为某些页面 ID 返回空值 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10001067
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, flash

To get flash to sit behind html elements on a page I read that I have to add this inside the object tag:

```
<param name="wmode" value="transparent"></param> 
```

And this to the embed tag:

```
wmode="transparent" 
```

Is it necessary to add both? Because in FF I got it to work with just the second, just wondering if that may cause issues in other browsers and devices.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:45:14.923

有的浏览器用的`<object>`有的用的`<embed>`，都需要加上wmode才能支持所有浏览器

# error-handling - “0xHHHHHHHH”格式的 Microsoft 错误代码背后的基本原理是什么？

> ID：10001068
> 
> 赞同：-4
> 
> 时间：2012-04-03T20:41:57.873
> 
> 标签：error-handling

为什么微软倾向于将“错误代码”报告为十六进制值？

错误代码是 32 位双字值（4 字节值）。这可能是任何 C 样式函数报告错误的原始整数返回代码。

但是，为什么要以十六进制向用户报告错误？“0x”前缀毫无价值，节省的字符长度也很少。这些错误最终会在 Microsoft 软件甚至 Microsoft 网站上显示给最终用户。

例如：

*   0x80302010 有 10 个字符长，非常神秘。
*   2150637584 是十进制等价物，对用户更友好。

是否有任何描述将 32 位字段作为错误代码机制的“标准”使用（可能将字段划分为多个字段以供开发人员解释）或向最终用户呈现十六进制代码背后的逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:53:45.543

关于十六进制或十进制错误代码是否对用户更友好，这有点主观。这是十六进制错误代码明显更方便的场景，这可能是首先使用十六进制错误代码的部分原因。

考虑[Active Directory 服务接口的 Win32 错误代码](http://msdn.microsoft.com/en-us/library/aa746529%28v=vs.85%29.aspx)文档，ADSI 使用格式为 的错误代码`0x8007XXXX`，其中`XXXX`对应于映射到 Win32 错误代码的 DWORD 值。

这使得获取相应的 Win32 错误代码变得非常容易，因为您只需去掉最后 4 位数字即可。这对于十进制错误代码表示是不可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T20:49:14.377

我们只能猜测原因，所以这个问题不能肯定回答。但是让我们猜测一下：

一个原因可能是使用十六进制数字，您*知道*该数字将有 8 位数字。如果它有更多或更少的数字，则该数字是“损坏的”（例如，客户输入错误）。对于十进制数，相同值的位数会有所不同。

此外，对于开发人员来说，十六进制数字比十进制数字更方便和自然。例如，如果某些信息被编码为位标志，您可以轻松地以十六进制数字手动破译它们，而不是十进制数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:03:45.603

对此的中间答案是，将数字格式化为 IPv4 地址会更加方便用户，同时保留某种有助于开发人员的格式。

虽然 TBH 我认为十六进制很好，但假设的非技术用户不知道 0x1234ABCD 的含义比 1234101112 或“fwip 阀上的破裂角销”更多。

# c# - VSTO - Best place to store Excel workbook settings

> ID：10001069
> 
> 赞同：2
> 
> 时间：2012-04-03T20:41:58.413
> 
> 标签：c#, visual-studio-2010, vsto

I have a legacy Excel AddIn implemented in VBA which I am slowly porting to .net using VSTO. Using this AddIn I am storing settings per workbook within a hidden sheet. I was wondering if there is a better approach to do this using VSTO.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:16:54.807

您可以使用[自定义文档属性](http://msdn.microsoft.com/en-us/library/dhxe2d75.aspx)来存储设置。

# php - 结合 JQuery/PHP 将点击记录到数据库中？

> ID：10001075
> 
> 赞同：4
> 
> 时间：2012-04-03T20:42:28.990
> 
> 标签：php, jquery, database

![在此处输入图像描述](../Images/00f46849f565aa62501b0070bdaaa56d.png)

附图显示了我正在构建的搜索引擎的结果页面。对于每个返回结果，用户可以单击结果（即“食品科学”），它将展开手风琴式以显示有关该特定结果的信息。

我想记录用户每次单击结果（用于学习/智能目的）并将其存储在我创建的数据库表中，该表存储会话 ID、查询、结果的位置和顺序用户点击了该项目。

使用 JQuery，我已经有一个函数可以提取被点击结果的标题，并且我已经将它设置在我想要记录点击的位置，但我不知道该怎么做，因为 JQuery 是客户端和 PHP是服务器端。

**如何使用 JQuery 触发 PHP 函数，以便我可以查询数据库以将点击日志插入到我的表中？**

下面是 JQuery 函数。

```
$(document).ready(function() { 
    $('.accordionButton').click(function(e) {
        if($(this).next().is(':hidden') == true) {
            $(this).addClass('on');
            $(this).next().slideDown('normal');
            $(this).next().slideDown(test_accordion);
            // SEND CLICK ACTION TO LOG INTO THE DATABASE
            alert($(this).find('h3:last').text()); // displays the title of the result that was just clicked
         } 
         else {
            $(this).removeClass('on');
            $(this).next().slideUp('normal');
            $(this).next().slideUp(test_accordion);
         } 
     });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:30:05.417

你可以做这样的事情（未经测试）：

在 click 函数之外定义一个 javascript 变量来跟踪点击的顺序：

```
var order = 0; 
```

将此添加到您的点击功能中，在底部：

```
order++;
var sessionID = $("input[name='sessionID']").val();  // assuming you have sessionID as the value of a hidden input
var query = $("#query").text();    // if 'query' is the id of your searchbox
var pos = $(this).index() + 1;     // might have to modify this to get correct index
$.post("logClick.php", {sessionID:sessionID, query:query, pos:pos, order:order}); 
```

在名为“logClick.php”的 php 脚本中（在同一目录中）：

```
<?php
    // GET AJAX POSTED DATA
    $str_sessionID = empty($_POST["sessionID"]) ? '' ; $_POST["sessionID"];
    $str_query = empty($_POST["query"]) ? '' ; $_POST["query"];
    $int_pos = empty($_POST["pos"]) ? 1 ; (int)$_POST["pos"];
    $int_order = empty($_POST["order"]) ? 1 ; (int)$_POST["order"];

    // CONNECT TO DATABASE
    if ($str_sessionID && $str_query) {
        require_once "dbconnect.php";    // include the commands used to connect to your database. Should define a variable $con as the mysql connection

        // INSERT INTO MYSQL DATABASE TABLE CALLED 'click_logs'
        $sql_query = "INSERT INTO click_logs (sessionID, query, pos, order) VALUES ('$str_sessionID', '$str_query', $int_pos, $int_order)";
        $res = mysql_query($sql_query, $con);
        if (!$res) die('Could not connect: ' . mysql_error());
        else echo "Click was logged.";
    }
    else echo "No data found to log!";
?> 
```

如果要查看脚本中是否发生错误，可以添加回调函数作为 $.post() ajax 方法的第三个参数：

```
$.post("logClick.php", {sessionID:sessionID, query:query, pos:pos, order:order},
    function(result) {
      $('#result').html(result);  // display script output into a div with id='result'
      // or just alert(result);
    })
); 
```

编辑：如果您需要 order 变量的值在页面加载之间保持不变，因为您对结果进行了分页，那么您可以使用 GET 或 POST 在页面之间传递此变量的值。然后，您可以将值保存在隐藏的输入中，并使用 jQuery 轻松读取它。（或者您也可以使用 cookie）。

示例（将其放在每个结果页面中）：

```
<?php
   $order = empty($_POST["order"]) ? $_POST["order"] : "0";
   $html="<form id='form_session' action='' name='form_session' method='POST'>
        <input type='hidden' name='order' value='$order'>
    </form>\n";
   echo $html;
?> 
```

在您的 jQuery 中，只需更改`var order = 0;`为

```
var order = $("input[name='order']").val(); 
```

然后，当用户点击页面链接时，阻止默认链接动作，设置订单值和表单动作，然后使用 javascript/jQuery 提交表单：

```
$("a.next_page").click(function(event) {
  event.preventDefault();
  var url = $(this).attr("href");
  $("input[name='order']").val(order);
  $("#form_session").attr('action', url).submit();
}); 
```

所有“下一个”和“上一个”分页链接必须被赋予相同的类（即“下一个页面”（在本例中）。

编辑：如果您的分页如下：

```
<div class='pagination'>
    <ul><li><a href='page1.url'>1</a></li>
        <li><a href='page2.url'>2</a></li>
    </ul>
</div> 
```

然后改变这个：

```
$("div.pagination a").click(function(event) {
etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:51:30.927

使用 jQuery AJAX 向 PHP 页面发送请求。有关更多信息，请参见此处（非常简单）：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

在这种特殊情况下，由于您不需要返回任何内容，因此最好只使用 jQuery 中的 POST 或 GET 方法：

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/) http://api.jquery.com/jQuery.get/

就像是：

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: "name=John&location=Boston"
  success: function(data){
     alert('done');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T20:52:41.023

这很简单，您需要一个 PHP 脚本来处理从您的搜索页面发送的 AJAX 请求。

在您的搜索页面中，您需要添加一个 .ajax 来为您的脚本创建一个 AJAX 请求。您需要了解的有关 AJAX 的所有信息都可以在这里找到：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

在您的 PHP 脚本中，您将处理数据库操作，使用 GET 或 POST 数据通过 Ajax 为脚本提供一个 ID。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T20:55:25.890

使用阿贾克斯。编写一个简单的 php 脚本，将点击写入数据库。我不知道您如何准确记录数据库中的点击，但您可以将点击的项目唯一标识符发送到带有 ajax 的 php 脚本，例如通过 POST 变量。

一个小例子，点击：

```
$.post(
'count_click.php', 
{ id: "someid" },
function(data) {
// data = everything the php-script prints out
}); 
```

php：

```
if (isset($_POST['id'])) {
// add a click in the database with this id
} 
```

# c# - 如何搜索查询结果集中所有字段的内容？

> ID：10001079
> 
> 赞同：3
> 
> 时间：2012-04-03T20:42:41.070
> 
> 标签：c#, .net, sql-server, tsql, linq-to-sql

我正在尝试创建一个通用搜索功能，它将搜索结果集中每个字段的内容。

例如，如果我要在 TSQL 中编写一个函数，该函数返回一个包含 100 行和字段的结果集，`TicketID`并且我想在每个字段中搜索字符串“Mike”的每条记录。`FirstName``LastName``Comment`

因此，基本上，如果“Mike”一词出现在这些字段中的任何一个中，那么该记录将包含在我的搜索中。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:39:33.310

该方法的条目将是一个 DataTable，其中包含一组查询的执行结果。然后你需要以这种方式迭代行和列：

```
foreach (DataRow dr in yourDataTable.Rows)
{
    foreach(DataColumn col in yourDataTable.Columns)
    {
        try
        {
            if (dr[col].ToString().Contains("Mike"))
            {
                //Save this one!
            }
        }
        catch
        { 
            //it was not a string, go on then.
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:59:29.990

您可以创建一个完整的全文索引。您可以通过视图获得整个表或表中选定列的此索引。 [http://msdn.microsoft.com/en-us/library/ms142575.aspx#examples](http://msdn.microsoft.com/en-us/library/ms142575.aspx#examples) 它有自己的语法，但它是 TSQL 查询的一部分，可以与常规列搜索结合使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T20:58:35.777

```
from x in someTableOrQuery
where x.FirstName.Contains(str) || x.LastName.Contains(str) || ...
select x 
```

这只是普通的 C#。不需要任何技巧。

请注意，这将转换为 SQL 中的 LIKE 表达式。但是您不需要进行容易出现错误的手动字符串连接（在这种情况下不是 SQL 注入）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T21:06:19.267

或者您可以使用 SqlMethods.Like 方法，这样您就可以在表达式中搜索特定模式。

像这样的东西：

```
where SqlMethods.Like(str,"%Mike%"); 
```

希望这可以帮助！

# c# - 从 XML 生成 XmlWriter c# 代码

> ID：10001082
> 
> 赞同：0
> 
> 时间：2012-04-03T20:42:54.977
> 
> 标签：c#, xml, xmlwriter

我有一个需要使用 XmlWriter 在代码中创建的 XML 文件。是否有任何代码生成器可以获取 XML 并生成 c# 代码行以使用 XmlWriter 重新创建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:42:49.057

您可以编写自己的[T4 模板](http://msdn.microsoft.com/en-us/library/bb126445.aspx)

以下是一些帮助您入门的代码：

```
<#@ template language="C#" #>
<#@ assembly name="System.Core" #>
<# assembly name="System.Xml" #>
<#@ import namespace="System.Xml" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="System.IO" #>
using System;
using System.Text;
using System.Xml;

 namespace Test
 {
    public class TestClass
   {
    #region Methods

        public static void WriteXml()
        {

    using( var writer = XmlWriter.Create("out.xml"))
    {
<#
  foreach (XmlNode node in this.GetNames())   
{
    if(node.NodeType == XmlNodeType.Element) {
#>
        writer.WriteStartElement(@"<#= node.Name  #>");
<# }
 if(node.NodeType == XmlNodeType.Comment) {
#>
    writer.WriteComment(@"<#= node.Value   #>");
<# }
}
#>
    }
  }

    #endregion
 }
}
<#+

 public IEnumerable<XmlNode> GetNames()
 {
    List<string> result = new List<string>(); 
    XmlDocument doc = new XmlDocument();        
    string absolutePath = @"c:\data\XMLFile1.xml";                
    doc.Load(absolutePath);
    foreach (XmlNode node in doc.ChildNodes)
    {
        yield return node;
    }

}
#> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T00:38:12.060

我接受了 Anurag 的回复，对其进行了修改，这对我有用：

```
<#@ template language="C#" #> 
<#@ assembly name="System.Core" #> 
<#@ assembly name="System.Xml" #> 
<#@ import namespace="System.Xml" #> 
<#@ import namespace="System.Collections.Generic" #> 
<#@ import namespace="System.IO" #> 
using System; 
using System.Text; 
using System.Xml; 

 namespace AutoGenerateXmlWriteCode 
 { 
    public class TestClass 
   { 
    #region Methods 

        public static void WriteXml() 
        { 
            XmlWriterSettings settings = new XmlWriterSettings();
            settings.Indent = true;
            settings.IndentChars = "\t";
            settings.OmitXmlDeclaration = true;

            using( var writer = XmlWriter.Create("out.xml", settings)) 
        { 
<# 
  foreach (XmlReader node in this.GetNames())    
    { 
        if(node.NodeType == XmlNodeType.Element) { 
#> 
            writer.WriteStartElement(@"<#= node.Name  #>"); // <#= node.Name  #> 
<#
            if (node.HasAttributes)
            {
                node.MoveToFirstAttribute();
#> 
                    writer.WriteAttributeString(@"<#= node.Name  #>", @"<#= node.Value  #>");
 <#
                while (node.MoveToNextAttribute())
                {
 #> 
                    writer.WriteAttributeString(@"<#= node.Name  #>", @"<#= node.Value  #>");
 <#
               }
                node.MoveToElement();
            }

            if (node.IsEmptyElement){
#>

            writer.WriteEndElement(); // <#= node.Name  #> 
<#
            }
        } 
        if(node.NodeType == XmlNodeType.Text) { 
#> 
            writer.WriteValue(@"<#= node.Value  #>");
<#      } 
        if(node.NodeType == XmlNodeType.EndElement) { 
#> 
            writer.WriteEndElement();  // <#= node.Name  #>
<#      } 
} 
#> 
    } 
  } 

    #endregion 
 } 
} 

<#+ 

 public IEnumerable<XmlReader> GetNames() 
 { 
    List<string> result = new List<string>();  
    string absolutePath = @"d:\MyFile.xml";                 
    XmlReader rdr = XmlReader.Create(absolutePath);
    while (rdr.Read())
    {
        yield return rdr;
    }
} 

#> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:48:59.180

Visual Studio 的 Xsd.exe 可以帮助你

# jquery - symfony2 会话需要 2 次刷新才能更新

> ID：10001083
> 
> 赞同：0
> 
> 时间：2012-04-03T20:43:02.617
> 
> 标签：jquery, session, symfony

我创建了一个控制器来在每个页面上运行，它除了一个方面外都在工作..

在我的`base.html.twig`文件中，我放了：`{% render "EcsCrmBundle:Module:checkClock" %}`

所以，我有一个控制器调用`ModuleController`，`checkClockAction`其中包含以下代码：

```
<?php

namespace Ecs\CrmBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Ecs\CrmBundle\Entity\TimeClock;

class ModuleController extends Controller
{
    public function checkClockAction() {
        $em = $this->getDoctrine()->getEntityManager();
        $user = $this->get('security.context')->getToken()->getUser();
        $today = time();
        $start = date('Y-m-d 00:00:00');
        $entities = $em->getRepository('EcsCrmBundle:TimeClock');
        $query = $entities->createQueryBuilder('tc')
                ->select('tc.in1, tc.out1, tc.in2, tc.out2, tc.in3, tc.out3')
                ->where('tc.noteBy = :user')
                ->andWhere('tc.daydate >= :start')
                ->setParameter('user', $user->getid())
                ->setParameter('start', $start)
                ->setMaxResults('1')
                ->getQuery();

        $entities = $query->getOneOrNullResult();
         if (empty($entities)) {
            $ents = "clocked_out";
            $this->get('session')->set('clockedin', 'clocked_out');
         } else {
            for ($i=1; $i <= 3; $i++) {
                if ($entities["in$i"] != NULL) {
                    $ents = "clocked_in";
                    $this->get('session')->set('clockedin', 'clocked_in');
                    if ($i == 1) {
                        $this->get('session')->set('nextclock', "out$i");
                    } else {
                        $x = $i+1;
                        $this->get('session')->set('nextclock', "out$x");
                    }
                    if ($entities["out$i"] != NULL) {
                        $ents = "clocked_out";
                        $this->get('session')->set('clockedin', 'clocked_out');
                        $x = $i+1;
                        $this->get('session')->set('nextclock', "in$x");
                    }
                    if ($entities["out3"] != NULL) {
                        $ents = "day_done";
                        $this->get('session')->set('clockedin', 'day_done');
                    }
                }
            }
         }
        return $this->render('EcsCrmBundle:Module:topclock.html.twig', array(
            'cstat' => $ents,
        ));
    }
} 
```

这工作正常，除了当我单击其中一个登录/注销按钮时......

`<a href="{{ path('timeclock_clockin') }}" class="clockin clocker">Clock In</a>`

这是通过 jquery ajax 提交的：

```
$(".clocker").click(function() {
        // lets send the ajax request to clockin..
        $.ajax({
            url: $(this).attr('href'),
            type: "POST",
            data: "url="+document.URL,
            success: function(response) {
                location.reload(true);
                return false;
            }
        });
        return false;
    }) 
```

问题是，即使页面刷新，会话也不会更新，直到我再次手动刷新页面......关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:06:53.117

您正在使用`location.reload(true);`应该忽略浏览器缓存...

可能发生的情况是，当您访问该页面时，您的一项操作会触发以更改会话的状态。

例如：访问页面（将操作设置为 X）。AJAX 请求：将操作设置为 Y。刷新：将操作设置为 X。再次刷新：将操作设置为 Y。

对于一些调试帮助，您能否让 AJAX 请求返回会话的当前状态，以便在更改时可以看到它？

# php - 我需要使用 MySQL 和 PHP 创建一个查询以获得两个表的结果

> ID：10001086
> 
> 赞同：-2
> 
> 时间：2012-04-03T20:43:35.313
> 
> 标签：php, mysql

我是 MySQL 和 PHP 的新手。我有两张表，一张保存所有公司名称，另一张表只有用户下方的公司名称：

```
Table 1
| # | Company name |
--------------------
| 1 | Microsoft    |
| 2 | HP           |
| 3 | Asus         |
| 4 | Apple        |
| 5 | Amazon       |
| 6 | CCN          |

table 2
| # | Company name | User name |
--------------------------------
| 1 | Asus         |   x1      |
| 2 | Apple        |   x1      |
| 3 | HP           |   x2      |
| 4 | Asus         |   x2      |
| 5 | Apple        |   x2      | 
```

我需要创建一个实现以下目标的查询。首先显示与特定用户相关联的公司（例如用户 x1 的 Asus 和 Apple）。之后，显示了表 1 中的其余公司。

例如，我正在查找的查询结果，对于用户 X1，将以这种方式显示行：

```
| # | Company name |
--------------------
| 1 | Asus         |
| 2 | Apple        |
| 3 | Microsoft    |
| 4 | HP           |
| 5 | Amazon       |
| 6 | CCN          | 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:50:34.363

看起来您想要包括所有公司，但对于给定用户，首先列出与该用户关联的公司。如果是这种情况，您不想使用`INNER JOIN`.

这是一些应该工作的SQL。我提供了合理的表格和字段名称，因为您没有提供这些名称。我还假设您有一个合理健全的表格设计，没有重复的行。

```
SELECT c.company_name,

  CASE
    WHEN u.company_name IS NULL THEN 'N'
    ELSE 'Y'
  END AS user_has_company

FROM companies c

LEFT JOIN (
  SELECT *
  FROM users
  WHERE user_name = 'x1'
) u
ON u.company_name = c.company_name

ORDER BY user_has_company DESC, c.company_name 
```

此查询将返回一个额外的列 - `user_has_company`。我会用它来指示当前用户是否与给定公司相关联，但如果你愿意，你可以忽略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:47:16.173

您将需要一个 JOIN 语句才能在 table1 的 SELECT-Statement 中加入另一个

快速示例：

SELECT * FROM table2 INNER JOIN table1.id = table2.id WHERE table2.username = 'x1'

您可以在 JOIN 文档中找到所需的一切。 [http://dev.mysql.com/doc/refman/5.1/en/left-join-optimization.html](http://dev.mysql.com/doc/refman/5.1/en/left-join-optimization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:49:24.923

像这样创建您的查询：

```
$sql = "SELECT b.companyName FROM table1 a INNER JOIN table2 b ON a.companyName = b.companyName WHERE b.userName = 'x1'"; 
```

然后，使用[PHP](http://en.wikipedia.org/wiki/PHP)，使用：

```
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("my_db", $con);

$result = mysql_query($sql);

while($row = mysql_fetch_array($result))
{
    echo $row['companyName'];
    echo "<br />";
}

mysql_close($con); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T15:35:02.177

试试这个查询：

```
SELECT company_name FROM table2 ORDER BY user_name ASC 
```

在[HTML](http://en.wikipedia.org/wiki/HTML)表中，使用[PHP](http://en.wikipedia.org/wiki/PHP)代码：

```
$result = mysql_query(" SELECT company_name, user_name FROM table2 ORDER BY user_name ASC");
echo "<table>
      <tr><th>Company Name</th><th>username</th></tr>";
while($row = mysql_fetch_array($result) {
    echo "<tr><td>{$row['company_name']}</td><td>{$row['user_name']}</td></tr>";
}
echo "</table>" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T15:39:01.813

如果你只是在 MySQL 查询之后，那么这样的事情会起作用

```
SELECT company_name,SUM(IF(user_name='x1',1,0)) as ordering
FROM `table2`
GROUP BY company_name
ORDER BY ordering DESC 
```

但是你应该先看看你的模式，然后再走得更远。如果您在一个表中有一个引用另一个表的列（company_name），您应该使该列引用另一个表的 PRIMARY KEY，即

```
Table1

| # | company_name |
--------------------
| 1 | microsoft    |
| 2 | hp           |
| 3 | asus         |
| 4 | apple        |
| 5 | amazon       |
| 6 | CCN          |

table2
| # | company_id   | user_name |
--------------------------------
| 1 | 3            |   x1      |
| 2 | 4            |   x1      |
| 3 | 2            |   x2      |
| 4 | 3            |   x2      |
| 5 | 4            |   x2      | 
```

这是您在数据库设计/规范化中学习的第一件事。在这种情况下，您需要更改您的查询。像这样的东西：

```
SELECT company_name,SUM(IF(user_name='x1',1,0)) as ordering
FROM `table1`
    LEFT JOIN `table2` ON table2.company_id=table1.id
GROUP BY company_name
ORDER BY ordering DESC 
```

# mysql - 从java访问mysql时更新语句出错

> ID：10001094
> 
> 赞同：0
> 
> 时间：2012-04-03T20:44:33.037
> 
> 标签：mysql, sql, database, jdbc

```
String sql = "update `library`.`memebers` set 'STATUS'='" + "1" +"' where mem_id = '"+str+"'";

int i = st.executeUpdate(sql); 
```

上面第二行的错误：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''status' = '1' where mem_id = '656597'' at line 1
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
        at com.mysql.jdbc.Util.getInstance(Util.java:386)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2618)
        at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1749)
        at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1666)
        at Frames.Addmembers.jButton1ActionPerformed(Addmembers.java:181)
        at Frames.Addmembers.access$000(Addmembers.java:21)
        at Frames.Addmembers$1.actionPerformed(Addmembers.java:83)
        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
        at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
        at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
        at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
        at java.awt.Component.processMouseEvent(Component.java:6263)
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
        at java.awt.Component.processEvent(Component.java:6028)
        at java.awt.Container.processEvent(Container.java:2041)
        at java.awt.Component.dispatchEventImpl(Component.java:4630)
        at java.awt.Container.dispatchEventImpl(Container.java:2099)
        at java.awt.Component.dispatchEvent(Component.java:4460)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4574)
        at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
        at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
        at java.awt.Container.dispatchEventImpl(Container.java:2085)
        at java.awt.Window.dispatchEventImpl(Window.java:2478)
        at java.awt.Component.dispatchEvent(Component.java:4460)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:45:46.660

status 是列的名称，因此，它应该是*status*或*`status`*。

实体要么写成普通的，要么用 `` 引用。（反引号，不是撇号。）

除非您为列名使用保留字段名称（您不应该这样做），否则您不必引用字段。

```
String sql = "update library.memebers set STATUS = 1 where mem_id = " + Integer.valueOf(str); 
```

请注意，我删除了状态和 mem_id 周围的引号。我假设两者都是整数字段，如果是，则不应引用它们的值。整数字段应该有整数值，而不是计算为整数值的字符串。（请注意，尽管您永远不会盲目地假设一个字符串是一个整数并将其连接到一个查询中——始终首先确保它是一个正确的整数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:47:27.670

单引号中的字段名称。它应该不带引号，或者在后面的单引号内：```：

```
String sql = "update library.memebers set `STATUS`='1' where mem_id = '"+str+"'"; 
```

# wix - 使用 WIX 处理 env 特定文件

> ID：10001095
> 
> 赞同：2
> 
> 时间：2012-04-03T20:44:38.060
> 
> 标签：wix, wix3.5, wix-extension

我正在将我的所有项目从 Installshield 一个一个迁移到 Wix，我想找出处理 env 特定文件的最佳方法。

我们当前的过程是：使用 Installshield，我们创建一个基本 MSI 和一个转换文件，该文件将安装基本 MSI 和一个包含当前目录中存在的文件的目录结构。当然，在我的源代码控制中，我有针对不同环境的单独配置文件，我的部署脚本会选择正确的文件集并将它们放在暂存位置。

例如，当前目录如下所示：

示例.msi

样本.mst

测试\应用\文档\global.config

测试\文件\文档\global.config

sample.msi 被安装，上面的目录结构被复制到目标位置。在卸载期间，目录结构也会被删除。

我尝试使用 CopyFile 元素重新创建此行为，但在卸载期间复制的文件会保留并且不会被删除。还有另一种方法可以实现这一目标吗？

我了解我们进行包装的方式可能不是满足我们要求的最佳方式。如果有人有更好的方法来做到这一点，请告诉我。

我对 Wix 还是很陌生，我还没有看过任何 wix 扩展，所以不知道还有什么。

与往常一样，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:40:11.973

这些文件真的必须与 msi 分开吗？使用 wix，您可以将它们全部放入 msi 并根据某些条件（如设置属性或使用自定义操作）安装它们。这样做应该可以很容易地让 msi 创建目录和复制文件，并在卸载时删除它们。

条件会这样工作：

```
<Component Id='MyComponent' Guid='PUT-GUID-HERE'>
  <Condition><![CDATA[YOUR-PROPERTY = "SOME_STRING"]]></Condition>
 <File Id='readme' Name='readme.txt' DiskId='1' Source='readme.txt' />
</Component> 
```

Wix 中的 CustomAction 可以是 .net dll，手册在此处解释了这是如何完成的： [添加自定义操作](http://wix.sourceforge.net/manual-wix2/authoring_custom_actions.htm)

如果您安装了 WIX 工具包，您只需要创建一个`Custom Action Project`.

# php - 如何在 PHP 的新行上打印每个 ..？

> ID：10001097
> 
> 赞同：0
> 
> 时间：2012-04-03T20:44:54.327
> 
> 标签：php, html, css, twitter-bootstrap

目前，每个 td../td 仅打印 1 行，这使得源代码非常难以阅读，无论如何我都可以在新行上打印每个 td../td 元素以使其更具可读性。

感谢您的回复。我试过休息，但它打印在屏幕上，需要把它放在这里但是在哪里？

```
$entries[$i] = '<td>'.$id[$i] .'</td>';
    $entries[$i] .= '<td>'.$username[$i].'</td>';
    $entries[$i] .= '<td>'.$first_name[$i].'</td>'; 
```

进一步编辑：![在此处输入图像描述](../Images/90de18d9293a25abc5002ec608c27183.png)

相关的 HTML

```
<!-- Main hero unit for a primary marketing message or call to action --> 
      <div class="hero-unit"> 

        <div class="row">

<table class="table">
<thead>
<tr>
<th>#</th>
<th>First Name</th>
<th>Last Name</th>
<th>Username</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Mark</td>
<td>Otto</td>
<td>@mdo</td>
</tr>
<tr>
<td>2</td>
<td>Jacob</td>
<td>Thornton</td>
<td>@fat</td>
</tr>
<tr>
<td>3</td>
<td>Larry</td>
<td>the Bird</td>
<td>@twitter</td>
</tr>
</tbody>
</table>

   <table class="table table-bordered"> 
    <thead> 
    <tr> 
    <th>ID</th> 
    <th>Username</th> 
    <th>First Name</th> 
    <th>Last Name</th> 
    <th>Email Address</th>
    <th>Country</th>
    <th>Referrer</th>
    </tr>
    </thead>

       <tbody>
       <tr>

     <?php 

if (isset($content) && !empty($content) && is_array($content)) {//2
$i = 0;
$entries = array();

    while(array_key_exists($i, $content)) {//1

    $entries[$i] = "\n" .'<td>'.$id[$i] .'</td>';
    $entries[$i] .= "\n" .'<td>'.$username[$i].'</td>';
    $entries[$i] .= "\n" .'<td>'.$first_name[$i].'</td>';
    $entries[$i] .= "\n" .'<td>'.$last_name[$i].'</td>';
    $entries[$i] .= "\n" .'<td>'.$email_address[$i].'</td>';
    $entries[$i] .= "\n" .'<td>'.$country[$i].'</td>';
    $entries[$i] .= "\n" .'<td>'.$where_about[$i].'</td>';
    //$entries[$i] .= '<td>'.$sample[$i].'</td>';

    echo $entries[$i];

     $i++;

}//1

}//2

?>

</tr> 
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T20:46:05.923

连接`"\n"`到语句的前面

**编辑**

```
$entries[$i] = "\n" . '<td>'.$id[$i] .'</td>';
$entries[$i] .= "\n" . '<td>'.$username[$i].'</td>';
$entries[$i] .= "\n" . '<td>'.$first_name[$i].'</td>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:05:58.500

一个巧妙的技巧是用换行符定义一个常量：

```
define('NL', "\r\n"); 
```

然后我们只是连接那个常量而不用担心使用单我们的双 qoutes 用法：

```
$entries[$i] = '<td>'.$id[$i] .'</td>' . NL .
               '<td>'.$username[$i].'</td>' . NL .
               '<td>'.$first_name[$i].'</td>' . NL; 
```

同样的技巧当然可以应用于标签：

```
define('TAB', "\t"); 
```

所以我们可以做一些像这样激进的事情，例如：

```
$entries[$i] = '<tr>' . NL . 
               TAB . '<td>' . $id[$i] . '</td>' . NL .
               TAB . '<td>' . $username[$i] . '</td>' . NL .
               TAB . '<td>' . $first_name[$i] . '</td>' . NL .
               '</tr>' . NL; 
```

空格当然取决于个人喜好，但是当您保持一致时，它甚至可以使您的代码保持可读性！

在您的情况下，您可以通过`<td>`使用 foreach 循环遍历所有字段来处理这些列 ()，从而使您的代码更酷。

```
$entries[$i] = '<tr>' . NL;

foreach(array('id', 'username', 'first_name') as $key) {
    $entries[$i] = TAB . '<td>' . ${$key}[$i] . '</td>' . NL;
}

$entries[$i] = '</tr>' . NL; 
```

现在告诉我这不酷！

似乎您的代码只是缺乏将每一列添加到自己的表格行（`tr`）中的智能，这是您的相关 PHP 代码，其中包含修复和建议的添加，它应该可以工作，但我无法测试它。

```
<?php 

define('NL', "\r\n");
define('TAB', "\t");

if (isset($content) && !empty($content) && is_array($content)) {
    $i = 0;
    $entries = array();
    $fields = array('id', 'username', 'first_name', 'last_name', 'email_address', 'country', 'where_about');

    while(array_key_exists($i, $content)) {
        $entries[$i] = '<tr>' . NL;
        foreach($fields as $key) {
            $entries[$i] = TAB . '<td>' . ${$key}[$i] . '</td>' . NL;
        }
        $entries[$i] = '</tr>' . NL;

        echo $entries[$i];
        $i++;
    }

}
?> 
```

在我阅读本文时，花一点时间浏览 $content 可能不是一个好主意，`foreach($content as $index => $value)`而是尝试这样做会使`$index`of 等价，`$i`但您不需要使用`$content[$index]`，因为该确切值将出现在`$value`foreach 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T20:47:02.447

在您回显/打印的 td 标记后使用 '\n'

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T20:47:45.520

```
<? 
     foreach($array as $single) { 
          echo "<td></td> \n";
     }
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-03T20:47:45.487

您可以在打印语句中添加换行符。

`echo "My text\n";`

您还可以添加标签以使其整齐地缩进。

`echo "\t\tMy text\n";`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-03T20:51:58.383

我想补充一点：如果你使用 Windows 来阅读代码，你应该使用`\r\n`而不是仅仅`\n`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-03T20:55:05.390

不知道你在问什么，但如果你想摆脱：

```
$s .= '<td>' . $n . '</td>'; 
```

使用（$co 表示关闭打开）

```
$co = '</td><td>';
$row = '<tr><td>' . $data . $co . $data2 . $co . $data3 . '</td></tr>'; 
```

# php - cURL 和 Javascript 可能的解决方法？

> ID：10001104
> 
> 赞同：0
> 
> 时间：2012-04-03T20:45:19.247
> 
> 标签：php, javascript, security, curl

[在我之前的帮助请求线程中，](https://stackoverflow.com/questions/9985019/curl-to-submit-form-with-rotating-key)一切都很顺利。我在正确的轨道上绕过 CSRF，但需要指向正确的方向。我得到了很大的帮助，甚至还有一个用于登录 Google 的 Android Market 的替代脚本。我的剧本和我为匹配我的表格而修改的剧本都在同一点被挂断。显然 cURL 无法处理 JS，有没有办法在不更改表单的情况下解决使用 submitForm() 提交的表单？

这是 SubmitForm 函数的代码

```
function submitForm(formObj, formMode) {
    if (!formObj)
        return false;
    if (formObj.tagName != "FORM") {
        if (!formObj.form)
            return false;
        formObj = formObj.form;
    }
    if (formObj.mode)
        formObj.mode.value = formMode;
    formObj.submit();
} 
```

这是提交按钮的代码 -

```
<a class="VertMenuItems" href="javascript: document.authform.submit();">Submit</a> 
```

[如果需要更多背景信息，这是我最后一个问题的链接。](https://stackoverflow.com/questions/9985019/curl-to-submit-form-with-rotating-key)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:39:00.417

PHP服务...

```
<?php
// PHP service file

// Get all data coming in via GET or POST
$vars = $_GET + $_POST;

// Do something with the data coming in
?> 
```

其他地方的Javascript...

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        function sendData(data)
        {
            var response;
            $.ajax({
                url: 'phpservice.php',
                data: data,
                type: 'POST',
                dataType: 'json',
                async: false,
                success: function(response_from_service)
                {
                    response = response_from_service;
                },
                error: function()
                {
                }
            });
            return response;
        };
        function getData(data)
        {
            var response;
            $.ajax({
                url: 'phpservice.php',
                data: data,
                type: 'GET',
                dataType: 'json',
                async: false,
                success: function(response_from_service)
                {
                    response = response_from_service;
                },
                error: function()
                {
                }
            });
            return response;
        };
    });
</script> 
```

# ruby - 是否需要 gem 加载所有内容，包括我不使用的东西？

> ID：10001106
> 
> 赞同：2
> 
> 时间：2012-04-03T20:45:23.427
> 
> 标签：ruby, memory-management, gem, require, ruby-1.9.3

假设`x`是一个 gem，它包含`Hello`和`Goodbye`类。

如果我编写一个程序`require 'x'`，但只使用`Hello`该类。`Goodbye`类也加载了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T20:53:45.530

您包括脚本或文件，而不是 gem。

和

```
require 'x' 
```

你加载文件`x.rb`。您`x.rb`加载的内容由搜索路径定义，搜索路径可以通过 gem 定义（您在示例代码中未使用的内容）进行修改。

文件`x.rb`中的所有内容都已加载。如果`x.rb`包含其他`require`命令，也会加载这些文件。

# formatting - 如何自动标记纯文本并保留格式

> ID：10001109
> 
> 赞同：0
> 
> 时间：2012-04-03T20:45:53.393
> 
> 标签：formatting, markup, plaintext

我正在维护一个不断增长的（250 页）纯文本文档，它确实需要成为 PDF 技术文档。是否有一些我可以使用的自动标记工具来保留我现有的格式，即标题、副标题、段落、表格、列、示例等？一旦初始标记（到 html/xml）是正确的，我可以更直接地将它移动到 PDF，但我真的很想避免整个手动重新格式化，只是为了保持它已有的格式。

# javascript - JSON.parse：意外字符错误

> ID：10001123
> 
> 赞同：0
> 
> 时间：2012-04-03T20:46:34.637
> 
> 标签：javascript, json

我有问题。我在一个单独的文件中有 JSON 对象的列表，但想将它们解析为数据表。每次我尝试解析它们时，都会出现意外的字符错误......

这是代码

```
var myJSONObject = {
                "orders" : [{
                    "orderId" : "K2_001",
                    "dueDate" : "04/15/2012",
                    "priority" : 1,
                    "description" : "ORDER K2_001"
                }, {
                    "orderId" : "K2_002",
                    "dueDate" : "04/20/2012",
                    "priority" : 2,
                    "description" : "ORDER K2_002"
                }, {
                    "orderId" : "K2_003",
                    "dueDate" : "04/23/2012",
                    "priority" : 3,
                    "description" : "ORDER K2_003"
                }, {
                    "orderId" : "K2_004",
                    "dueDate" : "04/27/2012",
                    "priority" : 4,
                    "description" : "ORDER K2_004"
                }, {
                    "orderId" : "K2_005",
                    "dueDate" : "04/30/2012",
                    "priority" : 5,
                    "description" : "ORDER K2_005"
                }, {
                    "orderId" : "K2_006",
                    "dueDate" : "05/05/2012",
                    "priority" : 6,
                    "description" : "ORDER K2_006"
                }, {
                    "orderId" : "K2_007",
                    "dueDate" : "05/12/2012",
                    "priority" : 7,
                    "description" : "ORDER K2_007"
                }, {
                    "orderId" : "K2_008",
                    "dueDate" : "05/14/2012",
                    "priority" : 8,
                    "description" : "ORDER K2_008"
                }]
            };
            var jsonObject2 = Y.JSON.parse(myJSONObject.responseText); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T20:50:19.527

JSON 是(JavaScript) 对象的*字符串表示形式。*JSON*字符串*是一个有效的 JavaScript*对象*。

例子：

```
var JSON = '{"Hello": "world", "test": [1,2,3]}'; // <= This is JSON, it's a string
var obj = {"Hello": "world", "test": [1,2,3]}; // <= This is a JavaScript object 
```

在您的示例中，`myJSONObject`它*已经*是一个对象，不需要“解析”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:24:03.457

这是我遇到的一个问题，解决方案与双引号的使用有关。

[http://mywpf-visu.blogspot.in/2012/04/json-encountered-unexpected-character.html](http://mywpf-visu.blogspot.in/2012/04/json-encountered-unexpected-character.html)

# excel-formula - 使用单元格文本构建 Excel 公式

> ID：10001128
> 
> 赞同：1
> 
> 时间：2012-04-03T20:47:01.227
> 
> 标签：excel-formula

我正在尝试利用行和列标题来构建一个函数，我可以在一个 excel 表（单元格范围，而不是 excel 表对象）中填充该函数。因此，例如，我有一个行标题“BAT61”和列标题“A”、“B”、“C”...

我想创建一个公式，在这些列中生成以下结果： =min(BAT61A),=min(BAT61B), =min(BAT61C)... 这些生成的名称与已创建的命名范围匹配。

我尝试使用 =index 但没有成功（我通常会收到 #ref 错误）。如果可能的话，我更喜欢非 vba 解决方案。任何帮助表示赞赏。

更新：我尝试了间接函数，但得到了相同的 #ref 错误。我已验证命名范围与我尝试传递的文本字符串完全匹配。我尝试了以下具有相同结果的变体#ref: =min(indirect(A1))[其中 A1 是具有“BAT61A”的单元格], =min(indirect(BAT61A))[尝试直接获取结果] 和 =min(indirect(A1&A2))[其中 A1="BAT61" 和 A2="A"]。但是，当我创建一个“测试”范围时，就像建议的那样，它可以工作。任何进一步的想法将不胜感激。

UPDATE2：我能够通过一些细微的修改让它工作。我不起作用的命名范围实际上是指相当广泛的数组公式，这些公式正在解析表中的选择行。当我在表中创建基本上进行过滤的新虚拟列时，间接将根据间接提取正确的列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T20:54:46.920

将一些单元格命名为“测试”，然后您可以使用：

=MIN（间接（“测试”））

[http://www.cpearson.com/excel/indirect.htm](http://www.cpearson.com/excel/indirect.htm)

可以使用 & 运算符 = $A1&B$2 构造名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-12T14:56:39.980

供他人参考，请结合使用“***地址***”和“***间接***”功能来实现上述行为。

这是使用单元格中的值创建公式的示例

```
=INDIRECT(ADDRESS(E6,K2)) 
```

假设细胞

> **E6**持有**3**， **K2**持有**4**

上面的公式将返回

```
=INDIRECT($C$4) 
```

假设细胞

> **C4**持有**这是一个测试**

上面的公式将返回

```
This is a test 
```

# c# - 在 C# 中使用 Json.NET 计算 JSON 字符串中的元素数

> ID：10001142
> 
> 赞同：12
> 
> 时间：2012-04-03T20:48:00.020
> 
> 标签：c#, json, json.net

我有一个如下所示的 JSON 字符串：

```
{
"package1": {
    "type": "envelope",
    "quantity": 1,
    "length": 6,
    "width": 1,
    "height": 4
},
"package2": {
    "type": "box",
    "quantity": 2,
    "length": 9,
    "width": 9,
    "height": 9
}
} 
```

我正在使用 Json.NET LINQ to JSON 功能来处理我的 JSON 字符串，但我想知道如何在我的细绳。例如，上面的字符串有 package1 和 package2，所以我想知道如何让它返回整数 2。有时我可能只有一个包，在这种情况下，我希望它返回整数 1。其他有时我可能有 20 个包裹（在这种情况下，我希望它返回 20 个）。

我的 JObject 看起来像这样：

```
JObject o = JObject.Parse(myJsonString); 
```

有任何想法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-03T20:55:26.777

```
JObject jObj = (JObject)JsonConvert.DeserializeObject(myJsonString);
int count = jObj.Count; 
```

**奖金：**

```
dynamic jObj = JsonConvert.DeserializeObject(myJsonString);

foreach (var package in jObj)
{
    Console.WriteLine("{0} {1}", package.First.type, package.First.quantity);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-08T18:33:58.407

### 递归版本（计算所有具有原始值的属性）

遇到这个问题试图用谷歌搜索 JObject 值的递归计数，没有找到很多其他问题，所以我想我也会将我想出的内容添加到这个问题中

```
int CountJTokenProperties(JToken token)
{
    var sum = 0;

    if (token.Type == JTokenType.Object)
    {
        foreach (var child in token.Value<JObject>())
        {
            sum += CountJTokenProperties(child.Value);
        }
    }
    else if (token.Type == JTokenType.Array)
    {
        foreach (var child in token.Value<JArray>())
        {
            sum += CountJTokenProperties(child);
        }
    }
    else
    {
        sum += 1;
    }

    return sum;
} 
```

和可能有更好的选择`.Value<JObject>()`，`.Value<JArray>()`但这似乎有效。

特别是我想要一个具有可变样本数据的 nunit 测试，并希望确保它正确反序列化。决定一个简单的检查方法是 C# 对象上有多少非默认值，并且 JsonConvert 具有这种能力：

```
public int CountNonDefaultProperties(object obj)
{
    // Let JsonConvert do the work of stripping out default values
    var serialized = JsonConvert.SerializeObject(obj, new JsonSerializerSettings
    {
        DefaultValueHandling = DefaultValueHandling.Ignore
    });

    // Recurse into the json structure, which is much simpler than C# Object structure
    var jObj = JObject.Parse(serialized);

    return CountJTokenProperties(jObj);
} 
```

请注意，`DefaultValueHandling.Ignore`保留作为数组一部分的默认值，因此如果您想要该功能，您需要以不同的方式或其他方式计算数组项，此活动留给读者

[https://dotnetfiddle.net/XIZCvh](https://dotnetfiddle.net/XIZCvh)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-08T22:24:56.947

使用[Cinchoo ETL](https://www.nuget.org/packages/ChoETL.JSON/) - 一个开源库，您可以使用更少的内存开销轻松地进行节点计数，因为它使用流式方法来解析输入。因此它也可以处理大文件。

```
string json = @"{
""package1"": {
""type"": ""envelope"",
""quantity"": 1,
""length"": 6,
""width"": 1,
""height"": 4
},
""package2"": {
""type"": ""box"",
""quantity"": 2,
""length"": 9,
""width"": 9,
""height"": 9
}
}";

using (var p = ChoJSONReader.LoadText(json).WithJSONPath("$.*"))
{
    Console.WriteLine(p.Count());
} 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-06T08:40:10.443

```
 string json= "{
"package1": {
"type": "envelope",
"quantity": 1,
"length": 6,
"width": 1,
"height": 4
 },
 "package2": {
 "type": "box",
 "quantity": 2,
 "length": 9,
 "width": 9,
 "height": 9
 }
 }"; 

 dynamic stuff;
 int count;
 stuff = JsonConvert.DeserializeObject(json);
 foreach(JProperty s in stuff){

  count++;
  }

  Console.WriteLine(count.ToString()); 
```

如果 Count 属性不适合您，请改用此方法。确保您的 C# 版本为 4.0 或更高版本，因为当时添加了动态关键字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-02T15:11:32.067

[对字典](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.idictionary-2?view=net-6.0)类型使用反序列化：

```
JsonConvert.DeserializeObject<IDictionary>(myJsonString).Count 
```

或者

```
JsonConvert.DeserializeObject<IDictionary<string, object>>(myJsonString).Count 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-03T20:50:55.140

在 JQuery $.ajax 中，您将收到一个数组，遍历元素并获得总和。

# java - Eclipse RCP 目标平台：无法解析 Bundle 'org.eclipse.ui.views.properties.tabbed'

> ID：10001143
> 
> 赞同：0
> 
> 时间：2012-04-03T20:48:06.343
> 
> 标签：java, eclipse-plugin, rcp, target-platform

我刚刚创建了我的第一个目标平台并遇到了一个问题：

> 无法解析 Bundle org.eclipse.ui.views.properties.tabbed。

我的目标平台有一个位置：

```
http://download.eclipse.org/releases/indigo
    Eclipse Platform Launchers
    Eclipse RCP SDK 
```

我将此设置为我的目标平台，并在运行配置中验证插件。在运行配置中没有名为 org.eclipse.ui.views.properties.tabbed 的包，所以我无法激活它。

如果这是一个简单而愚蠢的问题，我很抱歉，但我是目标平台的新手（我每次都将整个工作区添加为目标平台）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:01:57.683

该插件`org.eclipse.ui.views.properties.tabbed`不包含在您添加到目标平台的功能中。

只需将特性*Eclipse Platform SDK*添加到目标平台：

*   选择您的位置，然后单击*编辑*，
*   过滤“Eclipse Platform SDK”，
*   选择特征，
*   *删除过滤器中的文本**,
*   并单击*完成*。
*   等到目标平台已经解决，然后*保存*，并将其设置为目标平台。

那应该可以解决问题。

我花了很长时间才了解目标平台、运行配置等，所以请保持头脑清醒:)。

**否则，您将删除目标平台中已有的内容（Platform Launchers 和 RCP SDK），并仅安装 Platform SDK。这是由于一个错误。*

# java - Swing：将键盘焦点遍历限制为特定的小部件

> ID：10001145
> 
> 赞同：1
> 
> 时间：2012-04-03T20:48:20.253
> 
> 标签：java, swing

我有一个 JFrame，其中包含通常的各种面板和小部件，并且我有一个 JPanel，我将其用作该 JFrame 的 glassPane。我希望能够在可见时将键盘焦点遍历限制在 glassPane 中的组件上。

我的问题可能会也可能不会因为后台线程启动一个进程导致出现进度对话框并随后消失这一事实而变得更加复杂，这会从我的 glassPane 中的一个小部件中窃取焦点，但将其返回到我的 glassPane 下的某个小部件。

我尝试将 JFrame 的焦点遍历策略设置为仅允许 glassPane 被聚焦的策略，但这似乎没有任何效果。（也许我做错了？）

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:35:14.807

我将使我的评论成为答案，因为我相信这是解决您问题的方法：

也许更好的选择是使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)来简单地交换视图而不是玻璃窗格或对话框，因为这种情况似乎不适合玻璃窗格的使用。如果您使用 CardLayout，则不必想出一个 kludge（摆弄焦点遍历）来修复另一个 kludge 的副作用（使用玻璃窗格来处理它不打算用于的事情）。

如果您不熟悉它，CardLayout 将允许您轻松地交换 GUI 中的组件，并且通常用于交换持有复杂 GUI 的 JPanel，当用户从一个主要程序状态转到另一个主要程序状态时。我认为这对你的目的来说是完美的，并且可以让你不必担心你的注意力问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T09:27:42.233

正如我在评论中提到的，我可能会选择 J/X/Layer - 但如果自定义 FTP 确实是您的上下文中唯一缺少的部分，那么这是一个解决方案。

要从焦点遍历中排除组件，请在自定义 FTP 的接受方法中拒绝它们。下面是一个示例，如果 glassPane 可见，则拒绝所有不是 glassPane 子级的组件（注意：这过于简单，因为它只处理直接子级，实际代码必须沿着父链向上走，直到它碰到玻璃板与否）

```
public static class FTP extends LayoutFocusTraversalPolicy {

    @Override
    protected boolean accept(Component comp) {
        JFrame window = (JFrame) SwingUtilities.windowForComponent(comp);
        if (hasVisibleGlassPane(window)) {
            return comp.getParent() == window.getGlassPane();
        }
        return super.accept(comp);
    }

    private boolean hasVisibleGlassPane(JFrame window) {
        return window != null && window.getGlassPane() != null
                && window.getGlassPane().isVisible();
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T20:56:49.797

尝试`.setFocusable(false)`在 glassPane 可见时调用您想要忽略的 JFrame（或者最坏的情况是调用其中的所有组件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T17:00:08.443

当我与客户讨论时，他给了我同样的要求。所以我决定在我的项目中使用 JLayer 和 LayeredPane，并将所有这些组件作为我实现以下代码的简单解决方案，它可能会对您的项目有所帮助。

```
public YourConstructor() {
    yes.addFocusListener(new FocusAdapter() {
        public void focusLost(FocusEvent fe) {
            if (!no.hasFocus()) {
                no.requestFocusInWindow();
            }
        }
    });

    no.addFocusListener(new FocusAdapter() {
        public void focusLost(FocusEvent fe) {
            if (!yes.hasFocus()) {
                yes.requestFocusInWindow();
            }
        }
    });
}

@Override
public void setVisible(boolean visibility) {
    super.setVisible(visibility);
    if (visibility) {
        yes.requestFocusInWindow();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-19T07:34:58.650

以克娄巴特拉的回答为基础，帮助处于类似情况的其他人；我有一堆我不想关注的自定义挥杆组件（有时仅在它们不可编辑时）。我最终得到了这个：

```
/**
 * A custom focus traversal policy to make focus traversal inside a container to ignore some swing components.<br /><br />
 * 
 * <b>Ignored components:</b><br />
 * - <code>CustomComponent1</code> components<br />
 * - <code>CustomComponent2</code> components that are not editable<br /><br />
 * 
 * <b>Usage:</b><br /><br />
 * <code>Container.setFocusTraversalPolicy(new CustomFocusTraversalPolicy());</code>
 */
public class CustomFocusTraversalPolicy extends LayoutFocusTraversalPolicy {

    private static final long serialVersionUID = 1L;

    protected boolean accept(Component c) {

        if(c instanceof CustomComponent1) {
            return false;
        }

        if(c instanceof CustomComponent2) {

            CustomComponent2 t = (CustomComponent2) c;

            if(!t.isEditable()) {
                return false;
            }
        }

        return super.accept(c);
    }

} 
```

请注意，需要为每个设置策略`Container`（我为每个`Window`创建的都设置了）：

```
Window window = new JFrame(); // Or JDialog; both subclasses of Container and Window
window.setFocusTraversalPolicy(new CustomFocusTraversalPolicy()); 
```

# javascript - 在 JS 中为所有非站点内的链接添加一个字符串......你能校对这个我一起破解的快速小脚本吗？

> ID：10001150
> 
> 赞同：0
> 
> 时间：2012-04-03T20:48:42.660
> 
> 标签：javascript

这个想法是通过 DDG 的重定向服务路由传出链接，以将我的网站隐藏在引荐来源网址中。脚本有什么问题吗？

另外，请参阅代码中的注释......提到的替代方案是否更好？下？完全相同的？

再次感谢！

```
var baseUrl='https://duckduckgo.com/l/?u=';

var invisibleHost=window.location.hostname;

var pageLinks=document.getElementsByTagName('a');
var n_links=pageLinks.length;

var leaveAsIs=true;

for(var i=0;i<n_links;i++){

    var presentLink=pageLinks[i].href;
    leaveAsIs=true;

    if(/^https?:\/\//i.test(presentLink) && invisibleHost.test(presentLink))
        leaveAsIs=false;

    pageLinks[i].href=leaveAsIs?presentLink:baseUrl+presentLink;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:55:38.803

`test()`除非您需要返回而不是简单地测试匹配，否则请始终使用。

此外，您的嵌套 if 条件可以是一个、多个条件，并且您不需要两个用于 http 和 https 的正则表达式 - 只需使用一个，但规定“s”是可选的：

```
/^https?:\/\//i.test(presentLink) 
```

# php - windows VC9 ffmpeg 和魔法棒

> ID：10001152
> 
> 赞同：1
> 
> 时间：2012-04-03T20:48:44.330
> 
> 标签：php, windows, ffmpeg, magickwand

我正在寻找使用 MSVC9 (Visual C++ 2008) 编译的 PHP 5.3 的 ffmpeg 和 magickwand 扩展。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:07:29.987

这项工作对我来说是在 Windows XP 上使用 Xampp Win32 和 PHP v5.3.8 VC9

[http://ffmpeg.zeranoe.com/forum/viewtopic.php?f=10&t=430](http://ffmpeg.zeranoe.com/forum/viewtopic.php?f=10&t=430)

# mysql - date ：从下个月的第 2 天到第 1 天按月分组

> ID：10001156
> 
> 赞同：0
> 
> 时间：2012-04-03T20:48:50.847
> 
> 标签：mysql, date, group-by

我有这样的查询：

```
SELECT EXTRACT(MONTH FROM d.mydate) AS synmonth, SUM(apcp) AS apcptot
FROM t_synop_data2 d
WHERE d.mydate
BETWEEN '2011-01-01' AND '2011-12-31' 
AND d.idx_synop = '06712'
GROUP BY synmonth 
```

此查询添加一个月内的所有降雨（apcp），如下所示：

```
1   32.8  => from 2011.01.01 to 2011.01.31
2   27.2 => from 2011.02.01 to 2011.02.28
3   21.0
4   21.8
5   88.5
6   131.4
7   118.6
8   57.1
9   80.9
10  84.6
11  1.1
12  143.5 => from 2011.12.01 to 2011.12.31 
```

这就是我想要的，但有一点不同。

这个区别是我必须从当月的第 2 天到下个月的第 1 天添加 apcp，然后返回类似上面的结果。

```
1   132.8 => from 2011.01.02 to 2011.02.01
2   27.2  => from 2011.02.02 to 2011.03.01
3   21.0
4   21.8
5   88.5
6   131.4
7   118.6
8   57.1
9   80.9
10  84.6
11  1.1
12  143.5 => from 2011.12.02 to 2012.01.01 
```

我用 add_date()、extract() 或 date_format() 尝试了一些东西，但没有结果。

谢谢你的回答文斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:59:12.563

这是查询：

```
SELECT EXTRACT(MONTH FROM ADDDATE(d.mydate,-1) ) AS synmonth
, SUM(apcp) AS apcptot
FROM t_synop_data2 AS d
WHERE ADDDATE(d.mydate,-1) BETWEEN '2011-01-01' AND '2012-12-31'
AND d.idx_synop = '06712'
GROUP BY synmonth 
```

您可以通过添加两列来检查结果，如下所示：

```
SELECT EXTRACT(MONTH FROM ADDDATE(d.mydate,-1) ) AS synmonth
, SUM(apcp) AS apcptot
, MIN(d.mydate) AS date_min
, MAX(d.mydate) AS date_max
FROM t_synop_data2 AS d
WHERE ADDDATE(d.mydate,-1) BETWEEN '2011-01-01' AND '2012-12-31'
AND d.idx_synop = '06712'
GROUP BY synmonth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:56:02.563

你可以分组`EXTRACT(MONTH FROM d.mydate - INTERVAL 1 DAY)`

```
SELECT EXTRACT(MONTH FROM d.mydate) AS synmonth, SUM(apcp) AS apcptot
FROM t_synop_data2 d
WHERE d.mydate
BETWEEN '2011-01-01' AND '2011-12-31' 
AND d.idx_synop = '06712'
GROUP BY EXTRACT(MONTH FROM d.mydate - INTERVAL 1 DAY) 
```

# javascript - 在异步回发上注册 javascript

> ID：10001164
> 
> 赞同：0
> 
> 时间：2012-04-03T20:49:28.197
> 
> 标签：javascript, jquery, asp.net, asynchronous-postback

我有一个包含在 UpdatePanel 中的 asp.net 按钮，单击它时会执行异步回发并注册一些显示 jquery 对话框的 javascript。

```
protected void btnAddData(object sender, EventArgs e) {
    StringBuilder jqueryDialog = new StringBuilder();
    jqueryDialog.Append("$(document).ready(function() {");
    jqueryDialog.Append("RefreshData();");
    jqueryDialog.Append("$('#divData').dialog({ modal: false, draggable: true, title: 'Historical Data', width: 700 });");
    jqueryDialog.Append("});");

    ScriptManager sm = ScriptManager.GetCurrent(this);
    if (sm != null && sm.IsInAsyncPostBack) {
        ScriptManager.RegisterClientScriptBlock(
            this, typeof(Page), Guid.NewGuid().ToString(),
            jqueryDialog.ToString(), true);
    }
} 
```

如您所见，javascript 首先调用了一个名为 RefreshData() 的函数，该函数作为 javascript 存在于我的标记中。

```
<script type="text/javascript" language="javascript">
    if ($) {
        $(document).ready(function () {
            function RefreshData() {
                alert("Data Refreshed!");
            }
        });
    }
</script> 
```

但是，Firefox 给出的错误是**RefreshData is not defined**。这是否意味着我在异步回发中注册的任何 javascript 都将无法使用我在标记中定义的 javascript 函数？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:51:54.280

不要`RefreshData`在作为匿名回调的 document.ready 函数中定义函数。在外部定义它，以便外部可以访问它：

```
<script type="text/javascript">
    if (typeof($) != 'undefined') {
        function RefreshData() {
            alert("Data Refreshed!");
        }
    }
</script> 
```

此外，您可能不需要包装在文档中。准备好您的服务器端包括：

```
StringBuilder jqueryDialog = new StringBuilder();
jqueryDialog.Append("RefreshData();");
jqueryDialog.Append("$('#divData').dialog({ modal: false, draggable: true, title: 'Historical Data', width: 700 });"); 
```

# sql - SQL Server 2008 - 从另一个表动态创建一个表

> ID：10001166
> 
> 赞同：3
> 
> 时间：2012-04-03T20:49:51.680
> 
> 标签：sql, pivot

我有一张这样的桌子：

```
Column = NAME
Column = DATE

NAME  | DATE       | Y/N
John  | 01/01/2012 | bit
Mary  | 01/01/2012 | bit
James | 01/01/2012 | bit
John  | 01/02/2012 | bit
Mary  | 01/02/2012 | bit
James | 01/02/2012 | bit
John  | 01/03/2012 | bit
Mary  | 01/03/2012 | bit
James | 01/03/2012 | bit 
```

我想创建某种形式的矩阵或枢轴，所以我最终得到了这个：

```
NAME  | 01/01/2012 | 01/02/2012 | 01/03/2012
John  | bit        | bit        | bit
Mary  | bit        | bit        | bit
James | bit        | bit        | bit 
```

我已经看到了一些包含少量列项目（如香蕉、苹果、橙色）的数据透视示例，我需要具有不确定数量的名称和不确定数量的日期（因此，没有硬编码的列名称）。我正在考虑拆分为多个表，但我总是需要动态创建日期列或名称列。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:19:41.460

也许是这样的：

**测试数据**

```
CREATE TABLE Table1
(
    NAME VARCHAR(100),
    [DATE] DATE,
    [Y/N] BIT
)

INSERT INTO Table1
VALUES
    ('John','01/01/2012',1),
    ('Mary','01/01/2012',0),
    ('James','01/01/2012',1),
    ('John','01/02/2012',0),
    ('Mary','01/02/2012',1),
    ('James','01/02/2012',1),
    ('John','01/03/2012',1),
    ('Mary','01/03/2012',0),
    ('James','01/03/2012',0) 
```

**查找唯一列**

```
DECLARE @cols VARCHAR(MAX)
;WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY [DATE] ORDER BY [DATE]) AS RowNbr,
        convert(varchar, [DATE], 103) AS [Date]
    FROM
        Table1
)
SELECT @cols=STUFF
(
    (
        SELECT
            ',' +QUOTENAME([Date])
        FROM
            CTE
        WHERE
            CTE.RowNbr=1
    FOR XML PATH('')
    )
,1,1,'') 
```

**声明并执行动态sql**

```
DECLARE @query NVARCHAR(4000)=
N'SELECT
    *
FROM
(
    SELECT
        Table1.NAME,
        CAST(Table1.[Y/N] AS INT) AS [Y/N],
        convert(varchar, Table1.[DATE], 103) AS [Date]
    FROM
        Table1
) AS p
PIVOT
(
    MAX([Y/N])
    FOR [Date] IN ('+@cols+')
) AS pvt'

EXECUTE(@query) 
```

**自己清理之后**

```
DROP TABLE Table1 
```

**结果**

```
Name        01/01/2012    02/01/2012     03/01/2012
James       1             1              0
John        1             0              1
Mary        0             1              0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:54:52.380

如果您只有几列，则可以使用静态枢轴：

```
create table #temp
(
    name varchar(50),
    date datetime,
    yesno bit
)

insert into #temp values('John', '01/01/2012', 1)
insert into #temp values('Mary', '01/01/2012', 1)
insert into #temp values('James', '01/01/2012', 1)
insert into #temp values('John', '01/02/2012', 0)
insert into #temp values('Mary', '01/02/2012', 0)
insert into #temp values('James', '01/02/2012', 0)
insert into #temp values('John', '01/03/2012', 1)
insert into #temp values('Mary', '01/03/2012', 0)
insert into #temp values('James', '01/03/2012', 1)

select name, [01/01/2012], [01/02/2012], [01/03/2012]
from 
(
    select name, date, cast(yesno as tinyint) as yesno
    from #temp
) x
pivot
(
    max(yesno)
    for date in ([01/01/2012], [01/02/2012], [01/03/2012])
) p

drop table #temp 
```

但听起来你想要一个动态的支点。为此，您必须首先获取要旋转的列列表，然后运行查询：

```
create table test
(
    name varchar(50),
    date datetime,
    yesno bit
)

insert into test values('John', '01/01/2012', 1)
insert into test values('Mary', '01/01/2012', 1)
insert into test values('James', '01/01/2012', 1)
insert into test values('John', '01/02/2012', 0)
insert into test values('Mary', '01/02/2012', 0)
insert into test values('James', '01/02/2012', 0)
insert into test values('John', '01/03/2012', 1)
insert into test values('Mary', '01/03/2012', 0)
insert into test values('James', '01/03/2012', 1)

DECLARE @cols AS VARCHAR(MAX),
    @query  AS VARCHAR(MAX);

SELECT  @cols = STUFF(( SELECT DISTINCT TOP 100 PERCENT
                                '],[' + convert(varchar(10), t2.date, 101)
                        FROM    test AS t2
                        ORDER BY '],[' + convert(varchar(10), t2.date, 101)
                        FOR XML PATH('')
                      ), 1, 2, '') + ']'

set @query = 'select name, ' + @cols + '
            from 
            (
                select name, date, cast(yesno as tinyint) as yesno
                from test
            ) x
            pivot
            (
                max(yesno)
                for date in (' + @cols + ')
            ) p'

execute(@query) 
```

以下是一些有关动态枢轴的有用链接：

[SQL Server 中具有动态列的数据透视](http://www.simple-talk.com/community/blogs/andras/archive/2007/09/14/37265.aspx)

[在未知列数上使用 SQL Server 2005/2008 透视（动态透视）](http://dotnetgalactics.wordpress.com/2009/10/23/using-sql-server-20052008-pivot-on-unknown-number-of-columns-dynamic-pivot/)

有很多关于动态枢轴的问题/答案。

# php - getText 众筹翻译

> ID：10001167
> 
> 赞同：0
> 
> 时间：2012-04-03T20:49:55.750
> 
> 标签：php, internationalization, gettext, crowdsourcing

我正在寻找一个脚本（必须有一个），它可以帮助我让我用户翻译我的基于 getText 的[PHP](http://en.wikipedia.org/wiki/PHP)项目。

现在，我没有时间在我的解决方案上创建解决方案，所以我正在使用 Google 搜索寻找一些合适的开源解决方案，但我找不到任何东西。

对此有很多商业解决方案，但我想在我自己的服务器上使用一个简单的 PHP 替代方案。它不必具有很多功能；我只想选择我需要的语言，让人们翻译和检查翻译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:32:55.987

我不知道 PHP 中有什么解决方案，但是有几个基于 Web 的翻译工具的开源项目。例如：

*   [Weblate](http://weblate.org/)基于 Python/Django 并支持[Git](http://en.wikipedia.org/wiki/Git_%28software%29)集成。我认为它是由[phpMyAdmin](http://en.wikipedia.org/wiki/PhpMyAdmin)使用的，所以它应该适合 PHP 项目。
*   [Zanata](http://zanata.org/)是用 Java 编写的，由[JBoss](http://en.wikipedia.org/wiki/JBoss)使用。

我还在用 PHP 编写的[Google Code 上找到了 SimplePO](http://code.google.com/p/simplepo/)，但它似乎不支持复数形式。GitHub 上还有[一个最近更新的 fork](https://github.com/pacifists/simplepo)。

# php - PHP $_GET 验证

> ID：10001172
> 
> 赞同：0
> 
> 时间：2012-04-03T20:50:13.223
> 
> 标签：php, forms, validation, post, get

尽管如此，这可能是一个愚蠢的问题：

我正在玩以下代码：

```
$a='a';

if ($_GET['a'] == $a)
    echo 'true';
else
    echo 'false'; 
```

现在，有什么方法可以发送数据来破坏验证吗？显然，它本可以在 SQL 注入中完成的方式不会发生。

只是想知道这种验证方式有多安全。

提前致谢。

**编辑：**

我的问题是，是否有任何可以通过 $_GET 传递的东西可以“破坏”比较并始终输出“真”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:55:23.327

如果您正在寻找验证`$_GET['a']`真正的表面等于`"a"`而不是别的，那么是的，这就是代码。

但是，如果您期待`"a"`并且只有`"a"`它可能不应该是用户输入。

验证（或卫生）意味着接受他们可能扔给你的任何字符串，并确保它对于你想要的任何目的都是有效的。如果将其发送到数据库，请将其传递`mysql_escape_string()`或使用准备好的语句。`html_entities()`如果要显示为 HTML，请使用或确保没有任何有害标签`strip_tags()`。

除了说用户已经输入之外，您的验证对其他任何事情都不是很好`"a"`。**但是，是的，除了能够通过****之外，别无他法。`"a"`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:56:24.403

好吧，如果你确切地知道发生了什么，你可以在没有类型强制的情况下进行比较并检查一个空参数：

```
$a = 'a';

if( !empty( $_GET['a'] ) && $_GET['a'] === $a  )
{
  //do more validation using your data model
}
else
{
  //output error msg
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-03T20:56:00.787

您可以使用 mysqli 扩展中的 Prepared-Statements，这已经防止了所有可能的注入。

如果您不想使用这样的 mysql 和 mysqli 也有“real_escape_string” - 方法，您可以在输入 Userinput 时在查询中使用

例子

```
$sql = "SELECT `name` FROM `example` WHERE `id` = '".mysql_real_escape_string($YOURVAR)."'"; 
```

[来自标准 mysql 扩展的 real_escape_string 方法](http://de2.php.net/manual/de/function.mysql-real-escape-string.php)

[mysqli real_escape_string](http://de2.php.net/manual/de/mysqli.real-escape-string.php)

# c - 如何在代码中在 SATA 控制器上从 PIO 切换到 DMA 模式？

> ID：10001177
> 
> 赞同：3
> 
> 时间：2012-04-03T20:50:34.000
> 
> 标签：c, windows, device-driver, sata

我正在运行 Windows 7。我需要构建一个无人值守/自动测试来运行一些 SATA 驱动器。测试要求之一是在两种状态（启用和禁用）下使用 DMA 运行驱动器。

要手动更改此设置，您将：

```
   1) 打开设备管理器。
   2) 展开“IDE ATA/ATAPI 控制器”。
   3) 选择列出的 ATA 通道之一；右键属性；高级选项卡。
   4) 切换“启用 DMA”。
```

正如我所说，我需要在无人看管的情况下执行此操作。关于如何完成的任何想法？我搜索了 Windows 开发中心，包括驱动程序开发工具包中的设备实例和设置内容。我在那里找不到任何相关的东西。我还搜索了可能完成这项工作的注册表项，但也没有找到任何东西。

# java - struts2

> ID：10001182
> 
> 赞同：0
> 
> 时间：2012-04-03T20:50:53.863
> 
> 标签：java, jsp, select, struts2

我正在使用两个标签。它们都具有相同的名称，但不同的 ID

```
<s:doubleselect id="countryId1" name="country"     list="countriesMap.keySet()" doubleId="cityId1"                                     doubleName="city" doubleList="countriesMap.get(top)" />

<s:doubleselect id="countryId2" name="country"     list="countriesMap.keySet()" doubleId="cityId2"                                     doubleName="city" doubleList="countriesMap.get(top)" /> 
```

在行动中我试图得到

```
country String[] countryArray = ServletRequest.getParameterValues("country"); 
```

但我越来越`countryArray = null`。我查看了页面代码，发现了这种情况

```
<select name="country" id="countryId1" onchange="countryId1Redirect(this.options.selectedIndex)">
    <option value="USA">USA</option>
    <option value="Germany">Germany</option>
</select> 
```

我选择了价值美国，但没有`selected='selected'`财产。

如何将每个选择的值`<select name...`放入数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:10:55.317

要从具有相同名称的元素中获取值列表，请创建匹配名称的 getter 和 setter；例如：

```
public class MyAction extends ActionSupport {

    private List<String> countries;
    private List<String> cities;

    public String execute() {

        if (getCountry() != null && getCity() != null) {
            for (int i = 0; i < getCountry().size(); i++) {
                System.out.println("country"+(i+1)+"="+getCountry().get(i));
                System.out.println("city"+(i+1)+"="+getCity().get(i));
            }
        }

        return SUCCESS;
    }

    // setCountry matches country
    public void setCountry(List<String> countries) {
        this.countries = countries;
    }
    public List<String> getCountry() {
        return countries;
    }

    // setCity matches city
    public void setCity(List<String> cities) {
        this.cities = cities;
    }
    public List<String> getCity() {
        return cities;
    }

} 
```

我相信你可以使用`String[]`，而不是`List<String>`如果你喜欢。

我目前没有办法对此进行测试，但是您可以使用状态变量的 index 属性来获取迭代索引，可能是这样的：

```
<s:iterator value="country" status="stat"> 
    <s:property /> <!-- the country -->
    <br />
    <s:property value="#city[#stat.index]" /> <!-- the city corresponding to the current country -->
    <br />
    <br />
</s:iterator> 
```

# java - 彩票比赛练习

> ID：10001186
> 
> 赞同：1
> 
> 时间：2012-04-03T20:51:10.693
> 
> 标签：java

我一直忙于一个练习，我需要将一个中奖彩票号码（生成的）与数据库表中的现有彩票号码进行比较。

我设法遍历数据库中的所有号码，然后找到与中奖号码组匹配的号码，但我很难确定在哪组彩票号码中找到了匹配号码。
这些数字分别放置在每个数据库列中。在这里，我检索每一行中的值。

```
ResultSet set = state.executeQuery("SELECT * FROM numberLotto");
    while(set.next())
    {
                String[]row = new String[7]; 
                row[0] = set.getString(1);                   
                row[1] = set.getString(2);
                row[2] = set.getString(3);
                row[3] = set.getString(4);
                row[4] = set.getString(5);
                row[5] = set.getString(6);
                row[6] = set.getString(7);
                entries.add(row);
            }
String[][]listOfNumbers = entries.toArray(new String[entries.size()][7]); 
```

然后我循环遍历listOfNumbers 并将所有值与winningNumber 的值进行比较。

```
Object[]winningNumber = lottoDrawString.toArray();   

        for (int i=0; i < listOfNumbers.length; i++)
        {
            for (int j=0; j < listOfNumbers[i].length; j++)
            {
                for(int k = 0; k < winningNumber.length; k++)
                {
                    System.out.println(listOfNumbers[i][j]);

                    if(listOfNumbers[i][j].equals(winningNumber[k]))
                    {
                        System.out.println("There is a match " + listOfNumbers[i][j] + " and " + winningNumber[k]);
                    }
                }

            }
        } 
```

如何检索找到匹配项的行？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:00:17.510

为什么不只是做

```
SELECT * FROM numberLotto WHERE FirstNumber = n1 AND SecondNumber = n2 AND ... 
```

就此而言，为什么不将乐透号码作为七位字符串存储在数据库中呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:00:38.053

一个想法可能是将行号添加为表字段，检索它，而不是创建和检查数字，而是使用一个对象来做，比如说 Loterry。

类彩票

{ int 行，值；

}

您检查值字段，如果它适合您的检查，则返回行。希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:03:18.940

您无需进行太多“编程”即可完成搜索。写一个查询来为你做这件事：

`String query = "SELECT * FROM numberLotto WHERE number = " + winningNumber`

以上假设您的彩票号码存储在标记为 的字段中`"number"`。您也可以使用`AND`or`OR`子句来搜索多个匹配项。

# seo - 动态网址 + SEO

> ID：10001187
> 
> 赞同：0
> 
> 时间：2012-04-03T20:51:19.540
> 
> 标签：seo, search-engine, friendly-url, dynamic-url

我有一个为所有内容生成动态 url 的网站。

它使用一个函数来显示 index.php 页面上的内容，并由“action”调用。

所以，如果用户想要**注册**，就会有一个**注册**函数调用它。如果用户想浏览**下载**页面，有一个**下载**函数调用它。

像这样的东西：

```
index.php?action=signup
index.php?action=downloads
index.php?action=news&type=type&id=id 
```

在最后一种情况下是新闻。新闻按**type**和**ID**划分，都是数字。

类型可以是：文章、更新等。

我的问题是：我必须如何以及做什么才能在友好的 URL 上进行全部转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:03:11.380

假设您在 apache 服务器上，您将需要使用 .htaccess 文件，以及使用规则重写 URL 的方法，这并不奇怪称为 RewriteRule。

如果您搜索 .htaccess RewriteRule，可以通过 google获得*大量*信息，但一个很好的起点是[http://corz.org/serv/tricks/htaccess2.php](http://corz.org/serv/tricks/htaccess2.php)。

你最终会在你的公共网络文件夹中放置一个名为 .htaccess 的文件，如下所示：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(?:/(.*)){1,3} index.php?action=$1&type=$2&id=$3 [R,NC] 
```

注意：我没有测试过上述内容，它会根据您希望漂亮链接的外观而有所不同。

# c# - 实体框架：违反多对多关系的参照完整性约束

> ID：10001189
> 
> 赞同：39
> 
> 时间：2012-04-03T20:51:26.323
> 
> 标签：c#, entity-framework

嘿，我有一个带有一堆 inproc 缓存和实体框架的应用程序。当我想向实体写入更新时，我会重新附加缓存的副本。我跟踪我在上下文的生命周期中附加的所有内容，因此我不会尝试将它们附加两次。

我在附加时发生错误（在大多数情况下很少会正常工作并且非常快），它说明了以下内容：

> 发生参照完整性约束冲突：定义参照约束的属性值在关系中的主体对象和从属对象之间不一致。

我已经非常仔细地查看了看起来很正常的实体。我认为这个问题是由于修复运行时外键的附加/分离造成的。

是否有一种好方法可以获取有关此错误的更多信息，或者它是否会由于实体处于 EF 不期望的状态以外的原因而发生？

编辑：DB 图（注意我使用的是 codefirst，我只是使用 EDMX 工具制作图表，为简单起见，我还从模型中删除了一堆常规属性）

![在此处输入图像描述](../Images/744ffefc9cfb2f446e6f714fefa163ec.png)

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-21T22:45:06.640

`Person`除了多对多关系之外，`Location`您的模型中显然存在的一对多关系可能会发生错误。例如下面的代码会抛出异常：

```
using (var context = new MyContext())
{
    var person = new Person
    {
        CurrentLocationId = 1,
        CurrentLocation = new Location { Id = 2 }
    };
    context.People.Attach(person); // Exception
} 
```

“定义引用约束的属性值”是外键属性值`CurrentLocationId`和主键值`CurrentLocation.Id`。如果这些值不同，则会引发异常。（`CurrentLocation`好像`null`是允许的。）

在我看来，只能为外键关联抛出此异常，因为只有对于这种类型的关联，您才具有在模型中定义引用约束的属性。它不能为独立协会抛出。由于每个多对多关系都是一个独立的关联（模型中没有外键属性），我的猜测是错误与您的多对多关系无关，而是与一对多相关。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-01-30T08:08:56.923

我遇到了一个非常相似的异常：

```
"A referential integrity constraint violation occurred: 
The property value(s) of 'ObjectA.PropertyX' on one end of a relationship 
do not match the property value(s) of 'ObjectB.PropertyY' on the other end." 
```

原因是这样的：Web API 的客户端发送了一个 PUT 请求，其中包含整个对象，包括导航属性（在此示例中，ObjectA（更准确地说是 ObjectB.ObjectA）是一个导航属性，完全由客户端提供）。发生这种情况是因为客户端从服务器接收到整个对象并将其按原样退回到服务器，并进行了微小的更改。

另一方面，ObjectB.PropertyY 刚刚被更改（这首先是 PUT 请求的原因）。

由于 ObjectB.PropertyY 是对同一个对象 ObjectA（外键）的引用，EF 尝试对此进行协调，但由于上述异常而失败。

解决方案很简单：

```
ObjectB.ObjectA = null; 
```

在 SaveChanges() 完全解决这个问题之前。

我希望这可以帮助别人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-19T08:29:01.623

我刚刚遇到了同样的问题，我的解决方案是我已经向关联添加了映射，然后设置了引用约束。

为了解决这个问题，我必须打开关联的映射窗口，并且有一个链接可以删除映射。一旦完成映射详细信息窗口，然后说映射是不允许的.. 似乎添加引用约束会使任何映射留在原处。

认为如果其他人将来正在寻找此错误消息的解决方案，可能值得发布。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-28T08:49:45.083

@LukeMcGregor 嗨，

作为有同样问题的人，我想我可以提供不同的观点。

在我执行了所有必要的检查之后，我可以说我更愿意得到这个错误。

因为在我的场景中：我想包含一个导致不匹配错误的对象。它是您场景中的位置对象。如果我添加一个带有 ID 的对象，我会收到此错误，因为前一个对象（未更新的对象）中的 ID 与更新后的 ID 不匹配。

但这不是一个大问题。作为解决方案；如果它仍然在 UI 端，如果它仍然存在，它可能仍然被包含。

当您收到用户的更新请求时，您将清空对象。（= Null）或者您将使用用户在服务端更新（附加，修改......无论如何）之前更新的ID更新对象并以这种方式更新它。

而已。它可以在数据库和图表中保持原样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-07T18:02:10.757

要添加到@Slauma 的答案，不仅仅是在将对象添加到您的上下文时。对于您的示例，如果您在 Person 中编辑 CurrentLocationId，您还需要编辑嵌入在 Person 对象中的 CurrentLocation 对象。EF 将自动填充 CurrentLocation 对象，因为 CurrentLocationId 在 CurrentLocation 的表中有一个外键。当您编辑 CurrentLocationId 而不更新 CurrentLocation 对象时，它们会变得不同步。这就是在这种情况下导致异常的原因。

因此，假设您需要更新 Person 对象的 CurrentLocationId。我们假设您预取了 Person 数据和 Location 数据。

```
public class DbData 
{
    List<Person> PersonList;
    List<Location> LocationList;
    public DbData()
    {
        using (var context = new MyContext())
        {
             PersonList = context.Persons.ToList();
             LocationList = context.Locations.ToList();
        }
    }

    public void UpdatePersonLocation(Person person, int newLocationId)
    {
        using (var context = new MyContext())
        {
            var location = LocationList.Where(l=>l.id==newLocationId).Single();
            //you need to update both the id and the location for this to not throw the exception
            person.CurrentLocationId == newLocationId;
            person.CurrentLocation == location;  
            context.Entry(person).State = System.Data.Entity.EntityState.Modified;
            context.SaveChanges();
        }
    }
    //or if you're giving it the location object...
    public void UpdatePersonLocation(Person person, Location location)
    {
        using (var context = new MyContext())
        {
            //you need to update both the id and the location for this to not throw the exception
            person.CurrentLocationId == location.id;
            person.CurrentLocation == location;  
            context.Entry(person).State = System.Data.Entity.EntityState.Modified;
            context.SaveChanges();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-30T23:28:06.303

我刚遇到这个问题并想出了一个非常快速的解决方案。我的问题是多对多表。

```
Public class Pictures_Tag
{
    [Key]
    [Column(Order = 0)]
    [ForeignKey("Picture")]
    public Int16 Picture_ID { get; set; }
    [Key]
    [Column(Order = 1)]
    [ForeignKey("ImageTag")]
    public Int16 ImageTag_ID { get; set; }
    public virtual Picture Picture { get; set; }
    public virtual ImageTag ImageTag { get; set; }
} 
```

我添加了我分配的行，`Picture = db.Pictures...`然后它工作正常（不完全确定为什么）

```
[HttpPost]
public ActionResult Edit2(WebSiteEF2017C.Models.Pictures_Tag p)
{     
    using (var db = new thisModel(Session["org"].ToString())
    {
         p.Picture = db.Pictures.Where(z => z.ID == p.Picture_ID).FirstOrDefault();
         db.Pictures_Tags.Attach(p);
         db.Entry(p).State = EntityState.Modified;
         db.SaveChanges();
         return View(db.Pictures_Tags.Include(x => x.Picture)
                    .Where(n => n.Picture_ID == p.Picture_ID & n.ImageTag_ID == p.ImageTag_ID).FirstOrDefault());
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-10T21:51:41.310

尝试将任何子类对象设置为 null MainObject.SubObject1 = null; 人.地址=空；// 地址对象为 null 而不是 id

# asp.net - 是否有任何安全风险需要在存储的文本中进行管理以供以后查看？

> ID：10001192
> 
> 赞同：1
> 
> 时间：2012-04-03T20:51:36.340
> 
> 标签：asp.net, html, visual-web-developer

我想在我的网站上有一个“联系我们”，这样用户就可以在一个文本框中输入，当他点击“提交”时——它将被存储起来供我以后查看。

这里有[注射](https://www.owasp.org/index.php/Top_10_2010-A1)的危险吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:57:08.553

可能是的，但这取决于您存储文本的位置。

例如，如果它位于 SQL 数据库中，则存在 SQL 注入的风险。您应该使用您所在环境的 SQL 转义函数。

例如，使用 php + mysql，您可以使用`mysql_real_escape_string`. 大多数技术环境都提供了一种在持久化之前正确转义字符串的标准方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:59:25.797

注射可能发生在两个地方。

*   当您在 html 页面中显示此输入时。
*   当你保存它。

因此，如果将其保存为 sql 服务器，则使用变量/参数* 保存，如果将其保存在 xml 中，则使用 HtmlEncode 保存。

当您看到该数据时，如果您在 html 页面上看到它们，请使用[HtmlEncode](http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx)，如果您只是在文本文件中读取它，那么不用担心 :)

[*][如何：防止 ASP.NET 中的 SQL 注入](http://msdn.microsoft.com/en-us/library/ff648339.aspx)

有关 html 编码和反跨站点脚本库的更多详细信息：

[http://msdn.microsoft.com/en-us/security/aa973814](http://msdn.microsoft.com/en-us/security/aa973814)

[http://msdn.microsoft.com/en-us/library/ff649310.aspx](http://msdn.microsoft.com/en-us/library/ff649310.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:07:58.270

从安全的角度来看，我们的 Web 表单是赤裸裸的并且 100% 易受攻击。我们需要查看数据传递给它们的所有方式并进行适当的测试：

```
* Form Fields
* URL Query Strings
* Cookies
* Database
* ViewState 
```

最普遍的攻击形式似乎是脚本注入、跨站点脚本和 SQL 注入。至于 SQL 注入，这可以通过使用参数化查询来缓解。正是将数据库查询参数化的行为使存储过程对攻击具有如此的弹性。其他形式的脚本攻击可以通过在您的 Web 应用程序项目中下载和使用 Microsoft Anti-Cross Site Scripting Library 来处理。

[安全运行时引擎 VS AntiXSS 库](https://stackoverflow.com/questions/5034586/security-runtime-engine-vs-antixss-library)

[Microsoft Web 保护库](http://wpl.codeplex.com/)

# c - 是否根据 C89 标准修改字符串文字未定义的行为？

> ID：10001202
> 
> 赞同：5
> 
> 时间：2012-04-03T20:52:34.123
> 
> 标签：c

我相信在 C99 中，字符串文字的修改是未定义的行为。我没有该标准的副本，但我有一份 C1X (n1570) 草案，该草案在 6.4.5 第 7 段中说明：

> 如果它们的元素具有适当的值，则未指定这些数组是否不同。如果程序尝试修改这样的数组，则行为未定义。

我发现了一个涉及该主题的 Stack Overflow[问题，其中包含来自 Jonathan Leffler 的以下评论：](https://stackoverflow.com/questions/8981828/why-doesnt-the-compiler-detect-and-produce-errors-when-attempting-to-modify-cha)

> 最初，C89 (C90) 标准并没有禁止修改文字，因为在标准之前编写的代码太多会被它破坏。

但我也看到了很多关于字符串文字*类型*`char[N]`的讨论，以及它们是和不是的事实`const char[N]`。我认为做出这个决定是为了不破坏现有的大量代码。

谁能给我一个明确的答案。C89中的字符串文字修改UB吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-03T20:54:16.247

是的，它们在 C89 中是不可修改的。

> （C90，6.1.4）“如果程序试图修改任一形式的字符串文字，则行为未定义”

即使在 K&R 第 2 版中，也有关于字符串文字不变性的引用。

> (K&R2, 5.5) “如果你尝试修改字符串内容，结果是不确定的”
> 
> （K&R2，附录 C）“字符串不再可修改，因此可以放置在只读存储器中”

在 ANSI C89 Rationale 中，解释了为什么它是不可修改的：

> （ANSI C89 基本原理，3.1.4）“字符串文字被指定为不可修改。该规范允许实现共享具有相同文本的字符串副本，将字符串文字放置在只读内存中，并执行某些优化。”

# buildout - 使用 virtualenv 在 emacs 中的 eylint

> ID：10001205
> 
> 赞同：3
> 
> 时间：2012-04-03T20:52:52.643
> 
> 标签：buildout, pylint

无法使epylint工作。我正在使用 buildout 生成 epylint 脚本。但是后来我从命令行运行它，它不输出任何东西。

```
> epylint models.py
> echo $?
0 
```

虽然如果 pylint 安装到系统（emerge pylint）一切正常，除了系统级 linter 看不到由 buildout 安装的鸡蛋。这是我对 eplint 的扩建部分：

```
[epylint]
recipe = zc.recipe.egg
eggs =
    ${buildout:eggs}
    pylint
extra-paths = ${buildout:extra-paths}
entry-points = epylint=pylint.epylint:Run 
```

想得到建议我如何能指出问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:23:08.073

这似乎是由于缺少 pylint 脚本，epylint 在内部调用的。

这个构建配置对我有用：

```
[epylint]
recipe = zc.recipe.egg
eggs = pylint
entry-points = epylint=pylint.epylint:Run

[pylint]
recipe = zc.recipe.egg
eggs = pylint
entry-points = pylint=pylint.lint:Run
arguments = sys.argv[1:] 
```

我需要两个部分，因为 pylint.lint:Run 和 pylint.epylint:Run 以不同的方式处理命令行参数。

# php - 关闭数据库句柄

> ID：10001209
> 
> 赞同：0
> 
> 时间：2012-04-03T20:53:01.537
> 
> 标签：php, mysql, sql-server

我有一个关闭连接的通用函数，它需要一个 dbh，即 ref 当前打开的数据库句柄。

我这样称呼它

关闭连接（$dbh）

根据这个 dbh 是 sqlsrv dbh 还是 mysql dbh 的情况，我会做两件事之一；

`sqlsrv_close( $dbh);`

或者

`mysql_close($dbh);`

如果没有在函数调用中传递连接类型，有没有办法通过简单地探测 ref 传递的 $dbh 以编程方式找出这是 mysql 还是 mssql 句柄？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:07:14.477

使用应用程序范围的方法可能是定义接口。

```
// connection interface
interface db
{
  public function close($conn);
} 
```

为使用的驱动程序提供实现。

```
// mysql
class mysql implements db
{
  public function close($conn) { 
    mysql_close($conn);
  }
}
// mssql
class mssql implements db {
  public function close($conn) {
    sqlsrv_close($conn);
  }
} 
```

使用应用程序范围的变量来实例化正确的驱动程序。

```
if($driver == "mysql") {
  $db = new mysql();
} elseif($driver == "mssql") {
  $db = new mssql();
}
...
$db::close($conn); 
```

这是最常见的处理方式。

此外，正如任何人都会向您推荐的那样，您应该使用 start using [PDO](http://php.net/manual/en/book.pdo.php)来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:04:50.370

尝试使用[`get_resource_type($dbh);`](http://us2.php.net/manual/en/function.get-resource-type.php). 它将返回`mysql link`MySQL 数据库句柄。我不知道它会为其他任何东西返回什么，因为我手头只有 MySQL。

# javascript - 从事件监听器返回布尔值

> ID：10001211
> 
> 赞同：0
> 
> 时间：2012-04-03T20:53:10.320
> 
> 标签：javascript, jquery, html, forms, event-listener

所以现在我正在提交一个表单，onSubmit 我正在消失表单（不显示）并显示一个链接。我想要做的是`return true`当用户点击链接时表单（所以它可以提交），所以我想从事件监听器返回。但 eventlistener 始终为 true，因为它始终会附加。有人对最好的方法有建议吗？

```
<form name="request" action="http://testurl.com" method="POST" onSubmit="return test()">
    <input type="text" name="Name" size="10" />
    <input type="submit" name="submit" value="Submit" />
</form>

<div id="link">
    <a href="test.exe" title="download">Download</a>
</div> 
```

-JS-

```
function test(){
    document.request.style.display = "none";
    document.getElementById('link').style.display = "block";
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:32:57.770

使用 JQuery ......这里有一些变化......

```
<form name="request">
    <input type="text" name="Name" size="10" />
    <input type="button" id="submit" value="Submit" />
</form>

<div id="link">
    <a href="test.exe" title="download">Download</a>
</div>​ 
```

这是您的Javascript代码...

```
function test(){
    document.request.style.display = "none";
    document.getElementById('link').style.display = "block";
    return true;
}

$("#submit").on('click', function (){
    $.ajax({
        url: 'http://www.youractionsite.com',
        type: 'POST',
        data: 'name='+$("input[name='Name']").val(),
        success: function(){
             test();
        }
    });     
});
​ 
```

它已经过测试......代码正在运行......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:57:22.453

在链接的 onClick 中，您可以执行 $("#formId").submit(); 这就是你所追求的吗？

# php - 应用程序目录路径

> ID：10001216
> 
> 赞同：0
> 
> 时间：2012-04-03T20:53:19.787
> 
> 标签：php, codeigniter, constants

如何获取`application`CodeIgniter 中的目录路径？有没有“不脏”的方法来做到这一点？

我正在查看常量，但我发现最接近的一个是`BASEPATH`返回`/system`目录的完整路径，所以基本上我可以`str_replace`使用应用程序进行系统 - 但我只是好奇，是否有任何其他干净而简短的方法可以获得应用程序目录路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T08:43:15.617

它在你的 index.php 文件中（取自 CI 2.1，它被称为 APPPATH ）

```
 // The path to the "application" folder
if (is_dir($application_folder))
{
    define('APPPATH', $application_folder.'/');
}
else
{
    if ( ! is_dir(BASEPATH.$application_folder.'/'))
    {
        exit("Your application folder path does not appear to be set correctly. Please open the following file and correct this: ".SELF);
    }

    define('APPPATH', BASEPATH.$application_folder.'/');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:01:09.580

我相信您可以使用 APPPATH 变量来完成此操作。

所以要进入你的控制器文件夹，它会是这样的。

```
include(APPPATH . 'controllers/') 
```

或者你想用它做什么。请注意，尾部斜杠包含在 APPPATH 变量中。

# matlab - 在matlab上旋转图像后..然后结果变坏:(

> ID：10001220
> 
> 赞同：-1
> 
> 时间：2012-04-03T20:53:38.773
> 
> 标签：matlab

我对确定视网膜图像的分支点然后注册这些图像很感兴趣。首先，我使用一种算法从图像中提取血管，然后进行骨架化并找到分支点。起初操作一切正常，但如果我通过随机角度旋转相同的图像，分支点的数量会非常增加。你对这个问题有什么看法...

图片相关链接：http: [//e1204.hizliresim.com/w/6/449m6.jpg](http://e1204.hizliresim.com/w/6/449m6.jpg) http://e1204.hizliresim.com/w/6/449by.jpg

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:21:11.383

`imrotate`的标准插值算法是最近邻，它倾向于将您的图像转换成漂亮的锯子。

如果您使用 旋转图像，请`imrotate`尝试将更好的方法作为第三个参数传递，例如双三次或双线性，两者都会好得多。

语法很简单：

```
imrotate(img, degrees, 'bicubic'); 
```

# javascript - 局部变量是否仍然在 Ajax 回调的范围内？

> ID：10001222
> 
> 赞同：1
> 
> 时间：2012-04-03T20:53:45.310
> 
> 标签：javascript, ajax

一旦激活了ajax回调函数，我想调用一个内部函数。因为有一个延迟，我想知道我的局部变量在被调用时是否仍然正确，特别是 this.response_element 因为它被回调函数使用。

ajax时发起回调函数`status == 200`

```
var ControlSignIn = function( ) 
{
    this.form_element = document.getElementById( 'signin' ),
    this.response_element = document.getElementById( 'signin_response' ),
    this.text_object = new Text( this.form_element ), 
    this.message_object = new Message( this.response_element );
};

ControlSignIn.interface = function()
{
    new ControlSignIn().invoke();
};

ControlSignIn.prototype.invoke = function( ) 
{
    if( CONSTANT.VALIDATE_ON === 1 )
    {
        if( !this.text_object.checkEmpty() ) 
        {
            this.message_object.display( 'empty' );
            return false;
        }
        if( !this.text_object.checkPattern( 'email' ) ) 
        {
            this.message_object.display( 'email' );
            return false;
        }
        if( !this.text_object.checkPattern( 'pass' ) ) 
        {
            this.message_object.display( 'pass' );
            return false;
        }
    }

/* new internal call_back */    

        AjaxNew.use( ajaxSerialize( this.form_element ) + '&ajax_type=ControlSignIn', ControlSignIn.invoke.callBack );

    function callBack( server_response_text )
    {
        ajaxType( server_response_text, this.response_element, 'respond' ); 
    }

/*  Removed
    Ajax.repeatUse( ajaxSerialize( this.form_element ) + '&ajax_type=ControlSignIn', ajaxTypeRespond, this.response_element );
*/

}; 
```

**解决方案：**

```
AjaxNew.use( ajaxSerialize( this.form_element ) + '&ajax_type=ControlSignIn', ControlSignIn.invoke.callBack );

var response_element = this.response_element;
function callBack( server_response_text )
{
    ajaxType( server_response_text, response_element, 'respond' ); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:59:39.487

答案是肯定的和否定的。是的，局部变量仍然存在，但`this`引用总是在**每次**函数调用时重置。因此回调将有自己的`this`价值。

解决方案是利用答案的“是”部分并将您的`this`参考保存在另一个变量中。`this`然后在回调中使用该变量（而不是）。

现在，就是说，您的代码结构让我有点困惑，我无法准确说出您的“回调”应该如何工作；也就是说，它引用`this`但我不明白它期望它是如何设置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:02:08.100

不，不会的。即使该属性可能是完整的，`this`也不会指向该对象。

将值复制到局部变量，并使用函数字面量，然后局部变量将在函数的闭包中被捕获并保持完整且可访问：

```
var element = this.response_element;
AjaxNew.use(
  ajaxSerialize(this.form_element) + '&ajax_type=ControlSignIn',
  function(server_response_text) {
    ajaxType(server_response_text, element, 'respond'); 
}); 
```

# visual-studio-2010 - 如何设置可执行文件的搜索路径？

> ID：10001227
> 
> 赞同：0
> 
> 时间：2012-04-03T20:53:58.133
> 
> 标签：visual-studio-2010, build

我没有使用默认的 Visual Studio 项目路径来构建我的程序，因为我想模拟一个版本，并编写工具来搜索资源。修改设置后，我让 VS 输出到正确的文件夹，并将 DLL 复制到主文件夹中的 bin 文件夹中。但是，我无法获取它生成的 .EXE 来查找 DLL，它只会查找其目录中的内容，但我不想那样混乱。调试器工作正常，但不能独立工作。我如何告诉 VS 告诉 .EXE 在哪里可以找到它的 DLL？我必须编辑 PATH 吗？这似乎很混乱，因为我从来没有很好的经验。我已经尝试过项目设置-> VC++ 目录，但它仍然找不到它，因为我假设那是针对 .LIB 文件的。

这是我的文件夹层次结构图。

-root
--bin
---[必需的 DLL]
--data
---[程序资源（图像、声音、配置等）]
--Program.exe

使用 Visual C++ 2010 速成版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:01:21.873

我如何告诉 VS 告诉 .EXE 在哪里可以找到它的 DLL？

编辑发布运行配置并更改 dll 所在的工作目录。

![在此处输入图像描述](../Images/457880a3f4d4b60cb5a8d1939f8f7cf5.png)

您仍然必须通过 ide 运行您的 exe 才能使其正常工作。

我必须编辑 PATH 吗？

不

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:04:12.517

这与 Visual Studio 没有任何关系。是*Windows*找不到 DLL。没有理由在任意子目录中查找 DLL。尚不清楚这些是隐式加载的 DLL，还是您使用 LoadLibrary 自己加载它们。

如果您使用 LoadLibrary()，则不会有太大问题，只需传递 DLL 的完整路径名即可。GetModuleFileName(NULL, ...) 帮助您构建路径字符串。如果这些是隐式加载的，你会有一个大问题。在这种情况下，应该很少有理由不将 DLL 存储在与 EXE 相同的目录中。是的，您不想弄乱 PATH 环境变量。或当前工作目录。

# eclipse - 如何使 maven-eclipse-plugin 2.9 编译类到 eclipseClasses 目录

> ID：10001229
> 
> 赞同：1
> 
> 时间：2012-04-03T20:54:04.437
> 
> 标签：eclipse, maven, maven-eclipse-plugin

我刚刚从 2.5.1 切换到 maven-eclipse-plugin 2.9，当我执行 mvn eclipse:eclipse 命令时，eclipse 类目录中没有任何反应。

没有检查配置中的元素有点令人不安，但我可以让它滑动。

```
 <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                     <ajdtVersion>1.5</ajdtVersion>
                     <outputDirectory>eclipseClasses</outputDirectory>
                     <wtpversion>2.0</wtpversion>
                </configuration>
            </plugin> 
```

如果我删除 eclipseClasses 目录，它会在 mvn 构建中重新创建，但它保持为空。

发生了什么变化？我在 maven-eclipse-plugin 文档中找不到任何告诉我的内容。

谢谢。-Kow

# android - 属性错误这些代码是什么意思？

> ID：10001230
> 
> 赞同：0
> 
> 时间：2012-04-03T20:54:04.513
> 
> 标签：android, attributes, android-softkeyboard

```
"<Keyboard>" does not set the required layout_height attribute:
 (1) Set to "wrap_content"
 (2) Set to "fill_parent"
"<Row>" does not set the required layout_width attribute:
 (1) Set to "wrap_content"
 (2) Set to "fill_parent"
"<Row>" does not set the required layout_height attribute:
 (1) Set to "wrap_content"
 (2) Set to "fill_parent"
"<Key>" does not set the required layout_width attribute:
 (1) Set to "wrap_content"
 (2) Set to "fill_parent"
"<Key>" does not set the required layout_height attribute:
 (1) Set to "wrap_content"
 (2) Set to "fill_parent"
com.android.layoutlib.bridge.MockView cannot be cast to android.view.ViewGroup
You must supply a layout_height attribute.
Exception details are logged in Window > Show View > Error Log
The following classes could not be found:
- Keyboard (Fix Build Path, Edit XML)
- Row (Fix Build Path, Edit XML)
- com.example.android.softkeyboard.LatinKeyboardView (Fix Build Path, Edit XML, Create Class) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:57:03.097

这意味着您的 xml 键盘布局文件丢失`android:layout_width`和/或`android:layout_height`某些组件丢失。

**编辑**

乍一看，您似乎将键盘布局文件放在`res/layout`文件夹中。它属于`res/xml`文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:56:08.650

项目中的 xml 文件包含以下元素

“不要设置所需的 layout_height 属性”。

对于每个元素，设置它，例如：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    **android:layout_height="fill_parent"**
    android:background="@android:color/transparent"> 
```

# java - crawler4j的实现

> ID：10001233
> 
> 赞同：0
> 
> 时间：2012-04-03T20:54:14.607
> 
> 标签：java, string, web-crawler

我正在尝试让 crawler4j 的基本形式运行，如此[处所示](http://code.google.com/p/crawler4j/source/browse/#git/src/test/java/edu/uci/ics/crawler4j/examples/basic)。我通过定义 rootFolder 和 numberOfCrawlers 修改了前几行，如下所示：

```
public class BasicCrawlController {

    public static void main(String[] args) throws Exception {
            if (args.length != 2) {
                    System.out.println("Needed parameters: ");
                    System.out.println("\t rootFolder (it will contain intermediate crawl data)");
                    System.out.println("\t numberOfCralwers (number of concurrent threads)");
                    return;
            }

            /*
             * crawlStorageFolder is a folder where intermediate crawl data is
             * stored.
             */
             String crawlStorageFolder = args[0];

              args[0] = "/data/crawl/root";

            /*
             * numberOfCrawlers shows the number of concurrent threads that should
             * be initiated for crawling.
             */
            int numberOfCrawlers = Integer.parseInt(args[1]);

            args[1] = "7";

            CrawlConfig config = new CrawlConfig();

            config.setCrawlStorageFolder(crawlStorageFolder); 
```

无论我如何定义它，我仍然收到错误

```
Needed parameters: 
 rootFolder (it will contain intermediate crawl data)
 numberOfCralwers (number of concurrent threads) 
```

我认为我需要“在运行配置”窗口中设置参数，但我不知道这意味着什么。如何正确配置此基本爬虫以使其启动并运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:15:12.523

使用 javac 关键字编译程序后，您需要键入以下内容来运行它：

java BasicCrawler 控制器“arg1”“arg2”

该错误告诉您在运行程序时没有指定 arg[0] 或 arg[1]。另外，这个“ args[1] = "7";" 是什么？在您已经收到爬虫数量参数之后？

看起来你正在尝试删除前 5 行，因为无论如何你都在尝试使用硬编码值。然后将 crawlForStorage 字符串设置为您的目录路径，并将 numberOfCrawlers 设置为 7。这样您就不必指定命令行参数。如果您想使用命令行参数，请摆脱上面的硬编码值并在 CL 中指定它们

# iphone - 尝试删除 TableView 部分时的 EXC_BAD_ACCESS

> ID：10001241
> 
> 赞同：0
> 
> 时间：2012-04-03T20:54:52.640
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我有一个包含几个部分的表格视图。在某个时刻，我想从 tableView 中删除一个部分。为此，我在标题上有一个长按手势，在长按时我会调出一个 UIMenuController，如下所示：

```
UIMenuController *deleteMenu = [UIMenuController sharedMenuController];
UIMenuItem *delete = [[UIMenuItem alloc] initWithTitle:@"Delete"     action:@selector(deleteCell:)];
[deleteMenu setMenuItems:[NSArray arrayWithObject:delete]];
[deleteMenu update];
[deleteMenu setTargetRect:CGRectMake(0, 0, 320, 460) inView:self.superview];
[deleteMenu setMenuVisible:YES animated:YES]; 
```

这是在我的标题的自定义视图子类中完成的。在该`deleteCell:`方法中，我调用了一个委托方法（委托是拥有 tableview 的视图控制器）。在委托方法的实现中，我尝试像这样删除一个部分（部分是一个 int）：

```
[statsTable deleteSections:[NSIndexSet indexSetWithIndex:section] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

在这一行，我得到一个 EXC_BAD_ACCESS。奇怪的是，当这种情况发生时，Xcode 也会崩溃，所以我看不到 BAD_ACCESS 的原因。如果有人知道为什么会这样，您的帮助将不胜感激。

谢谢，

**编辑::**找到解决方案，具有 tableview 的 vc 必须成为第一响应者，以便它允许您从 tableview 中删除某些内容。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:06:36.677

UIMenuController 有一个 delete MenuItem，它发送 delete: 消息。我建议使用它而不是用你自己的删除复制它。

顺便说一句，您可以通过单击管理方案非常轻松地在 Xcode 4.3 中启用 NSZombies（您可以通过单击具有当前方案/设备的栏来访问它，如下面的屏幕截图所示......） ![在此处输入图像描述](../Images/670e68e2a57f6a569cd6d46cf655be26.png)

然后，在弹出的屏幕中，单击编辑，您应该会看到...

![在此处输入图像描述](../Images/5d8dbcc76ae7f3b8a6216a2570ffd090.png)

选中“启用僵尸对象”，一切顺利。

# ant - Ant：遍历 XML 文件的节点

> ID：10001247
> 
> 赞同：2
> 
> 时间：2012-04-03T20:55:15.950
> 
> 标签：ant, email-attachments

我有以下 XML 结构：

```
<servers>
    <hostname>ABC01</hostname>
    <hostname>ABC02</hostname>
</servers> 
```

我需要从每个服务器、我知道的文件夹中检索文件，将其附加到电子邮件中，然后发送。

这样做的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:42:30.347

使用该[`xmlproperty`任务](http://ant.apache.org/manual/Tasks/xmlproperty.html)将 XML 文件加载到属性中。

然后使用 ant-contrib 中的任务[对](http://ant-contrib.sourceforge.net/)[`for`每个](http://ant-contrib.sourceforge.net/tasks/tasks/for.html)匹配的属性进行操作。

就像是：

```
<target name="funtimes">
    <xmlproperty file="the.xml" delimiter=","/>
    <for list="${servers.hostname}" param="hostname">
        <sequential>
            <echo>Doing things with @{hostname}</echo>
        </sequential>
    </for>
</target> 
```

获取文件取决于您计划如何访问它们。这项[`scp`任务](http://ant.apache.org/manual/Tasks/scp.html)可能会有所帮助。

对于发送电子邮件，您可以使用[`mail`任务](http://ant.apache.org/manual/Tasks/mail.html)。

# jquery - ajax 调用后工具提示停止工作

> ID：10001255
> 
> 赞同：3
> 
> 时间：2012-04-03T20:55:39.303
> 
> 标签：jquery, jsf, primefaces

我正在使用这个 jQuery 片段在 html 表中的一些 JSF primefaces 元素上创建工具提示。

```
$(document).ready(function() {

    $('.ui-icon-pencil, .ui-icon-check, .ui-icon-close, .ui-icon-trash').hover(function(e) {    // this is the hover in function 

        // Since the elements have multiple classes, this function gets the one that starts with ui-icon-<something>
        var icon = $(this).attr('class').match(/ui-icon-(?:pencil|check|close|trash)/)[0];
        var title = null;

        if(icon == 'ui-icon-pencil') {
            title = 'Edit';
        } else if(icon == 'ui-icon-check') {
            title = 'Save';
        } else if(icon == 'ui-icon-close') {
            title = 'Cancel';
        } else if(icon == 'ui-icon-trash') {
            title = 'Delete';
        }

        $('body').append('<p class="tooltip">'+title+'</p>');
        $('.tooltip').css('top', (e.pageY-50) + 'px').css('left', (e.pageX-10) + 'px').fadeIn('fast');
    }, function() { // this is the hover out function
        $('.tooltip').remove();
    });

    // this handles the tooltip moving when the mouse moves
    $('.ui-icon-pencil').mousemove(function(e) {
        $('.tooltip').css('top', (e.pageY-50) + 'px').css('left', (e.pageX-10) + 'px');
    });
}); 
```

这很好用，除非您通过 jsf ajax 魔术修改/添加/删除表中的一行，工具提示将停止工作。

修改/添加/删除表格中的一行后，如何保持工具提示正常工作？

我认为我应该使用 jquery 的实时功能来保持工具提示的工作，但我不确定在这种情况下我将如何使用它们。

![在此处输入图像描述](../Images/fffd492f073f2c38f6e1af2b07f15eb2.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T21:01:35.553

当您修改表格行（通过 jsf ajax 魔术）时，处理程序很可能会丢失。尝试`.on`像下面这样使用，让我们知道结果，

**注意：**以下是 jQuery 版本 1.7。`.live or .delegate`如果您使用旧版本的 jQuery，请使用。

```
$(document).ready(function() {

    $(document).on('mouseenter', '.ui-icon-pencil, .ui-icon-check, .ui-icon-close, .ui-icon-trash', function(e) {    // this is the hover in function 

        // Since the elements have multiple classes, this function gets the one that starts with ui-icon-<something>
        var icon = $(this).attr('class').match(/ui-icon-(?:pencil|check|close|trash)/)[0];
        var title = null;

        if(icon == 'ui-icon-pencil') {
            title = 'Edit';
        } else if(icon == 'ui-icon-check') {
            title = 'Save';
        } else if(icon == 'ui-icon-close') {
            title = 'Cancel';
        } else if(icon == 'ui-icon-trash') {
            title = 'Delete';
        }

        $('body').append('<p class="tooltip">'+title+'</p>');
        $('.tooltip').css('top', (e.pageY-50) + 'px').css('left', (e.pageX-10) + 'px').fadeIn('fast');
    });

    $(document).on('mouseleave', '.ui-icon-pencil, .ui-icon-check, .ui-icon-close, .ui-icon-trash', function() { // this is the hover out function
        $('.tooltip').remove();
    });

    // this handles the tooltip moving when the mouse moves
    $(document).on('mousemove', '.ui-icon-pencil', function(e) {
        $('.tooltip').css('top', (e.pageY-50) + 'px').css('left', (e.pageX-10) + 'px');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:01:33.910

在完成 ajax 调用（更改 DOM）后，您是否使用应该在悬停时显示工具提示的类之一添加/删除元素？

事件监听器默认绑定到当时 DOM 中的元素。你确实应该使用 live，甚至更好：delegate。

我将发布一个将事件监听器绑定到正文的答案，但如果你有一个更深的嵌套包装元素，它将包含所有应该有工具提示的子元素，那么你应该将事件监听器绑定到那个。

```
$("body").delegate('.ui-icon-pencil, .ui-icon-check, .ui-icon-close, .ui-icon-trash', 'click', function(event){
// Just do the things you would do in a normal .hover-event that is binded to these classes
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:00:30.070

警告：我不知道 JSF

您需要将 mousemove 事件重新绑定到加载的内容。

JSF 可能会提供一个回调来实现这一点。这个链接看起来很有希望：http: [//javaserverfaces.java.net/nonav/docs/2.0/jsdocs/symbols/jsf.ajax.html#.addOnEvent](http://javaserverfaces.java.net/nonav/docs/2.0/jsdocs/symbols/jsf.ajax.html#.addOnEvent)

显然 Primefaces 为此目的具有 oncomplete 属性：

```
 <p:commandButton value="Cancel" actionListener="#{progressBean.cancel}" oncomplete="pbAjax.cancel();startButton2.enable();" /> 
```

也许这会对你有所帮助？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T21:02:09.563

悬停事件不绑定到 ajax 调用添加的新元素。您必须手动将悬停功能添加到这些新添加的元素中。

我并不真正提倡它，但是当您在每次 ajax 调用后运行上面发布的代码时，它可能会起作用。请注意，您可能会在某些元素上两次绑定事件，这有时会产生一些奇怪的错误。

# c# - Windows Phone 7 上的简单图形编辑器

> ID：10001257
> 
> 赞同：1
> 
> 时间：2012-04-03T20:55:53.017
> 
> 标签：c#, silverlight, windows-phone-7, mobile

我想为 Windows Phone 7 创建一个简单的图形编辑器。用户将选择一个仪器并绘制 smth。要绘制我想使用[WriteableBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap%28VS.95%29.aspx)，因为有时需要按像素绘制。这是一个好主意还是存在任何最好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:04:12.857

由于性能损失，它的好主意，并且有利于GC，在创建WriteableBitmap时，应用程序必须定义图像属性，例如宽度，高度和像素格式。这允许 WriteableBitmap 对象分配一次内存并根据需要更新像素数据。

# android - WebView 不使用 INTERNET 权限集

> ID：10001264
> 
> 赞同：1
> 
> 时间：2012-04-03T20:56:32.630
> 
> 标签：android, android-manifest, android-webview

我有一个非常简单的应用程序，我无法让 WebView 显示 google.com（这就是我用来测试的

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.bantol.mpp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MPPActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".SMSReceiver" >
            <intent-filter android:priority="100" >
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

这是我在我使用的代码`MPPActivity`：

```
 @Override
    public void onResume()
    {
        super.onResume();
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.setWebViewClient(new WebViewClient(){
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) 
            {
                return true;
            }
        });
        mWebView.loadUrl("www.google.com");
    } 
```

WebView 显示**网页不可用**，但 LogCat 上没有错误或消息

我错过了什么？

我在我的设备而不是模拟器上测试这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:04:49.767

`www.google.com`不是网址，而是`http://www.google.com`。修复您的 loadUrl() 调用以保存正确的 url，它应该可以工作（如果您有有效的连接等）。

# c# - RemoteConnect.Connect() 错误=WNetAddConnection2 返回：1203

> ID：10001267
> 
> 赞同：0
> 
> 时间：2012-04-03T20:56:52.203
> 
> 标签：c#, asp.net, file, path

这是一个 ASP.NET、C# 应用程序。我正在尝试将文件保存在服务器上，但出现以下错误：

> RemoteConnect.Connect() 中的错误 err=WNetAddConnection2 返回：1203 msg=没有网络提供商接受给定的网络路径。

现在我试图保存在我的本地机器上，我使用的路径是 C:\Docs 但我收到了上述错误。

请任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:44:36.373

我终于得到了答案，我给出的路径是本地机器路径，但我需要给出一个像这样“@\ComputerName\FolderName”的网络路径

# php - PHP/AJAX 多用户应用程序 - 数据以某种方式丢失

> ID：10001272
> 
> 赞同：0
> 
> 时间：2012-04-03T20:57:19.600
> 
> 标签：php, javascript, ajax

我正在编写一个多用户、基于 JavaScript 的绘图应用程序作为学习项目。现在这是一种方式：当用户在 HTML5 画布元素上绘制时，transmitter.html 上的“发送者”客户端发送数据，receiver.html 上的“接收者”客户端将其复制到他们自己的画布上。

发送器只是在 (previousX, previousY) 和 (currentX, currentY) 之间画一条线以响应 mouseMove 事件。它通过AJAX 将这两组坐标发送到transmitter.php。它们坐在会话变量中，直到接收者通过调用receiver.php（也通过AJAX）收集它们。至少它应该是这样工作的。

这是发射器.php：

```
<?php

session_start();

if (!isset($_SESSION['strokes'])) $_SESSION['strokes'] = '';

$_SESSION['strokes'] .= $_GET['px'] . "," . $_GET['py'] . "," . $_GET['x'] . "," . $_GET['y'] . ';';

?> 
```

这是receiver.php：

```
<?php

session_start();

echo($_SESSION['strokes']);

$_SESSION['strokes'] = "";

?> 
```

如果您想知道我为什么要使用会话变量，那是因为它是我能想到的以其他脚本可以访问数据的方式存储数据的最快方式。我尝试在谷歌上搜索替代品，但找不到任何东西。如果有更好的方法，我很想听听。

无论如何，问题在于并非所有数据都能通过。这通过在接收者画布上绘制的线条中的间隙表现出来。我还在发送器和接收器的 JavaScript 文件中设置了一个小计数器，以准确检查发送/接收了多少“笔划”。收到的总是少于发送的，因此数据似乎在服务器端丢失。

冒着给你的代码比你需要看到的更多的风险，这是发送器.js中的代码，它将数据发送到服务器（n是我提到的计数器）：

```
function mouseMoveHandler(e)
{
    var x = e.pageX - canvasX;
    var y = e.pageY - canvasY;

    if (mouseDown)
    {
        canvas.moveTo(prevX, prevY);
        canvas.lineTo(x, y);
        canvas.stroke();
        sendToServer(prevX, prevY, x, y);
        n++;
    }

    prevX = x;
    prevY = y;
} 
```

这是接收器中将其取回并绘制它的代码（同样，n 是计数器）：

```
function responseHandler()
{
    if (xhr.readyState == 4)
    {
        var strokes = xhr.responseText.split(';');
        n += strokes.length - 1;
        for (var i = 0; i < strokes.length - 1; i++)
        {
            stroke = strokes[i].split(',');
            canvas.moveTo(stroke[0], stroke[1]);
            canvas.lineTo(stroke[2], stroke[3]);
            canvas.stroke();
        }
        setTimeout("contactServer()", 500);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:09:19.173

如果我正确阅读了您的问题；您正在尝试从不同的客户端访问相同的会话？如果是这种情况，这是不可能的，会话绑定到客户端/用户。

如果你想要一些实时的、多用户的东西，你可能应该看看 NodeJS，特别是[NodeJS Events](http://nodejs.org/api/events.html)。这是基于 JS 的，所以我认为它会很好地集成到您的应用程序中。

# java - 违反自定义约束时没有错误消息

> ID：10001273
> 
> 赞同：0
> 
> 时间：2012-04-03T20:57:21.830
> 
> 标签：java, constraints, bean-validation

我的自定义约束有以下代码：

```
@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.TYPE, ElementType.FIELD, ElementType.METHOD })
@Constraint(validatedBy = MinMaxValidator.class)
public @interface CheckMinMax{

    String message() default "MinMax constraint has been violated";

    Class<? extends Payload>[] payload() default {};

    Class<?>[] groups() default {};

    int min() default 1;

    int max() default 10;
} 
```

和验证器类：

公共类 MinMaxValidator 实现 ConstraintValidator {

```
int max;
int min;

@Override
public void initialize(CheckMinMax annotation) {
    max = annotation.max();
    min = annotation.min();

}

@Override
public boolean isValid(Integer value, ConstraintValidatorContext arg1) {
    if (value < min || value > max)
        return false;
    return true;
} 
```

}

现在，当我用我的注释注释我的 entitybean 并尝试使用以下代码传入一个违反我的约束的对象时：

```
validator.validate(obj); 
```

它可以工作，但没有错误消息......这里有什么遗漏吗？我如何管理它以输出默认错误消息“MinMax 约束已被违反”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:35:05.010

`Validator.validate()`方法没有抛出 ConstraintValidationException。它返回`Set<ConstraintViolation>`，如果有任何约束违规，您有责任抛出异常。

典型的使用模式是：

```
Set<ConstraintViolation> cvs = validator.validate(obj);
if(cvs.size() > 0){
  throw new ConstraintViolationException(cvs);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:51:04.570

我想出了如何打印出注释中定义的错误消息：

```
Set<ConstraintViolation<TypeOfObj> cvs = validator.validate(obj);
for(ConstraintViolation<TypeOfObj> violation : cvs) 
{
    logger.info(violation.getMessage());
} 
```

干杯

# c# - XNA 使用 2D 相机寻找鼠标位置

> ID：10001277
> 
> 赞同：4
> 
> 时间：2012-04-03T20:57:33.607
> 
> 标签：c#, xna, camera, mouse, tile

我已经尝试了我在网上找到的所有方法来获取鼠标相对于相机的位置，但没有任何效果。选择图块总是远离鼠标。另外，我将如何只更改我单击的图块而不是每个具有相同纹理的图块

相机类

```
public class Camera : Game1
{
    protected float _zoom;
    public Matrix _transform;
    public Vector2 _pos;
    protected float _rotation;

    public Camera()
    {
        _zoom = 1.0f;
        _rotation = 0.0f;
        _pos = Vector2.Zero;
    }

    public float Zoom
    {
        get { return _zoom; }
        set { _zoom = value; if (_zoom < 0.1f) _zoom = 0.1f; } // Negative zoom will flip image
    }

    public float Rotation
    {
        get { return _rotation; }
        set { _rotation = value; }
    }

    public void Move(Vector2 amount)
    {
        _pos += amount;
    }

    public Vector2 Pos
    {
        get { return _pos; }
        set { _pos = value; }
    }

    public Matrix get_transformation()
    {
        _transform = 
                     Matrix.CreateTranslation(new Vector3(-_pos.X, -_pos.Y, 0)) *
                     Matrix.CreateRotationZ(Rotation) *
                     Matrix.CreateScale(_zoom) *
                     Matrix.CreateTranslation(new Vector3(1024 * 0.5f, 768 * 0.5f, 0));
        return _transform;
    }

    public void Update()
    {
        Input();
    }

    protected virtual void Input()
    {
        KeyboardState _keyState;
        _keyState = Keyboard.GetState();

        if (_keyState.IsKeyDown(Keys.A))
        {
            _pos.X -= 5f;
        }
        if (_keyState.IsKeyDown(Keys.D))
        {
            _pos.X += 5f;
        }
        if (_keyState.IsKeyDown(Keys.W))
        {
            _pos.Y -= 5f;
        }
        if (_keyState.IsKeyDown(Keys.S))
        {
            _pos.Y += 5f;
        }
    }
} 
```

瓷砖类

```
class TileGeneration
{
    public Block[] tiles = new Block[3];
    public int width, height;
    public int[,] index;
    public Texture2D grass, dirt, selection;
    bool selected;
    MouseState MS;
    Vector2 mousePos;

    Camera camera;

    public TileGeneration()
    {

    }

    public void Load(ContentManager content, GraphicsDevice g)
    {
        grass = content.Load<Texture2D>(@"Tiles/grass");
        dirt = content.Load<Texture2D>(@"Tiles/dirt");
        selection = content.Load<Texture2D>(@"Tiles/selection");

        tiles[0] = new Block { Type = BlockType.Grass, Position = Vector2.Zero, texture = grass};
        tiles[1] = new Block { Type = BlockType.Dirt, Position = Vector2.Zero, texture = dirt};

        width = 50;
        height = 50;

        index = new int[width, height];

        camera = new Camera();

        Random rand = new Random();
        for (int x = 0; x < width; x++)
        {
            for (int y = 0; y < height; y++)
            {
                index[x,y] = rand.Next(0,2);
            }
        }
    }

    public void Update()
    {
        MS = Mouse.GetState();
        Matrix inverseViewMatrix = Matrix.Invert(camera.get_transformation());
        Vector2 mousePosition = new Vector2(Mouse.GetState().X, Mouse.GetState().Y);
        Vector2 worldMousePosition = Vector2.Transform(mousePosition, inverseViewMatrix);
        mousePos = worldMousePosition;
        Console.WriteLine(mousePos);

        if (MS.LeftButton == ButtonState.Pressed)
        {
            Console.WriteLine("Selected");
            selected = true;
        }
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        for (int x = 0; x < width; x++)
        {
            for (int y = 0; y < height; y++)
            {
              spriteBatch.Draw(tiles[index[x,y]].texture, new Rectangle(x * 64, y * 64, 64, 64), 
                    Color.White);
              if (selected && IsMouseInsideTile(x, y))
              {
                  if (tiles[index[x,y]].texture == grass)
                      tiles[index[x,y]].texture = dirt;
              }
              if(IsMouseInsideTile(x, y))
                  spriteBatch.Draw(selection, new Rectangle(x * 64, y * 64, 64, 64), Color.White);
            }
        }    
    }

    public bool IsMouseInsideTile(int x, int y)
    {
        return (mousePos.X >= x * 64 && mousePos.X <= (x + 1) * 64 &&
            mousePos.Y >= y * 64 && mousePos.Y <= (y + 1) * 64);
    } 
```

游戏1平局

```
protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.AlphaBlend, null, null, null, null, 
            camera.get_transformation());

        tile.Draw(this.spriteBatch);
        player.Draw(this.spriteBatch);
        spriteBatch.End();

        base.Draw(gameTime);
    } 
```

![在此处输入图像描述](../Images/56f60dc277c09fa45009668a10aac785.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T22:23:50.087

可能有更好的方法，但是：

```
// absoluteMouseX will be the value from your MouseState, and camera will be an instance of your class
// You may need to convert your rotation to radians.

float relativeMouseX = absoluteMouseX + camera.Pos.X;

float relativeMouseY = absoluteMouseY + camera.Pos.Y; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T18:48:15.303

我现在没有 XNA 来测试它，但我记得有这个问题。

我拥有的一段代码可能会有所帮助：

```
 Vector2 mouse = new Vector2(ms.X, ms.Y);
        Matrix transform = Matrix.Invert(camera.ViewMatrix);

        Vector2.Transform(ref mouse, ref transform, out mouse);

        selectedRow = (int)(mouse.Y / Tile.SIZE);
        if (selectedRow < 0) selectedRow = 0;
        else if (selectedRow >= rows) selectedRow = rows - 1;

        selectedCol = (int)(mouse.X / Tile.SIZE);
        if (selectedCol < 0) selectedCol = 0;
        else if (selectedCol >= cols) selectedCol = cols - 1; 
```

两件事：
1\. 注意行如何依赖于鼠标的 Y 组件，以及列如何依赖于 X 组件。
2\. 请注意，直接获取鼠标放置在哪个图块上比询问每个图块是否“里面”有鼠标要快得多。

# node.js - 每次刷新时 Socket.io 连接都会堆积

> ID：10001282
> 
> 赞同：3
> 
> 时间：2012-04-03T20:58:14.620
> 
> 标签：node.js, socket.io

我将 socket.io 与 node.js 一起使用，并且在我的一条路由中，我有连接事件处理程序。

```
 app.io.on('connection', function(socket) {
                    console.log('connect');

                    socket.on('disconnect', function(){
                        console.log('disconnect');
                        res.end();
                    });
            }); 
```

每次我刷新调用此路由的页面时，它似乎都会不断增加，例如，如果我刷新 5 次，我将在一次刷新时在日志中获得 5 条“连接”消息。

有没有一种很好的方法来限制这一点，所以它不会这样做？

谢谢！

编辑：

当我反复刷新时，我收到此错误：

> （节点）警告：检测到可能的 EventEmitter 内存泄漏。增加了 11 位听众。使用emitter.setMaxListeners() 增加限制

我可以增加限制，但我觉得这不是正确的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:40:20.380

您必须将代码放在请求处理程序之外（每个请求都会调用该处理程序）。此代码应该处理所有客户端的传入连接（而不是每个请求）。在您的示例中，它会在每个请求上创建一个新的事件侦听器，您只需要一个！

# javascript - HTML5 Canvas：如何处理 mousedown mouseup mouseclick

> ID：10001283
> 
> 赞同：15
> 
> 时间：2012-04-03T20:58:16.933
> 
> 标签：javascript, html, canvas

我一直在玩html5画布并遇到了问题。

```
canvas.onmousedown = function(e){
        dragOffset.x = e.x - mainLayer.trans.x;
        dragOffset.y = e.y - mainLayer.trans.y;
        canvas.onmousemove = mouseMove;
}
canvas.onmouseup = function(e){
    canvas.onmousemove = null;
}

canvas.onmouseclick = mouseClick;

function mouseMove(e){
    mainLayer.trans.x = e.x - dragOffset.x;
    mainLayer.trans.y = e.y - dragOffset.y;
    return false;
}

function mouseClick(e){
    // click action
} 
```

在这段代码中，我通过拖动偏移量进行平移，使我的鼠标单击+拖动平移画布视图。但我也有一个点击事件。现在，每当我拖动鼠标并松开时，它都会同时运行 onmouseup 和 onclick。

有什么技术可以使它们独一无二吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-05T21:47:02.213

在元素上成功执行*mousedown*和*mouseup*后会发生*单击事件。*您在鼠标事件顶部使用*单击*是否有任何特殊原因？只需*mousedown/mouseup*就可以了，*单击*是一个方便的事件，可以为您节省一点编码。

 ***我通常会这样做：

```
var mouseIsDown = false;

canvas.onmousedown = function(e){
    dragOffset.x = e.x - mainLayer.trans.x;
    dragOffset.y = e.y - mainLayer.trans.y;

    mouseIsDown = true;
}
canvas.onmouseup = function(e){
    if(mouseIsDown) mouseClick(e);

    mouseIsDown = false;
}

canvas.onmousemove = function(e){
    if(!mouseIsDown) return;

    mainLayer.trans.x = e.x - dragOffset.x;
    mainLayer.trans.y = e.y - dragOffset.y;
    return false;
}

function mouseClick(e){
    // click action
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:03:22.973

在函数 mouse move 中设置一个布尔值来表示发生了移动，将所有代码包含在 mouseup 中并使用 if 语句单击以检查是否没有发生拖动。在这些 if 语句之后和函数结束之前，将拖动布尔值设置为 false。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-03T21:03:03.260

`clickStatus = 0;`尝试在每个函数检查开始时声明一个变量，例如和，以确保正确的值。

```
if (clickstatus == 0) {
     clickstatus =1;
     ...//function code
 }; 
```***

# css - 在CSS中将文本和选择框对齐到相同的宽度？

> ID：10001291
> 
> 赞同：81
> 
> 时间：2012-04-03T20:58:49.707
> 
> 标签：css, html, textbox, drop-down-menu

好的，这似乎是不可能的。我有一个文本框和一个选择框。我希望它们的宽度完全相同，以便它们在左边距和右边距上对齐。

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            input, select {
                width: 200px;
            }
        </style>
    </head>
    <body>
        <input type="text" value="ABC"><br>
        <select>
            <option>123</option>
        </select>
    </body>
</html> 
```

你觉得这样就行了，对吧？没有。Firefox 中的选择框短了 6 像素。见截图。![火狐中的截图](../Images/99b0c18fa72f0e308b141d7d40b0e28a.png)

好的，让我们编辑代码并制作两种样式。

```
<style type="text/css">
    input {
        width: 200px;
    }
    select {
        width: 206px;
    }
</style> 
```

好的，这行得通！

![已在 Firefox 中修复](../Images/6cb0ca4e117807688b279011ec078d1d.png)

哦，等等，在 Chrome 中进行更好的测试...

![铬截图](../Images/fe71a74619df9335434253e7979c8d80.png)

![FFFFFFFUUUUUUUUUUUUU](../Images/fca34b5b2fed08b4b48a5bde5bb84503.png)

有人能告诉我如何在所有浏览器中排列这些吗？为什么我不能只做 width: 200px ，为什么所有浏览器都显示不同？另外，当我们在这里时，为什么文本框和选择框的高度不同？我们如何让它们达到相同的高度？尝试过 height 和 line-height 无济于事。

* * *

## 解决方案：

好的，我在以下答案的帮助下找到了解决方案。关键是使用**box-sizing:border-box**属性，这样当您指定*包含*边框和内边距的宽度时。在此处查看[出色的解释](http://www.reddit.com/r/webdev/comments/s8u0p/wow_this_speced_behavior_was_the_source_of_so/c4c6cuy)。然后浏览器无法填充它。

代码如下，还将框的高度设置为相同的大小，并将框内的文本缩进，使其对齐。您还需要设置边框，因为 Chrome 有一个看起来非常奇怪的边框，它用于选择框，这会导致对齐错误。这将适用于 HTML5 网站（例如支持 IE9、Firefox、Chrome、Safari、Opera 等）。

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            input, select {
                width: 200px;
                border: 1px solid #000;
                padding: 0;
                margin: 0;
                height: 22px;
                -moz-box-sizing: border-box;
                -webkit-box-sizing: border-box;
                box-sizing: border-box;
            }
            input {
                text-indent: 4px;
            }
        </style>
    </head>
    <body>
        <input type="text" value="ABC"><br>
        <select>
            <option>123</option>
            <option>123456789 123123123123</option>
            <option>123456789 123123123123 134213721381212</option>
        </select>
    </body>
</html> 
```

只是最后一个警告，您可能不希望在此样式中包含输入按钮、复选框等，因此请使用`input:not([type='button'])`不将其应用于某些类型或用于`input[type='text'], input[type='password']`指定您确实希望将其应用于的类型。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T21:13:12.127

这是因为`<input type="text" />`元素的默认样式与元素略有不同，`<select>`例如边框、填充和边距值可能不同。

您可以通过元素检查器（例如 Firefox 的 Firebug 或 Chrome 的内置检查器）观察这些默认样式。此外，这些默认样式表因浏览器而异。

你有两个选择：

1.  将两个元素的边框、填充和边距值显式设置为相同
2.  要包含在您自己的 CSS 样式表之前的 CSS 重置样式表

我会选择选项 1。因为选项 2。需要大量的工作，你最终会得到大量不必要的 CSS。但是一些 Web 开发人员更喜欢从头开始并拥有完全的控制权。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T21:08:05.087

这会让你接近，但这种精确度几乎是不可能的。

```
<div style="width: 200px"><input type="text" style="width: 100%; margin: 0; padding: 0" /></div>
<div style="width: 200px">
    <select id="Select1" style="width: 100%; margin: 0; padding: 0">
        <option>1</option>
    </select>
</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-03T21:12:36.207

不同的浏览器默认应用不同的样式。我发现在 Firefox 和 Chrome 中将边距和填充都重置为 0 会使两个元素的宽度相等。

```
<html>
    <head>
        <title>Test</title>
        <style type="text/css">
            input, select {
                margin: 0;
                padding: 0;
                width: 200px;
            }
        </style>
    </head>
    <body>
        <input type="text" value="ABC"><br />
        <select>
            <option>123</option>
        </select>
    </body>
</html> 
```

在尝试使设计在多个浏览器中看起来很棒之前，我个人喜欢使用最小的 CSS 重置样式表，例如[YUI CSS Reset 。](http://developer.yahoo.com/yui/reset/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-13T11:35:58.637

向有问题的选择和输入标签添加一个类，即：

```
<input class='custom-input'/>
<select class='custom-input'></select> 
```

然后修改下面的 css 以适合您的设计：

```
.custom-input {
        width:140px;
        border:1px solid #ccc;
        margin:1px;
        padding:3px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        -webkit-box-sizing: border-box;
        -ms-box-sizing:content-box;
        -moz-box-sizing:content-box;
        -webkit-box-sizing:content-box;
        box-sizing:content-box;
    } 
```

obvs 这是对支持浏览器的修复

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T07:35:45.960

如果您使用表 4 输入，您可以使用以下解决方案 - 也与 ie7 兼容：

```
<tr style="width:1px;"><td style="width:inherit;position:relative;">
    <select style="width:100%;"> 
    </select> 
</td></tr>
<tr><td>
    <input type="text" style="width:150px;"/>
</td></tr> 
```

这样表格单元格的宽度将固定为输入的宽度，

这样， select 将始终采用剩余的宽度并与 d 输入完美对齐。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T10:04:03.390

尝试从两个元素中删除默认边框：

```
select, input {
 border:0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-20T17:03:03.470

是的，非常令人沮丧。但是，直到我在 HTML 页面的顶部放置一个“<!DOCTYPE html>”标签之前，我从来没有遇到过问题。我的网页在我可以测试的所有平台上都正确呈现，直到我将该标签放在我的文档顶部。

虽然这是“真正的规范”，但它似乎是这些对齐问题的根源。FWIW，我正在使用 HTML5 元素、内联 CSS 等，所有这些都没有该标记来指定 HTML5。YMMV。

# objective-c - 重复协议定义警告，但我需要该协议的倍数

> ID：10001293
> 
> 赞同：5
> 
> 时间：2012-04-03T20:59:09.383
> 
> 标签：objective-c

注意：这与[此问题](https://stackoverflow.com/questions/8138689/warning-duplicate-protocol-definition-of-is-ignored)相似，但不一样。我保证。

我有一系列表视图，它们调用模式视图来对表的内容进行排序。为此，我在一个表视图控制器的头文件中设置了一个简单的协议，并且效果很好。然后我将此协议复制到我的其他表视图控制器并收到此警告：

> 'ModalViewDelegate' 的重复协议定义被忽略

现在我意识到这只是一个警告，但我不想每次编译时都看到它。为了摆脱警告，我导入了最初定义协议的头文件。再一次，我并不完全满意。将头文件导入每个表视图似乎很草率，这样我就可以在没有警告的情况下使用协议。

如果你已经读到这里，我感谢你。我的问题是‘为什么会这样？有没有更好的方法来消除这个警告，同时仍然使用相同的协议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T21:08:08.890

> 是否有更好的方法可以在仍使用相同协议的同时消除此警告？

编译器需要了解协议以便您引用它。有两种方法可以做到这一点：将声明协议的标头导入您正在使用它的文件中，或者在这些文件中对协议进行前向声明：`@protocol MyProtocol;`. 第二个仅在协议需要相互引用时才真正有用（以避免循环导入）；如果一个类需要采用协议，就需要看到协议中方法的声明，也就是说它需要看到协议声明本身，即头部。

> 将头文件导入每个表视图似乎很草率，这样我就可以在没有警告的情况下使用协议。

这不是马虎，这是事情的运作方式。*听起来您将协议声明放入其自己的*标头中并在需要的任何地方导入它可能是有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T15:44:15.997

我发现了一个类似的警告，其中在类的标题中定义了 @protocol。将该协议分解为自己的 .h 并将其导入其他地方修复它。

# html - 如何将图像放置在带有填充的文本旁边？

> ID：10001294
> 
> 赞同：5
> 
> 时间：2012-04-03T20:59:09.400
> 
> 标签：html, css

```
<h2><img src="img.jpg" height="75px"> some text</h2> 
```

我想将我的图像放在一段文本旁边，但稍微向下填充，我该如何实现？我`style: padding 10px;`在图像标签内尝试过但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:08:59.763

我想你正在寻找这样的东西。[http://jsfiddle.net/3HZr7/](http://jsfiddle.net/3HZr7/)

```
<h2>
    <img src="img.jpg" height="75px"> 
    <span>some text</span>
</h2>

h2{
  overflow: auto;    
}

h2 span{

   float: left;
   margin-top: 10px;
   margin-left: 10px;
}

h2 img{
   float: left;        
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:08:58.930

你误解了**[CSS 盒子模型](http://www.w3.org/TR/CSS2/box.html)**。

padding 负责盒子内部的空间，而**margin**负责盒子外部的空间，盒子从它的容器中得到的空间。

因此，您可能的解决方案很简单：

1.  应用于`padding`父元素。
2.  应用于`margin`图像元素。

**[例子。](http://jsfiddle.net/R9pE2/)**

# javascript - jQuery Datepicker 前一个完整的月份

> ID：10001298
> 
> 赞同：0
> 
> 时间：2012-04-03T20:59:18.773
> 
> 标签：javascript, jquery

我在两个输入字段中使用 Datepicker 以允许用户分别选择开始日期和结束日期。我很好奇 jQuery UI 的 datepicker 是否有设置将开始日期字段初始化为结束日期前两个完整月的时间段，默认为当前日期。因此，当用户打开页面时，结束日期将是当前日期，开始日期将显示当前日期之前的两个完整月，例如结束日期初始化为 4-3-2012，开始日期将是 2 -1-12。

我打算编写一些自定义公式来处理这个问题，但想确保 Datepicker 中还没有内置的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:05:11.590

```
$( ".selector" ).datepicker({"defaultDate":  ((today.getMonth() +11)%12) + "/01/" + today.getFullYear()});​ 
```

为了从月份中“减去 2”，我们加 11 并取余数，因为 JS 月份是从 0 开始的，我们不想在 -1 个月结束。

编辑：根据澄清编辑算法

[提琴手](http://jsfiddle.net/RjLQN/10/)

# c# - XNA 精灵旋转点

> ID：10001299
> 
> 赞同：1
> 
> 时间：2012-04-03T20:59:23.200
> 
> 标签：c#, math, xna, rotation

我正忙于 XNA 中的一个小型自上而下的射击游戏。现在我有一个小数学问题：我有一个精灵，一个拿着 9 毫米的人。现在精灵看着鼠标光标。射击的时候，我想在枪管末端显示一点枪口闪光。但是，当您旋转角色时，枪管末端的坐标会发生变化。

例如，当桶的末端在玩家头部上方 14 像素时，如何在作为桶末端的精灵中获得正确的坐标？（自上而下） ![在此处输入图像描述](../Images/35d420d0cec0616077738363931aa29c.png)

所以基本上我需要知道如何获得与原点有一定角度的圆中某个点的坐标。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:08:17.920

```
x=orig.x+cos(alpha)*r;
y=orig.y+sin(alpha)*r; 
```

其中 alpha 是 x 轴与延伸桶的线之间的角度；r 是圆的半径（桶的长度）。

一个或两个`+`s 可能必须替换为“-”，具体取决于坐标系的方向（或者在 alpha 上添加 90 度的倍数（最多 270），直到你做对了）。

# python - 如何连接列表中的字符串对

> ID：10001301
> 
> 赞同：0
> 
> 时间：2012-04-03T20:59:32.250
> 
> 标签：python, string, list

我有一个类似的清单

```
myl = ['A','B','C','D','E','F'] #length always even 
```

现在我想要的输出是`'AB','CD','EF'`

我试过了

```
>>> myl = ['A','B','C','D','E','F']
>>> even_pos = myl[::2]
>>> odd_pos = myl[::-2]
>>> odd_pos.reverse()
>>> newlist = zip(even_pos,odd_pos)
>>> for x in newlist:
...     print "".join(list(x))
...
...
AB
CD
EF
>>> 
```

我不喜欢这种方式，因为我认为这太过分了。

那么，有没有更好的方法来实现我的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:02:37.037

您可以使用列表推导式或生成器表达式简洁地做到这一点：

```
>>> myl = ['A','B','C','D','E','F']
>>> [''.join(myl[i:i+2]) for i in range(0, len(myl), 2)]
['AB', 'CD', 'EF']
>>> print '\n'.join(''.join(myl[i:i+2]) for i in range(0, len(myl), 2))
AB
CD
EF 
```

对于这种特殊情况，您可以替换`''.join(myl[i:i+2])`为，但是当您想要进行三个或更多的组时，使用该方法更容易。`myl[i] + myl[i+1]``''.join()`

或者来自以下文档的替代方案[`zip()`](http://docs.python.org/library/functions.html#zip)：

```
>>> map(''.join, zip(*[iter(myl)]*2))
['AB', 'CD', 'EF'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-03T21:06:19.340

为什么你的方法这么复杂？你基本上可以做你所做的，但是在一行中，像这样：

```
[ "".join(t) for t in zip(myl[::2], myl[1::2]) ] 
```

FJ的回答虽然更有效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T21:04:55.460

这个怎么样？

```
>>> ["%s%s" % (myl[c], myl[c+1]) for c in range(0, 6, 2)]
['AB', 'CD', 'EF'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T21:07:11.373

我可能会写：

```
[myl[i] + myl[i + 1] for i in xrange(len(myl), step=2)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-17T20:47:53.870

你可以这样做：

```
myl = ['A','B','C','D','E','F']
[''.join(myl[i:i+2]) for i in range(0, len(myl), 2)]
print '\n'.join(''.join(myl[i:i+2]) for i in range(0, len(myl), 2)) 
```

# php - 我可以将 PHP 配置为自动格式化它生成的 HTML 吗？

> ID：10001303
> 
> 赞同：0
> 
> 时间：2012-04-03T20:59:45.683
> 
> 标签：php

比如……</p>

这个 PHP 代码

```
<?php
echo '<html>';
echo '<body>';
echo '<h1>Header One</h1>';
echo '<p>Hello World!</p>';
echo '</body>';
echo '</html>';
?> 
```

生成此 HTML 标记

```
<html><body><h1>Header One</h1><p>Hello World!</p></body></html> 
```

是否有任何函数、库或配置选项可以使 PHP 根据输出中生成的 html 标记的嵌套自动应用一些简单的格式（换行符和缩进）？所以会生成这样的东西……</p>

```
<html>
      <body>
            <h1>Header One</h1>
            <p>Hello World!</p>
      </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:13:49.390

您可以尝试像[Smarty](http://www.smarty.net/)、[Savant](http://phpsavant.com/)、[PHP Sugar](http://php-sugar.net/)或[VLib](http://vlib.clausvb.de/vlibtemplate.php)这样的模板引擎。

或者你可以去突击队处理[输出](http://php.net/manual/en/function.ob-start.php)（我认为这是一个黑客）。`ob_start('ob_tidyhandler');`

*对于输出处理，可能未安装或启用 Tidy，通常[您需要安装的软件包已命名`php-tidy`](https://stackoverflow.com/a/42597953/10981125)，您需要`extension=tidy`在 php.ini中取消注释*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:25:48.700

If I understand your question right, you want to pretty-print the HTML output.

This can be done by post-processing the output of your PHP script. Either by using PHP's output handling feature combined with the [tidy extension^(*­Docs*)](http://php.net/manual/en/book.tidy.php):

```
ob_start('ob_tidyhandler'); 
```

Tidy is an extension specialized on cleaning up HTML code, changing indentation etc.. But it's not the only way.

Another alternative is to delegate the post-processing task to the webserver, e.g. [output filters in Apache HTTP Server^(*­Docs*)](http://httpd.apache.org/docs/2.4/filter.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T21:02:15.630

您可以将 html 放入您的 PHP 脚本中，而无需回显它。您可能还想寻找像[smarty](http://www.smarty.net/)这样的 PHP 模板引擎，这样您就可以将视图与逻辑分开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T21:05:05.770

我更喜欢使用[heredoc 字符串](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)并自己格式化/缩进 HTML。在 PHP 代码中混合 HTML 字符串会很快导致代码不可读、不可维护。这种方法的一些优点：

*   引号不需要转义。
*   您可以将变量放在 heredoc 字符串中。
*   即使使用循环代码，您也可以在 heredoc 字符串中输出 HTML。如果这些字符串相对于您的其他 HTML 块正确缩进，您仍将获得具有良好缩进的 HTML 代码。
*   它迫使您考虑何时要打印 HTML，并以块的形式打印它，而不是在代码中散布许多小块（非常难以阅读和维护）。

最好尽可能将 PHP 代码与 HTML 分开，无论这意味着使用模板引擎还是只是将所有代码放在所有 HTML 之前。然而，仍然有最容易混合 PHP 和 HTML 的时候。

这是一个例子：

```
<?php
$text = 'Hello World!';
echo <<<HTML
<html>
    <body>
        <h1>Header One, with some '"quotes"'</h1>
        <p>$text</p>
    </body>
</html>

HTML;
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T21:04:02.637

...或者您可以使用“<<<”运算符，您可以在其中自己设置队形：

```
<?php

echo <<<DATA
<html>
      <body>
            <h1>Header One</h1>
            <p>Hello World!</p>
      </body>
</html>
DATA; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-03T21:04:14.337

你可以这样做（我的偏好）：

```
<html>
      <body>
            <h1>Header One</h1>
            <p>Hello World!</p>
            <?php echo '<p>Hello Hello!</p>'; ?>
      </body>
</html> 
```

或者：

```
<?php

$html = '<html><body><h1>Header One</h1><p>Hello World!</p></body></html>';

$tidy = new tidy();
$tidy->parseString($html, array('indent'=> true,'output-xhtml'=> true), 'utf8');
$tidy->cleanRepair();

echo $tidy;

?>"; 
```

...将打印：

```
<html>
      <body>
            <h1>Header One</h1>
            <p>Hello World!</p>
      </body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T16:47:58.527

如果下面的代码看起来对使用 php 生成 html 很有用，请试试这个库 [https://github.com/raftalks/Form](https://github.com/raftalks/Form)

```
Html::make('div', function($html))
{
    $html->table(function($table)
    {
        $table->thead(function($table)
        {
            $table->tr(function($tr)
            {
                $tr->th('item');
                $tr->th('category');
            });
        });

        $table->tr(function($tr)
        {   
            $tr->td()->ng_bind('item.name','ng-bind');
            $tr->td()->ng_bind('item.category','ng-bind');

            $tr->setNgRepeat('item in list','ng-repeat'); //using second parameter to force the attribute name.
        });

        $table->setClass('table');
    });

   $html->setClass('tableContainer');
}); 
```

# r - 在 Windows 上安装 R XML 包的问题

> ID：10001307
> 
> 赞同：1
> 
> 时间：2012-04-03T21:00:15.300
> 
> 标签：r

我很想在不在 CRAN 上的 Windows 上安装最新版本的 R XML 包

从其他堆栈流问题中，我已经下载了相关的 zip 文件 XML_3.9-4.1.zip，但需要一些分步帮助

我试过跑步

```
install.packages("C:\Users\pssguy\Downloads\XML_3.9-4.1.zip", repos = NULL, type="source")` 
```

并得到错误

```
Error: '\U' used without hex digits in character string starting "C:\U" 
```

我应该先打开拉链吗？

似乎还有一个命令模式选项。是不是更好，如果是这样，我之前应该在哪个目录以及确切的代码是什么

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:14:25.940

\ 用于表示要转义字符串中的以下字符。将文件路径中的所有 \ 替换为 \ 或 /

所以`"C:\Users\pssguy\Downloads\XML_3.9-4.1.zip"`改为`"C:\\Users\\pssguy\\Downloads\\XML_3.9-4.1.zip"`或`"C:/Users/pssguy/Downloads/XML_3.9-4.1.zip"`

# c# - 无法加载文件或程序集 CrystalDecisions.ReportAppServer.ClientDoc

> ID：10001310
> 
> 赞同：23
> 
> 时间：2012-04-03T21:00:20.237
> 
> 标签：c#, asp.net-mvc, crystal-reports

我已经看过关于 SO 的类似问题，但据我所知，没有什么能与我的问题完全匹配。

异常消息：

> 无法加载文件或程序集“CrystalDecisions.ReportAppServer.ClientDoc，版本=13.0.2000.0，文化=中性，PublicKeyToken=692fbea5521e1304”或其依赖项之一。该系统找不到指定的文件。

该文件在我的 GAC 中。我正在运行 VS2010 的 32 位机器（Windows 7）上开发，一切都是 .NET4。目标主机是 64 位 Win 2008 R2。我的本地机器安装了 VS2010 的 CR；主机具有 VS2010 的 64 位运行时。我正在为此 Web 应用程序以“任何 CPU”模式编译我的所有代码。

让我大吃一惊的是，它在 GAC 中找不到该文件。这是一个 IIS 应用程序；是否存在某种权限问题？我认为 IIS 可以访问 GAC。

一些关于做什么的建议将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-04T14:26:22.487

事实证明，答案简单得可笑，但令人费解的是为什么它是必要的。

在服务器上的 IIS 管理器中，我将 Web 应用程序的应用程序池设置为不允许 32 位程序集。

它似乎假设，在 64 位系统上，您必须需要 32 位程序集。奇怪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T22:50:55.820

1) 将您的 .net 配置文件从客户端配置文件更改为 .Net Framework 4.0 [http://msdn.microsoft.com/en-us/library/bb398202.aspx](http://msdn.microsoft.com/en-us/library/bb398202.aspx)

2) 检查您的嵌入互操作类型标志

![嵌入互操作类型标志](../Images/bf06aae3070522367d949526849f9c4d.png) [http://weblogs.asp.net/cazzu/archive/2011/03/11/check-your-embed-interop-types-flag-when-doing-visual-studio-extensibility-work.aspx](http://weblogs.asp.net/cazzu/archive/2011/03/11/check-your-embed-interop-types-flag-when-doing-visual-studio-extensibility-work.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T04:40:58.607

关于需要 32 位支持的 64 位系统。我不觉得这很奇怪：

尽管部署到 64 位系统，但这并不意味着所有引用的程序集都必须是 64 位 Crystal Reports 程序集。此外，Crystal Reports 程序集在很大程度上只是它们所基于的遗留 DLL 集合的包装器。主要引用的程序集需要许多 32 位 DLL。错误消息“无法加载程序集”也涉及这些 DLL。要直观地查看它们是什么，请访问 www.dependencywalker.com 并直接在该 IIS 服务器上对相关程序集运行“依赖”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-14T12:14:49.343

您只需在部署服务器上安装[Crystal Report Report Run Time下载。](http://scn.sap.com/docs/DOC-7824)如果问题仍然存在，则将检查 asp_client 文件夹放在项目主文件夹中。

# ruby-on-rails - rake任务中的增量参数

> ID：10001313
> 
> 赞同：0
> 
> 时间：2012-04-03T21:00:26.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, each, increment

我有一个 API 调用需要在“块”中进行（由于 API 限制）。然后我会遍历这些数据。

所有这些都发生在 rake 任务中。

这是循环：

```
Stripe::Event.all(:count => 100, :offset => 0).each do |event|

end 
```

但我需要将`offset`参数增加 100（即 100、200、300）才能真正循环遍历所有事件。

那么`offset`在 rake 任务中增加该参数的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:04:34.287

如果 Stripe::Event 是 ActiveRecord 模型，我认为您正在寻找：

```
Stripe::Event.find_in_batches(:batch_size => 100).each do |batch|
  batch.each do |event|
    ...
  end
end 
```

否则，我认为您可以查看[http://apidock.com/rails/ActiveRecord/Batches/find_in_batches](http://apidock.com/rails/ActiveRecord/Batches/find_in_batches)以获取有关如何解决此问题的灵感。

最直接的方法是

```
events = "not blank"
count = 100
offset = 0
until events.blank? do
  events = Stripe::Event.all(:count => count, :offset => offset)
  events.each do |event|

  end
  offset += count
end 
```

# c++ - 通过调用 _mm_stream_si64x() 实现性能提升的示例程序是什么？

> ID：10001329
> 
> 赞同：-3
> 
> 时间：2012-04-03T21:02:00.997
> 
> 标签：c++, visual-c++, intrinsics

通过调用 _mm_stream_si64x() 实现性能提升的示例程序是什么？

关于 _mm_stream_si64x 的 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/35b8kssy.aspx](http://msdn.microsoft.com/en-us/library/35b8kssy.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:46:59.370

就像参考资料所说， _mm_stream_si64x 内部直接写入 Dest 指向的内存位置，而不将 Dest 写入缓存。因此，如果您想将数据复制到 Dest 指针，但不打算在很久以后从 Dest 指针访问数据，那么这个内在函数将比等效的 _mm_stream_si64 内在函数“实现性能提升”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:00:40.583

这是一个示例，假设源和目标足够大：

```
const char *source;
char *destination;
for (size_t offset= 0; offset<100*1024*1024; offset+= 64)
{
    *(__int64 *)(destination + offset)= *(__int64 *)(source + offset);
} 
```

如果您手动执行此操作而不是使用`_mm_stream_si64x`，则可以有效地刷新缓存。

# visual-studio-2010 - 无法在 VS.Net 2010 中添加安全的 Web 引用

> ID：10001330
> 
> 赞同：1
> 
> 时间：2012-04-03T21:02:02.187
> 
> 标签：visual-studio-2010, ssl-certificate, web-reference

背景：我的任务是创建一个单点登录解决方案，它将我们的内部用户重定向到供应商的 Web 应用程序。我已将其设置为 ASP.Net 项目，该项目将调用供应商提供的 Web 服务。该服务将返回一个 URL 和一个用于登录供应商站点的令牌。所有这一切都必须安全地完成。

问题：当使用 Visual Studio 的***Add Web Reference***对话框下载 WSDL 并生成所需的代理类时，我收到以下错误：

> 下载“https://server:port/folder/Service?wsdl”时出错。底层连接已关闭：发送时发生意外错误。身份验证失败，因为远程方已关闭传输流。元数据包含无法解析的引用：“https://server:port/folder/Service?wsdl”。[向https://server:port/folder/Service?wsdl](https://server:port/folder/Service?wsdl)发出 HTTP 请求时出错 . 这可能是由于在 HTTPS 情况下未使用 HTTP.SYS 正确配置服务器证书。这也可能是由于客户端和服务器之间的安全绑定不匹配造成的。底层连接已关闭：发送时发生意外错误。身份验证失败，因为远程方已关闭传输流。如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

除了这个错误，***添加引用***按钮是灰色的，阻止我添加引用和生成代理类。

该项目在 .Net Framework 4.0 下运行。我已正确下载并安装了必要的客户端密钥/证书。我已将 IP 地址和服务器名称添加到主机文件中，并将两者都添加到代理绕过列表中。我可以浏览到端点并在 IE 和 VS 的 Web 浏览器中查看 WSDL。我什至可以在 VS 的***Add Web Reference***对话框中查看 WSDL。在每种情况下，都会提示我选择要使用的证书，我会这样做。

我无权访问 Web 服务本身或它所在的服务器。

我在谷歌上花了很多时间，但一直没有找到解决办法。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T18:24:12.893

***通过下载 WSDL 并通过引用 URL 通过Add Web Reference***对话框将其拉入 VS 来解决此问题`file:\\\drive:\pathname\filename.wsdl`。

# javascript - Watir 如何始终如一地处理 javascript 下拉菜单？

> ID：10001332
> 
> 赞同：0
> 
> 时间：2012-04-03T21:02:05.260
> 
> 标签：javascript, drop-down-menu, watir-webdriver

我是 watir 的 n00b，我正在测试一个使用 extjs 的网络应用程序。该应用程序有一个主菜单，其中包含几个具有子项目的项目。主菜单项之一与其子菜单之一具有相同的文本。在 watir webdriver 我有这个代码：

```
jobs_menu = d.p(:text => "Jobs")
jobs_menu.when_present.flash
jobs_menu.click
jobs_submenu_item = d.a(:text => "Jobs")
jobs_submenu_item.when_present.flash
jobs_submenu_item.click 
```

这应该闪烁并单击第一个菜单并导致子菜单下降。然后它应该闪烁并单击子菜单项。我在 3 个不同的浏览器中得到 3 个结果：

Firefox - 第一个菜单闪烁并下降，子菜单项闪烁，但没有被点击

Chrome - 第一个菜单闪烁并下降，子菜单项闪烁并单击 OK - 耶！

IE - 第一个菜单闪烁并下降，然后消失，并且无法使用 ElementNotVisibleError 找到子菜单项

有趣的是要注意不同的菜单，其中下拉文本与子菜单文本不同，然后 Firefox 和 Chrome 都可以正常工作。IE 仍然给出 ElementNotVisibleError。

我怎样才能让它在所有 3 个浏览器中都能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:40:28.033

在某些情况下，菜单的显示不需要单击，并且可以通过将鼠标悬停在菜单上来触发。在这种情况下，尝试使用 .hover 而不是 .click 来显示菜单可能会起作用。

许多这些自定义控件的一个问题是它们在不同的浏览器上的工作方式不同，这意味着您的自动化代码可能必须考虑到这一点，这是这样的自定义控件的缺点，而不是使用基本的 HTML 元素

# prolog - 如何在 Prolog 中解决这个难题？

> ID：10001344
> 
> 赞同：0
> 
> 时间：2012-04-03T21:03:01.673
> 
> 标签：prolog, puzzle

我正在尝试解决 Prolog 中的一个难题，该难题涉及取一个数字的平方（数字列表的列表）并返回从顶部开始并逐行向下的最大数字组合列表。每次移动都必须向下、向右向下或向左向下。

我一直在尝试这样做一段时间，有人有我可以开始的地方吗？

例如，在板上

```
 [[0, 2, 1, 0],
  [0, 1, 1, 0],
  [0,10,20,30]] 
```

最好的举动是`[1, 2, 3]`33分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:17:54.923

所以这就是你如何*做到*的。我知道这有点罗嗦，那可能是因为我对 Prolog 也不是很流利......

```
% Lookup a value in a list by it's index.
% this should be built into prolog?
at(0, [H|_], H).
at(N, [_|T], X) :- 
    N > 0,
    N1 is N - 1,
    at(N1, T, X).

% like Haskell's maximumBy; takes a predicate, a 
% list and an initial maximum value, finds the
% maximum value in a list
maxby(_, [], M, M).
maxby(P, [H|T], M0, M) :-
    call(P, H, M0, M1),
    maxby(P, T, M1, M).

% which of two paths has the bigger score?
maxval(path(C,  I), path(C1, _), path(C, I)) :- C >= C1.
maxval(path(C0, _), path(C, I),  path(C, I)) :- C0 < C.

% generate N empty paths as a starting value for
% our search
initpaths(N, Ps) :- 
    findall(path(0, []), 
            between(0, N, _), 
        Ps). 

% given the known best paths to all indexes in the previous
% line and and index I in the current line, select the best
% path leading to I.
select(Ps, I, N, P) :-
    I0 is I-1,
    I1 is I+1,
    select(Ps, I0, N, path(-1, []), P0),
    select(Ps, I,  N, P0, P1),
    select(Ps, I1, N, P1, P).

% given the known best paths to the previous line (Ps),
% an index I and a preliminary choice P0, select the path 
% leading to the index I (in the previous line) if I is within 
% the range 0..N and its score is greater than the preliminary 
% choice. Stay with the latter otherwise.
select(_, I, _, P0, P0) :- I < 0.
select(_, I, N, P0, P0) :- I > N.
select(Ps, I, _, P0, P) :- 
    at(I, Ps, P1),
    maxby(maxval, [P0], P1, P).

% given the known best paths to the previous line (P1),
% and a Row, which is the current line, extend P1 to a 
% new list of paths P indicating the best paths to the
% current line.
update(P1, P, Row, N) :-
    findall(path(C, [X|Is]), 
            ( between(0, N, X)
            , select(P1, X, N, path(C0, Is))
            , at(X, Row, C1)
            , C is C0 + C1),
        P).

% solve the puzzle by starting with a list of empty paths
% and updating it as long as there are still more rows in 
% the square.
solve(Rows, Score, Path) :-
    Rows = [R|_],
    length(R, N0),
    N is N0 - 1,
    initpaths(N, IP),
    solve(N, Rows, IP, Score, Path).
solve(_, [], P, Score, Path) :- 
    maxby(maxval, P, path(-1, []), path(Score, Is0)),
    reverse(Is0, Path).
solve(N, [R|Rows], P0, Score, Path) :-
    update(P0, P1, R, N),
    solve(N, Rows, P1, Score, Path). 
```

我们试试看？以下是您的示例：

```
?- solve([[0,2,1,0], [0,1,1,0], [0,10,20,30]], Score, Path).
Score = 33,
Path = [1, 2, 3] ;
false.

?- solve([[0,1,1], [0,2,1], [10,0,0]], Score, Path).
Score = 13,
Path = [1, 1, 0] ;
false. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:49:23.817

我的序言有点不稳定。事实上，关于 prolog，我只记得它是声明性的。

这是一些用于查找最大路径值的haskell代码。找到跟踪应该是一个简单的下一步，但我想编码起来有点复杂。我想一个非常优雅的跟踪解决方案是使用单子。

```
maxValue :: [ [ Int ] ] -> Int
maxValue p = maximum $ maxValueHelper p
maxValueHelper :: [ [ Int ] ] -> [ Int ]
maxValueHelper [ row ] = row
maxValueHelper ( row : restOfRows ) = combine row ( maxValueHelper restOfRows )
combine :: [ Int ] -> [ Int ]-> [ Int ]
combine [ x ] [ y ] = [ x + y ]
combine ( x1 : x2 : lx ) ( y1 : y2 : ly ) =
   let ( z2 : lz ) = combine ( x2 : lx ) ( y2 : ly )
   in
   ( max ( x1 + y1 ) ( x1 + y2 ) : max ( x2 + y1 ) z2 : lz )

main :: IO()
main = print $ maxValue [[0,2,1,0], [0,1,1,0], [0,10,20,30]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:51:31.760

```
?- best_path_score([[0, 2, 1, 0],[0, 1, 1, 0],[0,10,20,30]], P, S).
P = [1, 2, 3],
S = 33. 
```

有了这个定义

```
best_path_score(Rs, BestPath, BestScore) :-
    aggregate_all(max(Score, Path), a_path(Rs, Path, Score), max(BestScore, BestPath)).

a_path([R|Rs], [P|Ps], Score) :-
    nth0(P, R, S0),
    a_path(Rs, P, Ps, S),
    Score is S0 + S.

a_path([], _, [], 0).
a_path([R|Rs], P, [Q|Qs], T) :-
    ( Q is P - 1 ; Q is P ; Q is P + 1 ),
    nth0(Q, R, S0),
    a_path(Rs, Q, Qs, S),
    T is S0 + S. 
```

# sql - 从按另一个 ID 分组的表中选择最近的（前 1 个）

> ID：10001347
> 
> 赞同：2
> 
> 时间：2012-04-03T21:03:04.457
> 
> 标签：sql, sql-server-2008

我有一个表，其中包含来自用户的消息。如何使用 SQL 选择用户发送的所有消息。我想按 MessageSenderUserID 对结果进行分组。我还想只返回每个收件人最近的一个。

我尝试在有子句中使用 MAX，但这似乎不是正确的解决方案。

我最好将其描述为以下查询的组合：

```
SELECT TOP 1 MessageID, MessageSent, MessageSenderUserID, MessageRecipientUserID
FROM [Messaging_Message]
WHERE MessageSenderUserID = 799
ORDER BY MessageSent DESC

SELECT MessageSenderUserID
FROM [Messaging_Message]
GROUP BY MessageSenderUserID 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:36:53.480

我最近才学会了这种（最令人惊讶和有趣的）获得组中前 1 项的方法：

```
select top 1 with ties
    MessageID, 
    MessageSent, 
    MessageSenderUserID, 
    MessageRecipientUserID
from [Messaging_Message]
order by row_number() over (partition by MessageSenderUserID 
                            order by MessageSent desc) 
```

Trick is in order by - 结果按部分分组并按排序键排序，导致每个组接收第一行的数字 1。`With ties`返回所有。哦，应用机械师的喜悦！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:23:16.793

```
WITH TestTableCTE AS
(
    SELECT RN = ROW_NUMBER() OVER(PARTITION BY MessageSenderUserID ORDER BY MessageSent DESC),
           MessageID, MessageSent, MessageSenderUserID, MessageRecipientUserID
    FROM   [Messaging_Message]
)

SELECT MessageID, MessageSent, MessageSenderUserID, MessageRecipientUserID FROM TestTableCTE WHERE RN=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:18:10.963

这假设用户不能同时发送多条消息（在这种情况下，它将为用户显示多条消息）：

```
SELECT a.MessageID, a.MessageSent, a.MessageSenderUserID, a.MessageRecipientUserID
FROM Messaging_Message AS a
    JOIN (
        SELECT MessageSenderUserID, MAX(MessageSent) AS MessageSent
        FROM Messaging_Message
        GROUP BY MessageSenderUserID
    ) AS b ON a.MessageSenderUserID = b.MessageSenderUserID
        AND a.MessageSent = b.MessageSent 
```

# android - android启动相机应用程序（不适用于结果）

> ID：10001351
> 
> 赞同：2
> 
> 时间：2012-04-03T21:03:17.107
> 
> 标签：android, camera

我正在构建一个主屏幕替换应用程序，并且想知道如何在正常模式下启动相机应用程序。“Home”示例没有列出相机应用程序，因为它没有作为单独的应用程序安装在设备上（这解释了为什么我的 Galaxy nexus 相机问题没有得到解决）。换句话说，我想以与从我的股票主屏幕启动器相同的方式启动相机应用程序......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:25:41.383

you would probably want to open an intent from a Component name with the Main intent instead of the usual method of calling the camera for an answer.

You can open any activity on Android as if you are clicking on it in the home screen you just need the compentent name, you can get the component name by opening it normally as a user then reading it off your logcat when the activity opens... I have done the Camera intent for you.

```
 Intent intent = new Intent("android.intent.action.MAIN");
   intent.setComponent(ComponentName.unflattenFromString("com.google.android.camera/com.android.camera.Camera"));
   intent.addCategory("android.intent.category.LAUNCHER");
   startActivity(intent); 
```

# iphone - 使用 iPhone 上的本地存储保存数据 - 走哪条路？

> ID：10001358
> 
> 赞同：1
> 
> 时间：2012-04-03T21:03:31.203
> 
> 标签：iphone, arrays, json, caching, local

我正在构建一个与数据库通信的网络应用程序。我希望网络应用程序从我的数据库中下载所有信息，然后将其保存在本地，以便可以在本地访问和编辑（即使用户离线），然后同步回我的数据库（当用户在线时）。

我的数据库中的每一行都包含 2 个字符串和 3 个整数，我的数据库中有大约 1000-1500 行（这可能会让您了解我的数据库的大小）。

那么最好的方法是什么？是否可以以某种方式在用户设备上缓存此类数据？就像通过 JSON 检索数据库，而不是将其本地存储在用户可以访问和工作的 javascript 数组中（如前所述：即使用户离线，后面的部分也应该能够工作）。非常感谢您对此的所有意见。我至少在这里思考正确的方向吗？

编辑：我只想澄清我正在使用网络应用程序。使用 HTML、CSS 和 Javascript 开发的应用程序。我不是在做一个原生的目标 C iOS 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T05:15:43.577

```
make a class of NSObject

@interface abc : NSObject<NSCoding>

@property..... // add properties that you want to save 

-(void)initWithDictionary:(NSMutableDictionary *)dictionary; // override init by passing dictionary with values of your properties

@end

in abc.m file 

implement these functions

-(void)initWithDictionary:(NSMutableDictionary *)dictionary
{

    yourProperty=[dictionary valueForKey:@"propertyKey"];

}

-(void) encodeWithCoder:(NSCoder *)aCoder{

    [aCoder encodeObject:yourProperty forKey:@"propertyKey"];

}

-(id) initWithCoder:(NSCoder *)aDecoder{

    self =[super init];

    if(self){

        [self setyourProperty:[aDecoder decodeObjectForKey:@"yourProperty"]];

    }
    return self;
}

now make a shared class that can be accessed from anywhere

@interface xyz : NSObject
{
    NSMutableArray *allItems;
}

+(xyz *) sharedStore;

-(NSMutableArray *)allItems;

-(abc *) createItem:(NSMutableDictionary *)dictionary;

-(NSString *) saveItemPath;

-(BOOL)saveChanges;

now in xyz.m implement these functions

-(id)init{

    self=[super init];

    if(self){

        NSString *path=[self saveItemPath];

        allItems=[NSKeyedUnarchiver unarchiveObjectWithFile:path];

        if(!allItems){

            allItems=[[NSMutableArray alloc]init] ;//]WithObjects:@"No more item in store", nil];

        }

    }

    return self;
}
+(xyz *)sharedStore{

    static xyz *sharedStore=nil;

    if(!sharedStore){

        sharedStore=[[super allocWithZone:nil]init];

    }

    return sharedStore;

}
+(id)allocWithZone:(NSZone *)zone{

    return [self sharedStore];

}
-(NSArray *)allItems{

    //[allItems insertObject:@"No more items are in store" atIndex:[allItems count]];
    return allItems;

}

-(abc *) createItem:(NSMutableDictionary *)dictionary
{
    abc *p=[[abc alloc] init];
    [p initWithDictionary:dictionary];
    [allItems insertObject:p atIndex:0];
    return p;
}

-(NSString *) saveItemPath
{
    NSArray *documentdirectories=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);

    NSString * documentDirectory=[documentdirectories objectAtIndex:0];

    return [documentDirectory stringByAppendingPathComponent:@"items.archive"];

}

-(BOOL) saveChanges
{

    NSString *path=[self saveItemPath];

    return [NSKeyedArchiver archiveRootObject:allItems toFile:path];

}

now you can use the global variable like this

[xyz sharedStore]allItems]

now do one more thing, add this line to application did enter background

[xyz sharedStore]saveChanges]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:13:49.143

您应该使用[Core Data](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/cdprogrammingguide.html)（它使用 SQLite）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:23:19.247

你需要研究持久性，最好的选择是 Core Data。例如，除了持久性之外，您还可以获得我和其他人在[此处](https://stackoverflow.com/questions/9992989/is-there-any-value-in-using-core-data-for-iphone-apps/9993141#9993141)和[此处](https://stackoverflow.com/questions/1318467/use-coredata-or-sqlite-on-iphone)概述的许多其他巨大好处。如前所述，您可以使用 SQLite 作为应用程序的后备存储，然后您可以根据需要访问条目的对象表示。如果您正在处理同步，您可能还想查看 iCloud，您可以在[此处](https://developer.apple.com/icloud/index.php)找到有关信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T02:15:46.293

如果您使用 Web 技术开发移动应用程序，存储数据的最佳方式是使用 SQLite。您可以离线或在线模式存储、检索数据。另一个优势是，如果您决定采用原生方式，您可以将数据库移植到任何移动设备或桌面应用程序。

如果您有更多问题或需要帮助，请联系我，我可以为您提供有关如何将 SQLite 与 Web 技术一起使用的更多信息？

如果您想节省为您的移动应用程序设计 Web GUI 的时间，您可以使用 Mobile Web 框架，它可以加快开发时间并允许您访问设备上的一些本机 API。我推荐 Sencha：[http](http://www.sencha.com/products/touch/) ://www.sencha.com/products/touch/ （基于 Html5、JS、CSS3 的非常好的框架）

# asp.net - ASP.NET Form View IF on Updating

> ID：10001368
> 
> 赞同：3
> 
> 时间：2012-04-03T21:04:13.420
> 
> 标签：asp.net, vb.net

I want to run an if before updating a form view; if yes then..."message" & cancel update query if no continue update query.

i've tried this but i'm getting a "obeject instance not set to null instance......" on the first line of the if? and the item updates regardless

```
Private Sub FormView2_ItemUpdating(sender As Object, e As System.Web.UI.WebControls.FormViewUpdateEventArgs) Handles FormView2.ItemUpdating
    Dim status As TextBox = FormView1.FindControl("ApprovalStatusTextBox")

    If status.Text = "approved" Or "denied" Then
        e.Cancel = True
        lblupdaterequest.Text = "you cannot update this request as it has already been responded to"
    Else
        HolidayDetailsdatasource.Update()
    End If 
```

Anyone aware of a better was of achieving something like this?

exact error:

```
 System.NullReferenceException was unhandled by user code
   Message=Object reference not set to an instance of an object.
   Source=WebApplication1
   StackTrace:
   at WebApplication1.HolidayApprovalDetails.DetailsView1_ItemUpdating(Object sender, DetailsViewUpdateEventArgs e) in line 32
   at System.Web.UI.WebControls.DetailsView.OnItemUpdating(DetailsViewUpdateEventArgs e)
   at System.Web.UI.WebControls.DetailsView.HandleUpdate(String commandArg, Boolean causesValidation)
   at System.Web.UI.WebControls.DetailsView.HandleEvent(EventArgs e, Boolean causesValidation, String validationGroup)
   at System.Web.UI.WebControls.DetailsView.OnBubbleEvent(Object source, EventArgs e)
   at System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args)
   at System.Web.UI.WebControls.DetailsViewRow.OnBubbleEvent(Object source, EventArgs e)
   at System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args)
   at System.Web.UI.WebControls.LinkButton.OnCommand(CommandEventArgs e)
   at System.Web.UI.WebControls.LinkButton.RaisePostBackEvent(String eventArgument)
   at System.Web.UI.WebControls.LinkButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument)
   at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)
   at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:14:33.413

I can at least see that you are retrieving the value of the status TextBox from '**FormView1**', while your sub ItemUpdating is referring to '**FormView2**'.

After changing this, try adding a message box before the if, to make sure you got the right value you wanted:

```
MsgBox(status.Text) 
```

Hopefully, it helps you solve your problem.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:24:01.863

```
If status IsNot Nothing AndAlso (status.Text = "approved" OrElse status.Text = "denied") Then 
```

# ruby-on-rails - Rails 路由错误嵌套路由 (link_to user_post_path)

> ID：10001371
> 
> 赞同：0
> 
> 时间：2012-04-03T21:04:22.217
> 
> 标签：ruby-on-rails, routes, nested

编辑//在底部添加了一个编辑。这些问题似乎与 user_post_path 相关联。

我试着输入：

```
<%= link_to 'show', user_post_path(post) %> 
```

但在我编辑之前得到下面列出的错误。

这导致：

```
No route matches {:action=>"show", :controller=>"posts", :user_id=>#<Post id: 1, topic:
"1st Post", mood: "happy", post: "I don't know. Omg this works!", created_at: 
"2012-03-30   23:42:51", updated_at: "2012-04-01 06:01:48", user_id: 1>} 
```

想法？

* * *

我查看了与此特定问题相关的其他帖子，但到目前为止我还没有找到解决我的问题的方法。

我的目标是显示与用户关联的帖子列表。rake 路由表示 /users/:user_id/posts 应该指向索引文件，但奇怪的是错误消息指的是 post 控制器中的 :show 操作。为什么？另外，为什么 :user_id 的哈希为空？

感谢所有帮助。

这是我在浏览器中的错误：

```
No route matches {:action=>"show", :controller=>"posts", :user_id=>#<Post id: 1, topic:
"1st Post", mood: "happy", post: "I don't know. Omg this works!", created_at: 
"2012-03-30   23:42:51", updated_at: "2012-04-01 06:01:48", user_id: 1>} 
```

W

```
1 Testapp::Application.routes.draw do
2   resources :users do
3     resources :posts
4   end
5 
6   root to: 'home#index' 
```

这是我的耙子路线：

```
user_posts GET    /users/:user_id/posts(.:format)          posts#index
           POST   /users/:user_id/posts(.:format)          posts#create
new_user_post GET    /users/:user_id/posts/new(.:format)      posts#new
edit_user_post GET    /users/:user_id/posts/:id/edit(.:format) posts#edit
user_post GET    /users/:user_id/posts/:id(.:format)      posts#show
          PUT    /users/:user_id/posts/:id(.:format)      posts#update
          DELETE /users/:user_id/posts/:id(.:format)      posts#destroy
      users GET    /users(.:format)                         users#index
           POST   /users(.:format)                         users#create
  new_user GET    /users/new(.:format)                     users#new
 edit_user GET    /users/:id/edit(.:format)                users#edit
      user GET    /users/:id(.:format)                     users#show
           PUT    /users/:id(.:format)                     users#update
           DELETE /users/:id(.:format)                     users#destroy
      root        /                                        home#index 
```

帖子控制器：

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.find_by_user_id(params[:user_id]) 

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    @post = Post.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
   end

   # DELETE /posts/1
   # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end
end 
```

编辑//

我将问题范围缩小到一个link_to。

```
14 <% @posts.each do |post| %>
15   <tr>
16     <td><%= post.topic %></td>
17     <td><%= post.mood %></td>
18     <td><%= post.post %></td>
19     <td><%= post.user_id %></td>
20     <td><%= link_to user_post_path(post) %>  #this is giving me an error
21   </tr>
22 <% end %>
23 </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T02:00:56.257

由于这些是嵌套路径，您是否考虑过传递用户和帖子？您的最终到达 URL 需要 a`user_id`和 a `post_id`，因此您可能需要调用以下命令：

```
<%= link_to user_post_path(post.user, post) %> 
```

文档在这里：[Rails Guide on Nested Resources](http://guides.rubyonrails.org/routing.html#nested-resources)

# mysql - MySql 加入三个关系并对该结果执行查询

> ID：10001372
> 
> 赞同：0
> 
> 时间：2012-04-03T21:04:24.083
> 
> 标签：mysql, sql

我正在尝试对 MySql 执行这样的查询

```
SELECT model, price
FROM (SELECT *
      FROM product
      LEFT JOIN printer, laptop, pc
      ON product.model = printer.model = laptop.model = pc.model) 
```

我知道这不是正确的语法，我正在尝试查找每种产品的型号和价格。我首先尝试将每个列表自然连接到产品，但想出了一个空集，因为第一个自然连接删除了其他两个产品的所有其他元组，然后下一个后续连接删除了所有内容。

我真正的问题是我应该使用哪种类型的连接来执行此操作？

### 关系：

产品（制造商、型号、类型）

笔记本电脑（型号、价格、速度、内存、高清、屏幕）

PC（型号，价格，速度，内存，高清）

打印机（型号、价格、颜色、价格）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:20:22.337

这是一个很好的解决方案：

```
SELECT model, COALESCE(pr.price, la.price, pc.price) AS price
FROM product AS p
LEFT JOIN printer AS pr ON (p.model=pr.model)
LEFT JOIN laptop AS la ON (p.model=la.model)
LEFT JOIN pc  ON (p.model=pc.model) 
```

我应该注意到，您的表结构可以根据您的目的进行增强，也可能是为了您的应用程序的目的。

而不是表：

*   产品（制造商、型号、类型）
*   笔记本电脑（型号、价格、速度、内存、高清、屏幕）
*   PC（型号、价格、速度、内存、高清）
*   打印机（型号、价格、颜色）

它可能是 ：

*   产品（制造商、型号、类型、价格）
*   笔记本电脑（型号、速度、内存、高清、屏幕）
*   PC（型号、速度、内存、高清）
*   打印机（型号、颜色）

甚至 ：

*   产品（制造商、类型、价格、参考、other_characteristics ）

其中 [other_characteristics] 列包含其他信息的 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:09:08.093

为什么 SELECT x from (SELECT ...)？直接进入内部：

```
SELECT model, price
FROM product
LEFT JOIN printer, laptop, pc
ON product.model = printer.model = laptop.model = pc.model 
```

所以显然这仍然行不通，因为存在一些语法错误。您需要做的是多个连接：

```
SELECT model, price
FROM product
LEFT JOIN printer ON product.model = printer.model
LEFT JOIN laptop ON product.model = laptop.model
LEFT JOIN pc ON product.model = pc.model 
```

现在，这是一个有效的查询，但我怀疑在您的数据中它不会起作用，因为您在打印机、笔记本电脑和个人电脑中都有一个价格（所以它会混淆您所说的“价格”是指哪一个）。可能有更好的方法来做到这一点，但你可以这样做：

```
SELECT model, COALESCE(printer.price, laptop.price, pc.price)
FROM product
LEFT JOIN printer ON product.model = printer.model
LEFT JOIN laptop ON product.model = laptop.model
LEFT JOIN pc ON product.model = pc.model 
```

[coalesce](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)所做的是返回第一个非 NULL 参数（因此，如果 printer.price 为 null 而laptop.price 不是，它将返回laptop.price）。

# java - CXF/Spring 将顶级服务名称和命名空间注入 JAX-WS 接口

> ID：10001373
> 
> 赞同：1
> 
> 时间：2012-04-03T21:04:29.703
> 
> 标签：java, spring, jakarta-ee, jax-ws, cxf

我正在运行一个基于 CXF 的 Web 服务，这与 CXF 网站[http://cxf.apache.org/docs/jax-ws-configuration.html](http://cxf.apache.org/docs/jax-ws-configuration.html)上的示例不同。此服务具有基于以下示例上下文的已实现端点：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:jaxws="http://cxf.apache.org/jaxws"
xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
        http://cxf.apache.org/jaxws 
        http://cxf.apache.org/schemas/jaxws.xsd">

    <jaxws:endpoint id="myServiceMembersImpl"
        implementor="#myService"
        endpointName="e:MyServiceMembersEndpoint"
        serviceName="s:MyServiceMembersService"
        address="http://localhost:8080/myservicemembers"
        xmlns:e="http://localhost:8080/myservicemembers/ns"
        xmlns:s="http://localhost:8080/myservicemembers/ns"/>

</beans> 
```

然后，当然，还有Java ...

界面：

```
package com.me.service;

@WebService
public interface MyService {

String MEMBER = "MEMBER";

@WebResult(name = MEMBER)
Member getMember(@WebParam(name = "memberId") long memberId) throws Exception;
     // ... 
     // more interface declarations 
     // ... 

} // end interface 
```

并且，实施：

```
package com.me.service.impl;

@WebService(endpointInterface = "com.me.service.MyService")
@Path("/")
public class MyServiceMembersImpl implements MyService {

@GET
@Path("/{id}")
@Consumes({ APP_JSON, APP_XML })
@Produces({ APP_JSON, APP_XML })
@Transactional(readOnly = true, propagation = Propagation.REQUIRED)
public Member getMember(@PathParam("id") final long memberId) throws Exception {

        // ... 
        // business logic 
        // ... 
        return theMember; 

     } // end method 

} // end class 
```

它返回一个开始有点像这样的 WSDL：

```
<?xml version="1.0" encoding="UTF-8" ?> 
<wsdl:definitions name="MyServiceImplService" 
    targetNamespace="http://localhost:8080/myservicemembers/ns" 
    xmlns:ns1="**http://service.me.com/**" 
    xmlns:ns2="http://schemas.xmlsoap.org/soap/http" 
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
    xmlns:tns="http://localhost:8080/myservicemembers/ns" 
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <wsdl:import location="http://localhost:8080/myservicemembers?wsdl=**MyService**.wsdl" 
        namespace="**http://service.me.com/**" /> 
        <wsdl:binding name="MyServiceImplServiceSoapBinding" type="ns1:**MyService**">
<!-- ... --> 
</wsdl:definitions> 
```

在应用程序上下文中使用“jaxws:endpoint”元素来更改端点的设置非常简单。这充实了服务名称、端点名称和其他字段。但是，顶级接口在 WSDL 文件中仍然有发言权。上面的**STARRED**项目来自顶级界面。**如何将值注入到 targetNamespace 和 serviceName 的顶级接口？**

我这样做的充分理由包括 (1) 不想在 WSDL 中公开包名称和 (2) 想要在应用程序沿部署跑道向下移动时切换名称空间。因此我不能使用注释，因为它们是编译时值，我不能用属性占位符替换它们，并且我不会在生产层重新编译我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:44:12.960

您可以通过使用[JaxWsServerFactoryBean](http://cxf.apache.org/javadoc/latest/org/apache/cxf/jaxws/JaxWsServerFactoryBean.html)以编程方式创建服务来完成此操作，而不是`<jaxws:endpoint>`在 Spring 配置中使用。以编程方式进行创建可为您提供更多控制权。

例如：

```
@Autowired
var myServiceImpl: MyService = _

val propMap = mutable.HashMap[String, AnyRef]("org.apache.cxf.logging.FaultListener"->faultListener.asInstanceOf[AnyRef])

val sf = new JaxWsServerFactoryBean
sf.setServiceBean(myServiceImpl)
sf.setAddress("/myservice")
sf.setServiceName(new QName(WEB_SERVICE_NAMESPACE, "myService", "MyService"))
sf.setProperties(propMap)
sf.create 
```

# html - 什么是元标记中的“编辑”属性

> ID：10001374
> 
> 赞同：6
> 
> 时间：2012-04-03T21:04:32.793
> 
> 标签：html, meta-tags

我正在查看 jsfiddle 的代码并看到以下几行：

```
<meta name="description" edit="mootools shell, easy test you snippets before implementing">
<meta name="keywords" edit="mootools,javascript,javascript framework,shell,test">
<meta name="robots" edit="all"> 
```

我以前从未见过`edit`attr。它有什么作用？我在 w3.org 或谷歌上找不到任何信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:54:28.817

我敢打赌这只是他们的错误，“编辑”属性应该是“内容”。也许你应该给他们发个便条，让他们知道。

更新：我刚刚给 Piotr 发了一张便条，让他知道这件事。我会用他的回复（如果有的话）更新我的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:28:13.030

该`edit`属性[是无效的 html](http://validator.w3.org/check?uri=http://jsfiddle.net&charset=%28detect%20automatically%29&doctype=Inline&group=0)：

```
 Line 4, Column 33: there is no attribute "edit"
  <meta name="description" edit="mootools shell, easy test you snippets before …
✉ 
```

所以这意味着它要么被 jsfiddle 本身用来将值传递给他们的 js，要么被一些我不知道的网络爬虫使用。

我检查了谷歌的爬虫，但它没有提到任何这样的属性。

# android - 有什么方法可以将我的自定义按钮放在 android 的一个 XML 文件中？

> ID：10001377
> 
> 赞同：-1
> 
> 时间：2012-04-03T21:04:50.530
> 
> 标签：android

我正在开发一个包含许多自定义按钮的 android 应用程序。我是否需要为每个文件制作一个 .xml 文件，或者有一种方法可以将它们全部放在一个 .xml 文件中？

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
 <item android:state_pressed="true" android:drawable="@drawable/father2" ></item>
   <item android:drawable="@drawable/father" ></item> 
```

我可以将此代码用于一个 xml 文件中的多个自定义按钮吗？

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" 
android:oneshot="false" >
<item android:drawable="@drawable/brother1" android:duration="200"/>
<item android:drawable="@drawable/brother2" android:duration="200"/>
<item android:drawable="@drawable/brother3" android:duration="200"/>
<item android:drawable="@drawable/brother4" android:duration="200"/>
<item android:drawable="@drawable/brother5" android:duration="200"/> 
```

我还有一个动画列表；我可以在一个 xml 文件中使用多个动画列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:13:32.617

这取决于您的按钮的哪一部分是自定义的。如果只有图像或文本是自定义的，您可以将它们放入其中`res/styles.xml`，然后使用这些[主题](http://developer.android.com/guide/topics/ui/themes.html)`Button`将您在 XML 中创建的其他布局中的 s 设置为主题。

```
<LinearLayout ... >
   <!--stuff-->
   <Button style="@style/customButtonStyle1" ... other attributes />
</LinearLayout> 
```

如果它们具有不同的状态（例如，按下、选择、未选择），您可以使用`<selector>`资源将值（图像、文本）分配给不同的状态。一个快速的谷歌显示了[这个](http://www.mkyong.com/android/android-imagebutton-selector-example/)选择器教程。

# lucene.net - 按 ID 跨多个索引对 Lucene 索引进行分区

> ID：10001382
> 
> 赞同：0
> 
> 时间：2012-04-03T21:05:06.287
> 
> 标签：lucene.net, lucene

我正在尝试整合我的 Lucene 搜索解决方案，但我无法弄清楚如何开始。

*   在我的网站上，我希望一次搜索能够跨越模型中的 5 种不同类型的对象。
*   我希望我的结果作为一个列表返回，首先按最佳匹配排序，并使用一种区分类型的方法，以便我可以适当地显示数据
*   我们的系统分为我们所说的站点。我想按站点索引 5 个不同的模型对象。搜索将始终按站点完成。

我不确定从哪里开始索引该系统以获得最佳性能。我也不确定如何最好地实现对这个设置的搜索。非常感谢任何建议、文章和示例。

编辑：

既然已经说这个太宽泛了，

假设我有 3 个站点，站点 1、站点 2 和站点 3。

假设我正在索引 Dogs、Cats 和 Hamsters。每种类型的记录都链接到一个站点。

因此，例如，我的数据可能是（类型、名称、站点 ID）

```
Dog, "Fido" 1
Cat, "Sprinkles", 2
Hamster, "Sprinkles", 2
Cat, "Mr. Pretty", 3
Cat, "Mr. Pretty 2", 3 
```

所以，当我搜索“Mr. Pretty”时，我想定位一个特定的站点 ID。如果我反对站点 id 1，我将得到 0 个结果。如果我搜索站点 id 3，我会得到

```
Mr. Pretty
Mr. Pretty 2 
```

如果我在站点 2 上搜索“Sprinkles”，我会知道一个结果是猫，另一个结果是仓鼠。

实现这种搜索索引的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:36:24.040

正如goalie7960 建议的那样，您可以为每个文档添加一个“SiteID”，并`siteid:3`为您的查询添加一个查询词，以便仅从该站点检索文档。[您还可以通过为每个不同站点创建和存储过滤器](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/search/Filter.html)来提高性能，以便将其应用于对应的查询。

对于同一索引中的不同类型，您可以使用相同的策略。为每个具有相应类型（可能只是一个 ID）的文档创建一个“类型”字段。[Elasticsearch](http://www.elasticsearch.org/guide/)使用相同的策略在同一索引中具有不同的可区分类型。同样，您可以在类型上使用过滤器来加速查询（Elasticsearch 也是如此）。

# java - 单击按钮时我的程序崩溃..为什么？

> ID：10001387
> 
> 赞同：-2
> 
> 时间：2012-04-03T21:05:28.107
> 
> 标签：java, android

[LOGCAT](http://www.text-upload.com/read.php?id=331691&c=7643541)

```
04-03 20:59:46.189: E/AndroidRuntime(362): android.content.res.Resources$NotFoundException: String resource ID #0x0 
04-03 20:59:46.189: E/AndroidRuntime(362): at android.content.res.Resources.getText(Resources.java:201) 
04-03 20:59:46.189: E/AndroidRuntime(362): at android.widget.TextView.setText(TextView.java:2857) 
04-03 20:59:46.189: E/AndroidRuntime(362): at coin.calc.wilson.CoinCalculatorActivity$1.onClick(CoinCalculatorActivity.java:65) 
04-03 20:59:46.189: E/AndroidRuntime(362): at android.view.View.performClick(View.java:2485) 
04-03 20:59:46.189: E/AndroidRuntime(362): at android.view.View$PerformClick.run(View.java:9080) 
04-03 20:59:46.189: E/AndroidRuntime(362): at android.os.Handler.handleCallback(Handler.java:587) 
04-03 20:59:46.189: E/AndroidRuntime(362): at android.os.Handler.dispatchMessage(Handler.java:92) 
04-03 20:59:46.189: E/AndroidRuntime(362): at android.os.Looper.loop(Looper.java:123) 
04-03 20:59:46.189: E/AndroidRuntime(362): at android.app.ActivityThread.main(ActivityThread.java:3683) 
04-03 20:59:46.189: E/AndroidRuntime(362): at java.lang.reflect.Method.invokeNative(Native Method) 
04-03 20:59:46.189: E/AndroidRuntime(362): at java.lang.reflect.Method.invoke(Method.java:507) 
04-03 20:59:46.189: E/AndroidRuntime(362): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 
04-03 20:59:46.189: E/AndroidRuntime(362): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
04-03 20:59:46.189: E/AndroidRuntime(362): at dalvik.system.NativeStart.main(Native Method) 
04-03 20:59:49.720: I/Process(362): Sending signal. PID: 362 SIG: 9 
```

这是我的java代码：

```
package coin.calc.wilson;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class CoinCalculatorActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button solve = (Button)findViewById(R.id.bsolve);
    solve.setOnClickListener(new OnClickListener() {

        public void onClick(View v) { 
    int td, tc, twenty, ten, five, one, quarter, dime, nickel, penny;
    EditText tdet = (EditText)findViewById(R.id.etdollars);
    EditText tcet = (EditText)findViewById(R.id.etcents);
        try{
            td = Integer.parseInt(tdet.getText().toString());
            tc = Integer.parseInt(tdet.getText().toString());
        }
        catch (NumberFormatException e) {
            td = tc = 0;
        }

    if (td < 0 || tc < 0){
        /* ERROR */
    }
    else{
        if( td == 0 ){
            twenty = ten = five = one = 0;
        }
        else{
            one = td%5;

            if(td >= 20){
                twenty = (td/20)-((td%20)/20);
            }
            else{
                twenty = 0;
            }

            int tda20 = td-(20*twenty);
            if (tda20 >= 10){
                ten = (tda20/10)-((tda20%10)/10);
            }
            else{
                ten = 0;
            }
            int tda10 = tda20-(10*ten);
            if(tda10>=5){
                five = (tda10/5)-((tda10%5)/5);
            }
            else{
                five = 0;
            }
            TextView tv20 = (TextView)findViewById(R.id.tvtwenty);
            tv20.setText(twenty);
            TextView tv10 = (TextView)findViewById(R.id.tvten);
            tv10.setText(ten);
            TextView tv5 = (TextView)findViewById(R.id.tvfive);
            tv5.setText(five);
            TextView tv1 = (TextView)findViewById(R.id.tvone);
            tv1.setText(one);

            }

        if( tc == 0 ){
            quarter = dime = nickel = penny = 0;
        }
        else{
            penny = tc%5;

            if(tc >= 25){
                quarter = (tc/25)-((td%25)/25);
            }
            else{
                quarter = 0;
            }

            int tcaq = tc-(25*quarter);
            if (tcaq >= 10){
                dime = (tcaq/10)-((tcaq%10)/10);
            }
            else{
                dime = 0;
            }
            int tcad = tcaq-(10*ten);
            if(tcad>=5){
                nickel = (tcad/5)-((tcad%5)/5);
            }
            else{
                nickel = 0;
            }
            TextView tvq = (TextView)findViewById(R.id.tvquarter);
            tvq.setText(quarter);
            TextView tvd = (TextView)findViewById(R.id.tvdime);
            tvd.setText(dime);
            TextView tvn = (TextView)findViewById(R.id.tvnickel);
            tvn.setText(nickel);
            TextView tvp = (TextView)findViewById(R.id.tvpenny);
            tvp.setText(penny);

            }
}
}});}
} 
```

这是xml：

```
<TableRow
    android:id="@+id/tableRow1"
    android:layout_height="wrap_content"
    android:gravity="center" >

    <EditText
        android:id="@+id/etdollars"
        android:layout_width="156dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="dollars"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center" >

    <EditText
        android:id="@+id/etcents"
        android:layout_width="156dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number" />
     <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="cents"
        android:textAppearance="?android:attr/textAppearanceLarge" />
</TableRow>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="60dp"
    android:gravity="center" >

    <Button
        android:id="@+id/bsolve"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Solve!" />

</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="80dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="100dp"
        android:layout_height="80dp"
        android:layout_weight="0.00"
        android:layout_marginLeft="8.75dp"
        android:layout_marginRight="8.75dp"
        android:src="@drawable/twenty" />

    <TextView
        android:id="@+id/tvtwenty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.00"
        android:layout_gravity="center_vertical"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="61dp"
        android:layout_height="80dp"
        android:layout_marginLeft="43dp"
        android:layout_marginRight="13.5dp"
        android:src="@drawable/cquarter" />
    <TextView
        android:id="@+id/tvquarter"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.00"
        android:layout_gravity="center_vertical"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="80dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="100dp"
        android:layout_height="80dp"
        android:layout_weight="0.00"
        android:layout_marginLeft="8.75dp"
        android:layout_marginRight="8.75dp"
        android:src="@drawable/ten" />

    <TextView
        android:id="@+id/tvten"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.00"
        android:layout_gravity="center_vertical"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="61dp"
        android:layout_height="80dp"
        android:layout_marginLeft="43dp"
        android:layout_marginRight="13.5dp"
        android:src="@drawable/cdime" />
    <TextView
        android:id="@+id/tvdime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.00"
        android:layout_gravity="center_vertical"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="80dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="100dp"
        android:layout_height="80dp"
        android:layout_weight="0.00"
        android:layout_marginLeft="8.75dp"
        android:layout_marginRight="8.75dp"
        android:src="@drawable/five" />

    <TextView
        android:id="@+id/tvfive"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.00"
        android:layout_gravity="center_vertical"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="61dp"
        android:layout_height="80dp"
        android:layout_marginLeft="43dp"
        android:layout_marginRight="13.5dp"
        android:src="@drawable/cnickel" />
    <TextView
        android:id="@+id/tvnickel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.00"
        android:layout_gravity="center_vertical"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="80dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="100dp"
        android:layout_height="80dp"
        android:layout_weight="0.00"
        android:layout_marginLeft="8.75dp"
        android:layout_marginRight="8.75dp"
        android:src="@drawable/one" />

    <TextView
        android:id="@+id/tvone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.00"
        android:layout_gravity="center_vertical"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="61dp"
        android:layout_height="80dp"
        android:layout_marginLeft="43dp"
        android:layout_marginRight="13.5dp"
        android:src="@drawable/cpenny" />
    <TextView
        android:id="@+id/tvpenny"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.00"
        android:layout_gravity="center_vertical"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout>

</TableLayout> 
```

如果有帮助，我认为该错误可能与我正在使用的资源（八个 jpg）有关，但我不确定。程序运行干净，直到 OnClickListener 被激活。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:09:14.410

在这里（和其他类似的行）：

```
tv20.setText(twenty); 
```

`twenty`是 int 并且应该是 String （我想你想在 textview 中显示数字）：

```
tv20.setText(String.valueOf(twenty)); 
```

编辑：

所有这些变量都有相同的错误

`int td, tc, twenty, ten, five, one, quarter, dime, nickel, penny;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:16:05.723

你有一个小而重的错误：

如果您尝试将数字/整数放入 TextView，则需要先将其转换为字符串。如果您不这样做，那么您引用内部 id 的 Android 事物`R.string.mynumber`就不是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:14:47.493

`Button solve = (Button)findViewById(R.id.bsolve);`尝试在下面和之前移动以下两条线`solve.setOnClickListener(new OnClickListener()`

```
EditText tdet = (EditText)findViewById(R.id.etdollars);
EditText tcet = (EditText)findViewById(R.id.etcents); 
```

# django - Django模板不显示数据库内容

> ID：10001389
> 
> 赞同：0
> 
> 时间：2012-04-03T21:05:52.483
> 
> 标签：django, django-models, django-templates, django-views, django-urls

这肯定是一个新手错误，我已经用谷歌搜索了好几个小时，但没有找到可行的解决方案。我假设部分原因是不确定要准确搜索什么。

我正在开发一个小型博客应用程序，我有用户、帖子、博客评论的模型，仅此而已。

我为 blogIndex 和 blogPost 编写了视图，即所有帖子的列表和特定帖子的列表。

blogIndex 在它所属的视图中工作，它显示 {{ post.content }} {{ post.author.firstname }} 等没有问题。

但是 blogPost 不是。视图如下所示：

```
def blogPost(request, postID):
    blogPost = post.objects.get(id=postID)
    return render_to_response("blog_post.html", {"post":post}) 
```

blog_post.html 如下所示：

```
title: {{ post.title }}</br>
content: {{ post.content }}</br>
datetime: {{ post.datetime }}</br>
author: {{ post.author.first_name }} {{ post.author.last_name }}</br></br>

{% for comment in post.blogcomment_set.all %}
   Comment.firstName: {{comment.firstName}}</br>
   {{comment.lastName}}</br>
   {{comment.email}}</br>
   {{comment.datetime}}</br>
   {{comment.content}}</br>
{% endfor %} 
```

使用 blog_index.html 中的相同代码，我得到了标题、内容等的正确列表。

这是来自 urls.py：

```
url(r'^blog/$', blogIndex),
url(r'^blog/(?P<postID>\d+)$', blogPost), 
```

我怀疑正则表达式有问题？我怀疑观点更可能有问题？

这是 blogIndex 的视图，它正在工作，但可能有助于回答：

```
def blogIndex(request):
    posts = post.objects.all()
    return render_to_response("blog_index.html", {"posts":posts}) 
```

最后，这是 blog_index.html 中的代码：

```
{% for post in posts %}
<h3><a href="/blog/{{ post.id }}">{{ post.title }}</a></h3>
{{ post.content }}
<p>Posted by: {{ post.author.first_name }} {{ post.author.last_name }}<br /> At:    
{{ post.datetime }}</p>     

<p><strong>Comments: </strong><br />
    {% for comment in post.blogcomment_set.all %}
    By: {{ comment.firstname }}<br />
    Title: {{ comment.title }},<br />
    Content: {{ comment.content }}<br />
    Date: {{ comment.datetime }}</p>
    {% endfor %}  
{% endfor %} 
```

指向可能的解决方案的链接或指出我目光狭隘的鼻子都是受欢迎的输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:08:00.090

```
def blogPost(request, postID):
    blogPost = post.objects.get(id=postID)
    return render_to_response("blog_post.html", {"post":post}) 
```

应该：

```
def blogPost(request, postID):
    blogPost = post.objects.get(id=postID)
    return render_to_response("blog_post.html", {"post":blogPost}) 
```

# javascript - 如果表单字段验证为电子邮件，则运行脚本

> ID：10001399
> 
> 赞同：0
> 
> 时间：2012-04-03T21:06:44.667
> 
> 标签：javascript, forms, colorbox

对不起这个最有可能简单的问题。

我在提交表单时运行脚本（下面的代码），但首先我想在执行代码之前验证表单（包含一个必须是电子邮件的文本框）。

下面的脚本取自这里，以确保将表单数据传递给 colorbox lightbox 脚本。但我只想在表单得到验证的情况下运行它。我不知道如何将其与电子邮件验证脚本结合使用。帮助！目前我有一个验证电子邮件（dreamweaver）的脚本并且正在运行，即使它没有验证，这个命令仍然运行，我不知道如何编辑它，所以它不会。

```
$(document).ready(function() {
    $("input#SearchButton").colorbox({href: function(){
   var url = $(this).parents('form').attr('action');
   var ser = $(this).parents('form').serialize(); //alert(url+'?'+ser);
    return url+'?'+ser;
}, innerWidth:"1280", innerHeight:"884px", iframe:true, scrolling:false}); 
```

});

然后我用它来验证表格：

```
function MM_validateForm() { //v4.0
  if (document.getElementById){
  var i,p,q,nm,test,num,min,max,errors='',args=MM_validateForm.arguments;
 for (i=0; i<(args.length-2); i+=3) { test=args[i+2]; val=document.getElementById(args[i]);
  if (val) { nm=val.name; if ((val=val.value)!="") {
    if (test.indexOf('isEmail')!=-1) { p=val.indexOf('@');
      if (p<1 || p==(val.length-1)) errors+='- '+nm+' must contain an e-mail address.\n';
    } else if (test!='R') { num = parseFloat(val);
      if (isNaN(val)) errors+='- '+nm+' must contain a number.\n';
      if (test.indexOf('inRange') != -1) { p=test.indexOf(':');
        min=test.substring(8,p); max=test.substring(p+1);
        if (num<min || max<num) errors+='- '+nm+' must contain a number  between '+min+' and '+max+'.\n';
  } }} else if (test.charAt(0) == 'R') errors += '- '+nm+' is required.\n'; }
} if (errors) alert('The following error(s) occurred:\n'+errors);
document.MM_returnValue = (errors == ''); 
```

} }

谢谢！！！！

跳跳虎的 HTML 是：

```
<input name="submit" type="image" onclick="MM_validateForm('email','','RisEmail');return document.MM_returnValue" src="images/go-button.gif" alt="Go! Get quote now!" align="top" : id="SearchButton"/> 
```

简而言之：如果表单使用第二个代码段中的代码进行验证，即使在第三个代码段中，我也想触发第一个代码段中的代码，但如果不是，则不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:37:44.420

Andrew 是正确的，如果您提供 html 来确定事件触发器将是什么，这将有所帮助。简要回顾了 jquery 插件'colorbox'，看来灯箱已绑定到选择器单击事件。

假设 Andrew 的回答是，如果电子邮件地址通过验证，您将需要从表单的提交处理程序中手动触发灯箱的 click 事件。下面的代码应该足够了。

```
 $('#my_form').on('submit', function(e){
    //perform validation.
    MM_validateForm('email','','RisEmail');
    //check the document variable set by the validation.
        if (!document.MM_returnValue)
        {
            //did not validate
        }else{
            //open the colorbox
            var search_btn = $('input#search');

                search_btn.colorbox({href: function(){
                   var url = $(this).parents('form').attr('action');
                   var ser = $(this).parents('form').serialize();
                    return url + '?' + ser;
            }, 
            innerWidth: "1280", 
            innerHeight: "884px", 
            iframe:true, 
            scrolling:false});

        //manually trigger the click event
        search_btn.trigger('click');
        }
    //in either instance, disable the default action to ensure the form does not follow through.
    e.preventDefault();
    }); 
```

显然，您必须将 css 选择器名称替换为您自己的名称，并使用您可能拥有或没有的电子邮件验证脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:13:29.803

您没有发布您的 HTML，所以我不知道您是否有一个实际的表单或只是一个没有实际表单标签的输入字段。

假设前者，您需要一个提交事件，以便您可以验证表单，然后，如果验证失败，则终止提交。

```
$('#my_form').submit(function() {

    //validate - forget the whole thing if it fails
    if (!$('#my_field').val()) return false;

    //if we get this far, validation succeeded - do other stuff now
}); 
```

只要提交回调返回 false（或触发 event.preventDefault()），表单提交就会停止。

# xml - 一组样本值中的 XSL 最大值不起作用

> ID：10001409
> 
> 赞同：0
> 
> 时间：2012-04-03T21:07:48.800
> 
> 标签：xml, xslt

我试图从我的 ddi 与 refddiNmr 匹配且名称不包含“Active”的值组中获取 MAX 费用

我有多个 ddi 对象，ddi 名称可以是“PH”、“FX”等；现在对于每个“PH”ddi，我想从名称不包含“Active”的“newP”对象中获取最大费用和名称

我尝试使用 for 循环和其他选项编写多个 xsl 代码，最后我删除了我的 for 循环，因为它们没有给我任何结果。

目前我有以下代码，它从所有 newP 对象返回 Max，而不是返回该 ddi 的最大值。我不确定如何做到这一点，请专家对此提出建议，有没有办法做到这一点。

我的预期输出应该是

```
Number- 90004    
Name        =   SM 10 P  
MaxChre     =   39.99 < ! -- Max value within 90004 group-->

Number- 30010 < !-- this should not come because its not of name "PH"-->

Number- 30011   
Name        =   SBB 15 FX     
MaxChre     =   40.0  < ! -- Max value within 30011 group-->

Number- 30012    
Name        =   VEI    
MaxChre     =   41.0  < ! -- Max value within 30012 group--> 
```

为问题中的缩进道歉。以下是代码和数据的其他详细信息：

我的越野车代码：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  xmlns:date="http://exslt.org/dates-and-times"  extension-element-prefixes="date" xmlns:math="http://exslt.org/math"  version="1.0">
<xsl:output method="xml" encoding="utf-8" indent="no"/>
    <xsl:template match="/">
            <xsl:variable name="New" select="/SM/xml_data/emData" />
            <xsl:for-each select="/SM/xml_data/emData/ddi">
        Number- <xsl:value-of select="Nmr"/>
                 <xsl:if test="name='PH'">
        Amount- <xsl:value-of select="math:max(/SM/xml_data/emData/newP[contains(refddiNmr,Nmr)]/chre)"/>
        Name- <xsl:value-of select="/SM/xml_data/emData/newP/name"/>
                </xsl:if> 
            </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

样本数据：

```
 <SM>
    <xml_data>
    <emData>
        <ddi>
            <Nmr>90004</Nmr>
            <name>PH</name>
        </ddi>
        <ddi>
            <Nmr>30010</Nmr>
            <name>FA</name>
        </ddi>
        <ddi>
            <Nmr>30011</Nmr>
            <name>PH</name>
        </ddi>
        <ddi>
            <Nmr>30012</Nmr>
            <name>PH</name>
        </ddi>
        <newP>
            <start>2012-03-30</start>
            <name>VAF - Active</name>
            <chre>29.99</chre>
            <refddiNmr>90004</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>VAFD - Active</name>
            <chre>-29.99</chre>
            <refddiNmr>90004</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>SM 10 P</name>
            <chre>39.99</chre>
            <refddiNmr>90004</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>VE-I</name>
            <chre>10.0</chre>
            <refddiNmr>90004</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>SBB 15 FX</name>
            <chre>40.0</chre>
            <refddiNmr>30011</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>FXA - Active</name>
            <chre>9.99</chre>
            <refddiNmr>30011</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>FAD - Active</name>
            <chre>-9.99</chre>
            <refddiNmr>30011</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>VEI</name>
            <chre>40.0</chre>
            <refddiNmr>30011</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>SBB 15 FXA</name>
            <chre>90.0</chre>
            <refddiNmr>30010</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>FXA - Active</name>
            <chre>9.99</chre>
            <refddiNmr>30010</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>FAD - Active</name>
            <chre>-9.99</chre>
            <refddiNmr>30010</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>VEI</name>
            <chre>45.0</chre>
            <refddiNmr>30010</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>SBB 15 FXB</name>
            <chre>40.0</chre>
            <refddiNmr>30012</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>FXB - Active</name>
            <chre>9.99</chre>
            <refddiNmr>30012</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>FAD - Active</name>
            <chre>-9.99</chre>
            <refddiNmr>30012</refddiNmr>
        </newP>
        <newP>
            <start>2012-03-30</start>
            <name>VEI</name>
            <chre>41.0</chre>
            <refddiNmr>30012</refddiNmr>
        </newP>
    </emData>
    </xml_data>
    </SM> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:10:27.100

实现此目的的一种方法（在 XSLT 1.0 中）是通过查找**newP**元素的键

```
<xsl:key name="ref" match="newP[not(contains(name, 'active'))]" use="refddiNmr"/> 
```

然后，对于您匹配的每个**ddi**元素，您可以找到键中的第一个元素，按**chre**值排序...

```
<xsl:for-each select="key('ref', Nmr)">
   <xsl:sort select="chre" order="descending" data-type="number"/>
   <xsl:if test="position() = 1">
      ... Maximum value... 
```

这是完整的 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
   <xsl:output method="text" />

   <xsl:key name="ref" match="newP[not(contains(name, 'active'))]" use="refddiNmr"/>

   <xsl:template match="/">
      <xsl:apply-templates select="//ddi"/>
   </xsl:template>

   <xsl:template match="ddi[name='PH']">
      <xsl:value-of select="concat('Number - ', Nmr, '&#13;')"/>
      <xsl:for-each select="key('ref', Nmr)">
         <xsl:sort select="chre" order="descending" data-type="number"/>
         <xsl:if test="position() = 1">
            <xsl:value-of select="concat('Name - ', name, '&#13;MaxChre = ', chre, '&#13;')"/>
         </xsl:if>
      </xsl:for-each>
      <xsl:value-of select="'&#13;'"/>
   </xsl:template>

   <xsl:template match="ddi">
      <xsl:value-of select="concat('Number - ', Nmr, '&#13;&#13;')"/>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML 时，将输出以下内容：

```
Number - 90004
Name - SM 10 P
MaxChre = 39.99

Number - 30010

Number - 30011
Name - SBB 15 FX
MaxChre = 40.0

Number - 30012
Name - VEI
MaxChre = 41.0 
```

# c# - 如何正确比较列表

> ID：10001410
> 
> 赞同：0
> 
> 时间：2012-04-03T21:07:49.797
> 
> 标签：c#, algorithm, list, optimization, comparison

> **可能重复：**
> [比较两个列表的差异](https://stackoverflow.com/questions/675699/compare-two-lists-for-differences)

这是我的功能

```
 public List<String[]> comparableListsAreTheSame(List<String> baseList, List<String> resultList, int type)
    {
        if (type == 1) { }

        List<String> baseListCopy = baseList;
        List<String> resultListCopy = resultList;

        bool sameLength = (baseListCopy.Count == resultList.Count); // are 2 lists have the same length?

        List<String> Base = baseListCopy.Except(resultListCopy, StringComparer.InvariantCultureIgnoreCase).ToList(); //Keep unique values 
        List<String> Result = resultListCopy.Except(baseListCopy, StringComparer.InvariantCultureIgnoreCase).ToList(); //Keep unique values 

        List<String[]> blocksComparisonSet1 = new List<String[]>(); //we add blocks based on list1; so we could output them to excel
        List<String[]> blocksComparisonSet2 = new List<String[]>(); //we add blocks based on list2; so we could output them to excel
        List<String[]> blocksComparisonFinal = new List<String[]>(); //we combine list1 and list

        //-----------------------------------------------------------------

        if (Result.Count > 0 || Base.Count > 0)
        {
            foreach (String resultLine in Result) //loop over all lines in list 1
            {
                bool found = false; //if element in base i
                String[] resultLineArray = resultLine.Split('*'); //get array from the string
                foreach (String baseLine in Base)
                {
                    String[] baseLineArray = baseLine.Split('*');
                    if (resultLineArray[0].Equals(baseLineArray[0]) && resultLineArray[1].Equals(baseLineArray[1]) && resultLineArray[2].Equals(baseLineArray[2]) && resultLineArray[3].Equals(baseLineArray[3]))
                    {
                        String[] NA = new String[2]; //keep results
                        NA[0] = baseLine; //[0] for base
                        NA[1] = resultLine; //[1] for result
                        blocksComparisonSet1.Add(NA);
                        found = true;
                    }
                }

                if (!found)
                {
                    String[] NA = new String[2]; //keep results
                    NA[0] = "N/A"; //[0] for base
                    NA[1] = resultLine; //[1] for result
                    blocksComparisonSet1.Add(NA);
                }
            }

            //-----------------------------------------------------------------
            foreach (String baseLine in Base) //loop over all lines in list 2
            {
                bool found = false; //if element in base i
                String[] baseLineArray = baseLine.Split('*'); //get array from the string
                foreach (String resultLine in Result)
                {
                    String[] resultLineArray = resultLine.Split('*');
                    if (resultLineArray[0].Equals(baseLineArray[0]) && resultLineArray[1].Equals(baseLineArray[1]) && resultLineArray[2].Equals(baseLineArray[2]) && resultLineArray[3].Equals(baseLineArray[3]))
                    {
                        String[] NA = new String[2]; //keep results
                        NA[0] = baseLine; //[0] for base
                        NA[1] = resultLine; //[1] for result
                        blocksComparisonSet2.Add(NA);
                        found = true;
                    }
                }

                if (!found)
                {
                    String[] NA = new String[2]; //keep results
                    NA[0] = baseLine; //[0] for base
                    NA[1] = "N/A"; //[1] for result
                    blocksComparisonSet2.Add(NA);
                }
            }
        }

        //-----------------------------------------------------------------
        if (blocksComparisonSet1.Any() || blocksComparisonSet2.Any()) //check if we have any values in out differences lists. if we do, merge them
        {
            blocksComparisonFinal.AddRange(blocksComparisonSet1); //add records from one list to final list
            blocksComparisonFinal.AddRange(blocksComparisonSet2); //add records from second list to final list
            HashSet<String[]> s = new HashSet<String[]>(blocksComparisonFinal);
            blocksComparisonFinal = s.ToList();
        }
        blocksComparisonFinal = blocksComparisonSet1.Union(blocksComparisonSet2, new ArrayEqualityComparer<string>()).ToList();
        return blocksComparisonFinal;
    } 
```

我是 C# 和一般编程的新手，我做了多个循环并以非常粗俗的方式匹配所有内容。我可以以更专业的方式处理它并且做得更干净和正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:37:54.473

我有几点意见。

您最里面的 foreach 循环可以替换为 List.Contains 方法。当您可以直接比较字符串时，您通过将其拆分为一个数组然后循环该数组来增加一堆开销。[http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)

此外，循环遍历列表 2 中所有行的第二个循环只需要跟踪未命中，而不是命中。第一个循环找到 (1 & 2) 和 (1 & not 2) 中的项目，因此第二个循环只需要在有意义的情况下找到 (不是 1 & 2) 的项目。这也将使您不必在最后将命中/未命中列表合并在一起。

如果您倾向于先对列表进行排序，则可以更有效、更干净地完成此操作。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:50:57.653

如果您正在检查 listA 和 listB 是否具有相同的元素，则可以使用此扩展方法：

```
public static IEnumerable<TSource> Intersect<TSource>
(
    this IEnumerable<TSource> first,
    IEnumerable<TSource> second,
    Func<TSource, TSource, bool> comparer
)
{
    return first.Intersect(second, new LambdaComparer<TSource>(comparer));
} 
```

它使用[LambdaComparer](http://brendan.enrick.com/post/linq-your-collections-with-iequalitycomparer-and-lambda-expressions.aspx)类。

然后，您可以通过以下方式比较它们：

```
var compared = listA.Intersect(listB, (a, b) => a == b);
if(compared.Count() == listA.Count())
   // they are the same
else
   // they are not 
```

# javascript - 如何更改 jQuery 默认上下文？

> ID：10001411
> 
> 赞同：4
> 
> 时间：2012-04-03T21:07:52.477
> 
> 标签：javascript, jquery, firefox-addon

我在 Firefox 插件上加载了 jQuery，这导致它使用 XUL 的`window`.

我想更改默认上下文，以便它使用正确的`window`对象。

我经常看到的经典例子是：

```
var $ = function(selector,context){
   return new  jQuery.fn.init(selector,context|| correctWindow );
};
$.fn = $.prototype = jQuery.fn; 
```

但是这样做我会杀死很多功能，比如`.ajax`，，`.browser`......我需要这些方法。

[AMO](https://addons.mozilla.org/en-US/firefox/)不会让我创建一个包装器`jQuery`来发送正确的`window`对象。

所以我唯一的选择是以某种方式更改 jQuery 的默认上下文而不更改其源代码。

我有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T18:55:24.527

在我添加的第一个内容脚本上

```
var loader = Components
    .classes["@mozilla.org/moz/jssubscript-loader;1"]
    .getService(Components.interfaces.mozIJSSubScriptLoader);

loader.loadSubScript("chrome://extensions/js/jquery-1.7.2.min.js");

var initjQuery = jQuery.fn.init;
$.fn.init = function(s,c,r) {
    c = c || window.document;
    return new initjQuery(s,c,r);
}; 
```

这样就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-05T18:43:49.003

您可以使用此包装器更改默认上下文：

```
jQuery.fn.init2 = jQuery.fn.init;

jQuery.prototype.init = function (selection, context, root) {
    return new jQuery.fn.init2(selection, context, jQuery.context || root);
}

$(document).ready(function () {
    jQuery.context = $(newContextSelector);
    $("*").css("color", "red");
}); 
```

查看作为 jquery 对象的上下文。

# html - 删除锚下划线电子邮件签名

> ID：10001418
> 
> 赞同：6
> 
> 时间：2012-04-03T21:08:21.590
> 
> 标签：html, email, gmail, signature, hotmail

我正在为我的一个客户开发自定义电子邮件签名，我现在正处于 GMail、Hotmail、Brinkster 等的测试阶段。

我很难删除锚显示的下划线，我确实有“ text-decoration: none;” 在锚本身上，任何一个客户端都没有任何效果，但是 Outlook 呈现正常。

任何人都可以帮忙吗？:-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T17:05:15.820

I think your issue may be that certain clients move anchor styles and text into a span and apply the style definitions to that instead.

```
<a href="/" style="color:black;">hello, world!</a> 
```

becomes

```
<a href="/"><span style="color:black;">hello, world!</span></a> 
```

Not 100% sure why they do this, but it's annoying. Sometimes changing to something like this works:

```
<a href="/" style="color:black;" href="/"><span style="color:black;">hello, world!</span></a> 
```

But it's still a mixed bag and changing all the time. Unfortunately the only way to confirm that things always look right is to use an image.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:33:12.837

您也可以尝试添加`!important`样式：

```
text-decoration: none !important; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T21:31:27.613

```
 <a href="example.com" style="text-decoration:none">link text</a> 
```

除非其他地方有更高优先级的 css 规则，否则不会有下划线。

# javascript - Javascript - JQuery on() clearTimeout 范围问题

> ID：10001419
> 
> 赞同：1
> 
> 时间：2012-04-03T21:08:24.060
> 
> 标签：javascript, jquery, settimeout

我已经搜索和搜索了，但我对这个人一无所知。帮助！我正在使用 JQuery on() 观看 keyup 事件的输入字段 (#filter_query)。当用户在此输入字段中输入一些文本时，on() 会触发 setTimeout()，然后依次触发站点的搜索功能。如果用户继续在输入字段中键入 clearTimeout()，我试图避免触发搜索。由于某种原因，没有为 clearTimeout 保留超时 ID，并且每次都会生成一个新 ID。

这是我的代码：

```
$(document).on('keyup', '#filter_query', function (event) {
    var iTimeoutID,
        iTypingDelay = 800,
        sFilterVal = $.trim($('#filter_query').val()),
        sFilterCat = $('#filter_catagory').val(),
        sFilterCol = $('#filter_col').val();

    clearTimeout(iTimeoutID);

    if (sFilterVal !== "") {
        iTimeoutID = setTimeout(
                    function () {
                        searchFunction();
                    },
                    iTypingDelay
                    );
    }
}); 
```

使用上面的代码，无论 clearTimeout() 如何，我的搜索功能都会被触发多次。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:12:00.530

因为您正在定义变量`var iTimeoutID`，这意味着它不是全局变量，只能在该函数内部访问。因此，当再次调用该函数时，它会创建一个新变量。

我相信您应该能够通过不声明变量来解决它`var iTimeoutID`。

我可能是错的，所以如果是这样，请有人纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:12:04.773

Your`iTimeoutID`是`.on()`事件处理函数的局部变量，因此每次该函数完成并在下一次重新创建时它都会被销毁。将其从该范围移至更高级别或全局级别，以便它可以从一个事件到下一个事件生存。

你可以这样做；

```
var iTimeoutID = null;
$(document).on('keyup', '#filter_query', function (event) {
    var iTypingDelay = 800,
        sFilterVal = $.trim($('#filter_query').val()),
        sFilterCat = $('#filter_catagory').val(),
        sFilterCol = $('#filter_col').val();

    if (iTimeoutID) {
        clearTimeout(iTimeoutID);
        iTimeoutID = null;
    }

    if (sFilterVal !== "") {
        iTimeoutID = setTimeout(function() {
            iTimeoutID = null;
            searchFunction();
        }, iTypingDelay);
    }
}); 
```

如果你想避免全局变量或者你有多个变量，你可以使用 jQuery`.data()`将计时器 id 存储在对象上，如下所示：

```
$(document).on('keyup', '#filter_query', function (event) {
    var self = $(this);
    var iTimeoutID = self.data("timerID") || null;
    var iTypingDelay = 800,
        sFilterVal = $.trim($('#filter_query').val()),
        sFilterCat = $('#filter_catagory').val(),
        sFilterCol = $('#filter_col').val();

    if (iTimeoutID) {
        clearTimeout(iTimeoutID);
        iTimeoutID = null;
    }

    if (sFilterVal !== "") {
        iTimeoutID = setTimeout(function() {
            self.data("timerID", null);
            searchFunction();
        }, iTypingDelay);
    }
    self.data("timerID", iTimeoutID);
}); 
```

这是另一个版本，它使用自执行函数充当一些变量的外壳，这些变量可以在事件处理程序中持续而不是全局的：

```
(function() () {
    var iTimeoutID = null;
    $(document).on('keyup', '#filter_query', function (event) {
        var iTypingDelay = 800,
            sFilterVal = $.trim($('#filter_query').val()),
            sFilterCat = $('#filter_catagory').val(),
            sFilterCol = $('#filter_col').val();

        if (iTimeoutID) {
            clearTimeout(iTimeoutID);
            iTimeoutID = null;
        }

        if (sFilterVal !== "") {
            iTimeoutID = setTimeout(function() {
                iTimeoutID = null;
                searchFunction();
            }, iTypingDelay);
        }
    });
})(); 
```

如果这是一件快速的事情并且与其他代码冲突的可能性很小并且事件处理程序只提供一个对象，那么第一个选项非常好。

如果`.on()`事件处理程序服务于多个对象并且每个对象都需要跟踪它自己的状态，那么第二个选项非常适合。

如果您在同一个事件处理程序上没有多个对象，那么第三个选项是避免添加任何新全局变量的最简单方法。

# javascript - 利用 Javascript 将多个动态命名的下拉列表更改为一个值

> ID：10001422
> 
> 赞同：1
> 
> 时间：2012-04-03T21:08:27.707
> 
> 标签：javascript, drop-down-menu

我试图调整[这个](http://www.fiendish.demon.co.uk/html/javascript/listfill.html)例子来做我需要的。我有一个信息表，我希望在其中实现在单击按钮时将整列设置为相同值的选项。这可能吗？我喜欢正确的方向。

只是为了举例。假设我有一个为期 4 天的游戏派对，我正在计划页面看起来像这样。下拉菜单包含 3 个出席选项（是、否、可能）。每个下拉菜单都根据日期和人员动态命名。所以它看起来有点像我粗糙的 excel 模型。理想情况下，我希望在与日期标记相同的区域中有一个按钮，可以将给定日期的每个人从下拉列表中标记为“是”。

![图片来自描述](../Images/de4f11c60119e7499b12391ed89a09b5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:38:06.807

是的，这是完全可能的。如果您有权访问 html，则可以执行以下操作：

*   为每个单元格添加一个类，引用日期，因此“Day 1”列上的所有单元格（td 元素）都有一个名为“day1”的类，“Day 2”列上的所有单元格都有一个名为“day2”的类“ 等等。
*   添加您在“日”列标题中提到的按钮，并为它们提供与用于单元格的相同条件的 ID，因此“第 1 天”列的按钮将具有“第 1 天”的 ID，依此类推。然后你做类似下面的事情。

> ```
> <script type="text/javascript">
> $(document).ready(function() {
>       $(".your-button-class").click(function() {
>          var day_reference = $(this).attr("id");
>          $("." + day_reference + " select").val(day_reference);
>          return false;
>         });
> });
> </script> 
> ```

我假设两件事：

*   你正在使用 jQuery
*   下拉选项的值与您用于按钮的 Id 相同。

如果您没有使用 jQuery 或类似的 js 库，请告诉我们您正在做什么，我们可以为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:39:59.047

出色地。我建议使用 JQuery 来做这些事情——比如将很多下拉菜单设置为给定的值。

```
<script type='javascript'>
  $(document).ready(function() {
       $('select#setall').change(function() {
           $('.attendance').val($(this).val());
       });
  });
</script>

<select id="setall">
     <option>Yes</option>
     <option>No</option>
     <option>Maybe</option>
</select>

Day 1:
<select class="attendace">
     <option>Yes</option>
     <option>No</option>
     <option>Maybe</option>
</select>

Day 2:
<select class="attendace">
     <option>Yes</option>
     <option>No</option>
     <option>Maybe</option>
</select>

Day 3:
<select class="attendace">
     <option>Yes</option>
     <option>No</option>
     <option>Maybe</option>
</select> 
```

# iphone - 在 iOS 中将动态内容加载到 UITableView 的正确方法

> ID：10001424
> 
> 赞同：0
> 
> 时间：2012-04-03T21:08:31.283
> 
> 标签：iphone, objective-c, ios, uitableview

好的，我已经阅读了大量关于将动态内容（来自网络）加载到 UITableView 以及预先计算单元格高度的问题。我尝试了不同的简单实现，但问题仍然存在......

假设我需要从网上读取一个 JSON 文件，将其解析为“项目”对象，每个对象都有可变大小的图像和各种文本标签，**我认为这是避免应用程序长时间挂起的正确方法，而一切正在加载**：

1.  在应用程序加载读取 JSON 文件并解析为项目数组
2.  仅向 tableview 提供项目数组的一小部分（大约 10 个项目） - 因为我需要加载与每个项目关联的图像来计算单元格高度 - 我不希望视图遍历整个项目列表并加载所有图像 - 这会挂起应用程序，直到加载每个图像
3.  显示带有可用单元格的表格视图（假设我加载了一些“备用”单元格，用户甚至可以滚动到更多项目）
4.  在后台使用 Grand Central Dispatch 下载所有/部分剩余项目的图像，然后用新数据重新加载 tableview（如果项目列表很长，请重复步骤 4）

上面的步骤 2 是必要的，因为我无法在不先加载图像的情况下计算单元格高度，并且由于 tableview 首先计算所有单元格的高度，因此下载所有项目的所有图像可能需要很长时间。

你会说这是正确的方法吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:41:15.433

为什么不在表格视图中标准化图像大小。然后，您可以在显示图像时对其进行操作以适应大小。如果选择，提供查看图像的方法。Quartzcore 框架将允许您获取原始图像并调整它们的大小。

我只建议这样做，因为它会使您的 tableview 在统一的图片尺寸下看起来比随机的更有吸引力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:25:25.320

你说得对，节目必须继续，即使你的数据仍在加载。因此，您需要设计一个在具有正确图像之前看起来很有吸引力的单元格。一种常见的方法是发送默认图像并格式化单元格以使其看起来不错。

为了处理高度，tableView 数据源协议可以询问您单元格的高度。回答的方法是，用伪代码：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

  id myModelElement = [self.myModel objectAtIndex:indexPath.row];
  UIImage *image = myModelElement.image;
  if (!image) image = self.placeholderImage;

  return kFIXED_HEIGHT + image.size.height;
} 
```

您希望异步加载图像也是正确的。 [请在此处查看我的答案，](https://stackoverflow.com/questions/9896347/table-view-with-image-caching-and-pull-to-update-option/9896753#9896753)以获得一种非常简单的方法。没有 GCD，甚至没有重新加载表行。

# svn - Subversion 服务器源代码

> ID：10001425
> 
> 赞同：1
> 
> 时间：2012-04-03T21:08:32.810
> 
> 标签：svn

谁能向我指出 Subversion 源代码的哪一部分实际上代表了*服务器*部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:15:37.953

Subversion 的服务器部分主要依赖于 Apache，因此您对 Apache SVN 模块感兴趣。那些是[`mod_dav_svn`](http://svn.apache.org/viewvc/subversion/trunk/subversion/mod_dav_svn/)和[`mod_authz_svn`](http://svn.apache.org/viewvc/subversion/trunk/subversion/mod_authz_svn/)。大多数（但不是全部）“服务器”代码都在[repos.c](http://svn.apache.org/viewvc/subversion/trunk/subversion/mod_dav_svn/repos.c?view=markup)（以及它包含的所有内容）中。至少这是一个起点。

如果您有兴趣了解 Subversion 的服务器是如何工作的，您可能希望对 Apache 有一个很好的了解，甚至还想看看那里的源代码。

# publish - RTMP_Write 函数使用

> ID：10001426
> 
> 赞同：6
> 
> 时间：2012-04-03T21:08:37.297
> 
> 标签：publish, flv, rtmp, rtmpd

我正在尝试使用 librtmp 库，它可以很好地提取流。但现在我正在尝试发布一个流，为此我相信我必须使用 RTMP_Write 函数。

我在这里要完成的是一个简单的 c++ 程序，它将从文件中读取并尝试将流推送到 crtmp 服务器。连接和流创建都可以，但是我对使用 RTMP_Write 感到很困惑。

这是我所做的：

```
int Upload(RTMP * rtmp, FILE * file){
        int nRead = 0;
        unsigned int nWrite = 0;
        int diff = 0;
        int bufferSize = 64 * 1024;
        int byteSum = 0;
        int count  = 0;
        char * buffer;
        buffer = (char *) malloc(bufferSize);
        do{
                nRead = fread(buffer+diff,1,bufferSize-diff,file);
                if(nRead != bufferSize){
                        if(feof(file)){
                                RTMP_LogPrintf("End of file reached!\n");
                                break;
                        }else if(ferror(file)){
                                RTMP_LogPrintf("Error reading from file stream detected\n");
                                break;
                        }
                }
                count += 1;
                byteSum += nRead;
                RTMP_LogPrintf("Read %d from file, Sum: %d, Count: %d\n",nRead,byteSum,count);
                nWrite = RTMP_Write(rtmp,buffer,nRead);
                if(nWrite != nRead){
                        diff  = nRead - nWrite;
                        memcpy(buffer,(const void*)(buffer+bufferSize-diff),diff);
                }
        }while(!RTMP_ctrlC && RTMP_IsConnected(rtmp) && !RTMP_IsTimedout(rtmp));
        free(buffer);
        return RD_SUCCESS;
} 
```

在这个上传函数中，我收到了已经初始化的 RTMP 结构和一个指向打开文件的指针。

这实际上有效，我可以看到正在显示一些视频，但它很快就会丢失并停止发送包裹。我设法理解，每当我设置的缓冲区（我随机要求为 64k，没有特殊原因）碰巧拆分 flv 标记（[http://osflash.org/flv#flv_format](http://osflash.org/flv#flv_format)）时，就会发生这种情况新包。

为此，我修改了 RTMP_Write 函数并告诉它验证它是否能够解码整个 flv 标签（数据包类型、正文大小、时间戳等），如果不能，那么它应该只返回数量缓冲区中剩余的有用字节。

```
 if(s2 - 11 <= 0){
      rest = size - s2;
      return rest;
  } 
```

上面的代码注意到了这一点，如果 RTMP_Write 返回的值不是它应该发送的字节数，那么它知道该值是缓冲区中剩余的有用字节数。然后我将这些字节复制到缓冲区的开头并从文件中读取更多内容。

但是我一直遇到问题，所以我想知道：这个函数的正确用法是什么？是否有我应该使用的特定缓冲区值？（不这么认为）还是它本身就是越野车？

# xpages - 当自定义控件有多个实例时从自定义控件获取字段值

> ID：10001442
> 
> 赞同：0
> 
> 时间：2012-04-03T21:09:43.240
> 
> 标签：xpages

我有一个带有多个相同自定义控件实例的 xPage。如何从 xPage 上的按钮获取特定自定义控件上的字段值。

通常我会做类似的事情：

ctlName = "radioGroupCMBUAction"; var changeType = getComponent(ctlName).getValue();

如果控件只有一个实例。我将如何使用控件的多个实例来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:42:46.703

如果没有代码，我不确定 .getValue() 是否会起作用，因为为了实现这一点，它必须拉出一个字段，因为自定义控件可能在其中重复，等等。

假设如果每个 customControl 实例都有一个彼此唯一的 id 它将工作，它应该可以正常工作，因为每个实例都应该在其中有自己的变量。

然而，其他想法可能是传入一个字符串并将此字符串用作自定义控件内的范围变量的名称，该变量可以从任何地方拉出。我之前已经这样做了，我在自定义控件上为字符串创建了一个属性，并在自定义控件内部使用

```
viewScope[compositeData.customProperty] = value. 
```

然后在自定义控件的上下文之外，我知道我传入的字符串，所以我可以把这个值拉回来。传入它意味着多个实例不会互相覆盖。

或者，您可以将自定义控件中的字段写入文档，以便将其取出或作为保存问题的最终解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:38:38.950

不确定这是否可以帮助您..？不久前，我写了一篇关于“私有”作用域变量的提示：

[http://dontpanic82.blogspot.com/2010/03/xpages-tip-regarding-private-scoped.html](http://dontpanic82.blogspot.com/2010/03/xpages-tip-regarding-private-scoped.html)

# visual-studio - 不会替换连接字符串以在 msbuild 中发布

> ID：10001445
> 
> 赞同：1
> 
> 时间：2012-04-03T21:09:59.930
> 
> 标签：visual-studio, msbuild

我正在使用 msbuild 3.5、visual studio 2008 和 web 部署项目。

我为 web 部署项目启用了 webconfig 替换选项。

我想我可以通过附加另一个 ItemGroup 来在构建脚本中执行以下操作以进行发布？

```
<ItemGroup Condition="'$(Configuration)|$(Platform)' == 'Debug|AnyCPU'">
    <WebConfigReplacementFiles Include="webDebug.config">
        <Section>connectionStrings</Section>
    </WebConfigReplacementFiles>
</ItemGroup>
<ItemGroup Condition="'$(Configuration)|$(Platform)' == 'Release|AnyCPU'">
    <WebConfigReplacementFiles Include="webRelease.config">
        <Section>connectionStrings</Section>
    </WebConfigReplacementFiles>
</ItemGroup>
<Import Project 
```

我做以下就好了：

```
msbuild myProject.wdproj 
```

以及我对 Include 属性所拥有的任何东西，无论是 webDebug 还是 webRelease，它都适用于 Debug 版本。

我如何为发布版本做同样的事情？

我尝试了以下方法：

```
msbuild myProj.wdproj /p:Configuration=Release 
```

但连接字符串永远不会被正确替换。

请指教。

# javascript - 如何使用javascript删除完整对象？

> ID：10001447
> 
> 赞同：0
> 
> 时间：2012-04-03T21:10:45.960
> 
> 标签：javascript, json, object

我试过了，但`delete`没有用。

```
var x = {"y":42,"z":{"a":1,"b":[1,2,3]}};

alert(x.y);
delete x;

alert(x.y); // still shows '42' 
```

如何删除整个对象跨浏览器？

编辑： `x = null`也不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:16:41.323

只能使用 delete 运算符删除隐式声明的变量，而不能删除使用 var 声明的变量。您可以设置 x = null 或 x = undefined

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-03T21:12:32.883

您不能删除变量或函数。只是对象的一个​​属性。您可以简单地分配：

```
x = null; 
```

如果你想清除它的值。

更新：关于功能的说明：

```
>> function f1() {console.log("aa");}
>> f1();
aa
>> delete f1;
false
>> f1();
aa 
```

但是如果将全局函数声明为窗口属性，则可以将其删除：

```
>> f1 = f1() {console.log("aa");}
>> delete window.f1;
true 
```

变量也是如此：

```
>> a = "x";
>> console.log(a);
x
>> delete window.a;
true
>> console.log(a);
ReferenceError: a is not defined 
```

但：

```
>> var a = "x";
>> console.log(a);
x
>> delete a;
false
>> console.log(a);
x 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-03T21:13:34.037

您不需要在 JavaScript 中删除对象。在删除对它的所有引用后，该对象将被垃圾收集。要删除引用，请使用：

```
x = null; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-03T21:13:23.140

您不能从 Javascript 的全局命名空间中删除对象。

您可以`delete`在 内创建对象`x`，但不能在`x`其内创建对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-03T21:14:19.640

尝试`x = null;`或`x = undefined;`。

# asp.net-mvc - ASP.net mvc 共享类库

> ID：10001450
> 
> 赞同：0
> 
> 时间：2012-04-03T21:11:27.063
> 
> 标签：asp.net-mvc, asp.net-mvc-3, reference, shared, class-library

我创建了一个 .net 类库，用于从我们的任何项目创建报告。情况是我在我的asp.net mvc项目中引用了类库dll。比单击按钮时，我在类库中调用共享方法如下（PO 是我的类库的命名空间）：

```
PO.GenerateReport(Parameter1, Parameter2, Parameter3, Parameter4, Parameter5, Parameter6, Parameter7) 
```

如果一个用户正在调用，这非常有用，一旦多个用户尝试同时调用 PO.GenerateReport，我就会开始遇到问题。

我认为每个用户实例都会启动他们自己的 PO 类库实例，但事实并非如此。关于如何适应这种情况的任何想法？或者我对如何引用或设置类库完全错误？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:15:56.273

看起来您已将函数设为静态，这意味着实际上没有创建该类的实例。如果您希望它对每个用户都是唯一的，则必须使该方法非静态。

# visual-c++ - dc.LineTo 不会在 OnPaint() 上绘图，除非我使用鼠标移动并将窗口移出视图？

> ID：10001453
> 
> 赞同：0
> 
> 时间：2012-04-03T21:11:35.830
> 
> 标签：visual-c++, mfc

除非我制作“静态 CPaintDC dc(this);” 线不会画？但这不好，因为它最终会出错，图形也不会保留在屏幕上。

不知道我做错了什么

注意：我有一个计时器，它每 100 毫秒调用一次（x 和 y 递增）thx

```
void CGraphicsDlg::OnPaint() 
{
    CString s;
    CPaintDC dc(this);// device context for painting

    if (IsIconic())
    {
        SendMessage(WM_ICONERASEBKGND, (WPARAM) dc.GetSafeHdc(), 0);

        // Center icon in client rectangle
        int cxIcon = GetSystemMetrics(SM_CXICON);
        int cyIcon = GetSystemMetrics(SM_CYICON);
        CRect rect;
        GetClientRect(&rect);
        int x = (rect.Width() - cxIcon + 1) / 2;
        int y = (rect.Height() - cyIcon + 1) / 2;

        // Draw the icon
        dc.DrawIcon(x, y, m_hIcon);
    }
    else if(x==0)
    {
        s.Format("%d", x);
        edXa->SetWindowText(s);

        dc.MoveTo(20,400);
    }
    else if (x>0){
        s.Format("%d", x);
        edXb->SetWindowText(s);

        dc.LineTo(20 + x, 40);  // doesn't draw unless I make "static CPaintDC dc(this);" <- which will error out 
    }
    CDialog::OnPaint();
}

void CGraphicsDlg::OnTimer(UINT nIDEvent)
{
    if(nIDEvent==1){
        srand( (unsigned)time( NULL ) );

        //y = rand() % 100;
        y++;
        x++;

        OnPaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:15:32.120

`LineTo`使用选定的笔从一个点到另一个点画一条线。您需要使用`MoveTo`来定义行的开始，并且您需要选择一支笔插入DC。

更大的问题是您如何尝试使用 DC。它并不意味着是永久性的。您应该获得它，将所有内容都吸引到它，然后将其关闭。当您尝试将其设为`CPaintDC`静态时，Windows 最终会关闭它，此后每次尝试使用它都会返回错误。

正确的方法是保存您需要做的*所有*绘图的任何坐标。使用`MoveTo`和的组合`LineTo`来绘制单独的线段，每次重新进入 OnPaint 时都需要重新开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:29:31.207

我没有回答您的问题，但是您是否注意到即使**IsIconic()**返回**TRUE也会调用****CDialog::OnPaint()**？

 ****我认为您将需要使用一对额外的**{}**来解决这个问题 ;-)****

# javascript - 使用 onClick 调用 JavaScript 函数 - 使用表单元素值...？

> ID：10001460
> 
> 赞同：0
> 
> 时间：2012-04-03T21:12:18.687
> 
> 标签：javascript, forms, onclick

我在使用 javascript 获取表单元素值，然后使用这些值调用使用“onClick”属性的函数时遇到了一些问题。

```
<form name="form1">
<select name="option1">
<option value="1">Option 1</option>
</select>
<input type="image" name="itemid" value="<?=$itemid?>" src="add.png" onclick="window.parent.newAddItem(this.value,form1.elements["option1"].value)" />
</form> 
```

我发誓这应该有用吗？谁能告诉我这是我应该做的事情，或者是否有不同的“最佳实践”方法。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:25:29.290

您的问题可能是因为您试图访问“select”元素的“value”属性而不是 selected 选项。试试这个：

```
// On your onclick event handler:
var option1 = form1.elements["option1"];
var selectedOption = option1.options[option1.selectedIndex];
window.parent.newAddItem(this.value, selectedOption.value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:19:42.950

根据您发布的内容，oForm 未定义。

避免像您那样使用内联事件处理程序。相反，集中绑定事件处理程序。这使 JS 远离您的 HTML。

本国的：

```
var onclick = function() { alert('you clicked me!'); };
var element = document.getElementById('some_element');
document.addEventListener ? element.addEventListener('click', onclick, false) : element.attachEvent('onclick', onclick); 
```

jQuery

```
$('#some_element').click(function() { alert('you clicked me!'); }); 
```

# mysql - 使用联合和子查询引用一个值时从更改表中获取新记录

> ID：10001463
> 
> 赞同：0
> 
> 时间：2012-04-03T21:12:25.467
> 
> 标签：mysql, union

我有 2 个表格，其中存储了课程以及多年来对课程名称的更改

餐桌课程

```
year, record
2009, 'Basic English 101'
2009, 'Maths 100'
2010, 'Introduction to English 102'
2010, 'Maths 101'
2010, 'History 100'
2011, 'English 103'
2012, 'Maths 102' 
```

表更改

```
year, oldrecord', 'newrecord' 
2010, 'Basic English 101', 'Introduction to English 102'
2010, 'Maths 100', 'Maths 101'
2011, 'Introduction to English 102', 'English 103' 
2012, 'English 103', 'English 104'
2012, 'Maths 101' 'Maths 102' 
```

我想要的是多年来显示课程名称，

通过这个查询，我设法获得了 2009 年和 2010 年英语 101 的下一个记录

```
SELECT year, record AS coursename FROM courses 
WHERE record= 'Basic English 101'
UNION
SELECT Year, newrecord FROM changes 
WHERE newrecord = (SELECT newrecord FROM changes WHERE oldrecord='Basic English 101') 
```

结果

```
year, coursename
2009, 'Basic English 101'
2010, 'Introduction to English 102' 
```

我的问题是如何根据新记录的价值获得其他年份的记录？

我可以做另一个子查询，但如果课程分成 2 个，我会得到子查询返回多个行错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:28:55.247

您需要在两个表中添加一个唯一的 id 字段，该字段将链接课程而不依赖于名称。使用自动增量主键将其设为整数。

表课程应该只存储当前名称

```
year, record_id, record,
2010, 1, 'History 100'
2011, 2, 'English 103'
2012, 3, 'Maths 102' 
```

表更改应参考相关的record_id

```
year, record_id, oldrecord, newrecord 
2010, 2, 'Basic English 101', 'Introduction to English 102'
2010, 3, 'Maths 100', 'Maths 101'
2011, 2, 'Introduction to English 102', 'English 103' 
2012, 2, 'English 103', 'English 104'
2012, 3, 'Maths 101' 'Maths 102' 
```

然后，您可以通过执行以下操作来获得完整的历史记录，例如英语记录

```
SELECT oldrecord FROM changes WHERE record_id = 2 
```

# ruby-on-rails-3 - 为什么 Rails 3.2.2 在使用 redirect_to 时会生成前缀为 /assets 的 URL？

> ID：10001466
> 
> 赞同：4
> 
> 时间：2012-04-03T21:12:46.067
> 
> 标签：ruby-on-rails-3

好吧，标题问题几乎总结了它，但我还是想详细说明一个场景，

我创建了一个 DemoController，（我还没有创建 Resource 模型），我的**routes.rb**看起来像这样：

```
DispatchMe::Application.routes.draw do
  root to: "demo#index"
end 
```

在演示控制器中，我正在执行以下操作：

```
class DemoController < ApplicationController
  def index
    redirect_to :action => 'show'
  end

  def show
  end
end 
```

有一个文件：**app/views/demo/show.html.erb**当然，我希望该模板被渲染，但我得到了以下错误：

**ActionController::RoutingError (没有路由匹配 [GET] "/assets")**

并且此 URL 是作为重定向的结果生成的：

**/assets?action=show&controller=demo**

我在这里错过*了什么*吗？我认为 rails 应该为这种情况渲染动作的模板。

笔记。我知道如果我创建一个像**get 'show' => "demo#show"**这样的路由并调用**redirect_to show_path**它会工作得很好，但我需要知道这是否是强制性的？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T15:50:06.660

对于所需的行为，使用`render`代替`redirect_to`：

```
class PagesController < ApplicationController
  def index
    render :action => "show"
  end

  def show
  end
end 
```

**编辑：**

您可以`redirect_to`在其他操作上使用，但据我所知，索引操作设置了基本路径。要简化路由定义，请使用`resources :controller_name`. `rake routes`您可以通过在命令行中键入来查看资源生成的路由。

**例子：**

**demo_controller.rb**

```
class DemoController < ApplicationController
  def index
  end

  def show
    redirect_to :action => 'index'
  end
end 
```

**路线.rb**

```
DispatchMe::Application.routes.draw do
  root to: "demo#index"
  resources :demo
end 
```

**开发日志**

```
Started GET "/demo/show" for 127.0.0.1 at 2012-04-04 14:55:25 -0400
Processing by DemoController#show as HTML
  Parameters: {"id"=>"show"}
Redirected to http://dispatch.dev/
Completed 302 Found in 0ms (ActiveRecord: 0.0ms) 
```

# java - GWT RPC XsrfToken 序列化异常

> ID：10001467
> 
> 赞同：3
> 
> 时间：2012-04-03T21:12:47.733
> 
> 标签：java, google-app-engine, gwt

我正在开发一个 gwt/app 引擎应用程序，但自从升级到 App Engine 1.6.4/GWT 2.4.0 后出现了问题。我将 Java 用于应用程序引擎。我看到序列化问题。我不确定升级是否导致了这个问题——它破坏了我的应用程序，我不得不重新创建 Eclipse 项目。

我正在`GWT XsrfToken`使用`GWT RPC`. 它在开发模式下的 Eclipse 中运行良好，但是当我将应用程序部署到应用程序引擎时，应用程序引擎日志中出现以下异常：

```
javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.client.rpc.SerializationException: Type 'com.google.gwt.user.client.rpc.XsrfToken' was not assignable to 'com.google.gwt.user.client.rpc.IsSerializable' and did not have a custom field serializer.For security purposes, this type will not be serialized.: instance = com.google.gwt.user.client.rpc.XsrfToken@1e80c87
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:619)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter$ValueWriter$8.write(ServerSerializationStreamWriter.java:153)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeValue(ServerSerializationStreamWriter.java:539)
    at com.google.gwt.user.server.rpc.RPC.encodeResponse(RPC.java:616)
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForSuccess(RPC.java:474)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:571)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
...more 
```

任何帮助将不胜感激。

# objective-c - kAudioUnitSubType_NBandEQ 是如何工作的？或者使用 DSP 公式和 Novocaine 进行均衡？

> ID：10001471
> 
> 赞同：8
> 
> 时间：2012-04-03T21:12:58.530
> 
> 标签：objective-c, ios, signal-processing, core-audio

我正在尝试制作一个 10 波段均衡器，`kAudioUnitSubType_NBandEQ`音频单元似乎是可行的方法，但 Apple 的文档并未涵盖如何设置/配置它。

我已经连接了节点，但是当我尝试将 EQNode 与 iONode（输出）连接时出错：[https ://gist.github.com/2295463](https://gist.github.com/2295463)

如何将效果转换为有效的 10 段均衡器？

**更新：** 使用[Novocaine](http://alexbw.github.com/novocaine/)的有效 DSP 配方也是一种解决方案，任何想法！那些 DSP 公式相当复杂。

**更新 2 ：我更喜欢使用**[Novocaine](http://alexbw.github.com/novocaine/) 的有效 DSP 公式，因为它比编程音频节点更干净/更小。

**更新 3：** “Multitype EQ 单元（子类型 kAudioUnitSubType_NBandEQ）提供了一个均衡器，可以配置为“Mutitype EQ Unit Filter Types”（第 68 页）中描述的任何一种类型。” 来源： http: [//developer.apple.com/library/ios/DOCUMENTATION/AudioUnit/Reference/AudioUnit_Framework/AudioUnit_Framework.pdf](http://developer.apple.com/library/ios/DOCUMENTATION/AudioUnit/Reference/AudioUnit_Framework/AudioUnit_Framework.pdf) 但仍然没有例子。

**重要更新 (17/05)：**我建议大家使用我在 github 上发布的 DSP 类：[https](https://github.com/bartolsthoorn/NVDSP) ://github.com/bartolsthoorn/NVDSP它可能会为您节省很多工作。它将使开发 n 波段均衡器或任何类型的音频滤波器变得轻而易举。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:07:13.667

我是 Novocaine 的创造者，我用它使用 vDSP 制作了一个 200 多个频段的 EQ。

我正在考虑切换到 NBandEQ 音频单元，但我有一个使用 vDSP_deq22 的工作解决方案。

vDSP_deq22 使用二阶 IIR 滤波器一次过滤一个样本数据。您可以在 musicdsp.org 上找到二阶巴特沃斯系数，或者更一般地通过 Google 搜索。如果您可以访问副本，Matlab 也会为您计算它们。我使用了musicdsp.org。您将创建 10 个 vDSP_deq22 滤波器，通过每个滤波器运行您的音频，将该频段乘以指定的增益，然后将滤波器组中所有滤波器的输出相加到您的输出音频中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T06:10:23.617

10段均衡器可配置如下

## 转换器节点-> eqNode-> 转换器节点-> ioNode。

请参考下面的示例代码。在这里，我使用了 iPodEQ 单元。用 10 段均衡器替换 iPodEQunit 格式规范。

```
AUNode outputNode;
AUNode iPodTimeNode;
AUNode converterNode;
AUNode converterNode2;

AudioUnit converterAU;
AudioUnit converterAU2;

printf("create client format ASBD\n");

// client format audio going into the converter
mClientFormat.SetCanonical(1, false); 
mClientFormat.mSampleRate = kGraphSampleRate;
mClientFormat.Print();

printf("create output format ASBD\n");
CAStreamBasicDescription localOutput;
localOutput.SetAUCanonical(2, false);
localOutput.mSampleRate = kGraphSampleRate;

// output format
mOutputFormat.SetCanonical(1, false); 
mOutputFormat.mSampleRate = kGraphSampleRate;
mOutputFormat.Print();

OSStatus result = noErr;

printf("-----------\n");
printf("new AUGraph\n");

// create a new AUGraph
result = NewAUGraph(&mGraph);
if (result) { printf("NewAUGraph result %ld %08X %4.4s\n", result,
                     (unsigned int)result, (char*)&result); return; }

// create three CAComponentDescription for the AUs we want in the graph

// output unit
CAComponentDescription output_desc(kAudioUnitType_Output,
                                   kAudioUnitSubType_GenericOutput,
                                   kAudioUnitManufacturer_Apple);

// iPodTime unit
CAComponentDescription iPodTime_desc(kAudioUnitType_FormatConverter,
                                     kAudioUnitSubType_AUiPodTimeOther,
                                     kAudioUnitManufacturer_Apple);

// AU Converter
CAComponentDescription converter_desc(kAudioUnitType_FormatConverter,
                                      kAudioUnitSubType_AUConverter,
                                      kAudioUnitManufacturer_Apple);

printf("add nodes\n");

// create a node in the graph that is an AudioUnit, using the supplied
// AudioComponentDescription to find and open that unit
result = AUGraphAddNode(mGraph, &output_desc, &outputNode);

result = AUGraphAddNode(mGraph, &iPodTime_desc, &iPodTimeNode);

result = AUGraphAddNode(mGraph, &converter_desc, &converterNode);

result = AUGraphAddNode(mGraph, &converter_desc, &converterNode2);

// connect a node's output to a node's input
// converter -> iPodTime ->converter-> output

result = AUGraphConnectNodeInput(mGraph, converterNode2, 0, iPodTimeNode, 0);

result = AUGraphConnectNodeInput(mGraph, iPodTimeNode, 0, converterNode, 0);

result = AUGraphConnectNodeInput(mGraph, converterNode, 0, outputNode, 0);

// open the graph -- AudioUnits are open but not initialized
// (no resource allocation occurs here)
result = AUGraphOpen(mGraph);

// grab audio unit instances from the nodes
result = AUGraphNodeInfo(mGraph, converterNode, NULL, &converterAU);
result = AUGraphNodeInfo(mGraph, converterNode2, NULL, &converterAU2);
result = AUGraphNodeInfo(mGraph, iPodTimeNode, NULL, &mIPodTime);
result = AUGraphNodeInfo(mGraph, outputNode, NULL, &mOutputUnit);

//Get EQ unit format
UInt32 size ;
CAStreamBasicDescription eqDesc;
AudioUnitGetProperty(mIPodTime, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, 0, &eqDesc, &size);
eqDesc.Print();

// setup render callback struct
AURenderCallbackStruct rcbs;
rcbs.inputProc = &renderInput;
rcbs.inputProcRefCon = &mUserData;

printf("set AUGraphSetNodeInputCallback\n");

// set a callback for the specified node's specified input bus (bus 1)
result = AUGraphSetNodeInputCallback(mGraph, converterNode2, 0, &rcbs);

//SetFormat
result = AudioUnitSetProperty(converterAU2, kAudioUnitProperty_StreamFormat,
                              kAudioUnitScope_Input, 0, &mClientFormat, sizeof(mClientFormat));
result = AudioUnitSetProperty(converterAU2, kAudioUnitProperty_StreamFormat,
                              kAudioUnitScope_Output, 0, &eqDesc, sizeof(eqDesc));

printf("set converter input bus %d client kAudioUnitProperty_StreamFormat\n", 0);

// set the input stream format, this is the format of the audio
// for the converter input bus (bus 1)
result = AudioUnitSetProperty(converterAU, kAudioUnitProperty_StreamFormat,
                              kAudioUnitScope_Input, 0, &localOutput, sizeof(localOutput));

// in an au graph, each nodes output stream format (including sample rate)
// needs to be set explicitly this stream format is propagated to its
// destination's input stream format

printf("set converter output kAudioUnitProperty_StreamFormat\n");

// set the output stream format of the converter
result = AudioUnitSetProperty(converterAU, kAudioUnitProperty_StreamFormat,
                              kAudioUnitScope_Output, 0, &mOutputFormat, sizeof(mOutputFormat));

result = AudioUnitSetProperty(mOutputUnit, kAudioUnitProperty_StreamFormat,
                              kAudioUnitScope_Output, 0, &mOutputFormat, sizeof(mOutputFormat));

// set the output stream format of the iPodTime unit
result = AudioUnitSetProperty(mIPodTime, kAudioUnitProperty_StreamFormat,
                              kAudioUnitScope_Output, 0, &localOutput, sizeof(localOutput));

printf("AUGraphInitialize\n");
// add a render notification, this is a callback that the graph will call every time the graph renders
// the callback will be called once before the graph’s render operation, and once after the render operation is complete 
```

# eclipse - Eclipse 无法连接到 TFS 服务器

> ID：10001473
> 
> 赞同：3
> 
> 时间：2012-04-03T21:13:22.370
> 
> 标签：eclipse, tfs, eclipse-plugin, team-explorer, team-explorer-everywhere

我在 Microsoft Visual Studio Team Explorer Everywhere 2010 中使用 Eclipse。我能够成功导入我的项目，但每次打开 Eclipse 时，进度窗口在尝试“刷新[http://我的服务器](http://my.server)“。

最终我会从 eclipse 中得到一个错误：

在“刷新项目 MyProject 的服务器项信息”期间发生内部错误。com.ctc.wstc.exc.WstxIOException：连接重置。

[尝试手动刷新时，我也收到此消息：在“刷新http://my.server](http://my.server)的 TFS 服务器信息”期间发生内部错误。[com.ctc.wstx.exc.Wstx.LazyException] 连接重置。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:30:20.883

“连接重置”来自 TEE 的网络通信层，消息指向网络问题。您可以使用插件中的任何 TFS 功能（“刷新服务器项目信息”是唯一失败的东西）吗？如果您无法使用插件中的任何 TFS 功能，请检查 Eclipse 的 HTTP 代理配置是否正确。

如果您可以使用某些 TFS 功能，但服务器项目信息刷新功能失败，请检查您的客户端和 TFS 之间是否没有 HTTP 代理、防火墙或 NAT 设备，这些设备会在短时间内丢弃 TCP 套接字。为大量文件或从负载很重的服务器刷新信息可能需要一段时间（可能是几分钟）。在不通知客户端的情况下“丢弃”活动 TCP 套接字的网络设备会导致此行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:47:39.433

首先，如果您还没有安装[TEE SP1 。](http://www.microsoft.com/download/en/details.aspx?id=25125)

如果错误仍然存​​在，则可能是一个潜在的错误，因此请将其发布在[connect](http://connect.microsoft.com/VisualStudio)或[TEE 论坛上](http://social.msdn.microsoft.com/Forums/en-US/tee/threads)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:15:46.750

我最终卸载并重新安装了 eclipse 和 TEE 插件。之后，就 TFS 而言，一切都连接并正常工作。

# audio - ADPCM 有一定的采样率吗？

> ID：10001478
> 
> 赞同：1
> 
> 时间：2012-04-03T21:13:43.140
> 
> 标签：audio, adpcm

ADPCM 是自适应的，因此它具有可变的采样率。但它有一些平均速率吗？它有固定持续时间的帧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-09T21:52:27.517

* * *

您在这里误解了它:-)。“自适应”并不意味着采样率根据其包含的信号进行调整。

“自适应”意味着有限的可用增量步长（4Bit = 只有 16 种编码样本的可能性）通过预测适应信号。它试图从给定的样本中估计下一个样本可能具有的值，并根据该值调整增量步长。

如果信号从样本到样本的变化较小，则选择的步长比信号变化大的情况更接近。从一个样本到下一个样本，信号从非常振荡到安静是不太可能的。

如果您使用此类算法对 100Hz 的方波进行编码并在音频编辑器中重新打开它以使波形可见，您会注意到这种行为。当波形从一个极性变为另一个极性时，信号“加速”（步距越来越远），直到它到达另一端，然后再次减速（步距越来越接近）。

它仍然具有固定的采样率。你会给它的那个。在 RIFF WAVE 中，采样率存储在标题中。

# tfs - WorkItem.Save() 是如何工作的？

> ID：10001482
> 
> 赞同：2
> 
> 时间：2012-04-03T21:13:56.973
> 
> 标签：tfs, tfs-sdk

WorkItem.Save 保存了什么？更改/添加/删除的所有内容，包括添加的新附件等？

我正在尝试确定它在内部是如何工作的。假设由于某种原因无法设置一项或无法添加一个附件等失败，调用 Save 或尝试设置有问题的属性时是否抛出错误？

如果其中一项失败，那么其余的操作是否仍然成功，或者是否有诸如“全部或全部”之类的选项。

任何有关这方面的指导都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:23:58.260

工作项是一个原子实体。如果您调用`save()`，它将使用更改更新工作项，否则将失败。您无法进入对工作项所做的*某些*更改已保存而其他更改未保存的状态。

当您在工作项上设置字段时，会评估该工作项的有效性。工作项具有由流程模板定义的“规则”，必须验证这些规则才能让客户端尝试保存。您可以调用[`WorkItem.IsValid()`](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.workitemtracking.client.workitem.isvalid%28v=vs.100%29.aspx)以确定工作项是否处于有效状态。

有关有效性的更多信息，您可以调用[`WorkItem.Validate()`](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.workitemtracking.client.workitem.validate.aspx)以获取无效字段列表。

如果您要忽略工作项的有效性，而只是调用[`WorkItem.Save()`](http://msdn.microsoft.com/en-US/library/bb140425%28v=vs.100%29.aspx)，它将抛出`ValidationException`.

# vba - VBA 代码导入

> ID：10001489
> 
> 赞同：3
> 
> 时间：2012-04-03T21:14:37.157
> 
> 标签：vba, excel

我有一个我正在用 excel 做的 VBA 项目。我将拥有许多使用相同代码的工作簿，并且如果我进行更改，我不想将代码复制到所有工作簿。无论如何将代码放在一个中心位置，然后让所有工作簿访问该代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:23:42.677

是的，您有两个选择

**1)**将代码复制并粘贴到个人工作簿中。

更多细节在这里

**主题：从中央文件部署 Excel 宏**

**链接**： http: [//office.microsoft.com/en-us/excel-help/deploy-your-excel-macros-from-a-central-file-HA001087296.aspx](http://office.microsoft.com/en-us/excel-help/deploy-your-excel-macros-from-a-central-file-HA001087296.aspx)

**2)**创建加载项

模式详情在这里

**主题：为 Excel 创建 XLA 加载项**

**链接**：[http ://www.cpearson.com/excel/createaddin.aspx](http://www.cpearson.com/excel/createaddin.aspx)

*注意*：您可以在 VBA 和 Visual Studio 中创建加载项。对于 COM 加载项（使用 Visual Studio 创建），请参阅此链接。

**主题：使用 Visual Studio (VSTO) 进行 Office 开发**

**链接**：http: [//msdn.microsoft.com/en-us/office/hh133430](http://msdn.microsoft.com/en-us/office/hh133430)

高温高压

席德

# php - wget在php exec中失败

> ID：10001490
> 
> 赞同：1
> 
> 时间：2012-04-03T21:14:39.550
> 
> 标签：php, exec, wget

我有一个我正在尝试运行的小脚本，但它在`exec()`

```
<pre><?php

    ini_set("display_errors", 1);

    $command = "wget --save-cookies cookies.txt \
                --post-data '***' \
                --keep-session-cookies \
                http://site.com/ac_login.php;

                wget --load-cookies cookies.txt \
                --keep-session-cookies \
                -p http://site.com/ac_landing.php;";

    exec($command, $output) or die('fail');

    foreach ($output as $num => $line) {

        echo $num + 1 . ": " . $line . "\n";
    }

?></pre> 
```

如果我删除`\`每行末尾的

```
1: wget: missing URL
2: Usage: wget [OPTION]... [URL]...
3: 
4: Try `wget --help' for more options.
5: wget: missing URL
6: Usage: wget [OPTION]... [URL]...
7: 
8: Try `wget --help' for more options. 
```

我尝试将所有命令移到一行，但它又死了。我究竟做错了什么？如何检索此脚本中的错误？为结果添加第三个参数`exec`返回空。

我用这个作为参考[https://stackoverflow.com/a/1432161/763468](https://stackoverflow.com/a/1432161/763468)

这些命令在 SSH 控制台中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:19:37.437

首先，我认为您不需要文件名后的分号

```
-p http://site.com/ac_landing.php; 
```

到

```
-p http://site.com/ac_landing.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:21:40.040

您是否每次`exec`调用都尝试了一个命令？

```
exec("wget --save-cookies cookies.txt --post-data '***' --keep-session-cookies http://site.com/ac_login.php");
exec("wget --load-cookies cookies.txt --keep-session-cookies -p http://site.com/ac_landing.php"); 
```

# javascript - 如何使用 '>' 在 Node.js 中重定向输出？

> ID：10001493
> 
> 赞同：5
> 
> 时间：2012-04-03T21:15:01.543
> 
> 标签：javascript, linux, node.js

例如假设我希望复制简单的命令

```
echo testing > temp.txt 
```

这是我尝试过的

```
var util  = require('util'),
    spawn = require('child_process').spawn;

var cat = spawn('echo', ['> temp.txt']);
cat.stdin.write("testing");
cat.stdin.end(); 
```

可惜没有成功

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:43:13.677

您不能将重定向字符 (>) 作为参数传递给 spawn，因为它不是命令的有效参数。您可以使用`exec`而不是 spawn，它会执行您在单独的 shell 中提供的任何命令字符串，或者采用以下方法：

```
var cat = spawn('echo', ['testing']);

cat.stdout.on('data', function(data) {
    fs.writeFile('temp.txt', data, function (err) {
        if (err) throw err;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:22:57.353

`echo`似乎没有阻止标准输入：

```
~$ echo "hello" | echo
~$ 
```

^ 那里没有输出...

所以你可以尝试的是：

```
var cat = spawn('tee', ['temp.txt']);
cat.stdin.write("testing");
cat.stdin.end(); 
```

我不知道这对你是否有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:19:28.230

您可以通过管道节点控制台输出 la “node foo.js > output.txt”，也可以使用 fs 包进行文件写入

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-02T15:48:37.700

### 使用`exec`.

```
const { exec } = require( "child_process" );

exec( "echo > temp.txt" ); 
```

不确定 和 之间的优缺点`exec`，`spawn`但它确实允许您轻松运行完整命令并将其写入或附加到文件中。

# objective-c - 不同的导入方式

> ID：10001497
> 
> 赞同：1
> 
> 时间：2012-04-03T21:15:14.613
> 
> 标签：objective-c

有什么区别：

```
#import <Twitter/Twitter.h> 
```

和：

```
#import "Twitter/Twitter.h" 
```

另外，什么是：

```
@class SomeClass 
```

我很困惑。我应该使用哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:18:40.767

您通常使用 <> 来表示标题在您的项目之外，而不是您自己的文件之一。如果它是您的文件，则使用 "" 代替。这主要是为了让自己和其他人更清楚一点。

在您的情况下，使用 <> 是更好的方法。

“class”关键字用于前向声明。在 c++ 中，它加快了编译速度，我通常使用它而不是递归依赖。例如，如果您有包含 Bh 的标头 Ah 并且 Bh 需要包含 Ah 相反，我转发在 B 中声明类 A 或任何看起来最合适的东西。

这个问题也可以解释一下，因为我只在 C++ 中使用了前向声明。

[@class 与 #import](https://stackoverflow.com/questions/322597/class-vs-import)

# .htaccess - .htaccess 带有用于用户友好 url 的变量

> ID：10001498
> 
> 赞同：1
> 
> 时间：2012-04-03T21:15:19.093
> 
> 标签：.htaccess

我得到了这两个网址：

/portfolio/stamped_concrete

/p_details.php?id_cat=23&?id=91

我想让第二个 url 重写为：/portfolio/stamped_concrete/23/91

stamped_concrete 是一个动态网址，这就是为什么我不知道如何解决这个问题。如果重要的话，这两个文件（portfolio.php 和 p_details.php）也位于同一目录中。

我将如何做到这一点？

**编辑：**

stamped_concrete 也是我之前重写的变量字符串，它可以工作：

```
RewriteRule ^services/([a-z0-9_-]+)$    /services.php?url=$1    [NC,L,QSA] 
```

那么我将如何在 RewriteRule 中调用它？

这会在正确的轨道上吗？

```
RewriteCond %{QUERY_STRING} url=([a-z0-9_-]+)
RewriteCond %{QUERY_STRING} id_cat=([0-9]+)
RewriteCond %{QUERY_STRING} id=([0-9]+)
RewriteRule /p_details.php?.* /portfolio/$1/$2/$3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:52:35.343

试试这个：

```
RewriteCond %{QUERY_STRING} id_cat=([0-9]+)
RewriteCond %{QUERY_STRING} id=([0-9]+)
RewriteRule /p_details.php?.* /portfolio/stamped_concrete/$1/$2 
```

可能需要稍微调整一下——不确定 RewriteRule 部分是否正确（抱歉）。

但是，重要的部分是 QUERY_STRING，请参阅 apache 文档：[http ://httpd.apache.org/docs/2.0/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)

此外，来自[http://wiki.apache.org/httpd/RewriteQueryString](http://wiki.apache.org/httpd/RewriteQueryString)

我总是混淆反向引用，所以试试看，它是美元符号或百分号（我真的以为是美元符号......）

（引用）

使查询字符串成为路径的一部分

[获取http://example.com/path?var=val](http://example.com/path?var=val)形式的 URL并将其转换为[http://example.com/path/var/val](http://example.com/path/var/val)。请注意，此特定示例仅适用于仅包含字母、数字和下划线字符的单个 var=val 对。

```
RewriteCond %{QUERY_STRING} ^(\w+)=(\w+)$
RewriteRule ^/path /path/%1/%2? 
```

（结束报价）

所以你可能只是说“RewriteRule ^/p_details.php /portfolio/%1/%2/%3”

# jquery - 如何将参数“烘焙”到 click() 调用 jquery 中？

> ID：10001499
> 
> 赞同：1
> 
> 时间：2012-04-03T21:15:26.707
> 
> 标签：jquery

我有一个收集 XML 的 ajax 调用，并基于该数据创建了许多 div，我在这些 div 上附加了 click() jquery 侦听器。单击时，我希望这些 div 调用一个函数并将参数传递给该函数。但是，当点击被调用时，参数的值已经改变。这是我为演示问题而[构建的 jsfiddle的示例：](http://jsfiddle.net/snTEf/1/)

```
 $(document).ready(function() {

    function x() {

      $.ajax({
        type: "POST",
        url: "/echo/xml/",
        dataType: "xml",
        data: {
            xml: "<the>xml</the>"
        },
        success: function(xml) { 
          console.log('success');                

          $('#test').show(); 

          var text = "CORRECT";      

          $('#test').click(function() {

            insertText(text);
            console.log(text);
          });

          text = "WRONG";

        }        
      });
    }

    x();

  });

  function insertText(t) {

      $('#test').html(t);
  } 
```

我希望文本显示为正确，而不是错误。

我知道这是一个有点复杂的例子，但我正试图在范围和正在发生的事情方面尽可能多地模拟我的实际代码。当`click()`基于点击调用函数时， 的值`text`已经改变。有没有办法在我创建它时将它的值“烘焙”`text`到调用中？`click()`我将通过循环创建其中的一些，`for`因为它通过 XML 运行，并且不想将所有这些数据挂到变量中以供以后使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:28:05.483

Like this -- you bind it to a local variable in a closure form.

```
(function(text){
     $('#test').click(function() {
            insertText(text);
            console.log(text);
      });
})(text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:29:02.097

`click`直到调用分配后才调用该`text = "WRONG"`函数，因此该函数当然使用`text`. 如您所说，如果您想`text`在定义时将 的值烘焙到您的函数中，则可以使用立即调用的匿名函数，如下所示：

```
(function(bakedText) {
  $('#test').click( function() {
    insertText(bakedText);
    console.log(bakedText);
  }
})(text); 
```

在此处查看演示：http: [//jsfiddle.net/H4DpV/](http://jsfiddle.net/H4DpV/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T21:23:23.900

最简单的方法可能是创建一个附加处理程序的函数。这样，函数内的参数不变。

```
 var text = "CORRECT";      

      bindClick("test", text);

      // ...

      function bindClick(id, text){

          $('#' + id).click(function() {
            insertText(text);
            console.log(text);
          });
      } 
```

[http://jsfiddle.net/snTEf/2/](http://jsfiddle.net/snTEf/2/)

# android - Android - 类似旋转木马的小部件，显示左右元素的一部分

> ID：10001503
> 
> 赞同：14
> 
> 时间：2012-04-03T21:15:37.577
> 
> 标签：android, android-layout, android-widget

所以我搜索了高低，但找不到我的问题的答案。我基本上需要的是 Android 的 ViewFlipper 或 ViewPager 提供的行为，但我想显示左右视图的一部分，以指示用户有要滚动的元素，而不是让选定的视图占据整个屏幕。

我还想为左侧视图和侧视图添加一些效果，例如调暗和缩放，然后再缩小一点。是否可以使用股票 ViewFlipper 或 ViewPager 来实现，或者我是否必须推出自己的视图组，à la 封面流（[http://www.inter-fuser.com/2010/01/android-coverflow-widget .html](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html) )?

（PS 我不想使用 Gallery 小部件，那个组件很烂）。

这是我们在选择视图后需要显示的内容（仍然显示左视图和右视图）：

![视图切换器](../Images/297d4d2ac6e089cc73dcfa83e2bb3a38.png)

向左或向右甩动会将主视图移出，使其变暗并稍微减小一点，并与下一个或上一个视图相反。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T04:25:25.690

我想向任何可能想要相同功能的人提供更新。到目前为止，在实现此功能方面已经取得了很大进展，现在视图正在完全按照我们的需要工作。

ViewPager 有一个名为 setPageMargin() 的方法。此方法可以接收一个负值，这将使片段/视图相互重叠。为了达到所需的布局，我们首先按屏幕百分比动态计算左右边距。这也可以静态完成，但由于我们将针​​对一系列不同的屏幕尺寸，这似乎是最好的方法。

稍后我们将 ViewPager 的页边距设置为侧边距大小的 2 倍。这使视图重新组合在一起。但是，此时 ViewPager 将显示多个视图。

您剩下要做的就是对左右视图（Android 3.0+）应用变换（缩放）或在它们周围添加更多边距以将它们缩小到正确的大小（3.0 之前）。

OnPageChangeListener.onPageScrolled() 可用于跟踪 ViewPager 的滚动。可以实现平滑的转换。代码如下所示：

```
private OnPageChangeListener onPageChangeListener = new OnPageChangeListener() {

    @Override
    public void onPageSelected(int position) {
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

        // positionOffset varies from 0 to 1 and indicates how far the view is
        // from the center of the ViewPager. When a view is selected (centered), this
        // value is 0.

        // Fades the text in an out while the ViewPager scrolls from one view to another.
        // On our final design the text views are fixed to the center of the screen and
        // do not scroll along with the views.
        if (positionOffset < 0.5) {
            setTextViewAlpha(1 - positionOffset * 2);
        } else {
            setTextViewAlpha((positionOffset - 0.5f) * 2);
        }

        // It's surprisingly complicated to get the current object being displayed by
        // a ViewPager (there's no getCurrentObject method). ScaleableFragment is just
        // a custom class to allow an adapter to cache it internally and also correctly
        // manage a fragment's lifecycle and restore from a saved state.
        ScaleableFragment sampleFragment = (ScaleableFragment) ((ShowHeroShotImageFragmentPagerAdapter) pager
                .getAdapter()).getItem(position);

        // Calculates by how much the current view will be scaled down. The RATIO_SCALE
        // is 0.3 in our case, which makes the side views 70% of the size of the
        // center view. When centered, the scale will be 1\. When
        // fully scrolled, the scale will be 0.7.
        float scale = 1 - (positionOffset * RATIO_SCALE);

        // Just a shortcut to findViewById(R.id.image).setScale(scale);
        sampleFragment.scaleImage(scale);

        // Now, if not in the last element, scale the next one up (in opposite direction).
        if (position + 1 < pager.getAdapter().getCount()) {
            sampleFragment = (ScaleableFragment) ((ShowHeroShotImageFragmentPagerAdapter) pager.getAdapter())
                    .getItem(position + 1);
            scale = positionOffset * RATIO_SCALE + (1 - RATIO_SCALE);
            sampleFragment.scaleImage(scale);
        }
    }

    // Once scrolling is done. Make sure the views are in the right scale (1 for center,
    // 0.7 for sides). Required as the onPageScrolled() method does not guarantee it
    // will interpolate to 1.0 precisely.
    @Override
    public void onPageScrollStateChanged(int state) {
        if (state == ViewPager.SCROLL_STATE_IDLE) {
            setTextViewAlpha(1);
            ScaleableFragment sampleFragment = (ScaleableFragment) ((ShowHeroShotImageFragmentPagerAdapter) pager
                    .getAdapter()).getItem(pager.getCurrentItem());
            sampleFragment.scaleImage(1);
            sampleFragment.enableClicks();

            if (pager.getCurrentItem() > 0) {
                sampleFragment = (ScaleableFragment) ((ShowHeroShotImageFragmentPagerAdapter) pager.getAdapter())
                        .getItem(pager.getCurrentItem() - 1);
                sampleFragment.scaleImage(1 - RATIO_SCALE);
                sampleFragment.disableClicks();
            }

            if (pager.getCurrentItem() + 1 < pager.getAdapter().getCount()) {
                sampleFragment = (ScaleableFragment) ((ShowHeroShotImageFragmentPagerAdapter) pager.getAdapter())
                        .getItem(pager.getCurrentItem() + 1);
                sampleFragment.scaleImage(1 - RATIO_SCALE);
                sampleFragment.disableClicks();
            }
        }
    }
}; 
```

就是这个。我没有发布完整的解决方案，但我希望这足以让其他人开始。

PS On 3.0+ 启用硬件加速。没有它，三星 Galaxy Tab 10.1 上的滚动看起来很不稳定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T13:58:58.433

我用它玩了一些，我的解决方案非常简单。我把它贴在这里以防有人感兴趣。

首先，每个片段的布局应该允许两侧有一些间隙。我发现这样做的最简单方法是使用权重：

```
<LinearLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="0.1" />

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="0.8"
    android:orientation="vertical" >

    <!-- fragment contents go here -->

</LinearLayout>

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="0.1" /> 
```

这将在两边留下一个不错的 10% 的利润。确保不要在这些上设置背景，因为它会覆盖相邻的片段。现在对于寻呼机本身：您需要使用负边距，正如 AngraX 解释的那样，但也要确保预加载后续片段，因为它们在定期出现之前是可见的。我得到了很好的结果：

```
 mPager = (ViewPager) findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);
    mPager.setPageMargin(getResources().getDisplayMetrics().widthPixels / -7);
    mPager.setOffscreenPageLimit(2); 
```

-7 值使下一个片段的边缘可见，请使用您的特定构图。我还建议对每个片段进行构图。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T21:21:13.790

好吧，这是一个可能的答案，可能与您正在寻找的内容接近，但并不完全是您正在寻找的内容：有一个名为[ViewFlow](https://github.com/pakerfeldt/android-viewflow)的项目，我认为它能够通过指标通知用户有更多视图屏幕上。它还提供了在当前视图的左侧和右侧缓冲视图的能力，因此您可以通过基本上缩小它所看到的可用屏幕尺寸来查看代码以渲染它们的一小部分。

编辑：愚蠢的我；我应该在回答之前阅读最后一个问题。:) 不幸的是，我认为您不能使用 ViewFlipper 或 Viewpager 来做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T20:05:14.827

只需使用 ViewPager 并使用片段的宽度和边距。我已经这样做了，而且效果很好。

# javascript - 使用 JavaScript 从下拉列表中获取所选日期

> ID：10001506
> 
> 赞同：0
> 
> 时间：2012-04-03T21:15:45.037
> 
> 标签：javascript, date, drop-down-menu

我拥有的是一个 JAVA 脚本，它显示 3 个下拉窗口，分别代表日、月和年。默认选择今天的日期。该脚本来自：[http ://www.javascriptkit.com/script/script2/curdateform2.shtml](http://www.javascriptkit.com/script/script2/curdateform2.shtml)

我要补充的内容如下：

1) 假设默认或选择的日期是 2012-02-15。我希望出现一条文字：“选定的日期是：2012-02-15”

2）我也想计算选定的日期+30天，并以类似的方式显示。到目前为止，我一直在编写 php、mysql 代码，结果非常好。但我不得不说我对 JavaScript 的了解非常有限。谢谢！

你好克里斯！

我试过你的第二个建议

```
var day = document.getElementById('daydropdown').value;
var month = document.getElementById('monthdropdown').value;
var year = document.getElementById('yeardropdown').value;
var date_object = new Date();
var ts = Date.parse(year+'-'+month+'-'+day);
document.getElementById('d1').innerHTML = 'The selected date is: '+ date_object.setTime(ts); 
```

我还在正文中添加了：

```
<div style="font-weight:bold" id="d1" ></div> 
```

但我得到的只是......选定的日期是：NaN

在原始代码中，该功能是使用 window.onload 激活的。据我所知，当使用下拉列表并更改日期时，代码没有反应......现在我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:24:52.040

如果您没有更改示例中的元素 ID：

```
var day = document.getElementById('daydropdown').value;
var month = document.getElementById('monthdropdown').value;
var year = document.getElementById('yeardropdown').value;

// if you simply want to display it:
var text = 'The selected date is: '+year+'-'+month+'-'+day;
alert(text);

// if you want to work with it, make a Date object
var date_object = new Date();
var ts = Date.parse(year+'-'+month+'-'+day);

// javascript dates are in miliseconds, 1 day = 86400 seconds, so...
var thirty_days = 86400 * 1000 * 30;
date_object.setTime(ts + thirty_days); 
```

请参阅文档：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)

# java - 参与正则表达式

> ID：10001510
> 
> 赞同：1
> 
> 时间：2012-04-03T21:15:57.360
> 
> 标签：java, regex

我需要得到一切

```
onmouseout="this.style.backgroundColor='#fff'"> 
```

和以下`<`

在这种情况下：

```
onmouseout="this.style.backgroundColor='#fff'">example< 
```

我想得到这个词的例子。这是一个更复杂的示例，说明它也应该在哪里工作：

```
onmouseout="this.style.backgroundColor='#fff'">going to drink?<br></span><span title="Juist!" onmouseover="this.style.backgroundColor='#ebeff9'" onmouseout="this.style.backgroundColor='#fff'">Exactly!</span></span></div></div> 
```

所以在这里我需要他们中的 2 个回来（而不是加入）。

有人可以帮忙吗？我很讨厌正则表达式。

有人将我的标签编辑为 javascript。我需要一个在java中使用的解决方案，我只是得到一个纯文本文件。所以 javascript 或 html 解决方案并不是很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:19:43.743

正则表达式与 html？好吧，如果你只需要解析几行，那就好了。但总的来说，最好使用 html 解析器（因为 HTML 不是常规语言）。

这是纯金：[https ://stackoverflow.com/a/1732454/434171](https://stackoverflow.com/a/1732454/434171)

# html - 列表中的 Zen 编码 img src

> ID：10001511
> 
> 赞同：5
> 
> 时间：2012-04-03T21:15:59.300
> 
> 标签：html, emmet

`img`我正在尝试使用 zen 编码从文件名列表中创建大量标签，以`src`用我的文件名列表填充属性。

这是我拥有的以及我想用它做什么：

```
filenameA.jpg
someotherone.jpg
anotherimage.jpg
sample.jpg 
```

Zen编码结果：

```
<img src="images/filenameA.jpg" />
<img src="images/someotherone.jpg" />
<img src="images/anotherimage.jpg" />
<img src="images/sample.jpg" /> 
```

我试过用缩写来包装列表：`img[src=]` 但我不知道正确的方法。

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T07:37:14.630

试试这个缩写（适用于 Zen Coding v0.7）：

`img[src=images/$#]*`

# git - Git 似乎不想将本地引用保留给 origin/master

> ID：10001514
> 
> 赞同：7
> 
> 时间：2012-04-03T21:16:07.850
> 
> 标签：git

首先：为问题标题道歉，我实际上并不知道问题是什么，所以我不知道如何询问它。

我想区分我的主人和上游主人（应该是原点/主人，基于我的遥控器的设置方式）。

但是：origin是在我在本地工作了一段时间*后才*放在那里的，所以它只是名义上的“起源”。那就是：我有一个本地仓库，把它放到一个 gitolite 设置中，然后告诉我本地的 git 把它叫做 origin。

这些是症状：

```
$ git diff master orgin/master
fatal: ambiguous argument 'orgin/master': unknown revision or path not in the working tree.

$ git diff master origin/master --
fatal: bad revision 'origin/master' 
```

嗯。

```
$ git remote -v
origin  git@example.com:example (fetch)
origin  git@example.com:example (push) 
```

好吧，看起来不错。

```
$ git branch -a
... # nothing from origin 
```

嗯。

```
$ git fetch -a origin
From example.com:example
* branch            HEAD       -> FETCH_HEAD 
```

我不知道这是否正确。它看起来很有成效，但`git diff master origin/master`仍然失败，并且：

```
$ git branch --track omaster origin/master
fatal: Not a valid object name: 'origin/master'. 
```

世界卫生大会？

```
$ ls .git/refs/remotes
gitps  ps 
```

这看起来不对：那些是几个月不存在的旧遥控器。他们也是空的。并且`.git/remotes`根本不存在，尽管我不确定它应该存在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-03T21:22:14.050

你试过`git remote update`吗？这将更新所有遥控器，根据需要创建远程跟踪分支。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-03T21:34:04.133

您可能需要告诉 git 从源站获取哪些分支。在`.git/config`此 repo 的文件中，在该`[remote "origin"]`部分下，应该有一行像`fetch = ...`. 这告诉 git 要获取什么以及将其放在本地的什么位置。这是一个非常标准的例子：

```
[remote "origin"]
        fetch = +refs/heads/*:refs/remotes/origin/*
        url = ssh://... 
```

如果您没有看到该`fetch = ...`行，您可以安全地添加它以匹配示例，这*是*由`git clone`.

有关正在发生的事情的详细描述，请参阅[git pro book 。](http://git-scm.com/book/en/v2/Git-Internals-The-Refspec)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-19T14:06:13.230

我刚才也有类似的问题。我发现我的本地 .git 目录实际上是一个文件

```
$ file .git
     .git: ASCII text 
```

我删除了文件，并初始化了 git 存储库

```
git init && git remote add origin "gitrepo" 
```

不太清楚为什么会这样。希望这可以帮助某人..

# mysql - MySQL 错误：“WHERE post LIKE”不起作用

> ID：10001515
> 
> 赞同：1
> 
> 时间：2012-04-03T21:16:10.143
> 
> 标签：mysql, replace

我不是 MySQL 专家，我对此有疑问...

所以，我有一个论坛板数据库。我需要替换其中一个表中有一个过时的代码。我正在尝试使用这个：

```
Update ibf_posts
Set    post = replace(post, '<div width="95%" style="margin:8px 26px 4px 26px"><a href="javascript:void(0);" onclick="javascript:spoil(this);"><div class=\'spoilertop\'><b>SPOILER</b> [Show/Hide]</div></a><div style="display: none;" class="spoilermain">', '<div width="95%" style="margin:8px 26px 4px 26px"><a class=\'spoilertop\' style=\'display:block;\'><b>SPOILER</b> [Show/Hide]</a><div class="spoilermain">');
WHERE  post LIKE '%<div width="95%" style="margin:8px 26px 4px 26px"><a href="javascript:void(0);" onclick="javascript:spoil(this);"><div class=\'spoilertop\'><b>SPOILER</b> [Show/Hide]</div></a><div style="display: none;" class="spoilermain">%'; 
```

但它不起作用。它说：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE  post LIKE '%<div width="95%" style="margin:8px 26px 4px 26px"><a href="ja' at line 1 
```

这很奇怪，因为我在我的本地主机上尝试过它工作正常。但是当我在我的实时服务器中尝试时，它不起作用。我的 MySQL 版本（在实时服务器上）是 MySQL 4.1.22。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:19:23.817

您应该删除第二行末尾的分号，因为它表示查询正在结束，这是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:20:19.227

第二行`;`末尾有一个。当你删除它然后[查询工作](http://sqlfiddle.com/#!2/68939/3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T05:47:49.523

分号 ( `;`) 用于终止查询，这意味着我们在每个查询的末尾只使用一个分号，而不是在中间。

我很震惊您的代码在本地主机上运行。您是否检查过查询是否在 localhost 上完全按照您的要求工作，或者它正在做其他事情。

# css - CSS：Internet Explorer 中的简单渐变 <= 8

> ID：10001516
> 
> 赞同：5
> 
> 时间：2012-04-03T21:16:11.000
> 
> 标签：css, internet-explorer, gradient

相信大家都知道，Internet Explorer 可以处理简单的渐变。以下是 Twitter Bootstrap 的一个片段，例如：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#e6e6e6', GradientType=0); 
```

但是，我看到有些人使用两种 CSS 规则（一种用于 IE < 8，另一种用于 IE 8），如下所示：

```
filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#7fbf4d', endColorstr='#63a62f'); /* For Internet Explorer 5.5 - 7 */
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#7fbf4d', endColorstr='#63a62f')"; /* For Internet Explorer 8 */ 
```

我的问题是，第二条规则真的有必要吗？Twitter Bootstrap 非常彻底，但它不使用任何“-ms-filter”规则。根据[this page](http://msdn.microsoft.com/en-us/library/ms533754%28v=vs.85%29.aspx)，**-ms-filter**属性是CSS的扩展，可以用作IE8标准模式下**过滤器的同义词。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:52:27.583

我的建议：

使用 CSS3Pie -- [http://css3pie.com/](http://css3pie.com/)

这是一个适用于 IE6、IE7 和 IE8 的 JavaScript 库，它为支持多个 CSS3 特性（包括渐变）提供了补丁。

是的，如果你愿意，你可以使用可怕的 IE 特定`filter`样式，但是 CSS3Pie 允许你对这些特性使用标准的 CSS 样式。容易得多。

**要实际回答您的直接问题：**

是的，`-ms-filter`样式通常是必需的。IE8 将始终使用它而不是`filter`，它主要用于 IE6 和 IE7。在某些情况下`filter`会在 IE8 中工作，但不是全部，因此最好使用`-ms-filter`以确保 IE8 兼容性。

[已编辑] 他们为什么要更改它？因为当他们发布 IE8 时，微软强调要“符合标准”。

为了使浏览器符合标准，它应该为它支持的任何不是最终 W3C 标准的 CSS 属性使用供应商前缀。因此，通过添加`-ms-`前缀，微软试图（迟来的）消除他们对全局 CSS 命名空间的污染。

另外，加了引号，因为`filter`不带引号的旧语法是无效的CSS（主要是冒号后面的`progid`），并导致一些浏览器出现问题。（前段时间，我在 Firefox 3.6 中遇到过一个实例，它会按照`filter`旋转元素的样式删除所有样式 - 需要很长时间才能弄清楚发生了什么）。

微软保留与原始语法的向后兼容性这一事实`filter`在很大程度上是一个实用主义问题。MS 无法使用旧语法破坏所有站点。但微软强烈暗示开发人员应该同时使用这两种方式，因为他们会`filter`在后续版本的 IE 中放弃对旧样式的支持。事实证明，他们一举放弃了对这两种语法的支持，但在 IE8 发布时给出的含义足以使其成为推荐做法，即在样式表中同时提供这两种语法`filter`。`-ms-filer`

在 IE8 发布时，XHTML 是本月的新风格，编写完美验证的代码是许多开发人员的首选。这可能是更改语法以包含引号的强大驱动力。由于杂散的冒号，不可能编写使用旧`filter`样式验证的 CSS。相反，使用新`-ms-filter`样式允许人们编写有效的 CSS。作为好主意，这个并没有真正奏效，因为当然人们无论如何都必须继续使用旧语法，但意图是好的。

值得指出的是，其他专有样式也得到了相同的处理。例如，您可以`-ms-behavior`在 IE8 中使用而不是旧`behavior`样式。没有人使用它。为什么？我真的不知道。

另一个值得了解的事实是 W3C 正在标准化一个[名为`filter`](https://dvcs.w3.org/hg/FXTF/raw-file/tip/filters/index.html). 它将与 Microsoft`filter`风格完全不同，工作方式也完全不同。如果/当它被标准化并且浏览器开始支持它时，这两种语法之间将会有明显的冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:41:07.283

好像你回答了你自己的问题。是的，他们是需要的。微软试图更符合标准意味着某些版本的 IE 对过滤器属性有自己的略有不同的语法规则。

在 IE7`filter:`后面跟着`progid:DXIma...`etc 就可以了。但是对于 IE8+，它可以在兼容模式下使用 IE7 后备，以及更合适`-ms-`的过滤器前缀属性，表示供应商特定的 css 属性，以及它在 qoutes 中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:45:52.160

把它留在里面会有什么害处？

如果浏览器不理解 CSS 行，它将忽略它。

这两行 CSS 几乎相同。我会大胆猜测微软决定从 IE8 开始使用其他浏览器一直用于 yonks 的 - （连字符）前缀来更改专有 CSS 的语法。

从技术上讲，无论哪种方式，CSS 都不符合 W3C，因此另一行专有 CSS 不会造成任何伤害。

在最好的时候尝试理解 IE 是不值得的！

# c++ - 试图在一个类中定义一个静态常量变量

> ID：10001518
> 
> 赞同：3
> 
> 时间：2012-04-03T21:16:12.133
> 
> 标签：c++, class, static

我在私有下的类中将变量定义`adc_cmd[9]`为 a 。由于它是一个常量，我想我会在它自己的类中定义它，但这显然不起作用：`static const unsigned char``ADC`

```
#pragma once

class ADC{
private:
    static const unsigned char adc_cmd[9] = { 0x87, 0xC7, 0x97, 0xD7, 0xA7, 0xE7, 0xB7, 0xF7, 0x00 };
//...
}; 
```

**错误：**

```
error: a brace-enclosed initializer is not allowed here before '{' token
error: invalid in-class initialization of static data member of non-integral type 'const unsigned char [9]' 
```

...

所以我尝试用: 将这条线带出类`static const unsigned char ADC::adc_cmd[9] = { 0x87, 0xC7, 0x97, 0xD7, 0xA7, 0xE7, 0xB7, 0xF7, 0x00 };`，但这产生了这个错误：

```
error: 'static' may not be used when defining (as opposed to declaring) a static data member
error: 'const unsigned char ADC::adc_cmd [9]' is not a static member of 'class ADC' 
```

我显然没有正确地声明这一点。声明这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:18:42.133

在 C++03 中，静态数据成员定义*超出*了类定义。

标题：

```
#pragma once

class ADC {
private:
    static unsigned char const adc_cmd[9];
}; 
```

在*一个*.cpp 文件中：

```
#include "headername"

unsigned char const ADC::adc_cmd[9] = { 0x87, 0xC7, 0x97, 0xD7, 0xA7, 0xE7, 0xB7, 0xF7, 0x00 }; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-03T21:20:11.350

你在类体内*声明它：*

```
class ADC{
private:
    static const unsigned char adc_cmd[9];
//...
}; 
```

并在外部*定义*（并初始化）它（仅一次，对于任何外部链接定义）：

```
const unsigned char ADC::adc_cmd[9] = { 0x87, 0xC7, 0x97, 0xD7, 0xA7, 0xE7, 0xB7, 0xF7, 0x00 }; 
```

没有写入`static`，如错误消息所指定。

（不要问我为什么这里`static`被禁止，我总是发现各种“重复限定词”规则完全不合逻辑）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-03T21:20:11.303

将两者结合起来：

```
class ADC{
private:
    static const unsigned char adc_cmd[9];
    //...
};

//.cpp
const unsigned char ADC::adc_cmd[9] = { 0x87, 0xC7, 0x97, 0xD7, 0xA7, 0xE7, 0xB7, 0xF7, 0x00 }; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-03T22:11:14.020

只是为了帮助 Matteo 的回答：

我们必须指出，`static`限定符在 C++ 中确实有点令人困惑。据我所知，根据使用的位置，它会做三件不同的事情：

1.  在类成员属性前面：使该属性对于该类的所有实例都相同（与 Java 相同）。
2.  全局变量前：将变量的作用域缩小到仅当前源文件（同C）。
3.  在方法/函数中的局部变量前面：使该变量对于对该方法/函数的所有调用都相同（与 C 相同，可能对单例设计模式有用）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-17T00:56:45.667

从**C++11**开始，在这种情况下（当您有静态 const LiteralType 时）您可以做的是 use [`constexpr`](https://en.cppreference.com/w/cpp/language/constexpr)，使该值成为有保证的编译时常量。

那将是：

```
#pragma once

class ADC{
private:
    static constexpr unsigned char adc_cmd[9] = { 0x87, 0xC7, 0x97, 0xD7, 0xA7, 0xE7, 0xB7, 0xF7, 0x00 };
//...
}; 
```

# neural-network - 这个 OpenCL 内核导致错误 CL_INVALID_COMMAND_QUEUE 怎么样？

> ID：10001521
> 
> 赞同：2
> 
> 时间：2012-04-03T21:16:51.790
> 
> 标签：neural-network, opencl

我在实现前馈多层感知器时遇到问题，使用 JOCL 在 Java 中的 OpenCL 中进行反向支持学习。这是计算阶段的内核代码：

```
 #pragma OPENCL EXTENSION cl_khr_fp64 : enable
    __kernel void Neuron(__global const double *inputPatterns,
                           __global double *weights,
                           __global const int *numInputs,
                           __global const int *activation,
                           __global const double *bias,
                           __global const int *usingBias,
                           __global double *values,
                           __global const int *maxNumFloats,
                           __global const int *patternIndex,
                           __global const int *inputPatternSize,
                           __global const int *indexOffset,
                           __global const int *isInputNeuron,
                           __global const int *inputs)
    {
       int gid = get_global_id(0);
       double sum = 0.0;
       for(int i = 0; i < numInputs[gid+indexOffset[0]]; i++)
       {
           sum += values[inputs[(gid+indexOffset[0]) * maxNumFloats[0] + i]] *
                   weights[(gid+indexOffset[0]) * maxNumFloats[0] + i];
       }
       if(usingBias[gid+indexOffset[0]])
           sum += bias[gid+indexOffset[0]];
       if(isInputNeuron[gid+indexOffset[0]])
           sum += inputPatterns[gid+indexOffset[0]+(patternIndex[0] * inputPatternSize[0])];
       if(activation[gid+indexOffset[0]] == 1)
           sum = 1.0 / (1.0 + exp(-sum));
       values[gid + indexOffset[0]] = sum;
    } 
```

基本上，我为网络中的每一层运行这个内核。对于第一层，没有“输入”，因此不会执行循环。然而，由于第一层是输入节点层，它确实从输入模式中添加了相关值。这执行得很好，此时我可以读回这些值。

然而，当我尝试运行第二层（它确实有输入，第一层的每个节点）时，对 clFinish() 的调用会返回错误 CL_INVALID_COMMAND_QUEUE。有时，此错误伴随着驱动程序崩溃和恢复。我已经阅读过（例如[这里](http://www.sevenforums.com/crashes-debugging/51028-help-me-configure-registry-correctly-solve-tdr-issue.html)）这可能是 TDR 超时的问题，并试图提高限制，但不确定这是否有任何区别。

我正在通过对 clSetKernelArg() 的调用来检查任何愚蠢的东西，但是任何人都可以在代码中发现任何明显的错误吗？由于包含 for 循环，似乎在第二层引入了错误......如果需要，我可以澄清任何参数，但对于初始帖子来说似乎有点矫枉过正。

此外，我完全知道这段代码可能会冒犯各地有能力的编码人员，但请随意火焰：P

编辑：主机代码：

```
 //Calc
    for(int k = 0; k < GPUTickList.length; k++)
    {
        clFlush(clCommandQueue);
        clFinish(clCommandQueue);
        //If input nodes
        if(k == 0)
            //Set index offset to 0
            GPUMapIndexOffset.asIntBuffer().put(0, 0);
        else
            //Update index offset
            GPUMapIndexOffset.asIntBuffer().put(0,
                GPUMapIndexOffset.asIntBuffer().get(0) + GPUTickList[k-1]);
        //Write index offset to GPU buffer
        ret = clEnqueueWriteBuffer(clCommandQueue, memObjects[12], CL_TRUE, 0,
                Sizeof.cl_int, Pointer.to(GPUMapIndexOffset.position(0)), 0, null, null);             
        //Set work size (width of layer)
        global_work_size[0] = GPUTickList[k];
        ret = clEnqueueNDRangeKernel(clCommandQueue, kernel_iterate, 1,
            global_work_offset, global_work_size, local_work_size,
            0, null, null);
    } 
```

编辑 2：我已将完整代码上传到[pastebin](http://pastebin.com/xGNBn4Gp)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:41:31.083

解决了。通过使用 [0] 索引的所有内容作为直接内核参数而不是缓冲区来修复错误。显然，硬件不喜欢大量的东西一次访问缓冲区的一个特定元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T02:55:35.747

我不确定您在循环上方有什么..您是否使用此循环以外的队列？以下是您可能想尝试的东西。

```
//flush + finish if you need to before the loop, otherwise remove these lines
clFlush(clCommandQueue);
clFinish(clCommandQueue);

cl_event latestEvent;
//Calc
for(int k = 0; k < GPUTickList.length; k++)
{
    //If input nodes
    if(k == 0)
        //Set index offset to 0
        GPUMapIndexOffset.asIntBuffer().put(0, 0);
    else
        //Update index offset
        GPUMapIndexOffset.asIntBuffer().put(0,
            GPUMapIndexOffset.asIntBuffer().get(0) + GPUTickList[k-1]);
    //Write index offset to GPU buffer
    ret = clEnqueueWriteBuffer(clCommandQueue, memObjects[12], CL_TRUE, 0,
            Sizeof.cl_int, Pointer.to(GPUMapIndexOffset.position(0)), 0, null, null);             
    //Set work size (width of layer)
    global_work_size[0] = GPUTickList[k];
    ret = clEnqueueNDRangeKernel(clCommandQueue, kernel_iterate, 1,
        global_work_offset, global_work_size, local_work_size,
        0, null, &latestEvent);
    clWaitForEvents(1, &latestEvent);
} 
```

# php - Wordpress - 从页面模板中列出特定页面和子页面或制作新菜单？

> ID：10001522
> 
> 赞同：0
> 
> 时间：2012-04-03T21:16:52.780
> 
> 标签：php, wordpress

嗨，我已经尝试了几个小时在我的页面模板上显示特定页面及其子页面的四列网格。我的网站结构是：

```
 Main Page
    Service Page
    -Service Type 1
    --Service Type 1, Item 1
    --Service Type 1, Item 2
    -Service Type 2
    --Service Type 2, Item 1
    --Service Type 2, Item 2 
```

我在尝试列出我的“服务类型”和页面模板中的子页面时遇到了困难。

我试图制作一组页面ID（来自“服务类型”的ID）并显示这些页面的标题。

然后我想搜索数组并查看其中的页面是否有子页面，如果有，则将子标题显示为链接（按照我的 css）。

这听起来并不难，但我似乎无法理解它。我一直在捣碎代码，但无法弄清楚。

我可以使用以下方法在基本列表中显示页面：

```
<?php wp_list_pages('include=453&title_li='); ?>
<?php wp_list_pages('child_of=453&sort_column=post_title&title_li=') ?>
<?php wp_list_pages('include=457&title_li='); ?>
<?php wp_list_pages('child_of=457&sort_column=post_title&title_li=') ?> 
```

但是想要一些更动态的东西，所以如果我添加更多服务类型，我不必手动输入所有代码，而是可以用新的 id 填充数组？

我希望页面的顶部网格具有以下内容：

```
 -Service Type 1            -Service Type 2            -Service Type 3
    --Service Type 1, Item 1   --Service Type 2, Item 1   --Service Type 3, Item 1
    --Service Type 1, Item 2   --Service Type 2, Item 2   --Service Type 3, Item 1 
```

我接近这个权利还是应该制作某种菜单？对此的任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:51:44.403

事实证明，创建一个新菜单来实现我想要的功能比列出页面和子页面更容易。

我使用这里的代码来制作第二个菜单：

[http://wordpress.org/support/topic/on-adding-second-menu-to-twenty-11?replies=4](http://wordpress.org/support/topic/on-adding-second-menu-to-twenty-eleven?replies=4)

我对出现在第二个菜单中的“主页”页面有问题，因此我使用此处找到的功能将其删除：

[http://wordpress.org/support/topic/remove-home-from-menu-1?replies=9](http://wordpress.org/support/topic/remove-home-from-menu-1?replies=9)

# c++ - 如何强制在派生类中调用基类构造函数？

> ID：10001524
> 
> 赞同：6
> 
> 时间：2012-04-03T21:16:58.080
> 
> 标签：c++

我相当确定基本的 c++ 问题。如果我有一个带有不带参数的构造函数的基类，并且只初始化一些受保护的成员，如果派生类与参数匹配（希望但不太可能的想法），派生类是否也会立即调用此基构造函数，如果不是，是有没有办法强制它从派生类中自动调用所述基构造函数，而不必在派生类中明确告诉它这样做？我问是因为我正在编写某种包装器，并且有一些受保护的成员我想最初初始化为特定值，然后我想根据我的需要派生和操作这个基类，但我不喜欢外部用户必须记住显式调用基本构造函数或在自己的构造函数中设置这些值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T21:20:23.447

是的，除非另有明确说明，否则始终调用默认的基本构造函数。

例如：

```
class A
{
public:
   A() { std::cout << "A"; }
};

class B : A
{
public:
   B() {}
};

int main()
{
   B b;
   return 0;
} 
```

将输出：

```
A 
```

通过“明确说明”，我的意思是您可以从派生类调用不同的构造函数：

```
class A
{
public:
   A() { std::cout << "A"; }
   A(int) { std::cout << "AAA"; }
};

class B : A
{
public:
   B() : A(1) {}  //call A(int)
};

int main()
{
   B b;
   return 0;
} 
```

将输出

```
AAA 
```

**重要**的是，如果您没有默认构造函数（您声明了非默认构造函数而不是默认构造函数）或默认构造函数不可见（标记为`private`），则需要在派生类中显式调用可用的构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:20:52.080

如果你的基类有一个“默认构造函数”（一个不带参数的构造函数；要么由你显式提供，要么由编译器隐式提供，因为你没有显式提供任何构造函数），那么每个派生类构造函数都会自动除非您指定它们调用不同的构造函数，否则调用它。

（如果您的基类*没有*“默认构造函数”，因为您提供了一个或多个带参数的构造函数，而没有不带参数的构造函数，那么派生类构造函数不这样做是编译错误指示它调用的基类构造函数。）

# c# - C# Ping 使整个程序崩溃

> ID：10001525
> 
> 赞同：0
> 
> 时间：2012-04-03T21:17:05.580
> 
> 标签：c#, winforms, ping

我正在构建一个 C# windows 窗体应用程序，该应用程序按用户可以指定的名称 ping 多台计算机。

我正在使用 System.Net.NetworkInformation.Ping 类和 SendAsync 方法，以及处理结果的方法。

当用户指定不存在的计算机名称时，就会出现我遇到的问题。但是，我在 Application.Run(new Form()) （整个表单的主要方法）处获得了 TargetInvocationException，而不是 Ping 向我的回调方法返回错误。我曾尝试使用 try/catch 来包围相关代码，但它们似乎从未捕捉到异常

以下是 ping 的相关代码：

```
Ping p = null;
try
{
    p = new Ping();
    p.PingCompleted += new PingCompletedEventHandler (updateUI);
    p.SendAsync(computername, 10, computername);
}
    catch (Exception)
{
    ((IDisposable)p).Dispose();
    MessageBox.Show("Ping Failed...");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T22:44:56.390

首先在 PingCompleted 事件处理程序中检查 e.Error 属性。当它不为空时尝试使用其他属性是有保证的。从 MSDN 中的 PingCompletedEventArgs.Error 属性文档：

> 如果在异步操作期间引发异常，该类会将异常分配给 Error 属性。客户端应用程序的事件处理程序委托应在访问派生自 AsyncCompletedEventArgs 的类中的任何属性之前检查 Error 属性；否则，该属性将引发**TargetInvocationException**，其 InnerException 属性包含对 Error 的引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-03T21:19:44.097

好吧，由于您的异常处理程序没有受到打击，因此它必须在发生错误的代码的另一部分中。

# ios - 在移动网络上启用支付会破坏我们在原生 iOS 中的应用

> ID：10001526
> 
> 赞同：3
> 
> 时间：2012-04-03T21:17:09.233
> 
> 标签：ios, mobile, facebook-credits

在应用程序设置中打开“在移动网络上启用支付”会阻止我们的应用程序出现在本机 Facebook 应用程序中！这应该发生吗？

我们在沙盒模式下构建应用程序，并用于`FB.UA.nativeApp()`确定我们是否处于原生状态。如果我们是原生的，我们会禁用所有 Facebook 积分按钮。

但是，现在我们的应用程序已经上线，当我们在开发人员设置中选中“在移动网络上启用支付”框时，应用程序会从原生 iOS 中消失和/或提供访问错误（在 Android 中一切正常）。一旦我们取消选中该框，该应用程序就会恢复运行，但当然所有积分按钮在 Android 中都不起作用。

Facebook 会阻止我们通过一个复选框在所有平台上使用积分，这似乎很奇怪。我们做错了什么，还是这正是我们必须处理的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:27:03.640

看起来是非此即彼。

“在 iOS 上接受付款是不同的，因为 iOS 原生应用程序不支持 Facebook Credits。

*   在移动网络（包括从 Android 链接的移动网络应用程序）上，您必须使用 Facebook Credits。
*   在 iOS 上，您必须构建一个原生应用程序并使用 iTunes 付款。” [https://developers.facebook.com/docs/credits/](https://developers.facebook.com/docs/credits/)

您不能拥有原生 iOS 和 Android 的应用程序。（你可以，但正如你所见，它不会起作用）。您可以拥有为 iPhone 和 Android 提供服务的移动 Web，但 iPhone 不会是原生的。

谢谢你的问题，我很好奇实施，想知道这对我们来说是否也是一个交易杀手。

# java - 解析时处理浏览器身份验证

> ID：10001528
> 
> 赞同：1
> 
> 时间：2012-04-03T21:17:12.203
> 
> 标签：java, swing, basic-authentication

我目前正在研究`HTTPURLCONNECTION`用于连接到服务器的链接验证脚本。但是有些服务器有浏览器认证，总是会导致401错误。这里的主要问题是有多个身份验证凭据，如果我可以提取身份验证对话框中显示的字符串以便输入正确的凭据，这将很有用。

如果以编程方式无法做到这一点，请指导我如何向用户本身显示弹出窗口并手动获取凭据，然后继续进行链接验证。（我已经看到 Xenu Link Sleuth 这样做了）。任何帮助将不胜感激。

谢谢

# python - python pdf逐行

> ID：10001529
> 
> 赞同：0
> 
> 时间：2012-04-03T21:17:22.587
> 
> 标签：python, pdf

如何在python中逐行获取pdf文件的内容？我在stackoverflow中搜索过，但找不到任何好的答案。注意：pyPdf 给出断言错误，如果可能的话，使用 slate 和 pdfminer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:10:36.840

从命令行：`python /path/to/pdf2txt.py -o text.txt /path/to/yourpdf.pdf`

然后，您可以获取它制作的文本文件并使用`for line in file:`

如果您想提高效率，则必须更改 pdf2txt.py，并且必须`outfp`是 python iostring，这将避免创建文件然后从中读取。

# c# - 将 HTML 表保存为 xml 或 json

> ID：10001531
> 
> 赞同：1
> 
> 时间：2012-04-03T21:17:31.943
> 
> 标签：c#, xml, linq

我正在寻找一种将 html 页面中的表格保存为 xml 或 json 的方法。我正在使用的当前方法将整个页面保存为 xls 工作表，然后使用 Office.InterLop.Excel 读取工作表。我想跳过保存文件，直接使用 HttpRequest 从页面读取。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:22:56.140

我假设您的意思是您想在没有 File-> Save As 的情况下抓取网页的内容？ [代码项目有一个](http://www.codeproject.com/Articles/18034/HttpWebRequest-Response-in-a-Nutshell-Part-1)解释使用`HttpWebRequest`来做到这一点的文章。或者，您可以使用较新的[HttpClient](http://code.msdn.microsoft.com/Introduction-to-HttpClient-4a2d9cee)。检索 HTML 后，您必须自己解析它。

在[MSDN 文章](http://code.msdn.microsoft.com/Introduction-to-HttpClient-4a2d9cee)中，他们实际上是直接请求 JSON，因此他们不必处理解析，但您可以很容易地编写一个`RegularExpression`来捕获表体。

# html - 为什么即使两个表相同，响应能力也会丢失？

> ID：10001534
> 
> 赞同：0
> 
> 时间：2012-04-03T21:17:56.737
> 
> 标签：html, css, twitter-bootstrap

正如您在图片中看到的那样，我正在使用来自上面 Twitter Bootstrap 2.0 的相同示例，然后使用手头的代码。正如您在随附的屏幕截图中所见，它对屏幕尺寸变化的响应不佳。这很奇怪。甚至源代码看起来都一样。呃

![在此处输入图像描述](../Images/e8b5de144e7f2e884bc3221dab23ed5e.png)

```
<!-- Main hero unit for a primary marketing message or call to action --> 
<div class="hero-unit"> 

  <div class="row">
    <table class="table">
      <thead>
        <tr><th>#</th><th>First Name</th><th>Last Name</th><th>Username</th></tr>
      </thead>
      <tbody>
        <tr><td>1</td> <td>Mark</td>  <td>Otto</td>     <td>@mdo</td>    </tr>
        <tr><td>2</td> <td>Jacob</td> <td>Thornton</td> <td>@fat</td>    </tr>
        <tr><td>3</td> <td>Larry</td> <td>the Bird</td> <td>@twitter</td></tr>
      </tbody>
    </table>

    <table class="table table-bordered"> 
      <thead> 
        <tr> 
          <th>ID</th> 
          <th>Username</th> 
          <th>First Name</th> 
          <th>Last Name</th> 
          <th>Email Address</th>
          <th>Country</th>
          <th>Referrer</th>
        </tr>
      </thead>
      <tbody>
        <tr>

          <?php 

            if (isset($content) && !empty($content) && is_array($content)) {//2
              $i = 0;
              $entries = array();

              while(array_key_exists($i, $content)) {//1

                $entries[$i] = "\n" .'<td>'.$id[$i] .'</td>';
                $entries[$i] .= "\n" .'<td>'.$username[$i].'</td>';
                $entries[$i] .= "\n" .'<td>'.$first_name[$i].'</td>';
                $entries[$i] .= "\n" .'<td>'.$last_name[$i].'</td>';
                $entries[$i] .= "\n" .'<td>'.$email_address[$i].'</td>';
                $entries[$i] .= "\n" .'<td>'.$country[$i].'</td>';
                $entries[$i] .= "\n" .'<td>'.$where_about[$i].'</td>';
                //$entries[$i] .= '<td>'.$sample[$i].'</td>';

                echo $entries[$i];

                $i++;
              }//1
            }//2
          ?>

        </tr> 
      </tbody>
    </table>

  </div> <!-- row -->
</div> <!-- hero --> 
```

# android - 如何将 Android XML 布局文件组织到文件夹中

> ID：10001539
> 
> 赞同：1
> 
> 时间：2012-04-03T21:18:14.947
> 
> 标签：android, xml, layout, styles, directory

是否可以将这些文件放入文件夹中，以便它们位于 res/layout/1 和 res/layout/2 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:21:38.797

据我所知，无法在 res 的标准文件夹中创建文件夹。

实际上 StackOverflow 上有一个与您类似的问题：[Organizing code files/XML files for Android SDK](https://stackoverflow.com/questions/7653164/organizing-code-files-xml-files-for-android-sdk)。

# c# - 将 ASP 标记和用户控件插入 CMS 内容

> ID：10001540
> 
> 赞同：0
> 
> 时间：2012-04-03T21:18:17.710
> 
> 标签：c#, asp.net, httphandler, httpmodule

**这是我猜的“主要问题”**：

是否有一种“.NET 方式”可以很早就收到请求（通过 HttpHandler 或 HttpModule）并以标准控件或用户/自定义控件的形式注入标准 asp.net 标记，并让框架处理它就像一个动态编译的页面？

**更多背景**

好的，所以我们使用的这个自定义 CMS 可以很好地构建相当复杂的网站。它有一个很好的模板系统、用户权限、易于安装等。但是，我们想要添加的一个功能是能够添加动态内容。

在 CMS 退出并执行“它的事情”之后，结果本质上是一个巨大的 HTML 字符串，它在响应中被发回。渲染引擎包含在处理这种“cms 东西”的类中。现在这发生在标准页面生命周期中，但没有理由不能独立调用它。

我已经能够接近 httpHandler 和 httpModule，但问题是我真正需要的是获取“cms html 字符串”，添加我自己的 .net 控件，*然后让框架采用新的字符串并从中构建控制树*（以及视图状态等）。

我得到的最接近的是 HttpModule，它在 PreRequestHandlerExecute 期间将过滤器附加到响应。这个过滤器只是寻找用标签标记替换 {{replaceme}} 的地方（作为概念证明......下面的示例）。我认为这会起作用，因为从我所阅读的内容来看，这是在创建控制树之前，但所发生的只是将 asp.net 标记写入页面（不是由 .NET 呈现）。

我尝试过的另一件事是通过 HttpHandler 完全控制。这*几乎*同样有效（也是下面的示例）......这里的问题是，虽然我可以构建自己的控件树，甚至执行 ascx 控件，但没有地方可以将所有这些东西合并在一起（记住我已经有一个完整的 html 文档字符串，我试图在运行时合并它并将其传递给 .NET）。

我觉得我很接近但缺少一些非常简单的方法来将大部分工作传递给.NET......

**Http模块**

```
 private void PreRequestHandlerExecute(Object source, EventArgs e)
    {
        HttpApplication application = (HttpApplication)source;
        HttpContext context = application.Context;

        context.Response.Filter = new PageFilter(context.Response.Filter);
    } 
```

**过滤器（来自我认为的 SO 示例）**

```
 public override void Write(byte[] buffer, int offset, int count)
    {
        string strBuffer = System.Text.UTF8Encoding.UTF8.GetString(buffer, offset, count);

        // ---------------------------------
        // Wait for the closing </html> tag
        // ---------------------------------
        Regex eof = new Regex("</html>", RegexOptions.IgnoreCase);

        if (!eof.IsMatch(strBuffer))
        {
            responseHtml.Append(strBuffer);
        }
        else
        {
            responseHtml.Append(strBuffer);
            string finalHtml = responseHtml.ToString();

            finalHtml = finalHtml.Replace("{{replaceme}}", @"<asp:Label id=""lblMyTest"" runat=""server"" Text=""This is a label that was replaced by my responsefilter"" />");

            // Transform the response and write it back out

            byte[] data = System.Text.UTF8Encoding.UTF8.GetBytes(finalHtml);

            responseStream.Write(data, 0, data.Length);
        }
    } 
```

**测试 HttpHandler**

```
 public void ProcessRequest(HttpContext context)
    {

        MyBasePage page = new MyBasePage();
        Test tpage = (Test)BuildManager.CreateInstanceFromVirtualPath("~/Test.ascx", typeof(Test));

        var htmlform = new System.Web.UI.HtmlControls.HtmlForm();
        var panel = new Panel();

        panel.Controls.Add(new Label() { Text = "Hello World" });
        panel.Controls.Add(tpage);

        htmlform.Controls.Add(panel);
        page.Controls.Add(htmlform);
        page.ProcessRequest(context);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:31:22.283

尝试执行此操作可能会遇到很多麻烦。如果我理解你，你有一大块来自 CMS 的 HTML，你想把它变成一个控件树，你可以与更多控件（来自 ASP.Net 标记）合并，然后生成最终的 HTML .

但这与 ASP.Net 所做的相反。它使用 ASP.Net 控件解析标记以生成控件树，然后从该控件树生成 HTML。ASP.Net 中没有任何东西可以解析任意 HTML。我认为您需要完全重新编写 .aspx 处理程序，复制其所有解析和树构建功能。

我会尝试使用您的 CMS 找到另一种方法来实现这一点。你正在颠覆系统，这只会导致非常难以维护的混乱。

# javascript - Javascript 访问给定函数之外的参数

> ID：10001549
> 
> 赞同：2
> 
> 时间：2012-04-03T21:19:01.850
> 
> 标签：javascript, functional-programming, arguments, anonymous-function

想象一下下面的代码：

```
fruitMixer = function(fruitHandler, action){
    // get the given arguments in fruitHandler
    var args = fruitHandler.arguments;

    // retrieve these arguments outside the fruitHandler function
    if(args[0] == undefined) return;
    var action = args[0]['action'];

    // do something if it wants to mix
    if(action == 'mix'){
        fruitHandler(args);
    }else{
        // do other stuff
    }
}
fruitMixer(function({
    'action': 'mix',
    'apples': 3, 
    'peaches': 5}
    ){
        // mix the fruits
    }); 
```

我想要做的是获取给定匿名函数之外的参数。使用这些参数，您可以执行上述操作。

我知道这段代码不能正常工作，因为在函数本身之外无法访问参数。但我想知道是否有另一种方法或解决方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:28:46.967

显而易见的事情是将处理程序与处理程序参数分开。

```
fruitMixer = function(fruitHandler, fruitHandlerArgs) {
    //do stuff here

    //call the handler, passing it its args
    fruitHandler(fruitHandlerArgs);
}

fruitMixer(function() {
    //mix the fruits
}, {
    arg1: 'some val',   
    arg2: 'some other val'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:34:51.250

[**功能范围示例**](http://jsfiddle.net/uzdWL/)

我可能不完全理解你的问题。但是，在 JavaScript 中，您可以在函数范围方面做一些很酷的事情：

```
var fruitMixer = function () {
    var arg1 = this.arg1,
        arg2 = this.agr2;
    if (arg1 is something) {

    } else {
        arg2('something else');
    }
}

fruitMixer.call({arg1: 'some val', arg2: function (value) {
        // handle value
    }
}) 
```

因此，您可以通过调用将上下文传递`this`给函数。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)

# php - 如何将一列结果放入数组中，然后与 PHP 的另一列进行比较？

> ID：10001552
> 
> 赞同：1
> 
> 时间：2012-04-03T21:19:13.557
> 
> 标签：php, database, comparison

我的系统是基于驾驶执照申请。如果用户可以申请不同级别的许可证，例如用户要申请 5 级许可证，则必须具备 2 级和 3 级的先决条件。

在我的数据库中，我有 2 个相关表，1 个是存储用户已申请或正在等待批准的所有许可证的许可证。另一个表是许可证类型的描述，其中它指示用户可以申请的每个可用许可证及其先决条件和描述。

允许（PID、EID、PTYPE、状态、日期时间应用程序）

类型（TYID、PTYPE、PREREQ1、PREREQ2、REQEXP、DES）

我的计划是从数据库中检索数据

```
$query= "select PTYPE from permit where eid = $user"
$result = mysql_query($query, $conn); 
```

将结果存储为数组

```
while ($row = mysql_fetch_assoc($result))
{
    $result_array[] = $row;
} 
```

从类型表中检索先决条件

```
$query= "select PREREQ1 , PREREQ2 from type where TYID = $appliedPermit"
$result = mysql_query($query, $conn); 
```

将 2 个结果与布尔值进行比较（我不知道如何编码）

如果结果为真，则继续，否则返回上一页并弹出一个通知用户他们尚未满足先决条件。（我知道我需要 if else 语句，但不知道如何编写条件）

你们认为我在正确的道路上吗？我不确定它是否会起作用......但希望这里的任何人有更好的建议。

稍微重构一下：

我的系统旨在让用户申请驾驶许可证...总共有 9 个许可证 - Class 1, Class 2, Class 3\. Cat 2PG, Cat 3PG, Car4PG, Cat 1OR, Cat 2OR, Cat 3OR, Cat 2TT和猫 3TT。例如 Cat 3TT 要求用户拥有 Cat 2TT 和 Cat 2PG。也就是说，Cat 3TT 的先决条件是 Cat 2TT 和 Cat 2PG。

我想使用 PHP 从数据库中提取所有必需的值并比较它们以查看用户是否满足了先决条件，然后如果他得到 1，则允许他继续进行医疗问卷调查。

问题是：我不知道如何在逻辑上对其进行编码，我尝试过但没有奏效。希望能得到更多的意见和解决我的问题。非常感谢你。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:44:16.740

您只能在一个查询中检查先决条件：

```
$query = "SELECT t.tyid, t.prereq1, t.prereq2
, (CASE WHEN (t.prereq1 IS NOT NULL) AND (p1.ptype IS NULL) THEN 1 ELSE 0 END) AS missing1
, (CASE WHEN (t.prereq2 IS NOT NULL) AND (p2.ptype IS NULL) THEN 1 ELSE 0 END) AS missing2
FROM type AS t
LEFT JOIN permit AS p1 ON (t.prereq1=p1.ptype) AND ( p1.eid = $user )
LEFT JOIN permit AS p2 ON (t.prereq2=p2.ptype) AND ( p2.eid = $user )
WHERE ( t.tyid IN (".implode(',', $appliedPermit).") )";

$result = mysql_query($query, $conn);
while ($row = mysql_fetch_assoc($result)) {
  echo "permit ".$row['tyid']. " : "
  echo "prerequisites = ".$row['prereq1'].", ".$row['prereq2'];
  if ( ($row['missing1']==1) && ($row['missing1']==1) ) {
    echo ", result = ok <br>";
  } else {
    echo ", result = failed <br>";
  }
} 
```

此查询返回两个先决条件 id ；但`missing1`如果先决条件 #1 缺失，`missing2`则值为 1，如果先决条件 #2 缺失，则值为 1。

注意：我已经更新了我的帖子以回复您在下面的两条评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:52:32.123

运行以下查询，然后将结果作为用户需要的先决条件打印给用户。

```
 SELECT prereq1, prereq2 from type 
 where tyid = $appliedPermit 
 and prereq1 not in (select  ptype from permit where eid = $user) 
 and prereq2 not in (select ptype from permit where eid= $user); 
```

# python - 在 python 问题中解析文本

> ID：10001553
> 
> 赞同：0
> 
> 时间：2012-04-03T21:19:14.193
> 
> 标签：python, file, parsing, text

我试图弄清楚如何从这个文本文件中获取每个 AP 行上的客户端数量，这对于那些与它关联的“客户端数量”（在下一行）来说似乎很好，但是您可以查看是否没有客户端与之关联，它不会打印大量客户端。

我无法弄清楚检查下一行以查看是否存在“客户数量”的逻辑，然后返回当前行。如果它存在，它应该继续到下一行并获取客户编号。如果没有“客户数量”行，我正在尝试将客户设置为 0。

我有一个包含以下内容的文件：

无线-detail.txt

```
RUDY>show wireless ap detail on AP1 | include clients
RUDY>show wireless ap detail on AP2 | include clients
 Num of clients       : 8  
RUDY>show wireless ap detail on AP3 | include clients
 Num of clients       : 21
RUDY>show wireless ap detail on AP4 | include clients
RUDY>show wireless ap detail on AP5 | include clients
 Num of clients       : 2 
```

现在我有以下内容：

```
for line in file:   
    if "AP" in line:
        ap = re.search('AP[0-99]+', line)
        print ap.group(0),
    elif "Num of clients" in line:  
        clients = re.search('[0-99]+', line)
        print '- ' + clients.group(0) 
```

它当前打印以下内容：

```
AP1 AP2 - 8
AP3 - 21
AP4 AP5 - 2
AP6 - 5
AP7 - 2
AP8 - 5
AP9 - 5 
```

让它检查下一行以查看 AP 是否应设置为 0 个客户端的最佳方法是什么？

编辑：FWIW - 我正在尝试 file.next() 读取下一行，这似乎有效，但我无法回到上一行：/

编辑＃2：我希望我能投票给你们所有人。谢谢大家！令人难以置信的是有这么多方法可以做到这一点，我无法弄清楚其中的一种！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:29:16.570

这是一个使用正则表达式的简短方法。注意 re.MULTILINE 标志

```
s='''RUDY>show wireless ap detail on AP1 | include clients
RUDY>show wireless ap detail on AP2 | include clients
 Num of clients       : 8  
RUDY>show wireless ap detail on AP3 | include clients
 Num of clients       : 21
RUDY>show wireless ap detail on AP4 | include clients
RUDY>show wireless ap detail on AP5 | include clients
 Num of clients       : 2'''
import re
print re.findall(r'(AP\d) \| include clients(?:$\n Num of clients {7}: (\d))?',s,flags=re.M) 
```

使`(?:$\n Num of clients {7}: (\d))?`一个非捕获组，并且与？最后，它是可选的。如果它没有捕获，第二个匹配组将为空，就像 1 和 4 一样。

意味着 7个`" {7}"`空格

打印这个：

```
 [('AP1', ''), ('AP2', '8'), ('AP3', '2'), ('AP4', ''), ('AP5', '2')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:39:52.493

如果您希望数据采用更结构化的格式（例如字典），可以尝试以下方法：

```
with open('wireless-detail.txt', 'r') as fp:
    access_points = {}
    ap = None
    for line in fp:
        if 'AP' in line:
            ap = line[line.find('AP'):line.find('|')].strip()
            access_points[ap] = 0
        elif "Num of clients" in line:
            access_points[ap] = int(line.split(':')[1].strip())

print access_points 
```

回报：

```
{'AP2': 8, 'AP3': 21, 'AP1': 0, 'AP4': 0, 'AP5': 2} 
```

我同意以前的解决方案，`re`这对于此类任务来说是不必要的复杂化，因为您的文件是可靠输出的。这种方法的一个好处是您还可以获得关于没有连接用户的已知接入点的信息，例如，AP1 = 0（也是 int() 形式！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:28:30.360

you're overthinking it. Don't use regular expressions. they're slow, buggy, and you're pattern is very well defined. Do something like...

```
for line in file:
    if "AP" in line:
        i = line.find('AP')
        splitLine = line[i+2:].split('|')
        val = splitLine[0]
        print val,
    elif "Num of clients" in line:
        splitLine = line.split(':')
        num = splitLine[1]
        print '- ' + num 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T21:31:16.007

如果你打算使用 RE，你可以做这样的事情。变量用于确定是否需要计数线。如果计数线可用，则使用它，否则将其设置为`- 0`。

```
need_count = 0
for line in file:   
    if "AP" in line:
        if need_count:
           print '- 0'
        ap = re.search('AP[0-99]+', line)
        print ap.group(0)
        need_count = 1
    elif "Num of clients" in line:  
        clients = re.search('[0-99]+', line)
        print '- ' + clients.group(0)
        need_count = 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T22:42:22.413

这可能是矫枉过正，但这里......

我创建了一个库，其中包含一些经常派上用场的函数：

```
def fileLineGroups (f, count=2, truncate=True):
    lines = []
    for line in f:
        lines.append(line)
        if len(lines) == count:
            yield lines
            lines = lines[1:]
    if not truncate:
        if lines:
            yield lines 
```

这将遍历打开的文件句柄的行，产生行组。它默认为 2 组，因此它将返回 [line1, line2]，然后是 [line2, line3] 等。如果您保持 truncate on，如果其中没有 count 行，它将不会返回最终组. `for a, b in fileLineGroups(f)`如果它是一个奇数，这可以让你做一些事情，而不会在最后一个错误上出错。

现在您可以执行以下操作：

```
import re
def getAPClientCounts (filepath):
    with open(filename) as f:
        for line1, line2 in py.fileLineGroups(f):
            match1 = re.search('AP\d*', line1)
            if match1:
                match2 = re.search('Num of clients.*: (\d*)', line2)
                if match2:
                    yield match1.group(), match2.groups()[0]

for ap, count in getAPClientCounts('wireless-detail.txt'):
    print 'AP with name %s has %s clients' % (ap, count)

AP with name AP2 has 8 clients
AP with name AP3 has 21 clients
AP with name AP5 has 2 clients 
```

# visual-studio-2010 - mvc-mini-profiler 中的 ProfilingActionFilter 和 ProfilingViewEngine 在哪里？

> ID：10001565
> 
> 赞同：1
> 
> 时间：2012-04-03T21:19:45.117
> 
> 标签：visual-studio-2010, mvc-mini-profiler

我继承了一个使用 MvcMiniProfiler 的项目，现在我必须进行一些更改。我在构建项目时遇到问题，因为以下引用无效（使用 MvcMiniProfiler 1.4）

`filters.Add(new ProfilingActionFilter(), 0);`

和

`ViewEngines.Engines.Add(new ProfilingViewEngine(item));`

有一个`using MvcMiniProfiler.MvcHelpers;`，但是那个引用似乎不存在，所以我把它改成了`using MvcMiniProfiler.Helpers;`但是没有这些引用。

我刚刚使用库包管理器在 VS10 中安装了它。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:35:06.450

这是版本。我不知道为什么，但我抓住了一个旧版本，需要更新到 1.9。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T16:36:41.080

请确保除了主 MiniProfiler 程序集之外，您还安装了 MiniProfiler.MVC4 nuget。此程序集 (StackExchange.Profiling.Mvc) 包括 ProfilingActionFilter 和 ProfilingViewEngine 类，它们都位于 StackExchange.Profiling.Mvc 命名空间中。

您可以在 Sample.Mvc 项目中看到这些操作。

# facebook - 是否可以将现有的粉丝页面转移或更改为应用程序的粉丝页面？

> ID：10001569
> 
> 赞同：1
> 
> 时间：2012-04-03T21:20:15.563
> 
> 标签：facebook, facebook-page

最终目标是在现有的非应用程序粉丝页面上有“转到应用程序”按钮。我知道您可以创建一个应用程序粉丝页面来执行此操作，但我不想将成千上万的粉丝丢失/重定向到新的粉丝页面。这可能吗？提前致谢。

# c - 在普通 C 中应用鸭子类型

> ID：10001570
> 
> 赞同：8
> 
> 时间：2012-04-03T21:20:19.397
> 
> 标签：c, duck-typing

在[我的开源纯 C 代码](https://github.com/agladysh/luatexts/blob/v0.1.3/src/c/luatexts.c#L84)中，我使用这个简单的结构从字符串缓冲区读取和解析数据：

```
typedef struct lts_LoadState
{
  const unsigned char * pos;
  size_t unread;
} lts_LoadState; 
```

[使用这个简单的 API](https://github.com/agladysh/luatexts/blob/v0.1.3/src/c/luatexts.c#L90-125)访问缓冲区：

```
/* Initialize buffer */
void ltsLS_init(lts_LoadState * ls,const unsigned char * data, size_t len);

/* Do we have something to read? (Actually a macro.) */
BOOL ltsLS_good(ls);

/* How much do we have to read? (Actually a macro.) */
size_t ltsLS_unread(ls);

/* Eat given number of characters, return pointer to beginning of eaten data */
const unsigned char * ltsLS_eat(lts_LoadState * ls, size_t len); 
```

*注意：可以在不破坏当前实现的情况下`ltsLS_unread`替换为。`return (ltsLS_good(ls)) ? SIZE_MAX : 0`*

此代码用于[从字符串缓冲区以自定义格式加载一些数据](https://github.com/agladysh/luatexts/blob/v0.1.3/src/c/luatexts.c#L722)。（[这](https://github.com/agladysh/luatexts/blob/v0.1.3/src/c/luatexts.c#L634-671)可能是一个更好的说明。）

* * *

现在我需要**不是从字符串缓冲区加载数据，而是从`FILE`指针加载数据。**

我不想复制粘贴实现，而是**想重用现有代码。**（当然，我可以重构/调整它。）

这是 C++ 中的教科书内容，但是**如何在纯 C 中做到这一点而不会产生运行时开销？**

* * *

这是一个使用`lts_LoadState`API 且不可复制粘贴的示例函数（当然，可以更改以同时支持字符串缓冲区和`FILE *`）：

```
static int ltsLS_readline(
    lts_LoadState * ls,
    const unsigned char ** dest,
    size_t * len
  )
{
  const unsigned char * origin = ls->pos;
  unsigned char last = 0;
  size_t read = 0;

  while (ltsLS_good(ls))
  {
    if (ltsLS_unread(ls) > 0)
    {
      unsigned char b = *ls->pos; /* OK, this should be ltsLS_eat_char macro. */
      ++ls->pos;
      --ls->unread;

      if (b == '\n')
      {
        *dest = origin;
        *len = (last == '\r') ? read - 1 : read;

        return LUATEXTS_ESUCCESS;
      }

      last = b;
      ++read;
    }
    else
    {
      ls->unread = 0;
      ls->pos = NULL;
    }
  }

  return LUATEXTS_ECLIPPED;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:57:33.750

听起来您想要函数变量，您可以将其作为参数传递。C 可以做到，但语法不是很漂亮。

可能有一点运行时开销，但不多。

[如何在 C 中将函数作为参数传递？](https://stackoverflow.com/questions/9410/how-do-you-pass-a-function-as-a-parameter-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-11T09:26:31.550

我讨厌打开这个备份，但这是我今天正在考虑的事情，我认为这还没有一个很好的答案。

我认为在 C 中实现鸭式输入你所追求的是一个全局 vtable。每个结构（对象）都应该将 vtable 作为结构中的第一个元素。基本上，只要您想通过鸭子类型访问某个行为，您就可以将其添加到这个全局 vtable 中；那么无论将什么对象传递给您的函数，您都可以调用它，您可以将对象转换为表，查看行为应该在的位置，检查它是否为非空，然后调用它。

```
//Would be declared in some global.h or similar
struct global_v_table_t = 
{
    char* (*toString)(void);
    //... other functions being accessed through duck typing go here
}

//--------------------
//In some other files: 
//Then we create some objects:
struct bicycle_t
{
    struct global_v_table;
    void (*ride)(void);
};

//When we initialise a bicycle
bicycle_t * bicycyle_init(void)
{
    bicycle_t * bike = malloc(sizeof(bicycle_t));
    //Req'd basically for every object within the project:
    //Either do this or call calloc() instead of malloc():
    globalVtableInit((global_v_table_init)bike);//NULL the vtable
    //Set the behaviours that this object exhibits:
    bike->global_v_table.toString = BIKE_toString;    
}

static char * bikeString = "I'm a bike!";
char * BIKE_toString(void)
{
    return bikeString;
}

//----------------

//Now anyone can ask that an object provide it's toString:

//The example uses an error logging function:

void logError(void * obj)
{
    char * (toStringMethod)(void) = ((global_v_table *)obj)->toString;
    if (NULL != toStringMethod)
    {//As long as the object implements the toString behaviour: 
        printf(toStringMethod()); //Print the object's toString.
    }
}

//Will tidy this code up a bit later but this is what I'm thinking.
//Hopefully is at least partly understandable. The obvious drawback
//to this implementation is that for every object you get this massive
//v_table which is full of mostly NULL's for each object as it scales.
//If you want to make C behave like other languages though you have
//to expect some sort of penalty I guess... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-24T00:46:51.893

我在我的 postscript 解释器中也有类似的需求，让操作员无论是从 a还是从字符串中`token`读取都一样。`FILE*`看来您已经完成了第一步，至少部分完成了通过 get/unget 对将解析逻辑与数据访问分离的步骤。如果您可以编写与库`FILE*`函数原型匹配的字符串版本，则可以简化实现。

对于我来说，我有一个主入口点，它为 get/unget 访问器提供函数指针。

```
int toke (Xpost_Context *ctx,
         Xpost_Object *src,
         int (*next)(Xpost_Context *ctx, Xpost_Object *src),
         void (*back)(Xpost_Context *ctx, int c, Xpost_Object *src),
         Xpost_Object *retval); 
```

正常的运算符执行根据类型处理调用适当的接口函数。`toke`因此文件版本以较低级别的方式调用并实现这两个操作。

```
/* file  token  token true
                false
   read token from file */
static
int Fnext(Xpost_Context *ctx,
          Xpost_Object *F) 
{
    return xpost_file_getc(xpost_file_get_file_pointer(ctx->lo, *F));
}
static
void Fback(Xpost_Context *ctx,
           int c,
           Xpost_Object *F)
{
    (void)ungetc(c, xpost_file_get_file_pointer(ctx->lo, *F));
}
static
int Ftoken (Xpost_Context *ctx,
             Xpost_Object F)
{
    Xpost_Object t;
    int ret;
    if (!xpost_file_get_status(ctx->lo, F))
        return ioerror;
    ret = toke(ctx, &F, Fnext, Fback, &t);
    if (ret)
        return ret;
    if (xpost_object_get_type(t) != nulltype) {
        xpost_stack_push(ctx->lo, ctx->os, t);
        xpost_stack_push(ctx->lo, ctx->os, xpost_bool_cons(1));
    } else {
        xpost_stack_push(ctx->lo, ctx->os, xpost_bool_cons(0));
    }
    return 0;
} 
```

字符串版本对这两个操作使用字符串实现。

```
/* string  token  substring token true
                  false
   read token from string */
static
int Snext(Xpost_Context *ctx,
          Xpost_Object *S)
{
    int ret;
    if (S->comp_.sz == 0) return EOF;
    ret = xpost_string_get_pointer(ctx, *S)[0];
    ++S->comp_.off;
    --S->comp_.sz;
    return ret;
}
static
void Sback(Xpost_Context *ctx,
           int c,
           Xpost_Object *S)
{
    --S->comp_.off;
    ++S->comp_.sz;
    xpost_string_get_pointer(ctx, *S)[0] = c;
}
static
int Stoken (Xpost_Context *ctx,
             Xpost_Object S)
{
    Xpost_Object t;
    int ret;

    ret = toke(ctx, &S, Snext, Sback, &t);
    if (ret)
        return ret;
    if (xpost_object_get_type(t) != nulltype) {
        xpost_stack_push(ctx->lo, ctx->os, S);
        xpost_stack_push(ctx->lo, ctx->os, t);
        xpost_stack_push(ctx->lo, ctx->os, xpost_bool_cons(1));
    } else {
        xpost_stack_push(ctx->lo, ctx->os, xpost_bool_cons(0));
    }
    return 0;
} 
```

这是来自文件 src/lib/xpost_op_token.c 中的[xpost postscript 解释器。](https://github.com/luser-dr00g/xpost)

# html - Twitter Bootstrap 的图标是如何工作的？

> ID：10001575
> 
> 赞同：15
> 
> 时间：2012-04-03T21:20:30.427
> 
> 标签：html, css, twitter-bootstrap

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-03T21:29:05.373

Twitter bootstrap 只是（ab）在他们的[CSS Sprites](http://css-tricks.com/css-sprites/)`<i>`示例标记中使用空元素。使用哪个标签并不重要，但 HTML5 确实赋予了新[的生命](http://html5doctor.com/i-b-em-strong-element/)和语义含义：`<i>``<b>`

[http://www.w3.org/TR/html5/the-i-element.html](http://www.w3.org/TR/html5/the-i-element.html)

> i 元素表示一段文本以另一种语音或语气，或以其他方式偏离正常散文以指示不同质量的文本，例如分类名称、技术术语、来自另一种语言的惯用短语、a思想，或西方文本中的船名。

空元素始终是“语义不够完美”标记的标志，但归根结底，许多人只是使用完成工作的东西。可以说图标是*演示*而不是*内容*，因此`<img>`可能不完全合适，背景图像更好（加上更少的 http 请求）。

如果你喜欢像我时常做的那样挑剔，你可以在里面放一些文字：

```
<span class="icon icon-ok">OK</span> 
```

然后用 CSS 设置样式以隐藏文本`text-indent:-999px`（引导程序可能已经这样做了）。所以基本上，它只是被设计为一个具有固定高度和宽度的块元素，并带有背景图像。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-03T21:27:01.567

```
[class^="icon-"],
[class*=" icon-"] {
  display: inline-block;
  width: 14px;
  height: 14px;
  line-height: 14px;
  vertical-align: text-top;
  background-image: url("../img/glyphicons-halflings.png");
  background-position: 14px 14px;
  background-repeat: no-repeat;
  *margin-right: .3em;
} 
```

你可以看到标签无关紧要，他们可能使用了`i`，因为好吧......它已被弃用。在这种情况下，图像标签将不起作用，因为它们使用的是精灵表......

```
.icon-glass {
  background-position: 0      0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:25:47.400

实际的标签并不重要，只是类。你可以使用`<span class="icon-question-sign></span>`什么的。

`<i>`但是写起来更短，*我* 可以代表图标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T17:08:32.103

“i”标签不是图标的简写。它用于 HTML4 中的斜体文本，并且在 HTML5 中给出了稍微不同的上下文。Bootstrap 滥用了它，许多过于关注速度而不是质量或语义的开发人员同样滥用它。

空标签在语义上是错误的。我与图标无关。

PS 使用文本缩进隐藏文本是不可访问的，所以不要使用它。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-03T21:25:48.440

标签就是这样，一个标签。您可以将任何标签用于任何目的，但通常您希望使用语义正确的标签来表示不同类型的内容。该`<i>`标签并未被弃用，但几乎不再使用，因此它是 Twitter Boostrap 用于该目的的安全标签，无需担心被其他内容覆盖。

# c# - 将字符串转换为无符号整数

> ID：10001576
> 
> 赞同：1
> 
> 时间：2012-04-03T21:20:31.450
> 
> 标签：c#

我需要向报价服务器发送请求。每个请求都应该有一个独特的请求编号（无符号整数），以便在返回带有附加请求编号的报价时，我会知道这些报价属于哪个符号。这种情况有什么特殊的字符编码吗？例如，“A”是 13，“B”是 14，所以对于“BA”符号，我的请求编号将是 1413。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:27:49.427

As for mapping the chars directly to a uint, can you guarantee that the symbols are 6 characters or fewer? If not, then there are more possible symbol values than possible uint values.

In any event, the point of a request number is not to encode information about the request; rather, you should keep a dictionary of request numbers (as keys) and information about what to do with the response (as values). With your approach, if you have more than one request for the same symbol, you would end up with different requests that share the same request number.

For example, if you want to map the response to a symbol, you could do this:

```
private Dictionary<uint, string> _requests = new Dictionary<int, string>();
private uint _requestNumber = 0;

void SendRequest(string symbol)
{
    uint currentRequestNumber = _requestNumber++;
    _requests[currentRequestNumber] = symbol;
    //... send request using currentRequestNumber
}

void ReceiveResponse(Response response)
{
    string symbol = _requests[response.RequestNumber];
    _requests.Remove(response.RequestNumber);
    //...do something with the response...
} 
```

This is not thread safe; it's just a sketch to illustrate the idea.

To answer the question as asked, if the range of possible symbol values is small enough, you could take the approach you outline in your question, where each character maps to a 2-digit number, and you simply concatenate these numbers. I'm not aware of an existing system that uses this approach.

This approach wastes many uint values that cannot correspond to any symbol. For example, if `A` is 10, and `Z` is 35, and `\` is 36, then these ranges are wasted: 0 to 9, 37-1009, 1037-1109, etc.

Another option would be to interpret the symbol as a base-27 number (with `'A'` to `'Z'` plus `'\'` as valid digits) and convert it to base 10.

If you would like some sample code, please give some more information about the range of possible symbol values.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:24:39.373

字符总是大写AZ吗？如果是这样，像这样简单的东西将以您描述的方式转换它：

```
var symbol = "BA";
var encoded = symbol.Aggregate(0u, (acc, c) => (uint)(acc * 100 + c - 'A' + 13)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T21:28:07.037

Assuming A = 13, B = 14, ..., Z = 38

you can write a simple function that does this conversion for you. Something like:

```
uint output = 0;
foreach (char c in inpStr) {
    output = output * 100 + (13 + c - 'A');
}
return output; 
```

Where inpStr = "BA" in your example.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T21:28:12.077

If your symbols are always upper case letters, you can create a mapping something like this:

```
uint result = 0;
uint power = 1;

for (int i=0; i < input.Length; i++)
{
  uint digitValue = power * (input[i] - 'A');
  result += digitValue;
  power *= 26;
} 
```

This effectively considers your symbol to be a base-26 number (digits are 'A' through 'Z') and converts it to base-10, with the "ones" digit furthest to the left (reverse of standard numbers, but irrelevant because it's internally consistent). If you wanted to treat the digits as ones-digit-on-the-left, you would just need to modify `input[i]` to be `input[input.Length - i]`.

**Update** Given your clarification that the '/' symbol is also allowed, just convert the "base" from 26 to 27 and order "/" just above "Z" (arbitrary, but easier). You will need to test if input[i] is '/' and assign the result power * 27 for that case.

# asp.net - 在 ASP.NET 中使用 SqlDataSource 检索数据库数据

> ID：10001578
> 
> 赞同：0
> 
> 时间：2012-04-03T21:20:46.840
> 
> 标签：asp.net, sql

我从 ASP.Net 开始。我完全疯了，试图找到一种简单的方法来获取一个简单的查询。我的要求相当简单，我有一个选择服务器的单选框，还有几个填充 SELECT 参数的文本框。我想我需要在 (c#) 后面的代码中创建查询——这就是我所做的。这是那个代码。

```
 if (DOB.Length != 0 && txtPersonFirst.Text.Length == 0 && txtPersonLast.Text.Length == 0)
    {

        query = "select top 100 p.FirstName, p.LastName,  " + (blah blah blah)
    } 
```

我得到了这块来创建数据源。

```
SqlDataSource SqlDataSource1 = new SqlDataSource(ConnectionString, query); 
```

除此之外，在 Stackoverflow 和其他地方挖了几个小时后，我很迷茫。

我知道我需要一些 aspx 代码来填充/填充。像这样工作正常：

```
<asp:SqlDataSource runat="server" 
  ID="MySource" 
  ConnectionString="SERVER=xxx;Database=xxx;User ID=xxx;Password=xxx"
  SelectCommand="select top 100 p.FirstName, p.LastName FROM Person p">
  <SelectParameters>

  </SelectParameters>
</asp:SqlDataSource>

    <asp:GridView runat="server" ID="grid"  
         DataSourceId="MySource" 
         AutoGenerateColumns="true">
    </asp:GridView> 
```

但我不确定如何从代码隐藏中填充连接字符串和选择命令。希望这很简单！我正在为 ASP.NET 2 编写代码以与 IIS 6 兼容——不确定这是否有用。

# ruby-on-rails - 如何检查 ActiveRecord 使用的数据库名称

> ID：10001583
> 
> 赞同：78
> 
> 时间：2012-04-03T21:21:08.407
> 
> 标签：ruby-on-rails, ruby, configuration

在 database.yml 中定义所有设置。如何从 ruby​​ 访问这些设置？我看过了`App::Application::config`，但在那里找不到。另外，我记得人们可以在没有 yaml 的情况下配置数据库设置，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-04-03T21:27:30.093

```
Rails.configuration.database_configuration 
```

这将为您提供一个哈希表，其中包含每个环境的配置。例如获取您的开发数据库名称：

```
Rails.configuration.database_configuration["development"]["database"] 
```

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2016-11-04T15:45:04.710

在 Rails 4.2 中，您可以这样做：

```
ActiveRecord::Base.connection.current_database 
```

您还可以询问特定模型的数据库（因为每个模型可以使用不同的数据库）：

```
User.connection.current_database 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-06-02T16:25:15.693

获得更多信息的另一种方法是使用数据库特定的连接信息方法。例如，如果您使用的是 postgresql，您可以通过以下方式获取当前数据库连接的详细信息：

```
ActiveRecord::Base.connection.raw_connection.conninfo_hash 
```

这将提供更多的连接细节，而不仅仅是那些与默认值不同的细节。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-03-22T15:24:00.880

从 Rails 6.1 开始，您必须使用`ActiveRecord::Base.connection_db_config`. 因此您可以访问其他类方法，例如`database()`.

```
db_config = ActiveRecord::Base.connection_db_config
print db_config.database
# main available methods: [:host, :schema_cache_path, :migrations_paths, :config, :database, :_database=, :checkout_timeout, :reaping_frequency, :idle_timeout, :replica?, :configuration_hash, :adapter, :pool] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-16T00:59:41.293

要利用 tsherif 的评论，您可以在 rails 控制台 (rails c) 中运行 Rails.configuration 命令来获取数据库名称。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-12-02T23:02:30.720

如果要获取数据库名称以在 bash 或 shell 脚本中使用，请使用以下命令：

```
db_name="$(bundle exec rails runner "puts ActiveRecord::Base.connection.current_database")" 
```

# c# - 传递 var 类型的变量 - 未知类型

> ID：10001587
> 
> 赞同：2
> 
> 时间：2012-04-03T21:21:24.990
> 
> 标签：c#, variables, lambda, ienumerable, var

我有以下代码行：

> var groups = inputRows.GroupBy(x => new { x.stateCIP, x.facultyRank });

我想将组传递给另一个类方法：

```
OutputFileWriter.write(groups); 
```

但是，我不知道为 write 方法声明输入参数的类型，因为它不会采用 var。

```
public static void write(?????? groups) 
```

我附上了一张当我将鼠标悬停在 var groups 区域时收到的消息的照片：![在此处输入图像描述](../Images/84e1ffc7d87dc70629e46d694781e361.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:31:53.327

一种方法是创建一个具有两个属性的类，stateCIP 和facultyRank，然后使用它而不是创建您现在正在做的匿名类型。然后你可以将它而不是匿名类型传递给你的方法

所以代替 var groups = inputRows.GroupBy(x => new { x.stateCIP, x.facultyRank })

尝试

```
var groups = inputRows.GroupBy(x => new MyClass(StateCIP = x.stateCIP, FacultyRank = x.facultyRank }); 
```

那么你可以做

```
public static void write(IEnumerable<MyClass> groups) 
```

或者，如果您想对仅对其进行迭代的组对象执行更多操作，例如在 Write 方法中从组中添加或删除项目，则在调用方法时将 IEnumerable 转换为 List 使用：

```
var groups = inputRows.GroupBy(x => new MyClass(StateCIP = x.stateCIP, FacultyRank = x.facultyRank }).ToList(); 
```

然后将您的方法写为

```
public static void write(IList<T> groups) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:36:16.460

也许是这样的：

```
public class MyObject
{
     public string stateCIP { get; set; }
     public string facultyRank { get; set; }
} 
```

像这样的调用：

```
var groups = inputRows.GroupBy(x => new MyObject()
{
    stateCIP= x.stateCIP,
    facultyRank= x.facultyRank
}).ToList(); 
```

然后是这样的功能：

```
public static void write(List<IGrouping<MyObject,YourTableEntity>> groups)
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:37:32.403

通过 like 方法的解决方案是通过 like

`IEnumerable`

例如，您可以编写如下内容：

```
public static void write(IEnumerable groups) 
```

或者您可以将其模板化为：

```
public static void write<T>(IEnumerable<T> groups) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T22:24:58.603

为了给予应有的荣誉，这是对蒂格兰答案的增强。

您的查询返回一个`IEnumerable<IGrouping<'a, InputRow>>`，因此如果您将匿名类型替换为类型参数（此处`T`），您的方法通常可以接受它。通过使用更具体的类型`IEnumerable<T>`（Tigran 的建议），您可以将序列的元素视为 IGrouping 对象：

```
public static void write<T>(IEnumerable<IGrouping<T, InputRow>> groups)
{
    foreach (var group in groups)
        foreach (var inputRow in group)
            //do something...
} 
```

如果您不需要访问 Key 的成员（即匿名类型的实例），这将非常有效。在这里，您不需要它们，因为这些值在 InputRow 类型中也可用，正如查询表达式所暗示的那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T23:13:48.627

如果您使用的是 .NET 4.0，并且不需要分组信息，因为它位于组内的各个项目中，您可以使用：

```
public static void write(IEnumerable<IEnumerable<InputRow>> groups) 
```

# android - 单击按钮后如何调用布局？

> ID：10001588
> 
> 赞同：0
> 
> 时间：2012-04-03T21:21:25.677
> 
> 标签：android, android-layout

我在显示布局时遇到了困难。这是我的意图： 1\. 用户单击按钮 2\. 弹出一条消息，用户在是或否之间进行选择 3\. 单击是时，将显示名为“拨号盘”的布局。

但是当我单击“是”时，它会显示“不幸的是，已停止”。谁能帮我 ？我知道这条线有问题...

```
ViewStub stub = (ViewStub)findViewById(R.id.dialpad);
stub.setVisibility(View.VISIBLE); 
```

谢谢您的帮助 ！

这是代码：

```

`package com.example;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewStub;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class ExampleGUIDialogActivity extends Activity {

    final Context context = this;
    private Button button;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        button = (Button) findViewById(R.id.buttonAlert);

        // add button listener
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                        context);

                // set title
                alertDialogBuilder.setTitle("Your Title");

                // set dialog message
                alertDialogBuilder
                .setMessage("Click yes to exit!")
                .setCancelable(false)
                .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        // if this button is clicked, close
                        // current activity
                        // launch dialer
                        ViewStub stub = (ViewStub)findViewById(R.id.dialpad);
                        stub.setVisibility(View.VISIBLE);

                        //stub.inflate();
                        //View mDialerView = (View)findViewById(R.id.dtmf_twelve_key_dialer_view);
                        //mDialerView.bringToFront();

                        ExampleGUIDialogActivity.this.finish();
                    }
                })
                .setNegativeButton("No",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        // if this button is clicked, just close
                        // the dialog box and do nothing
                        dialog.cancel();
                    }
                });

                // create alert dialog
                AlertDialog alertDialog = alertDialogBuilder.create();

                // show it
                alertDialog.show();
            }
        });
    }

}` 

            回答 #1

赞同：0

时间：2012-04-03T21:29:57.660

尝试这个

```
ViewStub stub = (ViewStub)findViewById(R.id.dialpad);
if (stub != null){
    stub.setVisibility(View.VISIBLE);
} 
```

你能提供任何logcat信息吗？？？

            回答 #2

赞同：0

时间：2012-04-03T21:33:18.333

嗯，一个问题是你在膨胀`ViewStub`然后立即退出你的活动，这会导致各种各样的问题；首先，您的用户将永远不会看到新布局！

我认为您可能想要启动一个新`Activity`的，它的内容视图是您试图膨胀的布局，并允许用户基于它执行一些操作......或者您可能想调用`dialog.dismiss()`？

```

# edit - 如何更新 NSManagedObject

> ID：10001593
> 
> 赞同：0
> 
> 时间：2012-04-03T21:21:42.537
> 
> 标签：edit, nsmanagedobject

我有一个 NSMutableArray，里面有几个 NSManagedObjects，我从 managedObjectContext 中获取。如何编辑 managedObjects 并用新对象替换旧对象？

我从数组中取出这样的对象：

```
NSManagedObject *managedObject = [_dataArray objectAtIndex:indexToTest];
[managedObject setValue:@"sucessfully updated!" forKey:@"hint"]; 
```

我的问题是，如何更新 managedObjectContext 中的 managedObject？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:49:03.650

*   获取 NSManagedObject 并设置值

> NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
> [对象 setValue: self.urlField.text forKey:@"url"];

*   然后获取 NSManagedObjectContext 对象并保存

> NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
> NSError *error = nil;
> if (![context save:&error]) {}

# asp.net - aspx 中缩短的命名空间别名

> ID：10001594
> 
> 赞同：9
> 
> 时间：2012-04-03T21:21:42.800
> 
> 标签：asp.net

我在代码隐藏中有一个这样定义的 using 语句：

```
using Name = Extremely.Long.And.Unwieldy.Namespace 
```

我希望能够在我的 aspx 页面中执行此操作：

```
<%=Name.Type %> 
```

到目前为止，我想出的最好的是：

```
<%=Namespace.Type %> 
```

使用[此处](https://stackoverflow.com/questions/1697169/is-it-possible-to-use-the-using-statement-in-my-aspx-views-asp-net-mvc)显示的技术。

我还能做得更好吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-03T21:26:49.970

试试这个：

```
<%@ Import Namespace="Name=Extremely.Long.And.Unwieldy.Namespace" %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-03T21:27:42.567

我找到了能够使用导入标记进行命名空间别名的参考。

```
<%@ Import Namespace="myAlias=System.MyNamespace" %> 
```

[来源](http://ctrlf5.net/?p=187)

# html - 重置按钮的作用类似于提交按钮

> ID：10001595
> 
> 赞同：2
> 
> 时间：2012-04-03T21:21:43.993
> 
> 标签：html, button, submit, reset

在下面的脚本中，重置按钮的作用也类似于提交按钮。问题可能出在哪里？谢谢。

**HTML**

```
 <input type="image" name="submit" value=" " src="image.png">
  <input type="image" name="reset" value=" " src="reset.png"> 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:26:40.723

Inputs of type image always act like submit buttons.

You can use JavaScript to override the default behaviour, but if the user does not have JavaScript enabled, the button will submit instead of reset.

An option would be to add a regular reset typed button and replace that with an image or image typed input with JavaScript after DOM is loaded. This would make it work on browsers without JavaScript (they get the default reset button) as well as with JavaScript enabled.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:26:11.327

The problem is that by [definition](http://www.w3schools.com/tags/att_input_type.asp)

```
<input type="image" /> 
```

defines submit button.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:26:58.587

That is the intended behavior.

> The input element with a type attribute whose value is "image" represents either an image from which the UA enables a user to interactively select a pair of coordinates and submit the form, **or alternatively a button from which the user can submit the form**.

Source: [http://www.w3.org/TR/2012/WD-html-markup-20120329/input.image.html](http://www.w3.org/TR/2012/WD-html-markup-20120329/input.image.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T21:29:51.220

要制作重置按钮，您应该使用

```
<input type="reset" value="Reset"> 
```

具有`type="image"`提交按钮之类的行为。

# objective-c - UIImage 到 NSDate 到 NSString 到 JSON 字符串给出空值

> ID：10001598
> 
> 赞同：-3
> 
> 时间：2012-04-03T21:22:01.313
> 
> 标签：objective-c, xcode, json, ipad

我需要将图像放入 json 字符串中。首先这可能吗？

我做了：

```
NSData *data = UIImagePNGRepresentation(img);
NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
[myArrayPhoto addObject:string]; 
```

如果我执行此代码..它会崩溃，但如果我让

```
[myArrayPhoto addObject:[NSString stringWithFormat:@"%@",string]]; 
```

它有效，但图像为空..

帮助

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:25:44.093

要将图像放入 JSON 中，您必须将其编码为 Base64 或类似的编码并将其作为字符传输。尝试使用 UTF8 注定要失败，因为图像中的（基本上是随机的）数据字节将包含等同于`"`, `{`, `[`,`:`等的字符。

（我要补充一点，将任何大小的图像作为 JSON 传输可能是个坏主意。相反，您应该使用一些文件传输协议。）

# java - 执行时间和大O

> ID：10001600
> 
> 赞同：0
> 
> 时间：2012-04-03T21:22:10.023
> 
> 标签：java, algorithm, big-o, analysis, execution

（在任何人说什么之前是的，这是家庭作业，但我已经把它上交并拿回来了，我只是想弄清楚明天的测试。）

问题是计算代码片段的执行时间和大 O。我可以计算出大 O 罚款，但我不知道如何确定执行时间。好的，基本上我不明白的是如何计算执行时间

```
for(i=0; i < n; i++){
    SomeJavaStatment;
    for(j=0; j < 2 * n; J+= 2){ 
        SomeJavaStatment;
        SomeJavaStatment;
}
} 
```

正确答案是 Big O(n^2) 我猜对了，但是我不知道执行时间是多少，正确答案是 4n^2+5n+2。

如果有人能解释我将如何得到这个答案，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T21:29:58.943

我不认为，应该以这种方式确定执行时间，但是：

```
 //assignment to i takes 1 operation    
 for(i=0; i < n; i++){ // i++ is executed n times, i < n is executed (n+1) times
    SomeJavaStatment; // n times

    //assignment to j takes 1 operation
    for(j=0; j < 2 * n; j+= 2){  // j+=2 is executed n*n times, j < 2*n is executed n*(n+1) times
        SomeJavaStatment; // n * n times
        SomeJavaStatment; // n * n times
    }
 } 
```

总共给出 1 + n + (n+1) + n + n + (n*n) + (n+1)*n + (n*n) + (n*n) = `4 * n^2 + 5*n + 2`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:34:09.597

大 O 描述了函数的上限。您的函数不仅是大 O(n^2)，而且还具有严格的界限（对于任何给定的 值`n`，该函数具有完全相同的运行时）。您可以手动计算*精确的*紧密界限，也可以将其表示为总和，结果为`4n^2+5n+2`.

# netbeans - 如何刷新所有显示相同数据的 ExplorerView？

> ID：10001602
> 
> 赞同：0
> 
> 时间：2012-04-03T21:22:16.057
> 
> 标签：netbeans, nodes, netbeans-platform

**在进行一些更改后刷新所有数据**的最流畅（简单且设计良好）的方法是什么？我有一个应用程序，**可以在其中打开多个显示相同数据的窗口**。用户可以在其中一个窗口中编辑一个节点，但**我需要在每个视图中刷新该节点（或其子节点）**。

**示例：** 我使用 TopComponent中的*OutlineView使用**ExplorerView*，它以树形结构显示所有章节。但是我可以多次打开这个窗口（比如 MS Word 中的“新窗口”，它是同一数据的另一个“视图”）。当我更改一章的标题时，我需要在所有可见的地方（在所有展开的节点中）刷新它。

 ***我看到了一种解决方案**，但它有一些优点和缺点：进行我自己的查找并将所有打开的 ExplorerViews 的所有打开的根节点存储在其中。然后在每次编辑时，只需循环浏览所有打开的根节点并在它们上调用一些方法来重新创建查看的结构（调用 setChildren ......就像第一次显示时一样）。但是树视图崩溃了。如果我要创建一些机制，一些 OutlineView 的实现，它会记住所有展开的节点，所以它会重新创建展开的树（但不是整个树，只是原样），它可能需要一些时间，当数据太多了，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:53:09.460

每个视图都由一组节点构建。如果您在一个节点中修改数据，则修改会反映在包含该节点的视图中，但不会反映在其他视图中（不是其他节点）:-(。

当我构建一个基于 NB RCP 的应用程序时，我构建了一个[带有“实体”的模型](http://www.antonioshome.net/kitchen/swingnbrcp/swingnbrcp-model.php)。这些实体具有我使用 NetBeans Lookup 建模的“能力”。这些通常是普通的 POJO。

然后，当我想“看到”一个实体时，我会为它创建一个“节点”。[您可以拥有任意数量的节点](http://www.antonioshome.net/kitchen/swingnbrcp/swingnbrcp-nodes1.php)（任意数量的“MS Word”视图），但您希望在模型中保留一个“树”。

如果我更改“实体”中的属性，则此更改会传播到所有监听它的节点。您可能想了解[如何将“能力”与“行动”联系起来](http://www.antonioshome.net/kitchen/swingnbrcp/swingnbrcp-actions.php)。*

# database - 数据库设计：默认地址

> ID：10001603
> 
> 赞同：2
> 
> 时间：2012-04-03T21:22:20.090
> 
> 标签：database, database-design, default-value, addressbook

我的数据库有一个组织表和一个地址表。在地址表中，我想存储用户 ID 和组织 ID，以便我以后可以查找它们，并且还有多个组织地址，或者让用户能够选择他们为不同组织添加的地址。这里的一个例子是如果 2 个组织共享相同的财产。我还希望我的组织表存储默认地址 ID。然而，当在 FuelPHP 中使用 ORM 模型时，这被证明很尴尬（可能无关紧要，这只是让我注意到可能的设计缺陷）。

以上是一种选择，我可以想到另外2种解决方案。一种是有一个默认的地址表存储组织ID和地址ID，地址表仍然可以存储用户和组织ID。然后，我可以从组织表中选择内连接默认地址表，并从地址表中内连接地址 ID 以检索地址。

第二个选项是在我的地址表中有一个默认地址字段，如 bool 类型。然后，我在需要时在选择中使用 where 语句来检索此地址。

第二个选项是我目前的首选选项，因为这意味着我不必做太多工作来更改我的表并在我的 PHP 框架 ORM 模型中添加键和设置关系。但是，如果数据库变得更大并且性能成为问题，这些方法中哪种方法最好？还有其他我没有考虑过的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:39:52.017

听起来您在组织和地址之间有一个 m:m（多对多）关系。所以在数据库中表示这种关系的最好方法是引入一个新的表来表示这种关系。

我不确定您的意思是默认地址是给定公司的默认地址，还是给定用户在创建公司时的默认地址。在第一种情况下，您可以将其添加为新创建的表示关系的表的属性。在后一种情况下，您可以在用户表中放置一个外键，表示默认地址。

关于性能，使用整数键并制作适当的索引......！也就是说，跳过关系表并为同一地址上的不同公司创建相似地址当然会更快。这将为您节省一个加入公司+地址查找的机会。但是，如果您需要查找给定地址上的所有公司，这将慢得多，因为您必须读出不同的地址并进行比较。

所以这完全取决于你想如何使用你的数据。我会选择“正确”选项（一个新的关系表），因为使用正确的索引并不会慢很多，并且稍后会为您提供更多可能性。

下一个问题是如何让新用户选择一个现有的地址，而不是创建一个重复的条目。这将是您界面设计中的一个挑战，您收集的数据的质量将在很大程度上取决于它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:40:09.397

我个人会选择以下内容：

```
Organization
-------------
OrgID
OtherOrgColummns

Address
-------------
AddressID
OtherAddressColumns

OrgAddresses
-------------
OrgID
AddressID
IsDefault 
```

虽然我不能确定这将根据您的描述起作用。

**一句警告**- 大约有 10,000 种方法可以写出相同的地址。例如：

```
111 First Street
111 1st street
111 1st st.
111 1st str
etc. 
```

我不知道您对让人们输入重复项有多担心，但如果这是一个问题，我建议您使用地理编码服务来获取地址的纬度，然后使用经度来确定您是否已经有了地址在你的数据库中......只是一个想法......

# ruby-on-rails - 如何将所有数据保存在 has_many :through ActiveRecord 关系中？

> ID：10001609
> 
> 赞同：1
> 
> 时间：2012-04-03T21:22:58.960
> 
> 标签：ruby-on-rails, activerecord

我试图让我的 ActiveRecord 查询更有效。我有用户和项目，用户对项目有感觉，并带有布尔响应。

这是我的模型：

用户：

```
has_many :feelings
has_many :items, :through => :feelings 
```

感觉：

```
belongs_to :user
belongs_to :item
attr_accessible :response 
```

物品：

```
attr_accessible :name 
```

因此，我可以通过以下方式获取用户的感受列表：

```
User.find(1).feelings 
```

我可以通过以下方式获得他有感觉的物品清单：

```
User.find(1).items 
```

这一切都很好。不过，我想要的是在一个结果集中将上述两个查询组合起来。理想情况下，我希望能够查询用户项目的列表，并通过这些结果得到他们对每个项目的响应。

如果这是直接 SQL，我可以这样做：

```
SELECT * FROM items INNER JOIN feelings ON items.id=feelings.item_id WHERE feelings.user_id = 1 
```

然后，这给了我一张桌子所需的一切。这也是 ActiveRecord 在查询时所做`User.find(1).items`的，除了它在创建我的结果散列之前丢弃了感觉表中的数据。

如何阻止它丢弃中间数据，从而为我节省额外的数据库查询？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:08:53.700

你可以在 Rails 3 中使用这样的写法，

```
User.find(1).feelings.includes(:item) 
```

在 Rails 2 中，

```
User.find(1).feelings.find(:all, :include => :item) 
```

通常这会导致两个查询。一个选择感觉，另一个选择项目。

# classnotfoundexception - 错误 java.lang.ClassNotFoundException，PathClassLoader.findClass() android

> ID：10001610
> 
> 赞同：1
> 
> 时间：2012-04-03T21:22:59.470
> 
> 标签：classnotfoundexception

我的项目在模拟器上工作正常。但是硬件告诉我我犯了一些错误。我从堆栈报告中得到类似的东西。我一直在寻找这个问题的解决方案，我发现提示将所有使用过的库添加到清单中，但无论如何它对我没有帮助。

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{your.modlitewnik/your.modlitewnik.ModlitewnikActivity}: android.view.InflateException: Binary XML file line #42: Error inflating class android.widget.Space
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
at android.app.ActivityThread.access$1500(ActivityThread.java:121)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3701)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #42: Error inflating class android.widget.Space
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
at android.app.Activity.setContentView(Activity.java:1657)
at your.modlitewnik.ModlitewnikActivity.onCreate(ModlitewnikActivity.java:15)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
... 11 more
Caused by: java.lang.ClassNotFoundException: android.widget.Space in loader dalvik.system.PathClassLoader[/data/app/your.modlitewnik-1.apk]
at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
at android.view.LayoutInflater.createView(LayoutInflater.java:471)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:26:00.547

您正在尝试在不支持它的手机上使用 API 级别 14 类 android.widget.Space。因此，除非您的手机正在运行 Ice Cream Sandwich，否则它不会运行。它可能适用于您的模拟器，因为您已使用 API 级别 14 或 15 指定了一个模拟器。

# c++ - 复制构造函数中的 C++ 向量数组

> ID：10001614
> 
> 赞同：0
> 
> 时间：2012-04-03T21:23:16.777
> 
> 标签：c++, pointers, vector, constructor

我是复制构造函数的新手，当我开始使用向量时似乎无法让它们工作。

```
//  ROBOT CLASS
class Robot {
    private:
        char *name;
        int size;

        int cmdCount;

        command *cmdList;
        char items[8][16];
        int resources[3]; // silver, gold, then platinum

    public: 
        Robot( );
        Robot(int num_of_cmds, const char *nm);
        Robot(const Robot &);
        ~Robot( );

        const char *get_name( );
        command get_command(int pos) const;
        void set_item(const char item[ ], int pos);
        const char *get_item(int pos);

};

//  ROBOT CONSTRUCTOR default
Robot::Robot( ) {

    //  Load Robot name
    cmdCount = 5;
    try {
        name = new char[11];
    }
    catch(std::bad_alloc) {
        cout << "Error allocating " << 11+1 << " bytes of memory\n";
        name = NULL;
    }

    if (name) {
        strcpy (name, "univac.dat");
    }

    //  Allocate memory for command array
    vector <command> cmdList[5];

};

//  ROBOT COPY CONSTRUCTOR
Robot::Robot(const Robot &from) {
    cmdCount = from.cmdCount;
    //  Load Robot name
    try {
        name = new char[11];
    }
    catch(std::bad_alloc) {
        cout << "Error allocating " << 11+1 << " bytes of memory\n";
        name = NULL;
    }

    if (name) {
        strcpy (name, from.name);
    }

    //  Allocate memory for command array
    vector <command> cmdList[5];

    for (int i=0; i < cmdCount;i++) {
        cmdList[i] = from.cmdList[i];
    }

    for (int i=0; i < 8; i++) {
        strcpy(items[i], from.items[i]);
    }

    for (int i=0; i < 3; i++) {
        resources[i] = from.resources[i];
    }

} 
```

我在编译时得到的错误是：

> *robot.cpp：在复制构造函数'Robot::Robot(const Robot&)'中：robot.cpp:117：错误：'cmdList[i] = (((command* )from->Robot:中的'operator='不匹配： :cmdList) + ((unsigned int)(((unsigned int)i) * 172u)))' /usr/include/c++/4.4/bits/vector.tcc:156：注意：候选人是：std::vector< _Tp, _Alloc>& std::vector<_Tp, _Alloc>::operator=(const std::vector<_Tp, _Alloc>&) [with _Tp = command, _Alloc = std::allocator]

我将如何在复制构造函数中复制向量数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:28:20.290

在您的类中，您声明一个成员变量：

```
command *cmdList; 
```

但是在你的每个构造函数中，你声明了一个同名的局部变量：

```
vector <command> cmdList[5]; 
```

实际上，您会希望成员变量的类型为`vector<command>`：

```
//  ROBOT CLASS
class Robot {
    private:
…
        std::vector<command> cmdList;    
…
}; 
```

然后，在默认构造函数中，您可以为其分配内存。您不一定必须这样做，这取决于您以后如何使用它。

```
//  ROBOT CONSTRUCTOR default
Robot::Robot( ) :cmdList(5) {
… // no mention of cmdList in the body required    
}; 
```

最后，在复制构造函数中，复制它：

```
//  ROBOT COPY CONSTRUCTOR
Robot::Robot(const Robot &from) : cmdList(from.cmdList) {
… // no mention of cmdList in the body required
} 
```

* * *

*备选方案*：作为备选方案，如果您选择不在构造函数中使用初始化列表，您可以这样做：

```
Robot::Robot() {
…
    cmdList = std::vector<command>(5);
    // or cmdList.resize(5);
…
}

Robot::Robot(const Robot &from) {
… 
    cmdList = from.cmdList;
…
} 
```

* * *

*额外信用*：如果您进行以下更改，那么您*可能根本不需要复制构造函数！*您也不需要析构函数或赋值运算符：

```
 class Robot {
    private:
        std::string name;
        int size;

        int cmdCount;

        std::vector<command> cmdList;
        char items[8][16];
        int resources[3]; // silver, gold, then platinum

    public: 
        Robot( );
        Robot(int num_of_cmds, const char *nm);

        const char *get_name( ) { return name.c_str(); }
        command get_command(int pos) const { return cmdList[pos]; }
        void set_item(const char item[ ], int pos);
        const char *get_item(int pos);
}; 
```

# apache-flex - 通过 alt + 鼠标单击在 FLEX 中启动 MapMouseEvent

> ID：10001618
> 
> 赞同：0
> 
> 时间：2012-04-03T21:23:26.980
> 
> 标签：apache-flex, flash-builder

我想通过组合键盘快捷键和鼠标单击来启动 MapMouseEvent。这是我所拥有的一部分，我不确定逻辑是否正确：

```
private function MapClick(event:MapMouseEvent):void 
  {
    if (event.altKey) altPressed = true;
        {
           Alert.show("Alt key has been pressed - click on screen");
           // launch the function here
        }
    else
        {
           Alert.show(" Must click Alt key first, then click on map");
        }
  } 
```

我在这个网站上看过类似的例子，但仍然没有找到任何解决方案。我希望知道 FLEX 的人可以帮助我通过一系列键盘快捷键基本启动一个功能。例如：Alt + 鼠标单击，或 Shift + 鼠标单击，或类似的东西。原因是简单的鼠标单击已经在屏幕上执行了其他操作。

谢谢 ...

RJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:45:07.057

您提供的代码非常接近正确。

```
private function MapClick(event:MapMouseEvent):void 
  {
    if (event.altKey);
        {
           //This means alt is held, AND a click occurred.
           //run function for alt-click here
        }

    if (event.ctrlKey);
        {
           //This means ctrl is held, alt was *not* held, AND a click occurred.
           //run function for ctrl-click here
        }

    if (!event.ctrlKey && !event.altKey)
        {
           //this means that a click occurred, without the user holding alt or ctrl
           //run function for normal click here.
        }
  } 
```

我写这个的方式，如果用户按住 ctrl+alt 并点击，两个函数都会运行。如果您希望 alt 优先于 ctrl 或类似的，下面的代码将起作用。

```
private function MapClick(event:MapMouseEvent):void 
  {
    if (event.altKey);
        {
           //This means alt is held, AND a click occurred.
           //run function for alt-click here
        }
    else if (event.ctrlKey);
        {
           //This means ctrl is held, AND a click occurred.
           //run function for ctrl-click here
        }
    else
        {
           //this means that a click occurred, without the user holding alt or ctrl
           //run function for normal click here.
        }
  } 
```

# salesforce - Salesforce 如何对客户等非员工用户收费？

> ID：10001619
> 
> 赞同：1
> 
> 时间：2012-04-03T21:23:29.150
> 
> 标签：salesforce

销售人员计划页面说他们按“用户”收费。好吧，为每位员工支付几美元是有道理的，但是让像网上银行客户这样的非员工用户呢？我在电子银行中看到了销售人员的实际提及。我在哪里可以了解他们的定价？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:31:02.047

在这种情况下，银行用户可能是“门户用户”。

[设置您的客户门户](https://login.salesforce.com/help/doc/en/customer_portal_setting_up.htm)

我认为您必须与销售代表讨论定价问题，但这通常只是完整用户许可成本的一小部分。您还应该询问一个类似的许可证，称为高容量门户许可证。

# memory - 如何在内存有限的嵌入式系统上使用 AT 读取 SMS？

> ID：10001622
> 
> 赞同：4
> 
> 时间：2012-04-03T21:23:53.683
> 
> 标签：memory, sms, embedded, at-command

我正在开发一个嵌入式软件，它也通过 AT 协议与调制解调器通信。现在我想阅读消息，但我的记忆容量出现了问题。可能是我有多个消息，并且使用 AT 命令集，我一次将它们全部返回。我没有足够的内存容量来存储它们来处理它们（我只有 1KB 左右）。

请参阅此处的示例： [http ://www.smssolutions.net/tutorials/gsm/receivesmsat/](http://www.smssolutions.net/tutorials/gsm/receivesmsat/)

我发`AT+CMGL="ALL"`。然后我得到类似的东西：

```
+CMGL: 1,"REC UNREAD","+31625012354",,"07/07/05,09:55:16+08"
Test message 1
+CMGL: 2,"REC UNREAD","+31625012354",,"07/07/05,09:56:03+08"
Test message 2

OK 
```

这里的问题是消息可以包含某些指令，这些指令会触发某些操作，这些操作可能需要一段时间才能执行。在此期间，用于从调制解调器接收数据的缓冲区可能（将）溢出。另一方面，我没有内存容量来首先将所有消息读入内存以防止缓冲区溢出，然后从内存中处理它们。

另一种方法是阅读一条消息，使用`AT+CMGR=2`，只返回一条消息：

```
+CMGL: 2,"REC UNREAD","+31625012354",,"07/07/05,09:56:03+08"
Test message 2

OK 
```

但是，要使其正常工作，我需要知道存储位置（上例中的 2）。

我的直觉告诉我首先运行`AT+CMGL`，解析数据并只保留存储位置，然后使用`AT+CMGR`.

但是，我想收到第二个意见。我对 AT 和嵌入式软件还没有那么丰富的经验，所以也许我忽略了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T22:54:13.910

发送`AT+CMGL="ALL"`并保存第一条消息直到返回。忽略所有其他数据，直到收到`OK`，表示调制解调器已完成。处理完第一条消息后，通过发送删除`AT+CMGD=<NUM>`（这里是第一条消息的编号）。重复。

是的，它有点难看，但效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:27:17.307

可以为新收到的 SMS 消息配置一条未经请求的消息。看看[这个问题](https://stackoverflow.com/questions/1423308/what-is-the-best-design-for-polling-a-modem-for-incoming-data)，了解更多关于配置系统的信息。

每当您收到`+CMTI`消息时索引字段（字符串末尾的数字可以在阅读消息时使用，只需将此值传递给`AT+CMGR`命令即可获取最新收到的消息。

我建议删除旧的（使用过的）消息，因为大多数嵌入式模块只有非常有限的内存来存储消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-15T07:59:54.540

我使用的另一种解决方案。发送`AT+CPMS`以读取 SIM 内存中存储了多少条消息以及内存的容量（消息数量）是多少。

如果`AT+CPMS`报告有一条或多条消息在内存中等待，`AT+CMGR`则从位置 1 开始发送。您将以可以接收和解析的一条消息（可能在位置 2 或 10）结束。

处理后，删除它`AT+CMGD`（现在你现在它的位置是什么）。

# joomla - 禁用用户配置文件编辑？

> ID：10001630
> 
> 赞同：4
> 
> 时间：2012-04-03T21:25:07.687
> 
> 标签：joomla, joomla1.7, joomla1.6, joomla2.5

如何阻止注册用户在前端更改其用户名等详细信息（通过编辑配置文件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:00:35.853

打开`components\com_users\models\forms\profile.xml`然后编辑：

```
<field name="password1" type="password"
  readonly="true"
/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:30:46.433

您可以在您不想更改的输入字段的“禁用”属性中。大多数用户不会摆弄您页面的源代码。

```
<input type="text" disabled="disabled" /> 
```

# svg - 克隆 svg 组

> ID：10001631
> 
> 赞同：0
> 
> 时间：2012-04-03T21:25:13.277
> 
> 标签：svg

我想复制一个 svg 组，但我真的不知道我错过了什么。这里的代码：对于组：

```
<g id="exCar" x="50" y="500"  transform="" >
   <path ..
   <path ... 
   <image
   <text ..
</g> 
```

和复制功能：

```
function cloning(){
     var newCar = document.getElementById("exCar").cloneNode(true);
     document.getElementById("newCar").setAttribute("x",250);
     document.getElementById("newCar").setAttribute("y",600);
     document.getElementById("exCar").appendChild(newCar);
     alert("!!!!");
    }; 
```

请帮我理解什么是错的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:02:10.883

代替

```
document.getElementById("newCar").setAttribute("x",250); 
```

它应该是：

```
newCar.setAttribute("x", 250) 
```

# excel - 执行时 Excel 运行时错误“91”

> ID：10001641
> 
> 赞同：1
> 
> 时间：2012-04-03T21:25:50.863
> 
> 标签：excel, excel-2010, vba

我有一个用于财务记录的 Excel 2010 工作簿。在一张工作表上，我有一个菜单。在这个菜单中，我选择了一个带有附加宏的按钮，它隐藏了构成菜单的单元格并取消隐藏事务输入表单。

此交易输入表单包含几个在这里无关紧要的值。输入数据后，您点击适当标记的输入按钮。现在，当我编写文档时，此按钮工作正常；它进入记录工作表，在正确的表中插入一个空白行，返回表单，复制数据，返回新的空白行，然后插入数据。然后它在日期列上按最新到最旧的排序，以确保条目的顺序正确。最后它返回表单并清除数据。这工作得很好，直到我决定隐藏历史记录表。

当我决定隐藏工作表时，我重新录制了宏，取消隐藏工作表执行操作并重新隐藏工作表。现在，当我运行宏时，它会取消隐藏工作表。然后它挂起并出现“运行时错误'91'对象变量或未设置块变量”错误。它不会完成宏，使历史记录表可见且未更改，表单仍充满数据。

在出现错误时给出的选项中选择调试会显示：

```
 Sub transaction()
'
' transaction Macro
'

'
    Sheets("Income").Select
    Sheets("Transaction History").Visible = True
    Selection.ListObject.ListRows.Add (1)
    Sheets("Income").Select
    Range("B6:G6").Select
    Selection.Copy
    Sheets("Transaction History").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Application.CutCopyMode = False
    ActiveWorkbook.Worksheets("Transaction History").ListObjects("Table9").Sort. _
        SortFields.Clear
    ActiveWorkbook.Worksheets("Transaction History").ListObjects("Table9").Sort. _
        SortFields.Add Key:=Range("Table9[[#All],[Date]]"), SortOn:=xlSortOnValues _
        , Order:=xlDescending, DataOption:=xlSortNormal
    With ActiveWorkbook.Worksheets("Transaction History").ListObjects("Table9"). _
        Sort
        .Header = xlYes
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
    End With
    Sheets("Transaction History").Select
    ActiveWindow.SelectedSheets.Visible = False
    Range("B6:G6").Select
    Selection.ClearContents
    Rows("6:8").Select
    Range("A8").Activate
    Selection.EntireRow.Hidden = False
    Range("B6").Select
    ActiveCell.FormulaR1C1 = "=R[1]C"
    Rows("7:7").Select
    Selection.EntireRow.Hidden = True
    Range("C6").Select
End Sub 
```

随着行

```
Selection.ListObject.ListRows.Add (1) 
```

以黄色突出显示。我不知道任何 VBA，因此记录宏而不是编写它们，我无法对此做出头或故事。

编辑：好的，我已经弄清楚如何引用表格：

```
Worksheets("Transaction History").ListObjects("thistory").ListRows.Add (1) 
```

所以从那里开始，我将重新编写整个内容，尝试在 VBA 中完成，而不是记录它。谷歌是我的朋友。感谢你的帮助。非常感谢您继续提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:23:21.150

这是你正在尝试的吗？

```
Sub transaction()
    Dim wbI As Worksheet, wbO As Worksheet

    Set wbI = Sheets("Income")
    Set wbO = Sheets("Transaction History")

    With wbO
        .Visible = True

        .ListObjects("thistory").ListRows.Add (1)

        wbI.Range("B6:G6").Copy

        .Range("B2").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False

        With .ListObjects("thistory").Sort
            With .SortFields
                .Clear
                .Add Key:=Range("thistory[[#All],[Date]]"), SortOn:=xlSortOnValues _
                , Order:=xlDescending, DataOption:=xlSortNormal
            End With
            .Header = xlYes
            .MatchCase = False
            .Orientation = xlTopToBottom
            .SortMethod = xlPinYin
            .Apply
        End With

        .Visible = False
   End With

   With wbI
        .Range("B6:G6").ClearContents
        .Rows("6:8").Hidden = False
        .Range("B6").FormulaR1C1 = "=R[1]C"
        .Rows(7).Hidden = True
   End With

End Sub 
```

# zend-framework - Document expired when click on back button

> ID：10001643
> 
> 赞同：1
> 
> 时间：2012-04-03T21:26:00.427
> 
> 标签：zend-framework, backspace

When I press ob backspace button for website I make using zend framework, the error page that

```
Confirm Form Resubmission 
```

occur, how can I know what data I should resend when I press on back button ? I have many pages with many data !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:55:21.767

你说的是浏览器的正常行为，IMO，你能做的最好的就是阻止浏览器再次发送数据，但你不能选择发送什么数据。

如何防止浏览器`$_POST`再次发送数据？

您需要在发布请求后将用户重定向到同一页面：

```
$this->_helper->redirector('action', 'controller', 'module'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:49:16.970

您收到此错误/弹出窗口是因为您尝试在浏览器中重复 POST 请求。浏览器会警告您，以免您创建不需要的重复帖子。当您提交表单，然后尝试返回页面时，您将收到此信息。

如果您正在构建一个 Web 应用程序并且您的意图是再次重新发布相同的数据，只需确认重新提交以重复请求。

# postgresql - 在字符串值中使用逗号导入 CSV

> ID：10001651
> 
> 赞同：7
> 
> 时间：2012-04-03T21:26:51.733
> 
> 标签：postgresql, csv, postgresql-8.4, postgresql-copy

我正在尝试将一个简单的 CSV 导入 Postgres 8.4 数据库：

这是一张表：

```
CREATE TABLE public.sample (
  a VARCHAR, 
  b VARCHAR
) WITHOUT OIDS; 
```

这是一个 CSV 文件示例：

```
"foo","bar, baz" 
```

查询：

```
COPY sample FROM '/tmp/sample.csv' USING DELIMITERS ','; 
```

抛出异常：

```
ERROR:  extra data after last expected column
CONTEXT:  COPY sample, line 1: ""foo","bar, baz"" 
```

但是，CSV 解析不是火箭科学，我想知道如果不重新格式化源 CSV 文件是否无法解决。

输入来自第 3 方，我无法更改格式。
（我知道我可以在导入之前预处理以更改分隔符。）

**最终解决方案**：

```
COPY sample FROM '/tmp/sample.csv' WITH DELIMITER ',' CSV; 
```

最初取自[https://stackoverflow.com/a/9682174/251311](https://stackoverflow.com/a/9682174/251311)，文档页面是[http://www.postgresql.org/docs/8.4/static/sql-copy.html](http://www.postgresql.org/docs/8.4/static/sql-copy.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-03T21:41:04.177

显然，当您尝试将其导入为文本格式时，您有一个 CSV 文件。对于 Postgres 9.1 或更高版本，请使用：

```
COPY sample FROM '/tmp/sample.csv' (FORMAT csv); 
```

`,`无论如何，CSV 格式的默认分隔符是逗号 ( )。[更多在手册中](https://www.postgresql.org/docs/current/sql-copy.html)。
对于 PostgreSQL 8.4 或更早版本：

```
COPY sample FROM '/tmp/sample.csv' CSV; 
```

# java - 您如何在 Google Android 地图上控制 OverlayItem 的大小？

> ID：10001655
> 
> 赞同：1
> 
> 时间：2012-04-03T21:27:16.117
> 
> 标签：java, android, google-maps

[所以我在这篇文章中讨论了](https://stackoverflow.com/questions/5200674/controlling-overlayitem-size)几乎完全相同的问题，除了他们决定采用的解决方案的黑客工作对我不起作用。我需要一个真正的解决方案，所以我决定对 android maps 源代码进行逆向工程以找到最佳解决方案。

我目前的解决方案是在我的类中覆盖扩展 OverlayItem 的 draw 方法，但后来我遇到了在地图上点击覆盖项目不起作用的问题（点击注册在实际项目所在位置以外的位置画）。所以，我将继续挖掘，直到找到合适的方法组合来覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:47:10.390

对于那些和我有同样问题的人来说，解决方案实际上很简单。

您所要做的就是在 OverlayItem 的可绘制对象上设置边界，如下所示：

```
Drawable d = myOverlayItem.getMarker(0);
d.setBounds(-xWidth/2, -yWidth/2, xWidth, yWidth); 
```

getMarker 的参数实际上取决于 overlayItem 的状态，但对我个人而言，所有状态都相同，所以我不在乎，只使用了 0。

我不确定解决方案将如何根据您实际设置边界的位置而有所不同，但对我来说，我是在 ItemizedOverlay 子类的 draw 方法中完成的：

```
@Override
public void draw(android.graphics.Canvas canvas, MapView mapView, boolean shadow) {
    if (!shadow) {
        // Do your projection calculations here, if necessary

        for (int i = 0; i < mOverlays.size(); i++) {
            Drawable d = mOverlays.get(i).getMarker(0);
            d.setBounds(-width/2, -height/2, width/2, height/2);
        }
    }

    super.draw(canvas, mapView, shadow);
} 
```

值得注意的是，覆盖项的边界是从 0,0 开始的，这实际上是一个平移到 OverlayIcon 左上角的画布。在我的示例中，如果将宽度设置为 50 并将高度设置为 50，则 OverlayItem 将绘制在地图上，以它定义的位置为中心（在 OverlayItem 的构造函数中设置）。您可以在 Overlay 的源代码中看到这种情况：

```
protected static void drawAt(Canvas canvas, Drawable drawable, int x, int y, boolean shadow)
  {
      // .... Do Stuff ....

      canvas.save();
      canvas.translate(x, y);

      // .... Do Stuff ....

      drawable.draw(canvas);

      // .... Do Stuff ....

      canvas.restore();
  } 
```

（它发生在 canvas.translate 调用中）

如果有人关心[这里是 Overlay 的完整来源](http://pastebin.com/4ssv8riF)。

（对 maps.jar 进行逆向工程需要我做很多工作，所以我不妨充分利用我的努力）。

# c++ - how to compile this logic in visual C++ express 2010

> ID：10001656
> 
> 赞同：0
> 
> 时间：2012-04-03T21:27:16.853
> 
> 标签：c++, visual-studio-2010, visual-c++

I have C++ code from a book and would like to run it in visual C++ express 2010 but I got an error like following. Could you tell me how to run this code ? Thank you so much !

```
#include <iostream>

class Cat
{
public:
int itsAge;
int itsWeight;
};

int main()
{
Cat Frisky;
Frisky.itsAge = 5;
std::count << "Frisky is a cat who is ";
std::count << Frisky.itsAge << " years old.\n";

reutrn 0;
} 
```

```
 ------ Build started: Project: chp6, Configuration: Debug Win32 ------
  list6_1.cpp
  list6_1.cpp(2): warning C4627: '#include <iostream>': skipped when looking for          precompiled header use
            Add directive to 'StdAfx.h' or rebuild precompiled header
  list6_1.cpp(20): fatal error C1010: unexpected end of file while looking for precompiled header. Did you forget to add '#include "StdAfx.h"' to your source?
   ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:31:15.023

在您的项目设置中，关闭预编译头文件。这在您创建项目时已打开（可能默认情况下），它预计`#include "StdAfx.h"`是您文件的第一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:29:50.427

在修复了简单的错别字并*实际阅读了错误消息*之后..：

```
#include "StdAfx.h"
#include <iostream>

class Cat
{
public:
    int itsAge;
    int itsWeight;
};

int main()
{
    Cat Frisky;
    Frisky.itsAge = 5;
    std::cout << "Frisky is a cat who is ";
    std::cout << Frisky.itsAge << " years old.\n";

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T21:29:38.197

将项目设置为空白 Win32 控制台应用程序。添加你的源代码并编译。它应该工作。

或者您可以添加它要求的文件：`Did you forget to add '#include "StdAfx.h"' to your source?`根据错误报告。

# c++ - “连接” SDL_Surface 到 shared_ptr

> ID：10001657
> 
> 赞同：6
> 
> 时间：2012-04-03T21:27:21.127
> 
> 标签：c++, sdl, shared-ptr

我想知道如何将 SDL_Surface* 与 shared_ptr 连接起来？
我需要`SDL_FreeSurface(SDL_Surface*)`在删除之前打电话`SDL_Surface`。如何在 shared_ptr 中“修改删除过程”？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-03T21:47:44.163

只需将 SDL_FreeSurface 传递给构造函数：

```
std::shared_ptr<SDL_Surface> shared_surf(SDL_LoadBMP("foo.bmp"), SDL_FreeSurface); 
```

请确保不要使用`SDL_SetVideoMode`or返回的指针执行此操作`SDL_GetVideoSurface`。

# ruby-on-rails - Rails 3 中的 ruby script/about 等价物是什么？

> ID：10001663
> 
> 赞同：2
> 
> 时间：2012-04-03T21:27:44.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`ruby script/about`Rails 3中的等价物是什么？我试过了`rails about`，`rails help`但找不到答案。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T04:51:59.627

跑步`rake about`应该会给你同样的信息。它适用于 Rails 3.2.2 和 Ruby 1.9.3。

# ruby-on-rails - I can't keep track of my super DRY'd up code anymore. What are good ways to organize or retrieve partials I'm looking for?

> ID：10001666
> 
> 赞同：0
> 
> 时间：2012-04-03T21:27:54.110
> 
> 标签：ruby-on-rails, development-environment, partial-views, dry

I know it's good to be DRY(Don't Repeat Yourself), and I've been incorporating lots of partials into my rails project. Well it's convenient, but only when I can find them.

The problem is my project has become large enough that it's now taking much more time looking for partials than before. For example I come across a bug and try to fix it, but rails error log doesn't display exactly which partial it's coming from. So I first go to the view, and try to find that code. However the code is not there. So I search for "render" just to find some partials to search from. There are too many partials at this stage that I don't even remember which partial I used to write certain code. So I have to go through each one of them every time this happens. Sometimes a partial has another partial inside it, in which case this becomes a depth first search!

I realized I've been doing this much more frequently recently and am not getting anything done because of this inefficiency. I don't think Depth first search is the way to go.

I try using grep to search for keywords, but it's slow.

I know there are lots of people who work on really huge projects and still manage to use DRY'd up code. How do you do it? Do you have your own know-how to organize these partials, so that it's easy to retrieve them when you need them later? Or, what are some good ways to quickly find what I'm looking for when debugging? I currently use vim on a mac, along with NERDTree and ctrl-p plugins.

# java - 如何将一个spring bean的父属性设置为另一个bean的属性？

> ID：10001668
> 
> 赞同：0
> 
> 时间：2012-04-03T21:28:04.267
> 
> 标签：java, spring

是否可以使用一个 Spring bean 的属性来设置另一个 bean 的父属性？

作为背景信息，我正在尝试更改项目以使用容器提供的数据源，而不会对 Spring 配置进行重大更改。

**具有我想使用的属性的简单类**

```
package sample;

import javax.sql.DataSource;

public class SpringPreloads {

    public static DataSource dataSource;

    public DataSource getDataSource() {
        return dataSource;
    }

    //This is being set before the Spring application context is created
    public void setDataSource(DataSource dataSource) {
        SpringPreloads.dataSource = dataSource;
    }

} 
```

**spring bean 配置的相关位**

```
<!-- new -->
<bean id="springPreloads" class="sample.SpringPreloads" />

<!-- How do I set the parent attribute to a property of the above bean? -->
<bean id="abstractDataSource" class="oracle.jdbc.pool.OracleDataSource" 
abstract="true" destroy-method="close" parent="#{springPreloads.dataSource}">
    <property name="connectionCachingEnabled" value="true"/>
    <property name="connectionCacheProperties">
        <props>
            <prop key="MinLimit">${ds.maxpoolsize}</prop>
            <prop key="MaxLimit">${ds.minpoolsize}</prop>
            <prop key="InactivityTimeout">5</prop>
            <prop key="ConnectionWaitTimeout">3</prop>
        </props>
    </property>
</bean> 
```

**测试时异常**

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named '#{springPreloads.dataSource}' is defined 
```

或者如果我从上面删除 Spring EL，我会得到：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'springPreloads.dataSource' is defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:49:36.417

我想这就是你所追求的。springPreloads bean 用作“工厂”，但仅用于获取其 dataSource 属性，然后插入各种属性...

我猜 springPreloads.dataSource 是 oracle.jdbc.pool.OracleDataSource 的一个实例？

```
<bean id="springPreloads" class="sample.SpringPreloads" />

<bean id="abstractDataSource" factory-bean="springPreloads" factory-method="getDataSource">
    <property name="connectionCachingEnabled" value="true" />
    <property name="connectionCacheProperties">
        <props>
            <prop key="MinLimit">${ds.maxpoolsize}</prop>
            <prop key="MaxLimit">${ds.minpoolsize}</prop>
            <prop key="InactivityTimeout">5</prop>
            <prop key="ConnectionWaitTimeout">3</prop>
        </props>
    </property>
</bean> 
```

# c# - Unique ID Generation on the Cloud

> ID：10001671
> 
> 赞同：1
> 
> 时间：2012-04-03T21:28:07.467
> 
> 标签：c#, windows, azure, azure-sql-database

I'm looking for a simple but robust solution for provisioning unique Part Numbers. I have been thinking about using GUID to identify requests from different clients (desktops, phones, etc.) and then assigning PNs sequentially based on insert date-time of the request GUIDs.

Questions: Is SQL Azure the right service to use? Is there a standard approach to this?

Thanks.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T21:45:05.253

这与“在云端”无关，而是一个普遍的分布式计算问题。

您的问题中没有足够的信息来完全理解您的要求，但我收集到的是，您需要为请求部件号的服务消费者分配一个唯一编号。

第一个想法是 GUID 是一个数字（128 位长）。当您需要分配零件号时，您不能只生成一个 GUID 吗？如果需要，您可以将 GUID 散列成一个无符号长整数（City Hash 是我最喜欢的该类型应用程序的 64 位散列），除非您处理数十亿个零件编号，否则散列冲突的风险非常非常小. 如果您想将哈希转换为 32 位数字，请查看[生日问题](http://en.wikipedia.org/wiki/Birthday_problem)。使用 32 位时，哈希冲突将比您想象的要频繁得多。

如果必须分配序列号，则必须在处理中引入序列化点。您将需要一些服务（可能是数据库表上的标识列）来计算单个零件编号请求并分配下一个更大的编号。

如果您通常需要较小的数字，但它们不一定必须是连续的，您可以允许每个可能处理此类请求的服务器来管理它自己的数字范围（例如，给定的服务器可以“检查”一个包含 1000 个部件号的块从中央服务，分配它们直到它们用完，然后“检查”一个新的数字块）。这并不能保证当前分配的所有号码都是连续的，因为多个服务器可以以不同的速率分配号码。此外，如果您没有正确管理应用程序崩溃，您可能会“丢失”已签出但未完全分配的数字块的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:44:44.987

你可能想看看这个：[SnowMaker – 一个独特的 id 生成器](http://blog.tatham.oddie.com.au/2011/07/14/released-snowmaker-a-unique-id-generator-for-azure-or-any-other-cloud-hosting-environment/)

# java - 关于Java HashMap的实现

> ID：10001672
> 
> 赞同：2
> 
> 时间：2012-04-03T21:28:09.243
> 
> 标签：java, hashmap

为什么容量必须是倍数或2？为什么在 indexFor 函数中使用“&”？为什么要重新计算哈希函数中的哈希而不是直接使用密钥的哈希码？

我认为此实现与“算法简介”中的描述之间存在一些重要差异。

“>>>”是什么意思？

```
static int hash(int h) {
        // This function ensures that hashCodes that differ only by
        // constant multiples at each bit position have a bounded
        // number of collisions (approximately 8 at default load factor).
        h ^= (h >>> 20) ^ (h >>> 12);
        return h ^ (h >>> 7) ^ (h >>> 4);
} 
```

谁能给我一些指导？如果有人可以解释哈希算法，我将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:34:28.023

这是性能优化。将哈希码映射到表索引的常用方法是

```
table_index = hash_code % table_length; 
```

`%`运营商很贵。如果`table_length`是 2 的幂，则计算：

```
table_index = hash_code & (table_length - 1); 
```

相当于（很多）更昂贵的模运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:46:02.647

不要理会窗帘后面的人。

实际的算法无疑是开发人员“感觉良好”的组合，修复了一些奇怪的退化情况，以及简单的传统（用户经常为此开发模糊的依赖项）。

请注意：

> ```
>  * Applies a supplemental hash function to a given hashCode, which
>  * defends against poor quality hash functions.  This is critical
>  * because HashMap uses power-of-two length hash tables, that
>  * otherwise encounter collisions for hashCodes that do not differ
>  * in lower bits. Note: Null keys always map to hash 0, thus index 0. 
> ```

网：只要能用，性能好，你无所谓。

# jenkins - 在 Jenkins 中将作业组合在一起或序列化它们或按顺序运行它们

> ID：10001673
> 
> 赞同：2
> 
> 时间：2012-04-03T21:28:09.317
> 
> 标签：jenkins, jenkins-plugins

我想在 Jenkins 中连载三份工作。

它们应该在触发它们的作业之后作为一个块运行：

```
Job1 -> [A,B,C]
Job2 -> [A,B,C] 
```

现在当 Job1 被触发两次时，我得到以下行为：

```
Order that jobs are run now:
-Job1
-Job2
-A
-B
-(job A or C)
-Order is not guaranteed after this 
```

我想看到的是：

```
Order that jobs are run:
-Job1
-Job2
-A (from Job1)
-B (from Job1)
-C (from Job1)
 ------------
-A (from Job2)
-B (from Job2)
-C (from Job2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:37:17.657

看看[Jenkins Locks and Latches 插件](https://wiki.jenkins-ci.org/display/JENKINS/Locks+and+Latches+plugin)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:46:33.190

所以，这是我找到的解决方案：

使用 Jenkins Parameterized Trigger 插件，可以使用额外的构建步骤：

**在其他项目上触发/调用构建**

> 在 Job1 上添加三个构建触发器：
> 
> 建设项目：**JobA**
> 
> [ **x** ] 阻塞直到触发的项目完成它们的构建
> 
> 建设项目：**JobB**
> 
> [ **x** ] 阻塞直到触发的项目完成它们的构建
> 
> 建设项目：**JobC**
> 
> [ **x** ] 阻塞直到触发的项目完成它们的构建

在 Job2 上做同样的事情。

> 添加一个在两个作业 1 和 2 之间共享的锁。

这样，当 Job 1 和 Job 2 被触发时，它们将相互等待。在所有 Job A->B>C 运行并成功之前，每个 Job 都不会被标记为通过。

更多选项可用于控制每个构建步骤的返回值，它是应该取决于触发作业的结果还是继续而不考虑结果。

```
Fail this build step if the triggered build is worse or equal to    

Mark this build as failure if the triggered build is worse or equal to  

Mark this build as unstable if the triggered build is worse or equal to 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T20:19:28.373

我想不出一种方法可以在 Jenkins 中完全按照您的意愿行事。也许詹金斯不是你的工具？

解决此问题的另一种方法是：您的问题实际上为您的问题提供了解决方案（一堆作业及其执行顺序），而您正在询问如何实现它。

你愿意解释你的目标是什么，你想达到什么目标？也许一些 Jenkins 专家可以告诉你如何使用 Jenkins 来做到这一点。

# c# - 使用 MVC 3 导出 Excel 数据

> ID：10001678
> 
> 赞同：1
> 
> 时间：2012-04-03T21:28:17.037
> 
> 标签：c#, asp.net-mvc-3, excel

我已经在互联网上搜索了好几天了，我只是想知道是否有人使用 MVC 3 将数据导出到 excel。我真的需要一个很好的教程，其中包含有关如何使用导出 excel 数据的分步说明带有 C# 的 MVC 3。我找到了很多文章，但似乎没有一篇适用于我现有的数据库。我只是在寻找一些关于在哪里放置方法等的说明。本教程[http://stephenwalther.com/blog/archive/2008/06/16/asp-net-mvc-tip-2-create-a-custom- action-result-that-returns-microsoft-excel-documents.aspx](http://stephenwalther.com/blog/archive/2008/06/16/asp-net-mvc-tip-2-create-a-custom-action-result-that-returns-microsoft-excel-documents.aspx) 似乎在堆栈溢出时被强烈推荐。我已按照文章中的说明进行操作，但我无法运行该程序，因为 Visual Studio 在返回方法 GenerateExcel1 时抛出错误

**这就是VS说我有错误的地方**

`return this.Excel(db, db.iamp_mapping, "data.xls")`

现在我收到 2 条错误消息，上面写着

> 错误 1 ​​'DBFirstMVC.Controllers.PaController' 不包含 'Excel' 的定义和最佳扩展方法重载 'DBFirstMVC.CustomActionResults.ExcelControllerExtensions.Excel(System.Web.Mvc.Controller, System.Data.Linq.DataContext, System .Linq.IQueryable, string)' 有一些无效参数 C:\Documents and Settings\lk230343\My Documents\Visual Studio 2010\WebSites\DBFirstMVC Saves\DBFirstMVC_CRUD_and_PAGING_done\DBFirstMVC\Controllers\PaController.cs 193 24 DBFirstMVC
> 
> 错误 2 参数 2：无法从 'DBFirstMVC.Models.PaEntities' 转换为 'System.Data.Linq.DataContext' C:\Documents and Settings\lk230343\My Documents\Visual Studio 2010\WebSites\DBFirstMVC Saves\DBFirstMVC_CRUD_and_PAGING_done\DBFirstMVC\控制器\PaController.cs 193 35 DBFirstMVC

有没有人以前见过这些错误，或者对如何修复它们有任何想法？我的意思是 Excel 方法存在于 ExcelControllerExtensions.cs 中，我认为我已将该程序集提供给 PaController。老实说，我不知道为什么它会在返回时抛出错误，因此欢迎任何建议/讨论/帮助。我已经包含了我一直在弄乱的 3 个文件的代码，但是如果您认为我忘记发布诊断此错误所需的文件，请告诉我，我会发布它。谢谢你的帮助！

## 控制器

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Data.Linq;
using System.Data.Linq.Mapping;
using System.Web.UI.WebControls;
using System.Web;
using System.Web.Mvc;
using DBFirstMVC.Models;
using System.Data;
using PagedList;
using PagedList.Mvc;
using DBFirstMVC.Controllers;
using System.IO;
using DBFirstMVC;
using DBFirstMVC.CustomActionResults;

namespace DBFirstMVC.Controllers

{
    public class PaController : Controller
    {
       private PaEntities db = new PaEntities();
        //
        // GET: /Pa/

        public ViewResult Index(string sortOrder, string currentFilter, string searchString, int? page)
        {
            ViewBag.CurrentSort = sortOrder;
            ViewBag.NameSortParm = String.IsNullOrEmpty(sortOrder) ? "PA desc" : "";
            ViewBag.MPSortParm = sortOrder == "MP" ? "MP desc" : "MP asc";
            ViewBag.IASortParm = sortOrder == "IA" ? "IA desc" : "IA asc";

            if (Request.HttpMethod == "GET")
            {
                searchString = currentFilter;
            }
            else
            {
                page = 1;
            }
            ViewBag.CurrentFilter = searchString;

            var IAMP = from p in db.iamp_mapping select p;

            if (!String.IsNullOrEmpty(searchString))
            {
                IAMP = IAMP.Where(p => p.PA.ToUpper().Contains(searchString.ToUpper()));
            }

            switch (sortOrder)
            {
                case "Pa desc":
                    IAMP = IAMP.OrderByDescending(p => p.PA);
                    break;
                case "MP desc":
                    IAMP = IAMP.OrderByDescending(p =>p.MAJOR_PROGRAM);
                    break;
                case "MP asc":
                    IAMP = IAMP.OrderBy(p =>p.MAJOR_PROGRAM);
                    break;
                case "IA desc":
                    IAMP = IAMP.OrderByDescending(p => p.INVESTMENT_AREA);
                    break;
                case "IA asc":
                    IAMP = IAMP.OrderBy(p => p.INVESTMENT_AREA);
                    break;
                default:
                    IAMP = IAMP.OrderBy(p => p.PA);
                    break;
            }
            int pageSize = 25;
            int pageNumber = (page ?? 1);

            return View(IAMP.ToPagedList(pageNumber, pageSize));
        }

        //
        // GET: /Pa/Details/5

        public ActionResult Details(int id)
        {
            return View();
        }

        //
        // GET: /Pa/Create

        public ActionResult Create()
        {
            return View();
        }

        //
        // POST: /Pa/Create

        [HttpPost]
        public ActionResult Create(iamp_mapping IAMP)
        {
            try
            {
                using (var db = new PaEntities())
                {
                    db.iamp_mapping.Add(IAMP);
                    db.SaveChanges();
                }

                return RedirectToAction("Index");
            }
            catch
            {
                return View();
            }
        }

        //
        // GET: /Pa/Edit/5

        public ActionResult Edit(string id)
        {

            using (var db = new PaEntities())
            {

                return View(db.iamp_mapping.Find(id));
            }
        }

        //
        // POST: /Pa/Edit/5

        [HttpPost]
        public ActionResult Edit(string id, iamp_mapping IAMP)
        {
            try
            {
                using (var db = new PaEntities())
                {
                    db.Entry(IAMP).State = EntityState.Modified;
                    db.SaveChanges();
                    return RedirectToAction("");
                }
            }
            catch
            {
                return View();
            }
        }

        //
        // GET: /Pa/Delete/5

        public ActionResult Delete(string id)
        {
            using (var db = new PaEntities())
            {

                return View(db.iamp_mapping.Find(id));
            }
        }

        //
        // POST: /Pa/Delete/5

        [HttpPost]
        public ActionResult Delete(string id, iamp_mapping IAMP)
        {
            try
            {
                using (var db = new PaEntities())
                {
                    var vIAMP = db.iamp_mapping.Find(id);
                    db.Entry(vIAMP).State = EntityState.Deleted;
                    db.SaveChanges();
                    return RedirectToAction("Index");
                }

            }
            catch (Exception e)
            {
                throw (e);
                //return View();
            }
        }
        public ActionResult GenerateExcel1()
        {
            using (var db = new PaEntities())
            {
                return this.Excel(db, db.iamp_mapping, "data.xls");
            }
        }

    }
} 
```

## ExcelResult.cs

```
using System;
using System.Web.Mvc;
using System.Data.Linq;
using System.Collections;
using System.IO;
using System.Web.UI.WebControls;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Drawing;

namespace DBFirstMVC
{
    public class ExcelResult : ActionResult
    {
        private DataContext _dataContext;
        private string _fileName;
        private IQueryable _rows;
        private string[] _headers = null;

        private TableStyle _tableStyle;
        private TableItemStyle _headerStyle;
        private TableItemStyle _itemStyle;

        public string FileName
        {
            get { return _fileName; }
        }

        public IQueryable Rows
        {
            get { return _rows; }
        }

        public ExcelResult(DataContext dataContext, IQueryable rows, string fileName)
            : this(dataContext, rows, fileName, null, null, null, null)
        {
        }

        public ExcelResult(DataContext dataContext, string fileName, IQueryable rows, string[] headers)
            : this(dataContext, rows, fileName, headers, null, null, null)
        {
        }

        public ExcelResult(DataContext dataContext, IQueryable rows, string fileName, string[] headers, TableStyle tableStyle, TableItemStyle headerStyle, TableItemStyle itemStyle)
        {
            _dataContext = dataContext;
            _rows = rows;
            _fileName = fileName;
            _headers = headers;
            _tableStyle = tableStyle;
            _headerStyle = headerStyle;
            _itemStyle = itemStyle;

            // provide defaults
            if (_tableStyle == null)
            {
                _tableStyle = new TableStyle();
                _tableStyle.BorderStyle = BorderStyle.Solid;
                _tableStyle.BorderColor = Color.Black;
                _tableStyle.BorderWidth = Unit.Parse("2px");
            }
            if (_headerStyle == null)
            {
                _headerStyle = new TableItemStyle();
                _headerStyle.BackColor = Color.LightGray;
            }
        }

        public override void ExecuteResult(ControllerContext context)
        {
            // Create HtmlTextWriter
            StringWriter sw = new StringWriter();
            HtmlTextWriter tw = new HtmlTextWriter(sw);

            // Build HTML Table from Items
            if (_tableStyle != null)
                _tableStyle.AddAttributesToRender(tw);
            tw.RenderBeginTag(HtmlTextWriterTag.Table);

            // Generate headers from table
            if (_headers == null)
            {
                _headers = _dataContext.Mapping.GetMetaType(_rows.ElementType).PersistentDataMembers.Select(m => m.Name).ToArray();
            }

            // Create Header Row
            tw.RenderBeginTag(HtmlTextWriterTag.Thead);
            foreach (String header in _headers)
            {
                if (_headerStyle != null)
                    _headerStyle.AddAttributesToRender(tw);
                tw.RenderBeginTag(HtmlTextWriterTag.Th);
                tw.Write(header);
                tw.RenderEndTag();
            }
            tw.RenderEndTag();

            // Create Data Rows
            tw.RenderBeginTag(HtmlTextWriterTag.Tbody);
            foreach (Object row in _rows)
            {
                tw.RenderBeginTag(HtmlTextWriterTag.Tr);
                foreach (string header in _headers)
                {
                    string strValue = row.GetType().GetProperty(header).GetValue(row, null).ToString();
                    strValue = ReplaceSpecialCharacters(strValue);
                    if (_itemStyle != null)
                        _itemStyle.AddAttributesToRender(tw);
                    tw.RenderBeginTag(HtmlTextWriterTag.Td);
                    tw.Write(HttpUtility.HtmlEncode(strValue));
                    tw.RenderEndTag();
                }
                tw.RenderEndTag();
            }
            tw.RenderEndTag(); // tbody

            tw.RenderEndTag(); // table
            WriteFile(_fileName, "application/ms-excel", sw.ToString());
        }

        private static string ReplaceSpecialCharacters(string value)
        {
            value = value.Replace("’", "'");
            value = value.Replace("“", "\"");
            value = value.Replace("”", "\"");
            value = value.Replace("–", "-");
            value = value.Replace("…", "...");
            return value;
        }

        private static void WriteFile(string fileName, string contentType, string content)
        {
            HttpContext context = HttpContext.Current;
            context.Response.Clear();
            context.Response.AddHeader("content-disposition", "attachment;filename=" + fileName);
            context.Response.Charset = "";
            context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
            context.Response.ContentType = contentType;
            context.Response.Write(content);
            context.Response.End();
        }
    }
} 
```

## ExcelControllerExtensions

```
using System;
using System.Web.Mvc;
using System.Data.Linq;
using System.Collections;
using System.Web.UI.WebControls;
using System.Linq;

namespace DBFirstMVC.CustomActionResults
{
   public static class ExcelControllerExtensions
    {

        public static ActionResult Excel
        (
            this Controller controller,
            DataContext dataContext,
            IQueryable rows,
            string fileName
        )
        {
            return new ExcelResult(dataContext, rows, fileName, null, null, null, null);
        }

        public static ActionResult Excel
        (
            this Controller controller,
            DataContext dataContext,
            IQueryable rows,
            string fileName,
            string[] headers
        )
        {
            return new ExcelResult(dataContext, rows, fileName, headers, null, null, null);
        }

        public static ActionResult Excel
        (
            this Controller controller,
            DataContext dataContext,
            IQueryable rows,
            string fileName,
            string[] headers,
            TableStyle tableStyle,
            TableItemStyle headerStyle,
            TableItemStyle itemStyle
        )
        {
            return new ExcelResult(dataContext, rows, fileName, headers, tableStyle, headerStyle, itemStyle);
        }

    }
} 
```

## 模型1.context.cs

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;

namespace DBFirstMVC.Models
{
    public partial class PaEntities : DbContext
    {
        public PaEntities()
            : base("name=PaEntities")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            throw new UnintentionalCodeFirstException();
        }

        public DbSet<iamp_mapping> iamp_mapping { get; set; }
        public DbSet<pa_mapping> pa_mapping { get; set; }
    }
} 
```

## iamp_mapping.cs

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Collections.Generic;

namespace DBFirstMVC.Models
{
    public partial class iamp_mapping
    {
        public string PA { get; set; }
        public string MAJOR_PROGRAM { get; set; }
        public string INVESTMENT_AREA { get; set; }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:08:06.193

错误的原因就在消息中：`cannot convert from 'DBFirstMVC.Models.PaEntities' to 'System.Data.Linq.DataContext`. 这意味着您的`PaEntities`类型无法转换为`System.Data.Linq.DataContext`，因此您的`Excel`扩展方法的签名都不匹配您传递的参数。

你是什​​么`PaEntities`类型的？它继承自`System.Data.Linq.DataContext`?

# javascript - 关于内容传递的想法。需要帮助

> ID：10001681
> 
> 赞同：1
> 
> 时间：2012-04-03T21:28:22.223
> 
> 标签：javascript, ajax, html, innerhtml, ecmascript-5

**核心问题**

我需要帮助提出一个概念来实现我的目标。我无法想出如何使用我选择的方法正确导航 DOM 的想法。

* * *

**目标**

你应该先知道我在做什么：

我使用 ajax 将 HTML 内容调用到`<section>`模板的元素中。然后我从这些 HTML 内容中调用一个`class="pageNav"`标记元素，该元素包含它的子导航并将其复制到`id="subNav"`位于主模板中的一个。当从 onStateChange 事件调用新内容时，我会这样做：

```
function subNavContent (  ) {  
    var navContent = document.getElementsByClassName('pageNav')[0]; 
    document.getElementById('subNav').innerHTML = navContent.innerHTML;
} 
```

* * *

现在我这样做的问题是我必须分配正确的数组值来实现这一点：

```
// i is the current content pages sub navigation
navContent = document.getElementsByClassName('pageNav')[i] 
```

更清楚地说，`class="pageNav"`仅当用户调用页面内容时才将其加载到 DOM 中，这就是指定`navContent[i]`位置的内容。所以这是我的困境。

示例：主页是加载`contentNav[0]`位置。联系人接下来由用户加载，这将`contentNav[1]`是`class="pageNav"`.

* * *

**真正的问题？**

是否有某种方法可以在页面加载到 DOM 时传递页面的数组值，就像在我的示例中一样？

我可以`class="pageNav"`在复制后从 DOM 中删除内容以将数组值重置`class="pageNav"`为`navContent[0]`在为下一页运行时吗？

* * *

**我的想法的进一步努力** 我一直在玩弄这个想法，但没有成功。我的想法是在`class="pageNav"`传输后从 DOM 中删除该内容，如下所示：

```
function subNavClear ( ) {
    var wrap = document.getElementById('contentBody');
    var nav = document.getElementsByClassName('pageNav')[0];
    wrap.removeChild(nav);
} 
```

因此生成的函数将按以下顺序启动：

```
subNavContent (  );
    subNavClear ( ); 
```

我认为这将使我不必担心`contentNav[0]`. 我会认为，因为我在创建和复制它之后从 DOM 中删除了它，所以下一个要加载的将被分配`contentNav[0]`。

如果您喜欢，请看一看：[The Mind Company](http://www.themindspot.com)。

* * *

**每个请求**的片段 此代码按说明执行。

html:

```
<body>
<!-- Header Areas: (Constent visual)--> 
<header>
    <div id="headTopRow">
        <div id="headerElement">  

            <nav id="subNav" class="aniSubNavOpen drop-shadow lifted">
            </nav>

        </div>
    </div>

</header>

<!-- Content Areas: (Variable visual)-->
<div id="contentBody">
    <br>
    <section class="aniDown" id="homePage">
        <script>checkPage ( 'homePage', 'home.html', 'main');</script>
    </section>
    <section class="aniDown" id="aboutPage"></section>
    <section class="aniDown" id="lessonsPage"></section>
    <section class="aniDown" id="productPage"></section>
    <section class="aniDown" id="contactPage"></section>
</div>

<!-- Footer Area: (Constant visual)-->
<footer>
</footer>
</body> 
```

过渡函数：

```
function subNavContent (  ) {  
    var navContent = document.getElementsByClassName('pageNav')[0]; 
    document.getElementById('subNav').innerHTML = navContent.innerHTML;
}

    function sectionAssure( classID, url ) {        
            var tmp = '';
            var sel = document.getElementsByTagName('section');

            for (var i=0; i<sel.length; i++){
                if (sel[i].id == classID) { 
                    tmp = 'block'; 
                } 
                else {
                    tmp = 'none'; 
                }
                sel[i].style.display = tmp;  
            }  
    }

    function loadContent ( classID, url, type ) {   
        var xmlhttp;

        if ( window.XMLHttpRequest ) {
            xmlhttp = new XMLHttpRequest();

            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200 ) {
                    document.getElementById( classID ).innerHTML=xmlhttp.responseText;
                    subNavContent ( );
                }
            };

        xmlhttp.open( "GET", url, true );             
        xmlhttp.send( );  
        }  
        return;  
    }

    function checkPage ( classID, url ) {
        sectionAssure ( classID, url );     
        loadContent ( classID, url );  
    } 
```

**解决方案！！**

感谢@Dennis 给了我这个想法。虽然我用了不同的方法，但原理是一样的。

```
function subNavContent ( classID ) {  
    var sec = document.getElementById( classID );
    document.getElementById('subNav').innerHTML = sec.getElementsByClassName('pageNav')[0].innerHTML;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:18:51.473

处理页面状态并检测应该可见的内容的一个好方法是 html5 历史 API。它还具有在内容更改时更新 url 的优点（我在“心灵公司”中缺少的东西）。查看 Mozilla 页面或 google 一些示例。[https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T03:09:41.580

您可以使用一个类，而不是手动设置`display:block`and 。`display:none`选择部分，`.active`然后从那里选择 pageNav：

```
var navContent = document.getElementsByClassName('active')[0].getElementsByClassName('pageNav')[0] 
```

CSS

```
#contentBody > section { display:none; }
#contentBody > section.active { display: block; } 
```

# wpf - 依赖属性在控件模板中的几何图形中不起作用

> ID：10001686
> 
> 赞同：1
> 
> 时间：2012-04-03T21:28:46.433
> 
> 标签：wpf, geometry, dependency-properties

我有一个 DepencencyProperty（一个布尔值），可以在椭圆上正常工作，但不能在 ArcSegment 上工作。我在做一些不可能的事情吗？这是 xaml 的一部分。**Origin**和**LargeArc**的 TemplateBindings在几何中都不起作用。但是**LargeArc** DependencyProperty*确实*在椭圆中工作，所以我的 DependencyProperty 似乎设置正确。

```
 <ControlTemplate TargetType="{x:Type nodes:TestCircle}">
     <Canvas Background="AliceBlue">
         <Ellipse Height="10" Width="10" Fill="Yellow" Visibility="{TemplateBinding LargeArc, Converter={StaticResource BoolToVisConverter}}"/>
         <Path Canvas.Left="0" Canvas.Top="0" Stroke="Black" StrokeThickness="3">
             <Path.Data>
                 <GeometryGroup>
                     <PathGeometry>
                         <PathFigure IsClosed="True" StartPoint="{TemplateBinding Origin}">
                             <LineSegment Point="150,100" />
                             <ArcSegment Point="140,150" IsLargeArc="{TemplateBinding LargeArc}" Size="50,50" SweepDirection="Clockwise"/>
                         </PathFigure>
                     </PathGeometry>
                 </GeometryGroup>
             </Path.Data>
         </Path>
     </Canvas>
 </ControlTemplate> 
```

我正在尝试构建的是一个（某种）饼形用户控件，其中饼的形状由 DependencyProperties 定义，实际使用的图形位于模板中，因此可以替换或自定义它们。换句话说：我希望代码隐藏是无视觉的（我认为这是很好的分离）。

**解决方案--------------**（我还不能回答我自己的问题）

我自己找到了答案，这对遇到相同问题的其他人很有用。这就是几何上的 TemplateBinding 失败的原因：

**TemplateBinding 仅在将 DependencyProperty 绑定到另一个 DependencyProperty 时才有效。**

以下文章让我走上了正轨：http: [//blogs.msdn.com/b/liviuc/archive/2009/12/14/wpf-templatebinding-vs-relativesource-templatedparent.aspx](http://blogs.msdn.com/b/liviuc/archive/2009/12/14/wpf-templatebinding-vs-relativesource-templatedparent.aspx)

ArcSegment 属性不是 DependencyProperties。因此，解决上述问题的方法是更换

```
<ArcSegment Point="140,150" IsLargeArc="{TemplateBinding LargeArc}" 
```

和

```
<ArcSegment Point="140,150" IsLargeArc="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=LargeArc}" 
```

Colin，您在几何中使用“普通”绑定的工作示例使我走上了正确的轨道。顺便说一句，喜欢您的博文中的信息图表和 UserControl 的构造。而且，嘿，关于代码片段的快速提示，尤其是关于 DP 属性以及将这些 DP 分离到部分类文件中的技巧是纯金！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:41:33.757

那*应该*行得通。虽然我看不到一个直接的问题，但我只是想指出我写了一篇文章，其中包括一个饼形的 Silverlight 实现：

[使用 Silverlight 绘制循环关系图](http://www.codeproject.com/Articles/342715/Plotting-Circular-Relationship-Graphs-with-Silverl)

此形状的 XAML 如下所示：

```
<Style TargetType="local:NodeSegment">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="local:NodeSegment"> 
          <Path Stroke="{TemplateBinding Stroke}"
                StrokeThickness="{TemplateBinding StrokeThickness}"
                Fill="{TemplateBinding Background}"
                DataContext="{Binding ViewModel}"
                x:Name="segmentShape">
            <Path.Data>
              <PathGeometry>
                <PathFigure StartPoint="{Binding Path=S1}"
                            IsClosed="True">
                  <ArcSegment Point="{Binding Path=S2}"
                              SweepDirection="Counterclockwise"
                              IsLargeArc="{Binding Path=IsLargeArc}"
                              Size="{Binding Path=OuterSize}"/>
                  <LineSegment Point="{Binding Path=S3}"/>
                  <ArcSegment Point="{Binding Path=S4}"
                              SweepDirection="Clockwise"
                              IsLargeArc="{Binding Path=IsLargeArc}"
                              Size="{Binding Path=InnerSize}"/>
                </PathFigure>
              </PathGeometry>
            </Path.Data>
          </Path>                      
        </Canvas>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

# php - php symfony2 login_check 验证码

> ID：10001693
> 
> 赞同：1
> 
> 时间：2012-04-03T21:29:13.930
> 
> 标签：php

我的 php/symfony2 项目中的身份验证和授权工作正常。现在我正在尝试在用户创建和登录时添加 recaptcha。我让它在创建用户时工作，但登录帖子到 login_check 并忽略验证码。如何在登录时添加验证码？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T07:06:08.480

[这](https://github.com/excelwebzone/EWZRecaptchaBundle)是一个将为您生成验证码的捆绑包。

# javascript - 如何覆盖 javascript 的 cloneNode？

> ID：10001694
> 
> 赞同：1
> 
> 时间：2012-04-03T21:29:21.877
> 
> 标签：javascript, prototype

这就是我到目前为止所拥有的：http: [//jsfiddle.net/beCVL/5/](http://jsfiddle.net/beCVL/5/)

这就是我试图覆盖默认克隆节点的方式： Object.defineProperty(Object.prototype, "cloneNode", { get: cloneNode2, set: cloneNode2 });

但它不起作用，所以，我认为 Object.prototype 没有 cloneNode，但 Element.prototype 也没有。

那么，假设我的方法是正确的，我需要使用哪个类来覆盖 cloneNode？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:35:59.750

尝试使用：

```
Node.prototype.cloneNode = cloneNode2; 
```

`Object.defineProperty`不用于此目的。这是一个使用它的例子：

```
var o = {};
Object.defineProperty(o, 'blah', {
    'get': function () { return 'asdf'; },
    'set': function (x) { alert(x); }
});

alert(o.blah); // alerts 'asdf'
o.blah = 'fdsa'; // alerts 'fdsa' 
```

显然，这只适用于 Chrome。

要解决实际问题，只需将 RGB 代码替换为其等效的十六进制代码就足够简单了。

```
function decToHex(a) {
    return ('00' + (+a).toString(16)).substr(-2);
}
function replaceRGB(str) {
    return str.replace(/rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)/, function (_, r, g, b) {
        return "#" + decToHex(r) + decToHex(g) + decToHex(b);
    });
}
replaceRGB("color: rgb(255, 0, 0)") // "color: #ff0000" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:39:21.857

[这是https://developer.mozilla.org/En/DOM/Node.cloneNode](https://developer.mozilla.org/En/DOM/Node.cloneNode)的属性`Node.prototype`

`Node.prototype.cloneNode = function() {}`

但是，修改内置对象可能会让您在未来感到痛苦。如果可能，您应该创建一个不同的函数并使用它，这样，使用的现有代码`cloneNode`不会中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:53:26.827

这一系列的 fiddles 正在进行中，但它重新实现了 cloneNode 的功能。[http://jsfiddle.net/beCVL/19/](http://jsfiddle.net/beCVL/19/)

截至美国东部时间 4 月 4 日上午 10:53，它需要与 IE 一起使用，因为 IE 没有 Node 对象。

请注意，在 IE 中，原型函数不能被覆盖。因此，所有 cloneNode 实例都必须替换为确定要使用哪个版本的 cloneNode 的函数。

# c# - WPF计时器倒计时

> ID：10001698
> 
> 赞同：1
> 
> 时间：2012-04-03T21:29:45.653
> 
> 标签：c#, wpf, timer, countdown

我想知道 WPF 中的计时器。

我基本上知道的是如何让一个简单的倒计时计时器（标签）像这样的代码倒计时：

```
private void buttonStartOne_Click(object sender, RoutedEventArgs e)
{
    counterOne = new DispatcherTimer();
    counterOne.Tick += new EventHandler(counterOne_Tick);
    counterOne.Interval = new TimeSpan(0, 0, 1);

    counterOneTime = 10;
    counterOne.Start();
}

private void counterOne_Tick(object sender, EventArgs e)
{
// code goes here

    if (counterOneTime > 0)
    {
        counterOneTime--;
        labelCounterOne.Content = counterOneTime + "s";
    }
    else
        counterOne.Stop();
} 
```

在上面的示例代码中，倒计时只有 10 秒。我想要的，但不知道我应该如何使它成为：HH：mm：ss，而不是让它倒计时。你会用 3 个单独的计数器和标签（每个时间单位一个）来做到这一点吗？或者应该有什么更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:33:55.167

您可以使用[ToString(string format)](http://msdn.microsoft.com/en-us/library/1ecy8h51.aspx)方法将您`Timespan`的字符串转换为字符串。在标签上设置结果字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:36:46.803

```
public class TimeController
{
    private static readonly TimeSpan TimeSpan = new TimeSpan(0, 0, 1);
    private static int _time;

    protected static readonly DispatcherTimer Timer = new DispatcherTimer();
    protected static readonly DispatcherTimer BeeperTimer = new DispatcherTimer();
    protected static readonly Stopwatch StopWatch = new Stopwatch();
    protected static Label TimerLabel;
    protected static Button StartButton;

    internal static int Time { get { return _time; } set { _time = value; ExtractAndUpdate(); } }
    internal static bool Countdown { get; set; }

    /// <summary>
    /// Static constructor
    /// </summary>
    static TimeController()
    {
        BeeperTimer.Interval = TimeSpan;
        BeeperTimer.Tick += BeeperTick;
        Timer.Interval = TimeSpan;
        Timer.Tick += TimerTick;
    }

    /// <summary>
    /// Timer tick event method
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private static void TimerTick(object sender, EventArgs e)
    {
        if (Countdown)
            if (Time > 0)
            {
                ExtractAndUpdate();
                Time -= 1;
            }
            else
            {
                StopRunning();
                BeeperTimer.Start();
            }
        else
            ExtractAndUpdate();
    }

    /// <summary>
    /// Start timer and stopwatch
    /// </summary>
    protected static void StartRunning()
    {
        Timer.Start();
        StopWatch.Start();
        StartButton.Content = Labels.Pause;
    }

    /// <summary>
    /// Stop timer and stopwatch
    /// </summary>
    protected static void StopRunning()
    {
        Timer.Stop();
        StopWatch.Stop();
        StartButton.Content = Labels.Start;
    }

    /// <summary>
    /// Beeper event method and label blinking
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private static void BeeperTick(object sender, EventArgs e)
    {
        TimerLabel.Visibility = TimerLabel.Visibility.Equals(Visibility.Hidden) ? Visibility.Visible : Visibility.Hidden;
        Console.Beep();
    }

    /// <summary>
    /// Extract time and update label
    /// </summary>
    private static void ExtractAndUpdate()
    {
        var elapsed = Countdown ? ConvertToTimeSpan() : StopWatch.Elapsed;
        UpdateTimeLabel(elapsed);
    }

    /// <summary>
    /// Convert int to TimeSpan
    /// </summary>
    /// <returns></returns>
    internal static TimeSpan ConvertToTimeSpan()
    {
        var hours = Time / 3600;
        var minutes = (Time % 3600) / 60;
        var seconds = Time % 60;
        return new TimeSpan(hours, minutes, seconds);
    }

    /// <summary>
    /// Update label with data and change color
    /// </summary>
    /// <param name="elapsed"></param>
    protected static void UpdateTimeLabel(TimeSpan elapsed)
    {
        TimerLabel.Foreground = Brushes.Black;
        var time = String.Format(CultureInfo.CurrentCulture, "{0:00h} {1:00m} {2:00s}", elapsed.Hours, elapsed.Minutes, elapsed.Seconds);
        if (Countdown && elapsed.TotalMinutes < 1)
            TimerLabel.Foreground = Brushes.Red;
        TimerLabel.Content = time;
    }
} 
```

# ajax - 动态构建大型复杂视图模型

> ID：10001701
> 
> 赞同：0
> 
> 时间：2012-04-03T21:29:56.683
> 
> 标签：ajax, asp.net-mvc-3, viewmodel, partial-views

我正在从用户那里收集一些数据。数据很复杂，由多达 40 个（少至 18 个）数据字段组成。数据录入的路径也很复杂，会有多个子路径。我正在使用部分视图、Ajax 和视图模型来完成此任务。页面从不刷新。这个过程涉及在页面上放置大量动态内容，以及一系列不断发展的视图模型，这些模型随着路径的推移而包含越来越多的数据。我最终会得到大约 20 个局部视图和 20 个视图模型。

是否有更标准化的方式来执行此操作，同时仍避免页面刷新（例如不使用这么多视图模型）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:42:26.223

不，没有动态执行此操作的标准化方法。

# assert - 验证：结合正确性陈述

> ID：10001704
> 
> 赞同：1
> 
> 时间：2012-04-03T21:30:02.403
> 
> 标签：assert, verification, proof, correctness

问题是：

```
 P1 {C} Q1
-------------------------
   P1 && P2 {C} Q1||Q2 
```

这个规则有效吗？

我将如何处理这样的事情？我所能想到的就是试图找到一个错误的例子。

我一直在尝试想出它，以便 P1 && P2 的组合使 Q1 和 Q2 都为假，但我想不出任何一个。所以我倾向于这是有效的，但我不知道去哪里证明它......这门课的文字绝对是垃圾，我在网上找不到任何资源来组合正确性陈述......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:27:05.713

我假设这些是 Hoare 三元组，通常表示为`{P} C {Q}`; 我也使用[维基百科](http://en.wikipedia.org/wiki/Hoare_logic)作为参考。

所以你的规则：

```
 {P1} C {Q1}
-----------------------
{P1 && P2} C {Q1 || Q2} 
```

已验证！

直观上，如果您理解逻辑，就很清楚了：

*   `{P1} C {Q1}`意思是：无论何时`P1`保持，`Q1`执行命令后将保持`C`。
*   你知道，如果`P1 && P2`持有，`P1`持有。
*   你知道，如果`Q1`持有，`Q1 || Q2`持有。

您可以将这些语句拼凑在一起，看看为什么您的规则必须有效：`P1 && P2`蕴含`P1`，所以当您执行时`C`，您会得到假设`Q1`，这意味着`Q1 || Q2`。

因此`{P1 && P2} C {Q1 || Q2}`，无论您何时假设`{P1} C {Q1}`，这正是您的规则所规定的。

正式地，您可以使用以下规则（摘自维基百科）：

**后果规则**

```
P' -> P, {P} C {Q}, Q -> Q'
---------------------------
        {P'} C {Q'} 
```

您只需设置`P'`as `P1 && P2`，`P`as `P1`，`Q`as`Q1`和 finally `Q'`as `Q1 || Q2`。

# android - 出现错误：此进程的外部分配太大

> ID：10001706
> 
> 赞同：1
> 
> 时间：2012-04-03T21:30:07.443
> 
> 标签：android, bitmap

我正在尝试实现下面的代码，将图像路径转换为位图以显示在我的活动中。我收到以下错误。我尝试了一堆不同的解决方案，但没有一个有效

[将图像加载到 Bitmap 对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)

[Android：将大型位图文件调整为缩放的输出文件](https://stackoverflow.com/questions/3331527/android-resize-a-large-bitmap-file-to-scaled-output-file)

[OutOfMemoryError：位图大小超出 VM 预算：- Android](https://stackoverflow.com/questions/2928002/outofmemoryerror-bitmap-size-exceeds-vm-budget-android)

错误：E/dalvikvm-heap(19252)：12742656 字节的外部分配对于此进程来说太大。

```
for(int i = 0; i < numItems; i++) {

     File imgFile = new  File(photoPaths.get(i));

        if(imgFile.exists())
        {

             images[i] = BitmapFactory.decodeFile(imgFile.getAbsolutePath());

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:49:22.957

您可以考虑以一种更及时的方法加载它们，或者使用`inSampleSize`位图工厂的选项（即，您可以将 a 传递`BitmapFactory.Options`给工厂，并`inSampleSize`设置为理想情况下的 2 的幂）。还要确保设置为`inPurgeable`true。

`MediaStore`如果您从图片中提取这些图像`ContentProvider`，您还可以使用[缩略图](http://developer.android.com/reference/android/provider/MediaStore.Images.Thumbnails.html)。

也许您可以告诉我们更多有关您的用例的信息，以便我们提供更好的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:36:50.987

您正在尝试加载多个大位图，其中至少有一个约为 12MB。它们太大了。您发布的解决方案确实有效。将您的位图调整为更小的尺寸，尤其是当您只是在屏幕上显示位图时。

# jquery - jquery随机颜色

> ID：10001708
> 
> 赞同：0
> 
> 时间：2012-04-03T21:30:45.153
> 
> 标签：jquery

嗨，我试图让这个脚本在 li 向上滚动时一个接一个地显示随机颜色，但到目前为止我已经这样做了，但它并不平滑，它在重新启动时会发生变化，所以你不会得到平滑的效果，它会改变颜色两次任何帮助将非常感谢。

```
 $("#carousel ul").animate({marginTop:-100},2000,function(){

    function pad(s,i,c,r){
    i=i+1-s.length;
    if(i<1)return s;
    c=new Array(i).join(c||" ");
    return r?s+c:c+s;
    };

    hue  = "#"+pad((Math.random()*0x1000000<<0).toString(16),6,"0");
    hue2 = "#"+pad((Math.random()*0x1000000<<0).toString(16),6,"0");
    hue3 = "#"+pad((Math.random()*0x1000000<<0).toString(16),6,"0");

    $(this).find("li:last").after($(this).find("li:first"));
    $('#div1').css({backgroundColor: hue});
    $('#div2').css({backgroundColor: hue2}); 
    $('#div3').css({backgroundColor: hue3});

    $(this).css({marginTop:0});
    })  
    },1000);  
}); 
```

我的例子可以在这里找到[http://swipedstudio.com/jtoy/](http://swipedstudio.com/jtoy/) 在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T19:32:08.987

工作代码：

```
var t = setInterval(function(){ 

 $("#carousel ul").animate({marginTop:-100},2000,function(){

    function pad(s,i,c,r){
    i=i+1-s.length;
    if(i<1)return s;
    c=new Array(i).join(c||" ");
    return r?s+c:c+s;
    };

    hue  = "#"+pad((Math.random()*0x1000000<<0).toString(16),6,"0");

    $(this).find("li:last div").css({backgroundColor: hue});
    $(this).find("li:last").after($(this).find("li:first"));

    $(this).css({marginTop:0});
    })  
    },1000); 
```

问题：

*   当您真的只想更改列表中的最后一个时，您在每个间隔上更改每个 div 的颜色
*   当您更改最后一个 div 的颜色时，您需要使用它来选择它，`$(li:last div)`因为三个 div 在列表中循环。当您专门选择 div1、div2 或 div3 时，它可能位于列表中的任何位置
*   `$(li:last div)`需要在`after()`语句之前进行颜色更改（至少使用选择器）。您的原始代码更改了 div 的顺序，然后更改了颜色

# javascript - 使用谷歌地图 api v3 的地名坐标

> ID：10001710
> 
> 赞同：0
> 
> 时间：2012-04-03T21:30:51.143
> 
> 标签：javascript, google-maps, google-maps-api-3, geocoding, reverse-geocoding

我是谷歌地图的新手，我使用 html5 来获取用户的纬度和经度坐标，但我想获取用户最近的地名，以便他可以选择，（如果我们可以点击，为什么要输入？）我用谷歌搜索和搜索，但是不能做任何事情。我今天写了这些脚本....

```
<!DOCTYPE html>
<html>
<body>
<p id="demo">Click the button to get your position:</p>
<button onclick="getLocation()">Try It</button>
<div id="mapholder"></div>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=true">
//only a v3 api library
</script>
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script>

var x=document.getElementById("demo");
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition,showError);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }

function showPosition(position)
  {
  lat=position.coords.latitude;
  lon=position.coords.longitude;
  latlon=new google.maps.LatLng(lat, lon)

  mapholder=document.getElementById('mapholder')
  mapholder.style.height='250px';
  mapholder.style.width='500px';

  var myOptions={
  center:latlon,zoom:18,
  mapTypeId:google.maps.MapTypeId.ROADMAP,
  mapTypeControl:false,
  navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}
  };
  var map=new google.maps.Map(document.getElementById("mapholder"),myOptions);
  var marker=new google.maps.Marker({position:latlon,map:map,title:"Some where here"});

var geocoder = new google.maps.Geocoder();
geocoder.geocode({latLng:latlon},function(results, status) {

          if (status == google.maps.GeocoderStatus.OK) {
            if (results[0]) {
              infoWindow.setContent(results[0].formatted_address);
              infoWindow.setPosition(event.latLng);
              infoWindow.open(map);
            }
          }
        });
  }
function showError(error)
  {
  switch(error.code) 
    {
    case error.PERMISSION_DENIED:
      x.innerHTML="User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      x.innerHTML="Location information is unavailable."
      break;
    case error.TIMEOUT:
      x.innerHTML="The request to get user location timed out."
      break;
    case error.UNKNOWN_ERROR:
      x.innerHTML="An unknown error occurred."
      break;
    }
  }
</script>
</body>
</html> 
```

到目前为止我已经完成了所有这些，现在我需要做的是，我想获得由这两个变量给出的位置的地名：`lat,lon`这样我就可以找到地名，有人可以帮我吗？我发现这个链接可能会有所帮助，但我无法弄清楚，我不需要地图中的地点信息，但我想在变量中获取地名

在此先感谢..如果问题不清楚，请提及我，我会尝试更清楚，，，我为我的语言道歉....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:57:23.987

你已经得到了你需要的所有东西，一个地理编码结果。（**geocode()** -callback中的**结果）**

 **这些结果（一个数组）由不同的项目组成，其中一个应该有一个成员**类型**（也是一个数组），其中第二个项目设置为“ **locality** ”，这通常将项目标记为一个城市。当您找到该项目时，该项目的 long_name - 成员将为您提供城市名称。

更多信息：[https ://developers.google.com/maps/documentation/javascript/geocoding?hl=en#GeocodingAddressTypes](https://developers.google.com/maps/documentation/javascript/geocoding?hl=en#GeocodingAddressTypes)

与代码相关的注释：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=true">
//only a v3 api library
</script>
<script src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

您加载了两次 maps-API，因为第一次`<script/>`将加载 maps-API**和**places-library。你最好去掉第二个`<script/>`**

# python - 从烧瓶调用的 sqlite db 只返回变量，而不是值

> ID：10001712
> 
> 赞同：2
> 
> 时间：2012-04-03T21:30:58.490
> 
> 标签：python, html, sqlite, flask

我有一个查询 sqlite 数据库的烧瓶应用程序：

```
@app.route('/<subject_id>')
def subject_id_lookup(subject_id):
    entries = query_db('select visitdt, cvnotes from exam where id = ?',
                        [subject_id], one=True)
    return render_template('show_results.html', entries = entries) 
```

我使用的烧瓶功能与文档基本相同，包括`query_db()`

```
def query_db(query, args=(), one = False):
    """Queries the database and returns a list of dictionaries"""
    cur = g.db.execute(query, args)
    rv = [dict((cur.description[idx][0], value)
        for idx, value in enumerate(row)) for row in cur.fetchall()]
    return (rv[0] if rv else None) if one else rv 
```

最后是我的 show_results.html 文件：

```
{% extends "layout.html" %}
{% block body %}
    <ul class=entries>
        {% for entry in entries %}
        <li><h2>{{ entry }}</h2>
        <br>
        {% else %}
        <li><em>No entry here</em>
        {% endfor %}
    </ul>
    {% endblock %} 
```

查询运行良好，但除了变量名`visitdt`& 之外什么都没有返回`cvnotes`。当我将上面的行更改为 时`<li><h2>{{ entry.cvnotes }}</h2>`，它什么也不返回。如何修改我的查询以显示我的`subject_id_lookup()`函数的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T03:50:09.140

问题是`query_db`根据您指定`one=True`或返回不同的东西`one=False`。

```
>>> query_db(your_query, [some_id], one=True)
{visittd: "a value", cvnotes: "some notes"}

>>> query_db(your_query, [some_id], one=False)
[{visittd: "a value", cvnotes: "some notes"}] # Note the wrapping list 
```

当您枚举字典时，结果是字典中的键 - 当您枚举列表时，结果是列表中的条目。

```
>>> for thing in query_db(your_query, [some_id], one=True):
...    print thing
visitdt
cvnotes

>>> for thing in query_db(your_query, [some_id], one=False):
...    print thing
{visittd: "a value", cvnotes: "some notes"} 
```

如果您想使用相同的模板，并且您知道只有一个返回一个值`id`（或者如果您可以处理多个值），只需`one=True`删除`subject_id_lookup`. `entries`然后将是包含键的一个字典的列表，`visitdt`并且`cvnotes`- 当您在模板中对其进行迭代时，每个条目将是一个结果字典（而不是单个结果字典中的一个键）并且`{{ entry.cvnotes }}`将起作用。

# controller - Kohana 3.2 为具有前缀 URI 的控制器设置路由器属于另一个控制器

> ID：10001714
> 
> 赞同：0
> 
> 时间：2012-04-03T21:31:02.653
> 
> 标签：controller, kohana, router, kohana-orm, kohana-3.2

我在同一目录 APP/controller 中有 2 个控制器 account.php 和 address.php。对于第一个控制器 account.php，我对 URI 使用默认路由器，例如：account/create、account/login、account/logout... 在编写第二个控制器时，我想使用 address.php 的所有 URI 以 account/address 开头/。正如您在此处看到的，我使用与帐户控制器相同的 URI 路由器匹配。

我的第一种方法：

```
// Add new address
Route::set('address', 'account/address/<action>')
        ->defaults(array(
                'controller' => 'address',
                'action'     => 'index',
        )); 
```

我的地址控制器

```
public function before()
{
    parent::before();

    if ( ! Auth::instance()->logged_in())
    {
        // Redirect to a login page (or somewhere else).
        $this->request->redirect('');
    }
}

// nothing here
public function action_index()
{
    $this->request->redirect('');
}

// create account
public function action_create()
{

    // Create an instance of a model
    $profile = new Model_Address();

    // received the POST
    if (isset($_POST) && Valid::not_empty($_POST)) 
    {   

        // // validate the form
        $post = Validation::factory($_POST)
        ->rule('firstname', 'not_empty')
        ->rule('lastname', 'not_empty')
        ->rule('address', 'not_empty')
        ->rule('phone', 'not_empty')
        ->rule('city', 'not_empty')
        ->rule('state', 'not_empty')
        ->rule('zip', 'not_empty')
        ->rule('country', 'not_empty')
        ->rule('primary_email_address', 'email');

        // if the form is valid and the username and password matches
        if ($post->check()) 
        {

            if($profile->create_profile($_POST)) 
            {
                $sent = kohana::message('profile', 'profile_created');
            }

        } else {
            // validation failed, collect the errors
            $errors = $post->errors('address');
        }

    }

    // display
    $this->template->title = 'Create new address';
    $this->template->content = View::factory('address/create')
            ->bind('post', $post)
            ->bind('errors', $errors)
            ->bind('sent', $sent);
} 
```

似乎没问题，但是路由器帐户/地址/创建不起作用。Kohana 为该 URI 抛出 404 消息。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T06:38:44.393

我在我的系统上检查了你的路线，它工作正常，所以我认为错误在其他地方。检查您的控制器类名称是否为`Controller_Address`，还尝试将此路由作为引导程序中的第一个路由，如[文档](http://kohanaframework.org/3.2/guide/kohana/routing)所述：

> 重要的是要了解路由按照添加的顺序进行匹配，一旦 URL 与路由匹配，路由本质上就“停止”了，并且永远不会尝试剩余的路由。因为默认路由几乎匹配任何东西，包括一个空的 url，新路由必须放在它之前。

另一件事，与问题无关 - 你真的应该在你的模型中放置验证。控制器不是它的地方；）

# r - 从 Lmperm 中的 aovp 对象中提取值

> ID：10001716
> 
> 赞同：0
> 
> 时间：2012-04-03T21:31:02.903
> 
> 标签：r, list, extraction

我有以下对象`M`，我需要从中提取`fstatistic`. 它是一个模型生成的函数`summaryC`，一个模型生成的`aovp`函数，两个函数都来自封装`lmPerm`。我尝试了从正常线性模型和函数中提取值的提示，`attr`但没有成功。`extract``getElement`

任何人都可以给我一个提示？

```
> str(M)
List of 2
 $ Error: vegetation: NULL
 $ Error: Within    :List of 11
  ..$ NA           : NULL
  ..$ terms        :Classes 'terms', 'formula' length 3 Temp ~ depth
  .. .. ..- attr(*, "variables")= language list(Temp, depth)
  .. .. ..- attr(*, "factors")= int [1:2, 1] 0 1
  .. .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. .. ..$ : chr [1:2] "Temp" "depth"
  .. .. .. .. ..$ : chr "depth"
  .. .. ..- attr(*, "term.labels")= chr "depth"
  .. .. ..- attr(*, "order")= int 1
  .. .. ..- attr(*, "intercept")= int 1
  .. .. ..- attr(*, "response")= int 1
  .. .. ..- attr(*, ".Environment")=<environment: R_GlobalEnv> 
  ..$ residuals    : Named num [1:498] -46.9 -43.9 -46.9 -38.9 -41.9 ...
  .. ..- attr(*, "names")= chr [1:498] "3" "4" "5" "6" ...
  ..$ coefficients : num [1:4, 1:4] -2.00 -1.00 -1.35e-14 1.00 2.59 ...
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:4] "depth1" "depth2" "depth3" "depth4"
  .. .. ..$ : chr [1:4] "Estimate" "Std. Error" "t value" "Pr(>|t|)"
  ..$ aliased      : Named logi [1:4] FALSE FALSE FALSE FALSE
  .. ..- attr(*, "names")= chr [1:4] "depth1" "depth2" "depth3" "depth4"
  ..$ sigma        : num 29
  ..$ df           : int [1:3] 4 494 4
  ..$ r.squared    : num 0.00239
  ..$ adj.r.squared: num -0.00367
  ..$ **fstatistic**   : Named num [1:3] 0.395 3 494
  .. ..- attr(*, "names")= chr [1:3] "value" "numdf" "dendf"
  ..$ cov.unscaled : num [1:4, 1:4] 0.008 -0.002 -0.002 -0.002 -0.002 ...
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:4] "depth1" "depth2" "depth3" "depth4"
  .. .. ..$ : chr [1:4] "depth1" "depth2" "depth3" "depth4"
  ..- attr(*, "class")= chr "summary.lmp"
   - attr(*, "class")= chr "listof" 
```

那里有一个可重复的例子：

```
Temp=1:100
depth<- rep( c("1","2","3","4","5"), 100)
vegetation=rep( c("1","2"), 50)
df=data.frame(Temp,depth,vegetation)

M=summaryC(aovp(Temp~depth+Error(vegetation),df, perm="")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:37:07.147

正如`str`您的示例的输出所示，`M`是两个列表的列表，第二个包含您想要的内容。因此，通过列表提取可以`[[`解决问题：

```
> M[[2]][["fstatistic"]]
   value    numdf    dendf 
  0.3946   3.0000 494.0000 
```

如果这不是您想要的，请发表评论。

# javascript - 使用 jQuery/Javascript 访问 GET 变量

> ID：10001726
> 
> 赞同：2
> 
> 时间：2012-04-03T21:32:02.263
> 
> 标签：javascript, jquery

我知道以前有人问过这个问题，但是到目前为止发布的所有解决方案我都遇到了麻烦。我有一个如下所示的网址：

```
http://localhost:3000/virgil/1/render_lesson?toggle=view 
```

这是通过 AJAX 进行的 Rails 调用，但这无关紧要。每次我尝试一个应该获取“切换”变量的函数时，当我将它打印到控制台日志时，我会得到“未定义”。我试过这个功能

```
function getUrlVars()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
} 
```

当我打电话时，`console.log(getUrlVars());`我得到`["http://localhost:3000/"]`

但是当我打电话时，`console.log(getUrlVars()["toggle"]);`我只是得到`undefined`

我很感激任何帮助！

编辑：

添加我的代码的相关部分。这是一个 Rails 应用程序，它使用 AJAX 进行调用。

`<%= link_to 'View Lessons', render_lesson_virgil_path(course, :toggle => :view), :remote => true, :class => 'toggle_lesson', :id => "toggle_lesson#{course.id}" %>`

然后在它调用的 javascript 文件中：

```
function $_GET( name ){
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
}

console.log($_GET('toggle')); //This is where it prints the incorrect value to the log, regardless of the function I use.

$("#Course<%= @course.id %>").append('<div id="Lesson<%= @course.id %>" class="render_lesson"></div>');
$("#Lesson<%= @course.id %>").html("<%= escape_javascript(render( :partial => "lesson" )).html_safe  %>"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:34:23.217

这是我用于查询字符串的 JS 函数 - 希望它对您有所帮助。

```
function getParameterByName(name) {
var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:39:18.413

试试这个（我只更改了第 4 行 - “var hashes ...”）：

```
function getUrlVars()
{
    var vars = [], hash;    
    var hashes = window.location.href.valueOf().split('?').slice(1)[0].split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-03T21:56:55.107

我在我的 1 个项目中使用它。

```
function $_GET( name ){
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
} 
```

看起来像 PHP `$_GET['']`...因为我喜欢 PHP :D

使用示例：

网址：`index.php?page=newone&id=4&cat=15`

Javascript：`alert($_GET('page')); // newone`

# linux - 如何禁止系统调用，GNU/Linux

> ID：10001727
> 
> 赞同：7
> 
> 时间：2012-04-03T21:32:27.710
> 
> 标签：linux, system-calls

我目前正在研究类似 ACM 的公共编程竞赛系统的后端。在这样的系统中，任何用户都可以提交一个代码源，该源代码将被自动编译和运行（这意味着不进行人眼预审核），以尝试解决一些计算问题。

后端是一个 GNU/Linux 专用机器，将为每个参赛者创建一个用户，所有这些用户都是用户组的一部分。任何特定用户发送的源将存储在用户的主目录中，然后编译并执行以针对各种测试用例进行验证。

我想要的是禁止对源代码使用 Linux 系统调用。这是因为问题需要独立于平台的解决方案，而启用不安全源的系统调用是潜在的安全漏洞。这样的源可以成功地放在 FS 中，甚至可以编译，但永远不会运行。每当发送包含系统调用的源时，我也希望得到通知。

到目前为止，我看到可以放置此类检查器的以下位置：

*   **前端/预编译分析**- 源代码已在系统中检查，但尚未编译。针对系统调用名称的简单文本检查器。平台相关、编译器无关、语言相关的解决方案。
*   **编译器补丁**- 遇到系统调用时使 GCC（或工具链中包含的任何其他编译器）崩溃。依赖于平台、依赖于编译器、独立于语言的解决方案（如果我们将检查器放置“足够远”）。兼容性也可能会丢失。事实上，我最不喜欢这种选择。
*   **运行时检查器**- 每当从进程调用系统调用时，终止该进程并报告。此解决方案独立于编译器和语言，但取决于平台 - 我对此表示同意，因为我将在短期和中期将后端部署在类似平台上。

*所以问题是：GNU/Linux 是否为管理员提供了禁止用户组、用户或特定进程使用系统调用的机会？*它可能是一个安全策略或一个轻量级的 GNU 实用程序。

我试图谷歌，但谷歌今天不喜欢我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-03T21:57:23.053

模式 1`seccomp`允许进程将自身限制为恰好四个系统调用：`read`、`write`、`sigreturn`和`_exit`. 这可以用于严格沙箱代码，就像[seccomp-nurse](http://chdir.org/~nico/seccomp-nurse/)一样。

[模式 2`seccomp`](http://lwn.net/Articles/475043/)（在撰写本文时，可在[Ubuntu 12.04](http://www.outflux.net/blog/archives/2012/03/22/seccomp-filter-now-in-ubuntu/)中找到或修补您自己的内核）在过滤系统调用方面提供了更大的灵活性。例如，您可以先设置过滤器，然后设置`exec`被测程序。适当使用`chroot`或`unshare`可以用来防止它对`exec`其他任何“有趣”的东西产生影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T21:53:16.417

我认为您需要更好地定义系统调用。我是说，

```
cat <<EOF > hello.c
#include <stdio.h>
int main(int argc,char** argv) {
  fprintf(stdout,"Hello world!\n");
  return 0;
}
EOF
gcc hello.c
strace -q ./a.out 
```

证明即使是一个看似微不足道的程序也会进行大约 27 次系统调用。您（我假设）希望允许调用“标准 C 库”，但这些反过来将在系统调用方面实现。我想我想说的是，运行时检查不如你想象的那么可行（[`strace`](http://linux.die.net/man/1/strace)无论如何使用或类似）。

# php - 如何使用php水平和垂直翻转图像

> ID：10001728
> 
> 赞同：3
> 
> 时间：2012-04-03T21:32:57.087
> 
> 标签：php, image, flip

我在网上搜索这个，我找不到我需要的东西。

我有一个图像（在服务器内部或外部），我需要使用 php 水平或垂直翻转图像，并显示如下：

```
<?
$img = $_GET['img'];
header('Content-type: image/png');
/*
do the flip work
*/
imagepng($img, NULL);
imagedestroy($tmp_img);
?> 
```

我该怎么做？谢谢你们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-03T21:45:15.457

`imagecopy`如果您碰巧没有可用的 ImageMagick，您也可以使用一系列函数来实现这一点。看[这个例子](http://uk3.php.net/manual/en/function.imagecopy.php#89658)：

```
function ImageFlip ( $imgsrc, $mode )
{

    $width                        =    imagesx ( $imgsrc );
    $height                       =    imagesy ( $imgsrc );

    $src_x                        =    0;
    $src_y                        =    0;
    $src_width                    =    $width;
    $src_height                   =    $height;

    switch ( $mode )
    {

        case '1': //vertical
            $src_y                =    $height -1;
            $src_height           =    -$height;
        break;

        case '2': //horizontal
            $src_x                =    $width -1;
            $src_width            =    -$width;
        break;

        case '3': //both
            $src_x                =    $width -1;
            $src_y                =    $height -1;
            $src_width            =    -$width;
            $src_height           =    -$height;
        break;

        default:
            return $imgsrc;

    }

    $imgdest                    =    imagecreatetruecolor ( $width, $height );

    if ( imagecopyresampled ( $imgdest, $imgsrc, 0, 0, $src_x, $src_y , $width, $height, $src_width, $src_height ) )
    {
        return $imgdest;
    }

    return $imgsrc;

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-03T21:39:23.030

使用[ImageMagick](http://www.php.net/manual/en/book.imagick.php)和`flipImage()`and`flopImage()`方法，以下示例来自[devzone.zend.com](http://devzone.zend.com/1559/manipulating-images-with-php-and-graphicsmagick/)：

```
<?php
try {
  // initialize object
  $image = new Gmagick();

  // read image file
  $image->readImage('gallery/original.jpg');

  // flip image vertically
  $image->flipImage();

  // write new image file
  $image->writeImage('gallery/new_1.jpg');

  // revert
  $image->flipImage();

  // flip image horizontally
  $image->flopImage();

  // write new image file
  $image->writeImage('gallery/new_2.jpg');

  // free resource handle
  $image->destroy();
} catch (Exception $e) {
  die ($e->getMessage());
}
?> 
```

结果如下：

![在此处输入图像描述](../Images/10aad811025a95c4b67ccdb4d7d55c7c.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-17T22:28:08.773

对于 PHP >= 5.5，您可以使用[imageflip](http://php.net/manual/en/function.imageflip.php) GD 原生函数。

# unity3d - GameObject.GetComponent() 是否找到子类？

> ID：10001730
> 
> 赞同：1
> 
> 时间：2012-04-03T21:32:59.613
> 
> 标签：unity3d

如果重要的话，在最新的 Unity3d 3.5 中工作。

如果我有一组课程：

```
Class A extends MonoBehaviour
Class B extends Class A
Class C1 extends Class B
Class C2 extends Class B 
```

我有一个以 C2 作为组件的 GameObject。会`GetComponent.<A>()`返回 C2 组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:15:33.067

好吧，我还没有尝试过三级层次结构，但是对于两级，我可以确认 GetComponent 可以按您的预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T14:57:41.623

此外，这可能会有所帮助：尝试致电

```
gameObjC1.SendMessage("MethodFromA"); 
```

如果您需要获取 A 只是为了调用它的方法。

# c# - 如何判断鼠标是否在c#中移动

> ID：10001734
> 
> 赞同：-2
> 
> 时间：2012-04-03T21:33:10.097
> 
> 标签：c#, xna, mouse

> **可能重复：**
> [XNA 鼠标移动](https://stackoverflow.com/questions/6980926/xna-mouse-movement)

基本上，我正在使用 XNA 创建游戏，并且我需要一种判断鼠标是否在移动的方法。任何帮助是极大的赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:39:12.530

使用`MouseState`之前的 MouseState 并将其与当前的 MouseState 进行比较`MouseState`

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.input.mousestate_members.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.input.mousestate_members.aspx)？ [http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series4/Mouse_camera.php](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series4/Mouse_camera.php)

```
MouseState currentMouseState = Mouse.GetState();
if (currentMouseState != originalMouseState)
{
    //The mouse did something
} 
```

如果您只关心运动，您可以比较 MouseState.X 和 MouseState.Y

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:40:14.580

您可以在游戏循环的 Update() 方法中捕获并存储鼠标位置。然后，您可以将存储的鼠标位置与当前鼠标位置进行比较。如果值不同，则鼠标已移动。

# postgresql - 丢弃顺序和级联

> ID：10001735
> 
> 赞同：24
> 
> 时间：2012-04-03T21:33:12.297
> 
> 标签：postgresql

我想使用 CASCADE 在一个语句中删除 table 中使用的序列和 table 本身，但我收到 NOTICE 并且 table 没有被删除。例如：

```
CREATE SEQUENCE seq1;
CREATE TABLE t1 (f1 INT NOT NULL DEFAULT nextval('seq1')); 
```

然后当我这样做时：

```
DROP SEQUENCE seq1 CASCADE; 
```

我收到以下消息，并且该表没有被删除：

```
NOTICE:  drop cascades to default for table t1 column f1 
```

我肯定做错了什么，但这是我在 PostgreSQL 中的第一步。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-03T22:07:02.377

您对依赖项有误解。该表永远不会是关联序列的依赖对象，并且**永远不会**被

```
DROP SEQUENCE ... CASCADE; 
```

只有从序列中提取的 DEFAULT 值“取决于”序列，并且如果使用 删除序列，则将其设置为 NULL `CASCADE`。

反之亦然：如果序列由表列拥有，则将其删除

```
DROP TABLE f1 CASCADE; 
```

对于由表列拥有的序列，您可以使用`serial`Milen 已经建议的类型。或者您可以[更改现有序列](http://www.postgresql.org/docs/current/interactive/sql-altersequence.html)：

```
ALTER SEQUENCE seq1 OWNED BY t1.f1; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-03T21:49:47.793

我不知道你为什么要手动创建一个序列 - 也许你有理由，或者可能是由于习惯使用另一个 DBMS。

但是，如果您没有特殊需要，请使用[`SERIAL`](http://www.postgresql.org/docs/current/static/datatype-numeric.html#DATATYPE-SERIAL)伪类型，当您删除表时，`SERIAL`列后面的序列也将被删除。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-03T22:06:02.343

您要求删除*序列*并级联该操作。虽然*默认值*不能没有序列而存在，因此被删除，但表和列*可以*在没有序列的情况下存在，因此它们仍然存在。

使用您指定的方式，删除表不会删除序列，尽管您可以使序列依赖于使用它的列，因此如果您删除*表，**它*会自动删除。您可以通过更改序列的所有者来做到这一点，或者改用 SERIAL。将列声明为 SERIAL 类型会自动创建一个序列，使其为该列生成默认值，并使该列成为该序列的所有者。

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-01T11:58:37.283

删除级联表 table_name; 您也可以使用它...我还建议您使用带有主键的序列号，以便您可以唯一地识别一列..*

# c# - 通过 C# 查询时 SQL Server 2005 区分大小写

> ID：10001736
> 
> 赞同：4
> 
> 时间：2012-04-03T21:33:12.450
> 
> 标签：c#, sql-server, collation, case-sensitive

我在安装一个在多个客户站点上运行良好的产品时遇到了问题，我相信这个问题与他们数据库服务器上的排序规则设置有关。我的代码看起来像这样（我更改了表和变量名称，因为代码是专有的）：

```
using (SqlCommand insertCommand = dbConnection.CreateCommand())
{
    insertCommand.CommandText = "INSERT INTO [myTable] ([valueOne] ,[valueTwo] ,[CreationDate]) VALUES (@valueTwo ,@valueTwo ,@creationDate);select IDENT_CURRENT('myTable');";
    insertCommand.Parameters.AddWithValue("@valueOne", "Value One");
    insertCommand.Parameters.AddWithValue("@valueTwo", "Value Two");
    insertCommand.Parameters.AddWithValue("@CreationDate", CreationDate);                    
    dbConnection.Open();
    object result = insertCommand.ExecuteScalar();
    dbConnection.Close();
} 
```

这适用于大多数站点以及我们的开发和 QA 机器，但在这个站点上，我们收到一条错误消息“必须声明标量变量“@creationDate”。我看到的主要差异是该站点的排序规则值设置为 SQL_Latin1_General_CP1_CS_AS我们的设置都是 SQL_Latin1_General_CP1_CI_AS。我为我们的数据库更改了此设置，但服务器仍设置为区分大小写的变体。这确实解决了我们在使用不同表时遇到的另一个问题（那个是表名，而不是参数名） ,但由于某种原因它仍然是一个问题。有没有人知道我如何能比通过和修复我们代码库中的所有案例差异更快地解决这个问题？

该站点使用 SQL Server 2005，我们的代码是用 C# 和 .NET 3.5 编写的。

谢谢-霍利斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:52:03.473

服务器的排序规则控制那些，这是设计使然。

来自[BOL](http://msdn.microsoft.com/en-US/library/ms188686%28v=sql.90%29.aspx)（强调我的）：

> 标识符的排序取决于定义它的级别。实例级对象的标识符（例如登录名和数据库名称）被分配了实例的默认排序规则。数据库中对象的标识符（例如表、视图和列名）被分配了数据库的默认排序规则。变量、GOTO 标签、临时存储过程和临时表可以在连接上下文与一个数据库关联时创建，然后在上下文切换到另一个数据库时引用。因此，**变量**、GOTO 标签和临时表的标识符**在实例的默认排序规则中**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:42:46.070

变量的大小写敏感性由服务器级别排序规则控制，而不是数据库级别。请参阅[有关同一主题的此问题](https://stackoverflow.com/questions/6559254/case-sensitive-variables-in-sql-server)。

# python - 简化在python中将域附加到文件名

> ID：10001745
> 
> 赞同：0
> 
> 时间：2012-04-03T21:33:58.783
> 
> 标签：python, csv

我只是在学习python。我还算新。

我有以下代码，它接收一个 csv 文件并替换文件名并将域附加到它：

```
import csv
...
    cr.reader(open('foo.csv', 'rb'))
    ...
    for i in rows enumerate(csvreader):
      images = 'http://www.foo.com/%s' % row[-3], 'http://www.foo.com/%s' % row[-4]
      row[-3], row[-4] = images[0], images[1] 
```

有更优雅的方法来简化将 url 附加到文件名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:37:41.643

```
row[-3], row[-4] = 'http://www.foo.com/' + row[-3], 'http://www.foo.com/' + row[-4] 
```

# c++ - 带有可移动、不可复制参数的 std::thread

> ID：10001751
> 
> 赞同：10
> 
> 时间：2012-04-03T21:34:18.677
> 
> 标签：c++, multithreading, c++11, rvalue-reference

以下程序未在 VS11 beta、gcc 4.5 或 clang 3.1 中构建

```
#include <thread>
#include <memory>

int main() {
    std::unique_ptr<int> p;
    std::thread th([](std::unique_ptr<int>) {

    },std::move(p));
    th.join();
} 
```

这是因为参数类型不可复制，但实现会尝试复制它。

据我所知，这个程序结构良好，应该可以工作。std::thread 的要求似乎意味着可移动的、不可复制的参数应该在这里工作。具体来说，它表示可调用对象和每个参数都应满足 MoveConstructible 要求，并且`INVOKE(DECAY_COPY(std::forward<F>(f)),DECAY_COPY(std::forward<Args>(args))...)`应是有效的表达式。

在这种情况下，我认为表达式类似于：

```
template <class T> typename std::decay<T>::type decay_copy(T&& v)
{ return std::forward<T>(v); }

std::unique_ptr<int> p;
auto f = [](std::unique_ptr<int>) {};

decay_copy(f)(decay_copy(std::move(p))); 
```

而且我认为这不应该涉及`p`. gcc 至少可以编译这个表达式，尽管 VS11 不能。

1.  我对要求有误吗？参数必须是可复制的？
2.  该标准是否在此问题上为实现复制参数留有余地？
3.  还是我尝试的实现不合格？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-03T21:47:10.803

从 30.3.1.2，N3337 的第 3 和 4 段开始：

> **`template <class F, class ...Args> explicit thread(F&& f, Args&&... args);`**
> 
> *要求*：**`F`**并且每**`Ti`**一项**`Args`**都应满足`MoveConstructible`要求。`INVOKE (DECAY_-COPY ( std::forward<F>(f)), DECAY_COPY (std::forward<Args>(args))...)`(20.8.2) 应该是一个有效的表达式。
> 
> *效果*：构造一个线程类型的对象。新的执行线程与在构造线程中被评估`INVOKE (DECAY_-COPY ( std::forward<F>(f)), DECAY_COPY (std::forward<Args>(args))...)`的调用一起执行。`DECAY_COPY`此调用的任何返回值都将被忽略。[注意：这意味着调用副本时未抛出的任何异常**`f`**都将在构造线程中抛出，而不是在新线程中抛出。—end note ] 如果调用`INVOKE (DECAY_COPY ( std::forward<F>(f)), DECAY_COPY (std::forward<Args>(args))...)`以未捕获的异常终止，则应调用 std::terminate。

所以是的，这应该有效。如果没有，那么这是您的实现中的错误。

请注意，任何参数移动/复制都将在新线程上发生。您将引用传递给另一个线程，因此您需要确保它们仍然存在，直到该线程启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T22:19:32.197

作为替代方案，并且作为标准`std::thread`习惯用法，您可以传递引用包装器：

```
int p;
std::thread([](int & x) { /* ... */ }, std::ref(p)); 
```

这将创建一个类型为 的对象`std::reference_wrapper<int>`，该对象具有值语义并包装对 an 的引用`int`（即复制包装器别名引用）。

# javascript - JavaScript 变量名和 HTML 输入名属性：命名空间冲突？

> ID：10001752
> 
> 赞同：0
> 
> 时间：2012-04-03T21:34:21.837
> 
> 标签：javascript, html, dom

在 HTML 文件中，我有以下内容：

```
<input type="..." name="myInput1" /> 
```

在相应的 JS 文件中，我有以下变量，它将在模糊后保存该输入的字符串值：

```
var myInput1; 
```

这两个相同的名字有什么问题吗？我猜命名空间是分开的，所以没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:38:02.007

简短的回答，没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-14T08:57:24.373

一个简短的回答是，确实，不。但是，这也很大程度上取决于您如何使用该变量。假设您使用 javascript 来验证变量是否设置如下：

```
if(myInput1) {do something} 
```

如果您还决定将 id 设置为与名称相同，如下所示（因为您没有指定，它可以是任何东西）：

```
<input type="myInput1" name="myInput1" /> 
```

您的变量 myInput1 将被设置为包含 DOM 元素并且不再为空。

JS 和 HTML 之间的这种链接不仅很有趣，而且可以用来创建一个漏洞利用，如[后 XSS 世界的明信片](http://lcamtuf.coredump.cx/postxss/ "来自后 XSS 世界的明信片")第 3.1.2 节中所述（这就是我的想法所在 - 是的，它甚至仍然有效虽然这篇文章来自 2011 年）。

# java - 如何通过堆栈中的所有其他应用程序活动将用户踢到登录屏幕活动？

> ID：10001755
> 
> 赞同：0
> 
> 时间：2012-04-03T21:34:29.817
> 
> 标签：java, android

假设您有一个与网络应用相关的 Android 应用，需要用户登录才能使用它。用户在登录屏幕活动中登录，然后继续进行其他活动。每次用户启动 Activity 时，应用程序都会再次检查他的登录凭据（凭据存储在某处的中央数据库中）。

当用户从一个活动跳转到另一个活动时，让我们假设用户的登录凭据已从服务中撤消。下次用户访问 Activity 时，应用程序将看到他不再具有访问权限。该应用程序现在应该将用户踢回登录屏幕活动。

但是由于在用户使用该应用程序时，该应用程序已经创建了一堆活动，那么您如何获得登录屏幕。您是否杀死/销毁所有活动，直到您到达登录屏幕活动（应该是应用程序堆栈底部的活动）？

或者您是否开始一个新的登录屏幕活动并直接进行该活动？

`FLAG_ACTIVITY_CLEAR_TOP`或者我应该通过意图调用登录屏幕活动？

在用户能够第二次登录后（假设他恢复了他的凭据），如果 Activity 现在是堆栈中唯一的一个，按下后退按钮会将他带出应用程序，而不是返回到在他的证书被吊销之前他在做什么。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:54:03.533

我个人的选择是设置你的所有活动（当然除了登录活动）来检查用户的凭据`onResume()`（我通过继承来做到这一点，我的所有活动都继承自 abstract `AuthorizedActivity`，但做对你有用的事情） . 如果用户没有凭据（因为他们没有凭据，或者他们已被撤销），那么我`startActivityForResult()`就是登录活动。如果 LoginActivity 返回有效用户，则一切正常。如果用户是有效但与之前登录的用户不同的用户，我会将他们带到我的根活动中，使用`FLAG_ACTIVITY_CLEAR_TOP`. 从 loginActivity 中按下后退按钮对它们没有好处，因为应用程序会将它们直接弹回主页。

我发现这种方法让我可以灵活地决定何时以及如何检查/撤销凭据，即使它们（短暂地）离开应用程序也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:39:56.293

登录屏幕活动`FLAG_ACTIVITY_CLEAR_TOP`将起作用，但会删除所有用户的历史记录。您是否关心他们是否更新了他们的凭据然后回击？那应该保留他们的历史吗？

您可以考虑登录活动`FLAG_ACTIVITY_SINGLE_TOP`。`FLAG_ACTIVITY_NO_HISTORY`

如果您希望所有以前的任务都重定向到登录屏幕，您必须确保进行签入，`onResume`以便在撤销权限后它们无法返回堆栈。

请记住，您还可以在[清单](http://developer.android.com/guide/topics/manifest/activity-element.html)`<activity>`中的元素上设置这些标志。

# java - 做什么 在类名中 在java中表示？

> ID：10001756
> 
> 赞同：1
> 
> 时间：2012-04-03T21:34:32.233
> 
> 标签：java

我正在阅读[一些](http://Key%3CCar%3E%20rootKey%20=%20new%20Key%3CCar%3E%28Car.class,%20959%29;)教程，其中遇到了诸如此代码中的含义是
`Key<Car> rootKey = new Key<Car>(Car.class, 959);`
什么`<Car>`？为什么这里使用这些“<>”符号？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:40:08.063

您的代码段中的 代表通用类型说明符。您可以使用 Car 以外的类型实例化 Key 类，并且它的方法在编译时对该变量是类型安全的。

例如，以下语句是类型安全的，就像您的示例一样：

```
Key<String> rootKey = new Key<String>(String.class, "someString"); 
```

有关详细信息，请参阅[http://docs.oracle.com/javase/tutorial/java/generics/gentypes.html](http://docs.oracle.com/javase/tutorial/java/generics/gentypes.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:35:35.120

Java 泛型类型：[http ://docs.oracle.com/javase/tutorial/java/generics/gentypes.html](http://docs.oracle.com/javase/tutorial/java/generics/gentypes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:37:47.940

1.  Car 是您传入的“Car-Object 类”。
2.  <> 符号用于指定 Key 类所需的 Object 类型

# cuda - 如何在 GPU 上计算 k 个最大特征值？

> ID：10001763
> 
> 赞同：5
> 
> 时间：2012-04-03T21:35:14.070
> 
> 标签：cuda, eigenvector, eigenvalue, jacket

我正在研究谱聚类的并行算法，我需要计算 K 最大特征值。我正在为 Matlab 使用 Jacket 插件，但遗憾的是它不支持 matlab 中的 EIGS 函数（它无法计算 K 特征值并行）任何人都可以建议一些其他工具/库在 GPU 上执行此任务吗？或者我仍然可以在 GPU 辅助的 Matlab 中执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:04:58.580

我无法在上面的评论列表中回复 chemeng，但我知道一篇关于基于 GPU 的 QR 分解的非常好的论文：http: [//users.ece.gatech.edu/~mrichard/Kerr_Campbell_Richards_QRD_on_GPUs.pdf](http://users.ece.gatech.edu/~mrichard/Kerr_Campbell_Richards_QRD_on_GPUs.pdf)

另外，svd() 命令是否适用于夹克？奇异值只是特征值的平方。

# c# - XPathSelectElement 非常慢；有没有更好的方法来获取给定 XPath 的值？

> ID：10001766
> 
> 赞同：2
> 
> 时间：2012-04-03T21:35:31.500
> 
> 标签：c#, xml, xpath, linq-to-xml

我有一个文件，它本质上是一个 XPath 列表，如下所示：

```
/Options/File[1]/Settings[1]/Type[1]
/Options/File[1]/Settings[1]/Path[1]
/Options/File[1]/Settings[2]/Type[1]
/Options/File[1]/Settings[2]/Path[1]
/Options/File[2]/Settings[1]/Type[1]
/Options/File[2]/Settings[1]/Path[1] 
```

我需要在中等大小的 XML 文件（~3-5MB）中从这些 XPath 指向的元素中获取值。使用 XPathSelectElement 效果很好，但速度极慢。有没有更快的方法来使用 Linq to XML 甚至手动遍历 XML？

在一个相关问题中，XPath 中的索引值和从 XElement 返回的元素顺序是否保证相同？例如，这些返回是否相同：

```
xdoc.XPathSelectElement("/Options/File[1]/Settings[2]);

xdoc.root.Elements("File").ElementAt(0).Elements("Settings").ElementAt(1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:53:09.567

索引 XPath（第 n 个孩子）通常很慢，因为需要遍历所有孩子直到您需要的那个。要检查 - 对于相对较大的文件，请尝试选择第一个孩子和最后一个孩子并比较差异（每个重复约 1000 次并使用秒表测量）。

如果您的 XPath 都像您所展示的那样，您可以通过在迭代时缓存子节点来手动进行选择。

XML 中元素的顺序很重要，因此普通的 XML API 将始终保持元素的顺序。请注意，属性的顺序对于 XML 并不重要，因此属性的顺序在查询（不太可能，但理论上可能）和不同的 API 之间可能不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:39:52.047

我刚刚遇到了与您类似的问题：使用一堆索引 XPath 表达式在中等大小的 xml 文件（3 MB）中选择一些节点时，我的表现很糟糕。

但与您的解决方案相反，我在 XPath 表达式的每个部分都没有索引。因此，我尝试使用 XPath() 放弃 LINQ to XML `XElement.XPathSelectElement`，而是`XPathNavigator`通过创建`XPathDocument`并调用`CreateNavigator()`. 在我使用的导航器上`SelectSingleNode`

使用`XElement.XPathSelectElement`它我花了 137.3 秒来完成所有选择（顺便说一下，程序的其余部分只用了大约 3 秒）。

现在使用`XPathNavigator.SelectSingleNode`选择总共需要 1.2 秒……这几乎是 115 倍

因此，如果有人需要更快的 XPath 查询并且不想自己解析查询：如果可能的话，不要使用 LINQ to XML，它的实现似乎非常糟糕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T16:43:38.850

我想这就是我要去做的。我确信可能会有更多的性能改进，例如 Alexei 的建议，但在我有限的测试中，这已经至少快了 10 倍。

```
 private XElement GetElementFromXPath(XDocument xDoc, string xPath)
    {
        string[] nodes = xPath.Split(new char[] { '/' }, StringSplitOptions.RemoveEmptyEntries);
        XContainer xe = xDoc.Root;
        for (int i = 1; i < nodes.Length; i++)
        {
            string[] chunks = nodes[i].Split(new char[] { '[', ']' });

            int index = 0;
            if (Int32.TryParse(chunks[1], out index))
                xe = xe.Elements(chunks[0]).ElementAt(index - 1);
        }
        return (XElement)xe;
    } 
```

这假定除根以外的所有元素都在 XPath 中与它们的索引号一起列出（这对我的场景来说是正确的）。

# sql-server - 如何在运行时确定我是否连接到生产数据库？

> ID：10001773
> 
> 赞同：4
> 
> 时间：2012-04-03T21:36:03.027
> 
> 标签：sql-server, database, wcf, version, slowcheetah

好的，所以我做了一件愚蠢的事情并发布了针对我们的开发数据库（SQL Server 2008 R2）的生产代码（C#，VS2010）。幸运的是，我们还没有使用生产数据库，所以我没有尝试恢复和同步所有内容的痛苦......

但是，我想防止这种情况再次发生，因为它可能会更加痛苦。我的想法是添加一个我可以在启动时查询的表，并通过返回的值确定我连接到的数据库。例如，生产将返回“PROD”，而开发和测试将返回其他值。

如果有任何区别，应用程序会与 WCF 服务对话以访问数据库，因此我在配置文件中有端点，而不是实际的连接字符串。

这有意义吗？其他人是如何解决这个问题的？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:39:22.797

解决此问题的最简单方法是无法访问生产帐户。这些存储在我们的 .net 应用程序的 Machine.config 文件中。在非.net 应用程序中，这很容易复制，方法是在一个公共位置有一个配置文件，或者（我敢说）一个保存帐户信息的注册表项。

我们的大多数服务器也是通过别名访问的，因此没有人真正需要将连接字符串从一个环境更改为另一个环境。只需从配置中获取用户，主机文件中的服务器别名会将您指向正确的服务器。这也消除了我们在切换数据库实例（更改硬件等）时必须更新所有配置文件的麻烦。

因此，即使单击一次部署和端点。您可以在最终用户桌面上的机器配置中发布新的端点 URI（我假设这是一个内部应用程序），然后在代码中引用它。

如果你绝对不能这样做，因为这可能需要很多工作（我工作的最后一个地方有 2000 名呼叫中心人员，所以这个推动要困难得多，但仍然可能）。作为为您构建应用程序的最后一步，您始终可以拥有一个自动构建服务器设置，它会为您修改 app.config 文件。然后，您总是从自动构建服务器发布已编译的代码。永远不要让 app.config 中的此类更改成为开发人员流程中的手动步骤。这总会在某些时候导致问题。

现在，如果这些都不起作用，那么我讨厌的最后一个选择（也做了这个），但它有效的是从映射的驱动器中查找值。从本质上讲，公司中的每个人都有一个映射驱动器说 R:。这是您拥有生产配置文件等的地方。生产帐户人员使用生产值映射到一个驱动器位置，而开发人员等使用开发值映射到另一个驱动器位置。与其他选项相比，我讨厌这个选项，但它确实有效，并且它可以让你在其他人变得乏味和困难的情况下避免（由于说办公室政治，设置构建服务器等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T22:06:21.137

我假设您的生产服务器的名称与您的开发服务器不同，所以您可以简单地[`SELECT @@SERVERNAME AS ServerName`](http://msdn.microsoft.com/en-us/library/ms187944.aspx).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T22:11:11.450

不确定这个答案在假设的 .net 环境中是否对您有所帮助，但在 *nix/PHP 环境中，这就是我处理相同情况的方式。

> 好的，所以我做了愚蠢的事情并发布了生产代码

有时，某些应用程序的行为取决于环境，正如您所逃避的那样。为了提供这种在开发和生产环境之间进行检查的能力，我在全局 /etc/profile/profile.d/custom.sh 配置（CentOS）中添加了以下行：

```
SERVICE_ENV=dev 
```

在代码中，我有一个包装器方法，它将根据名称获取环境变量并本地化它的值，使其可供我的应用程序代码访问。下面是一个片段，展示了如何检查当前环境并做出相应的反应（在 PHP 中）：

```
public function __call($method, $params)
{
    // Reduce chatter on production envs
    //  Only display debug messages if override told us to
    if (($method === 'debug') &&
        (CoreLib_Api_Environment_Package::getValue(CoreLib_Api_Environment::VAR_LABEL_SERVICE) === CoreLib_Api_Environment::PROD) &&
        (!in_array(CoreLib_Api_Log::DEBUG_ON_PROD_OVERRIDE, $params))) {
        return;
    }
} 
```

请记住，您不希望在应用程序逻辑中添加环境检查，只保留一些极端用例，如代码片段所示。相反，您应该使用 DNS 控制对生产数据库的访问。例如，在您的开发环境中，以下数据库主机名将`mydatabase-db`解析为本地服务器，而不是您的实际生产服务器。当您将代码推送到生产环境时，您的 DNS 将正确解析主机名，因此您的代码应该“正常工作”而无需任何环境检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T21:31:55.243

经过数小时的关于 MSBuild 和 app.config 操作的教科书和教程的研究，我偶然发现了一个叫做 SlowCheetah - XML Transforms [http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)的东西需要它在第一次偶然发现它后不到一小时内完成。绝对推荐！来自文章：

此包使您能够根据构建配置转换您的 app.config 或任何其他 XML 文件。它还添加了额外的工具来帮助您创建 XML 转换。

这个包是由 Sayed Ibrahim Hashimi、Chuck England 和 Bill Heibert 创建的，他也是这本书的作者。如果您正在寻找一种简单的通用方法来根据构建配置转换您的 app.config、web.config 或任何其他 XML 文件，请不要再犹豫了——这个 VS 包将完成这项工作。

是的，我知道我回答了自己的问题，但我已经给出了答案，最终将我指向了真正的答案。现在我需要根据我对问题的新理解返回并编辑问题......

戴夫

# php - 在哪里可以找到全面的图像处理库信息？

> ID：10001774
> 
> 赞同：0
> 
> 时间：2012-04-03T21:36:12.933
> 
> 标签：php, image, image-processing

我花了很多时间在谷歌上搜索和搜索有关图像处理库的信息，但收效甚微。如果之前已经回答过这个问题，请指导我，我只是找不到它。

基本上，我正在尝试将任意大小的图像调整为几个较小的缩略图图像，例如 400 像素宽和 200 像素宽，同时保持原始纵横比。原始图像是通过 php (linux) 上传的，我发现我可以使用**Cairo、GD、GMagick 或 ImageMagick，**但我无法找到更适合图像*处理*的综合数据。我找到了图像*创建*的比较，但这是我不会使用的功能。

如果证明更合适，我还可以选择通过 php 上传，然后通过另一种方法（例如 perl/python/etc）执行图像处理。

任何指向正确方向的指针都值得赞赏。质量是我的主要动机，其次是输出图像文件大小，然后是库性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:53:37.497

GD 和 ImageMagick 是您最好的选择，因此获取一些具有代表性的图像并使用以下方法运行一些测试：

*   [`imagecopyresampled()`](http://www.php.net/manual/en/function.imagecopyresampled.php)为 GD
*   [`Imagick::thumbnailImage()`](http://www.php.net/manual/en/imagick.thumbnailimage.php)对于 ImageMagick
*   [`Imagick::resizeImage()`](http://www.php.net/manual/en/function.imagick-resizeimage.php)如果您想要更多控制并尝试一些[过滤器常量](http://www.php.net/manual/en/imagick.constants.php#imagick.constants.filters)。

[使用 GD 和 Imagick 在 PHP 中调整图像大小](http://www.fliquidstudios.com/2009/05/07/resizing-images-in-php-with-gd-and-imagick/)有一些代码示例可以帮助您进行。

通过视觉和文件大小比较它们。如果没有明显的赢家，则根据您的预期需求运行一些基准测试。[如何对 PHP 脚本的效率进行基准测试](https://stackoverflow.com/q/8291366/1090474)是一个很好的参考点。

也看看：

*   [在 Imagemagick 和 GD 之间进行选择以创建缩略图](https://stackoverflow.com/q/9914718/1090474)
*   [我应该在 Drupal 中将 ImageMagick 或 GD2 与 ImageAPI 一起使用吗？](https://stackoverflow.com/q/1696700/1090474)

# html - 围绕浮动元素包裹父 div

> ID：10001777
> 
> 赞同：3
> 
> 时间：2012-04-03T21:36:25.690
> 
> 标签：html, css

我试图让一个 div 环绕动态数量的子元素，我想这样做而不为父元素的宽度设置值。

我已经通过浮动子元素和父元素来包装内容，我的问题是当子元素包装到下一行时，右侧还有剩余空间，我希望父元素“紧紧地”包装。

我在这里设置了一个演示：http: [//jsfiddle.net/UMgct/4/](http://jsfiddle.net/UMgct/4/)

#parent 显示当前行为，我希望它的行为类似于#parent2 和#parent3，但没有明确设置宽度。我可以看到为什么#parent 的行为是正确的，我只是看不到任何获得我想要的行为的方法。

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:29:37.137

首先，您应该将“父”和“子”更改为类而不是 ID。ID 是唯一的标识符，而类可以根据需要多次使用。

话虽如此，您可以使用 JQuery 实现您想要的（假设现在将 ID 更改为类）：

```
$(document).ready(function() {
    var numPerLine = parseInt($(window).width() / $('.parent > .child').outerWidth(true));
    $('.parent').width($('.parent > .child').outerWidth(true) * numPerLine);
}); 
```

# c# - WinRT Metro 应用程序在通过异步方法调用时仍会阻塞 UI 线程

> ID：10001781
> 
> 赞同：3
> 
> 时间：2012-04-03T21:36:58.393
> 
> 标签：c#, asynchronous, windows-runtime, c#-5.0, async-ctp

我有一个简单的 Metro 应用程序，其中包含一个按钮、一个标签和一个下拉列表。下拉列表包含我可以读取的文件列表。当我单击按钮时，所选文件的内容被读入标签。文件位于 Documents 文件夹中（即 WinRT 的 KnownFolders.DocumentsLibrary）。每个文件代表 WinRT API 中的一个 StorageFile。

文件读取方法是一种异步方法（使用 async/await）。为了证明异步行为，我将文件读取方法作为一个长时间运行的过程。因此，在执行这个长时间运行的方法时，我应该可以自由地点击下拉列表并选择不同的文件。这是因为 UI 线程在读取文件时不应被阻塞。然而，这目前还没有发生。它似乎仍然阻塞了 UI 线程，并且下拉列表在长时间运行的方法发生时被冻结。我一定在这里做一些奇怪的事情。你能告诉我为什么用户界面没有响应吗？我的代码示例如下。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using Windows.Storage;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Navigation;

namespace FileAccess
{
    public sealed partial class MainPage : Page
    {
       private readonly StorageFolder storageFolder;       

       public MainPage()
       {
        this.InitializeComponent();
        storageFolder = KnownFolders.DocumentsLibrary;
        AddFiles();
       }

       private async void AddFiles() //Add files to the drop down list
       {
        var filesList = await storageFolder.GetFilesAsync();
        IEnumerable<FileItem> fileItems
            = filesList.Select(x => new FileItem(x.Name, x.Name));

        cboSelectFile.ItemsSource = fileItems;
        cboSelectFile.SelectedIndex = 0;
       }

      private async void BtnReadFile_Click(object sender, RoutedEventArgs e)
      {
        IStorageFile storageFile = await storageFolder.GetFileAsync((string)cboSelectFile.SelectedValue);           

        if (storageFile != null)
        {
            LblReadFile.Text = await ReadFileAsync(storageFile); //long running method**************
        }
      }

      private async Task<string> ReadFileAsync(IStorageFile storageFile) //long running method**************
      {
        var fileContent = await FileIO.ReadTextAsync(storageFile);

        for (Int64 i = 0; i < 10000000000; i++)
        {
        }

        return fileContent; 
      }                
  } 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T22:01:31.127

如果你在 UI 线程上执行这样的代码：

```
var whatever = await DoSomethingAsync();
// some more code 
```

然后`// some more code`也会在 UI 线程上执行。这正是你的问题。读取文件后，您在 UI 线程上执行长循环，这就是 UI 冻结的原因。

如果要模拟一些长时间运行的操作，可以通过以下几种方式进行：

1.  使用 在后台线程上执行循环[`Task.Run()`](http://msdn.microsoft.com/en-us/library/hh195051%28v=vs.110%29.aspx)，并异步等待它完成：

    ```
    private async Task<string> ReadFileAsync(IStorageFile storageFile)
    {
        var fileContent = await FileIO.ReadTextAsync(storageFile);

        await Task.Run(() => { for (Int64 i = 0; i < 10000000000; i++) {} });

        return fileContent; 
     } 
    ```

2.  不要浪费 CPU 时间[`Task.Delay()`](http://msdn.microsoft.com/en-us/library/hh139096%28v=vs.110%29.aspx)来延迟代码的执行：

    ```
    private async Task<string> ReadFileAsync(IStorageFile storageFile)
    {
        var fileContent = await FileIO.ReadTextAsync(storageFile)
                                      .ConfigureAwait(false);

        await Task.Delay(TimeSpan.FromSeconds(10));

        return fileContent; 
     } 
    ```

# ruby-on-rails - 如何验证嵌套对象的单个属性

> ID：10001794
> 
> 赞同：0
> 
> 时间：2012-04-03T21:37:59.297
> 
> 标签：ruby-on-rails, validation, activerecord

我是 Rails 和 Ruby 的新手。在我看来，我有 2 个单选按钮，用于询问此人是否为美国居民。如果是，则显示状态选择。如果不是，则会显示国家/地区选择。

如果此人是美国居民，我正在尝试验证是否选择了一个州。

如何创建验证并从addresses_attributes 中访问状态？

这是我的模型：

```
class Person < ActiveRecord::Base
  has_many :addresses, :as => :addressable
  has_one :user

  accepts_nested_attributes_for :user, :allow_destroy => true
  accepts_nested_attributes_for :addresses

  attr_accessor   :resident
  attr_accessible :campaign_id,
                  :first_name,
                  :last_name,
                  :user_attributes,
                  :addresses_attributes,
                  :resident

  validates :first_name, :presence => true
  validates :last_name, :presence => true

  validates_presence_of :resident, :message => "must be selected"

end 
```

这些是正在发送的相关参数：

```
"resident"=>"true",
 "addresses_attributes"=>{"0"=>{"country_code"=>"",
 "state"=>""}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:55:11.683

您需要自定义验证方法。

```
 validate :check_state_presence 

    def check_state_presence 
     if self.resident && !self.addresses.state.present?
        self.errors[:base] << "You need to Select State if you are a US resident."
     end 
    end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:28:31.647

您可以改用 validates_inclusion_of 对其进行排序。

Ruby API 说：

> 如果要验证布尔字段的存在（其中真实值为 true 和 >false），您将需要使用 validates_inclusion_of :field_name, :in => [true, false]。
> 
> 这是由于 Object#blank? 处理布尔值：false.blank? # => 真的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T15:48:25.613

向@VelLes +1 以帮助我指出正确的方向。我正在回答我自己的问题，因为我必须稍微更改@VelLes 示例才能使其正常工作，并且我希望其他人看到完整的解决方案。

由于我使用 attr_accessor 作为虚拟属性，当真/假值来自单选按钮时，它会存储为字符串。因此，如果`self.resident`= "false"，它将被评估为 true。

您可以执行`self.resident == 'false'`或转换为布尔值并添加新的 self.resident？方法。我选择了后者。

布尔转换来自[此博客文章](http://jeffgardner.org/2011/08/04/rails-string-to-boolean-method/)，添加到 config/initializers 中的文件

```
class String
  def to_bool
    return true if self == true || self =~ (/(true|t|yes|y|1)$/i)
    return false if self == false || self.blank? || self =~ (/(false|f|no|n|0)$/i)
    raise ArgumentError.new("invalid value for Boolean: \"#{self}\"")
  end
end 
```

我的最终代码是：

```
validate :check_state_presence 

def resident?
  resident.to_bool
end

def check_state_presence 
 if self.resident? && !self.addresses[0].state.present?
   #the inline version of the error message 
   self.addresses[0].errors.add(:state, "must be selected")
 end 
end 
```

请让我知道是否有更好的“rails”方法来做到这一点！

# gradle - 在 Gradle 中复制文件的常规方法 - 使用复制任务还是复制方法？

> ID：10001795
> 
> 赞同：30
> 
> 时间：2012-04-03T21:38:00.300
> 
> 标签：gradle

我正在添加一个将war文件部署到Tomcat的任务。该任务唯一需要做的就是将war文件复制到TOMCAT位置。

我可以想到两种方法来实现这个..但是对于 gradle 来说是新手，我不太确定什么是更传统/正确的（或者它是否重要）。

```
task myCopy(type: Copy)

    myCopy.configure {
       from('source')
       into('target')
       include('*.war')
    } 
```

或者

```
task myCopy{
  doLast{
     copy {
       from 'source'
       into 'target'
       include '*.war'
     }   
  }

} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-03T22:36:42.343

在大多数情况下（包括这个），`Copy`任务是更好的选择。除其他外，它将为您提供自动最新检查。该`copy`方法适用于（由于某种原因）您必须使用现有任务并且不能使用单独的任务进行复制的情况。

您的任务的代码`Copy`可以简化为：

```
task myCopy(type: Copy) {
    from('source')
    into('target')
    include('*.war')
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-02T14:29:23.230

UP-TO-DATE 仅验证文件是否存在，但不验证文件是否已更改以避免与旧文件一起使用缓存

```
 outputs.upToDateWhen { false } 
```

# django - 从模型创建表单

> ID：10001799
> 
> 赞同：0
> 
> 时间：2012-04-03T21:38:23.493
> 
> 标签：django, forms

我正在将我的第一步移动到 Django 中，我正在尝试按照此链接上的教程进行操作：[https](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/) ://docs.djangoproject.com/en/dev/topics/forms/modelforms/ 但我无法获得形式。它只是返回一个白页！

有人可以解释我是否遗漏了什么吗？

我的模型.py：

```
from django.db import models
from django.forms import ModelForm

class UserProfile(models.Model):
    name = models.CharField(max_length=30)
    surname = models.CharField(max_length=30)
    email = models.EmailField()
    tel = models.CharField(max_length=30, null=True, blank=True)
    def __unicode__(self):
        return '%s %s' % (self.surname, self.name)

class Ad(models.Model):
    title = models.CharField(max_length=50)
    descr = models.TextField()
    city = models.CharField(max_length=30)
    price = models.FloatField(null=True, blank=True)
    img = models.ImageField(upload_to='./uploaded_imgs', null=True, blank=True)
    dateIn = models.DateField(auto_now_add=True)
    dateExp = models.DateField(auto_now_add=True)
    codC = models.ForeignKey('Cat')
    codU = models.ForeignKey('UserProfile')
    def __unicode__(self):
        return '%s - %s' % (self.title, self.dateIn)

class Cat(models.Model):
    cat = models.CharField(max_length=35, primary_key=True)
    def __unicode__(self):
        return self.cat 
```

我的forms.py：

```
from django import forms

class newAdForm(forms.Form):
    title = forms.CharField(max_length=50)
    descr = forms.CharField(widget=forms.Textarea)
    city = forms.CharField(max_length=30)
    price = forms.FloatField(required=False)
    img = forms.ImageField(required=False)
    dateIn = forms.DateField(auto_now_add=True)
    dateExp = forms.DateField(auto_now_add=True)
    codC = forms.ModelChoiceField(Cat)
    codU = forms.ModelChoiceField(UserProfile) 
```

我的意见.py：

```
from django.contrib.auth import authenticate, login, logout
from django.contrib.auth.models import User
from django.shortcuts import render_to_response, get_object_or_404, redirect
from django.template import RequestContext
from django.http import HttpResponse
from django import forms
from models import *
from django.forms import *
from django.forms.models import modelformset_factory

[...]

def newAd(request):
    newAdFormSet = modelformset_factory(Ad)
    if request.method == 'POST':
        formset = newAdFormSet(request.POST, request.FILES)
        if formset.is_valid():
            formset.save()
            return render_to_response('conf.html', {'state':'Your ad has been successfull created.'}, context_instance = RequestContext(request),)
    else:
        formset = newAdFormSet()
    return render_to_response('ad_form.html', context_instance = RequestContext(request),) 
```

我的 ad_form_auto.html 模板：

```
{% extends "base.html" %}
{% block title %}Ads insertion form{% endblock %}
{% block content %}
    {% if error_message %}
        <p><strong>{{ error_message }}</strong></p>
    {% endif %}
<form method="post" action="">
    {{ formset }}
</form>
{% endblock %} 
```

非常感谢！这个社区看起来棒极了！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:46:15.737

您没有将表单传递给模板 - 目前包含表单的“formset”变量不包含在传递给视图的数据字典中。

```
return render_to_response('ad_form.html', context_instance = RequestContext(request),) 
```

应在此处包含数据（请参阅[render_to_response() 文档](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render-to-response)）我已将数据中的表单和模板重命名为“表单”，以便于命名：

```
return render_to_response('ad_form.html',
                          {'form':formset},
                          context_instance=RequestContext(request)) 
```

然后，在您的模板中（请参阅[模板文档](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#displaying-a-form-using-a-template)中的表单）替换`{{formset}}`为`{{form.as_p}}`. 还要向表单添加一个提交按钮。

```
<form action="" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Submit" />
</form> 
```

# javascript - 计算数组中的对象（Javascript）

> ID：10001801
> 
> 赞同：-1
> 
> 时间：2012-04-03T21:38:31.500
> 
> 标签：javascript, arrays

我有一个由无限数量的对象组成的数组。这些对象具有相同的结构。如果我 console.log 我的整个数组，我会得到如下信息：

[对象], [对象], [对象], ecc...

每当我在数组中推送一个新对象时，我也可以实现一个计数器，或者我可以使用普通的 for 循环来计算对象。没有更有效的方法来计算所有对象吗？

为什么 array.length 不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:43:04.897

`array.length`返回存储在数组中的元素数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:44:12.167

大多数 javascript 引擎将为数组对象原生实现有效的 .length 方法。您无需重复他们的努力。

如果你创建一个数组，你可以简单地访问`myArray.length`来获取长度。

例子：

```
var myArray = [];
myArray.push({ 'id': 1, 'title': 'Who' });
myArray.push({ 'id': 2, 'title': 'What' });
myArray.push({ 'id': 3, 'title': 'Where' });
myArray.push({ 'id': 4, 'title': 'Why' });

alert(myArray.length); //should be 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:44:09.803

您应该能够使用 object.length。考虑这个例子：

```
x = [[], function() { return ""; }, 3,document.createElement('div')]
alert(x.length); 
```

为我打印“4” - 尝试使用您的数组，如果您在网络上使用 javascript，它应该将数组中正确数量的对象打印到浏览器窗口......（否则只需打印 x.length )

也许发布更多代码会有所帮助。哦，顺便说一句，不要使用“array.length”，而是使用“x.length”，假设 x 是名称或您的数组。

# django - 如何访问在 python manage.py testserver 中创建的数据库？

> ID：10001803
> 
> 赞同：0
> 
> 时间：2012-04-03T21:38:39.090
> 
> 标签：django, unit-testing, sqlite

我最近发现了我一直用来运行我的 Selenium 测试的 testserver 数据库。

我的数据库有一些奇怪的问题，所以我想检查它。

当我用 ctrl-c 终止服务器时，显示如下：

```
^C  
Server stopped.  
Note that the test database, ':memory:', has not been deleted. You can explore it on your own. 
```

但是，未创建该文件：

```
$ ls -la :内存
ls: :memory: 没有这样的文件或目录

```

我正在使用 SQLite3 和 Django 1.3。

如何访问测试数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:43:14.380

这只是 django 中的默认错误消息。一旦数据库连接关闭，SQLLite 就会从内存中擦除数据库。从[文档](http://www.sqlite.org/inmemorydb.html)：

> 完成后，不会打开任何磁盘文件。相反，一个新的数据库是纯粹在内存中创建的。一旦数据库连接关闭，数据库就不再存在。每个 :memory: 数据库都彼此不同。因此，打开两个数据库连接，每个连接的文件名为“:memory:”，将创建两个独立的内存数据库。

在找出问题时将其更改为磁盘数据库，然后在完成后将其切换回速度。

# android - 如何使“视频捕获设备”弹出窗口静音？

> ID：10001805
> 
> 赞同：1
> 
> 时间：2012-04-03T21:38:43.527
> 
> 标签：android, android-emulator, emulation, startup

我正在使用 eclipse 和模拟器开发一个 android 程序，每次启动模拟器时，我都会弹出一个窗口，要求我提供视频捕获设备。我正在开发的应用程序与视频完全无关，所以我绝对不会给出 $#!@ 模拟器是否可以访问或使用我笔记本电脑的内置摄像头。我怎样才能让这个烦人的启动问题保持沉默？

迈克尔

# yii - Yii -CExistValidator 用于外部密钥

> ID：10001806
> 
> 赞同：0
> 
> 时间：2012-04-03T21:39:00.373
> 
> 标签：yii

在一个使用 Yii 的简单项目中，我有一个模型：

签到.php

```
 * The followings are the available columns in table 'checkins':
 * @property integer $id
 * @property integer $user_id
 * @property integer $item_id
 * @property double $lat
 * @property double $long 
```

$user_id 和 $item_id 这两个值属于另外两个表：

```
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'user' => array(self::BELONGS_TO, 'Users', 'user_id'),
        'item' => array(self::BELONGS_TO, 'Items', 'item_id'),
    );
} 
```

我定义了一些验证器：

```
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('user_id, item_id, lat, long', 'required'),

        array('item_id', 'exist', 'on'=>'create', 'attributeName'=>'id', 'className'=>'Items'),

        array('user_id, item_id', 'numerical', 'integerOnly'=>true),
        array('lat, long', 'numerical'),
        // The following rule is used by search().
        // Please remove those attributes that should not be searched.
        array('id, user_id, item_id, lat, long', 'safe', 'on'=>'search'),

    );
} 
```

在 actionCreate 方法 save() 执行时，所有验证器都在工作，但不是用于检查模型项目中是否存在外部密钥的验证器

```
array('item_id', 'exist', 'on'=>'create', 'attributeName'=>'id', 'className'=>'Items'), 
```

如果我尝试保存在 item_id 中具有值的 Checkins 而在 Items 中没有相同的 id，我不会出现任何验证错误。

这是正确的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:26:53.460

我认为这很可能是因为您`'create'`在保存之前没有将模型的场景设置为（我只是在猜测，因为您没有将`$checkin->save()`代码附加到控制器的`actionCreate`.）中。另一个验证最有可能起作用，因为它们没有设置为特定场景（即它们将在所有验证中工作。）。

例如，如果没有 id 为 5 的 Item，下面的代码

```
 $checkin = new Checkin();
    $checkin->text = 'test';
    $checkin->item_id = 5;
    if (!$checkin->validate()){
        print_r($checkin->errors);
    } 
```

将正常工作，因为`Checkin`'s 方案未设置为`'create'`（默认为`'insert'`）。但我尝试了下面的代码

```
 $checkin = new Checkin();
    $checkin->scenario = 'create'; 
    //or you can set it in the instantiation 
    //$checkin = new Checkin('create');
    $checkin->text = 'test';
    $checkin->item_id = 5;
    if (!$checkin->validate()){
        print_r($checkin->errors);
    } 
```

这将导致验证错误。

你能粘贴你的模型保存代码吗？

# zend-framework - 在 Doctrine 生成的实体中缺少命名空间？

> ID：10001807
> 
> 赞同：0
> 
> 时间：2012-04-03T21:39:06.407
> 
> 标签：zend-framework, doctrine-orm

我正在使用命令行中的学说 2 生成实体，但我的应用程序需要设置命名空间，如何确保创建的实体具有**命名空间实体；**在顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:30:11.820

创建下一个文件结构：

```
application/
    /models/
        /Entities/
            User.php 
```

User.php 模型具有下一个命名空间：

```
namespace Entities;

class User { ... }

$user = new \Entities\User(); 
```

不要忘记设置

```
$driverImpl = $config->newDefaultAnnotationDriver('/path/to/app/application/models/Entities');
$config->setMetadataDriverImpl($driverImpl); 
```

# php - php访问mongodb主/从访问

> ID：10001813
> 
> 赞同：0
> 
> 时间：2012-04-03T21:39:22.747
> 
> 标签：php, mongodb

有两台 mongodb 服务器作为主服务器和从服务器，我想知道使用 php new mongo(dbaddress) 的最佳方法是什么，这样一旦其中一台服务器关闭，我就可以在它们之间切换。

我已经测试过了

```
 new Mongo('10.10.10.10:27019', array("replicaSet" => "set")); 
```

其中 10.10.10.10 是主机，0.11 是从机。但它没有用。

我不想有两个巨大的尝试和一个服务器，然后重复整个事情来捕获连接异常（它看起来真的很愚蠢）。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:48:05.813

根据[文档](http://www.php.net/manual/en/mongo.construct.php)，你会这样做：

```
new Mongo('mongodb://10.10.10.10:27019,10.10.10.11:27019', array("replicaSet" => "set")); 
```

# python - Type(3,) 在 python 中返回一个整数而不是一个元组，为什么？

> ID：10001816
> 
> 赞同：5
> 
> 时间：2012-04-03T21:39:28.280
> 
> 标签：python, types, tuples

`type(3,)`返回 int 类型，而

```
t = 3,
type(t) 
```

返回元组类型。为什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-03T21:43:27.720

在构成函数调用运算符的括号内，逗号*不是*用于构建元组，而是用于分隔参数。因此，`type(3, )`等价于`type(3)`。语法允许参数列表末尾的附加逗号。你需要一对额外的括号来构建一个元组：

```
>>> def f(x):
...     print x
... 
>>> f(3)
3
>>> f(3,)
3
>>> f((3,))
(3,) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-03T21:42:08.750

内置`type()`函数是一个函数，因此逗号被解析为参数分隔符而不是元组构造函数。

```
>>> type(3,)
<type 'int'>

>>> type((3,))
<type 'tuple'> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T21:49:38.507

我怀疑 Python 忽略了函数参数中的尾随逗号：

```
def f (a):
    print a
    print type(a)

>>> f(3,)
3
<type 'int'> 
```

使用不带括号的逗号分隔值来创建元组是一种在任何地方都不起作用的技巧。列表推导是一个很好的例子：

```
>>> [a,a*2 for a in range(4)]
  File "<stdin>", line 1
    [a,a*2 for a in range(4)]
             ^ 
```

你必须这样做：

```
>>> [(a,a*2) for a in range(4)]
[(0, 0), (1, 2), (2, 4), (3, 6)] 
```

但是，列表解包工作正常，所以它是一个变量，允许无限的逗号分隔值：

```
>>> [(a,b) for a, b in zip(range(4),range(4))]
[(0, 0), (1, 1), (2, 2), (3, 3)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T21:50:00.650

In`func(bunch_of_args)`你可以在最后一个 arg 后面加上逗号，就像 in

```
alist = [1, 2, 3, ] 
```

# linq - 包括在继承的存储库中不可用

> ID：10001820
> 
> 赞同：1
> 
> 时间：2012-04-03T21:39:58.747
> 
> 标签：linq, entity-framework, linq-to-entities

我有一个像这样的存储库：

```
public class Repository<TEntity> : IRepository<TEntity> where TEntity : class, IEntity
{
    protected readonly IContext _db;

    public Repository(IContext context)
    {
        _db = context;
    }

   ...
} 
```

在此类的方法中，我可以编写包含以下内容的语句：

```
var regionalAdmins = _db.Users.Include("Areas"); 
```

所以我写了一个继承自那个的存储库：

```
public class AreaRepository : Repository<Area>
{
    public AreaRepository(IContext context) : base (context)
    {
    }

    public new IEnumerable<Area> GetAreas()
    {
        return _db.Users.Include("Areas");
    }
} 
```

在这个级别，虽然我得到了错误：

> System.Data.Entity.IDbSet'不包含'Include'的定义，并且找不到接受'System.Data.Entity.IDbSet'类型的第一个参数的扩展方法'Include'

为什么会发生这种情况？我有来自父母的相同背景。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:56:47.557

[`Include`](http://msdn.microsoft.com/en-us/library/gg696395%28v=vs.103%29.aspx)是在中声明的扩展方法[`System.Data.Entity.DbExtensions`](http://msdn.microsoft.com/en-us/library/gg696544%28v=vs.103%29.aspx)。您可能缺少命名空间的`using`子句`System.Data.Entity`。

# emacs - 你如何让 emacs 将行号写到文件中？

> ID：10001829
> 
> 赞同：3
> 
> 时间：2012-04-03T21:40:31.963
> 
> 标签：emacs

您将如何从 emacs 编写仅包含行号的文件，例如：

```
1
2
3
4
5 
```

理想情况下，这将是您将执行的命令（如何执行？），可以告诉您要打印多少行。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T22:11:13.497

这是一个快速的 elisp 函数：

```
(defun write-line-numbers (n)
  (interactive "nNumber of lines: ")
  (save-excursion
    (with-output-to-temp-buffer "*lines*"
      (dotimes (line n)
        (princ (format "%d\n" (1+ line))))
      (set-buffer "*lines*")
      (write-file "lines.txt")))) 
```

您可以使用`(write-line-numbers 8)`elisp 或`M-x write-line-numbers 8`交互式运行它。

或者您可以将上述内容保存为脚本并像这样运行 emacs：

```
emacs -Q --script write-line-numbers.el --eval '(write-line-numbers 8)' 
```

但正如 Moritz 所指出的，在 emacs 之外还有更好的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T22:09:25.367

你为什么不使用shell程序`seq`呢？例如`seq 20`，将打印 20 条整齐的行，编号为 1 到 20。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T09:03:51.103

> `M-:` (with-temp-file "foo.txt" (dotimes (i 15) (insert (format "%2d\n" (1+ i)))))

如果您经常这样做，请将其设为函数：

```
(defun write-sequence (length output-file)
  (interactive "nLength of sequence: \nFOutput file: ")
  (with-temp-file output-file
    (dotimes (i length) (insert (format "%d\n" (1+ i)))))) 
```

# cakephp - CakePHP 如何显示所有表格字段名称

> ID：10001831
> 
> 赞同：0
> 
> 时间：2012-04-03T21:40:44.417
> 
> 标签：cakephp

CakePHP 新手，所以要温柔...

我正在尝试遍历一个表以显示所有只读字段（标签和值）。在我的编辑功能中，我得到了表格

```
$this->set('invoice', $this->Invoice->read(null, $id)); 
```

在我看来，我想遍历整个表架构并将字段名称和值作为标签输出，例如 fieldName: value

```
Invoice Number: SVC00158
Invoice Date: 03/03/12 
```

此表中有 37 个字段。我宁愿不必为每个人手动编码。我知道要像这样检索输入字段

```
echo $this->Form->input('purchaseOrderNumber'); 
```

但我似乎找不到 input() 方法的“只读”属性。希望这是有道理的。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:52:26.883

写吧：

```
<?=$this->Form->inputs();?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:54:24.003

您可以遍历模式并像这样输出它：

```
// assumes $result contains model data
$schema = $this->Model->schema();
foreach ($schema as $field => $attrs) {
  echo $result['Model'][$field];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T02:14:19.240

如果您是初学者，我建议您研究 Cake Bake（它会从控制台“烘烤”您的所有文件）。我的意思是基于您当前数据库模式的视图、控制器和模型，以便为您服务，甚至对其应用一些样式。

我希望这会有所帮助

# c# - 在服务之间共享数据

> ID：10001834
> 
> 赞同：3
> 
> 时间：2012-04-03T21:41:00.010
> 
> 标签：c#, wcf

我需要分解我的双工服务，并希望将大量传输封装到一个服务中并从其他服务中检索。我曾经在一项服务中拥有所有功能，但现在需要从缓冲切换到流式传输以考虑大小/内存调整。我在[这里](https://stackoverflow.com/questions/757588/wcf-sharing-cached-data-across-multiple-services)和[这里](https://stackoverflow.com/questions/5899956/how-do-i-share-cached-data-between-a-wcf-service-and-the-process-hosting-the-ser)看到了一些问题，但它们已经很老了

我将在服务之间使用什么 IPC，命名管道？

**服务 A**公开了 2 个方法`Guid Upload(stream)`，`Stream Download(Guid)`并使用 net.tcp 流式传输，效果很好，

现在我想坚持**服务 B**吗？这会是 namedPipe WCF 吗？

**服务 C** --> 业务层 -->**服务 B**使用`Guid`，检索和计算项目，持久回 B

我的问题是什么用于持久性/**服务 B**

从客户的角度

1.  客户来电`ServiceA_Proxy.Upload(someLargeItem)`返回`Guid`
2.  客户然后调用`ServiceC_Proxy.DoSomeWork(GuidFromCall_1)`
3.  客户然后调用`ServiceA_Proxy.Download(GuidFromCall_1)`
4.  客户端显示给最终用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T23:15:03.350

*是的，只要通信进程在同一台服务器上运行，*您就可以使用命名管道作为**WCF 绑定** 。基本上，您创建 WCF 服务就像您使用任何其他绑定（如 TCP/IP）一样，但您需要将**端点**配置为使用.***`netNamedPipeBinding`***

 ***如果您想保留/保存数据，则可以根据您的要求将其保存到文件甚至数据库中。如果您只是想保留数据直到 ServiceC 调用它，那么`Dictionary<Guid, SomeLargeItem>`就足够了。

所以你的流程看起来像：

1.  客户端调用 ServiceA_Proxy.Upload(someLargeItem) 返回 Guid
2.  ServiceA 调用 ServiceB_Proxy.Upload(GuidFromCall_1, someLargeItem)
3.  客户端然后调用 ServiceC_Proxy.DoSomeWork(GuidFromCall_1) （您需要首先确保上传完成）
4.  ServiceC 调用 ServiceB_Proxy.Download(GuidFromCall_1)
5.  ServiceC 调用 DoSomeWork(GuidFromCall_1) （内部）
6.  ServiceC 调用 ServiceB_Proxy.Upload(GuidFromCall_1, someLargeItemProcessed)
7.  客户端然后调用 ServiceA_Proxy.Download(GuidFromCall_1) （同样，您需要确保处理完成）
8.  ServiceA调用ServiceB_Proxy.Download(GuidFromCall_1)，返回给Client。
9.  客户端显示给最终用户

我不确定我没有搞砸什么。如您所见，这变得非常复杂。您需要问自己这是要走的路，如果以这种方式拆分您的服务真的会使其更具可扩展性吗？您计划使用 NamedPipes，因此所有处理仍将在同一台机器上。

你真的应该考虑你的设计。也许将功能拆分为一些 *.dll 并直接调用它们就足够了？这样，您将实现层的逻辑分离。 **从缓冲通信切换到流通信不需要您将逻辑拆分为更多服务。**

如果您想要**真正的**可扩展性，请考虑使用*队列*（例如**MSMQ**）并为每个服务使用单独的机器。***

# php - 如何重置使用“粘性”值的表单

> ID：10001844
> 
> 赞同：0
> 
> 时间：2012-04-03T21:41:39.060
> 
> 标签：php, forms, session, sticky

我有一个表单，我`value="<?php echo $_SESSION['myVar']; ?>"`在输入中使用，以便在服务器端验证期间重新填充值等值是“粘性的”。我的问题是我如何实际制作重置按钮（type =“reset”）重置表单并删除保存的值。*如果可能*，我正在寻找不使用 javascript 的解决方案！谢谢！

形式：

```
<ul>
 <li>
  <label class="label1" for="name"> Name: </label>
  <input class="input1" type="text" name="name" id="name"  maxlength="40" value="<?php echo $_SESSION['name']; ?>" />
 </li>
 <li>
  <label class="label1" for="email"> Email: </label>
  <input class="input1" type="text" name="email" id="email"  maxlength="40" value="<?php echo $_SESSION['email']; ?>" />
 </li>
 <li>
  <label class="label1" for="message"> Message: </label>
  <textarea class="flat input1" name="message" id="message" rows="5" cols="40"><?php echo $_SESSION['message']; ?></textarea>
 </li>
</ul> 
```

表单处理程序：

```
//save user entered values
$_SESSION['name'] = trim($_POST['name']);
$_SESSION['email'] = trim($_POST['email']);
$_SESSION['message'] = trim($_POST['message']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:45:06.967

如果您不想要 javascript，则需要重新加载页面。将此按钮设置为 reset_session.php 的链接，您将在其中编写

```
$_SESSION['name'] = "";
$_SESSION['email'] = "";
$_SESSION['message'] = ""; 
```

然后使用 header() 重定向回表单。如果您想留在页面上，可以向同一页面 (reset_session.php) 发送 ajax 请求，然后更新输入中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:44:33.773

为此，您需要使用 JavaScript。重置将始终重置为加载标记时表单的原始值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:44:41.163

重置按钮会将表单重置为`value`属性内的值。就是这样。当您填充这些值时，它将始终重置为这些值。

如果要将其重置为空白值，请不要填充/预填充这些值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T21:46:02.333

如果您只使用 php，您可以尝试： `unset($_SESSION['myVar']);`或`session_destroy();`

# cocoa - Cocoa：动画路径（移动虚线）

> ID：10001846
> 
> 赞同：1
> 
> 时间：2012-04-03T21:42:07.643
> 
> 标签：cocoa, animation, selection, marching-ants

我正在制作一个图像编辑应用程序，需要在屏幕上显示选择区域。在 Illustrator、Photoshop、GIMP 和其他所有内容中，这使用动画虚线显示，这种虚线在选区周围爬行。

我需要做同样的事情。如何在 Cocoa 中的视图上放置这样的动画线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:55:45.620

通常这些“爬行”的线条只是几帧动画。也许只有2个。

制作一个知道此“选择”区域尺寸的自定义视图。从 1px 白线开始。然后，您可以获取每个像素的 x 和 y 尺寸，通过每个“链接”的所需“大小”对其进行修改，以确定一个特定像素是黑色还是白色。修改您对“黑色或白色”当前时间的决定以进行动画处理。

或者，可以将黑色和透明正方形“网格”的 png 动画化为在纯白色边界线顶部对角移动。将“网格”视图裁剪为仅直接在边框上可见，它可能会实现相同的“爬行”外观。这可能是一种昂贵的方式来完成它，但也许它会给你一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:16:36.980

有时这种效果被称为“行军蚂蚁”，如果这有助于你搜索的话。

以下是[使用 Core Animation 的方法。](http://www.cimgf.com/2009/10/20/marching-ants-with-core-animation/)

# php - 如果用户正在滚动（JQuery），则禁用 div 上的自动刷新

> ID：10001864
> 
> 赞同：1
> 
> 时间：2012-04-03T21:43:48.977
> 
> 标签：php, jquery, css, scroll, refresh

我的页面上有一个 DIV #alerts_wrapper，每 5 秒刷新一次，如下所示：

```
refresh_alerts = setInterval(function () {
    $('#leftside div#alerts_wrapper').load('staffhome.php #alerts_container' );
}, 5000); 
```

我将 div 的最大高度设置为 200px，并滚动到自动。如果用户在此 div 上滚动，如何阻止 div 刷新？然后如果用户停止滚动，重新开始刷新？？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:53:25.517

使用这个 Jquery 插件：[scroll-startstop.events.jquery](http://code.google.com/p/oemar/downloads/detail?name=scroll-startstop.events.jquery.js&can=2&q=)

使用上面提到的插件，您现在可以访问滚动事件，如下所示：

```
$('#yourdiv').bind('scrollstart', function(){
    //user is scrolling
});
$('#yourdiv').bind('scrollstop', function(){
    //user has finished scrolling
}); 
```

将此与 bool 标志结合使用以了解何时刷新 div。

您的最终代码应如下所示：

```
var isScrolling = false;

$('#yourdiv').bind('scrollstart', function(){
    isScrolling = true;
});
$('#yourdiv').bind('scrollstop', function(){
    isScrolling = false;
});

refresh_alerts = setInterval(function () {
    if (!isScrolling){
        $('#leftside div#alerts_wrapper').load('staffhome.php #alerts_container' );
    }
}, 5000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T22:02:55.723

**编辑：**使用新代码更新，无需轮询，只需在滚动时设置/重置标志。

[**演示**](http://jsfiddle.net/skram/hRreU/6/)

```
var isScrolling = false;
$(function() {

    $('#scrollingDiv').on('scroll', function() {
        isScrolling = true;
    });

    refreshTimer = setInterval(refreshContent, 5000);

    function refreshContent() {
        if (!isScrolling) {
            $('#scrollingDiv').prepend('Latest Content <br />');//test code
            //$('#leftside div#alerts_wrapper').load('staffhome.php #alerts_container');            
        }
        isScrolling = false;
    }

}); 
```

---------- 旧帖 ----------

对 div 滚动事件进行简单的轮询就可以解决问题。见[**演示**](http://jsfiddle.net/skram/hRreU/5/)

```
var isScrolling = false;
var refreshTimer = null;
$(function() {

    $('#scrollingDiv').on('scroll', function() {
        isScrolling = true;
        if (refreshTimer != null) {
            clearInterval(refreshTimer);
            refreshTimer = null;
        }
    });

    //polling to see if still scrolling
    var pollScrolling = setInterval(function() {
        isScrolling = false;

        if (refreshTimer == null) {
            refreshTimer = setInterval(refreshContent, 5000);
        }    
    }, 500);

    //initialize timer
    refreshTimer = setInterval(refreshContent, 5000);

    function refreshContent() {
        if (!isScrolling) {
            $('#scrollingDiv').prepend('Latest Content <br />');
            //$('#leftside div#alerts_wrapper').load('staffhome.php #alerts_container');            
        }
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:57:00.393

为此，我认为您需要实现此处概述的自定义滚动事件：http: [//james.padolsey.com/javascript/special-scroll-events-for-jquery/](http://james.padolsey.com/javascript/special-scroll-events-for-jquery/)

然后你可以创建一个全局变量（或者更好的是，在一个带有区间代码的闭包中），我们称之为`var isScrolling = false`. `scrollstart`为和创建处理程序`scrollstop`：

```
jQuery(div).on( 'scrollstart', function( ) {
    isScrolling = true;
} );
jQuery(div).on( 'scrollstop', function( ) {
    isScrolling = false;
} ); 
```

最后，检查滚动标志的间隔：

```
refresh_alerts = setInterval(function () {
    if( !isScrolling ) {
        $('#leftside div#alerts_wrapper').load('staffhome.php #alerts_container' );
    }
}, 5000); 
```

# asp.net-mvc-4 - Web API + MVC 4 关于复杂类型的模型绑定

> ID：10001879
> 
> 赞同：1
> 
> 时间：2012-04-03T21:44:52.027
> 
> 标签：asp.net-mvc-4, asp.net-web-api, entity-framework-4.1

我有以下课程：

```
public class State
{
    public long Id                    { get; set; }
    public string Name                { get; set; }
    public string Abbreviation        { get; set; }

    // Navigation Properties
    public virtual Country Country    { get; set; }
}

public class School
{
    public long Id                    { get; set; }
    public string Name                { get; set; }
    public string Abbreviation        { get; set; }

    // Navigation Properties
    public virtual State State        { get; set; }
} 
```

以及我的 SQL Server 中的以下数据

```
| School|             |               |
|  Id   | Name        |    State      |
|  1    | UCLA        |      1        |
+-------+-------------+---------------+
| State |             |               |
|  Id   | Name        | Abbreviation  |
|  1    | California  |      CA       | 
```

我正在尝试创建一个 Rest 控制器，该控制器使用 Web API 使用 HTTP POST 动词创建一个学校实例。

```
public HttpResponseMessage<School> Post( School school )
{
    SchoolService.CreateSchool( school );
    var response = new HttpResponseMessage<School>( school, HttpStatusCode.Created );
    string uri = Url.Route( null, new { id = school.Id } );

    response.Headers.Location = new Uri( Request.RequestUri, uri );
    return response;
} 
```

Web API 从我的 Web 表单中正确绑定了我的 School 类的 Name 和 Abbreviation 属性并调用控制器中的 POST 方法，但它不知道如何处理 State 类。我不太确定如何设置。我想要一个绑定到 State 类的下拉列表，当我提交 School 的创建时，我现有数据中的正确状态将分配给新的学校实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:37:36.550

First of all, your domain model design is a little rough. Your `School` table should have a `FK` to `State` table and you should have that inside your POCO classes as well:

```
public class School
{
    public long Id                    { get; set; }
    public long StateId               { get; set; }
    public string Name                { get; set; }
    public string Abbreviation        { get; set; }

    // Navigation Properties
    public virtual State State        { get; set; }
} 
```

Then you should have a form field as similar to below:

```
<select id="StateId" name="StateId">
    <option value="">Select a State</option>
    <option value="310">CA</option>
    <option value="311">NY</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T14:03:04.267

在我目前的项目中，我使用以下方法实现了类似的效果：

我有一个 Device 类 (POCO) 和一个 DeviceCommand 类 (POCO)。设备可以有许多命令，每个命令将只有一个设备。

我没有打扰 ViewModel 和 POCO 类在层之间使用。

```
public class Device
{
    [Key]
    public int ID { get; set; }

    public int DeviceID { get; set; }

    public bool IsActive { get; set; }

    // Navigational properties
    public ICollection<DeviceCommand> CommandList { get; set; }
} 
```

和

```
public class DeviceCommand
{
    public int Id { get; set; }

    public string CommandText { get; set; }
    public string CommandId { get; set; }

    // Navigational properties
    public int DeviceId { get; set; }
    public Device Device { get; set; }
} 
```

在我的 DbContext 派生类中，我有以下代码：

```
 protected override void OnModelCreating(System.Data.Entity.DbModelBuilder modelBuilder)
    {         
        modelBuilder.Entity<DeviceCommand>()
            .HasRequired(d => d.Device)
            .WithMany(l => l.CommandList)
            .HasForeignKey(b => b.DeviceId)
            .WillCascadeOnDelete();
    } 
```

IMO 您必须使用注释或流畅的 API 设置外键关系。

如果 POST 方法中的参数没有属性，则纯粹根据参数的 .NET 类型做出决定。“简单类型”使用模型绑定。复杂类型使用格式化程序。

请参考此链接以更好地了解 Web api 绑定：

[http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

希望这可以帮助。

# php - 在php中使用foreach修改以空格开头的数组

> ID：10001886
> 
> 赞同：1
> 
> 时间：2012-04-03T21:45:51.630
> 
> 标签：php

第一次在这里发帖，刚进入开发阶段。

尝试用多行修改文本文件的输出，有些以字符开头，有些以空格/制表符开头。我想让以制表符/空格开头的行与它之前的任何行连接起来。我一直在考虑用正则表达式来做这件事，但我不确定如何构造它。我在想我需要使用'foreach'来查看每一行，用空格找到每一行，然后使用一系列正则表达式将它们连接到前一行。这就是我自己已经走了多远，以及我*认为*foreach 应该在哪里。

```
<?php

$file_handle = fopen("parse.txt", "r");

while (!feof($file_handle)){

    $each_line = fgets($file_handle);
    foreach ($each_line    ){

        }

    print $each_line . "<br />";
}

fclose($file_handle);

?> 
```

具体的文本文件位于[http://krondorkrew.com/parse/parse.txt](http://krondorkrew.com/parse/parse.txt) 如果你去那里查看 /parse 文件夹的索引，我也有我当前构建的这个 php。

我的下一步是通过在第一行爆炸将每一行分成单独的数组：在每一行中，但我仍然想自己尝试解决这个问题，然后再向你寻求帮助（但如果你有任何见识，我不会别看）

预先感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:57:44.977

这段代码完成了这项工作：

```
<?php

$output = "";
foreach (file('parse.txt') as $line) {
  $output .= trim($line);

  // if the current line starts noes not starts with a tab, we append
  // a \n to it
  if (substr($line, 0, 1) != "\t") {
    $output .= "\n";
  }
}
echo $output; 
```

但是您应该使用正则表达式进行这种文本操作。 [此处为键盘示例](http://codepad.org/oxFTvHS5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:58:01.917

下面是一个代码示例，只是缺少`startsWithWhitespaceOrTab`函数（应该很容易写，我把这个作为例子）。其余的已经工作了：

```
foreach (file('parse.txt', FILE_IGNORE_NEW_LINES) as $line) {
    if (!startsWithWhitespaceOrTab($line)) {
        echo "\n";
    }
    echo $line;
} 
```

请参阅 PHP[`file`](http://php.net/file)函数和[`foreach`循环](http://php.net/foreach)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:52:21.583

用于[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)将文件读入单个字符串。然后，您可以使用正则表达式来匹配空格，或者一个新行，然后是空格，等等。

我会发布正则表达式，但我不确定你到底想要做什么。你不能在这里测试正则表达式：http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T21:54:46.450

你可能会想要这些方面的东西：

```
<?php

$file_handle = fopen("parse.txt", "r");

$key = null;
$arr = array();

while (!feof($file_handle)){

    $each_line = fgets($file_handle);

    if ($key && preg_match('/^\s+/', $each_line)) {
        $arr[$key] .= ' ' . trim($each_line);
    } else if (preg_match('/^([a-zA-Z]+):(.*)$/', $each_line, $m)) {
        $key = $m[1];
        $arr[$key] = trim($m[2]);
    }

}

fclose($file_handle);

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T21:59:46.750

又一个解决方案。为您收集数组中的行。我想我更喜欢@pinouchon。

```
$file_handle = fopen("parse.txt", "r");
$fixed = array();
while (!feof($file_handle)){
    $line = fgets($file_handle);
    if (ctype_space($line[0])) { // Checks for whitespace
        $fixed[count($fixed)-1].= trim($line); // Adds to previous line
    } else {
        $fixed[] = trim($line); // Otherwise, keep line as is
    }
}
fclose($file_handle);

// Print
echo implode("\n",$fixed); 
```

# android - Eclipse Maven 构建在 com.google.android 中包含 xpp3 失败

> ID：10001891
> 
> 赞同：0
> 
> 时间：2012-04-03T21:46:24.670
> 
> 标签：android, eclipse, maven

我正在尝试使用 maven 构建一个 android 项目，但 maven 不喜欢 Qname 类：

```
[INFO] /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java [-Xms256m, -Xmx512m, -jar, /Users/bry_m/code/android-sdk-macosx/platform-tools/lib/dx.jar, --dex, --output=/Users/bry_m/code/eclipse_workspace_2mar2012/maven.1331582410730/trunk/target/classes.dex, /Users/bry_m/code/eclipse_workspace_2mar2012/xpp3/xpp3/1.1.4c/xpp3-1.1.4c.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/org/springframework/android/spring-android-rest-template/1.0.0.M2/spring-android-rest-template-1.0.0.M2.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/org/apache/httpcomponents/httpcore/4.0.1/httpcore-4.0.1.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/org/apache/httpcomponents/httpclient/4.0.1/httpclient-4.0.1.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/org/codehaus/jackson/jackson-mapper-asl/1.6.4/jackson-mapper-asl-1.6.4.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/xerces/xmlParserAPIs/2.6.2/xmlParserAPIs-2.6.2.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/org/json/json/20080701/json-20080701.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/com/google/android/android/2.3.1/android-2.3.1.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/commons-codec/commons-codec/1.3/commons-codec-1.3.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/org/codehaus/jackson/jackson-jaxrs/1.6.4/jackson-jaxrs-1.6.4.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/maven.1331582410730/trunk/target/classes, /Users/bry_m/code/eclipse_workspace_2mar2012/org/khronos/opengl-api/gl1.1-android-2.1_r1/opengl-api-gl1.1-android-2.1_r1.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/org/codehaus/jackson/jackson-core-asl/1.6.4/jackson-core-asl-1.6.4.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/org/twitter4j/twitter4j-core/2.2.6-SNAPSHOT/twitter4j-core-2.2.6-SNAPSHOT.jar, /Users/bry_m/code/eclipse_workspace_2mar2012/cocos2d_android/cocos2d_android/1.0.0-SNAPSHOT/cocos2d_android-1.0.0-SNAPSHOT.apklib, /Users/bry_m/code/eclipse_workspace_2mar2012/com/codeslap/android-facebook/1.5/android-facebook-1.5.jar]
[INFO] 
[INFO] trouble processing "javax/xml/namespace/QName.class":
[INFO] 
[INFO] Ill-advised or mistaken usage of a core class (java.* or javax.*)
[INFO] when not building a core library. 
```

当我引入一个单独的 apklib 文件时，这个问题才开始出现：

```
 <dependency>
        <groupId>cocos2d_android</groupId>
        <artifactId>cocos2d_android</artifactId>
        <version>1.0.0-SNAPSHOT</version>
        <type>apklib</type>
    </dependency> 
```

看来`QName`该类只出现在我的 xpp3 jarfile 的依赖项中，据我所知，它只出现在这个依赖项中：

```
<dependency>
    <groupId>com.google.android</groupId>
    <artifactId>android</artifactId>
    <version>${android-version}</version>
</dependency> 
```

我尝试使用排除标记来让 Maven 很好地使用它，但是 xmlpullparser 类正在我的项目中的代码中使用，所以当我排除它时出现类未找到错误。

为了完整起见，这是我的完整依赖项列表：

```
<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>${android-version}</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-jaxrs</artifactId>
        <version>${jacksonVersion}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.android</groupId>
        <artifactId>spring-android-rest-template</artifactId>
        <version>${spring-android-version}</version>
    </dependency>
     <dependency>
        <groupId>com.codeslap</groupId>
        <artifactId>android-facebook</artifactId>
        <version>1.5</version>
    </dependency>
    <dependency>
        <groupId>cocos2d_android</groupId>
        <artifactId>cocos2d_android</artifactId>
        <version>1.0.0-SNAPSHOT</version>
        <type>apklib</type>
    </dependency>
    <dependency>
     <groupId>org.twitter4j</groupId>
     <artifactId>twitter4j-core</artifactId>
     <version>[2.2,)</version>
    </dependency>
</dependencies> 
```

我已经看到其他问题谈论这个被导入到其他谷歌数据 api 中，但显然我没有在这里使用这些 - 有人可以解释为什么 Maven 抱怨这个只是主要谷歌 android api 的一部分的类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:25:25.500

您不能构建导入使用 java.* 或 javax.* 包的 JAR 文件的 Android 应用程序。cocos2d_android 依赖要么包含这个类的副本，要么包含一个传递依赖。您可能需要使用[Maven 依赖项排除](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)来排除 javax.xml.namespace.QName 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:30:32.657

如果您引用 com.google.android:android 作为依赖项，请不要忘记设置提供的范围 - 否则插件会尝试将其打包到生成的 apk 中

# java - mongoDB - 地图减少输出集合中的陈旧值

> ID：10001892
> 
> 赞同：1
> 
> 时间：2012-04-03T21:46:24.490
> 
> 标签：java, mongodb, mapreduce

```
{ "userID" : 1, "amount" : 2, "date" : ISODate("2012-04-03T20:53:19.490Z") }
{ "userID" : 1, "amount" : 4, "date" : ISODate("2012-04-03T20:53:19.490Z") }
{ "userID" : 2, "amount" : 4, "date" : ISODate("2012-04-03T20:53:19.490Z") }
{ "userID" : 3, "amount" : 1, "date" : ISODate("2012-04-03T20:53:19.490Z") }
{ "userID" : 1, "amount" : 2, "date" : ISODate("2012-04-03T20:53:19.490Z") } 
```

当我计算购买的总和时，我正在执行增量 Map/Reduce 操作。m/r 函数很简单，这里就不写了。

```
 MapReduceCommand cmd = new MapReduceCommand(coll, map, reduce, "result",  MapReduceCommand.OutputType.MERGE, null); 
```

结果如下。这是完美的：

```
{ "_id" : 1, "value" : 8 }
{ "_id" : 2, "value" : 4 }
{ "_id" : 3, "value" : 1 } 
```

如果将 userIF 4 的用户添加到系统中，我的增量 map reduce 将处理它，并将新行添加到结果集合中。

**问题：**如果 userID 2 将从系统中删除，他的行仍将保留在结果集合中。使用增量 Map reduce 时如何处理这些陈旧的值？

# asp.net - 异常后诊断跟踪数据消失

> ID：10001894
> 
> 赞同：1
> 
> 时间：2012-04-03T21:46:29.887
> 
> 标签：asp.net, .net, azure, system.diagnostics, azure-diagnostics

我正在使用 Azure 诊断跟踪来记录消息。配置是每分钟将记录的数据传输到 Azure 存储表。

在测试设置时，我发现如果出现未经处理的异常，之前的跟踪数据就会消失。

例如：

```
 Trace.WriteLine("T1");
 Trace.WriteLine("T2");
 Trace.WriteLine("T3"); 
```

这将在一分钟后显示在 Azure 表中

```
 Trace.WriteLine("T1");
 Trace.WriteLine("T2");
 Trace.WriteLine("T3");
 throw new TimeoutException(); 
```

由于异常，这不会记录数据。

我的印象是诊断应该保留数据，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:47:39.403

你需要打电话给

```
Trace.Flush(); 
```

以确保数据被持久化。跟踪信息缓冲在内存中，异常会导致该信息在进入 Azure 表传输过程可以拾取的诊断区域之前丢失。

您还可以`autoflush`在配置文件中设置该属性，以确保每次写入后自动刷新 Trace 数据：

```
<system.diagnostics>    
  <trace autoflush="true">
    ...
  </trace>
</system.diagnostics> 
```

# linux - Linux 递归 chmod 仅在子目录上

> ID：10001895
> 
> 赞同：9
> 
> 时间：2012-04-03T21:46:59.090
> 
> 标签：linux, chmod

我在 linux 上，我有一个目录，里面有许多子目录和项目。我想在所有目录和子目录上运行递归 chmod，但在这些目录中没有文件。

```
chmod -R 777 {folder} 
```

我可以在 chmod 命令中添加一个标志以使 chmod 仅适用于子目录吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-03T21:49:26.340

在我的头顶上：

```
find {folder} -type d -print0 | xargs -0 chmod 777 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T21:51:16.587

`find {folder} -type d -print0 | xargs -0 chmod 777`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T21:54:45.570

尝试：

查找 {文件夹} -type d -exec chmod 777 {} \;

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-16T05:50:38.160

直接来自[手册页](http://ss64.com/bash/chmod.html)： ![http://ss64.com/bash/chmod.html](../Images/0164ad43fac9cb32daef8145622916f1.png)

并且在这里也得到了证实：[https ://stackoverflow.com/a/17091831/538512](https://stackoverflow.com/a/17091831/538512)

使用以下格式或其派生词`chmod -R u=rwX,go=rwX {folder}`

希望有帮助！

# php - 编辑文章时，我在 mysql 数据库中的内容重复

> ID：10001897
> 
> 赞同：0
> 
> 时间：2012-04-03T21:47:09.290
> 
> 标签：php, mysql, content-management-system, duplicates

我有一些新闻文章的基本 CMS，基本上我的一些内容包含链接作为

```
 <a href=""></a> 
```

html 以便在写入页面时添加链接。这可能是我的内容被随机复制的原因吗？什么时候编辑？

这是我用来编辑的 php。

```
 include'includes/connection.php';
          $pName = $_POST['pName'];
         $pItem = $_POST['pItem'];
         $pCategory = $_POST['pCategory'];
         $pDate = $_POST['pDate'];
         $pAuthor = $_POST['pAuthor'];
         $pContent = $_POST['pContent'];
         $Page = $_POST['Page'];
         $id = $_POST['id'];
         $pApproval = $_POST['pApproval'];
         $pPriority = $_POST['pPriority'];
         $pImage_Name = $_POST['pImage_Name'];

         if($pItem != 2){

         $updateq = "UPDATE sitecontent SET ID = '$pID', Post_Title = '$pName',              Post_Year = '$pCategory', Date = '$pDate', Post_Author = '$pAuthor', Post_Content = '$pContent', Page = '$Page', Post_Approval = '$pApproval', Priority = '$pPriority', Image_Name = '$pImage_Name' WHERE ID = '$_POST[id]'";

         $result = mysql_query($updateq) or die (mysql_error());
         header("Location:admin.php");

         }
         if($pCategory = 2){
     $updateq = "UPDATE reviews SET review_id = '$pID', review_title = '$pName', review_category = '$pCategory', review_content = '$pContent', review_image = '$piName', review_approval = '$pApproval' WHERE ID = '$_POST[id]'";

         $result = mysql_query($updateq) or die (mysql_error());
         header("Location:reviews-category.php");
         } 
```

这是发送数据之前的页面。

```
 <form action="editp.php" method="POST" name="editform">
    <table cellpadding="10" >
        <tr>
        <td width="86" valign="top" >
        <label for="pName" style="padding:10px; ">Post Title</label></td>
        <td width="550">
        <input type="text" name="pName" style=" width:550px;border:#000099; margin:10px;" value="<?php echo $post['Post_Title']; ?>"/>
        </td>
        </tr>
        <tr>

         <td width="86" valign="top" >
        <label for="pCategory" style="padding:10px; ">Category</label></td>
        <td width="550">
        <input type="text" name="pCategory" style=" width:50px;border:#000099; margin:10px;" value="<?php echo $post['Post_Year']; ?>"/>
        </td>
        </tr>
        <tr>
        <td>
        <label for="pItem" style="padding:10px;">Item Type</label>
        </td>
        <td>
        <select name="pItem" style="border:#000099; margin:10px;">
            <option value="1">News</option>
            <option value="2">Review</option>
        </select>
        </td>
        </tr>
        <tr>
        <td>
        <label for="pName" style="padding:10px;">Article ID</label>
        </td>
        <td>
        <input type="text" name="pID" style="border:#000099; margin:10px;" value="<?php echo $post['ID']; ?>"/>
        </td>
        </tr>
        <tr>
          <td>
            <label for="pName" style="padding:10px;">Post Date</label>
            </td>
          <td>
                <input type="text"  name="pDate" style="border:#000099; margin:10px;" value="<?php echo $post['Date']; ?>">

            </td>
        </tr>
        <td>
        <label for="pName" style="padding:10px;">Post Author</label>
        </td>
        <td>
        <input type="text" name="pAuthor" style="border:#000099; margin:10px;" value="<?php echo $post['Post_Author']; ?>"/>
        </td>
        </tr>
         <tr>
        <td>
        <label for="pName" style="padding:10px;">Home Page</label>
        </td>
        <td>
        <select name="Page" style="border:#000099; margin:10px;">
            <option value="0">None</option>
            <option value="1">Home</option>
        </select>
        </td>
        </tr>
        <tr>
        <td>
        <label for="pPriority" style="padding:10px;">Home Priority</label>
        </td>
        <td>
        <select name="pPriority" style="border:#000099; margin:10px;">
            <option value="0">None</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
        </td>
        </tr>
        <tr>
        <td>

          <label for="pName" style="padding:10px;">Post Content</label>
          </td>
          <td>
            <textarea style="width:550px; height:200px;border:#000099; margin:10px;" type="text" name="pContent" id="pContent" value="<?php echo $post['Post_Content']; ?>"><?php echo $post['Post_Content']; ?></textarea>
            </td>
            </tr>
               <tr>
            <td>
            </td>
            <td style="padding:10px;">
            <span id="btnStrong" style="  padding: 2px 8px;background-color:#C00;font-family:'Trebuchet MS', Arial, Helvetica, sans-serif; color:#FFF; cursor:pointer;">Bold</span> &nbsp;
             <span id="btnItalic" style=" padding: 2px 8px; background-color:#C00;font-family:'Trebuchet MS', Arial, Helvetica, sans-serif; color:#FFF; cursor:pointer;">Italic</span> 
             <span id="btnPara" style=" padding: 2px 8px; background-color:#C00;font-family:'Trebuchet MS', Arial, Helvetica, sans-serif; color:#FFF; cursor:pointer; margin-left:10px;">Paragraph</span>
             <span id="btnBreak" style=" padding: 2px 8px; background-color:#C00;font-family:'Trebuchet MS', Arial, Helvetica, sans-serif; color:#FFF; cursor:pointer; margin-left:10px;">Line Break</span>

             <span id="btnLink" style="  padding: 2px 8px;background-color:#C00;font-family:'Trebuchet MS', Arial, Helvetica, sans-serif; color:#FFF; cursor:pointer;">Link</span>
           </td>
        </tr>
        <td>
        <label for="pImage_Name" style="padding:10px;">Image Name</label>
        </td>
        <td>
        <input type="text" name="pImage_Name" style="border:#000099; margin:10px; width:550px;" value="<?php echo $post['Image_Name']; ?>"/>
        </td>
        </tr>
         <tr>
           <td>
             <label for="pApproval" style="padding:10px;">Approval</label>
             </td>
           <td>
             <select name="pApproval" style="border:#000099; margin:10px;">
               <option value="0">Pending</option>
               <option value="1">Approved</option>
               </select>
             </td>
         </tr>

         <tr align="right">
         <td><input type="hidden" name="id" value="<?php echo $_GET['id']; ?>"/></td>
        <td colspan="2"><span style="margin-left:10px;">Please check the changes above before submitting</span><br/>

        <input type="submit" name="go" value="Submit Changes" style=" padding: 2px 8px;background-color:#C00; color:#FFF; margin:10px;"/>
        </td>
       </tr>
    </table>
    </form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:53:23.550

你确定你想要`if($pCategory = 2){`而不是：`if($pCategory == 2){`？

Your `if($pCategory = 2){` will always evaluate to true, hence the duplicates.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:49:17.450

您的 UPDATE 可能会更改帖子的 ID

```
SET ID = '$pID' 
```

我看不到`$pID`您的代码中设置的位置，但我敢打赌它与`$_POST[id]`.

您确实分配了 $id = $_POST['id'];

也许您的意思是分配给`$pID`而不是分配给`$id`？

无论哪种方式，我都不会在您的 UPDATE 中设置 ID。没有好处，并且有引入错误的风险。

# android - 一个栏上有多个通知图标？

> ID：10001899
> 
> 赞同：0
> 
> 时间：2012-04-03T21:47:22.710
> 
> 标签：android

是否可以创建一个包含多个水平图标的通知栏，并且每个图标启动一个单独的服务/活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:04:40.153

不，通知只有一个`PendingIntent`（如在[此 API 方法](http://developer.android.com/reference/android/app/Notification.Builder.html#setContentIntent%28android.app.PendingIntent%29)中所见）。您可以想象创建具有多个图标的[自定义通知布局](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#CustomExpandedView)，但您只能启动一个活动。

**更新：**

[`RemoteViews.setOnClickPendingEvent`](http://developer.android.com/reference/android/widget/RemoteViews.html#setOnClickPendingIntent%28int,%20android.app.PendingIntent%29)实际上，如果您仔细阅读该文档，从 API 11 开始，您可以通过在自定义布局中设置视图来完成您想要完成的任务！

# objective-c - iOS：标记错误

> ID：10001907
> 
> 赞同：0
> 
> 时间：2012-04-03T21:48:15.107
> 
> 标签：objective-c, ios, xcode, tags

我正在开发一个行为类似于照片库的应用程序，并且我正在实现让用户从他们的画廊中删除照片的选项。为此，我决定在每张图片上放置一个隐形按钮。当用户点击“编辑”按钮时，每张图片上隐藏的删除按钮将变为活动状态。为了简单起见，我在每个隐藏按钮上使用了相同的 IBOutlet，并且我在 Interface Builder 中适当地标记了每个按钮。当用户点击图片上的按钮时，会出现一个警告视图，询问他们是否真的要删除它。如果他们点击是，我打电话给`removeObjectAtIndex`. 这是我正在使用的代码：

```
- (IBAction)deleteButtonPressed:(id)sender {
    UIAlertView *deleteAlertView = [[UIAlertView alloc] initWithTitle:@"Delete"
                                                              message:@"Are you sure you want to delete this photo?"
                                                             delegate:self
                                                    cancelButtonTitle:@"Yes"
                                                    otherButtonTitles:@"No", nil];
    [deleteAlertView show];
    int imageIndex = sender.tag;
    deleteAlertView.tag = imageIndex;

}

- (void)deleteAlertView:(UIAlertView *)deleteButtonPressed
       didDismissWithButtonIndex:(NSInteger)buttonIndex {
    if (buttonIndex != [deleteButtonPressed cancelButtonIndex]) {

        [array removeObjectAtIndex:deleteButtonPressed.tag];

    }
  [self.user setObject:array forKey:@"images"];
} 
```

我得到的错误是突出显示`int imageIndex = sender.tag;`，并指​​出“`tag`找不到类型对象的属性`__strong id`”。我一直在研究这个错误，但没有找到任何有用的信息。我还是编程新手，所以我根本不知道如何解决这个问题。非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:58:26.083

您需要将发件人转换为适当的类型。例如`int imageIndex = ((UIView*)sender).tag;`.

# java - Java 组件最大大小

> ID：10001910
> 
> 赞同：1
> 
> 时间：2012-04-03T21:48:31.783
> 
> 标签：java, components, size

我在java中遇到了一个相当烦人的问题。我有一个在 java 中运行一堆模拟的程序，生成了很多数据，并且都显示在“图形”对象上。我创建了一个名为“Graphs”的组件，它使用 GroupLayout 显示这些“graph”对象的长列表，并将其放置在 Jscrollpane 中。

我遇到的问题是“图表”的最后一半被切断了。组件可以达到的最大大小为 32,767，恰好与 2^15 - 1（有符号 16 位数字的最大大小）相同。似乎组件大小被存储为 16 位有符号数字，而不是我最初想到的 32 位整数。

我的问题是这样的。

有没有办法改变java存储组件大小的方式，从而创建大于这个大小的组件？

如果不是，解决这个问题的最佳方法是什么？我想在一个面板上显示所有这些信息。即使我要“堆叠”“图表”组件，父组件仍然会超出最大尺寸。

提前致谢。

克里斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:09:42.000

请参阅相关问题，[为什么 Java 不支持无符号整数？](https://stackoverflow.com/questions/430346/why-doesnt-java-support-unsigned-ints).

`JList`您可以通过在或中显示图表来解决此限制`JTable`。`JList`/`JTable`只会渲染当前可见的单元格。理想情况下，您应该将图形的值分别存储在 a `ListModel`or`TableModel`中，并实现相应的自定义`ListCellRenderer`or `TableCellRenderer`。

如果您只想先进行概念验证，则可以将*Graph* `Component` s 直接推入 a `DefaultListModel`or `DefaultTableModel`，并使用其`get*CellRendererComponent(...)`方法返回*Graph*的渲染器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:01:56.830

我知道这种方法可能有点难以完成，但它会比您当前的方法更好。尝试在图表旁边添加滚动条，而不是滚动窗格。通过向滚动条添加侦听器，根据滚动条的位置动态更新图表的内容。

# haskell - 大哈希表的建议（2^25 个元素）

> ID：10001917
> 
> 赞同：2
> 
> 时间：2012-04-03T21:49:18.260
> 
> 标签：haskell, hash, hashmap

我想在 Haskell 中为仅产生 50 位哈希的 SHA1 变体编写生日攻击程序。为此，我需要一个能够存储大约的哈希表。2^25 个条目。

此映射中的键`Int64`和值将是短长度字符串（~ 16 字节）。

关于使用哪个哈希实现的任何建议？

（忽略上次更新 - 我需要一个 2^50 个元素的位数组。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T01:46:02.613

对于每块 8 个字节的 2^25 个条目，您正在查看仅用于数据的 768MB 存储空间，最多可能大约 3 GB 存储字节串的实际开销——猜测每个字节串 80 个字节，那么您就有了哈希表/map 要存储的内部结构，以及密钥的装箱等。

这意味着您可以将驻留在内存中的整个内容存储在一台体面的机器上，这样可以使问题相对合理，但是您的收集时间会有点糟糕。

我建议使用许多较小的哈希表，通过对密钥空间进行分区，这样无论您使用何种哈希表，您都可以并行运行大量更新。

至于实施：

您可以在 IORefs 中包装一堆不可变哈希表，例如来自无序容器的宽扇出哈希表，并使用某种 atomicModifyIORef 或 ryan newton 的比较和交换原语之类的东西，或者您可以尝试使用旧的 Data.HashTable 实现以一种直接的命令方式。

后者将通过对无序容器使用的哈希数组映射尝试的对数因子来改善您的渐近性，但 Data.HashTable 有错误的常量。不过，在您的问题的规模上，这些因素可能会抵消。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T01:06:20.647

我也发布了同样的问题。根据一些建议，我正在使用[京都内阁](http://fallabs.com/kyotocabinet/spex.html)。它非常酷，而且性能也很好。你也可以查看我的帖子，因为我也有类似的问题。前任。[一](https://stackoverflow.com/questions/9931469/issue-with-hash-map-space)、[二](https://stackoverflow.com/questions/9944582/issue-with-hash-map-space-and-performance)、[三](https://stackoverflow.com/questions/9952968/how-to-implement-disk-based-hash-map-using-mongodb-java)。也许这可能会有所帮助。

# iphone - 突出显示的 UIButton 状态的不同图像

> ID：10001923
> 
> 赞同：0
> 
> 时间：2012-04-03T21:49:37.200
> 
> 标签：iphone, objective-c, cocoa-touch, uibutton

我需要**2 个**不同的图像来突出显示`UIButton`.

我有这些代码行：

```
- (IBAction)buttonPressed:(id)sender
{
    UIImage *followImageHighlighted = [UIImage imageNamed:@"follow-hilite.png"];
    UIImage *unfollowImageHighlighted = [UIImage imageNamed:@"unfollow-hilite.png"];
    if ([sender isSelected]) {
        // set this image for the next time the button will pressed
        [sender setImage:unfollowImageHighlighted forState:UIControlStateHighlighted];
    } else {
        // set this image for the next time the button will pressed
        [sender setImage:followImageHighlighted forState:UIControlStateHighlighted];
    }
}

- (void)viewDidLoad
{
    // ...
    UIImage *followImage = [UIImage imageNamed:@"follow.png"];
    UIImage *unfollowImage = [UIImage imageNamed:@"unfollow.png"];
    [self.followButton setImage:followImage forState:UIControlStateNormal];
    [self.followButton setImage:unfollowImage forState:UIControlStateSelected];
} 
```

问题是每次按下按钮时，我都会看到突出显示的图像`follow-hilite.png`。

我不能更改道路上按钮的突出显示图像吗？

我认为这是一个不好的限制，因为当按钮被选择（因此，“关注”）并且用户按下它时，他会看到默认图像，然后当它触摸图像时，图像是选定状态和网络操作时的图像完成然后按钮图像正确切换到选定的一个。

想法？

**编辑**

```
- (IBAction)followButtonTapped:(id)sender
{
    BOOL isFollowed = [sender isSelected];
    NSString *urlString = isFollowed ? kUnfollowURL : kFollowURL;
    // operation [...]
    [self.followButton setSelected:(isFollowed) ? NO : YES];
    self.user.followed = !isFollowed;
} 
```

我更好地解释了这个问题：

*   默认状态下的按钮：白色背景上的黑色文本
*   处于选中状态的按钮：黑色背景上的白色文本

如果没有关注目标用户，则该按钮处于默认状态，如果我尝试按下它，我会看到正确的突出显示图像。

但是，如果目标用户被关注并且按钮处于选中状态，如果我尝试按下它（并按住手指），我会看到白色背景上带有黑色文本的按钮。这很丑陋，这是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:31:11.810

IBAction 是一个尴尬的（充其量是，或不可能）配置控件的地方。您的应用程序中必须有一些条件会触发对不同突出显示图像的要求。当您检测到该情况时配置按钮。

使用“按下”回调来执行应用程序应该在按下时采取的任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T00:30:35.297

我已经解决了：

`[myButton setImage:imageSelectedHover forState:(UIControlStateSelected | UIControlStateHighlighted)];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T00:49:05.700

很高兴它有效。您通过更新*应用程序条件*解决了它：self.user.followed。现在，为了让它真正正确，试试这个：

```
- (IBAction)followButtonTapped:(id)sender
{
    NSString *urlString = self.user.followed? kUnfollowURL : kFollowURL;
    // operation [...]
    self.user.followed = !self.user.followed;
} 
```

模型的状态在这里很重要。按钮的选定状态更像是一个布尔值，它位于您保存*真实*跟随状态副本的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T21:56:27.010

我认为您需要在尝试修改任何重要内容并计算变量之前将 sender 转换为 UIButton*，因为 sender***不***包含名为`-isSelected`. 试试这个：

```
- (IBAction)buttonPressed:(id)sender
{
    UIImage *followImageHighlighted = [UIImage imageNamed:@"follow-hilite.png"];
    UIImage *unfollowImageHighlighted = [UIImage imageNamed:@"unfollow-hilite.png"];
    if ([self isSelected]) {
        // set this image for the next time the button will pressed
        [(UIButton*)sender setImage:unfollowImageHighlighted forState:UIControlStateHighlighted];
    } else {
        // set this image for the next time the button will pressed
        [(UIButton*)sender setImage:followImageHighlighted forState:UIControlStateHighlighted];
    }
[self isSelected] = ![self isSelected];
} 
```

# html - 图片太大时设置表格宽度

> ID：10001928
> 
> 赞同：0
> 
> 时间：2012-04-03T21:49:59.320
> 
> 标签：html, css, css-tables

我希望我的表格宽度为屏幕的 80%。

该表有 1 行 4 列。每个单元格包含一个图像。

问题是图片太大 - 我希望它们的宽度将由表格宽度均匀确定（每个单元格将占据屏幕的 20%）

并且每个图片的高度将由它的宽度决定..

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:54:39.057

这提供了一个简单、优雅且完全响应的解决方案：

HTML：

```
<table border="1px solid black" width="80%">
    <tbody>
        <tr>
            <td><img src="https://www.cia.gov/library/publications/the-world-factbook/graphics/flags/large/uk-lgflag.gif" width="100%"></td>
            <td><img src="https://www.cia.gov/library/publications/the-world-factbook/graphics/flags/large/uk-lgflag.gif" width="100%"></td>
            <td><img src="https://www.cia.gov/library/publications/the-world-factbook/graphics/flags/large/uk-lgflag.gif" width="100%"></td>
            <td><img src="https://www.cia.gov/library/publications/the-world-factbook/graphics/flags/large/uk-lgflag.gif" width="100%"></td>
        </tr>
    </tbody>
</table> 
```

请参阅此[jsFiddle 示例](http://jsfiddle.net/gxR8r/)

同样，请参阅此[CSS 解决方案](http://jsfiddle.net/gxR8r/1/)，使用

```
td img {
    width: 100%
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:54:04.073

做这样的事情：

```
table { width:80%; }
td { width:25%; }
td img {
    width:100%;
    height:auto;
} 
```

图像上的宽度需要从某些东西继承，因此请确保在 TD 上放置某种宽度。浏览器应该能够计算它，因为它是一个表格，但是如果由于某种原因您更改为列表标记或其他内容，则需要定义宽度。

# jquery - 使用 jQuery 加载动态加载的内容会清除现有的 html

> ID：10001930
> 
> 赞同：1
> 
> 时间：2012-04-03T21:50:01.893
> 
> 标签：jquery

目前，我正在尝试创建一个设置，将页面内容加载到主目录中，以避免必须为每个链接刷新页面。

我对每个单击的链接使用 jQuery 加载，如下所示，以便将链接加载到`#main`. （显然，完成后不会是所有链接。）

直接访问的页面可以正常工作，但是如果您尝试使用此加载链接，那么它将正确加载内容，但**仅在视图源中显示加载的 html**，我在这里做错了吗？

```
$("body").on("click", "a", function(){

    $("#footer, #main").fadeOut('fast');

    $("#main").load($(this).attr("href"), function(){

        $("#main, #footer").fadeIn('slow');

    });

    return false
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:06:40.240

导致此问题的问题`.load()`是您包含的文件包含`<script></script>`标签。

这些会干扰 Javascript，并且无法应对导致页面出错。

要停止该问题，您必须`<script></script>`从加载的文件中删除标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:53:52.833

你淡出主要，并没有再次淡入......
使用这个：

```
$("body").on("click", "a", function(){    
    $("#footer, #main").fadeOut('fast');    
    $("#main").load($(this).attr("href"), function(){    
        $("#main").fadeIn('slow'); // <======================
        //$(this).fadeIn('slow'); this isn't the main object!
        $("#footer").fadeIn('slow');    
    });    

    return false
}); 
```

`this`回调内部不是 DOM 元素！！！

# bash - pgrep 打印出与预期不同的 pid

> ID：10001932
> 
> 赞同：1
> 
> 时间：2012-04-03T21:50:12.407
> 
> 标签：bash, grep, command-substitution

我写了一个小脚本，出于某种原因，我需要转义参数中传递的任何空格以使其正常工作。

我阅读了许多其他关于有此问题的人的文章，这通常是由于没有引用 $@，但我的所有变量都在脚本中引用，并且在命令行中也引用了参数。此外，如果我在调试模式下运行脚本，则返回的行可以通过复制粘贴成功运行，但在脚本内执行时会失败。

代码：

```
connections ()
{
    args="$@"
    pid="$(pgrep -nf "$args")"
    echo $pid
    # code that shows TCP and UDP connections for $pid
}
connections "$@" 
```

例子：

`bash test.sh "blah blah"`

失败，而是返回当前运行的 shell 的 pid

`bash test.sh "blah\ blah"`

成功并返回您通过 pgrep 搜索的进程的 pid

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:25:26.310

你的问题与`"$@"`.

如果您向 中添加一个`-l`选项`pgrep`，您可以看到它与当前进程匹配的*原因。*

您正在运行的脚本*还包括您尝试在其自己的 arguments 中搜索的内容*。

就像这样做，并看到`grep`：

```
$ ps -U $USER -o pid,cmd | grep gnome-terminal
12410 grep gnome-terminal
26622 gnome-terminal --geometry=180x65+135+0 
```

反斜杠产生影响的原因是什么？ `pgrep`认为反斜杠+空格只是意味着空格。它找不到您的脚本，因为它包含`blah\ blah`，而不是`blah blah`.

# mysql - 检查IP是否在子网中

> ID：10001933
> 
> 赞同：7
> 
> 时间：2012-04-03T21:50:22.500
> 
> 标签：mysql, ip, subnet

我有一个存储为无符号整数的 IP 地址（ipNumeric）的表 A 和一个带有子网（subnetNumeric）的表 B：

```
INET_NTOA(ipNumeric) = 192.168.0.1
INET_NTOA(subnetNumeric) = 192.168.0.0 
```

我想检查这个 IP 是否是子网的成员。

子网是 A、B 和 C 类。

这是否可以在 MySQL 中在合理的时间内即时完成，或者是否应该预先计算子网范围？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-03T22:00:31.400

当然，这是可行的。这个想法是，我们通过将最高有效位设置为 1 来计算子网掩码，与子网类规定的一样多。对于 C 类，那将是

```
SELECT -1 << 8; 
```

然后，将子网掩码与您拥有的 IP 地址相结合；如果 IP 在子网内，则结果应等于子网地址——标准网络内容。所以我们最终得到：

```
SELECT (-1 << 8) & INET_ATON("192.168.0.1") = INET_ATON("192.168.0.0"); 
```

**更新：**是的，有必要知道网络类*或*子网掩码（这是等效信息）。`X.Y.0.0`考虑一下如果您没有此信息，您将如何处理子网所在的情况。这是`X.Y.0.0/16`还是`X.Y.0.0/8`第三个八位字节*恰好*是0？没办法知道。

如果您确实知道子网掩码，则查询可以写为

```
SELECT (-1 << (33 - INSTR(BIN(INET_ATON("255.255.255.0")), "0"))) &
       INET_ATON("192.168.0.1") = INET_ATON("192.168.0.0"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-27T09:45:15.203

这是我们使用的 MySQL 函数。

```
DELIMITER $$
DROP FUNCTION IF EXISTS `ip_in_subnet_mask`$$
CREATE DEFINER=`root`@`%` FUNCTION `ip_in_subnet_mask`(ip VARCHAR(20), subnet VARCHAR(20), netmask VARCHAR(20)) RETURNS TINYINT(1)
    DETERMINISTIC
BEGIN
    RETURN (INET_ATON(ip) & INET_ATON(netmask)) = INET_ATON(subnet);
END$$
DELIMITER ; 
```

例如，查找 t.ip 在 192.168.0.x 范围内的所有行，其中 0<=x<=255

```
 SELECT *
 FROM t
 WHERE
    ip_in_subnet_mask(t.ip, "192.168.0.0", "255.255.255.0") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T22:36:28.000

首先创建表来支持测试。

```
CREATE TABLE a (ipNumeric INT UNSIGNED);
INSERT INTO a (ipNumeric) VALUES(INET_ATON("172.16.40.101"));
INSERT INTO a (ipNumeric) VALUES(INET_ATON("192.168.1.12"));
INSERT INTO a (ipNumeric) VALUES(INET_ATON("10.1.5.51"));
INSERT INTO a (ipNumeric) VALUES(INET_ATON("10.7.1.78"));      
CREATE TABLE b (subnetNumeric INT UNSIGNED);
INSERT INTO b (subnetNumeric) VALUES (INET_ATON("192.168.0.0"));
INSERT INTO b (subnetNumeric) VALUES (INET_ATON("10.1.0.0"));
INSERT INTO b (subnetNumeric) VALUES (INET_ATON("172.16.0.0")); 
```

现在根据地址和掩码 = 子网进行选择查找表之间的匹配项。这里我们假设 B 类子网 (255.255.0.0)。无需移位，因为我们可以使用 INET_ATON() 函数。

```
SELECT INET_NTOA(a.ipNumeric),INET_NTOA(b.subnetNumeric) FROM a,b 
       WHERE (a.ipNumeric & INET_ATON("255.255.0.0")) = b.subnetNumeric;

+------------------------+----------------------------+
| INET_NTOA(a.ipNumeric) | INET_NTOA(b.subnetNumeric) |
+------------------------+----------------------------+
| 192.168.1.12           | 192.168.0.0                |
| 10.1.5.51              | 10.1.0.0                   |
| 172.16.40.101          | 172.16.0.0                 |
+------------------------+----------------------------+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-19T19:41:05.473

当地址存储为字符串时，我有一个解决方案。因此，如果您希望将那部分作为您的算法，您可以在此处使用我的解决方案。

这有点棘手，尤其是对于 IPv6。在 IPv6 中，可以选择压缩段，例如 1::1，相当于 1:0:0:0:0:0:0:1，这是它很棘手的主要原因。

[IPAddress Java 库](https://seancfoley.github.io/IPAddress/#_Toc456708509)将生成 mysql SQL 来搜索给定子网中的地址。该链接更详细地描述了这个问题。免责声明：我是项目经理。

基本算法是取子网地址的网络部分，然后取该部分的每个变体（例如上面的两个字符串是完整地址 1::1 的变体），然后计算段分隔符的数量，然后执行正在匹配的地址上的 mysql 子字符串，但也计算正在匹配的地址中的总分隔符。

这是示例代码：

```
public static void main(String[] args) throws IPAddressStringException {
    System.out.println(getSearchSQL("columnX", "1.2.3.4/16"));
    System.out.println(getSearchSQL("columnX", "1:2:3:4:5:6:7:8/64"));
    System.out.println(getSearchSQL("columnX", "1::8/64"));
}

static String getSearchSQL(String expression, String ipAddressStr) throws IPAddressStringException {
    IPAddressString ipAddressString = new IPAddressString(ipAddressStr);
    IPAddress ipAddress = ipAddressString.toAddress();
    IPAddressSection networkPrefix = ipAddress.getNetworkSection(ipAddress.getNetworkPrefixLength(), false);
    StringBuilder sql = new StringBuilder("Select rows from table where ");
    networkPrefix.getStartsWithSQLClause(sql, expression);
    return sql.toString();
} 
```

输出：

```
Select rows from table where (substring_index(columnX,'.',2) = '1.2')
Select rows from table where (substring_index(columnX,':',4) = '1:2:3:4')
Select rows from table where ((substring_index(columnX,':',4) = '1:0:0:0') OR ((substring_index(columnX,':',2) = '1:') AND (LENGTH (columnX) - LENGTH(REPLACE(columnX, ':', '')) <= 5))) 
```

# css - 圆角矩形“下一步”按钮右侧的 CSS 箭头

> ID：10001935
> 
> 赞同：1
> 
> 时间：2012-04-03T21:50:31.803
> 
> 标签：css

`<a class="next">Next</a>`我想要非常简单的标记（[这是我到目前为止所拥有的（jsfiddle 链接在这里）](http://jsfiddle.net/cambraca/d4vm5/)：

```
a.next {
    padding: 6px 12px;
    border-width: 1px !important;
    border-color: #333 !important;
    background: #5BFF2D; /* for non-css3 browsers */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#5BFF2D', endColorstr='#20CA00'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#5BFF2D), to(#20CA00)); /* for webkit browsers */
    background: -moz-linear-gradient(top, #5BFF2D, #20CA00); /* for firefox 3.6+ */ 
    border-radius: 6px 0 0 6px !important;
    border-style: solid none solid solid !important;
}
a.next:after {
    content: '';
    display: block;
    width: 0px;
    height: 0px;
    border-top: 12px solid transparent;
    border-left: 16px solid green;
    border-bottom: 12px solid transparent;
    background: white;
}​ 
```

..看起来像这样：

![这就是 Chrome 对我的 CSS 的评价](../Images/ba1e19c4c91ec9339d7cbf98f901ba8d.png)

如您所见，它根本不起作用。此时我的想法是：即使我确实正确定位了箭头，它也永远不会正确显示背景渐变，更不用说 1px 边框了。

有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:33:46.560

## 原始答案

[这变得非常接近](http://jsfiddle.net/d4vm5/34/)，但没有边界。如果你想添加一个`span`内部，那么[边框也成为可能，以及对“假”渐变进行一些平滑](http://jsfiddle.net/d4vm5/39/)。

## 更新的答案

[这实现了渐变](http://jsfiddle.net/d4vm5/49/)，整体看起来更好。主要问题是*它要求您在其后面具有纯色背景*（在本例中为白色）。

## 最终答案

[这实际上确实支持使角度透明的渐变](http://jsfiddle.net/d4vm5/107/)。它仅适用于支持 CSS3 转换的浏览器。我在 IE9、FF 11、Chrome 18 中进行了测试。IE9 没有显示您的滤镜渐变。Chrome 在我的屏幕上呈现一个指向箭头的冷落点（也许有一些浏览器定位，可以调整这样的变化）。

# mysql - MySQL 触发器。需要示例答案

> ID：10001939
> 
> 赞同：4
> 
> 时间：2012-04-03T21:51:01.097
> 
> 标签：mysql

我正在努力寻找只生产笔记本电脑而不生产个人电脑的产品制造商

```
Relations:
Product(maker, model, type)
Laptop(Model, price, speed, ram, hd, screen)
PC(model, price, speed, ram, hd)
Printer(model,price, color, price) 
```

我试过的

```
 (SELECT maker, type 
 FROM product WHERE type = 'laptop') 
 DIFFERENCE 
 (SELECT maker, type 
 FROM product WHERE type = 'pc'); 
```

我认为在MySQL中没有区别操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:59:02.927

```
SELECT 
    p1.maker, 
    p1.type
FROM 
    product p1 
    LEFT JOIN product p2 ON p2.maker = p1.maker AND p2.type = 'pc'
WHERE 
    p1.type = 'laptop'
    p2.maker IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:56:35.767

`SELECT maker, type FROM product WHERE type = 'laptop' AND type != 'pc';`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T21:59:08.717

```
select maker, type from product 
where type='laptop' and
maker not in (select maker from product where type = 'pc') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T22:00:38.420

```
SELECT `maker`, `type` FROM `product` WHERE `type` = 'laptop' AND `maker` NOT IN
                 (SELECT `maker`, `type` FROM `product` WHERE `type` = 'pc'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-03T21:54:53.213

```
SELECT p.maker, p.type 
    FROM product p 
    WHERE p.type = 'laptop' 
    AND NOT EXISTS ( 
        SELECT p2.maker, p2.type 
        FROM table p2 
        WHERE p2.type = 'pc' 
        AND p2.maker = p1.maker
    ) 
```

# javascript - 在javascript中动态写入对象时如何注册DOM id？

> ID：10001940
> 
> 赞同：2
> 
> 时间：2012-04-03T21:51:01.363
> 
> 标签：javascript, dom

我有这个脚本的问题。起初我对`<div>`s 进行了硬编码，它工作正常。但是后来我需要动态更改导航栏，因为我更改了（数量）链接。

问题是 id 在注入`element`.innerHTML = (html 字符串) 时没有注册。

我怎样才能解决这个问题？

这是代码：

javascript:

```
 function constructNav() {
   var submenu_layer_innerHTML = "";
   var top_nav_innerHTML = "<UL class=\"nav_category\">";
   for (i=0; i<links.length; i++) {
     submenu_layer_innerHTML = "<div class=\"submenu\" id=\"submenu" + i + "\" onMouseOut=\"timeHideNav('" + i + "','1000')\"> </div>";
     top_nav_innerHTML += "<LI id=\"link" + i + "\"><a href=# onMouseOver=\"expandNav('" + i + "');\">" + links[i] + "</a></LI>";
   }
   top_nav_innerHTML += "</UL>";
   document.getElementById("top_nav").innerHTML = top_nav_innerHTML;
   document.getElementById("submenu_layer").innerHTML = submenu_layer_innerHTML;
 } 
```

html:

```
<script type="text/javascript" src="scripts.js"> </script>
<script type="text/javascript">
var links =["link 1",
    "link 2",
    "link 3",
    "link 4",
    "link 5",
    "link 6"];
</script>

<body onLoad="constructNav();">

<div id="submenu_layer"> </div>
<div id="top_nav"> </div> 
```

我在 Firefox 中收到此错误：

```
 line 35: document.getElementById("submenu"+pageNo) is NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:13:43.213

您`submenu_layer_innerHTML`在循环的每次迭代期间都在覆盖`for`。确保使用`+=`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:15:13.243

试试 jQuery 直播功能..

```
$("div.something").live('click', function(){ 
  // do something...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:07:04.547

> 未定义constructNav 试试这个：http: [//jsfiddle.net/5GjNs/](http://jsfiddle.net/5GjNs/)

# css - 在利用特殊性规则时要小心 CSS em 单位？

> ID：10001941
> 
> 赞同：5
> 
> 时间：2012-04-03T21:51:07.337
> 
> 标签：css, pixel, font-size, em

当使用 EM 单位而不是 PX 单位指定字体大小时，我无法编写可维护的 CSS 代码。我已经习惯了这样写 CSS 代码：

```
body {font-size: 12px;}
body .sidebar {font-size:11px;}
body .sidebar .loadmore {font-size:10px;}
body .sidebar .warning {font-size:13px;} 
```

这个想法是，在整个网站的许多页面上，有很多文本应该有 12 像素的字体大小。我利用特殊性规则来覆盖站点特殊区域中的 12px 字体大小。

假设我将上面的代码重写为：

```
body {font-size: 12em;}
body .sidebar {font-size:11em;}
body .sidebar .loadmore {font-size:10em;}
body .sidebar .warning {font-size:13em;} 
```

如果我将上面代码中的 px 替换为 em，我的理解是我失去了特异性规则的优势。代码的第 3 行将被解释为“10 em of 11 em of 12 em”，这与“覆盖所有先前的规则并使用 10 em of （默认值是什么？）”的含义完全不同。我说的对吗？

**编辑**如果我所说的是正确的，那么如何编写字体大小规则，例如“对所有元素使用字体大小 X，但在侧边栏上使用字体大小 Y”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T21:58:16.297

约翰，您所谈论的特殊性将以您所说的方式发生。关于为什么可以看到的参考：http: [//kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/](http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/)。

**编辑**作为对您的编辑的回复，请考虑 jnylen 在您原始帖子的评论中发布的内容。

您为 body {font-size: 12em;} 列出的 12 em 字体大小将默认字体大小缩放为当前大小的 12 倍。如果您想使用 em，您需要考虑您希望使用它们的比例并进行数学计算。如果要使用嵌套语句设置固定大小，则需要坚持固定属性（像素）。正如我链接的文章中所述，em 的优点是您可以设置默认大小，例如 12 px，然后使用 em 来缩放它们。例如在基于移动的网站中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:57:46.147

是的，`em`当它们适用的元素嵌套时，值“相乘”在一起。这不一定是特异性问题 - 如果您单独指定规则`.loadmore`并且`.sidebar`您会看到相同的问题，因为`.sidebar`contains `.loadmore`。

这是使用此方法的示例：http: [//jsfiddle.net/PJWrW/](http://jsfiddle.net/PJWrW/)

我通常使用任何一个`px`或百分比单位来表示字体大小，以明确表示我正在设置绝对字体大小或修改父字体大小。

我有时使用`em`单位来定义尺寸，如填充和宽度，因为`em`单位基本上是当前字体大小的字母宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:40:26.647

据我所知，如果您使用 em 作为字体大小，那么在设置某些元素的特定大小的同时，没有一种方法可以为左侧栏中（或其他地方）中的元素设置标准字体大小在那个边栏中。如果您使用 em，则必须指定该侧栏中所有元素的大小。

就我个人而言，我通常使用 px 来调整字体大小，只是因为您可以为某些元素设置标准字体大小，正如您在帖子中所说的那样。

我听到的关于在 px 上使用 em 的唯一令人信服的论点是关于缩放问题，这不再是一个真正的问题（如果您使用 px，IE6 不允许您手动更改字体大小，但大多数人不久前就停止使用 IE6）我认为使用 em 作为优势的唯一真实情况是，如果您想实现用户可以通过 JavaScript 更改字体大小的功能，就像[这里](http://www.citizensadvice.org.uk/)

# javascript - EXT JS 存储无法从 getJson 调用正确加载数据

> ID：10001945
> 
> 赞同：0
> 
> 时间：2012-04-03T21:51:17.570
> 
> 标签：javascript, extjs, extjs4, getjson

我正在做一个 EXTJS4 网格。我需要从我的 JSON 对象中更改一些信息，然后将其返回到 store11，以便它可以加载到我的 EXTJS 网格中。我的问题在我的employeeData 函数下方，我得到空值。看来 getJson 在我的函数渲染后被调用。如果我提醒项目（见下文），我会在那里获得价值，所以我知道它正在工作。我只是无法在我的 EXT 网格中填充任何值。

```
 data = {"head":["exec_name","exec_id","P","R","O","M","I","S","E"],
"data":[["Jack Black","4618",".8",".15","1.25",".99",".11",".14",".13"],
["Jack Johnson","7020",".64",".27","2.64","2.73",".32",".09",".09"],
["Jack Daniels","1511","2.25","1.25","5","3.5","1.25","1.25",".75"],
["Jack Miller","4500","0",".4","1.6","1.8","0","0",".4"],
["Mayor Quinby","9624","0","0","1","3","0","0","0"],
["Bart Simpson","0613","1.05",".35","1.35","2.65",".35",".3",".2"],
["Homer Simpson","8470","1",".61","5.17","3.61","1.11","0",".33"],
["Marge Simpson","0718","1.11",".03","1.87","1.76",".45",".55",".16"],
["Lisa Simpson","6291","3.11",".64","2.79","3.21",".57",".43",".43"],
["Maggie Simpson","0298","4.12","1.53","3.74","5.59","2.03","1.03","1"],
["Abu","3392",".3",".17",".57","1.53",".03",".13",".07"],
["Mr Burns","8276","1.56",".46","2.73","2.87",".67",".23",".13"],
["Santas Helper","1005",".37",".08",".75",".77",".12",".03",".05"]]}}

Ext.onReady(function(){
employeeData = function(){
    $.getJSON('/eval.rpt_promise', function(data) {
        var items = []; 
        $.each(data.data, function(key, val) {
            theJson=[];
            $.each(val, function(k, v) {
                if(k == 0){k = "exec_name";}
                if(k == 1){k = "exec_id";}
                if(k == 2){k = "p";}
                if(k == 3){k = "r";}
                if(k == 4){k = "o";}
                if(k == 5){k = "m";}
                if(k == 6){k = "i";}
                if(k == 7){k = "s";}
                if(k == 8){k = "e";}
                theJson.push(k+":"+'"'+v+'"');  
            });
            items.push("{"+theJson+"}");
        });
        alert(items);
    }); 
    return items;               
};

store11 = Ext.create('Ext.data.JsonStore', {
    fields:['exec_name', 'exec_id', 'p', 'r', 'o', 'm', 'i', 's', 'e'],
    data: employeeData()
});

store11.loadData(employeeData());
}); 
```

**当我提醒我得到的项目时**

```
 items = [{exec_name:"Jack Black",exec_id:"4618",p:".8",r:".15",o:"1.25",m:".99",i:".11",s:".14",e:".13"},
{exec_name:"Jack Johnson",exec_id:"7020",p:".64",r:".27",o:"2.64",m:"2.73",i:".32",s:".09",e:".09"},
{exec_name:"Jack Daniels",exec_id:"1511",p:"2.25",r:"1.25",o:"5",m:"3.5",i:"1.25",s:"1.25",e:".75"},
{exec_name:"Jack Miller",exec_id:"5500",p:"0",r:".4",o:"1.6",m:"1.8",i:"0",s:"0",e:".4"},
{exec_name:"Mayor Quinby",exec_id:"9624",p:"0",r:"0",o:"1",m:"3",i:"0",s:"0",e:"0"},
{exec_name:"Bart Simpson",exec_id:"0613",p:"1.05",r:".35",o:"1.35",m:"2.65",i:".35",s:".3",e:".2"},
{exec_name:"Homer Simpson",exec_id:"8470",p:"1",r:".61",o:"5.17",m:"3.61",i:"1.11",s:"0",e:".33"},
{exec_name:"Marge Simpson",exec_id:"0718",p:"1.11",r:".03",o:"1.87",m:"1.76",i:".45",s:".55",e:".16"},
{exec_name:"Lisa Simpson",exec_id:"6291",p:"3.11",r:".64",o:"2.79",m:"3.21",i:".57",s:".43",e:".43"},
{exec_name:"Maggie Simpson",exec_id:"0298",p:"4.12",r:"1.53",o:"3.74",m:"5.59",i:"2.03",s:"1.03",e:"1"},
{exec_name:"Abu",exec_id:"3392",p:".3",r:".17",o:".57",m:"1.53",i:".03",s:".13",e:".07"},
{exec_name:"Mr Burns",exec_id:"8276",p:"1.56",r:".46",o:"2.73",m:"2.87",i:".67",s:".23",e:".13"},
{exec_name:"Santas Helper",exec_id:"1005",p:".37",r:".08",o:".75",m:".77",i:".12",s:".03",e:".05"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:04:25.283

为什么选择**Ext.data.JsonStore**？它应该是**Ext.data.ArrayStore**。

```
store11 = Ext.create('Ext.data.ArrayStore', {
    fields:['exec_name', 'exec_id', 'p', 'r', 'o', 'm', 'i', 's', 'e'],
    data: employeeData()
}); 
```

第二个问题（也是主要问题）是**employeeData()**具有异步请求并且您不能使用结果，您应该重写代码以在json 回调中创建存储。

# jquery - Jquery，移动下拉位置

> ID：10001947
> 
> 赞同：0
> 
> 时间：2012-04-03T21:51:33.563
> 
> 标签：jquery, css, drop-down-menu, submenu

我正在使用 Jquery fancydropdown 菜单进行导航，并且无法将下拉面板与选项卡的左侧对齐。它们位于左侧几个像素处。这是我第一次使用 jquery，整晚都让我有点发疯！一点帮助将不胜感激！

谢谢

网址是[http://www.amuletbhutan.com/dev](http://www.amuletbhutan.com/dev)

**我的 CSS 是：**

```
/* body
*************************/
body {
    font: 12px/19px Georgia, serif;
    color: #370707;
}

/* links
*************************/
a:link, a:visited, a:hover, a:active {
    text-decoration: none;
}

/* inline elements
*************************/
strong {
    font-weight: bold;
}

/* tabs
*************************/
ul.tabs {
    display: table;
    margin: 0;
    padding: 0;
    list-style: none;
    position: relative;
}

ul.tabs li {
    margin: 0;
    padding: 0;
    list-style: none;
    display: table-cell;
    float: left;
    position: relative;
}

ul.tabs a {
    position: relative;
    display: block;
}

/* dropdowns
*************************/
ul.dropdown {
    margin: 0;
    padding: 0;
    display: block;
    position: absolute;
    z-index: 999;
    top: 100%;
    width: 250px;
    display: none;
    left: 0;
}

ul.dropdown ul.dropdown {
    top: 0;
    left: 100%;
}

ul.dropdown li {
    margin: 0;
    padding: 0;
    float: none;
    position: relative;
    list-style: none;
    display: block;
}

ul.dropdown li a {
    display: block;
}

/* menu-specifc
*************************/
#menu {
    position: absolute;
    z-index: 5;
    top: 0;
    left: 0;
    width: 100%;
    height: 40px;
    line-height: 40px;
    background: #f4f2ea url(../images/topbg.gif) repeat-x;
    clear: both;
}

#menu ul {
    margin: 0 auto;
}

#menu ul li.hasmore {

}

#menu ul li h4 {
    margin: 0;
}

#menu ul li h4 a {
    font-size: 14px;
    color: #000;
    font-weight: bold;
    padding: 0 15px;
}

#menu ul li a {
    color: #9b2021;
    padding-left: 4px;
}

#menu ul li a img {
    vertical-align: middle;
}

#menu ul li a:hover {
    background: url(../images/topselectionleft.png) top left no-repeat;
}

#menu ul li a span {
    display: block;
    padding: 0 15px 0 11px;
}

#menu ul li a:hover span {
    background: url(../images/topselectionright.png) top right;
}

#menu ul.dropdown {
    padding: 8px;
    background-image: url(../images/dropdown.png);
    overflow:hidden;
    border-bottom: 1px solid #dac9b5;
    width: 165px;
}

#menu ul.dropdown li a {
    border-bottom: 1px solid #dac9b5;
    line-height: 20px;
    overflow: hidden;
    height: 20px;
}

#menu ul.dropdown li.last a {
    border-bottom-width: 0;
}

#menu ul.dropdown li a:hover {
    background: url(../images/menuarrow.png) no-repeat left center;
}

#menu ul li h4 a:hover {
    background-image: none;
} 
```

**我的导航 HTML 是**

```
<div id="menu">
    <ul class="tabs">
        <li><a href="#"><span>Home</span></a></li>
        <li><a href="#"><span>About Bhutan</span></a></li>
        <li class="hasmore">
            <a href="#"><span>The Amulet Difference</span></a>
            <ul class="dropdown">
                <li><a href="#">Our Philosophy</a></li>
                <li><a href="#">Our Team</a></li>
                <li><a href="#">Why Choose Amulet?</a></li>
                <li class="last"><a href="#">Contact Us</a></li>
            </ul>
        </li>
        <li class="hasmore">
            <a href="/about/#networks"><span>Your Private Journey</span></a>
            <ul class="dropdown">
                <li><a href="#">Getting to Bhutan</a></li>
                <li><a href="#">Your Arrival</a></li>
                <li><a href="#">Tailor Made Tour</a></li>
                <li class="last"><a href="#">Luxury Accommodation</a></li>
            </ul>
        </li>
        <li class="hasmore">
            <a href="#"><span>Experiences</span></a>
            <ul class="dropdown">
                <li><a href="#">Wellbeing, Spa & Yoga</a></li>
                <li class="last"><a href="#">Specialty Tours</a></li>
            </ul>
        </li>
        <li><a href="#"><span>Rates &amp; Reservations</span></a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:01:38.637

这会导致导航中的锚点在菜单显示位置的左侧增加 4px：

```
#menu ul li a {
    [...]
    padding-left:4px;
} 
```

这可以通过在下拉列表的左侧添加边距来解决：

```
#menu ul.dropdown {
    [...]
    margin-left:4px;
} 
```

如果您想将其与右侧对齐，您将执行以下操作：

```
ul.dropdown {
    [...]
    left:0; <-Remove this line
    right:0;
} 
```

# sql - SQL连接麻烦

> ID：10001948
> 
> 赞同：1
> 
> 时间：2012-04-03T21:51:37.090
> 
> 标签：sql, sql-server, sql-server-2008, join

使用 Microsoft SQL Server 2008，我有一个需要注意的查询。我对正确执行查询所需的连接感到困惑。

```
USE [ShaftData]
GO
/****** Object:  StoredProcedure [dbo].[MyPareto]    Script Date: 04/03/2012 19:32:31 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[MyPareto]
as

SELECT i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.part,
   i.sumofqty,
   a.sumofqty,
   dbo.NewParetoAnalysis.Pareto

FROM
   OPENQUERY(SACBAUTO, 'SELECT dbo.iLines.Part,
                            dbo.iLines.Pg,
                            SUM(dbo.iLines.Qty) as sumofqty,
                            dbo.iLines.Prefix 
                     FROM Autopart.dbo.iLines 
                     where prefix = ''i''
                     and [datetime] > dateadd(month, -6, getdate())
                     group by 
                     dbo.ilines.pg,
                     dbo.ilines.part,
                     dbo.ilines.prefix
                     order by sumofqty desc') i
RIGHT JOIN
dbo.OldParetoAnalysis
on
i.part collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part

LEFT JOIN
   OPENQUERY(SACBAUTO, 'SELECT dbo.aLines.Part,
                            dbo.aLines.Pg,
                            SUM(dbo.aLines.Qty) as sumofqty,
                            dbo.aLines.Prefix 
                     FROM Autopart.dbo.aLines 
                     where prefix = ''d''
                     and [datetime] > dateadd(month, -6, getdate())
                     group by 
                     dbo.alines.pg,
                     dbo.alines.part,
                     dbo.alines.prefix
                     order by sumofqty desc') a
ON
dbo.OldParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS = a.part
FULL JOIN
dbo.NewParetoAnalysis
ON
a.part collate SQL_Latin1_General_CP1_CI_AS = dbo.NewParetoAnalysis.Part
WHERE
i.pg = '31'
GROUP BY
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.part,
   i.sumofqty,
   a.sumofqty,
   dbo.NewParetoAnalysis.Pareto
ORDER BY
dbo.OldParetoAnalysis.Pareto desc 
```

好的解释，我需要显示这些字段。目前我需要显示旧帕累托的所有行。新的帕累托是旧帕累托的克隆，将用于更新（这是计划的下一部分）。

问题是目前我的帕累托显示正确 1-5780。但是应该逐行匹配的新帕累托列显示空白，这表明并非所有行都被显示（可能与空值有关）。

我希望它与我的连接有关，因为您可以看到它可能是一个过于复杂的查询，但它可以满足我的需要，问题是时间，它很匆忙，因为我有 24 小时来完成这个查询而没有事先计划（是的我的脸也是手掌）。

哦，帕累托只是分配给最畅销部分的数字，比如联赛。

如果您需要更多信息，请询问并进行错误编辑。

非常感谢

编辑：好的解决了问题，答案将被更新。

我很困惑，有人可以告诉我现在如何更新我的新旧帕累托表吗？因为有很多连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:57:38.493

继承人的代码：

```
USE [ShaftData]
GO
/****** Object:  StoredProcedure [dbo].[MyPareto]    Script Date: 04/04/2012 08:50:40 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[MyPareto]
@pgParam varchar(255)
AS
SELECT i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.part,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto

FROM
OPENQUERY(SACBAUTO, 'SELECT dbo.iLines.Part,
                            dbo.iLines.Pg,
                            SUM(dbo.iLines.Qty) as sales6months,
                            dbo.iLines.Prefix 
                     FROM Autopart.dbo.iLines 
                     where prefix = ''i''
                     and [datetime] > dateadd(month, -6, getdate())
                     group by 
                     dbo.ilines.pg,
                     dbo.ilines.part,
                     dbo.ilines.prefix
                     order by sales6months desc') i
RIGHT JOIN
dbo.OldParetoAnalysis
on
i.part collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part
INNER JOIN
dbo.NewParetoAnalysis
ON
dbo.OldParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS = dbo.NewParetoAnalysis.Part

LEFT JOIN
OPENQUERY(SACBAUTO, 'SELECT dbo.aLines.Part,
                            dbo.aLines.Pg,
                            SUM(dbo.aLines.Qty) as LostSales6Months,
                            dbo.aLines.Prefix 
                     FROM Autopart.dbo.aLines 
                     where prefix = ''d''
                     and [datetime] > dateadd(month, -6,   getdate())
                     group by 
                     dbo.alines.pg,
                     dbo.alines.part,
                     dbo.alines.prefix
                     order by LostSales6Months desc') a
ON
dbo.NewParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS = a.part
/*FULL OUTER JOIN
dbo.NewParetoAnalysis
ON
a.part collate SQL_Latin1_General_CP1_CI_AS = dbo.NewParetoAnalysis.Part*/
WHERE
i.pg = @pgParam
GROUP BY
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.part,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto
ORDER BY
dbo.OldParetoAnalysis.Pareto asc 
```

现在我有一个新问题。使用 c sharp，我将如何更新旧帕累托表和新帕累托表？

# android - 操作栏可检查图标？

> ID：10001951
> 
> 赞同：2
> 
> 时间：2012-04-03T21:51:53.393
> 
> 标签：android, android-4.0-ice-cream-sandwich, actionbarsherlock, android-actionbar

我想知道是否有可能在 ICS 的操作栏中有可检查的图标？不是用支票，而是用一个`android:stateChecked`可以玩的财产。我想要它，所以当用户点击图标时，他们会进入某种模式（图标的背景会是明亮的颜色，让他们知道他们仍然处于该模式），当他们再次点击它时，他们会被带走脱离那种模式。

我玩过一些选择器 xml，但没有任何效果......有什么想法吗？

编辑：我刚刚了解到 Checkable 项目不能出现在主菜单中，它们只能出现在子菜单中。但是，有没有办法仍然获得可检查的行为？`boolean`拥有like很容易`isInModeA`，但是有没有办法以编程方式更改操作栏项目的背景/图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:00:32.070

有一种方法可以以编程方式更改背景/图标。

[`ActionBar.setBackgroundDrawable`](http://developer.android.com/reference/android/app/ActionBar.html#setBackgroundDrawable%28android.graphics.drawable.Drawable%29)例如，您可以使用, 或`setCustomView`, 或`setIcon`（在同一页面上找到）。

您可以考虑使用类似下拉菜单的[ActionProvider](http://developer.android.com/reference/android/view/ActionProvider.html)来提供例如类似单选按钮的“开/关”而不是复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:00:13.037

您可以尝试的一种方法是将状态保存在某个变量中，并根据此状态显示不同的项目。显然，其中一些项目可以改变状态。您可能会考虑通过[实现自定义操作提供程序](http://developer.android.com/guide/topics/ui/actionbar.html#CreatingActionProvider)来做到这一点。

# ios - 获取元素的值而不解析ios中的所有xml文件

> ID：10001955
> 
> 赞同：0
> 
> 时间：2012-04-03T21:52:13.990
> 
> 标签：ios, xml, nsxmlparser

我想知道是否有可能，在不使用所有委托 NSXMLParse 方法的情况下获取 xml 文件的特定元素值，我知道在 OS X 中可以通过两个简单的行：

```
 NSXMLDocument *xmlDoc = [[NSXMLDocument alloc] initWithData:connection.data options:0 error:nil];

    NSString *time = [[xmlDoc rootElement] stringValueForXPath:@"./Time"]; 
```

有可能在 iOS 中做同样的事情吗？几行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:24:54.907

XPath 也适用于 iOS。这是一个关于使用 libxml2、XPath 和 XML 解析数据的非常棒的教程。

[有爱的古柯](http://cocoawithlove.com/2008/10/using-libxml2-for-parsing-and-xpath.html)

使用 XPath，您需要传入一个剪辑查询。对于以下 XML，您的剪辑查询将是“//day”：

```
<day>
Monday
</day>
<day>
Tuesday
</day>
...
<day>
Friday
</day> 
```

这将为您提供一个包含 5 个字典的数组，其中 node_name = day 和 node_content = 星期几。

# javascript - 清除输入框 onclick 图像

> ID：10001956
> 
> 赞同：0
> 
> 时间：2012-04-03T21:52:17.227
> 
> 标签：javascript, onclick, inputbox

此行更新验证码图像，它也应该清除输入框“验证码”。

```
 <div id="refresh_button"><a href="#" onclick="refreshimg();return false;"><img src="refresh.gif"/></a></div>

    <input type="text" maxlength="6" name="captcha" id="captcha" class="captcha_inputbox" /> 
```

所以我必须修改onClick，但我找不到这个，即使谷歌也找不到。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:58:52.853

您可以使用以下方法清除文本框的值：

```
document.getElementById('captcha').value = ''; 
```

或者，如果您使用的是 jQuery：

```
$('#captcha').val(''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:00:31.020

最好在脚本标签中执行此操作。例如，您可以执行以下操作：

```
<script type='text/javascript'>
   function refreshimg() {
      // do the refreshing here

      // since your input text has an id of 'captcha'
      document.getElementById("captcha").value = "";

      return false;
   }
</script> 
```

然后在你的 HTML 中，你会做

```
<div id="refresh_button"><a href="#" onclick="return refreshimg();"><img src="refresh.gif"/></a></div>
<input type="text" maxlength="6" name="captcha" id="captcha" class="captcha_inputbox" /> 
```

# javascript - 带有标签选择器的 Twitter Bootstrap 下拉菜单

> ID：10001957
> 
> 赞同：4
> 
> 时间：2012-04-03T21:52:18.303
> 
> 标签：javascript, jquery, drop-down-menu, twitter-bootstrap, stoppropagation

我对 Twitter Bootstrap 有疑问，我正在使用 Dropdown 插件，并且正在尝试创建标签选择器，我在此链接中创建了一个示例：

[http://jsfiddle.net/gatnc/](http://jsfiddle.net/gatnc/)

我试过这个：

```
event.stopPropagation;
return false; 
```

有没有人有更好的解决方案，在选择标签时不会关闭下拉菜单？

**注意：**点击“新标签”。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T22:44:30.157

这有效：

```
$('.dropdown-menu').on('click', 'li', function(event){...}); 
```

[更新了 jsFiddle](http://jsfiddle.net/gatnc/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:10:40.890

“活”的问题与文档有关。这意味着关闭事件不会被 stopPropagation 拦截。如果您使用的是 jQuery 1.7.1，您可以将“live”替换为“on”，如下所示：

```
$('.dropdown-menu li').on('click', function(event) { 
```

这会将事件绑定到元素，然后像 stopPropagation 这样的东西就会起作用。

# node.js - 如何在 Mongoose 中创建自动字段？

> ID：10001962
> 
> 赞同：5
> 
> 时间：2012-04-03T21:52:33.753
> 
> 标签：node.js, mongodb, mongoose

我有一个看起来像的模型：

```
var CompanySchema = new Schema({
    name: String
  , logoUrl: String
  , created: {
      type: Date,
      default: new Date().toUTCString() 
  }
  , deleted: {
      type: Date,
      default: null 
  }
}); 
```

我也想要一个名为的字段（这是在已经添加的字段`id`之上）。`_id`那么如何创建该`id`字段并将其自动分配给 的值`_id`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T15:07:31.300

```
CompanySchema.pre('save', function(next) {
  this.id = this._id;
  next();
}); 
```

# client - Netty 能否作为客户端有效地处理大量传出连接？

> ID：10001974
> 
> 赞同：2
> 
> 时间：2012-04-03T21:53:42.843
> 
> 标签：client, nio, netty

我正在创建一个客户端-服务器关系，其中一个客户端将使用持久 TCP 连接连接到任意数量的服务器。服务器的实际数量尚未确定，但设计目标是争取 1000 台。

我找到了一个使用直接 Java NIO 的示例，该示例几乎完全符合我的心智模型，即它是如何工作的：

[http://drdobbs.com/jvm/184406242](http://drdobbs.com/jvm/184406242)

通常，它会打开所有通道并将它们添加到监控 java.nio.channels.Selector 的单个线程中。尤其是选择器的使用，使得它比使用标准的每通道线程更好地扩展。

我宁愿使用（稍微）更高级别的套接字框架，如 Netty，而不是直接使用 Java NIO。不幸的是，我无法确定 Netty 将如何处理这样的案例。也就是说，我发现的示例和讨论都倾向于以服务器端为中心，接受大量并发连接。

但是从客户端这样做呢？如果我创建大量频道并等待它们的事件，Netty 将如何在后端处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T04:24:58.150

这不是您问题的直接答案，但我希望它仍然有用。下面，我描述了一种方法，供您确定您正在寻找的答案。这是我最近为即将到来的项目所做的事情。

与 OIO（旧 IO）相比，Netty 框架和 NIO 的异步特性确实会为您的应用程序提供更好的内存和 CPU 使用特性。Netty 中处理缓冲区的方式也将是有益的，因为它将帮助您避免复制字节缓冲区。关键是所有线程池和 NIO 细节都将为您处理，让您专注于业务逻辑。您提到了 NIO Selector，您将从中受益；Netty 的好处在于，您无需担心自己的实现即可获得好处，因为它已经为您完成了。

我对客户端的理解是它与服务器端非常相似，应该为您提供相应的性能提升（只要您的业务逻辑不引入任何性能问题）。

我的建议是拼凑一个或多或少可以满足您需求的原型。省去任何耗时的细节，只需添加基本的 Netty 处理程序，你需要做一些工作。

然后我会使用[jmeter](http://jmeter.apache.org/)调用您的客户端以将负载应用到服务器和客户端。使用[jconsole](http://docs.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html)或[jvisualvm 之](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)类的东西将向您展示客户端和服务器在负载下的性能特征。你也可以试试[jprobe](http://www.quest.com/jprobe/)。您可以在 jmeter 中添加一个侦听器来指示吞吐量。我建议在服务器模式下使用 jmeter，在另一台机器上使用客户端，在另一台机器上使用服务器。这是一些前期工作，但如果您决定继续前进，您将准备好这些工具，以便在您继续进行进一步测试时进行。

我怀疑一个体面的 Netty 实现不引入任何无关的性能不佳的组件会给你你正在寻找的性能特征，但是，唯一确定的方法是在预期的负载下测量系统。

您需要定义预期负载的外观以及在这种负载下所需的性能特征。鉴于这些输入，您可以测量您的系统以确定它是否符合您的期望。我个人认为没有人可以告诉您它是否会以所需的方式运行。你必须测量它。这是了解系统是否能满足您的需求的唯一可靠方法。

> *我宁愿使用（稍微）更高级别的套接字框架，如 Netty，而不是直接使用 Java NIO。*

这是正确的做法。您可以尝试实现自己的 NIO 服务器和客户端，但是当您已经拥有触手可及的高度精炼框架的好处时，为什么还要这样做呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:10:17.927

Netty 将使用最多 x 个工作线程来为您处理工作。每个工作线程将有一个 Selector 用于向其注册 Channels。使用的工人数量是可配置的，默认为 2 * cpu-count。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:13:14.433

正如您在 Netty 文档 [http://netty.io/docs/stable/guide/html/#start.9][1] 的示例中看到的，您可以准确控制工作线程的数量（意味着底层的数量）选择器）在客户端。Netty 解决了许多很难以简单的方式处理的问题，例如 NIO 与 SSL，并且有很多用于 Zip 的默认编码器/解码器......等等。我几周前开始使用 Netty，它非常快进来了。（我建议下载包含所有示例代码的项目，其中有很多文档在上面的 url 上找不到。

```
 ChannelFactory factory = new NioClientSocketChannelFactory(
                      Executors.newCachedThreadPool(),
                      Executors.newCachedThreadPool());

            ClientBootstrap bootstrap = new ClientBootstrap(factory);

            bootstrap.setPipelineFactory(new ChannelPipelineFactory() {
             public ChannelPipeline getPipeline() {
                    return Channels.pipeline(new TimeClientHandler());
             }
            });

            bootstrap.setOption("tcpNoDelay", true);
            bootstrap.setOption("keepAlive", true);

            bootstrap.connect(new InetSocketAddress(host, port)); 
```

祝你好运，

雷诺

# google-maps-api-3 - Google Maps API 版本 3 导致图像模糊/模糊

> ID：10001977
> 
> 赞同：6
> 
> 时间：2012-04-03T21:53:56.960
> 
> 标签：google-maps-api-3, imagesource, safari

出于某种原因，Safari 5.1.5 谷歌地图模糊了我的一些图像。以[http://catpr.com/craig-chapman/](http://catpr.com/craig-chapman/)为例 - 当它加载枝形吊灯时，它会清晰地渲染片刻，然后变得模糊。

移除

```
<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?sensor=false">   </script> 
```

从我的代码中可以阻止这种情况的发生。它似乎只影响 Safari - 这在 Firefox 或 Chrome 中不会发生。我没有测试任何旧版本的 Safari，所以它可能是一个错误？我也试过清除我的缓存，重新启动我的电脑 + 更新 Safari，没有任何变化。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T01:59:42.797

由于 Chrome（23 beta）上的 3.8 和 3.9 API 之间的差异，这个问题现在发生在我身上。如果我指定 3.9 API，它会在瞬间正确显示地图，然后让一切变得模糊。如果我指定 3.8 API，它可以正常工作。

你可以在这里看到问题：

![](../Images/099d1611407a40e0778f5270cc8d81d6.png)

问题出在[http://melbourne.origami.org.au](http://melbourne.origami.org.au)上；我目前将 3.8 API 设置为一种解决方法，但是当 v10 最终发布时，它可能会强制 3.9 成为最低可用的 API。

根据我自己的探讨，3.9 和 3.10 似乎调用 Chrome（以及我想象的扩展 Safari）来使用 GL 合成渲染所有内容，因为它添加了 -webkit-transform: translateZ(0); 到所有地图元素。这似乎是事情看起来很可怕的原因。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-25T01:02:34.513

我也遇到了这个问题，地图本身和页面上的字体。经过很长时间试图解决这个问题，这是我的结论：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3.5&sensor=false"></script> 
```

第一个（和你的一样）给了我模糊的地图。如果我将其注释掉并强制使用 3.5 版，地图就会清晰而快乐！

我也遇到了 Google Maps API 在我的网站字体中更改抗锯齿的问题。我设法在我的 main 上解决了这个问题`style.css`：

```
* {
    -webkit-font-smoothing: subpixel-antialiased !important;
} 
```

**我希望这对您或某人有所帮助。** 注意：我使用的是 twitter 引导框架。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-03T23:03:18.383

我无法在 Safari 中重现该错误。但是，有两种可能的解决方法：

1.  异步加载脚本。查看 maps api 的基本入门页面并找到异步加载 API 部分：http: [//goo.gl/m9OwJ](http://goo.gl/m9OwJ)

2.  尝试改用 Google 静态地图图像，它不会仅加载地图图像的 JavaScript。[http://goo.gl/wY8lF](http://goo.gl/wY8lF)。我建议您这样做，因为您似乎没有使用 Google Maps API 的动态功能。

# php - php会话变量在新的子文件夹中不起作用

> ID：10001980
> 
> 赞同：0
> 
> 时间：2012-04-03T21:54:08.697
> 
> 标签：php, session-variables, subdirectory

我正在开发我的 php 应用程序并使用 mysql 来存储会话数据，并且 $_SESSION 在根目录和子文件夹中都可以正常工作。但是现在当我创建**新的子文件夹**时，可以在其中编写会话，但我无法读取会话。例如

```
$_SESSION['username'] = 'james'; 
```

它工作正常，session_id 和 session_data 都存储在我的 mysql 会话表中。并且存储在我的浏览器中的会话 id 与表中的 id 匹配，但是当我想使用它时（从 mysql 读取数据）它在**新的子文件夹中不起作用**。例如：

```
echo $_SESSION['username']; 
```

它不起作用。这很有趣，因为当我将文件复制到以前的子文件夹中时，它一切正常。而且我不在我的子文件夹中使用 .htaccess。

真的很困惑。感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:56:23.083

您可能缺少`session_start();`一页或多页。

[http://php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

编辑：就像 Zanrok 说的那样，如果没有看到任何代码，就很难诊断出你的问题。

# html - “脚本元素上的语言属性已过时。您可以放心地省略它。”？

> ID：10001983
> 
> 赞同：22
> 
> 时间：2012-04-03T21:54:31.837
> 
> 标签：html, w3c-validation, script-element

根据 W3C 验证器，我收到此错误：

> 元素上的`language`属性已过时。`script`您可以放心地忽略它。
> 
> ```
> …uage="JavaScript" src="js/gen_validatorv31.js" type="text/javascript"></script> 
> ```

我该如何解决？

我检查了脚本，这应该不是问题。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-03T21:56:27.047

```
<script type="text/javascript" src="js/gen_validatorv31.js"
     language="JavaScript"></script> 
```

您不需要包含冗余`language="JavaScript"`. 仅指定`type`and`src`是有效的，`language`已过时，请将其删除。

# php - 如何使用字符串访问 PHP 多维数组中的元素？

> ID：10001988
> 
> 赞同：1
> 
> 时间：2012-04-03T21:54:45.687
> 
> 标签：php, arrays, multidimensional-array

我有这样的事情：

```
function print_element($array, $field){
  return "Element: {$array[$field]}";
}

$array['name_en'] = 'English name';
echo print_element($array, 'name_en'); 
```

我希望访问属于主数组的数组中的属性，如下所示：

```
$array['english_values']['name_en'] = 'English name';
echo print_element($array, "['english_values']['name_en']"); 
```

有没有办法做到这一点？

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:58:45.547

```
echo print_element($array['english_values'], 'name_en'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:00:16.907

将字符串 'english_values,name_en' 传递给您的函数。在函数内部，用逗号分解字符串，然后循环遍历数组并`$array = $array[$thisKey]`在每次传递时赋值。`is_array($array)`您可能还希望在每次通过时检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:09:10.140

你有数组和键试试这个：

```
 function print_var($val) {
        echo "VAR: {$val} <br/>";
    }

    $array['english_values']['name_en'] = 'English name';
    print_var($array['english_values']['name_en']);

    // OUTPUT
    // VAR: English name 
```

# c++ - libxml - 从原始数据加载 xmlDoc

> ID：10001990
> 
> 赞同：1
> 
> 时间：2012-04-03T21:54:46.840
> 
> 标签：c++, c, libxml2

我有一个 char* 数据缓冲区，我想在 libxml2 中将其解析为 XML。

一个人会怎么做呢？

目前我正在使用它通过调用文件名来自动打开文件，但是拥有更多功能会很好。

目前我这样做：

```
xmlDocPtr doc = xmlParseFile("data/foo.xml"); 
```

但是我有一个资源系统可以让我访问原始数据，所以我更喜欢的方法是：

```
resource_base_ptr res = load_resource("data/foo.xml");
xmlDocPtr doc /*= some_function(res->raw_data) */; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:14:39.907

您需要使用 xmlReadMemory()

[http://xmlsoft.org/html/libxml-parser.html#xmlReadMemory](http://xmlsoft.org/html/libxml-parser.html#xmlReadMemory)

# xml - xsl：当没有按预期工作时

> ID：10001998
> 
> 赞同：0
> 
> 时间：2012-04-03T21:55:23.957
> 
> 标签：xml, xslt

我有一个从 SQL 数据库填充的表。输入的大部分数据都有一个 ABN，我可以用它来查找电子邮件和姓名。有些数据没有 ABN，只有 UID。我不想在表中显示 UID，因为 98% 的时间都是不必要的，所以如果没有名称，我想使用 xsl:when 将名称字段更改为 UID。

以下是 XML 中两种情况的示例：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <CourseData>
      <row batchid="0" courseid="10101" createdon="04/03/2012 01:08PM" datecompleted="1:08 PM" datecompletedDateValue="1333483680000" lastupdatebyabn="999999" lastupdatebyuid="tsmith" lastupdateon="04/03/2012 01:08PM" num="2" respondentabn="999999" respondentemail="tsmith@test.com" respondentid="1" respondentname="Thomas Smith" respondentuid="tsmith"/>       
      <row batchid="0" courseid="10101" createdon="04/03/2012 01:08PM" datecompleted="1:08 PM" datecompletedDateValue="1333483697000" lastupdatebyabn="" lastupdatebyuid="jsmith" lastupdateon="04/03/2012 01:08PM" num="3" respondentabn="" respondentemail="" respondentid="2" respondentname=" " respondentuid="jsmith"/>
    </CourseData> 
```

这是我正在使用的 XSL，它显然不起作用。

```
 <xsl:choose>
      <xsl:when test="row[@respondentabn='']">
        <label datafield="@respondentuid"></label>
      </xsl:when>
      <xsl:otherwise>
        <label datafield="@respondentname"></label>
      </xsl:otherwise></xsl:choose></td> 
```

我怎样才能解决这个问题？

编辑：所以在与我的老板交谈后，他说我需要一个循环才能正常工作，但我真的不应该在 .xsl 中这样做。我修改了为我提供数据的 sql 以进行更改，回想起来，我可能一开始就应该想到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:08:03.320

使用 XSLT，您无法检查是否存在严格意义上的空字符串。最简单的方法是评估逆：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"> 

    <xsl:template match="/">
        <doc>   
           <xsl:apply-templates select="CourseData/row"/>   
        </doc>
    </xsl:template>

    <xsl:template match="CourseData/row"> 
        <xsl:choose>
            <xsl:when test="@respondentabn!=''"> 
                <xsl:element name="label">
                    <xsl:attribute name="datafield">
                       <xsl:value-of select="@respondentname"></xsl:value-of>   
                    </xsl:attribute>
                </xsl:element>
            </xsl:when>
            <xsl:otherwise>
                <xsl:element name="label">
                    <xsl:attribute name="datafield">
                        <xsl:value-of select="@respondentuid"></xsl:value-of>
                    </xsl:attribute>
                </xsl:element>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template> 

</xsl:stylesheet> 
```

产生：

```
<doc><label datafield="Thomas Smith" /><label datafield="jsmith" /></doc> 
```

另一种方法是将 respondentabn 属性的值分配给变量，然后您可以针对变量评估 when 子句：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"> 

    <xsl:template match="/">
        <doc>   
           <xsl:apply-templates select="CourseData/row"/>   
        </doc>
    </xsl:template>

    <xsl:template match="CourseData/row"> 
        <xsl:variable name="respondentabn">
           <xsl:value-of select="@respondentabn"/>
        </xsl:variable>

        <xsl:choose>
          <xsl:when test="$respondentabn=''">
            <xsl:element name="label">
               <xsl:attribute name="datafield">
                  <xsl:value-of select="@respondentuid"/>
               </xsl:attribute>
            </xsl:element>
          </xsl:when>
          <xsl:otherwise>
            <xsl:element name="label">
               <xsl:attribute name="datafield">
                  <xsl:value-of select="@respondentname"/>
               </xsl:attribute>
            </xsl:element>
          </xsl:otherwise>
        </xsl:choose>

    </xsl:template> 

</xsl:stylesheet> 
```

产生：

```
<doc><label datafield="Thomas Smith" /><label datafield="jsmith" /></doc> 
```

两种方法都可以满足您的需求，只是您更容易理解哪种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:24:48.170

你没有给出太多关于样式表的指示，所以很难确定，但我猜你有类似的东西

```
<xsl:for-each select="row">
<xsl:choose>
      <xsl:when test="row[@respondentabn='']">
        <label datafield="@respondentuid"></label>
      </xsl:when>
      <xsl:otherwise>
        <label datafield="@respondentname"></label>
      </xsl:otherwise>
</xsl:choose>
</xsl:for-each> 
```

或者在任何情况下，如果当前节点使得 row[@respondentabn=''] 做任何有用的事情，它必须是 row 的父节点，在这种情况下`<label datafield="@respondentuid">`将选择父节点的属性（即使 AVT 语法已更正）。

所以我猜：

```
<xsl:for-each select="row">
<xsl:choose>
      <xsl:when test="string(@respondentabn)">
        <label datafield="{@respondentuid}"></label>
      </xsl:when>
      <xsl:otherwise>
        <label datafield="{@respondentname}"></label>
      </xsl:otherwise>
</xsl:choose>
</xsl:for-each> 
```

或者，更简洁

```
<xsl:for-each select="row">
   <label datafield="{@respondentuid[string(.)]|
                      @respondentname[not(string(../@respondentuid))]}"/>
 </xsl:for-each> 
```