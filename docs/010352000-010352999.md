# StackOverflow 问答 10352000-10352999

# android - 如何按其双重属性对数组进行排序？

> ID：10352001
> 
> 赞同：0
> 
> 时间：2012-04-27T13:56:11.600
> 
> 标签：android

我有一个由以下数组对象填充的 ListActivity：

```
public class VideoLocation {

    public String deleted_at = null;
    public int documentary_video_length = -1;
    public int id = -1;
    public double latitude = 0d;
    public double longitude = 0d;
    public int position = -1;
    public String updated_at = null;
    public String name = null;
    public String text = null;
    public String documentary_video_url = null;
    public String documentary_thumbnail_url = null;
    public String audio_text_url = null;
    public Footage[] footages = null;

    public VideoLocation(){

    } 
```

我需要根据位置和用户之间的距离对 ListActivity 进行排序。我按字母顺序对“名称”字符串进行排序没有任何问题，我使用这种方法：

```
public void sortAZ(){
    Arrays.sort(videoLocations, new Comparator<VideoLocation>() {

        @Override
        public int compare(VideoLocation lhs, VideoLocation rhs) {
            return lhs.name.compareTo(rhs.name);
        }
    });
} 
```

但该方法不能用于“双”数据类型，我需要“纬度”和“经度”。此外，对象 VideoLocation 没有属性“距离”。

即使我可以计算位置和用户之间的距离，我如何才能解决它？

**更新**

**这是最终解决方案！奇迹般有效**

```
public void sortNearby(){
        Arrays.sort(videoLocations, new Comparator<VideoLocation>() {

            @Override
            public int compare(VideoLocation lhs, VideoLocation rhs) {

                double lat = location.getLatitude();
                double lng = location.getLongitude();

                double lat1 = lhs.latitude;
                double lng1 = lhs.longitude;

                double lat2 = rhs.latitude;
                double lng2 = rhs.longitude;

                double lhsDistance = countDistance(lat,lng,lat1,lng1);
                double rhsDistance = countDistance(lat,lng,lat2,lng2);
                if (lhsDistance < rhsDistance) 
                    return -1;
                else if (lhsDistance > rhsDistance) 
                    return 1;
                else return 0;
            }
        });
    }

public double countDistance(double lat1,double lng1, double lat2, double lng2)
    {
        Location locationUser = new Location("point A");
        Location locationPlace = new Location("point B");
        locationUser.setLatitude(lat1);
        locationUser.setLongitude(lng1);
        locationPlace.setLatitude(lat2);
        locationPlace.setLongitude(lng2);

        double distance = locationUser.distanceTo(locationPlace);

        return distance;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:03:01.020

要比较双打，你可以这样做：

```
@Override
public int compare(VideoLocation lhs, VideoLocation rhs) {
    double lhsDistance = ...
    double rhsDistance = ...
    if (lhsDistance < rhsDistance) return -1;
    else if (lhsDistance > rhsDistance) return 1;
    else return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:02:48.087

要么给出`VideoLocation`一个字段来保存与用户的距离，计算每个位置`Comparator`的距离，然后用比较距离的 a 进行排序，或者制作一个`Comparator`计算两个距离并比较它们的 a。

第一种方法需要一个`VideoLocation`您可能不想拥有的额外字段。第二种方法进行一些冗余计算（计算距离类似于 2n log n 次而不是 n 次）。任君挑选；两者都可以正常工作，而且都不是*那么*昂贵。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:04:49.750

您可以使用该[`Location.distanceBetween()`](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)方法获取两点与用户之间的距离，然后对其进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T14:23:11.497

或者你可以使用一些强大的工具，比如`Collections`......

> ArrayList someList = new ArrayList(getDoubleListFromSomewhere());
> 
> Collections.sort(someList, new Comparator < Double>() {
> 
> 公共 int 比较（双 c1，双 c2）{
> 
> ```
>  return c1.getName().compareTo(c2.getName());
> 
> } 
> ```
> 
> });

之后，您的双精度值列表应全部排序...

干杯'

切姆

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T15:03:59.323

您的代码始终返回 0，因为 lhsDistance 和 rhsDistance 始终相同：

```
double lhsDistance = countDistance(lat,lng,lat2,lng2);
double rhsDistance = countDistance(lat,lng,lat2,lng2); 
```

您没有提供足够的信息，但我想您想比较用户与许多不同位置之间的距离，例如：

```
double lhsDistance = countDistance(latUser, lngUser, lat, lng);
double rhsDistance = countDistance(latUser, lngUser, lat2, lng2); 
```

# mvvm - DataGrid 上的动态转换器参数

> ID：10352002
> 
> 赞同：1
> 
> 时间：2012-04-27T13:56:14.963
> 
> 标签：mvvm, silverlight-5.0

我有一个 DataGrid，其中一些列显示双精度值。我使用转换器来格式化这些值，因为它需要一些计算。格式如下： 如果值为 1,200，则显示 1,2K 如果值为 1,200,000，则显示 1,2M 如果值为 1,200,000,000，则显示 1,2B

有一个带有启用/禁用格式选项的复选框，因此我需要将复选框的状态作为参数传递给转换器。

我试图绑定 ConverterParameter，但在 Silverlight 5 中是不可能的。

我怎样才能做到这一点？

我正在使用 Silverlight 5 和 MVVM（没有任何框架，如 Prism 或 MVVMLight）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:14:30.577

我会这样做：

1.  有简单的可见性转换器来控制可见性，即 visibleifFormatIsRegular ， visibleifFormatIsNotRegular
2.  两个值转换器，用于将值转换为您需要显示的每种格式的值
3.  具有下面提到的格式的两个文本块仅转换器名称更改

    textblock 1 ==> Text={Binding propertyvalue, Converter{staticresource YourIvalueConverterforactualFormatConversion}} Visibility={Binding checkboxtoggledProperty, converter {visibilityConverter }}

希望这可以帮助！

# android - Android ImageMap WebKit Highlightcolor

> ID：10352007
> 
> 赞同：0
> 
> 时间：2012-04-27T13:56:29.987
> 
> 标签：android, android-ui

您好，我遇到以下问题：

- 我正在使用 ImageMap 使图像的不同部分可点击，效果很好。我正在通过 WebViewClient 拦截链接点击并用它们做其他事情。问题是，我不希望单击的区域被突出显示/选择。以下样式似乎不起作用。我已经在各种 Android 设备（2.2、2.3、4.0 等）上对此进行了测试，每次单击图像区域时矩形都会亮起。有人有什么想法吗？

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
   <style>
    a{outline:none;}
    a:active{outline:none;}
    a:focus{outline:none;}
    area,area:active,area:focus {outline: none; border:0; }
    *{-webkit-tap-highlight-color:rgba(0,0,0,0);}
    </style>
  </head>
  <body>
    <img usemap="#map1" src="sourceimage" >
    <map name="map1">
     <area href="do1" alt="text1" coords="338,142,209,182"
          shape="rect">
   ...

    </map>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:56:35.273

我刚刚找到了答案。它与 html 图像映射本身无关。我只是忘了设置 webView.setFocusableInTouchMode(false); 这解决了突出选择的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T03:26:34.567

这对我有用：

```
$("map area").on("touchend", function() {
    return false;}); 
```

根据：[通过PhoneGap Build从Android 4.x应用程序中的图像地图区域中删除高光](https://stackoverflow.com/questions/14131416/removing-heighlight-from-image-map-area-in-android-4-x-app-via-phonegap-build)

# jquery - 使用 jquery 代替 live - 我怎样才能获得过滤后的元素

> ID：10352010
> 
> 赞同：0
> 
> 时间：2012-04-27T13:56:39.053
> 
> 标签：jquery

使用 jQuery，我将旧的 .live() 事件绑定替换为 .on()，如下所示：

```
$(document).on(event, selector, function () {
    console.log($(this)); //$(this) refers to the $(document) element, not the selector

}); 
```

我想要做的是访问正在应用此事件的元素。有任何想法吗？

这有效：

```
$(selector).on(event, function () {
    console.log($(this)); //$(this) refers to the selector
}); 
```

但它的工作方式与 live 不同 - 添加到文档中匹配选择器的新元素不会被绑定......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:01:05.770

根据文档，您的假设是不正确的：

```
$("body").on("click", "p", function(){
  alert( $(this).text() );
}); 
```

其中，我们被告知“每次单击时都会在警报框中显示每个段落的文本”。因此，`this`引用是对过滤选择器匹配的元素。

您可以通过设置一个示例来自行测试该`nodeName`对象`this`：

```
$("body").on("click", "p", function(){
  alert( this.nodeName ); // p
}); 
```

演示：http: [//jsbin.com/eseduf/edit#javascript,html](http://jsbin.com/eseduf/edit#javascript,html)

我注意到您正在使用一个变量作为您的过滤选择器 - 确保您为此变量设置了一个值。如果不这样做，您会发现主选择器将捕获事件，而不是过滤选择器：

```
var selector;
$("body").on("click", selector, function(){
  alert( this.nodeName ); // body
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:07:49.410

看看这个 jsFiddle... [http://jsfiddle.net/nc9XD/1/](http://jsfiddle.net/nc9XD/1/)

“on”方法将获取新元素......只要它们被添加到您将 on 事件绑定到的元素中。

另外..“this”将指的是在您的函数中单击的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:02:21.090

您可以添加事件将应用于的“选择器”。做一些像live这样的事情，这样做：

```
$(document).on("click", "a", function() { console.log($(this)); }); 
```

最好模拟 .delegate，并将范围缩小到包含元素：

```
$("#containingElement").on("click", "a", function() { console.log($(this)); }); 
```

# data-binding - 使用绑定的 StringFormat 格式化 TextBox 中的数字输入

> ID：10352011
> 
> 赞同：1
> 
> 时间：2012-04-27T13:56:41.223
> 
> 标签：data-binding, string-formatting, silverlight-5.0

所以，虽然标题听起来像很多其他类似的问题（比如那些出现在“标题相似的问题”框下的问题），但我觉得这是一个独特的情况。我想要完成的是：我有一个对象，上面有 2 个属性。第一个是十进制值，第二个是存储 .Net 格式类型（p/g/n/etc.）的字符串属性。

我最终想做的是这样的：

```
<TextBox Text="{Binding Path=decimalproperty, Mode=TwoWay, StringFormat={Binding path=formatproperty}}" /> 
```

有没有人做过这样的事情？我曾想过尝试使用 ValueConverter，但由于您必须绑定到完整对象才能访问 decimal 属性和 format 属性，因此 convertback 似乎不起作用。任何建议或方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:26:38.070

我最终在对象模型上创建了一个视图模型，并在那里处理了格式，同时更改了我的 UI 以使用 Silverlight 中的 DataGrid。然后我构建了一个模板列并构建了 2-3 个控件来适当地处理数据。对它的实现方式不满意，但它实现了我想为客户实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:08:16.387

为什么不使用独特的数据类型？我认为，最好将对象转换为字符串

```
Stirng MyResult=(MyCoomonObject.ToString()) ; 
```

# android - 如何从 Android 设备获取错误？

> ID：10352013
> 
> 赞同：1
> 
> 时间：2012-04-27T13:56:49.773
> 
> 标签：android

当 .apk 部署并下载到 Google Play 时，如果它崩溃，用户可以上传堆栈跟踪的错误报告。如果我们有一个内部 QA 团队，并且 .apk 已从开发人员的 PC 直接部署到设备，是否可以在不连接到 PC 或将应用程序部署到公众的情况下收集错误堆栈跟踪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:06:25.873

[ACRA](http://code.google.com/p/acra/wiki/BasicSetup)是一个免费库，您可以轻松地在应用程序中包含和使用它，以自动将所有崩溃报告发布到 GoogleDoc 表单。

根据他们的描述：

> ACRA 允许您的 Android 应用程序将崩溃报告发送到各种目的地：
> 
> *   Google Docs 电子表格（默认和原始行为）
> *   一封电邮
> *   您自己的服务器端 HTTP POST 脚本（
> *   通过实现您自己的报告发送器来实现任何其他可能的目的地

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T14:04:08.197

我使用的一种方法是在所有线程中添加我自己的默认异常处理程序，包括使用的 UI 线程

```
Thread.setDefaultUncaughtExceptionHandler(
            new MyDefaultExceptionHandler(this)); 
```

在 MyDefaultExceptionHandler 中，我将未捕获的异常保存到文件中，并让正常处理发生，即应用程序崩溃。当应用下次启动并找到崩溃报告文件时，它会向用户显示对话框，询问是否应将崩溃报告发送给开发人员。如果用户选择“是”，那么我将文件中的堆栈跟踪通过电子邮件发送给我自己并删除/清除文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:58:22.983

您可以使用一些服务，例如 BugSense 来收集堆栈跟踪。但要使用它，应用程序应该具有 android.permission.INTERNET 权限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T14:01:17.083

安装 LogViewer，你可以在你的设备上看到 logcat 的输出。对我很有用。

[https://play.google.com/store/apps/details?id=ukzzang.android.app.logviewer](https://play.google.com/store/apps/details?id=ukzzang.android.app.logviewer)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T14:03:11.483

Google play 中有很多应用程序，例如[Log Store](https://play.google.com/store/apps/details?id=com.xtralogic.android.logcollector&feature=search_result)，测试人员可以使用这些应用程序在您的电子邮件中发送应用程序日志。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T16:33:13.470

Hockeyapp(www.hockeyapp.net) 对此非常有用。它有助于在不向公众开放您的应用程序的情况下进行 Beta 测试。我已经使用它很长一段时间了，上传新版本的应用程序并让用户更新他们的应用程序非常容易。这是来自他们的网站

> HockeyApp 是在 Mac OS X、iOS 和 Android 上分发测试版和收集测试版和发布应用程序的实时崩溃报告的最佳方式。

# c# - 如何在每一页上打印不同的文本

> ID：10352016
> 
> 赞同：-2
> 
> 时间：2012-04-27T13:56:59.920
> 
> 标签：c#, printing

我想用 C# 打印，

我想在用户选择的每个页面副本上打印一些随机数据，

可能吗？

例如。

```
The User Select that he want 3 Copies of that page,

and on page 1 Should be printed =   123
on page 2 should be printed =       456
and on page 3 should be printed =   345 
```

这怎么可能，请给我一些例子

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:01:20.223

您可以为标签分配 RandomNumber

```
Random random = new Random();
int randomNumber = random.Next(0, 100); 
```

其中 0 和 100 是生成随机数的范围。

# android - 如何在 ActionBarSherlock 中设置标题颜色？

> ID：10352022
> 
> 赞同：14
> 
> 时间：2012-04-27T13:57:11.850
> 
> 标签：android, actionbarsherlock

如何设置标题颜色`ActionBarSherlock`？

我应该使用哪些主题属性？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-25T09:52:30.843

你可以很容易地做到这一点

```
getSupportActionBar().setTitle(Html.fromHtml("<font color='#ffffff'>App Name</font>")); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-27T20:22:36.183

来自[ActionBarSherlock 网站](http://actionbarsherlock.com/theming.html)

**家长主题**

> 为了使自定义操作栏实现起作用，您的应用程序必须使用 Theme.Sherlock、Theme.Sherlock.Light 或 Theme.Sherlock.Light.DarkActionBar，或者您的自定义主题必须使用上述其中之一作为其父级。

**镜像属性**

> 由于 Android 主题系统的限制，任何主题自定义都必须在两个属性中声明。普通的 android-prefixed 属性将主题应用于本机操作栏，unprefixed 属性用于自定义实现......

简而言之，这意味着您`android:`在为`ActionBar`.

**主题化标题颜色**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="YOURTHEME" parent="Theme.Sherlock.Light">
<item name="android:actionBarStyle">@style/YOURTHEME.ActionBarStyle</item>
<item name="actionBarStyle">@style/YOURTHEME.ActionBarStyle</item>
</style>

<style name="YOURTHEME.ActionBarStyle" parent="Widget.Sherlock.Light.ActionBar">
<item name="android:titleTextStyle">@style/YOURTHEME.ActionBar.TitleTextStyle</item>
<item name="titleTextStyle">@style/YOURTHEME.ActionBar.TitleTextStyle</item>
</style>

<style name="YOURTHEME.ActionBar.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
<item name="android:textColor">@color/YOUR_COLOR</item>
<item name="textColor">@color/YOUR_COLOR</item>
</style>
</resources> 
```

**笔记**

我没有测试过这个。另外，[你试过什么？](http://mattgemmell.com/2008/12/08/what-have-you-tried/)您应该在将来在[SO上发布之前进行搜索。](https://stackoverflow.com/faq#questions)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-08-28T16:49:38.940

我已经改变了这种方式的标题颜色：

在 Styles.xml 文件中，我添加了这些样式

```
<style name="Theme.Styled" parent="@style/Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/CustomActionBarStyle</item>
    <item name="android:actionBarStyle">@style/CustomActionBarStyle</item>
</style>

<style name="CustomActionBarStyle" parent="@style/Widget.Sherlock.ActionBar">
    <item name="titleTextStyle">@style/CustomTitleColorBar</item>
    <item name="android:titleTextStyle">@style/CustomTitleColorBar</item>
</style>

<!-- Style for the color title bar -->
<style name="CustomTitleColorBar" parent="@style/TextAppearance.Sherlock.Widget.ActionBar.Title">
    <item name="android:textColor">@android:color/white</item>
</style> 
```

我做的最后一件事是在活动中设置主题：

**公共静态 int THEME = R.style.Theme_Styled;**

这一行在 super.onCreate() 方法之前

**设置主题（主题）；**

就是这个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-12T11:38:21.880

您可以从 style.xml 中的 2 个地方或以编程方式
1.From style.xml

2.或者在代码中

```
int titleId = Resources.getSystem().getIdentifier("action_bar_title", "id", "android");  
TextView yourTextView = (TextView)findViewById(titleId);
yourTextView.setTextColor(getResources().getColor(R.color.myColor)); 
```

或者使用actionbar你也可以实现这个

```
getSupportActionBar().setTitle(Html.fromHtml("<font color='#ffffff'>App Name</font>")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-01T17:54:19.333

我认为您正在尝试更改**Menu**上的文本颜色，而不是**ActionBarSherlock中****Title**中的文本颜色。

 **当您用来`getSupportActionBar().SetTitle("My Title")`设置此文本的样式时，您应该使用代码`@Archie.bpgc`。他的回答是正确的，但我相信你需要以下代码：

```
<style name="MyTheme.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Menu">
    <item name="android:textColor">@color/white</item>
    <item name="android:textSize">24sp</item>
    <item name="android:gravity">center</item>
</style> 
```

看到你只是`parent =" TextAppearance.Sherlock.Widget.ActionBar.Title">`交换`parent = "TextAppearance.Sherlock.Widget.ActionBar.Menu">`**

# jquery - 在 jquery 中设置 HTML 的文本框？

> ID：10352025
> 
> 赞同：-4
> 
> 时间：2012-04-27T13:57:15.850
> 
> 标签：jquery, jquery-selectors

下面我使用这个脚本来设置一个文本框值..

```
 $('#sub').click(function(){

     var num1 = $('#text1').val(); 
     var num2 = $('#text2').val();

     var newVal = (num1+2)*(num2/4);
     var nextVal =(num1+4)*(num2/2);
     $(#text1).val(newVal); //setting the textbox value here 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:59:31.940

你错过了引号：

```
$("#text1").val(newVal); //setting the textbox value here 
```

当您使用支持代码高亮显示的编辑器时，这一点很明显。

# c++ - 线程不刷新数据，在屏幕上显示数据时出错

> ID：10352030
> 
> 赞同：0
> 
> 时间：2012-04-27T13:57:25.430
> 
> 标签：c++, multithreading, file, sockets

我正在创建一个套接字程序来将数据从一台 pc 传输到另一台，但是当我将一些二进制数据发送到另一端进行处理时出现问题。在这种情况下，我需要一个线程在数据套接字发送数据时监听消息套接字。所以我发现问题不在于套接字，如果我尝试将数据写入屏幕（这次没有套接字），就会出现问题。所以我尝试使用 fflush(stdout) 刷新数据但没有运气。代码以这种方式工作。

```
Initialize the 2 sockets.
Initialize 2 threads.
  One to get the data back through the data socket.
  The other send the data.    
And while sending all the data one while(true){sleep(1)} in the main function, because the data can take 1 second to be processed or one hour so i keep the program alive this way (Don't know if that is the better way). 
```

我创建了一个较小的版本，只使用一个线程来读取并发送到屏幕，并在主线程中。

代码：

```
#include <iostream>
#include <fstream>
#include <string.h>

using namespace std;

const int RCVBUFSIZE=2000;
char echoString[RCVBUFSIZE];

static void * _sendExec(void *instance);

int main(){
  pthread_t m_thread;
  int merror;
  merror=pthread_create(&m_thread, NULL, _sendExec, NULL);
  while(1){sleep(1);}
}
static void * _sendExec(void *instance){
  int size;
  for(;;){
    while((size=read(fileno(stdin), echoString, RCVBUFSIZE))>0) write(fileno(stdout), echoString, size);
    fflush(stdin);
    fflush(stdout);
    pthread_exit(0);
  }
} 
```

如果你尝试 cat file.tar.gz | ./a.out | tar -zvt 你可以看到不是所有的数据都显示在屏幕上，如果我放在主屏幕上，取消睡眠就可以了，问题是我需要恢复数据，这可能需要一些时间。就像我做一个 cat file.tar.gz | ssh root@server "tar -zvt"。

感谢人们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T00:15:16.940

我假设您提供的代码不是您正在使用的实际代码。正如 wreckgar23 提到的，如果您想等待线程完成，您应该在 main 函数的末尾使用 pthread_join。您可以删除 while(1){ sleep(1);}/pthread_exit(0)，pthread_join 将使主线程等待线程完成。

也使用 while(1)/for(;;) 不是一个好主意..您至少可以使用一个 int 值将其设置为 0 并进行所有数据处理，直到它将其值更改为 1。您可以检查一个您通过套接字接收的数据中的某些“消息”用于终止命令，并将 int 的值设置为 1。（因此您可以通过您的（客户端）输入控制服务器的生命周期，您的整个服务器应用程序可以停止在您完成数据处理后..) 如果您这样做，您还应该考虑到安全隐患..

您还应该明确指定您正在使用哪种类型的套接字。例如，如果您使用 udp 套接字并且缓冲区很小，则可能会丢失数据。此外，您无法打印缓冲区中的数据并写入它同时。（将缓冲区写入屏幕需要时间。在将数据写入屏幕时，可能会有新数据到达缓冲区并在有机会打印之前覆盖旧数据）

# c# - C# RegEx 匹配表达式中的可选元素

> ID：10352032
> 
> 赞同：3
> 
> 时间：2012-04-27T13:57:38.043
> 
> 标签：c#, regex

如何在以下 C# RegEx 表达式中使“test2”成为可选元素，当缺少“test2”元素时，正确解析出“test1”值？

```
 StringBuilder sb = new StringBuilder();
 sb.AppendLine("    test1=123 any text in between  ");
 sb.AppendLine(" some ");
 sb.AppendLine(" more ");
 sb.AppendLine(" text in between ");
 sb.AppendLine("    test2=456   ");
 sb.AppendLine("    test1=789  some text .. test2=012   ");

 Regex regex = new Regex(@"test1=(?<test1>(\d+))((.|\s)+?)(test2=(?<test2>(\d+)))");

 MatchCollection matches = regex.Matches(sb.ToString());
 foreach (Match match in matches)
 {
     Group test1 = match.Groups["test1"];
     Group test2 = match.Groups["test2"];                
     System.Console.WriteLine("Test1 = {0}, Test2 = {1}", test1.Value, test2.Value);
 } 
```

谢谢你。

* * *

@Oded - 我在这里回复，因为我无法正确格式化评论，而且我的回复比 StackOverflow 评论文本长度允许的长：

* * *

谢谢你。在您的第二个回复 RegEx 表达式中提出的建议导致以下输出：

```
 Test1 = 123, Test2 = 
 Test1 = 789, Test2 = 
```

这不太正确。你的第一个回复 RegEx 表达式导致

```
 Test1 = 123, Test2 = 456
 Test1 = 789, Test2 = 012 
```

测试输出。这是正确的。

但如果我改变

```
sb.AppendLine("    test1=789  some text .. test2=012   "); 
```

至

```
sb.AppendLine("    test1=789  some text .. test52=012   "); 
```

那么测试结果输出将只有一行

```
Test1 = 123, Test2 = 456 
```

我希望它是

```
 Test1 = 123, Test2 = 456
 Test1 = 789, Test2 = 
```

在这种情况下。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T14:00:48.330

限定整个`test2`组是可选的：

```
@"test1=(?<test1>(\d+))((.|\s)+?)(test2=(?<test2>(\d+)))?" 
```

来自 MSDN -[正则表达式语言 - 快速参考](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)：

> ? - 匹配前一个元素零次或一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:59:41.940

添加一个？在你想要的元素之后是可选的

`.|\s`也可以替换为`.`因为`.`匹配空格

要匹配换行符，您必须通过 Singleline 选项`Regex regex = new Regex(@"test1=(?<test1>(\d+))((.)+?)(test2=(?<test2>(\d+)))?",RegexOptions.Singleline);`

（Oded 的解决方案就是完成这一切）

# deployment - 使用 msbuild 和 nuget 还原包构建 mvc3 应用程序

> ID：10352033
> 
> 赞同：1
> 
> 时间：2012-04-27T13:57:38.880
> 
> 标签：deployment, msbuild, nuget

当我尝试使用 Visual Studio 2010 Prompt 构建我的 mvc3 应用程序时。我收到此错误：

> “TournamentCompanion.csproj”（默认目标）(1) -> TournamentCompanion.csproj(553,3)：错误 MSB4019：未找到导入的项目“TournamentCompanion(1)\.nuget\nuget.targets”。确认声明中的路径正确，并且该文件存在于磁盘上。

，但 .csproj 中的导入说：

> 导入项目="$(SolutionDir)\.nuge\nuget.targets"

这就是我的解决方案的样子：

项目

*   .nu​​get
*   比赛伴侣 | TournamentCompanion.csproj
*   TournamentCompanion.Tests
*   TournamentCompanion.sln

我找不到问题的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:21:23.273

试试这个，看看你是否得到同样的错误：

```
<Import Project="$(MSBuildThisFileDirectory)\..\.nuget\nuget.targets" /> 
```

它具有不使用解决方案相对路径的额外好处，如果您想要构建工业强度命令行构建的更强大的基础，则为您在没有解决方案文件的情况下构建扫清道路。

[摘自[MSBuild Trickery](https://rads.stackoverflow.com/amzn/click/com/061550907X)技巧 #80]

# ajax - 在 ExtJS 中继承代理

> ID：10352039
> 
> 赞同：1
> 
> 时间：2012-04-27T13:58:09.670
> 
> 标签：ajax, extjs

我想在 ExtJS 中创建自己的 ajax 代理。我有代理类的子类：

```
Ext.define('Ext.util.proxy.MyProxy', {
    extend : 'Ext.data.proxy.Server',
... 
```

我正在覆盖 doRequest

```
doRequest : function(operation, callback, scope) { 
```

然后我进行标准的 $.ajax 调用。

我的问题：我如何处理响应？我认为它需要处理操作对象，但还没有找到需要做什么的明确描述。这不起作用：

```
operation.commitRecords(result.records);
operation.setCompleted();
operation.setSuccessful(); 
```

# header - 如何区分“我的”欺骗流量和正常流量？

> ID：10352041
> 
> 赞同：0
> 
> 时间：2012-04-27T13:58:18.180
> 
> 标签：header, ip, packets, spoofing

我正在将欺骗性数据包从服务器发送到客户端。我的目标是将原始流量（例如来自 google.com 的流量）从不同的机器重播到同一主机。

因此，我的服务器发送的数据包将具有最初生成数据包的任何机器的 IP 源地址。我可以控制客户端和服务器。

有什么方法可以使客户端可以将此类数据包与所有其他流量区分开来，而数据包的有效负载没有任何重大变化？

IP 标头中的任何字段我可以安全地用于此目的吗？在 TCP 流量的情况下，如何在 TCP 标头中使用一些未使用的字段？毕竟，我只需要一点。那么保留字段呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:11:42.233

如果它是一个确切的“欺骗”，那么不会，但根据您的框架，即使标头被欺骗，您也应该能够获取客户端 IP 地址。

例如，您可能欺骗了`X-FORWARDED_FOR`标题，但没有欺骗`REMOTE_ADDR`.

您还可以查看浏览器“指纹”，从而检查大量属性以尝试获取客户端的唯一“签名”。[在您的浏览器panopticlick.eff.org](http://panopticlick.eff.org/)上尝试一下。

# c# - 从另一个类访问方法

> ID：10352046
> 
> 赞同：0
> 
> 时间：2012-04-27T13:58:36.507
> 
> 标签：c#

我有一个简单的按钮可以打开`AddStation`表单（这个按钮放在`MainForm`表单上）：

```
var AddStation = new AddStation();
AddStation.Show(); 
```

它显示表单很好，但是表单`AddStation`有一个保存按钮。按下此按钮时，`AddStation`表单将关闭，**但**我想运行`MainForm`'s 类中的方法（以更新存在于 上的列表框`MainForm`）。

这不可能是我现在这样做的方式，因为表单`AddStation`没有对 的引用`MainForm`，但我将如何做到这一点？如何`MainForm.UpdateListBox`从`AddStation`表单运行该方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:04:10.160

您可以`FormClosing`在 Main 上订阅：

```
 AddStation.FormClosing += new FormClosingEventHandler(AddStation_FormClosing); 
```

然后在 Main 上执行以下操作：

```
void AddStation_FormClosing(object sender, FormClosingEventArgs e)
{
  UpdateListBox ();
} 
```

当然，这会在表单关闭时触发。

**已编辑：** 您还可以声明自己的事件`AddStation`并让 Main 订阅它：

在 AddStation 上：

```
public event EventHandler TimeToUpdateListBox; 
```

并且每当您认为合适时（可能是单击关闭 AddStation 的按钮时）：

```
if (TimeToUpdateListBox != null)
  TimeToUpdateListBox(this, new EventArgs()); 
```

在主要：

```
void AddStation_TimeToUpdateListBox(object sender, EventArgs e)
{
  UpdateListBox ();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:04:25.363

您是否有理由为 AddStation 使用 var 而不是实际的类对象？

通常我所做的是做这样的事情：

```
AddStation frmAddStation = new AddStation();
if (frmAddStation.ShowDialog() == DialogResult.OK) {
    //<call your update listbox function here>
} 
```

然后在 AddStation 上的 Save 按钮调用的函数中，确保执行以下操作：

```
this.DialogResult = DialogResult.OK; 
```

这样做的好处是，如果您的表单上有一个取消按钮，如果您设置

```
this.DialogResult = DialogResult.Cancel; 
```

然后您的代码不会执行 ListBox 更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:05:47.980

将保存按钮的 DialogResult 设置为`DialogResult.OK`。然后以这种方式显示第二种形式：

```
using(var AddStation = new AddStation())
{
   if (AddStation.ShowDialog() == DialogResult.OK)
      // update listbox
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:06:19.990

您可以使用重载的 Show 方法并将主窗体作为所有者传递，然后在主窗体上调用适当的方法 - [http://msdn.microsoft.com/en-us/library/szcefbbd.aspx](http://msdn.microsoft.com/en-us/library/szcefbbd.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T14:14:43.813

我相信是邓斯滕删除了他的答案，但效果很好。

我添加了

```
public MainForm mainForm; 
```

在我的`AddStation`课堂上，然后在调用表单时我使用了这个：

```
var AddStation = new AddStation();
AddStation.mainForm = this;
AddStation.Show(); 
```

现在我可以从`AddStation`（我追求的）访问方法/对象！

# http - 几个小时后，VB6 应用程序被防火墙阻止

> ID：10352048
> 
> 赞同：0
> 
> 时间：2012-04-27T13:58:44.357
> 
> 标签：http, vb6, firewall, cisco

我收到一个客户的报告，说他们遇到了我创建的 VB6 应用程序和他们的 cisco 防火墙的问题。应用程序`HTTP POST`每隔几秒向我们的服务器发送请求，发送一个小的 base64 编码字符串。该应用程序最初运行良好，但大约三个小时后，它似乎根本无法联系我们的服务器或互联网。当应用程序在他们的防火墙之外时，应用程序可以愉快地运行。

我没有关于防火墙的更多详细信息，但这里是帖子的 VB6 代码（Winsock1 是 Winsock 控件）：

```
strHttp = "POST" & URL & " HTTP/1.1" & vbCrLf
strHttp = strHttp & "Content-Type: application/x-www-form-urlencoded; charset=UTF-8" & vbCrLf
strHttp = strHttp & "X-Method: Submit" & vbCrLf
strHttp = strHttp & "Content-Length: " & lngBodyLength & vbCrLf
strHttp = strHttp & "Accept: text/html" & vbCrLf
strHttp = strHttp & "User-Agent: MyApplication (www.ourwebsite.com)" & vbCrLf
strHttp = strHttp & "Host: " & HOST & vbCrLf

strHttp = strHttp & vbCrLf & strBody

mainForm.Winsock1.Protocol = sckTCPProtocol
mainForm.Winsock1.RemoteHost = IP_ADDRESS
mainForm.Winsock1.RemotePort = 80

blnConnectionError = False
mainForm.Winsock1.Connect
While Not blnConnected And Not blnConnectionError
    DoEvents
Wend

mainForm.Timer_Http_Timeout.Enabled = True
mainForm.Winsock1.SendData strHttp 
```

如果应用程序在问题发生后重新启动，它将在大约 3 小时的时间内正常工作，这让我想/希望我可以在代码中做一些事情来解决这个问题。

上面的代码有什么会担心防火墙的吗？

任何想法为什么它只在 3 小时后成为问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T18:32:43.677

它是 Cisco 防火墙，因此您很可能会看到 xlate 超时（默认为 3 小时）或您的 HTTP 请求出现问题，不符合 HTTP RFC 并被 ASA/PIX 的 http 检查引擎阻止。您的应用程序是否打开单个 TCP 连接并在整个 3 小时内使用相同的连接？如果是这样，最简单的解决方法是让您的应用程序在指定的时间间隔内重新建立 TCP 连接。

# c++ - Scheduler::instance().clock() 返回什么？

> ID：10352052
> 
> 赞同：1
> 
> 时间：2012-04-27T13:58:58.330
> 
> 标签：c++, ns2

`Scheduler::instance().clock()`ns2中的返回值是哪个时间单位的？我假设它以毫秒为单位，但我在文档中找不到它。还简短地看一下源代码并没有回答我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:16:03.470

（我绝不是 ns2 专家，很高兴得到纠正，但是：）在我看来，（1）在大多数情况下，您可以将 ns2 中的所有时间视为任意单位，只要您所做的一切始终如一地使用它们，但是 (2) 通常认为最好将它们视为秒。例如，请参见[http://www.isi.edu/nsnam/ns/doc/node122.html](http://www.isi.edu/nsnam/ns/doc/node122.html)以了解假定时间以秒为单位的实例。

# php - 检查变量是否存在并在 PHP 中比较其值的更简洁方法？

> ID：10352054
> 
> 赞同：0
> 
> 时间：2012-04-27T13:59:05.820
> 
> 标签：php

我收到了很多空索引警告，因此我需要检查以确保在尝试将该对象的属性与另一个值进行比较之前确保该对象存在，但我想知道是否有更优雅的方式来编写以下内容：

```
if (isset($foo)) {
    if ($foo['bar'] == "Hello World") {
        //do something
    }
} 
```

编辑：需要澄清我正在检查对象的属性（这是生成空对象警告的地方）而不是对象本身。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T14:00:00.563

不需要两个`if`陈述。只需使用一个：

```
if (isset($foo) && $foo == $bar) { 
```

# c++ - c++代码的不规则行为

> ID：10352055
> 
> 赞同：-1
> 
> 时间：2012-04-27T13:59:06.683
> 
> 标签：c++

我写了 C++ 代码，这似乎没有错。我使用 Code::Blocks 作为 IDE，它没有给我任何警告或任何错误，但是当我运行它时，它给了我一个框，说我的 exe 文件没有响应。

我的代码如下：

头文件：

```
// DVD_App.h - Header File

#include <string>
#include <map>

using namespace std;

enum Status {ACTIVE, INACTIVE};

class Customer {
    private:
        string id;
        string name;
        string address;
        Status status;

    public:
        Customer (const string&, const string&, const Status);
        string &getId () { return id; }
};

class CustomerDB {
    private:
        static map<string, int> idList;

    public:
        static void addNewToIdList (const string &threeLetterOfName) {
            idList.insert(pair<string, int>(threeLetterOfName, 0));
        }

        static bool doesThreeLettersOfNameExist (const string &threeLetterOfName) {
            map<string, int>::iterator i = idList.find(threeLetterOfName);
            if ((i->first).compare(threeLetterOfName) != 0)
                return false;
            return true;
        }

        static int nextNumber (const string &threeLetterOfName) {
            map<string, int>::iterator i = idList.find(threeLetterOfName);
            ++(i->second);
            return i->second;
        }
}; 
```

源代码：

```
// DVD_App.cpp - C++ Source Code

#include <iostream>
#include <string>
#include "DVD_App.h"

using namespace std;

map<string, int> CustomerDB::idList;

Customer::Customer (const string &cName, const string &cAddress, const Status cStatus) : name(cName), address(cAddress), status(cStatus) {
    string threeLetters = name.substr(0, 3);
    if (CustomerDB::doesThreeLettersOfNameExist(threeLetters))
        threeLetters += "" + CustomerDB::nextNumber(threeLetters);
    else {
        CustomerDB::addNewToIdList(threeLetters);
        threeLetters += "0";
    }
}

int main () {
    Customer k ("khaled", "beirut", ACTIVE);
    cout << k.getId() << endl;

    return 0;
} 
```

我想首先检查我的 CustomerDB 类是否正常工作，但我不能，因为程序没有运行。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:04:25.553

你`idList`最初是空的，所以当你调用`doesThreeLettersOfNameExist`迭代器时，`i`你返回的`find()`将是`end()`你可能不会取消引用的迭代器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:04:37.657

您应该检查函数 doesThreeLettersOfNameExist if `i == idList.end()`。如果发生这种情况，您将无法检查`if ((i->first).compare(threeLetterOfName) != 0)`. 顺便说一句，这发生在第一次迭代中。也将其添加到 nextNumber。

# javascript - jQuery插入页脚时如何定义变量

> ID：10352057
> 
> 赞同：2
> 
> 时间：2012-04-27T13:59:15.087
> 
> 标签：javascript, jquery, footer

我正在为在 html 文档末尾嵌入 jQuery 的 cms 编写插件。

我确实在我的模板代码中动态定义了一些变量，如下所示：

```
<script>
    var name = '<?php echo $nameTakenFromTheDatabase; ?>';
</script> 
```

这段代码是我插件的一部分，它*没有*嵌入到每个页面上。因此，*名称*不是在每个页面上都定义的。

我也确实在一个单独的文件中有这个 Javascript 代码（由 cms 自动添加到页面末尾）：

```
var MyNamespace = (function() {

    MyClass = function(name) {
        // Do something with name
    }

    return {
        MyClass: MyClass
    }

})(); 
```

如果 jQuery 嵌入在顶部，我会在我的模板代码中做这样的事情：

```
<script>
    var name = '<?php echo $nameTakenFromTheDatabase; ?>';

    $(document).ready(function() {
        new MyNamespace.MyClass(name);        
    });
</script> 
```

但是，由于底部包含 jQuery，我无法做到这一点（$ 尚未定义）。我也不能只将 jQuery-DomReady 调用添加到单独的代码文件中，因为这是在每个页面上执行的，但是*名称*var 并没有在每个页面上初始化并破坏了代码。

我能做些什么？好的旧 document.ready 是明智的做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T14:17:24.533

您可以在脚本中定义方法，并从全局 javascript 文件中执行它们。

如果你在你的页面做这样的事情

```
<script>
    var name = '<?php echo $nameTakenFromTheDatabase; ?>';

    function runWhenReady(){
        new MyNamespace.MyClass(name);        
    }
</script> 
```

然后在页面底部添加的全局文件中，您可以执行以下操作：

```
$('document').ready(function() {
    if (typeof runWhenReady != 'undefined') {
        runWhenReady();
    }
}); 
```

如果您有创意，您可以将“runWhenReady”设置为一组方法，这些方法总是在页面准备好时加载。

**编辑我添加了一个使用数组的示例：**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
</head>
<body>

    <script type="text/javascript">
        // check if array is already created. This is necessary if it is possible to render multiple pages which uses the runWhenReadyFunctions collection.
        if (typeof runWhenReadyFunctions == 'undefined'){
            window.runWhenReadyFunctions = new Array();
        }

        runWhenReadyFunctions.push(function(){
            $('#testDiv').text('hello world!');
        });

        runWhenReadyFunctions.push(function(){
            $('#testDiv2').text('hello another world!');
        })

    </script>

    <div id="testDiv"></div>
    <div id="testDiv2"></div>

    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript">
        if (typeof runWhenReadyFunctions != 'undefined') {
            $.each(runWhenReadyFunctions, function(idx, func){
                func();
            });
        }
    </script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:02:32.737

编辑 - 好的，你不应该弄乱全局空间，我不明白你为什么不把你`<script>`的标签放在你包含 jQuery 的标签下面。否则你可以进行 AJAX 调用

```
<script>

    $('document').ready(function() {
        $.getJSON('getmyname.php', function(data){
            new MyNamespace.MyClass(data.name);        
        });
    });
</script> 
```

# mysql - 在 MySQL 中验证数据

> ID：10352063
> 
> 赞同：0
> 
> 时间：2012-04-27T13:59:37.350
> 
> 标签：mysql, verification

我希望有人能帮助我。我对 MySQL 还很陌生，所以我并不完全精通它的所有功能。

我得到了一个电子表格，其中包含以下格式的数据：

```
孩子姓名 |性别| 出生日期| 班级|家长姓名|家长电话|家长地址

```

我将其分为 3 个表，其中包括：

```
Child_details 数据类型 必需的键
Child_id INT AUTO_INCREMENT NOT NULL 主要
Child_fname VARCHAR(15) 非空     
Child_sname VARCHAR(15) NOT NULL     
性别枚举(M,F) NOT NULL NOT NULL     
DoB DATE NOT NULL NOT NULL     
父母/照顾者 ID INTEGER NOT NULL 外国

Parent_details 数据类型 必填项
Parent_id INT AUTO_INCREMENT NOT NULL 主要
Parent_title CHAR(5)      
Paren _fname VARCHAR(15) NOT NULL     
父/_sname VARCHAR(15) NOT NULL     
父 _Add1 VARCHAR(25) NOT NULL     
父 _Add2 VARCHAR(25)          
父 _city VARCHAR(25)          
父 _Pcode VARCHAR(15) NOT NULL     
父 _phone VARCHAR(15) NOT NULL     

活动数据类型 必填项
Activity_name CHAR(8) NOT NULL     
Activity_day CHAR(5) NOT NULL     

```

然后用活动数据为点名列表制作了一个桥接表。有的孩子上一节课，有的上三门课：

```
计划数据类型所需键
Child_id INT NOT NULL 外来，复合
Activity_id INT NOT NULL 外部，复合

```

我正在尝试编写一个可以运行的查询，以检查我输入的数据是否正确。我希望能够以与电子表格相同的格式查看结果。到目前为止，这是我想出的：

```
SELECT CONCAT_WS(' ',Child_fname,Child_sname) AS 'Child Name',
Child_gender AS 'Gender',
Child_dob AS 'DoB',
COUNT Activity_name AS Activities,
CONCAT_WS(' ',Parent_title,Parent_fname,Parent_sname) AS 'Parent/Carer name',
Parent_phone AS 'Parent/Carer phone',
CONCAT_WS(' ',Parent_add1,Parent_add2,Parent_city,Parent_pcode) AS 'Parent/Carer Address'
FROM Child,Activity,Parent; 
```

但我得到的结果表明，每个孩子都做了所有的活动，而且他们都有。我是否遗漏了一些明显的东西，我是否需要使用 COUNT DISTINCT 或 GROUP BY，还是我创建的表有误？

任何人都可以提供的任何信息将不胜感激。我希望我提供了足够的信息，但不要太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:12:06.917

您需要告诉 MySQL 如何将表连接在一起（没有此信息，它会将每个表的每一行与每个其他表的每一行连接起来，如您所描述的）：

```
SELECT
  ...
FROM
       Child
  JOIN Schedule USING (Child_id)
  JOIN Activity USING (Activity_id) -- does this column exist in Activity?
  JOIN Parent   USING (Parent_id)   -- does this column exist in Child? 
```

您可能想学习一些[关于 SQL 的教程`JOIN`](https://www.google.co.uk/search?q=sql+join+tutorial)。

# iphone - UITableView InsertRows (insertRowsAtIndexPaths) 仅对两个部分之一进行动画处理

> ID：10352064
> 
> 赞同：0
> 
> 时间：2012-04-27T13:59:39.970
> 
> 标签：iphone, ios, cocoa-touch, uitableview, xamarin.ios

在表更新之前，我的表数据源只有一个部分，一行：

*   第 0 节
    *   行 [0,0]

更新后，数据源又返回两个部分，每个部分只有一行：

*   第 0 节
    *   行 [0,0]
*   第 1 节
    *   行 [1,0]
*   第 2 节
    *   行 [2,0]

我使用以下代码为表格更新设置动画：

```
// 更新表数据源，不重新加载表
更新表（）；       

TableView.BeginUpdates();

// 插入第 1 节和第 2 节
TableView.InsertSections(NSIndexSet.FromNSRange(new NSRange(1, 2)), UITableViewRowAnimation.Fade);

// 插入两个新行，每个新部分一个（行 [1,0] 和 [2,0]）
TableView.InsertRows(new NSIndexPath[] { NSIndexPath.FromRowSection(0, 1), NSIndexPath.FromRowSection(0, 2) }, UITableViewRowAnimation.Fade);

TableView.EndUpdates();

```

但是，只有第 1 部分及其行是动画的。第 2 节（第 [2,0] 行）立即出现并且不会移动/淡出一点。我还检查了切换的“慢速动画”。

这段代码有什么问题？

**编辑：**我忘了提，如果我省略了`InsertRows`电话，问题也存在，根据山姆的回答，这是不必要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:48:40.160

找出原因：`UITableViewSource`每次`UpdateTable()`调用我都在创建一个新实例。这一切都很好，除了动画改变表格部分和行时的一些细节。

当我更改代码以重用`UITableViewSource`实例时，一切都按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:35:26.443

插入部分时，您不需要为各个行设置动画。只需调用插入部分代码。同样，在删除部分时，您也不需要删除其中的行。

# c# - 如何加载多个程序集

> ID：10352065
> 
> 赞同：0
> 
> 时间：2012-04-27T13:59:40.047
> 
> 标签：c#, .net, assemblies

1.  在 C# 编程中，我试图在它们的命名空间中加载具有相同功能的多个程序集，以进行反射。例如，加载命名空间 ABC 中具有相同前缀的所有程序集。*.* ABC.* ABC. ***.*** . *** 如何实现？

2.  类似的问题是如何加载名称中具有相同功能的多个程序集？

谢谢，肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:35:55.917

您可以使用`Reflection.Assembly.ReflectionOnlyLoadFrom(filepath)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:36:20.793

对于问题 2 - 如果您有这些程序集的文件，您可以使用[Assembly.LoadFrom(String)](http://msdn.microsoft.com/en-us/library/1009fa28.aspx)或[Assembly.ReflectionOnlyLoadFrom(String)](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.reflectiononlyloadfrom.aspx)并传递与您所需模式匹配的那些文件的名称。

# .net - 覆盖 OnRenderButtonBackground 时如何计算鼠标是否位于 ToolStripButton 上

> ID：10352069
> 
> 赞同：2
> 
> 时间：2012-04-27T13:59:54.620
> 
> 标签：.net, vb.net, rendering

我正在重写该`OnRenderButtonBackground`方法以使用自定义着色，但我想知道鼠标当前是否位于按钮上方。

我试图获取父控件（工具条）和父窗体并将所有坐标添加在一起，但这是不正确的：

```
Private Class MyRenderer
    Inherits ToolStripProfessionalRenderer
    Protected Overrides Sub OnRenderButtonBackground(e As ToolStripItemRenderEventArgs)
        Dim btn = TryCast(e.Item, ToolStripButton)
        If Not btn Is Nothing AndAlso btn.Checked Then

            Dim bounds As New Rectangle(Point.Empty, e.Item.Size)
            Dim ts As ToolStrip = e.Item.GetCurrentParent
            Dim f As Form = CType(e.Item.GetCurrentParent.GetContainerControl, Form)
            Dim btnRect As New Rectangle(f.Location.X + ts.Location.X + e.Item.Bounds.X, f.Location.Y + ts.Location.Y + e.Item.Bounds.Y, e.Item.Bounds.Width, e.Item.Bounds.Height)

            If btnRect.Contains(MousePosition) Then
                'doesn't reach this path...
                e.Graphics.FillRectangle(New SolidBrush(Color.Blue), bounds)
            Else
                e.Graphics.FillRectangle(New SolidBrush(Color.Red), bounds)
            End If
        Else
            MyBase.OnRenderButtonBackground(e)
        End If
    End Sub
End Class 
```

我确定必须有一种更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:35:21.970

我认为您不需要为此使用`MousePosition`。

试试这个：

```
If e.Item.Selected Then
  e.Graphics.FillRectangle(Brushes.Blue, bounds)
Else
  e.Graphics.FillRectangle(Brushes.Red, bounds)
End If 
```

注意：您没有丢弃您的画笔。尝试处置它们或使用 SystemBrushes 作为示例。

# java - 如何在通用类中获取 HQL 输出

> ID：10352077
> 
> 赞同：1
> 
> 时间：2012-04-27T14:00:25.660
> 
> 标签：java, hibernate, list, hql

我有多个类的通用 HQL

```
Query query = session.createQuery("select id, name from " + hibernateClass.getClass().getName()); 
```

`query.list();`返回一个`List<Object[]>`。现在查询的输出具有相同的结构，即 a`Long id`和 a `String name`。那么是否可以将此内容放在一个类中，这样当我调用时，`query.list()`所有内容都会被复制到一个列表中，而我不必创建一个新`List`对象并填充它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:34:35.653

有一些可能性会导致类似的结果（假设您希望`List<NewClass>`NewClass 仅具有属性 id 和 name 的结果）：

1）你做`createQuery("select new NewClass(id, name) from " + hibernateClass.getClass())`

2）您为同一个数据库表的 NewClass 创建一个新的映射文件，但只有属性 id 和 name，然后您的查询是`createQuery("from " + NewClass.class)`

3）你只是这样做`createQuery("from " + hibernateClass.getClass())`，你不关心加载的多余值。与仅加载必要的列相比，加载所有列的额外时间是微不足道的。如果您愿意，您仍然可以创建一个类或接口 NewClass 和 for `HibernateClass extends/implements NewClass`。

我个人更喜欢3），但这取决于你的口味。

# delphi - 隐藏 TcxGrid 中某些行的 TcxEditButton

> ID：10352083
> 
> 赞同：3
> 
> 时间：2012-04-27T14:00:38.737
> 
> 标签：delphi, datagrid, components, devexpress, tcxgrid

我已经实现了一个带有一些列的 TcxGrid。此网格中最后一列的单元格包含 TcxEditButton 类型的按钮。

网格的内容要么由用户输入，要么在创建其父表单时从文本文件加载。

我想根据网格中的值隐藏其中一些按钮。确定按钮可见性的值可以从网格内存数据集中读取，也可以直接从网格中的隐藏列中读取。

我的问题是我无法找到正确的事件来检查值，并设置按钮的可见性属性。我尝试在网格表和包含按钮的列上使用各种事件。

关于如何获取按钮项目并同时能够在绘制网格时进行设置的任何建议？

解决方案：如果接受的解决方案，最终使用修改后的版本。

```
procedure TFrame_cx_Element_Inntasting_Kriterier.cxGrid_InntastingDBTVPropertiesGetProperties(
  Sender: TcxCustomGridTableItem; ARecord: TcxCustomGridRecord;
  var AProperties: TcxCustomEditProperties);
begin
  if ARecord.Values[cxGrid_ColumnWithValidatedValue.Index] = true then
    AProperties := cxEditRepository1ButtonItem1.Properties
  else
    AProperties := cxEditRepository1Label1.Properties;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T18:18:00.873

使用类型为 TcxEditButton 的列的 OnGetProperties 事件。

使用 ARecord，您可以根据列索引获取同一行的另一列的值。

设置属性的最简单方法是在 TcxEditRepository 中使用两个预定义的 TcxEditButton，例如名为 ButtonsVisible 和 ButtonsInvisible。

该事件看起来像这样：

```
procedure TForm1.cxGrid1TableView1EditButtonColumnGetProperties(
  Sender: TcxCustomGridTableItem; ARecord: TcxCustomGridRecord;
  var AProperties: TcxCustomEditProperties);
var
  Value: Variant;
  Buttons: TcxEditButtons;
  ButtonEnabled : Boolean;
begin
  if VarIsNull(ARecord.Values[cxGrid1TableView1ColumnToCheck.Index]) then
    AProperties := ButtonsInvisible.Properties; 
    // or AProperties := ButtonsVisible.Properties depending on what you want/need

  Value := ARecord.Values[cxGrid1TableView1ColumnToCheck.Index];
   if (Value = ValueWhenVisible) then
     AProperties := ButtonsVisible.Properties
   else
     AProperties := ButtonsInvisible.Properties;
end; 
```

希望这会让你走上正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:42:31.180

在 TcxGridDBTableView 上使用 OnInitEdit 事件。

# python - python：打印xml文档

> ID：10352087
> 
> 赞同：0
> 
> 时间：2012-04-27T14:00:47.867
> 
> 标签：python, xml, string, printing

如果我以这种方式打印 xml 文档：

```
print(doc.toprettyxml(indent=' '*spaces, encoding='utf-8')) 
```

我懂了：

```
b'<?xml version="1.0" encoding="utf-8"?>\n<element att=""/>\n' 
```

我怎样才能摆脱**b'**前缀和**'**后缀？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:03:26.177

尝试使用[`decode`](http://docs.python.org/release/3.1.5/library/stdtypes.html#bytes.decode)：

```
print(doc.toprettyxml(indent=' '*spaces, encoding='utf-8').decode('utf-8')) 
```

# eclipse - 如何构建 Eclipse RCP 应用程序，以便自动更新其功能？

> ID：10352089
> 
> 赞同：6
> 
> 时间：2012-04-27T14:00:51.637
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, p2, tycho

我正在构建一个由多个功能组成的 RCP 应用程序。

我的 RCP 应用程序配置为在每次启动时检查更新。我当前的问题是我需要在构建时“安装”我的一项功能，以便在自动检查更新期间对其进行更新，而无需强制用户手动安装它。我需要此功能独立于系统中的其他功能进行更新。

所以，回顾一下，我只是在寻找一种很好的自动化方式来在 RCP 应用程序中安装一个功能，这样它就可以独立于其他功能进行更新，并且不需要 RCP 应用程序的用户安装它手动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T21:15:41.843

经过长时间的搜索，我找到了答案。这有点像kludge，但我愿意在这一点上做任何事情。我的解决方案取决于我构建的 RCP 应用程序包括 p2 应用程序 org.eclipse.equinox.p2.director 的事实。我猜如果您的 RCP 应用程序不包含此应用程序，您可以参考另一个 Eclipse 安装以启动 Director。我这样做是为了避免在我的构建机器上放置一个 Eclipse 实例。

我使用了 p2-dev 邮件列表，Paul Webster 回答了我的问题。（感谢保罗）

他建议使用 ant 启动 p2 director 应用程序将 IU 安装到我构建的 RCP 应用程序中。

这是他在 p2-dev 邮件列表 [http://dev.eclipse.org/mhonarc/lists/p2-dev/msg04735.html上的回答](http://dev.eclipse.org/mhonarc/lists/p2-dev/msg04735.html)

这是我想出的蚂蚁目标。

```
<target name="install_IU">
  <path id="launcher.paths">
    <fileset
       dir="${app.dir}"
       includes="plugins/org.eclipse.equinox.launcher_*" />
  </path>
  <property
      name="launcherPath"
      refid="launcher.paths" />
  <echo>-installIU ${iu.id} </echo>
  <java 
      jar="${launcherPath}"
      failonerror="false"
      dir="${app.dir}"
      timeout="900000"
      fork="true"
      output="${basedir}/director.log"
      resultproperty="directorcode">
      <arg line="-application org.eclipse.equinox.p2.director" />
      <arg line="-noSplash" />
      <arg line="-installIUs ${iu.id}" />
      <arg line="-repository ${iu.repo}" />
      <arg line="-destination ${app.dir}" />
      <arg line="-bundlepool ${app.dir}" />
  </java>

  <zip destfile="${app.zip}"
    basedir="${app.dir}"/>
</target> 
```

我将它放在通过 Tycho 生成我的 Eclipse RCP 应用程序的同一个项目中的一个 ant 文件中。Tycho 在名为“target”的目录中生成我的构建工件，因此我对上面 ant 目标的参数如下所示......

```
<target name="modify_x86">
  <antcall target="install_IU">
    <param name="iu.id" value="com.mydomain.the.feature.i.want.to.install.feature.feature.group"/>
    <param name="iu.repo" value="http://mydomain.com/thep2repository/where/i/deploy/the/feature/to/install"/>
    <param name="app.dir" value="${basedir}/target/products/com.mydomain.myRCPapplication/win32/win32/x86"/>
    <param name="app.zip" value="${basedir}/target/products/com.mydomain.myRCPapplication-win32.win32.x86.zip"/>
  </antcall>
</target> 
```

对于构建我的 RCP 应用程序的每个平台，我还有几个这样的目标。

希望这可以帮助。

更新：2014 年 5 月 8 日。Tobias 已引起我的注意，我应该将接受的答案从这个答案更改为具有添加到 Tycho 0.20.0 的新功能的答案，该功能以更简单的方式启用此行为. 因此，新接受的答案现在是该问题的正确解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T08:01:37.877

同时，Tycho 明确支持此用例。从[Tycho 0.20.0](http://wiki.eclipse.org/Tycho/Release_Notes/0.20)开始，您可以让 Tycho 独立于产品安装 RCP 的功能。通过这种方式，这些功能可以独立于产品进行更新（甚至卸载）。

要独立安装功能，只需将属性添加`installMode="root"`到产品文件中的相应功能标签即可。例子：

```
<features>
   <feature id="org.eclipse.platform"/>
   <feature id="updatable.feature" installMode="root"/>
</features> 
```

有关详细信息，请参阅[此文档页面](http://wiki.eclipse.org/Tycho/eclipse-repository)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T18:19:40.717

在我找到此处记录并接受的答案之前，我尝试并未能通过以下方式解决此问题：

我尝试将功能放入产品定义中。该功能已成功安装，但它使我无法独立于 RCP 应用程序中的其他功能进行更新。

我有一个当前正在运行的 p2 接触点命令。它使用 p2.inf 文件将存储库添加到 RCP 应用程序中的可用更新站点。看起来像这样...

```
instructions.configure=\
 org.eclipse.equinox.p2.touchpoint.eclipse.addRepository(location:http${#58}//myUpdateSsite/myFeature,type:0,name:My Feature Name,enabled:true);\
 org.eclipse.equinox.p2.touchpoint.eclipse.addRepository(location:http${#58}//myUpdateSsite/myFeature,type:1,name:My Feature Name,enabled:true);\\ 
```

我试图添加这样的一行来安装该功能，但是当我运行 mvn clean install 时我的 tycho 构建失败

```
instructions.configure=\
 org.eclipse.equinox.p2.touchpoint.eclipse.installFeature(feature:My Feature Name,featureId:com.my.domain.my.feature.id,version:1.0.0); 
```

这是来自 maven / tycho 的一些错误信息

```
An error occurred while configuring the installed items session context was:
(profile=DefaultProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Configure, operand=null --> 
[R]{my.domain.my.rcp.product.plugin 1.1.6.20120427-1346}, 
action=org.eclipse.equinox.internal.p2.touchpoint.eclipse.actions.InstallFeatureAction).
Installable unit contains no artifacts: [R]my.domain.my.rcp.product.plugin 1.1.6.20120427-1346. 
```

我的直觉告诉我，这个错误消息是说我的 RCP 应用程序插件缺少一些东西，它会告诉 p2 在哪里可以找到我想要在构建时安装的功能。我认为？？？

# c# - 防止 Lua 无限循环

> ID：10352092
> 
> 赞同：10
> 
> 时间：2012-04-27T14:01:01.077
> 
> 标签：c#, lua

我使用 lua 接口在我的 C# 程序中获得 lua 支持，如果用户提交这样的代码，工作线程将冻结

```
while true do end 
```

我有一种方法可以检测无限循环是否正在运行，但我需要一种从 Worker 线程中退出 DoString 方法的好方法。有任何想法吗？

编辑：@kikito，是的，我正在检测类似的东西。我遇到的问题是我找不到杀死 DoString 方法的干净方法，看起来 Lua 接口主类（Lua）有一些静态依赖项，因为如果我`lua.Close();`在我的实例上这样做，它将中止 DoString 方法，但是下次我实例化一个 lua 类`new Lua();`时，它会崩溃说一些关于保护性内存的事情

编辑：显示我的 .Close 代码的功能分支 [https://github.com/AndersMalmgren/FreePIE/tree/detect-and-recover-infite-lua-loop](https://github.com/AndersMalmgren/FreePIE/tree/detect-and-recover-infite-lua-loop)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T23:38:30.260

## Sandboxing Lua

Setting hooks is not sufficient *at all* to prevent unintended waste of resources, let alone abuse- here's a simple example (the time is spent during string pattern matching- no debug hooks get called):

`s=('a'):rep(20000):match('.-b')`

**The only reliable way to force time/memory constraints on a piece of Lua code is to run the Lua interpreter in a process of its own and to make your OS monitor that process.**

The nice thing with Lua is that you won't need any complicated, OS-dependent permission setup for sandboxing: you just limit time and memory (reasonable; on windows there are [Job Objects](http://msdn.microsoft.com/en-us/library/ms684161(v=vs.85).aspx), Unix has ulimits- relevant: [Linux resource limitation](http://coldattic.info/shvedsky/pro/blogs/a-foo-walks-into-a-bar/posts/40)) and then keep things like os.execute, half the io-library and modules like luasocket away from the scripter (pretty easy).

## Recovering from errors in sandboxed code

You can handle almost everything (except violation of time/memory limits) without trashing your Lua interpreter: Just wrap the execution of user-supplied code inside a [pcall](http://www.lua.org/manual/5.1/manual.html#lua_pcall); if you call any Lua-API functions that might fail yourself, you need to wrap them inside a function that you can pcall, too (or set a Lua panic function and handle it from there).

* * *

[I didn't want people glancing at this thread to assume that debug.sethook is adequate for sandboxing, and stackoverflow would not let me comment (yet)]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-07T06:44:58.687

将 Lua 循环放入协程中，并在每个循环结束时，仅用于`Yield return null`等待一帧（允许执行工作线程）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T22:00:19.043

我建议像处理任何其他 Lua 错误一样处理它。换句话说，就像用户刚刚写的一样威胁上面的代码

```
error("Script execution has been cancelled after stalling for too long") 
```

（我假设您通过假设没有脚本应该花费超过固定时间来运行来检测无限循环。如果不是这种情况，请适当地更改消息）

您必须处理的方式将取决于您如何处理 Lua 错误 - 但无论如何您都必须这样做，所以很可能大部分代码已经存在。

编辑：马丁詹姆斯的建议似乎是你最好的选择。您可以使用 debug.setHook() 每 100 条 Lua 指令左右运行一些 lua 代码，如果在相同的客户端代码上花费了太多时间，则抛出错误。可以在[这个邮件列表和](http://groups.google.com/group/lua-alchemy-dev/browse_thread/thread/ddb0cf936690f051?pli=1)[lua-project repo](https://github.com/gtimworks/lua-process/blob/master/src/kernel.lua)上的代码示例中找到有关这方面的详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-17T19:05:57.710

我使用了两种技术来解决这个问题。第一种是在单独的任务中调用 DoFile 或 DoString 方法。这样你就可以中止线程。我不知道退出解释器的任何技术（比如从钩子中）。

另一种方法是设置一个单独的[Appdomain](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)。使用它，您还可以设置单独的约束（证据和权限集），请参阅[CreateDomain](http://msdn.microsoft.com/en-us/library/ms130766%28v=vs.110%29.aspx)了解详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-25T09:24:29.043

在运行 lua 代码*之前*设置 line hook 怎么样？我不知道在 C# 中是否可能，但在原始 C lua 中是可能的。

你的循环检测器是否已经在不同的 C# 任务中运行？

*   如果是，请使用带有 C# 钩子的 C# 变量。在这种情况下，您的循环检测器设置和 hool 检查 C# 变量之类的`terminateLua`并抛出 lua 错误（应该是可能的）。
*   如果不是，并且您在 lua 端检测到循环（也使用钩子？），设置 lua 变量（使其成为上值以防止用户欺骗）并抛出错误。

重要的部分是在您真正确定要完成任务之前不要重置此（C# 或 lua）变量，因为用户可以通过捕获您的错误`pcall`并尝试处理它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-06T11:31:27.887

如果您想检测循环是否仍在运行，您可以这样做。

```
local detect = false

detect == true

goal = 5
star = 0

function loop()
   while detect == true do
       print("Still running")
   else
       print("Loop stopped running")
   end
end

Spawn(loop)

while true do
   if star > goal then
      detect = false
   end
end 
```

输出将是：

```
Still running
Still running
Still running
Still running
Still running
Loop stopped running 
```

# php - 根据上下文查找两个字符串之间的百分比关系

> ID：10352093
> 
> 赞同：1
> 
> 时间：2012-04-27T14:01:05.603
> 
> 标签：php, codeigniter, web-scraping

我正在为 html 页面实现一个网络爬虫。问题是上下文关系，因为我需要确定我得到的内容与数据库中其他内容之间的关系，所以我可以说是，它们是相关的或不相关的：

前（1）

```
$str1 = "president obama visited Barcelona yesterday"; //politics context
$str2 = "Barcelona was defeated from Chelsea yesterday"; //sports context 
```

前（2）

```
$str3 = "Obama's appearance on Late Night With Jimmy Fallon "; //media context
$str4 = "Late Night show with jimmy fallon"; //mdeia context 
```

在第一个例子中

> **$str1**和**$str2**在上下文中是不同的，所以关系可能是**10%**或更少

在第二个例子中

> **$str3**和**$str4**在同一个上下文中（媒体）虽然 $str3 是关于奥巴马总统的，**$str4**是关于吉米法伦的，但两者都与深夜秀有关，所以关系可能是**90%**

我正在使用 Porter-Stemmer 算法从单词中删除常见的结尾。接下来做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T02:09:23.853

关键字是字符串度量、模糊匹配...

看看这个：[如何打火柴](http://www.catalysoft.com/articles/StrikeAMatch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T12:21:09.713

```
$exstr1=explode(" ", $str1);
$exstr2=explode(" ", $str2);
foreach( $exstr1 as $exitem)
{
     if (in_array($exitem, $exstr2 ) $match++;
      else $mis++;
}
$percent=$match/($match+$mis)*100; 
```

# cocoa - 在 Interface Builder (Cocoa) 中加载图像

> ID：10352097
> 
> 赞同：2
> 
> 时间：2012-04-27T14:01:12.653
> 
> 标签：cocoa, interface-builder, appkit, nsimageview

当我在 Interface Builder 中加载我的图像并选择缩放为：“无”时，它会将图像缩小很多！我会说几乎70％！

使用“按比例向上或向下”，并将图像视图宽度设置为与图像宽度完全相同。所以，这是真实的图像大小：

![在此处输入图像描述](../Images/e930c3bb2f1c578e52e62b1fc5ba4bde.png)

现在，无需更改图像大小或其他任何内容，我只需将缩放更改为“无”。预期的行为没有变化，因为图像已经是正常大小！但！结果如下：

![在此处输入图像描述](../Images/86c47d28559c22916ac5a40e3c209ab0.png)

看看它有多小！！图像尺寸确实是上述尺寸的证据是，请注意它是如何不模糊或任何东西都不是这个尺寸的。

现在，为什么会发生这种行为！

注意：我首先开始使用 Xcode 4.2 开发这个应用程序，然后现在转移到 Xcode 4.3，但问题总是一样的。即使开始了一个新的 Xcode 4.3 项目（Cocoa）。

* * *

**编辑：**

正如 Thomases 在评论中所建议的那样，我从头开始设计了一个 72 DPI 的新图像。结果如下：

![在此处输入图像描述](../Images/cc2a03bcd68194e48f29b245487785f4.png)

谢谢，这真是太棒了，很有帮助！...现在，我必须寻找一种方法将我的所有图像修复/更改为 72 DPI :( ...我有 imagemagick，所以它实际上应该是直截了当的 :)。

* * *

**编辑2：**

对于那些对 imagemagick 脚本感兴趣的人：

```
convert -units pixelsperinch image.png -density 72 image.png 
```

# mysql - Oracle 与 MySql 数据库。哪个更快更高效？

> ID：10352101
> 
> 赞同：0
> 
> 时间：2012-04-27T14:01:22.603
> 
> 标签：mysql, oracle

我们无法让[http://nabacar.com](http://nabacar.com)快速搜索，并认为我们可能需要更改为 oracle 数据库来解决问题。你能建议吗？我们目前正在使用 mysql 数据库，并认为这可能是问题所在。实际上，如果您访问[http://nabacar.com/index.php?menu=find_car](http://nabacar.com/index.php?menu=find_car)并尝试让它搜索所有汽车，这很好，但如果您尝试缩小搜索范围，则确实需要很长时间。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T14:15:21.033

考虑更改 RDBMS 通常是寻找优化时可以做的最后一件事。

相反，在我看来，应该从分析 Web 应用程序执行的实际查询开始 - 并仔细寻找瓶颈。网络上有很多关于如何做到这一点的建议；我建议检查[这个优秀的网站](http://use-the-index-luke.com/)和[这篇文章](http://www.catswhocode.com/blog/10-sql-tips-to-speed-up-your-database)，只是为了开始。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T14:12:45.257

正如其他人在评论中提到的那样，除非您正在处理许多 TB 的数据，否则您的 DBMS 可能不是这里真正的问题。您很可能可以通过改进查询或表索引来提高性能。

[此外，对于搜索之类的东西，您通常可以通过使用像Lucene](http://lucene.apache.org/core/)这样的专用系统来显着提高性能，而不是直接访问您的数据库。

最后，我建议您发布另一个问题，其中包含运行缓慢的特定查询以及有关您的数据库结构和索引的更多详细信息。通过这种方式，我们将能够为您提供更具体和更有帮助的答案。

# java - 在 Java 中处理异步回调

> ID：10352102
> 
> 赞同：3
> 
> 时间：2012-04-27T14:01:24.110
> 
> 标签：java, android, asynchronous, openfeint

我的一个恢复排行榜数据的 OpenFeint 方法需要一个异步回调到一个应该修改我的一个局部变量的方法（使用一个很棒的 hack）。我现在的问题是，一旦调用了 CB，执行将继续，并且由于分数值尚未更改*，*它返回一个 nullPointer。有什么方法可以使所有内容同步或从主函数返回回调值？

```
private long getScoreLeaderBoard(String idLeaderBoard) {
    for (Leaderboard l : OpenFeintX.leaderboards) {
        if (l.name == null)
            break;
        if (l.resourceID().equalsIgnoreCase(idLeaderBoard)) {
            final Score s[] = new Score[1];
            l.getUserScore(OpenFeint.getCurrentUser(),
                    new Leaderboard.GetUserScoreCB() {

                        @Override
                        public void onSuccess(Score score) {
                            s[0] = score;
                        }
                    });
            if (s[0] != null) // If user has no score onSuccess get a null
                return s[0].score;
            else
                return 0;
        }
    }

    return 0;
} 
```

回调定义： http: [//m.the9.com/ioshelp/Android_en/doc/com/openfeint/api/resource/Leaderboard.GetUserScoreCB.html](http://m.the9.com/ioshelp/Android_en/doc/com/openfeint/api/resource/Leaderboard.GetUserScoreCB.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:07:10.480

如果你的方法可以在异步回调执行时被阻塞，你可以让它创建一个`CountDownLatch`这样的：

```
private long getScoreLeaderBoard(String idLeaderBoard) {
    final CountDownLatch cdl = new CountDownLatch(1);
    ...
                    @Override
                    public void onSuccess(Score score) {
                        s[0] = score;
                        cdl.countDown();
                    }
    ...
        cdl.await();
        return s[0].score;
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:06:09.447

覆盖`onPostExecute`AsyncTask 并在那里做你需要做的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:23:10.107

代替

```
private long getScoreLeaderBoard(String idLeaderBoard) { /* takes long */ } 
```

做了

```
private void requestScoreLeaderBoardUpdate(String idLeaderBoard) { /* takes long */ } 
```

并将处理 getScoreLeaderBoard 的返回值的代码放入（或从中调用它的方法）`onSuccess`。

这样你就不必等待和阻塞你的线程。

您也可以让您的 Activity 实现`Leaderboard.GetUserScoreCB`，然后就像拥有另一个`onCreate`, `onClick`, ... 之类的方法。

```
class MyActivity extends Activity implements Leaderboard.GetUserScoreCB {

    private void requestScoreLeaderBoardUpdate(String idLeaderBoard) {
        // ..
        l.getUserScore(OpenFeint.getCurrentUser(), this /* your activity */);
    }

    @Override
    public void onSuccess(Score score) {
        s[0] = score;
        // do anything you want with the new score here
    }
} 
```

# javascript - 如何通过参数传递客户键控处理程序？

> ID：10352104
> 
> 赞同：0
> 
> 时间：2012-04-27T14:01:36.347
> 
> 标签：javascript, jquery

所以说我有这个..

```
 keyup_handler: function(e, item){
    if (e.which == 27) {
      close_lightbox(item);
      return false;       
    };
  }

$(document).live('keyup', function(e){ keyup_handler(e, item) }); 
```

这不会返回我在这里放置的任何 console.log()。所以我假设它没有被触及。我错过了什么？如何将`e`or传递`event`给 keyup_handler？

jQuery 1.4.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:04:32.813

您`false`从对 的调用返回`keyup_handler`，但不是从调用它的函数返回，请尝试执行以下操作：

```
$(document).live('keyup', function(e){ return keyup_handler(e, item); }); 
```

如果语句未计算为真，您可能还需要`keyup_handler`稍微修改一下。`return true;``if`

我在这里假设您非常模糊的“不起作用”声明意味着当您释放相应的键时不会阻止通常的 keyup 功能。

此外，[`.live()`](http://api.jquery.com/live/)它是一个已弃用的 jQuery 函数，并不真正适用于您使用它的目的。使用[`.on()`](http://api.jquery.com/on/)（如果您使用的是 jQuery 1.7+）或[`.bind()`](http://api.jquery.com/bind/)其他方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:04:14.313

尝试查看jQuery中的[keyup()](http://api.jquery.com/keyup/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:11:00.570

试试这个 -->

```
$(document).live('keyup', function(e){
    if (e.which == 27) {
close_lightbox(<selector-that selects-item>);
      return false;       
    }; }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:13:44.747

```
keyup_handler = function(e, item){
    var code = (e.keyCode ? e.keyCode : e.which);
    if (code == 27) {
      close_lightbox(item);
      return false;       
    }
}

$(document).on('keyup', 'dynamic_element', function(e){ keyup_handler(e, item) });​ 
```

[小提琴](http://jsfiddle.net/adeneo/VswCz/)

live() 已弃用，不知道为什么需要在文档上使用它？对于旧版本的 jQuery，我认为这就足够了：

```
$(document).keyup(function(e){ keyup_handler(e, item) });​​​​​​​​​ 
```

除非您以某种方式设法使文档级别成为动态元素？

# wicket - Wicket - 选择对象的 DropDownChoice

> ID：10352108
> 
> 赞同：5
> 
> 时间：2012-04-27T14:01:51.300
> 
> 标签：wicket, dropdownchoice

我遇到了 DropDownChoice 的问题。我必须预先选择一个项目，但我发现的每个教程和示例都只考虑原始类型列表。

我有一个对象列表。

```
class myObject {
   private String name;
   private String surname;
   [setter and getter]
} 
```

在其他班级

```
List<MyObject> myList = some_data_retrieve();
MyObject defaultValue = some_simple_data_retrieve(); 
```

使用以下构造函数构建 DropDownChoice im：

```
final DropDownChoice<T> ddc = new DropDownChoice<T>(id, data, new ChoiceRenderer<T>(choiceRendererExpression, choiceRendererIdExpression)); 
```

这样：

```
final DropDownChoice<myObject> ddc = new DropDownChoice<myObject>("wicket_id", myList, new ChoiceRenderer<myObject>("name", "surname")); 
```

现在。在每个教程/示例中，他们使用另一个带有模型的构造函数。例如：

```
private static final List<String> SEARCH_ENGINES = Arrays.asList(new String[] {
        "Google", "Bing", "Baidu" });
private String selected = "Google";
DropDownChoice<String> listSites = new DropDownChoice<String>(
        "sites", new PropertyModel<String>(this, "selected"), SEARCH_ENGINES); 
```

我尝试过类似的方法来模拟这种调用：

```
final DropDownChoice<myObject> ddc = new DropDownChoice<myObject>("wicket_id", new PropertyModel<myObject>(this,"defaultValue"),myList, new ChoiceRenderer<myObject>("name", "surname")); 
```

但我得到的是一个错误：

```
No get method defined for class: package$WicketPage expression: defaultValue 
```

请帮我理解。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T14:25:46.933

这意味着您需要在要添加 DropDownChoice 的页面或组件中添加“defaultValue”的 getter 和 setter。

```
public class MyPage extends WebPage {

    private MyObject defaultValue;

    public MyPage(PageParameters pageParameters) {
        super(pageParameters);

        defaultValue = some_simple_data_retrieve();
        List<MyObject> myList = some_data_retrieve();

        add(new DropDownChoice<myObject>(
                       "wicket_id",
                       new PropertyModel<MyObject>(this,"defaultValue"),
                       myList, 
                       new ChoiceRenderer<MyObject>("name", "surname")
        );           
    }

    public MyObject getDefaultValue() {
        return defaultValue;
    }

    public void setDefaultValue(MyObject defaultValue) {
        this.defaultValue = defaultValue;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:45:59.417

`PropertyModel`是解决此类问题的好选择。`MyObject`是一个对象并且有一个字符串`name`。我已经覆盖了其中的`toString()`方法来命名并且它工作正常。我建议使用这种方法。

```
topicDropDown = new DropDownChoice<MyObject>("wicktID", new PropertyModel<MyObject>       (this.object, "exp"), new LoadableDetachableModel<List<MyObject>>() {
        @Override
        protected List<MyObject> load() {
            return top.getAllObjects();

        } 
```

# visual-studio-2010 - 我可以在两个方面之间共享数据吗

> ID：10352112
> 
> 赞同：1
> 
> 时间：2012-04-27T14:02:07.987
> 
> 标签：visual-studio-2010, inversion-of-control, unity-container, interceptor

我使用 C# .NET 4.0 编写的 SOA，服务本身使用统一作为其 IoC 容器。我们通过 xml 配置来配置 unity。我们有一些方法被拦截并注入额外的功能。

我的问题是，我需要在第一个执行的拦截（方面）中与之后立即执行的第二个方面共享值。这可以通过xml配置吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:59:08.827

我想出了如何在两个或多个方面之间共享数据。

看看`IMethodInvocation.InvocationContext`。

基本上你可以将数据添加到这个对象中，它将在执行的以下方面可用。

# c++ - 存储在 int 中的指针

> ID：10352115
> 
> 赞同：-4
> 
> 时间：2012-04-27T14:02:27.957
> 
> 标签：c++, pointers, mfc

我有返回 VARIANT (mfc) 的函数 getMemory()。据说 ulVal 中的成员是指向我需要访问的内存的指针。

```
int m_memAddr = object.getMemory().ulVal; //get pointer to memory 
```

然后我需要把这个指针指向我试过的 char*

```
char* pointer = (char*)m_memAddr; 
```

它可以编译，但程序运行时出现错误。如何调试它？

函数getMemory：

```
VARIANT object::getMemory()
{
    VARIANT result;
    InvokeHelper(0x4a, DISPATCH_METHOD, VT_VARIANT, (void*)&result, NULL);
    return result;
} 
```

//从我使用的相机库的文档中编辑：

VARIANT GetImageMem() 描述

GetImageMem() 返回指向存储图像的内部图像存储器的起始地址的指针。如果使用环形缓冲，GetImageMem() 将返回上次用于图像捕获的图像内存的起始地址。

指向图像内存的指针在 VARIANT 数据类型的元素 ulVal 中返回。参数

返回值

指向 VARIANT 数据类型的 ulVal 中的图像内存的指针。

这是返回我的相机存储图像的内存的函数的描述。

我想用 OpenCV 处理这个图像，所以我需要 char* 将它设置为 IplImage imageData。

现在我希望更清楚问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:16:56.343

从[文档](http://msdn.microsoft.com/en-us/library/zwx803ex%28v=VS.80%29.aspx)

> pbParamInfo - 指向以 null 结尾的字节字符串的指针，该字符串指定 pbParamInfo 后面的参数类型。
> 
> ... - pbParamInfo 中指定的类型的变量参数列表。

您正在传递 NULL `pbParamInfo`，我认为这意味着返回的变体中不会存储任何数据，因此指针当然是无效的。

如果您进一步遵循文档，您会发现传递`VTS_BSTR`指定您可以使用指向字符的指针初始化变量（将其作为 pbParamInfo 之后的下一个参数传递）。

# asp.net - 部署后如何在 Web 应用程序中获取成员资格、角色和访问规则

> ID：10352117
> 
> 赞同：0
> 
> 时间：2012-04-27T14:02:32.197
> 
> 标签：asp.net

我正在使用网站管理工具来管理成员资格、角色和访问规则。它在开发机器上运行良好，但在服务器中无法正常工作。在服务器中未安装 VS IDE。之后如何在服务器中获取成员资格、角色和访问规则部署。请帮忙

谢谢&问候 Lijo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:10:43.600

您可能刚刚设置了附加到 SQL Server Express 实例的 ASPNETDB.mdb 文件。这通常在服务器上不起作用，因此您需要在生产数据库中重新创建表和过程。

您可以使用 aspnet_regsql.exe 工具来设置正确的表等。更多信息在这里：http: [//msdn.microsoft.com/en-us/library/x28wfk74.aspx](http://msdn.microsoft.com/en-us/library/x28wfk74.aspx)和@amaters 提到，在这里：[http:// /msdn.microsoft.com/en-us/library/ms229862.aspx](http://msdn.microsoft.com/en-us/library/ms229862.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:05:49.040

[使用来自http://msdn.microsoft.com/en-us/library/ms229862.aspx](http://msdn.microsoft.com/en-us/library/ms229862.aspx)的 ASP.NET SQL Server 注册工具

该页面上还有更多信息。

更新：您不需要安装 VS IDE，只需安装 .Net Framework

# ibm-mq - 简单的 java 程序获取 RC=2009 连接到远程队列管理器

> ID：10352125
> 
> 赞同：2
> 
> 时间：2012-04-27T14:03:02.270
> 
> 标签：ibm-mq

我正在编写一个简单的 java 程序来连接到远程 WebSphere MQ 队列管理器，但它显示错误：`MQJE001: Completion Code '2', Reason '2009'`

然而，当我使用 WMQ Explorer 连接时，它会连接起来，我可以在那里看到队列中的消息。请帮忙。我的代码是：

```
 public void init(){

     props.put(MQC.HOST_NAME_PROPERTY, "sailmq3d.pok.ibm.com");
     props.put(MQC.CHANNEL_PROPERTY, "PLM.SECURE.SVRCONN");
     props.put(MQC.PORT_PROPERTY, 1423); // port number
     props.put(MQC.TRANSPORT_PROPERTY, MQC.TRANSPORT_MQSERIES);
     }

       public void start(){
   try {
  // Create a connection to the queue manager
qMgr = new MQQueueManager("PLMESB_SBMD2",props); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:26:34.010

哇，这有点酷 - 有一次我可以从 SO 发布的问题中真正*看到*QMgr！

`PLM.SECURE.SVRCONN`通道定义如下所示：

```
AMQ8414: Display Channel details.
   CHANNEL(PLM.SECURE.SVRCONN)             CHLTYPE(SVRCONN)
   ALTDATE(2011-01-30)                     ALTTIME(15.02.56)
   COMPHDR(NONE)                           COMPMSG(NONE)
   DESCR( )                                HBINT(300)
   KAINT(AUTO)                             MAXINST(999999999)
   MAXINSTC(999999999)                     MAXMSGL(4194304)
   MCAUSER(nobody)                         MONCHL(QMGR)
   RCVDATA( )                              RCVEXIT( )
   SCYDATA( )
   SCYEXIT(/var/mqm/exits64/PLMESB_SBMD2/ESBSecurityExit(ChannelExit))
   SENDDATA( )                             SENDEXIT( )
   SHARECNV(10)                            SSLCAUTH(REQUIRED)
   SSLCIPH( )                              SSLPEER( )
   TRPTYPE(TCP) 
```

鉴于该通道上有一个自定义安全出口，因此无法说明您收到 2009 返回码的原因。最好的办法可能是查看安全出口日志。

通过 WMQ 资源管理器的连接可能正在使用`SYSTEM.ADMIN.SVRCONN`没有出口。

我看到还为该通道定义了一个 CLNTCONN，它需要一个客户端出口。如果您的 Java 客户端使用客户端连接定义表 (CCDT)，那么这会使事情变得更加复杂。CLNTCONN 存在并列出了客户端出口这一事实表明，`PLM.SECURE.SVRCONN`如果没有该客户端出口，它将无法工作。

# android - 如何使用 ToggleButton android

> ID：10352133
> 
> 赞同：1
> 
> 时间：2012-04-27T14:03:29.007
> 
> 标签：android, listview, togglebutton

我在 xml 中有以下切换按钮：

```
<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="46dp"
        android:gravity="center" >

        <ToggleButton
            android:id="@+id/toggleButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:text="ToggleButton"
            android:textOff="Inactive"
            android:textOn="Active" />

        <TextView
            android:id="@+id/label_note"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_centerVertical="true"
            android:layout_marginRight="38dp"
            android:layout_marginLeft="2dip"
            android:layout_toRightOf="@+id/check_note"
            android:text="@+id/label"
            android:textSize="25px" />
        ...
</RelativeLayout> 
```

在我扩展列表视图的类中，我想根据一些标准以编程方式将切换按钮设置为活动/非活动。我想指定我不让用户能够单击切换按钮并将其设置为活动或非活动。怎么做？需要一些帮助。欣赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:22:00.373

要使按钮不可点击，只需禁用切换按钮：

```
mToggleButton.setEbabled(false); 
```

或将其设置为不可点击：

```
mToggleButton.setClickable(false); 
```

并以编程方式更改按钮状态，请使用：

```
mToggleButton.setActivated(true); 
mToggleButton.setActivated(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T01:32:00.413

答案 `ToggleButton.setActivated`对我不起作用。我使用以下方法使其工作：

```
 ToggleButton.setChecked(false); 
```

希望这可以帮助其他有同样问题的人。

# c# - SQLite 和 .NET 用户控件

> ID：10352134
> 
> 赞同：3
> 
> 时间：2012-04-27T14:03:39.187
> 
> 标签：c#, .net, wpf, visual-studio, sqlite

我决定将 SQLite 用于一个小项目。但是，我遇到了一个问题。SQLite 带有 2 个不同的 .dll 文件。我添加了其中一个作为参考。另一个不能作为参考添加，因为它“不是有效的程序集或 COM 组件”。不过这并不重要，因为它只需要在第一个 .dll（已添加为参考的那个）可以找到它的文件夹中。所以很自然地我将它复制到构建目录，它工作正常，直到我开始使用 UserControls。

我的用户控件包含通过视图模型到数据库项目的数据绑定。如果我理解正确，要在设计器中显示用户控件，它们的构建就像我运行程序一样。问题是当它们在设计器中构建时，也会创建数据绑定，因此会执行一些小型数据库查询。但是，当为设计器构建用户控件并尝试执行这些查询时，我从第一个 .dll（包括的那个）中得到一个 dllnotfoundexception。它找不到第二个。

我认为将第二个 .dll 添加到 GAC 会帮助第一个找到它，但似乎我不能，因为根据 gacutil “该模块应包含程序集清单”。

有什么好的方法可以解决这个问题吗？我只是愚蠢，忽略了一些明显的事情吗？我试图尽可能清楚地描述问题，如果有不清楚的地方，请询问。

提前致谢。

编辑：澄清一下，当我在设计器模式下打开用户控件时得到的 DllNotFoundException 会导致 Visual Studio 崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:27:09.813

您可能希望将 sqlite dll 复制到以下位置之一，具体取决于您使用的 VS.NET 版本...

找到设计器装配探针位置的一种方法是

1.  找到 devenv.exe 文件。
2.  在记事本中打开 devenv.exe.config 文件
3.  在其中寻找条目

    ```
     <probing privatePath="PublicAssemblies;PrivateAssemblies"/> 
    ```

4.  将这些 sqlite dll 复制到这些目录之一。

5.  重新启动视觉工作室。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:38:55.507

使用 NuGet 包管理器并安装 SQLite

[http://nuget.org/](http://nuget.org/)

[http://nuget.org/packages/System.Data.SQLite](http://nuget.org/packages/System.Data.SQLite)

顺便提一句。还有一个 x64 版本的 SQLite

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:10:39.197

您没有向我们提供所涉及的 SQLite 文件的任何详细信息，因此以下是我的最佳猜测：

很可能您有一个 .NET dll，它是 SQLite 的 ADO.NET 数据提供程序，另一个可能是非 .NET dll，它是 SQLite 本身。您只需要将它与 ADO.NET 数据提供程序 dll 放在同一个地方

# facebook - 将 iFrame 保留在移动检测上？

> ID：10352145
> 
> 赞同：0
> 
> 时间：2012-04-27T14:04:26.190
> 
> 标签：facebook, iframe, mobile, facebook-c#-sdk, facebook-canvas

我正在开发 Facebook Canvas 应用程序，人们可以在其中分享和喜欢等。我遇到的问题是大部分内容都是 Flash，我不希望移动用户被引导到这些页面。

当他们单击 Facebook 提要中的链接时，我想将他们重定向到其他带有移动布局的静态页面。我不希望这个页面被包裹在 Facebook iframe 中。

我只想为 1 或 2 页而不是整个站点执行此操作。

编辑 Facebook 应用程序设置是最后的手段（我是承包商，很难编辑）

我希望有一些我可以返回的方法或标题不会在 facebook iframe 中加载页面。

我将 ASP MVC3 与 Facebook SDK 库一起使用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:00:20.773

您应该为此目的提供一个移动 Web URL。使用移动网络 URL，来自移动设备上的提要帖子的所有流量都将被重定向到您的应用程序的移动网络版本。有关更多信息，请参阅[https://developers.facebook.com/docs/guides/mobile/web/](https://developers.facebook.com/docs/guides/mobile/web/)。

# java - 线程调度 - 按设定顺序运行线程

> ID：10352147
> 
> 赞同：0
> 
> 时间：2012-04-27T14:04:29.693
> 
> 标签：java, multithreading, concurrency, scheduled-tasks, scheduling

我有一组大约 20 个线程，我想安排它们，以便它们按固定顺序运行。有没有办法做到这一点。我尝试过使用优先级并将优先级设置为 1-10，但调度程序似乎仍然按照自己的顺序执行线程。顺便说一句，我在 Java 中工作

有没有办法按设定的顺序运行线程？

谢谢问候迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:10:03.647

您需要一个 ExecutorService 一次运行一个线程，即：[newSingleThreadExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29)。

```
 ExecutorService pool = Executors.newSingleThreadExecutor(); 
 pool.submit(job1);
 pool.submit(job2);
 pool.submit(job3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:09:31.650

如果您首先想要同步行为，为什么要拥有多个线程？

如果您从“其他东西”获取了多个 Thread 对象，那么您可以使用`thread.run()`在当前线程中执行它们，这当然可以让您控制顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T00:45:31.537

如果作业可以并行执行，则不必运行单线程版本。下面是一个示例，您可以使用 8 个线程来运行 20 个作业：

```
public static void main(String[] args) {
    final ExecutorService executorService = Executors.newFixedThreadPool(8);
    final Queue<Integer> workItems = new ConcurrentLinkedQueue<Integer>();
    for (int i = 0; i < 20; i++) {
        workItems.add(i);
    }
    for (int i = 0; i < 20; i++) {
        executorService.submit(new Runnable() {
            @Override
            public void run() {
                final Integer workIem = workItems.poll();
                // process work item
            }
        });
    }
    // await termination of the exec service using shutdown() and awaitTermination()

} 
```

这个想法是您使用辅助队列来维护要处理的项目，并依靠队列的 FIFO 排序来按顺序并行处理项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:08:12.083

如果线程相互依赖，那么一个选项是只调度第一个线程并让它产生它的依赖线程，然后可以打开它们的依赖线程，等等......

但是，您需要了解，即使您可能以特定顺序启动线程，一旦它们启动，它们就会脱离您的控制，它们将争夺资源并且操作系统将对它们的执行进行时间切片，这意味着有些可能会“领先于”之前启动的线程。所以如果你真的需要保持顺序，那么我建议你只使用一个线程，让它以同步的方式编排任务。

# c++ - 矩阵（解除）分配

> ID：10352150
> 
> 赞同：1
> 
> 时间：2012-04-27T14:04:34.553
> 
> 标签：c++, opencv, memory-management, shogun

我将 opencv c++ API 用于计算机视觉应用程序，并使用 cv::Mat 结构管理矩阵。Opencv 使用引用计数将创建的对象释放为 cv::Mat。我还将 libshogun 用于更具体的机器学习算法。Shogun 有自己的矩阵结构，称为 SGMatrix。我从 cv::Mat 初始化 SGMatrix，如下所示：

```
cv::Mat cvmat(100,100,CV_32FC1,cv::Scalar(0.0)); 
SGMatrix<float> sgmatrix((float*)cvmat.data, cvmat.rows, cvmat.cols); 
```

我的问题是当我在 shogun lib 中使用另一个对象时，例如：

```
CSimpleFeatures<float>* features = new CSimpleFeatures<float>(sgmatrix); 
```

shogun 现在应该拥有使用 创建的矩阵`features`，在运行时，当 opencv 尝试释放`cvmat`已由 shogun 释放的矩阵时，我得到一个错误。我该如何处理？我不想克隆我的矩阵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:33:58.747

一旦 SGMatrix 和 simplefeature 对象被销毁，Shogun 将取消分配矩阵。为了避免这种使用

```
SGMatrix<float> sgmatrix((float*)cvmat.data, cvmat.rows, cvmat.cols, false); 
```

这样你就必须照顾内存释放！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T14:33:39.937

使用 Shogun 或 new / malloc 为 OpenCV 外部的矩阵内部分配内存。然后，使用其中一个构造函数创建矩阵，该构造函数将`void*`指向矩阵数据的指针（您之前已分配）作为参数。这只会为您的数据创建一个 opencv 标头。

这样，opencv 就知道它不拥有矩阵内的数据，并且它不会在`cv::Mat`对象被释放时尝试释放它。

# ruby-on-rails - Ruby on Rails - 系统无法定位部分的错误

> ID：10352155
> 
> 赞同：0
> 
> 时间：2012-04-27T14:05:01.283
> 
> 标签：ruby-on-rails, ruby, haml

我在这个目录中有一个视图：

```
app/views/mobile/dis/my_view.html.haml 
```

在其中我有简单的一行代码来呈现部分：

```
= render "dis_content", :preview => false 
```

并且该部分与 my_view.html.haml 文件位于同一目录中，称为 _dis_content.html.haml

但由于某种原因，当我尝试渲染 my_view.html.haml 文件时，我收到此错误：

```
Missing partial mobile/dis/dis_content, mobile/base/dis_content, application/dis_content with {:locale=>[:en, :en], :handlers=>[:haml, :erb, :builder] 
```

知道为什么它没有看到部分吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:07:50.617

我想你可能需要

`render :partial => "dis_content"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:18:42.080

你可以试试这个：

```
 <%= render 'form' %> 
```

或其他文件夹

```
 <%= render 'layouts/my_other_layouts'%> 
```

# python - python中的正则表达式字符串检索

> ID：10352157
> 
> 赞同：0
> 
> 时间：2012-04-27T14:05:07.993
> 
> 标签：python, regex, string

如何在python中解析这个正则表达式？

在这里，我需要以有效的方式解析“From”和“date time stamp”之间的字符串“ **Miracle workers ”。**

```
 s = """
      business hours. Keyword Search: Sales, Operations, Director, Medical, Medical Devices, DME, Respiratory Equipment, Sales Rep, Account Executive, Exec, Business... <br />
             From Miracle Workers - 26 Apr 2012 08:45:15 GMT
          -  View all <a href="http://www.indeed.com/l-Houston,-TX-jobs.html">Houston    jobs</a>
    """ 
```

这是我正在做的正则表达式。我需要获得有效的正则表达式。

```
 regex1 = re.findall('From\ ([A-Za-z\ ]+)\-',s)
     ['Miracle Workers '] 
```

从 url 中提取另一个字符串。

```
 s2 = http://www.indeed.com/job/Region-Manager-Field-Sales-at-Covidien-in-Atlanta,-GA-a1a421aabb4d54a7"
  regex2 = re.findall('-in-([A-Za-z-]+),-([A-Z]{2})',str(job.url))[0] 
```

在这里，我得到了两个像**('Atlanta', 'GA')**这样的元组，而不是需要得到 " **Atlanta,GA"**

它应该如何做才能在所有情况下以有效的方式获得结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:13:42.007

使用 () 你对结果进行分组，这样，findall 给你一个元组。试试这个正则表达式（不分组）：

```
regexp = '-in-[A-Za-z-]+,-[A-Z]{2}' 
```

# php - 当我使用此代码打开 facebook 应用程序时出现意外的 T_VARIABLE 错误。请使此代码正确

> ID：10352158
> 
> 赞同：0
> 
> 时间：2012-04-27T14:05:12.153
> 
> 标签：php, facebook, facebook-graph-api, web-applications

```
 <?php
        session_start();
        require_once 'facebook.php';
        $app_id = "418907881455014";
        $app_secret = "36389d2c4caaf6de86982cb87686a494";
        $redirect_uri = 'http://gooogle12.comuf.com'
        $facebook = new Facebook(array(
                'appId' => $app_id,
                'secret' => $app_secret,
                'cookie' => true
        ));
        $user = $facebook->getUser();
        $user_profile = $facebook->api('/me');

        $coded = $_REQUEST['code'];

        $access_token = $facebook->getAccessToken();
        $name = "".$user_profile['name']."";
        $fbid = "".$user_profile['id']."";

        function RandomLine($filename) {
            $lines = file($filename) ;
            return $lines[array_rand($lines)] ;
        }
        $reason = RandomLine("reason.txt");  

        $canvas = imagecreatefromjpeg ("test3/bg.jpg");                                   // background image file
        $black = imagecolorallocate( $canvas, 0, 0, 0 );                         // The second colour - to be used for the text
        $font = "arial.ttf";                                                         // Path to the font you are going to use
        $fontsize = 20;                                                             // font size

        $birthday = "".$user_profile['birthday']."";
        $death = "- ".date('d/m/Y', strtotime( '+'.rand(0, 10000).' days'))."";

        imagettftext( $canvas, 22, -1, 110, 120, $black, $font, $name );            // name
        imagettftext( $canvas, 22, -1, 110, 170, $black, $font, $birthday );        // birthday
        imagettftext( $canvas, 22, -1, 255, 172, $black, $font, $death );           // death
        imagettftext( $canvas, 20, -1, 110, 220, $black, $font, $reason );           // reason

        imagejpeg( $canvas, "img/".$fbid.".jpg", 50 );

        $facebook->setFileUploadSupport(true);

        //Create an album
        $album_details = array(
                'message'=> 'How will you die?',
                'name'=> 'How will you die?'
        );
        $create_album = $facebook->api('/me/albums', 'post', $album_details);

        //Get album ID of the album you've just created
        $album_uid = $create_album['id'];

        //Upload a photo to album of ID...

        $file='img/'.$fbid.'.jpg'; //Example image file

        $photo_details = array( 'message'=> 'Find out here: https://www.facebook.com/pages/Fun-Land/353713864642723?sk=app_270399073027751'image' => '@' . realpath($file) );
        $upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details);

        $upphoto = $upload_photo['id'];

        ImageDestroy( $canvas );

        header("Location: http://facebook.com".$fbid."&photoid=".$upphoto."")
        ?> 
```

好吧，我不是程序员。所以，我不知道这段代码有什么错误。我已将此 index.php 脚本上传到虚拟主机，但是当我打开我的 facebook 应用程序时，错误是 - Parse error: syntax error, unexpected T_VARIABLE in /home/a2424901/public_html/index.php on line 7。请帮助我使此代码正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:07:04.897

错误指示第 7 行，因此它可能在附近。

您缺少前（第六）行的结尾分号。

```
$redirect_uri = 'http://gooogle12.comuf.com' 
```

这就是为什么第 7 行的变量出乎意料的原因。

* * *

另一方面，StackOverflow 的语法突出显示提醒我注意更远的另一个问题。在这条线上：

```
$photo_details = array( 'message'=> 'Find...51'image' => '@'.realpath($file)); 
```

看起来你没有关闭第一个数组元素，它可能应该是这样的：

```
$photo_details = array( 'message'=> 'Find...51', 'image' => '@'.realpath($file)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:13:50.467

第 7 行缺少分号：

```
 $redirect_uri = 'http://gooogle12.comuf.com' 
```

应该是这个

```
 $redirect_uri = 'http://gooogle12.comuf.com'; 
```

# javascript - 为什么这个 $.getJSON 请求错误？

> ID：10352160
> 
> 赞同：0
> 
> 时间：2012-04-27T14:05:20.817
> 
> 标签：javascript, jquery, json, getjson

我有以下调用 http 处理程序的脚本。它调用 http 处理程序，在 fiddler 中，我可以看到正确返回的 JSON，但是这个脚本总是以错误块结尾。我如何确定出了什么问题？

```
 <script type="text/javascript">
        function GetConfig() {
            $.getJSON("http://localhost:27249/Handlers/GetServiceMenuConfiguration.ashx", function(d) {
                alert("success");
            }).success(function(d) {
                alert("success");
            }).error(function(d) {
                alert("error");
            }).complete(function(d) {
                alert("complete");
            });
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:09:27.273

我看到您包含服务器名称 ( `localhost`) 和端口 ( `27249`)。Ajax 请求由[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)控制，正常情况下禁止跨域请求。（如果您不进行跨域调用，则不需要包含`http://localhost:27249`URL 的部分，这让我认为您可能会这样做。）

[如果浏览器支持跨域调用并且您的服务器代码正确处理CORS](http://www.w3.org/TR/access-control/)请求，则您可以进行跨域调用。或者，您可能会考虑使用[JSON-P](http://en.wikipedia.org/wiki/JSONP#JSONP)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:21:00.077

JQuery 的内置 JSON 解析器相当挑剔，如果标头设置不完美，即使格式良好的 JSON 有时也会失败。首先尝试使用 type:text 属性执行 $.ajax 请求并记录响应。这将区分连接问题和解析问题。

```
$.ajax({
  dataType:'text',
  url: '/Handlers/GetServiceMenuConfiguration.ashx',
  success: function(data) {
      console.log(data.responseText);
  }
}); 
```

如果问题出在连接上，并且您确实需要跨域请求 JSON，那么您还可以使用 LAB、yep/nope 或[Frame.js](https://github.com/bishopZ/Frame.js)等库加载器。

# php - php多个if语句？

> ID：10352161
> 
> 赞同：4
> 
> 时间：2012-04-27T14:05:20.830
> 
> 标签：php

这似乎是一个菜鸟问题，抱歉。今天早上我无法让我的大脑工作。

我正在尝试执行多个`if`语句，但它们的行为不正确。它似乎总是在找到它正在寻找的模板后加载最少的模板。做这样的事情的最佳方法是什么：

```
$post = $wp_query->post;
if ( in_category('7') ) {include(TEMPLATEPATH . '/post-experts.php');}
if ( in_category('6') ) {include(TEMPLATEPATH . '/post-radio.php');}
if ( in_category('5') ) {include(TEMPLATEPATH . '/post-lifestyle.php');}
else {include(TEMPLATEPATH . '/singleorigional.php');
} 
```

[例子](http://dev.morethanmoneyradio.com/?p=69)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T14:07:27.557

您很可能想`else if`为第二个和第三个 if 做，或者有办法知道是否没有一个是真的，做 else 语句

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-28T08:41:48.593

为提高效率，您最好使用 switch 语句，然后捕获在您的案例中没有找到的那些，您可以使用默认值。

```
switch(in_category){ //Begin switch statement.
case '7': //Check if it equals 7
include(TEMPLATEPATH . '/post-experts.php'); //Include our PHP code
break; //End this current condition.
case '6': //Check if it equals 6
include(TEMPLATEPATH . '/post-radio.php'); //Include our PHP code
break; //End this current condition.
case '5': //Check if it equals 5
include(TEMPLATEPATH . '/post-lifestyle.php'); //Include our PHP code
break; //End this current condition.

default: //If none of the above cases are found, do this.
include(TEMPLATEPATH . '/singleorigional.php'); //Include our PHP code
break; //End this current condition.   
} 
```

**编辑：**我决定稍后再讨论，以更好地解释为什么这样更好。

if else 组合意味着一个顺序。例如

```
if(thingy == "thing1"){
//Do one thing
}
elseif(thingy == "thing2"){
//Do another thing
} 
elseif(thingy == "thing3"){
//Do a different thing
}
else{
//Catch anything
} 
```

有了这个，这意味着它将检查第一个条件，如果thing == thing1，如果不是，则检查它是否等于下一个条件，即thing == thing2，依此类推。如果您通常总是期待thing1，那么这可能没问题，因为您只是在捕捉其他一些东西。但是，实际上在找到所需的解决方案之前检查所有可能的条件是低效的。

相反，通过编写等效的 switch 语句：

```
switch(thingy){
case "thing1":
//Do one thing
break;
case "thing2":
//Do another thing
break;
case "thing3":
//Do a different thing
break;
default:
//Catch anything
break; //Break is not needed if default is the final case.
} 
```

相反，它的作用是首先获取答案，例如 thing == "thing3"，然后它会跳过其他不相关的情况，而只做它需要做的事情。它不使用命令，而是有点像指向正确答案。因此，您的实际答案是第一种情况还是第一种情况并不重要，它只做相关的事情。

总结一下：如果您使用开关，并且您回答的案例是第 100 个案例，那么它将指出在找到该开关（答案）之后要做什么，如果您要使用 ifelse 并且您的答案是第 100 个变体ifelse，在做它需要做的事情之前，它必须遍历 99 个其他无意义的检查。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T14:13:21.940

我认为您的问题在于 If 语句是独立的。如果您有带有类别的数组，请尝试使用 switch 语句，或者如果您只有 in_category 一个 think 返回布尔值的函数，则使用 elseif 语句，例如：

```
if (in_category(7)){...}
elseif (in_category(6)){...}
elseif (in_category(5)){...}
else {
...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T14:07:57.697

我的假设是，无论您要查找的“in_category”是什么，都可以在一个以上的类别中找到 - 因此不是一个长的 if 块。尝试这个：

**精简版：**

```
$post = $wp_query->post;
$found = false;
if ( in_category('7') ) { include(TEMPLATEPATH . '/post-experts.php'); $found = true; }
if ( in_category('6') ) {include(TEMPLATEPATH . '/post-radio.php'); $found = true; }
if ( in_category('5') ) {include(TEMPLATEPATH . '/post-lifestyle.php'); $found = true; }
if(!$found) include(TEMPLATEPATH . '/singleorigional.php'); 
```

**更易于阅读/理解的版本：**

```
$post = $wp_query->post;
$found = false;
if ( in_category('7') ) {
    include(TEMPLATEPATH . '/post-experts.php');
    $found = true;
}
if ( in_category('6') ) {
    include(TEMPLATEPATH . '/post-radio.php');
    $found = true;
}
if ( in_category('5') ) {
    include(TEMPLATEPATH . '/post-lifestyle.php');
    $found = true;
}
if(!$found) include(TEMPLATEPATH . '/singleorigional.php'); 
```

**或者 - 如果它只能在一个类别中找到：**

```
$post = $wp_query->post;
if ( in_category('7') ) {
    include(TEMPLATEPATH . '/post-experts.php');
} else if ( in_category('6') ) {
    include(TEMPLATEPATH . '/post-radio.php');
} else if ( in_category('5') ) {
    include(TEMPLATEPATH . '/post-lifestyle.php');
} else {
    include(TEMPLATEPATH . '/singleorigional.php');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T14:09:29.130

正如@thantos 所说，包括 else if 语句。

编辑：[WordPress](http://codex.wordpress.org/Function_Reference/in_category)告诉我它需要 in_category 函数的第二个参数，即 $post 变量；我编辑了我的回复以匹配它。

例子：

```
$post = $wp_query->post;
if (in_category('7', $post)) {
    include(TEMPLATEPATH . '/post-experts.php');
}
else if (in_category('6', $post)) {
    include(TEMPLATEPATH . '/post-radio.php');
}
else if (in_category('5', $post)) {
    include(TEMPLATEPATH . '/post-lifestyle.php');
}
else {
    include(TEMPLATEPATH . '/singleorigional.php');
} 
```

# c# - 使用 ftpWebRequest 时出现错误：远程服务器返回错误 530 未登录

> ID：10352165
> 
> 赞同：8
> 
> 时间：2012-04-27T14:05:44.590
> 
> 标签：c#, ftpwebrequest

我正在尝试在 c# 中使用 ftpWebRequest 我的代码是

```
// Get the object used to communicate with the server.
            FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://192.168.20.10/file.txt");
            request.Method = WebRequestMethods.Ftp.UploadFile;

            // This example assumes the FTP site uses anonymous logon.
            request.Credentials = new NetworkCredential("dev\ftp", "devftp");

            // Copy the contents of the file to the request stream.
            StreamReader sourceStream = new StreamReader(@"\file.txt");
            byte[] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
            sourceStream.Close();
            request.ContentLength = fileContents.Length;
            request.UsePassive = true;
            Stream requestStream = request.GetRequestStream();
            requestStream.Write(fileContents, 0, fileContents.Length);
            requestStream.Close();

            FtpWebResponse response = (FtpWebResponse)request.GetResponse();

            Console.WriteLine("Upload File Complete, status {0}", response.StatusDescription);

            response.Close(); 
```

我在 request.GetRequestStream(); 中得到一个错误 错误是：远程服务器返回错误 530 not logged in 如果我尝试进入浏览器页面并且在 url 我写[ftp://192.168.20.10/](ftp://192.168.20.10/)浏览页面 要求我输入名称和密码，我输入相同的名称和密码，我可以看到 ftp 文件夹中的所有文件和文件夹。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-07T13:04:24.370

不应该：

```
request.Credentials = new NetworkCredential("dev\ftp", "devftp"); 
```

是：

```
request.Credentials = new NetworkCredential("dev\\ftp", "devftp"); 
```

或者：

```
request.Credentials = new NetworkCredential(@"dev\ftp", "devftp"); 
```

我必须相信这可能会导致您的问题，因为 \f 是换页符。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-26T04:20:27.360

面对同样的问题，这是我的解决方案：

```
request.Credentials = new NetworkCredential(
    usernameVariable.Normalize(),passwordVariable.Normalize(),domainVariable.Normalize()); 
```

详细信息可以在[这里找到](http://www.godwinpaul.com/sharepoint/2013/ftp-c-error-the-remote-server-returned-an-error-530-not-logged-in)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-13T10:33:59.697

我发现当通过 .NET/C# 连接到 FTP 服务器时，某些字符不是“有效的”。将登录凭据设置为仅包含字母和数字 [a-Z0-9] 后，它可以登录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-24T10:42:51.660

只需从用户名或密码中删除双引号，因为有时 $ 登录用户名或密码会导致问题。每次都使用单引号很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-11T13:55:49.817

如果您假设匿名登录，请不要设置网络凭据。这是我问题的根源。

# mysql - 如何使用 MySQL 将子查询结果存储在会话变量中？

> ID：10352178
> 
> 赞同：1
> 
> 时间：2012-04-27T14:06:44.763
> 
> 标签：mysql, variables, subquery

我正在尝试使用 MySQL 将子查询结果存储在会话变量中，但问题是当我像这样执行此查询时（请参阅下面的查询），错误消息将像这样显示（请参阅下面的错误消息）。

我不知道如何解决这个问题。

```
(0 row(s) affected)
Execution Time : 00:00:00:343
Transfer Time  : 00:00:00:000
Total Time     : 00:00:00:343

Error Code : 1222
The used SELECT statements have a different number of columns

Execution Time : 00:00:00:000
Transfer Time  : 00:00:00:000
Total Time     : 00:00:00:000 
```

询问

```
SET @post := 0;

SELECT user_name,
(SELECT COUNT(*) INTO @post  FROM post WHERE user_id = '23332'),
@post 
FROM `user_fans` WHERE user_id = '23332'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:09:06.630

```
SET @post := 0;

SELECT  user_name,
        @post := (SELECT COUNT(*) FROM post WHERE user_id = '23332'),
        @post 
FROM    `user_fans`
WHERE   user_id = '23332'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:11:55.080

如果您只想进一步使用帖子计数，那很好

如果您只想显示帖子计数，请使用

```
SELECT  user_name,
        (SELECT COUNT(*) FROM post WHERE user_id = '23332') as Post,
FROM    `user_fans`
WHERE   user_id = '23332'; 
```

# ios - 使用 CABasicAnimation 滚动图像数组

> ID：10352179
> 
> 赞同：0
> 
> 时间：2012-04-27T14:06:53.320
> 
> 标签：ios, xcode, cabasicanimation

我必须一张一张地滚动图像。以下是我正在使用的代码

_imageView 是 UIImageView 并且 imagesArray 是带有对象数组的 NSArray。

```
 _imageView.animationImages=imagesArray;
   _imageView.animationDuration=10;
    [_imageView startAnimating];

    CABasicAnimation *scrollText;
    scrollText=[CABasicAnimation animationWithKeyPath:@"position.x"];
    scrollText.duration = 10.0;
    scrollText.speed= 3; 
    scrollText.repeatCount = 0;
    scrollText.autoreverses = NO;

    scrollText.fromValue = [NSNumber numberWithFloat:500];
    scrollText.toValue = [NSNumber numberWithFloat:-200.0];

    [[_imageView layer] addAnimation:scrollText forKey:@"scrollTextKey"]; 
```

我可以看到图像正在滚动，并且正在一一变化。但是这些图像都在不断变化。当图像离开框架/屏幕时，我想一张一张地更改图像。有人可以提出一些想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:08:03.970

我不太确定你在问什么。我想你是说你想创建一个动画，其中一系列图像从屏幕底部开始，然后动画到顶部，然后离开屏幕。

为此，您可能希望创建一个动画，将图像从底部的屏幕外移动到顶部的屏幕外，然后使用不同的图像循环该动画几次。像这样的东西。

定义一个实例变量 imageNumber。将其设置为零并调用 animateImage（如下）来启动动画。

代码可能如下所示：

```
-(void) animateImage;
{
  _imageView.image = [imagesArray objectAtIndex: imageNumber];
  CGPoint imageCenter = _imageView.center;
  imageCenter.y = 500;
  _imageView.center  = imageCenter;
  [UIView animateWithDuration: 10
    delay: 0.0
    options: UIViewAnimationOptionCurveLinear
    animations: 
    ^{
       CGPoint newImageCenter = _imageView.center;
       newImageCenter.y = -200;
       _imageView.center  = imageCenter;
    completion:
    ^{
      imageNumber++;
      if (imageNumber < [imagesArray count])
        [self animateImage];
    }
  ];
} 
```

# android - 在运行时将图像添加到 drawable-* 文件夹

> ID：10352180
> 
> 赞同：-1
> 
> 时间：2012-04-27T14:06:53.663
> 
> 标签：android

如何在运行时将图像添加到 drawable-* 文件夹？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T14:08:20.387

你不能。res 文件夹必须在编译时填充，以便编译生成 R.java 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:15:44.470

你不能像@blackbelt 所说的那样。但是您仍然可以在运行时生成它：

如果您有一些具有不同分辨率的图像，如后缀所示：

*   关闭-ldpi.png
*   关闭-mdpi.png
*   关闭-hdpi.png

你可以做类似的事情

```
 DisplayMetrics metrics = new DisplayMetrics();
    this.activity.getWindowManager().getDefaultDisplay().getMetrics(metrics);
    String fileName = "close";
    String fileSuffix = "";
    String fileExtension = ".png";
    int dpi = Math.round( metrics.density * 160 );
    if ( dpi<= 120/*DisplayMetrics.DENSITY_LOW*/) {
        fileSuffix = "-ldpi";
    } else if ( dpi<= 160/*DisplayMetrics.DENSITY_MEDIUM*/) {
        fileSuffix = "-mdpi";
    } else if ( dpi<= 240/*DisplayMetrics.DENSITY_HIGH*/) {
        fileSuffix = "-hdpi";
    } else if ( dpi<= 320/*DisplayMetrics.DENSITY_XHIGH*/) {
        fileSuffix = "-hdpi";
    }//else

    Drawable crossDrawable = new BitmapDrawable( getClass().getResourceAsStream( fileName + fileSuffix + fileExtension ) ); 
    //getContext().getResources().getDrawable( android.R.drawable.btn_dialog );
    crossImage.setImageDrawable(crossDrawable); 
```

# asp.net-mvc - 如何为多行表单实现多个提交按钮？

> ID：10352185
> 
> 赞同：1
> 
> 时间：2012-04-27T14:07:16.170
> 
> 标签：asp.net-mvc, asp.net-mvc-3, forms, button

我有一个具有这种格式的表格：

1.  我是第一行（文本框）[提交按钮]
2.  我是第二排（单选按钮）[提交按钮]
3.  我是第三行（复选框）[提交按钮]
4.  我是第四行（下拉）[提交按钮]
5.  我是第五行（文本框）[提交按钮]
6.  我是第六行（文本框）[提交按钮]
7.  我是第七排（单选按钮）[提交按钮]

文本（例如：我是第四行）和控件的值将从数据库中加载。我希望提交按钮仅将其控件的值（例如：第 4 行，下拉值 == N/A）发送到服务器。并非所有控件的值。

现在我必须用 Html.BeginForm 包装**每一**行，还是可以用一个 Html.BeginForm 包装所有行？处理这种事情的最佳（甚至更好）方法是什么。

注意：我已经搜索过 SO 并没有看到像这样讨论过的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:13:49.163

听起来你需要创建一个循环来构建你的表..并有条件地根据您键入的内容创建行以决定放置特定的元素类型（文本、单选、复选框等）和每个行将必须包装在表单标签中。由于您需要评估正确的元素，因此您还可以使用它来构建您的 BeginForm 来告诉它在哪里发布操作，可能每个元素类型都有不同的操作，以便操作只接收您希望它接收的数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:32:44.240

我相信您可以使用 Jquery 做到这一点：首先为每一行创建单独的表单。尝试使用下面的代码.. Jquery：

```
function SubmitForm(btn)
{
     var form = btn.serialize();
     $.post("your  URL here",form,function() {
         alert("Saved");
     });
} 
```

html:

```
<form id='form1' >
 ...
 Other controls on your form
 ...
<input type="button" id="form1" onclick="SubmitForm(this)" />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:16:54.933

首先，您不能嵌套表单标签（浏览器不支持它）。

点击时的 input[type=submit] 会在其父表单上触发回发事件。前任。

```
<form action='/PostBackTo' onsubmit='DoSomething()'>
<input type='submit />
</form> 
```

因此，您必须将每个控件包装在其自己的表单中，并且您想要回发的任何其他数据都需要驻留在表单内的输入或选择标签中。

假设您想在每次提交时回发一个 id，您必须添加

```
<input type='hidden' value='@id' /> 
```

在每个表单标签内将其包含在回发中。

我建议如果您这样做，请使用 javascript 拦截提交操作并通过 AJAX 发布提交表单的数据（如果它类似于“保存更改”按钮）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:24:10.753

例如： 1\. 我是第一行：

```
<input type="text" value="@textValue" id="txtFirstRow" />
<input type="button" onclick="post('txtFirstRow');" /> 
```

Javascript代码：

```
function post(name)
{
    var txt = document.getElementById(name).value;
    $.getJSON("/Controller/Action",
    {
        text: txt
    },
    function (data) {
        //returned result
    });
} 
```

# mongodb - 在已经定义架构的情况下使用 mongoose (node.js) 连接到 MongoDB（在 Java 中）

> ID：10352187
> 
> 赞同：2
> 
> 时间：2012-04-27T14:07:23.300
> 
> 标签：mongodb, mongoose

我正在尝试通过 Mongoose 连接到 Node.js 中的 MongoDB。所有示例都讨论了在尝试保存和查找文档之前首先为文档设计架构。

但是，我已经使用 java (Morphia) 在 MongoDB 中定义了很多模式。有什么方法可以在 Mongoose 中利用 MongoDB 中已经（隐式）现有的模式？即：我可以想象存储在 MongoDB 中的关于正在创建的文档类型的元数据，Mongoose 可以使用这些元数据来创建它自己的客户端模式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:27:11.093

> 我可以想象元数据存储在 MongoDB 中，关于正在创建的文档类型，Mongoose 可以使用这些元数据来创建它自己的客户端模式。

MongoDB 绝对没有关于集合内内容的元数据。没有“字段映射”或常见类型。索引甚至没有我上次检查的统计数据。

> 有什么方法可以在 Mongoose 中利用 MongoDB 中已经（隐式）现有的模式？

我能想到的最好的方法是程序化转换。*即：读取java源文件并写出一个JS版本*。

或者您根本无法定义架构。你仍然会得到非常有用的 JS 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:58:38.360

上面的答案是正确的，这是一段对我有用的代码：

```
mongoose.model('Cat', new mongoose.Schema({ CatId: String })); // my schema is known to have cat id (I might not need this actually)

var mondb = mongoose.createConnection('localhost', 'kitten'); // connect to kitten db
var c = mondb.model('Cat'); // get the cat model from mongoose connection
c.find({name:"lior"}).exec(function(err,c) { // and now use it with different fields for queries
   if (err) {
    ...
   }
   else
       ...
   }
); 
```

# c# - 更多路径等

> ID：10352190
> 
> 赞同：0
> 
> 时间：2012-04-27T14:07:42.827
> 
> 标签：c#, arrays, file, tree, directory

我正在制作一个脚本来查找路径中的第二个文件夹是什么，我该怎么做？

dirA
dirB/C ---- 我需要 dirB
indirB - dirD/E
indirE - 文件

我需要在文件路径的第二级中找到文件夹的名称（我用星号标记了它）。

我该如何找到这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:16:59.123

这个扩展怎么样：

```
public static class StringExtensions
{
    public static String PathLevel(this String path, int level)
    {
        if (path == null) throw new ArgumentException("Path must not be null", "path");
        if (level < 0) throw new ArgumentException("Level must be >= 0", "level");

        var levels = path.Split(Path.DirectorySeparatorChar);
        return levels.Length > level ? levels[level] : null;
    }
} 
```

测试：

```
var path = @"C:\Temp\Level2\Level3\Level4\File.txt";
var secondLevel = path.PathLevel(2); // => "Level2" 
```

它将路径拆分[`DirectorySeparatorChar`](http://msdn.microsoft.com/en-us/library/system.io.path.directoryseparatorchar.aspx)为 a `String[]`。您想要第二个级别（第三个元素），这将返回“Level2”。请注意，第一个元素是`C:`.

# twitter - 如何根据位置查找推特趋势？

> ID：10352196
> 
> 赞同：0
> 
> 时间：2012-04-27T14:07:56.393
> 
> 标签：twitter, location

我正在尝试构建一个趋势图类型的应用程序。Trendmap.com 到目前为止，我已经使用 twitters 流 api 来获取推文，并且我正在根据地理坐标过滤这些推文，因为这只会返回带有地理标记的推文。我将这些存储到 couchdb 中。不，我需要根据位置找到最热门的话题。我不知道该怎么做？我的做法对吗？Twitter 趋势 api 仅提供带有 woeid 或世界的十大趋势推文。以及每天最多 30 条最热门的推文。我需要找到基于位置的趋势推文，然后将它们映射到一些可视化上。任何人都可以帮助我任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:15:43.097

如果你愿意使用 Java，你可以使用[Twitter4J](http://twitter4j.org)并获得这样的趋势......

```
public List<String> getTrends(AccessToken atoken) throws TwitterException{
    twitter.setOAuthAccessToken(atoken);
    Trends trends = twitter.getLocationTrends(1);
    List<String> currentTrends = new ArrayList<String>();
    for(Trend t: trends.getTrends()){
        String name = t.getName();
        currentTrends.add(name);
    }
    return currentTrends;
} 
```

关于函数的那个​​返回了世界范围内的当前趋势。您只需`getLocationTrends()`使用不同的[woeid](http://engineering.twitter.com/2010/02/woeids-in-twitters-trends.html)更改参数即可获得该区域的趋势。如果您希望将特定推文映射到精确区域，您可以过滤推文以仅返回带有地理位置标记的推文。

如果您不使用 Java，只需在替代库[上直接使用 Twitter API 。](https://dev.twitter.com/docs/api/1/get/trends/%3awoeid)同样的过程也适用。

# php - PHP 对象或数组

> ID：10352200
> 
> 赞同：8
> 
> 时间：2012-04-27T14:08:03.227
> 
> 标签：php, arrays, object

我正在编写一个应用程序，允许用户修改和更改他们的一些网站设置。我只是在构建一个表单生成器，它将向各种插件发送各种选项以生成代码我想知道我是否应该为此使用对象而不是多维数组？如果是这样，我将如何更改我的代码？

所以现在我做了这个——它很长而且会变得更长，所以为了简洁起见，我只粘贴了一部分：-

```
$scopeSettings = array(
    'site_background' => array(
        'subpanels' => array(
            'colour' => array(
                'plugins' => array(
                    'colourchooser' => array(
                        'tip' => "The background colour appears underneath the 'Background Image' (if set)-hover over the '?' around the colour chooser for extra tips on how to use it",
                        'element' => 'body',
                        'gradientenabled' => 'true',
                        'opts' => array (
                            'closed' => 'true',
                            'advanced' => array(
                                'tip' => "You can paste in your own generated gradient codes in here",
                                'checkbox' => true
                            )//end advanced
                        )//end Opts
                    )//end colour chooser
                )//end plugins
            ),//end colour sub panel
            'pattern' => array(
                'plugins' => array(
                    'patternselector' => array(
                        'tip' => "Use the pattern selector to apply effects like moire or scan lines to your background image",
                        'element' => 'patimg'
                    )//end patternselector
                )//end plugins
            ),//end pattern sub panel
        )//end subpanels
    )//end site background
);//end scope settings 
```

这种事情的最佳做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:17:09.583

也许这是一种愚蠢，但您可以使用“YAML”或“JSON”作为应用程序的配置格式，不是吗？

例如 Symfony 或其他框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:20:08.143

我的建议：尝试[YAML](http://yaml.org/)或 XML 或[JSON](http://json.org/example.html)以获得更易读的配置文件，然后将其解析回您自己代码中的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:24:04.043

我会将设置存储在`<insert your markup language of choice>`（XML、JSON、YAML 等）中。

然后，您可以将它们缓存在一个`$_SESSION`变量中，如果它们不存在，则在引导时填充它：

```
session_start();

if (!isset($_SESSION['settings'])) {
    // Assuming you choose JSON...
    $settings = json_decode(file_get_contents('settings.json'), TRUE);
    $_SESSION['settings'] = $settings; // array
    $_SESSION['settings'] = (object)$settings; // object
} 
```

无论您使用数组还是对象，都只是您喜欢哪种访问语法的问题：

```
$_SESSION['settings']['site_background']['subpanels']['colour']...
// vs.
$_SESSION['settings']->site_background->subpanels->colour... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:13:14.500

我会说有些人喜欢面向数组的编程，并且使用 PHP 5.4，他们可以用一种很棒的方式表达自己。然而，越来越多的人习惯于 OOP——我也是——而且它可以是一种更易读的方式来编写您的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T14:52:24.243

作为这里的其他人，我的意见是使用 YAML 或 JSON - 使用它可以以非常简单的方式完成。

以您的数据结构的 JSON 格式为例：

```
var settings = {
    'site_background' : {
        'subpanels' : {
            'colour' : {
                'plugins' : {
                    'colourchooser' : {
                        'tip' : "The background colour appears underneath the 'Background Image' (if set)-hover over the '?' around the colour chooser for extra tips on how to use it",
                        'element' : 'body',
                        'gradientenabled' : 'true',
                        'opts' : {
                            'closed' : 'true',
                            'advanced' : {
                                'tip' : "You can paste in your own generated gradient codes in here",
                                'checkbox' : true
                            }//end advanced
                        }//end Opts
                    }//end colour chooser
                }//end plugins
            },//end colour sub panel
            'pattern' : {
                'plugins' : {
                    'patternselector' : {
                        'tip' : "Use the pattern selector to apply effects like moire or scan lines to your background image",
                        'element' : 'patimg'
                    }//end patternselector
                }//end plugins
            }//end pattern sub panel
        }//end subpanels
    }//end site background
};//end scope 
```

您可以使用 json_encode 和 json_decode 等 PHP 函数进行 JSON <-> PHP 数据转换。使用花括号意味着元素是对象，而当用 [ 和 ] 替换时，您会得到数组...

但也可以成功使用 PHP OOP 方法，尤其是在使用可扩展性时。您可以拥有一个具有一些默认属性的主类设置，例如魔术 __get 和 __set 函数，然后您可以实现许多从该主设置类扩展的子设置子类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T14:21:13.490

我认为在这条路线上，我会采用结构化的面向对象的路线。您可以拥有一个包含所有子对象（设置组）的父对象，您甚至可以将设置组作为其自己的对象进行检索。每个对象都有自己的定义和属性，这些定义和属性可以记录在 IDE 中提供有用信息的代码中（如果您使用 docblocks）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T14:25:09.143

我会使用对象。假设你正在制作一个表格，你应该有几个类：

*   `Form`- 保存表单，将有一个属性`$input_list`（或`$node_list`保存所有输入
*   `Input`- 要描述单个输入项，它应该具有`label`、`type`等属性`tip`。
*   `Fieldset`- 描述一个字段集，在里面保存额外的项目。像`Form`类一样，它必须在其中`$input_list`保存所有输入。

这些类可以独立存在，并且可以扩展为具有自定义的通用输入类型（例如）

```
class Checkbox extends Input {
    public $type = 'checkbox'
    ....
} 
```

# symfony - 模板中的 Doctrine2 子查询 - 相当于 symfony1 惰性查询 getter

> ID：10352205
> 
> 赞同：4
> 
> 时间：2012-04-27T14:08:30.710
> 
> 标签：symfony, doctrine, doctrine-orm, twig

我有两张桌子：

```
comment - id, application_id, comment, user_id, created_at, deleted_at

comment_likes - comment_id, user_id 
```

我可以使用标准 DQL 检索应用程序的注释`SELECT u FROM Comment WHERE :application = application`

浏览评论时，我想查看登录用户是否已经喜欢评论。

在 symfony1 中，我会使用一个简单的惰性查询`$comment->hasUserLiked()`

目前，在 symfony2 中，我必须查询所有用户喜欢的应用程序评论和所有应用程序评论的查询。

循环浏览应用程序评论时，我在每个评论中执行一个子循环，以检查用户喜欢的评论集合中是否存在用户喜欢的记录。这不干净。

希望这是有道理的。

有没有更好的办法？

编辑：我可以使用子控制器来呈现用户是否喜欢评论……但这似乎只是几行 html 的顶部。虽然，比当前的实现更干净。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:58:36.893

`Comment`您需要在和`Comment\Like`实体之间建立双向的一对多关系。这样，一个`Comment`实体就会知道它拥有的所有喜欢。然后，您可以在其中实现一个方法，该方法`$comment->hasBeenLikedBy($user)`将遍历它拥有的所有喜欢，并查看其中任何一个是否由您传递的用户完成。

`Comment`实体：

```
<?php
namespace Model;

class Comment 
{
    /**
     * @OneToMany(targetEntity="Model\Comment\Like", mappedBy="comment")
     */
    private $likes;

    public function hasBeenLikedBy(User $user)
    {
        foreach ($this->likes as $like) {
            if ($like->getUser() == $user) {
                return true;
            }

            return false;
        }
    }
} 
```

`Comment\Like`实体：

```
<?php
namespace Model\Comment;

class Like
{
    /**
     * @ManyToOne(targetEntity="Model\Comment")
     */
    private $comment;

    /**
     * @ManyToOne(targetEntity="Model\User")
     */
    private $user

    public function getUser()
    {
        return $this->user;
    }
} 
```

此代码不完整，可能包含错误，但我希望它足以向您展示整体方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:15:24.497

1.  您可以编写自己的 hasUserLiked() 函数来在调用时查询数据库

2.  您可以加入评论和点赞表，并在同一个电话中获得点赞。如果您的学说架构设置正确，您可以使用以下查询：

    `SELECT c FROM Comment c LEFT JOIN c.CommentLikes cl WHERE c.application = :application`

# ios - 将文件（或数据）保存到 iOS 设备，以便在应用启动时读取

> ID：10352207
> 
> 赞同：0
> 
> 时间：2012-04-27T14:09:04.347
> 
> 标签：ios, objective-c, xcode, file-io

我一直在尝试在应用程序启动时读取的某种文件上找到某种教程或任何类型的信息。

情况将是：

1.  应用程序启动
2.  应用程序检查 iOS 设备硬盘上的文件以确定现有设置
3.  如果没有现有设置，则应用程序将获取数据并创建现有设置，并将其保存到 iOS 设备，以便在应用程序下次运行时启动时读取。

我尽量说清楚。如果这没有意义，请告诉我，我将尝试进一步澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:27:07.490

[对于用户设置，使用 NSUserDefaults。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)

但是您不需要检查应用程序是否已运行。

NSUserDefaults 允许您注册一组默认值，这些默认值仅在它们未被覆盖时才适用，无论是通过设置应用程序在 Settings.bundle 中还是直接在应用程序内的 NSUserDefaults 中。

因此，定义一个`initialiseUserDefaults`方法并在应用程序启动时调用它。

```
- (void)initialiseUserDefaults
{
    NSDictionary *regDict = [NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithBool:YES], @"userPref1",
                         [NSNumber numberWithBool:YES], @"userPref2",
                         [NSNumber numberWithBool:NO], @"userPref3",
                         nil];
    [[NSUserDefaults standardUserDefaults] registerDefaults:regDict];
} 
```

（您可以从您选择的任何地方获取默认值。）

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:09:59.910

[对于用户设置，使用 NSUserDefaults。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)

创建一个`appHasRun`bool 的键并检查它是否是`true`. 如果是这样，他们之前已经运行过该应用程序。如果是`false`，则设置所有默认设置并设置`appHasRun`为`true`。

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

if (![prefs boolForKey:@"appHasRun"]){
  /* Set Default Settings HERE */
  [prefs setBool:true forKey:@"appHasRun"];
  [prefs syncronize];
} 
```

# vba - VBA、ADO.Connection 和查询参数

> ID：10352211
> 
> 赞同：27
> 
> 时间：2012-04-27T14:09:26.813
> 
> 标签：vba, ado

我有 excel VBA 脚本：

```
Set cоnn = CreateObject("ADODB.Connection")
conn.Open "report"
Set rs = conn.Execute("select * from table" ) 
```

脚本工作正常，但我想为其添加参数。例如“ where (parentid = *myparam* )”，其中*myparam*设置在查询字符串之外。我该怎么做？

当然我可以修改查询字符串，但我认为这不是很明智。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-27T15:56:02.833

您需要使用可以添加参数的 ADODB.Command 对象。基本上这就是它的样子

```
Sub adotest()

    Dim Cn As ADODB.Connection
    Dim Cm As ADODB.Command
    Dim Pm As ADODB.Parameter
    Dim Rs as ADODB.Recordset

    Set Cn = New ADODB.Connection
    Cn.Open "mystring"
    Set Cm = New ADODB.Command
    With Cm
        .ActiveConnection = Cn
        .CommandText = "SELECT * FROM table WHERE parentid=?;"
        .CommandType = adCmdText

        Set Pm = .CreateParameter("parentid", adNumeric, adParamInput)
        Pm.Value = 1

        .Parameters.Append Pm

        Set Rs = .Execute
    End With

End Sub 
```

CommandText 中的问号是参数的占位符。我相信，但我并不肯定，您附加参数的顺序必须与问号的顺序相匹配（当您有多个问号时）。不要因为参数被命名为“parentid”而被愚弄，因为我认为 ADO 不关心名称，而不是用于标识。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-12-18T18:13:37.223

从函数返回命令的替代示例：

```
Function BuildCommand(conn As ADODB.Connection) As ADODB.Command
    Dim cmd As ADODB.Command
    Set cmd = New ADODB.Command
    cmd.ActiveConnection = conn
    cmd.CommandType = adCmdText
    cmd.Parameters.Append cmd.CreateParameter("@name", adVarChar, adParamInput, 255, "Dave")
    cmd.CommandText = "SELECT * FROM users WHERE name = @name;"
    Set BuildCommand = cmd
End Function 
```

有几点需要注意：

1.  当使用`adVarChar`数据类型时，大小参数`cmd.CreateParameter`（例如 255）是必需的。不提供它会导致运行时错误 3708：应用程序定义或对象定义错误，如[文档](https://docs.microsoft.com/en-us/sql/ado/reference/ado-api/createparameter-method-ado)中所示：

    > 如果在 Type 参数中指定可变长度数据类型，则必须先传递 Size 参数或设置 Parameter 对象的 Size 属性，然后再将其附加到 Parameters 集合；否则，会发生错误。

2.  如果在`cmd.ActiveConnection`设置时`cmd.CommandText`设置了属性，并且`cmd.CommandText`包含命名参数，`cmd.Parameters`则将相应地填充。之后调用`cmd.Parameters.Append`可能会导致重复。例如：

    ```
    cmd.ActiveConnection = conn
    cmd.CommandType = adCmdText
    Debug.Print cmd.Parameters.Count ' 0

    cmd.CommandText = "SELECT * FROM users WHERE name = @name;"
    Debug.Print cmd.Parameters.Count ' 1

    cmd.Parameters.Append cmd.CreateParameter("@name", adVarChar, adParamInput, 255, "Dave")
    Debug.Print cmd.Parameters.Count ' 2 
    ```

    我相信这就是[文档](https://docs.microsoft.com/en-us/sql/ado/reference/ado-api/commandtext-property-ado)中的意思，这有点不准确：

    > 如果在设置 CommandText 属性时 Command 对象的 Prepared 属性设置为 True 并且 Command 对象绑定到打开的连接，则 ADO 准备查询（即提供程序存储的查询的编译形式）当您调用 Execute 或 Open 方法时。

    作为一种解决方法，设置`cmd.CommandText`或`cmd.ActiveConnection`添加参数之后。

# xcode - 如何摆脱“无法获取 pid 任务”错误？

> ID：10352216
> 
> 赞同：4
> 
> 时间：2012-04-27T14:09:56.763
> 
> 标签：xcode, instruments

这似乎不会消失。

这就是问题所在 - 我在 XCode 中选择 Product > Profile。Instruments 会打开，询问我要跟踪什么，我选择 Time Profiler，它会打开，但不会让我启动任务，并说明错误

> 目标无法运行：遇到远程异常：“无法获取 pid 1461 的任务”。

1461 每次都会更改为不同的东西。

在 Xcode 中，我将 Profile 方案的构建配置设置为“调试”。在目标的构建设置中，我现在将代码签名身份设置为 iPhone 开发人员。在项目的构建设置中，我有相同的。

我怎样才能摆脱这个错误，所以我可以测试我的应用程序？

编辑：原来我必须从手机中删除该应用程序，并且我也做了 Product > Clean 以及重新启动 xcode。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T10:00:20.143

我的解决方案是确保我的配置文件方案使用的是“调试”而不是“发布”构建配置。

在 Xcode 4 中，从顶部菜单中选择产品/编辑方案，然后单击左侧的“配置文件”按钮。在“信息”窗格中，您将看到构建配置的设置 - 将其设置为“调试”

谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:57:52.503

对于其他人提出这个问题：

对我来说，[这个问题](https://stackoverflow.com/questions/4323369/use-instruments-leaks-with-a-device)的解决方案有效：

> 我的解决方案是确保我的配置文件方案使用的是“调试”而不是“发布”构建配置。
> 
> 在 Xcode 4 中，从顶部菜单中选择产品/编辑方案，然后单击左侧的“配置文件”按钮。在“信息”窗格中，您将看到构建配置的设置 - 将其设置为“调试”

# html - 浏览器条件 css 注释和 IE 9

> ID：10352217
> 
> 赞同：-1
> 
> 时间：2012-04-27T14:09:57.903
> 
> 标签：html, css

我有一个奇怪的问题。

我正在使用 Internet Explorer 9，只是将浏览器模式更改为 IE 7 或 IE 8 等...

我的问题是我添加了：

```
<!--[if lt IE 7]>
<link type=\"text/css\" rel=\"stylesheet\" href=\"/styles/ie7.css\" />
<![endif]--> 
```

但在 IE9 的 IE7 浏览器模式下，它不会更改为条件 css 文件...

这是正常的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T14:12:18.633

`if lt IE 7`将匹配 IE6（或更低版本）。

要匹配 IE7，请使用`lte`(小于或**等于**)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T14:22:05.837

@SLaks 关于您收到的错误是正确的。

* * *

我想通过向您展示一种针对 IE 的更好方法来补充这一点：

```
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]><html class="ie6" lang="en"><![endif]-->
<!--[if IE 7 ]><html class="ie7" lang="en"><![endif]-->
<!--[if IE 8 ]><html class="ie8" lang="en"><![endif]-->
<!--[if IE 9 ]><html class="ie9" lang="en"><![endif]-->
<!--[if IE 10 ]><html class="ie10" lang="en"><![endif]-->
<!--[if !IE ]><!--><html class="non-ie" lang="en"><!--<![endif]--> 
```

这样做的好处是您可以保持仅使用 1 个样式表的最佳实践。你只需在你的目标前面加上你想破解的相应的 IE 类。

例如： `.ie6 #target-id`

* * *

如需更深入的解释，请查看[Paul Irish 的](http://paulirish.com/about/)文章：

[条件样式表 vs CSS hacks？答：都没有！](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

# jquery - jQuery验证插件多个电子邮件地址

> ID：10352221
> 
> 赞同：15
> 
> 时间：2012-04-27T14:10:11.573
> 
> 标签：jquery, email, jquery-validate

我有以下 jQuery 验证插件：

```
<script type="text/javascript" src="/requires/js/jquery.min.js"></script>
<script type="text/javascript" src="/requires/js/jquery.validate.js"></script>
<script type="text/javascript"> 
    $(document).ready(function() {
        $("#form").validate({
            rules: {
                name: {
                    required: true,
                    minlength: 2
                },
                email: {
                    required: true,
                    email: true
                },
                emails: {
                    required: true,
                    email: true
                }
            },
            messages: {
                name: {
                    required: "Je bent vergeten om je naam in te vullen.",
                    minlength: "Je bent vergeten om je naam in te vullen."
                },
                email: {
                    required: "Je bent vergeten om je emailadres in te vullen.",
                    email: "Het opgegeven emailadres is niet geldig."
                },
                emails: {
                    required: "Je bent vergeten om het emailadres van je vriend(in) in te vullen.",
                    email: "Je moet een geldig e-mailadres van je vriend(in) invullen."
                }
            }
        });
    }); 
</script>

<form id="form" method="post">
Jouw naam: <input type="text" name="name"><br />
Jouw e-mailadres: <input type="text" name="email"><br />
Het e-mailadres van je vriend(in): <input type="text" name="emails"><br />
<input type="submit" value="Verstuur">
</form> 
```

通过价值电子邮件，人们必须可以提供多个电子邮件地址，例如 test@test.com;test2@test.com 或 test@test.com,test@test2.com

当您这样做时，验证插件会给出错误：Je moet een geldig e-mailadres van je vriend(in) invullen。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-27T14:22:53.587

[这是在addMethod](http://docs.jquery.com/Plugins/Validation/Validator/addMethod%3a)的帮助下添加的自定义函数：

```
jQuery.validator.addMethod(
    "multiemail",
     function(value, element) {
         if (this.optional(element)) // return true on optional element 
             return true;
         var emails = value.split(/[;,]+/); // split element by , and ;
         valid = true;
         for (var i in emails) {
             value = emails[i];
             valid = valid &&
                     jQuery.validator.methods.email.call(this, $.trim(value), element);
         }
         return valid;
     },

    jQuery.validator.messages.email
); 
```

这是一个 jsFiddle，它向您展示了如何使用 multiemail 自定义方法：

[http://jsfiddle.net/leniel/xFphm/7/](http://jsfiddle.net/leniel/xFphm/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T06:47:56.623

带有消息的定制功能

```
<script>    
jQuery.validator.addMethod("custom_method_one", function (value, element) {
    if (this.optional(element)) {
    return true;
    }

    var emails = value.split(','),
    valid = true;

    for (var i = 0, limit = emails.length; i < limit; i++) {
    value = emails[i];
    valid = valid && jQuery.validator.methods.email.call(this, value, element);
    }

    return valid;
    }, "Invalid email format: please use a comma to separate multiple email addresses.");

$('#form').validate({
 "emails": {  required:true,custom_method_one: true }   
})
</script>

<form method="post" id="form" name="form" action="">
 <input type="text" name="emails" id="emails" placeholder="(eg:abc@incipio.com,xyz@ncpo.com,....)"/>

</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-13T11:39:58.357

我可能对此进行了过度设计，但我希望能够直接从 Outlook 之类的工具中粘贴多个电子邮件地址，其中地址还可能包含收件人的姓名：

```
"Firstname Lastname" <email@address.com>; "Dud Address" <not-a-real-email-for-some-reason>; "Another Recipient" <another@address.com> 
```

我还想验证每个地址，如果其中一个地址失败，则告诉用户哪个特定地址失败。

```
/**
 * The regular expression used to split emails,
 * where more than one email can be passed.
 * @type {RegExp}
 */
const emailSplitterRegex = /\s*?[;,]+\s*?/;

/**
 * The regular expression used to filter out
 * emails from email client strings that can include
 * the name of the recipient also.
 *
 * @type {RegExp}
 */
const outlookEmailStringSplitterRegex = /['"]?(\w+(?:\s+\w+)*)?['"]?\s*<?(\b[^\s]+@[\w.-]+\.[a-zA-Z]{2,4}\b)/g;

/**
 * Checks to see if complex email strings from email clients like Outlook,
 * that format the string like "Firstname Lastname" <email@address.com>
 * are valid emails by stripping away everything except the email itself.
 *
 * @param obj
 * @param email
 * @param element
 * @returns {boolean|*}
 */
function emailStringIsValid(obj, email, element){
    // Run the string thru the outlook email string splitter regex
    let matchesObject = email.matchAll(outlookEmailStringSplitterRegex);

    // Convert the RegExpStringIterator to an array
    let matches = [...matchesObject];

    if (matches.length) {
        //if the string is an outlook email string ("Name" <email@address.com>)

        //strip away everything but the email address itself
        email = matches[0].pop();
    }

    // trim whitespaces
    email = email.trim();

    // ignore empty strings
    if(!email.length){
        return true;
    }

    // Run the validator on the email address
    return $.validator.methods.email.call(obj, $.trim(email), element);
}

/**
 * Returns a custom error message for email strings. Particularly useful
 * for when multiple emails are passed and the error message should only
 * reference the email that is invalid.
 *
 * @param params
 * @param element
 * @returns {string}
 */
function emailsErrorMessage(params, element) {
    var emails = $(element).val().split(emailSplitterRegex);
    switch (emails.length) {
        case 0:
            return "Please enter at least one email address.";
        case 1:
            return "Please enter a valid email address.";
        default:
            for (let email of emails) {
                if(!emailStringIsValid(this, email, element)){
                    // Ensure brackets aren't treated as tags
                    email = email.replace(/</g, "&lt;");
                    email = email.replace(/>/g, "&gt;");

                    // Return an error message
                    return `${email} is not a valid email address.`;
                }
            }
            break;
    }
}

/**
 * Custom validator for when multiple emails can be passed, separated by
 * commas or semicolons.
 */
$.validator.addMethod("emails", function (value, element, params) {
    // Split the email string
    var emails = value.split(emailSplitterRegex); // split element by , and ;

    for (let email of emails) {
        // for each email
        if (!emailStringIsValid(this, email, element)) {
            //if a single email is invalid, return the whole string as invalid
            return false;
        }
    }

    return true;
}, emailsErrorMessage); 
```

# c# - .net sqlclient 连接本地绑定到其他 IP（非默认）

> ID：10352223
> 
> 赞同：0
> 
> 时间：2012-04-27T14:10:26.763
> 
> 标签：c#, .net, sqlclient

我有一个有多个 IP 的服务器，例如，默认是 10.1.1.2，第二个是 192.168.1.2

我必须连接到远程 SQL Server，但使用 192.168.1.2。

如何在 SqlClient 连接中设置本地 IP？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:15:45.477

在您的属性中设置连接字符串：

```
Data Source=192.168.1.2;Initial Catalog=<databaseName>;uid=<userName>;pwd=<password> 
```

# php - php中的神秘警告

> ID：10352224
> 
> 赞同：2
> 
> 时间：2012-04-27T14:10:32.240
> 
> 标签：php, mysql

我有这个代码：

```
<?php
include 'connect.inc.php';  
include 'header.inc.php';

$mesiace  = array("Január", "Február", "Marec", "Apríl", "Máj", "Jún", "Júl",     
"August", "September", "Október", "November", "December");

echo '<div id="rozpis">';
$sql = "SELECT game_id, rival_id, result, h_a, UNIX_TIMESTAMP(datum) AS datum FROM        game ORDER BY datum ASC";
$result = mysql_query($sql, $db) or die("ERROR: ".mysql_error());
if(mysql_num_rows($result) > 0)
{
echo '<table>';
echo   '<tr><td>Dátum</td><td>Domáci</td><td>Hostia</td><td>Výsledok</td></tr>';
while($row = mysql_fetch_array($result)) //here is the problem
{
extract($row);
$prikaz = 'SELECT rival_id, name FROM rival WHERE rival_id = '. $rival_id;
$vystup = mysql_query($prikaz, $db) or die(mysql_error($db));
$rival = mysql_fetch_array($vystup);
echo '<tr>';
echo '<td>' .date("j. F Y", $datum). '</td>';
if ($h_a == 1)
{
echo '<td> Capitals </td>';
echo '<td>' .$rival['name']. '</td>';
}
else 
{
echo '<td>' .$rival['name']. '</td>';
echo '<td> Capitals </td>';
}
echo '<td><a href="zapas.php?zapas='. $game_id.'">' .$result. '</td>';
echo '</tr>';  
}
echo '</table>';
}
else
echo 'No matches';

echo '</div>';

include 'zahlavie.php';
?> 
```

当我运行这个脚本时，它会写下这个警告：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource,
string given in H:\xampp\htdocs\rozpis.php on line 16 
```

真不知道哪里出了问题。在表中我有三行，但它只写第一行，然后是这条消息。当我`$query`在 phpMyAdmin 中运行时，它运行正确，或者当我使用`echo mysql_num_rows($result)`它时，它也正确返回。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T14:18:23.470

问题是您正在使用该函数`extract`，并且您的数据库列之一被命名为“结果”。因此将用一些字符串覆盖变量 $result，这当然是错误的。

```
$sql = "SELECT game_id, rival_id, result, h_a, UNIX_TIMESTAMP(datum) AS datum FROM        game ORDER BY datum ASC";
$result = mysql_query($sql, $db) or die("ERROR: ".mysql_error());
while($row = mysql_fetch_array($result)) {
    extract($row); // <- here is the problem 
```

# php - 通过 php 构建搜索结果页面

> ID：10352225
> 
> 赞同：0
> 
> 时间：2012-04-27T14:10:32.887
> 
> 标签：php, mysql, search, post

我需要构建 HTML 页面来显示和组织我的结果。我在哪里放置 HTML？我试过了，我得到了错误。它是否进入 php 脚本？在php脚本之后？前？使困惑。

```
<?php

if (isset($_POST['Submit'])) {
if (!empty($_POST['reg'])) {

    $record = $_POST['reg'];

    $query = mysql_query("SELECT * FROM reg_add WHERE reg='" . mysql_real_escape_string($record) . "'");
    $result = mysql_num_rows($query);

    if ($result != 0) {

        $row = mysql_fetch_array($query);

        $connect_date = $row['connect_date'];
        $reg = $row['reg'];
        $first_name = $row['first_name'];
        $last_name = $row['last_name'];
        $nickname = $row['nickname'];
        $gender = $row['gender'];
        $birthday = $row['birthday'];
        $home_state = $row['home_state'];
        $national = $row['national'];
        $location = $row['location'];

    } else {
        header("Location: search_error1.php");
        exit;
    }

} else {
    header("Location: search_error2.php");
    exit;
}
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:17:10.763

PHP 可嵌入到 HTML 中，因此您可以直接在 php 文件中编写 html 标记。您只需将所有 php 代码放入其中`<?php ?>`：

```
<?php
    //php code
?>
<html>
<!-- ... -->
</html>
<?php /* php again */ ?> 
```

PHP 解释器简单地忽略写在 php 标签 ( ) 之外的所有文本，`<?php ?>`并将其直接写入标准输出。

所以对你来说，它会是这样的：

```
<?php

// ...

if ($result != 0) {
    while($row = mysql_fetch_array($query)) {
        $connect_date = $row['connect_date'];
        $reg = $row['reg'];
        $first_name = $row['first_name'];
        $last_name = $row['last_name'];
        $nickname = $row['nickname'];
        $gender = $row['gender'];
        $birthday = $row['birthday'];
        $home_state = $row['home_state'];
        $national = $row['national'];
        $location = $row['location'];
?>
  First name: <?php echo $first_name ?><br/>
  Last name: <?php echo $last_name ?><br/>
  ...
<?php
    }
}

// ...

?> 
```

# javascript - 加载文档时的全屏浏览器窗口

> ID：10352236
> 
> 赞同：9
> 
> 时间：2012-04-27T14:11:00.210
> 
> 标签：javascript, jquery, browser, dom-events

加载页面后如何全屏浏览器窗口？我在 jQuery 中使用了如下代码，但它仅使用事件**click**工作；但我希望它能够在**负载**上工作。

```
jQuery(document).ready(function($) {
    function fullScreen(){
            var docElm = document.documentElement;
            if (docElm.requestFullscreen) {
                //alert("requestFullscreen");
                docElm.requestFullscreen();
            }
            else if (docElm.mozRequestFullScreen) {
                //alert("mozRequestFullScreen");
                docElm.mozRequestFullScreen();
            }
            else if (docElm.webkitRequestFullScreen) {
                //alert("webkitRequestFullScreen");
                docElm.webkitRequestFullScreen();
            }

    }
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T14:17:13.253

来自[https://wiki.mozilla.org/Gecko:FullScreenAPI#Suggested_UA_Policy](https://wiki.mozilla.org/Gecko:FullScreenAPI#Suggested_UA_Policy)

> ..requestFullScreen 当窗口已经处于全屏状态时被批准。**否则，用户操作**（例如，非综合输入事件处理程序）之外的requestFullScreen将**被拒绝。**

因此，如果不是由用户操作触发，则无法强制全屏

# node.js - 在路由中的 res.redirect('back') 之后重新加载页面

> ID：10352241
> 
> 赞同：1
> 
> 时间：2012-04-27T14:11:38.090
> 
> 标签：node.js, routes, express, pug

我正在开发一个允许您上传图像和创建相册的应用程序。一切正常，接受创建专辑后新专辑在页面重新加载之前不会显示在客户端中，我不知道如何解决这个问题。

以下是创建相册的路线。在这种情况下，是否有可能使用 res.redirect('back') 以外的其他东西，以便在路由完成后重新加载页面？

当然，我可以首先从加载页面的路径中复制/粘贴代码，但这太干了。也许我可以从这条路线中调用另一条路线？

路线：

```
app.post('/album', function(req, res){

    var newAlbum = new albumModel.Album();

    newAlbum.imageName = req.body.albumPicsName;
    newAlbum.imageId = req.body.albumPicsId;
    newAlbum.title = req.body.albumTitle;

    newAlbum.save(function (err) {
        if (err) {
            console.log(err);
            // do something
            console.trace();
        }
        res.redirect('back');
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-05T01:45:54.483

'back' 是一个别名，`req.get('Referrer')`所以如果 '/albums' 是您的推荐人，您可能仍然会遇到浏览器返回 304（http 未修改）http 状态或浏览器缓存页面（常见）的问题。如果你遇到这个问题，你可以做几件事：

发送一些缓存清除标头：

```
res.header('Cache-Control', 'no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0');
res.redirect('back'); 
```

或者修改网址：

```
 var url = require('url');
 var u = url.parse(req.get('Referrer'), true, false);
 u.query['v'] = +new Date(); // add versioning to bust cache 
 delete u.search;
 res.redirect(url.format(u)); 
```

当然，如果你知道 '/albums' 之类的 url，你不必费尽心思来添加一些版本控制 - 只需将当前时间戳附加到 url 字符串。

第一种方法更清洁，并且在 imo 中效果更好。我已经看到一个页面没有引荐来源网址的情况，即使由于缓存我显然来自另一个页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T23:23:26.707

您应该能够执行 res.redirect('/album') 而不是 back 强制完全重新加载但获得相同类型的反馈。

# windows - Linux Bash 到 Windows 批处理脚本问题

> ID：10352254
> 
> 赞同：0
> 
> 时间：2012-04-27T14:12:17.957
> 
> 标签：windows, linux, bash, batch-file

我是一名 Linux 用户，工作时被迫在 Windows 工作站上工作。我有一个为 bash 编写的脚本，我需要将其转换为 Windows Batch。过去，我没有太多麻烦，但现在我遇到了两个我无法弄清楚的问题。这是原始的 Linux 脚本：

```
#!/bin/bash
if [ $# != 1 ] ; then
    echo "usage: createMavenDirs.sh <name>"
    exit 1
fi
timestamp=`date +"%Y-%m-%d-%s"`
projectName="${1}_${timestamp}"
groupID="com.hostname"
version="1.0"
pomFill="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project>\n\t<modelVersion>4.0.0</modelVersion>\n\t<groupId>${groupID}.${1}</groupId>\n\t<artifactId>${1}</artifactId>\n\t<name>\${artifactId}</name>\n\t<version>${version}</version>\n</project>"

clear

mkdir -p ${projectName}/src/{main/{java,resources,filters,assembly,config,webapp},test/{java,resources,filters},site}
touch ${projectName}/{LICENSE,NOTICE,README}.txt
touch ${projectName}/pom.xml
echo -e ${pomFill} > ${projectName}/pom.xml

tree ${projectName}

exit 0 
```

首先，我想说“是的”，我知道有工具可以做到这一点，但由于工作中非常严格的限制，我必须使用这样的选项。其次，这是我遇到的两个问题。

1.  “mkdir”行：Windows 有没有办法像 Linux 一样做到这一点？

2.  我在其中创建 pom 文件的“回显”行：Windows 能否回显换行符和制表符，并将其重定向到外部文件中，就像我在 Bash 脚本中所做的那样？

就像我说的，我知道还有其他方法可以做到这一点，但是那些力量迫使我走上了这条路。无论如何，感谢所有花时间阅读的人。

祝你有美好的一天 ：-）

更新：我意识到 Windows 确实有“echo”和“mkdir”，但我需要能够以非常特定的方式使用它们，就像我在我的 Linux 脚本中使用它们一样。具体来说，我想创建与我在 Linux 脚本中完全相同的目录，并且我需要将换行符 '\n' 或 '\r' 和制表符 '\t' 回显到外部文件中。

更新 2：我无法安装任何新软件/实用程序/等。到我的工作站上。我必须只使用那里的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T17:37:36.573

@brice 是对的，Windows 上的批处理编程非常疯狂。但我相信你仍然可以让它工作，虽然它不会是一个行到行的等价物。

需要担心的事情：

*   时间戳取决于区域设置。我有法文版，请调整
*   要输出标签，您必须在记事本中插入标签并将它们留在那里。HTML 会吃掉我原始脚本中的标签。
*   如果您将选项卡作为第一个字符回显，则点 (.) 是强制性的
*   我没有找到你从哪里获得工件 ID

据我所知，这个批处理文件和你的原始脚本做同样的事情：

```
@echo off

setlocal

if "%1"=="" (
    echo usage: createMavenDirs.bat ^<name^>
    goto:eof
)

::BEWARE: %date% and %time% are locale dependant, 
::I get 2012-04-27113505,55 YMMV
set timestamp=%date%%time::=%
set projectName=%1_%timestamp:,=%
set groupID=com.hostname
set version=1.0
set artifactId=What_is_this

::Create root dir
md "%projectName%"

::Make everything relative to %projectName%
pushd "%projectName%"

::Generate the pom file
(
echo.^<?xml version="1.0" encoding="UTF-8"?^>
echo.^<project^>
echo.   ^<modelVersion^>4.0.0^</modelVersion^>
echo.   ^<groupId^>%groupID%.%1^</groupId^>
echo.   ^<artifactId^>%1^</artifactId^>
echo.   ^<name^>\%artifactId%^</name^>
echo.   ^<version^>"%version%"^</version^>
echo.^</project^>
) > pom.xml

::Loop unrolling !
md src
    cd src
    md main
        cd main
        md assembly config filters java resources webapp
        cd ..
    md site
    md test
        cd test
        md filters java resources
        cd ..
    cd ..

::This is touch: copy /b LICENCE.txt +,, 
::but it will not create the file. Use this echo trick instead
echo. 2>LICENCE.txt
echo. 2>NOTICE.txt
echo. 2>README.txt

::Leave %projectName%
popd 

::Display dirs and files
tree /a /f "%projectName%"

endlocal 
```

我从来没有在批处理脚本中使用循环展开；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:15:45.877

## 更新后：

> **基本上没有办法用批处理文件来做你要求的事情。**

批处理文件*损坏*。咬紧牙关，使用 Java。（或者使用 Jython 作弊……）

## 原来的：

1.  windows to 的等效命令`mkdir`是`md`or `mkdir`：

    ```
    c:\>mkdir \foo\bar

    c:\>dir
    [...]   foo  [...] 
    ```

2.  `echo`也可以批量购买：

    ```
    c:\>echo some text> Myfile.txt

    c:\>type Myfile.txt
    some text

    c:\> 
    ```

    请注意问题：引号也会出现在您的脚本中。例如，`echo "abcdef"`也会打印双引号。

    据我了解，该`echo`命令不支持制表符转义。

[您可以在此批次参考](http://ss64.com/nt/)中了解更多信息。

顺便说一句，如果可以的话，我建议通过[Cygwin](http://www.cygwin.com/)在 Windows 上运行 bash ......如果你有 Python，那也可能是救命稻草。如果这些选项都不可用，我会为你感到......

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-27T17:44:10.413

您可以使用 cygwin 或 mingw 在 Windows 上运行 bash

# wpf - 插入操作和ValidatesOnDataErrors：控件一显示就报告为无效

> ID：10352257
> 
> 赞同：0
> 
> 时间：2012-04-27T14:12:21.507
> 
> 标签：wpf, validation, mvvm

在 wpf 控件中，例如 TextBox，您可以设置 ValidatesOnDataErrors=true。您还可以更改 UpdateSourceTrigger 的默认值。对于插入操作，文本框的初始值通常为空，因此它的内容应该是无效的，并且会以红色边框呈现（确保您可以使用样式和模板覆盖它并获得您想要的内容）。我希望的行为是仅在用户更改其内容或尝试保存数据时才验证控件的内容。在我看来，实现这一点的唯一方法是设置 UpdateSourceTrigger=Explicit，这对纯 MVVM 不是很友好。我已经阅读了以下文章，但我正在寻找更简单的东西。

[http://www.shujaat.net/2011/01/updatesourcetrigger-explicit-for-mvvm.html](http://www.shujaat.net/2011/01/updatesourcetrigger-explicit-for-mvvm.html)

谢谢菲利波

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:31:56.997

像这样设置 DataErrorValidationRule：

```
<TextBox>
    <TextBox.Text>
        <Binding Path="PropertyName" UpdateSourceTrigger="PropertyChanged">
            <Binding.ValidationRules>
                <DataErrorValidationRule ValidatesOnTargetUpdated="False"/>
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

# android - 在 timertask 中使用 toast

> ID：10352259
> 
> 赞同：3
> 
> 时间：2012-04-27T14:12:34.690
> 
> 标签：android

[在这里](http://ranger1976.blogspot.com/2009/04/cant-make-toast-from-timertask-while.html)发现有人在网上有类似的问题。

这不起作用：

```
Timer t = new Timer(false);
t.schedule(new TimerTask() {
@Override
public void run() {
Toast.makeText(getApplicationContext(), "msg", Toast.LENGTH_LONG).show();
}
}, 5000); 
```

但是如果我在 timertask 之外实例化 toast 然后在里面显示它`run`，它就可以工作。

我觉得可能跟所谓的UI线程有关，

但究竟如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T14:15:40.420

尝试这个

```
Timer t = new Timer(false);
t.schedule(new TimerTask() {
@Override
public void run() {
       runOnUiThread(new Runnable() {
            public void run() {
                Toast.makeText(getApplicationContext(), "msg", Toast.LENGTH_LONG).show();
            }
        });

    }
}, 5000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:17:20.583

使用 Timer 启动一个新线程，我想该线程无权访问`getApplicationContext`. 正确的做法是使用`Handler`和调用`postDelayed`Handler 的方法——它不会启动新线程。

阅读：http: [//developer.android.com/resources/articles/timed-ui-updates.html](http://developer.android.com/resources/articles/timed-ui-updates.html)

您发布的链接有一个工作示例，这是正确的方法：

```
final Context ctx = this;
Handler mHandler = new Handler();

Runnable
makeToast = new Runnable() {
    public void run() {
        Toast.makeText(ctx, "msg", Toast.LENGTH_LONG).show();
    }
};
mHandler.postDelayed(makeToast, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T12:43:17.893

每次启动应用程序时，它都会在 UI 线程（也称为主线程）上启动。

每当您创建一个新线程、计时器或 AsyncTask 时，根据定义，它们都是在创建新线程。不是主线程的线程根本没有修改 UI 的权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-15T07:29:16.537

在 UIThread 上使用 Toast。您可以通过 Handler 或 runOnUiThread

# java - 比较读入文件中的句子 - Java

> ID：10352261
> 
> 赞同：0
> 
> 时间：2012-04-27T14:12:43.463
> 
> 标签：java, file-io, string-comparison

我需要读入一个包含 2 个句子的文件来比较并返回一个 0 和 1 之间的数字。如果句子完全相同，它应该返回 1 表示真，如果它们完全相反，它应该返回 0 表示假。如果句子相似，但单词被更改为同义词或类似的东西，它应该返回 .25 .5 或 .75。文本文件的格式如下：

```
______________________________________
文本：示例

文本 1：那是一个黑暗而暴风雨的夜晚。我一个人坐在红色的椅子上。我并不孤单，因为我养了三只猫。

文本 20：那是一个阴暗的暴风雨之夜。我一个人坐在深红色的椅子上。我并不完全孤单，因为我有三只猫科动物
// 应该得分高点但不是 1

文本 21：那是一个阴暗而暴风雨的夜晚。我一个人坐在深红色的大教堂上。我并不完全孤单，因为我有三只猫科动物
// 应该低于 text20

文本 22：我一个人坐在深红色的大教堂上。我并不完全孤单，因为我有三只猫科动物。这是一个阴暗而暴风雨的夜晚。
// 得分应该低于 text21 但不是 0

文本 24：那是一个黑暗而暴风雨的夜晚。我并不孤单。我没有坐在红色的椅子上。我养了三只猫。
// 应该得 0 分！
________________________________________________

```

我有一个文件阅读器，但我不确定存储每一行​​的最佳方式，以便我可以比较它们。现在我正在读取文件，然后在屏幕上打印出来。存储这些然后比较它们以获得我想要的数字的最佳方法是什么？

```
import java.io.*;

public class implement 
{

    public static void main(String[] args)
    {
        try
        {
            FileInputStream fstream = new FileInputStream("textfile.txt");

            DataInputStream in = new  DataInputStream (fstream);
            BufferedReader br = new BufferedReader (new InputStreamReader(in));
            String strLine;

            while ((strLine = br.readLine()) != null)
            {
                System.out.println (strLine);
            }

            in.close();
        }

        catch (Exception e)
        {
            System.err.println("Error: " + e.getMessage());
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:17:05.327

将它们保存在数组列表中。

```
ArrayList list = new ArrayList();
//Read File
//While loop
list.add(strLine) 
```

**要检查句子中的每个变量，只需删除标点符号，然后用空格分隔并搜索要比较的句子中的每个单词。我建议忽略单词或 2 或 3 个字符。这取决于你的题外话**

然后将这些行保存到数组中并根据需要进行比较。要比较相似的单词，您需要一个数据库来有效地检查单词。又名哈希表。一旦你有了这个，你可以半快速地在数据库中搜索单词。接下来，这个作品哈希表将需要一个词库链接到每个词的相似词。然后为每个句子中的关键词取相似的词，并在您要比较的句子上搜索这些词。显然，在搜索相似词之前，您需要比较两个实际句子。最后，您将需要一个高级数据结构，您必须建立自己来做更多的事情，而不仅仅是直接比较。

# business-rules - JRule 在规则团队服务器中显示各种错误，但在 Rule Studio 中运行良好

> ID：10352265
> 
> 赞同：1
> 
> 时间：2012-04-27T14:13:01.147
> 
> 标签：business-rules, rule-engine, ilog, jrules

当我使用 DVS 进行测试时，我有一条小规则在 Rule Studio 中正常运行。现在我将规则部署到规则团队服务器，并在 RTS 中打开相同的规则。它向我展示了各种错误！我确定错误与代码无关，它是 IBM Jrules ILOG Rule Team Server 中的一些问题或错误。有高手知道这个bug吗？我正在使用 IBM JRules v7.1 的试用版

请参阅下面的附图，它显示了 RTS 中的错误。

![ILOG RTS 错误](../Images/5a150d335f91fc77ef7b5e4e4029a603.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:54:05.407

听起来 BOM 没有部署 :)
如果 JRules 抱怨规则中的每个单词，那么规则项目有问题；如果包含在同一规则项目中，则引用 BOM 或 BOM 本身。
Dbl-chk 并在需要时重新部署 BOM。

唯一的“错误”是部署向导允许您在 RTS 上部署规则项目，即使引用的 BOM 未部署在 RTS 上。这是一个回归“错误”。
因为我认为 6.x 不允许这样做。

我在我的笔记本电脑上使用了 7.1.0 一年多……它就像一个魅力。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T21:58:07.710

我的 Asnwer 听起来像是 Damien 的重复，但我要提一下

1) 请将 BOM 规则项目发布到 Rule Team Server。2）请部署您的其他依赖于此的规则项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-10T01:19:04.320

您可能必须编辑项目依赖项（在管理项目下），并删除项目依赖项（确保在删除后保存）然后再次添加它们。如果这不起作用，请尝试清空缓存。[请参阅Decision Center 和 Rule Team Server (RTS) 中的规则编译错误中](https://developer.ibm.com/answers/questions/173682/compile-errors-on-rules-in-decision-center-and-rul.html)的建议

# android - Android：AssetStream 中缺少数据？（读取 MIDI 数据不准确）

> ID：10352268
> 
> 赞同：1
> 
> 时间：2012-04-27T14:13:12.553
> 
> 标签：android, stream, midi, assets

我想从资产流中读取 MIDI 数据。根据 Windows，该文件是长度为 150 字节的 MIDI0 文件。使用此代码，我读取了按计数测量的 150 个字节，但输出字符串只有 127.5 个字节。

```
 try {
            assetStream = assets.open("MIDI0_7.mid");
            int count=0;
            do {
                byteValue = assetStream.read();
                count++;
                outputString = outputString + Integer.toHexString(byteValue);               
            } while (byteValue > -1) ;
            Log.d("MUSIC", "Final string " +outputString);
            Log.d("MUSIC", "bytes read " +count);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

此读取的 HEX 数据也与 MIDI 规范 AFAICT 不匹配。开头的 8 个字节应为

```
4d 54 68 64 00 00 00 06 
```

但我明白了

```
4d 54 68 64 00 06 
```

我不能确定我的 MIDI 文件的保存格式（从 Cakewalk SONAR 导出的带有 7 个音符的测试文件）所以我不确定为什么 MIDI 不符合标准，但在我解决之前我需要知道我丢失的数据在哪里！看到一些字节从我的输出流中丢失，我做错了什么？

编辑：好的，找到了。Integer.toHexString() 将小于 16 的字节作为单个字符返回，而不是 0x 数字。很容易固定。

# outlook - 如何筛选 Outlook 视图控件中的项目

> ID：10352288
> 
> 赞同：4
> 
> 时间：2012-04-27T14:14:19.900
> 
> 标签：outlook

我想显示使用 Outlook 视图控件过滤到特定主题的 Outlook 收件箱文件夹的内容。我尝试对过滤器和限制参数使用不同的参数（如“Subject”=“Test”、Subject:“Test”等），但它不起作用。显示所有项目。我正在 Outlook 2010 32 位上对其进行测试。

感谢您的建议

示例代码：

```
 <html>
    <head>
    <title>Outlook view filter test</title>
    </head>
    <body topmargin=0 leftmargin=0 scroll=no>
        <OBJECT classid=CLSID:0006F063-0000-0000-C000-000000000046 id=tasks height="30%" width="50%">
            <param name="Folder" value="Inbox">
            <param name="Namespace" value="MAPI">
            <param name="Restriction" value="[subject]:'Test'">
            <param name="Filter" value="[subject]:'Test'">
            <param name="DeferUpdate" value="0">
        </OBJECT>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-30T19:47:50.443

您不想使用`Filter`，如文档所述：

> 表示分布式创作和版本控制 (DAV) 搜索和定位 (DASL) 语句，用于将显示限制为指定的数据子集。读/写

相反，只需使用`Restriction`. 使用`Restriction` `=`方法包含，请参阅文档：[https ://msdn.microsoft.com/EN-US/library/office/ff865641.aspx](https://msdn.microsoft.com/EN-US/library/office/ff865641.aspx)

```
<html>
    <head>
    <title>Outlook view filter test</title>
    </head>
    <body topmargin=0 leftmargin=0 scroll=no>
        <OBJECT classid=CLSID:0006F063-0000-0000-C000-000000000046 id=tasks height="30%" width="50%">
            <param name="Folder" value="Inbox">
            <param name="Namespace" value="MAPI">
            <param name="Restriction" value="[Subject]='Test'">
            <param name="DeferUpdate" value="0">
        </OBJECT>
    </body>
</html> 
```

# macos - 您如何在 OSX 上监控来自 Google App Engine dev_appserver 的 http 流量？

> ID：10352292
> 
> 赞同：0
> 
> 时间：2012-04-27T14:14:34.693
> 
> 标签：macos, http, google-app-engine

我想找出我的 Google App Engine 应用程序向外部网站发出的确切 http 请求。我尝试过 Charles Proxy、TcpCatcher 和 Wireshark，但无法获取开发服务器与外界之间的流量。我可以让浏览器和开发服务器之间的流量正常，但这不是我想要的。我需要什么设置才能监控这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:40:05.750

您应该可以为此使用 charles 或其他任何东西，但您可能（而且我还没有尝试过...）需要指定要在 JVM 上为开发服务器使用的代理。就像是：

```
JAVA_FLAGS=-Dhttp.proxyHost=127.0.0.1 -Dhttp.proxyPort=8888 
```

# linux - 编写持久的 perl 脚本

> ID：10352298
> 
> 赞同：5
> 
> 时间：2012-04-27T14:14:47.317
> 
> 标签：linux, perl, bash, unix

我正在尝试编写一个持久/缓存的脚本。代码看起来像这样：

```
...
Memoize('process_fille');
print process_file($ARGV[0]);
...
sub process_file{
    my $filename = shift;
    my ($a, $b, $c) = extract_values_from_file($filename);
    if (exists $my_hash{$a}{$b}{$c}){
        return $my_hash{$a}{$b}{$c};
    }
    return $default;
} 
```

将在循环中从 shell 脚本调用，如下所示

```
value=`perl my_script.pl`; 
```

有没有办法我可以调用这个脚本以保持它的状态。从一个电话到另一个电话。让我们假设初始化 '%my_hash' 和调用 extract_values_from_file 都是昂贵的操作。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T15:21:06.340

这是一种黑魔法，但您可以在脚本`__DATA__`令牌之后存储状态并将其持久化。

```
use Data::Dumper; # or JSON, YAML, or any other data serializer
package MyPackage;
my $DATA_ptr;
our $state;
INIT {
    $DATA_ptr = tell DATA;
    $state = eval join "", <DATA>;
}

...
manipulate $MyPackage::state in this and other scripts
...

END {
    open DATA, '+<', $0;   # $0 is the name of this script
    seek DATA, $DATA_ptr, 0;
    print DATA Data::Dumper::Dumper($state);
    truncate DATA, tell DATA;  # in case new data is shorter than old data
    close DATA;
}
__DATA__
$VAR1 = {
    'foo' => 123,
    'bar' => 42,
    ...
} 
```

在`INIT`块中，存储文件部分开头的位置`__DATA__`并反序列化您的状态。在该`END`块中，您重新序列化当前状态并覆盖`__DATA__`脚本的部分。当然，运行脚本的用户需要对脚本有写权限。

编辑为使用`INIT`块而不是`BEGIN`块 -`DATA`在编译阶段未设置块。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T14:27:11.057

如果您的示例中的 %my_hash 在其最终初始化状态下大小适中，您可以简单地使用[Storable](http://search.cpan.org/~ams/Storable-2.30/Storable.pm)、[JSON::XS](http://search.cpan.org/~mlehmann/JSON-XS-2.32/XS.pm)或[Data::Dumper](http://search.cpan.org/~smueller/Data-Dumper-2.131/Dumper.pm)等序列化模块之一在运行之间将数据保持为预组装形式。当它不存在时生成一个新文件，并在它存在时从那里重新加载准备好的内容。

此外，您提到您将循环调用此脚本。一个好的策略是不要在循环内立即调用脚本，而是构建一个参数队列，然后在单次执行的循环之后将所有参数传递给脚本。脚本会设置它的环境，然后循环遍历参数来完成简单的工作，而无需为每个参数重做设置步骤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T14:22:24.113

您无法让脚本保持状态。一旦进程存在，任何未写入磁盘的信息都会消失。

不过，您可以通过以下几种方法来完成此操作：

*   编写一个监听网络或 unix 套接字的守护进程。守护程序可以填充`my_hash`和回答从非常简单的`my_script.pl`. 它只需要打开与守护程序的连接，发送问题并返回答案。

*   创建高效的查找文件格式。如果您经常需要这些信息，无论如何它可能会保留在 VFS 缓存中。

*   设置共享内存区域。当您的脚本第一次启动时，您将信息保存在那里，然后再使用它。不过，从 Perl 脚本来看，这可能会很棘手。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:32:48.583

不，不是直接的，但可以通过很多方式实现。

```
1) I understand **extract_values_from_file()** parses given file returning hash.
2) 1 can be made as a script, then dump the parsed hash using **Data::Dumper** into file.
3) When running my_script.pl, ensure that file generated by 2 is later than of the config file. Can achieve this via **make**
3.1) **use** the file generated by 2 to retrieve values. 
```

同样可以通过冷冻/解冻来实现

# javascript - Javascript 中 XSL/XML 加载期间的奇怪错误

> ID：10352299
> 
> 赞同：0
> 
> 时间：2012-04-27T14:14:50.390
> 
> 标签：javascript, xml, servlets, web-inf

我了解 WEB-INF 下的任何资源都不属于公共领域，这是设计使然。
我可以通过在 web.xml 中将其配置为来访问 WEB-INF 下的资源，比如 HTML

```
 <servlet>
    <servlet-name>resourceId</servlet-name>
    <jsp-file>/WEB-INF/resource.xsl</jsp-file>
  </servlet>

  <servlet-mapping>
    <servlet-name>resourceId</servlet-name>
    <url-pattern>/resource.xsl</url-pattern>
  </servlet-mapping> 
```

但是我面临一个奇怪的情况，在客户端使用文档创建 api 即 document.implementation.createDocument 无法发出弃用警告并建议 XMLHttpRequest 。我正在尝试使用此 api 加载和 XSL/XML 文档，如下所示

```
xmlFile = document.implementation.createDocument("", "", null);
xmlFile.async = false;
xmlFile.load("resource.xsl"); 
```

我得到一个警告：

> 不推荐使用 Document.load()。要升级您的代码，请使用 DOM XMLHttpRequest 对象。如需更多帮助[https://developer.mozilla.org/en/XMLHttpRequest](https://developer.mozilla.org/en/XMLHttpRequest) *

但是，如果我将资源直接放在 WebContent 或 WebRoot 文件夹下并为此删除任何 web.xml 配置，它就会顺利运行。我不明白。我在 FF 3.6.5、5.0.1、9、10 上对此进行了测试。请向我解释一下。

我还意识到，在失败期间，即由于放置在 WEB-INF 文件夹中的资源而出现警告时，浏览器确实会成功加载，尽管有警告。Firebug 显示它。但是 XSL 或 XML 加载为 text/html 并且对象 xmlFile 相当空且未填充。如果成功，我会在响应标头中看到 application/xml，并且很好地填充了 xmlFile 对象。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:36:16.880

> *但是 XSL 或 XML 加载为 text/html 并且对象 xmlFile 相当空且未填充。如果成功，我会在响应标头中看到 application/xml，并且很好地填充了 xmlFile 对象。*

显然，当资源`/WEB-INF`由`web.xml`黑客提供并默认为`text/html`. 错误的内容类型解释了您面临的所有 JavaScript 错误。

我将创建一个包装 servlet，它显式设置内容类型并在`doGet()`方法中转发到 XSL 资源：

```
response.setContentType("application/xml");
request.getRequestDispatcher("/WEB-INF/resource.xsl").forward(request, response); 
```

改为如下映射。

```
<servlet>
    <servlet-name>resourceId</servlet-name>
    <servlet-class>com.example.XSLResourceServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>resourceId</servlet-name>
    <url-pattern>/resource.xsl</url-pattern>
</servlet-mapping> 
```

`/WEB-INF/resource.xsl`如有必要，进行设置`<init-param>`，以便您可以定义和配置它，`web.xml`而不是在 servlet 代码中硬编码。

# oracle - 使用 gv$session 判断查询是否挂起

> ID：10352300
> 
> 赞同：8
> 
> 时间：2012-04-27T14:14:51.613
> 
> 标签：oracle, oracle10g

我有一个在 Oracle 中运行的查询，它可能会或可能不会挂起。它现在已经运行了大约 10 个小时，但根据我正在加载的数据量，这可能不是不合理的。

我正在查看 gv$session 中的会话，想知道是否有办法翻译该信息以查看是否真的有任何活动正在进行，或者查询是否卡在等待锁定或以其他方式挂起。

我已经在[此处](http://docs.oracle.com/cd/B19306_01/server.102/b14237/dynviews_2088.htm)阅读了此视图的文档。我主要是从任何有在 Oracle 中调试此类问题的经验的人那里寻找提示。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T14:56:27.717

在`gv$session`中，该`event`列告诉您会话当前正在等待什么等待事件。如果您的会话正在等待另一个会话持有的某种锁，`event`则会告诉您（例如，如果您排队等待锁定另一个会话持有的行，它将是“enq: TX - row lock contention”）并且将使用锁持有者的实例和会话 ID 填充`blocking_instance`。`blocking_session`您还可以查看`seconds_in_wait`（如果`wait_time=0`) 来确定会话在当前等待事件中花费了多少秒。这至少应该告诉您您的会话当前是否“卡住”，但它不会告诉您您的查询是否真的会完成——如果有一个糟糕的计划，那么您完全有可能得到“好”等待磁盘 I/O 等事件表明会话正在执行某些操作，但查询永远不会真正完成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T14:46:26.923

基于一些进一步的研究和 Ollie 的评论，我想出了这些有助于调试问题的查询：

```
select s.sid, 
       s.username,
       s.machine,
       s.osuser, 
       cpu_time,
       (elapsed_time/1000000)/60 as minutes,
       sql_text
from gv$sqlarea a, gv$session s
where s.sql_id = a.sql_id
and s.machine like '####';

select lo.*, 
       a.sql_text
from gv$sqlarea a, gv$session_longops lo
where lo.sql_id = a.sql_id
and lo.sid = ####
order by lo.start_time; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T05:54:06.403

这将有助于检查当前正在运行的会话

```
select a.SID, a.SERIAL#, c.OBJECT_NAME 
from v$session a, v$locked_object b, user_objects c
where a.SID=b.SESSION_ID and b.OBJECT_ID=c.OBJECT_ID 
```

# servlets - 在tomcat 6中为comet servlet禁用输出缓冲

> ID：10352303
> 
> 赞同：1
> 
> 时间：2012-04-27T14:15:37.940
> 
> 标签：servlets, buffer, tomcat6, comet

我使用 comet 和 tomcat 6 将数据推送到客户端。

我想在连接关闭之前接收数据（XMLHttpRequest的就绪状态= 3），问题是tomcat 6在发送数据之前会缓冲数据，所以我需要做一些棘手的事情来实现这一点。

我已将请求内容类型设置为 application/x-javascript 并将 req 内容类型设置为 application/xml （以禁用浏览器缓存）。

我在 tomcat 6 中使用了许多可用选项来禁用缓存（nio 连接器中的 socketBuffer = -1 等....），这适用于我的本地 tomcat 6（在 Windows 操作系统上）（实际上，即使没有修改任何默认选项）。

[但是，与 tomcat 6 相同配置的事件，当我在http://jelastic.com](http://jelastic.com)提供的 tomcat 6 服务器上部署应用程序时，服务器输出缓冲区很大，我必须发送空字节以触发输出写入器刷新（参见以下代码）

byte[] bytes = new byte[event.getHttpServletResponse().getBufferSize()-new Gson().toJson(messagesContent).getBytes().length]; event.getHttpServletResponse().getOutputStream().write(new Gson().toJson(messagesContent).getBytes()); event.getHttpServletResponse().getOutputStream().write(bytes); event.getHttpServletResponse().getOutputStream().flush();

如果除了数据内容之外我不写入字节，则数据不会发送到客户端。这真的很烦人，因为我发送了无用的空字节，并且因为我必须在客户端上管理这些空字节。可怕。

有没有人有办法解决吗 ？如何禁用 comet servlet 输出缓冲区。对我来说似乎很明显，默认情况下应该为彗星 servlet 禁用输出缓冲区。听起来怪怪的。

预先感谢，

Ĵ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:44:55.573

您是否尝试过使用过滤器？ [http://www.oracle.com/technetwork/java/filters-137243.html](http://www.oracle.com/technetwork/java/filters-137243.html)中的自定义请求和响应编程

使用装饰器模式，您可以控制输出。执行此操作的方法是将生成响应的 servlet 传递给替代流。替代流防止 servlet 在完成时关闭原始响应流。

```
class CharResponseWrapper extends HttpServletResponseWrapper {
    private CharArrayWriter output;
    public String toString() {
      return output.toString();
    }
    public ResponseWrapper(HttpServletResponse response) {
        super(response); 
        output = new CharArrayWriter();
    }
    public PrintWriter getWriter(){
        return new PrintWriter(output);
    }

} 
```

所以在过滤器的doFilter方法中你得到原始的PrintWritter，通过包装器

```
PrintWriter out = response.getWriter();
CharResponseWrapper wrapper = new CharResponseWrapper((HttpServletResponse)response);
chain.doFilter(request, wrapper); 
```

然后 Servlet 会将所有输出写入 CharrArrayWritter 中，这样您就可以在字符串中获取输出而无需缓冲

```
wrapper.toString() 
```

然后您可以修改、追加..等，然后使用原始响应输出来编写内容。

```
out.write(wrapper.toString());
out.close(); 
```

# java - 如何将字符串整数签名值转换为 Davik VM 上的 2 字节数组？

> ID：10352304
> 
> 赞同：0
> 
> 时间：2012-04-27T14:15:39.163
> 
> 标签：java, android, dalvik

给定字符串中的整数值，我想将其转换为 2 字节有符号整数。

`BigInteger`完成这项工作，但我不知道如何授予 2 个字节......

```
public void handleThisStringValue(String x, String y){
  BigInteger bi_x = new BigInteger(x, 10);          
  BigInteger bi_y = new BigInteger(y, 10);
  byte[] byteX = bi_x.toByteArray();
  byte[] byteY = bi_y.toByteArray();
} 
```

我注意到`BigInteger.toByteArray()`处理适合我的负值。

然后我需要读取这些值（负值和正值），或者说转换`byte[2]`为`signed int`. 有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:52:42.860

好吧，您的问题仍然缺乏某些信息。

首先，Java 整数是 32 位长的，所以它们不适合 2 字节数组，你需要一个 4 字节数组，否则你实际上是在处理 16 位长的短数据类型。

此外，不确定您是否需要处理任何类型的字节排序（小端、大端）。

无论如何，假设您使用仅适合 16 位和大端字节顺序的整数，您可以执行以下操作来创建字节数组：

```
public static byte[] toByteArray(String number){
    ByteBuffer buffer = ByteBuffer.allocate(4);
    buffer.putInt(Integer.parseInt(number));
    return Arrays.copyOfRange(buffer.array(), 2, 4); //asumming big endian
} 
```

并如下将其转换回来：

```
public static int toInteger(byte[] payload){
    byte[] data = new byte[4];
    System.arraycopy(payload, 0, data, 2, 2);
    return ByteBuffer.wrap(data).getInt(); 
} 
```

您还可以使用该`ByteBuffer.order`方法更改 ByteBuffer 的字节顺序。

我使用它如下：

```
byte[] payload = toByteArray("255");
int number = toInteger(payload);
System.out.println(number); 
```

输出是`255`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:27:25.873

```
int x = bs[0] | ((int)bs[1] << 8);
if (x >= 0x8000) x -= 0x10000;
// Reverse
bs[0] = (byte)(x & 0xFF);
bs[1] = (byte)((x >> 8) & 0xFF); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:39:41.297

你可以反过来：

```
new BigInteger(byteX);
new BigInteger(byteY); 
```

这正是你想要的，然后你可以用`.intvalue()`它作为一个`int`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T10:21:37.663

解决方案很简单，基于我在这里找到的帖子（谢谢大家）：

请记住，我想要一个 2 字节的整数......所以它是一个 Short！

```
String val= "-32";
short x = Short.parseShort(val);
byte[] byteX = ByteBuffer.allocate(2).putShort(x).array(); 
```

......它的工作原理！

然后，我正在使用 BigInteger 来读取它！

```
int x1 = new BigInteger(byteX).intValue(); 
```

或者

```
short x2 = new BigInteger(x).shortValue(); 
```

# boost - boost迭代器外观和dereference()函数

> ID：10352308
> 
> 赞同：9
> 
> 时间：2012-04-27T14:15:43.220
> 
> 标签：boost, boost-iterators, iterator-facade

我正在尝试创建一个迭代器，它只能取消引用实际值类型，而不是引用。这是否可以使用`boost::iterator_facade`，或者它是否需要我拥有可以由地址\引用返回的值。

更具体地说，我的迭代器返回一个`std::pair`引用，这意味着我的迭代器`value_type`没有存储在任何地方，而是在取消引用时动态创建（如`std::map::iterator`）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T12:05:59.593

是的，你想要的都是可能的。请看一下`boost/iterator_facade.hpp`（示例是 1.49.0 版本的 Boost lib，但它的新发行版也可以）：

```
 template <
    class Derived
  , class Value
  , class CategoryOrTraversal
  , class Reference   = Value&
  , class Difference  = std::ptrdiff_t
>
class iterator_facade 
```

模板参数`Reference`是关键。您应该只指定`Reference`从`boost::iterator_facade`. 例如，您的代码可能如下所示：

```
template<typename value_type>
class custom_iterator
    :    public boost::iterator_facade<
             custom_iterator<value_type>,
             value_type,
             boost::forward_traversal_tag,
             value_type
         >
{
    ...
    value_type dereference() const{ return value_type(...); }
    ...
}; 
```

# powershell - 如何在 PowerShell 中“回答”控制台输入提示（在代码中）

> ID：10352323
> 
> 赞同：0
> 
> 时间：2012-04-27T14:16:17.690
> 
> 标签：powershell

我正在使用来自第三方软件供应商的 PowerShell 命令行实用程序。他们的 cmdlet 之一提示输入；但是，我想通过在代码中输入值而不是输入提示来绕过此提示。有没有办法在 PowerShell 脚本中执行此操作？

他们的 cmdlet 是这样的：

设置配置

所以，我试过：

设置配置-配置“废话”

没运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:55:54.503

Hrad 可以通过查看 cmdlet 来判断。通过查看您的代码，我假设有一个 Config 参数，对吗？如果是这样，我也会寻找一个 Force 参数并使用它。通常 thr Force 参数会抑制确认。

# windows - .cab 文件中文件的多个副本

> ID：10352326
> 
> 赞同：1
> 
> 时间：2012-04-27T14:16:32.487
> 
> 标签：windows, windows-installer

如何将文件的重复副本放入cabinet(.cab) 文件中（这两个文件都来自同一来源）？有没有支持这个东西的内阁 API 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:26:46.390

不要认为这是可能的。你为什么要这样做？

# c# - OleDB 和美元符号

> ID：10352328
> 
> 赞同：2
> 
> 时间：2012-04-27T14:16:41.030
> 
> 标签：c#, excel, oledb, worksheet

我管理一个导入 excel 文档的旧应用程序。它已经运行了很长时间，但大约 6 个月前，它停止了工作。在断断续续搜索了几个月的错误之后，我终于发现我需要在`Exceldocument`.

问题是，什么可以改变这个要求？新版本的 Excel？我知道我们从中获取此文档的公司升级了他们的 Office 套件，但我无法确认这是否是问题所在。我们仍然得到`.xls`文件，所以我认为应该是一样的。

Office发生了什么事吗？

提前感谢罗兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:55:42.910

文档的先前版本可能具有与工作表名称匹配的命名范围，*这*就是您之前查询的内容。查询工作表时，`$`后缀是必需的，而且一直都是。

# c# - ASP.NET MVC 3 Razor 视图限制

> ID：10352345
> 
> 赞同：5
> 
> 时间：2012-04-27T14:17:34.960
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

对于我的问题的一般性质，我提前道歉，但我无法从试图在网络上做与我相同的事情的人那里找到任何有用的建议。让我描述一下我的场景：

我通过将视图（使用 Razor）存储在数据库中来为网站的最终用户/设计人员提供自定义视图的能力。我已经完成了所有这些工作，但我的问题如下；从安全的角度来看，我如何确保并强制不需要的代码不会在用户定义的视图中执行？我认为有两种基本方法在概念上可行，但不确定哪一种更可能或更可行。

选项 1：在管理工具中创建允许用户输入视图代码的验证方法。这将需要对允许或不允许的内容采取白名单或黑名单方法。

选项 2：防止在呈现视图时执行不需要的代码。

作为一个需要阻止的快速示例，我们不希望允许访问读取或写入文件、访问任何数据访问功能，甚至访问 web.config 中的配置设置等。可能会有一个相当大的清单，列出可能不应该被允许的事情，但我需要坐下来尽可能多地考虑与安全相关的问题。

那么我的问题是，哪种方法是最好的选择？另外，是否可以提供有关如何进行的任何指示？我认为我可能能够进行基于信任级别的更改，这将是选项 2，但找不到任何方法可以在基于每个视图的庄园中进行这项工作（允许管理代码执行它想要的任何内容）。我认为选项 1 最终将是最好的选择，我将不得不检查某些不应被允许的框架函数的输入。有没有人有做我想做的事情的经验？非常感谢任何反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:20:46.677

这将是极其困难的。

您可以通过 Razor 预处理器运行模板，然后使用 Roslyn（仍处于早期测试阶段）解析生成的文件并查看所有方法调用（或构造函数），如果它调用了您不喜欢的内容，则返回错误。
我强烈建议您为此使用白名单，因为 .Net 框架足够大，您一定会忽略黑名单中的某些内容。

* * *

但是，我建议您根本不要使用 Razor，而是使用不允许真正的 C# 代码的模板引擎。

# sas - 在 sas 中分组

> ID：10352346
> 
> 赞同：3
> 
> 时间：2012-04-27T14:17:41.070
> 
> 标签：sas

我有以下数据集作为输入

```
ID  
--  

1  
2  
2  
3  
4  
4  
4  
5 
```

并且需要一个新的数据集如下

```
ID   count of ID  
--   -----------

1    1  
2    2  
3    1  
4    3  
5    1 
```

您能否告诉如何在 SAS 中使用 PROC SQL 来执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T14:59:42.363

或者 Proc Freq 或 Proc Summary 怎么样？这些避免了必须对数据进行预排序。

```
proc freq data=have noprint;
table id / out=want1 (drop=percent);
run;

proc summary data=have nway;
class id;
output out=want2 (drop=_type_);
run; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T14:26:22.857

```
proc sql noprint;
create table test as select distinct id, count(id)
from your_table
group by ID
order by ID
;
quit; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T14:28:39.520

试试这个：

```
DATA Have; 
 input id ; 
 datalines;
 1
 2
 2
 3
 4
 4
 4
 5 
 ;

Proc Sort data=Have;
 by ID;
run;

Data Want;
 Set Have;
 By ID;
 If first.ID then Count=0;
 Count+1;
 If Last.ID then Output;
Run; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-12T19:56:18.853

```
PROC SORT DATA=YOURS NOPRINT;
  BY ID; RUN;
PROC MEANS DATA=YOURS;
  VAR ID;
  BY ID;
OUTPUT OUT=NEWDATASET N=; RUN; 
```

您还可以选择在新数据集中仅保留 Id 和*N*变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-22T14:06:20.903

我们可以使用简单的 PROC SQL 计数来做到这一点：

```
 proc sql;
 create table want as
    select id, count(id) as count_of_id 
    from have
    group by id;
 quit; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-08T14:12:19.557

这是另一种可能性，通常称为 DoW 结构：

```
Data want;
  do count=1 by 1 until(last.ID);
    set have;
    by id;
    end;
run; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-11-17T11:54:31.470

如果您要进行的聚合很复杂，则仅使用 PROC SQL，因为我们更熟悉 SQL 中的 Group by

```
proc sql ;
create table solution_1 as select distinct ID, count(ID)
from table_1
group by ID
order by ID
;
quit; 
```

或者

*   如果您使用的是 SAS-EG 查询构建器在小型分析中非常有用。

只需拖放您要聚合的列并在摘要选项中选择您要执行的任何操作，例如 Avg、Count、miss、NMiss 等。

# ruby-on-rails - Michael Hartl 的 Ruby on Rails 教程第 8 章中没有路由错误

> ID：10352349
> 
> 赞同：4
> 
> 时间：2012-04-27T14:17:50.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, railstutorial.org

我正在研究 Michael Hartl 的 Ruby on rails。我被困在第[8.1.4](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec%3areviewing_form_submission)节，它使用 Rails 3.2.3 和 Ruby 1.9.3-p125 实现登录页面。

我创建了一个会话控制器，我希望我的会话控制器的`create`操作映射到这个路由`/sessions`，但总是出现路由错误。有什么线索吗？以下是我的相关文件：

路线.rb

```
SampleApp::Application.routes.draw do

  resources :users
  resources :sessions, only: [:new, :create, :destroy]

  root to: 'static_pages#home'

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact' 
end 
```

我的`rake routes`：

```
 users GET    /users(.:format)          users#index
            POST   /users(.:format)          users#create
   new_user GET    /users/new(.:format)      users#new
  edit_user GET    /users/:id/edit(.:format) users#edit
       user GET    /users/:id(.:format)      users#show
            PUT    /users/:id(.:format)      users#update
            DELETE /users/:id(.:format)      users#destroy
   sessions POST   /sessions(.:format)       sessions#create
new_session GET    /sessions/new(.:format)   sessions#new
    session DELETE /sessions/:id(.:format)   sessions#destroy
       root        /                         static_pages#home
     signup        /signup(.:format)         users#new
     signin        /signin(.:format)         sessions#new
    signout DELETE /signout(.:format)        sessions#destroy
       help        /help(.:format)           static_pages#help
      about        /about(.:format)          static_pages#about
    contact        /contact(.:format)        static_pages#contact 
```

我的`app/views/sessions/new.html.erb`：

```
 <%= provide(:title, 'Sign in') %>
  <h1>Sign in</h1>

 <div class="row">
 <div class="span6 offset3">
   <%= form_for(:session, url: sessions_path) do |f| %>

     <%= f.label :email %>
     <%= f.text_field :email %>

     <%= f.label :password %>
     <%= f.password_field :password %>

     <%= f.submit "Sign in", class: "btn btn-large btn-primary" %>
   <% end %>

   <p>New user? <%= link_to "Sign up now!", signup_path %></p>
 </div> 
```

我的会话控制器：

```
class SessionsController < ApplicationController
  def new
  end

  def create
    render 'new'
  end

  def destroy
  end
end 
```

[如图 8.5](http://railstutorial.org/images/figures/initial_failed_signin_rails_3_bootstrap-full.png)所示，登录的 url 为http [://localhost:3000/sessions](http://localhost:3000/sessions)。当我导航到该页面时，

我总是得到一个

```
Routing Error
    No route matches [GET] "/sessions" 
```

## 解决了

图 8.5 显示的是点击创建按钮后的页面，并且 url 从`/sessions/new`或`/signin`变为`/sessions`，所以我上面的文件没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:19:58.737

我认为这是一个错字。您必须按照`http://localhost:3000/sessions/new`路线中的指示导航到。

# maven-2 - 使用 maven2 自动构建 NSIS 脚本

> ID：10352351
> 
> 赞同：3
> 
> 时间：2012-04-27T14:18:02.260
> 
> 标签：maven-2, nsis

我们使用 NSIS 2.46 版开发了一个脚本，该脚本将为 Windows 生成一个安装程序。现在我们希望借助 maven 来自动化生成安装程序的构建过程。

我们目前使用 maven 来构建我们的 java 代码项目和构建我们的最终产品。

为了自动化 NSIS 脚本的构建过程，我无法找到支持 NSIS 脚本构建的 maven 插件信息。

我用谷歌搜索了这些信息，但我没有得到任何关于如何开始的具体信息。

任何人都可以解释如何开始使用它或将我指向一个用示例解释这个的页面吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T06:26:11.010

[从codehaus](http://www.mojohaus.org/)试试这个。

安装或构建“makensis”后，您应该能够将 pom 配置为如下所示：

```
 <!-- Codehause Snapshots - Nsis plugin needs this -->
    <pluginRepository>
        <id>Codehaus Snapshots</id>
        <url>http://nexus.codehaus.org/snapshots/</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
        <releases>
            <enabled>true</enabled>  <!-- Workaround for MNG-2974, see note below -->
        </releases>
    </pluginRepository>

   <!-- NSIS plugin for producing nsis installer -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>nsis-maven-plugin</artifactId>
            <version>1.0-SNAPSHOT</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>generate-project</goal>
                        <goal>compile</goal>
                    </goals>
                    <configuration>
                        <makensisBin>/usr/local/nsis/nsis-2.46/bin/makensis</makensisBin>
                        <setupScript>src/nsis/setup.nsi</setupScript>
                        <outputFile>${project.build.directory}/${project.build.finalName}.exe</outputFile>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

# c - 将 char 指针传递给函数错误

> ID：10352352
> 
> 赞同：0
> 
> 时间：2012-04-27T14:18:10.047
> 
> 标签：c, function, pointers, char

您好，当我尝试将 char 传递给函数时出现错误。这是我的代码。

多变的

```
char *temp; 
```

原型

```
int checkIfUniqueCourseNo(char,int); 
```

称呼

```
checkIfUniqueCourseNo(temp,k); 
```

和我的错误

```
warning: improper pointer/integer combination: arg #1 
```

我是 C 新手，所以对我放轻松:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:18:50.040

您的函数接受`char`; 您正在尝试传入`char*`.

要解决此问题，您需要[*取消引用*](http://en.wikipedia.org/wiki/Dereference_operator)指针以获取它指向的字符，以便您的函数接收它期望的参数类型：

```
checkIfUniqueCourseNo(*temp,k); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:18:58.030

如果函数 excepts `char`，您应该取消引用指针：

```
checkIfUniqueCourseNo(*temp,k);
//                    ^ pass the char addressed by temp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:20:28.557

你的变量是一个`char*`（字符指针），但函数需要一个`char`（不是指针）。

如果要将temp的*内容*`checkIfUniqueCourseNo(*temp, k)`传递给函数，请使用. 如果您确实想传递指针本身，请将函数声明为

```
int checkIfUniqueCourseNo(char*,int); 
```

# azure - Azure 辅助角色中的 WCF 服务在空闲后第一次请求时变慢

> ID：10352363
> 
> 赞同：2
> 
> 时间：2012-04-27T14:18:47.590
> 
> 标签：azure, timeout, python-idle, azure-worker-roles, servicehost

我们有一个 Azure 辅助角色，它通过 ServiceHost 公开 RESTful WCF 服务（使用 System.ServiceModel.Web）。在大流量上的性能是无可指责的，但是当角色空闲一段时间时，第一个请求的响应时间似乎要长得多（超过 5 秒）。有谁知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:21:12.477

默认 AppPool 超时为 20 分钟。你可能会遇到这个？如果是这样，您可以在启动脚本中添加类似这样的内容来更改超时：

```
%windir%\system32\inetsrv\appcmd set config -section:applicationPools -applicationPoolDefaults.processModel.idleTimeout:00:00:00 
```

这是我针对另一个问题发布的[另一个答案](https://stackoverflow.com/a/9583181/272109)，进一步讨论了这个问题。

# iphone - 使用 GData Obj-C 设置 YouTube 视频的隐私

> ID：10352371
> 
> 赞同：2
> 
> 时间：2012-04-27T14:19:02.627
> 
> 标签：iphone, objective-c, ios, cocoa-touch, gdata

我知道我可以将视频设置为“**私人**”，同时将其上传到 Youtube，方法是：

```
GDataYouTubeMediaGroup *mediaGroup = [GDataYouTubeMediaGroup mediaGroup];
[mediaGroup setIsPrivate:YES]; 
```

上传视频时是否有类似的方法将视频设置为“不**公开**”？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T01:14:04.260

由于我没有使用 GData API 的更新版本，首先我必须进行此处列出的更改：

[ [http://code.google.com/p/gdata-objectivec-client/source/detail?r=669](http://code.google.com/p/gdata-objectivec-client/source/detail?r=669) ]

然后我使用以下代码将视频设置为“未列出”，同时将其上传到 Youtube：

```
GDataEntryYouTubeUpload *entry;
entry = [GDataEntryYouTubeUpload uploadEntryWithMediaGroup:mediaGroup
                                                      data:data
                                                      MIMEType:mimeType
                                                      slug:filename];

[entry addAccessControl:[GDataYouTubeAccessControl
                        accessControlWithAction:@"list" permission:@"denied"]]; 
```

确保视频未**设置**为“私人”以使其正常工作：

```
[mediaGroup setIsPrivate:NO]; 
```

从以下方面获得了一些重大帮助：

[ [http://groups.google.com/group/gdata-objectivec-client/browse_thread/thread/da69a5ecbb6dfa42?fwc=1](http://groups.google.com/group/gdata-objectivec-client/browse_thread/thread/da69a5ecbb6dfa42?fwc=1) ]

# centos - 重建 start.sh

> ID：10352372
> 
> 赞同：0
> 
> 时间：2012-04-27T14:19:03.153
> 
> 标签：centos, expect

有人可以根据 CentOS 重新编码这个 start.sh 脚本吗？它现在基于 Ubuntu

```
#!/usr/bin/expect -f
lassign $argv pssword port mod map num hostname rconpassword slots
spawn-fcgi su - et -c cd et -c "./etded.x86 +set s_num=$num +set net_port $port +set dedicated 2 +set fs_game $mod +set logfile 0 +set sv_punkbuster 0 +set sv_hostname \'$hostname\' +set rconpassword $rcon +set g_password '$password' +set sv_maxclients $slots +set map $map"
> /dev/null 2>&1 &
expect "Password:" { send "$pssword\r" }
expect "# " { send "q" }
exit 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:34:17.930

你的期望可能是建立在 Tcl 8.4 之上的，所以改变

```
lassign $argv pssword port mod map num hostname rconpassword slots 
```

至

```
foreach {pssword port mod map num hostname rconpassword slots} $argv {break} 
```

# python - 将 XML 文件中的数据批量加载到 MySQL 的性能

> ID：10352374
> 
> 赞同：3
> 
> 时间：2012-04-27T14:19:03.927
> 
> 标签：python, mysql, xml, xml-import

将 80GB 的 XML 数据导入 MySQL 是否需要 5 天以上才能完成？

我目前正在导入一个大约 80GB 大小的 XML 文件，我正在使用的代码在这个[要点](https://gist.github.com/2161849)中，虽然一切正常，但它已经连续运行了近 5 天，甚至还没有接近完成......

平均表大小大致为：

```
Data size: 4.5GB
Index size: 3.2GB
Avg. Row Length: 245
Number Rows: 20,000,000 
```

如果需要更多信息，请告诉我！

服务器规格：

注意这是一个 linode VPS

英特尔至强处理器 L5520 - 四核 - 2.27GHZ 4GB 总 RAM

XML 示例

[https://gist.github.com/2510267](https://gist.github.com/2510267)

谢谢！

* * *

在对这个问题进行了更多研究之后，这似乎是平均水平，我发现这个[答案](https://stackoverflow.com/a/2811963/1015513)描述了提高进口率的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:50:41.760

有很大帮助的一件事是减少提交频率，而不是每行一次。我建议从每几百行一次提交开始，然后从那里进行调整。

此外，您现在正在做的事情是进行存在性检查——转储；它大大增加了您需要运行的查询数量。相反，使用`ON DUPLICATE KEY UPDATE`（MySQL 扩展，不符合标准）使副本`INSERT`自动执行正确的操作。

Finally, consider building your tool to convert from XML into a textual form suitable for use with the `mysqlimport` tool, and using that bulk loader instead. This will cleanly separate the time needed for XML parsing from the time needed for database ingestion, and also speed the database import itself by using tools designed for the purpose (rather than `INSERT` or `UPDATE` commands, `mysqlimport` uses a specialized `LOAD DATA INFILE` extension).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:12:37.313

这（可能）与您的速度问题无关，但我建议仔细检查 iterparse 的行为是否符合您的逻辑。在开始事件发生时，它可能已经或可能没有加载节点的文本值（取决于它是否恰好适合它解析的数据块），因此您可以获得一些相当随机的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:21:48.707

在没有看到你的代码的情况下，我有 3 条快速建议在尝试类似的事情之后

1.  优化代码以实现高性能[使用 lxml 在 Python 中进行高性能 XML 解析](http://www.ibm.com/developerworks/xml/library/x-hiperfparse/) 是一篇很棒的文章。
2.  看看[pypy](http://pypy.org/)
3.  重写你的代码以利用多个 cpu 的优势，而 python 本身不会这样做

做这些事情极大地提高了我从事的类似项目的速度。也许如果您发布了一些代码和示例 xml，我可以提供更深入的解决方案。（编辑，抱歉错过了要点……）

# php - Twitter OAUTH 返回一个空数组

> ID：10352377
> 
> 赞同：5
> 
> 时间：2012-04-27T14:19:15.120
> 
> 标签：php, oauth, twitter, twitter-oauth

我正在处理 twitter 身份验证，一切似乎都运行良好，直到我得到`getAccessToken`返回`Array ( [ ] => )`。

我做了什么：

1.  第一阶段：

    ```
    $connection = new TwitterOAuth('xxxxxxxx','xxxxxxxx');

    $temporary_credentials = $connection->getRequestToken('http://example.com/profile.php?passurl=1');

    $redirect_url = $connection->getAuthorizeURL($temporary_credentials);

    $_COOKIE['oauth_token'] = $temporary_credentials['oauth_token'];

    $_COOKIE['oauth_token_secret'] = $temporary_credentials['oauth_token_secret'];

    header("Location: $redirect_url"); 
    ```

2.  第二阶段（这是我遇到问题的地方）

    ```
    $connection =
            new TwitterOAuth(
                    'xxxxxxxxxx',
                    'xxxxxxxxxx',
                    $_COOKIE['oauth_token'],
                    $_COOKIE['oauth_token_secret']
                    ); 
    $token_credentials = $connection->getAccessToken(); 
    ```

我打算将`$token_credentials`值保存在数据库中，但它返回一个空数组：`Array ( [ ] => )`

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T19:16:35.453

您是否将“oauth_verifier”传递给 getAccessToken 方法？在您提供的示例代码中，您没有这样做。看看这张图，特别是在 D 部分

![OAuth 图](../Images/631d9e8e79e22afd79bed1000f7cdce7.png)

我过去使用过 twitteroauth，我记得是这样操作的。（开始第二次fase）

```
$twitterOauth = new TwitterOAuth($AppId, $twSecret, $_COOKIE['oauth_token'], $_COOKIE['oauth_token_secret']);
$twToken = $twitterOauth->getAccessToken($_REQUEST['oauth_verifier']);

$newTwitterOauth = new TwitterOAuth($AppId,  $twSecret, $twToken['oauth_token'], $twToken['oauth_token_secret']);
$response  = (array) $newTwitterOauth->get('account/verify_credentials');
var_dump($response); 
```

我会做一些建议：

*   我强烈建议您使用会话来完成这项工作，而不是将这些信息存储在 cookie 中。
*   如果您坚持使用cookies，请使用[setcookie](http://php.net/manual/en/function.setcookie.php)功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:35:59.543

你从哪里得到你的 TwitterOAuth 类？是标准班吗？还是你自己写的？我会尝试调试类本身并将更详细的输出放在类函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:53:27.223

你为什么使用cookies？使用 cookie 存在潜在风险，因为存储在客户端，请改用 SESSION

另一个问题：`$redirect_url`如果你把一个`print_r`和`$_COOKIE['oauth_token']`另一个做成一个，r 是空的？

我问这个是因为如果您通过某些插件（例如 Firefox 中的 webdeveloper）或在浏览器配置中禁用 cookie。也许你在`$_COOKIE['oauth_token']`, 和上使用空值`$_COOKIE['oauth_token_secret']`。

# iphone - iPhone 在主视图中处理模态视图方向变化的最佳方法？

> ID：10352378
> 
> 赞同：0
> 
> 时间：2012-04-27T14:19:34.550
> 
> 标签：iphone, modalviewcontroller, uiinterfaceorientation

我有呈现模态视图的主视图。当设备方向在模态视图中更改，并且模态视图被关闭时，主视图中的控件定位不正确。这在 iOS4 中一切正常，但现在在 iOS5 中我遇到了这些问题。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:23:27.647

在您的 ViewController 的`-viewWillAppear:`方法中，调用您的布局方法。
对我来说，这将是`-layoutViewsForInterfaceOrientation:`我也呼吁的`-willAnimateRotationToInterfaceOrientation:`。

# jquery - 使用 jQuery 的时间表

> ID：10352380
> 
> 赞同：0
> 
> 时间：2012-04-27T14:19:58.257
> 
> 标签：jquery, asp.net

我有一个 jQuery 时间表，用于为工作日分配时间段。我平日的剧本是，

```
<table class="container" id="tabTimetable">
            <tr class="timtebleheader">
                <td></td>
            </tr>
            <tr class="monday">
                <td class="timetableweekday">Monday</td>
            </tr>
            <tr  class="tuesday">
                <td class="timetableweekday">Tuesday</td>
            </tr>
            ...... upto saturday
            ......
</table> 
```

通过使用另一个 div 分配时间，例如 08:00 - 09:00、09:00 - 10:00、10:00 - 11:00 像这样，所以我的表现在分为三列，时间作为列标题. 并将时间分配到表格中

```
var totalCol += 1;
$("#tabTimetable > tbody > tr:gt(0)").append("<td class='timetableslot " + totalCol + "' onclick='selTimeSlot(this);'></td>"); 
```

现在我的桌子是这样的，

![在此处输入图像描述](../Images/2b0ea75bd7e7f2e95a3ced3cbc6b3a40.png)

并且将当前行和列设置为，

```
function selTimeSlot(objCol) {

        var pos   = $(objCol).position();           

        currentCol = $(objCol).parent().children().index($(objCol));
        currentRow = $(objCol).parent().parent().children().index($(objCol).parent()); 
```

如果我单击此处的特定单元格，则会出现一个带有文本框的窗口来搜索员工，并且在自动完成选定的员工项目中，将详细信息绑定到该特定单元格中，例如

```
 select: function (event, ui) {

                var timetableItem = new Object();

                timetableItem.StaffId   = ui.item.id;
                timetableItem.Name      = ui.item.value;
                timetableItem.Photo     = ui.item.image;
                timetableItem.ItemName  = $("#txtItemName").val();
                timetableItem.Row       = currentRow;
                timetableItem.Col       = currentCol;
                timetableItem.From      = slots[currentCol - 1].From;
                timetableItem.To        = slots[currentCol - 1].To;
                timetableItem.WeekDay   = currentRow;
                timetableItem.SectionId = selsection;

                timetable[timetable.length] = timetableItem;

                $("#selItem").hide();
                updateTable(); 
```

我的 updateTable 函数是 function updateTable() {

```
 for (var i = 0; i < timetable.length; i++) {              

            if (timetable[i] != null) {
                var row = $("#tabTimetable > tbody > tr").eq(timetable[i].Row);
                var col = $(row).find("td:eq(" + timetable[i].Col + ")");

                var data = "<div class='timetableslotselected'><table width='100%'><tr><td align='right'><div class='close16' onclick='removeItem(" + timetable[i].Row + "," + timetable[i].Col + ",event)' /></td></tr></table><div><table><tr><td><img src='" + timetable[i].Photo + "' width='32px' height='32px'/></td><td>" + timetable[i].Name + " ( " + timetable[i].ItemName + " )</td></tr></table></div></div> ";

                $(col).html(data);
            } 
```

在这里，当我尝试在不同的行中分配特定数据（每行 1 个数据）时，数据被分配给特定的单元格，这里没问题，但是当我尝试在同一列中分配多个数据时，所有数据都被附加到同一个单元格，如何解决这个问题任何人都可以在这里帮助我......

它是这样来的

![在此处输入图像描述](../Images/909f3a38fd02ae8e494aaaad1d43c177.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:26:27.993

这似乎是在 HTML 中构建表格的问题，因此如果您检查了我对类似布局问题的解决方案可能会有所帮助：

[在表中的表上设置隐藏溢出](https://stackoverflow.com/questions/10027174/setting-hidden-overflow-on-a-table-within-a-table/10027573#10027573)

这是一个相当简单的解决方案，它使可滚动的 div 占据给定的宽度并允许它跨越多个时隙。

[http://jsfiddle.net/aramk/wHEm6/3/](http://jsfiddle.net/aramk/wHEm6/3/)

这将允许您将几个单行事件添加到可滚动槽中，而无需展开表格。

# jquery - 当鼠标向上而不是向下移动时，如何在 jQuery 中使用 e.pageY 来执行事件？

> ID：10352382
> 
> 赞同：0
> 
> 时间：2012-04-27T14:20:01.860
> 
> 标签：jquery

好的，我正在尝试在 jQuery 中创建一个事件，以检测鼠标何时向上移动。我正在使用 e.pageY 事件。所以在这种情况下，我希望在鼠标的 Y 位置小于 2 时发生事件。我已经成功地做到了。这是代码。

```
$(document).mousemove(function(e){ 

    if (e.pageY <= 2){

       $('#mystuff').show();

    });

 }); 
```

现在的问题是当我打开页面并向下移动鼠标时，#mystuff 显示，因为鼠标经过的位置小于 2。

我只希望#mystuff 在鼠标向上移动而不是向下移动时显示。

我希望你明白这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:32:27.307

尝试这样的事情。

```
var mouseLastYPos = null;
$(document).mousemove(function(e){ 
    if(mouseLastYPos){ 
        if (e.pageY < mouseLastYPos && e.pageY <= 2){

           $('#mystuff').show();

        }
    }
    mouseLastYPos = e.pageY;
});​ 
```

工作演示 - [http://jsfiddle.net/bmHbt/](http://jsfiddle.net/bmHbt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:32:23.397

```
$(document).mousemove(function(e){ 
    var prevY = $('#mystuff').attr('data-prevY') || 0;
    if (e.pageY <= prevY){
       $('#mystuff').show();
    }
    else {
        $('#mystuff').hide();
    }
    $('#mystuff').attr('data-prevY', e.pageY);
 }); 
```

使用工作示例检查[此 JSFiddle 。](http://jsfiddle.net/wMxLn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:28:30.533

我认为没有内置方法可以检测鼠标的移动方式，但您可以使用隐藏字段值来解决问题，该值存储鼠标位置并比较先前的位置，如下所示：

```
if ($('#hiddenMousePos').val() > e.pageY){
    //Your code here
}
$('#hiddenMousePos').val(e.pageY); 
```

并将默认值设置`hiddenMousePos`为0。这样它只会在前一个e.pageY大于实际值的情况下进入条件。

# android - Android：方案“http”未在带代理的 ICS 4.0.4 上注册

> ID：10352383
> 
> 赞同：13
> 
> 时间：2012-04-27T14:20:04.670
> 
> 标签：android, apache-httpclient-4.x

我正在将 HttpClient 用于 HTTPS 请求，到目前为止它运行良好。升级到 ICS 后，一些用户报告连接 3G 连接时出现问题。

编辑：他们中的大多数人似乎都在使用代理，我可以使用他们的代理使用 T-Mobile SIM 在本地复制它。

日志有这个堆栈跟踪：

```
java.lang.IllegalStateException: Scheme 'http' not registered.
org.apache.http.conn.scheme.SchemeRegistry.getScheme(SchemeRegistry.java:80)
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:126)
org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465) 
```

我们的端点仅是 HTTPS，因此我们不会故意在 SchemeRegistry 中注册 HTTP 端点。没有任何地方（AFAIK）我们重定向到 HTTP。

下面是为 HTTPS 客户端设置 HttpClient 的代码：

```
 DefaultHttpClient ret = null;

    // sets up parameters
    HttpParams params = new BasicHttpParams();
    HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
    HttpProtocolParams.setContentCharset(params, "utf-8");
    params.setBooleanParameter("http.protocol.expect-continue", false);

    HttpConnectionParams.setConnectionTimeout(params, DEFAULT_CONN_TIMEOUT_MSEC);
    HttpConnectionParams.setSoTimeout(params, timeoutMsec);
    HttpConnectionParams.setStaleCheckingEnabled(params, true);

    SchemeRegistry registry = new SchemeRegistry();
    final SocketFactory sslSocketFactory = getPreferredSSLSocketFactory();
    registry.register(new Scheme("https", sslSocketFactory, 443));

    ThreadSafeClientConnManager manager = new ThreadSafeClientConnManager(params, registry);
    ret = new DefaultHttpClient(manager, params);
    // for preemptive authentication
    // http://dlinsin.blogspot.com/2009/08/http-basic-authentication-with-android.html
    ret.addRequestInterceptor(preemptiveAuth, 0);
    ret.setCookieStore(communalCookieJar);

    SimpleCredentialsProvider credProvider = new SimpleCredentialsProvider(getAccountPreferences());
    ret.setCredentialsProvider(credProvider);

    return ret; 
```

注意：我们在多个线程之间共享这个 HttpClient 实例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T16:01:21.973

从您的堆栈跟踪中，我建议您同时注册（http、https）并查看是否不起作用。

您应该能够通过包含 apache 源 jar 来调试它 - 深入跟踪 @SchemeRegistry.getScheme()。

[这个](https://stackoverflow.com/questions/7622004/android-making-https-request)线程可能会有所帮助。

下面在 ICS 上测试 OK... [androidhttpclient](http://code.google.com/p/httpclientandroidlib/)库上的示例 SSL ConnectionMgr：

```
static X509TrustManager tm = new X509TrustManager() {

        public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException {
        }

        public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException {
        }

        public X509Certificate[] getAcceptedIssuers() {
        return null;
        }
};

MyConnectionManager(SchemeRegistry scheme){
    super(scheme);
}

public static MyConnectionManager getInstance() {
    if (instance == null){

        SSLContext ctx=null;
        try {
            ctx = SSLContext.getInstance("TLS");
            ctx.init(null, new TrustManager[]{tm}, null);
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (KeyManagementException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }                   
        SchemeRegistry schemeRegistry = new SchemeRegistry();
        schemeRegistry.register( new Scheme("http", 80,PlainSocketFactory.getSocketFactory()));
        schemeRegistry.register(new Scheme("https", 443, SSLSocketFactory.getSocketFactory()));
        instance = new MyConnectionManager(schemeRegistry);
         // Increase max total connection to 200
         instance.setMaxTotal(15);
         // Increase default max connection per route to 20
         instance.setDefaultMaxPerRoute(15);
         // Increase max connections for localhost:80 to 50
         HttpHost localhost = new HttpHost("picasaweb.google.com", 443);
         instance.setMaxForRoute(new HttpRoute(localhost), 10);
    }
    return instance;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T19:08:59.337

问题似乎是一些运营商在 4.0.4 更新中推送了无效的代理定义。这破坏了 HTTPS，但 HTTP 正常工作（例如，Google Play 不工作）。

一种可能的解决方法（除了修复无效的代理条目）是在执行 HttpClient 请求时捕获 IllegalStateException 并设置一个标志。此代码将绕过任何代理：

```
 hc = new DefaultHttpClient(manager, params);
    if (BYPASS_PROXY)
        hc.setRoutePlanner(new DefaultHttpRoutePlanner(registry)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T16:14:30.850

我不会创建新的 SchemeRegistry。我会从 ThreadSafeClientConnManager.getSchemeRegistry() 中获取默认值。这样，它可能包含各种已经支持的方案。

http 部分可以来自运营商的代理。

# java - sax xml一次随机显示一项

> ID：10352384
> 
> 赞同：0
> 
> 时间：2012-04-27T14:20:05.603
> 
> 标签：java, android

他正在使用 sax 解析器，而不是列出我想要一次提取一条记录的所有内容。这是我从中提取的 xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
    <title>Conservation Tips</title>
    <link>blah</link>
    <description>Living comfortably during a Memphis summer can be challenging, but it   does not have to be costly. What are some of the easiest ways to stay cool and save?</description>
    <item>
        <title>Have a professional, reputable contractor clean and inspect your air conditioner. This should be done every year, whether you have window or central units.</title>
    </item>
    <item>
        <title>Set the thermostat at 78 degrees or higher for the most energy efficient operation. Each degree below this setting adds 6% to your cooling costs.</title>
    </item>
    <item>
        <title>Check your air conditioner's filter every time you receive your utility bill.</title>
        </item>
    <item>
        <title>Use fans to move the air inside your home. This gives the sensation that it is 5 degrees cooler than the actual temperature.</title>
        </item>
    <item>
        <title>Shade windows on the sunny side of your home.</title>
        </item>
    <item>
        <title>Keep drapes closed or add room-darkening shades to block out the heat from the sun.</title>
        </item>
    <item>
        <title>The outside portion of a central air conditioner is the condensing unit. Keep it clear from dried mud, debris and grass clippings, because it needs to breathe.</title>
        </item>
    <item>
        <title>Use your programmable thermostat to automatically increase the temperature setting at bedtime.</title>
        </item>
    <item>
        <title>Sleep under lightweight bedding and use fans during sleep.</title>
        </item>
    <item>
        <title>Do not place lamps near your thermostat. The thermostat senses the heat produced from the lamp and causes the air conditioner to run longer than necessary.</title>
        </item>
    <item>
        <title>Do not set your thermostat at a colder setting than normal when you turn on your air conditioner. It will not cool your home any faster and could result in excessive cooling and, therefore, unnecessary expense.</title>
        </item>
</channel> 
```

这是我的代码

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    try {
        url = new URL("url");
    } catch (MalformedURLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    RssFeed feed = null;
    try {
        feed = RssReader.read(url);
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    ArrayList<RssItem> rssItems = feed.getRssItems();
    for(RssItem rssItem : rssItems) {
        Log.i("RSS Reader", rssItem.getTitle());
        //Log.i(rssItem.getTitle(), rssItem.getDescription());
        //Log.i("RSS Content", rssItem.getLink());
    }
}} 
```

我想做的是一次随机显示一个项目。我可以把它们都拉出来，但似乎不能一次得到一个。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:54:48.807

据我所知，您不能使用 SAX 解析器进行随机访问。您可以改用 DOM 解析器，它可以为您提供随机访问能力，或者您可以简单地获取所有项目，然后只处理随机选择的一项，即：

```
ArrayList<RssItem> rssItems = feed.getRssItems();

Random rand = new Random(System.currentTimeMillis());

//Pick one at random
Log.i("RSS Reader", rssItems.get(rand.nextInt(rssItems.size())).getTitle(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:24:46.940

您可以将 RssItems 存储在从 1 到 numberOfRssItems 的键的映射中。然后使用随机数生成器生成一个介于 1 和 numberOfRssItems 之间的数字，并使用随机数作为键从映射中获取该记录。

# c - Cocoa 中符合 Unicode 的单字符大写转换（a la towupper）

> ID：10352385
> 
> 赞同：0
> 
> 时间：2012-04-27T14:20:07.863
> 
> 标签：c, cocoa-touch, right-to-left

有一个名为 towupper() 的 C RTL 函数——它在可能的情况下将单个宽字符转换为大写。按照标准，它可能处理也可能不处理国家字母表中的字符。在 Windows 和 Windows CE 上，它确实如此。Windows 还提供了一个 API 函数来达到同样的效果 - `CharUpper`.

在 iOS 上它没有。在 iOS 上，CFString 和 NSString 提供了一个兼容 Unicode 的大小写转换例程，可以对整个字符串进行操作。

问题 - Cocoa 中是否有单个字符转换函数，例如 Windows 上的 towupper() 或 CharUpper()？

是的，我知道这在一般情况下是不可行的（德国党卫军等等）；我的软件在设计上受限于可能的语言。

# php - Restler 中的缓存支持？

> ID：10352387
> 
> 赞同：1
> 
> 时间：2012-04-27T14:20:08.940
> 
> 标签：php, api, caching, rest, restler

我想实现一个宁静的 Web 服务并遇到了 Restler 2.0。

我想知道的是 Restler 是否提供任何缓存支持（服务器端/客户端）。我知道 Restler 的主要目的是让您以一种非常简单的方式以 Rest API 格式公开您的资源。但是，想知道目前是否提供缓存支持或将很快添加到框架中

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:49:20.553

* * *

**更新**：Restler 3 发布时带有缓存支持，可[在此处](https://github.com/Luracast/Restler/tree/v3)获取！

* * *

Restler 2 没有任何缓存支持，但 Restler 3 将支持客户端缓存以及一些启用服务器端缓存的机制。

[您可以在此处](https://github.com/Luracast/Restler/wiki/Restler-3-Status-Report)遵循路线图，并在[此处](https://github.com/Luracast/Restler/issues/22)建议功能

# java - 无法从头开始生成开放文档？

> ID：10352392
> 
> 赞同：1
> 
> 时间：2012-04-27T14:20:55.517
> 
> 标签：java, ms-word, openoffice-writer

我一直在搜索如何使用 Java API（我正在使用 Grails）从头开始生成 Open Office 文档（但 .doc 会很高兴，没有 docx）。无论如何，似乎每种方法都需要一个预先存在的文档才能正常工作。我查看了 javaranch (http://www.coderanch.com/how-to/java/AccessingFileFormats)，但没有任何东西能满足我的愿望。

所以我问你一个问题：真的有可能从头开始生成 .doc 或 .odt 文件吗？因为我发现在代码之外创建文档非常难看。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:58:30.643

OpenOffice.org 的通用网络对象 (UNO)，允许您生成*.doc、* .PDF 以及 OpenOffice 文档。它支持多种编程语言，如：Java、C++、Visual Basic 等。

一些好处是：它免费、开源且独立于平台

您可以构建文档、电子表格、演示文稿等。从头开始或使用模板来填补空白。

为了使用它，您需要包含一些 OpenOffice 套件附带的库。

有用的链接：

*   [打开办公之家](http://www.openoffice.org)
*   [Open Office UNO 开发人员指南](http://wiki.services.openoffice.org/wiki/Documentation/DevGuide/OpenOffice.org_Developers_Guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:29:14.587

首先，确定您所说的“开放式办公室”。要么是“Office Open XML”，这是他们的 XML 文档的*Microsoft*品牌，要么是“OpenOffice”，这是“Libre Office/Open Office/Star Office”套件（以及大约 50 个其他套件）的本机文档格式。

此外，如果您正在搜索有关如何访问文档内部的教程，那么您很可能会找到需要文档存在（以供访问）的说明。

也许搜索程序化文档创建会有所帮助，但如果这不能满足您的需求，您可以注意用于修改文档的库，并查看它们是否提供用于“干净”文档生成的 API。他们中的一个人做的可能性很大，即使它不完整。

对于一般性的答案，抱歉，但它必须是一般性的，从标签列表中，甚至不清楚您打算以哪种文档格式编写。

# firefox-addon - 如何编码我的插件以便 Firefox 知道在哪里检查更新？

> ID：10352394
> 
> 赞同：3
> 
> 时间：2012-04-27T14:21:03.827
> 
> 标签：firefox-addon, auto-update, firefox-addon-sdk

我正在开发一个附加组件，但我无法找到解释如何让 Firefox 知道在哪里查找更新的文档。如果我在我的网站上发布 .xpi 并且用户下载并安装了该 .xpi，Firefox 是否知道检查该 URL 是否有更改？还是我必须在 package.json 中放一些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:14:23.657

您使用的是在线构建器还是 SDK 命令行工具？您只能使用 cfx 工具指定更新 url：

[https://developer.mozilla.org/en-US/Add-ons/SDK/Tools/cfx](https://developer.mozilla.org/en-US/Add-ons/SDK/Tools/cfx)

构建附加组件时，您将`cfx xpi`使用以下参数运行：

```
cfx xpi --update-link https://example.com/addon/latest
          --update-url https://example.com/addon/update_rdf 
```

如果您已经使用 builder 构建了您的附加组件，一个更骇人的选择是下载 xpi，解压缩它，手动编辑 install.rdf，然后重新压缩它。有关 install.rdf 语法的文档，请参阅 MDN：

[https://developer.mozilla.org/en/Install_Manifests](https://developer.mozilla.org/en/Install_Manifests)

# git - 有没有办法获得“git diff”，但只包括来自指定提交者的提交？

> ID：10352395
> 
> 赞同：2
> 
> 时间：2012-04-27T14:21:03.873
> 
> 标签：git

我的代码库中充斥着不符合主流风格的代码，而且都是由一位开发人员实施的。所以我有这一切开始的提交哈希，我可以得到每个人的变化的巨大差异：

```
git diff f997d97b6ab6c9c0a38e793f8350360e85b08f4b 
```

但现在我希望能够将其限制为仅提取某个开发人员创建的提交的差异。我努力了：

```
git diff --committer=example@example.org f997d97b6ab6c9c0a38e793f8350360e85b08f4b 
```

不幸的是，它不起作用。

那么实现这一目标的公认方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:26:28.013

这应该可以解决问题：

`git log -p --author=Name`

# junit - “智能”JUnit 测试排序

> ID：10352399
> 
> 赞同：1
> 
> 时间：2012-04-27T14:21:17.533
> 
> 标签：junit, ant

我想为我的构建添加一些提示，以“首先”运行某些测试，而无需稍后重新运行它们。

1.  只需将类名称添加到我的测试任务的输入参数中的“优先级”字符串中，或​​者

2.  让 JUnit 的测试人员足够聪明地记住/保留失败的测试类名称，以便下次构建器首先运行这些名称。

在 Ant 中这样做最惯用的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:55:50.963

The following tools might help you to achieve the desired JUnit test execution order, but they depend on Eclipse usage:

1.  [Continuous Testing for Eclipse (CT-Eclipse)](http://ct-eclipse.tigris.org/)
2.  [JUnit Max](http://www.junitmax.com/)
3.  [infinitest](http://infinitest.github.com/)

I have not used any of those tools, and I have no Ant-only solution.

You might consider these related posts:

*   [Run JUnit automatically when building Eclipse project](https://stackoverflow.com/questions/1775465/run-junit-automatically-when-building-eclipse-project)
*   [Starting unit tests automatically after saving a file](https://stackoverflow.com/questions/6330099/starting-unit-tests-automatically-after-saving-a-file)

# .net - 为什么不信任所有 http 证书

> ID：10352401
> 
> 赞同：1
> 
> 时间：2012-04-27T14:21:20.683
> 
> 标签：.net, security, ssl

我已经编写了一个资源管理器处理程序，用于为我组织中的几个不同站点提供资源（js/css）。大多数站点是内部站点，但少数站点是外部站点并使用 ssl。QA/Dev 站点没有与证书相同的域名，因此需要我使用回调进行自定义验证。我**知道**我可以做一些事情，比如检查我的环境并仅在不在生产中时返回 true，或者检查域名并在它与我的 qa/dev 域匹配时返回 true。我的问题不是怎么做，而是为什么？为什么接受资源处理程序的所有证书对我来说是不安全的？用户实际上可以做哪些恶意的事情？

```
ServicePointManager.ServerCertificateValidationCallback += ValidateRemoteCertificate;
public static bool ValidateRemoteCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors policyErrors)
{
     return true;//Why not do this?
} 
```

**更新：**认为我可能需要对处理程序的功能进行一些说明。通过此处理程序的所有资源请求都经过哈希处理。处理程序解密请求并通过从程序集中拉取资源或通过对项目自己的本地资源发出请求来提供资源。唯一发生域不匹配的情况是当我的处理程序请求该本地资源时。回想起来，我认为也许我应该以不同的方式处理它，但是关于我最初的问题，我仍然看不到 MITM 攻击如何应用，并且感觉在这种情况下接受所有证书是安全的，但我不是 100%为什么这就是我在这里提出它的原因。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:23:36.877

这违背了 HTTPS 的目的。

如果您接受所有证书，任何人都可以使用自签名证书进行中间人攻击，并且可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:28:17.537

您将容易受到中间人攻击，因为您信任提供给您的任何证书。

*只有当攻击者可以冒充每个端点以使对方满意时，中间人攻击才能成功——这是对（或缺乏）相互身份验证的攻击。*

[http://en.wikipedia.org/wiki/Man-in-the-middle_attack](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:24:43.230

您需要验证与您交换秘密的人的身份，否则他们可能是冒名顶替者。

从客户端到服务器，活跃的 MITM 攻击者可以使用他们自己的证书并将流量中继到真正的站点，而您不会注意到。检查[Security.SE 上的这个问题：*Downside of allowed uncertified Certificates*](https://security.stackexchange.com/a/14089/2435)。

在接受客户端证书时（从服务器的角度来看）。您[仍然会与客户秘密交换数据](https://serverfault.com/a/382782/47187)，但您不会告诉您客户是谁。客户端证书用于身份验证，您可以通过在没有额外验证的情况下允许任何内容来绕过它（并使此步骤无用）。

*编辑（您刚刚补充说它是从服务器端的角度来看的）：*

据推测，您正在做的是接受任何证书，然后将它们包含的名称作为用户的身份。这样做的缺点是您实际上并没有进行任何身份验证：您只是接受了用户声称具有面值的名称。这有点像接受一张写着“我的名字是 X”的纸，而不是检查正式的身份证件（例如护照）。

# android - ProgressBar 在某些设备中未显示

> ID：10352402
> 
> 赞同：6
> 
> 时间：2012-04-27T14:21:22.290
> 
> 标签：android, android-layout, progress-bar

我有以下布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/com.pontai"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.markupartist.android.widget.ActionBar
        android:id="@+id/actionbar"
        style="@style/ActionBar"
        android:layout_marginBottom="3dip"
        app:textStyleActionBar="@style/TextViewStyleHeader"
        app:title="@string/app_name" />

    <com.fb.design.SegmentedButton
        android:id="@+id/main_action_bar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:btnText1="@string/sb_friends"
        app:btnText2="@string/sb_search"
        app:btnText3="@string/sb_summary"
        app:gradientColorOffEnd="@color/segmented_button_off_end"
        app:gradientColorOffStart="@color/segmented_button_off_start"
        app:gradientColorOnEnd="@color/segmented_button_on_end"
        app:gradientColorOnStart="@color/segmented_button_on_start"
        app:gradientColorSelectedEnd="@color/segmented_button_selected_end"
        app:gradientColorSelectedStart="@color/segmented_button_selected_start"
        app:whichButtonIsSelected="0" />

    <View
        android:layout_width="wrap_content"
        android:layout_height="2dp"
        android:layout_marginBottom="3dip"
        android:background="@drawable/gradient_line" >
    </View>

    <LinearLayout
        android:id="@+id/linearLayout7"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/linearLayout4"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/buttonAddFriends"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_input_add"
                android:clickable="true"
                android:height="40dp"
                android:width="40dp" />

            <EditText
                android:id="@+id/search_box"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:hint="@string/type_here_to_filter"
                android:inputType="text"
                android:maxLines="1"
                android:padding="10dp" >
            </EditText>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/loadingPanel"
            style="@style/GenericProgressBackground"
            android:layout_height="match_parent" >

            <ProgressBar style="@style/GenericProgressIndicator" />
        </LinearLayout>

        <ListView
            android:id="@android:id/list"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1" />

        <TextView
            android:id="@id/android:empty"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:paddingLeft="5dp"
            android:text="@string/empty_results" />
    </LinearLayout>
</LinearLayout> 
```

我的 Activity 有一个 AsyncTask 在完成后执行以下操作：

```
((LinearLayout)findViewById(R.id.loadingPanel)).setVisibility(View.GONE); 
```

所以，基本上我有一个 LinearLayout 来保存我的 ProgressBar，当我有我需要的数据时，我将这个线性布局的可见性设置为 GONE。

这在我的 Galaxy Nexus 上有效，但它不适用于我的 API 8 模拟器和 Galaxy S2，使用自定义 ROM。

有没有人见过这个？

我最坏的情况是从 XML 中删除这个带有进度条的线性布局，并在代码中添加一个 ProgressDialog。

问候， 费利佩

**更新**

这就是我定义styles.xml的方式

```
 <style name="GenericProgressBackground" parent="android:Theme">
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">fill_parent</item>
        <item name="android:background">#77ffffff</item>
        <item name="android:gravity">center</item>
    </style>

    <style name="GenericProgressIndicator" parent="@android:style/Widget.ProgressBar.Large">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:indeterminate">true</item>
    </style> 
```

**UPDATE2** 我解决了这个问题

```
 <ProgressBar
                android:id="@+id/progressBar1"
                style="?android:attr/progressBarStyleLarge"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" /> 
```

我添加了来自 android 属性的样式，仅此一项就起作用了……我不知道为什么它不适用于我创建的样式……这很奇怪。

谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-10-02T14:11:30.390

在某些设备上，进度条无法显示，因为设置 -> 开发人员选项 -> 过渡动画比例已关闭。

将此设置切换为 ON（通常为 x 1）将使进度条再次出现。

我想对此有适当的解释，但我没有完整的答案，为什么关闭动画会使进度条不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T14:24:37.673

使用的结果是什么

```
<ProgressBar
        style="@android:style/Widget.DeviceDefault.ProgressBar.Large"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-30T13:34:19.437

当动画关闭时，这可能会在某些设备上发生。再次打开你的动画，你应该会没事的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-26T19:18:56.210

我有同样的问题。我想在 xml 布局文件中的初始屏幕上添加一个进度条，我能够看到屏幕的 Eclipse 预览中显示的进度条，但是当我运行代码时，它是不可见的，这让我为一对夫妇疯狂小时。最后我通过在 FrameLayout 中添加进度条解决了这个问题，在不同的 RelativeLayout 中绘制了启动背景图像，这是 FrameLayout 的下层子级。我的背景图像是 9patch 图像，所以它可能在运行时覆盖了我的进度条。但这是我的解决方案：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/splash" />

    <ProgressBar
        android:id="@+id/progressBar1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginTop="150dp"
        android:visibility="visible" />

</FrameLayout> 
```

希望能帮助到你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-22T20:25:51.613

我在 HTC U11 上遇到了一个奇怪的问题，我们的电池保护程序自动打开，我将其关闭，但仍然没有显示微调器。

然后我完全关闭了开发人员设置，重新启动了应用程序，然后 Spinner 开始出现，希望它对某人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-07T21:32:50.227

我对此的解决方案是从相对布局切换到线性布局。工作得很好。下面的代码希望它有帮助

活动主.xml：

```
 <LinearLayout
        android:id="@+id/leniar"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="0.5"
        android:background="@color/colorPrimary"
        android:baselineAligned="false"
        android:gravity="center"
        android:orientation="horizontal"
        android:weightSum="3">

        <ProgressBar
            android:id="@+id/progressBarlite"
            style="@style/Widget.AppCompat.ProgressBar"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"

            android:gravity="center"
            android:theme="@style/ProgressBarlit" />

        <androidx.swiperefreshlayout.widget.SwipeRefreshLayout
            android:id="@+id/swipeContainer"
            android:layout_width="match_parent"
            android:layout_height="match_parent"

            android:layout_marginTop="0dp"
            android:layout_marginBottom="-1dp"
            android:background="@color/colorPrimaryDark"
            android:visibility="visible">

            <WebView
                android:id="@+id/webview"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_alignParentStart="true"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true">

            </WebView>
        </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>
</LinearLayout> 
```

是的，我也有 WebView 和 SwipeRefreshLayot 但我想你可以复制这段代码并删除这些段。如果想知道如何让进度条显示在屏幕中央：

MainActivity.java：

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

                    setTheme(R.style.AppTheme);
                    setContentView(R.layout.activity_main);

     this.progressBar = findViewById(R.id.progressBarlite);
     mySwipeRefreshLayout = 
       (SwipeRefreshLayout)this.findViewById(R.id.swipeContainer);
     this.webview = findViewById(R.id.webview);

WebViewClientImpl webViewClient = new WebViewClientImpl(this);
                webview.setWebViewClient(webViewClient);

                webview.setVisibility(View.GONE);
                mySwipeRefreshLayout.setVisibility(View.GONE);

 public class WebViewClientImpl extends WebViewClient {

            private Activity activity = null;

            public WebViewClientImpl(Activity activity) {
                this.activity = activity;

            }

            @Override
            public boolean shouldOverrideUrlLoading(WebView View, String url) {

//here i set the domains the webview can browse
                if (url.contains("ur domain"))
                    return false;
                Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
                activity.startActivity(intent);

                return true;

            }

//here i show the progress bar
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                super.onPageStarted(view, url, favicon);
                mySwipeRefreshLayout.setVisibility(View.GONE);
                progressBar.setVisibility(View.VISIBLE);
                webview.setVisibility(View.GONE);

            }

//here i hide the progress bar
            public void onPageFinished(WebView view, String url) {
                super.onPageFinished(view, url);

                progressBar.setVisibility(View.GONE);
                webview.setVisibility(View.VISIBLE);
                mySwipeRefreshLayout.setVisibility(View.VISIBLE);

                if (mySwipeRefreshLayout.isRefreshing()) {
                    mySwipeRefreshLayout.setRefreshing(false);
                }

            }

//here i hide the progress bar and also load a locally saved error messege
            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String url) {
                view.loadUrl("file:///android_asset/error.html");
                progressBar.setVisibility(View.GONE);
                mySwipeRefreshLayout.setVisibility(View.VISIBLE);
                webview.setVisibility(View.VISIBLE);

                if (mySwipeRefreshLayout.isRefreshing()) {
                    mySwipeRefreshLayout.setRefreshing(false);
                }

            }

            public class MediaWebView extends WebView {

                public MediaWebView(Context context) {
                    super(context);
                }

                public MediaWebView(Context context, AttributeSet attrs) {
                    super(context, attrs);
                }

                public MediaWebView(Context context, AttributeSet attrs, int defStyleAttr) {
                    super(context, attrs, defStyleAttr);
                }

                @Override
                protected void onWindowVisibilityChanged(int visibility) {
                    if (visibility != View.GONE) super.onWindowVisibilityChanged(View.VISIBLE);
                }

            }

        }
} 
```

为此，将重力称为进度条和包含它的线性布局的“中心”非常重要

```
<LinearLayout
        android:gravity="center"/>

        <ProgressBar
            android:gravity="center"/>
</LinearLayout> 
```

这是我的styles.xml：

```
<resources>
 <style name="ProgressBarlit" parent="Theme.AppCompat">
        <item name="colorAccent">@color/progressback</item>
        <item name="android:minWidth">32dp</item>
        <item name="android:maxWidth">50dp</item>
    </style>
    <style name="ProgressBardrk" parent="Theme.AppCompat">
        <item name="colorAccent">@color/colorAccentDarkprgress</item>
        <item name="android:minWidth">32dp</item>
        <item name="android:maxWidth">50dp</item>
        <item name="android:minHeight">32dp</item>
        <item name="android:maxHeight">100dp</item>
    </style>

</resources> 
```

希望它有所帮助，我知道它不仅能回答这个问题，但你会在这里找到你的答案

# c# - 使用 * 通配符时 Lucene .net Boost 不起作用

> ID：10352404
> 
> 赞同：9
> 
> 时间：2012-04-27T14:21:23.000
> 
> 标签：c#, .net, lucene, lucene.net

我有两个文档并使用 Luke 进行调查，我已经在代码中确认它具有相同的行为，使用`StandardAnalyzer`.

用 boost 1 记录一个

```
stored/uncompressed,indexed,tokenized<Description:Nummer ett>
stored/uncompressed,indexed,tokenized<Id:2>
stored/uncompressed,indexed,tokenized<Name:Apa> 
```

用 boost 2 记录两个

```
stored/uncompressed,indexed,tokenized<Description:Nummer två>
stored/uncompressed,indexed,tokenized<Id:1>
stored/uncompressed,indexed,tokenized<Name:Apa> 
```

在字段名称中搜索 apa 使用 boost 并以正确的顺序返回。

```
Document 2 has Score 1,1891
Document 1 has Score 0.5945 
```

搜索 ap* 返回无序和相同的分数

```
Document 1 Score 1.0000
Document 2 Score 1.0000 
```

搜索 apa* 返回不分先后，分数相同

```
Document 1 Score 1.0000
Document 2 Score 1.0000 
```

为什么是这样？即使必须使用通配符，我也想返回一些具有更高提升值的文档。这可能吗？

为所有很酷的编码员干杯！

这就是我想要的共犯。

搜索字符串和想要的匹配项。使用通配符。搜索“鲁”+“*”

```
Document
 Name
 City 
```

例如，我希望名称为 Lund 的文档比名称为 Lunt 或 City is Lund 的文档获得更高的评级。这是因为我会知道哪些文件最受欢迎。我想获得带有斯德哥尔摩城市和名称斯德哥尔摩和斯德哥尔摩的文件，但按我的选择订购。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T15:13:04.177

因为`WildcardQuery`是你的一个子类，`MultiTermQuery`你的分数恒定为 1。

如果您检查 的定义`t.getBoost()`：

> t.getBoost() 是查询文本中指定的查询 q 中术语 t 的搜索时间提升（参见查询语法），或者由应用程序调用 setBoost() 设置。请注意，实际上没有直接的 API 用于访问多词查询中的一个词的提升，而是多个词在查询中表示为多个 TermQuery 对象，因此查询中的词的提升可以通过调用子查询 getBoost()

[http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/search/Similarity.html#formula_termBoost](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/search/Similarity.html#formula_termBoost)

一种可能的技巧是设置查询解析器的重写方法：

```
myCustomQueryParser.SetMultiTermRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE) 
```

# linux - 调度 cron Linux

> ID：10352406
> 
> 赞同：-2
> 
> 时间：2012-04-27T14:21:36.147
> 
> 标签：linux, crontab

我想安排一个 cron 每三天在午夜备份一次我的数据库。

那么，这是正确的吗？

```
0 0 */3 * * /usr/bin/mysqldump -hhost_ip -uusername my_db_name -ppassword > my_backup.sql 
```

这个问题之前可能已经问过了，但我只是想确认一下。谢谢。任何帮助都会有巨大的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:26:15.557

不。你想念用户

```
# m h dom mon dow user  command 
```

# javascript - 使用 jQuery 或 Javascript 单击的任何元素的 src 属性发出警报

> ID：10352407
> 
> 赞同：-5
> 
> 时间：2012-04-27T14:21:37.260
> 
> 标签：javascript, jquery

```
<img src="pic1.jpg" class="mythumbs">
<img src="pic2.jpg" class="mythumbs">
<img src="pic3.jpg" class="mythumbs">
<img src="pic4.jpg" class="mythumbs">

<script>
/*
here is the code which makes me when i click on any image, it shows me its src attribute
(without using idTag 'preferred'). 
*/

alert(theAttribute);
</script> 
```

我需要输入一个代码来显示单击项目的 src 属性而不使用 idTags

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:23:39.860

```
$(function(){
  $("img.mythumbs").click(function(){
    alert($(this).attr("src"));    
  });
}); 
```

此代码将提醒所有`img`具有 css 类的元素的 src 属性`mythumbs`

工作样本：http: [//jsfiddle.net/tZcpw/1/](http://jsfiddle.net/tZcpw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:53:58.393

这是一个没有`ID`and的解决方案`Class`。`src`当您单击图像时，这将发出警报。

```
$("img").click(function(){
    alert($(this).attr("src"));    
}); 
```

`$("img")`如果你想用`$(".your_class-here")`一个类来做这个，你可以替换为。

***[这](http://jsfiddle.net/blasteralfred/Ef5t2/)***是一个有效的现场演示。

# multithreading - Delphi 7 + Indy + 多线程客户端

> ID：10352409
> 
> 赞同：0
> 
> 时间：2012-04-27T14:21:39.913
> 
> 标签：multithreading, delphi, client-server, delphi-7, indy

我的 PC 连接到两个使用 TCP 连接发送数据的电子设备。我想开发一个能够记录所有这些数据的 Delphi 程序。在下面的代码中，我使用两个线程创建了两个 TCPClients。我可以使用一个线程从一台设备记录数据，但是当两个线程正在运行时，应用程序会冻结。我没有在 Delphi 中编程的经验，如果有太多错误，请见谅……我正在使用 Delphi 7。我该怎么做才能避免冻结应用程序？

提前致谢

```
//************************************************************************//
type TThreadConn1 = class(TThread)
    private
    protected
        procedure Execute; override;
    end;

type TThreadConn2 = class(TThread)
    private
    protected
        procedure Execute; override;
    end;

var
    Form1: TForm1;
    TCP1: TThreadConn1;
    TCP2: TThreadConn2;
    flag1: bool;
    flag2: bool;

implementation
{$R *.dfm}

//******************************Connection 1******************************//
procedure TThreadConn1.Execute;  //Connect+loop read buffer+disconnect
begin
    Form1.IdTCPClient1.Connect;  
    While flag1 = false do   
        Form1.IdTCPClient1.CurrentReadBuffer;
    Form1.IdTCPClient1.Disconnect;
end; 

procedure TForm1.ButtonConnection1Click(Sender: TObject);
begin
    flag1:=false;
    TCP1 := TThreadConn1.Create(false);  //Launch thread 
end;

procedure TForm1.ButtonDisconnection1Click(Sender: TObject);
begin
    flag1:=true;
    if (TCP1.Terminated = false) then
        TCP1.Terminate;   //Is it ok to finish this way a thread?
    end;

//******************************Connection2******************************//
procedure TThreadConn2.Execute;  //Connect+loop read buffer+disconnect
begin
    Form1.IdTCPClient2.Connect;
    While flag2 = false do   
        Form1.IdTCPClient1.CurrentReadBuffer;
    Form1.IdTCPClient2.Disconnect;
end; { of procedure }

procedure TForm1.ButtonConnection2Click(Sender: TObject);
begin
    flag2:=false;
    TCP2 := TThreadConn2.Create(false);
end;

procedure TForm1.ButtonDisconnection2Click(Sender: TObject);
begin
    flag2:=true;
    if (TCP2.Terminated = false) then
        TCP2.Terminate;
end;
end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:24:30.240

您不需要创建两个单独的线程来做同样的事情。创建一个类，然后实例化它的多个副本。试试这个：

```
type
  TThreadConn = class(TThread)
  private
    FClient: TIdTCPClient;
  protected
    procedure Execute; override;
  public
    constructor Create(AClient: TIdTCPClient);
  end;

var
  TCP1: TThreadConn = nil;
  TCP2: TThreadConn = nil;

constructor TThreadConn.Create(AClient: TIdTCPClient);
begin
  inherited Create(False);
  FClient := AClient;
end;

procedure TThreadConn.Execute;
begin
  FClient.Connect;  
  try
    while Terminated = false do   
      FClient.CurrentReadBuffer;
  finally
    FClient.Disconnect;
  end;
end; 

procedure TForm1.ButtonConnection1Click(Sender: TObject);
begin
  TCP1 := TThreadConn.Create(TIdTCPClient1);
end;

procedure TForm1.ButtonDisconnection1Click(Sender: TObject); 
```

如果 (TCP1 <> nil) 开始，则开始 TCP1.Terminate；TCP1.等待；FreeAndNil(TCP1); 结尾; 结尾;

```
procedure TForm1.ButtonConnection2Click(Sender: TObject); 
```

开始 TCP2 := TThreadConn.Create(IdTCPClient2); 结尾;

```
procedure TForm1.ButtonDisconnection2Click(Sender: TObject);
begin
  if (TCP2 <> nil) then
  begin
    TCP2.Terminate;
    TCP2.WaitFor;
    FreeAndNil(TCP2);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:26:55.107

除了整体设计（您可能会及时修复，可能需要更多帮助）之外，在**TThreadConn2** .Execute 中，您调用 Form1。**IdTCPClient1** .CurrentReadBuffer。

提示：

如果您想使用线程与多个不同的客户端进行通信，请不要将 TidTCPClients 插入表单。这是不灵活的，因为每次您想要添加新客户端时，您都必须将另一个实例插入表单并重新构建。它还需要做很多额外的工作才能让你的应用程序干净地关闭，我向你保证，你不会想要的。

在 TThread 后代 ctor 或“执行”方法的顶部动态创建一个 TidTCPClient 实例。

尝试声明一个可以为每个客户端连接实例化的类，这样您就不必复制/粘贴代码、编辑它并弄错了

哦 - 现在，不要尝试终止线程。事实上，永远不要尝试终止线程。在执行中，围绕 connect() 循环直到成功，然后在循环中读取内容，写入日志（以线程安全的方式）。永远这样做。如果您想停止记录，请设置一个“不记录”布尔值，以便线程仍然运行但根本不打扰调用记录器。再次 - 不要试图终止线程。

如果我周末有机会，我会做一个简单的例子——一个表格，四个 TEdits 用于两对主机名/端口和两个 TMemos 发送数据到服务器并显示来自服务器的数据。

# java - Android NumberPicker 对 Gingerbread 的限制

> ID：10352425
> 
> 赞同：0
> 
> 时间：2012-04-27T14:22:42.637
> 
> 标签：java, android, widget, android-2.3-gingerbread

我有一个数字选择器：

```
 AlertDialog alertDialog = builder.create();
  alertDialog.setTitle("Quantidade");
  NumberPicker NP = (NumberPicker)view.findViewById(R.id.npicker);
  NP.setMaxValue(1000);
  NP.setMinValue(1);
  alertDialog.setButton(...);
  alertDialog.show(); 
```

这在 Android 4.0.x 上运行良好，但在 Android 2.3.x 上我得到

```
java.lang.NoSuchMethodError: android.widget.NumberPicker.setMaxValue 
```

如果我删除`NP.setMaxValue(1000)`and `NP.setMinValue(1)`，它可以工作，但限制设置为 0，有没有办法在 Android 2.3.x 上设置数字选择器限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:33:23.890

根据文档，`NumberPicker`（及其所有方法）仅可从 API 级别 11 (SDK 3.0) 获得。所以如果你想兼容 2.3.x，你需要有自己的实现。[幸运的是这里](http://michaelnovakjr.com/post/9626163011/numberpicker)已经有一个

**编辑**

互联网对上面的链接没有那么温和，它不再可用。甚至评论中建议的替代方案也消失了。你最好自己写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T15:51:05.287

如果您在 Github 上的 AOSP 消息传递应用程序的源代码中查看姜饼发布分支下，有一个由 Romain Guy 编写的 NumPicker，它应该允许您为至少姜饼提供一个 NumberPicker。

如果您将源代码复制到您的项目中，我建议您在自定义 NumberPicker 实例和基于 SDK 版本的框架实例之间动态选择，以便使用基于当前 API 级别的所有新功能和设计。

这是源代码的链接：[https ://github.com/android/platform_packages_apps_mms/blob/gingerbread-release/src/com/android/mms/ui/NumberPicker.java](https://github.com/android/platform_packages_apps_mms/blob/gingerbread-release/src/com/android/mms/ui/NumberPicker.java)

我建议您浏览一下该项目以了解如何使用它。

# django - 如何在 Django 视图中访问 jQuery.ajax() 获取参数

> ID：10352434
> 
> 赞同：2
> 
> 时间：2012-04-27T14:23:26.960
> 
> 标签：django, jquery

我最近开始学习 jQuery，现在我正在玩 .ajax() 函数。

我不知道如何在 Django 中访问 get 参数。

我的代码如下所示：

jQuery & html:

```
<div id="browser">
    <ul>

    {% comment %}
        Theres a script for each ctg. Each script fades out #astream, fades in #stream_loading and then it should display #astream with new values based on the GET param in ajax call
        Prolly it wont work, but first I need to interact with the GET param in my views.py
    {% endcomment %}

    {% for ctg in ctgs %}
        <script type="text/javascript" charset="utf-8">
            (function($) {
                $(document).ready(function() {
                    $("#stream_loading").hide()

                    $("#browse_{{ctg}}").click(function() {

                        $("#astream").fadeOut()
                        $("#stream_loading").fadeIn()

                        $.ajax({
                            type: "GET",
                            url: "/{{defo}}/?param={{ctg}}",
                            success: function() {
                                $("#stream_loading").fadeOut()

                                $("#astream").fadeIn()
                            }
                        });
                    });
                });
            })(jQuery);
        </script>
        <li><a id="browse_{{ctg}}" title="{{ctg}}">{{ctg}}</a></li>
    {% endfor %}
    </ul>
</div>
<div id="astream">
    {{ajaxGet}} #just to see whats rendered
    {% include "astream.html" %}
</div>

<div id="stream_loading">
    loading stream, please wait ...
</div> 
```

姜戈：

```
@https_off
def index(request, template='index.html'):

    request.session.set_test_cookie()

    path=request.META.get('PATH_INFO')
    defo=path[1:path[1:].find('/')+1]
    request.session['defo']=defo
    defo=request.session['defo']

    # build the stream sorted by -pub_date
    import itertools

    chained=itertools.chain(
        model1.objects.order_by('-pub_date').filter(),
        model2.objects.order_by('-pub_date').filter(),
    )

    stream=sorted(chained, key=lambda x: x.pub_date, reverse=True)

    ajaxGet=request.GET.get('param','dummy')

    if request.is_ajax():
        template='astream.html'
        ajaxGet=request.GET.get('param',False)

    renderParams={'defo':defo, 'stream':stream, 'ajaxGet':ajaxGet}

    return render_to_response(template, renderParams, context_instance=RequestContext(request)) 
```

然后我尝试在我的模板中显示它

```
{{ ajaxGet }} 
```

但每次都被渲染为“虚拟”

在萤火虫中，我可以看到使用正确的键和值获取请求。

我在这里想念什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:38:26.887

人们在执行这种 Ajax 时经常遇到一个常见的问题，这并没有阻止链接/按钮的默认操作。因此，您的 Ajax 函数永远没有机会触发，而您在 Django 代码中看到的请求是由正常的页面加载引起的——这就是`is_ajax()`错误的原因。

给`click`处理程序一个参数，`event`，并`event.preventDefault();`在函数结束时调用。

# jquery - 选择单选按钮时，选中并禁用复选框

> ID：10352437
> 
> 赞同：0
> 
> 时间：2012-04-27T14:23:29.607
> 
> 标签：jquery, forms

我还在学习 jquery 但这就是我想要的

如果选择了值为“16”的单选按钮，我希望选中班级通讯的复选框，然后无法取消选中。

如果取消选择值为 16 的单选按钮，我希望能够再次使用该复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:15:40.120

在没有看到您的 HTML 的情况下，我假设一个简单的案例。这里有一些简短的 jQuery 来做你所要求的：

```
$('input[type="radio"]').click(function() {
    $('input.newsletter').attr({
        'checked': $(this).val() == 16,
        'disabled': $(this).val() == 16
    });
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/8J5y9/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:29:56.700

```
$("input[type=radio][name=<your radio button set name here>]").changed( function () {
    if ($("input[type=radio][name=<your radio button set name here>]").val() == "16") {
        $("input[type=checkbox].newsletter").attr('checked', 'checked');
        $("input[type=checkbox].newsletter").attr('disabled', 'disabled'); //this is one way to make it not unselectable
    }
    else {
        $("input[type=checkbox].newsletter").removeAttr('disabled');
    }
} 
```

另一种使其无法被取消选择的方法是在`if`上面的第二行（旁边有注释的那一行）的位置放置`stayChecked = true;`并`stayChecked = false;`放置`$(...).removeAttr('disabled');`. 然后创建另一个函数，如下所示：

```
$("input[type=checkbox].newsletter").changed( function () {
    if (stayChecked) {
        $(this).attr('checked', 'checked');
    }
}); 
```

注意：您应该`var stayChecked`在公共级别上的两个函数之外的某个地方声明（即在脚本级别或在父函数内部，如果它们被声明在内部，比如说，$(document).ready() 函数）。

# jquery - 打开/关闭 Div 覆盖

> ID：10352440
> 
> 赞同：1
> 
> 时间：2012-04-27T14:23:35.697
> 
> 标签：jquery, html, overlay

我目前的剧本有点破。单击表中的链接成功创建了我的 div 覆盖。然后我关闭我的 div 并单击另一个链接，div 覆盖再次打开，关闭按钮停止工作。

我猜问题是在我使用“replaceWith”之后，DOM 无法再次识别我的空 div。

任何帮助，将不胜感激。

```
<table id="tableBin" border="0">
    <tr>
        <th>name</th>
        <th>description</th>
    </tr>
<tbody>
    <tr>
        <td><a href="clip/location/A001C012_111129_R1VL.mov">A001C012_111129_R1VL.mov</a></td>
        <td>Adipiscing elit. Fusce bibendum, leo non.</td>
    </tr>
    <tr>
        <td><a href="clip/location/A001C012_111130_R1VL.mov">A001C012_111130_R1VL.mov</a></td>
        <td>Consectetur adipiscing elit. Fusce bibendum, leo non.</td>
    </tr>
</tbody>

</table>

<div id="overlay">
    <div id="blackOut" class="hide">
        <div id="box" class="hide">
            <div id="controls" class="hide"><a href="#"><img border="0" alt="close" width="25px" hieght="25px" src="images/close.png"></a></div>
        </div>
    </div>
</div>

<script>
    $("#tableBin a").on("click", function(e) {
        e.preventDefault();
        var url = $(this).attr("href");
        var video = jQuery('<embed width="640" height="375" ShowControls=1 src="'+url+'" /></embed>');

        $('#blackOut').removeClass("hide").addClass("blackOut");
        $('#box').removeClass("hide").addClass("box");
        $('#controls').removeClass("hide").addClass("controls");
        $('#box').append(video);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:40:02.920

这似乎有效：

[http://jsfiddle.net/aramk/WesNb/2/](http://jsfiddle.net/aramk/WesNb/2/)

```
$(document).ready(function () {
    $("#tableBin a.video").click(function(e) {
            e.preventDefault();
            var url = $(this).attr("href");
            var video = $('<embed width="640" height="375" ShowControls=1 src="'+url+'" /></embed>');

            $('#overlay').removeClass("hide");
            $('#blackOut').removeClass("hide").addClass("blackOut");
            $('#box').removeClass("hide").addClass("box");
            $('#controls').removeClass("hide").addClass("controls");
            $('#video-container').removeClass("hide").html(video);
        });

        $("#close-button").click(function(e) {
            $('#overlay').addClass("hide");
            $('#video-container').addClass("hide").html("");
            return false;
        });
});
​ 
```

我不确定你是否想替换正在播放的视频，所以我添加了一个容器，每次点击时它的内容都会替换为加载的视频。

此外，单击关闭时，您的原始代码替换了所有内容 - 这是非常具有破坏性且不可维护的。更改 HTML 中的任何内容都意味着更改 JS 中的所有内容（以字符串形式），这非常混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:35:36.877

尝试

```
$("#box img").on("click", function(e) {
        $('#overlay').html('<div id="blackOut" class="hide"><div id="box" class="hide"><div id="controls" class="hide"><a href="#"><img border="0" alt="close" width="25px" hieght="25px" src="images/close.png"></a></div></div></div>');
    }); 
```

反而

# c++ - std::nth_element 和 std::sort 之间的实际区别是什么？

> ID：10352442
> 
> 赞同：27
> 
> 时间：2012-04-27T14:23:37.393
> 
> 标签：c++

我一直在研究 std::nth_element 算法，它显然：

> 重新排列范围 [first,last) 中的元素，使得结果第 n 个位置的元素是排序序列中该位置的元素，其前面的元素没有一个更大，也没有一个它后面的元素比它小。它前面的元素和它后面的元素都不能保证是有序的。

但是，使用我的编译器，运行以下命令：

```
 vector<int> myvector;
    srand(GetTickCount());

    // set some values:
    for ( int i = 0; i < 10; i++ )
        myvector.push_back(rand());

    // nth_element around the 4th element
    nth_element (myvector.begin(), myvector.begin()+4, myvector.end());

    // print results
    for (auto it=myvector.begin(); it!=myvector.end(); ++it)
        cout << " " << *it;

    cout << endl; 
```

总是以与 std::sort 完全相同的方式返回一个完全排序的整数列表。我错过了什么吗？这个算法有什么用？

**编辑**：好的，以下示例使用更大的集合表明存在很大差异：

```
 vector<int> myvector;
    srand(GetTickCount());

    // set some values:
    for ( int i = 0; i < RAND_MAX; i++ )
        myvector.push_back(rand());

    // nth_element around the 4th element
    nth_element (myvector.begin(), myvector.begin()+rand(), myvector.end());

    vector<int> copy = myvector;
    std::sort(myvector.begin(), myvector.end());

    cout << (myvector == copy ? "true" : "false") << endl; 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-27T14:28:59.383

[`std::nth_element`](http://en.cppreference.com/w/cpp/algorithm/nth_element)对整个范围进行排序以实现记录的语义是完全有效的——但是，这样做将无法满足所需的复杂性（线性）。关键是它*可能*会这样做，但不是*必须的*。

这意味着`std::nth_element`可以提早退出——一旦它可以告诉`n'th`你范围的元素将是什么，它就可以停止。例如，对于一个范围

```
[9,3,6,2,1,7,8,5,4,0] 
```

要求它给你第四个元素可能会产生类似

```
[2,0,1,3,8,5,6,9,7,4] 
```

该列表是部分排序的，刚好足以分辨出按顺序排列的第四个元素是`3`.

因此，如果您想回答“哪个数字是第四小的”或“哪个是四个最小的”数字，那么`std::nth_element`您就是朋友。

如果您想按*顺序*获得四个最小的数字，您可能需要考虑使用[`std::partial_sort`](http://en.cppreference.com/w/cpp/algorithm/partial_sort).

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-04T18:48:20.573

std::nth_element 的实现如下所示：

```
void _Nth_element(_RanIt _First, _RanIt _Nth, _RanIt _Last, _Pr _Pred)
{
    for (; _ISORT_MAX < _Last - _First; )
        {   // divide and conquer, ordering partition containing Nth
        pair<_RanIt, _RanIt> _Mid =
            _Unguarded_partition(_First, _Last, _Pred);

        if (_Mid.second <= _Nth)
            _First = _Mid.second;
        else if (_Mid.first <= _Nth)
            return; // Nth inside fat pivot, done
        else
            _Last = _Mid.first;
        }

    _Insertion_sort(_First, _Last, _Pred);  // sort any remainder
} 
```

其中 ISORT_MAX 定义为 32。

因此，如果您的序列超过 32 个元素，它只会对其执行 InsertionSort。因此，您的短序列已完全排序。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-27T14:27:31.907

`std::sort`对所有元素进行排序。`std::nth_elenemt`没有。它只是将第 n 个元素放在第 n 个位置，一侧有较小或相等的元素，另一侧有较大或相等的元素。如果您想找到第 n 个元素（显然）或者如果您想要 n 个最小或最大的元素，则使用它。完整的排序满足这些要求。

那么为什么不直接执行完整排序并获取第 n 个元素呢？因为`std::nth_element`要求复杂度为 O(N)，而复杂度`std::sort`为 O(Nlog(N))。`std::sort`不能满足复杂度要求`std::nth_element`。如果您不需要对范围进行完整排序，则使用它是有利的。

至于你的例子，当我在 GCC 4.7 上运行类似的代码时，我得到了预期的结果：

```
 for ( int i = 0; i < 10; i++ )
    myvector.push_back(rand()%32); // make the numbers small

  cout << myvector << "\n";
// nth_element around the 4th element
  nth_element (myvector.begin(), myvector.begin()+4, myvector.end());
  cout << myvector << "\n";
  std::sort(myvector.begin(), myvector.end());
  cout << myvector << "\n"; 
```

生产

```
{ 7, 6, 9, 19, 17, 31, 10, 12, 9, 13 }
{ 9, 6, 9, 7, 10, 12, 13, 31, 17, 19 }
{ 6, 7, 9, 9, 10, 12, 13, 17, 19, 31 }
               ^ 
```

我使用定制`ostream operator<<`打印出结果的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-27T10:25:39.700

我比较了 std::sort 与 std::nth_element 在随机无符号 long long 的大向量 (512MB) 上运行并取其中间元素时的执行时间。是的，我知道它是 O(N log(N)) 与 O(N)，无论如何我希望 std::nth_element(mid) 的速度大约是 std::sort 的两倍，因为它应该对“排序”大约一半的元素。结果让我有点惊讶，这就是我分享它们的原因：

```
timeSort = 217407 (msec)
timeNthElement = 18218 (msec) 
```

**std::sort 慢了大约 12 倍**

这是我使用的一段代码（它使用的是 windows.h）：

```
#include <windows.h>
#include <string>
#include <iostream>
#include <vector>
#include <algorithm>
#include <iterator>
#include <random>

int main()
{
    static const size_t NUMELEM = 512 * 1024 * 1024;
    static const size_t NUMITER = 3;
    std::vector<unsigned long long> vec1(NUMELEM);
    std::vector<unsigned long long> vec2(NUMELEM);
    std::random_device rd;
    std::mt19937 rand(rd());
    std::uniform_int_distribution<unsigned long long> dist(0, NUMELEM * 2);

    unsigned long long timeNthElement = 0;
    unsigned long long timeSort = 0;

    for (size_t j = 0; j < NUMITER; ++j)
    {
        for (size_t i = 0; i < NUMELEM; ++i)
        {
            unsigned long long val = dist(rand);
            vec1[i] = val;
            vec2[i] = val;
        }
        ULONGLONG t1 = GetTickCount64();
        std::sort(begin(vec1), end(vec1));
        ULONGLONG t2 = GetTickCount64();
        std::nth_element(begin(vec2), begin(vec2)+NUMELEM/2, end(vec2));
        ULONGLONG t3 = GetTickCount64();
        if (vec1[NUMELEM / 2] != vec2[NUMELEM / 2])
        {
            Sleep(0); // I put a breakpoint here but of course never caught it...
        }
        timeSort += t2 - t1;
        timeNthElement += t3 - t2;
    }

    std::cout << "timeSort = " << timeSort << std::endl;
    std::cout << "timeNthElement = " << timeNthElement << std::endl;
    return 0;
} 
```

# python - ElementTree python 命名空间前缀

> ID：10352444
> 
> 赞同：0
> 
> 时间：2012-04-27T14:23:43.260
> 
> 标签：python, namespaces, prefix, elementtree

让我们考虑下面的示例代码：

```
from xml.etree import ElementTree
treexsdr = ElementTree.parse('anyxml.xml')
iter = treexsdr.getiterator()
for element in iter:
    if element.keys():
        for name, value in element.items():
            k2=element.items() 
```

这里 k2 的值将采用元组列表的形式：

```
[("{somenamespace}element","elementValue")... . ] 
```

我不知道它的命名空间前缀，但在这里我们可以假设它：

```
{somenamespace}=abc 
```

那么无论如何我可以得到吗？？？

```
[("abc:element","elementValue")..  .] 
```

在示例中，我只是假设它为“abc”....所以在不知道命名空间前缀的情况下，我可以在相应的命名空间 url 出现的地方应用相同的前缀。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:31:09.880

你可以做

```
for index in range(0, len(k2)):
    k2[index].lstrip('{').replace('}',':') 
```

# python - python minidom创建带有结束标记的xml元素

> ID：10352447
> 
> 赞同：2
> 
> 时间：2012-04-27T14:23:52.427
> 
> 标签：python, xml, minidom

我正在通过 minidom 创建 XML 元素：

```
 ele = doc.createElement("ele")
    main.appendChild(ele)   
    ele.attributes['name']= "bla" 
```

但元素看起来：

```
<ele name="bla"/> 
```

我想要的是：

```
<ele name="bla"></ele> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:31:03.167

这两种形式是等价的。如果您真的想要结束标记，请向元素添加一个空文本节点：

```
>>> ele = doc.createElement('ele')
>>> ele.attributes['name']= "bla"
>>> ele.appendChild(doc.createTextNode(''))
>>> print ele.toxml()
<ele name="bla"></ele> 
```

# jquery-ui - IE 中的 jQuery UI 拖放功能问题

> ID：10352448
> 
> 赞同：1
> 
> 时间：2012-04-27T14:23:54.940
> 
> 标签：jquery-ui

我正在开发一个利用 jquery UI 实现拖放功能的 Web 应用程序。

仅在 IE 浏览器中存在一个奇怪的问题。当用户将一个项目放入容器中时，该项目会添加到容器中，但也会在页面上留下它的残余部分。

这是一个有效的[演示](http://www.6ft.me/uxvnbRC)。

1.  将项目从左列拖到黄色字段以创建容器。

2.  将第二个项目添加到新创建的容器中。

是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:05:51.923

这发生在 IE8 及更低版本中。

错误是：

> SCRIPT5007：无法获取属性“选项”的值：对象为空或未定义 jquery-ui.min.js，第 105 行字符 158

那条线是：

```
var a=d(this).data("draggable").options; 
```

他们使用的 jQuery UI 版本是 1.8.11。

我建议升级到[最新版本](http://www.asp.net/ajaxlibrary/cdn.ashx#jQuery_UI_Releases_on_the_CDN_1)的 jQuery UI，看看是否能解决您的问题。

如果没有，您可能希望创建一个测试用例[并将其作为 bug 提交给他们](http://bugs.jqueryui.com/newticket)。

# c++ - 从 std::string 构造 CString - 复制字符或指针

> ID：10352455
> 
> 赞同：2
> 
> 时间：2012-04-27T14:24:13.887
> 
> 标签：c++, mfc, cstring, stdstring

如果我将 a 转换`std::string`为 a`CString`使用类似的东西：

```
std::string ss("Foo");
CString cs( ss.c_str() ); 
```

是`CString`复制字符`ss`还是简单地复制`char*`指针？

我对`c_str()`函数的理解是，它返回一个指向`std::string`. 因此，在`CString`内部使用 this 似乎是一个非常糟糕的主意，因为它们中的任何一个上的任何非常量方法都会使另一个持有的指针无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:27:22.417

接受 a的`CString`构造函数`const char*`会将数据复制到其内部结构中。这和这样做是一样的：

`CString test = "This is a test"` 甚至这个 `CString test("This is a test")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:29:37.137

[文档](http://msdn.microsoft.com/en-us/library/aa314317%28v=vs.60%29.aspx)说字符串将被复制，因此它不会直接操作 std::string 缓冲区。

> CString(LPCSTR lpsz);
> 
> lpsz - 要复制到此 CString 对象中的以 null 结尾的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:27:46.437

CString 构造函数的文档[（链接）](http://msdn.microsoft.com/en-us/library/cws1zdt8.aspx)说：

> 构造函数将输入数据复制到新分配的存储中。

因此，必须复制您的数据。

# c# - 字符编码在本地工作而不是现场

> ID：10352457
> 
> 赞同：1
> 
> 时间：2012-04-27T14:24:34.370
> 
> 标签：c#, asp.net, character-encoding, http-headers, content-type

我正在从数据库中返回一些数据，这些数据是使用许多不同的方法输入的，通常是从 word 中复制和粘贴的。

我没有尝试手动对每个最后一个字符进行 HtmlEncode 编码，而是使用页面上的内容类型来加载不同的字符集。目前我没有做任何事情来覆盖任何默认的内容类型。如果我在本地运行，内容类型显示为 utf-8 并且出现“外来”字符。上传后，内容类型以 ISO-8859-1 形式返回，“外来”字符显示为问号（两种类型......）。

然后我覆盖了使用返回的字符集`Response.Charset = "utf-8";`，尽管响应标头正确显示了 utf-8，但我仍然得到问号来代替正确的字符。请看下面的图片：

**本地页面**

![本地页面，所有字符都正确显示](../Images/847a8dd44ad4ef52ccc7adb36f214627.png)

**本地页眉**

![本地页眉](../Images/28e5ace777ee71f9ac6f81df71de30a5.png)

**外部页面（注意两种问号）**

![外部页面，注意两种错误问号](../Images/018f972aec3569b233a848d29de91883.png)

**外部页眉**

![外部页眉](../Images/c361834a8bbb1cfdb402881a811f029d.png)

我已经关注了[http://htmlpurifier.org/docs/enduser-utf8.html](http://htmlpurifier.org/docs/enduser-utf8.html)但除了需要 UTF-8 之外，我找不到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:36:57.370

解决了。仍然不完全确定一切是如何工作的，但我会解释我做了什么。

尽管标题说内容类型是 UTF-8，但这并没有解决问题。正如 Oded 所暗示的那样，我在 IIS > .Net Globalization 中发现了两个设置为 ISO-8859-1 的设置（请求和响应）。

将这些更改为 UTF-8 解决了这个问题。

至于为什么，我不确定，因为标题似乎是一样的，所以如果有人能解释发生了什么，那就太好了。

# php - APC：apc_fetch 经常返回 false，但有时会成功

> ID：10352458
> 
> 赞同：2
> 
> 时间：2012-04-27T14:24:36.473
> 
> 标签：php, caching, apc, litespeed

*   APC 版本：3.1.9。
*   PHP版本：5.2.17
*   我使用 Litespeed
*   默认 PHP：5
*   PHP4 SAPI: cgi
*   PHP5 SAPI：dso
*   SUEXEC：启用

我创建了 2 个文件。第一个文件，设置 apc var ：

```
<?php
$bar = 'BAR';
apc_store('foo_test', $bar);
echo 'stored';
?> 
```

第二个文件，尝试获取 apc var ：

```
<?php
var_dump(apc_fetch('foo_test'));
?> 
```

我访问了第一个文件，一切都很好。我打开第二个文件，我刷新了几次，通常（几乎 90%），它返回 false。并且很少返回正确的响应。

这是我的 APC 设置。

```
apc.cache_by_default    1
apc.canonicalize    1
apc.coredump_unmap  0
apc.enable_cli  1
apc.enabled 1
apc.file_md5    0
apc.file_update_protection  2
apc.filters 
apc.gc_ttl  3600
apc.include_once_override   0
apc.lazy_classes    0
apc.lazy_functions  0
apc.max_file_size   20M
apc.mmap_file_mask  
apc.num_files_hint  1000
apc.preload_path    
apc.report_autofilter   0
apc.rfc1867 0
apc.rfc1867_freq    0
apc.rfc1867_name    APC_UPLOAD_PROGRESS
apc.rfc1867_prefix  upload_
apc.rfc1867_ttl 3600
apc.serializer  default
apc.shm_segments    1
apc.shm_size    512M
apc.slam_defense    1
apc.stat    0
apc.stat_ctime  0
apc.ttl 0
apc.use_request_time    1
apc.user_entries_hint   4096
apc.user_ttl    7200
apc.write_lock  1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:47:49.097

我的猜测是 Litespeed 正在使用 FastCGI 运行 PHP。所以它产生了一些子进程，然后在它们之间分派请求。问题是APC*可能*将数据存储在堆内存中（而不是在共享内存中），因此每个 FastCGI 实例都有自己的 APC 数据。一个实例中的数据在其他实例中将不可见。您在实例#1 中设置数据，但随后您的获取请求转到实例#2、实例#3...，然后您得到FALSE。当您点击实例 #1 时，您将收到保存的值。

编辑：使用`--disable-apc-mmap`（禁用 mmap 支持并改用 IPC shm）编译 APC 模块应该可以解决问题。

# iphone - 从相册照片中获取带有元数据的照片文件

> ID：10352460
> 
> 赞同：0
> 
> 时间：2012-04-27T14:24:41.983
> 
> 标签：iphone, ios, uiimage

可以从带有元数据 (IPTC) 的相册照片中检索照片文件吗？
我试过 UIImagePickerController 来获取 UIImage ，当我将它保存到文件时，它不包含任何元数据信息。
有没有办法使用 ALAsset 库获取原始照片文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:52:10.400

我找到了 AssetsLibrary 的解决方案：

```
- (void)savePhoto:(NSURL*) url <br
{
    NSString *applicationDocumentsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    ALAssetsLibrary *assetLibrary=[[ALAssetsLibrary alloc] init];
    [assetLibrary assetForURL:url resultBlock:^(ALAsset *asset) {
        NSString* originalFileName = [[asset defaultRepresentation] filename];
        NSString *path = [applicationDocumentsDir stringByAppendingPathComponent:originalFileName];
        ALAssetRepresentation *rep = [asset defaultRepresentation];
        Byte *buffer = (Byte*)malloc(rep.size);
        NSUInteger buffered = [rep getBytes:buffer fromOffset:0.0 length:rep.size error:nil];
        NSData *data = [NSData dataWithBytesNoCopy:buffer length:buffered freeWhenDone:YES];
        //NSLog(@"%@",data);
        [data writeToFile:path atomically:YES];
    } failureBlock:^(NSError *err) {
        NSLog(@"Error: %@",[err localizedDescription]);
    }];
} 
```

# c# - ReadOnlyList 作为两个列表的组合

> ID：10352462
> 
> 赞同：0
> 
> 时间：2012-04-27T14:24:51.623
> 
> 标签：c#

我的班级有两个列表，我想再公开一个列表作为 ReadOnlyCollectoin，它是两个列表的组合。

我正在寻找实现这一目标的最佳方法。到目前为止，我有两个选择

选项1

```
 public ReadOnlyCollection<Item> AllItems
    {
        get
        {
            var list = new List<Item>();
            list.AddRange(List1);
            list.AddRange(List2);
            return list.AsReadOnly();

        }
    } 
```

选项 #2

制作我的两个列表 ObservableCollections 并且每次修改它们时，修改第三个私有列表。然后将第三个列表公开为 ReadOnlyCollection。

可能我在这里遗漏了一些微不足道的东西。必须有更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:31:09.937

取决于应用程序中调用 AllItems 的频率以及这两个列表的大小。

如果这些集合很小并且很少调用 AllItems，那么 Option1 就足够了。

如果这些列表将快速增长并且经常使用 AllItems，则 option2 是最佳选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:26:41.483

您的选项#1 对我来说似乎是一个很好的解决方案。

您没有遗漏任何“微不足道的东西”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:36:41.967

通过实现 IList 并访问 List1.Concat(List2)，您可以编写自己的 ReadOnlyCollection 版本，该版本不会复制列表。但是，这对于您的目的来说可能是多余的。

# android - 如何从日、月、年、小时和分钟获取 13 位数字（纪元时间）的日期和时间？

> ID：10352464
> 
> 赞同：0
> 
> 时间：2012-04-27T14:25:00.953
> 
> 标签：android, date, time

我正在开发一个应用程序，其中我从类似的对话框中获得了日期和时间。我有所有这些整数类型的变量。现在我必须将所有变量转换为纪元时间。这对我来说非常重要。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:41:12.343

您可以使用[Calendar Class](http://developer.android.com/reference/java/util/Calendar.html)，您必须实例化一个新的 Calendar 对象，设置 MONTH,DAY,YEAR,HOUR,MINUTE 和 SECOND 然后使用 getTime() 方法。

```
Calendar cal = Calendar.getInstance();
    cal.set(Calendar.YEAR, year);
    cal.set(Calendar.MONTH, month);
    cal.set(Calendar.DAY_OF_MONTH, day);
    cal.set(Calendar.HOUR, hours);
    cal.set(Calendar.MINUTE, minute);
    int epoch_time = (int) cal.getTimeInMillis()/1000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:51:49.930

使用日历：

```
Calendar c = Calendar.getInstance();
c.set(year,  month-1, date, h, min, sec);
long t = c.getTimeInMillis(); 
```

# java - 将我的休眠 Dao 层移植到独立的 Java 应用程序中？

> ID：10352467
> 
> 赞同：1
> 
> 时间：2012-04-27T14:25:13.793
> 
> 标签：java, spring, hibernate, spring-mvc

我有一个使用 Hibernate 的 spring mvc 应用程序。我在我的 Dao 方法中使用 sessionFactory.getCurrentSession（不支持休眠）。

我想知道的是，我必须做什么才能在非 Web 应用程序中使用我的休眠数据库层？

**我有一个独立的java应用程序（通过main运行），我以编程方式加载spring的应用程序上下文，然后获取我的服务层（这取决于我的hibernate db层）。我需要在我的 spring.xml 文件中做任何特别的事情来设置休眠的会话吗？**

在我的 spring mvc web 应用程序中，我确实使用 @Transactional 注释对我的 Dao 方法进行了注释。（我希望在每次调用的基础上进行交易，而不是一组数据库调用）。

PS 在我的网络应用程序中，会话是如何创建/销毁的，是每个请求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:30:39.080

`ApplicationContext`您可以从**main**方法中获取弹簧。它的行为与网络中的行为完全相同。

```
ApplicationContext context = new  ClassPathXmlApplicationContext("applicationContext.xml");
YourDAO yDao = (YourDAO)context.getBean("yourDAO");
yDao.callYourSpecialMethod(); 
```

因此，从这一点来看，hibernate 没有依赖关系，它应该会自动工作。这里只是视图发生了变化，没有逻辑或结构变化。所以交易和其他事情应该像往常一样工作。

# caching - Azure - 为多实例减慢 Windows Azure 缓存的替代方法

> ID：10352468
> 
> 赞同：0
> 
> 时间：2012-04-27T14:25:22.937
> 
> 标签：caching, azure, azure-storage

我们目前将现有的 Web 应用程序移至 Azure。Azure 缓存[非常慢](https://stackoverflow.com/questions/8754964/poor-performance-with-azure-cache)。

Azure 中的多实例是否有任何***替代缓存机制***（比 Azure 缓存更好）？例如，将缓存存储在 Azure 存储或 Azure SQL 中。

谢谢您的意见！

***添加***

```
public class AzureCacheService : ICacheService
{
    readonly DataCacheFactory _factory = new DataCacheFactory();

    private readonly DataCache _cache;

    public AzureCacheService()
    {
        _cache = _factory.GetDefaultCache();
    }

    public object Get(string key)
    {
        return _cache.Get(key);
    }

    public void Insert(string key, object obj)
    {
        if (obj != null)
        {
            _cache.Put(key, obj, new TimeSpan(3, 0, 0));
        }
    }

    public void Remove(string key)
    {
        _cache.Remove(key);
    }
}

*** Accessing *** 
IoC.Resolve<ICacheService>().Insert(key, MyObject);

IoC.Resolve<ICacheService>().Remove(key); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:39:09.523

一般来说，WA 缓存*并不*慢，特别是如果您打开“本地缓存”（只要数据适合内存，通常应该将延迟降低到 0 毫秒左右）。Memcached 是另一种可能性：http: [//blog.smarx.com/posts/memcached-in-windows-azure](http://blog.smarx.com/posts/memcached-in-windows-azure)。

您不会发现 WA Caching 和 Memcached 在性能上存在数量级的差异，但根据我的经验，Memcached 的速度要快一些。不过， Memcached*将无法*击败 WA Caching 中的“本地缓存”功能，因为它实际上没有延迟。（这是没有序列化的进程内数据访问。尽可能高效。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:26:01.867

我误解了 Windows Azure 缓存是基于 SQL Azure 的，在获取正确的资源后，我能够验证它确实是内存缓存。因此，如果您决定使用 SQL Azure 编写自己的代码，那么您现在已经获得的速度会慢得多，Azure 表存储也是如此。[其余评论已删除]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:09:27.207

您可以使用最近发布的 Windows Azure 缓存（预览版）。它比共享缓存对应物有 5 倍的改进。

链接： http: [//www.windowsazure.com/en-us/develop/net/how-to-guides/cache/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)

# php - YII 框架的奇怪（对我而言）行为

> ID：10352469
> 
> 赞同：0
> 
> 时间：2012-04-27T14:25:24.060
> 
> 标签：php, yii

我使用 YII 框架，我需要回显使用类中的方法生成的查询，正如文档中所述，该方法位于 framework/db/ar/CActiveRecord.php 中`insert($attributes=null)`。`CActiveModel`

好吧，我的任务并不难，所以我打开了这个文件并编辑了这个方法，但什么也没发生。在一阵头疼之后，我发现我的应用程序正在从我首先下载 YII 的文件夹中导入这个类。

这种行为的原因可能是什么？我已经通过改变路径解决了我的问题，但我想知道，这是一个好的解决方案吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:29:01.293

它`index.php`在你告诉你的应用程序在哪里找到框架的类的地方，所以这就是你应该编辑的行。

```
// change the following paths if necessary
$yii=dirname(__FILE__).'/../yii/framework/yii.php'; 
```

# titanium - Appcelerator Titanium V8 运行时在 C2DM 接收时处理

> ID：10352470
> 
> 赞同：0
> 
> 时间：2012-04-27T14:25:24.340
> 
> 标签：titanium, android-c2dm, v8

我已经成功地在我的项目中包含了一个[C2DM 模块](https://github.com/Kuraturpa/titanium-c2dm)（Android 的云到设备消息传递框架），并且能够成功注册和接收 Android 推送通知。但是，我注意到每隔一段时间，当我发送通知时，新通知不会显示在设备上。今天，我插入我的设备并使用 adb logcat 并注意到 IntentService[c2dmBaseReceiver] 实际上被触发并且它收到了我发送的消息，但是回调函数不是因为 V8 运行时已被释放（请参阅以下行来自日志猫）

```
D/C2DMReceiver( 1069): (IntentService[C2DMBaseReceiver]) [369956,441456] Message received
D/C2DMReceiver( 1069): (IntentService[C2DMBaseReceiver]) [1,441457] Message key: message value: This is a test notification
D/C2DMReceiver( 1069): (IntentService[C2DMBaseReceiver]) [0,441457] Message key: title value: myAppName
D/C2DMReceiver( 1069): (IntentService[C2DMBaseReceiver]) [2,441459] Message key: tickerText value: Notification Ticker
D/C2DMReceiver( 1069): (IntentService[C2DMBaseReceiver]) [1,441460] Message key: from value: abrahamvivas@gmail.com
D/C2DMReceiver( 1069): (IntentService[C2DMBaseReceiver]) [0,441460] Message key: collapse_key value: myApp Alert
W/V8Function( 1069): Runtime disposed, cannot call function 
```

这是我的回调

```
callback:function(e)
{
    Ti.API.info('JS message event: ' + JSON.stringify(e.data));
    var intent = Ti.Android.createIntent({
        action: Ti.Android.ACTION_MAIN,
        flags: Ti.Android.FLAG_ACTIVITY_NEW_TASK | Ti.Android.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED,
        className: 'com.avivas.myApp.myAppActivity',
        packageName: 'com.avivas.myApp'
    });

    intent.addCategory(Ti.Android.CATEGORY_LAUNCHER); 

    var pending = Ti.Android.createPendingIntent({
        activity: Ti.Android.currentActivity,
        intent: intent,
        type: Ti.Android.PENDING_INTENT_FOR_ACTIVITY,
    });

    var notification = Ti.Android.createNotification({
        contentIntent: pending,
        contentTitle: e.data.title,
        contentText: e.data.message,
        tickerText: e.data.tickerText
    });

    Ti.Android.NotificationManager.notify(1, notification);

    Titanium.Media.vibrate([0,300, 100, 300]);
} 
```

我假设因为来自 c2dm 的回调函数在 javascript 中，所以它无法执行，因为 V8 运行时已被释放。有没有人可以证实这一点？此外，是否有任何解决方法，因为我想在收到通知时显示通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:35:29.840

它适用于[Rhino](http://developer.appcelerator.com/question/136149/titanium-v8-runtime-disposed-while-c2dm-receives)引擎。

# c# - 每个标签的 Chrome/Firefox 唯一代理？

> ID：10352471
> 
> 赞同：4
> 
> 时间：2012-04-27T14:25:28.050
> 
> 标签：c#, firefox, google-chrome, proxy, automation

我想知道是否存在允许您控制 Firefox 或 Chrome 并基于每个选项卡设置代理的插件或可能的库。

我试图使浏览器中的每个选项卡都有一个唯一的代理，因此来自一个选项卡的连接看起来不像来自另一个选项卡的相同 IP。我可能还必须考虑 cookie 被隔离，因为它会连接到单个域，但这是稍后要关注的事情。

我不能使用 HttpWebRequest，因为该站点在将其发送回服务器之前使用了相当多的 Javascript 进行数据操作。

# java - 如何重置每个页面视图的值

> ID：10352472
> 
> 赞同：-2
> 
> 时间：2012-04-27T14:25:39.517
> 
> 标签：java, spring-mvc

我在 SpringMVC 中有一个基本的应用程序。我所有的控制器都扩展了一个超类，如下所示。这里的问题是每次触摸控制器方法时都不会重置`cssFiles`and 。`jsFiles`所以我最终会为每个页面视图`content/view.js`加载时间。`x+1`如果我已加载页面 3 次，它将包含 4x`content/view.js`文件。

我看到每次加载页面时都会附加这些值。为什么会发生这种情况，我该如何解决？

```
public class Controller {
    private List<String> cssFiles = new ArrayList<String>();
    private List<String> jsFiles = new ArrayList<String>();

    public Controller () {
        this.addCss("global");

        this.addJs("http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min");
        this.includejQueryUI();
        this.addJs("global");
    }

    public ModelAndView prepareModel (ModelAndView model) {

        model.addObject("cssFiles", cssFiles);
        model.addObject("jsFiles", jsFiles);

        return model;
    }
    public ModelAndView prepareModel (ModelAndView model, String title) {
        model.addObject("title", title);

        return prepareModel(model);
    }

    /*
     * Add a css file to the page
     */
    public void addCss (String cssPath) {
        if (cssPath.indexOf("://") < 1) {
            cssPath = "/cmt/css/"+cssPath;
        }

        cssFiles.add(cssFiles.size(), cssPath);
    }

    /*
     * Add a javascript file to the page
     */
    public void addJs (String jsPath) {
        if (jsPath.indexOf("://") < 1) {
            jsPath = "/cmt/js/"+jsPath;
        }

        jsFiles.add(jsFiles.size(), jsPath);
    }

    /**
     * Add a Rich Text Editor (TinyMCE) library to the page
     */
    public void includeRichTextEditor() {
        addJs("../lib/tiny_mce-3.5b3/tiny_mce");
    }

    /**
     * Add the jQuery UI library to the page
     */
    public void includejQueryUI() {
        addCss("../lib/jquery-ui-1.8.19/custom-theme/jquery-ui-1.8.19.custom");
        addJs("../lib/jquery-ui-1.8.19/jquery-ui-1.8.19.custom.min");
    }
} 
```

我仍在努力确定这个问题的原因....有什么想法吗？

web.xml 的一部分

```
<!-- Standard spring configuration -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext*.xml</param-value>
</context-param>

<!-- Spring Web MVC dispatcher servlet -->
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.html</url-pattern>
    <url-pattern>*.json</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:30:17.147

也许你想做

```
cssFiles = new ArrayList<String>();
jsFiles = new ArrayList<String>(); 
```

如果父控制器始终处于活动状态，则在构造函数中？

你是如何调用父构造函数的方法的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:51:53.200

尝试使用[Set](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html)而不是`ArrayList`.

```
private Set<String> cssFiles = new HashSet<String>();
private Set<String> jsFiles = new HashSet<String>(); 
```

> 不包含重复元素的集合。更正式地说，集合不包含一对元素 e1 和 e2 使得 e1.equals(e2)，并且最多包含一个空元素。正如它的名字所暗示的，这个接口模拟了数学集合抽象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:01:33.160

虽然我没有测试这段代码，但我要尝试的显而易见的事情是：

```
public class Controller {
    private List<String> cssFiles;
    private List<String> jsFiles;
.......
 public Controller () {
        cssFiles = new ArrayList<String>();
        jsFiles = new ArrayList<String>();
        this.addCss("global");
        this.addJs("http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min");
        this.includejQueryUI();
        this.addJs("global");
    } 
```

您能否详细说明重置的含义`are not reset every time a controller method is touched`

**起初我误解了你的问题，这里是修订版：**

```
<html>
<head>
<!--Above content is header-->
<!--Specific CSS for edit.jsp here-->
<!--Or if you want to override css classes inside <style></style>-->
</head>
<body>
<!--Load specific edit.jsp javascript at the end of the body tag-->
<!--Below content is footer-->
</body>
</html> 
```

如果您需要覆盖一些 javascript，则将 edit.jsp 特定的 js 放在`html`标记之后。所以你的编辑文件看起来像这样：

```
<%@include file="header.jsp" %>
</head>
<body>
<!--some edit.jsp content -->
<%@include file="footer.jsp" %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T06:00:19.277

我认为您将 js 和 css 文件添加到视图的方式是错误的。

您应该在 servlet xml 配置文件中添加 css 和 js 文件的资源处理程序。我使用以下代码。

```
<mvc:resources location="/resources/" mapping="/resources/**" /> 
```

这将跳过 Spring 的 Dispathcer Servlet，以获取Web 应用程序根目录的**资源文件夹中的所有资源。**

完成此操作后，您只需将它们包含在您需要的 jsp 文件中。

干杯...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-07T15:24:43.503

尝试使用`Set`而不是`ArrayList`.

# windows - Windows+CloudFormation :用户无权调用 IAM:CreateUser

> ID：10352476
> 
> 赞同：1
> 
> 时间：2012-04-27T14:25:52.937
> 
> 标签：windows, amazon-web-services, web-deployment, bootstrapping, amazon-cloudformation

我找不到关于在 Windows 2008 R2 AMI 中使用 CloudFormation 的合适文档。AWS 最近发布了一个新的 Windows AMI，其中预装了 CloudFormation 工具。

AMI 本身可以在这里找到： [https ://aws.amazon.com/amis/microsoft-windows-server-2008-r2-base-cloudformation](https://aws.amazon.com/amis/microsoft-windows-server-2008-r2-base-cloudformation)

**目标**：我想使用 CloudFormation，以便在启动期间实例可以从 S3 下载我的应用程序的最新 dll 和配置文件。

*   在该 AMI 中，默认情况下，这些工具位于 C:\ 下的什么位置？（我在文件系统中搜索并找不到它）

*   这些工具是否已经默认在启动时自动运行？还是我必须编写一个脚本来执行此操作并重新捆绑（重制）一个 EBS 支持的 AMI？我想测试一下！

*   要试用 AWS 为 Windows 提供的示例模板，我尝试启动此处给出的 Windows Sharepoint 模板：[https](https://s3.amazonaws.com/cloudformation-templates-us-east-1/Windows_Single_Server_SharePoint_Foundation.template) : //s3.amazonaws.com/cloudformation-templates-us-east-1/Windows_Single_Server_SharePoint_Foundation.template。当我尝试启动该模板给出的这个堆栈，它给了我以下错误并回滚： **AccessDenied。用户无权调用 iam:CreateUser**

根据“帐户所有者”，我的 IAM 帐户属于“无法创建新用户”的管理员组，如果是这种情况，我应该如何解决这个问题。

根据我的理解，如果我必须使用 CloudFormation 来检索元数据，CloudFormation 堆栈会创建一个仅具有“DescribeStackResource”操作权限的新 IAM 用户，并且只要该堆栈存在，这个新的 IAM 用户就会存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:05:37.100

它可以在`C:\Program Files (x86)\Amazon\cfn-bootstrap`但不确定它是否会在启动时运行，我必须验证。

# python - 如何以可靠的方式使用 __del__？

> ID：10352480
> 
> 赞同：6
> 
> 时间：2012-04-27T14:26:04.883
> 
> 标签：python, destructor, python-2.4

我了解到，python[不](http://docs.python.org/reference/datamodel.html#object.__del__) [保证](https://stackoverflow.com/questions/1481488/how-to-call-the-del-method) 在删除对象时调用它[。](https://stackoverflow.com/questions/4199653/in-python-2-x-should-i-call-object-del)`__del__`换句话说，不一定`del x` **调用****它**的析构函数`x.__del__()`。

如果我想确保正确清理对象，我应该使用[上下文管理器](http://docs.python.org/release/2.7.2/reference/datamodel.html#context-managers)（在`with`语句中）。

我知道这很愚蠢，但出于几个原因（请不要问为什么），我与 Python 2.4 的系统相关联；因此上下文管理器是没有问题的（它们是在 Python 2.5 中引入的）

所以我需要一个替代解决方案，因此我的问题是：是否有最佳实践可以帮助我`__del__`可靠地使用？我正在考虑*“如果python提供这样的功能，必须有一种方法可以有效地使用它（我只是愚蠢地弄清楚如何）”，，，*

或者我只是天真，应该忘记`__del__`并转向完全不同的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T14:27:52.870

简而言之：不，没有办法确保它被调用。

答案是自己实现上下文管理器。一个`with`语句大致翻译为：

```
x.__enter__()
try:
    ...
finally:
    x.__exit__() 
```

所以只需手动完成。它比这复杂一点，所以我建议阅读[PEP 343](http://www.python.org/dev/peps/pep-0343/)以充分了解上下文管理器的工作原理。

一种选择是调用你的清理函数`close()`，然后在 python 的未来版本中，人们可以很容易地[`contextlib.closing`](https://docs.python.org/2/library/contextlib.html#contextlib.closing)将它变成一个真正的上下文管理器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T14:31:20.270

而不是`__del__`，给你的类一个名为类似的方法`close`，然后显式调用它：

```
foo = Foo()
try:
    foo.do_interesting_stuff()
finally:
    foo.close() 
```

为了获得额外的安全性和前向兼容性，也可以使用 have`__exit__`和`__del__`call `close`。

# javascript - Onclick 更改 div 样式 + onclick 外部 div 删除样式更改

> ID：10352483
> 
> 赞同：1
> 
> 时间：2012-04-27T14:26:12.500
> 
> 标签：javascript, jquery, onclick

我想通过单击更改 div 的样式...并在单击 div 外部的某个位置时删除样式。

我有以下代码设置...如果您单击页面上的其他任何位置，有人可以帮我删除 div 上的样式吗？

```
<head>
  <style type="text/css">
     .account{
      width: 100px;
      height: 100px;
      border: 1px solid #000;
     }
    .selected{
     border: 2px solid #F00;
    }
  </style>
  <script type="text/javascript">
   $(document).ready(function(){
   $(".account").click(function(){
   $(".selected").removeClass("selected");
   $(this).addClass("selected");
  });   
  });
  </script>
</head>
<body>
 <h1>the test</h1>
 <div class="account">test 1</div>
 <div class="account">test 2</div>
</body> 
```

非常感谢你能给我的任何帮助！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T14:32:01.447

以下应该做到这一点：

```
$(document).on('click', function(e) {
    if($(e.target).hasClass('account')) {
        // do style change
    }
    else {
        // undo style change  
    }
}); 
```

它将事件处理程序绑定到整个文档，因此在调用`e.stopPropagation()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T14:44:29.120

试试这个。

```
$(document).ready(function(){
   $(".account").click(function(e){
       $(".selected").removeClass("selected");
       $(this).addClass("selected");
       e.stopPropagation();//This will stop the event bubbling 
   });   

   //This event handler will take care of removing the class if you click anywhere else
   $(document).click(function(){ 
       $(".selected").removeClass("selected");
   });
}); 
```

工作演示 - [http://jsfiddle.net/yLhsC/](http://jsfiddle.net/yLhsC/)

请注意，如果页面上有很多元素，您可以使用`on`或`delegate`处理元素的点击事件。`account`

像这样的东西。

使用`on`如果使用 jQuery 1.7+

```
$('parentElementContainingAllAccounts').on('click', '.account', function(e){
     $(".selected").removeClass("selected");
     $(this).addClass("selected");
     e.stopPropagation();//This will stop the event bubbling 
}); 
```

使用`delegate`

```
$('parentElementContainingAllAccounts').delegate('.account', 'click', function(e){
     $(".selected").removeClass("selected");
     $(this).addClass("selected");
     e.stopPropagation();//This will stop the event bubbling 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:31:14.480

您可以通过在 body 元素上附加点击侦听器来实现此行为，例如：

```
$("body").click(function(){

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:44:06.743

试试这个：

```
$(document).ready(function() {

$('.account').click(function(e) {
    e.stopPropagation();
    $(this).addClass("selected");
});

$(document).click(function(){  
    $('.selected').removeClass('selected');
});
}); 
```

# php - PHP SoapClient - 具有相同键的多个属性

> ID：10352499
> 
> 赞同：5
> 
> 时间：2012-04-27T14:27:00.967
> 
> 标签：php, soap-client

我正在使用 SoapClient，试图为这个规范生成一些东西：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <WSUser xmlns="http://webservices.listrak.com/v31/">
      <UserName>string</UserName>
      <Password>string</Password>
    </WSUser>
  </soap:Header>
  <soap:Body>
    <SetContact xmlns="http://webservices.listrak.com/v31/">
      <WSContact>
        <EmailAddress>string</EmailAddress>
        <ListID>int</ListID>
        <ContactProfileAttribute>
          <AttributeID>int</AttributeID>
          <Value>string</Value>
        </ContactProfileAttribute>
        <ContactProfileAttribute>
          <AttributeID>int</AttributeID>
          <Value>string</Value>
        </ContactProfileAttribute>
      </WSContact>
      <ProfileUpdateType>NotDefined or Update or Append or Overwrite</ProfileUpdateType>
      <ExternalEventIDs>string</ExternalEventIDs>
      <OverrideUnsubscribe>boolean</OverrideUnsubscribe>
    </SetContact>
  </soap:Body>
</soap:Envelope> 
```

我研究了一堆，包括以下内容，并认为我有答案。但是，它不起作用。这就是我正在做的事情：

```
foreach ($attributes as $key => $value) {
            $obj = array('AttributeID' => $key, 'Value' => $value);
            $attrs[] = $obj;
    }
    $final_attrs = array('ContactProfileAttribute' => $attrs);

    $params = array(
                    'WSContact' => array(
                                    'EmailAddress' => $email,
                                    'ListID' => $listId,
                                    array('ContactProfileAttribute' => $attrs)
                                    ),
                                    'ProfileUpdateType' => 'Overwrite',
                                    'ExternalEventIDs' => "",
                                    'OverrideUnsubscribe' => TRUE,

    );

    try {

            $rest = $soapClient->SetContact($params);
... 
```

当我打印出数组时，我得到了这个：

```
Array
(
    [WSContact] => Array
        (
        [EmailAddress] => xxx@example.com
        [ListID] => 26444
        [0] => Array
            (
                [ContactProfileAttribute] =&gt; Array
                    (
                        [0] => Array
                            (
                                [AttributeID] => 1548948
                                [Value] => 1
                            )

                        [1] => Array
                            (
                                [AttributeID] => 1548953
                                [Value] => John
                            )

                        [2] => Array
                            (
                                [AttributeID] => 1548954
                                [Value] => Doe
                            )

                        [3] => Array
                            (
                                [AttributeID] => 1550052
                                [Value] => 1
                            )

                    )

            )

    )

[ProfileUpdateType] => Overwrite
[ExternalEventIDs] => 
[OverrideUnsubscribe] => 1
) 
```

但是，这最终不会产生预期的结果，而是：

```
Request = <?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:ns1="http://webservices.listrak.com/v31/">
    <env:Header>
        <ns1:WSUser>
            <ns1:UserName>user</ns1:UserName>
            <ns1:Password>pw</ns1:Password>
        </ns1:WSUser>
    </env:Header>
    <env:Body>
        <ns1:SetContact>
            <ns1:WSContact>
                <ns1:EmailAddress>xxx@example.com</ns1:EmailAddress>
                <ns1:ListID>26444</ns1:ListID>
            </ns1:WSContact>
            <ns1:ProfileUpdateType>Overwrite</ns1:ProfileUpdateType>
            <ns1:ExternalEventIDs></ns1:ExternalEventIDs>
            <ns1:OverrideUnsubscribe>true</ns1:OverrideUnsubscribe>
        </ns1:SetContact>
    </env:Body>
</env:Envelope> 
```

（注意：没有 ContactProfileAttribute）

参考：

*   [SoapClient：如何传递同名的多个元素？](https://stackoverflow.com/questions/3617398/soapclient-how-to-pass-multiple-elements-with-same-name)
*   [https://stackoverflow.com/questions/7351034/how-to-make-a-php-soapcall-with-same-parameters](https://stackoverflow.com/questions/7351034/how-to-make-a-php-soapcall-with-same-parameters)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:48:36.030

`ContactProfileAttribute`元素太深一层。尝试：

```
$params = array(
    'WSContact' => array(
        'EmailAddress' => $email,
        'ListID' => $listId,
        'ContactProfileAttribute' => $attrs
    ),
    'ProfileUpdateType' => 'Overwrite',
    'ExternalEventIDs' => "",
    'OverrideUnsubscribe' => TRUE,
); 
```

# jquery - 查询。点击DIV，显示菜单。如何？

> ID：10352500
> 
> 赞同：1
> 
> 时间：2012-04-27T14:27:04.580
> 
> 标签：jquery, html

我有一个向右浮动的 div 和 onClick，我想显示另一个 DIV，其中包含一个可以单击的项目列表，这些项目也可以通过 id 分配，它们自己的点击事件。例如下拉菜单。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:29:10.397

如果我理解正确，您想在单击另一个 div 时显示一个 div？

```
$("#diva").on("click", function(){
  $("#divb").toggle();
}); 
```

示例：http: [//jsbin.com/uxaxap/edit#javascript,html](http://jsbin.com/uxaxap/edit#javascript,html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:30:05.863

这看起来很有希望：[http ://css-tricks.com/simple-jquery-dropdowns/](http://css-tricks.com/simple-jquery-dropdowns/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:34:17.380

```
$("#diva ul li").click(function(){
  $(this).find('#div').slideToggle();
}); 
```

# objective-c - 将 JavaScript 与 UIWebView 一起使用

> ID：10352512
> 
> 赞同：0
> 
> 时间：2012-04-27T14:27:46.223
> 
> 标签：objective-c, ios

我在使用 javascript 和 UIWebView 时遇到问题。问题在于字符串的编码。我该如何解决这个问题？

```
NSString *stringSelection = [self.currentPage stringByEvaluatingJavaScriptFromString:@"window.getSelection().toString()"];
NSLog(@"%@",stringSelection); 
```

安慰：

```
passionn√©¬†de¬†ses¬†personnages(Eug√©nie¬†Grandet).¬†Flaubert¬†d√©peint¬†la¬†m√©dio- 
```

# c# - 为世界时钟计算不同时区的 DateTime 显示

> ID：10352515
> 
> 赞同：0
> 
> 时间：2012-04-27T14:27:53.780
> 
> 标签：c#, asp.net, datetime

我正在开发一个小型 C#/ASP.NET 项目，该项目将显示 4 或 5 个不同的标签，以显示世界不同地区的时间。

我一直在网上研究大量关于此的不同问题和博客文章，但我仍然缺少一些经验丰富的开发人员可以毫无问题地填写的文章。我已经阅读了诸如“TimeZoneInfo”、“ToLocalTime”和“GetUTCOffSet”之类的内容。对于像我这样的新人来说，这让我感到困惑。我必须说我在 Stack Overflow 上看到的大部分信息。我想展示我目前拥有的东西，看看我是否可以在这里得到一些建议：

后面的代码：

```
 protected void Timer1_Tick(object sender, EventArgs e)
    {
        string militaryTime = ( "HH:mm:ss tt" );
        lblTimer1.Text = DateTime.Now.ToString(militaryTime);
    } 
```

在 .aspx 页面上标记：

```
 <asp:Timer ID="Timer1" runat="server" OnTick="Timer1_Tick" Interval="1000">
                </asp:Timer>
                <h4 style="width: 200px">
                    Local :&nbsp;<asp:Label ID="lblTimer1" runat="server"></asp:Label>
                </h4> 
```

现在，我知道在 Javascript 中做客户端可能更有意义，但这个任务也是一个学习工具，了解如何在没有 JS 的情况下在 C# 中实现这一点。

无论如何，我无法弄清楚如何为我拥有的以下 4 个标签显示不同的时区。我希望它在 DateTimeNow 之外工作，因为这可以在世界任何地方的任何时区看到，它应该根据与这些城市相关的用户时区更新代表不同世界城市的其他 4 个标签。

再说一次，我知道有很多关于这方面的线索，当你阅读本文时，我正在研究它们，但到目前为止，我仍然缺少一些我需要构建的基本结构。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:31:47.030

尝试使用[DateTimeOffset](http://msdn.microsoft.com/ru-ru/library/system.datetimeoffset.aspx)

*DateTimeOffset 结构包括一个 DateTime 值以及一个 Offset 属性，该属性定义当前 DateTimeOffset 实例的日期和时间与协调世界时 (UTC) 之间的差异。*

# desire2learn - 使用 Desire2Learn 的 REST API 在我的个人储物柜中创建一个文件夹

> ID：10352518
> 
> 赞同：0
> 
> 时间：2012-04-27T14:28:13.030
> 
> 标签：desire2learn

如何使用 Desire2Learn 的 REST API 在我的个人储物柜中创建一个新文件夹（称为“test”）？我已经尝试过这个请求，但它不起作用：

```
POST /d2l/api/le/1.0/locker/mylocker/?x_a={appID}&x_c={appSig}&x_b={myUserID}&x_d={myUserSig}&x_t={time) HTTP/1.1
Host: myHost.com
Accept: */*
Content-type: application/json

{ "test" } 
```

服务器向我发回 200 状态，但也告诉我“发生了意外错误”。我已经用其他路由测试了所有 auth 参数，它们似乎有效。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:31:25.733

这是一个有点不寻常的电话；

JSON 数据必须是这样的：

```
"test" 
```

不是：

```
{ "test" } 
```

[文档](http://docs.valence.desire2learn.com/res/locker.html#post--d2l-api-le-%28D2LVERSION-version%29-locker-myLocker-%28string-path%29)中有一个示例，但它是最近的。

# ios - 确定在地图上选择了哪个引脚进行 segue

> ID：10352520
> 
> 赞同：1
> 
> 时间：2012-04-27T14:28:18.973
> 
> 标签：ios, mapkit, pushpin, callout

Mapkit 用法，这是我的场景：当用户在我的地图上选择一个图钉，然后选择与该图钉关联的标注时，用户将被带到另一个 ViewController，该 ViewController 将显示与他们的选择相关的信息。

要为destinationViewController 设置数据，我正在使用

```
 prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

这是可行的，但我有一个问题，我不确定选择了哪个注释。以下代码说明了我的问题 - 代码有效，但我将其硬编码为“objectAtIndex：0”而不是 objectAtIndex：“他们选择的任何引脚”

```
 [self.myImageViewController setAddressMessage:  [[self.annotations objectAtIndex:0] houseAddress]]; 
```

在 prepareForSegue 中，我如何知道他们选择了哪个引脚？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:16:54.507

不知道您的其余代码，我不确定这是否会起作用，但这就是我在类似情况下找到注释的方式，即按下注释视图标注上的按钮。

```
-(void)buttonInCalloutWasTapped:(UIButton *)button {
    if ([[[[button superview] superview] class] isSubclassOfClass:[MKAnnotationView class]]) {
        MKAnnotation *annotation = [(MKPinAnnotationView *)[[button superview] superview] annotation];
        [self.myImageViewController setAddressMessage:  [annotation houseAddress]];
    }
} 
```

# visual-c++ - 错误 LNK2019：函数 main 中引用了未解析的外部符号

> ID：10352524
> 
> 赞同：1
> 
> 时间：2012-04-27T14:28:49.673
> 
> 标签：visual-c++

我正在使用一个库来生成使用 VS2010 的多模式优化函数。我包含库的头文件并告诉VS库目录在哪里；但是，它没有附带 *.lib 文件，只有源文件和头文件，所以我不能将 VS 指向“附加库目录”。

如果我只包含头文件并运行我的代码，它就可以正常工作。如果我从该库调用任何方法，我会收到 LNK2019 错误：

> 错误 LNK2019：无法解析的外部符号“void __cdecl g_initialize(char *)”(?g_initialize@@YAXPEAD@Z) 在函数 main 中引用”。

我环顾四周，每个人都说我应该链接库，但我没有一个库文件开始。我应该怎么办？？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:27:32.523

如果你有这些头文件的实现，有两种方法。

1）您可以将其添加到您的项目中。

2) 自己编译库，你会得到 *.lib 文件。在此之后将其添加到您的项目中。

阅读这个库的文档如何使用它。您还可以检查是否有在头文件中声明的实现方法/函数。

# python - 如何在 django 管理模型表单中包含不在模型中的文件字段

> ID：10352532
> 
> 赞同：3
> 
> 时间：2012-04-27T14:29:12.240
> 
> 标签：python, django, django-models, django-forms, django-admin

我想在管理模型表单中包含一个文件字段，该字段将用于上传一个文件，然后读取该文件，其内容将用于更新同一模型中的其他字段。处理完文件本身就不需要了，所以我不希望模型中的文件字段只是在表单中。

我自己覆盖保存和处理表单没有问题，但我不知道如何在我的表单中包含不在模型中的文件字段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T14:36:13.340

[您应该为此模型](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)创建一个ModelForm ，并在那里添加该字段。它可能看起来像这样：

```
from django import forms

from models import MyModel

class MyModelForm(forms.ModelForm):
    extra_file = forms.FileField()

    class Meta:
        model = MyModel 
```

然后，您可以[让 ModelAdmin 使用此表单](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.form)。如果您将 MyModelForm 保存在 yourapp/forms.py 中，您的 ModelAdmin 将如下所示：

```
from django.contrib import admin

from models import MyModel
from forms import MyModelForm

class MyModelAdmin(admin.ModelAdmin):
    form = MyModelForm
admin.site.register(MyModel, MyModelAdmin) 
```

# asp.net - 如何在 ASP.NET 按钮中使用 Twitter Bootstrap 图标？

> ID：10352535
> 
> 赞同：13
> 
> 时间：2012-04-27T14:29:14.533
> 
> 标签：asp.net, twitter-bootstrap

我怎样才能使用：

```
<i class="icon-etc"></i> 
```

有一个 asp.net 按钮？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-07T08:27:32.970

链接按钮，像这样...

```
<asp:LinkButton ID="SelectButton" runat="server" CssClass="btn btn-info"><i class="icon-ok icon-white"></i>&nbsp;Select</asp:LinkButton> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-12T13:42:49.420

您可以将`<i>`标签作为值添加到`LinkButton` `Text`属性中。

**例如**

```
<asp:LinkButton ID="btnExcluir" runat="server" Text="<i aria-hidden='true' class='icon-remove-3'></i>" CssClass="btn btn-danger" /> 
```

您甚至可以将其与侧文本一起使用。

**例如**

```
<asp:LinkButton ID="btnExcluir" runat="server" Text="Link Name&nbsp;<i aria-hidden='true' class='icon-remove-3'></i>" CssClass="btn btn-danger" /> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-26T18:37:32.480

尝试这个

```
<asp:LinkButton ID="btnExample" runat="server" Text="<span class='glyphicon glyphicon-repeat'></span> Button" CssClass="btn btn-primary btn-xs" OnClick="btn_Click"></asp:LinkButton> 
```

或者

```
<asp:LinkButton ID="btnExample" runat="server" Text="<i class='glyphicon glyphicon-flash'></i> Button" CssClass="btn btn-primary btn-xs" OnClick="btn_Click"></asp:LinkButton> 
```

问候 C：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-31T03:16:30.607

感谢 Anders Smedman，您的代码确实完成了这项工作。如果有人需要，这里是 C# 代码。

```
 private void FixGlyph(PlaceHolder ph, Button btn, string iconClass, string customLabelStye = "")
    {
        if (btn.Visible)
        {
            var g = new HtmlGenericControl();
            g.ID = "labelFor_" + btn.ID;
            g.TagName = "label";
            g.Attributes.Add("for",btn.ClientID);
            g.Attributes.Add("class","" + btn.CssClass +"");
            if (customLabelStye != "")
            {
                g.Attributes.Add("style",customLabelStye);
            }
            g.InnerHtml = "<i class='" + iconClass + "'></i> " + btn.Text;
            ph.Controls.Add(g);
            btn.Attributes.Add("style","display:none;");
        }

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-09T09:07:15.687

我已经这样做了。

标记：

```
<asp:PlaceHolder ID="phButtonToLabelsAdminBox" runat="server"></asp:PlaceHolder>
<asp:Button ID="btnSave" runat="server" CssClass="btn" Text="Spara" />
<asp:Button ID="btnClear" runat="server" CssClass="btn" Text="Töm/Ny" /> 
```

CodeBehind Page_Load()

```
FixGlyph(phButtonToLabelsAdminBox, btnSave, "icon-ok")
FixGlyph(phButtonToLabelsAdminBox, btnClear, "icon-refresh") 
```

和子：

```
Private Sub FixGlyph(ph As PlaceHolder, btn As Button, IconClass As String, Optional CustomLabelStyle As String = "")

If btn.Visible = False Then Exit Sub
Dim g As New HtmlGenericControl
g.ID = "labelFor_" + btn.ID
g.TagName = "label"
g.Attributes.Add("for", btn.ClientID)
g.Attributes.Add("class", "" + btn.CssClass + "")
If Not CustomLabelStyle = "" Then g.Attributes.Add("style", CustomLabelStyle)
g.InnerHtml = "<i class=""" + IconClass + """></i> " + btn.Text
ph.Controls.Add(g)
btn.Attributes.Add("style", "display:none;")

End Sub 
```

我在我的标记中使用普通的 asp:Button，唯一的事情是在可能为按钮设置可见真/假的其他代码之后运行 FixGlyph，并按照您希望按钮出现的顺序添加 FixGlyph。除此之外，它对我有用。

# python - 如何使用 python 搜索具有两个不同条件的 XML 树？

> ID：10352538
> 
> 赞同：0
> 
> 时间：2012-04-27T14:29:48.823
> 
> 标签：python, lxml

在过去的几个小时里，我一直被这个问题困扰。

这就是 XML 的样子

```
 <xmlblock>
        <data1>
              <username>someusername</username>
              <id>12345</id>
        </data1>
        <data2>
             <username>username</username>
             <id>11111</id>
        </data1>
    </xmlblock> 
```

问题是这样的：

当它与给定的 id 匹配时，我需要用户名。

我不确定如何使用 iterfind 或 python 中的任何其他 lxml 模块进行双重搜索。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:39:42.280

一个（可能不是最好的）解决方案

```
>>> id_to_match = 12345
>>> for event, element in cElementTree.iterparse('xmlfile.xml'):
...     if 'data' in element.tag:
...        for data in element:
...            if data.tag == 'username':
...                username = data.text
...            if data.tag == 'id':
...                if data.text == id_to_match:
...                    print username
someusername 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:18:47.227

这是一个使用[lxml](http://lxml.de/)和[xpath的示例](http://en.wikipedia.org/wiki/XPath)

* * *

```
>>> xml = '''
    <xmlblock>
        <data1>
              <username>someusername</username>
              <id>12345</id>
        </data1>
        <data2>
             <username>username</username>
             <id>11111</id>
        </data2>
    </xmlblock>'''
>>> doc = lxml.etree.fromstring(xml)
>>> matching_nodes = doc.xpath('//id[text()="11111"]/../username')
>>> for node in matching_nodes:
        print node.text
username 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:27:48.903

如果您可以使用[minidom](http://docs.python.org/library/xml.dom.minidom.html)，则以下内容应该可以使用

```
from xml.dom import minidom
doc = minidom.parseString('<xmlblock><data1><username>someusername</username><id>12345</id></data1><data2><username>username</username><id>11111</id></data2></xmlblock>')
username = [elem.parentNode.getElementsByTagName('username') for elem in doc.getElementsByTagName('id') if elem.firstChild.data == '12345'][0][0].firstChild.data
print username 
```

# php - 为什么我的 PHP 什么都不做，显示一个空白页面？

> ID：10352540
> 
> 赞同：0
> 
> 时间：2012-04-27T14:29:51.123
> 
> 标签：php, html

为什么我的 PHP 刚刚停止工作？

我一次做的几件事可能会破坏它：

1.  在不包含 jquery 脚本的情况下放入 jquery，但在 javascript 标记中包含 jquery。
2.  创建了一个样式表（它正在工作，但后来我添加了一个 :before 样式和 jquery 并且 php 停止工作）。
3.  更改了 PHP 代码中的空格。
4.  放在`<!DOCTYPE HTML>`顶部，但随后将其删除，没有任何变化。

我期望每个文件夹和子文件夹的列表，但得到一个只有标题的页面，Chrome 显示 php 标记在 HTML 注释中（不确定是否正常，从来没有 php 不起作用）。

**问题是：文件类型不是 ANSI。**

PHP：

```
<?php

function listFolderFiles($dir){
    $ffs = scandir($dir);
    echo '<ol>';
    foreach($ffs as $ff){
        if($ff != '.' && $ff != '..'){
            echo '<li>'.$ff;
            if(is_dir($dir.'/'.$ff)) listFolderFiles($dir.'/'.$ff);
            echo '</li>';
        }
    }
    echo '</ol>';
}

?> 
```

HTML：

```
<html>
<head>
<title>
</title>

<?php include("find.php"); ?>

</head>
<body>

<h2>Folders</h2>

<?php listFolderFiles('../');?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:15:12.383

我相信您的文件不是 ANSI 保存的，因为 PHP 不能在 UNICODE 文件上运行。尝试使用您喜欢的编辑器打开您的文件，当您保存时...确保将其保存为 ANSI。

# php - 使用 jQuery 将字符串转换为 JSON

> ID：10352542
> 
> 赞同：1
> 
> 时间：2012-04-27T14:30:03.040
> 
> 标签：php, javascript, jquery, json

我使用中间人文件从 Flickr API 获取数据（以避免跨域问题）：

```
<?php

header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');

die(json_encode( file_get_contents($_REQUEST['url']) ) );
?> 
```

此文件由 javascript 获取：

```
//Flickr
var myurl = encodeURIComponent('http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=1408bff5f72a4b84b924d13e8562b6a2&photoset_id=77649470@N03&photoset_id=72157629903184261&format=json');
    $.getJSON( "middle.php?url=" + myurl, function(data){
        console.log(typeof data);
    }); 
```

但是 console.log 显示结果是一个“字符串”而不是 JSON 对象。我尝试将其转换为 JSON 对象：

```
jQuery.parseJSON(data) 
```

但控制台给了我这个错误：

```
Uncaught SyntaxError: Unexpected token j 
```

这是字符串：

```
jsonFlickrApi({"photoset":{"id":"72157629903184261", "primary":"7115173307", "owner":"77649470@N03", "ownername":"wedocommunication", "photo":[{"id":"7115173331", "secret":"24900ff306", "server":"5447", "farm":6, "title":"Lounge", "isprimary":"0"}, {"id":"7115173307", "secret":"3435f9a983", "server":"7256", "farm":8, "title":"Hofansicht", "isprimary":"1"}, {"id":"7115173379", "secret":"7747e50597", "server":"7278", "farm":8, "title":"Konfi", "isprimary":"0"}, {"id":"6969093048", "secret":"d4389bc0e4", "server":"7055", "farm":8, "title":"Lounge", "isprimary":"0"}, {"id":"6969093086", "secret":"8e7263005b", "server":"5152", "farm":6, "title":"Eingangsbereich", "isprimary":"0"}], "page":1, "per_page":500, "perpage":500, "pages":1, "total":"5"}, "stat":"ok"}) 
```

我该怎么做才能将字符串转换为对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T14:35:21.217

Flickr 将响应作为 jsonp 返回，这是 javascript 而不是 json，您应该为此使用 jquery jsonp 类型请求，请参阅 - [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

事实上，该页面提供了 flickr api 的示例-

```
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
  {
    tags: "cat",
    tagmode: "any",
    format: "json"
  },
  function(data) {
    $.each(data.items, function(i,item){
      $("<img/>").attr("src", item.media.m).appendTo("#images");
      if ( i == 3 ) return false;
    });
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T14:37:10.877

您不需要使用代理来避免跨域问题，只需使用[JSONP request](http://api.jquery.com/jQuery.getJSON/#jsonp)即可。

```
$.getJSON("http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=1408bff5f72a4b84b924d13e8562b6a2&photoset_id=77649470@N03&photoset_id=72157629903184261&format=json&jsoncallback=?",function(data){
        console.log(data);
    });​ 
```

[演示](http://jsfiddle.net/S8MVM/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:35:39.093

JSON 以对象花括号开头不是 JSON 对象的一部分`{`。[如果您只需要内部，您可以先替换](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)`jsonFlickrApi(`字符串以首先删除部分，但似乎 Flickr 会有更好的内置解决方案。 `data``jsonFlickrApi(`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:36:00.173

您必须删除开头的“jsonFlickrApi(”和结尾的“)”，因此“json 字符串”只读`{"photoset":{"id":"72157629903184261", "primary":"7115173307", "owner":"77649470@N03", "ownername":"wedocommunication", "photo":[{"id":"7115173331", "secret":"24900ff306", "server":"5447", "farm":6, "title":"Lounge", "isprimary":"0"}, {"id":"7115173307", "secret":"3435f9a983", "server":"7256", "farm":8, "title":"Hofansicht", "isprimary":"1"}, {"id":"7115173379", "secret":"7747e50597", "server":"7278", "farm":8, "title":"Konfi", "isprimary":"0"}, {"id":"6969093048", "secret":"d4389bc0e4", "server":"7055", "farm":8, "title":"Lounge", "isprimary":"0"}, {"id":"6969093086", "secret":"8e7263005b", "server":"5152", "farm":6, "title":"Eingangsbereich", "isprimary":"0"}], "page":1, "per_page":500, "perpage":500, "pages":1, "total":"5"}, "stat":"ok"}`。

然后可以由 JS 将其解析为常规 JSON 数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T14:50:26.150

有人发布了我正在寻找的答案，但由于某种原因他们删除了该帖子，所以我在这里复制它：

```
$.ajax({
    url: 'http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=1408bff5f72a4b84b924d13e8562b6a2&photoset_id=77649470@N03&photoset_id=72157629903184261&format=json',
    type: 'GET',
    dataType: 'jsonp',
    jsonpCallback: 'jsonFlickrApi',
    success: function(data){
        console.log(data);
    }
}); 
```

这完美地完成了这项工作。谢谢，不管是谁:)

可能还有其他工作，但这是我感觉更舒服的工作。谢谢你们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-03T09:01:43.540

正如上面已经提到的，Flickr 将包裹在`jsonFlickrApi`回调方法中的 JSON 响应发送出去。

要仅返回纯 JSON 数据，您可以使用`nojsoncallback=1`request 参数。

例如`http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key=_secret_app_key&photo_id=8321754843&format=json&nojsoncallback=1`

# c - 如何在 CentOS 5.5 上安装带有调试信息的 glibc

> ID：10352546
> 
> 赞同：5
> 
> 时间：2012-04-27T14:30:17.590
> 
> 标签：c, centos, glibc

我正在学习 Zed Shaw 的 Learn C the Hard Way。

在关于 Valgrind 的章节中，[“你应该看到的”](http://c.learncodethehardway.org/book/learn-c-the-hard-waych5.html#x10-320005.3 "你应该看到什么")部分有各种 glibc 函数的行号。

我已经确定（显然）我的 CentOS 5.5 安装了非调试 glibc。但是 yum 没有列出 glibc-dbg （或类似的东西：

```
[nzucker:~/projects/lcthw]$ yum info \*glibc\* | grep Name
Name       : glibc
Name       : glibc
Name       : glibc-common
Name       : glibc-devel
Name       : glibc-devel
Name       : glibc-headers
Name       : compat-glibc
Name       : compat-glibc
Name       : compat-glibc-headers
Name       : glibc-utils 
```

过去，我通过随意安装包（通过包或从源代码构建）使 Linux 机器变砖，所以我想知道我在这里做什么。

问题：

1.  由于我已经安装了 glibc-devel，调试库是否已经存在，我只需要链接到它们和/或添加编译开关？

2.  如果我在启用调试的情况下从源代码（或安装包）重新构建 glibc，我如何确保不会意外地使机器变砖（即因为构建错误的包并触发库不兼容）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T14:44:36.500

在 CentOS 下，您可以使用命令安装特定软件包的调试信息`debuginfo-install`。例如：

```
debuginfo-install glibc 
```

为此，您需要`debuginfo`定义存储库。对于 CentOS 5，将以下内容放入`/etc/yum.repos.d/CentOS-Base-debuginfo.repo`：

```
[base-debuginfo]
name=CentOS-$releasever - DebugInfo
baseurl=http://debuginfo.centos.org/$releasever/$basearch/
gpgcheck=0
enabled=0
protect=1
priority=1 
```

*警告*：如果你从 Google 找到了有关 CentOS 6 信息的方法：这对 CentOS 5 非常有用。CentOS 团队很难与 CentOS 6 一起行动，而且 CentOS 6 调试信息存储库已经过时了- of-date 对最新包的尊重。您可能会或可能无法找到适合 CentOS 6 的 debuginfo 软件包。

# wcf - 具有 TransportCredentialOnly 安全模式的 WCF 服务导致 IIS7 上的 HTTP 状态代码 401 错误

> ID：10352547
> 
> 赞同：2
> 
> 时间：2012-04-27T14:30:26.070
> 
> 标签：wcf, iis-7, http-status-code-401, unauthorized, transport-security

我刚刚花了 2 天时间调试以下错误，所以我坚持我会分享我的发现。

场景是这样的：我有一个托管在 IIS7 上的 WCF 服务。该服务使用安全模式设置为 TransportCredentialOnly 的 basicHttpBinding。该网站启用了匿名身份验证和 Windows 身份验证。该网站的应用程序池在域帐户下运行，该帐户对网站的物理文件夹具有所有可能的权利。从 Internet Explorer 浏览服务的 .svc 是可行的，但是当我们尝试从客户端调用服务的方法时，我们收到错误：“HTTP 请求未经客户端身份验证方案协商”。此外，每次调用该方法时，IIS 日志都会显示 401.5 错误，这对于此安全设置来说是正常的，但它后面应该是 200，而这里不是这种情况。

**最后，我们通过检查Default Website**上的 Authentication 设置设法解决了这个问题。那里禁用了 Windows 身份验证。我们启用了它，服务开始工作。您会认为，网站设置会覆盖它，但它们不会。因此，请避免整天进行wiresharking，procmoning并检查此设置。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:59:56.597

这是您需要让设置在所有层上匹配的问题：

*   客户端上的 App.config
*   IIS 设置
*   应用程序池标识
*   svc 文件的 NTFS 权限
*   服务器上的 Web.Config

所有这些都需要匹配才能正常工作。

# asp.net - 停止旧会话列表对象添加

> ID：10352551
> 
> 赞同：0
> 
> 时间：2012-04-27T14:30:39.557
> 
> 标签：asp.net, web-services

我的代码“下面”的作用是：客户端 javascript 调用一个 webservice 方法，该方法创建一个通用列表，然后将其存储到会话中。

```
 [WebMethod(EnableSession = true)]
public void SaveUserSelection(string slctdRooms, string slctdcst)
{
    List<SelectRms> SelectR = Session["someinfo"] as List<SelectRms>;
    if (SelectR  == null)
    { 
        SelectR = new List<SelectRms>();
        Session["someinfo"] = SelectR;

    }

    SelectR.Add(new SelectRms { roomtype = slctdRooms, Roomcst = slctdcst });

} 
```

> 然后我会重新访问会话以在另一个页面中显示数据，如下所示

列表（SlctdRmWebSrv.SelectRms）SelctdRM =（列表（SlctdRmWebSrv.SelectRms））Sessio[“someinfo”]；

```
 if(SelctdRM != null)

        {

            repeater1.DataSource = SelctdRM;

             repeater1.DataBind();
        } 
```

*问题是每次我重新创建会话以创建新列表时，新数据都会添加到旧数据中。我想要一种只显示当前数据的情况。我尝试清除列表、放弃会话或清除中继器，然后再添加它所做的新中继器；容易有一个简单的方法来完成这项工作。非常感谢*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:57:27.257

听起来您`SaveUserSelection`从 javascript 中多次调用。如果是这种情况，那么只有第一次您的列表才会被初始化。

因此，您的列表将继续向“旧”列表添加内容，因为该列表尚未被清除或重新初始化。

您可能应该**将初始化放在一个单独的方法中**（`Page_Load`或者创建一个新的方法`WebMethod`来清除/初始化列表）。例如，如果您决定将它放在`Page_Load`事件中，这就是它的外观：

**注意**：代码未经测试

```
private void Page_Load(object sender, System.EventArgs e)
{
  if(!Page.IsPostBack)
    Session["someinfo"] =  new List<SelectRms>();  
} 
```

如果您创建一个，这就是它的外观`WebMethod`：

```
[WebMethod(EnableSession = true)]
public void InitUserSelection()
{
  Session["someinfo"] =  new List<SelectRms>();
} 
```

当您准备好跟踪用户选择时调用此方法。也许当您的表单最初加载时（将此脚本放在页面底部）：

```
$(document).ready(function() {
  $.ajax({
  type: "POST",
  url: "PageName.aspx/InitUserSelection",
  data: "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
    // After init you could use this method to do something else
  }
});
}); 
```

所以`SaveUserSelection`看起来像这样：

```
[WebMethod(EnableSession = true)]
public void SaveUserSelection(string slctdRooms, string slctdcst)
{
  List<SelectRms> SelectR = Session["someinfo"] as List<SelectRms>;
  if (SelectR  != null)
    SelectR.Add(new SelectRms { roomtype = slctdRooms, Roomcst = slctdcst });
} 
```

这就是您的 javascript 在您的选择发生变化时的样子：

```
$.ajax({
  type: "POST",
  url: "PageName.aspx/SaveUserSelection",
  data: "{'slctdRooms':'Value1','slctdcst':'Value2'}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
   //your list was updated, you may do something afterwards
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:42:22.040

@尤利斯。这就是我正在做的事情：

```
public  List<SelectRms> GetUserContent()
    {
        List<SelectRms> SelectR=new List<SelectRms>();
        Session["someinfo"] = SelectR;
        return Session["someinfo"] as List<SelectRms>;
    }

    [WebMethod(EnableSession = true)]
    public void SaveUserSelection(string slctdRooms, string slctdcst)
    {
        List<SelectRms> SelectR = GetUserContent();
        SelectR.Add(new SelectRms { roomtype = slctdRooms, Roomcst = slctdcst });

    } 
```

但相反，它返回我列表的单个（第一个）元素而不是整个列表，任何帮助

# php - 这是什么 lighttpd 和 Typo3 警告？

> ID：10352554
> 
> 赞同：0
> 
> 时间：2012-04-27T14:30:48.610
> 
> 标签：php, lighttpd, typo3

我已经用 lighttpd 在我的新网络服务器上安装了 php 5.3.8 和 Typo3 4.5.5，但现在我收到了这个警告。我的操作系统是 Suse 12.2 64 位。

```
 FastCGI-stderr: PHP Warning:  date() [<a href='function.date'>function.date</a>]: It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'Europe/Berlin' for 'CEST/2.0/DST' instead in /htdocs/XXXX/t3lib/class.t3lib_div.php on line 5968 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:53:29.880

它与 Lighttpd 和 Typo3 无关，它与 PHP 有关。

您必须在 php.ini中定义[默认时区：](http://www.php.net/manual/en/datetime.configuration.php)

```
date.timezone = "Europe/Paris" 
```

否则，您可以直接在代码中执行此操作（如果您无法编辑 php.ini）：

```
date_default_timezone_set("Europe/Paris"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:56:13.223

从 PHP 5.3 开始，您必须为 PHP 显式设置时区值。（如果没有明确地为 PHP 提供时区设置，以前的版本将回退到使用操作系统的时区设置，但 5.3+ 不再这样做了。）最简单的方法是在你的 php.ini 中设置它；[好的HOWTO在这里。](http://chrisjean.com/2011/06/24/php-5-3-and-system-timezone-settings/)

# wpf - 如何在 WPF 的矩形中找到 UIElements？

> ID：10352555
> 
> 赞同：0
> 
> 时间：2012-04-27T14:30:54.803
> 
> 标签：wpf, mvvm, rectangles, uielement

我需要`UIElement`在（矩形/区域/边界）中找到 s。

MainWindow 我正在执行以下操作：

*   我将鼠标向下注册为起始位置。
*   我注册了鼠标向上的位置。
*   现在我需要在开始位置和结束位置之间的矩形中找到 ll（按钮、文本框等）。

我在 msdn 中找到了这种`HitTest`方法，但这只是为了一点。我认为，遍历已建立的矩形中的所有点是一场性能灾难。

[http://msdn.microsoft.com/en-us/library/ms752097.aspx](http://msdn.microsoft.com/en-us/library/ms752097.aspx)

我的代码基于 MVVM 模式：

```
private ObservableCollection<UIElementViewModel> wells;   
private Point stratPoint; // Mouse down
public ICommand MouseUpRightCommand
{
  get
  {
    if (this.mouseUpRightCommand == null)
    {
      this.mouseUpRightCommand = new RelayCommands(
        param =>
       {
          if (param is MouseButtonEventArgs)
          {
            var e = (param as MouseButtonEventArgs);

            //Set the end point
            endPosition = e.GetPosition(((ItemsControl)e.Source));

            // for example, here I want to find all controls(UIElements) in the
            // founded rectangle of stratPoint and endPosition.

          }
        });
    }

    return this.mouseUpRightCommand;
  }
} 
```

还有其他想法或更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:10:08.360

我会使用`FrameworkElement`(which extends `UIElement`) 而不是`UIElement`, 以便使用`ActualWidth`and`ActualHeight`属性

然后创建一个做一些数学运算的静态类`MouseUtils`

与那些静态字段

```
 private static double _dContainerTop;
    private static double _dContainerBottom;
    private static double _dContainerLeft;
    private static double _dContainerRight;
    private static double _dCursorTop;
    private static double _dCursorLeft;
    private static double _dCursorRight;
    private static double _dCursorBottom; 
```

和那些静态方法

```
 private static void FindValues(FrameworkElement element, Visual rootVisual)
    {
        var containerTopLeft = container.TransformToAncestor(rootVisual).Transform(new Point(0, 0));

        _dContainerTop = containerTopLeft.Y;
        _dContainerBottom = _dContainerTop + container.ActualHeight;
        _dContainerLeft = containerTopLeft.X;
        _dContainerRight = _dContainerLeft + container.ActualWidth;

    } 
```

和

```
 public static bool IsElementUnderRectCursor(FrameworkElement element, Point startPoint, Point endPoint, Visual rootVisual)
    {
       _dCursorTop=Math.Min(startPoint.Y, endPoint.Y);
       _dCursorBottom=Math.Max(startPoint.Y, endPoint.Y);
       _dCursorLeft=Math.Min(startPoint.X, endPoint.X);
       _dCursorRight=Math.Max(startPoint.X, endPoint.X);

        FindValues(container, rootVisual);
        if (_dContainerTop < _dCursorTop|| _dCursorBottom< _dContainerBottom )
        {
            return false;
        }
        if (_dContainerLeft < _dCursorLeft|| _dContainerRight < _dCursorRight)
        {
            return false;
        }
        return true;
    } 
```

`Rootvisual`例如，成为你的窗口；

然后循环`ObservableCollection<FrameworkElement> wells`并调用该函数`IsElementUnderRectCursor`。

灵感来自： [Kinecting the Dots](http://geekswithblogs.net/mbcrump/archive/2011/07/04/kinecting-the-dots-adding-buttons-to-your-kinect-application.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:14:18.410

星体再次感谢您的回答。完成。我只是将选择代码从模型视图移动到视图。选择仅在 UI 中完成。

```
private void SelectWells(RectangleGeometry selectionRectangle, FrameworkElement frameworkElement)
    {
      var items = GetItemsControl(frameworkElement);

      foreach (var item in items.Items)
      {
        var viusalItem = (ContentPresenter)items.ItemContainerGenerator.ContainerFromItem(item);

        var wellControl = this.GetWellControl(viusalItem);

        var relativePoint = wellControl.TransformToAncestor(items).Transform(new Point(0, 0));

        var controlRectangle =
          new RectangleGeometry(
            new Rect(relativePoint.X, relativePoint.Y, wellControl.ActualWidth, wellControl.ActualHeight));

        var intersectionGeometry = Geometry.Combine(
          selectionRectangle, controlRectangle, GeometryCombineMode.Intersect, null);

        if (intersectionGeometry.GetArea() > 0)
        {
          wellControl.Command.Execute(this);
        }
      }
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T18:06:53.363

对你有用的链接：http: [//www.codeproject.com/Articles/354853/WPF-Organization-Chart-Hierarchy-MVVM-Application](http://www.codeproject.com/Articles/354853/WPF-Organization-Chart-Hierarchy-MVVM-Application)

当用户单击树中的节点时，我们需要让 ViewModel 节点知道选择已更改。我们喜欢将事件作为命令路由到 ViewModel

# javascript - RegExp：匹配已知数字

> ID：10352563
> 
> 赞同：3
> 
> 时间：2012-04-27T14:31:21.770
> 
> 标签：javascript, regex, floating-point

我想将已知数字（浮点数或整数）与字符串匹配并找到该重复的数字。

像“22.5 98 12 22 322”中的第 22 场比赛

我怎么能用正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:33:50.720

尝试使用这个：

```
if (numbers.indexOf("22") != -1) {
   //The number 22 is in the String
} 
```

它不完全是一个正则表达式，但为什么在你不需要它的时候使用它呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:13:49.513

```
str.match(/substr/g).length 
```

返回“str”中“substr”的出现次数。例如：

```
str = "22.5 98 12 22 322"
num = str.match(/22/g).length
alert(num) // 3 
```

如果要匹配*整数*而不仅仅是子字符串，请确保数字前后都有一个空格：

```
str = "22.5 98 12 22 322"
num = str.match(/(^|\s)22($|\s)/g).length
alert(num) // 1 
```

另一种选择，没有正则表达式：

```
str = "22.5 98 12 22 322"
num = str.split(" ").filter(function(item) {
    return Number(item) === 22;
}).length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:42:16.990

如果你的意思是你应该只找到在同一个字符串中重复的数字，你可以使用这样的东西：

```
var test_str = '22 34 55 45345 34 22 555';
var matches  = test_str.match(/(\b[0-9]+\b)(?=.+\b\1\b)/g); 
// matches contains ["22", "34"], but not "55" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:37:31.630

```
var str = "22.5 98 12 22 322";
var pattern = /22/g;
if (pattern.test(str)) {
    // it matches "22", do your logic here...
} 
```

有关更多信息，请参见[RegExp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)和[RegExp.test(string)](http://www.w3schools.com/jsref/jsref_regexp_test.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T14:37:38.883

这是您探索正则表达式的好工具 :) [http://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)

从上面的网站采用：

```
function demoShowMatchClick() {
  var re = new RegExp("(?:^| )+(22(?:$| ))+");
  var m = re.exec("22.5 98 12 22 322");
  if (m == null) {
    alert("No match");
  } else {
    var s = "Match at position " + m.index + ":\n";
   for (i = 0; i < m.length; i++) {
     s = s + m[i] + "\n";
   }
   alert(s);
 }
} 
```

这将为您提供所有匹配项，并要求以字符串的开头或结尾或空格分隔数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T18:23:29.023

将整数/浮点数从文本关联到正则表达式
非常棘手，因为正则表达式没有这样的概念。

使用动态输入，所有工作都是以编程方式构建正则表达式。
这个例子不包括科学记数法，但它可以。

伪代码：

```
If the input matches this parse regex  
    /^  (?=.*\d)     // must be a digit in the input
        ([+-]?)      // capt (1), optional +/-
        [0]*         // suck up all leading 0's
        (\d*)        // capt (2), optional digits, will start with [1-9]
        ([.]?)       // capt (3), optional period
        (\d*?)       // capt (4), non-greedy optional digits, will start with [1-9]
        [0]*         // suck up all trailing 0's
     $/x

    sign = '[+]?';

    If !length $2 AND !length $4
         sign = '[+-]';
    Else
        If $1 == '-'
            sign = '[-]';
        Endif
    Endif

    whole = '[0]*';

    If  length $2
         whole = '[0]*' + $2;
    Endif

    decfrac = '[.]? [0]*';

    If  length $4
         $decfrac = '[.] ' + $4 + '[0]*';
    Endif

    regex = '/(?:^|\s)(?=\S*\d) ' +  "$sign $whole $decfrac" + ' (?:\s|$)/x';

Else
    //  input is not valid
Endif 
```

这是一个 Perl 测试用例。
生成的动态正则表达式尚未经过测试，
我认为它可以工作，但我可能是错的。

```
@samps = (
'00000.0',
 '+.0',
 '-.0',
 '0.',
 '-0.00100',
 '1',
 '+.1',
 '+43.0910',
 '22',
 '33.e19',
);

for (@samps) 
{
   print "\nInput:  $_\n";

   if( /^ (?=.*\d) ([+-]?) [0]*(\d*) ([.]?) (\d*?)[0]*$/x )   # 1,2,3,4
   {

      my ($sign, $whole, $decfrac);

      $sign = '[+]?';

      if ( !length $2  && !length $4) {
           $sign = '[+-]';
      } elsif ($1 eq '-') {
           $sign = '[-]';
      }

      $whole = '[0]*';

      if ( length $2) {
          $whole = '[0]*'.$2;
      }

      $decfrac = '[.]? [0]*';

      if ( length $4) {
          $decfrac = '[.] '.$4.'[0]*';
      }

      my $regex = '/(?:^|\s)(?=\S*\d) '. "$sign $whole $decfrac" . ' (?:\s|$)/x';

      print "Regex:  $regex\n";
   }
   else {
      print "**input  '$_'  is not valid\n";
      next;
   }
} 
```

输出

```
Input:  00000.0
Regex:  /(?:^|\s)(?=\S*\d) [+-] [0]* [.]? [0]* (?:\s|$)/x

Input:  +.0
Regex:  /(?:^|\s)(?=\S*\d) [+-] [0]* [.]? [0]* (?:\s|$)/x

Input:  -.0
Regex:  /(?:^|\s)(?=\S*\d) [+-] [0]* [.]? [0]* (?:\s|$)/x

Input:  0.
Regex:  /(?:^|\s)(?=\S*\d) [+-] [0]* [.]? [0]* (?:\s|$)/x

Input:  -0.00100
Regex:  /(?:^|\s)(?=\S*\d) [-] [0]* [.] 001[0]* (?:\s|$)/x

Input:  1
Regex:  /(?:^|\s)(?=\S*\d) [+]? [0]*1 [.]? [0]* (?:\s|$)/x

Input:  +.1
Regex:  /(?:^|\s)(?=\S*\d) [+]? [0]* [.] 1[0]* (?:\s|$)/x

Input:  +43.0910
Regex:  /(?:^|\s)(?=\S*\d) [+]? [0]*43 [.] 091[0]* (?:\s|$)/x

Input:  22
Regex:  /(?:^|\s)(?=\S*\d) [+]? [0]*22 [.]? [0]* (?:\s|$)/x

Input:  33.e19
**input  '33.e19'  is not valid 
```

# java - 从启动时启动的服务访问资源

> ID：10352569
> 
> 赞同：0
> 
> 时间：2012-04-27T14:31:42.897
> 
> 标签：java, android, service, resources

在启动时，我有一个`BroadcastReceiver`启动一个`Service`. 在此`Service`，我触发 a ，并且我希望从其中检索`Notification`的文本，当用户单击（通过它的资源）时将启动。`Notification``Activity``Notification`

、`BroadcastRecevier`the`Service`和 the`Activity`都捆绑在同一个包中。

问题是：我如何从 中检索`Activity`'s 资源，`Service`因为我没有任何处理程序供我`Activity`使用？而且我不能拥有一个，因为`Service`在`Activity`.

提前感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:53:33.643

活动没有资源。*应用程序*有资源。您的服务将以与其他任何方式相同的方式访问您的应用程序的资源（例如，通过调用`getString()`或`getResources()）。

# eclipse - Maven 提供范围和 Eclipse 运行时类路径

> ID：10352570
> 
> 赞同：5
> 
> 时间：2012-04-27T14:31:44.113
> 
> 标签：eclipse, maven, classpath, m2e

我的 Eclipse 类路径与 m2e 插件有问题。我有一个项目，它依赖于我工作区中的其他项目。我已将这些依赖项添加为提供范围的 Maven 依赖项。我希望范围执行以下操作：为编译提供依赖项，但将它们排除在运行时类路径中。因为在运行时，这些类应该从文件夹内的 jar 中加载。

但是 Eclipse 类路径包括我在项目 pom.xml 中提供的每一个依赖项。Eclipse 似乎忽略了提供的范围。有没有办法从运行时类路径中排除那些？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-25T17:17:05.047

如果您希望依赖项“为编译提供但从运行时类路径中排除”，您需要使用“提供的”依赖项*范围*（一个 Maven 术语）而不是 Maven 默认使用的“编译”范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:01:34.237

m2e 在这里正常工作。我认为您误解了“运行时”的含义。您的项目实际上在编译和运行时都依赖于其他项目，当您使用 Maven 构建它时，POM 将反映这一点。如果您计划将项目部署到例如提供依赖项本身的应用程序服务器，您将只使用范围“提供”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:10:21.730

我在使用 maven-war-plugin 2.2 版时遇到了同样的问题，使用 maven-war-plugin 版本。2.3 问题消失了，至少用**mvn package**命令。

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.3</version>

            <configuration>
                <webxml>WebContent/WEB-INF/web.xml</webxml>
                <packagingExcludes>jsp-api-6.0.36.jar,el-api-6.0.36.jar,servlet-api-6.0.36.jar</packagingExcludes>              

            </configuration>
        </plugin> 
```

# c# - 具有单独写入和读取位置的流

> ID：10352574
> 
> 赞同：8
> 
> 时间：2012-04-27T14:31:57.657
> 
> 标签：c#, stream

我想在单台 PC 上模拟网络类型的流。

我通过创建一个`Stream`接收 2 个底层流（一个用于读取，另一个用于写入）来完成此操作。

然后我创建了这个类的 2 个实例来交换 2 个流。目前我使用`MemoryStream`s 作为 2 个底层流。

我现在遇到的问题是，如果我将 X 字节写入 a，`MemoryStream`那么它的位置将是 X，如果我再执行 a `Read`，我将没有数据，因为我在流的末尾。

鉴于我通常会进行几次读取/写入（所以不能在每次写入后将位置重置为 0）**我`Stream`可以用什么来获得这种行为？**

**实际上，我想要一种可以以流的形式写入和读取的字节队列。**

即（忽略实际的方法参数）

```
MyStream.Write({ 1, 2, 3, 4, 5, 6 });
MyStream.Write({ 7, 8 });
MyStream.Read(3) // Returns { 1, 2, 3 }
MyStream.Read(4) // Returns { 4, 5, 6, 7 } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T14:50:06.603

它实际上比我想象的要简单得多（无论如何就我而言）。
我只是在执行任何操作之前恢复/记录读/写位置：

```
public class QueueStream : MemoryStream
{
    long ReadPosition;
    long WritePosition;

    public QueueStream() : base() { }

    public override int Read(byte[] buffer, int offset, int count)
    {
        Position = ReadPosition;

        var temp = base.Read(buffer, offset, count);

        ReadPosition = Position;

        return temp;
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        Position = WritePosition;

        base.Write(buffer, offset, count);

        WritePosition = Position;
    }
} 
```

# c# - 实现嵌套的通用接口

> ID：10352587
> 
> 赞同：14
> 
> 时间：2012-04-27T14:32:43.710
> 
> 标签：c#, generics, interface, nested, nested-generics

我有以下类/接口：

```
// Model
public class A : IA { }
// ModelLogic
public class B : IB<A> { }

// Model Interface
public interface IA { }
// ModelLogic Interface
public interface IB<T> where T : IA { } 
```

我尝试使用以下代码创建一个新实例：

```
IB<IA> foo = new B(); 
```

我收到以下错误：

```
Cannot implicitly convert type 'B' to 'IB<IA>'. An explicit conversion exists (are you missing a cast?) 
```

**有人可以解释为什么这是不可能的吗？**

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-27T14:41:16.960

好的，让我们`A`用`Fish`, `IA`with `IAnimal`, `B`with`Aquarium`和`IB<T>`with 替换`IContainer<T>`。我们将添加一个成员`IContainer<T>`，以及第二个实现`IAnimal`：

```
// Model
public class Fish : IAnimal { }
public class Tiger : IAnimal { }
// ModelLogic
public class Aquarium : IContainer<Fish> 
{ 
    public Fish Contents { get; set; }
}

// Model Interface
public interface IAnimal { }
// ModelLogic Interface
public interface IContainer<T> where T : IAnimal 
{ 
    T Contents { get; set; }
}

IContainer<IAnimal> foo = new Aquarium(); // Why is this illegal?
foo.Contents = new Tiger(); // Because this is legal! 
```

您可以将 Tiger 放入 foo - **foo 被键入为可以包含任何动物的容器**。但是您只能将鱼放入水族馆。由于您可以在 an 上合法执行的操作与您可以在 an 上执行`Aquarium`的操作*不同*`IContainer<IAnimal>`，因此这些类型不兼容。

您想要的功能称为*通用接口协方差*，它*受*C# 4 支持，但您必须向编译器证明您永远不会将老虎放入鱼缸。你想做的是：

```
// Model
public class A : IA { }
// ModelLogic
public class B : IB<A> { }

// Model Interface
public interface IA { }
// ModelLogic Interface
public interface IB<out T> where T : IA { } 
```

注意 上的协方差注释`IB`。这`out`意味着**`T`只能用作输出**，不能用作输入。如果`T`只是一个输出，那么某人将无法将老虎放入该鱼缸，因为没有可能的“放入”属性或方法。

在我们向 C# 添加该功能时，我写了许多博客文章；如果您对该功能的设计注意事项感兴趣，请参阅：

[http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/](http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:43:42.823

要修复您的代码，只需更改

```
public interface IB<T> where T : IA { } 
```

至

```
public interface IB<out T> where T : IA { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:44:46.230

当你有空接口时不容易看到。假设您在接口 IB 中有一种方法 M：

```
public interface IB<T> where T : IA 
{ 
    void M(T t); 
} 
```

这是B的实现：

```
public class B : IB<A>
{
    public void M(A t)
    {
        // only object of type A accepted 
    }
} 
```

然后你有对象 C，它也实现了 IA：

```
public class C : IA { } 
```

因此，如果您的代码可行，那么您可以调用：

```
IB<IA> foo = new B();
foo.M(new C()); 
```

问题是 B 类只接受 A 类型的对象。错误！

# css - 自动滚动 CSS3

> ID：10352592
> 
> 赞同：0
> 
> 时间：2012-04-27T13:55:02.910
> 
> 标签：css, xhtml

我一直在互联网上寻找可以让我滚动某个 div 的 css3 功能。

现在为什么我只想使用它，因为我正在创建一个配置文件，只允许我使用 CSS ......

因此，如果有人对此有一些信息，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:29:44.643

您可以使用 CSS3 和过渡，可能是这样的：

```
#mydiv {
  position: relative;
  top: 0;
  transition: top 1.0s ease;
}
#mydiv:hover {
  top: -100px;
  transition: top 1.0s ease;
} 
```

这应该使它在悬停时向上滚动。要使其“滚动”，您可以确保它位于具有溢出：隐藏的容器内。

这是未经测试的，但如果它看起来是你想要的，有大量的 CSS3 动画在线资源。

# c - 如何在设备上运行 ARM 应用程序？

> ID：10352596
> 
> 赞同：0
> 
> 时间：2012-04-27T14:33:01.860
> 
> 标签：c, arm, cross-compiling

我使用`arm-linux-gnueabi`ARM 编译器编译了一个用 C 语言编写的简单可执行应用程序。

如何在设备上运行它？

假设我有两个设备来测试它：

1.  带有 Windows Mobile 6.1、ARM926EJ OMAP1710 处理器的三星手机
2.  带有 Android 2.x 的 Foston 平板电脑，我没有找到处理器名称，但它是 ARM 系列中的处理器之一。

如果无法在当前操作系统上运行它，那么如何格式化设备并放置我的内核而不是 Android/Linux？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:04:40.813

# java - 将 MatchCharAt 与 StringBuilder 进行比较？

> ID：10352597
> 
> 赞同：0
> 
> 时间：2012-04-27T14:33:03.133
> 
> 标签：java

```
public class Driver {

public static void main(String[] args) {

    int length=0;
    int MaxNumber=100;
    StringBuilder password = new StringBuilder();

    do {
        if (PasswordGenerator.matchLength (length))
            System.out.println("The length of the character is " + length);
        length++;
    } while (length < MaxNumber);

    do {
        if (PasswordGenerator.matchCharAt (password))
            System.out.println("The password is " + password);
    } while (  );

}
} 
```

我的代码应该找到给定密码的长度，它已经做到了。然后下一步应该通过将每个单独的字符附加到 Stringbuilder 来确定密码。

但无论如何我一直收到一个错误

> 类 PasswordGenerator 中的方法 matchCharAt 不能应用于给定类型：必需：char、int 找到：StringBuilder 原因：实际参数列表和形式参数列表的长度不同*

任何帮助都是极好的！

PS 密码生成器是一个“编造”类，如果您需要文档，我可以发布它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:37:35.670

错误代码清楚地说，您使用了错误的参数：

```
method matchCharAt in class PasswordGenerator cannot be applied to given types: Required: char, int Found: StringBuilder Reason: Actual and formal argument lists differ in length 
```

您需要提供两个参数：第一个`char`，第二个`int`

这个问题听起来和闻起来像家庭作业。如果是这样：请将其标记为作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:40:06.533

StringBuilder 类似于字符串，但不一样。它缓冲一个长度，这样您就可以在不创建一堆额外字符串的情况下进行连接（因为字符串是不可变的）。

看起来您实际上并未在该方法的任何地方使用 StringBuilder，我建议您在`PasswordGenerator.matchCharAt()`方法中定义它并返回完整的密码字符串。

我们需要 PasswordGenerator 的文档，以便在您的任务限制范围内获得更具体的信息。

# vba - 需要找到一种方法让这个宏循环遍历所有其他列

> ID：10352600
> 
> 赞同：1
> 
> 时间：2012-04-27T14:33:10.190
> 
> 标签：vba, excel, excel-2007

我编写了一个宏，它根据对其他两个单元格的串联值的查找来返回一个单元格中的特定值。此宏可能需要每隔一列运行 30 列。有没有办法可以循环这个，这样我就不必输入 30 个变体？

这是我引用的代码部分：

```
Cells.Select
ActiveWorkbook.Worksheets("Vendor Request").Sort.SortFields.Clear
ActiveWorkbook.Worksheets("Vendor Request").Sort.SortFields.Add Key:=Range( _
    "F2:F" & LR2), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:= _
    xlSortNormal
With ActiveWorkbook.Worksheets("Vendor Request").Sort
    .SetRange Range("A1:BK" & LR2)
    .Header = xlYes
    .MatchCase = False
    .Orientation = xlTopToBottom
    .SortMethod = xlPinYin
    .Apply
End With
If Cells(2, 6).Value <> "" Then
Range("G2").Select
ActiveCell.FormulaR1C1 = _
    "=CONCATENATE(""Example:  "",IF(ISNA(VLOOKUP(CONCATENATE(RC[-4],""; "",RC[-1]),'Sample Data'!C[-6]:C[-2],5,FALSE)),"""",VLOOKUP(CONCATENATE(RC[-4],""; "",RC[-1]),'Sample Data'!C[-6]:C[-2],5,FALSE)))"
If Cells(3, 6).Value <> "" Then
Range("G2").Select
Selection.AutoFill Destination:=Range("G2:G" & Range("F" & Rows.Count).End(xlUp).Row)
Else
End If
Columns("G:G").Select
Selection.Copy
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False
Else
End If 
```

提前致谢！

编辑：终于让它工作了。这是我最终得到的结果：

```
Cells.Select
    ActiveWorkbook.Worksheets("Vendor Request").Sort.SortFields.Clear
    ActiveWorkbook.Worksheets("Vendor Request").Sort.SortFields.Add Key:=Columns( _
        j - 1), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:= _
        xlSortNormal
    With ActiveWorkbook.Worksheets("Vendor Request").Sort
        .SetRange Range("A1:BK" & LR2)
        .Header = xlYes
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
    End With
    Dim LRj As Long
    With Sheets("Vendor Request")
    LRj = .Cells(.Rows.Count, j - 1).End(xlUp).Row
    End With
    If Cells(2, j - 1).Value <> "" Then
    Cells(2, j).Select
    ActiveCell.FormulaR1C1 = _
    "=CONCATENATE(""Example:  "",IF(ISNA(VLOOKUP(CONCATENATE(c3,""; "",C[-1]),'Sample Data'!c1:c6,5,FALSE)),"""",VLOOKUP(CONCATENATE(c3,""; "",C[-1]),'Sample Data'!c1:c6,5,FALSE)))"
    If Cells(3, j - 1).Value <> "" Then
    Cells(2, j).Select
    Selection.AutoFill Destination:=Range(Cells(2, j), Cells(LRj, j))
    Else
    End If
    Columns(j).Select
    Selection.Copy
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Application.CutCopyMode = False
    Else
    End If
    Next j 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:25:24.667

你可以改变 ... `Range("G2:G`... to`Range("G2:AK`和`Columns("G:G"`to`Columns("G:AK"`

或`Range(Cells(2,j),Cells(...,j))`在 for 循环内

# python - ppmap/parallel python 中是否存在隐藏的可能死锁？

> ID：10352606
> 
> 赞同：3
> 
> 时间：2012-04-27T14:33:32.863
> 
> 标签：python, biopython, parallel-python

我在使用 map 的并行版本（[ppmap](http://honeypot.net/files/ppmap.py)包装器，由 Kirk Strauser 实现）时遇到了一些麻烦。

我试图并行运行的函数对大量字符串（蛋白质序列）运行简单的正则表达式搜索，这些字符串是使用 BioPython 的 SeqIO 从文件系统中解析的。每个函数调用都使用自己的文件。

如果我使用法线贴图运行该函数，一切都会按预期工作。然而，当使用 ppmap 时，一些运行简单的冻结，没有 CPU 使用，主程序甚至没有对 KeyboardInterrupt 做出反应。此外，当我查看正在运行的进程时，工作人员仍然在那里（但不再使用任何 CPU）。

例如

```
/usr/bin/python -u /usr/local/lib/python2.7/dist-packages/pp-1.6.1-py2.7.egg/ppworker.py 2>/dev/null 
```

此外，工作人员似乎没有冻结任何特定的数据输入 - 如果我手动终止进程并重新运行执行，它会在不同的点停止。（所以我暂时采取了保留已完成条目的列表并多次重新启动程序）。

有什么办法可以看出问题出在哪里？

我正在运行的代码示例：

```
def analyse_repeats(data):
    """
    Loads whole proteome in memory and then looks for repeats in sequences, 
    flags both real repeats and sequences not containing particular aminoacid
    """    
    (organism, organism_id, filename) = data

    import re
    letters = ['C','M','F','I','L','V','W','Y','A','G','T','S','Q','N','E','D','H','R','K','P']

    try:
        handle = open(filename)
        data = Bio.SeqIO.parse(handle, "fasta")

        records = [record for record in data]
        store_records = []
        for record in records:
            sequence = str(record.seq)
            uniprot_id = str(record.name)
            for letter in letters:
                items = set(re.compile("(%s+)" % tuple(([letter] * 1))).findall(sequence))     
                if items:
                    for item in items:
                        store_records.append((organism_id,len(item), uniprot_id, letter))
                else:
                    # letter not present in the string, "zero" repeat
                    store_records.append((organism_id,0, uniprot_id, letter))
        handle.close()
        return (organism,store_records)
    except IOError as e:
        print e
        return (organism, [])

res_generator = ppmap.ppmap(
    None, 
    analyse_repeats, 
    zip(todo_list, organism_ids, filenames)
)

for res in res_generator:  
    # process the output 
```

如果我使用简单的地图而不是 ppmap，一切正常：

```
res_generator = map(
    analyse_repeats, 
    zip(todo_list, organism_ids, filenames)
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:47:34.237

您可以尝试使用模块中对象的一种方法（如`map`） 。优点是它是内置的，不需要外部包。它也很好用。`Pool``multiprocessing`

默认情况下，它使用的工作进程与您的计算机的内核数量一样多，但您也可以指定更高的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:40:49.130

我可以建议使用 dispy (http://dispy.sourceforge.net) 吗？免责声明：我是作者。我知道它没有直接解决问题，但希望对您有所帮助。

# c# - Memcached，1 台服务器关闭，但未使用其他服务器

> ID：10352610
> 
> 赞同：0
> 
> 时间：2012-04-27T14:33:40.893
> 
> 标签：c#, memcached

大家好： 尝试使用 BeIT.Memcached c# 客户端使用 Memcached。

我的配置条目：

```
<add key="MyCaching" value="server-a, server-b" /> 
```

问题是：

1.  当 server-a 关闭时，BeIT.MemCached 不会自动转到 server-b esp。设置缓存？我知道由于 server-a 已关闭，所有缓存都消失了。但是新的缓存集请求应该重定向到 server-b，对吧？
2.  我假设这是客户问题。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:37:42.930

好的我现在明白了。最初没有意义，但现在有意义。

这里：

1.  BeIT.MemCached 使用服务器选择算法来存储缓存。
2.  当 server-a 关闭时，返回 null。所以没有像自动路由到server-b这样的东西。
3.  设置缓存也将失败，因为服务器选择算法仍将返回 server-a，即使它已关闭。

回答我的问题：

1.  server-a 因临时原因停机，我们的想法是尽快使其联机。所以缓存在一些故障后继续工作（这只是命中率）。所以应用程序仍然可以继续运行，但会根据它的作用达到峰值。
2.  如果 server-a 将关闭一段时间，最好的办法是更新配置文件以从池中删除“server-a”，以便使用其他服务器。

# algorithm - 大功率双精度

> ID：10352611
> 
> 赞同：0
> 
> 时间：2012-04-27T14:33:43.570
> 
> 标签：algorithm, math, numeric, exponent

你如何用你选择的某种编程语言来解决下面的等式？

```
(1-1/X)^Y 
```

简单的！

但是当 X 和 Y 非常大并且 X>>Y 时怎么样？

例如

```
(1-1/X)^Y
where 
X = 10^40
Y = 10^12 
```

看起来这应该是一个足够简单的问题，但在应用电源之前解决双精度问题是我无法弄清楚的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:39:09.390

嗯，`(1 - 1/X)^Y = exp(Y*log(1 - 1/X))`。如果`X`非常大，并且比 大得多`Y`，您可以使用近似对数

```
log(1 - 1/x) = -1/x -1/(2*X^2) + O(1/X^3) 
```

并计算

```
exp(-(Y/X+ Y/(2*X*X))) 
```

如果`X`不大于`Y`，则可能需要使用对数的泰勒级数的第三项甚至第四项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:56:27.437

使用[GNU Octave](http://www.gnu.org/software/octave/index.html)的计算是近似的：

```
octave:1> x = 10^40
x =  1.0000e+40
octave:2> y = 10^12
y =  1.0000e+12
octave:3> (1-1/x)^y
ans =  1

octave:8> exp(-(y/x + y /(2*x*x)))
ans =  1 
```

如果 Daniel Fischer 的计算是正确的，那么`exp(-(Y/X+ Y/(2*X*X)))`在**Java**中使用**BigDecimal**计算的代码是：

```
public static void main(String[] args) {
    BigDecimal x = new BigDecimal(10,MathContext.UNLIMITED).pow(40);
    BigDecimal y = new BigDecimal(10,MathContext.UNLIMITED).pow(12);

    BigDecimal twoXSquared = new BigDecimal(2,MathContext.UNLIMITED).multiply(x).multiply(x);
    BigDecimal yDividedByTwoXSquared = y.divide(twoXSquared);

    BigDecimal yDividedByX = y.divide(x);

    BigDecimal exponent = new BigDecimal(-1,MathContext.UNLIMITED).multiply(yDividedByX.add(yDividedByTwoXSquared));
    System.out.println(exponent.toEngineeringString());

    BigDecimal result = new BigDecimal(Math.E,MathContext.UNLIMITED).pow(exponent.intValue());

    System.out.println(result.toEngineeringString());

} 
```

# c# - 在运行时编译代码优先的 EF4 类时遇到问题 :)

> ID：10352615
> 
> 赞同：1
> 
> 时间：2012-04-27T14:33:55.757
> 
> 标签：c#, c#-4.0, compilation, runtime

我试图在运行时编译这段代码。此代码是代码优先的 EF4 类。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel.DataAnnotations;

namespace EFCodeFirst.Model.Models
{
    [Table("Blog")]
    public class Blog
    {
        public Guid Id { get; set; }
        [Column("txtTitle")]
        public string Title { get; set; }
        [DatabaseGenerated(DatabaseGeneratedOption.None)]
        public string ShortTitle { get { return Title; } }
        public string BloggerName { get; set; }
        public virtual ICollection<Post> Posts { get; set; }
    }

    public class Post
    {
        public Guid Id { get; set; }
        public string Title { get; set; }
        public DateTime DateCreated { get; set; }
        public string Content { get; set; }
        public Guid BlogId { get; set; }
    }
} 
```

使用此方法编译给定代码。我用一个简单的类测试了这段代码。有用。但是对于给定的课程，它根本不起作用。

```
private Assembly BuildAssembly(string code)
        {
            Microsoft.CSharp.CSharpCodeProvider provider = new CSharpCodeProvider();
            ICodeCompiler compiler = provider.CreateCompiler();
            CompilerParameters compilerparams = new CompilerParameters();
            compilerparams.GenerateExecutable = false;
            compilerparams.GenerateInMemory = true;
            CompilerResults results = compiler.CompileAssemblyFromSource(compilerparams, code);
            if (results.Errors.HasErrors)
            {
                StringBuilder errors = new StringBuilder("Compiler Errors :\r\n");
                foreach (CompilerError error in results.Errors)
                {
                    errors.AppendFormat("Line {0},{1}\t: {2}\n", error.Line, error.Column, error.ErrorText);
                }
                throw new Exception(errors.ToString());
            }
            else
            {
                return results.CompiledAssembly;
            }
        } 
```

我得到了一些这样的例外：

```
error CS0234: The type or namespace name 'Linq' does not exist in the namespace 'System' (are you missing an assembly reference?)} 
```

有什么帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:43:19.913

好像你没有在 'compilerparams' ReferencedAssemblies 设置。很可能您需要添加必要的程序集引用，就像在普通的 VS C# 项目中添加一样。尝试使用以下方法将它们添加到您的 BuildAssembly 方法中：

`compilerparams.ReferencedAssemblies.Add("mscorlib.dll"); compilerparams.ReferencedAssemblies.Add("System.dll"); compilerparams.ReferencedAssemblies.Add("System.Core.dll"); compilerparams.ReferencedAssemblies.Add("System.Xml.dll"); compilerparams.ReferencedAssemblies.Add("EntityFramework.dll");`

除此之外，请确保您在要编译的代码中有以下命名空间 usings：`using System.Data.Entity; using System.Collections.Generic; using System.ComponentModel.DataAnnotations;`这应该可以解决您在此问题上的编译问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-14T09:11:09.937

我也遇到了这个问题，把网站从 NET 4.0 升级到 NET 4.6.1，就解决了。请记住删除 NUGET 组件并在新的 NET 目标新版本中重新安装。

# windows-installer - 查找安装了某些文件的产品

> ID：10352617
> 
> 赞同：1
> 
> 时间：2012-04-27T14:34:03.650
> 
> 标签：windows-installer

**在 Windows（XP+、7、2k3）上使用 msi 引擎（高于 3）：**

有没有办法找到安装了一些文件的已安装产品，比如在 Linux 上使用 rpm 或 deb 包管理器？

Linux（带 deb）：

```
$ apt-file search autoexpect
expect-dev: usr/share/doc/expect-dev/examples/autoexpect.1.gz
expect-dev: usr/share/doc/expect-dev/examples/autoexpect.gz
expect-tcl8.3: usr/share/doc/expect-tcl8.3/examples/autoexpect
expect-tcl8.3: usr/share/doc/expect-tcl8.3/examples/autoexpect.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:16:40.437

不，这是不可能的。Windows Installer 通过[组件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372830%28v=vs.85%29.aspx)处理资源。它不知道实际的文件或注册表项。

要确定是否安装了特定组件，您可以使用[MsiGetComponentState](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370113%28v=vs.85%29.aspx)函数。

# ruby-on-rails - 我如何查询这 3 个关联模型？

> ID：10352619
> 
> 赞同：0
> 
> 时间：2012-04-27T14:34:07.580
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord

想象一下这些模型：

```
class User
  belongs_to :profile
  # has email here
end

class Profile
  has_one :user
  # has first_name,last_name
end 
```

和

```
class Post
  belongs_to :profile
  # has title,content
end 
```

现在，我想查询用户电子邮件中的所有帖子（执行 LIKE "%substring%" ）。我宁愿不必用 map/selects 编写它，因为我认为它会生成非常低效的代码。我尝试过这样的事情：

```
class Post
  def self.with_user_email_like(email)
    self.joins(:profile).where("profile.email LIKE ?","%#{email}%")
  end
end 
```

问题是，我知道我应该以某种方式在上述条件下拥有一个 profile.user.email，但我就是无法让它工作。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:39:02.760

试试这个

```
class Post
  belongs_to :profile
  scope :with_user_email_like, lambda{|email| joins(:profile => :user).where("users.email LIKE %?%", email)} 
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:41:33.417

好吧，你快到了，但由于电子邮件在用户表中，你也必须加入：

```
self.joins(:profile => :user).where("users.email LIKE ?","%#{email}%") 
```

# sql - 根据今天，本周，本月，今年这个季度总结销售的最快方法是什么？

> ID：10352621
> 
> 赞同：5
> 
> 时间：2012-04-27T14:34:11.437
> 
> 标签：sql, sql-server, tsql, aggregate-functions

以下查询返回正确的结果，但如何更快地获得相同的结果？

目标是通过汇总他们今天、本周、本月和季度的销售额来输出一个用于跟踪卖家进度的表格。

```
SellerID    Today                 ThisWeek              ThisMonth             ThisQuarter
----------- --------------------- --------------------- --------------------- ---------------------
1           400,00                700,00                900,00                900,00
2           950,00                1850,00               2650,00               2650,00 
```

我的查询：

```
CREATE TABLE #sales(
    [Price] MONEY,
    [Date] DATE,
    [SellerID] INT
)

INSERT INTO #sales VALUES 
(100, '2012-01-01', 1),
(200, '2012-04-01',1),
(300, '2012-04-23',1),
(400, '2012-04-27',1),
(700, '2012-01-01', 2),
(700, '2012-01-02', 2),
(800, '2012-04-01',2),
(900, '2012-04-23',2),
(950, '2012-04-27',2)

SELECT 
SellerID AS SellerID,

SUM(CASE WHEN [Date] >= DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()),0) THEN [Price] END) AS Today,
SUM(CASE WHEN [Date] >= DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), 0) THEN [Price] END) AS ThisWeek,
SUM(CASE WHEN [Date] >= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) THEN [Price] END) AS ThisMonth,
SUM(CASE WHEN [Date] >= DATEADD(QUARTER, DATEDIFF(QUARTER, 0, GETDATE()), 0) THEN [Price] END) AS ThisQuarter

FROM #sales
WHERE DATEPART(YEAR, [Date]) = DATEPART(YEAR, GETDATE()) 
GROUP BY SellerID 
```

在更大的表上执行相同的查询时，这会变得很慢。仅删除 CASE 语句即可将执行时间缩短近 50%。

我怎样才能以更快、更有效的方式获得相同的结果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T16:53:28.810

由于是星期五下午，我想我会扩大我对仓储的评论。即使您无法使用 SSAS 或任何其他 OLAP 完全探索多维数据集，您仍然可以进行自己的报表特定仓储。在你的情况下，我会建立一个新的数据库（我总是叫我的 DW，但世界是你的牡蛎），并创建 2 个模式 Fact 和 Dim（代表事实和维度）。在您的情况下，它需要 2 个表格，但您可能需要为“SellerID”添加另一个维度，具体取决于这是否需要进一步报告。

```
CREATE TABLE Dim.Date
(       DateKey     DATE NOT NULL,
        DayOfWeek   VARCHAR(20) NOT NULL,
        Day         TINYINT NOT NULL,
        Week        TINYINT NOT NULL,
        Quarter     TINYINT NOT NULL,
        Month       TINYINT NOT NULL,
        Year        SMALLINT NOT NULL
    CONSTRAINT PK_Dim_Date_DateKey PRIMARY KEY (DateKey)
)
CREATE TABLE Fact.Sales
(       DateKey     DATE NOT NULL,
        SellerID    INT NOT NULL,
        Sales       INT NOT NULL,
        Amount      MONEY NOT NULL,
    CONSTRAINT PK_Fact_Sales PRIMARY KEY (DateKey, SellerID),
    CONSTRAINT FK_Fact_Sales_DateKey FOREIGN KEY (DateKey) REFERENCES Dim.Date
) 
```

假设数据不会回溯，您可以使用这样的过程来按计划作业填充您的仓库：

```
DECLARE @MaxDate DATE
SELECT  @MaxDate = DATEADD(DAY, 1, MAX(DateKey))
FROM    Fact.Sales

INSERT INTO Dim.Date
SELECT  DATEADD(DAY, Increment, @MaxDate), 
        DATENAME(WEEKDAY, DATEADD(DAY, Increment, @MaxDate)), 
        DATEPART(DAY, DATEADD(DAY, Increment, @MaxDate)),
        DATEPART(WEEK, DATEADD(DAY, Increment, @MaxDate)),
        DATEPART(MONTH, DATEADD(DAY, Increment, @MaxDate)),
        DATEPART(QUARTER, DATEADD(DAY, Increment, @MaxDate)),
        DATEPART(YEAR, DATEADD(DAY, Increment, @MaxDate))
FROM    (   SELECT  ROW_NUMBER() OVER(ORDER BY Object_ID) - 1 [Increment]
            FROM    Sys.Objects
        ) obj
WHERE   NOT EXISTS
        (   SELECT  1
            FROM    Dim.Date
            WHERE   Date.DateKey = DATEADD(DAY, Increment, @MaxDate)
        )

INSERT INTO Fact.Sales
SELECT  [Date], SellerID, COUNT(*), SUM(Price)
FROM    LiveDatabase..Sales
WHERE   [Date] >= @MaxDate
GROUP BY [Date], SellerID 
```

这将为您留下以下查询来生成您的报告

```
SELECT  SellerID,
        SUM(CASE WHEN Today.DateKey = Date.DateKey THEN Amount ELSE O END) [Today],
        SUM(CASE WHEN Today.Week = Date.Week THEN Amount ELSE O END) [ThisWeek],
        SUM(CASE WHEN Today.Month = Date.Month THEN Amount ELSE O END) [ThisMonth],
        SUM(CASE WHEN Today.Quarter = Date.Quarter THEN Amount ELSE O END) [ThisQuarter],
        SUM(CASE WHEN Today.Year = Date.Year THEN Amount ELSE O END) [ThisYear]
FROM    Fact.Sales
        INNER JOIN Dim.Date
            ON Date.DateKey = Sales.DateKey
        INNER JOIN Dim.Date Today
            ON Today.DateKey = CAST(GETDATE() AS DATE)
            AND Today.Year = Date.Year
GROUP BY SellerID 
```

如果有的话，它看起来比原始查询更复杂，但是在线数据库增长得越多，您就会看到更多的好处。我做了一个[SQL Fiddle](http://sqlfiddle.com/#!3/d59dc/1)来展示优势，它用 10000 条随机销售记录填充实时数据，然后创建一个仓库（构建模式可能需要几秒钟）。您应该注意到仓库上查询的执行时间明显更快（c.20x）。第一次运行时它可能不会快 20 倍，但是一旦为两个查询缓存了查询计划，仓库查询就会始终快 20 倍（无论如何对我来说都是如此）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:10:57.083

也许保留数据的非规范化版本？

例如：[http ://sqlfiddle.com/#!3/300a5/2](http://sqlfiddle.com/#!3/300a5/2)

```
select 
    *
    ,DATENAME(day, [date]) as day
    ,DATENAME(month, [date]) as month
    , DATENAME(year, [date])  as year
    ,DATENAME(quarter, [date]) as quarter
into deNormalised 
from #sales 
```

然后您可以运行以下查询：

```
select 
    year
    ,sum(price)
from 
    deNormalised
where 
    quarter = 1
group by 
    year 
```

比较不同年份的第一季度

显然，这意味着您必须制定一个计划来维护数据的非规范化版本。您可以通过更新或每小时触发来执行此操作。

您也可以尝试将最新数据添加到非规范化结果中。这样您只会对今天创建的行进行缓慢的处理。

编辑：我不知道仅使用 DATENAME 函数是否会提高使用现有结构的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-01T21:45:14.063

```
select 
     SellerID
    ,sum(case when [Date]=getdate() then [Price] else 0 end) as Today
    ,sum(case when datepart(week,[Date])=datepart(week,getdate()) then [Price] else 0 end) as ThisWeek
    ,sum(case when datepart(MONTH,[Date])=datepart(month,getdate()) then [Price] else 0 end) as ThisMonth
    ,sum(case when datepart(QUARTER,[Date])=datepart(QUARTER,getdate()) then [Price] else 0 end) as ThisQUARTER
from #sales
Group by SellerID 
```

# sql - 等待 sql 加载器工作结束，然后在 unix bash 文件中执行 sql 脚本

> ID：10352624
> 
> 赞同：0
> 
> 时间：2012-04-27T14:34:33.700
> 
> 标签：sql, bash, wait, sql-loader

明天对我来说是一个工作日=（。科尔斯，我需要那个 sql 脚本等待我的 -bash 脚本中的 sql*loader 工作结束。下面的代码是否正确？：

```
#!/bin/bash

echo -------- uploader.sh v 0.1 --------
# @echo; 

export NLS_LANG=russian_cis.ru8pc866
export NLS_NUMERIC_CHARACTERS='.'

ORACLE_HOME=/opt/app/oracle/product/10.2.0/db_1/bin
export ORACLE_HOME
PATH=$ORACLE_HOME
export PATH

sqlldr userid=myscheme/0611@TEST_DB control=control_file.ctl LOG=test_log.log errors=100

wait #here i want to wait sqlloader executing

sqlplus userid=myscheme/0611@TEST_DB 10.33.19.13/test/DATA_UPLOAD/mysql_script.sql 
```

[我在这里](http://unstableme.blogspot.com/2008/06/bash-wait-command.html)读过等待功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:35:55.630

默认情况下，Shell 脚本仅在前一个命令完成后才执行命令。唯一的例外是当您在后台线程中使用`&`. 所以执行

```
sqlldr userid=myscheme/0611@TEST_DB control=control_file.ctl LOG=test_log.log errors=100
sqlplus userid=myscheme/0611@TEST_DB 10.33.19.13/test/DATA_UPLOAD/mysql_script.sql 
```

已经会做你想做的事了。

但是，如果您想使用单独的线程以便可以在主线程中继续执行，则可以使用

```
sqlldr userid=myscheme/0611@TEST_DB control=control_file.ctl LOG=test_log.log errors=100 &
pid=$!
#do other stuff
wait $pid
sqlplus userid=myscheme/0611@TEST_DB 10.33.19.13/test/DATA_UPLOAD/mysql_script.sql 
```

这将允许您`do other stuff`在`sqlldr`命令完成时进行。然后程序将等待`sqlldr`命令完成，然后再调用`sqlplus`.

# android - 无法解决@style/Theme.Sherlock

> ID：10352628
> 
> 赞同：16
> 
> 时间：2012-04-27T14:34:47.307
> 
> 标签：android, actionbarsherlock

我正在尝试使用 Actionbar Sherlock 4，针对 sdk 15 和 min sdk 8。按照使用网站上提供的说明和此处发布的精彩视频进行操作后：[http ://www.youtube.com/watch?v= avcp6eD_X2k](http://www.youtube.com/watch?v=avcp6eD_X2k)

我仍然遇到问题。当我尝试将 android:theme="@style/Theme.Sherlock" 添加到清单文件中时，出现错误：

> 未找到与给定名称匹配的资源（在“主题”处，值为“@style/Theme.Sherlock”）。

我已将 actionbar Sherlock 库项目包含到我的项目中，并且导入语句在那里并且没有出现任何错误，我已经

> 扩展 SherlockActivity 实现 ActionBar.TabListener

就像在演示代码和文档中一样，但是，eclipse 仍然给我这个错误。有什么想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-11T06:02:31.500

我遇到的陷阱是：对 ActionBarSherlock 项目的引用需要在项目属性的 Android->Libraries 部分中，而我一直将它添加到 Build Path->Libraries 中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-27T15:32:31.267

我遇到了一个可能有帮助的奇怪异常！

已经构建了使用 ABS 的 android 项目，在 Gingerbread 上运行它工作正常，在 ICS 中它崩溃了，ICS 下的崩溃是由于这个原因，检查你的*AndroidManifest.xml*（为了简洁起见，删掉了一些位......

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:theme="@style/Theme.Sherlock"> 
```

是***android:theme***部分导致了 ICS 下的崩溃，它在 Gingerbread 和旧版本下运行良好！解决方案是完全删除它！然后从您的活动中，执行以下操作：

```
@Override
public void onCreate(Bundle savedInstanceState) {
   if (Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH){
        this.setTheme(com.actionbarsherlock.R.style.Theme_Sherlock);
   }
   super.onCreate(savedInstanceState);
   ... // MORE CODE ....
} 
```

这修复了 ICS 下的崩溃，ICS 不喜欢主题风格，但它适用于小于 2.3 和 4.0 以上的两个版本.. 奇怪的错误，但我是侥幸发现的！

*记得在调用基类自己的onCreate*之前应用主题！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T15:23:58.607

我在 Eclipse 上包含库项目的标准过程如下：

*   导入库项目
*   右键单击库项目 Properties -> Android -> Set Project Build Target （确保库和主项目相同）
*   右键单击库项目 Android 工具 -> 修复项目属性
*   选择库项目，然后选择 Project -> Clean...
*   选择主项目，然后选择项目 -> 清理...

这应该可以解决你的任何问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T13:39:14.590

我终于找到了解决方案：

1.  重要的！在两个项目中复制相同的 android-support-v4.jar：在库和您的项目中（这是主要问题）。
2.  将“库”项目导入您的工作空间
3.  右键单击库项目 Properties -> Android -> Check "Target Name" 4.x (any, API level 14,15 or 16)。底部检查“是图书馆”。
4.  在属性中，转到“Java Build Path”，选项卡“Libraries”并在“Android Dependencies”中通常找到“android-support-v4.jar”。确定并关闭属性。
5.  右键单击库项目 Android 工具 -> 修复项目属性
6.  在 Menu Project -> Clean... 并选择清理“Library”项目。

在这个地方，你的项目“库”必须完成（没有错误）

1.  创建或导入您自己的项目。示例“我的项目”
2.  在属性中，转到“Java Build Path”，选项卡“Libraries”并在“Android Dependencies”中通常找到“android-support-v4.jar”。
3.  现在转到“项目”选项卡。添加...并选择“库”项目。
4.  现在在属性中转到 Android -> 检查“目标名称”4.x（任何，API 级别 14,15 或 16）。重要提示：必须与“库”项目相同。底部的“是图书馆”必须取消选中，在这个地方按添加...并选择“图书馆”项目。确定并关闭属性。
5.  右键单击“MyProject”项目 Android 工具 -> 修复项目属性
6.  在 Menu Project -> Clean... 并选择清理“MyProject”项目。

已经，您的项目必须完成。如果错误仍然存​​在，请重新启动 Eclipse。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T23:50:07.223

我通过以下两个步骤解决了这个问题：

1.  从“项目属性”/构建路径中删除“库”并在“项目属性”/Android/Library 中添加库
2.  右键单击项目“Android工具”->“添加支持库”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-26T17:50:37.407

在导入两个项目（即库和设置活动）后，首先清理并构建它们。然后右键单击settingActivity项目->属性->从左侧菜单中选择第二个选项（即android）。在右侧他们是库部分只需单击添加库。prper 路径将自动进入该框架。那解决了我的问题，我没有错误。

# android - 有没有办法让 Android 清单中的元数据对包私有？

> ID：10352629
> 
> 赞同：6
> 
> 时间：2012-04-27T14:34:48.773
> 
> 标签：android, service, metadata, android-manifest, android-package-managers

我想在 Android 清单中使用元数据来自定义服务的行为。

```
<service
    android:name=".SampleService"
    android:exported="false">
    <meta-data
        android:name="sampleName"
        android:resource="@string/sampleValue" />
</service> 
```

我的服务是图书馆的一部分，有些人在使用我的服务时可能会将敏感数据放入这些属性中。即使没有导出服务，这些元数据属性是否通过 PackageManager 对手机上其他已安装的包可见？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T14:40:04.263

> 即使没有导出服务，这些元数据属性是否通过 PackageManager 对手机上其他已安装的包可见？

是的。清单中的所有内容以及资源和资产中的所有内容都可供设备上的所有应用程序访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:25:33.420

~~正如 CommonsWare 所说，在做了一些测试之后，我确认所有元数据字段对所有包都是可见的。但是，我还发现您可以通过使用 android:resource 而不是 android:value 来保持 value 的内容私有。当您使用 android:resource 时，PackageManager 只会返回资源的整数 id，因此只有您的包才能访问实际的资源值。~~

**更新：** 事实证明，CommonsWare 又是对的。在进一步调查后，所有资源和资产对设备上安装的所有软件包都是公开可见的。不需要任何权限。

```
PackageManager pm = getPackageManager();
PackageInfo info = pm.getPackageInfo("test.package", PackageManager.GET_META_DATA|PackageManager.GET_SERVICES);
int resourceId = info.services[0].metaData.getInt("sampleName");
String resourceValue = pm.getResourcesForApplication("test.package").getString(resourceId); 
```

# php - 如何使用 wamp 在 netbeans 7.1.1 中为 zend 框架 1.11.11 设置开发环境？

> ID：10352631
> 
> 赞同：0
> 
> 时间：2012-04-27T14:34:49.577
> 
> 标签：php, mysql, apache, zend-framework, netbeans

嘿伙计们，我需要你的帮助来设置 zendframe 工作的环境吗？我已经在 D:/program files/netbeans 下的 D: 驱动器中安装了我的 netbeans。而zend框架在D:驱动下。我的 wamp 包安装在 c:/wamp 下。现在我需要为我的开发配置这些？

我一整天都在搜索谷歌、stackoverflow 和每个博客。但我得到的只是下面给出的错误。

'"php.exe"' 不是内部或外部命令、可运行程序或批处理文件。

告诉我如何解决这个问题？我应该怎么办 ？我需要将所有这些设置在一个屋檐下还是我需要升级我的 PHP 版本？？？

是的，我的配置写在下面。

WAMP 服务器 2.0c 与 PHP 5.2.6、MySQL 5.0.51b、Apache 2.2.8。

Netbeans 7.1.1 和 Zend 框架 1.11.11

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:45:43.593

将 php.exe 添加到环境变量 PATH。如果将安装 php.exe 的目录添加到 PATH 环境变量中（可能需要注销才能生效），它应该可以工作。

[看这个教程](http://samsami2u.wordpress.com/2008/07/18/phpexe-is-not-recognized-as-an-internal-or-external-command/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:15:20.800

首先更新到最新版本的 PHP。

然后，确保 PHP 在您的环境 PATH 变量中。你可以在谷歌上查找如何做到这一点。

完成该设置后，您也必须安装 phpunit。WAMP 可能会附带它，但我对此表示怀疑。如果你有梨，通常这很容易。您可以从 phpunit 站点获取 pear 命令。

如果您没有梨，则必须安装它。下载适合您的“go-pear.phar”文件。您通常通过运行来安装它`php go-pear.phar' and then you can use pear it install phpunit.`

 `You can then call it a day OR you can continue setting up Netbeans to automatically use phpunit.

If you don't setup netbeans then you'll have to just use phpunit on the command line.

After the pear phpunit install just run phpunit on the command line and you should get some sort of 'help' output.

Edit : Step by step details.

I'm going to assume you have xdebug, php, netbeans installed from your comments. It seems like your only issue is installing phpunit.

Here goes.

1.  Open up a command prompt

2.  Open a browser window.

3.  In your browser go to [http://pear.php.net/go-pear](http://pear.php.net/go-pear)

4.  Save the text file that comes up into the directory php is installed in.

5.  Go to the php directory php is installed in via the cd command on the terminal.

6.  Type in the command `php go-pear.phar`

7.  Follow the installation instructions for pear and pick the options that make the most sense. I just install everything in the php directory so php and pear live in the same place.

8.  After pear is installed type in the following commands ( from the phpunit install website : [http://www.phpunit.de/manual/current/en/installation.html](http://www.phpunit.de/manual/current/en/installation.html) ) You might have to use sudo here, if you're on windows maybe not.

    pear config-set auto_discover 1

    pear install pear.phpunit.de/PHPUnit` 

`9 Run phpunit -h`在命令行上，你应该得到一些帮助信息。如果您在 Windows 上，您可能必须在尝试之前打开一个新的命令行提示符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:50:03.217

您实际上可以在`Options - PHP - General`选项卡中指定 Netbeans 中 PHP 解释器的路径。

也许您也应该设置 include_path 以使 Zend 模块（至少自动加载一个）可识别。

# gnuplot - Gnuplot，Multiplot：将法线图和参数图与单个图例框混合？

> ID：10352632
> 
> 赞同：3
> 
> 时间：2012-04-27T14:34:53.020
> 
> 标签：gnuplot

我在 Gnuplot 中创建重叠图，因为我混合了法线图和参数图（以及 pm3d 地图和参数曲面）。这大部分都很好，除了一件事：如果两个图都有标题，则图例通常会重叠。一个典型的例子如下所示：

```
#legends.gp
set term pngcairo enhanced color linewidth 1.5  dashed dashlength 1.4 rounded
set output "legends.png"

set title "legends test"

set multiplot

# make a box around the legend
set key box

set border 15 lw 1

# fix the margins, this is important to ensure alignment of the plots.
set lmargin at screen 0.15
set rmargin at screen 0.98
set tmargin at screen 0.90
set bmargin at screen 0.15

set xlabel "x"
set ylabel "sin(x)"

set xrange[0:2*pi]
set yrange[-1:1]

set grid x y

# add single tic at 0.62
set xtics add ("x0" 0.62)

# main plot command
plot sin(x) title "sinus"

# turn everything off
set format x ""   #numbers off
set format y ""
set xlabel ""     #label off
set ylabel ""
set border 0      #border off
unset xtics       #tics off
unset ytics
unset grid        #grid off
unset title       #title off

#plot vertical line at 0.62
set parametric
plot 0.62,t ls 2 lw 2 title "parametric Line"
unset parametric

unset multiplot 
```

![传奇.png](../Images/6cd43954885b7315bafe46dfa6472c9c.png) 我现在的问题是，是否有一种简单的、主要是自动的方法来为多个图创建一个图例？

PS 抱歉，我最终通过显示更多功能使示例文件变得比它必须的更复杂，希望对未来的读者有所帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T17:50:18.007

这是一个**非常**肮脏的黑客，对我有用。改变：

```
plot sin(x) title "sinus" 
```

至：

```
plot sin(x) title "sinus",NaN w l ls 2 lt 2 title "parametric line" 
```

然后绘制没有标题的参数线（例如`notitle`，代替`title "parametric line"`）。

这是因为 gnuplot 在绘图时忽略了 NaN ——本质上，我们在上面绘制的第二件事只是在图例中添加了一个元素。我将线型等指定为与您的参数绘图线型/类型相同，以便它在图例中正确显示。据我所知，这是做这样的事情的唯一方法......

当然，您可以只编辑它，以便以参数方式绘制两者并放弃整个多图业务......

```
set xrange [0:2*pi]
set yrange [-1:1]
set parametric
set trange [-10:10]
plot t,sin(t) title "Hello", 0.62,t title "World" 
```

这可能是“更清洁”的解决方案......（但使用 gnuplot“魔法”的乐趣较少）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:35:00.940

从 gnuplot 信息手册：

要在 x=3 处从图形底部到顶部绘制一条垂直线，请使用： set arrow from 3, graph 0 to 3, graph 1 nohead

# javascript - 使用 JavaScript 从 URL 中提取和使用 JSON 数据

> ID：10352636
> 
> 赞同：0
> 
> 时间：2012-04-27T14:35:08.023
> 
> 标签：javascript, json

如何使用 JavaScript 提取和使用 JSON 数据？

例如，此[URL](https://graph.facebook.com/btaylor)具有以下 JSON：

```
{
   "id": "220439",
   "name": "Bret Taylor",
   "first_name": "Bret",
   "last_name": "Taylor",
   "link": "http://www.facebook.com/btaylor",
   "username": "btaylor",
   "gender": "male",
   "locale": "en_US"
} 
```

如何将这些数据放入 JavaScript 变量中？

我现在不打算使用 Facebook API 或任何动态的东西，只是将 JSON 数据从静态 URL 获取到 JavaScript。

在 PHP 中，我可以很容易地做到这一点：

```
$contents = file_get_contents($url);
$jsonObj = json_decode($contents);
echo "Name: ".$jsonObj->{'name'}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:40:05.540

您需要使用[AJAX](https://developer.mozilla.org/en/AJAX)或[脚本加载器](http://dustindiaz.com/scriptjs)来获取您的 JSON 字符串，然后[解析](https://developer.mozilla.org/En/Using_native_JSON)JSON 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:41:20.300

我推荐jQuery的`$.getJSON()`方法

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

在此处使用您的数据进行现场演示：http: [//jsfiddle.net/6ZeJ8/3/](http://jsfiddle.net/6ZeJ8/3/)

当然，你需要 jQuery 来使用这个方法，把它放到`<head>`你的 HTML 中，应该可以正常工作的。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script> 
```

# json - Flash Builder + JSON + ac3corelib = 错误

> ID：10352637
> 
> 赞同：0
> 
> 时间：2012-04-27T14:35:10.230
> 
> 标签：json, flash, apache-flex

我正在尝试使用 URLLoader 接收数组。我将 ac3corelib 包含到我的项目中并声明了 JSON 库：“import com.adobe.serialization.json.JSON;” 但是，当我使用“JSON.decode(e.target.data)”时，我收到错误“访问未定义的属性 JSON”。

这是代码：

```
import com.adobe.serialization.json.JSON;

private function getContacts():void {
var contacts:URLLoader = new URLLoader();

contacts.addEventListener(Event.COMPLETE, onLoaded);

function onLoaded(e:Event):void {
    var con:Object = JSON.decode(e.target.data);
}

contacts.load(new URLRequest("http://domain.com/cmd.php?action=contacts"));
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:05:05.347

使用下面的代码

```
var con:Object = com.adobe.serialization.json.JSON.decode(e.target.data); 
```

代替

```
var con:Object = JSON.decode(e.target.data); 
```

不要忘记在 package import com.adobe.serialization.json.JSON 下导入；

它对我有好处！

# ruby-on-rails - Rails gem 在执行“rake test”时使用开发数据库而不是测试数据库

> ID：10352638
> 
> 赞同：1
> 
> 时间：2012-04-27T14:35:12.423
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, gem, database-connection

我在我的 rails 3 项目中使用 gem，“rails-settings-cached”，当我处于开发模式时，gem 可以毫无问题地访问数据库。但是，当我运行“rake test”时，很多测试都失败了，因为“rails-settings-cached”继续使用开发数据库而不是测试数据库。

我的应用程序的其他部分工作正常。我应该怎么做才能将 gem 连接到正确的数据库？

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: mmdb_development
  pool: 5
  username: ***
  password: ***
  socket: /var/run/mysqld/mysqld.sock

test:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: mmdb_test
  pool: 5
  username: ***
  password: ***
  socket: /var/run/mysqld/mysqld.sock 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:51:53.087

问题是 rails-settings-cached ......好吧......缓存了设置。因此，当您运行测试时，它实际上使用的是“开发”数据库中的旧缓存值。

可以`rake tmp:cache:clear`在测试之前和之后运行可能的解决方法。它可以工作，但要使其自动化，您可以将这些方法放入**test_helper.rb**：

```
def setup
  Rails.cache.clear
end

def teardown
  Rails.cache.clear
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:02:13.817

缓存的问题`rails-settings-cached`在于 Rails 3.2.8（可能在 Rails 3 上）中的默认缓存是`ActiveSupport::Cache::FileStore`. 这缓存到位于共享位置的文件，因此在开发、测试和生产之间共享。这可能会导致各种问题！

[Caching with Rails Guide](http://guides.rubyonrails.org/caching_with_rails.html)声称默认值为，`ActiveSupport::Cache::MemoryStore`但文档似乎不正确。我已经提交了一个关于明显文档不准确的问题。

一种解决方案是将测试和开发切换到使用`ActiveSupport::Cache::MemoryStore`. 如果默认的 32 兆字节就足够了，您可以简单地将以下行添加到 both`development.rb`和`test.rb`in `config/environments`（`.configure do`当然是在块内）：

```
config.cache_store = :memory_store 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:47:08.057

尝试在 test_helper.rb 文件顶部的 test/test_helper.rb 中明确设置您的 rals env 进行测试

```
ENV["RAILS_ENV"] = "test" 
```

# java - 在 RpcMap 中遇到空指针异常？

> ID：10352640
> 
> 赞同：1
> 
> 时间：2012-04-27T14:35:19.293
> 
> 标签：java, gwt, serialization, gxt

我正在尝试从文件中读取服务器端对象的序列化 DTO，我可以毫无例外地读取它，但是当 rpc 回复客户端时抛出一些异常

```
 java.lang.NullPointerException
at com.extjs.gxt.ui.client.data.RpcMap.size(RpcMap.java:198) 
```

问题是什么？

我使用 GXT 2.2.5。

这是服务器端代码

```
public List<ShellCommand> getCommands(String user, String platform)
        throws CVSServiceException {
        readFromFile();
        if(commands.isEmpty())
            return null;
        else
            return commands;
}

private void readFromFile(){
    File readFile = new File(DIR, SHELLCOMMAND);
    if(readFile.exists()){
        try{
            InputStream file = new FileInputStream(readFile);
            InputStream buffer = new BufferedInputStream( file );
            ObjectInput input = new ObjectInputStream ( buffer );
            try{
                commands = (List<ShellCommand>) input.readObject();
            } catch(Exception e){
                e.printStackTrace();
            } finally{
                input.close();
            }
        } catch(Exception e){
            e.printStackTrace();
        }
    } 
```

我可以准确地阅读和感受我的列表`commands`，但是在`getcommands()`从客户端调用后，它会抛出此错误导致我的 RPC 调用失败？

# jsf-2 - 发布后在 JSF 中处理视图参数

> ID：10352641
> 
> 赞同：12
> 
> 时间：2012-04-27T14:35:20.843
> 
> 标签：jsf-2, viewparams

我有几个页面需要 userId 才能工作，因此下面的代码：

用户页面.xhtml

```
<!-- xmlns etc. omitted -->
<html>
<f:metadata>
    <f:viewParam name="userId" value="#{userPageController.userId}"/>
</f:metadata>
<f:view contentType="text/html">
<h:head>
</h:head>
<h:body>
    <h:form>
        <h:commandButton action="#{userPageController.doAction}" value="post"/>
    </h:form>
</h:body>
</f:view> 
```

用户页面控制器.java

```
@Named
@ViewScoped
public class userPageControllerimplements Serializable {
    private static final long serialVersionUID = 1L;

    @Inject protected SessionController sessionController;
    @Inject private SecurityContext securityContext;
    @Inject protected UserDAO userDAO;

    protected User user;
    protected Long userId;

    public UserPage() {
    }

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public Long getUserId() {
        return userId;
    }

    public void setUserId(Long userId) {
        if(!FacesContext.getCurrentInstance().isPostback()){
            User u = userDAO.find(userId);
            this.userId = userId;
            this.user = u;
        }
    }

    public void doAction(){

    }

} 
```

但是调用doAction之后，url中的view参数就消失了。由于其视图范围的性质，该 bean 仍然有效，但它破坏了我未来导航的尝试。当我四处搜索时，我得到的印象是视图参数应该在帖子之后保留，因此读取 userpage.jsf?userId=123，但事实并非如此。真正的预期行为是什么？

与此相关，我尝试在导航到要保留 userId 的另一个页面时实现视图参数的自动添加。它似乎对其他人有用，但对我来说， ViewRoot 中的 userId 始终为空。下面的代码用于检索视图参数（我知道我可以使用 bean 中临时存储的 userId 进行导航，但这个解决方案会更漂亮）：

```
 String name = "userId";
    FacesContext ctx = FacesContext.getCurrentInstance();
    ViewDeclarationLanguage vdl = ctx.getApplication().getViewHandler().getViewDeclarationLanguage(ctx, viewId);
    ViewMetadata viewMetadata = vdl.getViewMetadata(ctx, viewId);
    UIViewRoot viewRoot = viewMetadata.createMetadataView(ctx);
    UIComponent metadataFacet = viewRoot.getFacet(UIViewRoot.METADATA_FACET_NAME);

    // Looking for a view parameter with the specified name
    UIViewParameter viewParam = null;
    for (UIComponent child : metadataFacet.getChildren()) {
        if (child instanceof UIViewParameter) {
            UIViewParameter tempViewParam = (UIViewParameter) child;
            if (name.equals(tempViewParam.getName())) {
                viewParam = tempViewParam;
                break;
            }
        }
    }

    if (viewParam == null) {
        throw new FacesException("Unknown parameter: '" + name + "' for view: " + viewId);
    }

    // Getting the value
    String value = viewParam.getStringValue(ctx);  // This seems to ALWAYS be null. 
```

最后一个想法是 setter 方法似乎仍然有效， setUserId 在发布时使用正确的值调用。

我是否完全误解了视图参数的工作原理，或者这里是否存在某种错误？我认为我的用例应该非常*普遍*，并且在框架中有基本的支持。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-27T15:50:09.807

> *当我四处搜索时，我得到的印象是视图参数应该在帖子之后保留，因此读取 userpage.jsf?userId=123，但事实并非如此。真正的预期行为是什么？*

这种行为是正确的。`<h:form>`生成一个`<form>`带有操作 URL 的 HTML 元素，没有**任何**视图参数。POST 请求只是提交到该 URL。如果你打算将视图参数保留在 URL 中，那么基本上有 3 种方式：

1.  引入一些 ajax 魔法。

    ```
    <h:commandButton action="#{userPageController.doAction}" value="post">
        <f:ajax execute="@form" render="@form" />
    </h:commandButton> 
    ```

    这样，最初请求的页面以及浏览器地址栏中的请求 URL 始终保持不变。

2.  如果适用（例如页面到页面导航），请将其设为 GET 请求并使用`includeViewParams=true`. 您可以为此使用`<h:link>`和：`<h:button>`

    ```
    <h:button outcome="nextview?includeViewParams=true" value="post" /> 
    ```

    但是，这在早于 2.1.6 的 Mojarra 版本中存在 EL 安全漏洞。确保您使用的是 Mojarra 2.1.6 或更高版本。另见[问题 2247](http://java.net/jira/browse/JAVASERVERFACES-2247)。

3.  控制`<h:form>`自己的动作 URL 的生成。提供一个自定义[`ViewHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html)（只是扩展[`ViewHandlerWrapper`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandlerWrapper.html)），您可以在其中完成工作[`getActionURL()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html#getActionURL%28javax.faces.context.FacesContext,%20java.lang.String%29)。

    ```
    public String getActionURL(FacesContext context, String viewId) {
        String originalActionURL = super.getActionURL(context, viewId);
        String newActionURL = includeViewParamsIfNecessary(context, originalActionURL);
        return newActionURL;
    } 
    ```

    要让它运行，请`faces-config.xml`按如下方式注册它：

    ```
    <application>
        <view-handler>com.example.YourCustomViewHandler</view-handler>
    </application> 
    ```

    这也是[OmniFaces](http://omnifaces.org) [`<o:form>`](http://showcase.omnifaces.org/components/form)正在做的事情。它支持一个附加`includeViewParams`属性，该属性包括表单操作 URL 中的所有视图参数：

    ```
    <o:form includeViewParams="true"> 
    ```

* * *

**更新**：以编程方式获取当前视图的视图参数（这基本上是你的第二个问题）应该如下完成：

```
Collection<UIViewParameter> viewParams = ViewMetadata.getViewParameters(FacesContext.getCurrentInstance().getViewRoot());

for (UIViewParameter viewParam : viewParams) {
    String name = viewParam.getName();
    Object value = viewParam.getValue();
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T13:59:37.737

我是否正确，要使解决方案 1`<f:ajax execute="@form" render="@form" />`起作用，还必须包括类似的内容

```
<f:param name="userId" value="#{userPageController.userId}"/> 
```

里面`<h:commandButton>`？

就像在[https://stackoverflow.com/a/14026995/811046中描述的那样](https://stackoverflow.com/a/14026995/811046)

# javascript - 如果字段名称包含“。”，如何在 javascript 中使用 HTML 字段名称 （点）？

> ID：10352647
> 
> 赞同：6
> 
> 时间：2012-04-27T14:35:34.453
> 
> 标签：javascript, html, forms, radio-button, stripes

我 在我的jsp页面中使用`<detail:form>`and 。`<tags:field >`我尝试查看浏览器使用 firebug 生成的源代码，它向我显示表单名称是“ **checkForm** ”，并且所有字段名称都有**“check”。**作为前缀。因此，该字段（它是一个单选按钮）的名称之一是`check.isEndorseByApplicant`.

What I am trying to achieve is, when a some element in a drop down menu is selected, I wanted to change the radio button from yes to no. 问题是由于该字段的名称中包含点，所以我不能这样做。即**document.checkForm.check.isEndorseByApplicant**不适合我。目前我无法从字段名称中取出点。有任何想法吗？

```
 function autoSelect(checkEndorsement)
            {
            alert(document.checkForm.check.isEndorseByApplicant)
                if(checkEndorsement.value=="Student")
                    check.isEndorsedBy[0].checked=true;
                else
                    check.isEndorsedBy[1].checked=true;
            }

        </html:javascript> 
```

. . .

```
<detail:form object="check" > 
```

. . . .

```
<td><tags:field property="isEndorseByApplicant" onclick="autoSelect(this.form);"  /></td> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T14:38:21.097

利用`document.checkForm.elements['check.isEndorseByApplicant']`

# unicode - 勾号U+2713和U+2714有什么区别

> ID：10352654
> 
> 赞同：3
> 
> 时间：2012-04-27T14:36:10.803
> 
> 标签：unicode, symbols

从视觉方面来看……那些刻度符号有什么不同的语义吗？

我的意思是：一个很瘦，另一个很大胆。但是......对于其中一个有什么特殊含义吗？还是只是使用一个或另一个图形方面的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:50:05.067

> 从视觉方面看。

这里没有 appart，视觉方面是 Unicode 中的 King。U+2713 是一个复选标记。U+2714 是一个很重的复选标记。如果你有一个体面的字体，它应该显示为 U+2713 的粗体版本。

这些代码点位于名为 Dingbats 的组中，这是一组印刷符号。棋子、箭头、星号之类的东西。它们没有附加语义。它只是更重。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T15:29:50.937

与 Unicode 中的大多数字符不同，Dingbats 范围 U+27xx 没有特定的语义内容。除了“一个在视觉上比另一个更粗的复选标记”之外，“重”复选标记没有任何意义；将此与平面中具有数学意义的“粗体”字母进行对比。

这一系列字符来自符号字体 Zapf Dingbats。符号字体本质上是可视的，不太适合 Unicode，但 Zapf Dingbats 作为 PostScript 核心字体集之一具有历史意义，保证可在 PS 打印机上使用。随后来自 Zapf Dingbats 的字符已普遍用于文档交换，因此值得对其进行标准化。

# c# - 无法在 c# windows 应用程序的 wia 扫描仪中获取完整图像

> ID：10352660
> 
> 赞同：2
> 
> 时间：2012-04-27T14:36:22.057
> 
> 标签：c#

我正在使用 wia 扫描仪的代码。但是在 75dpi 之后，扫描仪没有给我完整的图像。我从扫描仪中只得到了一半的图像。请检查一下。

```
 private static void SaveImageToPNGFile(ImageFile image, string fileName)
    {
        ImageProcess imgProcess = new ImageProcess();
        object convertFilter = "Convert";
        string convertFilterID = imgProcess.FilterInfos.get_Item(ref convertFilter).FilterID;
        imgProcess.Filters.Add(convertFilterID, 0);
        SetWIAProperty(imgProcess.Filters[imgProcess.Filters.Count].Properties, "FormatID", WIA.FormatID.wiaFormatPNG);
        image = imgProcess.Apply(image);
        image.SaveFile(fileName);
    }
    private static void AdjustScannerSettings(IItem scannnerItem, int scanColor,
        int scanWidthPixels, int scanHeightPixels, int brightnessPercents, int contrastPercents)
    {

        SetWIAProperty(scannnerItem.Properties, "4104", 24);
        SetWIAProperty(scannnerItem.Properties, "6146", scanColor);
        SetWIAProperty(scannnerItem.Properties, "6147", 75);//Horizontal resolution
        SetWIAProperty(scannnerItem.Properties, "6148", 75);//vertical resolution

        SetWIAProperty(scannnerItem.Properties, "6151", scanHeightPixels);
        SetWIAProperty(scannnerItem.Properties, "6152", scanWidthPixels);
        SetWIAProperty(scannnerItem.Properties, "6154", brightnessPercents);//range from -100 to 100\. 0 refer for the normal brightnes
        SetWIAProperty(scannnerItem.Properties, "6155", contrastPercents);//range from -100 to 100\. 0 refer for the normal brightnes
    }
    private static void SetWIAProperty(IProperties properties, object propName, object propValue)
    {
        Property prop = properties.get_Item(ref propName);
        prop.set_Value(ref propValue);
    }
    private void button1_Click(object sender, EventArgs e)
    {
        int height = int.Parse(textBoxheight.Text.Trim());
        int width = int.Parse(textBoxwidth.Text.Trim());

        CommonDialogClass commonDialogClass = new CommonDialogClass();
        Device scannerDevice;
        try
        {

            scannerDevice = commonDialogClass.ShowSelectDevice(WiaDeviceType.ScannerDeviceType, false , false);
            if (scannerDevice != null)
            {

                Item scannnerItem = scannerDevice.Items[1];
                AdjustScannerSettings(scannnerItem, 4, height, width, 20, 20);//dpi valid only for 150,200,300,400
                object scanResult = commonDialogClass.ShowTransfer(scannnerItem, WIA.FormatID.wiaFormatPNG, false);
                if (scanResult != null)
                {
                    ImageFile image = (ImageFile)scanResult;
                    // Image objimg = (Image)image;
                    string fileName = Path.GetTempPath() + DateTime.Now.ToString("dd-MM-yyyy-hh-mm-ss-fffffff") + ".png";
                    SaveImageToPNGFile(image, fileName);
                    pictureBox1.ImageLocation = fileName;
                    //pictureBox1.Height = height;
                    //pictureBox1.Width = width;
                    pictureBox1.SizeMode = PictureBoxSizeMode.AutoSize;
                    Bitmap obj = new Bitmap(fileName);
                    panel1.BackgroundImage = obj;
                    panel1.AutoSize = true;
                    panel1.AutoScroll = true;

                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    private void button3_Click(object sender, EventArgs e)
    {
        pictureBox1.SizeMode = PictureBoxSizeMode.StretchImage;
    }

    private void button2_Click(object sender, EventArgs e)
    {
        pictureBox1.SizeMode = PictureBoxSizeMode.AutoSize;
    }

    private void linkLabel1_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        this.Hide();
        wiascan obj = new wiascan();
        obj.Show();
    }
} 
```

我尝试在图片框和面板中显示我的图像，但两个控件都无法给我完整的图像。

# matlab - 3D 样条插值 Matlab

> ID：10352662
> 
> 赞同：1
> 
> 时间：2012-04-27T14:36:37.117
> 
> 标签：matlab, interpolation

我有两个 3D 数组：

```
 A=[
12751   4616    15915
15864   4622    15667
12877   4683    21050
15816   4668    21253
11374   5006    18495
16995   5466    18493
11638   4880    20023
17078   4938    20006
11576   4886    17011
]; 
```

和

```
 B=[
12402   2138    15743
10285   3175    15851
10237   3084    21052
12130   2129    21299
8074    3802    18505
14515   1623    18497
8415    3713    19856
14462   1120    20061
8340    3711    17145
14483   1157    16990]; 
```

我想在 Matlab 中使用它们之间的样条曲线或 3D 插值。我`Interp3`应该如何定义？`V``VI = interp3(X,Y,Z,V,XI,YI,ZI)`

或`Y`在`yy = spline(x,Y,xx)`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:24:54.397

我不太了解您的数据，是（或反之亦然）`B`的函数吗？`A`此外，这些阵列似乎是 1D，而不是 3D。你能澄清一下吗？

在你的函数调用中

```
yy = spline(x, Y, xx) 
```

`Y`是您要插值的因变量：`Y`是的函数，`x`上述函数调用的结果是返回`Y`at的值`xx`。作为一维的示例，请尝试

```
x = linspace(0., 2.*pi, 100);
Y = sin(x);

% What is the value of Y (or sin(x)) at pi/2?
xx = pi/2.;
yy = spline(x, Y, xx); % This should result in yy = 1.000 
```

查看[`spline`文档](http://www.mathworks.co.uk/help/techdoc/ref/spline.html)以获取更多信息和使用此功能的示例。

现在这个函数只适用于 1D 拟合，并且（我认为）等价于`yy = interp1(x, Y, xx, 'spline')`. 如果要进行三维查找，则必须使用`interp3`，它将上述示例推广到 3D。因此，除了一个独立的坐标 之外`x`，我们还有两个`y`、`z`和 三个坐标用于我们要执行查找的点`xx`：`yy`和`zz`。您正在插值的函数必须是坐标的 3D 函数`(x, y, z)`。尝试，例如：

```
x = linspace(-1., 1., 100); y = x; z = x;
[X, Y, Z] = meshgrid(x, y, z);
s = exp(-sqrt(X.^2 + Y.^2 + Z.^2));

sinterp = interp3(x, y, z, s, 0., 0., 0.) % Should give sinterp = 0.9827 
```

# objective-c - 将 NSString 写入文件

> ID：10352665
> 
> 赞同：2
> 
> 时间：2012-04-27T14:36:47.553
> 
> 标签：objective-c, ios, xcode, file

我正在尝试将字符串写入文件并将其存储在我的应用程序的 applicationSupport 文件夹中。但是我的 NSLog() 语句没有在调试器中记录任何内容。我试图用调试器检查它，我可以看到内容是 nil，所以我猜这就是它不输出任何东西的原因，但我不知道为什么它设置为 nil。谁能看到我的错误？

```
 NSString *document = [[[[[[[[description stringByAppendingString:@" "]stringByAppendingString:focus]stringByAppendingString:@" "]stringByAppendingString:level]stringByAppendingString:@" "]stringByAppendingString:equipment]stringByAppendingString:@" "]stringByAppendingString:waterDepth];
//NSLog(@"%@", document);

//get the documents directory:
NSArray *paths = NSSearchPathForDirectoriesInDomains
(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *supportDirectory = [paths objectAtIndex:0];

//filename
NSString *filename = [NSString stringWithFormat:[_nameTextField.text stringByAppendingString:@".txt"], supportDirectory];

[document writeToFile:filename atomically:NO encoding:NSStringEncodingConversionAllowLossy error:nil];

NSString *content = [[NSString alloc]initWithContentsOfFile:filename usedEncoding:nil error:nil];
NSLog(@"%@", content); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T14:48:57.417

`filename`是错的。它应具有以下格式：`"directory/file.extension"`. 您可以使用方法[`stringByAppendingPathComponent`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-stringByAppendingPathComponent_)和[`stringByAppendingPathExtension`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-stringByAppendingPathExtension_)构造这样的字符串。

```
NSString *filename = [supportDirectory stringByAppendingPathComponent:[_nameTextField.text stringByAppendingPathExtension:@"txt"]]; 
```

* * *

另外，作为旁注，第一行应该这样重写`stringWithFormat`：

```
NSString *document = [NSString stringWithFormat:@"%@ %@ %@ %@ %@", description, focus, level, equipment, waterDepth]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:09:12.873

你有错误的初始化文件名​​。它应该是：

```
 NSString *filename = [NSString stringWithFormat:@"%@/%@", supportDirectory,[_nameTextField.text stringByAppendingString:@".txt"]]; 
```

它会起作用的！祝你好运：）

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-27T14:45:06.907

这

```
NSString *filename = [NSString stringWithFormat:[_nameTextField.text stringByAppendingString:@".txt"], supportDirectory]; 
```

是错的。它应该是：

```
NSString *filename = [NSString stringWithFormat:"%@%@",[_nameTextField.text stringByAppendingString:@".txt"], supportDirectory]; 
```

# google-chrome - 在 https 页面上查找非 ssl 项目

> ID：10352666
> 
> 赞同：8
> 
> 时间：2012-04-27T14:36:48.730
> 
> 标签：google-chrome, ssl, https

任何人都可以推荐一种在 https 页面上发现任何非 https 项目的好方法。使用 Chrome，我通常会查看资源并逐个查看，但这似乎不是马上的，而且仍然很难抓住一些东西。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T00:19:46.337

开发人员检查器的右下角有一个小按钮，称为“显示控制台”。图标看起来有点像这样 >= （而不是 2 条水平线，它是 3 条）

当您单击它时，它将向您显示所有不安全的内容项。这可能是从你的 CSS 加载的东西。这应该够了吧。

*在**Firefox**上，您只需“查看页面信息”，然后单击媒体选项卡*

![截屏](../Images/31c06914c29428eb6275385e49a0b690.png)

# svn - 如何将缺少的 svn:author 批量添加到存储库或转储中？

> ID：10352667
> 
> 赞同：1
> 
> 时间：2012-04-27T14:37:04.140
> 
> 标签：svn, svnadmin

我正在将 3 个 SVN 存储库复杂地迁移到 1 个具有不同结构的新存储库中。

我刚刚发现其中两个存储库有数千个空白提交“这是填充的空修订。” 所有反对根和所有没有任何作者信息。难以置信的。

svnfiltereddump 在这些提交上失败了，因为它需要一个 svn:author 所以我需要一种技术来解决这个问题。

我想知道我是否可以使用

```
svndumptool.py transform-revprop svn:author SOMETHING gareth.hughes input.dump utput.dump 
```

但我不知道正则表达式只匹配一个空的作者字段。

否则，我正在寻找将 svn:author 添加到存储库中大约 8000 个提交中的方法，而不是顺序的。或者，可以将它们从转储中过滤出来的工具，毕竟它们都是垃圾。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:29:06.610

好消息是，您可以在转储和加载之前处理此问题，而不是在转储和加载过程中尝试处理问题。`svn:author`修订属性包含提交该修订的作者。由于这是一个修订属性，您可以更改它而无需在您的 Subversion 存储库中创建新修订。只需这样做：

```
$ svn propset --revprop -r$rev svn:author $default_author $repository_url 
```

在没有作者的每个修订版上。您可以轻松地做到这一点：

```
$ svn log -r1:LAST $repository_url 
```

获取修订中所有日志条目的列表。如果您发现没有作者的修订，则可以`svn:author`在该 URL 上设置修订属性。我什至不相信你需要一个工作目录来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:34:33.477

答案是正常的 svndumpfilter 工作

```
svndumpfilter --drop-empty-revs --renumber-revs include /somepath 
```

但随后发生了进一步的错误，我发现非常有用

```
./svndumpfilter3 --untangle=/path/to/repo /somepath 
```

可以应对这些错误。

# ruby-on-rails - 如何确保只能以一种方式更新数据库表列？

> ID：10352669
> 
> 赞同：0
> 
> 时间：2012-04-27T14:37:21.847
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3.2, denormalization

我正在使用 Ruby on Rails v3.2.2，我想“保护”一个类/实例属性，以便只能以一种方式更新数据库表列值。也就是说，例如，假设我有两个数据库表：

```
table1
- full_name_column

table2
- name_column
- surname_column 
```

我管理它，`table1`以便`full_name_column`通过使用相关`table2`类/模型中声明的回调来更新，我想确保*只能*通过该回调来更新`full_name_column`值。

 *换句话说，*我应该**确保**该`table2.full_name_column`值始终*

```
"#{table1.name_column} #{table1.surname_column}" 
```

*并且它不能是另一个值。*因此，例如，如果我尝试“直接”更新`table1.full_name_column`，它应该会引发类似错误的内容。当然，该值必须是可读的。

**可能吗？你对处理这种情况有什么建议？**

* * *

**这种方法的原因...**

我想使用这种方法，因为我计划对包含与“profile”/“person”对象相关`table1`的其他值的列执行数据库搜索`table1`......否则，我可能必须进行一些黑客攻击（也许是一个复杂的黑客攻击）将这些搜索定向到`table2`so 以查找`"#{table1.name_column} #{table1.surname_column}"`字符串。

因此，我认为*一种简单的*方法是如上所述对数据进行*非规范化，但它需要实现一种“不常见”的方式来处理该数据。*

*顺便说一句*：答案应该旨在“解决”相关流程或找到更好的方法来以更好的方式处理搜索功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:53:09.153

这是在数据库级别维护数据的两种方法...

**视图和物化表。**

如果可能，table1 可以是 VIEW 或例如 MATERIALIZED QUERY TABLE (MQT)。术语可能略有不同，具体取决于使用的 RDMS，我认为 Oracle 具有 MATERIALIZED VIEWs 而 DB2 具有 MATERIALIZED QUERY TABLEs。

VIEW 只是对物理上位于某个不同表中的数据的访问。MATERIALIZED VIEW/QUERY TABLE 是数据的物理副本，因此例如与源数据不实时同步。

反正。这些方法将提供对数据的只读访问，这些数据由 table2 拥有，但可由 table1 访问。

非常简单的视图示例：

```
CREATE VIEW table1 AS 
   SELECT surname||', '||name AS full_name
     FROM table2; 
```

**触发器**

有时视图并不方便，因为您实际上可能希望在 table1 中有一些其他地方无法获得的数据。在这些情况下，您可以考虑使用数据库触发器。即创建触发器，当 table2 更新时，table1 也在同一个数据库事务中更新。

使用触发器的问题可能是您必须授予客户端更新 table1 的权限。一些 RDMS 可能会提供一些方法来调整触发器的访问控制，即 TRIGGER 执行的操作将使用与启动 TRIGGER 的操作不同的权限来执行。

在这种情况下，TRIGGER 可能看起来像这样：

```
 CREATE TRIGGER UPDATE_NAME
     AFTER UPDATE OF NAME, SURNAME ON TABLE2
     REFERENCING NEW AS NEWNAME
     FOR EACH ROW
     BEGIN ATOMIC
       UPDATE TABLE1 SET FULL_NAME = NEWNAME.SURNAME||', '||NEWNAME.NAME
        WHERE SOME_KEY = NEWNAME.SOME_KEY
     END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:15:14.337

通过将 table2 中的数据复制到 table1 中，您已经对其进行了反规范化。与任何反规范化一样，您必须遵守保持同步的原则。这意味着不要更新你不应该更新的东西。

尽管您可以使用隔离墙`attr_accessible`来防止意外分配，但 Ruby 的工作方式意味着无法保证值永远不会被修改。如果有人有足够的决心，他们就会找到方法。这就是纪律的用武之地。

最好的方法是记录不应直接修改该列，用 阻止质量分配`attr_accessible`，然后将其保留。据我所知，真的没有写保护属性的概念。*

# ruby-on-rails-3 - 日期选择器不显示日历

> ID：10352674
> 
> 赞同：0
> 
> 时间：2012-04-27T14:37:33.310
> 
> 标签：ruby-on-rails-3, jquery-ui, datepicker, jquery-ui-datepicker

尝试实现一个日期选择器并将其样式设置得更好，所以一切正常，直到我使用 buttonImage 选项，我的 assets/images 文件夹中有文件 calendar_add.png，但它不加载图像，当我查看服务器，它显示

```
!! Invalid request 
```

这是我为此使用的代码。有什么建议么？

```
return $(this).datepicker({
    altFormat: "yy-mm-dd",
    dateFormat: "mm/dd/yy",   
    minDate: 0,   
    numberOfMonths: 2,
    showOn: "button",                                                     
    buttonImage: "<%= asset_path('calendar_add.png') %>",
    buttonImageOnly: true,
    altField: $(this).next()
}); 
```

补充一下，我也在使用 bootstrap 和 simple_form，也许这是导致问题的原因？但它似乎不应该。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:45:41.047

您的文件路径可能有误。资产路径是否一直进入图像文件夹？

buttonImage: "<%=asset_path('/images/calendar_add.png') %>",

# watir - 使用 SafariWatir 定位电子邮件类型的输入

> ID：10352677
> 
> 赞同：0
> 
> 时间：2012-04-27T14:37:41.360
> 
> 标签：watir, safariwatir

我刚开始使用 Watir 为我的 Web 应用程序编写一些简单的测试。

我想做的第一件事是在 OS X 上使用 SafariWatir 使用“电子邮件”类型的电子邮件输入元素填充登录表单。

这不起作用：

```
browser.text_field(:id, "email").set('my@email.com') 
```

痕迹：

```
/Library/Ruby/Gems/1.8/gems/safariwatir-0.4.0/lib/safariwatir/scripter.rb:661:in `execute': Unable to locate TextField, using :id and "email" (Watir::Exception::UnknownObjectException)
    from /Library/Ruby/Gems/1.8/gems/safariwatir-0.4.0/lib/safariwatir/scripter.rb:303:in `focus'
    from /Library/Ruby/Gems/1.8/gems/safariwatir-0.4.0/lib/safariwatir.rb:525:in `set'
    from test.rb:10 
```

我假设元素不匹配，因为类型属性值不同。该文档没有说明此类元素的任何规范。有任何想法吗？

谢谢！

更新：根据用户正在测试 pinganalytics 的评论添加（重新格式化）HTML 示例

```
<form action="http://pingalytics.com/" method="post" accept-charset="utf-8"> 
  <p>
    <label for="email">Email</label> 
    <input type="email" name="email" value="" id="email" autofocus=""  /> 
  </p>
  <p>
    <label for="password">Password</label>
    <input type="password" name="password" value="" id="password"  /> 
  </p>
  <input type="submit" name="login" value="Log in with Pingdom" class="primary" />
  <p>
    <a href="https://www.pingdom.com/signup/">
      Sign up
    </a>
    , or 
    <a href="https://pp.pingdom.com/index.php/login" title="Reset your Pingdom password">
      recover your password
    </a>
    .
  </p>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:16:40.357

输入元素的“电子邮件”类型是 HTML5 中的新内容。Safariwatir 是一个早于 HTML5 的老项目。它没有看到很多最近的工作，在搜索潜在的“text_field”元素时，它不太可能寻找这种类型。

Watir 3.0 或 Watir-webdriver 将是一个更安全的选择，因为已经进行了大量工作以使它们能够正确支持 HTML5。

此外，由于 Webdriver 最近刚刚添加了对 Safari 的支持（[有关说明，请参阅此处）](http://watirwebdriver.com/safari/)，它现在是 safariwatir 的可行替代品（我非常希望不会有进一步的工作。） Safari 支持仍然是一点点 DYI 就像你一样必须构建自己的 safari 扩展程序，它只能在 Mac 上运行，但如果我们看到有人开始发布可以从在线图库下载的标准 safari 扩展程序，情况可能会改变

# wpf - 样式化 GridViewColumns

> ID：10352679
> 
> 赞同：1
> 
> 时间：2012-04-27T14:37:50.290
> 
> 标签：wpf, templates, styles, gridviewcolumn

我正在浏览stackoverflow，试图找出一种在我的ListView 中设置GridViewColumns 样式的方法。我遇到了这个：

[GridViewColumn 中的 WPF 文本格式](https://stackoverflow.com/questions/656296/wpf-text-formatting-in-gridviewcolumn)

最佳答案显示了如何设置一 (1) 个 GridViewColumn 的样式。我的问题是，有没有办法在 Window.Resources 中设置这些 GridViewColumns 的样式，这样我就不必为每个单独的 GridViewColumn 都这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:52:05.857

有几种可能：

```
<!-- if style doesn't change -->
<GridViewColumn CellTemplate="{StaticResource yourCellTemplate}"/>

<!-- if you need to change it up based on criteria - template selector-->
<GridViewColumn CellTemplateSelector="{StaticResource YourTemplateSelector}"/>

<!-- same goes for headers -->
<GridViewColumn HeaderTemplate="{StaticResource yourheaderTempalte}"/>
 ..or HeaderContainerStyle, HeaderTemplateSelector 
```

如果你想使用模板选择器：创建一个类，在资源字典中实例化它，然后将它插入你的 gridview 列，这里有一个小示例

```
public class MyTemplateSelector : DataTemplateSelector
{
    public DataTemplate SimpleTemplate { get; set; }
    public DataTemplate ComplexTemplate { get; set; }

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
                 //if I have just text
                   return SimpleTemplate;
                 //if I have comments and other fancy stuff 
                     return ComplexTemplate; 
```

然后在你的 ResourceDictionary

```
<DataTemplate x:Key="ComplexTemplate">
    <Views:MyCustomControl DataContext="{Binding}"/>
</DataTemplate>

<Views:MyTemplateSelector
    x:Key="TxtVsExpensiveCell_TemplateSelector"
    SimpleTemplate ="{StaticResource SimpleTemplate}"
    ComplexTemplate="{StaticResource ComplexTemplate}"/>

   <!-- then you use it in your view like this -->
   <GridViewColumn CellTemplateSelector="{StaticResource TxtVsExpensiveCell_TemplateSelector}"/> 
```

如果您不想经历所有这些麻烦，只是想调整预定义控件的样式，为什么不使用 DataGrid？它具有预定义的列，您可以在其中调整每个列的样式。

```
<DataGrid>
    <DataGrid.Columns>
        <DataGridTextColumn/>
        <DataGridCheckBoxColumn/>
        <DataGridHyperlinkColumn/>
        <DataGridCheckBoxColumn/>
                     ....there are several more column types!
    </DataGrid.Columns>
</DataGrid> 
```

# android - 当用户退出应用程序时如何防止蓝牙连接丢失？

> ID：10352681
> 
> 赞同：0
> 
> 时间：2012-04-27T14:37:51.870
> 
> 标签：android, bluetooth, rfcomm

即使用户退出应用程序，我也不知道如何让 RFCOMM 连接继续连接到串行设备。我已经搜索了互联网，但仍然没有回答我的问题。所以有人知道吗？任何答案都是一个很大的帮助.. 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:42:23.297

一般来说，你不应该。当用户退出您的应用程序时，系统将关闭您的活动，您应该关闭您的连接等。毕竟，您的应用程序很有可能在此之后被杀死。

如果您确实需要在用户退出后保持连接处于活动状态，那么您将需要在服务中实现您的连接。与应用程序相比，服务对其生命周期的控制更多，并且独立于活动生命周期，因此即使用户关闭了您的活动，服务也可以继续运行。

# visual-studio - 确定 VS 解决方案中哪些项目针对特定版本的快速方法？

> ID：10352683
> 
> 赞同：0
> 
> 时间：2012-04-27T14:37:54.627
> 
> 标签：visual-studio

我有一个 Visual Studio 解决方案，其中包含大量项目，其中一些针对 .NET v2.0，其中一些针对 v3.5。

我知道我可以依次右键单击每个项目以查看它的目标版本，但这需要永远。

有谁知道我可以更快地确定哪些项目以 v2.0 为目标，哪些项目以 v3.5 为目标？

编辑：

我希望能够使用 TargetFrameworkVersion 节点来确定版本，但有些项目文件没有这个节点，例如

```
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProductVersion>8.0.50727</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{E11A268C-9F62-4970-9338-129C35AD2354}</ProjectGuid>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>BusinessEntities</RootNamespace>
    <AssemblyName>Business Entities</AssemblyName>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Data" />
    <Reference Include="System.Drawing" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="SomeClass.cs" />
    <Compile Include="SomeOtherClass.cs" />
  </ItemGroup>
  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
       Other similar extension points exist, see Microsoft.Common.targets.
  <Target Name="BeforeBuild">
  </Target>
  <Target Name="AfterBuild">
  </Target>
  -->
</Project> 
```

...但是如果我右键单击 VS 中的项目，它会说目标版本是 .NET v2.0。另外要明确一点，我需要对许多解决方案重复此过程，因此手动方式​​是一个非常不受欢迎的选择。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:54:57.587

There is a [link](https://stackoverflow.com/questions/2202425/target-framework-in-visual-studio) might be helpful. You have to write your own code to parse project files to get the framework versions.

```
<TargetFrameworkVersion>v3.5</TargetFrameworkVersion> 
```

The other option is to use command line for the solution folder. Use MS DOS command:

```
findstr "<TargetFrameworkVersion>" *.csproj 
```

The result will be displayed on the screen.

**UPDATE:**

Because older progjects don't contain this line. We can use another command, which search files don't contain the line.

```
findstr /v "<TargetFrameworkVersion>" *.csproj 
```

# mercurial - 是否可以编写一个可变的钩子，用相应的修订版替换某个宏模式？

> ID：10352684
> 
> 赞同：0
> 
> 时间：2012-04-27T14:38:13.207
> 
> 标签：mercurial

假设，我的代码中的注释中有以下模式 - `$REV$`。我想要一个客户端钩子，它将用类似`$REV[$ d3d004be40c5 $]REV$`. 任何后续提交都将假定在 and 之间存在修订，`$REV[$`并`$]REV$`相应地替换它。

我想使用客户端钩子，因为我不想为此修改额外提交，因此它必须作为提交的一部分在客户端上完成。

我认为 python 中的 precommit 钩子应该适合这项工作，但我只是想在深入研究之前寻求建议。例如，也许有更好的方法来做到这一点，比如使用现有的扩展。如果有人做过类似的事情-请分享。

谢谢。

附言

我知道在源代码中嵌入修订版可能看起来很奇怪，但请放纵我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:52:52.800

[关键字](http://mercurial.selenic.com/wiki/KeywordExtension)扩展可以满足您的需求（尽管它的实用性非常非常低）。

# javascript - SharePoint javascript：在 div 中查找所有内容

> ID：10352690
> 
> 赞同：0
> 
> 时间：2012-04-27T14:38:28.913
> 
> 标签：javascript, sharepoint

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T14:40:14.213

它不起作用，因为您需要在输出 HTML 之后使用 JavaScript！

# postgresql - 将数据库中特定模式的所有权限授予 PostgreSQL 中的组角色

> ID：10352695
> 
> 赞同：111
> 
> 时间：2012-04-27T14:39:03.887
> 
> 标签：postgresql, database-design, roles, privileges, grant

使用 PostgreSQL 9.0，我有一个名为“staff”的组角色，并希望在特定模式中的表上授予该角色的所有（或某些）权限。以下都不是工作

```
GRANT ALL ON SCHEMA foo TO staff;
GRANT ALL ON DATABASE mydb TO staff; 
```

“员工”的成员仍然无法对模式“foo”中的各个表或（在第二个命令的情况下）数据库中的任何表进行 SELECT 或 UPDATE，*除非*我在该特定表上授予所有权限。

我可以做些什么让我和我的用户的生活更轻松？

**更新：**[在 serverfault.com 上的类似问题](https://serverfault.com/questions/60508/grant-select-to-all-tables-in-postgresql)的帮助下弄清楚了。

```
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA foo TO staff; 
```

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-04-27T15:46:18.900

*您找到了为给定模式中的所有现有*表设置权限的简写。[该手册阐明](https://www.postgresql.org/docs/current/static/sql-grant.html#SQL-GRANT-DESCRIPTION-OBJECTS)：

> （但请注意，这`ALL TABLES`被认为包括**视图**和**外部表**）。

大胆强调我的。**`serial`**列`nextval()`在序列上作为默认列实现，并[引用手册](https://www.postgresql.org/docs/current/static/sql-grant.html#SQL-GRANT-DESCRIPTION-OBJECTS)：

> 对于序列，此权限允许使用`currval`and`nextval`函数。

因此，如果有`serial`列，您还需要在**序列****`USAGE`**上授予（或`ALL PRIVILEGES`）

 **```
GRANT USAGE ON ALL SEQUENCES IN SCHEMA foo TO mygrp; 
```

注意： Postgres 10 或更高版本中的[标识列](https://blog.2ndquadrant.com/postgresql-10-identity-columns/)使用不需要额外权限的隐式序列。（考虑升级`serial`列。）

### *新*对象呢？

您还将[**`DEFAULT PRIVILEGES`**对用户或模式](http://www.postgresql.org/docs/current/interactive/sql-alterdefaultprivileges.html#SQL-ALTERDEFAULTPRIVILEGES-NOTES)感兴趣：

```
ALTER DEFAULT PRIVILEGES IN SCHEMA foo GRANT ALL PRIVILEGES ON TABLES TO staff;
ALTER DEFAULT PRIVILEGES IN SCHEMA foo GRANT USAGE          ON SEQUENCES TO staff;
ALTER DEFAULT PRIVILEGES IN SCHEMA foo REVOKE ...; 
```

这会自动为将来创建的对象设置权限，但不会为预先存在的对象设置权限。

默认权限*仅*适用于目标用户 ( `FOR ROLE my_creating_role`) 创建的对象。如果省略该子句，则默认为当前用户执行`ALTER DEFAULT PRIVILEGES`. 明确地说：

```
ALTER DEFAULT PRIVILEGES FOR ROLE my_creating_role IN SCHEMA foo GRANT ...;
ALTER DEFAULT PRIVILEGES FOR ROLE my_creating_role IN SCHEMA foo REVOKE ...; 
```

另请注意，所有版本的 pgAdmin III 都有一个细微的错误，并在 SQL 窗格中*显示*默认权限，即使它们不适用于当前角色。`FOR ROLE`复制 SQL 脚本时，请务必手动调整子句。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-07-06T06:29:46.117

我的答案类似于[ServerFault.com 上的这个](https://serverfault.com/a/284278/142214)。

# 保守一点

如果您想比授予“所有特权”更保守，您可能想尝试更多类似的东西。

```
GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO some_user_;
GRANT EXECUTE ON ALL FUNCTIONS IN SCHEMA public TO some_user_; 
```

那里的使用是`public`指为每个新数据库/目录创建的默认模式的名称。如果您创建了架构，请替换为您自己的名称。

# 访问架构

要完全访问模式，对于任何操作，用户必须被授予“使用”权限。在用户可以选择、插入、更新或删除之前，必须首先授予用户对模式的“使用权”。

首次使用 Postgres 时，您不会注意到此要求。默认情况下，每个数据库都有一个名为`public`. 默认情况下，每个用户都被自动授予对该特定模式的“使用”权限。添加其他架构时，您必须明确授予使用权限。

```
GRANT USAGE ON SCHEMA some_schema_ TO some_user_ ; 
```

[Postgres 文档](http://www.postgresql.org/docs/current/static/sql-grant.html)的摘录：

> 对于模式，允许访问包含在指定模式中的对象（假设也满足对象自身的权限要求）。本质上，这允许被授权者在模式中“查找”对象。如果没有此权限，仍然可以查看对象名称，例如通过查询系统表。此外，在撤销此权限后，现有后端可能具有先前执行此查找的语句，因此这不是防止对象访问的完全安全的方法。

有关更多讨论，请参阅问题，[SCHEMA 上的 GRANT USAGE 到底是做什么的？](https://stackoverflow.com/q/17338621/642706). 请特别注意Postgres 专家[Craig Ringer](https://stackoverflow.com/users/398670/craig-ringer)[的回答](https://stackoverflow.com/a/17355059/642706)。

# 现有对象与未来

这些命令仅影响现有对象。您将来创建的表等将获得默认权限，直到您重新执行上面的那些行。请参阅[Erwin Brandstetter 的另一个答案](https://stackoverflow.com/a/10353730/642706)以更改默认值，从而影响未来的对象。**

# java - Java 类型无法解析 MIME 类型类

> ID：10352700
> 
> 赞同：1
> 
> 时间：2012-04-27T14:39:31.233
> 
> 标签：java

我知道这是一个常见的问题，但我一直在搜索，我已经通过构建路径将该类包含在 Eclipse 中。我开始编写导入语句，它为我自动完成选项，所以我知道它正在查找类。

我的问题是当我阅读文档时它为什么会给出这个错误并且它说构造函数方法是 MimeUtil2() ？

[http://www.jarvana.com/jarvana/view/eu/medsea/mimeutil/mime-util/2.1/mime-util-2.1-javadoc.jar!/eu/medsea/mimeutil/MimeUtil2.html#MimeUtil2](http://www.jarvana.com/jarvana/view/eu/medsea/mimeutil/mime-util/2.1/mime-util-2.1-javadoc.jar!/eu/medsea/mimeutil/MimeUtil2.html#MimeUtil2) ()

```
package com.jab.app;

import java.io.File;
import eu.medsea.mimeutil.*;

public class CheckFileType {

private void GetMimeType(File filename){

        MimeUtil2 test = new MimeUtil2();  //Produces the error saying java type cannot be resolved

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:42:03.677

我认为您需要导入

```
import eu.medsea.mimeutil.*; 
```

根据[文档](http://www.jarvana.com/jarvana/view/eu/medsea/mimeutil/mime-util/2.1/mime-util-2.1-javadoc.jar!/eu/medsea/mimeutil/MimeUtil2.html)，类型是`eu.medsea.mimeutil.MimeUtil2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:37:06.373

我最终发现我使用的是 test-source.jar 而不是主 jar 文件本身。sourceforge 页面将默认设置为源文件，而不是主 jar 文件。它被埋在文件页面内。

# c# - SQL Server 2008 事件驱动架构

> ID：10352703
> 
> 赞同：4
> 
> 时间：2012-04-27T14:39:37.033
> 
> 标签：c#, .net, sql-server-2008

我正在创建一个基于消息的体系结构，该体系结构当前使用轮询客户端来检索消息。出于显而易见的原因，我想将我的客户端注册到 SQL Server 2008，以便在将消息插入表时接收事件。

我一直在网上搜索 SQL Server 消息代理、CLR 存储过程和 StreamInsight，但我似乎找不到我要找的东西：SQL Server 提醒我的服务有消息的方法已收到。基本上是事件驱动而不是轮询模型。

这存在吗？关于从哪里开始的任何想法？有没有例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:36:27.707

是的，这确实存在。我已经成功使用 SQL Service Broker。我不熟悉您列出的其他选项。

设置 SSB 很痛苦，因为有很多活动部件和细节，但它工作得很好。帮助您避免轮询的主要部分是您从 C# 创建和调用的存储过程。在那个简短的过程中是一个 RECEIVE WAITFOR 语句，它会阻止您打开和处理的连接，直到您的队列中有消息可用或您的超时命中。在 C# 中，无论您得到结果还是超时，都会立即再次运行该过程以等待下一项。

如果可能，您需要将与 SQL ... 的打开连接数限制为 1。如果您有多个相关方，请通过该连接推送他们的所有内容，并通过其他方式将其与 C# 服务器一起分发。

# mysql - MySQL从具有条件的多个表中选择

> ID：10352705
> 
> 赞同：1
> 
> 时间：2012-04-27T14:39:40.653
> 
> 标签：mysql

我有 4 张桌子：

*   `ARTICOLE`
*   `BAR`
*   `BUCATARIE`
*   `MAGAZIE`

mysql>`select * from ARTICOLE;`

```
| OID | ART      |  
|   1 | TEST     |
|   2 | TESTQ    |
|   3 | MYART    |
|   4 | MYARTBUC | 
```

4 行一组（0.00 秒）

mysql>`select * from BAR;`

```
| OID | ART   | CANT     |
|   1 | TEST  |  3.00000 |
|   2 | TESTQ |  1.00000 |
|   3 | MYART | 20.00000 | 
```

3 行一组（0.00 秒）

mysql>`select * from BUCATARIE;`

```
| OID | ART      | CANT     |
|   1 | TEST     |  5.00000 |
|   2 | MYARTBUC | 10.00000 | 
```

2 行（0.00 秒）

mysql>`select * from MAGAZIE;` 空集（0.00 秒）

下面的查询

mysql>`select a.ART,sum(bar.CANT),sum(buc.CANT),sum(mag.CANT) from ARTICOLE a,BUCATARIE buc,BAR bar,MAGAZIE mag where a.ART=bar.ART and a.ART=bar.ART and a.ART=mag.ART group by a.ART;`

返回：

* * *

空集（0.00 秒）

## 必须如何查询才能返回：

```
| ART | sum(bar.CANT) | sum(buc.CANT) | sum(mag.CANT) |
TEST  |  3.00000 | 5.00000 | NULL |
TESTQ |  1.00000 | NULL | NULL |
MYART | 20.00000 | NULL | NULL|
MYARTBUC | NULL | 10.00000 | NULL | 
```

* * *

？？？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:48:12.987

您需要使用[**`LEFT JOIN`**](http://www.tizag.com/mysqlTutorial/mysqlleftjoin.php)包含来自其他表的结果而不过滤掉不匹配的记录：

```
 select a.ART,sum(bar.CANT),sum(buc.CANT),sum(mag.CANT)
     from ARTICOLE a
left join BUCATARIE buc on buc.ART = a.ART
left join BAR bar on bar.ART = a.ART
left join MAGAZIE mag on mag.ART = a.ART
group by a.ART; 
```

样本结果：

```
ART         SUM(BAR.CANT)   SUM(BUC.CANT)   SUM(MAG.CANT)
MYART       20      
MYARTBUC                    10  
TEST        3               5   
TESTQ       1 
```

演示：[http ://www.sqlfiddle.com/#!2/6efb2/2](http://www.sqlfiddle.com/#!2/6efb2/2)

# linux - 用于游戏的 Linux 上的 HID 输入

> ID：10352708
> 
> 赞同：1
> 
> 时间：2012-04-27T14:39:43.963
> 
> 标签：linux, input, hid

在 Linux 上为游戏捕获 HID 输入的最佳方法是什么？我不需要什么特别的。只有鼠标和键盘。现在我正在使用 Xlib。我有一个单独的输入线程，它与 X 服务器（显示实例）有自己的连接，它处理主渲染窗口的事件。它工作得很好，但它有点有限。例如，我缺少鼠标原始输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:24:41.510

您是否尝试过在 /dev/input 中打开和读取设备文件？

# c++ - 编译 Qt Creator

> ID：10352710
> 
> 赞同：0
> 
> 时间：2012-04-27T14:40:01.657
> 
> 标签：c++, qt, compilation

我已经使用选项从源代码编译了 Qt：

```
-release -no-script -no-webkit 
```

现在我正在尝试使用此版本编译 qtCreator，但出现错误：

```
ld.exe cannot find lQtScript 
```

如何将 Qt Creator 配置设置为与 Qt 相同，这意味着

```
-release -no-script -no-webkit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:03:20.333

QtCreator 需要 QtScript。您可以尝试做一个`make -k`（忽略编译错误）并希望足够的 QtCreator 在没有 QtScript 的情况下工作，但我非常怀疑它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-24T16:05:01.407

是的，使用 QtScript 是构建 Qt Creator 所必需的。你必须在你的 Qt 构建中拥有它......这在最新版本的 Qt (5.6) 中变得更加棘手，因为 QtScript 现在已被弃用且未提供。您需要单独检索它并将其添加到 Qt 中，以便您可以构建 Qt Creator。对于我自己，我重用了 Qt 5.5 中的 QtScript。

希望有帮助。

问候

# java - 如何使用适用于 Mac 的 Oracle 新 1.7 JDK 运行 Eclipse？

> ID：10352715
> 
> 赞同：46
> 
> 时间：2012-04-27T14:40:05.790
> 
> 标签：java, eclipse, macos

我正在尝试让[新的 1.7 JDK](https://blogs.oracle.com/java/entry/five_update_java_releases)与 Eclipse 一起使用（这是 Oracle 的官方版本）。

我并不是说只是将 Eclipse 指向它，以便您可以在项目中使用它，这很好用，但实际上使 Eclipse 使用 1.7 JVM 运行。

我已将新的 JVM 移到 Java Preferences 列表的顶部，但 Eclipse 仍然从 1.6 开始。如果我在 Java 首选项中禁用 1.6，我会在双击 Eclipse 后立即看到一个对话框，显示“无法创建 Java 虚拟机”。

*编辑：*我在-vmargs之前将以下内容添加到我的eclipse.ini中：

```
-vm
/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home/bin/java 
```

然而，在 Eclipse 安装详细信息对话框中，我仍然看到：

```
java.runtime.version=1.6.0_31-b04-415-11M3646 
```

*编辑 2*：这里是我的 eclipse.ini 文件的内容：[https ://gist.github.com/2512578](https://gist.github.com/2512578)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-08T10:58:38.910

还有另一种方法。请在 .ini 文件中的 -vmargs 之前添加以下两行：

```
-vm 
{YOUR_JAVA_7_HOME}/jre/lib/server/libjvm.dylib 
```

（记住这些需要是单独的行）并在“Info.plist”文件中添加相应的条目（在“Eclipse”键下添加或修改数组项 - 每个字符串子元素对应一个命令行参数）。

```
...
<key>Eclipse</key>
<array>
<string>-vm</string>
<string>/{MY_VM_HOME}/jre/lib/server/libjvm.dylib</string>
...
</array> 
```

`-vm {YOUR_JAVA_7_HOME}/lib/server/libjvm.dylib`或者，从终端运行 eclipse 时只需使用命令行参数。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-29T18:42:58.510

我刚刚向[https://bugs.eclipse.org/bugs/show_bug.cgi?id=339788](https://bugs.eclipse.org/bugs/show_bug.cgi?id=339788)添加了关于无法在 OS X 上将新的 Oracle JDK 与 Eclipse 一起使用的评论。在 eclipse.ini 中使用 -vm 选项确实不行。我发现解决此问题的唯一方法是使用以下 shell 脚本：

```
#!/bin/sh
#
export JAVA_HOME=/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home
LAUNCHER_JAR=/Applications/eclipse/plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar

java \
-showversion \
-XX:MaxPermSize=256m \
-Xms1024m \
-Xmx1024m \
-Xdock:icon=/Applications/eclipse/Eclipse.app/Contents/Resources/Eclipse.icns \
-XstartOnFirstThread \
-Dorg.eclipse.swt.internal.carbon.smallFonts \
-Dosgi.requiredJavaVersion=1.5 \
-jar $LAUNCHER_JAR 
```

使用[http://mathiasbynens.be/notes/shell-script-mac-apps](http://mathiasbynens.be/notes/shell-script-mac-apps)上的步骤，我将上面的脚本变成了一个可以保留在我的扩展坞上的应用程序。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-10-26T09:51:06.390

显然，开普勒的修复应该会在下一个服务版本中发布。

同时，此错误中提到了一种解决方法，它允许您运行 eclipse，而无需从 Apple 安装 JRE 1.6：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=411361#c20](https://bugs.eclipse.org/bugs/show_bug.cgi?id=411361#c20)

这将允许您从 finder 或聚光灯而不是扩展坞启动 eclipse。

我刚刚在 OS X Mavericks 上对此进行了测试，它在更新期间丢失了 jre 6，并在您尝试启动 Eclipse 时要求安装它。我当然安装了最新的 Oracle JDK 1.7。

拒绝这样做，然后解决这个问题，在 /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents/Info.plist 中编辑 jvm 功能

```
<key>JVMCapabilities</key>
            <array>
                    <string>CommandLine</string>
                    <string>JNI</string>
                    <string>BundledApp</string>
                    <string>WebStart</string>
                    <string>Applets</string> 
            </array> 
```

使用此修复程序，您无需在 eclipse.ini 中指定 vm。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-24T13:40:35.917

在上面的 Mac 上似乎不起作用。对我来说，使用 Eclipse KEPLER 它通过添加

```
-vm /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents/Home/ 
```

在我的 eclipse.ini 结束时（没有那个换行符）

这终于改变了我的 Eclipse Installation Details > Configuration from

> -vm /System/Library/Frameworks/JavaVM.framework

到

> -vm /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents/Home/bin/../jre/lib/server/libjvm.dylib

这**不适**用于我的 Eclipse INDIGO 安装。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-16T10:59:48.453

安装Oracle JRE和JDK后，打开Eclipse.app里面的Info.plist（右键，显示内容），粘贴到“Eclipse”后面“-vm/System/Library/Frameworks/JavaVM.framework/JavaVM”

我的看起来像这样：

```
 <key>Eclipse</key>
    <array>
        <string>-vm</string><string>/System/Library/Frameworks/JavaVM.framework/JavaVM</string>
        <string>-keyring</string><string>~/.eclipse_keyring</string>
        <string>-showlocation</string>
    </array> 
```

如果这样做，您将不必在升级 JRE 后更新文件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-05T11:35:17.940

只需编辑

```
Eclipse.app/Contents/Info.plist 
```

您必须使用特定的 Java 版本（而不是平台的默认版本）取消注释以下选项之一：

```
<string>-vm</string>
<string>/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java</string> 
```

这帮助我从 1.7.0 回滚到 1.6.0。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-16T17:47:09.873

检查您的 java_home 在 /usr/libexec/java_home 中是否正确；

不要更改您的 eclipse.ini 并编辑 Info.plist 文件并更改/添加此行 <string>-vm< /string><string>/Library/Java/JavaVirtualMachines/'jdk-version-your'/Contents/Home /bin/java< /string> 并保存。打开 Eclipse 并完成！

对我来说效果很好，并且使用 javafx e(fx)clipse！

PS：在 Mac OS X 系统上，您可以在 Finder 中右键单击（或 Ctrl+单击）Eclipse 可执行文件找到 Info.plist，选择 Show Package Contents，然后在 Contents 文件夹中找到 Info.plist。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-27T14:55:42.660

假设您使用的是支持 Java 7 的 Eclipse 版本（我相信任何 3.7 及更高版本），您应该能够在 eclipse.ini 文件中指定 Eclipse 使用的 JVM。如果你打开它，你应该会看到一个“-vm”属性，后面跟着你当前使用的 JVM 的目录。您应该能够将此目录更改为您的 1.7 安装。

注意：我没有在 Mac 上使用过 Eclipse，所以配置文件的名称可能不同。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-28T18:24:43.850

截至 2012 年 4 月 28 日，它是 Eclipse 3.7 SR2 启动器应用程序中的一个已知未解决错误。

见[https://bugs.eclipse.org/bugs/show_bug.cgi?id=339788](https://bugs.eclipse.org/bugs/show_bug.cgi?id=339788)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-07-04T05:59:14.107

我刚遇到这个问题。我通过降级和下载 JDK 7 来修复它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-11-13T20:06:21.957

下载并安装 Titanium 后，我遇到了类似的问题。我的 eclipse 工作了，但 Titanium 没有，所以我最终查看了配置文件，看看有什么不同

日食有

```
eclipse.p2.profile=epp.package.standard 
```

钛有

```
eclipse.p2.profile=profile 
```

更改上述内容以匹配 Eclipse 配置后，我能够启动 Titanium

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-05-06T11:05:53.113

只需点击几下，这对我来说就解决了。转到`Eclipse - > Preference - > Java - > Installed JRE - > Add button - > Standard VM`并引用 JRE Home 路径`/Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home`并添加自定义名称。给定 JRE 路径后，将自动添加所需的 Jar 文件，然后单击完成。请确保 jdk 已经安装。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-09-05T08:39:02.990

对我来说，它在[https://bugs.eclipse.org/bugs/show_bug.cgi?id=411361#c25](https://bugs.eclipse.org/bugs/show_bug.cgi?id=411361#c25)中提出了修复：

```
#!/bin/bash

# Workaround for https://bugs.eclipse.org/411361
# "[Mac] Kepler doesn't launch without JRE 6, even if JDK 7 is installed"
#
# Put this launch.command into the same folder as Eclipse.app.
#
# If necessary, adapt JAVA_EXECUTABLE to the full path to your Java executable:

JAVA_EXECUTABLE=java

cd "$(dirname "$0")"

$JAVA_EXECUTABLE \
-Djava.library.path="$(echo plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_*/eclipse_*.so)" \
-Xms512m \
-Xmx2048m \
-Xdock:icon=Eclipse.app/Contents/Resources/Eclipse.icns \
-XstartOnFirstThread \
-Dorg.eclipse.swt.internal.carbon.smallFonts \
-XX:MaxPermSize=256m \
-jar "$(echo plugins/org.eclipse.equinox.launcher_*.jar)"  \
-os macosx \
-ws cocoa \
-arch x86_64 \
-showsplash \
-name Eclipse \
--launcher.appendVmargs \
-debug \
-showlocation \
-consolelog 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-07-02T09:46:46.697

默认情况下，您的 MacOSX 带有不适合 Eclipse 的 JRE 1.6.0。要解决问题，您还需要安装已经包含 JRE 1.7.0 的 JDK 7。

这是您可以下载的链接。

只需选择 Java SE Development Kit 7u79 下的 MacOS X 版本并安装即可。

[http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)

安装此软件包后，Eclipse 将无需任何修改即可启动。

# gmail - Javamail 和 Gmail Pop3 SSL

> ID：10352718
> 
> 赞同：4
> 
> 时间：2012-04-27T14:40:14.247
> 
> 标签：gmail, jakarta-mail, pop3

我正在尝试将我的应用程序连接到 Gmail 以检查电子邮件。我必须为 POP3 使用 SSL。

这是我的代码：

```
 Properties props = new Properties();

    props.put("mail.host", "pop.gmail.com");
    props.put("mail.store.protocol", "pop3s");
    props.put("mail.pop3s.auth", "true");
    props.put("mail.pop3s.port", "993");

    Session session = Session.getDefaultInstance(props, null);
    Store store=session.getStore();
    store.connect("myuser@gmail.com","mypass"); 
```

我得到这个错误：

```
Exception in thread "main" javax.mail.MessagingException: Connect failed;
  nested exception is:
    java.io.IOException: Unexpected response: * OK Gimap ready for requests from x.x.x.x.x z50if25691877wef.13
    at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:210)
    at javax.mail.Service.connect(Service.java:295)
    at javax.mail.Service.connect(Service.java:176)
    at javax.mail.Service.connect(Service.java:196) 
```

我认为这有一个很好的新功能：gmail 服务器回答了，但是......似乎对 javamail 的回答很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:56:47.690

gmail 的端口应为 995：http: [//support.google.com/mail/bin/answer.py ?hl=en&answer=13287](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-22T03:53:01.130

我想它会帮助你

```
 Properties properties = new Properties();  
 properties.put("mail.pop3.host", pop3Host);
 properties.put("mail.pop3.ssl.enable", true);
 properties.put("mail.pop3.ssl.trust", "*");
 properties.put("mail.pop3.port", 995);
 Session emailSession = Session.getDefaultInstance(properties); `enter code here` 
```

# android - Android - 事件监听器

> ID：10352719
> 
> 赞同：9
> 
> 时间：2012-04-27T14:40:15.430
> 
> 标签：android, class, events, android-activity, listener

我希望这将是一个简单的问题。我有主要活动，在这个活动中我创建了某个类的实例。如何将一些事件从一类发送到主要一类？如何设置某种侦听器以在类之间发送通知。我现在知道/使用的唯一选择是保持对父类的引用并直接从子类调用某些函数。

我想知道是否可以在 ActionScript 中创建类似的东西，我可以在其中调用 dispatchEvent(new Event("name")) 并稍后设置 addEventlistener("name" function) ？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T15:19:30.010

如果“我实现了某个类”意味着您在 Activity 类中声明了一个嵌套类，那么嵌套的非静态类将引用父类对象。

通常，您始终可以自己创建调度程序/侦听器模式。创建侦听器接口并将 addListener 或 setListener 方法添加到将调度事件的类。

监听器示例：

```
public interface IAsyncFetchListener extends EventListener {
    void onComplete(String item);
    void onError(Throwable error);
} 
```

事件调度程序示例：

```
public class FileDownloader {
    IAsyncFetchListener fetchListener = null;
    ...
    private void doInBackground(URL url) {
        ...
        if (this.fetchListener != null)
            this.fetchListener.onComplete(result);
    }

    public void setListener(IAsyncFetchListener listener) {
        this.fetchListener = listener
    }
} 
```

带有事件监听器的类示例：

```
public class MyClass {

    public void doSomething() {
        FileDownloader downloader = new FileDownloader();

        downloader.setListener(new IAsyncFetchListener() {

            public void onComplete(String item) {
                // do something with item
            }

            public void onError(Throwable error) {
                // report error
            }
        });

        downloader.start();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:20:48.510

只需在生成事件的类上实现一个侦听器（或侦听器列表）。

当生成事件时，遍历此列表并调用所有侦听器必须实现的方法（也许通过接口？）

希望它有所帮助，JQCorreia

# c# - 更新实体模型时客户端 ID 为 0

> ID：10352725
> 
> 赞同：0
> 
> 时间：2012-04-27T14:40:40.003
> 
> 标签：c#, linq, entity-framework, linq-to-entities

***看法***

```
@using (Html.BeginForm("UpdateClient", "Client")) { 
```

***控制器***

```
[HttpPost]
public ActionResult UpdateClient(Client client)
{            
    if (ModelState.IsValid) {                
        bool ret = _clientRepository.UpdateClient(client);                
        return RedirectToAction("Index", "Home");
    }
    return View(client);
} 
```

***存储库***

```
public bool UpdateClient(Client client)
{
    using (var context = new Entities()) {
        context.AttachTo("Clients",client);
        context.ObjectStateManager.ChangeObjectState(client, EntityState.Modified);
        context.SaveChanges();
    }
    return true;
} 
```

当我在控制器中调用 UpdateClient 时，客户端 ID 为 0。如何传递我已更新的 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:26:11.837

当您从客户端代码（即浏览器）调用 UpdateClient 方法时，您需要确保将要设置的字段回传到接收页面。

例如，我经常使用 jQuery 和一个简单的 ajax 调用将数据发送回服务器。帖子需要包含 Client 对象的匹配值：

```
$.post("/controller/UpdateClient", {
        "clientId": 1,
        "otherProp1": "some value",
        "otherProp2": "some value 2"
    }, function (data) {

    }
}; 
```

在您的情况下，您可能需要确保您有一个`input`包含以 ClientId 命名的字段的字段，以便它以这种方式发布到服务器：

```
<input type="hidden" id="clientId" name="clientId" value="1" /> 
```

此外，您可能会发现安装 Fiddler2 并使用它来查看实际发布到服务器的数据很有用。在处理这类事情时，这是无价的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T19:45:57.257

您给我们的信息不多，但您的 id 在 3 种情况下可能为 0。1\. 如果您在客户端生成或输入 id，您只是没有正确发布它。错过了隐藏的输入，错误的变量名。2\. 如果您在模型构造函数中生成您的 Id，您应该记住，将调用默认构造函数。然后它将用新值覆盖其属性。查看您的 id 属性是否有可以阻止或覆盖传入值的东西。3\. 如果您在数据库级别生成 Id，那么您应该知道数据库在创建新对象时不会返回 id。这是一个常见问题，但我对此不是很有经验（我们在应用程序的业务逻辑中生成 id）。

如果你再看看你的代码，我肯定会跟踪问题。

# c - 通过函数 C 传递变量

> ID：10352726
> 
> 赞同：-1
> 
> 时间：2012-04-27T14:40:43.637
> 
> 标签：c, function, pointers, chars

您好，我刚开始学习 C，我想知道为什么我在这里遇到问题.. 我希望传递一个 char 指针

```
char *temp; 
```

进入一个函数，即调用函数

```
checkIfUniqueCourseNo(temp,k); 
```

有一个原型

```
int checkIfUniqueCourseNo(char checkchar[4],int); 
```

和一个函数头

```
int checkIfUniqueCourseNo(char checkchar[4], int k) 
```

我确定我在这里做了一些非常愚蠢的事情，但我不知道如何解决它:(提前谢谢。ps我的错误是checkchar [4]输出一个P ...

例子 - -

```
temp = "123A"
checkIfUniqueCourseNo(temp,k);

int checkIfUniqueCourseNo(char checkchar[4], int k){
    printf("CheckifUniqueCourse\n");
    printf("Check Value = %c \n", checkchar);

    return 0;
} 
```

输出 = 检查值 = P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:56:28.963

```
temp = "123A" 
checkIfUniqueCourseNo(temp,k);  

int checkIfUniqueCourseNo(char checkchar[4], int k){
  printf("CheckifUniqueCourse\n");
  printf("Check Value = %c \n", checkchar);
                                ^^^^^^^^^
  return 0; 
} 
```

如果您尝试打印 的第一个字符`checkchar`，则需要将此行更改为

```
printf("Check Value = %c\n", *checkchar); 
```

或者

```
printf("Check Value = %c\n", checkchar[0]); 
```

在函数参数声明的上下文中，`T a[N]`和`T a[]`等价于`T *a`; `a`被声明为指向 的指针`T`，而不是 的数组`T`。

当你写

```
printf("Check Value = %c\n", checkchar); 
```

你撒谎了`printf`；你说参数应该是 type `char`，但你传递了 a `char *`。因此，虚假输出。

如果要打印出整个*字符串* `"1234"`，则需要将该行更改为

```
printf("Check value = %s\n", checkchar); 
```

这次我们使用`%s`转换说明符来告诉`printf`它`checkchar`指向一个以 0 结尾的数组`char`（又名字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:55:49.223

It's been a while since I've done C, but I can see a few problems here, `temp = "123A"` actually requires an array for 5 characters (one of which is to include the '\0' string terminating character).

Secondly, the line `printf("Check Value = %c \n", checkchar);` seems to be trying to print a memory pointer as a character, change it to the following: `printf("Check Value = %s \n", checkchar);` and it will output each character in the array until it hits the terminating character.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:44:36.593

这一点都不清楚。您是否分配了任何价值`temp`？如果是这样，是什么？

将您的原型设置为：

```
int checkIfUniqueCourseNo(char* checkchar, int); 
```

因为根本不清楚你从哪里得到 4。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T19:16:26.357

这里有几件事要看，你需要好好看看你拥有的数据，它是如何表示的以及你想用它做什么。

您的课程*代码*似乎是一个四字符的字符串，您应该知道，传统上，C 中的字符串在末尾还包含一个额外的字节，其值为 0 (NUL)，以便存在的许多字符串函数知道它们已达到字符串的结尾。

在您的情况下，您的四位数代码占用五个字节的内存。所以不适合将它传递给你的函数。

如果我是你，我会像这样传递一个指针：-

```
int checkIfUniqueCourseNo(char* coursecode, int k ) {
  int rv = -1;
  if ( coursecode == NULL ) return rv;
  //... 
```

我不知道K是干什么用的，你呢？

一旦你的函数中有字节序列，你就可以通过对数据进行一些简单的边界检查来省去很多麻烦，如下所示：

```
 //...
  if ( strlen(coursecode) > 4 ){
    fprintf(stderr,"course code too long\n");
    return rv;
  }

  if ( strlen(coursecode) < 4 ){
    fprintf(stderr,"course code too short\n");
    return rv;
  }
  //... 
```

你可以确定你现在有一个 4 个字符的字符串..

# xcode4 - 添加实现和头文件

> ID：10352728
> 
> 赞同：0
> 
> 时间：2012-04-27T14:40:48.780
> 
> 标签：xcode4

大家好，我已经为.h/.m 创建了我的代码等，这些都已经准备好了。但我想知道如何添加更多，因为当我将视图控制器添加到我的故事板时。我不能在其中包含代码我认为我正在寻找的东西称为第二个视图控制器.h/.m。我正在 Xcode 4.2 中创建一个项目，它是一个基于单一视图的应用程序。我是新手，但我认为我所说的很有意义，感谢您的时间。

亲切的问候

![我窝](../Images/39e9815b872543fff75de630aa2ce4dd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:50:35.003

*   打开你的项目
*   按`command+N`打开新文件对话框
*   iOS > 可可触摸
*   班级 = YOUR_CLASS_NAME
*   = SUBCLASS_TYPE 的子类（例如 UIViewController）

等等

# php - 在清除文本框字段时再次加载选择框

> ID：10352730
> 
> 赞同：1
> 
> 时间：2012-04-27T14:40:59.660
> 
> 标签：php, javascript

我有一个选择框和一个文本框来搜索选择框中的列表。选择框正在使用 PHP 从数据库中填充。我在这里想要实现的是尽快清除文本字段；选择框应该刷新。我必须重新加载整个页面才能做到这一点。这是我用来搜索选择框的小脚本。

```
function filterSelectBox(filterButton) {
    var searchValue = document.getElementById('selectFilter').value.toLowerCase();
    var selectField = document.getElementById("domainID");
    var optionsLength = selectField.options.length;

    for(var i = 0; i < optionsLength; i++) {
        if(selectField.options[i].innerHTML.toLowerCase().indexOf(searchValue) >= 0) {
            selectField.options[i].style.display = 'block';
        } else {
            selectField.options[i].style.display = 'none';
        }
    }
} 
```

这是与代码关联的 HTML 元素。

```
<div class="search_domains" id="search_domains">
    <input type="text"  id="selectFilter" name="selectFilter" />
    <input type="button" id="filterButton" value="Filter" onClick="filterSelectBox(this)"/>
</div> 
```

这就是我填充选择框的方式，

```
<select name="domainID" id="domainID" size="15" style="width:175">
        <option>Select a Domain</option>
        <? foreach ($domains as $row) {
        ?>
        <option value="<?=$row -> id ?>"><?=$row -> domain ?></option>
        <? } ?>
    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:48:57.860

我在这里要做的是使用同一个 PHP 文件中的 AJAX 填充列表，但让它输出 JSON。在加载页面时，AJAX 请求将加载 php 文件、获取 JSON 并在列表中添加项目。

当文本字段为空时刷新，您可以使用 onChange 或 onKeyUp 并检查`length`值的。

我认为这一切在 jQuery 或任何 JS 框架中都会比纯 JS 简单得多:)

这些将有助于：

*   [http://css-tricks.com/dynamic-dropdowns/](http://css-tricks.com/dynamic-dropdowns/)
*   [使用 jQuery、JSON 和 AJAX 填充下拉列表](https://stackoverflow.com/questions/3564333/using-jquery-json-and-ajax-to-populate-a-drop-down)
*   [使用 json 填充下拉列表](https://stackoverflow.com/questions/9265341/populate-dropdown-using-json)
*   [从 JSON 填充 PHP 中的下拉菜单](https://stackoverflow.com/questions/8874652/populate-dropdown-menu-in-php-from-json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:51:19.177

您绝对可以使用 AJAX，但对于本示例，它可能不是必需的。将原始内容存储在 Javascript 数组中并在需要时重置它可能会更有效。我实际上会删除选项而不是隐藏它们：

```
<script type="text/Javascript">
    var originalOptions = {<?php $echo = array(); foreach ($domains as $row) $echo[] = "\"{$row->id}\":\"{$row->domain}\""; echo implode(", ", $echo); ?>};

    function filterSelectBox(text)
    {
        var selectField = document.getElementById('domainID');
        selectField.options.length = 0;

        for (var key in originalOptions)
        {
            if (originalOptions[key].substr(0, text.length) == text)
            {
                var option = document.createElement("option");
                option.value = key;
                option.text = originalOptions[key];
                selectField.add(option, null);
            }
        }
    }
</script>
<select name="domainID" id="domainID" size="15" style="width:175">
    <?php foreach ($domains as $row) {
        echo "\t<option value=\"{$row->id}\">{$row->domain}</option>\n";
    } ?>
</select>

<input type="text" onkeyup="filterSelectBox(this.value)" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:19:13.440

把这段代码：

```
document.getElementById('selectFilter').onkeyup = function() {
    if(this.value.length == 0) {
        var selectField = document.getElementById("domainID");
        var optionsLength = selectField.options.length;

        for(var i = 0; i < optionsLength; i++) {
            selectField.options[i].style.display = 'block';
        }
    }
}; 
```

就在`</body>`页面中的标记之前，当您清除文本框值时，它将显示所有选项。

# asp.net-mvc - 当“删除”遇到数据库约束时显示数据库错误消息的最佳方式

> ID：10352731
> 
> 赞同：2
> 
> 时间：2012-04-27T14:41:04.930
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework-4.1

我正在学习 MVC3 和 EF4.1 。我目前正在尝试使用新的 TT4 生成器使用 Database first EF 来生成精益数据类。我已经生成了一个 CRUD 控制器，并且遇到了如何最好地在视图中显示数据库约束消息的问题。

我的代码到目前为止：

```
 [HttpPost]
    public ActionResult Delete(Guid id, aspnet_Users User)
    {
        string errorMessage = string.Empty;
        try
        {
            // TODO: Add delete logic here
            db.Entry(User).State = System.Data.EntityState.Deleted;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        catch(Exception err)
        {
            return Content(err.InnerException.StackTrace);
            //return View();
        }
    } 
```

非常感谢任何帮助。

埃德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:44:21.237

最简单的事情之一是在异常消息中添加模型错误。这实质上将违反约束视为验证错误。但是，您可能应该为用户自定义消息。

```
[HttpPost]
public ActionResult Delete(Guid id, aspnet_Users User)
{
    try
    {
        // TODO: Add delete logic here
        db.Entry(User).State = System.Data.EntityState.Deleted;
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    catch(Exception err)
    {
        ModelState.AddModelError(String.Empty, err.Message);
        return View(User);
    }
} 
```

# vb.net - LINQ to XML，是否有更好的方法来确定列表中是否存在元素？

> ID：10352732
> 
> 赞同：1
> 
> 时间：2012-04-27T14:41:07.483
> 
> 标签：vb.net, linq-to-xml

我正在 VB 中使用 LINQ to XML（尽管 C# 中的答案也很棒）。首先，我的代码有效，所以这并不重要。但是，我不禁想到，我对条件逻辑所做的事情应该已经可以使用 LINQ 查询本身来实现。

这是我所拥有的：

```
 'Get the Description elements in the ResultData section where the value is "Op Code"
        Dim opCodes As List(Of XElement) = (From c In xdoc.Descendants("ResultData").Descendants("Description")
                 Where c.Value = "Op Code"
                 Select c).ToList()

        If opCodes.Count > 0 Then
            'Get the sibling XElement of the first "Description" XElement (there should be only one) by using the parent
            sOperator = Convert.ToString(((From c In opCodes
                     Select c).FirstOrDefault().Parent).<Value>.Value)
        Else
            sOperator = "Not Available"
        End If 
```

请不要对我定位兄弟节点的方法过于挑剔——XML 文件是由第三方测试设备生成的，这是获取我需要的值的唯一通用方法。我真正在这里寻找的是处理 If 块的更好方法。

对此提出的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:44:32.163

听起来你想要（C#）：

```
string operator = xdoc.Descendants("ResultData")
                      .Descendants("Description")
                      .Where(x => x.Value == "Op Code")
                      .Select(x => x.Parent.Element("Value").Value)
                      .FirstOrDefault() ?? "Not available"; 
```

假设我已经正确理解了您，您只是想在兄弟“Value”元素中获取文本。

我*认为*VB 中不存在 null-coalescing (??) 运算符，但是您可以将所有内容都带到`FirstOrDefault`，然后只需进行“如果什么都没有，请将其设置为不可用”检查。

# java - 使用 Java 定义单词

> ID：10352733
> 
> 赞同：7
> 
> 时间：2012-04-27T14:41:07.743
> 
> 标签：java, word-list

我想知道 Java 中是否有一个 API 可以定义单词并找到单词的起源。我记得不久前搜索过这个并看到“apache commons”，但我不确定。

所以基本上，用户将能够输入一个词“溢出”然后程序将能够定义这个词。所以我正在寻找一个可以定义单词并找到单词来源的 API。所以“recherche”这个词的起源是“法语”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T01:10:29.200

[WordNet](http://wordnet.princeton.edu/)将为您提供一半您正在寻找的内容：您可以查找一个单词的定义。请注意，WordNet for Java 有几种实现：[jwi](http://projects.csail.mit.edu/jwi/)、[jaws](http://lyle.smu.edu/~tspell/jaws/index.html)、[Dan Bikel's](http://www.cis.upenn.edu/~dbikel/software.html#wn)、[WordnetAPI](http://code.google.com/p/wordnetapi/)。*其中一些可能比 miku 建议的jwordnet*更容易用于您的目的（我只使用了*jaws*和*jwi*）。

*注意*：WordNet 不会给你出处（AFAIK）。我不知道有这样的软件。

*注意*：您必须提供单词的*引理*才能在字典中查找它。这意味着如果您想在自由文本文档（可能包含变形形式）上自动执行此操作，则必须应用一些自然语言处理 (NLP) 技术。如果你走这条路，我建议[GATE](http://gate.ac.uk/)项目的[Morph 插件](http://gate.ac.uk/sale/tao/splitch21.html#sec%3aparsers%3amorpher)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T14:45:19.383

可能是Wordnet？它有一个 Java 包装器：http: [//sourceforge.net/projects/jwordnet/](http://sourceforge.net/projects/jwordnet/)

另一个 NLP 工具包列表：

*   [http://en.wikipedia.org/wiki/List_of_natural_language_processing_toolkits](http://en.wikipedia.org/wiki/List_of_natural_language_processing_toolkits)

检测语言：

*   [http://www.jroller.com/melix/entry/nlp_in_java_a_language](http://www.jroller.com/melix/entry/nlp_in_java_a_language)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T03:01:50.377

有一个词源网站：[http ://www.etymonline.com/](http://www.etymonline.com/)

它给出了结果：recherche 1722，来自 Fr。recherché “仔细寻找”，rechercher 的 pp. “寻找”。常用19c。食物，风格等，以表示晦涩的卓越。

不知道他们是否有 API，但使用某种脚本来查询它。

所以找到一种检测“Fr”的好方法。在上面的句子中。

干杯，埃里克

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T13:46:47.503

你在寻找[JWKTL](http://www.ukp.tu-darmstadt.de/software/jwktl/)吗？

> “维基词典是一个多语言、基于网络、免费提供的词典、同义词词典和短语手册，被设计为维基百科的词汇伴侣。最近，它已被公认为用于自然语言处理应用程序的有前途的词汇语义资源。”

使用它，您可以查看单词的词源。

# java - 从 JibX WS 访问 SOAP 标头

> ID：10352740
> 
> 赞同：0
> 
> 时间：2012-04-27T14:41:44.277
> 
> 标签：java, soap, header, jibx, usernametoken

我有一个接受 opentravel.org OTA XML 请求并做出相应响应的 tomcat Web 服务。它使用 JibX OTA 类。

到目前为止，该服务的用户已经使用了 POX，并且它工作得非常好，但是一个新用户想要使用 SOAP 并像这样向 SOAP Header 添加安全凭证（而不是把它们放在 POS xml 片段中）......

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <wsse:Security soap:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org        /wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>USERNAME</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-    wss-username-token-profile-1.0#PasswordText">SECRET</wsse:Password>
      </wsse:UsernameToken>
    </wsse:Security>
  </soap:Header> 
```

因此，为了验证请求，我认为我需要从服务实现类中访问标头。

我查看了 SOAP Headers 示例，我认为它告诉我可以通过包含 inContext 来访问标头，例如

```
public RoomListRS list(RoomListRQ roomListRQ, InContext inCtx){
....
} 
```

所以在这个方法中我可以做到这一点......

```
Security security = (Security ) inCtx.getAttribute("security"); 
```

所以我可以访问其中的用户名令牌，

...在服务中指定了这个...

```
<service name="OTAService">
  <service-class>com.xx.webservice.ota.HotelServiceImpl</service-class>
  <operation method="list"/>
  <handler-class class="org.jibx.ws.io.handler.ContextAttributeUnmarshallingInHandler">
    <constructor-arg value="com.xx.shared.soap.security.Security"/>
    <constructor-arg value="security"/>
  </handler-class>
</service> 
```

我说对了吗？

所以我创建了 Security 类，但忽略了所有命名空间的东西，只是为了开始并证明我可以访问标题中的某些内容。基于有这样的片段......

```
 <Security>
      <UsernameToken>
        <Username>USERNAME</Username>
        <Password>SECRET</Password>
      </UsernameToken>
    </Security> 
```

所以我用bindgen创建了绑定，然后编译，然后用soapUI调用它

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns="http://www.opentravel.org/OTA/2003/05">
     <soapenv:Header>
     <Security>
      <UsernameToken>
        <Username>USERNAME</Username>
        <Password>SECRET</Password>
      </UsernameToken>
    </Security>
  </soapenv:Header>
   <soapenv:Body>
<OTA_HotelRoomListRQ xmlns="http://www.opentravel.org/OTA/2003/05" Version="2.0">
....
</OTA_HotelRoomListRQ>
</soapenv:Body>
</soapenv:Envelope> 
```

但是当我尝试从上下文中获取 Security 对象时，它为空。

我弄错了棍子的一端吗？

我是否应该使用更多 SOAPY 来创建另一个具有不同端点的服务？

我试图用 JibX WS 和 inHandler 做的事情是不可能的吗？

欢迎任何评论。

* * *

非常感谢您不厌其烦地回答我的问题。

我正在尝试查看您添加的内容。我使用您的自定义和 xsd 来创建 java 源代码和 binding.xml。

我已经编译了这些类，现在我正在尝试绑定它们，但是我收到了这个错误：

```
C:\Java\wsse>java org.jibx.binding.generator.BindGen org.oasisopen.docs.wss.oasis200401wsswssecuritysecext1.SecurityHeaderType
Exception in thread "main" java.lang.IllegalStateException: No way to handle type java.lang.Object, referenced from org.oasisopen.docs.wss.oasis200401wsswssecuritysecext1.SecurityHeaderType
    at org.jibx.binding.generator.BindGen.expandReferences(BindGen.java:227)
    at org.jibx.binding.generator.BindGen.findReferences(BindGen.java:1010)
    at org.jibx.binding.generator.BindGen.generate(BindGen.java:1124)
    at org.jibx.binding.generator.BindGen.main(BindGen.java:1302) 
```

我将看一下 bindgen 定制，看看这是否能说明问题，因为这是针对这个问题给出的唯一线索。你能告诉我你是怎么解决这个问题的吗？

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:00:37.797

我可以分享一些用于 WS-Security 用户名/密码标头的生产代码。我不明白为什么您的代码不起作用，但也许这会有所帮助。

我们从 oasis-200401-wss-wssecurity-secext-1.0.xsd 模式生成了 WS-Security 代码和绑定，并进行了以下自定义：

```
<!--  Contains customization elements for code generation from WS Security schema -->
<schema-set show-schema="false" generate-all="false" xmlns:xs="http://www.w3.org/2001/XMLSchema" line-width="120">
  <schema name="oasis-200401-wss-wssecurity-secext-1.0.xsd" generate-all="true" prefer-inline="true" any-handling="mapped">
    <class-decorator class="org.jibx.schema.codegen.extend.CollectionMethodsDecorator" />
  </schema>
</schema-set> 
```

然后使用以下内容构建：

```
<target name="codegen-wss" description="Regenerate JiBX bindings and generated code for WS-Security schema">
  <echo message="Running code generation from schema" />
  <mkdir dir="${gen.src.dir}" />
  <java classname="org.jibx.schema.codegen.CodeGen" fork="yes" classpathref="build.classpath" failonerror="true">
    <arg value="-c" />
    <arg value="custom_jibx_gen_wssec.xml" />
    <arg value="-t" />
    <arg value="${gen.src.dir}" />
    <arg value="wsdl/wssec/oasis-200401-wss-wssecurity-secext-1.0.xsd" />
  </java>
  <move file="${gen.src.dir}/binding.xml" tofile="${wssec.binding.file}" failonerror="true" />
</target> 
```

并绑定：

```
<target name="compile" depends="init" description="Compile the source code and run JiBX binding compiler">
  <mkdir dir="${dest.dir}" />
  <javac srcdir="${src.dir}:${gen.src.dir}" destdir="${dest.dir}" deprecation="on">
    <classpath refid="build.classpath" />
  </javac>
  <bind binding="${gen.src.dir}/xxx-binding.xml">
    <classpath path="${dest.dir}" />
  </bind>
  <bind binding="${wssec.binding.file}">
    <classpath path="${dest.dir}" />
  </bind>
</target> 
```

servlet 的 Spring 配置定义了 InHandler：

```
<property name="handlerDefinitions">
  <list>
    <bean class="org.jibx.ws.server.HandlerDefinition" >
      <description>Handler for inbound WS/Security header</description>
      <property name="className" value="org.jibx.ws.io.handler.ContextAttributeUnmarshallingInHandler" />
      <property name="args">
        <list>
          <value>org.oasisopen.docs.wss.oasis200401wsswssecuritysecext1.SecurityHeaderType</value>
          <value>wssecurity.header</value>
        </list>
      </property>
    </bean> 
```

并且端点使用以下方法检索标头：

```
public ServiceRequestReceipt processRequest(ServiceRequest request, InContext inCtx, OutContext outCtx) 
    throws WsException {
    SecurityHeaderType securityHeader = (SecurityHeaderType) inCtx.getAttribute("wssecurity.header"); 
```

我们使用 securityHeader 的代码如下所示：

```
 if (securityHeader == null) {
            throw new AuthenticationException("No WS-Security header found");
        }

        List<Object> securityHeaderTypes = securityHeader.getSecurityHeaderTypes();
        if (securityHeaderTypes == null || securityHeaderTypes.size() == 0) {
            throw new AuthenticationException("WS-Security header appears to be empty");
        }

        UsernameTokenType usernameToken = null;
        try {
            usernameToken = (UsernameTokenType) securityHeaderTypes.get(0);
        } catch (ClassCastException e) {
            throw new AuthenticationException("Expected UsernameToken in WS-Security header");
        }

        AttributedString usernameAttStr = usernameToken.getUsername();
        if (usernameAttStr == null) {
            throw new AuthenticationException("Expected Username in WS-Security header");
        }

        String username = usernameAttStr.getString();
        if (!username.equals(retailer.getRetailerUsername())) {
            throw new AuthenticationException("Invalid username in WS-SecurityHeader");
        }
        List<Object> any = usernameToken.getAny();
        if (any == null) {
            throw new AuthenticationException("Expected Password element in WS-Security header");
        }
        PasswordString passwordString = null;
        for (Iterator iterator = any.iterator(); iterator.hasNext();) {
            try {
                passwordString = (PasswordString) iterator.next();
            } catch (ClassCastException ignore) {
                logger.debug("Found non password string object");
            }
        }
        if (passwordString == null) {
            throw new AuthenticationException("Expected Password in WS-Security header");
        }
        if (passwordString.getAttributedString() == null) {
            throw new AuthenticationException("Expected Password AttributedString in WS-Security header");
        }

        String password = passwordString.getAttributedString().getString();
        if (!password.equals(retailer.getRetailerPassword())) {
            throw new AuthenticationException("Invalid password in WS-SecurityHeader");
        } 
```

我希望这会有所帮助！

# wpf - 自定义控件到 WPF 中的 Window 应用程序中

> ID：10352743
> 
> 赞同：1
> 
> 时间：2012-04-27T14:41:56.493
> 
> 标签：wpf, wpf-controls

标题并没有真正意义......对此感到抱歉。我会尽力解释我的问题。我有一个更大的项目，我正在尝试实现一个包含一些自定义控件的新 WPF 窗口。再深入一点，这个窗口应该看起来像一个计算器。这个计算器有许多键按钮，它们是从 Controls 继承的“自定义控件”，它们的样式在 Generic.xaml 中定义。当我尝试调试它时，自定义控件（按键）不会出现在计算器窗口中。我认为这是由于 Generic.xaml 文件有问题。有人可以给我一个提示吗？？？提前感谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:52:35.877

我在网上搜索了很多，最后我得到了这个讨论[wpf-resource-not-loading-from-generic](https://stackoverflow.com/questions/5639017/wpf-resource-not-loading-from-generic-xaml)的答案的解决方案。线索是将这些代码行添加到 AssemblyInfo.cs 中：

```
[assembly: ThemeInfo(
    ResourceDictionaryLocation.None, 
    //where theme specific resource dictionaries are located
    //(used if a resource is not found in the page, 
    // or application resource dictionaries)
    ResourceDictionaryLocation.SourceAssembly 
    //where the generic resource dictionary is located
    //(used if a resource is not found in the page, 
    // app, or any theme specific resource dictionaries)
)] 
```

也许这对将来的某人有用...... :-)

问候，保罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:13:20.967

A couple of suggestions:

*   download Snoop (it's free), it examines your Visual tree at run time and helps to see if controls are there, if the style making them invisible, etc.

*   remove the styles, run your project - do controls appear? then it's your styles!

*   do you have nameless/key-less styles that target buttons, other simple/out-of-the-box control? Then remove them too, if they are the ones affecting your controls, then consider changing them, or applying styles to your controls so they stop inheriting from those defaults.

# sql - 我的 SQL 查询需要帮助

> ID：10352750
> 
> 赞同：1
> 
> 时间：2012-04-27T14:42:28.647
> 
> 标签：sql, ms-access

好吧，我可能也早些时候发布了这个，但到目前为止找不到答案，所以请帮我解决这个问题。

我的数据库结构：

**ATT**（`Activity`表）

*   Act_ID(PK)
*   Assigned_To_ID (FK, 参考`Emp_ID`)
*   Project_ID (FK, 参考`Project_ID`)
*   Product_ID (FK, 参考`Product_ID`)
*   状态（可以`New, OnHold, Cancel, Closed`）

**产品_桌子**

*   Product_ID (PK)
*   产品名称

**项目表**

*   Project_ID (PK)
*   项目名

**Employee_Table**

*   Emp_ID (PK)
*   F_名称。

**约束**

*   In 1 Project --> 多个员工可以工作
*   1 位员工 --> 可以分配多个活动 ( `Act_ID`)
*   在任何给定的时间点`Status`可以是任何给定的值

现在在我的 SQL 查询中，我想做的是负载检查::

活动（由 表示`Act_ID`）分配给员工，由 表示`Assigned_To_ID`，对于项目（`Project_ID`在`ATT_Table`）和特定状态。我需要从我的 SQL 查询中输出 5 个值：

1.  员工的名字
2.  项目名称
3.  分配给员工（在 A 中）的总活动数。
4.  为员工（在 A）分配的活动数量，其中状态为新建或处理中。
5.  加载。那将是 = C/D * 100（C 比 D 大，这是显而易见的。）

现在可能有一个条件，一个员工假设 E1 正在处理项目 P1，P2。所以我的表输出将如下所示：

```
A    B     C    D     E
E1   P1    
E1   P2 
```

所以这里 C、D、E 将具有与该项目的活动相对应的值（P1 或 P2）

到目前为止我已经尝试过了::

```
SELECT 
    F_Name AS A, 
    Project_Name AS B, 
    Count(Act_ID) AS C, 
    Count(Act_ID) AS D
FROM 
    Employee_Table, ATT_Table, Project_Table
WHERE 
    ATT_table.[Assigned_To_ID] = Employee_Table.[Emp_ID] 
    AND Project_Table.[Project_ID] = ATT_Table.[Project_ID] 
    AND Count(Act_ID) IN (SELECT Count(Act_ID)
                          FROM ATT_Table
                          WHERE ATT_Table.[Status] <> 'Closed' 
                            AND ATT_Table.[Status] <> 'OnHold')
GROUP BY 
     F_Name, Project_Name; 
```

我得到了 A、B、C。但是当我尝试查找用于状态检查的活动时，我无法执行此查询，因为它给了我一条消息，无法在 WHERE 子句中写入计数。请帮我解决这个问题。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:09:11.860

```
SELECT 
      E1.F_Name AS A, 
      P1.Project_Name AS B, 
      Count(A1.Act_ID) AS C, 
      sum( IF( A1.Status IN ( 'Closed', 'OnHold' ), 0, 1 )) as D,
      (Count(A1.Act_ID) / sum( IIF( A1.Status IN ( 'Closed', 'OnHold' ), 0, 1 ))) * 100 as E
   FROM 
      ATT_Table A1
         JOIN Employee_Table E1
            ON A1.Assigned_To_ID = E1.Emp_ID
         JOIN Project_Table P1
            ON A1.Project_ID = P1.Project_ID
   GROUP BY 
      F_Name, Project_Name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T19:34:00.277

也许像这样。尝试一下....

```
Select Emp.F_Name As A,
  Proj.Project_Name As B,
  Count(ATT.Act_ID) As C,
  sum( IIF( ATT.Status IN ( 'Closed', 'OnHold' ), 0, 1 )) as D,
  (Count(ATT.Act_ID) / sum( IIF( ATT.Status IN ( 'Closed', 'OnHold' ), 0, 1 ))) * 100 as E 
From Employee_Table As Emp Inner Join
  (Product_Table As Prod Inner Join
  (ATT_Table As ATT Inner Join Project_Table As Proj On Proj.Project_ID=ATT.Project_ID) 
  On Prod.Product_ID=ATT.Product_ID) 
  On Emp.Emp_ID=ATT.Assigned_To_ID
Group By Emp.F_Name,Proj.Project_Name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T21:42:05.733

你提到`Product_Table`了，但我不明白你的问题是如何涉及该表的。对于其余部分，我将从子查询中提取列 A、B、C 和 D，并在外部查询中计算 E。

```
SELECT
    sub.F_Name AS A,
    sub.Project_Name AS B,
    sub.C,
    sub.D,
    ((sub.C / sub.D) * 100) AS E
FROM
    (
        SELECT
            Emp.F_Name,
            Proj.Project_Name,
            Count(att.Act_ID) AS C,
            Sum(IIf(att.Status IN ('New', 'InProcess'), 1, 0)) AS D
        FROM
            (ATT_Table AS att
            INNER JOIN Employee_Table AS Emp
            ON Emp.Emp_ID = att.Assigned_To_ID)
            INNER JOIN Project_Table AS Proj
            ON Proj.Project_ID = att.Project_ID 
        GROUP BY
            Emp.F_Name,
            Proj.Project_Name
    ) AS sub; 
```

# java - Hibernate Validation i18n（日文）显示不好（乱码）

> ID：10352755
> 
> 赞同：1
> 
> 时间：2012-04-27T14:43:15.273
> 
> 标签：java, spring, hibernate, validation, spring-mvc

验证按预期工作，但消息仅以英语很好地显示。我用自己的日语留言。

问题是我收到了日语的乱码验证消息。我将validation-api-1.0.0.GA.jar 与hibernate-validator-4.2.0.Final.jar 一起使用。我有 ValidationMessages.properties 和 ValidationMessages_ja.properties。文件为utf8：例如：firstName=姓をご记入ください。出来：å½ãé¸æãã¦ããããã

我在 bean 上面使用了一个要验证的属性：@Size(min = 1, message = "{myErrorMsg}") private String myAttribute;

在我的 spring.xml 中：

```
 <bean id="messageSource"
    class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <!-- <property name="basename" value="classpath:tc-messages" /> -->
    <property name="basenames">
        <list>
            <value>classpath:tc-messages</value>
            <value>classpath:ValidationMessages</value>
        </list>
    </property>
    <property name="defaultEncoding" value="UTF-8" />
</bean> 
```

和：

```
<bean id="localeResolver"
    class="org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver">
    <!-- <property name="defaultLocale" value="en_us" /> -->
</bean> 
```

有什么我想念的吗？

谢谢， 罗德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:37:38.417

我会说编码可能在构建时丢失了。您使用的构建工具是否知道您的文件编码？例如，对于 Maven，您需要以下属性：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

# asp.net-mvc-3 - 如何从 RazorViewEngine 访问 Request 对象？

> ID：10352760
> 
> 赞同：7
> 
> 时间：2012-04-27T14:43:22.063
> 
> 标签：asp.net-mvc-3, razor, request

我已经进行了子类化`RazorViewEngine`，因此我可以检查`Request.Browser.IsMobileDevice`并在视图文件名中添加一个特殊的移动标识符以供它抓取。但是我无法访问该`Request`对象。我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T14:47:21.300

您可以使用`HttpContext.Current.Request`或`Context.Request`。虽然了解它是如何`IsMobileDevice`工作的。它使用包含已知用户代理列表的浏览器文件。一旦构建了新设备，该列表就会过时，但在某些情况下仍可能会正确识别该设备是移动设备。推荐的方法是使用[51Degrees](http://51degrees.codeplex.com/)或直接连接到它包含的服务。

# iphone - 进入后台时 Gamekit 继续会话

> ID：10352761
> 
> 赞同：2
> 
> 时间：2012-04-27T14:43:39.557
> 
> 标签：iphone, ios, networking, gamekit

我使用 GameKit 和 GKMatch 在两个 iOS 设备之间建立连接以进行同步游戏。当一名玩家进入后台时，连接将断开。我怎样才能避免这种行为？当一位用户确实将应用程序暂停到后台时，是否可以通过 GKMatch 保持连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:59:14.830

根据苹果的文档：

> 一旦您的游戏移到后台，本地玩家对象的已验证属性的值就会变为无效，直到您的游戏移回前台。在 Game Kit 重新对玩家进行身份验证并调用您的身份验证处理程序之前，您无法读取该值以确定玩家是否仍然通过身份验证。在调用完成处理程序之前，您的游戏必须表现得好像没有经过身份验证的玩家一样。调用处理程序后，已验证属性中存储的值将再次有效。

资料来源：[Game Center 编程指南，第 1 页。39](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/GameKit_Guide/GameKit_Guide.pdf) .

除非您的应用程序使用 VOIP 或特殊情况适用，否则您不应该真正在后台保持网络连接打开。（如果您有兴趣，请查看[这个 SO question](https://stackoverflow.com/questions/5840365/how-can-an-ios-app-keep-a-tcp-connection-alive-indefinitely-while-in-the-backgro)以了解黑客式的解决方法）。由于您的播放器身份验证在进入后台时失效，另一台设备（如果它确实设法从后台应用程序接收网络数据）将不会（可靠地）知道哪个 GKPlayer 发送了信息。

因此，虽然 Apple 没有明确表示，但所有 Game Center 功能通常应在应用程序进入后台时取消，并在重新启动时重新验证玩家身份后恢复。

作为旁注，当应用程序退出后台时（通常，取决于后台任务）被视为“有资格暂停”。这是多任务执行存在此类限制的原因之一 - 您的应用程序可能随时被终止以释放内存，而您真的不希望在发生这种情况时进行繁重的数据传输！如果您想了解有关网络和多任务处理的更多信息，请参阅[TN227 。](http://developer.apple.com/library/ios/#technotes/tn2277/_index.html)

**编辑：另一种方法：**

虽然在后台运行应用程序时无法保持 GKMatch 处于活动状态，但模拟此行为的另一种方法是将游戏状态保存到您自己的服务器。要求用户在离开游戏之前与一些 UI 交互（可能按下按钮），这会将当前游戏状态保存到您自己的服务器并通知其他玩家您即将离开游戏。重新启动后，查询您的服务器以查看您是否有任何已保存的游戏，如果有，则加载游戏状态并向其他玩家发送通知。这并不严格维持相同的游戏，而是一种近似您所追求的行为的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:37:08.757

这是不可能的

当一名玩家进入后台时，您可以这样做

在这种情况下 - (void) applicationDidEnterBackground:(UIApplication *)application { } 在第一个玩家进入后台的数据包数据中将消息发送给第二个玩家

然后在 - (void) receiveData:(NSData *)data fromPeer:(NSString *)peer inSession: (GKSession *)session context:(void *)context; { } 当数据得到停止您的应用程序并弹出到上一个视图时

# java - 在 Eclipse 重新启动时停止打开 viewparts 窗口

> ID：10352767
> 
> 赞同：2
> 
> 时间：2012-04-27T14:43:53.750
> 
> 标签：java, eclipse, eclipse-plugin, swt

我正在编写一个 Eclipse 插件。我的插件正在打开一个 viewpart 窗口并在里面绘制一个图形。我正在运行插件并打开 viewpart 窗口，然后关闭 Eclipse。所以我想要的是下次启动Eclipse时默认情况下不会再次打开viewpart窗口。谁能告诉我该怎么做？

亲切的问候，基里亚科斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T14:51:20.863

在您的[*org.eclipse.ui.views*](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_views.html#e.view)扩展中，将*视图*元素的*可恢复*属性设置为.*`false`*

 *```
<extension>
    <view
        ...
        restorable="false">
    </view>
</extension> 
```*

# c - 在 C 中读取 ELF 标头

> ID：10352768
> 
> 赞同：7
> 
> 时间：2012-04-27T14:43:54.370
> 
> 标签：c, linker, elf

目前我正在编写读取elf文件头并打印一些信息的小程序

我有一个名为 buf 的 unsigned char 指针，它指向 elf 文件在内存中的位置（我使用 mmap 将其映射到内存），然后我将其类型转换为正确的 elf 头指针

```
Elf32_Ehdr *ehdr = (Elf32_Ehdr *)buf; 
```

在此之后我想获得程序头表的地址，我这样做是这样的

```
Elf32_Phdr *ptbl = (Elf32_Phdr *) (buf + ehdr->e_phoff) 
```

当我注意到 ptbl 指针的值没有改变时，当我尝试像这样打印 e_phoff 成员的值时

```
fprintf( stdout , "Offset of program headers : %d\n", ehdr->e_phoff); 
```

我得到零 当我尝试打印程序头的数量和节头的数量时，也会发生同样的事情 - 总是为零 如果我使用 linux readelf，它会打印正确的值 有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T04:05:02.200

解析 ELF 对象时，您需要记住：

1.  文件内结构（例如 ELF 可执行文件头）的大小、文件对齐方式和内部布局取决于 ELF 对象的字长。
2.  ELF 对象的字节顺序可能与读取对象的程序的“本机”字节顺序不同。
3.  包含大量节或程序段的 ELF 对象可以使用替代的“扩展编号”方案。

与其手动处理这些情况，不如使用 ELF(3) 访问 API 的实现来解析 ELF 对象（请参阅：[BSD libelf](http://sourceforge.net/apps/trac/elftoolchain/wiki/libelf)或[GNU libelf](http://directory.fsf.org/wiki/Libelf)）。

教程`` [libelf by Example](http://sourceforge.net/projects/elftoolchain/files/Documentation/libelf-by-example/20120308/) '' 包含对 ELF(3) API 的可读介绍。

# javascript - JQuery Datepicker 隐藏页面上一个日历中的日期

> ID：10352769
> 
> 赞同：6
> 
> 时间：2012-04-27T14:43:57.133
> 
> 标签：javascript, jquery, datepicker

我在同一页面上有几个日期选择器，需要一个只显示月份和年份，而其他的应该显示完整的日历和日期。我知道要从一个单独的日期选择器中隐藏日期，我可以执行以下操作：

```
<style>
 .ui-datepicker-calendar {
   display: none;
 }
</style> 
```

但这隐藏了所有日历中的日期。如何确保其他日期选择器保留日历视图？

**编辑** 我确实尝试过嵌套 CSS，但仍然缺少一些东西。对于 HTML 部分，我大致有：

`<div id="monthOnly"><input type="text" class="monthly-picker" name="mdate"></div>`

和JS代码`$('.monthly-picker').datepicker();`

不过，做类似的事情

```
<style>
#monthOnly .ui-datepicker-calendar {
   display: none;
 }
</style> 
```

不会产生预期的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T14:47:25.483

在容器元素上给用户一个 id。

```
<style>
 #monthOnly .ui-datepicker-calendar {
   display: none;
 }
</style> 
```

编辑： http: [//jsfiddle.net/h8DWR/](http://jsfiddle.net/h8DWR/)是处理 datepicker 特性的解决方案。这个想法是使用样式元素在选择特定日期选择器时添加样式，然后在关闭时将其删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-24T19:45:27.807

我做了一点不同的...

**HTML**

```
<label for="startDate">Date :</label>
<input name="startDate" id="startDate" class="date-picker" /> 
```

**CSS**

```
.hide-calendar .ui-datepicker-calendar {
    display: none;
} 
```

**jQuery**

```
$(function() {
    $('.date-picker').datepicker( {
        changeMonth: true,
        changeYear: true,
        showButtonPanel: true,
        dateFormat: 'MM yy',
        yearRange: '1980:' + new Date().getFullYear(),
        beforeShow: function(el, dp) { 
            $('#ui-datepicker-div').addClass('hide-calendar');
        },
        onClose: function(dateText, inst) { 
            $('#ui-datepicker-div').removeClass('hide-calendar');
            var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
            var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
            $(this).datepicker('setDate', new Date(year, month, 1));
        }
    });
}); 
```

[小提琴](http://jsfiddle.net/Nymos/DBpJe/2436/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-09T21:36:55.463

方式略有不同

```
$('.year').datepicker({
  changeMonth: true,
  changeYear: true,
  showButtonPanel: true,
  dateFormat: 'MM yy',
  beforeShow: function(input) {
    $(this).datepicker('widget').addClass('hide-calendar');
  },
  onClose: function(input, inst) {
    $(this).datepicker('widget').removeClass('hide-calendar');
    $(this).datepicker('setDate', new Date(inst.selectedYear, inst.selectedMonth, 1));
  }
});

$('.datepicker').datepicker({
  changeMonth: true,
  changeYear: true,
  showButtonPanel: true,
  dateFormat: 'MM yy dd',
  onClose: function(input, inst) {
    $(this).datepicker('setDate', new Date(inst.selectedYear, inst.selectedMonth, inst.selectedDay));
  }
});
```

```
.hide-calendar .ui-datepicker-calendar{
  display: none;
}
```

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/base/jquery-ui.css" rel="stylesheet" />

<input class="year" type="text" id="" />
<input class="datepicker" type="text" id="" />
```

# php - 将 PHP 错误显示为字符串以供显示

> ID：10352770
> 
> 赞同：0
> 
> 时间：2012-04-27T14:43:57.537
> 
> 标签：php

我试图找出如何将 PHP 错误放入要显示的变量中。

类似于`mysql_error();`我希望能够显示 PHP 给出的错误？

我正在使用`json_encode`从请求的 PHP 页面向测试用户发送一个值，但如果发生错误，我可以得到`mysql_error();`罚款，但我将如何得到 php 错误？

我已经尝试过`$phpError = error_reporting();`，但我只是得到了`22527`类似[Error](https://stackoverflow.com/questions/4678082/what-is-22527-in-error-reporting-22527-of-phpinfo)的错误。我只想将 php 错误放入字符串中以发送回用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:47:49.493

您可以编写自己的错误处理程序：[http](http://www.php.net/manual/en/function.set-error-handler.php) ://www.php.net/manual/en/function.set-error-handler.php 并返回一个 json 编码的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:47:50.120

[您可以使用set_error_handler](http://php.net/manual/en/function.set-error-handler.php)创建自定义错误处理程序，从那时起您可以做任何您想做的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:49:02.077

查看[$php_errormsg](http://php.net/manual/en/reserved.variables.phperrormsg.php)。我希望它有所帮助。

# wpf - wpf 自定义控件设计时特性的推荐书籍

> ID：10352771
> 
> 赞同：1
> 
> 时间：2012-04-27T14:43:58.387
> 
> 标签：wpf, visual-studio-2010, custom-controls, design-time, cider

我有一些自定义控件，我想在 Cider（VS wpf 设计器）中使它们更加“用户友好”。我将 MSDN 中的所有文档和通过 google 找到的一些网站都添加了红色，但我没有找到一些简单问题的答案：

1.  如何为从集合编辑器创建的项目设置默认值（如数据网格中的列，而不是从工具箱拖放）
2.  如何生成 XAML（如单击生成列时的数据网格剂量）

如果您知道任何涉及上述详细信息的文档，请告诉我。

此外，如果您知道/拥有任何具有可见源代码且具有设计器支持的自定义控件（如 Xceed 或 DevExpress），请分享链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:44:25.130

推荐书籍：

1- [www.amazon.com/Pro-WPF-2012-Presentation-Professionals](https://rads.stackoverflow.com/amzn/click/com/1430243651)
2- 任何有关设计模式的书，例如[www.amazon.com/3-0-Design-Patterns-Judith-Bishop](https://rads.stackoverflow.com/amzn/click/com/059652773X)
3- [MVVM](https://rads.stackoverflow.com/amzn/click/com/0735650926) 添加一列数据网格不需要生成xaml，有一个列集合可以通过后面的代码添加一个

```
dataGrid1.Columns.Add(new DataGridTextColumn{ Header = "column1"}); 
```

读好第一本书，你会很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T06:43:37.243

这是一本深入了解自定义控件开发的优秀而罕见的书：

[释放 WPF 控件开发：构建高级用户体验](https://rads.stackoverflow.com/amzn/click/com/0672330334)

# c# - 如何使用c#对excel单元格的背景颜色不使用填充？

> ID：10352773
> 
> 赞同：9
> 
> 时间：2012-04-27T14:44:14.837
> 
> 标签：c#, excel, c#-4.0

有了这个：

```
using Excel = Microsoft.Office.Interop.Excel; 
```

我正在打开 excel，在将第一个单元格的颜色设置为透明后，如下所示：

```
xlRange = xlWorkSheet.get_Range("A1");
xlRange.Interior.Color = System.Drawing.Color.Transparent; 
```

问题是它把白色和“边界”消失了。我想设置“无填充”选项，但它不起作用。

我也试过这个：

```
xlRange.Interior.Color = System.Drawing.Color.Empty; 
```

但随后它将单元格颜色更改为黑色。

* * *

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-27T15:01:22.420

假设您想要获得与单元格的初始状态相同的状态（在新工作表中），请使用以下命令：

```
xlRange.Interior.ColorIndex = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T15:00:29.947

试试这个：

```
xlRange.Interior.Pattern = Excel.Constants.xlNone;
xlRange.Interior.TintAndShade = 0;
xlRange.Interior.PatternTintAndShade = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-19T11:19:18.860

也许这只是部分与这个问题有关；但我注意到使用

`xlRange.Interior.Pattern = Excel.XlPattern.xlPatternNone;;`

所有单元格填充颜色也会消失。使用时不是这种情况：

`xlRange.Interior.Pattern = Excel.XlPattern.xlPatternAutomatic;`

我正在寻找这个并遇到了这个问题，所以我添加了这个以获得更多信息。

# c# - 从我的 dll 访问文件

> ID：10352775
> 
> 赞同：-2
> 
> 时间：2012-04-27T14:44:20.110
> 
> 标签：c#, .net, dll

我的 dll 中有一个文本文件。每当我尝试从我的 .exe 程序访问它时，它都会失败，因为它试图从我的 .exe 程序中查找该文件。请问有没有我可以解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:52:42.577

您需要加载程序集并使用资源管理器可以检索文本文件，如下所示

```
// Gets a reference to the same assembly that 
// contains the type that is creating the ResourceManager.
System.Reflection.Assembly myAssembly = typeof(Program).Assembly;

// Gets a reference to a different assembly.
System.Reflection.Assembly myOtherAssembly;
myOtherAssembly = System.Reflection.Assembly.Load("ResourceAssembly");

// Creates the ResourceManager.
System.Resources.ResourceManager myManager = new 
   System.Resources.ResourceManager("ResourceNamespace.myResources", 
   myAssembly);

// Retrieves String and Image resources.
UnmanagedMemoryStream x = myManager.GetStream("StringResource"); 
```

欲了解更多信息，请访问

[http://msdn.microsoft.com/en-us/library/aa984408%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa984408%28VS.71%29.aspx)

# android - 应用程序关闭时接收意图广播

> ID：10352784
> 
> 赞同：0
> 
> 时间：2012-04-27T14:44:52.357
> 
> 标签：android, android-intent, android-c2dm, broadcast

我第一次使用 C2DM，我正在寻找如何实现以下目标的一般建议： 收到 C2DM 消息后，我决定： - 如果应用程序处于当前活动状态，将显示“警报弹出窗口”。- 如果应用程序未打开，我想向通知栏发送消息（类似于新电子邮件、短信、推特等）

我们有一个`GlobalBroadcastReceiver extends BroadcastReceiver`which implements `public void onReceive(Context context, Intent intent)`。这是在 中注册的*唯一*接收者`AndroidManifest.xml`。
所以基本上我们所有的广播都是通过这个接收器传输的，第一种情况是没有问题的。

但是，我想知道如何解决第二个问题。即使我的应用程序关闭，我如何确保收到 C2DM.RECEIVE 广播，然后：如何通知用户传入数据？

我非常有信心已经有很多解决方案，但由于我找不到它们，我想我只是错过了一些更大的图景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:52:33.253

> 即使我的应用程序关闭，如何确保我收到 C2DM.RECEIVE 广播

[根据 C2DM 文档](https://developers.google.com/android/c2dm/#manifest)，在清单中注册您的接收器。

> 那么：我如何通知用户传入的数据？

提高一个`Notification`。

由于您的接收者不一定知道前台是否有您的活动，因此最好的解决方案是发送您自己的广播`Intent`，但要发送一个已订购的广播。让活动为您自己的广播注册一个高优先级`BroadcastReceiver`，并让另一个清单注册的活动为您自己的广播`BroadcastReceiver`实现一个正常优先级`BroadcastReceiver`。如果活动收到广播，它会显示您的弹出窗口（ick）并中止广播。如果您的“支持”`BroadcastReceiver`获得广播，它会显示一个`Notification`. [这是一篇博客文章](http://commonsware.com/blog/2010/08/11/activity-notification-ordered-broadcast.html)，其中包含有关此模式的更多详细信息，[这里是一个示例项目](https://github.com/commonsguy/cw-advandroid/tree/master/Broadcast/Ordered)，演示了这种有序广播的使用。

# c++ - 使用 Boost.Python 从 DLL 动态加载 python 模块

> ID：10352786
> 
> 赞同：2
> 
> 时间：2012-04-27T14:45:04.940
> 
> 标签：c++, python, boost-python, python-module, python-c-api

我有一个用 C++ 编写的 DLL，它使用 Boost.Python 来运行 Python 代码。Python 代码应该能够与实际应用程序（在 DLL 中）进行交互。是否可以将两者都放在一个库中，还是需要将两者分开？

因此，DLL X 调用 Python 代码，Python 代码导入同样位于 DLL X 中的模块 Y。

这是否可以使用 Python C API 或（最好）Boost.Python？像`load_python_module("test", my_dll_handle)`...

我看到 DLL 导出 PyInit_test，但我不知道调用它是否是个好主意，我什至不知道它期望什么参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:06:39.987

Python C-API 文档强烈暗示这是可能的（尽管我自己从未尝试过），使用 Python C-API[`PyImport_AppendInittab`](http://docs.python.org/c-api/import.html#PyImport_AppendInittab)函数。您之前使用要导入的模块的名称和指向初始化函数的指针调用该函数`Py_Initialize`，它们将对嵌入式代码可用，就好像它们是内置模块一样（它们仍然必须被导入）。

因为`BOOST_PYTHON_MODULE(foo)`宏只是创建了一个`initfoo()`函数，你应该也可以在 Boost.Python 中使用这个方法。

# stata - 如何在stata中获取整个矩阵的日志？

> ID：10352790
> 
> 赞同：2
> 
> 时间：2012-04-27T14:45:22.523
> 
> 标签：stata

在 Stata 中，如何获取矩阵中所有元素的日志？在 matlab 中，您只需执行 log(Matrix)。显然，在 Stata 中事情并不那么简单。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:24:50.310

没错，在 Stata 的主要语言中似乎没有简单的方法可以做到这一点。[但在Stata 的矩阵编程语言 Mata](http://stata.com/why-use-stata/introduction-to-mata/index.html)中，事情*就是*这么简单，它于 2005 年在 Stata 的第 9 版中引入，其行为更像 Matlab：

```
. mata
--------------------------------- mata (type end to exit) -----------------------------
: A=(1, 2 \ 3, 4)

: A
       1   2
    +---------+
  1 |  1   2  |
  2 |  3   4  |
    +---------+

: log(A)
                 1             2
    +-----------------------------+
  1 |            0   .6931471806  |
  2 |  1.098612289   1.386294361  |
    +-----------------------------+ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T18:04:46.167

这比`matmap`SSC 所暗示的要容易。使用`ssc inst matmap`.

```
. matmap A A, map(ln(@)) 
```

这里`@`由安装的每个矩阵元素代替。在示例中，AA 指示替换现有矩阵，而 AB 将创建或替换另一个矩阵。

# sql - 累计动态地对每个月的字段求和

> ID：10352800
> 
> 赞同：5
> 
> 时间：2012-04-27T14:46:33.817
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一张表，其中包含大约 50,000 条信息记录，这些记录已设置为回顾当前财政年度的开始。

就目前而言，自上个月以来我没有更新此表，因此目前那里的数据假设我们仍在回顾 2011 年 4 月 1 日。

注意（当我刷新数据时，那里只会有 2012 年 4 月的数据，就像我们现在在 4 月一样，然后在 5 月它将有 2012 年 4 月和 2012 年 5 月等等......）

每条记录都有我关心的 4 列：

```
Department,
Incident date,
month,
year,
reduced 
```

月份和年份列都是从**事件日期**字段生成的，格式如下：

```
2011-06-29 00:00:00.000 
```

我需要为每个部门汇总减少的但以累积的方式。

例如，好像 2011 年 4 月将是我目前拥有的最早的月份/年份数据，我想知道 4 月份每个部门的总减少量。

然后五月我想要四月和五月结合，六月我需要四月，五月，六月等等......

有没有一种智能的方法可以做到这一点，这样一旦我将数据重新导入到这个表中，它就会意识到现在只有一个月，而且这一年已经更新，现在到下个月只显示四月的总和（减少）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:04:01.997

以下将返回按和分组`Department`的累计总数。如果您在刷新时清除了上一个纳税年度的数据，则可以省略该子句。`Year``Month``WHERE`

```
SELECT      T1.[Year],
            T1.[Month],
            T1.Department,
            SUM(T2.Reduced) ReducedTotals
FROM        [TABLENAME] T1
INNER JOIN  [TABLENAME] T2 ON ( T1.Department = T2.Department AND T1.IncidentDate >= T2.IncidentDate )
WHERE       T1.IncidentDate >= '2012-04-01'
GROUP BY    T1.[Year],
            T1.[Month],
            T1.Department
ORDER BY    T1.[Year],
            T1.[Month],
            T1.Department 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:40:28.327

```
select t1.id, t1.singlenum, SUM(t2.singlenum) as sum 

    from @t t1 inner join @t t2 on t1.id >= t2.id
    group by t1.id, t1.singlenum
    order by t1.id 
```

# email - FreeMarker+Tiles 生成电子邮件内容

> ID：10352803
> 
> 赞同：0
> 
> 时间：2012-04-27T14:46:50.093
> 
> 标签：email, freemarker, tiles

我有用于生成电子邮件内容的 freemarker 模板。我使用以下代码片段获取邮件正文的内容：

```
if( templateName!=null ) {
    Map<String, Object> templateVariables = new HashMap<String, Object>();
    templateVariables.put("BASE_URL", baseUrl);
    templateVariables.put("model", backingObj);
    Template template = freemarkerConfig.getTemplate(templateName);
    //logger.info("template["+template+"]");
    StringBuffer buffer = new StringBuffer();
    buffer.append(FreeMarkerTemplateUtils.
        processTemplateIntoString(template,templateVariables ));
    mailBodyText = buffer.toString();
} 
```

一切正常。

* * *

问题：我有多个模板并希望集成磁贴，以便我可以在所有模板之间共享相同的布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:42:55.210

使用宏创建[电子邮件模板](https://stackoverflow.com/questions/7791715/insert-inline-styles-in-the-middle-of-a-freemarker-message)，而不是 Tiles 集成：

```
<#macro content dispType="start">
<#--...-->
</#macro> 
```

# conventions - Ninject 3.0 中基于约定的绑定

> ID：10352805
> 
> 赞同：3
> 
> 时间：2012-04-27T14:47:05.747
> 
> 标签：conventions, ninject-3

我正在尝试在我的新项目上设置 Ninject，并且我想使用 convections 扫描程序集，以便

```
IFoo 
```

将自动解析为

```
IBar 
```

所有示例和文档都描述了使用这种方法

```
kernel.Scan(...) 
```

而 Ninject 3 Kernel 似乎使用 .Load 代替。如果我使用 Load 进行扫描，那么如何使用约定配置扫描？

**编辑**

我能够使用它来工作：[https ://github.com/ninject/ninject.extensions.conventions/wiki/What-is-configuration-by-convention](https://github.com/ninject/ninject.extensions.conventions/wiki/What-is-configuration-by-convention)

但是，现在我无法加载我的模块。我正在使用下面的代码并得到下面的错误。

```
 IKernel kernel = new StandardKernel();
    kernel.Bind(x => x
        .FromAssembliesMatching("Crt.*.dll")
        .SelectAllTypes()
        .BindAllInterfaces()
        );
    kernel.Load("*.dll");
    return kernel; 
```

错误：

```
Ninject.ActivationException was unhandled
  Message=Error activating ITrainingEngine
More than one matching bindings are available.
Activation path:
  1) Request for ITrainingEngine

Suggestions:
  1) Ensure that you have defined a binding for ITrainingEngine only once.

  Source=Ninject
  StackTrace:
       at Ninject.KernelBase.Resolve(IRequest request) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 380
       at Ninject.ResolutionExtensions.GetResolutionIterator(IResolutionRoot root, Type service, Func`2 constraint, IEnumerable`1 parameters, Boolean isOptional, Boolean isUnique) in c:\Projects\Ninject\ninject\src\Ninject\Syntax\ResolutionExtensions.cs:line 263
       at Ninject.ResolutionExtensions.Get[T](IResolutionRoot root, IParameter[] parameters) in c:\Projects\Ninject\ninject\src\Ninject\Syntax\ResolutionExtensions.cs:line 37
       at Crt.BlackBox.Train.Program.Run() in C:\code\Crimson\CRT\readmission\src\Crt.BlackBox\Crt.BlackBox.Train\Program.cs:line 54
       at Crt.BlackBox.Train.Program.Main(String[] args) in C:\code\Crimson\CRT\readmission\src\Crt.BlackBox\Crt.BlackBox.Train\Program.cs:line 24
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T00:58:50.937

使用 SelectAllClasses 而不是 SelectAllTypes

# java - Java Swing：根据鼠标指针下的文本在 JTable 中显示工具提示

> ID：10352810
> 
> 赞同：1
> 
> 时间：2012-04-27T14:47:21.723
> 
> 标签：java, swing, jtable, tooltip, tablecellrenderer

我有一个 JTable，我在其中显示一些使用 html 格式化的字符串数据。我需要根据鼠标指针下的文本显示工具提示

![在此处输入图像描述](../Images/deb8cbd1c71107dfbea1fb35b61c282c.png)

在鼠标悬停在“Line1”和“Line2”上时，我需要显示不同的工具提示。有什么方法可以实现这一点，还是我必须使用自定义渲染器用一个单元格渲染每一行并根据它显示工具提示？

这是创建表的示例代码

```
package com.sample.table;
import java.awt.*;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;

import javax.swing.*;

public class SampleTable {

private static void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("SampleTable");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    frame.getContentPane().add(createTablePanel(), BorderLayout.CENTER);

    //Display the window.
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
}

public static JPanel createTablePanel(){
    JPanel tablePanel = new JPanel();

    JTable table = createTable();
    table.setFillsViewportHeight(true);
    table.setRowHeight(45);
    addListener(table);

    JScrollPane scrollPane = new JScrollPane(table);
    scrollPane.setPreferredSize(new Dimension(300, 120));

    tablePanel.add(scrollPane);

    return tablePanel;
}

private static void addListener(JTable table) {
    table.addMouseMotionListener(new MouseMotionListener() {

        @Override
        public void mouseMoved(MouseEvent e) {
            if(e.getSource() instanceof JTable){
                JTable table = (JTable)e.getSource();

                table.setToolTipText("Some tooltip");
            }

        }

        @Override
        public void mouseDragged(MouseEvent e) {
            // do nothing

        }
    });

}

public static JTable createTable(){
    String[] columnNames = {"Column1", "Column2"};
    Object[][] data = {{"1", "<html>Line1<br/>Line2</html>"},
                        {"2", "<html>Line1<br/>Line2</html>"}};

    JTable table = new JTable(data, columnNames);

    return table;
}

public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:00:01.927

覆盖您返回`getToolTipText(MouseEvent)`的组件的方法。`TableCellRenderer`如果您正在扩展`DefaultTableCellRenderer`which extends`JLabel`并将其自身作为渲染器组件返回，您可以直接在子类中覆盖它。

您应该能够确定鼠标指针在哪条线上使用`MouseEvent#getPoint()`。请参阅`JTextComponent#viewToModel`or `JTextArea#getLineOfOffset`（如果您使用 a`JTextArea`进行渲染而不是 a `JLabel`）。

# sql-server - 更新时真正的getDate（）？

> ID：10352811
> 
> 赞同：1
> 
> 时间：2012-04-27T14:47:23.703
> 
> 标签：sql-server, sql-server-2008, tsql, getdate

假设我有很大的桌子（很多行）

我有这个 sql cmd：

```
update myTable set name='Royi' , dateUpadted=getDate() 
```

再次，很多行...... - 更新整个表的时间：3 分钟。（已编入索引）

我的目标是：

每个更新的行都应该有它的**真实**（*秒/毫秒差异）* `getdate`（）！！！

所以我想要的结果：

```
name | dateUpadated
___________________
royi |      12:00:00  -- getDate() here was 12:00:00
...  |         ...
...  |         ...
...  |         ...
royi |      12:01:13  -- getDate() here was 12:01:13
...  |         ...
...  |         ...
...  |         ...
royi |      12:03:01  -- getDate() here was 12:03:01 
```

我该怎么做 ？

*（我不要我们`cursor`）*

是否有任何开关可以`getDate()`运行：

*“使用您当前的价值，而不是您开始使用的价值”？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:49:52.883

您可以将它包装在一个标量 UDF 中，以便为每一行重新评估它。

```
CREATE FUNCTION dbo.GETDATE()
RETURNS DATETIME    
AS
BEGIN
    RETURN GETDATE();
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:49:40.147

不过，这*是*“真正的”价值。`UPDATE`发生在交易中；更改是一次性提交的，而不是每行提交。如果您希望单独更新行，游标正是您想要的。

# c++ - 快速像素访问 opencv

> ID：10352814
> 
> 赞同：3
> 
> 时间：2012-04-27T14:47:29.070
> 
> 标签：c++, opencv

我使用此代码将图像转换为矩阵，所以有人知道如何将此矩阵转换为一维 -> 向量我希望将图像数据作为一维数组，按行主要顺序，即所有像素值在第一行首先列出，然后是第二行中的像素值，依此类推。

```
IplImage *img = cvLoadImage( "lena.jpg", CV_LOAD_IMAGE_COLOR);
CvMat *mat = cvCreateMat(img->height,img->width,CV_32FC3 );

cvConvert( img, mat );

for(int i=0;i<10;i++)

{

for(int j=0;j<10;j++){

CvScalar scal = cvGet2D( mat,j,i);

printf( "(%.f,%.f,%.f) ",scal.val[0], scal.val[1], scal.val[2] );}

printf("\n");}

cvNamedWindow("une_window");
cvShowImage("une_window", img);

cvWaitKey();

cvDestroyWindow("une_window"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:00:09.003

使用 C++ API：

```
 cv::Mat img = cv::imread("a.jpg");

   std::vector<uchar> pixels;
   pixels.reserve(img.rows * img.cols * 3);

   if(img.isContinuous()) {
     pixels = std::vector<uchar>(img.ptr(0), img.ptr(0) + img.rows * img.cols * 3 );
   }
   else {
     for(int i = 0; i != img.rows; ++i) {
       uchar* p = img.ptr(i);
       for(int j = 0; j != img.cols * 3; ++j) {
         pixels.push_back(p[j]);
       }
     }   
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:34:37.450

我相信连续垫子的最快方法是使用 reshape 命令：

```
Mat colVec = img.reshape(1, img.rows*img.cols); // change to a Nx3 column vector 
```

reshape 命令只是更改标题，因此它不需要像素访问，因此在 O(1) 时间内运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T08:34:07.210

我认为您应该从视频解码器输出中观察以了解视频大小信息，从容器解析器中的元数据收集的其他信息可能不那么准确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T20:47:26.000

在 C++ 中，这实际上是一个单行：

```
cv::Mat_<float> img = cv::imread("a.jpg", 1);
std::vector<float> dest;
std::copy(img.begin(), img.end(), dest.begin()); 
```

# c++ - 将几个基本结构组合成一个自定义类型

> ID：10352815
> 
> 赞同：2
> 
> 时间：2012-04-27T14:47:30.273
> 
> 标签：c++, templates, struct

请假设一个资源管理类，比方说

```
template<typename AddressFields>
class AddressBook 
{ 
  std::list<AddressBookEntry<AddressFields> > book; 
}; 
```

其中包含 AddressBookEntry 对象的列表。AddressBookEntry 基本上应该由几个默认成员变量加上一个由模板化的 AddressFields 描述的可自定义字段变量组成：

```
template<typename AddressFields>
struct AddressBookEntry
{
  int id;
  AddressFields fields;
}; 
```

我想提供一些基本结构，例如

```
struct Name 
{
  std::string n_first;
  std::string n_last;
};

struct Address
{
  std::string street;
  int zip;
  std::string city;
};

struct Mobile
{
  std::string m_number
}; 
```

现在我的问题是：有没有办法在现有结构的基础上创建新结构？我想允许用户通过组合例如“名称”和“手机”来创建他/她自己的自定义地址字段类型

```
struct NameMobile
{
  std::string n_first;
  std::string n_last;
  std::string m_number;
}; 
```

所以它可以插入地址簿。但仅限于已经存在的结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:13:03.383

肯定有的。它被称为多重继承：

```
struct NameMobile : Name, Mobile {}; 
```

这*聚合* `Name`并`Mobile`成为一个新类型`NameMobile`（包括它们的所有成员，递归地）。由于您使用`struct`关键字声明它，因此`public`修饰符（之前`Name`和`Mobile`）是隐含的，因此可以省略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:55:05.083

是的。组合是我最常用的：

```
struct NameMobile
{
  ...
private:
  Name n_name;
  Mobile n_mobile;
}; 
```

# java - android布局上的折叠动画

> ID：10352818
> 
> 赞同：2
> 
> 时间：2012-04-27T14:47:44.890
> 
> 标签：java, android, eclipse, animation

我遇到了这个问题，我有一个类似手风琴的活动，带有根据其状态展开或折叠布局的按钮，然后问题出在动画中，展开动画非常完美，但是折叠布局时折叠它通过上面父按钮的，我想相对于布局折叠它。

对不起，我的英语不好，这是代码：

```
public class Animations extends Animation {

/**
 * Initializes expand collapse animation, has two types, collapse (1) and expand (0).
 * @param view The view to animate
 * @param duration
 * @param type The type of animation: 0 will expand from gone and 0 size to visible and layout size defined in xml. 
 * 1 will collapse view and set to gone
 */
public AnimationSet AnimationSet;

public Animations(String type) {
    if (type == "Expand")
        AnimationSet = ExpandAnimation();
    if (type == "Collapse")
        AnimationSet =  CollapseAnimation();    
}
public AnimationSet ExpandAnimation() {

    AnimationSet _set = new AnimationSet(true);

      Animation animation = new AlphaAnimation(0.0f, 1.0f);
      animation.setDuration(250);
      _set.addAnimation(animation);

      animation = new TranslateAnimation(
          Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f,
          Animation.RELATIVE_TO_SELF, -1.0f, Animation.RELATIVE_TO_SELF, 0.0f
      );
      animation.setDuration(150);
      _set.addAnimation(animation);

      return _set;

}
public AnimationSet CollapseAnimation() {

    AnimationSet set = new AnimationSet(true);

      Animation animation = new AlphaAnimation(1.0f, 1.0f);
      animation.setDuration(250);
      set.addAnimation(animation);

      animation = new TranslateAnimation(
          Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f,
          Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, -1.0f
      );
      animation.setDuration(250);
      set.addAnimation(animation);

      return set;

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:00:37.537

为什么不直接使用 ReverseInterpolator 来反转已经完美运行的扩展动画？

```
public class ReverseInterpolator implements Interpolator {
    public float getInterpolation(float paramFloat) {
        return Math.abs(paramFloat -1f);
    }
} 
```

在你的`_set`变量上：

```
_set.setInterpolator(new ReverseInterpolator()); 
```

或者

```
public AnimationSet CollapseAnimation() {
    AnimationSet set = someObj.ExpandAnimation();
    set.setInterpolator(new ReverseInterpolator());
    return set;
} 
```

让我也强调一些你做错的事情：

用于`.equals`比较字符串而不是`==`. 这是**错误**的-> `if (type == "Expand")`。另外，正确命名您的方法和变量，例如，

```
public AnimationSet AnimationSet; //poor
public AnimationSet expandAnim; //better
public AnimationSet ExpandAnimation() { //poor
public AnimationSet expand() { //better 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-17T11:07:37.173

只需在最顶层的布局中添加一个属性。它有一个默认动画，如“淡出”。

```
android:animateLayoutChanges="true" 
```

然后将可见性 GONE/VISIBLE 设置为可折叠布局。

# java - 生产者 - 消费；消费者如何停止？

> ID：10352819
> 
> 赞同：7
> 
> 时间：2012-04-27T14:47:46.497
> 
> 标签：java, producer-consumer

所以我模拟了我的生产者消费者问题，我有下面的代码。我的问题是这样的：如果消费者在不断的 while(true) 中，他如何停止。

在下面的代码中，我添加了

```
 if (queue.peek()==null)
                         Thread.currentThread().interrupt(); 
```

在这个例子中效果很好。但在我的现实世界设计中，这是行不通的（有时生产者需要更长的时间来“放置”数据，因此消费者抛出的异常是不正确的。一般来说，我知道我可以放置“毒药”数据比如 Object 是 XYZ ，我可以在消费者中检查它。但是这种毒药让代码看起来很糟糕。想知道是否有人有不同的方法。

```
public class ConsumerThread implements Runnable
{
 private BlockingQueue<Integer> queue;
 private String name;
 private boolean isFirstTimeConsuming = true;
 public ConsumerThread(String name, BlockingQueue<Integer> queue)
 {
    this.queue=queue;
    this.name=name;
 }

@Override
public void run()
{
    try
    {       
        while (true)
        {   
            if (isFirstTimeConsuming)
            {
                System.out.println(name+" is initilizing...");
                Thread.sleep(4000);
                isFirstTimeConsuming=false;
            }
            try{

                if (queue.peek()==null)
                    Thread.currentThread().interrupt();

                Integer data = queue.take();

                System.out.println(name+" consumed ------->"+data);
                Thread.sleep(70);    

            }catch(InterruptedException ie)
            {
                System.out.println("InterruptedException!!!!");
                break;
            }
        }

        System.out.println("Comsumer " + this.name + " finished its job; terminating.");

    }catch (InterruptedException e)
    {
        e.printStackTrace();
    } 
} 
```

}

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T15:21:12.383

**A:**根本无法保证仅仅因为`peek`退货`null`，生产者就停止了生产。如果生产者只是放慢了速度怎么办？现在，消费者退出，生产者继续生产。所以“窥视”->“打破”的想法基本上失败了。

**B：**从消费者设置“完成/运行”标志并在生产者中读取它也会失败，如果：

1.  消费者检查标志，发现它应该继续运行，然后“接受”
2.  与此同时，制片人将标志设置为“不运行”
3.  现在消费者永远阻塞等待幽灵数据包

也可能发生相反的情况，一个数据包被遗漏而未被消费。

然后为了解决这个问题，您将需要在“BlockingQueue”之上与互斥锁进行额外的同步。

**C：** 我发现“罗塞塔守则”是决定什么是好的做法的好来源，在这样的情况下：

[http://rosettacode.org/wiki/Synchronous_concurrency#Java](http://rosettacode.org/wiki/Synchronous_concurrency#Java)

生产者和消费者必须就表示输入结束的对象（或对象中的属性）达成一致。然后生产者在最后一个数据包中设置该属性，消费者停止消费它。即您在问题中所说的“毒药”。

在上面的 Rosetta 代码示例中，这个“对象”只是一个`String`名为“EOF”的空：

```
final String EOF = new String();

// Producer
while ((line = br.readLine()) != null)
  queue.put(line);
br.close();
// signal end of input
queue.put(EOF);

// Consumer
while (true)
  {
    try
      {
        String line = queue.take();
        // Reference equality
        if (line == EOF)
          break;
        System.out.println(line);
        linesWrote++;
      }
    catch (InterruptedException ie)
      {
      }
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T14:51:46.003

**不要**在线程上使用中断，而是在不再需要时中断循环：

```
if (queue.peek()==null)
         break; 
```

或者你也可以使用一个变量来标记关闭操作挂起，然后打破循环并在之后关闭循环：

```
if (queue.peek()==null)
         closing = true;

//Do further operations ...
if(closing)
  break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:04:15.513

在现实世界中，大多数消息传递都带有某种类型的标头，该标头定义了消息类型/子类型，或者可能是不同的对象。

您可以创建命令和控制对象或消息类型，告诉线程在收到消息时执行某些操作（如关闭、重新加载表、添加新侦听器等）。

这样，您可以说命令和控制线程只是将消息发送到正常的消息流中。您可以让 CNC 线程与大型系统中的操作终端等对话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T15:08:56.737

如果您的队列可以在您希望消费者终止之前为空，那么您将需要一个标志来告诉线程何时停止。添加一个 setter 方法，以便生产者可以告诉消费者关闭。然后修改您的代码，而不是：

```
if (queue.isEmpty())
   break; 
```

让你的代码检查

```
if (!run)
{
   break;
}
else if (queue.isEmpty())
{
   Thread.sleep(200);
   continue;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-03T05:35:11.297

您可以将此类型安全模式与毒丸一起使用：

```
public sealed interface BaseMessage {

    final class ValidMessage<T> implements BaseMessage {

        @Nonnull
        private final T value;

        public ValidMessage(@Nonnull T value) {
            this.value = value;
        }

        @Nonnull
        public T getValue() {
            return value;
        }

        @Override
        public boolean equals(Object o) {
            if (this == o) return true;
            if (o == null || getClass() != o.getClass()) return false;
            ValidMessage<?> that = (ValidMessage<?>) o;
            return value.equals(that.value);
        }

        @Override
        public int hashCode() {
            return Objects.hash(value);
        }

        @Override
        public String toString() {
            return "ValidMessage{value=%s}".formatted(value);
        }
    }

    final class PoisonedMessage implements BaseMessage {

        public static final PoisonedMessage INSTANCE = new PoisonedMessage();

        private PoisonedMessage() {
        }

        @Override
        public String toString() {
            return "PoisonedMessage{}";
        }
    }
}

public class Producer implements Callable<Void> {

    @Nonnull
    private final BlockingQueue<BaseMessage> messages;

    Producer(@Nonnull BlockingQueue<BaseMessage> messages) {
        this.messages = messages;
    }

    @Override
    public Void call() throws Exception {
        messages.put(new BaseMessage.ValidMessage<>(1));
        messages.put(new BaseMessage.ValidMessage<>(2));
        messages.put(new BaseMessage.ValidMessage<>(3));
        messages.put(BaseMessage.PoisonedMessage.INSTANCE);
        return null;
    }
}

public class Consumer implements Callable<Void> {

    @Nonnull
    private final BlockingQueue<BaseMessage> messages;

    private final int maxPoisons;

    public Consumer(@Nonnull BlockingQueue<BaseMessage> messages, int maxPoisons) {
        this.messages = messages;
        this.maxPoisons = maxPoisons;
    }

    @Override
    public Void call() throws Exception {
        int poisonsReceived = 0;
        while (poisonsReceived < maxPoisons && !Thread.currentThread().isInterrupted()) {
            BaseMessage message = messages.take();
            if (message instanceof BaseMessage.ValidMessage<?> vm) {
                Integer value = (Integer) vm.getValue();
                System.out.println(value);
            } else if (message instanceof BaseMessage.PoisonedMessage) {
                ++poisonsReceived;
            } else {
                throw new IllegalArgumentException("Invalid BaseMessage type: " + message);
            }
        }
        return null;
    }
} 
```

# c# - 一些使用 C# 发布到 ASP.NET Web API 的帮助

> ID：10352820
> 
> 赞同：2
> 
> 时间：2012-04-27T14:47:46.620
> 
> 标签：c#, httpwebrequest, asp.net-web-api

我一直在玩 ASP.NET Web API。我想看看我是否可以发布到我构建的方法，该方法只是返回我发布的对象：

在帐户控制器上：

```
// POST /api/accounts
public Account Post(Account account)
{
   return account;

} 
```

用于发布的代码：

```
 public void PostAccount()
    {
        // http://local_ip/api/accounts
        var uri = string.Format("{0}", webServiceRoot); 

        var acc = new Account();
        acc.AccountID = "8";
        acc.AccountName = "Mitchel Cars";
        acc.AccountNumber = "600123801";
        acc.SubscriptionKey = "2535-8254-8568-1192";
        acc.ValidUntil = DateTime.Now;

        var request = (HttpWebRequest)WebRequest.Create(uri);
        request.Method = "POST";
        request.ContentType = "application/xml";
        request.ContentLength = 800;

        XmlSerializer xmlSerializer = new XmlSerializer(typeof(Account));
        xmlSerializer.Serialize(request.GetRequestStream(), acc);

        var response = (HttpWebResponse)request.GetResponse();

        XmlSerializer serializer = new XmlSerializer(typeof(Account));

        var newAcc = (Account)serializer.Deserialize(response.GetResponseStream());

    } 
```

我删除了任何错误检查或任何样板代码，以使其更易于阅读。这严格来说是一个峰值，只是为了理解实际发布。我的理解是您应该写入 GetRequestStream()。所有的阅读等似乎都可以，但我从来没有从 request.GetResponse(); 回来。

如果我做一个简单的得到它工作正常。我确实看到你可以使用一个名为 HTTPClient 的类来做这些事情，但我不能使用它，因为我需要让它适用于基于 .Net 3.5 的 WinForms、Silverlight 和 Windows Phone

任何将 POCO 推送到服务器的帮助都会有很大帮助，干杯！

**附加信息：**

*   目前我没有收到任何错误，测试应用程序只是挂起。
*   如果我关闭 WebAPI 项目，我会收到未找到服务器的响应。
*   我没有更改任何路线或任何其他路线。
*   获得相同的控制器工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:58:06.697

您将需要关闭响应流。我看到的大多数示例也显示设置内容长度。您最好序列化为内存流，然后将该流的长度用作 Content-Length。不幸的是，在 .net 3.5 中没有 CopyStream，因此您可能必须自己编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:59:43.840

如果要使用 HttpClient，可以安装下载的 REST starter Kit。并将 DLL 用作外部 DLL

[http://forums.asp.net/t/1680252.aspx/1](http://forums.asp.net/t/1680252.aspx/1)

# jsf - 使用字符集 ISO-8859-1

> ID：10352825
> 
> 赞同：3
> 
> 时间：2012-04-27T14:47:57.873
> 
> 标签：jsf, encoding

我来自巴西，在这里我们有很多`à` `é` `ô` `ó` `ç`，等等，这是我的 JSF 项目的一个问题。

我`master.xhtml`的所有页面都有一个模板，它是：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1">
        <meta http-equiv="pragma" content="no-cache"/>
        <link rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/assets/css/bootstrap.css" type="text/css" media="all" />
        <title>#{masterController.projectName}</title>
        <style type="text/css">
            body {
                padding-top: 60px;
                padding-bottom: 40px;
            }
            .sidebar-nav {
                padding: 9px 0;
            }
        </style>
    </h:head>
    <h:body>
        <ui:fragment rendered="#{loginController.isLoggedIn}">
            <ui:include src="../includes/top.xhtml"/>
        </ui:fragment>
        <ui:insert name="body" />
        <hr />
        <ui:fragment rendered="#{loginController.isLoggedIn}">
            <ui:include src="../includes/footer.xhtml" />
        </ui:fragment>
    </h:body>
    <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/assets/js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/assets/js/bootstrap.min.js"></script>
</html> 
```

如您所见，我的 xml encondig 作为我的`Content-Type`元标记是正确的。

我正在使用 Eclipse，在我的项目 Properties->Resources 中，我已将其更改`Text file encoding`为*ISO-8859-1*。

我的`login.xhtml`页面上有一个`master.xhtml`名为 Usuário (User) 的标签，如果我使用字符`á`，并且没有它这个词是错误的，我会收到此错误：

```
exception

javax.servlet.ServletException: null source
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:321)

root cause

java.lang.IllegalArgumentException: null source
    java.util.EventObject.<init>(Unknown Source)
    javax.faces.event.SystemEvent.<init>(SystemEvent.java:67)
    javax.faces.event.ComponentSystemEvent.<init>(ComponentSystemEvent.java:69)
    javax.faces.event.PostRestoreStateEvent.<init>(PostRestoreStateEvent.java:69)
    com.sun.faces.lifecycle.RestoreViewPhase.deliverPostRestoreStateEvent(RestoreViewPhase.java:256)
    com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:245)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:107)
    com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:308) 
```

带走它是可行的`á`，但正如我所说，在葡萄牙语中这是必要的，我将使用许多其他带有口音的字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:29:02.063

您不应使用旧的 ISO-8859-1 字符集，而应使用新的 UTF-8 字符集。JSF已经**默认**使用UTF-8，它为世界统治做好了更好的准备。

将所有内容更改为 UTF-8 并更改您的 IDE 设置以在任何地方使用 UTF-8。在 Eclipse 中，最重要的设置是*Window > Preferences > General > Workspace > Text File Encoding*。

![在此处输入图像描述](../Images/ef3a70dbcf617ba1c786aec8b122b698.png)

然后，在左上角输入字段的*类型过滤器文本*中输入“编码”，并将对所有其他设置的更改重新应用到 UTF-8。

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

# jquery - 为什么冷融合变量/参数对我动态添加到 DOM 的内容无效？

> ID：10352828
> 
> 赞同：0
> 
> 时间：2012-04-27T14:48:20.413
> 
> 标签：jquery, ajax, jquery-mobile, coldfusion, coldfusion-8

我正在为一个必须重新设计的 Coldfusion 网站而苦苦挣扎：

在我的 Jquery Mobile / Coldfusion8 站点上，用户应该能够从几个不同的页面登录（每个页面都有自己的登录表单 - 无法更改！）

当用户第一次进入 index.cfm 页面时，我正在运行：

```
 <!--- SESSION handler --->
 <cfif Session.loggedIn EQ "No">    
      <CFPARAM NAME="Attributes.Datasource">
      <CFPARAM NAME="Attributes.AdditionalText" DEFAULT="">
      ...
      <CFSET aform = "#CGI.SCRIPT_NAME#">
 </cfif> 
```

这是登录例程的一部分，并设置所有参数和变量。我没有收到任何错误，所以一切都必须正常。该页面包含一个列表，其中一项是：

```
 <li>#Attributes.AdditonalText"</li> 
```

和登录表单：

```
 <CFFORM ACTION="#aform#" NAME="LoginForm"> 
```

此外，当没有定义会话时，我将重定向到 index.cfm，因此所有用户都将最终访问此页面并获取他们的会话。

**问题**
当用户从 index.cfm 转到下一页时，Jquery Mobile 将此页面添加到 DOM(!)。但是在 index.cfm 上有效的相同参数/变量现在会产生错误（两者都未定义）。

我不明白这一点。Coldfusion 参数/变量不能在 DOM 规模上访问，所以我通过 Ajax 动态添加的任何东西，包括对这些参数/变量的引用也可以工作？

我有点迷失在这里做什么。Coldfusion新手，也是。

如果我的 index.cfm 中有此文本

这是#attributes.additionalText#

它有效，但如果我在第二个文件中有相同的片段，它被附加到 DOM，完全相同的片段返回 #attributes.additioanlText# 未定义...

**问题：**
为什么我的变量和属性在我动态添加到 DOM 的内容上无法访问或未定义？如何使它们在全局范围内可用？

感谢您提供一些线索！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T14:54:15.767

1.  ColdFusion 对 DOM 一无所知，因此更多地将其视为简单地返回内容，然后由浏览器加载或由 javascript 使用。

2.  属性不是共享范围。据我所知，它甚至不是 CF 中的实际范围，而是一种约定（编辑：实际上是 customtags 中的范围），因此如果您在页面之间移动，则第 1 页上设置的任何属性值都不会在第 2 页上可用。您可以为此使用会话范围，但实际上看起来您只需要确保每个请求都命中此 IF 语句。执行此操作的两种主要方法是使用[OnRequestStart](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=AppEvents_10.html)，另一种是让所有请求通过 index.cfm 并在 url 上使用 action 属性指定要包含的代码、要命中的函数等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:18:55.580

您需要添加到 DOM 的任何内容都可以通过使用 ColdFusion 写出 jQuery 来填充您在呈现页面时想要的任何 DOM 对象。或者，您可以创建一个对 ColdFusion CFC 的 Ajax 服务调用，该 CFC 设置为直接接受传入的 http 调用并在 JSON 中返回您想要的任何值。

这里简单介绍一下如何采用第二种方法： [Easy AJAX using ColdFusion, jQuery and CFCs](http://blog.pengoworks.com/index.cfm/2011/3/3/Easy-AJAX-using-ColdFusion-jQuery-and-CFCs)

# xamarin.android - MvvmCross 示例项目运行

> ID：10352831
> 
> 赞同：0
> 
> 时间：2012-04-27T14:48:38.753
> 
> 标签：xamarin.android, mvvmcross

我正在尝试将自己介绍给 MVVMCross 项目，但我无法在模拟器中运行示例 MonoDroid 项目。WinPhone7 项目运行完美。在将应用程序复制到设备过程中出现以下错误
[http://snag.gy/PCY39.jpg](http://snag.gy/PCY39.jpg)
我尝试了 MonoCross 示例项目，它运行正常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:55:25.783

I think that means that one of the Android SDK add-on libraries you are trying to use is not available on the device/emulator. An example would be if the Google maps .jar isn't on the device and you are trying to use it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:06:54.683

我刚刚向 GitHub 推送了一些更改，这些更改将 Maps 依赖项分离到一个单独的程序集中。

您仍然需要为 Conference 示例安装 Maps（按照[http://3zwireless.com/Android1.html](http://3zwireless.com/Android1.html)之类的说明进行操作），但 Tutorial、BestSellers、TwitterSearch、SimpleDroid 和 CustomerManagement 应该在非映射模拟器上安装和运行。

# ruby-on-rails - 向 Rails 模型添加新字段

> ID：10352832
> 
> 赞同：30
> 
> 时间：2012-04-27T14:48:41.017
> 
> 标签：ruby-on-rails

我已经使用创建了一个脚手架

```
rails generate scaffold myOdb2 columna:integer, columnB:string 
```

现在我想添加`columnc:string`. 我该怎么办？

顺便说一句：问题很笼统，但可以通过 Rubymine 更快地完成吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-04-27T14:54:14.153

您必须生成迁移：

```
rails g migration add_columnc_to_myodb2s columnc:string 
```

它应该包含一行向您的表中添加一列。

```
add_column :myodb2s, :columnc, :string 
```

这会将列添加到 yourdb 表中，当然也添加到您的模型中，但不会在任何视图中。您需要手动添加它。据我所知。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-04-27T16:12:46.813

*   如果您刚刚生成它并意识到您的错误，您可以使用：

    `rails destroy scaffold myOdb2`

    然后重新生成脚手架：

    `rails generate scaffold myOdb2 columna:integer, columnB:string, columnc:string`

*   如果您对要保留的脚手架创建的模型进行了一些更改，但不介意破坏控制器和视图：

    `rails destroy scaffold_controller myOdb2`

    然后创建迁移以添加列：

    `rails generate migration add_columnc_to_myodb2s columnc:string`

    然后重新生成控制器和视图：

    `rails generate scaffold_controller myOdb2 columna:integer, columnB:string, columnc:string`

*   如果您对控制器或视图进行了更改，则只需运行迁移以更新数据库和模型，然后手动将新列添加到每个视图中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-21T17:53:43.810

没有人提到更新强参数：

因此，假设我有一个名为的现有脚手架`myapp`，我想向该脚手架添加更多字段。三件事要做。

要添加的字段是：

=>

1)`rails g migration add_term_count_and_current_record_count_and_previous_record_count_to_myapp term_count:integer , current_record_count:integer , previous_record_count:integer`

=>

```
2) Update views, example updating _form.html.rb 
```

我需要添加：

```
<div class="field">
    <%= f.label :current_record_count %><br>
    <%= f.number_field :current_record_count%>
  </div>

 <div class="field">
    <%= f.label :current_record_count %><br>
    <%= f.number_field :previouse_record_count%>
  </div>

  <div class="field">
    <%= f.label :term_count  %><br>
    <%= f.number_field :terminations_count %>
  </div> 
```

=>

```
3) Update Controller : 
```

新版本的 rails 具有所谓的强参数，以防止黑客传递任意列字段值。长话短说，使用新字段名称更新方法，否则您将看不到新字段..它们不会被传递到任何地方...不受信任的值;o)

```
 # Never trust parameters from the scary internet, only allow the white list through.

def vendor_file_params
    params.require(:vendor_file).permit(:name, :run_date,  :term_count ,
    :current_record_count , :previous_record_count ,:comments)   
end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-29T12:44:33.463

**脚手架**，快速简便，一次生成数据模型和Web界面。但是，Rails`generate scaffold`只是开始使用模型的一种方式，它只是在一开始就有帮助。

通常，您首先必须扩展数据模型。使用`rails generate migration`和可以简化此任务`rake db:migration`。请注意，您可能更喜欢使用 rake with`bundle exec`以确保在 Gemfile 中使用 rake 版本。

此后，您可能希望根据 Web 应用程序的要求直接更新（也可能创建新的）控制器和视图。

又名**MVC**

例如，在全新的*脚手架*模型中，您可能想要更新索引并显示视图（参见`app/views`文件夹）和 myOdb2 控制器（参见`app/controllers`文件夹）

不要忘记阅读有关迁移的信息[http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

# html - 循环遍历 Json 对象

> ID：10352840
> 
> 赞同：2
> 
> 时间：2012-04-27T14:49:29.983
> 
> 标签：html, css, json

我有以下 JSON 对象

```
var s = {
    "TenantGroupName": "Fun Holidays",
    "queue_details": [{
        "queue_key": "1",
        "channelId": "1",
        "queue_name": "North India Travel",
        "contacts": [{
            "from": "meenar@interactcrm.com",
            "subject": "Redemption Coupon",
            "queue_time": "2:34",
            "service_level_breached": "false",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }, {
            "from": "sagarm@interactcrm.com",
            "subject": "Redemption Coupon",
            "queue_time": "2:34",
            "service_level_breached": "false",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }, {
            "from": "kaushalk@interactcrm.com",
            "subject": "Redemption Coupon",
            "queue_time": "2:34",
            "service_level_breached": "false",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }, {
            "from": "kaushalk@interactcrm.com",
            "subject": "Redemption Coupon",
            "queue_time": "8:05",
            "service_level_breached": "true",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }, {
            "from": "kaushalk@interactcrm.com",
            "subject": "Redemption Coupon",
            "queue_time": "8:34",
            "service_level_breached": "true",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }]
    }, {
        "queue_key": "1",
        "channelId": "1",
        "queue_name": "South India Travel",
        "contacts": []
    }, {
        "queue_key": "1",
        "channelId": "1",
        "queue_name": "Summer 2012",
        "contacts": [{
            "from": "meenar@interactcrm.com",
            "subject": "Redemption Coupon",
            "queue_time": "2:34",
            "service_level_breached": "false",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }, {
            "from": "raheels@interactcrm.com",
            "subject": "Redemption Coupon",
            "queue_time": "2:34",
            "service_level_breached": "false",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }, {
            "from": "sagarm@interactcrm.com",
            "subject": "Redemption Coupon",
            "queue_time": "2:34",
            "service_level_breached": "false",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }, {
            "from": "kaushalk@interactcrm.com",
            "subject": "Redemption Coupon",
            "queue_time": "9:34",
            "service_level_breached": "true",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }]
    }, {
        "queue_key": "1",
        "channelId": "3",
        "queue_name": "Honeymoon",
        "contacts": [{
            "from": "Henry Williams",
            "subject": "New Zealand",
            "queue_time": "1:45",
            "service_level_breached": "false",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }, {
            "from": "Linda Simpson",
            "subject": "Redemption Coupon",
            "queue_time": "2:34",
            "service_level_breached": "false",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }]
    }, {
        "queue_key": "1",
        "channelId": "7",
        "queue_name": "Feedback_SMS",
        "contacts": [{
            "from": "@sanjeev",
            "subject": "Maldives",
            "queue_time": "1:45",
            "service_level_breached": "false",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }]
    }, {
        "queue_key": "1",
        "channelId": "5",
        "queue_name": "Feedback_Twitter",
        "contacts": [{
            "from": "9833202859",
            "subject": "Wish to travel ...",
            "queue_time": "1:45",
            "service_level_breached": "false",
            "cduId": "4f8b9f2322c60106c0a800bd65cc0000",
            "contactPkey": "8903"
        }]
    }]
} 
```

我想遍历上面的 JSON 数组。我用 Javascript 编写了以下内容

我将上面的 JSON 对象传递给 Javascript，如下所示

```
function CreateQueue(jString) {
    var jSonString = { "MyQueue": jString };
    alert(jSonString.MyQueue.length);
} 
```

上述功能提醒：`undefined`。如何遍历上面的 JSON 字符串？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T14:57:56.087

这整个构造是一个对象，而不是一个数组，所以你不能调用`.length`它。另外我不明白你为什么将它包装到一个额外的对象中，这绝对没有用。

要遍历对象的所有属性，请执行以下操作：

```
for (var key in jString) {
   if (jString.hasOwnProperty(key) ){
       console.log( "key:"+key+", val:"+jString[key] );
   }
} 
```

要遍历数组，请执行以下操作：

```
for (var i = 0; i < s.queue_details.length; i++){
  console.log( i+":"+s.queue_details[i] );
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T15:18:21.680

我发现在客户端使用 json 和 XML 解析/迭代的最简单方法是在脚本中包含 jQuery。

我为您创建了一个小示例，演示循环遍历第一个队列的联系人条目并为每个条目生成格式化的链接输出。

[jsFiddle JSON / jQuery 示例。](http://jsfiddle.net/FqxUR/30/)

本质上，难词被照顾到
`$.each(json, function (index, item) { /*...*/ });`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:54:16.433

The above object is...well..an object, not an array. The only array is `s.queue_details`. You can do this to loop through it:

```
for (var i = 0; i < s["queue_details"].length; i++)
{
  var item = s["queue_details"][i];
  //do stuff with item
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:54:21.417

You can't get the length of an object using the `length` property, only of an array. You can loop through the object yourself with a `for (x in y)`.

# javascript - 如何用 jquery 和 ajax 读取 json 本地文件？

> ID：10352846
> 
> 赞同：0
> 
> 时间：2012-04-27T14:50:02.847
> 
> 标签：javascript, jquery, ajax, json, jsonp

我只有js项目。我从我的静态 index.html 文件中调用 json 文件内容。

我尝试（不起作用）：

```
 $.getJSON('/js/test.json&callback=?',
   function() {
    alert('1111111111111111');
 },'jsonp'); 
```

在 chrome 中编辑获取：XMLHttpRequest 无法加载文件：///somefolder/test/data.json。Access-Control-Allow-Origin 不允许 Origin null

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:54:12.137

You can retrieve json from a local source, it doesn't need to be jsonp, and even if it did what you are doing is not how you do it.

```
$.getJSON('http://yours.com/js/test.json',
   function() {
   alert('1111111111111111');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:18:35.453

您在回调中缺少数据变量！

```
$.getJSON('/js/test.json', function(data) {
    console.log('JSON data received:', data);
}); 
```

# javascript - jQuery取消绑定点击事件功能并根据情况重新附加

> ID：10352850
> 
> 赞同：2
> 
> 时间：2012-04-27T14:50:10.423
> 
> 标签：javascript, jquery, events, binding, click

下面的代码我用来创建一个滑动菜单。我需要知道如何取消绑定附加到点击事件的函数并在其他时间重新附加它。（使用 jQuery 1.7.2）

```
$(document).ready(function(){
    $('.section').hide();
    $('.header').click(function(){
      if($(this).next('.section').is(':visible'))
      {
        $('.section:visible').slideUp()              
        $('.arrows:visible').attr("src","right.gif")
      }
      else
      {
        $('.section').slideUp();
        $(this).next('.section').slideToggle();
        $(this).find('.arrows').attr("src","down.gif")
    });
}); 
```

下面的代码是我到目前为止所拥有的

```
$('#printVers').click(function(){
   if($('#formVersion').val() != "Print")
   {
     $('.header').unbind('click');
   }
   else
   {
     //else re-attach functionality?
   }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T14:55:05.323

只需创建一个命名函数。您可以在这里使用低技术并返回基础以取消绑定和重新附加特定事件。

```
function doStuff()
{
    if($(this).,next('.section').is(':visible'))
        ...
}

$('.header').on('click', doStuff);
$('.header').off('click', doStuff); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T14:54:36.877

`.header`我建议您添加一个简单的类并检查单击处理程序中的类，而不是取消绑定和重新绑定。见下文，

```
$('#printVers').click(function(){
   if($('#formVersion').val() != "Print")
   {
     $('.header').addClass('dontClick');
   } else  {
     $('.header').removeClass('dontClick');
   }
}); 
```

在您的`.header`点击处理程序中，

```
$('.header').click(function(){
     if ($(this).hasClass('dontClick')) {
        return false;
     }
     //rest of your code 
```

如果您坚持取消绑定和绑定，那么您可以将处理程序移动到一个函数并多次取消绑定/绑定该函数..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:56:48.513

你可以尝试这样的事情。

```
$('#printVers').click(function(){
   if($('#formVersion').val() != "Print")
   {
       $('.header').addClass('clickDisabled');
   }
   else
   {
       $('.header').removeClass('clickDisabled');
   }
}); 
```

然后在单击处理程序中检查此类。

```
$(document).ready(function(){
    $('.section').hide();
    $('.header').click(function(){
        if(!$(this).hasClass('clickDisabled')){
            ...
            ...
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:55:30.287

为什么不将顶部部分设为函数，然后在 else 语句中调用它呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T14:57:11.773

您可以尝试将变量设置为标志。`var canClick = ($('#formVersion').val() != 'Print');`然后在您的`.header`元素的点击处理程序中，在执行您的代码之前检查是否`canClick`为真。

如果您仍想删除处理程序，您可以将事件对象分配给变量。`var eventObj = #('.header').data('events');`这将为您提供一个对象，其中包含分配给该对象的所有处理程序。要重新分配点击事件，就像`$('.header').bind('click', eventObj.click[0]);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-15T12:26:32.717

在用 bind、unbind、on、off、click、attr、removeAttr、prop 努力尝试之后，我让它工作了。所以，我有以下情况：在我的 html 中，我没有附加任何内联 onclick 处理程序。

然后在我的 Javascript 中，我使用以下内容添加了一个内联 onclick 处理程序：

```
$(element).attr('onclick','myFunction()'); 
```

为了稍后从 Javascript 中删除它，我使用了以下内容：

```
$(element).prop('onclick',null); 
```

这就是我在 Javascript 中动态地绑定和取消绑定点击事件的方式。请记住不要在您的元素中插入任何内联 onclick 处理程序。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-04-27T14:55:46.687

您可以将所有代码放在`.click`一个单独的函数中

```
function headerClick(){
  if($(this).next('.section').is(':visible'))
  {
    $('.section:visible').slideUp()              
    $('.arrows:visible').attr("src","right.gif")
  }
  else
  {
    $('.section').slideUp();
    $(this).next('.section').slideToggle();
    $(this).find('.arrows').attr("src","down.gif")
  }
} 
```

然后像这样绑定它：

```
$(document).ready(function(){
    $('.section').hide();
    $('.header').click(headerClick);
});

$('#printVers').click(function(){
   if($('#formVersion').val() != "Print")
   {
       $('.header').unbind('click');
   }
   else
   {
       $('.header').click(headerClick);
   }
}); 
```

# java - Glassfish 嵌入了 ScatteredArchive 和 Web 内容

> ID：10352854
> 
> 赞同：1
> 
> 时间：2012-04-27T14:50:31.947
> 
> 标签：java, web, glassfish

我正在运行 Glassfish 3.1.2 Embedded 来对我的应用程序进行单元测试。我像这样设置了一个 ScatteredArchive：

```
archive.addClassPath(new File("target/classes"));
archive.addClassPath(new File("src/test/resources"));
archive.addMetadata(new File("src/main/webapp/WEB-INF/web.xml")); 
```

通过这种方式，glassfish 可以找到 web.xml 中指定的 servlet。单元测试这些作品完美。但是，glassfish 无法找到任何 Web 内容，例如 javascript、图像等。

我如何告诉 ScattedArchive Web 内容在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:00:25.763

您可以为 ScatteredArchive 使用不同的构造函数：

> ScatteredArchive(String name,ScatteredArchive.Type type,File topDir)

[Oracle GlassFish Server 3.1.2 Embedded Server Guide for release 3.1.2](http://docs.oracle.com/cd/E26576_01/doc.312/e24932/embedded-server-guide.htm#gjrcs)中对此进行了非常简要的描述。topDir 参数用于指向存档的“顶部”，这将是您的 war 文件的根目录。那是您的网络内容通常所在的位置。

# python - python minidom 混合元素属性

> ID：10352858
> 
> 赞同：1
> 
> 时间：2012-04-27T14:50:37.417
> 
> 标签：python, xml, minidom

创建元素：

```
 ele = doc.createElement("ele")   
        ele.attributes['var']= 'yes'
        ele.attributes['ret']= 'no'

        main.appendChild(ele) 
```

但结果具有混合属性（可能是字母）：

```
<function ret="no" var="yes"/> 
```

有什么方法可以保持最小属性的创建顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:52:56.840

不，属性存储在字典中，并且不保留顺序。无论如何，这无关紧要，因为 XML 中属性的顺序没有语义意义。

如果出于某种原因需要属性，则可以使用[pxdom代替。](http://www.doxdesk.com/software/py/pxdom.html)

**有关的**

*   [使用 minidom 修改时保留属性顺序](https://stackoverflow.com/questions/662624/preserve-order-of-attributes-when-modifying-with-minidom)

# ruby-on-rails-3 - 与宁静的用户一起设计

> ID：10352861
> 
> 赞同：0
> 
> 时间：2012-04-27T14:50:53.987
> 
> 标签：ruby-on-rails-3, rest, devise

我有设计和用户控制器

# 路线.rb

```
 devise_for :users

  resources :users do
    resources :blogs
  end 
```

# users_controller.rb

```
class UsersController < ApplicationController
  respond_to :html, :xml, :json

  def create
    @user = User.create(params[:user])
  end

  def show
    @user = User.find(params[:id])
    @asset = Asset.find(params[:id])
    respond_with [@user, @asset]
  end

  def update
    @user = User.find(params[:id])
    @user.update_attributes(params[:user])
    respond_with @user
  end
end 
```

当我访问`http://localhost:3000/users/sign_out`

我明白了

```
ActiveRecord::RecordNotFound in UsersController#show

Couldn't find User with id=sign_out 
```

更新：

```
 users GET    /users(.:format)                                   users#index
                         POST   /users(.:format)                                   users#create
                new_user GET    /users/new(.:format)                               users#new
               edit_user GET    /users/:id/edit(.:format)                          users#edit
                    user GET    /users/:id(.:format)                               users#show
                         PUT    /users/:id(.:format)                               users#update
                         DELETE /users/:id(.:format)                               users#destroy
        new_user_session GET    /users/sign_in(.:format)                           devise/sessions#new
            user_session POST   /users/sign_in(.:format)                           devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)                          devise/sessions#destroy
           user_password POST   /users/password(.:format)                          devise/passwords#create
       new_user_password GET    /users/password/new(.:format)                      devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)                     devise/passwords#edit
                         PUT    /users/password(.:format)                          devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)                            devise/registrations#cancel
       user_registration POST   /users(.:format)                                   devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)                           devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                              devise/registrations#edit
                         PUT    /users(.:format)                                   devise/registrations#update
                         DELETE /users(.:format)                                   devise/registrations#destroy 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T01:11:46.943

发生这种情况是因为您的会话被 DELETE 方法破坏了。

从你的`rake routes`：

```
destroy_user_session DELETE /users/sign_out(.:format)                        devise/sessions#destroy 
```

当你访问时`http://localhost:3000/users/sign_out`，你使用 GET

您可以更改中的方法`initializers/devise.rb`。刚刚设置`config.sign_out_via`为`:get`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:39:36.247

您的 routes.rb 文件和您生成的路线似乎不匹配。按顺序评估路线，并提供第一个匹配的路线。

在自定义用户路线之前，您需要设计路线。像这样的东西...

```
 new_user_session GET    /users/sign_in(.:format)                           devise/sessions#new
            user_session POST   /users/sign_in(.:format)                           devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)                          devise/sessions#destroy
           user_password POST   /users/password(.:format)                          devise/passwords#create
       new_user_password GET    /users/password/new(.:format)                      devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)                     devise/passwords#edit
                         PUT    /users/password(.:format)                          devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)                            devise/registrations#cancel
       user_registration POST   /users(.:format)                                   devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)                           devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                              devise/registrations#edit
                         PUT    /users(.:format)                                   devise/registrations#update
                         DELETE /users(.:format)                                   devise/registrations#destroy
                   users GET    /users(.:format)                                   users#index
                         POST   /users(.:format)                                   users#create
                new_user GET    /users/new(.:format)                               users#new
               edit_user GET    /users/:id/edit(.:format)                          users#edit
                    user GET    /users/:id(.:format)                               users#show
                         PUT    /users/:id(.:format)                               users#update
                         DELETE /users/:id(.:format)                               users#destroy 
```

我会确认您的路线文件看起来像您发布的内容，因为它似乎不一致。

# forms - 使用 Twitter Bootstrap 的中心表单

> ID：10352866
> 
> 赞同：17
> 
> 时间：2012-04-27T14:51:24.537
> 
> 标签：forms, html, css, twitter-bootstrap

我正在使用 Twitter 的 Bootstrap 构建一个表单（由 django 提供）。我想让表单以页面为中心，但我遇到了一些问题。

这是我的 HTML：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>My Form</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/bootstrap/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container">
        <div class="row">
            <div class="span12" style="text-align:center; margin: 0 auto;">
                <form class="form-horizontal" method="post" action="/form/">
                    <fieldset>
                        <legend>Please login</legend>
                        <div class="control-group">
                            <label class="control-label" for="id_username">Username</label>
                            <div class="controls">
                                <input name="username" maxlength="100" placeholder="Enter your username..." type="text" class="input-large" id="id_username" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="id_password">Password</label>
                            <div class="controls">
                                <input name="password" maxlength="100" placeholder="Enter your password..." type="password" class="input-large" id="id_password" />
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/bootstrap/js/jquery.js"></script>
    <script src="/bootstrap/js/bootstrap-transition.js"></script>
    <script src="/bootstrap/js/bootstrap-alert.js"></script>
    <script src="/bootstrap/js/bootstrap-modal.js"></script>
  </body>
</html> 
```

我已经排除了一些额外的 django 逻辑（{% csrf_token %}、一些 if 语句等），但这应该会重现问题。

实际的输入元素（用户名和密码文本框）像我预期的那样居中，但标签仍然位于页面的最左侧。我是否在某处缺少标记，或者我是否必须覆盖一些控制标签 CSS？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T15:03:00.127

您需要将表单包含在容器中，引导程序已经带有一个容器类，`width:940px`因此您可以将所有内容包装在里面，它会自动居中，如下所示：

```
<div class="container">
    <div class="row">
        <div class="span12">
            <form class="form-horizontal" method="post" action="/form/">
                <fieldset>
                    <legend>Please login</legend>
                    <div class="control-group">
                        <label class="control-label" for="id_username">Username</label>
                        <div class="controls">
                            <input name="username" maxlength="100" placeholder="Enter your username..." type="text" class="input-large" id="id_username" />
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="id_password">Password</label>
                        <div class="controls">
                            <input name="password" maxlength="100" placeholder="Enter your password..." type="password" class="input-large" id="id_password" />
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
</div> 
```

# .htaccess - 使 CakePHP 2.0 在子目录上工作

> ID：10352867
> 
> 赞同：1
> 
> 时间：2012-04-27T14:51:25.560
> 
> 标签：.htaccess, routing, cakephp-2.0

我在 /var/www/ 中有我的网站 www.mysite.com，我在 /var/www/developer 中添加了我的 cakephp 应用程序

当我访问 www.mysite.com/developer 时，登录页面正常，登录后应用程序将我带到主页正常。但是每当我点击其他链接时，我都会得到 *“找不到页面”*

我有 3 个 htaccess

```
/var/www/developer
/var/www/developer/app
/var/www/developer/app/webroot 
```

我应该在上面放什么才能使我的网址正常工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:53:30.277

您的 .htaccess 文件应该如下所示：

/var/www/developer

```
<IfModule mod_rewrite.c>
   RewriteEngine on
RewriteBase /
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

/var/www/developer/app

```
<IfModule mod_rewrite.c>
   RewriteEngine on
RewriteBase /
   RewriteRule    ^$ webroot/    [L]
   RewriteRule    (.*) webroot/$1 [L]
</IfModule> 
```

/var/www/developer/app/webroot

```
<IfModule mod_rewrite.c>
    RewriteEngine On
RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?/$1 [QSA,L]
</IfModule> 
```

您还应该在 /var/www/developer/app/webroot/index.php 中定义正确的路径

代替

```
 if (!defined('ROOT')) {
        define('ROOT', dirname(dirname(dirname(__FILE__))));
    } 
```

尝试指定正确的方法（例如 DS . 'www' . 'develop'）通常只重新定义 CAKE_CORE_INCLUDE_PATH 就足够了，但有时您需要定义所有三个 ROOT WEBROOT_DIR 和 CAKE_CORE_INCLUDE_PATH

# qt4 - 在表的 DataModel 中重新实现 insertRows

> ID：10352869
> 
> 赞同：0
> 
> 时间：2012-04-27T14:51:30.813
> 
> 标签：qt4, pyqt4, qtableview

我正在尝试实现一个`insertRow`功能（非常类似于 overridable `insertRows`）。这就是我所做的：

```
def insertRow(self, row_data, parent=QtCore.QModelIndex()):
    self.beginInsertRows(parent, self.rowCount(), self.rowCount())
    self.arraydata.append(row_data)
    self.endInsertRows() 
```

这本身不会显示任何内容`QTableView`（即使它扩展了左滚动条）。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T01:47:22.813

问题是表一开始是空的，因此，`columnCount`也为零。我也需要`beginInsertColumns`打电话`endInsertColumns`。

# c++ - 如何在不使用 GL_LINE_SMOOTH 的情况下使用 OpenGL 在 2D 场景中绘制平滑线？

> ID：10352870
> 
> 赞同：11
> 
> 时间：2012-04-27T14:51:34.310
> 
> 标签：c++, opengl, glsl

由于 GL_LINE_SMOOTH 不是硬件加速的，也不支持所有 GFX 卡，你如何在 2D 模式下绘制平滑线，这看起来和 GL_LINE_SMOOTH 一样好？

**Edit2：**我目前的解决方案是从 2 个四边形中画一条线，从边缘褪色到零透明度，这两个四边形之间的颜色将是线条颜色。它对于基本的平滑线渲染足够好，并且不使用纹理，因此渲染速度非常快。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T00:10:57.000

所以，你想要流畅的线条，没有：

*   线平滑。
*   全屏抗锯齿。
*   着色器。

好的。

您最好的选择是使用 Valve 的[Alpha-Tested 放大技术](http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf)。根据您的需要，基本思想是创建一个表示与线的距离的纹理，纹理中心的距离为 1.0。这可能是一维纹理。

然后使用论文中描述的技术（其中许多适用于固定功能，包括抗锯齿版本），绘制一个代表您的线条的四边形。显然，您需要 alpha 混合（因此它不是与顺序无关的）。您可以使用线条宽度来控制它变成适当颜色的距离，从而允许您制作窄或宽的线条。

* * *

除了没有纹理之外，使用着色器执行此操作几乎与上述相同。不是访问距离纹理，而是从顶点着色器传递和插值距离。对于四边形的左边缘，顶点着色器传递 0。对于右边缘，它传递 1。将其乘以 2，减去 1，然后取绝对值。

那是您与线的距离（线是四边形的中心）。然后就像 Valve 的算法一样使用这个距离。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T16:25:17.800

打开全屏抗锯齿并使用四边形将是我的首选。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T10:09:04.760

目前我正在使用 2 或 3 个四边形来执行此操作，这是最简单的方法。

*   如果线条粗细 <= 1px，那么您只需要 2 个四边形。
*   如果线条粗细 > 1px，则需要在中间添加第三个四边形。
*   如果线条粗细 >= 1px，则渐变边缘四边形的粗细不得改变。

在下图中，您可以看到带有蓝色边框的四边形。白色表示完全不透明度，黑色表示零不透明度（=完全透明）。

![在此处输入图像描述](../Images/b386ffbe3a06d0b2da02a7bca6a133cc.png)

# asp.net - 未指定 SMTP 主机。无效操作异常

> ID：10352876
> 
> 赞同：1
> 
> 时间：2012-04-27T14:52:01.353
> 
> 标签：asp.net, smtp, email-validation, invalidoperationexception

我想为我的用户编写电子邮件验证。但我有一些问题。
我有这个：

```
public static void SendMail(User user)
    {
        string verifyNewUser = "http://localhost:9928/Account/Activate/" +
                                  user.Name + "/" + user.EmailKey;
        var sr = new StreamReader("ActivateNewUser.txt");
        MailMessage mailMessage = new System.Net.Mail.MailMessage();
        mailMessage.IsBodyHtml = true;
        mailMessage.To.Add(user.Email);
        mailMessage.Subject = "Registration on Harb";
        mailMessage.Body = sr.ReadToEnd();
        sr.Close();
        mailMessage.Body = mailMessage.Body
                           .Replace("@AccountName", user.Name);
        mailMessage.Body = mailMessage.Body
                           .Replace("@VerificationUrl", verifyNewUser);
        var smtpClient = new SmtpClient();
        smtpClient.Send(mailMessage);
    } 
```

在 Web.config 我写：

```
<system.net>
<mailSettings>
  <smtp deliveryMethod="Network" from="myEmail@gmail.com">
    <network host="smtp.gmail.com" port="587" userName="myEmail@gmail.com"
      password="myPassword" defaultCredentials="false" enableSsl="true"/>
  </smtp>
</mailSettings> 
```

但我有一个`InvalidOperationException`.
有人可以帮我解决这个问题吗？

# c# - 用于 ASP.NET MVC 的 Visual Studio 模板导出

> ID：10352877
> 
> 赞同：2
> 
> 时间：2012-04-27T14:52:04.950
> 
> 标签：c#, asp.net-mvc, visual-studio, project-template

导出模板时，视图中的命名空间存在问题。cs 文件有一个变量来替换命名空间。但是 cshtml（强类型视图）包含模型的父项目命名空间。

如何使用变量制作 Visual Studio 导出视图？

我试图以这种方式更改模板cshtml文件并替换模型的命名空间

```
@model $safeprojectname$.Models.ContactUsModel 
```

它没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:36:22.120

我找到了解决我的问题的方法。希望它会帮助某人。我已经用 $safeprojectname$ 替换了视图中的命名空间。然后我在线更改了vstemplate文件，与更改cshtml相关，将参数设置为true。

# objective-c - 尝试将地图注释视图上的详细信息披露指示器连接到 segue 方法

> ID：10352892
> 
> 赞同：1
> 
> 时间：2012-04-27T14:52:53.783
> 
> 标签：objective-c, ios, mapkit, segue

我正在尝试将地图注释视图上的详细信息披露指示器连接到 segue。由于某种原因，它正在崩溃。仅供参考 - 我已经通过`UIButton`（在情节提要中建立了控制拖动连接）进行了这项工作。

我使用以下代码得到的错误是“无法识别的选择器发送到实例”。

这是`MKAnnotationView`带有详细披露指标的代码：

```
 - (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation
    {
        MKPinAnnotationView *mapPin = nil;
        if(annotation != map.userLocation) 
        {
            static NSString *defaultPinID = @"defaultPin";
            mapPin = (MKPinAnnotationView *)[map dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
            if (mapPin == nil )
            {
                mapPin = [[MKPinAnnotationView alloc] initWithAnnotation:annotation 
                                                          reuseIdentifier:defaultPinID];
                mapPin.canShowCallout = YES;

                UIButton *disclosureButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
                [disclosureButton addTarget:self action:@selector(prepareForSegue:) forControlEvents:UIControlEventTouchUpInside];

                mapPin.rightCalloutAccessoryView = disclosureButton;

            }
            else
                mapPin.annotation = annotation;

        }
        return mapPin;
    } 
```

这是`prepareForSegue`方法：

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
        // Make sure we're referring to the correct segue
        if ([[segue identifier] isEqualToString:@"ShowMoreInfo"]) {

            // Get reference to the destination view controller
            MoreDetailViewController *mdvc = [segue destinationViewController];

            [mdvc setSelectedItemName:[NSString stringWithFormat:@"%@", placeName.text]];
            [mdvc setSelectedItemAddress:[NSString stringWithFormat:@"%@", placeFormattedAddress.text]];

            [mdvc setSelectedItemWeb:[NSString stringWithFormat:@"%@", placeWebsite.text]];
            [mdvc setSelectedItemRating:[NSString stringWithFormat:@"%@", placeRating.text]];
      //      [mdvc setSelectedItemDistance:[NSString stringWithFormat:@"%@", placeDistance.text]];

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:47:44.827

您没有明确调用 prepareForSegue 方法，您应该做的是创建另一个执行 segue 更改的方法。像这样的东西：

你必须改变你的 mapView:map viewForAnnotation:annotation 方法改变这一行

```
 [disclosureButton addTarget:self action:@selector(myMethod) forControlEvents:UIControlEventTouchUpInside]; 
```

然后在您的方法中执行视图的更改

```
 -(void)myMethod{ 
[self performSegueWithIdentifier:@"ShowMoreInfo" sender:self];
 } 
```

我认为这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:12:05.417

我怀疑你会通过使用[mapView:didSelectAnnotationView:](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView%3adidSelectAnnotationView%3a)然后[mapView:annotationView:calloutAccessoryControlTapped:](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView%3aannotationView%3acalloutAccessoryControlTapped%3a)在出现注释并选择标注后得到帮助。

# r - 使用ggplot2的条形图

> ID：10352894
> 
> 赞同：17
> 
> 时间：2012-04-27T14:52:56.860
> 
> 标签：r, ggplot2, bar-chart

我有一个这样的数据集：

```
cars    trucks  suvs
1          2    4
3          5    4
6          4    6
4          5    6
9          12   16 
```

我正在尝试为这些数据绘制条形图。目前，我可以这样做`barplot`：

```
barplot(as.matrix(autos_data), main="Autos", 
         ylab= "Total",beside=TRUE, col=rainbow(5)) 
```

生成此图：

![条形图](../Images/87d62efbfe38b8e8a7fc430825b2057b.png)

所以我的问题是：我可以使用 ggplot2 来绘制这样的图表吗？具体来说 - 我如何使用分面或其他选项按星期几拆分图表？如果是，我该如何做到这一点？此外，我如何使用 facet 来生成不同的布局？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-27T15:12:17.877

这个问题之前已经问过很多次了。答案是您必须使用`stat="identity"`in`geom_bar`告诉 ggplot 不要汇总您的数据。

```
dat <- read.table(text="
cars    trucks  suvs
1   2   4
3   5   4
6   4   6
4   5   6
9   12  16", header=TRUE, as.is=TRUE)
dat$day <- factor(c("Mo", "Tu", "We", "Th", "Fr"), 
             levels=c("Mo", "Tu", "We", "Th", "Fr"))

library(reshape2)
library(ggplot2)

mdat <- melt(dat, id.vars="day")
head(mdat)
ggplot(mdat, aes(variable, value, fill=day)) + 
  geom_bar(stat="identity", position="dodge") 
```

![在此处输入图像描述](../Images/2cf07efdd6817f4917c110348bd57956.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-10T14:50:34.017

这是`tidyr`：

这里最大的问题是您需要将数据转换为整洁的格式。我强烈建议您阅读 R for Data Science ( [http://r4ds.had.co.nz/](https://i.stack.imgur.com/ME5Bn.png) )，让您开始使用整洁的数据和 ggplot。

一般来说，一个好的经验法则是，如果您必须输入同一个 geom 的多个实例，可能有一个数据格式的解决方案，它可以让您将`aes()`函数中的所有内容放在顶层`ggplot()`。在这种情况下，您需要使用`gather()`来适当地安排您的数据。

```
library(tidyverse)

# I had some trouble recreating your data, so I just did it myself here
data <- tibble(type = letters[1:9], 
               repeat_1 = abs(rnorm(9)), repeat_2  
               =abs(rnorm(9)), 
               repeat_3 = abs(rnorm(9)))

data_gathered <- data %>%
  gather(repeat_number, value, 2:4)

ggplot(data_gathered, aes(x = type, y = value, fill = repeat_number)) +
geom_col(position = "dodge") 
```

[![在此处输入图像描述](../Images/b75d247c1cc62a4869cbb2e810df654b.png)](https://i.stack.imgur.com/ME5Bn.png)

# php - 哪个 PHP 框架用于 jquery +HTML5 移动网站？

> ID：10352895
> 
> 赞同：0
> 
> 时间：2012-04-27T14:52:58.783
> 
> 标签：php, performance, jquery-mobile, frameworks, mobile-website

我在 Zend Framework 中有一个制作的网站。现在，我正在为 jquery + HTML5 中的手机制作功能较少的同一个网站。但是我需要使用哪个框架？

因为 ZF 大大降低了我的网站速度，Y-Slow 的性能大约为 92%。恐怕如果我再次使用 ZF，它会再次在手机上变慢。

所以我需要知道我应该使用哪个 php 框架？或核心php等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:54:19.790

我推荐 Codeigniter.com，它非常快速和简单。我现在将它用于基于移动位置的应用程序，它运行良好。文档和大型社区使学习和适应您的应用程序变得非常容易。

其他快速的 PHP 框架是 Yii 和 FuelPHP。

您还可以优化您的 Zend 框架，以省去设置新网站的麻烦。取决于您计划拥有多少用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:59:12.460

我会再次推荐 ZF。你正在制作同一个网站，所以你几乎做了所有需要修饰你的 js 和 html 的事情。尝试尽可能优化你的 PHP 代码并再次通过 ZF。

请研究一下，它将对你有很大[帮助](http://www.web-punk.com/2010/03/zend-framework-applications-for-iphone-blackberry-co/comment-page-1/#comment-19503)

# php - 无法使用 if 语句发送邮件（）

> ID：10352899
> 
> 赞同：-1
> 
> 时间：2012-04-27T14:53:12.680
> 
> 标签：php, sendmail

希望有人能帮我解决这个问题？？？

```
if (isset($_POST['frame_in']) == "yes") && (isset($_POST['collected1']) == "no") {
mail($mailTo,$subject,$message,$headers); 
} 
```

更多信息

当以下情况为真'frames_in' = yes 并且'collected1' = no 时，我试图触发一封自动电子邮件

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T14:55:13.343

Your logic is wrong. You want to test if the `$_POST` values are set and equal to `"yes"` or `"no"`. For example:

```
(isset($_POST['frame_in']) && $_POST['frame_in'] ==  "yes") 
```

In context of your code with 2 conditions:

```
if ((isset($_POST['frame_in']) && $_POST['frame_in'] == "yes") 
     && (isset($_POST['collected1']) && $_POST['collected1'] == "no")) {
   mail($mailTo,$subject,$message,$headers); 
} 
```

Your original code was comparing the return value of `isset()` (boolean `TRUE/FALSE`) to `yes` or `no`, which it would never be.

You also had some incorrect `()` enclosures and a typo.

When developing, always use `error_reporting(E_ALL);` and `ini_set('display_errors', 1);` so that your syntax errors are visible on screen.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T14:55:50.913

change S_POST to $_POST for a start :)

# mongodb - Mongoose：如何将模式字段设置为 ID？

> ID：10352900
> 
> 赞同：27
> 
> 时间：2012-04-27T14:53:15.220
> 
> 标签：mongodb, mongoose

给定以下架构：

```
var UserSchema = new Schema({
   , email   :  { type: String }
   , passwordHash   :  { type: String }
   , roles  :  { type: [String] }
}); 
```

我想`email`成为关键。我该如何定义这个？

我可以做：

```
var UserSchema = new Schema({
       , _id:  { type: String }
       , passwordHash   :  { type: String }
       , roles  :  { type: [String] }
    }); 
```

所以 MongoDB 会将其识别为 id 字段，并调整我的代码以引用`_id`而不是，`email`但这对我来说并不干净。

任何人？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-27T20:36:38.803

由于您使用的是 Mongoose，因此一种选择是使用电子邮件字符串作为`_id`字段，然后添加一个名为的[虚拟字段](http://mongoosejs.com/docs/guide.html#virtuals)`email`，该字段返回`_id`以清理使用电子邮件的代码。

```
var userSchema = new Schema({
    _id: {type: String},
    passwordHash: {type: String},
    roles: {type: [String]}
});

userSchema.virtual('email').get(function() {
    return this._id;
});

var User = mongoose.model('User', userSchema);

User.findOne(function(err, doc) {
    console.log(doc.email);
}); 
```

请注意，将 Mongoose 文档转换为纯 JS 对象或 JSON 字符串时，默认情况下不包含虚拟字段。要包含它，您必须在or调用中设置`virtuals: true`选项：[`toObject()`](http://mongoosejs.com/docs/api.html#document_Document-toObject)[`toJSON()`](http://mongoosejs.com/docs/api.html#document_Document-toJSON)

```
var obj = doc.toObject({ virtuals: true });
var json = doc.toJSON({ virtuals: true }); 
```

# linq - 使用 Where Or 语法的 LINQ 左连接

> ID：10352902
> 
> 赞同：0
> 
> 时间：2012-04-27T14:53:19.290
> 
> 标签：linq, linq-to-sql

如何将此存储过程迁移到 LINQ

```
DECLARE @customerIDs TABLE (customerID INT)
DECLARE @c INT

if (@customerName != '')
BEGIN
    INSERT INTO @customerIDs
    select id from customer
    where name like '%' + @customerName + '%'

    SELECT @c = COUNT(*) FROM @customerIDs  
END
else
    SET @c = 0

-- Insert statements for procedure here
SELECT DISTINCT l.*, dbo.GetListOfBranches(l.id) as 'list_of_branches', dbo.GetTopLevelCustomer(cid.customerID) FROM [login] l
LEFT JOIN login_to_customer ltc ON ltc.login_id = l.id
LEFT JOIN @customerIDs cid ON cid.customerID = ltc.customer_id
WHERE 
(@c = 0 OR ltc.customer_id = cid.customerID) AND
(l.surname LIKE '%' + ISNULL(@surname, l.surname) + '%')  AND
(l.forename LIKE '%' + ISNULL(@forename, l.forename) + '%')  AND
 (user_type = ISNULL(@userType, user_type))  AND
 (l.active = ISNULL(@active, l.active)) 
 ORDER BY surname ASC 
```

到目前为止，我已经得到了这个：

```
List<Int32> customerIds = new List<int>();           
        if (!String.IsNullOrEmpty(customerName))
        {
            CustomerDataContext custDataContext = new CustomerDataContext();

            customerIds = (from a in custDataContext.Customers
                           where a.name.Contains(customerName)
                           select a.id).ToList<Int32>();
        }

        LoginDataContext dataContext = new LoginDataContext();

        var query = (from t in dataContext.logins
                     join t2 in dataContext.login_to_customers on t.id equals t2.login_id into a
                     from subquery in a.DefaultIfEmpty()
                     select new { t, listOfBranches = dataContext.GetListOfBranches(t.id), topLevelCustomer = dataContext.GetTopLevelCustomer(t.id) }); 
```

我需要然后做一个

```
if (customerIds.Count() > 0)
{
    query = query.Where(a => customerIds.Contains(a.t.customer_id))
} 
```

但是由于我需要执行不同的操作，因此我不能在查询中包含 customer_id 列。有没有办法包括

```
LEFT JOIN @customerIDs cid ON cid.customerID = ltc.customer_id
    WHERE 
    (@c = 0 OR ltc.customer_id = cid.customerID) 
```

在 LINQ 内？

谢谢，理查德

# java - Vertical scrollbar in jTable swing does not appear

> ID：10352903
> 
> 赞同：0
> 
> 时间：2012-04-27T14:53:20.543
> 
> 标签：java, swing, jtable, jscrollpane, tablemodel

I am a bit new to swings, And i was trying to cough up some code involving Jtable. I find that even though i have added the scrollbar policy the vertical scrollbar does not seem to appear. THe code is pretty shabby.(warning u before hand). But could you please indicate where I need to put in the scrollbar policy. I have tried adding it at a lot of places and it just does not seem to appear.

the other question is how do i make an empty table. As in every time the process button is clicked, i would like to refresh the table. Could u point me in this direction as well.

The directions for usage: just enter a number in the regular nodes textfield like 5 or 10 and click on the process button.

My code :

```
package ui;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.util.Arrays;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Set;

import javax.swing.BorderFactory;
import javax.swing.Box;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableModel;

import utils.ThroughputUtility;

/**
 * @author Nathan
 *
 */
public class EntryPoint extends JPanel{
    public boolean isProcesed =false;
    static JFrame frame;

     JTabbedPane jTabbedPane = new JTabbedPane();

    private static final long serialVersionUID = -6490905886388876629L;
    public String messageTobeSent = null;
    public int regularNodeCount =0;

    public static final String MESSAGE_TO_BE_SENT ="  Please Enter the message to be sent. ";

    protected static final String ONE = "1";

    Map<String,Double> regNodeThroughputMap ;
    static JTable tableOfValues;

    Object columnNames[] = { "<html><b>Regular Node Name</b></htm>", "<html><b>Throughput Value Obtained</b></html>"};

    Object rowData[][] = null;
    public EntryPoint() {

        jTabbedPane.setTabPlacement(JTabbedPane.NORTH);
        Font font = new Font("Verdana", Font.BOLD, 12);
        jTabbedPane.setFont(font);

        //Server Side Panel.
         JPanel serverPanel = getServerPanel();       
         jTabbedPane.addTab("Server", serverPanel);

         //Client side Panel.
         JPanel clientPanel = getClientPanel();       
         jTabbedPane.addTab("Client", clientPanel);

    }

    private JPanel getClientPanel() {
        //Heading Label
        JPanel clientPanel = new JPanel();
        JLabel RegularNodeLabel =  new JLabel("<html><u>Throughput Optimization For Mobile BackBone Networks</u></html>");
        RegularNodeLabel.setFont(new Font("Algerian",Font.BOLD,20));
        RegularNodeLabel.setForeground(new Color(176,23,31));

        clientPanel.add(RegularNodeLabel);

        return clientPanel;
    }

    /**Server Side Code
     * @return
     */
    private JPanel getServerPanel() {

        //Heading Label
        JPanel serverPanel = new JPanel(new FlowLayout());
        final Box verticalBox1 = Box.createVerticalBox();
        Box horozontalBox1 = Box.createHorizontalBox();
        Box verticalBox2forsep = Box.createVerticalBox();
        Box horozontalBox2 = Box.createHorizontalBox();

        JPanel heading = new JPanel(new FlowLayout(FlowLayout.CENTER));

        JLabel backBoneNodeLabel =  new JLabel("<html><u>Throughput Optimization For Mobile BackBone Networks</u></html>");
        backBoneNodeLabel.setFont(new Font("Algerian",Font.BOLD,20));
        backBoneNodeLabel.setForeground(new Color(176,23,31));
        backBoneNodeLabel.setAlignmentX(Component.CENTER_ALIGNMENT);

        //Indication of BackBone Node
        JPanel body = new JPanel(new FlowLayout(FlowLayout.LEFT));
        JLabel backBoneNodeID =  new JLabel("Fixed BackBone Node");
        backBoneNodeID.setFont(new Font("Algerian",Font.BOLD,16));
        backBoneNodeID.setForeground(new Color(176,23,31));
        backBoneNodeID.setAlignmentX(Component.CENTER_ALIGNMENT);

        //Seperator
        JLabel seperator =  new JLabel("     ");
        seperator.setFont(new Font("Algerian",Font.BOLD,20));
        seperator.setForeground(new Color(176,23,31));
        verticalBox2forsep.add(seperator);

        //Message label
        JLabel messageLabel = new JLabel("Please enter the Message to be sent:  ");
        messageLabel.setFont(new Font("Algerian",Font.BOLD,16));
        messageLabel.setForeground(new Color(176,23,31));
        messageLabel.setAlignmentX(Component.LEFT_ALIGNMENT);

        //Message Text
        final JTextField messageText = new JTextField(MESSAGE_TO_BE_SENT,25);
        messageText.addFocusListener(new FocusListener() {

            @Override
            public void focusLost(FocusEvent arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void focusGained(FocusEvent arg0) {
                if(messageText.getText().trim().equalsIgnoreCase(MESSAGE_TO_BE_SENT.trim())){
                    messageText.setText("");
                }

            }
        });

        horozontalBox1.add(messageLabel);
        horozontalBox1.add(messageText);

        //Regular node attached to backbone nodes.
        JLabel regularNodelabel = new JLabel("Number of Regular nodes to be attached to the backbone node. ");
        regularNodelabel.setFont(new Font("Algerian",Font.BOLD,16));
        regularNodelabel.setForeground(new Color(176,23,31));
        regularNodelabel.setAlignmentX(Component.LEFT_ALIGNMENT);

        //Regular Node text
        final JTextField regularNodeText = new JTextField(ONE,5);
        regularNodeText.addFocusListener(new FocusListener() {

            @Override
            public void focusLost(FocusEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void focusGained(FocusEvent e) {
                if(regularNodeText.getText().trim().equalsIgnoreCase(ONE.trim())){
                    regularNodeText.setText("");
                    tableOfValues = new JTable(0,0);

                }

            }
        });

        horozontalBox2.add(regularNodelabel);
        horozontalBox2.add(regularNodeText);

        //Button for Processing. 
        JButton processbutton = new JButton("Process");
        processbutton.setFont(new Font("Algerian",Font.BOLD,16));
        processbutton.setForeground(new Color(176,23,31));
        processbutton.setAlignmentX(Component.CENTER_ALIGNMENT);

        //Processing on clciking process button
        processbutton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                isProcesed=false;
                Runnable runThread = new Runnable() {

                    @Override
                    public void run() {
                        while(!isProcesed){
                            try {
                                Thread.sleep(50);
                            } catch (InterruptedException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
                        verticalBox1.add(tableOfValues);
                        isProcesed =false;

                    }
                };
                Thread processThread= new Thread(runThread);
                processThread.start();

                regularNodeCount = Integer.parseInt(regularNodeText.getText().trim());
                regNodeThroughputMap = getThroughPutValues(regularNodeText.getText().trim());
                System.out.println("Map obtained = "+regNodeThroughputMap);
                tableOfValues = populateTable(regNodeThroughputMap);
                isProcesed=true;
                JScrollPane scrollPane = new JScrollPane(tableOfValues);
                scrollPane.add(tableOfValues);
                scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
                verticalBox1.add(scrollPane,BorderLayout.CENTER);
               // verticalBox1.add(scrollPane);

            }
        });

        verticalBox1.add(backBoneNodeID);
        verticalBox1.add(verticalBox2forsep);
        verticalBox1.add(horozontalBox1);
        verticalBox1.add(verticalBox2forsep);
        verticalBox1.add(horozontalBox2);
        verticalBox1.add(verticalBox2forsep);
        verticalBox1.add(processbutton);

        heading.add(backBoneNodeLabel);
        //body.add(backBoneNodeID);
        body.add(verticalBox1);

        serverPanel.add(heading);
        serverPanel.add(body);

        return serverPanel;
    }

    protected JTable populateTable(Map<String,Double> regNodeThroughputMap) {

        /*{ { "Row1-Column1", "Row1-Column2", "Row1-Column3" },
            { "Row2-Column1", "Row2-Column2", "Row2-Column3" } }*/
        rowData = new Object[regularNodeCount+1][2];

         Set<Map.Entry<String, Double>> set = regNodeThroughputMap.entrySet();

         for (Map.Entry<String, Double> me : set) {
             System.out.println("key ="+me.getKey());
             System.out.println("Value ="+me.getValue());
         }

         String[] keys = new String[regularNodeCount+2];
         String[] values = new String[regularNodeCount+2];

         List<String> keyList = new LinkedList<String>();
         List<String> valueList = new LinkedList<String>();
         keyList.add("");
         valueList.add("");

         for(String key:regNodeThroughputMap.keySet()){
             keyList.add(key);
         }

         for(double value:regNodeThroughputMap.values()){
             System.out.println(value);
             valueList.add(Double.toString(value));
         }

         keyList.toArray(keys);
         valueList.toArray(values);

         System.out.println(Arrays.asList(keys));
         System.out.println(Arrays.asList(values));
         rowData[0][0] =columnNames[0];
         rowData[0][1] =columnNames[1];

         for(int i=1;i<=regularNodeCount;i++){
             for(int j=0;j<2;j++){
                 if(j==0)
                     rowData[i][j]=keys[i];
                 if(j==1)
                     rowData[i][j]=values[i];
             }
         }

        return new JTable(rowData, columnNames); 

            //Printing the array
    /*      for (int i =0; i < regularNodeCount; i++) {
                for (int j = 0; j < 2; j++) {
                System.out.print(" " + rowData[i][j]);
                }
                System.out.println("");
                }
*/

    }

    protected Map<String, Double> getThroughPutValues(String regularNodeInput) {
        return ThroughputUtility.generateMapofNodeAndThroughput(regularNodeInput);
    }

    protected static void createAndShowGUI() {
         //Create and set up the window.
        frame = new JFrame("Throughput Optimization for Mobile BackBone Networks");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        EntryPoint splitPaneDemo = new EntryPoint();
        frame.getContentPane().add(splitPaneDemo.jTabbedPane);

        JScrollPane sp = new JScrollPane(tableOfValues);
        sp.setBorder(BorderFactory.createEmptyBorder());
        sp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        sp.setHorizontalScrollBarPolicy(JScrollPane .HORIZONTAL_SCROLLBAR_AS_NEEDED);
        frame.setResizable(false);
        //Display the window.
        frame.pack();
        frame.setVisible(true);
        frame.setSize(800,600);

    }

    public static void main(String[] args) {

         try {
                for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                    if ("Nimbus".equals(info.getName())) {
                        UIManager.setLookAndFeel(info.getClassName());
                        break;
                    }
                }
            } catch (UnsupportedLookAndFeelException e) {
                e.printStackTrace();
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            } catch (InstantiationException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }

          javax.swing.SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    createAndShowGUI();
                }
            });

    }

} 
```

Adding ThroughputUtility.java

```
package utils;

import java.util.LinkedHashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;

/**
 * @author Nathan
 *
 */
public class ThroughputUtility {

    public static double MIN =5000;
    public static double MAX =10000;
    public static final double e =Math.E;
    public static final double epsilon = 8.854187 *Math.pow(10,-12); 

    static int regularNodeCount;
    static int counter ;

    /**Generates the map of Node and ThroughPut values
     * @param regularNodeInput
     */
    public static Map<String,Double> generateMapofNodeAndThroughput(String regularNodeInput){
        regularNodeCount = Integer.parseInt(regularNodeInput);
        List<Double> randNodeDistances  =getRandDistanceOfNodes(regularNodeCount);

        Map<String,Double> nodeAndThroughputmap = getThroughputValuesForNodes(randNodeDistances);
        System.out.println(nodeAndThroughputmap);
        return nodeAndThroughputmap;

    }

    /** Obtains the throughput value based on the distances between
     * the regular nodes and the backend Nodes.
     * @param randNodeDistances
     * @return
     */
    private static Map<String, Double> getThroughputValuesForNodes(
            List<Double> randNodeDistances) {
        Map<String,Double> nodeAndThroughputmap = new LinkedHashMap<String, Double>();

        for(double i : randNodeDistances){
            double throughputValue = calculateThroughPut(i);
            nodeAndThroughputmap.put("RegularNode :"+counter, throughputValue);
            counter++;
        }

        return nodeAndThroughputmap;
    }

    private static double calculateThroughPut(double distanceij) {

        double throughput  = 1 /(e*regularNodeCount*distanceij*epsilon);

        return throughput;
    }

    /**Generates the distance dij .
     * @param regularNodeCount
     * @return
     */
    private static List<Double> getRandDistanceOfNodes(int regularNodeCount) {
        List<Double> distnodeNumbers = new LinkedList<Double>();

        for(int i=0;i<regularNodeCount;i++){
            double randnodeNumber = MIN + (double)(Math.random() * ((MAX - MIN) + 1));
            distnodeNumbers.add(randnodeNumber);

        }
        return distnodeNumbers;
    }

    public static void main(String[] args) {
        ThroughputUtility.generateMapofNodeAndThroughput("5");
        /*System.out.println(e);
        System.out.println(epsilon);*/
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:04:25.153

1.  据我快速查看，您从未在 JFrame 的滚动窗格中
2.  你改变TableModel中的数据（或者替换JTable的TableModel）

请参阅[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T15:26:37.467

您看不到滚动条的主要问题是您将表格添加到多个容器中。

单击按钮时，您重新创建了很多摆动对象（为什么？），然后您启动一个线程将表格添加到盒子中（为什么？如果您不知道自己在做什么，请小心摆动和多线程） . 之后（或之前，取决于线程运行的时间），您将表添加到滚动窗格。

滚动窗格不包含您的表格，因为您只能使用一次。

一个快速的解决方法是这样的：创建一次所有的 GUI 内容，将其排除在任何动作侦听器和内容之外。如果您启动应用程序，它应该只显示一个空表。不要将同一个对象添加到多个容器中！您可以使用来控制表格和滚动窗格的大小

```
table.setPreferredSize(new Dimension(width, height)); 
```

如果您单击按钮（即在您的操作侦听器中），则获取所有新数据并将其添加到表中。例如通过使用这样的东西。

```
tableOfValues.getModel().setValueAt(value, row, column); 
```

或创建一个新的表模型，如果你必须：

```
tableOfValues.setModel(new DefaultTableModel(rowData, columnNames)); 
```

这就是我现在可以通过查看代码告诉你的全部......

编辑：在方法 populateTable(...) 不要创建一个新表！如果必须，请使用上述代码设置新模型，或者使用现有模型并修改其值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-07T13:47:53.623

I had the same problem, just set JTable preferredsize to null and the scrollbar will show up.

Hope it helps

# css - How do I change the color of the div targeted as anchor?

> ID：10352909
> 
> 赞同：0
> 
> 时间：2012-04-27T14:53:39.440
> 
> 标签：css, colors, hyperlink, anchor

Let me try to make myself clear: I have a menu that, when you click on a link, it jumps down to the content in that same page. In other words, it's just an link that anchors to the content. **Could I possibly change the color of, let's say, the content's h1 tag after clicking on the link?**

I also thought of a different way of solving, but I'm not quite sure: **could I change the color of a H1 tag depending on its position as you scroll down a page?**

Cheers!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:58:31.023

简单的：

```
h1:target {color: red;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:03:28.347

CSS3 :target 伪选择器会做你想做的事，但如果浏览器支持是个问题，你可以这样做：

jQuery

```
$('nav li a').click(function (e) {
    var targ = $(this).attr('href');
    $('html, body').scrollTop($("'" + targ + "'").offset());
    $("'" + targ + "'").css('color','red');
    e.preventDefault();
}); 
```

HTML：

```
<nav>
    <ul>
        <li><a href="#someElement">Click here!</a></li>
    </ul>
</nav> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:58:50.040

是的，您可以在 CSS 中使用 :target 伪选择器。

[http://jsfiddle.net/8rHvy/](http://jsfiddle.net/8rHvy/)

有关当前浏览器兼容性的信息，请参见此处： [http ://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

# android - 如何在部分唤醒锁定期间打开屏幕

> ID：10352911
> 
> 赞同：7
> 
> 时间：2012-04-27T14:53:51.943
> 
> 标签：android, screen, power-management

我的活动使用部分唤醒锁定运行，因为它不断处理接收到的蓝牙数据。唤醒锁的设置如下：

```
 powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
  wakeLock = powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "MyWakeLock");
  wakeLock.acquire(); 
```

当某些事件发生时，我想在显示器上显示，以便用户查看状态。我希望显示器自动打开，而不是通过用户按键。然而，所有这样做的尝试都失败了。当显示器在使用部分唤醒锁定运行时关闭时，我试图将显示器转回并让用户看到当前活动的尝试失败了。我试过伪造用户活动：

```
PowerManager NewPowerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
   NewPowerManager.userActivity(1, false); 
```

为窗口设置标志：

```
 Window win = getWindow();
  win.setFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON, WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON); 
```

甚至释放唤醒锁并启动另一个应该打开屏幕的锁：

```
if (wakeLock != null)
   {
      wakeLock.release(); // release the wakelock
   }
PowerManager.WakeLock TempWakeLock = powerManager.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK |
   PowerManager.ACQUIRE_CAUSES_WAKEUP, "TempWakeLock");
   // tried | PowerManager.ON_AFTER_RELEASE to no avail
   TempWakeLock.acquire(); 
```

我在这里缺少什么吗？我不是试图打开一个新的活动，而只是向用户显示我当前的活动。有没有其他人能够做到这一点？感谢你给与我的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T19:34:36.010

在看到来自 HTC 的 Lance 的一些演示代码后，我终于能够解决这个问题（顺便感谢一下）。

秘密似乎是使用 ACQUIRE_CAUSES_WAKEUP 设置创建一个额外的完整唤醒锁。我没有释放原来的部分唤醒锁，但是当我想打开显示器时，我创建了新的完全唤醒锁，做我的事情，然后释放新的完全唤醒锁。这确实有效！

```
PowerManager TempPowerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock TempWakeLock = TempPowerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP | 
PowerManager.ON_AFTER_RELEASE, "TempWakeLock");
TempWakeLock.acquire();

// do the work that needs the visible display...

// Release the newest wakelock and fall back to the old one
TempWakeLock.release(); 
```

# entity-framework - 如何在 EF4.3.1 Code First 迁移期间忽略派生的 DbContext

> ID：10352912
> 
> 赞同：0
> 
> 时间：2012-04-27T14:53:53.643
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我正在尝试使用代码优先迁移，但包含我的 CustomContext 的项目也有一个派生类 TracingCustomContext，我在跟踪生成的 SQL 时使用它：

```
DbContext => CustomContext => TracingCustomContext 
```

我在代码优先迁移期间遇到的问题是尝试运行时

```
Enable-Migrations 
```

在包管理器控制台中，这会导致（并非意外）警告：

```
More than one class deriving from DbContext found in the current project.
Edit the generated Configuration class to specify the context to enable migrations for. 
```

为了跳过这条消息并继续添加-迁移-初始，我必须注释掉我的 TracingCustomContext 类，然后运行 ​​Enable-Migrations。生成的配置类看起来不错，因此警告中的建议似乎不相关。

所以我的问题是是否有任何方法可以配置迁移，使其忽略特定的上下文，如 TracingCustomContext？例如，装饰类的属性，或某处的配置设置？

任何想法都非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T18:27:22.503

根据错误消息：

```
Edit the generated Configuration class to specify the context to enable migrations for. 
```

打开创建的 Configuration.cs 类（在 Migrations 文件夹中），您将看到：

```
internal sealed class Configuration : DbMigrationsConfiguration</* TODO: put your Code First context type name here */> 
```

将 /* TODO: put your Code First context type name here */ 替换为上下文的类型名称（在 Seed 方法中执行相同操作，或者如果您不使用 Seed 方法，则删除它），它应该可以工作。

# java - mutable and immutable classes

> ID：10352921
> 
> 赞同：3
> 
> 时间：2012-04-27T14:54:23.763
> 
> 标签：java, oop, immutability, mutable

I want to create mutable and immutable node in java, both should be the same in everything except the mutable. how to implement the base class and the two derived class of mutable and immutable classes ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T14:55:37.607

The difference between mutable and immutable classes is that immutable classes have no setters or any other methods that modify internal state. The state can only be set in the constructor.

It would be a bad idea to call the parent class Immutable because this would no longer be true when you have subclasses. The name would be misleading:

```
ImmutableNode node = new MutableNode();
((MutableNode)node).change(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T14:58:13.007

您需要做的就是创建一个带有受保护变量的基类

```
public class Base{
     protected int foo;
} 
```

可变的需要能够设置变量

```
public class MutableBase extends Base{
     public void setFoo(){}
} 
```

不可变的只需要能够设置变量一次

```
public class ImmutableBase extends Base{
     public ImmutableBase(int foo){
          this.foo = foo;
     }
} 
```

大多数不可变类都有方法可以在***不***改变实例的情况下作用于内部变量。字符串这样做，你可能想要这样的东西

```
public ImmutableBase add(int bar){
     return new ImmutableBase(this.foo+bar);
} 
```

这样做很酷的是，您可以让您的班级的用户***减少***对每个实例内部的控制/担心。这使得使用起来更容易，因为在 Java 中，所有内容都是通过对象引用传递的，所以如果您传递的是 String 或 ImmutableBase，您不必担心它会被更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:04:52.050

对于一个不可变的类，它必须声明为 final，并且它不能有 setter 方法。最终声明确保它不能被扩展并添加额外的可变属性。

```
class Base {
    protected int var1;
    protected int var2;

    public getVar1() {return var1;}
    public getVar2() {return var2;}
    }

    class Mutable extends Base {
      public setVar1(int var1) {this.var1 = var1}
      public setVar2(int var2) {this.var2 = var2}
    }

    final class Immutable extends Base { //final to avoid being extended and then implement the setters

    } 
```

这就是我能做的一点点吗？但是你为什么需要这样的场景呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T22:03:35.453

[另一种选择是使用与UnmodifiableList](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableList%28java.util.List%29)相同的策略。首先，创建一个指定类型的接口。

```
interface List<T>{
    List<T> add(T t);
    T getAt(int i);
    ...
} 
```

然后你用所有的业务逻辑实现你的可变类：

```
public class MutableList<T> implements List<T>{
    @Override
    List<T> add(T t){ ... }

    @Override
    T getAt(int i){ ... }

    ...
} 
```

最后，创建不可变类作为可变类的视图。您实现相同的接口，但将所有读取方法调用委托给查看的对象，并通过异常禁止任何写入访问。

```
public class UnmodifiableList<T> implements List<T>{
    //This guy will do all hard work
    private List delegate;

    public UnmodifiableList(List<? extends T> delegate){
        this.delegate = delegate;
    }

    //Forbidden mutable operation: throw exception!
    @Override
    List<T> add(T t){ 
        throw new UnsupportedOperationException("List is unmodifiable!");
    }

    //Allowed read operation: delegate
    @Override
    T getAt(int i){ 
        return delegate.getAt(i);
    }

    ...
} 
```

这种方法的好处是您只需实现一次业务逻辑，并且可以先使用自己的方法和验证检查构建一个对象，然后再将其转换为不可变对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T14:57:32.553

不可变类是一个一旦创建，其内容就不能改变的类。不可变对象是状态不能改变的对象。

Java 中不可变类的一个常见示例是[String](http://docs.oracle.com/javase/tutorial/java/data/strings.html)类。

# symfony-1.4 - Symfony 1.4：如何不通过 generator.yml 显示任何过滤器

> ID：10352922
> 
> 赞同：1
> 
> 时间：2012-04-27T14:54:29.650
> 
> 标签：symfony-1.4, filtering

**我在Symfony**创建了一个管理模块。我想显示表格列表但**没有**过滤器。

默认情况下，我得到所有过滤器。我设法在模块的**filterForm 文件**中手动取消设置所有过滤器。更重要的是，我只启用了一个过滤器并取消设置它。为此使用了 `unset($this->widgetSchema['filter'], ...)`。我不喜欢这个解决方案。

我想使用`generator.yml`：

我试过：

```
 I)   filter: false

  II)  filter:
         display: false 

  III) filter:
        display: [] <-- empty! 
```

没有工作。我读到使用凭据是可能的，但我想以更简单、更具体的方式来做。

谢谢你。

**编辑**：我的实际发电机。真的是默认值吗：

```
generator:
class: sfPropelGenerator
param:
  model_class:           halt
  theme:                 admin15
  non_verbose_templates: true
  with_show:             false
  singular:              Halt
  plural:                Halts
  route_prefix:          halt
  with_propel_route:     1
  actions_base_class:    sfActions

config:
  actions: ~
  fields:  ~
  list:
    object_actions: {}
    batch_actions: {}
  filter:  ~
  form:    ~
  edit:    ~
  new:     ~ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:19:44.267

你几乎完成了，但你没有测试一切:)

```
filter:
  class: false 
```

[http://www.symfony-project.org/reference/1_4/en/06-Admin-Generator#chapter_06_filter](http://www.symfony-project.org/reference/1_4/en/06-Admin-Generator#chapter_06_filter)

> 要完全删除过滤功能，请将类设置为 false。

# javascript - javascript下拉列表

> ID：10352930
> 
> 赞同：-4
> 
> 时间：2012-04-27T14:55:08.967
> 
> 标签：javascript

我的表格上有一个下拉列表。

一旦用户在下拉菜单上做出选择，我会在 javascript 中使用什么事件触发。我尝试过改变，但这确实有效。

```
 DROP DOWN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:57:21.850

[`onchange`](https://developer.mozilla.org/en/DOM/element.onchange)是正确的事件。

**HTML**

```
<select onchange="SelectChanged(this)">
...
</select> 
```

**JS**

```
function SelectChanged(obj) {
    ...
} 
```

这是[一个非常简单的工作示例](http://jsfiddle.net/JamesHill/RKJpj/)，可以帮助您入门。

# asp.net-mvc - Creating a custom error page for asp.net MVC 3, need to disable http modules

> ID：10352931
> 
> 赞同：0
> 
> 时间：2012-04-27T14:55:10.430
> 
> 标签：asp.net-mvc, asp.net-mvc-3, error-handling

I've a MVC 3 web application using WIF (only thing that matters here is that it's a http module and integrated into the processing pipeline), I've added in normal error handling via global.asax.cs's application_error handler. This works well for most of the cases where the basic application is up and running.

however, there is a class of errors where if the web.config is not configured correctly. (i.e. after a fresh install), the http modules, i.e. WIF assemblies throw exceptions.

I'm trying to put a custom error page for that as well to ask the user to look at the configuration, however, any page hosted on the same website, even for static html still goes to the standard asp.net error page. My guess is that its still invoking the modules for static pages. Any one have idea on how to disable the httpmodules for certain areas or what the standard practice is?

This is how i'm configuring the custom error page

```
<customErrors mode="RemoteOnly" defaultRedirect="~/error.htm"> 
```

it's a simple static html page. page loads fine when the website is configured properly, but does not show when there is a http module level problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T02:16:28.067

您可以在 machine.config 文件中指定默认网站设置。甚至保护它们免受覆盖。machine.config 文件位于 x:\\Microsoft.NET\Framework\\config\machine.config 因此，如果部署后 web.config 文件将被破坏（或某些设置） - 将从 machine.config 中获取正确的设置.

# xcode - Xcode SDK 和触控板手势：动画设置

> ID：10352932
> 
> 赞同：5
> 
> 时间：2012-04-27T14:55:13.197
> 
> 标签：xcode, macos, osx-lion, xcode4.3

**Q**问题是，有没有办法在运行 MacOS 10.7.3 的当前公开可用的 Xcode 4.3.2 上禁用触控板手势所发生的动画？

**描述**我非常关心新的 Lion 动画，同时使用触控板手势前进/后退。使用键盘快捷键，页面会*立即*更改，并且通过一个手势大约需要一两秒钟的时间，我的注意力就会集中在需要在代码中找到的东西上。

**尝试过**我尝试的是读取终端中的默认值以查找任何动画/持续时间键 - 没有成功。

**笔记**看起来像先生。库克[批评](http://www.electronista.com/articles/12/04/24/apple.ceo.slams.windows.8.ultrabook.idea/)了苹果在准备移动/固定相结合的外观和感觉时自己做的事情。如果有任何收集所有用户定制的启动项目，我会很高兴知道。到目前为止，我尝试了该`itweax`应用程序，但是它还没有预期的功能。

Safari 的内容与内容重要性无关，所以我不介意离开 Safari 动画，但在系统级别为所有应用程序更改它也很好。

**PS**我相信*是*关于“我可以在这里问什么样的问题？”中提到的“程序员常用的软件工具”。[所以常见问题](https://stackoverflow.com/faq)部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:19:10.143

不知道禁用动画，但如果你想通过手势触发应用程序键盘命令，我发现[BetterTouchTool](http://blog.boastr.net/?p=2817)有助于解决一些主要的 Lion 烦恼。前任。我能够将 FireFox 配置为在 3 指向上/向下滑动时执行 Home/End。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T06:05:09.097

不，没有办法禁用动画。

但是，您可以禁用页面滑动功能：

```
System Preferences > Trackpad > More Gestures > Deselect "Swipe between pages" 
```

不幸的是，没有设置可以禁用或更改动画的速度。

# svn - SVN - 更新时校验和不匹配

> ID：10352934
> 
> 赞同：126
> 
> 时间：2012-04-27T14:55:25.120
> 
> 标签：svn

当我尝试从 Subversion 更新一些文件时，我收到错误消息：

```
org.tigris.subversion.javahl.ClientException: 
Checksum mismatch while updating 'D:\WWW\Project\\.svn\text-base\import.php.svn-base'; expected: '3f9fd4dd7d1a0304d8020f73300a3e07', actual: 'cd669dce5300d7035eccb543461a961e' 
```

为什么我会得到这个？我该如何解决？

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-07-06T14:43:55.307

如果您使用的是 SVN 1.7+，这里有一个解决[方法](http://techblog.moudrick.net/2012/02/subversion-17-file-folders-manipulation.html)。

回顾一下：

1.  转到包含导致问题的文件的文件夹
2.  执行命令`svn update --set-depth empty`（注意：这会删除你的文件，所以先复制一份！）
3.  执行命令`svn update --set-depth infinity`

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-04-27T15:05:31.247

修复它的最简单方法（如果您没有太多更改）是将更改复制到另一个目录，删除签出项目的目录，然后再次签出项目。

然后将您的更改复制回（不要复制任何 .svn 文件夹）并提交，然后继续。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-19T10:20:47.017

我有一个类似的问题。主要提供商是防病毒软件“FortiClient”（防病毒软件 + VPN 客户端）。当我禁用它时 - 所有更新/结帐都正确进行

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-07T13:17:32.697

我找到了一种更简单的方法来解决这个问题。您不能直接从 Eclipse 中执行此操作。脚步：

1.  导航到 Windows 中的工作区文件夹结构
2.  重命名文件夹
3.  在eclipse中刷新
4.  现在文件夹和文件将从 eclipse 中的项目中删除，并将出现在新的重命名文件夹下
5.  现在尝试“与存储库同步”选项。

这将恢复 .svnfolder 中的文本基础文件夹。更新错误时校验和不匹配不会进一步出现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-16T19:30:59.673

这发生在我使用 Eclipse 插件和同步时。导致问题的文件没有本地更改（实际上自我上次更新以来没有远程更改）。我为文件选择了“恢复”，没有对文件进行其他修改，一切恢复正常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-30T18:42:05.617

我有一个同样的错误，但只有一个文件。在 IntelliJ IDEA 中，我能够制作文件的副本，然后进入项目并删除有问题的文件，然后成功提交。然后，我创建了一个具有相同名称的新文件并将内容复制回其中。我猜你会丢失修订历史，但它确实有效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-03T21:34:32.610

我有一个类似的错误并修复如下：

（我的“修复”是基于一个可能正确也可能不正确的假设，因为我不太了解 subversion 如何在内部工作，但它肯定对我有用）

我假设 .svn\text-base\import.php.svn-base 预计会匹配最新的提交。

当我检查我遇到错误的文件时，基本文件与存储库中的最新提交不匹配。

我从最新提交中复制了文本并将其保存在 .svn 文件夹中，替换了不正确的文件（制作了备份副本以防我的假设错误）。（文件被标记为只读，我清除了该标志，覆盖并将其设置回只读）

然后我能够成功提交。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-21T12:18:26.193

如果您有同事与您一起工作：

1) 要求他重命名导致问题的文件并`commit`

2）您`update`（现在您看到具有不同名称的无效校验和的文件）

3) 将其重命名为原来的名称

4）`commit`（并要求您的同事`update`将文件名恢复为初始状态）

这为我解决了这个问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-25T13:32:10.713

我找到了非常好的解决方案，**解决**了我的问题。诀窍是编辑 svn DB (wc.db)。

该页面描述了解决方案：[http ://www.exchangeconcept.com/2015/01/svn-e155037-previous-operation-has-not-finished-run-cleanup-if-it-was-interrupted/](http://www.exchangeconcept.com/2015/01/svn-e155037-previous-operation-has-not-finished-run-cleanup-if-it-was-interrupted/)

如果链接已关闭，请查看并按照以下说明进行操作： [![在此处输入图像描述](../Images/7d0535b384a6cecb548af67f3b6fbcc5.png)](https://i.stack.imgur.com/WaLSJ.png)

[我使用了来自http://sqlitebrowser.org/](http://sqlitebrowser.org/)的sqlite 工具。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-29T07:42:49.703

我正在使用 Tortoise SVN，在尝试了此页面中的所有解决方案并且无法正常工作后，

我终于备份了问题文件。并使用`Repo Browser`删除其中的问题文件，然后更新本地文件夹，以便删除本地文件夹中的文件。然后将备份文件复制回来`Add > Commit`，然后我就可以成功更新了。

此方法的唯一缺点是该文件的历史记录将被删除。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-06-01T11:39:36.953

要解决此问题，请执行以下步骤：

1.  打开位于出现错误的 .svn 目录中的条目文件。
2.  找到给出错误的文件的条目，并将预期值替换为错误的实际值。
3.  现在同步并尝试更新。

如果还是不行。试试这些。它只是一种解决方法：

1.  从系统中删除文件。
2.  从条目文件中删除文件的条目。（从文件名开始直到特殊字符）。
3.  现在同步并更新文件。

这将从存储库中获取最新版本的文件，所有冲突都将得到解决。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-09-24T00:12:50.220

在服务器上遇到了类似的问题，但是 SVN 目录非常大，不想删除和重新同步，所以我只是在本地复制了文件，然后删除了它们。当更新成功并重新添加文件时。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-10-21T15:33:27.123

尝试删除文件并从 .svn 目录下的文件条目中删除文件引用

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-11-03T17:56:38.507

我的解决方案是：

1.  从文件系统执行 svn cleanup
2.  切换到另一个分支
3.  解决冲突
4.  切换到“有问题”的分支
5.  从 Spring Tool Suite 执行清理
6.  执行项目更新

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-08T06:14:39.750

1.'update to reversion'勾选目录下的'only this item' 2.update再次勾选'Fully recursive'

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-11-12T12:29:43.067

有同样的问题，对我有用的是。

1.  尝试将受影响分支的 SVN 签出到新目录中
2.  等到 .svn 文件夹被添加到新目录中 3.复制并用新的 .svn 目录替换受影响分支中的旧 .svn 目录
3.  SVN 清理
4.  SVN 更新

执行这些步骤后，我无法收到 SVN 校验和不匹配错误，并且更新正常工作

# c# - 我应该在一个简单的 get 属性上测试多重？

> ID：10352944
> 
> 赞同：2
> 
> 时间：2012-04-27T14:55:48.887
> 
> 标签：c#, unit-testing

我是……单元测试的初学者。

我刚刚阅读了一些单元测试最佳实践。有点理解单元测试旨在防止对代码进行的更改会破坏应用程序。我们将希望在所有对象的公共 API（getter、方法）上创建测试用例来测试对象的行为，看看是否符合我们的预期。

所以现在..我有一个简单的类需要测试：

```
public class Foo{
   private readonly string _text;

   public Foo(string initialText)
   {
      this._text = initialText;
   }

   public string Text {get;}

   //Some other methods that will use this Text property to parsing, comparasion etc
   public string RichTextFormat {....}
} 
```

在这里，就像在评论中一样，这个**Text**属性在解析、比较等方面使用了很多地方。

**所以我认为确保Text**属性完全返回我在构造函数中传递的内容非常重要。

这是我写的测试用例...

```
[TestMethod]
public void Text_WhenInitialTextIsNull()
{
    string initalizeText = null;
    Foo realFoo = new Foo(initalizeText);
    Assert.AreEqual(initalizeText, realFoo.Text);
}

[TestMethod]
public void Text_WhenInitialTextIsEmpty()
{
    string initalizeText = string.Empty;
    Foo realFoo = new Foo(initalizeText);
    Assert.AreEqual(initalizeText, realFoo.Text);
}

[TestMethod]
public void Text_WhenInitialTextIsOneLetter()
{
    string initalizeText = "A";
    Foo realFoo = new Foo(initalizeText);
    Assert.AreEqual(initalizeText, realFoo.Text);
}

[TestMethod]
public void Text_WhenInitialTextIsOneSpecialCharacter()
{
    string initalizeText = "!";
    Foo realFoo = new Foo(initalizeText);
    Assert.AreEqual(initalizeText, realFoo.Text);
}

[TestMethod]
public void Text_WhenInitialTextIsOneSentense()
{
    string initalizeText = "Hello, World!";
    Foo realFoo = new Foo(initalizeText);
    Assert.AreEqual(initalizeText, realFoo.Text);
}

[TestMethod]
public void Text_WhenInitialTextIsOneParagraph()
{
    string initalizeText = "Who's the Smartphone Winner? " + System.Environment.NewLine +
                           " On the smartphone front, however, iSuppli put Apple at number one," +
                           " while Strategy Analytics pointed to Samsung. " + System.Environment.NewLine +
                           " According to iSuppli, Apple shipped 35 million smartphones in the first quarter" +
                           " to Samsung's 32 million. Strategy Analytics, however, said Samsung's total was" +
                           " 44.5 million to Apple's 35.1 million. Nokia landed at number three on both lists" +
                           " with 12 percent market share. ";
    Foo realFoo = new Foo(initalizeText);
    Assert.AreEqual(initalizeText, realFoo.Text);
} 
```

我想知道这……是不是太重了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:59:39.027

> 所以我认为确保 Text 属性完全返回我在构造函数中传递的内容非常重要。

它是一个吸气剂。它获取`_text`您在构造函数中设置的字段。

除了在类初始化后检查从 getter 中返回的值之外，做**任何事情**都是多余的，即使这样也可能被认为是测试不需要测试的东西。

测试基本 C# 功能是否按预期工作是没有意义的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:01:37.170

由于您没有操纵传入的值，因此我建议您进行一项测试以确保正确设置了该值。鉴于此，以下测试就足够了。

```
[TestMethod]
public void TextReturnsTextPassedToConstructor()
{
    string text = "A string";
    Foo foo = new Foo(text);

    Assert.AreEqual(text, foo.Text);
} 
```

只有在构造函数中正在进行额外的逻辑或字符串操作时，才值得添加其他测试。例如，如果您在字符串为空或空的情况下抛出异常，或者您正在执行字符替换等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:02:23.703

我认为您需要更改测试的上下文。我的意思是不要将测试集中在`Text`属性上，而是这样做：

```
[TestMethod]
public void given_null_string_expect_null()
{
    string initalizeText = null;
    Foo realFoo = new Foo(initalizeText);
    Assert.AreEqual(initalizeText, realFoo.Text);
}

[TestMethod]
public void given_special_character_string_expect_that_character()
{
    string initalizeText = "!";
    Foo realFoo = new Foo(initalizeText);
    Assert.AreEqual(initalizeText, realFoo.Text);
} 
```

等等。

重点是：如果将属性名称从更改为其他名称会发生`Text`​​什么？您现在有很多单元测试需要重命名以适应这种情况。我的建议是您根据正在发生的事情的上下文来命名测试（例如，给定一个带有一个字母的字符串，期望那个字母）。这样，如果您重命名代码中的内容，您的测试不会受到影响。

我的另一点是你不需要在这个级别进行测试。一个属性并不值得你花时间去测试。相反，您最好的测试方法或与其他类的集成，而不仅仅是一个属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T15:08:30.123

鉴于您的财产的简单性质，我认为这有点矫枉过正。对于字符串上近乎琐碎的测试，我喜欢将其保持在 3 个测试中：null、empty、something。

```
[TestMethod]
public void Test_Text_Null()
{
    Assert.AreEqual(null, new Foo(null).Text);
}

[TestMethod]
public void Test_Text_Empty()
{
    Assert.AreEqual("", new Foo("").Text);
}

[TestMethod]
public void Test_Text_Something()
{
    Assert.AreEqual("abc", new Foo("abc").Text);
} 
```

一般来说，我不会尝试对如此简单的输入的每一个可能的变化进行单元测试。如果您将来遇到错误，因为有人修改了 Foo 现在它会在您有逗号时中断 - 然后将其添加到您的单元测试套件中。一路上的单元测试是好的——但不要让它瘫痪你继续完成项目的能力。

# javascript - Send and receive data to and from another domain

> ID：10352948
> 
> 赞同：0
> 
> 时间：2012-04-27T14:56:00.353
> 
> 标签：javascript, ajax, json, xmlhttprequest, jsonp

I'm trying to write a plugin. I can not use any libraries or frameworks. At any website (domain) I would like to start a script from my own domain.

For example: In the code of the website under **domain A** I put a code starting the script from **domain B**

```
<script src="http://domain-b.com/myscript.js" type="text/javascript"></script> 
```

The code of JavaScript (myscript.js)

```
type = 'GET';
url = 'http://domain-b.com/echojson.php';
data = ‘var1=1&var2=2’;

_http = new XMLHttpRequest();

_http.open(type, url + '?callback=jsonp123' + '&' + data, true);
_http.onreadystatechange = function() {
      alert(‘Get data: ’ + _http.responseText);
}
_http.send(null); 
```

*Script from **http://domain-b.com/echojson.php** always gives the answer:*

```
jsonp123({answer:”answer string”}); 
```

But in a JavaScript console I see an error (200) and AJAX doesn’t get anything.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:06:46.073

像 LAB、yep/nope 或[Frame.js](https://github.com/bishopZ/Frame.js)这样的脚本加载器旨在绕过同源策略。他们加载一个脚本文件，因此请求的文件必须如下所示：

```
response = {answer:”answer string”}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:07:58.600

如果您像在此处发布的那样使用您的代码，则它不起作用，因为您正在为`data`变量使用撇号！

# html - HTML5 视频标签始终在 Safari 中下载完整视频

> ID：10352949
> 
> 赞同：1
> 
> 时间：2012-04-27T14:56:05.267
> 
> 标签：html, mobile, safari, amazon-s3, html5-video

我有以下 HTML5 视频标签：

```
<video id="vid"  controls="controls" preload="metadata">
    <source src="/testvid.m4v" type="video/mp4" />
    Your browser does not support the video tag.
</video> 
```

单击视频后，Safari 会立即开始下载整个视频文件，并且不会停止，直到下载完为止。视频文件为 400 MB，因此这是一个带宽成本问题。

文件中索引的位置似乎没有问题，因为[http://renaun.com/blog/code/qtindexswapper/](http://renaun.com/blog/code/qtindexswapper/)上的应用程序说索引已经在开头，并且开头即使其余的仍在下载，视频也可以立即播放。

源文件位于 Amazon S3 中，因此服务器支持范围请求。

有什么我可以做的吗？理想情况下，我想要某种合理的缓冲区，例如播放头前 20 MB 的内容，或 1 分钟，或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:09:07.663

正常行为是在页面加载时下载一小部分视频（刚好够浏览器显示帧并获取文件头）。播放视频时，会在播放时下载整个视频。

在某些旧版本的浏览器中，如果您使用搜索栏，视频会再次下载。

没有可用于更改此行为的设置或属性。

来源： http: [//www.stevefenton.co.uk/Content/Blog/Date/201106/Blog/HTML-5-Video-In-Real-Life/](http://www.stevefenton.co.uk/Content/Blog/Date/201106/Blog/HTML-5-Video-In-Real-Life/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:15:08.633

我同意索尼的观点。要降低带宽，您有两种选择：

将您的视频压缩到较低质量，或者您的视频大小/比特率是多少（ fe h264 和 427x240 800kbps 我最终得到大约 5-6mb/分钟）

考虑一个播放列表（猜猜 southpark.de 就是这样做的），将你的电影分成几个部分，如果视频结束，将下一个加载到播放器中。缺点：如果您使用自定义控件，它们只会显示当前视频的信息，而不是整个视频（如果您使用特殊魔法构建自定义控件可以解决）。

不知道它是否有帮助，但在这种情况下，这将是我的两个解决方案。最佳 K

# c - C使用malloc和复制数组

> ID：10352953
> 
> 赞同：1
> 
> 时间：2012-04-27T14:56:22.953
> 
> 标签：c

我应该遵循以下标准：

实现函数 answer4（指针参数和 n）：

1.  `malloc()`使用n 个项目 准备一个 student_record 数组。

2.  将参数中的学生记录复制到数组 n 次。

3.  返回数组。

我提供了下面的代码，但这显然是不正确的。实现这一点的正确方法是什么？

```
student_record *answer4(student_record* p, unsigned int n)
{
    int i;
    student_record* q = malloc(sizeof(student_record)*n);
    for(i = 0; i < n ; i++){
        q[i] = p[i];
    }
    free(q);
    return q;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:02:04.843

```
p = malloc(sizeof(student_record)*n); 
```

这是有问题的：您正在覆盖`p`输入参数，因此您无法引用在该行之后传递的数据。

这意味着您的内部循环读取初始化数据。

这：

```
return a; 
```

也是有问题的——它会返回一个指向局部变量的指针，这不好——一旦函数返回，指针就会变得无效。

你需要的是这样的：

```
student_record* ret = malloc(...);

for (int i=...) {
 // copy p[i] to ret[i]
}

return ret; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:02:46.573

1）您通过调用重新分配了 p，即您应该复制的数组`malloc()`。

2）您不能返回本地*堆栈*变量（a）的地址。将 a 更改为指针，将其 malloc 为 p 的大小，然后将 p 复制到其中。Malloc 的内存是*堆*内存，因此您可以返回这样的地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:03:36.210

`a[]`是一个本地自动数组。一旦你从函数返回，它就会从内存中删除，所以调用函数不能使用你返回的数组。

您可能想要做的是`malloc`一个新数组（即 not `p`），您应该将重复项分配到其中并返回其值而不释放分配的内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T15:03:56.087

尝试使用更好的名称，这可能有助于避免代码中出现明显的混淆错误。

例如，使用以下命令启动函数：

```
student_record * answer4(const student_record *template, size_t n)
{
...
} 
```

它还使代码更清晰。请注意，我添加`const`是为了更清楚地说明第一个参数是仅输入的，并制作了第二个参数的类型，`size_t`这在处理“计数”和事物的大小时很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T15:25:33.000

这个问题中的代码发展得很快，但在给出这个答案时它包含以下两行：

```
free(q);
return q; 
```

这肯定是错误的——在`free`对其参数的调用指向无效内存之后，使用`q`. 即你返回一个无效的指针。既然你要回来`q`了，不要释放它！它成为“调用者拥有的”变量，并成为调用者释放它的责任。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T15:10:23.780

```
student_record* answer4(student_record* p, unsigned int n)
{
    uint8_t *data, *pos;
    size_t size = sizeof(student_record);
    data = malloc(size*n);

    pos = data;
    for(unsigned int i = 0; i < n ; i++, pos=&pos[size])
        memcpy(pos,p,size);

    return (student_record *)data;
}; 
```

你可以这样做。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T15:13:03.570

这编译，我认为，做你想要的：

```
student_record *answer4(const student_record *const p, const unsigned int n)
{
    unsigned int i;
    student_record *const a = malloc(sizeof(student_record)*n);
    for(i = 0; i < n; ++i)
    {
        a[i] = p[i];
    }
    return a;
}; 
```

几点：

1.  现有数组被标识为`p`。你想从中复制。您可能不想释放它（释放它可能是调用者的工作）。
2.  新数组是`a`。你想复制到它。该函数无法释放它，因为调用者将需要它。因此，调用者必须负责释放它，一旦调用者完成了它。
3.  该数组有`n`元素，索引从 0 到 n-1。因此，表示索引上限的常用方法是`i < n`.
4.  `const`我添加的s 不是必需的，但编写良好的代码可能会包含它们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-27T15:36:34.983

Altought，这个问题以前有很好的答案，我不能避免添加我自己的。因为我在 Collegue 学过 pascal 编程，所以我习惯这样做，用 C 相关的编程语言：

```
void* AnyFunction(int AnyParameter)
{
   void* Result = NULL;

   DoSomethingWith(Result);

   return Result;
} 
```

这有助于我轻松调试，并避免像 @ysap 提到的与指针相关的错误。

需要记住的重要一点是，问题提到要返回一个 SINGLE 指针，这是一个常见的警告，因为指针可以用于处理单个项目或连续数组！

这个问题建议使用数组作为一个概念，带有指针，而不是使用数组语法。

```
// returns a single pointer to an array:
student_record* answer4(student_record* student, unsigned int n)
{
  // empty result variable for this function:
  student_record* Result = NULL;

  // the result will allocate a conceptual array, even if it is a single pointer:
  student_record* Result = malloc(sizeof(student_record)*n);

  // a copy of the destination result, will move for each item
  student_record* dest = Result;

  int i;
  for(i = 0; i < n ; i++){
    // copy contents, not address:
    *dest = *student;

    // move to next item of "Result"
    dest++;
  }

  // the data referenced by "Result", was changed using "dest"
  return Result;
} // student_record* answer4(...) 
```

检查一下，这里没有下标运算符，因为使用指针寻址。

请不要开始帕斯卡与 c 的火焰战争，这只是一个建议。

# form-submit - 图片提交按钮无法正常工作

> ID：10352955
> 
> 赞同：0
> 
> 时间：2012-04-27T14:56:25.937
> 
> 标签：form-submit, onsubmit

我正在尝试使用图像在我的页面上提交表单。这是我目前拥有的代码，它有效：

```
 <form name="regForm" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post"  id="regForm" >
   ....input form here....
      <input name="doRegister" type="submit" id="doRegister" value="Register">
  </form> 
```

我试图使用的东西不起作用：

```
 <form name="doRegister" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" id="doRegister">
   ....input form here....
  <input type="image"  value="Register" src="../register.png"  style="vertical-align: middle; height: 30px; width: 66px;" onsubmit="submit-form();" /> 
```

单击按钮提交时，它会重新加载页面，而不实际提交数据。

这是 Post v Get 问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:13:56.253

我过去在做这样的事情时也遇到过这个问题，尝试`<input type="image" src="../register.png" alt="Register" name="doRegister" />` 在 php 中使用`$_POST['x_doRegister']`（`x_`可能不需要）

# javascript - CSS 样式表值未修改

> ID：10352960
> 
> 赞同：0
> 
> 时间：2012-04-27T14:56:41.617
> 
> 标签：javascript, jquery

```
function getStyle(Selector, Property, Value, StyleSheetIndex) {    
    var Selectors = document.styleSheets[StyleSheetIndex].rules;    
    for (var i = 0; i < Selectors.length; i++) {
        if (Selectors[i].selectorText == Selector) {            
            alert(Value +  "     " + Property);
            Selectors[i].style[Property] = "url(" + Value + ")"; 
        }
    }
} 
```

其中Selector = "body", Property="backgroundImage", value="/images/bg.jpg",StyleSheetIndex = 2，但是这里的属性值没有变化。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:00:04.050

既然您已经标记`jQuery`了这个问题，我建议您使用 jQuery 进行简单的操作。试试这个。

```
$('body').css('backgroundImage', 'url("/images/bg.jpg")'); 
```

附带说明一下，因为此方法设置了应将其命名为的样式，`setStyle`而不是`getStyle`.

# php - php 缓冲区在 ob_end_clean 之后不会停止

> ID：10352964
> 
> 赞同：1
> 
> 时间：2012-04-27T14:57:03.030
> 
> 标签：php, buffering

使用以下代码，我缓冲了一个布局文件。在本地服务器上工作正常，但在实时服务器上它会一直缓冲直到 php 放弃。这导致旋转进度条和页面中所有 javascript 的延迟执行。看起来 ob_end_clean() 并没有真正退出缓冲。

```
ob_start();
require($layoutfile);
$return = ob_get_contents();
ob_end_clean();
return $return; 
```

当我在刷新缓冲区后回显一个空格时，一切正常。但在这种情况下，我不会在屏幕上打印任何内容。

```
ob_start();
require($layoutfile);
$return = ob_get_contents();
if(ob_end_clean()) echo " ";
return $return; 
```

有人遇到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T13:07:31.163

**对于任何有缓冲问题的人：**

试着`echo ob_get_level()`看看你在哪一层。如果此函数返回的内容多于`0`您仍在缓冲区内。

要关闭所有图层以防止出现问题，请执行以下操作：

```
while (@ob_end_clean()) {  
    // do nothing   
} 
```

这将删除所有图层。

在此之后，您可以继续前进 - 即使只使用`flush()`而不是`ob_flush()`.

您提到它可以在您的其他服务器上运行。您是否像[这里](https://stackoverflow.com/questions/7908299/ob-flush-not-working)一样激活了 gzip 压缩？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T22:54:29.680

我猜在`ob_end_clean`. 使用`die`//可以正常工作`exit`（`header`意味着 HTML 中没有任何内容）。我刚刚遇到了类似的问题，但得到了解决方案。输出缓冲处理到客户端的输出，该函数会清除所有内容，直到它被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T15:36:03.950

The code that works fine for me is:

```
<?php

include "../connect/connectdb.php";

$txtIdCaso = $_GET['WWW_id_caso'];

$sql = "SELECT * FROM caso_solicitud
        WHERE id_caso = '".$txtIdCaso."'";

$result = mysqli_query($conn, $sql);
$row    = mysqli_fetch_array($result);

header('Content-Description: File Transfer');
header('Content-type: "'.$row['tipo_archivo'].'"');
header('Content-Disposition: attachment; filename="'.$row['nombre_archivo'].'"');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0'); 
header('Pragma: public');
header("Content-length: ".$row['longitud_archivo']);

while (@ob_end_clean()) {  
// do nothing   
}

die($row['doc_solicitud']);
?> 
```

Hope that can help. I tested several types of formats and works fine.

Greetings.

# windows - 如何嗅探本地流量

> ID：10352966
> 
> 赞同：3
> 
> 时间：2012-04-27T14:57:06.430
> 
> 标签：windows, sniffer

我有调用应用程序 B 的 WAR 应用程序 A。我想嗅探它们之间的流量。我该怎么做？操作系统：Windows

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-27T15:02:05.837

Wireshark (http://www.wireshark.org/) 是嗅探网络数据包的有用工具。我昨天遇到了这种问题（尽管它是在 Windows 应用程序和网络上的设备之间）。在那之前我从未使用过 Wireshark，但我能够在几分钟内使用它并读取数据。但是，我还没有在同一台机器上的两个应用程序之间尝试过。

# cocoa - 在 NSCell (NSTextAttachmentCell) 上处理鼠标

> ID：10352967
> 
> 赞同：0
> 
> 时间：2012-04-27T14:57:07.680
> 
> 标签：cocoa, nstextview, nscell

无法弄清楚如何处理鼠标移动`NSCell`（或`NSTextAttachmentCell`）。可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T01:34:04.567

您可以在包含单元格的视图中添加一个跟踪区域，并在该视图中实现 mouseEntered: 和 mouseExited: （如果您也需要，还可以使用 mouseMoved）。这是一个示例，我在按钮上添加了一个跟踪区域（按钮是按钮的 IBOutlet）。我在视图的 awakeFromNib 方法中添加了这段代码：

```
NSTrackingArea *buttonArea = [[NSTrackingArea alloc] initWithRect:self.button.frame options:NSTrackingMouseEnteredAndExited|NSTrackingMouseMoved|NSTrackingActiveInActiveApp owner:self userInfo:nil];
    [self addTrackingArea:buttonArea]; 
```

当光标进入按钮的框架时，这将导致视图接收 mouseEntered、mouseMoved 和 mouseExited 消息。

# apache-flex - 使用 mxmlc (Ant) 构建 swf - 代码未更改时编译

> ID：10352969
> 
> 赞同：0
> 
> 时间：2012-04-27T14:57:17.470
> 
> 标签：apache-flex, ant, mxmlc

我正在使用 mxmlc 任务为我们的项目生成 swf。问题是，即使我不更改任何 flex 代码，swf 每次都会编译，这是一个相对冗长的过程。

有谁知道如何避免它？有什么解决办法吗？

在此先感谢，米拉尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:49:14.440

[增量编译](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7ed3.html)应该是您正在寻找的。当您从 Flash Builder 编译时它默认打开，但当您从命令行或 Ant 编译时它不打开。要点是，随着增量编译，mxmlc 检查您的代码以查找更改，并且只编译它需要的内容。

# c# - 是否可以加快这种递归目录方法的速度？

> ID：10352972
> 
> 赞同：2
> 
> 时间：2012-04-27T14:57:31.393
> 
> 标签：c#

我在控制台应用程序中列出所有目录，但它需要永远，超过 10 分钟以上（假设在这里，它可能需要超过 10 分钟），我知道有很多目录，但是 10 分钟以上太长了开始？

```
class Program
    {
        static void Main(string[] args)
        {
            DirSearch(@"c:\");

            Console.ReadKey();
        }

        static void DirSearch(string sDir)
        {
            try
            {
                foreach (string d in Directory.GetDirectories(sDir))
                {
                    Console.WriteLine(d);
                    DirSearch(d);
                }
            }
            catch (System.Exception excpt)
            {
                Console.WriteLine(excpt.Message);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T15:00:14.300

是的 - 不要手动使其递归。这是内置的，您可以使用`SearchOption.AllDirectories`它在搜索中包含所有子目录：

```
foreach (string d in Directory.GetDirectories(sDir, "*.*", SearchOption.AllDirectories))
{
    Console.WriteLine(d);
} 
```

或者使用[`Directory.EnumerateDirectories`](http://msdn.microsoft.com/en-us/library/dd383462.aspx)which 在找到目录名称时生成目录名称，而不是先将所有目录名称放入数组中：

```
foreach (string d in Directory.EnumerateDirectories(sDir, "*.*", SearchOption.AllDirectories))
{
    Console.WriteLine(d);
} 
```

# php - 如何从批处理文件执行codeigniter控制器

> ID：10352974
> 
> 赞同：2
> 
> 时间：2012-04-27T14:57:40.813
> 
> 标签：php, codeigniter, batch-file

我想安排一个任务在 php 中的某个时间运行，我正在使用 codeigniter 框架。所以想编写一个批处理文件来在给定的控制器中执行给定的功能。我已经为简单的 php 文件编写了一个批处理文件，它可以正常工作，但在编写 codeigniter 时出错。

下面是我的codeigniter批处理文件

C:\xampp\php\php.exe -f C:\xampp\htdocs\DatabaseServices\index.php\controller_name\FUNCTION_NAME 它给出错误“无法加载文件”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T15:05:36.900

请参阅[CLI 界面上的 Codeigniter 文档](http://codeigniter.com/user_guide/general/cli.html)。

> 现在通常您会使用类似于以下的 URL 访问您的站点：example.com/index.php/tools/message
> 
> 相反，我们将在 Mac/Lunix 中打开终端或在 Windows 中转到 Run > "cmd" 并导航到我们的 CodeIgniter 项目：

```
$ cd /path/to/project;
$ php index.php tools message 
```

确保您为控制器发送正确的参数。

在你的情况下：

```
cd C:\xampp\htdocs\DatabaseServices
C:\xampp\php\php.exe index.php controller_name FUNCTION_NAME 
```

# ios - 使用 Picker 视图的 Cocos2d 主菜单

> ID：10352975
> 
> 赞同：0
> 
> 时间：2012-04-27T14:57:45.797
> 
> 标签：ios, cocos2d-iphone

我正在创建一种游戏/学习应用程序，其中一部分要求您选择要学习的类别，然后选择一个子类别。

就像数学>代数一样。

我真的希望这是两个紧挨着的选择器视图，所以基本上第一个选择器具有数学、科学等大类别。下一个选择器将具有每个大类别的子类别，并且会根据当前在主类别上选择的类别而改变。

但是，我不知道如何在 Cocos2d 中执行此操作，正如我在其他问题中所说的那样，我对 iOS 还很陌生。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:05:44.157

请参阅 Cocos 2d 论坛上关于 hm50 编写的用于执行您需要的功能的 CGPicker 类的此线程。应该得到你想要的。

[http://www.cocos2d-iphone.org/forum/topic/10160](http://www.cocos2d-iphone.org/forum/topic/10160)

然后，您需要做的就是识别选择并根据选择的内容更改第二个选择器的内容。

# java - 带有换行符的 JFree 图表图例

> ID：10352977
> 
> 赞同：1
> 
> 时间：2012-04-27T14:57:54.013
> 
> 标签：java, jakarta-ee, jfreechart

我需要在 JFree Chart 的一些图例中添加折线。我有一些 316 个字符的图例，每 80 个字符需要打破一次。最后，我将有 4 行。

无论如何，我尝试使用“\n”、“\u2424”和“”。它什么也没做。（来自[http://www.jfree.org/forum/viewtopic.php?f=3&t=10226](http://www.jfree.org/forum/viewtopic.php?f=3&t=10226) & [http://www.jfree.org/forum/viewtopic.php?f=3&t=22417](http://www.jfree.org/forum/viewtopic.php?f=3&t=22417)）

~~我能找到的唯一解决方案（但我希望可以避免它，因为我希望它是动态完成的）是为每个图例固定一个宽度，所以它应该根据需要中断。~~ **编辑**：那甚至没有用。

我正在使用 jFree Chart 0.9.20

* * *

**编辑**

目前，有一个小传说，这就是我所拥有的： ![好的](../Images/71202346ddbcbeaa20357614f2aa3fec.png)

很好，但是当我有我的长传说时： ![问题 ：'（](../Images/bb55b4a63440ff6f14296f3f68e2b4d7.png)

对于最后一张图片，我记录了我的图例和断线，但它们没有出现在 jFree Chart 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T02:30:22.213

需要考虑的两种选择：给定一个缩写的图例显示字符串，

*   用于`setLegendItemToolTipGenerator()`将完整、完整的字符串显示为工具提示。

    ```
    renderer.setLegendItemToolTipGenerator(
        new StandardXYSeriesLabelGenerator("Legend {0}")); 
    ```

*   使用`addChartMouseListener()`,[此处](https://stackoverflow.com/a/8219445/230513)显示, 并将图例上的鼠标移动事件向前移动到相邻的文本组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:09:15.997

好吧，我让它按照我的客户的要求工作。

首先，您需要创建一种新的`Legend`，例如命名`MyLegend`（但请不要在现实世界中那样命名）。

该类需要扩展`Legend` 和实现`Serializable`，方法相同`StandardLegend`。

老实说，我什至将整个复制/粘贴`StandardLegend`到`MyLegend`. 然后，您可以将标准图例修改为您的自定义图例。

为了我的需要，我改变了：

*   `draw()`用于整个 Legend 组的高度和宽度计算
*   `drawSeriesElements()`拆分图例的标签并将每一行绘制在另一行之下。

* * *

```
// Multi line management for Legend
String[] multiline = item.getItem().getLabel().split(System.getProperty("line.separator"));
for(int j = 0; j<multiline.length; j++) {
    RefineryUtilities.drawAlignedString(multiline[j], g2,
        (float) item.getLabelPosition().getX(), (float) item
        .getLabelPosition().getY() + g2.getFontMetrics().getHeight()*j, TextAnchor.CENTER_LEFT);
} 
```

*   `createDrawableLegendItem()`计算每个项目的宽度和高度。因为，现在图例是多行的，所以一个项目的每一行的宽度与其他项目的宽度不同。我们需要找到最长的一个来定义项目的实际宽度。身高也是一样。现在它是多行的，所以它需要计算它需要多少行才能知道项目的真实高度。

或者，您也可以更改`drawLegendTitle()`为多行。

当你想配置那个类时，你需要将它应用到你的图表上。

所以，你照常做：

```
JFreeChart chart = new JFreeChart(...);
chart.set ... // apply your series and options

MyLegend legend = new MyLegend();
legend.set... // apply your legend options if applicable
chart.setLegend(legend); 
```

就是这样。

结果 ：

![最后结果](../Images/1f317609718b077920da7e1b0de608c5.png)

# ruby-on-rails - 如果电子邮件地址中有加号，为什么我会收到一封空白电子邮件

> ID：10352980
> 
> 赞同：1
> 
> 时间：2012-04-27T14:58:04.060
> 
> 标签：ruby-on-rails, email, smtp, sendmail, sendgrid

在我的 Rails 应用程序中，我们向用户发送电子邮件，其中一些是空白的。到目前为止，似乎只有当收件人电子邮件中包含加号 (+) 时才会发生这种情况（some+address@domain.com）。当我使用sendmail在本地测试时，如果有加号，电子邮件甚至不会出去。在生产中，通过 SendGrid 使用 SMTP，电子邮件通过但它是空白的。这是预期的行为吗？有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-15T20:41:15.810

发送到 some+address@somain.com 的电子邮件应该发送到 some@domain.com，因为 + 号将真实地址与内部重新路由的地址分开。

另外，减号和感叹号传统上具有特殊含义，用于在通过正常电子邮件服务交付电子邮件后更明确地处理电子邮件。

# php - jquery在同一页面中加载

> ID：10352983
> 
> 赞同：0
> 
> 时间：2012-04-27T14:58:29.307
> 
> 标签：php, jquery, load

我需要在同一页面中使用 jquery 加载功能。例如：

```
echo"

<table style='border:1px solid #666;'>
<tr>";
do {
printf("

<td><a data-val='%s' id='ip'>%s</a><br><hr></td>

",$showrequestarr['ip'],$showrequestarr['ip']);
}
while ($showrequestarr = mysql_fetch_array ($showrequest));

/****************************chat*****************************/
if (isset($_REQUEST['userip'])) {
  $showresult = mysql_query("SELECT text FROM message WHERE userip = '$userip'");
  $showarray = mysql_fetch_array ($showresult);
} 
```

这是我的 php 页面，我想在单击加载函数后使用同一页面中的加载函数发送请求

```
$("a").click(function() {
  var ip = $(this).data('val'); 
  $("#change").load('operator.php' {"userip":ip} );  
}); 
```

这是jquery代码，我不知道在这个时刻如何使用加载功能....请帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:03:04.167

您在 url 和参数之间缺少逗号。

```
$(function(){    
   $("a").click(function() {
      var ip = $(this).data('val'); 
      $("#change").load('operator.php', {"userip":ip} );  
   });
}); 
```

# c++ - 缓冲区大小较小的 XAudio2 延迟

> ID：10352987
> 
> 赞同：0
> 
> 时间：2012-04-27T14:58:39.073
> 
> 标签：c++, audio, xaudio2

我正在写一个视频播放器。对于音频部分，我使用的是 XAudio2。为此，我有单独的线程正在等待 BufferEnd 事件，然后用新数据填充缓冲区并调用 SubmitSourceBuffer。问题是如果缓冲区大小很小（1024 字节），XAudio2（驱动程序或声卡）在播放下一个缓冲区之前会有很大的延迟。我进行了测量，XAudio 播放这样的块需要长达两倍的时间。（48khz 原始 2 通道 pcm 的 1024 字节块应在近 5 毫秒内播放，但在我的计算机上播放时间长达 10 毫秒）。如果我使缓冲区 4kbytes 或更多，几乎没有延迟。我需要这么小的缓冲区才能与视频时钟或外部时钟同步（就像 ffplay 一样）。如果我的缓冲区太大，那么最终用户会因为同步的东西而在输出中听到很多噪音。

此外，我已经对我的所有功能进行了测量，这些功能正在解码和同步音频或其他任何可能阻塞或产生延迟的功能，它们需要 0 或 1 毫秒来执行，所以它们不是 100% 的问题。

有谁知道它会是什么以及为什么会发生？任何人都可以检查他是否有与小缓冲区相同的延迟问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:13:13.710

我在使用 .wav 文件时没有遇到任何延迟或暂停。如果您使用的是 mp3 格式，它可能会在压缩操作期间在声音的开头和结尾添加静音，从而导致您的声音播放延迟。[有关更多信息，请参阅此帖子](http://www.scirra.com/forum/xaudio2-support-for-loop-points-for-sound-files_topic38445.html)。

# c++ - 禁用活动的计时器

> ID：10352991
> 
> 赞同：0
> 
> 时间：2012-04-27T14:58:47.887
> 
> 标签：c++

我正在使用该`setitimer`函数来设置`ITIMER_VIRTUAL`计时器，使用指向 some 的指针`struct itimerval`。这是一个虚拟计时器（仅在进程具有控制权时运行）并`SIGVTALRM`在它达到零时发送一个信号。我的问题是 - 调用后`setitimer`，有什么方法可以禁用活动计时器，所以当计时器完成时这个信号不会消失？还是现在忽略它的唯一方法是设置一个信号掩码命令程序忽略这个信号？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:01:27.263

调用`settimer`并设置`it_value`为`0`停止计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:05:35.863

根据手册页，只需`setitimer()`再次调用，使用相同的计时器句柄并将`it_value`itimerval 结构的字段设置为零。

您可以立即禁用它：

> 无论 it_interval 的值如何，将 it_value 设置为 0 将禁用计时器。

或者在它下一次触发之后：

> 将 it_interval 设置为 0 将在下一次到期后禁用计时器（假设 it_value 非零）。

# android - 调用谷歌地方API

> ID：10352993
> 
> 赞同：1
> 
> 时间：2012-04-27T14:58:50.277
> 
> 标签：android

```
//here is my code
public void performSearch() throws Exception {
        try {
            System.out.println("Perform Search ....");
            System.out.println("-------------------");
            HttpRequestFactory httpRequestFactory = createRequestFactory(transport);
            HttpRequest request = httpRequestFactory.buildGetRequest(new GenericUrl(PLACES_SEARCH_URL));
            request.getUrl().put("key", API_KEY);
            request.getUrl().put("location", latitude + "," + longitude);
            request.getUrl().put("radius", 500);
            request.getUrl().put("sensor", "false");

            if (PRINT_AS_STRING) {
                System.out.println(request.execute().parseAsString());
                Log.d("--->",request.execute().parseAsString());
            } else {

                PlacesList places = request.execute().parseAs(PlacesList.class);
                System.out.println("STATUS = " + places.status);
                for (Place place : places.results) {
                    System.out.println(place);
                    Log.d("--->",place.toString());
                }
            }

        } catch (HttpResponseException e) {
            System.err.println(e.getResponse().parseAsString());
            throw e;
        }
    }
    public static HttpRequestFactory createRequestFactory(final HttpTransport transport) {

          return transport.createRequestFactory(new HttpRequestInitializer() {
           public void initialize(HttpRequest request) {
            GoogleHeaders headers = new GoogleHeaders();
            headers.setApplicationName("MyLocationHelper");
            request.setHeaders(headers);
           JsonHttpParser parser = null;
            parser.getJsonFactory();
           request.addParser(parser);
           }
        });
    } 
```

我想开发一个应用程序来在地图上显示我当前的位置，而不是我想搜索附近的地方。在这个阶段，我可以在地图上绘制我当前的位置，但我无法从 google places api 获得响应。

performSearch() 方法调用 google places api。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:48:38.270

查看以下链接：-> 他们使用 HTTP 请求 + JSON 解析工作

[在 Android 中解析 Google Places JSON 数据？](https://stackoverflow.com/questions/11549993/parsing-google-places-json-data-in-android)

# c# - 双缓冲winforms面板问题

> ID：10352994
> 
> 赞同：2
> 
> 时间：2012-04-27T14:58:57.600
> 
> 标签：c#, winforms

我正在尝试双缓冲一个 winforms 面板元素。我使用面板来绘制形状。现在，我有一些类似的东西：

```
class BufferPanel : Panel {
    public BufferPanel() {
        this.DoubleBuffer = true;
    }
} 
```

鼠标移动触发面板 Refresh()。触发Paint时会绘制一些形状这是我遇到问题的地方。这些形状仅在鼠标移动触发刷新后的一瞬间绘制，然后完全消失。就好像它们只绘制在一个缓冲区或类似的东西上。这似乎只发生在画图上。例如，我可以将形状复制/粘贴到鼠标移动方法中，一切都会正常工作。关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:22:32.963

从评论发表：

> 听起来您没有使用来自 Paint 事件或 OnPaint 覆盖的 e.Graphics 对象。避免使用 CreateGraphics。

# php - 如果另一个字段等于 5 或 10，则不要乘以一个字段

> ID：10352995
> 
> 赞同：1
> 
> 时间：2012-04-27T14:59:02.397
> 
> 标签：php, mysql

我正在运行此查询，该查询正在填充我的临时表，然后从中导出。priceSingle 只需将票价加倍即可计算。但是，对于某些行，无论如何，类别都是单程票价，所以我不想加倍。查询实际上嵌入在 PHP 中的字符串中，但 SQL 看起来像：

```
INSERT INTO temp
    SELECT cruises.code AS sailingId, live, 'USD', 'optioncode', 'rateOptionName', '2',
           category AS cabinCategory, fare*2 AS priceSingle, fare AS priceDouble,
           supplements_usa.adult AS priceAdditional
      FROM fares_usa, supplements_usa, cruises
     WHERE fares_usa.cruise_id = supplements_usa.cruise_id
       AND cruises.id = fares_usa.cruise_id AND cruises.live = 'Y' 
```

`fare*2`当`category`等于 5 或​​ 10时，我怎样才能避免这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T15:01:02.957

```
CASE WHEN category = 5 OR category = 10 THEN fare ELSE fare * 2 END 
```