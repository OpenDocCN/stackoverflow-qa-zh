# StackOverflow 问答 11813000-11813999

# android - 如何从 AndEngine - Android 内部访问 Internet

> ID：11813004
> 
> 赞同：0
> 
> 时间：2012-08-05T00:20:00.367
> 
> 标签：android, android-webview, andengine, httpconnection, android-networking

这是一个简单的问题，但我无法弄清楚：如何从使用 AndEngine (AnalogOnScreenControls) 的应用程序访问互联网。我的活动扩展`BaseGameActivity`。具体来说，我想打开一个 URL 连接。我需要做的就是执行 URL；我不想以任何方式查看它。我应该通过`WebView`, `HTTPConnection`, `openStream()`-- 来做吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:54:21.683

```
Uri address = Uri.parse("http://your.link.com");
Intent openlink = new Intent(Intent.ACTION_VIEW, address);
yourActivity.startActivity(openlink); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:08:38.180

问题解决了！我必须在与主线程分开的线程上运行所有网络操作（否则它将引发 NetworkOnMainThread 异常）。我不知道为什么没有其他工作，但这成功了！在这里，我使用我想要执行的操作创建一个新线程，然后在处理完异常后启动它。我在[这里找到了答案](http://android-developers.blogspot.com/2009/05/painless-threading.html)

```
new Thread(new Runnable() {
public void run() {
    HttpClient httpClient = new DefaultHttpClient();
    HttpContext localContext = new BasicHttpContext();
    HttpGet httpGet = new HttpGet("your_url");
try {
    HttpResponse response = httpClient.execute(httpGet, localContext);
} catch (ClientProtocolException e) {
    e.printStackTrace();
    } catch (IOException e) {
    e.printStackTrace();
}
}
}).start(); 
```

# url-rewriting - 我怎么知道安装了哪个版本的 IIS7 URL Rewrite 模块

> ID：11813006
> 
> 赞同：30
> 
> 时间：2012-08-05T00:21:02.337
> 
> 标签：url-rewriting, iis-7

我在 IIS7 中创建了一个重写规则，该规则使用条件元素中的 trackAllCaptures="false" 属性并使用 outboundRules。在我的测试系统上一切正常，但是当我将这些规则部署到 GoDaddy 时，我收到错误：

```
Unrecognized attribute 'trackAllCaptures' 
```

如果我包含 outboundRules 节点，我会从服务器收到 500 错误。我与他们的支持进行了交谈，他们坚持认为他们支持 URL 重写模块的 2.0 版本。我的问题是如何验证或与他们沟通如何检查此模块的版本？除了尝试安装它来检查版本之外，我找不到任何方法。

我正在尝试重写 ASP.Net 应用程序而不是 WordPress 的 URL，以便从 URL 中删除子文件夹，这在他们的多域托管中是一个非常普遍的问题。我使用的示例位于此处：[http ://weblogs.asp.net/owscott/archive/2010/05/26/url-rewrite-multiple-domains-under-one-site-part-ii.aspx](http://weblogs.asp.net/owscott/archive/2010/05/26/url-rewrite-multiple-domains-under-one-site-part-ii.aspx)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-05T02:04:17.253

Url Rewrite 的二进制文件位于：

```
%SystemRoot%\system32\inetsrv\rewrite.dll

```

Url Rewrite 1.1 的文件版本为`7.1.490.43`.
Url Rewrite 2.0 的文件版本为`7.1.761.0`or `7.1.871.0`（可能还有其他版本，但这是我所知道的两个不同版本）。

如果您没有控制台访问权限来验证版本号，请尝试在一个简单的网页中运行以下代码：

```
Assembly a = Assembly.Load("Microsoft.Web.Iis.Rewrite, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35");
Response.Write(a.FullName); 
```

如果安装了 UrlRewrite 2.0，您将看到如下内容：

```
Microsoft.Web.Iis.Rewrite，版本=1.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35

```

如果不是，那么您将抛出异常：

> 无法加载文件或程序集“Microsoft.Web.Iis.Rewrite，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

您也可以将它们指向此文档页面：

> [跨条件跟踪捕获组](http://learn.iis.net/page.aspx/665/url-rewrite-module-20-configuration-reference/#Tracking_capture_groups_across_conditions_)

这一段很清楚这`trackAllCaptures`是一个 2.0 的特定设置，如果它不起作用，那么 2.0 肯定没有安装：

> 在 URL 重写模块 2.0 中，可以更改捕获组的索引方式。在集合上启用`trackAllCaptures`设置`<conditions>`使捕获组形成所有匹配的条件，以通过反向引用获得。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-09-29T08:11:10.853

当然，@Kev Answer 帮助我识别了版本，但似乎还有其他选择。我只是检查控制面板>已安装的程序。在那里我找到了版本安装。如果已安装，则检查版本并与@Kev 答案进行比较以了解它是版本 1 还是版本 2

[![控制面板 URL 重写模块图像](../Images/3443090111de0ac928f57fcdb796fa02.png)](https://i.stack.imgur.com/u3d9l.png)

# scala - 如何找出 sbt 从哪里解决依赖关系？

> ID：11813007
> 
> 赞同：9
> 
> 时间：2012-08-05T00:21:07.307
> 
> 标签：scala, sbt

我正在使用 sbt `0.12 RC2`。

我的项目有一堆库依赖项，其中一些会触发其他依赖项。其中一些依赖项是非托管的（在 中`lib/`），一些在我的本地`.ivy2`存储库中，一些在各种远程存储库中找到。

我正在寻找一个`sbt update-verbose`或类似的东西，当它说：

```
[info] Resolving com.nicta#sbt-scoobi;0.0.1 ...
[info] Resolving org.scala-lang#scala-library;2.9.2 ...
[info] Resolving org.apache.opennlp#opennlp-maxent;3.0.1-incubating ...
[info] Resolving jwnl#jwnl;1.3.3 ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-06-25T12:03:11.917

`sbt`生成关于如何在`target/resolution-cache/reports`. 在 Web 浏览器中打开其中一个`.xml`文件，您应该会看到所需的所有详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-18T13:46:31.660

我不确定这是否适用于 sbt 0.12.x，但在 0.13.x 中，如果您可以在`~/.ivy/cache/...`目录结构中找到您的库所在的位置，则库的父目录有一个名为的文件`ivydata-x.y.z.properties`，其中包含它找到的 URL依赖。

例如，如果您缓存`akka-streams`如下所示：

```
.ivy2
└── cache
    └── com.typesafe.akka
        └── akka-stream_2.11
            ├── docs
            │   └── akka-stream_2.11-2.4.14-javadoc.jar
            ├── jars
            │   └── akka-stream_2.11-2.4.14.jar
            └── srcs
                └── akka-stream_2.11-2.4.14-sources.jar 
```

你应该找到一个像这样的文件，其中包含下载 URL：

```
.ivy2
└── cache
    └── com.typesafe.akka
        └── akka-stream_2.11
            └──ivydata-2.4.14.properties 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T03:42:12.933

您可以`show compile:dependency-classpath`用来显示依赖项在哪里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T16:25:46.453

**运行last**可以调出上一个任务的详细信息

 **详细信息和更多信息在这里：

[配置和使用日志记录](http://www.scala-sbt.org/0.13.0/docs/Howto/logging.html)**

# codeigniter - 在 CodeIgniter 中为特定的帮助程序/库禁用错误日志记录

> ID：11813009
> 
> 赞同：1
> 
> 时间：2012-08-05T00:21:16.760
> 
> 标签：codeigniter, logging, mpdf

我正在使用 mPDF 类从 HTML 生成 PDF。

虽然 PDF 完全按照它们应有的方式显示，但我的 CodeIgniter 错误日志中充满了错误通知，这些错误通知似乎是由于 mPDF 中的一些错误造成的。

由于这些通知是无害的，并且 PDF 输出完美，我只想在运行此类时专门禁用 CodeIgniter 错误日志记录。

但我还没有找到一种方法来做到这一点。

这是我的代码：

控制器

```
$this->load->helper('mpdf');
mpdf($html, $filename); 
```

助手（mpdf_helper.php）

```
function mpdf($html, $filename) 
{
    $CI =& get_instance();
    $CI->config->set_item('log_threshold', 0);
    include('mpdf/mpdf.php');

    $mpdf=new mPDF('', 'letter');
    $mpdf->SetHTMLHeader('powered by example.com');
    $mpdf->WriteHTML($html, 0);
    $mpdf->Output($filename, 'I');
} 
```

如您所见，我正在尝试手动将配置设置为`log_threshold`to `0`，但这并不能阻止错误记录。

仅供参考我`index.php`有

```
define('ENVIRONMENT', 'production'); 
```

设置`error_reporting(0)`。

你知道我应该做些什么来阻止 CodeIgniter 仅在我运行 mPDF 时记录错误吗？

错误示例

```
ERROR - 2012-08-04 23:03:59 --> Severity: Notice  --> Undefined index: direction /var/www/vhosts/asd.com/httpdocs/application/helpers/mpdf/mpdf.php 21103

ERROR - 2012-08-04 23:06:07 --> Severity: Notice  --> Undefined index: MARGIN-TOP /var/www/vhosts/asd.com/httpdocs/application/helpers/mpdf/mpdf.php 17271 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T13:43:29.033

这是因为 codeigniter 的错误日志与[set_error_handler](http://php.net/manual/en/function.set-error-handler.php)挂钩，无论 error_reporting 值是什么，php 都会触发处理程序。正如php手册所说：

> ...但是您仍然能够读取 error_reporting 的当前值并采取适当的行动。

CI 的默认错误处理程序不会为日志记录（但会为错误显示）执行此操作，如果 CI 的内部错误级别需要日志记录，则[只会记录所有进入的内容。](https://github.com/bcit-ci/CodeIgniter/blob/4b838af40d77684539dd40461bd92e6e453fe675/system/core/Exceptions.php#L102)（`log_threshold`配置值为 1，[见](https://github.com/bcit-ci/CodeIgniter/blob/4b838af40d77684539dd40461bd92e6e453fe675/system/core/Common.php#L592)php 错误处理程序调用的函数。）

如果你想让 CI 记录器尊重 error_logging 级别，你可以使用如下[标准方法](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)扩展 CI_Exception 类：

```
class MY_Exceptions extends CI_Exceptions {
    function log_exception($severity, $message, $filepath, $line) {
        $current_reporting = error_reporting();
        $should_report = $current_reporting & $serverity;

        if ($shoud_report) {
            // call the original implementation if we should report the error
            parent::log_exception($severity, $message, $filepath, $line);
        }
    }
} 
```

一旦你完成了这个，你就可以在你的库调用中或在你的库调用中摆弄error_reporting。

# jquery - 使用表单数据创建数组，对数据进行分组和排序

> ID：11813010
> 
> 赞同：0
> 
> 时间：2012-08-05T00:21:25.573
> 
> 标签：jquery

我有一些输入字段，而不是我想要的数组，以便我可以在页面上的表格中查看它们。我已经能够使用[.serializeArray()创建一个数组](http://api.jquery.com/serializeArray/)

在[这个小提琴](http://jsfiddle.net/aaronk85/VNSam/3/)中，我已经能够输出我的数组，但是我希望数据显示在我在小提琴底部硬编码的表格中，它将汤姆和杰瑞的所有实例分组到每个 id 的一行中. 累积该 ID 的所有销售值等。我想按总销售价格列对其进行排序。我知道执行此操作的服务器端技术，但是在这种情况下，我正在寻找 jquery 解决方案。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:06:37.433

我假设您可以依赖隐藏的输入字段，这些字段总是以四个一组的形式出现，每个组都有一个`id[]`, `name[]`, `sales[]`& `price[]`，否则（显然）您无法分辨哪些字段是相关的。因此，不是使用`.serializeArray()`返回包含所有值的单个数组的 use ，而是将 id 放在它们自己的数组中，将名称放在它们自己的数组中，等等。也许是这样的：

```
function showValues() {
    function getVal(el, i) {
        return el.value;
    }
    var ids = $.map($('input[name="id[]"]'), getVal),
        names = $.map($('input[name="name[]"]'), getVal),
        sales = $.map($('input[name="sales[]"]'), getVal),
        prices = $.map($('input[name="price[]"]'), getVal),
        data = {},
        i,
        $results = $("#results");

    for (i = 0; i < ids.length; i++) {
        if (!data[ids[i]]) {
            // if current id is new add a record for it:
            data[ids[i]] = {
                "id":ids[i],"name":names[i],"sales":+sales[i],"price":+prices[i]
            };
        } else {
            // otherwise add to existing record's totals
            data[ids[i]].sales += +sales[i];
            data[ids[i]].price += +prices[i];
        }
    }
    // data object now contains the details for each salesman,
    // so turn it into an array to allow sorting:
    data = $.map(data, function(val, key) { return val; });
    data.sort(function(a,b) { return a.price - b.price; });

    // now output table - assume there's already a table element with headings
    $.each(data, function(i, val) {
        var $tr = $("<tr></tr>").attr("data-id", val.id).appendTo($results);
        $("<td></td>").text(val.name).appendTo($tr);
        $("<td></td>").text(val.sales).appendTo($tr);
        $("<td></td>").text(val.price).appendTo($tr);
        $("<td></td>").text(val.price / 10).appendTo($tr);
    });
} 
```

工作演示：http: [//jsfiddle.net/nnnnnn/VNSam/5/](http://jsfiddle.net/nnnnnn/VNSam/5/)

作为解释，这一行：

```
ids = $.map($('input[name="id[]"]'), getVal) 
```

...说用 获取所有输入`name="id[]"`，并将生成的 jQuery 对象传递给该[`$.map()`方法](http://api.jquery.com/jquery.map/)，以便我们可以取回一个仅包含 id 值的数组 - 您可以看到这`getVal()`只是一个简单的函数，可以做到这一点。我为`name[]`其他领域做同样的事情。

另请注意，当从输入中检索时，销售额和价格值是字符串，因此我使用[一元加号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)将它们转换为数字。

# php - 创建链接列表

> ID：11813011
> 
> 赞同：0
> 
> 时间：2012-08-05T00:21:32.740
> 
> 标签：php

我想创建一个 PHP 文件来检查当前目录中是否有任何以 .jpg 结尾的文件，然后我想生成一个指向所有这些文件的链接页面。

```
<?php 
$files = glob("./*.jpg");
if ($files) {
foreach ($files as $file) {
?>
 <a href=<?php echo $file;?>"></a>
<?php }
?> 
```

这就是我所拥有的，它什么也没做，我不太清楚为什么。我对学习 php 很陌生，所以在这一点上我并不擅长。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T00:24:42.753

您的锚元素需要在其中包含一些子元素，否则您的浏览器中将不会显示任何内容：

```
<?php 
$files = glob("./*.jpg");
foreach ($files as $file) {
    echo '<a href="'. $file . '">' . $file . '</a>';
} 
```

您还*需要*该`if`语句，因为`glob`如果没有找到文件，只需返回一个空数组，但如果需要，您可以将其添加回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:27:52.107

您缺少一个右大括号。`}`在代码末尾添加另一个。打开它并查看源代码，您应该会看到所有链接。

# actionscript-3 - ActionScript3.0 DragAndDrop with parent.addChild(this);

> ID：11813014
> 
> 赞同：0
> 
> 时间：2012-08-05T00:22:02.440
> 
> 标签：actionscript-3, flash

这是我的代码：

```
package net.draganddrop
{
import flash.display.MovieClip;
import flash.event.MouseEvent;

public function object extends MovieClip
{
public function object()
{
buttonMode = true;
addEventListener(MouseEvent.MOUSE_DOWN, down);
}
protected function down(event:MouseEvent):void
{
parent.addChild(this);// I HAVE A PROBLEM WITH THIS CODE
startDrag();
}
}
} 
```

代码 parent.addChild(this); 假设将对象放在另一个对象的顶部，就像将它移动到其他对象的前面一样，但是当我放置该代码并开始拖动它时，它也会复制该对象的次数与拖动它的次数一样多。当我拖动它时，我不知道有任何其他代码可以使对象出现在其他对象的前面。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:35:01.563

据我了解，对象复制本身，您正在拖动所有对象。所以请给我们更好的解释。如果这是您必须使用 stopDrag 的问题，因为当您按下按钮时 startDrag 方法将启动，但当您释放按钮时它仍会运行。

为了阻止这种情况，您必须添加一些小代码，所以就在这里。

它还必须是：

公共类对象扩展了 MovieClip 不是公共函数对象扩展了 MovieClip

试试这个代码：

```
package net.draganddrop
{
     import flash.display.MovieClip;
     import flash.event.MouseEvent;

     public class object extends MovieClip
     {
         public function object()
         {
             buttonMode = true;
             addEventListener(MouseEvent.MOUSE_DOWN, down);
             addEventListener(MouseEvent.MOUSE_UP, up);
         }
         protected function up(event:MouseEvent):void
         {
             stopDrag();
         }
         protected function down(event:MouseEvent):void
         {
             parent.addChild(this);
              startDrag();
         }
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:23:28.457

尝试 ：

```
parent.setChildIndex(this,parent.numChildren-1); 
```

或者

```
parent.addChildAt(this,parent.numChildren-1); 
```

# spring - @Transactional 在 Spring 3 中是否自动回滚事务？

> ID：11813031
> 
> 赞同：7
> 
> 时间：2012-08-05T00:25:28.433
> 
> 标签：spring, unit-testing, transactions

我正在作为单元测试运行，即使我`@rollback`在 spring 3.1 中不使用它也会自动返回。我的测试看起来像

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:application-context.xml" })
public class PersonServiceTest {

    @Test
    @Transactional
    public void savePerson() {
            Person person = createPerson();
            personService.savePerson(person);
    }
} 
```

回滚行为是默认设置的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-05T02:13:00.367

默认情况下`SpringJUnit4ClassRunner`会自动回滚事务。

要消除这种影响，`@TransactionConfiguration(defaultRollback=false)`请在您的测试类或`@Rollback(false)`每个测试上使用。

# c++ - C ++继承没有析构函数的（公共）类会是一个糟糕的设计吗

> ID：11813034
> 
> 赞同：3
> 
> 时间：2012-08-05T00:26:30.083
> 
> 标签：c++, destructor

子类继承没有析构函数的父类（只有编译器生成的默认值）是一个糟糕的设计吗？有些书声称它不好，但没有提到在什么情况下它会。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T00:36:56.200

通过指向没有虚拟析构函数的基类型的指针删除派生类型的对象是**未定义的行为**。如果您希望这样做，通常如果您希望您的类被扩展，您应该提供一个`virtual`析构函数。

```
 struct A
 {};
 struct B : A
 {}

 //...
 A* a = new B;
 delete a;       //undefined behaviour 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T00:32:42.707

如所问，这可能根本没有问题，不。但是您的主题行说“析构函数”，而您的问题说“构造函数”，所以我不确定您的意思。如果基类没有虚拟析构函数，那可能是个问题——基类析构函数最终可能不会被调用。因此，如果该类有任何非 POD 数据成员，那么这些数据成员可能不会在子类中正确销毁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T00:36:42.737

最好将析构函数设置为虚拟，因为这样您以后就不必担心它了。

当您以多态方式删除该类并且您的类析构函数不会运行时，从没有析构函数的类继承将导致未定义的行为。

我能想到你不希望你的析构函数是虚拟的唯一原因是当你不希望为该函数创建一个 vtable 时。

# node.js - 僵尸.js 和谷歌地图 API

> ID：11813036
> 
> 赞同：5
> 
> 时间：2012-08-05T00:26:59.857
> 
> 标签：node.js, mocha.js, zombie.js

我遇到了zombie.js 测试框架和Google Maps API 的问题。

我有一个简单的zombie.js，它加载一个主页并尝试单击一个登录链接。但是，当我查看返回的主页 HTML 时（从zombie.js 浏览器对象的角度来看），我在正文部分只看到了这个：

```
<body>
  <script src="https://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/12/main.js"     type="text/javascript"></script>
</body> 
```

如果我从原始页面中删除 Google Maps javascript，一切正常，我会得到完整的部分。请求不使用地图 API 的其他页面也可以正常工作。

我在这里看到一个相关问题，但没有完全描述解决方法：[https ://github.com/assaf/zombie/issues/250](https://github.com/assaf/zombie/issues/250)

谁能帮我解决这个问题？

这是有问题的zombie.js代码：

```
suite('Zombie Sign In', function() {

    test('Home page should have sign-in link', function(done) {
        var browser = new Browser();
        browser.debug = true;
        browser.authenticate().basic(conf.basicAuth.username, conf.basicAuth.password);
        browser.visit(conf.baseURL, function(e, browser) {
            console.log(browser.html()); // here is where I get the empty body section
            browser.clickLink("Sign In", function() {
                browser.text("title").should.eql('my title');
                done();            
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:29:51.010

我今天遇到了这个问题——你只需要异步加载 API。这与其说是一种解决方法，不如说是记录在案的替代方法，您可以在此处阅读：

[https://developers.google.com/maps/documentation/javascript/tutorial#asynch](https://developers.google.com/maps/documentation/javascript/tutorial#asynch)

本质上，您只需要像这样更改任何代码：

```
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE" type="text/javascript"></script>
<script type="text/javascript">
  function initialize() {
    var map = new google.maps.Map(/* ... */);
  }

  window.onload = initialize();
</script> 
```

为此（几乎完全从上面的链接中提取）：

```
<script type="text/javascript">
  function initialize() {
    var map = new google.maps.Map(/* ... */);
  }

  function loadScript() {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=TRUE_OR_FALSE&callback=initialize";
    document.body.appendChild(script);
  }

  window.onload = loadScript;
</script> 
```

这里要注意的关键是您必须将**回调**参数传递给 script.src 标记（在此示例中，我们提供了**initialize**，但它可以是您想要的任何东西） - 这将让谷歌在动态注入时触发您的初始化代码地图脚本标签已完成加载。

这第二种机制修复了我的僵尸测试。

# c# - 在没有 CodeFirst 的情况下访问 C#/.NET 中的数据库

> ID：11813038
> 
> 赞同：1
> 
> 时间：2012-08-05T00:27:38.693
> 
> 标签：c#, database, asp.net-mvc-3, entity-framework

这可能有点傻，但我构建的所有应用程序都始终使用 EF Code-First 方法来生成数据库。在使用这种方法时，我一直都是通过 Context 来访问数据库的：

```
public class RandomController : Controller
{

    public CombosContext db = new CombosContext();

    //
    // GET: /Home/

    public ActionResult Index()
    {
        var rows = db.Combos.OrderBy(a => a.Id).ToList(); 
```

但是，如果已经为我创建了数据库，或者我通过将实体添加到架构/设计图面来创建数据库，然后从中生成数据库，该怎么办。如果没有

```
public CombosContext db = new ComboxContext(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T00:32:53.747

如果数据库已经创建，您可以使用 Database First 方法：http: [//blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-model-amp-database-first -演练.aspx](http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-model-amp-database-first-walkthrough.aspx)

基本设置是在解决方案资源管理器中右键单击项目，然后单击添加 > 新项目。在对话框中，选择左侧窗格中的数据和 ADO.net 实体数据模型，然后按照向导创建基于数据库的模型。这样，您将拥有一个与您首先使用代码完全相同的上下文对象（有一些小的更改，但工作方式几乎相同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:29:28.380

您仍然可以先使用代码执行此操作，恕我直言，这是更好的方法。使用 Entity Framework Power Tools 将现有数据库反向工程为代码优先模型。

[http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d/](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d/)

请参阅我在以下位置使用它的演示：

[http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DEV215](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DEV215)

# symfony - Doctrine 2.2.2，级联不与多对多关联一起使用？

> ID：11813043
> 
> 赞同：3
> 
> 时间：2012-08-05T00:28:41.177
> 
> 标签：symfony, doctrine-orm, symfony-forms

我在 Symfony 2.0.17-DEV 和 PHP 5.3.14 上使用 Doctrine 2.2.2。我对级联选项的多对多关联有疑问。例子很简单，希望这个梦幻般的董事会中的人能帮助我。

无论如何，`Meta`超类是与 的关系的所有者`User`。仅相关字段和构造函数：

```
abstract class Meta
{
    /**
     * @ORM\ManyToMany(targetEntity="User", inversedBy="meta")
     * @ORM\JoinTable(name="meta_users",
     *     joinColumns={@ORM\JoinColumn(onDelete="CASCADE")},
     *     inverseJoinColumns={@ORM\JoinColumn(onDelete="CASCADE")}
     * )
     */
    protected $users;

    public function __construct()
    {
        $this->users = new ArrayCollection();
    }

    public function addUser(User $user)
    {
        $this->users[] = $user;
        return $this;
    }

    public function getUsers()
    {
        return $this->users;
    }
} 
```

（实现，只是空类，是`Label`和`Category`）

**这很简单，而且确实有效**。我的意思是在元数据中添加或删除用户实际上是在连接表中添加/删除相应的行。

问题恰恰相反：创建/编辑用户并分配元。`User`以这种方式定义与 meta 的关联，并添加一个 cascade="all" 选项：

```
class User
{
    /**
     * @ORM\ManyToMany(targetEntity="Meta", mappedBy="users", cascade={"all"})
     */
    protected $meta;

    public function __construct()
    {
        $this->meta = new ArrayCollection();
    }

    public function addMeta(Meta $meta)
    {
        $this->meta[] = $meta;
        return $this;
    }

    public function getMeta()
    {
        return $this->meta;
    }
} 
```

我对 Doctrine 很陌生，但这不起作用。在我用于创建/编辑的 Symfony 2 表单中`User`，我添加了一个 type 字段`entity`，只需选择所有元数据：

```
$builder
    ->add('meta', 'entity', array(
        'label'         => 'Meta',
        'class'         => 'Acme\HelloBundle\Entity\Meta',
        'property'      => 'select_label',
        'multiple' => true,
        'expanded' => true,
    ))
; 
```

将元分配（使用复选框）给用户时，任何表都没有变化。怎么了？我确定我错过了一些东西，但我找不到什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T05:24:13.320

说出我所知道的。

Cascade 选项与保持连接表关联无关。`Meta`当在实体的关系中找到新`meta`实体`User`（或删除旧实体）时，应该使用它。那就是，在您的表单中，您添加一些输入以创建新元或删除现有元，例如使用`collection`Symfony 2 提供的字段类型）。或者就在你这样做的时候：

```
$newMeta = new Meta();

$user->addMeta($meta);

$em->persist($user); // A new entity was found in the relation meta 
```

据我了解，您希望保持关系本身；Doctrine**总是寻找拥有方**以持久化实体。这意味着**从反面**来看，如果相应的复选框被选中，您首先要保留用户，而不是保留每个添加或删除用户的元数据。

您的字段是`entity`类型，这意味着所有元数据都是从您的表中获取的，并且那些已经分配给用户的元数据被标记为已检查。

我记得做过类似的事情，这是一个“伪”控制器代码：

```
$em->persist($user); // Perstist the inverse side

// This is what user selected
$selectedMeta = $user->getMeta();

// All meta coming from your database
$allMeta = $em->getRepository('YourBundle::Meta')->find();

// Loop on the owning side
foreach($allMeta as $meta)
{
    // Is current meta selected?
    $isSelected = $selectedMeta->contains($meta);

    // Does this meta have already the user in it?
    $hasUser = $meta->getUsers()->contains($user);

    // To be removed: not selected and with the user
    if(!$isSelected && $hasUser)
        $meta->getUsers()->removeElement($user);

    // To be added: selected and without the user
    if($isSelected && !$hasUser)
        $meta->addUser($user);

    $em->persist($meta); // Persist the owning side and the association
}

// Apply
$em->flush(); 
```

也在等确认！

# android - Nbandroid - 在 netbeans 中单击运行不会重新编译代码

> ID：11813044
> 
> 赞同：1
> 
> 时间：2012-08-05T00:29:20.693
> 
> 标签：android, netbeans, emulation

过去，在对我的代码进行更改后，我只需在 netbeans 中单击运行，更新就会在 android 模拟器中显而易见。现在，出于某种原因，我必须先单击“清理并构建”，然后再运行。如果我只是单击运行，最新编译的版本将被推送到模拟器。我不知道发生了什么变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:53:31.053

这听起来像一个错误。请针对插件提交错误。[在http://www.nbandroid.org/p/contacts.html](http://www.nbandroid.org/p/contacts.html)上有一个指南

最好知道插件版本、Android SDK 版本和 NetBeans 版本。除此之外，您还可以查看 Ant verbose build 的输出，以查看部署到模拟器的 .apk 文件是否真的被重建（输出窗口左侧栏有一个按钮，可将您引导至可以访问的页面调整 Ant 设置以打印此详细输出）。

# c# - 我怎样才能让用户只复制TextEdit的文本

> ID：11813053
> 
> 赞同：0
> 
> 时间：2012-08-05T00:31:00.547
> 
> 标签：c#, winforms

我的表单中有一个 TextEdit，我只想让用户复制它的包含而不是编辑它，如果我使用`TextEdit.Enabled = false;`我无法复制 TextEdit 的包含。

请问，我怎样才能让用户只复制文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:34:59.540

试试`TextEdit.Properties.ReadOnly = true`。这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T12:31:23.710

将该属性设置为true，并在表单中添加一个按钮来复制文本，并在事件处理程序`ReadOnly`中编写以下代码：`button1_Click`

```
Clipboard.SetDataObject(richTextBox1.SelectedText); 
```

# qt4 - QWebView 不呈现字体

> ID：11813055
> 
> 赞同：4
> 
> 时间：2012-08-05T00:31:44.297
> 
> 标签：qt4, pyqt4, qwebview

我正在编写一个显示文件夹中的静态 HTML 文件的应用程序。出于某种原因，PyQt4 的`QWebView`类不允许渲染任何字体，即使对于远程网站也是如此：

**`QWebView`**：

![字体不好，不好](../Images/3105f4d84cf5391013a854855ff14bb8.png)

**铬**：

![好字体](../Images/04ec5cc359351b4452cc8158335091f2.png)

我正在像这样加载文件：

```
self.web_view = QWebView()
self.settings = self.web_view.settings()
self.settings.setAttribute(QWebSettings.LocalContentCanAccessRemoteUrls, True)

self.web_view.load(QUrl('http://blender3d.github.com/Bevel/demo/')) 
```

是否还有其他安全设置需要更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T04:50:23.677

`QWebView`经过几个小时的折磨，我终于注意到[Font Squirrel](http://www.fontsquirrel.com/fontface/generator)惊人地渲染了一个外部字体。我多次突出显示这些字母，敬畏地坐在那里，微笑着。

无论如何，似乎是为了使它工作`QWebView`：

```
@font-face {
  font-family: 'Terminal Dosis';
  font-style: normal;
  font-weight: 400;
  src: local('Dosis Regular'), local('Dosis-Regular'), url('../fonts/terminal-dosis-regular.woff') format('woff');
} 
```

我必须让它看起来像这样：

```
@font-face {
  font-family: 'Terminal Dosis Regular';
  src: url('../fonts/terminal-dosis-regular.ttf') format('truetype');
} 
```

请注意，`QWebView`不喜欢 WOFF 字体。我必须通过[Font Squirrel](http://www.fontsquirrel.com/fontface/generator)将我的转换为 TrueType 。

简而言之：

*   确保您的字体是 TrueType 字体。
*   没有`local()`东西。
*   它似乎`font-style`被`font-weight`忽略了。您必须为每种字体的每种样式制作不同的字体系列（`Terminal Dosis Bold`例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:28:51.303

示例 url的[样式表](http://blender3d.github.com/Bevel/demo/css/style.css)使用 css`@font-face`规则来指定在线字体。

不幸的是，这看起来目前在 QWebKit 中被破坏了：[Bug 36351](https://bugs.webkit.org/show_bug.cgi?id=36351)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:54:36.513

坏了！本文中可能的解决方法：

[http://blog.elliottcable.name/posts/webkit_safari_3_1_and_the_css_font_face_declaration.xhtml](http://blog.elliottcable.name/posts/webkit_safari_3_1_and_the_css_font_face_declaration.xhtml)

# orchardcms - 将 Orchard CMS 内容与模块混合

> ID：11813056
> 
> 赞同：1
> 
> 时间：2012-08-05T00:32:05.800
> 
> 标签：orchardcms

我目前正在开发一个果园模块。该模块包含一个包含视图的 MVC 应用程序。我想让模块尽可能可配置。我希望客户配置的项目之一是 MVC 从模块中查看的方式。其中一部分将由主题决定。但不是一切。考虑以下场景：

该模块包含一个用于下订单的视图。视图以“正常视图方式”显示表单。即字段标签和输入标签。但是在表格的开头，每个客户都必须能够定义自己的一组指令来显示。或者，也许客户想在此处放置一条消息，以将客户指向其他操作。

以最理想的方式，我将有一个内容页面，客户可以在其中放置所有类型的内容和一个特定的块，它是模块视图的结果。有点像 Web 部件。我不知道这是否可能以及如何实现。

**编辑澄清** 模块创建一个这样的页面：

职称形式

所以标题和表单都是由模块控制器输出的。

我设法创建了一个层，条件是 url 与我的表单匹配的页面。

我在内容区域的该层中添加了一个 HTML 小部件，位置为 1（尝试 0 到）。

但是页面看起来像这样：

*   标题
*   形式
*   小工具

代替

*   小工具
*   标题
*   形式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:38:44.640

从您的控制器操作中返回一个 ShapeResult 将确保您的视图是主题化的并受益于小部件，这些小部件是您在 Orchard 中的“类似于 Web 部件”的东西。

# google-closure - 如何设置 goog.Timer 的当前滴答计数？

> ID：11813059
> 
> 赞同：1
> 
> 时间：2012-08-05T00:32:50.850
> 
> 标签：google-closure, google-closure-library

我正在修改`goog.Timer`和阅读它的 API：[http ://closure-library.googlecode.com/svn/docs/class_goog_Timer.html](http://closure-library.googlecode.com/svn/docs/class_goog_Timer.html)

有没有办法为计时器设置当前时间或刻度？例如，我可以将计时器中的当前时间设置为 5000 毫秒吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:35:10.523

`goog.Timer`是上面的一个抽象，它以设定的时间间隔[`window.setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)重复调度一个事件。`goog.Timer.TICK`可以使用第一个构造函数参数或方法指定间隔`setInterval()`。

这是一个每 5 秒递增一次滴答计数器的示例。

```
var tickCount = 0;

/**
 * Tick callback.
 */
var tickCounter = function() {
  tickCount++;
};

var timer = new goog.Timer(5000);
timer.start();
goog.events.listen(timer, goog.Timer.TICK, tickCounter); 
```

# c++ - 为什么我需要手动从向量中删除指针？

> ID：11813062
> 
> 赞同：4
> 
> 时间：2012-08-05T00:32:58.487
> 
> 标签：c++, memory-management, destructor

为什么我需要手动删除向量中动态创建的项目？当向量被删除时，为什么它们不会被删除或调用其析构函数？

通常是这样的，但为什么需要？

```
vector<int*> v;
for (vector<int*>::iterator it = v.begin(); it != v.end(); ++it) 
{ 
   delete *it; 
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-05T00:58:21.293

首先，您将原始指针存储在向量中。这些指针只是指针。他们可以指向任何地方。它们可以指向本地对象，这些对象不能被`delete`. 即使它们指向动态创建的对象，也不一定意味着用户希望它们与向量一起死亡。向量应该如何知道这一切？

这是对象所有权的问题。拥有该对象的人应对其正确及时的删除负责。普通的原始指针不表示所有权。这就是为什么vector无法对对象是否需要删除做出任何假设。如果您想告诉向量它拥有其动态对象，请使用相应的智能指针。

其次，请注意，您的删除技术在一般情况下不一定安全。一些标准容器假定您存储在其中的数据始终有效。当您`delete`对每个向量元素执行此操作时，向量中的数据将变为“无效”（指针变得不确定）。这对向量来说是可以的。但是在一个“更智能”的容器中做这样的事情，比如`std::map`或`std::unordered_set`例如，可能而且将会导致问题。即使您随后立即销毁容器本身，容器的销毁算法也很可能需要分析（比较、散列等）各个元素的值。而你只是用你的周期杀死了他们。

智能指针自然地解决了这个问题。但是，如果您必须使用`delete`存储在标准容器中的原始指针的手册，则更好的步骤顺序将是

1.  检索元素的值`i`并将其存储在指针中`p`
2.  `i`从容器中擦除元素
3.  做`delete p`

最后你会得到一个空容器和`delete`d 数据。同样，您的方法适用于简单的序列，例如`std::vector`or `std::list`，但不要对有序或散列的序列执行此操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T00:49:49.327

因为语言无法知道您完成后是否需要它们保持活力。如果您插入一些指向堆栈对象的指针或类似的东西怎么办？繁荣。

然而，这可以通过使用智能指针来解决，智能指针*将*实施适当的策略来自动销毁。`unique_ptr`并且`shared_ptr`是最常见和最有用的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T00:48:26.800

不调用析构函数是因为指针不拥有它所指向的对象。

在 C++11 中，a`std::unique_ptr<T>`确实拥有它所指向的对象。在这种情况下，释放指针时会调用析构函数，这可能是您想要的行为。（如果您没有 C++11 编译器，但拥有相当新的 C++11 之前的编译器，`unique_ptr`则仍可作为 TR1 的一部分使用。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T00:35:53.737

的实现`vector`只是为了删除它的内存。指针没有解构器。而在 C++ 中，没有垃圾收集或逻辑可以看到它是指针并递归删除它。

如果你想参加下一次 ISO 会议并提出这个建议，请做我的客人，但对我来说，我只是把它放在一个`inline`函数中：

```
template<class T>
public static inline void deleteVectorPointer(std::vector<T*> v)
{
    for (vector<T*>::iterator i = v.begin(); i != v.end(); i++)
    {
        delete *i;
    }
} 
```

# android - 将 SQLite 数据库同步到 App Engine 数据存储区？

> ID：11813063
> 
> 赞同：2
> 
> 时间：2012-08-05T00:33:10.033
> 
> 标签：android, sqlite, google-app-engine

android 应用程序在离线模式下将数据存储在 SQLite 数据库中。在线时，我希望应用程序与云服务器（App Engine）中的数据存储（数据库）同步（双向）。如何实现此功能，以便可以在 Web 应用程序上显示手机上捕获的数据。如果有的话，也请建议任何简单的替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T01:24:13.673

我只是把我的数据写成一个字符串（使用一种我可以重建我的数据的格式），将它传递给 AE，解析它并存储/显示它。

你也可以使用json。

或尝试[http://mylifewithandroid.blogspot.jp/2010/10/client-server-communication-with-json.html](http://mylifewithandroid.blogspot.jp/2010/10/client-server-communication-with-json.html)

对于同步部分，我使用时间戳。如果时间戳结果没有记录在服务器上，我会记录下来。我将记录的邮票发回给客户并从商店中删除。当然，如果用户的记录是从不同的客户端更新的，服务器也可以发回新的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T01:45:43.883

In general, you should implement some complex algorithm, that will be doing synchronization depending on your needs, and then make it in code on both side (server and client). This not quite a simple task, in general. Useful keywords for googling: SOAP, REST, JSON, ...

# apache - 正则表达式匹配 url 中的第一个斜杠以提取它之后的所有内容

> ID：11813064
> 
> 赞同：1
> 
> 时间：2012-08-05T00:33:19.637
> 
> 标签：apache, .htaccess

我有这个链接：

```
http://mysite.com/subdirectory/something/stuff/index.php 
```

我可以使用什么正则表达式只匹配第一个斜杠，以便我能够使用代表找到的项目的 $1 或 $2 变量提取它后面的所有内容？这样它就会返回“subdirectory/something/stuff/index.php”。

例如，我想过使用这个正则表达式：

```
(.*)/(.*) 
```

但是对于每个斜杠都会重复，所以当我使用 $2 时，它只会返回 url 的最后一部分（在本例中为 index.php）。

我使用的语言是 apache (?)，它会放在一个 .htaccess 文件中。

提前致谢！

**编辑：** 好的，所以背景是我在子目录中有一些文件使用“/files/test.php”之类的链接链接到其他文件，因为这些文件期望其他目录位于根文件夹中，但是我的网站他们不是。所以我想到了使用 htaccess 文件将这些请求重定向到根文件夹到子目录，这样一切正常。并且替换所有链接不是一种选择，因为它们有超过一千个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T00:36:13.910

你的正则表达式是贪婪的`(.*)`。尝试使第一部分不贪婪：

```
(.*?)/(.*) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T00:37:23.797

试试这个正则表达式（只有当请求的文件不存在时它才会重定向到子目录的东西，所以如果它存在它就不会无限循环）：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ sub/stuff/$1 [NC,L,R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-23T18:21:42.343

```
^(https?:\/\/[^\/]*\/)(.*) 
```

第二组将包含您要查找的内容

# iphone - 在模态视图控制器中保留文本字段的文本

> ID：11813073
> 
> 赞同：0
> 
> 时间：2012-08-05T00:35:57.373
> 
> 标签：iphone, ios, uitextfield, modalviewcontroller

嗨，我在 Modal ViewController 中有一个文本字段，可以在不同的视图中调整 TabBarItem 标题。问题是一旦您离开模态视图控制器，文本字段就会清除。如何将文本保留在文本字段中，以便当我返回时它仍然存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T01:38:44.980

每次以模态方式呈现视图控制器时，都会实例化一个新的控制器（文本字段也是如此，这就是它为空的原因）

您可以通过将 NSString 属性添加到您以模态方式呈现的视图控制器（到 .h 文件）来轻松解决此问题

```
@property (nonatomic, strong) NSString *text; 
```

（你还需要合成它）

并在您的 viewDidLoad 中设置文本字段的文本

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    self.myTextField.text = self.text;
} 
```

保持这样它不会做任何事情，因为你的“文本”属性是零，你需要在你打电话之前设置它`presentModalViewController:animated:`

```
// "controller" being your modal view controller
controller.text = @"The tile you're keeping somewhere";
[self presentModalViewController:controller animated:YES]; 
```

# java - Java-当用户输入字符串时，它是字符串文字吗？

> ID：11813076
> 
> 赞同：4
> 
> 时间：2012-08-05T00:36:13.953
> 
> 标签：java, string-literals

我有一个问题要帮我做作业。我们将使用字符串文字编写一个程序并反向打印它。我写了它，它工作正常，但我有两个不同的版本。第一个使用扫描仪，因此用户可以输入字符串，然后反向打印。在第二个中，我声明了一个字符串文字并反向打印。

我的问题不在于我的程序运行良好，而是我在网上或我的书中找不到任何地方说输入的字符串是字符串文字。我知道字符串文字通常写成

```
String a = "Welcome to Java" 
```

但可以写成

```
String a = new String("Welcome to Java") 
```

*   那么输入的字符串与字符串文字不同吗？
*   是否必须用引号写出才能被视为字符串文字？

我假设答案是肯定的，因为我的书基本上说它必须用引号引起来，但我想在交作业之前仔细检查一下，我正在上交正确的版本。提前感谢您的澄清！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T00:41:23.910

字符串文字是在引号中并且在您的代码中的字面意思：

```
String literal = "string literal"; 
```

输入字符串不是字符串文字，只是一个字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T01:36:24.877

@Shakedown 暗示，字符串文字是 Java 源代码的句法元素。当你的程序被执行时，它也是（在松散的意义上）一个*对应*`String`于该字面量的 Java对象。我们可以说字面量*表示*运行时字符串。此外，JLS 指定两个具有相同字符的字符串文字将在简单程序执行的上下文中表示相同的字符串对象。

 **在您的代码片段中。

```
String a = "Welcome to Java"; 
```

和

```
String a = new String("Welcome to Java"); 
```

...`"Welcome to Java"`源代码中的字符序列都是 String 文字，假设它们在相同的执行中使用，它们将表示相同的（内部）String 对象。

但是，`new String("Welcome to Java")`不是字符串文字。它是一个创建新`String`对象的表达式。并且执行该表达式的结果*保证*是与文字所表示的对象*不同的对象。* `String`

* * *

> 是否必须用引号写出才能被视为字符串文字？

是的。更重要的是，它必须写在*程序源代码*中的引号中才能成为字符串文字。

如果我编写了一个接受来自 GUI 的使用输入的程序，并且用户输入的输入带有双引号字符，那么这不是字符串文字。相反，`String`它恰好以双引号字符开头和结尾。（是的......在这种情况下，字符串的*值*将包括引号字符。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T00:41:25.270

字符串文字 ( `"foo bar baz"`) 是一个`String`对象——它只是创建此类对象的一种很好的语法。当您从用户那里获得输入时，它也将是一个`String`对象——与该字面量相同的类型。

但是，字符串文字指的是该语法（引号中的内容），而不是对象的类型。因此，要准确回答您的问题，用户的输入不是字符串文字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T00:41:45.937

输入的字符串与字符串文字没有什么不同。

字符串在 Java 中存储为 class 的对象`String`。一种获取方式是字符串文字：“hellosailor”是字符串文字，在 Java 表达式中使用时，它是 class 的对象`String`。返回字符串的方法也返回类的对象`String`。所以它们在所有方面都是等价的。

有一些方法可以从 a 中区分文字`new String("...")`，但这些方法相当做作。作为初学者，您不必担心这些。**

# php - 将mysql结果存储在数组中（不回显），然后使用该数组设置另一个变量

> ID：11813079
> 
> 赞同：1
> 
> 时间：2012-08-05T00:36:44.330
> 
> 标签：php, mysql, arrays

我已经尝试在之前提出的其他问题中寻找解决方案（一如既往），但我似乎无法解决这个问题。

看，我想从一个表中获取多个唯一 ID（以随机顺序）并将它们存储在一个数组中而不回显它们。然后我想在循环中使用该数组变量，以便我可以在每次传递时递增键，并将另一个变量设置为该数组变量。令人困惑？我认为看代码会更清楚。

问题是我似乎无法将查询到的值存储到数组中以供以后在代码中使用。我粘贴了代码的相关部分，并用注释 /* */ 标签指出了我的问题点。

任何帮助表示赞赏。

```
<?php

include ('parse_functions.php');

if ($fetch['use_rand']=='yes')

{ $loop = 5;    
$concept = $fetch['concept'];
$countRandom = "SELECT exID FROM examples WHERE concept='$concept' ORDER BY RAND()";
$askForRandom = mysql_query($countRandom) or die(mysql_error());
/* HERE I NEED TO STORE RANDOM KEYS (exID) INTO AN ARRAY */ }

else

{  if (!empty($fetch['ex5'])) { $loop = 5; }
 elseif (!empty($fetch['ex4'])) { $loop = 4; }
 elseif (!empty($fetch['ex3'])) { $loop = 3; }
 elseif (!empty($fetch['ex2'])) { $loop = 2; }
 elseif (!empty($fetch['ex1'])) { $loop = 1; }
 else { $loop = 0; }

    }

     if ($loop!==0)

      {

         echo '<div id="examples">' . "\n";
         echo '<table class="showExample" cellspacing="0" cellpadding="0" border="0" align="center">' . "\n";

         $turns = 1;

             do {

             if ($fetch['use_rand']=='no')

              { $exID = $fetch['ex'.$turns.'']; }

             else

              { $exID = /* THIS IS WHERE I WILL USE "RANDOM VARIABLE" */; }

             $askExamples = "SELECT * FROM examples WHERE exID='$exID'";
             $getExamples = mysql_query($askExamples) or die(mysql_error());
             $sortExamples = mysql_fetch_assoc($getExamples);

             echo '<tr>' . "\n";

// ...and so on 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:54:56.473

为什么不从一开始就在一个查询中获取所有正确的信息，如下所示：

```
select 
    a.exID,
    examples.someField,
    examples.someOtherField
from 
    examples
        join
        (
            SELECT 
                exID 
            FROM 
                examples 
            WHERE 
                concept='$concept' 
            ORDER BY 
                RAND() 
            limit 5
        ) a
            on a.exID=examples.exID 
```

然后，您只需将它们弹出到一个数组（或更好的对象）中，每次都将所有相关信息放在一行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:56:18.210

如果您需要做的就是将信息存储在一个数组中，这里有一个简单的方法。

```
/* code 
to open
db here
*/

/* assuming you have a value for $concept */

$countRandom = "SELECT exID FROM examples WHERE concept='$concept' ORDER BY RAND()";
$askForRandom = mysql_query($countRandom) or die(mysql_error());

$Element = 0; //Array elements start at ZERO. So this is to intialise it.
while ($Fields = mysql_fetch_array($askforRandom)) //As long as there are records, get them.
    {
    //Records are retrieved one at a time. So store each one's exID in the array element
    $Data[$Element] = $Fields["exID"];
    //Soon after storing one, increment the value of the $Element variable so it is ready for the next one.
    $Element++
    }

/* now you have the data in the array. So you can do what you like with it. */ 
```

希望能帮助到你

**注意：**读取数组时，请确保设置条件以检查您的计数器是否小于 $Element。这是因为在读取最后一条记录后，$Element 加一。希望这很清楚。

# ruby-on-rails - 哈希中的动态循环 Ruby on Rails

> ID：11813082
> 
> 赞同：0
> 
> 时间：2012-08-05T00:37:12.463
> 
> 标签：ruby-on-rails, ruby, hash

我试图在下面的哈希 @data 中创建一个动态循环，但似乎无法弄清楚。我正在使用 google api 从这里[https://github.com/mcommons/annotatedtimeline-for-rails](https://github.com/mcommons/annotatedtimeline-for-rails)创建一个 annotatedtimeline-for-rails 。

散列 @data 中的数组必须是动态的，即天数必须由循环生成，产品名称和编号也是动态的。我将尝试在下面的循环中举一个例子

@numdeployed 是一个数字，来自数据库中的一个表，我应该由循环生成

```
@data{
    begin loop
    i.day.ago.to_date => { :foo=>@numdeployed, :bar=>@numdeployed, :barbaz=>@numdeployed, :foobar=>@numdeployed },
    end loop
} 
```

原始数据哈希看起来像这样

```
@data = {
    1.day.ago.to_date => { :foo=>10, :bar=>40, :barbaz=>10, :foobar=>40 },
    2.day.ago.to_date => { :foo=>10, :bar=>40, :barbaz=>10,:foobar=>40 },
    3.day.ago.to_date => { :foo=>10, :bar=>40, :barbaz=>10,:foobar=>40 },
    4.day.ago.to_date => { :foo=>10, :bar=>40, :barbaz=>10,:foobar=>40 },
    5.day.ago.to_date => { :foo=>10, :bar=>40, :barbaz=>10,:foobar=>40 }
} 
```

希望有人可以提供帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T00:56:42.273

你在寻找这样的东西吗？

```
@data = Hash[
    n.times.map do |i|
        [ (i + 1).day.ago.to_date,  { :foo => 10, :bar => 40, :barbaz => 10, :foobar => 40 } ]
    end
] 
```

`n`不管你想要多少对在你的`@data`.

# java - 出现注册错误：在 android 中为 pushwoosh 集成 GCM 时缺少帐户

> ID：11813086
> 
> 赞同：2
> 
> 时间：2012-08-05T00:38:43.460
> 
> 标签：java, android, google-cloud-messaging

我成功地将 pushwoosh 集成到我的 android 应用程序中。我正在使用 GCM。这是我的代码：

```
oncreate:
    PushManager pushManager = new PushManager(this,
                App_id, Sender_id);
        pushManager.onStartup(savedInstanceState, this);
        checkMessage(getIntent());

   @Override
        protected void onNewIntent(Intent intent)
        {
            super.onNewIntent(intent);
            setIntent(intent);

            checkMessage(intent);

            setIntent(new Intent());
        }

        private void checkMessage(Intent intent)
        {
            if (null != intent)
            {
                if (intent.hasExtra(PushManager.PUSH_RECEIVE_EVENT))
                {
                    showMessage("push message is " + intent.getExtras().getString(PushManager.PUSH_RECEIVE_EVENT));
                }
                else if (intent.hasExtra(PushManager.REGISTER_EVENT))
                {
                    showMessage("register");
                }
                else if (intent.hasExtra(PushManager.UNREGISTER_EVENT))
                {
                    showMessage("unregister");
                }
                else if (intent.hasExtra(PushManager.REGISTER_ERROR_EVENT))
                {
                    showMessage("register error");
                }
                else if (intent.hasExtra(PushManager.UNREGISTER_ERROR_EVENT))
                {
                    showMessage("unregister error");
                }
            }
        }

        private void showMessage(String message)
        {
            Toast.makeText(this, message, Toast.LENGTH_LONG).show();
        } 
```

但是当我运行我的应用程序时，它显示注册错误。我找不到问题所在？在 logcat 中它显示消息注册错误：帐户丢失。请帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T10:56:53.763

手机上没有 Google 帐户时发生帐户丢失错误。这是GCM页面的官方解释。

> 手机上没有 Google 帐户。Android 应用程序应要求用户打开帐户管理器并添加一个 Google 帐户。固定在设备端。

欲了解更多信息，请查看[此处](http://developer.android.com/guide/google/gcm/gcm.html#handling_reg)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T16:42:57.447

如果您遇到“帐户丢失”错误，您需要在设备上配置您的 Google 帐户。打开客户经理并在那里添加一个谷歌帐户。还要确保您可以从设备登录 Android Marketplace。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T10:27:16.923

我也面临这个问题，但据我所知，这里的appid和senderId是错误的，尝试使用新的。

# java - 在文本文件中搜索 JAVA 中的名称列表

> ID：11813087
> 
> 赞同：0
> 
> 时间：2012-08-05T00:38:54.487
> 
> 标签：java, list, search, full-text-search, directory

我有以下内容：

1.  包含许多文件（大约 300000 个）的文件夹，名为“AllFilesFolder”
2.  名称列表，名为“namesList”
3.  一个名为“filteredFolder”的空文件夹

我想通过将包含列表中任何名称的任何文件移动到空文件夹“filteredFolder”来过滤文件夹“AllFilesFolder”。

我通过以下代码解决了这个问题：

```
public static void doIt(List<String>namesList, String AllFilesFolder, String filteredFolder) throws FileNotFoundException {

    // here we put all the files in the original folder in List variable name "filesList"
    File[] filesList = new File(AllFilesFolder).listFiles();

    // went throught the files one by one 
    for (File f : filesList) {

        try {

            FileReader fr = new FileReader(f);
            BufferedReader reader = new BufferedReader(fr);
            String line = "";
            //this varibale used to test withir the files contins names or not 
            //we set it to false.
            boolean goodDoc = false;
            //go through the file line by line to chick the names (I wounder if there are a simbler whay)
            while ((line = reader.readLine()) != null) {
                for(String name:namesList){
                if ( line.contains(name)) {
                    goodDoc = true;
                }
                }
            }
            reader.close();

            // if this file contains the name we put this file into the other folder "filteredFolder"
            if (goodDoc) {
                InputStream inputStream = new FileInputStream(f);
                OutputStream out = new FileOutputStream(new File(filteredFolder + f.getName()));
                int read = 0;
                byte[] bytes = new byte[4096];
                while ((read = inputStream.read(bytes)) != -1) {
                    out.write(bytes, 0, read);
                }
                inputStream.close();
                out.flush();
                out.close();
            }
        } catch (Exception e) {
            System.err.println(e);
        }
    }
} 
```

通过这样做，我有两个问题需要您的建议来解决：

1.  我正在阅读每个文件两次，一次进行搜索，另一次将其放入另一个文件夹。

2.  搜索 namesList 时，我有 for 循环来逐个获取名称，有没有办法一次搜索列表（没有循环）。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:58:07.320

**我正在阅读每个文件两次，一次进行搜索，另一次将其放入另一个文件夹。**

使用 NIO 可以提高复制性能。这是[代码示例。](http://www.javalobby.org/java/forums/t17036.html)如果您可以使用 Java 7，那么您可以使用[Files.copy()](http://codingjunkie.net/java-7-copy-move/)

**搜索 namesList 时，我有 for 循环来逐个获取名称，有没有办法一次搜索列表（没有循环）。**

用于`HashSet`存储名称和使用`contains()`方法。这是一个**O(1)**操作。或者另一个建议是使用[Scanner.findWithinHorizo​​n(pattern, horizo​​n)](http://www.coderanch.com/t/278043/Streams/java/Searching-large-text-file)

# html - 为什么说没有打开的“头部”标签？

> ID：11813088
> 
> 赞同：0
> 
> 时间：2012-08-05T00:39:10.600
> 
> 标签：html, tags, head

```
<!DOCTYPE html>
<html>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<head>
<title>temp</title>
<link rel="stylesheet" href="style.css"/>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script type="text/javascript" src="this.js"></script>
</head>
<body onload="init()">
</body>
</html> 
```

您是否看到超过 1 个开头的头部标签？因为 firefox 和 w3 标记验证器都声称我已经有一个开放的 head 标签，然后我才能看到第一个标签......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T00:40:00.177

`meta`标签必须在标签中`head`。如果不是，`head`标签将被隐式打开。

由于您的`meta`标签在您的`head`开始标签之前，因此`head`标签被隐式打开，`meta`标签被插入，然后您显式打开`head`。

要解决此问题，请在打开后（但在关闭前）将`meta`标签移动到某处。`head`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T13:24:49.390

您需要将元描述标签放在元素内部 ，包括 Google 在内的**搜索引擎**不会将元素之外的东西视为元描述（或其他元标签）。您需要有正确的 (X)HTML 标记，并且您需要在元素内使用所有元标记。

# ios - 嵌套推送动画可能导致导航栏损坏多次警告

> ID：11813091
> 
> 赞同：2
> 
> 时间：2012-08-05T00:39:50.943
> 
> 标签：ios, xcode, uinavigationcontroller

我是 ios 应用程序开发的新手，我遇到了多个警告的问题。

我有一个加载表格视图的导航控制器。从该表视图中，单击一个单元格会推送一个新的 VC（基本上是单元格的详细信息）。在那个“detailView”上，当某个按钮被按下时，另一个 VC 被按下。

我使用以下代码推送最后一个 VC：

```
- (IBAction)toMoreDetail:(id)sender 
{
    [self performSegueWithIdentifier:@"toMoreDetail" sender:self];
} 
```

当我这样做时，会弹出 2 个警告：

```
2012-08-05 02:25:41.842 appName[2145:f803] nested push animation can result in corrupted navigation bar
2012-08-05 02:25:42.197 appName[2145:f803] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted. 
```

到目前为止，我没有找到任何好的答案。也许任何人都可以帮助我解决这个问题。

谢谢 ：）

编辑：这是另一个 segue 的代码：

从 TableList 到细节的 VC（segue 从原型单元开始并进入细节 vc）：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"toDetailEvent"])
    {
        NSInteger selectedIndex = [[self.tableView indexPathForSelectedRow] row];
        DetailEvent* detailEvent = [segue destinationViewController];
        detailEvent.eventToDisplay = [listEvents objectAtIndex:selectedIndex];
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-05T04:14:45.083

我的猜测是您的按钮与 segue 相关联，因此当您在其上添加一个`IBAction`时，您会触发 segue 两次。

如果你去你的 Storyboard 并点击 segue，你应该能够看到它的起点和终点。它的起源是整个视图控制器还是按钮？`performSegue`如果原点是整个视图控制器，您只需要手动操作。你可以尝试注释掉你的`[self performSegueWithIdentifier:@"toMoreDetail" sender:self];`东西，看看它是否会起作用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T21:50:40.600

看来，如果您使用情节提要并将您的 segue 从源 vc 连接到目标 vc 并使用 didSelectRow 调用 segue，您就不能为 segue 选择留下 else 语句：这有效：

```
if ((indexPath.row == 0 && indexPath.section == 0)) {
    [self performSegueWithIdentifier:@"simpleLines" sender:self];
}
if ((indexPath.row == 0 && indexPath.section == 5)) {
    [self openAppStore];
}
if (indexPath.section == 4)  {
    [self performSegueWithIdentifier:@"pushSettingsVC" sender:self];
} 
```

这不起作用：

```
if ((indexPath.row == 0 && indexPath.section == 0)) {
    [self performSegueWithIdentifier:@"simpleLines" sender:self];
}
if ((indexPath.row == 0 && indexPath.section == 5)) {
    [self openAppStore];
}
else  {
    [self performSegueWithIdentifier:@"pushSettingsVC" sender:self];
} 
```

使用导航控制器时，你会得到一个奇怪的双推。我每次开始一个项目时都会这样做，但总是忘记它为什么会发生。下次我

# javascript - 如何在 raphael.js 文档中添加子 svg 标签？

> ID：11813095
> 
> 赞同：1
> 
> 时间：2012-08-05T00:40:49.507
> 
> 标签：javascript, svg, coffeescript, raphael

我正在使用 Raphael.js 从 Javascript 生成 SVG 绘图（实际上是 Coffeescript）

但是，我希望能够包含自动缩放的子图，方法是将它们放在嵌套在第一个标签内的第二个 <svg> 标记中。不幸的是，允许我添加矩形和路径等的 Raphael Paper 对象没有添加 svgs 的选项。

我尝试使用以下代码将标签直接添加到 javascript 中的 DOM：

```
res = document.createElement("svg")
res.setAttribute("x",x)
res.setAttribute("y",y)
res.setAttribute("width",width)
res.setAttribute("height",height)
res.setAttribute("viewBox","0 0 100 100")
res.innerHTML = someInnerSVG
@paper.canvas.appendChild(res) 
```

这似乎按预期更新了 DOM，将我的新 SVG 标记添加为主要外部 SVG 的子项。然而，这个内在的东西实际上并没有出现在屏幕上。（我的内部 SVG 路径在 0 0 100 100 内缩放，所以在 viewBox 内。）

外部 SVG 中的其余绘图由 Raphael 制作，是可见的。但内在的一无所有。

我正在尝试的应该是可能的吗？知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:58:48.737

您应该将这些子元素放入 Raphael 集中。从那里，您将能够对集合应用转换。要转换集合，您将调用该`transform()`方法并使用`s`属性：

```
set.transform('s[sx],[sy]'); 
```

其中`sx`是水平缩放量，`sy`是垂直缩放量。插入数字时去掉括号。

请参阅此处的文档：[http](http://raphaeljs.com/reference.html#Element.transform) ://raphaeljs.com/reference.html#Element.transform 元素的方法适用于集合，因为集合是伪元素。

# r - 更新现有的 Rdata 文件

> ID：11813096
> 
> 赞同：20
> 
> 时间：2012-08-05T00:41:00.397
> 
> 标签：r, rdata

我发现自己需要更新以前使用`save`. 如果我不小心加载文件，我可能会忘记在文件中重新保存一些对象。例如，我正在处理一个包含一些对象的包`sysdata.rda`（查找表供内部使用，我不想导出），并且只想担心更新单个对象。

我还没有弄清楚是否有标准的方法来做到这一点，所以创建了我自己的函数。

```
resave <- function (..., list = character(), file = stop("'file' must be specified")) {
  # create a staging environment to load the existing R objects
  stage <- new.env()
  load(file, envir=stage)
  # get the list of objects to be "resaved"
  names <- as.character(substitute(list(...)))[-1L]
  list <- c(list, names)
  # copy the objects to the staging environment
  lapply(list, function(obj) assign(obj, get(obj), stage))
  # save everything in the staging environment
  save(list=ls(stage, all.names=TRUE), file=file)
} 
```

不过，这似乎有点矫枉过正。有没有更好/更简单的方法来做到这一点？

顺便说一句，我是否正确假设在函数范围内创建的新环境在函数调用后被销毁？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-05T01:51:54.633

Here is a slightly shorter version:

```
resave <- function(..., list = character(), file) {
   previous  <- load(file)
   var.names <- c(list, as.character(substitute(list(...)))[-1L])
   for (var in var.names) assign(var, get(var, envir = parent.frame()))
   save(list = unique(c(previous, var.names)), file = file)
} 
```

I took advantage of the fact the `load` function returns the name of the loaded variables, so I could use the function's environment instead of creating one. And when using `get`, I was careful to only look in the environment from which the function is called, i.e. `parent.frame()`.

Here is a simulation:

```
x1 <- 1
x2 <- 2
x3 <- 3
save(x1, x2, x3, file = "abc.RData")

x1 <- 10
x2 <- 20
x3 <- 30
resave(x1, x3, file = "abc.RData")

load("abc.RData")
x1
# [1] 10
x2
# [1] 2
x3
# [1] 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-01T17:48:08.110

我在 stackoverflow 包中添加了@flodel 答案的重构版本。它明确地使用环境来更具防御性。

```
resave <- function(..., list = character(), file) {
  e <- new.env()
  load(file, e)
  list <- union(list, as.character(substitute((...)))[-1L])
  copyEnv(parent.frame(), e, list)
  save(list = ls(e, all.names=TRUE), envir = e, file = file)
} 
```

# ruby-on-rails-3 - 如何将 Unicorn stdout 和 stderr 定向到 log4r 日志？

> ID：11813100
> 
> 赞同：1
> 
> 时间：2012-08-05T00:41:40.573
> 
> 标签：ruby-on-rails-3, logging, unicorn, log4r

`log4r`我已按照此处所述进行设置：“[如何使用 Rails 3.0.x 配置 Log4r？](https://stackoverflow.com/questions/5664136/how-to-configure-log4r-with-rails-3-0-x) ”

但是现在我面临着独角兽没有将其输出发送到 log4r 日志的问题。你怎么做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:24:42.623

这个评论有帮助吗？

> 在您的配置中，Rails 不会覆盖输出器的“文件”配置值 - 参数是“文件名”:) 它默认为启动进程的文件/命令的名称。请注意，您指定的任何自定义文件名都必须具有文件扩展名，否则将无法在文件名中粘贴日期！– 内维尔 2011 年 8 月 24 日 22:05

# browser - Websockets 性能问题 - 数据包捆绑产生 5fps

> ID：11813102
> 
> 赞同：2
> 
> 时间：2012-08-05T00:42:11.160
> 
> 标签：browser, tcp, websocket, faye

我正在使用 Faye，它使用 websockets。

我的服务器发送数据包的速率非常一致。它的平均偏差小于一毫秒。如果我在同一台机器上运行客户端，客户端的平均偏差也非常接近。但是，当我在另一台机器上运行客户端时，当我提高帧速率时会发生一些不好的事情。

当我以每秒 5 帧的速度发射时，对方以大约正确的速率接收它们。当我将其增加到 10 fps 时，客户端将在 200 毫秒内接收一帧，下一帧仅在 1 毫秒后接收，就像每个其他数据包都与前一个数据包捆绑在一起一样。当我将其提高到 20fps 时，大多数数据包都以这种方式捆绑在一起：我将在 300 毫秒内获得一个，然后在 1 毫秒内获得四个左右。就好像我能得到的只是 5fps，而要求更多只是以 5fps 的速度打包发送。

是否可以防止这种捆绑并以一致的速率获取我的数据包？超过 5fps 是不是太期待了？这是 Faye 或 Websockets 或 TCP 的一般限制吗？

# android - 了解选项卡和图标的可绘制文件夹

> ID：11813109
> 
> 赞同：0
> 
> 时间：2012-08-05T00:43:18.613
> 
> 标签：android, icons, drawable

[http://developer.android.com/guide/practices/ui_guidelines/icon_design_tab.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_tab.html)

根据上面的链接，您必须将选项卡图标放在 drawable-hdpi-v5 文件夹中。这是否意味着仅选项卡图标进入该文件夹，而该密度的其他图标进入 drawable-hdpi 文件夹？或者我应该把该密度的所有图标放入 v5 文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:30:23.467

每个末尾带有 v5 的文件夹代表不影响屏幕密度的 API 版本 5+ (2.0+) 的值、drawales 等。Hdpi 代表高密度像素，这意味着具有高分辨率屏幕的设备将使用此可绘制对象。普通屏幕将使用 mdpi 文件夹中的可绘制对象。您可以将所有高密度图标放在 hdpi 文件夹中，将所有低分辨率可绘制对象放在 mdpi 或 ldpi 文件夹中。解决您的问题：您的目标是什么版本的 android？低于 2.0？您是否打算遵循严格的设计指南，您可能需要为 2.0 以下版本的 android 提供可绘制对象？如果没有，您可以将所有 hdpi drawables 放在 drawables-hdpi 文件夹中

我希望我能帮上忙。

# php - jquery post没有调用php

> ID：11813113
> 
> 赞同：1
> 
> 时间：2012-08-05T00:44:14.940
> 
> 标签：php, jquery

当用户登录服务器时，我试图从浏览器发送一个变量。我无法做到这一点......

php代码：

```
<?php
echo "test";
  $email = $_REQUEST['email'] ;

  echo $email;
?> 
```

html页面：

```
<html>
  <head>
     <title>Demo</title>
       <script src="http://code.jquery.com/jquery-latest.js"></script>
  </head>
  <body>

  <script>

           alert("test");

$.post("receiver.php", { email: "John", message: "2pm" } )s;

</script>

 </body>
</html> 
```

你能告诉我我错过了什么吗？看起来我错过了一些非常基本的东西.. php 文件中的 echo 测试也没有打印

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:48:28.443

您需要定义一个函数来处理 php 返回的任何内容（您还遇到了 @tigrang 所说的轻微语法错误）。试试这个：

```
$.post("receiver.php", { email: "John", message: "2pm" }, function(data){ console.log(data);}); 
```

# c - 通过套接字传递字符串数组

> ID：11813118
> 
> 赞同：2
> 
> 时间：2012-08-05T00:46:07.390
> 
> 标签：c, sockets, tcp, segmentation-fault

我有一个与服务器和客户端程序的简单 TCP 连接。我在服务器和客户端都做了一个简单的结构作为消息传递：

```
struct {int c; char** v;} msg; 
```

我只是想从客户端发送 argc 和 argv（来自终端的输入）：

```
int main(int argc, char **argv){
...
msg.c = argc;
msg.v = argv;
sendto(Socket, &msg, sizeof(msg), 0, (struct sockaddr *)&input, sizeof(input)); 
```

但是当发送到服务器时，我可以调用 msg.c 来获取号码，我可以使用它，但是如果我尝试使用字符串数组，我会遇到 seg 错误：

```
recvfrom(Socket, &msg, sizeof(msg), 0, (struct sockaddr *)&input, &sizep);
printf("%d\n", msg.c);
printf("%s\n", msg.v[2]); 
```

我只用一个试过这个，`char *`我也无法发送字符串。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T00:50:55.313

该`sendto()`函数根本不遵循指针。因此，您将包含一个整数和一个指针的消息发送到另一侧。接收者得到一个指针值，它指向内存中没有任何意义的随机位置。

您需要做的是将您的数据*序列化为*可以通过套接字发送的内容。这意味着，没有指针。例如，对于单个字符串，您可以发送长度，后跟字符串的实际字节。对于多个字符串，您可以发送一个计数，后跟多个与单个字符串格式相同的字符串。

收到数据后，您需要将数据反序列化为`char *`字符串数组，如果这是您在接收器中需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T00:52:04.767

您不能发送数组。你似乎做的是发送一个指向数组的指针。指针是一个指向发送方 RAM 中数组开头的值。但是，此地址对于一个客户来说是本地的。如果您需要发送复杂数据，例如数组或类/结构，通常需要对它们进行序列化。周围有图书馆可以为您提供支持。我使用了 Google 的[Protocol Buffers](https://developers.google.com/protocol-buffers/)并喜欢它；你可能想看看它。

# jquery - 将函数放在单独的 js 文件中

> ID：11813120
> 
> 赞同：1
> 
> 时间：2012-08-05T00:46:15.410
> 
> 标签：jquery

我的主要 html 中有以下内容：

```
jQuery(document).ready(function(){
jQuery('body').flvplay(songlist, {something});}); 
```

我想将它移动到一个单独的 JS 文件并从主 html 进行函数调用。我使用以下内容创建了新的 JS：

```
play()
{
jQuery('body').flvplay(songlist, {something});
} 
```

最后，在包含新的 JS 文件后，我从主 html 中调用了 play 函数：

```
<script type="text/javascript">
play();
</script> 
```

由于某种原因，这不起作用。以上有什么问题吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T00:48:07.073

您需要使用`function`关键字声明函数：

```
function play()
{
    jQuery('body').flvplay(songlist, {something});
} 
```

此外，您删除`$(document).ready(...)`了 ，这很重要，否则您可能会尝试操作由于尚未加载而不存在的元素。您可能希望将调用代码修改为如下所示：

```
$(document).ready(function() {
    play();
}); 
```

* * *

如果不使用`function`关键字，则引用文件中的代码将被解析如下：

```
play()  // call the function `play` (which has not yet been defined)
        // as it does not yet exist, an error is thrown and execution is halted
{  // open a block (which is not useful here,
   //               since JavaScript has no block scope)
     jQuery('body').flvplay(songlist, {something});  // do something with body
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:49:09.450

之前没有`function`关键字`play()`

```
function play()
{
    jQuery('body').flvplay(songlist, {something});
} 
```

# objective-c - 如何改变 ViewController 之间的 segue 速度

> ID：11813121
> 
> 赞同：3
> 
> 时间：2012-08-05T00:46:59.853
> 
> 标签：objective-c, ios, segue, uistoryboard

是否可以控制segue速度？

我已经检查了文档，但 Apple 没有给出任何方法。

但我更多的是寻找破解和更改较低级别代码以进行慢动作连续的**想法**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T06:52:36.313

下面的代码是自定义的segue，您可以在代码中设置转换的**持续时间**。

```
- (void)perform 
{
    UIViewController *src = (UIViewController *) self.sourceViewController;
    UIViewController *dst = (UIViewController *) self.destinationViewController;
    [UIView transitionFromView:src.view
                        toView:dst.view
                      duration:3.0
                       options:UIViewAnimationOptionTransitionFlipFromLeft
                    completion:NULL];

} 
```

示例项目在 GitHub 中：[https ://github.com/weed/p120805_CustomSegue](https://github.com/weed/p120805_CustomSegue)

您可以下载并运行它。我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T17:01:38.210

为了防止僵尸的产生，我认为最好也使用子视图添加/删除：

```
- (void)perform
{
    UIView *src = ((UIViewController *) self.sourceViewController).view;
    UIView *dst = ((UIViewController *) self.destinationViewController).view;

    UIWindow *window = [[[UIApplication sharedApplication] delegate] window];
    [window insertSubview:dst aboveSubview:src];

    [UIView transitionFromView:src
                        toView:dst
                      duration:1.5
                       options:UIViewAnimationOptionTransitionCrossDissolve
                    completion:^(BOOL finished){
                        [src removeFromSuperview];
                        window.rootViewController = self.destinationViewController;
                    }];
} 
```

这是如果您不使用导航控制器！

# java - 在 Java Swing (Netbeans) 中创建下一步按钮

> ID：11813122
> 
> 赞同：2
> 
> 时间：2012-08-05T00:47:21.423
> 
> 标签：java, swing, jbutton

我当前的 GUI 中有五个按钮，分别名为 Browse、Unzip、Convert、Copy 和 Zip。第一个事件是浏览，并使用该按钮上传压缩文件，然后单击解压缩以解压缩该文件，然后单击转换和复制按钮，最后单击 Zip 按钮再次压缩文件。我将它们按顺序排列并一个一个地单击它们，但我想将这些操作作为浏览、下一步、下一步、下一步和完成按钮。所以请帮助我完成这项任务。

我的 Java Swing (Netbeans) 代码如下所示：

```
public class MyClass extends javax.swing.JFrame {
private void browseButtonActionPerformed(java.awt.event.ActionEvent evt) { 
//Code here 
} 
private void unzipButtonActionPerformed(java.awt.event.ActionEvent evt) { 
//Code here  
} 
private void convertButtonActionPerformed(java.awt.event.ActionEvent evt) {  
//Code here 
} 
private void copyButtonActionPerformed(java.awt.event.ActionEvent evt) {  
//Code here 
} 
private void zipButtonActionPerformed(java.awt.event.ActionEvent evt) {  
//Code here 
} 
} 
```

感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T00:51:37.510

在那种情况下你只需要一个`JFrame`和一个`JPanel`，每一次点击或每一步都会改变它的内容`JPanel`。`JFrame`但是包含或扩展的主类`JFrame`将引用您正在使用的文件。

PS 任何预制的 GUI 构建器都无法有效地实现这一点。但是，编程解决方案非常简单。

像这样的东西：http: [//java.sun.com/developer/technicalArticles/GUI/swing/wizard/](http://java.sun.com/developer/technicalArticles/GUI/swing/wizard/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T01:09:07.740

我建议使用`CardLayout`并添加多个`JPanel`s 。通常，我创建自己的`JPanel`子类来保存控件，然后将它们添加到 a`JFrame`中，在本例中为`CardLayout`set。您的“下一步”按钮可以更改显示的 JPanel……事实上，通过一些独创性和多个布局管理器，您只需要一个“下一步”按钮。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T01:12:35.707

这听起来像是带有[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)的经典向导应用程序。

您可以在 JFrame 的 BorderLayout.SOUTH 位置创建一个基本面板，该基本面板将包含您的操作按钮，并将许多面板添加到由 CardLayout 管理的主面板。

请参阅[使用 Java Swing 创建向导对话框](http://java.sun.com/developer/technicalArticles/GUI/swing/wizard/)

# mobile - 监控移动应用访问的 URL

> ID：11813129
> 
> 赞同：0
> 
> 时间：2012-08-05T00:48:37.553
> 
> 标签：mobile, web, monitor, traffic, packet-sniffers

我已经下载了一个 Android 应用程序（也适用于 iPhone 和 ipad）。我想监视它正在访问哪些 URL。在桌面上，您可以使用 Chrome 开发工具等工具处理浏览器流量，使用 Charles Proxy (http://www.charlesproxy.com/) 处理其他应用程序流量。是否有类似的方法可以从外部为应用程序设置代理，然后查看任何连接尝试，可能带有标头和响应？

我只需要这样做一次，以确保应用程序没有恶意，因此该过程不必是世界上最方便的方法。例如，它可能涉及在桌面上设置代理应用程序，然后通过它进行连接，或者在基于桌面的模拟器上运行 Android 或 iOS 版本并对其进行监控。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:02:36.073

在搜索 SO 时，可以找到很多关于此主题的内容。最好的解决方案似乎是将桌面设置为 android 设备的接入点，并像这里建议的那样在其上运行 wireshark

[在wireshark上捕获手机流量](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T23:15:09.320

你最好的选择是查尔斯代理试用版

设置查尔斯代理就像黄油

1）确保计算机和设备在同一网络上

2）在电脑上下载charles代理

3) 在设备上转到 wifi--> 连接名称--> 保留它--> 修改--> 手动代理--> 提供您的 IP 地址和端口 8888

4）在你这样做的时候让查尔斯在电脑上保持打开状态

5）您将在 charles 中弹出有关连接的信息，并开始向您显示从应用程序捕获的流量。

# php - php解析字符串错误

> ID：11813145
> 
> 赞同：1
> 
> 时间：2012-08-05T00:53:07.777
> 
> 标签：php, parsing, dom, strpos

我正在从一个字符串中提取文件，该字符串可以由用户输入或从读取页面源中获取。

我想提取所有 .jpg 图像 URL

所以，我正在使用以下（显示的示例文本）但是 a）它只返回第一个，b）它错过了 '.jpg'

```
$word1='http://';
$word2='.jpg';

$contents = 'uuuuyyyyyhttp://image.jpgandagainhereitishttp://image2.jpgxxxxcccffff';

$between=substr($contents, strpos($contents, $word1), strpos($contents, $word2) - strpos($contents, $word1));

echo $between; 
```

有没有更好的方法来做到这一点？

在解析网页的情况下，我不能使用简单的 DOM，例如`$images = $dom->getElementsByTagName('img');`有时图像引用不在标准标签中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:05:14.293

你可以这样做：

```
<?php

$contents = 'uuuuyyyyyhttp://image.jpgandagainhereitishttp://image2.jpgxxxxcccffff';

$matches = array();

preg_match_all('#(http://[^\s]*?\.jpg)#i',$matches);

print_r($matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:23:27.343

您可以使用`preg_match_all`（如前所述）执行此操作，也可以使用以下函数。

它只是分解原始字符串，检查所有部分的有效链接并将其添加到数组中，然后返回。

```
function getJpgLinks($string) {
    $return = array();
    foreach (explode('.jpg', $string) as $value) {
        $position = strrpos($value, 'http://');
        if ($position !== false) {
            $return[] = substr($value, $position) . '.jpg';
        }
    }
    return $return;
} 
```

# java - 在 J2ME 中解析 JSON

> ID：11813146
> 
> 赞同：5
> 
> 时间：2012-08-05T00:53:44.563
> 
> 标签：java, json, parsing, java-me

所以，我一直在尝试解析这个嵌套的 JSON 字符串。如果这是普通的 Java，甚至是 php，我敢肯定这早就完成了。不幸的是，我在这个问题上坚持使用 J2ME。通过一些搜索，我发现存在一个[单独的 JSON parser](https://github.com/upictec/org.json.me/)。[这是我通过对类似问题](https://stackoverflow.com/questions/2981296/json-parser-for-j2me)的一些挖掘发现的。我自己尝试了一些工作，并举了[另一个问题](https://stackoverflow.com/questions/5986123/parsing-nested-json-object-in-android)的例子。但是，我仍然遇到一些困难。我现在解释一下。

这是我要解析的 JSON 字符串：

```
{"Result":"Success","Code":"200","CustomerInfo":"{\"clientDisplay\":{\"customerId\":429,\"globalCustNum\":\"0012-000000429\",\"displayName\":\"Hugo Daley\",\"parentCustomerDisplayName\":\"G-KINGSTON\",\"branchId\":12,\"branchName\":\"Bangalore_branch1244724101456\",\"externalId\":\"123000890\",\"customerFormedByDisplayName\":\"New User1244724101456\",\"customerActivationDate\":\"2012-06-17\",\"customerLevelId\":1,\"customerStatusId\":3,\"customerStatusName\":\"Active\",\"trainedDate\":null,\"dateOfBirth\":\"1950-10-10\",\"age\":61,\"governmentId\":\"100000090\",\"clientUnderGroup\":true,\"blackListed\":false,\"loanOfficerId\":17,\"loanOfficerName\":\"New User1244724101456\",\"businessActivities\":null,\"handicapped\":null,\"maritalStatus\":null,\"citizenship\":null,\"ethnicity\":null,\"educationLevel\":null,\"povertyStatus\":null,\"numChildren\":null,\"areFamilyDetailsRequired\":false,\"spouseFatherValue\":null,\"spouseFatherName\":null,\"familyDetails\":null},\"customerAccountSummary\":{\"globalAccountNum\":\"001200000001259\",\"nextDueAmount\":\"2128.0\"},\"clientPerformanceHistory\":{\"loanCycleNumber\":0,\"lastLoanAmount\":\"0.0\",\"noOfActiveLoans\":0,\"delinquentPortfolioAmount\":\"0.0\",\"totalSavingsAmount\":\"1750.0\",\"meetingsAttended\":0,\"meetingsMissed\":0,\"loanCycleCounters\":[],\"delinquentPortfolioAmountInvalid\":false},\"address\":{\"displayAddress\":null,\"city\":\"\",\"state\":\"\",\"zip\":\"\",\"country\":\"\",\"phoneNumber\":\"\"},\"recentCustomerNotes\":[{\"commentDate\":\"2012-06-17\",\"comment\":\"appr\",\"personnelName\":\"New User1244724101456\"}],\"customerFlags\":[],\"loanAccountsInUse\":[{\"globalAccountNum\":\"001200000001262\",\"prdOfferingName\":\"Hawker Loan\",\"accountStateId\":3,\"accountStateName\":\"Application Approved\",\"outstandingBalance\":\"15643.0\",\"totalAmountDue\":\"8977.0\"},{\"globalAccountNum\":\"001200000001279\",\"prdOfferingName\":\"Hazina Micro Loan\",\"accountStateId\":2,\"accountStateName\":\"Application Pending Approval\",\"outstandingBalance\":\"6439.0\",\"totalAmountDue\":\"1716.0\"},{\"globalAccountNum\":\"001200000001280\",\"prdOfferingName\":\"Car Finance\",\"accountStateId\":3,\"accountStateName\":\"Application Approved\",\"outstandingBalance\":\"381.5\",\"totalAmountDue\":\"120.0\"}],\"savingsAccountsInUse\":[{\"globalAccountNum\":\"001200000001260\",\"prdOfferingName\":\"Current Account\",\"accountStateId\":16,\"accountStateName\":\"Active\",\"savingsBalance\":\"1750.0\",\"prdOfferingId\":null}],\"customerMeeting\":{\"meetingSchedule\":\"Recur every 1 Week(s) on Monday\",\"meetingPlace\":\"KINGSTON\"},\"activeSurveys\":false,\"customerSurveys\":[],\"closedLoanAccounts\":[{\"globalAccountNum\":\"001200000001261\",\"prdOfferingName\":\"AUTO LOAN-2\",\"accountStateId\":10,\"accountStateName\":\"Cancel\",\"outstandingBalance\":\"2576.0\",\"totalAmountDue\":\"206.0\"}],\"closedSavingsAccounts\":[]}"} 
```

别担心，这只是示例数据，这里没有任何实际内容。

现在我需要客户编号、姓名、地址和储蓄账户余额。这是我用来解析它的代码：

```
public CustomerInfo(String jsonTxt) {
try {
    JSONObject json = new JSONObject(jsonTxt);
        JSONObject customer = json.getJSONObject("CustomerInfo");
    custNo = json.getString("globalCustNum");
    custName = json.getString("displayName");
    address = json.getString("DisplayAddress");
    savAcctBal =  json.getDouble("totalSavingsAmount");
} catch (final JSONException je) {
        je.printStackTrace();
}
} 
```

这当然会引发 JSONException。我了解到 JSON 库可能有一些错误。我用打印语句做了一些技巧。事实证明，它喜欢使用 JSON 字符串的第一个元素。这严重破坏了我们在示例中的嵌套元素。

有没有我可以使用的替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T09:47:22.543

男孩，我想自己开枪吗？我在睡觉前就发现了我的问题。我的方法是正确的；这只是我错误地阅读了 Print 语句的输出以及低估了 JSON 的嵌套程度的问题。

在内部，JSONOBject 类将 JSON 元素、对等存储在 Hashtable 中。Hashtable 有一个副作用，它将对提供给它的数据进行排序。这当然取决于 JSON 的排序方式。我认为它正在消耗 JSON 的某些部分，而它实际上只是将它们放在后面......如果不是 JSON 的结尾，那么它就回来了。这大大的让我过关。直到我在 Hashtable 本身上运行 toString 之前，我才意识到这一点。然后我也意识到 JSON 实际上比我想象的更嵌套。我想要得到的四个部分，在 3 个不同的嵌套 JSON 对象中。

因此，我的解决方案是让自己更加痛苦，只需将 JSON 放入漂亮的打印机并正确查看结构即可。

这是我的解决方案代码：

```
 public CustomerInfo(String jsonTxt) {
try {
    JSONObject json = new JSONObject(jsonTxt);
        JSONObject customer = new JSONObject(json.getString("CustomerInfo"));
        JSONObject client = new JSONObject(customer.getString("clientDisplay"));
        custNo = client.getString("globalCustNum");
    custName = client.getString("displayName");
        JSONObject cph = new JSONObject(customer.getString("clientPerformanceHistory"));
        JSONObject caddress = new JSONObject(customer.getString("address"));
    address = caddress.getString("displayAddress");
    savAcctBal =  cph.getDouble("totalSavingsAmount");
} catch (final JSONException je) {
        je.printStackTrace();
}
} 
```

提示：总是在你的 JSON 上使用漂亮的打印机，并在你做任何事情之前欣赏它的结构。我发誓这不会再发生在我身上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:38:53.777

`JSON`您可以通过以下示例解析字符串

```
public CustomerInfo(String jsonTxt) {
    try {
        JSONObject json= (JSONObject) new JSONTokener(jsonTxt).nextValue();
        test = (String) json2.get("displayName");
    }
    catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

# perl - 如何将 Perl sub 的返回值转换为 arrayref？

> ID：11813149
> 
> 赞同：7
> 
> 时间：2012-08-05T00:53:52.840
> 
> 标签：perl, mojolicious

我尝试这样的代码：

```
my @rows = getRows($sth);
$self->stash(rows => \@rows); 
```

getRows 是一个子函数名，代码在模板中工作。$rows 是一个数组。

我写这样的代码：

```
$self->stash(rows => \getRows($sth)); 
```

$rows 是一个 REF，这是错误的。

如果这样写代码：

```
$self->stash(rows => getRows($sth)); 
```

$rows 是一个 HASH，这是错误的。

有没有办法将两行代码写成一个？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-05T01:02:33.450

是的。你可以写

```
$self->stash(rows => [getRows($sth)]); 
```

方括号`[]`用于创建所需的参考。

# oop - 创建 jQuery Mobile 页面的实例

> ID：11813160
> 
> 赞同：0
> 
> 时间：2012-08-05T00:57:44.930
> 
> 标签：oop, jquery-mobile, instantiation

我希望能够使用现有的 jQuery Mobile 页面作为模板来创建 jQuery Mobile 页面的实例。谁能指出我对此的正确指导。是否存在以下方面：

```
var pageInstance = new $mobile.createPage(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:21:34.220

如果您确定您的页面当前已加载到 DOM 中。试试这个，

```
var page = $('#PageId'); 
```

# ruby-on-rails - rails cocoon gem 没有错误也没有输出

> ID：11813161
> 
> 赞同：3
> 
> 时间：2012-08-05T00:57:55.233
> 
> 标签：ruby-on-rails, simple-form, nested-forms, cocoon-gem

我正在使用 cocoon gem 处理动态嵌套的表单。我有两个模型

```
class CrossTable < ActiveRecord::Base
  attr_accessible :title, :table_name, :database, :folder_label_id, :foreign_fields_attributes

  belongs_to :folder_label
  has_many :foreign_fields

  accepts_nested_attributes_for :foreign_fields

  validates :title, :table_name, :database, :folder_label_id, presence: true

end

class ForeignField < ActiveRecord::Base
  attr_accessible :cross_table_id, :column_name, :description

  belongs_to :cross_table
  has_many :filter_sets

end 
```

我在将 //=require cocoon 添加到 application.js 文件的 gemfile 中有 cocoon 和 jquery-rails

这是我的部分表格

```
<%= simple_form_for @table do |f| %>
    <%= f.input :title %>

    <%= f.input :folder_label_id, :collection => @folders, :label_method => :title, :value_method => :id %>
    <br><br>
    <%= f.input :table_name %>
    <%= f.input :database %>

    <%= f.simple_fields_for :foreign_fields do |fields| %>
        <%= render 'foreign_field_fields', :f => fields %>
        <div id='links'>
            <%= link_to_add_association 'Add Field', f, :foreign_fields %>
        </div>
        <% end %>

    <%= f.button :submit %>

<% end %> 
```

@table 是交叉表模型的一个实例。foreign_field_fields 部分中什么都没有显示，link_to_add_association 什么也不做，我也没有错误。我该如何开始调试呢？有人发现错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T22:17:46.537

你写了`link_to_add_association`里面的`simple_fields_for`，它将遍历所有`:foreign_fields`并执行给定的块。因此，如果还没有外国字段，`link_to_add_association`则永远不会显示。

您应该按如下方式编写您的视图（如文档所述）：

```
<%= simple_form_for @table do |f| %>
    <%= f.input :title %>

    <%= f.input :folder_label_id, :collection => @folders, :label_method => :title, :value_method => :id %>
    <br><br>
    <%= f.input :table_name %>
    <%= f.input :database %>

    <%= f.simple_fields_for :foreign_fields do |fields| %>
        <%= render 'foreign_field_fields', :f => fields %>
    <% end %>
    <div id='links'>
      <%= link_to_add_association 'Add Field', f, :foreign_fields %>
    </div>

    <%= f.button :submit %>

<% end %> 
```

希望这可以帮助。

# javascript - 是否可以从 base64 图像中读取像素数据？

> ID：11813162
> 
> 赞同：7
> 
> 时间：2012-08-05T00:57:59.713
> 
> 标签：javascript, base64

所以这里我有一个base64编码的png图像：

```
iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg== 
```

我使用`atob()`. 结果是：

> `PNG`
> 
> `IHDRo&åIDAT×cøÿÿ?Ã Ã Ð1ñXÍõ5ËÑIEND®B``

是否可以从此字符串中取出颜色值？（不使用`<canvas>`）

PS：似乎有可能，因为我找到了一个演示： http:
　[//labs.calyptus.eu/JSBin/Demo/Viewer.html](http://labs.calyptus.eu/JSBin/Demo/Viewer.html)
　但我不确定他是如何做到的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T01:10:50.903

在您指向的页面的源代码中，有一个函数使用 PNG.js 和其他一些实用程序来执行您想要的操作：

```
function show(data){
    var png = new PNG(data);
    var img = document.getElementById('image'), limg = document.getElementById('largeimage');
    document.getElementById('nativeimage').src = 'data:image/png;base64,' + data;
    img.innerHTML = '';
    limg.innerHTML = '';
    img.style.width = png.width + 'px';
    img.style.height = png.height + 'px';
    limg.style.width = (png.width * 3) + 'px';
    limg.style.width = (png.height * 3) + 'px';
    var line;
    while(line = png.readLine())
    {
        for (var x = 0; x < line.length; x++){
            var px = document.createElement('div'), px2 = document.createElement('div');
            px.className = px2.className = 'pixel';
            px.style.backgroundColor = px2.style.backgroundColor = '#' + line[x].toString(16).padRight('0', 6);
            img.appendChild(px);
            limg.appendChild(px2);
        }
    }
} 
```

如果您查看此函数中的循环，您会注意到它正在逐行读取 PNG 并绘制像素。

一个简化的例子是：

```
var png = new PNG(data); // data is the base64 encoded data
var line;
var y = 0;
while(line = png.readLine())
{
    for (var x = 0; x < line.length; x++){
        var pixel = doSomethingWithPixelData(x, y, '#' + line[x].toString(16).padRight('0', 6));
    }
    y++;
}

function doSomethingWithPixelData(x, y, color) {
    // guess what? do something with pixel data here ;)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T01:01:02.890

不，您不能直接从该字符串中获取颜色值。您必须以某种方式解码 PNG 图像数据（已压缩）。使用`<canvas>`是一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-01T22:44:47.780

在不必依赖画布或浏览器渲染周期的情况下执行此操作会很有用。例如，如果您需要在单元测试运行器等无头环境中完成这项工作。

这可以在一个名为[png.js的库的帮助下实现](https://github.com/arian/pngjs)

```
const PNGReader = require('png.js');

function parseDataImage(data: string) {
  console.log('Data is', data); // Data is data:image/png;base64,iVBORw0KGgoAAAANSUh...
  const base64 = data.split(',')[1];
  console.log('Base64 is', base64); // Base64 is iVBORw0KGgoAAAANSUh...
  const bytes = atob(base64); // Base64 Decode
  console.log('Bytes are', bytes); // Bytes are <Some binary data>
  const png = new PNGReader(bytes);
  png.parse((err, png) => {
    console.log('Pixels are', png.pixels); // Pixels are Buffer{0: 255, 1: 0, 2: 65, ...
  });
} 
```

# php - PHP foreach 循环读取文件，创建数组并打印文件名

> ID：11813165
> 
> 赞同：1
> 
> 时间：2012-08-05T00:58:09.297
> 
> 标签：php, foreach, file-get-contents

有人可以帮我解决这个问题吗？

我有一个包含一些文件的文件夹（没有扩展名）

/模块/邮件/模板

使用这些文件：

*   测试
*   测试2

我想首先循环并读取文件名（test 和 test2）并将它们作为下拉项打印到我的 html 表单中。这行得通（表单 html 标记的其余部分在下面的代码上方和下方，此处省略）。

但我也想读取每个文件的内容并将内容分配给 var $content 并将其放在我以后可以使用的数组中。

这就是我尝试实现这一目标的方式，但没有运气：

```
 foreach (glob("module/mail/templates/*") as $templateName)
        {
            $i++;
            $content = file_get_contents($templateName, r); // This is not working
            echo "<p>" . $content . "</p>"; // this is not working
            $tpl = str_replace('module/mail/templates/', '', $templatName);
            $tplarray = array($tpl => $content); // not working
            echo "<option id=\"".$i."\">". $tpl . "</option>";
            print_r($tplarray);//not working
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:04:05.403

在循环外初始化数组。然后在循环内为其赋值。在您离开循环之前，不要尝试打印数组。

`r`调用中的`file_get_contents`错误。把它拿出来。第二个参数`file_get_contents`是可选的，如果使用它应该是一个布尔值。

如果尝试读取文件时出错，请检查`file_get_contents()`不返回的内容。`FALSE`

您指的是错字`$templatName`而不是`$templateName`.

```
$tplarray = array();
foreach (glob("module/mail/templates/*") as $templateName) {
        $i++;
        $content = file_get_contents($templateName); 
        if ($content !== FALSE) {
            echo "<p>" . $content . "</p>";
        } else {
            trigger_error("file_get_contents() failed for file $templateName");
        } 
        $tpl = str_replace('module/mail/templates/', '', $templateName);
        $tplarray[$tpl] = $content; 
        echo "<option id=\"".$i."\">". $tpl . "</option>";
}
print_r($tplarray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T01:30:01.710

这段代码对我有用：

```
<?php
$tplarray = array();
$i = 0;
echo '<select>';
foreach(glob('module/mail/templates/*') as $templateName) {
    $content = file_get_contents($templateName); 
    if ($content !== false) {
        $tpl = str_replace('module/mail/templates/', '', $templateName);
        $tplarray[$tpl] = $content; 
        echo "<option id=\"$i\">$tpl</option>" . PHP_EOL;
    } else {
        trigger_error("Cannot read $templateName");
    } 
    $i++;
}
echo '</select>';
print_r($tplarray);
?> 
```

# python-2.7 - Python PDB 调试器（在调试器中工作但不在 SciTE 中的代码）

> ID：11813166
> 
> 赞同：1
> 
> 时间：2012-08-05T00:58:11.923
> 
> 标签：python-2.7, vpython

我的 Python PDB 调试器和我用 SciTE 编写的代码有问题。

所以我有一个名为“func”的类。这个类有一个叫做“hermite”的方法。我正在使用 PDB 调试器来找出为什么我的程序在执行此方法时会冻结。

我开始：

```
pdb.set_trace()
func.hermite(a,b,c) 
```

当我按“n”时程序冻结，转到调试器中的下一行。

如果我把`pdb.set_trace()`方法“hermite”放在里面，我会得到：

```
def hermite(a,b,c):
    pdb.set_trace()
    .... (stuff here) 
```

现在在调试器中，该方法完全执行，完全没有问题。

我不知道为什么在调用该方法时调试器会冻结，但是当 `set_trace`将其放入方法中时，程序运行得很好。另外，在 SciTE 中，无论 `where set_trace()`放什么，程序都不会运行。因此，出于某种原因，就好像程序只能从调试器运行，方法内部带有 set_trace 。

关于问题是什么的任何想法？我会粘贴“hermite”的代码，但它很长。我认为重要的部分是它`set_trace`在方法内部时执行得非常好，但在方法外部时它会冻结`set_trace`。

**更新**：没关系我已经解决了这个问题。在我的 Hermite 方法中，我对微分方程进行时间步进，我使用 (15 - (-15)) / 100 作为时间步长间隔，python 将该值设为 0，因此它无限期地运行。程序在调试器中工作的原因是因为我强制时间步为非零值以使执行时间变小。无论如何感谢任何看到这个的人。

# jsonp - 将 jsonp 与 django-rest-framework 一起使用

> ID：11813170
> 
> 赞同：6
> 
> 时间：2012-08-05T00:58:59.240
> 
> 标签：jsonp, django-rest-framework

django rest 框架发布说明声称在 0.3.0 中添加了 JSONP 支持。我还在框架中找到了一个 JSONPRenderer 类。但是，我似乎找不到任何关于如何使用这个东西的文档......我对 jsonp 相当陌生。

有没有人成功地将 jsonp 与 django rest 框架一起使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T00:58:59.240

在发布此内容时，我找到了答案（或至少是一个答案）。jsonp 渲染器似乎默认在 ModelResource 上可用，因此您需要做的就是将“？format=json-p”添加到请求的 url。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-02T01:22:36.797

以防万一有人在寻找`jsonp`。

首先（[文档](http://www.django-rest-framework.org/api-guide/renderers/)）：

`pip install djangorestframework-jsonp`

然后修改您的 REST 框架设置。

```
REST_FRAMEWORK = {
  'DEFAULT_RENDERER_CLASSES': (
    'rest_framework_jsonp.renderers.JSONPRenderer',
  ),
} 
```

最后确保您的网址包含`?format=jsonp`而不是`?format=json-p`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T09:08:55.703

```
from rest_framework.views import APIView
from rest_framework_jsonp.renderers import JSONPRenderer, JSONRenderer
from rest_framework.response import Response

class YourClass(APIView):
    renderer_classes = (JSONPRenderer, JSONRenderer)

    def get(self, request, *args, **kwargs):
        your_result = {{ your serialized result }}
        return Response({'status': 'success', 'result': your_result}) 
```

# macos - Maya 之外的 Mel 解析器

> ID：11813174
> 
> 赞同：0
> 
> 时间：2012-08-05T01:00:12.157
> 
> 标签：macos, mel

有没有办法在 osx 上的 Maya 之外执行 Mel 脚本？我正在尝试教授编程基础知识，因此不需要运行 Maya 命令，只是一个轻松演示变量、循环、函数等的地方。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:27:02.260

我不知道 Maya 以外的任何东西都可以使用 MEL 拾取和运行，但是如果只是在没有 Maya GUI 混乱/分心的情况下访问解释器，您可以在提示模式下运行 Maya（使用`-prompt`标志调用 maya）

（你也可以打开一个命令端口并这样做......但这可能比那个阶段的价值更麻烦）

# php - 使用 cakephp 从数据库中查找表连接值

> ID：11813176
> 
> 赞同：0
> 
> 时间：2012-08-05T01:00:53.467
> 
> 标签：php, mysql, cakephp

我正在尝试在 cakephp 的视图中访问用户名。我得到了一个用户 ID，我需要使用它来查找存储在不同表中的用户名。

我正在检索显示的表格是消息，如下所示

```
id |  title | message | from_user  | to_user | date 
```

包含用户名的用户表

```
id | username | email | password 
```

无论如何，我怎样才能在消息中查找 from_user 的用户名？我仍然习惯于蛋糕，所以我不知道如何在不实际编写查询的情况下做出“加入”语句。

我应该从控制器中的操作发送用户名还是可以从视图中执行此操作？

**编辑-我让它工作**

这是我现在的索引功能

```
public function index() {

  $options['joins'] = array(
    array('table' => 'Users',
        'type' => 'inner',
            'fields' => array('user.username'),
        'conditions' => array(
            'Message.from_user = User.id',
            'alias' => 'user_id')
    )
);

$message = $this->Message->find('all', $options);

$this->set('messages', $message);
} 
```

我将此添加到我的消息控制器中，现在显示用户名，但仅适用于第一条消息。其他都是空白的。

```
public $belongsTo = array('User'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T06:51:46.017

您必须在 Message 模型中重新定义您的关系：

```
public $belongsTo = array(
    'Sender' => array(
        'className' => 'User',
        'foreignKey' => 'from_user'
    ),
    'Recipient' => array(
        'className' => 'User',
        'foreignKey' => 'to_user'
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T01:18:17.653

您可以使用可包含行为来检索该记录。我所做的是将行为添加到 AppModel 并在 AppModel 中将递归设置为 -1。

然后你的`read()`电话会变成

```
public function view($id) {
    $message = $this->Message->find('first', array(
        'conditions' => array('Message.id' => $id),
        'contain' => array(
            'FromUser' => array('fields' => array('FromUser.username')),
        ),
    ));
    $this->set('message', $message'); // or just $this->set(compact('message'));
} 
```

在您看来：

```
$message['FromUser']['username']; 
```

您也`debug($message);`可以在视图或控制器中执行操作，以查看变量内部的确切内容及其结构。

假设您的关系设置正确，这应该检索与消息记录关联的 FromUser.username 字段。

有关可包含的更多信息：http: [//book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html) (2.x) 和[http://book.cakephp.org/view/1323/Containable](http://book.cakephp.org/view/1323/Containable) (1.3 )

# image - 一个站点可以检测并阻止另一个站点多次请求图片吗？

> ID：11813178
> 
> 赞同：1
> 
> 时间：2012-08-05T01:01:18.850
> 
> 标签：image, request

我依赖于我的用户上传图片链接，而不是图片文件。因此，我的站点实际上通过将这些外部站点包含在元素中并从数据库中获取 src 来请求这些外部站点的链接。

网站是否可以检测到他们正在接收大量“请求”（不知道这是否是正确的术语）并阻止您的网址发出更多请求？

如果可以，有多少次会被忽视？还有诸如必须添加指向源的链接之类的策略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:06:22.297

简短的回答：是的，可以检测和阻止对图像等文件的热链接。你能做多少次？这取决于托管您正在热链接的文件的网站设置的限制。对于每个服务器，对于这些限制并没有真正的明确答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T01:07:54.637

站点可以检测并阻止您的 IP 地址，尤其是当您发送大量请求时，这些请求可能会降低其站点速度并导致其最终出现性能问题。不过，让用户发布链接应该不是问题。

# sorting - 将子路径作为变量（节点类型）或 eval() 传递包含相对 XPATH 的字符串

> ID：11813183
> 
> 赞同：0
> 
> 时间：2012-08-05T01:02:58.873
> 
> 标签：sorting, xpath, uri, eval, xquery

我想成功实现以下功能，如果您对其进行编码，它就可以工作：

```
declare function local:sort($collection as node()*, $filter as xs:SUBPATH?) as node()*{
     for $element in $collection
     order by 
        if ($filter) then ($element/$filter) (: OR SOME KIND OF fn:eval($filter) IF WE DEFINED $filter AS AN xs:string :)
        else              ($element/name()) (: Default :)
     descending
     return $element
}; 
```

它可以这样称呼：

```
for $element in local:sort(doc('data')/Data/*,'/@myAttr')
return $element 
```

或者

```
for $element in local:sort(doc('data')/Data/*,'/subnode/subnode/name()')
return $element 
```

或者

```
for $element in local:sort(doc('data')/Data/*,()) (: This is the default of function = own elment´s name :)
return $element 
```

Mx 问题是通过子路径。要么我需要知道某种方式将相对 XPATH 作为参数和节点类型发送，要么我需要某种 eval 从 xs:string 传递到运行时有效代码

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:21:48.033

您可以考虑 (a) 生成过滤器是硬编码的查询，或 (b) 使用特定于 XQuery 供应商的 eval() 函数，或 (c) 如果您选择 XQuery 引擎，则使用 XQuery 3.0 高阶函数支持他们呢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:09:40.253

由于这个想法，我最终做了以下事情[如何在 XQUERY 1.0 FLOWR 中解决这个自动增量 var 案例？](https://stackoverflow.com/questions/11816437/how-can-i-solve-this-autoncremental-var-case-in-xquery-1-0-flowr/11816876#11816876)：

```
(: This is a workaround solution as xquery:eval() is not working with var bindings until BaseX 7.3 version :)
(: It evals $context node + literal subpath with a pattern of '(/)lit/lit/lit/@attr' or '(/)lit/lit/lit' representing (/)lit/lit/lit/name(). If subpath null, it returns $context/name().:) 
declare function u:eval-path($context as node()*, $subnodes as xs:string*) as item()* {
  if(empty($subnodes)) then $context/name()
  else(
    if (count($subnodes) eq 1) then ( (: Last Element :)
               if (starts-with($subnodes[1],'@')) then $context/@*[name()=substring-after($subnodes[1],'@')]
                   else $context/*[name()=$subnodes[1]]/name()
         )   
    else if ($subnodes[1] eq '') then u:eval-path($context, $subnodes[position() gt 1])
    else u:eval-path($context/*[name()=$subnodes[1]],$subnodes[position() gt 1])
   )
};

(: Sorts the given collection by given criteria, which should be a pattern '(/)lit/lit/lit/@attr' or '(/)lit/lit/lit' representing (/)lit/lit/lit/name() :)
(: If criteria is null, everything is ordered by $elements/name(). Theres no way to filter intermediate nodes as in /lit/*[name()='X']/lit :)
declare function u:sort($collection as node()*, $criteria as xs:string?) as node()*{
    for $element in $collection
    order by u:eval-path($element,tokenize($criteria,'/'))
    ascending
    return $element
}; 
```

# button - 如何使后退按钮充当Android中的主页按钮

> ID：11813187
> 
> 赞同：0
> 
> 时间：2012-08-05T01:03:26.840
> 
> 标签：button, back

我有一个非常简单的应用程序。该应用程序提出一个问题，并根据用户单击的内容显示不同的文本。现在，当按下主页按钮时，手机会进入主屏幕并且应用程序会暂停。

但是当我按下后退按钮时，对话框消失了，但白色背景（Eclipse 制作的应用程序中的默认值）仍然存在。然后我必须再次按下返回按钮才能进入主屏幕。

我的问题，有没有办法让后退按钮充当主页按钮返回主屏幕？如果有，那是什么。

我尝试过使用 onStop 和 onResume 和 onPause 但同样的事情发生了。

谢谢，

多纳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:17:14.860

听起来像安卓 SDK。所以，我假设你正在做 Android 开发。您必须重写名为 OnBackPressed() 的方法。然后你可以覆盖后退按钮来做你想做的事。

# silverlight - outlook.com 整个网站都使用 Silverlight 吗？

> ID：11813188
> 
> 赞同：-1
> 
> 时间：2012-08-05T01:03:33.373
> 
> 标签：silverlight, outlook.com

我试图使用outlook.com 发送电子邮件，然后我看到chrome 说`Silverlight extension crashed`现在我想知道outlook.com 是否使用silverlight。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T01:06:04.103

是的。它正在使用 Silverlight。您可以从源代码中的这一部分看出：

```
requiredSilverlightVersion: "4.0.50401" 
```

# winforms - C++ 二维数组

> ID：11813191
> 
> 赞同：0
> 
> 时间：2012-08-05T01:04:12.670
> 
> 标签：winforms, multidimensional-array

我在学校的这个项目上遇到了一些问题。我正在尝试使用二维数组，并收到一些关于“没有从 int 转换为 int * 和 '>='：'int [5]' 与 'int' 的间接级别不同”的错误。我可以为一维数组编写它，但对二维的语法有困难。关于我可能缺少的东西，有人可以指出我正确的方向吗？我在 btnShow_CLick 之后注释掉了它并且它工作正常，它只是 btnGroup_Click 我显然遗漏了一些东西。

感谢任何可能分享一些知识的人。

```
 static const int NUMROWS = 4;
    static const int NUMCOLS = 5;
    int row, col;
    Graphics^ g;
    Brush^ redBrush;
    Brush^ yellowBrush;
    Brush^ greenBrush;
    Pen^ blackPen;

private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {
             g = panel1->CreateGraphics();
             redBrush = gcnew SolidBrush(Color::Red);
             yellowBrush = gcnew SolidBrush(Color::Yellow);
             greenBrush = gcnew SolidBrush(Color::Green);
             blackPen = gcnew Pen(Color::Black);
         }

    private: System::Void btnShow_Click(System::Object^  sender, System::EventArgs^  e) {

         panel1->Refresh();

         for (int row = 0; row < NUMROWS; row++)
         {
             for (int col = 0; col < NUMCOLS; col++)
             {
                 Rectangle seat = Rectangle(75 + col * 75,40 + row *40,25,25);
                 g->DrawRectangle(blackPen, seat);
             }
         }
     }

private: System::Void btnGroup_Click(System::Object^  sender, System::EventArgs^  e) {
             int score[NUMROWS][NUMCOLS] = {{45,65,11,98,66},
                                        {56,77,78,56,56},
                                        {87,71,78,90,78},
                                        {76,75,72,79,83}};

         int mean;
         int student;
         mean = CalcMean(score[]);
         txtMean->Text = mean.ToString();

         for (int row = 0; row < NUMROWS; row++)
         {
             for (int col = 0; col < NUMCOLS; col++)
             {
                 student = (row*NUMCOLS) + (col);
                 Rectangle seat = Rectangle(75 + col * 75,40 + (row * 40),25,25);
                 if (score[student] >= 80
                     g->FillRectangle(greenBrush, seat);
                 else if (score[student] >= mean)
                     g->FillRectangle(yellowBrush, seat);
                 else 
                     g->FillRectangle(yellowBrush, seat);
                 g->DrawRectangle(blackPen, seat);
             }
         }
     }

     private: double CalcMean(int score[])
     {
         int sum = 0;
         int students = NUMROWS * NUMCOLS;
         for (int i=0; i< students; i++) sum += score[i];
         return sum / students;
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:20:07.230

`Score[student]`等价于`*(score+student)`，这是一个`*int`。相反，您可能应该使用`score[row][col]`，或其等价物`**(score+student)`（我强烈建议使用数组表示法）。它也等同于`*Score[student]`，但这很丑陋。

另外，当我说“它是等价的”时，只是因为`sizeof int ==sizeof (*int)`. 如果您将指针逻辑与数组中的另一种类型一起使用，您可能会得到奇怪的结果。

# objective-c - 我的第一个 Cocoa 主从应用程序：绑定困难

> ID：11813193
> 
> 赞同：0
> 
> 时间：2012-08-05T01:04:45.133
> 
> 标签：objective-c, cocoa, nstableview, cocoa-bindings, nsarraycontroller

我正在 Cocoa 中编写我的第一个主细节视图。我的数据模型非常简单：只是一个 NSMutableArray，其中包含具有几个 NSStrings 属性的单个类的实例。

这是我到目前为止创建的内容：

*   代表实例的类。
*   一个 NSMutableArray 指定为我的应用程序委托的属性以保存类实例。
*   一个主细节视图，带有一个 NSTable 和一些文本字段来保存选择实例的属性。
*   具有指定应用程序委托的绑定的 NSArrayController，以及作为模型键路径的 NSMutableArray 属性的名称。
*   NSTable 和 NSArrayController 的列之间的绑定（控制器键 = "arrangedObjects"，每列的模型键路径 = 类的一个属性）。
*   视图的文本字段和选择之间的绑定（控制器键 = “选择”，每个文本字段的模型键路径 = 类的属性）。
*   视图中的“+”按钮和“-”按钮可用于添加和删除对象。

但是，这种设计有两个问题：

(1) 我找不到实现“+”和“-”按钮的好方法。首先，我将它们绑定到数组控制器的 add: 和 remove: 属性。虽然这似乎可行，但它有一个问题：我的类声明了一个将 NSStrings 初始化为存根值的 init 成员，但数组控制器似乎没有 [init] 新实例，因为新的列表条目有空字符串每一列。

接下来，我将它们附加到我的应用程序委托中的 IBActions，该委托从 NSMutableArray 中添加或删除了一个对象。然而，这感觉不对——感觉就像我通过不与阵列控制器交谈而违反了模型-视图-控制器架构。例如，“-”函数必须与数组控制器对话才能获得选定的项目。另外，我注意到我必须在更改数组后发送 [didChangeValueForKey] 消息 - 这感觉像是我做错了的信号。

(2) 我视图中的详细子视图之一是绑定到所选对象中的 NSString 的 NSTextView。它确实没有按预期工作：输入新文本时，即使选择了类的其他成员（应该具有不同的值），文本仍然保持不变。此外，文本数据不会保存到类的任何实例中。

有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:27:49.790

这是一个应该接近您想要的示例：

```
#import "AppDelegate.h"
#import "Members.h"

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    self.theData = [NSMutableArray arrayWithObject:[[Members alloc] init]];
}

-(IBAction)addMember:(id)sender {
    [self.controller addObject:[[Members alloc] init]];
}

-(IBAction)removeMember:(id)sender {
    [self.controller removeObjectAtArrangedObjectIndex:self.controller.selectionIndex];
} 
```

数组控制器（其 IBOutlet 是控制器）将其内容数组绑定到数据。成员是我的类的名称，它具有 3 个字符串属性、名称、作者和简介。在详细视图中，2 个文本字段绑定到 ArrayController.selection.name 或作者，就像您说的那样。另一个属性 blurb 以相同的方式绑定 (ArrayController.selection.blurb)，但绑定到文本视图的 Attributed String 值。这很好用，我不确定你的文本视图有什么问题。如果我将文本添加到文本视图，如果我单击母表中的另一行然后单击返回，它确实会显示在那里（如果我记录数组，它也会显示在那里）。

# objective-c - NSScanner - 性能缓慢 - (UITableView, NSXMLParser)

> ID：11813200
> 
> 赞同：1
> 
> 时间：2012-08-05T01:07:16.960
> 
> 标签：objective-c, ios, uitableview, nsxmlparser

我有一个问题困扰了我好几天了。

我正在使用 NSXMLParser 解析 RSS 提要并将结果输入 UITableView。不幸的是，提要返回了一些我用以下方法解析出来的 HTML：

```
- (NSString *)flattenHTML:(NSString *)html {

NSScanner *theScanner;
NSString *text = nil;
theScanner = [NSScanner scannerWithString:html];
while ([theScanner isAtEnd] == NO) {
    [theScanner scanUpToString:@"<" intoString:NULL] ;
    [theScanner scanUpToString:@">" intoString:&text] ;
    html = [html stringByReplacingOccurrencesOfString:[NSString stringWithFormat:@"%@>", text] withString:@""];
}
html = [html stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

return html; 
```

}

我目前在 NSXMLParser 委托方法期间调用此方法：

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{ 
```

这工作得很好但是需要将近一分钟或更长时间来解析 HTML 并将其展平为文本并填充单元格。在那无休止的一分钟内，我的 UITableView 完全是空的，只有一个旋转的微调器。这不好。这是在我发布这个原本可以很好工作的应用程序之前解决的最后一个“错误”。

它在 iOS 模拟器上运行得非常快，这不足为奇。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T12:10:06.633

你的算法不是很好。对于每个标签，您都尝试将其删除，即使它已经被剥离。此外，循环的每次迭代都会生成整个 HTML 字符串的副本，通常甚至不会删除任何内容。如果您不使用 ARC，这些副本也将持续存在，直到当前的自动释放池被弹出。你不仅在浪费内存，还做了很多不必要的工作。

测试您的方法（使用 Cocoa 维基百科文章）需要 3.5 秒。

这是此代码的改进版本：

```
- (NSString *)flattenHTML:(NSString *)html {

    NSScanner *theScanner = [NSScanner scannerWithString:html];
    theScanner.charactersToBeSkipped = nil;

    NSMutableString *result = [NSMutableString stringWithCapacity: [html length]];

    while (![theScanner isAtEnd]) {
        NSString *part = nil;
        if ([theScanner scanUpToString:@"<" intoString: &part] && part) {
            [result appendString: part];
        }
        [theScanner scanUpToString:@">" intoString:NULL];
        [theScanner scanString: @">" intoString: NULL];
    }
    return [result stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
} 
```

这将告诉扫描器获取每个字符到第一个字符`<`，并将它们附加到结果字符串（如果有）。然后它会跳到下一个`>`，然后也跳到去掉`>`标签。这将重复直到文本结束。每个字符只被触摸一次，使这成为一种`O(n)`算法。

对于相同的数据，这只需要 6.5 毫秒。这大约快 530 倍。

顺便说一句，这些测量是在 Mac 上进行的。iPhone 上的确切值当然会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:05:46.043

我遇到了类似的问题，我不能让它更快。而不是这个，我显示了**进度条**来显示解析过程是如何完成的。

![ss](../Images/eacaab61e6229465151898e735f98754.png)

下面的代码是其中的一部分。

```
// at first, count the lines of XML file
NSError *error = nil;
NSString *xmlFileString = [NSString stringWithContentsOfURL:url
                                                   encoding:NSUTF8StringEncoding
                                                      error:&error];
_totalLines = [xmlFileString componentsSeparatedByString:@"\n"].count;

// do other things...

// delegate method when the parser find new section
- (void)parser:(NSXMLParser *)parser 
didStartElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI 
 qualifiedName:(NSString *)qName 
    attributes:(NSDictionary *)attributeDict
{
    // do something ...

    // back to main thread to change app appearance
    NSOperationQueue *mainQueue = [NSOperationQueue mainQueue];
    [mainQueue addOperationWithBlock:^{

        // Here is important. Get the line number and update the progress bar.
        _progressView.progress = (CGFloat)[parser lineNumber] / (CGFloat)_totalLines;
    }];
} 
```

我在 GitHub 中有示例项目。您可以下载并运行它。我希望我的代码对您有所帮助。

[https://github.com/weed/p120727_XMLParseProgress](https://github.com/weed/p120727_XMLParseProgress)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T09:02:32.707

我不确定到底是什么问题？是不是这个`flattenHTML`方法需要很长时间才能完成？或者它在运行时阻止了您的应用程序？

如果最后一个是您的问题，并且假设您正在做所有事情`flattenHTML`并且确实需要很多时间才能完成。您唯一能做的就是确保在执行此操作时没有阻塞主线程。您可以使用 GCD 或 NSOperation 来实现这一点，除了让用户知道您现在正在解析数据并让他决定是否要等待或取消操作并执行其他操作之外，您无能为力。

# c++ - 将 SFML 库与 scons 构建链接

> ID：11813207
> 
> 赞同：0
> 
> 时间：2012-08-05T01:09:43.273
> 
> 标签：c++, compilation, scons

对于我的生活，我无法让 scons 链接这些 SFML 库。我相信我遵循了 scons 网站所说的关于图书馆链接的所有内容，所以我不知道该怎么做：

```
import fnmatch
import os

#Setup environment
file_match = "*.cpp"

#Recursive Glob method to find all source files
matches = []
for root, dirnames, filenames in os.walk("src/"):
    for filename in filenames:
        if fnmatch.fnmatch(filename, file_match):
            matches.append(os.path.join(root, filename))

#Compile the program
env = Environment();
env.Append(LIBS = ["sfml-graphics","sfml-window","sfml-system"]);
env.Append(LIBPATH = "/usr/local/lib");
env.Program(target = "Game", source = matches) 
```

**编辑：这段代码显然有效。看来我的电脑只需要休息几天就可以自行修复。**

# wordpress - 301 状态代码和我在 Location 标头中要求的相同位置如何回答对服务器的请求？

> ID：11813209
> 
> 赞同：0
> 
> 时间：2012-08-05T01:10:33.083
> 
> 标签：wordpress, http, httpresponse, http-response-codes

我正在编写一个尝试通过 HTTP 访问网页的脚本。（真实页面不公开，所以我将使用示例页面来解释我的问题。）例如，我正在尝试获取页面`example.com/mypage`。服务器返回 301，当我检查`Location`标题时，我看到它的值是...... `http://example.com/mypage`- 这与我一开始尝试获取的位置完全相同！我的脚本应该如何获取页面？在看到这个之前，我想我应该检查 Location 标头并尝试获取它 - 但因为它是相同的位置，会让我陷入无限循环！

当然，当我尝试使用浏览器浏览页面时，我可以毫无问题地获取内容。

所以我的问题是：

1) Location 标头与我要求的位置完美匹配并具有 301 状态是什么意思？

2）浏览器怎么能显示页面？

3) 有什么方法可以调试通过浏览器发生的事情（例如，向浏览器询问响应标头或其他内容；显然，仅询问页面源是不够的）。

谢谢！

# sql-server - DBProj.dbschema(0,0)：警告 SQL01271：表 X 和 Y 之间的未命名外键将通过检查表来检查

> ID：11813214
> 
> 赞同：1
> 
> 时间：2012-08-05T01:12:25.200
> 
> 标签：sql-server, visual-studio-2010, sql-server-2008, create-table, visual-studio-dbpro

我在部署 Visual Studio SQL Server DBProject 时收到此错误

> DBProj.dbschema(0,0)：警告 SQL01271：将通过检查表来检查表 [dbo].[Match] 和 [dbo].[Team] 之间的未命名外键。命名外键以避免检查整个表，只检查新约束。

我的表定义是

```
CREATE TABLE [dbo].[Match]
(
    MatchID         int identity(11,2) PRIMARY KEY, 
    TournamentID    int not null REFERENCES Tournament(TournamentID),
    Team1_ID        int not null REFERENCES Team(TeamID),
    Team2_ID        int not null REFERENCES Team(TeamID),
    MatchDate       date,
    MatchTime       time
)

CREATE TABLE [dbo].[Team]
(
    TeamID    int PRIMARY KEY,
    TeamName  varchar(50)
) 
```

> **更新：** [未命名的约束](http://www.nonhostile.com/howto-drop-unnamed-constraint-in-sql-server.asp)
> 
> 如果不指定名称，SQL 将生成一个随机名称，该名称由表示约束类型的前缀、部分表和列名称后跟随机字母数字字符串构建。它通常看起来像这样：DF_ *MyTable* _MyColu__3F3159AB
> 
> 每次重建和部署 DBProject 时，都会重复此过程，生成一组新的随机约束名称

这个错误是什么意思？这意味着什么？特别是，**命名外键以避免检查整个表而只检查新约束。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:54:58.960

> **摘要：**最好的做法是始终命名约束

对我来说，关于这个问题的信息很难获得。到目前为止，我已经能够找到一些关于约束的新信息，我可以说我学到了更多。

在 dba.SE.com 上发布同样的问题，[我得到了这个回复](https://dba.stackexchange.com/questions/22008/warning-sql01271-the-unnamed-foreign-key-between-tables-dbo-match-and-dbo)

> [如何在 SQL Server 中删除未命名的约束](http://www.nonhostile.com/howto-drop-unnamed-constraint-in-sql-server.asp)
> 
> 如果不指定名称，SQL 将生成一个随机名称，该名称由表示约束类型的前缀、部分表和列名称后跟随机字母数字字符串构建。它通常看起来像这样：
> 
> ```
> DF__MyTable__MyColu__3F3159AB 
> ```

.

> *使用“垃圾”名称*部分[清理](http://www.simple-talk.com/sql/database-administration/cleaning-up-sql-server-deployment-scripts/)DRI 对象中的SQL Server 部署脚本
> 
> 例如，如果创建了主键但未命名，则 SQL Server 使用默认的自动生成名称 PK__TableName__Junk（例如，PK__Customer__A4AE64082CE326F2）。这将导致 SQL Compare 删除主键并重新创建它，因为其名称的 Junk 部分在不同的数据库中会有所不同。
> 
> 这意味着即使没有功能更改，使用比较软件生成的任何更改脚本都会**在每次新构建时尝试删除“旧”约束并添加“新”约束。在表上删除和重新创建主键可能是一项非常昂贵的操作**，并且由于没有功能更改，我们可以很好地生活没有。

.

> [Dan Jones 博客](http://blogs.msdn.com/b/dtjones/archive/2009/10/29/best-practice-naming-constraints.aspx)：**最佳实践：命名约束**
> 
> 底线是不要做一个懒惰的 DBA/程序员，让系统命名你的约束。从长远来看，在键盘上多敲几下是值得的。
> 
> 事实上，这可能会成为我标准 DBA 面试问题库的一部分：你说出你的限制条件吗？或类似的东西。

# html - 在opera 12中使用css3的多个图像

> ID：11813216
> 
> 赞同：0
> 
> 时间：2012-08-05T01:12:55.287
> 
> 标签：html, css

我在我的 css 中使用了多个图像，它在 firefox 和 chrome 最新版本中看起来不错，但是在 opera v12.0 中它没有很好地定位我的第二张图片。它显示在页面中间（即使 Opera 12 支持多个图像）。

这是我正在使用的CSS：

```
body{
background:url(../images/bg.png) top repeat-x,url(../images/bg_footer.png) bottom repeat-x, #fff;
} 
```

也试过这个：（同样的结果）

身体{

```
background-image: url('../images/bg.png'), url('../images/bg_footer.png');
background-position: left top, left bottom;
background-repeat: repeat-x; 
```

}

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:33:58.360

尝试这个

```
 display: inline-block;
background-image: url('../images/bg.png'), url('../images/bg_footer.png');
background-position: left top, left bottom;
background-repeat: repeat-x, repeat-x; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T01:17:48.013

尝试这个：

```
background-image: url(../images/bg.png), url(../images/bg_footer.png);
background-position: left top, left bottom;
background-repeat: repeat-x; 
```

# javascript - 让 Fancybox 背景能够关闭窗口？

> ID：11813218
> 
> 赞同：0
> 
> 时间：2012-08-05T01:13:14.203
> 
> 标签：javascript, jquery, html, css

我有 Fancybox 设置，以便其中包含内容的 div 填充整个屏幕，除了它周围的和边缘，它具有透明背景，因此它继承了叠加层的颜色。现在通常情况下，阴影是可点击的，点击它会关闭 Fancybox 弹出框。内容框是否也可以单击，以便单击它会关闭弹出的 Fancybox 框？

例子：

![在此处输入图像描述](../Images/0ca6214c8b78c348ef5017e2aea4fef4.png)

1.  绿色区域已经可以点击，点击它会关闭窗口。
2.  白线代表内容 div 的填充，我认为您无法更改（有人知道怎么做吗？）
3.  蓝色区域是我想要的可点击区域，因此点击它会关闭弹出窗口。

这可能吗？我想我可以将 div 设置为关闭窗口，并将 div 中的所有内容设置为绝对位于其上方，以便单击内容不会关闭窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:46:37.750

您认为的任何区域都由 css 选择器类设置样式，通过 Jquery，您可以使它们在单击事件时关闭窗口。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-05T01:39:11.077

是灯箱吗？如果是这样，那么我认为不可能在内部关闭框，只有在单击外侧时灯箱才会关闭

# asp.net-mvc-3 - slowcheetah 新的 asp.net mvc 转换不起作用

> ID：11813223
> 
> 赞同：3
> 
> 时间：2012-08-05T01:15:16.860
> 
> 标签：asp.net-mvc-3, slowcheetah

我想我一定错过了慢猎豹的一些东西。我创建了一个新的 asp.net mvc3 应用程序。向 web.config 添加了一个具有默认值的 appsetting。然后我为每个调试和发布配置文件添加了一个转换。我还创建了一个读取该值的视图。当我预览转换时，转换工作正常。我的理解是，如果我在发布模式下运行项目，那么项目将从发布转换中读取应用程序设置，如果我在调试模式下运行项目，它将从调试配置中读取应用程序设置。

这是 web.config 的相关部分

```
<appSettings>      
    <add key="cheetah_val" value="default_val"/>
  </appSettings> 
```

这是 web.debug.config

```
<?xml version="1.0"?>

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">  

  <appSettings>
    <add key="cheetah_val" value="debug_val" xdt:Transform="Replace" xdt:Locator="Match(key)"/>

  </appSettings>
  <system.web>

  </system.web>
</configuration> 
```

这是 web.release.config

```
<?xml version="1.0"?>

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">

  <appSettings>
    <add key="cheetah_val" value="release_val" xdt:Transform="Replace" xdt:Locator="Match(key)"/>

  </appSettings>
  <system.web>
    <compilation xdt:Transform="RemoveAttributes(debug)" />

  </system.web>
</configuration> 
```

HomeController.cs

```
public class HomeController : Controller
    {
        public ActionResult Index()
        {    

            ViewBag.CheetahMessage = System.Configuration.ConfigurationManager.AppSettings["cheetah_val"];   
            return View();
        }          
    } 
```

和 index.cshtml

```
@{
    ViewBag.Title = "Home Page";
}

<h2>@ViewBag.CheetahMessage</h2> 
```

我希望输出是发布模式下的 release_val 和调试模式下的 debug_val 。我究竟做错了什么？还是我错过了一些重要的东西？对于网站，F5 功能不起作用吗？对于网站，我是否必须实际发布它才能使转换生效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T11:02:00.530

> 我的理解是，如果我在发布模式下运行项目，那么项目将从发布转换中读取应用程序设置，如果我在调试模式下运行项目，它将从调试配置中读取应用程序设置。

这也是我最初阅读并下载 slowcheetah 时的假设。

> 对于网站，我是否必须实际发布它才能使转换生效？

AFAIK，您必须同时发布网站和 Web 应用程序项目才能使转换工作。Slowcheetah 甚至不这样做，它是 VS 发布工具。Slowcheetah 只允许您预览变换。

如果我在这方面错了，请说出来，因为我也希望能够在 IIS Express 中进行本地调试时运行转换。

一种可能的解决方案是在您的机器上设置真正的 IIS 以从您的发布目录提供服务。然后，当您想查看转换如何影响行为时，可以将 Web 发布到 IIS 并使用它来查看站点。我认为这不会让您附加调试器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T10:16:07.950

我的理解是，SlowCheetah 是针对 App.Config 而不是 web.config

对 web.config 做同样的事情应该已经是 VS2010 的标准部分。

这是 Scott Hanselman 谈论它（看 6 分 20 秒） [http://www.hanselman.com/blog/WebDeploymentMadeAwesomeIfYoureUsingXCopyYoureDoingItWrong.aspx](http://www.hanselman.com/blog/WebDeploymentMadeAwesomeIfYoureUsingXCopyYoureDoingItWrong.aspx)

这是他写的关于 SlowCheetah [http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx](http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx)

我在我的 app.config 中使用了 SlowCheetah，它运行良好。

# ios - Facebook Graph API, Hackbook, iOS - 如何查询好友生日

> ID：11813225
> 
> 赞同：0
> 
> 时间：2012-08-05T01:15:40.517
> 
> 标签：ios, xcode, facebook-graph-api, facebook-fql

我正在学习将 Facebook 集成到我的下一个 iOS 应用程序中，目前正在使用他们自己的示例项目 Hackbook，它很好地演示了不同的 API 调用、请求、权限等。

我能够获得获得friends_birthday的扩展权限，并使用我的Facebook帐户验证该应用程序具有权限。我还可以使用 Hackbooks apiGraphMe 方法提取我的生日，并将其显示在基本信息下，但是，我似乎无法修改 Hackbooks getUserFriends 方法来像我自己那样显示他们的生日。

有没有人在学习 API 之前修改了 Hackbook 并拉了一个朋友的生日？如果没有，我希望有人有经验。请注意，我希望看到它使用 Hackbook 项目格式完成，因为这是我正在学习的工具。

在此先感谢，我一定会尽快接受！

```
- (IBAction) getPublicInfo: (id)sender {
                       NSMutableDictionary * params = [NSMutableDictionary    
                   dictionaryWithObjectsAndKeys:
                                  @"SELECT uid,name FROM user WHERE uid=4", @"query",
                                  nil];
                     [_facebook requestWithMethodName: @"fql.query"
                         andParams: params
                     andHttpMethod: @"POST"
                       andDelegate: self]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:56:26.720

这是 FQL 查询：

```
select uid,name,birthday_date from user where uid in (select uid2 from friend where uid1=me()) 
```

不要忘记许可`friends_birthday`！

# .net - 序列化对象列表时输出 id 而不是完整对象

> ID：11813226
> 
> 赞同：0
> 
> 时间：2012-08-05T01:15:44.200
> 
> 标签：.net, asp.net-mvc-4, json.net, asp.net-web-api

我正在使用 MVC 4 Web API 并遇到了一个我找不到答案的序列化问题。上代码...

假设我有以下课程：

```
public class Item {
    public int ID;
    public String Name;
    public bool Active;
}

public class Source {
    public int ID;
    public int Name;
} 
```

项目的序列化列表将类似于：

```
{
    ID: 1,
    Name: "That big thing",
    Active: true,
    Source: {
        ID: 1,
        Name: "The street"
    }
} 
```

如果我的列表中有很多项目，将每个源序列化为一个对象将变得低效。我想做的只是在列表中获取源 ID。就像是：

```
{
    ID: 1,
    Name: "That big thing",
    Active: true,
    Source: 1
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:39:17.540

根据您的序列化项目列表，我假设 Item 类还包含一个 Source 属性，例如：

```
public class Item {
    public int ID;
    public String Name;
    public bool Active;
    public Source Source;
} 
```

如果是这种情况，您可以将 XmlIgnore 属性添加到 Source 属性，然后将源的 id 公开为新的 SourceID 属性：

```
 public class Item
    {
        public int ID;
        public String Name;
        public bool Active;
        [XmlIgnore]
        public Source Source;
        [XmlElement("Source")]
        public int SourceID
        {
            get
            {
                if (Source != null)
                {
                    return Source.ID;
                }
                else
                {
                    return 0;
                }
            }
            set
            {
                // ignore incoming values
            }
        }
    } 
```

json 库可能不支持 Xml 属性；如果是这样的话，可以使用其对应的属性（即JsonIgnore、JsonProperty）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:31:30.970

此处发布的 [JsonIgnore] 建议是一个很好的建议，但它仅适用于 JSON.NET 序列化。

要以通用方式执行此操作，请添加对**System.Runtime.Serialization** DLL 的引用并相应地装饰您的模型：

```
[DataContract]
public class Source
{
    [DataMember]
    public int ID;

    public int Name;
} 
```

这将省略您在 Web API 中使用的任何 MediaTypeFormatting 中的 Name 属性，即

```
<Active>true</Active>
<ID>1</ID>
<Name>test</Name>
<Source>
 <ID>1</ID>
</Source> 
```

或者

```
"ID":1,
"Name":"test",
"Active":true,
"Source":{"ID":1} 
```

# css - CSS 可以在 IE 中运行，但不能在 Chrome 中运行

> ID：11813227
> 
> 赞同：0
> 
> 时间：2012-08-05T01:16:03.903
> 
> 标签：css

我的用于 Modal Popup 扩展器的 CSS 在 Chrome 中不起作用，但它在 IE 中完美运行。

这是我的CSS：

```
.modalBackground
{
    background-color:#250517;
    opacity:0.5;
    filter: alpha(opacity = 50);
}

.modalPopup 
{
        background-color:White;
        border-width:3px;
        border-style:solid;
        border-color:Black;
        padding:3px;
        width:250px;
        height:300px;

} 
```

这是 IE 的屏幕截图，其中 CSS 运行良好：

![](../Images/c0fdeecdae1fac525eff5ffae762696d.png)

这是 Chrome 的屏幕截图，其中 CSS 不起作用：

![](../Images/51be13aed7054145efd0bdc8433a4987.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:30:53.077

它在我的 chrome 浏览器中运行良好。你可以[在这里](http://jsfiddle.net/yZWVf/)或[这里](http://2bn.ir/50)看到它。

你的 chrome 可能没有更新。我用 chrome 21 试过了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T01:20:41.537

```
.modalBackground {
    background: #250517;
    opacity: 0.5;
    filter: alpha(opacity=50);
}

.modalPopup {
    background: #FFF;
    border: solid 3px #000;
    display: block;
    padding: 3px;
    width: 250px;
    height: 300px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T01:20:51.177

看，对于这样的事情......真的没有必要重新发明轮子。

我强烈推荐一个经过测试和测试的插件，它保证是跨浏览器和可靠的。你会为自己节省很多时间和精力。

试试 Shadowbox（一个 jQuery 插件）： [http ://www.shadowbox-js.com/](http://www.shadowbox-js.com/)

祝你好运。

# jquery - jQuery 事件在站点加载时触发一次

> ID：11813234
> 
> 赞同：0
> 
> 时间：2012-08-05T01:18:24.247
> 
> 标签：jquery, fadein, onload

我试图只在用户登陆主页时淡入 div 一次。例如，当您登陆站点时，“站点主页标题”会淡入，您将导航到“关于”、“联系”页面等，但是当您再次单击主页时，“站点主页标题”不会​​淡出在。

所以在我刚刚得到的 div 上：

```
$('#home-title').fadeIn(500); 
```

所以我的问题是，现在每当你进入主页时，它总是会淡出它......显然，因为这就是代码告诉它要做的事情。但是我要添加什么，这样它只会在您第一次登陆主页时发生一次？

[对不起！更详细的描述如下]

我有这个：

```
$(document).ready(function() { 
    $('.faded').hide();
});

$(window).load(function() {     
    $(".faded").each(function(i) {
        $(this).delay(i * 500).fadeIn();  
    });
} 
```

所以 .faded 只附加到主页上的 div 上。我想知道 jQuery 是否有可能识别它是否在其他页面之一上，并且您单击返回主页 - 它已经在元素中淡出，因此不需要再次这样做。但是，如果用户关闭浏览器或完全离开站点但又回到它，我们可以让 .faded div 再次淡入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:30:57.037

如果旧浏览器是个问题，你需要 cookie，这里有一个很好的 jQuery 插件[！](https://github.com/carhartl/jquery-cookie/)

否则我会选择 localStorage，因为它更容易处理：

```
var elem = $('#home-title');

if (elem.length) {                                  //you're on the first page
    if (!sessionStorage.getItem('HasVisitedFirst')) {  //check if we have been here
        elem.fadeIn(500);                            //if not, fade in  
        sessionStorage.setItem('HasVisitedFirst',true);//and set a value to remember
    }
} 
```

[**小提琴**](http://jsfiddle.net/cfybj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T01:31:07.303

根据您使用的后端，您可以检查是否已设置会话或其他 cookie，如果不存在则淡入。

由于您使用的是 jQuery，因此有一种简单的方法可以设置/获取您自己的 cookie。我整理了一个快速的[jsfiddle](http://jsfiddle.net/fWTjs/)来向您展示一个示例。

编辑：我应该提一下，这个解决方案需要[jquery-cookie](https://github.com/carhartl/jquery-cookie/)插件。如果您希望它在第一次加载后永久显示而没有淡入，只需将 css display 属性设置为 block（假设您首先使用 css 将其隐藏）：

```
$('#home-title').css('display', 'block'); 
```

这是一个[更新的小提琴](http://jsfiddle.net/fWTjs/2/)。

# jsf - 按钮/链接/文本组件需要在其祖先中有一个表单。请加

> ID：11813235
> 
> 赞同：4
> 
> 时间：2012-08-05T01:18:35.713
> 
> 标签：jsf, richfaces

我正在使用 JSF 和 RichFaces 4。我有一个巨大的表格，我必须将其分成几个面板。但是当我这样做时，我会收到警告。

例如，这使它显示警告：

```
<h:form>
    <rich:tabPanel>
        <rich:tab>
            //Form elements go here
        </rich:tab>
    </rich:tabPanel>
</h:form> 
```

我该如何避免呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T02:06:11.283

首先，这个警告只会在`javax.faces.PROJECT_STAGE`设置为时出现`Development`。因此，如果尽管有警告一切正常，那么您可以放心地忽略它。它不会出现在`Production`舞台上。

至于错误警告本身，在较旧的 Mojarra 版本中存在导致该错误的错误。此错误已报告为[问题 2147](http://java.net/jira/browse/JAVASERVERFACES-2147)，并且自大约一年前发布的 Mojarra 2.1.3 以来已修复（[目前](http://javaserverfaces.java.net/)已在 2.1.11 中）。因此，只需将 Mojarra 升级到*至少*2.1.3 就可以让您摆脱这个错误警告。

# php - 在 XML 中搜索值

> ID：11813237
> 
> 赞同：2
> 
> 时间：2012-08-05T01:19:06.107
> 
> 标签：php

我有一个返回如下的 XML 文件：

```
<games>
 <game>
  <appID>1234</appID>
  <name>game 1</name>
 </game>
 <game>
  <appID>5678</appID>
  <name>game 2</name>
 </game>
 <game>
  <appID>9123</appID>
  <name>game 3</name>
 </game>
</games> 
```

我希望我的代码将 url 参数 gid 设置为 $gid，在 xml 中搜索该 appid，然后在 XML 中匹配时分配 $gamename。目前它只在第一个游戏被点击时才起作用。它似乎没有搜索过第一个<游戏>。

```
$gid = (int) $_GET['gid'];
$gamespage = simplexml_load_file("http://gamepage.com/games?xml=1");
$gamelist = $gamespage->games;      
if ($gid == $gamelist->game->appID) {
$appid = $gamelist->game->appID;
$gamename = $gamelist->game->name; }
else {
echo "No game stats. <br />"; } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T01:23:23.357

您可以使用[XPath 查询](http://php.net/manual/en/simplexmlelement.xpath.php)很容易地做到这一点：

```
$xpath = $gamespage->xpath('/games/game[appID = ' . $gid . ']/name');
if ($xpath) {
    $appid = $gid;
    $gamename = (string) $xpath[0];
} else {
    echo "No game stats. <br />";
} 
```

# php - jquery-file-upload 插件 - 更改上传路径

> ID：11813239
> 
> 赞同：1
> 
> 时间：2012-08-05T01:19:17.497
> 
> 标签：php, jquery, jquery-ui, jquery-plugins

我试图更改放置上传文件的路径我希望它们位于根目录中名为“上传”的目录中

我已成功更改 URL 路径

```
'upload_url' => 'http://www.mydomain.co.uk/uploads/', 
```

但是，当我尝试更改目录上传路径时，代码将不起作用并出现内部服务器错误消息。我似乎在日志中找不到任何相关内容。

```
'upload_dir' => '../../uploads/', 
```

这是原始代码

```
'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/files/',
'upload_url' => $this->getFullUrl().'/files/', 
```

脚本的路径是 $_SERVER['ROOT']/server/php/index.php 并且原始文件目录位于 /server/php 目录中。所以我试图回到两个深处。

奇怪的是这有效：

```
'large' => array(
'upload_dir' => '../../uploads/',
'upload_url' => 'http://www.mydomain.co.uk/uploads/',
'max_width' => 1920,
'max_height' => 1200,
'jpeg_quality' => 95
),
'thumbnail' => array(
'upload_dir' => '../../thumbs1/',
'upload_url' => 'http://www.mydomain.co.uk/thumbs1/',
'max_width' => 80,
'max_height' => 80
) 
```

但是，一旦我对主要选项执行相同操作，它就会分崩离析。我不知所措！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:22:00.720

[这是一个类似的问题。](https://stackoverflow.com/a/9398334/403664)帖子中的评论提到这些选项应该接受父文件夹路径，例如`../folder`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T13:16:20.007

它的答案不是路径不起作用。它与目录的大小有关！因为它非常大，有数千张图片。所以看起来脚本与巨大的图像目录分崩离析。需要解决这个问题:(也许让脚本检查数据库中是否存在冲突的文件名，而不是像我认为的那样搜索目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T14:08:28.127

已修复，不确定这是否是最好的方法，但它有效！

我放弃了这个受保护的函数 get_file_objects() 函数

因为那是扫描目录，如果你有大量文件夹，从内存的角度来看并不酷。

然后我在“修剪文件名”函数的开头添加了一些随机的唯一数字

```
protected function trim_file_name($name, $type, $index) {
$realname = $name; 
 $realname = strtolower($realname);mt_srand((double)microtime()*3000000);
 $randvar =  mt_rand(3,30000000);
 settype($randvar,"string"); $file_name = trim(basename(stripslashes($randvar.$name)), ".\x00..\x20"); 
```

就是这样，所以我有一个唯一的文件名而无需搜索目录

# java - 比较日期和其他 Java 小妙语

> ID：11813240
> 
> 赞同：0
> 
> 时间：2012-08-05T01:19:21.160
> 
> 标签：java, exception

我目前正在处理一些需要比较日期的代码，如下所示：

```
public int compare(ItemLocation o1, ItemLocation o2) {
            try {
                SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy");
                Date date1 = sdf.parse(o1.getDatePublished());
                Date date2 = sdf.parse(o2.getDatePublished());
                Calendar cal1 = Calendar.getInstance();
                Calendar cal2 = Calendar.getInstance();
                cal1.setTime(date1);
                cal2.setTime(date2);
                if(cal1.equals(cal2)) { 
                    return 0; 
                } else if(cal1.before(cal2)) {
                    return -1;
                } else if(cal1.after(cal2)) {
                    return 1;
                }
            } catch (ParseException e) {
                e.printStackTrace();
            }
        } 
```

所以我的问题是多方面的。

1.  这是比较两个日期的最佳方法吗？
2.  使用“方法必须返回 int 类型的结果”错误消息，解决此问题的最佳方法是什么？（我不认为添加 return 0; 最后是非常实用的......这就是我的想法）
3.  [可选] 有没有更有效的方法来编写 3 个 if/else if 语句？

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:24:54.063

1.  利用`date1.compareTo(date2)`
2.  编译错误：没有默认返回值。见第 1 点
3.  从第 1 点开始：

    ```
    SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy");
    Date date1 = sdf.parse(o1.getDatePublished());
    Date date2 = sdf.parse(o2.getDatePublished());
    return date1.compareTo(date2); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T01:26:07.637

看起来是比较日期的好方法。对于编译错误，在你的 catch 块中重新抛出一个异常或返回一个 int 值。

# java - Swing中的实时拖放

> ID：11813253
> 
> 赞同：2
> 
> 时间：2012-08-05T01:24:13.580
> 
> 标签：java, swing, user-interface, drag-and-drop

我在摇摆中使用拖放将按钮放置在四个组件之一上。为了让它更具吸引力，而不仅仅是鼠标指示正在拖动的东西（这工作正常），我想实时显示它。除非鼠标回到被拖动的组件上，否则拖动侦听器会注册一个 dragExit 事件，该事件会删除导致侦听器重新聚焦在父组件上的按钮并触发 dragEnter 导致闪烁。我需要使按钮不会以某种方式影响拖动侦听器。有任何想法吗？

![在四个 DndLabels 之间拖动一个打招呼的 DndButton](../Images/28fda79c26dd81cff5a934b4bb7984eb.png)

这也是我要添加的 jlabel（我知道 jlabel 不是一个好的选择，但它运行良好并且可以轻松显示我需要的图像）

```
import java.awt.Point;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.awt.dnd.*;
import java.io.IOException;
import javax.swing.*;

//and here is the button to drag   
public class DndLabel extends JLabel implements DropTargetListener {

    private DropTarget target;
    private DndButton button;
    public DndLabel last;

    //initialize the JTable with the data
    public DndLabel() {
        super();

        //mark this a DropTarget
        target = new DropTarget(this, this);

        //have it utilize a custom transfer handler
        setTransferHandler(new MyTransferHandler());
    }

    public void dragEnter(DropTargetDragEvent dtde) {
        System.out.println("enter");

        try {
            //get the Point where the drop occurred
            Point loc = dtde.getLocation();

            //get Transfer data
            Transferable t = dtde.getTransferable();

            //get the Data flavors transferred with the Transferable
            DataFlavor[] d = t.getTransferDataFlavors();

            button = (DndButton) t.getTransferData(d[0]);

            button.setBounds(loc.x, 0, 100, 50);

            add(button);

            //and if the DataFlavors match for the DnDTable 
            //(ie., we don't want an ImageFlavor marking an image transfer)
            if (getTransferHandler().canImport(this, d)) {

                //then import the Draggable JComponent and repaint() the JTable
                ((MyTransferHandler) getTransferHandler()).importData(this, (DndButton) t.getTransferData(d[0]), loc);
                repaint();
            } else {
                return;
            }
        } catch (UnsupportedFlavorException  ex) {
            ex.printStackTrace();
        } catch(IOException ex){
            ex.printStackTrace();
        }
    }

    @Override
    public void dragOver(DropTargetDragEvent dtde) {
        button.setLocation(dtde.getLocation().x, 0);
    }

    public void dragExit(DropTargetEvent dte) {
        System.out.println("remove");

        last = null;
        remove(button);
        repaint();

    }

    //This is what happens when a Drop occurs
    public void drop(DropTargetDropEvent dtde) {
        System.out.println("drop!");
        try {
            //get the Point where the drop occurred
            Point loc = dtde.getLocation();

            //get Transfer data
            Transferable t = dtde.getTransferable();

            //get the Data flavors transferred with the Transferable
            DataFlavor[] d = t.getTransferDataFlavors();

            DndButton tempButton = (DndButton) t.getTransferData(d[0]);

            tempButton.setBounds(loc.x, 0, 100, 50);

            add(tempButton);

            //and if the DataFlavors match for the DnDTable 
            //(ie., we don't want an ImageFlavor marking an image transfer)
            if (getTransferHandler().canImport(this, d)) {

                //then import the Draggable JComponent and repaint() the JTable
                ((MyTransferHandler) getTransferHandler()).importData(this, (DndButton) t.getTransferData(d[0]), loc);
                repaint();
            } else {
                return;
            }

        } catch (UnsupportedFlavorException ex) {
            ex.printStackTrace();
        }catch(IOException ex){

        }finally {
            dtde.dropComplete(true);
        }
    }

    @Override
    public void dropActionChanged(DropTargetDragEvent dtde) {
    }

    class MyTransferHandler extends TransferHandler {

        //tests for a valid JButton DataFlavor
        public boolean canImport(JComponent c, DataFlavor[] f) {
            DataFlavor temp = new DataFlavor(DndButton.class, "JButton");
            for (DataFlavor d : f) {
                if (d.equals(temp)) {
                    return true;
                }

            }
            return false;
        }

        //add the data into the JTable
        public boolean importData(JComponent comp, Transferable t, Point p) {
            try {
                DndButton tempButton = (DndButton) t.getTransferData(new DataFlavor(DndButton.class, "JButton"));

            } catch (UnsupportedFlavorException | IOException ex) {
                System.err.println(ex);
            }
            return true;
        }
    }
}
class DndButton extends JButton implements Transferable, DragSourceListener, DragGestureListener {

    //marks this JButton as the source of the Drag
    private DragSource source;
    private TransferHandler t;

    public DndButton() {
        this("");
    }

    public DndButton(String message) {
        super(message);

        //The TransferHandler returns a new DnDButton
        //to be transferred in the Drag
        t = new TransferHandler() {

            public Transferable createTransferable(JComponent c) {
                return new DndButton(getText());
            }
        };
        setTransferHandler(t);

        //The Drag will copy the DnDButton rather than moving it
        source = new DragSource();
        source.createDefaultDragGestureRecognizer(this, DnDConstants.ACTION_MOVE, this);
    }

    //The DataFlavor is a marker to let the DropTarget know how to
    //handle the Transferable
    public DataFlavor[] getTransferDataFlavors() {
        return new DataFlavor[]{new DataFlavor(DndButton.class, "JButton")};
    }

    public boolean isDataFlavorSupported(DataFlavor flavor) {
        return true;
    }

    public Object getTransferData(DataFlavor flavor) {
        return this;
    }

    public void dragEnter(DragSourceDragEvent dsde) {
    }

    public void dragOver(DragSourceDragEvent dsde) {
        //this.setLocation(dsde.getX()-150,0);
    }

    public void dropActionchanged(DragSourceDragEvent dsde) {
    }

    public void dragExit(DragSourceEvent dse) {
    }

    //when the drag finishes, then repaint the DnDButton
    //so it doesn't look like it has still been pressed down
    public void dragDropEnd(DragSourceDropEvent dsde) {
        // JComponent c = (JComponent) this.getParent();
        //c.remove(this);
        //c.repaint();
    }

    //when a DragGesture is recognized, initiate the Drag
    public void dragGestureRecognized(DragGestureEvent dge) {
        source.startDrag(dge, DragSource.DefaultMoveDrop, DndButton.this, this);
    }

    @Override
    public void dropActionChanged(DragSourceDragEvent dsde) {
    }
}

class Main {

    public static void main(String[] args) {
        JFrame f = new JFrame("sscce");
        f.setBounds(0, 0, 500, 80);
        f.setVisible(true);
        DndLabel trackOne = new DndLabel();
        trackOne.setBounds(0, 0, 500, 50);
        f.add(trackOne);
        DndButton b = new DndButton("hello");
        b.setBounds(0, 0, 100, trackOne.getHeight());

        trackOne.add(b);
        trackOne.revalidate();
        trackOne.repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T06:12:01.917

我个人可能会拒绝这样做。问题是，每次添加组件时，组件都会干扰层次结构中的鼠标侦听器，导致容器被通知退出事件，从而导致按钮被移除并通知容器进入事件并且循环继续。

就个人而言，我会做两件事之一。我要么

*   在玻璃窗格上绘制按钮的表示或
*   在拖动面板上绘制按钮的表示

这消除了按钮对所涉及的鼠标侦听器造成干扰的可能性。

查看[我的拖动图像比你的更好](http://rabbit-hole.blogspot.com.au/2006/05/my-drag-image-is-better-than-yours.html)。当你在那里挖掘一下时，蒂姆做了一些关于拖放的优秀文章，值得一读

# android - 使用 res/raw 文件夹中的 mp3 设置铃声

> ID：11813254
> 
> 赞同：5
> 
> 时间：2012-08-05T01:24:20.050
> 
> 标签：android, logging, ringtone

好吧，我尝试了一些方法，但还没有奏效。更“正确”的方式是这样（我认为），我真的需要帮助，我快疯了！:)

```
public void setRingtone(){
        String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
        String fileName = nombreActual+".mp3";

        File newSoundFile = new File(baseDir, fileName);
        Uri mUri = Uri.parse("android.resource://com.genaut.ringtonelists/raw/"+sonidoActual);//sonidoActual (sound name  without .mp3)
        ContentResolver mCr = getContentResolver();
        AssetFileDescriptor soundFile;
        try {
            soundFile= mCr.openAssetFileDescriptor(mUri, "r");
        } catch (FileNotFoundException e) {
            soundFile=null;   
        }

        try {
            byte[] readData = new byte[1024];
            FileInputStream fis = soundFile.createInputStream();
            FileOutputStream fos = new FileOutputStream(newSoundFile);
            int i = fis.read(readData);

            while (i != -1) {
                fos.write(readData, 0, i);
                i = fis.read(readData);
            }

            fos.close();
        } catch (IOException io) {
        }

        ContentValues values = new ContentValues();
           values.put(MediaStore.MediaColumns.DATA, newSoundFile.getAbsolutePath());
           values.put(MediaStore.MediaColumns.TITLE, nombreActual);
           values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
           values.put(MediaStore.MediaColumns.SIZE, newSoundFile.length());
           values.put(MediaStore.Audio.Media.ARTIST, R.string.app_name);
           values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
           values.put(MediaStore.Audio.Media.IS_NOTIFICATION, true);
           values.put(MediaStore.Audio.Media.IS_ALARM, true);
           values.put(MediaStore.Audio.Media.IS_MUSIC, false);

           Uri uri = MediaStore.Audio.Media.getContentUriForPath(newSoundFile.getAbsolutePath());
           Uri newUri = mCr.insert(uri, values);

           RingtoneManager.setActualDefaultRingtoneUri(Main.this, RingtoneManager.TYPE_RINGTONE, newUri);

    Log.d("AbsolutePath: ", newSoundFile.getAbsolutePath());
    Log.d("DefaultUri: ", RingtoneManager.getActualDefaultRingtoneUri(Main.this, RingtoneManager.TYPE_RINGTONE).toString());
    } 
```

我对清单有这个权限：

```
 <uses-permission android:name="android.permission.WRITE_SETTINGS" />
<uses-permission android:name="android.permission.CHANGE_CONFIGURATION" />
<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我尝试了一些代码，尝试混合一些步骤（复制文件，并设置库..）但没有奏效。我真的坚持这一点。使用此代码，我可以将我的声音添加到（设置 - 设备 - 音频配置文件 - “选择配置文件” - 语音通话铃声）但默认情况下未选择它，如果我选择他，他不会播放任何声音:(

我在 SD 上的任何位置都看不到声音文件，日志是：

```
08-05 03:20:22.362: D/AbsolutePath:(6277): /mnt/sdcard/Ding Ding Dong.mp3
08-05 03:20:22.364: D/DefaultUri:(6277): content://media/external/audio/media/15233 
```

**这个例子：我复制的“叮叮咚.mp3”文件和其他文件在sdcard上但大小为0！**.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T04:43:47.587

尝试执行此代码，一切顺利

```
File k = new File(path, "mysong.mp3"); // path is a file to /sdcard/media/ringtone

ContentValues values = new ContentValues();
values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());
values.put(MediaStore.MediaColumns.TITLE, "My Song title");
values.put(MediaStore.MediaColumns.SIZE, 215454);
values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
values.put(MediaStore.Audio.Media.ARTIST, "Madonna");
values.put(MediaStore.Audio.Media.DURATION, 230);
values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);
values.put(MediaStore.Audio.Media.IS_ALARM, false);
values.put(MediaStore.Audio.Media.IS_MUSIC, false);

//Insert it into the database
Uri uri = MediaStore.Audio.Media.getContentUriForPath(k.getAbsolutePath());
Uri newUri = main.getContentResolver().insert(uri, values);

RingtoneManager.setActualDefaultRingtoneUri(
  myActivity,
  RingtoneManager.TYPE_RINGTONE,
  newUri
); 
```

# javascript - Javascript从数组中选择一个随机对象集

> ID：11813257
> 
> 赞同：1
> 
> 时间：2012-08-05T01:24:40.927
> 
> 标签：javascript, arrays, kineticjs

“工作”示例在这里（此脚本处理三角形动画）

[http://movable.pagodabox.com/](http://movable.pagodabox.com/)

完整代码在这里： http: [//pastebin.com/rgPNxHgJ](http://pastebin.com/rgPNxHgJ)

这个问题主要是关于正确的语法。我有以下内容：

```
shape.transitionTo({
     offset: {
          x: 10,
          y: 10
     }
}) 
```

我想要做的是从数组中随机选择“x”和“y”，例如：

```
 movementIn = [
        {x: 34, y: 66},
        {x: -34, y: -66}
    ],

    shape.transitionTo({
        offset: movementIn[Math.floor(Math.random() * movementIn.length)],
    }); 
```

但这似乎不起作用……似乎每次都只选择第一项。我在这里做错了吗？

如何选择随机 X 和 Y 对并将其插入“偏移”参数？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:43:41.573

[“为我工作”](http://jsfiddle.net/BpdFa/)

```
arr = ["a","b","c"]
res = ""
for (i = 0; i < 10; i++) {
   res += arr[Math.floor(Math.random() * arr.length)]
}
alert(res) 
```

请注意，这不是选择一项的“正确”方式，因为分布略有偏差..

应该探讨问题中的代码存在一些*语法*和*语义问题：*

```
{
   although_SomeBrowsers: "accept me",
   iAmAnInvalidLiteral: "BecauseThereIsAnExtraComma",
} 
```

* * *

我觉得被骗了，给你：

```
arr = [{x:1,y:-1},{x:2,y:-2},{x:3,y:-3}]
for (i = 0; i < 10; i++) {
   AN_OBJECT = arr[Math.floor(Math.random() * arr.length)]
   // do whatever you want to do with what AN_OBJECT names
   alert("x: " + AN_OBJECT.x + " y: " + AN_OBJECT.y)
} 
```

# objective-c - Objective-C 是否有类似 StyleCop for .net 的工具？

> ID：11813260
> 
> 赞同：2
> 
> 时间：2012-08-05T01:25:25.243
> 
> 标签：objective-c, naming-conventions

多年来，我一直与我的原始团队成员一起使用 StyleCop/FxCop 进行 .net 开发，并发现它们非常有用。现在我加入了一个新的 iOS 开发团队。团队成员都非常初级，对高质量代码没有太多意识。我想知道是否有任何工具可以在构建阶段使用，以强制团队遵循名称约定等。谢谢！-精灵

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T01:58:57.537

[根据您的质量代码标准， OCLint](http://oclint.org/)和[uncrustify](http://uncrustify.sourceforge.net/)的组合可能就足够了。在这篇文章中发现了一个类似的问题：[Lint-checking tools for Objective-C development](https://stackoverflow.com/questions/5011416/lint-checking-tools-for-objective-c-development)

# drag - NSOutlineView 不可拖动，为什么呢？

> ID：11813261
> 
> 赞同：1
> 
> 时间：2012-08-05T01:25:51.373
> 
> 标签：drag, nsoutlineview

我使用 Apple 的示例“大纲视图”作为文件浏览器。我有一个 DataSource 和 FileSystemItem，就像 Apple 写的一样。我无法单击按住然后拖动文件名或文件夹名称。当我单击时， selectedRow 变为蓝色。正如我所持有的，什么也没有发生。如果我在按住时移动，蓝线会滚动文件列表。

我已经浏览了 Apple 的“Drag N Drop Outline View”代码，这不是我想要的。我不想重新排序文件并将它们从 OutlineView 中拖动。我想将文件名（最终是它的路径）拖到 NSTextfield。我无法让 NSOutlineView 注册拖动操作。

我已经将 NSOutlineView 子类化并尝试过：

```
- (void)awakeFromNib {
    [_outlineView registerForDraggedTypes:[NSArray arrayWithObjects:LOCAL_REORDER_PASTEBOARD_TYPE, NSStringPboardType, NSFilenamesPboardType, nil]];
    [_outlineView setDraggingSourceOperationMask:NSDragOperationEvery forLocal:YES];
} 
```

以及 -(NSDragOperation)、draggingEntered、-(void)registerForDraggedTypes 等...

无需任何特殊代码即可将文本从 NSScrollView 拖动到此 NSTextField。显然一个 NSOutlineView 没有继承 NSScrollView 的原生拖动能力？

那么我怎样才能得到一个 NSOutlineView 来允许我拖动。同样，Apple 的 DragNDropOutlineView 做的比我想要的要多，没有做我想做的事，也没有帮助我弄清楚如何获得这种拖动能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:17:52.723

你可以这样声明你`registerForDraggedTypes`的

```
[outline_view registerForDraggedTypes:[NSArray arrayWithObjects:LOCAL_REORDER_PASTEBOARD_TYPE,NSColorPboardType,NSDragPboard, nil]]; 
```

并且你需要实现这个方法来执行拖拽操作`NSOutlineView`

```
- (BOOL)outlineView:(NSOutlineView *)outlineView writeItems:(NSArray *)items toPasteboard:(NSPasteboard *)pasteboard
{

    NSData *data = [NSKeyedArchiver archivedDataWithRootObject:items];
    [pasteboard declareTypes:[NSArray arrayWithObject:LOCAL_REORDER_PASTEBOARD_TYPE] owner:self];
    [pasteboard setData:data forType:LOCAL_REORDER_PASTEBOARD_TYPE];
    return YES;   
} 
```

这将允许拖动`NSOutlineView`行..

# vector - SDL_Surface Vectors

> ID：11813264
> 
> 赞同：0
> 
> 时间：2012-08-05T01:26:23.393
> 
> 标签：vector, sdl, surface

I'm attempting to create a vector of surfaces, which will contain messages the user inputs (its a chat box). But whenever I add new surfaces to the vector and display them, the other surfaces get displayed in the surface vector. I don't know why this is. I assumed it was because the vector keeps being resized with `.push_Back();` and the computer wasn't doing this before the other surfaces get moved, so they get "stuck in the middle" and displayed in place of the surfaces. But when I checked against that, it just didn't add any at all! I even tried `.reserve( myVect.size() + 1);` but alas that only gave me the same issue.

The problem rests with `handle_input();` and how the messages are displayed I think. I cannot find anything on this issue anywhere on the web!

Here's my source:

```
 ofstream logFile;

    SDL_Surface *text = NULL;

void apply_surface (int x, int y, SDL_Surface *source, SDL_Surface *destination, SDL_Rect *clip = NULL) {

    SDL_Rect offset;
    offset.x = x;
    offset.y = y;

    SDL_BlitSurface(source, clip, screen, &offset);
}

vector <SDL_Surface*> surface_vect;

bool handle_input() {

if (event.type == SDL_KEYDOWN) {

   std::string temp = str;

   if ( str.length() <= 48) {
      logFile << "str's length is <=48.\n";
      if ( event.key.keysym.unicode == (Uint16) ' ' ) {

         str += (char)event.key.keysym.unicode;
         logFile << "Space bar was pressed.\n";
         charcount += 1;
      }
      else if ( ( event.key.keysym.unicode >= (Uint16)'0') && (event.key.keysym.unicode <= (Uint16) '9' ) ) //Finally works!
      {
         charcount += 1;
         str += (char)event.key.keysym.unicode;
         logFile << "Number key: " <<(char)event.key.keysym.unicode << " pressed, and added to str.\n";
      }
      else if (( event.key.keysym.unicode >= (Uint16)'A' )&& (event.key.keysym.unicode <= (Uint16) 'Z') )
      {
         charcount += 1;
         str += (char)event.key.keysym.unicode;
         logFile << "Number key: " <<(char)event.key.keysym.unicode << " pressed, and added to str.\n";
      }
      else if ( (event.key.keysym.unicode >= (Uint16)'a' )&& (event.key.keysym.unicode <= (Uint16) 'z' ) )
      {
         charcount += 1;
         str += (char)event.key.keysym.unicode;
         logFile << "Number key: " <<(char)event.key.keysym.unicode << " pressed, and added to str.\n";
      }
      else if ( (event.key.keysym.unicode == SDLK_RETURN ) )
      {
         str = "";
         surface_vect.reserve ( surface_vect.size() + 1);

         if ( surface_vect.size() < surface_vect.capacity() ) { //PREVENTS AN ACCESS READING VIOLATION ERROR! THE ELEMENTS IN THE VECTOR WERE BECOMING TOO LARGE FOR THE VECTOR!!
         surf_count += 1;
         surface_vect.push_back ( text );
         logFile << "surface_vect has: " << surf_count << " surfaces!";
     }

     }
      if (event.key.keysym.unicode == SDLK_BACKSPACE && str.length() != 0) {
            charcount -= 1;
        str.erase(str.length() - 1);
         logFile << "Backspace was pressed.\n";
      }
      if (str != temp) {
          SDL_FreeSurface ( text );  //This frees up the text surface whenever the str changes.

          text = TTF_RenderText_Solid(font, str.c_str(), textcolor); //Renders the text whenever that change occurs.

         logFile << "Full text rendered: " << str.c_str() << " Number of surfaces in existence: " << c << " Number of characters in current surface: " << charcount  << "\n"; 
      }

      //OK SO: the program separates the surfaces! Now to just make each surface different for each different message! To do this, we will put the "text" surface into the top of surface_vect, because that vector will be our messages body. Text will display all messages being typed, only when return is pressed is it added to the message surfaces body!
   }
}
return true;
}

int main ( int argc, char* args[] )
{
    time(&currentTime);

    int count = 0;

    text = TTF_RenderText_Solid(font, "First surface message!", textcolor);

    surface_vect.push_back( text );

    Timer myTime;
    Timer fps;

    if (init() == false ) {
        return false;
    }

    logFile << "Everything initialized fine. \n" ;
    if (load_files() == false) {

        return false;
    }

    logFile << "All files loaded successfully.\n";

myTime.start(); //The time the loop started. Keeps track of the time.

while (quit == false )
{
    fps.start(); //Frame timer.
    std::stringstream time; //Something to convert the time into a string, along with a message.
    while (SDL_PollEvent( &event ) ) {
        count += 1;
    if ( handle_input() == false ) {
        logFile << "Handle_input() returned false on the: " << count << "th run through the while loop!";
        return false;
    }

        if ( event.type  == SDL_QUIT ) {
            fps.stop();
            myTime.stop();
            quit = true; //Duh.
        }

    }

    apply_surface(0,0, background, screen);
    apply_surface ( 25, 435, text, screen ); //Render the text surface because its separate from the other surfaces! It needs its own render command.

for ( int c = 0; c <= surface_vect.size() - 1; c+=1 ) {
        apply_surface(25, newY - (13 * c), surface_vect.at(c), screen);
    }

    if (SDL_Flip (screen) == - 1) {
        return false;
    }
    frame += 1; //Frame counter. Used to 
        if( fps.get_ticks() < 1000 / FRAMES_PER_SECOND )
        {
            SDL_Delay( ( 1000 / FRAMES_PER_SECOND ) - fps.get_ticks() );
        }

}
clean_up();
return 0;

} 
```

Is there a better way to do this? Its supposed to just take the users text, put it into a vector of surfaces, and display them above.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:52:13.340

I don't understand your description of the symptoms but looking at the code I guess the text you push into the `surface_vect` vector isn't displayed afterwards, because when the user pushes the return key you are effectively doing (I keep only the relevant lines) :

```
surface_vect.push_back ( text );
SDL_FreeSurface ( text );
text = TTF_RenderText_Solid(font, str.c_str(), textcolor); 
```

Remember the `text` variable and the `surface_vect` vector don't hold actual surfaces but pointers to surfaces, so when you do the push_back you don't put a copy of the surface into the vector, just a copy of the pointer. When you `SDL_FreeSurface(text)` the surface itself is cleared which means the pointer you just inserted into the vector is now pointing to a cleared surface which won't display anything ... you can solve this by doing a `text=NULL` after the push_back (`SDL_FreeSurface(text)` accepts NULL and won't do anything)

Note there are a lot of other little problems in your code (like your use `vector` as if it was a C array, or the fact you should use a `list` instead) but it's not in the scope of the question ;)

# php - 正则表达式抓取额外的字符

> ID：11813267
> 
> 赞同：4
> 
> 时间：2012-08-05T01:27:37.413
> 
> 标签：php, regex

我正在使用`preg_replace`带有以下正则表达式的 PHP：

`/(?<=#EXTINF:([0-9])+,).+?(?=#EXT)/gsm`

对以下字符串进行操作：

```
#EXTM3U
#EXT-X-TARGETDURATION:10
#EXTINF:10,
Grab_this_string
#EXTINF:5,
Grab_this_string_too
#EXT-X-ENDLIST 
```

这取代了：

```
, Grab_this_string 
Grab_this_string_too 
```

我试图在没有第一个逗号的情况下匹配它（基本上是介于`#EXTINF:xx,`和下一个之间的所有内容`#EXTINF`：

```
Grab_this_string 
Grab_this_string_too 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T01:55:18.933

Since you're in multiline mode, you could match on line endings to delineate each line.

This matches two lines and replaces them with the first line only (effectively removing the second line). Notice I've removed "dotall" mode (`s`).

```
$regex = '/(^#EXTINF:\d+,$)(\s+)^.+$(?=\s+^#EXT)/m';

echo preg_replace($regex, '$1', $str); 
```

Output:

```
#EXTM3U
#EXT-X-TARGETDURATION:10
#EXTINF:10,
#EXTINF:5,
#EXT-X-ENDLIST 
```

* * *

*Update:*

Using a lookbehind will not work, as it requires variable-length matching, which is unsupported in most regex engines (including PCRE, which PHP uses).

If you want to capture only the line you want to remove and not have to replace two lines with a subpattern match like I did above, you can use the `\K` escape sequence to simulate a lookbehind that is not subject to variable-length restrictions. `\K` resets the match's start position, so anything that was matched before the `\K` will not be included in the final match. (See the [last paragraph here](http://us2.php.net/manual/en/regexp.reference.escape.php).)

```
$regex = '/^#EXTINF:\d+,\s+\K^.+?(?=#EXT)/sm';

echo preg_replace($regex, '', $str); 
```

# c++ - 使用 CMake 将资源（例如，着色器代码；图像）嵌入到可执行文件/库中

> ID：11813271
> 
> 赞同：41
> 
> 时间：2012-08-05T01:28:01.160
> 
> 标签：c++, cmake, cross-compiling, embedded-resource

我正在用 C++ 编写一个应用程序，它依赖于我项目中的各种资源。现在，我拥有从生成的可执行文件到源中硬编码的每个资源的相对路径，这允许我的程序打开文件并读取每个资源中的数据。这工作正常，但它要求我从相对于资源的特定路径启动可执行文件。因此，如果我尝试从其他任何地方启动我的可执行文件，它将无法打开文件并且无法继续。

是否有一种*可移植*的方式让 CMake 将我的资源嵌入到可执行文件（或库）中，以便我可以在运行时简单地在内存中访问它们，而不是打开路径脆弱的文件？我发现了一个[相关的问题](https://stackoverflow.com/questions/2627004/embedding-binary-blobs-using-gcc-mingw)，看起来嵌入资源可以通过一些`ld`魔法做得很好。所以我的问题是如何使用 CMake 以*可移植的跨平台方式执行此操作？*我实际上需要我的应用程序在 x86 和 ARM 上运行。我可以只支持 Linux（嵌入式），但如果有人可以建议如何为 Windows（嵌入式）执行此操作，则可以加分。

编辑：我忘了提到解决方案的所需属性。当我为 ARM 构建时，我希望能够使用 CMake 交叉编译应用程序，而不必在我的 ARM 目标上本地编译它。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-11-29T20:51:12.117

作为[sfstewman](https://stackoverflow.com/a/11814544/2546626)答案的替代方案，这里有一个小的 cmake ( **2.8** ) 函数，用于将特定文件夹中的所有文件转换为 C 数据并将它们写入希望的输出文件中：

```
# Creates C resources file from files in given directory
function(create_resources dir output)
    # Create empty output file
    file(WRITE ${output} "")
    # Collect input files
    file(GLOB bins ${dir}/*)
    # Iterate through input files
    foreach(bin ${bins})
        # Get short filename
        string(REGEX MATCH "([^/]+)$" filename ${bin})
        # Replace filename spaces & extension separator for C compatibility
        string(REGEX REPLACE "\\.| |-" "_" filename ${filename})
        # Read hex data from file
        file(READ ${bin} filedata HEX)
        # Convert hex data for C compatibility
        string(REGEX REPLACE "([0-9a-f][0-9a-f])" "0x\\1," filedata ${filedata})
        # Append data to output file
        file(APPEND ${output} "const unsigned char ${filename}[] = {${filedata}};\nconst unsigned ${filename}_size = sizeof(${filename});\n")
    endforeach()
endfunction() 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-08-05T06:58:22.817

执行此操作的最简单方法之一是在您的构建中包含一个小型、可移植的 C 程序，该程序读取资源并生成一个 C 文件，其中包含资源数据的长度和作为常量字符文字数组的实际资源数据。这将完全独立于平台，但只能用于相当小的资源。对于更大的资源，您可能不想将文件嵌入程序中。

对于资源“foo”，生成的 C 文件“foo.c”将包含：

```
const char foo[] = { /* bytes of resource foo */ };
const size_t foo_len = sizeof(foo); 
```

要从 C++ 访问资源，请在使用它们的标头或 cpp 文件中声明以下两个符号：

```
extern "C" const char foo[];
extern "C" const size_t foo_len; 
```

要`foo.c`在构建中生成，您需要 C 程序的目标（称为 embedfile.c），并且您需要使用[ADD_CUSTOM_COMMAND](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:add_custom_command)命令来调用此程序：

```
add_executable(embedfile embedfile.c)

add_custom_command(
  OUTPUT foo.c
  COMMAND embedfile foo foo.rsrc
  DEPENDS foo.rsrc) 
```

然后，包含`foo.c`在需要“foo”资源的目标的源列表中。您现在可以访问“foo”的字节。

程序 embedfile.c 是：

```
#include <stdlib.h>
#include <stdio.h>

FILE* open_or_exit(const char* fname, const char* mode)
{
  FILE* f = fopen(fname, mode);
  if (f == NULL) {
    perror(fname);
    exit(EXIT_FAILURE);
  }
  return f;
}

int main(int argc, char** argv)
{
  if (argc < 3) {
    fprintf(stderr, "USAGE: %s {sym} {rsrc}\n\n"
        "  Creates {sym}.c from the contents of {rsrc}\n",
        argv[0]);
    return EXIT_FAILURE;
  }

  const char* sym = argv[1];
  FILE* in = open_or_exit(argv[2], "r");

  char symfile[256];
  snprintf(symfile, sizeof(symfile), "%s.c", sym);

  FILE* out = open_or_exit(symfile,"w");
  fprintf(out, "#include <stdlib.h>\n");
  fprintf(out, "const char %s[] = {\n", sym);

  unsigned char buf[256];
  size_t nread = 0;
  size_t linecount = 0;
  do {
    nread = fread(buf, 1, sizeof(buf), in);
    size_t i;
    for (i=0; i < nread; i++) {
      fprintf(out, "0x%02x, ", buf[i]);
      if (++linecount == 10) { fprintf(out, "\n"); linecount = 0; }
    }
  } while (nread > 0);
  if (linecount > 0) fprintf(out, "\n");
  fprintf(out, "};\n");
  fprintf(out, "const size_t %s_len = sizeof(%s);\n\n",sym,sym);

  fclose(in);
  fclose(out);

  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-05-06T13:13:00.620

我想提出另一种选择。它使用 GCC 链接器将二进制文件直接嵌入到可执行文件中，无需中间源文件。在我看来，这更简单，更有效。

```
set( RC_DEPENDS "" )

function( add_resource input )
    string( MAKE_C_IDENTIFIER ${input} input_identifier )
    set( output "${CMAKE_ARCHIVE_OUTPUT_DIRECTORY}/${input_identifier}.o" )
    target_link_libraries( ${PROJECT_NAME} ${output} )

    add_custom_command(
        OUTPUT ${output}
        COMMAND ${CMAKE_LINKER} --relocatable --format binary --output ${output} ${input}
        DEPENDS ${input}
    )

    set( RC_DEPENDS ${RC_DEPENDS} ${output} PARENT_SCOPE )
endfunction()

# Resource file list
add_resource( "src/html/index.html" )

add_custom_target( rc ALL DEPENDS ${RC_DEPENDS} ) 
```

然后在您的 C/C++ 文件中，您只需要：

```
extern char index_html_start[] asm( "_binary_src_html_index_html_start" );
extern char index_html_end[]   asm( "_binary_src_html_index_html_end" );
extern size_t index_html_size  asm( "_binary_src_html_index_html_size" ); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-24T05:34:31.870

我想说在 C++ 中嵌入资源的最优雅的方法是简单地使用 Qt 资源系统，它可以跨不同平台移植，与 CMake 兼容，并且基本上包含了上面答案中所做的一切，除了提供压缩之外，完全经过测试和万无一失，其他一切。

创建一个 Qt 资源文件 - 一个列出要嵌入的文件的 XML：

```
<RCC>
    <qresource prefix="/">
        <file>uptriangle.png</file>
        <file>downtriangle.png</file>
    </qresource>
</RCC> 
```

调用文件 qtres.qrc。上面的资源文件将在最终可执行文件中嵌入两个 png 文件（与 qtres.qrc 位于同一目录中）。您可以使用 QtCreator（Qt IDE）轻松地将监视器资源添加/删除到 qrc 文件。

现在在您的 CMakeLists.txt 文件中添加：

```
set(CMAKE_AUTOMOC ON)
find_package(Qt5Core)
qt5_add_resources(QT_RESOURCE qtres.qrc) 
```

在您的 main.cpp 中，在您需要访问资源之前，添加以下行：

```
Q_INIT_RESOURCE(qtres); 
```

现在，您可以使用与 Qt 资源系统兼容的 Qt 类来访问上述任何资源，例如 QPixmap、QImage ......而且最重要的是，在一般情况下，QResource 包装器类可能会包装嵌入式 Qt 资源并允许通过友好的界面。例如，要访问上述资源中 downtriangle.png 中的数据，以下几行就可以了：

```
#include <QtCore>
#include <QtGui>

// ...

int main(int argc, char **argv)
{

    // ...

    Q_INIT_RESOURCE(qtres);

    // ...
    QResource res("://downtriangle.png"); // Here's your data, anyway you like
    // OR
    QPixmap pm("://downtriangle.png");  // Use it with Qt classes already

    // ...

} 
```

这里可以使用 res 来直接访问数据，使用 res.data(), res.size() ... 解析文件的图片内容使用 pm。使用 pm.size(), pm.width() ...

你可以走了。我希望它有所帮助。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-06-29T19:11:59.187

将任何文件转换为 C/C++ 源代码的纯 CMake 函数，仅使用 CMake 命令实现：

```
####################################################################################################
# This function converts any file into C/C++ source code.
# Example:
# - input file: data.dat
# - output file: data.h
# - variable name declared in output file: DATA
# - data length: sizeof(DATA)
# embed_resource("data.dat" "data.h" "DATA")
####################################################################################################

function(embed_resource resource_file_name source_file_name variable_name)

    file(READ ${resource_file_name} hex_content HEX)

    string(REPEAT "[0-9a-f]" 32 column_pattern)
    string(REGEX REPLACE "(${column_pattern})" "\\1\n" content "${hex_content}")

    string(REGEX REPLACE "([0-9a-f][0-9a-f])" "0x\\1, " content "${content}")

    string(REGEX REPLACE ", $" "" content "${content}")

    set(array_definition "static const unsigned char ${variable_name}[] =\n{\n${content}\n};")

    set(source "// Auto generated file.\n${array_definition}\n")

    file(WRITE "${source_file_name}" "${source}")

endfunction() 
```

[https://gist.github.com/amir-saniyan/de99cee82fa9d8d615bb69f3f53b6004](https://gist.github.com/amir-saniyan/de99cee82fa9d8d615bb69f3f53b6004)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-23T11:35:57.240

[有一个名为cmrc](https://github.com/vector-of-bool/cmrc)的单文件 CMake 脚本可让您轻松嵌入数据。

示例用法：

```
include(CMakeRC.cmake)
cmrc_add_resource_library(foo-resources
        ALIAS foo::rc
        NAMESPACE foo
        shaders/trig.vert
        shaders/trig.frag)

target_link_libraries(foo foo::rc) 
```

```
#include <cmrc/cmrc.hpp>

CMRC_DECLARE(foo); // It should be the NAMESPACE property you specified
                   // in your CMakeLists.txt

int main() {
    auto fs = cmrc::foo::get_filesystem();
    auto vert_shader = fs.open("shaders/trig.vert");
    auto frag_shader = fs.open("shaders/trig.frag");
    ...
    glShaderSource(vertexShader, 1, &vert_shader.begin(), nullptr);
} 
```

它可能是最容易设置和使用的库。

# android - Classes.dex 导致问题

> ID：11813274
> 
> 赞同：1
> 
> 时间：2012-08-05T01:28:53.633
> 
> 标签：android, eclipse, security

当我“我的电脑”停止响应时，我无法删除甚至右键单击我的 classes.dex。当我尝试使用 eclipse 清理项目时，当它尝试删除 classes.dex 时进度卡住了。我还尝试使用我的防病毒软件扫描我的应用程序的 bin 文件夹，但它在尝试扫描 classes.dex 时也停止响应。我认为这也是我无法运行我的应用程序的原因。

看看这个问题： [日食卡在运行程序](https://stackoverflow.com/questions/11428564/eclipse-stuck-at-running-program?answertab=votes#tab-top)

我们有类似的问题。他能够解决它，他说这是由卡巴斯基引起的（我安装了卡巴斯基），但他没有解释如何。我试图用卡巴斯基解除保护，但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:49:03.053

禁用卡巴斯基安全似乎对我有用。我遵循的步骤是：

1.  关闭模拟器、eclipse 和所有其他与 Android 环境相关的窗口。
2.  断开互联网连接（因为我可能是偏执狂，并且在我关闭卡巴斯基保护时不想连接到网络）。
3.  关闭卡巴斯基保护（此时，您的系统将开始对您大喊各种诅咒，因为您关闭其保护并使其易受攻击）。
4.  在执行任何其他操作之前运行 eclipse 并启动模拟器。
5.  更改您的代码并继续使用模拟器正常测试您的应用程序（现在，“在启动 100% 时卡住”问题应该停止）。
6.  如果您需要互联网/如果您需要启用卡巴斯基，请关闭模拟器、eclipse 等。
7.  打开卡巴斯基——让您的系统松了一口气；）
8.  连接到互联网并继续浏览。

希望这会有所帮助，并希望它也能继续顺利地为我工作。

# python - TA-Lib 的 Python 包装器：导入失败

> ID：11813279
> 
> 赞同：3
> 
> 时间：2012-08-05T01:30:05.230
> 
> 标签：python, c, cython

我遇到了@mrjbq7 的出色工作，他为[TA-Lib编写了一个 Python](http://www.ta-lib.org/)[包装器](https://github.com/mrjbq7/ta-lib)——一个用 C 编写的开源技术分析库。我已经安装了两个 TA-Lib（像往常一样简单，，，）以及包装器（使用包含的 setup.py 脚本），但我在尝试导入模块或运行示例脚本时收到导入错误（相同的导入错误）。`configure``make``make install`

我在 Linux 机器 ( `sys.platform == 'linux2'`) 上并使用 Python 2.7 的 Enthought 发行版。

我已将 TA-Lib 安装到包装脚本指向的默认位置（您可以在[此处](https://github.com/mrjbq7/ta-lib/blob/master/setup.py)`setuptools`查看 setup.py 的源代码）：

```
bash$ ls -la /usr/local/include/ta-lib/
total 240
drwxr-xr-x 2 root root   4096 2012-08-04 08:54 .
drwxr-xr-x 3 root root   4096 2012-08-04 08:54 ..
-rw-r--r-- 1 root root  19930 2012-08-04 08:54 ta_abstract.h
-rw-r--r-- 1 root root   4792 2012-08-04 08:54 ta_common.h
-rw-r--r-- 1 root root  12391 2012-08-04 08:54 ta_defs.h
-rw-r--r-- 1 root root 181115 2012-08-04 08:54 ta_func.h
-rw-r--r-- 1 root root   1849 2012-08-04 08:54 ta_libc.h

bash$ ls -la /usr/local/lib
total 4956
drwxr-xr-x  3 root root    4096 2012-08-04 08:54 .
drwxr-xr-x 12 root root    4096 2011-04-06 23:47 ..
-rw-r--r--  1 root root 3063180 2012-08-04 08:54 libta_lib.a
-rwxr-xr-x  1 root root     837 2012-08-04 08:54 libta_lib.la
lrwxrwxrwx  1 root root      18 2012-08-04 08:54 libta_lib.so -> libta_lib.so.0.0.0
lrwxrwxrwx  1 root root      18 2012-08-04 08:54 libta_lib.so.0 -> libta_lib.so.0.0.0
-rwxr-xr-x  1 root root 1983243 2012-08-04 08:54 libta_lib.so.0.0.0
drwxr-xr-x 11 root root    4096 2011-04-07 17:10 pythonEPD 
```

然后我使用以下方法成功构建了 Cython 代码`python setup.py install`：

```
bash$ python setup.py install
running install
running build
running build_ext
building 'talib' extension
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -O2 -I/usr/local/lib/pythonEPD/include -fPIC -I/usr/local/lib/pythonEPD/lib/python2.7/site-packages/numpy/core/include -I/usr/local/include/ta-lib/ -I/usr/local/lib/pythonEPD/include/python2.7 -c talib.c -o build/temp.linux-i686-2.7/talib.o

...
[truncated - lots of warnings regarding pointer types]
---

gcc -pthread -shared -g -L/usr/local/lib/pythonEPD/lib build/temp.linux-i686-2.7/talib.o -L/usr/local/lib/ -L. -lta_lib -lpython2.7 -o build/lib.linux-i686-2.7/talib.so
running install_lib
copying build/lib.linux-i686-2.7/talib.so -> /usr/local/lib/pythonEPD/lib/python2.7/site-packages
running install_egg_info
Writing /usr/local/lib/pythonEPD/lib/python2.7/site-packages/TA_Lib-0.4.0-py2.7.egg-info 
```

然而，当我尝试运行示例脚本或导入 talib 时，我收到以下导入错误：

```
bash$ python
Enthought Python Distribution -- www.enthought.com
Version: 7.0-2 (32-bit)

Python 2.7.1 |EPD 7.0-2 (32-bit)| (r271:86832, Nov 29 2010, 13:52:51) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-44)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import talib
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: libta_lib.so.0: cannot open shared object file: No such file or directory 
```

setup.py 脚本清楚地包括扩展类中已编译 TA-Lib 代码的适当路径，但我注意到`gcc`Cython 代码构建中的命令不包括对`/usr/local/lib`路径的引用......（不确定这是否是问题吗？）。

我希望有人在这个模块或类似情况下遇到过这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-05T04:19:56.693

关闭@rcovre，我在@mrjbq 的github 站点上发布了一个问题，他给出了非常简单的解决方案：

```
export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH 
```

对于永久解决方案，必须以 root 身份添加`/usr/local/lib`，`/etc/ld.so.conf`然后运行`/sbin/ldconfig`（也以 root 身份）。

奇迹般有效。

[https://github.com/mrjbq7/ta-lib/issues/6](https://github.com/mrjbq7/ta-lib/issues/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:21:46.843

你的 python 路径呢？

也许所有编译的库都可能存储在 sys.path 的某个目录中，以供您的 python 解释器查看。例如在 '/usr/local/lib/python2.7/dist-packages' 中，而不仅仅是在 '/usr/local/lib' 中（如在安装脚本中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T13:20:12.680

你应该首先安装[ta-lib](http://ta-lib.org/hdr_dw.html)，python 库`ta-lib`是基于这个 c 库的。

# php - php的默认词

> ID：11813280
> 
> 赞同：-2
> 
> 时间：2012-08-05T01:30:04.657
> 
> 标签：php, if-statement

有没有办法喜欢做一个默认代码，我不知道如何解释，但我会尽我所能。

```
<?php
if ($test == "CODE-*AnyWordHere*"){
    echo "Yes";
}
?> 
```

另一个例子：

```
<?php
if ($url == "http://stackoverflow.com/secretplace/index.html/?*AnyWordHere*"){
    echo "Yes";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:47:58.813

I'm not exactly sure what you're looking for, but here are a few guesses.

If you want to check for a variable string in an if statement you can use either strstr or strpos to see if a string exists in another one. To use the example you provided, try the following:

```
<?php
if (strstr($test, "CODE-")) {
    echo "Yes";
}
?> 
```

If you want to retrieve that variable part of the string you're checking, try this:

```
<?php
$str_to_check = "CODE-*AnyWordHere*"

if ($pos = strpos($test, $str_to_check) !== false)) {
    $code = substr($str_to_check, $pos, len($str_to_check));
    echo $code;
}
?> 
```

If you simply want to using a variable string in a control statement, try this:

```
<?php
if ($test == "CODE-" . $any_word_here){
    echo "Yes";
}
?> 
```

The period joins (concatenate) two strings together.

If none of these suffice, then I'm not sure what you are asking for.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T01:32:58.840

如果我正确理解了您的问题，您正在寻找[strstr](http://www.php.net/manual/en/function.strstr.php)它将匹配以查看字符串是否包含另一个这样的字符串：

```
<?php
    $email  = 'http://stackoverflow.com/secretplace/index.html/?someTerm';
    $domain = strstr($email, 'someTerm');
    if ($domain)
    {
        // Your 'someTerm' was found in the string.
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T01:36:54.013

您可以尝试使用`strpos()`或：

```
function strending($string, $keyword){
    return substr($string, strlen($string)-strlen($keyword), strlen($string)) == $keyword;
}

strending("hello world", "world"); //true
strending("hello world!", "world"); //false 
```

不确定这是否是您的意思。您也可以尝试使用`regexp`.

# javascript - jQuery：隐藏类，以便隐藏该类的随后创建的元素

> ID：11813284
> 
> 赞同：2
> 
> 时间：2012-08-05T01:31:01.703
> 
> 标签：javascript, jquery, class, hide

我一直在使用标准方法来隐藏/显示一个类，即：

```
$('.myClass').show();  // or .hide() or .toggle() 
```

但是，如果`myClass`是隐藏的并且创建了类的新元素，它是可见的，因为它`.hide()`不影响它。为了解决这个问题，如果类在创建时隐藏，我将隐藏新创建的元素。

但是，有没有办法让我可以隐藏该类，使其自动应用于随后创建的元素？

我正在考虑模式：`$('#container').on('click', '.myClass', function () {...`它将处理程序附加到稍后创建的元素。本质上，我想用 display 属性来模拟它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:01:40.827

`.myClass`应该`display:none`在你的 CSS 中。然后，`.show()`在您需要时拨打电话。

示例：http: [//jsfiddle.net/imsky/5J5Tt/](http://jsfiddle.net/imsky/5J5Tt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T02:01:51.963

实际上，这是一个绑定到`DOMNodeInserted`在大多数较新浏览器中将元素插入 DOM 时将触发的事件的示例：

```
$(document).on('DOMNodeInserted', function(e) {//whenever an element is inserted
    if ($(e.target).is('.myClass')) {          //check if it has the right class
        $(e.target).hide();                    //and hide it if it does
    }
}); 
```

它在 IE 中不起作用，因为没有支持，我似乎记得看过一些解决方法，所以它可能可以跨浏览器。

这是一个快速[**演示**](http://jsfiddle.net/JzAk7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T02:05:52.063

我认为你最好的选择可能是添加一个类`#container`，如下所示：

```
#container .myClass {

  display: none;

}

#container.with-whatevers .myClass {

  display: block;

}

$( '#container' ).on( 'click', '.myClass', function () {

  $( "#container" ).toggleClass( "with-whatevers" );

} ); 
```

我不确定您切换`.myClass`元素可见性的确切机制是什么-显然，如果它们被隐藏，则无法单击一个来切换它们的可见性。

> 我正在考虑这种模式： $('#container').on('click', '.myClass', function () {... 它将处理程序附加到稍后创建的元素上。

这实际上并没有将处理程序附加到稍后创建的元素上。它将它附加到`#container`. 然后其后代上的任何单击事件都会冒泡，如果目标元素与传递给的选择器匹配`on()`，则将运行处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T01:58:30.723

在添加点击事件之前隐藏

```
$('.myClass').hide(); 
```

然后使用 jQuery 的 .on() 或 .delegate() 方法

```
$('#container').on('click', '.myClass', function(){
  $(this).toggle();
} 
```

# php - 无法将外部文件链接到 php

> ID：11813286
> 
> 赞同：0
> 
> 时间：2012-08-05T01:31:28.440
> 
> 标签：php, html, css

我正在编写一个 php 文件，并尝试将一个 css 文件链接到它。但我发现我无法将外部文件链接到 php.ini 文件。我试图将 css 文件的内容放在 php 中，它可以工作，但在我想链接外部图片的代码中失败了。我在我学校的服务器上运行 php。有谁知道我该怎么办？谢谢你。

代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">; <html xmlns="w3.org/1999/xhtml"; lang = "en-us"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<title>Login to the administrator page</title> 
<link rel="stylesheet" type="text/css" href="/css/default.css" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T01:36:58.247

您`href`可能错了，除非您将 CSS 存储在服务器的根目录中。尝试这个：

```
<link rel="stylesheet" type="text/css" href="css/default.css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T01:44:05.570

如果你的文件夹结构是这样的：

*   索引.html
*   css/default.css
*   图片/logo.png
*   图片/bg.jpg

然后您可以使用以下方法包含 css 文件：`<link rel="stylesheet" type="text/css" href="css/default.css" />`

在 CSS 中，对于图像的 URL，您可以这样使用它：`../images/bg.jpg`

例子：

```
.sampleclass
{
  background-image: url(../images/bg.jpg);
} 
```

# python - 从函数内将变量插入全局命名空间？

> ID：11813287
> 
> 赞同：32
> 
> 时间：2012-08-05T01:31:34.747
> 
> 标签：python, namespaces

是否可以编写一个将对象插入全局命名空间并将其绑定到变量的函数？例如：

```
>>> 'var' in dir()
False
>>> def insert_into_global_namespace():
...        var = "an object"
...        inject var
>>> insert_into_global_namespace()
>>> var
"an object" 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-12-24T21:47:51.947

这很简单

```
globals()['var'] = "an object" 
```

和/或

```
def insert_into_namespace(name, value, name_space=globals()):
    name_space[name] = value

insert_into_namespace("var", "an object") 
```

`globals`内置关键字的备注，即`'globals' in __builtins__.__dict__`计算结果为`True`。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-12T21:15:48.420

但请注意，分配声明为全局的函数变量只会注入模块命名空间。导入后不能全局使用这些变量：

```
from that_module import call_that_function
call_that_function()
print(use_var_declared_global) 
```

你得到

```
NameError: global name 'use_var_declared_global' is not defined 
```

您必须再次导入才能导入那些新的“模块全局变量”。内置模块虽然是“真正的全局”：

```
class global_injector:
    '''Inject into the *real global namespace*, i.e. "builtins" namespace or "__builtin__" for python2.
    Assigning to variables declared global in a function, injects them only into the module's global namespace.
    >>> Global= sys.modules['__builtin__'].__dict__
    >>> #would need 
    >>> Global['aname'] = 'avalue'
    >>> #With
    >>> Global = global_injector()
    >>> #one can do
    >>> Global.bname = 'bvalue'
    >>> #reading from it is simply
    >>> bname
    bvalue

    '''
    def __init__(self):
        try:
            self.__dict__['builtin'] = sys.modules['__builtin__'].__dict__
        except KeyError:
            self.__dict__['builtin'] = sys.modules['builtins'].__dict__
    def __setattr__(self,name,value):
        self.builtin[name] = value
Global = global_injector() 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-08-05T01:32:31.567

是的，只需使用该`global`语句。

```
def func():
    global var
    var = "stuff" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-08T20:24:44.700

[Roland Puntaier 的答案](https://stackoverflow.com/a/14298025/1397061)更简洁的版本是：

```
import builtins

def insert_into_global_namespace():
    builtins.var = 'an object' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-25T17:25:20.903

我认为没有人解释过如何创建和设置名称本身就是变量值的全局变量。

这是我不喜欢的答案，但至少它有效[1]，通常是[2]。

我希望有人能告诉我一个更好的方法来做到这一点。我发现了几个用例，实际上我正在使用这个丑陋的答案：

```
########################################
def insert_into_global_namespace(
    new_global_name,
    new_global_value = None,
):
    executable_string = """
global %s
%s = %r
""" % (
        new_global_name,
        new_global_name, new_global_value,
    )
    exec executable_string  ## suboptimal!

if __name__ == '__main__':
    ## create global variable foo with value 'bar':
    insert_into_global_namespace(
        'foo',
        'bar',
    )
    print globals()[ 'foo']
######################################## 
```

1.  出于多种原因，应避免使用 Python exec。

2.  注意：请注意“exec”行（“unqualified exec”）上缺少“in”关键字。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-12-24T22:12:43.140

```
var = ""

def insert_global():    
    global var
    var = "saher"

insert_global()
print var 
```

# java - 是否可以将 JSP usebean 实现为注解？

> ID：11813290
> 
> 赞同：1
> 
> 时间：2012-08-05T01:31:47.397
> 
> 标签：java, jsp, annotations, javabeans

我想将 JSP useBean taglib 实现为类注释......可能吗？如果是这样，最好（简单有效）的方法是什么？

例子：

```
 <jsp:useBean id="p" class="beans.Person" scope="application"></jsp:useBean> 
```

---->

```
 //Custom annotation goes here...
  @ManagedBean
  public class Bean {

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:43:43.210

没有使用标准 JSP 工具的直接方法。老式的`<jsp:useBean>`方法也与 MVC 相去甚远，因为没有控制器。只需选择一个支持 JSP 作为 View 的现有 MVC 框架，例如[Spring MVC](https://stackoverflow.com/tags/spring-mvc/info)、[JSF](https://stackoverflow.com/tags/jsf/info)等（尽管 JSF 从 2.0 版开始使用 JSP 的后继 Facelets 作为默认 View 技术）并使用它的托管 bean 设施。现代 MVC 框架支持注解。

在这种特殊情况下，对于应用程序范围的 bean，在不需要 MVC 框架的情况下使用注释的完全不同的替代方法是使用带有[`ServletContextListener`](http://docs.oracle.com/javaee/1.4/api/javax/servlet/ServletContextListener.html)注释的[`@WebListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebListener.html).

```
@WebListener
public void Config implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent event) {
        event.getServletContext().setAttribute("p", new Person());
    }

    // ...
} 
```

*（尽管`Person`在应用程序范围内有类似 a 的东西只是很奇怪......）*

对于会话范围，您可以实现[`HttpSessionListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html)，对于请求范围，[`ServletRequestListener`](http://docs.oracle.com/javaee/1.4/api/javax/servlet/ServletRequestListener.html). 这种方式只是很笨拙。我真的会考虑一个像样的 MVC 框架。

# html - 如何让这些文本内联显示？

> ID：11813294
> 
> 赞同：0
> 
> 时间：2012-08-05T01:33:31.937
> 
> 标签：html, css

我有这个设计：

![设计](../Images/ff4d684abf0e53f762d8efaaad7e1e3a.png)

目前，所有东西都包裹在这个深色背景的矩形中。图片和每个文本字符串都在它自己的类中。文本在跨度中，末尾有换行符。

我的问题是我希望三个文本字符串显示在图片的右侧，如下所示：

![在此处输入图像描述](../Images/4ac5f831627c84b7b9c33fc35997bb16.png)

我敢打赌，这很简单，但由于某种原因，我无法为此提出解决方案。

这里没有太多要讨论的标记，但无论如何我都会粘贴它。

```
<div class="wrapper">
    <div class="pic"><img src="img.png" width="164" height="128"></div>
    <span class="username">petronella</span></br>
    <span class="info">Kvinna, 22 år, Uppsälje</span></br>
    <span class="desc"><em>Hej!!Jag heter Petronella~~~</em></span>
</div>

.wrapper {
    position: relative;
    float: left;
    width: 420px;
    padding: 15px;
}
.pic {
    position: relative;
    width: 164px;
    height: 128px;
}
.username {
    position: relative;
}
.info {
    position: relative;
    font-weight: bold;
}
.desc {
    position: relative;
} 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T01:37:06.607

`.spotlight-pic`尝试向左浮动：

```
<div class="wrapper">
    <div class="spotlight-pic"><img src="img.png" width="164" height="128"></div>
    <span class="username">petronella</span></br>
    <span class="info">Kvinna, 22 år, Uppsälje</span></br>
    <span class="desc"><em>Hej!!Jag heter Petronella~~~</em></span>
</div>

.wrapper {
    position: relative;
    float: left;
    width: 420px;
    padding: 15px;
}
.spotlight-pic {
    position: relative;
    width: 164px;
    height: 128px;
}
.username {
    position: relative;
}
.info {
    position: relative;
    font-weight: bold;
}
.desc {
    position: relative;
}
.spotlight-pic {
    float: left;
    margin-right: 15px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T01:35:46.007

将图像浮动到左侧。

作为旁注，将这些文本行放在`span`元素中（并且`br`将 s 分开）而不是例如`h2`用户名和`p`其余部分是非常奇怪的。

**[看看它长什么样。](http://jsfiddle.net/sCXey/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T01:38:39.393

看看[这个 jsFiddle](http://jsfiddle.net/gGL6k/)。如果您将其他内容块（图像外部）包装在 a 中`div`，那么您只需要以下样式

```
.wrapper > div { float: left; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T01:38:54.467

要使 img div 浮动到 span 标签的左侧，请添加以下 css：

```
.spotlight-pic {
    float: left;
} 
```

# datagrid - Dojo 1.7 datagrid 根据单元格中的文本更改行颜色

> ID：11813296
> 
> 赞同：0
> 
> 时间：2012-08-05T01:34:07.360
> 
> 标签：datagrid, dojo, styles, row

我想使用 dojo 工具更改每个单元格的数据网格背景颜色，但我正在尝试一些事情，但我找不到正确的解决方案。

下面的代码用于创建数据网格

```
 var myStore, dataStore, grid;
    require([
            "dojo/store/JsonRest",
            "dojo/store/Memory",
            "dojo/store/Cache",
            "dojox/grid/DataGrid",
            "dojo/data/ObjectStore",
            "dojo/query",
            "dijit/form/Button",
            "dojo/domReady!"
        ], function (JsonRest, Memory, Cache, DataGrid, ObjectStore, query) {
            myStore = Cache(JsonRest({ target: "/Blog/Action/", idProperty: "Id" }), Memory({ idProperty: "Id" }));
            grid = new DataGrid({
                store: dataStore = ObjectStore({ objectStore: myStore }),
                //  items:dataStore.items,
                structure: [
                    { name: "Blog Id", field: "Id", width: "50px", },
                    { name: "Name", field: "Name", width: "200px",classes:"Name" },
                    { name: "Phone Number", field: "Phone Number", width: "200px",classes:"test" }
                ]
            }, "grid"); // make sure you have a target HTML element with this id

            grid.startup();

            dojo.query("body").addClass("claro");

            grid.canSort = function () { return false };
        }); 
```

下面的代码是尝试根据所选值的索引更改颜色，但没有发生任何事情，我的意思是没有错误，但它根本没有进入脚本。

```
 <script type="text/javascript" src="dojo/dojo.js" data-dojo-config="parseOnLoad: true">
       dojo.connect(grid, 'onStyleRow', this, function (row) {
        var item = grid.getItem(row.index);
        if (row.index == 0) {
            row.customClasses = "highlightRow";
            row.customStyles += 'background-color:#FFB93F;';
        }

    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:50:42.303

您的标签内的`<script>`代码（具有“src”）永远不会运行。有关如何以 AMD 方式引入连接模块的信息，请参见[dojo/_base 文档](https://dojotoolkit.org/reference-guide/1.7/dojo/connect.html)

这应该工作

```
 <script type="text/javascript" src="dojo/dojo.js" data-dojo-config="async:true, parseOnLoad: true"></script> 
```

并用网格钩住

```
 <script type="text/javascript">
    require(["dojo/_base/connect"], function(connect) {
       connect.connect(grid, 'onStyleRow', this, function (row) {
          var item = grid.getItem(row.index);
          if (row.index == 0) {
             row.customClasses = "highlightRow";
             row.customStyles += 'background-color:#FFB93F;';
          }
       });    
    });
</script> 
```

如果你通过标记声明你的网格，你可以使用这个模式：

```
<div data-dojo-type="dojox.grid.DataGrid" data-dojo-props="???">
  <script type="dojo/method" event="onStyleRow" args="row">
        var item = grid.getItem(row.index);
        if (row.index == 0) {
            row.customClasses = "highlightRow";
            row.customStyles += 'background-color:#FFB93F;';
        } else {
             this.inherited(arguments);
        }
  </script>
</div> 
```

# r - 如何在 ggplot 地图上添加地理空间连接？

> ID：11813299
> 
> 赞同：2
> 
> 时间：2012-08-05T01:35:43.430
> 
> 标签：r, ggplot2, geospatial

以此为[参考](http://flowingdata.com/2011/05/11/how-to-map-connections-with-great-circles/)，我正在尝试绘制下四十八的地图并添加图层以可视化状态之间的流动。

```
library(ggplot2)
library(maps)
library(geosphere) # to inter-polate a given pair of (lat,long) on the globe

# load map data for the US
all_states <- map_data("state")

# plot state map
p <- ggplot() + geom_polygon( data=all_states, 
                       aes(x=long, y=lat, group = group),
                       colour="white", fill="grey10" )

# sample origin - destination lat,long pairs
geo <- structure(list(orig_lat = c(36.17, 36.17, 36.17), 
orig_lon = c(-119.7462, -119.7462, -119.7462), dest_lat = c(33.7712, 36.17, 39.0646), 
    dest_lon = c(-111.3877, -119.7462, -105.3272)), .Names = c("orig_lat", 
"orig_lon", "dest_lat", "dest_lon"), row.names = c(NA, 3L), class = "data.frame")

#> geo
#  orig_lat  orig_lon dest_lat  dest_lon
#1    36.17 -119.7462  33.7712 -111.3877
#2    36.17 -119.7462  36.1700 -119.7462
#3    36.17 -119.7462  39.0646 -105.3272

# list to hold a dataframe of interpolated points for each origin-destination pair
list_lines <- list()

# use the geosphere package's gcIntermediate function to generate 50 interpolated  
# points for each origin-destination pair
for (i in 1:3) {
  inter <- as.data.frame(gcIntermediate(c(geo[i,]$orig_lon, geo[i,]$orig_lat), 
                                        c(geo[i,]$dest_lon, geo[i,]$dest_lat), 
                                        n=50, addStartEnd=TRUE))
  list_lines[i] <- list(inter)
  p <- p + geom_line( data = list_lines[[i]], aes(x = lon, y = lat), color = '#FFFFFF')
}
p 
```

这是我尝试打印情节时得到的

```
p
Error in eval(expr, envir, enclos) : object 'lon' not found 
```

我试图调试它，发现这有效

```
p + geom_line( data = list_lines[[1]], aes(x = lon, y = lat), color = '#FFFFFF') 
```

但是为第二个列表元素添加另一层会破坏它，但这是我对 R 和 ggplot 的有限知识所能得到的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T09:04:23.893

`gcIntermediate`返回不同的列名（因为 i=2 的起点和终点相同）：

```
for (i in 1:3) {
  inter <- as.data.frame(gcIntermediate(c(geo[i,]$orig_lon, geo[i,]$orig_lat), 
                                        c(geo[i,]$dest_lon, geo[i,]$dest_lat), 
                                        n=50, addStartEnd=TRUE))
  print(head(inter, n=2))
}
     lon   lat
1 -119.7 36.17
2 -119.6 36.13
      V1    V2
1 -119.7 36.17
2 -119.7 36.17
     lon   lat
1 -119.7 36.17
2 -119.5 36.24 
```

以下几行应该有效：

```
for (i in 1:3) {
  inter <- as.data.frame(gcIntermediate(c(geo[i,]$orig_lon, geo[i,]$orig_lat), 
                                        c(geo[i,]$dest_lon, geo[i,]$dest_lat), 
                                        n=50, addStartEnd=TRUE))
  names(inter) <- c("lon", "lat")
  p <- p + geom_line(data=inter, aes(x=lon, y=lat), color='#FFFFFF')
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T08:32:49.163

令我感到奇怪的是，您以两种不同的方式引用经度：`long`在脚本的开头和`lon`结尾。如果您希望多个 geom 一起工作，则需要使这些名称保持一致。

此外，几乎不需要使用 for 循环添加相同的 geom。只需添加一个`geom_line`并使用`color`美学来绘制多条线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-15T17:54:49.790

有一个非常简单的解决方案，使用`ggplot2`. [这里](https://github.com/rafapereirabr/flow-map-in-r-ggplot)有关于如何在`R`使用`ggplot2`中绘制流图的简单教程。

```
p + 
  geom_segment(data = geo, aes(x = orig_lon,    y = orig_lat, 
                               xend = dest_lon, yend = dest_lat,
                               color="#FFFFFF")) +  coord_equal() 
```

[![在此处输入图像描述](../Images/4fb3df1c290548e6e686b9a4cfcac00c.png)](https://i.stack.imgur.com/Fb2W6.jpg)

# python - 在网页中嵌入 Python shell

> ID：11813301
> 
> 赞同：3
> 
> 时间：2012-08-05T01:36:14.767
> 
> 标签：python, embedding

我正在写一份向初学者介绍编程的手稿。Python 是我在本书中介绍的两种语言之一。我想建立一个带有嵌入式 Python shell 的网页，供我的读者去尝试。最好的方法是什么？我知道像[repl.it](http://repl.it/)这样的网络应用程序。但是，我个人想自己设置一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T03:42:23.247

有一个提供 Python shell的[示例 google appengine 项目，例如](http://code.google.com/p/google-app-engine-samples/source/browse/trunk/shell/README)[http://live.sympy.org](http://live.sympy.org)使用它。

或者您的 JavaScript 代码（一个 Ajax shell）可以使用类似[Twisted WebSocket server](https://stackoverflow.com/a/11729467/4279)之类的东西与[沙盒化的 Pypy 版本](http://doc.pypy.org/en/latest/sandbox.html)进行通信。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T03:49:37.173

[repl.it](http://repl.it/)的优秀人员提供了一个使用 LLVM 和[EmScripten](https://github.com/kripken/emscripten)[在 JavaScript 中编译的 Python 版本](https://github.com/replit/empythoned)- 它比您的其他一些选项更强大（并且可能更错误），但它完全是客户端，因此不易受到某些攻击服务器端设置*可能*容易受到攻击。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-13T07:11:15.637

看看 Datacamp 提供的新 python shell。它很棒，设计也很好。 [在这里检查！](https://github.com/datacamp/datacamp-light)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T01:37:53.190

试试[这个](http://pyjs.org/)。它是一个 Python 到 javascript 的编译器。从来没有用过，但我以前听说过。GLHF*

# jquery - 引导“下拉打开”切换在开发中无法正常工作，但在生产中工作

> ID：11813304
> 
> 赞同：18
> 
> 时间：2012-08-05T01:36:40.650
> 
> 标签：jquery, drop-down-menu, twitter-bootstrap, ruby-on-rails-3.2

我正在关注[RailsTutorial sample_app](http://ruby.railstutorial.org/chapters/sign-in-sign-out#code%3alayout_signin_signout_links)，在里面我们使用 twitter-boostrap 框架。有一个下拉菜单[（代码，jQuery）](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-dropdown.js)在开发环境中对我不起作用，但在生产环境中（在 Heroku 上）运行良好。

在“视觉事件”的帮助下，我确认有一个与菜单标题相关的事件。正常行为应该是单击以更改类：

```
<li id="fat-menu" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"> 
```

至：

```
<li id="fat-menu" class="dropdown open">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"> 
```

尽管如此，在我的情况下，点击它会添加“打开”并在同一时刻删除。我几乎没有注意到它做出了改变，但很快又回到了初始状态，因此下拉菜单没有打开。

如果我在浏览器中手动编辑代码并将“打开”添加到类中，菜单就会打开。如果我然后单击菜单标题，它会暂时删除“打开”，然后再次返回（与第一种情况相反）。

我很困惑它在生产中有效，但在开发中无效（在同一个浏览器上）。我应该检查什么？

谢谢！

Vasil //第一个问题

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-05T23:01:52.410

如果您两次加载**bootstrap-dropdown.js的代码，您将得到此行为。**检查以确保您没有同时加载**bootstrap-dropdown.js**和**bootstrap.js**。后者包括前者。

* * *

### [JSFiddle 失败](http://jsfiddle.net/mmfansler/BjxwJ/)

如果您从资源面板中删除**bootstrap-dropdown.js**，然后重新运行它，它将起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T14:41:08.883

（Rails 3.2）我通过删除本地预编译资产解决了这个问题——它可以在 Heroku/Prod 中正常工作，但会在 dev 中立即打开和关闭。

`rake assets:clean`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T17:23:17.907

我遇到了同样的问题，结果发现引导下拉菜单被加载了两次。对此修复+1！

我们全局加载 bootstrap-dropdown.js，因为我们在每个页面上都使用它。我们的一位开发人员将 bootstrap.js 作为依赖项加载到小部件中。结果是我们的下拉菜单在除一页之外的每一页都有效。追查起来有点困难，如果不知道最近页面上发生了什么变化，要弄清楚就困难得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-31T13:19:40.517

从 bootstrap -v 2.1 更新到 2.3 为我解决了这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-15T07:46:03.750

我遇到了几乎相同的问题。但是会导致在一个 HTML 页面中同时加载 bootstrap 和 bootstrap.min js 文件作为捆绑包（ASP.NET MVC 项目）。删除其中一个就解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T22:56:38.523

我有同样的问题。我了解到预编译资产用于开发和生产。我在生产环境中测试缓存，当我切换回开发时，下拉菜单停止工作。

从生产切换回开发时，请始终记住清理已编译的资产。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T03:48:20.817

我遇到了同样的问题。但发生的只是我错过了一些结束的 HTML 元素。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-23T20:22:40.663

这些解决方案都不适合我。生产模式导致了这个问题。我通过大量试验和错误发现 config.assets.debug = false 导致我看不到我的 gem 文件设置的问题。当我将其设置为 true 时，我收到的错误指出我的“bootstrap-sass”gem 不应该在我的资产组中。

因此，对于那些遇到此问题并一直到此评论的人，请尝试在您的生产环境中设置 config.assets.debug = true ，看看它是否至少能让您指向正确的方向。

# java - 访问对象或创建引用对象在效率上有什么区别？

> ID：11813305
> 
> 赞同：1
> 
> 时间：2012-08-05T01:36:43.567
> 
> 标签：java, reference, performance

下面的 2 个代码片段之间的效率有什么区别吗？第一个是否需要它为对象分配内存？

```
Class c = a.getClass();
if(str != null)
    c.dosomething(c.getX())

if(a.getClass() != null)
    a.getClass().doSomething(a.getClass().getX()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:43:19.123

第一个会更有效，尤其是在 getObject 方法很昂贵的情况下。如果为 c 分配了任何内存，这将在 getObject 方法中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T02:26:06.980

哪个更有效实际上取决于运行代码时 JIT 编译器和 JVM 所做的事情。由于这些依赖于平台和实现，因此很难给出明确的答案。

应该在方法中分配为 Class 对象 c 分配的任何内存`getClass()`。函数中的 c 只是一个引用，很可能存储在寄存器中，因此需要分配内存。与将数据存储在寄存器中相比，函数调用相对昂贵。我怀疑 JIT 是否足够聪明，可以将第二个片段的字节码重构为第一个片段，所以第一种方法很可能会更快。

但是，为了代码风格，您应该始终使用第一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T03:07:12.317

第一种形式可能会更有效。（而且很难想象如果代码是 JIT 编译的，效率会如何降低。）

如果 JIT 编译器可以向自己证明第二次和后续调用`getClass()`没有副作用并产生相同的结果，那么它可以重用第一次调用返回的值。这将使第二种形式的执行速度与第一种形式一样快。

JIT 是否实际执行/可以执行此优化将取决于 JVM。我的直觉是当前一代的 JIT 可能不会这样做，但我可能是错的。您需要转储 JIT 编译的本机代码才能确定。

值得注意的是：

1.  getClass() 调用（假设它没有被覆盖）将相对便宜。它所做的只是查找与对象标头中的某些内容相对应的现有`Class`对象。（而且我们知道它不会`Class`每次都创建一个新对象，因为 Java 规范说`Class`对象和 Java 类型之间存在一对一的关系......）

2.  除非此代码是性能瓶颈，否则您实现此代码的方式不会对应用程序的整体速度产生重大影响。（提防过早的优化...）

# android - 如何列出 SD 卡中的文件？

> ID：11813310
> 
> 赞同：0
> 
> 时间：2012-08-05T01:37:08.613
> 
> 标签：android

我有一个允许用户下载 pdf 文件的 android 项目，它已将文件存储在 sd 卡中，我想在特定按钮中收集所有 pdf 文件，当用户单击此按钮时，它将显示列表包含所有下载的文件。我该怎么做这个功能谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:34:36.703

在这里你的代码...

```
String ROOT = "mnt/sdcard/rec/";
private ArrayList<String> Files;
private void listRecordings() {
    File folder = new File(ROOT);
    Files = new ArrayList<String>();
    File[] items = folder.listFiles();
    for (File file : items) {
        Files.add(file.getAbsolutePath());
        // Log.i("FILES", file.getAbsolutePath());
    }
} 
```

# objective-c - NSMutableArray 对象适用于模拟器，但不适用于设备

> ID：11813318
> 
> 赞同：-2
> 
> 时间：2012-08-05T01:39:01.597
> 
> 标签：objective-c, ios, nsmutablearray

所以我有一个类，此时只包含一个简单的 NSMutableArray 对象。我正在从视图控制器设置这个对象，但由于某种原因......愚蠢的东西在我的 ipad 上不起作用。然而，它在模拟器上完美运行。

有没有人遇到过这种情况？

我知道这不是很多事情要做，但任何关于在哪里看的提示/指针都会有所帮助。不知道在这个上搜索什么。

谢谢

* * *

视图控制器.h

```
#import "DBEntries.h"
DBEntries *dbEntries; 
```

视图控制器.m：

```
[database open];

NSMutableArray *arrayAdder = [[NSMutableArray alloc] init];

NSString *filterNameFirst = [NSString stringWithFormat:@"%@", nameFirstTextField.text];
NSString *filterNameLast = [NSString stringWithFormat:@"%@", nameLastTextField.text];

NSString *filterStringFirst = [NSString stringWithFormat:@"%%%@%%", filterNameFirst]; // Works on first name only.
NSString *filterStringLast = [NSString stringWithFormat:@"%%%@%%", filterNameLast]; // Works on last name only.

FMResultSet *results = [database executeQuery:[NSString stringWithFormat:@"SELECT * FROM users WHERE firstname LIKE ? AND lastname LIKE ?", filterStringFirst, filterStringLast]];

while([results next])
{
    NSString *firstname = [results stringForColumn:@"firstname"];
    NSString *lastname = [results stringForColumn:@"lastname"];

    // Add db entries to array in DBEntries.
    NSString *objectAdder = [NSString stringWithFormat:@"%@ %@", firstname, lastname];
    NSLog(@"objectAdder: %@", objectAdder);
    [arrayAdder addObject:objectAdder];
}

[dbEntries setUsersFiltered:arrayAdder];
[arrayAdder release];

[database close];

isUpdatingEntriesForTableView = YES;

[dbTableView reloadData];

NSLog(@"dbEntries.usersFiltered: %@", dbEntries.usersFiltered); // This logs 0 on device, but works on simulator. 
```

类.h：

```
NSMutableArray *usersFiltered;
@property (strong, nonatomic) NSMutableArray *usersFiltered; 
```

类.m：

```
@synthesize usersFiltered; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T05:05:01.557

我不使用**strong**进行自动内存计数，我只是不喜欢它。你有没有尝试过

```
@property (retain, nonatomic) NSMutableArray *usersFiltered; 
```

您可以替换以下行：

```
[dbEntries setUsersFiltered:arrayAdder];
[arrayAdder release]; 
```

和：

```
dbEntries.usersFiltered = [arrayAdder autorelease];
//[arrayAdder release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:49:01.463

哇。好的，所以答案与@omz 的观点有关。我不应该使用 [NSString stringWithFormat]。删除它`FMResultSet *results = [database executeQuery:@"SELECT * FROM users WHERE firstname LIKE ? AND lastname LIKE ?", filterStringFirst, filterStringLast];`现在不会触发警告并在设备上工作。有趣的是，它可以在模拟器上运行，但之前不能在设备上运行。

# wordpress - 简单的 WP 用开始或结束日期查询即将发生的事件

> ID：11813322
> 
> 赞同：2
> 
> 时间：2012-08-05T01:39:24.467
> 
> 标签：wordpress, events

我正在处理即将发生的事件列表。我创建了一个自定义帖子类型，带有一个自定义字段：event_start_date。我还有一些多日扩展事件，由一个额外的自定义字段定义： event_end_date 。

我有一个代码适用于 start_date 晚于今天的事件。但是我没有合并 end_date 条件。我尝试使用具有 OR 关系的 meta_query，但目前不起作用：

```
$args = array(
    'post_type' => 'events',
    'posts_per_page' => 4,
    'orderby' => 'event_start_date',
    'order' => 'ASC',
    'meta_query' => array(
         'relation' => 'OR',
          array('key'  => 'event_start_date',
              'value' => date('m/d/Y', strtotime('-1 day')),
              'compare' => '>='),

              array('key'  => 'event_end_date',
                  'value' => date('m/d/Y', strtotime('-1 day')),
                  'compare' => '>=')
    )
);
$loop = new WP_Query( $args ); 
while ( $loop->have_posts() ) : $loop->the_post();
// Rest of the loop 
```

提前致谢。

**注意**：我有这个其他查询，它可以完美地选择只有开始日期>而不是当前日期的事件。

```
 $args = array(
                    'post_type' => 'events',
                    'posts_per_page' => 4,
                    'meta_key'  => 'event_start_date',
                    'meta_value' => date('m/d/Y', strtotime('-1 day')),
                    'meta_compare' => '>=', 
                    'orderby' => 'event_start_date',
                    'order' => 'ASC',           
                    ); // The same loop and query 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:34:30.983

实际上，要按元键排序，`meta-key`查询中必须存在并使用`meta_value`as`orderby`值。

```
$args = array(
    'post_type' => 'events',
    'posts_per_page' => 4,
    'meta_key' => 'event_start_date', // required to be used in orderby
    'meta_query' => array(
        'relation' => 'OR',
            array(
                'key'  => 'event_start_date',
                'value' => date('m/d/Y'),
                'compare' => '>'
            ),
            array(
                'key'  => 'event_end_date',
                'value' => date('m/d/Y'),
                'compare' => '>'
            )
    ),
    'orderby' => 'meta_value', // orderby will use the value of meta_key
    'order' => 'asc',
);
$loop = new WP_Query($args); 
```

您也可以在每个 meta_query 数组中使用一个类型，如下所示

```
array(
    'key'  => 'event_end_date',
    'value' => date('m/d/Y'),
    'compare' => '>',
    'type' => 'DATE' // to specify the type of the field/value
) 
```

**更新：**您应该使用`date('m/d/Y')`并`'compare' => '>'`确保您的日期格式正确，因为现在它在（月/日/年）。`date('m/d/Y', strtotime('-1 day'))`也会显示过去的日期。

如果其他一切都正确，这应该可以工作。 [在这里阅读](http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-14T04:47:24.810

解决方案对我不起作用（mybe 主题对于旧版本来说太旧了）。对于下一个搜索者 - 显示所有过去事件的解决方案（带分页）

```
 'post_type' => 'event', 
  'suppress_filters' => false,
  'meta_key'  => '_eventorganiser_schedule_last_start', // OR _eventorganiser_schedule_start_start OR ..._start_finish OR ..._last_finish
  'meta_value' => date('Y-m-d', strtotime('today')),
  'meta_compare' => '<', 
  'orderby' => '_eventorganiser_schedule_last_start',
  'order' => 'DESC',
  'paged' => get_query_var('paged') 
```

# objective-c - iOS 和 OS X 开发的内置框架中是否有任何非前缀类？

> ID：11813323
> 
> 赞同：0
> 
> 时间：2012-08-05T01:39:37.990
> 
> 标签：objective-c, ios, cocoa, naming-conventions

在为其他人编写框架时，为类添加前缀非常有用，这样您就可以使用具有相似名称类的多个框架而不会发生冲突。

然而，在应用程序二进制文件本身中，主应用程序类并不需要前缀，除非它们可能与某些库中的一些非前缀类发生冲突，无论是第三方的还是内置的。

显然第三方库是可以审查的，但是很难通过整个 Cocoa.framework 和 QuartzCore.framework 和 Foundation.framework 和 CoreAnimation.framework 等来确定是否有任何非前缀类。

有没有人知道或知道一种检查方法，在任何内置库中是否有任何非前缀类？有了一个明确的答案，普通大众会觉得在应用程序二进制文件的主（单独）代码库中命名他们的类而不带前缀会更舒服。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:12:10.043

> 有了一个明确的答案，普通大众会觉得在应用程序二进制文件的主（单独）代码库中命名他们的类而不带前缀会更舒服。

如果你的类名在运行时冲突，编译器会告诉你。这是由您包含的标头和链接器路径定义的。

无需扫描代码库以查找非前缀类，因为您将无法编译。

如果您有重复的类名，您将收到错误“为 bla bla bla 找到重复的接口”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T04:47:11.670

实际上，有一些遗留类没有前缀。`Object`, `List`,`Protocol`浮现在脑海中。（是的，`Protocol`是 Apple 提供的一个类的名称，它甚至继承自`Object`而不是`NSObject`.）

这些类的标题位于`/usr/include/objc/`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T05:09:17.873

除了 Jonathan Grynspan 提到的遗留类名之外，在一些私有框架中肯定还有不带前缀的类名。例如，`MIME`私有框架包含名为`Message`、`MimeBody`等的类。

您不能直接与私有框架链接`MIME`（如果您想在 App Store 中）。但是您可能会链接到公共`MessageUI`框架，并`MessageUI`链接到私有`MIME`框架。当您启动您的应用程序时，Objective-C 运行时会注意到有两个具有相同名称的类，并警告您它任意选择其中一个而忽略另一个。

# qt - Qt Creator 部署到远程 Linux 目标

> ID：11813324
> 
> 赞同：4
> 
> 时间：2012-08-05T01:39:51.447
> 
> 标签：qt, deployment, build, qt-creator, embedded-linux

我使用 Buildroot 为目标 BeagleBoard 构建 Qt。我将 Qt Creator 指向 Buildroot 生成的 qmake 文件，并将 Buildroot 的工具链添加到 Qt Creator 的“工具”菜单下的 Build & Run 配置选项中，在 Qt Creator 的“工具”菜单下添加了一个“Generice Linux Device”，并使用了测试该菜单中的配置工具来测试与设备的连接。该测试通过并说一切都很好。Dropbear ( SSH ) 安装在 BeagleBoard 上，我可以从终端通过 SSH 连接到它。当我在 Qt Creator 中为 Example AnalogClock 项目设置构建和运行配置选项时，它成功构建了演示（make 退出时没有错误），但编译输出消息“连接到通用 Linux 设备...”时挂起。一世' 我等了 1/2 一个小时，它永远不会超过这一步。下面是我设置的一些屏幕截图。在不使用 Buildroot 而是从源代码构建 Qt 并能够成功部署之前，我已经完成了此操作。我假设因为我的“通用 Linux 设备”设置通过了 Qt Creator 的“测试”工具，并且因为我可以通过 SSH 连接到机器，所以一切都应该工作。有人对可能出了什么问题有任何想法吗？如果我的工具链工作并且我可以成功构建演示应用程序，那么从 Buildroot 构建的 qmake 是否有可能以某种方式配置到我无法部署到远程 Linux 设备的位置？请帮助 - 在此先感谢。我假设因为我的“通用 Linux 设备”设置通过了 Qt Creator 的“测试”工具，并且因为我可以通过 SSH 连接到机器，所以一切都应该工作。有人对可能出了什么问题有任何想法吗？如果我的工具链工作并且我可以成功构建演示应用程序，那么从 Buildroot 构建的 qmake 是否有可能以某种方式配置到我无法部署到远程 Linux 设备的位置？请帮助 - 在此先感谢。我假设因为我的“通用 Linux 设备”设置通过了 Qt Creator 的“测试”工具，并且因为我可以通过 SSH 连接到机器，所以一切都应该工作。有人对可能出了什么问题有任何想法吗？如果我的工具链工作并且我可以成功构建演示应用程序，那么从 Buildroot 构建的 qmake 是否有可能以某种方式配置到我无法部署到远程 Linux 设备的位置？请帮助 - 在此先感谢。有人对可能出了什么问题有任何想法吗？如果我的工具链工作并且我可以成功构建演示应用程序，那么从 Buildroot 构建的 qmake 是否有可能以某种方式配置到我无法部署到远程 Linux 设备的位置？请帮助 - 在此先感谢。有人对可能出了什么问题有任何想法吗？如果我的工具链工作并且我可以成功构建演示应用程序，那么从 Buildroot 构建的 qmake 是否有可能以某种方式配置到我无法部署到远程 Linux 设备的位置？请帮助 - 在此先感谢。

编辑-更新：当远程部署确实有效时，我现在和之前在不同目标上尝试做的不同之处在于，现在我正在使用无线连接到设备。以前我通过路由器连接到目标板，但一切都是硬连线的。那应该有关系吗？我认为“测试”设备配置会失败。这是它从 Qt Creator 挂起的输出：14:54:32：进程“/usr/bin/make”正常退出。14:54:32：连接到设备...

![在此处输入图像描述](../Images/b4d2db6e4a239ad8b75034ae44f9cf39.png) ![在此处输入图像描述](../Images/90464964701d061170c5f901816da861.png) ![在此处输入图像描述](../Images/daf37a93f1ab199693e4542bb0ef6d23.png) ![在此处输入图像描述](../Images/155494da0643edf536e283f2c0e93a4e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T21:00:13.740

好的，解决方案是我需要 BeagleBoard 上的 SFTP 服务器。Qt Creator 中的“测试”工具只检查 SSH 连接，而不是 SFTP。解决方案是在 buildroot 中安装 vsftpd 包，然后它就可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-10T07:42:35.787

感谢您的帖子，但是当我在 tiny6410 中更改此行时，它可以工作（我没有在目标板上安装 vstft）：

```
In /usr/local/etc/sshd_config
Line:
Subsystem       sftp    /usr/libexec/sftp-server
must be:
Subsystem       sftp    /usr/local/libexec/sftp-server 
```

参考：[http ://www.friendlyarm.net/forum/topic/6036#28428](http://www.friendlyarm.net/forum/topic/6036#28428)

# ruby-on-rails-3 - linux上的rails 3应用程序（安装了服务器旧版本的RoR）

> ID：11813325
> 
> 赞同：0
> 
> 时间：2012-08-05T01:40:00.257
> 
> 标签：ruby-on-rails-3

我是在服务器和 rails 3 上部署 rails 应用程序的新手。我需要你的帮助。我已经开发了以下版本的 Rails 项目。Ruby 1.9.2 Rails 3.2.5 但是我在服务器上部署这个项目的地方，默认安装了 Rails 2.1.2 和 Ruby 1.8.7。这是我必须要求我的服务提供商安装更新版本的唯一方法，因为我的权限有限。如果我安装“bundle” gem 并运行 bundle install 它会工作吗？正如我提到的那样，rails 版本 3.2.5 gem 'rails', '3.2.5' 也在其中？（为一个问题道歉可能看起来很愚蠢？:-D）你有什么建议？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:49:35.513

简单的答案：**获取另一台服务器**。有便宜的 VPS 可供您完全控制环境，因此您可以安装任何您想要的东西。

相信我，**不要**依赖您的服务提供商为您执行此操作。您的软件将*永远*过时，您将无休止地等待永远不会到来的升级。这是灾难的秘诀。

# bash - bash：在命令行参数中添加注释

> ID：11813333
> 
> 赞同：5
> 
> 时间：2012-08-05T01:41:18.053
> 
> 标签：bash

我有一台运行许多进程的 RHEL 机器。许多进程可能具有等效的启动参数，因此在这一类别`top`中`ps`它们是相同的，无法相互识别。

我如何*在其参数中*命名或标记一个进程，以便我可以从另一个中识别一个？除了在 bash 中执行此操作之外，我将如何为 Java 进程或屏幕会话执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T06:09:49.750

执行此操作的规范方法是使用`$!`. 这样您就不会标记该过程，但您有一个唯一标识它的 id。例如：

```
gedit & gedit1=$! 
```

这将启动 gedit 并将进程 ID 保存在变量 中`gedit1`。如果我想稍后杀死该进程。我只能写

```
kill $gedit1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T05:26:57.217

您可以创建这样的脚本

```
#! /bin/bash
"$@" 
```

假设你命名它`process-label`。您可以链接不同的名称

```
$ ln process-label other-label 
```

你可以执行

```
$ process-label sleep 1800 &
$ other-label sleep 800 & 
```

你会得到你的流程标签

```
15016 ttys002    0:00.00 /bin/bash ./process-label sleep 1800
15017 ttys002    0:00.00 sleep 1800
15021 ttys002    0:00.00 /bin/bash ./other-label sleep 800
15022 ttys002    0:00.00 sleep 800 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T08:33:50.593

如果这是特定于 java 的，您可以像这样传递未使用的系统属性：

```
java -Dtag=process1  -jar .... 
```

这不仅显示在命令行上，而且在进程中也可见，如果您需要的话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T01:43:33.197

如果我错了，请纠正我，但我认为你正在寻找的是别名。
见这里： http: [//www.stchman.com/alias.html](http://www.stchman.com/alias.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T02:02:10.217

我不知道如何使用程序的参数来做到这一点，但您可以通过将 java 硬链接（甚至符号链接）到不同的名称并通过它调用它来做到这一点。

例如：

在一个终端中运行以下命令：

```
$ cd /tmp
$ ln -s /bin/cat abc
$ ln -s /bin/cat def
$ ./abc 
```

在另一个终端运行：

```
$ cd /tmp
$ ./def 
```

在第三个终端运行：

```
$ ps aux | egrep 'abc\|def' 
```

您将看到一个名为“abc”的进程和一个名为“def”的进程，并且两者都没有名称“cat”。因此，如果您这样做，为每个流程创建不同的链接，那么您可以区分它们。

# php - 使用 if 语句 PHP MySQL 的表格中的间距不起作用

> ID：11813335
> 
> 赞同：1
> 
> 时间：2012-08-05T01:42:02.407
> 
> 标签：php, mysql, html-table, spacing

我已经使用 PHP 从 MYSQL 数据库构建了一个表。有 4 列检查它们是否包含`yes`在其中，只有在存在时才显示。唯一的问题是，当第一列`repair`没有任何内容，但后续列有`yes`时，它们会将输出显示`yes`到`repair`列中，而不是在那里留下空白点并将其放在正确的列下。列标题显示正确，它只是让数据出现在正确的列中。不知道如何去做，所以任何帮助表示赞赏。

```
//build table for results
echo "<table><tr>";
echo "<th>Part Number</th>";
echo "<th>Serial Number</th>";
echo "<th>Date</th>";

//check whether each element has data
//and only display is data present
if ($repair=="yes") echo "<th>Repair</th>";
if ($upgrade=="yes") echo "<th>Upgrade</th>";
if ($pm=="yes") echo "<th>PM</th>";
if ($nofault=="yes") echo "<th>No Fault</th></tr>";

// printing table rows
while($row = mysql_fetch_array($result))
{
$part=$row['part'];
$serial=$row['serial'];
$date=$row['date'];
$Repair=$row['repair'];
$Upgrade=$row['upgrade'];
$PM=$row['pm'];
$NoFault=$row['nofault'];

echo "<tr>";
echo "<td>$part</td>";
echo "<td>$serial</td>";
echo "<td>$date</td>";
if ($Repair=="yes") echo "<td>YES</td>";
if ($Upgrade=="yes") echo "<td>YES</td>";
if ($PM=="yes") echo "<td>YES</td>";
if ($NoFault=="yes") echo "<td>YES</td>";
echo "</tr>";
}

echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:53:41.887

当 if 评估为 false 时，您应该包含空单元格。像这样的东西：

```
if ($Repair == "yes") {
 echo "<td>yes</td>"
} else {
 echo "<td></td>"
} 
```

在这种情况下，您也可以直接在 td 中回显该值。像这样的东西：

```
echo "<td>";
if ($Repair == "yes") echo $Repair;
echo "</td>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T01:54:20.250

这种逻辑可能会有所帮助

```
if ($repair=="yes") echo "<th>Repair</th>" else echo "<th>&nbsp;</th>"; 
```

相同的代码

```
if ($Repair=="yes") echo "<td>YES</td>" else echo "<td>&nbsp;</td>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T01:57:37.620

您需要以`<td></td>`任何一种方式输出。您使用的代码风格非常混乱（大量带有双引号 HTML 字符串的 echo 语句）。这是一个更好的方法：

```
//build table for results

?>

<table>

<tr>
<th>Part Number</th>
<th>Serial Number</th>
<th>Date</th>

<?php

//check whether each element has data
//and only display is data present
if ($repair=="yes") echo "<th>Repair</th>";
if ($upgrade=="yes") echo "<th>Upgrade</th>";
if ($pm=="yes") echo "<th>PM</th>";
if ($nofault=="yes") echo "<th>No Fault</th></tr>";

// printing table rows
while( $row = mysql_fetch_array( $result ) ) {

?>

<tr>

<td><?php echo $part; ?></td>

<td><?php echo $serial; ?></td>

<td><?php echo $date; ?></td>

<td><?php echo $row[ 'Repair' ] == "yes" ? "YES" : ""; ?></td>

<td><?php echo $row[ 'Upgrade' ] == "yes" ? "YES" : ""; ?></td>

<td><?php echo $row[ 'PM' ] == "yes" ? "YES" : ""; ?></td>

<td><?php echo $row[ 'NoFault' ] == "yes" ? "YES" : ""; ?></td>

</tr>

<?php

}
// while

?>

</table> 
```

# php - PHP会话未显示

> ID：11813336
> 
> 赞同：0
> 
> 时间：2012-08-05T01:42:05.647
> 
> 标签：php, session

我正在尝试回显我的会话，但它没有显示。我认为会话正在运行，因为这是与其他所有页面相同的代码。唯一显示的部分是文本...“您的 id 是”和“League Home”。有人可以帮我弄清楚我的代码有什么问题吗？

```
<?php
 // this starts the session 
 session_start();
 $id = $_SESSION['userid'];
 echo "Your id is " . $id;

//this connects to the database
$con = mysql_connect("localhost","yourfan3_jeengle","armyjoe30");
mysql_select_db("yourfan3_demo", $con);

 //gets info for user
 $result = mysql_query("SELECT * FROM League_Info WHERE User_ID = '$id'");  
 $result2 = mysql_fetch_array($result);
 $leaguename = $result2['League'];
 echo $leaguename;
 //$result31 = $result2['Members'];
 //$result32 = $result2['League_Password'];

 //checks if league name exists
 $memberslist = mysql_query("SELECT User_ID FROM League_Info WHERE League = '$leaguename'"); 

?>
<html>
<head>
</head>

<body>
League Home
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:44:29.360

session 是一个特殊的数组，可以用来存储数据。如果您没有在代码中的其他位置设置 $_SESSION['userid']，您将无法在此处调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T01:45:00.030

You don't seem to set `$_SESSION['userid'];` in the code at all. Are you sure that there is an ID set when this is being run?

run this `echo $_SESSION['userid'];` and see if it returns anything?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T01:45:35.757

You did not define `$_SESSION['userid']` as anything, therefore there is nothing for it to echo. Make sure you give it a value then proceed with the echo.

# iphone - 我如何创建一个自定义按钮，可以更改像圆角矩形这样的图像

> ID：11813338
> 
> 赞同：0
> 
> 时间：2012-08-05T01:42:25.663
> 
> 标签：iphone, ios, uibutton

我有两个按钮的图像，一个正常的，一个选择的。而且我希望它的行为方式与圆形矩形按钮的行为方式相同，当您按下时，按钮图像会发生变化，如果您向外拖动，图像会恢复正常。这是我尝试过的。

首先，我制作了一个自定义视图控制器，然后我在实现中添加了方法，这就是您在此处看到的。我将这些方法连接到我的 2 个按钮，我的播放“按钮”和我的“设置”按钮。

```
- (IBAction)playButtonSelected:(UIButton *)sender {  //this is for event touchDown
       [sender setImage:[UIImage imageNamed:@"PlayButtonSelected.png"] forState:UIControlStateNormal];

}

- (IBAction)playButtonNotSelected:(id)sender { //this is for event touchUpOutside
    [sender setImage:[UIImage imageNamed:@"PlayButton.png"] forState:UIControlStateNormal];

}

- (IBAction)settingsButtonSelected:(UIButton *)sender { //this is for event TouchDown
        [sender setImage:[UIImage imageNamed:@"SettingsButtonSelected.png"] forState:UIControlStateNormal];
}

- (IBAction)settingsButtonNotSelected:(id)sender { //this is for event touchUpOutside
      [sender setImage:[UIImage imageNamed:@"SettingsButtons.png"] forState:UIControlStateNormal];
} 
```

好吧，我这样做了，效果很好，但是有两个问题。

第一：如果我有 20 个按钮，我必须有 40 个方法。这不是一个真正的问题，我只是认为这是一个潜在的问题。

第二：当我将按钮拖到外面时，我希望它在用户真正松开手指之前切换到正常图像。截至目前，图像仅在手指松开时默认显示，而不是在手指移动一定距离时才会显示，因此 touchUpInside 命令将不会运行。我想要这个，因为它基本上是标准。并且它还可以帮助用户理解，如果他愿意，他可以收回点击按钮的冲动行为。

酷，任何帮助都会有很大帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T02:03:42.757

您只需要设置一次选定图像和普通图像（例如，当您创建按钮时）

“状态”参数让您可以为不同的状态设置不同的图像。您只需要编写一次此代码：

```
[playerButton setImage:[UIImage imageNamed:@"PlayButton.png"] forState:UIControlStateNormal];
[playerButton setImage:[UIImage imageNamed:@"PlayButtonSelected.png"] forState:UIControlStateSelected]; 
```

编辑：您也可以从属性检查器的 Interface Builder 执行此操作

![正常状态](../Images/2c0f43ae525776e4ef714ef6af8a4a61.png) ![选定的州](../Images/fca59c66d56471484b669da387bc331b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T02:17:58.767

既然回答了第二部分，我就回答第一部分，

假设您正在以编程方式创建按钮，您可以为每个按钮分配一个标签编号，并为所有按钮设置相同的选择器方法。您可以通过识别选择器方法中的标签号来区分按下了哪个按钮。与此类似：[stackoverflow.com/a/11756445/1479411](https://stackoverflow.com/a/11756445/1479411)

如果您使用的是界面生成器，您可以将所有按钮连接到相同的 IBAction 方法，并手动将标签编号放置在每个按钮的属性检查器中。同样，您可以通过 IBAction 方法中的标记号来区分。

作为附加说明，如果按钮提供完全不同的功能，我将使用#define 来识别它们。这减少了以后编码中的错误。

```
#define SETTINGS  1
#define PLAY      2
#define FUNCTION1 3
#define FUNCTION2 4
... 
```

# fortran - 带有打印语句的整数输出格式

> ID：11813340
> 
> 赞同：4
> 
> 时间：2012-08-05T01:43:05.910
> 
> 标签：fortran

我注意到，如果我使用`integer(16)`变量，当我使用 时`print`，输出包含预期的确切空格数。因此，当我使用时（有些人可能会在这里识别出项目欧拉问题）

```
 implicit none
    integer(16)::sum_sq,sq_sum,diff,i
    sum_sq=0;sq_sum=0;
    do i=1,100
       sum_sq=sum_sq+i*i
       sq_sum=sq_sum+i
    enddo
    diff=abs(sq_sum**2-sum_sq)
    print *, "The difference is", diff 
```

我明白了

```
The difference is 25164150 
```

作为输出，但是当我使用`integer(8)`or`integer`作为变量时，我得到

```
The difference is             25164150 
```

作为输出。这发生在有和没有`-m64`标志的情况下，并且仅在 gfortran 上发生（我的 ifort 似乎不接受`kind=16`，这是一个需要处理的单独问题，但返回带有空格的输出`integer(8)`）。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T04:54:49.673

发生这种情况是因为您使用的是输出的默认格式。

`print*`等效于`write(unit=*,fmt=*)`，其中`fmt=*`表示使用默认格式输出，这可能取决于编译器。默认格式使用输出的数据类型可能需要的尽可能多的空间，而不根据值进行调整。

考虑以下代码：

```
integer(kind=4) :: a ! short integer for my compiler
integer(kind=8) :: b ! long integer for my compiler

a = 23
b = huge(a)

print*,a       ! small value, short integer, we expect spaces
print*,huge(a) ! maximum value, short integer, we expect no spaces
print*,huge(b) ! maximum value, long integer, we expect no spaces
print*,b       ! medium lenght value, long integer, we expect spaces

end 
```

使用 gfortran 编译时，输出为：

```
 23
  2147483647
  9223372036854775807
           2147483647 
```

第一行是一个 4 字节整数表示的小数。注意要填充到最大可能大小的空间。第二行是 4 字节整数可以取的最大值。紧密贴合输出，没有空格。第三行是一个 8 字节整数的最大值。紧密贴合。第四行与第二行的值相同，但采用 8 字节整数表示。注意空格。

这回答了为什么您在输出中为默认格式设置空格。它并不能完全准确地回答您的问题，这就是为什么四精度整数的输出中没有空格的原因。我不知道。我的两个编译器 ( `pgf90 10.6-0`, `ifort 12.0.2.137`, `gfortran 4.5.1`) 都不支持四精度整数。可能是编译器黑客。有人可能对这部分有更多经验，希望他们能加入。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T05:22:17.220

正如已经回答的那样，您正在使用列表导向的 IO，虽然方便，但语言标准并未完全指定。所以你会发现异能。如果要控制输出将需要使用格式。同样方便的是格式说明符“I0”，它使用输出项目所需的最小位数。

作为一个附带问题，“整数 (N)”不能保证是 N 字节整数。它与“integer*N”不同，后者不是语言标准的一部分。许多编译器使用类型的字节数作为类型值，但也有例外。事后看来，使用整数值来指定整数、实数和逻辑子类型是错误的。如果要按字节数选择类型，有从 Fortran 2003 开始​​的方法。Fortran 2003 的 ISO_C_Binding 模块提供了类型指示符，例如 C_INT32_T、C_INT64_T 和 C_INT128_T。Fortran 2008 的 ISO_FORTRAN_ENV 模块提供 INT8、INT16、INT32 和 INT64。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-06T08:50:45.730

列表导向输出是特定于处理器的（请注意，Fortran 标准将我们通常称为“编译器”的“处理器”称为“处理器”）。以下是 Fortran 90 标准对列表导向输出的说明：

> 10.8.2 列表导向输出
> 
> ...
> 
> 整数输出常量是在`Iw`编辑描述符的作用下产生的。
> 
> 根据值的大小和范围 10 ^(d1) <= < 10 ^(d2) ，生成实数常量，其效果取决于`F`编辑描述符或编辑描述符，其中和是与处理器相关的整数。如果幅度在此范围内，则使用;生成常数 否则，使用。`E``x`^(`x`^(`d1``d2``x``0PFw.d``1PEw.dEe`))
> 
> 对于数值输出，合理*的处理器相关值*、和用于每个数值常量输出。`w``d``e`

（强调我的）

相同的规则用于数值。Fortran 2008 标准第 10.10.4 节中的文本复制了 Fortran 90 标准中的文本，因此没有引入列表导向输出的任何更改。

正如 MSB 已经指出的，您可以使用`I0`编辑描述符以所需的最少空间打印整数值：

```
! Note the space in the string
PRINT '("The difference is ",I0)', diff 
```

# java - 如何完成“Java 的艺术与科学”第 4 章的练习 3？

> ID：11813345
> 
> 赞同：4
> 
> 时间：2012-08-05T01:43:47.747
> 
> 标签：java

我必须编写一个读取正整数的程序，然后计算并显示前 N 个奇数整数的总和。例如，如果 N 为 4，则程序应显示值 16，即 1 + 3 + 5 + 7。

到目前为止，这是我所拥有的，但我遇到了一堵砖墙，并且希望能在正确的方向上有所帮助。

```
import acm.program.*;

public class OddIntegers extends ConsoleProgram {

    public void run() {
        println("This program adds the number of odd numbers");
        int n = readInt("Enter a positive number: ");
        int b = 1;
        for (int i = 0; i < n; i++);
            b = b + (b + 2);

        println("The total is " + b);   
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T02:09:29.720

更好地`i`用于[聚合](http://www.thefreedictionary.com/aggregating)：

```
int b = 0;
for (int i = 0; i < n; i++) {
    b += (2*i + 1);
} 
```

输入 4，结果：16

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T11:29:55.903

首先`;`从`for`循环末尾删除。

第二次`sum`用作变量来存储总和并`b`保持奇数。

```
int b=1, sum = 0;
for (int i = 1; i <=n; i++){
    sum+=b;
    b+=2;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T01:47:48.243

You have a semicolon right after your for loop so there is no actual code in the loop, also you calculation is wrong, you add an extra value because you start `b` at one.

```
int b = 0;
int odd = 1;
for (int i = 0; i < n; i++){
    b = b + odd;
    odd += 2;
} 
```

# c# - MVC，通过 3 个表的计数来查看

> ID：11813347
> 
> 赞同：0
> 
> 时间：2012-08-05T01:44:11.167
> 
> 标签：c#, asp.net-mvc, linq

我正在尝试将三个不同表的计数与专辑列表一起传递到视图中。它是 MvcMusicStore 教程的一个模组。我收到“ObjectContext 实例已被处置，无法再使用...”错误。我知道它与延迟加载有关，但我不知道如何使它工作。

```
// Controller
public class StoreManagerController : Controller
{
    private MusicStoreDBEntities context = new MusicStoreDBEntities();  

    public ActionResult Index()
    {
        // counts
        ViewData["artistCount"] = context.Artists
                                     .Select(e => new { e.ArtistId }).Count();
        ViewData["genreCount"] = context.Genres
                                     .Select(e => new { e.GenreId }).Count();
        ViewData["albumCount"] = context.Albums
                                     .Select(e => new { e.AlbumId }).Count();

        // also tried two other ways...same result. 
        //ViewData["artistCount"] = context.Artists
                                 .Select(e => new { e.ArtistId }).ToList().Count;
        //ViewData["artistCount"] = context.Artists
                                 .Select(e => new { e.ArtistId }).ToList().Count();

        // album list
        var albums = context.Albums.Include(a => a.Genre).Include(a => a.Artist);
        return View(albums.ToList());
    }
}

// View - Index.cshtml  
@model IEnumerable<MVC_App1.Models.Album>
<div>
<label><strong>Database Counts:</strong></label>
    Albums: @ViewData["albumCount"] ...
    Artists: @ViewData["artistCount"]  ...
    Genres: @ViewData["genreCount"]
</div>  

<table>
@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.Genre.Name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Artist.Name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Title)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Price)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.AlbumArtUrl)
    </td>
</tr>
}
</table> 
```

解决方案：

所以我接受了添加新模型的建议。

```
public class AlbumsCollection 
{
    public IEnumerable<Album> Albums = new List<Album>();
    public IEnumerable<Artist> Artists = new List<Artist>();
    public IEnumerable<Genre> Genres = new List<Genre>();
} 
```

然后在视图中进行计数。我意识到无论如何我都在将整个专辑列表传递给视图，所以那里并没有放缓。对于艺术家和流派……反正不会有很多，因为它们是一对多的关系。我想这是放弃在控制器中进行计数....但我想这已经足够好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:13:21.953

我会创建一个新模型：

```
public class AlbumsCollection
{
    public IEnumerable<Album> Albums = new List<Album>();

    //Popular albums 
    //Newest albums 
    //etc
}

public class Album
{
    public int ArtistID;
    public int GenreId;
    public int AlbumId;
} 
```

在控制器中填充该模型：

```
public class StoreManagerController : Controller
{
    private MusicStoreDBEntities context = new MusicStoreDBEntities();  

    public ActionResult Index()
    {
        AlbumsCollection albumsCollection = new AlbumsCollection();

        albumsCollection.Albums = context.Albums;

        return View(albumsCollection);
    }
} 
```

然后你可以在你的视图中使用它：

```
@model Models.AlbumsCollection
<div>
<label><strong>Database Counts:</strong></label>
    Albums: @Model.Albums.Count ...
    Artists: @Model.Albums.Count(album => album.ArtistID != -1)  ...
    Genres: @Model.Albums.Count(album => album.GenreID != -1)
</div>  

<table>
@foreach (var item in Model.Albums) {
<tr>
    <td>
       @Html.DisplayFor(modelItem => item.Genre.Name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Artist.Name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Title)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Price)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.AlbumArtUrl)
    </td>
</tr>
</table> 
```

（假设流派和艺术家是 ID）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:13:44.247

`MusicStoreDBEntities context = new MusicStoreDBEntities();` 在 Index 操作中初始化

# c++ - 在opencv中找到对象的凸包？

> ID：11813352
> 
> 赞同：2
> 
> 时间：2012-08-05T01:44:52.800
> 
> 标签：c++, c, opencv, convex-hull

我已经根据[这里](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/hull/hull.html)的教程编写了这个，但我无法获得图像的凸包（我使用的是类似教程中所示的手形图像）。我得到源和边缘输出很好，但应该绘制轮廓和凸包线的“绘图”输出没有显示任何绘制，而是完全黑色。关于为什么会这样的任何想法？

```
#include <opencv/cv.h>
#include <opencv/highgui.h>
#include <opencv/cxcore.h>

int main(int argc,char **argv)
{
    cvNamedWindow( "Source", 1 );
    cvNamedWindow( "edges window", 1 );
    cvNamedWindow( "Drawings", 1 );

    IplImage* src = cvLoadImage( "img.jpg", 0 );
    IplImage* edges = cvCreateImage( cvGetSize(src), 8, 1 );

    // Finding edges
    cvThreshold( src, edges, 150, 255, CV_THRESH_BINARY );

    CvMemStorage* storage = cvCreateMemStorage();
    CvSeq* first_contour = NULL;

    int Nc = cvFindContours(
        edges,
        storage,
        &first_contour,
        sizeof(CvContour),
        CV_RETR_LIST );

    // Finding convex Hull
    CvMemStorage* hull_storage = cvCreateMemStorage();
    CvSeq* retHulls = NULL;

    for(CvSeq* i = first_contour; i != 0; i = i->h_next){
    // note h_next is next sequence.
    retHulls = cvConvexHull2(first_contour,hull_storage,CV_CLOCKWISE,1);

    }

    // drawing contours and hull
    IplImage* draw = cvCreateImage(cvGetSize(edges), 8, 3 );

    for(CvSeq* i = first_contour; i != 0; i = i->h_next){
        cvDrawContours(draw,first_contour,cvScalar(255,0,0,0),cvScalar(255,0,0,0),0,1,8);
        cvDrawContours(draw,retHulls,cvScalar(255,0,0,0),cvScalar(255,0,0,0),0,1,8);

    }

    cvShowImage( "Source", src );
    cvShowImage( "edges window", edges );
    cvShowImage( "Drawings", draw );
    cvWaitKey();

    cvDestroyAllWindows();

    cvReleaseImage( &src );
    cvReleaseImage( &edges );
    cvReleaseImage( &draw );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T10:42:03.307

您必须进行以下更改：

1.  在函数中将参数从 更改`CV_RETR_LIST`为。`CV_RETR_EXTERNAL``cvFindContours`
2.  更改`CV_THRESH_BINARY`为. `CV_THRESH_OTSU`_`cvThreshold`

这是证明（输入/输出）：

![在此处输入图像描述](../Images/a92ebf07522ff07a3ed54143dd183ab0.png) ![在此处输入图像描述](../Images/5231db8f5e631e19157cac7e7dc61a20.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:38:14.253

有2种方法，

1.  opencv凸包

[http://docs.opencv.org/doc/tutorials/imgproc/shapeescriptors/hull/hull.html](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/hull/hull.html)

[http://code.opencv.org/svn/opencv/trunk/opencv/samples/cpp/tutorial_code/ShapeDescriptors/hull_demo.cpp](http://code.opencv.org/svn/opencv/trunk/opencv/samples/cpp/tutorial_code/ShapeDescriptors/hull_demo.cpp)

1.  cvblob 凸包

[https://code.google.com/p/cvblob/](https://code.google.com/p/cvblob/)

[https://code.google.com/p/cvblob/source/browse/trunk/cvBlob/cvblob.h?r=398](https://code.google.com/p/cvblob/source/browse/trunk/cvBlob/cvblob.h?r=398)

CvContourPolygon *cvPolygonContourConvexHull(CvContourPolygon const *p);

高温高压

# iphone - freed object - losing value

> ID：11813355
> 
> 赞同：1
> 
> 时间：2012-08-05T01:45:32.057
> 
> 标签：iphone, objective-c, xcode, ipad

I have the following code:

```
NSString *Items[91]; 
```

in the .m file above all the methods to serve as global array which in my init method i do:

```
for (j1 = 0; j1 <= 90; j1++)
    {
        Items[j1] = [[NSString alloc] initWithFormat:@""];
    } 
```

and at some point a different method AA is triggered and do:

```
Items[40] = [NSString stringWithFormat:@"40\. Pers:%g each", PersExemptions];
 Items[41] =@"blah blah"; 
```

... etc

and at some point a different method BB is triggered and i see that for Items[40] it says freed object, it's losing the value it had which defeat the purpose. Grr.

I would like Items array to keep their modified values thru the app until the end and I assumed that using the initWithFormat that i used in the init method should take care of it. I understand that Items is c-style array (and to convert to NSMutable array would pain) if that's the problem to begin with.

I appreciate any help on this.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T02:04:14.723

**编辑**：正如@dasblinkenlight 指出的那样，我在这里假设您没有使用ARC。

你在这里使用了一个 C 风格的数组，一个 NSString* 的数组。

问题是当你这样做时......

`[NSString stringWithFormat:@"40\. Pers:%g each", PersExemptions]`

`stringWithFormat:`返回一个您不拥有的 NSString。如果你想在你的数组中保留那个 NSString，你需要保留它。或者您可以使用之前执行的 alloc/initWithString：

`Items[40] = [[NSString alloc] initWithFormat:@"40\. Pers:%g each", PersExemptions];`

这给了你一个你**拥有**的 NSString 。但当然，这会导致另一个错误，即您刚刚泄露了 Items[40] 中的任何 NSString。

所以你可以确保每次都释放前一个字符串，或者你可以节省很多精力，只使用 NSMutableArray 代替。NSMutableArray 将负责保留每个新值并释放刚刚替换的值。我知道你说这太费力了，而且不看你的代码没人能说，但考虑到你存储的每个对象实际上可能会**更**费力。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:37:36.277

现在 nsstring 是：

```
NSString ** strArr;
int rows = 91; 
```

然后，您需要使用 malloc 来动态分配内存：

```
int i;
strArr = malloc( rows * sizeof( strArr * ) );

for( i = 0; i < rows; i++ )
{
 strArr[ i ] = calloc( columns, sizeof( NSString ) );
} 
```

不要忘记在您的 dealloc 方法中释放：

```
int i;

for( i = 0; i < rows; i++ )
{
  free( strArr[ i ] );
}
free( strArr); 
```

# php - 动态的 PHP 缩略图

> ID：11813366
> 
> 赞同：1
> 
> 时间：2012-08-05T01:48:06.833
> 
> 标签：php, image, image-processing, gd, thumbnails

我已经阅读了几个关于此的不同线程，但它们都处理已经在服务器上的图像。

我将图像存储在数据库中（不要问为什么：P），我要做的是在上传图片后立即生成拇指，然后再将其发送到数据库。

我已经安装了 GD 并且还安装了 timthumb。

任何想法如何做到这一点？或者至少我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:55:16.117

根据我的经验，PHPThumb 非常易于使用：http: [//phpthumb.gxdlabs.com/](http://phpthumb.gxdlabs.com/)

`move_uploaded_file`关于您的特定问题：PHP 临时保存上传的文件，因此您可以在典型调用之前从它们创建缩略图。之后，调用`show(true)` [（这会在 PHPThumb 上启用原始数据流）](https://github.com/masterexploder/PHPThumb/blob/master/src/GdThumb.inc.php#L954)并将返回的值存储在您的数据库中。

# php - Get image extension from file got with file_get_contents

> ID：11813370
> 
> 赞同：1
> 
> 时间：2012-08-05T01:49:07.677
> 
> 标签：php

How do I get the file extension from $image?

```
$image = file_get_contents($url); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T01:52:54.730

It's much easier to do it using the filename.

Use [`getimagesize`](http://php.net/getimagesize)`($url)`. In particular, see index 2 of the resulting array.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T01:51:57.780

You can't, you only have the contents. Get it from `$url` instead if possible:

```
$extension = pathinfo($url, PATHINFO_EXTENSION);
```

# javascript - signalR undefined

> ID：11813373
> 
> 赞同：2
> 
> 时间：2012-08-05T01:50:33.243
> 
> 标签：javascript, signalr, signalr-hub

I am trying to use signalR for the first time however when my hub 'simpleEvent' is always undefined

$(document).ready(function () {

```
var simple = $.connection.simpleEvent; 
```

....

If I go to localhost/mywebapp/signalR/hubs I get the following error message: "unable to download hubs from localhost. Unable to open this Internet site. The requested site is either unavailable or cannot be found.". However if I try again then hubs in downloaded and it looks like it has the correct hub information, such as

```
// Create hub signalR instance
$.extend(signalR, {
    simpleEvent: {
        _: {
            hubName: 'MyCorp.Siep.App.Web.UI.SimpleEventHub',
            ignoreMembers: ['init', 'timerExpired', 'namespace', 'ignoreMembers', 'callbacks'],
            connection: function () { return signalR.hub; }
        },

        init: function (callback) {
            return serverCall(this, "Init", $.makeArray(arguments));
        },

        timerExpired: function (state, callback) {
            return serverCall(this, "TimerExpired", $.makeArray(arguments));
        }
    }
});

signalR.hub = signalR("/App.Web.UI/signalr")
    .starting(function () {
        updateClientMembers(signalR);
    })
    .sending(function () {
        var localHubs = [];

        $.each(hubs, function (key) {
            var methods = [];

            $.each(this, function (key) {
                if (key === "obj") {
                    return true;
                }

                methods.push(key);
            });

            localHubs.push({ name: key, methods: methods });
        });

        this.data = window.JSON.stringify(localHubs);
    })
    .received(function (result) {
        var callbackId, cb;
        if (result) {
            if (!result.Id) {
                executeCallback(result.Hub, result.Method, result.Args, result.State);
            } else {
                callbackId = result.Id.toString();
                cb = callbacks[callbackId];
                if (cb) {
                    callbacks[callbackId] = null;
                    delete callbacks[callbackId];
                    cb.callback.call(cb.scope, result);
                }
            }
        }
    }); 
```

I have tried the SignalR samples and they work fine, I have read lots of other forum posts regarding this error and most of them appear to be because is incorrect, I am assuming that if I can download the hubs then this is not the issue. What else could be causing this problem?

I am trying to use signalR within: - A Web Appplication - Running within visual studio 2010 deployment server and iis 7 - Intenert Explorer 8 - Windows 2008 server

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:28:50.467

检查您的母版页是否放置了正确的脚本引用

```
<script src="../Scripts/jquery-1.6.4.js" type="text/javascript"></script>
<script src="../Scripts/jquery.signalR.js" type="text/javascript"></script>
<script src="../signalr/hubs" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T05:40:17.640

以下文件很重要（检查正确的顺序）：

1.  jQuery JS 文件
2.  SignalR JS 文件
3.  如果您正在使用生成的集线器，则 HubFile 可选。

这是一个示例：

```
<script src="Scripts/jquery-1.10.2.min.js"></script>
<script src="Scripts/jquery.signalR-2.1.0.min.js"></script>
<script src="signalr/hubs"></script> 
```

检查引用的文件是否在目录中（也许您有一个控制台错误，即缺少引用的文件。

如果您正在使用生成的集线器代理，重要的是您没有禁用自动生成集线器文件（路径也必须正确）

```
var hubConfiguration = new HubConfiguration();
hubConfiguration.EnableDetailedErrors = true;
hubConfiguration.EnableJavaScriptProxies = false;
app.MapSignalR("/signalr", hubConfiguration); 
```

# java - Android 无法打开现有的 SQLite 数据库文件

> ID：11813374
> 
> 赞同：1
> 
> 时间：2012-08-05T01:50:57.003
> 
> 标签：java, android, sql, database, sqlite

我有一个使用 Sqliteman 管理实用程序创建的 SQLite 数据库文件。我将创建的数据库文件复制到我的 Eclipse 项目的“资产”文件夹中（我应该导出到 .sql 文件吗？）。

因此，在代码中，我创建了自己的类，用于从现有文件路径打开和使用数据库。以下是相关代码：

```
 private static String DB_FULL_PATH_EXISTING = "/data/data/com.jds.databasetest/databases/Book1"; 
```

其中 com.jds.databasetest 是我的包名，Book1 是 assets 文件夹中数据库文件的名称。现在在一些活动中：

```
 SQSimple existingDB = new SQSimple(this, "Book1", DB_FULL_PATH_EXISTING);
    existingDB.open(); 
```

SQSimple 是我的自定义数据库类。下面是相关的构造函数代码：

```
public SQSimple(Context c, String DBname, String existingDBpath) {
        this.mCtx = c; 
        this.DBname = DBname;
        this.DBpath = existingDBpath; 
        this.fromExisting = true; 
    }

public SQSimple open() throws android.database.SQLException {
        if (this.fromExisting == false) {
            dbHelper = new DatabaseHelper(this); 
            db = dbHelper.getWritableDatabase();
            return this; 
        } else { //opening from existing DB, i.e. this code gets run
            db = SQLiteDatabase.openDatabase(this.DBpath, null, SQLiteDatabase.OPEN_READWRITE);
            return this;
        }
    } 
```

所以只是试图通过 existingDB.open() 打开数据库会导致应用程序崩溃。Logcat 说如下：

```
 E/Database(13144): sqlite3_open_v2("/data/data/com.jds.databasetest/databases/Book1", &handle, 2, NULL) failed 
```

希望我正在做的事情是非常明确的，我在这里遗漏了一些相当明显的东西。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:03:19.267

我不确定，但也许您需要参考数据？

```
File data = Environment.getDataDirectory(); 
```

# azure - 将属性添加到 Azure 表存储中的实体似乎会将空属性添加到表中的所有实体

> ID：11813376
> 
> 赞同：1
> 
> 时间：2012-08-05T01:51:51.420
> 
> 标签：azure, azure-table-storage

我正在尝试使用 ReadingEntity 和 WritingEntity 事件将属性动态添加到 Azure 表存储，如下所述：[如何将新属性添加到保存在 Azure 表存储中的实体？](https://stackoverflow.com/questions/11597294/how-to-add-new-properties-to-an-entity-saved-in-azure-table-storage).

目的是将我的 poco 上的 List 属性保存到表存储中。为了做到这一点，每次我需要向实体列表中添加一个新项目时，我都会将该实体从表存储中取出，计算该实体具有的具有特定名称的属性的数量，然后再添加一个具有相同的名称并在末尾增加索引 - 例如，如果实体具有属性 Friend1、Friend2 和 Friend3，我将添加 Friend4。

我遇到的问题是，当我将属性添加到 1 个实体时，它似乎将其添加到表中的所有实体（或者可能是分区 - 我还没有检查）。因此，如果我将 Friend1 添加到 Entity1，然后将 Friend 属性添加到 Entity2，我希望添加 Entity2.Friend1。相反，Friend1 似乎已经存在于 Entity2 上，其值为 NULL。因此，添加属性的代码看到 Friend1 已经存在，并将 Friend2 属性添加到 Entity2。好像这是一个关系数据库，我正在架构中创建一个列。显然，这完全破坏了我如何存储这些信息的计划......

这是它应该如何工作？我一直在理解每个实体的属性可能是唯一的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:05:49.457

Gaurav 和 smarx 是对的——当使用表存储服务而不是本地存储服务模拟器时，问题就消失了。

# php - PHP Fatal error: Class 'PDO' not found

> ID：11813381
> 
> 赞同：59
> 
> 时间：2012-08-05T01:52:49.277
> 
> 标签：php, mysql, cakephp, web-applications

```
PHP Fatal error:  Class 'PDO' not found in /home/bd/public_html/app/webroot/Cake/Model/Datasource/Database/Mysql.php on line 177 
```

PHP INFO:

```
PDO

PDO support => enabled
PDO drivers => sqlite, sqlite2, mysql

pdo_mysql

PDO Driver for MySQL => enabled
Client API version => 5.5.24

Directive => Local Value => Master Value
pdo_mysql.default_socket => /var/lib/mysql/mysql.sock => /var/lib/mysql/mysql.sock

pdo_sqlite

PDO Driver for SQLite 3.x => enabled
SQLite Library => 3.7.7.1 
```

PHP INI:

```
extension=pdo.so
extension=pdo_sqlite.so
extension=sqlite.so
extension=pdo_mysql.so 
```

CODE:

```
/**
 * Check whether the MySQL extension is installed/loaded
 *
 * @return boolean
 */
        public function enabled() {
                return in_array('mysql', PDO::getAvailableDrivers());
        } 
```

Ideas as to why I'm getting this error?

PHP 5.3.15 CloudLinux/CentOS 6 CPanel

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-05-10T04:04:29.287

尝试

```
 yum install php-pdo
 yum install php-pdo_mysql

 service httpd restart 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2014-07-05T15:54:34.583

尝试`use PDO;`在命名空间之后、类之前或文件顶部添加`PHP`。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-03-07T06:39:31.087

`php.ini`如果Web 应用程序的当前工作目录中有文件，也会发生这种情况。如果一个已被放置在那里以更改某些设置，它将覆盖全局设置。

为避免此问题，请勿使用`php.ini`文件更改设置；相反，您可以：

*   在 vhost 声明中指定设置
*   使用`.htaccess`文件`php_flag`（[见这里](http://php.net/manual/en/configuration.changes.php)）
*   使用`.user.ini`文件（[见这里](http://php.net/manual/en/configuration.file.per-user.php)）

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-01-02T19:16:04.617

确保它们在 php.ini 文件中被调用

如果 PDO 显示在当前安装的 php 模块列表中，您将需要检查相关文件夹中的 php.ini 文件以确保它们被调用。在 php.ini 文件的某处，您应该看到以下内容：

```
extension=pdo.so
extension=pdo_sqlite.so
extension=pdo_mysql.so
extension=sqlite.so 
```

如果它们不存在，只需将上面的行添加到 php.ini 文件的底部并保存。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-08-06T05:35:24.007

文件的完整来源是什么`Mysql.php`。根据 php info 列表的输出，听起来您可能正在尝试从命名空间中引用全局类。

如果文件`Mysql.php`中包含“命名空间”语句，请使用- 这`\PDO`将`PDO`告诉 PHP 查找全局类，而不是查找本地命名空间。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-03-19T19:46:19.717

有点晚了，但我发现了同样的问题，我在 PDO 前面用“\”修复了它

```
public function enabled() {
    return in_array('mysql', \PDO::getAvailableDrivers());
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-06-25T11:37:30.417

**我在GoDaddy**上遇到了同样的问题。我加了`extension=pdo.so`to `php.ini`，还是不行。然后我只想到一件事：**权限**

> 在上传文件之前，杀死所有 PHP 进程（cPanel->PHP 进程）。

问题是**文件权限**被设置为`0644`并且不可执行。您至少需要设置文件权限`0755`。

[![权限](../Images/34c1a7c863700366ba0ce678444e474b.png)](https://i.stack.imgur.com/mgVy4.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-04-23T17:23:07.160

您可以通过执行以下命令来查找加载的配置文件，

```
 php -i | grep 'php.ini' 
```

然后添加以下行以更正 php.ini 文件

```
extension=pdo.so
extension=pdo_sqlite.so
extension=pdo_mysql.so
extension=sqlite.so 
```

然后重启网络服务器，

```
service httpd restart 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-06T05:29:07.133

此错误是由于`PDO`PHP 不可用引起的。

如果您在命令行上收到错误，或者不是通过您的网站用于 PHP 的相同界面，您可能会调用不同版本的 PHP，或者`php.ini`在检查`phpinfo()`.

确保已加载 PDO，并且还加载了数据库的 PDO 驱动程序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-04T13:58:47.933

我使用库[PHP_PDO](http://sourceforge.net/projects/phppdo/)解决了它，因为我的托管服务提供商不接受我将 PDO 驱动程序安装到 apache 服务器的要求。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-09-07T06:20:09.270

如果有人在 cPanel 中遇到此错误，请检查 cPanel 中的 PHP 版本类型。将其更改`alt-php`为`ea-php`. 这个设置对我有用。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-01-25T06:43:09.397

如果您使用 php-fpm 模块运行 php，请不要忘记运行命令 systemctl restart php-fpm！这将重新加载 php-fpm 模块。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-12-06T15:20:29.843

我必须在 AWS EC2 Linux 实例（PHP 版本 7.3）上运行以下命令：

```
sudo yum install php73-php-pdo php73-php-mysqlnd 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2021-09-09T03:41:30.420

折腾了好久，终于解决了。检查您在 Cpanel 中的文件夹以查看是否有 php.ini 文件。如果是，请删除它，因为 Cpanel 将使用它自己的 php.ini

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-11-26T19:46:02.163

对于 Fedora 33，您可以按如下方式安装：

安装

```
dnf install php-pdo
dnf install php-pdo_mysql 
```

重启 PHP

```
systemctl restart php-fpm.service 
```

# c - 带有指针的 C 结构认为我没有正确分配内存

> ID：11813383
> 
> 赞同：1
> 
> 时间：2012-08-05T01:52:53.953
> 
> 标签：c, unix, structure

```
 typedef struct Data* DATAS;

  struct Data {
      char *name;
      char *city;
      DATAS next;
  };
  typedef struct Data DATA;

  int main(void){
     DATAS tmp;

     tmp=(DATAS) malloc(sizeof(DATA));   
     printf("please enter name:\n");
     scanf("%s",&tmp->name);
     printf("%s\n",&tmp->name);
     printf("please enter city:\n");
     scanf("%s",&tmp->city);
     printf("%s\n",&tmp->name);
     printf("%s\n",&tmp->city);

  return 0;
  } 
```

这是家庭作业的一部分。或者更确切地说，这个概念是。我需要使用'typedef struct Data* DATAS;' 这让我失望。当我运行它时，我用城市的一部分覆盖名称，因此我得到了这个。

```
please enter name:
name
name
please enter city:
city
namecity
city 
```

任何帮助都会很棒。谢谢。我尝试过使用 malloc 的不同变体

```
tmp=(DATAS) malloc(sizeof(DATA));
tmp=(DATA) malloc(sizeof(DATA)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T02:12:43.220

分配 a 的最佳方法`struct Data`是：

```
struct Data *tmp;
tmp = malloc(sizeof *tmp);
if (tmp == NULL) {
    /* malloc failed, abort or take corrective action */
} 
```

不推荐为指针类型定义 typedef（至少我是这样）；显式使用`struct Data *`使读者更清楚您正在处理指针。

也不需要为结构类型定义 typedef。typedef 只是为现有类型声明一个新名称；你的类型已经有了一个非常好的名字，`struct Data`. 诚然，您必须`struct`重复输入关键字，但这并不是真正的问题。

强制转换结果`malloc`是不必要的；`malloc`返回一个`void*`结果，该结果可以隐式转换为您的指针类型。演员表可以隐藏错误，例如忘记所需的`#include <stdlib.h>`.

但这些都是风格问题。您当前的代码：

```
tmp=(DATAS) malloc(sizeof(DATA)); 
```

没关系，它应该工作。问题出现在您的代码后面。

`scanf`使用`"%s"`格式需要一个`char* argument. You're giving it the *address* of a`char* 对象，即 type 的值`char**`。编译器不一定会就此发出警告。所以这：

```
scanf("%s",&tmp->name); 
```

应该：

```
scanf("%s", tmp->name); 
```

但这仍然是一个问题，因为`tmp->name`它是一个未初始化的指针。它可能指向内存中的某个随机位置，并且调用尝试在该位置存储数据。或者它可能持有无效地址，从而导致崩溃。行为未定义。

您需要分配空间来保存名称，并导致`tmp->name`指向它。您可能需要`malloc()`在这里再打一个电话。

那么你需要分配多少空间呢？好吧，对此没有好的答案，因为`scanf("%s", ...)`它没有限制它将读取多少字节。不管分配的空间有多大，如果输入足够的数据，就会溢出。

您可能还不需要担心这一点。只是为了将来记住它。现在，您可以分配“足够”的空间（例如 100 个字节）并注意不要输入太多数据。这应该足以让您的程序正常工作。（检查文档`scanf`，并考虑使用类似的东西`"100s"`。）

请记住，`scanf("%s", ...")`读取以空格分隔的输入字符串；如果你输入“John Doe”，它只会读取“John”，留下“Doe”用于下一个输入操作。

（我希望这不会太过分。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T01:57:46.527

您将未初始化的指针传递给`scanf`，它使用它们来执行写入；这是未定义的行为。您还将字符串指针的地址传递给`scanf`and `printf`; C 中的字符串已经是指针，您不应该将指向它们的指针传递给 I/O 例程。

如果您知道名称/城市名称中的字符数限制，则可以读取如下字符串：

```
char buf[128]; // 127 is the limit; buffer needs an extra character
printf("please enter name:\n");
scanf("%127s", buf);
size_t len = strlen(buf)+1; // plus one for null terminator
tmp->name = malloc(len);
strcpy(tmp->name, buf);
printf("%s\n", tmp->name); // No ampersand 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T02:02:55.240

您已经为包含三个指针的结构分配了空间。您还需要为这两个字符串分配空间。您还应该确保该`next`字段已正确初始化——可能使用 NULL。

就个人而言，我不会打扰`DATAS`typedef，最好保留宏的所有大写名称（`FILE *`尽管类型）。

# python - Do you need to use __name__=__main__ statement for running any script in python?

> ID：11813387
> 
> 赞同：1
> 
> 时间：2012-08-05T01:53:59.657
> 
> 标签：python

> **Possible Duplicate:**
> [What does `if __name__=="__main__":` do?](https://stackoverflow.com/questions/419163/what-does-if-name-main-do)
> [What's the point of a main function and/or `__name__ == "__main__"` check in Python?](https://stackoverflow.com/questions/1954700/whats-the-point-of-a-main-function-and-or-name-main-check-in-pytho)

I just wanted to understand why you have you use the `__name__='__main__'`statement if we can run any python script even without using that statement. For example, I can run the script below without using the if `__name__='__main__'` statement.

```
def hello():
      print "hello"
      return 1234

# And here is the function being used
print hello() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T01:54:43.670

It's done so that code is only executed when run as a script and not when you import the module.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:40:50.953

全局命名空间中的代码运行速度稍慢。做一个函数很容易`main()`，为什么不做呢？如果您在导入模块时不介意模块“运行”，则它是可选的

# jquery - 列表中项目的导航

> ID：11813391
> 
> 赞同：0
> 
> 时间：2012-08-05T01:55:10.180
> 
> 标签：jquery, html, css

*   我的列表中有 15 个项目
*   我有 10 个这样的清单
*   每个列表应该在页面上最多占据 1 行
*   溢出项目应通过“NEXT”或“PREV”按钮导航。
*   为了显示每个列表中的项目，我“浮动：左”。
*   但随后溢出项目将换行到下一行。

现在，我正在为我的***笔记本电脑屏幕尺寸做一些修改：***

*   我 .hide() 每个列表的窗口加载时的所有项目
*   然后 .show() 每个列表的前 4 个项目
*   我已经相应地配置了下一个和上一个按钮。

我很肯定这是错误的。但它让我看到了我想做的事情的外观和感觉。

请建议我正确的方法。所有主要网站都处理这个问题。这是很常见的问题。我现在只是一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:35:24.013

实现这一目标的最简单方法可能是：

1.  不要使用 float:left，只需使用常规的内联显示。
2.  对于容器元素，使用溢出：隐藏。
3.  将容器元素包裹在外部容器中，也使用溢出：隐藏。
4.  现在，当用户单击下一个/上一个时，调整/动画内部容器的边距，使其滑过以显示其他元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:42:32.127

我想我通过另一个 SO 响应解决了这个问题：

[如何将第一个孩子移动到最后？](https://stackoverflow.com/questions/5480049/how-to-move-first-child-to-the-end)

感谢你的帮助

# android - Can't add .jar files to build path successfully

> ID：11813394
> 
> 赞同：1
> 
> 时间：2012-08-05T01:55:19.237
> 
> 标签：android, jar, libraries

I have a persistent problem with not being able to correctly add .jar files to my build path. I have tried 3 methods for adding the .jar file to the library:

1.  Moving the .jar file to a subfolder called either "lib" or "libs" (I have tried both) in the main project folder, and then right clicking --> Build Path --> Add to build path.

2.  Right clicking on the project folder and adding the internal .jar file

3.  Doing the same thing, but adding the .jar file externally.

From here, the AndEngine library appears under the "Referenced Libraries" subgroup (It's the only thing in there), and I can open up the AndEngine library to find all the superclasses I'm supposed to be extending. The IDE just doesn't recognize any of them when I try to call them in my code.

Here's a video version of my problem.

[http://www.andengine.org/blog/tag/tutorial/](http://www.andengine.org/blog/tag/tutorial/)

I am able to follow the video up to about 1:50, when he changes the name of the extended class from "Activity" to "BaseGameActivity". He is actually able to do it with intellisense, and eclipse automatically added the correct import statement to the top. It won't do this for me.

The andengine jar file is sitting in my referenced libraries tab for this project. The IDE doesn't seem to recognize anything that's in it, including the above BaseGameActivity statement. (The correct import option selected in the video isn't even available to me).

I can go through and manually add the import statements that are needed, and that resolves the problems one by one. Doing so means that I have to expand the AndEngine.jar and go digging through all the subdivisions one-by-one looking for the name of the class I want to import. How can I fix this.

# php - 返回的意外值 (MAX(id))

> ID：11813397
> 
> 赞同：0
> 
> 时间：2012-08-05T01:55:50.110
> 
> 标签：php, mysql, echo

使用的代码（已建立数据库连接）：

```
<?php 
$cur = mysql_query("SELECT MAX(id) FROM trades");
echo "$cur";
while($cur >= 0) {
$query = mysql_query("SELECT * FROM trades WHERE id='$cur'");

if(mysql_num_rows($query)==0) {
    echo "ERROR!";
    exit();
}
$row = mysql_fetch_assoc($query);

$tradeID = $row['ID'];
$mcUsername = $row['Minecraft Username'];
$blockID = $row['Block ID'];
$quantity = $row['Quantity'];
$costPer = $row['CostPer'];
$tradeNotes = $row['TradeNotes'];

    echo "<tr>";
    echo "<td class='first-td'>$tradeID</td>";
    echo "<td>$mcUsername</td>";
    echo "<td>$blockID</td>";
    echo "<td>$quantity</td>";
    echo "<td>$costPer</td>";
    echo "<td class='last-td'>$tradeNotes</td>";
    echo "</tr>";

    $cur = "$cur - 1";
} 
?> 
```

$cur 的回声正在返回：`Resource id #7`

并且 if 语句正在返回`ERROR`，这很可能是由于 $cur 无法正常工作引起的。

我正在做的事情是否存在某种语法错误，因为当我在 MySQL DB 中手动运行 $cur 的 SQL 查询时，它会返回预期值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:08:13.903

试试这个

```
$res = mysql_query("SELECT MAX(id) FROM trades");
$row = mysql_fetch_row($res);
$cur = $row[0];
echo "$cur"; 
```

`mysql_query`返回选择查询的资源而不是值。[检查 mysql_query 返回的内容并注意使用 mysql_ 函数的警告](http://php.net/manual/en/function.mysql-query.php)

# facebook - fbm & fbsr cookie 和 cookieless 子域

> ID：11813402
> 
> 赞同：3
> 
> 时间：2012-08-05T01:56:35.027
> 
> 标签：facebook, cookies, subdomain

发现没有为此找到一些东西有点奇怪，所以也许我只是走错了路。

但无论如何...

我只是设置了一个子域来存储图像、样式等，出于优化目的，我不希望将 cookie 发送到该子域。称之为 static.domain.com。通过将域设置为 www.domain.com，我自己的 cookie 可以正常工作，但我不知道如何为 Facebook 的 fbm_ 和 fbsr_ cookie 定义域集。

这可能吗？或者以其他方式阻止它们被发送到 static.domain.com，但在请求中正常传递到 www.domain.com？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T07:12:58.470

Cookie 设置在应用程序设置中由“应用程序域”定义的域之一上。如果您列出多个域但可能与当前域最接近的域是由 SDK 选择的，我不确定它的行为如何。

因此，如果您将其设置为`www.domain.com`cookie，则会在此处设置并且不会发送到`static.domain.com`.

另外仅供参考，它没有记录，但可以将`cookie`参数设置为将设置域 cookie 的值。（我不建议在[官方 Facebook JS-SDK 存储库](https://github.com/facebook/facebook-js-sdk/)更新实际代码之前在生产中使用它，表明这是可能的或文档中说明的内容）`FB.init``string`

# google-app-engine - 在 Appengine 上的 web.xml 中禁用标记库

> ID：11813403
> 
> 赞同：2
> 
> 时间：2012-08-05T01:57:24.337
> 
> 标签：google-app-engine, jsp, jsp-tags, web.xml

我的应用程序在启动期间正在扫描 tld 路径，我意识到它需要超过 15 秒。

我如何完全禁用它？我正在使用应用引擎。

谢谢。

# jquery - Jquery ajax，getJson Opera 仅适用于完整链接

> ID：11813404
> 
> 赞同：0
> 
> 时间：2012-08-05T01:57:29.973
> 
> 标签：jquery, opera

我正在尝试 5 个小时来制作地球上最简单的脚本以在歌剧中运行。

```
$.getJSON('http://parhs.no-ip.org/gallery/media/list/1?jsoncallback=?' ,
                   {test : "data"},
                        function(data) {
                           // var webPath=data.webPath;
                         alert("ok");
                            }); 
```

这运行得很好..但是在我的代码中我没有[http://parhs.no-ip.org/](http://parhs.no-ip.org/)并且可以在除歌剧之外的所有浏览器中使用..没有完整链接它不起作用..知道如何解决这个问题吗？

# ruby-on-rails - 用户有很多图片，user.article 有很多图片

> ID：11813407
> 
> 赞同：0
> 
> 时间：2012-08-05T01:58:05.400
> 
> 标签：ruby-on-rails, ruby

我想让用户能够添加图像，但想允许随后将其中一个图像添加到文章中。我很好奇是否必须为 Image 和 ArticleImage 创建两个单独的模型？如果我可以使用相同的 Image 模型来完成这两项工作，那就太好了，但到目前为止，我能想到的唯一方法是两个独立的模型，就像这样。

路线.rb

```
resources :users do 
  resources :images
  resources :articles do
    resources :articles_images
  end
end 
```

我很确定会建议不要做这样的事情，尽管它很诱人：

```
resources :users do 
  resources :images
  resources :articles do
    resources :images
  end
end 
```

我的假设是，如果我采用第一种方法，articles_images 将只是一个存储 image_id 和 article_id 的连接表，对吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:22:18.813

您只需一个图像模型即可轻松完成此操作。

用户.rb

```
class User < ActiveRecord::Base
    has_many :images
end 
```

文章.rb

```
class Article < ActiveRecord::Base
    has_and_belongs_to_many :images
end 
```

图片.rb

```
class Image < ActiveRecord::Base
    belongs_to :user
    has_and_belongs_to_many :articles 
```

路线.rb

```
resources :users
resources :images
resources :articles 
```

在您的图像控制器中，通过您当前的用户添加您的图像 -

```
def create
    @image = current_user.images.build(params[:image]) 
```

对于最后一步，有多种方法可以将已创建的图像分配给特定文章。您将在图像控制器中创建自定义路由和自定义方法来处理此问题。

# javascript - 用斜线替换书签

> ID：11813413
> 
> 赞同：0
> 
> 时间：2012-08-05T01:59:22.713
> 
> 标签：javascript, bookmarklet

我正在构建一个书签来用**rillist.com/?id=替换****facebook.com/** 我现在使用的是：

 **```
javascript:
  (function() {
    window.location=window.location.toString().replace(/facebook.com/,'rillist.com\?id=');
  })() 
```

但这会产生： [http](http://www.rillist.com/?id=/example) ://www.rillist.com/?id=/ example 关于如何删除讨厌的斜线以产生： [http](http://www.rillist.com/?id=example) ://www.rillist.com/?id=example 的任何想法 ？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:31:08.187

您的正则表达式与最后一个正斜杠不匹配。

尝试将正则表达式更改为：

```
/facebook.com\// 
```**

# python - jinja2模板引擎中的这个“-”是做什么的？

> ID：11813422
> 
> 赞同：36
> 
> 时间：2012-08-05T02:02:47.093
> 
> 标签：python, django, google-app-engine, templates, jinja2

我正在学习 jinja2，因为 Google App Engine 推荐它。

我在维基百科上找到了这个例子：[http ://en.wikipedia.org/wiki/Jinja_%28template_engine%29](http://en.wikipedia.org/wiki/Jinja_%28template_engine%29)

```
 {%- for item in item_list %}
    {{ item }}{% if not loop.last %},{% endif %}
  {%- endfor %} 
```

“{%- for”中的“-”是什么？

另外，我在哪里可以找到 jinja2 示例（使用 Google App Engine 更好）？

非常感谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-05T02:10:02.190

它抑制额外的垂直间距，通常在您不希望循环通过的元素之间的间距过大时使用。

> 如果将减号 (-) 放在块的开头或结尾（例如 for 标记）、注释或变量表达式，您可以删除该块之后或之前的空格

见：http: [//jinja.pocoo.org/docs/templates/#whitespace-control](http://jinja.pocoo.org/docs/templates/#whitespace-control)

# c# - 我如何使用 c# 获取有关特定 udp 开放端口的所有信息

> ID：11813424
> 
> 赞同：0
> 
> 时间：2012-08-05T02:03:00.937
> 
> 标签：c#, networking, udp

我如何使用 c# 获取有关特定 udp 开放端口的所有信息

**例如**， 我有 udp 端口`5001`​​，我想知道如何在此端口中发送或接收马赫数据，以及谁在发送此数据？ETC...

# java - 标记 "(" , ; 预期的语法错误

> ID：11813425
> 
> 赞同：-8
> 
> 时间：2012-08-05T02:03:03.773
> 
> 标签：java, android, eclipse

我正在尝试修改 google 的 openGL 示例，但出现错误

```
syntax error on token "(" , ; expected 
```

编码：

```
public class MyGLRenderer implements GLSurfaceView.Renderer 
{

    private static final String TAG = "MyGLRenderer";
    private Triangle mTriangle;
    private Square[] mSquare;

    private final float[] mMVPMatrix = new float[16];
    private final float[] mProjMatrix = new float[16];
    private final float[] mVMatrix = new float[16];
    private final float[] mRotationMatrix = new float[16];

    // Declare as volatile because we are updating it from another thread
    public volatile float mAngle;

    public void onSurfaceCreated(GL10 unused, EGLConfig config)
    {

        // Set the background frame color
        GLES20.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);

        mTriangle = new Triangle();
        InitalizeSquares();
    }

    public void InitalizeSquares()
    {
         mSquare  = new Square[100];
         for(int i = 0; i < 10; i++)
         {
            for(int j = 0; j < 10; j++)
            {
                float[] pos = {j,i,0};
                mSquare[i*10 + j].SetPos(pos);
            }
         }
    }

    //Error here 
    public void onDrawFrame(GL10 unused){

        // Draw background color
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

        // Set the camera position (View matrix)
        Matrix.setLookAtM(mVMatrix, 0, 0, 0, -10, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

        // Calculate the projection and view transformation
        Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);
        for(int i = 0; i < 10; i++)
        {
            for(int j = 0; j < 10; j++)
            {
                // Draw square
                mSquare[i*10 + j].draw(mMVPMatrix);
            }
        }

        // Create a rotation for the triangle
        //        long time = SystemClock.uptimeMillis() % 4000L;
        //        float angle = 0.090f * ((int) time);
        Matrix.setRotateM(mRotationMatrix, 0, mAngle, 0, 0, -1.0f);

        // Combine the rotation matrix with the projection and camera view
        Matrix.multiplyMM(mMVPMatrix, 0, mRotationMatrix, 0, mMVPMatrix, 0);

        // Draw triangle
        mTriangle.draw(mMVPMatrix);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T03:25:32.820

尝试清理构建。有时这就是清理莫名其妙的语法错误所需要的一切。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-05T02:46:09.673

尝试

```
// Combine the rotation matrix with the projection and camera view
        Matrix.multiplyMM(mMVPMatrix, 0, mRotationMatrix, 0, mMVPMatrix, 0);

        // Draw triangle
        mTriangle.draw(mMVPMatrix);
    } 
} 
```

# asp.net-mvc - MVC3、Knockout.js 和嵌套的 json 对象

> ID：11813427
> 
> 赞同：2
> 
> 时间：2012-08-05T02:03:30.370
> 
> 标签：asp.net-mvc, knockout.js, knockout-mapping-plugin

在这里完成 knockout.js 新手。我在理解 knockout.js 的工作原理时遇到了一些麻烦。任何帮助表示赞赏。

我有一个 JSON 模型，我得到了 asp.net MVC，它看起来像这样 -

```
var model = [{
"Personal": {"Name" : "Something"},
"Address": [
          {"City" : "Some City"}
          {"City" : "Some Other City"}
          {"City" : "3rd City"}
"Relationships": [
          {"Affiliation" : "Aff1"},
          {"Affiliation" : "Aff2"},
]
]

var viewModel = ko.mapping.fromJS(model);
ko.applyBindings(viewModel); 
```

然后，在我看来，我正在尝试这样做 -

```
<div data-bind="template: {foreach: Address}">
    <span data-bind="value: City"></span>
</div> 
```

我收到“无法解析绑定，地址未定义”错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T02:33:25.757

你是什​​么意思，它“看起来像这样”？您编写的 javascript 模型对象不是有效的（缺少逗号、不匹配的括号..）。它看起来像是`model`一个数组（不是对象），将数组传递给`ko.mapping.fromJS`.

它适用于有效数据（并将跨度的绑定更改为`text`而不是`value`），请参阅小提琴：http: [//jsfiddle.net/KXhem/16/](http://jsfiddle.net/KXhem/16/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T02:36:43.827

与 anitshok 之前所说的一样，这是一个可以正常工作的清理版本，但是，数据不是来自服务器。

```
<div data-bind="template: { name: 'address-template', foreach: Address }">
</div>
<script type="text/html" id="address-template">     
    <span data-bind="text: City"></span><br />
</script>

<script type="text/javascript">
    var model = {
       Personal: { "Name": "Something" },
       Address: [
         { "City": "Some City" },
         { "City": "Some Other City" },
         { "City": "3rd City"}],
      Relationships: [
         { "Affiliation": "Aff1" },
         { "Affiliation": "Aff2"}]
    };

    ko.applyBindings(model); 
</script> 
```

您的代码似乎缺少的是对模板的调用、模板的包装器以及其中包含一些错误标记的模型。你应该可以从这里开始。

这是[敲除映射](http://knockoutjs.com/documentation/plugins-mapping.html)和[敲除模板](http://knockoutjs.com/documentation/template-binding.html)的链接。我使用的是 knockoutjs 2.1.0，所以您可能正在查看一个较旧的示例。

祝你好运，希望这对一些人有所帮助。

# javascript - 尝试在 javascript 中重新访问 URL

> ID：11813430
> 
> 赞同：0
> 
> 时间：2012-08-05T02:03:53.280
> 
> 标签：javascript, jquery, python, polling

我想访问某些 REST URI。

```
$.ajax({
    type: "POST",
    url: url + "result/" + ticket_id,
    success: function(data) {
        setTimeout(function(){pollResponse(url,data.id);}, 3000);
    }
}); 
```

这行得通。它访问 URI，views 函数完成它的工作。所以`success`它继续移动到新的 URI。

```
function pollResponse(url, id)
{
    $.getJSON(url + "status/" + id, {},
        function(data) {
            if (data.report == null)
            {
                console.log(data.status_response);
                setTimeout(function(){pollResponse(url, id);}, 3000);
            }
            else
                console.alert('DONE!');
        }
    );
}; 
```

如果 URI 没有`report`作为数据的一部分返回（或为空），那么我们将在 3 秒后再次询问。

但是在控制台中打印日志后，响应以`[200] OK`. 它不再询问服务器。

我对 Python 的视图函数所做的只是

```
from cornice import Service
status = Service(name='status',
                    path=root+'/status/{some_id}',
                    description=status_desc)
@status.get()
def get_status(request):
   // do something

   if (...):
      return {'report': ''}
   else:
      return {'report': 'NOT EMPTY') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:21:41.233

结果中可能存在解析问题或跨域问题。尝试更改代码以`ajax`直接使用该功能：

```
$.ajax({
    url: url + "status/" + id,
    dataType: 'json',
    data: {},
    success: function(data) {
        if (data.report == null)
        {
            console.log(data.status_response);
            setTimeout(function(){pollResponse(url, id);}, 3000);
        }
        else
            console.alert('DONE!');
    },
    error: function(jqXHR, textStatus, errorThrown) {
        console.error(textStatus);
        console.error(errorThrown);
        console.log(jqXHR.responseText);
    }
); 
```

通过这种方式，您可以查看响应是否导致错误。如果出现解析错误，可以通过error函数上的jqXHR.responseText获取数据，看看哪里出错了。

在很多情况下，jQuery 中 AJAX 的快捷方式会出错。这就是为什么我很少使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:06:51.840

看起来`setTimeout`轮询函数中的应该是：

```
setTimeout(function(){pollResponse(url, data.id);}, 3000); 
```

代替：

```
setTimeout(function(){pollResponse(url, id);}, 3000); 
```

# mysql - 从另一个表更新一个表中的值

> ID：11813433
> 
> 赞同：0
> 
> 时间：2012-08-05T02:04:21.493
> 
> 标签：mysql, sql, phpmyadmin, foreign-keys, many-to-many

我在这里有一个查询，它将返回不同的轨道 ID

注意：我正在从另一个表中查询这个。

```
 SELECT t.track_id  FROM tracks t , account_x_track axt,accounts a WHERE axt.track_id = t.track_id AND  axt.account_id = a.id AND a.id = 2 
```

然后我想做的是前一个表中的所有 Id 将用于更新另一个表（特别是 Tracks 表），因为从前一个表中检索的 id 来自 Tracks 表。我在想这样的事情。

```
UPDATE tracks 
set visible = 3
WHERE visible in( SELECT t.track_id  FROM tracks t , account_x_track axt,accounts a WHERE axt.track_id = t.track_id AND  axt.account_id = a.id AND a.id = 2 ) 
```

但这似乎不起作用。任何想法我将如何处理这个困境？另请注意，第一个查询查询多到 mnay 表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:17:17.673

您不能`UPDATE`在子查询中引用同一个表，请改用 a `JOIN`：

```
UPDATE tracks a
JOIN   (
       SELECT axt.track_id
       FROM   account_x_track axt
       JOIN   accounts a ON axt.account_id = a.id AND a.id = 2
       ) b ON a.track_id = b.track_id
SET    a.visible = 3 
```

# python - 我正在尝试在 powershell 中使用 python

> ID：11813435
> 
> 赞同：65
> 
> 时间：2012-08-05T02:05:32.110
> 
> 标签：python, powershell, python-2.7

我正在尝试遵循 Zed Shaw 的《Learning Python the Hard Way》指南。我需要在 Powershell 中使用 python。我有 Python 2.7.3 安装在`C:\Python27`. 每当我在 Powershell 中键入 python 时，我都会收到一条错误消息，指出术语“python”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。我还输入了这个：`[Environment]::SetEnvironmentVariable("Path", "$env:Path;C:\Python27", "User")` 这是提供的建议解决方案，但是在 Powershell 中输入 python 仍然没有任何作用。我可以输入“start python”，它会打开一个带有 python 的窗口，但我需要在 Powershell 中使用它。谢谢。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-08-05T02:22:46.807

尝试以这种方式设置路径：

```
 $env:path="$env:Path;C:\Python27" 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-02-24T14:22:13.760

值得一提的是，这个命令为我做了（Python3.3）：

```
[System.Environment]::SetEnvironmentVariable("PATH", $Env:Path + ";C:\Python33", "Machine") 
```

之后我只需要重新启动 Powershell。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-08-05T07:31:55.070

`$env:path="$env:Path;C:\Python27"`只会为当前会话设置它。下次打开 Powershell 时，您将不得不再次执行相同的操作。

这`[Environment]::SetEnvironmentVariable()`是正确的方法，它会永久设置您的 PATH 环境变量。在这种情况下，您只需再次启动 Powershell 即可看到效果。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-10-16T23:05:30.477

目录设置不正确，因此请按照以下步骤操作。

1.  “我的电脑”>“右键单击”>“属性”>“系统属性”>“高级”选项卡
2.  “环境变量”>“路径”>“编辑”
3.  在“变量值”框中，确保您看到以下内容：

    ;c:\python27\;c:\python27\scripts

4.  单击“确定”，通过重新启动 Windows Powershell 测试此更改。类型

    Python

5.  现在 python 版本 2 运行！耶！

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-03-21T16:28:17.677

对于永久解决方案，我发现以下方法有效：

```
[Environment]::SetEnvironmentVariable("Path", "$env:Path;C:\Python 3.5") 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-07-08T19:54:46.300

这对我永久有效：

`[Environment]::SetEnvironmentVariable("Path", "$env:Path;C:\Python27","User")`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-02-14T21:13:27.737

从[Python Guide](http://docs.python-guide.org/en/latest/starting/install/win/)，这对我有用（Python 2.7.9）： `[Environment]::SetEnvironmentVariable("Path", "$env:Path;C:\Python27\;C:\Python27\Scripts\", "User")`

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-05-26T15:06:35.980

有时您在 Windows 上安装 Python，但它没有正确配置路径。

确保您`[Environment]::SetEnvironmentVariable("Path", "$env:Path;C:\Python27", "User")`
在 PowerShell 中输入以正确配置它。

您还必须重新启动 PowerShell 或您的整个计算机才能真正修复它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-08-23T02:10:01.773

以这种方式尝试命令：

```
PS C:\Users\XXX>python.exe 
```

代替：

```
C:\Users\XXX>python 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-02T20:25:45.533

正如[MaxPRafferty 提到的](https://stackoverflow.com/questions/11813435/im-trying-to-use-python-in-powershell/36378313#comment55345730_11813435)：

> 只是给从谷歌登陆这里的任何人的注释，答案设置路径都是正确的，但这个问题可能源于没有给 python 安装程序提供设置路径本身所需的管理权限。另一种方法可能是简单地右键单击安装程序并选择以管理员身份运行，然后修复安装。如果这仍然不起作用，请选择下面与您的 python 版本和安装目录相对应的 [Environment] 答案。– MaxPRafferty 2015 年 11 月 18 日 20:06

也许让 Python 安装程序自己添加路径是明智的。这里的陷阱是默认情况下 Python 安装程序不会**为**您添加路径。您应该在安装过程中仔细查看（通过向下滚动查看已安装的内容），而不是直接`next`查看到最后。

`run as administrator`他想念的是，一旦你安装了它，你就不能这样做。卸载并重新安装可能会这样做，但最简单的是右键单击和`Troubleshoot compatibility`，这次要小心在点击之前检查“要安装的内容”对话框中的“添加路径” `next`。然后重启powershell。瞧。这个对我有用。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-10-31T04:24:30.980

为了能够在不重新启动 shell 窗口的情况下立即使用 Python，您需要更改机器、进程和用户的路径。

```
Function Get-EnvVariableNameList {
    [cmdletbinding()]
    $allEnvVars = Get-ChildItem Env:
    $allEnvNamesArray = $allEnvVars.Name
    $pathEnvNamesList = New-Object System.Collections.ArrayList
    $pathEnvNamesList.AddRange($allEnvNamesArray)
    return ,$pathEnvNamesList
}

Function Add-EnvVarIfNotPresent {
Param (
[string]$variableNameToAdd,
[string]$variableValueToAdd
   ) 
    $nameList = Get-EnvVariableNameList
    $alreadyPresentCount = ($nameList | Where{$_ -like $variableNameToAdd}).Count
    #$message = ''
    if ($alreadyPresentCount -eq 0)
    {
    [System.Environment]::SetEnvironmentVariable($variableNameToAdd, $variableValueToAdd, [System.EnvironmentVariableTarget]::Machine)
    [System.Environment]::SetEnvironmentVariable($variableNameToAdd, $variableValueToAdd, [System.EnvironmentVariableTarget]::Process)
    [System.Environment]::SetEnvironmentVariable($variableNameToAdd, $variableValueToAdd, [System.EnvironmentVariableTarget]::User)
        $message = "Enviromental variable added to machine, process and user to include $variableNameToAdd"
    }
    else
    {
        $message = 'Environmental variable already exists. Consider using a different function to modify it'
    }
    Write-Information $message
}

Function Get-EnvExtensionList {
    $pathExtArray =  ($env:PATHEXT).Split("{;}")
    $pathExtList = New-Object System.Collections.ArrayList
    $pathExtList.AddRange($pathExtArray)
    return ,$pathExtList
}

Function Add-EnvExtension {
Param (
[string]$pathExtToAdd
   ) 
    $pathList = Get-EnvExtensionList
    $alreadyPresentCount = ($pathList | Where{$_ -like $pathToAdd}).Count
    if ($alreadyPresentCount -eq 0)
    {
        $pathList.Add($pathExtToAdd)
        $returnPath = $pathList -join ";"
        [System.Environment]::SetEnvironmentVariable('pathext', $returnPath, [System.EnvironmentVariableTarget]::Machine)
        [System.Environment]::SetEnvironmentVariable('pathext', $returnPath, [System.EnvironmentVariableTarget]::Process)
        [System.Environment]::SetEnvironmentVariable('pathext', $returnPath, [System.EnvironmentVariableTarget]::User)
        $message = "Path extension added to machine, process and user paths to include $pathExtToAdd"
    }
    else
    {
        $message = 'Path extension already exists'
    }
    Write-Information $message
}

Function Get-EnvPathList {
    [cmdletbinding()]
    $pathArray =  ($env:PATH).Split("{;}")
    $pathList = New-Object System.Collections.ArrayList
    $pathList.AddRange($pathArray)
    return ,$pathList
}

Function Add-EnvPath {
Param (
[string]$pathToAdd
   ) 
    $pathList = Get-EnvPathList
    $alreadyPresentCount = ($pathList | Where{$_ -like $pathToAdd}).Count
    if ($alreadyPresentCount -eq 0)
    {
        $pathList.Add($pathToAdd)
        $returnPath = $pathList -join ";"
        [System.Environment]::SetEnvironmentVariable('path', $returnPath, [System.EnvironmentVariableTarget]::Machine)
        [System.Environment]::SetEnvironmentVariable('path', $returnPath, [System.EnvironmentVariableTarget]::Process)
        [System.Environment]::SetEnvironmentVariable('path', $returnPath, [System.EnvironmentVariableTarget]::User)
        $message = "Path added to machine, process and user paths to include $pathToAdd"
    }
    else
    {
        $message = 'Path already exists'
    }
    Write-Information $message
}

Add-EnvExtension '.PY'
Add-EnvExtension '.PYW'
Add-EnvPath 'C:\Python27\' 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-08-04T13:02:00.613

只需删除“用户”一词。它会起作用的。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-23T05:45:19.487

1.  下载适用于 Windows 的[Nodejs](https://nodejs.org/en/download/)
2.  安装 node-vxxx.msi
3.  找到“为 Node.js 安装附加工具”脚本
4.  打开并安装它
5.  重新打开一个新的shell提示符，输入“python”>>按“enter”>>它工作！

# architecture - 使用引用条件的 NoSQL 遍历

> ID：11813442
> 
> 赞同：0
> 
> 时间：2012-08-05T02:07:23.310
> 
> 标签：architecture, nosql

我正在研究 NoSQL 技术，并探索了一些 MongoDB、Riak 和 Neo4j。

我在问他们中的任何一个是否真的可以根据相关实体的条件处理遍历或检索数据的问题。

假设我有一个标签表[id,title,created]、一个帖子表[id,title,body]和一个posts_tags表[post_id,tag_id]，

我想返回包含早于 2012 年 8 月 5 日创建的标签的帖子。在 SQL 世界中这很容易，但这个问题可以使用 NoSQL 技术解决吗？

我不限于上面提到的 NoSQL 选项，如果有人对其他引擎有推荐的话，这是最受欢迎的。

我只是想知道这个问题是否可以在 NoSQL 的世界中解决，以及哪些引擎支持这种问题的解决方案。

问题 2：这些实体是否在 NoSQL 方法中正确建模？

问题 3：就**性能**而言，选择 NoSQL 选项之一是否值得，还是仍然会很慢？（假设我有 200 万个帖子和几千个标签）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:40:57.053

因为，正如您所提到的，使用 SQL 很容易解决您的问题，也许您应该考虑使用 NewSQL 数据库，请参阅[NoSQL、NewSQL 及其他](http://www.infoq.com/news/2011/04/newsql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:53:14.207

我认为所有这三种 NoSQL 技术在标签都直接包含在帖子记录中的非规范化模型中会表现得更好。问题是您想跟踪创建标签的时间，这比标签更烦人，但您仍然可以这样做。您可以拥有您描述的标签集合，然后在将标签添加到帖子时复制创建的时间。如果您希望能够从系统中删除标签，它会变得更加复杂。

在 mongodb（我最有经验的那个）中，你可以这样做：

帖子集合示例：

```
{
  _id: ...,
  title: "test title",
  body: "body",
  tags: [
    {
      title: "test tag",
      created: ISODate("2012-08-05T02:45:40.575Z")
    },
    { 
      title: "test tag2",
      created: ISODate("2012-08-05T02:47:37.124Z")
    }
  ] 
} 
```

那么您的查询将类似于：

```
db.posts.find({"tags.created":{$gt:new Date("2012/08/05")}}); 
```

并且有一个索引`tags.created`会加快速度。

TL;DR：在大多数 NoSQL 技术中尝试使用连接表确实没有性能。

从 neo4j 的角度更新以添加一点：

在我看来，您可以在 neo4j 中相对轻松地关联标签和帖子（没有连接表，因为关系实际上是永久连接）。您将搜索不到 2012/08/05，然后找到与这些标签相关的帖子。不需要非规范化。从理论上讲，这是高效的，尽管我还不是 neo4j 专家。在 Cypher 中它看起来像这样：

```
START post=node(*) 
MATCH post<-[:tagged]-tag 
WHERE tag.created < "2012-08-05" 
RETURN post, tag; 
```

您可以通过索引`created`并使 START 与索引匹配来加快此查询，而不是使用 WHERE。在本例中，我创建了`created`一个 ISO 日期字符串，关系类型为`tagged`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:20:28.710

使用 Couchbase，您可以像在 Wes 的回答中一样内联存储标签，但是然后使用创建视图索引，以便轻松查询带有前缀“app”的所有标签，例如这可以返回 Apple 和应用程序并应用。

本文描述了在 Couch 上构建自动完成标签搜索的内容：http: [//blog.couchbase.com/typeahead-search-couchdb](http://blog.couchbase.com/typeahead-search-couchdb)

它有点旧，但一般模式仍然适用。

# matlab - 在 for 循环 matlab 中附加结果

> ID：11813443
> 
> 赞同：0
> 
> 时间：2012-08-05T02:07:38.133
> 
> 标签：matlab, for-loop, append

我有这个循环（它是更大代码的一部分），它输出连续**SettleEvo**日期的债券价格（HW2FPrice）。如何让它输出单个 HW2FPrice 数组而不是大量单独的输出？我希望数组是**HW2FPrice Vs。解决Evo**。非常感谢，

```
for SettleEvo = Settle:datenum('14-Mar-2013');
NumCouponsRemaining = cpncount(SettleEvo, Maturity, Period, Basis, 1, IssueDate); % Coupon payments remaining until maturity. Calculates the number of periods from start to finish.
nPeriods = NumCouponsRemaining;

[CFlowAmounts, CFlowDates] = cfamounts(CouponRate, SettleEvo, Maturity);
CFlowTimes = yearfrac(SettleEvo,CFlowDates);
CFlowZero = interp1(ZeroTimes,ZeroRates,CFlowTimes,'linear','extrap');
CFlowDF_Zero = zero2disc(CFlowZero,CFlowDates,SettleEvo);
Price_Zero = CFlowAmounts*CFlowDF_Zero';
[CFlowAmounts, CFlowDates, TFactors, Factors] = cfamounts(CouponRate,SettleEvo,repmat(Maturity,1,nTrials),Period,Basis);
CFlowDFSim = cumprod(exp(squeeze(-SimZeroRates(2:end,1,:).*stepSize))); 
```

SimZeroRates 是 (nPeriods,nTenors,nTrials) 的数组；

```
Price_Ind = sum(CFlowAmounts(:,2:end).*CFlowDFSim',2);
HW2FPrice = mean(Price_Ind)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:47:13.557

```
HW2FPrices = []; % creates an empty array

for SettleEvo = Settle:datenum('14-Mar-2013');
    % ... whatever other code is in your loop
    HW2FPrice = mean(Price_Ind)
    HW2FPrices(end+1) = HW2FPrice;
end 
```

循环完成后，`HW2FPrinces`将是一个数组，其中包含`HW2FPrice`您在循环中看到的所有值。

# paypal - 在 IPN 争议通知中识别用户或其订单

> ID：11813445
> 
> 赞同：1
> 
> 时间：2012-08-05T02:08:08.583
> 
> 标签：paypal, paypal-ipn

我想知道当 IPN 侦听器收到争议的 IPN 通知时，我们如何识别用户并命令用户提出争议。

我已经完成了以下[争议解决变量](https://cms.paypal.com/fr/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables#id091EBC0E05Z)，但我不确定是否还设置了识别客户的其他变量，例如客户的电子邮件地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T06:14:41.730

用于查找您`parent_txn_id`要查找`txn_id`的订单。

* * *

即时支付通知 (IPN) 争议通知和可下载的争议报告。
[https://cms.paypal.com/cms_content/CA/en_US/files/developer/PP_OrderMgmt_IntegrationGuide.pdf](https://cms.paypal.com/cms_content/CA/en_US/files/developer/PP_OrderMgmt_IntegrationGuide.pdf)
转到第 32 页。

页面上的一段文字为：
投诉产生的拒付IPN消息是异步的：拒付的IPN消息可以在与投诉相关的IPN消息之前发送给商户。您应该比较所有 IPN 消息的 IPN 变量 parent_txn_id 以将拒付与投诉相匹配。

* * *

注意：收到投诉索赔通知后，商户必须登录 PayPal 才能使用调解中心对案件作出回应。

# ios - 如何使用 iOS 显示多个 OpenGL ES 2.0 视图？

> ID：11813448
> 
> 赞同：0
> 
> 时间：2012-08-05T02:08:53.670
> 
> 标签：ios, opengl-es-2.0

我有几个不同的 3D 元素，我想使用 OpenGL 在不同的视图中显示。

我一直在玩这个**<[优秀教程](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial)>**中的代码。当我只有一个元素要使用单个视图显示时，事情显示得很好，但如果我有多个元素，它只会显示一个。

```
IBOutlet UIView   *openGL;

openGLA = [[OpenGLView alloc] initWithFrame:screenBounds Vertices:[self renderVertices:[self getBucketA]] Indices:[self renderIndices:[self getBucketA]]];
openGLZ = [[OpenGLView alloc] initWithFrame:screenBounds Vertices:[self renderVertices:[self getBucketZ]] Indices:[self renderIndices:[self getBucketZ]]];

[openGL addSubview:openGLA];
[openGL addSubview:openGLZ];

[openGLA render];
[openGLZ render];

[openGLA release];
[openGLZ release]; 
```

仅使用 A 或仅显示 Z 可以正常显示，但两者都仅显示 Z 坐标最接近屏幕的内容。我确实明确地将事物设置为非透明的。

```
@interface OpenGLView : UIView

- (void)setupLayer
{
    _eaglLayer = (CAEAGLLayer*) self.layer;
    _eaglLayer.opaque = NO;
}

- (id)initWithFrame:(CGRect)frame Vertices:(NSMutableArray *)vertices Indices:(NSMutableArray *)indices
{
    self = [super initWithFrame:frame];
    if (self)
    {
        [self setupLayer];
        [self setupContext];
        [self setupDepthBuffer];
        [self setupRenderBuffer];
        [self setupFrameBuffer];
        [self compileShaders];
        [self setupVBOs];
    }
    return self;
}

- (void)render
{
    glClearColor(0.0, 0.0, 0.0, 0.0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glEnable(GL_DEPTH_TEST);

    CC3GLMatrix *projection = [CC3GLMatrix matrix];
    float h = 4.0f * self.frame.size.height / self.frame.size.width;
    [projection populateFromFrustumLeft:-2 andRight:2 andBottom:-h/2 andTop:h/2 andNear:4 andFar:10];
    glUniformMatrix4fv(_projectionUniform, 1, 0, projection.glMatrix);

    CC3GLMatrix *modelView = [CC3GLMatrix matrix];
    [modelView populateFromTranslation:CC3VectorMake(0, 0, -7)];
    [modelView rotateBy:CC3VectorMake(20, -45, -20)];

    glUniformMatrix4fv(_modelViewUniform, 1, 0, modelView.glMatrix);

    glViewport(0, 0, self.frame.size.width, self.frame.size.height);

    glVertexAttribPointer(_positionSlot, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), 0);
    glVertexAttribPointer(_colorSlot, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (GLvoid*) (sizeof(float) * 3));

    glDrawElements(GL_TRIANGLES, indicesSize/sizeof(Indices[0]), GL_UNSIGNED_SHORT, 0);

    [_context presentRenderbuffer:GL_RENDERBUFFER];
} 
```

这些方法大多直接来自本教程，并进行了最少的非相关修改（我认为）。

为了显示所有不同的视图，我需要做些什么吗？这种方法会奏效还是我应该做其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:00:22.517

我认为问题与在两个单独的视图中创建两个单独的 gl 上下文有关。如果您正在创建两个 glviews，您应该在两个视图之间共享相同的上下文（很高兴知道：这会强制视图位于同一个线程中，否则您稍后会遇到麻烦）。第二种选择是不断重置每个视图的上下文。我必须说我不喜欢这两种解决方案，如果你真的想深入了解 OpenGL，我强烈建议将两者合并到一个 glview 中。

更多信息在这里：[https ://stackoverflow.com/a/8134346/341358](https://stackoverflow.com/a/8134346/341358)

# javascript - 只修改这个类多个元素同一个类javascript jquery

> ID：11813449
> 
> 赞同：-3
> 
> 时间：2012-08-05T02:09:06.900
> 
> 标签：javascript, jquery

我有一个问题我有这个JavaScript隐藏函数元素本身在一个循环中，所以它有多个实例，我有这个代码但是当我点击切换按钮时，它会修改所有元素，而不仅仅是我点击的那个编码：

```
<script>
//<![CDATA[
 $(document).ready(function()
 {
   $('.aval').hide().before('');
   $('a.toggle-aval').click(function() 
       {
        $('.aval').slideToggle(1000);
        return false;
   });
 });
//]]>
</script> 
```

有没有办法让我只影响点击的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T02:25:26.603

如果 .aval 元素在 a.toggle-aval 中，试试这个：

```
<script>
//<![CDATA[
 $(document).ready(function(){
   $('.aval').hide().before('');
   $('a.toggle-aval').click(function() {
        $(this).find('.aval').slideToggle(1000);
        return false;
   });
 });
//]]>
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T02:26:28.137

用于`this`使用被点击的元素。假设 aval 类元素是切换点击的子元素。没有html是不可能的。如果它们是基于索引的，您可以通过使用单击的元素的索引来访问它

```
<script>
//<![CDATA[
 $(document).ready(function(){
   $('.aval').hide().before('');
   $('a.toggle-aval').click(function() {
        $(this).find('.aval').slideToggle(1000);
        // or
        $('.aval').eq( $(this).index() ).slideToggle(1000);
        return false;
   });
 });
//]]>
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T23:55:31.590

在我找到一个可以在循环中正常工作的变体之前，尝试了所有这些变体和六种变体，这里是：

```
<script>
//<![CDATA[
$(document).ready(function ()
              {
                    $('.container').each(function () {
                        $(this).find('.content').hide();
                        $(this).find('.button').click(function ()
                        {
                            $(this).parent().find('.content').slideToggle(1500);
                        });
                    });
              });
 //]]>
 </script>

.container , .content {display:block;}

 <span class="container">
  ......visable content
  <span class="button">
  more info 
  </span>

  <span class="content">
  .......hidden content
  </span>

  </span> 
```

# javascript - 尝试在数组中找到最接近的数字会导致 -Infinity JavaScript

> ID：11813451
> 
> 赞同：0
> 
> 时间：2012-08-05T02:09:27.737
> 
> 标签：javascript, loops, for-loop, closest, infinity

我试图在一个数组中找到最接近另一个（用户的浏览器高度）并且`h`是随机的数字`-Infinity`。这是我的代码。

```
function match_height() {
    var heights = [11, 630, 693, 756, 819, 882, 945, 1008, 1071, 1134, 1197, 1260, 1323, 1386, 1449, 1512, 1575, 1638, 1701, 1764, 1827, 1890, 1953, 2016, 2079, 2142, 2205, 2268, 2331, 2394, 2457, 2520];
    var posb = [];

    var browsery = $(window).height();

    for (var i = 0; i < heights.length; i++) {
        if (browsery > heights[i] && heights[i + 1] <= browsery) {
            posb.push(heights[i+1]);
        }
    }

    var h = Math.max.apply(Math, posb);

    $(".area").css("height", h + "px");
    $(".area").css("width", "100%");
    $(".ground").css("background", "url(scenes/ground/" + h + ".png)");
}

match_height(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T02:17:06.580

我想你想要：

```
if ( browsery > heights[i] && browsery <= heights[i+1] ) { 
```

在您当前的代码中，您的`posb`数组永远不会填充任何值。

* * *

顺便说一句，考虑一下：

```
var heights = [ ... ];
var winHeight = $( window ).height();
var i = 0;

while ( winHeight > heights[i] ) i++;

var h = heights[i]; 
```

**现场演示：http:** [//jsfiddle.net/489La/](http://jsfiddle.net/489La/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:16:57.290

您忘记考虑高度大于您列出的所有选项的情况。

如果你运行`Math.max.apply(Math,[])`，你会看到它的结果`-Infinity`。这意味着您的`posb`数组是空的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T02:24:03.097

这是我的版本：http: [//jsfiddle.net/pm7C3/](http://jsfiddle.net/pm7C3/)

```
function match_height() {
    var heights = [11, 630, 693, 756, 819, 882, 945, 1008, 1071, 1134, 1197, 1260, 1323, 1386, 1449, 1512, 1575, 1638, 1701, 1764, 1827, 1890, 1953, 2016, 2079, 2142, 2205, 2268, 2331, 2394, 2457, 2520];

    var match = null,
        closest = -1,
        browsery = $(window).height();

    for (var i = 0; i < heights.length; i++) {
        var diff = Math.abs(browsery - heights[i]);
        if (closest == -1 || diff < closest) {
            closest = diff;
            match = heights[i];
        }
    }

    $(".area").css("height", match + "px");
    $(".area").css("width", "100%");
    $(".ground").css("background", "url(scenes/ground/" + match + ".png)");
} 
```

# jquery - 在鼠标悬停表格行上显示/隐藏 Div

> ID：11813456
> 
> 赞同：1
> 
> 时间：2012-08-05T02:10:43.017
> 
> 标签：jquery, html-table

`table row`我想在鼠标悬停时显示位于每个 div 上的 div 。这样`div.tools`悬停的`table row`将在悬停时显示和隐藏。

这是我的桌子。

```
<table width="99%" cellspacing="0" cellpadding="2" class="main-box">
 <tbody><tr class="dataTableHeadingRow">
 <td class="dataTableHeadingContent">Categories / Products</td>
 <td class="dataTableHeadingContent" align="right">Action&nbsp;</td>
 </tr>

 <tr id="product_37">
   <td class="dataTableContent">
    <a href="#">Cotton Piqué Tennis Shirt</a>
    <div class="tools" style="display:none;">Tools Here</div>
   </td>
   <td class="dataTableContent" align="right">
    <img src="#/images/icon_arrow_right.gif" border="0" alt="">&nbsp;
   </td>
 </tr>

 <tr id="product_39">
   <td class="dataTableContent">
    <a href="#">Leather Plus Cotton Cut-Out Sling Back Sandal</a>
    <div class="tools" style="display:none;">Tools Here</div>
   </td>
   <td class="dataTableContent" align="right">
    <a href="#"><img src="#/images/icon_info.gif" border="0" alt="Info" title=" Info "></a>&nbsp;
   </td>
  </tr>

  <tr id="product_38">
    <td class="dataTableContent">
     <a href="#">Poly-Cotton 3/4 Sleeve Raglan Shirt</a>
    <div class="tools" style="display:none;">Tools Here</div>
    </td>
    <td class="dataTableContent" align="right">
     <a href="#">
     <img src="#/images/icon_info.gif" border="0" alt="Info" title=" Info "></a>&nbsp;
    </td>
  </tr>

  </tbody>
</table> 
```

我尝试了这个 jQuery 函数，但它不起作用。

```
jQuery(function() {
 jQuery('*[id^=product_]').hover(function(){
   jQuery(this).children("div.tools").show();
    },function(){
   jQuery(this).children("div.tools").hide();
    });
 });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T02:13:23.943

使用`.find()`而不是`.children()`.

您使用的[`.children()`方法仅找到直接子级，在您的 tr 元素的情况下将是 tds。](http://api.jquery.com/children/)

该[`.find()`方法](http://api.jquery.com/find/)在所有后代中查找，因此它将在 tds 内部查找您的 div。

您还遇到了一个语法错误，导致您的代码完全停止工作：最后有一个额外的关闭`});`应该被删除。

此外，与其使用 选择*所有*元素，不如仅选择`*`该表中的 tr 元素可能更有效：

```
jQuery(function() {
    jQuery('table.main-box tr[id^=product_]').hover(function() {
        jQuery(this).find("div.tools").show();
    }, function() {
        jQuery(this).find("div.tools").hide();
    });
});​ 
```

# jqplot - jqplot 没有使用日期轴渲染器正确缩放

> ID：11813457
> 
> 赞同：4
> 
> 时间：2012-08-05T02:11:41.977
> 
> 标签：jqplot, zooming

我正在使用 jqPlot（版本 1.0.2，我相信 - 2012 年 7 月 25 日发布）将一天的太阳能生产价值呈现为各种值。当我放大一天的一部分时，通常会呈现图表的错误区域。

这是情节选项 -

```
 var plotOptions = {
    series: [{ showMarker:false} ],
    axes: {
        xaxis:{
            renderer:jQuery.jqplot.DateAxisRenderer,
            tickOptions:{
                formatString:'%R'
            },
            min: data[0].time * 1000,
            max: data[data.length - 1].time * 1000
        },
        yaxis: {
            tickOptions: {
                formatString: '%.3f'
            }
        }
    },
    highlighter: {
        show : true,
        sizeAdjust: 7.5
    },
    cursor: {
        show : true,
        zoom: true,
        showToolTip: false
    }
}; 
```

数据是整个电气系统的 1 分钟样本，当前默认值为一个相腿上的交流电流（标准北美电气系统 -- 120/240 伏交流电源）。通常有 1,440 个样本，一天中的每一分钟都有一个样本。

我看到的情况是我将选择一个区域，通常是 4 或 6 小时，并且正在缩放数据的错误部分。例如，如果我选择午夜到上午 8 点，我会看到上午 4 点到上午 8 点（或者可能是上午 9 点，如果我放大一点点超过上午 8 点）反而放大了。这是相当一致的 - 显示范围的后半部分 - 但我也看到没有押韵或理由显示的实例，并且值可能被放大得如此接近我无法分辨是什么。

我试图从示例中大量窃取，但无济于事。我也尝试过限制我的数据集的大小，但这似乎没有多大帮助。

更新：我尝试从使用原始时间戳切换到使用 Date() 对象，但无济于事......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:06:44.247

我遇到了同样的问题。我无法切换到 Flot，虽然它也是一个很好的包。我进行了一些挖掘，并在 jqplot-users google 组中找到[了这个帖子，该组有答案。](https://groups.google.com/d/msg/jqplot-users/1WCSxy6vQWo/tE0IC0ApB18J)

这是简短的答案。src\plugins\jqplot.dateAxisRenderer.js 中有一个错误。该帖子说解决方法是在 dataAxisRenderer.js 文件中注释掉以下内容

```
min = new $.jsDate(min);
min = min.getTime() + min.getUtcOffset(); 
```

但是，我不确定是否

```
min = new $.jsDate(min);
min = min.getTime(); 
```

是否有必要，删除它*可能*是一个坏主意。我没有注意到任何问题，但是，我认为我们可以保留这些行并删除`min.getUtcOffset()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T01:48:41.253

不要低估[jqPlot](http://www.jqplot.com/)，它是一个用于构建具有视觉吸引力的图形和图表的出色插件，我建议您也看看[Flot](http://code.google.com/p/flot/)以构建具有缩放功能的图形。我都试过了，发现**Flot**对于这种要求更可靠。

使用 Flot 时配置**DateTime**轴的一些技巧（来自[Flot Reference](http://flot.googlecode.com/svn/trunk/API.txt)）：

Flot 中的时间序列支持基于 Javascript 时间戳，您可以看到这样的时间戳：

```
alert((new Date()).getTime()) 
```

在**.NET**中，您可以获得适当的时间戳：

```
public static int GetJavascriptTimestamp(System.DateTime input)
{
    System.TimeSpan span = new System.TimeSpan(System.DateTime.Parse("1/1/1970").Ticks);
    System.DateTime time = input.Subtract(span);
    return (long)(time.Ticks / 10000);
} 
```

[在这个SO question](https://stackoverflow.com/questions/2507235/jquery-flot-xaxis-time)中讨论了一些时间格式。

# php - MySQL SELECT 语句：多个项目和所有者信息

> ID：11813458
> 
> 赞同：0
> 
> 时间：2012-08-05T02:12:24.670
> 
> 标签：php, mysql, database

所以这里是一个例子：我有一个包含“艺术家”和“绘画”的数据库。我需要创建一个包含艺术家信息的页面（我从 URL 获取艺术家 ID）以及与该艺术家相关的每幅画，我都链接了两个表。

有没有办法只用一条语句来完成这个请求？

我试过这个：

```
SELECT * 
FROM artiste, toile 
WHERE artiste_id = {$id} AND 
      fk_artiste_id = artiste_id 
```

它有效，但由于我使用一段时间来获取数据，我得到了艺术家信息的 3 倍（因为有 3 幅画与该艺术家相关联），如果我按艺术家 ID 分组，我只会得到 1 位艺术家和这是第一幅画，不是全部。

谢谢你的时间！（请原谅我糟糕的英语）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T02:20:51.667

你得到的结果实际上是正常的。您实际上是从给定艺术家那里获取所有画作，并将艺术家的信息添加到每幅画中。您可以考虑进行两个查询，一个查询艺术家信息，一个查询绘画。或者您可以保留您的查询并确保在循环之前输出艺术家信息，然后在循环内输出绘画信息并跳过附加到它的艺术家信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T02:18:27.993

如果您只需要有关绘画的信息，您可以只查询该表的信息。

```
SELECT 
    toile.* 
FROM 
    artiste, toile 
WHERE 
    artiste.artiste_id = {$id} AND 
    toile.fk_artiste_id = artiste.artiste_id 
```

如果这不是与 MySQL 完全兼容，我很抱歉，我最近大部分时间都在使用 MS SQL。

编辑：另一种方法是使用`INNER JOIN`. 同样，如果有人可以纠正我在确切语法上的错误，它应该是这样的：

```
SELECT 
    toile.* 
FROM 
    toile INNER JOIN artiste ON artiste.artiste_id = toile.fk_artiste_id 
WHERE
    artiste.artiste_id = {$id} 
```

这两部分都需要在单独的查询中。如果您愿意，您需要为每组要检索的数据或所问的每个问题一个查询。如果问题是“我掌握的关于艺术家 X 的数据是什么？” 那么你应该做一个查询来回答这个问题。如果您的问题是“我拥有哪些图像是艺术家 X 的画作？” 那么这是另一个应该处理另一个查询的问题。

[http://sqlfiddle.com/#!3/47ff0/2](http://sqlfiddle.com/#!3/47ff0/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T02:31:04.973

只需执行两个查询。

使用 SQL，信息以表格格式返回，因此您将无法在单个查询中仅获得艺术家及其所有画作的一份副本。

另外，我注意到你使用了 {$id}，并且标签上写着 PHP，所以我必须推荐[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)来帮助你的应用程序的安全性和可维护性。不要乱用[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)漏洞（和错误）。

获得大量艺术家的副本实际上可能会更快，但这纯粹是性能优化。如果您担心性能，我最好的建议是停止担心性能。

# css - CSS 兄弟选择器（选择所有兄弟）

> ID：11813465
> 
> 赞同：56
> 
> 时间：2012-08-05T02:13:48.767
> 
> 标签：css, css-selectors

通常，我很擅长 CSS，但我似乎无法弄清楚这一点。如果我有一个结构

```
<div>
    <h2 class="open">1</h2>
    <h2>2</h2>
    <h2>3</h2>
    <h2>4</h2>
    <h2>5</h2>
</div> 
```

如何使用`.open`带有 CSS 的类来定位所有兄弟 h2？我的主要问题是兄弟选择器 ( `.open + h2`) 将只针对紧随其后的 h2 `.open`。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-08-05T02:15:21.950

`~`您可以使用而不是选择以下所有同级`+`：

```
.open ~ h2 
```

如果您需要选择所有`h2`元素，`.open`无论它们是否在之前或`.open`之后，则没有兄弟组合器。您需要`:not()`改用：

```
h2:not(.open) 
```

如果您需要将选择限制为`div`父母，则可以选择使用子组合器：

```
div > h2:not(.open) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-05T21:34:23.297

我知道这不是您问题的直接答案，但我发现它是一种更有效的方式来选择兄弟姐妹，只需选择父母的所有孩子，并像你一样为 open 指定一个唯一的类它在那里。所以代码是：

```
div h2 { } // apply the style for all "siblings" but really children
div h2.open { } // apply the style or cancel styles from the siblings 
```

这对我很有用，它不需要新的 CSS 规则或任何特殊的东西。

# php - 自博客开始以来每（天/月/年）的 WordPress 帖子数

> ID：11813466
> 
> 赞同：0
> 
> 时间：2012-08-05T02:14:03.540
> 
> 标签：php, wordpress

我希望回显自博客开始以来每月的帖子数量，以及没有帖子的几个月回显“0”。

这是我想要的输出：

1 月 1 日、2 月 3 日、3 月 8 日、4 月 3 日……

任何帮助都会很棒。谢谢，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:53:54.307

尝试使用[wp_count_posts](http://codex.wordpress.org/Function_Reference/wp_count_posts)内置函数。如果您想要一个工具来帮助公开内置的 wordpress 功能，请尝试[webmatrix](http://Microsoft.com/web/webmatrix)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:48:53.293

您需要编写自己的[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)然后遍历帖子并计算每个时间范围的结果。

此外，如果您需要计算特定时间范围内的结果，您可能需要查看 WP_Query 的[时间参数。](http://codex.wordpress.org/Class_Reference/WP_Query#Time_Parameters)

您可能还想尝试在[Wordpress Answers](http://wordpress.stackexchange.com)上发帖。

# xcode - Sparkle 始终保持最新

> ID：11813467
> 
> 赞同：2
> 
> 时间：2012-08-05T02:14:05.240
> 
> 标签：xcode, cocoa, sparkle

我最近将 Sparkle 框架 [ [http://sparkle-project.org/](http://sparkle-project.org/) ] 添加到我的可可应用程序中。当我向 appcast.xml 添加一个虚拟的新项目（1.1 版）并随后尝试从 1.0 版更新时，它说“XXX 1.0 当前是可用的最新版本”。

我已经有一段时间了，我已经阅读了很多次文档 [ [https://github.com/sparkle-project/Sparkle/wiki](https://github.com/sparkle-project/Sparkle/wiki) ]，但没有成功。

这是我的 Info.plist：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>BuildMachineOSBuild</key>
    <string>11E53</string>
    <key>CFBundleDevelopmentRegion</key>
    <string>en</string>
    <key>CFBundleDisplayName</key>
    <string>Snappi</string>
    <key>CFBundleExecutable</key>
    <string>Snappi</string>
    <key>CFBundleIconFile</key>
    <string>snappi_icon.icns</string>
    <key>CFBundleIdentifier</key>
    <string>com.snppi.Snappi</string>
    <key>CFBundleInfoDictionaryVersion</key>
    <string>6.0</string>
    <key>CFBundleName</key>
    <string>Snappi</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleShortVersionString</key>
    <string>1.0</string>
    <key>CFBundleSignature</key>
    <string>????</string>
    <key>CFBundleVersion</key>
    <string>100</string>
    <key>DTCompiler</key>
    <string>com.apple.compilers.llvm.clang.1_0</string>
    <key>DTPlatformBuild</key>
    <string>4E3002</string>
    <key>DTPlatformVersion</key>
    <string>GM</string>
    <key>DTSDKBuild</key>
    <string>11E52</string>
    <key>DTSDKName</key>
    <string>macosx10.7</string>
    <key>DTXcode</key>
    <string>0433</string>
    <key>DTXcodeBuild</key>
    <string>4E3002</string>
    <key>LSApplicationCategoryType</key>
    <string>public.app-category.productivity</string>
    <key>LSBackgroundOnly</key>
    <false/>
    <key>LSMinimumSystemVersion</key>
    <string>10.6</string>
    <key>LSUIElement</key>
    <string>1</string>
    <key>NSHumanReadableCopyright</key>
    <string>Copyright © 2012 Marshall Moutenot All rights reserved.</string>
    <key>NSMainNibFile</key>
    <string>StatusBar</string>
    <key>NSPrincipalClass</key>
    <string>NSApplication</string>
    <key>SUFeedURL</key>
    <string>http://app.snppi.com/Snappi.xml</string>
    <key>SUPublicDSAKeyFile</key>
    <string>dsa_pub.pem</string>
</dict>
</plist> 
```

还有我的 appcast.xml（重命名为 Snappi.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:sparkle="http://www.andymatuschak.org/xml-namespaces/sparkle"  xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Snappi</title>
    <link>http://app.snppi.com/Snappi.xml</link>
    <description>
      Send snapshots and files to friends in seconds. Snappi automatically generates a short link, so all you have to do is press paste.    
    </description>
    <language>en</language>
    <item>
      <title>Version 1.1</title>
      <sparkle:releaseNotesLink>
    http://app.snappi.com
      </sparkle:releaseNotesLink>
      <pubDate>Sat, 4 Aug 2012 20:26:11 +0000</pubDate>
      <enclosure 
    url="http://app.snppi.com/Snappi_1_1.dmg"
    sparkle:version="1.1"
    length="10518528"
    type="application/octet-stream" 
    sparkle:dsaSignature="MC0CFHaN/qB0aAb6V9rHMVHCLoBrTyJ8AhUAl0Wazod0rtzpxsvIaL0aYTg+KpQ=" 
    />
    </item>
    <item>
      <title>Version 1.0</title>
      <sparkle:releaseNotesLink>
    http://app.snappi.com
      </sparkle:releaseNotesLink>
      <pubDate>Sat, 4 Aug 2012 18:26:11 +0000</pubDate>
      <enclosure 
    url="http://app.snppi.com/Snappi_1_0.dmg"
    sparkle:version="1.0"
    length="10518528"
    type="application/octet-stream" 
    sparkle:dsaSignature="MC0CFHaN/qB0aAb6V9rHMVHCLoBrTyJ8AhUAl0Wazod0rtzpxsvIaL0aYTg+KpQ=" 
    />
    </item>
  </channel>
</rss> 
```

谢谢！

补充：再想一想，这是否会导致与“你已经是最新的”不同的行为？我觉得会，但我不确定。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-06T01:03:56.503

Sparkle 将 appcast 中的 sparkle:version 属性与 plist 中的 CFBundleVersion 进行比较（这是机器可读的版本）。

因此，在这里，您的 CFBundleVersion (100) 表示您有一个较新的 (>1.0) 版本，即 appcast 中的版本。

另一方面，CFBundleShortVersionString（对应于演员表中的 sparkle:shortVersionString）用于“用户可显示”版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T11:39:31.087

我建议坚持使用 Major.Minor.Batch (0.4.12) 版本控制，并在应用程序演员表和项目本身的 info.plist 文件 (CFBundleShortVersionString) 中保持相同。你也可以试试这个与 Sparkle 无缝集成的无忧构建服务器[http://amtourky.me/2016/01/20/mac-os-x-continuous-delivery-sparkler-the-missing-build-server-for -火花/](http://amtourky.me/2016/01/20/mac-os-x-continuous-delivery-sparkler-the-missing-build-server-for-sparkle/)

# html - 为什么Chrome会移动我的表格标签并选择何时选择焦点？

> ID：11813468
> 
> 赞同：0
> 
> 时间：2012-08-05T02:14:25.330
> 
> 标签：html, css, forms, google-chrome, css-float

我有一个简单的地址输入表格。在 IE9 和 Firefox 10.0.2 中，表单显示得非常好。

在 Chrome 中，表单在初始加载时显示良好。但是，当我给一个 SELECT 焦点时，标签和 SELECT 都向右移动了大约 100px：

![镀铬屏幕抓取](../Images/8b6e1751d9a107fb231c58251344722a.png)

当我尝试使用 Chrome 的自动填充时，情况变得更糟：

![Chrome 自动填充屏幕抓取](../Images/5bb4c4d8222ea6153875c03afa6e5650.png)

好随便喔。现在，我可以遍历整个 HTML 布局、CSS 规则和正在使用的 JavaScript/jQuery，但是，我正在寻找关于可能导致这种情况的一些想法。下面是用于相关元素的 HTML 和 CSS。

**HTML：**

```
<form id="editAddressForm" name="editAddressForm" action="" method="post">
    <fieldset>
        <label>Name/Attention *:</label>
        <cfoutput>
        <input name="shipToName" value="#FORM.shipToName#" maxlength="40" />
        </cfoutput>
        <br />
        <label>Company:</label>
        <cfoutput>
        <input
            name="shipToCompany"
            value"#FORM.shipToCompany#"
            maxlength="40" />
        </cfoutput>&nbsp;
        <br />
        <label>Address 1 *:</label>
        <cfoutput>
        <input
            name="shipToAddressLine1"
            value="#FORM.shipToAddressLine1#"
            maxlength="40" />
        </cfoutput>&nbsp;
        <br />
        <label>Address 2:</label>
        <cfoutput>
        <input
            name="shipToAddressLine2"
            value="#FORM.shipToAddressLine2#"
            maxlength="40" />
        </cfoutput>&nbsp;
        <br />
        <label>Address 3:</label>
        <cfoutput>
        <input
            name="shipToAddressLine3"
            value="#FORM.shipToAddressLine3#"
            maxlength="40" />
        </cfoutput>
        <br />
        <label>City *:</label>
        <cfoutput>
        <input name="shipToCity" value="#FORM.shipToCity#" maxlength="30" />
        </cfoutput>
        <br />
        <label>State *:</label>
        <oftags:selectState name="shipToState" selectedValue="#FORM.shipToState#">
        <br />
        <label>Zip *:</label>
        <cfoutput>
        <input
            name="shipToPostalCode"
            value="#FORM.shipToPostalCode#"
            maxlength="10" />
        </cfoutput>
        <br />
        <label>Phone:</label>
        <cfoutput>
        <input
            name="shipToPhone"
            value="#REQUEST.UDFLib.String.PhoneFormat(FORM.shipToPhone)#"
            maxlength="16"/>
        </cfoutput>
        <br />
        <label>E-Mail:</label>
        <cfoutput>
        <input
            name="shipToEmailAddress"
            value="#FORM.shipToEmailAddress#"
            maxlength="60"/>
        </cfoutput>
        <br />
    </fieldset>
    <label>&nbsp;</label>
    <input type="submit" value="Submit" />
    <br />
</form> 
```

**CSS：**

```
#editAddressForm {
    text-align: left;
    width: 720px;
}

#editAddressForm label {
    float: left;
    width: 140px;
    font-weight: bold;
    margin: 6px 0;
}

#editAddressForm fieldset {
    border: none;
}

#editAddressForm fieldset input,
#editAddressForm fieldset select {
    width: 200px;
}

#editAddressForm br {
    clear: left;
}

#editAddressForm select  {
    margin: 3px 0;
} 
```

**jQuery/JavaScript：**

```
<script type="text/javascript">
    $(function(){
        /*
         * Page Initialization
         */
        $("input[name='shipToName']").focus();
    })
</script>

<script type="text/javascript">
    $(function(){
        $("#stateSelect").selectSelectedValue();
    });
</script> 
```

jquery-select.js：

```
(function($){
    $.fn.extend({
        selectSelectedValue: function(callback) {
            var _selectedValue = $(this).prop("selectedValue");

            $(this).find("option").each(function(){
                if ($(this).text() == _selectedValue)
                    $(this).prop("selected", true);
            });

            $(this).change();

            if($.isFunction(callback))
                callback.call(this);
        },

        selectDefaultOption: function(callback) {
            $(this).find("option:first").prop("selected", true);

            $(this).change();

            if($.isFunction(callback))
                callback.call(this);
        },

        disable: function(){
            $(this).prop("disabled", true);
        },

        enable: function(){
            $(this).prop("disabled", false);
        }
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:24:06.987

尝试在您的，或者更好的是，为标签和输入的父容器设置一个`line-height`CSS 。`#editAddressForm label`还可以尝试`display: block`父元素并设置高度和/或`overflow: hidden`.

# django - Heroku 上的 Redis 连接被拒绝

> ID：11813470
> 
> 赞同：1
> 
> 时间：2012-08-05T02:15:26.443
> 
> 标签：django, heroku, redis, celery

我正在尝试在 Heroku 上设置 Redis 作为 Celery 的后端。我让它在本地工作，但在 Heroku 上，我收到此错误（在 celery 任务完成后）：ConnectionError：连接 localhost:6379 的错误 111。拒绝连接。

从我从其他答案中可以看出，这表明 redis 服务器不在线，尽管 REDISTOGO_URL 似乎配置正确。

在 settings.py 中：

```
REDIS_URL = os.getenv('REDISTOGO_URL', 'redis://localhost:6379/0') 
```

在tasks.py中：

```
from celery import Celery
celery = Celery('tasks', backend=settings.CELERY_RESULT_BACKEND, broker=settings.REDIS_URL) 
```

版本：

```
celery==3.0.5
celery-with-redis==3.0
django-celery==3.0.4
kombu==2.3.2
redis==2.6.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T02:20:45.030

看起来您没有使用`REDISTOGO_URL`，因为错误消息指出`localhost`

尝试检查：

1.  heroku 配置，只是为了检查 REDISTOGO_URL 是否在配置中设置
2.  转到heroku上的shell（像[这样](https://devcenter.heroku.com/articles/django#using-the-django-shell)），看看python是否正确获取url

你是否在同一个应用程序上运行 celery，如果不检查其他服务器的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:22:22.987

发现了问题。我将 celery 后端配置为字符串“redis”而不是 REDIS_URL。

我有什么：

```
CELERY_RESULT_BACKEND = 'redis' 
```

它应该是什么：

```
CELERY_RESULT_BACKEND = REDIS_URL 
```

德米特里 - 感谢您的帮助。

# php - 无效的复选框组

> ID：11813473
> 
> 赞同：1
> 
> 时间：2012-08-05T02:16:24.887
> 
> 标签：php, checkbox

我有一个单选按钮列表，这些单选按钮都被分成几组，在这种情况下特别是学校课程。

```
<label class="control-label" for="optionsCheckboxList">Math</label>
<div class="controls">
    <label class="checkbox">
        <input type='checkbox' name='class[math1]' value='1' id="mathhl">
        High Level
    </label>
    <label class="checkbox">
        <input type='checkbox' name='class[math2]' value='1' id="mathsl">
        Standard Level
    </label>
    <label class="checkbox">
        <input type='checkbox' name='class[math3]' value='1' id="mathst">
        Studies
        </label>
</div>
<hr>
<label class="control-label" for="optionsCheckboxList">Physics</label>
<div class="controls">
    <label class="checkbox">
        <input type="checkbox" name='class[phys1]' value='1' id="physhl">
        High Level
    </label>
</div> 
```

在此示例中，数学有多个选项，分别是高级、标准和研究。我想知道一种方法，这样当一个被选中时，其他的被停用，但只适用于同一个班级。因此，例如，如果有人选择 Math High Level，则其他两个数学课程将被禁用（直到未选中），但物理不受影响。

请注意，我有很多课程，所以我想要一些适用于多组复选框的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:27:41.493

我建议您阅读 MDN 上的注释：[https ://developer.mozilla.org/en-US/docs/HTML/Element/Input](https://developer.mozilla.org/en-US/docs/HTML/Element/Input)

关于`type="radio"`他们说：

> 您必须使用 value 属性来定义此项目提交的值。
> 
> name 属性值相同的单选按钮在同一个“单选按钮组”中；一次只能选择组中的一个单选按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:11:35.467

如果您为每组**单选按钮使用****相同**的名称和**不同**的值，您将获得所需的内容。

 **代码：

```
<?php
if(isset($_POST["submit"])){
    echo "You selected:<br />\r\n<pre>";
    print_r($_POST);
    echo "</pre>";
}
?>
<form action="" method="POST">
<label class="control-label" for="optionsCheckboxList">Math</label>
<div class="controls">
    <label class="checkbox">
        <input type='radio' name='class[math]' value='hl' id="mathhl">
        High Level
    </label>
    <label class="checkbox">
        <input type='radio' name='class[math]' value='sl' id="mathsl">
        Standard Level
    </label>
    <label class="checkbox">
        <input type='radio' name='class[math]' value='st' id="mathst">
        Studies
        </label>
</div>
<hr>
<label class="control-label" for="optionsCheckboxList">Physics</label>
<div class="controls">
    <label class="checkbox">
        <input type="radio" name='class[phys]' value='hl' id="physhl">
        High Level
    </label>
</div>
<hr>
<input type="submit" name="submit" value="Submit" />
</form> 
```

[现场演示](http://codepad.viper-7.com/Wm5JNh) 此设置满足您描述的所有条件：

你说`So, for example, if someone chooses Math High Level, the other two math classes are disabled (until it is unchecked), but Physics is unaffected.`

`Please note, I have a ton of classes, so I'd like something that works for many groups of check boxes.`

因此，使用单选按钮，`class[math]`组，一次只能选择一种类型的类。数学和物理选择不会相互影响或任何其他课程。

但是，在单选按钮的情况下，您还应该考虑让用户选择一个选项`No Class`，因为一旦在一组中选择了任何单选按钮，就不能取消选中它（不像复选框可以取消选中）。所以你可以放一些选项，比如`No Class`

如果您想使用复选框，请参阅此问题：[如何禁用启用基于另一个复选框的复选框？](https://stackoverflow.com/questions/11266340/how-to-disable-enable-a-checkbox-based-on-another-checkbox)

这个问题和接受的答案使用 jQuery，并且与您有类似的要求（成吨的组），但每个组中只处理两个复选框。**

# database - 当用户可以创建测验和问题的流动数据时的数据库设计

> ID：11813480
> 
> 赞同：0
> 
> 时间：2012-08-05T02:17:42.967
> 
> 标签：database, tsql, database-design

假设我正在开发一个允许任何用户创建测验并将它们分配给任何其他用户的应用程序。应记录这些测验的问题和答案。

该应用程序的目标是能够在特定时间重新创建测验并显示特定用户选择的答案。我意识到我缺少日期字段，但在我这样做之前，我需要帮助！

# 我该如何处理用户可以创建带有 1 个问题的测验而另一个用户决定创建每个随机类型的 100 个问题的事实？.

我应该在 QuizResults 表中创建一个可以存储每种类型的questionn 的列吗？我应该在一列中序列化所有答案吗？我应该怎么办？

一些显而易见的事情值得一提：

*   测验有很多问题。*   测验可以分配给用户。*   用户可以参加许多测验。*   一些答案将是多项选择，一些将是段落，其他匹配，对或错。

![在此处输入图像描述](../Images/b17e0bd17d3a0ea87c825705dc7477b4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T02:30:17.767

我强烈建议您至少看一下此类设计的非关系数据库。我这么说是作为关系技术的两个十年用户，而不是反 SQL 狂热者。

我在过去了解到，这些面向调查的应用程序必须在内容和流程以及问题组织的复杂性方面提供灵活性，最好由文档存储（如[MongoDB](http://www.mongodb.org/) ）或类似或面向 XML 的存储（如作为[MarkLogic](http://www.marklogic.com/)（可能很昂贵）。

您可以通过附加到内容的元数据来管理答案结构的“随机性”或变化，您还可以解决调查中经常出现的版本控制问题。

最终，即使您使用的是关系数据库，我也会建议您研究内容管理系统插件。

只是一个意见。

# objective-c - 完成处理程序块内的 NSSavePanel nil

> ID：11813487
> 
> 赞同：2
> 
> 时间：2012-08-05T02:20:16.393
> 
> 标签：objective-c, cocoa, osx-lion, nssavepanel

我正在尝试将视图的内容保存到 PDF 文件中。您看到的代码位于从 NSView 继承的类中：

```
- (IBAction) savePDF: (id) sender
{
    __block NSSavePanel* panel=[NSSavePanel savePanel];
    [panel setAllowedFileTypes: [NSArray arrayWithObject: @"pdf"]];
    [panel beginSheetModalForWindow: [self window] completionHandler: ^(NSInteger result)
     {
         if(result==NSOKButton)
         {
             NSCAssert(panel!=nil,@"panel is nil");
             NSData* data=[self dataWithPDFInsideRect: [self bounds]];
             NSError* error;
             BOOL successful=[data writeToURL: [panel URL] options: 0 error: &error];
             if(!successful)
             {
                 NSAlert* alert=[NSAlert alertWithError: error];
                 [alert runModal];
             }
         }
     }];
    panel=nil;
} 
```

该方法由菜单触发。
问题是断言失败：

```
NSCAssert(panel!=nil,@"panel is nil"); 
```

即使我将 NSSavePanel 指针声明为 __block。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T03:09:02.270

实际上，答案是删除说明`__block`符。

我在有/没有它的情况下运行了你的代码。断言失败，没有它（即`__block`说明符）工作。

现在，回答为什么：

我想说明`__block`符是为全局/实例变量而不是局部变量制作的，不过我可能是错的。

* * *

X'D ...我不知道是什么击中了我，但请检查一下：

```
NSSavePanel* panel=[NSSavePanel savePanel];

[panel setAllowedFileTypes: [NSArray arrayWithObject: @"pdf"]];
[panel beginSheetModalForWindow: [self window] completionHandler: ^(NSInteger result)
 {
     if(result==NSOKButton)
     {
         dispatch_async(dispatch_get_main_queue(), ^{
             NSCAssert(panel!=nil,@"panel is nil");
             NSData* data=[self dataWithPDFInsideRect:[self bounds]];
             NSError* error;
             BOOL successful=[data writeToURL: [panel URL] options: 0 error: &error];
             if(!successful)
             {
                 NSAlert* alert=[NSAlert alertWithError: error];
                 [alert runModal];
             }
         });
     }
 }];
panel=nil; 
```

我刚刚决定，让我将它包装在一个 GCD 块中，然后在主线程上绘制它。您的代码运行良好。该视图正在按预期绘制到 PDF，我可以确认：D。

至于这个问题，似乎很明显。在后台线程和绘图中调用边界是禁止的。

这很有趣，谢谢：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T12:44:34.727

解决方案：由于未知原因，这对我来说仍然是一个谜，如果我对视图类进行 IBAction，[self bounds] 总是返回 NSZeroRect。在其他方法中它返回正确的值。所以我解决了这个问题，删除来自 NSSavePanel 的 __block 说明符并重写（也重新绑定）应用程序委托类中的方法。

# ruby-on-rails - Rails 模型拆分为多个定义

> ID：11813488
> 
> 赞同：2
> 
> 时间：2012-08-05T02:20:28.123
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activesupport

我的几个 Rails 模型中有一些逻辑，我想将它们拆分为单独的文件。

具体来说，这是这些模型独有的逻辑，而不是模型之间共享的逻辑。对于这种情况，我知道这样的问题/混合和[问题](https://stackoverflow.com/questions/404785/how-to-organize-rails-models-that-are-too-fat)。

由于我们在这里处理 Ruby，似乎要走的路是拥有多个类定义。例如：

```
# in app/models/user.rb
class User < ActiveRecord::Base
  ...
end

# in app/lib/integrations/ext/user.rb
class User
  ...
end 
```

我在这里面临的问题现在需要在正确的位置进行模型扩展。由于自动加载，我被迫明确要求模型和扩展。我目前的最大努力是在初始化器中预加载用户模型及其扩展：

```
# in config/initializers/model_extensions.rb
require_dependency 'models/user'
require_dependency 'integrations/ext/user.rb' 
```

但这会产生其他 gem 的问题（例如，加载 User 模型时未加载设计）。

有什么好方法可以做到这一点，还是我在这里不自在？利用 Ruby 的开放类是 Rails 之外的常见习惯用法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T02:26:57.450

将以下内容添加到`config/application.rb`

```
config.autoload_paths += Dir["#{config.root}/lib"] 
```

这将自动加载`integrations/ext`Rails 需要的类。*（这恰好也是 DHH 的要点包含`app/model/concerns`文件的方式）。*

*（我更改了我的自动加载以匹配 @denis.pelin 所拥有的。我错过了它`integrations/`，`lib/`所以上面应该足以自动加载）*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:30:05.900

如果我理解正确，您要做的是将仍然特定于模型**的代码***（在多个模型之间不常见，表明 mixin 是正确的方法）* **从**模型中移出以使其保持“精简”；模型中实际上看起来“关闭”的代码。

当我看到模型中的代码变得有点过于复杂或涉及直接在模型中看起来错误的任务时，我会在`lib/`. 对于*（一个简化的）*示例，给定一个类似的模型

```
class User < ActiveRecord::Base

  def self.create_admin!(attrs)
    # complex logic to setup admin user account here
    newly_created_user.deliver_confirmation_email!
  end

  def deliver_confirmation_email!
    # sends email off to user represented by this class instance
  end
end 
```

这对我来说看起来很糟糕。但是，在我的控制器中的操作中有几十行上述方法的代码`create`看起来更糟，更难测试。

我将把这段代码移到`lib/MyNamespace/user_repo.rb`

```
module MyNamespace
  module UserRepo
    extend self

    def create_admin!(attrs)
      # complex logic to setup admin user account here
      deliver_confirmation_email!(newly_created_user)
    end

    private
      def deliver_confirmation_email!(user)
        # sends email off to user represented by this class instance
      end
  end
end 
```

现在，在`create`我的控制器中的操作中，而不是调用

```
User.create_admin!(params[:user]) 
```

我会打电话给

```
MyNamespace::UserRepo::create_admin!(params[:user]) 
```

`MyNamespace::UserRepo`负责管理管理员帐户的记录发生的事情，`User`让我的控制器操作*和*我的模型都干净整洁。`MyNamespace::UserRepo`由于这种分离，它也更容易测试。

这仍然不能解决您在获取 rails 以要求您正在寻找的代码时遇到的问题，但可能会为您尝试实现的目标提供替代解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T08:27:39.400

在我的一个应用程序中，我在以下位置取消了自动加载行的注释`application.rb`：

```
# config/application.rb
config.autoload_paths += %W(#{config.root}/lib) 
```

lib目录中的一些模块：

```
# lib/some_module.rb
module SomeModule
  def some_method
  end
end 
```

并包含在模型中：

```
# app/models/user.rb
class User < ActiveRecord::Base
  include SomeModule
end 
```

现在用户实例有`some_method`

# hibernate - grails 1.3.9 应用程序中的 EHCache 默认值

> ID：11813489
> 
> 赞同：1
> 
> 时间：2012-08-05T02:20:33.690
> 
> 标签：hibernate, grails, ehcache, default-value

grails 1.3.9 应用程序中 ehcache 的默认值是什么？特别是我对查询缓存值感兴趣；我通过 postgres 的 psql 删除了几行，但我没有看到我的应用程序中反映的更改。我还没有将 ehcache.xml 文件添加到 conf 目录中。我什至重新启动了 grails 应用程序，数据仍然显示在报告中。没有我可以删除的任何缓存文件作为解决方法吗？

更新：我添加了以下 ehcache.xml 配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="ehcache.xsd" >
<diskStore path="/tmp/ehcache_t2"/>
<cacheManagerEventListenerFactory class="" properties=""/>
<defaultCache
   maxElementsInMemory="10000"
   eternal="false"
   timeToLiveSeconds="120">

</defaultCache>
<cache name="org.hibernate.cache.UpdateTimestampsCache"
  maxElementsInMemory="10000"
  timeToIdleSeconds="300"
   />
<cache name="org.hibernate.cache.StandardQueryCache"
  maxElementsInMemory="10000"
  timeToIdleSeconds="30"
   />
</ehcache> 
```

但是 StandardQueryCache 的 timeToIdleSeconds="30" 也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:50:49.593

Grails 将在 conf 目录中查找 ehcache.xml。如果没有找到，它将使用你的类路径中的那个，看看 ehcache-core.jar。您将看到一个名为**ehcache-failsafe.xml**的文件，您可以在其中找到：

```
<defaultCache
            maxElementsInMemory="10000"
            eternal="false"
            timeToIdleSeconds="120"
            timeToLiveSeconds="120"
            overflowToDisk="true"
            maxElementsOnDisk="10000000"
            diskPersistent="false"
            diskExpiryThreadIntervalSeconds="120"
            memoryStoreEvictionPolicy="LRU"
            /> 
```

要使用查询缓存，您必须在 Datasource.groovy 中进行配置：

```
hibernate {
    cache.use_second_level_cache=true
    cache.use_query_cache=true
    cache.provider_class='org.hibernate.cache.EhCacheProvider'
} 
```

虽然，就像@GreyBeardedGeek 指出的那样，EhCache 是一个直写缓存。它只会缓存通过休眠及其二级缓存操作的对象。如果您在数据库中编写 sql 查询，它不会在缓存中缓存对象。

要更深入地了解它，请查看[此处](http://ehcache.org/documentation/recipes/grails)和[此处](http://www.ehcache.org/documentation/user-guide/configuration#dynamically-changing-cache-configuration)。

# c - libudev 返回重复的 USB 设备

> ID：11813492
> 
> 赞同：0
> 
> 时间：2012-08-05T02:20:55.543
> 
> 标签：c, linux, usb, udev

我正在创建一个程序来列出 Linux 中的所有 USB 设备（在我的例子中是 Ubuntu）。我一直在关注本教程[http://www.signal11.us/oss/udev/](http://www.signal11.us/oss/udev/)并将子系统从“hidraw”更改为“usb”。

它列出了设备，但它包含重复项。

我显然可以使用我的代码删除重复项，但我想知道您是否知道如何以不会返回重复项的方式设置设备枚举。

如果您想查看我的代码（没有太大变化），请访问[https://github.com/DiogoNeves/LinuxUsbTest](https://github.com/DiogoNeves/LinuxUsbTest)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:12:56.887

对于我的系统，我看到我的 USB 摄像头重复了，但这是正确的行为，因为它占用了 udev 中的多个插槽。当我这样做时`udevadm info --attribute-walk --name=video0`，我会看到 USB 端点的条目和 USB 设备的条目。如果一个设备有很多端点，无疑会在 udev 中多次列出。要删除“重复项”，您可以过滤仅存在于父 USB 设备而非端点中的其他属性。

如果您正在扫描 USB 设备，使用它可能更有意义，`libusb-1.0`因为它具有 USB 设备的“更好”视图。

# json - 从 TeamCity 的 RESTful 查询返回 JSON

> ID：11813495
> 
> 赞同：7
> 
> 时间：2012-08-05T02:21:33.523
> 
> 标签：json, teamcity

根据[Teamcity REST API](http://confluence.jetbrains.net/display/TW/REST+API+Plugin)

我们可以使用以下方式获取 XML 数据

```
curl -v --basic --user USERNAME:PASSWORD --request POST "http://teamcity:8111/httpAuth/app/rest/users/" --data @data.xml --header "Content-Type: application/xml" 
```

我们可以对 JSON 做同样的事情吗？

```
 curl -v --basic --user USERNAME:PASSWORD --request POST "http://teamcity:8111/httpAuth/app/rest/users/" --data @data.json --header "Content-Type: application/json" 
```

两者，返回

```
HTTP/1.1 200 正常
日期：2012 年 8 月 5 日星期日 02:18:36 GMT
服务器：Apache-Coyote/1.1
Pragma：无缓存
过期：1970 年 1 月 1 日星期四 00:00:00 GMT
缓存控制：无缓存
缓存控制：无存储
内容类型：应用程序/xml

```

因此，内容类型：xml

我怎样才能得到 JSON 响应。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-05T02:35:25.257

您需要设置`Accept`标题而不是`Content-type`标题

```
curl -v --basic --user USERNAME:PASSWORD --request POST "http://teamcity:8111/httpAuth/app/rest/users/" --data @data.json --header "Accept: application/json" 
```

# php - 激活 Twitter Bootstrap 导航栏链接

> ID：11813498
> 
> 赞同：39
> 
> 时间：2012-08-05T02:21:57.500
> 
> 标签：php, jquery, twitter-bootstrap

使 Twitter Bootstrap 导航栏中的活动链接加粗的标准方法是什么？很明显，链接通过获得“活动”类来获得活动外观。例如，下面的`Home`链接是活动的。当我单击导航栏中的任何链接时，是否应该使用 jQuery 从`li`元素中删除所有类，然后将该`active`类添加到我已经标识的链接中？

```
<ul class="nav">
<li class="active"><a href="#">Home</a></li>
<li><a href="#">Link 2</a></li>
<li><a href="#">Link 3</a></li>
</ul> 
```

**编辑**：我包括

```
<script type="text/javascript">
$('.nav li a').on('click', function() {
    alert('clicked');
    $(this).parent().parent().find('.active').removeClass('active');
    $(this).parent().addClass('active');
});
</script> 
```

在链接之后。单击链接时会出现警报，但未将“活动”类添加到链接中。

这是我所有的导航栏 HTML：

```
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="#">AuctionBase</a>
            <div class="nav-collapse">
                    <ul class="nav">
                        <li><a href="home.php">Search</a></li>
                        <li><a href="about.php">About</a></li>
                    </ul>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-05T05:47:54.373

您需要确保将*活动*类设置为请求响应的一部分（在页面加载时），而不是在用户单击链接以请求不同页面之前。

首先，您需要确定哪些`navlink`应该设置为活动，然后将*活动*类添加到`<li>`. 代码看起来像这样

**由询问者测试**：

**php文件中的HTML**

`<li>`在传递链接目标请求 uri的标记中内联调用 php 函数

```
<ul class="nav">
    <li <?=echoActiveClassIfRequestMatches("home")?>>
        <a href="home.php">Search</a></li>
    <li <?=echoActiveClassIfRequestMatches("about")?>>
        <a href="about.php">About</a></li>
</ul> 
```

**PHP 函数**

简单的 php 函数需要比较传入的请求 uri，如果它匹配当前正在呈现的页面，则输出*活动*类

```
<?php 

function echoActiveClassIfRequestMatches($requestUri)
{
    $current_file_name = basename($_SERVER['REQUEST_URI'], ".php");

    if ($current_file_name == $requestUri)
        echo 'class="active"';
}

?> 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-08-01T14:49:05.367

[http://totalprogus.blogspot.sk/2013/12/bootstrap-add-active-class-to-li.html](http://totalprogus.blogspot.sk/2013/12/bootstrap-add-active-class-to-li.html)

本教程为这个“问题”提供了一个很好的终极解决方案。不久前我正在处理它并且对我来说工作得很好，也可以定制

```
$(document).ready(function() {
    $('a[href="' + this.location.pathname + '"]').parent().addClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-24T16:31:26.510

如果您不想处理服务器端并且在所有href都很简单的情况下，例如'/page.php'，您可以调用

```
$('.your-nav-container').find('a[href="' + location.pathname + '"]').parents('li').addClass('active'); 
```

页面加载后。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-08-05T02:27:42.617

你可以试试：

```
$('.nav li a').on('click', function() {
    $(this).parent().parent().find('.active').removeClass('active');
    $(this).parent().addClass('active').css('font-weight', 'bold');
}); 
```

不过最好给你`nav`一个`id`属性，因为你可能在一个页面上有多个导航`nav`类。

```
$('#main-nav li a').on('click', function() {
    $(this).parent().parent().find('.active').removeClass('active');
    $(this).parent().addClass('active').css('font-weight', 'bold');
}); 
```

或者，`.css('font-weight', 'bold')`您可以将其放在样式表中，而不是使用 ：

```
.active {
    font-weight: bold;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-14T08:36:14.547

在页面底部添加以下脚本：

```
<script>
    $(document).ready(function() {
        var url = this.location.pathname;
        var filename = url.substring(url.lastIndexOf('/')+1);
        $('a[href="' + filename + '"]').parent().addClass('active');
    });
</script> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-03T08:07:30.300

Chris Moutray 您的回答对我的软件开发帮助很大（我正在使用 ZendFramework）。我写了这个视图助手：

```
<?php

class Zend_View_Helper_ActiveOrNot {

    function activeOrNot ( $requestUri ) { 

        $current_file_name = basename($_SERVER['REQUEST_URI'], ".php");

        if ($current_file_name == $requestUri)

            echo 'class="active"';

    }   

} 
```

在这种情况下，我在视图中调用这个助手：

```
<?php $this -> activeOrNot ( "public" ); 
```

谢谢你！！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-17T09:45:53.263

你可以用 CSS 解决它。

在每个页面的正文中添加一个类：

```
<body class="home"> 
```

或者，如果您在联系页面上：

```
<body class="contact"> 
```

然后在创建样式时考虑到这一点：

```
ul li:hover, body.home a.home, body.contact a.contact { background-color: #000; } 
ul li:hover a, body.home li.home a, body.contact li.contact a { color: #fff; } 
```

最后，将类名应用于您的列表项：

```
<ul>
  <li class="home"><a href="index.php">Home</a></li>
  <li class="contact"><a href="contact.php">Contact Us</a></li>
  <li class="about"><a href="about.php">About Us</a></li>
</ul> 
```

这一点，每当您在 body.home 页面上时，您的 li.home 链接将具有默认样式，表明它是当前页面。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-01T09:51:41.723

如果您将 $pageTitle 分配给页面名称，则可以在没有 javascript 的情况下执行此操作

```
<ul class="nav navbar-nav">

      <li <?php if ($pageTitle == "Website Development") {echo 'class="active"';} ?>>
      <a href="website-development.php">
       Web Development
      </a>
      </li>...</ul> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-15T10:10:43.693

只需将以下代码放入“head”部分。

```
<script type="text/javascript">
$(document).ready(function () {
$("li a[href='" + location.href.substring(location.href.lastIndexOf("/") + 1, 255) + "']").addClass("active");
});
</script> 
```

显然不要忘记您之前对 jquery.js 的调用。

和你的：

```
<style>
.active{something...}
</style> 
```

# java - OPENGL ES glTranslatef 问题

> ID：11813500
> 
> 赞同：0
> 
> 时间：2012-08-05T02:23:06.997
> 
> 标签：java, android, graphics, opengl-es

好的，这里是代码。我想要它做什么它翻译屏幕跟随对象l2rArrow。确实如此，但 l2rArrow 仍然在屏幕上飞行。即使我将平移设置为 l2rArrow 的 x,y，当 l2rArrow 应该保持死点时，它最终仍然会跑出屏幕。

当我将 camX 乘以 25 时，它似乎稍微好一点，但只是稍微好一点。箭头仍然飞出屏幕。

```
public void Render(GL10 gl, float deltaTime) {

    //Log.d("Game", "Render");
    gl.glViewport(0, 0, Screen.SCREEN_WIDTH, Screen.SCREEN_HEIGHT);
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glOrthof(0, Screen.WIDTH_SCALE, 0, Screen.HEIGHT_SCALE, 1, -1);

    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();

    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

    gl.glEnable(GL10.GL_TEXTURE_2D);
    MeshRect mRect; // this holds all of our rectangles

    // draw the sky/backdrop************************************************************
    texture.bind(gl, Texture.TEXTURE_SKY1);
    mRect = new MeshRect(Sky.getMyRect());
    mRect.Draw(GL10.GL_TRIANGLES, gl);

    //draw clouds***********************************************************************
    clouds.Update();
    Vector<Cloud> vClouds = clouds.getClouds();
    for (int i = 0; i < vClouds.size(); i++){
        vClouds.get(i).Update(deltaTime);

        texture.bind(gl, Texture.TEXTURE_CLOUDS1);
        mRect = new MeshRect(vClouds.get(i).getMyRect());
        mRect.Draw(GL10.GL_TRIANGLES, gl);

        if (vClouds.get(i).hasRunCourse()){
            clouds.RemoveCloud(vClouds.get(i).getID());
        }
    }
    // draw arrows and applied power ups***********************************************************************
    boolean hasTranslated = false;
    if (!l2rArrow.isFired) {
        gl.glPushMatrix(); //save our state

            gl.glTranslatef(l2rArrow.GetToOriginX, l2rArrow.GetToOriginY, 0f); // translate to origin 0,0,0
            gl.glRotatef(LBow.getAngle(), 0f, 0f, 1f); //rotate
            gl.glTranslatef(-l2rArrow.GetToOriginX, -l2rArrow.GetToOriginY, 0f); // translate to where we want to draw it

            texture.bind(gl, Texture.TEXTURE_L2RARROW);
            mRect = new MeshRect(l2rArrow.getMyRect());
            mRect.Draw(GL10.GL_TRIANGLES, gl);

        gl.glPopMatrix(); //return to saved state

    } else {
        l2rArrow.Update(deltaTime);
        texture.bind(gl, Texture.TEXTURE_L2RARROW);
        mRect = new MeshRect(l2rArrow.getMyRect());
        mRect.Draw(GL10.GL_TRIANGLES, gl);

        hasTranslated = true;
        gl.glPushMatrix();
            float camX = (float) ((l2rArrow.startX - l2rArrow.PosX));
            camX = camX * 25;
            float camY = (float) ((l2rArrow.startY - l2rArrow.PosY));
            if (camY > 0) { camY = 0;}

            gl.glTranslatef(camX, camY,0f);

        if (l2rArrow.hasCollided) {
            //run collision code for detecting a hit and ending turn
        }
    }
    /**=======================================================================================================
     * Everything between here should be effected by translate | | gl.gltranslatef(x,y,z) x = Xoffset
     *=======================================================================================================*/

    /**=======================================================================================================
     *  gl.glPopMatrix(); back to origin
     *=======================================================================================================*/

    if (hasTranslated){
        gl.glPopMatrix();
    }

    //finish drawing other non translated 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T04:30:27.593

我没有看到 `gl.glLoadIdentity()`for `GL_MODELVIEW`。您确定要从单位矩阵开始模型视图吗？如果不是，翻译将继续从前一帧连接。我也没有看到`gl.glMatrixMode`切换到的调用`GL_MODELVIEW`，在这种情况下，所有矩阵变换都将进入投影矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T07:48:57.390

这是我的操作顺序，需要看起来像这样

```
 boolean hasTranslated = false;
    if (!l2rArrow.isFired) {
        gl.glPushMatrix(); //save our state

            gl.glTranslatef(l2rArrow.GetToOriginX, l2rArrow.GetToOriginY, 0f); // translate to origin 0,0,0
            gl.glRotatef(LBow.getAngle(), 0f, 0f, 1f); //rotate
            gl.glTranslatef(-l2rArrow.GetToOriginX, -l2rArrow.GetToOriginY, 0f); // translate to where we want to draw it

            texture.bind(gl, Texture.TEXTURE_L2RARROW);
            mRect = new MeshRect(l2rArrow.getMyRect());
            mRect.Draw(GL10.GL_TRIANGLES, gl);

        gl.glPopMatrix(); //return to saved state

    } else {
        l2rArrow.Update(deltaTime);

        hasTranslated = true;
        gl.glPushMatrix();
        gl.glLoadIdentity();
            float camX = (float) ((l2rArrow.startX - l2rArrow.PosX));
            //Log.d("cam X =" + Float.toString(camX),"Y=");
            float camY = (float) ((l2rArrow.startY - l2rArrow.PosY));
            if (camY > 0) { camY = 0;}
            if (camX < -4800) { camX = -4800;}

            gl.glTranslatef(camX, camY,0f);

            texture.bind(gl, Texture.TEXTURE_L2RARROW);
            mRect = new MeshRect(l2rArrow.getMyRect());
            //Log.d("arrow X =" + Float.toString(l2rArrow.getMyRect().BottomLeftCorner.x),"Y=");
            mRect.Draw(GL10.GL_TRIANGLES, gl);

        if (l2rArrow.hasCollided) {
            //run collision code for detecting a hit and ending turn
        }
    } 
```

# javascript - dart 递归类方法总是返回 null

> ID：11813501
> 
> 赞同：0
> 
> 时间：2012-08-05T02:23:25.707
> 
> 标签：javascript, recursion, dart

这似乎是不可能的飞镖？即让一个类方法递归并最终返回一个对象？当我运行递归方法时，如果它至少递归一次，它总是返回 null ......

例子：

```
// some class method
rock throw_rock() {
  // look at its own collection of rocks
  // get a rock and do a test on it
  rock to_throw = this.rocks[53]; // lets assume its in a map at key 53...
  if (to_throw.been_thrown == 1) {
    // ok, dont throw this one, instead recurse and find another
    this.throw_rock();
  } else {
     return to_throw;
  }
} 
```

在其他一些课程或主要课程中：

```
rock g = rock_thower.throw_rock();
// if rock thrower has had to recurse
// g will be null... 
```

我对飞镖很陌生，不知道为什么会这样。有任何想法吗？这是理智的吗？

如果不是：我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T02:26:35.457

它需要是`return this.throw_rock()`。

也就是说，您想返回`to_throw`变量或递归调用的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:47:20.300

您使用递归的任何原因？似乎 do/while 可能会起作用：

```
// some class method
rock throw_rock() {
  rock to_throw;
  do {
    // look at its own collection of rocks
    // get a rock and do a test on it
    to_throw = this.rocks[53]; // lets assume its in a map at key 53...
  } while (to_throw.been_thrown != 1);
  return to_throw;
} 
```

与递归方法一样，您需要一个退出条件来处理无法投掷所有石头的情况。

# ruby-on-rails - 创建活动流 Rails

> ID：11813503
> 
> 赞同：0
> 
> 时间：2012-08-05T02:23:37.247
> 
> 标签：ruby-on-rails, ruby, android-activity, social

这可能是一个陈词滥调的问题，但我如何从某人关注的人的帖子中制作活动流？例如，如果我有一个安装了设计的 rails 应用程序，因此有一个用户、帖子和关系表，我将如何查询 Post 表以返回帖子来自用户关注的人的记录（通过关系表)? 我从谷歌尝试了几种不同的方法，但我似乎无法使它们中的任何一种适合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-25T08:06:16.377

我构建了一个与 getstream.io 集成的 gem ( [stream_rails )；](https://github.com/GetStream/stream-rails)用于构建新闻提要和活动提要的托管 API 服务。gem 允许您将模型推送到提要、关注/取消关注提要并附带查看助手。

免责声明：我是 getstream.io 的创始人之一，也是 stream_rails gem 的作者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:52:01.647

我在没有测试的情况下写了这个，所以它可能不是 100% 正确的。

一个 has_many，通过与源定义的关系应该适用于这个模型。您需要为联接创建一个新表，`users_relationships`如下所示：

```
create_table(:users_relationships) do |t|
  t.integer user_id
  t.integer relationships_id
end 
```

现在，设置您的模型：

```
class Post < ActiveRecord::Base
  belongs_to :users
end

class User < ActiveRecord::Base
  has_many :posts
  has_many :relationships, :through => :users_relationships, :source => :user
end

class Relationship < ActiveRecord::Base
  has_and_belongs_to_many :user
end 
```

不过，有人可能会有更明确的答案。关系表也可能是单表继承的良好候选者。

# javascript - 如何通过 Greasemonkey 自动连续单击按钮？

> ID：11813504
> 
> 赞同：0
> 
> 时间：2012-08-05T02:23:59.420
> 
> 标签：javascript, html, greasemonkey

我想通过greasemonkey不断点击按钮id="option2"。

[http://jsfiddle.net/cBJaP/](http://jsfiddle.net/cBJaP/)

视频： [http ://www.youtube.com/watch?v=wUUo0eguGTg](http://www.youtube.com/watch?v=wUUo0eguGTg)

我该怎么做 ？

```
<div class="content">
    <ul class="soruBtn">
        <li class="optionA">
            <a id="option1" hidefocus="true" style="outline: medium none;">
                41.000 TL
            </a>
        </li>
        <li class="optionB">
             <a id="option2" hidefocus="true" style="outline: medium none;">
                44.000 TL
             </a>
        </li>
    </ul>
</div>
<script type="text/javascript">
    $(".contentContainer").attr("class", "contentContainer2");
</script>

 </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T18:27:36.847

我不是真的使用greasemonkey 或jQuery，但正如我所见，这可以用普通的Javascript 轻松解决。将此代码添加到`<script>`标签中：

```
function pressMyButton(){
    eval(document.getElementById("option2").href);
    setTimeout("pressMyButton()",100);
}
pressMyButton(); 
```

这将做什么：它声明一个函数`pressMyButton()`（您可以选择任何名称）并在该函数中：

1.  执行链接`href`属性中的任何内容
2.  在 100 毫秒内再次调用自身。

您当然可以将 100 毫秒设置为更小的值，但我不建议将其设置为零；您反复关注/执行链接的目的是什么？

希望这有帮助；如果您遇到问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:47:17.013

在 jQuery 中尝试这样的事情：

```
while (true) {
   $('#option2').trigger('click');
} 
```

这会产生一个无限循环，不断触发 id 为 option2 的按钮的单击事件。虽然不确定greasemonkey部分，但没有经验。

**编辑：**

正如所建议的，添加超时可能是最好的。它看起来像这样：

```
setTimeout(function() {
    $('#option2').trigger('click');
}, 100); 
```

这将每 100 毫秒触发一次点击事件，或每秒触发 10 次。您可能会提高速度，具体取决于您的计算机以及按钮将触发的确切内容。更多关于`setTimeout`和`setInterval`函数的信息可以在这里找到： http: [//www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

# objective-c - 当界面中有**时，Xcode会放入__autorelease

> ID：11813507
> 
> 赞同：3
> 
> 时间：2012-08-05T02:24:24.580
> 
> 标签：objective-c, xcode

> **可能重复：**
> [在哪些情况下我们需要在 ARC 下编写 __autoreleasing 所有权限定符？](https://stackoverflow.com/questions/8862023/in-which-situations-do-we-need-to-write-the-autoreleasing-ownership-qualifier)

在界面中制作此方法：

```
- (NSArray *)questionsFromJSON:(NSString *)jsonString 
                     withError:(NSError **)error; 
```

在实现中选择自动完成时，它会添加以下内容：

```
- (NSArray *)questionsFromJSON:(NSString *)jsonString withError:(NSError *__autoreleasing *)error 
```

我认为 ARC 永远不需要使用自动释放，但我猜这是不同的，因为它可以与 ARC 一起编译。

只是好奇 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:52:06.173

Autorelease 在 ARC 中被大量使用。您只是看不到关键字到处都是。

您站点的示例是当您发送指向对象指针的指针时，例如典型的错误场景......

```
NSError *error = nil; if (![foo bar:&error]) {
    // handle error
} 
```

请注意， bar 方法将执行类似...

```
- (void)bar:(NSError **errorPtr) {
    // blah...
    if (an_error_happened) {
        NSError *error = [NSError muckityMuck];
        *errorPtr = error;
    }
} 
```

现在，错误对象已被分配，并像函数调用的自动释放一样“返回”。当您声明 s 函数/方法采用“**”时，您隐含地声明了 __autorelease。

# c# - 如何使用这些选项卡的用户控件

> ID：11813508
> 
> 赞同：0
> 
> 时间：2012-08-05T02:25:15.157
> 
> 标签：c#, windows-phone-7

我为 wp7 创建了一个网络浏览器应用程序。我在应用程序栏菜单项中添加了一些 6 个选项卡。但是现在我想要分别在用户控制页面中的这 6 个选项卡，如果我单击选项卡 2 或任何选项卡，它应该像现在一样工作。

**主页.xaml**

```
<Grid x:Name="LayoutRoot">
<Grid.RowDefinitions>
<RowDefinition Height="Auto" />
<RowDefinition Height="*" />
</Grid.RowDefinitions>
<TextBox x:Name="UrlTextBox"
     KeyDown="UrlTextBox_KeyDown" />
<Grid x:Name="BrowserHost"
  Grid.Row="1" />
</Grid>

<phone:PhoneApplicationPage.ApplicationBar>
<shell:ApplicationBar>
<shell:ApplicationBar.MenuItems>
    <shell:ApplicationBarMenuItem Text="1"
                                  Click="TabMenuItem_Click" />
    <shell:ApplicationBarMenuItem Text="2"
                                  Click="TabMenuItem_Click" />
    <shell:ApplicationBarMenuItem Text="3"
                                  Click="TabMenuItem_Click" />
    <shell:ApplicationBarMenuItem Text="4"
                                  Click="TabMenuItem_Click" />
</shell:ApplicationBar.MenuItems>
</shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

**MainPage.xaml.cs**

```
public partial class MainPage : PhoneApplicationPage
{
private const int NumTabs = 4;

private int currentIndex;
private string[] urls = new string[NumTabs];
private WebBrowser[] browsers = new WebBrowser[NumTabs];

public MainPage()
{ 
InitializeComponent();
ShowTab(0);
}

private void ShowTab(int index)
{
this.currentIndex = index;
UrlTextBox.Text = this.urls[this.currentIndex] ?? "";
if (this.browsers[this.currentIndex] == null)
{
    WebBrowser browser = new WebBrowser();
    this.browsers[this.currentIndex] = browser;
    BrowserHost.Children.Add(browser);
}
for (int i = 0; i < NumTabs; i++)
{
    if (this.browsers[i] != null)
    {
        this.browsers[i].Visibility = i == this.currentIndex ? Visibility.Visible : Visibility.Collapsed;
    }
}
}

private void UrlTextBox_KeyDown(object sender, KeyEventArgs e)
{
if (e.Key == Key.Enter)
{
    Uri url;
    if (Uri.TryCreate(UrlTextBox.Text, UriKind.Absolute, out url))
    {
        this.urls[this.currentIndex] = UrlTextBox.Text;
        this.browsers[this.currentIndex].Navigate(url);
    }
    else
        MessageBox.Show("Invalid url");
}
}

private void TabMenuItem_Click(object sender, EventArgs e)
{
int index = Int32.Parse(((ApplicationBarMenuItem)sender).Text) - 1;
ShowTab(index);
}
} 
```

**就像下面的浏览器一样。** ![在此处输入图像描述](../Images/f056fb14e2da0d912184e6ede1308d63.png)

谁能帮我这个？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:44:32.123

如果你仍然想创建一个用户控件，那就没有那么难了。在您的项目文件夹中添加新项目作为 Windows Phone 用户控件。在创建的新页面中，根据需要键入 UI 的 xaml 代码（这类似于任何其他 xaml 页面）及其在后面代码中的行为。

在您的主页中添加以下代码行
<phone:PhoneApplicationPage xmlns:views="clr-namespace:ProjectName.NameSpace">

然后使用此语句 <views:controlName> </views:controlName> 引用您的控件

我希望这有帮助。需要帮助请叫我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:03:25.943

使用数据透视页面，并将您的点击事件处理函数（类似于您的 TabMenuItem_Click）关联到数据透视标题上的点击手势。

或者根据您的问题简单地使用标题为 1、2、3、4 的数据透视页面。在与事件 pivot_selectionchanged 关联的事件处理程序中，检查枢轴索引并相应地完成您的工作。

我希望这是您正在寻找的，否则请进一步解释您的问题

# html - ipad 没有按预期呈现页面

> ID：11813510
> 
> 赞同：-2
> 
> 时间：2012-08-05T02:25:42.490
> 
> 标签：html, css, ipad

以下是页面的外观以及它在桌面上的外观（chrome、firefox、opera）：

![在此处输入图像描述](../Images/5c7e237c8fe6962ace309d1f89ca6339.png)

这就是它在 ipad 上的呈现方式：

![在此处输入图像描述](../Images/c42f6bfd31e7cca549f105fd529c5512.png)

这是一个 Wordpress 儿童主题（二十一岁），它的结构和往常一样：

![在此处输入图像描述](../Images/ec02d153a87894b8a0b36cc67a8ebdeb.png)

这是一些CSS：

```
#outer-header{
 width:100%;
 height:56px;
 background-color:#149CC3;
}
#main{
 width:940px;
 margin:0 auto;
 padding:0;
 padding-top:20px;
}
body.home #main{
padding-top:0;
}
#primary,#content{
 margin:0;
}
#primary{
 width:620px;
}
#content{
 width:100%;
}
#secondary{
 margin-right:0;
 width:300px;
border:solid 1px #149CC3;
margin-bottom:20px;
}
.inner-wrapper{
 width:940px;
 margin:0 auto;
}
#inner-footer{
 width:940px;
 background-color:transparent;
margin:0 auto;
}
#colophon{
width:100%;
 background-color:#149CC3;
} 
```

请让我知道它可能是什么以及您可能还需要什么来确定问题原因。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T05:48:33.937

我发现了问题：

```
<meta name="viewport" content="width=device-width"> 
```

在我删除上面的行之后，一切都开始正常工作了。将不得不做一些阅读。

感谢大家，尤其是那些没有打到负号的人；）

# hadoop - Reduce函数中的值列表是确定排序的吗？

> ID：11813512
> 
> 赞同：0
> 
> 时间：2012-08-05T02:26:01.830
> 
> 标签：hadoop, mapreduce

如果我只使用默认的排序比较器和分组比较器，我猜 Reduce 中值列表的顺序不是确定性的？会是随机的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T04:02:51.610

您应该假设值的顺序是随机的。默认比较器（实际上是所有比较器）只比较和分组键，而不是值。

呈现值顺序确定性的常见模式需要将值的一部分偷偷放入键中，并忽略分组分区器和比较器的额外部分，同时考虑将其用于排序比较器。

# c# - GeckoFX 和 C# ！单击按钮删除文件时出错

> ID：11813515
> 
> 赞同：1
> 
> 时间：2012-08-05T02:26:29.760
> 
> 标签：c#, geckofx

我在结合 GeckoFX 和 C# 时遇到了 2 个问题。

1.当我单击一个按钮时，我的应用程序将打开一个 OpenFileDialog（由 C# 代码生成）来更改 img 标签的 src 属性。我为此 img 使用上下文菜单来做到这一点。我的问题是，如果我单击一次打开 OpenFileDialog 的按钮，然后单击 img（没有上下文菜单），OpenFileDialog 将再次打开。

2.当我为此img选择新图像时，我无法删除旧文件（使用C#代码）这是我的代码

[HTML 和 Javascript 代码]

```
<script type="text/javascript">
$(document).ready(function(){
    $('.div_image).bind('contextmenu',function(){
        $('#contextmenu_image').css({top: e.pageY+'px',left: e.pageX+'px'}).show();
    });

});
</script>
<div class="div_image" style="position: absolute; top: '20px;left:'20px;"><img id="img123" class="image" src="" style="width: 100%;height: 100%;"/></div>
<ul class="contextmenu" id="contextmenu_image" style="width: 100px; display: none;">
    <li class="properties">Properties</li>
    <li class="del">Delete</li>
    <button id="choose_image">Choose image</button> 
</ul> 
```

[C#代码]

```
private void ChooseImage()
    {
        if (geckoWebBrowser1.Document.ActiveElement.GetAttribute("id") == "choose_image")
        {

            OpenFileDialog open = new OpenFileDialog();
            open.Filter =
                "Image (*.BMP;*.JPG;*.GIF;*.PNG;*.JPEG)|*.BMP;*.JPG;*.GIF;*.PNG;*.JPEG|" +
                "All files (*.*)|*.*";
            open.Title = "Choose an image";

            DialogResult result = open.ShowDialog();
            if (result == System.Windows.Forms.DialogResult.OK)
            {
                string srcFile = open.FileName;
                string fileName = System.IO.Path.GetFileName(srcFile);
                string fileExtent = System.IO.Path.GetExtension(srcFile);
                string desDir = Application.StartupPath + "\\test\\images\\";
                Random r = new Random();
                string newFileName = "i_";
                for (int i = 1; i <= 10; i++)
                {
                    newFileName += Convert.ToString(r.Next(0, 9));
                }
                newFileName += fileExtent;
                System.IO.File.Copy(srcFile, desDir + newFileName);
                //Find old image
                string old_image = geckoWebBrowser1.Document.GetElementById("img123").GetAttribute("src");
                geckoWebBrowser1.Document.GetElementById("img123").SetAttribute("src", "images/" + newFileName);
                 if (old_image != "")

                    System.IO.File.Delete(desDir + old_image);//Delete old file,but unable

            }
        }
    }
 private void geckoWebBrowser1_DomClick(object sender, GeckoDomEventArgs e)
    {
        ChooseImage();
    } 
```

对不起，因为我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T22:31:55.387

对于您的第一个问题，我建议您更改连接点击事件的方式：

browser.OnBrowserClick += new System.EventHandler(OnBrowserClick);

然后，你会得到一个参数，告诉你点击了什么：

```
private void OnBrowserClick(object sender, EventArgs e)
{
    var ge = e as GeckoDomEventArgs;
    if (ge.Target.ClassName =="choose_image")
    {
       //Handle the click... 
```

对于您的第二个问题，我认为浏览器可能会保留该文件，但在我的实验中，它没有。我建议您确保该文件确实存在：

```
var oldPath = Path.Combine(desDir);
if(File.Exists(oldPath))
{
    try
    {
        File.Delete(oldPath);
    }
    catch(Exception error)
    {
        //do something about not being able to delete the file yet
    }
} 
```

如果您想查看一些使用 geckofx 完成很多此类事情的开源代码，请参阅我的[Bloom 项目](http://projects.palaso.org/projects/bloom)，尤其是 EditingView.cs 和 Browser.cs。

# css - CSS 的 Z-index 问题

> ID：11813518
> 
> 赞同：0
> 
> 时间：2012-08-05T02:27:01.523
> 
> 标签：css, z-index

我需要将 page1、page2 和 page3 链接隐藏在#site div 后面。现在他们不是。它必须是一些 z-index 问题，但我使用的没有 z-indexes 工作。

所以#nav ul ul li 应该出现在#site div 后面。然后，当您将鼠标悬停在“父页面”上时，它将显示这些页面。

这是该站点的演示：http: [//tempsmz.hostzi.com/](http://tempsmz.hostzi.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:38:03.700

该`z-index`属性仅适用于定位元素（固定、绝对和相对）。尝试将 a 添加`position: relative;`到元素并应用所需的`z-index`，例如 1 用于导航，2 用于站点容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:38:38.637

要使 z-index 工作，您应该始终添加位置：相对（或绝对或固定）。此外，您覆盖链接的 div 实际上具有透明背景。尝试将其设置为白色，它们应该会像你想要的那样消失。

# ios - Apple 对可达性测试的具体要求是什么？

> ID：11813525
> 
> 赞同：4
> 
> 时间：2012-08-05T02:28:15.410
> 
> 标签：ios, reachability

Apple 是否需要持续的可访问性测试（和警报），还是可以只在应用启动时测试一次？这就是Apple所说的：“当网络不可用时，您的代码包含客户警报或通知非常重要。” 引用自：[https](https://developer.apple.com/appstore/resources/submission/tips.html) ://developer.apple.com/appstore/resources/submission/tips.html 。这并不清楚应用程序是否必须持续监控连接状态，或者仅在应用程序启动时检查是否可以接受。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T02:39:29.270

不，您不必持续监控网络连接。如果您的应用在没有网络连接的情况下仍然可以做一些明智的事情，则无需*通知*用户。

例如，我有一个显示当地火车时刻表的应用程序。每当它开始时，它都会从我的网站检查更新的时间表（时间表每几周更新一次）。如果没有网络，那么没问题，应用程序会继续运行并且*不会*通知用户。如果有网络连接但没有新的时间表，没问题。如果有新的时间表，则会在后台下载并静默更新。

如果您的应用程序需要网络连接来执行任何有用的操作，那么您可能希望让用户知道应用程序无法运行的原因。

# vb.net - 列表框的麻烦。我不知道

> ID：11813526
> 
> 赞同：0
> 
> 时间：2012-08-05T02:28:20.027
> 
> 标签：vb.net, linq

这是我按下“今日订单账单”按钮时的结果：

![在此处输入图像描述](../Images/8d6d515224c978b5f1c7a5fd33d3ccfe.png)

我不知道如何摆脱“{name =”。我只想让它说“迈克尔史密斯”之类的东西。我不想要括号也不想要列标题。我究竟做错了什么？顺便说一句，这些数据来自数据库表。

这是我的代码：

```
 Dim query1 = From cust In MICROLANDDataSet.Customers
                 Join ord In MICROLANDDataSet.Orders
                 On cust.custID Equals ord.custID
                 Select cust.name, cust.street, cust.city, cust.amtPurchases, ord.quantity

    lstOutput.Items.Clear()
    lstOutput.DataSource = query1.ToList
    lstOutput.SelectedItem = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:02:11.190

你应该使用该`DisplayMember`属性

```
listBox1.DataSource = query1.ToList;
listBox1.DisplayMember = "name"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T04:34:10.427

除非我弄错了，否则 .ToList 将返回一个对象列表。所以你需要按照这篇文章的建议来设置列表框的 DisplayMember 和 ValueMember，这样它就会显示正确的字段而不是对象列表。

[加载 ListBox 的正确方法是什么？](https://stackoverflow.com/questions/303248/c-sharp-winforms-what-is-the-proper-way-to-load-up-a-listbox)

# twitter-bootstrap - 将 Twitter Bootstrap 资产克隆到应用程序目录中

> ID：11813527
> 
> 赞同：1
> 
> 时间：2012-08-05T02:28:22.913
> 
> 标签：twitter-bootstrap

我正在尝试通过[教程来设置 Twitter Bootstrap](http://rubysource.com/twitter-bootstrap-less-and-sass-understanding-your-options-for-rails-3-1/)。

它提供了一些像这样克隆 Twitter Bootstrap 的说明，

```
$ git clone https://github.com/twitter/bootstrap.git 
```

然后，按照说明，我做了

```
$ cp bootstrap/bootstrap.css path/to/app/assets/stylesheets/. 
```

但是电脑有反应

```
cp: bootstrap/bootstrap.css: No such file or directory 
```

我查看了'bootstrap'目录并看到了这个

```
LICENSE
Makefile
README.md
docs
img
js
less
package.json 
```

我应该怎么做而不是

```
 $ cp bootstrap/bootstrap.css path/to/app/assets/stylesheets/. 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:40:33.250

在编写您使用的教程时，Twitter Bootstrap 的[版本为 1.4](https://github.com/twitter/bootstrap/tree/v1.4.0)，而 GitHub 项目*曾经包含该项目的编译版本，*其中包含您期望的**bootstrap.css文件。**

自[2.0 版本](https://github.com/twitter/bootstrap/tree/v2.0.0)以来，存储库不再包含项目的编译版本，因此在您自己编译之前不包含**bootstrap.css 。**您应该按照**README.md**中提供的说明或网站上的说明进行操作，即[Compiling Bootstrap](http://twitter.github.com/bootstrap/less.html#compiling)。

至少你需要**NodeJS**和**less**包。

如果使用 make 文件，还需要节点包**jshint**、**recess**和uglify **-js**。

* * *

您的另一种选择是只[下载已编译的文件](http://twitter.github.com/bootstrap/assets/bootstrap.zip)，而不是源代码。

# sql - 在 SQL 中选择并返回带有结果的特定值的计数

> ID：11813530
> 
> 赞同：1
> 
> 时间：2012-08-05T02:29:25.760
> 
> 标签：sql, select, count, group-by, field

我想从表中选择并返回列中特定值的出现次数。

我还希望该值的出现次数出现在结果集中。

例如

有了这个汽车桌

```
type color 
===== ===
bmw   blue
lexus green
Ford  blue
KIA   yellow 
```

我想构建一个将返回以下结果的查询。

```
type  color   colorcount
===== ===     =======
bmw    blue    2
lexus  green   1
Ford   blue    2
KIA    yellow  1 
```

我试过：

```
select type,color, count(color) from Car 
```

但这显然没有用。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:46:57.630

```
SELECT c.type, c.color, x.colorCount
  FROM car c
      ,( SELECT color, COUNT(*) colorCount
           FROM car
           GROUP by color ) x
  WHERE c.color = x.color; 
```

# ruby-on-rails - Heroku 上用于登台服务器的不同 robots.txt

> ID：11813534
> 
> 赞同：7
> 
> 时间：2012-08-05T02:31:03.117
> 
> 标签：ruby-on-rails, heroku, gitignore

我在 Heroku 上有登台和生产应用程序。

对于爬虫，我设置了 robots.txt 文件。

之后，我收到了来自 Google 的消息。

> 尊敬的网站管理员，您网站的主机名[https://www.myapp.com/](https://www.myapp.com/)与您的 SSL 证书中的任何“主题名称”都不匹配，它们是：
> *.herokuapp.com
> herokuapp.com

Google 机器人读取了我的暂存应用程序上的 robots.txt 并发送了此消息。因为我没有设置任何东西来阻止爬虫读取文件。

所以，我正在考虑的是在登台和生产之间更改 .gitignore 文件，但我不知道如何做到这一点。

实现这一点的最佳实践是什么？

**编辑**

我在谷歌上搜索并找到了这篇文章[http://goo.gl/2ZHal](http://goo.gl/2ZHal)

这篇文章说要设置基本的 Rack 身份验证，你不需要关心 robots.txt。

我不知道基本身份验证可以阻止谷歌机器人。似乎这个解决方案比操纵 .gitignore 文件更好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T05:22:32.657

Rails 3 的一个很好的解决方案是使用 Rack。这是一篇很棒的文章，概述了该过程：[使用 Rack 服务不同的 Robots.txt](http://avandamiri.com/2011/10/11/serving-different-robots-using-rack.html)。总而言之，您将其添加到您的 routes.rb 中：

```
 # config/routes.rb
 require 'robots_generator' # Rails 3 does not autoload files in lib 
 match "/robots.txt" => RobotsGenerator 
```

然后在 lib/robots_generator.rb 中创建一个新文件

```
# lib/robots_generator.rb
class RobotsGenerator
  # Use the config/robots.txt in production.
  # Disallow everything for all other environments.
  # http://avandamiri.com/2011/10/11/serving-different-robots-using-rack.html
  def self.call(env)
    body = if Rails.env.production?
      File.read Rails.root.join('config', 'robots.txt')
    else
      "User-agent: *\nDisallow: /"
    end

    # Heroku can cache content for free using Varnish.
    headers = { 'Cache-Control' => "public, max-age=#{1.month.seconds.to_i}" }

    [200, headers, [body]]
  rescue Errno::ENOENT
    [404, {}, ['# A robots.txt is not configured']]
  end
end 
```

最后确保将 move robots.txt 包含到您的配置文件夹中（或您在`RobotsGenerator`类中指定的任何位置）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T07:27:36.897

`/robots.txt`使用控制器动作而不是静态文件动态服务怎么样？根据您允许或不允许搜索引擎索引您的应用程序的环境。

# android - 用纬度和经度旅行的距离

> ID：11813537
> 
> 赞同：2
> 
> 时间：2012-08-05T02:32:06.313
> 
> 标签：android, gps

我正在创建一个`ArrayList`纬度/经度坐标，然后想要获取所有这些并找到总行驶距离。但是我当前的代码一直返回 0。有人可以告诉我我做错了什么吗？

```
public float getDistanceTraveled() {
    float[] dist = new float[1];
    float totalDist = 0;

        for(int i = 0; locs.size()-2 >= i; i++) {
            double lat1 = locs.get(i).getLatitude();
            double lon1 = locs.get(i+1).getLongitude();
            double lat2 = locs.get(i).getLatitude();
            double lon2 = locs.get(i+1).getLongitude();

            Location.distanceBetween(lat1, lon1, lat2, lon2, dist);
            totalDist += dist[0];
            Log.d("", "totaldist " + String.valueOf(totalDist));

        }
        return totalDist;       
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T02:43:36.483

看起来像一个小类型-o的情况，不应该是这样吗：

```
double lat1 = locs.get(i).getLatitude();
double lon1 = locs.get(i).getLongitude();
double lat2 = locs.get(i+1).getLatitude();
double lon2 = locs.get(i+1).getLongitude(); 
```

编辑：看起来莫里森打败了我

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T02:39:44.293

所以你得到了同一点之间的距离，还是从一个点的纬度和另一个点的距离？

```
 double lat1 = locs.get(i).getLatitude();
        double lon1 = locs.get(i+1).getLongitude();
        double lat2 = locs.get(i).getLatitude();
        double lon2 = locs.get(i+1).getLongitude(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T02:55:18.973

您的方法的问题在于，这将是乌鸦飞翔的方式，但是如果我从一个航路点出发，绕一个弯然后沿着另一条街道走，看起来我在走 2 英里时就走了 100m。

因此，除非您获取足够数量的点来处理道路弯曲和人们走不同道路的问题，否则您的点数将与使用导航器查看距离的情况大不相同。

正如其他人提到的你的错字我不会详细说明为什么距离为零，但你可能想考虑你的方法。

现在，如果用户正在步行或骑自行车，您的方法可能没问题，但对于驾驶，您可能需要进行大量测试，看看您是否对差异感到满意。

# android - 为什么无法将 Theme.Holo 解析为主题？

> ID：11813539
> 
> 赞同：2
> 
> 时间：2012-08-05T02:32:15.840
> 
> 标签：android

我用过`<uses-sdk android:minSdkVersion="9" android:maxSdkVersion="15" />`，但 Theme.Holo 不起作用。

安卓清单：

```
<activity android:name=".Login" android:label="@string/app_name"  android:theme="@android:style/Theme.Holo.NoTitleBar.Fullscreen" android:screenOrientation="portrait"> 
```

截屏：

![截屏](../Images/3401b39c24b7df5f8321e68487958c78.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T03:10:18.180

根据[文档](http://developer.android.com/reference/android/R.style.html)，您引用的主题不存在。

在这种情况下，它被称为`Theme_Holo_NoActionBar_Fullscreen`，而不是`Theme_Holo_NoTitleBar_Fullscreen`（Honeycomb中的ActionBar与TitleBar pre-Honeycomb基本相同）

顺便说一句，不要让下划线混淆你。在本文档中，当您看到下划线时，您应该将其替换为点`.`

另外，一定要针对11级以上的api，否则找不到，因为这种主题只在Honeycomb中引入。

# python - python：将多个参数从一个函数传递给另一个函数

> ID：11813548
> 
> 赞同：7
> 
> 时间：2012-08-05T02:35:29.427
> 
> 标签：python, function, argument-passing

我正在尝试学习 python（具有我的 VBA 背景）购买构建二十一点游戏作为教学练习。

我已经进行了一些关于传递多个参数的搜索，但我真的不明白我在解释的方式中发现了什么。

查看最后一个名为“hand”的函数，我试图利用三个单独的值作为前一个函数的“return”传递。

我收到以下错误：

```
Traceback (most recent call last):
File "decky15.py", line 56, in <module>
print hand(deal(shuffle(load_deck())))
TypeError: hand() takes exactly 3 arguments (1 given) 
```

我究竟做错了什么？我怎样才能更有效率？非常感谢任何有关解决方案或读数的建议。

```
import random

def load_deck():
    suite = ('Spades', 'Hearts', 'Diamonds', 'Clubs')
    rank = ('2', '3', '4', '5', '6', '7', '8', '9', '10', "Jack", "Queen", "King", "Ace")
    full_deck = {}
    i = 0
    for s in suite:
        for r in rank:
            full_deck[i] = "%s of %s" % (r, s)
            i += 1
    return full_deck

def pick_item(dict_in_question):   
    card_key = random.choice(dict_in_question.keys()) 
    card = dict_in_question[card_key]  
    del dict_in_question[card_key]  
    return card

def shuffle(dict_in_question):  #takes a dictionary as an argument and shuffles it
    shuff_dict = {}
    n = len(dict_in_question.keys())
    for i in range(0, n):
        shuff_dict[i] = pick_item(dict_in_question)
    return shuff_dict

def deal(dict_in_question):
dealer ={}
player = {}
for i in range (2):
    player[i] = pick_item(dict_in_question)
        dealer[i] = pick_item(dict_in_question)
return (player, dealer, dict_in_question)

def hand(player, dealer, dict_in_question):
print"Here are the opening hands:"
print"Dealer: %s" % dealer(1)
print" - " * 10
print"Your hand:"
print"%s" % player[0]
print"%s" % player[1]
return 0

print hand(deal(shuffle(load_deck())))  #changed to: hand(*deal(shuffle(load_deck()))) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-05T02:38:13.820

尝试`print hand(*deal(shuffle(load_deck())))`

`*`告诉 python 做[参数解](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)包。

# qt - 将 QTreeView 设置为 QVariantMap 内容

> ID：11813552
> 
> 赞同：1
> 
> 时间：2012-08-05T02:36:33.607
> 
> 标签：qt

是否有一种自动方法可以用来将 QVariantMap 的内容设置为 QTreeView，或者我必须为此定义一个模型？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T05:28:42.253

请原谅我必须在 python (PyQt4) 中提供我的示例。有两种方法可以解决您的问题。您可以将 QVariantMap 数据推送到连接到您的视图的模型中，您可以独立管理该模型，或者您必须定义自己的模型，将 QVariantModel 包装为数据源以主动驱动数据。

我提供了一个将您的数据推入标准模型的简单示例。python 中没有 QVariantMap，所以我使用的是键 int => QVariant 字符串值的字典。

```
class View(QtGui.QWidget):

    def __init__(self):
        super(View,self).__init__()

        self.layout = QtGui.QVBoxLayout(self)
        self.table = QtGui.QTableView()
        self.layout.addWidget(self.table)

        self.button = QtGui.QPushButton("Update")
        self.layout.addWidget(self.button)

        # Using a normal QStandardItemModel and setting
        # it on the table view.
        self.model = QtGui.QStandardItemModel(self)
        self.table.setModel(self.model)

        self.button.clicked.connect(self.populate)

    def populate(self):
        # no QVariantMap in PyQt4\. Creating a dictionary on the fly
        # of int key => QVariant string...  {0: QVariant('foo'), ...}
        variantMap = {i:QtCore.QVariant('foo') for i in xrange(10)}

        col = 0
        row = 0
        # loop over each element in your map, and add a QStandardItem
        # at a specific row/column
        for name, val in variantMap.iteritems():
            item = QtGui.QStandardItem(val.toString())
            self.model.setItem(row, col, item)
            row += 1 
```

我创建了一个 QTableView 和一个 QStandardItemModel。然后我在视图上设置模型。我创建了一个连接到填充插槽的按钮。调用此插槽时，我会即时创建一个“QVariantMap”类型的对象来模拟您的数据容器。然后我遍历该容器的内容，并`QStandardItem`为每个单元格创建一个。我将项目设置到模型中的特定列和行。在此示例中，我仅使用第 0 列并附加行。

我希望这个例子很容易转化为你的情况。

# php - 使用 MySQL 调试 PDO 准备好的查询

> ID：11813554
> 
> 赞同：6
> 
> 时间：2012-08-05T02:36:51.617
> 
> 标签：php, mysql, debugging, pdo

我正在从`mysql_*`调用更改为使用 PDO 调用，并且在开发新代码时无法弄清楚如何调试我的实际 SQL。

在`mysql_*`调用下，我可以在 PHP 函数中编写一些 SQL，并且可以`echo`使用实际的 SQL 来查看处理器正在使用什么。

我一直无法在 PDO 库中找到这样的野兽。`debugDumpParams`看起来应该，但它不会吐回绑定语句。

我遇到的问题示例：

1.  在我的第一次尝试中，我绑定了一个字符串，并在 SQL 语句中包含了引号，尽管绑定了字符串的 data_type - 我只是侥幸才尝试从语句中删除引号；调试会让我看到那里有重复的报价。

2.  我将一些代码从一个项目复制到另一个项目，但不小心忘记更正数据库名称。自然地，SQL 失败了，因为其他数据库中不存在这些表。但是程序只是返回了正确的错误结果。在 PHP 日志或 MySQL 日志或任何地方，我都没有得到提示，表明该表在我正在寻找的地方不存在。

那么，其他人是如何调试 PDO SQL 调用的呢？我错过了什么？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T02:43:30.993

对于第一个问题，检查查询确实很困难。除了在数据库服务器上记录查询之外，您对此无能为力。原因是准备好的查询并不（总是）简单地将数据连接到查询中。重点是数据是与查询分开发送的。您可以通过 访问查询字符串`$yourStatement->queryString`。它只会显示带有参数的查询。

对于您的第二个问题，默认情况下 PDO 在发生错误时不会引发异常。由您来检查它们。不过，您可以更改此设置。 [http://php.net/manual/en/pdo.error-handling.php](http://php.net/manual/en/pdo.error-handling.php)

```
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

然后，您可以通过围绕查询执行的 try/catch 块来捕获问题。

# python - 如何在python中创建一个简单的pdf文件？

> ID：11813555
> 
> 赞同：23
> 
> 时间：2012-08-05T02:36:58.583
> 
> 标签：python, pdf

我正在寻找一种从 Python 输出非常简单的 pdf 文件的方法。基本上它将由两列单词组成，一列是俄语（所以是 utf-8 字符），另一列是英语。

我已经用谷歌搜索了大约一个小时，我发现的软件包要么是大量的过度杀伤（并且仍然没有提供有用的示例），例如 ReportLab，要么似乎假设任何人唯一会对 pdf 做的事情是将它们中的几个连接在一起（PyPdf，pdfrw）。

也许我只是遗漏了一些明显的东西，但我所看到的所有这些似乎都引发了一些关于获取 17 个 pdf 文件并将它们转换为具有 23 个窗格的 60 英尺宽的海报（可能有点夸张）的大规模讨论，然后离开我想知道如何让“Hello World”程序工作。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T02:52:37.913

您可以使用[wkhtmltopdf](http://wkhtmltopdf.org/)。它是一个命令行实用程序，使用 Webkit 将 html 转换为 pdf。

如果需要，您可以将数据生成为 html 并使用 css 设置样式，然后使用 wkhtmltopdf 生成 pdf 文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-05T07:37:22.823

[`rst2pdf`](https://code.google.com/p/rst2pdf/)做你想做的；重组文本输入

样式可以与原生 RST 样式内联应用，并且文档级属性（包括字体）由[样式表](http://bucksnort.pennington.net/blog/post/rst2pdf_styles/)控制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T06:50:42.567

Try [pod](http://appyframework.org/pod.html) (python open document) 是一个允许轻松生成内容是动态的文档的库。

pod 生成另一个包含所需结果的**ODF文本文档 (ODT)。pod 可以在服务器模式下调用 OpenOffice 以生成****PDF、DOC、RTF 或 TXT**格式的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T07:42:41.913

将文本文件转换为 PDF 的方法[。](http://code.activestate.com/recipes/532908-text-to-pdf-converter-rewrite/)有点长但纯 Python，没有外部依赖。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T15:43:41.833

你也可以使用[weasyprint](http://weasyprint.org)它支持特定的 css 分页媒体功能

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-10T16:53:56.960

一种更简单的方法是使用 csv 包将两列写入 .csv 文件，然后将其读入电子表格并打印为 pdf。不是 100% python，但可能减少了 90% 的工作......

# c# - 在一个 HTTP 快照中包装多个 Azure 表查询

> ID：11813561
> 
> 赞同：0
> 
> 时间：2012-08-05T02:38:49.673
> 
> 标签：c#, azure, azure-storage, azure-table-storage

我需要从不同的表中多次查询 Azure 表存储，然后将所有结果组合到输出 HTTP 页面。

由于查询不相关，意味着没有特定的顺序，所以我可以将所有查询包装在一个 HTTP 请求中以节省查询时间吗？

或者..

我可以同时发送多个表查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T04:21:01.167

不可以。Azure 表存储不支持此功能。您需要分别发送每个查询。

# c++ - 从不同的头文件中定义的类中为函数授予友谊

> ID：11813568
> 
> 赞同：2
> 
> 时间：2012-08-05T02:40:48.737
> 
> 标签：c++

首先，这不是“作业”，它是 Thinking in C++ Vol 1, Chapter 5 ex 5 中的一个问题。我需要制作 3 个类，第一个将其内部的友谊授予整个第二个班级，而友谊只授予一个第三类的功能。

我对整个第二类授予友谊没有问题，但是在授予第三类功能时，如果我在同一个标​​题中声明第三类，则没有问题。但是在不同的标题中，我得到了一些未定义的类型/声明。感谢您的帮助，这里是代码：

```
#ifndef FIRSTCLASS_H
#define FIRSTCLASS_H

//firstclasss header file

#include "secondclass.h"
#include "thirdclass.h"

class secondclass; //dummy declaration so it can share friendship
class thirdclass;  //it doesnt work when i want to give friendship to a function

class firstclass{
private:
    int a;
    int b;
public:
    friend secondclass; //granting friendship to the whole class
    friend void thirdclass::z(firstclass *); //error
    //use of undefined type 'thirdclass'
    //see declaration of 'thirdclass'

};

#endif FIRSTCLASS_H

#ifndef THIRDCLASS_H
#define THIRDCLASS_H

//thirdclass header file

#include "firstclass.h"

class firstclass;

class thirdclass{
public:
    void z(firstclass *);
};

#endif THIRDCLASS_H 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T02:45:25.773

只有在不包含相应类的标头时才需要提供前向声明。由于您已经包含了两者`secondclass.h`，`thirdclass.h`因此您应该完全跳过相应的前向声明。

但是，在`thirdclass.h`中，您不需要`firstclass.h`：您正在声明指向 的指针`firstclass`，而不是使用其成员，因此您不需要包含。

一般规则是，如果您只需要一个指针，则应该前向声明您的类，并在您需要了解该类的成员时包含它们的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:08:47.230

删除包含在 thirdclass.h 中的 firstclass.h。它导致在第三类之前定义第一类。当心递归包含。

要查看实际何时定义类（取决于您的编译器），请在实际类定义之前添加#pragma 消息。

# ios - CTFrameDraw在ios中从下到上画线

> ID：11813570
> 
> 赞同：0
> 
> 时间：2012-08-05T02:40:50.593
> 
> 标签：ios, cocoa

我有一些行已用 CTFramesetterCreateFrame 格式化，并且单词以正确的方式向上打印，但行顺序颠倒了，即第一行在底部，第二行从底部算起第二个，依此类推。我可以更改转换并使单词从前颠倒等，但我无法正确地获得线序

我到处检查过变换矩阵，它总是一样的——

```
CGAffineTransform a = CGContextGetTextMatrix (context); 
```

给我

```
a   CGAffineTransform   {...}
a   CGFloat 1
b   CGFloat 0
c   CGFloat 0
d   CGFloat -1
tx  CGFloat 0
ty  CGFloat 300 
```

这可能是一个菜鸟错误，但我找不到问题，我对 coretext 还很陌生，所以任何建议都将不胜感激。

OSX 10.7.4 在 IOS 模拟器中运行 IOS5.1 XCode 4.4 在 UIView 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T04:13:30.357

这似乎解决了它 - 看看这里[在 ios 上正面朝上绘制文本](http://www.ultrajoke.net/2011/08/quick-tip-drawing-core-text-right-side-up/) - 发布问题后总是找到答案

简而言之，您必须将坐标翻转回它们在 osx 上的状态，左下角为 0,0，然后它会以正确的方式向上绘制，您会认为它可能会更好一些...

```
CGContextSetTextMatrix (context, CGAffineTransformIdentity);
CGContextTranslateCTM(context, 0.0f, height_of_frame);
CGContextScaleCTM(context, 1.0f, -1.0f);

CTFrameDraw(FFrame, context); 
```

# java - Google App Engine java 将 jpa @OneToMany/@ManyToOne 替换为 objectify

> ID：11813571
> 
> 赞同：5
> 
> 时间：2012-08-05T02:41:20.953
> 
> 标签：java, google-app-engine, objectify

我有一个现有的谷歌应用程序引擎 java 应用程序与 jpa 一起运行，现在我正试图将对象化为许多不同的目的。

当前应用程序具有以下实体表示。

```
Class Parent{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    @OneToMany(cascade=CascadeType.ALL, mappedBy="parent")
    private List<Child> childs = null;
}

Class Child{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    @ManyToOne  
    private Parent parent;

} 
```

如何在 Objectify 中获得上述表示？我正在使用objectify4。
我见过@Parent，但在获取父实体时似乎无法直接加载子实体列表？

谢谢，

拉梅什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:09:54.077

Objectify 使用与关系数据存储和 ORM不同的[概念。](http://code.google.com/p/objectify-appengine/wiki/Concepts)关系是使用`Key`s 构建的，不会自动加载。[您可以在此处](http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Relationships)阅读有关 Objectify 中关系建模的信息。这种`@Parent`关系很[特别](http://code.google.com/p/objectify-appengine/wiki/BestPractices#Avoid_@Parent)，与 1:n 或 n:m 关系无关。

所以基本上你有

```
class Parent {
    Key<Child>[] childs;
}

class Child {
    Key<Parent> parent;
} 
```

然后您将通过 Objectfy 服务获取实体，例如

```
Parent aParent = ofy.get(aChild.parent); 
```

没有延迟加载的集合。如果你想构造一组对象，你需要明确地去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T21:50:41.687

我为自己的问题找到了解决方案。这是代码。

[https://github.com/rameshv1210/objectify-many-to-one/](https://github.com/rameshv1210/objectify-many-to-one/)

# html - a：悬停在图像周围的背景区域

> ID：11813572
> 
> 赞同：1
> 
> 时间：2012-08-05T02:43:02.917
> 
> 标签：html, css, background, hover

当悬停在图像上时，我想让图像外部的背景区域改变颜色。我想要与我网站上帖子底部的“相关帖子”类似的结果。即 [http://www.livecrafteat.com/eat/chicken-and-stuffing-in-the-crockpot/](http://www.livecrafteat.com/eat/chicken-and-stuffing-in-the-crockpot/)

我正在使用一个文本小部件，最终想要一行 2 个大小相同的图像，当悬停在上面时，背景会发生变化，就像我帖子底部的 YARR 插件一样。我将有 6 行这种表格格式，并尝试将其设置为尽可能干净地控制它们。我尝试分别设置以下 HTML 和 CSS 以使其工作但卡住了 - 特别是在悬停部分。

HTML：

```
<div class="popular-posts">
            <tbody>
                <tr>
<div class="pop-posts-left" width="160px" height="160px">
                    <td align="left" >
<div class="pop-posts-image-left"><a href="http://www.livecrafteat.com/live/meal-planning-template/"> <img src="http://www.livecrafteat.com/wp-content/uploads/2012/08/menu-plan-sidebar-thumbnail-2.jpg" />  </a></div>
</td>
</div>
<div class="pop-posts-right" width="160px" height="160px">
                    <td align="right">
<div class="pop-posts-image-right"><a href="http://www.livecrafteat.com/live/meal-planning-template/"> <img src="http://www.livecrafteat.com/wp-content/uploads/2012/08/menu-plan-sidebar-thumbnail-2.jpg" />  </a></div>
</td>
</div>
</tr>
</tbody>
</left>
</div> 
```

CSS：

```
.pop-posts-left {
    background: red;
    float: left;
    padding: 10px 15px 10px 15px;
    overflow: hidden;
}
.pop-posts-right {
    float: right;
    padding: 10px 15px 10px 15px;
    background: orange;
}
.pop-posts-left a:hover {
}
.pop-posts-image-left a:hover {
    background: green;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T03:01:23.020

您的 html 实际上完全无效。

*   你必须在里面放一个
*   应该只包含，不，就像你正在做的那样
*   在你从未打开它的时候，下面有一个

尝试先修复您的 html，因为这可能会弄乱您的结果。在[W3C 网站](http://validator.w3.org/) 上验证您的代码也是一个好主意。

之后，悬停效果应该很容易，只需执行@ChrisClower 建议的操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:49:46.227

`.pop-posts-left:hover { background: green; }`应该工作（例如）。如果您想将鼠标悬停在一个元素上以影响另一个元素，您可能需要 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T02:50:37.237

只需在容器中使用 ":hover" 伪类。它可以与任何选择器一起使用，而不仅仅是与更常见的“a”标签选择器一起使用。

示例：http: [//jsfiddle.net/davidbuzatto/pc78c/](http://jsfiddle.net/davidbuzatto/pc78c/)

也看看这些文档：[https ://developer.mozilla.org/en-US/docs/CSS/:hover](https://developer.mozilla.org/en-US/docs/CSS/:hover)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T02:51:57.900

这是你要找的[http://jsfiddle.net/MFx5E/1/](http://jsfiddle.net/MFx5E/1/)吗？

```
.pop-posts-left:hover {
    background: green;
}
.pop-posts-image-left a:hover {
    background: green;
}
.pop-posts-right:hover {
    background: green;
}
.pop-posts-image-right a:hover {
    background: green;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T02:52:44.720

原因，为什么你看不到你`background-color`定义的绿色`.pop-posts-image-left a:hover`是由于不透明的 jpg 图像造成的。另外没有添加一些填充到`.pop-posts-image-left`.

为了弄清楚这一点，只需添加以下内容，看看会发生什么：

```
.pop-posts-image-left {
    padding: 10px;
} 
```

# clojure - 使用 lein 将 cmd 行参数传递给程序的问题

> ID：11813573
> 
> 赞同：0
> 
> 时间：2012-08-05T02:43:07.237
> 
> 标签：clojure

我对clojure有点陌生，但我是一位非常有经验的程序员。

我编写了一个 clojure 程序来处理和评价 XMLTV 列表（供个人使用）。该程序运行良好。它还在运行时加载编写为 clojure 语句的规则并执行它们。我读过这意味着我不能“预编译”我的程序，我必须通过 REPL 运行它（像这样`"java -cp clojure-1.4.0.jar clojure-1.4.0.jar my-core.clj my-args"`）。如果这是错误的，请纠正我。

问题是，当我在 Windows 中运行它时，my-core.clj 中的“main”函数可以正常运行，但是当我尝试在 Ubuntu 12.04 下运行它时，它要么抱怨找不到 clojure/main，要么我的职能。我不想放弃，我尝试过`"lein run my-args"`（该项目是用 Leiningen 构建的），但我的程序作为*command-line*得到了 nil 。

我也尝试`-m namespace/func`过同样的结果。

我正在使用 Leiningen 1.7.1 和 Java 1.6.0_24 OpenJDK Client VM

有人知道我做错了什么吗？

问候索伦·斯文森

* * *

**谢谢！**

我做了3个改变，

1）我添加了`(:gen-class)`

2）我添加了一个：

```
(defn -main [cmd-line]
    (println (type cmd-line))
    (println cmd-line)
    (println (type command-line-args))
    (println command-line-args)) 
```

3) 我`(compile 'xmltvproc.core)`从 REPL跑了

之前，我通过调用我的“main”函数来结束 core.clj `(run-it *command-line-args*)`。我对 -main 的测试表明 cmd-line 是命令行，但*command-line-args*是 nil。

现在运行它可以`lein run arg1 arg2`工作，但是当我尝试时`java -cp ...`它仍然失败。

```
java -cp ./lib/clojure.jar ./classes/xmltvproc/core arg1 arg2
Exception in thread "main" java.lang.NoClassDefFoundError: //classes/xmltvproc/core

java -cp ./lib/clojure.jar xmltvproc.core arg1 arg2
Exception in thread "main" java.lang.NoClassDefFoundError: clojure/lang/IFn 
```

我已经尝试了所有我能想到的排列，结果始终是上述两种之一。

这是我的 project.clj 文件：

```
(defproject xmltvproc "1.0.0-SNAPSHOT"
    :description "Convert XMLTV listings to CSV file"
    :main xmltvproc.core
    :dependencies [[org.clojure/clojure "1.4.0"]]) 
```

我的 xmltvproc/classes/xmltvproc 有所有预期的 .class 文件

??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:53:18.087

我正在发布一些在 Linux 上运行的项目的源代码。这些信息是我创建可以执行的程序所需要的。

以下代码用于读取 .csv 输入的程序，将该数据映射到 html“表单”参数；调用 IIS 服务器，要求 accumail 验证数据（街道地址）；然后根据来自 Web 服务器的答案执行操作。

## 一、project.clj：请注意：main

```
(defproject addr-verify "1.0.0-SNAPSHOT"
  :description "TODO: add summary of your project"
  :dependencies [[org.clojure/clojure "1.2.1"]
                 [org.clojure/clojure-contrib "1.2.0"]
                 [clojure-csv/clojure-csv "1.2.4"]
                 [org.clojure/tools.cli "0.1.0"]
                 [clj-http "0.1.3"]]
   :main addr-verify.core) 
```

## 接下来，这里是addr-verify/src/addr_verify/core.clj的头文件。

请注意 (:gen-class) 的使用。

```
(ns addr-verify.core
  ^{:author "Charles M. Norton",
    :doc "addr-verify is a small Clojure program that 
    runs address verification through the 
     .
     .
     .

   "}

      (:gen-class)
      (:require [clojure.string :as cstr])
      (:require [clojure.contrib.str-utils :as ustr])
      (:require [clj-http.client :as client])
      (:use clojure-csv.core)
      (:use [clojure.tools.cli])
      (:import java.util.Date)
      (:import java.lang.Thread)
      (:import java.io.File)) 
```

我最终运行了 lein uberjar，然后我最终从 uberjar 创建了一个独立的可执行文件。

如果这对您没有帮助，请发布一些源代码和一个小程序。

不要让 Clojure 的版本让你停下来。我在家，有一段时间没有用新的资源更新我的笔记本电脑了。

## 编辑：

这是我用来解析命令行的内容：

```
; Parses for options passed in on the command line.

(defn parse-opts
  "Using the newer cli library, parses command line args."
  [args]
  (cli args
       (optional ["--in-file-name" ".csv input file" 
           :default "resultset.csv"] identity)
       (optional ["--out-file-name" ".csv pipe delimited output file" 
           :default "accumail_out.unl"] )))

; Main driver of the whole program.
(defn -main 
  [& args]
  (let [opts (parse-opts args)
        start-time (str (Date.))]

  .
  .
  . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:59:46.773

即使您使用提前编译，您也可以在任何地方使用 eval、load、read、load-file 和所有其余的动态编译代码。Clojure 不依赖于这些特性的 java 开发环境。所以你可以随意 AOT 编译到你心中的内容。

# python - 不要用完列表索引的最佳方法

> ID：11813574
> 
> 赞同：4
> 
> 时间：2012-08-05T02:43:14.917
> 
> 标签：python

假设我有 2D 列表，我想检查上一个/下一个元素是否等于某个值。确保我不会访问`list[-1][-1]`或的最佳方法是什么`list[len + 1][len + 1]`？

这是我正在尝试做的一个例子：

```
if list[y + 1][x] == value and list[y - 1][x] == value:
    do something
elif list[y][x + 1] == value and list[y][x - 1] == value:
    do something else
... # end so on 
```

除了执行以下操作，我看不到任何其他选项：

```
if y - 1 > 0 and y + 1 < len(list) and x - 1 > 0 and x + 1 < len(list[y]): 
```

这似乎不对...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T02:50:07.160

解决此问题的常用方法是在网格周围添加一些“填充”，其中包含指示您离开网格的标记值（例如`0`或`-1`或`None`或其他东西）。您的有效索引不是 from `0`to ，而是`size-1`from `1`to `size`（列表长度为`size+2`）。

# cakephp - 在 Cakephp 中缓存用户特定的信息，例如邮箱

> ID：11813580
> 
> 赞同：0
> 
> 时间：2012-08-05T02:44:56.813
> 
> 标签：cakephp, caching, cakephp-2.1

在 Cakephp 中，是否可以缓存用户特定的信息，例如邮箱，并在有新邮件时重新设置缓存。

也许在浏览器缓存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:28:34.650

我不太明白你想做什么？如果您想缓存用户特定且用户已登录，您只需将 UID 附加到缓存路径 - 这种方式仅适用于该用户。

```
$userSpecificCacheFile = 'my_file_name' . $uid; 
```

# python - 如何使用 Buildout 实现 App 版本切换？

> ID：11813585
> 
> 赞同：2
> 
> 时间：2012-08-05T02:46:50.717
> 
> 标签：python, virtualenv, buildout, gunicorn, supervisord

我的应用程序是用 Flask 开发的，并使用 buildout 来处理依赖隔离。我打算用 Gunicorn 和 supervisord 作为 wsgi 容器和进程管理器，前面有 Nginx 做负载均衡。这是部署新版本应用程序时的问题：所有内容都构建在子文件夹中，如何重新启动 gunicorn 服务器以便可以优雅地进行版本切换？

我当然想出了一些解决方案：

1.  抛弃 gunicorn 和 superviosrd，转而使用 apache mod_wsgi，因此在部署新版本时，我只需更改 .wsgi 文件中的文件夹，服务器就会重新启动。

2.  使用 virtualenv 并在其中安装 gunicorn、supervisord 以及我的应用程序包，因此在切换版本时我只需使用 supervisorctl 重新启动它。

有没有一种“纯粹的”构建方式可以完成这种情况？或者任何正在使用的生产解决方案都将受到赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:46:17.237

就像您的 point-mod_wsgi-at-a-different-folder 解决方案一样，您可以对 gunicorn/buildout 执行相同的操作。只需在不同的目录中设置您的最新构建，停止旧的 gunicorn 并启动新的。

当然，在停止一个和启动另一个之间会有短暂的延迟。

替代方案：使用不同的端口号设置新的，更改 nginx 配置并启动 ngnix，如果你真的想要零停机时间。

# windows - Windows 8 Metro 风格应用程序开发中是否不存在 System.Diagnostics.PerformanceCounter？

> ID：11813589
> 
> 赞同：2
> 
> 时间：2012-08-05T02:48:09.387
> 
> 标签：windows, windows-runtime

我正在尝试显示在 Windows 8 Metro 风格应用程序上使用的 RAM（使用 VS 2012）。

我正在尝试使用以下代码：

```
PerformanceCounter ramCounter; 
```

我收到一条错误消息，说 VS 2012 找不到 PerformanceCounter。

System.Diagnositcs 中似乎不存在它。如何在 win 8 风格的应用程序上显示 RAM 或 CPU？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:34:51.680

它不会出现在对象浏览器搜索结果中，因此 - WinRT 应用程序不支持它。

有时您还可以通过文档中的“**适用于**：桌面应用程序/Metro 样式应用程序”字符串（如此[处](http://msdn.microsoft.com/en-us/library/windows/desktop/hh162913%28v=vs.85%29.aspx)和[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/hh162913%28v=vs.85%29.aspx)）来判断特定 API ，但我认为只有当 API 是 Windows API 时才可用。

大多数 .NET API 不是 Windows API，如果它们在 WinRT 应用程序中不可用 - 它们不会记录在 Windows 文档站点上。MSDN 不包括这些“**适用于**”字符串。

# android - android 应用程序仅在 sdcard 可用时运行

> ID：11813594
> 
> 赞同：0
> 
> 时间：2012-08-05T02:49:11.320
> 
> 标签：android, sd-card, unmount

我的应用程序强烈需要 sdcard 上的数据。所以当android手机卸载sdcard时我卡住了，我的应用程序将被强制关闭。如果我的应用程序在卸载 sdcard 后启动，我可以检查并注意。但是当我的应用程序在后台运行时，用户卸载 sdcard 并返回到我的应用程序时，很难检查这种情况。我的应用程序有很多活动......有什么理想的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:55:20.853

`BroadcastReceiver`为`android.intent.action.MEDIA_MOUNTED`,简单注册两个`android.intent.action.MEDIA_UNMOUNTED`。只需检测它，然后正确停止程序的任何功能。无论如何（Nguyen Dinh Chien 先生）不知何故？

# r - 在 R 中，如何将整个命令行放入二元运算符的 sys.call() 中？

> ID：11813599
> 
> 赞同：6
> 
> 时间：2012-08-05T02:50:32.777
> 
> 标签：r, operators, operator-overloading, new-operator

我为 R 编写了一个二元运算符函数（即一个具有类似名称的函数，这样我就可以使用更方便的语法`%X%`而不是键入。我的目标是有一个包装器来执行诸如记录对其中的对象所做的事情之类的事情环境并检查“受保护”属性，该属性会在覆盖该对象之前警告用户。`%X%(a,b)``a %X% b``<-`

所有这些都有效，除了如果我尝试在函数内部做一些事情`a %X% b + c`，你所看到的就是`a %X% b`_ 而这也是它所做的一切；a 被赋予 b 的值，而 c 被完全忽略。`a %X% (b + c)`有效，`%X%(a, b + c)`但将其编写为二元运算符的全部目的是避免括号。

如果我覆盖`<-`，它`sys.call()`会看到它左右两侧的所有内容。为什么我的只能从命令行看到相邻的名称？

这是复制此问题的代码：

```
`%X%` <- function(...){
    print(deparse(sys.call()));
}

a %X% 3 + 1:10; 
```

期望的结果是“a %X% 3 + 1:10” 观察到的结果是“a %X% 3”

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T03:07:45.657

这与运算符优先级有关，请参阅`?Syntax`获取更多帮助。它说`%any%`像您要定义的特殊运算符 ( ) 比 binary 具有更高的优先级`+`，因此除了使用括号和 do 之外，您没有其他方法 (AFAIK) `a %X% (b + c)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T06:21:21.303

我想没有办法降低自定义运算符的优先级。但是，我想我找到了一个俗气的解决方法：*我可以命名我的操作员* `<<-`

我真的不明白`<-`调度是如何工作的，并且必须有几十种不同的特定于对象的方法`<-`（其中没有一个出现在`methods(`<-`)`中。我所知道的是，当我覆盖`<-`各种东西时会中断。

但是，`<<-`它的优先级接近`<-`，并且它并不是特别有用，因为对于您确实需要从函数或循环内部编写全局变量的偶尔情况，您可以使用`.GlobalEnv[['foo']] <- bar`or `assign('foo',bar,env=.GlobalEnv)`。

此外，由于我首先只是尝试在 .GlobalEnv 中记录和写保护对象，因此我分配的新含义`<<-`甚至与原始含义有些一致。

# javascript - 加载带有任意（更改）脚本名称的 JavaScript

> ID：11813601
> 
> 赞同：0
> 
> 时间：2012-08-05T02:51:17.187
> 
> 标签：javascript, security

> “像 Facebook 这样的网站使用动态更改的名称加载 javascript 文件，这会阻止它之前缓存 JavaScript 文件，因此无法进行这种攻击。”

[您可以在此处](http://media.blackhat.com/bh-us-12/Briefings/Alonso/BH_US_12_Alonso_Owning_Bad_Guys_WP.pdf)阅读有关此攻击媒介的更多信息。

加载更改名称的 JS 文件可以降低缓存中毒的风险——因为第三方无法预测要拦截哪些 JS 文件。

如果您知道如何在页面加载时动态更改 JS 文件的名称，或者可以链接到相关信息，我将不胜感激。这种知识对几乎任何人都是有价值的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:54:38.730

1.  为每个用户生成唯一的脚本密钥。（将密钥存储在用户表中，或者只使用键控哈希）

2.  更改您的`<script>`标签以引用包含密钥和脚本名称的特殊服务器端处理程序。（您可以使用路由引擎使 URL 更漂亮。

3.  在服务器端代码中，检查密钥是否与当前登录的用户匹配。
    如果密钥不存在或不匹配，则返回 404。（并记录安全审查请求）

这不适用于 CDN 或静态内容域。

# iphone - AppStore In App Purchase Usage - 检测可能的拒绝原因

> ID：11813609
> 
> 赞同：1
> 
> 时间：2012-08-05T02:53:01.657
> 
> 标签：iphone, ios, in-app-purchase

我有一项服务可以在我的应用程序中提供给我的用户。它可能被视为一个问题，您需要使用应用内购买来发送此问题，稍后再回复。

我不想实现基于帐户的应用程序，所以我使用其他唯一标识符来识别用户（提出问题，并能够看到您的问题/答案）。没有账户信息，不能使用基于信用的方法。

我可以实现应用内购买的唯一地方是问题的发送按钮，在哪里采取行动。苹果是否允许在这种情况下附加应用内购买功能。如果没有，任何人都可以提出另一种方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:58:56.850

根据之前的 IAP 经验，我认为 Apple 可能会对实际启动交易的发送按钮提出异议；对于用户来说，这并不是很明显会引发购买的东西，至少它可能会导致一些混乱。

更传统的方法是让用户购买“积分”来提问。他们可以从一个单独的屏幕一次购买一个或多个（这对您的销售来说可能是一件好事 - 以 20% 的折扣卖给他们一包 10 个，比如说，他们可能会购买更多）。积分数将显示在“发送”按钮旁边，如果他们没有积分，当他们点击“发送”时，会出现一个提醒，将他们引导到另一个屏幕购买积分。（点击当前的积分数/指示他们没有任何积分的文本也可能会显示此屏幕）

这种方法非常受欢迎——被大量游戏所使用——因此苹果评论者可能会立即认为这是一种好的/标准做法。

# grails - 为什么 grails 会返回一个空对象数组？

> ID：11813614
> 
> 赞同：0
> 
> 时间：2012-08-05T02:53:28.410
> 
> 标签：grails, groovy

在我的`create.gsp`页面上，我希望看到`districts`我的数据库中所有可用的列表。

```
<td valign="top" class="value ${hasErrors(bean: streamInstance, field: 'district', 'errors')}">
    <% println  ctv.District.list(); %> 
    <g:select name="district.id" from="${ctv.District.list()}" optionKey="id" value="${streamInstance?.district?.id}"  />
</td> 
```

但是，我看到该`<select>`语句不是空的，而是看不到任何名称。当我添加 时`println`，我看到：

```
 District = [
              null, null, null, null, null, null, null, null, null, 
              null, null, null, null, null, null, null, null, null, 
              null, null, null, null, null, null, null, null, null, 
              null, null, null, null, null, null, null, null, null, 
              null, null, null, null, null, null, null, null, null, 
              null, null, null, null, null, null, null, null, null, 
              null, null, null, null, null, null
   ] 
```

我不知道为什么是`District`一个对象数组`null`。我期待看到`district names`. 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:57:14.317

你确定它们是空的吗？还是`toString()`方法返回`null`or `"null"`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:33:06.093

您是否修改了地区？假设它是一个域对象并且您处于开发模式，grails 将重置内存数据的任何自定义加载。在这种情况下，重新启动可能会解决问题。

# algorithm - 用链表解决hash冲突，下一步怎么识别item

> ID：11813616
> 
> 赞同：1
> 
> 时间：2012-08-05T02:53:59.040
> 
> 标签：algorithm, hash, linked-list, theory

我正在使用一个非常简单的哈希算法，将一个字符串映射到一个 32 位整数，假设哈希不好，stringB 和 stringA 都有数字 123，现在我应该遍历链表，尝试将所有项目与我的项目进行比较一直在寻找，直到我找到合适的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T03:00:26.733

是的，每个桶的链表是一种方法：如果项目在列表中，你就完成了；否则，在列表末尾添加一个新项目。

另一种是循环尝试表中的下一个桶，直到找到一个空桶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:00:59.400

假设您的散列策略基于使用 LinkedList 的封闭散列，并且您的 linled 列表排序基于插入顺序，我将遍历项目并在内容上比较它们，`if ( string1.compareTo(string2) == 0 ){ ...`如果您想保留`equals()`散列，则可能与它们进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T19:59:26.553

为了处理散列冲突，一种合适的方法是重新散列冲突的（后续）值。很难估计原始哈希函数的运行时行为，这意味着冲突的发生是未知的。使用另一个散列函数散列冲突值并将它们存储在二级表中仍然是总体上最佳的时间查找。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T08:38:34.573

那是对的。你也可以参考这个网站[http://www.strchr.com/hash_functions](http://www.strchr.com/hash_functions)（除了 Wiki，当然！）

搜索映射到特定存储桶的元素可以有不同的变体——你可以有多级哈希表，甚至是二叉搜索树，而不仅仅是一个链表！

# sql - 从各种格式的字符串中提取日期

> ID：11813618
> 
> 赞同：0
> 
> 时间：2012-08-05T02:54:19.697
> 
> 标签：sql, nlp, postgresql-9.1

我试图从 SQL 数据库中非常大的文本样本中提取尽可能多的日期（YMD、YM 甚至只是 Y）。数据库中的所有文本都是简单的英语，并且还包含大量数字。我要做的是尽可能多地找到这些日期，将它们识别为日期，然后提取它们代表的日期以及找到的字符串。除了想出所有可能的正则表达式来覆盖像 1/23/1985 这样的情况，同时还包括像“1980 年代”和“1962 标志着开始”这样的情况之外，有没有办法解决这个问题。有没有一个项目已经采取了这个例子？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:37:44.873

看来你需要混合：

[1) 使用带有子字符串 postgresql](http://www.postgresql.org/docs/9.1/static/functions-matching.html)函数的正则表达式从日期中获取子字符串：

```
substring(string from pattern)
substring('foobar' from '%#"o_b#"%' for '#')   oob 
```

2) 处理所有可能的日期格式。[匹配有效日期的正则表达式](https://stackoverflow.com/questions/51224/regular-expression-to-match-valid-dates)可以作为起点。

也许您可以编写自己的[用户定义函数](http://www.postgresql.org/docs/8.0/static/xfunc.html)来进行这种翻译。不要忘记与我们分享；）

***已编辑***

如果这是一次性的工作。您可以导出日期并使用[python parsedatetime 库](http://code.google.com/p/parsedatetime/)来解析日期，然后返回数据库。

> ```
> parsedatetime is able to parse, for example, the following:
> 
> August 25th, 2008
> 25 Aug 2008
> Aug 25 5pm
> 5pm August 25
> next saturday
> tomorrow
> next thursday at 4pm
> at 4pm
> eod
> tomorrow eod
> eod tuesday
> eoy
> eom
> in 5 minutes
> 5 minutes from now
> 5 hours before now
> 2 hours before noon
> 2 days from tomorrow 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:17:55.817

这取决于您的问题未来的复杂性（例如，更多格式和其他可能性），但我认为您可以检查一些时间标记器，它们通常应该处理您认为的大多数情况。你可以从[Stanford SUTime](http://nlp.stanford.edu/software/sutime.shtml)开始，它实际上也使用了规则。

# django - Django：将 InMemoryUploadedFile 存储在磁盘上

> ID：11813620
> 
> 赞同：1
> 
> 时间：2012-08-05T02:54:49.787
> 
> 标签：django, forms

我有预先通过 AJAX 上传文件的 HTML 表单。所以在 django 后端我有以下视图代码，它处理这个 AJAX 调用：

```
@csrf_exempt
def book_upload(request):
    if request.method == 'POST':
        log.info('received POST to main book_upload view')
        if request.FILES is None:
            return HttpResponseBadRequest('Must have files attached!')

        log.info('request has FILES')

        file_types = (u'file_pdf', u'file_djvu', u'file_doc', u'file_epub', u'file_djvu', u'file_fb2', u'file_txt', u'file_chm', u'file_other');
        file = None
        file_type = None
        for ft in file_types:
            if ft in request.FILES:
                file = request.FILES[ft]
                file_type = ft
                break

        if file is None:
            return HttpResponseBadRequest('Bad file type')

        file_path = file.temporary_file_path()

        result = {"path": file_path, "format": file_type}
        response_data = simplejson.dumps(result)

        if "application/json" in request.META['HTTP_ACCEPT_ENCODING']:
            mimetype = 'application/json'
        else:
            mimetype = 'text/plain'
        return HttpResponse(response_data, mimetype=mimetype)
    else:
        return HttpResponse('Only POST accepted') 
```

但是这段代码存在问题。它适用于超过 2.5 mb 的文件（因为使用的 TemporaryUploadedFile 文件大小默认设置为 > 2.5 mb）。因此，此代码基于 request.FILES 包含具有 TemporaryUploadedFile 类型的对象的想法。但在某些情况下，我会收到大小 < 2.5 mb 的文件。request.FILES 包含 InMemoryUploadedFile。

所以，我想做以下事情 - 通过 ajax 上传的每个文件都应该临时存储。并且内存不是一个好地方 - 因为最终重新存储文件（在表单提交之后）不会在内存中包含有关此文件的信息。因此，任务是将 InMemoryUploadedFile“转换”为 TemporaryUploadedFile - 可能吗？

附言

也许我应该简单地从 InMemoryUploadedFile 对象读取文件内容并将其手动写入磁盘（例如 /tmp 目录）。你怎么想？

聚苯乙烯

还有一个问题 - 事先上传到临时目录是个好主意吗？:) 在我的情况下，表单有 6 个 input[type=file] 元素，每个元素都上传不同的文件类型（六个用于 UI 需求）。

蒂亚！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T03:14:44.453

您可以覆盖`FILE_UPLOAD_HANDLERS`settings.py中的默认值

```
# only use TemporaryFileUploadHandler for file uploads
FILE_UPLOAD_HANDLERS = (
    'django.core.files.uploadhandler.TemporaryFileUploadHandler',
) 
```

# c# - 禁用 ToolStripMenu 项

> ID：11813621
> 
> 赞同：0
> 
> 时间：2012-08-05T02:54:53.217
> 
> 标签：c#, toolstripmenu

我可以禁用主要的 toolStripMenu 项目，但不能禁用子菜单中的项目。例如，当我运行“选项”下方的代码时，我有一个名为“选项”的菜单项被禁用，但“选项”下的所有菜单项都没有被禁用。此代码不应该禁用 menuStrip1 的所有菜单项，包括子菜单项吗？请帮忙。

```
 foreach (ToolStripMenuItem item in  menuStrip1.Items)
 {                    
     item.Enabled = false;               
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:57:50.727

`Items`集合不是递归的；它仅；y 包括直接子代。

如果要遍历后代，则需要在`Items`每个项目的集合上再次运行循环。

# php - 关联数组中的未定义索引和 MySQL 语法中的错误

> ID：11813624
> 
> 赞同：0
> 
> 时间：2012-08-05T02:56:10.423
> 
> 标签：php, mysql

尝试将数据插入数据库表时，出现以下错误：

> 注意：未定义索引：第 29 行 C:\xampp\htdocs\blog\newentry.php 中的 follower_user_id
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''post', 12, NOW(), NOW())' 附近使用正确的语法

相关代码如下：

```
$node_sql = "SELECT * FROM nodes WHERE followed_blog_id=".$row['id']." order by id DESC;";
    $node_result = mysql_query($sql);

while ($node_row = mysql_fetch_assoc($node_result)){

            $event_sql = "INSERT INTO events (followed_id, follower_id, type, item_id, last_active, date) VALUES (".$row['id'].", ".$node_row['follower_user_id'].", 'post', ".$item_id.", NOW(), NOW());";
            mysql_query($event_sql) or die(mysql_error());
        } 
```

虽然通知说索引“follower_user_id”在第 29 行未定义，但我检查了数据库表，它是正确拼写的正确索引，所以我不知道是什么导致了这个问题。我还检查了 SQL 语句的语法，没有发现任何问题。我在这里忽略了什么？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:11:03.580

第 2 行 $node_result = mysql_query($sql); 应该可能使用 $node_sql 作为查询调用中的变量。我认为生成的 INSERT 语句有一个空白 $node_row['follower_user_id'] 所以有两个逗号之间没有任何内容，导致 sql 解析器哭泣:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:07:21.500

我找不到有关该问题的评论链接，因此我将其发布为答案。

您在“post”上使用单引号，而其他所有值都用双引号括起来。

提示：在双引号语句中，您可以自由地单独使用变量。简单的 SQL 在眼睛上。

这是 SQL INSERT 行的更新版本：

```
$event_sql = "INSERT INTO events (followed_id, follower_id, type, item_id, last_active, date)
              VALUES ({$row["id"]}, {$node_row["follower_user_id"]},
                      `post`, $item_id, NOW(), NOW();"; 
```

# php - wordpress 为特定图像添加“最后一课”

> ID：11813631
> 
> 赞同：1
> 
> 时间：2012-08-05T02:58:55.690
> 
> 标签：php, jquery, wordpress

我的主索引页面上列出了 4 张图片作为小型投资组合展示，每个 div 类都具有“margin-right”属性，因此我会找到一种方法来添加“last class”以删除该特定属性。

我目前使用的代码如下：

```
<div id="latestlistings" >
    <div class="inner">
        <?php $recent = new WP_Query('post_type=listing&post_status=publish&posts_per_page='.get_option('wp_recentlistingsnumber_home')); ?>
        <h3><?php echo get_option('wp_heading_recentlistings') ?></h3>
        <?php if ($recent->have_posts()) : while ($recent->have_posts()) : $recent->the_post(); ?>
        <?php include 'includes/variables.php' ?>
        <div class="latestlisting">
        <?php $sliderimages = get_post_meta($post->ID, 'images_value', true);  
        if ($sliderimages) {
            $arr_sliderimages = explode("\n", $sliderimages);
            } else {
            $arr_sliderimages = get_gallery_images();
            }
            $firstimage = $arr_sliderimages[0];
            $arr_sliderimages = parse_url($firstimage);

            $resized = timthumb(100, 200, $arr_sliderimages[path], 1);
        ?>  
        <a href="<?php the_permalink(); ?>"><img width="200" height="100" src="<?php echo $resized ?>" /></a>
        <div class="shadow-small"></div>

    </div>
</div> 
```

有没有人有想法或建议如何以最好的方式实现这一目标？一些建议将不胜感激 - 非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T03:02:20.570

您可以使用`:last`选择器或`eq()`方法，请尝试以下操作：

```
$(document).ready(function(){
    $('.latestlisting:last').addClass('last');
    // or $('.latestlisting').eq(3).addClass('last');
}) 
```

# linux - Customize .mod.c MODULE_ALIAS in Linux Kernel Module

> ID：11813635
> 
> 赞同：2
> 
> 时间：2012-08-05T03:00:16.993
> 
> 标签：linux, module, compilation, kernel, driver

I need to modify a kernel module located in Linux 3.2.0\. Within `drivers/staging/bcm`, the driver should support the device id `198F:015E`, instead in the `InterfaceInit.h` file, it was mentioned as `198F:15E`, I changed that to `015E` but still, after successful compilation, the new device id's are not being picked up by the kernel.

Here is the output of `modinfo`:

```
filename:       <somewhere/>bcm_wimax.ko
license:        GPL
version:        5.2.45
description:    Beceem Communications Inc. WiMAX driver
srcversion:     D6016018ABCFFD16AF31D22
alias:          usb:v19D2p0007d*dc*dsc*dp*ic*isc*ip*
alias:          usb:v0489pE017d*dc*dsc*dp*ic*isc*ip*
alias:          usb:v19D2p0132d*dc*dsc*dp*ic*isc*ip*
alias:          usb:v198FpBCCDd*dc*dsc*dp*ic*isc*ip*
alias:          usb:v198Fp0220d*dc*dsc*dp*ic*isc*ip*
alias:          usb:v198Fp0210d*dc*dsc*dp*ic*isc*ip*
alias:          usb:v198Fp0300d*dc*dsc*dp*ic*isc*ip*
depends:        
vermagic:       3.2.0-26-generic-pae SMP mod_unload modversions 686 
parm:           debug:Debug level (0=none,...,16=all) (uint) 
```

My `198F:015E` is still not appearing! Strangely after beginning the compilation, I can see a file called bcm_wimax.mod.c getting generated inside the module source folder. Inside that, I found out the `modinfo` alias thing. Which looks like:

```
 #include <linux/module.h>
 #include <linux/vermagic.h>
 #include <linux/compiler.h>

 MODULE_INFO(vermagic, VERMAGIC_STRING);

 struct module __this_module
 __attribute__((section(".gnu.linkonce.this_module"))) = {
  .name = KBUILD_MODNAME,
  .init = init_module,
 #ifdef CONFIG_MODULE_UNLOAD
  .exit = cleanup_module,
 #endif
  .arch = MODULE_ARCH_INIT,
 };

 MODULE_INFO(staging, "Y");

 static const struct modversion_info ____versions[]
 __used
 __attribute__((section("__versions"))) = {
 };

 static const char __module_depends[]
 __used
 __attribute__((section(".modinfo"))) =
 "depends=";

 MODULE_ALIAS("usb:v198Fp0300d*dc*dsc*dp*ic*isc*ip*");
 MODULE_ALIAS("usb:v198Fp0210d*dc*dsc*dp*ic*isc*ip*");
 MODULE_ALIAS("usb:v198Fp0220d*dc*dsc*dp*ic*isc*ip*");
 MODULE_ALIAS("usb:v198FpBCCDd*dc*dsc*dp*ic*isc*ip*");
 MODULE_ALIAS("usb:v19D2p0132d*dc*dsc*dp*ic*isc*ip*");
 MODULE_ALIAS("usb:v0489pE017d*dc*dsc*dp*ic*isc*ip*");
 MODULE_ALIAS("usb:v19D2p0007d*dc*dsc*dp*ic*isc*ip*");

 MODULE_INFO(srcversion, "D6016018ABCFFD16AF31D22"); 
```

But I tried to modify `bcm_wimax.mod.c` but after compiling, the file got reverted back to it's original condition, removing my edits. How can I get to add my `198f:015e` to the module alias section?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T08:26:31.750

`198F:015E` is the same as `198F:15E`

Looking at the kernel source it seems you are interested in `BCM_USB_PRODUCT_ID_SYM`, but the device is not present in `InterfaceUsbtable` `drivers/staging/bcm/InterfaceInit.c`.

You can add it and hope the driver support that device as well.

# c++ - 销毁时自动删除元素的 C++ 容器

> ID：11813636
> 
> 赞同：1
> 
> 时间：2012-08-05T03:00:21.983
> 
> 标签：c++, list, reference, destructor

我想在 C++ 中创建一个引用列表或映射，它会在销毁时自动删除其元素。这是一个展示这个想法的结构。

```
class Foo;

class Bar
{
    Foo foo;
};

void main(void)
{
    std::vector<Foo> foos;

    {
        Bar bar;
        foos.push_back(bar.foo);

        // foos[0] should be the same reference as bar.foo
    }

    // bar is now destructed
    // foos.size() should be 0
} 
```

我的代码有两个问题。当`push_back()`使用 std::vector 调用时，它会创建 Foo 对象的副本。这将是不可接受的，因为 的元素`foos`应该反映对 进行的任何更改`bar.foo`。其次，即使`foos`向量可以存储引用，Foo 对象在离开创建的范围后也不会从列表中删除`bar`。理想情况下，我希望 Foo 引用`foos`在其销毁时被删除。

在我实施自己的解决方案之前，我很想知道提供此解决方案的任何第三方库（可能是 Boost 吗？），或者我应该为此使用的任何适当技术或策略。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T03:03:03.903

我认为最好的选择是使用弱指针容器。（如果您的编译器由于某种原因不支持 C++11 或 TR1，则可在 Boost 中使用。）

假设你正确地初始化了东西，当目标被破坏时，弱指针会自动失效。

这是一些示例代码，用于在弱指针容器中获取所有有效指针。

```
template <class T>
std::vector<std::shared_ptr<T> > MassLock(const std::vector<std::weak_ptr<T> >& weakptrs)
{
    std::vector<std::shared_ptr<T> > sharedptrs;

    for(unsigned int i=0; i<weakptrs.size(); ++i)
    {
        if (std::shared_ptr<T> temp = weakptrs.at(i).lock())
        {
            sharedptrs.push_back(temp);
        }
    }

    return sharedptrs;
} 
```

以下是清除所有无效指针的方法。

```
template <class T>
struct isInvalid : public std::unary_function<T, bool>
{
    bool operator() (T rhs) { return !rhs.lock(); }
};

template <class T>
void EraseInvalid( std::vector<T>& targetlist )
{
    targetlist.erase( remove_if(targetlist.begin(), targetlist.end(), isInvalid<T>() ), targetlist.end());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T03:05:18.273

如果您需要对同一个对象的多个引用，则可能需要一个“智能”指针容器，例如`std::shared_ptr`（如果您没有 C++11，则需要一个来自 Boost 的指针）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-11T16:33:48.557

通过使用weak_ptr（Antimony 建议）更改您的列表以保存引用，并自动删除被破坏的元素，如下所示。

首先让我们澄清一些措辞：你的标题应该是“C++ 容器，它在被破坏时自动删除对元素的引用”，因为删除一个元素实际上会破坏它，所以你不希望它在销毁时被“删除”，而是希望从容器中删除对它的引用。

```
std::list<std::weak_ptr<Foo>> foos;

{
    // create a new entry in the container
    const auto& iter = foos.insert(foos.end(), std::weak_ptr<Foo>());
    // create an object of type "Foo" and store it in a shared_ptr
    std::shared_ptr<Foo> foo
        (new Foo
        // set a custom deleter that actually deletes the object
        // AND erases it from the container
        , [&foos, iter](Foo* ptr)
            {
                delete ptr;
                foos.erase(iter);
            }
        );
    // set the pointer to the element into the container
    *iter = foo;
}

// the shared_ptr "foo" ran out of scope;
// as there is no further strong reference to its object
// , the custom deleter was called which has removed the entry from the container
// so foos.size() is now 0 
```

请注意，我将容器从向量更改为列表，因为向量可能会使迭代器无效（传递给自定义删除器，请参阅[是否调整向量大小使迭代器无效？](https://stackoverflow.com/questions/1624803/does-resizing-a-vector-invalidate-iterators)）而列表不会。如果要坚持使用向量，可以使用索引作为传递给自定义删除器的元素的引用，但请注意，在 end() 之前将元素插入向量会破坏此引用。

# php - Docx to HTML using phpdocx

> ID：11813641
> 
> 赞同：2
> 
> 时间：2012-08-05T03:01:27.667
> 
> 标签：php, xml, xml-parsing, ms-word

I'm having troubles with transforming .docx to html... I'm using [PHPDOCX FREE](http://www.phpdocx.com/download) to handle this problem... I have some problems with it and I was able to determine where the problem was.. it's in the next piece of code:

```
$xmlDOM = new DOMDocument();
$xml = str_replace('</w:wordDocument>', '', $xml);
$xml = preg_replace(
  '/(<w:wordDocument)+(.)*(><w:body>)/', '<w:body>', $xml
 ); 
```

escpecially in the 'preg_replace' function... it's making the server so busy... so I can't work anything until I restart the server...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:09:58.073

Try replacing this :

```
$xml = preg_replace(
  '/(<w:wordDocument)+(.)*(><w:body>)/', '<w:body>', $xml
 ); 
```

By this :

```
$xml = preg_replace(
  '/<w:wordDocument.*?><w:body>/', '<w:body>', $xml
 ); 
```

Or just (if the wordDocument tag is always folowed by body tag) :

```
$xml = preg_replace(
  '/<w:wordDocument.*?>/', '', $xml
 ); 
```

Using parentheses makes php use more mamory. Wich PHP version you got ?

# java - 如何在 Java 中将视图文件输出为 ajax 响应？

> ID：11813643
> 
> 赞同：1
> 
> 时间：2012-08-05T03:02:31.397
> 
> 标签：java, ajax, jsp, servlets

我是一名 PHP 开发人员，但正在过渡到 Java。（此时对 Java 非常陌生）

有没有办法对 Servlet 进行 ajax 调用，并以单独的 .jsp 文件的输出进行响应（而不是直接在 Servlet 中创建的 html 或 json）？

这是一个使用 Zend 框架的常见做法的示例，如果可能的话，我想用 Java 来做这件事：

```
public function myAjaxCallAction(){
    $this->view->someVar = 'whatever';
    $this->view->hello = 'world';
    $output = $this->view->render('someViewScript.phtml'); // the above vars are in this view
    echo $output;
} 
```

再次对 java 非常陌生，任何与这种情况有关的建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T03:13:19.567

只需尝试加载所需的 .jsp。通常您将使用 JSP 片段 (.jspf)。如果要加载其内容，可以执行以下操作：

您的页面：

```
... content ...
<div id="container"></div>
... content ... 
```

上面页面的Javascript（使用jQuery）：

```
$(function(){
    $( "#container" ).load( "pathToYoutJsp/file.jsp", { someVar: "whatever", hello: "world" } );
}); 
```

将被加载的 JSP 将类似于：

```
... content ...
${param.someVar} foo foo foo ${param.hello}
... content ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T12:50:53.090

是的，如果我正确地回答了您的问题，那么您想要做的是对 JSP 文件的简单 AJAX 请求并获得响应。执行以下操作：

在客户端 Javascript 中：

```
var xmlHttp = new XMLHttpRequest(); 
xmlHttp.open( "GET","ajaxreq.jsp?query=John", false ); 
xmlHttp.send(); 
return xmlHttp.responseText;
//returns the response from server. here it is "Hello John" 
```

在服务器 ajaxreq.jsp 中：

```
<% 
..              //import required libraries and other application logic
out.print("Hello "+request.getParameter("query"));
..
%> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T15:41:36.077

是的，您可以，在分派之前使用 request.setAttribute 然后分派到您的单独页面

```
request.setAttribute("someVa", "whatever");

RequestDispatcher requestDispatcher; 

requestDispatcher = request.getRequestDispatcher("/thankYou.jsp");

requestDispatcher.forward(request, response); 
```

请参阅以下链接[redirect jsp from servlet RequestDispatcher](https://stackoverflow.com/questions/7962989/redirect-jsp-from-servlet-requestdispatcher)

# c - 使用 SDL 写入 GTK2 窗口

> ID：11813645
> 
> 赞同：1
> 
> 时间：2012-08-05T03:03:23.253
> 
> 标签：c, gtk, sdl

我正在尝试学习`SDL`并希望将其`GTK2`用作`Centos 5.8`. 我已经查看了一些示例代码，但到目前为止我还无法编译。

例如，我尝试了这个[sdl-gtk-demo](http://www.libsdl.org/projects/gtk-demo/)，但它似乎需要旧版本的`GTK`?

应用程序在小部件或窗口`SDL`上绘制需要什么？`GTK2`我的设置如下：

1.  Centos 5.8
2.  GTK2
3.  Centos 5.8 附带的标准 GCC

因为这是针对嵌入式系统的，所以我无权使用更新的`Centos`发行版。存在类似的问题，但我不相信他们谈论使用如此旧版本的`Centos`.

编辑：所以也许一个解决方案可能是编写一个独立的`SDL`应用程序，它使用 OpenGL 来做我的图像动画并写入一个`GTK2`小部件的 X11 窗口 ID。这看起来是一种合理的方法吗？

# php - osCommerce 认为表丢失，但它存在于数据库中

> ID：11813646
> 
> 赞同：1
> 
> 时间：2012-08-05T03:04:24.733
> 
> 标签：php, database, oscommerce

当我尝试登录 osCommerce 管理员时，它显示以下错误：

> 1146 - 表 'millakid_fbstore.TABLE_ADMINISTRATORS' 不存在
> 从 TABLE_ADMINISTRATORS 限制 1 中选择 id
> [TEP STOP]

但是该表已经存在于数据库中。为什么会出现这个错误，我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T20:40:30.853

您的表未在 database_tables.php 文件中定义。

每当您看到 osCommerce 报告数据库表不存在，并且表名全部大写并带有`TABLE_`前缀时，您应该仔细检查 database_tables.php（位于相关的包含文件夹中）。

在这里，您可能会遗漏与此类似的一行：

```
define('TABLE_ADMINISTRATORS', 'administrators'); 
```

在 PHP 中，约定是用所有大写字母编写的变量是需要或已经在代码库中的某个位置定义的常量。

# android - 如何在 android 应用程序中保存数据并仅在我从服务器更改数据时更新它？

> ID：11813652
> 
> 赞同：0
> 
> 时间：2012-08-05T03:06:00.757
> 
> 标签：android

我正在为古吉拉特邦的农民构建一个应用程序。所以当他们安装它时，他们应该从我的服务器获取数据。之后，如果我不更改服务器中的数据，应用程序数据也应该没有变化。我的想法是节省数据费用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:23:57.380

要存储数据，您可以使用 sqlitedatabase：http: [//developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

拥有从服务器获得的某种“当前数据修订”变量。

```
if(currentRevisionNumber == revisionNumberFromServer())
{
    //do nothing
}
else
{
    updateDataFromServer();
} 
```

我不确定是否有更好的方法来做到这一点，但这是我想到的第一个想法。

# android - 如何通过音量控制来控制通知音量？

> ID：11813656
> 
> 赞同：0
> 
> 时间：2012-08-05T03:07:15.413
> 
> 标签：android, notifications, volume, preference

我有一个应用程序有音量偏好，我会用它来控制通知音量。在我的布局代码下方：

```
<VolumePreference
    android:name="Volume Preference"
    android:summary="Notification Volume"
    android:title="Notification Volume"
    android:key="notifVolPref"/> 
```

但我不知道，如何在课堂上实现它？

# css - 导航都挤满了

> ID：11813661
> 
> 赞同：0
> 
> 时间：2012-08-05T03:08:42.360
> 
> 标签：css, nav

刚刚获得有关 z-index 问题的帮助 - 谢谢大家！

我希望这个网站也看起来像这样：[http ://cl.ly/IWgu](http://cl.ly/IWgu)

当您将鼠标悬停在父页面上时，它会显示该页面的子菜单等。

这是网站：[http ://tempsmz.hostzi.com/](http://tempsmz.hostzi.com/)

问题是，一切都挤满了！对于第一个父页面，我有 2 个父页面和 3 个子菜单，但是都很狭窄。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T03:27:49.963

得到它的工作，只是按照他们在 z-index 线程上所说的去做。我只需要添加位置：相对于#siteHeader 和#site div，然后通过css 指定背景颜色。谢谢大家，这个网站太棒了！

# mongodb - 停止在 mongodb 中排出分片

> ID：11813664
> 
> 赞同：3
> 
> 时间：2012-08-05T03:09:13.800
> 
> 标签：mongodb

```
--- Sharding Status --- 
  sharding version: { "_id" : 1, "version" : 3 }
  shards:
    {  "_id" : "set1",  "host" : "set1/m1.example.com:27018,mr1.example.com:27018,mrb1.example.com:27018" }
    {  "_id" : "set2",  "draining" : true,  "host" : "set2/m2.example.com:27018,mr2.example.com:27018,mrb2.example.com:27018" }
    {  "_id" : "set3",  "host" : "set3/m3.example.com:27018,mr3.example.com:27018,mrb3.example.com:27018" } 
```

我错误地从分片集群中删除了 set2，它开始排空，我该如何停止排空？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-25T15:17:47.120

RemoveShard 将启动排空过程，但没有 StopRemoveShard 命令。没关系，还没有命令，因为手动停止进程很容易。

Draining 只是平衡器开始将块从标记的分片（正在耗尽）中移出的状态。您可以通过删除分片元数据配置上的特殊“排水”字段来停止排水。

```
//connect to a mongos server with the mongo javascript shell
use config
//unset draining from all shards
db.shards.update({},{$unset:{draining:true}}, false, true) 
```

完成此操作后，平衡器将恢复正常平衡，不再消耗分片。

# json - 为 Dojo 中的 xhr 请求设置默认的应用程序范围的超时（这样 JsonRest 调用也会受到影响）

> ID：11813665
> 
> 赞同：1
> 
> 时间：2012-08-05T03:09:33.610
> 
> 标签：json, dojo

我刚刚发现在 Dojo 中没有办法为 xhr 调用设置应用程序范围的超时。从理论上讲，我可以轻松地为 xhr 创建自己的包装器并使用它。但是，我正在使用 JsonRest 存储（目的是只使用存储与应用程序中的数据进行交互）。

令人惊讶的是，没有办法为 Dojo 中的 JsonRest 调用设置超时。

[http://mail.dojotoolkit.org/pipermail/dojo-interest/2012-April/065594.html](http://mail.dojotoolkit.org/pipermail/dojo-interest/2012-April/065594.html)

有没有办法重载默认的 xhr 调用而不必保留我自己的 JsonRest 副本......？例如，我可以用方面来做吗？想法/评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:31:58.583

最简单的方法可能是一些好的老[猴子补丁](http://en.wikipedia.org/wiki/Monkey_patch)。

```
var old_xhr = dojo.xhr;
dojo.xhr = function(options) {
  var opts = options || {};
  opts.timeout = Math.min(opts.timeout || Number.MAX_VALUE, 1000);
  return old_xhr(options);
} 
```

这将为该`dojo.xhr`方法的所有用户应用 1 秒的最大超时。将 AMD 加载程序与每个模块都明确需要的基础 dojo 一起使用会有点棘手`dojo/_base/xhr`，但可以通过使用 dojo 加载程序的一些高级别名功能映射`dojo/_base/xhr`到您自己的模块来完成。

# jquery - jQuery：内联块元素在追加（到）时在列表项中移动

> ID：11813670
> 
> 赞同：0
> 
> 时间：2012-08-05T03:11:31.047
> 
> 标签：jquery, append

在我的脚本中，我将删除列表项并用从脚本收集的数据替换它们。奇怪的是，内联块元素在重新附加时会移动 x%。

[这是一个小提琴，让你看看发生了什么](http://jsfiddle.net/inhan/FeDxk/)。我在 Safari 5.1.7 (Mac) 和 Firefox 14.0.1 (Mac) 中尝试过。我认为这可能是渲染问题，但问题显然与此无关。我检查了我写的样式以及两者的计算样式（之前和之后），我找不到任何不同的地方。

有人知道发生了什么吗？

**编辑：**
对我来说，结果是：

> **a1：** 54
> **格：** 75
> **a2：** 96
> 
> **a1:** 54
> **div:** 70 <== 注意 5px 偏移
> **a2:** 86 <== 注意 10px 偏移 (5+5)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T03:35:29.147

在原始 HTML 中，元素之间有空格（特别是换行符），在渲染时会变成一个空格。

但是当在你的 JavaScript 中构造 HTML 时，元素之间没有空格，因此它们直接相邻呈现，导致它们向左移动。

见[http://jsfiddle.net/barmar/FeDxk/2/](http://jsfiddle.net/barmar/FeDxk/2/)

# python - 如何将 zlib 数据插入 Mongo？（Unicode 问题）

> ID：11813677
> 
> 赞同：2
> 
> 时间：2012-08-05T03:12:57.040
> 
> 标签：python, mongodb, unicode, zlib

在 python 中，我想将 zlib.compress 的输出插入到 Mongo。

但是，我收到以下错误：

“文档中的字符串必须是有效的 UTF-8”

我的理解是 Mongo 可以处理字节串。如何将压缩数据插入数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T03:53:08.730

您需要使用 pymongo 的[`pymongo.binary.Binary`](http://api.mongodb.org/python/1.5.1/api/pymongo/binary.html#pymongo.binary.Binary)类来包装二进制压缩数据，使其不被视为字符串。

# javascript - Skydrive API for Javascript 中的回调 URL

> ID：11813679
> 
> 赞同：0
> 
> 时间：2012-08-05T03:13:26.457
> 
> 标签：javascript, api, onedrive

我正在使用 Javascript 连接到 Skydrive API。我的第一步是向发起人授予 oAuth 权限。我所做的是将 uri 回调到我自己的网站。每当我连接到服务时，它都会打开我的回调 uri（在获取范围和权限之后）。然后我有我的回电 uri

```
mydomain.com#accessToken=dsfe23423v{710 chars} 
```

问题是我使用的是纯客户端 JS/HTML/HTML%.. 我无法捕获这个访问令牌，我必须手动对其进行硬编码才能进一步使用它......你能看看有什么问题吗：

这是我的代码::

```
<script src="http://js.live.net/v5.0/wl.js" type="text/javascript"></script>
<script type="text/javascript">
    var APPLICATION_CLIENT_ID = '0000X00004003C03',
            REDIRECT_URL = "http://www.myweb.com";

    WL.Event.subscribe("auth.login", onLogin);
    WL.init({
        client_id: APPLICATION_CLIENT_ID,
        redirect_uri: REDIRECT_URL,
        scope: 'wl.skydrive_update',
        response_type: "token"
    });
    WL.ui({
        name: "signin",
        element: "signInButton",
        brand: "hotmail",
        type: "connect"
    });
    function greetUser(session) {
        var strGreeting = "";
        WL.api(
                {
                    path: "me",
                    method: "GET"
                },
                function (response) {
                    if (!response.error) {
                        strGreeting = "Hi, " + response.first_name + "!"
                        document.getElementById("greeting").innerHTML = strGreeting;
                    }
                });
    }

    function onLogin() {
        var session = WL.getSession();
        if (session) {
            greetUser(session);
        }
    }

    var apiURL = "https://apis.live.net/v5.0/me/";
    var tokenAuth = "E ----- 3d";

    //token is hardcoded above and then further utilized....

    var tokenAuthParam = "?access_token=" + tokenAuth;

</script>

<body>
<div id="greeting"></div>
<div id="signInButton"></div>

</body> 
```

问题是我必须硬编码不正确的访问令牌。我应该能够以某种方式从回调 uri 中获取访问令牌。我只是想知道我怎样才能得到它。（我正在使用完整的客户端编码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:38:12.563

要获取当前的访问令牌，您可以使用

```
WL.getSession().access_token 
```

# php - GROUP 内的 PHP/MySQL 排序

> ID：11813680
> 
> 赞同：3
> 
> 时间：2012-08-05T03:13:53.870
> 
> 标签：php, mysql, group-by, sql-order-by

我有一个案例，我必须按品牌对表中的结果进行分组，然后按其他列排序。

我从数组中获取我的品牌。问题是当我按品牌分组时，这个组是按 ID 排序的（组内）。有没有办法在组内排序（排序）？

这是我的数组和 mysql 查询。

```
$laptop_brands = array("Acer", "Apple", "Dell", "HP-Compaq", "IBM-Lenovo", "Sony", "Toshiba", "ASUS", "Fujitsu", "Gateway");

$get_videos_query = "SELECT * FROM users_video WHERE location = 'location_1' AND brand IN ('" . implode("','", $laptop_brands) . '\') GROUP BY brand ORDER BY FIELD (brand, "Acer", "Apple", "Dell", "HP-Compaq", "IBM-Lenovo", "Sony", "Toshiba", "ASUS", "Fujitsu", "Gateway"), official DESC'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:10:49.453

我找到了解决方案。谢谢大家的笔记和想法。

所以这是我用来获得正确结果的查询：

```
$laptop_brands = array("Acer", "Apple", "Dell", "HP-Compaq", "IBM-Lenovo", "Sony", "Toshiba", "ASUS", "Fujitsu", "Gateway");

$query = "SELECT * FROM (SELECT * FROM users_video WHERE location = 'location_1' AND brand  IN ('" . implode("','", $laptop_brands) . '\') ORDER BY official DESC) as my_table_tmp GROUP BY brand ORDER BY FIELD (brand, "Acer", "Apple", "Dell", "HP-Compaq", "IBM-Lenovo", "Sony", "Toshiba", "ASUS", "Fujitsu", "Gateway")'; 
```

谢谢大家，尤其是 morteza kavakebi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T12:14:12.097

> SELECT * FROM (SELECT * FROM users_video WHERE location = 'location_1' AND brand IN ('" . implode("','", > $laptop_brands) . '\') GROUP BY brand ) AS P ORDER BY FIELD (brand, “Acer”、“Apple”、“Dell”、“HP-Compaq”、“IBM-Lenovo”、“Sony”、>“Toshiba”、“ASUS”、“Fujitsu”、“Gateway”），官方 DESC

你可以从你的结果中选择然后订购它们

# ruby-on-rails - ActiveRecord 查询无法正常工作

> ID：11813682
> 
> 赞同：0
> 
> 时间：2012-08-05T03:14:21.033
> 
> 标签：ruby-on-rails, facebook, activerecord, facebook-fql

我正在使用 Koala api 来查询 Facebook。

```
@result = @graph.fql_query("select uid, name, pic_square FROM user WHERE is_app_user AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me())") 
```

我想通过查询我的 ActiveRecords “Shoot”来丢弃对象 @result 的一些实例：

```
@result.each do |f3|
     y1 = Shoot.where(:uid1 => f3["uid"])
     @y2 = y1
     if y1
       xtUid = f3["uid"]
       xName = f3["name"]
       xPicture = f3["pic_square"]
       ....
     end
     ...
end 
```

我有以下问题。似乎： 1\. y1 始终设置为有效，但程序不会崩溃 2\. 如果我将 y1 替换为 y1[0]，程序会崩溃。

我会很感激任何指示。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T05:03:36.797

我终于找到了答案：f3["uid"].to_s。F3["uid"] 需要转换成字符串。感谢@Anthony 的帮助！

# javascript - 交换图像集的按钮

> ID：11813683
> 
> 赞同：0
> 
> 时间：2012-08-05T03:14:35.180
> 
> 标签：javascript, jquery, image, button, swap

我正在尝试实现一个脚本，该脚本将在将成为图像或文本的按钮上的单击事件时淡入一组新图像，替换旧集。要了解我想要复制的内容（不幸的是，在 flash 中），请参阅[http://seanjustice.com/](http://seanjustice.com/)的“教学”部分。

我从 stackoverflow 上的另一个主题中找到了这个[jfiddle](http://jsfiddle.net/roXon/H8z2G/2/)，但我不确定如何使用按钮和鼠标单击来替换图像集，而不是在悬停时使用简单的淡入淡出效果。

那么任何人都可以帮助我提出建议吗？**如何使用会触发图像交换的按钮？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T03:26:23.107

使用您提供的 jsfiddle，您可以执行以下操作：

[http://jsfiddle.net/H8z2G/41/](http://jsfiddle.net/H8z2G/41/)

```
$('.fadein').each(function() {

    var std = $(this).attr("src");
    var hover = std.replace("text=1", "text=2");
    $(this).wrap('<div />').clone().insertAfter(this).attr('src', hover).removeClass('fadein').siblings().css({
        position:'absolute'
    });

    $('#swapper').click(function() {
        $('.fadein').stop().fadeTo(600, 0);
    });
});​ 
```

对不起，这是标记：

```
<img class="fadein" src="http://dummyimage.com/180x100/000/fff&text=1" alt="" />
<img class="fadein" src="http://dummyimage.com/180x100/cf5/fff&text=1" alt="" />
<img class="fadein" src="http://dummyimage.com/180x100/f0f/fff&text=1" alt="" />

<a href="#" id="swapper">Click Here</a> 
```

# multithreading - 使用 Win32 控制台应用程序重复基于 Glut 的 OpenGL 程序

> ID：11813685
> 
> 赞同：0
> 
> 时间：2012-08-05T03:15:00.387
> 
> 标签：multithreading, winapi, visual-c++, opengl, glut

我正在为我的一个大学项目编写一个 opengl 程序。我没有使用 opengl 的背景，并且在坚持使用 MATLAB 三年后，我刚刚回到了 Visual C++（我不得不这样做！不要怪我！）。然而，在这个项目中，我应该创建一个多层次的游戏，令人惊讶的是，网上似乎没有这种游戏编程的教程或线索。我的游戏是在一个虚拟的长方形房间里进行的，如果玩家能得到足够的分数，游戏应该在一个不同形状的房间里重述等等（我们至少要有 6 个关卡）

现在，根据我在代码和主函数中广泛使用 glut 函数的事实，我知道没有办法打破 glutMainLoop(); 的循环；我想知道如何实现这种多级结构？

我应该摆脱 glut 并用 freeglut 或基本 gl 功能代替它吗？

我应该使用多线程作为解决方案吗？当我使用 Win32 控制台应用程序时是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:08:35.043

> 我应该摆脱 glut 并用 freeglut 或基本 gl 功能代替它吗？
> 
> 我应该使用多线程作为解决方案吗？当我使用 Win32 控制台应用程序时是否可以？

这些都不会给你带来问题。

您可能确实对您的房间进行了*编码。*那是你的问题。不要硬编码几何或风景。

将您的游戏表示为数据结构。有一些游戏状态指向结构。在切换房间时，将指针更改为指向另一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:41:44.040

您不需要*用*任何东西替换 GLUT。OpenGL 代码将保持不变。你甚至不需要打破它的主循环。不过请考虑改用 freeGLUT，因为它是最新的。实现多级结构很棘手，但是如果您研究 3D 坐标系的工作原理，您应该能够自己提出一个合理的解决方案。

# flash - 有没有办法用闪光灯录屏？

> ID：11813688
> 
> 赞同：0
> 
> 时间：2012-08-05T03:16:44.390
> 
> 标签：flash, screen, record

我想写一个网站，它具有记录用户屏幕的功能，并允许用户上传它。

有没有flash录屏的api？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T03:30:33.063

不，没有这样的事情 - Adob​​e 不会允许这样的安全漏洞。

上传部分很简单，至于获取屏幕截图，我会说要求用户点击他的“打印屏幕”（也许使用 Alt，测试自己的组合 - 它有区别！）。

然后用户去Paint，粘贴图像并保存它。

然后上传给你。

# jquery - jQuery：在 DOM 之外选择和操作 html 元素

> ID：11813691
> 
> 赞同：23
> 
> 时间：2012-08-05T03:18:42.100
> 
> 标签：jquery, html, dom, jquery-selectors

据我所知，只有已加载到 DOM 中的对象才能使用选择器进行操作。这在下面的示例中进行了说明，当单击按钮时，它的单击处理程序未成功尝试选择要加载的页面中的元素并将其更改为之前的 html。我推测，因为在链接页面加载到 DOM 之前触发了点击处理程序，所以选择器不会影响元素。

我的问题是，有没有办法实例化一个外部的 html 块并在将其插入 DOM 之前对其进行操作。

脚本_1.js：

```
$(document).ready(function () {
    $("#testButton").click(function () {
        $("#externalPageDiv").html("hello world");
    });
}); 
```

外部页面html：

```
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css"
    />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
    <script src="script_1.js"></script>
</head>

<body>
    <div data-role="page" id="externalPage" data-add-back-btn="true">
        <div data-role="content" id="externalPageContent">
            <div id="externalPageDiv"></div>external page</div>
    </div>
</body> 
```

主页 Html:

```
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css"
    />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
    <script src="script_1.js"></script>
</head>

<body>
    <div data-role="page" id="internalPage_1" data-add-back-btn="true">
        <div data-role="content" id="internalPageContent_1">
            <a href="externalPage.html" id="testButton" data-role="button" rel="external">Page Change</a>
        </div>
    </div>
    <div data-role="page" id="mainPage" data-add-back-btn="true">
        <div data-role="content" id="mainPageContent">Main Page</div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-05T03:49:13.777

我正在纠正我的错误评论。**是的，你可以这样做*，***但是阅读 jQuery 文档，据说代码是插入到 DOM [http://api.jquery.com/jQuery/#jQuery2](http://api.jquery.com/jQuery/#jQuery2)中的。因此，即使下面的代码似乎也没有在 DOM 中插入任何内容，它确实被插入了。

尝试这个：

```
var codeToProcess = "<div>" +
                    "    <div id='myDiv1'>a</div>" +
                    "    <div id='myDiv2'>b</div>" +
                    "    <div id='myDiv3'>c</div>" +
                    "</div>";

var $toProcess = $( codeToProcess );
$toProcess.find( "div" ).addClass( "processed" );

// getting by id before insertion
alert( $toProcess.find( "#myDiv1" ).html() );
alert( $( "#myDiv1" ).html() ); // this will return null, since the divs
                                // were not yet added to the document

$toProcess.appendTo( "#container" );
// or $( "#container" ).html( $toProcess );

// getting by id after insertion
alert( $( "#myDiv2" ).html() ); 
```

jsFiddle：http: [//jsfiddle.net/davidbuzatto/me7T3/](http://jsfiddle.net/davidbuzatto/me7T3/)

**编辑：**

要从外部文件插入代码，可以使用 load 函数。您可以在此处查看示例：http: [//jsfiddle.net/davidbuzatto/zuFsc/](http://jsfiddle.net/davidbuzatto/zuFsc/)请注意，在此示例中，我使用了 echo 服务 os jsFiddle 来模拟外部文件。看看这里[如何在 Java 中将视图文件输出为 ajax 响应？](https://stackoverflow.com/questions/11813643/how-do-you-output-a-view-file-as-an-ajax-response-in-java/)在这里[http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-05T03:51:02.447

您可以使用 javascript 手动创建未插入 DOM 层次结构的 DOM 元素，并且可以在将它们插入 DOM 之前尽可能多地操作它们。

但是，如果您试图在页面 HTML 被解析之前操作由页面 HTML 创建的 DOM 元素，则不能这样做。DOM 元素此时不存在，因此除非您按照第一段中的描述手动创建它们，否则没有什么可操作的。

某些操作仅适用于插入到 DOM 层次结构中的 DOM 元素，例如`document.getElementById()`，但其他方法可以用于不在主层次结构中的 DOM 片段，例如不在 DOM 层次结构中的 DOM 元素在`item.getElementsByClassName()`哪里。`item`

在 jQuery 中，默认的上下文是文档，所以一个简单的选择器操作就像`$(".foo")`只搜索 DOM 文档层次结构中的 DOM 元素。但是，如果你传递一个特定的上下文，`$(".foo", item)`那么 jQuery 选择器将搜索那个上下文，而不是主文档。

# java - 在 Java 和 C++ 中使用 += 递归产生不同的结果

> ID：11813692
> 
> 赞同：6
> 
> 时间：2012-08-05T03:18:57.900
> 
> 标签：java, c++, recursion, operator-precedence, console-output

如下非常简单的 Java 代码具有奇怪的输出，但 C 和 C++ 中相同的逻辑代码具有正确的输出。我尝试使用 JDK 1.7 和 JDK 1.3（相对 JRE），奇怪的输出总是在那里。

```
public class Test {

    public static int sum=0;

    public static int fun(int n) {

        if (n == 1)
            return 1;
        else
            sum += fun(n - 1);  // this statement leads to weird output
        // { // the following block has right output
        //     int tmp = fun(n - 1);
        //     sum += tmp;
        // }

        return sum;
    }

    public static void main(String[] arg) {
        System.out.print(fun(5));
    }
} 
```

输出是 1，应该是 8。相关的 C/C++ 代码如下：

```
#include<stdio.h>
int sum=0;
int fun(int n) {

        if (n == 1)
            return 1;
        else
            sum += fun(n - 1);

        return sum;
    }

int main()
{
    printf("%d",fun(5));

    return 0;
} 
```

添加测试java代码：

```
class A {
    public int sum = 0;

    public int fun(int n) {
        if(n == 1) {
            return 1;
        } else {
            sum += fun(n - 1);
            return sum;
        }
    }
}

public class Test {
    public static void main(String arg[]){
        A a = new A();
        System.out.print(a.fun(5));
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T03:26:14.287

问题是这一行：

```
 sum += fun(n - 1); 
```

这是更新变量`sum`。

假设您只是想将 1 到 N 的数字相加，那么它应该进行根据 计算的`f(N)`计算`f(N - 1)`。这不需要您参考`sum`……当然也不需要您更新它。

（我小心不要告诉你答案是什么......因为如果你自己弄清楚，你会学到更多。）

* * *

顺便说一句，您的算法中的缺陷没有任何 Java 特定...

* * *

值得注意的是，真正的问题与静态变量与实例变量无关。真正的问题是，像这样的递归函数不应该使用*任何*一种变量。现在在这个例子中你可能会逃脱它，但如果递归涉及这样的事情：`f(N) = f(N-1) + f(N-2)`你很容易发现不同的调用树相互干扰。

在这种情况下，更正确的解决方案是将方法编写为：

```
int fun(int n) {
    if (n == 1)
        return 1;
    else
        return n + f(n - 1);
} 
```

正如我所说，您不需要引用或更新`sum`变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T04:29:59.213

为了给出完整的答案，我将通过这个来获得乐趣（3）。对于那些对为什么这适用于 C++ 而不适用于 Java 不感兴趣的人，请忽略我的回答。

**这是Java正在做的事情：**

里面的乐趣(3)

```
sum += sum + fn(n-1) // sum is 0 
```

变成

```
sum = 0 + fun(2) // sum is 0 
```

然后在乐趣中（2）

```
sum = 0 + fun(1) // sum is 0 
```

然后里面的乐趣（1）

```
return 1 // sum is 0 
```

回到里面的乐趣(2)

```
sum = 0 + 1; // sum is 0 
```

变成

```
sum = 1; // sum will soon become 1 
```

回到里面的乐趣(3)

```
sum = 0 + 1; // sum is 1 
```

变成

```
sum = 1; // sum gets reset to 1 
```

**这是 C++ 正在做的事情：**

里面的乐趣(3)

```
sum += fn(n-1) // sum is 0 
```

变成

```
sum = sum + fn(2) // sum is 0 
```

然后在乐趣中（2）

```
sum = sum + fn(1) // sum is 0 
```

然后里面的乐趣（1）

```
return 1 // sum is 0 
```

回到里面的乐趣(2)

```
sum = sum + 1 // sum is 0 
```

变成

```
sum = 0 + 1 => sum = 1 // sum will soon become 1 
```

回到里面的乐趣(3)

```
sum = sum + 1 // sum is 1 
```

变成

```
sum = 1 + 1 // sum will soon become 2 
```

**你应该做什么：** 我不知道为什么 C++`sum`在进行函数调用之后而不是之前进行评估。我不知道这是否在规格中。但我知道你不应该依赖*任何*语言。一个正确的解决方案是：

```
int fun(int n) {
    if (n == 1)
        return 1;
    else
        return n + f(n - 1);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-25T02:38:11.970

目前对这个问题的回答并没有找到问题的根源。Java中的行为是由于以下事实：

```
sum += fun(n - 1); 
```

相当于：

```
sum = sum + fun(n - 1); 
```

where`sum`之前评估`fun(n - 1)`并存储该值。我们可以通过转到 JLS 部分[15.26.2 看到这一点。复合赋值运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)说：

> E1 op= E2 形式的复合赋值表达式等价于 E1 = (T) ((E1) op (E2))

然后评估左侧操作数，然后评估右侧操作数并执行操作。所以`sum`在递归的每次迭代之前被评估并且`0`一直返回。

这也意味着，如果您将线路切换到此：

```
sum = fun(n - 1) + sum ; 
```

它会产生你想要的效果，因为`fun`首先会被评估。

在*C++*中：

```
sum += fun(n - 1); 
```

也相当于：

```
sum = sum + fun(n - 1); 
```

这在[草案 C++ 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3485.pdf)部分`5.17` *赋值和复合赋值运算符*中有所介绍，其中说：

> E1 op = E2 形式的表达式的行为等价于 E1 = E1 op E2，除了 E1 只计算一次。[...]

主要的不同是左右手侧的评估顺序是未指定的，这在`1.9` *程序执行*第*15*段中有所介绍，它说：

> 除非另有说明，否则单个运算符的操作数和单个表达式的子表达式的评估是无序的。[...]

等等`1`，并且`8`都是*C++*中的有效结果。我们可以看到这个 live [gcc 给了我们 8](http://coliru.stacked-crooked.com/a/1ee03e5e546f2700)而[clang 给了我们 1](http://coliru.stacked-crooked.com/a/6dd311af640929e9)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T03:38:30.333

试试这个：

```
public class Test {

   public static int fun(int n) {
      System.out.println("processing n " + n );

      if (n == 1)
        return 1;
       else{
           return n + fun(n - 1);
      }
   }

   public static void main(String[] arg) {
      System.out.print(fun(5));
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-05T03:41:31.300

```
public static int fun(int n) {
    if (n == 1)
        return 1;
    else
        return n +  fun(n - 1);
} 
```

顺便说一句，如果您想以与 C 代码相同的方式执行此操作，只需将 sum 定义为“Integer”而不是“int”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-05T03:37:55.960

你真的需要在那里逐步完成你的逻辑。这没有任何意义。是 f(5) = 8 的“奇怪”输出吗？（您实际上不小心编写了一个计算 2^(n-2) 的函数，但这似乎无关紧要）

我无法向您解释任何语法错误的地方 - 它是算法本身。它只是没有做你打算做的事情。一个重要的危险信号应该让您脱颖而出：变量 n 甚至没有直接添加到 sum 任何地方！当您调用 fun(5) 时，甚至不会使用 5。它只是传递给 f(4)。

在我看来，您的逻辑是这样的：从 n->1 递归循环，并将其添加到 sum。在这种情况下，您的功能应该是：

```
void fun(int n){
    if(n == 0)
        return;
    sum += n;
    fun(n-1);
} 
```

或类似的东西。但这不是一种非常...递归的做事方式。完全没有变量你会好得多。非基本情况：返回 n+fun(n-1)。

同样在将来，当您说某些代码具有“奇怪的输出”时，您可能应该同时提供 1）奇怪的输出和 2）您期望的输出。我们都在猜测你想写什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-05T03:54:45.063

```
return n <= 1 ? n : n + fun(n-1); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-05T04:42:44.563

**试试这个**

```
 static int getsum(int num){
        int sum = 0;
        if(num == 1){
            return num;

        }else{
             sum  = num+getsum(num-1);  
        }

        return sum ;
    } 
```

# c - 在 C 中对链表进行排序

> ID：11813696
> 
> 赞同：5
> 
> 时间：2012-08-05T03:19:32.613
> 
> 标签：c, sorting, linked-list, singly-linked-list

我试图通过找到最大值，将其从其位置删除，然后将其插入列表顶部来对链表进行排序。

我遇到的困难是在顶部实际删除和插入。问题似乎出在 sortList 函数中包含的 while 循环中的 if 条件中，但我不确定如何解决它。

任何帮助，将不胜感激。

```
#include <stdio.h>
#include <stdlib.h>

typedef struct node{
    int num;
    struct node *next;
} Node, *NodePtr;

void printList(NodePtr np);
NodePtr makeList(void);
NodePtr makeNode(int n);
NodePtr sortList(NodePtr list);

int main(void) {
    NodePtr list;
    printf("Enter numbers for the list (0 to end)\n");
    list = makeList();
    printList(list);
    list = sortList(list);
    printList(list);
    return 0;
}

NodePtr makeList(void) {
    NodePtr makeNode(int), np, top, last;
    int n;
    top = NULL;
    if(scanf("%d", &n) != 1)n = 0;
    while(n != 0) {
        np = makeNode(n);
        if(top == NULL)top = np;
        else last->next = np;
        last = np;
        if(scanf("%d", &n)!=1)n=0;
    }
    return top;
}

void printList(NodePtr np) {
    while(np != NULL) {
        printf("%d\n", np->num);
        np = np->next;
    }
}

NodePtr makeNode(int n) {
    NodePtr np = (NodePtr)malloc(sizeof(Node));
    np->num = n;
    np->next = NULL;
    return np;
}

NodePtr sortList(NodePtr list) {
    NodePtr top = list;
    NodePtr curr = NULL;
    NodePtr largest;
    NodePtr prev;
    prev = NULL;
    curr = top;
    largest = top;

    while(curr != NULL) {
        prev = curr;
        if(curr->num > largest->num) {
            largest = curr;
            prev->next = curr->next;
            largest->next = top;
        }
        curr = curr->next;
    }
    if(prev == NULL) {
        largest->next = top;
        return largest;
    }
    return largest;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:28:21.347

功能有问题`sortList`。

此函数仅将一些大节点放在列表的开头。它并没有列出所有列表。您可以使用排序算法对文件进行排序：快速排序/冒泡排序/...我在此答案的末尾放置了一个代码进行排序。

这是一个执行列表排序的代码：

//它用第一个替换最大的节点，然后用子列表（列表第一个元素）做同样的操作

```
NodePtr sortList(NodePtr list) 
{

// 
if(list == null || list->next == null)
    return list; // the list is sorted.

//replace largest node with the first : 

//1- find largest node : 
NodePtr curr, largest,largestPrev;
curr = list;
largest = list;
prev = list;
largestPrev = list;
while(curr != NULL) {
        if(curr->num > largest->num) {
            largestPrev = prev;
            largest = curr;
        }
        prev = curr;
        curr = curr->next;

    }
//largest node is in largest. 

//2- switching firt node and largest node : 
NodePtr tmp;
if(largest != list)
{
    largestPrev->next = list;
    tmp = list->next;
    list->next = largest->next;
    largest->next = tmp;
}

// now largest is the first node of the list.

// calling the function again with the sub list :
//            list minus its first node :
largest->next = sortList(largest->next);

return largest;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T03:41:57.970

这是我尝试使用 QuickSort 算法对单链表进行排序。如果您知道 n，那么运行时间将为 O(n log n)。检查这是否有帮助。

```
#include "malloc.h"

typedef struct node {
    struct node *next;
    int val;
} node;

bool insert_node(struct node **head, int val)
{
    struct node *elem;
    elem = (struct node *)malloc(sizeof(struct node));
    if (!elem)
        return false;
    elem->val = val;
    elem->next = *head;
    *head = elem;
    return true;
}

int get_lval(struct node *head, int l)
{
    while(head && l) {
        head = head->next;
        l--;
    }
    if (head != NULL)
        return head->val;
    else
        return -1;
}

void swap(struct node *head, int i, int j)
{
    struct node *tmp = head;
    int tmpival;
    int tmpjval;
    int ti = i;
    while(tmp && i) {
        i--;
        tmp = tmp->next;
    }
    tmpival = tmp->val;
    tmp = head;
    while(tmp && j) {
        j--;
        tmp = tmp->next;
    }
    tmpjval = tmp->val;
    tmp->val = tmpival;
    tmp = head;
    i = ti;
    while(tmp && i) {
        i--;
        tmp = tmp->next;
    }
    tmp->val = tmpjval;
}

struct node *Quick_Sort_List(struct node *head, int l, int r)
{
    int i, j;
    int jval;
    int pivot;
    i = l + 1;
    if (l + 1 < r) {
        pivot = get_lval(head, l);
        printf("Pivot = %d\n", pivot);
        for (j = l + 1; j <= r; j++) {
            jval = get_lval(head, j);
            if (jval < pivot && jval != -1) {
                swap(head, i, j);
                i++;
            }
        }
        swap(head, i - 1, l);
        Quick_Sort_List(head, l, i);
        Quick_Sort_List(head, i, r);
    }
    return head;
}

struct node *Sort_linkedlist(struct node *head)
{
    struct node *tmp = head;
    // Using Quick sort.
    int n = 0;

    while (tmp) {
        n++;
        tmp = tmp->next;
    }
    printf("n = %d\n", n);
    head = Quick_Sort_List(head, 0, n);
    return head;
}

void print_list(struct node *head)
{
    while(head) {
        printf("%d->", head->val);
        head = head->next;
    }
    printf("\n");
}

int _tmain(int argc, _TCHAR* argv[])
{
    struct node *head = NULL;
    struct node *shead = NULL;

    insert_node(&head, 10);
    insert_node(&head, 12);
    insert_node(&head, 9);
    insert_node(&head, 11);
    insert_node(&head, 7);
    insert_node(&head, 1);
    insert_node(&head, 3);
    insert_node(&head, 8);
    insert_node(&head, 5);
    insert_node(&head, 2);
    insert_node(&head, 4);
    insert_node(&head, 6);
    print_list(head);

    shead = Sort_linkedlist(head);
    print_list(shead);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T03:31:57.437

通过写信给`largest->next`你覆盖`curr->next`。所以你最终总是从顶部重新开始。

确保：

1.  清单保持一致
2.  您的列表迭代器保持一致

但总的来说，您的代码似乎被严重破坏，我相信您的排序逻辑中可能还有其他一些错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-11T07:32:42.907

```
// Program to sort a single linked list in ascending order
// (without exchanging data in the nodes)
/**************************************************************************

There are two methods of sorting presented here(At a time,we can use any of
these two functions to sort our single linked list.) -

1\. Function 'void Sort()' - This function uses selection sort method(I
                            think).
   In this function,a node whose data is the smallest in the list is made
   as 'head' node(i.e. starting node of the list) by scanning the whole list
   once.Then from the remaining list,again a node with the smallest data is
   found out whose address is kept in the 'next' field of previous node(head
   node).This process  continues to sort the whole list.
2\. Function 'void Sort_method2()' - This function uses insertion sort
                                    method(I think).
   In this function,starting from second node in the list, all previous node
   data(starting from 'head' node) are compared with current reference node
   (which is initially second node in the list).If 'data' field of current
   reference node is smaller than that of any of its previous nodes,then
   suitable changes in the 'next' field of corresponding nodes are made.If
   data in the current reference node is smaller than that in the 'head' node,
   then the current reference node is made as 'head' node.

   *********************************************************************/

#include<stdio.h>
#include<conio.h>
#include<alloc.h>
#include<stdlib.h>

struct node
{
 int data;
 struct node *next;
};

struct node *head,*head1;

void Create_node(int data);
void display();
void Sort();
void Sort_method2();

void main()
{
 int choice,d;
 clrscr();
 while(1)
 {
  printf("\n  1.Create new node");
  printf("\n  2.Sort in ascending order");
  printf("\n  3.Exit");
  printf("\nEnter your choice : ");
  scanf("%d",&choice);

   switch(choice)
   {
     case 1: printf("\nEnter data :");
             scanf("%d",&d);
             Create_node(d);
             break;
     case 2: Sort();       // At a time,we can use any of these two
             //Sort_method2();  // functions to sort our single linked list.
             break;
     case 3: exit(0);
     default:exit(0);
    }
  } // end of while(1)
 }  // end of main()

//--------------------------------------------
void Create_node(int d)
{
  struct node *newnode,*temp;
  newnode = (struct node *)malloc(sizeof(struct node));
  newnode -> data = d;
  newnode -> next = NULL;
  if(head == NULL)
     head = newnode;
  else
    {
      temp = head;
      while(temp -> next   !=   NULL)
        temp = temp -> next;

      temp -> next = newnode;
    }  // end of 'else'
}  // end of 'Create_node(int d)'

//---------------------------------------------
void display()  // Print linked list contents
{
   struct node *temp;
   printf("\nList contents are :\n");
   temp = head;
   while(temp != NULL)
   {
     printf(" Data = %d   Address = %u\n",temp->data,temp);
     temp = temp->next;
   }
   printf("\n");
}
//--------------------------------------------
void Sort()
 {
  struct node *t,*t1,*t2,*t3;
  t1 = head;
  head1 = head;
  if(head == NULL)
    printf("\nThe linked list is empty!");
  else
  {
    while( (t2 = t1 -> next)   !=   NULL)
    {
      while(t2 != NULL)
      {
        t3 = t2 -> next;
        if( t1 -> data   >   t2 -> data)
        {
          t2 -> next = t1;
          for(t = t1; t -> next != t2;t = t -> next);

          t -> next = t3;
          t1 = t2;       // t1 = Node with smaller data
          t2 = t3;       // t2 = Node to be compared with t1
        }  // end of 'if'
        else
        {
          // t1 = t1;       // That is,no change in t1.
          t2 = t3;
        }
      }  // end of ' while(t2 != NULL)'

      if(head == head1) // We want this action only for first pass of
      {                 // outer while() loop.Only initially, head = head1.
       head = t1;
       head1 = t1 -> next;
      }  // end of 'if(head == head1)'
      else
      {
        for(t = head;t -> next != head1; t = t -> next);

        t -> next = t1;
        head1 = t1 -> next;
      } // end of 'else'

      t1 = t1 -> next;
    } // end of 'while( (t2 = t1 -> next)   !=   NULL)'

    display();  // Display the list.
  }   // end of 'else' of 'if(head == NULL)'
}    // end of 'Sort()'

//--------------------------------------------
void Sort_method2()
{
 struct node *t,*t1,*t2,*tt;
 if(head == NULL)
    printf("\nThe linked list is empty!");
 else
 {
   t1 = head -> next;
   while(t1 != NULL)                         // This is i-loop(outer loop).
   {
     t2 = t1 -> next;
     for(t = head; t != t1; t = t -> next)   // This is j-loop(inner loop).
     {
       if(t1->data  <  t->data)
       {
         t1 -> next = t;
         for(tt=head; tt->next != t1; tt=tt->next); //end of for loop in 'if'

         tt -> next = t2;
         if(t == head)
           head = t1;  // There is only one statement in this 'if'.
         else  // i.e.,'if(t != head)'
         {
           for(tt=head; tt->next != t; tt=tt->next);

           tt -> next = t1;
         }
         break;
       }  // end of 'if'
     }    // end of outer 'for' loop
     t1 = t2;
   }      // end of 'while'

  display(); // Display the list.
 }        // end of 'else' of 'if(head == NULL)'
}         // end of 'Sort_method2()' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T04:21:35.167

以下是排序逻辑中存在的一些问题：

1.  您在循环本身的开头将 prev 指针设置为 curr ，这是不正确的。通过这样做，您使当前指针和前一个节点指针相同，这使得无法删除该节点。
2.  您应该将最大指针也分配给顶部，从而有助于将最大->下一个设置为真正的顶部节点。

代码可以修改如下（只是一个指针，你需要自己检查其他问题）：

```
while(curr != NULL)
{

    if(curr->num > largest->num)
    {
        largest = curr;
        prev->next = curr->next;
        largest->next = top;
        top = largest;

    }
    prev = curr;
    curr = curr->next;
} 
```

# alphablending - DirectX 11 Alpha 混合不起作用

> ID：11813698
> 
> 赞同：11
> 
> 时间：2012-08-05T03:20:20.840
> 
> 标签：alphablending, directx-11, blending

好的，所以我一直试图让 Alpha Blending 在我的 3D 应用程序中工作，但它只是不想发生。我在渲染循环的最后绘制带有正交投影的 2d 图像（深度测试保持启用），图像纹理具有透明部分，但它们呈现黑色。这是我的混合代码：

```
D3D11_BLEND_DESC blendStateDesc; 
ZeroMemory(&blendStateDesc, sizeof(D3D11_BLEND_DESC));
blendStateDesc.AlphaToCoverageEnable = FALSE;
blendStateDesc.IndependentBlendEnable = FALSE;        
blendStateDesc.RenderTarget[0].BlendEnable = TRUE;
blendStateDesc.RenderTarget[0].SrcBlend = D3D11_BLEND_SRC_ALPHA;
blendStateDesc.RenderTarget[0].DestBlend = D3D11_BLEND_INV_SRC_ALPHA;
blendStateDesc.RenderTarget[0].BlendOp = D3D11_BLEND_OP_ADD;
blendStateDesc.RenderTarget[0].SrcBlendAlpha = D3D11_BLEND_SRC_ALPHA;
blendStateDesc.RenderTarget[0].DestBlendAlpha = D3D11_BLEND_DEST_ALPHA;
blendStateDesc.RenderTarget[0].BlendOpAlpha = D3D11_BLEND_OP_ADD;
blendStateDesc.RenderTarget[0].RenderTargetWriteMask = D3D11_COLOR_WRITE_ENABLE_ALL;

if (FAILED(device->CreateBlendState(&blendStateDesc, &blendState))) {
printf("Failed To Create Blend State\n");
}
deviceContext->OMSetBlendState(blendState, NULL, 0xFFFFFF); 
```

如果它有帮助，这里是纹理描述：

```
D3D11_TEXTURE2D_DESC texDesc;
texDesc.Width = TextureWidth;
texDesc.Height = textureHeight;
texDesc.MipLevels = 1;
texDesc.ArraySize = 1;
texDesc.Format = DXGI_FORMAT_B8G8R8A8_UNORM;
texDesc.SampleDesc.Count = 1;
texDesc.SampleDesc.Quality = 0;
texDesc.Usage = D3D11_USAGE_IMMUTABLE;
texDesc.BindFlags = D3D11_BIND_SHADER_RESOURCE;
texDesc.CPUAccessFlags = 0;
texDesc.MiscFlags = 0; 
```

我只使用一个渲染目标，而不是在着色器中预乘 alpha。我到处寻找并尝试了 D3D11_BLEND_STATE 的各种不同组合，但没有任何效果。我能得到的最接近的是当我将 AlphaToCoverage 设置为 TRUE 但如果我更改顶点的 alpha 它将不起作用，而且我知道我在做什么 AlphaToCoverage 应该是 FALSE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-29T12:47:31.720

我知道这是一个非常古老的问题，但我有一个类似的[**问题**](https://stackoverflow.com/questions/39636846/directx-image-texture-quad-displays-underlying-controls-color-where-it-is-transp)。

我必须做的是确保在绘制之前设置/启用混合状态，然后在透明 2d 图像的绘制调用之后禁用。可以找到更多信息：[DirectX 图像纹理四边形在透明的地方显示底层控件颜色](https://stackoverflow.com/questions/39636846/directx-image-texture-quad-displays-underlying-controls-color-where-it-is-transp/39770587#39770587)

# python - 我正在尝试使用此代码在列表中查找丢失的成员..但它不起作用

> ID：11813702
> 
> 赞同：-2
> 
> 时间：2012-08-05T03:22:18.557
> 
> 标签：python

```
list = [['a', (1,1)], ['a', (1,2)], ['a', (1,4)], ['a', (1,5)]]

for i in list:
    print "the i is ", i
    print i[0]   # 'a'
    print i[1]   # (1, 1)
    n = 'a'
    v = (1,1)
    #n = re.search(r'[a-z]', i[0])
    #v = (v[0], (v[1] + 1))
    print "just", i[1]
    print "trying ", v
    for j in i:  
        if (j[0] != n):
            v = (1, 1)
            n = i[0]
        if (i[1] != v):
            print v
            raise ValueError, '[%s, %s] is missing' %(i[0], (i[1][0], i[1][1]-1))

        v = (v[0], (v[1] + 1)) 
```

在第一次迭代之后，该值似乎没有改变，即它保持为`(1,1)`，但是我可以看到需要做什么才能报告列表中的缺失项，即在此示例列表中它是`['a', (1, 3)]`。通常，代码以`['a', (1,1)]`检测其在列表中的缺失开始，因此它按顺序跟随每个项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:27:14.287

我见过这个反复问所以这里是一个完整的例子

```
def ListToDict(l):
    d = {}
    for itm in l:
        if  itm[0] not in d:d[itm[0]]=[]
        d[itm[0]].append(itm[1])
    for key in d:
        itm = d[key]
        if isinstance(itm,(list,tuple)) and len(d[key])>0 and isinstance(d[key][0],(tuple,list)):
            d[key] = ListToDict(d[key])
    return d
def ValidateSequences(d):
    if isinstance(d,(tuple,list)):
        return sorted(d) == range(min(d),max(d)+1)
    elif isinstance(d,dict):
        r = {}
        for key in d:
            r[key] = ValidateSequences(d[key])
        return r
my_list = [['a', (1,1)], ['a', (1,2)], ['a', (1,4)], ['a', (1,5)]]
d = ListToDict(my_list)
print "Validated:",ValidateSequences(d)
my_list.append(["a",(1,3)])
d = ListToDict(my_list)
print "Revalidated:",ValidateSequences(d) 
```

输出是

```
Validated: {'a': {1: False}}
Revalidated: {'a': {1: True}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:41:29.163

你想放

```
v = (1,1) 
```

*在 for 循环之外*（并且您也不想放入`v = (1, 1)`语句`if (j[0] != n)`中）。否则它将被设置回`(1, 1)`每次。

ETA：话虽如此，这不是解决问题的好方法。为什么不做类似的事情：

```
for i in range(1, 6):
    if ["a", (1, i)] not in list:
        raise ValueError, '["a", (1, %s)] is missing' % i 
```

# javascript - Jquery 发布一个数组

> ID：11813712
> 
> 赞同：0
> 
> 时间：2012-08-05T03:27:36.190
> 
> 标签：javascript, jquery

我有一个由我的 Javascript 在运行时生成的数组。一旦该数组充满了我想使用 POST 将其发送到服务器的所有值。我怎样才能做到这一点 ...

伪代码：

```
 for(i=0;i<result.data.length;i++)
         {
           result.data[i].id

    }   
   $.post("receiver.php", { xxxxx }, function(data){ console.log(data);}); 
```

我怎样才能在帖子中更新那个 xxxx

我检查了 jquery 中的文档，但他们希望在 POST 中提供所有值。我不想这样做。另外，我只想发送一次帖子，这样流量就会减少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:32:25.253

**编辑**

您可以使用[join()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)将所有数组值转换为字符串，使用一些字符来分隔它。

**编辑 2**：正如 Kumar 所说，他正在使用 2 个数组

```
var idsArray;
var namesArray;
for(i=0;i<result.data.length;i++)
    {
        idsArray[] = result.data[i].id; 
        namesArray[] = result.data[i].name; 
    }  

var ids   = idsArray.join(",");
var names = namesArray.join(",");
$.post("receiver.php", { ids:ids, names:names }, function(data){ console.log(data);}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:01:10.543

不确定，但您似乎想这样做：

```
var sendObj = {};
for (var i=0; i<result.data.length; i++) {
    var id = result.data[i].id,
        name = result.data[i].name; // or some similiar computation
    sendObj[name] = id;
}   
$.post("receiver.php", sendObj, function(data){ console.log(data);}); 
```

这将`result.data`作为 name=id-value-pairs 发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T03:48:35.040

类似于 iBlue 的评论，你可以发送一个带有 post 的对象；您不必在 post 函数`{ }`中定义对象，只是定义对象的分隔符，类似于 PHP 关联数组：

```
$.post('reciever.php', myData, function(data){ /*callback*/ }); 
```

唯一的事情是您将 myData 设置为如下对象：

```
myData = {
     0: 'info',
     1: 'info'
}

//or even something like this

myData = {
     someProp: 'info',
     someProp2: {
         anotherProp: 'moreInfo'
     }
 } 
```

您还可以对对象使用非数字索引，并轻松添加属性：

```
myData[2] = 'info'; 
```

或者您可以循环遍历它，只是方式略有不同：

```
for(i in myData){
     myData[i]; //Do something with myArr[i]
} 
```

该`for in`循环还将遍历非数字属性。您仍然可以通过以下方式获取 myData 的长度

```
myData.length; 
```

* * *

编辑：

而不是发送字符串：

```
IDs = {}
Names = {}

for(var i = 0; i < result.data.length; i++){
    IDs[i] = result.data[i].id;
    Names[i] = result.data[i].name;
}
$.post('reciever.php', {IDs: IDs, Names: Names}, function(data){}); 
```

在 PHP 文件中，您可以像这样访问它们

```
$_POST['IDs'][0] = "some id";
$_POST['Names'][0] = "some name"; 
```

~~编辑：~~

Actaully 我认为索引是作为字符串发送的，所以可能必须这样做

```
$_POST['IDs']['0'] 
```

# jquery - jquery return + 严格警告函数并不总是返回值

> ID：11813715
> 
> 赞同：0
> 
> 时间：2012-08-05T03:28:03.840
> 
> 标签：jquery

我有以下 JQUERY 行：

```
 if(html == 'html5' && pastURL == url) {return false;} 
```

这导致其内部的函数显示错误：

'严格的警告功能并不总是返回一个值'。

有没有办法改变它，所以它不会显示这个错误，为什么它会显示这个？注意：不要有'use strict;' 在代码中。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T03:31:53.950

所有函数必须要么没有`return`语句，要么它们的最后执行行必须是返回。因此，如果您正在计划一条返回 false 的路线，请确保无论该条件如何发生，该函数始终返回一些内容。最简单的方法是在函数的末尾放置一个 return 语句，这样它就会在到达那里时总是返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T03:32:50.307

放置和`else`声明并使其返回。

就像是

```
 if(html == 'html5' && pastURL == url) {return false;} else {return true;} 
```

# excel - 使用 VBA 在工作表中搜索字符串

> ID：11813720
> 
> 赞同：3
> 
> 时间：2012-08-05T03:29:00.170
> 
> 标签：excel, vba

我正在尝试在工作簿的所有工作表中搜索特定字符串“ERROR”，并将其设为粗体并将找到的单元格着色为红色。

我能够解析每个工作表。我无法使用`Find`VBA 的功能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T04:28:40.213

`Find`这是使用和格式化找到的单元格的示例

```
Sub FindERROR()
    Dim SearchString As String
    Dim SearchRange As Range, cl As Range
    Dim FirstFound As String
    Dim sh As Worksheet

    ' Set Search value
    SearchString = "ERROR"
    Application.FindFormat.Clear
    ' loop through all sheets
    For Each sh In ActiveWorkbook.Worksheets
        ' Find first instance on sheet
        Set cl = sh.Cells.Find(What:=SearchString, _
            After:=sh.Cells(1, 1), _
            LookIn:=xlValues, _
            LookAt:=xlPart, _
            SearchOrder:=xlByRows, _
            SearchDirection:=xlNext, _
            MatchCase:=False, _
            SearchFormat:=False)
        If Not cl Is Nothing Then
            ' if found, remember location
            FirstFound = cl.Address
            ' format found cell
            Do
                cl.Font.Bold = True
                cl.Interior.ColorIndex = 3
                ' find next instance
                Set cl = sh.Cells.FindNext(After:=cl)
                ' repeat until back where we started
            Loop Until FirstFound = cl.Address
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-12T15:09:30.373

如果您在 excel vba 中搜索，您可以使用以下简单代码和***InStr***命令。

```
Private Sub CommandButton1_Click()
Dim RowNum As Long

RowNum = 1

Do Until Sheets("Data").Cells(RowNum, 1).Value = ""

If InStr(1, Sheets("Data").Cells(RowNum, 2).Value, TextBox1.Value, vbTextCompare) > 0 Then
On erro GoTo next1
ListBox1.AddItem Sheets("Data").Cells(RowNum, 1).Value
ListBox1.List(ListBox1.ListCount - 1, 1) = Sheets("Data").Cells(RowNum, 2).Value
End If
next1:
RowNum = RowNum + 1
Loop
End Sub 
```

[你可以从这里下载示例文件](http://excelhub.org/excel-vba-to-display-search-result-in-listbox/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-03-13T15:48:28.790

这个怎么样：

```
If Not WorkBook.Sheets("Sheet1").Range("A1:Z150").Find("Cookie") Is Nothing 
    MsgBox "Found a Cookie"
End If 
```

# c# - C#：自定义控件与本机控件

> ID：11813721
> 
> 赞同：0
> 
> 时间：2012-08-05T03:29:18.757
> 
> 标签：c#, winforms, layout, custom-controls

全部，我正在尝试开发 C# Windows 窗体应用程序。为此，我需要制作一个从 GroupBox 派生的自定义控件。

现在解决问题。我有一个表格，在表格上我放了一个网格框。在一个单元格上，我放置了一个 GroupBox，在另一个单元格上，我放置了我的自定义控件。对于这两个控件属性，我将“ColumnSpan”设置为 3，因为网格有 3 列。本机控件正确显示本身，这意味着它被拉伸了。自定义控件显示不正确，这意味着它没有被拉伸。

我检查了属性检查器中的所有属性都是相同的。

我错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:48:26.640

由于某种原因，自定义控件不会自行调整大小。所以我在 GUI 设计器中所要做的就是调整控件的大小。

感谢您的阅读，希望它可以帮助其他人。

# c++ - 将数据插入文件中的特定位置而不用c ++覆盖

> ID：11813724
> 
> 赞同：1
> 
> 时间：2012-08-05T03:30:00.520
> 
> 标签：c++, file-io

我有一个以二进制格式存储整数的文件。我正在用 C++ 编写一个函数，它接受 int 数据并将其插入到文件中的特定位置。

```
void AddData(int position, int data); 
```

*   position 是必须插入数据的索引。
*   data 是要插入的 int 值。

代码

```
void AddData(int position, int data)
{

    fstream os;        
    char buff[4096];
    cnt1 = position;
    cnt2+=(data_cnt-cnt1); // data_cnt is global var to cout the no. of data items 

    os.open("edata.dat", ios::out | ios::in | ios::binary );

    os.seekg(0);                    // start from beg
    os.seekg(cnt1*sizeof(int));     // move to position at which data has to be inserted
    os.read(reinterpret_cast<char*>(buff), cnt2*sizeof(int)); // read rest of file 
    os.seekg(cnt1*sizeof(int));     // move back to previous position
    cout << os.tellg();
    os.write( reinterpret_cast<char*>(&data), sizeof(int) ); //add data
    os.write(reinterpret_cast<char*>(buff), cnt2*sizeof(int)); //write back the read data
    data_cnt++;
} 
```

第一次调用函数时，显示数据项添加了两次。第二次调用函数时，tellg() 显示-1。

想不通，怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:15:55.373

老实说，我也看不出有什么问题，但是-请原谅我这么直截了当-您的编码风格无济于事！

在您的示例中，我认为有很多事情是错误的：

1.  您使用全局变量来计算项目数。
2.  您假设其余部分不会超过 4096 个字节
3.  您的 reinterpret_cast 完全没有必要（写 'buff' 与写 '&buff[0]' 相同，并直接给你一个 char* ）
4.  您不做任何检查（例如，位置是否超出文件末尾？）

老实说，即使您使此代码正常工作，每个必须维护它的人都会非常讨厌您。（我很抱歉听起来很刻薄，但我过去不得不维护大量这样的代码，如果因为您切换到 64 位操作系统而突然无法工作，那将是一个噩梦；））

讲够了，有时间提建议：

为什么不简单地执行以下操作：

*   将源文件从开头复制到“位置”（并检查位置是否在文件的边界内！）到临时文件。
*   将您的 int 写入您的临时文件
*   复制源文件（从位置+1到eof），到临时文件（从位置+2）
*   擦除edata.dat，将temp重命名为edata.dat

它更容易、更安全、更清洁并且可能同样快速。最重要的是：如果在结束之前发生错误，您的 edata.dat 仍然处于稳定、未损坏的状态。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:15:24.633

据我所知，cnt2 表示插入 int*后*的 int 数量，对吧？

在这种情况下应该是`cnt2 = data_cnt-cnt1`，不是`cnt2 += data_cnt-cnt1`。您可能应该制作这些局部变量，因为它们不需要在调用之间存储任何内容。

第一次调用该函数时，您可能会巧合地使 cnt2 具有正确的值。在第二次调用中，它被设置为正确值的两倍（因为您正在递增），因此读取失败，并且流进入错误状态。

我不确定为什么数据可能会被添加两次。也许如果您修复了 cnt2 错误，它可能会开始工作。

# php - this.checked 创建误报？

> ID：11813730
> 
> 赞同：0
> 
> 时间：2012-08-05T03:30:45.390
> 
> 标签：php, javascript, jquery

我有一个页面，其中有 4 个默认选中的复选框。如果您取消选中某个框，它会写入一个 cookie，以便返回该页面的行程将保存首选项。我遇到的问题是cookie似乎无论如何都是写的。第一次访问该页面应该不会创建 cookie，但取消选中一个框应该会抛出以下代码。就目前而言，当我第一次访问我的网站时，cookies 就被创建了。

我哪里出错了（如果它在多个地方，我不会感到惊讶）。

```
$('#mycheckbox').change(function() {
if (! this.checked) {
<?php setcookie('key', 'Value', time() + 4800); ?>
}
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T03:36:02.963

不，`this.checked`工作。

问题是 PHP 代码将始终运行，因为它在服务器端运行，而不是由浏览器解释。所有 PHP 代码都在浏览器获取文件之前执行。

一个解决方案是将 PHP 放在一个外部文件中并使用 jQuery`$.ajax`来请求该文件，该文件将仅在需要时运行代码。

您还可以查看 jQuery[`$.cookie`](https://github.com/carhartl/jquery-cookie/)插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:40:08.150

正如@MarkB 已经说过的那样，您正在混淆 javascript 和 php。在这种情况下，您应该使用 javascript 而不是 php 设置您的 cookie。请参阅[此帖子](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery)以了解更多信息。

正如您已经注意到的那样，您现在拥有的代码将始终设置 cookie，因为服务器忽略了 javascript 代码，只运行 php 代码来设置 cookie。

# git - 一个分支的变化出现在master中

> ID：11813733
> 
> 赞同：3
> 
> 时间：2012-08-05T03:31:27.987
> 
> 标签：git

我是 git 新手，我遇到了这个奇怪的事情。我结帐到一个分支，做一些更改，然后我结帐到 master，我在另一个分支中所做的更改就在那里。我不确定我是否误解了这个概念或者我做错了什么。git 版本是来自 msysgit 的 1.7.11-preview20120710。

这是我制作的一系列命令，我在 mybranch 中删除了文件 text.txt，然后在 master 中也删除了该文件。

```
db@DB-PC /f/Projects/Controls (master) 
$ ls
AcNumericSingleToolStripTextBox.vb  NumericSingleTextBox.vb

db@DB-PC /f/Projects/Controls (master)
$ touch text.txt

db@DB-PC /f/Projects/Controls (master)
$ git checkout -b mybranch
Switched to a new branch 'mybranch'

db@DB-PC /f/Projects/Controls (mybranch)
$ ls
AcNumericSingleToolStripTextBox.vb  NumericSingleTextBox.vb  text.txt

db@DB-PC /f/Projects/Controls (mybranch)
$ rm text.txt

db@DB-PC /f/Projects/Controls (mybranch)
$ ls
AcNumericSingleToolStripTextBox.vb  NumericSingleTextBox.vb

db@DB-PC /f/Projects/Controls (mybranch)
$ git checkout master
D       Controls/text.txt
Switched to branch 'master'
Your branch is ahead of 'origin/master' by 5 commits.

db@DB-PC /f/Projects/Controls (master)
$ ls
AcNumericSingleToolStripTextBox.vb  NumericSingleTextBox.vb 
```

Text.txt 不在 master 中了。

为仓库编辑

在创建该示例 text.txt 之前我遇到了问题。现在我在mybranch中将AcNumericSingleToolStripTextBox.vb重命名为NumericSingleToolStripTextBox.vb，可以看到master的变化：

```
db@DB-PC /f/Projects/Controls (master)
$ ls
AcNumericSingleToolStripTextBox.vb  NumericSingleTextBox.vb

db@DB-PC /f/Projects/Controls (master)
$ git status
# On branch master
# Your branch is ahead of 'origin/master' by 7 commits.
#
nothing to commit (working directory clean)

db@DB-PC /f/Projects/Controls (master)
$ git checkout -b mybranch
Switched to a new branch 'mybranch'

db@DB-PC /f/Projects/Controls (mybranch)
$ ls
AcNumericSingleToolStripTextBox.vb  NumericSingleTextBox.vb

db@DB-PC /f/Projects/Controls (mybranch)
$ mv AcNumericSingleToolStripTextBox.vb NumericSingleToolStripTextBox.vb

db@DB-PC /f/Projects/Controls (mybranch)
$ ls
NumericSingleTextBox.vb  NumericSingleToolStripTextBox.vb

db@DB-PC /f/Projects/Controls (mybranch)
$ git checkout master
D       Controls/AcNumericSingleToolStripTextBox.vb
Switched to branch 'master'
Your branch is ahead of 'origin/master' by 7 commits.

db@DB-PC /f/Projects/Controls (master)
$ ls
NumericSingleTextBox.vb  NumericSingleToolStripTextBox.vb 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T03:36:25.320

在您的示例中，从未告诉 Git 跟踪 text.txt。

在你签出 master 之前，你必须告诉 Git 去跟踪它。

```
$ git add text.txt 
```

暂存 text.txt 后，将添加内容提交到分支。

```
$ git commit -m 'Added text.txt' 
```

在 mybranch 上时，告诉 Git 您要删除 text.txt。通过提交更改将该更改与 mybranch 相关联。

```
$ git rm text.txt
$ git commit -m 'Removed text.txt' 
```

签出到 master 分支后，Git 将恢复其状态和 text.txt。

# arrays - 多线程和数组迭代（再次？）

> ID：11813737
> 
> 赞同：0
> 
> 时间：2012-08-05T03:32:05.427
> 
> 标签：arrays, multithreading, iteration

我有一段简单的代码，我想让它多线程友好。

```
for(x=0;x<xLen;x++)
{
    for(y=0;y<yLen;y++)
    {
        index = x*y+z;
        a[index] = a[index-1] + a[index+1] +a[index-lenX] + a[index+lenX];
    }
} 
```

通常我会将 xLen 除以线程数，然后在自己的线程中运行每个部分。但是在这种情况下划分它会导致麻烦，并且在某些地方结果是基于错误的数据（例如 index-1 保存已经由它的邻居更新的值）。

以前有没有人遇到过这种问题？这种方程有什么已知的方法吗？

# android - 使用导航模式隐藏 actionBar 选项卡会对片段后台堆栈产生不利影响

> ID：11813740
> 
> 赞同：5
> 
> 时间：2012-08-05T03:32:50.600
> 
> 标签：android, android-fragments, android-listfragment, back-stack

我有一个带有操作栏和操作栏选项卡的活动。当我从选项卡的内容中选择一个项目时，我试图用一个新的片段替换当前片段，将事务添加到后台堆栈，并隐藏选项卡。

我通过将操作栏导航模式更改为标准来隐藏选项卡。

问题是当我按下后退按钮时，我只是得到一个带有操作栏的空白视图（在标准模式下）。片段事务似乎没有被反转。

如果我不通过将导航模式更改为标准来隐藏选项卡，则事务撤销工作正常。

我已尝试覆盖后按以将导航模式更改回选项卡，但它不起作用。

有人可以告诉我他们将如何实现这一目标吗？

这是隐藏选项卡并发生片段事务的代码：

```
 ActionBar actionBar = getActivity().getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);

        Fragment albumListFragment = new AlbumListFragment();
        albumListFragment.setArguments(bundle);
        FragmentTransaction ft = getFragmentManager().beginTransaction();

        ft.replace(android.R.id.content, albumListFragment);
        ft.addToBackStack(null);

        // Commit the transaction
        ft.commit(); 
```

为了清楚起见：我希望在提交此事务后按回，选项卡将与前一个片段一起重新出现。在按下后的那一刻，它没有显示选项卡或片段。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T16:04:55.440

不确定这个问题是否仍然相关，但我似乎很幸运在片段转换后隐藏了选项卡。

从我的 ListFragment 中，我做了一个标准的片段转换，与您在代码中的操作非常相似。

但是，在我的详细信息片段中，我在 onCreate 方法中隐藏了操作栏：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    ActionBar actionBar = getActivity().getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);

} 
```

并在我的 onPause 方法中再次显示：

```
public void onPause() {

    super.onPause();

    ActionBar actionBar = getActivity().getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

} 
```

# c# - c#中的对象重新初始化

> ID：11813743
> 
> 赞同：-2
> 
> 时间：2012-08-05T03:33:37.807
> 
> 标签：c#, object, object-initializers

在 c# 中重用对象是否被认为是“好习惯”。
例如：
      假设您有一个名为 Anima 的类，并创建一个名为 Monkey 的动物类型对象：

```
Animal monkey = new Animal(paramA);
monkey = new Animal(paramB); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T03:35:57.683

是的，听起来差不多。您现在失去引用的前一个实例应该在下一个垃圾收集周期中被赶上。

# php - 某些文档的停用词过滤

> ID：11813744
> 
> 赞同：1
> 
> 时间：2012-08-05T03:34:00.340
> 
> 标签：php, mysql, database

我很困惑如何过滤某些文档的单词。我必须一一检查文件。例如来自 tb_tokens ：

```
======================================================================
| tokens_id | tokens_word | tokens_freq|  sentence_id |  document_id |
======================================================================
|     1     |      A      |      1     |       0      |       1      |
|     2     |      B      |      1     |       0      |       1      |
|     3     |      C      |      1     |       1      |       1      |
|     4     |      D      |      1     |       0      |       2      |
|    ...    |             |            |              |              |
====================================================================== 
```

我必须删除列表中出现的所有单词以及常见单词，例如“and”、“the”等。记录在表 tb_stopword 中的列表，然后删除出现在记录列表中的大多数文档中大量出现的单词在 tb_term 表中。

函数 cekStopWord ：

```
function cekStopWord ($word) {
   $query = mysql_query("SELECT stoplist_word FROM tb_stopword where stoplist_word = '$word' ");
   $row = mysql_fetch_row($query);
   if($row > 0) {
        return true;
   } else {
        return false;
   }        
} 
```

以及第二个过程的类似功能（删除大多数文档中大量出现的单词）

```
function cekTerm ($word) {
    $query = mysql_query("SELECT term_word FROM tb_term where term_word = '$word' "); 
```

我很困惑如何处理每个文件。我试图通过 doc_id 调用，但它不起作用。这是我的代码：

```
//$doc_id is a variable that save array of document_id
$query = mysql_query('SELECT tokens_word, sentence_id, document_id FROM tb_tokens WHERE document_id IN (' . implode(",", $doc_id) . ')') or die(mysql_error());
while ($row = mysql_fetch_array($query)) {
    $word[$row['document_id']][$row['sentence_id']] = $row['tokens_word'];
}
foreach ($word as $doc_id => $words){
    $cekStopWord = cekStopWord($words);
    $cekTerm     = cekTerm($words);
    if((preg_match("/^[A-Z, 0-9]/", $words))&& (!$cekStopWord) && (!$cekTerm) ){
          $q = mysql_query("INSERT INTO tb_tagging VALUES ('','$words','','$sentence_id','$doc_id') "); 
```

以及如何在数组中使用 preg_match ？太感谢了 ：）

# php - php mysql 搜索方法

> ID：11813747
> 
> 赞同：1
> 
> 时间：2012-08-05T03:35:28.997
> 
> 标签：php, mysql, search

我正在尝试在我的网站上实现搜索。开始吧，我有一些初学者的问题。

1.  如果我使用分页脚本，这些脚本是否会在触发搜索时找到所有结果并简单地将结果显示为页面？
2.  将关键字保留在会话变量中并进行搜索是否更好，每次用户点击“更多结果”按钮时都会带来 10 个结果？

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T03:38:29.247

1.  除非您在第一次运行搜索时缓存结果，否则“分页”结果通常会重新运行搜索查询，然后丢弃未显示的行
2.  使用会话变量来存储关键字是没有意义的，除非您不打算在结果旁边显示搜索框（例如，像 Google 搜索结果页面那样）。

# sockets - 中止套接字操作 Windows Phone

> ID：11813751
> 
> 赞同：0
> 
> 时间：2012-08-05T03:36:02.287
> 
> 标签：sockets, asynchronous, windows-phone-7.1

我在 Windows Phone 7 应用程序中使用伪同步套接字。我的套接字代码基于[http://msdn.microsoft.com/en-us/library/hh202858(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202858(v=vs.92).aspx)中的示例。

服务器的发送模式有些不可预测。它以包含消息其余部分的长度的固定大小的标头开始。我首先读入了这个头文件，然后我从套接字中读取了指定数量的字节。

由于我还需要向服务器发送消息，并且我尝试将套接字与一个用于接收的线程和另一个用于发送的线程进行双工导致了很多问题，所以我的代码中有一个这样的循环：

```
while (KeepConnectionGoing)
        {
            byte[] Rcvd;
            Rcvd = Socket.Receive();//Returns null if no message received in 50 ms
            if (Rcvd != null)
            {
                ParseMessage(Rcvd);
            }

            if (HasMessageThatNeedsToBeSent())
            {
                byte[] Message = GetMessageToSend();
                Socket.Send(Message);
            }
        } 
```

这在大多数情况下都可以正常工作，但是当消息为空时会发生奇怪的事情。因为 Receive 方法中的超时（请参阅链接示例）使用 ManualResetEvent，所以套接字上的接收请求永远不会真正取消。即使该方法返回，该请求也会在某个地方等待，并且当套接字上的数据可用时，会占用头部。事件处理程序与它接收到的数据无关（因为方法已经返回并且方法中的变量永远不会再被使用），数据基本上消失了。我希望返回标头跳过的读取请求读取标头之后的字节，我不知道消息有多长。

如果套接字超时，我希望能够取消所有未完成的请求。我正在使用示例中的匿名方法，因为它简化了所有事情，并让我不必自己编写所有状态传输代码。因此，我无法解开事件处理程序。我认为，即使我使用一个方法作为事件处理程序，但在异步操作完成之前取消挂钩，仍然会调用回调方法。（我没有测试过，这只是我的理解）

现在，我能看到的唯一解决方案是将一些静态字节数组组合在一起（即具有静态字节 [] 标头，如果它为空，我会读取标头，否则我会阅读消息），但这似乎真的不优雅的解决方案并且很容易出现竞争条件。

有没有更好的办法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:48:24.270

看来确实没有什么好的方法可以做到这一点。轮询方法会很好，但 Silverlight 没有它。我拼凑了一个解决方案，使用静态标志告诉我我处于什么状态（是否请求了标头，是否请求了消息），长度的静态 int 和静态缓冲区。

在方法的开头，可以请求标头或主体。如果已请求标头，则线程将等待，直到有效的正文长度可用。如果此等待超时，则意味着标头接收操作仍处于挂起状态，但确实没有可用的消息。否则，它会读取该长度的消息。

如果尚未请求标头，则接收标头。在事件处理程序中，完成后，检查控制流是否已经继续（即接收操作花费了太长时间，因此函数已经返回，但现在实际上已经完成）。更新长度，然后请求正文，除非它超时。

# python - 在 django 项目中找不到页面

> ID：11813753
> 
> 赞同：0
> 
> 时间：2012-08-05T03:36:21.693
> 
> 标签：python, django

在我的 django 项目中，当我访问 localhost:8000 时，它说：

```
Page not found (404)
Request Method: GET
Request URL:    http://127.0.0.1:8000/ 
```

urls.py 是：

```
^$/
hello/$
now/$
^add/$
todolist/$
userlist/$
admin/
^currenturl/$
task/addUI/$
task/addUI/taskadd/$ 
```

django 版本是 1.3.3 有什么问题，提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T03:52:31.117

你的第一条路线有错字，应该是`^/$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:49:38.833

实际上，如果“APPEND_SLASH”为真，则正则表达式中不需要最后一个斜杠。

```
 url(r'^$', ...) 
```

请。请参阅[Djanobook ch。3](http://djangobook.com/en/2.0/chapter03/) 与此：“如果你是那种喜欢所有 URL 都以斜杠结尾的人（这是 Django 开发人员的偏好），你需要做的就是在每个 URL 模式中添加一个尾部斜杠并保留 APPEND_SLASH 设置为 True。如果您希望您的 URL 没有尾部斜杠，或者如果您想基于每个 URL 来决定它，请将 APPEND_SLASH 设置为 False，并在您认为合适的 URL 模式中放置尾部斜杠。

# jquery - fancyBox 2 动态宽度和高度

> ID：11813756
> 
> 赞同：1
> 
> 时间：2012-08-05T03:36:32.070
> 
> 标签：jquery, iframe, fancybox, fancybox-2

我有一个页面，其中有一个链接可以打开带有 fancyBox 的 iFrame（我使用的是 fancyBox 2）。iFrame 中包含的内容的宽度和高度会有所不同，因此我需要 iFrame 的宽度和高度是动态的。我不希望出现滚动条。我希望使用链接引用的内容的确切宽度和高度生成 fancyBox（在本例中为 Cruise-compare.html 页面）。

这是我正在谈论的与此问题相关的页面中的 HTML：

```
<div id="compareShipSubmit">
    <a id="cruiseCompareSubmit" class="fancybox.iframe" href="../cruise/cruise-compare.html">Compare</a>
</div> 
```

这是一个 HTML 示例，它位于 iframe 内的 Cruise-compare.html 页面的 body 标记内：

```
<div id="cruiseCompareSurround">
    Content would go here, and would vary in width and size
</div> 
```

这是我的 fancyBox javascript 现在的样子（这个脚本被原始页面引用）：

```
$("#cruiseCompareSubmit").fancybox({
    width       : 935,
    height      : 485,
    fitToView   : false,
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'elastic',
    closeEffect : 'elastic'
}); 
```

我知道我需要删除上面提供的 fancyBox 脚本中的宽度和高度参数，但我不知道如何让生成的 fancyBox 具有 Cruise-compare.html 页面内容的宽度和高度。

我看到了这个类似的问题（[Fancybox 2 Dynamic Width Based on Content Size](https://stackoverflow.com/questions/11023450/fancybox-2-dynamic-width-based-on-content-size)），但我不知道如何使它在我的情况下正常工作（他们做的事情与我有点不同）。

谁能告诉我该怎么做才能使这项工作以我试图使其工作的方式工作？

# c# - 使用 C# 将文本添加到 Excel 工作表中

> ID：11813758
> 
> 赞同：7
> 
> 时间：2012-08-05T03:37:21.513
> 
> 标签：c#, excel

我正在尝试使用 C# 在 Excel 工作表中添加一个很长的文本。我使用这段代码：

```
worksheet.Cells[1, 1] = textString; 
```

结果在这里： ![](../Images/bca86dc7224655a012efaf44751385c4.png)

我想要的是： ![](../Images/c2e6ef311156fea69b01755f89473b3b.png)

建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-05T04:18:49.700

要获得此效果，您必须将文本复制到剪贴板，然后将其粘贴到相关单元格。看这个例子

**注意**：设置`textString`为非常长的字符串。

**代码**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel; 

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            //~~> Change Your String here
            String textString = "I'm trying to add a pretty long text into the Excel sheet by using sheet. I use this code:" + Environment.NewLine +
                               "worksheet.Cells[1, 1] = textString;" + Environment.NewLine +
                               "The result is here:";

            Clipboard.SetText(textString);

            Microsoft.Office.Interop.Excel.Application xlexcel;
            Microsoft.Office.Interop.Excel.Workbook xlWorkBook;
            Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet;

            object misValue = System.Reflection.Missing.Value;
            xlexcel = new Excel.Application();
            xlexcel.Visible = true;

            //~~> Add a new a workbook
            xlWorkBook = xlexcel.Workbooks.Add(misValue);

            //~~> Set Sheet 1 as the sheet you want to work with
            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

            //~~> Set your range
            Excel.Range CR = (Excel.Range)xlWorkSheet.Cells[1, 1];

            CR.Select();

            xlWorkSheet.Paste(CR, false);

            // xlWorkBook.Close(true, misValue, misValue);
            //  xlexcel.Quit();

            // releaseObject(xlWorkSheet);
            // releaseObject(xlWorkBook);
            // releaseObject(xlexcel);
        }

        //private void releaseObject(object obj)
        //{
        //    try
        //    {
        //        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
        //        obj = null;
        //    }
        //    catch (Exception ex)
        //    {
        //        obj = null;
        //        MessageBox.Show("Unable to release the Object " + ex.ToString());
        //    }
        //    finally
        //    {
        //        GC.Collect();
        //    }
        //} 
    }
} 
```

**快照**

![在此处输入图像描述](../Images/e2e39ac6bd2cee1e222abe9f30bea8ed.png)

# hibernate - hibernate sql 查询没有正确映射布尔值？

> ID：11813760
> 
> 赞同：4
> 
> 时间：2012-08-05T03:37:46.397
> 
> 标签：hibernate, postgresql

通过任何 SQL 客户端运行以下命令

```
SELECT FALSE, TRUE; 
```

返回

```
f, t 
```

但是这个 SQL 查询：

```
SQLQuery qry = session.createSQLQuery("SELECT FALSE, TRUE;");
Object[] result = (Object[]) qry.uniqueResult(); 
```

返回一个包含两个布尔对象的 Object 数组：

```
[false, false] 
```

我正在使用带有休眠功能的 postgres 9.0-801.jdbc4。

如何通过休眠 sql 查询返回适当的布尔值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T07:09:10.247

尝试在映射文件中更改布尔属性的定义：

```
<property name="someBoolean" column="SOME_COLUMN" type="true_false"></property> 
```

或者如果您使用注释添加这个：

```
@Type(type="true_false") 
```

这应该会有所帮助，因为默认情况下休眠将布尔属性映射为 BIT 而不是 CHAR(1)，我认为这就是您遇到此类问题的原因。（查看[休眠映射类型](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-types-basictypes)）。

**编辑：**

如果您需要使用 SQLQuery 选择布尔值（作为分隔值而不是实体字段），您可以使用这种方法：

```
SQLQuery q = session.createSQLQuery("SELECT FALSE a, TRUE b;");
q.addScalar("a", new TrueFalseType());
q.addScalar("b", new TrueFalseType());

Object[] result = (Object[]) q.uniqueResult(); 
```

正如您在这种情况下看到的，您需要显式定义获取值的类型，以便 hibernate 可以正确转换它。我在 MySQL 中测试了这种方法并且一切正常（除了在我的情况下我指定类型*BooleanType()*因为 MySQL 使用布尔值作为 1/0）。

Hibernate 使用三种布尔格式：

1) “Y/N” -> CHAR(1) ansi sql 类型 -> “yes_no” 休眠类型 -> YesNoType 类；

2) "T/F" -> CHAR(1) -> "true_false" 休眠类型 -> TrueFalseType 类；

3）“1/0”->BIT ansi sql类型->“boolean”休眠类型->BooleanType类；

因此，您需要为您的数据库选择正确的类型（据我了解，正如我在示例中所写，您应该使用*TrueFalseType*）。

# ruby - DataMapper.get(:attribute => value) 返回 nil

> ID：11813762
> 
> 赞同：0
> 
> 时间：2012-08-05T03:38:00.023
> 
> 标签：ruby, sinatra, ruby-datamapper

模型：

```
class Country
  include DataMapper::Resource
  property :id, Serial
  property :name, String
  property :continent, String
end 
```

我正在尝试通过 name 属性进行查询：

`Country.find(:name => "value")`

但它一直给我一个`nil`. 这不应该是这种情况，因为我非常确定具有特定值的记录存在于数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T04:29:36.573

我意识到我必须这样做：`Country.first(:name => "value")`或`Country.last(:name => "value")`

`Country.get`仅支持按主键或复合键搜索

替代方案是：`Country.all(:conditions => { :name => "value" })`

参考：[http ://datamapper.org/docs/find.html](http://datamapper.org/docs/find.html)

# java - java并发-中断DeadLook线程

> ID：11813766
> 
> 赞同：1
> 
> 时间：2012-08-05T03:38:56.377
> 
> 标签：java, concurrency, deadlock

我正在尝试学习 java 并发的基础知识，我从 oracle java 教程开始，直到[http://docs.oracle.com/javase/tutorial/essential/concurrency/deadlock.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/deadlock.html)，我只是在代码示例中添加了一些行，但是当我运行代码时，主方法永远不会返回。我知道 alphonseThread 和 gastonThread 都被每个以太锁死了，但是为什么不能从主线程中中断它们呢？

```
public class DeadLock {

     static class Freind {

          private final String name;
          public Freind(String name_) {
               this.name = name_;
          }

          public String getName() {
               return this.name;
          }

          public synchronized void bow(Freind bower) throws InterruptedException {
                System.out.format("%s : %s " + "has bowed to me!%n",
                      this.name, bower.getName());
                Thread.sleep(2000);
                bower.bowBack(this);

         }

         public synchronized void bowBack(Freind bower) {
               System.out.format("%s : %s " + "has bowed back to me!%n",
                this.name, bower.getName());
         }
     }

    @SuppressWarnings("SleepWhileInLoop")
    public static void main(String[] args) throws InterruptedException {
        // wait for 4 seconds before send a interuption signal
        int patient = 4000;
        int waitingUnit = 1000;
        long start;
        final Freind alphonse = new Freind("Alphonse");
        final Freind gaston = new Freind("Gaston");
        // the first thread 
        Thread alphonseThread = new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    alphonse.bow(gaston);
                } catch (InterruptedException ex) {
                    System.out.println("Alphnso have been killed");
                }
             }
        });
        // the second thread
        Thread gastonThread = new Thread(new Runnable() {
            @Override
            public void run() {
                 try {
                     gaston.bow(alphonse);
                 } catch (InterruptedException ex) {
                     System.out.println("Gaston have been killed ");
                 }
             }
         });
         // start the tow threads                
         start = System.currentTimeMillis();
         alphonseThread.start();
         gastonThread.start();
         while (alphonseThread.isAlive() || gastonThread.isAlive()) {
             if (((System.currentTimeMillis() - start) < patient)
                     && (alphonseThread.isAlive() || gastonThread.isAlive())) {
                 System.out.println(System.currentTimeMillis() - start);
                 System.out.println("still waiting !!");
                 Thread.sleep(waitingUnit);
              } else {
                 if (alphonseThread.isAlive()) {
                     alphonseThread.interrupt();
                     alphonseThread.join();
                 }
                 if (gastonThread.isAlive()) {
                     gastonThread.interrupt();
                     gastonThread.join();
                }                     
             }
         }
         System.out.println("finnaly I kill all of them");
     }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T04:49:54.060

> 但是为什么不能从主线程中中断它们呢？

您可以从主线程（或任何地方）中断。只需调用`Thread.interrupt()`要中断的线程即可。

问题是它`interrupt`不会解除阻塞试图获取 Java 原始锁/互斥锁的线程。事实上，我不认为有任何东西可以安全地解除对原始锁死锁的线程的阻塞。

如果您希望您的应用程序能够从涉及对象锁的死锁中恢复，那么您可能应该使用`Lock`对象和[`Lock.lockInterruptibly()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html#lockInterruptibly%28%29)方法......当线程中断时将解除阻塞。

# c++ - 无法将 'LPCWSTR {aka const wchar_t*}' 转换为 'LPCSTR {aka const char*}

> ID：11813767
> 
> 赞同：6
> 
> 时间：2012-08-05T03:39:15.020
> 
> 标签：c++, winapi, mingw, codeblocks, glew

我一直试图让 Glew 和 opengl 3.2 在 win32 上下文中使用代码块（minGW）。[我在这里](http://www.swiftless.com/tutorials/opengl4/1-opengl-window.html)找到了一个不错的小教程

由于我一直在尝试确定是否可以在代码块中编译 glew，因此我想在执行本教程之前先尝试一下源代码，看看它是否可行。

在稍微调整了代码之后，我尝试编译并得到了几个我以前从未见过的错误。它们如下

```
|In function 'bool createWindow(LPCWSTR, int, int)':|
|73|error: cannot convert 'LPCWSTR {aka const wchar_t*}' to 'LPCSTR {aka const char*}' in assignment|
|80|error: cannot convert 'LPCWSTR {aka const wchar_t*}' to 'LPCSTR {aka const char*}' for argument '2' to 'HWND__* CreateWindowExA(DWORD, LPCSTR, LPCSTR, DWORD, int, int, int, int, HWND, HMENU, HINSTANCE, LPVOID)'|
|In function 'int WinMain(HINSTANCE, HINSTANCE, LPSTR, int)':|
|105|warning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]|
|110|error: '_TRUNCATE' was not declared in this scope|
|110|error: 'mbstowcs_s' was not declared in this scope| 
```

我的代码是

```
include <iostream>
#include <Windows.h>

#ifndef GLEW_STATIC
#define GLEW_STATIC
#endif //GLEW_STATIC

#include <GL/glew.h>
#include <GL/wglew.h>

//using namespace std;
//
//int main()
//{
//    cout << "Hello world!" << endl;
//    return 0;
//}

#include "opengl_3.h"

OpenGLContext openglContext; // Our OpenGL Context class

bool running = true; // Whether or not the application is currently running

HINSTANCE hInstance; // The HINSTANCE of this application
LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM); // Standard window callback

/**
    WndProc is a standard method used in Win32 programming for handling Window messages. Here we
    handle our window resizing and tell our OpenGLContext the new window size.
*/
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) {
    switch (message) {
        case WM_SIZE: // If our window is resizing
        {
            openglContext.reshapeWindow(LOWORD(lParam), HIWORD(lParam)); // Send the new window size to our OpenGLContext
            break;
        }

        case WM_DESTROY:
        {
            PostQuitMessage(0);
            break;
        }
    }

    return DefWindowProc(hWnd, message, wParam, lParam);
}

/**
    createWindow is going to create our window using Windows API calls. It is then going to
    create our OpenGL context on the window and then show our window, making it visible.
*/
bool createWindow(LPCWSTR title, int width, int height) {
    WNDCLASS windowClass;
    HWND hWnd;
    DWORD dwExStyle = WS_EX_APPWINDOW | WS_EX_WINDOWEDGE;

    hInstance = GetModuleHandle(NULL);

    windowClass.style = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;
    windowClass.lpfnWndProc = (WNDPROC) WndProc;
    windowClass.cbClsExtra = 0;
    windowClass.cbWndExtra = 0;
    windowClass.hInstance = hInstance;
    windowClass.hIcon = LoadIcon(NULL, IDI_WINLOGO);
    windowClass.hCursor = LoadCursor(NULL, IDC_ARROW);
    windowClass.hbrBackground = NULL;
    windowClass.lpszMenuName = NULL;
    windowClass.lpszClassName = title;

    if (!RegisterClass(&windowClass)) {
        return false;
    }

    hWnd = CreateWindowEx(dwExStyle, title, title, WS_OVERLAPPEDWINDOW,
      CW_USEDEFAULT, 0, width, height, NULL, NULL, hInstance, NULL);

    openglContext.create30Context(hWnd); // Create our OpenGL context on the given window we just created

    ShowWindow(hWnd, SW_SHOW);
    UpdateWindow(hWnd);

    return true;
}

/**
    WinMain is the main entry point for Windows based applications as opposed to 'main' for console
    applications. Here we will make the calls to create our window, setup our scene and then
    perform our 'infinite' loop which processes messages and renders.
*/
int WINAPI WinMain(HINSTANCE hInstance,
                     HINSTANCE hPrevInstance,
                     LPSTR    lpCmdLine,
                     int       nCmdShow) {
    MSG msg;

    /**
        The following 6 lines of code do conversion between char arrays and LPCWSTR variables
        which are used in the Windows API.
    */
    char *orig = "OpenGL 3 Project"; // Our windows title
    size_t origsize = strlen(orig) + 1;
    const size_t newsize = 100;
    size_t convertedChars = 0;
    wchar_t wcstring[newsize];
    mbstowcs_s(&convertedChars, wcstring, origsize, orig, _TRUNCATE);

    createWindow(wcstring, 500, 500); // Create our OpenGL window

    openglContext.setupScene(); // Setup our OpenGL scene

    /**
        This is our main loop, it continues for as long as running is true
    */
    while (running)
    {
        if (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE)) { // If we have a message to process, process it
            if (msg.message == WM_QUIT) {
                running = false; // Set running to false if we have a message to quit
            }
            else {
                TranslateMessage(&msg);
                DispatchMessage(&msg);
            }
        }
        else { // If we don't have a message to process
            openglContext.renderScene(); // Render our scene (which also handles swapping of buffers)
        }
    }

    return (int) msg.wParam;
} 
```

（对不起文字墙）还有其他文件，但所有错误似乎都是从这里开始的。如果需要，我会发布其余的。

我还没有真正看到任何与此类似的错误，因此我进行了一些谷歌搜索，发现该错误是由编译器未设置为多字节（VS2010 中的设置）引起的。我环顾四周，在代码块中找不到任何此类设置。这段代码只能在 VS 中使用还是我错过了什么？我担心这可能与我的链接有关，因为我过去有很多问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T04:56:19.020

`CreateWindowEx`在包含任何标题之前更改`CreateWindowExW`或定义宏。`UNICODE`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T04:56:17.560

我从来没有使用过 minGW，所以把它和一大粒盐一起吃。（顺便说一句，VS Express 可以免费使用。）

Unicode/Ascii 决定很大程度上由 UNICODE 定义控制。因此，如果您#define UNICODE 1，或者可能在您的编译命令行中传递它，那么很有可能会解决您的问题。

# sql-server - SSIS 平面文件连接管理器中的顽固列数据类型不会改变。:(

> ID：11813768
> 
> 赞同：2
> 
> 时间：2012-08-05T03:39:40.630
> 
> 标签：sql-server, sql-server-2005, ssis, ssis-data-types

我继承了一个现有的 SSIS 包，它将平面文件数据导入我的 SQL Server 2005 数据库。我需要将“总销售额”列的数据类型从“数字”更改为“货币”。当我更改数据类型并导出包时，数据类型仍然是数字。

我还尝试创建一个新的平面文件连接以在同一个包中使用，但由于某些奇怪的原因，它仍然是数字而不是“cy”货币。我想在其他一些区域有一些“卡住”的东西迫使最后一列保持数字？

有谁知道更改平面文件数据源的数据类型的技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:06:02.443

谢谢各位的帮助。在我的情况下，我似乎需要删除并重新添加平面文件源步骤并添加一个新的平面文件连接管理器。也许有*更好*的方法可以做到这一点，而我只是在 SSIS 的 GUI 迷宫中按错误的顺序单击。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:09:26.450

您是否尝试在 DT 中添加数据转换转换任务？

例如，您可以将总销售额修改为

```
Gross Sales, Gross Sales_CONV    Choose Currency [DT_CY] as your currency. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T15:22:03.740

我还发现*有时*将 Source 和 Destination 属性上的 ValidateExternalMetaData 更改为 false 会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-08T16:35:38.790

当某些更改不适用时，即使没有明显原因导致数据“顽固”并抵制更改，您也应该尝试关闭 Visual Studio 并再次打开它。就我而言，它适用于上述故障，以及脚本编辑器无法打开的情况。看起来某些信息保留在缓存中，并阻止某些功能正常工作。就我而言，我的平面文件连接管理器中有很多列，因此删除连接并一一添加这些列是我最后一次尝试。

# performance - Delphi 编译时间特别慢

> ID：11813772
> 
> 赞同：6
> 
> 时间：2012-08-05T03:40:52.417
> 
> 标签：performance, delphi, compilation

好吧，我的工作项目中出现了一个奇怪的问题。它是在德尔福上写的。当我尝试编译它时，编译大约 770 000 行需要**8 个小时**（这不是结束），而我的同事只需要**15-20 秒**。我已经尝试了[为什么 Delphi 的编译速度会随着它打开的时间越长而降低，我能做些什么呢？](https://stackoverflow.com/questions/6577993/why-does-delphis-compilation-speed-degrade-the-longer-its-open-and-what-can-i)

1.  缩短项目路径
2.  使用 MyDefrag 对磁盘进行碎片整理
3.  使用清除单元缓存（不确定，如果它完全有效）
    我还关闭了优化并使用调试模式。我的电脑非常快（i5-2310 3.1 GHz，16 Gb RAM，通常的 SATA 硬盘），瓶颈可能是硬盘，但我的同事也有通常的硬盘。所以，很神秘，编译这么慢的原因是什么。

**编辑：**我为缺乏信息道歉。这是附加信息：

1.  我使用调试模式，发布版本相同。
2.  我们使用 Delphi XE 版本。
3.  我最初用项目复制了我同事的文件夹。
4.  我不使用网络驱动器，我试图将项目移动到另一个硬盘。
5.  有关系统的附加信息：我使用 Windows 7 Enterprise N **64 位**，而我的同事使用 Windows 7 32 位，此外，Delphi XE 是 32 位（不知道，如果它可以是 64 位）。可能是某种原因？

**编辑2：**我找到了解决方案！问题是我在我的 Windows 64 位系统上安装了 Delphi。将它安装在虚拟 Windows 7 x86 上使其工作：在几秒钟内编译。不知道，为什么性能差距这么大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:17:58.303

你确定这不是一些硬件问题，例如你的硬盘有坏扇区吗？尝试将源代码放在不同的磁盘上，看看问题是否消失。或者，搜索路径可能指向一个非常慢或什至不可用的网络驱动器？

# javascript - 使链接播放 .mp3 文件

> ID：11813773
> 
> 赞同：0
> 
> 时间：2012-08-05T03:41:00.427
> 
> 标签：javascript, html

请在此处查看工作代码：http: [//jsfiddle.net/hrnDG/6/](http://jsfiddle.net/hrnDG/6/)

我想修改此代码，以便所有可能的答案都成为 .mp3 文件的链接。当用户单击这些链接中的任何一个时，就会播放音频文件。然后用户可以选择他们的答案并按下提交。

我该怎么做呢？有什么简单的方法可以应用到我的代码中以使其正常工作吗？我担心添加一些东西可能会禁用正确和错误的 CSS 类。

*请知道：如果有人认为有比将链接转换为可播放的 mp3 链接更有效/更简单的方法，我会全力以赴。*

非常感谢！

我的代码：

```
<form>
<table>
<tr class="q1">                       
    <td>What sounds like a rabbit?</td>
    <td>
        <input class="radiostyle wrong" type="radio" name="answers" value="Java" id="answers_1_Java" />
        <label for="answers_1_Java">A</label></td>
    <td>
        <input class="radiostyle right" type="radio" name="answers" value="JavaScript" id="answers_1_JavaScript" />
        <label for="answers_1_JavaScript">B</label></td>
    <td>
        <input class="radiostyle wrong" type="radio" name="answers" value="Ruby" id="answers_1_Ruby" />
        <label for="answers_1_Ruby">C</label></td>
    <td>
        <input class="radiostyle wrong" type="radio" name="answers" value="C#" id="answers_1_C#" />
        <label for="answers_1_C#">D</label></td>
    <td><input class="submit submit-1" type="submit" value="Submit" /></td>
    <td></td></tr></table></form>​ 
```

JS

```
$('.submit').click(function() {
$(this).closest('tr')
    .find('[name="answers"]')
        .removeClass('checked')
    .filter(':checked')
        .addClass('checked');
return false;
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T04:01:34.950

如果您可以假设您的用户拥有支持 HTML5 的浏览器，您可以`<audio>`向页面添加一个隐藏元素并从您的脚本中播放它。

```
<audio hidden="hidden" id="sound">  
  <source src="sound.ogg" type="audio/ogg" />
  <source src="sound.mp3" type="audio/mpeg" />
</audio> 
```

如果`<audio>`他们的浏览器支持，则使用 JavaScript 通过以下代码启动播放器：

```
document.getElementById("sound").play(); 
```

# c# - LINQ：为什么这个查询在查询语法中有效，但在方法语法中无效？

> ID：11813776
> 
> 赞同：0
> 
> 时间：2012-08-05T03:41:30.753
> 
> 标签：c#, linq

我有这个查询

```
string[] names = { "Tom", "Dick", "Harry", "Mary", "Jay" };

var query =
    from     n in names
    where    n.Contains ("a")   // Filter elements
    orderby  n.Length           // Sort elements
    select   n.ToUpper();       // Translate each element (project)

foreach(var item in query)
    Console.WriteLine(item); 
```

完美运行，`JAY MARY HARRY`按预期给出结果。

但是当我运行这个

```
string[] names = { "Tom", "Dick", "Harry", "Mary", "Jay" };

var query2 = names.Where(n=> n.Contains("a")).OrderBy(n=>n.Length).Select(n=>n.ToUpper);

foreach(var item in query2)
    Console.WriteLine(item); 
```

我收到这条消息`The type arguments for method 'System.Linq.Enumerable.Select<TSource,TResult>(System.Collections.Generic.IEnumerable<TSource>, System.Func<TSource,TResult>)' cannot be inferred from the usage. Try specifying the type arguments explicitly.`

我也试过运行这个

```
var query2 = names.Where(n=> n.Contains("a")).OrderBy(n=>n.Length).Select<string, string>(n=>n.ToUpper); 
```

它说`Cannot convert method group 'ToUpper' to non-delegate type 'string'. Did you intend to invoke the method? Cannot convert lambda expression to delegate type 'System.Func<string,string>' because some of the return types in the block are not implicitly convertible to the delegate return type.`

我不知道发生了什么？谁能告诉我为什么查询语法工作正常方法语法不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T03:46:00.237

您在 之后缺少一对括号`ToUpper`：

```
var query2 = names
    .Where(n=> n.Contains("a"))
    .OrderBy(n=>n.Length)
    .Select(n=>n.ToUpper() /* <<== HERE */); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T03:46:14.493

您需要将 ToUpper 作为方法调用（带括号）：

```
var query2 = names.Where(n=> n.Contains("a")).OrderBy(n=>n.Length).Select(n=>n.ToUpper()); 
```

# wpf - 上下文敏感的资源字符串作为工具提示

> ID：11813781
> 
> 赞同：0
> 
> 时间：2012-08-05T03:42:52.747
> 
> 标签：wpf, xaml, resourcedictionary

我怀疑在过去几周的开/关搜索中我无法找到问题的答案的原因是我可能没有在搜索中使用正确的术语。任何关于在搜索或直接答案中使用哪些术语的指针将不胜感激。

这是情况。我编写了一个`WPF/C#`管理 SQL Server 数据库中数据的应用程序。我已经对按钮的工具提示进行了模板化，以便它们显示我希望它们显示的信息。这是一个例子：

```
<Button.ToolTip>
  <ToolTip Template="{StaticResource ToolTipTemplate}"
           c:ToolTip.HeaderText="{x:Static p:Resources.AddRecordToolTip}"
           c:ToolTip.DescriptionText="{x:Static p:Resources.AddRecordDescription}" />
</Button.ToolTip> 
```

每个工具提示中都有两位信息。
1.`"HeaderText"`这是对按钮功能的非常简短的描述。IE 添加新供应商。
2.`"DescriptionText"`里面有关于这个按钮操作的更详细的信息。

我想做的是：
“AddRecordToolTip”资源应该是`"Add New {0}"`这样的，这样相同的资源就可以用于每个窗口上“Add”按钮的“HeaderText”。

`"{0}"`应替换为`"Vendor"`in等。`"Vendor Window",` `"Customer"``"Customer Window"`

不知何故，我只是无法找到有关如何执行此操作的示例。我确定我遗漏了一些简单的东西，或者我没有用谷歌搜索的一些术语会给我想要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:41:23.433

假设您的视图模型有一个属性描述，它将是供应商窗口等的“供应商”......

```
<Button.ToolTip> 
  <ToolTip Template="{StaticResource ToolTipTemplate}" 
           c:ToolTip.HeaderText="{Binding Description, StringFormat={x:Static p:Resources.AddRecordToolTip}}" 
           c:ToolTip.DescriptionText="{x:Static p:Resources.AddRecordDescription}" /> 
</Button.ToolTip> 
```

# c++ - 在 QT for Windows 中使用 Win32 API

> ID：11813782
> 
> 赞同：5
> 
> 时间：2012-08-05T03:42:52.517
> 
> 标签：c++, qt, winapi

我正在从 .net C# 迁移到 QT C++，我正在尝试使用这个 Win32 函数来模拟 QT 中的驱动器：

```
[DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern bool DefineDosDevice(int flags, string devname, string path);

[DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern int QueryDosDevice(string devname, StringBuilder buffer, int bufSize); 
```

上面的代码是在 C# 中，但我不知道如何在 QT 中使用它们，有人可以给我一个示例如何执行此操作以及如何在 QT 中使用任何 Win32 API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T05:27:30.317

查看[DefineDosDevice](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363904(v=vs.85).aspx)和[QueryDosDevice](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365461(v=vs.85).aspx)的文档，您会在底部的表格中看到它们都在“kernel32.lib”库中定义，并在“Windows.h”（间接）中声明。

在您的代码中，您应该`#include <Windows.h>`：然后您将能够直接调用它们。

我不确定您的特定编译器/IDE，但如果您在链接时收到有关“未解析的引用”的错误，您可能需要将“kernel32.lib”（来自 Windows SDK）添加到您的库路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:05:15.457

感谢您的任何回答！我的问题的答案是：

```
#include <Windows.h>

void MainWindow::on_pushButton_clicked()
{
    QString qstr1 = "Z:";
    QString qstr2 = getenv("tmp");
    DefineDosDevice(0, (LPCTSTR)qstr1.utf16(), (LPCTSTR)qstr2.utf16());
}

void MainWindow::on_pushButton_2_clicked()
{
    QString qstr = "Z:";
    DefineDosDevice(2, (LPCTSTR)qstr.utf16(), 0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T04:04:44.963

您可以将 win32 API 用作常规 C 函数。QT 和其他 C++ 程序没有区别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-14T08:24:03.980

在 .h 或 .cpp 文件中添加 #pragma comment(lib,"user32")

# php - PHP 中的语法和变量

> ID：11813785
> 
> 赞同：1
> 
> 时间：2012-08-05T03:44:28.073
> 
> 标签：php, syntax

我在编写一些语法时遇到了一些麻烦。我想回应这个

```
'location_1' => $location_1, 
```

然而，事情并不像看起来那么简单。当我编写 echo 语句时，整数 1 必须是变量 $z。这是我尝试编写的代码

```
echo "'location_' . $z . '' =>' . ${'location_' . $z} . ','"; 
```

这是它输出的

```
'location_' . 1 . '' =>' . something . ',' 
```

$location_1 等于字符串 something。我不知道如何以正确的方式做到这一点。任何关于描述这种语法如何工作的指南也将是一个重要的帮助，所以我可以完全理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T03:53:42.160

您可以直接将变量写入双引号字符串，请参阅[http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)

```
echo "'location_$z' => \$location_$z,"; 
```

您可能还想阅读其余的[字符串文档](http://www.php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T03:48:09.467

这是一种方法：

```
echo "'location_$z' => \$location_$z,"; 
```

您需要转义 $ 符号。在这种情况下，双引号表示要回显的内容，而单引号实际上会得到回显。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T03:48:19.443

一种方法是：`echo "'location_{$z}' => \$location_{$z},";`

编辑：这是你的意思吗？

```
<?php
$z = 1;
$location_1 = 'something';
echo "'location_$z' => " . ${'location_'. $z} . ','; 
```

产生：`'location_1' => something,`

为什么不将这些变量存储在数组中以便于访问。就像是：

```
$locations = array('location_id' => 'location_name'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T03:48:31.113

这是[回声文档](http://php.net/manual/en/function.echo.php)的链接（请参阅示例，我认为它们很好地描述了它的工作原理）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-05T03:53:05.157

您可以将其分成两行并获得预期的输出。

例如：

```
$var_location = "$". "location". $z;

echo "'location_" . $z . "' =>'" . $var_location . "','"; 
```

# android - Android sqlite插入错误代码19：约束失败

> ID：11813786
> 
> 赞同：1
> 
> 时间：2012-08-05T03:44:47.600
> 
> 标签：android, database, sqlite

我查看了有关此主题的其他问题，但没有一个答案适用和/或对我有用。我在尝试插入数据库时​​收到“SQLiteConstraintException：错误代码 19：约束失败”错误。

这是我的数据库：

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class StrongDbAdapter {

    public static final String KEY_TITLE = "title";
    public static final String KEY_BODY = "body";
    public static final String KEY_ROWID = "_id";

    public static final String WORKOUT_STATE = "workoutState";

    public static final String SQUAT_LABEL = "squatLabel";

    private static final String TAG = "StrongDbAdapter";
    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    private static final String DATABASE_NAME = "data";
    private static final String DATABASE_TABLE = "notes";
    private static final int DATABASE_VERSION = 2;

    /**
     * Database creation sql statement
     */
    private static final String DATABASE_CREATE =
        "create table notes (_id integer primary key autoincrement , "
        + "title text, workoutState text ," +
        " squatLabel text );";

    private final Context mCtx;

    private static class DatabaseHelper extends SQLiteOpenHelper {

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {

            db.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS notes");
            onCreate(db);
        }
    }

    /**
     * Constructor - takes the context to allow the database to be
     * opened/created
     * 
     * @param ctx the Context within which to work
     */
    public StrongDbAdapter(Context ctx) {
        this.mCtx = ctx;
    }

    /**
     * Open the notes database. If it cannot be opened, try to create a new
     * instance of the database. If it cannot be created, throw an exception to
     * signal the failure
     * 
     * @return this (self reference, allowing this to be chained in an
     *         initialization call)
     * @throws SQLException if the database could be neither opened or created
     */
    public StrongDbAdapter open() throws SQLException {
        mDbHelper = new DatabaseHelper(mCtx);
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        mDbHelper.close();
    }

    /**
     * Create a new note using the title and body provided. If the note is
     * successfully created return the new rowId for that note, otherwise return
     * a -1 to indicate failure.

     */
    public long createNote(String title, String squatLabel) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_TITLE, title);
        //initialValues.put(WORKOUT_STATE, workoutState);
        initialValues.put(SQUAT_LABEL, squatLabel);

        return mDb.insert(DATABASE_TABLE, null, initialValues);
    }

    /**
     * Delete the note with the given rowId
     * 
     * @param rowId id of note to delete
     * @return true if deleted, false otherwise
     */
    public boolean deleteNote(long rowId) {

        return mDb.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    /**
     * Return a Cursor over the list of all notes in the database
     * 
     * @return Cursor over all notes
     */
    public Cursor fetchAllNotes() {

        return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
                WORKOUT_STATE}, null, null, null, null, null);
    }

    /**
     * Return a Cursor positioned at the note that matches the given rowId
     * 
     * @param rowId id of note to retrieve
     * @return Cursor positioned to matching note, if found
     * @throws SQLException if note could not be found/retrieved
     */
    public Cursor fetchNote(long rowId) throws SQLException {

        Cursor mCursor =

            mDb.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
                    KEY_TITLE, WORKOUT_STATE}, KEY_ROWID + "='" + rowId+"'", null,
                    null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;

    }

    /**
     * Update the note using the details provided. The note to be updated is
     * specified using the rowId

     * @param rowId id of note to update
     * @param title value to set note title to
     * @return true if the note was successfully updated, false otherwise
     */
    public boolean updateNote(long rowId, String title) {
        ContentValues args = new ContentValues();
        args.put(KEY_TITLE, title);
        //args.put(WORKOUT_STATE, workoutState);

        return mDb.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
    }
} 
```

这是我的 WorkoutEdit 类中的插入方法

```
//Saves all the data to the database
    private void saveState() {
        String title = workoutState;
        String squatLabel = squats.getText().toString();

        if (mRowId == null) {
            long id = mDbHelper.createNote(title, squatLabel);
            if (id > 0) {
                mRowId = id;
            }
        } else {
            mDbHelper.updateNote(mRowId, title);
        }
    } 
```

最后，我的 LogCat！

```
08-04 23:09:22.009: E/Database(26575): Error inserting squatLabel=Squats - 45 title=WorkoutB
08-04 23:09:22.009: E/Database(26575): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
08-04 23:09:22.009: E/Database(26575):  at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
08-04 23:09:22.009: E/Database(26575):  at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java)
08-04 23:09:22.009: E/Database(26575):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1677)
08-04 23:09:22.009: E/Database(26575):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1521)
08-04 23:09:22.009: E/Database(26575):  at com.anapoleon.android.stronglifts.StrongDbAdapter.createNote(StrongDbAdapter.java:163)
08-04 23:09:22.009: E/Database(26575):  at com.anapoleon.android.stronglifts.WorkoutEdit.saveState(WorkoutEdit.java:232)
08-04 23:09:22.009: E/Database(26575):  at com.anapoleon.android.stronglifts.WorkoutEdit.onPause(WorkoutEdit.java:214)
08-04 23:09:22.009: E/Database(26575):  at android.app.Activity.performPause(Activity.java:4046)
08-04 23:09:22.009: E/Database(26575):  at android.app.Instrumentation.callActivityOnPause(Instrumentation.java)
08-04 23:09:22.009: E/Database(26575):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2819)
08-04 23:09:22.009: E/Database(26575):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2789)
08-04 23:09:22.009: E/Database(26575):  at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2762)
08-04 23:09:22.009: E/Database(26575):  at android.app.ActivityThread.access$1700(ActivityThread.java:135)
08-04 23:09:22.009: E/Database(26575):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java)
08-04 23:09:22.009: E/Database(26575):  at android.os.Handler.dispatchMessage(Handler.java)
08-04 23:09:22.009: E/Database(26575):  at android.os.Looper.loop(Looper.java)
08-04 23:09:22.009: E/Database(26575):  at android.app.ActivityThread.main(ActivityThread.java:4385)
08-04 23:09:22.009: E/Database(26575):  at java.lang.reflect.Method.invokeNative(Native Method)
08-04 23:09:22.009: E/Database(26575):  at java.lang.reflect.Method.invoke(Method.java:507)
08-04 23:09:22.009: E/Database(26575):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
08-04 23:09:22.009: E/Database(26575):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
08-04 23:09:22.009: E/Database(26575):  at dalvik.system.NativeStart.main(Native Method) 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T03:51:23.973

您必须弄清楚您的插入违反了 SQLite 数据库中的哪个数据库约束。我所知道的最好的方法是根据您尝试插入的数据直观地验证每个约束。

要获取每个表的约束列表，可以执行以下 SQL：

```
select sql from sqlite_master 
where type='table' and name='your_table_name'; 
```

# yii - 如何在 Yii 中扩展 activeRecord 模型

> ID：11813788
> 
> 赞同：2
> 
> 时间：2012-08-05T03:45:48.987
> 
> 标签：yii

我正在尝试在 Yii 中创建一个分页的表单。每个页面用于一组字段。我认为最好的方法是扩展 ActiveRecord 模型并为当前页面添加一个参数。这也允许我用我自己的表单规则覆盖 rules() 方法。

我的问题是，Yii 不允许我们本地扩展模型。我不得不重写 getMetaData() 方法，因为 Yii 自己运行 self::model(get_class($this)) ，这最终破坏了一切。

不仅如此，我还不能使用 findByPk，因为 Yii 严重依赖类名。

我知道大量的工作来完成这项工作，但我想知道我是否遗漏了一些东西。

谢谢，

凯尔

- 编辑 -

我完全明白了，我完全觉得自己很愚蠢。我所要做的就是覆盖 model() 方法以返回当前模型类。

所以：

```
class MyAr extends CActiveRecord {
    public static function model($class = __CLASS__){return parent::model($class);}
}

class ExtendedForm extends MyAr {
    public static function model($class = __CLASS__){return parent::model($class);}
} 
```

是的……我觉得自己很愚蠢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:32:30.103

要扩展 ActiveRecord 模型，只需扩展它！您需要做的就是覆盖模型方法：

```
class MyAr extends CActiveRecord {
    public static function model($class = __CLASS__){return parent::model($class);}
}

class ExtendedForm extends MyAr {
    public static function model($class = __CLASS__){return parent::model($class);}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:09:25.867

模型类是 ActiveRecord 的子类，因此您可以覆盖 ActiveRecord 的一些变量/方法。我的意思是没有必要再扩展 Activerecord...！它在定义模型时被扩展！因此，只需在其中添加您需要的任何内容。当然，这种方式有在每个模型类中手动添加代码的不便之处。如果它太多，并且如果您使用的是 gii，那么您只需修改 gii 用于生成模型的代码模板。

# javascript - 是否有任何 javascript 或 flash 项目可以在线编辑音频？

> ID：11813792
> 
> 赞同：0
> 
> 时间：2012-08-05T03:46:34.217
> 
> 标签：javascript, flash, audio, editor

是否有任何 javascript 或 flash 项目可以在线编辑音频？

我希望它可以剪切一部分音频，删除一部分音频，然后将音频添加到另一个音频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:01:50.727

您可以试试Aviary Suite 提供的 flash 在线[音频编辑器工具。](http://advanced.aviary.com/tools/audio-editor)

...

注意：您不应该像在一般论坛上发布问题，而是用您尝试过的内容来支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T04:08:43.980

这个 html5 音频库列表非常全面。[http://www.html5libs.com/grids/g/audio/](http://www.html5libs.com/grids/g/audio/)

# ios - 我的重力怎么了？

> ID：11813793
> 
> 赞同：1
> 
> 时间：2012-08-05T03:47:10.287
> 
> 标签：ios, cocos2d-iphone, ccsprite, gravity

我最近刚刚在我的应用程序中实现了重力，但是我无法让它正常工作。每当我执行我的代码时，我的游戏中的角色会立即下降，就好像我在设置它的位置而不是应用重力一样。

所以我的游戏循环中有以下代码（dTime 也是我的游戏循环的增量时间）：

```
float fVelocity = 0;
fVelocity -= GRAVITY * dTime;
velocity += fVelocity * dTime;
pos.y = clampf(velocity, -MAXSPEED, MAXSPEED); 
```

然后重力和 MAXSPEED 定义如下：

```
#define GRAVITY 100
#define MAXSPEED 500 
```

那么这里有什么看起来错误的东西可能导致这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T11:10:07.607

您正在设置位置而不是速度。您没有显示定义“速度”变量的位置，但我假设它从零开始。如果要按照自己的方式进行操作，则需要使用精灵的实际位置对其进行初始化，但是您可能应该尝试以不同方式定义每个变量的方法，以使其更易于理解。

```
-- Inside you setup --
float acceleration = 0;
float velocity = 0
float positionY = 100;

-- Inside your update --
acceleration += -GRAVITY * dT;
velocity += acceleration * dT;
positionY += velocity * dT; 
```

我没有包括夹子，但你可以夹到任何你想要的东西。

作为旁注，有些人不喜欢将他们的变量与 dT 相乘，因为如果帧速率下降，玩家将移动非常大的量，这使得玩需要精确计时的游戏变得非常困难。如果你不乘以 dT，物理将滞后于游戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:51:33.900

每帧 500 像素的最大速度是非常高的。考虑使用较低的重力和最大速度值尝试您的算法（id 说大约 10 重力，50 最大速度），然后根据您所看到的进行调整。

# linux-kernel - Linux设备驱动程序：如何分配组/用户权限并使用它？

> ID：11813794
> 
> 赞同：1
> 
> 时间：2012-08-05T03:47:14.933
> 
> 标签：linux-kernel, linux-device-driver, android-hardware

我知道我们可以使用 udev 配置脚本为设备驱动程序分配权限以在根/组/用户模式下运行，但我不确定如何运行在 Android HAL 中使用驱动程序在特定用户模式下运行的程序？只有在 /dev/ttyOx 上执行 chmod 777 后，我才能执行程序。

我在 Android 脚本中的 udev 配置中看到了蓝牙模块，使用如下

chmod 0660 /dev/ttyO1 chown 系统系统 /dev/ttyS0

我的问题是，如何在上述脚本中将使用特定驱动程序的程序注册到特定组或用户权限（例如蓝牙）并仅使该特定程序使用设备驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:26:34.267

免责声明:: 我不是 Android 程序员。我只使用 Linux 内核。

但我仍然相信，驱动程序只能由特权用户加载到内核中。即超级用户/ root。

`/dev/ttyO1`并且 `/dev/ttyS0`只是设备文件。这将由用户空间应用程序打开。因此可以设置对这些设备文件的权限。

无法将特定驱动程序分配给特定组/用户。所有驱动程序都是 LKM（可加载内核模块），即插入内核。

内核以特权模式运行。用户没有直接与内核打交道。它受空间（用户空间/内核空间）的限制。

在脚本中，您可以检查当前用户并决定是否允许加载蓝牙驱动程序。

# php - php中具有多个条件的if语句

> ID：11813795
> 
> 赞同：0
> 
> 时间：2012-08-05T03:47:30.640
> 
> 标签：php

我有多个条件的 if 语句，
这两个条件有什么区别：
1。

```
 if($province=="AB" || "NT" || "NU" || "YT")
{
    $GST=5;
}
else if($province=="BC" || "MB")
{
    $GST=5;
    $PST=7;
}
else if($province=="NB" || "NF" || "ON")
{
    $HST=13;
} 
```

第二个是：
2。

```
if($province=="AB" || $province=="NT" || $province=="NU" || $province=="YT")
{
    $GST=5;
}
else if($province=="BC" || $province=="MB")
{
    $GST=5;
    $PST=7;
}
else if($province=="NB" || $province=="NF" || $province=="ON")
{
    $HST=13;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T03:51:15.703

两者的区别在于第一个不能按预期工作，而第二个在技术上是正确的。

编码：

```
if($province=="AB" || "NT" || "NU" || "YT") 
```

将始终评估为真并执行该条件块中的代码。

原因是你只检查 if`$province == "AB"`然后你检查 if `"NT" == true`which 将评估为 true。

要根据所有这些值（AB、NT、NU、YT）检查省份，您需要明确检查`$province`每个值，而不仅仅是第一个值，这是您在第二个示例中正确执行的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T03:53:58.053

I add to drew010 answer that you can do this too (wich is simpler) :

```
if(in_array($province,array("AB","NT","NU","YT"))
{
    $GST=5;
}
else if(in_array($province,array("BC","MB"))
{
    $GST=5;
    $PST=7;
}
else if(in_array($province,array("NB","NF","ON"))
{
    $HST=13;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T03:52:28.273

The first one will always evaluate to true. In the second, third, and forth `OR` clauses in the first example you are basically asking PHP to convert the strings to Boolean values, and non-empty strings will always evaluate as true.

Just for fun, my favorite way to handle conditionals like this is with a `switch` statement. It's a lot easier for me to read, but it's really a personal preference thing.

```
switch ( $province ) {

   case 'AB' :
   case 'NT' :
   case 'NU' :
   case 'YT' :

     $GST = 5;

   break;

   case 'BC' :
   case 'MB' :

     $GST = 5;
     $PST = 7;

   break;

   case 'NB' :
   case 'NF' :
   case 'ON' :

      $HST = 13;

   break;

} 
```

# javascript - jQuery对象按键获取值

> ID：11813800
> 
> 赞同：7
> 
> 时间：2012-08-05T03:48:26.447
> 
> 标签：javascript, jquery

您将如何`assocIMG`通过与键匹配的键获得值，例如

如果我有一个 var`11786`我希望它返回`media/catalog/product/8795139_633.jpg`

```
var spConfig = {
    "attributes": {
        "125": {
            "id": "125",
            "code": "pos_colours",
            "label": "Colour",
            "options": [{
                "id": "236",
                "label": "Dazzling Blue",
                "price": "0",
                "oldPrice": "0",
                "products": ["11148"]
            }, {
                "id": "305",
                "label": "Vintage Brown",
                "price": "0",
                "oldPrice": "0",
                "products": ["11786", "11787", "11788", "11789", "11790", "11791", "11792", "11793"]
            }]
        }

    }
};
var assocIMG = // Added  - Removed { here, causes issues with other scripts when not working with a configurable product.
    {
        11786: 'media/catalog/product/8795139_633.jpg',
        11787: 'media/catalog/product/8795139_633.jpg',
    } 
```

上面是我正在使用的对象，下面是我当前的 jQuery。帮助将不胜感激。

```
$('#attribute125').change(function() {
    var image = $(this).val();

    $.each(spConfig.attributes, function() {

        prods = $(this.options).filter( function() { return this.id == image; } )[0].products[0];

    alert(prods);

    });

}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T04:26:20.200

您可以使用[括号表示法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators#Bracket_notation)通过键获取对象成员。`prods`您有一个包含字符串 ( `"11786"`)的变量，以及`assocIMG`带有各种键的对象。然后只需使用

```
assocIMG[prods] 
```

获取`'media/catalog/product/8795139_633.jpg'`与该键关联的属性值。

请注意，您应该始终在对象文字中使用字符串作为键，IE 不支持数字：

```
var assocIMG = {
    "11786": 'media/catalog/product/8795139_633.jpg',
    "11787": 'media/catalog/product/8795139_633.jpg'
}; 
```

* * *

对脚本的另一项改进是不循环遍历`spConfig.attributes`每次，如果图像包含在多个属性中，则可能多次执行您的操作。取而代之的是，从中构建一个哈希对象，您可以在其中查找相应的产品 ID。

```
var productById = {};
$.each(spConfig.attributes, function() {
    $.each(this.options, function() {
         var id = this.id;
         productsById[i] = this.products[0];
    });
});

$('#attribute').change(function() {
    var id = this.value;
    var prod = productById[id];
    var image = assocIMG[prod];
    $("#product_img").attr("src", image);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T04:00:16.533

您不应该使用数字作为对象键（在它们的开头）。如果要获取与`11786`整数键关联的值，则需要使用以下语法：

```
assocIMG["11786"] or assocIMG[11786] 
```

**不是**

```
assocIMG.11786 
```

您需要做的第一件事是将密钥创建为字符串，因为您将拥有：

```
var assocIMG = {
    "11786": 'media/catalog/product/8795139_633.jpg',
    "11787": 'media/catalog/product/8795139_633.jpg',
} 
```

但是即使这样做，您也无法访问该字段`assocIMG.11786`，并且我提供的第一个有效的 sintax 仍然可以使用。正确的方法是：

```
var assocIMG = {
    id11786: 'media/catalog/product/8795139_633.jpg',
    id11787: 'media/catalog/product/8795139_633.jpg',
} 
```

或者

```
var assocIMG = {
    "id11786": 'media/catalog/product/8795139_633.jpg',
    "id11787": 'media/catalog/product/8795139_633.jpg',
} 
```

请注意，键现在以字母开头，而不是数字。现在，您可以使用or访问该`11786`字段，**而不是**`assocIMG.id11786``assocIMG["id11786"]` **`assocIMG[id11786]`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T04:22:49.943

要通过匹配键从对象中获取值，我最终得到以下结果

```
$.each(assocIMG, function(index, value) { 
        if(index == prods) {
             var image_path = value;
             $("#product_img").attr("src", image_path);
             //alert(image_path); 
        } 
```**

# windows - 在 Windows 8 Media Foundation 转换中的 IMFMediaBuffer 上绘制文本

> ID：11813804
> 
> 赞同：1
> 
> 时间：2012-08-05T03:49:15.130
> 
> 标签：windows, visual-c++, graphics, directx, ms-media-foundation

您将如何在 IMFMediaBuffer 对象上绘制文本，并将其写入另一个 IMFMediaBuffer 对象？

背景是我正在构建一个 MFT，最初我尝试使用 Direct2D 和 Direct3D11 来实现这一点，但无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:38:40.327

我能够通过 Windows GDI 调用来完成此操作。我创建的 MFT 具有 RGB32 输入/输出类型，它允许我复制到位图对象/从位图对象复制。我将想要用文本覆盖的帧部分复制到我创建的 Windows 位图中，绘制文本，然后复制回 IMFMediaBuffer。这是我的代码：

```
#define BREAK_ON_FAIL(val) { if ( FAILED(hr = (val)) ) { break; } }

HRESULT AddOverlay(IMFSample* pSample)
{
    HRESULT hr = S_OK;
    IMFMediaBuffer * pBuffer;
    HDC hDC, hMemDC;
    HBITMAP hBitmap, hOldBitmap;

    do
    {
        BYTE * pBufferData;
        UINT32 nWidth, nHeight;
        BITMAPV5HEADER bi;
        BYTE * pBitmapData;
        UINT32 nXOffset, nYOffset;
        RECT OverlayRect;
        OverlayRect.left = 0;
        OverlayRect.top = 0;
        OverlayRect.right = 400;
        OverlayRect.bottom = 32;
        DWORD nOverlayWidth = OverlayRect.right - OverlayRect.left;
        DWORD nOverlayHeight = OverlayRect.bottom - OverlayRect.top;
        LONG lFrameStride;

        // Get the frame dimensions and stride
        MFGetAttributeSize(m_pInputType, MF_MT_FRAME_SIZE, &nWidth, &nHeight);
        m_pInputType->GetUINT32(MF_MT_DEFAULT_STRIDE, (UINT32*)&lFrameStride))

        // Setup offset for the overlay area into the video frame
        nXOffset = (nWidth - nOverlayWidth) / 2;
        nYOffset = nOverlayHeight-1;

        // Set up the bitmap header
        ZeroMemory(&bi, sizeof(BITMAPV5HEADER));
        bi.bV5Size          = sizeof(BITMAPV5HEADER);
        bi.bV5Width         = nOverlayWidth;
        // If the stride is negative, the bitmap is bottom-up, which is designated by a negative height
        bi.bV5Height        = (lFrameStride > 0) ? nOverlayHeight : -(LONG)nOverlayHeight;
        bi.bV5Planes        = 1;
        bi.bV5BitCount      = 32;
        bi.bV5Compression   = BI_RGB;
        // The following mask specification specifies a supported 32 BPP
        // alpha format for Windows XP.
        bi.bV5RedMask       = 0x00FF0000;
        bi.bV5GreenMask     = 0x0000FF00;
        bi.bV5BlueMask      = 0x000000FF;
        bi.bV5AlphaMask     = 0xFF000000;

        // Create a DIB section with an alpha channel, along with
        // a memory device context
        hDC = GetDC(NULL);
        hBitmap = CreateDIBSection(hDC, (BITMAPINFO*)&bi, DIB_RGB_COLORS, (void**)&pBitmapData, NULL, 0);
        hMemDC = CreateCompatibleDC(hDC);
        ReleaseDC(NULL, hDC);

        // Lock the media buffer for our use
        BREAK_ON_FAIL( pSample->GetBufferByIndex(0, &pBuffer) );
        BREAK_ON_FAIL( pBuffer->Lock(&pBufferData, NULL, NULL) );

        // Copy the video frame to the bitmap (to support transparency)
        MFCopyImage(pBitmapData, nOverlayWidth*sizeof(RGBQUAD),
            pBufferData + nYOffset*abs(lFrameStride) + nXOffset*sizeof(RGBQUAD), lFrameStride,
            nOverlayWidth*sizeof(RGBQUAD), nOverlayHeight);

        // Draw on the bitmap
        hOldBitmap = (HBITMAP)SelectObject(hMemDC, hBitmap);
        //FillRect(hMemDC, &OverlayRect, WHITE_BRUSH);
        SetTextColor(hMemDC, RGB(255,0,0));
        SetBkMode(hMemDC, TRANSPARENT);
        DrawText(hMemDC, _T("Hello World!"), 12, &OverlayRect, DT_CENTER);
        SelectObject(hMemDC, hOldBitmap);

        // Copy the bitmap to the buffer
        MFCopyImage(pBufferData + nYOffset*abs(lFrameStride) + nXOffset*sizeof(RGBQUAD), lFrameStride,
            pBitmapData, nOverlayWidth*sizeof(RGBQUAD),
            nOverlayWidth*sizeof(RGBQUAD), nOverlayHeight);

        BREAK_ON_FAIL( pBuffer->Unlock() );

    } while(false);

    DeleteDC(hMemDC);
    DeleteObject(hBitmap);
    SafeRelease(&pBuffer);

    return hr;
} 
```

参考：

*   [http://support.microsoft.com/kb/318876](https://web.archive.org/web/20131102222601/http://support.microsoft.com/kb/318876)

# javascript - javascript：在另一个函数中获取函数的变量值

> ID：11813806
> 
> 赞同：18
> 
> 时间：2012-08-05T03:49:28.457
> 
> 标签：javascript, function, variables, call

好的，所以我在正文中有这段代码：

```
<input type="text" value="haha" id="full_name"/> 
```

而脚本中的这段代码

```
<script language="javascript" type="text/javascript">
    function first(){
        var nameContent=document.getElementById('full_name').value;
    }

    function second() {
        first();
        y=nameContent; 
        alert(y);
    }
    second();
</script> 
```

我想要一个显示元素 full_name 值的警报，但它似乎不起作用，有人知道为什么吗？:S

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-05T03:52:39.817

`nameContent`仅存在于`first()`函数中，正如您在函数中定义的那样`first()`。

为了使其范围更广，在函数之外定义它：

```
var nameContent;

function first(){
    nameContent=document.getElementById('full_name').value;
}

function second() {
    first();
    y=nameContent; alert(y);
}
second(); 
```

一个稍微好一点的方法是`return`取值，因为全局变量很快就会变得混乱：

```
function getFullName() {
  return document.getElementById('full_name').value;
}

function doStuff() {
  var name = getFullName();

  alert(name);
}

doStuff(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T03:53:05.550

您的 nameContent 范围仅在第一个函数内。你永远不会以这种方式获得它的价值。

```
var nameContent; // now it's global!
function first(){
    nameContent = document.getElementById('full_name').value;
}

function second() {
    first(); 
    y=nameContent; 
    alert(y);
}
second(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T03:53:58.433

您需要在第一个函数中使用 return 语句。

```
function first(){
    var nameContent = document.getElementById('full_name').value;
    return nameContent;
} 
```

然后在您的第二个功能中可以是：

```
function second(){
    alert(first());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T03:54:58.563

您的`nameContent`变量在函数范围内，并且在该函数之外不可见，因此如果您想使用函数的外部，请在标记内`nameContent`声明它并在没有关键字的情况下使用内部函数，如下所示`global``<script>``var`

```
<script language="javascript" type="text/javascript">
    var nameContent; // In the global scope
    function first(){
        nameContent=document.getElementById('full_name').value;
    }

    function second() {
        first();
        y=nameContent; 
        alert(y);
    }
    second();
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-22T19:43:42.380

在 ES5 中执行此操作的 OOP 方法是使用 this 关键字将该变量变为属性。

```
function first(){
    this.nameContent=document.getElementById('full_name').value;
}

function second() {
    y=new first();
    alert(y.nameContent);
} 
```

# php - 使某些变量隐藏在 PHP 文件中

> ID：11813811
> 
> 赞同：0
> 
> 时间：2012-08-05T03:50:28.600
> 
> 标签：php

我想知道是否可以从“包含”中隐藏变量。换句话说，我希望在 PHP 文件中声明的某些类/变量对包含它的任何其他 PHP 文件基本上不可见。这可能吗？有没有办法解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T03:57:15.847

方法1：将这些变量/类分离到另一个文件中，只调用它需要的部分。如果您打算在不同的上下文中使用脚本的不同部分，请将它们放在单独的文件中并根据需要调用它们。

方法2：包含文件后，取消设置变量并销毁类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T04:03:34.090

恕我直言，我认为是时候介绍[PHP5 OOP](http://php.net/manual/en/language.oop5.php)了。
之后看看[可见性](http://www.php.net/manual/en/language.oop5.visibility.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T04:43:00.717

Your include file could define a function that does all the work, and the variables can be local to that function. As long as you don't declare them global they'll be gone when the function returns.

This function name will be visible to the caller, but it's better than having everything visible.

# javascript - Z-index 大于 Fancybox？

> ID：11813813
> 
> 赞同：0
> 
> 时间：2012-08-05T03:50:36.080
> 
> 标签：javascript, jquery, html, css, fancybox

我有一个`div`Fancybox 内部，我想溢出到 fancybox 窗口的边缘。

页面结构如下所示：

```
<div class="fanybox">
    <div class="overflow">
        Test
    </div>
</div> 
```

我想`.overflow`流过窗户的边缘。尝试将`z-index`of更改为`.overflow`高于 8030（默认 Fancybox 值）的值不起作用，是的，`div`绝对定位。

有没有什么办法解决这一问题？我可以提供我正在尝试完成的工作的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T06:08:16.480

我自己没有使用过 fancybox，但是在他们的演示页面上玩弄 chrome 控制台我想我得到了你想要的效果。

- 删除溢出：隐藏；在#fancybox-content 上。

```
#fancybox-image (or whatever your container is){
.
.
.
    position:relative;
    right:50px;
    z-index:9000;
} 
```

这就是他们演示页面上的全部内容。只要您的内容的父级没有静态定位，并且溢出没有隐藏，那么绝对应该是可行的。如果我了解您的目标，我可能会相对（不是绝对）定位它。希望有帮助。

* * *

*编辑*

好吧，我从提供的链接中使用 fancybox2 下载并获得了一个简单的页面（因为显然我手头有太多时间:-)。使用它们的所有默认值，我只需要更改 jquery.fancybox.css

```
.fancybox-inner {

position:relative;
right:50px;
} 
```

并且图像漂浮在容器 div 之外。如果您尝试移动单独的 div 或添加的内容，则原则是相同的。但它确实有效......祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T07:15:08.140

如果`overflow`元素在内部`fancybox`，则根本不需要任何元素`z-index`。每个非`static`定位元素都会生成自己的栈，fancybox 中相对定位的内容很容易溢出其外部元素 [ [Demo](http://jsfiddle.net/P889P/) ]。

# regex - 带小数点的正则表达式

> ID：11813814
> 
> 赞同：4
> 
> 时间：2012-08-05T03:50:39.707
> 
> 标签：regex

我正在尝试使用正则表达式验证文本框...

```
 regex expression=(\d{0,4})?([\.]{1})?(\d{0,2}) 
```

我的小数点有问题。小数点是可选的。正则表达式应仅验证小数点后一位。

```
 example 1.00 ,23.22 , .65 is valid
    1..  or  23.. is invalid. 
```

有什么改进我的正则表达式的建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T04:04:10.923

试试这个：`^\d{1,4}(\.\d{1,2})?$`

它应该匹配：

```
1
200
9999
12.35
522.4 
```

但不是 ：

```
1000000
65.
.65
10.326
65..12 
```

**编辑 ：**

如果你想匹配 65\. 或 9999\. 使用这个代替（见评论）：

```
^\d{1,4}(\.(\d{1,2})?)?$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T04:32:30.227

### 改用应用程序逻辑

虽然您当然可以为此构造一个正则表达式，但检查数据类型或类似乎更简单，或者简单地扫描输入的小数然后计算它们。例如，使用 Ruby：

*   检查该值是浮点数还是整数。

    ```
    # Literal value is a float, so it belongs to the Float class.
    value = 1.00
    value.class == Fixnum or value.class == Float
    => true

    # Literal value is an integer, so it belongs to the Fixnum class.
    value = 23
    value.class == Fixnum or value.class == Float
    => true 
    ```

*   计算小数并确保不超过一个。

    ```
    # Literal value is a float. When cast as a string and scanned,
    # only one decimal should be found.
    value = 23.22
    value.to_s.scan(/\./).count <= 1
    => true

    # The only way this could be an invalid integer or float is if it's a string.
    # If you're accepting strings in the first place, just cast all input as a
    # string and count the decimals it contains.
    value = '1.2.3'
    value.to_s.scan(/\./).count <= 1
    => false 
    ```

# c# - xamlparseexception 未处理我能做什么

> ID：11813815
> 
> 赞同：0
> 
> 时间：2012-08-05T03:50:42.553
> 
> 标签：c#, xaml, exception

当我运行我的应用程序时，我有这个异常

```
Cannot create instance of 'MainWindow' defined in assembly 'MediaTransferTester, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'. Exception has been thrown by the target of an invocation.  Error in markup file 'MainWindow.xaml' Line 1 Position 9. 
```

这是我的 xaml 代码

```
<Window x:Class="MediaTransferTester.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Width="878"
        Height="588">
    <Grid Width="853" Height="525">
        <GroupBox Name="groupBox1"
                  Width="504"
                  Margin="12,12,0,316"
                  HorizontalAlignment="Left"
                  Header="EndPoint Config">

            <Grid Width="468" Height="139">
                <Label Name="label1"
                       Width="108"
                       Height="28"
                       Margin="6,12,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Content="Loal IPs" />
                <Label Name="label2"
                       Width="108"
                       Height="28"
                       Margin="6,46,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Content="Remote IP" />
                <Label Name="label3"
                       Width="58"
                       Margin="183,12,0,116"
                       HorizontalAlignment="Left"
                       Content="RTP Port" />
                <Label Name="label4"
                       Width="58"
                       Height="28"
                       Margin="183,47,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Content="RTP Port" />
                <Label Name="label5"
                       Height="28"
                       Margin="6,84,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Content="TransportType" />
                <RadioButton Name="rbUDP"
                             Height="16"
                             Margin="112,89,0,0"
                             HorizontalAlignment="Left"
                             VerticalAlignment="Top"
                             Content="UDP"
                             GroupName="TransportType"
                             IsChecked="True" />
                <RadioButton Name="rbMSTP"
                             Height="16"
                             Margin="165,89,0,0"
                             HorizontalAlignment="Left"
                             VerticalAlignment="Top"
                             Content="MSTP"
                             GroupName="TransportType" />
                <RadioButton Name="rbTCPConnect"
                             Height="16"
                             Margin="226,89,0,0"
                             HorizontalAlignment="Left"
                             VerticalAlignment="Top"
                             Content="TCP Connect"
                             GroupName="TransportType" />
                <RadioButton Name="rbTcpListen"
                             Width="76"
                             Height="16"
                             Margin="317,89,0,0"
                             HorizontalAlignment="Left"
                             VerticalAlignment="Top"
                             Content="TCP Listen"
                             GroupName="TransportType" />
                <ListBox Name="listBoxEndPointAddress"
                         Width="102"
                         Height="37"
                         Margin="75,11,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         ScrollViewer.HorizontalScrollBarVisibility="Auto"
                         ScrollViewer.VerticalScrollBarVisibility="Visible" />
                <TextBox Name="TBRemoteEndpointIP"
                         Width="102"
                         Height="23"
                         Margin="75,52,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         LostFocus="TBRemoteEndpointIP_LostFocus" />
                <TextBox Name="LocalrtpPort"
                         Width="38"
                         Height="23"
                         Margin="247,12,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         LostFocus="LocalrtpPort_LostFocus"
                         MaxLength="4" />
                <TextBox Name="RemotertpPort"
                         Width="38"
                         Height="23"
                         Margin="247,46,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         LostFocus="RemotertpPort_LostFocus"
                         MaxLength="4" />
                <TextBox Name="localTcpPort"
                         Width="37"
                         Height="23"
                         Margin="0,12,75,0"
                         HorizontalAlignment="Right"
                         VerticalAlignment="Top"
                         LostFocus="localTcpPort_LostFocus"
                         MaxLength="4" />
                <TextBox Name="RemoteTcpPort"
                         Width="37"
                         Height="23"
                         Margin="356,46,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         LostFocus="RemoteTcpPort_LostFocus"
                         MaxLength="4" />
                <Label Name="label9"
                       Width="57"
                       Margin="291,11,0,117"
                       HorizontalAlignment="Left"
                       Content="TCP Port" />
                <Label Name="label11"
                       Width="57"
                       Height="28"
                       Margin="291,49,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Content="TCP Port" />
            </Grid>

        </GroupBox>
        <GroupBox Name="groupBox2"
                  Width="504"
                  Height="269"
                  Margin="12,215,0,0"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  Header="AudioConfig">
            <Grid Width="486"
                  Height="245"
                  HorizontalAlignment="Stretch"
                  VerticalAlignment="Stretch">
                <Label Name="label6"
                       Width="90"
                       Height="28"
                       Margin="15,30,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Content="Source Devices" />
                <Label Name="label7"
                       Width="108"
                       Height="28"
                       Margin="15,89,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Content="Sink Devices" />
                <Label Name="label10"
                       Height="28"
                       Margin="15,150,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Content="Send Audio Codecs" />
                <ListBox Name="SourceDeviceList"
                         Width="229"
                         Height="52"
                         Margin="150,6,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         ScrollViewer.HorizontalScrollBarVisibility="Auto"
                         ScrollViewer.VerticalScrollBarVisibility="Visible" />
                <ListBox Name="SinkDeviceList"
                         Width="229"
                         Height="53"
                         Margin="150,64,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         ScrollViewer.HorizontalScrollBarVisibility="Auto"
                         ScrollViewer.VerticalScrollBarVisibility="Visible" />
                <Label Name="label8"
                       Width="122"
                       Height="28"
                       Margin="15,211,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Content="Receive Audio Codecs" />
                <ListBox Name="SendCodecsNamelistBox"
                         Width="229"
                         Height="55"
                         Margin="150,123,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         ScrollViewer.HorizontalScrollBarVisibility="Auto"
                         ScrollViewer.VerticalScrollBarVisibility="Visible" />
                <ListBox Name="ReceiveCodecsNamelistBox"
                         Width="229"
                         Height="56"
                         Margin="150,183,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         ScrollViewer.HorizontalScrollBarVisibility="Auto"
                         ScrollViewer.VerticalScrollBarVisibility="Visible" />
            </Grid>
        </GroupBox>

        <Button Name="btnStartSend"
                Width="75"
                Height="23"
                Margin="12,490,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Click="btnStartSend_Click"
                Content="Start Send" />
        <Button Name="btnSaveConfig"
                Width="109"
                Height="23"
                Margin="195,490,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Click="btnSaveConfig_Click"
                Content="Save Configration" />
        <TextBox Name="StatTextBox"
                 Width="319"
                 Height="461"
                 Margin="522,23,0,0"
                 HorizontalAlignment="Left"
                 VerticalAlignment="Top"
                 Background="Black"
                 FontFamily="Consolas"
                 FontSize="9"
                 Foreground="White"
                 IsEnabled="True"
                 IsReadOnly="True"
                 ScrollViewer.HorizontalScrollBarVisibility="Auto"
                 ScrollViewer.VerticalScrollBarVisibility="Auto" />
        <Button Name="btnStartReceve"
                Width="75"
                Height="23"
                Margin="93,490,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Click="btnStartReceve_Click"
                Content="Start Receve" />
    </Grid>
</Window> 
```

***这是异常详细信息***

System.Windows.Markup.XamlParseException 未处理消息=无法创建在程序集“MediaTransferTester，版本=1.0.0.0，文化=中性，PublicKeyToken=null”中定义的“主窗口”实例。调用的目标已引发异常。标记文件“MainWindow.xaml”第 1 行位置 9 中的错误。Source=PresentationFramework LineNumber=1 LinePosition=9 StackTrace：在 System.Windows.Markup.XamlParseException.ThrowException（字符串消息，异常 innerException，Int32 lineNumber，Int32 linePosition，Uri baseUri , XamlObjectIds currentXamlObjectIds, XamlObjectIds contextXamlObjectIds, Type objectType) 在 System.Windows.Markup.XamlParseException.ThrowException(ParserContext parserContext, Int32 lineNumber, Int32 linePosition, String message, Exception innerException) 在系统。Source=mscorlib StackTrace：在 System.RuntimeType.CreateInstanceSlow（Boolean publicOnly，Boolean fillCache）在 System.RuntimeType.CreateInstanceImpl（在 System.RuntimeTypeHandle.CreateInstance（RuntimeType 类型，Boolean publicOnly，Boolean noCheck，Boolean& canBeCached，RuntimeMethodHandle& ctor，Boolean& bNeedSecurityCheck）布尔publicOnly，布尔skipVisibilityChecks，布尔fillCache）在System.Activator.CreateInstance（类型类型，布尔非公共）在System.Windows.Markup.BamlRecordReader.CreateInstanceFromType（类型类型，Int16 typeId，布尔throwOnFail）内部异常：System.NullReferenceException消息=对象引用未设置为对象的实例。来源 = MediaTransferTester StackTrace：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T05:05:24.207

查看您内部异常的底部：

```
InnerException: System.NullReferenceException Message=Object reference not set to an instance of an object. Source=MediaTransferTester StackTrace: at MediaTransferTester.MainWindow.RegisterHandlers() in C:\Users\t.said\documents\visual studio 2010\Projects\MediaTransferTester\MediaTransferTester\MainWindow.xaml.cs:line 48 at MediaTransferTester.MainWindow..ctor() in C:\Users\t.said\documents\visual studio 2010\Projects\MediaTransferTester\MediaTransferTester\MainWindow.xaml.cs:line 39 InnerException: 
```

就在那里，看起来您的问题是代码隐藏中的空引用。MainWindow.xaml.cs 第 48 行。如果您需要更多帮助，请包含该部分的代码隐藏。

# ios - UIStepper。查明是递增还是递减

> ID：11813816
> 
> 赞同：6
> 
> 时间：2012-08-05T03:50:58.740
> 
> 标签：ios, uistepper

确定在 UIStepper 中是否按下了加号或减号按钮，我使用此方法：

```
- (void)stepperOneChanged:(UIStepper*)stepperOne 
```

我将 stepperOne.value 与保存在我的 TableView 类中的全局值进行比较。
我不认为这是正确的方法。

因此，为了澄清，我将显示我正在使用的“坏”代码：

```
- (void)stepperOneChanged:(UIStepper*)stepperOne
{
      BOOL PlusButtonPressed=NO;  
      if(stepperOne.value>globalValue)  
      {   
          PlusButtonPressed =YES;  
      }  
      globalValue=stepperOne.value;

    ////do what you need to do with the PlusButtonPressed boolean
} 
```

那么这样做的正确方法是什么？（无需保存全局变量）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-07T21:37:02.947

* * *

## 这是识别 UIStepper 是否单击“+”或单击“-”的简单且更短的方法

* * *

```
//First You have to declare oldValue as an int (or long/float/NSInteger etc. etc.) in Header File 
//So that you can access globally to that particular implementation file

- (void)viewDidLoad
{
     [super viewDidLoad];
     oldValue=stepperObj.value;
}

- (IBAction)stepperStep:(id)sender 
{
        if (stepperObj.value>oldValue) {
             oldValue=oldValue+1;
             //Your Code You Wanted To Perform On Increment
        }
       else {
             oldValue=oldValue-1;
             //Your Code You Wanted To Perform On Decrement
        }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T16:55:05.547

所以我为此考虑了一个子类。事实证明它并没有那么糟糕（包装的值除外）。

使用子类

```
- (IBAction)stepperOneChanged:(UIStepper*)stepperOne
{
    if (stepperOne.plusMinusState == JLTStepperPlus) {
       // Plus button pressed
    }
    else if (stepperOne.plusMinusState == JLTStepperMinus) {
       // Minus button pressed
    } else {
       // Shouldn't happen unless value is set programmatically.
    }
} 
```

JLTStepper.h

```
#import <UIKit/UIKit.h>

typedef enum JLTStepperPlusMinusState_ {
    JLTStepperMinus = -1,
    JLTStepperPlus  = 1,
    JLTStepperUnset = 0
} JLTStepperPlusMinusState;

@interface JLTStepper : UIStepper
@property (nonatomic) JLTStepperPlusMinusState plusMinusState;
@end 
```

JLTStepper.m

```
#import "JLTStepper.h"

@implementation JLTStepper
- (void)setValue:(double)value
{
    BOOL isPlus  = self.value < value;
    BOOL isMinus = self.value > value;

    if (self.wraps) { // Handing wrapped values is tricky
        if (self.value > self.maximumValue - self.stepValue) {
            isPlus  = value < self.minimumValue + self.stepValue;
            isMinus = isMinus && !isPlus;
        } else if (self.value < self.minimumValue + self.stepValue) {
            isMinus = value > self.maximumValue - self.stepValue;
            isPlus  = isPlus && !isMinus;
        }
    }

    if (isPlus)
        self.plusMinusState = JLTStepperPlus;
    else if (isMinus)
        self.plusMinusState = JLTStepperMinus;

    [super setValue:value];
}
@end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-10T08:22:37.337

首先将步进器的最小值和最大值设置为 0 和 1，并确保未选中 Value Wraps。

[![在此处输入图像描述](../Images/218272ea1593fb611a724baca7d6aaf9.png)](https://i.stack.imgur.com/dkPdu.png)

然后您可以使用以下代码检查单击了哪个箭头

```
-(IBAction)stepperAction:(NSStepper *)sender {
    if ([sender intValue] == 0) {
        NSLog(@"up");
    } else {
        sender.intValue = 0;
        NSLog(@"down");
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-09-03T06:26:36.213

**斯威夫特 3.0**：

在您的步进器操作中，请确保您将 stepper.value 重置为 0，这使得步进器值在负压时为 -1，在正压时为 1。

```
@IBAction func Stepper(_ sender: UIStepper) {
    if sender.value == 1.0{
        //positive side was pressed
    }else if sender.value == -1.0{
        //negative side was pressed
    }
    sender.value = 0  //resetting the stepper value so negative is -1 and positive is 1
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-19T09:16:15.540

将最小值设置为 0，最大值设置为 2，并将值设置为 1。然后：

```
- (IBAction)stepperAction:(UIStepper *)sender // value changed
{
    if ( sender.value == 0) {
        NSLog(@"down");
    } else { // else up
        NSLog(@"up");
    }
    sender.value = 1; // reset
} 
```

如果您有多个步进器，请以不同方式设置每个标签，然后仍然使用此方法并测试 sender.tag。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-03-15T06:09:18.530

```
var sampleStepperValueForIncrement:Int = Int()

@IBAction func sampleStepperValueChanged(_ sender: UIStepper) {        

        if(Int(sender.value) > sampleStepperValueForIncrement){
            print("increasing")
            sampleStepperValueForIncrement += 1

        }
        else{
            print("decresing")
            sampleStepperValueForIncrement =  sampleStepperValueForIncrement - 1
        }
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-05T11:59:15.950

一种方法是使用 UISteppers 标签属性。所以在 viewDidLoad 将标签设置为值。从那时起，您可以在每个操作方法中首先进行比较，然后最后是方法更新值。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-03-29T08:56:02.927

**斯威夫特 2.0：**

声明：

```
@IBOutlet weak var mapViewZoomStepper: UIStepper!
 var mapViewZoomStepperValue: Double = -1.0 
```

当值改变时：

```
 @IBAction func mapViewZoomStepperValueChanged(sender: AnyObject) {        

     if (mapViewZoomStepper.value  > mapViewZoomStepperValue)
      {
       print("increment")
       mapViewZoomStepperValue = mapViewZoomStepperValue + 1.0

      }
      else
      {
       print("decrement")
       mapViewZoomStepperValue = mapViewZoomStepper.value - 1.0 
      }

  print("compare //  stored Value :   \(mapViewZoomStepperValue)  && real time value : \(mapViewZoomStepper.value)")

     } 
```

另一种选择是将最大值限制为 1。因此 uistepper 将有两个状态 - 0 和 1 。

使用 switch 语句来区分：

```
switch (mapViewZoomStepper.value) {
  case 0:
    print("A")
    break;
case 1:
 print("B")
 break;

  default:
    break;
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-08-27T22:24:25.627

斯威夫特 5.0

```
var oldValue: Int!

override func viewDidLoad(){
    super.viewDidLoad()
    oldValue = Int(stepper.minimumValue)
}

@IBAction(){
if Int(sender.value) > oldValue{
  // Positive
}else{
   // Negative
}
oldValue = Int(sender.value)

 } 
```

# c++ - 跨平台 Qt 应用程序中的全局热键

> ID：11813823
> 
> 赞同：16
> 
> 时间：2012-08-05T03:51:40.127
> 
> 标签：c++, qt, cross-platform, keyboard-shortcuts

我正在使用 Qt 在 C++ 中创建一个跨平台实用程序，为此我需要有快捷键（或热键，不太确定区别）。本质上，应用程序将运行并且仅在系统托盘中作为图标可见，并且在您按下某些快捷键（例如，Ctrl-Shift-f4 或其他东西）时执行某些操作。

我的印象是，除非应用程序处于焦点位置，否则 Qt 不提供处理快捷键的方法，在我的情况下不会。所以，这已经结束了（如果这*是*一个可行的选择，请提示我）。

我找到了很多示例/文档来解释如何使用 Xlib/Xcb for linux、win32 api for windows 和 carbon for osx 来做到这一点，但我很难找到一种适用于Qt 应用程序的范围。

什么是完成我需要的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-02-26T12:36:50.877

我正在挖掘这个旧的未回答的问题，因为使用 QML，我遇到了同样的问题。[Shortcut](https://doc.qt.io/qt-5/qml-qtquick-shortcut.html) QML 类型允许您指定[上下文](https://doc.qt.io/qt-5/qml-qtquick-shortcut.html#context-prop)属性，但您仍然需要一个聚焦的应用程序或窗口。

但是，我找到了一个解决此问题的库：[QHotkey](https://github.com/Skycoder42/QHotkey)。在 Github 上将自己描述为：

> 桌面 Qt 应用程序的全局快捷方式/热键。
> 
> QHotkey 是一个可用于创建热键/全局快捷方式的类，也就是在任何地方都可以使用的快捷方式，与应用程序状态无关。这意味着您的应用程序可以是活动的、非活动的、最小化的或根本不可见的，但仍会收到快捷方式。

QHockey 可通过[qpm](http://www.qpm.io/)以包形式提供，并可直接从 C++ 使用。

# objective-c - 图像停止在其他图像上

> ID：11813835
> 
> 赞同：0
> 
> 时间：2012-08-05T03:53:25.990
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我有一个小迷你游戏的图像/角色。我可以让他左右跳动。但我希望他能够降落在其他图像上，例如超级马里奥降落在砖块上或涂鸦跳跃（没有跳跃）。我该如何做到这一点，一旦我的图像跳跃和下降，如果它落在另一个图像上它就会停止。谢谢！

我的跳跃代码：

```
[UIView animateWithDuration:.5 delay:0.0
                options:UIViewAnimationOptionCurveEaseOut
             animations:^{
                 CGRect f = imageView.frame;
                 f.origin.y -= 40;
                 imView.frame = f;
             }
             completion:^(BOOL finished){

[UIView animateWithDuration:.7 delay:0.0
                options:UIViewAnimationOptionCurveEaseOut
             animations:^{
                 CGRect f = imageView.frame;
                 f.origin.y += 40;
                 imView.frame = f;
             }
             completion:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:08:27.513

我不相信这可以用简单的`UIView`动画来完成，这更像是一`Cocos`件事。使用这种类型的动画，您需要记住一些事情。尽管在屏幕上您会看到从一个点到另一个点的动画，但在整个过程中，该图像实际上只有两帧。它是动画开始之前的帧，以及结束时的帧。

此外，如果您在动画开始后尝试读取图像的帧，它将始终记录其结束位置。一张图片只有两帧，之前和之后。一旦动画开始，它的帧被设置为它的结束帧，它基本上只是在努力到达那里。（动画）

话虽如此，这种形式的动画没有碰撞检测的空间。让我们看看下面的场景。

> _ ***A* _** ============= **_ *B* _** ========== **_ *C* _**
> 
> ^start^-------^path^----^collision -------- ^end

您的动画从帧“A”开始，并设置为在点“C”结束。您想检测“B”处的碰撞，但不幸的是您不能，因为图像永远不知道它的框架曾经与“B”相交，因为它只知道点“A”和“C”

希望这可以帮助！

# hibernate - 来自计算字段/表达式的 JPQL ORDER BY

> ID：11813842
> 
> 赞同：2
> 
> 时间：2012-08-05T03:55:26.847
> 
> 标签：hibernate, jpa, sql-order-by, expression, jpql

[这是JPA/JPQL](https://stackoverflow.com/questions/11807738/jpa-jpql-as-identifier-disallowed-in-select-clause)的后续问题： SELECT 子句中不允许使用 AS 标识符。

这是 JPQL 查询：

```
 SELECT NEW com.domain.project.view.StandingsStatLine(
      ro.id
    , cl.name
    , te.ordinalNbr + 1
    , pa.wasWithdrawn
    , SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore IS NOT NULL THEN 1 ELSE 0 END)       // g = games
    , SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore > sca.finalScore THEN 1 ELSE 0 END)  // w = wins
    , SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore < sca.finalScore THEN 1 ELSE 0 END)  // l = losses
    , ...
    , <very complex multi-line expression> // nrp = normalized ranking points
    )
  FROM Club cl
    JOIN cl.teams te
    JOIN te.rosters ro
    JOIN ro.season se
    JOIN ro.participations pa
    JOIN pa.group gr
    JOIN gr.round rd
    JOIN rd.subCompetition sc
    JOIN sc.competition cn
    JOIN gr.games ga
    JOIN ga.scores scf
    JOIN ga.scores sca
    JOIN scf.roster rof
    JOIN sca.roster roa
    JOIN rof.participations paf
    JOIN roa.participations paa
  WHERE ...
  GROUP BY ...
  ORDER BY pa.wasWithdrawn, nrp DESC, w DESC, g DESC, cl.shorthand 
```

**这与没有**`... AS ...`表达式的上一个问题中的陈述相同。

对于有兴趣的人：

1.  nrp 是“标准化排名点”。这是根据所玩游戏可获得的最大分数的简单百分比。背景是，一支打了 10 场比赛的球队的总积分数（每输一场得 1 分）比一支只打了 6 场比赛的球队高得多。这是实际的排名指标。w 和 g 在代码中进行了解释。
2.  scf 和 sca 是支持和反对的得分（在 中过滤`WHERE`）

**问：**

您如何`ORDER BY`在 JPQL 中计算这些属性？我经常遇到这种情况，但是由于`... AS ...`SELECT 中的 JPQL 似乎无效（Hibernate 可以处理它们），您通常如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:07:56.997

找到了。另请参阅[http://en.wikibooks.org/wiki/Java_Persistence/JPQL_BNF#New_in_JPA_2.0](http://en.wikibooks.org/wiki/Java_Persistence/JPQL_BNF#New_in_JPA_2.0)。注意，**倒数第二个**例子。

```
select_item ::= select_expression [[AS] result_variable] 
```

允许选择中的 A​​S 选项。

```
SELECT AVG(e.salary) AS s,
    e.address.city
FROM Employee e
GROUP BY e.address.city
ORDER BY s 
```

我不知道构造函数表达式是否也支持这一点，但我认为没有理由不这样做。

# cmake - 使用 Cmake 和 Visual Studio Express 2010 在命令行构建 hello world

> ID：11813844
> 
> 赞同：3
> 
> 时间：2012-08-05T03:56:20.803
> 
> 标签：cmake

我是 CMake 的新手。我正在尝试使用 Visual Studio 2010 Express 构建一个非常简单的程序（hello world）。在 Visual Studio 2010 命令提示符中，我运行了以下命令：

```
cmake -g "NMake Makefiles" . 
```

这似乎奏效了。

```
C:\Users\david\dev\cmake\hello_world>cmake -g "NMake Makefiles" .
-- Building for: Visual Studio 10
-- Check for working C compiler using: Visual Studio 10
-- Check for working C compiler using: Visual Studio 10 -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler using: Visual Studio 10
-- Check for working CXX compiler using: Visual Studio 10 -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Configuring done
-- Generating done
-- Build files have been written to: C:/Users/david/dev/cmake/hello_world 
```

接下来，我尝试运行nmake，它产生了以下错误：

C:\Users\david\dev\cmake\hello_world>nmake

```
Microsoft (R) Program Maintenance Utility Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

NMAKE : fatal error U1064: MAKEFILE not found and no target specified
Stop. 
```

我在项目目录中看不到 Makefile，所以我猜这就是它不工作的原因，或者 CMake 使用了 Makefile 的非标准名称？我不确定。我在下面粘贴了项目目录的内容。

```
C:\Users\david\dev\cmake\hello_world>dir
 Volume in drive C has no label.
 Volume Serial Number is 4000-10E9

 Directory of C:\Users\david\dev\cmake\hello_world

08/05/2012  01:38 PM    <DIR>          .
08/05/2012  01:38 PM    <DIR>          ..
08/05/2012  01:38 PM            28,584 ALL_BUILD.vcxproj
08/05/2012  01:38 PM               735 ALL_BUILD.vcxproj.filters
08/05/2012  01:38 PM            12,871 CMakeCache.txt
08/05/2012  01:38 PM    <DIR>          CMakeFiles
08/05/2012  01:34 PM               151 CMakeLists.txt
08/05/2012  01:38 PM             1,514 cmake_install.cmake
08/05/2012  01:38 PM             3,150 hello_world.sln
08/05/2012  01:38 PM            36,618 hello_world.vcxproj
08/05/2012  01:38 PM               671 hello_world.vcxproj.filters
08/05/2012  01:37 PM             2,213 hello_world.vpj
08/05/2012  01:37 PM               206 hello_world.vpw
08/05/2012  01:37 PM               134 hello_world.vpwhist
08/05/2012  01:37 PM           106,496 hello_world.vtg
08/05/2012  07:14 AM               118 main.cpp
08/05/2012  01:38 PM            23,914 ZERO_CHECK.vcxproj
08/05/2012  01:38 PM               807 ZERO_CHECK.vcxproj.filters
              15 File(s)        218,182 bytes
               3 Dir(s)  134,161,678,336 bytes free 
```

我的程序的来源是：

```
#include <iostream>

int main(int argc, char* argv[])
{
    std::cout << *argv << std::endl;

    return 0;
} 
```

我的 CMakeLists.txt 是：

```
# CMakeLists.txt
# $ cmake -g "NMake Makefiles" .

cmake_minimum_required(VERSION 2.8)
project(hello_world)
add_executable(hello_world main.cpp) 
```

谢谢，

# gcc - 无法在 ubuntu-12.04 上安装 Aircrack-ng

> ID：11813854
> 
> 赞同：0
> 
> 时间：2012-08-05T03:58:45.247
> 
> 标签：gcc, ubuntu-12.04, aircrack-ng

每当我尝试在 linux 中做某事作为一个新的开始时，总是会发生这种类型的事情。现在我尝试在我新安装的 ubuntu-12.04 上安装 aircrack-ng。

1.  我下载了最新稳定版的aircrack-ng-1.1
2.  我安装了网站上提到的先决条件 - build-essentials、libsqllite3-dev 和 libopenssl-dev，一切都很顺利。
3.  现在我尝试编译aircrack-ng-1.1。我使用了“make”命令。我在文件夹 osdep 和 linux.c 文件中遇到了一些错误。
4.  然后我去检查在aircrack-ng中针对这个问题修复的错误。我发现为此提交了一个错误报告。
5.  现在尝试如前所述修复它。仍然它不起作用。
6.  我再次访问网站，我看到它写着这个解决方案可能不起作用。我需要将 gcc 版本从 4.6 降级到 4.5（它带有 build-essential 包）
7.  现在我从 Ubuntu-software-center 中删除了 gcc-4.6.3。我通过“sudo apt-get install gcc-4.5”从命令行再次安装了 gcc-4.5。它安装成功。
8.  现在，当我想检查 gcc 是否正确安装时，我使用了命令“gcc --version”。但它说我没有这样的命令并告诉我安装。但是当我尝试再次安装时，它告诉我它已经安装并且是最新的。

很奇怪很奇怪的问题。任何人都知道如何使 Aircrack 编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:22:31.260

Aircrack-ng 位于 Ubuntu repo ( `apt-cache search aircrack`) 上，因此您可以像安装任何软件包 ( `apt-get install aircrack-ng`) 一样轻松安装它。

如果您想从源安装它，请编辑您的帖子并提供有关遇到的错误的更多详细信息。

# android - 无限循环中的android光标

> ID：11813855
> 
> 赞同：1
> 
> 时间：2012-08-05T03:59:12.610
> 
> 标签：android, android-asynctask, android-cursor, android-cursorloader

我有来自游标加载器的游标。问题是，如果我尝试移动该光标，它不会向前移动并陷入无限循环。

```
 public void onLoadFinished(Loader<Cursor> loader, final Cursor cursor) {
    Log.d(TAG, "CALLED onLoadFinished");
    ...
    else if(loader.getId() == LOADER_1)
    {
        while(cursor.moveToFirst())
        {
              Log.d(TAG, "LOOPING");
              cursor.moveToNext();
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T06:22:35.590

您当前的`while`循环将不起作用。现在，您将光标移动到`while`条件中的第一个位置，然后在`while`块内将光标推到下一个位置。当`while`块完成时，将再次测试条件，因此`cursor.moveToFirst()`将再次调用。这将一次又一次地继续。基本上，您将在无限循环中从光标的第一个位置移动到第二个位置。

循环应该是这样的：

```
while(cursor.moveToNext()) {
     Log.d(TAG, "LOOPING");
     // do other stuff 
     // each time you'll have a new row from the cursor
} 
```

# java - AIX 中的 java thead 计数限制？

> ID：11813859
> 
> 赞同：0
> 
> 时间：2012-08-05T04:00:28.837
> 
> 标签：java, aix

通过执行一个简单的循环创建线程 java 程序，当我使用 -Xmx2048M 时，AIX 的线程数限制约为 900，当我将该参数减小到 -Xmx1024M 时，线程数限制增加到 2000 左右。我的 ulimit 属性是所有无限制： ulimit -a 时间（秒）无限制文件（块）无限制数据（千字节）无限制堆栈（千字节）无限制内存（千字节）无限制 coredump（块）无限制无文件（描述符）无限制线程（每个进程）无限制进程（每用户）无限制

任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:38:02.950

我的猜测是您有一个 32 位 JVM，它的虚拟内存限制约为 2.8 GB（在操作系统保留和 JVM 库之后）。如果每个线程使用大约 900 KB，则使用 2 GB 堆会为大约 900 个线程留下虚拟内存。如果将堆大小减少到 1 GB，这将为大约 2000 个线程留下足够的虚拟内存。

尝试使用 64 位 JVM，因为我也猜想你有一个 64 位操作系统（32 位操作系统往往有一个下限），或者减少最大堆栈大小。

64 位 JVM 在大多数操作系统上限制为大约 1 TB，我发现您可以在遇到一些限制之前创建大约 32K 线程（我还没有弄清楚是什么）

这是我写的一篇关于 Linux 主题的文章[http://vanillajava.blogspot.co.uk/2011/07/java-what-is-limit-to-number-of-threads.html](http://vanillajava.blogspot.co.uk/2011/07/java-what-is-limit-to-number-of-threads.html)

# javascript - 谁能帮我缩短这个荒谬的长选择器？

> ID：11813869
> 
> 赞同：0
> 
> 时间：2012-08-05T04:02:44.123
> 
> 标签：javascript, jquery, jquery-selectors

编辑：跳到结尾以更好地解释我所追求的，谢谢

我大约有以下 html（这只是一个摘录），其中有一个嵌套的章节组织：

```
<span class="chapter Art" id="00034">
  <li><span class="chapterheading">Art<span>some stuff</span></li>
  <ul>
    <span class="chapter" id="00035">
      <li><span class="chapterheading selectednode">Sound</span><span>more stuff</span></li>
      <div class="idea">even more stuff</div>
    </span>
  </ul>
</span> 
```

现在我希望使用 javascript 仅显示紧接在下面的章节标题，以及紧接在类“idea”的 div 下方，这样要查看任何“idea”，您必须单击它的直接父章节。

花了大约三个小时后（因为我对 jquery 有点陌生，我花了一段时间才意识到子选择器的真正工作原理），我想出了一个非常复杂的查询，它在显示相关方面做了我想要的节点（假设它们在运行此代码之前是隐藏的）：

```
t.find("li > *, ul > .chapter, ul > .chapter > li, ul > .chapter > li *, > .idea, > .idea *").show(); 
```

其中“t”是最近单击的具有“selectednode”类的节点（编辑：是该节点的父节点的父节点）。

那么有没有更短的方式来表达我在这里需要的东西？

编辑：以下是一个更大的代码片段，根据要求有很多行李。寻找评论“隐藏相同深度的兄弟章节的孩子”。

我已经对其进行了一些修剪，但它并没有达到我想要的效果：我不能让它只显示*下面*的直接章节和想法，它显示了一切。

```
function toggleNode(node, value) {
    //_("setting " + nv(node) + " to " + value + "\n");
    $(node).toggleClass("selectednode", value);
    if($(node).hasClass("selectednode") == true)
    selectednode = node;
    if($(selectednode).hasClass("selectednode") == false) // is this check really necessary?
    selectednode = 0;
}

function zoomTo(node, select) {
    var zoom, oldzoom, depth, t;
    //_("zoomTo(" + (node ? $(node).text() : "0") + ", " + select + ")");
    oldzoom = zoomednode;
    if(node != zoomednode) {
    savedepth = t = depth = $(node).parents("ul").length;
    if(!zoomednode)
        zoomednode = topChapter;
    if(!node)
        node = topChapter;
    /* capture values */
    var sz;
    var capp = cBaseSz.slice((sz = parseFloat(cBaseSz)).length);
    /* end capture */
    zoom = zoomnum = sz;
    while(--t > 0) {
            zoomnum = (zoom *= 1.15);
    }
    //_("zoom: " + zoomnum +"\ncapp: " +capp);
    zoom  += capp;
    //_("zoom: " + zoomnum);
    depth -= $(zoomednode).parents("ul").length;
    if(depth < 0)
        depth *= -1;
    switch(select) {
    case 0:
    case false:
    default:
        break;
    case true:
    case 1:
        toggleNode(zoomednode, false);
        toggleNode(zoomednode = node, true);
        break;
    case 2:
        toggleNode(zoomednode, false);
            zoomednode = 0;
    }

    /* Handle showing/hiding */

    if(1) {
        var hide;
        t = ($(selectednode) || $(".chapterheading:first"));
        _("t.text():" + t.text());
        t = t.parent().parent();
        _("isclass: " + t.attr("class"));
        var prs = $(t).parents(".chapter");
        prs = $(prs)[0] || t;
        hide = $(prs).siblings(".chapter");
        _("topparent: " + $(prs).text().slice(0,80));
        $(hide).each( function() { {
        _(($(this).html()||$(this).text()).slice(0, 80));
        }});
        $("li *, > ul, > idea", t).show();
        //t.siblings().show();
        //t.siblings().find().hide();
        //hide.children(".chapterheading").find().show();
        //showall(t.find("li *, ul > .chapter > li *"));

        // Hide deeper children of this chapter (t) 
//      $(t).find("ul *:not(ul > .chapter > li, ul > li *)").hide();
//      t.find("li > *, ul > .chapter, ul > .chapter > li, ul > .chapter > li *, > .idea, > .idea *").show();
        // Show immediate children of this chapter (t)
        //$(t).find("> li *, ul > .chapter").show();
       // t.find(".chapterheading, .ideacount").show();
        //$(hide).children().find(":not(.chapterheading, .ideacount)").hide();

        // Hide children of sibling chapters of the same depth.
        $("ul > .chapter", t).hide();
        // Hide children of siblings of the top-most parent chapter of the selected chapter.
        $("ul > .chapter, ul > .chapter .chapter", hide).hide();
        // Show the selected chapter
        $("ul > .chapter, ul > chapter .chapter", t.parent()).show();
        }

    //////////////////////////////
     // old version below, but keeping for reference
    else {
    var showzoom = 1, showselect = 1, showidea = 1, seldepth, zdepth, showlist, hidelist = {};
    /* This is the 'brute force' way of doing it, horribly inefficient */
    if(zoomednode)
        zdepth = $(zoomednode).parents(".chapter").length;
    if(selectednode)
        seldepth = $(selectednode).parents(".chapter").length;
    else
        seldepth = zdepth;
    if(!seldepth)
        seldepth = zdepth = 0;
    _("seldepth: " + seldepth + "\nzdepth: " + zdepth);
    (showlist=$(".chapter").filter( function() {
        if($(this).parents(".chapter").length < (zdepth+showzoom))
        return true;
        else {
        hidelist = $(hidelist).add(this);
        return false;
        }
    }));
    //    hidelist = $("all").not(showlist);
    if(hidelist)
        _("hidelist size: " + hidelist.length);
    _("showlist size: " + showlist.length);
    $(showlist).show()/*.not(hidelist)*/;
    if(hidelist && hidelist.length) {
        //_("Hiding " + $(hidelist).length + " elements.");
        $(hidelist).hide();
    }
    }
    /* End showing/hiding */

    /* Begin animating */
    $("#contents").animate({ fontSize: zoom }, {duration: 0, queue: false });
    $("html").animate(
        { scrollTop: $(node).offset().top - topAdjust }, {duration: 60+60*depth, queue: false }, 0);
    $(window).scrollLeft($(node).offset().left - leftAdjust);
    } else {

    zoomTo(0, 1 + (selectednode == zoomednode));
    }
}

function setupEvents() {
    $("#contents .chapterheading").click( function() {  _("\n-- -- -- CLICK -- -- --\n-- -- -- -- -- -- -- --\n"), zoomTo(this, true); });
} 
```

编辑：为了进一步参考，标记属于以下类型（递归表示）：

```
<ul> <!-- A: chapter heading list -->
  <span class="chapter">
    <li><span class="chapterheading">Title</span></li>
    <!-- 0 or more of the following --> <div class="idea"><!-- more stuff --></div>
    <!-- 0 or more of A: chapter heading list -->
  </span>
</ul> 
```

并且，变量“t”指向一个类“selectednode”的地方也将被附加，这是我希望发生以下情况的地方：

1.  显示所有直接子 'ul' 元素，这也意味着下面的章节标题。但不要在下面显示任何内容。
2.  隐藏所有同级章节的选定章节的显示内容。
3.  隐藏所有不属于所选章节祖先的最顶层章节的所选章节显示的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T06:28:07.007

重组您的 HTML 以使其有效。我的建议：

```
<div id="toc">
   <h2>Table of Contents</h2>
   <ul>
      <li id="00034" class="art">
         <span class="chapterheading">Title</span>
         <!-- more stuff -->
         <div class="idea"> ... </div>
         ...
         <ul>
            <li id="00035">
               <span class="chapterheading selected">Subtitle</span>
            </li>
            ...
         </ul>
      </li>
      <li>
         <span class="chapterheading">Second Title</span>
         ...
      </li>
      ...
   </ul>
</div> 
```

这不使用`chapter`类，它只是假设所有`li`元素都`#toc`代表一章。

使用这种结构，构建的 DOM（在其上应用了所有选择器等，您可以在开发人员控制台中对其进行检查）看起来与 HTML 标记完全相同。在您的代码中，元素`span`内的标签`ul`可能会移动到`li`项目中的某个位置。

现在，为了隐藏章节标题之后的所有元素，我们使用以下代码 CSS 代码：

```
#toc li > * {
    display: none;
} 
```

但是如果选择了 li 则显示它们：

```
#toc li > span.chapterheading, #toc li.selected > * {
    display: block;
} 
```

使用 Javascript，我们现在只需要根据`selected`点击移动类：

```
$(document).ready(function() {
    $("#toc").on("click", "span.chapterheading", function(ev) {
        $(this).closest("li")
          .addClass("selected")
          .siblings().removeClass("selected");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T05:00:35.873

很难说出您正在使用什么，因为您没有显示足够的代码。

根据您的标记模式以及我认为您在一行 JavaScript 之外所做的事情，以下是我认为可能对您有用的内容：

```
$( '.chapterheading' ).click( function(){
  var t = $( this );
  //I assume you are doing other stuff with t...
  t.parent().next().show();
}); 
```

演示：http: [//jsfiddle.net/US4Nr/](http://jsfiddle.net/US4Nr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T22:00:31.903

另一种类型的列表更适合此类问题 - 即定义列表`<dl>`以及定义术语`<dt>`和定义描述`<dd>`。

HTML：

```
<div id="toc">
    <h2>Table of Contents</h2>
    <dl>
        <dt id="00034">Title 00034</dt>
        <dd class="text">text 00034</dd>
        <dd class="idea">idea 00034</dd>
        <dd class="sub">
            <dl>
                <dt id="00035">Subtitle 0035</dt>
                <dd class="text">text 00035</dd>
                <dd class="idea">idea 00035</dd> 
            </dl>
        </dd>
    </dl>
    <dl>
        <dt id="00036">Title 00036</dt>
        <dd class="text">text 00036</dd>
        <dd class="idea">idea 00036</dd> 
    </dl>
</div> 
```

和 javascript ：

```
$("#toc dt").on('click', function() {
    $(this).closest("dl")
        .children(".idea").hide().end()
        .children(".text, .sub").toggle().end()
        .siblings().find("dd").hide();
});

$("#toc dd.text").on('click', function() {
    $(this).closest("dl").children(".idea").toggle();
}); 
```

**[演示](http://jsfiddle.net/BzESv/)**

所有控制都直接由 javascript 执行。DEMO 中的所有 CSS 都是为了外观，而不是为了隐藏/显示。

可能不是您想要的，尤其是关于事件处理程序的附加方式，但应该让您对如何处理这个问题有一个很好的了解。

# active-directory - 仅在从域外查询 LDAP 时出现“从服务器返回引用”错误

> ID：11813871
> 
> 赞同：2
> 
> 时间：2012-08-05T04:03:16.557
> 
> 标签：active-directory, ldap, adsi, referrals

我在森林中有 2 个域。第二个是第一个的子域。就像下面...

Domain1 =机器 machine1 上的**abc.com Domain2 = 机器****macnihe2**上的 child.abc.com

我有 c# 应用程序，它试图在子域上创建一个 DirectoryEntry。

LDAP://machine1/OU_IN_CHILD_DOMAIN/PARENT_DOMAIN_USERNAME_AND_PASSWORD

这在我的 c# 应用程序位于父域（即**abc.com** ）上时有效，但如果我的 c# 应用程序位于任何不相关的域（如**unrelateddomain.com** ）上，我会收到**来自服务器**错误的推荐。

请让我知道这是为什么？在第一种情况下，AD 能够进行“推荐追逐”，但在第二种情况下则不能。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:13:36.480

我有这个确切的问题好几个月了，今天下午才解决了。您需要执行以下操作：将域控制器主机名从子域添加到 LDAP 字符串。在您的示例中，子/子域可能是这样的：

LDAP://MyChildDomainController1.child.abc.com

您还提到从不相关的域/LDAP/Active Directory 进行连接。如果两个域上的 Active Directory 之间没有信任，并且它们的 LDAP 结构不相关，那么您将无法使用上述方法。如果可能的话，在这种情况下，您唯一的方法就是使用经过身份验证的连接。从未尝试过，但这是一个可能的答案：

[https://stackoverflow.com/a/9252303/1569434](https://stackoverflow.com/a/9252303/1569434)

> “...确保托管上述代码的服务帐户（或计算机帐户，如果是网络服务）被允许委派给您环境中所有 DC 上的 LDAP 服务”

# c++ - 声明从模板类继承的类时出现编译错误：

> ID：11813872
> 
> 赞同：0
> 
> 时间：2012-08-05T04:03:32.533
> 
> 标签：c++, templates, inheritance

我不明白派生文件的声明有什么问题。请帮我找到它的问题。这是我的头文件的内容：

```
/*
* STLSandbox.h
*
*  Created on: Aug 4, 2012
*      Author: aksinghdce
*/

#ifndef STLSANDBOX_H_
#define STLSANDBOX_H_

namespace amit {

class STLSandbox {
public:
    STLSandbox();
    virtual ~STLSandbox();
};
template<typename T>
class MyCotainer{
public:
    virtual void inserthere(T&) = 0;
    virtual void deletehere(T&) = 0;
    virtual const void printhere(T&) = 0; //promise not to modify anything
};

template<typename T>
class VectorOf: public MyContainer<T>
{
public:
    virtual void inserthere(T&);
    virtual void deletehere(T&);
    virtual const void printhere(T&);
private:
    std::vector<T&> v_data; // vector of references of type T
};

template<typename T>
void VectorOf<T>::inserthere(T& item){
    v_data.push_back(item);
}

template<typename T>
void VectorOf<T>::deletehere(T& item){
    v_data.pop_back(item);
}

template<typename T>
const void VectorOf<T>::printhere(T& item){
    std::vector<T>::iterator i = null;
            for(i=v_data.begin();i<v_data.end();i++)
            {
                std::cout<<*i<<std::endl;
            }
}

}

#endif /* STLSANDBOX_H_ */ 
```

我正在使用 gcc 4.2.1

以下是我得到的错误：

```
[...]/STLSandbox.h:26: error: expected template-name before ‘&lt;’ token
[...]/STLSandbox.h:26: error: expected `{' before ‘&lt;’ token
[...]/STLSandbox.h:26: error: expected unqualified-id before ‘&lt;’ token
[...]/STLSandbox.h:37: error: ‘template<class T> class amit::VectorOf’ used without template parameters
[...]/STLSandbox.h: In function ‘void amit::inserthere(T&)’:
[...]/STLSandbox.h:38: error: ‘v_data’ was not declared in this scope
[...]/STLSandbox.h: At global scope:
[...]/STLSandbox.h:42: error: ‘template<class T> class amit::VectorOf’ used without template parameters 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:13:09.760

看起来它只是一个错字。您已经定义了类（注意缺少的 n），但稍后`MyCotainer`使用的是正确的。`MyContainer`

# javascript - 如何在 Chrome 21+ 中使用 getUserMedia 捕获麦克风输入？

> ID：11813875
> 
> 赞同：5
> 
> 时间：2012-08-05T04:03:44.340
> 
> 标签：javascript, html, google-chrome, html5-audio

Chrome 21 最近发布了，但我还没有看到任何用于录制音频的 getUserMedia 示例。

我已经看到了一些使用网络摄像头的好例子，但没有一个能够以可以上传到服务器的格式录制音频：http:
[//neave.com/webcam/html5/](http://neave.com/webcam/html5/)

WebRTC 表示，即使有 Chrome 更新，也可能无法以这种方式录制： [http ://www.webrtc.org/faq-recent-topics](http://www.webrtc.org/faq-recent-topics)

我已经成功地使用 Flash 来执行此操作并保存为 MP3、WAV 或 OGG 文件。我还找到了在 Java 中执行此操作的方法。我认为在浏览器中进行本机操作会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T18:42:56.463

这个demo展示了如何在opera/canary中使用它；它从三月开始，我认为（从你所说的）它现在是 chrome：[http ://creativejs.com/2012/03/getting-started-with-getusermedia/](http://creativejs.com/2012/03/getting-started-with-getusermedia/)

# php - 选项没有被打印/回显？

> ID：11813879
> 
> 赞同：0
> 
> 时间：2012-08-05T04:04:21.843
> 
> 标签：php

此页面生成从数据库中提取的选项。另一个页面通过 year_joining 将学生加入的年份带到这里。其余的 mysql 查询工作得很好（经过测试）

```
<?php
include_once("../Include/connectdb.php");

if($_GET['year_join'])
{
$id=$_GET['year_join'];

$result1 = mysql_query("select distinct sub_id from subject_profile where   batch='$id'        

")or die(mysql_error());

  while($subid = mysql_fetch_assoc($result1)){

 $result2 = mysql_query("SELECT name FROM  `subjects` WHERE  `sub_id` LIKE    

'$subid[sub_id]'");

    $subject=mysql_fetch_assoc($result2);

    if($subject[name]!=""){
  //print "<OPTION value=".$tmp.'">'.$tmp.'</OPTION>';
  //print "<OPTION value='$tmp'>'$tmp'</OPTION>";
  echo "<option value=".$subject['name'] . '">' . $subject['name'] . '</option>';
  //echo '<option value="'.$id.'">'.$data.'</option>';
 //}
 }
}
}
?> 
```

供参考 ：

```
//print "<OPTION value=".$tmp.'">'.$tmp.'</OPTION>';
//print "<OPTION value='$tmp'>'$tmp'</OPTION>";
echo "<option value=".$subject['name'] . '">' . $subject['name'] . '</option>';
//echo '<option value="'.$id.'">'.$data.'</option>'; 
```

这些都不起作用...... :(

使用简单的 echo $tmp 它可以工作，但是当我输入为

```
echo "<option value="; 
```

结果是空白页...

当我回显时，它的工作非常好

```
echo $tmp; 
```

给出所有主题的列表..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T04:09:32.907

对于“不显示输出”的问题，我相信你错过了一个`<select>`包含标签的`<option>`标签。

作为旁注，在查询中，将其更改如下：

```
"SELECT name FROM  `subjects` WHERE  `sub_id` LIKE '{$subid[sub_id]}'" 
```

或者，

```
"SELECT name FROM  `subjects` WHERE  `sub_id` LIKE '" . $subid[sub_id] . "'" 
```

仍然不安全。您应该转义这些值并更好地使用使用 mysqli 或 PDO 的准备好的语句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T04:25:55.920

主要问题是根据 Akhilesh B Chandran 的回答，缺少`<select>`标签。

除此之外，当`$subject['name']`其中有空间时会出现问题。

问题是这一行：

```
echo "<option value=".$subject['name'] . '">' . $subject['name'] . '</option>'; 
```

它应该是这样的：

```
echo '<option value="'.$subject['name'] . '">' . $subject['name'] . '</option>'; 
```

在您当前拥有的内容中，浏览器将结果解释为：

```
<option value=insert name here">insert name here</option> 
```

可见，在 之后缺少引号`value=`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T04:20:01.500

您的报价不匹配，这就是 PHP 失败的原因。

尝试改变：

```
echo "<option value=".$subject['name'] . '">' . $subject['name'] . '</option>'; 
```

到：

```
echo "<option value=".$subject['name'] . ">" . $subject['name'] . "</option>"; 
```

基本上，您开始使用`"`, 并在中途切换到使用`'`

# c++ - 多线程和堆损坏

> ID：11813882
> 
> 赞同：3
> 
> 时间：2012-08-05T04:05:24.997
> 
> 标签：c++, multithreading, heap-memory, sfml, heap-corruption

所以我刚开始第一次尝试一些多线程编程，我遇到了这个堆损坏问题。基本上，程序会运行一段随机的时间（短至 2 秒，长至 200 秒），然后崩溃并抛出堆损坏错误。我读到的关于这个主题的所有内容都表明它很难诊断，因为触发错误的原因通常与实际导致它的原因无关。因此，我仍然很难过。

然而，我还没有被正式教授多线程，所以我主要是根据我对这个概念的理解进行编程，我的代码可能完全错误。所以这是我正在尝试做的事情以及程序当前如何处理它的基本概要：

我正在为一个简单的游戏编写代码，该游戏涉及绘制几个视差层的背景。这些级别非常大（例如 20000x5000 像素），因此显然尝试加载 3 层这些大小的图像是不可行的（如果不是不可能的话）。所以目前图像被分割成 500x500 的图像，我的代码只有它需要立即显示的图像保存在内存中。它已加载的任何不再需要的图像都会从内存中删除。但是，在单个线程中，这会导致程序在等待图像加载后再继续时显着挂起。

这就是多线程对我来说合乎逻辑的地方。我希望程序完成它需要做的加载，而不影响游戏的流畅性，只要图像在实际需要的时候加载。所以这是我的组织方式：

1.) 图像应该去哪里的所有数据以及与它们关联的任何数据都存储在一个多维数组中，但最初没有加载图像数据。每一帧，代码都会检查数组上的每个位置，并测试图像应该去的位置是否在玩家的某个半径范围内。

2.) 如果是，则将此位置标记为需要加载。指向应该加载图像的位置的指针是 push_back()'d 到向量上。

3.) 第二个线程在关卡开始后启动。该线程最初被传递一个指向上述向量的指针。

4.) 这个线程被放入一个无限的 While 循环（这本身听起来是错误的），只有在线程终止时才会终止。这个循环不断检查向量中是否有任何元素。如果有，它会抓取第 0 个元素，将图像数据加载到该指针中，然后 .erase() 是向量中的元素。

这几乎是它如何工作的概要。我没有受过教育的假设是 2 个线程在某个时候发生冲突，试图一次在同一个空间中写入和删除或其他东西。鉴于我是新手，我敢肯定这种方法在某种程度上是可怕的，所以我很想听听我应该改进什么。

编辑：根据要求添加源代码：

```
class ImageLoadQueue
{
private:
ImageHandle* image;
std::string path;
int frameWidth, frameHeight, numOfFrames;
public:
ImageLoadQueue();
ImageLoadQueue(ImageHandle* a, std::string b, int c, int d, int e=1) { setData(a,b,c,d,e); }

void setData(ImageHandle* a, std::string b, int c, int d, int e=1)
{
    image = a;
    path = b;
    frameWidth = c;
    frameHeight = d;
    numOfFrames = e;
}
void loadThisImage() { image->loadImage(path, frameWidth, frameHeight, numOfFrames, numOfFrames); }
};

class ImageLoadThread : public sf::Thread
{
private:
std::vector<ImageLoadQueue*>* images;

public:
ImageLoadThread() { };
ImageLoadThread(std::vector<ImageLoadQueue*>* a) { linkVector(a); }

void linkVector(std::vector<ImageLoadQueue*>* a) { images = a; }
virtual void Run()
{
    while (1==1)
    {

        if (!images->empty())
        {
            (*images)[0]->loadThisImage();
            images->erase(images->begin());     
        }
    }
}

};

class LevelArt
{
private:
int levelWidth, levelHeight, startX, startY, numOfLayers;
float widthScale, heightScale, widthOfSegs, heightOfSegs;
float* parallaxFactor;
ImageHandle** levelImages;
int** frame;
int** numOfFrames;
bool* tileLayer;
bool** isLoaded;
Animation** animData;
std::string** imagePath;

std::vector<ImageLoadQueue*> imageQueue;
ImageLoadThread imageThread;

 public:
LevelArt(void);
LevelArt(std::string);
~LevelArt(void);

void loadData(std::string);
void drawLevel(sf::RenderWindow*, float, float);
void scaleLevel(float, float);
void forceDraw(sf::RenderWindow*);
void wipeLevel();
void initialLoad();

int getLevelWidth() { return levelWidth; }
int getLevelHeight() { return levelHeight; }
int getTotalWidth() { return widthOfSegs*levelWidth; }
int getTotalHeight() { return heightOfSegs*levelHeight; }
int getStartX() { return startX; }
int getStartY() { return startY; }
}; 
```

这是此标头中的大部分相关线程代码。在 levelArt.cpp 文件中存在 3 个嵌套的 for 循环，用于遍历所有存储的 levelArt 数据，测试它们是否离玩家足够近以便显示，其中它调用：

```
imageQueue.push_back(new ImageLoadQueue(&levelImages[i][(j*levelWidth)+k], imagePath[i][(j*levelWidth)+k], widthOfSegs, heightOfSegs, numOfFrames[i][(j*levelWidth)+k])); 
```

i,j,k 是 for 循环迭代器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T04:49:45.537

这似乎是对多线程的合理使用。关键思想（换句话说，如果你做错了你会遇到问题的主要地方）是你必须小心被多个线程使用的数据。

您有两个地方拥有此类数据：

1.  向量（顺便说一下，它可能应该是一个队列）
2.  返回数据的数组

安排事物的一种方法——绝不是唯一的——是将这些中的每一个包装到它自己的类中（例如，具有向量成员变量的类）。不允许任何直接访问向量，只能通过类上的方法。然后同步方法，例如使用互斥锁或任何适当的同步对象。请注意，您正在同步对对象的访问，而不仅仅是单个方法。所以在“从队列中读取”方法中放置一个互斥锁是不够的；您需要在“从队列读取”和“写入队列”方法中使用一个通用互斥锁，这样当另一个发生时没有人在做一个。（另请注意，我使用的是互斥锁这个术语；根据您的平台和具体情况，这可能是一个非常错误的使用方法。

同步将使程序线程安全。这与使程序高效不同。为此，您可能需要一个表示队列中项目数的信号量，并让您的“加载数据线程”等待该信号量，而不是执行 while 循环。

# graph - 估计迷宫游戏树中的孩子数

> ID：11813883
> 
> 赞同：0
> 
> 时间：2012-08-05T04:05:26.027
> 
> 标签：graph, tree, nodes, estimation, game-theory

假设我们有一个迷宫游戏，在 20*20 网格迷宫中有 1 只老鼠和 4 只猫。假设迷宫中的每个智能体都可以移动 N、E、S、W。对于这个巨大的博弈树中每个节点的子节点数量，您最好的猜测是什么？

这是我最好的猜测，但我不确定，有什么想法吗？

```
4 possible mouse moves *
(4 directions) * (4! possible cat1 moves) *
(4 directions) * (4! possible cat2 moves) *
(4 directions) * (4! possible cat3 moves) * 
(4 directions) * (4! possible cat4 moves)
= 339738624 children in 1 node 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T11:45:23.797

游戏状态由五个智能体（1 只老鼠 + 4 只猫）的位置给出。每个代理可以向 4 个方向移动并且不能保持静止。因此，每个游戏状态最多有 5^4 个孩子。

如果代理可以保持静止，那么他们有 5 个动作，因此每个状态最多有 5^5 个孩子。

这些是“最大值”，因为其中一些子状态可能是彼此重复或不允许的，例如，当两个智能体试图移动到同一个位置时，或者一个智能体因为被包围而无法移动，或者它们在世界的边缘。

# php - jQuery序列化不适用于复选框

> ID：11813885
> 
> 赞同：0
> 
> 时间：2012-08-05T04:05:35.680
> 
> 标签：php, jquery, serialization, checkbox

我在一些复选框上有一个 jquery，我正在尝试序列化这些值，以便我可以在 PHP 中获得多个选择。

这是我的jQuery：

```
<script type="text/javascript">
    jQuery(document).ready(function($) {
        $("input:checkbox").change(function() {
            if($(this).is(':checked')) 
            {
                    var color = $(this).val().serialize;
                    $(".itemMain").hide();
                    $(".indexMain").load('indexMain.php?color='+color);
            }
        });
    });
</script> 
```

这里是我的 PHP：

```
$color = $_GET['color']; 
```

在应用序列化之前，一切正常，但我不能有多个选择。现在它根本不能与 serialize() 一起工作。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T12:13:05.100

另一个对我有用的解决方案。

只需在字段的 name 属性中指定您想要多个值的其他术语：数组

```
<form action="" method="post" id="filters_form"">
    <input id="fieldNameText" value="value0" name="fieldNameText" type="text">                                  
    <input type="checkbox" name="myFieldName[]" id="myFieldName" value="value1"/>
    <input type="checkbox" name="myFieldName[]" id="myFieldName" value="value2"/>
</form> 
```

serialize() 方法`var dataString = $("#filters_form").serialize();`将导致

```
fieldNameText=value0&myFieldName%5B%5D=value1&myFieldName%5B%5D=value2 
```

如果您使用 AJAX 在帖子中发送这些数据，您将在 php 中得到：

阿贾克斯

```
$.ajax({
    type: "POST",
    url: "yourFormURL",
    data: dataString,
    success: function(response) {
        //do something
    }
}); 
```

PHP

```
print_r($_POST);

/* Output :
Array ( [fieldNameText] => value0 [myFieldName] => Array ( [0] => value1 [1] => value2 )) 
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:50:58.140

粗略的解决方案可以是，在每个复选框的单击事件中，您可以以逗号分隔的形式将其值存储/附加在变量（或隐藏的输入字段）中，并将此变量传递给颜色查询字符串。

# php - 无法弄清楚我的 .htaccess RewriteRule 语句有什么问题

> ID：11813887
> 
> 赞同：0
> 
> 时间：2012-08-05T04:06:31.063
> 
> 标签：php, apache, .htaccess, permalinks

我不知道如何正确使用该`.htaccess`文件，并且那里的所有指南和教程都不是最容易理解的。

这是我当前的代码...

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^/([^/]+)/([^/]+)/([^/]+)$ productpage.php?productidpage=$1&brand=$2&productname=$3 [L,NC] 
```

我希望它在加载`www.mysite.com/$1/$2/$3/`时显示。`productpage.php`

好吧，实际上我希望它显示得`www.mysite.com/$2/$3`好像这是可能的。

该`productidpage`变量是在代码中用于加载页面的内容，`$2`纯粹`$3`是为了修改 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:27:12.350

确保为包含您的文件设置了`AllowOverride FileInfo`或 ( )。`AllowOverride All``<Directory>``.htaccess`

然后*在服务器或虚拟主机级别*`RewriteLog`设置并调试您的重写规则。`RewriteLogLevel`

 ***更新：**我强烈建议您查看[Ask Apache](http://www.askapache.com) - 它有大量`mod_rewrite`信息和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T04:22:29.547

尝试删除正则表达式中的前导斜杠。`RewriteRule`当规则在 htaccess 文件中时，匹配 ' 表达式时，URI 中的前导斜杠将被删除。

```
# no slash---v maybe a slash here---v
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ productpage.php?productidpage=$1&brand=$2&productname=$3 [L,NC] 
```*

# java - 加法链

> ID：11813888
> 
> 赞同：1
> 
> 时间：2012-08-05T04:06:48.587
> 
> 标签：java, algorithm

> **可能重复：**
> [如何在一秒内计算任意 n <= 600 的最短加法链？](https://stackoverflow.com/questions/10140052/how-can-you-compute-a-shortest-addition-chain-for-an-arbitrary-n-600-within-o)

编写一个计算数字 <= 500 的最短加法链的程序的最佳方法是什么？我尝试过使用迭代加深的深度优先搜索，但对于较大的值，它会变得非常慢。

我还可以使用哪些其他技术来显着缩短运行时间？另外，我应该如何修剪搜索空间？谢谢！

# sql - 直接从 iPhone 到在线服务器执行 SQL 查询

> ID：11813890
> 
> 赞同：2
> 
> 时间：2012-08-05T04:07:37.257
> 
> 标签：sql, ios, database

我是一个新手，倾向于做一个简单的iOS应用程序。

任务是制作一个应用程序，为一个人进行注册，然后将该数据上传到在线服务器。

详细来说，我想，，，，`insert`数据直接到在线服务器。`delete``update`

有人会告诉我我必须做什么（工具，图书馆......）吗？

我与 SQlite 合作为 iPhone 制作了一个本地数据库，它运行良好，现在它是关于处理在线服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:42:17.437

您需要的是某种可用的远程 API，您将使用它来连接 iPhone 应用程序，例如 MySQL 数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:10:31.323

执行远程请求有两种方法：

1) [https://github.com/smhuang426/MySqueakQl](https://github.com/smhuang426/MySqueakQl) - 这是远程访问数据库的“基本”实现。[http://www.karlkraft.com/index.php/2010/09/17/mysql-for-iphone-and-osx/](http://www.karlkraft.com/index.php/2010/09/17/mysql-for-iphone-and-osx/) - 更高级，在文章中你可能会一些说明如何使用这个框架。在这种情况下，您使用 SQL C API，并且可以编写自己的特殊类。示例：[http](http://blog.iosplace.com/?p=30) ://blog.iosplace.com/?p=30 、 http: [//zetcode.com/tutorials/mysqlcapitutorial/](http://zetcode.com/tutorials/mysqlcapitutorial/)和 C API 说明[http://dev.mysql.com/doc/refman/5.0/ zh/c-api-function-overview.html](http://dev.mysql.com/doc/refman/5.0/en/c-api-function-overview.html)

2）在线服务器上发布的PHP脚本，您使用发送到该脚本的异步ASIHTTP（或普通NSRequest），脚本直接与tis服务器上的sql DB一起使用。示例（[iOS 没有通过 PHP 在 iPhone 应用程序和 MySQL 数据库之间进行通信](https://stackoverflow.com/questions/11715521/ios-no-communication-between-iphone-app-and-mysql-database-via-php)）。在这种情况下，您获得了更高的安全性，但也存在一些限制，例如降低应用程序的速度和服务器必须提供 PHP。

祝你好运！

# optimization - OpenCL 性能优化

> ID：11813893
> 
> 赞同：5
> 
> 时间：2012-08-05T04:08:43.277
> 
> 标签：optimization, opencl, gpgpu

我已经开始学习 OpenCL，目前我正在尝试测试我可以在多大程度上提高简单骨骼动画算法的性能。为此，我编写了一个程序，从随机生成的顶点和变换矩阵执行骨骼动画两次，一次使用纯 C++ 中的 SSE 优化线性代数库，一次使用我自己在 GPU 上的 OpenCL 内核（我正在测试英伟达 GTX 460）。

我从一个简单的内核开始，其中每个工作项只转换一个顶点，所有值都从全局内存中读取。因为我对这个内核的性能不满意，所以我尝试了一点优化。我当前的内核如下所示：

```
inline float4 MultiplyMatrixVector(float16 m, float4 v)
{
    return (float4) (
        dot(m.s048C, v),
        dot(m.s159D, v),
        dot(m.s26AE, v),
        dot(m.s37BF, v)
    );
}

kernel void skelanim(global const float16* boneMats, global const float4* vertices, global const float4* weights, global const uint4* indices, global float4* resVertices)
{
    int gid = get_global_id(0);
    int lid = get_local_id(0);

    local float16 lBoneMats[NUM_BONES];
    async_work_group_copy(lBoneMats, boneMats, NUM_BONES, 0);

    barrier(CLK_LOCAL_MEM_FENCE);

    for (int i = 0 ; i < NUM_VERTICES_PER_WORK_ITEM ; i++) {
        int vidx = gid*NUM_VERTICES_PER_WORK_ITEM + i;

        float4 vertex = vertices[vidx];
        float4 w = weights[vidx];
        uint4 idx = indices[vidx];

        resVertices[vidx] = (MultiplyMatrixVector(lBoneMats[idx.x], vertex * w.x)
                + MultiplyMatrixVector(lBoneMats[idx.y], vertex * w.y)
                + MultiplyMatrixVector(lBoneMats[idx.z], vertex * w.z)
                + MultiplyMatrixVector(lBoneMats[idx.w], vertex * w.w));
    }
} 
```

现在我为每个工作项处理恒定数量的顶点，并且我只为每个工作项将所有骨骼矩阵预取到本地内存中一次，我相信这会带来更好的性能，因为可以从中读取多个顶点的矩阵之后更快的本地内存。不幸的是，这个内核的性能比我第一次尝试的要差，甚至比只使用 CPU 的实现还要差。

为什么这种本应优化的性能如此糟糕？

如果有帮助，这是我执行内核的方式：

```
#define NUM_BONES 50
#define NUM_VERTICES 30000
#define NUM_VERTICES_PER_WORK_ITEM 100
#define NUM_ANIM_REPEAT 1000

uint64_t PerformOpenCLSkeletalAnimation(Matrix4* boneMats, Vector4* vertices, float* weights, uint32_t* indices, Vector4* resVertices)
{
    File kernelFile("/home/alemariusnexus/test/skelanim.cl");

    char opts[256];
    sprintf(opts, "-D NUM_VERTICES=%u -D NUM_REPEAT=%u -D NUM_BONES=%u -D NUM_VERTICES_PER_WORK_ITEM=%u", NUM_VERTICES, NUM_ANIM_REPEAT, NUM_BONES, NUM_VERTICES_PER_WORK_ITEM);

    cl_program prog = BuildOpenCLProgram(kernelFile, opts);

    cl_kernel kernel = clCreateKernel(prog, "skelanim", NULL);

    cl_mem boneMatBuf = clCreateBuffer(ctx, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, NUM_BONES*sizeof(Matrix4), boneMats, NULL);
    cl_mem vertexBuf = clCreateBuffer(ctx, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, NUM_VERTICES*sizeof(Vector4), vertices, NULL);
    cl_mem weightBuf = clCreateBuffer(ctx, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, NUM_VERTICES*4*sizeof(float), weights, NULL);
    cl_mem indexBuf = clCreateBuffer(ctx, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, NUM_VERTICES*4*sizeof(uint32_t), indices, NULL);
    cl_mem resVertexBuf = clCreateBuffer(ctx, CL_MEM_WRITE_ONLY | CL_MEM_ALLOC_HOST_PTR, NUM_VERTICES*sizeof(Vector4), NULL, NULL);

    uint64_t s, e;
    s = GetTickcount();

    clSetKernelArg(kernel, 0, sizeof(cl_mem), &boneMatBuf);
    clSetKernelArg(kernel, 1, sizeof(cl_mem), &vertexBuf);
    clSetKernelArg(kernel, 2, sizeof(cl_mem), &weightBuf);
    clSetKernelArg(kernel, 3, sizeof(cl_mem), &indexBuf);
    clSetKernelArg(kernel, 4, sizeof(cl_mem), &resVertexBuf);

    size_t globalWorkSize[] = { NUM_VERTICES / NUM_VERTICES_PER_WORK_ITEM };
    size_t localWorkSize[] = { NUM_BONES };

    for (size_t i = 0 ; i < NUM_ANIM_REPEAT ; i++) {
        clEnqueueNDRangeKernel(cq, kernel, 1, NULL, globalWorkSize, localWorkSize, 0, NULL, NULL);
    }

    clEnqueueReadBuffer(cq, resVertexBuf, CL_TRUE, 0, NUM_VERTICES*sizeof(Vector4), resVertices, 0, NULL, NULL);

    e = GetTickcount();

    return e-s;
} 
```

我想还有更多可以优化的东西，也许将其他一些全局读取批处理在一起，但首先我真的很想知道为什么第一次优化不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-31T06:12:27.333

有两件事会影响你的锻炼表现。

1)`OpenCL`符合`C99`不包含任何有关内联函数的 std，即 clcc 编译器要么只是忽略`inline`关键字并进行常规调用，要么它默默地支持内联。但没有强制要求支持该功能。

因此，最好将您的定义`MultiplyMatrixVector`为预处理器宏。尽管在您的情况下这不是主要问题。

2）您错误地威胁本地内存（`LDM`）。

虽然它的延迟时间小于`global memory`它正确访问时的延迟时间，但它`local memory`会受到银行冲突的影响。

您的顶点索引以每个工作项的步幅 100 计算。bank 的数量取决于所使用的 GPU，但通常为 16 或 32，即`LDM`如果所有变量都位于不同的 bank 中，则您可以在一个周期内访问多达 16(32) 个四字节变量而不会受到惩罚。否则，您会得到一个`bank conflict`（当两个或更多线程访问同一个库时）被序列化的。一个工作组中的 100 个线程访问数组`LDM`，没有关于银行冲突的特殊安排。此外，数组元素是 float16，即单个元素跨越所有 16 个存储库（或 32 个存储库的一半）。因此，您在每一行`MultiplyMatrixVector`函数中都有一个银行冲突。累积`degree`冲突至少为 16x32（这里 16 是您访问的矢量元素的数量，32 是半波前或半扭曲的大小）。

这里的解决方案不是将该数组复制到`LDM`，而是在主机中分配它`CL_MEM_READ_ONLY`（您已经这样做了）并使用`__constant`说明符作为`boneMats`参数声明您的内核。然后`OpenCL`库将在内部的常量区域中分配内存，`GPU`并且对该数组的访问会很快：

```
kernel void skelanim(__constant const float16* boneMats, 
                     global const float4* vertices, 
                     global const float4* weights, 
                     global const uint4* indices, 
                     global float4* resVertices) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-05T13:44:36.583

看起来工作组中的每个线程在计算开始之前都在复制相同的 50 个浮点数。这将使全局内存带宽饱和。

尝试这个

```
if ( lid == 0 )
{
    async_work_group_copy(lBoneMats, boneMats, NUM_BONES, 0);
} 
```

每个工作组只复制一次。

# php - 成功点赞页面后的php动作

> ID：11813895
> 
> 赞同：0
> 
> 时间：2012-08-05T04:09:06.343
> 
> 标签：php, facebook, api, facebook-like, payment

目前，我正在我的网站上提供一些付费广告，并且我想为那些不想支付少量广告费用的访问者提供另一种选择。

目前，我的付费广告只是在访问者创建广告进行付款后将其重定向到贝宝。我想做的是在我的付款按钮旁边放置一个类似 facebook 的按钮，这样我的访问者就可以选择在 paypal 之间进行选择，或者成为我的页面粉丝来放置付费广告。

我想知道那里是否有任何教程，或者有人可以指出我如何去做这件事的正确方向。我尝试在谷歌上搜索，但似乎找不到任何方法可以做到这一点。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T05:12:24.550

似乎 facebook 提供了一个用于定义回调的函数，这里有一个类似的问题，其中引用了您可能想要使用的函数：

[Facebook“赞”按钮回调](https://stackoverflow.com/questions/2798622/facebook-like-button-callback)

# objective-c - ARC下的EXC_BAD_ACCESS内存错误

> ID：11813901
> 
> 赞同：0
> 
> 时间：2012-08-05T04:10:15.227
> 
> 标签：objective-c, ios

在下面的方法中，我在包含“urlString”变量的行上收到“EXC_BAD_ACCESS”。我的研究表明，当程序向已释放的变量发送消息时会发生此错误。但是，由于我使用的是 ARC，所以我没有手动释放内存。如何防止 ARC 过早释放此变量？

```
-(NSMutableArray *)fetchImages:(NSInteger *)count {
//prepare URL request
NSString *urlString = [NSString stringWithFormat:@"http://foo.example.com/image?quantity=%@", count];

NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlString]];

//Perform request and get JSON as a NSData object
NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

//Parse the retrieved JSON to an NSArray
NSError *jsonParsingError = nil;
NSArray *imageFileData = [NSJSONSerialization JSONObjectWithData:response options:0 error:&jsonParsingError];

//Create an Array to store image names

NSMutableArray *imageFileNameArray;

//Iterate through the data
for(int i=0; i<[imageFileData count];i++)
{
    [imageFileNameArray addObject:[imageFileData objectAtIndex:i]];

}

return imageFileNameArray;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T04:12:28.977

您的问题与ARC无关。 `NSInteger`不是一个类，所以你不想使用这种`%@`格式。 `%@`将向`description`系统认为是对象的对象发送一个方法，但当它结果不是一个对象时 - 崩溃。要解决您的问题，您有两种选择：

1.  你可能想要：

    ```
    NSString *urlString = 
      [NSString stringWithFormat:@"http://foo.example.com/image?quantity=%d",
            *count]; 
    ```

    首先确保`count`指针有效！

2.  您可能需要将方法签名更改为：

    ```
    -(NSMutableArray *)fetchImages:(NSInteger)count; 
    ```

    然后`urlString`按如下方式更改该行：

    ```
    NSString *urlString = 
      [NSString stringWithFormat:@"http://foo.example.com/image?quantity=%d", 
          count]; 
    ```

    您还需要修复所有调用者以匹配新签名。

第二个选项对我来说似乎更“正常”，但如果没有更多的程序，就不可能更具体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T08:06:32.443

你也可能想要分配和初始化

```
NSMutableArray *imageFileNameArray; 
```

在向其添加对象之前，否则您将继续崩溃。所以你会有

```
//Create an Array to store image names

NSMutableArray *imageFileNameArray = [[NSMutableArray alloc] init]; 
```

# c# - 使用 C# 构建机器人模拟器 GUI。需要一些建议

> ID：11813903
> 
> 赞同：1
> 
> 时间：2012-08-05T04:11:19.310
> 
> 标签：c#, windows, forms, simulator, robot

我正在为我的自主机器人车辆构建一个 2D 机器人模拟器 GUI。

我打算保持 GUI 简单。它由一辆车（用蓝色方形图片表示）和一些障碍物（圆锥体、墙壁等，分别用黄色圆圈和红线表示）组成。

车辆必须能够移动（如蓝色方块必须能够在 GUI 上移动）并且能够在 GUI 上显示其速度和转向（浮点值）及其状态（字符串）。

我计划使用 C# 和 Windows 窗体来完成这项任务，但我不确定这是否是正确的方法。我记得几年前使用图片框，我无法实时更改图片框的位置，或者类似的奇怪的东西。

只是想知道你们是否知道更好的方法来做到这一点。Windows 窗体是要走的路吗？

我刚刚从 Ubuntu 迁移到 Windows，所以我对 .Net 的东西还是很陌生。

这是我到目前为止所得到的[http://imageshack.us/photo/my-images/708/guilo.png/](http://imageshack.us/photo/my-images/708/guilo.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:19:28.763

未来的计划可能会要求进行更改，但对于您所描述的 Windows.Drawing 应该可以正常工作。唯一的问题可能是您是否使用计时器进行更新，因为它对您来说可能不够快。

那么，您需要多快的更新速率？

您实际需要多少类似的游戏框架？

您可能想查看如下教程：

[http://www.dreamincode.net/forums/topic/67275-the-wonders-of-systemdrawinggraphics/](http://www.dreamincode.net/forums/topic/67275-the-wonders-of-systemdrawinggraphics/)

# javascript - div中的变量字段通过javascript

> ID：11813904
> 
> 赞同：2
> 
> 时间：2012-08-05T04:11:31.863
> 
> 标签：javascript, html

我需要通过您在一年前帮助我设置的 javascript 将变量“发送”到 div a。基本上...

我设置的可变播放列表来自：

```
<script language="JavaScript" type="text/javascript">
 var play = '<?php echo "$play"; ?>';
 var playlist = "playlists/" + play + ".xml";
 ***command to send to "var_playlist" ****;
</script> 
```

然后需要发送到：

```
<!--START - PICKLE PLAYER -->
<div data-media="var_playlist"></div>
<!-- END - PICKLE PLAYER --> 
```

非常感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T04:18:15.713

尝试这个：

```
document.querySelector('div[data-media]').innerHTML = playlist; 
```

或者，如果您想更改`data-media`属性的值，您可以尝试：

```
document.querySelector('div[data-media]').dataset.media = playlist; 
```

[演示](http://jsfiddle.net/5tb3N/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T04:17:07.070

[http://jsfiddle.net/V4aCC/](http://jsfiddle.net/V4aCC/)

很难知道“发送”是什么意思。链接的 JSFiddle 会将 Javascript 字符串中包含的文本放入元素的 HTML 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T04:18:20.310

看起来您想将`data-media`属性设置为 的值`playlist`，您可以使用[`setAttribute`](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)

```
mediadiv.setAttribute('data-media', playlist);//where mediadiv is the div in question 
```

# android - 奇怪的 jQuery Mobile 列表视图没有完全刷新

> ID：11813909
> 
> 赞同：2
> 
> 时间：2012-08-05T04:13:58.123
> 
> 标签：android, jquery-mobile

我有一个 jQuery Mobile 列表视图不刷新的问题，但仅在一个非常特殊的情况下。当我在 Android 手机（特别是 Google Nexus）上测试我的应用程序时，会出现此问题。问题发生在我的列表视图从视图 1 正确加载到视图 2 之后。然后我转到视图 3。当我从视图 3 转到视图 2 时，列表视图没有完全加载。我的意思是它确实正确地加载了我的代码，但是在我尝试选择其中一行之前它永远不会显示。一旦我选择了其中一行，它们就会突然出现。我正在创建我的列表视图，方法是在`document.ready()`. 我知道目前据说这是不好的做法，但是当我使用 jQuery 建议的方法时，`document.bind('pageinit')`它的工作时间为 3 到 2 但是每次我离开视图 2`document.bind('pageinit')`再次被解雇。有没有办法解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:37:44.180

使用 jQuery Mobile 进行开发时要意识到的最重要的事情之一是在页面之间导航时不会卸载您的 javascript。这实际上意味着当您使用`.bind()`（或`.on()`，这是[首选方式](http://api.jquery.com/bind/)）时，离开页面时它不会解除绑定。这意味着您必须自己管理。

经过一番挣扎，我发现以下解决方案最适合我。加载所有的 javascript`<head>`并创建一个单独的 javascript 文件来处理诸如绑定之类的事情。页面导航不会卸载这些文件。该文件的概要如下。

```
$(document).on('pagebeforeshow', function(event){
    currentPageId = $(event.target).attr("id");
    //Give every <div data-role="page"> an id and switch on it.
    switch (currentPageId) {
        case "index":
            loadIndex();
            break;
        case "fooPage":
            loadFooPage();
            break;
        case "barPage":
            loadBarPage();
            break;
        default:
            break;
    }
}); 
```

在每次页面加载时，您将通过以下方式将所需的新功能绑定到该页面：

```
function loadIndex(){
    $(document).one("pageshow", function pageshow(event){
        console.log("Entered the index");
        $(window).on("scrollstart", someFunction);

        //Unbind everything when a new page is loaded.            
        $(document).one("pagebeforeshow", function pagebeforeshow(event){
            console.log("Exited the index")
            $(window).off("scrollstart", someFunction);
        });
    });
} 
```

对要绑定内容的每个页面执行此操作。完成此操作后，您可以按照习惯执行 javascript 函数，因为它们会在每个页面显示时加载和卸载。

# cakephp - 如何在控制器中设置默认前缀->跳过在链接中定义前缀

> ID：11813910
> 
> 赞同：1
> 
> 时间：2012-08-05T04:13:58.007
> 
> 标签：cakephp, routing, prefix, cakephp-2.2

我有以下想法：我希望能够在任何给定的控制器中定义默认前缀。因此，假设 CitiesController 的默认前缀使用 the 实现所有操作，`"admin" prefix ("admin_index", "admin_add", etc.),`但 ProvincesController 使用 the 实现所有操作

```
"superadmin" prefix ("superadmin_index", "superadmin_add", etc.) 
```

问题是，每次我想链接到任何“城市的东西”时，我都必须指定“admin”=>“true”。任何时候我想链接到任何“省的东西”，我都必须指定

```
"superadmin" => "true". 
```

最初这已经是相当多的工作了，但是如果我决定要将城市的前缀从“admin”更改为“superadmin”，那将是更多的工作。

所以我想知道是否有办法按照以下方式做一些事情：

```
class CitiesController extends AppController {
    var $defaultPrefix = "admin"
} 
```

然后在 HTML 帮助链接函数中，执行以下操作：

```
class LinkHelper extends AppHelper {

    public $helpers = array('Html');

    function myDynamicPrefixLink($title, $options) {
        // check whether prefix was set (custom function that checks all known prefixes)
        if (! isPrefixSet($options)) {
            // no clue how to get the controller here
            $controller = functionToGetControllerByName($options['controller']);

            // check whether controller has a defined default prefix 
            $prefix = $controller->defaultPrefix;
            if ($prefix) {
                // set the given prefix to true
                $options[$prefix] = true;
            }

        // use HTML helper to get link
        return $this->Html->link($title, $options);
    }
} 
```

我只是不知道如何动态地从助手到给定名称的控制器。

另一种选择是将默认前缀存储在其他地方，但现在我觉得最好的地方是任何给定的控制器本身。

另一个想法是甚至让查找函数同时依赖于控制器和动作，而不仅仅是控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:06:19.293

您应该能够使用 Router::connect 来提供默认值（请参阅 Github 上的代码和文档：[链接](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Routing/Router.php)）来为某些控制器甚至操作指定默认前缀。

但是，如果您想要比当前路由器提供的更多灵活性，您可以通过指定要使用的备用 Route 类来扩展对 Router::connect 的使用：

```
Router::connect(
    '/path/to/route',
    array('prefix' => 'superadmin'),
    array('routeClass' => 'MyCustomRouter')
); 
```

[在CakePHP 文档](http://book.cakephp.org/2.0/en/development/routing.html#custom-route-classes)中可以看到这样的例子。

# php - PHP PDO。查询正确时的错误号“00000”

> ID：11813911
> 
> 赞同：32
> 
> 时间：2012-08-05T04:14:13.300
> 
> 标签：php, database, error-handling, pdo

我有以下代码：

```
$sql3 = "update news set date='$time' where id='2'";
$sql3 = $connect->exec($sql3);
if(!$sql3)
{
    print_r($connect->errorInfo());
    $error = $connect->errorInfo();
    die ("Error: (".$error[0].':'.$error[1].') '.$error[2]);
} 
```

当我运行脚本时，有时我会收到错误号“00000”。我的意思是它介绍了`IF`. 而且都是随机的。输出（有时）：

```
Array ( [0] => 00000 [1] => [2] => ) 
```

我应该怎么做才能解决这个问题？
PS：脚本每次都正确执行。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-05T04:15:23.257

PDO 错误代码`00000`意味着一切正常。您点击错误检查代码的原因`$sql3`是返回 0（没有影响任何行）并且 PHP 将其评估为 false。尝试显式检查`return false;`

```
if($sql3 === false) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-05T04:16:43.847

如果 exec 不更新任何行，它将返回 0。这使得 if(!$sql3) 评估为 false，你应该这样做：

```
if($sql3 === false){

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-29T12:23:20.140

根据我的经验，格式错误的查询（语法错误）和失败的查询（例如没有插入任何内容的 INSERT）也可能错误地返回错误代码 00000。您应该继续尝试在 SQL 控制台上运行完整的查询并查看为什么它失败了。我真的不知道为什么没有返回正确的错误消息。这是我们使用的代码片段

```
 $r = $pdo->prepare($sql);
    if (!$r->execute($input_parameters)) { # query failed
        if ($bLogFailures) {
            error_log('query failed: ERROR['.$pdo->errorCode().':'.print_r($pdo->errorInfo(), true).'] QUERY['.$sql.']');
        }
        return false;
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-22T08:13:49.450

`ENUM('0', '1')`我刚刚在我的 php 项目中遇到了类似的情况 - 当我尝试插入字段设置为 NULL 的行而在数据库中定义字段的列的类型和限制为**NOT NULL**时，发生了错误代码为 '00000' 的 PDO 异常. 在修改 PHP 脚本以放置 '0' 而不是 后`NULL`，错误消失了。

* * *

进一步的编码使情况更加清晰 - 我在一个 DB 事务中执行了多个 PDO 语句，但仅基于执行的第一个 PDO 语句检查错误（在异常处理块中），而真正的错误发生在第三个 PDO 语句中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-03T22:31:14.347

`00000`意味着，它工作正常。你应该把你的 if 改成这样：`$sql3 === false`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-12T17:03:18.617

PDO::exec 语句返回一个整数来指示受影响的行数。因此，在您的特定情况下，如 SomeKittens 所示，如果 0 行受到影响，则将触发您的错误代码。

但是，如果您担心您的查询是否有效，您最好的做法可能是使用 PDO::query（就您的代码而言 ($returnObj = $connect->query($sql3) 而不是 PDO::exec。

然后可以检查 $returnObj 以查看 SQL 执行中是否存在错误，然后您可以对 SQL 查询进行故障排除，因为它会告诉您错误是什么以及错误所在的位置。

你最好的选择是：

```
//set PDO to throw an error so you can wrap the query in a try / catch block. 
$connect->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$sql3 = "update news set date='$time' where id='2'";
try {
     $returnObj = $connect->query($sql3);
} catch (PDOException $e) {
    print_r($returnOjb->errorInfo());
    $error = $returnObj->errorInfo();
    die ("Error: (".$error[0].':'.$error[1].') '.$error[2]);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-04T20:11:50.023

我有同样的问题。它也折磨了我很多，但最终想通了。

假设您的表中有**7 列**。

您正在**将数据插入其中的 4**个。

如果对于剩余的**3 列**未设置默认值（例如`NULL for alpha-numeric columns, CURRENT_TIMESTAMP for date-time related columns etc.`），则会出现上述问题。

如果您将数据插入**所有这 7 列**或***至少*在未设置默认值的那些列中**，您将不会收到任何错误并且数据将被插入。

# python - web.py 总是将变量转换为字符串

> ID：11813914
> 
> 赞同：0
> 
> 时间：2012-08-05T04:14:51.803
> 
> 标签：python, web.py

我正在使用 web.py 创建一个站点，并在后端和前端模板之间传递配置值和常用函数我正在使用自定义类对象。我正在使用基本模板，但无法弄清楚如何将变量传递给基本模板，所以我只是将它传递给子模板，然后执行

```
$var o: $:obj 
```

但是在基本模板中访问它时，我得到

```
<object.object instance at 0x12345678> 
```

而且我无法弄清楚我做错了什么。我在对变量的所有引用之前添加了“：”，但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:54:55.523

这应该这样做：

```
$var o = obj 
```

# backbone.js - .fetched 集合时主干会触发 .add 吗？

> ID：11813916
> 
> 赞同：5
> 
> 时间：2012-08-05T04:15:29.420
> 
> 标签：backbone.js

我正在转换我的主干应用程序，以便它开始与服务器通信，以前我刚刚使用测试数据填充集合`.add()`

我已经将一些事件绑定到集合添加事件。因此，每次将一个项目添加到集合中时，我都可以渲染视图并更新一些统计信息。

看来，只要我添加`.fetch()`从服务器获取数据的调用，添加事件就会停止。

例如

```
var PayableCommitmentCollection = Backbone.Collection.extend({
    model:PayableCommitment,
    url:"/cc/account/contributions/",

    initialize: function() {
        this.bind("add",this.setInitialAmount,this);
    }
 } 
```

`this.SetInitialAmount()`在 fetch 创建集合中的模型后永远不会调用。

我还有 2 个视图正在监视要添加到此集合中的项目，这些项目现在没有更新。

我的明显工作是编写我自己的 AJAX 调用，这样我就可以像迄今为止在开发过程中一样添加项目，但是我确信骨干有智慧来帮助我。

任何人都可以提出一种方法，我可以绑定到 fetch 的完成，或者让它刺激 add 事件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T05:21:38.493

**fetch**方法接受选项的散列。这些选项之一可以是“添加”选项，它在集合上调用**add**而不是**reset**。

```
collection.fetch({ add: true }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-05T04:28:15.260

来自[精美手册](http://backbonejs.org/#Collection-fetch)：

> **拿来** `collection.fetch([options])`
> 
> 从服务器获取此集合的默认模型集，当它们到达时重置集合。

还有一个[`reset`](http://backbonejs.org/#Collection-reset)：

> **重启** `collection.reset(models, [options])`
> 
> 一次添加和删除一个模型很好，但有时您有太多模型要更改，您宁愿只批量更新集合。使用**reset**将集合替换为新的模型列表（或属性哈希），`"reset"`最后触发单个事件。

因此 a`fetch`将触发单个`"reset"`事件而不是一堆`"add"`事件。`setInitialAmount`您需要一个可以绑定到的集合范围的版本`"reset"`。

* * *

在 Backbone 1.0 中，[`Collection#fetch`](http://backbonejs.org/#Collection-fetch)有这样的说法：

> **拿来** `collection.fetch([options])`
> 
> 从服务器获取此集合的默认模型集，当它们到达时将它们设置在集合中。
> [...] **fetch**
> 的行为可以通过使用可用的选项来定制。例如，要获取一个集合，为每个新模型获取一个事件，为每个更改的现有模型获取一个事件，而不删除任何内容：**`set``"add"``"change"``collection.fetch({remove: false})`**

 **因此，如果您使用的是 1.0+，那么您需要做的就是`fetch`使用该`remove: false`选项调用您的。**

# scala - 试图计算对象占用的内存

> ID：11813921
> 
> 赞同：2
> 
> 时间：2012-08-05T04:17:06.977
> 
> 标签：scala, memory, object, runtime

我正在创建对象并将对象从一个演员传递给另一个演员。我需要计算用于在运行时创建对象的内存？？有没有办法做到这一点？

我正在尝试做这样的事情。

```
var x = Runtime.getRuntime().totalmemory()
object.create() // my function to create an instance of an object
var y = Runtime.getRuntime().freememory()
val memoryUsedForCreatingObject = x - y 
```

你认为这是正确的做法吗？？它会给我正确的结果吗？请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T04:34:07.150

您最好的选择可能是 JAMM：[https ://github.com/jbellis/jamm/](https://github.com/jbellis/jamm/)

# timer - 我怎样才能让 goog.Timer 更精确？

> ID：11813922
> 
> 赞同：2
> 
> 时间：2012-08-05T04:17:10.743
> 
> 标签：timer, google-closure, google-closure-library

我创建了一个`goog.Timer`对象（[http://closure-library.googlecode.com/svn/docs/class_goog_Timer.html](http://closure-library.googlecode.com/svn/docs/class_goog_Timer.html)），`new goog.Timer(1)`通过监听滴答事件每毫秒运行一个函数。但是，该函数似乎每 100 毫秒运行一次。

我假设我的函数需要一段时间才能运行（当然 javascript 是单线程的），所以需要一段时间才能进入下一轮。因此，我将计时器的间隔设置为 100，并且它每 1/10 秒可靠地运行一次。

Google Closure 库是否有一个更可靠的计时器，它只在间隔精确地运行一个函数？如果没有足够的时间在一个周期内运行一个函数，我可以取消上一个调用并在下一次分派滴答时运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T05:38:51.617

Nicholas Zakas在他的博客上写了一篇***[关于浏览器中计时器分辨率的精彩总结。](http://www.nczonline.net/blog/2011/12/14/timer-resolution-in-browsers/)***正如 Nicholas 指出的那样，[HTML5 计时器规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#timers)（截至 2012 年 8 月 2 日）规定 和 的最小间隔为`setTimeout()`4`setInterval()`毫秒。

我编写了以下演示应用程序来测试`goog.Timer`.

```
<!doctype html>
<html>
<head>
  <title>goog.Timer Test</title>
  <script src="../closure-library/closure/goog/base.js"></script>
</head>
<body>

<h1>goog.Timer Test</h1>

<div id="mainContent"></div>

<script>
  goog.require('goog.Timer');
</script>
<script>
  var tickCount = 0;
  var timer = new goog.Timer(1);
  var mainDiv = document.querySelector('#mainContent');

  /**
   * Tick callback.
   */
  var tickCounter = function() {
    tickCount++;
    if (tickCount % 1000 === 0) {
      var timeElapsed = goog.now() - startTime;
      mainDiv.innerHTML = 'goog.Timer tick events: ' + tickCount +
          '<br>actual elapsed milliseconds: ' + timeElapsed +
          '<br>milliseconds per goog.Timer tick: ' + timeElapsed/tickCount;
    }
  };

  startTime = goog.now();
  timer.start();
  goog.events.listen(timer, goog.Timer.TICK, tickCounter);
</script>
</body>
</html> 
```

在 Chrome 版本 21 中运行该程序始终显示每个`goog.Timer`滴答事件大约 4.2 毫秒，这非常接近 4 毫秒的最小允许浏览器计时器分辨率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T04:47:18.953

我不知道 goog 计时器，但这在我的模拟器中有效。在我告诉它之后它停止了 3 毫秒。

```
public Timer gameTimer;
int i = 1;
TextView TVsource;//You still have to assign this to a layout view in onCreate

public void runTimer() {

    gameTimer = new Timer();
    gameTimer.schedule(new TimerTask() {
        @Override
        public void run() {
            if (i < 5000) {
                TimerMethod();
            }
        }
    }, 1000, 1);
}

public void TimerMethod() {
    this.runOnUiThread(Timer_Tick);
}

private Runnable Timer_Tick = new Runnable() {
    public void run() {
        i++;
        TVsource.setText("its " + i);
    }
}; 
```

PS我刚刚意识到这是一个javascript问题，但到底是什么？试试看。

# android - Google Drive Android 集成示例

> ID：11813926
> 
> 赞同：3
> 
> 时间：2012-08-05T04:18:44.340
> 
> 标签：android, google-drive-api

是否有将 Google Drive 与 Android 集成的示例？我现在使用 Dropbox，他们的 Android SDK 很容易集成。对于 Google Drive，我发现所有的示例都是针对网络应用的，而不是针对 Android 的。谁能分享一些适用于 Android 的 Google Drive 示例？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T12:35:33.900

我有一个创建文件然后与其他应用程序共享的应用程序。我使用选择器让用户决定与哪个应用程序共享。将文件类型设置为“multipart/*”，然后 Google Drive 可以获取它，Dropbox、EverNote、Bump 和许多其他工具也可以——所有这些都没有那种烦人的授权废话，你和你的用户在这些应用程序时已经隐含地做了这些安装在设备上

```
 Intent intent = new Intent(android.content.Intent.ACTION_SEND);
            intent.putExtra(Intent.EXTRA_STREAM, Uri.parse ("file://" + filePath));

    intent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
    intent.putExtra(android.content.Intent.EXTRA_TEXT, text);
    intent.setType("multipart/*");
        startActivity(Intent.createChooser(intent, text)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:21:58.537

1) Android 示例使用了我刚刚意识到仍未启动的 Google Play 服务。

2）虽然有一个完整驱动器访问权限的授权范围[https://developers.google.com/drive/scopes#requesting_full_drive_scope_for_an_app](https://developers.google.com/drive/scopes#requesting_full_drive_scope_for_an_app)但所有驱动器 API 似乎都是基于网络的，我认为设备 OAuth 令牌不会起作用，尤其是在此页面上的警告[https://developers.google.com/drive/register](https://developers.google.com/drive/register)：

> 重要提示：在标记为 OAuth 客户端 ID（必填）的字段中，确保您为 Web 应用程序使用有效的客户端 ID，或为服务帐户或已安装的应用程序使用其他有效的客户端 ID。这些在 API 访问选项卡中的 API 项目的 Google API 控制台中列出。请勿使用 Drive SDK 的客户端 ID，该 ID 是为将来的功能开发保留的

猜测是他们正在计划未来的设备级 SDK。

# c - C函数指针

> ID：11813934
> 
> 赞同：0
> 
> 时间：2012-08-05T04:20:07.593
> 
> 标签：c, function-pointers

有一个函数接受表单的函数指针参数，`void *(*func)(void *)`我正在阅读一些使用以下参数调用它的代码`(void *(*)(void *))(-1)`。

这只是转换`-1`为正确的函数指针类型还是其他？我不确定这意味着什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T04:22:18.910

是的，这只是一个类型转换。但是，如果没有在上下文中查看代码，则实际上不可能确定*为什么*有人会这样做。[`cdecl`](http://linux.die.net/man/1/cdecl)用它来回答这样的问题通常很方便：

```
$ cdecl
Type `help' or `?' for help
cdecl> explain (void *(*)(void *))
cast unknown_name into pointer to function (pointer to void) returning pointer to void 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T04:22:58.237

是的。它试图将 -1 转换为通常不应该执行的函数指针类型（除非那里有一些真正有效的理由和逻辑）。

# c++ - 可以使用 type_traits / SFINAE 来查找类是否定义了成员 TYPE？

> ID：11813940
> 
> 赞同：15
> 
> 时间：2012-08-05T04:22:17.580
> 
> 标签：c++, c++11, template-meta-programming, sfinae

我见过这个[问题](https://stackoverflow.com/questions/257288/is-it-possible-to-write-a-c-template-to-check-for-a-functions-existence)，它允许人们检查**成员函数**的存在，但我试图找出一个类是否有**成员类型**。

在下面的示例中，两者都评估为“false”，但我想找到一种方法，以便`has_bar<foo1>::value`评估为 false 并`has_bar<foo2>::value`评估为**true**。

这可能吗？

```
#include <iostream>

struct foo1;
struct foo2 { typedef int bar; };

template <typename T>
class has_bar
{
    typedef char yes;
    typedef long no;

    template <typename C> static yes check( decltype(&C::bar) ) ;
    template <typename C> static no  check(...);
public:
    enum { value = sizeof(check<T>(0)) == sizeof(yes) };
};

int main()
{
    std::cout << has_bar<foo1>::value << std::endl;
    std::cout << has_bar<foo2>::value << std::endl;
    return 0;
} 
```

**编辑：针对以下答案实施专业化：**

> ...如果您在目标模板中使用 C::bar ，对于没有该嵌套类型的类型，该模板将被自动丢弃。

我试图这样做，但显然缺少一些东西

```
#include <iostream>

struct foo1;
struct foo2 { typedef int bar; };

template <typename T, typename U = void>
struct target
{
    target()
    {
        std::cout << "default target" << std::endl;
    }
};

template<typename T>
struct target<T, typename T::bar>
{
    target()
    {
        std::cout << "specialized target" << std::endl;
    }
};

int main()
{
    target<foo1>();
    target<foo2>();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-05T13:54:54.750

试试这个

```
template<class T>
struct Void {
  typedef void type;
};

template<class T, class U = void>
struct has_bar {
    enum { value = 0 };
};

template<class T>
struct has_bar<T, typename Void<typename T::bar>::type > {
    enum { value = 1 };
}; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-05T04:54:51.703

您无法获得指向类型成员的成员的指针：

```
template <typename C> static yes check( decltype(&C::bar) ) ; 
```

子表达式只有在是 的非类型成员`&C::bar`时才有效。但是你需要检查的是它是否是*type*。对模板的最小更改可能是：`bar``C`

 *```
template <typename C> static yes check( typename C::bar* ) ; 
```

如果`bar`是 的嵌套类型`C`，则该函数重载将是一个有效的候选者（0 将是指向任何`C::bar`类型的指针），但如果`C`不包含嵌套`bar`，则它将被丢弃，第二个测试将是唯一的候选者.

关于是否需要该特征还有一个不同的问题，因为如果您`C::bar`在目标模板中使用，那么对于没有该嵌套类型的类型，该模板将被自动丢弃。

* * *

*编辑*

我的意思是，在您的方法中，您需要为每个可能的嵌套类型创建一个特征，只是为了生成一个包含或不包含嵌套类型（`enable_if`）的模板。让我们采用不同的方法......首先我们定义一个通用实用程序来根据条件选择类型，这不是这个问题所*必需*的，更简单的`template <typename T> void_type { typedef void type; };`就足够了，但实用程序模板在其他情况下可能很有用：

```
// General utility: if_<Condition, Then, Else>::type
// Selects 'Then' or 'Else' type based on the value of 
// the 'Condition'
template <bool Condition, typename Then, typename Else = void>
struct if_ {
   typedef Then type;
};
template <typename Then, typename Else>
struct if_<false, Then, Else > {
   typedef Else type;
}; 
```

现在 se 只需将 SFINAE 用于类模板专业化：

```
template <typename T, typename _ = void> 
struct target {
   // generic implementation
};

template <typename T>
struct target<T, typename if_<false,typename T::bar>::type> {
   // specialization for types holding a nested type `T::bar`
}; 
```

请注意，与您的方法的主要区别在于使用额外的中间模板（替换将失败的模板 - 并且不是错误），该模板会产生一个`void`类型（成功时）。这就是为什么`void_type`上面的模板也可以工作的原因：你只需要使用嵌套类型作为模板的参数，并且失败了，你并不关心模板做什么，只要评估是嵌套的`type`（必须是`void`）如果它成功了。

如果不是很明显（起初对我来说不是）为什么您的方法不起作用，请考虑编译器遇到时需要做什么`target<foo2>`：第一步是发现有一个名为 的模板`target`，但是该模板接受两个参数，其中只提供了一个。然后它查看*基本模板*（未专门化的模板）并发现第二个参数可以默认为`void`. 从这一点开始，它将认为您的实例化为：（`target<foo2,void>`在注入默认参数之后）。它会尽量匹配最好的专业。仅考虑第二个参数*所* `void`针对的特化。`T::bar`如果是，您上面的模板将只能使用专用版本`void`（您可以通过更改为*来*测试`foo2`：*总是*作为嵌套类型产生。`struct foo2 { typedef void bar; }`*`void``C::bar``bar`*`void`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-27T13:38:14.340

我更喜欢将它包装在宏中。

测试.h：

```
#include <type_traits>

template<typename ...>
struct void_type
{
     using type = void;
};

template<typename ...T>
using void_t = typename void_type<T...>::type;

#define HAS_TYPE(NAME) \
template<typename, typename = void> \
struct has_type_##NAME: std::false_type \
{}; \
template<typename T> \
struct has_type_##NAME<T, void_t<typename T::NAME>>: std::true_type \
{} \

HAS_TYPE(bar); 
```

测试.cpp：

```
#include <iostream>

struct foo1;
struct foo2 { typedef int bar; };

int main()
{
    std::cout << has_type_bar<foo1>::value << std::endl;
    std::cout << has_type_bar<foo2>::value << std::endl;
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-01T10:27:52.777

C++20 更新：

现在检查给定类型是否包含特定类型定义变得更加容易。

```
template<typename T>
concept has_bar = requires {
    typename  T::bar;
}; 
```

...因此您的示例代码演变为：

```
#include <iostream>

struct foo1;
struct foo2 { typedef int bar; };

template <typename T, typename U = void>
struct target
{
    target()
    {
        std::cout << "default target" << std::endl;
    }
};

template<typename T>
requires(has_bar<T>)
struct target<T>
{
    target()
    {
        std::cout << "specialized target" << std::endl;
    }
};

int main()
{
    target<foo1>();
    target<foo2>();
    return 0;
} 
```

gcc.godbolt 示例：[https ://gcc.godbolt.org/z/a15G13](https://gcc.godbolt.org/z/a15G13)***

# c# - WPF tetbox 数据绑定选项

> ID：11813945
> 
> 赞同：0
> 
> 时间：2012-08-05T04:23:05.650
> 
> 标签：c#, wpf, xaml, data-binding, textbox

```
<TextBox Name="txtSearch" Margin="0,0,0,0"  Height="20" Width="215"  AcceptsReturn="True"              TextChanged="txtSearch_TextChanged" ></TextBox> 
```

`Path`绑定和绑定有什么区别`ElementName`：

```
<TextBox Name="txtFind" Text="{Binding Path=txtSearch}"></TextBox> 
```

和

```
<TextBox Name="txtFind" Text="{Binding ElementName=txtSearch}"></TextBox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T05:02:47.670

一个引用对象的名称，另一个引用该对象的属性。你应该有的是这样的：

```
<TextBox Name="txtFind" Text="{Binding ElementName=txtSearch, Path=Text}"></TextBox> 
```

这更有意义。

# javascript - 如何加载 HTML SVG even when hidden I need to wait for a certain object to load while it is hidden. But what appears to be happening, is that it only loads without the display:none; I'm using jQuery, and I tried p 问问题 问问题 2012-08-05T04:23:06.817 2906 次 This question shows research effort; it is useful and clear 5 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I need to wait for a certain object to load while it is hidden. But what appears to be happening, is that it only loads without the display:none; I'm using jQuery, and I tried putting the .load on the object to call a function when it loads, but seems that it will not load, because it's hidden. Is there a way of 'forcing' the load of the Object, or, another way to 'hide' but still loading? How to do it correcly: use visibility: hidden instead of display: none as explained here: http://www.w3.org/TR/SVG/painting.html#VisibilityProperty When the ‘display’ property is set to none, then the given element does not become part of the rendering tree. With ‘visibility’ set to hidden, however, processing occurs as if the element were part of the rendering tree Prevent Javascript Injection I have a website that uses a captcha. http://blog.lukeblackamore.com/2009/10/sexy-captcha-new-drag-and-drop-captcha.html But the problem is that it can be cracked easily using Javascript injection through: var res=document.querySelector(".targetWrapper .target").style["background- position"].match(/\d+/); [].map.call(document.querySelectorAll(".draggable"),function(a){ if(a.style["background-position"].match(/\d+/)[0]==res){ return document.querySelector(".captchaAnswer").value=a.id } }); How can I prevent this? javascriptjqueryhtmlsvg 4 3 回答 3 This answer is useful 3 如何正确操作： 使用visibility: hidden而不是display: none 如此处所述：http: //www.w3.org/TR/SVG/painting.html#VisibilityProperty 当 'display' 属性设置为 none 时，给定元素不会成为渲染树的一部分。但是，将“可见性”设置为隐藏时，会像元素是渲染树的一部分一样进行处理 感谢@SomeKittens 于 2012-08-05T04:52:54.977 回答 This answer is useful 3 将其加载到屏幕外，style="position:absolute;left:100000px" 于 2012-08-05T04:29:26.513 回答 This answer is useful 2 It seems that an SVG will not be rendered if the element is set to display:none. It's possible to load every element individually with JS as shown in this answer. 于 2012-08-05T04:46:28.477 回答 Related 2 java - 使用 GWT 和 GAE 进行 JUnit 测试 1 spring - 我的 Spring 应用程序泄漏数据库连接，而我使用默认 Roo 配置 1 macos-carbon - 山狮中的RegisterEventHotKey CMD+TAB 1 vb.net - VB.NET 在创建时填写对象字段 2 clojure - 使用闭包进行数据封装 1 java - Android DownloadManager 以原始名称保存文件 3 oracle - Oracle：强制使用索引 3 c++ - 为什么强制转换 vararg 函数参数很重要？ 1 java - Primefaces 数据表中的 ENUM 样式 1 c++ - 范围、运算符、功能错误需要帮助 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11813946
> 
> 赞同：5
> 
> 时间：
> 
> 标签：javascript, jquery, html, svg

I need to wait for a certain object to load while it is hidden. But what appears to be happening, is that it only loads without the `display:none`;

I'm using jQuery, and I tried putting the `.load` on the object to call a function when it loads, but seems that it will not load, because it's hidden.

Is there a way of 'forcing' the load of the Object, or, another way to 'hide' but still loading?

How to do it correcly:

use `visibility: hidden` instead of `display: none`

as explained here: [http://www.w3.org/TR/SVG/painting.html#VisibilityProperty](http://www.w3.org/TR/SVG/painting.html#VisibilityProperty)

> When the ‘display’ property is set to none, then the given element does not become part of the rendering tree. With ‘visibility’ set to hidden, however, processing occurs as if the element were part of the rendering tree

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T04:52:54.977

如何正确操作：

使用`visibility: hidden`而不是`display: none`

如此处所述：http: [//www.w3.org/TR/SVG/painting.html#VisibilityProperty](http://www.w3.org/TR/SVG/painting.html#VisibilityProperty)

> 当 'display' 属性设置为 none 时，给定元素不会成为渲染树的一部分。但是，将“可见性”设置为隐藏时，会像元素是渲染树的一部分一样进行处理

感谢@SomeKittens

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T04:29:26.513

将其加载到屏幕外，`style="position:absolute;left:100000px"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T04:46:28.477

It seems that an SVG [will not be rendered](http://www.w3.org/TR/SVG/painting.html) if the element is set to `display:none`. It's possible to load every element individually with JS as shown in [this answer.](https://stackoverflow.com/a/3910130/1216976)

# javascript - 防止 Javascript 注入

> ID：11813947
> 
> 赞同：-1
> 
> 时间：2012-08-05T04:23:24.710
> 
> 标签：javascript, code-injection

我有一个使用验证码的网站。 [http://blog.lukeblackamore.com/2009/10/sexy-captcha-new-drag-and-drop-captcha.html](http://blog.lukeblackamore.com/2009/10/sexy-captcha-new-drag-and-drop-captcha.html) 但问题是它可以通过以下方式使用Javascript注入轻松破解：

```
var res=document.querySelector(".targetWrapper .target").style["background-    position"].match(/\d+/);
[].map.call(document.querySelectorAll(".draggable"),function(a){
if(a.style["background-position"].match(/\d+/)[0]==res){
return document.querySelector(".captchaAnswer").value=a.id
}
}); 
```

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T04:34:01.353

最简单的解决方案是使用没有已知安全漏洞的验证码。我推荐谷歌的[reCAPTCHA](http://www.google.com/recaptcha)。

# c++ - C++ RSA Signing

> ID：11813948
> 
> 赞同：1
> 
> 时间：2012-08-05T04:23:25.907
> 
> 标签：c++, rsa, digital-signature

I am trying to sign some data with given RSA parameters.

I am given Modulus, Exponent, D, DP, DQ, P, Q, and InverseQ. What library or methods would be the easiest and simplest to use to compute this signature. In C#, they have a specific method for signing data once you give parameters. Again, I am looking for simplicity and possibly just a straight up header and cpp file if possible. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T05:52:42.777

虽然我自己从未使用过它，但[Crypto++](http://www.cryptopp.com)库应该可以满足您的需求。

他们的 wiki 有一个 RSA 签名示例：[http ://www.cryptopp.com/wiki/RSA_Cryptography#RSA_Signature_Scheme_.28PKCS_v1.5.29](http://www.cryptopp.com/wiki/RSA_Cryptography#RSA_Signature_Scheme_.28PKCS_v1.5.29)

对于签名，您当然只需要私钥。

# python - Why does the object type of a ManyToMany field change after initialization in django?

> ID：11813949
> 
> 赞同：0
> 
> 时间：2012-08-05T04:23:29.970
> 
> 标签：python, django, django-models, many-to-many

Ok, so I am trying verify in my unittest that a certain field is a ManyToManyField object. Here is the original class, followed by the relevant unit testing code:

```
class Course(models.Model):
    name = models.CharField(max_length=150)
    studyunits = models.ManyToManyField(StudyUnit)

class CourseManyToManyTest(VocabTestCase):
    fixtures = ['m2mtest.json']

    def setUp(self):
        self.course = Course.objects.create(name="Course2")
        self.studyunit1 = StudyUnit.objects.all()[0]
        self.studyunit2 = StudyUnit.objects.all()[1]

    def testStudyUnitsAddDelete(self):
        self.assertIsInstance(self.course.studyunits, models.ManyToManyField) 
```

That test fails with the following error:

```
self.assertIsInstance(self.course.studyunits, models.ManyToManyField)
AssertionError: <django.db.models.fields.related.ManyRelatedManager object at 0x102853690>      is not an instance of <class 'django.db.models.fields.related.ManyToManyField'> 
```

I know it seems stupid to verify this, but I found this bug in trying to extend the ManyToManyField, and now I am curious why the object's class changes. Seems a bit too magical, what is the explanation?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:33:53.297

Django 中的字段是[描述符](http://docs.python.org/howto/descriptor.html)，它们不返回自身，而是该字段保存或表示的对象（例如，`IntegerField`返回整数）。

# c++ - Dependency injection ; good practices to reduce boilerplate code

> ID：11813950
> 
> 赞同：1
> 
> 时间：2012-08-05T04:23:43.730
> 
> 标签：c++, dependency-injection

I have a simple question, and I'm not even sure it has an answer but let's try. I'm coding in C++, and using dependency injection to avoid global state. This works quite well, and I don't run in unexpected/undefined behaviours very often.

However I realise that, as my project grows I'm writing a lot of code which I consider boilerplate. Worse : the fact there is more boilerplate code, than actual code makes it sometimes hard to understand.

Nothing beats a good example so let's go :

I have a class called TimeFactory which creates Time objects.

*For more details (not sure it's relevant) : Time objects are quite complex because the Time can have different formats, and conversion between them is neither linear, nor straightforward. Each "Time" contains a Synchronizer to handle conversions, and to make sure they have the same, properly initialized, synchronizer, I use a TimeFactory. The TimeFactory has only one instance and is application wide, so it would qualify for singleton but, because it's mutable, I don't want to make it a singleton*

In my app, a lot of classes need to create Time objects. Sometimes those classes are deeply nested.

Let's say I have a class A which contains instances of class B, and so on up to class D. Class D need to create Time objects.

In my naive implementation, I pass the TimeFactory to the constructor of class A, which passes it to the constructor of class B and so on until class D.

Now, imagine I have a couple of classes like TimeFactory and a couple of class hierarchies like the one above : I loose all the flexibility and readability I'm suppose to get using dependency injection.

I'm starting to wonder if there isn't a major design flaw in my app ... Or is this a necessary evil of using dependency injection ?

What do you think ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T16:53:07.357

> 在我的幼稚实现中，我将 TimeFactory 传递给 A 类的构造函数，后者将其传递给 B 类的构造函数，依此类推，直到 D 类。

这是依赖注入的常见误用。除非 A 类直接使用 TimeFactory，否则它永远不会看到、知道或访问 TimeFactory。D 实例应使用 TimeFactory 构造。然后应该用你刚刚构建的 D 实例来构建 C 实例。然后是 B 和 C，最后是 A 和 B。现在您有一个 A 实例，它间接拥有一个可以访问 TimeFactory 的 D 实例，而 A 实例从未看到 TimeFactory 直接传递给它。

[Miško Hevery 在此视频](http://www.youtube.com/watch?v=RlfLCWKxHJ0&feature=player_detailpage#t=1164s)中谈到了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T05:28:02.323

全球状态并不总是邪恶的，如果它是真正的全球性的话。通常存在工程权衡，并且您对依赖注入的使用已经引入了比使用单例接口或全局变量更多的耦合：A 类现在知道 B 类需要 a `TimeFactory`，这通常比 A 类更详细地描述 B 类需要。B类和C类以及C类和D类也是如此。

考虑以下使用单例模式的解决方案：

1.  让`TimeFactory`（抽象）基类提供对应用程序的`TimeFactory 的单例访问：

2.  将该单例设置一次，设置为一个具体的子类`TimeFactory`

3.  拥有使用该单例的所有访问`TimeFactory`权限。

这会创建全局状态，但会使该全局状态的客户端与其实现的任何知识分离。

这是一个潜在实现的草图：

```
class TimeFactory
{
  public:
  // ...
  static TimeFactory* getSingleton(void) { return singleton; }

  // ...
  protected:
  void setAsSingleton(void)
  {
    if (singleton != NULL) {
      // handle case where multiple TimeFactory implementations are created
      throw std::exception();  // possibly by throwing
    }
    singleton = this; 
  }

  private:
  static TimeFactory* singleton = NULL;
}; 
```

每次`TimeFactory`实例化 的子类时，您都`setAsSingleton`可以在其构造函数或其他地方调用它。

# knockout.js - Knockout if statement ignored when adding new content to viewmodel

> ID：11813951
> 
> 赞同：0
> 
> 时间：2012-08-05T04:23:48.453
> 
> 标签：knockout.js, knockout-2.0

This is my last knockout question :)

I have an if statement setup and is working when the page is loaded for the first time however whenever I try adding any new items to my view model the if statement is not fired.

My [JS fiddle](http://jsfiddle.net/spnz/wR6mb/1/)

Why does it work when I initialize the viewmodel the first time however not when adding other items. I dont get any errors

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:55:56.810

您需要在 qtype 上使用括号作为 if 表达式的一部分，即：

```
<!-- ko if: qtype() === 'Rating' --> 
```

另外，您不想让您的 arrayMap 迭代器返回您的 Question 视图模型的实例吗？IE：

```
self.questions = ko.observableArray(ko.utils.arrayMap(questions, function(question) {
    return new Question(question.question, question.qtype);
})); 
```

这是一个更新的小提琴：

[http://jsfiddle.net/wR6mb/15/](http://jsfiddle.net/wR6mb/15/)

# java - 从 oracle 过程调用 java 时出现 ClassNotFoundException

> ID：11813958
> 
> 赞同：1
> 
> 时间：2012-08-05T04:25:30.447
> 
> 标签：java, oracle, exception, classnotfoundexception, procedure

这是我的预言`procedure`：

```
FUNCTION JavaHefExtract_runSingle (
    p_company_cd        varchar2,
    p_srcConnString     varchar2,
    p_destConnString    varchar2,
    p_mode              number,
    p_period            number
    ) return varchar2
IS
LANGUAGE JAVA
NAME 'HefExtract.DoIt(java.lang.String, java.lang.String, java.lang.String, int, int ) return java.lang.String'; 
```

这是我的java `function`：

```
import com.microsoft.sqlserver.jdbc.*;
import java.math.BigInteger;
import java.sql.*;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Enumeration;
import oracle.jdbc.*;
import java.io.*;

public class HefExtract
{

 public static String DoIt(String orgName, String oracleConnstring, String sqlConnstring, int typ, int iPeriod )
    {
        String errMsg = null;
        Connection sqlConn;
        Connection oracleConn;
        try
        {
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
            Class.forName("oracle.jdbc.OracleDriver");
            if (oracleConnstring != null)
                oracleConn = DriverManager.getConnection(oracleConnstring);
            else
                oracleConn = new OracleDriver().defaultConnection();
            sqlConn = DriverManager.getConnection(sqlConnstring);
        } catch (Throwable e1) {
            CharArrayWriter byteSink = new CharArrayWriter();
            e1.printStackTrace(new PrintWriter(byteSink));
            return byteSink.toString();
        }
        return errMsg;
}
} 
```

`procedure`当我在块中调用 oracle时，`PL/SQL`会返回此错误：

> java.lang.ClassNotFoundException: com/microsoft/sqlserver/jdbc/SQLServerDriver at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java) at HefExtract.DoIt(HEFEXTRACT:415)

此错误背后的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:11:38.340

据我所知，在您的情况下不需要使用 Microsoft SQL Server 驱动程序。只需删除与 Microsoft 驱动程序有关的所有内容，即删除这些行：

```
import com.microsoft.sqlserver.jdbc.*;

Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:26:59.040

浏览这篇关于如何设置类路径的 Wiki 文章，其中有很多示例。[http://en.wikipedia.org/wiki/Classpath_(Java](http://en.wikipedia.org/wiki/Classpath_(Java) )

如果您使用的是 Eclipse 选择 Project -> Properties -> Project Build Path -> Java Libraries 找到 jar 文件并选择它

如果您使用的是 netbeans 选择项目 -> 属性 -> 库 -> 编译找到 jar 并选择它

这篇[文章](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:371818151299)也可能有助于解决您的问题

# jquery - 将 HTML 的值传递给 jQuery 文件

> ID：11813965
> 
> 赞同：-3
> 
> 时间：2012-08-05T04:27:42.537
> 
> 标签：jquery, html, youtube

我有一个这样的脚本，它运行良好！

```
<div id="player"></div> 
```

jQuery文件：

```
$(document).ready(function(){
    //You can alternatively pass an object:

    $('#player').youTubeEmbed({
        video       : 'http://www.youtube.com/watch?v=uyeJXKfAcpc',
        width       : 640,      // Height is calculated automatically
        progressBar : true      // Hide the progress bar
    });
}); 
```

但现在我想在这样的输入值中制作 youtube id：

```
<div id="player">
    <input type="hidden" name="youtube-id" value="uyeJXKfAcpc" />
</div> 
```

并将其传递给 jquery 是这样的：

```
$(document).ready(function(){
    //You can alternatively pass an object:
    $('#player').youTubeEmbed({
        var yid = $(this).children("input[name='youtube-id']"),
        video       : 'http://www.youtube.com/watch?v=' . yid,
        width       : 640,      // Height is calculated automatically
        progressBar : true      // Hide the progress bar
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T04:39:46.227

You are declaring a variable inside an object, move it to above the `youTubeEmbed` plugin, also use the [`.val()`](http://api.jquery.com/val/) method to access the input's value.

```
var yid = $("input[name='youtube-id']").val();
$('#player').youTubeEmbed({
    video           : 'http://www.youtube.com/watch?v=' + yid,
    width           : 640,      // Height is calculated automatically
    progressBar : true      // Hide the progress bar
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:29:16.250

根本不需要使用输入。做 -

```
<div id="player" data-youtube="uyeJXKfAcpc"></div> 
```

你的 jQuery -

```
$('#player').youTubeEmbed({
    video: 'http://www.youtube.com/watch?v=' + $(this).attr('data-youtube'),
    width: 640,
    progressBar: true
}); 
```

# css - 具有现有样式表的应用程序的 CSS 框架

> ID：11813969
> 
> 赞同：28
> 
> 时间：2012-08-05T04:28:47.300
> 
> 标签：css, jquery-ui, twitter-bootstrap

我正在构建一个 chrome 扩展，它将一个小部件之类的东西附加到 gmail 消息。当用户在 gmail.com 网站上时，它会出现在每封电子邮件（类似于 gmail 上下文小工具）下方。

我查看了一些在我的应用程序中使用的 css 框架，例如 twitter bootstrap。当我在 mywidget 中使用它时，由于 css 类名冲突，它与现有的 gmail 样式混淆了。在没有名称冲突的情况下，我可以使用任何其他框架吗？我遇到了 jquery-ui 框架。这里的所有类名都以 .ui-* 开头，因此不会导致名称冲突。有没有像这样具有唯一类名的其他 css 框架？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-07T08:27:10.430

**更新 2：**这是@GFoley83 提供的 v3.1.1[的要点](http://gist.github.com/GFoley83/7d71fb9605cad6de2a8b)

**更新：**下面加入的 pastebin 是 Twitter Bootstrap**版本 2.0.4**

您应该明确使用[最新版本](https://github.com/twbs/bootstrap/tags)并自己编译。

* * *

这是我对 bootstrap [less](http://lesscss.org) [文件](https://github.com/twbs/bootstrap/tree/master/less)所做的事情：

```
.tw-bs {
    @import "less/bootstrap.less";
} 
```

这就是结果： http: [//pastebin.com/vXgRNDSZ](http://pastebin.com/vXgRNDSZ)

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/BPhrm/)

如果您不喜欢`tw-bs`您可以轻松地进行查找/替换，则不应该有任何冲突。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-11T08:20:19.563

我使用了@Sherbrow 解决方案，但也必须添加响应文件。

```
.my-bootstrap-container {
     @import "less/bootstrap.less";
     @import "less/responsive.less";
} 
```

然后运行

```
node_modules/less/bin/lessc demo.less -x > demo.css 
```

如果有人需要完整的分步教程如何为您自己的命名空间容器编译引导程序，我发表了一篇关于它的博客文章[http://joomla.digital-peak.com/blog/151-how-to-add-bootstrap-to -your-joomla-2-5-扩展](http://joomla.digital-peak.com/blog/151-how-to-add-bootstrap-to-your-joomla-2-5-extension)

最后一部分用于 Joomla，但开头可以在全球范围内使用。它还有一个指向最新编译的引导程序版本 2.3.2 的链接。只需搜索并替换*.dp-container 即可*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-03T06:21:01.953

2016 更新：未来缓解此问题的方法（而不是必须重新编译引导程序）是利用 Web 组件，特别是影子 DOM。这允许您的应用程序是自包含的（几乎就像 iFrame），而 Web 浏览器不必打开单独的页面/失去页面之间通信的能力。

说你的组件包含在`<div id='plugin'>...</div>`

您可以将该 div 中的内容移动到您脑海中的标签中，例如。

```
<template id="template"><!--Your Code Here--></template> 
```

您的模板可以包含您想要的所有引导链接标签和 js。然后在你的 javascript/bookmarklet 中，你可以写

```
var pluginRoot = document.querySelector('plugin').createShadowRoot();
var template = document.querySelector('#template');
var clone = document.importNode(template.content, true);
pluginRoot.appendChild(clone); 
```

您可以在此处阅读有关 Web 组件（以及 Shadow DOM）的更多信息：[http ://webcomponents.org/articles/introduction-to-shadow-dom/](http://webcomponents.org/articles/introduction-to-shadow-dom/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T17:37:52.867

我开始使用 jquery ui - [http://jqueryui.com/](http://jqueryui.com/)因为它有自己的不与 gmail 冲突的 css 类。YUI 是我发现的另一个这样的框架。但是 Sherbrow 展示了我如何使用带有我们自己独特的 css 样式名称的 bootstrap css。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-15T11:12:30.167

当前接受的答案没有正确呈现表单（使用 SASS 和 bootstrap 4 beta）。以下对我有用：

```
.bootstrap {
    @import 'bootstrap-4.0.0-beta/scss/bootstrap.scss';

    box-sizing: border-box;
} 
```

box-sizing 很重要，因为在编译 SASS 样式表时，将生成以下内容。

```
.bootstrap html {
  box-sizing: border-box;
  ...
} 
```

即该`box-sizing`属性将被放置在一个`html`元素内的一个元素上`class="bootstrap"`，当然不会存在。可能还有其他样式`html`，`body`您可能希望手动添加到您的样式中。

现在您可以将使用引导程序设置样式的内容放置在`bootstrap`类中：

```
<div class="bootstrap">
  <div class="container">
    ...
  </div>
</div> 
```

# java - Java 输入输出逻辑

> ID：11813970
> 
> 赞同：0
> 
> 时间：2012-08-05T04:29:11.363
> 
> 标签：java, arrays, logic

首先，我要感谢这个fourm，因为我发现自己在这个论坛上的所有材料以及不同成员给我的所有帮助中都在快速进步。因此，这只是非常感谢您所做的一切。至于我的问题，我一直在尝试输入输出，并想看看这个逻辑是否可行。我试图在适当的数组中获取适当的东西，并想看看这个逻辑是否可以做到。**目前（并且有一段时间）我不会在一个可以有效访问任何虚拟 IDE 的地方，所以这一切都是使用记事本、word 等即时完成的。** **所以不要对我的语法太苛刻。我最关心的是逻辑（如果它可以工作的话），以及代码中的任何重大错误。**

非常感谢。

所以基本上，文本文件是这样的。标题，一行空格，然后是姓名、年龄和工资，分隔符是#。然后在其下方，姓名，年龄和工资分隔符带来＃等。

（假装 Bobby、Sandy、Roger、Eric 和 David 之间没有行空格。所以在 txt 文件中假装他们在彼此下方，但信息和 bobby 之间存在差距。

信息

* * *

> 鲍比#24#5.75
> 
> 桑迪#19#10.22
> 
> 罗杰#27#6.73
> 
> 埃里克#31#8.99
> 
> 大卫#12#3.50**

这是我想出的逻辑。

```
public class Practice {

    public static void main(String[] args) throws Exception {

        String Name [] = new String [5];
        int Age [] = new int [5] ;
        double Wage [] = new double [5];
        String Blank [] = new String [5];   

        FileReader inputfile = new FileReader (new File(info.txt));

        BufferedReader InputBuffer = new BufferedReader (inputfile);

        String Title = InputBuffer.readline (); // to get the title 

        int count = 0;

        while (InputBuffer.readline() = null) { // this while loop grabs the blank under the title 

            Blank [count] = count;

        }

        int i = 0;

        while (InputBuffer.readline() !=null)  {        

            String Getter = InputBuffer.readline (); // reads line 
            String splitup= Getter.split(#);    // splits it 

            Name [i] = splitup[i];  // puts name in this array
            Age [i] = splitup([i]  + 1); // age in this array 
            Wage [i] = splitup([i]  + 2); // wage in this array 

         }

        InputBuffer.close();
    }
} 
```

这种逻辑是否适用于将标题存储在标题字符串中、空白数组下的空白行、名称数组下的姓名、年龄数组下的年龄和工资数组下的工资？

非常感谢。

PS：主要关注最后一个while循环，想知道会不会把name放入name数组，age放入age数组，将工资放入wage数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T05:57:44.427

如果您想在 Java 或任何 OOP 语言方面取得良好进展，您应该始终以面向对象的方式处理问题。

对于手头的问题，您应该始终考虑使用一个类来存储人员信息，而不是使用关联数组。

```
class PersonInfo {

 PersonInfo(String name,int age,float wage) {
  this.name = name;
  this.age = age;
  this.wage = wage;
 }

String name;
int age;
float wage;

} 
```

上面的代码或多或少是相同的......但它应该给出一个 PeopleInfo 列表作为输出。

```
List<PersonInfo> peopleInfo = new ArrayList<String>();
boolean isTitleParsed = false; 
while ( (line = inputBuffer.readLine()) != null ) {

    if (!isTitleParsed) {
        // this is the title
        title = line;
        isTitleParsed = true;
        continue;
    } else if (line.isEmpty()) {
        // this is a blank line; logic for dealing with blank lines here
    } else {
        String[] personData = line.split("#");
        if (personData != null && personData.length == 3) {
            peopleInfo.add(new PersonInfo(personData[0],personData[1],personData[2]));
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:26:54.640

首先，你只需要一个while循环。我不明白为什么你有两个，特别是因为第一个条件是无意义的（`InputBuffer.readline() = null`）。

你的循环看起来像这样：

```
boolean isTitleParsed = false;
String title;
String line;
while ( (line = inputBuffer.readLine()) != null ) {

    if (!isTitleParsed) {
        // this is the title
        title = line;
        isTitleParsed = true;
    } else if (line.isEmpty()) {
        // this is a blank line; logic for dealing with blank lines here
        ...
    } else {
        // this is actual person data
        String[] personData = line.split("#");
        if (personData != null && personData.length == 3) {
            String name = personData[0];
            String age = personData[1];
            String wage = personData[2];
            ...
        }
        ...
    }
} 
```

其次，我认为使用数组是完全错误的方式。就像@AVD 在他对 OP 的评论中提到的那样，`List<T>`POJO 可能是一个更好的解决方案——并且更具可扩展性。

最后：不，正如您编写的那样，您的第二个循环不会成功地将姓名、年龄和工资保存到数组中。你永远不会增加`i`，语法`splitup([i] + 1)`就是错误的。（你可能的意思是`splitup[i+1]`。）

**使用数组**

如果您真的坚持使用数组来保存数据，则必须执行以下操作：

```
String[] names = new String[5];
String[] ages = new String[5];
String[] wages = new String[5];

...

int index = 0;
while ( (line = inputBuffer.readLine()) != null && index < 5) {

    if (!isTitleParsed) {
      ...
    } else if (line.isEmpty()) {
      ...
    } else {
        // this is actual person data
        String[] personData = line.split("#");
        if (personData != null && personData.length == 3) {
            String name = personData[0];
            String age = personData[1];
            String wage = personData[2];

            names[index] = name;
            ages[index] = age;
            wages[index] = wage;
            index++;
        } else {
            System.err.println("Line " + line + " is malformed and was not saved.");
        }
        ...
    }
} 
```

请注意，`index`它在 0 处实例化，但每次我们将某些内容保存到数组时都会递增。这种方式`names[0]`将保留第一个名称，`names[1]`将保留第二个，依此类推。

另请注意，我们将给定记录的名称、年龄和工资都保存在同一索引中。所以我们可以期待`names[0]`持有“Bobby”、`ages[0]`持有“24”和`wages[0]`持有“5.75”——所有这些都与同一个记录有关。

最后，`while`循环中的条件已修改为`(line = inputBuffer.readLine()) != null && index < 5`。这意味着我们将继续循环遍历文件的行，直到我们用完行（文件结束）或我们的索引变得大于 5，这是我们实例化数组的大小。这就是为什么数组是一个如此糟糕的结构来保存这些数据的原因之一：你必须确切地知道你的文件中有多少条记录，并且你最终可能没有完全填充它们（你分配了太多空间）或没有保存一些记录，因为您没有更多空间来存储它们。

**使用 POJO**

保存数据的更好方法是使用 POJO——一个普通的旧 Java 对象。这种对象几乎是一个“数据持有者”对象。

在你的情况下，它会是这样的：

```
public class PersonData {
    private String name;
    private String wage;
    private String age;

    public PersonData() {
        this(null, null, null);
    }

    public PersonData(String name, String wage, String age) {
        this.name = name;
        this.wage = wage;
        this.age = age;
    }

    // ... getters and setters here
} 
```

在您的代码中，您将用对象`List`结构替换数组`PersonData`：

```
List<PersonData> records = new ArrayList<PersonData>(); 
```

在您的 while 循环中，您将保存到这些对象而不是数组中：

```
// in the else in the while loop:
String[] data = line.split("#");
if (data != null && data.length == 3) {
    PersonData record = new PersonData(data[0], data[1], data[2]);    
    records.add(record);
} else {
    // error handling for malformed line
} 
```

现在，如果您想获取特定记录的数据，您只需要从记录列表中提取 PersonData 对象并查询它：

```
// assuming the first record we scraped was "Bobby#24#5.75"
PersonData person = records.get(0);
person.getName(); // returns "Bobby"
person.getAge(); // returns 24
person.getWage(); // returns 5.75 
```

由于我们使用的是列表而不是数组，因此我们不必担心确切知道文件中有多少条记录，并且我们不会冒丢失信息的风险，因为我们没有任何地方可以存储它。

通过这种方式，我们还可以确定姓名、年龄和工资都与同一条记录相关，而之前我们只是希望数组中索引 0 处的所有记录都与同一个人相关。

此外，如果您向记录添加其他数据——例如，name#age#wage#favorite food——您所要做的就是向`PersonData`对象添加一个新字段并在解析方法中添加一行来添加该数据到对象。如果您使用的是数组，则需要添加一个新数组，依此类推。

如果您有一行只有名称或缺少工资等等，那么创建逻辑也容易得多 - 这样您实际上就能够以某种有意义的方式保存数据。

# sql - 在 postgres 中，是否有一种简单的方法可以将多个 attr/val 行选择到一个记录中？

> ID：11813976
> 
> 赞同：1
> 
> 时间：2012-08-05T04:29:53.020
> 
> 标签：sql, postgresql

如果我有

```
create table t1( attr text primary key, val text );
insert into t1 values( 'attr1', 'val1' );
insert into t1 values( 'attr2', 'val3' );
insert into t1 values( 'attr3', 'val3' ); 
```

想`select`返回一排

```
attr1=>val1, attr2=>val2, attr3=>val3 
```

现在在 javascript 中进行转换，但`pg`返回行本身会很好

* * *

## 回答

根据@mu 的回答，查询：

```
select replace( replace( replace( array_agg( hstore( attr, val ) )::text
   '"\"', '"'), 
   '\""', '"'),
   '\"=>\"', '":"')  from t1; 
```

结果是：

```
{"attr1":"val1","attr2":val2","attr3":"val3"} 
```

这是相当不错的 JSON（只要值中没有引号）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T05:40:26.507

我希望它可以`array_to_json`与`array_agg`. 有关用法，请参阅[PostgreSQL 9.2 json 文档，以及支持在 PostgreSQL 9.1 中使用的 JSON 功能直到 9.2 发布的](http://www.postgresql.org/docs/9.2/static/functions-json.html)[json91](https://bitbucket.org/adunstan/json_91)模块，或使用 9.2 beta。

不幸的是，事实证明，此时似乎没有任何对合并、聚合等 json 的支持。这使得构建 JSON 值变得异常困难。我只是用常规的文本运算符来做这件事，但这不允许引用问题。

```
regress=# SELECT '{'||string_agg('"'||attr||'": "'||val||'"', ', ')||'}' FROM t1;
                      ?column?                       
-----------------------------------------------------
 {"attr1": "val1", "attr2": "val3", "attr3": "val3"}
(1 row) 
```

看：

```
regress=# insert into t1 (attr,val) values ('at"tr', 'v"a"l');
INSERT 0 1
regress=# SELECT '{'||string_agg('"'||attr||'": "'||val||'"', ', ')||'}' FROM t1;
                               ?column?                                
-----------------------------------------------------------------------
 {"attr1": "val1", "attr2": "val3", "attr3": "val3", "at"tr": "v"a"l"}
(1 row)

regress=# SELECT ('{'||string_agg('"'||attr||'": "'||val||'"', ', ')||'}')::json FROM t1;
ERROR:  invalid input syntax for type json
DETAIL:  line 1: Token "tr" is invalid. 
```

您添加到答案中的解决方案中存在相同的问题。为了得到一个好的答案，我们需要类似 的函数`json_escape_literal`，目前还没有类似的函数暴露给 SQL。

我在 Pg 的当前 json 功能集上看到的唯一安全方法是生成一个对数组，但这并不比使用普通的面向行的查询更好。

```
regress=# SELECT  array_to_json( array_agg( array_to_json( ARRAY[attr, val] ) )) FROM t1;
                               array_to_json                               
---------------------------------------------------------------------------
 [["attr1","val1"],["attr2","val3"],["attr3","val3"],["at\"tr","v\"a\"l"]] 
```

您可能可以结合使用 hstore 和 json 来做您想做的事，但这就是扩展汤。这真正需要的是一个等效于的 json 对象构造函数，`hstore(text[],text[])`因此您可以执行以下 json 等效项：

```
select hstore( array_agg(attr), array_agg(val) ) from t1; 
```

**更新**：[关于此主题的 pgsql-general 邮件列表帖子](http://archives.postgresql.org/message-id/501E19CE.6070500@ringerc.id.au)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T04:42:46.793

如果您安装了[hstore](http://www.postgresql.org/docs/current/static/hstore.html)，那么您可以使用[`array_agg`](http://www.postgresql.org/docs/current/static/functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE)：

```
select array_agg(attr => val) from t1; 
```

这将为您提供您正在寻找的输出。当然，无论您使用什么接口都必须了解 hstore 和数组，否则您必须自己解压缩结果；如果是这样的话，迭代一个简单的`select attr, val from t1`查询并在 JavaScript 中构建数据结构可能会更简单。

# mysql - 我无法在 MySQL 中创建新用户，也无法访问它

> ID：11813980
> 
> 赞同：1
> 
> 时间：2012-08-05T04:31:12.117
> 
> 标签：mysql, mamp, mysql-error-1045

我在我的 Mac 上安装了 MAMP，也许没有意识到，我一定改变了一些东西，因为每当我进入终端时：

```
/Applications/MAMP/Library/bin/mysql --host=localhost -uroot -    proot 
```

我回来了：

```
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES) 
```

我已经阅读了无数关于有同样问题的人的类似帖子，他们被告知要创建/编辑一个新用户，但如果我不能使用具有特权的用户进入 MySQL，我就不能这样做。

在今天之前，我从未遇到过使用默认密码以 root 访问 MySQL 的任何问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T02:25:59.130

首先，我不得不说，不要使用 MAMPP。继续使用 XAMPP for mac，使用 MAMPP 的问题是它与端口和所有这些东西混淆。此外，除非以其他方式输入，否则您的登录用户名应为“root”，主机为“localhost”，没有密码。

我的建议：考虑获得 XAMPP

# ios - 在 OpenGL 中确定特定透视的轴旋转值

> ID：11813983
> 
> 赞同：1
> 
> 时间：2012-08-05T04:32:04.640
> 
> 标签：ios, opengl-es-2.0

我正在使用 OpenGL ES 2.0 来显示一个 3 维立方体，我以某个视角显示该立方体，并围绕 x、y、z 轴旋转。

```
@interface OpenGLView : UIView

OpenGLView *openGLRotate = [[OpenGLView alloc] initWithFrame:screenBounds];
[openGLRotate setupDisplayLink:NO Face:face Direction:direct];

- (void)setupDisplayLink:(BOOL)bFlag Face:(CubeFace)f Direction:(CubeDirection)d
{
    CADisplayLink* displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(renderRotate:)];
    [displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
} 
```

我想围绕垂直于面部的轴旋转立方体，该轴不是 x、y 或 z 轴。

看到立方体的默认透视已经围绕 x,y,z 轴旋转，围绕特定面的轴旋转涉及同时改变 x,y,z 轴值以达到我正在寻找的效果为了。

```
// code in renderRotate
//[modelView rotateBy:CC3VectorMake(20, -45, -20)]; // default perspective
[modelView rotateBy:CC3VectorMake(20 + x, -45 + y, -20 + z)]; 
```

我已经阅读了有关向量和矩阵以及四元数和欧拉角的内容，我感到更加困惑而不是更少。

我不确定如何确定旋转的 x、y、z 值。任何有关如何计算这些值的指导将不胜感激，或者我应该采取另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:26:46.970

我突然想到，我试图在一个语句中做两件不同且不同的事情。

```
[modelView rotateBy:CC3VectorMake(20 + x, -45 + y, -20 + z)]; 
```

我正在尝试旋转立方体以显示在某个角度，并旋转立方体以获得动态动画。

这些实际上是不相关的轮换，需要单独完成。

首先，我应用旋转来以所需的视角显示立方体；

```
[modelView2 rotateBy:CC3VectorMake(20, -45, -20)]; 
```

然后我为动画应用必要的旋转：

```
[modelView2 rotateBy:CC3VectorMake(x, y, z)]; 
```

我相信（我可能对这里的细节有误）实际旋转以相反的顺序（LIFO）应用，因此动画旋转首先应用在标准 xyz 坐标系中，然后旋转以显示所需的透视.

完美运行。

# installation - 如何使用 Wix 有条件地设置文件扩展名？

> ID：11813986
> 
> 赞同：0
> 
> 时间：2012-08-05T04:33:20.070
> 
> 标签：installation, wix, windows-installer

我想在安装期间有条件地设置文件扩展名。据我了解，为了在 Wix 中有条件地做任何事情，它应该是一个独立的组件。因此，对于我希望允许用户设置的每个文件类型关联，我都有一个类似于以下内容的组件：

```
<Component Id="FileAssocComponent_PS" Guid="DAFE9461-2DF0-934A-F204-6B28CEA23C01">
  <Condition>FILE_ASSOC_PS</Condition>
  <RegistryValue Root="HKLM" Key="SOFTWARE\PrinterApp\Capabilities\FileAssociations" Name=".prn" Value="PrinterApp.ps" Type="string" />
  <RegistryValue Root="HKLM" Key="SOFTWARE\PrinterApp\Capabilities\MIMEAssociations" Name="application/postscript" Value="PrinterApp.ps" Type="string" />
  <RegistryValue Root="HKLM" Key="SOFTWARE\Classes\PrinterApp.ps" Name="FriendlyTypeName" Value="PostScript File" Type="string" />
  <ProgId Id="PrinterApp.ps" Description="PostScript File" Icon="PrinterApp.ico" Advertise="yes">
    <Extension Id="ps">
      <Verb Id="open" Command="Open" Argument="&quot;%1&quot;"/>
    </Extension>
  </ProgId>
</Component> 
```

但这给了我以下错误：

`error LGHT0204: ICE19: Extension: 'ps' advertises component: 'FileAssocComponent_PS'. This component cannot be advertised because the KeyPath type disallows it.`

我已经尝试在其中一个注册表项上设置 KeyPath="yes" ，但这不起作用 - 而且我已经能够找到它期待一个文件 KeyPath. 但这是一个不包含任何文件的组件！

我该如何解决这个错误，或者我是否以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T14:10:08.533

广告组件需要密钥文件，因此这里有一些解决错误的方法。

1)

为组件提供一个不会损害系统的虚假文件 (printermimeinstalled.txt)。

2)

编写 PrinterAppMime.ps 作为该组件的密钥文件。使用 CopyFile 元素将文件复制到 PrinterApp.ps

编写 PrinterAppNoMime.ps（内容相同）作为另一个组件的密钥文件。还可以使用 CopyFile 元素将文件复制到 PrinterApp.ps。给这个组件一个互斥的组件条件，这样只有一个组件会被安装。

3)

稍微改变一下你的应用程序的设计。始终安装 PrinterApp.ps 并有条件地安装 PrinterAppMimeServer.ps。

4)

如果选中该复选框，则消除此自定义操作并使用自定义操作在安装时创建 MSI 临时表行以定义 MIME 内容。

这四种方法中的每一种都有优点和缺点，我个人会选择#3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T00:16:48.230

如果你设置`Advertise="no"`了，你应该能够使用你编写的代码。这是我几年前[在此处](https://stackoverflow.com/questions/138550/how-to-register-file-types-extensions-with-a-wix-installer)发布的一个示例，该示例使用单独的组件进行可选文件关联。

```
<Component ....>
    <ProgId Id="AcmeFoobar.Document" hDescription="ACME XYZ Document">
        <Extension Id="pdf" ContentType="application/xyz">
            <Verb Id="open" Command="Open" TargetFile="[APPLICATIONFOLDER]AcmeFoobar.exe" Argument="%1" />
        </Extension>
    </ProgId>

    <Condition><![CDATA[DEFAULTVIEWER=1]]></Condition>
</Component> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T21:10:53.850

我找到了一个适合我的解决方案。我遇到的问题是我对扩展名与 exe 的关联有一个条件。如果未选中扩展以不关联，我需要安装 exe 组件但没有 progid。问题是，如果对组件设置条件，则不会创建 progid，但也不会安装 exe。我找到的解决方案是两个创建两个组件。一个有条件，一个有互斥条件。这基本上是 Christopher Painters 帖子中的选项 2。

见下文：

```
<Component Id="My.exe" Guid="{D9CF6FDD-1234-4E90-85A1-3BF1F912C1E3}">
   <Condition>NOT FILES_ASSOCIATIONS_ABC</Condition>
    <File Id="My.exe.without_assoc" Name="My.exe" KeyPath="yes" Vital="yes" Compressed="yes" DiskId="1" Source=".\SourceDir\My.exe" />
  </Component>
  <Component Id="My.exe_assoc" Guid="{07F96643-5D74-1234-9DAE-CDEB5AC2D11E}">
    <File Id="My.exe.with_assoc" Name="My.exe" KeyPath="yes" Vital="yes" Compressed="yes" DiskId="1" Source=".\SourceDir\My.exe" />
    <Condition>FILES_ASSOCIATIONS_ABC</Condition>
    <ProgId Id="My.Document" Description="My exe" Icon="MyIcon" Advertise="yes">
      <Extension Id="abc">
        <Verb Id="open" Command="My Exe" Argument="&quot;%1&quot;" />
        <MIME Advertise="yes" ContentType="application/abc" Default="yes" />
      </Extension>
    </ProgId>
  </Component> 
```

# c++ - BMP Creation - C++ ofstream 输出损坏

> ID：11813994
> 
> 赞同：2
> 
> 时间：2012-08-05T04:34:34.123
> 
> 标签：c++, opengl, file-io, bmp

我目前正在为 OpenGL 框架编写 BMP 屏幕截图功能，并且在写入数据时遇到了一个奇怪的问题。与 BMP 标头一起引入的数据`glReadPixels`都是正确的，但似乎该`ofstream.write`操作是随机插入无效值。

以下是图像的正确 BMP（由 Paint 创建）和我的函数制作的 BMP 的摘录，突出显示了不正确的字节。正确的行将永远是第一行。

* * *

**行 0x08C**

```
3B 0D 4A 3A 0A 48 38 08 45 36
3B 0D 4A 3A 0D 0A 48 38 08 45
            ^^ 
```

* * *

**第 0x0DC 行**（此时已减一）

```
3E 2F 07 3D 2E 0A 3F 31 0E 44
07 3E 2F 07 3D 2E 0D 0A 3F 31
                  ^^ 
```

* * *

**第 0x0E68 行**（非常下一行，并关闭两个）

```
35 13 48 3A 10 44 36 0A 3F 31
0E 44 35 13 48 3A 10 44 36 0D
                           ^^ 
```

* * *

所以似乎有一种模式，其中无效值始终是`0x0D`并且它被插入到前面`0x0A`。我不知道为什么会发生这种情况，因为我已经确认来自的标题和数据`glReadPixels`都是正确的。该方法的代码如下。

```
bool captureScreen( const char* name, unsigned originX, unsigned originY, unsigned width, unsigned height )
{

    //...

    GLubyte* imageData = new GLubyte[ width * height * 3 ];
    glReadPixels( originX, originY, width, height, GL_BGR, GL_UNSIGNED_BYTE, imageData );

    //...

    captureAsBMP( imageData, width, height, path.c_str( ) );

    //...
}

bool captureAsBMP( GLubyte* data, GLuint width, GLuint height, const char* path )
{
    std::ofstream stream( path, std::ios_base::out );

    if( !stream.is_open( ) )
        return false;

    unsigned char BMPHeader[ 14 ] = { /* cut for brevity */ };
    unsigned char DIBHeader[ 40 ] = { /* cut for brevity */ };
    unsigned char padding[ 4 ] = { 0x00, 0x00, 0x00, 0x00 };

    unsigned int paddingLength = 4 - (( width * 3 ) % 4);
    paddingLength = ( paddingLength == 4 ? 0 : paddingLength );

    long fileSize = ( width * height * 3 ) + ( paddingLength * height ) + 54;
    long dataSize = fileSize - 54;

    memcpy( &BMPHeader[ 2 ], &fileSize, sizeof( long ) );
    memcpy( &DIBHeader[ 4 ], &width, sizeof( unsigned int ) );
    memcpy( &DIBHeader[ 8 ], &height, sizeof( unsigned int ) );
    memcpy( &DIBHeader[ 20 ], &dataSize, sizeof( long ) );

    stream.write( reinterpret_cast< char* >( BMPHeader ), 14 );
    stream.write( reinterpret_cast< char* >( DIBHeader ), 40 );

    unsigned pos = 0;

    // Write out one row at a time
    for( int i = 0; i < height; i++ )
    {
        stream.write( reinterpret_cast< char* >( &data[ pos ] ), ( width * 3 ) );

        // Is there padding that needs to be added?
        if( paddingLength != 0 )
            stream.write( reinterpret_cast< char* >( padding ), paddingLength );

        // Update where we are in data
        pos += width * 3;
    }

    stream.close( );

    return true;
} 
```

另外值得注意的是，有问题的图像是 800x600，因此此错误发生在行的第一次流写入期间，在填充和`pos`递增之前。

最后，它应该如何出现：http: [//imgur.com/oziid](http://imgur.com/oziid)

以及它是如何工作的：http: [//imgur.com/SrXgA](http://imgur.com/SrXgA)（重新保存在 Paint 中，因为 Imgur 抱怨它当然被损坏了）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T04:41:32.340

您需要通过添加`std::ios::binary`标志以二进制模式打开文件以避免[CRLF 转换](http://en.wikipedia.org/wiki/Newline#Common_problems)。在 Windows 上，换行符表示为两个字节 0x0D 0x0A（回车 + 换行符，或 CR LF）——C 和 C++ 运行时会自动将它们转换为输入时的纯换行符，并且它们会自动将纯换行符`'\n'`转换为输出时的 CRLF 对，当文件以文本模式打开时，这是默认模式。

要抑制这些换行符转换，您需要告诉运行时不要翻译。对于 C++ 的`iostream`s，这是通过`std::ios::binary`标志完成的；对于 C 的`FILE*`流，这是通过`"b"`模式标志完成的，例如`"rb"`用于读取或`"wb"`写入。

# java - JSF 和 Javascript 和 HTML - 如何创建高度动态的界面

> ID：11813997
> 
> 赞同：1
> 
> 时间：2012-08-05T04:35:30.890
> 
> 标签：java, javascript, jsf, jsf-2

我是 JSF 的新手并使用 Java 开发 Web 应用程序。我基本上是在开发一个非常复杂的界面，加载了很多 AJAX 内容（分页、帖子、评论……）。

我将从一个基本示例开始，用户写评论。表单通过 JSF f:ajax 发送到服务器，然后我可以执行 render="sectionId"，但问题是，我想让帖子不只是出现，而是向下滑动，甚至切换背景颜色。

如何使用 JSF 和 Javascript 获得这种效果？设计师（他只知道 HTML/CSS/Javscript/Jquery）说，通常，他只是对带有数据字符串的页面进行 Jquery AJAX 调用，然后页面生成一个 JSON 编码，然后他可以使用它来完成所有魔法。

我不是在问你如何在 jquery 中进行切换/颜色，它是 JSF 和 Javascript 之间的通信。那么我怎样才能将新生成的 HTML 代码发送给他的 javascript，以便他可以用它来做他想要的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T07:42:55.687

JSF 是一种服务器端技术，您通常会在诸如 panelGroup 之类的构造中有条件地显示内容，所以为什么不将您的 jquery 魔法包含在有条件呈现的 panelGroup 内的就绪处理程序中，如下所示：

```
<h:panelGroup id="ajaxRenderTarget">
  <ui:repeat value="#{bean.listOfComments}" var="var">
  ... display required information ...
  </ui:repeat>
  <h:panelGroup rendered="#{bean.showJqueryEffects}">
    <script type="text/javascript">
        jQuery(function($) {
            ... funky effects here ...
        });
    </script>
  </h:panelGroup>
</h:panelGroup> 
```

在上面的示例中我使用了 ui:repeat 的地方，您可能并且可能会使用来自 jsf 的任何数据迭代组件或组件库（例如数据表）。

另一件要考虑的事情是[OmniFaces](http://showcase.omnifaces.org/components/onloadScript)，它具有`<o:onloadScript>`和许多其他值得了解的标签。

要避免的一个错误是尝试使用 jQuery ajax 函数加载 JSF 页面，服务器将没有组件树的状态并且它不会工作。

# mysql - Mysql with Node.js：让 node.js 一直在数据库中保存/加载东西有意义吗？

> ID：11813998
> 
> 赞同：0
> 
> 时间：2012-08-05T04:35:34.890
> 
> 标签：mysql, performance, node.js

所以我在 node.js 中有一个小游戏（当然只有服务器），它的地图数据和玩家帐户存储在 mysql 数据库中。现在，我以一种通过从数据库加载数据并将其保存在 javascript 对象/数组或任何看起来合适的东西中并且只在需要时才写入数据库的方式来最小化查询量。

现在我在想：这真的值得吗？在许多情况下，几乎不将数据存储在服务器中并在需要时从数据库中加载它（分别在需要时写入改变）。

我的问题是：让服务器经常从数据库读取/写入而不是在服务器中的 javascript 变量中从数据库中获取数据是否有效/保存/推荐？

附加信息：
-nodejs 服务器和我的 mysql 服务器在同一台机器上，对于像加载房间数据这样的大查询，查询通常需要不到 1 毫秒或 3 毫秒。
-我正在使用一个简单称为[mysql](https://npmjs.org/package/mysql "mysql")的模块。
- 如果需要，我会提供额外的信息，请在评论中询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:39:24.983

真的取决于你的用例。一般来说，我不会在 node.js 中添加另一层缓存，而是在您的数据库中使用更大的缓存和优化的查询来处理它。

# python - `ns` 和 `us` 在 `timeit` 结果中代表什么？

> ID：11813999
> 
> 赞同：21
> 
> 时间：2012-08-05T04:35:38.820
> 
> 标签：python, timeit

我试图将两个语句的性能与 进行比较`timeit`，结果类似于：

```
 100 loops, best of 3: 100 ns per loop
 100 loops, best of 3: 1.96 us per loop 
```

但是我不知道这些`ns`和`us`代表什么，所以我不知道哪个更快。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-05T04:37:15.017

*ns*代表纳秒。*n*是常规[SI 前缀](http://en.wikipedia.org/wiki/Metric_prefix)，意思是 10 ^(-9)。*us*表示微秒。在 SI 中是*µs*（10 ^(-6)秒）——使用*u*是因为 ASCII 中没有*µ*，但它看起来确实很相似。在您的情况下，这意味着您将 100×10 ^(-9)秒与 1.96×10 ^(-6)秒进行比较——前者几乎快 20 倍。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-05T04:36:59.750

纳秒和微秒……分别是 10 ^(-9)和 10 ^(-6)。