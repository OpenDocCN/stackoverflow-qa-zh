# StackOverflow 问答 11057000-11057999

# git - 在 groovy 脚本中执行需要密码的 Git 进程

> ID：11057005
> 
> 赞同：1
> 
> 时间：2012-06-15T19:28:38.507
> 
> 标签：git, shell, groovy

我希望能够从 Groovy 脚本中自动执行多个 >git 命令。我想使用如下代码执行一个过程......

```
def cmd = "${GIT_EXEC} submodule update --init ";
def process = cmd.execute(null, new File('.'));
process.consumeProcessOutput(System.out, System.err);
process.waitFor();
rc = process.exitValue(); 
```

**这就是问题所在...**

当您手动输入该命令时，系统会提示您输入密钥密码。使用我的 groovy 脚本，您不会收到提示，脚本只是挂起。:(

我看过其他几个与该领域相关的帖子。一致的反应是使用名为`ssh-agent`. 该工具不在我的 Windows 机器上，也不在项目中其他开发人员和管理员的 Windows 机器上。我不想让他们找到对 Windows 友好的版本并安装它。

这是我的情况与其他情况不同的地方：我不需要阻止 shell 提示输入密码。如果提示通过我的 groovy 脚本发生，用户可以键入它，并且生活将正常继续，我会很高兴。

有没有一种奇特的方法可以告诉我从 Groovy 中调用的进程继续与用户交互，而不仅仅是吞下提示？

我在这里有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:10:21.507

使用像[jgit](http://www.eclipse.org/projects/project.php?id=technology.jgit)这样的纯 Java Git 客户端库来与 git 交互，而不是产生一个进程怎么样？

# mysql - mysql - 备份相关的 innodb 数据库

> ID：11057013
> 
> 赞同：1
> 
> 时间：2012-06-15T19:29:00.333
> 
> 标签：mysql, database, foreign-keys, backup, restore

我有一个关于备份多个 MySQL innodb 数据库的问题，这些数据库彼此之间具有跨数据库关系。一个问题是数据库备份和恢复期间数据的关系完整性。

这种情况的用例是一个“主”数据库用于保存顶级数据，例如无法合并到一个数据库中的多个单独域的用户信息。设置这个不是问题，因为 MySQL 允许与 innodb 外键的跨数据库关系。

但是，如何在备份期间不破坏外键的情况下正确备份主数据库和辅助数据库（假设它们在同一台服务器上）。

我正在寻找一种方法来了解如何在那个瞬间及时捕获这些数据库的“快照”，或者如果在备份期间无法保留关系...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:40:20.300

我希望我能正确理解这个问题。

假设您有两个数据库（db1 和 db2），其中来自 db2 中一个或多个表的外键约束引用了 db1 中的某些内容。

如果您想在进行备份时确保一切都在时间点一致，您可以让[***mysqldump***](https://dba.stackexchange.com/tags/mysqldump/info)为您完成。每当您运行 mysqldump 时，您都会发出如下`--single-transaction`选项：

```
mysqldump -u... -p... --single-transaction --databases db1 db2 > db1_db2.sql 
```

创建了一个内部检查点，以便 db1 和 db2 在引用完整性和时间点方面保持一致，*即使在备份期间将数据*输入到 db1 和 db2 中也是如此。

在恢复 mysqldump 期间，禁用外键以允许干净、快速的重新加载重新加载。如果且仅当使用该`--single-transaction`选项创建 mysqldump 时，您可以信任在还原期间禁用的外键。

# c# - 使用实体框架代码优先开发，我可以让它在现有数据库中创建一个或多个表吗？

> ID：11057015
> 
> 赞同：2
> 
> 时间：2012-06-15T19:29:10.617
> 
> 标签：c#, asp.net, entity-framework, ef-code-first

我是 Entity Framework 的新手，我有一个现有的数据库，我想向其中添加一些表，而不是从头开始为我的新表创建一个数据库。实体框架可以做到这一点吗？

我浏览了以下有关 Code First 开发的 MSDN 文章，但无法找到我的问题的答案：

[代码优先开发](http://msdn.microsoft.com/en-us/library/hh770082%28v=vs.103%29.aspx)

[代码优先约定](http://msdn.microsoft.com/en-us/library/hh161541%28v=vs.103%29)

[Code First Fluent API](http://msdn.microsoft.com/en-us/library/hh295844%28v=vs.103%29)

[代码优先数据注释](http://msdn.microsoft.com/en-us/library/gg197525%28v=vs.103%29)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:23:41.540

我对我的 asp.net mvc3 项目有相同的经验，它与 asp.net 有点不同，但我想实体框架是这里的重点。

1.  在sql server中创建新表

2.  在您的模型项目中创建相应的模型

3.  在 DbNameEntities.cs 中添加新的表对象属性

    公共 DbSet NewTables { 获取；放; }

4.  在 Application_Start() 方法中，注释掉原始代码优先方法

    System.Data.Entity.Database.SetInitializer(new SeedSampleData());

替换为：

```
System.Data.Entity.Database.SetInitializer<DbNameEntities>(null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:59:24.050

是的，这当然是可能的。

[Scott Gu 的博客上](http://weblogs.asp.net/scottgu/archive/2010/08/03/using-ef-code-first-with-an-existing-database.aspx)提供了一个不错的演练

# c# - 使用 LINQ 从 XDocument 中检索嵌套列表

> ID：11057024
> 
> 赞同：1
> 
> 时间：2012-06-15T19:30:01.743
> 
> 标签：c#, xml, linq

好的，我希望我的链接查询返回用户列表。下面是 XML

```
<section type="Users">
    <User type="WorkerProcessUser">
        <default property="UserName" value="Main"/>
        <default property="Password" value=""/>
        <default property="Description" value=""/>
        <default property="Group" value=""/>
    </User>
    <User type="AnonymousUser">
        <default property="UserName" value="Second"/>
        <default property="Password" value=""/>
        <default property="Description" value=""/>
        <default property="Group" value=""/>
    </User>
</section> 
```

而我当前的 LINQ 查询不起作用。doc 是一个 XDocument

```
var users = (from iis in doc.Descendants("section")
                     where iis.Attribute("type").Value == "Users"
                     from user in iis.Elements("User")
                     from prop in user.Descendants("default")
                     select new 
                     {
                         Type = user.Attribute("type").Value, 
                         UserName = prop.Attribute("UserName").Value
                     }); 
```

我得到一个`Object reference not set to an instance of an object`例外。谁能告诉我我需要修复什么？

这是我在修复错误的属性名称后的第二次尝试。但是，当我尝试使用它时，或者至少当我尝试将它写入控制台时，这个似乎没有为我枚举 UserName 值。这也返回 8 个总结果我应该只有 2 个结果，因为我只有 2 个用户。

```
(from iis in doc.Descendants("section")
                     where iis.Attribute("type").Value == "Users"
                     from user in iis.Elements("User")
                     from prop in user.Descendants("default")
                     select new
                     {
                         Type = user.Attribute("type").Value,
                         UserName = (from name in prop.Attributes("property")
                                     where name.Value == "UserName"
                                     select name.NextAttribute.Value).ToString()
                     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:35:37.290

我会做这样的事情：

```
doc.XPathSelectElement("section[@type='Users']")
.Elements("User")
.Select(c => new
{
    Type = c.Attribute("type").Value,
    UserName = c.XPathSelectElement("default[@property='UserName']").Attribute("value").Value
}); 
```

您需要`using System.Xml.XPath;`在 .cs 文件的顶部添加`XPathSelectElement`才能找到扩展方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:39:52.517

您的`default`元素没有`username`属性，`username`是属性的值`property`。

以下是您的查询应该如何替代`Henk Holterman`所写的内容。不同之处在于我在元素级别而不是在元素级别进行*选择*。`User``default[@property='UserName']`

```
var usr = (from iis in doc.Descendants("section")
           where iis.Attribute("type").Value == "Users"
           from user in iis.Elements("User")
           select new
           {
               Type = user.Attribute("type").Value,
               UserName = (from prop in user.Descendants("default")
                           where prop.Attribute("property").Value == "UserName"
                           select prop.Attribute("value").Value).FirstOrDefault()
           }); 
```

与您的第二次尝试相比，代码`from prop in user.Descendants("default")`已移至匿名类型构造函数中，并且对 UserName 的分配已被简化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T22:02:03.017

```
var root = XDocument.Load(@"...").Root;
var ns = root.GetDefaultNamespace();
var users = root.Descendants(ns.GetName("default")).Where(e => e.Attribute("property").Value == "UserName").Select(e => new
{
    Type = e.Parent.Attribute("type").Value,
    UserName = e.Attribute("value").Value
});
Console.WriteLine(String.Join(Environment.NewLine, users.Select(u => String.Format("{0} ({1})", u.UserName, u.Type)))); 
```

# java - Netbeans 中的设计视图不会加载

> ID：11057029
> 
> 赞同：5
> 
> 时间：2012-06-15T19:30:25.297
> 
> 标签：java, swing, netbeans

我开始学习 swing 并下载了 netbeans 来完成教程。不幸的是，当我创建 JFrame 设计视图时挂起而不是加载，并且导航器和检查器窗格只是显示为空。

```
System details:  
Linux Mint Maya
Netbeans version 7.0.1  
java 1.6.0_24 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:02:05.860

在您选择的任何编辑器/设计器中，请考虑[此处](https://stackoverflow.com/a/2561540/230513)显示的方法，其中手动创建[顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)并在设计器中维护一个或多个内容面板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T01:16:32.777

查看 Netbeans View 菜单并选择“IDE log” 那里可能有错误消息/异常，这可能会给你一个线索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-09T19:32:03.237

重新安装 nb-javac 插件为我解决了这个问题。

我按照[此处](https://stackoverflow.com/a/60830514)的步骤操作，它解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-28T15:43:59.127

对我来说，这是由“FormGuardedBlockError”引起的，因为在我的项目中，有一次我将所有源代码复制到 Notepad++ 中并用它来替换`.java`文件，从而剥离了所有`//GEN-BEGIN`相关指令。

您可以关闭 NetBeans，`.java`在纯文本编辑器中打开文件，然后手动放回这些指令，但与早期版本的代码（如果有的话）合并可能更容易。

有关更多详细信息，请查看[http://wiki.netbeans.org/FormGuardedBlockError](http://wiki.netbeans.org/FormGuardedBlockError)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-17T20:35:31.450

菜单->查看->显示编辑工具栏为我修复了这个问题，当然你选择编辑的文件必须有 jframe，我认为添加到它以显示设计选项卡。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-13T15:04:06.787

转到菜单 -> 选项 -> 从选项窗口工具中选择“Java”，然后选择活动

# django - django/sqllite3 如何构建数据库进行测试？

> ID：11057038
> 
> 赞同：1
> 
> 时间：2012-06-15T19:30:49.700
> 
> 标签：django, sqlite, django-unittest

嗨，我正在尝试为我的 django Web 应用程序编写一些单元测试，但是在尝试运行测试时遇到了一些数据库问题。我在某些地方使用 Factory Boy 来为测试创建实例（https://github.com/dnerdy/factory_boy 是存储库），但是当我尝试运行测试时遇到了一些问题。我收到数据库错误，例如：当我尝试运行测试时没有这样的列，并且当我尝试运行 ./manage.py syncdb 时表已经退出错误（我将在下面包含实际错误）。我使用默认的 sqlite3 数据库设置进行测试，因此创建测试数据库以运行测试，然后自动销毁。

这是我的 settings.py 文件的相关部分

```
if 'test' in sys.argv or 'jenkins' in sys.argv:
DATABASES = {
             'default': {
                         'ENGINE': 'django.db.backends.sqlite3',
                         'NAME': 'test_ndptc'
                         }
             } 
```

这是引发错误的模型。

```
class CourseManager(models.Manager):
def get_query_set(self):
    return super(CourseManager, self).get_query_set().order_by('CourseName')

class Course(models.Model):
"""
"""
CourseName = models.CharField(max_length=80)
ShortName = models.CharField(max_length=50)
CourseNumber = models.CharField(max_length=50)
TrainingProvider = models.ForeignKey(TrainingProvider)
TrainingType = models.ForeignKey(TrainingType)
CourseType = models.ForeignKey(CourseType)
ModuleCount = models.IntegerField()
ContactHours = models.CharField(max_length=5)
Certified = models.BooleanField()
Description = models.TextField(null=True, blank=True)
TargetAudience = models.TextField(null=True, blank=True)
Prerequisites = models.TextField(null=True, blank=True)
Requirements = models.TextField(null=True, blank=True)
Icon2d = models.FileField(upload_to='icons/', null=True, blank=True)
Icon3d = models.FileField(upload_to='icons/', null=True, blank=True)
Status = models.IntegerField(null=True)
UpdateUser = models.ForeignKey(User, null=True)
UpdateDate = models.DateField(null=True)
Featured = models.BooleanField(verbose_name='is featured?')

objects = CourseManager() 
```

这是发生错误的工厂。

```
class TestFactory(factory.Factory):
FACTORY_FOR = Test

Course = random.choice(Course.objects.all())
EffectiveDate = '01/01/2012'
Type = random.choice(TestType.objects.all())
Label = 'test_label'
Status = 1
UpdateUser = factory.LazyAttribute(lambda a: UserFactory())
UpdateDate = '01/01/2012' 
```

最后，这是我运行 ./manage.py test 时发生的错误

```
Traceback (most recent call last):
File "./manage.py", line 11, in <module>
execute_manager(settings)
File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-   py2.7.egg/django/core/management/__init__.py", line 438, in execute_manager
utility.execute()
File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/core/management/__init__.py", line 379, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/core/management/base.py", line 191, in run_from_argv
self.execute(*args, **options.__dict__)
File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/core/management/base.py", line 220, in execute
output = self.handle(*args, **options)
File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/core/management/commands/test.py", line 37, in handle
failures = test_runner.run_tests(test_labels)
File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/test/simple.py", line 358, in run_tests
suite = self.build_suite(test_labels, extra_tests)
File "/home/brandon/course-management/Testing/runner.py", line 17, in build_suite
suite = unittest.defaultTestLoader.loadTestsFromNames(test_labels)
File "/usr/lib/python2.7/unittest/loader.py", line 128, in loadTestsFromNames
suites = [self.loadTestsFromName(name, module) for name in names]
File "/usr/lib/python2.7/unittest/loader.py", line 91, in loadTestsFromName
module = __import__('.'.join(parts_copy))
File "/home/brandon/course-management/Testing/admin_tests.py", line 5, in <module>
from Testing.Factories.course_factory import *
File "/home/brandon/course-management/Testing/Factories/course_factory.py", line 19, in <module>
class TestFactory(factory.Factory):
File "/home/brandon/course-management/Testing/Factories/course_factory.py", line 22, in TestFactory
Course = random.choice(Course.objects.all())
File "/usr/lib/python2.7/random.py", line 274, in choice
return seq[int(self.random() * len(seq))]  # raises IndexError if seq is empty
File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/query.py", line 82, in __len__
self._result_cache = list(self.iterator())
File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/query.py", line 273, in iterator
for row in compiler.results_iter():
File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/sql/compiler.py", line 680, in results_iter
for rows in self.execute_sql(MULTI):
File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/sql/compiler.py", line 735, in execute_sql
cursor.execute(sql, params)
File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/backends/sqlite3/base.py", line 234, in execute
return Database.Cursor.execute(self, query, params)
django.db.utils.DatabaseError: no such column: Course_course.ShortName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T00:29:58.283

我认为 random.choice 在一个空列表上运行。我认为您可以使用惰性属性，例如

```
@factory.lazy_attribute
def course(a):
    """ Creates a course if none exist
    """
    if Course.objects.count() == 0:
        course = CourseFactory()
        return course
    else:
        return random.choice(Course.objects.all()) 
```

# algorithm - 控制多个灯光强度的算法

> ID：11057042
> 
> 赞同：0
> 
> 时间：2012-06-15T19:31:04.363
> 
> 标签：algorithm

我们有多个 10x10 网格中的灯，每个灯都可以控制强度 1 到 10。这些灯的目标是墙壁，我们的目标是在用户定义强度值的墙壁图像的某个范围内具有均匀的强度。一个限制是，只有给定光的直接相邻相邻光会影响光直接照射到的墙壁区域的图像强度。

我认为（并希望）这是一个已知问题，但找不到任何好的参考来解决这个问题。任何提示或线索将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:19:33.193

我想由此产生的强度是一些邻居灯的线性组合。例如，I[x,y]=a*L[x,y]+b*(L[x-1,y]+L[x+1,y]+L[x,y-1]+L [x,y-1])+c*(L[x-1,y-1] +...)，其中 a,b,c 是一些系数。所以有 100 个方程和 100 个未知变量的线性系统。如果已知系数，它可能会被解决。

更复杂的模型——灯强度矩阵与点扩散函数的卷积。它可能需要复杂的信号重建方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:27:11.763

这需要一种遗传算法方法：无需太多麻烦，您可以自定义它以考虑您的灯特性，以及任何所需的墙上照明功能。

*更新：* 更具体地说，如果 OP 已经有了一些关于由于一盏灯而产生的光强函数的信息，那么编程方面将是乏味的，但很简单。如果没有，那么需要一种获取该信息的方法。做到这一点的一种方法是获取一个光电二极管并仅测量从中心到外围的光强度，并按照实际应用中的安装方式打开一盏灯。根据物理设置使用任何合适的采样间隔——一英寸、六英寸、一英尺等等。使用该信息，OP 可以创建基于一盏灯的光强度函数。

我没有特别推荐的光电二极管，但它们不会那么贵，因为 Lego Mindstorms 可以从中读取读数。不过，我在下面的评论中确实说错了——实际上可能对灯上的十个强度设置中的每一个进行一次测量，而且我明确假设所有灯的性能大致相同。

从那里，我们可以在数学上构建由 100 盏灯以任意强度引起的光强度模式的更大函数——我们可以在这个函数中插入 100 个数字（代表灯设置）并得到一个很好的近似结果光强度. 最后，我们可以使用遗传算法来优化该函数的输入，*以*使均匀强度模式高度拟合。

不过要小心——这句话的真正最佳之处可能是“所有灯都关了”。

（如果你对自己的摄影比我更有信心，那么相机可能会起作用。但无论哪种方式，如果没有详细了解灯设置的强度模式，这不是一个可以解决的问题。）

# ruby-on-rails - 是否有一种优雅的方法可以使用 .send() 附加存储在数组中的范围？

> ID：11057047
> 
> 赞同：3
> 
> 时间：2012-06-15T19:31:31.663
> 
> 标签：ruby-on-rails, ruby, scopes

这是我所拥有的

目前，我正在这样做：

```
current_account.send(object).search(params[:search]).user_id_equals_any(users).visibility_is_any(visibilities) 
```

但那不是很灵活？如果我想有条件地不拥有这些范围之一怎么办？

我认为具有条件添加元素的范围数组将是一个很好的解决方案

我将使用 .send() 调用的参数数组

```
scopes = []    
scopes = << [:user_id_equals_any, users] if filter_users
    scopes = << [:visibility_is_any, visibilities] if filter_visibility 
```

所以，我可以有一些未知的数字范围。

要执行范围，我需要调用`.send(:scope_name, scope_param)`

但是我如何为我的`scopes`阵列中的任意数量的范围做到这一点？

作为一个循环，我认为它会像

```
result = current_account.send(object).search(params[:search])
scopes.each do |scope|
    result.send(scope[0], scope[1])
end
return result 
```

循环可以简化为

```
scopes.each {|s| result.send(s[0], s[1]) } 
```

但是有没有办法在一行中附加不同的发送调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:38:25.007

您可以使用[`inject`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)：

```
scopes = []
# Note that in your example, the assignment is invalid syntax
scopes << [:user_id_equals_any, users] if filter_users
scopes << [:visibility_is_any, visibilities] if filter_visibility

# initial result
result = current_account.send(object).search(params[:search])

# applying the scopes
result = scopes.inject(result) do |result, (method, param)|
  result.send(method, param)
end
return result 
```

在每个循环中，前一个块执行的最后一个返回值被传递给块的第一个参数，在这种情况下是`result`. 第一个循环获取初始结果（即`inject`调用方括号中的参数。返回最后一个循环的返回值。

有关更多详细信息，请查看[文档](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:34:30.360

随意构建自己的抽象，以便您的代码反映您对问题的看法：

```
class Object
  def send_if(condition, *args, &block)
    condition ? send(*args, &block) : self
  end
end

current_account.send(object).search(params[:search]).
  send_if(filter_user, :user_id_equals_any, users).
  send_if(filter_visibility, :visibility_is_any, visibilities) 
```

# jquery - jQuery Datepicker 验证类似于 onblur

> ID：11057053
> 
> 赞同：4
> 
> 时间：2012-06-15T19:31:49.493
> 
> 标签：jquery, validation, datepicker, onblur

我正在使用 jQuery UI Datepicker，我想在鼠标单击该字段后立即检查输入字段中输入的日期。我想获得有关该值是否有效的即时反馈。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:38:18.213

你可以尝试这样的事情：

```
$(".datepicker").blur(function(){
  var date = "4-5/2012 12:14:60 PM"; // replace this by $(this).val() to get your date from the input
  var validate = Date.parse(date);
  if (validate.isNaN()) {
    // do something if the date is not valid
  }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:39:17.377

在 datepicker 输入字段上附加一个模糊事件，然后检查它的值

```
$(".dtpicker").blur(function(){
.
.
. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:35:50.930

如果您正在寻找验证插件，请尝试[jquery validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

# html - 不明白悬停图像时如何显示标题

> ID：11057056
> 
> 赞同：1
> 
> 时间：2012-06-15T19:32:04.610
> 
> 标签：html, css

我在这个例子中遇到了一些困难：

```
<img src="image1/<?php echo $file; ?>.jpg" style="width:500px" /> 
<p id="caption"><?php echo $caption; ?></p> 
```

悬停图像时，我正在尝试使用 CSS 获取标题。

我尝试使用`a img{hover;}`and `p {hover;}`。

悬停图像时有没有办法让我获得标题？该示例使用 PHP，如果使用 CSS 或 Javascript，也许我可以搜索它，但到目前为止我找不到解决方案。

我感谢任何解释和示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:34:36.623

```
/* by default, hide caption: */
#caption { display: none; } 
/* if caption is next to a hovered img, show: */
img:hover + #caption { display: block; } 
```

[jsFiddle 演示](http://jsfiddle.net/pttsm/)

*   `+`是IE8 支持的[相邻兄弟选择器。](http://reference.sitepoint.com/css/adjacentsiblingselector)
*   [`:hover`](http://www.quirksmode.org/css/hover.html)伪类用于设置鼠标经过的元素的样式
*   请注意，如果您想在文档中使用多个标题，则应使用类而不是 id。ID 在文档中必须是唯一的。

如果您需要在 IE7 中工作的东西，请考虑这样的 HTML：

```
<div class="image-with-caption">
    <img src="whatever.png" style="width:200px" /> 
    <p class="caption">caption</p> 
</div> 
```

CSS 将是：

```
.caption { display: none; }
.image-with-caption:hover .caption { display: block; }​ 
```

​<a href="http://jsfiddle.net/pttsm/1/" rel="nofollow">jsFiddle 演示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:32:55.783

你要`img:hover {/* css */}`

实际上，您可能想做这样的事情：

```
<div class="hoverme">
  <img src="image1/<?php echo $file; ?>.jpg" style="width:500px" /> 
  <span><?php echo $caption; ?></span> 
</div> 
```

然后在你的 CSS 中：

```
div.hoverme span{
    display: none;
}

div.hoverme:hover span{
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T19:34:40.177

`p`将鼠标悬停在 上时影响样式`img`：

```
img:hover + #caption {
    display: block; /* or whatever...*/
} 
```

或者：

```
img:hover ~ #caption {
    display: block; /* or whatever... */
} 
```

值得注意的是，这些示例假定您只有*一个* `p`带有`id`of 'caption' 的元素，如果您有*多个* `p`带有 that 的元素`id`，那么您需要使用 a`class`代替，因为 an在文档中`id` ***必须***是唯一的。

是`+`CSS 相邻兄弟组合器，并选择`#caption`紧跟`img`用户悬停的 。

是`~`CSS 通用兄弟组合器，并选择任何被悬停`#caption`的后来兄弟的兄弟元素；`img`无论可能出现在两者之间的任何元素（尽管它们必须是同一个父元素中的兄弟姐妹）。

参考：

*   [CSS 选择器，位于 W3.org](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T19:41:13.383

尝试使用 JavaScript 事件 onMouseOver 和 onMouseOut 来显示/隐藏标题，如下所示：

```
<img src="image.jpg" style="width:500px"
    onMouseOver="document.getElementById('caption').style.display='block'"
    onMouseOut="document.getElementById('caption').style.display='none'" />
<p id="caption" style="display:none">Caption here</p> 
```

# paypal - 验证电子邮件是否链接到有效的 PayPal 帐户

> ID：11057058
> 
> 赞同：1
> 
> 时间：2012-06-15T19:32:23.020
> 
> 标签：paypal, paypal-adaptive-payments

是否有能力验证用户是否有链接到 PayPal 帐户的有效电子邮件地址，以及是否可以检查此帐户是否具有授予 API 权限（对我的帐户）来处理退款 API？要退款的配置文件是通过 AdaptivePayment Pay API 调用创建的付款配置文件。

我想知道这是否可以通过 API 调用实现？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:10:36.773

您可以使用 PayPal [GetVerifiedStatus API 操作](https://developer.paypal.com/docs/nvp-soap-api/get-verified-status/)将检查 paypal 帐户的验证状态。您还可以使用[Permissions API Operation](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_PermissionsAbout)显式获取/检查授予特定 PayPal 帐户的权限。

# reporting-services - 无法在 Management Studio 中选择 Reporting Services？

> ID：11057059
> 
> 赞同：1
> 
> 时间：2012-06-15T19:32:36.030
> 
> 标签：reporting-services, sql-server-2008r2-express

我已经为我的客户端（包括 Reporting Services）安装了 Sql Server 2008 R2 Express Advanced SP1。

我已经配置了 Reporting Services，但是在打开 Management Studio 时我无法打开 Reporting Services..

这是 Express 中缺少的功能还是有什么问题？

![什么？](../Images/48e414e12978c04e50e47f0e43d3e7a8.png)

Windows SBS 2011 标准上的 Sql Server 版本 10.50.2500.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:34:43.403

您不能使用 Management Studio Express 来管理 Reporting Services： http: [//msdn.microsoft.com/en-us/library/ms365166 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms365166(v=sql.105).aspx)

# c - 优化循环内的重复模数

> ID：11057063
> 
> 赞同：6
> 
> 时间：2012-06-15T19:32:50.117
> 
> 标签：c, optimization, bitwise-operators

我的 c 程序中有这个语句，我想优化。通过优化，我特别想参考按位运算符（但任何其他建议也可以）。

```
uint64_t h_one = hash[0];
uint64_t h_two = hash[1];
for ( int i=0; i<k; ++i )
{
    (uint64_t *) k_hash[i] = ( h_one + i * h_two ) % size;   //suggest some optimization for this line.
} 
```

任何建议都会有很大帮助。

编辑：到目前为止`size`可以是任何`int`但它不是问题，我们可以将它四舍五入到下一个素数（但可能不是 2 的幂，因为对于较大的值，2 的幂会迅速增加，这将导致大量浪费内存）

`h_two`是一个 64 位整数（基本上是 64 字节的卡盘）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T20:17:26.643

所以本质上你在做

```
k_0 = h_1 mod s
k_1 = h_1 + h_2 mod s = k_0 + h_2 mod s
k_2 = h_1 + h_2 + h_2 mod s = k_1 + h_2 mod s
..
k_n = k_(n-1) + h_2 mod s 
```

根据溢出问题（如果大小小于一半，则不应与原始问题不同`2**64`），这可能会更快（虽然不太容易并行化）：

```
uint64_t h_one = hash[0];
uint64_t h_two = hash[1];
k_hash[0] = h_one % size;
for ( int i=1; i<k; ++i )
{
    (uint64_t *) k_hash[i] = ( k_hash[i-1] + h_two ) % size;
} 
```

请注意，您的编译器可能已经采用这种形式，具体取决于您使用的优化标志。

当然，这只消除了一次乘法。`h_two%size`如果你想消除或减少模数，我想基于`h_1%size`你可以预先确定你必须明确调用的步骤`%size`，如下所示：

```
uint64_t h_one = hash[0]%size;
uint64_t h_two = hash[1]%size;
k_hash[0] = h_one;
step = (size-(h_one))/(h_two)-1;
for ( int i=1; i<k; ++i )
{
    (uint64_t *) k_hash[i] = ( k_hash[i-1] + h_two );
    if(i==step)
    {
        k_hash[i] %= size;
    }
} 
```

注意我不确定公式（没有测试过），这是一个更笼统的想法。这在很大程度上取决于您的分支预测有多好（以及错误预测对性能的影响有多大）。也只有在步幅很大的情况下才有帮助。

编辑：或更简单（并且可能具有相同的性能）-感谢神秘：

```
uint64_t h_one = hash[0]%size;
uint64_t h_two = hash[1]%size;
k_hash[0] = h_one;
for ( int i=1; i<k; ++i )
{
    (uint64_t *) k_hash[i] = ( k_hash[i-1] + h_two );
    if(k_hash[i] > size)
    {
        k_hash[i] -= size;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:37:59.227

如果 size 是 2 的幂，则对 size - 1 应用按位与优化 "% size"：

```
(uint64_t *)k_hash[i] = (h_one + i * h_two) & (size - 1) 
```

# css - 在 CSS 中重新创建 MS Windows Phone Tiltin 动画

> ID：11057068
> 
> 赞同：2
> 
> 时间：2012-06-15T19:33:12.270
> 
> 标签：css, css-transitions, css-transforms, keyframe

我正在尝试让“倾斜”动画在我的一个使用 CSS 动画的小项目上工作。不幸的是，我无法从 MS Demo 移植它 - 毫无疑问，所有代码都在那里： http: [//m.microsoft.com/windowsphone/en-us/demo/default.aspx#home](http://m.microsoft.com/windowsphone/en-us/demo/default.aspx#home)

我试图让瓷砖在页面加载时淡入，只是那个部分。一次绝对没问题。我知道我需要定义供应商关键帧，但我的尝试非常糟糕，以至于我没有将它们粘贴到 jsFiddle 的示例中：

[http://jsfiddle.net/qCQQD/2/](http://jsfiddle.net/qCQQD/2/)

有谁会帮助我吗？那真是太棒了！

编辑1：

a）我仍在尝试在页面加载时运行 rotateRight 动画。我可能在 .tile 类中有一个带有leftRotate 的hacky 版本，并且在页面加载时将其删除（并添加了rightRotate）。

b) 这

```
.tile:active {
    -webkit-transform: scale(0.97);
    -moz-transform: scale(0.97);
    -o-transform: scale(0.97);
    -ms-transform: scale(0.97);
    transform: scale(0.97);
} 
```

由于添加了代码，Chrome 变得超级慢，我怎样才能让它恢复正常？

我怀疑这需要#tile 的某种时间范围

```
-webkit-transition: 300ms 160ms; 
```

它现在看起来像一个慢动作。我将尝试添加类似 -webkit-transition: 50ms 的内容。（是的，我知道，总菜鸟）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T20:03:54.083

基本上是这样的。您已将其设置得相当正确，但您只需要实际更改一些设置。检查这个 jsfiddle [DEMO](http://jsfiddle.net/qCQQD/4/)。

我只使用 javascript 添加类或删除类。你可以简单地在 css 中的 :hover 标签上做这种事情，它也会做同样的事情。

我主要只是修改了你的 css 以包含一个 rotate(90deg) -webkit-transition。因此，这只适用于 chrome 和可能的 safari。如果您希望它在 Firefox 中工作，那么您必须执行 -moz-transition 以进行旋转。

# php - PHP：将类常量转储到数组中的最简单方法是什么

> ID：11057070
> 
> 赞同：0
> 
> 时间：2012-06-15T19:33:35.217
> 
> 标签：php

我有一个带有常量列表的类。我想要`get_object_vars`将常量转储到数组中之类的东西。最简单的方法是什么？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:37:40.467

这将需要使用反射类：

```
function getClassConstants($class) {
    $reflection = new ReflectionClass(
        is_object($class) ? get_class($class) : $class
    );
    return $reflection->getConstants();
}
// usage: $constants = getClassConstants('myClass');
//        $constants = getClassConstants($myClassObjectInstance); 
```

或者您可以通过传递它`$this`而不是参数来将其实现为类中的方法

**文档**

PHP 的反射类 - [http://us2.php.net/manual/en/class.reflectionclass.php](http://us2.php.net/manual/en/class.reflectionclass.php)

PHP 的 ReflectionClass::getConstants - [http://us2.php.net/manual/en/reflectionclass.getconstants.php](http://us2.php.net/manual/en/reflectionclass.getconstants.php)

# android - Android布局/控件显示从打开的选项卡到列表/菜单的“箭头”？

> ID：11057078
> 
> 赞同：5
> 
> 时间：2012-06-15T19:34:23.020
> 
> 标签：android, android-layout

我喜欢 Android 版 Gmail 应用程序的设计，我想知道他们是否使用某种标准方法创建了它。

我猜它使用了片段，一个用于左侧的菜单，另一个用于内容。但是对我来说真的很酷的是这个从内容指向所选项目的小箭头。它给人的感觉是内容页面位于其余页面之上。

像这样的东西是开箱即用的吗？

![在此处输入图像描述](../Images/a4b1c08e374ce180cd029ae2645a096f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:40:31.970

我认为他们在左侧所选项目上使用**android:windowContentOverlay ，在该项目中显示类似“箭头”的可绘制对象。**可绘制对象应具有**android:gravity="right"**以便正确放置。

当然，您需要微调布局以使其看起来“真实”，但我使用这种技术实现了一些类似的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:38:37.910

看起来他正在使用 2 个 ListView，就那个箭头而言，我认为它不可用。我查看了很多 4.0 功能，但并没有真正看到与此相近的任何东西。我认为它可能是正确 ListView 背景的一部分？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-11T10:00:46.147

多窗格布局：左侧是列表片段（或带有 recyclerview 的片段），右侧是带有内容视图（scrollview、listview、recyclerview、webview 等）的片段。

如果左侧的项目被选中（单选模型），则选择器为选中状态使用不同的可绘制对象并更新右侧的内容。也许列表视图项目在末尾有一个额外的填充，以避免与选择器中使用的箭头位图可绘制重叠。

在 Lollipop 上，顶部可能还有额外的波纹效果（在顶部绘制选择器或使用带有波纹的特定 drawable-v21）。

阴影效果可以通过左侧片段中的框架布局来实现（第一个成员是列表视图，第二个成员是显示阴影（渐变绘制）作为背景且重力设置为结束的视图）。

# android - AsyncTask 的 onPostExecute 被调用：但 doInBackground 没有

> ID：11057080
> 
> 赞同：2
> 
> 时间：2012-06-15T19:34:33.893
> 
> 标签：android, android-asynctask

我遇到了一个奇怪的问题，我不确定我是不是做错了什么。出于某种原因，我的 AsyncTask 不会调用 doInBackground，但会调用 onPostExecute()。调用此 AsyncTask 至关重要，因为它初始化了我在应用程序的其余部分中将需要的变量。

我的主要活动中有一个嵌套类，它扩展了 AsyncTask。此类负责从用户的 Dropbox 帐户下载文件名：

```
protected class FilesLister extends AsyncTask<String, Integer, Long>
{
    @Override
    protected Long doInBackground(String... params)
    {
        Log.i("Entries", "We believe Entries has some values now.");
        ArrayList<Entry> theFiles = new ArrayList<Entry>();
        try
        {
            Entry entries = mDBApi.metadata("/", 20000, null, true, null);
            for (Entry e : entries.contents)
            {
                Log.i("Hm", e.fileName());
                if (!e.isDeleted)
                {
                    if(!e.isDir)
                    {
                        theFiles.add(e);
                    }
                }
            }
            theEntries = theFiles.toArray(new Entry[theFiles.size()]);
        } catch (DropboxException e1)
        {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(Long result)
    {
        super.onPostExecute(result);
        Log.i("Now", "Calling refresh.");
        refresh();
    }
} 
```

如您所见，onPostExecute 调用了一个名为 refresh() 的方法。refresh() 实现如下：

```
public void refresh()
{
    //Sort all this files by last modified date.
    Arrays.sort(theEntries, new Comparator<Entry>()
    {
        @Override
        public int compare(Entry firstFile, Entry secondFile)
        {
            //"EEE, dd MMM yyyy kk:mm:ss ZZZZZ"
            SimpleDateFormat formater = new SimpleDateFormat("EEE, dd MMM yyyy kk:mm:ss ZZZZZ");
            try
            {
                Date date1 = (Date)formater.parse(firstFile.modified);
                Date date2 = (Date)formater.parse(secondFile.modified);
                return date1.compareTo(date2);
            } catch (ParseException e1)
            {
                e1.printStackTrace();
            }
            return 0;
        }
    });
    //Now we create a String[] array to hold the names of all the fetched files...
    ArrayList<String>txtFilesNames = new ArrayList<String>();
    for(int i = theEntries.length - 1; i >= 0; i--)
    {
        //Loops goes from top to bottom so the latest file appears at the top of the ListView.
        txtFilesNames.add(theEntries[i].fileName());
    }
    actualFileNames = txtFilesNames.toArray(new String[txtFilesNames.size()]);
    ArrayAdapter<String> ad = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, actualFileNames);
    lv.setAdapter(ad);
} 
```

我知道调用 refresh() 有两个原因： LogCat 记录“调用刷新”。然后应用程序由于 NullPointerException 而崩溃。抛出空指针异常是因为 theEntries 确实为空，除非调用 doInBackground()，否则它将为空。而且我知道 doInBackground 永远不会因为空指针而被调用，因为我放在它的主体上的 Log 永远不会被调用。那么是什么导致我的 doInBackground() 方法没有被调用呢？如果重要，我会在 onResume 方法中执行 AsyncTask，并且不会在 onCreate 或 onStart 中执行任何其他 AsyncTask。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:56:08.330

你确定 doInBackground 没有被调用吗？还有很多其他方法可能导致 theEntries 为空。例如，这里有一个例外：

```
 Entry entries = mDBApi.metadata("/", 20000, null, true, null);
        for (Entry e : entries.contents)
        {
            Log.i("Hm", e.fileName());
            if (!e.isDeleted)
            {
                if(!e.isDir)
                {
                    theFiles.add(e);
                }
            }
        } 
```

可能导致 theEntries 为空。另外，我认为您可以以更好的方式做到这一点。与其在 doInBackground 中设置 theEntries（与创建对象的线程不同），不如让该函数返回将它们传递给 onPostExecute 的条目。我相信代码如下所示：

```
protected class FilesLister extends AsyncTask<String, Integer, Entry[]>
{
    @Override
    protected Entry[] doInBackground(String... params)
    {
        Log.i("Entries", "We believe Entries has some values now.");
        Entry[] entriesReturn = null;
        ArrayList<Entry> theFiles = new ArrayList<Entry>();
        try
        {
            Entry entries = mDBApi.metadata("/", 20000, null, true, null);
            for (Entry e : entries.contents)
            {
                Log.i("Hm", e.fileName());
                if (!e.isDeleted)
                {
                    if(!e.isDir)
                    {
                        theFiles.add(e);
                    }
                }
            }
            entriesReturn = theFiles.toArray(new Entry[theFiles.size()]);
        } catch (DropboxException e1)
        {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        return entriesReturn;
    }

    protected void onPostExecute(Entry[] result)
    {
        super.onPostExecute(result);
        Log.i("Now", "Calling refresh.");
        refresh(result);
    }
} 
```

然后在您的刷新方法中进行分配。您还应该在刷新方法中检查 null 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:52:05.433

此问题已由其他人发布（相关问题请参见侧边栏）。到目前为止，这个问题仍然没有解决方案。我自己也遇到过这个问题，经过几天的努力，我接受了这个错误。你可以做的是使用`Activity.runOnUiThread()`. 它将解决您遇到的这个问题，但不会解决`AsyncTasks`. 这就是我解决这个问题的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:54:16.147

您可以通过这种方式检查在 onPostExecute() 中是否调用了 doInBackground()。

```
 protected Long doInBackground(String... params)
    {
   /////your code...
        return 200;
    }
  protected void onPostExecute(Long result)
    {
       if(result==200)
{
        super.onPostExecute(result);
        Log.i("Now", "Calling refresh.");
        refresh();
}
    } 
```

我不确定您的条目是否给出空值。通过这种方式，您可以知道 doInBackground() 是否执行。

我认为它提供了一些帮助。

谢谢。

# mysql - SQL 按类别过滤

> ID：11057094
> 
> 赞同：1
> 
> 时间：2012-06-15T19:35:24.610
> 
> 标签：mysql, sql

`pro_id | Category
--------+---------
  25   | electronics
  27   | Electrical
  25   | household
  27   | electronics
  25   | industrial`

以上是我的数据库表。我想按类别过滤结果。如果选择“电子产品”类别，则结果应包括产品 id 25 和 27。这很容易。但我想按多个类别过滤。例如，如果我选择“电子产品”和“家庭”，结果应该只有产品 id 25。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:39:36.020

请参阅此处的示例：[http ://sqlfiddle.com/#!2/09028/7](http://sqlfiddle.com/#!2/09028/7)

通过 pro_id 将您的表连接到自身，然后按类别过滤以选择具有这两个类别的所有产品：

```
SELECT prod1.pro_id
FROM       prod AS prod1
INNER JOIN prod AS prod2 ON prod1.pro_id = prod2.pro_id
WHERE prod1.Category = 'electronics'
  AND prod2.Category = 'household'; 
```

选择具有至少一个类别的所有产品：

```
SELECT prod.pro_id
FROM  prod
WHERE prod.Category = 'electronics'
   OR prod.Category = 'household'
GROUP BY prod.pro_id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T13:20:29.757

如果您只想要符合这两个条件的产品，则需要一个 HAVING 子句...

```
SELECT
      p.pro_id
   FROM       
      prod p
   where
      p.category in ('electronics', 'household')
   having
      count(*) = 2 
```

这样做的好处是，如果您想要 3 个或更多类别，您只需将它们添加到“IN”子句并将计数更改为 3、4 或其他...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:46:30.637

不，不应该，因为您有多个 ID 共享相同的类别名称。获得所需内容的唯一方法是使用另一个字段来唯一标识每条记录，否则重复数据会让您手头一团糟。

# c# - 动态创建 PDF 文件并绑定到 Pdf 查看器控件

> ID：11057096
> 
> 赞同：0
> 
> 时间：2012-06-15T19:35:27.183
> 
> 标签：c#, silverlight, telerik

我正在我的*Silverlight*应用程序中生成一个 ssrs 报告，我需要将*ssrs 报告*转换为`RadPDFViewer control`(telerik silverlight)。所以我使用 WCF 将 pdf 文件保存在项目文件夹中。现在我需要再次读取文件并将其绑定到*Pdfviewer*。

保存是异步进行的。我应该如何等到文件保存然后从文件夹中读取？

另外，您能否告诉我如何将 PDF 作为内存流读取。

我运行以下代码失败。

```
public byte[] ReturnPdf(string requestUrl) {
        HttpWebRequest req = null; var buf = new byte[1024];
        try
        {
                req = (HttpWebRequest)WebRequest.Create(requestUrl);

                req.Credentials = CredentialCache.DefaultCredentials;

                req.Method = "GET"; var objResponse = req.GetResponse();
                var stream = objResponse.GetResponseStream();
                if (stream != null){BinaryReader br = new BinaryReader(stream);
                        buf = br.ReadBytes(1024);
                } if
                (stream != null) stream.Close();

        }
        catch Exception e){}return buf;
}

private void button2_Click(object sender, EventArgs e)
{

        string baseUrl = "http://abc/ReportServer&rs:Command=Render&rs:ClearSession=true&rs:Format=PDF";

        const string nullString = ":isnull=true";

        byte[] o = ReturnPdf(baseUrl);

        byte[] bytes = new byte[1024];
        Stream s = new MemoryStream(bytes);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:46:56.397

编写 PDF 流：

[将 PDF 流写入响应流](https://stackoverflow.com/questions/5828315/write-pdf-stream-to-response-stream)

您可以检查文件是否已完全写入。

[如何测试当前是否正在写入文件](https://stackoverflow.com/questions/2515766/how-to-test-if-a-file-is-currently-being-written-to)

或者这可能会有所帮助：

[如何检查文件锁定？](https://stackoverflow.com/questions/1304/how-to-check-for-file-lock-in-c)

# search - Solr 不搜索整数？

> ID：11057100
> 
> 赞同：2
> 
> 时间：2012-06-15T19:35:40.673
> 
> 标签：search, configuration, solr, integer

我目前正在为电子商务网站开发使用 Solr 的搜索引擎。所以我在我的 schema.xml 中得到了这两个字段：

```
 <field name="sku" type="string" indexed="true" stored="true" required="false" />
   <field name="collection" type="string" indexed="true" stored="true" required="false" /> 
```

（下面提供了完整的 schema.xml）

有关信息：

*   sku 看起来像这样：959620, 929345, 912365, ...
*   集合看起来像这样：Alcott、Spigrim、Tantal、...

它们的索引很好。例如，当我寻找：

```
http://localhost:8080/solr/myindex/select/?q=Alcott 
```

我得到了所有带有“Alcott”系列的产品。

但是当我寻找时；

```
http://localhost:8080/solr/myindex/select/?q=959620 
```

我什么都没有。

然而，当我深入提出这个要求时，

```
http://localhost:8080/solr/myindex/select/?q=sku:969520 
```

我确实将产品附加到此 sku。

有没有办法让“q=969520”工作？甚至更好：“q=96”导致所有 sku 以“96”开头的产品？

感谢您的帮助 ！

架构.xml：

```
<?xml version="1.0" encoding="UTF-8" ?>

<schema name="example" version="1.2">

  <types>

    <fieldType name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>

    <!-- boolean type: "true" or "false" -->
    <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
    <!--Binary data type. The data should be sent/retrieved in as Base64 encoded Strings -->
    <fieldtype name="binary" class="solr.BinaryField"/>

    <fieldType name="int" class="solr.TrieIntField" precisionStep="0" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="float" class="solr.TrieFloatField" precisionStep="0" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="long" class="solr.TrieLongField" precisionStep="0" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="double" class="solr.TrieDoubleField" precisionStep="0" omitNorms="true" positionIncrementGap="0"/>

    <fieldType name="tint" class="solr.TrieIntField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tfloat" class="solr.TrieFloatField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tlong" class="solr.TrieLongField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tdouble" class="solr.TrieDoubleField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>

    <fieldType name="date" class="solr.TrieDateField" omitNorms="true" precisionStep="0" positionIncrementGap="0"/>

    <!-- A Trie based date field for faster date range queries and date faceting. -->
    <fieldType name="tdate" class="solr.TrieDateField" omitNorms="true" precisionStep="6" positionIncrementGap="0"/>

    <fieldType name="pint" class="solr.IntField" omitNorms="true"/>
    <fieldType name="plong" class="solr.LongField" omitNorms="true"/>
    <fieldType name="pfloat" class="solr.FloatField" omitNorms="true"/>
    <fieldType name="pdouble" class="solr.DoubleField" omitNorms="true"/>
    <fieldType name="pdate" class="solr.DateField" sortMissingLast="true" omitNorms="true"/>

    <fieldType name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="slong" class="solr.SortableLongField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="sfloat" class="solr.SortableFloatField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="sdouble" class="solr.SortableDoubleField" sortMissingLast="true" omitNorms="true"/>

    <fieldType name="random" class="solr.RandomSortField" indexed="true" />

    <!-- A text field that only splits on whitespace for exact matching of words -->
    <fieldType name="text_ws" class="solr.TextField" positionIncrementGap="100">
      <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
      </analyzer>
    </fieldType>

    <fieldType name="text" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <!-- in this example, we will only use synonyms at query time
        <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
        -->
        <!-- Case insensitive stop word removal.
          add enablePositionIncrements=true in both the index and query
          analyzers to leave a 'gap' for more accurate phrase queries.
        -->
        <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords.txt"
                enablePositionIncrements="true"
                />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.SnowballPorterFilterFactory" language="English" protected="protwords.txt"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords.txt"
                enablePositionIncrements="true"
                />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.SnowballPorterFilterFactory" language="English" protected="protwords.txt"/>
      </analyzer>
    </fieldType>

    <fieldType name="text_fr" class="solr.TextField" positionIncrementGap="100">

      <analyzer type="query">
        <!-- normalisation des accents, cédilles, e dans l'o,... -->
        <charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
        <!-- découpage selon les espaces -->
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <!-- suppression de la ponctuation -->
        <filter class="solr.PatternReplaceFilterFactory" pattern="^(\p{Punct}*)(.*?)(\p{Punct}*)$" replacement="$2"/>
        <!-- suppression des tokens vides et des mots démesurés -->
        <filter class="solr.LengthFilterFactory" min="1" max="100" />
        <!-- passage en minuscules -->
        <filter class="solr.LowerCaseFilterFactory"/>
        <!-- suppression des élisions (l', qu',...) -->
        <filter class="solr.ElisionFilterFactory" articles="elisionwords_fr.txt"/> 
        <!-- découpage des mots composés -->
        <filter class="solr.WordDelimiterFilterFactory" splitOnCaseChange="1" splitOnNumerics="1" stemEnglishPossessive="1" generateWordParts="1"
                                                        generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="1" preserveOriginal="1"/>
        <!-- suppression des mots insignifiants -->
        <filter class="solr.StopFilterFactory" ignoreCase="1" words="stopwords_fr.txt" enablePositionIncrements="true"/>
        <!-- gestion des synonymes -->
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms_fr.txt" ignoreCase="true" expand="true"/>
        <!-- partie de mot -->
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="3" maxGramSize="6"/>
        <!-- lemmatisation (pluriels,...) -->
        <filter class="solr.SnowballPorterFilterFactory" language="French" protected="protwords_fr.txt"/>
        <!-- suppression des doublons éventuels -->
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>

      <analyzer type="index">
        <!-- normalisation des accents, cédilles, e dans l'o,... -->
        <charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
        <!-- découpage selon les espaces -->
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <!-- suppression de la ponctuation -->
        <filter class="solr.PatternReplaceFilterFactory" pattern="^(\p{Punct}*)(.*?)(\p{Punct}*)$" replacement="$2"/>
        <!-- suppression des tokens vides et des mots démesurés -->
        <filter class="solr.LengthFilterFactory" min="1" max="100" />
        <!-- passage en minuscules -->
        <filter class="solr.LowerCaseFilterFactory"/>
        <!-- suppression des élisions (l', qu',...) -->
        <filter class="solr.ElisionFilterFactory" articles="elisionwords_fr.txt"/> 
        <!-- découpage des mots composés -->
        <filter class="solr.WordDelimiterFilterFactory" splitOnCaseChange="1" splitOnNumerics="1" stemEnglishPossessive="1" generateWordParts="1"
                                                        generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="1" preserveOriginal="1"/>
        <!-- suppression des mots insignifiants -->
        <filter class="solr.StopFilterFactory" ignoreCase="1" words="stopwords_fr.txt" enablePositionIncrements="true"/>
        <!-- gestion des synonymes -->
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms_fr.txt" ignoreCase="true" expand="true"/>
        <!-- partie de mot -->
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="3" maxGramSize="6"/>
        <!-- lemmatisation (pluriels,...) -->
        <filter class="solr.SnowballPorterFilterFactory" language="French" protected="protwords_fr.txt"/>
        <!-- suppression des doublons éventuels -->
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
    </fieldType>

    <!-- Less flexible matching, but less false matches.  Probably not ideal for product names,
         but may be good for SKUs.  Can insert dashes in the wrong place and still match. -->
    <fieldType name="textTight" class="solr.TextField" positionIncrementGap="100" >
      <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="false"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.SnowballPorterFilterFactory" language="English" protected="protwords.txt"/>
        <!-- this filter can remove any duplicate tokens that appear at the same position - sometimes
             possible with WordDelimiterFilter in conjuncton with stemming. -->
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
    </fieldType>

    <!-- A general unstemmed text field - good if one does not know the language of the field -->
    <fieldType name="textgen" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords.txt"
                enablePositionIncrements="true"
                />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>

    <!-- A general unstemmed text field that indexes tokens normally and also
         reversed (via ReversedWildcardFilterFactory), to enable more efficient 
   leading wildcard queries. -->
    <fieldType name="text_rev" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.ReversedWildcardFilterFactory" withOriginal="true"
           maxPosAsterisk="3" maxPosQuestion="2" maxFractionAsterisk="0.33"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords.txt"
                enablePositionIncrements="true"
                />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>

    <fieldType name="alphaOnlySort" class="solr.TextField" sortMissingLast="true" omitNorms="true">
      <analyzer>
        <!-- KeywordTokenizer does no actual tokenizing, so the entire
             input string is preserved as a single token
          -->
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <!-- The LowerCase TokenFilter does what you expect, which can be
             when you want your sorting to be case insensitive
          -->
        <filter class="solr.LowerCaseFilterFactory" />
        <!-- The TrimFilter removes any leading or trailing whitespace -->
        <filter class="solr.TrimFilterFactory" />

        <filter class="solr.PatternReplaceFilterFactory"
                pattern="([^a-z])" replacement="" replace="all"
        />
      </analyzer>
    </fieldType>

    <fieldtype name="phonetic" stored="false" indexed="true" class="solr.TextField" >
      <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.DoubleMetaphoneFilterFactory" inject="false"/>
      </analyzer>
    </fieldtype>

    <fieldtype name="payloads" stored="false" indexed="true" class="solr.TextField" >
      <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <!--
        The DelimitedPayloadTokenFilter can put payloads on tokens... for example,
        a token of "foo|1.4"  would be indexed as "foo" with a payload of 1.4f
        Attributes of the DelimitedPayloadTokenFilterFactory : 
         "delimiter" - a one character delimiter. Default is | (pipe)
   "encoder" - how to encode the following value into a playload
      float -> org.apache.lucene.analysis.payloads.FloatEncoder,
      integer -> o.a.l.a.p.IntegerEncoder
      identity -> o.a.l.a.p.IdentityEncoder
            Fully Qualified class name implementing PayloadEncoder, Encoder must have a no arg constructor.
         -->
        <filter class="solr.DelimitedPayloadTokenFilterFactory" encoder="float"/>
      </analyzer>
    </fieldtype>

    <!-- lowercases the entire field value, keeping it as a single token.  -->
    <fieldType name="lowercase" class="solr.TextField" positionIncrementGap="100">
      <analyzer>
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory" />
      </analyzer>
    </fieldType>

    <!-- since fields of this type are by default not stored or indexed,
         any data added to them will be ignored outright.  --> 
    <fieldtype name="ignored" stored="false" indexed="false" multiValued="true" class="solr.StrField" /> 

 </types>

 <fields>
 <!-- Vu fields -->
   <field name="id" type="string" indexed="true" stored="true" required="true" /> 
   <field name="sku" type="string" indexed="true" stored="true" required="false" /> 
   <field name="collection" type="string" indexed="true" stored="true" required="false" /> 
   <field name="title" type="text_fr" required="false" />
   <field name="description" type="text_fr" required="false" />
   <field name="price" type="float" required="false" indexed="true" stored="false" />
   <field name="brand_id" type="text" required="false" />
   <field name="date_online" type="date" required="false" />
   <field name="product_type" type="text" required="false" />   
   <field name="selection_id" type="sint" required="false" multiValued="true" indexed="true" stored="false" />
   <field name="stock_delay" type="sint" required="false"  />
   <field name="stock" type="sint" required="false"  />
   <field name="price_type" type="sint" required="false"  />
   <field name="main_product_id" type="text" required="false"  />
   <field name="date_price" type="date" required="false" />
   <!-- attributes -->
   <dynamicField name="attr_*" type="sint" indexed="true" multiValued="true"/>

   <field name="attr_13" type="int" indexed="true" multiValued="false"/>
   <field name="attr_14" type="int" indexed="true" multiValued="false"/>
   <field name="attr_19" type="int" indexed="true" multiValued="false"/>

    <!-- Ce champ contiendra la copie de tous les autres, pour faciliter la recherche -->
   <field name="global" type="text_fr" required="false" multiValued="true" />

   <!-- Valid attributes for fields:
     name: mandatory - the name for the field
     type: mandatory - the name of a previously defined type from the 
       <types> section
     indexed: true if this field should be indexed (searchable or sortable)
     stored: true if this field should be retrievable
     compressed: [false] if this field should be stored using gzip compression
       (this will only apply if the field type is compressable; among
       the standard field types, only TextField and StrField are)
     multiValued: true if this field may contain multiple values per document
     omitNorms: (expert) set to true to omit the norms associated with
       this field (this disables length normalization and index-time
       boosting for the field, and saves some memory).  Only full-text
       fields or fields that need an index-time boost need norms.
     termVectors: [false] set to true to store the term vector for a
       given field.
       When using MoreLikeThis, fields used for similarity should be
       stored for best performance.
     termPositions: Store position information with the term vector.  
       This will increase storage costs.
     termOffsets: Store offset information with the term vector. This 
       will increase storage costs.
     default: a value that should be used if no value is specified
       when adding a document.
   -->
    <!--
   <field name="id" type="string" indexed="true" stored="true" required="true" /> 
   <field name="sku" type="textTight" indexed="true" stored="true" omitNorms="true"/>
   <field name="name" type="textgen" indexed="true" stored="true"/>
   <field name="alphaNameSort" type="alphaOnlySort" indexed="true" stored="false"/>
   <field name="manu" type="textgen" indexed="true" stored="true" omitNorms="true"/>
   <field name="cat" type="text_ws" indexed="true" stored="true" multiValued="true" omitNorms="true" />
   <field name="features" type="text" indexed="true" stored="true" multiValued="true"/>
   <field name="includes" type="text" indexed="true" stored="true" termVectors="true" termPositions="true" termOffsets="true" />

   <field name="weight" type="float" indexed="true" stored="true"/>
   <field name="price"  type="float" indexed="true" stored="true"/>
   <field name="popularity" type="int" indexed="true" stored="true" />
   <field name="inStock" type="boolean" indexed="true" stored="true" />
    -->

   <!-- Common metadata fields, named specifically to match up with
     SolrCell metadata when parsing rich documents such as Word, PDF.
     Some fields are multiValued only because Tika currently may return
     multiple values for them.
   -->
   <!--
   <field name="title" type="text" indexed="true" stored="true" multiValued="true"/>
   <field name="subject" type="text" indexed="true" stored="true"/>
   <field name="description" type="text" indexed="true" stored="true"/>
   <field name="comments" type="text" indexed="true" stored="true"/>
   <field name="author" type="textgen" indexed="true" stored="true"/>
   <field name="keywords" type="textgen" indexed="true" stored="true"/>
   <field name="category" type="textgen" indexed="true" stored="true"/>
   <field name="content_type" type="string" indexed="true" stored="true" multiValued="true"/>
   <field name="last_modified" type="date" indexed="true" stored="true"/>
   <field name="links" type="string" indexed="true" stored="true" multiValued="true"/>
    -->

   <!-- catchall field, containing all other searchable text fields (implemented
        via copyField further on in this schema  -->
   <!-- <field name="text" type="text" indexed="true" stored="false" multiValued="true"/> -->

   <!-- catchall text field that indexes tokens both normally and in reverse for efficient
        leading wildcard queries. -->
   <!-- <field name="text_rev" type="text_rev" indexed="true" stored="false" multiValued="true"/> -->

   <!-- non-tokenized version of manufacturer to make it easier to sort or group
        results by manufacturer.  copied from "manu" via copyField -->
   <!-- <field name="manu_exact" type="string" indexed="true" stored="false"/> -->

   <!-- <field name="payloads" type="payloads" indexed="true" stored="true"/> -->

   <!-- Uncommenting the following will create a "timestamp" field using
        a default value of "NOW" to indicate when each document was indexed.
     -->
   <!--
   <field name="timestamp" type="date" indexed="true" stored="true" default="NOW" multiValued="false"/>
     -->

   <!-- Dynamic field definitions.  If a field name is not found, dynamicFields
        will be used if the name matches any of the patterns.
        RESTRICTION: the glob-like pattern in the name attribute must have
        a "*" only at the start or the end.
        EXAMPLE:  name="*_i" will match any field ending in _i (like myid_i, z_i)
        Longer patterns will be matched first.  if equal size patterns
        both match, the first appearing in the schema will be used.  -->
   <!--
   <dynamicField name="*_i"  type="int"    indexed="true"  stored="true"/>
   <dynamicField name="*_s"  type="string"  indexed="true"  stored="true"/>
   <dynamicField name="*_l"  type="long"   indexed="true"  stored="true"/>
   <dynamicField name="*_t"  type="text"    indexed="true"  stored="true"/>
   <dynamicField name="*_b"  type="boolean" indexed="true"  stored="true"/>
   <dynamicField name="*_f"  type="float"  indexed="true"  stored="true"/>
   <dynamicField name="*_d"  type="double" indexed="true"  stored="true"/>
   <dynamicField name="*_dt" type="date"    indexed="true"  stored="true"/>
    -->

   <!-- some trie-coded dynamic fields for faster range queries -->
   <!--
   <dynamicField name="*_ti" type="tint"    indexed="true"  stored="true"/>
   <dynamicField name="*_tl" type="tlong"   indexed="true"  stored="true"/>
   <dynamicField name="*_tf" type="tfloat"  indexed="true"  stored="true"/>
   <dynamicField name="*_td" type="tdouble" indexed="true"  stored="true"/>
   <dynamicField name="*_tdt" type="tdate"  indexed="true"  stored="true"/>

   <dynamicField name="*_pi"  type="pint"    indexed="true"  stored="true"/>

   <dynamicField name="ignored_*" type="ignored" multiValued="true"/>
   <dynamicField name="attr_*" type="textgen" indexed="true" stored="true" multiValued="true"/>

   <dynamicField name="random_*" type="random" />
    -->
   <!-- uncomment the following to ignore any fields that don't already match an existing 
        field name or dynamic field, rather than reporting them as an error. 
        alternately, change the type="ignored" to some other type e.g. "text" if you want 
        unknown fields indexed and/or stored by default --> 
   <!--dynamicField name="*" type="ignored" multiValued="true" /-->

 </fields>

 <!-- Field to use to determine and enforce document uniqueness. 
      Unless this field is marked with required="false", it will be a required field
   -->
 <uniqueKey>id</uniqueKey>

 <!-- field for the QueryParser to use when an explicit fieldname is absent -->
 <defaultSearchField>global</defaultSearchField>

 <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
 <solrQueryParser defaultOperator="OR"/>

  <!-- copyField commands copy one field to another at the time a document
        is added to the index.  It's used either to index the same field differently,
        or to add multiple fields to the same field for easier/faster searching.  -->

   <copyField source="title" dest="global"/>
   <copyField source="description" dest="global"/>

</schema> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:52:17.987

根据所描述的行为，听起来您正在尝试使用开箱即用的基本 SearchHandler 查询语法来搜索多个字段。这不会像你希望的那样成功。

有许多可用选项：

1.  前端查询，以便发送完全限定的字段名称（例如“fielda:foo OR fieldb:foo”）
2.  将可搜索字段的内容复制到单个搜索字段中（通过 copyField）并将其设为要搜索的默认字段
3.  使用 Solr Dismax 语法并指定多个 QueryFields（请求中的 qf 参数）

由于您有不同类型的字段，并且想要应用通配符匹配和其他类似的东西，我建议您使用 Dismax 路线并考虑创建一个更适合您需求的查询处理程序：

更多信息：

*   默认的 SearchHandler：[http ://wiki.apache.org/solr/SearchHandler](http://wiki.apache.org/solr/SearchHandler)
*   带有 Dismax 的 Solr：[http ://wiki.apache.org/solr/DisMaxQParserPlugin](http://wiki.apache.org/solr/DisMaxQParserPlugin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:51:19.563

是的，在字段定义后的 schema.xml 中添加这样的指令：

```
<copyField source="sku" dest="text"> 
```

假设 defaultSearchField 设置为`text`.

要搜索所有以 96 开头的 SKU，您可以搜索 96*。请记住，尽管这将返回以 96 开头的所有字段（不仅仅是 SKU）。要将其限制为 SKU，您必须搜索`sku:96*`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T20:37:15.790

您需要`copyField`对您希望默认搜索的字段进行设置。

由于您`defaultSearchField`设置为`global`，请尝试：

```
<copyField source="sku" dest="global"/> 
```

您可能希望对以下内容执行相同操作`collection`：

```
<copyField source="collection" dest="global"/> 
```

为了在没有特殊运算符的情况下获得部分匹配（例如：?q=95），您需要调整 NGram 过滤器。索引时间和查询时间分析器的当前设置是：

```
<filter class="solr.EdgeNGramFilterFactory" minGramSize="3" maxGramSize="6"/> 
```

这意味着部分匹配将提供 3 到 6 个字符，例如：

*   959
*   9596
*   95962
*   596
*   ...

如果你想允许它来自 2 个字符（例如：）`95`，请在两个分析器的过滤器中更改它`minGramSize`，你应该很高兴：

```
<filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="6"/> 
```

最后，您的`global`字段可能不应该被存储（默认情况下），而只能被索引：

```
<field name="global" type="text_fr" indexed="true" stored="false" required="false" multiValued="true" /> 
```

请记住，您需要重新启动 Solr 并重新索引才能使更改生效。

# wordpress - 对过度使用 get_option 感到难过

> ID：11057101
> 
> 赞同：2
> 
> 时间：2012-06-15T19:35:43.573
> 
> 标签：wordpress

我一直在使用设置 API 来处理它。现在我觉得我对如何使用它有了一个不错的了解，我想优化一下我的操作方式。

我主要关心的是使用`get_option`每个回调来创建每个设置输入。我正计划缓存它们，所以我不需要调用`get_option`10 次以上。

我的问题是，在我进行缓存之前，wordpress 是否有自己的 get_option 每页加载缓存？

谢谢，马克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:41:21.090

~~不，WordPress 没有那种缓存。它甚至过于频繁地调用 get_option()。~~

编辑＃1：`wp_load_alloption()`将从数据库加载每个选项到缓存，因此`get_option()`如果在缓存中找不到任何选项，则只会从数据库加载。

见下文（原始答案）为了减少 get_option() 的使用：

我更倾向于将它们全部包装到一个对象中以减少 get_option 的使用。我总是在我的主题上做这些第一件事：

```
global $mytheme;

$mytheme = new stdClass;
$mytheme->something = get_option( 'something' ); 
```

我为在我的主题上重复使用的每个设置执行此操作，因此 get_option 只会加载一次。

接下来我想要调用选项，我只使用：

```
function something() {
    global $mytheme;

    $something = $mytheme->something; 

    return $something;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:37:28.197

您可以在 1 个选项中存储多个值。只需喂食`update_option`或`add_option`数组。

在缓存说明中查看这些链接： http:
[//www.catswhocode.com/blog/wordpress-transients-api-practical-examples](http://www.catswhocode.com/blog/wordpress-transients-api-practical-examples)
[http://codex.wordpress.org/Transients_API](http://codex.wordpress.org/Transients_API)

# syntax-error - 如何修复“第 10 行 Feedburner 错误中的错误：元素类型“META”与关闭标签“”

> ID：11057105
> 
> 赞同：1
> 
> 时间：2012-06-15T19:36:02.550
> 
> 标签：syntax-error, feedburner

提要不断出现和消失，当提要消失时，它会显示以下消息：“您输入的 URL 似乎不是有效的提要。我们遇到了以下问题：第 10 行错误：元素类型“META”必须由匹配的结束标签 ""." 所以请帮我解决它

# c# - EditorFor 没有生成正确的 html

> ID：11057106
> 
> 赞同：0
> 
> 时间：2012-06-15T19:36:09.210
> 
> 标签：c#, asp.net-mvc-3, viewmodel, data-annotations, editorfor

我有一个 mvc Web 项目，我尝试使用 EditorFor 扩展方法呈现复选框列表，但结果只是将 id 显示为文本而不是复选框列表。

这是视图中的代码：

```
 <div id="permissions" class="tab-body">
     @Html.Label("Permissions :")
     @Html.EditorFor(x => Model.Permissions)
     <br />
     <br />
  </div> 
```

这是对象“模型”的属性“权限”：

```
 [DisplayName("Permissions")]
  public List<PermissionViewModel> Permissions { get; set; } 
```

这是 PermissionViewModel：

公共类 PermissionViewModel { public int Id { get; 放; }

```
 public UserGroupPermissionType Name { get; set; }

  public string Description { get; set; }

  public bool IsDistributable { get; set; }

  public bool IsGranted { get; set; } 
```

}

最后，这是浏览器中的结果：

```
<div id="permissions" class="tab-body" style="display: block;">
<label for="Permissions_:">Permissions :</label>
192023242526272829
<br>
<br>
</div> 
```

您知道为什么没有正确生成 html 吗？缺少依赖项？依赖冲突？Web.Config 配置不正确？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:43:25.963

也许你想自己做点什么？

```
 public delegate object Property<T>(T property);

    public static HtmlString MultiSelectListFor<TModel, TKey, TProperty>(
        this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, IEnumerable<TKey>>> forExpression,
        IEnumerable<TProperty> enumeratedItems,
        Func<TProperty, TKey> idExpression,
        Property<TProperty> displayExpression,
        Property<TProperty> titleExpression,
        object htmlAttributes) where TModel : class
    {
        //initialize values
        var metaData = ModelMetadata.FromLambdaExpression(forExpression, htmlHelper.ViewData);
        var propertyName = metaData.PropertyName;
        var propertyValue = htmlHelper.ViewData.Eval(propertyName).ToStringOrEmpty();
        var enumeratedType = typeof(TProperty);

        //check for problems
        if (enumeratedItems == null) throw new ArgumentNullException("The list of items cannot be null");

        //build the select tag
        var returnText = string.Format("<select multiple=\"multiple\" id=\"{0}\" name=\"{0}\"", HttpUtility.HtmlEncode(propertyName));
        if (htmlAttributes != null)
        {
            foreach (var kvp in htmlAttributes.GetType().GetProperties()
             .ToDictionary(p => p.Name, p => p.GetValue(htmlAttributes, null)))
            {
                returnText += string.Format(" {0}=\"{1}\"", HttpUtility.HtmlEncode(kvp.Key),
                 HttpUtility.HtmlEncode(kvp.Value.ToStringOrEmpty()));
            }
        }
        returnText += ">\n";

        //build the options tags
        foreach (TProperty listItem in enumeratedItems)
        {
            var idValue = idExpression(listItem).ToStringOrEmpty();
            var displayValue = displayExpression(listItem).ToStringOrEmpty();
            var titleValue = titleExpression(listItem).ToStringOrEmpty();
            returnText += string.Format("<option value=\"{0}\" title=\"{1}\"",
                HttpUtility.HtmlEncode(idValue), HttpUtility.HtmlEncode(titleValue));
            if (propertyValue.Contains(idValue))
            {
                returnText += " selected=\"selected\"";
            }
            returnText += string.Format(">{0}</option>\n", HttpUtility.HtmlEncode(displayValue));
        }

        //close the select tag
        returnText += "</select>";
        return new HtmlString(returnText);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:54:39.453

看起来好像您需要为“PermissionViewModel”类创建一个编辑器模板，因为现在，MVC 似乎对如何为如此复杂的对象制作一个编辑器感到困惑。

在提供视图的文件夹中，添加一个名为“EditorTemplates”的文件夹

然后在该文件夹中添加一个新的局部视图。代码应该是：

```
@model IEnumberable<PermissionViewModel>
@foreach(var permission in Model)
@Html.EditorFor(x => x.Name)
@Html.EditorFor(x => x.Description)
@Html.EditorFor(x => x.IsDistributable)
@Html.EditorFor(x => x.IsGranted) 
```

您还需要为 Name 类创建一个编辑器模板。

所以现在在你看来你可以打电话

```
<div id="permissions" class="tab-body">
 @Html.Label("Permissions :")
 @Html.EditorFor(x => Model.Permissions)
 <br />
 <br />
</div> 
```

MVC 会知道使用您刚刚为您的许可制作的编辑器模板。

学习编辑器模板的好资源在这里：[http ://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)

# ios - Cocos2d 1.0.1 问题。“...之前的预期属性属性”

> ID：11057107
> 
> 赞同：0
> 
> 时间：2012-06-15T19:36:10.130
> 
> 标签：ios, cocos2d-iphone

刚开始学习 Cocos2d 并在 Xcode 4.3.3 (4E3002) 中遇到错误。在 .h 和 .m 文件中定义属性和综合语句时出现问题。屏幕：

[http://uaimage.com/image/b3cef723](http://uaimage.com/image/b3cef723)

[http://uaimage.com/image/59b25425](http://uaimage.com/image/59b25425)

有什么想法有什么问题吗？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:54:30.280

您使用的是过时的 LLVM GCC，很可能是因为这是 cocos2d 1.0.1 项目的默认设置。LLVM GCC 无法识别`strong`关键字（LLVM GCC 的等效项是`retain`）。

将目标的 Build Settings 下的 Compiler 设置更改为“Apple LLVM Compiler 3.x”。

[另请参阅此问题。](https://stackoverflow.com/questions/8584152/getting-expected-a-property-attribute-before-strong-when-compiling-an-arc-fi)

# android - Android - 在屏幕上绘制棋盘游戏？

> ID：11057109
> 
> 赞同：2
> 
> 时间：2012-06-15T19:36:20.600
> 
> 标签：android, graphics2d, ondraw

我正在尝试为 Android 实现一个棋盘游戏，我想就绘制到屏幕的好策略获得一些意见。该板由大约 30 个带有门（线）的房间（矩形）组成，然后是玩家标记的小位图。我在想我可以将要为矩形/线绘制的所有点保存在 ArrayList 中，并使用保存在列表中的点来实际绘制 View 的 onDraw 方法。

对于棋盘游戏的大部分静态棋盘来说，这似乎是一种合理的方法吗？

# html - 将纯文本映射回 HTML 文档

> ID：11057113
> 
> 赞同：2
> 
> 时间：2012-06-15T19:36:42.737
> 
> 标签：html, dom, annotations, mapping

**情况：**我有一组表示[命名实体的字符串，这些字符串是从](http://en.wikipedia.org/wiki/Named-entity_recognition)*曾经*是 HTML 文档的东西中提取的。我还拥有原始 HTML 文档、提供给 NER 引擎的全部标记纯文本以及*剥离文件*中字符串的偏移量/长度。

我需要用突出显示的 NE 实例来注释原始 HTML 文档。为此，我需要执行以下操作：

1.  *在 HTML 文档中*查找 NE 字符串的开始/结束点。导致[DOM 范围对象](http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html)的东西可能是理想的。

2.  给定 Range 对象，对范围应用样式（可能使用类似的东西`<span class="ne-person" data-ne="123">...</span>`）。这很棘手，因为不能保证该范围不会包含多个 DOM 元素（`<a>`,`<strong>`等），并且跨度需要在每个包含元素内正确启动/停止，所以我最终不会得到完全伪造的 HTML。

欢迎任何解决方案（全部或部分）。后端多为 Python/Django，前端使用 jQuery。我们宁愿在后端这样做，但我对任何事情都持开放态度。

（我对如何标记这个问题有点不确定，所以请随时重新标记它。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:22:10.317

使用[范围实用程序方法](https://stackoverflow.com/questions/6139107/programatically-select-text-in-a-contenteditable-html-element)和注释库，例如以下之一：

*   [工匠.js](https://github.com/davidbrooks/Artisan)
*   [注释器.js](https://github.com/openannotation/annotator)
*   [vie.js](https://github.com/szabyg/vie-annotation-bookmarklet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-25T00:17:34.790

免费软件[Rangy](https://github.com/timdown/rangy) JavaScript 库是您的朋友。关于你的两个任务：

1.  **在 HTML 文档中查找 […] 字符串的开始/结束点。**您可以[`Range#findText()`](https://github.com/timdown/rangy/wiki/Text-Range-Module#findtextmixed-searchterm-object-options)从[TextRange](https://github.com/timdown/rangy/wiki/Text-Range-Module)扩展中使用。它确实产生了 DOM Level 2 Range 兼容对象 [ [source](https://github.com/timdown/rangy/wiki/Rangy-Range#introduction) ]。

2.  **给定 Range 对象，将样式 [...] 应用于范围。**这可以使用[Rangy Highlighter](https://github.com/timdown/rangy/wiki/Highlighter-Module)模块来处理。如有必要，它将使用多个 DOM 元素进行突出显示以保持 DOM 树结构。

*讨论：* Rangy 是 @Paul Sweatte 提出的 DOM Level 2 range 实用方法的跨浏览器实现。使用注释库将是范围库功能的进一步扩展；例如，Rangy 将成为 Annotator 2.0 [[来源](http://docs.annotatorjs.org/en/latest/roadmap.html#id4)] 的基础。在您的情况下，这不是必需的，因为您只想渲染高光，不允许用户添加它们。

# paypal - PayPal AdaptivePayment：如果在处理 Refund API 时第二收款人没有现金会发生什么

> ID：11057124
> 
> 赞同：0
> 
> 时间：2012-06-15T19:37:45.250
> 
> 标签：paypal, paypal-adaptive-payments

在处理通过 AdaptivePayment Pay 操作进行的付款的 Refund API 时，如果辅助收款人的账户中没有足够的钱，那么 API 调用会发生什么情况？它会整体失败还是会从主要接收者的账户中提取缺失的费用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T03:19:33.760

使用即时链式支付测试此场景，并取消退款。所以很明显它的全部或没有。

# iphone - initWithFrame 和 drawRect 中框架的宽度和高度不同

> ID：11057125
> 
> 赞同：0
> 
> 时间：2012-06-15T19:37:53.777
> 
> 标签：iphone, core-graphics

**目标**：自定义单元格的背景视图。

这是我正在做的

```
-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {
    NSLog(@"cellForRowAtIndexPath cellForRowAtIndexPath");
    static NSString *cellIdentifier = @"CellIdentifier";
    UITableViewCell *cell   =   [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if ( cell == nil ) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }
    cell.backgroundView = [[CustomCellBackground alloc] initWithFrame:CGRectMake(0, 0, 200, 80)];

    cell.backgroundColor=   [UIColor purpleColor];

    return cell;
} 
```

CustomCellBackground.m

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    NSLog(@"frame.x = %f",frame.origin.x);
    NSLog(@"frame.y = %f",frame.origin.y);
    NSLog(@"frame.width = %f",frame.size.width);
    NSLog(@"frame.height = %f",frame.size.height);
    if (self) {
        self.backgroundColor    =   [UIColor purpleColor];

    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
NSLog(@"frame.x = %f",self.frame.origin.x);
NSLog(@"frame.y = %f",self.frame.origin.y);
NSLog(@"frame.width = %f",self.frame.size.width);
NSLog(@"frame.height = %f",self.frame.size.height);

} 
```

在 CustomCellBacground 中，我在 initWithFrame 和 drawRect 方法中打印出框架的大小，而我得到的是

```
 IN INITWITHFRAME
frame.x = 0.000000
frame.y = 0.000000
frame.width = 200.000000
frame.height = 80.000000

    IN DRAWRECT

//Updated as requested
rect.x = 0.000000
rect.y = 0.000000
rect.width = 302.000000
rect.height = 201.000000

frame.x = 9.000000
frame.y = 0.000000
frame.width = 302.000000
frame.height = 201.000000 
```

问题：为什么`drawRect()`最近改变了框架的大小。这些值是否应该与`initWithFrame`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:18:22.600

单元格调整其大小`backgroundView`以填充单元格。您传递给的框架`initWithFrame:`无关紧要。

# windows - 在 iis 7 上发布 nodejs express

> ID：11057126
> 
> 赞同：1
> 
> 时间：2012-06-15T19:37:54.017
> 
> 标签：windows, node.js, iis-7, express, publish

我正在使用：Win7 pro 和 iis 7 上的节点 0.6.19 npm 1.1.24。

我在 iisnode/www/ 中有一个名为“test”的文件夹。在这个文件夹中，我想创建一个新的 nodejs-express-app。

我做了什么

*   在另一个目录中创建一个文件夹，例如 D:/development/node/test
*   在控制台中运行：npm install express -g
*   运行：express -t 玉
*   运行：npm install -d

使用 'localhost:3000' 一切都很好。

*   现在我用 app.js 中的“process.env.port”替换端口“3000”
*   复制 iisnode/www/test 中的所有文件
*   获取 web.config 并设置处理程序并重写规则

    ```
    <handlers>
      <add name="iisnode" path="app.js" verb="*" modules="iisnode" />
    </handlers>

    <rewrite>
        <rules>
            <rule name="express">
                <match url="test/*" />
                <action type="Rewrite" url="app.js" />
            </rule>
        </rules>
    </rewrite> 
    ```

我重新启动 iis 并得到：“Cannot GET /node/test/app”

我的错误在哪里？有人能帮我吗？

我不是 IIS 的高手。

# wpf - 如何使用 StoryBoard 旋转图像

> ID：11057127
> 
> 赞同：1
> 
> 时间：2012-06-15T19:37:57.573
> 
> 标签：wpf, animation

我正在尝试旋转图像并想使用情节提要，因为在下一阶段我需要添加多个运行时间的动画。

我的代码在按钮的单击事件中，如下所示：

```
//start the animation
            DoubleAnimation animationRotation = new DoubleAnimation();

            animationRotation.From = -17;
            animationRotation.To = 17;
            animationRotation.Duration = new Duration(TimeSpan.FromMilliseconds(NumericDisplay.Milliseconds));
            animationRotation.RepeatBehavior = RepeatBehavior.Forever;
            animationRotation.AccelerationRatio = 0.3;
            animationRotation.DecelerationRatio = 0.3;
            animationRotation.AutoReverse = true;

            Storyboard storyboard = new Storyboard();

            Storyboard.SetTarget(animationRotation, Arm);
            Storyboard.SetTargetProperty(animationRotation,
              new PropertyPath("(UIElement.RenderTransform).(TransformGroup.Children)[0].(RotateTransform.Angle)")); 

            storyboard.Children.Add(animationRotation);

            // Add the storyboard to the tracking collection.      
            //this.Stostoryboards.Add(bomb, storyboard);

            // Configure and start the storyboard.
            this.BeginStoryboard(storyboard); 
```

代码编译没有警告但点击事件没有启动动画，

**编辑** 建议的答案之一要求我检查 XAML 包括旋转转换的定义......下面的 XAML 是我正在使用的

```
<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="ResourceDictionary.xaml"/>
        </ResourceDictionary.MergedDictionaries>
        <ImageBrush x:Key="ImageBrush_Decrement" ImageSource="Images/pad-metronome-decrement-button.png" Stretch="Fill"/>
        <ImageBrush x:Key="ImageBrush_Increment" ImageSource="Images/pad-metronome-increment-button.png" Stretch="Fill"/>

    </ResourceDictionary>
</UserControl.Resources>
<UserControl.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded">

    </EventTrigger>
</UserControl.Triggers>

<Grid x:Name="LayoutRoot" Height="412">
    <Image x:Name="MetronomeWindowBackground" Height="140" Margin="237,1.5,231,0" Source="Images\pad-metronome-top-under-bg.png" Stretch="Fill" VerticalAlignment="Top"/>
    <Image x:Name="Arm" Margin="506,17,493,0" Source="Images\pad-metronome-arm.png" Stretch="Fill" Height="326" VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5">
        <Image.RenderTransform>
            <TransformGroup>
                <RotateTransform/>

            </TransformGroup>
        </Image.RenderTransform>
    </Image>
    <Image x:Name="MetronomeFlash" Height="209" Margin="104,0,96,0" Source="Images\pad-metronome-flash-top-landscape.png" Stretch="Fill" VerticalAlignment="Top" d:IsHidden="True" />
    <Image x:Name="MetronomeBackground" Height="209" Source="Images\pad-metronome-top-bg-landscape.png" Stretch="Fill" VerticalAlignment="Top" Margin="3,0,-3,0"/>
    <Image x:Name="MetronomeStartButton" Margin="379.5,100.5,373.5,0" Source="Images\pad-metronome-start-button-base.png" Stretch="Fill" Height="110" VerticalAlignment="Top"/>
    <Image x:Name="MetronomeTapPadLeft" HorizontalAlignment="Left" Height="209" Margin="5,1.5,0,0" Source="Images\pad-metronome-tap-pad-left.png" Stretch="Fill" VerticalAlignment="Top" Width="136"/>
    <Image x:Name="MetronomeTapPadRight" HorizontalAlignment="Right" Source="Images\pad-metronome-tap-pad-right.png" Stretch="Fill" Width="136" Height="209" VerticalAlignment="Top"/>
    <Image x:Name="MetronomeWindowHighlight" Height="105" Margin="238.5,18,231.5,0" Source="Images\pad-metronome-window-overlay.png" Stretch="Fill" VerticalAlignment="Top"/>
    <Image x:Name="MetronomeBottomBackground" Margin="3,208,-3,362" Source="Images\pad-metronome-section-bottom-bg.png" Stretch="Fill"/>
    <my:MetronomeLargeNumericDisplay HorizontalAlignment="Left" Margin="459,120,0,0" x:Name="NumericDisplay" VerticalAlignment="Top" Value="999" Width="122.25" />
    <Image Height="78" Margin="448,110.5,436,0" Source="Images\pad-metronome-start-button-overlay.png" Stretch="Fill" VerticalAlignment="Top"
           x:Name="DisplayOverlay" MouseDown="DisplayOverlay_MouseDown" />
    <RepeatButton x:Name="ButtonDecrement" Content="" BorderThickness="7" HorizontalAlignment="Left" Margin="252,110.5,0,0" VerticalAlignment="Top" Width="149" Height="100" Background="{DynamicResource ImageBrush_Decrement}" Style="{DynamicResource RepeatButtonStyle_noflash}" BorderBrush="{DynamicResource ImageBrush_Decrement}" d:LayoutOverrides="HorizontalAlignment" Click="ButtonDecrement_Click"></RepeatButton>
    <RepeatButton Content="" BorderThickness="7" HorizontalAlignment="Left" Margin="631,110.5,0,0" VerticalAlignment="Top" Width="149" Height="100" Background="{DynamicResource ImageBrush_Increment}" Style="{DynamicResource RepeatButtonStyle_noflash}" BorderBrush="{DynamicResource ImageBrush_Decrement}" Name="ButtonIncrement" Click="ButtonIncrement_Click" />
</Grid> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:15:44.660

您发布的代码似乎没问题，但是，路径引用了*现有*元素，因此请确保您已在`Arm`定义控件的 xaml 中包含适当的节点。

假设`Arm`是一个`Rectangle`控件。然后，您的 xaml 应该或多或少像这样：

```
...
<Rectangle x:Name="Arm" Fill="Aqua" Width="100" Height="100" Canvas.Left="100" Canvas.Top="100">
    <Rectangle.RenderTransform>
        <TransformGroup>
            <RotateTransform />
        </TransformGroup>
    </Rectangle.RenderTransform>
</Rectangle>
... 
```

`Arm`可以是另一种类型的控件，但重要的是`RenderTransform`,`TransformGroup`和`RotateTransform`节点已定义，因此动画有一些现有元素需要更改，如`PropertyPath`代码中指定的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:50:32.307

在对新项目和大量简化代码进行了很多处理之后，我在另一个线程中提出的问题略有不同，并且有人发布了工作代码。

经过调查，我的动画无法正常工作的原因是我为动画提供了持续时间，而不是故事板本身！多哈。

完整答案在这里（这是我收到的关于这个主题的最完整的答案之一）

[如何仅使用 c# 代码在图像对象上创建旋转动画（在 WPF 窗口内）](https://stackoverflow.com/questions/11073573/how-do-i-create-a-rotate-animation-on-an-image-object-using-c-sharp-code-only-i)

卢卡斯，感谢您在这个问题上的耐心和帮助。

担

# security - Symfony2，如何使用自定义功能将所有控制器保护在一个地方？

> ID：11057129
> 
> 赞同：0
> 
> 时间：2012-06-15T19:38:05.413
> 
> 标签：security, symfony

我已经定义了我的控制器，但我想保护所有这些控制器，如下所示：

```
// In my Controller Class 
public function chooseDateAction()
{
    if($this->get('MY.roles_features')
            ->isGranted($this->container->get('request')->get('_route')))
    {
         // Do something 

    }
    else
    {
        throw new AccessDeniedException();
    }

    return array( );
} 
```

我必须设计自己的“isGranted”功能，因为`roles`它是动态的。顺便说一句，该功能工作正常！

所以我的问题是我是否必须`isGranted`在我的所有功能中重复该功能，`Controllers`或者我可以将它放在某个地方以减少代码冗余。

我知道我必须放置`isGranted`在我的安全的一些顶层，但问题是如何以及在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T10:21:20.933

尝试编写一个基本控制器，它将检查构造，如果`isGranted`方法通过，否则抛出异常。例如：

```
<?php

namespace Acme\DolanBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\Security\Core\Exception\AccessDeniedException;

class BaseController extends Controller
{

    public function __construct()
    {
         if(!$this->get('MY.roles_features')
                  ->isGranted($this->container->get('request')->get('_route')))
        {
         throw new AccessDeniedException('Gooby pls');
        }
    }
} 
```

然后只需在其他控制器中扩展 BaseController 即可。

# sql - 当所选变量不存在时，如何显示 NULL 值而不是删除整行

> ID：11057136
> 
> 赞同：1
> 
> 时间：2012-06-15T19:38:38.867
> 
> 标签：sql, left-join

我正在尝试使用第三个链接同一数据库中的两个表。

第一个表是产品并具有产品代码。第二张桌子是商店，有商店代码。第三个表有shopcode和对应的productcode。

但是，并非所有产品都已售出，现在它只是在结果中删除了这些产品。

这将列表从 1600 缩小到 753，但是我想查看产品列表和商店是次要问题。

因此，我不想删除整行，而是希望表格只是说没有商店通过将该区域保留为灰色或声明为 NULL 来出售它。

我用过：

```
SELECT * FROM product, sells
WHERE product.productcode = sells.shopcode 
ORDER BY product.productcode. 
```

我尝试使用谷歌和我的一些朋友找到它，但我似乎找不到答案。

谢谢大家，Jell0zz

编辑：在 Tamago 的帮助下，我把所有东西都放在了正确的桌子上，但至少在 firefox 上，另一个问题是，当没有价值而不是离开桌子的边界时，它会留下一个空白空间，这使它看起来像有部分失踪。另外，在第一列中我放了productID，但是它似乎只显示productID，如果它也在sells中，否则它也会留下一个空白空间。

编码：

```
$sql = 'SELECT * FROM bier LEFT JOIN schenkt ON bier.biercode = schenkt.biercode LEFT JOIN kroeg ON schenkt.kroegcode = kroeg.kroegcode'; $resultaat = $db->query($sql); echo '<table border = 0>'; echo "<tr> <td style = 'width:100%;'>"; echo '<table border = 1>'; foreach($resultaat as $row) { echo '<tr>'; $nummer = $row['bier.biercode']; echo '<td>'.$row['bier.biercode'].'</td>'; echo '<td>'.$row['naam'].'</td>'; echo '<td>'.$row['type'].'</td>'; echo '<td>'.$row['stijl'].'</td>'; echo '<td>'.$row['alcohol'].'</td>'; echo '<td>'.$row['kroegnaam'].'</td>'; echo '<td>'.$row['adres'].'</td>'; echo '<td>'.$row['plaats'].'</td>'; 
```

可能值得注意的是 t1=bier（或英语的 beer） t2=schenkt（或卖）和 t3=kroeg（或 bar）

免责声明，我不是酒鬼，但我认为我的老师可能是；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:42:12.930

```
SELECT * FROM Products t1

LEFT JOIN myBridgeTable t2
ON t1.ProductID = t2.ProductID

LEFT JOIN Shops t3
ON t2.ShopID = t3.ShopID 
```

# google-drive-api - 将 Google Drive 应用程序安装为本地“解包”Chrome 扩展程序

> ID：11057138
> 
> 赞同：4
> 
> 时间：2012-06-15T19:39:04.560
> 
> 标签：google-drive-api

我正在尝试按照此处的说明编写 Google Drive 应用程序： [https ://developers.google.com/drive/listing](https://developers.google.com/drive/listing)

我创建了一个 Chrome 扩展程序（带有 manifest.json 和一些图标图像）。我的 manifest.json 具有以下属性集：

```
  “容器”：“GOOGLE_DRIVE”，
  “api_console_project_id”：“XXXXXXXXXXXX”，

```

[其中所有 X 都是我从http://code.google.com/apis/console](http://code.google.com/apis/console)获得的十二位数 ID 。

我使用浏览器的内置 Chrome 扩展页面 (chrome://chrome/extensions) 上的“加载解压扩展”按钮安装我的扩展。

但我无法让该应用程序显示在 Google Drive 的任何下拉菜单中。是否必须从 Chrome 网上应用店安装所有支持 Google-Drive 的应用程序，或者我是否应该能够如上所述从本地文件安装一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T21:53:31.087

该应用程序必须从 Chrome 网上应用店安装，但您只能将其发布到测试帐户：[https ://developers.google.com/drive/listing#publish_to_test_accounts](https://developers.google.com/drive/listing#publish_to_test_accounts)

# groovy - 判断一个方法是否使用“字符串”声明

> ID：11057139
> 
> 赞同：4
> 
> 时间：2012-06-15T19:39:08.447
> 
> 标签：groovy

出于 DSL 目的，我想检测定义如下的方法：

```
 def "methodName"() {} 
```

或者

```
 def "This is another method name"() {} 
```

有没有办法使用反射来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:43:11.033

此信息在运行时不可用。即使使用 AST 转换，您也无法确定该方法是使用字符串定义的。

为此，您必须自己编写`AntlrParserPlugin`并使用自定义`CompilerConfiguration`. 然后在 methodDef from 中`AntlrParserPlugin`，当解析方法的名称时，您可以检查名称前面的字符是否是双引号。如果找到双引号，则在生成的 中添加自定义注解`MethodNode`，以便信息在运行时可用...

# ios - CoreData NSFetchedResultsController 计数无法正常工作

> ID：11057145
> 
> 赞同：0
> 
> 时间：2012-06-15T19:39:40.410
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我有这个 fetchedResult 方法：

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (__fetchedResultsController != nil) {
        return __fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Cards" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    [fetchRequest setFetchBatchSize:20];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"Cards" ascending:YES];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;

    if (![self.fetchedResultsController performFetch:&error]) {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __fetchedResultsController;
} 
```

但是，当我要求它时，`self.fetchedResultsController.fetchedObjects.count`它总是会给我比应有的多一件。第一项总是这样：`"<Cards: 0x83e9c50> (entity: Cards; id: 0x83e9c80 <x-coredata:///Cards/t8C371600-7875-468C-A529-C918F0008C384> ; data: {\n cardID = nil;\n favourite = 0;\n imageData = nil;\n})"`但是通过终端检查 sqlite 我可以看到这个项目不存在。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:12:49.743

很难理解发生了什么。你的代码对我来说看起来不错。但是，如果您使用缓存机制，这可能是您遇到的奇怪行为。

要测试，请尝试使用`nil`而不是缓存，`NSFetchedResultsController`或者先删除缓存，然后再执行请求。

```
+ (void)deleteCacheWithName:(NSString *)name 
```

如果您通过`nil`，所有的现金都将被删除。

如果你修复它，请告诉我。

**PS**我认为在幕后，现金被保存下来，它们可以存在于不同的应用程序初创公司中。有人知道吗？

# iphone - iOS 执行 LDAP 搜索

> ID：11057152
> 
> 赞同：1
> 
> 时间：2012-06-15T19:39:57.063
> 
> 标签：iphone, ios, ldap

嗨，我正在尝试将 LDAP 搜索功能集成到我的应用程序中，类似于 iPhone 在邮件、联系人、日历下的应用程序。

我做了一些谷歌搜索，但我很安静。谁能指出我实现这一目标的正确方向？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:50:24.357

[从这里](https://github.com/bindle/iOSPorts)获取适用于 iOS 的 OpenLDAP 。[您可以在此处](http://www.yolinux.com/TUTORIALS/LinuxTutorialLDAP-SoftwareDevelopment.html)找到 OpenLDAP 教程。

# php - 简单的 if() 没有按预期工作

> ID：11057153
> 
> 赞同：0
> 
> 时间：2012-06-15T19:39:57.900
> 
> 标签：php, mysql, login, login-control, login-script

我确信我只是忽略了一些东西，我花了几天的时间来解决这个问题，但似乎无法弄清楚。

在上一页登录后，我得到用户名和密码，

```
$username = mysql_escape_string($_POST['adminusername']);
$password = mysql_escape_string($_POST['adminpassword']); 
```

然后我去数据库从数据库中提取用户名和密码，

```
$sql = "SELECT username, password FROM `weaponsadmin`";
$rows = $db->query($sql); while ($record = $db->fetch_array($rows)) { 
```

现在这是让我感到困惑的部分，如果我有以下内容，无论我使用什么用户名或密码，它都不允许我登录，

```
if ( ($record[username]==$username) && ($record[password]==$adminpassword) ){
   $_SESSION['loggedin'] = true;
   $_SESSION['username'] = $adminusername;
   header( "Location: admin.php" ) ;
}
else {
   header( "Location: index.php?login=error" ) ;
} 
```

但是，如果我使用以下内容，如果用户名正确，它将允许我登录，但它允许我输入任何密码并且它可以工作，

```
$adminusername = $record[username]; 
$adminpassword = $record[password];

if ( ($adminusername==$username) && ($adminpassword==$adminpassword) ) {
   $_SESSION['loggedin'] = true;
   $_SESSION['username'] = $adminusername;
   header( "Location: admin.php" ) ;
}
else {
   header( "Location: index.php?login=error" ) ;
} 
```

所以总而言之，由于某种原因，该`&&`部分似乎无法正常工作，如果有人可以帮助我编写代码并让我知道我的代码可以在哪里改进以获得更好的安全性以及如何使其正常工作，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:42:05.917

这里有什么意义`$adminpassword==$adminpassword`：

我认为应该是：

```
if ( ($adminusername==$username) && ($adminpassword==$password) ){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:41:50.513

`$record[username]`应该是`$record["username"]`（等等）。索引是字符串或整数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T19:57:13.640

您使用错误的数组。
您期望：`$record[username]; //retrieve contains of key "username"`
真正发生的事情：

```
 $record[username]; 
    /* 
         retrieves a key in the record array under the key which is a value of a
         constant named "username" (if it's defined) and an empty string with 
         E_WARNING if it's not. 
    */ 
```

您需要对索引名称进行单引号或双引号，例如`$records['username']`. 但是，您可以在字符串中使用不带引号的数组索引（这些索引将按您的预期工作） -> `$someString = "Blahblahblah, ergo $record[username] is a donkey.";`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T19:54:30.163

您可以使用`===`而不是`==`. 读[这个](https://stackoverflow.com/questions/3333353/php-string-comparison-vs-strcmp)。
strcmp() 在这里不需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T19:55:44.973

为了补充迈克尔的答案，您不应该使用 == 进行字符串比较的原因（希望这将帮助您在将来解决类似的困难）是当您在对象（例如字符串，或在大多数语言中，实际上除了 int、double、float、char、long、short 或 boolean 之外的任何东西），您真正要比较的是每个对象在内存中的地址，即指针值。

如果您想知道两个变量是否引用同一个对象，这很有用，但如果您想知道两个对象是否相同，则不是很有用。所以这是真的：

```
$string_a = $some_string;
$string_b = $some_string;
$string_a == $string_b; 
```

但这不是：

```
$string_a = getUserInput();  # user types in "hello"
$string_b = getUserInput();  # user types in "hello"
$string_a == $string_b; 
```

如果它将字符串文字存储在内存中独立于它们所附加的用户定义变量，这可能是正确的，具体取决于您所使用的语言：

```
$string_a = "hello";
$string_b = "hello";
$string_a = $string_b; 
```

因此，除非您要检查两个对象是否实际上是同一个对象，而不仅仅是相同，否则请使用我之前建议的函数来比较两者。这样的函数通常会下降到原始类型的级别，可以使用 == 进行比较，如果所有这些比较都进行，则返回 true。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-15T19:45:23.890

不要`==`用于字符串比较。相反，使用`strcmp()`or`===`来匹配字符串。

# c# - C# 使用和编译 Windows.Form

> ID：11057155
> 
> 赞同：3
> 
> 时间：2012-06-15T19:40:09.033
> 
> 标签：c#, user-interface, reference, system.componentmodel

我正在用 C# 编写一个 GUI。我正在按照[这个](http://www.informit.com/articles/article.aspx?p=27316)简单的教程开始。要编译，我需要引用 System.Windows.Forms.DLL System.Drawing.DLL，所以我输入

```
csc /r:System.Windows.Forms.DLL /r:System.Drawing.DLL FirstForm.cs 
```

但是，我收到这样的错误：

```
FirstForm.cs(6,14): error CS0012: The type 'System.ComponentModel.Component' is
    defined in an assembly that is not referenced. You must add a reference
    to assembly 'System, Version=4.0.0.0, Culture=neutral,
    PublicKeyToken=b77a5c561934e089'.
c:\Windows\Microsoft.NET\Framework\v4.0.30319\System.Windows.Forms.dll:
    (Location of symbol related to previous error) 
```

我已经在我的路径中添加了“c:\Windows\Microsoft.NET\Framework\v4.0.30319”。我不知道为什么它告诉我在我已经拥有它时要引用它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T19:43:21.113

您需要添加`/r:System.DLL`到命令行参数

# facebook-javascript-sdk - 使用 opengraph api 发布自定义操作时，描述和标题没有改变

> ID：11057161
> 
> 赞同：1
> 
> 时间：2012-06-15T19:40:46.723
> 
> 标签：facebook-javascript-sdk, facebook-opengraph, meta-tags

我的元标记格式正确，我的代码运行良好。问题是当我更改描述和标题然后发布操作时。我仍然在帖子中得到旧的标题和描述。为什么它显示旧的描述和标题。它是 facebook open graph api 中的错误吗？请回复

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# site: http://ogp.me/ns/fb/site#">
  <meta property="fb:app_id" content="7777777777777" /> 
  <meta property="og:type"   content="site:deal" /> 
  <meta property="og:url"    content="http://www.site.com/deal_success.php" /> 
  <meta property="og:title"  content="war" /> 
  <meta property="og:image"  content="http://site.com/images/logo.png" /> 
  <meta property="og:description" content="ola ola ola ola"/>
  <meta property="og:site_name" content="site.com"/>

function downloadCoupon(url)
{   

                FB.api(
                '/me/winery-site:object',
                'post',
                { deal: 'http://www.site.com/page.php' },
                function(response) {
                    //alert(response);
                   if (!response || response.error) {
                       console.log(response.error);
                      alert('Earror occured'); return;
                        document.location=url;
                   } else {

                      alert('Cook was successful! Action ID: ' + response.id);
                       return;
                        document.location=url;
                   }
                }); 

} 
```

# ios - 为什么不 EXC_BAD_ACCESS？

> ID：11057166
> 
> 赞同：1
> 
> 时间：2012-06-15T19:41:10.107
> 
> 标签：ios, exc-bad-access

我编写了以下代码：

```
NSString *string = [[NSString alloc] initWithFormat:@"test"];
[string release];

NSLog(@"string lenght = %d", [string length]);
//Why I don't get EXC_BAD_ACCESS at this point? 
```

我应该，它应该被释放。上次发布后，retainCount 应该是 0，为什么不是呢？

PS 我正在使用最新的 XCode。

更新：

```
NSString *string = [[NSString alloc] initWithFormat:@"test"];

NSLog(@"retainCount before = %d", [string retainCount]);// => 1

[string release];

NSLog(@"retainCount after = %d", [string retainCount]);// => 1 Why!? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:46:30.800

在这种情况下，框架可能会`@"test"`从`NSString *string = [[NSString alloc] initWithFormat:@"test"];`. 也就是说，它决定了字面量可以被重用，并在这个上下文中重用它。毕竟，输入匹配输出。

但是，您不应该在程序中依赖这些内部优化——只要坚持引用计数规则和明确定义的行为即可。

**更新**

大卫的评论使我对此进行了调查。在我测试的系统上，`NSString *string = [[NSString alloc] initWithFormat:@"test"];`返回一个*新*对象。*您的程序向一个应该被*释放的对象发送消息，并且不符合不朽字符串状态的条件。

您的程序仍然落入未定义的领域，并且恰好在某些情况下似乎给出了正确的结果，这只是作为实现细节的产物 - 或者仅仅是巧合。正如大卫指出的那样，在发布和日志之间添加“东西”可能会导致`string`真正被破坏并可能被重用。如果您真的想知道为什么这一切都有效，您可以阅读 objc 运行时源或在运行时的程序集执行时抓取它。有些可能有解释（运行时实现细节），有些纯属巧合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T19:55:31.387

### **更新：**

*好的。我很累，没有仔细阅读你的问题。*

你没有崩溃的原因是**纯粹的运气**。起初我认为您使用的是`initWithString:`在这种情况下所有关于字符串文字的答案（包括我原来的答案（如下））都是有效的。

* * *

## 我所说的“纯粹的运气”是什么意思

这样做的原因只是对象已被释放，但您的指针仍指向它曾经所在的位置，并且在您再次读取之前内存没有被覆盖。因此，当您访问从未触及的内存中读取的变量时，这意味着您获得了一个有效的对象。这样做是*非常*危险的，并且最终*会*导致未来的崩溃！

如果您开始在发布和日志之间创建更多对象，那么其中一个可能会使用与您的字符串相同的内存，然后您在尝试读取旧内存时会崩溃。

它甚至是如此脆弱，以至于连续调用 log 两次会导致崩溃。

* * *

### **原答案：**

~~字符串文字永远不会被释放！~~

看看[我](https://stackoverflow.com/a/10922957/608157)对[这个问题](https://stackoverflow.com/q/10922888/608157)的回答，了解为什么会这样。

~~[这个答案](https://stackoverflow.com/a/4051487/608157)也有很好的解释。~~

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T19:46:22.813

对已释放对象执行操作是未定义的行为。含义 - 有时你逃脱它，有时它崩溃，有时它在一分钟后在完全不同的位置崩溃，有时十个文件之外的变量被神秘地修改。

要发现这些问题，请使用 NSZombie 技术。查一下。那，还有一些编码纪律。

这一次，你逃脱了，因为释放的内存还没有被任何东西覆盖。`string`指向的内存仍然包含具有正确长度的字符串对象的字节。一段时间后，会出现其他东西，或者内存地址将不再有效。不知道什么时候会发生这种情况。

`nil`但是，向对象发送消息是合法的。实际上，这是 Objective C 中定义的行为 - 没有任何反应，返回 0 或 nil。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T19:46:13.360

一种可能的解释：您多余地动态分配字符串，而不仅仅是使用常量。可能 Cocoa 已经知道这只是浪费内存（如果您没有创建可变字符串），因此它可能会释放分配的对象并返回常量字符串。并且在常量字符串上，释放和保留没有任何效果。

为了证明这一点，值得将返回的指针与常量字符串本身进行比较：

```
int main()
{
    NSString *s = @"Hello World!";
    NSString *t = [[NSString alloc] initWithFormat:s];

    if (s == t)
        NSLog(@"Strings are the same");
    else
        NSLog(@"Not the same; another instance was allocated");

    return 0;
} 
```

# yui-compressor - YUI 压缩器是否支持重写相对路径？

> ID：11057167
> 
> 赞同：9
> 
> 时间：2012-06-15T19:41:09.927
> 
> 标签：yui-compressor

问题是，当我运行 YUI 压缩器（.NET MsBuild 任务）时，缩小的 css 文件保留与原始文件相同的相对路径，并且给定我的内容结构，这会导致图像和其他资源的路径不正确。YUI 是否可以选择将其配置为重写此 URL？如果没有，是否有其他工具可以帮助解决这个问题？

# facebook - 没有浏览器的 Facebook 身份验证

> ID：11057173
> 
> 赞同：0
> 
> 时间：2012-06-15T19:41:18.843
> 
> 标签：facebook, facebook-graph-api, curl

我正在尝试向[Authentication Doc](http://developers.facebook.com/docs/authentication/devices/)`POST`中指定的 URL 发出请求，但它没有返回成功的响应：

```
$ch = curl_init('https://graph.facebook.com/oauth/device?type=device_code&client_id=APPID');
curl_setopt_array($ch, array(
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_USERAGENT => 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1) Gecko/20090624 Firefox/3',
    CURLOPT_POST => true
));
$result = curl_exec($ch);
exit(var_dump($result)); 
```

`APPID`我的应用程序 ID在哪里。它只返回一个`boolean false`. 我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:59:03.140

此身份验证方法不适用于一般用途。从您发布的网址：

> 请注意，我们目前正在与数量有限的合作伙伴一起测试设备身份验证。它目前不可用于一般用途，我们不接受额外的访问申请。

# c - C 结构顺序有什么保证吗？

> ID：11057174
> 
> 赞同：4
> 
> 时间：2012-06-15T19:41:20.280
> 
> 标签：c, pointers, struct

我已经广泛使用了结构，并且看到了一些有趣的东西，尤其是value`*value`不是`value->first_value`指向结构的指针，`first_value`而是第一个成员，`*value`安全吗？

另请注意，由于对齐，不能保证大小，基于架构/寄存器大小的 alginment 值是什么？

我们对齐数据/代码以更快地执行我们可以告诉编译器不要这样做吗？所以也许我们可以保证结构的某些事情，比如它们的大小？

当对结构成员进行指针运算以定位成员偏移量时，我认为你会为大端的`-`小端`+`做，还是只取决于编译器？

*malloc(0) 真正分配了什么？*

**以下代码用于教育/发现目的，并不意味着具有生产质量。**

```
#include <stdlib.h>
#include <stdio.h>

int main()
{
    printf("sizeof(struct {}) == %lu;\n", sizeof(struct {}));
    printf("sizeof(struct {int a}) == %lu;\n", sizeof(struct {int a;}));
    printf("sizeof(struct {int a; double b;}) == %lu;\n", sizeof(struct {int a; double b;}));
    printf("sizeof(struct {char c; double a; double b;}) == %lu;\n", sizeof(struct {char c; double a; double b;}));

    printf("malloc(0)) returns %p\n", malloc(0));
    printf("malloc(sizeof(struct {})) returns %p\n", malloc(sizeof(struct {})));

    struct {int a; double b;} *test = malloc(sizeof(struct {int a; double b;}));
    test->a = 10;
    test->b = 12.2;
    printf("test->a == %i, *test == %i \n", test->a, *(int *)test);
    printf("test->b == %f, offset of b is %i, *(test - offset_of_b) == %f\n",
        test->b, (int)((void *)test - (void *)&test->b),
        *(double *)((void *)test - ((void *)test - (void *)&test->b))); // find the offset of b, add it to the base,$

    free(test);
    return 0;
} 
```

打电话`gcc test.c`后`./a.out` 我得到这个：

```
sizeof(struct {}) == 0;
sizeof(struct {int a}) == 4;
sizeof(struct {int a; double b;}) == 16;
sizeof(struct {char c; double a; double b;}) == 24;
malloc(0)) returns 0x100100080
malloc(sizeof(struct {})) returns 0x100100090
test->a == 10, *test == 10 
test->b == 12.200000, offset of b is -8, *(test - offset_of_b) == 12.200000 
```

**更新** 这是我的机器：

`gcc --version`

```
i686-apple-darwin10-gcc-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

`uname -a`

```
Darwin MacBookPro 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T19:46:21.843

从 6.2.5/20 开始：

> 结构类型描述了一个顺序分配的非空成员对象集（在某些情况下，一个不完整的数组），每个对象都有一个可选的指定名称和可能的不同类型。

回答：

> 特别是 *value 而不是 value->first_value 其中 value 是指向结构的指针， first_value 是第一个成员， *value 安全吗？

见 6.7.2.1/15：

> 15 在结构对象中，非位域成员和位域所在的单元的地址按声明顺序递增。***指向结构对象的指针，经过适当转换，指向其初始成员（或者如果该成员是位域，则指向它所在的单元），反之亦然***。结构对象中可能有未命名的填充，但不是在其开头。¹

然而，在结构的末尾可能有填充字节，也可能是中间成员。

在 C 中，`malloc( 0 )`是实现定义的。（作为旁注，这是 C 和 C++ 不同的小事之一。）

[1] 强调我的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T19:47:35.090

调用`malloc(0)`将返回一个指针，该指针可以安全地传递给`free()`至少一次。如果多次调用返回相同的值`malloc(0)`，则每次调用都会释放一次。显然，如果它返回`NULL`，则可以`free()`无限次传递而没有效果。每个`malloc(0)`返回非 null 的调用都应通过调用`free()`与返回值来平衡。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T19:55:21.953

> 我已经广泛使用了结构，并且看到了一些有趣的东西，尤其`*value`是指向结构的指针`value->first_value`在哪里，第一个成员是安全的吗？`value``first_value``*value`

是的，`*value`是安全的；它产生`value`指向的结构的副本。但它几乎可以保证有一个不同的类型 from `*value->first_value`，所以结果`*value`几乎总是和 from 不同`*value->first_value`。

* * *

*反例：*

```
struct something { struct something *first_value; ... };
struct something data = { ... };
struct something *value = &data;
value->first_value = value; 
```

在这种相当有限的情况下，您将从`*value`和得到相同的结果`*value->first_value`。在该方案下，类型将是相同的（即使值不同）。在一般情况下，`*value`和的类型`*value->first_value`是不同的类型。

* * *

> 另请注意，由于对齐，不能保证大小，但对齐总是在寄存器大小上吗？

由于“寄存器大小”不是定义的 C 概念，因此不清楚您在问什么。在没有编译指示（`#pragma pack`或类似的）的情况下，结构的元素将在读取（或写入）值时对齐以获得最佳性能。

> 我们对齐数据/代码以加快执行速度；我们可以告诉编译器不要这样做吗？所以也许我们可以保证结构的某些事情，比如它们的大小？

编译器负责`struct`类型的大小和布局。你可以通过仔细的设计`#pragma pack`或者类似的指令来影响。

当人们关心序列化数据时（或者更确切地说，试图避免通过一次处理一个结构元素来序列化数据）时，通常会出现这些问题。一般来说，我认为你最好编写一个函数来进行序列化，从组件中构建它。

> 在对结构成员进行指针运算以定位成员偏移量时，我认为如果小端进行减法，大端进行加法，还是仅取决于编译器？

您最好不要对`struct`成员进行指针运算。如果必须，请使用`offsetof()`宏 from`<stddef.h>`正确处理偏移量（这意味着您没有直接进行指针运算）。无论是大端还是小端，第一个结构元素始终位于最低地址。实际上，字节顺序与结构内不同成员的布局无关。它只影响结构的（基本数据类型）成员中值的字节顺序。

C 标准要求结构的元素按照定义的顺序排列；第一个元素位于最低地址，下一个位于较高地址，依此类推。不允许编译器更改顺序。在结构的第一个元素之前不能有填充。在编译器认为合适的结构的任何元素之后可以有填充，以确保它认为适当的对齐。结构的大小使得您可以分配 (N × size) 适当对齐的字节（例如 via `malloc()`）并将结果视为结构的数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T19:50:08.553

如果您有一个内部结构，则保证从与封闭结构相同的地址开始，如果那是封闭结构的第一个声明。

所以`*value`并且`value->first`在下面访问相同地址（但使用不同类型）的内存

```
struct St {
  long first;
} *value; 
```

此外，结构成员之间的顺序保证与声明顺序相同

要调整对齐方式，您可以使用编译器特定的指令或使用位域。

结构成员的对齐通常基于访问目标平台上各个成员的最佳方式

此外，对于`malloc`，它可能会在返回的地址附近保留一些簿记，因此即使对于零大小的内存，它也可以返回有效地址（只是不要尝试通过返回的地址访问任何内容）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T19:56:05.520

了解结构大小的工作方式很重要。例如：

```
struct foo{
  int i;
  char c;
}

struct bar{
  int i;
  int j;
}

struct baz{
  int i;
  char c;
  int j;
}

sizeof(foo) = 8 bytes (32 bit arch)
sizeof(bar) = 8 bytes
sizeof(baz) = 12 bytes 
```

这意味着结构大小和偏移量必须遵循两个规则：

1-结构必须是它的第一个元素的倍数（为什么 foo 是 8 而不是 5 字节）

2- 结构元素必须以自身的倍数开始。（在 baz 中，int j 不能从 6 开始，因此字节 6、7 和 8 是浪费的填充

# java - 如何自定义 JSplitPane 分隔线并保持一键式箭头功能？

> ID：11057175
> 
> 赞同：6
> 
> 时间：2012-06-15T19:41:27.063
> 
> 标签：java, swing, jsplitpane

所以，我的问题归结为这个......默认的分隔线有点难看，另外我想给它添加一个标签（在我想要文本的意义上，而不是在“添加 JLabel对其布局”的意义）。我看到您可以更改拆分窗格分隔器上的边框，但是当我这样做时，它会删除我想要保留的一键式箭头。

关于如何同时拥有两者的任何想法？

这是一个 SSCCE，它演示了默认行为以及当我更改分隔线边框时会发生什么：

```
import javax.swing.*;
import javax.swing.plaf.basic.BasicSplitPaneDivider;
import javax.swing.plaf.basic.BasicSplitPaneUI;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class SplitPaneFun {
public static void main(String[] args) {

        //Here I'm messing around with the divider look. This seems to remove the one-touch arrows.  These blocked-out lines illustrate
        // what I'm doing to modify the divider's border.  Does this look right?:
    //------------------------------------------------------------------------------------------------
    JSplitPane withCustomDivider = new JSplitPane(JSplitPane.VERTICAL_SPLIT, new JPanel(), new JPanel());
    BasicSplitPaneDivider divider = ( (BasicSplitPaneUI) withCustomDivider.getUI()).getDivider();
    withCustomDivider.setOneTouchExpandable(true);
    divider.setDividerSize(15);
    divider.setBorder(BorderFactory.createTitledBorder(divider.getBorder(), "Custom border title -- gets rid of the one-touch arrows!"));
    //------------------------------------------------------------------------------------------------

        //build a different splitpane with the default look and behavior just for comparison
    JSplitPane withDefaultDivider = new JSplitPane(JSplitPane.VERTICAL_SPLIT, new JPanel(), new JPanel());
    withDefaultDivider.setOneTouchExpandable(true);

        //slap it all together and show it...
    CardLayout splitsLayout = new CardLayout();
    final JPanel splits = new JPanel(splitsLayout);
    splits.add(withCustomDivider, "custom");
    splits.add(withDefaultDivider,"default");

    JButton toggle = new JButton( "click to see the other split pane");
    toggle.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            ((CardLayout)splits.getLayout()).next(splits);
        }
    });

    JFrame frame = new JFrame("Split Pane Divider Comparison");
     frame.setLayout(new BorderLayout());
    frame.add(splits, BorderLayout.CENTER);
    frame.add(toggle, BorderLayout.PAGE_END);
    frame.setSize(600,500);
    frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:59:59.133

> 我看到您可以更改拆分窗格分隔器上的边框，但是当我这样做时，它会删除我想要保留的一键式箭头。

*   所有这些方法都可以覆盖来自和的事件`Mouse(Xxx)Listener`，没有什么比 Substance [SubstanceSplitPaneDivider更好的了](https://github.com/Insubstantial)`PropertyChangeListener``ButtonModel`

*   [自定义外观](https://stackoverflow.com/a/3954646/714968)的一部分也覆盖了这些方法

# jquery - 使用 Jquery 突出显示文本框中的文本

> ID：11057180
> 
> 赞同：2
> 
> 时间：2012-06-15T19:42:01.700
> 
> 标签：jquery

我有一个提示用户在文本框中输入的网页。我想在此框中显示默认的文本行，但突出显示它，以便用户输入会自动覆盖它。我在另一个线程中被告知要使用 JQuery，这就是我目前所拥有的：

```
<script type="text/javascript" src="D:jquery-1.4.1-vsdoc.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#MessagesTextbox").select();
    });
</script> 
```

当然，它并没有达到预期的效果。我对 JQuery 和一般的 Web 编程非常陌生，如果有任何建议，我将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:50:39.990

结合两者`select()`和`focus()`：

```
$('#MessagesTextbox').focus().select();​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9zaq6/)。

但是，如果可以的话，使用以下`placeholder`属性会更容易`textarea`：

```
<textarea id="MessagesTextbox" placeholder="Some default text"></textarea>​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9zaq6/1/)。

以及以下 jQuery：

参考：

*   [`focus()`](http://api.jquery.com/focus/).
*   [`placeholder`属性](https://developer.mozilla.org/en/HTML/Element/input#attr-placeholder)。
*   [`select()`](http://api.jquery.com/select/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:46:24.250

试试这个 - $('#MessagesTextbox').focus(function() { this.select(); });

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:46:56.703

我不确定我是否完全了解您的需求，但请查看此链接：[watermark plugin](http://code.google.com/p/jquery-watermark/)。这是一个用于水印的 jquery 插件。

你必须下载`jquery.watermark-3.1.3.js`，然后你所做的就是

```
$(document).ready(function () {
    $("#MessagesTextbox").watermark('Required information');
}) 
```

**编辑**

我重新阅读了它，如果您只是想专注于该领域，那么是的， `$("#MessagesTextbox").focus();`这就是您要查找的内容，并添加了链接。

# jquery - 我不知道如何在 jQuery 中进行缓动

> ID：11057185
> 
> 赞同：0
> 
> 时间：2012-06-15T19:42:13.500
> 
> 标签：jquery, easing, jquery-easing

这是我从网上拼凑出来的。slideDown 有效，但看起来仍然是线性的。我的方法是完全错误的，还是我只是错过了一些微妙的东西？我如何让它工作？

```
 $.easing.easeOutQuad = function (x, t, b, c, d) {
    return -c *(t/=d)*(t-2) + b;
 };

 $("#view").slideDown(200,'easeOutQuad'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:54:00.283

也许你错过了一些微妙的东西。看起来您正在尝试使用缓动插件作为指南进行“自定义缓动”。我认为正在发生的是您的动画持续时间非常短，只有 200 毫秒。在这个速度下，速度的降低会非常微妙。尝试将其扩展到 2000（甚至 3000）毫秒以查看缓动的实际效果。

此外，easeOutQuad 本身就是一个微妙的动画。运行时不会产生戏剧性的效果。作为学习 jQuery 缓动基础知识的问题，尝试从“easeOutElastic”中获取算法代码并将其放入您的函数中以查看更显着的效果。这将使您有信心知道您的代码正在运行。一旦您确信它可以正常工作，请取出弹性算法并将您的原始算法放回原处。

示例代码：

```
$.easing.easeOutQuad = function (x, t, b, c, d) {
    //return -c *(t/=d)*(t-2) + b;
    var s=1.70158;var p=0;var a=c;
    if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
    if (a < Math.abs(c)) { a=c; var s=p/4; }
    else var s = p/(2*Math.PI) * Math.asin (c/a);
    return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;
};

$("#view").slideDown(2000,'easeOutQuad'); 
```

# ruby-on-rails - 类似于 Rails 的 Node.js 表单插件？

> ID：11057186
> 
> 赞同：1
> 
> 时间：2012-06-15T19:42:26.433
> 
> 标签：ruby-on-rails, forms, node.js, plugins

正如标题所述，我正在寻找某种 Node.js 中的表单插件，它允许我以类似于 Rails 的方式创建表单。我遇到过几个 Node.js 表单插件，最接近的一个是[Formed](https://github.com/arbarlow/formed)。但是，该插件是 Sequelize 特有的（我使用的是 JugglingDB）。

理想情况下，最好执行以下类似的操作（假设 EJS）：

```
<%- form_for(user, function(form) { %>
    <%- form.input('username') %>
    <%- form.input('password') %>
    <%- form.submit() %>
<%- }) %> 
```

输出类似于以下内容：

```
<form action="/users" method="post" id="new_user_form">
    <div class="input required">
        <label for="user_username">Username</label>
        <input type="text" name="user_username" id="new_user_form_user_username"/>
    </div>
    <div class="input required">
        <label for="user_password">Password</label>
        <input type="password" name="user_password" id="new_user_form_user_password"/>
    </div>
    <input type="submit" name="user_submit" value="Create User"/>
</form> 
```

我遇到的唯一一个似乎有某种追随者和最近更新的插件是[Formidable](https://github.com/felixge/node-formidable)。不幸的是，这个插件与表单的渲染没有任何关系，只是表单的处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:49:01.653

参见[GitHub 上的 caolan/forms](https://github.com/caolan/forms/)。

# hibernate - 休眠投影列表

> ID：11057189
> 
> 赞同：6
> 
> 时间：2012-06-15T19:42:41.040
> 
> 标签：hibernate, criteria, projection

我只需要从表中获取几个列值。所以我使用 Projections 来实现这一点。该代码有效，但我认为它无效。

我的问题是当我使用 ProjectionsList 然后将 criteria.list 设置为 ArrayList - Bulletin 对象为空。我不确定如何更好地解释这一点。所以我会放代码，然后请阅读以下内容：

```
 List<Bulletin> list = new ArrayList<Bulletin>();
 BulletinList bulletinList = null;

 Criteria criteria = null;

 criteria = this.getSession().createCriteria(Bulletin.class)
            .setProjection(Projections.projectionList()
            .add(Projections.property(bulletinIdAttr))
            .add(Projections.property(docNameAttr))   
            .add(Projections.property(docTypeCodeAttr))
            );        
    criteria.addOrder(Order.desc(createdTimeAttr));

    List<Object> rows = criteria.list();
    for (Object r : rows) {
        Object[] row = (Object[]) r;
        Bulletin bull = new Bulletin();
        bull.setBulletinId((Long) row[0]);
        bull.setDocumentName((String) row[1]);
        bull.setDocumentTypeCode((String) row[2]);
        list.add(bull);
      }

    bulletinList = new BulletinList();
    bulletinList.setBulletins(list);

    return bulletinList; 
```

我只需要将 criteria.list 设置为 BulletinList（包含 Bulletin 对象列表的类）。但是当我使用投影时，Bulletin 对象为空。

我也在阅读另一个线程来使用

```
setResultTransformer(Transformers.aliasToBean 
```

但这也行不通。那么有人可以帮助解决如何使代码更好的问题。

谢谢

哈里什

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-07T12:51:13.750

您可以使用

```
 criteria = this.getSession().createCriteria(Bulletin.class)
            .setProjection(Projections.projectionList()
            .add(Projections.property(bulletinIdAttr),"bulletinIdAttr")
            .add(Projections.property(docNameAttr),"docNameAttr")   
            .add(Projections.property(docTypeCodeAttr),"docTypeCodeAttr")
            );        
criteria.addOrder(Order.desc(createdTimeAttr));
criteria.setResultTransformer(new AliasToBeanResultTransformer(Bulletin.class));
List<Bulletin> bulletinList = criteria.list(); 
```

在这里，criteria.setResultTransformer(new AliasToBeanResultTransformer(Bulletin.class)) 会将您的结果转换为所需的 POJO 类，但请确保您的 POJO 类（在您的情况下为 Bulletin.class）应该具有适当的设置器来设置属性值。

现在，criteria.list() 将返回 Bulletin POJO 类的列表而不是 Object。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T16:56:35.723

1.  `Projections.property()`接受一个字符串作为参数。在您提供的代码中，该字符串的值应该是 Bulletin 类成员的名称。例如，大概`bulletinIdAttr`是一个具有这样一个值的字符串，否则你会得到运行时错误。
2.  当您调用`setProjection`Criteria 实例时，您隐式地将 ResultTransformer 设置为`PROJECTIONS`，这就是您想要的。没必要给`setResultTransformer`自己打电话。我会像这样简化例程

    ```
    List<Object[]> rows = criteria.list();
    for (Object[] row : rows) {
       Bulletin bull = new Bulletin();
       bull.setBulletinId((Long) row[0]);
       bull.setDocumentName((String) row[1]);
       bull.setDocumentTypeCode((String) row[2]);
       list.add(bull);
    } 
    ```

但这不应该对您的结果产生任何影响。你检查过它`rows`是空的吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-23T16:17:33.973

如果您想从相同的条件进行第二次搜索，您必须更改或删除投影。例如，如果您先搜索计数：

```
criteria.setProjection(Projections.rowCount());
Integer count = criteria.list().get(0); 
```

然后想要获取所有对象：

```
criteria.setProjection(null);
List<Object> returnedObjects = criteria.list(); 
```

# javascript - 如何将复选框和单选与按钮链接以在 JavaScript 中打开页面？

> ID：11057190
> 
> 赞同：0
> 
> 时间：2012-06-15T19:42:41.993
> 
> 标签：javascript

如何将复选框和单选与按钮链接以在 JavaScript 中打开页面？

例如：选择“一个”复选框和单选然后单击按钮打开页面。这个想法包括每个人：选择“一个”复选框和单选然后单击按钮打开不同的页面。

收音机：

0 1 级

0 2 级

0 3 级

复选框：

[ ] 添加

[ ] 分配

[ ] 乘法

[ ] 减法

## {按钮}

我有这个代码...{只有收音机是工作}....我不知道如何将收音机与复选框连接。

[在此处输入链接描述](http://www.ziddu.com/download/19672908/OnlineTestPage.rar.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:49:59.333

这是一个简单的 if 检查单选或复选框是否被选中。您可以使用自己的方法对它们进行迭代（也许通过将它们全部设为类并一一检查然后返回已检查的那些？）。但`checked`返回其检查状态的布尔值。

```
if(document.getElementByID('Level 1').checked){
    //do stuff here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:18:10.703

大卫托马斯提出了一个很好的观点，第二组可能不应该是复选框，而是单选按钮。您应该能够在第二组中选择多个选项似乎不合逻辑。

无论如何，我会听取点击并根据用户交互更改链接。

设置一个链接以便能够修改：

```
<a id="next-link" href="#">Link to Next Page</a> 
```

应用侦听器和函数来动态更改链接：

```
function changeLink(){
    document.getElementByID('next-link').setAttribute('href') = "/"+goto_link_level+"/"+goto_link_category;
}

//you can specify defaults here too
var goto_link_level = '';
var goto_link_category = '';

//event listeners for groups
document.getElementsByClassName('group-1').addEventListener('click',function () {
    goto_link_level = this.getAttribute('value');
    changeLink();
},false);
document.getElementsByClassName('group-2').addEventListener('click',function () {
    goto_link_category = this.getAttribute('value');
    changeLink();
},false); 
```

这将根据所选选项的值生成相对链接。示例：“/level-1/addition”

免责声明：代码未经测试，但应该可以工作

# sql - Oracle APEX - SQL - 创建顺序历史并计算每个阶段之间的天数

> ID：11057193
> 
> 赞同：0
> 
> 时间：2012-06-15T19:42:51.890
> 
> 标签：sql, oracle

因此，对于我的一个应用程序，我决定我需要能够捕获比目前更详细的指标。我的小组创建了文档，特别是我想知道该文档在其开发的每个阶段花费了多长时间（以天为单位）。此数据将通过输入表单捕获，当我的团队成员将文档移动到不同阶段时，该表单将由他们填写。用于捕获此数据的表的结构如下：

```
 TBL_DOC_TIMELINE
 DOC_ENTRY_ID     DOC_ID     DOC_STATUS     DOC_DATE       DOC_PHASE_DURATION
 1                123        Planned        06-05-2012 
```

我需要弄清楚如何做的是，当创建新条目时，`DOC_PHASE_DURATION`上一个条目上的将填充`DOC_DATE`该文档的上一个条目与新条目之间的天数。它看起来像这样：

```
 DOC_ENTRY_ID     DOC_ID     DOC_STATUS     DOC_DATE       DOC_PHASE_DURATION
 1                123        Planned        06-05-2012     10     
 7                123        Draft          06-15-2012 
```

我们所有的文档都将为此函数使用同一个表，因此我不能简单地键入 DOC_ENTRY_ID，尽管它可以提供帮助。我需要找到 DOC_ID 的最大 DOC_ENTRY_ID，然后计算。我需要这样做，直到达到“已发布”状态，并且应该在单元格中插入哪个点“0”，因为那是该 DOC_ID 生命周期的结束。像这样：

```
 DOC_ENTRY_ID     DOC_ID     DOC_STATUS     DOC_DATE       DOC_PHASE_DURATION
 1                123        Planned        06-05-2012     10     
 7                123        Draft          06-15-2012     5
 38               123        Approval       06-20-2012     10 
 102              123        Published      06-30-2012     0 
```

我想这将在 SQL 页面进程甚至触发器中。下面是我整理的伪代码，但我确信它有缺陷。还没有机会对其进行测试，但我想就我是否走在正确的轨道上征求您的意见。一旦我有机会运行它，我将进行编辑。谢谢。

```
UPDATE TBL_DOC_TIMELINE  
SET DOC_PHASE_DURATION = 
  (SELECT trunc((trunc(DOC_DATE)- &P1_DOC_DATE.)) 
  FROM TBL_DOC_TIMELINE WHERE &P1_DOC_ID. = DOC_ID) 
WHERE DOC_ENTRY_ID = 
  (SELECT MAX(DOC_ENTRY_ID) FROM TBL_DOC_TIMELINE WHERE &P1_DOC_ID. = DOC_ID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:23:30.460

我认为您已经捕获了您需要的所有指标，因为持续时间可以从现有数据中**得出。**您可以创建一个视图：

```
create or replace  view vw_doc_timeline as
  select t.doc_entry_id, t.doc_id, t.doc_status, t.doc_date
       , case when doc_status = 'Published' then 0
              else lead(doc_date) over (partition by doc_id order by doc_entry_id)
                   - doc_date
              end as duration
  from tbl_doc_timeline t; 
```

然后：

```
SQL> select * from vw_doc_timeline;

DOC_ENTRY_ID     DOC_ID DOC_STATUS                     DOC_DATE    DURATION
------------ ---------- ------------------------------ --------- ----------
           1        123 Planned                        05-JUN-12         10
           7        123 Draft                          15-JUN-12          5
          38        123 Approval                       20-JUN-12         10
         102        123 Published                      30-JUN-12          0 
```

# tcl - starkit 无法加载 pkgIndex.tcl

> ID：11057195
> 
> 赞同：1
> 
> 时间：2012-06-15T19:42:55.613
> 
> 标签：tcl, tk, starkit

我已经发布了一个用 sdx 包装的 Windows 的 Tcl/Tk 应用程序。

在 myapp.vfs 我有一个库，我有一个 pkgIndex.tcl 文件：

```
 myapp.vfs
 |
 +-- mylib
 |   |
 |   +-- pkgIndex.tcl
 |
 +-- main.tcl 
```

对于我的绝大多数用户来说一切正常，但其中一些（不到 0.1%）报告说，在他们的机器上，应用程序在启动时失败。

从他们发送给我的错误消息中，我可以看到它在我第一次使用 mylib 中的函数时挂起。

如果他们在另一台机器上尝试，一切正常。

问题是我自己无法重现该错误，一个用户的程序在 XP 系统上失败并在 Win7/64 上运行，另一个用户在 7 上失败并在 Vista 上运行。

我已经检查了他们的防病毒软件、特权和所有常见的东西，但没有成功。

考虑到应用程序成功地为成千上万的用户运行，但只有少数用户。

问题是：在什么情况下，starkit 中的一个库的 pkgIndex.tcl 可能（默默地）失败？

# python - 无法使用 python 2.2 执行 bash 脚本

> ID：11057199
> 
> 赞同：0
> 
> 时间：2012-06-15T19:43:08.163
> 
> 标签：python, bash, cgi

所以我已经被这个问题困扰了一段时间了。我有一个需要执行 bash 脚本的 cgi python 脚本。我的代码中有以下行：

```
os.system("/complete/path/to/executable/run_summary_page.sh " + labelName) 
```

我已经尝试调试了好几个小时，但我不知道为什么它不能正确执行。当我从命令行运行相同的完全相同的行时，它工作得非常好。我已对该 bash 脚本等赋予了正确的权限，但它仍然无法正常工作。请注意，我被迫使用 python 2.2，所以我对可用的实用程序数量有点限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:59:12.207

我不记得 python 2.2 中的所有内容，但您可以尝试一个简单的替代方法来调用该命令并查看正在发生的事情：

```
import commands
stat, output = commands.getstatusoutput("command") 
```

这不是运行命令的最可靠方法，但它是检查当前正在发生的事情的一种简单方法。如果`stat`是，`!= 0`那么它失败了。您还应该能够在`output`

如果`stat == 0`并且 中没有什么有趣的东西`output`，那么我怀疑你的 bash 脚本遇到了一些情况，结束了，并且没有真正打印任何有用的东西。也许它期望某些环境变量，并且在某些事情不正确时忽略并愉快地前进。

# mysql - 现有值的重复键更新问题？

> ID：11057204
> 
> 赞同：0
> 
> 时间：2012-06-15T19:43:59.460
> 
> 标签：mysql

我有一个数据库表，它已经有一个我不需要触摸的现有值。当我尝试像这样调用我的 SQL 时：

我的桌子目前看起来像这样：

```
id  col1 col2
5   10 
```

$sql = "INSERT INTO sometable (id, col2) VALUES (5, 20) ON DUPLICATE KEY UPDATE id = 5";

我希望表格在插入后看起来像这样：

```
id  col1 col2
5   10   20 
```

有没有办法在不使用更新的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:45:45.980

采用[`VALUES()`](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_values)

```
INSERT INTO sometable (id, col2) VALUES (5, 20)
   ON DUPLICATE KEY UPDATE col2 = VALUES(col2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:53:55.810

看看这个是一个很好的例子： [MySQL: Insert On Duplicate](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:58:27.103

假设 id 是关键

这

```
INSERT INTO sometable (id, col2) VALUES (5, 20) 
ON DUPLICATE KEY UPDATE id = 5 
```

表示将 id 字段更新为 5 ( `UPDATE ID =5`)。仅当 ID 为 5 且没有意义时才有效

你想要的是要么

```
INSERT INTO sometable (id, col2) VALUES (5, 20) 
ON DUPLICATE KEY UPDATE col2 = 20; 
```

或者，如果您想引用没有重复项的值，则按照[Wilken 的建议使用](https://stackoverflow.com/a/11057226/119477) `COL2 = VALUES(COl2)`

[演示](http://sqlfiddle.com/#!2/90b1a/1)

# c++ - 创建指向非静态类成员函数的类成员指针函数变量

> ID：11057206
> 
> 赞同：7
> 
> 时间：2012-06-15T19:44:05.853
> 
> 标签：c++, class, function-pointers

目标是在类初始化时让成员变量`_AddValue`指向函数，并且在第一次调用之后，所有未来对它的调用都将调用。`CreateFirstValue``AddValue``CreateAnotherValue`

以前，我只有一个`AddValue`带有条件检查的函数来确定要调用哪个函数。但是，我觉得这种实现是有缺陷的，因为`if`每次都会进行检查，而且看起来函数指针在这里会很有用。

一个例子：

```
class Foo
{
 private:
  int _value;
  void (*_AddValue)(int value); // Pointer to function member variable

  void CreateFirstValue(int value)
  {
    _value = value;
    _AddValue = &CreateAnotherValue;
  }

  void CreateAnotherValue(int value)
  {
    // This function will create values differently.
    _value = ...;
  }

 public:
  // Constructor
  Foo()
   : _value(0), _AddValue(CreateFirstValue)
  {
  }

  AddValue(int value) // This function is called by the user.
  {
    _AddValue(value);
  }
}; 
```

上面的代码不是实际的代码，只是我想要完成的一个例子。

现在我收到一个错误：`argument of type void (BTree::)(int) does not match void (*)(int)`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T20:02:31.703

> ```
> &CreateAnotherValue 
> ```

此语法无效。要创建指向成员的指针，您必须为类命名，即使是从其他成员内部。尝试

```
&Foo::CreateAnotherValue 
```

在这种情况下，您正在谈论一个***合格***的非静态成员函数的地址，这是允许的，并且可以防止关于*不合格*成员函数地址的错误。

当然，您需要一个适当类型的变量来存储指向成员的指针，请参阅 Bo 的正确声明的答案。当需要调用它时，您将需要使用指向成员解引用的指针（`.*`或`->*`），所以说

```
(this->*_AddValue)(whatever); 
```

同样的规则也适用于数据，如果你说`&Foo::_value`，你会得到一个指向成员类型的指针`int Foo::*`。但在数据情况下，也接受不合格的名称，但行为非常不同。 `&_value`给出一个普通指针 type ，它是实例`int*`中特定`_value`成员变量的地址。`this`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T19:55:42.993

> 无效（*_AddValue）（整数值）；// 指向函数成员变量的指针

这实际上不是指向成员的指针，而是指向自由函数的指针。

你需要做这个

```
void (Foo::*_AddValue)(int value); // Pointer to function member variable 
```

# c++ - 每当在 C++ 中调用 new 时，有没有办法获取堆栈跟踪？

> ID：11057207
> 
> 赞同：4
> 
> 时间：2012-06-15T19:44:11.137
> 
> 标签：c++, memory-management, gcc, valgrind

我有一个长期运行的 C++ 程序，通常使用 gcc (g++) 编译。我已经使用 valgrind 来验证没有内存泄漏，所以我不是在寻找泄漏检测器。

不过，我关心的是内存碎片和临时缓冲区/对象上不必要的新/删除对。

有没有办法记录对 new 的所有调用（即使它们发生在 STL 容器中），提供堆栈跟踪以便我可以在我的代码中找到它们？我尝试了 mtrace，但这仅适用于 C++ - 当我查找负责的代码行时，它最终会说所有分配都发生在全局新分配器中。不知何故，valgrind 的 memcheck 几乎可以做我想做的事情，因为它显示了内存分配的堆栈跟踪。不幸的是，它们似乎只为分配而没有匹配的解除分配而呈现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T08:58:19.450

因此，如果您想跟踪有关分配的其他统计信息，您始终可以覆盖全局 new/delete 函数：

```
void* operator new (size_t size)
{
    void *pPtr = alloc_memory(size); /* perform the allocation here but don't use new! */

    if(pPtr == 0)
        throw std::bad_alloc();

    /* additional code here to do whatever sort of tracking you want */
    return pPtr;
}

void operator delete (void *pPtr)
{
    if(pPtr == 0)
        return; // legal to call delete on NULL pointers - don't pass NULL to free()

    /* additional code to do whatever tracking you want here */
    free(pPtr); 
} 
```

至于获取回溯，这取决于编译器和 O/S，并且没有标准的获取方式。由于您提到 GCC，因此以下内容可能对您有用：

[http://tombarta.wordpress.com/2008/08/01/c-stack-traces-with-gcc/](http://tombarta.wordpress.com/2008/08/01/c-stack-traces-with-gcc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:31:58.087

我赞成[Nik B.'s answer](https://stackoverflow.com/a/11062088/6160)指出我正确的方向，这就是我实际使用`libunwind`的，因为链接堆栈跟踪建议只能获取链接库的函数名称。此代码可在 GitHub 上获取，网址为[https://github.com/landtuna/opnew-stacktraces](https://github.com/landtuna/opnew-stacktraces)

新删除.cpp：

```
#include <exception>
#include <new>
#include <cstdlib>
#include <iostream>

#include "stacktrace.hpp"

void* operator new (size_t size) {
  void* p = malloc(size);

  if (p == 0) {
    throw std::bad_alloc();
  }

  std::cout << "allocated " << size << std::endl;
  printTrace(std::cout);

  return p;
}

void operator delete (void* p) {
  free(p);
} 
```

堆栈跟踪.cpp：

```
#include <cxxabi.h>
#include <libunwind.h>
#include <ostream>
#include <cstdlib>
#include <cstring>
using namespace std;

#include "stacktrace.hpp"

void printTrace(ostream& out) {
  unw_cursor_t cursor;
  unw_context_t context;

  unw_getcontext(&context);
  unw_init_local(&cursor, &context);

  while (unw_step(&cursor) > 0) {
    unw_word_t offset, pc;
    char fname[200];
    size_t demangledSize = 200;
    char* demangled = (char*) malloc(demangledSize);

    unw_get_reg(&cursor, UNW_REG_IP, &pc);
    fname[0] = '\0';
    unw_get_proc_name(&cursor, fname, sizeof(fname), &offset);

    int status;

    char *ret = abi::__cxa_demangle(fname, demangled, &demangledSize, &status);
    if (ret) {
      // return value may be a realloc() of the input
      demangled = ret;
    }
    else {
      // demangling failed, just pretend it's a C demangled with no args
      strncpy(demangled, fname, demangledSize);
      strncat(demangled, "()", demangledSize);
      demangled[demangledSize-1] = '\0';
    }

    out << hex << demangled << "+0x" << offset << " [" << pc << "]" << dec << '\n';
    free(demangled);
  }
  out << endl;
} 
```

# video - gstreamer 管道产生慢动作（低 FPS）视频

> ID：11057208
> 
> 赞同：2
> 
> 时间：2012-06-15T19:44:17.103
> 
> 标签：video, gstreamer, multimedia, frame-rate, mjpeg

我想连接到 HTTP MJPEG 实时流并将其作为视频文件在本地转储。所以我做了：

$ gst-launch -vvv 汤httpsrc location=http://bikersschool.dyndns.org/video.cgi?resolution=vga is-live=true do-timestamp=true ！多部分解复用！JPEG格式！视频速率！视频/x-raw-yuv，帧率=60/1！理论！奥格多克斯！文件接收器位置="hi.ogg"

但是，在播放 hi.ogg 时，视频是慢动作的。

这是它制作[的示例视频](https://docs.google.com/open?id=0B20iI-kTnlagdUQ4dkVYeFdKTjA)：

更新：

我尝试降低 videorate 和 caps 过滤器。但它失败并显示以下消息：

$ gst-launch -vvv 汤httpsrc location=http://bikersschool.dyndns.org/video.cgi?resolution=vga is-live=true do-timestamp=true ！多部分解复用！JPEG格式！理论！奥格多克斯！文件接收器位置="hi.ogg"

```
Setting pipeline to PAUSED ...
Pipeline is live and does not need PREROLL ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
/GstPipeline:pipeline0/GstJpegDec:jpegdec0.GstPad:sink: caps = image/jpeg
/GstPipeline:pipeline0/GstJpegDec:jpegdec0.GstPad:src: caps = video/x-raw-yuv, format=(fourcc)I420, width=(int)640, height=(int)480, framerate=(fraction)0/1
ERROR: from element /GstPipeline:pipeline0/GstSoupHTTPSrc:souphttpsrc0: Internal data flow error.
Additional debug info:
..\..\..\Source\gstreamer\libs\gst\base\gstbasesrc.c(2507): gst_base_src_loop (): /GstPipeline:pipeline0/GstSoupHTTPSrc:souphttpsrc0:
streaming task paused, reason not-negotiated (-4)
Execution ended after 1547045000 ns.
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
/GstPipeline:pipeline0/GstJpegDec:jpegdec0.GstPad:src: caps = NULL
/GstPipeline:pipeline0/GstJpegDec:jpegdec0.GstPad:sink: caps = NULL
/GstPipeline:pipeline0/GstMultipartDemux:multipartdemux0.GstPad:src_0: caps = NULL
Setting pipeline to NULL ...
Freeing pipeline ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T18:32:22.900

videorate的目的是什么！视频/x-raw-yuv，帧率=60/1？

从技术上讲，videorate 将复制丢帧以使输出速率达到 60fps。如果你降低视频速率怎么办！大写过滤器？gst-launch 为 jpegdec 的上限打印什么？

# ruby-on-rails - ruby on rails 使用“添加”按钮和文本字段实现列表控件

> ID：11057210
> 
> 赞同：0
> 
> 时间：2012-06-15T19:44:36.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一张食谱表，每个食谱都有几种成分。在“新配方”表单中，我希望用户能够添加成分。

我计划添加一个带有文本字段和“添加”按钮的列表控件（文本字段将自动完成我的“成分”表中的成分或创建新成分）。预计用户在文本字段中添加成分，按下“添加”按钮，然后该成分应显示在列表框中。然后用户可以继续添加下一个成分。

似乎它应该是有史以来最简单的控件，但我似乎找不到在 Rails 中实现它的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:47:44.463

您想使用嵌套形式，因为配方有很多成分 - 看看[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)这会给你一个好主意如何实现它。

# c# - 文本框数据绑定（）

> ID：11057211
> 
> 赞同：0
> 
> 时间：2012-06-15T19:44:36.117
> 
> 标签：c#, data-binding, web-applications, textbox

我是 .NET 和 C# 的新手。我一直在玩 .NET 中的 Web 应用程序，我对如何将数据绑定到简单的文本框感到困惑。当然，我可以制作一个数据集，然后说 `textBox1.Text = myDataSet.WhateverTheFunctionIsToGetATableName()` ，但这并不是真正绑定数据。我找到了 DataBind() 方法，但它没有参数，我找不到其他方法来使用它。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-07T13:04:25.260

您是否尝试过搜索数据绑定而不是数据绑定？这两个是不同的。

# eclipse - 使用 JMX 监控 Tomcat 服务器的简单工具

> ID：11057213
> 
> 赞同：3
> 
> 时间：2012-06-15T19:44:57.510
> 
> 标签：eclipse, tomcat, jmx

我是一名计算机科学专业的学生，​​目前正在实习。我的老板让我编写一个简单的工具来监控 Tomcat 服务器。我刚刚开始这个项目，所以我基本上只是在玩弄看看事情是如何运作的。我想创建一个简单的 jsp 页面来显示一些基本 JMX 查询的结果。我正在使用 Eclipse IDE。有人可以给我一些入门提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:50:45.817

在这里，您绝对不必重新发明轮子。您可以从`jconsole`JDK 附带的 开始：只需运行`jconsole [pid]`并将`jconsole`连接到（本地）正在运行的进程，并让您通过 JMX 观察一切。

如果您想远程访问 JMX 公开的信息，您可以使用 Tomcat 的`manager`webapp 以及包含的`jmxproxy`servlet，它允许您远程执行简单的查询来获取（和设置）JMX 属性。

还有其他功能更齐全的项目，例如 Jolokia ( [http://www.jolokia.org/](http://www.jolokia.org/) )，它们可以做类似的事情。

假设您使用像 Nagios 之类的东西来自动观察您的 Tomcat 实例，那么您肯定不想这样做，它会启动 JVM 并建立远程（甚至本地）JMX 连接来检查单个 JMX 属性（然后这样做 5 次以观察 5 种不同的特性，然后每 5 分钟或 1 分钟或其他方式进行这 5 个样本）。相反，您可能希望使用上述代理。

我们已经成功地将 Nagios 与 Tomcat 管理器的`jmxproxy`servlet 结合起来。它可能会在很长一段时间内满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:50:31.747

在以编程方式使用 JMX 方面，有许多客户端类。这是我的[SimpleJMX 项目](http://256stuff.com/sources/simplejmx/)。有了它，您可以使用该`JmxClient`对象连接和询问远程 JVM：

```
JmxClient client = new JmxClient("remote.sever.name", remotePortNumber);
Set<ObjectName> objectNameSet = client.getBeanNames();
... 
```

这是[JmxClient 的 javadocs](http://256stuff.com/sources/simplejmx/javadoc/simplejmx/com/j256/simplejmx/client/JmxClient.html)。

# c# - 跨线程问题更新数据源

> ID：11057215
> 
> 赞同：0
> 
> 时间：2012-06-15T19:44:58.867
> 
> 标签：c#, .net, multithreading

**目标：**

单击用户界面上的开始按钮后，我目前会解雇两个后台工作人员。

BGWorker 1 负责调用 .dll 方法来爬取网站 BGWorker 2 负责使用 Datasource = source setter 更新 DataGridView

**问题：**

我的 dll 作为参数接收，对将在 .dll 运行时填充的数据源的引用。所以基本上，.dll 会偶尔在数据源中添加一个对象，直到它完成运行。

BGWorker 2 这样做：

```
while (1 == 1) // Runs until is it manually disposed
{
    CoursesGrid.BeginInvoke // inline method 
    (
        (Action) delegate 
        {
            if (_coursesSource.Count > 0) // if source is not empty,Binds.
            {
                try
                { 
                    CoursesGrid.DataSource = _coursesSource;
                    CoursesGrid.EndEdit();
                }
                catch (Exception ex)
                {
                    Logs.LogWriter.LogError(ex);
                }                   
            }
            else
            {
                // Signals User To keep Waiting
            }
        }
     );
Thread.Sleep(4000); 
```

**行为流：**

*   DLL被调用
*   方法解析元素并添加到源
*   最终，BGWorker 2 唤醒并将 DataGridView 源绑定到修改后的 Source
*   Dll 线程继续解析，但一旦尝试向源添加新元素就会失败

**TL:DR:** 线程 1 在源上写入 线程 2 读取此修改后的源，并将其绑定到 DataGridView 以刷新线程 1 无法再次在源上写入：

```
"Cross-thread operation not valid: Control 'CoursesGrid' accessed from a thread other than the thread it was created on."} 
```

两个线程都在处理同一个源，但是 BGWorker 2 只将它绑定到接口，这应该可以工作。知道这里可能会发生什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:01:49.980

我认为正在发生的事情是您将数据网格绑定到您的数据网格，`_coursesSource`这导致数据网格显示第一行。然后，稍后，您正在修改**同一个** `_coursesSource`实例，这可能会触发属性更改或集合更改通知，从而导致数据网格尝试自我更新（即显示新添加的行）。

但是由于修改发生在另一个线程上，数据网格“听到”并响应的事件也发生在导致跨线程冲突的后台线程上。

您需要做的是，a）将添加`_coursesSource`到 UI 线程（这听起来不像您可以轻松做到），或 b）绑定到 BGWorker 2 的副本，`_coursesSource`然后每次绑定到 BGWorker 2 中更新`_coursesSource`将网格重新绑定到新副本，这样网格永远不会“听到”更改通知，它始终只是绑定到集合的新副本。这不是最有效的做事方式，但它应该为您完成工作。

# c - 取消引用 C 中的非指针：n 维数组

> ID：11057216
> 
> 赞同：0
> 
> 时间：2012-06-15T19:45:01.267
> 
> 标签：c, arrays, pointers, n-dimensional

我想知道是否有可能通过有条件地取消引用不同的指针层，直到到达不是指针的层，才能到达 C 中 n 维数组的最低级别（非指针级别），如下例所示：

```
if(i_is_a_pointer){
  for(i = 0; i < some_given_length; i++){
    if((*i)_is_a_pointer){
      for(j = 0; j < some_given_length; j++){
        if((**i)_is_a_pointer)...etc.
      }
    }
  }
} 
```

这将深入研究数组，直到它碰到一个非指针或用尽最后编写的代码块。在 C 语言中，如何确定事物是否是指针（如果目标非指针的大小与内存地址的大小不同，我猜想 sizeof 会起作用），并且语句 **i 会是如果 *i 本身不是指针，编译时或运行时错误？

此外，您使用/推荐哪些语言和技术来遍历 n 维数组的非数组元素，其中 n 是在运行时确定的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:48:54.047

正如您似乎推断的那样，C 中的多维数组不是指针嵌套，直到您到达最终级别。它们只是数据块。在某些情况下，外部尺寸会自动转换为指针：数组转换为指向其第一个元素的指针。例如，

```
int a[3][4][5]; 
```

也可以写

```
typedef int INNER[5];    // array of 5 ints
typedef INNER MIDDLE[4]; // array of 5 INNERs (not pointers)
typedef MIDDLE OUTER[3]; // array of 3 MIDDLEs (not pointers)
OUTER a; 
```

那么这些也是数组的等价指针转换。

```
MIDDLE *pm = a;
INNER *pi = a[0];
int *p = a[0][0]; 
```

和

```
int (*pm)[4][5] = a;
int (*pi)[5] = a[0];
int *p = a[0][0]; 
```

最后，由于 C 是静态类型的，因此无法或不需要在运行时分析类型，就像您尝试使用`if`语句一样。在已编译的 C 程序中，基本上没有剩余的类型信息。

# google-bigquery - BigQuery 中的行号？

> ID：11057219
> 
> 赞同：30
> 
> 时间：2012-06-15T19:45:29.193
> 
> 标签：google-bigquery

有没有办法获取 BigQuery 中每条记录的行号？（从规范来看，我没有看到任何关于它的信息）有一个 NTH() 函数，但这适用于重复字段。

在 BigQuery 中有一些不需要行号的场景，例如使用 TOP() 或 LIMIT 函数。但是，我需要它来模拟一些分析函数，例如累积 sum()。为此，我需要用序号标识每条记录。有什么解决方法吗？

在此先感谢您的帮助！

狮子座

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-05-14T04:10:43.037

**2018 年更新：如果您想要的只是每一行的唯一 ID**

```
#standardSQL
SELECT GENERATE_UUID() uuid
 , * 
FROM table 
```

**2018 #standardSQL 解决方案：**

```
SELECT
  ROW_NUMBER() OVER() row_number, contributor_username,
  count
FROM (
  SELECT contributor_username, COUNT(*) count
  FROM `publicdata.samples.wikipedia`
  GROUP BY contributor_username
  ORDER BY COUNT DESC
  LIMIT 5) 
```

* * *

> 但是“查询执行期间资源超出：无法在分配的内存中执行查询。OVER() 运算符使用了太多内存..”怎么办？

好的，让我们重现该错误：

```
SELECT *, ROW_NUMBER() OVER() 
FROM `publicdata.samples.natality` 
```

是的 - 发生这种情况是因为 OVER() 需要将所有数据放入一个 VM 中 - 您可以使用 PARTITION 解决这个问题：

```
SELECT *, ROW_NUMBER() OVER(PARTITION BY year, month) rn 
FROM `publicdata.samples.natality` 
```

* * *

> “但是现在很多行都有相同的行号，而我想要的只是每行都有一个不同的 id”

好的好的。让我们使用分区为每一行指定一个行号，然后将该行号与分区字段结合起来，以获得每行的唯一 ID：

```
SELECT *
  , FORMAT('%i-%i-%i', year, month, ROW_NUMBER() OVER(PARTITION BY year, month)) id
FROM `publicdata.samples.natality` 
```

[![在此处输入图像描述](../Images/3830c007f3990c5f816785e2c8e55084.png)](https://i.stack.imgur.com/O0hUO.png)

* * *

2013 年的原始解决方案：

好消息：BigQuery 现在有一个 row_number 函数。

简单的例子：

```
SELECT [field], ROW_NUMBER() OVER()
FROM [table]
GROUP BY [field] 
```

更复杂的工作示例：

```
SELECT
  ROW_NUMBER() OVER() row_number,
  contributor_username,
  count,
FROM (
  SELECT contributor_username, COUNT(*) count,
  FROM [publicdata:samples.wikipedia]
  GROUP BY contributor_username
  ORDER BY COUNT DESC
  LIMIT 5) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-28T09:02:20.510

另一个*HACK*将遵循以下原则：

```
SELECT *
FROM UNNEST(ARRAY(
    SELECT myColumn FROM myTable
)) AS myValue WITH OFFSET off 
```

这为您提供了一个包含 2 列的结果集：`myValue`和`off`.

这样做的好处是您还可以`off`在`WHERE`子句中使用创建非确定性`LIMIT`，例如`WHERE off < (SELECT SUM(amount) FROM mySecondTable)`

请注意，我不认为这是处理大量数据的可行替代方案。但它可能适合您的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T20:55:05.863

我想也许我可以通过在 <= 上将表连接到自身然后对结果执行 count(*) 来解决缺少 ROW_NUMBER() 函数的问题（有时在 MySQL 中就是这样做的）。事实证明，BigQuery 仅支持直接连接“=”。

再次被挫败。我认为这在 BQ 是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T20:59:36.613

我们不公开行标识符。您可以在导入数据时简单地将其添加到数据中吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-09T06:31:23.153

我最近遇到了这个问题，但我的用例需要从头到尾的连续行号。可能不理想，但将其留在这里以防它可以帮助某人。

我为每个分区使用一个带有偏移量的指南表，以添加到它的所有行中。此偏移量是它之前所有分区中的行数之和。

```
select offset+ROW_NUMBER() OVER(PARTITION BY partitionDate) rowId
from `sample.example` input
left join
      (select partitions.partitionDate, partitions.count, SUM(duplicate.count)-partitions.count as offset
       from (
           select date(_PARTITIONTIME) partitionDate,COUNT(1) count 
           FROM `sample.example` 
           where date(_PARTITIONTIME) >= "2020-01-01" 
           group by _PARTITIONTIME) partitions
      inner join (
           select date(_PARTITIONTIME) partitionDate,COUNT(1) count 
           FROM `sample.example`
           where date(_PARTITIONTIME) >= "2020-01-01" 
           group by _PARTITIONTIME) duplicate 
      on partitions.partitionDate >= duplicate.partitionDate
      group by partitions.partitionDate, partitions.count
      order by partitions.partitionDate) guide
on date(_PARTITIONTIME) = guide.partitionDate
where date(_PARTITIONTIME) >= "2020-01-01" 
order by partitionDate 
```

# vb.net - 发送带有富文本框的电子邮件正文？

> ID：11057221
> 
> 赞同：1
> 
> 时间：2012-06-15T19:45:32.913
> 
> 标签：vb.net, smtp, rtf

我需要任何可以帮助我发送具有完整格式的 Richtextbox 内容的代码。我使用这段代码：

```
 Dim sendera As String = My.Settings.Sendermail
    Dim pass As String = My.Settings.Password
    Dim smtpServer As New SmtpClient()
    Dim mail As New MailMessage()
    smtpServer.Credentials = New Net.NetworkCredential(sendera, pass)
    smtpServer.Port = My.Settings.Port
    smtpServer.Host = My.Settings.SMTP
    smtpServer.EnableSsl = My.Settings.ESSL
    mail = New MailMessage()
    mail.From = New MailAddress(sendera)
    mail.To.Add(TextBox1.Text)
    mail.Subject = TextBox2.Text
    mail.IsBodyHtml = True
    mail.Body = RichTextBox1.Text
    smtpServer.Send(mail) 
```

但是当我发送电子邮件时，它显示为纯文本，没有任何格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:50:23.667

```
mailbody.Text.Replace(" ", "%20").Replace(vbNewLine, "%0A")
' %20 is url encoding for a space, %0A url encoding for new line 
```

试试这个：
[http](http://www.w3schools.com/tags/ref_urlencode.asp)
://www.w3schools.com/tags/ref_urlencode.asp 祝你好运

# python - 如何使用 MultiIndex 在单个级别的 DataFrame 上迭代和应用函数？

> ID：11057222
> 
> 赞同：5
> 
> 时间：2012-06-15T19:45:33.040
> 
> 标签：python, pandas

感谢对我[最初问题](https://stackoverflow.com/q/11037895/24895)的回复，我现在拥有了一个我想要的多索引 DataFrame。现在我*在*数据结构中拥有了数据，我正在尝试将其取出并想知道是否有更好的方法来做到这一点。我的两个问题是相关的，但可能有单独的“理想”解决方案：

**示例数据帧（截断）**

```
Experiment           IWWGCW         IWWGDW       
Lead Time                24     48      24     48
2010-11-27 12:00:00   0.997  0.991   0.998  0.990
2010-11-28 12:00:00   0.998  0.987   0.997  0.990
2010-11-29 12:00:00   0.997  0.992   0.997  0.992
2010-11-30 12:00:00   0.997  0.987   0.997  0.987
2010-12-01 12:00:00   0.996  0.986   0.996  0.986 
```

**迭代**

我希望能够在这个 DataFrame 上循环，其中迭代只会让我降低 1 个索引维度，即`iteritems`返回`[('IWWGCW', df['IWWGCW']), ('IWWGDW', df['IWWGDW'])]`并产生 2 个带有 Lead Time 列的 DataFrames 的行为。我的蛮力解决方案是使用基本上可以执行的包装程序`[(key, df[key] for key in df.columns.levels[0]]`。有一个更好的方法吗？

**申请**

我还想做一些事情，比如“从其他人那里减去 IWWGDW 条目”来计算成对差异。我试着去做，`df.apply(lambda f: f - df['IWWGDW'])`但`KeyError: ('IWWGDW', 'occurred at index 2010-11-26 12:00:00')`不管我是否使用`axis=1`or `axis=0`。我已经尝试使用上面确定的迭代解决方法重建一个新的 DataFrame，但是当我暴力破解时我总是担心。有没有更“熊猫”的方式来做这种计算？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T17:38:48.187

我建议使用 groupby 进行迭代：

```
In [25]: for exp, group in df.groupby(level=0, axis=1):
   ....:     print exp, group
   ....:     
IWWGCW Experiment           IWWGCW       
Lead Time                24     48
2010-11-27 12:00:00   0.997  0.991
2010-11-28 12:00:00   0.998  0.987
2010-11-29 12:00:00   0.997  0.992
2010-11-30 12:00:00   0.997  0.987
2010-12-01 12:00:00   0.996  0.986
IWWGDW Experiment           IWWGDW       
Lead Time                24     48
2010-11-27 12:00:00   0.998  0.990
2010-11-28 12:00:00   0.997  0.990
2010-11-29 12:00:00   0.997  0.992
2010-11-30 12:00:00   0.997  0.987
2010-12-01 12:00:00   0.996  0.986 
```

但是，我看到这并没有像您正在寻找的那样降低顶层。理想情况下，您可以编写如下内容：

`df.groupby(level=0, axis=1).sub(df['IWWGCW'])`

并让它进行成对减法，但是因为`df['IWWGCW']`降低了级别，所以列名不对齐。但是，这有效：

```
In [29]: df.groupby(level=0, axis=1).sub(df['IWWGCW'].values)
Out[29]: 
Experiment           IWWGCW      IWWGDW       
Lead Time                24  48      24     48
2010-11-27 12:00:00       0   0   0.001 -0.001
2010-11-28 12:00:00       0   0  -0.001  0.003
2010-11-29 12:00:00       0   0   0.000  0.000
2010-11-30 12:00:00       0   0   0.000  0.000
2010-12-01 12:00:00       0   0   0.000  0.000 
```

我会多考虑一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-21T18:48:00.707

我知道这很旧，但是按照@WesMcKinney 的回答，我发现放入循环中的最佳技巧就是立即选择它：

```
for exp, group in df.groupby(level=0, axis=1):
    print(group[exp])

Lead Time                24     48
2010-11-27 12:00:00   0.997  0.991
2010-11-28 12:00:00   0.998  0.987
2010-11-29 12:00:00   0.997  0.992
2010-11-30 12:00:00   0.997  0.987
2010-12-01 12:00:00   0.996  0.986 
```

这将`DataFrame`正确返回基础级别的 a

# ruby - Ruby 的 Enumerator 对象如何在内部迭代器上进行外部迭代？

> ID：11057223
> 
> 赞同：7
> 
> 时间：2012-06-15T19:45:37.247
> 
> 标签：ruby, iterator, enumerator

根据 Ruby 的文档，如果没有为or方法`each`提供目标方法，则 Enumerator 对象使用该方法（枚举）。现在，让我们以下面的猴子补丁及其枚举器为例`to_enum``enum_for`

```
o = Object.new
def o.each
    yield 1
    yield 2
    yield 3
end
e = o.to_enum

loop do
  puts e.next
end 
```

鉴于 Enumerator 对象在被调用`each`时使用方法来回答，那么对方法的调用看起来如何，每次被调用？Enumeartor 类是否预加载了枚举的所有内容并创建了本地副本以进行枚举？或者是否有某种 Ruby 魔法可以在每个 yield 语句处挂起操作，直到在 enumeartor 上被调用？`next``each``next``o.each``next`

如果制作了内部副本，是否是深层副本？可用于外部枚举的 I/O 对象呢？

我正在使用 Ruby 1.9.2。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T21:14:01.427

这并不完全是魔法，但它仍然很漂亮。a 不是制作某种副本，而是[`Fiber`](http://www.ruby-doc.org/core-1.9.3/Fiber.html)首先`each`在目标可枚举对象上执行。在接收到 的下一个对象后`each`，`Fiber`产生这个对象，从而将控制权返回到`Fiber`最初恢复的位置。

这很漂亮，因为这种方法不需要可枚举对象的副本或其他形式的“备份”，正如人们可以想象的那样，例如通过调用可枚举对象来获得`#to_a`。与光纤的协作调度允许在需要时准确地切换上下文，而无需保持某种形式的前瞻。

这一切都[发生](https://github.com/ruby/ruby/blob/trunk/enumerator.c#L546-L605)在`Enumerator`. 显示大致相同行为的纯 Ruby 版本可能如下所示：

```
class MyEnumerator
  def initialize(enumerable)
    @fiber = Fiber.new do
      enumerable.each { |item| Fiber.yield item }
    end
  end

  def next
    @fiber.resume || raise(StopIteration.new("iteration reached an end"))
  end
end

class MyEnumerable
  def each
    yield 1
    yield 2
    yield 3
  end
end

e = MyEnumerator.new(MyEnumerable.new)
puts e.next # => 1
puts e.next # => 2
puts e.next # => 3
puts e.next # => StopIteration is raised 
```

# javascript - jquery提示在onbeforeunload保存数据

> ID：11057224
> 
> 赞同：3
> 
> 时间：2012-06-15T19:45:42.473
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, jquery-ui

我想提醒用户在使用 jquery ui 对话框离开它们之前（通过单击页面上的其他链接）在某些页面上保存数据。我知道我需要使用 onbeforeunload 事件来检测用户正在离开当前页面，然后显示对话框。但是，当用户单击对话框上的“是”时，如何允许导航继续到选定的 url，而当用户单击“否”时，导航会停留在当前页面上？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:26:23.430

您只需将带有提示的函数分配给*window.onbeforeunload*事件，例如：

```
window.onbeforeunload =
    function() {
        return "Please make sure your data is saved."
    } 
```

浏览器会自动提示用户两个选择：“离开这个页面”和“留在这个页面上”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:43:50.017

在使用 jQuery 阅读[http://vidasp.net/jQuery-unload.html](http://vidasp.net/jQuery-unload.html) 并[在 Chrome 和 IE 中的 body 元素上设置 onbeforeunload](https://stackoverflow.com/questions/1802930/setting-onbeforeunload-on-body-element-in-chrome-and-ie-using-jquery)后，我们挂钩到 window.onbeforeunload 并绑定到 $(window).unload。这是一个带有示例的 jsFiddle：http: [//jsfiddle.net/jtaylor/SqwV2](http://jsfiddle.net/jtaylor/SqwV2)

# iphone - iPhone-表格视图

> ID：11057225
> 
> 赞同：-5
> 
> 时间：2012-06-15T19:45:45.213
> 
> 标签：iphone, xcode, uitableview, ios5.1

今天我有一个关于如何在 Xcode 5.1 中放置表格视图的问题。我想要一个不会占据整个 iPhone 屏幕的表格视图。我正在发送[我想要实现的插图](http://iphonemockup.lkmc.ch/?id=SHXCZHQcAXOFjaLbFKSXkRSFmKdgYLjeGPXXhdFfc&style=illustration)！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T06:10:37.423

您可以像这样务实地设置表格视图框架：

```
UITableView *table = [[[UITableView alloc] initWithStyle:UITableViewStylePlain] autorelease];
table.dataSource = self;
table.delegate = self;
table.frame = CGRectMake(0, 10, 320, 100);
[self.view addSubview:table]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:51:04.233

您可以将任何表格视图调整为您想要的任何大小。只需将表格视图控制器拖到视图控制器的内容视图中，然后连接出口、委托和数据源。我们在应用商店中有一个应用，其中 iPad 版本使用位于屏幕左下 1/2 的表格视图，其他 UI 元素位于上方和右侧。

但是，在 iPhone 上获得比纵向模式下的屏幕宽度更窄的有效表格视图可能是一个挑战，因为屏幕一开始就很窄。我不确定是否有足够的空间来容纳所有标准表格视图功能（缩略图图标、标签、辅助标签、显示三角形、拖动区域、删除按钮等）。

# c++ - 创建一个大型对象数组c ++

> ID：11057227
> 
> 赞同：1
> 
> 时间：2012-06-15T19:45:47.793
> 
> 标签：c++, arrays, object

我需要创建一个大的直方图数组（1000），其中每个直方图略有不同。我是 C++ 新手，我对如何做到这一点的第一个想法是使用 for 循环，该循环将创建直方图并将其添加到循环中的数组中，但我遇到了变量名称的问题（这是我所期望的）。在循环中添加它们时，如何使每个直方图的变量名称不同？

抱歉，如果措辞不当。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:59:01.987

听起来您想要的是一个直方图类，其中每个实例都有点不同。

```
class Histogram {
    unsigned m_count;
    std::string m_label;
public:
    Histogram(std::string label) : m_count(0), m_label(label) {}
    std::string & label () { return m_label; }
    std::string label () const { return m_label; }
    unsigned & count () { return m_count; }
    unsigned count () const { return m_count; }
}; 
```

`map`在 a而不是 a中管理这些可能更容易`vector`（除非您实际上可以将输入分类为一个数字），但每个直方图都需要一个唯一的标签。

```
std::map<std::string, std::unique_ptr<Histogram> > histograms;

while (more_input()) {
    input = get_input();
    std::string classification = classify_input(input);
    if (histograms[classification] == 0)
        histograms[classification]
            = std::unique_ptr<Histogram>(new Histogram(classification));
    histograms[classification]->count() += 1;
} 
```

# c# - 对象创建错误：对象引用未设置为对象的实例

> ID：11057234
> 
> 赞同：0
> 
> 时间：2012-06-15T19:46:22.227
> 
> 标签：c#

我正在尝试 在**Processor中创建类****appManager**的对象。对象创建在日志中引发错误。如果我评论以下行，应用程序工作正常。

 **应用管理器 obj = 新应用管理器 ();

错误：“对象引用未设置为对象的实例。”

```
public class appManager : IDisposable
{
    public appManager()
    {
    }

    public appManager(IpcController mycontroller)
    {
    }

    public void debugTest()
    {
        Debug.WriteLine("Debug Test");
    }
}

public class Processor
{

    appManager obj=new appManager();
    public void process(string input)
    {
        //obj.debugTest();
    }
} 
```

此 Visual Stduio 应用程序由另一个应用程序调用。所以，我无法通过代码进行调试。**

# ruby-on-rails - Rails 3 - 创建一个利用方法的范围

> ID：11057245
> 
> 赞同：0
> 
> 时间：2012-06-15T19:47:07.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, named-scope

在我的模型中，我想创建一个**利用**模型中的方法的范围。

我有以下模型方法：

```
 def is_paired
    ! pairing_id.nil?
  end 
```

我想做一个看起来像这样的范围

```
 scope :paired, where(:is_paired => true) 
```

但是当我这样做时，我得到一个错误：

```
SQLite3::SQLException: no such column: participants.is_paired: SELECT "participants".* F... 
```

如何创建一个**利用**模型中的方法的作用域？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:45:50.333

你不能。基本上是在 , 等范围内使用的`where`方法`order`。被“翻译”为 sql 查询。Rails 不知道如何将自定义方法转换为 sql 查询。无论如何，您可以使用以下方法：`scope :paired, where('pairing_id IS NOT NULL')` 有关更多详细信息，您可以检查：[Rails where condition using NOT NULL](https://stackoverflow.com/questions/4252349/rail-3-where-condition-using-not-null)

# apache-flex - 从 Flex 3 中的 dispatchEvent 获取结果

> ID：11057246
> 
> 赞同：0
> 
> 时间：2012-06-15T19:47:08.993
> 
> 标签：apache-flex, flex3, dispatchevent

我有以下自定义事件：

```
package com.un.photoManager.events
{
import flash.events.Event;

import mx.collections.ArrayCollection;

public class CreateAlbumFolderEvent extends Event
{
    // when creating an album, we need to know which albumfolder to put it in, 0 is the default group;
    public var albumFolderID:int = 0;
    public var name:String;

    public function CreateAlbumFolderEvent(type:String, name:String, albumFolderID:int = 0, cancelable:Boolean = false)
    {
        super(type, true, cancelable);
        this.name = name;
        this.albumFolderID = albumFolderID;

    }

}
} 
```

使用以下代码从弹出窗口调用该事件：

```
protected function handleCreate():void
        {
            var event:CreateAlbumFolderEvent;
            var selectedItemType:String;

            if (folderAlbum == CREATE_ALBUM)
            {
                event = new CreateAlbumFolderEvent(EventConstants.CREATE_ALBUM, newAlbumFolder.text, selectedAlbumFolderID);
                selectedItemType = "Album";
            }
            else
            {
                event = new CreateAlbumFolderEvent(EventConstants.CREATE_ALBUM_FOLDER, newAlbumFolder.text);
                selectedItemType = "Folder";
            }
            dispatchEvent(event);
            FolderBrowse.lastSelectedItemType = selectedItemType;
            PopUpManager.removePopUp(this);
        } 
```

我要做的是捕获返回的响应。这是显示响应的查尔斯的屏幕截图。Result 值是我希望在`dispatchEvent(event);`执行后能够使用的值。

[查尔斯的截图](http://i.stack.imgur.com/CLi05.png "截屏")

我已经为此工作了几个小时，查看博客和论坛帖子，但无法找到可行的解决方案。理想情况下，代码示例会很好，但现在任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:09:13.847

呃

更重要的问题可能是您如何收听活动？由于您是从弹出窗口中分派事件，因此我假设您正试图在弹出窗口范围之外访问此事件。

重要的是要考虑以下几点：

> 通常，事件的工作方式与您预期的一样，但有一种变化：来自弹出窗口的事件不会沿着继承链传递到主应用程序根。
> 
> 相反，从弹出窗口调度的事件在窗口根处终止。这是因为弹出管理器是弹出窗口的父级。
> 
> 因此，在弹出窗口中启动的事件不会冒泡到主应用程序页面，主应用程序页面是主应用程序中任何对象的最终父级。
> 
> Flex 应用程序中的弹出窗口不是应用程序容器的子项，而是 SystemManger 的子项。

这意味着如果您只是发送一个事件，它只会到达系统管理器，并且任何试图在应用程序层次结构中侦听较低级别的东西（即：一切）都不会收到这个。

这个问题有很多解决方案，并且根据您的架构（首选框架词（欧芹，robotlegs））进行更改，但是现在如果您只是向 Application.application.systemManager 添加一个侦听器，您应该会收到该事件：

Application.application.systemManager.addEventListener(EventConstants.CREATE_ALBUM_FOLDER, [YOUR HANDLER]);

您可能还需要在调度事件时对事件进行冒泡。

但是，这不是处理来自弹出窗口的事件的理想解决方案，您可能需要考虑将模型注入您的弹出窗口并让它们发布消息。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:03:37.223

您需要覆盖子类中的 Event.clone() 方法。clone() 方法通过设置类型属性和克隆中的任何新属性返回事件对象的克隆副本。通常，您定义 clone() 方法以返回使用 new 运算符创建的事件实例。

```
package sample
{
    import flash.events.Event;
    import mx.collections.ArrayCollection;

    public class CustomEvent extends Event
    {

        public static var DATA_LOADED:String = "dataLoaded";

        private var _data:ArrayCollection;

        public function CustomEvent(type:String, bubbles:Boolean=false, cancelable:Boolean=false, data:ArrayCollection=null)
        {
            super(type, bubbles, cancelable);
            _data = data;
        }

        override public function clone():Event
        {
            return new CustomEvent(type, bubbles, cancelable, data);
        }

        public function get data():ArrayCollection
        {
            return _data;
        }
    }
} 
```

# python - 如何使用 python os 更改驱动器？

> ID：11057247
> 
> 赞同：9
> 
> 时间：2012-06-15T19:47:13.963
> 
> 标签：python, windows, chdir

我正在尝试将当前目录从更改`C:`为`Y:` 我尝试过：

```
import os
os.chdir('Y:') 
```

但我一直收到一个错误，说它找不到驱动器。本质上，我正在寻找相当于

```
cd /d 
```

cmd中的命令。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T19:50:07.027

你确定`Y:`真的是一个有效的驱动器号吗？

尝试`os.chdir('C:')`并确保它有效。（这个对我有用。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T20:15:29.970

如果这是一个映射网络驱动器，最好的办法是使用 UNC 路径而不是映射路径。`r`此外，如果您不使用 Windows 下的路径，请尝试使用原始字符串修饰符`os.path.join`。

```
import os
print os.getcwd()
os.chdir(r'\\server\path') 
print os.getcwd() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-11-19T06:25:22.257

如果您正在执行 (Drive:path\to\folder) 尝试将斜杠切换到 (Drive:path/to/folder)

# android - 我需要活动、服务和广播接收器吗？

> ID：11057248
> 
> 赞同：-3
> 
> 时间：2012-06-15T19:47:16.700
> 
> 标签：android

在我所见的任何地方，据说 android 程序都建立在三个主要组件之上：活动、服务和广播接收器。到目前为止，我有活动和广播接收器，但不需要服务。这可以吗，还是我需要在我的程序中实现服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:49:28.740

您不必在应用程序中使用服务。仅当您的应用需要在后台执行某些操作时才需要服务。例如，当用户在音乐播放器之外做其他事情时，音乐播放器需要一个播放音乐的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:48:55.713

您需要什么取决于您希望应用程序做什么。如果您对如何实现应用功能的某些方面有具体疑问，请提出更详细的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T19:49:15.387

如果您还没有找到它们的用途，那么您可能不需要它们。

他们当然有自己的位置。

# java - 来自服务的通知

> ID：11057250
> 
> 赞同：2
> 
> 时间：2012-06-15T19:47:40.600
> 
> 标签：java, android

我试图在收到 C2DM 消息时显示一个简单的通知。服务提供给 UI，但仍然在主线程上运行。我见过有人声称您可以从服务中创建和显示通知。

```
 @Override
public void onMessage(Context context, Intent intent) {
    Log.w("Messsage","Message Received");
    Bundle extras = intent.getExtras();
    if (extras != null) {
        String payload = (String) extras.get("test");
        createNotification(context,payload);

    }
}

private void createNotification(Context context, String message){
    NotificationManager notificationmanager =  (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.default1,message,System.currentTimeMillis());

    notificationmanager.notify(0,notification);
} 
```

}

```
06-15 15:39:13.580: E/AndroidRuntime(11603): FATAL EXCEPTION: IntentService    [stp.chrome@gmail.com]
06-15 15:39:13.580: E/AndroidRuntime(11603): java.lang.IllegalArgumentException:   contentView required: pkg=com.upmc id=0 notification=Notification(contentView=null vibrate=null,sound=null,defaults=0x0,flags=0x0)
06-15 15:39:13.580: E/AndroidRuntime(11603):    at android.os.Parcel.readException(Parcel.java:1331)
06-15 15:39:13.580: E/AndroidRuntime(11603):    at android.os.Parcel.readException(Parcel.java:1281)
06-15 15:39:13.580: E/AndroidRuntime(11603):    at android.app.INotificationManager$Stub$Proxy.enqueueNotificationWithTag(INotificationManager.java:299)
06-15 15:39:13.580: E/AndroidRuntime(11603):    at android.app.NotificationManager.notify(NotificationManager.java:124)
06-15 15:39:13.580: E/AndroidRuntime(11603):    at android.app.NotificationManager.notify(NotificationManager.java:103)
06-15 15:39:13.580: E/AndroidRuntime(11603):    at com.upmc.C2DMReceiver.createNotification(C2DMReceiver.java:80)
06-15 15:39:13.580: E/AndroidRuntime(11603):    at com.upmc.C2DMReceiver.onMessage(C2DMReceiver.java:66)
06-15 15:39:13.580: E/AndroidRuntime(11603):    at com.google.android.c2dm.C2DMBaseReceiver.onHandleIntent(C2DMBaseReceiver.java:108)
06-15 15:39:13.580: E/AndroidRuntime(11603):    at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
06-15 15:39:13.580: E/AndroidRuntime(11603):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-15 15:39:13.580: E/AndroidRuntime(11603):    at android.os.Looper.loop(Looper.java:137)
06-15 15:39:13.580: E/AndroidRuntime(11603):    at android.os.HandlerThread.run(HandlerThread.java:60) 
```

我不知道为什么会抛出这个异常。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T20:12:01.107

首先，抛出异常是因为您创建了一个没有引用它的视图对象的通知（contentView 属性设置为 null）。您必须在显示通知之前调用[setLatestEventInfo](http://developer.android.com/reference/android/app/Notification.html#setLatestEventInfo%28android.content.Context,%20java.lang.CharSequence,%20java.lang.CharSequence,%20android.app.PendingIntent%29)。

其次，您使用的构造函数[已弃用](http://developer.android.com/reference/android/app/Notification.html#Notification%28int,%20java.lang.CharSequence,%20long%29)。请使用类[Notification.Builder](http://developer.android.com/reference/android/app/Notification.Builder.html)来创建通知。如果您支持 Android < API 级别 11，则可以使用支持库中的类[NotificationCompat.Builder](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)。

第三，是的，可以从正在运行的服务创建通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:15:26.163

您应该阅读通知文档。如果您不调用 setLatestEventInfo() 方法，则需要内容视图。

# c# - 获取ninject的具体实例

> ID：11057252
> 
> 赞同：2
> 
> 时间：2012-06-15T19:47:42.777
> 
> 标签：c#, dependency-injection, ninject

```
ninjectKernel.Bind<IReleaseDataProvider>().To<ReleaseDataProvider>().WithConstructorArgument("connectionString", _connectionString);    

ninjectKernel.Bind<IReleaseService>().To<ReleaseService>().WithConstructorArgument("releaseDataProvider", releaseDataProvider); 
```

如何获取应该在 releaseService 类的构造函数中传递的 releaseDataProvider 实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T21:17:03.390

```
ninjectKernel.Bind<IReleaseDataProvider>().To<ReleaseDataProvider>().WithConstructorArgument("connectionString", _connectionString); 

ninjectKernel.Bind<IReleaseService>().To<ReleaseService>(); 
```

No need to pass/get the releaseDataProvider manually.

When the ReleaseService instance is created its constructor parameter instance (ReleaseDataProvider) and those dependencies(connectionString) will be resolved

# maven - 使用JSF的alternatedocroot glassfish 3.1.2 maven企业项目

> ID：11057253
> 
> 赞同：1
> 
> 时间：2012-06-15T19:47:44.453
> 
> 标签：maven, jsf, configuration, glassfish

我似乎无法弄清楚alternatedocroot。我查看了有关 stackoverflow 的其他问题，以及 glassfish 的 Oracle 文档（但它们对我来说就像泥巴一样清晰）。

我有一个带有 web、ejb、ear 和聚合器/父模块的 maven 项目。在 web 模块/项目中，我添加了一个 glassfish-web.xml 文件，其中包含以下条目：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app error-url="">
  <class-loader delegate="true"/>
  <property name="alternatedocroot_1" value="from=/images/* dir=/images " />
  <jsp-config>
    <property name="keepgenerated" value="true">
      <description>Keep a copy of the generated servlet class' java code.</description>
    </property>
  </jsp-config>
</glassfish-web-app> 
```

我在 Linux 机器的根目录上创建了一个图像目录（一旦我解决了这个问题，我会把它放在其他地方）并在其中放入一个“picture.png”文件。我做了一个 chmod -R 777 /image 所以权限应该不是问题。

Welcome.xhtml 是这样的：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
  <h:head>
  </h:head>
  <h:body>
    Hello World
    <h:graphicImage url="/MyProject-web/images/picture.png" 
             height="200"
             width="960" />
  </h:body>
</html> 
```

我在运行项目时看到的只是
“Hello World”

这是运行时浏览器中的 URL：

```
http://localhost:8080/MyProject-web/ 
```

有人可以帮我解决 xhtml 文件中的属性/目录设置/和图像 url 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T05:14:20.883

所以这就是它的工作原理（最后）。我花了一段时间才找到我能理解的东西。所以我会尝试像其他任何事情一样进行布局。

让我们从磁盘上有一些资源或静态内容文件的地方开始。

```
/opt/project/resources/images/
/opt/project/resources/css/ 
```

并且您有要包含或引用的静态文件，如下所示：

```
/opt/project/resources/images/picture.png
/opt/project/resources/css/screen.css 
```

在 glassfish-web.xml 你会放（两个文档根）

```
<property name="alternatedocroot_1" value="from=/images/* dir=/opt/project/resources" />
<property name="alternatedocroot_2" value="from=/css/* dir=/opt/project/resources" /> 
```

在您的 xhtml 文件中显示图像并链接到外部 css 文件，您可以执行以下操作：

```
<h:graphicImage url="images/picture.png" />
<link href="css/screen.css" rel="stylesheet" type="text/css" media="screen, projection" /> 
```

你可以在图像目录下添加其他目录，这样你就有了类似的东西：

```
/opt/project/resources/images/otherimages/anotherpicture.png 
```

正如您所期望的那样，您会像这样使用它：

```
<h:graphicImage url="images/otherimages/anotherpicture.png" /> 
```

但是，如果您尝试将符号链接添加到其他图像所在的位置，它将不起作用。即以下将不起作用（您将无法访问“otherimages”符号链接目录中的图像）

```
.../resources/images$ ln -s /somedirectorytree/otherimages/ otherimages 
```

这太糟糕了。如果有人知道这是否真的可能（即如果我弄错了），我很想知道。或者，如果有其他技巧，而不是诉诸硬（编码......因为想要一个更好的词）配置。能够添加到其他文件系统的链接会很好。

* * *

**编辑**

作为旁注，我想我会添加另一个与此相关的有用的花絮。如果您想确保在 url 中获得文件的完整（上下文）路径，可以在前面添加：

```
<link href="${facesContext.externalContext.requestContextPath}/ 
```

使用上面的示例：

```
<link href="${facesContext.externalContext.requestContextPath}/css/screen.css" rel="stylesheet" type="text/css" media="screen, projection" /> 
```

这将确保您始终在服务器上查找正确的路径。

# ruby-on-rails - Rails disable_with 在模态框内的表单中不起作用

> ID：11057258
> 
> 赞同：1
> 
> 时间：2012-06-15T19:48:01.190
> 
> 标签：ruby-on-rails, forms, simple-form

我遇到了 disable_with 的问题。我在模态中有一个 simple_form 并且 disable_with 不起作用

但在模态框内的 form_tag 中效果很好

这是我的代码

```
>  <div class="modal-header">       <%= link_to '×', '#', class: 'close', data: {dismiss: 'modal'}, rel: 'tooltip', title: t(".close") %>  
>   <h3><%= t(".title")%></h3>   </div>
> 
>   <div class="modal-body">    <%= simple_form_for(@user_address, url:
> update_addresses_path, remote: true, method: :put, html: {class:
> 'form-horizontal'}) do |f| %>
>           <%= hidden_field_tag :id, @user_address.id %>
>           <%= f.input :nickname %>    
>           <%= f.input :address %>
>           <%= f.input :number %>
>           <%= f.input :complement %>
>           <%= f.input :neighborhood %>
>           <%= f.input :postal_code %>
>           <%= f.association :state, collection: State.all(order: :symbol), label_method: :symbol, input_html: {id: "state_id_order"} %>
>           <%= f.input :city_id, collection: State.all(order: :symbol), as: :grouped_select, group_label_method: :symbol, group_method: :cities, 
> include_blank: true, input_html: {id: "city_id_order"} %>   </div>
> 
>     <div class="modal-footer">
>       <%= link_to_cancel "#", data: {dismiss: "modal"} %>
>       <%= f.button :submit, class: "btn-warning", disable_with: t(".saving") %>
>     </div> 
```

我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:26:28.853

确保表单的开头和表单的结尾包含提交按钮。并开始诉诸于使用 disable_with 的 3.2 方式

```
<%= simple_form_for(x) do |f| %>
    <%= f.button :submit, :value => "Submit", data: {"disable-with" => "Creating..."} %>
<% end %> 
```

# c - fgetc，检查 EOF

> ID：11057259
> 
> 赞同：11
> 
> 时间：2012-06-15T19:48:03.483
> 
> 标签：c, eof, fgetc

在*Linux System Programming*一书中，我读过这样的书：

> `fgetc`将读取的字符作为`unsigned char`强制转换返回到文件或错误的结尾`int`或 `EOF`结尾。使用的一个常见错误`fgetc`是：
> 
> ```
> char c;
> if ((c = fgetc()) != EOF) {...} 
> ```
> 
> 此代码的正确版本是：
> 
> ```
> int c;
> if ((c = fgetc()) != EOF) { printf("%c", (char)c); ... } 
> ```

那么，为什么我不能`char`在与比较之前将返回值转换为`EOF`？为什么我必须与`EOF`精确比较`int`？如`EOF`定义为`-1`，它通常不是转换为`char`吗？
是否存在不正确的平台/编译器？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T19:49:36.917

您不能将返回值转换为 char 因为返回值可能是`EOF`，并且`EOF`value 是系统相关的并且不等于任何有效的字符代码。[关联](http://en.wikipedia.org/wiki/End-of-file)

通常是这样，`-1`但你不应该假设。

从[c-faq-site](http://c-faq.com/stdio/getcharc.html)检查这个很好的答案：

> 如果像上面的片段一样，将 getchar 的返回值分配给 char，则可能有两种失败模式。
> 
> 1.  如果类型 char 是有符号的，并且如果 EOF 被定义（通常）为 -1，那么十进制值为 255 的字符（C 中的“\377”或“\xff”）将被符号扩展并且比较等于EOF，过早终止输入。（假设 8 位字符）。
>     
>     
> 2.  如果 char 类型是无符号的，实际的 EOF 值将被截断（通过丢弃其高位，可能导致 255 或 0xff）并且不会被识别为 EOF，从而导致有效的无限输入。

希望能帮助到你！

**已编辑：（**在此答案上添加了@FatalError 评论，这在 c-faq 网站上进行了解释，但这对我来说看起来更清楚）

“如果将其转换为 char，则 EOF 与某个有效字符具有相同的值，因此与该字符无法区分。仅此一项就足以证明不将结果设为 char”@FatalError 评论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T20:13:06.493

`char`在与 EOF 比较之前将值分配给 a 有两种可能性：

*   `char`是一个有符号的值。在这种情况下，有一个合法的字符（通常是 ÿ，带有分音符号的小拉丁字母 Y，U+00FF）将被误解为 EOF。
*   `char`是一个无符号值。在这种情况下，EOF 将被转换为 0xFF，然后将其提升`int`为正值，它永远不会与 EOF 进行比较，后者是负值。

无论哪种方式，该程序都会在某些时候出现异常。

存在（或更准确地说，曾经是）编译器错误的可能性，即分配正确发生但分配的值未用于比较。这将导致代码看起来可以正常工作，即使它不是。幸运的是，这不太可能是现代编译器中发现的问题。

# matlab - 如何找到向量中出现两次的第一个元素

> ID：11057262
> 
> 赞同：2
> 
> 时间：2012-06-15T19:48:37.900
> 
> 标签：matlab, duplicates, vectorization

我想找到出现在向量中先前位置的第一个元素。

例如，如果向量是：

```
v = [1, 3, 2, 3, 4, 5]; 
```

答案是`v(4) = 3`，因为 3 是第一个出现两次的元素。
有没有办法向量化这个操作？

**更新：**
这是我目前的解决方案，您有更好的建议吗？

```
[s o] = sort(v);  % sort the array
d = diff(s);      % the first zero corresponds to the first repetitive element  
d = find(d == 0); 
```

`o(d(1) + 1)`是出现两次的第一个元素的索引。

**新更新：**
按照@mwengler 的解决方案，我现在提出解决方案来找到矩阵每一行的第一个重复元素。

```
function vdup = firstDup(M)
    [SM Ord] = sort(M, 2);    % sort by row
    [rows cols] = find(~diff(SM, 1, 2));   % diff each row, and find indices of the repeated elements in sorted rows
    Mask = (size(M,2) + 1) * ones(size(M)); % create a Mask matrix with all size(M,2)+1
    ind = sub2ind(size(Ord), rows, cols+1); % add 1 to the column indices
    Mask(ind) = Ord(ind);   % get the original indices of each repeated elements in each row
    vdup = min(Mask, [], 2); % get the minimum indices of each row, which is the indices of first repeated element 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:54:29.597

这将起作用。@Steve 指出了您更新的解决方案中的一个错误。

```
[~, ~, Iv] = unique(v, 'stable');
idx = find(diff(Iv)-1, 1)+1;
el = v(idx); 
```

在此之后，`el`将包含第一个重复的元素 in`v`并将`idx`成为其 in 的索引`v`。

首先，您使用[stable unique](http://www.mathworks.com/help/techdoc/ref/unique.html#inputarg_setOrder)来查找唯一元素。第二个输出参数包含每个唯一元素的原始索引。然后，您运行`diff(Iv) - 1`以查找原始索引中的跳跃。您用于`find(, 1)`获取第一个元素并添加一个以获取原始向量中的索引。索引到原始向量以获取您想要的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T22:32:33.110

@Fash 最初提出的答案几乎是可行的。沿着他的道路走得更远：

```
sv = sort(v);
repeated = sv(~diff(sv));
ifr = find(ismember(v,repeated),'first');
ir2 = find(v==v(ifr));
index_desired = ir2(2);
value_desired = v(index_desired); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-20T09:46:39.263

```
idx = find(any(triu(bsxfun(@eq, v, v.'), 1)), 1);
el = v(idx); 
```

这是如何工作`bsxfun(...)`的：将每个条目`v`相互比较。`triu(...,1)`仅保留与*前一个*元素的匹配项（仅保留对角线以上的值）。`any`告诉哪些条目与某个先前的条目匹配。`find(...,1)`给出第一个此类条目的索引.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T19:53:46.290

存储在一个哈希表中，您可以检查它是否已经有内容？

就像是：

```
If (hash.hasValue(i))
  return true;
else
  hash.insert(i, 1);
  return false; 
```

其中 i 是键，位置，并且可以只包含一些简单的东西，例如允许较小的结构尺寸。

# php - 寄存器全局变量会影响未定义的常量错误吗？

> ID：11057263
> 
> 赞同：0
> 
> 时间：2012-06-15T19:48:41.253
> 
> 标签：php, mysql

我在 localhost xammp 上安装了一个 travian 脚本，但出现了很多错误。

其中四个是应该保存mysql信息的通知。“使用未定义的常量 SQL_USE”

这四个错误是因为全局寄存器关闭而发生的吗？还是与此无关？

好的，所以在 GameEngine 里面有一个 config.php 文件。这个文件，当前正在执行的文件，对 config.php 和 config.php 的调用包含以下内容。

```
// ***** Database Username
define("SQL_USER", "root");

// ***** Database Password
define("SQL_PASS", "sergfree");

// ***** Database Name
define("SQL_DB", "trav");

// ***** Database - Table Prefix
define("TB_PREFIX", "s1_"); 
```

这是包含

```
include ("../../GameEngine/config.php"); 
```

这是当前文件位置 C:\xampp\htdocs\install\include\multihunter.php 那么为什么这不起作用？

```
Deprecated: Assigning the return value of new by reference is deprecated in C:\xampp\php\PEAR\Config.php on line 80

Deprecated: Assigning the return value of new by reference is deprecated in C:\xampp\php\PEAR\Config.php on line 166

Notice: Use of undefined constant DB_TYPE - assumed 'DB_TYPE' in C:\xampp\htdocs\GameEngine\Database.php on line 13

Notice: Use of undefined constant SQL_SERVER - assumed 'SQL_SERVER' in C:\xampp\htdocs\GameEngine\Database\db_MYSQL.php on line 17

Notice: Use of undefined constant SQL_USER - assumed 'SQL_USER' in C:\xampp\htdocs\GameEngine\Database\db_MYSQL.php on line 17

Notice: Use of undefined constant SQL_PASS - assumed 'SQL_PASS' in C:\xampp\htdocs\GameEngine\Database\db_MYSQL.php on line 17

Warning: mysql_connect() [function.mysql-connect]: php_network_getaddresses: getaddrinfo failed: No such host is known. in C:\xampp\htdocs\GameEngine\Database\db_MYSQL.php on line 17

Warning: mysql_connect() [function.mysql-connect]: [2002] php_network_getaddresses: getaddrinfo failed: No such host is known. (trying to connect via tcp://SQL_SERVER:3306) in C:\xampp\htdocs\GameEngine\Database\db_MYSQL.php on line 17

Warning: mysql_connect() [function.mysql-connect]: php_network_getaddresses: getaddrinfo failed: No such host is known. in C:\xampp\htdocs\GameEngine\Database\db_MYSQL.php on line 17
php_network_getaddresses: getaddrinfo failed: No such host is known. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:51:49.390

可能您忘记包含一个配置文件，其中 SQL_ 定义完成。

根据您的编辑，取消注释那些定义行：

```
// * Database Username 
define("SQL_USER", "root"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:53:02.517

我的猜测是您缺少一些必需的配置。注册全局变量仅关注来自实际请求的变量（GET 和 POST 参数、cookie、环境）。您的案例中缺少的常量似乎是实际的数据库凭据，显然它们的缺失会导致连接不成功。可能应该有一些描述如何设置代码的文档，您应该阅读这些文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T19:57:27.203

通知可能是您或脚本作者在数组键中省略引号引起的，例如：

```
$foo = $config[SQL_SERVER]; 
```

...它应该在哪里：

```
$foo = $config['SQL_SERVER']; 
```

对于前者，PHP 会（正确地）查找一个名为`SQL_SERVER`的常量，该常量的值用于数组键，当它没有找到时，您可能打算使用 string `'SQL_SERVER'`。这是 PHP 最糟糕的“功能”之一，您看到这些错误表明该代码的作者可能是新手。

作者也有可能分发了一个配置文件，其中包含如下行：

```
$foo = SQL_SERVER; 
```

...假设您会看到它并将其替换为例如

```
$foo = "10.0.0.2"; 
```

（这种配置方法也是一种不好的做法，因为如果用户错过了某些配置行，它会导致——或者应该导致——运行时错误，而不是提供有用的信息。）

The package's `README` or equivalent should tell you where configuration values should be set—often this is a file named something like `config.php` or `config.inc.php`, or sometimes e.g. `config.sample.php` which you're intended to modify and then rename to `config.php`.

# javascript - Internet Explorer 缺少数组函数——更好地实现自己的或使用外部库？

> ID：11057270
> 
> 赞同：0
> 
> 时间：2012-06-15T19:49:03.990
> 
> 标签：javascript, arrays, internet-explorer

众所周知，Internet Explorer（至少 <= 8）不支持多个 javascript 数组函数（`indexOf`、`filter`等）。 [这个 stackoverflow 答案](https://stackoverflow.com/a/2790686/201308 "这个stackoverflow答案")为这些缺失的 Array 函数中的大多数提供了一些不错的实现。

我的问题*是：最好是为您的网站提供类似答案中的实现，还是仅仅依赖外部库（jQuery 等）*？

有最佳实践吗？在这种情况下，我正在寻找比我更有实践经验的人的见解。

不依赖外部库总是一个优点（尽管它们在大多数情况下普遍存在）。但是不能保证任何自定义实现都会涵盖所有边缘情况，并且它引入了一些需要维护的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:19:25.133

最佳实践可能是使用[es5-shim](https://github.com/kriskowal/es5-shim)，它可以让您在所有浏览器中使用 javascript，就好像它完全兼容 ECMAScript 5（有一些限制，例如`Object.create`无法模拟的第二个参数）。

这样做的绝对优势是它只作用于缺少此类扩展的浏览器，因此现代浏览器将使用内置优化版本的代码。

此外，您避免利用定义自己规范的外部库，如果 jQuery 有点损坏，就像`$.each`将参数与规范所说的相反`Array.prototype.forEach`，或者奇怪的命名约定，比如`$.proxy`做什么`Function.prototype.bind`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:36:37.763

其他人很难回答什么是可取的和不可取的，但这是我更喜欢的：

如果它只是少数几个功能，那么我可能会自己实现它们。但是，就像您说的那样，您可能无法考虑所有边缘情况（至少不能立即考虑），并且您添加了更多需要维护的内容。流行的库（如[Underscore.js](http://underscorejs.org/)这对您的情况很有用）由许多人（通常）制作和维护，他们的主要关注点是该库的功能和性能。因此，他们更有可能比您更快地找到并解决任何问题。随着项目的进展，您可能会发现图书馆可以为您做的事情越来越多。很有可能存在他们已经考虑并考虑到的跨浏览器问题，而您直到测试很长时间才会注意到，或者更糟糕的是，客户抱怨。

了解一个流行的库也可以为未来的项目节省时间。对您和/或任何雇主/客户来说，对一个好的图书馆更有信心还有好处。

话虽如此 - 这是一个权衡，因为大多数库包含的功能比您最终使用的要多，因此浪费的空间会导致消耗更多的带宽和使用不必要的内存。带宽问题主要通过适当的缓存来解决。

此外，那里有大量优秀的库，几乎可以用于任何事情 - 因此，如果您使用太多库并使用太多库，您很容易最终不得不包含许多 100 千字节甚至更多的 Javascript。

**所以总结一下：**我更愿意将实用功能的创建和维护外包给那些想要免费做这些事情的人，而不是将我的时间和精力花在更直接为最终用户创造价值的事情上。

# java - .class 文件是否有关联的类路径？

> ID：11057271
> 
> 赞同：-4
> 
> 时间：2012-06-15T19:49:09.660
> 
> 标签：java, classpath

类路径上的信息是否嵌入到类文件中？

我有一个 jar 文件，其中包含一个我试图编译 java 程序的类，但它永远找不到 jar 中的类。

我尝试使用 -cp path_to_the_jar 进行编译，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:49:00.657

确保在类路径中包含 jar 本身（不仅仅是 jar 所在的目录）：

javac -cp your_jar.jar YourJavaFile.java

# ruby-on-rails-3 - Rails 3 带有约束的嵌套路由

> ID：11057290
> 
> 赞同：2
> 
> 时间：2012-06-15T19:50:19.440
> 
> 标签：ruby-on-rails-3, routes

我想在路由中使用 UUID 代替 id 标准 ID。这有效：

```
# UUIDs are used for ids
UUID_regex = /([a-z0-9]){8}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){12}/
resources :posts, :only => [:index, :show, :create], :constraints => {:id => UUID_regex} 
```

那就是 Rails 可以接受`/posts/fb0f7c67-6f9b-4e2c-a26b-7700bb9b334d`。

但是，当我开始像这样嵌套它们时，

```
# UUIDs are used for ids
UUID_regex = /([a-z0-9]){8}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){12}/
resources :posts, :only => [:index, :show, :create], :constraints => {:id => UUID_regex} do
  resources :comments, :only => [:create, :destroy], :constraints => {:id => UUID_regex}
end 
```

Rails 开始抱怨：`No route matches [POST] "/post/fb0f7c67-6f9b-4e2c-a26b-7700bb9b334d/comments"`

我错过了什么？

提前谢谢。

注意：我在 Rails 3.2.2 和 ruby​​ 1.9.3 上；`rake routes`是：

```
post_comments POST   /posts/:post_id/comments(.:format)     comments#create {:id=>/([a-z0-9]){8}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){12}/, :post_id=>/([a-z0-9]){8}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){12}/}
post_comment  DELETE /posts/:post_id/comments/:id(.:format) comments#destroy {:id=>/([a-z0-9]){8}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){12}/, :post_id=>/([a-z0-9]){8}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){12}/}
       posts  GET    /posts(.:format)                       posts#index {:id=>/([a-z0-9]){8}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){12}/}
              POST   /posts(.:format)                       posts#create {:id=>/([a-z0-9]){8}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){12}/}
        post  GET    /posts/:id(.:format)                   posts#show {:id=>/([a-z0-9]){8}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){12}/} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:39:30.470

据我所知，当您在父路由上设置约束时，子路由将继承该字段上的约束。因此，我的理解是：

```
UUID_regex = /([a-z0-9]){8}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){4}-([a-z0-9]){12}/
resources :posts, :only => [:index, :show, :create], :constraints => {:id => UUID_regex} do
  resources :comments, :only => [:create, :destroy]
end 
```

足够了。不是这样吗？我的应用程序仍在 3.1/1.9.2 中，因此尚未在 3.2 应用程序中进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-10T13:02:41.877

UUID 使用十六进制数字，因此 az 应紧缩为 af。此外，十六进制不区分大小写，因此“C”和“c”都是有效数字。我使用以下内容：

`UUID_regex = /[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/`

# android - Eclipse 在 ActionBarSherlock 中找不到 Theme.Sherlock

> ID：11057294
> 
> 赞同：4
> 
> 时间：2012-06-15T19:50:30.577
> 
> 标签：android, actionbarsherlock

这是直接从我在 Google Groups 上提出的问题复制而来的：

我在 Eclipse（Indigo）中使用 ABS 时遇到问题。我正在使用 ABS 4.1.0。我在 Eclipse 中从 /library 创建了一个项目，将构建目标设置为 14，将 minSdk 设置为 14，Java 合规级别设置为 1.6，正如我被告知的那样。ABS项目中没有错误，但在我自己的项目中，minSdk 7，targetSdk 14，构建目标14和ABS添加为库，我在AndroidManifest.xml中得到这个错误：

```
Error: No resource found that matches the given name (at 'theme' with value '@style/Theme.Sherlock') 
```

即使我已经进口了ABS。
另外，R.java 拒绝生成，所以我的课堂上也有一堆“R 无法解析为变量”。两者有关系吗？

如果您需要更多信息，请告诉我。
帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:49:38.350

在我的情况下，该库位于另一个硬盘上（不在 Eclipse 工作区中）。在我将 lib-project 移入工作空间后，它起作用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T00:12:30.080

嗯，这确实让我觉得自己很愚蠢。但现在我可以睡个好觉了（这些事情总是让我夜不能寐）。

导致我的问题的原因仅仅是该库与我的工作区不在同一个驱动器上（分别为 D: 和 C:），因此 Eclipse 无法在两者之间创建相对路径。我只是将库移到 C: 并且它起作用了。

[感谢这个问题让我走上了正确的道路。](https://stackoverflow.com/questions/10200751/eclipse-will-not-recognize-project-as-library-actionbarsherlock-viewpagerindica)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T19:57:21.540

1) 从项目的 lib 目录中删除 library-4.0.0.jar 和 android-support-4.0.jar（或取消链接）。在我看来，设置指南对此有点不清楚。android-support-library 只需要添加到*ABS-Library-Project*，而不是你的项目。

2）尝试清理你的图书馆项目和你的实施项目。另外，右键单击每个项目并选择 Android --> Fix project properties

3) 检查库项目的属性->Android 屏幕上的“是库”复选框是否已选中，并且您已在实施项目的此屏幕上添加库项目（而不是作为外部/ Java 库）

4) 尝试导入可以从 ABS 网站下载的“ABS 示例项目”，看看那里是否出现相同的错误。

5) 在您收到与“R 无法解析...”相关的错误的 Java 类中，检查您正在导入`import com.yourcompany.yourapp.R;`而不是 ABS- `R`。修复您遇到的任何错误（或只是暂时删除引发错误的代码），以便`R`可以正确生成项目的 -file。清单中的错误应该会在之后消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:44:22.327

我终于找到了解决方案：

1.  重要的！在两个项目中复制相同的 android-support-v4.jar：在库和您的项目中（这是主要问题）。
2.  将“库”项目导入您的工作空间
3.  右键单击库项目 Properties -> Android -> Check "Target Name" 4.x (any, API level 14,15 or 16)。底部检查“是图书馆”。
4.  在属性中，转到“Java Build Path”，选项卡“Libraries”并在“Android Dependencies”中通常找到“android-support-v4.jar”。确定并关闭属性。
5.  右键单击库项目 Android 工具 -> 修复项目属性
6.  在 Menu Project -> Clean... 并选择清理“Library”项目。

在这个地方，你的项目“库”必须完成（没有错误）

1.  创建或导入您自己的项目。示例“我的项目”
2.  在属性中，转到“Java Build Path”，选项卡“Libraries”并在“Android Dependencies”中通常找到“android-support-v4.jar”。
3.  现在转到“项目”选项卡。添加...并选择“库”项目。
4.  现在在属性中转到 Android -> 检查“目标名称”4.x（任何，API 级别 14,15 或 16）。重要提示：必须与“库”项目相同。底部的“是图书馆”必须取消选中，在这个地方按添加...并选择“图书馆”项目。确定并关闭属性。
5.  右键单击“MyProject”项目 Android 工具 -> 修复项目属性
6.  在 Menu Project -> Clean... 并选择清理“MyProject”项目。

已经，您的项目必须完成。如果错误仍然存​​在，请重新启动 Eclipse。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T23:34:44.480

尝试将您的目标 API 级别（ActionBarSherlock 项目和您的）更改为 15。

1.  更新您的清单：`android:targetSdkVersion="15"`.
2.  **通过在 Project Explorer 中右键单击您的项目并选择Properties**，单击**Android**（在左侧面板中），然后选中与 API 15 对应的复选框，将构建目标更改为“Android 4.0.3” 。

此外，删除引用的库（带有红色 X 的库）并重新添加它。现在应该有一个绿色检查。我相信一旦你这样做，一切都应该工作。

# c - const char* 和 free()

> ID：11057295
> 
> 赞同：5
> 
> 时间：2012-06-15T19:50:31.020
> 
> 标签：c, memory-management, free, character-arrays

给定下一个代码示例，我无法释放参数`const char* expression`：

```
// removes whitespace from a characterarray
char* removewhitespace(const char* expression, int length)
{
    int i = 0, j = 0;
    char* filtered;
    filtered = (char*)malloc(sizeof(char) * length);
    while(*(expression + i) != '\0')
    {
        if(!(*(expression + i) == ' '))
        {
            *(filtered + j) = *(expression + i);
            j++;
        }
        i++;
    }
    filtered[j] = '\0';
    free(expression); //this doesn't seem to work
    return filtered;
} 
```

在返回此函数之前，我尝试释放表达式参数中的数据，但似乎无法释放它。
我认为这可能是因为它是一个常量，但我了解到 C 中的字符数组始终应该是一个常量。

我收到的错误消息与消息是一致`free(expression)`的，消息是：
`expected void* but argument is of type const char * - compiler error`

如何丢弃数据`expression`包含的内存？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T19:54:47.503

如果它是一个常量，这意味着它不应该被删除，因为它没有被分配：调用者很容易将一个基于堆栈的数组传递给你的方法，释放它是一件*坏事*。

最常见的约定是任何代码分配一些数据都应该释放数据。消除这种争论真的不是你的例行公事的责任，因为它无法知道这是否是合法的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:08:07.503

如果你真的想要一个这样的函数——获取一个堆指针，释放它，尽管返回另一个堆指针——你应该很好地记录它。

此外，您不应该制作`expression`a `const char*`，因为如您所见，这不匹配。`char*`不过应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-03T20:51:48.087

直接直接提出问题 `free((void*)expression);` 应该足以解决编译错误。 **但是，**正如其他人已经声明的那样，您应该让谁在调用您的函数来管理内存

# java - C++中抽象类的多重继承

> ID：11057297
> 
> 赞同：1
> 
> 时间：2012-06-15T19:50:33.997
> 
> 标签：java, c++, class, inheritance, abstract

Java 不支持抽象类的多重继承，但我试图在 C++ 中做与此等效的操作：

```
//this is Java-style pseudocode
public abstract class Rectangle{
    public abstract double getHeight();
    public abstract double getWidth();
    public double getHeight(){
        return getWidth()*getHeight();
    }
}

public abstract class Container{
    public abstract void printTypes();
    public abstract void printEachElement();
    public void printContainerStuff(){
        System.out.print("Has the types: ");
        printTypes();
        System.out.print("List of elements: ");
        printEachElement();
    }
}

public abstract class Array extends Rectangle, Container{ //this can't be done in Java, but what about C++?

} 
```

C++ 中是否有等效的 Java 抽象类可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:54:27.430

要在 C++ 中使类抽象，至少一个成员函数必须是纯虚函数：

```
class X
{
public:
    virtual void f() = 0;
}; 
```

如前所述，在 C++ 中允许多重继承：

```
class Rectangle
{
public:
    virtual double getHeight() = 0;
    virtual double getWidth() = 0;
    double getHeight(){
        return getWidth()*getHeight();
    }
};

class Container
{
public:
    virtual void printTypes() = 0;
    virtual void printEachElement() = 0;
};

class Array: public Rectangle, public Container
{
    // If the pure virtual member functions in the base classes
    // are not implemented then this class is also abstract.
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:52:03.467

我认为您正在寻找 Java 接口。

```
public abstract class Rectangle{
    public abstract double getHeight();
    public abstract double getWidth();
    public double getHeight(){
        return getWidth()*getHeight();
    }
}

public interface Container {
    public void printTypes();
    public void printEachElement();
}

public abstract class Array extends Rectangle implements Container {
} 
```

在 C++ 中，您可以拥有多重继承。您还可以使用带有纯虚拟方法的 Java 接口之类的东西。

```
class Container {
    public:
        virtual void printTypes() = 0;
        virtual void printEachElement() = 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T19:52:08.460

C++ 允许多重继承。所以这在 C++ 中是允许的。

而在 C++ 中相当于 Java 的抽象类是一个至少有一个*纯* `virtual`成员函数的类。

因此，C++ 中 Java 代码的等价物将是：

```
class Rectangle
{
  public:
    virtual double getHeight() = 0;
    virtual double getWidth() = 0;
    double getHeight(){
        return getWidth()*getHeight();
    }
};

class Container(){
  public:
    virtual void printTypes() = 0;
    virtual void printEachElement() =0;
}; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T19:56:06.863

如果你想要继承行为。（代码是Java，你可以在c++中尝试这样的事情）

```
abstract class Rectangle{

    public abstract double getHeight();
    public abstract double getWidth();
    public double getHeight(){
        return getWidth()*getHeight();
    }
}

abstract class Container extends Rectangle{
    public abstract void printTypes();
    public abstract void printEachElement();
}

abstract class Array extends Container{ 

} 
```

# php - 如何在 PHP 中使用时间跨度？

> ID：11057298
> 
> 赞同：0
> 
> 时间：2012-06-15T19:50:34.150
> 
> 标签：php, mysql, datetime, time, timespan

我有 2 个字段要填充：每 15 分钟和每小时调用多少次页面。

以下字段是 MySql 中的 DateTime：

```
$lastAccess15m=$row['lastAccess15m'];
$lastAccessHour=$row['lastAccessHour']; 
```

这些字段是整数：

```
$accessPer15m=$row['accessPer15m'];
$accessPerHour=$row['accessPerHour']; 
```

我想将当前时间与 进行比较`$lastAccess15`，如果时间距离大于 15 分钟，则将 的值设置`$lastAccess15`为当前时间，并重置`$accessPer15m`，否则，递增`$accessPer15m`。`$lastAccessHour`和也是如此`$accessPerHour`，之后必须将这些值保存到 mysql 数据库中。

如何获得当前时间和 $accessPer15m 之间的时间跨度（以分钟/小时为单位）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:10:14.933

[PHP时间（）](http://php.net/manual/en/function.time.php)：

> 返回自 Unix 纪元（格林威治标准时间 1970 年 1 月 1 日 00:00:00）以来以秒数测量的当前时间。

[MySQL日期](http://dev.mysql.com/doc/refman/4.1/en/datetime.html)时间：

> DATETIME 类型用于同时包含日期和时间部分的值。MySQL 以 'YYYY-MM-DD HH:MM:SS' 格式检索和显示 DATETIME 值。支持的范围是“1000-01-01 00:00:00”到“9999-12-31 23:59:59”。

**要比较它们**，您需要转换一个，然后它们执行比较：

```
$phpDateFromMysql = strtotime( $mysqldate );

$mySqlDateFromPHP = date('Y-m-d H:i:s', $phpdate); 
```

**最简单的方法**是将 Mysql 值转换为 time() 并进行比较：

请参阅此[工作示例](http://codepad.org/2izBsnVL)！

```
<?php

// compare if the value from $lastAccess15 is +15min in relation to the current time
$lastAccess15 = '2012-06-01 00:00:00';

$phpDateFromMysql = strtotime( $lastAccess15 );

if ($phpDateFromMysql - $lastAccess15 > 900) {
    $lastAccess15 = date('Y-m-d H:i:s', time());
}

echo $lastAccess15;
?> 
```

**注意：**在`if`语句中，您可以执行剩余的操作，如果时间不大于 15 分钟，甚至可以添加一个`else`子句来执行某些操作（如您所指的增量）。

* * *

**相关阅读材料：**

PHP [strtotime](http://php.net/manual/en/function.strtotime.php)函数

PHP[日期](http://php.net/manual/en/function.date.php)函数

PHP [elseif/else if](http://php.net/manual/en/control-structures.elseif.php)控制结构

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:55:32.043

在 SQL 中还有 SELECT `NOW() as current_timestamp`（连同您的其他选择）。

在 PHP 中：

```
if ((strtotime($row['current_timestamp']) - strtotime($row['lastAccess15m'])) > 900) {

 // your code 
} 
```

`strtotime`将 TimeStamp 转换为秒，然后您可以将时差与 900 秒进行比较。（15分钟）。

# jquery - JSON对象的jQuery克隆返回未定义

> ID：11057299
> 
> 赞同：0
> 
> 时间：2012-06-15T19:50:35.853
> 
> 标签：jquery, json, clone

根据文档，[jQuery.extend()](http://api.jquery.com/jQuery.extend/)是一种执行 JSON 对象的深拷贝和浅拷贝的解决方案。但是，当我使用它时，我得到一个未定义的对象错误。

我的 ajax 请求函数和处理程序：

```
var tourData;

$.ajax({
  type: "GET",
  url: "includes/phpscripts.php?action=stops",
  dataType: "json", 
  success: (function(data){
    if (data == 'false')
      console.log("Can't load initial panorama");
    else 
      processOptions(data);

  })
});

function processOptions(data){
  tourData = jQuery.extend(true, {}, data);
  console.log(data.length);
  console.log(tourData.length);

} 
```

在 Firebug 中，`data.length`返回 6，这是我所期望的。但是，`tourData`返回未定义。`true`无论是否作为深拷贝的参数，都会发生这种情况

稍后我将需要此请求中的数据可用于多个函数，而这些函数将超出范围。因此，我想要一个可用的响应的克隆。

的内容`data`是

```
[
  {"fileName":"..\/panos\/photos\/1-prefix_blended_fused.jpg","name":"Start","lat":"43.682211","lon":"-70.450705","heading":"250","width":"1808","height":"653"},
  {"fileName":"..\/panos\/photos\/2-prefix_blended_fused.jpg","name":"Second","lat":"43.6822","lon":"-70.450769","heading":"250","width":"1600","height":"578"},
  {"fileName":"..\/panos\/photos\/2-prefix_blended_fused.jpg","name":"Second","lat":"43.6822","lon":"-70.450769","heading":"250","width":"1600","height":"578"},
  {"fileName":"..\/panos\/photos\/3-prefix_blended_fused.jpg","name":"Third Stop","lat":"43.682219","lon":"-70.450828","heading":"250","width":"1821","height":"627"},
  {"fileName":"..\/panos\/photos\/4-prefix_blended_fused.jpg","name":"Fourth Stop","lat":"43.68218","lon":"-70.450887","heading":"250","width":"1600","height":"800"},
  {"fileName":"..\/panos\/photos\/5-prefix_blended_fused.jpg","name":"Last Stop","lat":"43.682165","lon":"-70.450933","heading":"250","width":"1808","height":"673"}
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:57:38.920

~~你说`data.length`的是6。这让我觉得那`data`是一个数组，而不是一个对象。~~

`data`不是一个对象，它是一个数组。

`$.extend`将与数组一起使用，但该`length`属性将不再存在，因为它将其转换为对象。

```
var data = [{a:12}, {a:13}, {a:14}];
console.log(data.length); // 3
data = $.extend(true, {}, data);
console.log(data); // {0:{a:12}, 1:{a:13}, 2:{a:14}}
console.log(data.length); // undefined 
```

# javascript - 使用 JavaScript 以编程方式编辑 Google 文档

> ID：11057301
> 
> 赞同：6
> 
> 时间：2012-06-15T19:50:36.807
> 
> 标签：javascript, reverse-engineering, google-docs, google-docs-api, google-apps-script

我要做的是运行一些 JavaScript 代码，将文本输入到 Google 文档中。到目前为止，我所做的是在我的个人网页上创建一个嵌入 Google Docs 的 iframe 元素。我现在想做的是使用谷歌源代码中的函数来输入文本。

当我使用 Chrome 检查器和 js 美化器时，我发现如果我监听按键事件，我会被带到以下代码段：

```
function dKa() {
   var a = eKa, b = TJa ? function(c) {
      return a.call(b.src, b.key, c)
   } : function(c) {
      c = a.call(b.src, b.key, c);
      if (!c)
      return c
   };
   return b
} 
```

我曾尝试在使用简单事件加载页面时调用该函数`onload="function();"`，但徒劳地尝试产生输出，但什么也没发生。有没有办法做我想做的事？我想找到要调用的正确函数，以便我可以通过该函数将文本写入文档。但是，代码似乎太模糊而无法做任何事情。

我知道要从父框架中引用 Google Docs（iframe）代码，我需要执行以下操作：`document.getElementById("iframeID").contentWindow.theFunction()` 我的执行是否错误？据我所知，无法使用他们的 API 实时编辑 Google Doc。

这也是我第一次在这里发帖，所以如果这太模糊了，请告诉我，希望我能澄清一下。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T20:22:04.267

正如其他人所指出的那样，同源策略将阻止您采用的方法起作用，并且尝试对其进行逆向工程无论如何都是愚蠢的，因为实施可能随时发生变化（甚至随着谷歌的推出而对不同的用户有所不同）更新）。

然而，谷歌有一个 API 用于这个确切的东西，称为[Google Apps Script](https://developers.google.com/apps-script/)。大多数教程都是针对电子表格的，但是有DocumentApp、DocsList、Document 等的[文档](https://developers.google.com/apps-script/class_document)。您可能需要重新考虑一下您的方法，但您仍然应该能够实现您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:57:17.360

据我所知，由于跨站点安全限制，这是不可能的。如果源域相同，则只能访问页面的 DOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:57:35.270

好吧，你不能像 iFrame 那样在外部网站上编写脚本。检查[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

* * *

# actionscript-3 - 在 AS3 中更改活动麦克风

> ID：11057303
> 
> 赞同：2
> 
> 时间：2012-06-15T19:50:53.747
> 
> 标签：actionscript-3, flash, microphone

有没有办法在不使用 SecurityPanel.MICROPHONE 的情况下更改 AS3 中的活动麦克风？我的所有尝试都会停止所有麦克风活动，即使是由单击按钮触发的。

如果我做：

```
var mic:Microphone = Microphone.getMicrophone(index); 
```

我可以收听并获取麦克风活动、级别和 SampleEvents。一切正常。

如果稍后我这样做：

```
mic = Microphone.getMicrophone(newIndex); 
```

我开始为 mic.activityLevel 获得 -1 并且没有收到 SampleEvents，但我可以通过以下方式获得新麦克风的正确名称

```
mic.name; 
```

为简单起见，假设 index 和 newIndex 都是经过测试的工作源，并且如果与初始麦克风请求一起传入，则两者都可以工作。

这是否被视为安全风险并且不允许？一旦你初始化了一个麦克风，这就是你所坚持的吗？我已经在空中切换了相机，但那是空中。

*作为旁注，我不能使用 SecurityPanel 来执行此操作，因为如果计算机连接到扬声器，则从 osx 上的 FireFox 访问时可能会出现反馈。我曾尝试在打开窗口之前将所有声音输出降至 0，但一旦 SecurityPanel.MICROPHONE 处于活动状态，音量就会恢复。不幸的是，仅仅要求用户关掉他们的扬声器并不是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:44:55.840

根据我的经验，有两个原因可能导致 activityLevel 报告 -1 ：

1.用户未接受安全权限

这可以通过*StatusEvent.STATUS*检测到并检查 mic.muted 属性。

```
mic.addEventListener(StatusEvent.STATUS, onMicrophoneStatus, false, 0, true);

private function onMicrophoneStatus(event:StatusEvent):void
{           
    if (event.code == "Microphone.Unmuted") 
        trace("Microphone access was allowed."); 
    else if (event.code == "Microphone.Muted") 
        trace("Microphone access was denied."); 
} 
```

2.第二个原因似乎更深奥，与两件事有关。麦克风是否进入环回模式；如果麦克风有 *SampleDataEvent.SAMPLE_DATA* 监听器。

我无法真正准确地解释其背后的逻辑，但我想将麦克风发送到环回模式会初始化一些事件逻辑。你甚至可以做*mic.setLoopBack(true); mic.setLoopBack(false);* .

我希望有人可以解释背景中实际发生的事情。

3.关于面板打开时出现巨大回声的第二个问题，rockabit找到了一个很好的技巧来解决这个问题。您必须将麦克风的 SoundTransform 属性设置为音量为 0 的声音转换对象。这允许您将麦克风保持在环回模式但防止巨大的回声和反馈以及从输出中删除麦克风捕获的声音。

这是供参考的线程： [http ://www.rockabit.com/2009/01/14/microphone-activitylevel-in-flash/](http://www.rockabit.com/2009/01/14/microphone-activitylevel-in-flash/)

最后，这是我用来初始化麦克风的一段代码，即使在交换麦克风时也能正常工作：（为清楚起见，剪掉了）

```
private function initializeMicrophone(micIndex:int = 0):void
{   
    trace("Initialize mic: "+micIndex);

    var gain:int = 70;
    var rate:int = 44;
    var silence:int = 0;
    var timeout:int = 100;

    this.microphone = Microphone.getEnhancedMicrophone(micIndex);
    mic.addEventListener(StatusEvent.STATUS, onMicrophoneStatus, false, 0, true);
    mic.addEventListener(SampleDataEvent.SAMPLE_DATA, onSampleData);

    mic.gain = gain;
    mic.setSilenceLevel(silence, timeout);
    mic.rate = rate;

    var micXform:SoundTransform = new SoundTransform(0);
    mic.soundTransform = micXform;

    mic.codec = SoundCodec.NELLYMOSER;
    mic.setUseEchoSuppression(true);
    mic.setLoopBack(true);

    var micOptions:MicrophoneEnhancedOptions = new MicrophoneEnhancedOptions();
    micOptions.mode = MicrophoneEnhancedMode.FULL_DUPLEX;
    micOptions.nonLinearProcessing = true;
    micOptions.echoPath = 128;
    mic.enhancedOptions = micOptions;
}

private function onSwapMicrophone():void
{
    if(this.mic.index == 0)
      initializeMicrophone(1);
    else
      initializeMicrophone(0);
} 
```

希望这可以帮助！

-b

# c# - xml反序列化没有结果

> ID：11057307
> 
> 赞同：0
> 
> 时间：2012-06-15T19:51:06.083
> 
> 标签：c#, xml, xml-serialization

我有这个xml

```
<products>
  <product>
    <name>Demo</name>
  </product>
  <product>
    <name>Black Beauty III</name>
    <description>Beautiful les paul guitar</description>
    <company>
      <name>Les Paul</name>
      <description>Very Good Company for guitar</description>
      <year>1967</year>
      <address>
        <houseno>Flat no-52</houseno>
        <street>Avishkar Appt. JVLR, Jogeshwari(E)</street>
        <city>Mumbai</city>
        <country>India</country>
        <pin>400060</pin>
      </address>
    </company>
    <grossprice>5700</grossprice>
    <netprice>6000</netprice>
    <measure>1 pc</measure>
    <category>4</category>
  </product>
  <product>
    <name></name>
    <description></description>
    <company>
      <name></name>
      <description></description>
      <year></year>
      <address>
        <houseno></houseno>
        <street></street>
        <city></city>
        <country></country>
        <pin></pin>
      </address>
    </company>
    <grossprice></grossprice>
    <netprice></netprice>
    <measure></measure>
    <category></category>
  </product>
</products> 
```

通过使用此代码，我无法将其反序列化为对象

```
using (FileStream fs = new FileStream(System.IO.Path.Combine(System.Environment.CurrentDirectory + "/Products.xml"), FileMode.Open))
                {
                    XmlSerializer serializer = new XmlSerializer(typeof(Products));

                    var products = serializer.Deserialize(fs) as Products;
                } 
```

我已经提到了类中的所有 XML 元素和 XMLroot，例如

```
[XmlType("products")]
[XmlInclude(typeof(Products))]
public class Products
{
    public Products() { }

    public Products(Boolean GetProducts) 
    {
        if (GetProducts)
            Items = GetAllProducts().Items;
    }

    [XmlElement("product")]
    public List<Product> Items { get; set; }

    public Products GetAllProducts()
    {
        try
        {
            Products allProducts = new Products();
            using (FileStream fs = new FileStream(System.IO.Path.Combine(System.Environment.CurrentDirectory + "/Products.xml"), FileMode.Open))
            {
                XmlSerializer serializer = new XmlSerializer(typeof(Products));

                var products = serializer.Deserialize(fs) as Products;
            }
            return allProducts;
        }
        catch (Exception ex) { return null; }
    }

    public Products GetAllProducts(ProductCategory Category)
    {
        return null;
    }
}

[XmlType("product")]
[XmlInclude(typeof(Product))]
public class Product
{
    [XmlElement("name")]
    String Name { get; set; }

    [XmlElement("description")]
    String Description { get; set; }

    [XmlElement("company")]
    Company Brand { get; set; }

    [XmlElement("grossprice")]
    String GrossPrice { get; set; }

    [XmlElement("netprice")]
    String NetPrice { get; set; }

    [XmlElement("measure")]
    String Measure { get; set; }

    [XmlElement("categoy")]
    ProductCategory Category { get; set; }

} 
```

如果你想我可以发布更多的类结构...`在此处输入代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T20:06:19.430

我让它工作使用：

```
class Program
    {
        static void Main(string[] args)
        {
            using (FileStream fs = new FileStream("xml.xml", FileMode.Open))
            {
                XmlSerializer serializer = new XmlSerializer(typeof(Products));

                var products = serializer.Deserialize(fs) as Products;
            }
        }
    }
    [XmlType("products")]
    [XmlInclude(typeof(Products))]
    public class Products
    {
        [XmlElement("product")]
        public List<Product> Items { get; set; }
    }
    [XmlType("product")]
    [XmlInclude(typeof(Product))]
    public class Product
    {
        [XmlElement("name")]
        String Name { get; set; }

        [XmlElement("description")]
        String Description { get; set; }

        [XmlElement("company")]
        Company Brand { get; set; }

        [XmlElement("grossprice")]
        String GrossPrice { get; set; }

        [XmlElement("netprice")]
        String NetPrice { get; set; }

        [XmlElement("measure")]
        String Measure { get; set; }

        [XmlElement("categoy")]
        ProductCategory Category { get; set; }
    }
    [XmlType("company")]
    [XmlInclude(typeof(Company))]
    public class Company
    {
        [XmlElement("name")]
        public string Name { get; set; }
        [XmlElement("description")]
        public string Description { get; set; }
        [XmlElement("year")]
        public string Year { get; set; }
        [XmlElement("address")]
        public Address Address { get; set; }

        public Company()
        {

        }
    }
    [XmlType("address")]
    [XmlInclude(typeof(Address))]
    public class Address
    {
        [XmlElement("houseno")]
        public string HouseNumber { get; set; }
        [XmlElement("street")]
        public string Street { get; set; }
        [XmlElement("city")]
        public string City { get; set; }
        [XmlElement("country")]
        public string Country { get; set; }
        [XmlElement("pin")]
        public string Pin { get; set; }

        public Address()
        {

        }
    }
    [XmlType("category")]
    [XmlInclude(typeof(ProductCategory))]
    public class ProductCategory
    {
        public ProductCategory()
        {

        }
    } 
```

当您使用正确的 Xml 属性将所有内容转换为标记的对象时，这是最简单的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:57:41.510

在您的班级上公开您的属性。如果它们是私有的、受保护的或内部的，则 XmlSerializer 无法看到，因此无法设置它们。

# history - Foursquare - 朋友的签到历史？

> ID：11057311
> 
> 赞同：4
> 
> 时间：2012-06-15T19:51:49.707
> 
> 标签：history, foursquare, friend, checkin

我需要我的应用程序来显示我朋友最近签到的地点列表。为此，我使用了“签到”端点 - [https://api.foursquare.com/v2/users/USER_ID/checkins](https://api.foursquare.com/v2/users/USER_ID/checkins)。但不幸的是，它没有按预期工作。它仅返回当前登录用户“self”的最近签到。我设法只获得了选定朋友的最新签到。好吧，“一个”签入并没有多大帮助，反而会带来更多的混乱。人们认为我的应用程序无法正常运行并抱怨！:(

文档中明确指出，目前仅支持“self”。我想知道foursquare多久能让我们的开发人员阅读至少5或10个最近签到，或者有没有其他方法可以阅读多个选定朋友的签到？

我不希望我的应用程序的用户认为它无法正常运行并卸载它:(。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:26:02.050

For a list of the most recent [check-in](https://developer.foursquare.com/docs/responses/checkin) for friends, use the [/checkins/recent](https://developer.foursquare.com/docs/checkins/recent) endpoint. Eventually the friend tab API will contain more check-ins from active friends, but that API endpoint is under heavy construction right now and we're not yet ready to share it with external developers.

If recency is not as urgent, use the [/venues/explore](https://developer.foursquare.com/docs/venues/explore) endpoint. It's not documented yet, but you can specify "friendVisits=visited" and get back only venues that a user's friends have been to.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:47:16.867

我不知道您真正想对这些签入做什么，所以这只是开箱即用的想法:)

*   使用用户的活动（新闻）提要。此 api 未记录在案。提要在 Web 版本的主 html 中“硬编码”。也许你应该看看手机版。无论如何，如果没有记录，他们可能不允许访问这些数据......

*   抓取用户好友的徽章列表。每个解锁徽章包含一个场地。

*   探索提示/待办事项列表（完成）/列出用户创建/市长

*   如果“朋友”是您的应用程序的用户，请建议更多签到（我不知道 Foursquare 是否可以。在这种情况下，您应该通知您的用户他们的签到可能会显示给他们的朋友）。Foursquare 也有保留政策：[https ://developer.foursquare.com/overview/community](https://developer.foursquare.com/overview/community)

Foursquare 没有像 Facebook 这样强大的隐私设置。在那之前，我想他们会保密朋友的签到...希望这会有所帮助

# java - Java DataInputStream 与 BufferedInputStream

> ID：11057321
> 
> 赞同：3
> 
> 时间：2012-06-15T19:52:43.107
> 
> 标签：java, inputstream, bufferedinputstream, datainputstream

我正在寻找一种有效的解决方案来接收和处理从套接字连接到服务器的异步消息（大小不一）。这是一个很好的带宽量（可能是 250 kB/s 的稳定状态，并且可以有高达 1 MB/s 的短脉冲）。目前我正在使用 DataInputStream，但在忙碌的时候我会断开连接（如果队列积压变得太大，服务器会断开客户端的连接）。

谁能确认 BufferedInputStream 是否可以更好地工作？我读过它会一次检索大块数据，而不是逐字节检索，因此操作系统调用更少。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:58:04.547

它确实一次检索块，并且它可能有更少的操作系统调用，但如果你调用 read 的速度不够快以服务积压，这将无济于事。在您完全读取它预取的块之前，它不会读取下一个块。

最好的办法可能是始终保持在 InputStream 的顶部（只要有要读取的内容就读取它）并稍后或在另一个（较低优先级）线程中进行任何其他处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:00:16.213

我不是专家，但我知道 BufferedInputStream 实际上会一次读取一个块，因为它将使用 X 字节大的缓冲区。它本质上是通过套接字读取数据的抽象，而不是像你说的那样让它使用系统调用。它可能有助于解决断开连接的问题。对不起，如果我重申了你的一些观点。基本上，我建议使用缓冲流。它更受控制，一些谷歌搜索会给你一个更好的洞察力。

# java - 外语 Java 属性文件

> ID：11057324
> 
> 赞同：0
> 
> 时间：2012-06-15T19:53:20.943
> 
> 标签：java

例如，日语、unicode 或 HTML 编码的属性中字符串的正确格式是什么？

例如，哪些是正确的使用？

```
title=&#12497;&#12540;&#12488;&#12490;&#12540; 
```

（以上显示为パートナー）

```
title=\u30D1\u30FC\u30C8\u30CA\u30FC 
```

为这些字符串创建翻译的人最有可能的输出是什么，即当他们在键盘上键入时？

第二种样式不会在浏览器中生成正确的日文字符，那么如果这是首选样式，我该如何处理呢？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:56:32.017

[本机属性加载器使用javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.InputStream%29)中指定的“ISO 8859-1”编码。

具有 unicode 转义的字符串不是未转义的，因此它们不能真正用于直接使用。

我建议您使用像[这样](http://www.cs.technion.ac.il/~imaman/programs/unicodeprops.html)的特定加载器，以便您可以处理 unicode（例如 UTF-8）。

# jquery - 循环浏览javascript中的图像

> ID：11057325
> 
> 赞同：0
> 
> 时间：2012-06-15T19:53:28.863
> 
> 标签：jquery, arrays

我有一个插件可以围绕一组图像旋转 360 度（准确地说是 300 度）。我想知道是否可以使用 for in 循环或 for 循环来循环浏览所有图像。现在是这样设置的。

```
$("#spin").spritespin({
        width     : 510,
        height    : 327,
        frames    : 10,
        image     : [
                "360rotation/000.jpg",
                "360rotation/001.jpg",
                "360rotation/002.jpg",
                "360rotation/003.jpg",
                "360rotation/004.jpg",
                "360rotation/005.jpg",
                "360rotation/006.jpg",
                "360rotation/007.jpg",
                "360rotation/008.jpg",
                "360rotation/009.jpg",
                  ],

        animate   : true,
        loop      : true,
        frameTime : 60,
        fadeFrames : 20,
        fadeInTime : 0,
        fadeOutTime : 120
      }); 
```

这可行，但我不想输入所有 300 张图像。我怎样才能更快地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:00:09.410

我想，最简单的方法是根据已知的开始和结束图像填充数组：

```
function namePad(num){
    if (num < 10){
        return '00' + num;
    }
    else if (num >=10 && num < 100){
        return '0' + num;
    }
    else {
        return num;
    }
}

var imageArray = [];

for (var i=0; i < 300; i++){
    imageArray.push('360rotation/' + namePad(i) + '.jpg');
} 
```

[JS Fiddle 概念证明](http://jsfiddle.net/davidThomas/38qzY/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:09:20.457

也许像

```
var images = new Array();

for (i = 0; i < (n = 301); i++) {
  images.push("360rotation/00" + i + ".jpg")
}

$("#spin").spritespin({
    width     : 510,
    height    : 327,
    frames    : 10,
    image     : images,

    animate   : true,
    loop      : true,
    frameTime : 60,
    fadeFrames : 20,
    fadeInTime : 0,
    fadeOutTime : 120
  }); 
```

# c - 计算设置了 k 位且大于另一个整数 x 的最小整数？

> ID：11057326
> 
> 赞同：5
> 
> 时间：2012-06-15T19:53:31.933
> 
> 标签：c, algorithm, integer, bit-manipulation

我想计算精确`k`设置位的最小整数，它大于另一个整数`x`。

例如，如果`x = 1001010`then for `k=2`，答案应该是`1010000` for `k=4`，答案应该是`1001011` for`k=5`答案是`1001111`

我认为至少需要设置与整数中设置的最左侧位一样多的位`x`，然后选择设置与 in 中的下一个最左侧设置位相邻的 MSB 侧位`x`，或者设置下一个最左侧设置位，然后通过重复相同的过程来设置位；一直在计算 k 中剩下的位。

我不确定这是否是正确的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:39:49.197

```
++x;

while (popcnt(x) > k)
{
    // Substitute the least-significant group of bits
    // with single bit to the left of them
    x |= x-1;
    ++x;
}

unsigned bit = 1;
while (popcnt(x) < k)
{
    x |= bit;
    bit <<= 1;
} 
```

* * *

第二个循环可以优化：

```
for (i = k - popcnt(x); i != 0; --i)
{
    // Set the lowest non-set bit
    x |= x+1;
} 
```

# java - 包装任何形状的类？

> ID：11057328
> 
> 赞同：0
> 
> 时间：2012-06-15T19:53:34.290
> 
> 标签：java, awt, shape

我正在创建自定义形状类，它只是由构造函数参数定义的其他形状的一些选择。

所以，我有以下类标题：

```
public class SetShape implements Shape {

private final Shape shape; 
```

在构造函数中，我设置了 shape 字段，然后我将实现所有 Shape 接口方法，将它们委托给该字段。

有可能以某种方式自动化吗？是否已经为此定义了任何类？能`GeneralPath`有这样的课吗？

用前一个实例初始化的一些`Shape`实例和实例有什么区别？`GeneralPath``Shape`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:39:21.100

看起来你想要的比你想象的要简单：

```
public class SetShape implements Shape {

    private final Shape shape;

    public SetShape(Shape shape) {
        this.shape = shape;
    }

    @Override
    public boolean contains(double x, double y) {
        shape.contains(x, y);
    }

} 
```

[并对Shape](http://docs.oracle.com/javase/6/docs/api/java/awt/Shape.html)接口中的所有方法做类似的事情。请记住，传递给构造函数的任何内容都*保证*包含所有这些方法的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:04:04.550

尝试[`Polygon`类](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Polygon.html)或[`Area`类](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/Area.html)。特别是后者将允许您通过*相交*、*添加*等方式*连接*形状。

# sql - 按主键或唯一键更新记录

> ID：11057329
> 
> 赞同：1
> 
> 时间：2012-06-15T19:53:38.117
> 
> 标签：sql, stored-procedures

关于设计存储过程的最佳实践，更新表中记录的存储过程应该使用主键来标识要更新的记录，还是使用唯一键？

唯一键似乎需要发送很多额外的参数，我想不出主键不知道的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:34:36.407

我认为“唯一密钥”是指“业务密钥”。如果您有一个从某个外部源松散同步的数据库，那么业务密钥很适合用作存储过程的参数。

假设您从另一家公司收到了一个平面文件，用于订购产品、激活服务、启动流程或其他操作。他们可能不知道主键，并且可能会按名称请求事物：（公司 X，服务 Y，激活）您根据唯一的公司名称、唯一的服务名称、唯一的状态调用您的存储过程。当然，您可能会说远程系统应该使用 id，但这有时是您无法控制的。

另一个示例：在应用程序级别执行的复制。两个数据库之间的序列可能不同步，因此通过业务密钥引用远程记录会更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:33:31.960

这个问题有两个不同的方面。

*   目标：您想要实现的是更新给定的行。任何能让你达到这一点的方法都是好的；换句话说，如果唯一键、主键或未在任何唯一性约束下列出的列的任何其他组合都可以，那么您可以使用它。
*   表现：与任何其他查询一样，您真的想快速直接进入重点。这是什么意思？这意味着您必须在 where 子句中选择最有效的过滤器。您可以通过以下方式衡量：

1/您使用的索引的大小：选择最小的一个（例如列大小）

2/您正在使用的索引列的非空属性：（如果您的引擎允许可空列上的唯一索引）最好选择一个放置在不可空列上的索引。

3/ 索引的表空间：您还可以查看索引是否有特殊存储而不是另一个，这会提高性能（挂载索引...）

4/ 列类型：通常小数字比文本解析更快（抱歉没有来源，请小心处理）

我现在想不出更多了，但我很确定其他人会完成这份清单。

干杯。

# c# - 标签在回发时不显示？

> ID：11057332
> 
> 赞同：0
> 
> 时间：2012-06-15T19:53:43.540
> 
> 标签：c#, asp.net

我有`asp:Label`一页。当我通过单击按钮回帖时，标签不显示。它在某些情况下显示，例如：

```
if(ddlStatus.SelectedValue == "-1")
   lblMessage.Text = "Select Status"; 
```

但在这种情况下它没有显示：

```
lblMessage.Text = SendRequest();

SaveRequest(); 
```

我可以在调试时看到该值，它只是没有出现在页面上。

`<span id="PageBody_PageBody_lblMessage" style="color:Red;font-size:Large;"></span>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:15:50.123

唯一可能的问题是：

*   该方法返回一个空字符串。
*   一些代码正在清除最初设置的值。覆盖 OnPreRender，并检查标签的 Text 属性以进行验证。

如果文本在那里，它会呈现它，这就是 Telerik 的 JustDecompile 在我研究 Label 的作用时告诉我的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:24:07.907

不确定这是否是最好的方法，但我决定做的是声明全局变量来保存错误消息，`response`例如我调用它，然后在`PreRender`我覆盖的方法中，在它调用它的基础之后，我设置了`lblMessage.Text = response`和这个显示标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:58:19.583

SendRequest() 是否返回一个字符串，或者允许您执行类似 SendRequest().toString(); 之类的操作 ?

听起来有点像它无法识别试图放入实验室的内容。

# c# - 如何检查两个日期的两个文本框

> ID：11057335
> 
> 赞同：0
> 
> 时间：2012-06-15T19:53:53.407
> 
> 标签：c#, asp.net

一个有 txtDateReceived，第二个有 txtVendorPackDate。在插入将添加记录之前，我必须检查 txtDateReceived 是否比 txtVendorPackDate 更准确。我尝试使用 TextChanged 事件。

```
protected void txtVendorPackDate_TextChanged(object sender, EventArgs e)
{
    DateTime fromDate = DateTime.MinValue;
    DateTime toDate = DateTime.MaxValue;
    bool parseResultMin = DateTime.TryParse(txtVendorPackDate.Text, out fromDate);
    bool parseResultMax = DateTime.TryParse(txtDateReceived.Text, out toDate);
    if (toDate < fromDate)
    {
        txtVendorPackDate.Text = "";
        lblDateExpired.Visible = true;
        lblDateExpired.Text = "Selected date is incorrect, please enter correct data.";
        txtVendorFatPerc.Focus();
    }

    double expired = toDate.Subtract(fromDate).TotalDays;

    if (expired >= 60)
    {

        lblDateExpired.Text = "Date Expired " + expired + " days after pack day!!!" 
        lblDateExpired.Visible = true;
    }  
} 
```

我如何从客户端不使用控件验证来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:02:01.360

尝试这个

```
if (!parseResultMin || !parseResultMax || toDate < fromDate) 
```

在您的代码中，如果两个日期都无效，`toDate`并且`fromDate`都将是`DateTime.MinValue`，那么表达式`toDate < fromDate`将不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:57:33.810

您可以使用 CompareValidator 控件检查供应商包装日期是否小于接收日期。如果两个字段都需要，您还可以使用RequiredFieldValidator。我会结合使用RequiredFieldValidators 和CompareValidators。

每个文本框都有一个RequiredFieldValidator，以确保用户输入一个值。每个文本框都有一个 CompareValidator，以确保输入的值是日期类型。一个 CompareValidator 以确保供应商包装日期早于接收日期。

# ruby-on-rails - 如何动态更改表单？

> ID：11057337
> 
> 赞同：0
> 
> 时间：2012-06-15T19:54:01.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有 2 个不同的模型，称为`Parent`和`Child`。

我有一个名为的页面，上面`House`有`link_to`两种形式：

**页面/house.html.erb**

`link_to "Parent", new_parent_path`

`link_to "Child", new_child_path`

当您在页面上开始时，它是空的，没有表格。

我希望能够单击该`new_parent`链接并在同一页面上生成父表单，但是如果单击该`new_child`链接，我想删除父表单并通过 AJAX 将其替换为子表单。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T20:12:51.590

我认为没有 Ajax 但使用 css 会更容易。在页面中生成 2 个表单（例如使用部分表单），然后将其放在隐藏的 div（css 样式：）中`display: none`，并使用带有链接的 javascript 来显示/隐藏包含要显示的表单的 div（使用 JQuery [show并隐藏效果](http://api.jquery.com/category/effects/basics/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T02:55:16.297

这实际上很容易创建。[这个问题](http://railsforum.com/viewtopic.php?id=44537)和[这个](http://notes.rehali.com/?p=97)问题帮助我更好地理解了 AJAX 和 jquery。

让我们以父级为例：

我将其`format.js`放入控制器中以执行`new`操作：

```
ParentsController

def new
 @parent = Parent.new

 respond_to do |format|
  format.js
 end
end 
```

我删除 my`parents/new.html.erb`作为个人选择并将其替换`new.js.erb`为将由 my 调用的`"Parent" link_to`。

```
# parents/new.js.erb

$("#generate-form").html("<%= escape_javascript(render(:partial => 'parents/form', locals: { parent: @parent })) %>"); 
```

`remote => true`然后在用于 AJAX的部分中创建一个 Parent 表单。

```
# parents/_form.html.erb

<%= form_for(@parent, :remote => true) do |f| %>
    <%= f.input :full_name %>    
  <%= f.button :submit, 'Done' %>
<% end %> 
```

然后我有一页包含两种形式。

```
PagesController

def index

  respond_to do |format|
    format.html
  end
end 
```

然后是该页面上针对父母和孩子的链接。

```
#pages/index.html.erb

<li><%= link_to "Parent", new_parent_path, :remote => true %></li>
<li><%= link_to "Child", new_child_path, :remote => true %></li>

<div id="generate-form">
</div> 
```

我的`remote => true`链接和表单将响应我的行为`js`格式`new`和我`div id="generate-form"`作为老板的行为，将任一表单部分放入其中。这会根据您单击的链接自动替换另一个，从而动态更改表单。

注意：子模型的代码是相同的（除了表单字段）。只需替换模型名称（父到子）。

# linux - 我计算机上的网络堆栈是否使用 DMA？

> ID：11057340
> 
> 赞同：0
> 
> 时间：2012-06-15T19:54:11.763
> 
> 标签：linux, networking, operating-system, dma

我了解到硬盘数据使用 DMA 传输到主内存，但网络堆栈数据不能使用 DMA，数据必须通过处理器。这是真的吗？如果是，有什么方法可以避免这种情况？通过处理器传输数据真的效率低下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:14:17.590

大多数现代网卡或任何硬件也使用 DMA 进行数据传输，但混淆源于这样一个事实，即 CPU 必须将来自用户应用程序的大部分数据处理成网卡期望的数据（例如例如，以 TCP 数据包和以太网帧的形式）。该处理必须由 CPU 完成，因为 CPU 实现了用于发送数据的各种网络协议。

顺便说一句，硬盘驱动器也是如此。尽管 DMA 用于将大块数据从 RAM 传输到硬盘，但 CPU 几乎不可避免地必须验证这些数据块将放置在正确的位置并格式化为正确的文件系统类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T23:58:54.877

> 这是真的吗？

不！网络设备 DMA 进入专门为此目的分配的内存缓冲区。自 1990 年代初 PCI 总线出现以来，用于网络 IO 的 DMA 一直是 x86 世界的一般规则。

> 通过处理器传输数据真的效率低下吗？

是的，非常低效。初始化后，核心与现代网卡直接交互的唯一一次是发出“传输门铃”的信号。这个门铃是一个单独的写操作，它告诉卡在内存中寻找新的数据包来传输。核心和网络设备之间的所有其他交互都是通过内存间接进行的。

# ios - 单击按钮时如何更改 UIBarButtonItem 的标题 - iPhone

> ID：11057344
> 
> 赞同：1
> 
> 时间：2012-06-15T19:54:20.160
> 
> 标签：ios, ios5, uibarbuttonitem, navigationitem

单击按钮时，我正在尝试更改 UIBarButtonItem 的标题。这是我拥有的代码......但它不起作用。

```
UIBarButtonItem * btnleft1 = [[UIBarButtonItem alloc] initWithTitle:@"Test2" 
                                                      style:UIBarButtonItemStyleDone 
                                                      target:self
                                                      action:@selector(TestingThis:)];

self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:btn, btnleft, btnleft1, nil];

- (void)TestingThis:(id)sender {
    if (self.navigationItem.rightBarButtonItem.title == @"Test2") {
        self.navigationItem.rightBarButtonItem.title = @"Done";
    }
    else
    {
        self.navigationItem.rightBarButtonItem.title = @"Test2";
    }
} 
```

这就是我正在使用的代码。请记住，按钮“btnleft1”在 rightBarButtonItem“S”中，而不是在 rightBarButtonItem 中。如果我将其更改为 rightbarbuttonitems.title... 它会给我一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T16:14:45.030

迟到的答案，但为了将来参考，您可以使用自定义按钮来执行此操作：

```
 CGRect frame = CGRectMake(10, 6, 60, 30);
      UIButton *customButton = [[UIButton alloc] initWithFrame:frame];
      [customButton setTitle:@"Done" forState:UIControlStateNormal];
      [customButton setTitle:@"Undone" forState:UIControlStateSelected];
      [customButton addTarget:self action:@selector(selectDoneClicked:) forControlEvents:UIControlEventTouchUpInside];
      UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithCustomView:customButton ];
      [self.navigationItem setLeftBarButtonItem:leftButton]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:27:30.373

尝试明确设置标题。您可以使用代码执行此操作：`[(UIBarButtonItem *)item setTitle:@"someText"];`
这是一个有用的链接：[以编程方式更改工具栏上的 UILabel (UIBarButtonItem) 的文本](https://stackoverflow.com/questions/1225457/change-the-text-of-a-uilabel-uibarbuttonitem-on-a-toolbar-programmatically)
希望这有帮助！

# visual-studio - 一对多链接关系是唯一的意味着什么？

> ID：11057352
> 
> 赞同：1
> 
> 时间：2012-06-15T19:54:39.693
> 
> 标签：visual-studio, linq, linq-to-sql, orm

我在 Linq 对象关系 (O/R) 映射器中的两个表之间划了一条线：

```
 Order                  Customer
--------------           ---------------
| OrderID    |           | CustomerID  |
| CustomerID |♦---------˃| ...         |
|            |           |             |
--------------           --------------- 
```

**注意：**或者可能是

```
 Order                    Customer
--------------           ---------------
| OrderID    |           | CustomerID  |
| CustomerID |˂---------♦| ...         |
| ...        |           |             |
--------------           --------------- 
```

我不确定; 它让我双向拖动。

*   第一个问题，什么是箭头，什么是菱形？

假设第二个图， 的基数*被*`Association`创建为`OneToMany`。这是有道理的，因为：

*   **一位**客户
*   有**很多**订单

但让我感到困惑的是`Association.Unique`（布尔）属性。它默认为`false`. 这是有道理的，因为它是一个**OneToMany**关联。`Order.CustomerID`不能是唯一的，否则它不会是**OneToMany**关联，而是**OneToOne**。

但随后我被允许将*OneToMany* Unique 属性更改为**true**。这是没有意义的，所以我得出的结论是`Unique`ness 不适用于`Order.CustomerID`，而是适用于`Customer.CustomerID`。但是该图已经表明`Customer.CustomerID`是**Primary Key**。当然它是唯一的，它是一个主键。

但是`Unique`属性没有设置。这是没有意义的，所以我得出的结论是`Unique`ness 并不意味着任何一张桌子。

*   第二个问题，什么`Unique`意思？

    > *指定外部目标列是否具有唯一性约束*

*   第三个问题：什么是**父母**和**孩子**？

再次假设第二个图表：

```
Customers.CustomerID ♦------------> Orders.CustomerID 
```

我以`Customers`表为父母。它是拥有成为*客户*意味着什么的人。你想改变一个客户，你走到父母那里。

同时，子`Orders`表出现并想要引用 a `Customer`。

```
 Parent(diamond)                     Child(arrowhead)
====================                     =================
Customers.CustomerID (PK) ♦------------> Orders.CustomerID (FK) 
```

除了当我查看关联的**Parent**和**Child**属性时：

**子属性**

*   `Name`：`Orders`

**父属性**

*   `Name`：`Customer`

他们想在*“孩子”*上创建一个名为`Orders`. 不不不。孩子*是*命令。他们想向父级添加一个名为`Customer`. 不不不。父母*是*客户。

这意味着我必须把它倒过来，并且*父母*和*孩子*的术语与我的想法完全相反：

```
 Child(diamond)                     Parent(arrowhead)
====================                     =================
Customers.CustomerID (PK) ♦------------> Orders.CustomerID (FK) 
```

到了这个时候，我想把我的大脑炸飞；而是花 35 分钟在 Stackoverflow 上编写问题；而不是继续对着我的电脑尖叫。

帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:12:38.220

关于问题 2 - Unique 属性可能表示该关系是 OneToOne 关系。

即使直接在 sql 数据库中也没有特定的 OneToOne 关系。相反，只有一个外键可以将一个表中的键导出到另一个表。因此，外键关系始终是一对多的。在包含导出键的表上使用附加约束，可以使关系事实上是一对一的。但是这样做并不会改变外键关系，而只是对外键表中的数据应用附加条件。

关于问题3：属性名称意味着子对象（Order）将有一个名为Customer的属性，可用于获取父对象的实例。并且父对象将有一个名为 Orders 的属性，可用于为客户获取子对象。

# jquery - 有没有在 jQuery 的 .val() 中使用回调的替代方法？

> ID：11057354
> 
> 赞同：0
> 
> 时间：2012-06-15T19:54:43.220
> 
> 标签：jquery, api, callback

我想要在 jQuery 的 .val() 方法中使用回调方法的替代方法（它显然不支持）。例如：

[http://jsbin.com/ilahan/edit#source](http://jsbin.com/ilahan/edit#source)

```
$("#box").val("The New Value", function(){
  alert("It's changed now");
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:58:11.433

使用[.change](http://api.jquery.com/change/)有什么问题？

```
$("#box").val("The New Value").change(function(){
  alert("It's changed now");
}); 
```

* * *

正如 Vega 在他的评论中所说，从代码中更改 val 无论如何都不会触发更改事件：[.val() 不会触发 .change() in jquery](https://stackoverflow.com/questions/3179385/val-doesnt-trigger-change-in-jquery)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T20:00:50.987

`.val`是即时更改，因此不需要回调？为什么需要这样的回调？

下面的代码应该和你想要的回调一样`.val`

```
$("#box").val("The New Value");
alert("It's changed now"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T19:59:12.540

设置值时无需回调，因为更改会立即发生。如果您希望在字段值更改时执行代码，您可以使用：

```
$("#box").change(function(){
    alert('value changed');
}); 
```

# javascript - WinJS UI JS/HTML 控件可以在 Metro 之外使用吗

> ID：11057358
> 
> 赞同：0
> 
> 时间：2012-06-15T19:54:47.883
> 
> 标签：javascript, html, microsoft-metro

[Metro Javascript UI 代码是否可以在 Metro http://msdn.microsoft.com/en-us/library/windows/apps/hh465493.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465493.aspx)之外 的独立 HTML 页面中使用（或轻松调整）？ 在 IE、CHROME、Safari 等中呈现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:07:28.257

对于 Windows 8 应用程序中使用的新 HTML5 控件，如 ListView 的，Microsoft 将这些作为标准 HTML5 控件提交给 W3C。然后，如果它们经过验证，您应该能够在独立的 HTML 页面中使用这些 HTML5 控件（不确定，但如果我是对的，Firefox 已经实现了其中的一些）。

关于 JavaScript 代码，由于它使用 WinRT API，因此您肯定无法通过独立的 HTML 页面使用此代码。

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T07:04:48.013

WinJS 现在是开源和跨平台的 [http://try.buildwinjs.com/#listview](http://try.buildwinjs.com/#listview)

# android - Android - AdMob 将广告设置为 GONE？

> ID：11057362
> 
> 赞同：2
> 
> 时间：2012-06-15T19:55:22.313
> 
> 标签：android

我想问一下，如何为 Admob 实现 AdListner。我希望广告在点击后消失。我试过这个，但没有帮助。

```
final AdView ad1 = (AdView) findViewById(R.id.ad1);
        ad1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                ad1.setVisibility(View.GONE);
                ad1.destroy();          }
        }); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:10:39.360

根据您使用的设备，您可能需要使用该视图的 invalidate() 方法。（我会注意到我需要为 2.1 设备上 freewheel 上的一些广告内容执行此操作）。

-- 或者 -- 尝试将您的 ad1 视图放在一个包装视图（LinearLayout 或其他小东西）中，然后将该包装视图的可见性设置为 View.GONE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T21:53:56.730

我认为 AdView 是 RelativeLayout 所以你需要

```
 * ad1.setClickable(true); 
```

或者

```
 * can  put entry in layout XML `android:clickable="true"` 
```

![在此处输入图像描述](../Images/dcab32f54178d753ba6f02d7ecdf9267.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T00:43:14.257

如果有人仍在寻找这个，这是我使用的代码：

```
public  class myActivity extends Activity implements AdListener{
    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

         AdView adView = (AdView)this.findViewById(R.id.ads2);
         adView.setAdListener(this);
        adView.loadAd(new AdRequest());

    }

    public void onDismissScreen(Ad arg0) {
        RelativeLayout rellayout = (RelativeLayout) findViewById(R.id.rellayout);
        AdView adView = (AdView)this.findViewById(R.id.ads2);
        rellayout.removeView(adView);
    }

    public void onFailedToReceiveAd(Ad arg0, ErrorCode arg1) {
        // TODO Auto-generated method stub

    }

    public void onLeaveApplication(Ad arg0) {
        // TODO Auto-generated method stub

    }

    public void onPresentScreen(Ad arg0) {
        // TODO Auto-generated method stub

    }

    public void onReceiveAd(Ad arg0) {
        // TODO Auto-generated method stub

    }

} 
```

# arrays - 在 Scala 中检索数组元素

> ID：11057367
> 
> 赞同：0
> 
> 时间：2012-06-15T19:55:37.940
> 
> 标签：arrays, scala, indexing

我正在调用一个返回数组的方法：

```
val localTrustManagerFactory =
  TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm)
val localTrustManager =
  ((localTrustManagerFactory.getTrustManagers).apply(0)).asInstanceOf[X509TrustManager] 
```

如果我忽略`.apply`调用，我会收到一个编译时错误：

```
val localTrustManager =
  ((localTrustManagerFactory.getTrustManagers)(0)).asInstanceOf[X509TrustManager]
error: too many arguments for method getTrustManagers: ()Array[javax.net.ssl.TrustManager] 
```

有没有更好的方法来检索数组元素？我认为编译器会`apply`隐式提供方法调用。

**更新：**此代码中使用的类来自标准 Java 库：

```
import javax.net.ssl.TrustManagerFactory
import javax.net.ssl.X509TrustManager 
```

我不知道 Scala 编译器 (2.9.2-1) 是否解释`getTrustManagers`为具有参数列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T20:07:20.477

您的方法 getTrustManagers 似乎是用一个空参数列表定义的，即

```
def getTrustManagers(): Array[TrustManager] 
```

而不是没有参数列表

```
def getTrustManagers: Array[TrustManager] 
```

你所拥有的是一个极端情况，scala 试图灵活地在调用站点删除空参数列表，但如果同时删除了 apply 可能会模棱两可（例如，如果有一个没有参数的 apply 方法，或者如果 getTrustManagers 被重载并且有一个带有一个参数的版本）。

你可以做`getTrustManagers()(0)`（​​与java中的相同，除了（0）而不是[0]。

# cxf - 从 JAX-RS/CXF 服务返回时集合为空

> ID：11057371
> 
> 赞同：3
> 
> 时间：2012-06-15T19:55:45.997
> 
> 标签：cxf, jax-rs

我有一个服务方法定义为：

```
public JaxbList<Deal> getDeal() {
    List<Deal> deals = new ArrayList<Deal>();
    Deal type = new Deal();
    type.setDealID(1);
    type.setName("June Discounts");
    deals.add(type);
    JaxbList list = new JaxbList(deals);
    System.out.println("List size -> " + list.getList().size());
    return list;
} 
```

我的客户定义为：

```
WebClient client = WebClient.create("....");
    JaxbList deals = client.path("exampleservice/getDeal")
        .accept("application/xml").get(JaxbList.class);

    List<Deal> types = deals.getList(); 
```

当我在服务方法中打印出集合的大小时，结果返回为 1。但是，来自客户端的“类型”列表的大小为 0。当我在浏览器中打开时，显示 1 个交易。所以，这个问题似乎是我的客户。我不确定在哪里。

想法？

这是我的 JaxbList 类：

```
public class JaxbList<T>{
    protected List<T> list;

    public JaxbList(){}

    public JaxbList(List<T> list){
        System.out.println("Setting list...");
        this.list=list;
    }

    @XmlElement(name="Item")
    public List<T> getList(){
        return list;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:26:17.033

正如 KasunBG 上面提到的`public JaxbList(List<T> list)`，JAXB 永远不会调用您的构造函数。改为使用默认的无参数（请参阅[What JAXB 需要公共无参数构造函数？](https://stackoverflow.com/questions/4155361/what-jaxb-needs-a-public-no-arg-constructor-for)）。实际上，Java 编译器应该用两个构造函数和“从未初始化的字段”来抱怨这种情况`list`。

解决方案是引入一个`setList()`setter 并从无参数构造函数抛出运行时异常。

# css - IE7-8 - 雪碧黑客

> ID：11057379
> 
> 赞同：0
> 
> 时间：2012-06-15T19:56:17.043
> 
> 标签：css, internet-explorer-8, internet-explorer-7, sprite

我使用精灵作为输入按钮。它在 Firefox 和 > IE8 中运行良好。但是，在 IE7&8 中，ID 值显示在 png 图形上。它看起来像这样：

（我会嵌入，但我不允许）：[Pre-Hack Sprite](http://img.photobucket.com/albums/v424/pithed2/Pre-Hack.png)

我通过并找到了一个技巧，最小化字体大小和行高。

```
font-size:0px;      /*IE7-8*/
line-height:0px;    /*IE7-8*/ 
```

然后，这在按钮上创建了几乎看起来像划痕的东西：

[黑客后精灵](http://img.photobucket.com/albums/v424/pithed2/Post-Hack.png)

有任何想法吗？这是我的 HTML：

```
<form action='memberSelection' method='post'>
<div id="providersearchopt1">
     ...
<p class="left"><input class="btnsearch" type="submit" id="formSubmit" name="formSubmit" /></p> 
```

这是CSS：

```
 input[type="submit"].btnsearch {
width:96px;
height:27px;
background-color:transparent;
background-position:0px 0px;
background-image:url(images/btn-search.png);
cursor: pointer;
border: none;
color: transparent;
font-size:0px;      
line-height:0px;        
}
input[type="submit"].btnsearch:hover {
background-position:0px -27px;
background-image:url(images/btn-search.png);
} 
```

编辑 - 解决方案：

CSS的变化：

```
line-height: 100px;        /*IE7-8*/
font-size: 0px:            /*IE7-8*/ 
```

这将在 FF 和 IE 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:01:02.850

您可以使用 type="image"，我认为 hover 也适用于我忘记的 js。

或者您可以使用锚点制作按钮并使用JS提交

# ruby - 不使用 sort 方法如何排序？

> ID：11057381
> 
> 赞同：0
> 
> 时间：2012-06-15T19:56:20.577
> 
> 标签：ruby

我正在尝试对数组进行排序，但对于练习我不能使用该`sort`方法。

由于我还必须返回空数组，以及其中只有一项的数组，所以我在这些方面作弊。*从技术上讲*，我最多只需要对三个项目进行分类，但这似乎是一种可以使用的情况`while`？

这是我到目前为止所得到的。

```
def my_sort(input)
  if input[0] == nil
    print "[]"
  elsif input[1] == nil
    print "[" + input[0].to_s + "]"
  end
end 
```

我想知道是否应该将其分解为字符串，或者是否`.each do ||`可以这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:14:01.177

听起来你在要求一个排序算法。有[很多](http://en.wikipedia.org/wiki/Sorting_algorithm#Summaries_of_popular_sorting_algorithms)，但像插入排序这样的东西可能是最容易实现的一种，或者冒泡排序，如果没有太多数字需要排序的话。

也许[这篇 SO 帖子](https://stackoverflow.com/questions/624666/learning-insertion-sort-in-ruby)会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:13:20.287

如果您只对三个项目进行排序，我建议您使用[Bubble sort](http://en.wikipedia.org/wiki/Bubble_sort "冒泡排序")。您需要做的就是遍历数组，一次一个元素。如果它们无序，则将当前元素的值与下一个元素交换。对于大列表来说，这是一个非常糟糕的算法；但这是对排序算法的一个很好、简单的介绍。

# python - wxpython 在 for 循环中启动多个计时器

> ID：11057382
> 
> 赞同：0
> 
> 时间：2012-06-15T19:56:23.603
> 
> 标签：python, loops, timer, wxpython

我想在 for 循环中创建和启动多个计时器。我的方法如下：

```
import wx

trials = range(1, 3)
timers = range(7)
name = 'timer'

class TimersClass(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

    panel = wx.Panel(self)
    self.button1 = wx.Button(panel, label = 'Go')
    self.Bind(wx.EVT_BUTTON, self.Timers, self.button1)

    def Timers(self, event):
        for trial in trials:
            for timer in timers:
                setattr(self, name + str(timer) + '_' + 'iteration' + str(trial), wx.Timer(self))
                print name + str(timer) + '_' + 'iteration' + str(trial)

                eval(name + str(timer) + '_' + 'iteration' + str(trial) + '.Start(' + str(timer * 1000, ) + ', OneShoot = True)')

        self.Bind(wx.EVT_TIMER, self.Hi)

    def Hi(self, event):
        print 'Hi, bastard!'

app = wx.App()
frame = TimersClass(None)
frame.Center()
frame.Show()

app.MainLoop() 
```

但是 self.timers 对象似乎没有被创建：

回溯（最后一次调用）：文件“Escritorio/iteration_timers.py”，第 24 行，在 Timers eval(name + str(timer) + '_' + 'iteration' + str(trial) + '.Start(' + str(timer * 1000, ) + ', OneShoot = True)') 文件“”，第 1 行，在 NameError 中：名称 'timer0_iteration1' 未定义

有人知道为什么这段代码不能运行，或者有其他方法吗？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:29:37.847

我建议在类中使用合理的结构来存储计时器（而不是创建一堆具有复杂编码名称的类属性）。这是一个例子：

```
import wx

trial_range = range(1, 3)
timer_range = range(7)

class TimersClass(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        panel = wx.Panel(self)
        self.button1 = wx.Button(panel, label = 'Go')
        self.Bind(wx.EVT_BUTTON, self.BuildTimers, self.button1)

        self.timers = {}  # a structure to hold the timers

    def BuildTimers(self, event):
        for trial in trial_range:
            for timer in timer_range:
                new_timer = wx.Timer(self)
                new_timer.Start(1 + timer*1000, oneShot=True)

                key = (trial, timer)
                self.timers[key] = new_timer # to keep the timer in the class
                new_timer.mykey = key  #optional: to know the key of the timer via the event (see Hi())

        self.Bind(wx.EVT_TIMER, self.Hi)

    def Hi(self, event):
        print "timer:",
        print event.GetEventObject().mykey

app = wx.PySimpleApp() 
frame = TimersClass(None)
frame.Center()
frame.Show()
app.MainLoop() 
```

当它运行时，它会产生：

```
timer: (1, 0)
timer: (2, 0)
timer: (1, 1)
timer: (2, 1)
timer: (1, 2)
# etc 
```

# jquery - 使用 jQuery 上滑或下滑效果在 asp 视图之间切换？

> ID：11057384
> 
> 赞同：0
> 
> 时间：2012-06-15T19:56:26.003
> 
> 标签：jquery, asp.net, jquery-plugins, css

我有一些 asp 视图，我想在上滑或下滑 jquery 效果之间切换，而不是默认的断断续续效果。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:01:55.743

好吧，切换和（上滑和下滑）具有相同的功能。

您可以做的是获取您的内容，并将其包装在一个 div 中。

伪代码：

```
$(function(){
  $("div").hide();
  $("span").click(function(){
    $(this).next().toggle();
  });
}); 
```

身体：

```
<span>Click me</span>
<div>
  <asp:dropdownlist></asp:dropdownlist>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:10:03.877

实现这一点的最佳和简单的方法是：使用父 div 创建一个父视图，并在其上动态加载您的子视图及其内容（表格、输入元素等）。

要在 div 元素上实现滑动效果，请参考此[链接](http://docs.jquery.com/UI/Effects/Slide)

# groovy - 如何让 IntelliJ IDEA 识别 GPars DSL？

> ID：11057391
> 
> 赞同：2
> 
> 时间：2012-06-15T19:56:55.707
> 
> 标签：groovy, intellij-idea, dsl, gpars

根据[GPars 用户指南](http://www.gpars.org/guide/guide/2.%20Getting%20Started.html#2.4%20Getting%20Set-up%20in%20an%20IDE)，一旦将 GPars jar 添加到项目中，IntelliJ IDEA 应该能够立即识别 GPars DSL。从 Groovy 1.8 开始，GPars 现在包含在 Groovy 发行版中，但是将这个方面添加到 IDEA 项目似乎没有帮助。

有谁知道我如何激活 DSL 支持？如果能识别 DSL 关键字而*不是*到处都有小下划线，那就太好了。

[注意：我使用的是 IntelliJ IDEA Ultimate v11.1]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T19:15:00.580

似乎来自 Groovy 发行版的 GPars jar 不包含教 IDEA 使用 GPars dsl 的 gdsl 脚本。您可以做的最简单的事情是在您的项目中添加这个 gdsl 文件 [http://git.codehaus.org/gitweb.cgi?p=gpars.git;a=blob;f=src/main/groovy/groovyx/gpars /Definitions.gdsl;h=49f6993221645e3d887e6bf99c3c0fc46afef69e;hb=b0155a809a5c9adf9de816f18121d5a60d4b455d](http://git.codehaus.org/gitweb.cgi?p=gpars.git;a=blob;f=src/main/groovy/groovyx/gpars/Definitions.gdsl;h=49f6993221645e3d887e6bf99c3c0fc46afef69e;hb=b0155a809a5c9adf9de816f18121d5a60d4b455d)

# database - Heroku 将其数据库存储在哪里？

> ID：11057394
> 
> 赞同：2
> 
> 时间：2012-06-15T19:57:16.837
> 
> 标签：database, postgresql, heroku, amazon-ec2, amazon-rds

鉴于最近的 AWS 中断（以及 Heroku 中断），我开始更多地考虑 Heroku 堆栈。我想知道 - Heroku 究竟在哪里存储我的数据库？我有他们为每个应用程序提供的免费 postgres 共享数据库......它是否位于某个 EC2 云的某个地方？这不是 RDS 对的，因为这些都是 MySQL 数据库......？

谢谢，林戈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:59:55.120

EC2，通过[WAL-E](https://github.com/heroku/wal-e)将预写日志持续发送到 S3 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:38:23.317

它们位于运行 Postgresql 的 EC2 实例上——它们不是 RDS，因为正如你所说，那只是 MySql。

通常，您可以从 Heroku 设置的 DATABASE_URL 配置变量中判断它们是 Amazon 实例。

# php - curl 没有循环遍历这个数组

> ID：11057401
> 
> 赞同：0
> 
> 时间：2012-06-15T19:57:38.390
> 
> 标签：php, curl

```
<?php
// open the current directory
$dhandle = opendir('.');
// define an array to hold the files
$files = array();

if ($dhandle) {
   // loop through all of the files
   while (false !== ($fname = readdir($dhandle))) {
      // if the file is not this file, and does not start with a '.' or '..',
      // then store it for later display
      if (($fname != 'index.htm') && ($fname != 'torcache.php')&& ($fname != 'error_log') && (substr($fname, 0, 5) != 'other') && (substr($fname, 0, 2) != 'dd') &&
          ($fname != basename($_SERVER['PHP_SELF']))) {
          // store the filename
          $files[] = (is_dir( "./$fname" )) ? "(Dir) {$fname}" : $fname;
      }
   }
   // close the directory
   closedir($dhandle);
}

function curl_upload($url,$fileFormAttribute,$file){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_VERBOSE, 1);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch,CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch,CURLOPT_REFERER, 'https://torcache.net/');
        curl_setopt($ch,CURLOPT_ENCODING,"gzip");
        curl_setopt($ch, CURLOPT_POST, true);
        $post = array($fileFormAttribute=>"@".$file);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
        $response = curl_exec($ch);
        return $response;
}
foreach( $files as $fname )
{
error_reporting(E_ALL);

$upload_result = curl_upload('http://torcache.net/autoupload.php','torrent','public_html/download_folder/'.$files[0]);
}
var_dump($upload_result);
?> 
```

当我运行这个脚本时，它只发布数组中的第一项，而不是循环遍历整个数组我做错了什么？我想让它遍历目录中的所有文件，然后将它们发布到 torcache，然后将字符串还给我；

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:00:17.220

不应该`.$files[0]`在`$fname`倒数第四行吗？像这样：

```
$upload_result = curl_upload('http://...','torrent','public_html/download_folder/'.$fname); 
```

# mysql - MySQL触发器：插入前或插入后

> ID：11057408
> 
> 赞同：0
> 
> 时间：2012-06-15T19:58:16.417
> 
> 标签：mysql, triggers

我正在开发一些用于计费的数据库项目（PHP/MySQL）。

每当创建新账单时，我想生成一个由年、周和增量编号组成的账单编号。我想用触发器来做到这一点。触发器将使用现有的账单编号来查找增量编号或从新的一周和/或新年的第一张账单的新增量开始。

除了生成帐单编号外，我还可以`BEFORE INSERT`触发并将 设置`NEW.billnumber`为新生成的帐单编号。也可以`AFTER INSERT`使用生成的账单编号来更新记录。

我的问题是我应该选择哪一个。`BEFORE INSERT`还是`AFTER INSERT`？我确实搜索过这个，但我找不到一个很好的论据何时使用 BEFORE 或 AFTER。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:00:25.273

发现它可以完成`BEFORE INSERT`只是因为 MySQL 不允许操作触发`AFTER INSERT`触发器的表。

# objective-c - 均匀地取整数字

> ID：11057409
> 
> 赞同：0
> 
> 时间：2012-06-15T19:58:18.000
> 
> 标签：objective-c, math, ios5

例如，如何根据对象 C.. 中的值向上或向下舍入数字。

假设数字是 143 - 我想四舍五入到 140，但如果数字是 146 - 我想四舍五入到 150

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T20:00:42.483

假设145应该四舍五入到150（这是科学技术的标准），公式是：

```
x_rounded = ((x + 5)/10)*10; 
```

更一般地说，当四舍五入到最接近的 n 时，它是

```
x_rounded = ((x + n/2)/n)*n; 
```

它来自整数除法总是向下舍入的事实。

对于负数，它稍微复杂一些。

编辑：还假设它都是整数。使用浮点数/双精度数时，最好使用 C 数学库，因为除法的工作方式不同。像这样：

```
#include <math.h>

x_rounded = floor((x+5)/10) * 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-05T09:50:11.480

将值 x 舍入为精度 p，其中 0 < p < 无穷大。（例如 p=0.25, 0.5, 1, 2, 3, 10,…）

```
float RoundTo(float x, float p)
{
  float y = 1/p;
  return int((x+(1/(y+y)))*y)/y;
}
float RoundUp(float x, float p)
{
  float y = 1/p;
  return int((x+(1/y))*y)/y;
}
float RoundDown(float x, float p)
{
  float y = 1/p;
  return int(x*y)/y;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:01:50.300

该`lround`函数会将浮点数舍入到最接近的整数。通过将数字除以 10、四舍五入，然后乘以 10，您可以很容易地将其四舍五入到 10 的倍数。

在代码中：

```
10 * lround(x / 10.0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T20:07:11.020

我认为最简单的解决方案是包含 math.h 并使用 round() 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T20:17:20.610

要将浮点数舍入到附近的整数值，请查看 C 函数 floorf()、ceilf() 和 roundf()。

要将整数舍入到（比如说）最接近的十的倍数，Seva 给出的公式应该可以工作......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-23T09:12:27.760

这绝对可以解决您的后顾之忧。

```
- (int) roundToNearest5:(int) value
{         
   return (value+(5-(value%5));         
} 
```

# android - 无效的应用程序 ID

> ID：11057411
> 
> 赞同：0
> 
> 时间：2012-06-15T19:58:23.500
> 
> 标签：android, facebook

我正在使用以下代码将图像从 android 应用程序加载到 facebook。我已经为 android 安装了 facebook sdk。但是该应用程序没有达到预期的效果。我在 logcat 中收到“无效的应用程序 ID”。我犯了什么错误？

```
Button mButton=(Button)findViewById(R.id.button);

mButton.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             Facebook mFacebook=new Facebook(yourAppID)

    byte[] data = null;
    Bitmap bi = BitmapFactory.decodeFile(imageLink);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bi.compress(Bitmap.CompressFormat.PNG, 100, baos);
    data = baos.toByteArray();

    Bundle params = new Bundle();
    params.putString("method", "photos.upload");
    params.putByteArray("picture", data);

    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(mFacebook);
    mAsyncRunner.request(null, params, "POST",
            new SampleUploadListener(), null);
         }
     });

public class SampleUploadListener extends BaseRequestListener {

    @SuppressWarnings("unused")
    public void onComplete(final String response, final Object state) {
        try {
            Log.d("Facebook-Example", "Response: " + response.toString());
            JSONObject json = Util.parseJson(response);
            String src = json.getString("src");

            PublishImage.this.runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(getApplicationContext(),
                            "Successfully Uploaded", Toast.LENGTH_SHORT)
                            .show();
                }
            });
        } catch (JSONException e) {
            Log.w("Facebook-Example", "JSON Error in response");
        } catch (FacebookError e) {
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
        }
    }
}

public abstract class BaseRequestListener implements RequestListener {

    public void onFacebookError(FacebookError e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    public void onFileNotFoundException(FileNotFoundException e,
            final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    public void onIOException(IOException e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    public void onMalformedURLException(MalformedURLException e,
            final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

} 
```

日志猫

```
06-15 20:00:55.398: W/KeyCharacterMap(629): No keyboard for id 0
06-15 20:00:55.398: W/KeyCharacterMap(629): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
06-15 20:01:02.438: D/dalvikvm(629): GC_EXTERNAL_ALLOC freed 1214K, 59% free 2755K/6599K, external 1995K/2266K, paused 630ms
06-15 20:01:08.998: D/MediaPlayer(629): getMetadata
06-15 20:01:15.529: D/Facebook-Example(629): Response: {"error_code":101,"error_msg":"Invalid application ID.","request_args":[{"key":"method","value":"photos.upload"},{"key":"format","value":"json"}]}
06-15 20:01:15.529: W/Facebook-Example(629): Facebook Error: Invalid application ID. 
```

**编辑：这行得通**

```
class ButtonListener1 implements View.OnClickListener{

    Facebook facebook=new Facebook(ID);

    @Override
    public void onClick(View v) {

        facebook.authorize(Pic.this, new String[] { "publish_stream" },
                new DialogListener() {

            @Override
            public void onFacebookError(FacebookError e) {
            // TODO Auto-generated method stub
            }

            @Override
            public void onError(DialogError dialogError) {
            // TODO Auto-generated method stub
            }

            @Override
            public void onComplete(Bundle values) {
                postToWall(values.getString(Facebook.TOKEN));                                              
            }

            private  void postToWall(String accessToken) {    

                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                bmp.compress(Bitmap.CompressFormat.PNG, 100, baos);
                byte[] data = baos.toByteArray();
                Bundle bundle = new Bundle();

                bundle.putString(Facebook.TOKEN, accessToken);
                bundle.putByteArray("facebookPictureData", data);
                // The byte array is the data of a picture.
                bundle.putByteArray("picture", getIntent().getExtras().getByteArray("data"));

                try {
                    facebook.request("me/photos", bundle, "POST");

                } catch (FileNotFoundException fileNotFoundException) {
                   // makeToast(fileNotFoundException.getMessage());
                } catch (MalformedURLException malformedURLException) {
                   // makeToast(malformedURLException.getMessage());
                } catch (IOException ioException) {
                   // makeToast(ioException.getMessage());
                }
            }

            @Override
            public void onCancel() {
            // TODO Auto-generated method stub
            }
        });

     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:23:18.260

更新：这是 facebook api 参考网站上 Facebook.java 类的链接：http: [//developers.facebook.com/docs/reference/androidsdk/authentication/](http://developers.facebook.com/docs/reference/androidsdk/authentication/)。向下滚动几行以找到授权方法。您确定您使用的是来自 android sdk 的 com.facebook.android.Facebook 类，而不是您自己编写的类吗？

android 应用程序的基本身份验证流程如下： 1\. 创建 Facebook 类的实例（您拥有）。2\. 使用您需要的正确权限调用 Facebook.authorize()。3、在Authorize方法的DialogListener回调中，可以保存access_token和过期时间以备后用。4.在您调用授权的活动中，覆盖“onActivityResult方法，如果使用Facebook的结果代码（Facebook.DEFAULT_AUTH_ACTIVITY_CODE）调用该方法，则使用接收到的意图调用Facebook.authorizeCallback。5.完成这4个步骤后, 你可以自由地使用 Facebook.request() 或 AsyncFacebookRunner.request() 来发出图 api 请求。在这些请求方法中，第一个参数是你想要的图路径。所以，例如，如果你用 path 调用请求方法“我”，你会得到登录用户的个人资料信息。结束更新-----

对于初学者，我认为您必须将图形路径作为此行代码中的第一个参数：

```
mAsyncRunner.request("*********7618/photos", params, "POST",
new SampleUploadListener(), null);
}
}); 
```

在我的代码中，它是专辑/照片。此外，您需要用户的权限才能上传到属于她的相册。为此，您需要使用 Facebook.authorize() 检索访问令牌。

我不确定我是否理解您为什么会收到与应用程序 ID 无效相关的错误，但是，据我所知，这是您在发布照片之前需要执行的基本步骤。

我相信有人会很快发布一个更好的答案，希望这在此期间有所帮助。

# python - 如何获取模板中的json字段值？

> ID：11057416
> 
> 赞同：0
> 
> 时间：2012-06-15T19:58:41.940
> 
> 标签：python, django, json

我已经用我的模型对象生成了 json 并向模板发送了响应。然后我想用 javascript 处理 json 获取我的模型的字段。Python代码是这样的：

```
return json_serializer.serialize(queryset, ensure_ascii=False) 
```

模板中的js在这里：

```
 function my_js_callback(data){
    alert(data) //1
    item=data[0]
    alert(item) //2
} 
```

1 - 给我 [object Object], [object Object],... 2 - 给我 [object Object]

还有这个：

```
alert(item['title'])
alert(item.title)
alert(item["title"]) 
```

都给我错误。我怎样才能得到我的头衔？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:40:34.007

这是我的错误。我的 JSON 就像几个级别的字典，我找不到我的字段，因为它在 JSON 对象第一级字典中的字典命名字段中。现在好了：

```
var key="title"
var item=data["fields"]
alert(item[key]) 
```

# install4j - 在 install4j 中引用编译器变量定义中的其他变量

> ID：11057417
> 
> 赞同：3
> 
> 时间：2012-06-15T19:58:44.957
> 
> 标签：install4j

在 install4j 项目中，是否可以在另一个编译器变量的值中引用编译器变量？例如，如果我在变量列表的前面定义了变量“revision”，是否可以使用另一个名为“outputDir”的变量，其值如下：

```
somedir/${revision}/otherdir 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:40:39.230

是的，这是可能的，您只需将值设置`outputDir`为

```
somedir/${compiler:revision}/otherdir 
```

# ruby-on-rails - Ruby on Rails 按 id 排序（和版本？）

> ID：11057418
> 
> 赞同：10
> 
> 时间：2012-06-15T19:58:56.877
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

在尝试使用从日志中获取的 id 排序（和分页）进行搜索时：

```
SELECT `audits`.* FROM `audits` ORDER BY version, id DESC LIMIT 50 OFFSET 0 
```

我目前正在使用此代码：

```
@records = Audit.order("id DESC").page(page).per(50) 
```

问题是检索到的列表没有按 id 降序正确排序。

顺便说一句，我正在使用 audited-activerecord gem 进行审计，这有关系吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-15T20:11:32.717

我猜您的 gem 正在按版本排序的 Audit 模型上设置默认范围，因此目前它按版本列按升序排序，并且只有当两条记录相同时，它才按版本排序id 降序排列。

要解决此问题，您可以`unscoped`在链前添加：

```
Audit.unscoped.order("id DESC").page(page).per(50) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T20:08:55.337

尝试：

```
@records = Audit.except('order').order("id DESC").page(page).per(50) 
```

`except('order')`应该删除添加到查询中的任何订单关系

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-11T08:25:12.820

```
Audit.descending.page(page).per(50) 
```

[来源参考](https://github.com/collectiveidea/audited/blob/master/lib/audited/audit.rb)

# javascript - 检查地址栏中的字符串是否与 li id 匹配

> ID：11057423
> 
> 赞同：0
> 
> 时间：2012-06-15T19:59:03.203
> 
> 标签：javascript, jquery

我需要检查我的地址是否有任何与我的 li id 中的单词匹配的单词：

```
<ul>
   <li id="filter-myId" class="noSelected">Text</li>
</ul> 
```

要检查的 url 地址示例：

[http://www_link.com/D=.myId](http://www_link.com/D=.myId)

但是在窗口地址栏上它只会显示“myId”而没有“filter-”，所以我想我需要检查“filter-”之后的内容是否与出现在 windows 地址上的字符串匹配。如果是这样， li 将获得“选择”类

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:07:57.427

我建议，虽然目前未经测试，但大致如下：

```
var string = document.location.href.split('=')[1];

if ($('li[id*="' + string + '"]').length){
    $('li[id*="' + string + '"]').addClass('selected');
} 
```

要将搜索限制为具有前缀的`li`元素：`filter-`

```
var string = document.location.href.split('=')[1];

if ($('li[id^="filter-"][id*="' + string + '"]').length){
    $('li[id^="filter-"][id*="' + string + '"]').addClass('selected');
} 
```

参考：

*   [属性包含 ( `[attribute*="value"]`) 选择器](http://api.jquery.com/attribute-contains-selector/)。
*   [属性以 ( `[attribute^="value"]`) 开头的选择器](http://api.jquery.com/attribute-starts-with-selector/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:08:28.803

您需要以某种方式解析 URL。我将那部分放在外面，但假设它被放置在一个名为`url`.

**Javascript**

```
if (elem = document.getElementById('filter-' + url['D'])) {
  // exists
  elem.className += ' selected';
} 
```

**jQuery**

```
elem = $('#filter-' + url['D']);
if (elem.length) {
  // exists
  elem.addClass('selected');
} 
```

# html - 像 MozAudioAvailable 和 Webkit 的音频 API 一样吗？

> ID：11057429
> 
> 赞同：1
> 
> 时间：2012-06-15T19:59:24.690
> 
> 标签：html, firefox, html5-audio, web-audio-api

我一直在尝试使用 Firefox 的音频 API 来检测音频中的静音。（重点是启用半自动转录。）

令人惊讶的是，这个简单的代码或多或少足以检测静音和暂停：

```
var audio = document.getElementsByTagName("audio")[0];

audio.addEventListener("MozAudioAvailable", pauseOnSilence, false);

function pauseOnSilence(event) { 
  var val = event.frameBuffer[0];
  if (Math.abs(val) < .0001){
    audio.pause();
  }
} 
```

它不完美，但作为概念证明，我深信不疑。

我现在的问题是，有没有办法在 Webkit 的音频 API 中做同样的事情？从我所见，它更倾向于合成而不是声音处理（但也许我错了？）。

（我希望 Webkit 团队能够实现 Mozilla 创建的相同界面，然后继续他们更花哨的东西......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:09:34.217

您应该能够使用 AnalyzerNode 执行此类操作，或者可能使用 JavaScriptAudioNode 寻找阈值。

例如：

```
meter.onaudioprocess = function(e) {
  var buffer = e.inputBuffer.getChannelData(0); // Left buffer only. 
  // TODO: Do the same for right.
  var isClipping = false;
  // Iterate through buffer to check if any of the |values| exceeds 1.
  for (var i = 0; i < buffer.length; i++) {
    var absValue = Math.abs(buffer[i]);
    if (absValue >= 1) {
      isClipping = true;
      break;
    }
  }
  this.isClipping = isClipping;
  if (isClipping) {
    this.lastClipTime = new Date();
  }

}; 
```

您可以简单地检查足够低的级别，而不是剪辑。

大致改编自[本教程](http://www.html5rocks.com/en/tutorials/webaudio/games/)。具体样品在[这里](http://www.html5rocks.com/en/tutorials/webaudio/games/samples/metering/metering.js)。

# python - 需要帮助理解 Python 闭包

> ID：11057432
> 
> 赞同：2
> 
> 时间：2012-06-15T19:59:41.853
> 
> 标签：python, closures

我有这个代码：

```
import re

def doReplace(toReplace):
    i = 1
    def chapterReplacer(_):
        result = 'Chapter %i' % i
        i += 1
        return result

    return re.sub('Chapter [a-zA-Z]+', chapterReplacer, test)

test = 'Chapter one Chapter Two Chapter three'
print doReplace(test) 
```

当我运行它时，我收到以下错误：

```
Traceback (most recent call last):
  File "C:/Python26/replace.py", line 13, in <module>
    print doReplace(test)
  File "C:/Python26/replace.py", line 10, in doReplace
    return re.sub('Chapter [a-zA-Z]+', chapterReplacer, test)
  File "C:\Python26\lib\re.py", line 151, in sub
    return _compile(pattern, 0).sub(repl, string, count)
  File "C:/Python26/replace.py", line 6, in chapterReplacer
    result = 'Chapter %i' % i
UnboundLocalError: local variable 'i' referenced before assignment 
```

我的印象是 chapterReplacer 会捕获局部变量 i，但这似乎没有发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:02:58.280

不，在 python 2 中，如果不使用可变变量的技巧，你根本无法做到：

```
def doReplace(toReplace):
    i = [1]
    def chapterReplacer(_):
        result = 'Chapter %i' % i[0]
        i[0] += 1
        return result

    return re.sub('Chapter [a-zA-Z]+', chapterReplacer, test) 
```

通常，如果变量没有在本地分配，python 只会在周围范围内查找变量；一旦字节编译器看到一个直接`i = something`赋值`global i`（

但是在上面的代码中，我们从未`i`在`chapterReplacer`函数中赋值。是的，我们确实改变了，`i[0]`但存储在`i`自身中的值，一个列表，并没有改变。

在 python 3 中，只需使用[`nonlocal`语句](http://docs.python.org/release/3.2/reference/simple_stmts.html#grammar-token-nonlocal_stmt)让 python 查看变量的闭包：

```
def doReplace(toReplace):
    i = 1
    def chapterReplacer(_):
        nonlocal i
        result = 'Chapter %i' % i
        i += 1
        return result

    return re.sub('Chapter [a-zA-Z]+', chapterReplacer, test) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T20:03:19.557

你可以做`i`一个函数属性

```
def doReplace(toReplace):
    chapterReplacer.i = 1
    def chapterReplacer(_):
        result = 'Chapter %i' % chapterReplacer.i
        chapterReplacer.i += 1
        return result

    return re.sub('Chapter [a-zA-Z]+', chapterReplacer, test) 
```

**编辑：**从 python 3 开始，您可以使用`nonlocal`la @MartijnPieters 的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T20:05:21.687

在 Python 中，如果您在函数内为变量赋值（即使使用复合赋值运算符，例如`+=`），除非`global`or`nonlocal`语句另有说明，否则该变量被视为局部变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T20:06:47.747

当编译器看到该变量`i`在函数内部获得另一个值时，`chapterReplacer`它会将其视为本地变量，并且不应用“闭包魔法”。如果您删除 line `i += 1`，您的代码将运行。

# java - SSO .NET 胖客户端与 Java 服务器通过 TCP 使用 Kerberos

> ID：11057433
> 
> 赞同：0
> 
> 时间：2012-06-15T19:59:49.437
> 
> 标签：java, .net, security, tcp, kerberos

我打算让在 Windows 域中运行的 .NET 胖客户端通过直接 TCP 连接连接到 Java 服务器（协议将是自定义的 Google 协议缓冲区消息）。我正在研究如何在不需要用户输入更多凭据的情况下对这些客户端进行身份验证（换句话说，支持单点登录）。

我最初的想法是使用 Kerberos，但我什至不确定通过直接 TCP 是否可能或最终安全。任何人都可以对此发表评论吗？是否可以？是否有任何示例说明如何在客户端和服务器端实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T00:44:01.937

Kerberos 不会通过“直接 TCP”运行。它使用加密协议。请参阅 JRE 中内置的 JGSS-API。

# javascript - 如何阻止任何人滥用我的联系页面

> ID：11057437
> 
> 赞同：0
> 
> 时间：2012-06-15T20:00:11.520
> 
> 标签：javascript, security, spring-mvc, spring-security

我有一个网站和联系页面。任何人都可以去那里写一些东西来联系我们，它会被发送到我的电子邮件地址。今天我注意到我的收件箱中有近 100 封电子邮件，有人试图使用一些 javascript 发送垃圾邮件。我该如何阻止这个？我想到的一种方法是放一个验证码。但是有没有更好的方法来停止在客户端本身而不是检查服务器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:03:09.527

> 但是有没有更好的方法来停止在客户端本身而不是检查服务器？

不——客户端在用户的控制之下，所以你在那里做的任何事情都可以被绕过。

必须在服务器上检查任何反垃圾邮件措施（速率限制、贝叶斯过滤、验证码等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T20:10:16.953

一个容易实现的技术是放置一个蜜罐输入，例如`<input type="text" name="email2" />`并用 css 隐藏它`input[name="email2"] { display: none; }`。您在服务器端所要做的就是检查机器人是否已将此字段设置为某个值。如果他们这样做，他们就是机器人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:05:15.230

长话短说：如果您不希望脚本或机器人拖钓您，请放置诸如验证码之类的东西....或者您可以将 ip 限制为每个 ip 发送 1 次提交，或者在允许再次重新发送之前在计时器倒计时。

# mysql - 简单：是什么让这个查询效率低下？

> ID：11057438
> 
> 赞同：2
> 
> 时间：2012-06-15T20:00:14.840
> 
> 标签：mysql, join, indexing

```
SELECT 
    t1.`id` , 
    t1.`some_key` ,  
    t1.`date` ,
    t2.`data`
FROM `table1` AS `t1`
    LEFT JOIN `table2` AS `t2` ON t2.`id` = t1.`some_key`
WHERE DATE( t1.`date` ) = DATE( NOW( ) ) 
```

我正在尝试搜索今天添加的 table1 中的所有记录。我不知道记录的数量。我尝试在日期列中添加一个索引，但是我的 EXPLAIN 仍然显示 MySQL 搜索 table1 中的所有 n 多行。

编辑::: 按要求解释

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra 
1   PRIMARY     <derived2>  ALL     NULL    NULL    NULL    NULL    4   
1   PRIMARY     t2  eq_ref  PRIMARY     PRIMARY     4   t1.some_key     1   
2   DERIVED     table2  ALL     indx    NULL    NULL    NULL    5   Using where 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:05:02.657

您正在 t1.date 上进行转换；您失去了索引的好处，因为现在您的查询需要查看每一列。t1.date 可以被索引，但 DATE( t1.date ) 不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:06:08.090

尝试重构查询

```
SELECT 
    t1.`id` , 
    t1.`some_key` ,  
    t1.`date` ,
    t2.`data`
FROM 
    (
        SELECT * FROM `table1`
        WHERE `date` >= (DATE(NOW()) + INTERVAL 0 SECOND)
    ) AS `t1`
    LEFT JOIN `table2` AS `t2`
    ON t2.`id` = t1.`some_key`
; 
```

表情`(DATE(NOW()) + INTERVAL 0 SECOND)`是今天午夜

```
mysql> select (DATE(NOW()) + INTERVAL 0 SECOND);
+-----------------------------------+
| (DATE(NOW()) + INTERVAL 0 SECOND) |
+-----------------------------------+
| 2012-06-15 00:00:00               |
+-----------------------------------+
1 row in set (0.00 sec)

mysql> 
```

这是第二次尝试

```
SELECT 
    t1.`id` , 
    t1.`some_key` ,  
    t1.`date` ,
    t2.`data`
FROM 
    (
        SELECT id,somekey FROM `table1`
        WHERE `date` >= (DATE(NOW()) + INTERVAL 0 SECOND)
    ) AS t1
    INNER JOIN `table2` AS `t2` ON t1.`some_key` = t2.`id`;
; 
```

请确保 table1 有一个 (date,id,somekey) 索引

```
ALTER TABLE table1 ADD INDEX date_id_somekey_index (`date`,id,somekey); 
```

子查询是对索引的纯范围扫描，没有表访问！！！

我还将 LEFT JOIN 更改为 INNER JOIN。

至少要调查子查询单独运行它：

```
SELECT id,somekey FROM `table1`
WHERE `date` >= (DATE(NOW()) + INTERVAL 0 SECOND); 
```

这个子查询只会为 t1 生成今天的条目

# java - Java SWT 显示 StyledText 的行号

> ID：11057442
> 
> 赞同：9
> 
> 时间：2012-06-15T20:00:28.477
> 
> 标签：java, numbers, swt, line, styledtext

我想知道是否有一种直接的方法来显示带有`StyledText`文本字段的行号 - 即使换行。我在我的应用程序中使用它，如果内容变大，一些行号会很好。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T21:18:38.347

关键是**org.eclipse.swt.custom.Bullet**。它基本上是一个符号（或者在我们的例子中是一个数字），您可以添加到行首。

```
//text is your StyledText
text.addLineStyleListener(new LineStyleListener()
{
    public void lineGetStyle(LineStyleEvent e)
    {
        //Set the line number
        e.bulletIndex = text.getLineAtOffset(e.lineOffset);

        //Set the style, 12 pixles wide for each digit
        StyleRange style = new StyleRange();
        style.metrics = new GlyphMetrics(0, 0, Integer.toString(text.getLineCount()+1).length()*12);

        //Create and set the bullet
        e.bullet = new Bullet(ST.BULLET_NUMBER,style);
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-24T13:50:27.937

这是我的工作实现。

```
styledText.addLineStyleListener(new LineStyleListener() {
    @Override
    public void lineGetStyle(LineStyleEvent event) {
        // Using ST.BULLET_NUMBER sometimes results in weird alignment.
        //event.bulletIndex = styledText.getLineAtOffset(event.lineOffset);
        StyleRange styleRange = new StyleRange();
        styleRange.foreground = Display.getCurrent().getSystemColor(SWT.COLOR_GRAY);
        int maxLine = styledText.getLineCount();
        int bulletLength = Integer.toString(maxLine).length();
        // Width of number character is half the height in monospaced font, add 1 character width for right padding.
        int bulletWidth = (bulletLength + 1) * styledText.getLineHeight() / 2;
        styleRange.metrics = new GlyphMetrics(0, 0, bulletWidth);
        event.bullet = new Bullet(ST.BULLET_TEXT, styleRange);
        // getLineAtOffset() returns a zero-based line index.
        int bulletLine = styledText.getLineAtOffset(event.lineOffset) + 1;
        event.bullet.text = String.format("%" + bulletLength + "s", bulletLine);
    }
});
styledText.addModifyListener(new ModifyListener() {
    @Override
    public void modifyText(ModifyEvent e) {
        // For line number redrawing.
        styledText.redraw();
    }
}); 
```

请注意，调用 redraw() 时语法高亮重新计算的可能开销可能是可以接受的，因为 lineGetStyle() 仅在屏幕上当前行时调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T18:06:09.030

我相信使用 LineStyleListener 应该可以。类似于以下内容：

```
styledText.addLineStyleListener(
    new LineStyleListener() {
        @Override
        public void lineGetStyle(LineStyleEvent event) {
            String line = event.lineText;
            int lineNumber = event.lineOffset;
            // Do stuff to add line numbers
        }
    }
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-21T03:57:40.437

这是一种使用在内容更改时更新数字的项目符号的方法：

```
text.addModifyListener(new ModifyListener() {
    public void modifyText(ModifyEvent event) {
        int maxLine = text.getLineCount();
        int lineCountWidth = Math.max(String.valueOf(maxLine).length(), 3);

        StyleRange style = new StyleRange();
        style.metrics = new GlyphMetrics(0, 0, lineCountWidth * 8 + 5);
        Bullet bullet = new Bullet(ST.BULLET_NUMBER, style);
        text.setLineBullet(0, text.getLineCount(), null);
        text.setLineBullet(0, text.getLineCount(), bullet);
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-23T09:58:48.240

作为为行号着色的旁注：

```
Device device = Display.getCurrent();
style.background = new Color(device, LINE_NUMBER_BG);
style.foreground = new Color(device, LINE_NUMBER_FG); 
```

其中`LINE_NUMBER_BG`和`LINE_NUMBER_FG`可能是一个 RGB 对象，例如：

```
final RGB LINE_NUMBER_BG = new RBG(160, 80, 0); // brown
final RGB LINE_NUMBER_FG = new RGB(255, 255, 255); // white 
```

# c# - 将索引更新为循环列表的更优雅的方法？

> ID：11057447
> 
> 赞同：4
> 
> 时间：2012-06-15T20:01:18.030
> 
> 标签：c#

我有一个用户将遍历的问题列表，他们可以从任何问题开始，但他们确实有顺序，所以为了做到这一点，我只需维护数组的索引并像这样递增它：

```
CurrentQuestion = (++CurrentQuestion < questions.Length) ? CurrentQuestion : 0; 
```

这里发生的事情不一定很明显，有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T20:07:25.103

我强烈反对`++`在一个变量上使用，然后在同一个语句中再次使用该变量。我相信这条线在 C# 中可以正常工作，但是像这样的线在 C/C++ 中是未定义的，因此它们为我提出了一个标志。我会选择

```
CurrentQuestion = (CurrentQuestion+1) % questions.Length; 
```

我认为这是在类 C 语言中进行时钟算术的惯用方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T20:03:35.947

> 这里发生的事情不一定很明显，有没有更优雅的方法来做到这一点？

虽然这对某些人来说并不是很明显，但我确切地知道这是在做什么。

但是，您可能要考虑的是，编写可读代码比聪明更重要。代码必须维护，而且你并不比编译器聪明。

像这样编写代码，并对此感到满意：

```
//ensure that the CurrentQuestion counter increments and loops back around after hitting "list max"
CurrentQuestion = CurrentQuestion + 1;
if (CurrentQuestion >= questions.Length) {
  CurrentQuestion = 0;
} // meta-comment: use braces incase you have to add more later 
```

重要的是这段代码现在是可读的，并且仍然是优化的。它与其他代码*完全*一样，我们可以稍后更改部分而不需要重新阅读代码。

还要注意我在这里使用的一些语义。

*   始终使用牙套，即使您认为不需要它们。
*   做`CurrentQuestion = CurrentQuestion + 1;`而不是`CurrentQuestion += 1;`or `CurrentQuestion++;`or ，`++CurrentQuestion;`因为第一个在意图上更加明确。始终编​​写有目的的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:08:51.373

不需要条件运算符

```
 CurrentQuestion = ++CurrentQuestion % questions.Length; 
```

但我想你更喜欢哪一个更重要的是风格问题

# python - 优雅的字符串方法（如何更 Pythonic）

> ID：11057460
> 
> 赞同：1
> 
> 时间：2012-06-15T20:02:34.863
> 
> 标签：python, regex, string

我想进行字符串替换，以删除搜索短语中使用的所有特殊和不安全字符，以适合插入 Google URL 的内容。

我可以使用 .replace 或 re.sub 的多个实例，但这似乎效率低下。有没有更快或更Pythonic的方式来做到这一点？我想我最近正在超越初学者并进入中级，因为我所有的尝试都是为了让我的代码更简洁、更高效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T20:14:58.087

我建议不要自己进行替换，而是使用[`urllib.quote()`](http://docs.python.org/library/urllib.html#urllib.quote)，它通过将特殊字符转换为`%xx`转义符来返回 URL 安全字符串。

这里的好处是您可以轻松地从您的 URL 安全版本中获取原始字符串[`urllib.unquote()`](http://docs.python.org/library/urllib.html#urllib.unquote)（并且您不需要自己编写代码！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:10:08.347

一种选择是[`string.translate`](http://docs.python.org/library/string.html#string.translate)

例如

```
>>> string.translate('ds..ad$ds#a', None, '.,@#$')
'dsaddsa' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T21:37:06.107

另一种选择是使用`re.sub`，有关更多详细信息，请参阅[正则表达式文档](http://docs.python.org/library/re.html)。

举个例子：

```
# re.sub(pattern, replacement, target_string)
>>> re.sub("@|#|\$", "" , 'asdf@#$asdf')
'asdfasdf' 
```

请注意，您可以指定要替换为空字符串的符号，这意味着您可以添加/删除特殊字符。但是，它确实需要您对正则表达式模式有一些了解。

# visual-studio-2010 - VS2010 中 rdlc 中图像上的文本

> ID：11057462
> 
> 赞同：3
> 
> 时间：2012-06-15T20:02:47.437
> 
> 标签：visual-studio-2010, background-image, reportviewer, rdlc

在 VS2010 中，我创建了一个我想使用报告查看器查看的 rdlc 报告。在报告中，我想在所有文本下方使用扫描图像（因为它必须看起来像机构的信笺抬头），并且该图像必须占据整个页面。问题是报告上的文本框都被撞到了图像下方。有人可以帮我弄清楚如何完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:48:15.170

右键单击图像，选择布局，发送到底层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:18:40.970

我现在在 VS 2012 中这样做，但我认为在 VS 2010 中是一样的。右键单击报告正文（在设计模式下），选择“正文属性...”，然后您可以从那里指定背景图像.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-04T19:38:36.770

您可以在设计时将文本放在图像上方。当 ReportViewer 显示报告时，它会看起来很糟糕，但是如果您以 PDF 格式导出报告，它将看起来与您希望的一样。

我知道我的回答不能解决问题。在这个主题上做了很多工作之后，这是我所能得到的。

我现在已经在 VS2013 中尝试过。没变。

# java - 如何处理 SQL 状态 [HY000]；错误代码[1366]；字符串值不正确？

> ID：11057463
> 
> 赞同：8
> 
> 时间：2012-06-15T20:02:49.100
> 
> 标签：java, mysql, utf-8

我知道这个错误意味着 mysql 列不接受该值，但这很奇怪，因为该值适合 Java UTF-8 编码字符串，而 mysql 列是 utf8_general_ci。此外，到目前为止，所有 utf8 字符都可以正常工作，除了这些。

用例是：我正在导入推文。有问题的推文是：[https](https://twitter.com/bakervin/status/210054214951518212) ://twitter.com/bakervin/status/210054214951518212 - 你可以看到两个“奇怪”的字符（以及它们之间的两个奇怪的空格）。问题是 - 如何处理：

*   修剪这些字符（如何 - 它们是什么，Java UTF-8 与 MySQL 有何不同）
*   使列能够接受这个值（如何 - 有什么比 utf8_general_ci 更 utf-y 的）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-16T05:59:54.790

这些似乎是[unicode 代理字符](http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates)。由于它们不是实际字符，而且似乎 MySQL 不支持它们，因此修剪它们是安全的：

```
StringBuilder sb = new StringBuilder();
for (int i = 0; i < text.length(); i++) {
    char ch = text.charAt(i);
    if (!Character.isHighSurrogate(ch) && !Character.isLowSurrogate(ch)) {
        sb.append(ch);
    }
}
return sb.toString(); 
```

# eclipse - Eclipse 中 CEditor 的键和鼠标监听器

> ID：11057468
> 
> 赞同：0
> 
> 时间：2012-06-15T20:03:21.023
> 
> 标签：eclipse, eclipse-plugin

我需要在我的插件视图之一中添加一个监听器。当 Eclipse 的 CEditor 中发生鼠标或键事件时，我需要更新视图。我已经做到了：

((StyledText)((AbstractTextEditor)activeEditor).getAdapter(Control.class)).addKeyListener(l);

但是当我在编辑器中更改为不同的文件时，侦听器不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:41:44.620

已解决：我放弃了键/鼠标侦听器的想法，只是在我的 Eclipse 页面中添加了一个 SelectionListener。然后创建了一个自定义的 selectionListener，它只在选择在 CEditor 中时才响应。

让我的视图类实现 ISelectionListener

```
getViewSite().getPage().addSelectionListener(this);

@Override 

public void selectionChanged(IWorkbenchPart part, ISelection selection) {

    if(part.getClass() == CEditor.class){

        //Do what I needed 
    } 
} 
```

这使得它只响应我的 CEditor 中的选择更改。

# c# - DropDownList 和 EditorTemplates

> ID：11057469
> 
> 赞同：1
> 
> 时间：2012-06-15T20:03:29.503
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

我有一个名为 Invoice 的实体，我正在为数据注释扩展它

```
 [MetadataType(typeof(InvoiceMetadata))]
    public partial class Invoice
    {
        // Note this class has nothing in it.  It's just here to add the class-level attribute.
    }

    public class InvoiceMetadata
    {
        // Name the field the same as EF named the property - "FirstName" for example.
        // Also, the type needs to match.  Basically just redeclare it.
        // Note that this is a field.  I think it can be a property too, but fields definitely should work.

        [HiddenInput]
        public int ID { get; set; }

        [Required]
        [UIHint("InvoiceType")]
        [Display(Name = "Invoice Type")]
        public string Status { get; set; }

        [DisplayFormat(NullDisplayText = "(null value)")]
        public Supplier Supplier { get; set; }

    } 
```

Uhint[InvoiceType] 导致为此元素加载 InvoiceType Editor Template。此模板定义为

```
@model System.String

@{
      IDictionary<string, string> myDictionary = new Dictionary<string, string> { 
                                                                                        { "N", "New" }
                                                                                        , { "A", "Approved" },
                                                                                        {"H","On Hold"}
                                                                                        };

      SelectList projecttypes= new SelectList(myDictionary,"Key","Value");

       @Html.DropDownListFor(model=>model,projecttypes)     

 } 
```

我的程序中有很多这样的硬编码状态列表。我说硬编码是因为它们不是从数据库中获取的。有没有其他方法可以为下拉菜单创建模板？如何在模型中声明一个枚举并让下拉加载枚举而不必通过视图模型传递它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:39:27.617

而不是“硬编码”你的状态，我会创建一个 Enum 或一个[Type Safe Enum](http://www.javacamp.org/designPattern/enum.html)。对于您的示例，我将使用后者。

对于您所需的每个“状态列表”，使用您所需的设置创建一个单独的类：

```
public sealed class Status
{
    private readonly string _name;
    private readonly string _value;

    public static readonly Status New = new Status("N", "New");
    public static readonly Status Approved = new Status("A", "Approved");
    public static readonly Status OnHold = new Status("H", "On Hold");

    private Status(string value, string name)
    {
        _name = name;
        _value = value;
    }

    public string GetValue()
    {
        return _value;
    }

    public override string ToString()
    {
        return _name;
    }

} 
```

利用反射，您现在可以获取此类的字段来创建所需的下拉列表。创建扩展方法或帮助器类对您的项目是有益的：

```
var type = typeof(Status);
var fields = type.GetFields(BindingFlags.Public | BindingFlags.Static | BindingFlags.DeclaredOnly);

Dictionary<string, string> dictionary = fields.ToDictionary(
    kvp => ((Status)kvp.GetValue(kvp)).GetValue(), 
    kvp => kvp.GetValue(kvp).ToString()
    ); 
```

您现在可以像现在一样创建您的选择列表：

```
var list = new SelectList(dictionary,"Key","Value"); 
```

这将使用以下 html 创建一个下拉列表：

```
<select>
  <option value="N">New</option>
  <option value="A">Approved</option>
  <option value="H">On Hold</option>
</select> 
```

# objective-c - 使用ui switch xcode关闭应用程序中的声音

> ID：11057472
> 
> 赞同：-1
> 
> 时间：2012-06-15T20:03:37.493
> 
> 标签：objective-c, audio, ios5, xcode4.3

尝试为用户添加功能以使用 ui 开关关闭我的应用程序中的所有声音。（用户偏好）

```
- (IBAction)toggleaudio:(id)sender {

    if (switchtoggle.on)
    {
        [self.????? play];
    }
    else {
        [self.?????? stop];
    }
} 
```

我不确定在我的代码中问号的位置应该放什么。我尝试过的只是给了我错误。如果有更好的解决方案，我愿意接受建议。

我的音频代码：

```
CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"btn2", CFSTR 
                                      ("mp3"), NULL);
UInt32 soundID;
AudioServicesCreateSystemSoundID (soundFileURLRef, &soundID);
AudioServicesPlaySystemSound (soundID); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:22:25.290

做

```
 - (IBAction)toggleaudio:(id)sender {

    if (switchtoggle.on)
    {
        CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"btn2", CFSTR 
                                      ("mp3"), NULL);
UInt32 soundID;
AudioServicesCreateSystemSoundID (soundFileURLRef, &soundID);
AudioServicesPlaySystemSound (soundID);
    }
    else {
        //nothings playing now
    }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:00:37.860

使用 NS 用户默认值修复此问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T06:13:45.863

试试这个这将在按下按钮时播放声音如果开关状态打开播放声音如果开关状态关闭不播放声音..:) .h

```
@property (strong, nonatomic) IBOutlet UIButton *Btn;
 @property (strong, nonatomic) IBOutlet UISwitch *soundSwitch;
- (IBAction)saveSwitchState:(id)sender;
- (IBAction)ButtonPress:(id)sender 
```

.m

```
- (IBAction)saveSwitchState:(id)sender
{

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if ([self.soundSwitch isOn])
    {
        [defaults setBool:YES forKey:@"SwitchState"];
    [defaults synchronize];
        NSLog(@"Data Saved");
    }
    else
    {
        [defaults setBool:NO forKey:@"SwitchState"];
        [defaults synchronize];
        NSLog(@"Data Saved");

    }
}
- (void)viewDidLoad//Load Default Switch State
{
    [super viewDidLoad];
 NSString *path = [[NSBundle mainBundle]
     pathForResource:@"ding" ofType:@"mp3"];
     audioPlayer1 = [[AVAudioPlayer alloc]initWithContentsOfURL:
     [NSURL fileURLWithPath:path] error:NULL];

 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
     self.soundSwitch.on = [defaults boolForKey:@"SwitchState"];
}
- (IBAction)ButtonPress:(id)sender
 if(self.soundSwitch.on==YES)
    {
     [audioPlayer1 play];
    }
    else
    {[audioPlayer1 stop];

    }
} 
```

# c# - 测量具有不同字体的字符串 AccessViolationException 未处理

> ID：11057473
> 
> 赞同：1
> 
> 时间：2012-06-15T20:03:41.977
> 
> 标签：c#, string, fonts, measure

在我的自定义标签类的以下属性中，当设置字体时，它会找到显示文本的新长度，并相应地更改标签的大小。

```
 /// <summary>
    /// Font of Text Displayed
    /// </summary>
    public Font Font
    {
        get
        {
            return _font;
        }
        set
        {
            _font = value;
            using (Graphics g = _parent.CreateGraphics())
            {
                SizeF soize = g.MeasureString(_text, _font);
                _size = new Size((int)soize.Width, (int)soize.Height);
                _width = _size.Width;
                _height = _size.Height;
            } 
```

不过上线

```
SizeF soize = g.MeasureString(_text, _font); 
```

我收到此错误：System.AccessViolationException {“尝试读取或写入受保护的内存。这通常表明其他内存已损坏。”}

这只发生在我将字体更改为嵌入的自定义字体时。通常对于我的自定义标签的大多数实例，即使以相同的方式使用相同的字体，这也不会引发错误。它有时似乎也可以在没有抛出错误的情况下工作，但我不知道为什么它有时会决定工作，而其他时候则不行。

有谁知道我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:19:51.043

随机 GDI+ 相关的 AccessViolationExceptions 似乎最常由视频驱动程序引起。我会尝试两件事：

1.  更新您的驱动程序
2.  在具有不同制造商视频卡的机器上尝试此操作（即，如果您有 Nvidia，请尝试 ATI，反之亦然）。

# ruby-on-rails - ruby on rails 填充关联表

> ID：11057479
> 
> 赞同：0
> 
> 时间：2012-06-15T20:03:53.423
> 
> 标签：ruby-on-rails, has-and-belongs-to-many

我有一个食谱表，一个成分表和一个关联表（一个食谱“拥有并属于许多”成分和一个成分“拥有并属于许多”食谱）。我没有关联表的控制器或模型。

我想编写一个用随机（但有效）数据填充关联表的任务。我编写了一个为关联表生成有效 id 的代码，但我不知道如何让它进入关联表（因为我没有它的模型）。

我可以以某种方式迭代食谱，并将数据添加到 recipe.ingredients 列表吗？它会自动填充关联表吗？

到目前为止我的代码：

```
namespace :FillRandomAssociationData do

desc "Fills the recipes - ingredients association table with random data"
task :Recipe_Ingredients_Association => :environment do
  Recipe.all.each do |rec|
    numOfIngredientsPerRecipe =  rand(3)
    ingredientIDLimit = Ingredient.count

    for i in 0..numOfIngredientsPerRecipe
      ingRandId = rand(ingredientIDLimit)
      .... This is where I got stuck...
    end
  end
end 
```

结尾

谢谢，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:20:02.180

你只需要用它的成分填充配方对象，然后保存它，Rails 将填充关联表：

```
desc "Fills the recipes - ingredients association table with random data"
task :Recipe_Ingredients_Association => :environment do
  Recipe.all.each do |rec|
    numOfIngredientsPerRecipe =  rand(3)
    ingredientIDLimit = Ingredient.count

    for i in 0..numOfIngredientsPerRecipe
      ingRandId = rand(ingredientIDLimit)
      rec.ingredients << Ingredient.find(ingRandId)          
    end

    rec.save!
  end
end 
```

请注意，使用此算法，您可以在食谱中多次添加相同的成分。

# virtualbox - 在虚拟机 Windows 7 上创建假 SD 卡

> ID：11057482
> 
> 赞同：1
> 
> 时间：2012-06-15T20:03:58.403
> 
> 标签：virtualbox

我正在测试与 SD 卡交互的软件。我需要在我的 Windows 7 实例上创建假 SD 卡来运行软件测试。被测软件只响应 SD 卡。有人知道如何创建安装在虚拟盒实例上的假 SD 卡吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:58:20.690

周五，我了解到这是通过使用 JNA 库在 Java 中解决的。我还没有验证这个解决方案。

# twitter-bootstrap - Twitter-bootstrap - 如果井已经在它自己的跨度中，如何在井中使用“跨度”分发内容？

> ID：11057485
> 
> 赞同：2
> 
> 时间：2012-06-15T20:04:05.063
> 
> 标签：twitter-bootstrap, html

我在包含井的页面右侧创建了一个跨度。在那口井中，我尝试使用多个 div class="span__" 命令对齐多行图像和文本。一切都被正确放置，但是它被井内的第一个推到了井外。

```
<!-- The “well” below is on the right side of the page (other content span=3 is on the left of it) --> 
```

## 标题

*支持文本*

```
 <!-- Above content is all correctly contained in the well, but I want the content below in the well too, but also want to distribute several lines horizontally. Using the “span=” below, within the “span8 offset0” opened above does distribute the content properly from a horizontal standpoint, but it gets removed from the well. Is there a way, such as a “sub-span” to place content horizontally while still INSIDE the well? Please note, as you can see from the various span= entries below, I’m not looking to just center them.  -->

    <div class="span3 offset2">
    <img src="assets/img/vote211x58.png" alt="vote" width="211" height="58" hspace="7">
    </div> 
```

左侧按钮

```
 <div class="span2 offset0">
     <p></p><a class="btn btn-mini" href="#">Button middle</a>
     </div>

    <div class="span2 offset0">
      <p><a class="btn btn-xlarge" href="#">Button right</a></p>
    </div>
    <!--end line of buttons -->

   <!-- start new line, want all contained in the well, but distributed horizontally -->
    <div class="span2 offset1">
       <p><img src="assets/img/why-green.png" alt="why green" width="32" height="45" hspace="18"></p>
    </div>

    <div class="span1">
    <!--  <a class="btn small" href="#">view stats</a> -->
       <p></p>
    </div>

    <div class="span2 offset1">
      <p><img src="assets/img/why-red.png" alt="why red" width="32" height="45" hspace="16"></p>
    </div>
    <!-- end last line of content I want included in the well -->

    </div>  <!-- closes the well -->
    </div>  <!-- closes the span=8 containing the well  -->

    </div>  <!-- closes the row containing the left span=3 content + the span=8 content holding the well.  THANK YOU FOR YOUR HELP! --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:42:42.063

不是一个很好的解决方案，但在某些情况下可能会起作用：

在 CSS 中创建一个新井（例如“.well-new”）（这样它就不会在整个站点中搞砸“井”的其他用途）并给它更大的底部填充（填充：19px 19px **180px** 19px;）和一个相应大的负边距底部（我使用-168px;） - 效果是井的底部延伸得更低，将下面的内容合并到井中。

我不确定这会如何影响移动设备上的渲染。

欢迎更好的答案！

# html - 填充浏览器窗口的地图和小部件

> ID：11057490
> 
> 赞同：0
> 
> 时间：2012-06-15T20:04:32.330
> 
> 标签：html, css, google-maps, kendo-ui

我有一个包含地图（谷歌）、图表和网格的网页。他们通过拆分器和 TabStrips 共享屏幕。我有一个不可能的时间让他们扩展到他们可用空间的 100% 的高度/宽度

一个例子价值超过 1000 字：

我创建了一个显示问题的精简 JsFiddle：http: [//jsfiddle.net/drysg/Rh7cL/](http://jsfiddle.net/drysg/Rh7cL/) 完整浏览器版本：http: [//jsfiddle.net/drysg/Rh7cL/embedded/result/](http://jsfiddle.net/drysg/Rh7cL/embedded/result/)

我尝试了各种 CSS 技巧（显示布局、块、使用高度：100%、宽度：100%、层次结构中所有宽度/高度的显式设置。但没有任何效果。我简化了 CSS 来说明。

我正在寻找一个纯 CSS 解决方案：

1.  展开表格、图表和地图以在一开始就填满屏幕
2.  Browser Resize 将动态调整 Grid、Map 和 Chart 的大小（它们会像任何优秀的 WPF 或 Silverlight 应用程序一样缩小到可用空间！
3.  如果需要，我会容忍响应窗口调整大小事件的 JQuery 方法。

如果你仔细观察，你会发现实际上有 4 个问题：

1.  地图高度不是所需空间的 100%
2.  保存图表和网格的 TabStrip 未填充 100% 的高度
3.  TabStrip 上有一个滚动条，其中包含图表和网格（我希望将其删除，因为它们应该填充空间）
4.  我想要的是 Grid 的滚动条正在工作（这样我就不会在 TabStrip 上有滚动条）

布局层次结构如下：

I. 顶部窗口 1\. 标题 DIV 2\. 拆分器 A. 地图 B. TabStrip i. 表 DIV a。菜单 B. 网格二。图表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:12:40.077

将 BODY 和 HTML 元素设置为`{ height:100%; overflow: hidden}`，然后将您注释的 DIV 高度规则恢复为 100%；

请参阅[http://jsfiddle.net/t4dzj/1/](http://jsfiddle.net/t4dzj/1/) - 这可以解决问题吗？

# objective-c - 在 NSWindow 中模拟鼠标点击

> ID：11057503
> 
> 赞同：2
> 
> 时间：2012-06-15T20:05:38.123
> 
> 标签：objective-c, macos, cocoa

我想模拟 Cocoa 应用程序上的鼠标单击，而无需实际单击鼠标，并且*在给定当前鼠标位置的情况下，不必弄清楚哪个视图应该响应单击。

我希望 Cocoa 框架来处理确定哪个视图应该响应，所以我不认为对 NSView 对象的方法调用是我正在寻找的。也就是说，我认为我需要一个最终会调用此方法的方法调用。

我目前通过使用 CGEventCreateMouseEvent 和 CGEventPost 在特定的全局位置单击鼠标来完成这项工作。然而，这种技术实际上是点击鼠标。所以这行得通，但我对这种行为并不完全满意。例如，如果我在调用 CGEventPost 时按住键盘上的一个键，则该键将被包装到事件中。另外，如果我将另一个进程的窗口移动到我想模拟单击的窗口上，那么 CGEventPost 方法将在该窗口中单击鼠标。也就是说，它在全球范围内跨流程发挥作用。我想要一种适用于单个窗口的技术。NSWindow 对象上的东西可能吗？

我在 Cocoa 文档中读到“鼠标事件由 NSWindow 对象分派到发生事件的 NSView 对象”。

好的。所以我想知道被调用来进行调度的方法。在窗口上调用这个方法，然后让框架在给定当前鼠标位置的情况下确定调用哪个 NSView。

任何帮助将不胜感激。我刚刚开始学习 Cocoa 框架，所以如果这里的任何术语/措辞不完全正确，我深表歉意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-21T23:34:02.607

很难确切知道您正在寻找多少保真度与实际点击发生的情况。例如，您希望点击激活应用程序吗？您希望单击将窗口带到顶部吗？让它成为关键还是主要？如果该位置在标题栏中，您是否希望它可能关闭、最小化、缩放或移动窗口？

正如 John Caswell 所指出的，如果您将一个适当构造的传递`NSEvent`给`-[NSApplication sendEvent:]`它将密切模拟真实事件的处理。在大多数情况下，`NSApplication`会将事件转发到事件的窗口及其`-[NSWindow sendEvent:]`方法。如果你想避免`NSApplication`做其他事情的机会，你可以直接调度到窗口的`-sendEvent:`方法。但这可能会挫败一些可取的行为，具体取决于您想要什么。

如果单击的窗口或视图的响应是运行内部事件跟踪循环会发生什么？它将是同步的；也就是说，`-sendEvent:`在该循环完成之前，调用的代码不会重新获得控制权，如果您无法传递后续事件，它可能无法完成。事实上，这样的循环将通过 查找后续事件`-[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:]`，因此如果您的合成事件不在队列中，它们将不会被看到。因此，更好地模拟真实事件的处理可能需要您使用`-[NSApplication postEvent:atStart:]`.

我认为您的首要任务是真正深入思考您要完成的工作，所有潜在的陷阱和极端情况，并决定您要如何处理这些问题。

关于这些`CGEvent...`东西，您可以使用不会点击其他应用程序窗口的特定进程将事件发布到`CGEventPostToPSN()`，即使它们位于目标窗口的前面。但是，它可能仍会单击目标应用程序中的不同窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T22:50:46.373

> 好的。所以我想知道被调用来进行调度的方法。在窗口上调用这个方法，然后让框架在给定当前鼠标位置的情况下确定调用哪个 NSView。

```
NSView *target = [[theWindow contentView] hitTest:thePoint]; 
```

我对您的问题并不完全清楚，所以我不知道您是否只想在目标上调用 mouseDown:。但如果你这样做了，那将与真正的鼠标点击几乎完全相同。

这是用于传递实时点击的消息。它遍历视图层次结构，自动处理重叠、隐藏消息等，并让视图链中的每个步骤在需要时进行干预。如果一个视图想要阻止子视图获得点击，它会通过吃 hitTest: 来做到这一点，这意味着它会影响你的代码，就像它影响真正的点击一样。*如果*点击将被传递，此方法始终会告诉您将*在何处*传递。

但是，它不一定能处理可能无法传递点击的所有原因（acceptsFirstMouse、模态对话框等）。此外，您必须知道窗口和点（在适当的坐标系中），但听起来这就是您的开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T20:26:47.147

您可以通过如下调用来模拟鼠标点击`mouseDown:`：

```
[self mouseDown: nil]; 
```

并在屏幕上获取鼠标位置：

```
-(void)mouseDown:(NSEvent *)theEvent {

    NSPoint mouseLocation = [NSEvent mouseLocation];

    NSLog(@"x:  %f", mouseLocation.x);
    NSLog(@"y:  %f", mouseLocation.y);
} 
```

# php - 学说映射未找到案例

> ID：11057504
> 
> 赞同：4
> 
> 时间：2012-06-15T20:05:38.397
> 
> 标签：php, orm, doctrine, mapping

我有一个引用表 B 的表 A。

编辑：使用的数据库引擎是 MyISAM。

教义映射就像一个魅力，除非我在数据库中有无效案例，其中表 A 中引用的 ID 在表 B 中并不真正存在。

因此，当您执行此代码时：

```
$objectB = $objectA->getObjectB();//with lazy load 
```

你实际上得到了 $objectB 代理对象，它***不是 null***。所以 !empty($objectB) 会通过。

当您尝试访问 $objectB 的任何属性时，例如：

> $objectB->getName();

你得到*Entity not found 异常*。您无法在代码中预测 $objectB 实际上不**存在**并且 $objectB 没有 Name 属性。

$objectB 实际上应该设置为 null，但这并没有发生。

Hibernate 实际上具有映射属性*not-found=ignore*，它将丢失的对象设置为**NULL**而不是将其设置为代理对象。Doctrine有类似的东西吗？

PS。当然，你总是可以捕捉到 Entity not found 异常，然后玩弄它。或者您可以映射表 A 中的实际 objectB_ID 字段，但这些不是 100% 干净的解决方案。

我希望有人有答案。

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T21:05:53.070

> 除非我在数据库中有无效的情况，其中表 A 中引用的 ID 在表 B 中并不真正存在

IMO 这是一个垃圾进，垃圾出的案例。如果您的架构中 TableA 在 TableB 中可能有也可能没有行，则应在 TableB 上实现 FK 约束，以便如果从 TableB 中删除一行，则 TableA 中引用已删除行的任何行的值都将更改为 null。

如果您真的想继续推进您提出的架构实施，您可以尝试这样做：

```
$rowExists = ($objectA->getObjectB()->getId() > 0) ? true : false; 
```

这当然假设您在 tableB 上有一个 id 列并且它是无符号的。

**- 更新 -**

```
try {
    $objectB = $objectA->getObjectB();
} catch (Exception $e) {
    $objectB = null;
}

if ($objectB instanceof ClassB) {
    // Do work
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T16:54:23.823

如果您查看生成的代理类之一，您会发现`__load()`和`__clone()`函数都抛出`EntityNotFoundException`.

`__load()`当您“懒惰地”调用该函数时，将调用该函数`getName()`。

```
class ObjectB extends \Foo\Entity\ObjectB implements \Doctrine\ORM\Proxy\Proxy
{
    private $_entityPersister;
    private $_identifier;
    public $__isInitialized__ = false;
    public function __construct($entityPersister, $identifier)
    {
        $this->_entityPersister = $entityPersister;
        $this->_identifier = $identifier;
    }
    /** @private */
    public function __load()
    {
        if (!$this->__isInitialized__ && $this->_entityPersister) {
            $this->__isInitialized__ = true;

            if (method_exists($this, "__wakeup")) {
                // call this after __isInitialized__to avoid infinite recursion
                // but before loading to emulate what ClassMetadata::newInstance()
                // provides.
                $this->__wakeup();
            }

            if ($this->_entityPersister->load($this->_identifier, $this) === null) {
                throw new \Doctrine\ORM\EntityNotFoundException();
            }
            unset($this->_entityPersister, $this->_identifier);
        }
    }
...
    public function getName()
    {
        $this->__load();
        return parent::getName();
    }
...
} 
```

你基本上有几个选择，第一个是使用`try/catch`块。

```
try {
    $name = $objectB->getName();
} catch (\Doctrine\ORM\EntityNotFoundException $e) {
    $name = null;
} 
```

或者你可以看看实现这个[`__wakeup()`](http://doctrine-orm.readthedocs.org/en/2.0.x/cookbook/implementing-wakeup-or-clone.html#safely-implementing-wakeup)函数`ObjectB`并可能自己处理这个（尽管你很可能需要抛出一个异常）。

最后，如果您有野心，您可以更改`Proxy`模板。`\Doctrine\ORM\Proxy\ProxyFactory`包含模板。

```
 /** Proxy class code template */
    private static $_proxyClassTemplate =
'<?php

namespace <namespace>;

/**
 * THIS CLASS WAS GENERATED BY THE DOCTRINE ORM. DO NOT EDIT THIS FILE.
 */
class <proxyClassName> extends \<className> implements \Doctrine\ORM\Proxy\Proxy
{
    private $_entityPersister;
    private $_identifier;
    public $__isInitialized__ = false;
    public function __construct($entityPersister, $identifier)
    {
        $this->_entityPersister = $entityPersister;
        $this->_identifier = $identifier;
    }
    /** @private */
    public function __load()
    {
        if (!$this->__isInitialized__ && $this->_entityPersister) {
            $this->__isInitialized__ = true;

            if (method_exists($this, "__wakeup")) {
                // call this after __isInitialized__to avoid infinite recursion
                // but before loading to emulate what ClassMetadata::newInstance()
            // provides.
                $this->__wakeup();
            }

            if ($this->_entityPersister->load($this->_identifier, $this) === null) {
                throw new \Doctrine\ORM\EntityNotFoundException();
            }
            unset($this->_entityPersister, $this->_identifier);
        }
    } 
```

您应该能够摆脱`EntityNotFoundException`在`__load()`and`__clone()`函数中的抛出，尽管可能会有意想不到的副作用。如果您计划定期升级 Doctrine，您可能还希望将此更改视为一个补丁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-07T23:43:21.027

在 ObjectA 类的注释中使用它：

```
@ORM\ManyToOne(targetEntity="ObjectB", fetch="EAGER") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-26T13:45:20.470

我们在使用 Doctrine ORM 时遇到了这个问题，其中对象 A 非常重要，如果对象 A 不再存在，我们不想使用某种清理脚本简单地删除它。这在正常的应用程序执行期间不会发生，但在手动编辑数据库表时很少发生，例如在迁移/升级期间。

我们考虑过但不太热衷的几个选项：

*   使用供应商特定的修复程序，在这种情况下是[SQL Server](https://msdn.microsoft.com/en-us/library/ms186712.aspx)`ON DELETE SET NULL`的约束）。
*   使用自定义的 Twig 扩展来捕获 EntityNotFoundException（我们只是在 Twig 模板中真正遇到了这个问题，但不想在任何地方添加扩展，然后仍然可能在我们的 PHP 控制器中出现问题）。

相反，我们决定通过在实体中捕获 EntityNotFoundException 来稍微污染我们的实体，但将所有逻辑都包含到 EntityExistanceCheckableTrait 特征中。

一旦特征被添加到对象 A 和对象 B 中，那么我们需要做的就是调用`$objectB->hasObjectB()`或`{{ objectB.hasObjectA() }}`在 Twig 中并按照控制器/模板的逻辑来处理它。

```
class ObjectA
{
    use EntityExistanceCheckableTrait;

    ...
} 
```

和

```
class ObjectB
{
    use EntityExistanceCheckableTrait;

    ...

    public function hasObjectB()
    {
        return $this->hasEntity('ObjectB');
    }
} 
```

该特征添加了 __invoke() PHP 魔术方法，如果存在则简单地返回 true，但这就是我们需要加载代理并查看关联实体实际上是 eixsts 还是只是关联实体中的孤立 ID。

这是该特征的完整代码：

```
/**
 * Add to the entities on both sides of a Doctrine Association then implement a wrapper around hasEntity() in the
 * owning entity.
 *
 * Trait EntityExistanceCheckableTrait
 */
trait EntityExistanceCheckableTrait
{
    /**
     * This can be empty but needs to be defined so we can check that the entity is callable.
     *
     * @return bool
     */
    public function __invoke()
    {
        return true;
    }

    /**
     * @param string $entityName
     * @return bool
     */
    public function hasEntity($entityName)
    {
        // Create the callable method
        $entityMethod = 'get'.$entityName;

        try {
            $entity = $this->$entityMethod();

            // We invoke the associated entity to force the real entity to be lazy-loaded instead of the proxy.
            // This way we can ensure that we don't have an orphan entity (e.g. a proxy with the ID of the associated
            // entity, loaded from the original entity, but the associated entity no longer exists in the database).
            return (isset($entity) && $entity()) ? true : false;
        } catch (EntityNotFoundException $e) {
            return false;
        }
    }
} 
```

# javascript - 外部 JS 不起作用

> ID：11057507
> 
> 赞同：-1
> 
> 时间：2012-06-15T20:05:49.417
> 
> 标签：javascript, jquery

我有以下代码：

```
<script language="javascript" type="text/javascript">
    $.fn.dataTableExt.oPagination.input = {
        "fnInit": function (oSettings, nPaging, fnCallbackDraw) {
....
        },

        "fnUpdate": function (oSettings, fnCallbackDraw) {
....
        }
    };
</script> 
```

它可以工作，但是当我创建外部文件并将此代码放入此文件（当然没有`<script></script>`）时 - 它不起作用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:15:17.837

只需确保 jQuery 是您加载的第一个脚本

```
<script type="text/javascript" src="jquery.js"><scrip>
<script type="text/javascript" src="yourScript.js"><script> 
```

# ios - 在 iOS 应用程序中创建日志文件

> ID：11057510
> 
> 赞同：12
> 
> 时间：2012-06-15T20:06:18.620
> 
> 标签：ios, file, logging, uitextview

因此，在我的应用程序中，我有一堆数据要写入日志文件，然后在`UITextView`单击按钮时将其显示在 a 中。我知道如何切换 UITextView，但我不知道如何创建和更新日志文件（在本地文件系统中）。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-15T20:13:17.067

基本思想是您创建文件，并在每次记录新行时附加到该文件。你可以很容易地做到这一点：

写入文件：

```
NSString *content = @"This is my log";

//Get the file path
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *fileName = [documentsDirectory stringByAppendingPathComponent:@"myFileName.txt"];

//create file if it doesn't exist
if(![[NSFileManager defaultManager] fileExistsAtPath:fileName])
    [[NSFileManager defaultManager] createFileAtPath:fileName contents:nil attributes:nil];

//append text to file (you'll probably want to add a newline every write)
NSFileHandle *file = [NSFileHandle fileHandleForUpdatingAtPath:fileName];
[file seekToEndOfFile];
[file writeData:[content dataUsingEncoding:NSUTF8StringEncoding]];
[file closeFile]; 
```

阅读：

```
//get file path
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *fileName = [documentsDirectory stringByAppendingPathComponent:@"myFileName.txt"];

//read the whole file as a single string
NSString *content = [NSString stringWithContentsOfFile:fileName encoding:NSUTF8StringEncoding error:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T23:16:51.317

我认为这是一个自动执行此操作的课程，因为在没有运气之后创建了我自己的课程。

NSLogger 是 iOS 3.0 及以上版本的轻量级类。它允许开发人员随时间轻松记录不同的“事件”，这些“事件”在本地存储为 .txt 文件。

[https://github.com/northernspark/NSLogger](https://github.com/northernspark/NSLogger)

# linux - 如果网络连接中断，对驻留在 smb 挂载上的文件的读取系统调用会永远挂起？

> ID：11057512
> 
> 赞同：1
> 
> 时间：2012-06-15T20:06:20.143
> 
> 标签：linux, network-programming, blocking, smb

我在 centos 盒子上安装了一个 windows 共享文件夹。当我尝试使用 read 系统调用读取一个巨大的文件时，如果网络连接中断，那么读取就会挂起并使我的程序进入不间断的睡眠状态。这听起来不对。即使我使用 O_NONBLOCK 打开文件，即使读取确实挂起。我希望读取最终会超时，但事实并非如此。如果读取只是阻塞而不返回任何错误，您如何通过网络实现可靠的复制操作？我认为使用异步模式和选择调用也不会帮助我。读取总是阻塞调用吗？谢谢加纳库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:17:33.320

You could try mounting the remote filesystem as cifs instead of smb. [mount.cifs](http://linux.die.net/man/8/mount.cifs) supports the `soft` options (and it is the default too) that will cause an error to be returned in the case of a network or server failure instead of a hang.

From the man page:

> soft: (default) The program accessing a file on the cifs mounted file system will not hang when the server crashes and will return errors to the user application.

# json - jquery-ui-map 加载 json 和更新标记

> ID：11057513
> 
> 赞同：2
> 
> 时间：2012-06-15T20:06:22.037
> 
> 标签：json, google-maps, google-maps-api-3, jquery-ui-map

我已经搜索了整个网络和 SO，但我无法弄清楚这一点。

这是问题所在：

我正在使用来自 jquery-ui-map 站点的以下演示来加载 JSON 文件：

[http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-json.html](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-json.html)

它可以很好地加载我的标记，但我需要每 30 秒刷新一次它的内容并获取新的标记。

起初我以为我会再次调用该函数，但这将标记留在那里。经过一些研究，我发现我需要清除标记（在 V3 上并不容易，但我能够做到），但问题是我无法再次显示标记。

如果我使用破坏功能，那么我可以重新加载新标记并删除旧标记，但这会导致地图闪烁。当我尝试清除标记时，不会显示新标记。

任何帮助是极大的赞赏。

下面是我的代码：

```
<script type="text/javascript">
    function mapTest() { 
        $('#map_canvas').gmap('destroy');
        //clearMap();
        demo.add(function() {
            $('#map_canvas').gmap({'disableDefaultUI':true, 'callback': function() {
                var self = this;
                $.getJSON( 'json/demo.json?'+ new Date().getTime(), function(data) { 
                    $.each( data.markers, function(i, marker) {
                        self.addMarker({ 'position': new google.maps.LatLng(marker.latitude, marker.longitude), 'bounds':true } ).click(function() {
                            self.openInfoWindow({ 'content': marker.content }, this);
                        });
                    });
                });
            }}); 
        }).load();
    }

    function clearMap(){
        $('#map_canvas').gmap('clear', 'markers');
    }           

    mapTest();
    setInterval(mapTest, 30000 );
</script> 
```

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:27:47.427

您的地图初始化函数在`mapTest()`函数内部 - 您每 30 秒使用`setInterval`.

这是错误的，因为您实际上是在**重新加载**地图（您`destroy`然后每 30 秒重新创建一次），这就是它闪烁的原因。

将地图初始化放在 , 之外`mapTest()`，`clear`然后从 内部检索新标记`mapTest()`

**更新：**

```
var mapOptions = {
    disableDefaultUI: true
    // add more options if you wish.
};

function mapTest() {

    $('#map_canvas').gmap('clear', 'markers'); // clear old markers
    $.getJSON( 'json/demo.json?'+ new Date().getTime(), function(data) { 
        $.each( data.markers, function(i, marker) {
            var self = this;
            self.addMarker({ 'position': new google.maps.LatLng(marker.latitude, marker.longitude), 'bounds':true } ).click(function() {
                self.openInfoWindow({ 'content': marker.content }, this);
            });
        });
    });
}

$(function(){
    $('#map_canvas').gmap(mapOptions, function(){

        $.getJSON( 'json/demo.json?'+ new Date().getTime(), function(data) { 
            $.each( data.markers, function(i, marker) {
                var self = this;
                self.addMarker({ 'position': new google.maps.LatLng(marker.latitude, marker.longitude), 'bounds':true } ).click(function() {
                    self.openInfoWindow({ 'content': marker.content }, this);
                });
            });
        });
    });

    setInterval(mapTest, 30000 );

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T07:36:37.773

我找到了一种无需重新加载地图即可更新标记的解决方案。试试这个代码...

```
$(document).ready(function() {
    var $map = $('#map_canvas');
    App.drawMap($map);
    setInterval(function() {

    $('#map_canvas').gmap('clear', 'markers');
       App.drawMap($map);
    },10000);

});

var App = {
    drawMap: function($divMap) {
        Http.doAjaxGetJson('../../js/testjson.json', function(data) {
            for (var k in data.gpsData) {
                $divMap.gmap({ 'center': new google.maps.LatLng(data.gpsData[k].latitude,data.gpsData[k].longitude),'zoom':15, 'callback': function() {}});
                $divMap.gmap('addMarker', {
                    'title':data.obj.name,
                    'position': new google.maps.LatLng(data.gpsData[k].latitude, data.gpsData[k].longitude),
                    'bounds': false,
                }).click(function() {
                     var $_obj = $(this);
                });

        }
    });
}
}; 
```

通过此代码标记将每 10 秒更新一次..

# codeigniter - CodeIgniter 和 mod_rewrite 与多个应用程序

> ID：11057519
> 
> 赞同：1
> 
> 时间：2012-06-15T20:07:10.230
> 
> 标签：codeigniter, mod-rewrite

我正在尝试将 CodeIgniter 用于多个应用程序以及 mod_rewrite 用于应用程序文件夹/名称。

我的 CodeIgniter 结构如下：

```
webroot/appone/
webroot/apptwo/
webroot/system/
webroot/index.php
webroot/appone.php
webroot/apptwo.php 
```

我按照此处列出的示例将 CI 与多个应用程序一起使用。[http://codeigniter.com/wiki/Multiple_Applications/](http://codeigniter.com/wiki/Multiple_Applications/)

我正在寻找使用 mod_rewrite 将显示以下内容：

```
domain.com/appone/
domain.com/apptwo/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:18:24.997

我相信德克是正确的。

这是我在每个应用程序文件夹上使用的代码（从 Elliot Haughin 获得），它运行良好。只需将 APP_FOLDER_NAME 更改为您希望 appone、apptwo 等的任何内容。

在每个文件夹上都有一个 .htaccess 文件，其中包含以下内容：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /APP_FOLDER_NAME

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

PS。不要忘记删除 index.php 并在 CI 配置中定义基本 url。

干杯。

# jquery - 选择器上的 jQuery 增量编号

> ID：11057521
> 
> 赞同：1
> 
> 时间：2012-06-15T20:07:11.533
> 
> 标签：jquery

编辑问题以按请求添加 jsfiddle.net 链接。对于那个很抱歉。这是链接：http: [//jsfiddle.net/AuQL3/](http://jsfiddle.net/AuQL3/)

我有这个看起来像这样的函数：

```
$(document).ready(function() {
    $('.innertabs2 > div').hide();
    $('.innertabs2 div:first').show();
    $('.innertabs2 ul.inner-tab-nav2 li:first').addClass('active');
    $('.innertabs2 ul.inner-tab-nav2 li a').click(function() {
        $('.innertabs2 ul.inner-tab-nav2 li').removeClass('active');
        $(this).parent().addClass('active');
        var currentTab = $(this).attr('href');
        $('.innertabs2 > div').hide();
        $(currentTab).fadeIn(400).show();
        //$(currentTab).show();
        return false;
    });
});​ 
```

请特别注意“.innertabs”和“.inner-tab-nav”选择器上的数字 2。使此功能更具可扩展性以便它可以在页面上多次重用而不是每次手动创建新功能的正确方法是什么？

这是我正在使用的 HTML 的简化版本：

```
<div class="tabs"><!--begin tab container-->

<ul class="tab-nav">
    <li><a href="#menu1">Menu 1</a></li>
    <li><a href="#menu2">Menu 2</a></li>
    <li><a href="#menu3">Menu 3</a></li>
</ul>

<div id="MenuContent"><!-- begin main tab's content-->

        <div class="innertabs2"><!--begin subtab set 1 (need to autoincrement number)-->

            <ul class="inner-tab-nav2">
                <li><a href="#submenu1">Submenu 1</a></li>
                <li><a href="#submenu2">Submenu 2</a></li>
                <li><a href="#submenu3">Submenu 3</a></li>
            </ul>

            <div id="submenu1"><!--begin tab 1-->                   

                {{CONTENT}}

            </div><!--end tab 1-->

            <div id="submenu2"><!--begin tab 2-->

                {{CONTENT}}

            </div><!--end tab 2-->

            <div id="submenu3"><!--begin tab 3-->

                {{CONTENT}}

            </div><!--end tab 3-->

        </div><!--end subtab set 1-->

</div><!--end main tab's content--> 
```

我已经尝试使用 .each() 来获得预期的效果，但我认为我的语法离题了：

```
$(document).ready(function() {

 $(".tabs > div").each(function(i) {
        $('.innertabs' + i > div ').hide();
            $('.innertabs '+i div:first').show();
        $('.innertabs' + i 'ul.inner-tab-nav' + i li: first ').addClass('
        active ');
        $('.innertabs '+i '
        ul.inner - tab - nav '+i li a').click(function() {
            $('.innertabs' + i 'ul.inner-tab-nav' + i li ').removeClass('
            active ');
            $(this).parent().addClass('
            active ');
        var currentTab = $(this).attr('
            href ');
            $('.innertabs '+i > div').hide();
            $(currentTab).fadeIn(400).show();
            //$(currentTab).show();
            return false;
        }
        });
    });​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T20:13:12.423

`.each()`您可以使用 starts-with 属性选择器，而不是进行不必要的迭代，`^=`如下所示：

```
$('[class^="innertabs"] > div').hide();
$('[class^="innertabs"] div:first').show();
$('[class^="innertabs"] ul[class^="inner-tab-nav"] li:first').addClass('active');
$('[class^="innertabs"] ul[class^="inner-tab-nav"] li a').click(function() {
    $('[class^="innertabs"] ul[class^="inner-tab-nav"] li').removeClass('active');
    $(this).parent().addClass('active');
    var currentTab = $(this).attr('href');
    $('[class^="innertabs"] > div').hide();
    $(currentTab).fadeIn(400).show();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:09:45.827

你错过了一堆，`+`最后`'`你还有额外`}`的

```
$(".tabs > div").each(function(i) {
    $('.innertabs' + i + ' > div ').hide();
    $('.innertabs '+i +' div:first').show();
    $('.innertabs' + i + 'ul.inner-tab-nav' + i + ' li: first ').addClass('active ');
    $('.innertabs '+i +'ul.inner - tab - nav '+i+' li a').click(function() {
    $('.innertabs' + i +' ul.inner-tab-nav' + i +' li ').removeClass('active');
    $(this).parent().addClass('active');
    var currentTab = $(this).attr('href');
    $('.innertabs '+i +' > div').hide();
    $(currentTab).fadeIn(400).show();
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T20:14:49.177

您可以做的是使用几个类来区分元素，同时拥有可以在脚本中使用的通用类：

```
<div class="tabs">

    <ul class="tab-nav">

    <div class="inner-tabs second">
        <ul class="inner-tab-nav second">
        </ul>

        <div class="inner-tabs third">
            <ul class="inner-tab-nav third">
            </ul>
        </div>

    </div> 
```

在您的脚本中，您可以简单地使用该类`.inner-tabs`来对行为进行编码。
在您的 CSS 中，您可以组合`.inner-tabs.second`以区分样式。

我认为 CSS 类的这种使用会产生更清晰的标记以及更多的语义。

此外，使用过于复杂的 jquery 选择器会减慢选择速度并且可读性较差：`.inner-tabs`乍一看更有意义，`[class^="innertabs"]`对吧？

# asp.net - 升级到 2K8 服务器，加载配置文件时出错：无法开始监控对 '\\networkshare' 的更改

> ID：11057530
> 
> 赞同：2
> 
> 时间：2012-06-15T20:08:16.773
> 
> 标签：asp.net, iis-7, windows-server-2008, iis-7.5

我将我的站点从 2k3 服务器移到 2k8 服务器。该站点有一个指向网络共享的虚拟目录，该网络共享的凭据与该站点使用的凭据不同。我将虚拟目录设置为使用正确的凭据，它可以通过资源管理器很好地浏览共享，但是当我尝试通过浏览器加载文件（图像等）时，出现以下 asp.net 错误：

> ## “/”应用程序中的服务器错误。
> 
> 配置错误描述：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：加载配置文件时发生错误：无法开始监视对“\\networkshare”的更改。
> 
> 源错误：
> 
> [没有相关的源代码行]
> 
> 源文件：\\networkshare\web.config 行：0
> 
> * * *
> 
> 版本信息：Microsoft .NET Framework 版本：2.0.50727.5456；ASP.NET 版本：2.0.50727.5456

网络共享没有 web.config。

我尝试了[此处](https://stackoverflow.com/questions/3271521/an-error-occurred-loading-a-configuration-file-failed-to-start-monitoring-chang)提供的解决方案，但这并没有解决问题，并且该站点没有使用模拟。我需要启用模拟吗？这在win2k3上正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:16:45.467

好的，所以根据我们的评论，这听起来像是共享权限问题或 NTFS 权限问题（相同的分辨率，不同的对话框）。

在 IIS6 中，您通常让工作进程运行`NETWORK SERVICE`，这就是您授予访问网络上共享和文件的权限。

在 IIS7.5 中，应用程序池现在在 AppPool 标识下运行，该标识特定于运行网站的应用程序池。此链接应该会有所帮助：[http ://learn.iis.net/page.aspx/624/application-pool-identities/](http://learn.iis.net/page.aspx/624/application-pool-identities/)

不过，作为一个快速修复（尽管我建议阅读它），您可以进入应用程序池，转到高级属性，然后将身份设置回`NETWORK SERVICE`.

# android - Battery Watch / 监控应用程序 Android

> ID：11057532
> 
> 赞同：0
> 
> 时间：2012-06-15T20:08:22.763
> 
> 标签：android

我正在开发一个应用程序来显示手机/平板电脑的电池状态。我让它按原样运行和工作，但是当屏幕关闭时，应用程序以某种方式被“杀死”。

奇怪的是，虽然它在我的 LG 手机上被杀死，但在屏幕关闭/锁定时不会在我的 Galaxy Tab 上被杀死。

源代码如下：

```
public class BatteryLevelActivity extends Activity {
    private TextView batterLevel;
    CharSequence tickerText = "No need to charge at the moment";

public void onCreate(Bundle SavedInstanceState) {
    super.onCreate(SavedInstanceState);
    setContentView(R.layout.main);
    this.registerReceiver(this.mBatInfoReceiver, new IntentFilter(
            Intent.ACTION_BATTERY_CHANGED));
    batterLevel = (TextView) findViewById(R.id.batteryLevel);
};

private void notif(int level) {
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

    int icon;

    long when = System.currentTimeMillis();

    Notification notification = new Notification(icon, tickerText, when);

    Context context = getApplicationContext();
    CharSequence contentTitle = "BatteryWatch";
    CharSequence contentText = "Remaining charge level is " + level + "%";
    Intent notificationIntent = new Intent();
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            notificationIntent, 0);

    notification.setLatestEventInfo(context, contentTitle, contentText,
            contentIntent);

    notification.flags |= Notification.FLAG_FOREGROUND_SERVICE;
    notification.flags |= Notification.FLAG_ONGOING_EVENT;

    final int HELLO_ID = 1;

    mNotificationManager.notify(HELLO_ID, notification);

}

private BroadcastReceiver mBatInfoReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context arg0, Intent intent) {
        int level = intent.getIntExtra("level", 0);
        batterLevel.setText("Battery level is at " + level + "%\n\n"
                + tickerText);
        notif(level);
        tickerText = "";

    }
}; 
```

}

不知何故，我认为我应该有一个称为“onScreenOff”或“onScreenOn”之类的方法，然后可以重新加载应用程序，但我愿意接受有关如何在屏幕关闭时使其运行的建议/锁定。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:21:27.480

您可能想要考虑使用[服务](http://developer.android.com/reference/android/app/Service.html)，因为您希望它长期运行，[这里](http://developer.android.com/guide/topics/fundamentals/services.html)的开发人员指南解释了更多。另外（虽然我找不到链接）想告诉 Android 如果它必须杀死它，它应该重新启动你的应用程序。我不记得这叫什么

** 附加信息 ** 我在上面给出了一些虚假的信息。我相信您可以在 Android 杀死它而不是 Activity 后重新启动服务。在上面的服务开发者指南链接中，它在那里有详细说明。[它被称为粘性启动服务，请参阅扩展服务类](http://developer.android.com/guide/topics/fundamentals/services.html#ExtendingService)小节。

# c++ - XML 解析器包装器

> ID：11057535
> 
> 赞同：1
> 
> 时间：2012-06-15T20:08:36.867
> 
> 标签：c++, xml, xml-parsing

是否有任何类型的 XML 解析器包装库允许在配置或运行时切换实际的 XML 解析器引擎，而不是强迫我在 libxml2、expat 或 Xalan-C++ 之间进行选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:14:36.430

不久前我写了类似的东西：

```
struct xerces;
struct msxml;
struct rapid;
struct tiny;
struct pugixml;

template <typename T> struct platform_manager;
template <typename T> double parse_file(std::string const& f, QueryPerfCounter& qpc);

template<class T>
void demo(std::string const& f, size_t N = 10) {
    platform_manager<T> pm;
    QueryPerfCounter qpc;
    std::vector<double> timing_data;
    timing_data.reserve(N);
    std::generate_n(std::back_inserter(timing_data), N, std::tr1::bind(&parse_file<typename T>, f, qpc));
    adobe::Statistics<double> s(timing_data.begin(), timing_data.end());
    std::cout << "Iteration count: " << s.count() << " Mean time: " << s.mean() << "s. Variance: " << s.variance() << "s.\n";
}
/***************************************************************/
template <> 
struct platform_manager<msxml> {
    platform_manager() {        
        if (FAILED(CoInitialize(NULL)))
            throw std::runtime_error("CoCreateInstance failed");
    }

    ~platform_manager() {
        CoUninitialize();
    }
};

template<>
double parse_file<msxml>(std::string const& f, QueryPerfCounter& qpc) {
    CComPtr<IXMLDOMDocument> pXMLDom;
    HRESULT hr = CoCreateInstance(__uuidof(MSXML2::DOMDocument60), NULL, CLSCTX_INPROC_SERVER, IID_PPV_ARGS(&pXMLDom));
    CComPtr<IXMLDOMParseError> pXMLErr;
    VARIANT_BOOL varStatus;
    qpc.Start();
    if (FAILED(pXMLDom->load(CComVariant(f.c_str()), &varStatus)))
        std::cout << "Parsing failed" << std::endl;
    qpc.Stop();
    return qpc.Duration(QueryPerfCounter::seconds);
}

/***************************************************************/
#include <xercesc/parsers/XercesDOMParser.hpp>
#include <xercesc/dom/DOM.hpp>
#include <xercesc/sax/HandlerBase.hpp>
#include <xercesc/util/XMLString.hpp>
#include <xercesc/util/PlatformUtils.hpp>

#ifdef XERCES_CPP_NAMESPACE_USE
XERCES_CPP_NAMESPACE_USE
#endif 

template <> 
struct platform_manager<xerces> {
    platform_manager() try {
        XMLPlatformUtils::Initialize();
    } catch (const XMLException& toCatch) {
        char* message = XMLString::transcode(toCatch.getMessage());
        std::cout << "Failed to init: " << XMLString::transcode(message) << std::endl;
        XMLString::release(&message);
    }

    ~platform_manager() {
        XMLPlatformUtils::Terminate();
    }
};

template<>
double parse_file<xerces>(std::string const& f, QueryPerfCounter& qpc) {
    double duration = 0;
    std::tr1::shared_ptr<XercesDOMParser> parser(new XercesDOMParser());
    parser->setValidationScheme(XercesDOMParser::Val_Always);
    parser->setDoNamespaces(true);    // optional

    std::tr1::shared_ptr<ErrorHandler> errHandler(new HandlerBase());
    parser->setErrorHandler(errHandler.get());

    try {
        qpc.Start();
        parser->parse(f.c_str());
        qpc.Stop();
        duration = qpc.Duration(QueryPerfCounter::seconds);
    }
    catch (const XMLException& toCatch) {
        char* message = XMLString::transcode(toCatch.getMessage());
        std::cout << "Exception message is: \n"
            << message << "\n";
        XMLString::release(&message);
    }
    catch (const DOMException& toCatch) {
        char* message = XMLString::transcode(toCatch.msg);
        std::cout << "Exception message is: \n"
            << message << "\n";
        XMLString::release(&message);
    }
    catch (...) {
        std::cout << "Unexpected Exception \n" ;
    }
    return duration;
}

/***************************************************************/
#include "rapidxml.hpp"
#include <vector>
#include <fstream>
#include <iterator>

template <> 
struct platform_manager<rapid> {};

enum size_hint { B = 1, KB = 1024, MB = 1024 * 1024 };

double file_size(std::ifstream& f, size_hint factor = MB) {
    f.seekg (0, std::ios::end);
    size_t length = f.tellg();
    f.seekg (0, std::ios::beg);
    return double(length) / factor;
}

template<>
double parse_file<rapid>(std::string const& f, QueryPerfCounter& qpc) {
    double duration = 0;
    rapidxml::xml_document<> doc;
    try {
        qpc.Start();
        std::ifstream myfile(f.c_str());
        myfile.seekg (0, std::ios::end);
        size_t length = myfile.tellg();
        myfile.seekg (0, std::ios::beg);
        std::vector<char> buffer(length);
        myfile.read(& buffer[0], length);
        //buffer.reserve(length);
        //buffer.insert(std::istreambuf_iterator<char>(myfile)), std::istreambuf_iterator<char>( ));
        //std::copy(std::istreambuf_iterator<char>(myfile), std::istreambuf_iterator<char>( ), std::back_insert_iterator(buffer));
        buffer.push_back('\0');
        qpc.Stop();
        duration += qpc.Duration(QueryPerfCounter::seconds);
        //std::cout << "Buffer load time: " << duration << "s" << std::endl;

        //QueryPerfCounter qpc;
        qpc.Start();
        doc.parse<rapidxml::parse_non_destructive>(&buffer[0]);
        qpc.Stop();
        duration += qpc.Duration(QueryPerfCounter::seconds);        
    } catch (rapidxml::parse_error const& e) {
        std::cout << e.what() << std::endl;
    } catch (std::exception const& e) {
        std::cout << e.what() << std::endl;
    }
    return duration;
}
/***************************************************************/
template <> 
struct platform_manager<tiny> {};

template<>
double parse_file<tiny>(std::string const& f, QueryPerfCounter& qpc) {
    tinyxml2::XMLDocument doc;
    qpc.Start();
    doc.LoadFile(f.c_str());
    doc.PrintError(); // emits nothing on success
    qpc.Stop();
    return qpc.Duration(QueryPerfCounter::seconds); 
}
/***************************************************************/
struct banner_printer {
    banner_printer(std::string const& libname, std::string const& input) : lib(libname), in(input) {
        std::cout << "/*+------------------- BEGIN test for " << lib << " with file: " << in << " -------------------+*/" << std::endl;
    }
    ~banner_printer() {
        std::cout << "/*+------------------- END test for " << lib << " with file: " << in << " -------------------+*/" << std::endl;
    }
private:
    std::string lib, in;
};
/***************************************************************/
#include "pugixml.hpp"

template <> 
struct platform_manager<pugixml> {};

template<>
double parse_file<pugixml>(std::string const& f, QueryPerfCounter& qpc) {
    pugi::xml_document doc;
    qpc.Start();
    pugi::xml_parse_result result = doc.load_file(f.c_str());
    qpc.Stop();
    if (!result) {
        std::cout << "XML [" << f << "] parsed with errors, attr value: [" << doc.child("node").attribute("attr").value() << "]\n";
        std::cout << "Error description: " << result.description() << "\n";
        std::cout << "Error offset: " << result.offset << " (error at offset [..." << (result.offset) << "]\n\n";
    }
    return qpc.Duration(QueryPerfCounter::seconds);
}
/***************************************************************/

int main() {
    std::vector<std::string> v = parse_catalog("D:/Work/xml_parsers/perfcompare/benchmark/catalog.txt");
    std::for_each(v.begin(), v.end(), [](std::string const& s) {
    {
        std::ifstream f(s);
        std::cout << "Input file name: " << s << " size: " << file_size(f) << "MB\n\n";
    }
    {
        banner_printer b("xerces", s);
        demo<xerces>(s);
    }
    {
        banner_printer b("rapid", s);
        demo<rapid>(s);
    }
    {
        banner_printer b("tiny", s);
        demo<tiny>(s);
    }
    {
        banner_printer b("pugi", s);
        demo<pugixml>(s);
    }
    {
        banner_printer b("MSXML6", s);
        demo<msxml>(s);
    }
    }
    );
    //expat_demo(argc, argv);
    return 0;
} 
```

它可能会也可能不会帮助您入门。我跳过了标题包含和其他一些琐事。我试图保持界面简单和相同。这意味着一些库需要额外的辅助函数。

# selenium - Thread.sleep 等待窗口打开

> ID：11057537
> 
> 赞同：-1
> 
> 时间：2012-06-15T20:08:43.860
> 
> 标签：selenium, selenium-webdriver

在切换窗口之前，我一直在使用 Thread.sleep。我不喜欢这种方法，但发现它是唯一有效的选择。我所做的尝试是执行一个基本上运行几秒钟的循环，然后我执行 driver.switchTo.switch（窗口）以避免 Thread.sleep。但是，这不允许我进行切换。只有 Thread.sleep 为我做。想知道为什么会这样。任何输入。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-15T22:34:58.783

它到底有什么问题？

您可以使用 WebDriverWait 类，这基本上是一个包装器，它不断尝试评估条件，并且在后台使用 Thread.Sleep()。

Thread.Sleep() 对此很好。

# javascript - 用javascript保存数据

> ID：11057542
> 
> 赞同：2
> 
> 时间：2012-06-15T20:08:53.030
> 
> 标签：javascript, jsp

所以我有一个 .js 文件，2 个不同的 jsp 页面调用。

`.js`文件包含：

```
var savedObj;

function A(obj){ savedObj = obj);

function B(){ alert(savedObj); 
```

`X.jsp`文件调用函数 A 使得 DOM 元素`onchange = functionA(this);`

`Y.jsp`文件调用函数 B 使得 body`onload = function B`

出于某种原因，我在函数 A 中的调试表明 的分配`savedObj = obj`工作正常，但在 中`function B`，`savedObj`打印出 null。

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:18:50.517

这是因为您的*函数 B*在 JSP 的主体完成加载时被调用。这将发生在特定 DOM 元素上的任何更改事件之前。

如果您需要*函数 B*来更新*savedObj*，您需要等待调用它，直到在您的 DOM 元素上触发 change 事件。

**注意：**这假设您的 JSP 包含在同一个呈现的页面中，如果没有，则发生这种情况是因为 JavaScript 状态不会在页面之间保持不变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:32:35.633

使用 cookie 存储值无疑是使值在各个页面中持续存在的最佳方式。如果您不想进入 cookie，您可以使用 javascript 编写新页面来代替当前页面并保留该值，但它很混乱，您最好花时间学习 cookie。

# wcf - WCF 客户端中的 SoapAction 配置在哪里？

> ID：11057546
> 
> 赞同：0
> 
> 时间：2012-06-15T20:09:04.623
> 
> 标签：wcf, wcf-client

我需要我的 wcf 客户端使用空白的 SoapAction 与服务进行通信，因为该服务被配置为通过肥皂消息的正文分派操作。并且操作合同被装饰如下，因此它不需要肥皂动作。我猜WCF默认发送一个soapaction。wcf 客户端中是否有任何选项可以发送空白的soapaction？谢谢你的帮助！

[OperationContract(Action="")]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:59:01.733

在您的客户端代码上使用相同的 OperationContract 属性，即 reference.cs。更多细节[在这里](http://webservices20.blogspot.co.il/2008/10/who-moved-my-service-reference.html)。

# php - PHP，如何打印新行字符串

> ID：11057552
> 
> 赞同：-1
> 
> 时间：2012-06-15T20:09:27.210
> 
> 标签：php

例如，我如何在 php 中创建一个新行

```
$message='Name and Surname:'.$name.'  '.'Birthday: '.$Birthdate.'  '.' Nationality: '.$Nationality; 
```

输出：

```
Name and Surname:LULZIM    Birthday: 1987       Nationality: Macedonia 
```

我想要的是：

```
Name and Surname:LULZIM
Birthday: 1987 
Nationality: Macedonia 
```

顺便说一句，此输出在电子邮件中是这样的，因为我正在通过电子邮件发送所有这些数据，我尝试添加 \n
但没有奏效：S

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:10:47.900

"\n" 将起作用。您必须使用双引号而不是单引号。如果你想在 html 中换行，你需要 echo `<br />`，你可以用单引号或双引号来做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T20:11:05.403

添加`<br>`：

```
$message='Name and Surname:'.$name.'  '.'<br>Birthday: '.$Birthdate.'  '.' <br>Nationality: '.$Nationality; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T23:02:53.630

要创建一个实际的新行，请在双引号中使用“\n”。（或使用 PHP_EOL）。

要在 HTML 中创建新行，请使用“<br />”。（这不是语义 HTML，很多人会争辩使用 <p></p> 标签。

```
$message = 'Name and Surname: ' . $name . "\n<br />"
         . 'Birthday: ' . $Birthdate . "\n<br />"
         . 'Nationality: ' . $Nationality . "\n<br />"; 
```

您还可以使用以下方法简化代码：

```
$message="Name and Surname: $name<br />\nBirthday: $Birthday<br />\n Nationality: $Nationality<br />\n" 
```

# drupal - 需要 drupal 专家的帮助

> ID：11057555
> 
> 赞同：0
> 
> 时间：2012-06-15T20:09:48.460
> 
> 标签：drupal

我有一个网站 www.example.com，它是一个 druapal 6 网站。效果很好，从来没有任何问题。

我编写了一个独立的 PHP 应用程序，我没有时间或要求转换为 drupal 模块。

我想在 www.example.com/myPhpApp/* 上托管该应用程序

这会和drupal网站有冲突吗？如果我在同一个地址创建一个 drupal 页面会发生什么？

非常感谢高级

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:40:03.883

只要您不在新文件夹中创建路径，这不会混淆 Drupal。如果您有一个处理请求的 .htaccess 文件，那么 Drupal 很可能无法接管该页面。如果你有一个文件夹和一个 Drupal 路径，文件夹将是第一选择。

# iphone - 如何将 ITF 阅读器添加到我的应用程序

> ID：11057566
> 
> 赞同：0
> 
> 时间：2012-06-15T20:10:44.220
> 
> 标签：iphone, xcode, barcode-scanner

我有兴趣为 iPhone 开发一个可以扫描和读取 ITF 代码的应用程序，例如衣服标签上的代码。

我想知道是否有我可以使用的 SDK？

我应该联系零售商以获取 ITF 条形码吗？

我应该如何将这些 ITF 条形码插入我的应用程序？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-15T20:39:15.303

看看[ZXing](http://code.google.com/p/zxing/)。早期 iPhone 型号的糟糕摄像头可能会妨碍...

# c# - 我应该走多远来处理代码中的网络问题？

> ID：11057568
> 
> 赞同：3
> 
> 时间：2012-06-15T20:10:56.150
> 
> 标签：c#, sql, network-programming, recovery

我的客户端网络非常糟糕，包括网关上的错误映射和别名问题。有时他们会顺利运行几天，有时我们的服务会失败，因为它们无法连接到数据库或连接被神秘地断开。

程序（即服务）应该恢复或重试多远？让他们的网络人员让它正常工作是否合理，或者我应该自己承担起它的脆弱性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:16:55.813

1) 是的，期望他们的网络能够正常工作是合理的……你不会告诉别人他们买的车坏了，因为他们没有路可以开，对吗？

2）也就是说：防御性编程。当你造一辆汽车时，你不能指望一切都是一条完美的州际公路。

更具体地说，我喜欢在我的系统中构建重试机制：我将在“可重试”逻辑中包装一些东西，它可以让您指定重试次数。通常，重试周期将具有二次回退：例如，它在 n*n 秒后尝试，对于 1..n，其中 n 是重试次数，或者使用 fib(n)，所以你有类似 1,1,2 的东西， 3.5 秒重试。回退有助于防止对上游资源造成不必要的压力

如果在一定次数的重试后，您可以抛出异常（可以被捕获并通知用户或其他模块错误）或记录，具体取决于严重性。

# c# - C# dotnet Web 应用程序：Dll 的 xml 配置文件在发布时丢失

> ID：11057570
> 
> 赞同：3
> 
> 时间：2012-06-15T20:11:06.963
> 
> 标签：c#, iis, dll, .net-4.0

我有点失落！

我有一个 dll，它使用 xml 配置文件来获取一些数据库连接信息。dll 在它自己的目录中查找 xml 配置文件，我根本无法更改 dll。

每次构建项目时，我都必须手动将配置文件复制到 Temporary ASP.NET Files 文件夹中的某个文件夹中。（我不明白这一点，但我可以接受这个手动更改）

问题是当我发布项目时，我不知道将配置文件复制到哪里？

有人可以指出我正确的方向吗？或者也许告诉我一种可以将 xml 配置文件“绑定”到 bin 文件夹的方法？？？

沃宁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:19:37.100

.NET 配置文件可能难以管理。它在 webapp 中的工作方式是`Web.config`它将取代任何依赖项的`app.config`文件（当你说“DLL”时，我假设你正在谈论这个。）

基本上，在 .NET 中，所有配置信息都是从主应用程序项目中提取的。

看：

[App.config 似乎被忽略了](https://stackoverflow.com/questions/4531506/app-config-seems-to-be-ignored)

和

[来自 App.config 的配置未正确提取](https://stackoverflow.com/questions/4472232/configuration-from-app-config-isnt-being-pulled-correctly)

最后：

[web.config 会替代 app.config 吗？](https://stackoverflow.com/questions/7628985/does-a-web-config-substitute-app-config)

可能会帮助你弄清楚你需要知道什么。

**更新**：对您的问题进行进一步搜索，您正在合并到 .Net 解决方案中的代码可能正在使用“过时” `ConfigurationSettings`，这将要求您`System.Configuration`在您的引用文件夹中添加一个引用（右键单击项目->“添加引用”并转到 .NET 选项卡并选择`System.Configuration`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:14:42.480

在配置的属性中将“复制到输出目录”设置为“始终复制”。然后 Visual Studio 将在每次构建后自动复制配置文件，并且它也会正确发布。

# c# - 如何使用子类型鉴别器？

> ID：11057571
> 
> 赞同：2
> 
> 时间：2012-06-15T20:11:13.090
> 
> 标签：c#, sql-server, subtype, discriminator, supertype

假设我有一个包含许多子类型表的超类型表。我有兴趣使它们成为*不相交*的子类型，因为超类型表仅指向每行可能的子类型表之一。在网上我遇到了*对子类型鉴别*器的描述，它是放入超类型表中的一个新列，它是一个小代码（通常是一个字符），用于标识该行属于哪个子类型。

在实践中我找不到任何实际的例子。如果我在 C# 中工作，我想查询表的子类型鉴别器列，然后针对一些键->值列表（[子类型鉴别器]->subtype_table_name）进行测试以创建正确的 SQL 来加入正确的表？

或者，SQL Server 中是否已经为此目的提供了一些视图/SQL 查询语法？

基本上，我想知道我必须在哪个级别实际执行逻辑以使鉴别器有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:20:04.580

您的查询将包括以下内容：

```
select *
from Root
left join Child1 on ... AND Root.Discriminator = 'C1'
left join Child2 on ... AND Root.Discriminator = 'C2' 
```

并且希望 SQL Server 在开始从子表中读取之前评估附加连接谓词。但是，这并不能保证。

这种模式的好处是它可以推广到任意查询，即使对于具有不同子类型的多行也是如此。

# c#-4.0 - Securestring 和其他隐藏字符串数据的方法

> ID：11057572
> 
> 赞同：0
> 
> 时间：2012-06-15T20:11:14.540
> 
> 标签：c#-4.0, securestring

我最近遇到了 SecureString，但正如你们大多数人所知，您将无法使用它，因为您想要使用的大多数函数都接受字符串作为参数，而不是 SecureString。

那么如何使用 SecureString 呢？

如果我需要跨多个程序传递字符串，如果字符串是敏感信息，那么与纯字符串相比，字节数组是否更安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:16:36.140

如果数据是敏感数据，请对其进行加密。

查看[`System.Security.Cryptography`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aspx)命名空间。

支持多种加密算法，但无法向您建议使用哪一种，因为您的情况的具体安全要求尚不清楚。

# linq - 如何创建 LINQ 视图？

> ID：11057573
> 
> 赞同：1
> 
> 时间：2012-06-15T20:11:21.583
> 
> 标签：linq, entity-framework, entity-framework-4.1, entity-framework-4.3

我的团队正在使用 Entity Framework 4.3.0 - Code Only 和 POCO 类作为我们的 ORM。现在我们使用 DBSets of Classes 来访问我们的“表”

```
Public Property Customers As DbSet(Of Customers) 
```

但是我们经常根据 LINQ 中的 IsDeleted 列进行软删除，并相应地过滤我们的选择语句：

```
Dim LiveCustomers =
    From C In EM.Customers
    Where C.DeleteFlag = False 
```

我真正想做的是，而不是编写每个查询来包含此过滤器，而是创建一些提供过滤集的较低级别的属性（可能在我们继承的 DbContext 级别），同时保持强类型。

我试过这个：

```
Public Property Customers As DbSet(Of Customer)

Public Property Customers_Live As DbSet(Of Customer)
    Get
        Return From C In Customers
                Where C.DeleteFlag = False
    End Get
    Set(value As DbSet(Of Customer))
        Customers = value
    End Set
End Property 
```

然而，这给了我这个错误：

**不支持每种类型的多个对象集。对象集“Customers”和“Customers_Live”都可以包含“ *_* _.Customer”类型的实例。**

对谷歌的快速检查产生了这个有希望的结果（[如何：使用每种类型的多个实体集查询对象](http://msdn.microsoft.com/en-us/library/bb738586.aspx)）但是在更新我的连接字符串之后，我仍然遇到同样的错误。

```
 <add name="EntityManager"
       providerName="System.Data.SqlClient"
       connectionString="
          Data Source=xxxxxx;
          Initial Catalog=xxxxxx;
          User Id=xxxxxx;
          Password=xxxxxx;
          MultipleActiveResultSets=True"/> 
```

所以我的问题是，我怎样才能有效地创建一个允许我应用过滤的 LINQ 视图，而不会对上游使用产生太大影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:18:19.597

像这样更改您的属性：

```
Public Property Customers As DbSet(Of Customer)

Public Property Customers_Live As IQueryable(Of Customer)
    Get
        Return From C In Customers
                Where C.DeleteFlag = False
    End Get
End Property 
```

这略有不同，因为您不会拥有`Add()`or之类的东西`Remove()`，但是对于您通常不希望拥有这种功能的视图。如果你想添加一个新的，或者删除一个，你应该使用 normal`Customers`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:34:52.133

你可以让你的 POCO 类继承自一个新类，该类有一个新方法可以为你进行过滤。在新类中添加这样的东西 --PSEUDO CODE!--

```
Public Function Filtered() as IEnumerable(Of Out T)
    Return (From x In Me Where x.DeleteFlag).ToList()
End Function 
```

你可以这样称呼它： Dim LiveCustomers = From C In EM.Customers.Filtered

或者，您可以在调用 linq 查询时创建一个接口并进行依赖注入。你必须谷歌那个:)

# mysql - MySQL 在同一查询上的索引使用不一致

> ID：11057576
> 
> 赞同：2
> 
> 时间：2012-06-15T20:11:45.103
> 
> 标签：mysql, indexing

我有一个超过 900 万行的表。我有一个使用索引的 SELECT 查询。这是查询：

```
SELECT `username`,`id`
FROM `04c1Tg0M`
WHERE `id` > 9259466
AND `tried` = 0
LIMIT 1; 
```

该查询执行得非常快（0.00 秒）。这是该查询的解释：

```
+----+-------------+----------+-------+-----------------+---------+---------+------+-------+-------------+
| id | select_type | table    | type  | possible_keys   | key     | key_len | ref  | rows  | Extra       |
+----+-------------+----------+-------+-----------------+---------+---------+------+-------+-------------+
|  1 | SIMPLE      | 04c1Tg0M | range | PRIMARY,triedex | PRIMARY | 4       | NULL | 10822 | Using where |
+----+-------------+----------+-------+-----------------+---------+---------+------+-------+-------------+ 
```

现在这里是相同的查询，只是我要将 id 更改为 6259466：

```
SELECT `username`,`id`
FROM `04c1Tg0M`
WHERE `id` > 5986551
AND `tried` = 0
LIMIT 1; 
```

该查询需要 4.78 秒才能完成。这就是问题。这是该查询的解释：

```
+----+-------------+----------+------+-----------------+---------+---------+-------+---------+-------------+
| id | select_type | table    | type | possible_keys   | key     | key_len | ref   | rows    | Extra       |
+----+-------------+----------+------+-----------------+---------+---------+-------+---------+-------------+
|  1 | SIMPLE      | 04c1Tg0M | ref  | PRIMARY,triedex | triedex | 2       | const | 9275107 | Using where |
+----+-------------+----------+------+-----------------+---------+---------+-------+---------+-------------+ 
```

这里发生了什么，我该如何解决？这是我的索引：

```
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table    | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| 04c1Tg0M |          0 | PRIMARY  |            1 | id          | A         |     9275093 |     NULL | NULL   |      | BTREE      |         |
| 04c1Tg0M |          1 | pdex     |            1 | username    | A         |     9275093 |     NULL | NULL   |      | BTREE      |         |
| 04c1Tg0M |          1 | pdex     |            2 | id          | A         |     9275093 |     NULL | NULL   |      | BTREE      |         |
| 04c1Tg0M |          1 | pdex     |            3 | tried       | A         |     9275093 |     NULL | NULL   | YES  | BTREE      |         |
| 04c1Tg0M |          1 | triedex  |            1 | tried       | A         |           0 |     NULL | NULL   | YES  | BTREE      |         |
| 04c1Tg0M |          1 | triedex  |            2 | id          | A         |     9275093 |     NULL | NULL   |      | BTREE      |         |
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

这是我的表结构：

```
| 04c1Tg0M | CREATE TABLE `04c1Tg0M` (
`id` int(20) NOT NULL AUTO_INCREMENT,
`username` varchar(50) NOT NULL,
`tried` tinyint(1) DEFAULT '0',
PRIMARY KEY (`id`),
KEY `pdex` (`username`,`id`,`tried`),
KEY `triedex` (`tried`,`id`)
) ENGINE=MyISAM AUTO_INCREMENT=9275108 DEFAULT CHARSET=utf8 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:57:23.050

第一个 SQL 返回 10822 行，而第二个 SQL 返回 9275107 行！

在第二个查询中使用主键“id”索引并不是很有用，因为无论如何您都必须进行全表扫描。

MySQL 的基于成本的优化器认为，在第二次查询的情况下，最好使用“已尝试”的索引。

如果必须进行全表扫描，最好不要使用索引，因为索引构成额外的磁盘读取。

您可以在查询中使用“使用索引”或“强制索引”来提示优化器是否使用索引。

还通过定期分析您的表来更新统计信息，以便基于成本的优化器正常工作。

# asp.net-mvc-3 - 为什么 IntegerAttribute 不能解析 ErrorMessageResourceType？

> ID：11057578
> 
> 赞同：0
> 
> 时间：2012-06-15T20:11:52.417
> 
> 标签：asp.net-mvc-3, localization, attributes, data-annotations

我正在做 asp.net MVC3 项目，在我的类模型 (CarModel) 中，我放置了一个 Integer 属性来验证属性 ModelYear，我尝试根据本地化自定义错误消息，我的代码：

```
[Integer(ErrorMessageResourceName = "OnlyNumberValidator", ErrorMessageResourceType = typeof(AddNewCar))]
public Nullable<int> ModelYear { get; set; } 
```

但它没有收到我的错误消息，只是显示了默认消息“字段 ModelYear 必须是数字”

注意：它适用于必需属性！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:27:26.980

请检查您的参考资料并确保您在 Nuget 包中使用了`DataAnnotationsExtensions.Mvc`除了。`DataAnnotationsExtensions`如果没有 Mvc 特定库，它将产生与您当前遇到的相同的输出。

# c - 这段代码在 C 中的含义是什么？

> ID：11057579
> 
> 赞同：4
> 
> 时间：2012-06-15T20:11:53.470
> 
> 标签：c, bison

在某些 Bison 代码中，以下行是什么意思？

```
#define YY_DECL extern "C" int yylex(); 
```

我知道`#define`命令，但我不了解整个命令。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:18:55.750

这意味着`YY_DECL`将扩大到

```
extern "C" int yylex(); 
```

这实际上是 C++，而不是 C；当你用 C++ 编译器编译这个文件时，它声明该函数`yylex`必须用“C 链接”编译，以便 C 函数可以毫无问题地调用它。

如果您不使用 C++ 编程，这在很大程度上与您无关，但您可能会在尝试与 C++ 兼容的库的 C 头文件中遇到类似的声明。C 和 C++ 可以混合在一个程序中，但它需要这样的声明才能使函数很好地协同工作。

`#ifdef __cplusplus`周围可能有一个`#define`；这是一个特殊的宏，用于指示 C++ 编译器的编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T20:20:13.497

```
#define YY_DECL extern "C" int yylex(); 
```

定义一个宏，代表在 C++ 程序中具有“C”链接`YY_DECL`的函数的声明，不接受任何参数并返回一个.`yylex``int`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T20:19:13.700

`#define`- 为预处理器声明一个新变量的预处理器指令。但你知道的。

`YY_DECL`- 变量的名称。

`extern "C"`- 告诉编译器以下代码是纯 C。C 和 C++ 之间有很多差异，一般不能混合 C 和 C++ 代码。如果将其包含在声明中，它允许您在 C++ 中使用 C。编辑：代码实际上不需要是纯 C，但它会这样链接。但最常见的使用模式是使 C 代码与 C++ 兼容。感谢@larsmans 的更正。

`int yylex()``yylex`-以未定义数量的参数和返回类型命名的函数的声明`int`

因此，整个命令将 C 函数声明分配给预处理器变量。

# c# - WebGrid：无法从“lambda 表达式”转换为“System.Func” '

> ID：11057583
> 
> 赞同：1
> 
> 时间：2012-06-15T20:12:17.493
> 
> 标签：c#, asp.net-mvc-3, razor, lambda, webgrid

我正在尝试处理在 ASP.NET MVC3 WinGrid 中呈现时可能为空的 DateTime 的情况。尝试设置 WebGridColumn 时出现错误。我有一个正在工作，一个没有。正在工作的想法较少，因为 html 是在辅助函数中生成的。我无法弄清楚为什么理想的那个不起作用。

这是一个有效的：

```
$gridSummary.Column("OngoingDate", 
    header: "Ongoing", 
    format: Html.DateTimeActionLink, 
    style: "ongoingDate")

public static object DateTimeActionLink(this HtmlHelper htmlHelper, dynamic item)
{
    DateTime? linkDateTime = item.OngoingDate;
    if (linkDateTime != null && linkDateTime.HasValue)
    {
        var x = linkDateTime.Value.ToString("MM/dd/yyyy");
        return LinkExtensions.ActionLink(htmlHelper, x, "Edit", "MdsAsmtSectionQuestions", new { mdsId = item.OngoingId }, null);
    }

    return MvcHtmlString.Empty;
} 
```

这是不工作的一个：

```
 $gridSummary.Column("AssessmentInfo", header: "Open Type | ARD",
                        format: (item) =>
                        {
                            return Html.DateTimeActionLink(
                                item.AssessmentDate,
                                "MM/dd/yyyy",
                                x => Html.ActionLink(item.AssessmentInfo + " | " + x, "Edit", "MdsAsmtSectionQuestions", new { mdsId = item.OngoingId }, null));
                        },
                        style: "assessmentInfo")

    public static object DateTimeActionLink(this HtmlHelper htmlHelper, dynamic item, string format, Func<string, MvcHtmlString> actionLink)
    {
        Nullable<DateTime> linkDateTime = item;

        if (linkDateTime != null && linkDateTime.HasValue)
            return actionLink(linkDateTime.Value.ToString(format));

        return MvcHtmlString.Empty;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:23:33.860

代替：

```
...
format: (item) =>
                        {
                            return Html.DateTimeActionLink(
                                item.AssessmentDate,
                                "MM/dd/yyyy",
                                x => Html.ActionLink(item.AssessmentInfo + " | " + x, "Edit", "MdsAsmtSectionQuestions", new { mdsId = item.OngoingId }, null));
                        }
... 
```

尝试：

```
...
format: (item) =>
                            Html.DateTimeActionLink(
                                    //added cast
                                    (Nullable<DateTime>)(item.AssessmentDate),
                                    "MM/dd/yyyy",
                                    //added cast
                                    x => Html.ActionLink((string)(item.AssessmentInfo) + " | " + x, "Edit", "MdsAsmtSectionQuestions", new { mdsId = item.OngoingId }, null));
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T03:58:02.553

您不能在当前版本的 Razor 中使用 lambda 表达式。基本的很酷，但除此之外它们就会崩溃。我认为 Razor 2.0 支持它，但我必须检查:)

使用 Html 助手没有任何问题。这就是他们的目的。考虑到您基本上是在调用相同的代码。如果您打算在另一个位置使用辅助方法，那么您将不会有代码重复。保持干燥。

另外，我不确定为什么你有一个`$`我相当肯定你需要一个`@`符号，因为它是 ac# 方法而不是 jQuery。

# iphone - 使用 InfiniTabBar（一个 UIScrollView 子类）并将 UINavigationControllers 推入其中

> ID：11057584
> 
> 赞同：1
> 
> 时间：2012-06-15T20:12:18.063
> 
> 标签：iphone, objective-c, uinavigationcontroller, uitabbarcontroller

这个问题是关于 InfiniTabBar 的使用和使用“子视图控制器”的问题

这是设置：

我有一个 RootViewController，它添加了一个 InfiniTabBar ( [https://github.com/iosdeveloper/InfiniTabBar](https://github.com/iosdeveloper/InfiniTabBar) ) 的实例作为子视图。当用户单击其中一个 UITabBarItem 时，您可能希望加载与该 UITabBarItem 关联的 ViewController。

但是，在查看了有关在一个屏幕上使用多个视图控制器的 Stack Overflow 问题（[多个视图控制器同时在屏幕上？](https://stackoverflow.com/questions/2423858/multiple-view-controllers-on-screen-at-once)）之后，我对如何使用 InfiniTabBar 产生了疑问。

有了这些信息，在我看来，对于单击 InfiniTabBar 上的每个按钮，都必须加载一个新的视图控制器。然后，该 View Controller 必须创建并将其自己的 InfiniTabBar 实例添加为子视图。否则，您将遇到一个场景，即有多个 View Controller 控制一个屏幕。

我的问题是：要正确使用 InfiniTabBar，我是否必须违反此规则？“您创建的每个自定义视图控制器对象都负责管理一个屏幕的内容。......”

**编辑：**

问题的改写：如果 InfiniTabBar 是 UIScrollView 的子类，如何正确使用它来代替 UITabBarController？后者可以是 rootViewController，因为它是 UIViewController 的子类，而前者不能。

# jquery - jQuery UI 选项卡与除 firefox 之外的每个浏览器中的 jquery 滑块冲突 - 多个 jQuery 实例

> ID：11057585
> 
> 赞同：0
> 
> 时间：2012-06-15T20:12:23.687
> 
> 标签：jquery, jquery-ui, jquery-plugins

我一直在尝试使用 jquery 滑块插件将 jQuery UI 选项卡添加到页面。它在 Firefox 中看起来不错，但在其他所有浏览器中滑块都不起作用。此外，滑块仅适用于 ff 的多个 jQuery 实例（我知道这很糟糕）。另外，我在标签中运行谷歌提要控制。相关代码贴在下面。您还可以在[http://bit.ly/M0xIMM](http://bit.ly/M0xIMM)和滑块 js 处查看页面：http: [//bit.ly/KAe8Mf](http://bit.ly/KAe8Mf)任何帮助将不胜感激，谢谢！

在头上：

```
<script type="text/javascript" src="/js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="/js/jquery-ui-1.7.custom.min.js"></script>
<script type="text/javascript">
    $(function() {
        var $tabs = $('#tabs').tabs();
        $(".ui-tabs-panel").each(function(i){
          var totalSize = $(".ui-tabs-panel").size() - 1;

          if (i != totalSize) {
              next = i + 2;
                  $(this).append("");
          }

          if (i != 0) {
              prev = i;
              $(this).append("");
          }
        });
    });
</script> 
```

在身体里：

```
<script type="text/javascript" src="/templates/rhuk_milkyway/js/jquery-1.3.2.min.js">    </script>
   <script type="text/javascript" src="/modules/mod_ds_banner_slide/mod_ds_banner_slide/mbScrollable.js"></script>
<script type="text/javascript">
jQuery.noConflict();
jQuery(document).ready(function() {
    jQuery("#dsbs_Homebanner").mbScrollable({
        width: 950,
        elementsInPage: 1,
        elementMargin: 4,
        height: 175,
        controls: "#dsbs_Homebannercontrols",
        slideTimer: 600,
        autoscroll: true,
        scrollTimer: 6000        });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:59:51.327

您正在使用旧版本的 jQuery 和新版本的 UI。只需使用最新的稳定版 jQuery 并消除 1.3.2 的两个版本。您不需要调用任何脚本`head`（可能除了 Google Analytics）。将所有这些 Javascript 放在`body`. Mootools 可能与 jQuery 冲突。确保您先致电[Mootools](http://www.alltogetherasawhole.org/profiles/blogs/preventing-jquery-and-mootools)

# appearance - Ultrawingrid - 行外观问题

> ID：11057591
> 
> 赞同：1
> 
> 时间：2012-06-15T20:12:56.183
> 
> 标签：appearance, ultrawingrid

我面临行的外观问题。基本上，我在 InitilizeLayout 中添加了两种外观，一种用于 BackColor，另一种用于 Forecolor，并在 InitilizeRow 中使用了 Backcolor 外观。在那之前它工作得很好。

但是当我在某些特定行上使用前景色时，单击一个按钮，它会改变网格所有行的前景色。

我正在使用以下代码：

**初始化布局代码：**

```
lRowColorAppereance = e.Layout.Appearances.Add("GridBackColor")
lRowColorAppereance.BackColor = Color.LightGray
lRowColorAppereance.FontData.Bold = DefaultableBoolean.True

lIsMasterDBAppereance = e.Layout.Appearances.Add("IsMasterDB")
lIsMasterDBAppereance.ForeColor = Color.DarkGreen 
```

**初始化行代码：**

```
e.Row.Appearance = grdData.DisplayLayout.Appearances("GridBackColor") 
```

现在，当我使用以下代码将第 0 行的 Forecolor 更改为 lIsMasterDBAppereance.ForeColor 或 Color.DarkGreen 时，单击一个按钮，它将所有行的 Forecolor 更改为 DarkGreen。

**按钮点击事件代码：**

```
lugrAddedRow.Appearance.ForeColor = grdData.DisplayLayout.Appearances("IsMasterDB").ForeColor

OR

lugrAddedRow.Appearance.ForeColor = Color.DarkGreen 
```

但我不想更改所有行的前景色，我只需要更改某些特定行的前景色。

如果我错过了什么，你能建议一下吗？

# mysql - 确定文本中有多少字符在 MySQL 中的另一个文本条目中

> ID：11057597
> 
> 赞同：0
> 
> 时间：2012-06-15T20:13:28.017
> 
> 标签：mysql

我有一个表，其中有一列“文本”类型。我知道我可以使用简单的 select 语句比较两个条目，看看它们是否相同。有没有办法比较两个条目并返回它们的相似程度？更具体地说，它可以说两者之间有多少个字符不同？

例如，假设一个条目是：

```
This is a line. 
```

另一个是：

```
This is a line.  And another. 
```

我相信我可以写一个选择语句，说明第一个包含在第二个中。但是有没有办法提醒我第一个在第二个并且第二个有 15 个额外的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:15:40.710

尝试使用 Levinshtein 距离[http://www.artfulsoftware.com/infotree/queries.php#552](http://www.artfulsoftware.com/infotree/queries.php#552)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:18:28.937

您可以使用 LENGTH 和 LIKE 来执行此操作。例如：

```
INSERT INTO test VALUES("HELLO WORLD");
select LENGTH(name)-length("HELLO") from test where name like "%HELLO%"; 
```

因此，您需要以编程方式将 HELLO 替换为您想要搜索的任何字符串。

那是你要找的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:20:51.320

您可以简单地测量两者作为字符串的长度`char_length()`并减去差异吗？ [MySQL：字符长度（）](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_char-length)

（注意`length()`并`char_length()`返回不同的值！）

# jquery - 此画廊的淡入淡出

> ID：11057605
> 
> 赞同：0
> 
> 时间：2012-06-15T20:14:36.280
> 
> 标签：jquery, gallery, fadein, fadeout

我用拇指和主要照片做了一个画廊，这是代码：

```
.click(function () {
    $('span.arrow').remove();  
    $('#frtitle').html($(this).find("img").attr('title'));
    $('#desc').html($(this).find("img").attr('alt'));         
    $(this).append('<span class="arrow"></span>');
    $('#slideshow-main li').removeClass('active').animate({opacity: 0.0}, 1000);        
    $('#slideshow-main li.' + $(this).attr('rel')).addClass('active').animate({opacity: 1.0}, 1000);    
    return false;
}); 
```

但是淡入淡出效果不好，它会快速显示背景和淡出

你可以看看[这里](http://misslebanon2010.com/urbana/new/index.php)的主画廊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T22:07:16.153

在我看来，图像甚至不会淡出。图像似乎立即消失为白色背景，然后下一个图像逐渐淡入。我猜你正在设置`display: none`或`visibility: hidden`删除`active`课程。

`active`我认为在更改类属性或稍后分配它之后，您正在寻找的是更接近此的东西（除了 Stefan Fandler 提到的） ：

```
$('#slideshow-main li').animate({opacity: 0.0}, 1000); 
```

...然后不会让图像在课堂上消失。

另一种选择是使用[CSS3 过渡](http://www.w3schools.com/css3/css3_transitions.asp)来更改不透明度。类似于以下内容：

```
transition: opacity 1.5s linear;      
-webkit-transition: opacity 1.5s linear;  
-moz-transition: opacity 1.5s linear;  
-o-transition: opacity 1.5s linear;  
-ms-transition: opacity 1.5s linear; 
```

此选项不需要使用 JavaScript 来淡入和淡出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:38:53.193

我看起来在 fadeOut 完成之前开始淡入淡出。

您可以将回调函数传递给`animate()`-function。当动画完成时，它会被调用:)

```
$('#slideshow-main li').removeClass('active').animate({opacity: 0.0}, 1000, function() {        
    $('#slideshow-main li.' + $(this).attr('rel')).addClass('active').animate({opacity: 1.0}, 1000);
}); 
```

# c++ - 如何将端口/套接字与 p2p 暗网应用程序直接建立隧道

> ID：11057610
> 
> 赞同：0
> 
> 时间：2012-06-15T20:14:49.443
> 
> 标签：c++, sockets, p2p

我正在构建一个应用程序，登录后会将您连接到某些 IP 地址，这些地址也将运行相同的应用程序。

我认为我应该使用的方法是直接隧道，但正如我所说，我对 c++ 有点陌生，我有一般的编码技能，我已经筛选了很多论坛和网站，但我仍然不清楚什么是最好的前进的方向是达到要求。

连接的原因是在连接到程序管理员时启用安全聊天、文件传输和自动更新软件。

所有安装了该应用程序的用户一旦获得授权，将连接到管理客户端，然后从该客户端连接到的所有可用 IP 都将可供从属客户端使用，这将增加所有用户可用的网络大小。

所以应用程序需要能够处理端口，但不能通过服务器，而是直接的。

理想情况下，连接也必须加密。

我有点在寻找应用程序 RetroShare 的功能，但在文本应用程序中。

（这是在 Dev C++ 中使用 C++）

所以只是回顾一下，我应该使用什么方法来实现上述目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:21:12.827

我会先看一下[SDL net](http://content.gpwiki.org/index.php/SDL%3aTutorial%3aUsing_SDL_net)，如果您以前从未做过任何套接字编程，那么学习它真的很简单。对于安全连接，您可能希望从 TCP 开始，然后一旦掌握了网络编程的窍门，就开始研究其他协议。

希望这有帮助！还有祝你好运。

# html - 图像下出现神秘缝隙

> ID：11057611
> 
> 赞同：5
> 
> 时间：2012-06-15T20:14:50.647
> 
> 标签：html, css, image

> **可能重复：**
> [锚标记底部的空白](https://stackoverflow.com/questions/3197601/white-space-at-bottom-of-anchor-tag)

在此处查看此示例页面.. [http://denise.brixwork.com/](http://denise.brixwork.com/)

出于某种奇怪的原因，在该家庭的那张照片下，在包含图像的灰色边框 (5px #333) div 之前有一个间隙。我删除了所有边距、填充等，但它仍然不会消失。:(

如果没有在 #index_content div 上设置固定高度，我不希望以后必须重新调整图像大小（这对我来说意味着工作量加倍），如何在保持弹性的同时消除该间隙？

我的 HTML 代码：

```
<div id="index_content_container">
    <div id="index_content">
        <img src="http://denise.brixwork.com/images/index_photo.jpg" alt="Real Whistler Living - Real Estate for the Next Generation" />
    </div>
    <div class="clear"></div>
</div> 
```

CSS：

```
/* INDEX PAGE SPECIAL CSS */
#index_content_container {
    position: relative;
    width: 970px;
    border: 5px solid #e1bb14;
    left: -20px;
    display: block;
    float: left;
    padding: 0px;
    margin: 0px;
}

#index_content {
    position: relative;
    width: 960px;
    border: 5px solid #333;
    float: left;
    display: block;
    padding: 0px;
    margin: 0px;
}

#index_content img {
    padding: 0px;
    border: none;
    margin: 0px;
    clear: none;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T20:20:28.190

试试这个：

```
#index_content img{
padding: 0px;
border: none !important;
margin: 0px;
clear: none;
display: block;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T20:23:26.147

你只需要`display: block`在你的`img`标签中，没有别的=）

# image - 在 drupal 中加载图像时出现错误 404

> ID：11057618
> 
> 赞同：0
> 
> 时间：2012-06-15T20:15:19.920
> 
> 标签：image, drupal, http-status-code-404

我的服务器的 PHP 最近更新到了 5.3 版。升级后，安装在我的站点上的 drupal 不会加载位于“/sites/default/files/”目录中的图片。对于存储在此路径中的每张图片，它都会引发 404 错误。我对此很困惑。我必须对我的 .htaccess 文件进行任何更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:26:24.523

我发现我的“sites/default/files/”文件夹中有另一个 .htaccess 文件。我的网络托管公司要求我删除 FollowSymLink。但我不知道我的 drupal 文件夹中还有另一个 .htaccess 文件。我删除了它，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T01:43:54.033

升级php时是否可能更改了目录权限？这将是最简单的解释，因为我不知道 php 5.3 本身会导致这种情况发生的原因。

# html - 右浮动内容低于左浮动内容

> ID：11057620
> 
> 赞同：1
> 
> 时间：2012-06-15T20:15:27.197
> 
> 标签：html, css, css-float

我有以下 HTML：

```
<div id="page_title">
  <div id="left_title>
   <h1> MY LARGE TITLE </h1>
  </div>
  <div id="page_help">
TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST
TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST
TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST
  </div>
</div> 
```

以及以下 CSS：

```
#page_title
{
  width:960px;
  margin: 20px auto 0;
  overflow:hidden;
}
#left_title
{
  float:left
}
#page_help
{
  float:right
} 
```

当**page_help** div 有很多内容时，它在**left_title**下，这不是我想要的。我希望 left_title 始终位于 page_help 容器的左侧。这张图片显示了（不想要的）行为

![不受欢迎的行为](../Images/fe2d14d0cd8663f5cbf20ef7d494a195.png)

这就是我想要的：

![在此处输入图像描述](../Images/e4ce7aee79e5d1347b85525c4ea033f6.png)

为了有这种行为，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:17:29.670

如果您在 div 上设置宽度，那么您将获得所需的行为。问题是 page_help div 试图尽可能多地占用页面宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:21:18.863

您需要设置**#page_help**的宽度，否则它将尝试通过调整自身大小来适应您放入其中的数据量。

# javascript - 将此 JavaScript 代码转换为 jQuery

> ID：11057623
> 
> 赞同：2
> 
> 时间：2012-06-15T20:15:34.760
> 
> 标签：javascript, jquery

我是 jQuery 新手，所以我无法解决这个问题。我希望将其转换为 jQuery。

**JavaScript：**

```
var el = document.getElementById("box");
el.style.backgroundColor = "#0000000";
var new_el = document.createElement("div");
new_el.innerHTML = "<p>some content</p>";
el.appendChild(new_el); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:18:15.977

```
var $el = $('#box');
$el.css('background-color', '#000000');

$('<div><p>some content</p></div>').appendTo($el); 
```

# wpf - 在 WPF 的 bing 地图上给 ShadowText 一个位置

> ID：11057624
> 
> 赞同：0
> 
> 时间：2012-06-15T20:15:37.730
> 
> 标签：wpf, bing-maps, bing-api

所以我创建了一个 ShadowText 对象，里面有一些文本，现在在我的地图仪式上呈现在屏幕上。我试图弄清楚该怎么做，这样我就可以在地图上给我的 ShadowText 对象一个“位置”，这样它就像地图上的国家文本一样。当用户滚动和/或缩放地图时，文本会保持其纬度和经度。Rite 现在我似乎只能在屏幕空间中渲染它，而不是使用“位置”。或者，如果有人知道一种可以在 WPF 中使用 bing 地图绘制文本的类型，那么无论如何都比 ShadowText 更容易操作。多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:29:11.700

您应该重新使用图钉。为 Pushpin 创建一个自定义数据模板，并将 ShadowText 放在控件模板中。

```
<ControlTemplate x:Key="CutomPushpinTemplate" TargetType="map:Pushpin">
    <Grid x:Name="ContentGrid" HorizontalAlignment="Center" VerticalAlignment="Center">
        <StackPanel>
            <Grid Margin="0">
                <ContentPresenter HorizontalAlignment="Center"
                                  VerticalAlignment="Center"
                                  Content="{TemplateBinding Content}"
                                  ContentTemplate="{TemplateBinding ContentTemplate}"
                                  Margin="0" />
            </Grid>
        </StackPanel>
    </Grid>
</ControlTemplate>

<maps:Pushpin Location="{Binding YourLocation}"
              PositionOrigin="Center"
              Template="{StaticResource CustomPushpinTemplate}">
    <TextBlock Text="{Binding YourContent}" />
</maps:Pushpin> 
```

# android - 试图修复 Android 中 TextView 的类转换异常....但找不到？

> ID：11057633
> 
> 赞同：0
> 
> 时间：2012-06-15T20:16:45.417
> 
> 标签：android, classcastexception

我从我在这个应用程序中的一个类似的类中复制了这个类，它使用相同的简单算术函数（乘法和除法）。然而，该应用程序的那一部分运行良好，而这一部分一直在我身上崩溃。Eclipse 没有提示任何错误，代码的设置方式与其他活动相同……但它崩溃了。我试图注释掉部分，看看它是否可能是一条线而不是另一条线，但似乎不是。

我意识到可能有一种更简单的方法来编写我编写的代码（一个数组或类似的东西），但是作为一个初学者，我正在慢慢地努力做到这一点，哈哈。

您能提供的任何帮助将不胜感激，谢谢！

* * *

日志猫：

```
06-15 16:43:10.051: W/KeyCharacterMap(318): No keyboard for id 0
06-15 16:43:10.051: W/KeyCharacterMap(318): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
06-15 16:43:48.091: D/AndroidRuntime(318): Shutting down VM
06-15 16:43:48.091: W/dalvikvm(318): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-15 16:43:48.111: E/AndroidRuntime(318): FATAL EXCEPTION: main
06-15 16:43:48.111: E/AndroidRuntime(318): java.lang.ClassCastException: android.widget.TextView
06-15 16:43:48.111: E/AndroidRuntime(318):  at com.tomcat.performance.TenLapAvg$1.onClick(TenLapAvg.java:46)
06-15 16:43:48.111: E/AndroidRuntime(318):  at android.view.View.performClick(View.java:2408)
06-15 16:43:48.111: E/AndroidRuntime(318):  at android.view.View$PerformClick.run(View.java:8816)
06-15 16:43:48.111: E/AndroidRuntime(318):  at android.os.Handler.handleCallback(Handler.java:587)
06-15 16:43:48.111: E/AndroidRuntime(318):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-15 16:43:48.111: E/AndroidRuntime(318):  at android.os.Looper.loop(Looper.java:123)
06-15 16:43:48.111: E/AndroidRuntime(318):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-15 16:43:48.111: E/AndroidRuntime(318):  at java.lang.reflect.Method.invokeNative(Native Method)
06-15 16:43:48.111: E/AndroidRuntime(318):  at java.lang.reflect.Method.invoke(Method.java:521)
06-15 16:43:48.111: E/AndroidRuntime(318):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-15 16:43:48.111: E/AndroidRuntime(318):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-15 16:43:48.111: E/AndroidRuntime(318):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

代码：

```
package com.tomcat.performance;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class TenLapAvg extends Activity implements OnClickListener{

    @Override
    protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tenlapavg);

    Button gen = ((Button) findViewById(R.id.submit));  
    gen.setOnClickListener(new View.OnClickListener() { 

            public void onClick(View v) {
        // TODO Auto-generated method stub      

                EditText lap1, lap2, lap3, lap4, lap5, lap6, lap7, lap8, lap9, lap10, trackSize;
                TextView tenLapAvg, avgSpeed1, avgSpeed2, avgSpeed3, avgSpeed4, avgSpeed5, avgSpeed6, avgSpeed7, avgSpeed8, avgSpeed9, avgSpeed10, avgSpeedTotal; 

                lap1 = ((EditText) findViewById(R.id.lap1));
                lap2 = ((EditText) findViewById(R.id.lap2));
                lap3 = ((EditText) findViewById(R.id.lap3));
                lap4 = ((EditText) findViewById(R.id.lap4));
                lap5 = ((EditText) findViewById(R.id.lap5));
                lap6 = ((EditText) findViewById(R.id.lap6));
                lap7 = ((EditText) findViewById(R.id.lap7));
                lap8 = ((EditText) findViewById(R.id.lap8));
                lap9 = ((EditText) findViewById(R.id.lap9));
                lap10 = ((EditText) findViewById(R.id.lap10));
                trackSize = ((EditText) findViewById(R.id.trackSize));

                tenLapAvg = ((TextView) findViewById(R.id.tenLapAvg));
                avgSpeed1 = ((TextView) findViewById(R.id.avgSpeed1));
                avgSpeed2 = ((TextView) findViewById(R.id.avgSpeed2));
                avgSpeed3 = ((TextView) findViewById(R.id.avgSpeed3));
                avgSpeed4 = ((TextView) findViewById(R.id.avgSpeed4));
                avgSpeed5 = ((TextView) findViewById(R.id.avgSpeed5));
                avgSpeed6 = ((TextView) findViewById(R.id.avgSpeed6));
                avgSpeed7 = ((TextView) findViewById(R.id.avgSpeed7));
                avgSpeed8 = ((TextView) findViewById(R.id.avgSpeed8));
                avgSpeed9 = ((TextView) findViewById(R.id.avgSpeed9));
                avgSpeed10 = ((TextView) findViewById(R.id.avgSpeed10));
                avgSpeedTotal = ((TextView) findViewById(R.id.avgSpeedTotal));

                double trackSizeVar = Double.parseDouble(trackSize.getText().toString());
                double lap1Var = Double.parseDouble(lap1.getText().toString());
                double lap2Var = Double.parseDouble(lap2.getText().toString());
                double lap3Var = Double.parseDouble(lap3.getText().toString());
                double lap4Var = Double.parseDouble(lap4.getText().toString());
                double lap5Var = Double.parseDouble(lap5.getText().toString());
                double lap6Var = Double.parseDouble(lap6.getText().toString());
                double lap7Var = Double.parseDouble(lap7.getText().toString());
                double lap8Var = Double.parseDouble(lap8.getText().toString());
                double lap9Var = Double.parseDouble(lap9.getText().toString());
                double lap10Var = Double.parseDouble(lap10.getText().toString());
                double tenLapAvgVar = ((lap1Var + lap2Var + lap3Var + lap4Var + lap5Var + lap6Var + lap7Var + lap8Var + lap9Var + lap10Var)/10);

                double lap1Speed = ((trackSizeVar * 3600)/lap1Var);
                double lap2Speed = ((trackSizeVar * 3600)/lap2Var);
                double lap3Speed = ((trackSizeVar * 3600)/lap3Var);
                double lap4Speed = ((trackSizeVar * 3600)/lap4Var);
                double lap5Speed = ((trackSizeVar * 3600)/lap5Var);
                double lap6Speed = ((trackSizeVar * 3600)/lap6Var);
                double lap7Speed = ((trackSizeVar * 3600)/lap7Var);
                double lap8Speed = ((trackSizeVar * 3600)/lap8Var);
                double lap9Speed = ((trackSizeVar * 3600)/lap9Var);
                double lap10Speed = ((trackSizeVar * 3600)/lap10Var);
                double avgSpeedTotalVar = ((lap1Speed + lap2Speed + lap3Speed + lap4Speed + lap5Speed + lap6Speed + lap7Speed + lap8Speed + lap9Speed + lap10Speed)/10);

                try{
                tenLapAvg.setText(String.valueOf(tenLapAvgVar) + " sec");
                //avgSpeed1.setText(String.valueOf(lap1Speed) + " mph");
                //avgSpeed2.setText(String.valueOf(lap2Speed) + " mph");
                //avgSpeed3.setText(String.valueOf(lap3Speed) + " mph");
                //avgSpeed4.setText(String.valueOf(lap4Speed) + " mph");
                //avgSpeed5.setText(String.valueOf(lap5Speed) + " mph");
                //avgSpeed6.setText(String.valueOf(lap6Speed) + " mph");
                //avgSpeed7.setText(String.valueOf(lap7Speed) + " mph");
                //avgSpeed8.setText(String.valueOf(lap8Speed) + " mph");
                //avgSpeed9.setText(String.valueOf(lap9Speed) + " mph");
                //avgSpeed10.setText(String.valueOf(lap10Speed) + " mph");
                //avgSpeedTotal.setText(String.valueOf(avgSpeedTotalVar) + " mph");
                }
                catch (ClassCastException e){
                    e.printStackTrace();}
            }}
    );

    }

public void onClick(View v) {
}
} 
```

XML 文件（根据 RAGHAV 的请求）是的，我意识到此刻文本都对用户说“Lap 1”:) --

```
 <?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical">

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Lap Average Calculator"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Enter lap times to calculate the 10-lap average time and each lap's speeds."
        android:textAppearance="?android:attr/textAppearanceMedium" />
<TableRow
            android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <TextView
        android:id="@+id/trackSize"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Enter Track Size: "
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <EditText
        android:id="@+id/lap1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="numberDecimal">
    </EditText>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceSmall" />
</TableRow>

<TableRow
            android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Lap1"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <EditText
        android:id="@+id/lap1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="numberDecimal">
    </EditText>

    <TextView
        android:id="@+id/avgSpeed1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceSmall" />
</TableRow>

<TableRow
            android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Lap1"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <EditText
        android:id="@+id/lap2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="numberDecimal" >
    </EditText>

    <TextView
        android:id="@+id/avgSpeed2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceSmall" />
</TableRow>

<TableRow
            android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <TextView
        android:id="@+id/textView6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Lap1"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <EditText
        android:id="@+id/lap3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="numberDecimal" >
    </EditText>

    <TextView
        android:id="@+id/avgSpeed3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceSmall" />
</TableRow>

<TableRow
            android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <TextView
        android:id="@+id/textView7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Lap1"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <EditText
        android:id="@+id/lap4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="numberDecimal" >
    </EditText>

    <TextView
        android:id="@+id/avgSpeed4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceSmall" />
</TableRow>

<TableRow
            android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <TextView
        android:id="@+id/textView8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Lap1"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <EditText
        android:id="@+id/lap5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="numberDecimal" >
    </EditText>

    <TextView
        android:id="@+id/avgSpeed5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceSmall" />
</TableRow>

<TableRow
            android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <TextView
        android:id="@+id/textView9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Lap1"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <EditText
        android:id="@+id/lap6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="numberDecimal" >
    </EditText>

    <TextView
        android:id="@+id/avgSpeed6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceSmall" />
</TableRow>

<TableRow
            android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <TextView
        android:id="@+id/textView10"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Lap1"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <EditText
        android:id="@+id/lap7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="numberDecimal" >
    </EditText>

    <TextView
        android:id="@+id/avgSpeed7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceSmall" />
</TableRow>

<TableRow
            android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <TextView
        android:id="@+id/textView11"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Lap1"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <EditText
        android:id="@+id/lap8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="numberDecimal" >
    </EditText>

    <TextView
        android:id="@+id/avgSpeed8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceSmall" />
</TableRow>

<TableRow
            android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <TextView
        android:id="@+id/textView12"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Lap1"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <EditText
        android:id="@+id/lap9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="numberDecimal" >
    </EditText>

    <TextView
        android:id="@+id/avgSpeed9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceSmall" />
</TableRow>

<TableRow
            android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <TextView
        android:id="@+id/textView13"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Lap1"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <EditText
        android:id="@+id/lap10"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="numberDecimal" >
    </EditText>

    <TextView
        android:id="@+id/avgSpeed10"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceSmall" />
</TableRow>

<Button
android:id="@+id/submit"
style="?android:attr/buttonStyleSmall"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Calculate Averages" />

<TableRow
            android:layout_width="wrap_content"
        android:layout_height="wrap_content">

<TextView
android:id="@+id/textView14"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Your 10-lap average time is: "
android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
android:id="@+id/tenLapAvg"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="0.000 sec"
android:textAppearance="?android:attr/textAppearanceSmall" />
</TableRow>

<TableRow android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <TextView
android:id="@+id/textView15"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Your 10-lap average speed is: "
android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
android:id="@+id/avgSpeedTotal"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="0.000 mph"
android:textAppearance="?android:attr/textAppearanceSmall" />

</TableRow>
</LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:27:01.333

您可能会在以下任务之一中获得 ClassCastException：

```
avgSpeed8 = ((TextView) findViewById(R.id.avgSpeed8)); 
```

您将结果转换`findViewById()`为 a `TextView`or的位置`EditText`。

仔细检查布局 XML 中 UI 组件的类型是否与您尝试将它们转换为的类匹配。我猜你在某处有一个类型，并试图将 TextView 转换为 EditText 或将 Button 转换为 EditText 或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:28:43.933

根据您的 logcat，我建议确保您在 xml 布局中定义的正确视图中投射 TextView。我正在关注这一行：

**java.lang.ClassCastException: android.widget.TextView 06-15 16:43:48.111: E/AndroidRuntime(318): at com.tomcat.performance.TenLapAvg$1.onClick(TenLapAvg.java:46) 06-15 16: 43:48.111:**

此外，在某些情况下，不会重新编译 R 类，并且您的项目可能不同步（在这种情况下，您可以尝试重新构建所有类路径）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:28:48.067

如果我数得正确，那么第 46 行是...

```
avgSpeed3 = ((TextView) findViewById(R.id.avgSpeed3)); 
```

检查您的 tenlapavg.xml 布局文件以确保已正确声明为`TextView`. 如果我没有正确计算，它将是接近那个的小部件之一。

# android - Android 上 OpenGL (2D) 中的模糊精灵

> ID：11057634
> 
> 赞同：1
> 
> 时间：2012-06-15T20:16:49.840
> 
> 标签：android, opengl-es

我有一个小 OpenGL 2D 游戏，并以 60 fps 的速度平稳运行（运动平稳）。

但是当精灵快速移动时，会出现一种幽灵精灵或轨迹。有点难以描述，但精灵开始看起来很模糊。当运动缓慢时，精灵看起来很清晰。

这不是 OpenGL 2D 精灵的边缘绘制不正确的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:53:13.757

假设相同的代码驱动您的慢速移动和快速移动精灵，那么您看到的很可能是您的液晶显示器造成的*重影。*

我找不到任何合适的文章来解释，但您可以[在此处](http://hardforum.com/showpost.php?p=1031001362&postcount=504)找到示例图像。

# jquery - jquery 从（并折叠成）一个小方块展开

> ID：11057637
> 
> 赞同：1
> 
> 时间：2012-06-15T20:17:21.953
> 
> 标签：jquery, jquery-animate, jquery-effects

我想创建一个 16 像素的小方形图标，单击该图标时，“展开”成一个 600 像素 x 100 像素的大横幅，显示覆盖部分页面的其他内容。然后用户可以单击横幅上的关闭按钮，它将“折叠”回图标中。

本质上，我正在寻找一种能够从中平滑动画的能力：

```
------------------------------------------------------------------
|                                                                |
|                                                       [icon]   |
|                                                                |
|                                                                |
|          Page content here                                     |
|          more page content here                                |
|          even more page content here                           |
|          yet more more page content here                       |
|          another line of page content                          |
|          and another.                                          |
|                                                                |
|                                                                | 
```

对此：

```
------------------------------------------------------------------
|                                                                |
|   ----------------------------------------------------------   |
|   |                                                    [x] |   |
|   |                                                        |   |
|   |      Content inside banner                             |   |
|   |      goes here                                         |   |
|   |                                                        |   |
|   ----------------------------------------------------------   |
|          another line of page content                          |
|          and another.                                          |
|                                                                |
|                                                                | 
```

然后当用户单击关闭按钮时再次动画回来。

使用 jquery 具有良好性能和浏览器兼容性的好方法是什么？

我的应用程序的大多数用户都使用低级浏览器，因此任何解决方案都应该适用于 IE7+、iPad2+ 以及现代桌面和移动浏览器——尽管如果旧浏览器的性能很糟糕，我可能会放弃那里的动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:05:48.780

jsFiddle：http: [//jsfiddle.net/ZAJN4/48/](http://jsfiddle.net/ZAJN4/48/)

```
<div id="1" class="toggle" style="width:50px;height:50px;background:green;">
    <div id="icon1" style="background:blue;height:100%;width:100%;">Icon</div>
    <div id="content1" style="display:none;background:red;height:100%;width:100%;">Content</div>
</div>​

$(".toggle").click( function()
{
    var icon =  $("#icon" + $(this).attr("id"));
    var content = $("#content" + $(this).attr("id"));

    if ( icon.css("display") == "none" )
    {
        $(this).animate(
        {
            height: "50px",
            width: "50px"
        }, function() {});
    }
    else
    {
        $(this).animate(
        {
            height: "250px",
            width: "250px"
        }, function() {});
    }

    $(icon).animate(
    {
        height: 'toggle'
    }, function() {});

    $(content).animate(
    {
        height: 'toggle'
    }, function() {});
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:31:47.550

对于这种特定情况，我会使用`absolute`ly 定位`div`，它从 16 像素的正方形扩展到 600x100 像素的矩形。

## 您可以使用 CSS3 转换为它设置动画：

```
.foobar {
  width: 16px;
  height: 16px;
  position: absolute;
  top: 0;
  right: 0;
  transition: all 0.4s ease-out;
}

.foobar.expanded {
  width: 600px;
  height: 100px;
} 
```

因此，当您单击正方形时，您只需添加`expanded`类，然后将其删除以进行`div`折叠，如下所示（使用 jQuery 管理事件）：

```
$('.foobar').on('click', function (event) {
  event.preventDefault();
  $(this).toggleClass('expanded');
}); 
```

## 或者使用 jQuery 的`.animate()`：

```
$('.foobar').on('click', function (event) {
  event.preventDefault();
  var $this = $(this);
  if ($this.width() === 600) {
    $this.animate({
      width : 16,
      heigth : 16
    }, 400);
  } else {
    $this.animate({
      width : 600,
      height : 100
    }, 400);
  }
}); 
```

使用它作为基础 CSS：

```
.foobar {
  width: 16px;
  height: 16px;
  position: absolute;
  top: 0;
  right: 0;
} 
```

* * *

如您所见，实现非常简单。

作为一般规则，CSS 过渡比使用 javascript 制作的动画要好得多。缺点是旧浏览器不支持它们。就个人而言，我会选择 CSS 过渡。

# r - 识别是否只有对角线非零

> ID：11057639
> 
> 赞同：4
> 
> 时间：2012-06-15T20:17:29.330
> 
> 标签：r

假设我有一个除对角线外全为 0 的矩阵。

```
m <- matrix(ncol=3,nrow=3)
m[,1] <- c(1,0,0)
m[,2] <- c(0,1,0)
m[,3] <- c(0,0,1) 
```

我可以使用什么逻辑检查来测试矩阵的上下三角形是否为零？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T20:20:21.947

```
all(m[lower.tri(m)] == 0, m[upper.tri(m)] == 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T21:20:44.647

这是@GregaKešpret 出色解决方案的一个略短的替代方案：

```
m <- diag(11:13)
m

all(m[!diag(nrow(m))] == 0) # TRUE

m[1,2] = 0.01
all(m[!diag(nrow(m))] == 0) # FALSE 
```

该`diag`函数有两种主要模式：给它一个向量，就像它一样`diag(11:13)`，它把它放在对角线上。或者给它一个数字，`diag(3)`它会创建一个该大小的单位矩阵。然后我提取所有非对角元素并将它们与 0 进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-06T14:50:40.197

只需检查：

```
sum(m) == sum(diag(m)) 
```

# c# - 为什么 DateTime.ParseExact 会因 CultureInfo.CurrentCulture 而失败？

> ID：11057644
> 
> 赞同：1
> 
> 时间：2012-06-15T20:17:38.687
> 
> 标签：c#, parsing, datetime

我正在尝试使用给定格式解析日期，但我发现这是我无法解释的：

```
var date = new DateTime(2001, 01, 10);

var cultureInfo1 = CultureInfo.GetCultureInfo(CultureInfo.CurrentCulture.Name);
var cultureInfo2 = new CultureInfo(CultureInfo.CurrentCulture.Name);

Assert.AreEqual(date, DateTime.ParseExact("10/01/01", "dd/MM/yy", cultureInfo1));

Assert.Throws<FormatException>(() => DateTime.ParseExact("10/01/01", "dd/MM/yy", CultureInfo.CurrentCulture));
Assert.Throws<FormatException>(() => DateTime.ParseExact("10/01/01", "dd/MM/yy", cultureInfo2)); 
```

为什么此调用会因 CurrentCulture 失败，因使用文化名称创建的新实例而失败，但不会因使用 GetCultureInfo() 获得的文化而失败。当前的文化是 en-US，Windows 配置了这两个更改（在 intl.cpl 中完成）：使用公制系统和短日期格式“dd-MMM-yyyy”。

**更新：**

原始问题已正确回答，但我想补充一点，两种文化都能够解析日期。问题似乎在于 CultureInfo.DateTimeFormat.DateSeparator 中指定的日期分隔符。

具有我的覆盖的cultureInfo 具有'-' 作为分隔符，而原始文化具有'/'。

为了使 ParseExact 解析日期而不考虑指定的区域性分隔符，格式规范应从**"dd/MM/yy"**更改为**"dd'/'MM'/'yy"**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:23:11.480

从 MSDN 为[`CultureInfo.GetCultureInfo(string)`](http://msdn.microsoft.com/en-us/library/yck8b540.aspx)

> 如果 name 是当前区域性的名称，则返回的 CultureInfo 对象不反映任何用户覆盖。

MSDN 为[`CultureInfo(string)`](http://msdn.microsoft.com/en-us/library/ky2chs3h.aspx)

> 如果与 name 关联的区域性标识符与当前 Windows 区域性的区域性标识符匹配，则此构造函数将创建一个使用这些覆盖的 CultureInfo 对象。

这意味着静态`GetCultureInfo(string)`不会使用用户已覆盖的任何设置，而构造函数版本会。

# c# - 表单关闭时做点什么

> ID：11057645
> 
> 赞同：1
> 
> 时间：2012-06-15T20:17:56.453
> 
> 标签：c#, winforms, listview

如何检查表单是否已关闭？

当我关闭另一个表单时，我想重新加载列表视图的项目。
我正在做的是：

Form1 = 带有 ListView
的表单 Form2 = 带有 TextBoxes的表单

*   打开一个新表格。
*   通过文本框创建一个新文件夹。
*   当我在 Form2 中按“添加”时，我想在 Form1 上重新加载“ListView”。

那么我该怎么做呢？

对不起我的英语不好:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:22:57.240

如果您使用高于 dot net 1.1 的任何内容，您可以处理表单[关闭事件，因为关闭事件已过时](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosed.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:23:02.787

在 Form1 中，您可以订阅 From2 的[FormClosed](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosed.aspx)事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T20:27:25.677

最简单的答案是在 Form1 上创建一个公共方法，让我们调用它`RefreshList()`，在 Form2 上的按钮单击事件中，您只需调用`Form1.RefreshList`. 这是一个快速示例：

表格 2：

```
public Form1 ParentForm { get; set; }

private void Button_Click(object Sender, EventArgs args) {
{
    // After the rest of your handler
    if(ParentForm != null)
        ParentForm.RefreshList();

    Close(); // Close Form2 here, we're done!
} 
```

表格一：

```
private void ShowForm2() 
{
    Form2 form2 = new Form2();
    form2.ParentForm = this;
    form2.Show();
}

public void RefreshList() 
{
   // do your refresh here
} 
```

最初您提到要在 Form2 关闭时执行此操作，但后来您提到您要执行此操作“当我在 Form2 中按“添加”时，我想在 Form1 上重新加载“ListView”。” 正如其他人提到的，您可以使用该`Closed`事件，因此我采用这种方法来解决您的第二种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T20:24:38.450

`FormClosed`如果您只是想在关闭特定表单时做出反应，您可以处理该事件。如果您想更进一步，`FormClosing`您还可以处理一个事件，甚至在需要时阻止表单关闭。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T20:30:25.773

让 Form1 为 Form2 的`FormClosing`事件添加一个事件处理程序是一个很好的选择。但是，如果 Form2 是一个对话窗口，还有一个更简单的解决方案。换句话说，如果在显示 Form2 时有效锁定和禁用 Form1 是可以的，您可以简单地将 Form2 显示为对话框窗口。对话框窗口同步显示，因此您可以在显示 Form2 后立即更新列表，并且在 Form2 关闭之前它不会点击该列表更新代码。例如：

```
form2.ShowDialog(this);
updateList(); 
```

# java - 如何在运行时从 Guvnor 加载和执行规则（无变更集 xml 文件）

> ID：11057654
> 
> 赞同：3
> 
> 时间：2012-06-15T20:18:31.360
> 
> 标签：java, drools

我想提供一个包和规则名称，从 Guvnor 检索该规则并运行它。我想在没有在 change-set.xml 文件中预先定义任何资源的情况下完成这一切。我无法在网上或任何 drools 文档中找到任何此类示例。

目前，我只是想弄清楚如何将规则放入我的应用程序中。所以..

给定 Guvnor 中特定规则的包和规则名称，我如何在运行时将该规则导入我的应用程序（以便它适用于应用程序启动后创建的规则）？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T14:27:23.890

Drools 的架构面向包，而不是单独的规则。尽管您可以在加载过程中过滤掉规则，但我不建议您这样做。相反，您应该将不同包中的规则分开，或者使用启用或议程过滤器等规则属性在逻辑上禁用规则。

话虽如此，您可以直接使用 KnowledgeAgent 或 KnowledgeBuilder 来加载远程包。Guvnor 对包的 URL 使用标准命名约定。URL 将是：

```
<guvnor-url>/org.drools.guvnor.Guvnor/package/<your_pkg_name>/<version> 
```

因此，例如，如果您的名称包名称是“some.pkg”，并且您已将 guvnor 部署到 jboss AS 7 中的本地实例，则 URL 可能是：

```
http://localhost:8080/guvnor-5.4.0.Final-jboss-as-7.0/org.drools.guvnor.Guvnor/package/some.pkg/LATEST 
```

使用 KnowledgeBuilder，您可以：

```
// load package
KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();
kbuilder.add( ResourceFactory.newUrlResource( "http://localhost:8080/guvnor-5.4.0.Final-jboss-as-7.0/org.drools.guvnor.Guvnor/package/some.pkg/LATEST" ), 
              ResourceType.PKG );

// create the knowledge base
KnowledgeBase kbase = KnowledgeBaseFactory.newKnowledgeBase();

// add the package to the kbase
kbase.addKnowledgePackages( kbuilder.getKnowledgePackages() ); 
```

以上会将整个包加载到您的知识库中。如果您真的想加载单个规则（不推荐），您可以在添加到 kbase 之前从包中删除其他规则：

```
for( KnowledgePackage kpkg : kbuilder.getKnowledgePackages() ) {
    // need to clone the rule references for iteration
    Collection<Rule> rules = new ArrayList<Rule>( kpkg.getRules() );
    for( Rule rule : rules ) {
        if( ! RULE_YOU_WANT.equals( rule.getName() ) ) {
            // NOT recommended as you are using internal APIs
            ((KnowledgePackageImp)kpkg).removeRule( rule );
        }
    }
} 
```

希望能帮助到你。

# joomla - 让一个 Joomla 模块占据两个位置

> ID：11057655
> 
> 赞同：1
> 
> 时间：2012-06-15T20:18:35.197
> 
> 标签：joomla, module, web, positioning

我已经搜索过这个问题，但我不知道我的措辞是否正确。我在一个 Joomla 网站上工作，在其中一个页面上我有三个模块位置 content-top-a content-top-b content-top-c 所以基本上页面宽度分为三部分。但不是在这个页面上有三个模块，我希望一个模块占据页面的前三分之一，而旁边的另一个模块占据页面的另外三分之二。但是当我将第一个模块分配给 content-top-a 并将另一个模块分配给 content-top-b 时，它只是将两个模块设置为相同的宽度并将页面 1/2 | 1/2 而不是 1/3 | 2/3

我对 Joomla 还很陌生，所以我希望我能理解这个问题。提前感谢任何方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T21:05:14.957

这将是一个模板编辑。您将需要查看模板的 css 文件并添加一些 php 代码以检查是否只有 2 个模块发布到 3 个模块中的 2 个模块位置。

如果只有 2 个，那么在这 2 个职位上添加一个类，上面有一些样式，如下所示：

```
<style>
.class1-position { width: 33%; }
.class2-positions { width: 67%; }
</style> 
```

或者，如果您知道站点宽度，则将其设置为 px 作为模块的宽度，不要使用百分比 (%)。

这是一些用于检查模块是否已发布的 php 代码

```
if(countModules('position-1')):
    // Some code
endif; 
```

但是要完全回答您的问题，我必须查看一些代码，有很多我不知道的变量，您正在使用什么类型的模板。但这肯定会让你朝着正确的方向前进。

# mysql - Hibernate Annotations & Inheritance

> ID：11057656
> 
> 赞同：2
> 
> 时间：2012-06-15T20:18:38.770
> 
> 标签：mysql, hibernate, jboss7.x, hibernate-annotations

I have multiple tables in a MySQL database. Lets say they look like this:

*   Book:

    ```
    title, subject, publisher, book_author 
    ```

*   Journal:

    ```
    title, subject, publisher, journal_name 
    ```

*   Blog:

    ```
    title, subject, website, blog_author 
    ```

*   ENews:

    ```
    title, subject, website, news_paper_name 
    ```

The particular structure is irrelevant to the problem. In reality, there are around 20 columns that all of the tables share and more that are unique to a few or just one table. The point is, they all share some columns. I want to use Hibernate to access these, using annotated classes. I don't want to have 5+ classes that each have 20+ redundant fields, each with an accessor and mutator. I would like a class structure something like this:

*   *abstract* `Publication` { **title, subject** }
    *   *abstract* `PrintPublication` { **publisher** }
        *   `Book` { **book_author** }
        *   `Journal` { **journal_name** }
    *   *abstract* `Online Publicaiton` { **website** }
        *   `Blog` { **blog_author** }
        *   `ENews` { **news_paper_name** }

However, I can't for the life of me figure out how to get this to work. Each of the concrete classes is a single table in the database. I thought the solution would be a table per class (`@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)`), but that threw a number of interesting errors.

What is the proper solution to all of this? Besides altering the table structure. The database is not mine and I have not been given rights to change it.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T20:34:36.183

If there is no need for type inheritance between entities, for that purpose there is [MappedSuperClass](http://docs.oracle.com/javaee/6/api/javax/persistence/MappedSuperclass.html). Idea is that you define all the common persistent attributes and their mappings in mapped superclass and entities will extends it.

Result is that mappings will apply to entity that extends mapped superclass, but from the point-of-view of persistence there is not is-a relationship between entity and mapped superclass.

Following provides starting point:

```
@MappedSuperclass
public class Publication {
    String title;
    @Column (name="subject_of_publication")
    String subject;

    ...
}

@MappedSuperclass
public class PrintPublication extends Publication {
    String publisher;
    ...
}

@Entity
public class Book extends PrintPublication {//inherits persistent attributes
    ...
    String author;
} 
```

You can also have mapped superclasses in other levels in entity hierarchy and override mappings in entities as needed.

But if you have to in some point threat for example Book and Blog as one type, then mapped superclass is not way to go, because you cannot query it.

# iphone - iOS中滑动手势的滚动效果

> ID：11057657
> 
> 赞同：6
> 
> 时间：2012-06-15T20:18:46.210
> 
> 标签：iphone, ios, scroll, effect

我有一个有两个标签的视图。当我向左滑动时，我填充下一个内容以标记文本。同样向右滑动会加载以前的内容。我想对标签产生影响，就像它们从左或右滚动一样。我以前使用过滚动视图，但它有内存问题。所以我使用一个视图，滑动手势加载下一个或上一个内容。我想给标签添加滚动视图的滑动效果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T21:02:37.993

我不太确定你在寻找什么效果，但你可以做这样的事情，创建一个新的临时标签，把它从屏幕上移开，将它移动到你在屏幕上的标签上，然后完成后，重置旧标签并删除临时标签。这是非自动布局实现的样子：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    UISwipeGestureRecognizer *left = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(leftSwipe:)];
    [left setDirection:UISwipeGestureRecognizerDirectionLeft];
    [self.view addGestureRecognizer:left];
    // if non-ARC, release it
    // [release left];

    self.label1.text = @"Mo";
}

- (void)leftSwipe:(UISwipeGestureRecognizer *)gesture
{
    NSString *newText;
    UILabel  *existingLabel = self.label1;

    // in my example, I'm just going to toggle the value between Mo and Curly

    if ([existingLabel.text isEqualToString:@"Curly"])
        newText = @"Mo";
    else
        newText = @"Curly";

    // create new label

    UILabel *tempLabel = [[UILabel alloc] initWithFrame:existingLabel.frame];
    [existingLabel.superview addSubview:tempLabel];
    tempLabel.text = newText;

    // move the new label off-frame to the right

    tempLabel.transform = CGAffineTransformMakeTranslation(tempLabel.superview.bounds.size.width, 0);

    // animate the sliding of them into place

    [UIView animateWithDuration:0.5
                     animations:^{
                         tempLabel.transform = CGAffineTransformIdentity;
                         existingLabel.transform = CGAffineTransformMakeTranslation(-existingLabel.superview.bounds.size.width, 0);
                     }
                     completion:^(BOOL finished) {
                         existingLabel.text = newText;
                         existingLabel.transform = CGAffineTransformIdentity;
                         [tempLabel removeFromSuperview];
                     }];

    // if non-ARC, release it
    // [release tempLabel];
} 
```

此动画相对于其父视图为标签设置动画。您可能希望确保将其`superview`设置为“剪辑子视图”。这样，动画将被限制在 that 的范围内`superview`，从而产生稍微更精致的外观。

注意，如果使用自动布局，想法是一样的（虽然执行更复杂）。基本上配置您的约束，使新视图位于右侧，然后，在动画块中更新/替换约束，使原始标签位于左侧，新标签位于原始标签的位置，最后，在完成块重置原始标签的约束并删除临时标签。

* * *

顺便说一句，如果您对其中一种内置转换感到满意，这一切都会变得更加容易：

```
- (void)leftSwipe:(UISwipeGestureRecognizer *)gesture
{
    NSString *newText;
    UILabel  *existingLabel = self.label1;

    // in my example, I'm just going to toggle the value between Mo and Curly

    if ([existingLabel.text isEqualToString:@"Curly"])
        newText = @"Mo";
    else
        newText = @"Curly";

    [UIView transitionWithView:existingLabel  // or try `existingLabel.superview`
                      duration:0.5
                       options:UIViewAnimationOptionTransitionFlipFromRight
                    animations:^{
                        existingLabel.text = newText;
                    }
                    completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-16T19:36:58.453

如果您更喜欢表现得更像滚动视图的动画（即，对手势有连续反馈），它可能类似于以下内容：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panHandler:)];
    [self.view addGestureRecognizer:pan];

    self.label1.text = @"Mo";
}

- (void)panHandler:(UIPanGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateBegan)
    {
        _panLabel = [[UILabel alloc] init];

        // in my example, I'm just going to toggle the value between Mo and Curly
        // you'll presumably set the label contents based upon the direction of the
        // pan (if positive, swiping to the right, grab the "previous" label, if negative
        // pan, grab the "next" label)

        if ([self.label1.text isEqualToString:@"Curly"])
            _newText = @"Mo";
        else
            _newText = @"Curly";

        // set the text

        _panLabel.text = _newText;

        // set the frame to just be off screen

        _panLabel.frame = CGRectMake(self.label1.frame.origin.x + self.containerView.frame.size.width,
                                     self.label1.frame.origin.y, 
                                     self.label1.frame.size.width, 
                                     self.label1.frame.size.height);

        [self.containerView addSubview:_panLabel];

        _originalCenter = self.label1.center; // save where the original label originally was
    }
    else if (sender.state == UIGestureRecognizerStateChanged)
    {
        CGPoint translate = [sender translationInView:self.containerView];

        if (translate.x > 0)
        {
            _panLabel.center = CGPointMake(_originalCenter.x - self.containerView.frame.size.width + translate.x, _originalCenter.y);
            self.label1.center = CGPointMake(_originalCenter.x + translate.x, _originalCenter.y);
        }
        else 
        {
            _panLabel.center = CGPointMake(_originalCenter.x + self.containerView.frame.size.width + translate.x, _originalCenter.y);
            self.label1.center = CGPointMake(_originalCenter.x + translate.x, _originalCenter.y);
        }
    }
    else if (sender.state == UIGestureRecognizerStateEnded || sender.state == UIGestureRecognizerStateFailed || sender.state == UIGestureRecognizerStateCancelled)
    {
        CGPoint translate = [sender translationInView:self.containerView];
        CGPoint finalNewFieldLocation;
        CGPoint finalOriginalFieldLocation;
        BOOL panSucceeded;

        if (sender.state == UIGestureRecognizerStateFailed ||
            sender.state == UIGestureRecognizerStateCancelled)
        {
            panSucceeded = NO;
        }
        else 
        {
            // by factoring in the velocity, we can capture a flick more accurately
            //
            // (by the way, I don't like iOS's velocity, because if you stop moving, it records the velocity
            // prior to stopping the move rather than noting that you actually stopped, so I usually calculate my own, 
            // but I'll leave this as is for purposes of this example)

            CGPoint velocity  = [sender velocityInView:self.containerView];

            if (translate.x < 0)
                panSucceeded = ((translate.x + velocity.x * 0.5) < -(self.containerView.frame.size.width / 2));
            else
                panSucceeded = ((translate.x + velocity.x * 0.5) > (self.containerView.frame.size.width / 2));
        }

        if (panSucceeded)
        {
            // if we succeeded, finish moving the stuff

            finalNewFieldLocation = _originalCenter;
            if (translate.x < 0)
                finalOriginalFieldLocation = CGPointMake(_originalCenter.x - self.containerView.frame.size.width, _originalCenter.y);
            else
                finalOriginalFieldLocation = CGPointMake(_originalCenter.x + self.containerView.frame.size.width, _originalCenter.y);
        }
        else
        {
            // if we didn't, then just return everything to where it was

            finalOriginalFieldLocation = _originalCenter;

            if (translate.x < 0)
                finalNewFieldLocation = CGPointMake(_originalCenter.x + self.containerView.frame.size.width, _originalCenter.y);
            else
                finalNewFieldLocation = CGPointMake(_originalCenter.x - self.containerView.frame.size.width, _originalCenter.y);
        }

        // animate the moving of stuff to their final locations, and on completion, clean everything up

        [UIView animateWithDuration:0.3
                              delay:0.0 
                            options:UIViewAnimationOptionCurveEaseOut
                         animations:^{
                             _panLabel.center = finalNewFieldLocation;
                             self.label1.center = finalOriginalFieldLocation;
                         }
                         completion:^(BOOL finished) {
                             if (panSucceeded)
                                 self.label1.text = _newText;
                             self.label1.center = _originalCenter;
                             [_panLabel removeFromSuperview];
                             _panLabel = nil; // in non-ARC, release instead
                         }
         ];
    }
} 
```

请注意，我已将原始标签和正在平移的新标签都放在容器 UIView（称为 containerView，令人惊讶的是）中，以便我可以将动画剪辑到该容器。

# visual-studio-2012 - 在测试资源管理器中按类和命名空间对测试进行分组

> ID：11057658
> 
> 赞同：11
> 
> 时间：2012-06-15T20:18:46.243
> 
> 标签：visual-studio-2012

在 Visual Studio 2010 中，我可以按全名列出我的测试。这样，当我构建测试时，我的测试将按对象排序，然后是方法，然后是单个测试用例，如下所示：

[http://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx](http://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx)

但是，在 Visual Studio 2012 Ultimate RC 测试资源管理器中，它按测试名称列出测试（而不是“WidgetMaker.ctor.HappyPath”，它只显示“HappyPath”）。有没有办法更改测试资源管理器以显示全名而不是测试名称？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T04:38:20.810

这是帖子末尾的答案：

[http://blogs.msdn.com/b/visualstudioalm/archive/2012/03/08/what-s-new-in-visual-studio-11-beta-unit-testing.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/03/08/what-s-new-in-visual-studio-11-beta-unit-testing.aspx)

所以，等等看/希望...

编辑：与此同时，您仍然可以通过在解决方案项中打开 *.vsmdi 文件来获得类似的界面。

# excel - Excel（宏）如何使用 A 列文件名保存 B 列

> ID：11057668
> 
> 赞同：0
> 
> 时间：2012-06-15T20:19:35.290
> 
> 标签：excel, save, filenames, vba

我在 Excel 方面的技能还不够好，所以我希望你能在这里帮助我。我有一个 Excel 文件，其中 A 列中有数字，B 列中有 300 行的文本。如何使用 A 列文件名在 B 列中的每一行保存一个 txt 文件？

在这里看我的例子：

[http://bildr.no/view/1205751](http://bildr.no/view/1205751)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T21:37:17.050

您的代码几乎就在那里：只需在`Open`语句中包含路径

```
Open "C:\Temp\" & ce & ".txt" For Output As #1 
```

编辑
为了避免`"`'s，使用`Print`而不是`Write`

```
Print #1, ce.Offset(0, 1) 
```

# javascript - jQuery：验证最初隐藏的字段

> ID：11057687
> 
> 赞同：0
> 
> 时间：2012-06-15T20:20:52.507
> 
> 标签：javascript, jquery, forms, jquery-validate

好的，这对我来说很难解释，但我会尽力而为。

我有一个表格，我将其分成 3 个单独的步骤，以使用户更容易处理数据。多亏了 jQuery，我可以通过隐藏和显示 dom 中的元素轻松做到这一点，但也正因为如此，jQuery 在验证最初隐藏的数据时遇到了麻烦。

请看下面的表格：http: [//jsfiddle.net/Egyhc/](http://jsfiddle.net/Egyhc/)

```
<form>
  <div id="step1" style="display: block;">
    <label for="first_name">First Name</label>
    <input type="text" value="" name="first_name" id="FirstName"/>

    <label for="last_name">Last Name</label>
    <input type="text" value="" name="last_name" id="LastName"/>
  </div>

  <div id="step2" style="display: none;">
    <label for="first_name">Address</label>
    <input type="text" value="" name="address" id="Address"/> 
  </div>

  <a href="#" id="step1_btn">Continue to step 2</a>
  <input type="submit" id="submit_btn" value="Verstuur" style="display: none;" />
</form>

$(function() {
  $('#step1_btn').click(function() {
    $('#step1, #step1_btn').hide();
    $('#step2, #submit_btn').show();        
  });
});​ 
```

如您所见，这是一个相当简单的表单，但是当我添加验证时，只有第一个“步骤”有效。第二步没有得到验证。

您可以在下面找到我添加验证的代码：

```
$(function() {
  $('#step1_btn').click(function() {
    $('form').validate({
      rules: { 
        first_name: "required",
        last_name: "required" 
      }
    });

    if($('form').valid()) {
      $('#step1, #step1_btn').hide();
      $('#step2, #submit_btn').show();   
    }     
  });

  $('#submit_btn').click(function() {
    $('form').validate({
      rules: { 
        address: "required"  
      }
    });

    if($('form').valid()) {
      return true
    }     
  });
});​ 
```

一旦我进入第二步，任何人都知道如何使验证工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:59:14.973

我在这里给出了表格，因为我已经修改了它（添加了反向链接）

```
<form>
  <div id="step1" style="display: block;">
      <label for="first_name">First Name</label>
      <input type="text" value="" name="first_name" id="FirstName"/>
      <label for="last_name">Last Name</label>
      <input type="text" value="" name="last_name" id="LastName"/>
  </div>
  <div id="step2" style="display: none;">
    <label for="first_name">Address</label>
    <input type="text" value="" name="address" id="Address"/> 
  </div>

  <a href="#" id="step1_btn">Continue to step 2</a>
  <a href="#" id="step2_btn" style="display:none;" >Back to step 1</a>
  <input type="submit" id="submit_btn" value="Verstuur" style="display: none;" />
</form> 
```

**JS**

```
$(function(){
    $('form').validate({
        rules: { 
          first_name: "required",
          last_name: "required",
          address: "required"  
        }
    });

    $('#step1_btn').click(function() {
        if($('form').valid()) {
            $('#step1, #step1_btn').hide();
            $('#step2, #submit_btn').show(); 
            $('#step2_btn').show();       
        }     
    });

    $('#step2_btn').click(function() {
        $(this).hide();
        $('#step1, #step1_btn').show();
        $('#step2, #submit_btn').hide();  
    });            

    $('#submit_btn').click(function() {
        if($('form').valid()) {
            return true
        }     
    });
}); 
```

[**演示。**](http://jsfiddle.net/heera/Egyhc/5/)

# ruby-on-rails - 我们应该将 Sprited 图像排除在资产管道之外吗？

> ID：11057688
> 
> 赞同：3
> 
> 时间：2012-06-15T20:21:07.983
> 
> 标签：ruby-on-rails, asset-pipeline, css-sprites, compass-sass

我们使用 Compass 来 Sprite 图像（将许多图像组合成一个文件）。如果我为 images/common/ 目录创建 Sprite，Compass 会创建一个名为 common-sff832da50b.png 的文件。Compass 每次重新生成 Sprite 时都会生成一个新的后缀。如果我将这些 Sprite 图像留在 app/assets/images 中，我将在 public/assets 中同时看到 common-sff832da50b.png 和 common-sff832da50b-4a575c6c5d24895370db5ee7e7648d3a.png。由于 Compass 管理这个文件，我认为没有理由让 Asset Pipeline 也“管理”它。我可以通过配置 Compass 将这些精灵直接编译到公共/资产中来绕过资产管道。这有缺点吗？

我也应该确保编译成 Sprite 的“源”图像不应该存储在 app/assets/images 中，因为 Asset Pipeline 也会“管理”它们。请记住，不使用这些“源”图像。该应用程序在开发和生产中使用 Sprites。据我所知，资产管道没有理由将原件和原件的“摘要”复制到公共/资产。我们只在 Sprite 中使用它。这听起来合理吗？有缺点吗？

假设：Rails 3.2.*

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:36:58.913

您可以将原始图像移动到管道外的任何文件夹。或不。除了预编译所需的时间以及在您从不引用的公用文件夹中漂浮的文件之外，它并没有太大的区别。

您必须将图像粘贴在某个地方，并且从 Rails 固执己见的角度来看，这似乎阻力最小。

关于指纹，您也不需要指纹文件，因为指南针（如您所说）指的是它创建的文件。

但是，直接将其写入 +/public/assets+ 可能会出现问题，具体取决于您部署项目的方式。

如果你使用默认的 Capistrano 任务，assets 文件夹是从 +shared/assets+ 符号链接的，所以你需要在符号链接发生后编译 sprite。

# php - .htaccess mod_rewrite 创建干净的 URL

> ID：11057691
> 
> 赞同：0
> 
> 时间：2012-06-15T20:21:17.507
> 
> 标签：php, .htaccess, mod-rewrite

我有一个数据驱动的站点，它传递信息以确定下一页应该使用 $_GET 参数显示的内容。

我希望 URL 看起来更好并且结构简单。

我一直在阅读有关 mod_rewrite 但到目前为止未能实现它。

```
<?php $post = $_GET['ID']; ?>
<?php $loca = $_GET['loca']; ?> 
```

这是从 URL 中获取的，以计算出我们想要什么表和什么帖子 ID。目前的网址是`index.php?ID=4&loca=Pages`

如果是这样，我将如何进行这项工作。`/pages/(the name column of the post of this ID)`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:30:25.520

这应该进行内部重写：

```
RewriteEngine On
RewriteRule ^pages/(\d+)/ /index.php?ID=$1&loca=pages 
```

它会重写任何以结果开头的 url `pages/(some number)/`。如果 url 不完全正确，您可能还应该添加一些服务器端逻辑来执行 302 重定向`/pages/id/(Name that matches id)/`。您可以使用`$_SERVER['REQUEST_URI']`获取字符串，然后将其与应为的字符串进行比较，如果不匹配则进行重定向。

就像你去：[`https://stackoverflow.com/questions/11057691/This+is+not+the+title`](https://stackoverflow.com/questions/11057691/This+is+not+the+title)

您将被重定向到具有正确标题的版本。您还应该更新站点周围的链接以使用新的 url 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:36:42.437

谷歌上有*很多*关于如何做到这一点的例子。

教程：[http ://wettone.com/code/clean-urls](http://wettone.com/code/clean-urls)

Mod_rewrite：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# android - JQueryMobile 和信用卡输入

> ID：11057694
> 
> 赞同：3
> 
> 时间：2012-06-15T20:21:28.783
> 
> 标签：android, html, jquery-mobile

JQueryMobile 是否对输入信用卡信息有很好的支持。用户很难输入 16 位数字，然后是到期日期等。我希望看到一个很好的 JQueryMobile 视图示例，说明如何输入信用卡/奖励卡详细信息。在此过程中保持 Android 键盘正确定位的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:40:43.097

您应该能够按照演示示例进行操作：

*   [http://jquerymobile.com/demos/1.1.0/docs/forms/forms-all.html](http://jquerymobile.com/demos/1.1.0/docs/forms/forms-all.html)

输入卡背面（有时是正面）的 16 位安全码

*   [http://jquerymobile.com/demos/1.1.0/docs/forms/textinputs/](http://jquerymobile.com/demos/1.1.0/docs/forms/textinputs/)
*   [http://www.w3schools.com/tags/att_input_maxlength.asp](http://www.w3schools.com/tags/att_input_maxlength.asp)（最大长度）
*   [http://www.w3schools.com/html5/att_input_placeholder.asp](http://www.w3schools.com/html5/att_input_placeholder.asp)（可选占位符）

示例（注意：密码字段中的字符被屏蔽[显示为星号或圆圈]）：

```
<input type="password" name="credit_card_number" id="credit_card_number" value="" placeholder="1234567890123456">
<input type="password" name="security_code" id="security_code" value="" placeholder="123"> 
```

如果您不喜欢密码选项，您可以使用掩码功能，不确定是否有任何插件可以“屏蔽之前的输入字符 onblur mask all”，但这会是一个不错的插件

*   [JQuery 将输入掩码应用于字段 onfocus 并删除 onblur 以避免占位符文本出现问题](https://stackoverflow.com/questions/4816511/jquery-apply-input-mask-to-field-onfocus-and-remove-onblur-so-to-avoid-problems)

到期日期的日期框

*   [http://dev.jtsage.com/jQM-DateBox/](http://dev.jtsage.com/jQM-DateBox/)

也许还添加一些信用卡验证？

*   [http://paweldecowski.github.com/jQuery-CreditCardValidator/](http://paweldecowski.github.com/jQuery-CreditCardValidator/)
*   [http://docs.jquery.com/Plugins/Validation/Methods/creditcard](http://docs.jquery.com/Plugins/Validation/Methods/creditcard)

# node.js - 主干、nodejs等概述

> ID：11057696
> 
> 赞同：0
> 
> 时间：2012-06-15T20:21:48.270
> 
> 标签：node.js, backbone.js, coffeescript

有人可以给我一个主干，nodejs等的鸟瞰图吗？

这些不同的技术/框架如何组合在一起。

意思是，如果我使用 nodejs，我必须使用骨干吗？

cofeescript 怎么样，它是否适用于骨干网？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T20:58:16.973

**Node.js**允许您编写服务器端 javascript：读取 HTTP 请求并产生响应的代码是用 javascript 编写的，并由 Google V8 执行。

为什么要在 JS 中编写服务器端代码？

*   Google V8 已经变得足够快，以至于现在它不会太占用 CPU
*   在 JS 中操作 JSON 真的很容易，所以如果你想创建一个 API...
*   Javascript（和节点）事件驱动方法确实有助于创建流式应用程序（一旦应用程序准备好就将数据发送到客户端）

**Backbone.js**是一个用 Javascript 编写的客户端 MVC 框架。它允许您编写模型、视图、路由并链接所有这些。因此，如果您的模型发生更改，视图会立即反映这些更改。在一个backbone.js 应用程序中，您通常只有一个HTML 页面来“加载”您编写的Backbone.js 代码，并且此代码会根据主干模型的内容生成用户看到的HTML。

**CoffeeScript**只是另一种编写 javascript 的方式。除了编写普通的 javascript，您还可以编写 CoffeeScript 并使用翻译器将您的 CoffeeScript 代码转换为 javascript。然后执行生成的 javascript。好处是： - 你可能更喜欢 CoffeeScript 语法 - CoffeeScript 翻译器生成相当好的 javascript 但最后，这只是一个偏好问题

这一切是如何结合在一起的？您可以使用**CoffeeScript （或 JavaScript）编写****Node.js** Web 应用程序（实际上只是一个 API），它将 JSON 数据提供给您创建的**Backbone.js**应用程序（使用 Javascript 或 CoffeeScript 或两者兼有）。您的所有开发都将在 Javascript/CoffeeScript 中完成，最后，您的 Backbone.js 客户端应用程序将只是您的 Node.js API 的另一个用户。

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:27:01.293

*   node.js 允许通过在 v8 引擎中编译和运行 javascript 在本地或服务器级别进行编程。
*   Backbone.js 是完全独立的，用于视图建模和建模，以及 javascript 实用程序。
*   Coffescript 为 javascript 启用缩写语法。Coffescript可以与backbone.js一起使用；请参阅： [Backbone 和 CoffeeScript 入门](https://stackoverflow.com/questions/5201281/get-started-with-backbone-and-coffeescript)****

# html - 如何在 ASP.NET MVC 的 pre 标记中呈现 HTML

> ID：11057698
> 
> 赞同：2
> 
> 时间：2012-06-15T20:21:59.550
> 
> 标签：html, asp.net-mvc, pre

在[ASP Classic](http://en.wikipedia.org/wiki/Active_Server_Pages) (aspx) Web 表单中，我可以在 PRE 标记中呈现整个 HTML，如下所示：

网页：

```
<pre><asp:label id="ContentBox" runat="server"></asp:label></pre> 
```

[代码隐藏](http://en.wiktionary.org/wiki/code-behind)：

```
ContentBox.Text = html string; 
```

然后整个 HTML 正确地呈现在网页上。

我想知道如何在 ASP.NET MVC [Razor](http://en.wikipedia.org/wiki/Microsoft_ASP.NET_Razor_view_engine)视图中做同样的事情。现在，我看到的是一个原始的 HTML 字符串。

HTML 字符串可能是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <title>A title</title>
    <style>
          .td_header {background-color: white; text-align:left}
          .table_header {background-color: white; width: 100%}
        </style>
  </head>
  <body>
    <table style="table_header" frame="void">
      <tr>
        <td class="td_header">
          <img src="logo_v3.jpg" alt="Helping" width="261" height="50" />
        </td>
      </tr>
    </table>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:25:20.843

这应该这样做：

```
<pre>@Html.Raw(Model.HtmlString)</pre> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:33:51.013

像这样的东西

```
<pre>
 @Html.LabelFor(m=>m.ContentBox)
<pre> 
```

这假设您的模型中有一个 contentbox 属性

这将输出类似

```
<pre>
 <label> blah blah </label>
<pre> 
```

但我认为您认为您需要 asp 控件来呈现数据……并非如此。

在您的控制器操作方法中，将您的内容放入视图包中

```
@ViewBag.ContentBox ="Hello World"; 
```

在你看来使用它。

```
<pre>
     @ViewBag.ContentBox
<pre> 
```

应该按照您的预期呈现。

如果您要呈现 HTML，则需要将其包装在 @html.raw()

# python - Python 的 json 模块占用大量内存？

> ID：11057712
> 
> 赞同：9
> 
> 时间：2012-06-15T20:23:47.520
> 
> 标签：python, json, memory-leaks

当我将文件加载到 json 中时，python 的内存使用量飙升至大约 1.8GB，我似乎无法释放该内存。我整理了一个非常简单的测试用例：

```
with open("test_file.json", 'r') as f:
    j = json.load(f) 
```

很抱歉，我无法提供示例 json 文件，我的测试文件有很多敏感信息，但就上下文而言，我正在处理一个 240MB 大小的文件。运行上述 2 行后，我使用了前面提到的 1.8GB 内存。如果我这样做，`del j`内存使用量根本不会下降。如果我遵循它，`gc.collect()`它仍然不会下降。我什至尝试卸载 json 模块并运行另一个 gc.collect。

我正在尝试运行一些内存分析，但 heapy 已经将 100% CPU 搅动了大约一个小时，并且还没有产生任何输出。

有没有人有任何想法？我也尝试过使用 cjson 而不是打包的 json 模块进行上述操作。cjson 使用的内存减少了大约 30%，但在其他方面显示完全相同的问题。

我在 Ubuntu 服务器 11.10 上运行 Python 2.7.2。

我很高兴加载任何内存分析器，看看它是否比 heapy 更好，并提供您可能认为必要的任何诊断。我正在寻找一个大型的测试 json 文件，我可以提供给其他任何人试一试。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T20:53:08.763

我认为这两个链接解决了一些有趣的问题，这不一定是一个 json 问题，而只是一个“大对象”问题以及内存如何与 python 和操作系统一起工作

请参阅[为什么当我删除大对象时 Python 不释放内存？](http://effbot.org/pyfaq/why-doesnt-python-release-the-memory-when-i-delete-a-large-object.htm)为什么python释放的内存不一定会被操作系统反映：

> 如果创建一个大对象并再次删除它，Python 可能已经释放了内存，但所涉及的内存分配器并不一定会将内存返回给操作系统，因此看起来 Python 进程使用了​​更多的虚拟内存比它实际使用的。

关于[在子进程中运行大对象进程](https://stackoverflow.com/a/1316799/496445)以让操作系统处理清理：

> 确保大量但临时使用内存在完成后将所有资源返回给系统的唯一真正可靠的方法是让该使用发生在子进程中，该子进程会执行需要内存的工作然后终止。在这种情况下，操作系统将完成它的工作，并且很乐意回收子进程可能已经吞噬的所有资源。幸运的是，多处理模块使这种操作（过去相当痛苦）在现代版本的 Python 中并不算太糟糕。

# licensing - GNU GENERAL PUBLIC LICENSE 作为商业产品的一部分

> ID：11057715
> 
> 赞同：0
> 
> 时间：2012-06-15T20:24:20.997
> 
> 标签：licensing, gpl

我知道堆栈溢出中有类似的问题，但它们并不具体。

我所说的商业意思是该软件不是免费的。

**无论如何，这是我的场景**假设我正在创建一个包含 10,000 行代码的软件，我想使用`readelf.exe`它是 GNU GENERAL PUBLIC LICENSE 下的一个程序，可以[从这里](http://sourceforge.net/projects/mingw/files/MinGW/Base/binutils/binutils-2.22/binutils-2.22-1-mingw32-bin.tar.lzma/)下载。如果我包含 ，我仍然可以为软件收费`readelf.exe`吗？我知道我必须提供 readelf.exe 的源代码，但我还必须提供我的主要软件的源代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:33:38.197

对于你的第一个问题

> 如果我包含 readelf.exe，我仍然可以对该软件收费吗？

是的，GPL 允许每个人都这样做。出售副本的权利是自由软件定义的一部分。除一种特殊情况外，您可以收取的价格没有限制。（一个例外是提供必须随附仅二进制版本的源代码的书面报价。）

对于你的第二个问题

> 我还必须提供我的主要软件的源代码吗？

GPL 不要求您发布修改后的版本或其任何部分。您可以自由地进行修改并私下使用它们，而无需发布它们。这也适用于组织（包括公司）；组织可以制作修改后的版本并在内部使用，而无需在组织外部发布。

但是，如果您以某种方式向公众发布修改后的版本，则 GPL 要求您根据 GPL 将修改后的源代码提供给程序的用户。

因此，GPL 允许以某些方式发布修改后的程序，而不是其他方式；但是是否发布它取决于您的决定。

## 概括

1.  如果您只是分发 readelf.exe，那么您不必在相同的许可证下发布您的代码。
2.  如果您已链接到 readelf.exe 或对其进行了修改，那么您必须将您的更改发布回公众。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T20:26:43.060

如果您只是使用可执行文件，则不必发布自己的源代码，只需发布​​构建 readelf 所需的源代码（如您所说）。

这将被视为[GPLv2下的单纯聚合（mingw 发行版](http://www.gnu.org/licenses/gpl-2.0.html)[使用](http://sourceforge.net/projects/mingw/develop)的许可证）：

“此外，仅将不基于本程序的其他作品与本程序（或基于本程序的作品）聚合在存储或分发介质的卷上，并不会将其他作品纳入本许可的范围。”

正如 Shane 所说，您始终可以销售 GPL（或任何免费/开源）软件。

我建议您尝试使用更好的术语。Red Hat 是一家每年销售 10 亿美元商业开源产品的公司，这只是一个例子。使用“非免费”或“专有”而不是“商业”。

伊纳尔。廷拉。

# css - 更改图片中登录字段的样式

> ID：11057720
> 
> 赞同：0
> 
> 时间：2012-06-15T20:24:44.713
> 
> 标签：css, margin

我想以相同的顺序制作登录名和密码字段。当我尝试使用 margin 命令更改 css 文件中的顺序时，它会移动两个字段。

![在此处输入图像描述](../Images/2ef69d2d8984e98f4604981684a10e59.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:02:19.863

您可以使用[CSS float](http://www.w3.org/wiki/CSS/Properties/float)来固定输入相对于彼此及其父元素的位置：

请参阅这个[工作小提琴](http://jsfiddle.net/zuul/Bvya2/)示例！

**假设结构如下：**

```
<form method="post" action="#">
  <div class="clear">
    <label>KULLANICI ADI</label>
    <input type="text" value="" name="foo">
  </div>
  <div class="clear">
    <label>SIFRE</label>
    <input type="text" value="" name="bar">
  </div>
</form> 
```

**CSS 解决方案是：**

```
input[type="text"] {
  float: right;
}
.clear {
  clear:both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:54:20.343

尝试这样的事情。有很多方法可以做到，但这是最直接的。

[http://jsfiddle.net/QutGz/1/](http://jsfiddle.net/QutGz/1/)

不知道想要小提琴的宽度。您可以像这样完成“列”的平衡：

```
label
{
float:left;
width: 100px;
}

input
{
float:left;
} 
```

​ 将宽度设置为大于最大标签文本的值。

# php - 混合 php 和 javascript - 我们应该在这里使用 json 吗？

> ID：11057722
> 
> 赞同：0
> 
> 时间：2012-06-15T20:24:51.470
> 
> 标签：php, javascript, json, yii

通过考虑以下代码片段：

```
if('<?= Yii::app()->controller->action->id?>' == 'create'){
 $("#Event_name").focusout(function(){
  $.ajax({
    success: function(html)
    {
     type: 'get',
     url: '<?php echo $this->createUrl('related'); ?>' 
```

这行得通。但是......这是一种正确的做法吗？我宁愿在一侧使用 php，在另一侧使用 javascript，这有意义吗？

有人可以给我一个例子，说明正确完成后这样的事情会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:32:16.067

是的，您应该使用 JSON。这样您就不必担心引号或`</script>`字符串中间的问题。

```
if(<?= json_encode(Yii::app()->controller->action->id) ?> == 'create'){
   ...
     url: <?php echo json_encode($this->createUrl('related')); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:39:34.360

我对您使用的框架没有很好的经验，但是如果您将变量从控制器传递到您的视图会更好：

控制器：

```
...
$action_id = Yii::app()->controller->action->id;
$created_url = $this->createUrl('related'); //$this might not be in context here

$this->render('your_view_name', array('action_id'=>$action_id, 'created_url'=>$created_url));
... 
```

看法：

```
if('<?= $action_id ?>' == 'create'){
 $("#Event_name").focusout(function(){
  $.ajax({
    success: function(html)
    {
     type: 'get',
     url: '<?= $created_url ?>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T21:26:52.943

就个人而言，我建议将该条件移动到您的控制器中。它非常简单，可以通过 PHP 处理，无需在模板中检查该等式。

我对 Yii 不是很熟悉，但可能会重写如下：

```
$action_id = Yii::app()->controller->action->id;
$params = array();
if ($action_id == 'action') {
    $created_url = $this->createUrl('related'); //$this might not be in context here
    $params['handler'] = $this->render('yourhandler.tpl.php', array('created_url'=>$created_url));
}
$this->render('your_view_name', $params); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T17:52:38.220

`CJavaScript::encode()`是你的人，它是传递变量和数组，甚至将字符串从 PHP 转义到 JavaScript 的好方法。

# c - 转换错误：需要左值作为赋值的左操作数

> ID：11057728
> 
> 赞同：3
> 
> 时间：2012-06-15T20:25:36.737
> 
> 标签：c, pointers, casting, lvalue

所以我尝试使用`ether_aton()`which 返回一个`struct ether_addr *`.
我试图把它放在我的`struct ether_header *eptr`（来自net/ethernet.h）中，它有`ether_shost`成员。我试过这个：

```
 struct ether_header *eptr;  /* net/ethernet.h */
 ... 
 (struct ether_addr*)(eptr->ether_shost) = ether_aton(SRC_ETHER_ADDR); 
```

这给了我`"Error: lvalue required as left operand of assignment"`

我知道我只是没有正确地投射它，但不知道如何。

* * *

编辑：最终得到它。谢谢你们的帮助。

```
struct ether_addr* eth_addr = ether_aton(SRC_ETHER_ADDR);
int i;  
for(i=0; i<6; i++)
    eptr->ether_shost[i] = eth_addr->ether_addr_octet[i]; 
```

只需单独分配每个八位字节。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:26:16.740

您不能在 C 中强制转换赋值运算符的左操作数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-01T00:31:29.907

一位发帖人写道“你不能在 C 中转换赋值运算符的左操作数”

这是真的，有点，但有一种情况是不正确的：强制转换，然后取消引用指针：

```
 *((int *) chrPtrValue) = some_integer_expression; 
```

在这种情况下，我们告诉编译器将 chrPtrValue 视为整数指针表达式，然后我们要求编译器取消引用它，以便我们可以在那里存储一些东西。

请注意，您可以通过这种方式进行一些时髦/危险的指针操作，例如：

```
 *((int *) 0xFEDBCA01) = 0; 
```

只需提供文字常量值，即可在任意位置存储零！例如，如果您正在查看和戳内存映射的 I/O 寄存器，这很疯狂，但很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:30:12.950

更具体地说，您正在“铸造” ether_shost （一个结构）。我认为您的意思是投射“eptr”。

这应该编译（但它没有意义和愚蠢）：

```
(struct ether_addr*)(eptr)->ether_shost = ether_aton(SRC_ETHER_ADDR); 
```

# sql - 我怎样才能使这种组和成员的选择更简单、更有效？

> ID：11057729
> 
> 赞同：1
> 
> 时间：2012-06-15T20:25:41.607
> 
> 标签：sql, sql-server-2008, sql-server-2005

# 背景

我有一个**组**表、**用户**表和一个**group_members**表。

```
groups { group_ varchar(50) not null, etc... }
users  { user_id varchar(50) not null, etc... }
group_members { group_ varchar(50 not null, member varchar(50) not null } 
```

我的要求表明一个组可以有其他组作为成员。用户需要被视为他们所属的任何组的所有组的成员。
例如，考虑这些表中的以下数据：

```
group_members              | groups         | users    |
========================== | ============== | ======== |
group_          member     | group_         | user_id  |
-------------------------- | -------------- | -------- |
'SYSTEM_ADMIN'  'OE_ADMIN' | 'SYSTEM_ADMIN' | 'USER    |
'SYSTEM_ADMIN'  'AR_ADMIN' | 'OE_ADMIN'     |          |
'SYSTEM_ADMIN'  'USER'     | 'AR_ADMIN'     |          | 
```

问我想要的结果是 **什么组是“用户”的成员？**应该

```
member
==============
'SYSTEM_ADMIN'
'OE_ADMIN'
'AR_ADMIN' 
```

# 问题

我已经构建了以下查询并为我提供了所需的结果，但它看起来有点复杂。

```
WITH GM
AS (
    SELECT GROUP_, MEMBER FROM group_members 
       WHERE member IN (SELECT group_ FROM groups)
)
SELECT group_ FROM group_members WHERE member = 'USER'
UNION
SELECT MEMBER AS GROUP_ FROM GM 
   WHERE group_ in (SELECT group_ FROM group_members WHERE member = 'USER') 
```

有关如何使此查询更简单或更简洁的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:02:36.687

您的递归 CTE 看起来不错。

它的表现如何？

我不认为有任何重要的方法可以让它变得更简单——递归 CTE 总是看起来有点乱。

WHERE IN 等价于 JOIN，但我不认为它更具可读性，并且执行计划应该非常等价。

您的根行可以表示为递归行之前的 CTE，但它不会真正节省太多可读性：

```
WITH root AS ()
     ,CTE AS ()
SELECT FROM ROOT 
    UNION
SELECT FROM CTE 
```

在任何情况下，您都可以将它放在视图或内联表值函数（带有参数）中，以便在系统的其他地方轻松使用它，这样您就不必经常看到它。

我为层次结构所做的事情是构建一个更高性能的扁平化/非规范化版本，并在触发器或计时器上对其进行更新，并将其用作只读性能增强器。例如，在技术支持系统中，我们构建一个问题可以在层次结构中标记一个问题时，我们填写了所有父母（打印机 - > HP-> LaserJet）时，在选择一个孩子时，可以轻松查询问题任何版本的 Windows 上的 hp 打印机或 Windows XP 上的laserjets 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:45:13.410

根据@Cade Roux 的回答，进一步的思考将我引导至以下存储过程

```
ALTER PROCEDURE GetUserGroups
@user_id varchar(50)
AS
BEGIN
SET NOCOUNT ON;

SELECT group_ FROM group_members WHERE member = @user_id
UNION
SELECT MEMBER AS GROUP_ FROM group_members
WHERE group_ IN (SELECT group_ FROM group_members WHERE member = @user_id) 
      AND member != @user_id
END 
```

这简化了原始查询，并正确地满足了我的要求，即获取 @user_id 所属的组名列表以及顶级组成员的组名。

此代码仅允许组中的组达到一个级别。

# javascript - 我的 Array 子类不调用超级构造函数

> ID：11057731
> 
> 赞同：0
> 
> 时间：2012-06-15T20:25:48.160
> 
> 标签：javascript, inheritance, constructor, prototype

根据[这个答案](https://stackoverflow.com/questions/1595611/how-to-properly-create-a-custom-object-in-javascript)，我想创建自己的子类`Array`

```
QArray = function() {
    Array.apply(this, arguments);
};
QArray.prototype = new Array();
QArray.prototype.constructor = QArray; 
```

它按预期工作，方法调用有效，但构造函数没有链接到 Array。

```
// test constructor chaining
q = new QArray('1', '2', '3');
assert.equals('1', q[0]);      // => undefined
assert.equals(3, q.length);    // => 0
q = new QArray(10);
assert.equals(10, q.length);   // => 0 
```

如果我替换`QArray`为 plain ，则此测试通过`Array`。不知怎的`Array`，似乎是个特例。（我在 Javascript 1.5 的 Rhino 1.6 中运行它。）如何修复我的自定义子类 Array？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:38:25.133

由于您的方法已经继承了数组方法，因此您可以使用修改键的数组方法，例如`Array.prototype.push`：

```
QArray = function() {
    if (arguments.length == 1) this.length = arguments[0]; // Array constructor
    else this.push.apply(this, arguments);
};
QArray.prototype = new Array();
QArray.prototype.constructor = QArray;

q = new QArray('1', '2', '3');   // => [1,2,3]
assert.equals('1', q[0]);        // => true
assert.equals(3, q.length);      // => true
q = new QArray(10);              // => [,,,,,,,,,]
assert.equals(10, q.length);     // => true
q instanceof QArray;             // => true
q instanceof Array;              // => true 
```

我曾经编写过一个自定义数组实现，它的行为就像一个真正的数组（包括`length`setter/getter）。如果您需要灵感，请查看[此答案](https://stackoverflow.com/a/9854216/938089?how-to-create-a-constructor-which-behaves-like-a-true-array)。

# javascript - 检索博客中所有标签的列表

> ID：11057732
> 
> 赞同：8
> 
> 时间：2012-06-15T20:25:49.047
> 
> 标签：javascript, gdata, blogger

有没有办法使用 gdata api 来检索博主中所有*标签的列表？*

我需要根据该列表创建一个菜单，但不能简单地列出所有帖子并获取它，因为它是一个繁忙的博客并且有 2000 多个帖子。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T07:06:48.727

这是使用 json 调用获取标签列表的最简单方法：

```
<script>
    function cat(json){ //get categories of blog & sort them
        var label = json.feed.category;
        var lst=[];
        for (i=0; i<label.length; i++){
          lst[i] = label[i].term ;  
        }
        alert(lst.sort());  //use any sort if you need that 
    }

</script>

<script src="http://yourblog.blogspot.com/feeds/posts/summary?alt=json&max-results=0&callback=cat"></script> 
```

只需使用您的博客网址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T16:29:01.060

很简单，我给你两种方法

1.  使用 Javascript API 首先，您必须使用：

    `<script type="text/javascript" src="http://www.google.com/jsapi"></ script> <script type='text/javascript'>
    google.load("gdata", "1.x", { packages : ["blogger"] });
    </script>`

    其次，您可以使用下面的代码来检索标签

    `postRoot.entry.getCategories()[i].getTerm()`

    更多教程，您可以阅读[http://www.threelas.com/2012/05/how-to-retrieve-posts-using-blogger.html](http://www.threelas.com/2012/05/how-to-retrieve-posts-using-blogger.html)和[http://www.threelas.com/2012/04/基本博客-javascript-api.html](http://www.threelas.com/2012/04/basic-blogger-javascript-api.html)

2.  用json和json，如果你想学习如何检索标签列表，使用这个对象

    `json.feed.entry[i].category[j].term`

    更多详细教程，请阅读[http://www.threelas.com/2012/02/basic-blogger-json-feed-api.html](http://www.threelas.com/2012/02/basic-blogger-json-feed-api.html)和[http://www.threelas.com/2012/09/blogger-json -feed-with-jquery-ajax.html](http://www.threelas.com/2012/09/blogger-json-feed-with-jquery-ajax.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T21:22:26.860

我发现的方法是使用 Blogger 自己的名为 Labels 的小工具。它在一些无序列表（ul）和链接（a）中打印标签列表及其使用计数。您可以在使用 javascript 加载标签后从中提取标签，如下所示：

```
$(".list-label-widget-content a").each(function (i, el) {
    var labelText = $(el).text();
    // do what you want with the labels
}); 
```

最后，删除 Labels div 元素 ( `<div class='widget Label' id='Label1'>`)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-28T06:38:15.100

用于服务器相同目的的小部件由博主自己提供。

![在此处输入图像描述](../Images/51fa0352f1bb0ebca372606caf7c602e.png)

小部件提供各种选项，例如 -

1.  您可以显示所有标签或从现有列表中选择
2.  您可以按字母顺序或按标签使用次数（频率）对标签进行排序。
3.  您可以选择将它们显示为列表或云（混乱）。

![在此处输入图像描述](../Images/bbc786c54a7698f94eedc98839fa88eb.png)

您可以在我的博客中看到相同的内容 -[链接](http://opensourceforgeeks.blogspot.in/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T23:16:23.827

我没有看到在博客中获取标签列表的方法，但您可以检索所有帖子（https://developers.google.com/blogger/docs/2.0/json/reference/posts/list）并检查`labels`他们每个人的字段： [https ://developers.google.com/blogger/docs/2.0/json/reference/posts#resource](https://developers.google.com/blogger/docs/2.0/json/reference/posts#resource)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-21T16:20:21.563

首先在控制台中通过以下代码添加 JQuery。

```
var jq = document.createElement('script');
jq.src = "https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js";
document.getElementsByTagName('head')[0].appendChild(jq); 
```

// ... 给脚本加载时间，然后输入（或见下文非等待选项）

```
 jQuery.noConflict(); 
```

完成此操作后，我们可以利用 JQuery 并获取标签列表

现在我所做的将适用于 Blogger Theme Notable 和新添加的 Blogger 主题。

通常在这些主题中，您会在页面的右侧工具菜单中看到标签。

所以你需要它点击标签并点击显示更多。

现在打开浏览器调试控制台并声明和变量。

```
var str = ""; 
```

现在运行下面的两个代码

```
1\. $('.first-items .label-name').each(function(){str = str + ", "+($(this).text())})
2\. $('.remaining-items .label-name').each(function(){str = str + ", "+($(this).text())})
3\. str 
```

您将以逗号（;）分隔格式获得的所有标签。

# php - 如何在 php 中解析 .conf 文件

> ID：11057733
> 
> 赞同：6
> 
> 时间：2012-06-15T20:25:54.820
> 
> 标签：php, httpd.conf

是否有任何特殊功能可以解析 php 中的 .conf 文件之类的`parse_ini_file()`功能？如果没有，我怎么能做到这一点？谢谢！

**编辑 ：**

Conf 就像 httpd.conf(Apache)。（我想阅读和编辑 httpd.conf 文件）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:40:46.170

不，解析 httpd.conf 没有特殊的功能，但是解析器应该很容易编写。例如，如果您只对键值设置感兴趣，例如`ServerRoot /var/www`，那么这将起到作用：

```
<?php

define('HTTPD_CONF', '/tmp/httpd.conf');

$lines = file(HTTPD_CONF);
$config = array();

foreach ($lines as $l) {
    preg_match("/^(?P<key>\w+)\s+(?P<value>.*)/", $l, $matches);
    if (isset($matches['key'])) {
        $config[$matches['key']] = $matches['value'];
    }
}

var_dump($config); 
```

如果你想解析 the`<Directory ...>`和其他块，它会花费你更多的代码行，但它不应该太费力。这真的取决于你想做什么。`$_SERVER`您可以从和获得大量信息`getenv()`，因此您可能不需要解析配置文件。

**编辑**

为了响应您的更新，要编辑 httpd.conf，您需要以超级用户权限运行脚本并重新加载 httpd.conf（例如，`system("apachectl graceful");`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T20:37:30.447

这取决于您所说的 .conf 文件是什么意思 - 该标签是否暗示您的意思是 Apache httpd.conf 文件？在那种情况下，我很确定答案是否定的——但这取决于你想用它做什么。

解析 Apache .conf 文件的一般情况是一个相当棘手的问题。<Location>、<Directory>、<VirtualHost> 等块都可以更改特定请求的服务器配置更改方式。最关键的是，您需要能够理解在启用模块时添加额外配置的 <IfModule> 块（因此您需要能够确定该特定模块是否已加载到 Apache 进程中）。完成所有这些后，您需要查看使用 Include 指令加载的任何其他配置文件。最后的美中不足来自附加模块，这些模块可以定义自己的配置设置 - 您的代码将需要优雅地处理它不理解的任何配置设置。

如果你限制问题，那么它会变得更容易。您知道（并控制）服务器配置吗？如果是这样，那么您将知道加载了哪些模块、引用了哪些文件以及是否包含任何特殊结构。您可能能够以不同的方式限制问题 - 您是否只想要一个特定的设置，并且该设置是否往往只定义一次？如果是这样，您可以只搜索该字符串。

最后，如果您希望解析 Apache 配置文件作为向其写入数据的前奏，那么我会提醒您不要这样做 - 允许 Web 应用程序修改服务器配置会使您暴露于一整类安全漏洞t 之前可用。

当然，如果您根本不是在谈论 Apache .conf 文件，那么这个问题就更难回答了。如果您正在为自定义应用程序定义自己的配置文件格式，您可以按照自己的喜好进行定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-25T16:22:27.027

正如这里提到的[Apache config parser for PHP](https://stackoverflow.com/questions/14429621/apache-config-parser-for-php/59911093#59911093)，pear/config 收集了一些工具来解析不同类型的配置文件：[https ://github.com/pear/Config](https://github.com/pear/Config)

例子：

```
$conf = new Config();
$root = $conf->parseConfig("/etc/apache2/httpd.conf", "apache");
print current($root->getItem('directive', 'Listen'))->content; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-18T12:03:53.537

最好的方法是用来 `$conf = parse_ini_file("YOUR_CONF_FILE.conf",1)` 解析你的配置文件。

# javascript - 两个异步函数的一个回调，一个是 google api getDistanceMatrix

> ID：11057744
> 
> 赞同：0
> 
> 时间：2012-06-15T20:27:06.883
> 
> 标签：javascript, jquery, ajax, asynchronous, google-maps-api-3

我正在尝试创建一个同时执行两个异步操作的函数。一个是简单的 AJAX 请求，第二个是来自 google maps API 的 getDistanceMatrix。关键是我想要一个使用来自这两个函数的数据的回调函数。我对 JQUERY 函数 $.when() 很熟悉，但我只能在处理两个 AJAX 函数时使用它，而不能使用 google API。这是我试图开始工作的代码。a1 很好，但 a2 未定义。

```
function getLocation(){
    var service = new google.maps.DistanceMatrixService()
    var origin = new google.maps.LatLng(32.07989,34.813026);
    var destination = new google.maps.LatLng(32.08989,34.813026);
    return  service.getDistanceMatrix({
        origins: [origin],
        destinations: [destination],
        travelMode: google.maps.TravelMode.WALKING ,
        unitSystem: google.maps.UnitSystem.METRIC,
        avoidHighways: false,
        avoidTolls: false
    })
}
function getFriends(){
    return $.ajax({
        data: "&action=get_friends"
    });
$.when( getLocation(),getFriends()).done(function(a2,a1){
        alert(a1)
        alert(a2)
    });
} 
```

我的猜测是谷歌地图 API 只是不返回任何值，但我想找到一个不涉及复杂模式的解决方案。
谢谢你的时间，
丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:54:28.267

您可以为回调构建自己的`$.Deferred`实例：`service.getDistanceMatrix()`

```
function getLocation(){
    var deferred = new $.Deferred();
    var service = new google.maps.DistanceMatrixService()
    var origin = new google.maps.LatLng(32.07989,34.813026);
    var destination = new google.maps.LatLng(32.08989,34.813026);
    service.getDistanceMatrix({
        origins: [origin],
        destinations: [destination],
        travelMode: google.maps.TravelMode.WALKING ,
        unitSystem: google.maps.UnitSystem.METRIC,
        avoidHighways: false,
        avoidTolls: false
    }, function(response, status) {
        if (status == google.maps.DistanceMatrixStatus.OK) {
          deferred.resolve(response);
        } else {
          deferred.reject(status);
        }
    })
    return deferred.promise();
} 
```

这个`getLocation()`函数会返回一个你可以在 中使用的延迟承诺`$.when()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:48:29.843

我的猜测是`service.getDistanceMatrix`调用不会作为调用的结果返回数据，而是调用带有结果的回调函数：

来自[https://developers.google.com/maps/documentation/javascript/distancematrix](https://developers.google.com/maps/documentation/javascript/distancematrix)：

> 成功调用距离矩阵服务会返回一个 DistanceMatrixResponse 对象和一个 DistanceMatrixStatus 对象。这些将传递给您在请求中指定的回调函数。

您可能需要提供一个回调，将响应对象返回给您的延迟：

```
function getLocation(){
    var service = new google.maps.DistanceMatrixService()
    var origin = new google.maps.LatLng(32.07989,34.813026);
    var destination = new google.maps.LatLng(32.08989,34.813026);
    return  service.getDistanceMatrix({
        origins: [origin],
        destinations: [destination],
        travelMode: google.maps.TravelMode.WALKING ,
        unitSystem: google.maps.UnitSystem.METRIC,
        avoidHighways: false,
        avoidTolls: false
    }, myCallback) // add callback here
}
function getFriends(){
    return $.ajax({
        data: "&action=get_friends"
    });
$.when( getLocation(),getFriends()).done(function(a2,a1){
        alert(a1)
        alert(a2)
    });
}
// declare the callback function
function myCallback(response, status) {
  if (status == google.maps.DistanceMatrixStatus.OK) {
    return response;
  } else {
    return false;
  }
} 
```

# mercurial - 文件中行范围的 Mercurial log/diff

> ID：11057745
> 
> 赞同：2
> 
> 时间：2012-06-15T20:27:11.080
> 
> 标签：mercurial, diff, history

我想要一个扩展程序或工具来帮助我浏览给定文件中一系列行的历史记录。假设我想查看特定函数的历史记录，当前位于 [start, end] 行。hg annotate 让我开始：

```
AAA  772 06-Aug-02: void Graphics2DDXF::lineTo(double x, // the x coordinate
AAA  772 06-Aug-02:                            double y // the y cooordinate
AAA  772 06-Aug-02:                            )
AAA  772 06-Aug-02:     {
BBB 2034 30-Aug-04:     LOG;
BBB 6989 05-Dec-11: 
BBB 4638 31-Oct-07:     transform_->transform(&x,&y);
AAA  772 06-Aug-02: 
BBB 7011 06-Jan-12:     AGcRoot<Line> line = gcnew Line;
BBB 6989 05-Dec-11: 
BBB 6989 05-Dec-11:     Point3d startPoint(lastPenLocation_->x(), lastPenLocation_->y(), 0.0);
BBB 6989 05-Dec-11:     Point3d endPoint(x, y, 0.0);
BBB 6989 05-Dec-11:     line->StartPoint = startPoint;
BBB 6989 05-Dec-11:     line->EndPoint = endPoint;
BBB 6989 05-Dec-11: 
BBB 4638 31-Oct-07:     lastPenLocation_ = APoint2D::New(x,y,AToleranceID::None);
BBB 7011 06-Jan-12: 
BBB 7011 06-Jan-12:     setAndAddEntity(line);
AAA  772 06-Aug-02:     } 
```

此方法的最后一次更改是更改集 7011。我可以使用“hg diff -c7011”来检查它。

困难的部分是在那之前发生的事情。从 7011-1 的注释输出开始：

```
% hg annotate -r7010 file.cpp
...
AAA  772 06-Aug-02: void Graphics2DDXF::lineTo(double x, // the x coordinate
AAA  772 06-Aug-02:                            double y // the y cooordinate
AAA  772 06-Aug-02:                            )
AAA  772 06-Aug-02:     {
BBB 2034 30-Aug-04:     LOG;
BBB 6989 05-Dec-11: 
BBB 4638 31-Oct-07:     transform_->transform(&x,&y);
AAA  772 06-Aug-02: 
BBB 6989 05-Dec-11:     Line^ line = gcnew Line;
AAA  772 06-Aug-02:     addEntityToModelSpace(line);
AAA  772 06-Aug-02: 
AAA  772 06-Aug-02:     ensureLayerAvailable();
BBB 6989 05-Dec-11:     line->LayerId = s_currentLayerObjectId;
BBB 6989 05-Dec-11: 
BBB 6989 05-Dec-11:     Point3d startPoint(lastPenLocation_->x(), lastPenLocation_->y(), 0.0);
BBB 6989 05-Dec-11:     Point3d endPoint(x, y, 0.0);
BBB 6989 05-Dec-11:     line->StartPoint = startPoint;
BBB 6989 05-Dec-11:     line->EndPoint = endPoint;
BBB 6989 05-Dec-11: 
BBB 6989 05-Dec-11:     line->LinetypeId = currentLinetypeId();
BBB 6989 05-Dec-11:     line->ColorIndex = dwgColor(getColor());
BBB 4638 31-Oct-07:     lastPenLocation_ = APoint2D::New(x,y,AToleranceID::None);
AAA  772 06-Aug-02:     } 
```

所以现在我可以看到影响这一行范围的先前变更集是 6989。等等。

如果有一个可视化工具来做这件事会很棒，但我会对只给我一系列变更集的东西感到满意：7011、6989 等。

过滤行号范围的注释输出并找到最大变更集编号并不难。困难的是调整行的范围以考虑添加和删除的行，尤其是当“差异”声称更改跨越了行范围的最小值或最大值时。至少 CVS diff 输出很难做到这一点，我还没有用 hg diff 的输出尝试过。

如果我梦寐以求的工具/扩展不存在，是否至少有任何工具可以计算修改后的行号？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:06:03.693

它不是为它而构建的，但您可以通过使用`hg grep`to search 来近似它，`.`这意味着正则表达式中的*任何内容*。这会让你得到这样的输出：

```
ry4an@four:~/projects/unblog$ hg grep --all --user --date . config.yaml 
config.yaml:79:-:ry4an-hg:Mon Apr 23 22:45:24 2012 -0400:TAGLINE: I think in a monospaced font.
config.yaml:79:+:ry4an-hg:Mon Apr 23 22:45:24 2012 -0400:TAGLINE: A blog about software, projects, and other little things I build.
config.yaml:52:-:ry4an-hg:Sat Apr 30 11:25:08 2011 -0500:AUTHOR: Ry4an Brase
config.yaml:52:-:ry4an-hg:Sat Apr 30 11:25:08 2011 -0500:#DISQUS: rafaelmartins-en
config.yaml:52:-:ry4an-hg:Sat Apr 30 11:25:08 2011 -0500:TIMEZONE: UTC
config.yaml:52:+:ry4an-hg:Sat Apr 30 11:25:08 2011 -0500:#POSTS_PER_PAGE: 10
config.yaml:52:+:ry4an-hg:Sat Apr 30 11:25:08 2011 -0500:AUTHOR: Ry4an Brase
config.yaml:52:+:ry4an-hg:Sat Apr 30 11:25:08 2011 -0500:#DISQUS: your-disqus-id
config.yaml:52:+:ry4an-hg:Sat Apr 30 11:25:08 2011 -0500:TIMEZONE: UTC
config.yaml:0:+:ry4an-hg:Sat Jan 22 22:51:22 2011 -0600:TITLE: Ry4an's Unblog
config.yaml:0:+:ry4an-hg:Sat Jan 22 22:51:22 2011 -0600:TITLE_HTML: Ry4an's Unblog
config.yaml:0:+:ry4an-hg:Sat Jan 22 22:51:22 2011 -0600:TAGLINE: I think in a monospaced font.
config.yaml:0:+:ry4an-hg:Sat Jan 22 22:51:22 2011 -0600:AUTHOR: Ry4an Brase
config.yaml:0:+:ry4an-hg:Sat Jan 22 22:51:22 2011 -0600:#DISQUS: rafaelmartins-en
config.yaml:0:+:ry4an-hg:Sat Jan 22 22:51:22 2011 -0600:TIMEZONE: UTC 
```

where`+`表示添加了一行，`-`表示将其删除。该`--all`选项表示显示所有匹配项，而不仅仅是每行最近的匹配项。

# javascript - 如何监控 jQuery 中的 body 'data' 属性何时发生变化？

> ID：11057748
> 
> 赞同：5
> 
> 时间：2012-06-15T20:27:19.457
> 
> 标签：javascript, jquery, jquery-events

我的 body 标签中有 data-segment 属性，该属性由滑块更改。当它被改变时，我需要根据它的值触发一个函数。

我不确定在这种情况下如何附加事件侦听器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:32:24.013

`当 DOM 节点属性更改时，没有可靠的跨浏览器方式来接收事件。一些浏览器支持“DOM 突变事件”，但您不应该依赖它们，您可以通过 Google 搜索该短语来了解该技术的命运多舛的历史。

如果滑块控件没有触发自定义事件（我认为大多数现代事件都会触发），那么您最好的选择是设置一种`setInterval()`方法来轮询该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-24T11:12:17.207

您可以使用，这是[每个浏览器中都可用](https://caniuse.com/#feat=mutationobserver)`MutationObserver`的 API ，并且避免使用. 如果你在 中引用了你的元素，你可以这样做：`setInterval``element`

```
const mutationObserver = new MutationObserver(callback);
mutationObserver.observe(element, { attributes: true });

function callback() {
  // This function will be called every time attributes are
  // changed, including `data-` attributes.
} 
```

使用此 API 可以轻松检测到元素中的其他更改，您甚至可以获取在回调中更改的属性的旧值和新值，在调用中调整配置对象`observe`。所有关于此的文档都可以在 MDN 中阅读：[https ://developer.mozilla.org/en-US/docs/Web/API/MutationObserverInit](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserverInit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-20T09:38:29.960

因为在我的用例中，我的所有内容`.data('type', 'value')`都设置在 javascript 块中，所以在我的情况下，我只是在`.change()`之后放置一个链`.data(...)`并使用正常访问更新`$("#oh-my-data").change()`

这对我来说很好，请参阅演示。

```
$("#oh-my-data").change(function() {
  $("#result").text($("#result").text() + ' ' + $(this).data('value'));
})

$("#oh-my-data").data('value', 'something1').change();

$("#oh-my-data").data('value', 'something2').change();

$("#oh-my-data").data('value', 'something3').change();
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input id="oh-my-data" type="hidden" data-value="" /> Result: <span id="result"></span>
```

但是这个解决方案有一个问题，如果`.data()`是由外部库设置的，那么这将不起作用，因为你不能在`.change()`它上面添加。

# php - 在 URL 中传递字符串和 int

> ID：11057751
> 
> 赞同：-1
> 
> 时间：2012-06-15T20:27:30.273
> 
> 标签：php, html, url

我认为这不是一个非常典型的问题，但我被困在这里。我必须在 URL 中传递一个字符串和一个整数，以便我的 PHP 处理它。

我正在建立链接，例如... `$link = 'index.php?NAME=' . $name . '&id=' . $id;`

但是当它出现在 URL 中时，它会更改为 `index.php?NAME=hello&amp;id=10`

现在 id 没有被 GET 识别。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:28:44.743

用于`url_encode()`所有变量。或者，更好的是，使用`http_build_query()`.

```
$link = 'index.php?' . http_build_query(array(
    'NAME' => $name,
    'id' => $id
)); 
```

*   [http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)
*   [http://php.net/manual/en/function.http-build-query.php](http://php.net/manual/en/function.http-build-query.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:33:24.780

`<a href="http://www.somedomain.com/<?php echo $link;?>">Link</a>`应该可以，你能详细说明你是如何显示链接的吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T20:33:13.397

试试这个简单的解决方案；

```
$link = 'index.php?NAME="{$name}&id={$id}"'; 
```

# .net - delphi xe2实现.net中的wcf并支持回调

> ID：11057755
> 
> 赞同：2
> 
> 时间：2012-06-15T20:28:03.180
> 
> 标签：.net, wcf, delphi, delphi-xe2, wcf-callbacks

我制作了一个简单的 .NET WCF wsDualHttpBinding 来回调客户端。现在我正在尝试制作一个简单的 delphi 控制台应用程序来实现我的 wcf 服务。这是 wsdl soap 1.2 在 delphi 中为我生成的代码

我认为我需要做的是这样的事情，但无法理解 Delphi 对 OnMessageAdded 的期望

```
Listener := MessageService.GetIMessage(true);
Listener.Subscribe(MessageService.Subscribe.Create);

Listener.OnMessageAdded :=
Sender := MessageService.GetIMessage(true);
Sender.Subscribe(MessageService.Subscribe.Create); 
```

这是 WSDL [http://pastebin.com/H4mJmjS4](http://pastebin.com/H4mJmjS4)

这是由delphi xe2生成的代码

```
// ************************************************************************ //
// The types declared in this file were generated from data read from the
// WSDL File described below:
// WSDL     : http://localhost:8700/Design_Time_Addresses/WCFCallbacks/Message/?wsdl
//  >Import : http://localhost:8700/Design_Time_Addresses/WCFCallbacks/Message/?wsdl>0
//  >Import : http://localhost:8700/Design_Time_Addresses/WCFCallbacks/Message/?xsd=xsd0
//  >Import : http://localhost:8700/Design_Time_Addresses/WCFCallbacks/Message/?xsd=xsd1
// Encoding : utf-8
// Codegen  : [wfForceSOAP12+]
// Version  : 1.0
// (06/15/2012 2:43:02 PM - - $Rev: 45757 $)
// ************************************************************************ //

unit MessageService;

interface

uses InvokeRegistry, SOAPHTTPClient, Types, XSBuiltIns;

const
  IS_OPTN = $0001;
  IS_NLBL = $0004;
  IS_REF  = $0080;

type

  // ************************************************************************ //
  // The following types, referred to in the WSDL document are not being represented
  // in this file. They are either aliases[@] of other types represented or were referred
  // to but never[!] declared in the document. The types from the latter category
  // typically map to predefined/known XML or Embarcadero types; however, they could also
  // indicate incorrect WSDL documents that failed to declare or import a schema type.
  // ************************************************************************ //
  // !:string          - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:dateTime        - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:boolean         - "http://www.w3.org/2001/XMLSchema"[Gbl]

  Subscribe            = class;                 { "http://tempuri.org/"[Lit][GblElm] }
  AddMessageResponse   = class;                 { "http://tempuri.org/"[Lit][GblElm] }
  AddMessage           = class;                 { "http://tempuri.org/"[Lit][GblElm] }
  OnMessageAdded       = class;                 { "http://tempuri.org/"[Lit][GblElm] }
  UnsubscribeResponse  = class;                 { "http://tempuri.org/"[Lit][GblElm] }
  SubscribeResponse    = class;                 { "http://tempuri.org/"[Lit][GblElm] }
  Unsubscribe          = class;                 { "http://tempuri.org/"[Lit][GblElm] }

  // ************************************************************************ //
  // XML       : Subscribe, global, <element>
  // Namespace : http://tempuri.org/
  // Serializtn: [xoLiteralParam]
  // Info      : Wrapper
  // ************************************************************************ //
  Subscribe = class(TRemotable)
  private
  public
    constructor Create; override;
  published
  end;

  // ************************************************************************ //
  // XML       : AddMessageResponse, global, <element>
  // Namespace : http://tempuri.org/
  // Serializtn: [xoLiteralParam]
  // Info      : Wrapper
  // ************************************************************************ //
  AddMessageResponse = class(TRemotable)
  private
  public
    constructor Create; override;
  published
  end;

  // ************************************************************************ //
  // XML       : AddMessage, global, <element>
  // Namespace : http://tempuri.org/
  // Serializtn: [xoLiteralParam]
  // Info      : Wrapper
  // ************************************************************************ //
  AddMessage = class(TRemotable)
  private
    Fmessage_: string;
    Fmessage__Specified: boolean;
    procedure Setmessage_(Index: Integer; const Astring: string);
    function  message__Specified(Index: Integer): boolean;
  public
    constructor Create; override;
  published
    property message_: string  Index (IS_OPTN or IS_NLBL) read Fmessage_ write Setmessage_ stored message__Specified;
  end;

  // ************************************************************************ //
  // XML       : OnMessageAdded, global, <element>
  // Namespace : http://tempuri.org/
  // Serializtn: [xoLiteralParam]
  // Info      : Wrapper
  // ************************************************************************ //
  OnMessageAdded = class(TRemotable)
  private
    Fmessage_: string;
    Fmessage__Specified: boolean;
    Ftimestamp: TXSDateTime;
    Ftimestamp_Specified: boolean;
    procedure Setmessage_(Index: Integer; const Astring: string);
    function  message__Specified(Index: Integer): boolean;
    procedure Settimestamp(Index: Integer; const ATXSDateTime: TXSDateTime);
    function  timestamp_Specified(Index: Integer): boolean;
  public
    constructor Create; override;
    destructor Destroy; override;
  published
    property message_:  string       Index (IS_OPTN or IS_NLBL) read Fmessage_ write Setmessage_ stored message__Specified;
    property timestamp: TXSDateTime  Index (IS_OPTN) read Ftimestamp write Settimestamp stored timestamp_Specified;
  end;

  // ************************************************************************ //
  // XML       : UnsubscribeResponse, global, <element>
  // Namespace : http://tempuri.org/
  // Serializtn: [xoLiteralParam]
  // Info      : Wrapper
  // ************************************************************************ //
  UnsubscribeResponse = class(TRemotable)
  private
    FUnsubscribeResult: Boolean;
    FUnsubscribeResult_Specified: boolean;
    procedure SetUnsubscribeResult(Index: Integer; const ABoolean: Boolean);
    function  UnsubscribeResult_Specified(Index: Integer): boolean;
  public
    constructor Create; override;
  published
    property UnsubscribeResult: Boolean  Index (IS_OPTN) read FUnsubscribeResult write SetUnsubscribeResult stored UnsubscribeResult_Specified;
  end;

  // ************************************************************************ //
  // XML       : SubscribeResponse, global, <element>
  // Namespace : http://tempuri.org/
  // Serializtn: [xoLiteralParam]
  // Info      : Wrapper
  // ************************************************************************ //
  SubscribeResponse = class(TRemotable)
  private
    FSubscribeResult: Boolean;
    FSubscribeResult_Specified: boolean;
    procedure SetSubscribeResult(Index: Integer; const ABoolean: Boolean);
    function  SubscribeResult_Specified(Index: Integer): boolean;
  public
    constructor Create; override;
  published
    property SubscribeResult: Boolean  Index (IS_OPTN) read FSubscribeResult write SetSubscribeResult stored SubscribeResult_Specified;
  end;

  // ************************************************************************ //
  // XML       : Unsubscribe, global, <element>
  // Namespace : http://tempuri.org/
  // Serializtn: [xoLiteralParam]
  // Info      : Wrapper
  // ************************************************************************ //
  Unsubscribe = class(TRemotable)
  private
  public
    constructor Create; override;
  published
  end;

  // ************************************************************************ //
  // Namespace : http://tempuri.org/
  // soapAction: http://tempuri.org/IMessage/%operationName%
  // transport : http://schemas.xmlsoap.org/soap/http
  // style     : document
  // use       : literal
  // binding   : WSDualHttpBinding_IMessage
  // service   : MessageService
  // port      : WSDualHttpBinding_IMessage
  // URL       : http://localhost:8700/Design_Time_Addresses/WCFCallbacks/Message/
  // ************************************************************************ //
  IMessage = interface(IInvokable)
  ['{8AE9E38B-51D7-6EB7-5470-5B197F54CF0A}']
    function  AddMessage(const parameters: AddMessage): AddMessageResponse; stdcall;
    function  Subscribe(const parameters: Subscribe): SubscribeResponse; stdcall;
    function  Unsubscribe(const parameters: Unsubscribe): UnsubscribeResponse; stdcall;

    // Cannot unwrap:
    //     - More than one strictly out element was found
    function  OnMessageAdded: OnMessageAdded; stdcall;
  end;

function GetIMessage(UseWSDL: Boolean=System.False; Addr: string=''; HTTPRIO: THTTPRIO = nil): IMessage;

implementation
  uses SysUtils;

function GetIMessage(UseWSDL: Boolean; Addr: string; HTTPRIO: THTTPRIO): IMessage;
const
  defWSDL = 'http://localhost:8700/Design_Time_Addresses/WCFCallbacks/Message/?wsdl';
  defURL  = 'http://localhost:8700/Design_Time_Addresses/WCFCallbacks/Message/';
  defSvc  = 'MessageService';
  defPrt  = 'WSDualHttpBinding_IMessage';
var
  RIO: THTTPRIO;
begin
  Result := nil;
  if (Addr = '') then
  begin
    if UseWSDL then
      Addr := defWSDL
    else
      Addr := defURL;
  end;
  if HTTPRIO = nil then
    RIO := THTTPRIO.Create(nil)
  else
    RIO := HTTPRIO;
  try
    Result := (RIO as IMessage);
    if UseWSDL then
    begin
      RIO.WSDLLocation := Addr;
      RIO.Service := defSvc;
      RIO.Port := defPrt;
    end else
      RIO.URL := Addr;
  finally
    if (Result = nil) and (HTTPRIO = nil) then
      RIO.Free;
  end;
end;

constructor Subscribe.Create;
begin
  inherited Create;
  FSerializationOptions := [xoLiteralParam];
end;

constructor AddMessageResponse.Create;
begin
  inherited Create;
  FSerializationOptions := [xoLiteralParam];
end;

constructor AddMessage.Create;
begin
  inherited Create;
  FSerializationOptions := [xoLiteralParam];
end;

procedure AddMessage.Setmessage_(Index: Integer; const Astring: string);
begin
  Fmessage_ := Astring;
  Fmessage__Specified := True;
end;

function AddMessage.message__Specified(Index: Integer): boolean;
begin
  Result := Fmessage__Specified;
end;

constructor OnMessageAdded.Create;
begin
  inherited Create;
  FSerializationOptions := [xoLiteralParam];
end;

destructor OnMessageAdded.Destroy;
begin
  SysUtils.FreeAndNil(Ftimestamp);
  inherited Destroy;
end;

procedure OnMessageAdded.Setmessage_(Index: Integer; const Astring: string);
begin
  Fmessage_ := Astring;
  Fmessage__Specified := True;
end;

function OnMessageAdded.message__Specified(Index: Integer): boolean;
begin
  Result := Fmessage__Specified;
end;

procedure OnMessageAdded.Settimestamp(Index: Integer; const ATXSDateTime: TXSDateTime);
begin
  Ftimestamp := ATXSDateTime;
  Ftimestamp_Specified := True;
end;

function OnMessageAdded.timestamp_Specified(Index: Integer): boolean;
begin
  Result := Ftimestamp_Specified;
end;

constructor UnsubscribeResponse.Create;
begin
  inherited Create;
  FSerializationOptions := [xoLiteralParam];
end;

procedure UnsubscribeResponse.SetUnsubscribeResult(Index: Integer; const ABoolean: Boolean);
begin
  FUnsubscribeResult := ABoolean;
  FUnsubscribeResult_Specified := True;
end;

function UnsubscribeResponse.UnsubscribeResult_Specified(Index: Integer): boolean;
begin
  Result := FUnsubscribeResult_Specified;
end;

constructor SubscribeResponse.Create;
begin
  inherited Create;
  FSerializationOptions := [xoLiteralParam];
end;

procedure SubscribeResponse.SetSubscribeResult(Index: Integer; const ABoolean: Boolean);
begin
  FSubscribeResult := ABoolean;
  FSubscribeResult_Specified := True;
end;

function SubscribeResponse.SubscribeResult_Specified(Index: Integer): boolean;
begin
  Result := FSubscribeResult_Specified;
end;

constructor Unsubscribe.Create;
begin
  inherited Create;
  FSerializationOptions := [xoLiteralParam];
end;

initialization
  { IMessage }
  InvRegistry.RegisterInterface(TypeInfo(IMessage), 'http://tempuri.org/', 'utf-8');
  InvRegistry.RegisterDefaultSOAPAction(TypeInfo(IMessage), 'http://tempuri.org/IMessage/%operationName%');
  InvRegistry.RegisterInvokeOptions(TypeInfo(IMessage), ioDocument);
  InvRegistry.RegisterInvokeOptions(TypeInfo(IMessage), ioLiteral);
  InvRegistry.RegisterInvokeOptions(TypeInfo(IMessage), ioSOAP12);
  RemClassRegistry.RegisterXSClass(Subscribe, 'http://tempuri.org/', 'Subscribe');
  RemClassRegistry.RegisterSerializeOptions(Subscribe, [xoLiteralParam]);
  RemClassRegistry.RegisterXSClass(AddMessageResponse, 'http://tempuri.org/', 'AddMessageResponse');
  RemClassRegistry.RegisterSerializeOptions(AddMessageResponse, [xoLiteralParam]);
  RemClassRegistry.RegisterXSClass(AddMessage, 'http://tempuri.org/', 'AddMessage');
  RemClassRegistry.RegisterExternalPropName(TypeInfo(AddMessage), 'message_', '[ExtName="message"]');
  RemClassRegistry.RegisterSerializeOptions(AddMessage, [xoLiteralParam]);
  RemClassRegistry.RegisterXSClass(OnMessageAdded, 'http://tempuri.org/', 'OnMessageAdded');
  RemClassRegistry.RegisterExternalPropName(TypeInfo(OnMessageAdded), 'message_', '[ExtName="message"]');
  RemClassRegistry.RegisterSerializeOptions(OnMessageAdded, [xoLiteralParam]);
  RemClassRegistry.RegisterXSClass(UnsubscribeResponse, 'http://tempuri.org/', 'UnsubscribeResponse');
  RemClassRegistry.RegisterSerializeOptions(UnsubscribeResponse, [xoLiteralParam]);
  RemClassRegistry.RegisterXSClass(SubscribeResponse, 'http://tempuri.org/', 'SubscribeResponse');
  RemClassRegistry.RegisterSerializeOptions(SubscribeResponse, [xoLiteralParam]);
  RemClassRegistry.RegisterXSClass(Unsubscribe, 'http://tempuri.org/', 'Unsubscribe');
  RemClassRegistry.RegisterSerializeOptions(Unsubscribe, [xoLiteralParam]);

end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:44:28.057

使用 wsDualHttpBinding，WCF 端希望将响应作为 HTTP 请求异步发送到客户端。

所以实际上你的 Delphi 应用程序也需要提供一个接受 WCF 请求的 HTTP 服务器。

Async operation support is not included in Delphis SOAP client implementation - adding a Delphi SOAP server which provides only the matching method(s) for the callback operations would be a workaround.

# python - 从mysql表中逐一选择记录-动态表，不断写入更多记录

> ID：11057759
> 
> 赞同：1
> 
> 时间：2012-06-15T20:28:22.717
> 
> 标签：python, mysql

我想从 MySQL 表中一次选择一条记录。我在这里找到了关于 SO 的类似帖子 -

[如何一一选择记录而不重复](https://stackoverflow.com/questions/3633040/how-to-select-records-one-by-one-without-repeating)

但是，在我的情况下，表大小不固定，数据不断添加到表中，我想从该表中一次选择一条记录。另外，我正在使用 python 连接到 mysql 数据库并对每条记录进行处理。任何指针？

PS：表的大小非常大，因此每次都无法计算表中的记录数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:02:37.297

此功能未内置在 SQL 中。

如果表上有一个密集的、递增的索引列，那么您只需执行以下操作：

```
i = 0
while True:
    # your usual select here, but with "and MyIndexColumn = %d' % (i,) 
```

对于某些数据库，无论您是否需要，都内置了这样一个列，通常称为“RowID”或“Row ID”；如果没有，您始终可以显式添加这样的列。

如果可以跳过这些值（通常它们可以，例如，如果没有其他原因，只是因为有人可以从中间删除一行），那么您当然必须能够处理返回 0 行的选择。

唯一的问题是没有办法告诉你什么时候完成。但这在您最初的问题陈述中是固有的：不断添加数据，而您事先不知道它的大小，那么您怎么能呢？如果您需要知道生产者何时完成，它必须以某种方式（可能通过数据库中的另一个表）为您提供它创建的最高 rowid。

# c# - 在服务器上发送邮件时，如何在客户端显示已发送电子邮件的计数？

> ID：11057760
> 
> 赞同：2
> 
> 时间：2012-06-15T20:28:23.653
> 
> 标签：c#, javascript, jquery, asp.net

使用 ASP.NET (C#) 在服务器上发送电子邮件时，如何在客户端显示已发送电子邮件的计数？

所以让我们看看我的场景：

*   我在 UpdatePanel 中有一个按钮。
*   此按钮应向我的用户（服务器端）发送一些电子邮件。
*   当我点击那个按钮时，我还想做一些这样的事情：

    1.  显示具有低不透明度的模态 div，其中心有一个标签（该标签的文本为“0”）。
    2.  开始发送邮件。
    3.  该标签的文本应该更新以反映每封发送的电子邮件（这是一个计数器）（0->1->2->...）
    4.  在发送邮件结束时，我想隐藏那个模态 div

我的代码：

### ASPX：

```
<asp:UpdateProgress ID="UpdateProgress1" runat="server">
  <ProgressTemplate>
    <asp:Image ID="imgAjax" runat="server" ImageUrl="~/Images/ajax-loader.gif" />
  </ProgressTemplate>
</asp:UpdateProgress>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
  <ContentTemplate>
    <div id="RadbtnSendEmails_Container">
      <telerik:RadButton ID="RadbtnSendEmails" runat="server" EnableEmbeddedSkins="False"
        Skin="BlackByMe" Text="Send Mails" Width="150px" OnClick="RadbtnSendEmails_Click"
        Font-Bold="True" Font-Names="Tahoma" ValidationGroup="A">
      </telerik:RadButton>
    </div>
  </ContentTemplate>
</asp:UpdatePanel>
<div id="OffDiv">
</div>
<div id="CounterContainer">
  <asp:Image ID="imgWhiteCircle" runat="server" ImageUrl="~/Images/WhiteCircle.png" />
  <asp:Label ID="lblCounter" runat="server" Text="0" Font-Bold="True"
    Font-Size="50px" ForeColor="#6600CC">
  </asp:Label>
</div> 
```

### C

```
protected void RadbtnSendEmails_Click(object sender, EventArgs e) {
  ScriptManager.RegisterStartupScript(this, this.GetType(), "Show_Counter", 
    "Show_Counter();", true);

  //int Counter=0;
  //Send Mail Codes in for()
  //Counter++; in every send
  //Change that label'text to new counter -> i do n't know how can i do that

  //ScriptManager.RegisterStartupScript(this, this.GetType(), "Hide_Counter", 
    "Hide_Counter();", true);
} 
```

但是，此 C# 代码存在问题：

当我单击该按钮时，UpdateProgress 中的图像会显示出来，在此块结束发送电子邮件后，我们可以看到模态 div，但在进程开始时看不到！

另外，我不知道如何实现该计数器！我应该从客户端代码跳转到服务器端代码还是从服务器端代码跳转到客户端代码。

这些电子邮件地址位于 Sql Server 2008R2 数据库中。所以我必须运行进程服务器端的那部分。

我真的很想学习如何解决这个问题，我认为这个场景很好，所以请帮助我了解这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T21:26:11.663

所以你面临的问题是你需要在服务器端做一些工作，但你想显示那个客户端。问题的第一部分是 HTTP 是一种无状态的无连接协议，因此您必须不断向服务器询问更多信息（更新）。

所以你需要几个资源：

服务器了解当前发送的电子邮件数量的一种方法（例如您可以访问的公共计数器），一种服务器运行以发送电子邮件的方法（这通常需要在后台线程上运行，但要小心，崩溃的后台线程（例如来自未处理的异常）将崩溃整个应用程序池）以及从客户端初始化进程的方法（您已经拥有这部分）。

然后在客户端上，您需要一种方法来发起请求，一种方法来检查更新并知道您何时完成，以及管理您想要的所有其他事情的方法。

我假设您使用的是 jQuery（它是 javascript 之上的一个库，但不会取代 javascript，这似乎是您需要学习的东西）并在此处编写一些基本代码。我还将假设您在页面上运行了 microsoft ASP.NET 库（您的代码引用了 ScriptManager，因此这是一个非常安全的选择）。

让我们从 C# 开始：（这在你的页面中，我不会写所有的东西，只是它的大部分）

```
//this is a class you need to write, see below
//this way other code can access this variable too
public MySpecialMailerClass mailer;

[WebMethod] //this may require a include, you're on your own for that 
            //for now (System.Web.Services)
public void StartEmails(){
  //do some stuff here to start the email process?
  //create a class that can run the db scripts uninterrupted, 
  //and provide it a public member that can be accessed for the current
  //count, and the expected max count (set to -1 on init so you know 
  //that you haven't finished initting this yet)

  mailer = new MySpecialMailerClass();
  new Thread( mailer.Start ) { IsBackground = true }.Start( );
}

[WebMethod]
public int GetMaxCount(){
  return mailer.MaxCount;
}

[WebMethod]
public int GetCurrentCount(){
  return mailer.CurrentCount;
} 
```

这实际上是您现在需要添加的所有 C# 代码。

### Javascript：

```
var checkingOnEmailsSentIntervals,
    checkingOnMaxMessagesIntervals,
    maxMessages = 0;

function SuccessHandler(){
  //Note that you should do something here to handle the success each
  //time or that you should write a separate "SuccessHandler" 
  // for each one that you want to execute _when the server call is done_
  // Note that this is what I do (one success per call)
  // But in this case a generic one is sometimes handy, such as here
}

function FailHandler() {
  //Note that you should do something here to handle the failure each time
}

function startScript(){
  PageMethods.StartEmails(StartEmailsSuccessHandler,FailHandler);
}

function StartEmailsSuccessHandler(){
  //this will get triggered when the emails have started sending, 
  // so this is where you create the boxes you wanted earlier, etc.
  $('#counter-span-identifier').show();
  checkingOnEmailsSentIntervals = setInterval(CheckForMoreMessages,100);
  checkingOnMaxMessagesIntervals = setInterval(CheckForMaxMessages,10);
}

function CheckForMoreMessages() {
  PageMethods.GetCurrentCount(CheckForMoreMessagesSuccessHandler,FailHandler);
}

function CheckForMoreMessagesSuccessHandler(result) {
  var currentCount = result;
  $('#counter-span-identifier').text(currentCount + ' messages sent');
  if (currentCount == maxMessages) {
    //we have finished now, so we can display another message or hide our div
    clearInterval(checkingOnEmailsSentIntervals);
    $('#counter-span-identifier').hide();
  }
}

function CheckForMaxMessages() {
  PageMethods.GetMaxCount(CheckForMaxMessagesSuccessHandler,FailHandler);
}

function CheckForMaxMessagesSuccessHandler(result) {
  maxMessages = parseInt(result); //parseInt not really needed here, 
                                  //shown as example of coercion
  if (maxMessages > -1){
    clearInterval(checkingOnMaxMessagesIntervals);
  }
} 
```

这应该很好地结束了这里的情况，因为我们在 javascript 中有两个循环 (setInterval) 来检查 MaxMessages（因此返回 -1）和 CurrentCount。一旦获得所需的信息，我们也有*停止每个循环的代码。*

留给您做的部分是将发送电子邮件的代码放入一个单独的类中，该类公开成员变量和一个方法（并重命名我的示例以使其符合您的要求）。

因为我认为它需要完成，这里是 C# 让`MySpecialMailerClass`你开始：

```
public class MySpecialMailerClass {
  public MySpecialMailerClass() {
    MaxCount = -1;
    CurrentCount = 0;
  }
  public int MaxCount {get;set;}
  public int CurrentCount {get;set;}
  public void Start(){
    //do something to get the MaxCount from the database
    //do something to get the messages
    var messages = mailerDbClass.GetMessagesToBeSent();
    MaxCount = messages.Count;

    //send the messages
    foreach(message in messages) {
      SendMessage(message);
      CurrentCount += 1;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T21:02:19.680

当您单击客户端上的按钮时，会向服务器发送一个请求。如果您使用的是更新面板，此请求将使用 ajax 发送。服务器收到请求后，它将运行您在按钮单击事件处理程序中的代码。在单击处理程序中的代码完成之前，它不会向客户端发送响应以更新页面。

您正在尝试做的事情（至少是客户端的计数器）仅使用更新面板几乎是不可能的。如果你能克服没有那个，我会说跳过它。

我能想到的一种可能性是使用 Web 服务 ( **.asmx** ) 和使用自定义 javascript 的 ajax 调用。您可以将每个单独的电子邮件请求发送到 Web 服务，当服务响应时，使用计数更新您的模式，然后将下一个请求发送到 Web 服务，依此类推。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T21:02:31.370

您需要了解浏览器不能直接执行服务器代码。服务器也不能直接在浏览器中执行代码。最好的办法是通过 HTTP 以某种方式（Web 服务）公开您希望**从浏览器执行的方法。**然后使用 javascript 和 jQuery 调用它们并以您描述的方式更改 UI。

# python - virtualenvwrapper -> 更新 python 二进制文件

> ID：11057762
> 
> 赞同：2
> 
> 时间：2012-06-15T20:28:38.707
> 
> 标签：python, django, virtualenv, virtualenvwrapper

我正在使用virutalenvwrapper 并为我的django 应用程序创建了一个virtualenv。我正在运行 python 2.6.1。在我设置这个的时候不幸的是，python 2.6.1 有一个关于在 kwargs 中传递 unicode 字符串的错误。因此，我希望更新我的 vritualenv 使用的 python 二进制文件。

Python 2.7.2 已全部安装。我只需要了解“迁移”我当前的 virtualenv 以使用新的 python 二进制文件的最佳方法是什么。

据我了解，virtualenv 和 virtualenvwrapper 对安装期间使用的 python 很敏感。那我要不要

1）在确保我使用python 2.7的同时卸载并重新安装virutalenv、virutalenvwrapper？如果我这样做，旧的 virtualenv 会正常工作，还是我需要重新创建它？

或者

2）我可以以某种方式更新我的 virtualenv 中使用的二进制文件吗？

* * *

**更新：**
我刚刚从头开始创建了一个新的环境。
我没有卸载并重新安装virutalenv 或virtualenvwrapper。仍然不知道这是否会在以后咬我，但到目前为止似乎还可以。

仍然想明确知道在 virtualenv 包装器和 virtualenv 上更改 python 版本是否可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:33:04.963

`virtualenvwrapper`有[`cpvirtualenv`](http://www.doughellmann.com/docs/virtualenvwrapper/command_ref.html#cpvirtualenv)命令。您是否尝试过从新的 Python 执行它？

如果这不起作用，您可以销毁旧的 virtualenv 并为您的项目创建一个新的。如果您一直在努力跟踪您的依赖关系（在`setup.py`或中`requirements.txt`），这应该很容易。如果你不勤奋，你可以使用`pip freeze`捕获当前安装的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:05:19.170

因此，为了其他可能正在阅读本文的人的利益。
今天突然遇到一个问题。通过 ssh 登录后，我看到了

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named virtualenvwrapper.hook_loader
virtualenvwrapper.sh: There was a problem running the initialization hooks. If Python could not import the module virtualenvwrapper.hook_loader, check that virtualenv has been installed for VIRTUALENVWRAPPER_PYTHON=/home/*******/opt/bin/python and that PATH is set properly. 
```

哇。它工作得很好……我想现在有一个月了。原来，也许我从来没有关闭我的 ssh 会话（即 virtualenvwrapper 从来没有重新启动）。

谷歌没有太大帮助。事实证明，问题正是错误消息所说的。没有为指定的 python 安装 Virtualenv。(2.7) 它是为我以前使用的版本安装的 (2.6) D'oh。

由于我不再真正使用 2.6，我只是重命名了包含我的本地站点包的目录

```
~/.local/lib/python2.6/site-packages 
```

至

```
~/.local/lib/python2.7/site-packages 
```

（站点包被附加到路径只是为了清楚我重命名的内容和原因）

同样，我可以使用 python2.7 二进制文件轻松运行 easy_install 或 pip 以将 virtualenvwrapper 安装到新的本地目录。（理论上应该已经创建了适当的站点包文件夹）

# python - 子进程未按预期返回数据

> ID：11057763
> 
> 赞同：1
> 
> 时间：2012-06-15T20:28:43.657
> 
> 标签：python, exception, multiprocessing

我正在使用这个[问题](https://stackoverflow.com/questions/1507091/python-mysqldb-query-timeout)的公认答案。相关代码如下。

```
import multiprocessing

def query_with_timeout(dbc, timeout, query, *a, **k):
  conn1, conn2 = multiprocessing.Pipe(False)
  subproc = multiprocessing.Process(target=do_query,
                                    args=(dbc, query, conn2)+a, 
                                    kwargs=k)
  subproc.join(timeout)
  if conn1.poll():
    return conn1.recv()
  subproc.terminate()
  raise Exception("Query %r ran for >%r" % (query, timeout))

def do_query(dbc, query, conn, *a, **k):
  cu = dbc.cursor()
  cu.execute(query, *a, **k)
  return cu.fetchall() 
```

我的电话看起来像这样：

```
res = query_with_timeout(dbconn, 30, "SELECT * FROM `table`)
print res 
```

`dbconn`是一个连接对象。它在应用程序的其他地方（在此超时功能之外）使用没有任何问题。

它似乎加入了子进程并等待了 30 秒。尽管它在轮询结果时从不进入`if conn1.poll(): return conn1.recv()`代码块。相反，我总是收到异常。

我知道查询运行（这是一个简单的选择），它运行不到一秒钟。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:43:24.370

好吧，有几件事基于您发布的代码。首先，你从来没有`start()`这个过程。但也许这只是你在输入这个例子时犯的一个错误？

其次，您不会`send()`通过连接进行任何操作。

这是上面的简化版本，具有预期的行为：

```
import multiprocessing
import time

def simple_example(wait, timeout, query):
    conn1, conn2 = multiprocessing.Pipe(False)
    subproc = multiprocessing.Process(target=do_query, args=(wait, query, conn2))
    subproc.start()
    subproc.join(timeout)
    if conn1.poll():
        return conn1.recv()
    subproc.terminate()
    raise Exception('Query %r ran for >%r' % (query, timeout))

def do_query(wait, query, conn):
    print query
    time.sleep(wait)
    conn.send(query)

res = simple_example(0, 2, 'foo')
res = simple_example(3, 2, 'foo') 
```

我担心这可能只是您的示例代码的问题。

# scala - 如何在 scala 中执行超时操作？

> ID：11057767
> 
> 赞同：1
> 
> 时间：2012-06-15T20:28:51.807
> 
> 标签：scala, hadoop, timeout, futuretask, cascading

上下文：我想编写烫伤作业（hadoop）来抓取页面，并且我想在 url 提取上设置超时（在 URLConnection 上没有超时，我想要其他超时情况的通用解决方案），即地图功能。

我正在考虑在所有资源释放后一些超时后被杀死的期货，因为它是内存关键代码。不确定在 scala API 中使用什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:09:17.983

虽然建议使用 Akka - 并且优于以下解决方案 - Scala 确实有自己的内置 Actor 模型，就像 Akka 一样，它可以做你想要的。可以在这里找到示例：

[http://www.scala-lang.org/node/242](http://www.scala-lang.org/node/242)

您可能需要 reactWithin 或 receiveWithin，其文档可在此处找到：

[http://www.scala-lang.org/api/current/scala/actors/TIMEOUT$.html](http://www.scala-lang.org/api/current/scala/actors/TIMEOUT%24.html)

# android - 从工作区中删除项目

> ID：11057769
> 
> 赞同：1
> 
> 时间：2012-06-15T20:29:04.520
> 
> 标签：android, eclipse

我正在尝试从我的 Eclipse 工作区中删除一个 Android 项目。但是，当我尝试删除它时，我遇到了错误：`Problems encountered while deleting resources - org.eclipse.core.resources`. 检查错误给了我：`Could not delete 'filepath'. - org.eclipse.core.resources`以及`Internal Error - org.eclipse.ltk.ui.refactoring`.

这是错误日志

`Could not delete 'filepath'.`

```
org.eclipse.core.runtime.CoreException: Problems encountered while deleting files.
    at org.eclipse.core.internal.filesystem.local.LocalFile.delete(LocalFile.java:125)
    at org.eclipse.core.internal.resources.ResourceTree.internalDeleteFile(ResourceTree.java:304)
    at org.eclipse.core.internal.resources.ResourceTree.standardDeleteFile(ResourceTree.java:785)
    at org.eclipse.core.internal.resources.Resource.unprotectedDelete(Resource.java:1937)
    at org.eclipse.core.internal.resources.Resource.delete(Resource.java:780)
    at org.eclipse.ltk.core.refactoring.resource.DeleteResourceChange.perform(DeleteResourceChange.java:140)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:102)
    at org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:39)
    at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:728)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:4887)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:105)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:102)
    at org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:39)
    at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:728)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:4887)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:105)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:258)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:306)
    at org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:92)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:218)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

`Internal Error`

```
Java Model Exception: Core Exception [code 273] Problems encountered while deleting resources.
    at org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:50)
    at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:728)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:4887)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:105)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:102)
    at org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:39)
    at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:728)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:4887)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:105)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:258)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:306)
    at org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:92)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:218)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Contains: Could not delete 'C:\Users\jli\workspace\Android Workshop\res\layout\main_image.xml'.
org.eclipse.core.runtime.CoreException: Problems encountered while deleting files.
    at org.eclipse.core.internal.filesystem.local.LocalFile.delete(LocalFile.java:125)
    at org.eclipse.core.internal.resources.ResourceTree.internalDeleteFile(ResourceTree.java:304)
    at org.eclipse.core.internal.resources.ResourceTree.standardDeleteFile(ResourceTree.java:785)
    at org.eclipse.core.internal.resources.Resource.unprotectedDelete(Resource.java:1937)
    at org.eclipse.core.internal.resources.Resource.delete(Resource.java:780)
    at org.eclipse.ltk.core.refactoring.resource.DeleteResourceChange.perform(DeleteResourceChange.java:140)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:102)
    at org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:39)
    at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:728)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:4887)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:105)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:102)
    at org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:39)
    at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:728)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:4887)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:105)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:258)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:306)
    at org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:92)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:218)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Contains: Could not delete: C:\Users\jli\workspace\Android Workshop\res\layout\main_image.xml.
Caused by: org.eclipse.core.internal.resources.ResourceException: Problems encountered while deleting resources.
    at org.eclipse.core.internal.resources.Resource.delete(Resource.java:793)
    at org.eclipse.ltk.core.refactoring.resource.DeleteResourceChange.perform(DeleteResourceChange.java:140)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:102)
    at org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:39)
    at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:728)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:4887)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:105)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:102)
    at org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:39)
    at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:728)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:4887)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:105)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:258)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:306)
    at org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:92)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:218)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Contains: Could not delete 'C:\Users\jli\workspace\Android Workshop\res\layout\main_image.xml'.
org.eclipse.core.runtime.CoreException: Problems encountered while deleting files.
    at org.eclipse.core.internal.filesystem.local.LocalFile.delete(LocalFile.java:125)
    at org.eclipse.core.internal.resources.ResourceTree.internalDeleteFile(ResourceTree.java:304)
    at org.eclipse.core.internal.resources.ResourceTree.standardDeleteFile(ResourceTree.java:785)
    at org.eclipse.core.internal.resources.Resource.unprotectedDelete(Resource.java:1937)
    at org.eclipse.core.internal.resources.Resource.delete(Resource.java:780)
    at org.eclipse.ltk.core.refactoring.resource.DeleteResourceChange.perform(DeleteResourceChange.java:140)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:102)
    at org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:39)
    at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:728)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:4887)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:105)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:102)
    at org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:39)
    at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:728)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:4887)
    at org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:105)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:258)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:306)
    at org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:92)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:218)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:16:24.967

之后重新启动机器，不要运行任何东西。只需打开eclipse并删除项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:31:43.063

您当前可能已打开该项目中的文件。在活动窗口中将它们全部关闭，然后尝试删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:42:27.643

首先对项目执行文件/刷新。Eclipse 缓存文件夹/文件结构并且在被告知之前不会重新读取它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T20:52:01.417

似乎有一个程序正在被应用程序使用，因此您无法运行清理。我建议您尝试关闭所有正在运行的应用程序，关闭 Eclipse 并在任务管理器中结束任务 adb.exe，然后再次运行 eclipse 然后再次清洁。

# ios - 创建 NSObject 不确定在哪里下载

> ID：11057771
> 
> 赞同：0
> 
> 时间：2012-06-15T20:29:19.610
> 
> 标签：ios, model-view-controller, nsobject

我对实现 NSObject 模型的正确方法有点困惑。我正在创建一个`Book`将记录一些数据（NSString、UIImage 等）的类，但我将数据存储在服务器上。`Book`当我创建一个这样`-(void)loadDataFromServerWithID:(NSString *)bookID`的时，我应该创建一个类似的方法`Book`：

```
Book *book = [Book alloc] init];
[book loadDataFromServerWithID:@"1234"]; 
```

并在 loadDataFromServer 方法中下载 JSON 数据并将实例变量分配给对象？

我一直在想很多方法可以做到这一点，但我不确定无论如何是有效/聪明的方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:02:00.730

您如何处理从服务器检索数据？您应该始终在您的应用程序中进行异步调用，以免阻塞 UI。我鼓励您尝试[AFNetworking](https://github.com/AFNetworking/AFNetworking)。如果您的服务器发回 JSON，它将直接转换为 NSDictionary。

我喜欢在我的模型中有一个如下所示的 init 方法：

```
- (id)initWithDictionary:(NSDictionary *)dictionary
{
    self = [super init];

    if (self) {
        self.title = [dictionary objectForKey:@"title"];
        self.nbOfPages = [dictionary objectForKey:@"nbOfPages"];
        // etc.
    }

    return self;
} 
```

其中参数是解析 JSON 后获得的字典。

Ben Scheirman[制作了一个](http://nsscreencast.com/episodes/6-afnetworking)关于 AFNetworking 的截屏视频，他在其中准确解释了如何实现这一点，您应该查看一下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:32:39.427

一种方法是只让 1 个类负责与服务器通信，然后在类中有一个名为类似`bookFromServerWithID:`返回的新书对象的方法。其他变体包括某种形式的回调以避免阻塞主线程。

要进行异步加载，您将创建一个类似于[`[NSURLConnection sendAsynchronousRequest:queue:completionHandler:]`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/sendAsynchronousRequest%3aqueue%3acompletionHandler%3a)并且可能会在加载器中的某处调用上述方法的方法。在回调中，您将解析来自连接的数据并将回调提供给您的方法`Book`对象。

如果您以前没有使用过队列，[并发编程指南](https://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)是一本很有帮助的读物（如果有点长且深入的话）。

# android - 如何在 Android 中发送多部分二进制短信？

> ID：11057776
> 
> 赞同：2
> 
> 时间：2012-06-15T20:29:56.087
> 
> 标签：android, binary, sms, multipart

我正在尝试在 Android 中发送二进制短信。但是当消息的大小超过一条短信时，我会收到不同的错误，具体取决于设备。

我看到有一种方法可以发送多部分文本短信，但不能发送多部分二进制短信。那么，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:25:04.867

似乎真的没有办法做到这一点。

两年前，我发现有人在 Android 开发者名单上问过同样的问题，但直到现在都没有收到任何答案。不幸的是，我现在没有找到该帖子，但是对此还有很多其他问题：

[Android 开发者 › 发送大型二进制短信](https://groups.google.com/forum/?hl=pt&fromgroups=#!searchin/android-developers/multipart%2420binary%2420sms/android-developers/nmeu3U3iJkE/bqjRd6pA_dIJ)

[Android 开发者 › 缺少发送二进制数据短信的 API 功能超过 1](https://groups.google.com/forum/?hl=pt&fromgroups=#!searchin/android-developers/multipart%2420binary%2420sms/android-developers/KDneoBgK4aI/phA4V2WNG6AJ)

[Android 开发者 › 更多短信问题](https://groups.google.com/forum/?hl=pt&fromgroups=#!searchin/android-developers/multipart%2420binary%2420sms/android-developers/XT25TuYyrzM/t89zd9FGbMQJ)

我能遇到的最佳解决方案是将消息编码为 BASE64 并作为多部分 TEXT 短信发送。

我希望这个答案能帮助那些在未来寻找同样想法的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T11:30:44.650

你可以通过数据短信来做到这一点，我做到了，而且有效！您必须将数据拆分为数据包限制并使用：

```
 smsManager.sendDataMessage(_phoneNumber, null, SMS_PORT,
s.getBytes(), sent, deliveredPI); 
```

对于每个部分。它单独发送数据，您可以正常接收:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T17:49:19.917

@ amin10043 你是对的，但要处理拆分的数据消息，你必须做更多的事情，因为接收者不知道消息的多少部分。我准备了一个发送多部分数据消息的函数，并在消息的第一个字节上放置了许多部分：

```
private void sendEncryptedMessage(String plainMessage) throws IOException {

    Integer PDU_SIZE = 130;

    EncryptedMessage encryptedMessage = new EncryptedMessage(plainMessage, recipientEncryptionKey);
    byte[] messageSerialized = EncryptedMessage.serialize(encryptedMessage);

    PendingIntent sent = this.createPendingResult(MainConfig.SMS_SENT, new Intent(), PendingIntent.FLAG_UPDATE_CURRENT);
    SmsManager smsManager = SmsManager.getDefault();

    byte[] preparedMessage = new byte[messageSerialized.length + 1];
    preparedMessage[0] = 1;
    System.arraycopy(messageSerialized, 0, preparedMessage, 1, messageSerialized.length);

    if (preparedMessage.length > PDU_SIZE) {

        Boolean equalChunks;
        Integer mLength = preparedMessage.length;
        Integer numOfChunks = mLength / PDU_SIZE;

        if (mLength % PDU_SIZE == 0) {
            preparedMessage[0] = numOfChunks.byteValue();
            equalChunks = true;
        } else {
            Integer tmpChunks = numOfChunks + 1;
            preparedMessage[0] = tmpChunks.byteValue();
            equalChunks = false;
        }

        for (int i = 0; i < numOfChunks; i++) {
            byte[] chunkArray = Arrays.copyOfRange(messageSerialized, i * PDU_SIZE, (i + 1) * PDU_SIZE);
            smsManager.sendDataMessage(phoneNo, null, MainConfig.SMS_PORT, chunkArray, sent, null); //todo: dodać jeszcze PendingDeliveryIntent
        }

        if (!equalChunks) {
            byte[] chunkArray = Arrays.copyOfRange(messageSerialized, numOfChunks * PDU_SIZE, mLength);
            smsManager.sendDataMessage(phoneNo, null, MainConfig.SMS_PORT, chunkArray, sent, null); //todo: dodać jeszcze PendingDeliveryIntent
        }

    } else {
        smsManager.sendDataMessage(phoneNo, null, MainConfig.SMS_PORT, preparedMessage, sent, null); //todo: dodać jeszcze PendingDeliveryIntent
    }

} 
```

这是我的方法的工作副本，但它有效。在接收器中，您必须读取消息的第一个字节以获取它应该期望多少部分消息的信息。

# javascript - 在 Phonegap 应用程序中，您如何指示对服务器的请求/响应正在发生？

> ID：11057784
> 
> 赞同：0
> 
> 时间：2012-06-15T20:31:05.613
> 
> 标签：javascript, html, jquery, cordova

考虑一个标准的 HTML 应用程序，包装在 Phonegap 中，正常的“点击”或“触摸”事件向服务器发出请求 - 偶尔向服务器发送或获取表单数据 - 并且 WebKit 客户端等待响应和然后渲染它。

当这些往返行程中甚至有轻微的延迟（例如甚至低至 1/4-2 秒）时，用户会迷失方向，在他们单击和开始呈现响应之间似乎“没有发生任何事情”。

Phonegap 中是否有处理短和/或长响应时间的标准做法？我已经尝试将所有标准 HREF 点击更改为 AJAX 调用，其中 AJAX 调用接收一个小的 HTML 片段，然后 JavaScript 只是将其附加到页面上的现有 DIV。在延迟期间，我可以只显示一个“加载”指示器。

这种方法不可避免地会对页面上的 Javascript 造成严重破坏，很多时候会使未来的点击完全失效。

我很好奇这方面的标准方法是什么。这似乎是一个非常常见的用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:06:15.150

虽然本身没有“标准做法”，但许多应用程序（包括本机应用程序）使用阻塞“微调器”来让用户知道正在加载某些内容并防止在从服务器获取时与“页面”交互。

像 jQuery Mobile 这样的框架内置了这个功能（虽然我当然不建议你使用 jQuery Mobile）。

我个人在我的应用程序中为此使用了一个 jQuery 插件：http: [//malsup.com/jquery/block/](http://malsup.com/jquery/block/)

如果你还没有使用 jQuery，你肯定不想开始只是为了获得 blockUI 插件，所以你可能想设计自己的。您真正需要的只是一个全屏 div，它具有绝对定位的大 z-index，以便在获取数据时阻止交互。在该 div 中，您可以放置​​一个微调器或一条指示该活动正在发生的消息，并在获取完成后再次将其取走。

# python - Python正则表达式在括号外多次出现

> ID：11057785
> 
> 赞同：1
> 
> 时间：2012-06-15T20:31:13.137
> 
> 标签：python, regex, brackets

我想搜索和替换 <> 之外的所有匹配项。我可以假设所有括号都匹配。例如，我想用 '*' 替换 'BLOCK'：

```
BLOCKaaa<BLOCKaaaa>aaaaa<>BLOCKzzzBLOCKBLOCK 
```

会成为：

```
*aa<BLOCKaaaa>aaaaa<>*zzz** 
```

我尝试了以下方法：

- 在行首添加>，在行尾添加<，称之为LINEwith><

-跑：

```
re.sub('(>[^<>]*)(BLOCK)+? ([^<>]*<?)', '\\1*\\3', LINEwith><) 
```

但它给了我这个：

```
'>*aaa<BLOCKaaaa>aaaaa<>BLOCKzzzBLOCK*<' 
```

我不确定如何替换 ><

有人可以帮我弄这个吗？或者建议一种更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T20:34:57.250

由于您可以假设括号始终匹配，因此以下应该有效。

```
re.sub(r'BLOCK(?=[^>]*(<|$))', '*', line) 
```

这也假设不能有嵌套的括号。

这使用前瞻来确保`>`在下一个`<`字符或字符串结尾之前没有字符。由于正在使用前瞻，因此正则表达式实际匹配的唯一文本是`BLOCK`，因此替换被简化为，`'*'`因为不再有任何捕获组。

这是一个最多可以使用一级嵌套括号的版本：

```
BLOCK(?=([^<>]*(<(<[^>]*>|[^<>])*>)?)*$) 
```

例子：

```
>>> p = re.compile(r'BLOCK(?=([^<>]*(<(<[^>]*>|[^<>])*>)?)*$)')
>>> p.sub('*', 'BLOCK<BLOCK<BLOCK>>BLOCK<BLOCK>BLOCKzzzBLOCKBLOCK')
'*<BLOCK<BLOCK>>*<BLOCK>*zzz**' 
```

正如您所看到的，正则表达式并不是非常适合嵌套数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:28:19.963

如果括号是嵌套的，则不能使用正则表达式。来点`split`-fu怎么样？

```
def replace_outside(string, original, replacement):
    level = 0  #the level of nesting - 0 is outside
    result = [] #a temp list holding the result
    while string:
        #split the string until the first '<', save everything before that in
        #current and process the rest in the next iteration
        splitstr = string.split("<", 1)
        if len(splitstr) == 1: current, string = string, ""
        else: current, string = tuple(splitstr)
        if level == 0:
            #we're outside - replace everything in current string
            current = current.replace(original, replacement)
        else:
            #decrease the level by the number of closing brackets in current
            level -= current.count(">")
            if level == 0:
                #everything after the last '>' is outside
                inner, outer = current.rsplit(">", 1)
                #replace outer and join with inner again
                outer = outer.replace(original, replacement)
                current = '>'.join([inner, outer])
        #append the string to the result list and increase level by one
        result.append(current)
        level += 1
    #return the result list joined by the '>' we split it by
    return '<'.join(result) 
```

（如果有任何不匹配的括号，这显然会失败。）

# asana - 通过集成 asana API 的桌面应用程序

> ID：11057794
> 
> 赞同：1
> 
> 时间：2012-06-15T20:32:20.187
> 
> 标签：asana

我正在通过将 asana API 集成到桌面应用程序中来开展一些项目。或仪表板页面。我只是编程的初学者，你能告诉我从哪里开始吗？我研究了 Asana Chrome Extension 示例，我不确定我应该使用哪种语言来创建桌面应用程序。在 hello world 示例中，您使用 Ruby，从 Ruby 开始是否比较容易，我知道一点红宝石。Java可能吗？请告诉我您认为对我构建应用程序有帮助的任何内容。

非常感谢。

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-15T15:46:35.290

由于这个问题似乎没有解决，即使它已经超过2年了。我没有使用 Asana API 开发任何东西，但它是一个 RESTful 接口，因此您可以使用 Java 进行 HTTP 请求。您必须使用一些库来解析 JSON 或自己做。我推荐谷歌的 GSON 库来处理 JSON。

在以下链接中，您将找到 API 文档。忽略带有 ruby​​ 示例的右列，并查看左列，其中您已经详细说明了他们的 API 提供的所有 URL。 [http://developer.asana.com/documentation](http://developer.asana.com/documentation)

如果您不介意使用其他语言而不是 Java，则可以使用非官方的客户端库。 [http://developer.asana.com/developer-showcase/](http://developer.asana.com/developer-showcase/)

我希望这种回应可以满足您或遇到类似情况的人的需求。

# c - 空指针类型转换

> ID：11057795
> 
> 赞同：0
> 
> 时间：2012-06-15T20:32:23.397
> 
> 标签：c, void-pointers

我试图理解 C 中的 void 指针类型转换。我编写了一个程序来尝试创建分段错误，但我没有得到它。有人可以向我解释为什么

代码：

```
#include <stdio.h>
typedef unsigned long U32; 
int main()
{
  void *obj;
  U32 value = 25;
  U32* ptr;
  printf("*(ptr)                           : %lu\n", *(ptr));
  obj = &value;
  ptr = &value;
  ptr++;  
  printf("*(U32 *)(obj)                    : %lu\n", *(U32 *)(obj)); 
  printf("*((U32 *)(obj) + 1)              : %lu\n", *((U32 *)(obj) + 1));   
  printf("*(U32 *)((U32 *)(obj) + 1)       : %lu\n", *(U32 *)((U32 *)(obj) + 1)); 
  printf("*(ptr)                           : %lu\n", *(ptr));
  return 0;
} 
```

输出 ：

```
*(ptr)                           : 458998657
*(U32 *)(obj)                    : 25
*((U32 *)(obj) + 1)              : 3215085752
*(U32 *)((U32 *)(obj) + 1)       : 3215085752
*(ptr)                           : 3215085752 
```

我看到它的方式只有第二个 printf 是合法的，因为所有其他人都指的是一些未初始化的随机内存，应该会导致段错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:36:46.663

UB 很有趣——行为是未定义的，不能保证段错误。的地址`obj + 1`可能是堆栈上的其他位置，无论如何都会分配给您的程序。要获得*几乎*可以保证的段错误，只需`obj`在分配之前取消引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:42:48.743

```
 U32* ptr;
  printf("*(ptr)                           : %lu\n", *(ptr)); 
```

`ptr`未初始化，因此取消引用它是未定义的行为，

```
 obj = &value;
  ptr = &value;
  ptr++;  
  printf("*(U32 *)(obj)                    : %lu\n", *(U32 *)(obj)); 
```

好的，只要`obj`指向有效的 U32 （并且 U32 必须是无符号的，只要您使用 %lu 作为 printf 格式）

```
 printf("*((U32 *)(obj) + 1)              : %lu\n", *((U32 *)(obj) + 1)); 
```

您正在尝试取消引用指向 U32 越过任何有效位置的指针，因此这是未定义的行为。

```
 printf("*(U32 *)((U32 *)(obj) + 1)       : %lu\n", *(U32 *)((U32 *)(obj) + 1)); 
```

和上面一样。

```
 printf("*(ptr)                           : %lu\n", *(ptr)); 
```

由于您增加`ptr`了 ，它指向一个 U32 超过任何有效值，这会导致未定义的行为。

当您的代码执行调用[未定义行为](http://en.wikipedia.org/wiki/Undefined_behavior)的事情时，很难并且通常无法推断将要发生的事情。它是未定义的。可能会发生一些意想不到的事情。可能会发生一些不好的事情。不会发生任何不好的事情，等等。在 C 中做一些你不应该做的事情，并不意味着它会出现段错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:36:16.927

`ptr`指向有效对象 ( `value`) 但`ptr++`不指向对象。`*ptr`因此，在指针递增后访问元素是未定义的行为。`printf`of`*ptr`可以显示随机数据，但也可能使您的程序崩溃。

# android - 防止 Android TextViews 将价格读取为数字

> ID：11057798
> 
> 赞同：4
> 
> 时间：2012-06-15T20:32:37.390
> 
> 标签：android, android-layout

有时带有动态内容的 TextView 会显示价格。例如，作为内容的一部分，它可能会显示 $123.00

有时内容可能会显示电话号码或 URL，所以我在 TextView 上设置了 android:autolink。我希望那些变成链接。

问题是价格变成了电话链接。显然，它们不是电话号码——无论是数字的简洁性还是货币代码的存在都足以弄清楚这一点。

我该怎么做才能自动链接电话号码和 URL，但不会像电话号码一样自动链接价格？

编辑：文本中可以有混合内容。具体内容来自另一方，不可预知。一个虚构的例子可以是“看看我们在 123 Main Street 的新店。打开 9-5 MF。致电 123-456-7890 联系我们了解最新优惠。价格从 123.00 美元起。在 Facebook 上关注我们[http:// www.facebook.com/whatever](http://www.facebook.com/whatever)。” 在这种情况下，我希望 URL 链接到网站，将电话号码链接为电话号码，但不链接价格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:35:02.013

我的建议是修改适配器以使用一些正则表达式来找出您的逻辑，然后根据检索到的内容动态控制 AutoLink。这当然是假设您使用的是 ListView。如果您不使用 ListView，则在构建视图时，根据正则表达式对其进行控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:35:47.770

我假设您知道数据类型是什么，因此我建议不要使用自动链接，而是设置您自己的 onClickListener 来添加所需的操作。

# c++ - 将成员函数传递给 std::thread

> ID：11057800
> 
> 赞同：20
> 
> 时间：2012-06-15T20:32:42.060
> 
> 标签：c++, multithreading, c++11

> **可能重复：**
> [使用成员函数启动线程](https://stackoverflow.com/questions/10673585/start-thread-with-member-function)

我最近一直在玩 c++11 中的新 std::thread 库，但遇到了一个问题。当我尝试将一个类函数传递给一个新线程时，它给了我一个错误（我现在没有确切的错误文本，因为我不在家）我有一个像这样的类

```
class A
{
    void FunctA();
    void FunctB();

    void run()
    {
        std::thread t(FunctA);
        std::thread r(FunctB);
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-15T20:36:18.233

```
class A
{
    void FunctA();
    void FunctB();

    void run()
    {
        std::thread t(&A::FunctA, this);
        std::thread r(&A::FunctB, this);
    }
}; 
```

指向成员函数的指针与指向函数的指针不同，调用它们的语法也不同，并且需要类的实例。您可以将指向实例的指针作为`std::thread`构造函数的第二个参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:34:44.560

我认为，问题在于您无法以类似于函数的方式获取指向成员函数的指针。[在这里](http://www.parashift.com/c++-faq-lite/pointers-to-members.html)，您将找到有关此的更多信息。

此外，如果您提供编译器错误文本，回答起来会容易得多。

# javascript - 向现有对象添加新元素

> ID：11057802
> 
> 赞同：43
> 
> 时间：2012-06-15T20:32:51.297
> 
> 标签：javascript, jquery, object

我正在寻找一种将新元素添加到现有对象的方法，就像 push 对数组所做的那样

我已经尝试过了，但它没有用：

```
var myFunction = {
    Author: 'my name ',
    date: '15-12-2012',
    doSomething: function(){
        alert("helloworld")
    }
};
myFunction.push({
    bookName:'mybook',
    bookdesc: 'new'
});
console.log(myFunction); 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-15T20:36:10.930

用这个：

```
myFunction.bookName = 'mybook';
myFunction.bookdesc = 'new'; 
```

或者，如果您使用的是 jQuery：

```
$(myFunction).extend({
    bookName:'mybook',
    bookdesc: 'new'
}); 
```

该`push`方法是错误的，因为它属于`Array.prototype`对象。

要创建命名对象，请尝试以下操作：

```
var myObj = function(){
    this.property = 'foo';
    this.bar = function(){
    }
}
myObj.prototype.objProp = true;
var newObj = new myObj(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-15T20:36:01.717

只需这样做`myFunction.foo = "bar"`，它就会添加它。`myFunction`在这种情况下是对象的名称。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-11T19:40:26.120

Danilo Valente 上面提到的 jQuery 语法不起作用。应该如下——

```
$.extend(myFunction,{
    bookName:'mybook',
    bookdesc: 'new'
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-15T20:35:53.163

您可以使用[Extend](http://api.jquery.com/jQuery.extend/)将新对象添加到现有对象。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-15T20:37:38.357

您正在寻找[jQuery 扩展方法](http://api.jquery.com/jQuery.extend/)。这将允许您将其他成员添加到您已经创建的 JS 对象中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-31T22:54:49.003

您可以将 JSON 存储在数组中，然后将 JSON 数据插入到数组中`push`

看看这个[https://jsfiddle.net/cx2rk40e/2/](https://jsfiddle.net/cx2rk40e/2/)

```
$(document).ready(function(){

  // using jQuery just to load function but will work without library.
  $( "button" ).on( "click", go );

  // Array of JSON we will append too.
  var jsonTest = [{
    "colour": "blue",
    "link": "http1"
  }]

  // Appends JSON to array with push. Then displays the data in alert.
  function go() {    
      jsonTest.push({"colour":"red", "link":"http2"});
      alert(JSON.stringify(jsonTest));    
    }

}); 
```

的结果`JSON.stringify(jsonTest)`

```
[{"colour":"blue","link":"http1"},{"colour":"red","link":"http2"}] 
```

这个答案可能对希望模拟类似结果的用户有用。

# iis-7.5 - 将 .Net 4.5 网站部署到 IIS 7.5 服务器

> ID：11057814
> 
> 赞同：8
> 
> 时间：2012-06-15T20:33:48.383
> 
> 标签：iis-7.5, teamcity, .net-4.5

我们正在使用 Teamcity 为我们的网站进行持续集成构建，并且刚刚将我们的网站升级到 .Net 4.5RC。该应用程序在我的机器上的 IIS express 中构建和运行，并在我安装了 .NET 4.5RC 的构建服务器上构建。但是，当我们将它部署到安装了 .Net 4.5RC 的服务器时，我们会收到以下错误。

> 您尝试使用的应用程序池将“managedRuntimeVersion”属性设置为“v4.0”。此应用程序需要“v4.5”。

我能做些什么来解决这个问题。我曾尝试将服务器上的应用程序池设置为 4.5，但不能。请参阅[此 SO 帖子](https://stackoverflow.com/questions/9559372/how-to-set-net-framework-4-5-version-in-iis-7-application-pool)。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T10:48:36.927

我有一个类似的问题。我正在通过调用 MSBuild 来构建我的应用程序，我发现当我尝试对应用程序进行网络部署时，我得到了那个错误。我通过向 MSBuild 命令添加命令行开关，告诉 MSBuild 使用 VS2012 构建来修复它：

```
/P:VisualStudioVersion=11.0 
```

提示[这个问题](https://stackoverflow.com/questions/12026754/msbuild-deploy-failing-after-upgrade-to-net-4-5)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T11:14:21.550

事实证明，这是一个 TeamCity 问题。当我们将更新从 Visual Studio 2012 RC 直接推送到站点时，它工作正常。我们不得不将 TeamCity 中的构建运行程序更改为调用 VS 2012 的 WebDeploy 3.0 的命令行运行程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T13:44:05.750

来源：[http ://forums.iis.net/t/1164093.aspx/1](http://forums.iis.net/t/1164093.aspx/1)

说：“双击应用程序池，然后更改 .Net Framework 版本”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-17T18:40:16.803

`/P:VisualStudioVersion=11.0`即使在 proj 文件中使用以及忽略 managedruntime 版本后，我也面临同样的问题。

运行命令

```
C:\Windows\System32\inetsrv>appcmd set apppool /apppool.name: DefaultAppPool /managedRuntimeVersion:v4.5 
```

在此之后，重置国际空间站。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T20:54:28.703

好，可以。您需要使用 IIS 7.5，您需要以 .Net 4.5 为目标......并且它们*应该*相互兼容。

查看此链接；寻找“Aspnet_regiis.exe”：

[http://msdn.microsoft.com/en-us/library/ee942158.aspx](http://msdn.microsoft.com/en-us/library/ee942158.aspx)

'希望有帮助.. PSM

PS：

这些链接可能（或可能不）也有用：

*   [http://learn.iis.net/page.aspx/624/application-pool-identities/](http://learn.iis.net/page.aspx/624/application-pool-identities/)

*   [http://forums.iis.net/t/1189758.aspx](http://forums.iis.net/t/1189758.aspx)

*   [http://msdn.microsoft.com/en-us/library/k6h9cz8h.aspx](http://msdn.microsoft.com/en-us/library/k6h9cz8h.aspx)

请发回您找到的内容。

# javascript - dijit.editor 中的 onchange 事件以编程方式创建

> ID：11057819
> 
> 赞同：0
> 
> 时间：2012-06-15T20:34:00.633
> 
> 标签：javascript, html, dojo

我正在以编程方式创建 dojo 小部件 dijit.editor，并添加一个 onchange 事件以将此小部件的内容复制到隐藏字段。

代码或多或少是这样的：

```
<div id="myEditor" onchange="myFunction()"></div>

<script>
    dojo.require("dijit.Editor");

    dojo.ready(function(){
         new dijit.Editor({
         height: "60px",
         plugins: []
        }, "myEditor");
    });
</script> 
```

但问题是永远不会触发 onchange 事件，因此永远不会调用 myFunction 并且永远不会更新隐藏字段。

我对你们的问题是，如果以编程方式创建这样的小部件，是否需要另一种方式来添加 onchange 或任何其他事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:47:31.687

这对我有用：

```
<script>
    dojo.require("dijit.Editor");

    dojo.ready(function () {
        var myEditor = new dijit.Editor({
            height: "60px",
            plugins: [],
            onChange: function () {
                alert("Hooray it worked!");
            }
        }, "myEditor");
    });
</script>

<div id="myEditor"></div> 
```

确保 onChange 的驼峰式大写是正确的。

编辑：这是一个声明性示例，以防您错过了这些想法中的一个或多个，但似乎您正在走程序化路线，因此如果适合您，可以坚持使用第一个示例：

```
<script>
    dojo.require("dijit.Editor");

    dojo.ready(function () {
        dojo.parser.parse();
    });
</script>

<div data-dojo-type="dijit.Editor" id="myEditor" 
    data-dojo-props="onChange:function(){alert('It worked!');}">
</div> 
```

# php - 如何在嵌套数组/对象中获取这条信息？

> ID：11057821
> 
> 赞同：0
> 
> 时间：2012-06-15T20:34:11.073
> 
> 标签：php, arrays

`print_r($rows)`返回这个：

```
Array
(
    [S1 | Excellence in P-O-P Execution: Ripping Down the Roadblocks to Breakthrough In-Store Marketing] => Array
        (
            [group] => S1 | Excellence in P-O-P Execution: Ripping Down the Roadblocks to Breakthrough In-Store Marketing
            [rows] => Array
                (
                    [0] => stdClass Object
                        (
                            [nid] => 207
                            [node_title] => Excellence in P-O-P Execution: Ripping Down the Roadblocks to Breakthrough In-Store Marketing
                            [taxonomy_term_data_field_data_field_track_term_tid] => 19
                            [node_field_data_field_speaker_title] => Jon Kramer
                            [node_field_data_field_speaker_nid] => 205
                            [field_data_field_date_time_field_date_time_value] => 2012-10-16 18:00:00
                            [field_data_field_session_number_field_session_number_value] => S1
                            [field_data_field_date_time_node_entity_type] => node
                            [field_data_field_session_number_node_entity_type] => node
                            [field_data_field_track_icon_taxonomy_term_entity_type] => taxonomy_term
                            [field_data_field_job_title_node_entity_type] => node
                            [field_data_field_company_node_entity_type] => node
                            [field_data_field_hide_track_node_entity_type] => node 
```

（我知道我错过了所有的结尾括号；返回实际上有几千行长，我只是懒得通过并找到所有这些。）

我将如何获取名为 nid 的数据？我原以为会是

```
$rows[0]['rows'][0]->nid 
```

但我得到一个未定义的偏移错误。我绝对无法使用完整内容（S1 | Excellence 等）访问数组的第一级 - 这是动态生成的。我曾想过，因为它是数组的第一个元素，我可以用零偏移量得到它，但显然不是。

**更新**

`current()`我已经按照下面的答案尝试了一些事情；它让我更接近了一层，但我仍然无法访问 nid 元素。

```
$row = current($rows);
$nid_tmp = $row['rows'];
print '<pre>'; var_dump($nid_tmp); print '</pre>'; 
```

返回

```
Array
(
    [0] => stdClass Object
        (
            [nid] => 207 
```

美好的; 这就是我所期待的。但是当我尝试时`print $nid_tmp[0]->nid`，我得到“注意：试图获取非对象的属性”错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:38:12.270

如果你还没有开始遍历数组，你可以使用 current() 来获取第一个元素。[http://us2.php.net/manual/en/function.current.php](http://us2.php.net/manual/en/function.current.php)

```
$row = current($rows); // returns the first element of the array
$firstObject = $row['rows'][0];
$nid = $firstObject->nid; 
```

或者您可以使用 reset() 来回退指针并获取第一个元素。 [http://us2.php.net/manual/en/function.reset.php](http://us2.php.net/manual/en/function.reset.php)

```
$row = reset($rows); 
```

您也可以使用 array_shift() 来获取数组的第一个元素，但这样做时它会从数组中删除该元素。

这些函数都不关心密钥类型。

# git - 未找到 GitHub 错误存储库

> ID：11057828
> 
> 赞同：2
> 
> 时间：2012-06-15T20:34:46.657
> 
> 标签：git, github, repository, git-push

尝试为 GitHub 的 rails 教程添加一个空白示例应用程序，但我收到此错误（显然很常见，但我在其他帖子中搜索了解决方案，但找不到适合我的解决方案）。

```
ERROR: Repository not found.
fatal: The remote end hung up unexpectedly 
```

当我尝试 rails 教程建议的内容时，我都会收到错误消息：

```
$ git remote add origin git@github.com:<username>/sample_app.git
$ git push -u origin master 
```

然后我创建的 github 存储库说要尝试的非常相似的提示：

```
$ git remote add origin https://github.com/<username>/sample_app.git
$ git push -u origin master 
```

我一直在 sample_app 目录中执行此操作，并且在提交之后：

```
$ git commit -a -m "Improve the README" 
(which is the last change I made and the only one before trying to push it to github) 
```

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:45:58.703

您需要先在 GitHub 上[创建存储库](https://help.github.com/articles/creating-a-new-repository)，然后再尝试推送到它。如果您无法推动工作，请尝试：

1.  创建存储库。
2.  从 GitHub 克隆新存储库。
3.  在本地提交更改，然后推送。

克隆将正确设置您的遥控器，因此这通常是一种更简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-02T13:48:01.833

发生这种情况的另一个原因是：当您连接到远程服务器时，未加载 ssh 密钥。为了解决这个问题，您可以在以下位置设置转发`~/.ssh/config`：

```
Host *
  ForwardAgent yes 
```

这将确保当您从另一台服务器连接到 github 时，您的密钥保持加载状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-23T02:17:18.710

在 Windows 机器上执行这些操作的一个奇怪的事情是 Windows 凭据管理器可以缓存您的 GitHub 用户名和密码，并且始终通过网络发送，即使您将 u/p 硬编码到 URL 中也是如此。进入 Windows 凭据管理器并清除 GitHub 帐户凭据有时会有所帮助。

[![在此处输入图像描述](../Images/69cfcf7b08497fd1c70767c5f5874e7c.png)](https://i.stack.imgur.com/NhrMQ.gif)

[遇到git fatal: repository not found](https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/Five-ways-to-fix-Gits-fatal-repository-not-found-error)错误的其他五个常见原因包括：

1.  您没有进行身份验证
2.  您的密码已更改
3.  你不是合作者
4.  不正确的大小写或单词拼写错误
5.  git仓库已被删除

# c++ - C++ 编译器是否优化按值返回的成员变量

> ID：11057836
> 
> 赞同：0
> 
> 时间：2012-06-15T20:35:17.653
> 
> 标签：c++, return, return-value

当返回的变量超出函数的范围时，我对 C++ 返回值优化有很好的了解，但是返回成员变量呢？考虑以下代码：

```
#include <iostream>
#include <string>

class NamedObject {
 public:
  NamedObject(const char* name) : _name(name) {}
  std::string name() const {return _name;}

 private:
  std::string _name;
};

int main(int argc, char** argv) {
  NamedObject obj("name");
  std::cout << "name length before clear: " << obj.name().length() << std::endl;
  obj.name().clear();
  std::cout << "name length after clear: " << obj.name().length() << std::endl;
  return 0;
} 
```

哪个输出：

```
name length before clear: 4
name length after clear: 4 
```

显然，这些`obj.name().clear()`行为是针对临时副本的，但是对 的调用`obj.name.length()`呢？`std::string::length()`是`const`成员函数，因此保证不会修改字符串的状态。因此，应该允许编译器不复制成员变量而直接使用它来调用 const 成员函数，这似乎是合理的。现代 C++ 编译器是否进行了这种优化？有什么理由不应该或不能制作它吗？

编辑：

澄清一下，我不是在问标准返回值优化是否在这里有效；在我最初提出这个问题的时候，我明白为什么它没有。RVO 通常定义的方式在这里不起作用，因为返回的值不会超出函数的范围。

我要问的是：如果调用时的编译器可以确定调用没有副作用，是否允许跳过副本？即，它可以表现得好像

```
obj.name().length() 
```

是

```
obj._name.length() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T21:10:33.803

该`name()`函数按值返回，这意味着所有操作都在临时对象上执行。

> 因此，应该允许编译器不复制成员变量而直接使用它来调用 const 成员函数，这似乎是合理的。

这种假设在许多方面是不正确的。当一个函数被声明为`const` **你**告诉编译器你不会修改对象的状态时，编译器可以帮助你验证。返回类型是编译器可以为您执行的检查的一部分。例如，如果您将返回类型更改为：

```
std::string& name() const { return _name; } 
```

编译器会抱怨：你承诺`name()`不会修改状态，但你提供了一个参考，*其他人*可以通过它来做。此外，该函数的语义是它提供了调用者可以修改的*副本。*如果副本被删除（不可能删除它，但为了论证），那么调用代码可以修改看起来像本地副本的内容并实际修改对象的状态。

通常，在提供 const 访问器时，您应该返回对成员的*引用*而不是*副本*。

> 我对临时的 C++ 返回值优化有很好的了解，[...] 现代 C++ 编译器是否进行了这种优化？有什么理由不应该或不能制作它吗？

我感觉您并没有真正了解返回值优化是什么，否则您不会提出第二个问题。让我们通过一个例子来解决这个问题。当用户代码具有：

```
std::string foo() {
   std::string result;
   result = "Hi";
   return result;
}
std::string x = foo(); 
```

在上面的代码中，可能存在三个字符串：`result`inside `foo`、返回值（让我们调用它`__ret`）和`x`，以及可以应用的两种可能的优化：*NRVO*和通用*复制*省略。*NRVO*是编译器在处理函数时执行的优化`foo`，它包含在 mergint 中`result`，`__ret`并将它们放在同一位置并创建单个对象。优化的第二部分必须在调用方完成，它再次合并两个对象的位置`x`和`__ret`。

至于实际的实现，我将从第二个开始。调用者（在大多数调用约定中）负责为返回的对象分配内存。如果没有优化（并且在一种伪代码中），这就是调用者发生的事情：

```
[uninitialized] std::string __ret;
foo( [hidden arg] &__ret );          // Initializes __ret
std::string x = __ret; 
```

现在，因为编译器知道临时`__ret`变量只有在初始化`x`时才会生效，所以将代码转换为：

```
[uninitialized] std::string x;
foo( [hidden arg] &x );             // Initializes x 
```

调用者的副本被省略了。里面的副本`foo`以类似的方式被删除。转换后的（为了符合调用约定）函数是：

```
void foo( [hidden uninitialized] std::string* __ret ) {
   std::string result;
   result = "Hi";
   new (__ret) std::string( result );   // placement new: construct in place
   return;
} 
```

现在这种情况下的优化是完全一样的。由于`result`活着只是为了能够初始化返回的对象，它可以重用相同的空间，而不是创建一个新对象：

```
void foo( [hidden uninitialized] std::string* __ret ) {
   new (__ret) std::string();
   (*__ret) = "Hi";
   return;
} 
```

现在回到你原来的问题，因为成员变量在成员函数被调用之前就已经存在，所以这个优化不能应用。编译器不能将返回值放在与成员属性相同的位置，因为该变量已经在一个已知位置存在，该位置不是`__ret`（由调用者提供）的地址。

我过去写过关于[NRVO](http://definedbehavior.blogspot.com/2011/08/value-semantics-nrvo.html)和[复制](http://definedbehavior.blogspot.com/2011/08/value-semantics-copy-elision.html)省略的文章。您可能有兴趣阅读这些文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T21:16:00.900

简短的回答：

**除非编译器通过内联或某些编译器特定的魔法在编译`length()`时查看复制构造函数的实现和方法`main`，否则它将无法优化该副本。**

长答案：

C++ 标准通常从不直接规定应该或不应该执行哪些优化。实际上，几乎按照定义，优化是不会改变格式良好的程序的行为的东西。

如果编译器能够证明对特定调用的`obj.name`结果是观察者无法证明其存在的副本，则可以自由地删除该副本。这也可能是你的情况，只需要一点内联，所以这个复制省略在理论上是允许的，*因为*你不会打印出来或以任何方式使用它的效果。

现在，仔细观察，标准的第 12.8 条确实列出了四种其他情况（与异常处理、被调用者的返回值（例如`name`您的案例中的内部）有关，以及将临时对象绑定到引用）。我在这篇文章中列出了它们以便于参考，但它们都不符合您从调用中接收临时值并用于调用`const`方法的情况。

因此，这些明确的“例外”不允许仅通过检查`main`和注意`const`.`length()`

> 当满足某些条件时，允许实现省略类对象的复制/移动构造，即使对象的复制/移动构造函数和/或析构函数具有副作用。在这种情况下，实现将省略的复制/移动操作的源和目标简单地视为引用同一对象的两种不同方式，并且该对象的销毁发生在两个对象本应被删除的较晚时间。没有优化就被破坏了。这种复制/移动操作的省略，称为复制省略，在以下情况下是允许的（可以结合起来消除多个副本）：
> 
> — 在具有类返回类型的函数的 return 语句中，当表达式是具有与函数返回类型相同的 cvunqualified 类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，可以通过将自动对象直接构造到函数的返回值中来省略复制/移动操作
> 
> — 在 throw 表达式中，当操作数是非易失性自动对象（函数或 catch 子句参数除外）的名称时，其范围不超出最里面的封闭 try 块的末尾（如果有一）、从操作数到异常对象（15.1）的复制/移动操作可以通过将自动对象直接构造到异常对象中来省略
> 
> — 当尚未绑定到引用 (12.2) 的临时类对象将被复制/移动到具有相同 cv 非限定类型的类对象时，可以通过将临时对象直接构造到省略复制/移动的目标
> 
> — 当异常处理程序的异常声明（第 15 条）声明与异常对象（15.1）具有相同类型的对象（cv 限定除外）时，可以通过处理异常声明来省略复制/移动操作作为异常对象的别名，如果程序的含义将保持不变，除了为异常声明声明的对象执行构造函数和析构函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T20:39:33.533

> 是 const 成员函数，因此保证不会修改字符串的状态

这不是真的。`std::string`可能有一个`mutable`数据成员，并且任何函数都可以强制转换它或它的`const`任何`this`成员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T20:59:25.800

了解编译器进行了哪些优化的最佳方法是查看它生成的程序集并准确了解编译器实际做了什么。很难预测给定编译器在每种情况下可能会或可能不会进行什么样的优化，大多数人通常要么过于悲观，要么过于乐观。

另一方面，只需检查编译器的输出，您就可以准确地看到它的作用，而无需任何猜测。

在 Visual Studio 中，您可以通过设置项目属性 -> C/C++ -> 输出文件 -> 汇编程序输出 -> “使用源代码进行汇编”，或[仅提供 /Fas 到命令行](http://msdn.microsoft.com/en-us/library/367y26c6%28v=vs.80%29.aspx)。[您可以使用-S](http://www.delorie.com/djgpp/v2faq/faq8_20.html)告诉 GCC 输出程序集，但这不会将程序集行与源代码行关联起来；为此，[您必须使用 objdump](http://24alpha.wordpress.com/2007/12/18/how-to-get-gcc-to-interleave-assembly-output-with-original-source-code/)或[-fverbose-asm 命令行选项（](http://gcc.gnu.org/ml/gcc/2009-03/msg00458.html)如果它恰好在您的版本中工作）。

例如，您的代码中的一个块（在 MSVC 中的完整版本下编译）是：

```
; 23   :    obj.name().clear();

    lea ecx, DWORD PTR _obj$[esp+92]
    push    ecx
    lea esi, DWORD PTR $T23719[esp+96]
    call    ?name@NamedObject@@QBE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ ; NamedObject::name
    mov DWORD PTR [eax+16], ebx
    cmp DWORD PTR [eax+20], edi
    jb  SHORT $LN70@main
    mov eax, DWORD PTR [eax]
$LN70@main:
    mov BYTE PTR [eax], bl
    mov ebx, DWORD PTR __imp_??3@YAXPAX@Z
    cmp DWORD PTR $T23719[esp+112], edi
    jb  SHORT $LN84@main
    mov edx, DWORD PTR $T23719[esp+92]
    push    edx
    call    ebx
    add esp, 4
$LN84@main:

; 24   :    std::cout << "name length after clear: " << obj.name().length() << std::endl;

    lea eax, DWORD PTR _obj$[esp+92]
    push    eax
    lea esi, DWORD PTR $T23720[esp+96]
    call    ?name@NamedObject@@QBE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ ; NamedObject::name
    mov BYTE PTR __$EHRec$[esp+100], 2
    mov ecx, DWORD PTR __imp_?endl@std@@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@1@AAV21@@Z
    mov eax, DWORD PTR [eax+16]
    mov edx, DWORD PTR __imp_?cout@std@@3V?$basic_ostream@DU?$char_traits@D@std@@@1@A
    push    ecx
    push    eax
    push    OFFSET ??_C@_0BK@PFKLDML@name?5length?5after?5clear?3?5?$AA@
    push    edx
    call    ??$?6U?$char_traits@D@std@@@std@@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@0@AAV10@PBD@Z ; std::operator<<<std::char_traits<char> >
    add esp, 8
    mov ecx, eax
    call    DWORD PTR __imp_??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@I@Z
    mov ecx, eax
    call    DWORD PTR __imp_??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@P6AAAV01@AAV01@@Z@Z
    cmp DWORD PTR $T23720[esp+112], edi
    jb  SHORT $LN108@main
    mov eax, DWORD PTR $T23720[esp+92]
    push    eax
    call    ebx
    add esp, 4 
```

[（您可以使用undname.exe 取消](http://msdn.microsoft.com/en-us/library/5x49w699.aspx)装饰 MSVC 符号名称）如您所见，在这种情况下，它`NamedObject::name()`在 .clear() 之前和在 .length() 之前再次调用该函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T20:51:33.943

返回值优化是通过消除函数本地范围内的临时对象或对象并将被消除的对象用作返回对象的别名来消除 return 语句中的隐式副本。

显然，这只适用于函数正在构造返回语句中使用的对象的情况。如果返回的对象已经存在，则不会创建额外的对象，因此必须将返回的对象复制到返回对象。函数中没有其他可以消除的对象构造。

尽管存在上述所有情况，编译器可以进行任何它认为合适的优化，只要符合标准的程序不能观察到行为差异，因此任何（不可观察的）都是可能的。

# regex - Perl 正则表达式匹配

> ID：11057837
> 
> 赞同：0
> 
> 时间：2012-06-15T20:35:17.457
> 
> 标签：regex, perl

我是 perl 新手，在匹配字符串的特定部分时遇到问题。

我要匹配的是粗体：

[1339300800] 当前主机状态：**某事**；

至少，我成功地匹配了括号之间的字符串！

```
($line=~/\[(\d*)\]*/) 
```

我正在为粗体部分尝试这样的事情：

```
($line=~/STATE:\s(\S+);/) 
```

有人可以给点建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:38:49.103

你的正则表达式

```
STATE:\s([^;]*); 
```

对我有用。请记住，它在第 1 组中匹配

```
if ($subject =~ m/STATE:\s(\S+);/) {
    $result = $1;
} else {
    $result = "";
} 
```

此外，可以使第一个正则表达式不那么冗长

```
\[(\d*)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T20:39:14.570

如果语句总是以 a 结尾`;`，你可以这样写：

```
$line =~ /:\s([^;]+)/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T20:39:04.423

你很接近：

```
$line =~ /STATE:\s+([^;]+);/ 
```

这将得到所有不是分号的东西。如果 STATE 和“某物”之间有多个空格，它仍然会匹配

# c# - 使用后面的代码设置 div 的 css 类

> ID：11057839
> 
> 赞同：10
> 
> 时间：2012-06-15T20:35:32.013
> 
> 标签：c#, asp.net, vb.net

我知道我们可以使用后面的代码设置各种样式属性：

```
divControl.Style("height") = "200px" 
```

但是如何设置它的类而不是从代码中声明每个样式呢？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-15T20:38:12.883

**C＃**

```
divControl.Attributes["class"] = "myClass"; 
```

**VB**

```
divControl.Attributes("class") = "myClass" 
```

你需要在你的 css 文件中有这样的规则

```
.myClass
{
   height:200px; 
   /*...more styles*/
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T20:37:46.530

这样您就可以定义完整的内联样式，而无需单独的类声明：

```
divControl.Attributes("style") = "height:200px; color:Red" 
```

# c# - 在 Allscripts 中找不到默认端点元素错误

> ID：11057842
> 
> 赞同：0
> 
> 时间：2012-06-15T20:35:42.670
> 
> 标签：c#, .net, wcf

我想连接到 WCF 服务。服务引用驻留在类库中。通过将 App.config 添加到单元测试项目中，我成功连接到 MSTEST 单元测试中的服务。我无法成功连接到应用程序中的服务。我找到了应用程序的配置文件。我可以编辑该文件，并且我确认我可以通过以下方式访问我添加到配置中的密钥

`<add key="testKey"`

但是，当我尝试在应用程序中连接时，我收到错误

在 ServiceModel 客户端配置部分中找不到引用合同“ContractName.Service”的默认端点元素。这可能是因为在客户端元素中找不到匹配此合同的端点元素。

我添加了部分

```
<system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IPinGenerator" closeTimeout="00:01:00"
                 openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                 allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                 maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                 messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                 useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                     maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                         realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://somewhere"
             binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IPinGenerator"
             contract="CompanyNamePinGenerator.IPinGenerator" name="BasicHttpBinding_IPinGenerator" />
        </client>
    </system.serviceModel> 
```

然而，它并不能解决问题。我还尝试将命名空间添加`contract=""`到生成的代码属性中

`[System.ServiceModel.ServiceContractAttribute(ConfigurationName=`

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:28:57.683

出现问题是因为您在客户端配置中没有与 name 匹配的任何端点`ContractName.Service`。

我所看到的是您只有一个端点与不同的合同`CompanyNamePinGenerator.IPinGenerator`。

位于代理文件中的服务类或接口引用`ContractName.Service`配置中缺少的和。

你必须确保几件事：

1.  将生成的代理更新到最新
2.  确保客户端配置包含服务所需的所有端点。

通常当我遇到此类问题时，我会打开 VS 命令提示符运行 svcutil.exe 并从生成的文件中复制代理代码和客户端配置。

# sqlite - 无法从 Liquibase 连接到 sqlite 引擎驱动程序

> ID：11057853
> 
> 赞同：0
> 
> 时间：2012-06-15T20:36:28.530
> 
> 标签：sqlite, database-migration, liquibase, sqlitejdbc

我将 liquibase-1.9.3 和 sqlite-jdbc-3.7.2.jar 下载/安装到 ubuntu 11.* 中。并将 sqlite-jdbc-3.7.2.jar 放入 liquibase-1.9.3 /lib 中。我跑：

```
java -jar liquibase-1.9.3.jar --driver=org.sqlite.JDBC --changeLogFile=assets_db.xml --url=sqlite.db update 
```

并得到结果：迁移失败：找不到数据库驱动程序：org.sqlite.JDBC

我猜 ubuntu 有一个默认的 java 版本：

```
java -version 
```

java version "1.6.0_22" OpenJDK Runtime Environment (IcedTea6 1.10.2) (6b22-1.10.2-0ubuntu1~11.04.1) OpenJDK Client VM (build 20.0-b11, 混合模式, 共享)

我看到有人发布了一个类似的问题： [Liquibase and SQLite](https://stackoverflow.com/questions/4460433/liquibase-and-sqlite)

但对此没有正确答案。我是否必须安装 ant 才能使其正常工作。请帮忙，我几乎花了一整天的时间来找到一个可行的解决方案。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:54:40.283

然后我发现以下工作：

java -jar liquibase-1.9.3.jar --driver=org.sqlite.JDBC --classpath=lib/sqlite-jdbc-3.7.2.jar --changeLogFile=core.xml --url=jdbc:sqlite:sqlite .db 更新

迁移成功

我为驱动程序 jar 文件添加了类路径。

# vb.net - 从我的程序拖放到 vb.net 中的第三方程序

> ID：11057857
> 
> 赞同：1
> 
> 时间：2012-06-15T20:36:38.933
> 
> 标签：vb.net, drag-and-drop, execute

我正在尝试使用第三方程序打开多个文件，方法是从 VB.NET 调用它。默认情况下，我正在使用的程序通过命令行一次只打开一个文件 - 如果我再次调用它，它会打开一个新实例。（在 GUI 中启动时，我可以在其上放置许多文件）。

现在我打开它

```
Shell("program file") 
```

如果程序正在运行，我想在正在运行的实例之上添加“文件”，而不是启动一个新实例。

就像是：

```
If Not procExists then
    Shell("program file")
else
   'I want to drop "file" onto running "program" (or procNumber since I have it)
End If 
```

我一直在尝试找到一些用于 VB.NET 或 c# 的拖放代码示例，但我找不到我能理解的东西 - 我读到了 WM_DROPFILES 以及它在 Windows 7 中可能无法正常工作的事实（这正是我需要它工作）。我还找到了 MFC 的解决方法，[http://helgeklein.com/blog/2010/03/how-to-enable-drag-and-drop-for-an-elevated-mfc-application-on-vistawindows-7/](http://helgeklein.com/blog/2010/03/how-to-enable-drag-and-drop-for-an-elevated-mfc-application-on-vistawindows-7/)但我对该示例的有限理解（除了我无法使其工作或将其用于我的 vb.net 应用程序的事实）是它适用于在我的应用程序上放置项目，而不是在不同的应用程序上。

我发现的其他东西 - 再一次，它似乎意味着在我的应用程序中删除文件，而不是另一个 - 并且仍然打开该程序的单独实例，我真的不希望这样 - 有类似的东西：

```
Public Const WM_DROPFILES As Integer = 563
Private Declare Sub DragFinish Lib "Shell32.dll" (ByVal hdrop As IntPtr)
Private Declare Function DragAcceptFiles Lib "shell32.dll" (ByVal hwnd As IntPtr, ByVal accept As Boolean) As Long
Private Declare Function DragQueryFile Lib "shell32.dll" (ByVal hdrop As IntPtr, ByVal ifile As Integer, ByVal fname As System.Text.StringBuilder, ByVal fnsize As Integer) As Integer

Public Sub HandleDroppedFiles(ByVal file As String)
    If Len(file) > 0 Then
        'do something but what ? If I call the program, it will open a new instance
    End If
End Sub 
```

我在哪里可以获得 WM_DROPFILES 的示例 - 或其他东西 - 我可以工作？

**编辑**：使用建议的答案，我尝试过：

```
For Each filename in filelist
  System.Diagnostics.Process.Start(program, filename)
Next 
```

不幸的是，就像它一样`Shell("program filename")`，它打开了许多“程序”实例，而不是在同一个实例中加载所有文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:37:56.303

当您将文件放在快捷方式上时，Windows 不会做任何引人注目的事情。它只是启动程序并将放置文件的路径作为命令行参数传递。这可以定制，但不是很常见。

因此，只需做 Windows 所做的事情，比模拟 D+D 几乎不可能完成的任务要容易得多：

```
 System.Diagnostics.Process.Start("program file", file); 
```

确保将完整路径传递给文件（如 c:\foo\bar.baz），增量路径将不起作用。

# java - 将自定义类导入 Android 项目时构造函数不可见错误

> ID：11057858
> 
> 赞同：1
> 
> 时间：2012-06-15T20:36:41.897
> 
> 标签：java, android

我用 Java 编写了一个 FileIndexer 类，并试图将它导入到我的 Android 应用程序中。但是，我收到以下错误...

```
The constructor FileIndexer(File) is not visible 
```

这是我尝试实例化的地方：

```
import mpss.categorizer.FileIndexer;
...
try {
        FileIndexer indexer = new FileIndexer(getExternalFilesDir(null));
    } catch (Exception e) {
        Log.w("Indexing", "Error creating FileIndexer: " + e.getMessage());
    } 
```

这是 FileIndexer 中的构造函数：

```
public class FileIndexer {
    private FSDirectory fsDirectory;
    private ArrayList<File> queue;

    public FileIndexer(File f){
        try {
             fsDirectory = FSDirectory.open(f);
        } catch (IOException e) {
             System.out.println("Invalid location: " + e.getMessage());
        }
    } 
```

我创建了一个 FileIndexer jar，然后将其添加到我的 Android 构建路径中。此外，我的清单包括：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

所以这并不是说我无法访问外部存储。知道为什么我会收到此错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T06:24:23.413

您的包中是否有一个名为 FileIndexer 的相同类？

我曾经在导入时遇到了可见性问题，这就是原因。

# java - 将超过二维的java数组视为列表

> ID：11057860
> 
> 赞同：3
> 
> 时间：2012-06-15T20:36:44.177
> 
> 标签：java, groovy, multidimensional-array, mop

我正在使用 Groovy 编写一个处理 BASIC 的 DSL，我想要一些关于如何处理多（多于 2 个）维数组的帮助。

我正在处理这样的基本代码：

```
100 LET X = A(1, 2, 3) 
```

处理 1 维情况很容易 - 只需创建一个返回 A 元素的闭包（通过 MOP），而对于 2 维，我可以在表单中执行相同操作

```
A(2, 3) == A.get(2)[3] 
```

但是如何处理无限维度的数组呢？

**更新**：为了更清楚一点，问题是如何在 DSL 上下文中动态返回数组值？脚本解释器将 A(1, 2, 3) 视为我可以使用 MOP 拦截的函数调用。但是如何在该上下文中返回数组元素的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T21:35:11.880

如果您使用嵌套列表建模的 n 维数组（不是最节省内存的方法，但很容易实现），并且想要访问索引处的元素，`[i_1, i_2, ... , i_n]`您可以这样做：

```
def getElementAt(arr, ... indexes) {
    indexes.inject(arr) { a, ind -> a[ind] }
}

// A 2x2x3 array implemented with nested lists.
def arr = [[[1,1,1], [1,1,5]], [[1,1,1], [1,1,1]]]

// I want to get that 5!
assert getElementAt(arr, 0, 1, 2) == 5

// The line above is equivalent to:
assert arr[0][1][2] == 5 
```

允许您迭代集合并从[`inject`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#inject%28U,%20groovy.lang.Closure%29)初始值开始累积给定操作的结果。在这种情况下，我们迭代我们想要从数组中获取的索引，并以整个数组开始迭代；然后每次迭代返回给定索引处的子数组，该索引将在下一次迭代中使用。如果您碰巧使用的索引少于预期，它将返回一个列表而不是整数，例如`getElementAt(arr, 0, 1) == [1, 1, 5]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:51:55.197

最后，我决定解析输入并使用它通过 MOP 构建闭包：

```
 /* array references look like functions to Groovy so trap them */
    BinsicInterpreter.metaClass."$varName" = {Object[] arg ->
        def answer = "package binsic; $varName"
        arg.each { 
            answer = answer + "[$it]"
        }
        def something = shell.evaluate(answer)
        return something
    } 
```

所以如果我们有：

```
100 LET X = A(10, 20, 3) 
```

MOP 将 A(...) 捕获为函数调用，上面的代码给了我 A[10][20][3]

# sql - 使用 IF..Then..Else 和选择查询？

> ID：11057866
> 
> 赞同：-2
> 
> 时间：2012-06-15T20:37:09.090
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有 3 个这样的表：

`comment`桌子 ：

```
commentId pid    sid       text      vid
1          1     null    comment 1    1
2         null    1     comment 2    1
3          2     null    comment 3    1 
```

`student`桌子：

```
sid     firstname   lastname
1         john       adam
2         joan       adam 
```

`professor`桌子 ：

```
pid    firstname   lastname
1       mark        abram
2       sean        hoak 
```

我想写一个查询，结果返回如下：

```
firstname    lastname
mark          abram
john          adam
sean          hoak 
```

米

```
if (select query ==null) 
   then (select query 1) 
   else select (query 2) 
```

我尝试了以下方法：

```
if((select pid from comment==null)
then select student.firstname , student.lastname from student where sid in (select sid from comment where vid=1)

else
(select professor.firstname ,professor.lastname from professor where pid in (select pid from comment where vid=1) 
```

但没有运气。

任何想法如何达到想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:45:34.743

如果我理解您的问题，您想查看使用 vid =1 发表评论的人的姓名，无论他们是学生还是教授。这将做到这一点。A`LEFT JOIN`带来左表中的所有内容，包括空值。只需`LEFT JOIN`使用适当的 id，您就会得到所需的东西。

```
SELECT ISNULL(p.firstname,s.firstname), ISNULL(p.lastname,s.lastname) --,comment or whatever other things you want to show
FROM Comment C
LEFT JOIN professor P ON P.pid = c.pid
LEFT JOIN student s ON s.sid = c.sid
WHERE vid = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:45:41.170

如果我理解正确，这个查询应该：

```
SELECT A.commentId, ISNULL(B.firstname,C.firstname) firstname, ISNULL(B.lastname,C.lastname) lastname
FROM comment A
LEFT JOIN student B
ON A.sid = B.sid
LEFT JOIN professor C
ON A.pid = C.pid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T20:46:03.260

尝试这个：

```
SELECT COALESCE(p.firstname, s.firstname), COALESCE(p.lastname, s.lastname)
FROM comments c
LEFT JOIN Professors p
ON c.pid = p.pid
LEFT JOIN Students s
ON c.sid = s.sid 
```

有点讨厌，如果您创建一个合并学生和教授的视图，可能会得到改进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T20:49:10.190

或者

```
select student.firstname , student.lastname 
from student 
where sid in (select sid from comment where vid=1 and pid is null)
UNION ALL
select professor.firstname ,professor.lastname 
from professor 
where pid in (select pid from comment where vid=1 and PID is not null) 
```

# c - 随机猜谜游戏 - 错误

> ID：11057867
> 
> 赞同：3
> 
> 时间：2012-06-15T20:37:15.063
> 
> 标签：c

当我输入一个字符串而不是整数时，这段代码有问题。如何检查用户是否输入了字符而不是整数？（我想向用户发出一条消息，说您应该使用数字，而不是字符）

另外：如果您在此代码中发现任何我可以改进的地方，请帮助我！（我是 C 新手）

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
int main () {

    int secret, answer;

    srand((unsigned)time(NULL));

    secret = rand() % 10 + 1;

    do {
        printf ("Guess a number between 1 and 10");
        scanf ("%d",&answer);
        if (secret<answer) puts ("Guess a higher value");
        else if (secret>answer) puts ("Guess a lower value");
    } while (secret!=answer);

    puts ("Congratz!");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T20:42:56.200

scanf 返回找到的匹配数。在您的情况下，`1`如果它读取一个数字，它将返回。`0`如果它无法读取以下数字：

```
if(scanf ("%d",&answer) != 1){
    puts("Please input a number");

    // Now read in the rest of stdin and throw it away.
    char ch;
    while ((ch = getchar()) != '\n' && ch != EOF);

    // Skip to the next iteration of the do while loop
    continue;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T20:41:18.063

将输入读取为字符串 ( `char[]`and `%s`)，检查所有字符是否为 ( `isdigit()`) 数字（可能允许使用`'+'`or`'-'`作为第一个字符）并用于`atoi()`转换为`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:39:21.670

您应该编写一个函数，当且仅当字符串中的每个字符都是数字时才返回 true，否则返回 false。

```
char * in_str;
int answer;

...

sscanf("%s", in_str);

if (!is_number(in_str)) {
  printf("Please put in a number, not a letter");
} else {
  answer = atoi(in_str);
}

... 
```

您需要实现该`is_number`功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T20:42:29.767

由于您不能假设用户的输入是整数，因此请`scanf()`接受一个字符串。然后尝试用`strtol()`;转换该字符串 `0`如果输入不是整数，它将返回。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T20:42:48.533

将输入作为字符串读取`fgets`，然后用于`strtol`检查输入。 `strtol`相反`atoi`能够进行错误检查。

# android - 从相机获取输入而不显示它

> ID：11057874
> 
> 赞同：0
> 
> 时间：2012-06-15T20:37:32.880
> 
> 标签：android, iphone, ios, camera

我是新手。我的问题与 IOS 和 Android 有关。

1.  假设我想实时分析摄像头看到的内容，是否可以在线从摄像头获取视频流？

2.  是否有可能当相机将数据流式传输到应用程序时，手机显示屏不会显示相机看到的内容，而是显示一些与应用程序相关的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:52:24.770

> 假设我想实时分析摄像头看到的内容，是否可以在线从摄像头获取视频流？

是的，两个平台都有视频会议应用程序，所以这一定是可能的。

> 是否有可能当相机将数据流式传输到应用程序时，手机显示屏不会显示相机看到的内容，而是显示一些与应用程序相关的信息？

不知道iOS，但在Android上我认为应该是可能的。跟随[开发者文档录制视频](http://developer.android.com/guide/topics/media/camera.html#custom-camera)但忽略预览布局。注意：我还没有尝试过，但我认为表面上看不出它不起作用的原因。

# sql - 使用从下拉列表派生的变量作为选择语句中的列名... Access DB

> ID：11057875
> 
> 赞同：1
> 
> 时间：2012-06-15T20:37:36.297
> 
> 标签：sql, database, select, vbscript

我正在与已经在这里的世界上最糟糕的数据库合作，所以不要为此责怪我。

所以，这就是我到目前为止所拥有的......

```
module = txtModule.value
presstype = txtPressType.value

SQL_query = "SELECT * FROM tbl_spareparts WHERE '"& module &"' <> '""' AND '"& module &"' = '"& presstype &"' AND Manufacturer = '"& txtsrch.value &"' ORDER BY SAP_Part_No"
Set rsData = conn.Execute(SQL_query) 
```

这会产生以下 SQL 语句：

```
SELECT * FROM tbl_spareparts WHERE 'Banyan_Module' <> '"' AND 'Banyan_Module' = 'PB' AND Manufacturer = 'Tester' ORDER BY SAP_Part_No 
```

有什么办法可以将模块变量用作列名 - 显然列名周围的 ' 会导致错误。这真的让我很困扰。

顺便说一句，我在 .HTA 应用程序页面内用 VBScript 编写此代码，因为它必须在技术 PC 上本地运行。

谢谢。

R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:14:12.487

如果您使用的变量是列名，则不需要在它们周围加上引号

```
SQL_query = "SELECT * FROM tbl_spareparts WHERE "& module &" <> '' AND "& module &" = "& presstype &" AND Manufacturer = '"& txtsrch.value &"' ORDER BY SAP_Part_No" 
```

# perl - Perl 脚本似乎是缓存？

> ID：11057878
> 
> 赞同：2
> 
> 时间：2012-06-15T20:37:48.807
> 
> 标签：perl, mod-perl

我正在使用 Apache 通过 mod_perl 运行 perl 脚本。我正在尝试以一种宁静的方式（又名`GET www.domain.com/rest.pl/Object/ID`）解析参数。

如果我这样指定 ID：`GET www.domain.com/rest.pl/Object/1234`我将按`1234`预期返回对象。

但是，如果我像这样指定不正确的被黑 url，`GET www.domain.com/rest.pl/Object/123`我也会返回 object `1234`。

我很确定这个问题中的[问题](https://stackoverflow.com/questions/3169146/perl-cgi-script-returns-different-results-depending-on-run)正在发生，所以我打包了我的方法并从我的核心脚本中调用它。即使在那之后，我仍然看到线程返回看似缓存的数据。

上述文章中的一项建议是替换`my`为`our`. 阅读[our](http://perldoc.perl.org/functions/our.html) vs [my 给](http://perldoc.perl.org/functions/my.html)我的印象是，这`our`是全球性的，`my`也是本地的。我的假设是每次都会重新初始化局部变量。也就是说，就像在下面的代码示例中一样，我每次都用新值重置变量。

Apache Perl 配置是这样设置的：

```
PerlModule ModPerl::Registry

<Directory /var/www/html/perl/>
   SetHandler perl-script
   PerlHandler ModPerl::Registry
   Options +ExecCGI
</Directory> 
```

这是直接调用的 perl 脚本：

```
#!/usr/bin/perl -w
use strict;
use warnings;
use Rest;

Rest::init(); 
```

这是我的包裹`Rest`。该文件包含用于处理其余请求的各种函数。

```
#!/usr/bin/perl -w

package Rest;

use strict;
# Other useful packages declared here.

our @EXPORT = qw( init );

our $q = CGI->new;

sub GET($$) {
    my ($path, $code) = @_;
    return unless $q->request_method eq 'GET' or $q->request_method eq 'HEAD';
    return unless $q->path_info =~ $path;
    $code->();
    exit;
}

sub init()
{
eval {
        GET qr{^/ZonesByCustomer/(.+)$} => sub {
            Rest::Zone->ZonesByCustomer($1);
        }
    }
}

# packages must return 1
1; 
```

作为旁注，我不完全理解这个`eval`语句是如何工作的，或者这个命令正在解析什么字符串`qr`。该脚本主要取自[此示例](http://www.lifecycle-ps.com/blog/?p=93)，用于使用 perl 设置基于 REST 的 Web 服务。我怀疑它是从那个神奇的`$_`变量中提取出来的，但我不确定它是否是，或者它正在填充什么（显然是查询字符串或 url，但它似乎只是它的一部分？）。

这是我的包`Rest::Zone`，它将包含功能操作的内容。我省略了我如何操作数据的细节，因为它正在工作并将其作为抽象存根。主要问题似乎是传递给此函数的参数或函数的输出。

```
#!/usr/bin/perl -w

package Rest::Zone;

sub ZonesByCustomer($)
{
    my ($className, $ObjectID) = @_;

    my $q = CGI->new;
    print $q->header(-status=>200, -type=>'text/xml',expires => 'now', -Cache_control => 'no-cache', -Pragma => 'no-cache');
    my $objectXML = "<xml><object>" . $ObjectID . "</object></xml>";
    print $objectXML;
}

# packages must return 1
1; 
```

这里发生了什么？为什么我不断收到陈旧或缓存的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T22:17:45.000

试试这个：

```
my $q = CGI->new; 
print $q->header(-status => 200,
                 -type => 'text/xml',
                 -Cache_control => 'no-cache, no-store, must-revalidate'); 

my $ID = $q->path_info();
$ID =~ s/^.*\/(.*)$/$1/;

my $objectXML = "<xml><object>$ID</object></xml>"; 

print $objectXML; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T15:48:14.567

不要使用全局 CGI 对象。

```
package Rest;

...

#our $q = CGI->new; 
# Remove that, it is only going to be executed once when the pacakge is loaded (use'd)

sub GET($$) {
    my ($path, $code) = @_;
    my $q = CGI->new; # Add this line (you can call CGI->new multiple times)
    return unless $q->request_method eq 'GET' or $q->request_method eq 'HEAD';
    return unless $q->path_info =~ $path;
    $code->();
    exit;
} 
```

您可以将其保留为`our`全局并在每个请求中刷新它。由于每个请求都会调用 init()，所以把它放在那里：

```
package Rest;
our $q;
...
sub GET ....
...
sub init
{
  $q = CGI->new;
  eval ...
  ...
} 
```

# c++ - 如何让 Doxygen 记录在 C++ 文件中定义的类？

> ID：11057895
> 
> 赞同：0
> 
> 时间：2012-06-15T20:39:15.587
> 
> 标签：c++, doxygen

我知道类应该在 hpp 文件中定义。公司惯例要求我将这个特定的类保存在 cpp 文件中。

Doxygen 正在解析有问题的 cpp 文件并在其中记录一些#defines，但完全跳过了课程。我如何让 Doxygen 看到它？我可以在 doxyfile 或文件本身中放一些东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T20:54:10.120

从位于此处的 Doxygen 文档：http: [//www.doxygen.nl/manual/config.html#config_build](http://www.doxygen.nl/manual/config.html#config_build)

我发现这两个选项应该有所帮助：

EXTRACT_LOCAL_CLASSES
如果将 EXTRACT_LOCAL_CLASSES 标记设置为 YES，则在源文件中本地定义的类（和结构）将包含在文档中。如果设置为 NO，则仅包含头文件中定义的类。对 Java 源没有任何影响。

EXTRACT_ANON_NSPACES
如果此标志设置为 YES，匿名命名空间的成员将被提取并作为名为“anonymous_namespace{file}”的命名空间出现在文档中，其中 file 将替换为包含匿名命名空间的文件的基本名称. 默认匿名命名空间是隐藏的。

# c# - 无法在 WPF C# 代码中获取对 png 工作的引用

> ID：11057898
> 
> 赞同：3
> 
> 时间：2012-06-15T20:39:24.400
> 
> 标签：c#, .net, wpf, uri

我读过很多例子。我所拥有的似乎是正确的。但是在加载时它失败了。

这是我的代码：

```
LargeImage=new BitmapImage(new Uri("pack://application:,,,/Images/books_48.png")) 
```

此代码在 AssemblyA 中运行。AssemblyA 的项目中还有一个名为 Images 的文件夹。该文件夹有一个名为 books_48.png 的文件。它设置为编译为“资源”并且从不复制。

我使用 DotPeek 查看图像是否在 AssemblyA.dll 中并且它在那里。

第一个引用`LargeImage`是在 AssemblyB 中。它将 LargeImage 绑定到 FluentRibbon Fluent:Button.LargeIcon。

当需要加载 BitmapImage 时，我收到此错误：

> 找不到资源“images/books_48.png”。

**关于如何加载它的任何想法？**

注意：我也试过这些：

```
"pack://application:,,,/AssemblyA;component/Images/books_48.png"
"pack://application:,,,/AssemblyA;Images/books_48.png"
"pack://application:,,,/AssemblyA;/Images/books_48.png"
"pack://application:,,,/Images/books_48.png"
"pack://application:,,,Images/books_48.png"
"Images/books_48.png"
"/Images/books_48.png" 
```

他们都给我错误（“找不到”或“无效的 URI”类型的错误）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:12:55.147

我使用我的 ImageUtilities 类在 C# 中获取图像。我将附上下面的代码..

我总是将我的图像设置为“资源”“不要复制”。然后我总是将所有图像复制到我的 Properties\Resources.resx 文件中。这可以通过扩展作为项目文件夹中第一项的“属性”文件夹在 Visual Studio 中完成。然后双击“Resources.resx”文件，就会弹出设计器。在此窗口的左上角，单击下拉菜单并选择“图像”。然后突出显示项目中的所有图像文件（来自解决方案资源管理器）并将它们复制/粘贴到 Resources.resx 的窗口中。

这样，在后面的代码中，我可以通过键入以下内容来访问它们：

属性.资源.图像名；

这给了你一个位图。

我使用我的 ImageUtilities 类将其转换为 ImageSource 以用于 WPF。因此，如果我有一个名为“MyPicture.png”的图像，我会在 ImageUtilities 类上进行以下调用：

```
ImageSource source = ImageUtilities.ImageSourceFromResourceKey(
                                  Properties.Resources.MyPicture, "MyPicture"); 
```

我传递文本“MyPicture”的原因是我可以缓存图像，而不必为每张图像创建一次以上。

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Windows;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace Helpers
{
    public static class ImageUtilities
    {
        [System.Runtime.InteropServices.DllImport("gdi32.dll")]
        public static extern bool DeleteObject(IntPtr hObject);
        public static Dictionary<String, ImageSource> _cachedImages = new Dictionary<string, ImageSource>();

        public static ImageSource ImageSourceFromBitmap(Bitmap bitmap)
        {
            if (bitmap == null)
            {
                return ImageSourceFromResourceKey(Properties.Resources.Exit, "Exit");
            }

            try
            {
                IntPtr hBitmap = bitmap.GetHbitmap();
                BitmapSource bitmapSource = System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(
                    hBitmap,
                    IntPtr.Zero,
                    Int32Rect.Empty,
                    BitmapSizeOptions.FromEmptyOptions());

                DeleteObject(hBitmap);
                return bitmapSource;
            }
            catch (Exception ex)
            {
                //Error loading image.. Just log it...
                Helpers.Debug(ex.ToString());
            }

            return null;
        }

        public static ImageSource ImageSourceFromResourceKey(Bitmap bitmap, string imageKey)
        {
            if (!_cachedImages.ContainsKey(imageKey))
            {
                _cachedImages[imageKey] = ImageSourceFromBitmap(bitmap);
            }

            return _cachedImages[imageKey];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-15T21:01:43.460

[请参阅 Nuno Rodriguez 对WPF 图像资源](https://stackoverflow.com/questions/347614/wpf-image-resources)的回答。它解释了路径应该是：

**"/«Assembly A»;组件/«YourPath»/«YourImage.png»"**

# php - 正则表达式来验证 PHP、jQuery、JavaScript、Ruby 的网络路径

> ID：11057900
> 
> 赞同：2
> 
> 时间：2012-06-15T20:39:26.670
> 
> 标签：php, javascript, jquery, ruby, regex

试图找出一个用于验证网络路径的正则表达式，即：`\\comp\xyz`或`\\comp`或`\\comp\x\y\z\storage`或在所有部分上更冗长的东西，但希望能传达它的要点。

我目前拥有的是一个简单的输入字段，我有一个用户通过它传递信息。事情是我不希望他们把它弄错，因为后端连接到使用它在网络上的计算机上运行进程的客户端，所以我需要的最后一件事是有人输入错误并成为其他事情的原因打破。所以我认为一个快速的 preg_match 可以很好地从我目前正在使用的 PHP 端确认这一点，但我确实需要将它放入 JavaScript 和一个基于 Ruby 构建的层，所以我不知道所有正则表达式是否相等或者我是否需要一个适用于所有级别的..

另外，为了节省我以后回来的时间，我最终需要找出一个正则表达式，它允许用户执行本地路径，即：，`C:\`或前面提到的网络路径。`X:``H:\path\to\folder`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T20:44:08.430

`\\comp\x\y\z\storage`：

```
/^\\(\\[^\s\\]+)+(\\)?$/ 
```

`H:\path\to\folder`：

```
/^([A-Za-z]:(\\)?|[A-Za-z]:(\\[^\s\\]+)+)(\\)?$/ 
```

`Both`：

```
/^(\\(\\[^\s\\]+)+|([A-Za-z]:(\\)?|[A-z]:(\\[^\s\\]+)+))(\\)?$/ 
```

**工作演示：http:** [//jsfiddle.net/DerekL/gLfdv/](http://jsfiddle.net/DerekL/gLfdv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:44:19.220

这似乎对我有用：

```
([A-Z]:|\\)(\\[a-z0-9]+)* 
```

让我知道您是否有任何问题（不受欢迎或额外需要的）匹配

并验证整个字段，使用：

```
^([A-Z]:|\\)(\\[a-z0-9]+)*$ 
```

*编辑*一个小的修改是必要的，以匹配你所有的建议（我的坏）：

```
^([A-Z]:|\\)(\\$|\\[a-z0-9]+)*$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T19:51:16.303

对于第一个我有：

```
^\\(\\[a-zA-Z_]\w*)+$ 
```

第二个：

```
^[a-zA-Z]:(\\([a-zA-Z_]\w*)*)*$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T20:53:02.150

一般情况：

```
/^(\\\\\w+)(\\\w+)$/g   // matches \\comp, \\comp\xyz, \\comp\x\y\z\storage 
```

具体案例：

```
/^([A-Z]:)(\\|\\\w+)*$/g  // matches C:\, X:, H:\path\to\folder 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-20T11:39:30.053

这将匹配以 ip 地址开头的 UNC 路径，并且可以处理文件/文件夹名称中的空格。还验证标准路径格式，例如 C:\Users\User\some person\file.txt

```
/^((\\\\[a-zA-Z0-9-\.]+\\[a-zA-Z0-9`~!@#$%^&(){}'._-]+([ ]+[a-zA-Z0-9`~!@#$%^&(){}'._-]+)*)|([a-zA-Z]:))(\\[^ \\/:*?""<>|]+([ ]+[^ \\/:*?""<>|]+)*)*\\?$/ 
```

我修改了答案： [PHP Regex for matching a UNC path](https://stackoverflow.com/questions/9485091/php-regex-for-matching-a-unc-path/9485455#9485455)

和： [http ://regexlib.com/REDetails.aspx?regexp_id=2285&AspxAutoDetectCookieSupport=1](http://regexlib.com/REDetails.aspx?regexp_id=2285&AspxAutoDetectCookieSupport=1)

[在https://jsfiddle.net/megamania/q5ncy7t6/](https://jsfiddle.net/megamania/q5ncy7t6/)上查看它的实际应用

# ruby-on-rails-3.1 - 如何在 Rails 中使用 Rack::Proxy 将请求代理到另一个应用程序的特定路径

> ID：11057905
> 
> 赞同：22
> 
> 时间：2012-06-15T20:39:50.383
> 
> 标签：ruby-on-rails-3.1, proxy, rack, reverse-proxy, routes

我发现这篇很棒的[博客文章](http://livsey.org/blog/2012/02/23/using-rack-proxy-to-serve-multiple-rails-apps-from-the-same-domain-and-port/)介绍了如何将`Rack::Proxy`其用作单独的代理应用程序。这篇文章解释了他如何使用`Rack::Proxy`代理请求到`http://localhost:3000`port 上的应用程序`3001`和请求到port`http://localhost:3000/api`上的应用程序`3002`。我想做同样的事情，但我不想创建单独的代理应用程序。相反，我希望我的主要 Rails 应用程序将请求代理`/blog`到另一个应用程序。

博客文章： http: [//livsey.org/blog/2012/02/23/using-rack-proxy-to-serve-multiple-rails-apps-from-the-same-domain-and-port/](http://livsey.org/blog/2012/02/23/using-rack-proxy-to-serve-multiple-rails-apps-from-the-same-domain-and-port/)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-24T06:25:55.767

FWIW，我也刚刚解决了这个问题。有些人可能会发现完整的代码很有帮助，因为我需要的比你发布的更多：

```
# lib/proxy_to_other.rb
class ProxyToOther < Rack::Proxy
  def initialize(app)
    @app = app
  end

  def call(env)
    original_host = env["HTTP_HOST"]
    rewrite_env(env)
    if env["HTTP_HOST"] != original_host
      perform_request(env)
    else
      # just regular
      @app.call(env)
    end
  end

  def rewrite_env(env)
    request = Rack::Request.new(env)
    if request.path =~ %r{^/prefix|^/other_prefix}
      # do nothing
    else
      env["HTTP_HOST"] = "localhost:3000"
    end
    env
  end
end 
```

还：

```
# config/application.rb
# ...snip ...
module MyApplication
  class Application < Rails::Application
    # Custom Rack middlewares
    config.middleware.use "ProxyToOther" if ["development", "test"].include? Rails.env
#...snip.... 
```

这假设您要代理一些请求的应用程序正在端口 3001 上运行。我敢说您正在访问的应用程序可以在任何端口上运行。这还假设您只想在开发和测试环境中进行代理，因为您将在生产和登台中拥有一个“真正的”解决方案（例如，nginx 或负载均衡器做正确的事情）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-08-21T19:09:00.330

这是对 steve 的解决方案的轻微改动，它使用了更少的内部理解`Rack::Proxy`：

```
require 'rack/proxy'

class MyProxy < Rack::Proxy
  def initialize(app)
    @app = app
  end

  def call(env)
    # call super if we want to proxy, otherwise just handle regularly via call
    (proxy?(env) && super) || @app.call(env)
  end

  def proxy?(env)
    # do not alter env here, but return true if you want to proxy for this request.
    return true
  end

  def rewrite_env(env)
    # change the env here
    env["HTTP_HOST"] = "some.other.host"
    env
  end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T12:51:40.300

弄清楚了。

#### **库/代理.rb**

```
require 'rack-proxy'
class Proxy < Rack::Proxy
    def initialize(app)
        @app = app
    end

    def rewrite_env(env)
        # do magic in here
    end
end 
```

#### **配置/应用程序.rb**

```
config.middleware.use "Proxy" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-20T11:17:42.213

[当您希望http://localhost:3000/api/users/1](http://localhost:3000/api/users/1)（例如）在不使用代理服务器程序的情况下转到 routes.rb 中定义的 api 命名空间时，下面是更简单的代理 api 代码。

在生产中，它类似于[http://api.sample.com/users/1](http://api.sample.com/users/1)。

**库/代理.rb**

```
require 'rack-proxy'

class Proxy < Rack::Proxy
   def perform_request(env)
     request = Rack::Request.new(env)
     if request.path =~ %r{^/api}
       #do nothing
     else
       @app.call(env)
     end
   end
end 
```

**配置/应用程序.rb**

```
config.middleware.use "Proxy" 
```

**配置/路由.rb**

```
namespace :api, defaults: { format: :json },
        constraints: { subdomain: 'api' }, path: '/'  do
  scope module: :v1, constraints: ApiConstraints.new(version: 1, default: true) do
  resources :users, :only => [:show, :create, :update, :destroy]
end 
```

**lib/api_constraints.rb**

```
class ApiConstraints
  def initialize(options)
    @version = options[:version]
    @default = options[:default]
  end

  def matches?(req)
    @default || req.headers['Accept'].include?("application/vnd.sample.v#{@version}")
  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-10T18:54:25.813

我发现 gem **[rails-reverse-proxy](https://github.com/axsuul/rails-reverse-proxy)**使用起来更加简单和明显（对于反应应用程序）：

添加一个简单的代理控制器：

```
class ProxyController < ApplicationController
  include ReverseProxy::Controller

  def index
    reverse_proxy "http://localhost:3000" do |config|
      # We got a 404!
      config.on_missing do |code, response|
        redirect_to root_url and return
      end
    end
  end
end 
```

并添加一条路线：

```
match 'static/*path' => 'proxy#index', via: [:get, :post, :put, :patch, :delete] 
```

# firefox - 在 X11 下获取 Firefox 的窗口 id (WId)

> ID：11057906
> 
> 赞同：1
> 
> 时间：2012-06-15T20:40:00.820
> 
> 标签：firefox, firefox-addon, gtk, x11

我正在尝试找出如何从 Firefox 插件/扩展中获取 Firefox 的 X11 WId（窗口 ID）。

查了`nsIWindowMediator`，`nsIXULBrowserWindow`但是`nsIXULWindow`没找到。

我宁愿不采用（ab）使用 Xlib 搜索窗口树以查找与当前窗口的属性（如标题、类型等）匹配的窗口树的通常方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:51:41.720

我认为唯一可以获得它的地方是[nsIEmbeddingSiteWindow.siteWindow](http://hg.mozilla.org/mozilla-central/file/4e3362864fbd/embedding/browser/webBrowser/nsIEmbeddingSiteWindow.idl#l107)（它的类型`GtkWidget*`在 Linux 上，应该可以从中获取窗口 ID）。获取`nsIEmbeddingSiteWindow`顶级窗口的实例相对简单：

```
Components.utils.import("resource://gre/modules/Services.jsm");

var embedding = Services.ww.getChromeForWindow(window)
                  .QueryInterface(Components.interfaces.nsIEmbeddingSiteWindow); 
```

问题是该`siteWindow`属性是用`[noscript]`注释器标记的——它不能从 JavaScript 访问。所以我不得不使用二进制 XPCOM 组件（用 C++ 编写）来实际检索该属性。不知道这是否是您可以接受的解决方案。唯一的选择应该是确实搜索窗口树。

# objective-c - 在现有的 uiview 问题上绘制矩形

> ID：11057910
> 
> 赞同：0
> 
> 时间：2012-06-15T20:40:30.373
> 
> 标签：objective-c, ios4, xcode4.2

我有一个基于视图控制器的应用程序，其中包含我根据某些逻辑显示/隐藏的多个视图。我想绘制一个与 UIView 大小相同的矩形，以使其像框架/边框形状。

我在绘制矩形时遇到问题。我知道下面的代码应该这样做，但我不确定为什么没有调用或触发这个方法。我也没有在任何地方看到生成的 (void)drawRect:(CGRect)rect 方法，所以我自己放置了它。不知道我在这里缺少什么..

```
- (void)drawRect:(CGRect)rect;
{   
    CGContextRef context = UIGraphicsGetCurrentContext(); 
    CGContextSetRGBStrokeColor(context, 1.0, 1.0, 0.0, 1.0); // yellow line

    CGContextBeginPath(context);

    CGContextMoveToPoint(context, 50.0, 50.0); //start point
    CGContextAddLineToPoint(context, 250.0, 100.0);
    CGContextAddLineToPoint(context, 250.0, 350.0);
    CGContextAddLineToPoint(context, 50.0, 350.0); // end path

    CGContextClosePath(context); // close path

    CGContextSetLineWidth(context, 8.0); // this is set from now on until you explicitly change it

    CGContextStrokePath(context); // do actual stroking

    CGContextSetRGBFillColor(context, 0.0, 1.0, 0.0, 0.5); // green color, half transparent
    CGContextFillRect(context, CGRectMake(20.0, 250.0, 128.0, 128.0)); // a square at the bottom left-hand corner
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T21:04:00.013

如果您需要做的只是添加一个简单的矩形边框，只需在您`viewWillAppear:`的视图控制器中执行以下操作。

```
- (void) viewWillAppear:(BOOL)animated
{
   //Simple border on the main view
   self.view.layer.borderColor = [UIColor redColor].CGColor;
   self.view.layer.borderWidth = 2;

   //Or a simple rectangle to place at x,h within the main view 
   UIView *test = [[UIView alloc] initWithFrame:CGRectMake(x, y, width, height)];
   test.backgroundColor = [UIColor redColor];
   [self.view addSubview:test];
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:01:23.133

只是猜测，但你告诉`UIView`重新显示自己吗？

```
[myUIView setNeedsDisplay]; 
```

只有这样才会`drawRect:`被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T07:41:31.213

首先，您创建一个 class( `YourView`)，它是 的子类`UIView`。您在 viewController 中实现代码。

```
- (void)viewDidLoad
{
   YourView *temp = [[YourView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];

    [self.view addSubview:temp];
} 
```

你把你的方法（`- (void)drawRect:(CGRect)rect`）写在`YourView.m`文件中。像这样试试。我认为它会对你有所帮助。

# asp.net - ASP.NET 未连接到本地数据库

> ID：11057924
> 
> 赞同：1
> 
> 时间：2012-06-15T20:41:31.217
> 
> 标签：asp.net, visual-studio-2010, database-connection, sql-server-2012

我正在尝试连接到名为“Remisiones”的 SQL Server 2012 数据库。我为确保连接字符串正确所做的工作是从项目属性中创建它（设置部分，我从那里添加了连接字符串并成功测试了连接）。这是生成的连接字符串：

```
<configuration>
    <connectionStrings>
        <add name="Remisiones.Properties.Settings.ConnString" connectionString="Data Source=ComputerName\SQLEXPRESS;Initial Catalog=Remisiones;Integrated Security=True"
        providerName="System.Data.SqlClient" />
    </connectionStrings>
    More configuration...
</configuration> 
```

然后，使用它并像这样连接到数据库：

```
using (OdbcConnection connection = new OdbcConnection(ConfigurationManager.ConnectionStrings["Remisiones.Properties.Settings.ConnString"].ConnectionString))
{
    connection.Open();
    using (OdbcCommand command = new OdbcCommand("SELECT ID, Date FROM Remisiones", connection))
    using (OdbcDataReader dr = command.ExecuteReader())
    {
        while (dr.Read())
        {
            Result.Text += dr["ID"].ToString();
            Result.Text += "\n";
            Result.Text += dr["Date"].ToString();
            break;
        }
        Result.Text += "</table>";
    }
    connection.Close();
} 
```

如您所见，这应该打印数据库中前两项的日期和 ID 列值。问题是，它给了我错误：

```
ERROR [IM002] [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.Odbc.OdbcException: ERROR [IM002] [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified 
```

我做错什么了？

**编辑：**错误发生在该`connection.Open();`行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:46:30.437

您正在使用 System.Data.Odbc 连接和命令，但尝试向其传递 System.Data.SqlClient 连接字符串。两者不可互换。

将连接字符串更改为 Odbc 版本，或将代码更改为 SqlClient 版本。（如果是 SQL Server 数据库，我会推荐后者。）

您的代码，使用选项 2 将更改为

您需要更改代码文件顶部的“使用”语句（在您的代码示例中不可见，但我确定它在那里）以包含

```
using System.Data.SqlClient; 
```

代替

```
using System.Data.Odbc; 
```

然后下面的 using 语句应该可以工作（我没有检查它的语法错误，但如果我有错误，Intellisense 应该会有所帮助）

```
using (SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["Remisiones.Properties.Settings.ConnString"].ConnectionString))
{
    connection.Open();
    using (SqlCommand command = new SqlCommand ("SELECT ID, Date FROM Remisiones", connection))
    using (SqlDataReader dr = command.ExecuteReader())
    {
        while (dr.Read())
        {
            Result.Text += dr["ID"].ToString();
            Result.Text += "\n";
            Result.Text += dr["Date"].ToString();
            break;
        }
        Result.Text += "</table>";
    }
    connection.Close();
} 
```

可以在[此处](http://connectionstrings.com/sql-server-2008#p21)找到大量连接字符串示例，包括 System.Data.SqlClient 和 System.Data.OleDb 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:46:42.353

看来您的连接字符串是 for`providerName="System.Data.SqlClient"`但您的代码正在使用`OdbcConnection`- 更改 for `SqlConnection`(and `SqlCommand`, SqlDataReader` etc) 应该对您进行排序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:46:24.010

您需要在 odbc 配置工具（在控制面板中）中设置 odbc 连接。或者，您可以使用 sqlconnection 而不是 odbc。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T20:46:35.200

您的连接字符串是`SqlConnection`字符串而不是`ODBCConnection`字符串。ODBC 连接字符串如下所示：

> Driver={Microsoft Access 驱动程序 (*.mdb)};DBQ=C:\Samples\Northwind.mdb

使用`SqlConnection`或更新您的连接字符串为有效的 ODBC 连接字符串。

# asp.net - 使用向导控件的模板

> ID：11057925
> 
> 赞同：1
> 
> 时间：2012-06-15T20:41:34.227
> 
> 标签：asp.net

我了解到 Template 允许我们自定义控件的外观。我正在练习向导控制并尝试使用模板来控制它的外观。它有以下可用于定制的模板：

*   标头模板
*   侧边栏模板
*   开始导航模板
*   StepNavigation模板
*   完成导航模板
*   布局模板

但我不知道如何使用它。有人可以分享一个使用它的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:48:56.697

看看这篇 MSDN 杂志文章：[Cutting Edge: The ASP.NET 2.0 Wizard Control](http://msdn.microsoft.com/en-us/magazine/cc163894.aspx) by Dino Esposito。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-24T01:55:59.140

这是一个示例`SideBarTemplate`：

```
<asp:Wizard ID="Wizard1" runat="server" ActiveStepIndex="2" 
OnFinishButtonClick="Wizard1_FinishButtonClick" 
OnNextButtonClick="Wizard1_NextButtonClick">

            <!-- SidebarTemplate -->
            <SideBarTemplate>

                <!-- control that put on top of the Step List  -->
                <asp:Image ID="Image1" ImageUrl="IMG/topimage.jpg" ImageAlign="Top" runat="server" 
                    Width="10" Height="10"/>

                <!--Step List will auto generated here-->
                <asp:DataList ID="SideBarList" runat="server">
                    <ItemTemplate>
                        <asp:LinkButton ID="SideBarButton" runat="server"></asp:LinkButton>
                    </ItemTemplate>
                    <SelectedItemStyle Font-Bold="True" />
                </asp:DataList>

                <!-- control that put below the Step List -->
                <asp:Label ID="ButtomLabel" runat="server" Text="Label"></asp:Label>
            </SideBarTemplate>

            <WizardSteps>

              <!-- .....WizradSteps here.....  -->

            </WizardSteps> 
```

# python - 预装了 Python 的操作系统列表和版本是什么？

> ID：11057926
> 
> 赞同：0
> 
> 时间：2012-06-15T20:42:09.897
> 
> 标签：python, operating-system, installation

当我从 C# 迁移到 Python 时，我想知道是否有在不同操作系统（如 Windows、Linux 等）上预装的 Python 版本的列表......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T20:53:02.500

没有这样的清单。但是，我认为您可以放心地假设每个通用的现代 Linux 发行版都将安装 Python（至少最近（>2 年）安装 Python 2.5），以及大多数 Unix SO（FreeBSD、Solaris 等）。Mac OS X 也带有 Python。OTOH，您不能指望大多数 Window 机器使用它 - 默认情况下只有少数机器具有 Python。然而，这通常没有问题，因为 Python 相当容易安装，最后，您可以依赖诸如[py2exe](http://www.py2exe.org/)和[cx_freeze 之](http://cx-freeze.sourceforge.net/)类的东西。

当然，这是一个经验法则，并不是一个真正准确的答案。尽管如此，我发现这些假设是有道理的。

# mysql - MySQL - 在视图中插入/更新/删除

> ID：11057927
> 
> 赞同：-1
> 
> 时间：2012-06-15T20:42:12.643
> 
> 标签：mysql, view, views, alias

我有一个英文和法文网站。

所以在我的数据库中，我的表有例如名为“name_english”和“name_french”的列以及其他一些数字列。

我想创建 2 个视图或类似的东西，它们将包含“名称”列和我的表的所有其他列。

视图“table_english”将列“name_english”作为“name”，视图“table_french”将列“name_french”作为“name”。

这适用于选择视图，但我还想对将更新表的视图进行一些插入/更新/删除。

例子：

```
table:
id | name_english | name_french | int1 | int2 | int3

table_english (a view):
id | name | int1 | int2 | int3 (name here is name_english)

table_french (a view):
id | name | int1 | int2 | int3 (name here is name_french) 
```

然后我想做一些这样的查询：

```
INSERT INTO table_english(id, name, int1, int2, int3) VALUES (1, 'name', 12, 14, 2);
UPDATE table_english set name='new name' WHERE id=1; 
```

这些将被插入/更新到具有相应字段的表中。

所以最后，“table”的内容将是：

```
1 | 'new name' | DEFAULT VALUE | 12 | 14 | 2 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T20:45:56.883

如果遵循某些准则，视图可以是可更新和可插入的。

[更多信息在这里](https://dev.mysql.com/doc/refman/5.7/en/view-updatability.html)

简短的版本是：您不能更新具有任何类型的 GROUP BY、DISTINCT 或 Aggregate 函数的视图。还有更多限制，但最好使用手册来获取有关这些限制的最新信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:45:58.040

您可以插入/更新视图。视图的目的是显示一个或多个表的全部或部分状态。您将必须更新表并进行两次更新和两次插入......一个更新/插入`name_english`列，一个用于`name_french`列。

# random - GSL 蒙特卡洛积分函数使用什么随机发生器？如何更换种子？

> ID：11057931
> 
> 赞同：1
> 
> 时间：2012-06-15T20:42:30.077
> 
> 标签：random, gsl, montecarlo

在此先感谢您的帮助。我在网站上找不到关于 GSL 蒙特卡罗集成函数使用什么随机数生成器的文档。我想知道的原因是我多次运行我的程序，期望得到不同的结果，但每次都得到完全相同的值。有没有一种简单的方法可以更改随机数生成器的种子？

弗雷德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:38:41.337

这是可用生成器的[文档](http://www.gnu.org/software/gsl/manual/html_node/Random-number-generator-algorithms.html)。 [文档中的这一位](http://www.gnu.org/software/gsl/manual/html_node/Random-number-generator-initialization.html)描述了如何更改种子。

```
int gsl_monte_plain_integrate (gsl_monte_function * f, const double xl[], 
                               const double xu[], size_t dim, size_t calls, 
                               gsl_rng * r, gsl_monte_plain_state * s, double * result, double * abserr)
                               ^^^^^^^^^^^
                               Here it is. 
```

# php - 根据动态设置的背景颜色更改文本颜色的值

> ID：11057936
> 
> 赞同：0
> 
> 时间：2012-06-15T20:42:54.790
> 
> 标签：php, jquery, html, css

比方说，我有一个日历 - 每个条目都有不同的背景颜色（每个用户一种颜色）。有浅色和深色背景颜色，用户可以选择自己喜欢的颜色。现在我想设置适合背景样式的文本颜色。我将在哪里以及如何开始？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:49:35.550

如果您正在寻找个案解决方案，您可以执行以下操作：

```
$("#Calendar .day").each(function() {
    var $this = $(this);

    //If the background color is black - set text color to white.
    if($this.css("background-color") == "#000000") {
        $this.css("color", "#FFFFFF");
    }

    //A bunch more if statements

}); 
```

**还**

为了更容易，您可以使用以下代码找到互补色：

[JS函数计算补色？](https://stackoverflow.com/questions/1664140/js-function-to-calculate-complementary-colour)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:30:44.877

您可以尝试只取所选颜色的按位反转。

我认为这个片段（在 JavaScript 中）可以解决问题。

```
var RGB_Value = "ffaacc" //set this var to the hex value the user selected 
var colorNum = parseInt(RGB_Value, 16); // assume radix of 16 (hex) and convert string to number 
var inverseColor = ~colorNum; //bitwise inverse of the number 
var RGB_Inverse = nMyNumber.toString(16); //convert the number into a hex string 
```

# java - 休眠和对象池

> ID：11057938
> 
> 赞同：0
> 
> 时间：2012-06-15T20:42:56.487
> 
> 标签：java, hibernate, date, immutability, object-pooling

我有一个类`ClassWithDates`（我们称之为“C”），其中包含一个`collection of dates`. 我有许多 C 类型的对象和数千/数百万个日期对象，它们通常指的是同一时间。

我想要一个日期对象池，如果在请求的时间内存在一个，则返回一个已经分配的对象。这很简单，但是在使用 Hibernate 时，我不知道该怎么做。

如果我执行“来自 ClassWithDates”的查询，并且延迟获取，Hibernates 会加载 ClassWithDates 类的所有对象和所有子集合，但是，据我所知，**它会为集合中的每个元素创建新的日期对象**，即使对象相同。

我对使用 Hibernate 进行不可变类的对象池感兴趣。我怎么能实现它？

上面给出的示例是我正在处理的代码的简化。

# tsql - 更新 case 语句语法问题

> ID：11057941
> 
> 赞同：0
> 
> 时间：2012-06-15T20:43:22.333
> 
> 标签：tsql

我试图弄清楚为什么这种语法格式错误，但我没有：

```
update Entry
set Name =  Case charindex('/', reverse(Name))
                when charindex('/', reverse(Name)) > 0 then right(Name, charindex('/', reverse(Name)) -1)
                when charindex('/', reverse(Name)) < 0 then Name
            End 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:48:47.737

尝试这个：

```
update Entry 
set Name =  Case 
                when charindex('/', reverse(Name)) > 0 then right(Name, charindex('/', reverse(Name)) -1) 
                when charindex('/', reverse(Name)) < 0 then Name 
            End 
```

*编辑*：或者这个：

```
update Entry 
set Name =  Case SIGN(charindex('/', reverse(Name)) )
                when 1 then right(Name, charindex('/', reverse(Name)) -1) 
                when -1 then Name 
            End 
```

在 WHEN 之前带有表达式的 CASE 将该表达式依次与 WHEN 之后的每个表达式进行比较，直到找到匹配项。紧跟在 WHEN 之后的 CASE 检查 WHEN 之后的每个表达式，直到找到一个计算结果为 TRUE 的表达式。在第一种用法中，表达式必须是可比较的。其次，表达式的计算结果必须为 T/F。

# scalability - 使用 Thrift 在集群上扩展 HBase 写入

> ID：11057943
> 
> 赞同：2
> 
> 时间：2012-06-15T20:43:33.963
> 
> 标签：scalability, hbase, thrift

我们正在尝试使用 Thrift 在集群上扩展 HBase 写入。（我们的 HBase 应用程序使用 Python，因此需要 Thrift。）

尽管集群中的节点数量增加了，但我们看到的写入速度是相同的。

首先，运行 Thrift 的推荐策略是： 1\. 客户端？2\. HBase 主控？3\. HBase 区域服务器？

如果在 #1 或 #2 上，客户端或 HBase 主服务器会负责将请求拆分到各个区域服务器吗？在我们的情况下似乎没有。

如果#3，那么我必须修改客户端以写入特定区域服务器，并随机写入。我可以这样做，但这似乎违背了使用 HBase 的目的。

非常感谢有关读/写缩放（尤其是 Thrift）的任何其他技巧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:41:08.217

在 HBase 中，要通过增加节点来获得性能，您应该有一个不错的“rowkey”分布。只要您的集群中有“热点”（一个非常繁忙的区域服务器），您就不会从增加集群大小中获得任何收益。查看有关行键设计的[文章。](http://hbase.apache.org/book/rowkey.design.html)

如果您不需要立即阅读（如果您对异步写入感到满意），您可以从 stumbleupon检查[asynch hbase 客户端以获得性能提升。](https://github.com/stumbleupon/asynchbase)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:58:20.987

我在这两个问题上找到了答案，看起来我们将使用＃3（写入特定区域服务器，并随机写入）：

*   [通过一个流或同时通过多个服务器将数据发送到 hbase 更好吗？](https://stackoverflow.com/questions/7638270/is-it-better-to-send-data-to-hbase-via-one-stream-or-via-several-servers-concurr)
*   [HBase Thrift：如何连接到远程 HBase 主/集群？](https://stackoverflow.com/questions/10919618/hbase-thrift-how-to-connect-to-remote-hbase-master-cluster)

# android - 我应该如何实现调试消息的循环缓冲区？

> ID：11057948
> 
> 赞同：1
> 
> 时间：2012-06-15T20:43:44.840
> 
> 标签：android, debugging

我在我的 Android 应用程序中使用[ACRA](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGYQFjAA&url=http://code.google.com/p/acra/&ei=gJvbT6z8ENC08QOP9LGZCw&usg=AFQjCNF1L9fawVNYyKuqqIa7q22TBcL08w&sig2=hJhk6UmWVv95dmqSYlYPXQ)作为崩溃和错误报告库。

它提供了将 LogCat 的内容与错误报告一起发送的选项，但我不希望使用此功能，因为它需要 READ_LOGS 权限，这可能对某些用户构成威胁。

我基本上对发送我自己的应用程序调试日志以及我使用 ACRA 发送的错误报告感兴趣。当然，这个调试历史需要有一个最大大小（例如，只有最后 20 条消息会被保存和发送）。我可以通过简单地调用类似的东西来存储消息`storeLog("User has clicked button 1")`。

为此，我需要：

*   一个循环缓冲区，存储 (Timestamp t, String message) 对。此选项的缺点：需要在类之间传递此缓冲区，在应用程序退出时丢失历史记录（除非我将其保存到文件或 SharedPreferences）

*   滚动文件。

哪个选项是首选，如何实现（尤其是“滚动”行为）？

# axapta - 查找/搜索区分大小写

> ID：11057950
> 
> 赞同：0
> 
> 时间：2012-06-15T20:44:02.310
> 
> 标签：axapta

是否可以在 Dynamics AX 2009 中进行区分大小写的查找（搜索）？

例如，当我搜索“地址”时，我不想在结果中看到“地址”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:38:04.333

简，

有一种使用标准 Axapta X++ 的方法。当您使用查找屏幕时，有一个名为“过滤器”的选项卡，您可以在其中放置代码以进行过滤（无需填写名称和位置选项卡上的字段）。以下代码仅用于说明目的，因为以下代码不完整且尚未最终确定（我将其留给您）。

```
str             toMatch     = 'Address';
str             string;
str             char, charMatch;
int             i, pos;
boolean         ret;
;

pos     = strScan(_treeNodeName, toMatch, 1, strLen(_treeNodeName));
string  = subStr(_treeNodeName, pos, strLen(toMatch));
if (string)
{
    ret             = true;
    for (i=1;i<=strLen(toMatch);i++)
    {
        char        = subStr(toMatch, i, 1);
        charMatch   = subStr(string, i, 1);
        if (char2num(char,1) != char2num(charMatch,1))
        {
            ret     = false;
        }
    }
    if (ret)
    {
        return ret;
    }
}

pos     = strScan(_treeNodeSource, toMatch, 1, strLen(_treeNodeSource));
string  = subStr(_treeNodeSource, pos, strLen(toMatch));
if (string)
{
    ret             = true;
    for (i=1;i<=strLen(toMatch);i++)
    {
        char        = subStr(toMatch, i, 1);
        charMatch   = subStr(string, i, 1);
        if (char2num(char,1) != char2num(charMatch,1))
        {
            ret     = false;
        }
    }
    if (ret)
    {
        return ret;
    }
}
return false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:11:27.097

如果您查看执行查找时出现的“查找”表单窗口，请查看属性，这可以帮助您缩小搜索范围，不确定类似的完全匹配，即“地址”并阻止“地址”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:45:25.997

**你不能。**

如[本答案](https://stackoverflow.com/questions/11056800/find-search-the-aot-for-an-exact-match)中所述，查找表单使用该`match`方法，该方法记录[在 msdn here 上](http://msdn.microsoft.com/en-us/library/aa886279%28v=ax.10%29.aspx)。

引用 MSDN；

> 评论
> 
> 系统不区分大小写。

# php - Codeigniter 无法在移动设备中加载请求的文件

> ID：11057951
> 
> 赞同：2
> 
> 时间：2012-06-15T20:44:04.727
> 
> 标签：php, iphone, codeigniter

`Unable to load the requested file: default.php`每当我在移动设备中加载网站时，我都会在 codeigniter 中遇到错误。它在桌面浏览器中完美加载。

这是我的控制器的设置方式，

```
class Welcome extends CI_Controller {

    public function index()
    {
        $this->template->set_layout('default')->build('welcome_en');
    }

} 
```

默认是我用于“welcome_en”视图页面的当前模板的 Sparks 模板。

我一直试图找出这个问题一段时间，没有使用用户代理检测脚本，以前有，但我把它拿出来希望摆脱错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:49:01.823

您可能需要创建 Web 和移动文件夹。[更多信息](http://philsturgeon.co.uk/demos/codeigniter-template/user_guide/mobile.html)

而不是`application/views/layouts/default.php`尝试`application/views/web/layouts/default.php`和`application/views/mobile/layouts/default.php`.

对于所有其他布局文件也是如此，如果您使用 CodeIgniter 认为是手机（而不是 iPad）的任何东西浏览页面，它们将加载移动版本。

# regex - 需要改进 bash 正则表达式

> ID：11057954
> 
> 赞同：1
> 
> 时间：2012-06-15T20:44:18.033
> 
> 标签：regex, bash

在我的 bash 脚本中，我使用正则表达式来匹配一串变量赋值，例如：

1.  Var = 值
2.  变量 = 值；
3.  变量=值
4.  变量=值；
5.  变量值

我开发的正则表达式：`\s*${varName}\s*\={0,1}\s*.*\s*;{0,1}`

这个正则表达式可以匹配上面的每个实例，但也可以匹配另一个我不想要的实例，即**VarValue**

我想不出办法让我的正则表达式与**VarValue**实例不匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:51:43.507

`\s*{varName}(?:\s*=\s*|\s+)(\w+)`

我没有修改你的正则表达式，因为它看起来很复杂，但是这个会匹配上面列出的所有情况而不匹配`VarValue`。您的数据将在第 1 组中。

[在这里玩正则表达式](http://regexr.com?3196j)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T20:52:25.120

修改你的：

```
\s*${varName}(\s?[\s\=]\s?).+\s*;{0,1} 
```

# regex - 正则表达式 - 每 4 个字符后插入空格，每 40 个字符后插入换行符

> ID：11057957
> 
> 赞同：1
> 
> 时间：2012-06-15T20:44:25.490
> 
> 标签：regex, insert

我有一个巨大的编码文本字符串（22000+ 个字符）。代码由数字 [0-9] 和小写字母 [az] 组成。我需要一个正则表达式在每 4 个字符后插入一个空格，并在每 40 个字符后插入一个换行符 [\n]。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T21:40:38.960

许多人更愿意使用 for 循环和字符串连接来执行此操作，但我讨厌这些`substring`调用。当正则表达式不适合工作（解析 HTML）时，我真的反对使用正则表达式，但我认为在这种情况下使用起来很容易。

[**JSFiddle 示例**](http://jsfiddle.net/Rafgp/2/)

假设你有字符串

```
var str = "aaaabbbbccccddddeeeeffffgggghhhhiiiijjjjkkkkllllmmmmnnnnoooo"; 
```

你想在每四个字符后插入一个空格，在 40 个字符后插入一个换行符，你可以使用下面的代码

```
str.replace(/.{4}g/, function (value, index){
    return value + (index % 40 == 36? '\n' : ' ');
}); 
```

请注意，如果换行（40）索引不是空格索引（4）的倍数，这将不起作用

我在一个项目中抽象了这个，这是一个简单的方法

```
/**
 * Adds padding and newlines into a string without whitespace
 * @param {str} str The str to be modified (any whitespace will be stripped)
 * @param {int} spaceEvery number of characters before inserting a space
 * @param {int} wrapeEvery number of spaces before using a newline instead 
 * return {string} The replaced string
 */
function addPadding(str, spaceEvery, wrapEvery) {
    var regex = new RegExp(".{"+spaceEvery+"}", "g"); 
    // Add space every {spaceEvery} chars, newline after {wrapEvery} spaces
    return str.replace(/[\n\s]/g, '').replace(regex, function(value, index) {
        // The index is the group that just finished
        var newlineIndex = spaceEvery * (wrapEvery - 1);
        return value + ((index % (spaceEvery * wrapEvery) === newlineIndex) ? '\n' : ' ');
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T20:56:04.347

好吧，正则表达式本身不会插入空格，所以我假设您有一些命令，无论您使用哪种语言，都可以根据查找正则表达式插入。

因此，找到 4 个字符并找到 40 个字符：这在一般的正则表达式中并不漂亮（除非您的特定实现有很好的方法来表达数字）。要查找 4 个字符，请使用

```
.... 
```

因为典型的正则表达式查找器使用最大咀嚼，然后从一个正则表达式的末尾开始，向前搜索并再次最大咀嚼，这会将您的字符串分成 4 个字符片段。丑陋的部分是在标准正则表达式中，你必须使用

```
........................................ 
```

找到 40 个字符的块，虽然我会注意到，如果你先运行 4 个字符，你将不得不运行

```
.................................................. 
```

或者

```
.... .... .... .... .... .... .... .... .... .... 
```

考虑到您已经放入的空间。

句点可以找到任何字符，但鉴于您只使用 [0-9|az]，如果您需要确保没有其他任何内容漏入，您可以使用该正则表达式代替每个句点，我只是避免让它变得更多总的。

您可能会注意到，正则表达式有一些限制。看看[乔姆斯基层次结构](http://en.wikipedia.org/wiki/Chomsky_hierarchy)，真正了解它们的理论局限性。

# r - R：读取 csv 文件时删除页眉、页脚和零星的列标题

> ID：11057959
> 
> 赞同：0
> 
> 时间：2012-06-15T20:44:43.977
> 
> 标签：r

我有一堆需要阅读的 csv 文件。每个文件都有一个页眉，大多数有页脚，一半有列标题，偶尔出现在文件正文中。我想删除页眉、页脚和零星的列标题。

我在几乎所有的问题和答案中都包含了可重复的示例，但在这种情况下，由于我正在阅读外部文件，我不知道该怎么做。

每个标题是三行长。我可以使用以下行（使用“跳过”）删除标题：

d <- read.csv('c:/users/mark w miller/simple R programs/data_with_header_footer.csv', header=T, skip=2)

页眉和页脚之间的行数因文件而异。但是，页脚始终以“符号：”行开头。页脚的第一行仅占据该行的第一个单元格。页脚中的行数因文件而异。

某些文件在文件正文中具有零星的列标题。第一行以表号开头，例如“表 4.3-1”。这些零星标题的最后一行总是以类似以下内容开头：'Number_reporting''Year 1''Area 1''Area 2''Year 2''Area 1''Area 2'。

如何删除这些页脚和零星的列标题？我不希望手动编辑每个文件，因为有大量文件并且手动删除大量行时可能会出现错误。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T21:12:50.117

您可以将`readLines`then`grep`用于相关的页脚和列标题。没有更具体的例子，很难举个例子。

```
dum.data<-readLines('some.txt')
dum.data<-dum.data[-c(1:3)]

if(length(grep("Symbols:",dum.data))>0){
dum.data<-dum.data[-c(grep("Symbols:",dum.data):length(dum.data))]
}

if(length(grep("Table[0-9].[0-9]".dum.data))>0){
dum.data<-dum.data[-c(grep("Table[0-9].[0-9]".dum.data):app.marker)]
} 
```

app.marker 将是您的零星标头末尾的合适 grep，这是非常模糊的。一旦这些被删除，您可以根据需要处理用逗号等分割的其余部分。

# file - 如何在 linux/unix 中使用排除列表压缩文件

> ID：11057963
> 
> 赞同：9
> 
> 时间：2012-06-15T20:45:01.420
> 
> 标签：file, zip

我有一个要压缩的文件列表，但我也有一个排除文件的列表，不希望它们包含在 zip 存档中。

所以我创建了一个 exclude.lst 文件，其中包含绝对路径和文件名。

样本排除文件

`/home/logs/apache/access.log
/home/logs/tomcat/catalina.out`

但在使用以下命令后，zip 命令不排除文件，而是将它们存档。

`zip archives.2012.zip /home/logs/ -x@exclude.lst`

我该如何克服呢？还有没有其他方法可以通过排除上述文件来归档文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T16:13:53.563

我没有创建 exclude.lst 文件，而是将所有排除文件分配给一个变量并将它们传递给 zip 中的 -x 选项。

例如

```
do_not_archive=/home/logs/apache/access.log /home/logs/tomcat/catalina.out 
```

然后使用zip如下图

```
zip archives.2012.zip /home/logs/ -x $do_not_archive 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-27T06:21:21.873

老问题，所以 zip 从那时起可能已经改变了，但是来自手册页：

```
$man zip | grep -a2 exclude 
```

> 也可以：
> zip -r foo foo -x@exclude.lst
> 它将在 foo.zip 中包含 foo 的内容，同时排除与文件 exclude.lst 中的模式匹配的所有文件。

我已经确认这在 Ubuntu 18 中有效，每个模式/文件名都在单独的行上（没有尝试用空格分隔）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-25T16:51:46.683

对于您有一堆文件要排除的情况（在我的情况下文件大于 10MB），CBR 的答案只是一个简短的补充：

```
do_not_archive=$(find relative/path/to/directory -type f -size +10000000c)
zip -r backup_without_files_bigger_than_10mb.zip relative/path/to/directory -x $do_not_archive 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-14T14:41:58.570

可以分两步执行此操作：

```
zip archive.zip -r -@ < include.lst
zip archive.zip -d -@ < exclude.lst 
```

# c# - 如何在来自视图模型的异步 Web 客户端调用中使用进度条

> ID：11057969
> 
> 赞同：2
> 
> 时间：2012-06-15T20:45:44.960
> 
> 标签：c#, mvvm, progress-bar, windows-phone-7.1

我正在尝试在 WP7 项目中使用性能进度条，但我在异步 webclient 调用时遇到了问题。我的代码如下：

**更新**

```
 public MainPage()
    {
        InitializeComponent();
         ...................

        this.Loaded += new RoutedEventHandler(MainPage_Loaded);}

    private void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        if (!App.ViewModel.IsDataLoaded)
        {
            App.ViewModel.LoadData();
        }
    } 
```

以及我实现 LoadData 函数的 ViewModel

```
 private bool _showProgressBar = false;
    public bool ShowProgressBar
    {
        get { return _showProgressBar; }
        set
        {
            if (_showProgressBar != value)
            {
                _showProgressBar = value;
                NotifyPropertyChanged("ShowProgressBar");
            }
        }
    public void LoadData()
    {
        try
        {
            string defaulturl = "http://....";
            WebClient client = new WebClient();
            Uri uri = new Uri(defaulturl);
            client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
            ShowProgressBar = true;
            client.DownloadStringAsync(uri);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

        this.IsDataLoaded = true;

    }

    void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        try
        {
            //fetch the data
           ShowProgressBar = false;
        }

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {.....
    } 
```

主页 Xaml

```
 <toolkit:PerformanceProgressBar Margin="0,-12,0,0" x:Name="performanceProgressBar" IsIndeterminate="true" Visibility="{Binding ShowProgressBar, Converter={StaticResource BooleanToVisibilityConverter}}"/> 
```

我的问题是因为 WebClient 在执行时是一个异步方法，所以 LoadData 已经执行了，我不知道在哪里放置 performanceProgressBar.Visibility

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:03:40.947

在您在评论中解释得更多之后，我明白了更多。听起来您想将布尔属性绑定到进度条的可见性。你需要一个布尔到可见性的转换器（谷歌一下，很容易找到）。

然后你可以做这样的事情：

```
private bool _showProgressBar = false;
public bool ShowProgressBar
{
    get { _return _showProgressBar; }
    set 
    { 
        _return _showProgressBar;
        OnPropertyChanged("ShowProgressBar");
    }
}

public void LoadData()
{
    try
    {
        string defaulturl = "http://....";
        WebClient client = new WebClient();
        Uri uri = new Uri(defaulturl);
        client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);

        ShowProgressBar = true;

        client.DownloadStringAsync(uri);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }

    this.IsDataLoaded = true;

}

void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    try
    {
        //fetch the data
        ShowProgressBar = false;
    }

    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }

} 
```

在视图上：

```
<MyProgressBar Visibility={Binding Path=ShowProgressBar, Converter={StaticResource MyBoolToVisibleConverter}> 
```

显然，MSFT 已经为您提供了一个转换器......这对我来说是个新闻：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:49:47.017

你只需要回到 UI 线程——它`Dispatcher`可以帮助你，我使用的一个常见片段（在我的 ViewModelBase 中是：

```
 protected delegate void OnUIThreadDelegate();
    /// <summary>
    /// Allows the specified deelgate to be performed on the UI thread.
    /// </summary>
    /// <param name="onUIThreadDelegate">The delegate to be executed on the UI thread.</param>
    protected void OnUIThread(OnUIThreadDelegate onUIThreadDelegate)
    {
        if (Deployment.Current.Dispatcher.CheckAccess())
        {
            onUIThreadDelegate();
        }
        else
        {
            Deployment.Current.Dispatcher.BeginInvoke(onUIThreadDelegate);
        }
    } 
```

这可以简单地用于：

```
void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    try
    {
        //fetch the data

        this.OnUIThread(() =>
        {
            performanceProgressBar.Visibility = Visibility.Collapsed; // This code will be performed on the UI thread -- in your case, you can update your progress bar etc.
        });

    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }

} 
```

# jquery - 单击时删除 DIV

> ID：11057970
> 
> 赞同：14
> 
> 时间：2012-06-15T20:45:46.410
> 
> 标签：jquery

我有一个 DIV，当我单击该 DIV 中包含的链接时，我想将其删除。这是我所拥有的：

```
<div id="clients-edit-wrapper">
    <div class="close-wrapper">
        <a href="#" class="close-div">Close</a>
    </div>
</div> 
```

当我单击“关闭”时，我想`clients-edit-wrapper`被删除。我正在寻找一种方法来通过引用关闭链接的父 DIV 来做到这一点，在这种情况下，是`clients-edit-wrapper`.

任何帮助将不胜感激！

* * *

黄教的回答如下：

```
$('.close-div').click(function(){
   $(this).parent().parent().remove();
}); 
```

这仅在您要删除的元素是两个父元素时才有效。就我而言，这正是我所需要的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-15T20:47:58.187

给定您的 html 标记

更新为 .on()

```
$('.close-div').on('click', function(){
    $(this).closest("#clients-edit-wrapper").remove();
}); 
```

具有更大的灵活性`.closest`，这使您可以选择拥有更多的父母或更少的父母。

[https://api.jquery.com/closest/](https://api.jquery.com/closest/)

> 对于集合中的每个元素，通过测试元素本身并向上遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素。

**编辑**
（添加相关资源）
请参阅[live()上的 jQuery 文档](http://api.jquery.com/live/)

> **从 jQuery 1.7 开始，不推荐使用**.live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

据我所知，这是由于`live()`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-15T20:47:06.540

这是一种解决方案：

```
$(".close-div").on("click", function(event) {
    $("#clients-edit-wrapper").remove();
    event.preventDefault();
}); 
```

要获取`#clients-edit-wrapper`相对于元素的`.close-div`元素，您可以使用其中一个`parent().parent()`或`closest`使用 ID：

```
$(this).parent().parent().remove();                  // will do
$(this).closest("#clients-edit-wrapper").remove();   // the same 
```

但是，最后一个没有意义，因为页面元素的 ID 应该是唯一的，并且不会有另一个`#clients-edit-wrapper`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T20:47:32.700

```
$(".close-div").click(function(){

    $("#clients-edit-wrapper").remove();

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T20:48:42.523

由于您将元素基于父元素，因此我鼓励事件委托：

```
$("#clients-edit-wrapper").on("click", ".close-div", function(e){
    e.preventDefault();
    $(e.delegateTarget).remove();
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T20:49:00.717

```
<div id="clients-edit-wrapper">
    <div class="close-wrapper">
         <a href="#" onclick="$('#clients-edit-wrapper').remove();" class="close-div">Close</a>
    </div>
</div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-15T20:46:59.363

```
$('#clients-edit-wrapper').find('.close-div').click(function(){
   $('#clients-edit-wrapper').remove();
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-15T20:47:06.647

你也可以用`closest`。

```
$('.close-div').on('click', function(e) {
  e.preventDefault();
  $('#clients-edit-wrapper').remove();
}); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-08-15T11:32:19.323

```
$('body').on('click','.close-div', function(){
  $(this).closest("#clients-edit-wrapper").remove();
}); 
```

# ruby-on-rails - ruby on rails - 呈现多对多关系

> ID：11057977
> 
> 赞同：0
> 
> 时间：2012-06-15T20:46:19.550
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个多对多关系的配方和成分。

我在演示文稿中定义了以下命令。

```
<div>
  <%= render :partial => 'ingredients/form',
             :locals => {:form => recipe_form} %>
</div> 
```

部分以

```
<%= form_for(@ingredient) do |ingredient_form| %> 
```

但收到@ingredient nill。然后我尝试了

```
<%= recipe_form.fields_for :ingredients do |builder| %>
    <%= render 'ingredient_fields', f: builder %>
<% end %> 
```

我的渲染在哪里

```
<p class="fields">
  <%= f.text_field :name %>
  <%= f.hidden_field :_destroy %>
</p> 
```

但没有打印任何内容。然后我尝试了

```
<% @recipe.ingredients.each do |ingredient| %>
    <%= ingredient.name %>
<% end %> 
```

只有这样所有的成分都被打印出来了。我在以前的尝试中做错了什么？谢谢你。

我的配料配方关系定义如下

```
 class Ingredient < ActiveRecord::Base
   has_many :ingredient_recipes
   has_many :recipes, :through => :ingredient_recipes
   ...

 class Recipe < ActiveRecord::Base
   has_many :ingredient_recipes
   has_many :ingredients, :through => :ingredient_recipes
   ...

   accepts_nested_attributes_for :ingredient_recipes  ,:reject_if  => lambda { |a| a[:content].blank?}

 class IngredientRecipe < ActiveRecord::Base
  attr_accessible :created_at, :ingredient_id, :order, :recipe_id
  belongs_to :recipe
  belongs_to :ingredient
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:02:25.470

您没有具体说明您要做什么，所以我假设您有一个显示食谱的页面，其中包含许多可以编辑和添加的成分。在您的控制器中，您有类似的东西：

```
class RecipeController < ApplicationController
  def edit
    @recipe = Recipe.find(params[:id]
  end
end 
```

我还假设您正在寻找一个回发到创建操作的表单。因此，我认为您想要这样的表格：

```
<%= form_for @recipe do |form| %>

  <%= label_for :name %>
  <%= text_field :name %>

  <%= form.fields_for :ingredients do |ingredients_fields| %>
    <div class="ingredient">
      <%= f.text_field :name %>
      <%= f.hidden_field :_destroy %>
    </div>
  <% end %>

<% end %> 
```

此外，更改您的配方以接受嵌套属性`ingredients`，而不是`ingredient_recipes`：

```
class Recipe < ActiveRecord::Base
   has_many :ingredient_recipes
   has_many :ingredients, :through => :ingredient_recipes
   ...

   accepts_nested_attributes_for :ingredients, :reject_if  => lambda { |a| a[:content].blank?} 
```

最后，为您的内容添加 attr_accessible：

```
class Ingredient < ActiveRecord::Base
  attr_accessible :content
  ... 
```

那对你有用吗？

# c - 在 TIC TAC TOE 游戏中生成下一步动作的最快方法

> ID：11057986
> 
> 赞同：2
> 
> 时间：2012-06-15T20:47:07.363
> 
> 标签：c, algorithm, data-structures

在 X 和 0 的游戏（即**TIC TAC TOE(3X3)**）中，如果您为此编写程序，则可以快速通过计算机生成移动。我的意思是这应该是最快的方法。

当时我所能想到的就是将所有棋盘配置存储在哈希中，以便获得最佳移动位置是 O(1) 操作。
每个棋盘方格可以是 0,1 或 2。0
表示空方格。1 代表 X，2 代表 0。

所以每个方格都可以用这三个中的任何一个来填充。大约有 3^9 个板配置。

简单来说，我们需要一个大小为 3^9 的散列。对于散列，我们可以使用 base 3 表示。意味着以 3 为底的每个数字将是 9 位数字，每个数字对应于每个正方形。要在哈希中搜索，我们需要找到这个 9 位数字的十进制表示。现在，每个方块都可以与行号和列号相关联。为了唯一标识每个方格，我们可以再次使用基数 3 表示。说 SQ[1][2] 将以 3 为底的 12 相当于十进制的 5。

因此，我们有效地设计了一种算法，该算法足够快以计算 O(1) 中的下一步动作。

但是，面试官坚持要降低空间复杂度，因为DOS系统没有那么多内存。

***我们如何在不改变时间复杂度的情况下降低空间复杂度？***
请帮助我，以免我以后错过此类问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T21:20:30.190

对于像这样的小游戏，另一种解决方法是预先计算潜在的游戏树并将其存储在一个表中。

先看人类起步的情况，她明显有9个不同的起步位置。一个游戏表将包含 9 个入口点，然后，每个入口点都指向正确的响应 - 您可以使用[此问题](https://stackoverflow.com/questions/125557/what-algorithm-for-a-tic-tac-toe-game-can-i-use-to-determine-the-best-move-for?rq=1)中概述的指南来计算响应 - 以及下一级人类响应表。这次只有 7 个可能的响应。对于下一个级别，将有 5，然后是 3，然后只有 1。表中总共将有 9 * 7 * 5 * 3 * 1 = 945 个条目，但可以通过实现对称性来压缩，即旋转和翻转的颜色。

当然，电脑启动的情况原则上是相似的，但桌子实际上更小，因为电脑可能会想从播放中间部分开始 - 或者至少避免某些地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T21:11:53.083

没有 3^9 种不同的板配置。正如 tomdemuyt 所说，有 9 个！不同的棋盘配置，即先有9个选择，然后有8个选择，之后有7个选择，以此类推。

此外，我们可以通过考虑对称性来进一步降低空间复杂度。例如，对于第一步，在 [0,0] 中放置 X 与在 [0,2]、[2,0] 和 [2,2] 中放置 X 相同。我相信这减少了9！到 9!/4

我们甚至可以通过计算在最后一步（第 9 步）之前哪些棋盘配置获胜来减少这种情况。我不知道号码，但可以在 Stack Overflow 表弟[http://en.wikipedia.org/wiki/Tic-tac-toe上找到详细说明](http://en.wikipedia.org/wiki/Tic-tac-toe)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:53:38.627

3^9 的假设是错误的。例如，这将包括一个只有 X 的棋盘，这是不可能的，因为两个玩家每轮都放置一个 X 或一个 O。

我最初的想法是有 (9*8*7*6*5*4*3*2) * 2 种可能性。第一个玩家有 9 个选择，第二个玩家有 8 个选择，第一个玩家有 7 个等等。我放 * 2 因为你可能有不同的最佳动作，具体取决于谁开始。

现在 3^9 是 19863 和 9！是 362880，所以显然这不是更好的解决方案，许多“不同的场景”实际上最终看起来完全一样。尽管如此，许多 19863 板设置无效的基本想法仍然存在。

这段代码可能可以用一个简单的公式代替，它告诉我这是你想要移动的位置数。

```
<script>

a = permuteString( "X........" ); document.write( Object.keys(a).length + "<br>" );console.log( a );
a = permuteString( "XO......." ); document.write( Object.keys(a).length + "<br>" );console.log( a );
a = permuteString( "XOX......" ); document.write( Object.keys(a).length + "<br>" );console.log( a );
a = permuteString( "XOXO....." ); document.write( Object.keys(a).length + "<br>" );console.log( a );
a = permuteString( "XOXOX...." ); document.write( Object.keys(a).length + "<br>" );console.log( a );
a = permuteString( "XOXOXO..." ); document.write( Object.keys(a).length + "<br>" );console.log( a );
a = permuteString( "XOXOXOX.." ); document.write( Object.keys(a).length + "<br>" );console.log( a );

//Subset of the Array.prototype.slice() functionality for a string
function spliceString( s , i )
{
    var a = s.split("");
  a.splice( i , 1 );
    return a.join("");
}

//Permute the possibilities, throw away equivalencies
function permuteString( s )
{
    //Holds result
    var result = {};

    //Sanity
    if( s.length < 2 ) return [];

    //The atomic case, if AB is given return { AB : true , BA : true }
    if( s.length == 2 )
    {
        result[s] = true;
        result[s.charAt(1)+s.charAt(0)] = true;
        return result;
    }

    //Enumerate
    for( var head = 0 ; head < s.length ; head++ )
    {
        var o = permuteString( spliceString( s , head  ) );
        for ( key in o )
            result[ s.charAt( head ) + key ] = true;
    }
    return result;
}

</script> 
```

这给出了以下数字： 第 1 步：9 第 2 步：72 第 3 步：252 第 4 步：756 第 5 步：1260 第 6 步：1680 第 7 步：1260

所以总共 5289 步，这甚至没有检查已经完成的游戏或对称性。

这些数字允许您通过数组查找移动，您可以通过循环所有可能的游戏来自己生成这个数组。

T。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-20T21:35:25.350

Tic Tac Toe 游戏非常简单，优化算法可以由 Tinker Toys（一种棍子和紧固件品牌）制造的机器实现。由于这种结构所封装的硬件复杂性水平低于 1970 年代典型的微处理器，所以在大多数情况下，找出已经进行了什么动作所需的时间将超过找出下一步动作所需的时间。可能最简单的方法是有一个表格，根据给定玩家的标记（2^9，或 512 个条目）的存在或不存在，将指示哪些方格会将两行转换为三行一行。首先查找移动中玩家拥有的棋子；如果任何可以完成三连胜的方格未被对手占据，则将其占据。否则查找对手的棋子组合；任何出现的尚未被占用的方格都必须被占用。否则，如果该中心可用，则接受它；如果只取中点，则取角。否则占优势。

向 4x4x4 Tic Tac Toe 提出问题可能会更有趣，因为这代表了足够的复杂性，以至于 1970 年代的计算机实现通常每次移动需要很多秒。虽然今天的计算机比 Atari 2600 等计算机快数千倍，但计算水平至少超出了微不足道的水平。

如果将游戏扩展到 4x4x4，那么在速度、RAM 和代码空间之间进行权衡会有很多可能性。与有 8 条获胜线的原始游戏不同，4x4x4 版本有 (IIRC) 76。如果一个人跟踪每条线处于 8 个状态之一[如果一个人获胜则为 10 个]，并且对于每个空方格，一个人跟踪通过它的获胜线有多少处于什么状态，应该可以根据该信息制定一些非常快速的启发式方法。可能有必要使用穷举搜索算法来确保启发式算法实际上会获胜，但是一旦验证了启发式算法，它们应该能够比穷举搜索运行得更快。

# html - 内联块的垂直大小高度到最大，没有包装块

> ID：11057987
> 
> 赞同：0
> 
> 时间：2012-06-15T20:47:11.373
> 
> 标签：html, css

[>我在 jsfiddle 的示例代码<](http://jsfiddle.net/7uKmX/3/)

1.  我想证明同一行中块的高度是合理的，即视觉边距必须相同。我们可以通过哪种方式做到这一点？

2.  如果可能的话，我只想将块的宽度设置为 100%，前提是它是一行中的单个块（如果容器块的宽度 < 2* 子块的最小宽度）。第二个愿望描述了为什么我不想使用包装器）

有任何想法吗？

哎呀，更正了链接！

# ios - 使用 NSUInteger 和 NSMutableDictionary 在 iOS 中的值转换问题

> ID：11057994
> 
> 赞同：0
> 
> 时间：2012-06-15T20:47:59.350
> 
> 标签：ios, nsdictionary, nsuinteger

我有一个`NSMutableDictionary`在键/值对中保存多个项目的。我已经用一个键存储了字符串并且没有问题地检索它们，但是，当我存储一个类型的值`NSUInteger`并尝试从字典中取回它时，我最终得到了一个非常大的值。

if 语句的第一部分我检查我要查找的值是否不为空或大于零。我试图基本上在字典中保存一个我可以访问的分数或值，以便我可以添加或删除。

正如您在 else 语句中看到的那样，我有两个`NSLog`语句，这就是我看到值差异的地方。第一`NSLog`条语句显示的值为 100，正如我希望单击我的“快乐”按钮时所期望的那样。但是，一旦从字典中检索到该值，currentTotal 就是 109709424。我确信这与我在将此整数值转换为字符串时使用的格式说明符有关。我尝试将此值 currentTotal 作为 int 或 NSUInteger 存储在我的字典中的键“Total”下，但是在 ARC 中不允许从非 Objective-c 类型对象转换为“id”，所以我被卡住了。

```
NSUInteger currentTotal = 0;
NSUInteger happinessValue = 100;
NSUInteger sadnessValue = 20; 

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    if ([appDelegate.data valueForKey:@"Total"] != nil || [appDelegate.data valueForKey:@"Total"] > 0) {

        currentTotal = (int)[appDelegate.data valueForKey:@"Total"];

        if ([segue.identifier isEqualToString:@"Happy"]) {
            [segue.destinationViewController setHappiness:(int)happinessValue :segue.identifier];
            currentTotal = add(currentTotal, happinessValue);

            [appDelegate.data setObject:(NSString *)[NSString stringWithFormat: @"Value: %i", happinessValue] forKey:@"Value"];
        } else if ([segue.identifier isEqualToString:@"Sad"]) {
            [segue.destinationViewController setHappiness:(int)sadnessValue :segue.identifier];
            currentTotal -= [segue.destinationViewController setTotalValue:happinessValue];
            [appDelegate.data setObject:(NSString *)[NSString stringWithFormat: @"Value: %i", sadnessValue] forKey:@"Value"];
        }
    }
    else {

        if ([segue.identifier isEqualToString:@"Happy"]) {
            [segue.destinationViewController setHappiness:(int)happinessValue :segue.identifier];
            NSLog(@"Old value ELSE: %i", currentTotal);
            currentTotal = [segue.destinationViewController setTotalValue:happinessValue];
            NSLog(@"New value ELSE: %i", currentTotal);
            [appDelegate.data setObject:(NSString *)[NSString stringWithFormat: @"Value: %i", happinessValue] forKey:@"Value"];
        } else if ([segue.identifier isEqualToString:@"Sad"]) {
            [segue.destinationViewController setHappiness:(int)sadnessValue :segue.identifier];
            currentTotal = [segue.destinationViewController setTotalValue:happinessValue];
            [appDelegate.data setObject:(NSString *)[NSString stringWithFormat: @"Value: %i", sadnessValue] forKey:@"Value"];
        }

        NSLog(@"Current Total: %i", currentTotal);
        [appDelegate.data setObject:[NSString stringWithFormat:@"%d", currentTotal] forKey:@"Total"];
        NSLog(@"Total stored: %i", (int)[appDelegate.data valueForKey:@"Total"]);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T21:05:12.403

这看起来像一个问题：

```
currentTotal = (int)[appDelegate.data valueForKey:@"Total"]; 
```

`-valueForKey:`返回一个指向 Objective-C 对象的指针，而不是 an `int`，因此您不能将其强制转换为 an`int`并期望发生任何有用的事情。如果是`NSNumber`，那么您需要执行以下操作：

```
currentTotal = [[appDelegate.data valueForKey:@"Total"] intValue]; 
```

有关更多信息，请参阅[文档。`NSNumber`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnumber_Class/Reference/Reference.html)

# visual-studio-2010 - Visual Studio 2010 在特定文件中搜索

> ID：11057996
> 
> 赞同：0
> 
> 时间：2012-06-15T20:48:15.990
> 
> 标签：visual-studio-2010

我想知道在 Visual Studio 2010 中是否有一种方法可以搜索特定的文件集，例如仅在 *.js 或 *.cs 文件中搜索？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:49:16.120

是的，当您使用*Find in Files*命令 ( `Ctrl`++ `Shift`)`F`时，在*Find Options*部分中，您可以指定要搜索的文件类型：

![在文件对话框中查找](../Images/9f80984e6bfce0aea419a8921329e93e.png)

# .htaccess - magento 主页 404 状态

> ID：11057999
> 
> 赞同：1
> 
> 时间：2012-06-15T20:48:32.297
> 
> 标签：.htaccess, magento, redirect, http-status-code-404

好吧……我要疯了……

我在 /store/ 目录中有一个 Magento 商店。主页显示正常，用户可以进行购买，但对机器人来说，它显示的是 404 状态代码。

所以 /store/ 和 /store/index.php 都是 404 标头响应，但我可以导航到这些页面并从那里浏览网站。我以前从没见过这个.....blah

当我使用 Xenu 从[http://www.mywebsite.com/store/](http://www.mywebsite.com/store/) URL 抓取网站时，它说它是 404 并且标题显示为“redir”，所以我假设在某处我缺少一些重定向（？） ……

任何帮助表示赞赏......我可能需要更好地解释这一点，所以如果是这样，我会很高兴:)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:05:12.117

我感谢所有的帮助！

不知何故，更改分配为主页的 CMS 页面解决了这个问题。原始主页正在调用某个返回 404 错误的实体，而该实体又会为整个页面提供 404 错误。

真的不知道发生了什么……但就像我说的，更改 CMS 主页解决了问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:17:14.427

您是否尝试过使用浏览器和用户代理切换器浏览您的网站？当用户代理是被明确排除在日志信息之外的机器人之一时，有一些 Magento 无法构建集合的示例。