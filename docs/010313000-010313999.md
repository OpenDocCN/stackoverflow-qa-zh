# StackOverflow 问答 10313000-10313999

# python - 是否可以在 Flask 中发出 POST 请求？

> ID：10313001
> 
> 赞同：45
> 
> 时间：2012-04-25T09:37:34.640
> 
> 标签：python, post, flask

需要在 Flask 中从服务器端发出 POST 请求。

假设我们有：

```
@app.route("/test", methods=["POST"])
def test():
    test = request.form["test"]
    return "TEST: %s" % test

@app.route("/index")
def index():
    # Is there something_like_this method in Flask to perform the POST request?
    return something_like_this("/test", { "test" : "My Test Data" }) 
```

我在 Flask 文档中没有找到任何具体的内容。有人说`urllib2.urlopen`是问题，但我未能将 Flask 和`urlopen`. 真的有可能吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2015-09-23T18:41:05.447

作为记录，这是从 Python 发出 POST 请求的一般代码：

```
#make a POST request
import requests
dictToSend = {'question':'what is the answer?'}
res = requests.post('http://localhost:5000/tests/endpoint', json=dictToSend)
print 'response from server:',res.text
dictFromServer = res.json() 
```

请注意，我们正在使用该`json=`选项传入一个 Python 字典。这方便地告诉 requests 库做两件事：

1.  将字典序列化为 JSON
2.  在 HTTP 标头中写入正确的 MIME 类型（'application/json'）

这是一个 Flask 应用程序，它将接收并响应该 POST 请求：

```
#handle a POST request
from flask import Flask, render_template, request, url_for, jsonify
app = Flask(__name__)

@app.route('/tests/endpoint', methods=['POST'])
def my_test_endpoint():
    input_json = request.get_json(force=True) 
    # force=True, above, is necessary if another developer 
    # forgot to set the MIME type to 'application/json'
    print 'data from client:', input_json
    dictToReturn = {'answer':42}
    return jsonify(dictToReturn)

if __name__ == '__main__':
    app.run(debug=True) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-25T09:44:16.997

是的，要发出可以使用的 POST 请求`urllib`，请参阅[文档](https://docs.python.org/3/library/urllib.request.html)。

但是，我建议改用[requests](https://requests.readthedocs.io/en/master/user/quickstart/)模块。

**编辑**：

我建议您重构代码以提取通用功能：

```
@app.route("/test", methods=["POST"])
def test():
    return _test(request.form["test"])

@app.route("/index")
def index():
    return _test("My Test Data")

def _test(argument):
    return "TEST: %s" % argument 
```

# sql - SQL 故障点和转向 NOSQL

> ID：10313004
> 
> 赞同：2
> 
> 时间：2012-04-25T09:37:54.297
> 
> 标签：sql, database, nosql, comparison

我在关系数据库方面有经验，但在 NoSQL 数据存储方面经验很少，对于这两个，我需要一个明确的理由来说明需要迁移到 NoSQL。

由于我无法复制可以将数据库推到极限并使其失去性能的情况，更不用说扩展它了。所以想看看别人怎么说。可能是我走错了路，但我读过人们说为什么我们应该转向 NoSQL，或者如何甚至在什么样的不同场景最终导致 NoSQL。一篇又一篇文章解释了大数据是什么以及如何在 NoSQL 域中对其进行管理，以及它的可扩展性、健壮性、ACID、BASE、从 Sql 到 NoSQL 的数据建模等特性的架构有多么有用。

但没有人会提供一些可靠的数字。例如，具有 X-TB 数据库的 Web 服务和最终查询（读/写/等）需要 T 秒左右才能完成，因此我们转向 NoSQL 以恢复性能。我担心的是，当他们说，好的，我们已经完成了扩展和一切，让我们继续使用 NoSQL 时，团队在什么时候真正转向了 NoSQL！

所以我不得不问 SO 用户。也许有人可以分享一些有价值的信息。这对我来说似乎是一个悬而未决的问题，因为我一直在尝试获取一个文档，该文档解释了最终必须用 NoSQL DB/DS/存储替换 SQL DB 的真实案例场景。

非常感谢任何指导。

# javascript - 如何编写正则表达式来验证特殊位置的字符？

> ID：10313006
> 
> 赞同：0
> 
> 时间：2012-04-25T09:38:04.063
> 
> 标签：javascript, regex, validation

我需要验证文本框中的时间字段。我使用了这个正则表达式。

```
 var reg_exp = /^([0-9\:]*)$/; 
```

但它允许添加：文本框中的任何位置。如何使其添加：仅在文本的第三位。例如：11* *：* *34

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:38:49.150

采用

```
^\d{2}:\d{2}$ 
```

而是匹配两个数字，然后是冒号和另外两个数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:50:02.603

为了验证时间是否正确`00:00`，`23:59`您可以使用：

```
/^(?:[01][0-9]|2[0-3]):(?:[0-5][0-9])$/ 
```

# node.js - node.js 的 Javascript 发射模板引擎？

> ID：10313008
> 
> 赞同：0
> 
> 时间：2012-04-25T09:38:16.657
> 
> 标签：node.js, template-engine, viewengine

例如，考虑以下场景：我们向客户提供一些入口点 URL（类似于`https://our.server/customer-name/entry-point.js`），以便他们能够通过简单地编写将我们的产品包含在他们的页面上

```
<script language="Javascript" src="https://our.server/customer-name/entry-point.js"/> 
```

在他们想要放置我们产品的地方（是的，我知道，这是一个丑陋的解决方案，但它不是我可以改变的）。

所以在这里我们面临一个问题：我们`entry-point.js`应该以某种方式知道它应该从哪里（`https://our.server/customer-name/`）加载其他文件。所以似乎答案是`entry-point.js`动态生成，以便它包含例如

```
var ourcompany_ourproduct_basepath = "https://our.server/customer-name/"; 
```

显而易见的方法是`entry-point.js`手动构造一个，如下所示：

```
res.write("var ourprefix_basepath = \"" + basepath.escape() + "\";");
res.write("function ourprefix_entryPoint() { /*do something*/ }");
res.write("ourprefix_entryPoint();"); 
```

如您所见，这*太*糟糕了。

是否有任何模板引擎允许以下内容：

```
var basepath = "https://our.server/customer-name/";
var export = {
    ourprefix_basepath: basepath.escape(),
    ourprefix_entrypoint: function() { /* do something */ }
};
templateEngine.render(export); 
```

或者

```
view.vw:
    ourprefix_basepath = rewrite("{#basepath}");
    function ourprefix_entrypoint() { /* do something */
    ourprefix_entrypoint();

App.js:
    templateEngine.render("view.vw", { basepath: "https://our.server/customer-name/" }); 
```

或类似的东西（你有这个想法），它将以下内容写入响应流：

```
var ourprefix_basepath = "https://our.server/customer-name/";
function ourprefix_entrypoint() { /* do something */ };
ourprefix_entrypoint(); 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:43:34.863

Node.js 似乎支持反射，但我找不到它是否在某处明确说明。

因此，通过利用 JSON 是 JS 的子集这一事实，可以在不使用模板引擎的情况下编写以下更简洁的代码：

```
var entrypoint = function(data) {
    /* do something with data.basepath and data.otherparam here... */
}

exports.processRequest = function(request, response) {
    var data = {
        basepath: computeBasepath(request),
        otherparam: "somevalue"
    };
    response.send("(" + entrypoint.toString() + ")(" + JSON.stringify(data) + ")");
} 
```

# mysql - 如何创建具有连续数字的表格

> ID：10313012
> 
> 赞同：0
> 
> 时间：2012-04-25T09:38:46.310
> 
> 标签：mysql

我需要一个只有一个 int(11) 列的辅助表，其中包含从 1 到给定最大值的每个连续数字的一行。这可以用纯 SQL 完成吗？

*例子：*

```
INSERT INTO `helper`('itnum') VALUES (1),(2),(3),...(999999),(1000000); 
```

我需要这样的声明，但没有明确列出所有要创建的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:44:28.897

我认为要做到这一点，您必须在 SGBD 过程的循环内或外部（php 脚本，...）执行插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:05:20.277

像这样的东西怎么样：

```
DELIMITER |
DROP PROCEDURE IF EXISTS insert_helper_records |
CREATE PROCEDURE insert_helper_records(a_max INTEGER)
BEGIN
    DECLARE v_iteration INTEGER;
    SET v_iteration := 1;
    insert_loop: LOOP
        INSERT INTO helper(itnum) VALUES (v_iteration);
        SET v_iteration := v_iteration + 1;
        IF v_iteration = a_max THEN
            LEAVE insert_loop;
        END IF;
    END LOOP;
END |
DELIMITER ; 
```

然后随心所欲地调用它：

```
SELECT insert_helper_records(999999) FROM DUAL; 
```

# jquery - 使用 getScript 时，Firefox 中的格式错误

> ID：10313015
> 
> 赞同：3
> 
> 时间：2012-04-25T09:38:49.203
> 
> 标签：jquery, firefox

我在stackoverflow和google中做了很多搜索，但我找不到合乎逻辑的方法！

我使用 getScript 加载 js 文件，在 Firefox 错误控制台中出现“格式错误”错误。我试图在 js 文件中注释我的所有代码行，但我再次收到该错误！

```
Timestamp: 04/25/2012 02:02:32 PM
Error: not well-formed
Source File: file:///G:/ct/main/main.js?_=1335346352617
Line: 1, Column: 1
Source Code:
/* 
```

我也使用 $.ajax，我得到了这个错误。

注意：我包含的 JS 代码工作没有任何问题，一切正常（当我的代码没有注释时），但我想知道为什么我的用户应该在 Firefox 中得到这个错误？！

对不起，我的英语不好。

编辑：

```
var ulWidth = 0; 
$('.carousel_links ul li').each(function(){ 
  ulWidth += $(this).outerWidth(); 
}); 

$('.carousel_links ul').css({ 
   'width' : ulWidth+'px' 
}); 
```

更新：

我是这样发现的： [如何在另一个 JavaScript 文件中包含一个 JavaScript 文件？](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file)

我使用它，我认为这种方式比`$.getScript`因为我没有收到任何错误而且我所有的 JavaScript 代码都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:19:21.603

我认为这必须与`mime`所请求文件的类型有关。

如果它在您的服务器上运行，请确保它知道如何处理`.js`文件。它应该返回`text/javascript`。

如果不是，那么它肯定应该在这样的要求下工作：

```
var req = new XMLHttpRequest();
req.open("GET", "filename.js");
req.overrideMimeType("text/javascript");
req.send(null); 
```

# jquery - 在 7 秒内从 0 计数到 100，同时为进度条执行 jQuery.animate()

> ID：10313019
> 
> 赞同：2
> 
> 时间：2012-04-25T09:38:57.760
> 
> 标签：jquery

我有一个简单的进度条，它必须在 7 秒内从 0 变为 100% 宽度。我处理操作没有问题，只需要7秒长。

代码其实很简单：

```
$('.progress-bar').animate({width:'100%'}, 7000); 
```

进度的宽度是 0%，所以我只需要将其设置为 100%。我的问题是我还需要从 0 数到 100 以显示百分比，就像我对进度所做的那样（在 7 秒内）。

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T09:52:40.773

[http://jsfiddle.net/C23YM/9/](http://jsfiddle.net/C23YM/9/)

基本上将一个函数传递给`step`选项，并在每次`step`调用时检查是否`width`是动画，因为您可能有，例如两个属性正在动画。

从[文档](http://api.jquery.com/animate/)：

> 请注意，为每个动画元素上的每个动画属性调用 step 函数。例如，给定两个列表项，step 函数在动画的每一步触发四次

```
$('.progress-bar').animate(
    {width:'100%'}, 
    {
        duration:7000,
        step: function(now, fx) {
           if(fx.prop == 'width') {
               $(this).html(Math.round(now * 100) / 100 + '%');
           }
        }
    }        
);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:46:03.920

类似的东西？

```
var starttime = (new Date()).getTime();

function updateTime() {
    var timediffPerc = ((new Date()).getTime() - starttime) / 70000;
    $('#percentage').text(timediffPerc.toFixed(2) + "%");
    if(timediffPerc<100) window.setTimeout(updateTime, 100);
} 
```

您需要一个 id="percentage" 的 HTML 元素，其中将显示百分比。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T09:46:45.627

您可以使用动画“从”“到”逻辑；

```
var _start = {property: 0};
var _end = {property: 100};

jQuery(_start).animate(_end, {
    duration: 7000,
    step: function() {
    $('.progress-bar').css('width', this.property + "%");        
    //console.log( 'Current percentage is ' + this.property );// You can write this to your bar

    }
}); 
```

你可以参考[这里](http://api.jquery.com/animate/)

您可以在该页面中搜索“步骤”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T09:46:52.087

如果您查看动画文档[http://api.jquery.com/animate/](http://api.jquery.com/animate/)，您可以使用一个 step 方法，并且在动画的每一步都会调用该方法。

> .animate() 的第二个版本提供了一个 step 选项——一个在动画的每一步触发的回调函数。此函数对于启用自定义动画类型或更改正在发生的动画很有用。它接受两个参数（now 和 fx），并将其设置为动画的 DOM 元素。
> 
> now：每一步动画属性的数值 fx：对 jQuery.fx 原型对象的引用，其中包含许多属性，例如动画元素的 elem，第一个和最后一个值的 start 和 end分别为动画属性和被动画属性的道具。

因此，您可以使用它来获取当前宽度值，以百分比表示，您应该得到一个与元素宽度完全匹配的值（例如 70% 为 70）

# http-post - 如何在 Windows 8 Metro 中执行 post 方法？

> ID：10313020
> 
> 赞同：2
> 
> 时间：2012-04-25T09:38:59.240
> 
> 标签：http-post, windows-8, microsoft-metro

我遵循了 HttpClient 示例，但无法弄清楚如何发布带有 2 个参数的方法。

以下是我尝试过的，但它返回错误的网关错误：

```
 private async void Scenario3Start_Click(object sender, RoutedEventArgs e)
    {
        if (!TryUpdateBaseAddress())
        {
            return;
        }

        Scenario3Reset();
        Scenario3OutputText.Text += "In progress";

       string resourceAddress =  "http://music.api.com/api/search_tracks";
        try
        {
            MultipartFormDataContent form = new MultipartFormDataContent();
        //    form.Add(new StringContent(Scenario3PostText.Text), "data");
            form.Add(new StringContent("Beautiful"), "track");
            form.Add(new StringContent("Enimem"), "artist");

            HttpResponseMessage response = await httpClient.PostAsync(resourceAddress, form);
        }
        catch (HttpRequestException hre)
        {
            Scenario3OutputText.Text = hre.ToString();
        }
        catch (Exception ex)
        {
            // For debugging
            Scenario3OutputText.Text = ex.ToString();
        }
    } 
```

我浏览了整个互联网，但找不到任何显示如何执行 http post 方法的工作示例或文档。任何材料或样品都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:51:48.230

我更喜欢采用以下方法，将 POST 数据设置到请求内容正文中。必须调试它要容易得多！

使用您发布到的 URL 创建 HttpClient 对象：

```
string oauthUrl = "https://accounts.google.com/o/oauth2/token";
HttpClient theAuthClient = new HttpClient(); 
```

使用 Post 方法将您的请求发送到您的 url

```
HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Post, oauthUrl); 
```

使用以 POST 数据格式显式设置的参数创建一个内容字符串，并在请求中进行设置：

```
string content = "track=beautiful" +
  "&artist=eminem"+
  "&rating=explicit";

request.Method = HttpMethod.Post;
request.Content = new StreamContent(new System.IO.MemoryStream(System.Text.Encoding.UTF8.GetBytes(content)));
request.Content.Headers.Add("Content-Type", "application/x-www-form-urlencoded"); 
```

发送请求并得到响应：

```
try
{                
    HttpResponseMessage response = await theAuthClient.SendAsync(request);
    handleResponse(response);
}
catch (HttpRequestException hre)
{

} 
```

一旦请求返回，您的处理程序将被调用，并将从您的 POST 中获得响应数据。以下示例显示了一个处理程序，您可以在其中设置断点以查看响应内容是什么，此时您可以解析它或对它做任何您需要做的事情。

```
public async void handleResponse(HttpResponseMessage response)
{
    string content = await response.Content.ReadAsStringAsync();

    if (content != null)
    {
        // put your breakpoint here and poke around in the data
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:50:18.137

尝试使用 FormUrlEncodedContent 而不是 MultipartFormDataContent：

```
var content = new FormUrlEncodedContent(
    new List<KeyValuePair<string, string>>
    {
        new KeyValuePair<string, string>("track", "Beautiful"),
        new KeyValuePair<string, string>("artist", "Enimem")
    }
); 
```

# emacs - Ch f 问题，直到第二种类型才显示内容

> ID：10313021
> 
> 赞同：1
> 
> 时间：2012-04-25T09:39:04.363
> 
> 标签：emacs

当我尝试查找有关功能 Ch a 的帮助主题时，内容不会直接显示。而是“键入”q“删除此帧。” 将发生在迷你缓冲区中，然后什么也没有出现。但是如果我第二次输入，内容就会出现

目前是这种情况，不确定是什么配置错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T15:17:53.947

你提出这个问题已经一年半了，仍然没有答案。这是我的（部分）答案。

与此类问题一样，请说明您的 Emacs 版本和重现问题的方法，从`emacs -Q`（无 init 文件）开始。如果您无法重现问题，`emacs -Q`则递归地将您的初始化文件一分为二，直到找到罪魁祸首代码。

如果您可以重现问题，`emacs -Q`那么这里的人们将能够帮助您了解这是否是预期的行为。如果没有，`M-x report-emacs-bug`则按顺序。即使您不确定某事是否是错误，您也可以使用 `M-x report-emacs-bug`-- Emacs Dev 会让您知道。但同样，错误报告最好包含一个从`emacs -Q`.

# xml-serialization - 将 RDF 转换为 OWL

> ID：10313026
> 
> 赞同：1
> 
> 时间：2012-04-25T09:39:11.143
> 
> 标签：xml-serialization, rdf, owl, rdflib

我想生成遵循 OWL 格式的 RDF 代码。我能够生成一个 RDF 文件，但我需要将其转换为 OWL。下面是我可以生成的 RDF。

```
<?xml version="1.0" encoding="UTF-8"?>
<rdf:RDF
   xmlns:ns1="http://example.com/nodetypes/2012/04/24/vehicle/"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
>
  <rdf:Description rdf:about="http://example.com/nodetypes/2012/04/24/vehicle/2">
    <ns1:nodetype_ptr_id>2</ns1:nodetype_ptr_id>
    <ns1:slug>vehicle</ns1:slug>
    <ns1:last_update>2012-04-24 23:49:36.633689</ns1:last_update>
    <ns1:end_publication>2042-03-15 00:00:00</ns1:end_publication>
    <ns1:tree_id>2</ns1:tree_id>
    <ns1:featured>False</ns1:featured>
    <ns1:parent_id>None</ns1:parent_id>
    <ns1:content></ns1:content>
    <ns1:rating_score>0</ns1:rating_score>
    <ns1:rating_votes>0</ns1:rating_votes>
    <ns1:start_publication>2012-04-24 23:49:15</ns1:start_publication>
    <ns1:level>0</ns1:level>
    <ns1:creation_date>2012-04-24 23:49:15</ns1:creation_date>
    <ns1:status>2</ns1:status>
    <ns1:template>gstudio/nodetype_detail.html</ns1:template>
    <ns1:content_org>None</ns1:content_org>
    <ns1:excerpt></ns1:excerpt>
    <ns1:plural>vehicles</ns1:plural>
    <ns1:comment_enabled>True</ns1:comment_enabled>
    <ns1:password></ns1:password>
    <ns1:title>vehicle</ns1:title>
    <ns1:login_required>False</ns1:login_required>
    <ns1:pingback_enabled>True</ns1:pingback_enabled>
    <ns1:rurl></ns1:rurl>
  </rdf:Description>
</rdf:RDF> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T12:54:07.433

正如cygri所说，工作已经完成。但是，现在有两种附加的规范语法：[OWL/XML](http://owl.cs.manchester.ac.uk/converter/)和用于指定什么是 OWL 本体并指定其直接语义的[功能语法。](http://www.w3.org/TR/owl2-syntax/)除此之外，OWL 还有一些非规范语法：[曼彻斯特语法](http://www.w3.org/TR/owl2-manchester-syntax/)和所有 RDF 序列化语法（[Turtle](http://www.w3.org/TeamSubmission/turtle/)、[N-Triples](http://www.w3.org/TR/rdf-testcases/#ntriples)、[Notation3](http://www.w3.org/TeamSubmission/n3/)、[JSON-LD](http://json-ld.org/)、[RDF/JSON](http://docs.api.talis.com/platform-api/output-types/rdf-json)、[HDT](http://www.w3.org/Submission/2011/SUBM-HDT-20110330/)等）。[RDF 工作组](http://www.w3.org/2011/rdf-wg/wiki/Main_Page)正在努力[使 Turtle 成为标准](http://www.w3.org/TR/turtle/)，以及[JSON 序列化](http://www.w3.org/2011/rdf-wg/wiki/TF-JSON)。

为了切换格式，您可以使用[曼彻斯特大学的转换器](http://owl.cs.manchester.ac.uk/converter/)，它可以输出 RDF/XML、Turtle、OWL/XML、曼彻斯特语法、函数语法以及 LaTeX（用于文章中的漂亮渲染）。

编辑：自 2014 年 2 月以来，[Turtle](https://www.w3.org/TR/turtle/)、[N-Triples](https://www.w3.org/TR/n-triples/)、[N-Quads](https://www.w3.org/TR/n-quads/)和[Trig](https://www.w3.org/TR/trig/)是 RDF 的规范语法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-25T11:30:26.417

你已经完成了。你所拥有的是一个 RDF/XML 文件。OWL 的规范语法是 RDF/XML。所以它也是一个OWL文件。

# android - Android：如何根据文本长度对齐两个文本视图

> ID：10313029
> 
> 赞同：1
> 
> 时间：2012-04-25T09:39:16.560
> 
> 标签：android, layout

我有一个布局，其中两个 TextView 将显示在同一行上，这样

如果 TextView1 是短文本，则 TextView2 应立即位于 TextView1(IMAGE1) 的右侧，如果 TextView1 是长文本，则 TextView2 应位于同一行上 Layout 的右上角(IMAGE2)

![在此处输入图像描述](../Images/a14e6588cf0fcb7d9d0be81afd001dfc.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:03:15.270

我使用带有 android:layout_weight 属性的简单水平线性布局，它就像你想要的那样工作。例子：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="horizontal">

<TextView
    android:id="@+id/text1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="teeeeeeeext1"/>

<TextView
    android:id="@+id/text2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="text2"/>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:59:30.043

编辑：

我显然误读（或没有完全阅读）你的问题。只是不要介意我的回答 - 我投票给 mxy's :)

上次我遇到同样的问题时，我无法找到或破解一个简单的解决方案。计算像素不是一种选择（至少对我来说不是）。但我找到了一种最终导致相同显示概念的解决方法，那就是使用[SpannableStringBuilder](http://developer.android.com/reference/android/text/SpannableStringBuilder.html)。

正如我假设您想要两个不同的 TextView，因为您希望它们具有不同的颜色（或大小、样式或字体）。这个想法是为整个事情使用一个 TextView，并`setText`在你的视图上做之前准备一个 SpannableString。

通过使用 ForegroundColorSpan、TextAppearanceSpan 等的组合，您可以使您的单个 TextView 看起来像具有不同样式的不同 TextView，并排放置，并根据需要换行到下一行。

链接：

[在运行时设置字体颜色](https://stackoverflow.com/questions/897072/changing-font-color-runtime-android)

[TextAppearanceSpan 示例](http://www.devdaily.com/java/jwarehouse/android/core/java/android/text/style/TextAppearanceSpan.java.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:53:21.540

使用这样的布局..

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/editText2"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="38dp"
        android:layout_toRightOf="@+id/editText1" />

</RelativeLayout> 
```

edittext 1 将 edittext2 推到它的右边...取决于其中的文本..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T09:54:11.150

您可以`android:maxWidth`为第一个文本视图设置属性。所以你的布局看起来像这样：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:maxWidth="200dp"
    android:text="sdfksdofsdfsdfsdfsadfgwagrswargweqrgeqrgqwergeqrgeqrg"
    />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/textView1"
    android:text="text2"
    /> 
```

# wpf - 当我尝试在 Windows 8 的 Visual Studio 2011 中创建 Metro 风格时，设计器未加载

> ID：10313031
> 
> 赞同：2
> 
> 时间：2012-04-25T09:39:19.833
> 
> 标签：wpf, silverlight, xaml, windows-8

我在设计屏幕上收到以下错误消息：

```
An unhandled exception has occured
Details:
System.Runtime.Remoting.RemotingException
[2108] Designer process terminated unexpectedly!
   at Microsoft.Expression.DesignHost.Isolation.Primitives.ProcessDomainFactory.ProcessIsolationDomain.Microsoft.Expression.DesignHost.Isolation.IIsolationDomain.CreateInstance(String assemblyName, String assemblyCodeBase, String typeName)
   at Microsoft.Expression.DesignHost.Isolation.Primitives.IsolationBoundary.Initialize()
   at Microsoft.Expression.DesignHost.Isolation.Primitives.IsolationBoundary.CreateInstance[T](Type type)
   at Microsoft.Expression.DesignHost.Isolation.IsolatedExportProvider.Initialize()
   at Microsoft.VisualStudio.ExpressionHost.Services.VSIsolationService.CreateExportProvider(IIsolationTarget isolationTarget, ICatalogFactory catalogFactory, IExportFilter filter)
   at Microsoft.Expression.DesignHost.Isolation.IsolationService.CreateLease(IIsolationTarget isolationTarget)
   at Microsoft.Expression.DesignHost.IsolatedDesignerService.CreateLease(IIsolationTarget isolationTarget, DesignerServiceEntry& entry)
   at Microsoft.Expression.DesignHost.IsolatedDesignerService.CreateDesignerViewInfo(IIsolationTarget isolationTarget, IHostSourceItem item, IHostTextEditor editor, CancellationTokenSource cancelSource)
   at Microsoft.Expression.DesignHost.IsolatedDesignerService.DesignerViewWrapper.<>c__DisplayClass54.<EnsureViewTask>b__52()
   at System.Threading.Tasks.Task`1.InnerInvoke()
   at System.Threading.Tasks.Task.Execute() 
```

我怎样才能摆脱这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T02:22:48.550

上面的链接已失效，但我[找到了一个](http://www.expressionblend.com/articles/2012/03/07/known-issue-xaml-designer-in-visual-studio-11-beta-crashes-on-launch/)引用该链接的页面，并将在此处复制步骤：

```
* Shut down all running instances of Visual Studio.
* Launch a command prompt as an Administrator.
* Type the following in sequence:
    pushd %VS110COMNTOOLS%
    icacls ..\IDE /grant "ALL APPLICATION PACKAGES":(OI)(F)
    icacls ..\IDE /grant "ALL APPLICATION PACKAGES":(CI)(F)
    icacls ..\IDE\PrivateAssemblies /grant "ALL APPLICATION PACKAGES":(OI)(F)
    icacls ..\IDE\PrivateAssemblies /grant "ALL APPLICATION PACKAGES":(CI)(F)
    icacls ..\IDE\PublicAssemblies /grant "ALL APPLICATION PACKAGES":(OI)(F)
    icacls ..\IDE\PublicAssemblies /grant "ALL APPLICATION PACKAGES":(CI)(F)
* Restart Visual Studio and try your scenario again. 
```

话虽如此，这并没有解决我的特定问题，该问题与此类似但不完全相同。也许这会帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T09:59:11.543

我也面临这个令人困惑的错误。在页面中放置一个文本框，瞧.. 我得到了无样式对话框，如本页所述错误：[[3028] 设计器进程意外终止！无法加载 xaml 设计器页面](http://connect.microsoft.com/VisualStudio/feedback/details/732656/3028-designer-process-terminated-unexpectedly-unable-to-load-xaml-designer-pages)。解决方案？删除控件后，尝试重建解决方案。CTRL+SHIFT+B

为我工作！

*   现在我可以继续解决我的这个任务；）

# javascript - 停止 Enter/Return 键提交表单

> ID：10313032
> 
> 赞同：5
> 
> 时间：2012-04-25T09:39:20.967
> 
> 标签：javascript, jquery, forms, keyboard-events, jquery-events

我在表格中有一张桌子。该表包含一些表单域，但表外也有表单域（但仍在表单内）。

我知道 Enter 和 Return 传统上用于通过键盘提交表单，但我想停止表中字段的这种行为。例如，如果我关注表格中的一个字段并按 Enter/Return，则什么也不会发生。如果我将一个字段集中在表格之外（但仍在表格内），那么它可以正常提交。

我有一个针对此表的 jQuery 插件。简化，这是我到目前为止所尝试的：

```
base.on('keydown', function(e) {
    if (e.keyCode == 13) {
        e.stopPropagation();
        return false;
    }
}); 
```

`base`表 jQuery 对象在哪里。这是我插件的`init`方法。但是，按 Enter 仍会提交表单。

我哪里错了？

**编辑：**一些简化的 HTML：

```
<form method="" action="">
  <input type="text" /><!--this should still submit on Enter-->
  <table>
    <tbody>
      <tr>
        <td>
          <input type="text" /><!--this should NOT submit on Enter-->
        </td>
      </tr>
    </tbody>
  </table>
</form> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T09:43:53.767

```
base.keypress(function(e) {
    var code = e.keyCode || e.which;
    if(code == 13)
        return false;
}); 
```

或仅用于输入：

```
$(':input', base).keypress(function(e) {
    var code = e.keyCode || e.which;
    if(code == 13)
        return false;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:42:23.057

我猜一个表单元素会触发提交事件，它不会通过表格冒泡到表单上，试试这个instread：

```
$('input, select, textarea', base).on('keydown', function(e) {
    if (e.keyCode == 13) {
        return false;
    }
}); 
```

请注意，我们还为选择器提供上下文，因此`keyDown`这只发生在表中的元素（根据需要修改）上。

正如 gordan 在另一条评论中所说， return false 两者`.preventDefault()`兼而有之`.stopPropagation()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T09:42:22.327

`e.preventDefault()`而不是`e.stopPropagation()`. stopPropagation 只会阻止它冒泡到更高的 DOM 节点，它不会阻止默认操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-03T07:42:19.807

我发现这个 Q/A 试图解决一个类似的情况，即我有多个表单并且输入不会做我想要的。在我的特定情况下，我会动态添加一个新的`<div id="D1">`D1、D2、D3 等，并且每个新 div 都有一个表单，该表单将从创建它的相同 php 代码重新加载该 div，也只有一个 POST。

不相关的第一个问题是我无法为每个 div 动态创建一个新函数，所以我将 D1 等描述符作为参数传递给 Javascript 函数：

```
<script type="text/javascript">
function formSubmit ( divid ) {
    // post data
    event.preventDefault();
    $.post( "make-my-form-div.php", 
            $("#form"+divid).serialize(), 
            function(data){
                $("#"+divid).html(data);
            });
    return false;
}
</script> 
```

您将看到必要条件`event.preventDefault();`，并且`return false;`适用于此线程中的答案。它对我不起作用。如果我以任何一种形式单击提交，则该 div 将重新加载正确的数据。点击回车会导致默认操作并重新加载整个页面，只剩下 1 个 div。

[这个答案有效](https://stackoverflow.com/a/12031579/946112)：我需要不同形式的唯一 ID 和名称。最初，它们是，`<INPUT TYPE="button" VALUE="Submit" onClick="formSubmit('<?php echo $divid ?>');">`但是一旦我添加了唯一的 ID 和名称，例如“formD1”等，它就开始正常工作了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-20T10:13:33.040

这对我有用。

```
$("input[type='text']").on('keypress', function(e) { return e.keyCode != 13; }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-12T09:07:33.877

只需将以下代码放入您的模板文件或页面标题中。

```
<script type="text/javascript">

function stopRKey(evt) {
  var evt = (evt) ? evt : ((event) ? event : null);
  var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);
  if ((evt.keyCode == 13) && (node.type=="text"))  {return false;}
}

document.onkeypress = stopRKey;

</script> 
```

# maven - Maven：程序集插件构建的工件的继承

> ID：10313036
> 
> 赞同：2
> 
> 时间：2012-04-25T09:39:30.473
> 
> 标签：maven, maven-assembly-plugin

我正在使用 Maven Assembly 插件构建我们的 Web 应用程序。这是出于从特殊插件中提取一些数据的需求。程序集描述符的片段证明了这一点：

```
 <dependencySet>
        <unpack>true</unpack>
        <scope>runtime</scope>
        <useProjectArtifact>false</useProjectArtifact>
        <includes>
            <include>org.myproject.module:*:jar</include>
        </includes>
        <unpackOptions>
            <includes>
                <include>images/**</include>
                <include>install/**</include>
                <include>mappings/**</include>
            </includes>
        </unpackOptions>
        <outputDirectory>./WEB-INF/myproject-modules/${artifact.name}</outputDirectory>
    </dependencySet> 
```

所有 groupId=org.myproject.module 的插件都有这种特殊的处理和模块特定文件夹的提取。

现在，我需要用完全相同的方法构建另一个 WAR，但模块集不同。有什么方法可以很好地扩展我的原始 POM，并简单地添加依赖项，*而不需要*我的程序集描述符的副本（存储在 src/main/assembly 中）？

简单地扩展 pom 失败，缺少程序集描述符，它在父级中物理找到：

```
<build>
    <pluginManagement>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <descriptors>
                        <descriptor>src/main/assembly/assembly.xml</descriptor>
                </descriptors>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                </execution>
            </executions>   
        </plugin>
    </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:39:28.783

在程序集插件文档中有一个如何在项目之间共享程序集描述符的[示例。](http://maven.apache.org/plugins/maven-assembly-plugin/examples/sharing-descriptors.html)如果您不使用装配组件，那应该可以工作；在使用这种方法的组件时，我看到了对类路径问题的引用。

# mysql - 如何使用 GROUP BY 检索按字母排序优先的结果集

> ID：10313037
> 
> 赞同：0
> 
> 时间：2012-04-25T09:39:31.770
> 
> 标签：mysql

我有下表

```
SELECT * FROM cars;

id      value
1       convertible
2       van
2       wagon
3       scooter
3       segway 
```

当我使用`GROUP BY`语句

```
SELECT * FROM cars
GROUP BY id; 
```

我得到以下结果集

```
1   convertible
2   van
3   scooter 
```

如何更改上述语句以选择按字母顺序排在最后的 cars.value？例如

```
1   convertible
2   wagon
3   segway 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:46:59.803

SELECT min(value) FROM cars GROUP BY id;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:41:46.290

尝试：

```
SELECT * from (
    SELECT * from cars order by value desc
) as tmp
group by id 
```

在分组前对表格进行排序

[这里的工作示例](http://www.sqlize.com/T59v6ONZzf)

# ios - OpenCV：旋转/平移向量到 OpenGL 模型视图矩阵

> ID：10313040
> 
> 赞同：6
> 
> 时间：2012-04-25T09:39:39.803
> 
> 标签：ios, opengl-es, opencv, opengl-es-2.0

我正在尝试使用 OpenCV 来做一些基本的增强现实。我要解决的方法是`findChessboardCorners`从相机图像中获取一组点。然后，我沿着 z = 0 平面创建一个 3D 四边形，并使用它`solvePnP`来获得成像点和平面点之间的单应性。由此，我想我应该能够设置一个模型视图矩阵，它允许我在图像顶部以正确的姿势渲染一个立方体。

的[文档](http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html#cv-solvepnp)`solvePnP`说它输出一个旋转向量“（与[平移向量]一起）将点从模型坐标系带到相机坐标系。” 我认为这与我想要的相反；因为我的四边形在平面 z = 0 上，所以我想要一个模型视图矩阵，它将将该四边形转换为适当的 3D 平面。

我认为通过以相反的顺序执行相反的旋转和平移，我可以计算出正确的模型视图矩阵，但这似乎不起作用。虽然渲染对象（立方体）确实随着相机图像移动并且在平移上似乎大致正确，但旋转根本不起作用；当它应该只在一个轴上旋转时，它在多个轴上，有时在错误的方向上。到目前为止，这是我正在做的事情：

```
std::vector<Point2f> corners;
bool found = findChessboardCorners(*_imageBuffer, cv::Size(5,4), corners,
                                      CV_CALIB_CB_FILTER_QUADS |
                                      CV_CALIB_CB_FAST_CHECK);
if(found)
{
  drawChessboardCorners(*_imageBuffer, cv::Size(6, 5), corners, found);

  std::vector<double> distortionCoefficients(5);  // camera distortion
  distortionCoefficients[0] = 0.070969;
  distortionCoefficients[1] = 0.777647;
  distortionCoefficients[2] = -0.009131;
  distortionCoefficients[3] = -0.013867;
  distortionCoefficients[4] = -5.141519;

  // Since the image was resized, we need to scale the found corner points
  float sw = _width / SMALL_WIDTH;
  float sh = _height / SMALL_HEIGHT;
  std::vector<Point2f> board_verts;
  board_verts.push_back(Point2f(corners[0].x * sw, corners[0].y * sh));
  board_verts.push_back(Point2f(corners[15].x * sw, corners[15].y * sh));
  board_verts.push_back(Point2f(corners[19].x * sw, corners[19].y * sh));
  board_verts.push_back(Point2f(corners[4].x * sw, corners[4].y * sh));
  Mat boardMat(board_verts);

  std::vector<Point3f> square_verts;
  square_verts.push_back(Point3f(-1, 1, 0));                              
  square_verts.push_back(Point3f(-1, -1, 0));
  square_verts.push_back(Point3f(1, -1, 0));
  square_verts.push_back(Point3f(1, 1, 0));
  Mat squareMat(square_verts);

  // Transform the camera's intrinsic parameters into an OpenGL camera matrix
  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();

  // Camera parameters
  double f_x = 786.42938232; // Focal length in x axis
  double f_y = 786.42938232; // Focal length in y axis (usually the same?)
  double c_x = 217.01358032; // Camera primary point x
  double c_y = 311.25384521; // Camera primary point y

  cv::Mat cameraMatrix(3,3,CV_32FC1);
  cameraMatrix.at<float>(0,0) = f_x;
  cameraMatrix.at<float>(0,1) = 0.0;
  cameraMatrix.at<float>(0,2) = c_x;
  cameraMatrix.at<float>(1,0) = 0.0;
  cameraMatrix.at<float>(1,1) = f_y;
  cameraMatrix.at<float>(1,2) = c_y;
  cameraMatrix.at<float>(2,0) = 0.0;
  cameraMatrix.at<float>(2,1) = 0.0;
  cameraMatrix.at<float>(2,2) = 1.0;

  Mat rvec(3, 1, CV_32F), tvec(3, 1, CV_32F);
  solvePnP(squareMat, boardMat, cameraMatrix, distortionCoefficients, 
               rvec, tvec);

  _rv[0] = rvec.at<double>(0, 0);
  _rv[1] = rvec.at<double>(1, 0);
  _rv[2] = rvec.at<double>(2, 0);
  _tv[0] = tvec.at<double>(0, 0);
  _tv[1] = tvec.at<double>(1, 0);
  _tv[2] = tvec.at<double>(2, 0);
} 
```

然后在绘图代码中...

```
GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, 0.0f);
modelViewMatrix = GLKMatrix4Translate(modelViewMatrix, -tv[1], -tv[0], -tv[2]);
modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, -rv[0], 1.0f, 0.0f, 0.0f);
modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, -rv[1], 0.0f, 1.0f, 0.0f);
modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, -rv[2], 0.0f, 0.0f, 1.0f); 
```

我正在渲染的顶点在原点周围创建一个单位长度的立方体（即沿着每个边从 -0.5 到 0.5。）我知道使用 OpenGL 转换函数以“相反的顺序”执行转换，所以上面应该沿着立方体旋转z, y, 然后是 x 轴，然后平移它。然而，它似乎是先翻译然后旋转，所以也许苹果的`GLKMatrix4`工作方式不同？

[这个问题](https://stackoverflow.com/questions/3712049/how-to-use-an-opencv-rotation-and-translation-vector-with-opengl-es-in-android)似乎与我的非常相似，特别是 coder9 的答案似乎或多或少是我正在寻找的。但是，我尝试了它并将结果与​​我的方法进行了比较，两种情况下我得到的矩阵都是相同的。我觉得这个答案是正确的，但我错过了一些关键细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:47:25.770

您必须确保轴朝向正确的方向。特别是 OpenGL 和 OpenCV 中 y 轴和 z 轴朝向不同的方向，以确保 xyz 基础是直接的。[您可以在这篇博文](http://urbanar.blogspot.com/2011/04/from-homography-to-opengl-modelview.html)中找到一些信息和代码（使用 iPad 摄像头）。

**-- 编辑 --** 好的。不幸的是，我使用这些资源反过来（opengl ---> opencv）来测试一些算法。我的主要问题是图像的行顺序在 OpenGL 和 OpenCV 之间颠倒了（也许这有帮助）。

在模拟相机时，我遇到了相同的投影矩阵，可以在[此处](http://sightations.wordpress.com/2010/08/03/simulating-calibrated-cameras-in-opengl/)和[通用投影矩阵论文](http://aoeu.snth.net/static/gen-perspective.pdf)中找到。[这篇](http://cvrr.ucsd.edu/publications/2008/MurphyChutorian_Trivedi_CVGPU08.pdf)博文评论中引用的这篇论文也展示了计算机视觉和 OpenGL 投影之间的一些联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:42:22.997

我不是IOS程序员，所以这个答案可能会产生误导！如果问题不在于应用旋转和平移的顺序，则建议使用更简单且更常用的坐标系。

角向量中的点的原点 (0,0) 位于图像的左上角，y 轴朝向图像的底部。通常从数学中，我们习惯于考虑以原点为中心、y 轴朝向图像顶部的坐标系。从您推入 board_verts 的坐标来看，我猜您正在犯同样的错误。如果是这种情况，很容易通过以下方式转换角的位置：

```
for (i=0;i<corners.size();i++) {
  corners[i].x -= width/2;
  corners[i].y = -corners[i].y + height/2;
} 
```

然后你调用solvePnP()。调试这个并不难，打印四个角的位置和估计的R和T，看看是否有意义。然后您可以继续执行 OpenGL 步骤。请让我知道情况如何。

# layout - sencha hbox 面板未显示

> ID：10313042
> 
> 赞同：1
> 
> 时间：2012-04-25T09:39:47.970
> 
> 标签：layout, sencha-touch-2, hbox

![在此处输入图像描述](../Images/966052d4f0a9a049080e1e5fff00b430.png)我正在尝试创建一个显示 2 个面板的 hbox。它工作正常，直到我决定将左侧面板的布局设置为“CARD”。我使用的代码是

```
Ext.define("InfoImage.view.WorkItems", {
    layout:'hbox',
    extend:'Ext.Container',
    requires:[
        'Ext.TitleBar',
        'Ext.layout.HBox',
        'Ext.List'
    ],
    xtype:'workitems',
    id:'workitems',
   // layout:'fit',
    config:{
        //scrollable:'true',
        fullscreen:true,
        layout:'fit',
        cls:'hboxpanel',
        items:[
            {
                xtype:'leftPanel'
            },
            {
                xtype:'documentPanel'
            }
        ]

    }

}); 
```

左侧面板代码如下：

```
Ext.define('InfoImage.view.leftPanel', {
    extend:'Ext.Panel',
    requires:[
        'InfoImage.view.Main',
        'InfoImage.view.WorkItems',
         'Ext.TitleBar'
    ],

    id:'leftPanel',
    xtype:'leftPanel',

    config:{
        width:'30%',
        fullscreen:true,
        autoScroll:true,
        layout:'card',
        cardSwitchAnimation:'slide',
        cls:'leftPanel',
        items:[
            /*{
                xtype:'workItemPanel'
            },
            {
                xtype:'inboxQueuePanel'

            },*/
            {
                xtype:'toolbar',
                docked:'bottom',
                items:[

                    {
                        xtype:'button',
                        cls:'workitem',
                        text:"<img src='resources/images/compose.png' style='width:40px;height:40px;' />",
                        iconMask:true,
                        ui:'normal',
                        id:'workitem',
                        handler:function () {
                        }
                   },
                    {
                        xtype:'button',
                        cls:'inbox',
                        text:"<img src='resources/images/mail.png' style='width:40px;height:40px;' />",
                        iconMask:true,
                        ui:'normal',
                        id:'inbox',
                        handler:function () {
                        }
                    },
                    {
                        xtype:'button',
                        cls:'filecabinet',
                        text:"<img src='resources/images/cabinet_256.jpg' style='width:40px;height:40px;' />",
                        iconMask:true,
                        ui:'normal',
                        id:'filecabinet',
                        handler:function () {
                        }
                   }
                ]
            }
        ]
    }
}); 
```

我的问题是，当我运行项目时，只显示右侧面板。如何解决 leftPanel 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:39:00.253

我认为您要的是让 leftPanel 在三个“卡片”选项卡之一之间切换？这就像他们在示例目录中发布的 Sencha [GeoCongress](http://dev.sencha.com/deploy/touch/examples/production/geocongress/)示例（尽管它是全屏的）。在 app/controller/SplashScreen.js 文件中，它们有几个函数调用 setActiveItem() 来设置卡片。您可以在处理程序中执行相同操作：

```
处理程序：函数（）{
    var leftPanel = Ext.getCmp('leftPanel'); // 获取左侧面板的 id
    leftPanel.setActiveItem(Ext.getCmp('workItemPanel')); // 获取卡片的 id 并使其处于活动状态
}

```

这是我的 InfoImage.view.LeftPanel 的工作版本

```
Ext.define('InfoImage.view.LeftPanel', {
    扩展：'Ext.Panel'，
    要求：[
        'InfoImage.view.Main',
        'InfoImage.view.WorkItems',
        'Ext.TitleBar'
    ],

    id:'leftPanel',
    xtype:'leftPanel',

    配置：{
        宽度：'30%',
        全屏：真，
        自动滚动：真，
        布局： {
            类型：'卡'，
            动画： {
                类型：'幻灯片'
            }
        },
        cls:'leftPanel',
        项目：[

            {
                xtype:'工具栏',
                停靠：'底部'，
                项目：[

                    {
                        xtype:'按钮',
                        cls:'工作项',

                        html:"1 <img src='resources/images/compose.png' style='width:20px;height:20px;'/>",
                        图标掩码：真，
                        ui:'正常',
                        id:'工作项',
                        处理程序：函数（）{
                            var leftPanel = Ext.getCmp('leftPanel');
                            leftPanel.setActiveItem(Ext.getCmp('one'));
                        }
                    },
                    {
                        xtype:'按钮',
                        cls:'收件箱',
                        文本：“2 <img src='resources/images/mail.png' style='width:40px;height:40px;' />",
                        图标掩码：真，
                        ui:'正常',
                        id:'收件箱',
                        处理程序：函数（）{
                            var leftPanel = Ext.getCmp('leftPanel');
                            leftPanel.setActiveItem(Ext.getCmp('workItemPanel'));
                        }
                    },
                    {
                        xtype:'按钮',
                        cls:'文件柜',
                        文本：“3 <img src='resources/images/cabinet_256.jpg' style='width:40px;height:40px;' />",
                        图标掩码：真，
                        ui:'正常',
                        id:'文件柜',
                        处理程序：函数（）{
                            var leftPanel = Ext.getCmp('leftPanel');
                            leftPanel.setActiveItem(Ext.getCmp('inboxQueuePanel'));
                        }
                    }
                ]
            },
            {
                xtype：'面板'，
                id：'一个'，
                html:'一个'
            },
            {
                xtype：'面板'，
                id: 'workItemPanel',
                html:'workItemPanel'
            },
            {
                xtype：'面板'，

                id: '收件箱队列面板',
                html:'收件箱队列面板'
            }
        ]
    }
});

```

# sql - SQL：多边形的联合

> ID：10313045
> 
> 赞同：4
> 
> 时间：2012-04-25T09:39:54.780
> 
> 标签：sql, sql-server, sql-server-2008, geometry

`geometry`我有一个包含多边形的单列类型的表。如何获得表中所有多边形的并集？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-28T14:17:11.553

在 SQL Server 2012 中：

```
SELECT geometry::UnionAggregate(geomcolumn) FROM YourTable; 
```

在 SQL Server 2008/R2 中：

```
DECLARE @g = geometry::STGeomFromText('GEOMETRYCOLLECTION EMPTY', YourSRID);
SELECT @g = @g.STUnion(geomcolum) FROM YourTable; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T16:22:49.143

这对我有用：

```
CREATE TABLE #g (i INT IDENTITY, a geometry)
INSERT INTO #g (a)
VALUES
    (geometry::STGeomFromText(
        'POLYGON((0 0, 3 0, 3 3, 0 3, 0 0))', 0)
    ),
    (geometry::STGeomFromText(
        'POLYGON((5 2, 7 2, 7 0, 5 0, 5 2))', 0)
    )

DECLARE @g geometry
SELECT TOP 1 @g = a FROM [#g]
SELECT @g = @g.STUnion(a) FROM #g

SELECT @g 
```

因此，显然，当调用它的实例或操作数为 null 时，STUnion 方法返回 null，因此是`select top 1`hack。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:15:28.773

你的意思是，如果你有 2 个正方形，可以说

```
(0 0 , 1 0 , 0 1 , 1 1) 
```

和

```
(1 0 , 1 1 , 2 0 , 2 1) 
```

你最终得到一个矩形：

```
(0 0, 2 0 ,0 1, 2 1) 
```

如果是，请尝试[GPC](http://www.cs.man.ac.uk/~toby/alan/software/)（通用多边形剪裁库）

[这个](http://www.geometrictools.com/SampleMathematics/Boolean2D/Boolean2D.html)链接也可以帮助你

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-25T09:43:37.683

`SELECT DISTINCT geometry from [your table]`?

# php - 比较2个字符串的一部分（PHP）？

> ID：10313059
> 
> 赞同：1
> 
> 时间：2012-04-25T09:40:19.240
> 
> 标签：php, substring, string-comparison

> **可能重复：**
> [在 PHP 中突出显示两个字符串之间的差异](https://stackoverflow.com/questions/321294/highlight-the-difference-between-two-strings-in-php)

例如，我有这些字符串：

*示例**XY2** \r\n(系统 x)*

和

*别的东西**XY2***

如您所见，只有 XY2 是相同的。检查 2 个字符串是否有共同点（如 XY2）的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:15:27.123

您可以尝试使用[`similar_text`](http://php.net/manual/en/function.similar-text.php)功能。不要安静你需要的东西，但可以提供帮助。

查看有关[查找最大公共子字符串](https://stackoverflow.com/questions/336605/how-can-i-find-the-largest-common-substring-between-two-strings-in-php)的帖子。

# php - 检查 PHP 数组的连续索引

> ID：10313060
> 
> 赞同：3
> 
> 时间：2012-04-25T09:40:20.023
> 
> 标签：php, arrays

抱歉，如果问题的标题不清楚，我无法更准确地总结。

这是问题：

首先，我有一个这种格式的数组：

```
Array ( 
    [0] => 09:00 
    [1] => 10:00 
    [2] => 11:00 
    [3] => 12:00 
    [4] => 13:00 
    [5] => 14:00 
    [6] => 15:00 
    [7] => 16:00 
    [8] => 17:00 
    [9] => 18:00 
) 
```

然后一些成员是未设置的，所以之后我们留下了类似的东西：

```
Array ( 
    [0] => 09:00 
    [1] => 10:00 
    [6] => 15:00 
    [7] => 16:00 
    [8] => 17:00 
    [9] => 18:00 
) 
```

如您所见，该数组表示时隙。现在，我需要做的是消除所有少于 3 小时的时间段。所以我需要遍历数组，如果原始数组的成员少于 3 个，也将它们取出。所以在上面的例子中，由于 09:00 和 10:00 之后没有 11:00，我需要将它们取出并留下：

```
Array ( 
    [6] => 15:00 
    [7] => 16:00 
    [8] => 17:00 
    [9] => 18:00 
) 
```

我该如何做到这一点？从逻辑上讲，我认为检查 3 个连续索引可能最简单，而不是检查实际时间，但我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:18:44.543

我自己解决了这个问题，并且我把它变成了通用的，所以它可以在任何时间内工作，而不仅仅是 3 小时。

```
$dur=3;  //could be anything
foreach($work_times as $member){
    $key=array_search($member,$work_times);
    $a_ok=0;
    for($options=0;$options<$dur;$options++){
        $thisone=1;
        for($try=$key-$options;$try<$key-$options+$dur;$try++){
            if(!array_key_exists($try,$work_times))
                $thisone=0;
        }
        if($thisone==1)
            $a_ok=1;
    }
    if($a_ok==0)
        unset($work_times[$key]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:10:19.850

```
$a = Array(
    0 => "09:00",
    1 => "10:00",
    6 => "15:00",
    7 => "16:00",
    8 => "17:00",
    9 => "18:00",
    11 => "20:00",
);

foreach ($a as $k => $v) {
    // previous or next two time slots exist
    $consecutive = (isset($a[$k-1]) or
                    (isset($a[$k+1]) and isset($a[$k+2])));
    if (!$consecutive)
        unset($a[$k]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:15:46.697

```
$arr = array(
  0 => '09:00',
  1 => '10:00',
  6 => '15:00',
  7 => '16:00',
  8 => '17:00',
  9 => '18:00'
);
// for some testing
$arr += array(12 => '19:00', 13 => '20:00', 14 => '21:00');
$arr += array(16 => '22:00', 17 => '23:00');

$dontRemove = array();

foreach($arr as $key => $val) {
  // if the next 2 keys are set
  if (isset($arr[$key+1]) && isset($arr[$key+2])) {
    $dontRemove[] = $key;
    $dontRemove[] = $key+1;
    $dontRemove[] = $key+2;
  }
}

// combine and diff the keys to get the keys which should be actually removed
$remove = array_diff(array_keys($arr), array_unique($dontRemove));

foreach($remove as $key) {
  unset($arr[$key]);
}

print_r($arr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T10:35:15.043

试试这个：

```
<?php
function check() {
    global $array;

    $tmpArr = array_keys( $array );

    $val1 = $tmpArr[0];
    $val2 = $tmpArr[1];
    $val3 = $tmpArr[2];

    if( ( ++$val1 == $val2 ) && ( ++$val2 == $val3 ) ) {
        // continuous
    } else {
        // not continuous, remove it
        unset( $array[$tmpArr[0]] );
    }
}

$array = array( 
    '0' => '09:00', 
    '1'=> '10:00', 
    '6' => '15:00',
    '7'=> '16:00',
    '8' => '17:00',
    '9' => '18:00'
);

$total = count( $array );
$ctotal = 0;
while( $ctotal < $total ) {
    if( count( $array ) <= 2 ) {
        // this array has 2 elements left, which obviously
        // nullifies the 3 continuous element check
        $array = array();
        break;
    } else {
        //check the array backwards
        check();
        $total--;
    }
}
?> 
```

希望这可以帮助

# c# - 我可以重新打印假脱机文件吗？

> ID：10313063
> 
> 赞同：5
> 
> 时间：2012-04-25T09:40:35.147
> 
> 标签：c#, printing, spool, spooler

有没有办法重新打印假脱机文件？

我找不到任何例子或文章来说明是否有办法。

编辑：当我说重印时，我指的是同一台打印机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T19:53:23.327

是的你可以。将完整的 SPL 文件读入字节数组，看看这篇文章：

[http://support.microsoft.com/kb/322090/en-us](http://support.microsoft.com/kb/322090/en-us)

它向您展示了如何将原始数据发送到打印机。使用它将您的字节数组发送到打印机。注意：SPL 文件实际上可以包含各种数据类型，例如 EMF、PCL、ESC-P 等。您必须确保您拥有的 SPL 文件的格式适合您的特定打印机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T23:54:13.760

对于 EMF，我会考虑使用[PrintDocument](http://msdn.microsoft.com/en-us/library/68eybb19.aspx)类和[Metafile](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.metafile.aspx)类。PrintDocument 的 OnPrintPage 事件处理程序公开了一个 Graphics 对象，它允许您呈现 EMF 文件，如下所示：

```
 void printDocument1_PrintPage(object sender, PrintPageEventArgs e)
    {
        Metafile metafile = new Metafile("SampleMetafile.emf");
        e.Graphics.DrawImage(metafile, 10, 10);
    } 
```

至于纯文本，您可以将其绘制到打印文档上的 Graphics 对象，但您需要考虑文本换行和线条，这可能不值得付出努力。我还怀疑，对于几乎所有设备，如果您将纯文本通过端口 9100 发送到打印机，它也会打印得相当好。

# c# - 不足以阻止 WP7 列表框中的滚动

> ID：10313065
> 
> 赞同：3
> 
> 时间：2012-04-25T09:40:42.753
> 
> 标签：c#, silverlight, windows-phone-7, listbox, scroll

我试图防止在 ListBox 中滚动。使用 ScrollViewer.VerticalScrollBarVisibility 看起来像是一个很好的解决方案 - 滚动被阻止......但是！只需点击 ListBox 的底部，内容就会向下移动。我试图在[重复问题](https://stackoverflow.com/questions/3679326/wp7-prevent-listbox-scrolling)之前询问类似的主题（对不起，它可能关注谁）。

这是我的代码：

```
<StackPanel     Orientation="vertical">         
    <Grid Height="130" >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Image   Grid.Column="0"  x:Name="itemIco1" Width="120" Height="120" HorizontalAlignment="Left" 
                    Source="{Binding ImageURL}" 
                    Stretch="Fill" CacheMode="BitmapCache" VerticalAlignment="Top" Margin="0,5,5,0" Visibility="Visible"/>  

        <ListBox  Grid.Column="1" ScrollViewer.VerticalScrollBarVisibility="Disabled" >
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>

                </Style>
            </ListBox.ItemContainerStyle>
            <TextBlock   
                        Name="TextBlockTitle" 
                        Margin="0,0,0,0" 
                        FontSize="26" FontFamily="Segoe WP Semilight"  Foreground="{Binding TitleColor}"
                        TextTrimming="WordEllipsis" TextWrapping="Wrap"
                        Width="Auto" Height="auto" MaxHeight="96" VerticalAlignment="Top"  FontWeight="{Binding Font}" Text="{Binding Title}" />

            <TextBlock 
                        Name="TextBlockBody" 
                        Margin="0,0,0,0" 
                        FontSize="26" FontFamily="Segoe WP Semilight" Foreground="#FF5C5A5A" 
                        TextTrimming="WordEllipsis" TextWrapping="Wrap"
                        Width="Auto" Height="auto" MaxHeight="100" VerticalAlignment="Top" Text="{Binding Body}" FontWeight="{Binding Font}"/>              
        </ListBox>      
    </Grid>
    <TextBlock x:Name="date" Height="16" Text="{Binding Date}" TextWrapping="Wrap" Margin="0,0,0,0" FontSize="16" FontFamily="Segoe WP Semilight"  FontWeight="{Binding Font}" Foreground="Black" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>

</StackPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:24:40.760

将列表框的垂直对齐属性设置为 Top。虽然不确定，但这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:40:50.220

要解决此问题，请尝试在嵌套列表框中设置属性 IsHitTestVisible="False"，所以它应该是这样的：

```
 <ListBox IsHitTestVisible="False" Grid.Column="1" ScrollViewer.VerticalScrollBarVisibility="Disabled" >
                                        <ListBox.ItemContainerStyle>
                                            <Style TargetType="ListBoxItem">
                                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                            </Style>
                                        </ListBox.ItemContainerStyle>
                                        <TextBlock  x:Name="TextBlockTitle" Margin="0,0,0,0" FontSize="26" FontFamily="Segoe WP Semilight"  Foreground="{Binding TitleColor}" TextTrimming="WordEllipsis" TextWrapping="Wrap" Width="Auto" Height="auto" MaxHeight="96" VerticalAlignment="Top"  FontWeight="{Binding Font}" Text="{Binding NewsTitle}" />
                                        <TextBlock x:Name="TextBlockBody" Margin="0,0,0,0" FontSize="26" FontFamily="Segoe WP Semilight" Foreground="#FF5C5A5A" TextTrimming="WordEllipsis" TextWrapping="Wrap" Width="Auto" Height="auto" MaxHeight="100" VerticalAlignment="Top" Text="{Binding NewsBody}" FontWeight="{Binding Font}"/>
                                    </ListBox> 
```

# string - 在 Metro/C++ 中通过引用传递字符串？

> ID：10313072
> 
> 赞同：1
> 
> 时间：2012-04-25T09:41:22.097
> 
> 标签：string, reference, c++-cli, microsoft-metro

我正在开发一个 C++ Metro 风格的应用程序，并且必须通过引用（以某种方式）传递一个字符串。起初，我传递了不起作用的 String^，因为我发现字符串是不可变的。

通过引用传递字符串的正确方法是什么？

编辑：好的，这似乎并不容易，因为答案和评论建议使用返回值。但据我认为这不适用于我的情况：在这个 Metro 应用程序中，我有两个页面，并且应该在这两个页面之间“共享”一个字符串。
因此，在主页中，我在单击事件中执行此操作：
`this->Frame->Navigate(newPage, this->TestString);`

在第二页的 OnNavigatedTo 事件中，我将第二个参数转换为 String^ 并更改它。然后我使用`this->Frame->GoBack()`导航回到第一页。我想在那里访问更改后的字符串。不幸的是，据我所知，GoBack() 不允许传递任何参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T10:01:21.400

您可以使用跟踪参考：

```
void ModifyTheParameter(String^% value) {
    value = gcnew String("Blah");
} 
```

这将修改您作为参数传入的原始变量（[有关更多信息和示例，请参阅 MSDN](http://msdn.microsoft.com/en-us/library/6f63s5b1.aspx)）。然后它将像其他任何带`String^`参数的方法一样使用。

但如果可能，请避免使用跟踪引用作为参数。我建议只返回 a`String^`并将其分配给原始变量。

还有另一种可能性：您可以创建某种与视图无关的数据模型，其中包含您的字符串（可能还有您使用的其他数据）。然后，您可以将该 DataModel 传递给您的方法。由于 DataModel 变量没有改变（只是它的一个属性），因此您不需要传递对它的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:54:08.310

请参见下面的函数示例，该函数`f`将 a 的引用作为参数`std::string`。

```
std::string someString;

void f(std::string& s);

f(someString); 
```

# c++ - 性能 stringbuf 与字符串

> ID：10313076
> 
> 赞同：6
> 
> 时间：2012-04-25T09:41:59.227
> 
> 标签：c++, string

当我们必须使用字符串操作时，std::string 和 std::stringbuf 之间是否存在显着的性能差异，如果是，为什么。

更一般地说，什么时候最好使用 std::stringbuf 而不是 std::string ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T09:44:33.393

A`std::stringbuf`在内部使用字符串来缓冲数据，因此它可能会慢一些。我认为差异不会很大，因为它基本上只是授权。不过，为了确保您必须运行一些性能测试。

`std::stringbuf`当您希望 IO-stream 使用字符串作为缓冲区（如`std::stringstream`，`std::stringbuf`默认使用 a ）时很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T18:14:50.793

首先，a`std::stringbuf`不一定（*甚至*通常）使用 an`std::string`作为其内部存储。例如，该标准描述了`std::string`如下的初始化：

> 构造类 basic_stringbuf 的对象...然后将 str 的内容复制到 basic_stringbuf 底层字符序列 [...]

注意措辞：“字符序列”——至少对我来说，这似乎非常小心，以避免说（甚至暗示）内容应该存储在实际的字符串中。

过去，我认为效率可能是一个红鲱鱼。它们都是相当薄的包装器，用于管理动态分配的某种字符序列的缓冲区。功能上有很大的不同（例如，`string`在字符串中间有很多搜索和插入/删除，而`stringbuf`. `stringbuf`鉴于其目的，在诸如 a 之类的东西之上实现可能是有意义的`std::deque`，以优化末端插入/删除的（通常）路径，但这对于大多数用途来说可能是微不足道的。

如果我这样做，我可能最担心的`stringbuf`是可能只与支持。`stringstream``stringstream`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T15:04:45.087

`std::stringbuf`扩展`std::string`容器，用于读取和写入`std::string`.

`std::string`通常，和之间没有显着的性能差异`std::stringbuf`。

因为`std::streambuf`<- `std::stringbuf`，都是因为：

```
typedef basic_stringbuf<char> stringbuf;    
typedef basic_string<char> string; 
```

阅读[本文](http://www.cplusplus.com/reference/sstream/stringbuf/)了解更多详情。

# linux - 内核源——在哪个文件中定义了 brk()

> ID：10313078
> 
> 赞同：0
> 
> 时间：2012-04-25T09:42:14.717
> 
> 标签：linux, kernel, brk

我想知道在内核源代码版本 >= 2.6 中`brk`定义的位置。那是哪个c文件包含它的定义？`grep`没有透露太多。也在`sbrk`glibc中实现正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:44:43.970

它在`mmap.c`。寻找：

```
SYSCALL_DEFINE1(brk, unsigned long, brk) 
```

手册页说：

> 在 Linux 上，sbrk() 被实现为一个使用 brk() 系统调用的库函数，并进行一些内部记账以便它可以返回旧的中断值。

# python - 从python中的列表中删除多个“类”

> ID：10313085
> 
> 赞同：0
> 
> 时间：2012-04-25T09:42:54.547
> 
> 标签：python, list, duplicates

我有

```
class rel:
   child=''
   parent=''
listPar=[] 
```

在 listPar 我有这些课程的列表（对不起，我不确定它是否被称为 class，是吗？）所以在 listPar 我有例如： room book ; 书名 ; 房间书；书名

现在我试图删除所有非唯一的事件，所以我只想

房本；listPar 中的书名

假设我有以下代码：

```
variable="Book"
variable2="Author"
toIns=rel()
toIns.parent=variable 
toIns.child=variable2 
listPar.append(toIns) 

toIns2=rel()
toIns2.parent=variable
toIns2.child=variable2 
listPar.append(toIns2) 
```

现在如何删除所有重复项？（结果->

```
for elem in listPar:
    print "child:",elem.child,"parent:",elem.parent

#child:author, parent:book 
```

我已经尝试了几件事，但它们似乎都没有完全起作用..你能帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:46:18.523

我假设您在那里提供的课程不是实际的课程（因为它毫无价值），但是您在这里做的最简单的事情 - 假设您的元素的顺序对您来说并不重要，是将您的列表设置为一组，这将删除所有重复项。

```
>>> a = ["test", "test", "something", "else"]
>>> a
['test', 'test', 'something', 'else']
>>> set(a)
{'test', 'something', 'else'} 
```

这里我使用了字符串，但您可以使用任何提供相等运算符和散列函数的类。相等函数用于检查两个类是否相同（对于自定义类，您需要定义它），并且哈希用于使集合非常有效。给出相同哈希的两个类*必须*相同。您可以有两个具有相同哈希但不相同的类（它将回退到相等运算符），但是这种情况发生得越多，它就会越慢。通常，使用您用来检查相等性的类的组件的哈希总和是生成体面哈希的好方法。

因此，例如：

```
class Book:
    def __init__(self, title, author):
        self.title = title
        self.author = author

    def __eq__(self, other):
        return self.title == other.title and self.author == other.author

    def __hash__(self):
        return hash(self.title)+hash(self.author)

    def __repr__(self):
        return "Book("+repr(self.title)+", "+repr(self.author)+")" 
```

我们可以像以前一样使用这个类。

```
>>> a = [Book("Some Book", "Some Guy"), Book("Some Book", "Some Guy"), Book("Some Other Book", "Some Other Guy")]
>>> a
[Book('Some Book', 'Some Guy'), Book('Some Book', 'Some Guy'), Book('Some Other Book', 'Some Other Guy')]
>>> set(a)
{Book('Some Other Book', 'Some Other Guy'), Book('Some Book', 'Some Guy')} 
```

如果您确实关心元素的顺序，即使在删除重复项之后，您也可以这样做：

```
def remove_duplicates_preserving_order(seq):
    seen = set()
    return [ x for x in seq if x not in seen and not seen.add(x)] 
```

这通过稍微修改字典理解来工作 -`set.add()`总是返回 0，所以你可以检查它是否为假（它总是会）以将元素添加到集合中。

# 编辑更新：

请注意，[PEP-8](http://www.python.org/dev/peps/pep-0008/)建议使用`CapWords`for 类和`lowercase_with_underscores`本地变量。

您似乎对 Python 类的工作方式存在误解。这个类没有多大意义，因为这些都是类属性，而不是实例属性。这意味着它们对于类的所有实例都是相同的，这不是您想要的。这意味着当您第二次更改它们时，您将为所有实例更改它，使它们都相同。

要创建实例变量（您想要的类型），您需要在构造函数 ( `__init__()`) 中创建它们 - 检查我的示例类以了解它是如何工作的。完成此操作后，您需要实现`__eq__()`和`__hash__()` 函数，以便 Python 知道类中的两项相等意味着什么。然后，您可以使用我上面描述的方法（一组或我提供的函数）来删除重复项。

请注意，如果这就是您希望对数据执行的全部操作，那么类可能会过大。如果你总是有两个项目，你可以只使用一个元组：

```
>>> a = [("Book", "Author"), ("Book", "Author"), ("OtherBook", "OtherAuthor")] 
>>> set(a)
{('Book', 'Author'), ('OtherBook', 'OtherAuthor')} 
```

由于元组已经将相等定义为它们部分的总和。

总的来说，你似乎缺乏对 Python 中类的构造和使用方式的理解——我建议你先阅读并学习如何使用它们，因为不这样做会给你带来很多问题。

# c# - 在 Telerik Grid 中显示日期而不是 DateTime

> ID：10313086
> 
> 赞同：5
> 
> 时间：2012-04-25T09:42:58.183
> 
> 标签：c#, asp.net-mvc-3, datetime, telerik-grid

我在我的 Asp.Net MVC3 应用程序中使用 Telerik 网格，我想将格式为 dd/mm/yyyy 的日期绑定到网格的列之一，如下所示：

```
Html.Telerik().Grid<TestResults>()
    .Name("TestResultGrid")
    .DataKeys(keys => keys.Add(c => c.SourceProgramId))
    .Columns(columns =>
        {
            columns.Bound(c => c.OriginalSourceProgramId).Title("Original Case ID").Width("90").Visible(IsOriginalCaseIdVisible);
            columns.Bound(c => c.SourceProgramId).Title("Source Program ID").Width  ("90").Visible(!IsOriginalCaseIdVisible);
           columns.Bound(c => c.Name).Title("Name").Width("140");
            columns.Bound(c => c.Points).Title("Points").Width("50");
            columns.Bound(c => c.ProgramName).Title("Program").Width("80");
            columns.Bound(c => c.DOB).Title("Created Date").Width("80");
        })
    .DataBinding(dataBinding =>
            dataBinding.Ajax()
                .Select("_TestResutls", "Test"))
    .ClientEvents(events => events
    .OnDataBinding("Grid_onDataBinding")
    .OnDataBound("Grid_onDataBound")
    .OnRowDataBound("onRowDataBound")
    .OnRowSelect("onRowSelected"))
    .Pageable(paging => paging.PageSize(10))
    .NoRecordsTemplate("<b>No Records to display.<b>")
    .Sortable()
    .Selectable()
    .HtmlAttributes(new { @class = "grid_table" })
    .Footer(true)
    .Render(); 
```

DOB 的数据类型是 DateTime?。我想显示 dd/mm/yyyy 格式的日期。我本可以将其转换为 ToString() 来实现这一点，但我在此列上进行了排序。当我按此列排序时，它将值视为字符串并且不返回预期结果。该列可以为空，因此我也不能使用 DOB.Date 方法。有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T09:52:18.963

你应该可以做 columns.Bound(c => c.DOB).Format("{0:dd/MM/yyyy}").Title("Created Date").Width("80");

希望有帮助

# java - // 格式化java源码注释--------------------------------

> ID：10313088
> 
> 赞同：1
> 
> 时间：2012-04-25T09:42:59.800
> 
> 标签：java, eclipse, eclipse-plugin, comments

我在 Java 和 C 代码中使用并且已经看到使用了分隔符注释，如下所示：

```
// fields used in configuration ---------------------------
int a = 0; 
etc

// fields used for authentication process -----------------
String principalID = "";
etc 
```

它有助于提高可读性（无论如何是 IMO）和重构。我曾经-使用jalopy将----延长到行尾，但是这几年似乎已经落伍了，我找不到如何配置eclipse来做到这一点。

在我编写 sed 脚本之前，是否有人有他们使用的进程或插件（我使用的是 java，所以 eclipse 配置是理想的，但如果需要，我会使用其他工具）？（没有意义重新发明轮子！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:56:15.213

我认为这应该可以解决问题：

转到 Eclipse 的首选项 --> Java --> 代码样式 --> 代码模板

然后，您应该能够根据需要配置评论外观

# php - [JQUERY][PHP] AJAX 请求返回 OK 但出错

> ID：10313093
> 
> 赞同：0
> 
> 时间：2012-04-25T09:43:09.217
> 
> 标签：php, jquery

我试图让 JQUERY 和 PHP 以一些奇怪的结果进行通信

这是JQuery

```
$.ajax({
 type : "GET",
 url : "background.php",
 dataType: 'json',
 success : function(response){
  alert("OK: " + immagini);
 },
 error: function(xhr, ajaxOptions, thrownError){
  eval('var immagini = xhr.responseText');
  alert("CODE: " + xhr.status);
  alert("ERROR: " + immagini + "\n\n\nTIPO: " + typeof immagini);
 }
}); 
```

这是PHP

```
<?php
 include "amministrazione/config.php";
 include "amministrazione/database.php";
 header("Content-type: application/json");
 $db = new DB($db_server,$db_name,$db_user,$db_pass);
 echo $db->loadBackgroundImages();
?> 
```

最后是我从 PHP 函数构建的答案

```
{'immagini':[{'image': 'gallery/alto.jpg'},{'image': 'gallery/esterno.jpg'},{'image': 'gallery/gelateria.jpg'},{'image': 'gallery/vitelli.jpg'}]}; 
```

奇怪的是，即使代码是 200，Jquery 也会出现在错误处理程序中......我该如何解决这个问题？

这不应该是跨域问题，因为它们在 EasyPHP 上的同一目录中，还是我错了？

非常感谢，

蒂维兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:03:58.077

在您的json中将单引号更改为双引号

```
{"immagini":[{"image": "gallery/alto.jpg"},{"image": "gallery/esterno.jpg"},{"image": "gallery/gelateria.jpg"},{"image": "gallery/vitelli.jpg"}]} 
```

# jquery - 如何在 jquery mobile 的另一个页面中使用页面 ID 获取列表视图 ID？

> ID：10313095
> 
> 赞同：2
> 
> 时间：2012-04-25T09:43:17.220
> 
> 标签：jquery, jquery-mobile

我正在开发 jquery mobile。如何获取位于第 2 页的 listview 的 id？我需要使用第 1 页中的列表视图单击事件。

# php - 来自 URL 的 PHP 会话变量

> ID：10313100
> 
> 赞同：0
> 
> 时间：2012-04-25T09:43:24.127
> 
> 标签：php, session, mobile

我不熟悉 PHP 会话变量或它们的工作原理，但我正在开发一个有移动对应的网站。在移动网站（由另一家公司开发）上，有一个链接可以转到使用以“？mobile=false”结尾的 URL 的完整网站，我只是想知道如何使用它来允许移动用户访问完整的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:45:33.840

您可以使用 $_GET['mobile'] 访问此 URI 部分，此时它将为 false。顺便说一句。这不是会话变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:52:44.353

在您的入口点中添加这样的内容：

```
if (isset($_GET['mobile']) && $_GET['mobile'] == 'false')
{
    session_start(); // If you haven't done so already
    $_SESSION['ShowFullSite'] = true;
} 
```

然后你可以在之后检查，`$_SESSION['ShowFullSite']`只要会话存在，它就会被设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:48:09.730

我认为你应该像其他开发一样使用 Cookie，而不是 Session。 [单击此处](http://php.net/manual/en/function.setcookie.php)获取文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T09:51:24.197

您可以在第一页中使用 $_GET['mobile'] 获取参数，并在该页面中设置会话变量，然后在其他页面中使用它。要设置会话，您需要先启动会话。session_start(); 然后设置 $_SESSION['mobile']=false; 您可以通过 if($_SESSION['mobile']){ } 签入页面来清除会话，您可以使用 session_unset();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T09:56:14.070

如果我理解，你有两个不同的网站，那么如果你想重定向你的用户，你必须在你的移动网站的索引中添加这样的东西：

```
 if (isset($_GET['mobile']) && $_GET['mobile'] == 'false'))
       header('Location: http://www.myfullsite.com/'); 
```

# c# - Mono.CSharp（编译器即服务）在 2.10 版中的更改

> ID：10313104
> 
> 赞同：1
> 
> 时间：2012-04-25T09:43:46.730
> 
> 标签：c#, mono, compiler-as-a-service, dmcs

我在 Ubuntu 11.10 上运行 Mono 2.10 版。我正在尝试运行[http://blog.davidebbo.com/2012/02/quick-fun-with-monos-csharp-compiler-as.html](http://blog.davidebbo.com/2012/02/quick-fun-with-monos-csharp-compiler-as.html)上提供的示例，但它似乎针对的是不同版本的单声道。例如 Compile 是 Evaluator 上的静态方法。我对他的样本进行了以下更改，但没有得到它的工作。任何人都可以提供正确的更改吗？有人知道是否有关于 Mono.CSharp 的 API 更改的任何信息吗？我的编译器报告的版本如下：

```
$ dmcs --version
Mono C# compiler version 2.10.5.0 
```

我使用此命令行编译了以下代码：

dmcs -r:Mono.CSharp Sample.cs

并在编译时收到此警告。

```
dmcs -r:Mono.CSharp Sample.cs
Sample.cs(26,17): warning CS0219: The variable `compiledMethod' is assigned but its value is never used
Compilation succeeded - 1 warning(s) 
```

这是运行代码的结果：

```
$ ./Sample.exe 
{interactive}(2,40): error CS1525: Unexpected symbol `namespace', expecting `end-of-file' or `using'
{interactive}(4,70): error CS0101: The namespace `UserCode' already contains a definition for `Foo'
{interactive}(4,70): (Location of the symbol related to previous error) 
```

这是我到目前为止的代码：

```
using System;
using System.IO;
using Mono.CSharp;
using System.Reflection;

namespace Sample
{
    public interface IFoo { string Bar(string s); }

    class Program
    {
        const string code = @"
            using System;
            namespace UserCode
            {
                public class Foo : Sample.IFoo
                {
                    public string Bar(string s) { return s.ToUpper(); }
                }
            }
        ";

        static void Main(string[] args)
        {
            Mono.CSharp.Evaluator.Init(new string[] {} );
            Evaluator.ReferenceAssembly(Assembly.GetExecutingAssembly());

            var compiledMethod = Evaluator.Compile(code);

            for (;;)
            {
                string line = Console.ReadLine();
                if (line == null) break;

                object result;
                bool result_set;
                Evaluator.Evaluate(line, out result, out result_set);
                if (result_set) Console.WriteLine(result);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:02:41.870

Mono 2.10 带有仅支持表达式和语句的 Evaluator。您的代码包含 Mono 2.10 不支持的类型声明。

Mono 2.11 或 git master Mono.CSharp 支持类型声明和其他高级功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:57:11.383

据此：[http](http://www.mono-project.com/Release_Notes_Mono_2.12#Instance_API) ://www.mono-project.com/Release_Notes_Mono_2.12#Instance_API ，静态/全局评估器是较旧的 API，而实例 API 是较新的。我拥有的 Mono 是当前的稳定版本（2.10），2.11 版本附带的 Mono.CSharp 具有实例方法。2.12 看起来还没有发布。

以下是编译器即服务的实例 API 的另一个提及：http: [//tirania.org/blog/archive/2011/Oct-14.html](http://tirania.org/blog/archive/2011/Oct-14.html)

# java - 如何从java方法返回多个值到java脚本？

> ID：10313111
> 
> 赞同：-3
> 
> 时间：2012-04-25T09:44:05.917
> 
> 标签：java, javascript

我想从java方法返回两个值到java脚本..你能帮我吗.?? 将不胜感激帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:59:13.243

我会

```
int[] ret = { a, b }; 
return ret; 
```

或者

```
return new int[] { a, b }; 
```

来自爪哇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:47:22.470

Java 不允许从一个方法返回多个值。您要么必须将要返回的值打包到某个包装对象（可能是您自己编写的）中，要么 - 如果它们共享一个公共类型 - 打包到某个集合/列表/数组中。

有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/7470861/return-multiple-values-from-a-java-method-no-standard-yet)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:47:39.467

要从一种方法返回两个值，您必须将结果封装到一个 Object 中。该对象可以像长度为 2 的数组或 any 一样简单`Collection`。

您也可以编写自己的返回类型并从您的方法中返回，例如：

```
public class MyReturnType {
    private Type1 returnedObject1;
    private Type2 returnedObject2;
    // getters and setters
} 
```

# android - 需要很长时间才能在设备中显示 epub 文件

> ID：10313113
> 
> 赞同：1
> 
> 时间：2012-04-25T09:44:10.583
> 
> 标签：android, epub

我们正在通过我们的应用程序在屏幕上显示一个 epub 文件。该文件保存在 SDCard 中，我们使用以下逻辑从 SDCard 获取文件数据并显示在 Screen 中。但是在屏幕上加载内容需要很长时间。我的代码有问题吗？请帮助我的朋友。

```
 File rootDir = Environment.getExternalStorageDirectory();
   EpubReader epubReader = new EpubReader();
   try {
        book = epubReader.readEpub(new FileInputStream("/sdcard/forbook.epub"));
        Toast.makeText(getApplicationContext(), "Book : " + book, Toast.LENGTH_LONG).show();
    } catch (FileNotFoundException e) {
        Toast.makeText(getApplicationContext(), "File Not Found" + book, Toast.LENGTH_LONG).show();
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), "IO Found" + book, Toast.LENGTH_LONG).show();
        e.printStackTrace();
    }
   Spine spine = book.getSpine(); 
   List<SpineReference> spineList = spine.getSpineReferences() ;
   int count = spineList.size();
   StringBuilder string = new StringBuilder();
   String linez = null;
    for (int i = 0; count > i; i++) {
       Resource res = spine.getResource(i);

       try {
           InputStream is = res.getInputStream();
           BufferedReader reader = new BufferedReader(new InputStreamReader(is));
           try {
               String line;
            while ((line = reader.readLine()) != null) {
                   linez =   string.append(line + "\n").toString();
                    //linez=line.toString();
               }

           } catch (IOException e) {e.printStackTrace();}

           //do something with stream
       } catch (IOException e) {
           e.printStackTrace();
       }

   }
  final String mimeType = "text/html";
  final String encoding = "UTF-8";
  webView.loadDataWithBaseURL("", linez, mimeType, encoding,null);

} 
```

请朋友们帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:20:11.217

首先，您没有`StringBuilder`正确使用 - 它在您的代码中毫无用处。其次，确定您是否真的需要嵌套的 try-catch 块。第三，在循环外定义局部变量。关于所有这些，我会以这种方式重写您的代码：

```
 StringBuilder string = new StringBuilder();
    Resource res;
    InputStream is;
    BufferedReader reader;
    String line;
    for (int i = 0; count > i; i++) {
        res = spine.getResource(i);
        try {
            is = res.getInputStream();
            reader = new BufferedReader(new InputStreamReader(is));
            while ((line = reader.readLine()) != null) {
                string.append(line + "\n");
            }

            // do something with stream
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    ...
    webView.loadDataWithBaseURL("", string.toString(), mimeType, encoding, null); 
```

但是，我想这不会大大减少加载内容所需的时间，因此我建议您使用[Traceview](http://developer.android.com/guide/developing/debugging/debugging-tracing.html)来查找代码中的瓶颈并[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)用于耗时的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T09:01:47.080

ePub 本质上只不过是一个包含许多 HTML 文件的 zip 文件。通常，本书的每一章/节都会有一个文件（资源）。

您现在正在做的是遍历书脊，加载所有资源，当您一次最多可以在屏幕上显示 1 时。

我建议只加载您要显示的资源，这应该会大大加快加载时间。

# php - 使用php将html转换为pdf文件

> ID：10313114
> 
> 赞同：0
> 
> 时间：2012-04-25T09:44:13.327
> 
> 标签：php, html, pdf, fpdf

我需要将 html 收据转换为 pdf 文件。在 html 文件中我也有 php 信息。我怎么能提供这样的东西？你能建议我用代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:49:44.003

这将是一个列表问题，但我们已经按照@skippy 的建议使用了 DOMPDF，并拒绝了它，因为当表格超过页面时，它是一个真正的麻烦制造者。

我们已移至[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)，这在我看来更好。它被用于生产环境，每天发送大量 pdf。它使用 webkit 渲染引擎（你知道，chrome 使用的引擎），因此非常棒:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:46:50.477

你看过[DOMPDF](http://code.google.com/p/dompdf/)项目吗？它简直是摇滚...

如果这还不够，您可能需要浏览 StackOverflow 本身：

[使用 PHP 将 HTML + CSS 转换为 PDF？](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:47:06.710

尝试使用它自动将 html 转换为 pdf：

[www.tcpdf.org](http://www.tcpdf.org)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T09:49:05.463

尝试这个

[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

它就像一个魅力。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T18:34:45.210

我的公司有一个名为 DocRaptor 的产品，它使用 HTTP POST 请求将 HTML 转换为 PDF。

DocRaptor 是使用 Prince 构建的，并产生比类似程序更高质量的结果。

这是 DocRaptor 主页的链接：

[猛禽博士](http://docraptor.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-13T13:03:49.520

我使用这个代码没有必要安装任何东西。 [http://sourceforge.net/projects/html2fpdf/](http://sourceforge.net/projects/html2fpdf/) _

# c++ - 加载只有 alpha 值的纹理

> ID：10313118
> 
> 赞同：0
> 
> 时间：2012-04-25T09:44:30.573
> 
> 标签：c++, opengl, textures

我有 3D 数据表示 alpha 值，我如何才能将其加载到只有 alpa 值的 3D 纹理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:09:11.677

使用单通道纹理格式。对于 <=OpenGL-2.1，这将是 GL_ALPHA。从 OpenGL-3 开始，您将使用 GL_R 和将 r 分量传递给输出片段 alpha 通道的着色器

# objective-c - 显示 NSMutableAttributedString

> ID：10313120
> 
> 赞同：2
> 
> 时间：2012-04-25T09:44:37.777
> 
> 标签：objective-c, ios, ios4

我的应用程序中有以下代码

```
NSMutableAttributedString * string = [[NSMutableAttributedString alloc] initWithString:self.myDisplayTxt];
      [string addAttribute:(NSString*)kCTForegroundColorAttributeName 
                     value:(id)[[UIColor redColor] CGColor]
                     range:NSMakeRange(0,5)];

    self.myTextView.text = string; 
```

将 NSMutableAttributedString 分配给 UITextView 时，出现以下错误：

> 不兼容的目标 c 类型 struct NSMutableAttributedString 预期的 struct nsstring

所以请告诉我，如何在 UITextView 中显示 NSMutableAttributedString。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:21:22.140

您可以尝试使用一些库来做到这一点。正如 omz 所写，不幸的是 UITextView 并不支持`NSAttributedString`.

也许这个可以帮助你：[https ://github.com/enormego/EGOTextView](https://github.com/enormego/EGOTextView)

他们对这个库的评价如下：

> UITextView 替换为对 NSAttributedString 的额外支持。

**更新：**根据您在评论中对 omz 答案的澄清，您可以在此处查看： [Underline text inside uitextview](https://stackoverflow.com/questions/10309609/underline-text-inside-uitextview)

**更新 2：**在**iOS 6**中，您可以使用开箱即用的 NSAttributedString。例如像这样：

```
UIColor *_red=[UIColor redColor];
UIFont *font=[UIFont fontWithName:@"Helvetica-Bold" size:72.0f];
[attString addAttribute:NSFontAttributeName value:font range:NSMakeRange(0, _stringLength)];
[attString addAttribute:NSStrokeColorAttributeName value:_red range:NSMakeRange(0, _stringLength)];
[attString addAttribute:NSStrokeWidthAttributeName value:[NSNumber numberWithFloat:-3.0] range:NSMakeRange(0, _stringLength)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:51:00.363

你不能，`UITextView`不支持属性字符串。如果您真的只想使用属性字符串来设置前景色（如您的示例中所示），您可以通过设置文本视图的`textColor`属性来实现相同的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T11:16:32.300

您应该通过属性分配属性字符串`UITextView.attributedText`。`UITextView.text`仅接受`NSString`或纯文本。

```
textView.attributedText = attributedString; 
```

请参阅文档：

[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextView_Class/index.html#//apple_ref/occ/instp/UITextView/attributedText](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextView_Class/index.html#//apple_ref/occ/instp/UITextView/attributedText)

# emacs - 哪个变量控制“瞬态标记模式”的颜色？

> ID：10313126
> 
> 赞同：7
> 
> 时间：2012-04-25T09:44:50.553
> 
> 标签：emacs

瞬态标记的颜色是轻微的灰色阴影，几乎看不到。哪个变量设置该颜色？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T09:49:26.233

采用`M-x customize-face region`

# java - Java 泛型：兼容的服务子类

> ID：10313128
> 
> 赞同：1
> 
> 时间：2012-04-25T09:45:14.213
> 
> 标签：java, generics, inheritance

我需要一个返回兼容服务的服务查找方法。这些特定服务是同一个泛型超类的（非泛型）子类，我想使用泛型来确保兼容性。

课程：

*   `class BaseDTO`
*   `class AaaDTO extends BaseDTO`
*   `class BbbDTO extends BaseDTO`
*   `interface BaseService<T extends BaseDTO>`
*   `interface AaaService extends BaseService<AaaDTO>`
*   `interface BbbService extends BaseService<BbbDTO>`

我必须将哪些泛型定义放入下面解析器类的占位符中？我想表达的是`resolve()`返回一个与给定对象兼容的服务实现。

```
public class Resolver {
    @Autowired private AaaService aaaService;
    @Autowired private BbbService bbbService;

    public <T ???> BaseService<???> resolve(T object) {
        if (object instanceof AaaDTO) {
            return (???) aaaService;
        } else if (object instanceof BbbDTO) {
            return (???) bbbService;
        } else {
            throw new IllegalArgumentException();
        }
    }
} 
```

简单地说我想告诉编译器以下是安全的：

```
BaseDTO dto = getDtoFromSomewhereElse();
resolver.resolve(dto).foo(dto); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:07:09.843

如果您的方法 foo 定义`BaseService`如下：

```
public void foo(BaseDTO dto); 
```

您可以执行以下操作：

```
 public <T extends BaseDTO> BaseService<T> resolve(T object) {
        if (object instanceof AaaDTO) {
            return (BaseService<T>) aaaService;
        } else if (object instanceof BbbDTO) {
            return (BaseService<T>) bbbService;
        } else {
            throw new IllegalArgumentException();
        }
    } 
```

# jquery - 使用 Rails 和 jQuery 渐变动画显示不同宽度的图像列表的最佳方法是什么？

> ID：10313131
> 
> 赞同：1
> 
> 时间：2012-04-25T09:45:24.417
> 
> 标签：jquery, ruby-on-rails

在我的网站上，在每一页的底部，我都有一组图像。该集合在 7.5 秒后淡入另一个集合。

问题是图像可以有不同的宽度，我需要根据每个图像的宽度计算出每个集合中要放入多少个图像。

我的网站总共有 960 像素宽，每张图片都需要有一个右侧边距，比如 15 像素。所以，如果我有 7 个图像的集合（假设集合中的最后一个图像没有右边距），我正在查看 870 像素的总允许宽度。

我可以检索每个图像的宽度，所以现在我需要一种方法将它们放在一个集合中，该集合具有自己的 div 和 id，以便我使用 jQuery 获取和淡出。

以下代码适用于相同宽度的图像。

JS：

```
<% @logo_group_size = 7 %>
<script type="text/javascript">
  <% unless (@logos || Logo.order(:position)).empty? %>
    var logo_sets = [<%= (@logos || Logo.order(:position)).in_groups_of(@logo_group_size, false).collect{|x| (@logos || Logo.order(:position)).in_groups_of(@logo_group_size, false).index(x)}.join(', ') %>];
    var logo_sets_max = <%= (@logos || Logo.order(:position)).in_groups_of(@logo_group_size, false).length - 1 %>;
    var logo_set_index = 0;
    function fadeLogoSets() {
      $("#logo_set_" + logo_sets[logo_set_index]).fadeOut();
      if (logo_set_index < logo_sets_max) { logo_set_index += 1; } else { logo_set_index = 0; }
      $("#logo_set_" + logo_sets[logo_set_index]).fadeIn();
      setTimeout("fadeLogoSets()" , 7500);
    }
    $(document).ready(function() {
      setTimeout("fadeLogoSets()", 7500);
    });
  <% end %>
</script> 
```

看法：

```
<% unless (@logos || Logo.order(:position)).empty? %>
  <% maximum_width = (960 - ((@logo_group_size - 1) * 15)) %>
  <div class="logos">
    <h2>Logos</h2>
    <% (@logos || Logo.order(:position)).in_groups_of(@logo_group_size, false).each_with_index do |logo_set, index| %>
      <% set_width = 0 %>
      <%= content_tag(:div, :id => "logo_set_#{index}", :style => (index.zero? ? "display: block;" : "display: none;")) do %>
        <% logo_set.each_with_index do |logo, index| %>
          <% set_width += MiniMagick::Image.open(("http://#{request.env["HTTP_HOST"]}" + logo.image.home.to_s))["width"].to_i %>
          <% image_options = {} %>
          <% image_options.merge!({:style => "margin-right: 0px;"}) if index == (@logo_group_size - 1) %>
          <% if logo.link.blank? %>
            <%= image_tag(logo.image.home, image_options) %>
          <% else %>
            <%= link_to(image_tag(logo.image.home, image_options), logo.link, {:target => "_blank"}) %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  </div>
<% end %> 
```

我确实理解这个问题有些主观。

# c#-3.0 - 在 .NET 3.0 中查询集合

> ID：10313139
> 
> 赞同：0
> 
> 时间：2012-04-25T09:45:44.930
> 
> 标签：c#-3.0

我正在开发一个针对 .NET framework 3.0 的应用程序。我需要查询对象列表。不幸的是，LINQ 不能使用，因为它是 3.0 。任何人都可以提供一种有效的方法吗？

# javascript - Javascript：捕获鼠标滚轮事件并且不滚动页面？

> ID：10313142
> 
> 赞同：31
> 
> 时间：2012-04-25T09:45:55.803
> 
> 标签：javascript, scroll, mouse, mousewheel

我试图防止页面元素捕获的鼠标滚轮事件导致滚动。

我希望`false`作为最后一个参数有预期的结果，但是在这个“画布”元素上使用鼠标滚轮仍然会导致滚动：

```
this.canvas.addEventListener('mousewheel', function(event) {
   mouseController.wheel(event);
}, false); 
```

在这个“画布”元素之外，需要进行滚动。在内部，它必须只触发该`.wheel()`方法。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-25T09:48:37.827

您可以通过`false`在处理程序 (OG) 结束时返回来执行此操作。

```
this.canvas.addEventListener('wheel',function(event){
    mouseController.wheel(event);
    return false; 
}, false); 
```

或使用`event.preventDefault()`

```
this.canvas.addEventListener('wheel',function(event){
    mouseController.wheel(event);
    event.preventDefault();
}, false); 
```

如评论中所指出的，更新为使用现代浏览器不推荐使用的`wheel`事件。`mousewheel`

问题是关于防止滚动不提供正确的事件，因此请检查您的浏览器支持要求以选择适合您需要的事件。

使用更现代的方法选项第二次更新。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-25T09:47:08.643

您是否尝试过[`event.preventDefault()`](https://developer.mozilla.org/en/DOM/event.preventDefault)阻止事件的默认行为？

```
this.canvas.addEventListener('mousewheel',function(event){
    mouseController.wheel(event);
    event.preventDefault();
}, false); 
```

请记住，现在[`mouswheel`](https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel)不赞成使用[`wheel`](https://developer.mozilla.org/en-US/docs/Web/Events/wheel)，因此您应该使用

```
this.canvas.addEventListener('wheel',function(event){
    mouseController.wheel(event);
    event.preventDefault();
}, false); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-19T18:50:01.270

只是补充一下，我知道画布只是 HTML5，所以这不是必需的，但以防万一有人想要跨浏览器/旧浏览器兼容性，使用这个：

```
/* To attach the event: */
addEvent(el, ev, func) {
    if (el.addEventListener) {
        el.addEventListener(ev, func, false);
    } else if (el.attachEvent) {
        el.attachEvent("on" + ev, func);
    } else {
        el["on"+ev] = func; // Note that this line does not stack events. You must write you own stacker if you don't want overwrite the last event added of the same type. Btw, if you are going to have only one function for each event this is perfectly fine.
    }
}

/* To prevent the event: */
addEvent(this.canvas, "mousewheel", function(event) {
    if (!event) event = window.event;
    event.returnValue = false;
    if (event.preventDefault)event.preventDefault();
    return false;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T11:09:04.197

在较新的 Chrome >18 浏览器（可能还有其他基于 WebKit 的浏览器）中，这种取消似乎被忽略了。要专门捕获事件，您必须直接更改`onmousewheel`元素的方法。

```
this.canvas.onmousewheel = function(ev){
    //perform your own Event dispatching here
    return false;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-27T05:40:07.740

最后，在尝试了其他所有方法之后，这行得通：

```
 canvas.addEventListener('wheel', (event) => {

          // event.preventDefault(); Not Working
          // event.stopPropagation(); Not Working
          event.stopImmediatePropagation(); // WORKED!!

         console.log('Was default prevented? : ',event.defaultPrevented); // Says true 
    }, false) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-08T12:52:28.313

为了防止车轮事件，这对我有用 chrome -

```
this.canvas.addEventListener('wheel', function(event) {
    event.stopPropagation()
}, true); 
```

# c# - 在 BackgroundWorker 线程上创建 FlowDocument

> ID：10313143
> 
> 赞同：2
> 
> 时间：2012-04-25T09:45:56.773
> 
> 标签：c#, serialization, backgroundworker, flowdocument, xamlwriter

`FlowDocument`我需要从大量数据中动态生成一个。因为这个过程需要几分钟，我想在后台线程上执行操作而不是让 UI 挂起。

但是，我无法`FlowDocument`在非 UI 线程上生成，否则尝试插入矩形和图像会导致运行时错误，抱怨它不是 STA 线程。

StackOverflow 上有几个线程似乎涉及我遇到的相同问题：

*   [在后台进程中访问 WPF FlowDocument](https://stackoverflow.com/questions/6078187/accessing-a-wpf-flowdocument-in-a-background-process)

*   [WPF：在后台线程中加载 UI 是不可能的吗？](https://stackoverflow.com/questions/6977712/wpf-is-it-impossible-to-ui-load-in-background-thread)

在第一个链接中，有人提出以下建议：

> *“我会做什么：使用 a`XamlWriter`并将其序列`FlowDocument`化为`XDocument`. 序列化任务涉及`Dispatcher`，但是一旦完成，您可以根据需要对数据运行任意数量的古怪并行分析，并且 UI 中的任何内容都不会影响它。（同样，一旦它是一个`XDocument`你查询它`XPath`，这是一个非常好的锤子，只要你的问题实际上是钉子。）”*

有人可以详细说明作者的意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-10T14:13:28.333

对于任何未来的访问者，我都遇到了同样的问题，并通过这篇 [文章解决了所有问题](http://www.nbdtech.com/Blog/archive/2007/08/01/Passing-Wpf-Objects-Between-Threads-With-Source-Code.aspx)

最终做的是在后台线程上创建对象

```
 Thread loadingThread = new Thread(() =>
        {
            //Load the data
            var documant = LoadReport(ReportTypes.LoadOffer, model, pageWidth);

            MemoryStream stream = new MemoryStream();
            //Write the object in the memory stream
            XamlWriter.Save(documant, stream);
            //Move to the UI thread
            Dispatcher.BeginInvoke(
               DispatcherPriority.Normal,
               (Action<MemoryStream>)FinishedGenerating,
               stream);
        });

        // set the apartment state  
        loadingThread.SetApartmentState(ApartmentState.STA);

        // make the thread a background thread  
        loadingThread.IsBackground = true;

        // start the thread  
        loadingThread.Start(); 
```

然后将结果作为 xaml 写入内存流中，这样我们就可以在主线程中读回它

```
void FinishedGenerating(MemoryStream stream)
    {
        //Read the data from the memory steam
        stream.Seek(0, SeekOrigin.Begin);
        FlowDocument result = (FlowDocument)XamlReader.Load(stream);

        FlowDocumentScrollViewer = new FlowDocumentScrollViewer
        {
            Document = result
        };
    //your code... 
```

希望它可以节省其他人一些时间:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:02:29.503

虽然不能真正回答详细说明您引用的作者的含义，但也许这可以解决您的问题：如果您将自己连接到 Application.Idle 事件中，您可以在那里一个一个地构建您的 FlowDocument。此事件仍在 UI 线程中，因此您不会遇到后台工作人员中的问题。尽管你必须小心不要一次做太多的工作，否则你会阻止你的应用程序。如果可以将生成过程分成小块，则可以在此事件中逐个处理这些块。

# c# - ASP.NET 中的 P/Invoke（从 dll 读取/写入文本文件）

> ID：10313144
> 
> 赞同：1
> 
> 时间：2012-04-25T09:45:57.477
> 
> 标签：c#, c++, asp.net, pinvoke

我有一个`C++ Win32`正在编写和读取文本文件的程序。这个 C++ 程序生成一个 dll，我在我的 ASP.NET Web 应用程序中引用了这个 dll。
使用 P/Invoke，我正在调用从该 dll 读取和写入文件的方法。

当我在 WPF 应用程序中使用 P/invoke 对其进行测试时，该 dll 工作正常。引用 dll 位于`bin/Debug`此 WPF 应用程序的文件夹中，调用 dll 中的 write 方法会在同一文件夹中生成一个文本文件。此外，`from the same folder`我可以使用 dll 的 read 方法来读取文本文件。

但是，当我从我的 ASP.NET Web 应用程序调用 Dll 方法时，生成的文件会转到其他目录（很可能是因为 dll 被加载到其他地方执行），我无法找到生成的文件的位置（没有任何错误）

类似于桌面应用程序，是否有某种方式将 fie 写入 bin 文件夹本身，以便我可以从 bin 文件夹本身读取？

示例代码：
**.cpp 文件**

```
extern "C" D_API int Write1()
{
    ofstream myfile;
    myfile.open ("example.txt");
    myfile << "Writing this to a file.\n";
    myfile.close();
    return 1;
}

extern "C" D_API char* Read1()
{
    ifstream myReadFile;
    myReadFile.open("test.txt");
    char output[100];
    if (myReadFile.is_open())
    {
        while (!myReadFile.eof()) 
        {
        myReadFile >> output;       
        }
    }
    return output;
} 
```

**C# .aspx.cs**

```
[DllImport("Testing1.dll", EntryPoint = "fnTest", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
        public static extern int Write1();

        [DllImport("Testing1.dll", EntryPoint = "ReadTest", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
        public static extern StringBuilder Read1(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:05:24.817

由于您使用的是相对路径，因此该文件将相对于您调用本机代码时进程的工作目录。正如您所发现的，这是一个相当脆弱的安排。

我将通过向指定要使用的文件的完整路径的本机代码添加一个额外的字符串参数来解决这个问题。我敢肯定，您可以很容易地从您的托管代码中生成它。

**本机代码**

```
extern "C" D_API int WriteTest(char *filename)
{
    ....
    myfile.open(filename);
    ....
} 
```

**托管代码**

```
[DllImport("Testing1.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern int WriteTest(); 
```

* * *

另一点是您读取数据的功能不正确。它试图返回一个堆栈分配的缓冲区。您需要在托管代码中分配一个缓冲区，然后将其传递给本机代码。也许是这样的：

```
extern "C" D_API int ReadTest(char *filename, char* buffer, int len)
{
     //read no more than len characters from filename into buffer
} 
```

在托管方面：

```
[DllImport("Testing1.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern int ReadTest(string filename, StringBuilder buffer, int len);
....
StringBuilder buffer = new StringBuilder(100);
int retval = ReadTest(FullySpecifiedFileName, buffer, buffer.Capacity); 
```

# ruby - 在 ruby 中打印原始 http 标头

> ID：10313145
> 
> 赞同：2
> 
> 时间：2012-04-25T09:46:01.893
> 
> 标签：ruby

例如，在 shell 中，我可以使用 curl & do

```
curl -I http://google.com 
```

它会打印出原始的http头。这在红宝石中的替代品是什么？

问题是，如何`raw http headers`在 Ruby 中打印？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:49:58.710

```
require 'open-uri'
open("http://google.com"){|f| p f.meta } 
```

# xml - 根据文件内容向 xml 文件添加新节点

> ID：10313147
> 
> 赞同：1
> 
> 时间：2012-04-25T09:46:04.790
> 
> 标签：xml, xslt

我需要转换我的 xml 文件并根据我的 xml 文件的内容向其中添加一个新节点。例如我有：

```
<sheet name="Sheet1" num="1">
<row num="3">
<cell num="1">FP1152</cell>
<cell num="2">1039_2</cell>
<cell num="3">FP000234</cell>
</row>
<row num="4">
<cell num="1">RT1152</cell>
<cell num="2">1039_1</cell>
<cell num="3">GL000235</cell>
</row>
<row num="6">
<cell num="1">FP1152</cell>
<cell num="2">1039_1</cell>
<cell num="3">FP000234</cell>
</row>

</sheet> 
```

如果我在不同行中具有相同 num 属性值的单元格中具有相同的值，但在另一对单元格中具有不同的值（在我的示例中，它是具有 @num=3 和 @num=6 的行），我想添加一个像这样的标志：

```
<sheet name="Sheet1" num="1">
<flag type="ambiguousSuplier">true<flag>
    <row num="3">
    <cell num="1">FP1152</cell>
    <cell num="2">1039_2</cell>
    <cell num="3">FP000234</cell>
    </row>
    <row num="4">
    <cell num="1">RT1152</cell>
    <cell num="2">1039_1</cell>
    <cell num="3">GL000235</cell>
    </row>
    <row num="6">
    <cell num="1">FP1152</cell>
    <cell num="2">1039_1</cell>
    <cell num="3">FP000234</cell>
    </row>

    </sheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:36:23.363

如果特定工作表中的行按**@num**为 1 和 3 的单元格分组，那么我可以想到的一种方法是按一个键对这些单元格进行分组

```
<xsl:key 
 name="cells" 
 match="cell" 
 use="concat(../../@num, '|', ../cell[@num='1'], '|', ../cell[@num='3'], '|', @num)" /> 
```

这将通过它们的工作表编号查找单元格，以及同一行中的单元格 1 和 2。

然后，您需要检查工作**表**是否包含一个单元格，该单元格本身包含上述键中的匹配单元格但具有不同的值。这是通过以下令人讨厌的声明完成的

```
<xsl:template 
  match="sheet
    [row/cell
      [text() != 
      key('cells', 
        concat(../../@num, '|', ../cell[@num='1'], '|', ../cell[@num='3'], '|', @num))/text()]]"> 
```

因此，给定以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="cells" match="cell" use="concat(../../@num, '|', ../cell[@num='1'], '|', ../cell[@num='3'], '|', @num)" />

   <xsl:template match="sheet[row/cell[text() != key('cells', concat(../../@num, '|', ../cell[@num='1'], '|', ../cell[@num='3'], '|', @num))/text()]]">
      <xsl:copy>
         <xsl:apply-templates select="@*"/>
         <flag type="ambiguousSupplier">true</flag>
         <xsl:apply-templates select="node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于给定的 XML 时，将输出以下内容

```
<sheet name="Sheet1" num="1">
   <flag type="ambiguousSupplier">true</flag>
   <row num="3">
      <cell num="1">FP1152</cell>
      <cell num="2">1039_2</cell>
      <cell num="3">FP000234</cell>
   </row>
   <row num="4">
      <cell num="1">RT1152</cell>
      <cell num="2">1039_1</cell>
      <cell num="3">GL000235</cell>
   </row>
   <row num="6">
      <cell num="1">FP1152</cell>
      <cell num="2">1039_1</cell>
      <cell num="3">FP000234</cell>
   </row>
</sheet> 
```

我确信必须有一个更简单的解决方案，所以我暂时不会接受这个答案，即使它确实解决了你的问题......

# xpath - 多个元素的 XPath 谓词组合

> ID：10313150
> 
> 赞同：0
> 
> 时间：2012-04-25T09:46:12.097
> 
> 标签：xpath, nokogiri, predicate

使用 ruby​​ 1.9.3 和 Nokogiri（最新）：

鉴于（不，我没有想出这个）：

```
<root>
<subelement>
    <key>
          <var name="id">50</var>
          <var name="secondaryid">0</var>
     </key>
</subelement>
<subelement>
   <key>
          <var name="id">50</var>
          <var name="secondaryid">1</var>
   </key>
</subelement>
</root> 
```

返回父元素 (<key>)，它的 var 元素的 name 属性等于“id”且值等于 50，并且 var 元素的 name 属性等于“secondaryid”且值等于 0。不返回id=50 和 secondaryid=1 的节点。

显然，它将建立在以下方面：

@doc.xpath("//var[@name='id' and text()=50]")

但我不知道如何添加另一个与 name = "secondaryid" 元素匹配的谓词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:58:41.010

没有用 Ruby 测试过，但这应该可以解决问题。

```
//key[var[@name='id'] = '50'][var[@name='secondaryid'] = '0'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:42:49.477

另一种方法：

```
subelement/key
  [var[@name="id" and . = "50"]]
  [var[@name="secondaryid" and . = "0"]] 
```

# c# - 无法使用 Poco 代码生成项更新实体

> ID：10313151
> 
> 赞同：0
> 
> 时间：2012-04-25T09:46:13.140
> 
> 标签：c#, asp.net, .net, entity-framework, poco

我有以下情况：

我页面中的以下 2 个全局变量：

```
MainContext db = new MainContext();
User user = new User(); 
```

填充按钮更新时调用的属性的方法：

```
private void FillProperties()
        {
            user.FirstName = txtFirstName.Text;
            user.LastName = txtLastName.Text;
            user.Email = txtEmail.Text;
        } 
```

在按钮更新上，我正在执行以下操作：

```
FillProperties();
user.ID = Request.QueryString("userid");
db.SaveChanges(); 
```

但是记录没有被更新，我认为这是合乎逻辑的，因为用户变量与 db 对象无关，但是 ia，不能这样做：

```
db.Users.AddObject(user); 
```

因为在 db 属性中找不到 AddObject。

我可以做些什么来更新用户？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:55:49.710

如果您使用[DbContext](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx) API，只需使用

```
db.Entry(user).State = EntityState.Modified; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:22:12.287

您在哪里将您的用户添加到数据库中？
如果用户存在于数据库中，为了更新它，你应该这样做，例如：

```
user = db.Users.Where(x => x.ID == Request.QueryString("userid")).Single();
FillProperties();
db.SaveChanges(); 
```

# java - google 身份验证器实现 java android

> ID：10313157
> 
> 赞同：1
> 
> 时间：2012-04-25T09:46:38.203
> 
> 标签：java, android, google-authenticator

我构建了一个必须具有 Google 身份验证器代码（密码）才能访问它的 Android 应用程序。我生成16个字符的序列码的问题但是当我尝试编写验证码时，应用程序总是告诉我这是错误的验证码......手机和电脑的时间是一样的，所以我不知道为什么我不工作...

这是我使用的一些代码：

```
`
//Base32.java
private static final  Base32 INSTANCE = 
    new  Base32("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"); // RFC 4668/3548

  static  Base32 getInstance() { 
    return INSTANCE;
  }

  // 32 alpha-numeric characters.
  private String ALPHABET;
  private char[] DIGITS;
  private int MASK;
  private int SHIFT;
  private HashMap<Character, Integer> CHAR_MAP;

  static final String SEPARATOR = "-";

  protected  Base32(String alphabet) {
    this.ALPHABET = alphabet;
    DIGITS = ALPHABET.toCharArray();
    MASK = DIGITS.length - 1;
    SHIFT = Integer.numberOfTrailingZeros(DIGITS.length);
    CHAR_MAP = new HashMap<Character, Integer>();
    for (int i = 0; i < DIGITS.length; i++) {
      CHAR_MAP.put(DIGITS[i], i);
    }
  }

  public static byte[] decode(String encoded) throws DecodingException {
    return getInstance().decodeInternal(encoded);
  }

  protected byte[] decodeInternal(String encoded) throws DecodingException {
    // Remove whitespace and separators
    encoded = encoded.trim().replaceAll(SEPARATOR, "").replaceAll(" ", "");
    // Canonicalize to all upper case
    encoded = encoded.toUpperCase();
    if (encoded.length() == 0) {
      return new byte[0];
    }
    int encodedLength = encoded.length();
    int outLength = encodedLength * SHIFT / 8;
    byte[] result = new byte[outLength];
    int buffer = 0;
    int next = 0;
    int bitsLeft = 0;
    for (char c : encoded.toCharArray()) {
      if (!CHAR_MAP.containsKey(c)) {
        throw new DecodingException("Illegal character: " + c);
      }
      buffer <<= SHIFT;
      buffer |= CHAR_MAP.get(c) & MASK;
      bitsLeft += SHIFT;
      if (bitsLeft >= 8) {
        result[next++] = (byte) (buffer >> (bitsLeft - 8));
        bitsLeft -= 8;
      }
    }
    // We'll ignore leftover bits for now. 
    // 
    // if (next != outLength || bitsLeft >= SHIFT) {
    //  throw new DecodingException("Bits left: " + bitsLeft);
    // }
    return result;
  }

  public static String encode(byte[] data) {
    return getInstance().encodeInternal(data);
  }

  protected String encodeInternal(byte[] data) {
    if (data.length == 0) {
      return "";
    }

    // SHIFT is the number of bits per output character, so the length of the
    // output is the length of the input multiplied by 8/SHIFT, rounded up.
    if (data.length >= (1 << 28)) {
      // The computation below will fail, so don't do it.
      throw new IllegalArgumentException();
    }

    int outputLength = (data.length * 8 + SHIFT - 1) / SHIFT;
    StringBuilder result = new StringBuilder(outputLength);

    int buffer = data[0];
    int next = 1;
    int bitsLeft = 8;
    while (bitsLeft > 0 || next < data.length) {
      if (bitsLeft < SHIFT) {
        if (next < data.length) {
          buffer <<= 8;
          buffer |= (data[next++] & 0xff);
          bitsLeft += 8;
        } else {
          int pad = SHIFT - bitsLeft;
          buffer <<= pad;
          bitsLeft += pad;
        }
      }
      int index = MASK & (buffer >> (bitsLeft - SHIFT));
      bitsLeft -= SHIFT;
      result.append(DIGITS[index]);
    }
    return result.toString();
  }

  @Override
  // enforce that this class is a singleton
  public Object clone() throws CloneNotSupportedException {
    throw new CloneNotSupportedException();
  }

  static class DecodingException extends Exception {
    public DecodingException(String message) {
      super(message);
    }
  }
}`

//CheckCode.java    
...public void onClick(View v) {
        String codeDigited=ed.getText().toString();
        Log.d("codeDigited", codeDigited);
        try {
            if(check_code(codeDigited, 0, 0)==true){
            Intent step = new Intent(this, GoogleAuthenticator.class);
            startActivity(step);
            }else{
             info.setText("passwords doesn't match! oh noes!");
            }
        } catch (InvalidKeyException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (DecodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private static boolean check_code(String secret, long code, long t)
            throws NoSuchAlgorithmException, InvalidKeyException, DecodingException {
        //Base32 codec = new Base32(secret);
        byte[] decodedKey = Base32.decode(secret);

        // Window is used to check codes generated in the near past.
        // You can use this value to tune how far you're willing to go.
        int window = 30;
        for (int i = -window; i <= window; ++i) {
            long hash = verify_code(decodedKey, t + i);

            if (hash == code) {
                System.out.println("right");
                return true;

            }
        }
        System.out.println("OOOOOOOps codec.decode(secret): "+decodedKey.toString());
        // The validation code is invalid.
        return false;
    }

    private static int verify_code(byte[] key, long t)
            throws NoSuchAlgorithmException, InvalidKeyException {
        byte[] data = new byte[8];
        long value = t;
        for (int i = 8; i-- > 0; value >>>= 8) {
            data[i] = (byte) value;
        }

        SecretKeySpec signKey = new SecretKeySpec(key, "HmacSHA1");
        Mac mac = Mac.getInstance("HmacSHA1");
        mac.init(signKey);
        byte[] hash = mac.doFinal(data);

        int offset = hash[20 - 1] & 0xF;

        // We're using a long because Java hasn't got unsigned int.
        long truncatedHash = 0;
        for (int i = 0; i < 4; ++i) {
            truncatedHash <<= 8;
            // We are dealing with signed bytes:
            // we just keep the first byte.
            truncatedHash |= (hash[offset + i] & 0xFF);
        }

        truncatedHash &= 0x7FFFFFFF;
        truncatedHash %= 1000000;

        return (int) truncatedHash;
    } 
```

codeDigited 是我从 Google authentificator App 获取的验证码，但我不知道为什么该代码不起作用

# php - Zend Db Table 和设置获取模式

> ID：10313163
> 
> 赞同：0
> 
> 时间：2012-04-25T09:46:53.933
> 
> 标签：php, zend-db, zend-db-table

我想在 Zend_Db_Table_Abstract 的扩展类中更改获取模式。以下**不起作用**：

```
<?php
class Foo extends Zend_Db_Table_Abstract
{·
  function bar()
   {
     return $this->fetchAll(Zend_Db::FETCH_NUM);
   }
} 
```

任何人都知道如何正确地做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:04:05.847

如果您只想按列号获取数据，我认为 Zend_Db_Table 不适合使用，因为 Zend_Db_Table 的 fetchAll() 方法总是希望返回一个行集，在这种情况下，是 Foo 行。并且行使用列名作为对象属性。

如果您确实需要使用编号索引获取，请尝试使用 DB Adapter 而不是 DB Table：

```
function bar() {
    $dbAdapter = $this->getAdapter();
    $dbAdapter->setFetchMode(Zend_Db::FETCH_NUM);
    return $dbAdapter->fetchAll("SELECT * FROM " . $this->_name);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-26T17:18:33.780

我希望这可以帮助你。

```
<?php
class Langs extends Zend_Db_Table_Abstract
{
    protected $_name = 'langs';
    protected $_primary = 'id';

    public function getLangs() {
        $query = "SELECT lang_short "
               . "FROM $this->_name "
               . "ORDER BY $this->_primary";

        return $this->_db->fetchAll($query, null, Zend_Db::FETCH_OBJ);
    }
} 
```

# extjs4 - 带搜索的树形网格

> ID：10313164
> 
> 赞同：0
> 
> 时间：2012-04-25T09:46:55.350
> 
> 标签：extjs4

我有更多数据的树网格。我想要做

1] 搜索 Grid 的商店。

2] 提高性能，因为有时我也会获得 10,000 个数据。

请建议我最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:03:15.397

虚拟模式 TreeGrid？

许多控件都支持这种操作方法。

您可以尝试自定义**SourceGrid以支持 Tree List，但它是开源的、免费的，并且在 Great MIT** [SourceGrid](http://sourcegrid.codeplex.com/)下获得许可 ……它很好，速度很快，虽然它不像其他人那么花哨。

.

还有**ObjectListView** [ObjectListView](http://objectlistview.sourceforge.net/cs/index.html) 但我从来没有使用过它，因为它使用 GPL，这是等同于 Cancer 的许可！

祝你好运

还有更多：搜索**虚拟树列表视图**并找到它们

# c++ - 使用 128 位精度的 Lapack

> ID：10313165
> 
> 赞同：12
> 
> 时间：2012-04-25T09:46:59.050
> 
> 标签：c++, fortran, lapack, 128-bit

我正在尝试使用[Lapack](http://www.netlib.org/lapack/)对矩阵[奇异值分解](http://en.wikipedia.org/wiki/Singular_value_decomposition)(SVD) 进行 128 位精度计算，我发现有一些黑色的编译器魔法可以实现这一点。英特尔 Fortran 编译器 (ifort) 支持`-r16`指示编译器将所有声明为`DOUBLE PRECISION`128 位实数的变量的选项。所以我编译了 Lapack 和 BLAS 使用：

```
ifort -O3 -r16 -c isamax.f -o isamax.o
ifort -O3 -r16 -c sasum.f -o sasum.o
... 
```

要将其合并到我的程序（即 C++）中，我可以使用带有选项的英特尔 C++ 编译器 (icc)，该选项`-Qoption,cpp,--extended_float_type`创建`_Quad`一个 128 位浮点变量的数据类型。我的 SVD 示例如下所示：

```
#include "stdio.h"
#include "iostream"
#include "vector"

using namespace std;
typedef _Quad scalar;

//FORTRAN BINDING
extern "C" void dgesvd_(char *JOBU, char *JOBVT, int *M, int *N,
    scalar *A, int *LDA,
    scalar *S,
    scalar *U, int *LDU,
    scalar *VT, int *LDVT,
    scalar *WORK, int *LWORK, int *INFO);

int main() {
    cout << "Size of scalar: " << sizeof(scalar) << endl;
    int N=2;
    vector< scalar > A(N*N);
    vector< scalar > S(N);
    vector< scalar > U(N*N);
    vector< scalar > VT(N*N);

    // dummy input matrix
    A[0] = 1.q;
    A[1] = 2.q;
    A[2] = 2.q;
    A[3] = 3.q;
    cout << "Input matrix: " << endl;
    for(int i = 0; i < N; i++) {
        for(int j = 0;j < N; j++) 
            cout << double(A[i*N+j]) << "\t";
        cout << endl;
    }
    cout << endl;

    char JOBU='A';
    char JOBVT='A';
    int LWORK=-1;
    scalar test;
    int INFO;

    // allocate memory
    dgesvd_(&JOBU, &JOBVT, &N, &N,
        &A[0], &N,
        &S[0],
        &U[0], &N,
        &VT[0], &N,
        &test, &LWORK, &INFO);
    LWORK=test;
    int size=int(test);
    cout<<"Needed workspace size: "<<int(test)<<endl<<endl;
    vector< scalar > WORK(size);

    // run...
    dgesvd_(&JOBU, &JOBVT, &N, &N,
        &A[0], &N,
        &S[0],
        &U[0], &N,
        &VT[0], &N,
        &WORK[0], &LWORK, &INFO);
    // output as doubles
    cout << "Singular values: " << endl;
    for(int i = 0;i < N; i++)
        cout << double(S[i]) << endl;
    cout << endl;
    cout << "U: " << endl;
    for(int i = 0;i < N; i++) {
    for(int j = 0;j < N; j++)
        cout << double(U[N*i+j]) << "\t";
    cout << endl;
    }
    cout << "VT: " << endl;
    for(int i = 0;i < N; i++) {
    for(int j = 0;j < N; j++)
        cout << double(VT[N*i+j]) << "\t";
    cout << endl;
    }
    return 0;
} 
```

编译

```
icc test.cpp -g -Qoption,cpp,--extended_float_type -lifcore ../lapack-3.4.0/liblapack.a ../BLAS/blas_LINUX.a 
```

到目前为止一切正常。但输出是：

```
标量大小：16
输入矩阵：
1 2
2 3

所需工作空间大小：134

奇异值：
信息
信息

你：
-0.525731 -0.850651
-0.850651 0.525731
VT：
-0.525731 0.850651
-0.850651 -0.525731

```

我检查了 U 和 VT 是否正确，但奇异值显然不是。有没有人知道为什么会发生这种情况或如何规避它？
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:19:37.013

使用扩展精度的外部库时，还要检查它们是否使用旧式**d1mach.f、r1mach.f、i1mach.f**来获取有关机器算术的信息。这里可能需要调整一些值。

Lapack 不会有问题，它使用 dlamch.f（此处为[http://www.netlib.org/lapack/util/dlamch.f](http://www.netlib.org/lapack/util/dlamch.f)），它使用 Fortran 90 内在函数来获取这些机器常量。

但是，如果您使用 BLAS 或 SLATEC，它可能会出现问题。

# wcf - 使用 HttpModule 的 WCF URL 重定向

> ID：10313167
> 
> 赞同：3
> 
> 时间：2012-04-25T09:47:04.100
> 
> 标签：wcf

我想将所有来自 Service1 的请求重定向到 Service2。

我尝试使用 HTTPModule。但我没有运气。请提出任何方法来实现这一点。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:49:02.790

可以通过内置的[WCF RoutingService](http://msdn.microsoft.com/en-us/library/ee517423.aspx)功能来使用较少代码密集的方式来重定向调用。有一个很好的[代码示例](http://msdn.microsoft.com/en-us/library/dd795218.aspx)展示了如何使用它的各种功能。

# java - 如何在 Eclipse 中使用 m2e 执行“mvn compile”和“mvn package”？

> ID：10313171
> 
> 赞同：8
> 
> 时间：2012-04-25T09:47:17.847
> 
> 标签：java, eclipse, maven, m2e

我这周开始在我正在处理的一些项目中使用 Maven，并且我使用 Eclipse 和 m2e 插件。我一直在看它，但找不到编译和打包的方法（据我所知，我可以进行清理、生成源、测试和安装）。如何通过 m2e 实现这一目标？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-25T09:50:27.217

1.  右键单击您的项目
2.  运行方式
3.  Maven构建...
4.  填写你想要的目标
5.  打跑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:51:24.830

您必须创建自己的 Maven Build 类型的运行配置。这四个是某种预定义的构建，但您可以创建真正定制的自己的东西。

# matplotlib - matplotlib 全局设置间距/刻度数/刻度标签

> ID：10313173
> 
> 赞同：3
> 
> 时间：2012-04-25T09:47:24.677
> 
> 标签：matplotlib

在我的图中，yticks 彼此之间的距离太近了（因为我更改了 yticks 字体）。所以我想限制/修复 yticks 的数量。由于我有数百个图，我想更改“全局”（在 matplotlibrc 或使用字典等）

有什么想法吗？类似`ax.xaxis.set_major_locator(MaxNLocator(4))`但在全球范围内的东西

顺便说一句：我找不到如何在不使用子图的情况下引用轴。有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T01:04:06.620

您可以`__init__`在任何绘图之前将 AutoLocator 的方法更改为您的函数：

```
import pylab as pl
from matplotlib import ticker

def AutoLocatorInit(self):
    ticker.MaxNLocator.__init__(self, nbins=4, steps=[1, 2, 5, 10])
ticker.AutoLocator.__init__ = AutoLocatorInit

pl.plot(pl.randn(100))
pl.figure()
pl.hist(pl.randn(1000), bins=40)
pl.show() 
```

# c# - 使用 VS 2010 创建的数据库部署网站

> ID：10313176
> 
> 赞同：2
> 
> 时间：2012-04-25T09:47:46.573
> 
> 标签：c#, database, visual-studio-2010, deployment, webserver

我们正在使用 VS 2010 (c#) 创建一个网站，我想知道，在完成我们的在线库存系统之后，我们将如何部署它？我想知道以下内容：

1.  我们需要的东西，例如虚拟主机站点，网络服务器，我们需要支付的任何东西，您能否提供一些建议。

2.  以及部署方法。正确的地址/URL，端口什么的。

请帮帮我，这是为了我们的论文。非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:56:02.430

Visual Studio 有一个部署工具（Build => Publish）。从这里您可以指定是否通过 Web、FTP、文件系统或前端页面服务器扩展 (FPSE) 部署到服务器。

[这个博客](http://weblogs.asp.net/owscott/archive/2009/06/06/visual-studio-2010-1-click-publishing.aspx)包含一些关于它的信息。

如果我要部署到我们网络上的服务器，我会使用文件系统部署，但对于远程服务器，您可能最好使用 Web 或 FTP 方法。

无法帮助您解决托管费用/建议，这可能不是询问它们的最佳地点。

希望这可以帮助。

# ruby - 将 ruby 脚本文件传递给 rails 控制台

> ID：10313181
> 
> 赞同：132
> 
> 时间：2012-04-25T09:48:23.613
> 
> 标签：ruby, ruby-on-rails-3

有没有办法将 ruby​​ 文件*foo.rb 传递*给 rails 控制台。预期结果将在控制台启动 rails 环境以运行文件之后。

或任何其他允许我在 rails 环境中执行文件的方式，从命令提示符触发。

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2013-11-02T23:52:24.340

`load`实际上，最简单的方法是在内部运行它`rails console`

```
 load './path/to/foo.rb' 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2012-04-25T14:23:51.463

您可以使用

```
bundle exec rails runner "eval(File.read 'your_script.rb')" 
```

更新：

我们最近也经常使用的是从脚本本身加载 rails 环境。考虑`doit.rb`：

```
#!/usr/bin/env ruby

require "/path/to/rails_app/config/environment"

# ... do your stuff 
```

如果脚本或当前工作目录不在 rails 应用程序的目录中，这也有效。

* * *

## 回答 #3

> 赞同：79
> 
> 时间：2016-06-16T12:10:40.330

同时，该解决方案已得到支持。

```
rails r PATH_TO_RUBY_FILE 
```

现在简单多了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-03T15:29:33.490

```
script/console --irb=pry < test.rb > test.log 
```

简单，肮脏，并在最后阻止该过程，但它完全按照我想要的方式完成了工作。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-02-28T01:41:31.707

考虑创建一个 rake 任务。

例如，对于我需要创建记录或支持迁移的代码，我经常从[这个 answer](https://stackoverflow.com/a/42498691/1038034)创建一个像这样的 rake 任务。例如：

在`lib/tasks/example.rake`：

```
namespace :example do
  desc "Sample description you'd see if you ran: 'rake --tasks' in the terminal"
  task create_user: :environment do
    User.create! first_name: "Foo", last_name: "Bar"
  end
end 
```

然后在终端运行：

```
rake example:create_user 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-27T15:56:52.053

在前面提到的这些方法中，没有一个看起来像您期望运行独立脚本那样干净和理想（不是通过 < 重定向进行评估或管道传输），但最后这对我来说是完美的：

（对于 Rails 3）

在脚本顶部插入：

```
#!/usr/bin/env ruby

APP_PATH = File.expand_path(appdir = '/srv/staging/strat/fundmgr/config/application',  __FILE__)
require File.expand_path(appdir + '/../boot',  __FILE__)
require APP_PATH
# set Rails.env here if desired
Rails.application.require_environment!

# your code here... 
```

当然，在 APP_PATH 行中设置您自己的 Rails 应用程序路径。

这样，我可以避免输入任何交互式`irb`或并且可以在 shell 提示符之前`rails c`测试我的*script.rb ，例如。*在 crontab 中安排它。

它也流畅地支持命令行参数，并在获取代码之前最小化包装器的级别。

信用（也显示了 Rails 2 示例）

[http://zerowidth.com/2011/03/18/standalone-script-runner-bin-scripts-in-rails.html](http://zerowidth.com/2011/03/18/standalone-script-runner-bin-scripts-in-rails.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-29T22:14:08.607

这是我正在使用的黑客：

```
rr() {
    rails_root="$(bundle exec rails runner "puts Rails.root")"
    rp="$(relpath "$1" "$rails_root")"
    bundle exec rails runner "eval(File.read '$rp')"
}
relpath() {python -c "import os.path; print os.path.relpath('$1','${2:-$PWD}')";} 
```

例子：

```
cd ~/rails_project/app/helpers
rr my_script.rb 
```

基于@moritz 在此处的回答。我更改了它，因为它的工作目录`File.read`是 Rails 项目根目录。

我知道这是一些严重的异端邪说，使用 python 来帮助一个 ruby​​ 脚本。但我找不到`relpath`ruby​​ 内置的方法。

信用：`relpath()`取自@MestreLion，[使用 Bash 将绝对路径转换为给定当前目录的相对路径](https://stackoverflow.com/questions/2564634/bash-convert-absolute-path-into-relative-path-given-a-current-directory#comment-12808306)

# c# - 动态创建线程

> ID：10313185
> 
> 赞同：5
> 
> 时间：2012-04-25T09:49:08.123
> 
> 标签：c#, multithreading

我知道如何使用线程和后台工作人员，但只能以“静态”方式（因此对它们进行硬编码）。但是我想使用这样的东西

```
public static void StartThread(string _Method)
{
    Thread t = new Thread(() => _Method;
    t.Start();
} 
```

我知道这会失败，因为它`_Method`是一个字符串。我读过 using`delegates`但我不确定这将如何工作以及在这种情况下是否需要它。

我想在需要时为特定功能启动一个线程（因此动态创建线程）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T09:54:13.287

如果您想在不同的线程上拆分工作，您可以使用[C# Task](http://msdn.microsoft.com/en-us/library/dd537609.aspx)这正是您所需要的。否则，请保留 Vlad 的回答并使用接受委托的方法。

### 任务

```
Task.Factory.StartNew(() => Console.WriteLine("Hello from taskA.")); 
```

### 线

```
public static Thread Start(Action action) {
    Thread thread = new Thread(() => { action(); });
    thread.Start();
    return thread;
}

// Usage
Thread t = Start(() => { ... });
// You can cancel or join the thread here

// Or use a method
Start(new Action(MyMethodToStart)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:57:08.723

要创建动态线程，您需要在运行时创建它们。在这个例子中，我创建了一个 CreateThreads 方法，它创建方法并将它们添加到线程列表中。后来我有一个方法 StartMyThreads 来启动所有线程。我希望这是你想要的。

```
 List<Thread> lstThreads = new List<Thread>();
    public void CreateThreads()
    {
        Thread th = new Thread(() => { MyThreadFun(); });
        lstThreads.Add(th);
    }

    private void MyThreadFun()
    {
        Console.WriteLine("Hello");
    }

    private void StartMyThreads()
    {
        foreach (Thread th in lstThreads)
            th.Start();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T09:51:38.067

你可以这样做：

```
public static void StartThread(string s)
{
    Thread t = new Thread(() => { Console.WriteLine(s); });
    t.Start();
} 
```

或者，如果您更喜欢从外部设置方法：

```
public static void StartThread(Action p)
{
    Thread t = new Thread(p);
    t.Start();
}

...
StartThread(() => { Console.WriteLine("hello world"); }); 
```

编辑：
确实，您实际上需要

```
public static void StartThread(Action p)
{
    Thread t = new Thread(new ThreadStart(p));
    t.Start();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T10:04:33.003

```
var thread = new Thread(
    (ThreadStart)delegate
        {
            Console.WriteLine("test");
        }); 
```

或者

```
var thread = new Thread(
    (ParameterizedThreadStart)delegate(object parameter)
        {
            Console.WriteLine(parameter);
        }); 
```

如果您决定使用 TPL 任务，请注意 TPL 使用`ThreadPool`线程，因此在某些情况下，与手动创建`Thread`的 . 因此，请阅读文档并确保您在做出此类决定时知道自己在做什么。

您可能会发现这很有用：[专用线程或线程池线程？](http://blogs.msdn.com/b/pedram/archive/2007/08/05/dedicated-thread-or-a-threadpool-thread.aspx)

# c# - metabuilder 检查列表框选定的索引已更改在服务器上不起作用

> ID：10313186
> 
> 赞同：0
> 
> 时间：2012-04-25T09:49:15.273
> 
> 标签：c#, asp.net, listbox

我正在使用元生成器检查列表框，并且他们选择的索引更改为在本地工作正常。但在服务器端不工作。请帮我解决这个错误。我的部分代码在这里..

```
 protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
{

    try
    {
        if (ListBox1.Items.Count > 0)
        {
            for (int i = 0; i <= ListBox1.Items.Count; i++)
            {
                if (ListBox1.Items[i].Selected == true)
                {
                    lblempid.Text = Convert.ToString(ListBox1.Items[i].Text.Substring(0, 8));
                    lblempname.Text = Convert.ToString(ListBox1.Items[i].Text.Substring(9));
                    DataSet5TableAdapters.sp_GetallpayperiodTableAdapter TA = new DataSet5TableAdapters.sp_GetallpayperiodTableAdapter();
                    DataSet5.sp_GetallpayperiodDataTable DS = TA.GetData();
                    if (DS.Rows.Count > 0)
                    {
                        fromdate = Convert.ToString(DS.Rows[DS.Rows.Count - 1]["fldstartdate"]);
                        todate = Convert.ToString(DS.Rows[DS.Rows.Count - 1]["fldtodate"]);
                        status = Convert.ToString(DS.Rows[DS.Rows.Count - 1]["fldstatus"]);
                        if (status == "OPEN")
                        {
                            lblfromdate.Text = Convert.ToString(Convert.ToDateTime(fromdate).ToShortDateString());
                            lbltodate.Text = Convert.ToString(Convert.ToDateTime(todate).ToShortDateString());
                        }
                    } 

                }
            }
        }

    }
    catch (Exception e1)
    {
        ScriptManager.RegisterStartupScript(this, this.GetType(), "onload", "<script language='javascript'>alert('" + e1.Message + "');</script>", false);
    } 
```

设计代码：

```
 <%@ Register Assembly="MetaBuilders.WebControls" Namespace="MetaBuilders.WebControls"
TagPrefix="mb" %>

        <mb:CheckedListBox ID="ListBox1" runat="server" CssClass="textbox" Width="250px"
                                                                            Height="515px" AutoPostBack="True" OnSelectedIndexChanged="ListBox1_SelectedIndexChanged">
                                                                        </mb:CheckedListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:10:48.690

请检查您的 aspx 代码中的自动回发是否为真：示例：

```
<asp:DropDownList ID="ddlForecastOption" runat="server" 
      onselectedindexchanged="ddlForecastOption_SelectedIndexChanged" 
      AutoPostBack="true"> 
```

# c#-4.0 - C# ASP.Net MVC3，成员关系

> ID：10313187
> 
> 赞同：0
> 
> 时间：2012-04-25T09:49:22.473
> 
> 标签：c#-4.0, asp.net-membership

我正在寻找检查用户是否有电话。我正在使用asp.net Membership 来管理用户，有没有办法找回用户的电话？

```
thank you in advance, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:00:37.673

你可以评估

```
Request.ServerVariables["HTTP_USER_AGENT"] 
```

内容。在我的桌面上显示类似 Mozilla/5.0 (Windows NT 5.1; rv:11.0)。

网络中存在多个“用户代理列表”来识别移动设备。

# sharepoint - 简单的 URL 选择器

> ID：10313188
> 
> 赞同：0
> 
> 时间：2012-04-25T09:49:24.143
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-api

嗨，我的情况是我想让用户能够浏览 SharePoint 以查找文件，然后对话框应该返回该文件的 URL。这很简单吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:24:54.013

您可以尝试使用 SharePoint 中的 AssetUrlSector 控件。

[您可以在AssetUrlSelector 类](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.publishing.webcontrols.asseturlselector.aspx)中找到 MSDN 文章

控件的示例代码：

```
<CMS:AssetUrlSelector
  ID="assetSelectedImage"
  CssTextBox="ms-input ms-assetimagedialog-longtextbox"
  UseImageAssetPicker="true"
  MaxLength="512"
  DecodeUrlPath="false"
  AccessibilityName="<%$Resources:cms, asseteditimage_selectedimage_label%>"
  runat="server"
  AllowExternalUrls="false"
  ValidateUrl="true" /> 
```

CMS 在哪里：

```
<%@ Register
  TagPrefix="CMS"
  Namespace="Microsoft.SharePoint.Publishing.WebControls"
  Assembly="Microsoft.SharePoint.Publishing, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
```

希望这可以帮助。

# xml - XML 命名空间中的前缀

> ID：10313192
> 
> 赞同：0
> 
> 时间：2012-04-25T09:49:27.890
> 
> 标签：xml, namespaces, xsd, xml-parsing

是否可以在带有冒号的 XML 命名空间中使用前缀？

像这样的东西

```
<root xmlns:x:y="...." /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:03:35.453

结果可能因您的 XMl 处理器而异。

根据[NT-Names](http://www.w3.org/TR/REC-xml/#NT-Name)定义：

```
The Namespaces in XML Recommendation [XML Names] assigns a meaning to names 
containing colon characters.
Therefore, authors should not use the colon in XML names except for 
namespace purposes, but XML processors must accept the colon as a name character. 
```

# web-applications - Web 应用程序的组件有哪些？

> ID：10313198
> 
> 赞同：0
> 
> 时间：2012-04-25T09:49:44.960
> 
> 标签：web-applications, definition

据我了解，Web 应用程序是一个丰富的动态网页，包含大量用户生成的内容，通过静态网页后面的某些代码实现。

上述的关键组成部分是什么？是否可以说您需要一个标准的 HTML 网站和某种框架，这些框架可以从用某种语言编写的代码（包括 GWT、Play 等）为您生成动态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:54:09.390

一般来说，你会发现一个包含这些组件的网络应用程序

*   查看图层
*   业务层
*   数据访问层
*   做
*   错误处理、安全性、日志记录

使用 HTML、编程语言（Java、.Net、PHP）做服务器端工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-25T17:18:49.957

[![在此处输入图像描述](../Images/5c306152052f584a7de12a0b6a5f0ea2.png)](https://i.stack.imgur.com/X42gN.jpg)Internet<->负载平衡器（DNS、ngnix、交换机）<->Web 服务器（节点 js）| -Memcache，My SQL（数据库）

# sql-server-2008 - 显示两行的平均值

> ID：10313200
> 
> 赞同：1
> 
> 时间：2012-04-25T09:49:50.413
> 
> 标签：sql-server-2008, sql-server-2008-r2

```
studentname I II
Vivek Johari 30 20
Chandra Singh 30 20
Avinash Dubey 30 25
Pankaj Kumar 33 29 
```

我有一张名为 student 的桌子，上面有详细信息。我想找到第一列和第二列的平均值，并使用数据透视将其显示在新列上。请帮助我使用枢轴解决这个问题。我可以使用任何子查询来使用枢轴解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:27:38.143

your questions is not specific enough. Do you want the total average of both columns? just do

```
select avg (I), avg(II)
from your_table 
```

if you want just one value, you can do:

```
select (avg (I) + avg(II))/2
from your_table 
```

# html - Facebook 喜欢使用 IFrame 的框问题

> ID：10313202
> 
> 赞同：-1
> 
> 时间：2012-04-25T09:49:54.177
> 
> 标签：html, facebook, iframe, facebook-like

我对 Facebook 开发者部分的 Facebook 点[赞](http://en.wikipedia.org/wiki/Like_button)框有疑问。问题是，每当我打开网页时，都会收到以下错误消息：

> 错误 6 (net::ERR_FILE_NOT_FOUND)：找不到文件或文件夹。

我应该自己制作文件还是什么？

我在 HTML 编程中使用 iframe 选项：

```
<iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebo
ok.com%2FTriplex.Mobildiskotek&amp;width=800&amp;height=395&amp;colorscheme=dark&
amp;show_faces=false&amp;border_color&amp;stream=true&amp;header=false" scrolling=
"no" frameborder="0" style="border:none; overflow:hidden; width:800px; height:395
px;" allowTransparency="true"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:41:11.463

这工作得很好：

```
<iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2FTriplex.Mobildiskotek&amp;width=800&amp;height=590&amp;colorscheme=light&amp;show_faces=false&amp;border_color&amp;stream=true&amp;header=true&amp;appId=219650941461322" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:800px; height:590px;" allowTransparency="true"></iframe> 
```

[您可以在http://jsfiddle.net/nbeQH/](http://jsfiddle.net/nbeQH/)看到它的工作原理。

第一个是你的代码，第二个是我的。所以你可以看到你的给出了一个错误，而另一个没有。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T15:51:02.613

您需要将 http: 添加到代码的开头，一切就绪。

```
http://www.facebook.com/plugins... 
```

# ruby-on-rails - 存储带引号的 cookie 时的编码问题

> ID：10313205
> 
> 赞同：1
> 
> 时间：2012-04-25T09:50:01.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cookies

我需要创建一个包含双引号的 cookie。

```
cookies[:mycookie] = '"contentofmycookie"' 
```

但后来我的 cookie 实际上包含：

```
%22contentofmycookie%22 
```

我已经看到 Rails 对 cookie 值进行编码；可能我应该通过覆盖某些东西来避免这种情况，但我不知道是什么。我正在使用 Rails 3.2.3。

**编辑：** 我需要我的 cookie 包含双引号以使其被另一个应用程序识别。这个其他应用程序不是 Rails 应用程序，它使用带有引号的 cookie。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:56:01.983

您需要在提取 cookie 时对其进行转义。

```
require  'cgi'
print CGI.unescape cookies[:mycookie]
#=> "contentofmycookie" 
```

# php - 从 url 获取变量而不去那里：

> ID：10313207
> 
> 赞同：0
> 
> 时间：2012-04-25T09:50:13.957
> 
> 标签：php, url, file-get-contents

我正在为 facebook 网络应用程序收集 access_token

所以，我有以下内容：

```
$fb_url = "https://graph.facebook.com/oauth/authorize?type=user_agent& .
client_id=132456789&redirect_uri=http%3A%2F%2Fmysite.com . 
&scope=user_photos,email,user_birthday,user_online_presence"; 
```

当我转到该 URL 时，它会将我转发到：

```
mysite.com?access_token=5sdf5s5wrrg4e645e645 
```

那么我怎样才能触发 URL 并收集变量 access_token 而不实际去那里，这显然不可能发生......如果这是有道理的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:53:06.523

一般来说，您需要以编程方式发出[curl](http://php.net/manual/en/book.curl.php)请求并解释响应。实际上，如果您使用专门的“facebook 连接器”类会更容易。你查看过[Facebook 的开发者文档](http://developers.facebook.com/docs/reference/php/)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:56:26.957

> 如何在不实际去那里的情况下触发 URL 并收集变量 access_token

你不能。

但是，如果您的意思是这样，您实际上可以在*不将用户的浏览器发送到该 URL 的情况下去那里。*您可以使用[cURL](http://php.net/manual/en/book.curl.php)来做到这一点，这使得该请求成为服务器端。然后，您可以将结果呈现给用户，或者做任何您想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:53:33.977

您可以尝试手动发送 HTTP 请求，然后使用结果

[http://php.net/manual/en/httprequest.send.php](http://php.net/manual/en/httprequest.send.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T10:51:34.427

这就是我的做法 - facebook sdk 有时令人生畏，然后突然之间这一切都变得愚蠢了！

```
require '/home/***/public_html/pages/social_login/fb_lib/facebook.php';

$config = array();
$config[‘appId’] = '__APP_ID__';
$config[‘secret’] = '__SECRET__';

$facebook = new Facebook($config);

//TO GET ACCESS TOKEN
$access_token = $facebook->getAccessToken(); 
```

# java - 跨属性占位符配置器的嵌套属性

> ID：10313208
> 
> 赞同：1
> 
> 时间：2012-04-25T09:50:21.293
> 
> 标签：java, spring

我有多个属性文件，一个名为 application.properties 的通用文件和一个更具体的名为 [HostName].properties

Hostname.properties 设置为比 application.properties 更高的优先级。

在 application.properties 我设置了 db.url：

```
db.url=jdbc:mysql://${db.host}:3306/${db.schema}?autoReconnect=true&amp;sessionVariables=storage_engine=InnoDB; 
```

我还在此属性文件中设置了 db.host 和 db.schema 值。

```
db.schema=default
db.host=localhost 
```

然后在 [Hostname].properties 我想覆盖 db.host 和 db.schema 的值：

```
db.schema=specific
db.host=specific_hostname 
```

但是，似乎这种嵌套不起作用。

db.schema 值解析为“特定”，但 db.url 属性解析为与定义 db.url 相同的文件中指定的 db.schema。

考虑以下测试片段：

```
@Value("${db.url}")
private String dbUrl;

@Value("${db.schema}")
private String dbSchema;

@Test
public void testUrlTest() {
    System.out.println(dbUrl);
    System.out.println(dbSchema);
} 
```

打印出来的第一个值是

> jdbc:mysql://localhost:3306/default?autoReconnect=true&sessionVariables=storage_engine=InnoDB;

第二个值是：

> 具体的

这是设计使然吗？我希望能够覆盖从一个属性配置器到下一个属性配置器的嵌套。

有没有办法解决这个问题？

更新：属性占位符在 spring config xml 中配置如下：

```
<context:property-placeholder order="10"
    location="classpath:xxx.yyy/application.properties"
    ignore-unresolvable="true" ignore-resource-not-found="false" />

<bean
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" ref="hostnameLookup" />
    <property name="ignoreResourceNotFound" value="true" />
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="order" value="5" />
</bean>

<bean class="xxx.yyy.util.HostNameLookupFactory" id="hostnameLookup"
    autowire-candidate="false">
    <property name="prefix" value="classpath:xxx.yyy/" />
    <property name="suffix" value=".properties" />
</bean> 
```

HostNameLookupFactory 是一个提供本地主机名的工厂 bean。

# css - wkhtmltopdf 样式表

> ID：10313213
> 
> 赞同：8
> 
> 时间：2012-04-25T09:50:51.053
> 
> 标签：css, pdf, stylesheet, wkhtmltopdf

谁能告诉我如何包含用户样式表 ind wkhtlmtopdf v. 0.10？

我指的是本地文件，但这不会影响我的 Pdf。

```
switches += "--user-style-sheet \User\...\style.css " 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:55:39.193

在你的交换机上使用“真实”的 URL 语法怎么样？就像是

```
switches += "--user-style-sheet file:///User/.../style.css" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T07:41:08.500

使用该参数的另一个选项是在 PDF 转换发生之前以编程方式注入样式表。可能是通过使用一个 URL 参数来识别页面是否被提供给 wkhtmltopdf，或者通过下载页面，注入 CSS 引用，然后为 wkhtmltopdf 反刍页面。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-08T10:14:49.160

> 在终端

```
wkhtmltopdf -V
wkhtmltopdf 0.12.2.4 
```

> 命令

```
 wkhtmltopdf --user-style-sheet yourcssfile.css yourhtmlfile.html outputfile.pdf 
```

# java - 运行时错误“错误名称：applicationarbre / Main”

> ID：10313219
> 
> 赞同：2
> 
> 时间：2012-04-25T09:51:22.093
> 
> 标签：java

我在环境变量“path”中添加jdk的路径，我的位置在应用程序的目录上：“C:\Users\20900994t\Desktop\applicationArbre_2_1\src\applicationarbre”我有4个.java文件。

我尝试了2种方法。

第一种方法是： 1\. “javac Main.java” 2\. “java Main”

第二种方法是： 1\. “javac *.java” 2\. “java Main.java”

这些方法生成所有文件。我拥有的所有类的类，但是在命令行中它向我显示其他类的目的未被识别，当我执行“java Main”时，它向我显示“NoClasseDefFoundError”

实际上，这些方法在环境 Net Beans 中运行良好，但是我需要使用 .bat 文件在命令行上执行它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:53:41.033

我怀疑你是这样运行的：

```
// In directory applicationarbre
$ java Main 
```

您应该像这样在*父*目录中运行它：

```
$ java applicationarbe.Main 
```

您说您已经尝试了几种解决方案，但您没有解释您尝试了什么，或者您尝试它们时发生了什么，这使得您很难进一步帮助您。

基本上，您需要告诉 Java 您要启动的类的完全限定名称，并且该类必须在类路径中可用，默认情况下是“当前目录”。除此之外，您还需要向我们提供更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:54:02.290

不像这样：

```
java applicationarbre/Main 
```

但像这样：

```
java applicationarbre.Main 
```

至于类路径，在您的情况下，这可能就足够了（如果您位于正确的基目录中，下面是您的类文件）：

```
java -cp . applicationarbre.Main 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:08:22.633

首先编译main方法所在的类

C:\文件夹名>javac 类名.java

然后用语句运行

C:\文件夹名>java 类名

希望它会工作:)

# android - 如何更改查看器的滑动速度

> ID：10313223
> 
> 赞同：1
> 
> 时间：2012-04-25T09:51:32.853
> 
> 标签：android, android-viewpager

默认速度太快了，我觉得会影响用户体验。

在图库中，我们可以覆盖 onfling()，在 viewpager 中的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:03:48.013

速度由屏幕密度决定，是一个私有变量。没有办法改变它。

一个解决方案是复制 ViewPager 的源并创建自己的类。然后，您可以将值更改为您想要的任何值。变量是`mBaseLineFlingVelocity`并且在`initViewPager()`.

# google-maps - 需要使用谷歌地图突出分布区域

> ID：10313230
> 
> 赞同：4
> 
> 时间：2012-04-25T09:52:21.153
> 
> 标签：google-maps, google-maps-api-3

在谷歌地图中，​​当你搜索一个城市/省/国家时，它会以红色突出显示。我想同样显示一个分销区域，例如突出显示销售指定商品的所有城市/省/国家。

有人对如何做到这一点有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:00:59.747

这是不可能的。您将需要使用 KML 图层来执行此操作。

# jquery - 加载（）后li选项卡上的jQuery addClass（）

> ID：10313231
> 
> 赞同：2
> 
> 时间：2012-04-25T09:52:21.700
> 
> 标签：jquery, tabs, load, click, preventdefault

我正在尝试在 li 选项卡上使用 addClass('current') 。问题是 click 函数调用 load() 来重置 li 选项卡上的当前类。如何在访问者单击的 li 上的 load() 之后 addClass()？

我现在的样子：

```
$('div#container ul.tab-nav li').click(function(event) {
   $('div#container').load('index.htm').fadeIn("slow");
   $('div ul.tab-nav li').removeClass('current');
   $(this).addClass('current');
   event.preventDefault();
   return false;
}); 

<ul class="tab-nav">
    <li class="current">1</li>
    <li>2</li>
    <li>3</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:54:22.630

目前，您的代码在`.load()`AJAX 调用完成之前执行。请求完成后，您需要使用成功回调[`.load()`](http://api.jquery.com/load/#callback-function)来执行您的代码：

```
$('#container ul.tab-nav li').click(function(event) {
    $('#container').load('index.htm', function() {
        $('div ul.tab-nav li').removeClass('current');
        $(this).addClass('current').fadeIn("slow");
    });
    event.preventDefault();
    return false;
}); 
```

请注意，您正在覆盖的内容，`#container`因此一旦加载了新内容，点击事件处理程序将丢失。如果这不是您想要的，请通过将第一行替换为以下内容来使用委托：

```
$('#container').on('click', 'ul.tab-nav li', function(event) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T10:01:13.513

更改类“当前”后加载。

```
$('div#container ul.tab-nav li').click(function(event) {
  $('div ul.tab-nav li').removeClass('current');
  $(this).addClass('current');
  $('div#container').load('index.htm').fadeIn("slow");
  event.preventDefault();
  return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T15:26:38.560

使用 JQuery，您可以在页面加载时执行代码：

```
$(document).ready(function(){
    // your code here
}); 
```

# ios - 将 Xcode 4 'Save for Enterprise or Ad-Hoc Deployment' 设置为构建后操作

> ID：10313232
> 
> 赞同：0
> 
> 时间：2012-04-25T09:52:24.543
> 
> 标签：ios, xcode, xcode4, app-store, build-automation

我想将企业部署自动化为归档后触发的构建后操作，脚本遵循以下步骤：

1.  使用管理器中的“分发...”操作获取最新的存档版本
2.  使用“保存企业或临时部署”选项
3.  选择预定义的签名身份
4.  激活“保存以供企业分发”并填写字段（URL、标题等）
5.  将 ipa 和 plist 文件保存在给定路径中

是否可以创建一个脚本来自动执行这些操作？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:30:36.943

很多这些事情都可以使用终端来完成，因此您可以使用它来构建您的应用程序以进行分发。这篇文章可能对您有很大帮助，当我想使用 Jenkins 进行 CI 时，它确实对我有所帮助。

[从分叉终端运行 xcodebuild](https://stackoverflow.com/questions/577750/running-xcodebuild-from-a-forked-terminal)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:33:54.850

我认为您可以使用命令行构建工具来实现目标。Xcode 中的构建和归档操作依赖于这些工具。

参考：

*   [命令行中的 Xcode“构建和存档”](https://stackoverflow.com/questions/2664885/xcode-build-and-archive-from-command-line)
*   [http://blog.octo.com/en/automating-over-the-air-deployment-for-iphone/](http://blog.octo.com/en/automating-over-the-air-deployment-for-iphone/)
*   [http://nachbaur.com/blog/building-ios-apps-for-over-the-air-adhoc-distribution](http://nachbaur.com/blog/building-ios-apps-for-over-the-air-adhoc-distribution)

# twitter - Twitterizer api搜索功能抛出异常

> ID：10313244
> 
> 赞同：1
> 
> 时间：2012-04-25T09:53:01.947
> 
> 标签：twitter, twitterizer

当我调用搜索功能时：

```
TwitterResponse<TwitterSearchResultCollection> result = TwitterSearch.Search("#hastag"); 
```

它抛出异常，例如：将值 0,148 转换为类型“Twitterizer.TwitterSearchResultCollection”时出错。JsonParsingException。

我正在使用最新版本的 api。有什么可以解决的吗？

# asp.net - DropDownList SelectedValue 无效，因为它不存在于项目列表中

> ID：10313245
> 
> 赞同：1
> 
> 时间：2012-04-25T09:53:06.403
> 
> 标签：asp.net, drop-down-menu, selectedvalue

我有以下 asp.net DropDownList：

```
<asp:DropDownList ID="ddlRole" runat="server" DataSourceID="dsRole"
        DataTextField="RoleCode" DataValueField="ID" Font-Names="Verdana" Font-Size="11px"
        ForeColor="#2D2D2D" ClientIDMode="Static" Width="120px" CssClass="selectedRole"
        OnDataBound="ddlEntity_DataBound" AppendDataBoundItems="true" >
        <asp:ListItem Value="-1">--- Select ---</asp:ListItem>
</asp:DropDownList>
<asp:ObjectDataSource ID="dsRole" runat="server" SelectMethod="GetList" TypeName="Roles"
     OldValuesParameterFormatString="original_{0}"></asp:ObjectDataSource> 
```

我收到“SelectedValue 无效，因为它不存在于项目列表中”错误，说明“值”不正确。我引用的 ID 是 1，它肯定存在于我从中调用的数据库中。

我已经尝试过在互联网和其他论坛上引用的这个问题的解决方案，但我仍然遇到同样的错误。我假设这与我的 SelectedValue 从 -1 开始的事实有关？

有什么建议么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-25T10:02:42.530

我决定这样做是为了“选择”是传输数据集中的第一行。您可以在 MSSQL 中使用 UNION 来完成。

请求结果是这样的：

```
SELECT '-1' AS id, 'Select' AS name UNION ALL SELECT id, name FROM users 
```

必须给列别名，否则 DropDownList 根本不明白id在哪里，名字在哪里

```
 <asp:DropDownList ID="MainCat" runat="server" AutoPostBack="True" 
         DataSourceID="SqlDataSource1" DataTextField="name" DataValueField="id">
 </asp:DropDownList>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
         ConnectionString="<%$ ConnectionStrings:ConnectionString1%>" 
             SelectCommand="SELECT id,name FROM users">
 </asp:SqlDataSource> 
```

我需要做同样的西装

# php - LinkedIn API，阅读组帖子问题

> ID：10313247
> 
> 赞同：2
> 
> 时间：2012-04-25T09:53:11.967
> 
> 标签：php, api, zend-framework, linkedin

我正在使用 Zend Framework 访问 LinkedIn API。在阅读群组中的帖子时（使用 http://api.linkedin.com/v1/groups/[group_id]/posts:(some_arguments) 以及 start 和 count）有时我只能从第一页加载几个第一个帖子。尝试加载下一页时，我收到空结果，但有时效果很好。我只有在尝试阅读流行团体时才能看到这个问题。在阅读我的小组或我的网络时，它总是能正常工作。也许有人以前见过这个问题并且知道该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:42:23.907

根据“一些参数”是什么以及您请求的帖子数量，您可能会遇到超时。如果您要获取有关发布、评论和/或喜欢帖子的人的个人资料以及帖子信息本身的信息，那么后端调用可能会很昂贵。

尝试一次检索更少的帖子，或减少您请求的其他字段的数量，看看是否能解决问题。如果是这样，请在 developer.linkedin.com 的论坛上发帖并让我们知道该问题，以便我们确保工程师知道超时。

# c# - 如何使用 ctrl 键执行多页超链接点击

> ID：10313248
> 
> 赞同：1
> 
> 时间：2012-04-25T09:53:12.027
> 
> 标签：c#, javascript, jquery, asp.net

我想知道如何（如果有办法）通过`ctrl`密钥处理多个链接点击。

因此，例如，用户将访问一个带有大约 3 个超链接的网页。然后用户将按住该`ctrl`键，然后单击一个链接，然后单击另一个。然后当`ctrl`键被释放时，会发生一个事件（可能是基于两个超链接值的组合的搜索）。

我正在使用 C# 并假设解决方案可能会在 jQuery 中完成？

选择应该类似于 Windows 资源管理器的工作方式。按住`ctrl`键的位置，然后选择一个文件，然后选择另一个文件，然后将其剪切或粘贴到某处。

感谢您提供的任何帮助，因为我正在努力在其他地方寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:30:34.363

你可以做这样的事情；保持 CTRL 键的状态（keycode = 17），在按下 CTRL 时将链接添加到数组（keydown 事件），在 keyup 事件（当 keycode == 17 时）在新窗口中打开链接。在标签中打开它们实际上是不可能的，但是有一个适用于 Firefox 的工作示例；读[这个](https://stackoverflow.com/questions/427479/programmatically-open-new-pages-on-tabs)。

例子：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
var ctrlIsDown = false;
var links = new Array();

function afterKeyUp()
{
    if(links.length > 0){
        for(var link in links){
                window.open(links[link]);
        }
        links = new Array();
        $("a").css('color', '');
    }
}

$(document).ready(function(){

$(document).keydown(function(e){ 
    if(e.which == 17) {
        ctrlIsDown = true;
    }
});

$(document).keyup(function(e){ 
    if(e.which == 17) {
        ctrlIsDown = false;
        afterKeyUp();
    }
});

$("a").click(function(e){
    if(ctrlIsDown){
        var href = $(this).attr("href");
        if($.inArray(href, links) == -1)
        {
            links[links.length] = href;
            $(this).css('color', 'red');
        }
    e.preventDefault();
    }
});

});
</script>
</head>
<body>

<a href="1.html">Link 1</a>
<a href="2.html">Link 2</a>
<a href="3.html">Link 3</a>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:27:16.087

High level idea would be

1) Create a css class to highlight selected link

2) Write javascript function to detect Ctrl key on KeyDown javsacript event of hyperlinks, this function should toggle the class of hyperlinks to selected link (so that user know which hyperlinks are selected) and add the hyperlink value/url to an hidden field to know the links of selected hyperlinks

3) Write javascript function on KeyUp javsacript event on hyperlinks to get the selected links and perform action on it.

# javascript - 为什么鼠标移动时 mousemove 事件中的 event.pageY 无法更新？

> ID：10313253
> 
> 赞同：0
> 
> 时间：2012-04-25T09:53:22.850
> 
> 标签：javascript, dom-events, mousemove

我想在事件触发`event.pageY`时使用当前值。`mousemove`但似乎我的`event.pageY`价值没有更新。这是我的代码的一部分（它已经在`mousemove`事件的回调函数中）：

```
 var deltaX = self.mouse.startX - event.pageX,
     deltaY = self.mouse.startY - event.pageY;
 if (self.mouse.endTime - self.mouse.startTime < 300){                  
                // Drag down
                console.log(event.pageY); // 1
                if(Math.abs(deltaX) < Math.abs(deltaY) && deltaY < 0){
                    console.log(event.pageY);  // 2
             .... 
```

第一个`console.log(event.pageY)`会随着鼠标移动而自动更新，但第二个不会更新，似乎它保留了计算的值`deltaY`。`event.pageY`那么当鼠标在内部“if”中移动时，如何获得更新的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:55:59.197

event.pageY 不会自动更新，它是事件对象的属性，在事件触发时生成，因此它在事件处理程序中是常量。

# apache - XAMPP：Apache 绑定到主机的所有 IP 地址

> ID：10313256
> 
> 赞同：1
> 
> 时间：2012-04-25T09:53:39.887
> 
> 标签：apache

我在必须支持的 Windows 2008 R2 上安装了 XAMPP。事实是这些：

*   计算机有 3 个 IP 地址（25、59 和 130，每个 192.168.43。）
*   Apache 和 IIS 需要并行运行（IIS 用于应用程序池）
*   apache 配置为仅侦听 IP 25
*   访问任何其他 IP 地址都会产生来自 apache 的消息

以下配置文件已适应 IP 地址监听/绑定更改（从默认安装）：

*   httpd.conf 列出“监听 192.168.43.25:80”
*   httpd.conf 列出“服务器名 192.168.43.25:80”
*   extra/httpd-ssl.conf 列出“监听 192.168.43.25:443”

我对这种行为没有任何解释。每当我访问其他 IP 地址之一时，我都会在“access.log”中看到以下几行：

*192.168.43.130 - - [25/Apr/2012:11:41:47 +0200] "GET / HTTP/1.1" 302 - "-" "Mozilla/5.0 (Windows NT 6.0; rv:11.0) Gecko/20100101 Firefox/ 11.0"*

*192.168.43.130 - - [25/Apr/2012:11:41:47 +0200] "GET /xampp/ HTTP/1.1" 403 1371 "-" "Mozilla/5.0 (Windows NT 6.0; rv:11.0) Gecko/20100101火狐/11.0"*

我不知道该怎么做。我很确定这是我的错，我不知何故没有得到配置，但它似乎是正确的。

请帮我。谢谢你。我会尽量在几分钟内回答任何问题。

# c# - sqlite 位列在每种情况下都返回“假”值

> ID：10313259
> 
> 赞同：2
> 
> 时间：2012-04-25T09:53:41.890
> 
> 标签：c#, android, database, sqlite

我正在使用 sqlite v3，我有一个表，其中包含一些数据类型为“位”的列。我在此表中插入了一些数据，位列中的值为“true”，但问题是当我使用 C# 代码检索数据时，它总是返回值“false”。

相同的查询和相同的数据库适用于我的 android 应用程序。但是，当我从 C# 或 Windows 检索这些数据时，它会返回异常结果。

Sqlite 管理员在查询窗格中显示正确的结果.....我正在使用 chrome 浏览器....我的 C# 代码是

```
SQLiteConnection sqlite_connection =null;

        if(isTrans)
            sqlite_connection = sqliteTrans.Connection;
        else
            sqlite_connection = this.ConnectionInstance;

        try
        {  
            SQLiteCommand sqlite_command = new SQLiteCommand("SELECT AdditionalServices, VitalObservation from tblReadonlyPatientData where SubscriptionID = 1306", sqlite_connection);
            SQLiteDataReader reader = sqlite_command.ExecuteReader();
            StringBuilder queryToExecute = new StringBuilder();

            while (reader.Read())
            {
                queryToExecute.Append(reader.GetString(0));
            }

            // always call Close when done reading. 
            reader.Close();
            reader = null;
            sqlite_command = null

        }
            catch (Exception e)
            {
                clsException.ExceptionInstance.HandleException(e);
                throw;
            }
            finally
            {
                if (!isTrans && sqlite_connection != null)
                {
                    if (sqlite_connection.State == System.Data.ConnectionState.Open)
                        sqlite_connection.Close();                    
                }
            } 
```

这些列是位数据类型和“真”值，但返回假。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T09:30:49.267

我已更新 sql lite 查询并将位列转换为 nvarchar，因此它以“true”或“false”格式返回字符串

```
SQLiteCommand sqlite_command = new SQLiteCommand("SELECT Cast(AdditionalServices as nvarchar(10)) as AdditionalServices, Cast(VitalObservation as nvarchar(10)) as VitalObservation from tblReadonlyPatientData where SubscriptionID = 1306", sqlite_connection); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:02:26.030

对于 sqlite，字符串 'true' 的计算结果为 False，因为 sqlite 将字符串转换为返回 0 的 Numeric 类型，该类型直接为 False：

```
sqlite> select cast('true' as numeric);
0 
```

取自[http://www.sqlite.org/lang_expr.html](http://www.sqlite.org/lang_expr.html)：

> 要将 SQL 表达式的结果转换为布尔值，SQLite 首先以与 CAST 表达式相同的方式将结果转换为 NUMERIC 值。NULL 或零值（整数值 0 或实值 0.0）被认为是错误的。所有其他值都被认为是真的。

因此，我建议您将真/假列更改为数字类型，并将 1 存储为真，将 0 存储为假。

# python - 在您的应用程序中使用 webapp2 auth 用户模型有多安全？

> ID：10313260
> 
> 赞同：0
> 
> 时间：2012-04-25T09:53:44.393
> 
> 标签：python, google-app-engine, webapp2

在[webapp-improved](http://webapp-improved.appspot.com/) [文档](http://webapp-improved.appspot.com/api/webapp2_extras/appengine/auth/models.html)中指出：

> 这是一个实验模块。API 可能会发生变化。

所以，我的问题是 - 在自定义应用程序中使用这些模型是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:50:33.417

Google 已将其作为 SDK 的一部分。我会说它对于大多数应用程序来说是非常安全的。与 Webapp2 中的代码相比，您更容易犯安全错误。我在我的应用程序中使用 Webapp2。

# c - 编译器相关 - 这两个 C 代码真的相同吗？

> ID：10313275
> 
> 赞同：2
> 
> 时间：2012-04-25T09:54:33.350
> 
> 标签：c, multithreading, compiler-construction, rtos

在多线程或 RTOS 环境中，以下这些代码是否相同？

我相信他们不是。但是第一个代码绝对保存在多线程环境中吗？编译器是否有规则为“ga”分配一个寄存器，并且稍后在 func_a() 中不会再次读取“ga”？

我知道我可以使用锁，但这不是关于如何保护数据的问题。这只是关于编译器行为的问题。

// ga 是一个全局变量。

```
int func_a() {

    int a = ga;
    return a>2 ? a-2 : 2-a;
}

int func_b() {

    return ga>2 ? ga-2 : 2-ga;
} 
```

我的意图是寻找一种标准方式（不是特定于平台的）来读取 ga 一次并将其值分配给局部变量“a”。

然后可以始终使用“a”，而不管“ga”是否已更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:21:35.117

C 标准中没有规则要求编译器以不同的方式实现这些函数。例如，当使用寄存器时，编译器可能会或可能不会“优化”从`ga`to的分配`a`（即“优化”，我的意思是：加载`ga`到 REG，然后使用相同的 REG 进行其余的计算，使用它作为`a`）。或者它可能不会这样做。

如果要实现无锁数据结构：

1.  C99 没有提供任何可以帮助您的东西。
2.  [C11](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)（最新标准）为您提供原子数据类型。

如果您使用的是 C99，那么您需要：

1.  使用锁（因此，不是无锁代码）
2.  准备好编写特定于架构的代码。您至少需要使用一组最小的原子操作，就像在[这个库](http://www.liblfds.org/)中所做的那样，它使用 x86、x86_64 和 ARM ISA 提供的原子操作来实现无锁数据结构。

在此答案的早期版本中，我谈到了一个*附带问题*（与相关，并且与您的*实际*`volatile`问题实际上无关）：

 *有一种情况可以限制如何`func_b`实现，但我实际上是在这里切线：如果`ga`被声明为`volatile`.

如果`ga`是易失性的，那么每次读取都`ga` *必须*`ga`重新从内存中加载。即 in `func_b`，`ga`将从内存中加载两次。一次用于比较，一次用于计算返回值。例如，预期用途是`ga`指内存映射的 I/O 端口。然后，如果`ga`两次读取之间的值发生变化，这将反映在返回值中。但是，如果您`ga`在另一个线程中进行更改，请不要期望理智/定义的行为。

另一方面，没有*限定符*`volatile`并不意味着`ga`将在`func_b`. 并且没有与“易失性相反”的限定词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T09:57:08.743

面对执行函数的多个线程，这两个版本的代码都具有未定义的行为。当然，不同的编译器可以对是否将全局变量保存到寄存器中做不同的事情。更重要的是，对于正在改变全局变量的线程，不能保证分配给局部变量可以以原子方式完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:01:40.137

行为取决于您使用的编译器，每个编译器都有自己的优化规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T10:55:59.247

这两个片段很可能会以相同的机器代码结束。在多线程情况下，它们都不安全。

`volatile`会强制创建一个临时变量，但由于不能保证从“ga”复制到 volatile 变量是原子的，所以这不是线程安全的。

编写此类代码的唯一安全方法是使用警卫：

```
int func_a() {

    mtx_lock(&ga_mutex);
    int a = ga;
    mtx_unlock(&ga_mutex);

    return a>2 ? a-2 : 2-a;
} 
```*

# objective-c - 在 iOS 应用程序上从 UDP 服务器接收数据不适用于 Linux 服务器，但适用于 macbook pro

> ID：10313278
> 
> 赞同：3
> 
> 时间：2012-04-25T09:54:47.413
> 
> 标签：objective-c, ios, cocoa-touch, udp, asyncsocket

背景：我做了一个基于UDP的IPhone socket应用程序。它在与 Linux [Ubuntu] 服务器通信时作为客户端和服务器工作。我正在使用 GCDAsyncUdpSocket 发送和接收数据。我的 Macbook 上还有一个备份服务器/客户端应用程序来测试/验证套接字通信应用程序。它的作用就像 Linux [Ubuntu] 服务器。它工作完美。

问题：我无法从 Linux [Ubuntu] 服务器接收任何数据。

详细信息：我可以成功地将数据发送到 Linux 服务器，它会对该数据做出反应/处理。但是当服务器发送回复或回显时，我的 iPhone 应用程序看不到/读取它。我与一位同事为 Android 开发的类似应用程序确实从服务器读取/查看数据。请看下面的代码。干杯!

这是它的代码：.m 文件：

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    backGround.userInteractionEnabled=YES;  
    udpSocket = [[GCDAsyncUdpSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];

    NSError *error = nil;
    if (![udpSocket bindToPort:0 error:&error]) //check ff of dit werkt!
    {
        return;
    }
    if (![udpSocket beginReceiving:&error])
    {
        return;
    }
}

- (IBAction)sendData:(id)sender 
{
    NSString *msg = messageField.text;
    NSData *data = [msg dataUsingEncoding:NSUTF8StringEncoding];
    [self sendingRealData:data];
}

-(void)sendingRealData:(NSData *) Content
{
    NSString *msg = [[NSString alloc] initWithData:Content encoding:NSUTF8StringEncoding];
    NSLog(@"msg is: %@", msg);
    NSString *host = [self getHost];
    int port = [self getPort]; 

    if ((port == 65536) && (host == @"-1"))
    {
        NSLog(@"Port and IP are not filled in!");
        [self errorManag:2]; 
    }

    else if ((port == 65536) && (host != @"-1"))
    {
        NSLog(@"return was -2");
        [self errorManag:1];
    }

    else if (host == @"-1")
    {
        NSLog(@"return was -1");
        [self errorManag:0]; 
    }

    else 
    {
        [udpSocket sendData:Content toHost:host port:port withTimeout:1 tag:tag];
        NSLog(@"Gestuurd");
    }
}

- (void)udpSocket:(GCDAsyncUdpSocket *)sock didReceiveData:(NSData *)data
  fromAddress:(NSData *)address
withFilterContext:(id)filterContext
{
    NSLog(@"niets."); 
    NSString *msg = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
if (msg)
{
        NSLog(@"iets gekregen");
}
else
{
    NSLog(@"Error convertion");
    //[self logError:@"Error converting received data into UTF-8 String"];
}
//NSString *test = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
//NSLog(@"%@",test); 
//[udpSocket sendData:data toAddress:address withTimeout:-1 tag:0];
    NSLog(@"HMMMM");
    messageField.text = [[NSString alloc] initWithFormat:@"RE: %@", msg]; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:24:07.883

我发现我在ViewDidLoad中写了绑定到port：0，因为这个建议之前给过我。

这导致移动设备监听随机端口而不是端口 12345。将绑定更改为端口 12345 并且有效！

# exception-handling - Struts 2 - 如何将 Exception 类型的异常重定向到特定页面，但不处理特定异常？

> ID：10313279
> 
> 赞同：3
> 
> 时间：2012-04-25T09:54:50.737
> 
> 标签：exception-handling, struts2, struts

我希望将所有类型的错误重定向`Exception`到结果“**错误**”。为此，我这样做了：

```
<global-exception-mappings>
          <exception-mapping result="error" exception="java.lang.Exception"></exception-mapping>
</global-exception-mappings> 
```

但我不想处理特定的异常，特别是`org.springframework.security.access.AccessDeniedException`应该允许进一步传播的异常。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:39:23.227

~~使用`instanceof`运算符并从异常处理程序重新抛出所需的异常。~~

我用拦截器管理它（这是我曾经尝试过的）：

```
package com.kenmcwilliams.interceptor;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.interceptor.Interceptor;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Rethrower implements Interceptor{
    @Override
    public void destroy() {
    }

    @Override
    public void init() {
    }

    @Override
    public String intercept(ActionInvocation invocation){
        System.out.println("Start rethrower!");
        String result = "success";
        try {
            result = invocation.invoke();
        } catch (Exception ex) {
            Logger.getLogger(Rethrower.class.getName()).log(Level.SEVERE, null, ex);
        }
        Object exception = ActionContext.getContext().getValueStack().findValue("exception");
        if (exception instanceof RuntimeException){
            System.out.println("DOING RETHROW!");
            RuntimeException e = (RuntimeException)exception;
            throw e;
        }
        System.out.println("After rethrower!");
        return result;
    }
} 
```

这是 struts.xml（为了节省查找 struts dtd 的时间）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
"http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
    <constant name="struts.devMode" value="true" />
    <constant name="struts.ui.theme" value="simple" />
    <package  name="kenmcwilliams"  namespace="/" extends="struts-default">
        <interceptors>
            <interceptor name="rethrower" class="com.kenmcwilliams.interceptor.Rethrower"/>
            <interceptor-stack name="rethrow-stack">
                <interceptor-ref name="rethrower"/>
                <interceptor-ref name="defaultStack"/>
            </interceptor-stack>
        </interceptors>
        <global-results>
            <result name="error" >/WEB-INF/content/error.jsp</result>
        </global-results>
        <global-exception-mappings>
            <exception-mapping exception="java.lang.Exception" result="error"/>
        </global-exception-mappings>
        <action name="mybomb" class="com.kenmcwilliams.kensocketchat.action.Bomb">
            <interceptor-ref name="rethrow-stack"/>
            <result>/WEB-INF/content/bomb.jsp</result>
        </action>
    </package>
</struts> 
```

最后的动作（它只是抛出一个运行时异常）：

```
package com.kenmcwilliams.kensocketchat.action;

import com.opensymphony.xwork2.ActionSupport;

public class Bomb extends ActionSupport{
    @Override
    public String execute() throws Exception{
        throw new RuntimeException();
    }
} 
```

# css - 三列的大小始终与动态内容相同

> ID：10313281
> 
> 赞同：0
> 
> 时间：2012-04-25T09:54:55.860
> 
> 标签：css, html, height

我有三个具有动态内容的 div，我需要三个 div 的高度始终相同。三个div的代码分别是：

```
<div class="boxcontent3">
    <div class="whitebox3">
        <div class="whiteboxdemocont">
            conten1
        </div>
    </div>
    <div class="whitebox3">
        <div class="whiteboxdemocont">
            content2
        </div>
    </div>
    <div class="whitebox3">
        <div class="whiteboxdemocont">
            content3
        </div>
    </div>
</div> 
```

和CSS样式：

```
.boxcontent3 {
    display: inline-block; 
    width: 100%;
}
.whitebox3 {
    float:left;
    background-color: white;
    border: 1px solid #dfe0e2; 
    -webkit-border-radius: 6px; /* Saf3-4, iOS 1-3.2, Android ≤1.6 */
    -moz-border-radius: 6px; /* FF1-3.6 */
    border-radius: 6px; /* Opera 10.5, IE9, Saf5, Chrome, FF4, iOS 4, Android 2.1+ */
    margin-top: 20px;
    margin-right: 10px;
    margin-bottom: 20px;
    width: 32%;
    height: 100%;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:18:04.713

嘿，我认为您像这样使用了显示表属性

**CSS**

```
.boxcontent3{
   display: table; 
   width: 100%;
}
.whitebox3{
display:table-cell;
background-color: white;
border: 1px solid #dfe0e2; 
-webkit-border-radius: 6px; /* Saf3-4, iOS 1-3.2, Android ≤1.6 */
-moz-border-radius: 6px; /* FF1-3.6 */
border-radius: 6px; /* Opera 10.5, IE9, Saf5, Chrome, FF4, iOS 4, Android 2.1+ */
margin-top: 20px;
margin-right: 10px;
margin-bottom: 20px;
width: 32%;
height: 100%;
}​ 
```

现场演示[http://jsfiddle.net/dNmLh/](http://jsfiddle.net/dNmLh/)

# java - EJB3 企业应用程序作为门户和客户端 Web 应用程序 - 架构/设计

> ID：10313283
> 
> 赞同：6
> 
> 时间：2012-04-25T09:55:05.920
> 
> 标签：java, enterprise, portal

![在此处输入图像描述](../Images/47229a01cbb30a6da62af8c2e1945d52.png)

如上图所示，我有一个 EJB-3 Enterprise 应用程序（EAR 文件），它充当一个门户并拥有 3 个与同一个数据存储进行通信和事务的 Web 应用程序（WAR 文件）。这 3 个 webapps 不是 portlet 实现，而是通过 Enterprise App 的持久层与数据存储交互的普通 webapps。这些 Web 应用程序是独立开发的，因此，其中一些使用来自企业应用程序的 Web 服务，而一些使用 EJB 客户端。

此外，还有一个替代这些 Web 应用程序（Web App1、Web App2 和 Web App3）并使用独立的企业应用程序与数据库进行通信和事务的选项，如下所示：

![在此处输入图像描述](../Images/9fb9f41133e23bf3c0d8495c24d0251e.png)

现在，我的问题是：

1) 上面列出的 2 个选项中最好的选项是什么？

2) 当我们将那些充当企业应用程序客户端的 Web 应用程序替换为独立的企业应用程序（EAR 文件）时，它有何影响？

3) 对于事务处理、SSO 功能、可扩展性和其他因素，什么是更好的模型？

4）还有其他更好的模型吗？

**编辑**：

1) 在第一个模型中，哪种方法是与 EAR 文件交互的首选方式 - webservices 或 ejb-client jar 文件/库（接口和实用程序类）？

2) 两种模型在内存使用（服务器 RAM）和性能方面有何不同。有什么明显的区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T21:50:58.320

既然你这么抽象，我也会这样做。如果我们删除所有流行词，如“门户”、“企业应用程序”等......我们最终拥有的是三个 Web 应用程序和一个通用库或框架（企业应用程序）。

看到它的应用程序尽可能简单。您有三个开发人员需要开发三个 Web 应用程序。您将提供一些有用的通用代码来构建他们的应用程序。您将使用的模型取决于您将提供的代码类型。

1.-您将只提供一些实用程序和通用业务代码。可能是古典图书馆适合您的需求。（在 Java EE 环境中，您必须考虑如何利用持久性缓存级别 2 为单个数据存储共享会话工厂的优势）

2.- 您将提供共享服务，如持久性、缓存、安全性、审计等……您将需要一个服务层作为第一个选项。您将拥有一个共享状态，因此您只需要一个实例。

3.- 更常见的情况是您既提供一些业务 API 又为公共服务提供服务层。

您并没有指出任何强制您为您的场景使用更复杂的解决方案的要求。

编辑：

关于它是首选 rmi（ejb 客户端）还是 web 服务。我总是使用 rmi 来与地理位置相近的应用程序进行通信。它的使用很简单，而且协议比 web 服务快得多（你可以阅读很多关于这个主题的比较，在 google 上搜索 rmi webservices 性能）。
另一方面，rmi 对网络延迟更敏感，需要特殊的防火墙配置，并且它比 web 服务更耦合。因此，如果我假装向第三方提供服务或连接地理上稀疏的服务器，我会更喜欢 Web 服务甚至 REST。

关于最后一个问题，最初在同一台服务器上部署一个或十个应用程序没有任何区别。与使用应用程序的开销相比，部署费用微不足道。当然，您必须将此作为一般假设。显然，应用程序的大小和部署方式将对内存消耗等产生影响。

您必须考虑到可以根据需要轻松更改此决定。因此，正如我所说，您可以从简单的解决方案开始，如果您在部署应用程序时遇到问题，您可以轻松地重组您的耳朵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:11:32.373

有一个名为[**Vitria**的***BusinessWare***](http://www.vitria.com/products/businessware/)的新平台，这是一个非常成功的项目，价值数百万。
现在让我们看看它是如何工作的以及它做了什么，以便我们在理论上可以做同样的事情：
它将项目与其数据库、Web 服务与其 EJB 等互连。从他们的概念中，我们可以了解到以下内容：

1.  创建主`EJB`无状态 bean ( *API* )，其工作是从以下位置传递消息：

    *   网络服务到其他网络服务
    *   Web 服务到 Web 应用
    *   webapps 到其他网络服务
2.  这样做的目的`EJB`是首先在主数据库中进行验证，然后将调用传递给其他模块。

3.  只有此 EJB 才能访问数据库以更安全地连接
4.  这`EJB`将使消息排队，直到要发送的模块可以自由接受
5.  这`EJB`将控制数据库中的所有进程
6.  这`EJB`将决定将消息发送到哪里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:42:34.900

我倾向于同意 Fedox。如果没有理由选择一种解决方案而不是另一种解决方案（业务原因、技术原因等），那么您不妨选择阻力最小的路径。在我看来，这将是第一个解决方案。

一般来说，从简单开始，然后根据需要增加复杂性。没有上下文，您的解决方案毫无意义。银行应用程序需要与博客不同的考虑因素。

希望这可以帮助

# c# - 为什么在调用 DllImport 之前中断时会出现 AccessViolationException？

> ID：10313287
> 
> 赞同：2
> 
> 时间：2012-04-25T09:55:18.797
> 
> 标签：c#, .net, visual-studio-2010, debugging, pinvoke

我正在尝试在 C# 中使用来自非托管 DLL 的 C 函数。

该函数的签名是：

```
const char*  CDECL get_lame_version       ( void ); 
```

我以这种方式导入函数：

```
[DllImport("libmp3lame.dll")]
static extern string get_lame_version(); 
```

如果我调用此函数，但在调用之前中断，然后按 F5，则会引发 AccessViolationException。

首先执行在调用*之前*中断：

![这里执行在调用之前中断](../Images/0426f62a54a2844df3213f94b3c4b0c8.png)

然后我按 F5 有一个例外：

![AccessViolationException](../Images/098177a81133d1f718cdb928339aa00b.png)

*如果在调用之后*执行中断，则不会引发异常：

![在此处输入图像描述](../Images/a04ed7226b9e08733f86003170377846.png)

所以我的问题是：我的代码有什么问题吗？如果不是，那是怎么回事？

**编辑**

下面是 get_lame_version 的定义：

```
/*! Get the LAME version string. */
/*!
  \param void
  \return a pointer to a string which describes the version of LAME.
*/
const char *
get_lame_version(void)
{                       /* primary to write screen reports */
    /* Here we can also add informations about compile time configurations */

#if   LAME_ALPHA_VERSION
    static /*@observer@ */ const char *const str =
        STR(LAME_MAJOR_VERSION) "." STR(LAME_MINOR_VERSION) " "
        "(alpha " STR(LAME_PATCH_VERSION) ", " __DATE__ " " __TIME__ ")";
#elif LAME_BETA_VERSION
    static /*@observer@ */ const char *const str =
        STR(LAME_MAJOR_VERSION) "." STR(LAME_MINOR_VERSION) " "
        "(beta " STR(LAME_PATCH_VERSION) ", " __DATE__ ")";
#elif LAME_RELEASE_VERSION && (LAME_PATCH_VERSION > 0)
    static /*@observer@ */ const char *const str =
        STR(LAME_MAJOR_VERSION) "." STR(LAME_MINOR_VERSION) "." STR(LAME_PATCH_VERSION);
#else
    static /*@observer@ */ const char *const str =
        STR(LAME_MAJOR_VERSION) "." STR(LAME_MINOR_VERSION);
#endif

    return str;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:40:33.537

pinvoke 签名错误。它应该是：

```
[DllImport("libmp3lame.dll", CallingConvention=CallingConvention.Cdecl)]
static extern IntPtr get_lame_version(); 
```

要调用它，您需要这样做；

```
string version = Marshal.PtrToStringAnsi(get_lame_version()); 
```

您不能依赖 p/invoke 编组器来编组字符串值，因为它不拥有该字符串。DLL 拥有该字符串。

更重要的是，您应该为 LAME DLL 函数指定调用约定，否则您最终会得到默认的 pinvoke 调用约定，`stdcall`. 对于没有参数的函数来说，这并不重要，但这是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:00:24.200

访问冲突是由非托管代码引起的，而不是您的 C# 代码。如果没有看到非托管代码，很难说问题出在哪里。

# asp.net - asp.net - 开发基于配置启用功能的 Web 应用程序

> ID：10313292
> 
> 赞同：2
> 
> 时间：2012-04-25T09:55:40.537
> 
> 标签：asp.net, architecture

我需要开发一个基于网络的产品。此功能将根据订阅类别提供给用户，例如基本版/高级版/企业版。我想为这些订阅类别维护单一来源。

我的问题是，

如何设计基于配置/订阅类别启用功能的 Web 应用程序？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:06:43.600

这是一个非常笼统的问题，我会笼统地回答。

您可以将角色分配给您的注册用户，然后使用`IsUserInRole`来检查您要显示的内容和不显示的内容。

为了提高速度，您可以将权限分配给用户会话，而不是总是调用`IsUserInRole`

`Panel`您可以使用它的和 Visible打开和关闭页面的某些部分。同时关闭隐藏的面板的视图状态。

或者，您可以`UserControls`在其中使用它来检查用户是否有权查看它，然后将其隐藏 OnInit，并禁用它的 ViewState。

当然，如果不允许整页，您可以随时进行完整重定向。

所以**一个完整的页面**可以有`Panels`, 和`UserControls`, 并且它的视图取决于用户级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:09:59.733

您将无法获得这个现成的，您必须根据您使用的技术设计应用程序。

我正在进行类似的项目，其中我们将功能列表存储在数据库中，并且当页面初始化时会在会话中加载功能列表。

在各个页面上，我们根据功能可用性显示/隐藏控件。

Offcourse Single 功能也可以基于用户角色来分类，我们可以使用 FormAuthentication 方法检查并相应地更改页面服务器端。

让我知道您是否有任何特定的方法并且有相关的问题。

# css - 如何防止 Chrome 调整背景图像的大小？

> ID：10313297
> 
> 赞同：1
> 
> 时间：2012-04-25T09:55:51.927
> 
> 标签：css, google-chrome, background

我有一个CSS背景：

```
background:url(img/bg.png) center top no-repeat white 
```

它在 FF、Safari 和 Opera 中运行良好，但 Chrome 会调整它的大小。图像为 2000 像素宽，因此它适用于所有屏幕分辨率（当然，宽度超过 2000 像素的除外）。然而，当在 Chrome 中揉搓时，它看起来很奇怪并且偏离了设计。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:02:58.213

Ctrl + 0 应该可以帮助您。

# xslt - 比较xslt中的2个序列

> ID：10313307
> 
> 赞同：0
> 
> 时间：2012-04-25T09:56:19.347
> 
> 标签：xslt, xslt-2.0, xpath-2.0

我有 2 个序列，一个是从 1 到 10，另一个是 1 到 3。如何将第二个序列与第一个序列进行比较以测试前 3 个项目是否相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:18:24.643

**使用这个简短的 XPath 表达式**：

```
deep-equal(subsequence($seq1, 1, count($seq2)), $seq2) 
```

在评估时，`true()`如果第二个序列是第一个序列的起始子序列，它会准确生成。这两个序列可以包含任何 XDM 项目的混合，包括节点。

**这是一个完整的演示**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

    <xsl:variable name="vSeq1" select=
        "1, 2, 3, 4, 5, 6, 7, 8, 9, 10"/>

    <xsl:variable name="vSeq2" select=
        "1, 2, 3"/>

    <xsl:variable name="vSeq3" select="/*/*"/>
    <xsl:variable name="vSeq4" select="/*/*[position() gt 5]"/>

    <xsl:variable name="vSeq5" select="/*/*"/>
    <xsl:variable name="vSeq6" select="/*/*[position() le 5]"/>

 <xsl:template match="/">
     <xsl:sequence select=
     "deep-equal(subsequence($vSeq1, 1, count($vSeq2)), $vSeq2)"/>
     ===========
     <xsl:sequence select=
     "deep-equal(subsequence($vSeq3, 1, count($vSeq4)), $vSeq4)"/>
     ===========
     <xsl:sequence select=
     "deep-equal(subsequence($vSeq5, 1, count($vSeq6)), $vSeq6)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**产生了想要的正确结果：**

```
 true
 ===========
 false
 ===========
 true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:56:45.537

假设你有两个变量`seq1`，`seq2`你可以简单地测试`<xsl:if test="$seq1[1] eq $seq2[1] and $seq1[2] eq $seq2[2] and $seq1[3] eq $seq2[3]">...</xsl:if>`.

# ios - 如何为流媒体执行硬件加速 H.264 编码和解码？

> ID：10313308
> 
> 赞同：14
> 
> 时间：2012-04-25T09:56:20.933
> 
> 标签：ios, decode, encode, h.264

我能够从相机获取 RGBA 帧数据，并且我想将其编码为 H.264 格式。我使用 FFmpeg 对 H.264 视频进行编码和解码，但是对于 640x480 的帧大小，它对于我的需要来说太慢了。

我想使用硬件加速来加速编码和解码，那我该怎么做呢？

此外，我需要能够通过网络传输编码的视频并在另一端对其进行解码。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-26T14:57:16.383

如果你想在 iOS 上做 H.264 视频的硬件加速视频编码和解码，唯一的出路就是 AVFoundation。不要使用第三方库进行编码或解码，因为它们目前都受 CPU 限制，并且比从 AVFoundation 获得的要慢得多。使用第三方编码器或解码器的一个原因是，如果您使用的是 iOS 默认不支持的格式。

对于硬件加速解码，您需要使用 AVAssetReader 实例（或用于纯播放的播放器类之一）。使用 AVAssetReader，我经常会获得 2 倍或更高的播放速度来读取 H.264 编码的视频，因此 iOS 设备为此使用了一些相当不错的硬件加速。

同样，对于加速编码，您将使用 AVAssetWriter。有一些技巧可以让 AVAssetWriter 以最佳速度进行编码（输入 BGRA 帧，使用像素缓冲池，如果从 OpenGL ES 读取，则使用 iOS 5.0 纹理缓存），我在[这个答案](https://stackoverflow.com/a/9672890/19679)中详细描述了这些技巧。

如果您想查看一些使用我发现的最快路径进行加速编码和解码的代码，您可以查看我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架，与 Anastasia 链接的框架不同，它完全免费使用。

# variables - 将变量传递给 xquery xpath 属性查询

> ID：10313311
> 
> 赞同：1
> 
> 时间：2012-04-25T09:56:25.000
> 
> 标签：variables, xpath, attributes, range, xquery

我正在尝试执行一个简单的 xquery 操作以返回其属性与一系列数字匹配的节点列表

我尝试了以下...

XML 源：

```
 <cars>
     <car id="1">Ford</car>
     <car id="2">Mazda</car>
     <car id="3">Toyota</car>
     <car id="4">Lexus</car>
    </cars> 
```

查询：

```
 let $i := 1
    return //car[@id="{$i}"] 
```

但它不起作用。看起来很简单，谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:45:36.947

它甚至比这更容易：

```
let $range := 2 to 3
return //car[@id = $range] 
```

结果：

```
<car id="2">Mazda</car>
<car id="3">Toyota</car> 
```

# javascript - 如何获取所有以某些东西开头的 HTML 属性（属性名称，*不是*它们的值！）

> ID：10313312
> 
> 赞同：7
> 
> 时间：2012-04-25T09:56:25.233
> 
> 标签：javascript, dom, selector

我想获取 HTML 页面中的所有元素/节点，其中包含以某些东西开头的属性（同样，属性名称以某些东西开头，而不是它们的值！）。例如，TinyMCE 倾向于将自定义属性添加到它保存的元素中，例如`"mce_style"`, `"mce_href"`,`"mce_bogus"`等。我希望有类似 CSS3 选择器的属性值`[attr^="mce_"]`，**但不是值，属性名称**。

当然，我可以遍历所有 DOM 节点及其属性，并一一检查，但我想知道是否有更有效的方法。

请不要给我 TinyMCE 特定的答案，我很确定有一个标志会阻止 TinyMCE 保存这些属性，但问题是通用的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T11:06:05.323

[这是一个简单的演示](http://jsfiddle.net/H5rVq/2/)，用于查找包含以 . 开头的属性的所有元素`mce_`。可能需要一些改进。

```
function getMCE() {
    var el, attr, i, j, arr = [],
        reg = new RegExp('^mce_', 'i'),                //case insensitive mce_ pattern
        els = document.body.getElementsByTagName('*'); //get all tags in body

    for (i = 0; i < els.length; i++) {                 //loop through all tags
        el = els[i]                                    //our current element
        attr = el.attributes;                          //its attributes
        dance: for (j = 0; j < attr.length; j++) {     //loop through all attributes
            if (reg.test(attr[j].name)) {              //if an attribute starts with mce_
                arr.push(el);                          //push to collection
                break dance;                           //break this loop
            }
        }
    }
    return arr;
}

console.log(getMCE())​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:08:50.770

尝试这个：

**功能**

```
//custom selector expression
$.extend($.expr[':'],{
attr:function(o,i,m){
  var attrs=$.getAttrAll(o),re=m[3],found=false;
  $.each(attrs,function(k,v){
  if(new RegExp(re).test(v)) { return found=true;}
});
return found;
} 
});
// get all atrributes of an element
$.getAttrAll=function(el){
  var rect = [];
  for (var i=0, attrs=el.attributes, len=attrs.length; i<len; i++){
    rect.push(attrs.item(i).nodeName);
  }
  return rect;
}; 
```

` **用法**

```
// calling custom selector expression :attr(regexp)
$(function(){
  $('body').find(':attr("^mce_")').css({background:'yellow'});
}); 
```

**HTML**

```
<body>
  <p mce_style="height:50px" id="x" data-hello="hello">selected</p>
  <div not_mce_bogus="abc">not_mce_bogus</div>
  <div mce_href="http://rahenrangan.com">selected</div>
  <p>othrs</p>
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T20:19:14.340

如果您不介意临时更改 DOM，一种选择是将 HTML 提取到字符串中并通过 RegExp 搜索属性。当您找到属性时，您可以在 DOM 中附加一个“针”，以便您可以使用 jQuery 来选择元素。

这是一个工作概念（在控制台打开的情况下运行）：

[http://jsfiddle.net/skylar/N43Bm/](http://jsfiddle.net/skylar/N43Bm/)

代码：

```
$.fn.extend({

    findAttributes: function(attribute) {

        var attributeFinder = new RegExp(attribute + '(.+)="', "gi");
        var elementHTML = this.html().replace(attributeFinder, "data-needle='pin' "+attribute+"$1=\"");

        this.html(elementHTML);

        return this.find("[data-needle=pin]").removeAttr('data-needle');
    }

});

console.log($("body").findAttributes('mce_')); 
```

注意：我的正则表达式不是很好。在这个例子中，你必须比我更小心。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-25T10:16:28.160

试试这个：（我尝试用 * 代替`a`标签，但它为所有元素着色，包括那些没有`mce_style`属性的元素）

```
a[mce_style] { color : red; }​ 
```

演示：http: [//jsfiddle.net/Tcdmb/](http://jsfiddle.net/Tcdmb/)

更多信息：[https ://developer.mozilla.org/en/CSS/Attribute_selectors](https://developer.mozilla.org/en/CSS/Attribute_selectors)

# android - 使用位置打开 .java 的最有效方法

> ID：10313315
> 
> 赞同：2
> 
> 时间：2012-04-25T09:56:27.607
> 
> 标签：android

很抱歉出现格式错误 - 一旦你拥有它（或其他变量）来激活文件或其他任务，你如何使用它？例如，我想使用位置 1 打开 screen1.java，使用位置 2 打开 screen2.java。我可以使用 if/else 语句，但我可以一行而不是多行吗？如果我有 100 个不同的屏幕，那么 if then 语句将是愚蠢的。这是我所拥有的（不正确的）示例。你能帮我改正吗？

```
public void onItemClick(AdapterView<?> parent, View v,
int position, long id){
//opens relevant game window
Intent intent = new Intent(context, "game"+(position)+"mainscreen"+".class");
startActivity(intent);
} 
});
} 
```

总结：- **而不是使用**game1mainscreen.class**我想使用**“游戏”+（位置）+“主屏幕”+“.class”之类的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:11:00.557

您可以在 AndroidManifest.xml 文件中为您的活动定义意图过滤器，如下所示

```
<activity
  android:name=".Game1MainScreen"
  android:label="@string/app_name"
    <intent-filter>
      <action android:name="com.mygame.game1mainscreen" />
      <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

然后使用以下代码开始您的游戏活动

```
Intent intent = new Intent("com.mygame.game"+(position)+"mainscreen");
startActivity(intent); 
```

# javascript - Jquery validate（样式化表内的错误）

> ID：10313316
> 
> 赞同：1
> 
> 时间：2012-04-25T09:56:39.803
> 
> 标签：javascript, jquery, html, css

我有一个带有 Jquery .validation() 的表单。

形式：

```
<form....>
<table cellspacing="0" cellpadding="0">
<tr>
<td>Name: </td>
<td><input type='text' name='Name'/></td>
</tr>
<tr>
<td>Last Name: </td>
<td><input type='text' name='LastName'/></td>
</tr>
<tr>
<td>Address: </td>
<td><input type='text' name='Address'/></td>
</tr>
</table>
<input type='submit' name='enter' value='submit'/>
</form> 
```

我想打印这样的错误：

![在此处输入图像描述](../Images/e8292eab2b478f8f1dbc6698933a9602.png)

可能吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:13:00.943

[在这里演示](http://jsfiddle.net/kMfV3/)

**HTML**

```
<form name="test">
<table cellspacing="1" cellpadding="1">
<tr>
<td>Name: </td>
<td><input type='text' name='Name'/>
    <span class="error_span">Enter name</span>
    </td>
</tr>
<tr>
<td>Last Name: </td>
<td><input type='text' name='LastName'/>
        <span class="error_span">Enter last name</span>
    </td>
</tr>
<tr>
<td>Address: </td>
<td><input type='text' name='Address'/>
        <span class="error_span">Enter address</span>
    </td>
</tr>
</table>
<input type='button' id='submit' name='enter' value='submit'/>
</form> 
```

**jQuery**

```
$(document).ready(function(){
    $("#submit").click(function(){
        $('input').each(function(index) {
                   if($(this).val()=="") {
                       $(this).addClass("has_error");
                       $(this).siblings(".error_span").show();
                   }else{
                       $(this).removeClass("has_error");
                       $(this).siblings(".error_span").hide();
                   }
          });
    });
 }); 
```

**CSS**

```
.error_span{
color:red;
    display:none;
}

.has_error{
 border:1px solid red;
} 
```

[在这里演示](http://jsfiddle.net/kMfV3/)

如果出现验证错误，您可以使用`onsubmit`表单的属性来执行 javascript 并停止表单提交

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:03:17.373

你可以通过两种方式..

1)

```
<form....>
<table cellspacing="0" cellpadding="0">
<tr>
<td>Name: </td>
<td><input type='text' name='Name'/></td>
</tr>
<tr>
<td>Last Name: </td>
<td><input type='text' name='LastName'/></td>
</tr>
<tr>
<td></td>
<td>Name Is Required</td>
</tr>
<tr>
<td>Address: </td>
<td><input type='text' name='Address'/></td>
</tr>
</table>
<input type='submit' name='enter' value='submit'/>
</form> 
```

或者

2)

```
<form....>
    <table cellspacing="0" cellpadding="0">
    <tr>
    <td>Name: </td>
    <td><input type='text' name='Name'/></td>
    </tr>
    <tr>
    <td>Last Name: </td>
    <td><input type='text' name='LastName'/> <br />Name Is Required</td>
    </tr>
    <tr>
    <td>Address: </td>
    <td><input type='text' name='Address'/></td>
    </tr>
    </table>
    <input type='submit' name='enter' value='submit'/>
    </form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:04:14.070

您必须使用自定义验证代码才能做到这一点。检查此链接。[http://docs.jquery.com/Plugins/Validation/Validator/addMethod](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)

# c# - 使用 Linkedin api 时出现 400 错误请求

> ID：10313317
> 
> 赞同：2
> 
> 时间：2012-04-25T09:56:42.597
> 
> 标签：c#, .net, linkedin, http-status-code-400

我从[LinkedIn 开发者论坛线程](https://developer.linkedin.com/thread/1230)下载了这个示例：LinkedInAuth.rar.zip，它可以工作。

当我使用：

```
string response = _oauth.APIWebRequest(
    "GET",
    "http://api.linkedin.com/v1/people/~/group-memberships:(group:(id,name,counts-by-category))?membership-state=member",
     null); 
```

它返回所有组。

但是当我使用：

```
string response = _oauth.APIWebRequest(
    "GET",
    "http://api.linkedin.com/v1/groups/{2139884}/posts:(creation-timestamp,title,summary,creator:(first-name,last-name,picture-url,headline),likes,attachment:(image-url,content-domain,content-url,title,summary),relation-to-viewer)?category=discussion&order=recency&modified-since=1302727083000&count=5",
    null);` 
```

它返回错误：

> 400 错误请求

我使用了一个硬编码的组 id，它存在并由 1st 返回。我试图按照[文档](https://developer.linkedin.com/documents/groups-api)进行操作。任何人以前都遇到过这个问题，或者我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:16:53.953

仔细检查您的服务器时间。在我改变它之前我遇到了同样的问题（这个问题在夏季时间改变之后开始发生）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:40:15.750

您不需要 ID 周围的花括号。花括号表示您将在此处放置一个变量。尝试：

```
http://api.linkedin.com/v1/groups/{2139884}/posts:(creation-timestamp,title,summary,creator:(first-name,last-name,picture-url,headline),likes,attachment:(image-url,content-domain,content-url,title,summary),relation-to-viewer)?category=discussion&order=recency&modified-since=1302727083000&count=5 
```

# android - 更改 Facebook 密码后，Facebook 客户端崩溃 facebook SSO 登录对话框

> ID：10313318
> 
> 赞同：2
> 
> 时间：2012-04-25T09:56:57.510
> 
> 标签：android, facebook, single-sign-on

我在使用 SSO 登录 Facebook 时遇到了崩溃。我在任何类似的论坛中都找不到任何报告。

当我们在 facebook 网站上更改用户密码时，大约 15 秒内，android facebook 客户端将通过通知栏通知用户 facebook 身份验证失败。如果用户做出反应并登录，我们的应用程序 SSO 将毫无问题地获取新令牌。

如果用户更改密码，在用户对 Facebook 应用程序通知做出反应并使用新密码登录之前启动我们的应用程序 facebook 请求（如下载好友列表），我们会遇到 SSO 崩溃，这会错误地通知我们的应用程序用户取消登录。

不知何故，facebook 应用程序登录对话框（蓝色对话框）和 SSO 登录对话框（白色对话框）不能同时存在。如果它们同时打开，SSO 发起的 Facebook 客户端实例会崩溃，并出现以下异常：

```
04-25 10:40:39.790: E/AndroidRuntime(5991): FATAL EXCEPTION: main
04-25 10:40:39.790: E/AndroidRuntime(5991): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.facebook.katana/com.facebook.katana.ProxyAuth}: java.lang.NullPointerException
04-25 10:40:39.790: E/AndroidRuntime(5991): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-25 10:40:39.790: E/AndroidRuntime(5991): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-25 10:40:39.790: E/AndroidRuntime(5991): at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-25 10:40:39.790: E/AndroidRuntime(5991): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-25 10:40:39.790: E/AndroidRuntime(5991): at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 10:40:39.790: E/AndroidRuntime(5991): at android.os.Looper.loop(Looper.java:130)
04-25 10:40:39.790: E/AndroidRuntime(5991): at android.app.ActivityThread.main(ActivityThread.java:3691)
04-25 10:40:39.790: E/AndroidRuntime(5991): at java.lang.reflect.Method.invokeNative(Native Method)
04-25 10:40:39.790: E/AndroidRuntime(5991): at java.lang.reflect.Method.invoke(Method.java:507)
04-25 10:40:39.790: E/AndroidRuntime(5991): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
04-25 10:40:39.790: E/AndroidRuntime(5991): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
04-25 10:40:39.790: E/AndroidRuntime(5991): at dalvik.system.NativeStart.main(Native Method)
04-25 10:40:39.790: E/AndroidRuntime(5991): Caused by: java.lang.NullPointerException
04-25 10:40:39.790: E/AndroidRuntime(5991): at com.facebook.orca.common.util.Base64.c(Base64.java:497)
04-25 10:40:39.790: E/AndroidRuntime(5991): at com.facebook.orca.common.util.Base64.b(Base64.java:459)
04-25 10:40:39.790: E/AndroidRuntime(5991): at com.facebook.katana.ProxyAuth.b(ProxyAuth.java:36)
04-25 10:40:39.790: E/AndroidRuntime(5991): at com.facebook.katana.activity.PlatformDialogActivity.a(PlatformDialogActivity.java:127)
04-25 10:40:39.790: E/AndroidRuntime(5991): at com.facebook.orca.activity.FbFragmentActivity.onCreate(FbFragmentActivity.java:48)
04-25 10:40:39.790: E/AndroidRuntime(5991): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-25 10:40:39.790: E/AndroidRuntime(5991): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-25 10:40:39.790: E/AndroidRuntime(5991): ... 11 more 
```

另一个提示是上面一点，在 facebook 应用程序中有一个窗口泄漏非致命异常： Activity com.facebook.katana.ProxyAuth has leaked window`com.android.internal.policy.impl.PhoneWindow$DecorView@406eecf0 that was originally added here` 有人遇到过类似的崩溃吗？我真的很困惑，没有人提到那些崩溃，据谷歌可以找到。我在实施此操作时遵循了 hackbook 示例。我真的不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T22:01:01.763

可能与密码更改无关，但删除：

AndroidManifest.xml 中的 android:launchMode="singleInstance"

为我解决了一个类似的错误（也是 com.facebook.katana/com.facebook.katana.ProxyAuth 中的 java.lang.NullPointerException）

# php - 无法从 Plupload 获取 JSON 数据

> ID：10313319
> 
> 赞同：4
> 
> 时间：2012-04-25T09:56:59.673
> 
> 标签：php, jquery, json, plupload

我正在使用 Plupload 上传文件，它工作正常。

我已经测试了 Stackoverflow 上的各种建议，但我仍然无法从我的 JSON 响应中获得任何合理的数据。

在我的`upload.php`文件中，我有`echo json_encode($result);`

在我的 JS 中，我执行以下操作：

```
 uploader.bind('FileUploaded', function(up, file, response) {
    var obj = jQuery.parseJSON(response);
    var obj2 = eval(response);

    alert(response.toSource()); // <-- Outputs raw data
    alert(obj); // <-- is NULL
    alert(obj2.toSource()); // <-- Outputs eval data format
    alert(obj2.logo_url); // <-- Is not working
  }); 
```

`alert(response.toSource());`返回这个：

```
({response:"{
  \"logo_url\":\"http:\\/\\/mysite.com\\/uploads\\/3b\\/7b019482c806f9_logo.jpeg\",
  \"img_id\":\"30\",
  \"feedback\":{\"message\":\"File uploaded\",
  \"success\":true}}", 
  status:200}) 
```

并且`obj`为 NULL。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-15T17:04:49.213

var uploader = $("#multi_upload").pluploadQueue();

```
uploader.bind('FileUploaded', function (up, file, res) {
    var res1 = res.response.replace('"{', '{').replace('}"', '}');
    var objResponse = JSON.parse(res1);
    alert(objResponse.fn);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T10:50:40.487

有很多事情是错误的

1.  删除引号转义 \"
2.  响应 + 状态应该用引号引起来

IE

```
{
    "response": {
        "logo_url": "http: \\/\\/mysite.com\\/uploads\\/3b\\/7b019482c806f9_logo.jpeg",
        "img_id": "30",
        "feedback": {
            "message": "Fileuploaded",
            "success": true
        }
    },
    "status": 200
} 
```

# php - 使用 javascript 验证的 PHP 邮件问题

> ID：10313327
> 
> 赞同：0
> 
> 时间：2012-04-25T09:57:16.770
> 
> 标签：php, javascript, validation, email

我正在尝试在 Javascript 验证后从同一 PHP 页面发送电子邮件，但在发送电子邮件时遇到了一些问题。有人可以帮我解决这个问题吗？

这是 JavaScript 代码：

```
 <!-- -->
        <script type="text/javascript">                                                
        function checkCheckBoxes() {

            if (document.form.inforequired.checked == true)
            {
                if (document.form.option1.checked == false && document.form.option2.checked == false && document.form.option3.checked == false && document.form.option4.checked == false && document.form.option5.checked == false && document.form.option6.checked == false && document.form.option7.checked == false && document.form.option8.checked == false  && document.form.option9.checked == false && document.form.option10.checked == false)
                {
                    document.getElementById('error').innerHTML = "Please choose your options.";
                    return false;   
                }

                if (document.form.option8.checked == true  || document.form.option9.checked == true || document.form.option10.checked == true)
                {
                    if (document.form.address.value == "" )
                    {
                        document.getElementById('erroraddress').innerHTML = "Please enter your address.";
                        return false;
                    }
                }
                else
                {
                    document.forms["form"].submit();
                    return true;
                }

            }
            else
            {
                document.forms["form"].submit();
                return true;
            }
        }
    </script>
    <!-- Email --> 
```

这是在 else 部分发送电子邮件的 PHP 代码。

```
<div id="content">
    <h1 id="formSpacingHeading"> Visitor Information </h1>

 <?if( !isset($_POST['submit'])):?> 

    <form id="form" name="form" onsubmit="return checkCheckBoxes();" action="" method="POST">

        <p id="formSpacing"><label for="username" class="iconic user" > Name <span class="required">*</span></label> <input type="text" name="username" id="username"  required="required" placeholder="Enter your name"  /></p>        
        <p id="formSpacing"><label for="usermail" class="iconic mail-alt"> E-mail address <span class="required">*</span></label> <input type="email" name="usermail" id="usermail" placeholder="Enter your E-mail ID" required="required"  /> </p>
        <p id="formSpacing"><label for="contactno" class="iconic link"> Contact number <span class="required">*</span></label> <input type="text" pattern="^\d\d\d\d\d\d\d\d\d\d$" name="contact" id="contactno"  placeholder="Enter your contact number" required="required" /></p>
        <input type="submit" name="submit" value="Submit Form" />
    </form>

<?php else :
        $name=$_POST['username'];
        $mail=$_POST['usermail'];
        $contact=$_POST['contact'];

        $to = "admin@xxx.com";
        $subject = "New Visitor Information";
        $message = $name;
        $from = $mail;
        $headers = "From:" . $from; 
        $email = mail($to, $subject, $message, $headers);

        if($email){
            echo "Thank you. We will keep you updated with the latest information.";
        }
        else{
            echo "Error processing your request. Please try again later.";
        }
?>
<? endif ?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-26T03:38:58.820

我不是 PHP 专家，但我已经在其中编写了一些基本的东西。

我认为你的 if 语句都错了。

改变..

```
<?if( !isset($_POST['submit'])):?> 
```

至

```
 <?if( !isset($_POST['submit'])){?> 
```

改变

```
<?php else : 
```

至

```
<?php } else { 
```

改变

```
?>
<? endif ?> 
```

至

```
 }?> 
```

# javascript - Tumblr 快速赞按钮不起作用

> ID：10313328
> 
> 赞同：0
> 
> 时间：2012-04-25T09:57:21.397
> 
> 标签：javascript, tumblr

**编辑，2013 年 4 月：**不再需要旧代码。改用 Tumblr 的“喜欢”和“转发”按钮的新短代码！

[http://developers.tumblr.com/post/49193689915/attn-fantastic-theme-developers-tumblr-users-can](http://developers.tumblr.com/post/49193689915/attn-fantastic-theme-developers-tumblr-users-can)

**旧代码：**

我正在使用@ThinkingStiff 的代码（[https://stackoverflow.com/a/9048446/351320](https://stackoverflow.com/a/9048446/351320)）。

这是现场示例：[http ://themelab01.tumblr.com/](http://themelab01.tumblr.com/)

我的html代码：

```
 {block:Posts}
        {block:Text}
            <li id="{PostID}" class="post text">
                {block:Title}
                    <h3><a href="{Permalink}">{Title}</a></h3>
                {/block:Title}

                {Body}
            </li>
            <a href="{ReblogURL}" class="reblog">reblog</a>
            <a href="#" class="like">like</a>
        {/block:Text} 
```

css

```
#like-it {
    display: none;
}
.liked, .like:hover {

    color: red !important;
} 
```

js

```
$(document).on('click', '.like', function (event) {

    event.preventDefault();

    var command = $(this).hasClass('liked') ? 'unlike' : 'like',
        post = $(this).closest('.post'),
        oauth = post.find('.reblog').attr('href').slice(-8),
        id = post.attr('id'),
        likeUrl = 'http://www.tumblr.com/' + command + '/' + oauth + '?id=' + id;

    $('#like-it').attr('src', likeUrl);
    $(this).toggleClass('liked');

}); 
```

空的 iframe 位于页面底部。但是，这是行不通的。当我点击“喜欢”时，我的仪表板中喜欢的帖子数量会增加（其中显示“喜欢 n.帖子），但帖子不会出现在“喜欢”页面中，文本应该保持红色，但不会。什么是我失踪了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:55:18.967

我最近更新了我的代码，使它成为一个剪切和粘贴的工作。这消除了对 jQuery 和 post ID 的需要，这两个领域人们总是遇到麻烦。

教程在这里： http: [//like-button.tumblr.com](http://like-button.tumblr.com)

将以下代码块剪切并粘贴到您的主题中`</head>`。这将在每个帖子上为您提供一个类似于默认 Tumblr 灰色心形的“赞”按钮。当您将鼠标悬停在它上面并单击它时，它会变成红色。如果再次单击它，它将再次变为灰色并删除Like。

```
<style>
.my-like {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAABH0lEQVQ4y62T30vCUBiGv/9YuhBLkCA08FdogRFFYFEUhhZNCCQoSESiIOii68pl5qV6s8Eb7+SMHXNs6S7ejZ3zvA+ccT4BICofvS88dJ7w8vqG8WQC754K17lPjrx3z3l8D4YoVaqIrWbcJNbzaHefNZjfXPdy5b0jsO/IRqMxUpmSBnhz2bx1QL79GPbpEePmzhdSyW8fBDL0SK68HwiGCT2S3NiKREaPzP7QRRNPZSHpwm4kMnqkYbQikdEjZv8HK2ubS4nY75mD6WU8qzeXkrHvToBlWSjuHC4kYo99V8bwBnM0/iMiz542myq2bSPskcmR/zPos7lvP8Lv/nGd+/N6c2Xq2KcXhiY6qV1rxwotU3n/NHF8fgW+g9hfsHJlJUYljcgAAAAASUVORK5CYII=) !important;
    height:17px;
    width:19px;
    cursor:pointer;
    display:inline-block;
    vertical-align:top;
}
.my-liked, .my-like:hover {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAABSklEQVQ4y2P4//8/Awy/O3fu/905c/4/2779/69Pn/4jy8Hwz/fv/z/buvX/vfnz/7+/eBFFDZj4cOXK/8O+Pv+36+rA8W4zs/8Ply1DUXx/4cL/u0yMUdQdCQ76/+nWLbA6hq+PH//fbW6OogAZ3+zvByu81t6OU80ea6v/P16//s9wqboKpyIYPhYeTlDN1abG/wz7HR0JKiQGH3Bz+8+ww0CfKobtMjb6z0ANg+CGgQKPKt50dfnPcL6wkCqGXaoo/8/w5tgxyg3T0wUnYHBiPJuZSZFhF8pK/8NzACjrgKKWHINAOef3168Iw0D429OnGFmKEAZlJVDKR8mbMAyy4XRqClEGnc3J+f/nxw/MjI6OQflxh6EBzvR0Z9o0rCUKVsNA+MuD+/9PJiSgGHQmPf0/KDhw6cFpGAy/OnAAbOibEyf+E1ILAFBjDrchm7KrAAAAAElFTkSuQmCC) !important;
    height:17px;
    width:19px;
    cursor:pointer;
    display:inline-block;
    vertical-align:top;
}
</style>
<script>
window.onload = function () {
document.body.insertAdjacentHTML( 'beforeEnd', '<iframe id="my-like-frame" style="display:none;"></iframe>' );
document.addEventListener( 'click', function ( event ) {
    var myLikeLink = event.target;
    if( myLikeLink.className.indexOf( 'my-like' ) > -1 ) {
        var myLikeFrame = document.getElementById( 'my-like-frame' ),
            liked = ( myLikeLink.className == 'my-liked' ),
            command = liked ? 'unlike' : 'like',
            reblog = myLikeLink.getAttribute( 'data-reblog' ),
            postId = myLikeLink.getAttribute( 'data-id' ),
            oauth = reblog.slice( -8 ),
            likeUrl = 'http://www.tumblr.com/' + command + '/' + oauth + '?id=' + postId;
        myLikeFrame.src = likeUrl;
        liked ? myLikeLink.className = 'my-like'
            : myLikeLink.className = 'my-liked';
    };
}, false );
};
</script> 
```

然后将以下按钮代码剪切并粘贴到您希望喜欢按钮所在的主题中（这必须在您的`{block:Posts}`块内）。

代码：

```
<div class="my-like" data-reblog="{ReblogURL}" data-id="{PostID}"></div> 
```

# java - 如何使用 smack 库来构建客户端应用程序，以便我接收不断出现的传入消息？

> ID：10313330
> 
> 赞同：0
> 
> 时间：2012-04-25T09:57:45.377
> 
> 标签：java, xmpp, smack

我正在使用此代码，我使用 smack 库连接到 Google 服务器。但问题是我不知道如何保持代码运行，以便我可以继续发送和接收消息。请善待帮助我有这个。我正在复制粘贴代码：

```
// connect to gtalk server
ConnectionConfiguration connConfig = new ConnectionConfiguration("talk.google.com", 5222, "gmail.com");
XMPPConnection connection = new XMPPConnection(connConfig);
connection.connect();

// login with username and password
connection.login("camel.test.1", "secret");

// set presence status info
Presence presence = new Presence(Presence.Type.available);
connection.sendPacket(presence);

// send a message to somebody
Message msg = new Message("xxx.xxx@gmail.com", Message.Type.chat);
msg.setBody("hello");
connection.sendPacket(msg);

connection.disconnect(); 
```

请注意，使用此代码发送消息可以正常工作。让我知道我需要在同一代码中进行的修改，以便我可以将其用于发送和接收消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:11:04.903

*   不要让您的应用程序终止。
*   不要断开连接。
*   注册一个[PacketListener](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/PacketListener.html)来监听传入的消息。

# php - 如何突出显示搜索结果

> ID：10313332
> 
> 赞同：4
> 
> 时间：2012-04-25T09:57:53.890
> 
> 标签：php, mysql, html, function, syntax-highlighting

你好，我有一个搜索功能，我将在数据库中搜索关键字。我想突出显示关键字并找到我想在搜索功能中实现的第二个功能。

所以我有这个搜索代码：

```
<?php 
function searchText($keywords){
    global $db;
    $returned_results = array();
    $where2 = "";

    $keywords = preg_split('/[\s]+/', $keywords); 
    $total_keywords = count($keywords);

    foreach ($keywords as $key=>$keyword){
        $where2 .= "`column` LIKE '%$keyword%'";

        if ($key != ($total_keywords - 1)){ 
            $where2 .= " OR ";
        }
    }

    $results_text = "SELECT `a`, `b`, LEFT(`c`, 150) as `c` FROM `table` WHERE $where2"; 
    $results_num_text = ($query2 = mysqli_query($db, $results_text)) ? mysqli_num_rows($query2) : 0; 
    if ($results_num_text === 0){
        return false;
    } else {

        while ($row = mysqli_fetch_assoc($query2)){

            $returned_results[] = array(
                'ab' => $row['ab'],
                'cd' => $row['cd'], 
            );
        }

        return $returned_results;
    }
}
?> 
```

并希望在其中实现第二个功能：

```
<?php
function mark_words ($text, $words, $colors = false)
{

    if (!$colors || !is_array($colors) ) {
        $colors = array('#ff9999', '#ffff99', '#ff99ff', '#99ffff','#99ff99');
    }

    $c = 0;

    foreach ($words as $w) {

        $w = preg_quote(trim($w));

        if($w=='') {
            continue;
        }

        $regexp = "/($w)(?![^<]+>)/i";

        $replacement = '<b style="background-color:'.$colors[$c].'">\\1</b>';

        $text = preg_replace ($regexp,$replacement ,$text);

        $c++;
        if ($c >= count($colors)) {
            $c=0;
        }
    }
    return $text;
}

$example = <<< EOT
some text is here inside
EOT;

$search = array('some','is', 'inside');

echo mark_words($example, $search);
?> 
```

所以我有这个不起作用的代码：

```
<?php 
function searchText($keywords, $colors = false){
    global $db;

     if (!$colors || !is_array($colors) ) {
        $colors = array('#ff9999', '#ffff99', '#ff99ff', '#99ffff','#99ff99');
    }

    $c = 0;

    $returned_results = array();
    $where2 = "";

    $keywords = preg_split('/[\s]+/', $keywords); 
    $total_keywords = count($keywords);

    foreach ($keywords as $key=>$keyword){

    $regexp = "/($w)(?![^<]+>)/i";
        $replacement = '<b style="background-color:'.$colors[$c].'">\\1</b>';

        $text = preg_replace($regexp,$replacement ,$keywords);
        $c++;

        if ($c >= count($colors)) {
            $c=0;
        }

        $where2 .= "`b` LIKE '%$keyword%'";

        if ($key != ($total_keywords - 1)){ 
            $where2 .= " OR ";
        }
    }

    $results_text = "SELECT `a`, LEFT(`b`, 150) as `b`, `c` FROM `table` WHERE $where2";
    $results_num_text = ($query2 = mysqli_query($db, $results_text)) ? mysqli_num_rows($query2) : 0; 
    if ($results_num_text === 0){
        return false;
    } else {

        while ($row = mysqli_fetch_assoc($query2)){

            $returned_results[] = array(
                'ab' => $row['a'],
                'cd' => $row['b'],
            );
        }

        return $returned_results;
        $highlight = array($keywords);
        echo mark_words($highlight);
    }
}
?> 
```

当我寻找它时，我发现了两种可能性。第一个是一个函数，第二个是直接从选择查询中突出显示它：

```
SELECT
        REPLACE(`col`, 'foobar', '<span class="highlight">foobar</span>') AS `formated_foobar`
  FROM
        …
  WHERE
        `col` LIKE "%foobar%" 
```

所以我的问题是如何将第二个功能实现到搜索功能中，还是使用第二种方法更好？

如果有人可以帮助我，我将不胜感激。多谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T10:09:01.417

你不应该让自己太难。您只需要用应用了所需样式的跨度中包含的单词替换每个出现的单词。这应该适合你：

```
function highlight_word( $content, $word, $color ) {
    $replace = '<span style="background-color: ' . $color . ';">' . $word . '</span>'; // create replacement
    $content = str_replace( $word, $replace, $content ); // replace content

    return $content; // return highlighted data
}

function highlight_words( $content, $words, $colors ) {
    $color_index = 0; // index of color (assuming it's an array)

    // loop through words
    foreach( $words as $word ) {
        $content = highlight_word( $content, $word, $colors[$color_index] ); // highlight word
        $color_index = ( $color_index + 1 ) % count( $colors ); // get next color index
    }

    return $content; // return highlighted data
}

// words to find
$words = array(
    'normal',
    'text'
);

// colors to use
$colors = array(
    '#88ccff',
    '#cc88ff'
);

// faking your results_text
$results_text = array(
    array(
        'ab'    => 'AB #1',
        'cd'    => 'Some normal text with normal words isn\'t abnormal at all'
    ), array(
        'ab'    => 'AB #2',
        'cd'    => 'This is another text containing very normal content'
    )
);

// loop through results (assuming $output1 is true)
foreach( $results_text as $result ) {
    $result['cd'] = highlight_words( $result['cd'], $words, $colors );

    echo '<fieldset><p>ab: ' . $result['ab'] . '<br />cd: ' . $result['cd'] . '</p></fieldset>';
} 
```

使用正则表达式替换内容也可以，但使用起来`str_replace()`要快一些。

这些函数接受这些参数：

`highlight_word( string, string, string );`

`highlight_words( string, array, array );`

上面的示例导致：

![在此处输入图像描述](../Images/941d3b185df6652a14181c776d4d0075.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T07:41:40.593

通过使用 str_ireplace 而不是 str_replace，该函数将不区分大小写

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T10:01:23.093

我不会使用 SQL 方法。随着时间的推移，你有越来越多的突出规则，这将变得难以管理。`foo`处理需要以不同方式突出显示`foobar`但一个包含另一个的情况也更棘手。

将数据处理与格式分开。

# c# - 更新外键列

> ID：10313333
> 
> 赞同：1
> 
> 时间：2012-04-25T09:58:01.587
> 
> 标签：c#, linq-to-sql

我不知道你是如何在 linq-to-sql 中做到这一点的。

下面的简单外键示例。

```
CARS TABLE
Columns - CARID (PK), NAME, SIZE, MODELID(FK)

MODELS TABLE
Columns MODELID(PK), MODELNAME 
```

要在 SQL 中更改汽车的型号，我会

```
UPDATE CARS
SET MODELID = 'MODEL88'
WHERE CARID = 'CAR01' 
```

在 linq-to-sql 我尝试做类似的事情，但更新不起作用。

```
Car car = db.Cars.Where(x => x.CarId == "CAR01").FirstOrDefault();
Model model = db.Models.Single(c => c.ModelId == "MODEL88");
car.Model = model;
db.SubmitChanges(); 
```

没有例外，它只是不进行更新。更新不是外键的其他字段确实有效，例如大小。

```
Car car = db.Cars.Where(x => x.CarId == "CAR01").FirstOrDefault();
car.Size = "22";
db.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:10:23.330

嗯，奇怪。数据库中是否设置了关系？这是否反映在您的 .DBML 中？

出于好奇，如果您在 上添加`car`到`Cars`colleciton 是否有效`model`，如下所示：

```
Car car = db.Cars.Where(x => x.CarId == "CAR01").FirstOrDefault();
Model model = db.Models.Single(c => c.ModelId == "MODEL88");
model.Cars.Add(car)
db.SubmitChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:08:04.303

也许它会起作用：

```
Car car = db.Cars.Where(x => x.CarId == "CAR01").FirstOrDefault();
Model model = db.Models.Single(c => c.ModelId == "MODEL88");
car.ModelId = model.Id;
db.SubmitChanges(); 
```

# asp.net - 无法将 AjaxToolkit 控件添加到用户控件

> ID：10313336
> 
> 赞同：0
> 
> 时间：2012-04-25T09:58:25.637
> 
> 标签：asp.net, asp.net-ajax, ajaxcontroltoolkit, vb.net-2010

我有一个简单的用户控件，我想向它添加一个 AjaxToolkit 控件。我想要的是 ModalPopupExtender，但无论我选择哪个 AjaxToolkit 控件，都会发生同样的事情。当我将控件拖放到源页面而不是附加 @Register 行和标签时，我得到一大堆以开头的 xml 类型代码

```
<soap-env:envelope soap-env:encodingstyle="........ 
```

我什至尝试手动输入 @Register 行添加 ToolkitScriptManager 行，然后是 ModalPopupExtender 并且没有喜悦。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:56:02.423

Praveen Correct 仅发生在 UserControl（ascx 文件）中...我尝试先通过清理进行修复。这没有帮助。然后我关闭了 VS2010 并清除了 ReflectedSchemas 目录，这解决了这个问题。

# iphone - 应用程序打开然后立即关闭 - iphone 模拟器

> ID：10313337
> 
> 赞同：2
> 
> 时间：2012-04-25T09:58:25.923
> 
> 标签：iphone, xcode, ios-simulator

当我从 XCode 中“运行”我的应用程序时，模拟器会启动并且应用程序尝试运行，它会动画到黑屏一秒钟，然后应用程序立即关闭。

该应用程序之前运行良好，现在突然无法运行。

控制台上没有输出，没有错误或任何东西，应用程序没有崩溃（据我所知）。

我尝试删除 xcodeproj 包中的所有用户特定文件，但这并没有改变任何东西。

还有其他原因会发生这种情况吗？我该如何解决？

谢谢你。

添加：`NSLog(@"something");`在`application:didFinishLaunchingWithOptions`方法中没有显示在控制台上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:10:31.440

重新启动我的 Mac 似乎已修复它。谢谢大家帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:31:03.943

如果您使用的是新的 Xcode(4+) 和以前的 3，则可能存在问题。尝试设置架构（目标 -> 构建设置 -> 架构）也支持 armv6，目前它仅支持 armv7（标准）。如果我的记忆没有欺骗我，我想我有这样的问题。

# c++ - 具有 CREATE_ALWAYS 处置的 CreateFile 函数

> ID：10313339
> 
> 赞同：1
> 
> 时间：2012-04-25T09:58:46.027
> 
> 标签：c++, file

我使用 CreateFile 最初创建一个文件，其中：

```
HANDLE hFile = CreateFile (TEXT(fileName.str().c_str()),      
                  GENERIC_WRITE,          
                  0,                     
                  NULL,                   
                  OPEN_ALWAYS,            
                  FILE_ATTRIBUTE_NORMAL,  
                  NULL); 
```

如果我`CreateFile`再次使用尝试再次创建相同的文件，它应该不会是一个错误？

```
hFile = CreateFile (TEXT(fileName.str().c_str()),      
                  GENERIC_WRITE,          
                  0,                      
                  NULL,                   
                  CREATE_ALWAYS,             
                  FILE_ATTRIBUTE_NORMAL,  
                  NULL); 
```

我会想到，因为`CREATE_ALWAYS`如果文件已经创建，我会使用它失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:04:14.833

`CreateFile`不，如果文件已经存在，CREATE_ALWAYS 标志会覆盖文件。您应该使用 CREATE_NEW 来实现您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:04:50.853

CREATE_ALWAYS 会这样做，总是创建它。如果 CREATE_NEW 已经存在，它将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:07:35.490

否根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)标志 CREATE_ALWAYS 表示：

> 如果指定的文件存在且可写，则该函数覆盖该文件，该函数成功，并且最后一个错误代码设置为 ERROR_ALREADY_EXISTS (183)。如果指定的文件不存在并且是有效路径，则创建一个新文件，函数成功，最后错误代码设置为零。

因此，当文件已经存在时，函数不会失败，它成功了，只是最后一个错误设置为 ERROR_ALREADY_EXISTS。

# hibernate - 使用带有休眠功能的骆驼组件的优点？

> ID：10313345
> 
> 赞同：-2
> 
> 时间：2012-04-25T09:59:16.097
> 
> 标签：hibernate, apache-camel

使用带有休眠功能的骆驼组件有什么好处？我在没有骆驼组件的弹簧中实现休眠。您能建议我继续相同还是使用骆驼实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:21:15.470

Apache Camel 是一个集成框架。如果您有一些来自 JMS 的消息并且您需要将其保存到文件中，然后从 DB 中读取并通过 WS 回答某些其他组件，那么就是您的情况。

在 Camel 中可以使用 Hibernate 组件来存储/检索消息。因此，如果您只需要使用数据库，则不需要使用 Apache Camel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:09:28.513

不要**仅仅为了使用它**而使用任何框架。在项目[主页](http://camel.apache.org/)中阅读有关**Apache Camel**的信息，并确定它是否对您有用。

以我的经验，我从未将它与**Hibernate**一起使用。因此，除非有特殊需要，否则我建议您不要使用它。

# haskell - Haskell 处理枚举的方法

> ID：10313349
> 
> 赞同：6
> 
> 时间：2012-04-25T09:59:36.073
> 
> 标签：haskell, types, enumeration

我想表示以下形式的类型：

```
(Card, Suit) 
```

表示卡片游戏中的卡片，其中`Card`实例将在集合中：

```
{2, 3, 4, 5, 6, 7, 8, 9, J, Q, K, 1} 
```

并且`Suit`在集合中有实例：

```
{S, D, H, C} 
```

如果不是为了数字，我会用两个 Data 声明来处理它：

```
data Suit = S | D | H | C deri... 
```

但显然，将数字添加到那些 null arity 类型会失败。

所以我的问题是，如何模拟你在 C 中找到的那种枚举？

我想我误解了类型系统的基本观点，我们将不胜感激！

编辑：我将添加一些上下文：我想表示包含在[这个欧拉问题](http://projecteuler.net/problem=54)中的数据，如您所见，数据以 1S 的形式表示黑桃 A，2D 表示菱形 2 等。 ..

我真正想要的是能够直接对字符串执行读取操作以获取相应的对象。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-25T12:45:27.080

实际上，当我开发扑克机器人时，我碰巧有一个方便的实现。它不是特别复杂，但确实有效。

一是相关类型。等级和花色是枚举，而卡片是明显的复合类型（带有自定义`Show`实例）

```
import Text.ParserCombinators.Parsec

data Suit = Clubs | Diamonds | Hearts | Spades deriving (Eq,Ord,Enum,Show)

data Rank = Two | Three | Four | Five | Six | Seven | Eight | Nine | Ten
          | Jack | Queen | King | Ace deriving (Eq,Ord,Enum,Show)  

data Card = Card { rank :: Rank
                 , suit :: Suit } deriving (Eq,Ord,Bounded)

instance Show Card where
    show (Card rank suit) = show rank ++ " of " ++ show suit 
```

然后我们有解析代码，它使用 Parsec。您可以将其开发得更复杂，以返回更好的错误消息等。

请注意，正如 Matvey 在评论中所说，将字符串解析为其在程序中的表示的问题是（或者更确切地说*应该是*）正交于枚举的表示方式。在这里，我欺骗并破坏了正交性：如果您想重新排序排名（例如，`Ace`排名低于`Two`），那么您将破坏解析代码，因为解析器依赖于`Two`being `0`，`Three`being`1`等的内部表示。

更好的方法是明确拼出所有等级`parseRank`（这是我在原始代码中所做的）。我这样写是为了（a）节省一些空间，（b）说明原则上如何将数字解析为等级，以及（c）给你一个明确说明的不良做法的例子，这样你就可以避免它在将来。

```
parseSuit :: Parser Suit
parseSuit = do s <- oneOf "SDCH"
               return $ case s of
                'S' -> Spades
                'D' -> Diamonds
                'H' -> Hearts
                'C' -> Clubs

parseRank :: Parser Rank
parseRank = do r <- oneOf "23456789TJQKA"
               return $ case r of
                'T' -> Ten
                'J' -> Jack
                'Q' -> Queen
                'K' -> King
                'A' -> Ace
                 n  -> toEnum (read [n] - 2)

parseCard :: Parser Card
parseCard = do r <- parseRank
               s <- parseSuit
               return $ Card { rank = r, suit = s }

readCard :: String -> Either ParseError Card
readCard str = parse parseCard "" str 
```

它在行动中：

```
*Cards> readCard "2C"
Right Two of Clubs
*Cards> readCard "JH"
Right Jack of Hearts
*Cards> readCard "AS"
Right Ace of Spades 
```

* * *

**编辑：**

@yatima2975 在评论中提到，你也许可以玩得开心`OverloadedStrings`。我无法让它做很多有用的事情，但它似乎很有希望。首先，您需要通过放在`{-# LANGUAGE OverloadedStrings #-}`文件顶部来启用语言选项，并包含`import GHC.Exts ( IsString(..) )`导入相关类型类的行。然后你可以把 a`Card`变成一个字符串文字：

```
instance IsString Card where
    fromString str = case readCard str of Right c -> c 
```

这允许您对卡片的字符串表示进行模式匹配，而不必显式写出类型：

```
isAce :: Card -> Bool
isAce "AH" = True
isAce "AC" = True
isAce "AD" = True
isAce "AS" = True
isAce _    = False 
```

您还可以使用字符串文字作为函数的输入：

```
printAces = do
    let cards = ["2H", "JH", "AH"]
    mapM_ (\x -> putStrLn $ show x ++ ": " ++ show (isAce x)) cards 
```

它在行动中：

```
*Cards> printAces
Two of Hearts: False
Jack of Hearts: False
Ace of Hearts: True 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-25T10:03:13.583

```
data Card = Two | Three | Four | Five | Six
          | Seven | Eight | Nine | Ten
          | Jack | Queen | King | Ace
    deriving Enum 
```

实现`Enum`类型类意味着您可以使用`fromEnum`and在and`toEnum`之间进行转换。`Card``Int`

但是，如果这对您很重要`fromEnum Two`，`2`您将不得不手动实现该`Enum`实例`Card`。（自动派生的实例从 开始`0`，就像 C 一样，但是如果不自己做这一切，就无法覆盖它。）

nb 您可能不需要`Enum`--- 如果您只想使用`<`和s 这样`==`的运算符`Card`，那么您需要使用`deriving Ord`.

* * *

编辑：

您不能使用`read`to 将`String`形式`"2S"`的`"QH"`a 转换为 a `(Card, Suit)`，因为`read`希望字符串看起来像`"(a,b)"`（例如`"(2,S)"`，以您最初要求的形式，或`"(Two,S)"`以我上面建议的形式）。

您必须自己编写一个函数来解析字符串。您可以使用解析器（例如 Parsec 或 Attoparsec），但在这种情况下，它应该足够简单，可以手动编写。

例如

```
{-# LANGUAGE TupleSections #-}

parseSuit :: String -> Maybe Suit
parseSuit "S" = Just S
...
parseSuit _   = Nothing

parseCard :: String -> Maybe (Card, Suit)
parseCard ('2' : s) = fmap (Two,) (parseSuit s)
...
parseCard _         = Nothing 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T10:03:47.937

我只是在数字前加上一个字母，或者更好的是，一个词。我也不会使用太多的单字母缩写 - <code>H`K`等是完全不可读的。

```
data Suit = Club | Spade | Heart | Diamond
data Card = Card1 | Card2 | … | Jack | Queen | King | Ace 
```

......但我什至更喜欢戴夫的建议，即使用数字词（`One`，`Two`）代替值。

# java - 套接字的损坏的 ObjectOutputStream

> ID：10313355
> 
> 赞同：1
> 
> 时间：2012-04-25T09:59:53.073
> 
> 标签：java, sockets, serializable

我试图通过单个发送不同类的多个可序列化对象

```
ObjectOutputStream out = new ObjectOutputStream(socket.getOutputStream()); 
```

但是，我总是得到一个

> java.io.StreamCorruptedException：无效类型代码：AC

我已经通过论坛并尝试过`out.reset()`，但它似乎不起作用。我做错了什么或错过了什么？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:05:25.483

损坏的是流，而不是`ObjectOutputStream`. 那是一个类的名称。

`ObjectOutputStreams`当您尝试使用单个读取多个结果时会出现此问题`ObjectInputStream`。这是无效的。`ObjectOutputStream`写一个以 - 开头的标题 - 你猜怎么着？0xAC。因此，当您使用 single`ObjectInputStream`读取由 multiple 创建的流时`ObjectOutputStreams`，它会发现意外的 0xAC 并抛出该异常。

解决方案：不要那样做。您不能将多个附加`ObjectOutputStreams`到文件，也不能`ObjectOutputStreams`在套接字上使用多个，除非您具有足够的协调能力，可以在流中最后一个停止`ObjectInputStream`的精确点创建一个新的：相反，您必须使用和插座的使用寿命`ObjectOutputStream`相同。`ObjectInputStream``ObjectOutputStream`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:23:39.767

您很可能错误地使用了 ObjectOutputStream 或 ObjectInputStream。

常见错误包括

*   在同一个底层流上使用多个对象流。只用一个。
*   使用 Object Stream 和另一个流包装器，如 Writer/Reader 或 DataInput/OutputStream。

顺便说一句：在使用 ObjectInputStream 之前，您应该始终先创建 ObjectOutputStream 并刷新（）它。

# java - 使用 HttpUrlConnection 的 NLTM 身份验证失败

> ID：10313356
> 
> 赞同：4
> 
> 时间：2012-04-25T09:59:55.207
> 
> 标签：java, httpurlconnection, ntlm

我正在尝试使用 java.net 的 HttpUrlConnection 在我的 Java 应用程序中对支持 NTLM 身份验证的服务器进行身份验证。

问题是应用程序无法发送 Authenticate 响应。

我已将代理附加到 http 连接，以便通过提琴手路由流量。在提琴手中，我可以看到正在发送协商消息，并收到服务器挑战。但在此之后，应用程序只是停止说它收到了 401，而没有发送 type3 身份验证消息。

有任何想法吗？这是代码 -

```
Authenticator.setDefault(new Authenticator() {
    public PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication("username",
                                          "password".toCharArray());
    }
});
URL url = new URL("https://service_url.svc");

// Proxy for fiddler
Proxy proxy = new Proxy(Proxy.Type.HTTP,
                  new InetSocketAddress("localhost", 8888));

// Create a connection
HttpURLConnection conn = (HttpURLConnection)url.openConnection(proxy);
conn.setRequestMethod("GET");
conn.setDoInput(true);
conn.setDoOutput(true);
conn.setUseCaches(false);

InputStream is = conn.getInputStream();
BufferedReader rd = new BufferedReader(new InputStreamReader(is));
String line;
while ((line = rd.readLine()) != null)
    System.out.println(line);

rd.close(); 
```

感谢任何帮助。谢谢。

# c++ - 我已经安装了 gperftools-2.0，但我无法获取 cpu 配置文件统计信息

> ID：10313357
> 
> 赞同：0
> 
> 时间：2012-04-25T09:59:55.207
> 
> 标签：c++, profiler, gperftools

我已经安装了 gperftools-2.0，但我无法获取 cpu 配置文件统计信息

以下是我获取统计信息的步骤：

1.  安装 gperftools tar -xzvfj gperftools-2.0.tar.gz

2.编辑cpp文件test.cpp

```
#include <stdio.h>
#include <gperftools/profiler.h>

int main()
{
        ProfilerStart("test.prof");

        for (int i = 0; i<100; i++)
        {
                printf("hello world!");
        }

        ProfilerStop();

        return 0;
} 
```

1.  编译 g++ test.cpp -o test -O0 -I/usr/local/include/ -L/usr/local/lib/ -lprofiler

2.  运行 ./test

3.  报告 pprof ./test --text test.prof

其输出为：使用本地文件 ./test。使用本地文件 test.prof。

我的步骤有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:59:01.447

你只需要你的程序运行更长的时间，因为谷歌分析器只是在每个间隔时间更新 CPU 统计信息。重置“CPUPROFILE_FREQUENCY”或“CPUPROFILE_REALTIME”值可以改变这个间隔时间。

# debugging - 更少的调试 - 类似于 sass

> ID：10313358
> 
> 赞同：0
> 
> 时间：2012-04-25T09:59:57.827
> 
> 标签：debugging, sass, less

有没有办法调试生成的文件，类似于在 sass 中使用 :debug_info 选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:04:57.643

不，很遗憾没有。

唯一可以做到的方法是在编译文件时调试less.js 或dotless。

# php - 使用 Doctrine 将 MySQL BIT 字段转换为 BOOLEAN

> ID：10313359
> 
> 赞同：3
> 
> 时间：2012-04-25T09:59:57.900
> 
> 标签：php, mysql, doctrine, doctrine-orm

谁能告诉我我的代码有什么问题。

在 PHP 5.3 MySQL 5.5 中使用 Doctrine 2

我对名为 IsDefault 的 BIT 字段的 YAML 映射，如果我希望应用程序中的值为真或假，则该字段的值为 1 或 0：

```
 IsDefault:
    type: boolean
    nullable: false 
```

生成的实体是：

```
/**
* @var boolean $IsDefault
*/
private $IsDefault;

/**
 * Set IsDefault
 *
 * @param boolean $isDefault
 * @return Model
 */
public function setIsDefault($isDefault)
{
    $this->IsDefault = $isDefault;
    return $this;
}

/**
 * Get IsDefault
 *
 * @return boolean 
 */
public function getIsDefault()
{
    return $this->IsDefault;
} 
```

不幸的是，在我的应用程序中访问数据时，每一行都返回 IsDefault 为 TRUE。有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T15:26:44.843

我有同样的问题，我换成`Bit(1)`并且`TINYINT(1)`运行良好。

# wcf - 在回调方向检查 WCF 消息？

> ID：10313361
> 
> 赞同：8
> 
> 时间：2012-04-25T09:59:58.410
> 
> 标签：wcf, duplex-channel

我可以分别使用 IClientMessageInspector、IDispatchMessageInspector 在客户端和服务器端检查 WCF 消息。但是在双工通信中，不清楚如何在从服务器到客户端的回调中做到这一点（关于该主题的文档也很少）。

关于如何实现此功能的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T02:03:02.347

最后我得到了解决方案。

在进行回调的双工通信场景中，服务器成为客户端，反之亦然。

因此，在服务器端实现 IServiceBehavior 时，使用每个 EndpointDispatcher 的 DispatchRuntime 的 CallbackClientRuntime 属性注入消息检查器。

```
public void ApplyDispatchBehavior(ServiceDescription serviceDescription, System.ServiceModel.ServiceHostBase serviceHostBase)
{
    foreach (ChannelDispatcher item in serviceHostBase.ChannelDispatchers)
    {
        foreach (EndpointDispatcher epd in item.Endpoints)
        {
            //injecting an inspector in normal call
            epd.DispatchRuntime.MessageInspectors.Add(new MessageSizerInspector());

            //injecting an inspector in callback
            epd.DispatchRuntime.CallbackClientRuntime.MessageInspectors.Add(new MessageSizerInspector());
        }
    }
} 
```

在客户端实现 IEndpointBehavior 时，使用 CallbackDispatchRuntime 注入消息检查器。

```
public void ApplyClientBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.ClientRuntime clientRuntime)
{
    //injecting an inspector in normal call
    clientRuntime.MessageInspectors.Add(new MessageSizerInspector());

    //injecting an inspector in callback
    clientRuntime.CallbackDispatchRuntime.MessageInspectors.Add(new MessageSizerInspector());       
} 
```

然后像往常一样应用扩展。

就我而言，我创建了一个类似于以下伪代码的类

```
public class MessageSizer : Attribute, IServiceBehavior, IEndpointBehavior
{
    .....
} 
```

然后我将此属性应用于服务器端检查的服务实现，并在 app.config 中添加了一个 behaviorExtensions 来设置端点以在客户端进行消息检查。

```
<system.serviceModel>
    ...........
    <client>
      <endpoint address="net.tcp://localhost/MinerDual.svc"
            binding="netTcpBinding" bindingConfiguration="wsDualMinerNetTcp"
            contract="WebApplication.IMinerDual" name="NetTcpMinerDual" 
            behaviorConfiguration="Default" />
    </client>
  <behaviors>
    <endpointBehaviors >
      <behavior name="Default">
        <messageSizer/>
      </behavior>
    </endpointBehaviors>
  </behaviors>
  <extensions>
    <behaviorExtensions>
      <add name="messageSizer"
           type="WCFExtensions.MessageSizerElement, WCFExtensions, 
           Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
    </behaviorExtensions>
  </extensions>
</system.serviceModel> 
```

# php - 为什么不使用 C 编程语言进行 Web 开发

> ID：10313362
> 
> 赞同：-4
> 
> 时间：2012-04-25T10:00:08.280
> 
> 标签：php, c, web

我问自己，很多 Web 开发编程语言都是用 c/c++ 创建的。那么，为什么人们不使用 C 进行 Web 开发，而不是像 PHP 那样的 Web 开发编程语言，C 不仅速度快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:04:09.297

Web 程序所需的速度不同于嵌入式和其他高性能应用程序所需的速度。用 C 语言开发是有成本的。它耗时、容易出错且级别非常低。如果可以牺牲一些来编写更高级别的代码，更快地完成工作，你应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:03:30.377

Web 开发是字符串操作，这是 C 语言的弱点之一。因此，以更简单的方式操作字符串的语言（例如 Perl 和 PHP）流行起来。

# c# - .net 窗口服务

> ID：10313363
> 
> 赞同：0
> 
> 时间：2012-04-25T10:00:13.123
> 
> 标签：c#

我已将我的 c# 控制台应用程序创建为 Windows 服务，并将该服务安装在远程服务器中，该服务器是 32 位机器并具有 2GB RAM。许多客户端连接到此服务器应用程序并从服务器获取数据。问题是有时服务器机器宕机无法访问数据，那个时候我们每次都需要重新启动服务器。我无法确定问题到底出在哪里。当我检查服务器机器中的偶数日志时，我发现了以下异常，

源 .net 2.0 运行时错误。

EventType clr20r3，P1 myapplication.exe，P2 1.3.2.1，P3 4cb724a3，P4 mscorlib，P5 2.0.0.0，P6 4be90358，P7 1947，P8 7，P9 system.outofmemoryexception，P10 NIL。

我用谷歌搜索了很多，但找不到确切的原因。我正在使用 HTTPSERVER.MVC（开源）进行 url 通信。在 main 函数中添加以下代码来创建服务。

```
 ServiceBase[] ServicesToRun;
 ServicesToRun = new ServiceBase[] 
 { 
   new TouchService() 
  };
 ServiceBase.Run(ServicesToRun); 
```

请有人帮帮我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:06:20.890

原因是——你内存不足。

在 .Net 中，这并不一定意味着物理上没有更多内存，它只是意味着 CLR 无法找到足够的连续内存来分配某些东西。这可能是由于已经分配了大量内存，或者由于内存碎片。

在不了解您的应用程序的情况下，很难给出一般性建议，但有几点建议是：

*   尝试使用 Windows 性能计数器和[Process Monitor等工具监控堆的大小](http://technet.microsoft.com/en-us/sysinternals/bb896645)
*   查看您的代码 - 您是否无限期地保留引用并不断增加正在使用的内存的整体大小？
*   您是否分配了大约 80KB 以上的任何大的单个内存块，例如大数据字符串？像这样的大对象是在大对象堆上分配的，而不是压缩的，这会导致碎片和 OutOfMemoryExceptions？
*   您是否尝试过使用内存分析器？（我倾向于使用[SciTech 的 .Net Memory Profiler](http://memprofiler.com/)，但还有其他好的）。这使您可以启动服务并附加分析器，做一些工作，拍摄快照，再做一些工作，然后查看快照之间的差异。这是一种非常有效的方法来发现内存使用是否以及为什么会逐渐增加。
*   你在做很多 XML 序列化吗？除了倾向于生成大字符串（参见前一点）之外，在 XmlSerializer 构造函数上使用某些重载还会导致每次使用新的 xml 序列化 dll 并将其加载到应用程序池中。

这些只是一些随意的想法，但如果您还没有，我建议您[对 CLR 内存管理和垃圾收集有一个基本的了解，尝试一些监视和分析，并仔细查看您的代码。](http://msdn.microsoft.com/en-us/library/0xy59wtx.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:10:08.573

理解这一点的唯一可能方法是衡量您的服务内存使用情况。将其转换为“普通”应用程序，并且

*   首先尝试使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653)。让您的应用程序遵循*ma*有繁重工作量的路径并查看`WorkingSet`：它如何增长，如果它能够在 GC 执行后恢复其状态（尽可能多）

*   使用一种可用的内存分析器（有*免费*和付费的）

希望这可以帮助。

# asp.net - 单击按钮时截取 iFrame 的屏幕截图

> ID：10313369
> 
> 赞同：1
> 
> 时间：2012-04-25T10:00:17.560
> 
> 标签：asp.net, iframe, buttonclick

您好，我正在创建一个具有 iFrame 和按钮的网站。该按钮的功能是获取 iFrame 内显示的任何内容的屏幕截图并将其保存为硬盘上的图像。以下是我正在使用的代码

```
private void saveURLToImage(string url) 
    { 
        if (!string.IsNullOrEmpty(url)) 
        { 
            string content = ""; 

            System.Net.WebRequest webRequest = WebRequest.Create(url); 
            System.Net.WebResponse webResponse = webRequest.GetResponse(); 
            System.IO.StreamReader sr = new StreamReader(webResponse.GetResponseStream(), System.Text.Encoding.GetEncoding("UTF-8"));

            content = sr.ReadToEnd(); 
            //save to file 
            byte[] b = Convert.FromBase64String(content); 
            System.IO.MemoryStream ms = new System.IO.MemoryStream(b); 
            System.Drawing.Image img = System.Drawing.Image.FromStream(ms); 
            img.Save(@"c:\pic.jpg", System.Drawing.Imaging.ImageFormat.Jpeg); 

            img.Dispose(); 
            ms.Close(); 
        } 
    } 
```

这是按钮单击的代码

```
 protected void Button1_Click(object sender, ImageClickEventArgs e)
{

saveURLToImage("http://www.google.com");

} 
```

但是，当我单击按钮时，出现错误

```
The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or a non-white space character among the padding characters. 
```

在这条线上

```
byte[] b = Convert.FromBase64String(content); 
```

我无法弄清楚如何解决它。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T12:15:50.723

在您的情况下`content`，是构成页面的原始 HTML，而不是如何呈现页面 - 这将由浏览器决定（在调试器中查看它）所以，因为这不是[base 64](http://en.wikipedia.org/wiki/Base64)（这是仅使用 ASCII 字符对二进制数据进行编码的方法），为了使其工作，您需要获取 JPEG 编码图像的 base 64 编码二进制数据，但浏览器已呈现您没有的 HTML。

我认为这在 Web 应用程序中实现起来并不容易，因为在您在服务器上运行的 .net 代码中，客户端的工作是将 HTML 呈现为您可以截屏的内容。你可以（这可能真的很脆弱，所以我不会真的推荐它，在 Web 应用程序中托管这样的 winforms 控件通常会带来麻烦，但我认为它可能）在你的服务器上使用[浏览器控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)侧面并设置它的 URL，但是您需要以某种方式对其进行截图 - 这可能会有所帮助：[使用 WebBrowser 控件拍摄网站截图](http://www.geekpedia.com/code140_Taking-Website-Screenshots-With-The-WebBrowser-Control.html)。

**更新**

在我最后链接的网站的评论中隐藏了一些代码，这些代码实际上可以截取网页的屏幕截图（使用 WebBrowser 控件）。它要求您参考以下内容：

*   系统绘图
*   System.Windows.Forms
*   Microsoft HTML 对象库（这是一个 COM 引用，而不是 .NET 引用）

这是一个完成我们想要的工作的类（它只有一个 Render 方法，它接受一个 Uri 和一个 Size 并返回一个 Bitmap）：

```
using System;
using System.Drawing;
using System.Runtime.InteropServices;
using System.Threading;
using System.Windows.Forms;
using mshtml;

public class HtmlToBitmapConverter
{
    public Bitmap Render(Uri uri, Size size)
    {
        var browser = new WebBrowser
                          {
                              ScrollBarsEnabled = false,
                              ScriptErrorsSuppressed = true,
                              Size = size
                          };
        browser.BringToFront();

        NavigateAndWaitForLoad(browser, uri, 0);

        var bitmap = new Bitmap(size.Width, size.Height);
        GetImage(browser.Document.DomDocument, bitmap, Color.White);
        return bitmap;
    }

    private void NavigateAndWaitForLoad(WebBrowser browser,
                                        Uri uri,
                                        int waitTime)
    {
        const int sleepTimeMiliseconds = 5000;

        browser.Navigate(uri);
        var count = 0;

        while (browser.ReadyState != WebBrowserReadyState.Complete)
        {
            Thread.Sleep(sleepTimeMiliseconds);
            Application.DoEvents();
            count++;

            if (count > waitTime / sleepTimeMiliseconds)
            {
                break;
            }
        }

        while (browser.Document.Body == null)
        {
            Application.DoEvents();
        }

        var document = (IHTMLDocument2)browser.Document.DomDocument;
        var style = (IHTMLStyle2)document.body.style;
        style.overflowX = "hidden";
        style.overflowY = "hidden";
    }

    private static void GetImage(object obj,
                                Image destination,
                                Color backgroundColor)
    {
        using (var graphics = Graphics.FromImage(destination))
        {
            var deviceContextHandle = IntPtr.Zero;
            var rectangle = new Rect
            {
                Right = destination.Width,
                Bottom = destination.Height
            };

            graphics.Clear(backgroundColor);
            try
            {
                deviceContextHandle = graphics.GetHdc();

                var viewObject = (IViewObject)obj;
                viewObject.Draw(1,
                                -1,
                                IntPtr.Zero,
                                IntPtr.Zero,
                                IntPtr.Zero,
                                deviceContextHandle,
                                ref rectangle,
                                IntPtr.Zero,
                                IntPtr.Zero,
                                0);
            }
            finally
            {
                if (deviceContextHandle != IntPtr.Zero)
                {
                    graphics.ReleaseHdc(deviceContextHandle);
                }
            }
        }
    }

    [ComImport]
    [Guid("0000010D-0000-0000-C000-000000000046")]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    private interface IViewObject
    {
        void Draw([MarshalAs(UnmanagedType.U4)] uint dwAspect,
                  int lindex,
                  IntPtr pvAspect,
                  [In] IntPtr ptd,
                  IntPtr hdcTargetDev,
                  IntPtr hdcDraw,
                  [MarshalAs(UnmanagedType.Struct)] ref Rect lprcBounds,
                  [In] IntPtr lprcWBounds,
                  IntPtr pfnContinue,
                  [MarshalAs(UnmanagedType.U4)] uint dwContinue);
    }

    [StructLayout(LayoutKind.Sequential, Pack = 4)]
    public struct Rect
    {
        public int Left;

        public int Top;

        public int Right;

        public int Bottom;
    }
} 
```

**注意**正如我之前所说，我不确定在 Web 应用程序中使用这是否是一个好主意，原因如下：

1.  它是一个 Windows 窗体控件，因此它处理内存的方式可能与在 Web 应用程序中使用的方式不兼容。
2.  这意味着截取屏幕截图的帐户将是运行 Web 应用程序的帐户，不一定是最终用户。

好的，所以我认为以上内容在 winforms 应用程序中会很好，但可能不适合网络，但是，嘿，无论如何我们都可以让它工作，这里......

我假设您要使用常规的 ASP .NET Web 应用程序，在这种情况下，您将在 .aspx 页面中有类似的内容：

```
<asp:Button runat="server" OnClick="TakeScreenShot" Text="Take Screenshot"/> 
```

然后在 TakeScreenshot 方法后面的代码中将如下所示：

```
protected void TakeScreenShot(object sender, EventArgs e)
{
    Uri uri = new Uri("http://www.google.com");

    // Because it is a WebBrowser control it needs to run in an STA 
    // thread - what we will do is render the image to a Bitmap then
    // store the raw bytes in this byte array from a newly created
    // thread
    byte[] screenshot = null;
    var t = new Thread(() =>
                           {
                               using (var ms = new MemoryStream())
                               {
                                   // The screenshot object contains a 640x480 
                                   // screenshot 
                                   var bitmap = new HtmlToBitmapConverter()
                                       .Render(uri,
                                               new Size(640, 480));
                                   bitmap.Save(ms, ImageFormat.Jpeg);
                                   screenshot = ms.ToArray();
                               }
                           });
    t.SetApartmentState(ApartmentState.STA);
    t.Start();
    t.Join();            

    // Here we have the JPEG encoded bytes of the image - we can
    // just save them to a file like so...
    using (var f = File.Create(@"c:\google.jpg"))
    {
        f.Write(screenshot, 0, screenshot.Length);
    }
} 
```

好了 - c:\google.jpg 将在其中包含 Google 的屏幕截图。

# c - gcc下的typedef错误

> ID：10313376
> 
> 赞同：-1
> 
> 时间：2012-04-25T10:00:43.520
> 
> 标签：c

在我的代码中，我输入了以下代码

```
typedef Status int; 
```

我得到了以下错误，在 linux 下应该在 'int' 之前出现 '='、','、';'、'asm' 或 ' **attribute '。**

我找不到问题所在。谢谢你的帮助。一个

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T10:01:47.690

利用：

```
typedef int Status; 
```

代替

```
typedef Status int; 
```

a`typedef`的语法与任何普通声明的语法相同：

```
int a, b;          // declare int objects a and b
typedef int c, d;  // declare int type-aliases c and d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:02:20.387

typedef 后面应该跟类型，然后是名称。因此，typedef 应该如下所示：

```
typedef int Status; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:02:51.307

typedef 的语法是

```
typedef <SOME_TYPE> new_name_for_some_type; 
```

您正在交换语法的 <SOME_TYPE> 和 new_name_for_some_type 元素`typedef`。

# java - Android 4.0.3 上的 TCP 套接字

> ID：10313377
> 
> 赞同：1
> 
> 时间：2012-04-25T10:00:47.430
> 
> 标签：java, android

我正在开发一个项目，其中我通过 Android 与服务器建立 TCP 连接。
我正在使用以下代码：

```
public class MyService extends Service {
private static final String TAG = "MyService";
MediaPlayer player;
Socket s;
@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {
    Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onCreate");

    player = MediaPlayer.create(this, R.raw.braincandy);
    player.setLooping(false); // Set looping
}

@Override
public void onDestroy() {
    Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onDestroy");
    player.stop();
    try {
        s.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public void onStart(Intent intent, int startid) {
    Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onStart");
    player.start();
    try {
        s = new Socket("192.168.1.54", 64000);
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
 } 
```

我将连接作为服务运行。

真正的问题是我可以与我的 Android 手机 (2.3.7) 和模拟器 (2.3.3) 建立连接，但是当我想在我的平板电脑 (4.0.3) 上进行测试时，我的应用程序总是在我想要的时候崩溃开始连接。

有人可以帮我弄这个吗？

这是 logcat 日志： FATAL EXCEPTION: main java.lang.RuntimeException: Unable to start service

```
com.gunther.servicetcp.MyService@412b0a98 with Intent 
{    cmp=com.gunther.servicetcp/.MyService }: android.os.NetworkOnMainThreadException
at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2376)
at android.app.ActivityThread.access$1900(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.os.NetworkOnMainThreadException
0at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
at libcore.io.IoBridge.connect(IoBridge.java:112)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
at java.net.Socket.startupSocket(Socket.java:566)
at java.net.Socket.tryAllAddresses(Socket.java:127)
at java.net.Socket.<init>(Socket.java:177)
at java.net.Socket.<init>(Socket.java:149)
at com.gunther.servicetcp.MyService.onStart(MyService.java:53)
at android.app.Service.onStartCommand(Service.java:438)
at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2359)
:   ... 10 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T11:59:44.710

您不应该在主线程上进行网络操作。这将导致您的应用程序无响应。在 Honeycomb 之前，您可以侥幸逃脱，但 Honeycomb 和较新的 Android 版本会检查并抛出您遇到的异常。另请参阅[Android Developers API 的此页面](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T09:42:20.507

`Services`的`onStart()`方法在主线程上运行，（是的，服务似乎在应用程序的主线程上运行。）因此您应该在该`onStart()`方法中分叉另一个线程并在该线程中执行您需要执行的所有操作。

# android - 如何获取在对话框中动态加载（setView）的布局的元素（findViewById）？

> ID：10313382
> 
> 赞同：14
> 
> 时间：2012-04-25T10:01:01.607
> 
> 标签：android, android-layout, android-edittext, preferenceactivity

我需要获取在 xml 布局中定义的 EditText，该布局在首选项对话框中作为视图动态加载，即：

```
public class ReportBugPreference extends EditTextPreference {

    @Override
    protected void onPrepareDialogBuilder(AlertDialog.Builder builder) {
        super.onPrepareDialogBuilder(builder);   
        builder.setView(LayoutInflater.from(ctx).inflate(R.layout.preference_report_bug_layout,null));
        EditText edttxtBugDesc = (EditText) findViewById(R.id.bug_description_edittext); // NOT WORKING
    }

} 
```

**编辑：** jjnFord 的解决方案

```
@Override
protected void onPrepareDialogBuilder(AlertDialog.Builder builder) {
    super.onPrepareDialogBuilder(builder);  

    View viewBugReport = LayoutInflater.from(ctx).inflate(R.layout.preference_report_bug,null);
    EditText edttxtBugDesc = (EditText) viewBugReport.findViewById(R.id.bug_description_edittext);

    builder.setView(viewBugReport);

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-25T10:08:29.860

由于您正在扩展 EditTextPreference，因此您可以使用 getEditText() 方法来获取默认文本视图。但是，由于您正在设置自己的布局，这可能不会满足您的需求。

在您的情况下，您应该将您的 XML 布局膨胀到一个 View 对象中，然后在视图中找到 editText - 然后您可以将您的视图传递给构建器。还没有尝试过，但只是看看你的代码，我认为这是可能的。

像这样的东西：

```
View view = (View) LayoutInflater.from(ctx).inflate(R.layout.preference_report_bug_layout, null);
EditText editText = view.findViewById(R.id.bug_description_edittext);
builder.setView(view); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-12T19:57:08.407

> 需要 LayoutInflater 在运行时基于 XML 文件创建（或填充）视图。例如，如果您需要为 ListView 项动态生成视图。 [Android 应用程序中的布局充气器是什么？](https://stackoverflow.com/questions/3958897/what-is-the-layout-inflater-in-an-android-application)

1.  创建您的 LayoutInflater：

`LayoutInflater inflater = getActivity().getLayoutInflater();`

2.  通过引用 your_xml_file 的 inflater 创建您的视图：

`View view= inflater.inflate(R.layout.your_xml_file, null);`

3.  通过 id 在布局中查找对象。

`TextView textView = (TextView)view.findViewById(R.id.text_view_id_in_your_xml_file);`

4.  使用你的对象：即

`textView.setText("Hello!");`

# android - 测试一个使用 ActionBarSherlock 的项目

> ID：10313385
> 
> 赞同：5
> 
> 时间：2012-04-25T10:01:15.963
> 
> 标签：android, ant, actionbarsherlock, android-library, android-testing

我的设置：

1.  图书馆项目：ActionBarSherlock
2.  项目
3.  测试项目

我的项目将库项目链接为库项目。它编译并运行良好。

现在我尝试使用普通的测试项目来测试我的应用程序。在 Eclipse 中运行测试非常完美。如果我尝试使用 ant 运行测试，测试项目甚至不会编译：

```
[javac] LoginActivityTest.java:9: cannot access com.actionbarsherlock.app.SherlockActivity
[javac] class file for com.actionbarsherlock.app.SherlockActivity not found
[javac] public class LoginActivityTest extends ActivityInstrumentationTestCase2<LoginActivity> {
[javac]                                                                        ^
[javac] LoginActivityTest.java:25: cannot find symbol 
```

通过 eclipse 构建工作完美，测试运行也很完美。

如果我将库项目链接到我的测试项目，它会用 ant 编译，但测试会失败。

```
 [exec] Error in testSuiteConstructionFailed:
 [exec] java.lang.RuntimeException: Exception during suite construction
 [exec]     at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:238)
 [exec]     at java.lang.reflect.Method.invokeNative(Native Method)
 [exec]     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
 [exec]     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
 [exec]     at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:537)
 [exec]     at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1551)
 [exec] Caused by: java.lang.reflect.InvocationTargetException
 [exec]     at java.lang.reflect.Constructor.constructNative(Native Method)
 [exec]     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
 [exec]     at android.test.suitebuilder.TestMethod.instantiateTest(TestMethod.java:87)
 [exec]     at android.test.suitebuilder.TestMethod.createTest(TestMethod.java:73)
 [exec]     at android.test.suitebuilder.TestSuiteBuilder.addTest(TestSuiteBuilder.java:262)
 [exec]     at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:184)
 [exec]     at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:371)
 [exec]     at com.zutubi.android.junitreport.JUnitReportTestRunner.onCreate(JUnitReportTestRunner.java:90)
 [exec]     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3891)
 [exec]     at android.app.ActivityThread.access$1300(ActivityThread.java:122)
 [exec]     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1184)
 [exec]     at android.os.Handler.dispatchMessage(Handler.java:99)
 [exec]     at android.os.Looper.loop(Looper.java:137)
 [exec]     at android.app.ActivityThread.main(ActivityThread.java:4340)
 [exec]     at java.lang.reflect.Method.invokeNative(Native Method)
 [exec]     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 [exec]     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 [exec]     at dalvik.system.NativeStart.main(Native Method)
 [exec] Caused by: java.lang.NoClassDefFoundError: com.myproject.android.app.activities.LoginActivity
 [exec]     at com.myproject.android.app.test.LoginActivityTest.<init>(LoginActivityTest.java:18)
 [exec]     ... 19 more 
```

我的测试课：

```
public class LoginActivityTest extends ActivityInstrumentationTestCase2<LoginActivity> {

    private LoginActivity mActivity;

    private EditText      mTextUserName;

    private EditText      mTextUserPassword;

    public LoginActivityTest() {
        // the super call is line 18 (see stack trace above)
        super("com.myproject.android.app.activities", LoginActivity.class);
    }

    @Override
    protected void setUp() throws Exception {
        super.setUp();
        mActivity = getActivity();
        mTextUserName = (EditText) mActivity.findViewById(com.myproject.android.app.R.id.login_activity_username);
        mTextUserPassword = (EditText) mActivity.findViewById(com.myproject.android.app.R.id.login_activity_password);
    }

    public void testPreConditions() {
        assertTrue("Activity is null!", mActivity != null);
    }

    public void testLogin() throws Throwable {
        mActivity.runOnUiThread(new Runnable() {
            public void run() {
                mTextUserName.setText("username");
                mTextUserPassword.setText("password");
            }
        });
        sendKeys(KeyEvent.KEYCODE_ENTER);
    }
} 
```

一些想法如何解决这个问题？

更新：看起来 ant 构建/测试仍然是一团糟。根据这篇关于[测试库项目](http://www.paulbutcher.com/2010/09/android-library-project-with-tests-step-by-step/)的博客文章，列出的 7 个问题中的大部分将在下一个 ADT 版本 (ADT r20) 中修复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T11:19:14.337

`Library`自从 ADT 17 破坏/修复了所有东西（取决于您当前是否正在用头撞到桌子上）以来，关于使用项目的信息有很多不同的信息。

首先，请注意Android 团队规定的名词`Library`和“库”之间的区别。`Library`我也在使用`Referencing`项目，它描述了一个使用项目的`Library`项目。

即，一个`Referencing`项目使用一个`Library`项目。

**非`Library`“图书馆”项目**

在正常的 Java 开发中，可以在 Eclipse 中链接项目，其中一个项目依赖于另一个项目的源代码。我相信这种方法具有使用库项目源作为引用项目源的效果。这意味着库项目源在编译引用项目时在范围内。库项目类与引用项目的类同时构建。

在构建以供在大多数情况下使用时，这可以很好地工作，因为所有类都是构建然后打包在 JAR 或 WAR 或其他任何东西中的。

**图书馆项目**

库项目的竞争（**不是**混合和匹配）方法是 Android 团队`Library`项目：

标记为`Library`Project 的 Android 项目将编译并将其源代码构建到`jar`其`bin`目录中的文件中（在 clean/build 命令之后）。任何`Referencing`项目都会自动导入它`jar`并获得对`Library`项目功能的访问权限。`Android Dependencies`您可以通过查看包资源管理器中的 Java 库来查看这种关系。

除了类依赖解析之外，资源也被直接引用并编译到项目目录`R.java`内的文件中。`Referencing``gen`

新`ADT`引入的问题给人们设置的，因为它添加了“支持”，包括**`Library`**项目引用的 jars：

**预 ADT 17**

该`Library`项目在其构建路径中添加了一个 jar。该`Referencing`项目还可以将 jar 添加到其*自己的*构建路径中。

**ADT 17 起**

[处理依赖关系](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

`Library`在动态引用自己的 jar 的ADT 17项目开始出现奇怪的行为之后。这不仅仅是在`Referencing`项目中包含相同的依赖引用以保持 jar 在两个范围内可见的情况。这现在导致包含类的奇怪重复。

`Referencing`不幸的是，简单地从or项目中删除该库`Library`（因此只有一个链接存在）然后混淆了 Eclipse，它再也无法从项目范围内看到使用它的 jar。

要解决此问题，您需要将`Library`项目 jar 放在`/libs`目录中 - 如果您的 jar 位于硬盘驱动器上的分散位置，这可能会给您带来麻烦。然后，这些 jar 将自动用于您的`Library`项目`Referencing`中。

因此，要超越 ADT 17：

*   **删除当前项目范围内未**用作源的任何 jar 文件（无论是您的项目`Library`还是`Referencing`项目）。
*   从您的项目中删除任何“库”项目`Library`（而是将它们编译到 jar 中）。
*   从项目中删除外部 jar `Library`，将它们复制到`libs`目录中。

# c# - LINQ to SQL CompiledQuery 变慢

> ID：10313391
> 
> 赞同：0
> 
> 时间：2012-04-25T10:01:23.957
> 
> 标签：c#, linq-to-sql, sql-server-ce, compiled-query

我正在尝试`CompiledQuery`在 LINQ to SQL（WP7、C# 和 SQLCE 3.5 数据库）中使用 a，但在第一次使用后，查询速度会减慢到未编译的速度。我是新手，我确定我错过了一些明显的东西，但我不确定是什么。

作为上下文，我有一个相当大的术语数据库（大约 100,000 条记录），我想搜索这个数据库。在尝试了各种不同的方法和优化之后，我的查询仍然很慢，因此我考虑使用`CompileQuery`.

下面是我在 LINQPad 中拼凑的一些代码：

```
// A list of search terms
List<string> keywords = new List<string>()
{
    "almond",
    "banana",
    "chocolate",
    "date",
    "elderberry",
};

// Searches for each keyword in the database
void Main()
{
    int i = 0;

    while (i < keywords.Count)
    {
        Stopwatch timer = Stopwatch.StartNew();

        IQueryable<Result> r = CQ(this, keywords[i]);

        timer.Stop();

        Console.WriteLine("Query: {0}\nTime: {1}ms\n",
            query,
            timer.ElapsedMilliseconds);

        i++;
    }
}

// The compiled query property
static Func<TypedDataContext, string, IQueryable<Result>> CQ
{
    get
    {
        return CompiledQuery.Compile<TypedDataContext, string, IQueryable<Result>>
        (
            (TypedDataContext dc, string query) =>    
            (
                from x in dc.MyTable
                where x.MyColumn.Contains(query)
                select new Result
                {
                    Something = x.MyColumn
                }
            )
        );
    }
}

// A simple class to hold the results
class Result
{
    public string Something { get; set; }
} 
```

当然，这被过度简化了，但你明白了。现在产生的结果是：

```
Query: almond
Time: 14ms

Query: banana
Time: 1197ms

Query: chocolate
Time: 1191ms

Query: date
Time: 1226ms

Query: elderberry
Time: 1201ms 
```

大家说的是第一次查询会比较慢，但是后面的查询会比较快。但是在我的情况下，情况恰恰相反：看起来第一个查询已编译，但后一个查询未编译。

我确定这很明显，但我不确定我错过了什么。任何指针？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:47:30.610

尝试将查询编译的委托结果保存到静态支持字段。每次访问您的属性时，您都可能重新编译。不知道为什么第一次执行如此之快。它不可能与数据相关是吗？

# android - Android SDK 无法运行-Windows 7 Ultimate x64

> ID：10313392
> 
> 赞同：0
> 
> 时间：2012-04-25T10:01:25.813
> 
> 标签：android, java, jdk1.6

每当我尝试启动 Android SDK 时，一个 cmd 窗口就会闪烁，但什么也没有发生。

我安装了 JDK 1.6 和 1.7 版。当我尝试`Android.bat`从工具文件夹启动时，我得到了这个：（[断开的链接）](http://up.vatandownload.com/images/kyqlr8q061dl5v5w76n0.jpg)

`Java.exe`在system32中。我一直在寻找几个小时，但没有解决方案。

* * *

**编辑**：通过安装 32 位 java 修复，感谢 Phix。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:04:34.867

我在使用 64 位版本的 JDK 时遇到了类似的问题。尝试改用 32 位版本。

# rspec - 从 before(:all) 块中获取 RSpec 示例组名称

> ID：10313395
> 
> 赞同：4
> 
> 时间：2012-04-25T10:01:32.697
> 
> 标签：rspec

基本上这个问题类似于这个问题：[Getting the full RSpec test name from within a before(:each) block](https://stackoverflow.com/questions/3816322/getting-the-full-rspec-test-name-from-within-a-beforeeach-block)

我有这样的代码，它可以工作：

```
config.before :each do |test|
    p test.example.metadata[:example_group][:full_description]
end 
```

现在我还需要从内部获取示例组名`before :all`。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:31:25.963

试试这个：

```
config.before :all do |test|
  p test.class.metadata[:example_group][:full_description]
end 
```

# c - SSE 指令在哪些方面优于普通指令

> ID：10313397
> 
> 赞同：7
> 
> 时间：2012-04-25T10:01:39.840
> 
> 标签：c, x86-64, sse

x86-64 的 SSE 指令（向量指令）在哪里优于普通指令。因为我看到的是执行 SSE 指令所需的频繁加载和存储正在抵消我们因向量计算而获得的任何收益。那么有人可以给我一个示例 SSE 代码，它的性能比普通代码更好。

可能是因为我分别传递每个参数，像这样......

```
__m128i a = _mm_set_epi32(pa[0], pa[1], pa[2], pa[3]);
__m128i b = _mm_set_epi32(pb[0], pb[1], pb[2], pb[3]);
__m128i res = _mm_add_epi32(a, b);

for( i = 0; i < 4; i++ )
 po[i] = res.m128i_i32[i]; 
```

有没有一种方法可以一次传递所有 4 个整数，我的意思是一次传递整个 128 个字节`pa`？`res.m128i_i32`并一次性分配`po`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T10:48:12.373

将评论总结为答案：

您基本上落入了与大多数初学者相同的陷阱。您的示例中基本上有两个问题：

1.  你在滥用`_mm_set_epi32()`.
2.  您的计算/负载存储比率非常低。（在您的示例中为 1 到 3）

* * *

`_mm_set_epi32()`是一个非常昂贵的内在函数。虽然使用起来很方便，但它不会编译成一条指令。一些编译器（例如 VS2010）在使用`_mm_set_epi32()`.

相反，由于您正在加载连续的内存块，您应该使用`_mm_load_si128()`. 这要求指针对齐到 16 个字节。如果您不能保证这种对齐，您可以使用`_mm_loadu_si128()`- 但会降低性能。理想情况下，您应该正确对齐数据，这样就不需要使用`_mm_loadu_si128()`.

* * *

要真正高效地使用 SSE，您还需要最大化您的计算/负载存储比率。我的目标是每次内存访问 3 到 4 条算术指令。这是一个相当高的比例。通常，您必须重构代码或重新设计算法以增加它。结合对数据的传递是一种常见的方法。

当您拥有具有长依赖链的大型循环体时，通常需要展开循环以最大限度地提高性能。

* * *

一些成功使用 SSE 实现加速的 SO 问题示例。

*   [C 代码循环性能](https://stackoverflow.com/questions/9992054/c-code-loop-performance)（非矢量化）
*   [C 代码循环性能 [续]](https://stackoverflow.com/questions/10007243/c-code-loop-performance-continued)（矢量化）
*   [如何实现每个周期 4 次 FLOP 的理论最大值？](https://stackoverflow.com/questions/8389648/how-to-achieve-4-flops-per-cycle)（实现峰值处理器性能的人为示例）

# silverlight-5.0 - 如何将datagrid itemsource复制到silverlight5中的可观察集合对象中？

> ID：10313400
> 
> 赞同：-1
> 
> 时间：2012-04-25T10:01:42.873
> 
> 标签：silverlight-5.0

我在 DataGrid 中有一个值，例如名称、年龄、地址。我必须将数据网格值放入 Observable 集合对象中吗？这可能吗？.如果是，那么请任何人都可以告诉我解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:46:22.833

（对不起，我的英语不好）

为什么你一开始就不创建 ObservableCollection 而不是使用 List？

无论如何，您可以通过以下方式使用 List 数据创建 ObservableCollection：

```
ObservableCollection<Customer> customers = new ObservableCollection<Customer>(YOUR_LIST); 
```

如果确实需要从 DataGrid ItemsSource 中获取数据：

```
ObservableCollection<Customer> customers = new ObservableCollection<Customer>(grid.ItemsSource as List<Customer>); 
```

# html - 移动网站，纵向到横向

> ID：10313401
> 
> 赞同：1
> 
> 时间：2012-04-25T10:01:44.187
> 
> 标签：html, css, mobile-website

我正在制作一个移动网站，纵向导航栏的大小很好，顶部和底部有 15px 的填充，但是当我切换到横向模式时，它几乎占据了屏幕的一半。

解决此问题的最佳方法是什么，使其更小？

一个单独的样式表还是有一个我不知道的技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:08:51.193

[响应式设计](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)

我认为这会很有用：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:04:08.270

我将它用于我的客户移动网站及其正确的工作：

```
 <link rel="stylesheet" media="all and (orientation:portrait)" href="[css_file]">
    <link rel="stylesheet" media="all and (orientation:landscape)" href="[css_file]"> 
```

css文件可以相同

# php - 计算PHP中重复元素数量的最有效方法

> ID：10313404
> 
> 赞同：1
> 
> 时间：2012-04-25T10:01:50.633
> 
> 标签：php, arrays, hashmap, hashtable

假设我们有一组学生：

> 学生：本山姆...

每个学生家里都有一组书：

图书：

*   山姆 ABCD
*   本德夫
*   瑞安 ADGD

所以在 PHP 中，$students 数据结构是这样的：

```
Array
(
    [0] => Array
        (
            [name] => Joe Smith
            [books] => Array
                (
                    [0] => A
                    [1] => B
                    [2] => C
                )

        )

) 
```

我们想计算 A 重复了多少次以及谁拥有 AB 和 C 等。在 php 中执行此操作的一种方法是执行此操作：

```
if (sizeof($potential_entries) > 0) :
  for ($j = 0, $potentialsize = sizeof($potential_entries); $j < $potentialsize; ++$j)     {
    for ($k = 0, $listsize = sizeof($student_book); $k < $listsize; ++$k) {
      if ($student_book[$k] == $potential_entry[$k]) :
        $match = 1;
        $student_book[$k]['like_count']++;
       endif;
    }
  } 
```

这不是很有效，我们宁愿想要一个映射结构或一个哈希表，php 有像 perl 这样的结构吗？还是我们必须手动构建它们。编辑：我可以在 PHP 中看到我们有关联数组？您能否举一个在文档中找不到的示例。对于山姆：

```
var_dump($potential_entry):

[0]=>array(2) { ["name"]=> string(1) "A" ["id"]=> string(11) "1348"}
[1]=>array(2) { ["name"]=> string(1) "B" ["id"]=> string(11) "1483"}
[2]=>array(2) { ["name"]=> string(1) "C" ["id"]=> string(11) "13"}
[3]=>array(2) { ["name"]=> string(1) "D" ["id"]=> string(11) "1174"} 
```

那是 Sam 的，其余的我们有相同的结构。所以 sam 是数组，books 是数组，sam 有很多书。在这个例子中

*   D 计数=3 山姆·本·瑞安
*   A count=2 山姆瑞安
*   ETC...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:50:04.043

如果您有 $students 作为数组，并且该数组中的每个条目都有一个书籍数组，称为书籍

```
$books = array(); 
for ($i = 0, $count = sizeof($students); $i++) {
   foreach ($student[$i]['books'] as $book) { 
      if (isset($books[$book])) { 
          $books[$book]++; 
      } else { 
          $books[$book] = 1;
      }
   }
} 
```

然后在此之后，任何计数大于 1 的 $books 条目都是重复的，即

```
foreach ($books as $key => $value) { 
   if ($value) > 1) { 
        echo "Book " . $key . " is a duplicate (" . $value . ")"; 
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:11:30.110

```
$aFullCount = array(); // in this array you will have results of all characters count.
$aCondition = array("A", "B"); // set condition you need to count down here.
$aConditionMatch = array(); // in here you will have all users ids who matched your A + B
if ($aUsers){
    foreach ($aUsers as $sUserKey=>$aOneUser){
        $aForCondition = array();
        if ($aPotentialEntries){
            foreach ($aPotentialEntries as $aOnePotentialEntry){
                $aForCondition[] = $aOnePotentialEntry["name"];
                if (!isset($aFullCount[$aOnePotentialEntry["name"]]))
                    $aFullCount[$aOnePotentialEntry["name"]] = 1;
                else
                    $aFullCount[$aOnePotentialEntry["name"]]++;
            }
        }

        $aConditionCheck = array_intersect($aForCondition, $aCondition);
        if (!array_diff($aConditionCheck, $aCondition))
            $aConditionMatch[] = $sUserKey;
    }
} 
```

# c# - Linq/Entity Framework，对列执行 xpath 查询

> ID：10313406
> 
> 赞同：0
> 
> 时间：2012-04-25T10:01:58.887
> 
> 标签：c#, sql-server-2008, entity-framework, nhibernate, xpath

我们有一个包含 xml 字段的数据库。此时，我们对这个数据库执行查询，过滤 xml 中的值。在不久的将来，我们希望迁移到实体框架或 NHibernate 作为 orm。这可能吗？这是我们运行的两个查询（在 sql 中）：

```
SELECT 
  yy.[Description] as Name,
  convert(xml, yy.Xml).value('(//Division)[1]', 'varchar(255)') as Division,
  onvert(xml, yy.Xml).value('(//Season)[1]', 'varchar(255)') as Season
  into #Statistics ..... 
```

和

```
SELECT [dbo].[yy].[Id]
  FROM [dbo].[yy]
  WHERE [dbo].[yy].[ApplicationId] = 1
  AND (((dbo.[yy].Xml.exist(''(//qq[Season='Non seasonal'])'') = 1))) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:40:12.673

在 EF 中有多种方法可以将 SQL 直接传递到服务器，例如`ObjectContext.ExecuteStoreQuery`. 您还可以编写一个存储过程来执行 xpath 查询并像往常一样映射它。据我所知，LINQ 或 Entity SQL 中没有对 xpath 的原生支持。

# image - wp7上的背景图像渲染问题

> ID：10313407
> 
> 赞同：6
> 
> 时间：2012-04-25T10:02:06.970
> 
> 标签：image, windows-phone-7, background, rendering

在我的 WP7 应用程序中，我遇到了背景图像渲染不佳的问题。看起来图像是使用 8 位颜色渲染的，而且通常看起来很难看。它们是.png。下面是它在应用程序中的外观截图： [screenshot](http://desmond.imageshack.us/Himg39/scaled.php?server=39&filename=captureejj.png&res=landing)

有谁知道这是什么原因以及如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T10:25:08.053

您是否尝试过启用 32 位颜色？

为此，请打开 WMAppManifest.xml 并在 App 元素中添加 BitsPerPixel="32"

```
<Deployment xmlns="http://schemas.microsoft.com/windowsphone/2009/deployment" AppPlatformVersion="7.1">
  <App BitsPerPixel="32" xmlns="" ProductID="{25aef417- 
```

不确定这是否能解决问题，但您使用 .png 图像且只有 16 位颜色的事实可能与此相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:27:34.303

不要“启用 32 位颜色”。许多设备只有 16 位 LCD，所以它们仍然存在问题 - 你只是不知道它们。

如果您真的需要平滑渐变，请使用预编辑背景，例如。[http://nerdplusart.com/photoshop-action-for-windows-phone-7-dithering](http://nerdplusart.com/photoshop-action-for-windows-phone-7-dithering)但是它仍然没有随着 Windows Phone 流动。

真正的解决方案是将您的设计更改为纯色、原色。这是用户购买 WP 设备的选择，您应该尊重它。

# asp.net-mvc-3 - 如何使用 MVC 3 中的报表查看器生成报表？

> ID：10313412
> 
> 赞同：2
> 
> 时间：2012-04-25T10:02:37.440
> 
> 标签：asp.net-mvc-3, reportviewer

我已经在 asp.net 中使用报告查看器完成了报告。现在我也想在 MVC 3 中创建它。因为我对 MVC 很陌生，所以期待你们的指导。谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:04:20.320

您需要在运行时单独填充数据集并将其与您的报表相关联。

如果您最初使用报表向导创建报表，它应该已经创建了一个您可以使用的数据集定义 - 在您的情况下是 StudentDataSource.xsd。如果您打开该文件，您将看到您的查询以及查询的 TableAdapter。

这是基于上面提到的 Kevin 问题的示例（[如何在 asp.net mvc 3 razor view 中使用 reportviewer 控件？](https://stackoverflow.com/questions/6144513/how-can-i-use-a-reportviewer-control-in-an-asp-net-mvc-3-razor-view)）

StudentReport.rdlc 报告，带有默认的 DataSet1 数据集和生成的 StudentDataSet.xsd...

这是**PDFController**中修改后的 File() 操作方法：

```
 public FileResult File() {
        // Create a new dataset
        StudentDataSet ds = new StudentDataSet();

        // Create and fill the Student data table
        // using the Student table adapter

        StudentDataSetTableAdapters.StudentTableAdapter dta =
               new StudentDataSetTableAdapters.StudentTableAdapter();
        dta.Fill(ds.Student);

        // Create a new report datasource with 
        //      Name = the dataset name in the report,
        //      Value = the populated data table.

        ReportDataSource rds = new ReportDataSource();
        rds.Name = "DataSet1";
        rds.Value = ds.Student;

        ReportViewer rv = new Microsoft.Reporting.WebForms.ReportViewer();
        rv.ProcessingMode = ProcessingMode.Local;
        rv.LocalReport.ReportPath = Server.MapPath("~/Reports/StudentReport.rdlc");

        // Add the new report datasource to the report.
        rv.LocalReport.DataSources.Add(rds);

        rv.LocalReport.Refresh();

        byte[] streamBytes = null;
        string mimeType = "";
        string encoding = "";
        string filenameExtension = "";
        string[] streamids = null;
        Warning[] warnings = null;

        streamBytes = rv.LocalReport.Render("PDF", null, out mimeType, out encoding, out filenameExtension, out streamids, out warnings);

        return File(streamBytes, mimeType, "StudentReport.pdf");
    } 
```

另外，请注意，如果您在上一个问题的 ASPXView.aspx 页面中使用相同的代码，则需要为您的 MVC 项目和您正在使用的数据集表适配器导入命名空间。

**ASPXView.aspx**

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>
<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0,
           Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
           Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>
<%@ Import Namespace="ProjectNamespace" %>
<%@ Import Namespace="ProjectNamespace.StudentDataSetTableAdapters" %>

<!DOCTYPE html>

<html>
<head id="Head1" runat="server">
    <title>ASPXView</title>
</head>
<body>
    <div>
        <script runat="server">
            private void Page_Load(object sender, System.EventArgs e)
            {
              StudentDataSet ds = new StudentDataSet();

              StudentTableAdapter dta = new StudentTableAdapter();
              dta.Fill(ds.Student);

              ReportDataSource rds = new ReportDataSource();
              rds.Name = "DataSet1";
              rds.Value = ds.Student;
              ReportViewer1.LocalReport.ReportPath = Server.MapPath("~/Reports/StudentReport.rdlc");
              ReportViewer1.LocalReport.DataSources.Add(rds);
              ReportViewer1.LocalReport.Refresh();
            }
        </script>
        <form id="Form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server">          
        </asp:ScriptManager>
        <rsweb:reportviewer id="ReportViewer1" runat="server" height="500" width="500" AsyncRendering="false"></rsweb:reportviewer>
        </form>        
    </div>
</body>
</html> 
```

# python - python无法将从文件中读取的行转换为列表或元组

> ID：10313413
> 
> 赞同：1
> 
> 时间：2012-04-25T10:02:42.203
> 
> 标签：python

考虑一个名为 lst.txt 的文件，其内容是`('a', ('b',('c','d')))`：

代码：

```
if __name__ == '__main__':
  with open('lst.txt') as fx:
    strs = fx.readline()
    print tuple(strs) 
```

结果是：`['(', "'", 'a', "'", ',', '(', "'", 'b', "'", ',', '(', "'", 'c', "'", ',', "'", 'd', "'", ')', ')', ')', '\n']`

但如果我使用 python shell，结果会有所不同：

```
>>>test_str = ('a', ('b',('c','d')))
>>>result = tuple(test_str)
>>>print result
('a', ('b', ('c', 'd'))) 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:08:40.307

因为两者不等价，所以当您从文件中读取时，您的文本不会被解析为 python。等效的是：

```
>>>test_str = "('a', ('b',('c','d')))"
>>>result = tuple(test_str) 
```

这应该很清楚为什么你会得到你的结果。字符串被迭代并变成一个元组，每个字符都被变成元组中的一个项目。

鉴于此，您需要做的是解析文件中的数据。您可以通过一些明显*不好的*方式来做到这一点，但一种安全的方法是使用[`ast.literal_eval()`](http://docs.python.org/library/ast.html).

最好的办法是以另一种格式存储数据，例如 JSON，然后使用[模块](http://docs.python.org/library/json.html)从文件中获取数据[。`json`](http://docs.python.org/library/json.html)如果您不需要它是人类可读的，并且知道您的数据来自哪里并信任它，那么您可以使用 use[`pickle`](http://docs.python.org/library/pickle.html?highlight=pickle#pickle)以方便使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:09:15.990

`testStr`已经是一个元组了。尝试`test_str = "('a', ('b',('c','d')))"`，您将获得与文件相同的结果。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-25T10:09:56.770

```
('a', ('b',('c','d'))) 
```

这不是一个 str，它已经是一个元组

```
>>> type(('a', ('b',('c','d'))))
<type 'tuple'> 
```

尝试这个

```
with open('lst.txt') as f:
  print eval(f.read()) 
```

# android - 具有多行自动换行符的Android EditText

> ID：10313417
> 
> 赞同：11
> 
> 时间：2012-04-25T10:02:50.590
> 
> 标签：android, android-edittext, word-wrap

是否可以有一个带有多行的 EditText，在用户输入的每 20 个字符后自动换行？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-25T10:09:18.633

在您的 XML 文件中创建这样的编辑文本，

```
 <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textMultiLine" >

        <requestFocus />
    </EditText> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T10:08:03.570

您可以实现 TextWatcher 接口并实现方法 afterTextChanged。该方法将在文本更改后调用，因此您可以自己在其中添加换行符。

# json - 如何仅将 Spring Resttemplate 与 JSON 一起使用

> ID：10313421
> 
> 赞同：11
> 
> 时间：2012-04-25T10:02:58.990
> 
> 标签：json, spring, http, resttemplate

我有一个以 XML 或 JSON 格式提供信息的休息服务。我使用 Spring Resttemplate 将我的应用程序连接到此服务。不幸的是，我的回复都是 XML 格式，而不是首选的 JSON 格式。我对请求的分析是，Spring Resttemplate 使用以下 Accept-Header 发送请求：

```
Accept: application/xml, text/xml, application/*+xml, application/json 
```

我的第一个接受类型的休息服务响应。这总是应用程序/xml。

如何更改 Accept-Types 以便仅获得 json 响应？RestTemplate 的 bean 定义中是否有一些属性？

我为此使用 Spring 3.1。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T10:20:07.337

您需要设置一个可用的`HttpMessageConverter`s列表`RestTemplate`以覆盖默认列表：

```
 RestTemplate rest = new RestTemplate();
 rest.setMessageConverters(Arrays.asList(new MappingJacksonHttpMessageConverter())); 
```

如果您在 XML 中定义`RestTemplate`，请在 XML 语法中执行相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-12T11:24:10.443

如果您只想使用 JSON 或发送，则从主题中不太清楚。在第一种情况下（消耗），您可以使用注释您的控制器

```
@RequestMapping(value="/path", headers = "Accept=application/json") 
```

在生产的情况下，您必须使用 contentType 进行 ResponseEntry：

```
HttpHeaders headers = new HttpHeaders();
        headers.add("Accept", "application/json");

        ResponseEntity.status(HttpStatus.OK)
                        .contentType(MediaType.APPLICATION_JSON)
                        .headers(headers); 
```

# ssl - IIS 7上的多个通配符证书，如何选择

> ID：10313429
> 
> 赞同：0
> 
> 时间：2012-04-25T10:03:18.240
> 
> 标签：ssl, iis-7, appcmd

我的通配符证书在三周后到期，我刚刚更新并安装了新证书，所以我的 IIS 现在有两个。

我目前有 30 多个站点正在运行，我想一一更新它们以使用更新的证书。虽然我没有看到 appcmd set site 允许我指定要使用的证书的参数。我真的很讨厌不得不删除旧证书并尽快重新添加所有站点，这意味着我的站点将在几分钟内没有 SSL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:10:55.313

Seems like there were no other possibilities, I decided to go ahead and update them manually as quickly as possible. When entering the "Bindings" popup for the first website, it warned me (as usual with https bindings) that multiple sites were detected. I ignored the warning and set the new certificate for the first website. That also updated the https bindings on all the other sites apparently. I have checked with various online SSL checkers and the sites all seems to be updated now. Phew.

# html - 使用带有 switch 语句的 html 列表元素并将列表与数据库绑定

> ID：10313430
> 
> 赞同：0
> 
> 时间：2012-04-25T10:03:21.713
> 
> 标签：html, jsp, menu, switch-statement

嗨，我想知道如何获取 html 元素并将它们与 switch 语句一起使用。

```
<div id="hori">
<ul>
 <li><a href="#">Aerospace</a></li>
 <li><a href="#">Automotive</a></li>
  <li><a href="#">Energy</a></li>
  <li><a href="#">IC Engines</a></li>
   <li><a href="#">IT</a></li>
   <li><a href="#">Training</a></li>
  <li><a href="#">Wind</a></li>
  <li><a href="#">Turbo</a></li>
 </ul>
</div>

<div id="verti">
<ul>
<li><a href="#1">Internal</a></li>
<li><a href="#2">Demos</a></li>
<li><a href="#3">Best Practice</a></li>
<li><a href="#4">Marketing</a></li>
<li><a href="#5">Papers & Public</a></li>
<li><a href="#6">Validation</a></li>
<li><a href="#7">Training</a></li>
</ul>
</div> 
```

这里水平和垂直菜单将在同一页面中。垂直菜单对于所有水平菜单都是相同的，例如。hori-main menus verti:sub menus。

1.  航天：
    *   内部的
    *   演示
2.  汽车：
    *   内部的
    *   演示

如果用户单击任何主菜单，则应相应更改模式。如果我点击航天下的内部，相关表格应显示在同一页面中，无需回发。

这是我的jsp页面，它将显示一个与数据库绑定的html表

```
Class.forName("com.mysql.jdbc.Driver").newInstance();

 connection = DriverManager.getConnection(connectionURL, "root", "root");

 java.sql.Date sqlDate = new java.sql.Date(new java.util.Date().getTime());

  psmnt1 = connection.prepareStatement("insert into file12(id,file_path,file_date) values(?,?,'"+ sqlDate+"')");

 psmnt1.setString(1, concat);

  psmnt1.setString(2, f.getPath());

  psmnt=connection.prepareStatement("select * from file12");

  rs=psmnt.executeQuery();

 int s=psmnt1.executeUpdate();
if(s>0)
{
System.out.println("Uploaded successfully !");
}
else
{
System.out.println("Error!");
}
}

catch(Exception e)
{
out.print("-----------error--------------"+e);
}
%>
<table cellpadding="15" border="1">
<%
 while(rs.next()){
%>
<tr>
<td><%=rs.getString(1)%> </td>
<td><%=rs.getString(2)%> </td>
<td><%=rs.getString(3)%> </td>
</tr>
<%}%>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:42:10.717

**如果用户单击任何主菜单，则应相应更改模式。如果我点击航天下的内部，相关表格应显示在同一页面中，无需回发。**

没有回发是不可能的， jsp 不是 asp ，在 jsp 中没有什么像回发。尝试其他一些策略来实现所需的功能（如 ajax）

# jquery - jQuery 按顺序延迟对象和运行函数

> ID：10313439
> 
> 赞同：0
> 
> 时间：2012-04-25T10:03:57.703
> 
> 标签：jquery, ajax, deferred

我有这段代码将使用 $.ajax 加载 css/js/jst（javascript 模板），我想让它在请求后运行一个请求，一次只运行一个，并异步执行。

```
var getStuff = function(resources, progressCallback, errorCallback, successCallback, doneCallback){

  var deferreds = [];
  var deferreds_progressCallback = [];
  var len = resources.length;

  for(var idx = 0; idx < len; idx++){

    var resource = resources[idx];

    var dfd = jQuery.Deferred(function(self){
      self.notify(resource);
      (function(resource){
        jQuery.ajax({
          cache: false,
          url: resource,
          dataType: 'text',
          error: function(xhr, status, error){
            self.reject(resource);
          },
          success: function(data, status, xhr){
            if(typeof(data) != 'string'){
              console.log(typeof(data));
            }
            if(resource.match(/.css$/)){
              $('head').append("<style type='text/css'>" + data + "</style>");
            }else if(resource.match(/.jst$/)){
              var templates_div = jQuery("<div style='display:none;'></div>").appendTo('body');
              templates_div.append(data);
            }else if(resource.match(/.js$/)){
              jQuery.globalEval(data);
            }
            self.resolve(resource);
          }
        });
      })(resource);
    });

    deferreds.push(dfd);
    deferreds_progressCallback.push(resource);

  }

  deferreds.reverse();
  deferreds_progressCallback.reverse();

  (function iterateWhen(){
    if(len--){
      jQuery.when(deferreds[len])
      .then(function(resource){
        successCallback(resource);
          iterateWhen();
      })
      .fail(function(resource){
        errorCallback(resource);
      })
      .progress(function(resource){
        progressCallback(resource);
      });
    }else{
      doneCallback && doneCallback();
    }
  }());

} 
```

现在，该代码将在启动时运行所有请求。它将等待 deferred.resolve() 被调用，但不会等待 iterateWhen() 循环开始迭代 deferreds[]。

根据 jQuery 文档，$.Deferred() 将接受一个函数作为可选参数，并在从构造函数返回之前运行该函数，所以这就是问题所在，但我不知道有一个解决方案可以满足我的需求。

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:17:56.010

我终于这样做了：

```
function getStuff(resources, progressCallback, errorCallback, successCallback, doneCallback){

  function inject(resource){
    var dfd = jQuery.Deferred();
    dfd.notify(resource);

    jQuery.ajax({
      cache: false,
      url: resource,
      dataType: 'text',
      error: function(xhr, status, error){
        dfd.reject(resource);
      },
      success: function(data, status, xhr){
        if(resource.match(/.css$/)){
          $('head').append("<style type='text/css'>" + data + "</style>");
        }else if(resource.match(/.jst$/)){
          $('body').append("<div style='display:none;'>" + data + "</div>");
        }else if(resource.match(/.js$/)){
          jQuery.globalEval(data);
        }
        dfd.resolve(resource);
      }
    });

    return dfd;
  };

  var len = resources.length;
  resources.reverse();

  (function iterateWhen(){
    if(len--){
      inject(resources[len])
      .then(function(resource){
        successCallback && successCallback(resource);
        iterateWhen();
      })
      .fail(function(resource){
        errorCallback && errorCallback(resource);
      })
      .progress(function(resource){
        progressCallback && progressCallback(resource);
      });
    }else{
      doneCallback && doneCallback();
    }
  }());

} 
```

所以你只需要这样称呼它：

```
getStuff([

  /*Load .JS, .JST and .CSS files*/
  /*Only same-domain request!*/
  'foo/bar.js',
  'bar/foo.css'

], function(resource){ /*Progress callback*/

  console.log("Loading " + resource);

}, function(resource){ /*Errors callback*/

  console.log("Error while loading " + resource);

}, function(resource){ /*OK callback*/

  console.log("Loaded " + resource);

}, function(){

  console.log("Finished loading .js, .jst and .css files!");

}); 
```

问候！

# c# - 使用 SQL 命令的语句

> ID：10313445
> 
> 赞同：0
> 
> 时间：2012-04-25T10:04:11.760
> 
> 标签：c#, sql-server-2005, using-statement

我在执行查询时没有使用块的时间比我记得的要长，但是我现在遇到了锁定表的问题，而且看起来查询没有正确处理。

但是我需要将以下代码重新写入 using 块。

```
sql = conn.CreateCommand();
sql.CommandText = query;
sql.Parameters.Add("@p_DateFrom", SqlDbType.VarChar).Value = datefrom.ToString("yyyy-MM-dd");
sql.CommandType = CommandType.Text;

int rowCount = (Int32)sql.ExecuteScalar();
sql.Parameters.Clear();
sql.Dispose();
return rowCount; 
```

我将如何去重写这个。我是否必须执行以下操作：

```
int rowCount = 0;
using (sql = conn.CreateCommand())
{
    sql.CommandText = query;
    sql.Parameters.Add("@p_DateFrom", SqlDbType.VarChar).Value = datefrom.ToString("yyyy-MM-dd");
    sql.CommandType = CommandType.Text;
    rowCount = (Int32)sql.ExecuteScalar();
}           
return rowCount; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:12:14.650

你不必那样*做*——你可以使用像[dapper](http://nuget.org/packages/Dapper)这样的东西：

```
int rowCount = conn.Query<int>(query, new {p_DateFrom = datefrom}).Single(); 
```

任务完成; 一切都很好，没有弄乱参数，并且不会犯将日期时间作为字符串传递的错误（它应该作为日期时间传递）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T10:06:22.633

> 我是否必须执行以下操作：

是的。

**更长的答案：**

是的，您必须执行以下操作。

**甚至更长：**

是的，您必须执行以下操作：

```
int rowCount = 0;
using (sql = conn.CreateCommand())
{
    sql.CommandText = query;
    sql.Parameters.Add("@p_DateFrom", SqlDbType.VarChar).Value = datefrom.ToString("yyyy-MM-dd");
    sql.CommandType = CommandType.Text;
    rowCount = (Int32)sql.ExecuteScalar();
}           
return rowCount; 
```

# php - MySQL 现场搜索（或其他解决方案）

> ID：10313458
> 
> 赞同：0
> 
> 时间：2012-04-25T10:04:59.700
> 
> 标签：php, mysql, database, database-design, search

我有一个包含特定类别产品的表格，但每个类别中的产品可以包含多个元数据跟踪字段

**桌子：** `products`

```
 id    name          category     metadata
 1   something          1      blue,red,purple
 2   something else     2      left,right,middle 
```

我一直在尝试考虑拥有单个产品表的最佳方法，但似乎无法方便地压缩元数据。现在我已经创建了一个包含所有元数据和字段的表，用于跟踪相关类别（顺序是这样我可以使用下拉列表等对它们进行排序......）

**更新表：** `products`

```
 id    name          category   metadata
 1   something          1         1,2,3
 2   something else     2         4,5,6 
```

**桌子：** `metadata`

```
 id   category   sequence   option
 1        1         1        blue
 2        1         2        red
 3        1         3        purple
 4        2         1        left
 5        2         2        right
 6        2         3        middle 
```

如果这种格式有意义.. 我正在尝试生成一个查询，该查询将在我的产品表中搜索值并获取每个和所有相关的元值。我遇到的问题是试图在产品领域找到一个独特的价值。如果我进行 MySQL 搜索，`LIKE(%1%)`我将得到 1、11、21、31 等的匹配项......我想默认情况下在字段中添加一个前导和尾随逗号，然后搜索`",1,"`哪个是唯一的......但是有成为更好的方法...

有什么建议（关于格式或查询）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:11:25.367

在单个数据库字段中使用逗号分隔的值并不是一个理想的设计。除了您提到的问题（难以搜索）之外，您的查询效率会降低，因为数据库将无法使用索引进行查找。

我建议制作一个与products 表具有多对一关系的单独表**products_metadata 。**拥有*metadata_id* 和*product_id*，这是一个链接回产品表的外键。这将使您的工作更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:10:48.273

您想添加另一个表，将产品链接到它们的元数据。它将有两列：`productid`和分别引用和表`metadataid`中的相关条目。然后，您不再将元数据保留在表中，而是根据需要将它们放在一起。`products``metadata``products``JOIN`

# html - 使用css消失的输入提交按钮

> ID：10313460
> 
> 赞同：0
> 
> 时间：2012-04-25T10:05:07.210
> 
> 标签：html, css

我有一个输入提交按钮，其中包含以下代码

```
<input class="buttons" type="button" onclick="javascript:jQuery(xxxx)" style="font-size: 12px;" value="Invite to Bid"> 
```

以下是在 Button 上放置一个优雅的“Go”图像的 css 函数

```
.buttons {
background: url("/images/default/product/go_bt.png") no-repeat scroll 0 0 transparent;
} 
```

但是现在图像和按钮图形都显示了现在，为了使值空白，我使用了以下 css 代码

```
 input.buttons {
color: transparent;
} 
```

但是输入按钮图形仍然没有消失，只是它的值消失了..有没有可能使用css中的类按钮消失这个输入按钮图形，这样我就可以拥有“go”图像的功能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:13:16.230

好的，不确定您是要使输入消失还是删除图像。

使用 css 删除背景图像是

```
background-image:none 
```

让某物消失是：

```
display: none  or visibility:hidden 
```

您在下面所做的是影响字体颜色

```
color: transparent; 
```

附言。css 有 id 和 classes 没有功能。这个问题也不应该用 css3 标记

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:14:42.547

据我了解，您必须为此定义`text-indent`。像这样写：

```
 input.buttons {
  text-indent:-9999px
} 
```

# ios - 如何修改 UIPickerView 的选定单元格？

> ID：10313461
> 
> 赞同：0
> 
> 时间：2012-04-25T10:05:10.447
> 
> 标签：ios

我有一个 UIPickerView ，其中包含米、厘米和毫米三个组件，我希望能够修改选定的单元格。

说如果我选择 10,20, 5 代表 m,cm 和 mm。

除了所选单元格中的数字为 10m 20cm 5mm 之外，我应该能够显示这些单位。

我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:53:41.673

这可能不是最好的解决方案，但似乎正在工作......

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:     (NSInteger)component
{
    UILabel *tempView1 = (UILabel *)[pickerView viewForRow:lastSelectedRow  forComponent:lastSelectedComponent];
    tView1.text = [NSString stringWithFormat:@" %@",[yourDataArray objectAtIndex:lastSelectedRow]];

    UILabel *tView = (UILabel *)[pickerView viewForRow:row forComponent:component];
    tView.text = [NSString stringWithFormat:@" %@ cm",[yourDataArray objectAtIndex:row]];
    lastSelectedRow = row;
    lastSelectedComponent = component;

} 
```

在这里，我将 lastSelectedRow 和 lastSelectedComponent 作为我的类变量。

# php - 正确的实现方式：DAO Design Pattern php+pdo

> ID：10313463
> 
> 赞同：1
> 
> 时间：2012-04-25T10:05:22.490
> 
> 标签：php

```
class UserMapper {

    protected $db;

    public function __construct(PDO $db) {
        $this->db = $db;
    }

    public function save(User $user_object)
    {

    }

    public function getUserById($id)
    {
        //code
    }

}

class User {

    private $id;
    private $username;

    function __construct($user_row = null) 
    {
        if (!is_null($user_row)) {
            $this->id = $user_row->id;
            $this->username = $user_row->username;
        }
    }

    public function __set($name, $value)
    {
    }

    public function __get($name)
    {
        return $this->$name;
    }

} 
```

例子：

```
$user = new User();
$user->username = 'New Username';
$user_mapper = new UserMapper($db); //Pdo object = $db
$user_mapper->save($user); 
```

这是实现模式的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:15:51.797

好吧，就是这样，但模式还有更多内容。您可能想查看这篇[文章](http://www.javaworld.com/javaworld/jw-03-2002/jw-0301-dao.html)和[这些](http://www.javaworld.com/javaworld/jw-03-2002/jw-0301-dao.html#resources)参考资料，那里对模式进行了深入解释。

# php - 网站、API 和 iPhone App 让用户可以通过 Facebook 登录

> ID：10313464
> 
> 赞同：5
> 
> 时间：2012-04-25T10:05:23.700
> 
> 标签：php, ios, facebook, facebook-graph-api

我正在构建一个网站 (PHP)、API (PHP) 和一个原生 iPhone 应用程序。我希望用户使用他们的 Facebook 帐户登录，以便他们可以通过网站或 iPhone 应用程序发布评论/上传照片到我们的服务器/数据库。这也将节省我创建完整用户注册系统的时间。

我试图弄清楚如何为这种解决方案创建一个统一的架构。我正在考虑以下事情：

**登记：**

*   创建一个包含我的用户的数据库表（表将包含以下字段：id、facebook_uid、firstname、lastname）
*   iPhone App登录场景：用户通过Facebook登录；按下允许允许我的应用程序；使用 access_token（存储在他的手机上）返回 App。之后调用我自己的 API 以使用以下信息注册用户（如果尚未在数据库中注册）：facebook_uid、名字和姓氏。
*   网站登录场景：用户通过Facebook登录；重定向到我配置的返回 url 并使用这些值 facebook_uid、firstname 和 lastname 注册用户（如果尚未在数据库中）

**发布产品评论**

*   Iphone App：使用以下参数输入调用我的 API：review_text、facebook access_token。然后，我的 API 将使服务器端 API 调用 facebook 以获取 facebook_uid。当我检索到 facebook_uid 时，我将这个 facebook 用户的评论记录插入到数据库中。（除了发送 Facecbook access_token 之外，我还可以直接将 facebook_uid 值发送到我的 API。但我认为这可能不太安全，因为如果知道他们的 facebook_uid，任何人都可以插入对其他用户行为的评论）

*   网站：借助 Facebook Connect PHP 库 FB 登录会话可用，因此我可以通过阅读会话 facebook_uid 直接插入服务器端评论。

这是使用 Facebook 作为您自己平台的登录名的正确且安全的方式吗？或者是否有任何其他 PHP 模块/库我可以用来简化这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:31:47.477

我处于类似的情况。将 access_token 保留在手机上似乎是个好主意，然后通过您的 API 传递它以在您自己的数据库中验证用户似乎也是一个好主意。

加密 access_token 并将其存储在您自己的数据库中并对其进行检查而不是不断地 ping Facebook API 是否同样安全，例如：

1.  通过 Facebook 登录，获取 Facebook UID 和 access_token。
2.  将 UID 和/或 access_token 存储在通过 md5 / sha 加密的数据库中。
3.  每次您的 API 进行调用时，传递 access_token 并与存储的令牌进行检查以验证调用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:17:41.927

Facebook 在这里有一个现有的 api [http://developers.facebook.com/docs/guides/web/](http://developers.facebook.com/docs/guides/web/)

该页面还包含有关如何实现此功能的教程

对于 iPhone 特定的 facebook 登录，请看这里 [https://developers.facebook.com/docs/mobile/ios/build/#implementsso](https://developers.facebook.com/docs/mobile/ios/build/#implementsso)

# java - Java：使用 StringTokenizer 添加整数

> ID：10313467
> 
> 赞同：0
> 
> 时间：2012-04-25T10:05:43.977
> 
> 标签：java

我想从“DataFile.txt”文件中读取数据，但在程序中我有 2 个整数，那么如何使用 StringTokenizer 传递整数（“days”和“tprice”变量应该是整数）？

```
 private void readDataFileAndDisplay()
      {    
           String allRecord="";     // all details of customer    
           try
           {
                Scanner in = new Scanner (new FileReader ("DataFile.txt")); //open file    
                String myEntry = "" ;   
                String name ="";
                String ID="";
                String roomType ="";
                String meal="";
                String days="";
                String tprice="";  

                while (in.hasNextLine ())
                {    
                    myEntry = in.nextLine();
                    StringTokenizer st = new StringTokenizer (myEntry, ",");
                    while (st.hasMoreTokens ())
                    {    
                        name = st.nextToken();
                        ID = st.nextToken();
                        name = st.nextToken();
                        roomType = st.nextToken();
                        meal = st.nextToken();
                        days = st.nextToken();
                        tprice =st.nextToken();
                        myList.add (new Customer (name, ID, roomType, meal, days, tprice));
                    }    
                } // end of while loop
                in.close(); // close file
              } catch (IOException ex)
              {
                     System.out.println ("file loading failed.");
              }
   } 
```

我也试过 parseInt 像：

```
int Intdays = Integer.parseInt (st.nextToken ());
int IntTprice = Integer.parseInt (st.nextToken ()); 
```

但编译后显示以下异常： ![在此处输入图像描述](../Images/f949037798d4d0ba39944210f7df80c6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:18:26.523

```
name = st.nextToken();
                    ID = st.nextToken();
                    name = st.nextToken();
                    roomType = st.nextToken();
                    meal = st.nextToken();
                    days = st.nextToken();
                    tprice =st.nextToken();
                    int Intdays = Integer.parseInt(days);
                    int IntTprice = Integer.parseInt(tprice);
                 myList.add(new Customer(name,ID,roomType,meal,Intdays,IntTprice)); 
```

试试这个代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:18:31.027

```
days   = Integer.parseInt (st.nextToken ());
tprice = Integer.parseInt (st.nextToken ()); 
```

如果您将 days 和 tprice 声明为 int，就会这样做。

但是您可以直接使用您的扫描仪 - 我展示了如何使用字符串而不是文件，这更适合演示：

```
data = "John, Miller, 303, 404";
sc = new java.util.Scanner (data);
sc.useDelimiter (", ");
name = sc.next ();      // John
surname = sc.next ();   // Miller
tdays = sc.nextInt ();  // 303 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:14:20.740

您正在尝试读取名称两次。您的数据只有 6 个字段，而您正在尝试读取 7 个字段。（name = st.nextToken() 看起来像一个错字）

```
 while (st.hasMoreTokens ())
                {    
                    name = st.nextToken();
                    ID = st.nextToken();
                    name = st.nextToken();
                    roomType = st.nextToken();
                    meal = st.nextToken();
                    days = st.nextToken();
                    tprice =st.nextToken();
                    myList.add (new Customer (name, ID, roomType, meal, days, tprice));
                } 
```

这是错误的。每次调用 st.nextToken() 之前，您都需要检查 st.hasMoreTokens()。

# python - 通过实例访问类变量

> ID：10313471
> 
> 赞同：14
> 
> 时间：2012-04-25T10:06:03.073
> 
> 标签：python, scope, specifications

在 Python 中，可以通过该类实例访问类变量：

```
>>> class A(object):
...     x = 4
...
>>> a = A()
>>> a.x
4 
```

很容易证明`a.x`确实是解析为`A.x`，而不是在构造过程中复制到实例：

```
>>> A.x = 5
>>> a.x
5 
```

尽管这种行为[众所周知](https://stackoverflow.com/a/8701644/213376)并被广泛使用，但我找不到任何涵盖它的权威文档。我在 Python 文档中能找到的最接近的[部分是关于 classes](http://docs.python.org/tutorial/classes.html#instance-objects)的部分：

> ```
> class MyClass:
>     """A simple example class"""
>     i = 12345
>     def f(self):
>         return 'hello world' 
> ```
> 
> [剪辑]
> 
> ...根据定义，作为函数对象的类的所有属性都定义了其实例的相应方法。所以在我们的例子中，`x.f`is 是一个有效的方法引用，since`MyClass.f`是一个函数，但`x.i`不是，since`MyClass.i`不是。...

但是，这部分专门讨论了方法，因此它可能与一般情况无关。

我的问题是，这有记录吗？我可以依靠这种行为吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T10:11:59.517

[参考http://docs.python.org/reference/datamodel.html](http://docs.python.org/reference/datamodel.html)中的`Classes`和`Class instances`部分

> 一个类有一个由字典对象实现的命名空间。类属性引用被翻译成这个字典中的查找，例如，Cx 被翻译成 C.__dict__["x"] （尽管特别是对于新式类，有许多钩子允许其他定位属性的方法）
> 
> 类实例是通过调用类对象创建的（见上文）。类实例具有作为字典实现的命名空间，这是搜索属性引用的第一个位置。如果在那里找不到属性，并且实例的类具有该名称的属性，则使用类属性继续搜索。

一般来说，这种用法很好，除了提到的特殊情况“特别是新式类有许多钩子允许其他定位属性的方法”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-25T12:25:31.847

你不仅可以依赖这种行为，而且经常这样做。

想办法。方法只是一个已成为类属性的函数。然后，您在实例上查找它。

```
>>> def foo(self, x):
...     print "foo:", self, x
... 
>>> class C(object):
...     method = foo # What a weird way to write this! But perhaps illustrative?
... 
>>> C().method("hello")
foo: <__main__.C object at 0xadad50> hello 
```

对于像函数这样的对象，这不是一个简单的查找，但是会发生一些魔术`self`自动传递。您可能使用了其他旨在存储为类属性并在实例上查找的对象；properties 是一个示例（`property`如果您不熟悉内置函数，请查看它。）

正如 okm 所指出的，其工作方式在[数据模型参考](http://docs.python.org/reference/datamodel.html)中进行了描述（包括有关使方法和属性起作用的魔法的信息和指向更多信息的链接）。数据模型页面是迄今为止语言参考中最有用的部分；它还包括有关几乎所有`__foo__`方法和名称的文档。

# django - 将 django 应用程序移动到子文件夹和 url.py 错误

> ID：10313475
> 
> 赞同：14
> 
> 时间：2012-04-25T10:06:08.820
> 
> 标签：django, django-apps, django-settings

我有一个关于将 django 应用程序放入“apps”子目录的问题。我在 project_root 中有一个名为“faktura”的应用程序。我不喜欢它在那里的事实，我想将我所有的应用程序存储在“apps”子目录下。

所以，我发现我可以将 python 路径扩展到“apps”子目录，所以在上网后，我在 settings.py 中添加了这个字符串： sys.path.insert(0, os.path.join(PROJECT_PATH, "应用”））。然后我将应用程序添加到 INSTALLED_APPS，例如“faktura”。在我将 url(r'^faktura/', include('faktura.urls')) 添加到根目录中的 urls.py 之前，一切都很顺利。从那以后，Django 抛出错误消息“没有名为 faktura 的模块”完整的提示在这里：[http ://dpaste.com/737380/](http://dpaste.com/737380/)

这里有什么问题，为什么只有 urls.py 找不到应用程序？如果我将它添加到PATH，它是否找不到这个应用程序？我花了一个上午试图找出问题所在，现在我需要你的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-01-26T10:01:44.283

除了一些可以纠正的冗余行之外，我不知道为什么前面的答案是 -1。无论如何，我发现了一种稍微不同的方法，它不涉及向 python 路径添加任何内容。

这是我最终的目录结构，我稍后会解释：

```
mysite
├── mysite
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── apps
│   ├── __init__.py
│   └── myfirstapp
│       ├── __init__.py
│       ├── admin.py
│       ├── models.py
│       ├── tests.py
│       └── views.py
└── manage.py 
```

无论您是刚刚创建项目还是要移动应用程序，都应创建`apps`应包含您的应用程序的子目录。诀窍是`__init__.py`向该目录添加一个。

```
mkdir apps
touch apps/__init__.py 
```

现在您可以将现有的应用程序移动到`apps`子目录中。如果您想创建一个新的，请使用以下命令：

```
python manage.py mysecondapp
mv mysecondapp apps/ 
```

**警告：不要试图打电话给`python manage.py ./apps/mysecondapp`. 出于某种原因，这会删除该目录中的所有其他应用程序。我就这样失去了一天的工作。**

接下来，您将需要修复一些导入。您的`settings.py`前缀应为`apps`：

```
INSTALLED_APPS = (
    ...
    'apps.myfirstapp',
    'apps.mysecondapp'
) 
```

最后，修复您的项目的`urls.py`前缀`apps`：

```
urlpatterns = patterns('', 
  url(r'^myfirstapp', include('apps.myfirstapp.urls')),
  ...
) 
```

根据您编写它们的方式，您可能还必须在应用程序中修复一些导入。要么只使用`from models import MyFirstModel`，要么也使用前缀`from apps.myfirstapp.models import MyFirstModel`。

简而言之，如果您将`apps`目录设为 python 包（通过添加`__init__.py`），则可以将其用作导入路径的一部分。无论部署方法如何，这都应该有效，无需额外配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:24:48.060

要将您的 Django 应用程序保存在子文件夹（例如 apps/）中，首先将以下内容添加到您的 settings.py 中：

`import os`

`PROJECT_ROOT = os.path.dirname(__file__)`

然后在manage.py中：

在 #!/usr/bin/env python 添加：

`import sys`

`from os.path import abspath, dirname, join`

`from site import addsitedir`

就在 if __name__ == "__main__" 之前：添加：

`sys.path.insert(0, join(settings.PROJECT_ROOT, "apps"))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-22T22:23:35.743

使用`BASE_DIR`来自`settings.py`. 它应该已经定义：

```
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__))) 
```

最好不要使用 and 中的属性`__file__`，因为它们位于不同的目录中。`manage.py``wsgi.py`

因此，只需将以下内容添加到`manage.py`and `wsgi.py`（以及`celery.py`如果您使用 Celery）：

```
 from django.conf import settings
    sys.path.append(os.path.join(settings.BASE_DIR, "apps")) 
```

您最终将得到以下项目结构：

```
project
├── project
│   ├── __init__.py
│   ├── celery.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── apps
│   ├── app1
│   └── app2
└── manage.py 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-03T06:08:21.777

@Radu Gheorghiu 的回答；无需编辑settings.py，插入路径行可以压缩为1行代码。

```
sys.path.insert(0, os.path.join(os.path.dirname(__file__), "apps")) 
```

[我从http://obroll.com/nested-application-inside-apps-sub-folder-in-django-1-3/](http://obroll.com/nested-application-inside-apps-sub-folder-in-django-1-3/)获得了这个答案

# javascript - 允许在对话框中选择多个文件，但使用 jQuery 作为单独的 POST 发送到服务器

> ID：10313476
> 
> 赞同：1
> 
> 时间：2012-04-25T10:06:12.247
> 
> 标签：javascript, jquery, amazon-s3, jquery-ui-widget

我想将单个文件发布到 Amazon S3，但允许用户在单个文件选择中选择多个文件。

我可以使用单个文件选择成功地 POST 到 S3，所以我不需要任何建议，但我想要建议的是**如何在对话框选择框中拆分单个文件元素，然后将每个文件作为个人 POST**。

我正在使用[jquery-file-upload](https://github.com/blueimp/jQuery-File-Upload)插件，所以如果您可以提供与此相关的信息，那将是一个加分项，我敢肯定。

# ios - 在连接到 Xcode 的 iOS 设备上运行时写入 Mac 上的文件

> ID：10313484
> 
> 赞同：5
> 
> 时间：2012-04-25T10:06:26.207
> 
> 标签：ios, xcode, debugging, device

通过 Xcode 在 iPhone/iPad 上运行应用程序时，是否可以打开文件以在 Mac 上写入？

我有一个需要设备运行的应用程序，因此不能选择使用模拟器。但是，我确实需要分析一些应用程序的输出。目前我必须写入设备上的文件，然后手动将它们同步到 Mac。我正在寻找一种将文件直接写入 Mac 的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:27:28.697

我建议使用[NSLogger](https://github.com/fpillet/NSLogger)通过 Bonjour 将日志数据流式传输到 Mac。它有一个 Mac 应用程序，可让您查看传入的数据。

对于更高级的日志记录，您还可以使用此[连接器](https://github.com/steipete/NSLogger-CocoaLumberjack-connector)项目将 NSLogger 与[CocoaLumberJack](https://github.com/robbiehanson/CocoaLumberjack)框架结合起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:18:15.040

对于您的情况，可能最好的解决方案可能在于利用控制台和 NSLog 将输出重定向到文件 - 这是设备和 Mac 之间的开放通道，只要您从 Xcode 运行应用程序，您就可以利用它。

有很多关于如何做到这一点的问题和答案 - 这里有一个：

[使用 .gdbinit 将 XCode gdb 输出记录到文件中](https://stackoverflow.com/questions/6754680/log-xcode-gdb-output-to-file-with-gdbinit)

此解决方案假定您只需要在通过 Xcode 运行应用程序时执行此操作，您的问题暗示了这一点。如果您需要在直接在设备上运行应用程序（而不是调试）时写入 Mac，则需要使用某种类型的网络文件传输，例如 FTP 或 HTTP。您可能可以使用以下命令在 Mac 上运行一个简单的基于 HTTP 的日志记录应用程序：

[https://github.com/robbiehanson/CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer)

然后，您只需将内容逐行发送到服务器。沿着这些思路还有许多其他可能的方法，并且可能是您可以利用的现有的基于 Mac 的解决方案。

# registry - 以 64 位读取 DWORD 注册表值

> ID：10313487
> 
> 赞同：0
> 
> 时间：2012-04-25T10:06:39.997
> 
> 标签：registry, wmi, wmi-query

如何`DWORD`在 64 位机器上读取注册表值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:14:07.863

使用[`StdRegProv.GetDWORDValue`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390445.aspx)方法。

要指定是从 32 位还是 64 位注册表配置单元读取此值，您可以使用该`__ProviderArchitecture`标志，如本文所述：[在 64 位平台上请求 WMI 数据](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393067.aspx)。

# hibernate - Hibernate - Spring 项目部署更新

> ID：10313490
> 
> 赞同：2
> 
> 时间：2012-04-25T10:06:55.793
> 
> 标签：hibernate

任何人都可以帮助我如何刷新/更新现有的，并运行休眠/Spring 应用程序到较新的版本？

要更改源覆盖tomcat中的战争。在 Hibernate persistence.xml hibernate.hbm2ddl.auto = check - 这不刷新数据库结构，只检查。

我的问题在数据库中。在应用程序的第二个版本中，我得到了更多不同的实体/表结构。

如何将现有结构和数据升级到另一个？写SQL脚本，直接在数据库中执行？

java/hibernate中的表升级有什么方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:09:19.967

[https://stackoverflow.com/a/1689769/106261](https://stackoverflow.com/a/1689769/106261)

> validate：验证模式，不更改数据库。
> 
> 更新：更新架构。
> 
> create：创建模式，销毁以前的数据。
> 
> create-drop：在会话结束时删除模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:28:56.467

当您使用 Hibernate 时，您可以利用在 update 或 create 中设置的 hbm2ddl，但这并不适用于实际情况，因为 Hibernate 无法根据需要更新您的*数据库*。例如，它可以添加列，但不能删除或重命名，因此它非常有限，并且在现实生活中，当您发布应用程序的新版本时，您可能需要更复杂的案例。

为了正确执行此操作，您需要使用特殊工具进行数据库迁移，例如[flyway](http://code.google.com/p/flyway/)或[liquibase](http://www.liquibase.org/)。您需要设置您的 spring bean 以从这些工具初始化某些类并指定您的 SQL 脚本位置，它们将选择那些 SQL 文件并使用尚未存在的那些更新数据库（因此它们不会重新编写相同的脚本两次）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-20T13:33:44.667

或者，如果您不想使用其他工具，例如 flyway 或 liquibase（它们是很棒的工具，顺便说一句），您可以`hibernate.hbm2ddl.auto=update`使用以下代码手动生成 Hibernate 将应用的脚本：

```
LocalSessionFactoryBuilder sessionFactory = new LocalSessionFactoryBuilder(dataSource);
sessionFactory.scanPackages("your.package.containing.entities");
Dialect dialect = new MySQL5Dialect(); // select your dialect
DatabaseMetadata metadata = new DatabaseMetadata(dataSource.getConnection(), dialect, sessionFactory);
List<SchemaUpdateScript> scripts = sessionFactory.generateSchemaUpdateScriptList(dialect, metadata);

Formatter formatter = FormatStyle.DDL.getFormatter();
for (SchemaUpdateScript script : scripts) {
   System.err.println(formatter.format(script.getScript()) + ";");
} 
```

祝你好运！

# android - 通过布局上的 80 多个视图提高应用程序性能

> ID：10313496
> 
> 赞同：4
> 
> 时间：2012-04-25T10:07:10.857
> 
> 标签：android, android-layout

我正在创建一个 android 应用程序，它具有超过（120 多个视图）的特定屏幕（布局），它会生成警告：

```
 "main.xml has more than 80 views, bad for performance" 
```

我在 26 日组织了很多`TextViews`, `EditTexts`, 组。`RadioButtons``TableRows`

我可以做些什么来提高应用程序性能并消除警告？

来源： [main.xml_capture](http://imageshack.us/photo/my-images/812/capturenbk.jpg/)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout00"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:orientation="vertical" >

    <TableRow
        android:id="@+id/tableRow00"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="right|top"
        android:gravity="right" >

        <Button
            android:id="@+id/id_but_val"
            android:layout_width="@dimen/button_width"
            android:layout_height="wrap_content"
            android:background="@drawable/button_colored"
            android:text="@string/but_valid"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <Button
            android:id="@+id/id_but_up"
            android:layout_width="@dimen/button_width"
            android:layout_height="wrap_content"
            android:background="@drawable/button_colored"
            android:onClick="goToTop"
            android:text="@string/but_ret_up"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <Button
            android:id="@+id/id_but_back"
            android:layout_width="@dimen/button_width"
            android:layout_height="wrap_content"
            android:background="@drawable/button_colored"
            android:text="@string/but_ret_back"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </TableRow>

    <ScrollView
        android:id="@+id/ScrollView01"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:isScrollContainer="true"
        android:overScrollMode="always"
        android:scrollbarAlwaysDrawVerticalTrack="true"
        android:scrollbarStyle="outsideInset" >

        <LinearLayout
            android:id="@+id/LinearLayout01"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:orientation="vertical" >

            <TableRow
                android:id="@+id/TableRow01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="@dimen/row_margin_top" >

                <TextView
                    android:id="@+id/TextView01"
                    android:layout_width="@dimen/label_width"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:text="@string/ecran3_84_obstacles_acces" />

                <RadioGroup
                    android:id="@+id/RadioGroup01"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:orientation="horizontal" >

                    <RadioButton
                        android:id="@+id/RadioButton01"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/radio_value_oui" />

                    <RadioButton
                        android:id="@+id/RadioButton02"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/radio_value_non" />
                </RadioGroup>
            </TableRow>

            <TableRow
                android:id="@+id/TableRow02"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="@dimen/row_margin_top" >

                <TextView
                    android:id="@+id/TextView02"
                    android:layout_width="@dimen/label_width"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:text="@string/ecran3_85_limit_tonnage" />

                <EditText
                    android:id="@+id/EditText01"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:ems="@string/editTextEms"
                    android:inputType="numberDecimal" />
            </TableRow>

            <TableRow
                android:id="@+id/TableRow03"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="@dimen/row_margin_top"
                android:visibility="gone" >

                <TextView
                    android:id="@+id/TextView03"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:text="@string/ecran3_86_derog" />
            </TableRow>

            <TableRow
                android:id="@+id/TableRow04"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="@dimen/row_margin_top" >

                <TextView
                    android:id="@+id/TextView04"
                    android:layout_width="@dimen/label_width"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:text="@string/ecran3_87_limit_hauteur" />

                <EditText
                    android:id="@+id/EditText03"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:ems="@string/editTextEms"
                    android:inputType="numberDecimal" />
            </TableRow>

            <TableRow
                android:id="@+id/TableRow05"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="@dimen/row_margin_top" >

                <TextView
                    android:id="@+id/TextView05"
                    android:layout_width="@dimen/label_width"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:text="@string/ecran3_88_limit_largeur" />

                <EditText
                    android:id="@+id/EditText04"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:ems="@string/editTextEms"
                    android:inputType="numberDecimal" />
            </TableRow>

            <TableRow
                android:id="@+id/TableRow06"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="@dimen/row_margin_top" >

                <TextView
                    android:id="@+id/TextView06"
                    android:layout_width="@dimen/label_width"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:text="@string/ecran3_89_trav_jour" />

                <RadioGroup
                    android:id="@+id/RadioGroup06"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:orientation="horizontal" >

                    <RadioButton
                        android:id="@+id/RadioButton11"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/radio_value_oui" />

                    <RadioButton
                        android:id="@+id/RadioButton12"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/radio_value_non" />
                </RadioGroup>
            </TableRow>

            <TableRow
                android:id="@+id/TableRow07"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="@dimen/row_margin_top" >

                <TextView
                    android:id="@+id/TextView07"
                    android:layout_width="@dimen/label_width"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:text="@string/ecran3_90_acces_intemperies" />

                <RadioGroup
                    android:id="@+id/RadioGroup07"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:orientation="horizontal" >

                    <RadioButton
                        android:id="@+id/RadioButton13"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/radio_value_oui" />

                    <RadioButton
                        android:id="@+id/RadioButton14"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/radio_value_non" />
                </RadioGroup>
            </TableRow>

            <TableRow
                android:id="@+id/TableRow08"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="@dimen/row_margin_top" >

                <TextView
                    android:id="@+id/TextView08"
                    android:layout_width="@dimen/label_width"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:text="@string/ecran3_91_acces_de_client" />

                <RadioGroup
                    android:id="@+id/RadioGroup08"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/view_left_margin"
                    android:orientation="horizontal" >

                    <RadioButton
                        android:id="@+id/RadioButton15"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/radio_value_oui" />

                    <RadioButton
                        android:id="@+id/RadioButton16"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/radio_value_non" />
                </RadioGroup>
            </TableRow>

            <LinearLayout
                android:id="@+id/LinearLayout02"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <TableRow
                    android:id="@+id/TableRow09"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="@dimen/row_margin_top" >

                    <TextView
                        android:id="@+id/TextView09"
                        android:layout_width="@dimen/label_width"
                        android:layout_height="fill_parent"
                        android:layout_marginLeft="@dimen/view_left_margin"
                        android:text="@string/ecran3_92_contraintes_reservoir" />

                    <EditText
                        android:id="@+id/EditText05"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="@dimen/view_left_margin"
                        android:ems="@string/editTextEms"
                        android:inputType="text" />
                </TableRow>

                <TableRow
                    android:id="@+id/TableRow10"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="@dimen/row_margin_top" >

                    <TextView
                        android:id="@+id/TextView10"
                        android:layout_width="@dimen/label_width"
                        android:layout_height="fill_parent"
                        android:layout_marginLeft="@dimen/view_left_margin"
                        android:text="@string/ecran3_93_dalle_pret" />

                    <RadioGroup
                        android:id="@+id/RadioGroup10"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="@dimen/view_left_margin"
                        android:orientation="horizontal" >

                        <RadioButton
                            android:id="@+id/RadioButton19"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="@string/radio_value_oui" />

                        <RadioButton
                            android:id="@+id/RadioButton20"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="@string/radio_value_non" />
                    </RadioGroup>
                </TableRow>
<!-- TableRow10 to TableRow26 -->
            </LinearLayout>
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:17:20.863

如果没有看到您的完整布局，我会说`TableLayout`用`ListView`. 我猜你`Views`每行都有一些，如果你切换到 a`ListView`你将避免需要在内存中加载整个布局，而是只加载`ListView`+ any 视图的屏幕上的可见行除此之外，你还有。

使用上述方法，您将能够从当前布局中删除大量行。

**编辑 ：**

根据您添加的布局，一些建议：

*   `TableRow`可以用作布局中的普通视图，但其主要目的是作为`TableLayout`.
*   如果您不希望您的`Buttons`from`tableRow00`具有相同的宽度，那么您可以做一个小的改进，而不是您当前的布局，替换为`LinearLayout00`a `RelativeLayout`，删除`tableRow00`然后`Buttons`使用.`ScrollView``RelativeLayout`
*   替换`LinearLayout01`为`TableLayout`.
*   我不知道你为什么添加`LinearLayout02`（我猜你所有的行都是一样的？！）但你应该删除它并直接附加`TableRow09`-`TableRow26`到`LinearLayout01`.
*   我剩下的答案仍然存在。

# image - 摘要视图上的敏捷图像

> ID：10313499
> 
> 赞同：0
> 
> 时间：2012-04-25T10:07:18.867
> 
> 标签：image, plone, listings, dexterity

我有一个包含标准 ATImages 的 Dexterity 文件夹类型。我希望它在文件夹或集合摘要视图中列出时显示其包含的第一个图像。我尝试在视图上设置图像属性，但是当我尝试访问其 URL 时甚至没有咨询：[http://site/my-dex/image](http://site/my-dex/image)

那是我使用的代码：

```
class View(grok.View):
    grok.context(IMyDex)
    grok.require('zope2.View')

    @memoize
    def photos(self):
        """Return a catalog search result of photos to show
        """

        context = aq_inner(self.context)
        catalog = getToolByName(context, 'portal_catalog')
        folder_path = '/'.join(context.getPhysicalPath())
        results = catalog(path=folder_path,
                          portal_type='Image',
                          sort_on='getObjPositionInParent')
        return results

    @property
    def image(self):
        try:
            first_img = self.photos[0].getObject()
        except IndexError:
            first_img = None
        return first_img 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:36:14.133

[我们在collective.nitf](https://github.com/collective/collective.nitf)中做着非常相似的事情；你可以看看[查看代码](https://github.com/collective/collective.nitf/blob/master/src/collective/nitf/browser.py#L107)。

# javascript - 隐藏目标div后点击事件冒泡

> ID：10313501
> 
> 赞同：2
> 
> 时间：2012-04-25T10:07:25.203
> 
> 标签：javascript, jquery, jquery-mobile, tap

我使用 photoswipe 插件。当我点击关闭按钮时，Photoswipe 关闭。但是在 photoswipe 隐藏后，在 photoswipe div 下的图像上触发了 div 点击事件。我怎样才能防止这种行为？例如：

```
<!DOCTYPE HTML >
<html>
<head>
    <script type="text/javascript" src="jquery-1.7.2.js"></script>
    <script type="text/javascript" src="jquery.mobile-1.0a4.1.js"></script>
    <style type="text/css">

            div
            {
                width: 300px;
                height: 300px;
            }
            .first
            {
                background-color: black;
            }

            .second
            {
                width: 200px;
                height: 200px;
                position: absolute;
                top : 50px;
                left: 50px;
                background-color: red;
                z-index: 2;
            }
    </style>

    <script type="text/javascript">
        $(function()
        {
            $('.first').tap(function()
            {
                $(this).css({backgroundColor : 'green'});

            });

            $('.second').tap(function()
            {
                $(this).hide();
            });

        })
    </script>
</head>
<body>
<div class='first'></div>
<div class='second'></div>

</body>
</html> 
```

它是如何工作的 -tap second div
-在第二个 div 上触发点击事件
-second div hide
-在第一个 div 上触发点击事件

我想要什么
-tap second div
-在第二个 div 上触发点击事件
-second div hide -什么都
没有发生

我应该在第二个 div 点击处理程序中做什么以防止在第一个 div 上触发点击事件？

我更改了示例以查看触发了哪些事件

```
$(function()
        {
            $('.first').bind('vmousedown',function()
            {
                info('vmousedown first' )
            }).bind('vmouseup', function(){
                info('vmouseup first')
            })
            .bind('click',function(){
                info('click first');
            }).bind('tap', function(){
                info('tap first');
            });

            $('.second').bind('vmousedown',function()
            {
                info('vmousedown second' )
            }).bind('vmouseup', function(){
                info('vmouseup second');
            })
            .bind('click',function(){
                 info('click second');
            }).bind('tap', function(){
                 info('tap second');
                 $(this).hide();
            });

        }); 
```

PC输出：
vmousedown second
vmouseup second
click second
tap second

Android : vmousedown 第二次
vmouseup 第二次
点击 第二次
vmousedown 第一次
vmouseup 首先
点击 第一次
点击

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:01:06.823

好吧，我认为问题是您使用的是 jQM Alpha (jquery.mobile-1.0a4.1.js)，升级到最新版本我认为它可以按预期工作。你也可以绑定点击事件`.bind('tap', function()`

*   [http://jsfiddle.net/LFPNC/](http://jsfiddle.net/LFPNC/)

JS

```
$(function()
{
    $('.first').tap(function()
    {
        $(this).css({backgroundColor : 'green'});

    });

    $('.second').tap(function()
    {
        $(this).hide();
    });
}); 
```

HTML

```
<!DOCTYPE HTML >
<html>
<head>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head>
<body>
<div class='first'></div>
<div class='second'></div>

</body>
</html>​ 
```

CSS

```
div
{
    width: 300px;
    height: 300px;
}
.first
{
    background-color: black;
}

.second
{
    width: 200px;
    height: 200px;
    position: absolute;
    top : 50px;
    left: 50px;
    background-color: red;
    z-index: 2;
}​ 
```

# java - 在 Android Google Maps 中对 MapView 执行任何操作后，未加载 Map Tiles

> ID：10313506
> 
> 赞同：0
> 
> 时间：2012-04-25T10:07:40.210
> 
> 标签：java, android, android-maps, android-mapview

我的 MapView 有问题。这是我的场景：

1.  我可以成功创建 MapActivity。初始谷歌地图已加载。一切正常。

2.  单击地图后，尝试移动它（或实际执行任何操作），地图图块不再加载。它看起来像在图像上。

我已经发现了很多关于未正确设置 Api Key 或其他问题的线程。我向你保证，我已经正确设置了这个（否则，地图根本不会被加载）。有没有人对此有解决方案。我使用的 Api Level 是 8，我正在默认模拟器中为 android 2.2 尝试它。谢谢。

这是清单中的一个片段：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

<application ... 
```

这是布局文件：

```
 <com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:clickable="true"
        android:state_enabled="true"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="..." >
    </com.google.android.maps.MapView> 
```

![在此处输入图像描述](../Images/dcb51d2755564f0f72eccdf8c811f355.png)

这是来自活动的代码，我在其中初始化了 mapView：

```
mapView = (MapView) findViewById(R.id.map);
mapView.setStreetView(true);
mapView.setBuiltInZoomControls(true); 
```

它还有一个 LocationListener，它只是动画到它接收到的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:10:59.533

检查 API 密钥并检查`mapView.setStreetView();`:)

# c# - 依赖注入和开发生产力

> ID：10313507
> 
> 赞同：11
> 
> 时间：2012-04-25T10:07:41.310
> 
> 标签：c#, dependency-injection, architecture, ninject, structuremap

**抽象的**

在过去的几个月里，我一直在编写一个轻量级的、基于 C# 的游戏引擎，它具有 API 抽象和实体/组件/脚本系统。它的整个想法是通过提供类似于 Unity 引擎的架构来简化 XNA、SlimDX 等的游戏开发过程。

**设计挑战**

正如大多数游戏开发人员所知，您需要在整个代码中访问许多不同的*服务。*许多开发人员求助于使用全局静态实例，例如渲染管理器（或作曲家）、场景、图形设备（DX）、记录器、输入状态、视口、窗口等。全局静态实例/单例有一些替代方法。一种是通过构造函数或构造函数/属性依赖注入 (DI) 为每个类提供它需要访问的类的实例，另一种是使用全局服务定位器，如 StructureMap 的 ObjectFactory，其中服务定位器通常配置为一个 IoC 容器。

**依赖注入**

出于多种原因，我选择了 DI 方式。最明显的一点是可测试性，通过针对接口进行编程并通过构造函数向它们提供每个类的所有依赖项，这些类很容易测试，因为测试容器可以实例化所需的服务或它们的模拟，并输入每一堂课都要考。信不信由你，进行 DI/IoC 的另一个原因是为了提高代码的可读性。不再需要实例化所有不同服务和手动实例化所需服务的类的巨大初始化过程。配置 Kernel(NInject)/Registry(StructureMap) 可以方便地为引擎/游戏提供单点配置，其中选择和配置服务实现。

**我的问题**

*   我经常觉得我是为了接口而创建接口
*   我的工作效率急剧下降，因为我所做的只是担心如何以 DI 方式做事，而不是快速简单的*全局静态*方式。
*   在某些情况下，例如在运行时实例化新实体时，需要访问 IoC 容器/内核来创建实例。这会创建对 IoC 容器本身的依赖*（SM 中的 ObjectFactory，Ninject 中的内核实例）*，这确实违背了最初使用它的原因。如何解决？抽象工厂浮现在脑海中，但这只会使代码更加复杂。
*   根据服务要求，某些类的构造函数可能会变得非常大，这将使该类在不使用 IoC 的其他上下文中完全无用。

基本上，做 DI/IoC 会大大降低我的工作效率，并且在某些情况下会使代码和架构进一步复杂化。因此，我不确定这是我应该遵循的道路，还是放弃并以老式的方式做事。我不是在寻找一个单一的答案来说明我应该做什么或不应该做什么，而是讨论从长远来看使用 DI 是否值得，而不是使用全局静态/单例方式，我忽略了可能的利弊和在处理 DI 时，我上面列出的问题的可能解决方案。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-25T11:33:04.983

你应该回到老式的方式吗？简而言之，我的回答是否定的。由于您提到的所有原因，DI 有很多好处。

> 我经常觉得我是为了接口而创建接口

如果您这样做，您可能违反了 [重用抽象原则 (RAP)](http://www.codemanship.co.uk/parlezuml/blog/?postid=934)

> 根据服务要求，某些类的构造函数可能会变得非常大，这将使该类在不使用 IoC 的其他上下文中完全无用。

如果您的类构造函数太大且太复杂，这是向您表明您违反了另一个非常重要的原则的最佳方式： [单一责任原则](https://en.wikipedia.org/wiki/Single_responsibility_principle)。在这种情况下，是时候将代码提取并重构为不同的类了，建议的依赖项数量约为 4。

为了进行 DI，您不必有接口，DI 只是您将依赖项放入对象的方式。创建接口可能是能够替代依赖项以进行测试的必要方法。除非依赖的对象是：

1.  易于隔离
2.  不与外部子系统（文件系统等）对话

您可以将依赖项创建为抽象类，或者您希望替换的方法是虚拟的任何类。然而，接口确实创建了依赖关系的最佳解耦方式。

> 在某些情况下，例如在运行时实例化新实体时，需要访问 IoC 容器/内核来创建实例。这会创建对 IoC 容器本身的依赖（SM 中的 ObjectFactory，Ninject 中的内核实例），这确实与最初使用 IoC 容器的原因背道而驰。如何解决？抽象工厂浮现在脑海中，但这只会使代码更加复杂。

至于对 IOC 容器的依赖，您永远不应该在客户端类中对它有依赖。他们不必这样做。

为了首先正确使用依赖注入，首先要了解[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)的概念。这是唯一应该引用您的容器的地方。至此，您的整个对象图已构建完毕。一旦你理解了这一点，你就会意识到你的客户端永远不需要容器。因为每个客户端都只是注入了它的依赖项。

您还可以遵循许多其他创建模式来简化构造：假设您要构造一个具有许多依赖项的对象，如下所示：

```
new SomeBusinessObject(
    new SomethingChangedNotificationService(new EmailErrorHandler()),
    new EmailErrorHandler(),
    new MyDao(new EmailErrorHandler())); 
```

您可以创建一个知道如何构造它的具体工厂：

```
public static class SomeBusinessObjectFactory
{
    public static SomeBusinessObject Create()
    {
        return new SomeBusinessObject(
            new SomethingChangedNotificationService(new EmailErrorHandler()),
            new EmailErrorHandler(),
            new MyDao(new EmailErrorHandler()));
    }
} 
```

然后像这样使用它：

```
 SomeBusinessObject bo = SomeBusinessObjectFactory.Create(); 
```

您还可以使用可怜的 mans di 并创建一个完全不带参数的构造函数：

```
public SomeBusinessObject()
{
    var errorHandler = new EmailErrorHandler();
    var dao = new MyDao(errorHandler);
    var notificationService = new SomethingChangedNotificationService(errorHandler);
    Initialize(notificationService, errorHandler, dao);
}

protected void Initialize(
    INotificationService notifcationService,
    IErrorHandler errorHandler,
    MyDao dao)
{
    this._NotificationService = notifcationService;
    this._ErrorHandler = errorHandler;
    this._Dao = dao;
} 
```

然后它似乎曾经工作过：

```
SomeBusinessObject bo = new SomeBusinessObject(); 
```

当您的默认实现位于外部第三方库中时，使用Poor Man's DI 被认为是不好的，但当您有一个好的默认实现时，它就不那么糟糕了。

然后显然有所有的 DI 容器、对象构建器和其他模式。

所以你所需要的只是为你的对象想一个好的创建模式。您的对象本身不应该关心如何创建依赖关系，实际上它使它们更加复杂并导致它们混合两种逻辑。所以我不相信使用 DI 会降低生产力。

在某些特殊情况下，您的对象不能只将单个实例注入其中。生命周期通常较短并且需要动态实例。在这种情况下，您应该将 Factory 作为依赖项注入到对象中：

```
public interface IDataAccessFactory
{
    TDao Create<TDao>();
} 
```

您可以注意到这个版本是通用的，因为它可以利用 IoC 容器来创建各种类型（请注意，尽管 IoC 容器对我的客户端仍然不可见）。

```
public class ConcreteDataAccessFactory : IDataAccessFactory
{
    private readonly IocContainer _Container;

    public ConcreteDataAccessFactory(IocContainer container)
    {
        this._Container = container;
    }

    public TDao Create<TDao>()
    {
        return (TDao)Activator.CreateInstance(typeof(TDao),
            this._Container.Resolve<Dependency1>(), 
            this._Container.Resolve<Dependency2>())
    }
} 
```

请注意，即使我有一个 Ioc 容器，我也使用了 activator，重要的是要注意工厂需要构造一个新的对象实例，而不仅仅是假设容器将提供一个新实例，因为该对象可能注册了不同的生命周期（Singleton 、ThreadLocal 等）。但是，根据您使用的容器，有些可以为您生成这些工厂。但是，如果您确定对象已注册瞬态生命周期，则可以简单地解决它。

编辑：添加具有抽象工厂依赖项的类：

```
public class SomeOtherBusinessObject
{
    private IDataAccessFactory _DataAccessFactory;

    public SomeOtherBusinessObject(
        IDataAccessFactory dataAccessFactory,
        INotificationService notifcationService,
        IErrorHandler errorHandler)
    {
        this._DataAccessFactory = dataAccessFactory;
    }

    public void DoSomething()
    {
        for (int i = 0; i < 10; i++)
        {
            using (var dao = this._DataAccessFactory.Create<MyDao>())
            {
                // work with dao
                // Console.WriteLine(
                //     "Working with dao: " + dao.GetHashCode().ToString());
            }
        }
    }
} 
```

> 基本上做 DI/IoC 会大大降低我的工作效率，并且在某些情况下会使代码和架构进一步复杂化

Mark Seeman 就这个主题写了一篇很棒的博客，并回答了这个问题：我对这类问题的第一反应是：你说松散耦合的代码更难理解。比什么更难？

[松散耦合和全局](http://blog.ploeh.dk/2012/02/02/LooseCouplingAndTheBigPicture.aspx)

编辑：最后我想指出，并非每个对象和依赖项都需要或应该被依赖注入，首先考虑您使用的内容是否实际上被视为依赖项：

什么是依赖项？

*   应用程序配置
*   系统资源（时钟）
*   第三方库
*   数据库
*   WCF/网络服务
*   外部系统（文件/电子邮件）

上述任何对象或合作者都可能超出您的控制范围，并导致副作用和行为差异，并使其难以测试。现在是考虑抽象（类/接口）和使用 DI 的时候了。

什么不是依赖项，真的不需要 DI？

*   `List<T>`
*   记忆流
*   字符串/原语
*   叶对象/Dto

`new`可以使用关键字在需要的地方简单地实例化上述对象。除非有特殊原因，否则我不建议将 DI 用于此类简单的对象。考虑对象是否在您的完全控制之下并且不会导致任何额外的对象图或行为副作用（至少是您想要更改/控制行为或测试的任何东西）的问题。在这种情况下，只需更新它们。

我已经发布了很多指向 Mark Seeman 帖子的链接，但我真的建议您阅读他的书和博客文章。

# php - 将表单数据发布到 PHP 脚本，然后再次发布结果

> ID：10313508
> 
> 赞同：0
> 
> 时间：2012-04-25T10:07:49.067
> 
> 标签：php, html

下面的脚本获取 URL 列表中的元数据。

URL是在我的前端输入的，我设法将数据获取到另一个页面（此脚本），但现在不是将表格回显到脚本所在的同一页面上，而是我想将该数据反馈给我的前端并将其放在一个漂亮的桌子上供用户查看。

如何让 php 脚本在另一个页面上回显数据？

谢谢

瑞奇

```
<?php
ini_set('display_errors', 0);
ini_set( 'default_charset', 'UTF-8' );
error_reporting(E_ALL);
//ini_set( "display_errors", 0);
function parseUrl($url){
    //Trim whitespace of the url to ensure proper checking.
    $url = trim($url);
    //Check if a protocol is specified at the beginning of the url. If it's not,     prepend 'http://'.
    if (!preg_match("~^(?:f|ht)tps?://~i", $url)) {
            $url = "http://" . $url;
    }
    //Check if '/' is present at the end of the url. If not, append '/'.
    if (substr($url, -1)!=="/"){
            $url .= "/";
    }
    //Return the processed url.
    return $url;
}
//If the form was submitted
if(isset($_POST['siteurl'])){
    //Put every new line as a new entry in the array
    $urls = explode("\n",trim($_POST["siteurl"]));
    //Iterate through urls
    foreach ($urls as $url) {
            //Parse the url to add 'http://' at the beginning or '/' at the end if not     already there, to avoid errors with the get_meta_tags function
            $url = parseUrl($url);
            //Get the meta data for each url
            $tags = get_meta_tags($url);
            //Check to see if the description tag was present and adjust output     accordingly
            $tags = NULL;
$tags = get_meta_tags($url);
if($tags)
echo "<tr><td>$url</td><td>" .$tags['description']. "</td></tr>";
else 
echo "<tr><td>$url</td><td>No Meta Description</td></tr>";
    }
}

?> 
```

我认为最好为此使用 Ajax 吗？所以不会刷新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:55:40.997

您将不得不：

1 - 提交到`frontend`页面，而不是在该页面上包含此 PHP 代码。

2 - 使用 AJAX 发布表单，获取输出并将其放在`frontend`页面上的某个位置。

就个人而言，我会使用第一种方法。它更容易实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:27:33.720

我更喜欢 ajax 方法，因为它更干净。

重要的是`$.ajax();`和`echo json_encode()`

# 文档

php 手册`json_encode()`- h​​ttp: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

jquery 手册`$.ajax();`- h​​ttp: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

响应代码列表 - [http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

## 示例代码

没有看到你的 HTML 我在这里猜.. 但这应该让你开始使用 ajax 的正确路径。

### 表单html

```
<form action="<?= $_SERVER['PHP_SELF']; ?>" method="POST">
    <input type="text" name="siteUrl" id="siteUrl">
    <input type="submit" name="submit" value="submit" class="form-submit">
</form> 
```

### 示例容器

在您的情况下，这是一个表，只需将表 ID 设置为 example-container

### 阿贾克斯

这需要您使用jquery库。如果您在additon中使用另一个称为数据表的库，您可以简化很多jquery附加`<tr>`的

```
// On the click of the form-submit button.
$('.form-submit').click(function(){
  $.ajax({
    // What data type do we expect back?
    dataType: "json",
    // What do we do when we get data back
    success: function(d){
      alert(d);
      // inject it back into a table called example-container
      // go through all of the items in d and append 
      // them to the table.
      for (var i = d.length - 1; i >= 0; i--) {
        $('#example-container').append("<tr><td>"+d[i].url+"</td><td>"+d[i].description+"</td></tr>");
      };

    },
    // What do we do when we get an error back
    error: function(d){
      // This will show an alert for each error message that exist
      // in the $message array further down.
      for (var i = d.length - 1; i >= 0; i--) {
        alert(d[i].url+": "+d[i].message);
      };
    }
  });
 // make sure to have this, otherwise you'll refresh the page.
 return false;
}); 
```

### 修改php函数

```
<?php
//If the form was submitted
if(isset($_POST['siteurl'])){
    //Put every new line as a new entry in the array
    $urls = explode("\n",trim($_POST["siteurl"]));
    //Iterate through urls
    foreach ($urls as $url) {
        //Parse the url to add 'http://' at the beginning or '/' at the end if not     already there, to avoid errors with the get_meta_tags function
        $url = parseUrl($url);
        //Get the meta data for each url
        $tags[] = get_meta_tags($url);
     }
    if($tags):
        echo json_encode($tags);
    else:
        $message[] = array(
            'url' => $url,
            'message' => 'No Meta Description'
        );
                    // This sets the header code to 400
                    // This is what tells ajax that there was an error
                    // See my link for a full ref of the codes avail
                    http_response_code(400);
        echo json_encode($message);
    endif;
} 
```

# c - nul 终止指针

> ID：10313510
> 
> 赞同：0
> 
> 时间：2012-04-25T10:07:51.087
> 
> 标签：c, pointers

c89 gcc (GCC) 4.6.3

你好，

我在 *search = '\0'; 上得到一个堆栈转储；我认为可以 nul 终止一个字符串。

```
char *ptr_name = "hello@home";
char *search = ptr_name;

search = strchr(ptr_name, '@');
search++;
*search = '\0'; 
```

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:10:54.150

ptr_name 指向只读区域中的字符串。

而是尝试：

```
char ptr_name[] = "hello@home" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:11:32.347

不是当它是一个字面常量时，你不能。您可以将其 strcpy() 放入堆栈或堆变量中，然后您可以对其进行修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T10:13:39.850

`char *ptr_name = "hello@home";`创建一个不能修改的字符串常量。

要获得您期望的结果，您需要分配内存以`"hello@home"`使用数组- 或在运行时`char arr_name[] = "hello@home";`动态使用。`malloc`

您的程序应如下所示：

```
#include <stdio.h>
#include <string.h>

int main()
{
    char arr_name[] = "hello@home";
    char *search = arr_name;

    printf("%s \n", arr_name);
    search = strchr(arr_name, '@');
    search++;
    *search = '\0';

    printf("%s \n", arr_name);

    return 0;
} 
```

输出：

```
$ ./a.out 
hello@home 
hello@ 
$ 
```

# javascript - 允许 div 滚动 x 数量但然后停止？

> ID：10313511
> 
> 赞同：1
> 
> 时间：2012-04-25T10:07:55.873
> 
> 标签：javascript, jquery, css, html, scroll

我有一个 700px 高的 div，在那个 div 下是一个 200px 的图片。我想允许滚动前 700 像素，然后不再滚动。因此，在较小的垂直分辨率上，用户可以滚动查看前 700 像素，但其余部分被“切断”。

另一方面，大垂直分辨率的用户将看到 700px 的 div 和没有滚动条的图片。

怎么做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:50:18.833

您可以使用 css 媒体查询在不同的窗口大小上使用不同的 css。

```
@media all and (min-width: 350px) and (min-height: 950px) {
    // css for a window size of 250px height and 750px width or higher
} 
```

所以你想做这样的事情吗？

```
.content {
    height: 700px;
    width: 300px;
}

.main {
    height: 700px;
    width: 100%;
    background-color: red;
}

.pic {
    display: none;
    height: 200px;
    width: 100%;
    background-color: blue;
}

@media all and (min-height: 950px) {
    .content {
        height: 900px;
    }
    .pic {
        display: block;
    }
} 
```

# php - 上面的打印变量

> ID：10313512
> 
> 赞同：4
> 
> 时间：2012-04-25T10:07:56.550
> 
> 标签：php

不是线程的最佳名称，但仍然......

我有

```
<?php include('inc/nav_bar.php'); ?>
...
<?php
    main code block
?> 
```

我需要将一个变量从“主代码块”打印到“nav_bar”块，有什么好的方法吗？

到目前为止，我发现的唯一解决方案是使用 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:15:18.867

如果我理解正确，您的 nav_bar.php 会打印出应该包含主代码块中变量值的内容。

然后你可以尝试“捕捉” nav_bar.php 的输出：

```
ob_start();
include('inc/nav_bar.php');
$navBarContent = ob_get_contents();
ob_end_clean();
// main code block: replace some placeholders in $navBarContent with variables content 
```

编辑：但我同意其他人的观点。更好的解决方案是更改代码设计并使用类/函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:21:18.867

您可以使用不同的方式 - 重新排列代码块或使用输出缓冲。

'nav_bar.php' 是否回显任何内容？尝试这个：

```
{nav_bar.php}
...
echo "some text %VAR% some text";
...

{main.php}
ob_start();
include 'inc/nav_bar.php';
$content = ob_get_contents();
ob_end_clean();
$var = doSomeCalc();
$content = str_replace('%VAR%', $var, $content);

echo $content; 
```

或者您可以使用这种方式：

```
{main.php}
$main_var = doSomeCalc();
...
include 'inc/nav_bar.php';
...
echo "something else";

{nav_bar.php}
...
echo "some text $main_var some text"; // use $main_var defined earlier
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:49:18.763

我认为是时候开始在应用程序中使用**MVC 模式了 :)**

这将解决您所有的输出优先级问题。

在此处阅读更多内容： [“什么是 MVC？”](http://www.phpro.org/tutorials/Model-View-Controller-MVC.html#2)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-25T10:37:17.600

我会选择这种模式：

```
<?php
// main code block

include('inc/nav_bar.php'); 
```

但是，如果您想以自己的技能向前迈进，让您的生活更轻松，请使用模板（它采用由内而外的方法，而不是相反）。

如果您想使用一些现有的模板引擎，请查找 Twig 或 Smarty。我还强烈推荐 Zend Framework，它主要使用纯基于 PHP 的模板（您也可以使用其他引擎）和 Symfony（主要使用 Twig）。

# objective-c - Cocoa - 在 NSXMLDocument 中编写 NSXMLElement

> ID：10313515
> 
> 赞同：1
> 
> 时间：2012-04-25T10:08:08.673
> 
> 标签：objective-c, cocoa, nsxml

我正在创建一个 NSXMLDocument，从中我得到一个在常量 USER_PRINTXML_URL 中定义的文件，如下所示：

```
NSXMLDocument *ads_user_printxml = [[NSXMLDocument alloc] initWithContentsOfURL: [NSURL URLWithString:USER_PRINTXML_URL]    options:(NSXMLNodePreserveWhitespace|NSXMLNodePreserveCDATA)                                          error:&ads_err]; 
```

然后我使用 XPath 到达 XML 文件中所需的位置，如下所示：

```
NSArray* ipp_folder = [[ads_user_printxml nodesForXPath:@".//root/printing/IPP"error:&ads_err] objectAtIndex:0]; 
```

现在，如果我想在 XML 文件中的元素之后添加 NSXMLElements，我该怎么做？

我试图做以下事情：

```
NSXMLElement *s= [ipp_folder objectAtIndex:0]; 
```

但这会产生运行时错误。我也尝试使用 NSXMLNode 而不是将数据放入 NSArray 但同样无济于事。我相信解决方案非常简单，但我一生都无法在文档中找到答案。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:42:54.660

`-nodesForXPath:error:`返回一个`NSArray*`，但您的第二个代码片段已经应用于`-objectAtIndex:`它。因此，`ipp_folder`它不包含数组，它包含一个指向`NSXMLNode`. 修复其声明的类型。

然后，您可以使用该方法识别其父级，`-parent`并使用该方法识别其在父级子级中的索引`-index`。然后，假设父母是一个`NSXMLElement`，你可以这样做：

```
[[ipp_folder parent] insertChild:someNewNode atIndex:[ipp_folder index] + 1]; 
```

# java - 如何在 Java 中制作肥皂请求和响应？

> ID：10313516
> 
> 赞同：-1
> 
> 时间：2012-04-25T10:08:09.137
> 
> 标签：java, web-services, soap

如何执行肥皂网络服务以及如何打印数据？

目前我正在使用以下代码

```
package com.appulento.pack;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.HttpURLConnection;
import java.net.URL;

public class SimpleHTTPRequest
{
  public static void main(String[] args) throws Exception {
    final String url =
        "http://**********:8000/sap/bc/srt/rfc/sap/zmaterials_details/" +
          "800/zmaterials_details/zmaterials_details_bind",
      soapAction ="urn:sap-com:document:sap:soap:functions:mc-style/ZMATERIALS_DETAILS",
      envelope1="<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
        "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\"" +
          " xmlns:urn=\"urn:sap-com:document:sap:soap:functions:mc-style\">" +
        "<soapenv:Header>"+
        "<soapenv:Body>"+
        "<urn:ZMATERIALS_DETAILS>"+
        "<Language>D</Language>"+
        "<MaterialGroup>00208</MaterialGroup>"+
        "</urn:ZMATERIALS_DETAILS>"+
        "</soap:Body>"+
        "</soap:Envelope>" ;
    HttpURLConnection connection = null;
    try {
      final URL serverAddress = new URL("http://*********:8000/sap/bc/srt/wsdl/"+
          "srvc_14DAE9C8D79F1EE196F1FC6C6518A345/wsdl11/allinone/ws_policy/" +
          "document?sap-client=800&sap-user=************&sap-password=****");
      connection = (HttpURLConnection)serverAddress.openConnection();
      connection.setRequestProperty("SOAPAction", soapAction);
      connection.setRequestMethod("POST");
      connection.setDoOutput(true);
      final OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream());
      writer.append(envelope1);
      writer.close();
      final BufferedReader rd =
          new BufferedReader(new InputStreamReader(connection.getInputStream()));
      String line;
      while ((line = rd.readLine()) != null) System.out.println(line);
    } finally { connection.disconnect(); }
  }
} 
```

我想发送 xml 作为输入请求，我也想在 xml 中显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:35:37.880

可以像您一样使用 httpConnection 发送 HTTP 请求并解析响应。但它已经由其他人编写，使用`wsimport`带有`-keep`选项的工具。它将为您生成用于使用 SOAP 发送请求的 Java 工件。

# php - 使用 PHP 基于 POST 值运行查询

> ID：10313518
> 
> 赞同：-1
> 
> 时间：2012-04-25T10:08:22.933
> 
> 标签：php, mysql

我有一个表单，允许用户从下拉菜单中选择一个县，然后我的表单被发布到我的 functions.php 页面，我一直在使用 IF 语句来运行我的查询。

```
if ($_POST['dropdown1'] == 'option 1' && $_POST['dropdown 2'] == 'option 4' && $_POST['county'] == 'cheshire' ) {
    // RUN QUERY 
} 
```

但是，我的问题是，我不能在每种可能的情况下为每个县实际使用 IF 语句，因为会有数千种选择，有没有人对我如何做到这一点有更好的了解？

* * *

```
if ($_POST['vehicleType'] == 'hgv' && $_POST['coverageRegion'] == 'national' ) {        

            $customkey = 'vehicleType'; 
            $customvalue = $_POST['vehicleType']; 

            $customkey1 = 'coverageRegion'; 
            $customvalue1 = $_POST['coverageRegion']; 

            $customkey2 = 'locationType'; 
            $customvalue2 = $_POST['locationType']; $args = array('orderby' => 'meta_value_num', 'meta_key' => 'order', 'order' => 'ASC',

            'meta_query' => array(
            array(
                'key' => $customkey,
                'value' => $customvalue,
                'compare' => '='
            ),
            array(
                'key' => $customkey1,
                'value' => $customvalue1,
                'compare' => '='
            ),
            array(
                'key' => $customkey2,
                'value' => $customvalue2,
                'compare' => '='
            )
            ) // end of array
            ); //end of if

            $query = new WP_Query( $args);

            // The Loop
                $i = 0; $i = -1;

while ( $query->have_posts() )
{
    $i++;
    $query->the_post();
    if ( $keys = get_post_custom_keys() )
    {
        echo "<div class='clearfix card-prod ".($i==0?'first':'')."'><div class='top-dets'><span class='card-title'>";
        echo the_title();
        echo "</span>";

    // Network query 
        $network_value = get_post_custom_values('srchnetwork');
        foreach ( $network_value as $key => $value ) {
        echo '<span class="srch-val-">'. $value . '</span>'; }// Pricing Query
        $pricing_value = get_post_custom_values('srchpricing');
        foreach ( $pricing_value as $key => $value ) {
        echo '<span class="srch-val-1">'. $value . '</span>'; }

    // Setup Query
        $setup_value = get_post_custom_values('srchsetupfee');
        foreach ( $setup_value as $key => $value ) {
        echo '<span class="srch-val-2">'. $value . '</span>'; }

    // Services Query
        $services_value = get_post_custom_values('srchservices');
        foreach ( $services_value as $key => $value ) {
        echo '<span class="srch-val-3">'. $value . '</span></div>'; }

    // Big Card Query
        $bigcard_value = get_post_custom_values('bigcard');
        foreach ( $bigcard_value as $key => $value ) {
             echo '<a href="/" class="cardclick"><img src="/wp-content/themes/CAFC/images/cards/'. $value . '" alt="'; }
     echo the_title() . '" /></a>';

    echo '<img src="wp-content/themes/CAFC/images/top-choice.jpg" alt="Top Choice" class="topchoice">';
echo the_excerpt()."</div>";   }
}

       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:45:48.553

您可以以这种方式编写代码，这样您就不必处理所有可能的选项。

```
global $wpdb;

$postKeys = array('vehicleType', 'coverageRegion', 'locationType');

$args = array(
    'orderby' => 'meta_value_num',
    'meta_key' => 'order',
    'order' => 'ASC',
    'meta_query' => array()
);

foreach ($postKeys as $key) {
    $args['meta_query'][] = array(
        'key' => $key,
        'value' => $wpdb->escape($_POST[$key]),
        'compare' => '='
    );
}

$query = new WP_Query($args); 
```

# delphi - 如何使用 KbmMW 的缓存功能？

> ID：10313519
> 
> 赞同：0
> 
> 时间：2012-04-25T10:08:26.270
> 
> 标签：delphi, sockets, indy, 3-tier

我在服务器端设置了 kbmmWUNIDACConnectionPool 属性：

```
kbmMWUNIDACConnectionPool1.EnableCache := True;
kbmMWUNIDACConnectionPool1.MaxCacheAge := 30;
kbmMWUNIDACConnectionPool1.MaxCacheEntries := 100;
kbmMWUNIDACConnectionPool1.MaxCacheRecordCount := 10000; 
```

但是，我发现缓存功能并不有效，请看 Unidac Monitor 截图：

![在此处输入图像描述](../Images/50b069a77ec1e4f8a4c5086a0024f62a.png)

是同一个查询语句，但是服务端每次都询问数据库！为什么？一句话：如何正确使用缓存功能？提前致谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:45:09.623

您需要启用查询语句应该被缓存（xxxquery 组件的 Cached 属性）以及它应该如何被缓存（同一组件上的 CacheFlags）。

CacheFlags 可以是

*   mwcfDontAge - 缓存条目不会过期并将保留在缓存中
*   mwcfDontGarbageCollect - 缓存条目永远不会被垃圾回收（效果类似于 dont age）
*   mwcfDefsOnly - 只缓存查询的定义（字段定义和参数定义）。
*   mwcfUpdateOnResolve - 如果已解决，缓存条目将使用新数据和字段/参数定义进行更新。
*   mwcfLeaveOnResolve - 如果已解决，缓存条目将被删除。
*   mwcfNoParamsInCacheID - 不要将参数内容存储为缓存 ID 的一部分（因此不同的参数值会导致相同的缓存条目）
*   mwcfIgnoreCachedParams - 未使用。

# java - 奇怪的 Java 分数行为

> ID：10313522
> 
> 赞同：-1
> 
> 时间：2012-04-25T10:08:35.817
> 
> 标签：java, fractions

我在 Java 的 double 变量中看到了一个非常奇怪的行为，因为我试图简单地将小分数添加到 double 中，我看到了一个完全奇怪的结果。

```
double test = 0;
test += 0.71;
test += 0.2; 
```

现在我希望结果是：

```
test = 0.91 
```

对？错误的！

实际上，这是我在测试替身中得到的数字：

```
test = 0.9099999999999999 
```

现在虽然这非常接近，但这是一个非常奇怪的分数损失，从长远来看，它会在我的程序中导致严重的错误。

有了一个浮点数，我得到了一个更奇怪的结果。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:16:20.393

一点也不奇怪。0.91、0.71 和 0.2 不能表示为 IEEE754 浮点值，因为它们在以二进制表示时会有一个重复的小数部分。这种情况完全类似于试图用有限位数表示以 10 为底的 1/3。你不能这样做。

您看到的是进行浮点计算时正常的舍入误差。你必须围绕它编写代码。因此，例如，您无法可靠地比较相等性，您必须看到这两个数字彼此之间存在一些小的增量。有关更深入但仍然可以理解[的解释，请参阅浮点指南](http://floating-point-gui.de/basic/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:11:34.627

这就是浮点值二进制编码的神奇之处（查找 IEEE754：[http](http://en.wikipedia.org/wiki/IEEE_754-2008) ://en.wikipedia.org/wiki/IEEE_754-2008 ）。如果你想确保永远不会有这种事情，你可能正在寻找 BigDecimal ：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)

基本规则 ：

*   处理浮点数时不要使用相等测试（你必须测试间隙）
*   您显示的整数（通常使用 DecimalFormat）
*   不要在金融应用中使用浮点数
*   浮点数通常是科学或工业操作的方式，只要您了解 IEEE754

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T10:15:35.607

`double`只能近似大多数小数值。这意味着如果您想获得预期的结果，您需要使用一些舍入。或者您可以使用 BigDecimal 来为您解决这个问题。

```
double test = 0;
test += 0.71;
test += 0.2;
System.out.printf("%.2f%n", test); 
```

印刷

```
0.91 
```

为了自己的利益

```
System.out.println("0.71 is actually " + new BigDecimal(0.71));
System.out.println("0.2 is actually " + new BigDecimal(0.2));
System.out.println("0.71+0.2 is actually " + new BigDecimal(0.71 + 0.2));
System.out.println("0.91 is actually " + new BigDecimal(0.91));
System.out.println("0.71+0.2 == 0.91 is " + (0.71 + 0.2 == 0.91)); 
```

印刷

```
0.71 is actually 0.70999999999999996447286321199499070644378662109375
0.2 is actually 0.200000000000000011102230246251565404236316680908203125
0.71+0.2 is actually 0.9099999999999999200639422269887290894985198974609375
0.91 is actually 0.91000000000000003108624468950438313186168670654296875
0.71+0.2 == 0.91 is false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-31T18:13:28.603

Java 使用一种叫做浮点的东西来表示小数。他们使用指数符号。这就是我的意思：

有一个乘数 (M) 和一个介于 1023 和 -1022 (E) 之间的指数。

数字 (N) 表示如下：`M * 2^E`.

4.25 表示如下：

17 * 2^-2。

0.91 不能精确地以基数 2 表示，但 Java 可以非常接近：

0.909999999999..

因此，不可能将这些数字准确地加在一起。

# javascript - 制作浏览器内的 LED 显示屏 : 怎么去创造人物？

> ID：10313530
> 
> 赞同：2
> 
> 时间：2012-04-25T10:09:17.297
> 
> 标签：javascript, html, canvas, fonts, led

我的浏览器内 LED`Display`对象`LED`的属性中存储了对象`map`。每个`LED`都有`x`和`y`属性，以便知道它在画布上的位置，而s`map`的 2D 数组`LED`（可以是不同的大小）将它们映射到`Display`矩阵上。显示对象还具有定义 LED 区域和它们之间的空间的属性。

显示器应该能够显示预制字体中的字符，例如数字和字母。

我无法理解的是：显示字符的最佳方式是什么？例如，以下是字母“S”的外观示例（`.`LED 显示屏是否已关闭，`O`LED 显示屏是否已打开：

```
..OO..
.OOOO.
OO..OO
OO....
.OO...
..OO..
...OO.
OO.OO.
.OOO..
..OO.. 
```

我应该如何映射要打开哪些 LED？

我目前的解决方案是：创建一个`Character`具有属性`x`和`y`（确定它在显示矩阵上的位置）`width`和`height`（确定它在 LED 中的区域）的对象。然后将应该打开的 LED 映射到 2D 阵列中。当我们需要显示一个字符时，我们得到`Character`'s`x`和`y`，找到'source' LED，然后`LED`按照映射打开 s 。

有没有更好的办法？也许使用路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:30:51.643

据我了解，您正试图拥有一个“像素化”的 LED 显示屏。所以基本上，将你的字符存储为像素数组似乎是定义它们的最佳方式......我真的不明白你的问题是什么。

如果您的问题是关于获取像素图，您可以做的一件事是获取类似字体的像素，在屏幕外画布上绘制字符，获取像素数据，然后使用它们创建角色的像素图。然后你可以做一个循环来映射所有角色，而不必自己创建每个地图......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T21:21:36.393

根据您的描述，我并不完全确定您是如何做到的，但是根据我认为您所追求的，这是我将如何做到的。

第一步，把你所有的角色放在数组中，定义哪些点需要打开或关闭 LED。如果这将是一个大集合，您可以尝试一些技术来压缩数据。

根据画布上 LED 的大小，我可以创建一个函数来计算哪些 LED 需要更换，并且只擦除需要更换 LED 的显示屏。一次预渲染 LED（开和关状态），就像 openGL 中的显示列表（参见下面的链接）。

否则，如果屏幕上的字符本身非常小并且它们很多，我会预先渲染每个完整的字符并像字体一样使用。这将需要更多地清除屏幕，但如果有数百个 LED，则计算和显示清除的开销可能会很高。

这个页面有一些关于高效画布渲染的好信息：http: [//www.html5rocks.com/en/tutorials/canvas/performance/](http://www.html5rocks.com/en/tutorials/canvas/performance/)

我假设 LED 是在程序中渲染的，而不仅仅是图像？如果它们只是图像，那么您已经有效地预渲染了 LED。

# jquery - Jquery 和 Sharepoint 不匹配

> ID：10313534
> 
> 赞同：0
> 
> 时间：2012-04-25T10:09:33.383
> 
> 标签：jquery, html, sharepoint

我正在使用 Jquery 和 sharepoint 构建现有页面 该页面已经包含一个 jquery 脚本，该脚本使新闻向下滚动。我无法访问旧代码来添加一些代码，所以我确实添加了一个带有共享点的内容 Web 部件，我可以在其中添加我的所有代码然后提交

我添加了这段代码：

```
<script src="/_catalogs/masterpage/js/jquery.js" type="text/javascript"></script> 
```

（与默认页面相同）

```
$('img#test').click(function(){

alert('testttttt');
}); 
```

它是一个简单的代码，只是为了查看是否一切正常，但我看到的是当我在 mmy 代码中引用 jquery.js 时，旧的滚动将停止工作，我的代码将工作，如果我删除链接，我的代码将无法工作并且旧代码可以提供任何建议吗？

另一件事，我没有这样做，而是尝试添加

```
 < img onClick='test1' id='id1'... /> 
```

到 html ，但 sharepoint 一直在为我删除代码

```
 < img id='id1' .... /> 
```

有什么建议吗？感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:29:01.090

我的建议是这样的：

使用 FireFox 中的 FireBug 插件打开页面或使用 IE 中的开发人员工具检查页面。

转到脚本选项卡并检查包含哪些脚本。如果页面已经引用了 JQuery，那么您不需要在内容编辑器 WebPart 中再次包含它。

如果您确定 JQuery 已包含在页面中，那么您上面的 javascript 应该可以正常工作。

如果它已经包含在页面中并且您的代码不起作用，那么可能是您的示例 JS 代码错误。

但一个好的开始是检查上面提到的开发工具中的渲染页面，看看到底发生了什么。

# java - 在 CriteriaQuery 期间初始化 JPA 实体的瞬态属性

> ID：10313535
> 
> 赞同：11
> 
> 时间：2012-04-25T10:09:33.430
> 
> 标签：java, jpa-2.0, criteria-api

我想知道是否可以在条件查询期间初始化实体的瞬态属性。

例子

```
@Entity
public SampleEntity{

  @Id
  private long id;

  [more attributes]

  @Transient
  private String someTransientString;

  [getters and setters]
} 
```

现在我想编写一个 CriteriaQuery 加载所有`SampleEntity`s 并自动设置`someTransientString`为`imamightlyfinestring`. 我想到了以下 SQL：

```
SELECT ID AS ID, [..], 'imamightilyfinestring' AS SOME_TRANSIENT_STRING FROM SAMPLE_ENTITY 
```

我当然知道我可以简单地迭代生成的集合并手动设置属性，但我想知道是否有办法在 JPA2 中做到这一点。

谢谢 ：）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T17:05:18.663

不，您不能在查询中执行此操作。

如果您可以在查询之外找出 someTransientString 的值，则可以使用[PostLoad](http://docs.oracle.com/javaee/6/api/javax/persistence/PostLoad.html)回调（摘自 JPA 2.0 规范）：

> 实体的 PostLoad 方法在实体从数据库加载到当前持久性上下文之后或在对其应用刷新操作之后调用。在返回或访问查询结果或遍历关联之前调用 PostLoad 方法。

只需将以下内容添加到您的实体中：

```
@PostLoad
protected void initSomeTransientString() {
    //Likely some more complex logic to figure out value,
    //if it is this simple, just set it directly in field declaration.
    someTransientString = "imamightilyfinestring";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T10:32:11.317

您还可以在默认（即无参数）构造函数中初始化瞬态。

您可以看到这是使用的策略，例如，在 EclipseLink 中（阅读以下链接中的最后一条评论）：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=292385](https://bugs.eclipse.org/bugs/show_bug.cgi?id=292385)

# php - 通过 Zend 中的应用程序访问控制器动作

> ID：10313537
> 
> 赞同：0
> 
> 时间：2012-04-25T10:09:35.457
> 
> 标签：php, zend-framework

我对 Zend 有点陌生，我想在整个应用程序中自动使用控制器动作，我不清楚如何使用它，考虑过 init() 方法、动作助手等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:11:53.390

然后，不要简单地创建控制器动作，而是创建 controllerAction Helper 。在这里您可以找到更多关于它的信息

[http://framework.zend.com/manual/en/zend.controller.actionhelpers.html](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html)

```
My_Helper_Magic extends Zend_Controller_Action_Helper_Abstract
{

public function preDispach()
{
     //code inside here will run for entire application automatically
}

} 
```

在你的引导做

```
Zend_Controller_Action_HelperBroker::addHelper(new My_Helper_Magic()); 
```

回应评论。

这取决于您的“代码片段”，如果您的代码片段不需要对模块、控制器、操作、基本 url 一无所知，那么您可以使用 Bootstrap init 函数

像

```
public function _initAlways()
{
//see how this function name is prefixed with _init hence it will be called by ZF //everytime. You can put your code fragment here 
//If your code fragment depends upon some stuff like baseurl then do action controller
// registration here instead 
 Zend_Controller_Action_HelperBroker::addHelper(new My_Helper_Magic());

} 
```

回应评论

您可以将对象的任何实例保存在 Zend_Registy 中并在您喜欢的任何地方检索它

Bootstrap.php 内部

```
public function _initSetup()
{
$object = new My_Custom_Object();
Zend_Registry::set('my_custom_object',$object);
} 
```

稍后在您的视图或控制器中执行

```
$myObject = Zend_Registry::get('my_custom_object');  //to access it 
```

# proxy - 从 XSD 为类型/类生成参数化构造函数

> ID：10313538
> 
> 赞同：4
> 
> 时间：2012-04-25T10:09:35.737
> 
> 标签：proxy, xsd

我是 XSD 方面的新手。有人会告诉我有没有一种方法可以使用参数化构造函数从 XSD (ComplexType) 生成一个类。

例如。我已经使用 ComplexType A 跟踪 XSD，并且我希望在从此 XSD 生成代理时使用它。类型 A 包含一个带有字符串值的构造函数。

```
<xs:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:mstns="http://tempuri.org/XMLSchema.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema"> <xs:complexType name="A"> <xs:sequence> <xs:element name="property1" type="xs:string"/> </xs:sequence> </xs:complexType> </xs:schema> 
```

A _object = new A("这是值");

这可能与否？

在这方面的任何帮助都将是非常可观的。

/里兹万

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:40:16.543

看到您的其他涉及 .NET 平台的帖子，我假设您在这里也是如此。

答案是不; 通常，由于与反序列化相关的原因，XSD 到代码生成器仅使用默认构造函数（无参数）。

您可以使用初始化程序。

# java - 将绝对路径中可用的 jar 文件添加到类路径中

> ID：10313539
> 
> 赞同：0
> 
> 时间：2012-04-25T10:09:35.913
> 
> 标签：java, maven, classpath

我正在使用 Maven 构建工具。我的意图是将单独的绝对文件夹中可用的 jar 文件 [例如：C:\test1.jar, C:\test2.jar] 添加到类路径中。

为此，我在我的 pom 文件中添加了以下内容。

```
<plugin>
 <artifactId>maven-war-plugin</artifactId>
 <version>2.2</version>
 <configuration>
  <archive>
   <manifest>
    <addClasspath>true</addClasspath>         
   </manifest>
   <manifestEntries> 
     <Class-Path>C:/test1.jar, C:/test2.jar</Class-Path> 
   </manifestEntries>
  </archive>
 </configuration>
</plugin> 
```

我可以看到罐子被添加到战争中可用的 MANIFEST.MF 文件的类路径中，但是当部署战争时，由于“java.lang.ClassNotFoundException”而失败 [与 test1.jar 或 test2.jar 相关] .

这是否意味着在 MANIFEST.MF 的类路径中添加的 test1.jar 和 test2.jar 没有添加到类路径中，或者我在这里遗漏了什么或错误。

请帮助我通过使用战争文件的 MANIFEST.MF 或任何其他想法来将绝对路径中可用的 jar 文件添加到类路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:26:09.167

更好的解决方案是将 jar 添加到 maven 存储库，然后像普通依赖项一样使用它们。这是将 jar 添加到 maven repo 的命令。

```
mvn install:install-file -Dfile=<path-to-file> -DgroupId=<group-id> \
    -DartifactId=<artifact-id> -Dversion=1.0 -Dpackaging=jar 
```

然后在你的 pom.xml

```
<dependency>
    <groupId><group-id></groupId>
    <artifactId><artifact-id></artifactId>
    <version>1.0</version>
</dependency> 
```

# jquery - 在 jquery 数据表的每一行中显示多个项目

> ID：10313540
> 
> 赞同：1
> 
> 时间：2012-04-25T10:09:37.360
> 
> 标签：jquery, jquery-datatables

**我想在jQuery 数据表插件的**每一行中显示多个项目，
例如我想在每一行中显示 5 个项目。

任何想法 ？

我使用 fnrender 函数来自定义表格：

```
"aoColumns": [

                        { "sName": "ID",

                            "fnRender": function (oObj) {
                                var data = oObj.aData[0];
                                return "<table width=\"650\" border=\"0\" cellpadding=\"10\" cellspacing=\"12\" style=\"line-height:18px;\"><tr><td align=\"right\" valign=\"top\" bgcolor=\"#F0F0F0\" dir=\"rtl\"><p><a href=\"data?id=" + data[0] + "\" class=\"linknormaltext\" ><span class=\"normaltext\"><span class=\"header3\">" + data[1] + "<br><span class=\"date\">: " + data[2] + "</span></span></span></a></p></td></tr> </table>";
                            }
                        }
                    ]
         }); 
```

# iphone - 滚动表格视图时如何避免崩溃

> ID：10313546
> 
> 赞同：-7
> 
> 时间：2012-04-25T10:10:03.473
> 
> 标签：iphone

我正在开发一个应用程序。当我滚动表格视图时，应用程序崩溃了。所以请告诉我当我滚动表格视图时如何避免崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:24:04.603

可能有几个原因。

1.  您正在访问超出您提供的数据索引（主要是数组）的对象。
2.  您已经过度释放了数组中包含的对象，因此被释放并导致崩溃。
3.  您有多个数组作为源（如子数组），并且您实际上是在引用超出范围的索引。（情况与一相同）
4.  您没有在 tableview:cellforIndexpath: 方法上返回单元格（nil）。这是 tableview 必须的。请在调试时检查单元格对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:30:17.147

检查部分中的行数，这可能是当部分中的行不平衡时应用程序崩溃的原因

# android - 如何在 android 活动中显示 JBox2D 对象？

> ID：10313547
> 
> 赞同：0
> 
> 时间：2012-04-25T10:10:05.593
> 
> 标签：android, jbox2d

我编写了一个使用 jbox2D 显示圆圈体的代码。但是当运行这段代码时，我得到了空白屏幕。现在如何在屏幕上显示这个刚体。我需要使用任何视图在屏幕上显示它吗？请帮助..

```
import org.jbox2d.collision.shapes.CircleShape;
import org.jbox2d.common.Vec2;
import org.jbox2d.dynamics.Body;
import org.jbox2d.dynamics.BodyDef;
import org.jbox2d.dynamics.BodyType;
import org.jbox2d.dynamics.FixtureDef;
import org.jbox2d.dynamics.World;

import android.app.Activity;
import android.os.Bundle;

public class FirstBox2DGameActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
//       setContentView(R.layout.main);     
        Vec2 gravity = new Vec2(0.0f, -10.0f);
        boolean doSleep = true;
        World world = new World(gravity, doSleep);

        // Body definition is created as below.
        BodyDef bd = new BodyDef();
        bd.position.set(100, 200);
        bd.type = BodyType.STATIC;

        // body Shape
        CircleShape cs = new CircleShape();
        cs.m_radius = 5.0f;

        // Fixture defines the material properties of the body. Fixtures are
        // also used for attaching shape to the body. These material properties
        // describe how two bodies should react when they collide with each
        // other.
        FixtureDef fd = new FixtureDef();
        fd.shape = cs;
        fd.density = 0.5f;
        fd.friction = 0.3f;
        fd.restitution = 0.5f;

        // Now final step is to create a body and add fixture to it. The bodies
        // are created using World class.
        Body body = world.createBody(bd);
        body.createFixture(fd);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:22:55.753

好吧，您也必须在屏幕上绘制它。:) 在这里查看示例[http://disanji.net/2010/12/18/android-2d-box2d/](http://disanji.net/2010/12/18/android-2d-box2d/)

# jquery - 具有不同鼠标进入和鼠标离开的悬停意图插件

> ID：10313552
> 
> 赞同：0
> 
> 时间：2012-04-25T10:10:16.357
> 
> 标签：jquery, hoverintent

我正在使用 Hover indent 插件，它只有一个功能来结合鼠标悬停和鼠标离开

代码1：

```
$("#tab").hoverIntent({
over: show, 
timeout: 20, 
out: hide
});
function show(){
$(".part").show();
}
function hide(){
$(".part").hide();
} 
```

需要为.part编写鼠标离开功能，所以这样制作

代码2：

```
$("#tab").hoverIntent({
over: show, 
timeout: 20, 
out: hide
});
function show(){
$(".part").show();
}
$(".part").hoverIntent({
over: show, 
timeout: 20, 
out: hide
});
function hide(){
$(".part").show();
} 
```

但似乎错误......如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:32:36.783

您不能删除任何功能，因为在`hoverintent()`使用`show()` 和`ehide()` 功能时，请像这样将该功能设为空

```
$("#tab").hoverIntent({
     over: show, 
     timeout: 20, 
     out: hide
});
function show(){
   $(".part").show();
}
function hide(){
}

$(".part").hoverIntent({
   over: show1, 
   timeout: 20, 
   out: hide1
});
function show1(){
}
function hide1(){
    $(".part").hide();
} 
```

你必须使用不同的函数名每个 show(),hide(),show1(),hide1() 像这样...试试这个

# java - 并发 HashMap：检查大小

> ID：10313556
> 
> 赞同：8
> 
> 时间：2012-04-25T10:10:29.497
> 
> 标签：java, concurrency, concurrenthashmap

Concurrent Hashmap 可以解决在 hashmap 中出现的同步问题。因此，如果我们使用带 hashmap 的同步键工作，添加和删除会很快。如果有多个线程检查 concurrentHashMap 大小，那么检查 hashmap 大小呢？是否还需要同步关键字：如下：

```
public static synchronized getSize(){
     return aConcurrentHashmap.size();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T10:14:09.383

`concurentHashMap.size()`将返回调用时已知的大小，但是当您使用该数字时它可能是一个陈旧的值，因为同时另一个线程已经添加/删除了项目。

然而 ConcurrentMaps 的全部目的是你不需要同步它，因为它是一个线程安全的集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T10:13:27.820

您不需要将同步与 ConcurretnHashMap 一起使用，除非在极少数情况下您需要原子地执行多个操作。

要获得大小，您可以在不同步的情况下调用它。

* * *

为了澄清我何时将使用与 ConcurrentHashMap 同步...

假设您有一个要按需创建的昂贵对象。您需要并发读取，但也希望确保值只创建一次。

```
public ExpensiveObject get(String key) {
    return map.get(key); // can work concurrently.
}

public void put(String key, ExepensiveBuilder builder) {
    // cannot use putIfAbsent because it needs the object before checking.
    synchronized(map) {
        if (!map.containsKey(key))
            map.put(key, builder.create());
    }
} 
```

注意：这要求所有的写入都是同步的，但读取仍然可以是并发的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T10:14:31.097

您可以简单地调用`aConcurrentHashmap.size()`. 但是，您必须记住，当您得到答案时，它可能已经过时了。如果另一个线程同时修改地图，就会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-03T08:50:27.650

ConcurrentHashMap 的设计者考虑赋予单独的操作权重，例如 : `get()`，`put()`以及`remove()`在整个 HashMap 上操作的方法，例如`isEmpty()`or `size()`。这样做是因为（通常）调用这些方法的更改少于其他单个方法。

`size()`这里不需要同步。我们可以通过调用`concurentHashMap.size()`方法来获取大小。此方法可能会返回过时的值，因为其他线程可能会同时修改映射。但是，由于这些操作的优先级被取消，这被明确地假定为被打破。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-30T07:17:30.460

ConcorrentHashMap 是故障安全的。它不会给出任何并发修改异常。它适用于多线程操作。ConcurrentHashMap 的整个实现与 HashMap 相同，但在检索元素时，HashMap 会锁定整个映射，限制进行进一步修改，从而导致并发修改异常。但是在 ConcurrentHashMap 中，锁定发生在存储桶级别，因此不存在并发修改异常的机会。

因此，要在这里回答您的问题，检查 ConcurrentHashMap 的大小并没有帮助，因为它会根据您在地图上编写的操作或修改代码保持链接。它具有与 HashMap 相同的 size 方法。

# sql - 按自定义字段排序

> ID：10313557
> 
> 赞同：0
> 
> 时间：2012-04-25T10:10:35.523
> 
> 标签：sql, wordpress, sql-order-by

我需要你的帮助来处理我的 wordpress 小部件类型代码。我有一个名为`ordermetakey`. 我需要下面这个框来对这个自定义字段上的帖子进行排序`ASC`。它是一个数字`timestamp`。

```
<div class="list-block">
    <ul>
       <?php $postslist = get_posts('numberposts=5'); foreach ($postslist as $post) : setup_postdata($post); ?>
       <li>
          <p><strong><a title="Post: <?php the_title(); ?>" href="<?php the_permalink(); ?>"><?php the_title(); ?></a></strong><br \> <span><?php echo get_post_meta($post->ID, 'standplaats', true); ?></span></p>
       </li>
  <?php endforeach; ?>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:13:12.080

```
<div class="list-block">
    <ul>
        <?php $postslist = get_posts( array(
            'meta_key' => 'ordermetakey',
            'orderby' => 'meta_value_num',
            'order' => 'ASC',
            'posts_per_page' => 5
        );
        foreach ($postslist as $post) : setup_postdata($post); ?>
        <li>
            <p><strong><a title="Post: <?php the_title(); ?>" href="<?php the_permalink(); ?>"><?php the_title(); ?></a></strong><br \> <span><?php echo get_post_meta($post->ID, 'standplaats', true); ?></span></p>
        </li>
        <?php endforeach; ?>
    </ul>
</div> 
```

# java - 注销用户后还需要注意什么？

> ID：10313559
> 
> 赞同：0
> 
> 时间：2012-04-25T10:10:40.173
> 
> 标签：java, security, jsp, web, logout

在我的网站上，当用户单击*注销*时，我会这样做：

```
session.inavlidate(); 
```

在此之后，我将用户重定向到网站的索引页面。这个可以吗 ？我问这个是因为用户从网站注销后：

1.  我仍然在浏览器中看到名为 JSESSIONID 的 cookie，它说将在会话结束时过期。
2.  当新用户按下返回键时，他能够看到前一个用户的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:18:15.180

1.  当您将用户重定向到索引页面时注销后，将创建一个新会话。检查注销前的 sessionId (JSESSIONID) 是否与注销后的 sessionId 不同。它们应该是不同的，在这种情况下，没有什么可担心的。

2.  当用户单击 BACK 时，页面将从浏览器的缓存中显示。但是由于会话已经过期，他们通常不能做任何从无效会话中获取数据的事情。您可以通过禁用页面缓存来阻止用户在单击“返回”按钮时看到任何内容。这可以使用 META 标签来完成 - `<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> <META HTTP-EQUIV="Expires" CONTENT="-1">`

# ruby-on-rails - Rails - 允许人们在记录之间添加关联，但只允许管理员删除它

> ID：10313563
> 
> 赞同：0
> 
> 时间：2012-04-25T10:10:50.300
> 
> 标签：ruby-on-rails, associations, user-permissions

我有一个具有以下模型的应用程序：人员、项目、ProjectsAdminLists。

人和项目之间存在 HABTM 关联。每个项目都有一个 ProjectAdminsList，每个项目都可以有很多人。

属于每个项目的人可以将其他人添加到其中，但我想将此关联的删除限制为属于 ProjectAdminsList 的人。在视图中限制这一点很简单，但在控制器中最好的方法是什么？我正在寻找这方面的一般指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:44:05.110

你需要某种授权系统，我建议你看看 Ryan Bates（RailsCasts 人）写的 CanCan gem，你可以开始看[Authorization with CanCan](http://railscasts.com/episodes/192-authorization-with-cancan) RailsCast，然后看看真正好的文档。

这里有一个概述：

*   它只需要一个`current_user`方法来确定当前登录的用户
*   您将授权规则写入单个文件 ( **ability.rb** )
*   您使用`can?`视图层中的方法来检查用户是否可以对某物进行某些操作
*   您调用`load_and_authorize_resource`控件使 CanCan 根据ability.rb 文件自动检查授权。

当然，我只是触及了表面，因为文档非常好。

# cordova - 无法让 Cordova (1.6.1) 工作

> ID：10313571
> 
> 赞同：0
> 
> 时间：2012-04-25T10:11:17.393
> 
> 标签：cordova, web-applications

我对 PhoneGap 比较陌生，所以这可能是一个容易解决的问题。我只是有点分心，因为我记得使用旧版 PhoneGap.js 的事情。

我正试图让科尔多瓦工作。该文件已正确初始化（对象“cordova”存在于 JS 中）并且事件处理程序“deviceready”触发到cordova-1.6.1.js（已通过警报测试）但回调本身根本没有被触发。

简而言之：如何让 Cordova 在设备或桌面浏览器中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T06:13:49.467

更多细节将有助于我们为您提供帮助。

嗯，据我所知——

首先，您需要将 cordova-1.6.1.js 文件放入您的 www/js 文件夹中。将文件的路径作为脚本添加到 index.html 页面中。

```
<script type="text/javascript" charset="utf8" src="[location of cordova.ios(for ios)]"></script> 
```

希望能帮助到你。

# ruby-on-rails - 使用哈希遍历 Ruby 中的表运行缓慢

> ID：10313577
> 
> 赞同：1
> 
> 时间：2012-04-25T10:11:32.600
> 
> 标签：ruby-on-rails, ruby, hash

我有以下代码

```
h2.each {|k, v|
   @count += 1
   puts @count
   sq.each do |word|
       if Wordsdoc.find_by_docid(k).tf.include?(word)
       sum += Wordsdoc.find_by_docid(k).tf[word] * @s[word]
       end
     end
   rec_hash[k] = sum
   sum = 0
   } 
```

h2 -> 是一个包含文档 ID 的哈希，该哈希包含超过 1000 个这些 Wordsdoc -> 是我数据库中的模型/表... sq -> 是一个包含大约 10 个单词的哈希

我正在做的是遍历每个文档 ID，然后对于 sq 中的每个单词，如果该单词存在，我会在 Wordsdoc 表中查找（Wordsdoc.find_by_docid(k).tf.include?(word) ，这里 tf 是 {word => value} 的哈希

如果是这样，我会在 Wordsdoc 中获取该单词的值，并将其与 @s 中的单词的值相乘，这也是 {word = > value} 的哈希

这似乎运行得很慢。Tt 每秒处理一个文档。有没有办法更快地处理这个？

非常感谢您对此的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:51:32.373

你做了很多重复的查询。虽然 ActiveRecord 可以在后台进行一些缓存以加快速度，但它可以做的事情是有限的，没有理由让它变得更难。

放缓的最明显原因是`Wordsdoc.find_by_docid(k)`. 对于 的每个值`k`，您调用它 10 次，每次调用它都有可能再次调用它。这意味着您使用相同的参数为`h2`. 对数据库的查询是昂贵的，因为数据库在硬盘上，并且在任何系统中访问硬盘都是昂贵的。您可以在进入循环之前轻松调用`Wordsdoc.find_by_Docid(k)` **一次**`sq.each`，并将其存储在一个变量中 - 这将节省大量查询并使您的循环运行得更快。

另一项优化——虽然不如第一个重要——是在单个查询中获取所有 Wordsdoc 记录。几乎所有中高级（还有一些低级！）编程语言和库在批量工作时工作得更好更快，ActiveRecord 也不例外。如果您可以查询 的**所有**条目`Wordsdoc`，并通过`docid`'s in`h2`的键对其进行过滤，则可以将 1000 个查询（在第一次优化之后。在第一次优化之前是 10000-20000 个查询）变成一个巨大的查询。这将使 ActiveRerocd 和底层数据库能够以更大的块检索您的数据，并为您节省大量磁盘访问。

您可以做一些更小的优化，但我指定的两个应该绰绰有余。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:19:19.800

你打`Wordsdoc.find_by_docid(k)`了两次电话。

您可以将代码重构为：

```
wordsdoc = Wordsdoc.find_by_docid(k)
if wordsdoc.tf.include?(word)
  sum += wordsdoc.tf[word] * @s[word]
end 
```

...但它仍然是丑陋和低效的。

您应该分批预取所有记录，请参阅：[https ://makandracards.com/makandra/1181-use-find_in_batches-to-process-many-records-without-tearing-down-the-server](https://makandracards.com/makandra/1181-use-find_in_batches-to-process-many-records-without-tearing-down-the-server)

例如，这样的事情应该更有效：

```
Wordsdoc.find_in_batches(:conditions => {:docid => array_of_doc_ids}).each do |wordsdoc|
  if wordsdoc.tf.include?(word)
    sum += wordsdoc.tf[word] * @s[word]
  end
end 
```

您也可以使用例如`:select => :tf`in`find_in_batches`方法仅从 Wordsdoc 表中检索某些列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:49:34.923

由于您有很多事情要做，我只想为您提供要检查的东西。

1.  一本名为[Eloquent Ruby](https://rads.stackoverflow.com/amzn/click/com/0321584104)的书处理文档并遍历文档以计算单词被使用的次数。他的所有示例都是关于他正在维护的文档系统，因此它甚至可以为您解决其他问题。
2.  `inject`可能是一种可以加快您为`sum`零件做的事情的方法。
3.  如果您异步执行此操作，则延迟整个工作。这意味着如果这是一个网络应用程序，如果您等待 1000 秒以完成此作业，然后它会在屏幕上显示它的答案，那么您必须超时。

去拿他们。

# c# - MediaPlayerLauncher 不起作用

> ID：10313582
> 
> 赞同：2
> 
> 时间：2012-04-25T10:11:47.403
> 
> 标签：c#, windows-phone-7

我想知道为什么我的 MediaPLayerLauncher 总是从服务器抛出错误 404。

我可以使用我的 WebBrowserTask 加载我想要的所有文件、ZIP 文件或 jpeg 等，这意味着我的 url 很好并且可以工作。当涉及到 mp4 文件时，它不起作用。

这是我实际使用的代码：

```
 if (newPath.Contains(".mp4"))
            {
                MediaPlayerLauncher mediaPlayerLauncher = new MediaPlayerLauncher();
                mediaPlayerLauncher.Media = new Uri(newPath, UriKind.RelativeOrAbsolute);
                mediaPlayerLauncher.Location = MediaLocationType.Data;
                mediaPlayerLauncher.Controls = MediaPlaybackControls.Pause | MediaPlaybackControls.Stop;
                mediaPlayerLauncher.Show();
            } 
```

newPath 值为：[http ://website.com//files//myfile.mp4](http://website.com//files//myfile.mp4)

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:48:45.223

MediaLocationType.Data 用于指定文件存储在Isolated Storage 中，尝试删除此行。

# java - OutOfMemoryError：何时“转储 HPROF 文件”

> ID：10313589
> 
> 赞同：0
> 
> 时间：2012-04-25T10:12:00.843
> 
> 标签：java, android, eclipse

我的游戏应用程序存在某种内存问题。当我第一次运行它时，闪屏活动工作，关卡选择活动工作，然后游戏模式工作，我可以毫无问题地玩多个关卡。然后我退出了游戏。然后我第二次运行该应用程序时，我得到一个 OutOfMemoryError：位图大小超出 VM 预算，甚至在我看到启动屏幕之前。

我的应用程序基于一个名为 SD_globals 的应用程序，如下所示：

```
public class SD_Globals extends Application
{
    int example_global_data = 99;
    // stuff
} 
```

和五个独立的活动，每个活动都可以访问 SD_Globals 中声明的各种全局数据。例如，其中一项活动是 SD_gameplay，如下所示：

```
public class SD_GamePlay extends Activity implements View.OnClickListener
{
    SD_Globals gs; // gs stands for global state

    gs = ((SD_Globals)getApplicationContext());

    // now I can access global variable using code like this:
    int x = gs.example_global_data;
} 
```

欢迎任何有关此设置可能会发生何种错误的想法 - 尽管这不是我的具体问题。

我已经阅读了一些关于使用 DDMS 和内存分析器来帮助诊断问题的信息，但我不清楚的一件事是按下“转储 HPROF 文件”按钮以获得最有用的信息的最佳时间是什么时候。应该是在我的游戏仍在运行时还是在我退出游戏之后（但在第二次运行之前）还是在崩溃之后？

**编辑：**为了回应 Akhil 的回答，我将澄清我在每个单独活动的 onCreate 方法中只使用一次 getApplicationContext() 而在其他情况下没有。`gs = ((SD_Globals)getApplicationContext())`我还应该说，这个通用应用程序结构（带

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:24:33.713

**除非您确定需要，否则**切勿使用 getApplicationContext()。**它使您的资产应用程序范围有限，并且它们没有被回收。坚持你可以提供的最窄的上下文，比如一个活动。改变它的所有出现。**

**由于它是一个游戏，我假设您使用的是位图。当它们所属的活动被破坏时，您是否正在**回收**它们（确保您将活动用作上下文而不是整个应用程序）。**

**您*需要*定期从 hprof 中转储堆（每个活动可能 2-3 次）。这样您就可以通过**比较相**隔一段时间的堆来查看内存泄漏的原因，因为您花时间在应用程序上.**

**这是我可以提供的一般答案，因为这个问题是理论上的。**

# ios - 基于一对多值的 NSPredicate 过滤器

> ID：10313599
> 
> 赞同：1
> 
> 时间：2012-04-25T10:12:36.147
> 
> 标签：ios, core-data, filtering, nspredicate

我有 2 个具有一对多关系的实体。`Category`代表我的部分标题并`SubSubCategory`代表我的行。

```
Category
{
    name:string
    subs<-->>SubCategory
}

SubCategory
{
    name:string
    numbervalue:NSNumber
} 
```

目前我可以用来`NSPredicate`根据名称过滤我的部分。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name==%@",@"anamevalue"]; 
```

现在我想进一步过滤这个谓词，只返回具有 a`Subcategory`和 a 的类别`subvalue == 1`。

如何根据`Category`实体的一对多子项中的值过滤实体？

我试过这样的东西，但它没有好处。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name==%@ AND subs.numbervalue==%@",@"anamevalue",1]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:35:00.333

我会做一个如下的谓词：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name == %@ AND ANY subs.numbervalue == %@)", @"anamevalue", [NSNumber numberWithInt:1]]; 
```

The`ANY`是一个谓词修饰符，仅当 subs 集合中至少有一个对象的比较返回 true 时才返回 true。

同样的结果可以通过`SUBQUERY`.

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:34:06.147

谓词中的语法错误。您将整数值作为字符串传递。

你的谓词应该是

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name==%@ AND subs.numbervalue==%i",@"anamevalue",1] 
```

除此之外，它看起来是正确的。

# android - 如何在android上的listview中快速加载联系人

> ID：10313601
> 
> 赞同：2
> 
> 时间：2012-04-25T10:12:43.837
> 
> 标签：android, android-listview, android-contacts

在我的应用程序中，我在列表视图中列出联系人。联系人数量为 1000+。我得到了联系方式

通过使用cr.query(...) 的**ContentResolver 查询**，将值存储在 arraylist 中

然后在 setListAdapter(...) 中加载数组列表。显示我的所有联系人

应用程序需要将近 1 分钟，因此我使用异步任务，但使用异步任务没有太大区别。

我需要在 2 到 4 秒内显示所有联系人。我签入了**android 模拟器上的默认联系人应用程序，该应用程序在 2 到 4 秒内加载。** 我花了

在谷歌很久了。但我找不到任何有用的解决方案。请帮助我如何快速加载列表视图上的联系人。请帮我。

我的编码示例：

```
 private ArrayList<ContactListEntry> loadContactListInternal(String searchString) {
        ArrayList<ContactListEntry> contactList = new ArrayList<ContactListEntry>();
    ContentResolver cr = getContentResolver();
    Cursor cur = null;
    String[] projection = new String[] {BaseColumns._ID,ContactsContract.Contacts.DISPLAY_NAME,ContactsContract.Contacts.PHOTO_ID};
    ....
        cur=cr.query(ContactsContract.Contacts.CONTENT_URI, projection, selection, null, ContactsContract.Contacts.DISPLAY_NAME + " ASC");

    while (cur.moveToNext()) {
         int id = Integer.parseInt(cur.getString(0));
             ....   
        if (input !=null)
            photo = BitmapFactory.decodeStream(input);
         ....
        ArrayList<ContactListEntry.PhoneEntry> phoneEntries = new ArrayList<ContactListEntry.PhoneEntry>();

            String[] projection1 = new String[] {ContactsContract.CommonDataKinds.Phone.NUMBER,ContactsContract.CommonDataKinds.Phone.TYPE};    
            Cursor pcur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,projection1, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { String.valueOf(id) }, null);
            while (pcur.moveToNext()) {
                ...
            }
            pcur.close();

            ContactListEntry entry = new ContactListEntry(id, name, photo, phoneEntries);
            contactList.add(entry);
    }
    cur.close();

    return contactList;
}
    .....
    in another class
        private void selectionUpdated() {
                ....
         setListAdapter(new SelectedArrayAdapter(this, app.selectedContacts));
            ... 
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:29:30.420

所以你的问题是你为每个联系人做了很多子查询。我曾经有同样的问题。我的情况是我展示了很多联系人并允许用户点击其中的任何一个。之后，我开始在另一个活动中处理联系人。

那时我终于决定我应该只显示名称，然后在我启动下一个活动之前懒惰地获取所有其他数据。这太神奇了：我的程序速度几乎降低了 200 倍，并且操作对用户完全不可见。

如果我没记错的话，默认的 android 列表也是如此——它只显示名称，然后加载所有其他与联系人相关的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:13:29.210

我使用光标适配器，我剪切了数据库、数组适配器并优化了代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-17T12:41:39.757

使用投影和选择参数的概念来检索我的案例中的联系人 500 个联系人，最初需要 12 秒。

现在需要 350 毫秒（不到一秒）

```
void getAllContacts() {
    long startnow;
    long endnow;

    startnow = android.os.SystemClock.uptimeMillis();
    ArrayList arrContacts = new ArrayList();

    Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
    String selection = ContactsContract.Contacts.HAS_PHONE_NUMBER;
    Cursor cursor = ctx.getContentResolver().query(uri, new String[]{ContactsContract.CommonDataKinds.Phone.NUMBER,   ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME, ContactsContract.CommonDataKinds.Phone._ID, ContactsContract.Contacts._ID}, selection, null, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " ASC");

    cursor.moveToFirst();
    while (cursor.isAfterLast() == false) {

        String contactNumber = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
        String contactName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
        int phoneContactID = cursor.getInt(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone._ID));
        int contactID = cursor.getInt(cursor.getColumnIndex(ContactsContract.Contacts._ID));
        Log.d("con ", "name " + contactName + " " + " PhoeContactID " + phoneContactID + "  ContactID " + contactID)

        cursor.moveToNext();
    }
    cursor.close();
    cursor = null;

    endnow = android.os.SystemClock.uptimeMillis();
    Log.d("END", "TimeForContacts " + (endnow - startnow) + " ms");
} 
```

有关此链接的更多信息[http://www.blazin.in/2016/02/loading-contacts-fast-from-android.html](http://www.blazin.in/2016/02/loading-contacts-fast-from-android.html) ....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-01T17:14:11.603

考虑只使用一个查询并摆脱子查询的想法（如前所述）。您可以通过使用 Content Uri 进行查询来提高速度：

```
"ContactsContract.CommonDataKinds.Phone.CONTENT_URI" 
```

此 URI 还具有“ContactsContract.Contacts.DISPLAY_NAME”字段。

您可能还想考虑执行此查询并在单独的线程中使用适配器以使其完全透明。

这对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-24T07:11:28.410

优化的解决方案在这里......

```
private static final String[] PROJECTION = new String[] {
        ContactsContract.CommonDataKinds.Phone.CONTACT_ID,
        ContactsContract.Contacts.DISPLAY_NAME,
        ContactsContract.CommonDataKinds.Phone.NUMBER
    };
.
.
.

ContentResolver cr = getContentResolver();
        Cursor cursor = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, PROJECTION, null, null, null);
        if (cursor != null) {
            try {
                final int nameIndex = cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME);
                final int numberIndex = cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);

                String name, number;
                while (cursor.moveToNext()) {
                    name = cursor.getString(nameIndex);
                    number = cursor.getString(numberIndex);
                }
            } finally {
                cursor.close();
            }
        } 
```

干杯...：）

# image-processing - 将嘈杂的硬币改造成圆形

> ID：10313602
> 
> 赞同：7
> 
> 时间：2012-04-25T10:12:50.820
> 
> 标签：image-processing, opencv, javacv

我正在使用 JavaCV（OpenCV 包装器）进行硬币检测，但是当硬币连接时我遇到了一个小问题。如果我尝试腐蚀它们以分离这些硬币，它们会失去圆形形状，如果我尝试计算每个硬币内部的像素，可能会出现问题，以至于一些硬币可能被误算为更大的硬币。我想要做的是首先重塑它们并使它们像一个圆圈（等于那个硬币的半径），然后计算它们里面的像素。

这是我的阈值图像：![在此处输入图像描述](../Images/758a5f6e1f55d39a57f6c27d8d5a7971.png)

这是侵蚀的图像：![在此处输入图像描述](../Images/73e65046c316ce7e040cb6805dc955d1.png)

有什么建议么？或者有没有更好的方法来打破硬币之间的桥梁？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T22:32:22.330

它看起来类似于我最近不得不分离在琼脂板上生长的细菌菌落的问题。我对阈值图像执行了距离变换（在您的情况下，您需要将其反转）。然后找到距离图的峰值（通过计算扩张距离图和距离图之间的差异并找到零值）。然后，我假设每个峰值是圆（硬币）的中心，距离图中峰值的值是圆的半径。

这是此管道后图像的结果： ![距离变换工作](../Images/2a655839b05457e8e8580465fde88403.png)

我是 OpenCV 和 c++ 的新手，所以我的代码可能非常混乱，但我做到了：

```
int main( int argc, char** argv ){

    cv::Mat objects, distance,peaks,results;
    std::vector<std::vector<cv::Point> > contours;

    objects=cv::imread("CUfWj.jpg");
    objects.copyTo(results);
    cv::cvtColor(objects, objects, CV_BGR2GRAY);
    //THIS IS THE LINE TO BLUR THE IMAGE CF COMMENTS OF THIS POST
    cv::blur( objects,objects,cv::Size(3,3));
    cv::threshold(objects,objects,125,255,cv::THRESH_BINARY_INV);

    /*Applies a distance transform to "objects".
     * The result is saved in "distance" */
    cv::distanceTransform(objects,distance,CV_DIST_L2,CV_DIST_MASK_5);

    /* In order to find the local maxima, "distance"
     * is subtracted from the result of the dilatation of
     * "distance". All the peaks keep the save value */
    cv::dilate(distance,peaks,cv::Mat(),cv::Point(-1,-1),3);
    cv::dilate(objects,objects,cv::Mat(),cv::Point(-1,-1),3);

    /* Now all the peaks should be exactely 0*/
    peaks=peaks-distance;

    /* And the non-peaks 255*/
    cv::threshold(peaks,peaks,0,255,cv::THRESH_BINARY);
    peaks.convertTo(peaks,CV_8U);

    /* Only the zero values of "peaks" that are non-zero
     * in "objects" are the real peaks*/
    cv::bitwise_xor(peaks,objects,peaks);

    /* The peaks that are distant from less than
     * 2 pixels are merged by dilatation */
    cv::dilate(peaks,peaks,cv::Mat(),cv::Point(-1,-1),1);

    /* In order to map the peaks, findContours() is used.
     * The results are stored in "contours" */
    cv::findContours(peaks, contours, CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE);
    /* The next steps are applied only if, at least,
     * one contour exists */
    cv::imwrite("CUfWj2.jpg",peaks);
    if(contours.size()>0){

        /* Defines vectors to store the moments of the peaks, the center
         * and the theoritical circles of the object of interest*/
        std::vector <cv::Moments> moms(contours.size());
        std::vector <cv::Point> centers(contours.size());
        std::vector<cv::Vec3f> circles(contours.size());
        float rad,x,y;
        /* Caculates the moments of each peak and then the center of the peak
         * which are approximatively the center of each objects of interest*/

        for(unsigned int i=0;i<contours.size();i++) {
            moms[i]= cv::moments(contours[i]);
            centers[i]= cv::Point(moms[i].m10/moms[i].m00,moms[i].m01/moms[i].m00);
            x= (float) (centers[i].x);
            y= (float) (centers[i].y);
            if(x>0 && y>0){
                rad= (float) (distance.at<float>((int)y,(int)x)+1);
                circles[i][0]= x;
                circles[i][3]= y;
                circles[i][2]= rad;
                cv::circle(results,centers[i],rad+1,cv::Scalar( 255, 0,0 ), 2, 4, 0 );
            }
        }
        cv::imwrite("CUfWj2.jpg",results);
    }

    return 1;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T13:16:56.400

您不需要侵蚀，只需一组好的参数`cvHoughCircles()`：

![在此处输入图像描述](../Images/b596b91f1982d0eb73a1e1929a7359b3.png)

用于生成此图像的代码来自我的另一篇文章：[Detecting Circles](https://stackoverflow.com/questions/6416117/simple-object-detection-using-opencv-and-machine-learning/6416361#6416361)，具有以下参数：

```
CvSeq* circles = cvHoughCircles(gray, storage, CV_HOUGH_GRADIENT, 1, gray->height/12, 80, 26); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T10:21:34.387

OpenCV 有一个名为 HoughCircles() 的函数，可以应用于您的案例，而无需分隔不同的圆圈。你可以从 JavaCV 调用它吗？如果是这样，它会做你想做的事（检测和计算圆圈），绕过你的分离问题。

要点是在不先分离圆圈的情况下准确检测圆圈。可以使用其他算法（例如模板匹配来代替广义霍夫变换，但您必须考虑到硬币的不同大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T11:33:13.110

基于侵蚀的对象识别的常用方法是标记侵蚀图像中的连续区域，然后重新增长它们直到它们与原始图像中的区域匹配。不过，在您的情况下，霍夫圆是一个更好的主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-23T12:58:17.693

在检测到连接的硬币后，我建议应用形态学操作将区域分类为“肯定硬币”和“绝对不是硬币”，应用距离变换，然后运行分水岭以确定边界。这个场景实际上是 OpenCV 中分水岭算法的演示示例——也许它是为了回答这个问题而创建的。

# java - PHP脚本服务器端没有返回任何东西给Android应用程序

> ID：10313607
> 
> 赞同：1
> 
> 时间：2012-04-25T10:13:05.570
> 
> 标签：java, php, android, json

我正在为 Android 编写客户端-服务器应用程序，其中应用程序将 POST 发送到 php-script 服务器端。此脚本搜索数据库并返回结果。但是我没有让它工作。客户端和服务器之间的通信是 json 格式的。

这是android活动中的功能。第二个功能是复制粘贴，我不相信它，我在 internetz 上找到了它：

```
private void testDB(){
    //Creating a json-representation of my query

    JSONObject query = new JSONObject();

    try {
        query.put("author", "SomeAuthor");
        query.put("title", "SomeTitle");

    } catch (JSONException e1) {
        e1.printStackTrace();
    }

    String json = query.toString();

    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://myserver.com/search_books.php");

    try {           
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);  
        nameValuePairs.add(new BasicNameValuePair("jsondata", json));  
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);

        InputStream in = response.getEntity().getContent();

        String results = convertStreamToString(in);

        Toast.makeText(getApplicationContext(), results, Toast.LENGTH_LONG).show();

    } catch (ClientProtocolException e) {
        System.out.println("ERROR (ClientProtocolException): " + e.toString());
    } catch (IOException e) {
        System.out.println("ERROR (IOException): " + e.toString());     
    } 

}

private String convertStreamToString(InputStream is) {
    /*
     * To convert the InputStream to String we use the BufferedReader.readLine()
     * method. We iterate until the BufferedReader return null which means
     * there's no more data to read. Each line will appended to a StringBuilder
     * and returned as String.
     */
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

这是 php 脚本：

```
<?php
//Get the information from the request (POST)
$jsonInput = $_POST['jsondata'];
$decoded = json_decode($jsonInput,true);

//Connect to the database
$connection = mysql_connect(localhost, username, password);

if (!$connection) {
    die("Could not connect to db: " . mysql_error());   
}

//Select the database to be used
mysql_select_db("muffin_books", $connection) or die(mysql_error());

//Construct the query
$sql = "SELECT * FROM Books WHERE author='" . $decoded['author'] . "' AND title='" . $decoded['title'] . "'";

//Make the query to the database with the connection
$query_results = mysql_query($sql, $connection); 

//If no results were returned
if (!$query_results) {
    die("Could not connect to db: ", mysql_error());
}

//Get the array from the results
$info = mysql_fetch_array($query_results, MYSQL_ASSOC);

//Return the data encoded in json
echo json_encode($info);

//Disconnect database
mysql_close($connection);
?> 
```

问题是吐司只是空着。我 100% 确定该行存在于数据库中。myserver.com 不是我的实际服务器，在我的文件中它在此处说明了其他内容。用户名和密码也在我的代码中自定义。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:19:17.343

因为您正在向服务器发送 srig 我认为您需要将您的 sql 查询修改为

```
$sql = "SELECT * FROM Books WHERE author=" . $decoded['author'] . " AND title=" .      $decoded['title'] . ""; 
```

# javascript - jQuery 中传递的 HTML 中的 find()、each() 和 replacewith()

> ID：10313609
> 
> 赞同：2
> 
> 时间：2012-04-25T10:13:11.730
> 
> 标签：javascript, jquery, dom, replace, find

我有一些 HTML 代码要传递给一个函数，该函数不是要查找所有 iframe，用图像替换 iframe 代码，然后返回修改后的 html。但是，它似乎并没有替换返回的 html 中的 iframe 代码。我很确定我只是错误地引用了 hte 替换，但在网上找不到任何类似于我试图做的例子。它们都参考搜索整个文档或在文档中显示 html 之后。此 HTML 不是也不能是由于应用程序要求。

**请注意：我已经生成了 youtube 代码来替换 iframe 代码。问题在于执行替换。**

```
function article_youtube_convert(html) {
    //go throught the iframes for youtube and convert them to embed

    $(html).find('iframe').each(function(i) {
                     alert(this.src);
        //ok what we need to do here is check if it's youtube 
        src_youtube = this.src;
        if(src_youtube.indexOf('http://www.youtube.com')!=-1){
           //so now we need the video id 
           url_parts = src_youtube.split('/');

           youtube_id = url_parts[url_parts.length-1];

           url_parts = youtube_id.split('?');
           youtube_id = url_parts[0];

           youtube_link = 'http://www.youtube.com/watch?v='+youtube_id;
           img_youtube = '<a id="tempvid" href="'+youtube_link+'"><img src="http://img.youtube.com/vi/'+youtube_id+'/0.jpg"/><br />View YouTube Video</a>';

            $(this).replaceWith(img_youtube);

                     //alert(document.getElementById('tempvid').innerHTML);  
        }
    });
    return html;

} 
```

更新

我决定尝试使用 outerHTML 方法，并用变量中的新替换文本替换文本，如下所示。我提醒完整来源没有问题，但它仍然不能取代它。

```
jQuery.fn.outerHTML = function(s) {
    return s
    ? this.before(s).remove()
    : jQuery("<p>").append(this.eq(0).clone()).html();
};

function article_youtube_convert(passed) {
    //go throught the iframes for youtube and convert them to embed
    //alert('inside');
    newhtml = passed;
    //alert(newhtml);
    $(newhtml).find('iframe').each(function(i) {
                     //alert(this.src);
        //ok what we need to do here is check if it's youtube 
        src_youtube = this.src;
        if(src_youtube.indexOf('http://www.youtube.com')!=-1){
           //so now we need the video id 
           url_parts = src_youtube.split('/');
                                   alert('youtube vid');
           youtube_id = url_parts[url_parts.length-1];

           url_parts = youtube_id.split('?');
           youtube_id = url_parts[0];

           youtube_link = 'http://www.youtube.com/watch?v='+youtube_id;
           img_youtube = '<a id="tempvid" href="'+youtube_link+'"><img src="http://img.youtube.com/vi/'+youtube_id+'/0.jpg"/><br />View YouTube Video</a>';
                                   alert('alert: '+$(this).outerHTML());
                                   sourcethe = $(this).outerHTML();
                                   passed.replace(sourcethe,img_youtube);
            //$(this).replaceWith(img_youtube);
                                   //alert($(this));

                     //alert(document.getElementById('tempvid').innerHTML);  
        }
    });
    alert(passed);
    return passed;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:03:18.863

大卫，我刚刚做了一个快速测试，用三个`iframe`元素编写了一个简单的 HTML 页面，并复制了你的代码。我将 iframe 包装在一个`<div id="test">`元素中并调用`article_youtube_convert ("div#test");`. iframe 被完美地替换了。

```
<div id="test">
  <iframe width="560" height="315" src="http://www.youtube.com/embed/Z5y-UIjhjuM" frameborder="0" allowfullscreen></iframe>
  <iframe width="560" height="315" src="http://www.youtube.com/embed/Z5y-UIjhjuM" frameborder="0" allowfullscreen></iframe>
  <iframe width="560" height="315" src="http://www.youtube.com/embed/Z5y-UIjhjuM" frameborder="0" allowfullscreen></iframe>
</div> 
```

您确定将正确的 html 上下文传递给`article_youtube_convert`函数吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:32:59.013

看起来你实际上并没有从那个函数返回你想要的东西......

你从来没有真正改变`html`你的方法，你只是用它来做一些被丢弃的东西，然后返回你输入的东西。

你最有可能想做的是

```
var jqHtml = $(html);
...Do stuff to modify jqHtml...
return jqHtml.html(); 
```

我不确定且尚未测试的一件事是 .html() 是否返回您想要的。文档说它使用 elements`innerHTML`属性，但我不确定这是否会给从字符串构造的 jquery 对象提供正确的东西（我认为它应该）。

无论如何，这是您的基本问题，您根本没有修改 html。`$(html)`正在获取`html`字符串的副本，而不是对其可以根据需要进行更新的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:40:12.617

我想你想要

```
 url_parts = youtube_id.split('?');
  youtube_id = url_parts.pop(); 
```

但请注意，`youtube_id`将包括`v=`，所以你可以这样做：`url_parts.pop().substring(2)`

# jquery - jquery timepicker 值总是无效

> ID：10313611
> 
> 赞同：3
> 
> 时间：2012-04-25T10:13:19.627
> 
> 标签：jquery, asp.net-mvc, jquery-ui, timepicker

我在我的视图上使用不显眼的验证，并将 jquery-ui[时间选择器](http://trentrichardson.com/examples/timepicker/)应用于文本框。

如果我在选择器中选择适当的小时和分钟值，则不会触发不显眼的验证。但是，如果我浏览我的字段，在进入和离开时间选择器文本框后，它会突出显示为红色。输入验证消息说我的控件“必须有一个有效的日期”。

我知道 TimePicker 是 DatePicker 的一部分，但是看起来不显眼的 JS 认为这是 DatePicker。

有没有办法只禁用此控件的验证？或者也许进行调整，使该值不被标记为无效？

提前致谢

# sql - 如何防止 SSIS 从数据库中已存在的文件中导入数据？

> ID：10313612
> 
> 赞同：2
> 
> 时间：2012-04-25T10:13:21.110
> 
> 标签：sql, ssis

每天我都会将一些 csv 数据加载到我的表中。我的表有日期列，现在我需要使用回滚功能，这样，如果我的表中已经存在数据，它必须回滚，否则它必须根据我的 Asofdate 参数插入。

我知道这有点令人困惑，让我更清楚一点。

我的表有eid，ename，asofdate列，现在当我每天插入新文件时，它必须根据asofdate查看该文件是否已经存在于该表中，如果数据存在，它应该回滚数据。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T10:38:02.993

正如@Diego 所提到的，您将`Lookup transformation`在数据流任务中使用 a 来实现该功能。

您的数据流任务看起来像这样。在这里，平面文件源读取 CSV 文件，然后将数据传递给查找转换。此转换将检查目标表中的现有数据（例如表名为*dbo.Destination*）。查找转换的配置显示在下一个屏幕截图中。如果没有匹配的记录，则 CSV 文件中的数据将被发送到 OLE DB 目标，否则，数据将被丢弃。

![数据流任务](../Images/30bd8a92425a097c7653c77ba2fa1f5f.png)

在 中`Lookup transformation`，您将在 Connection 选项卡上选择目标数据库表。在“列”部分，您将验证要检查现有数据的所有列。在这种情况下，来自 CSV 文件的*eid*、*name*和*asofdate列将针对数据库表 dbo.Destination 中的同名列进行验证。*如果这三列的传入值与表中的任何行匹配，则数据将不会被进一步发送到流的下游。

希望能给你一个想法。

![查找表配置](../Images/bea018ee8868c18e4da64fae113953c8.png)

![查找检查](../Images/7b7ead4cee34f21e0dc18437ed7d30d0.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T10:18:08.320

正确的术语不是回滚。回滚是当您插入某些内容并撤消您的事务时。如果数据已经存在，则不应插入数据。

您需要的是 DBSource 和 DBDestination 之间的查找转换。此查找应检查目标表上是否存在数据，如果不存在，则将其插入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:17:22.533

对于这种要求，您可以在表上使用[Insert TRIGGER](http://msdn.microsoft.com/en-us/library/ms189799.aspx) ，并且在插入数据时，如果要检查每条记录，可以检查表中是否存在数据

或者

在表中插入文件之前，您可以使用**if exists**语句，如果您只想检查记录是否存在或不喜欢这样的 SQL：[如果存在更新 Else 插入](http://blogs.msdn.com/b/miah/archive/2008/02/17/sql-if-exists-update-else-insert.aspx)

# postgresql - 使用用户定义的事件将实时传感器数据记录到 RDBMS

> ID：10313617
> 
> 赞同：2
> 
> 时间：2012-04-25T10:13:47.540
> 
> 标签：postgresql, rdbms, sensors

我有一个由两个主要组件组成的系统，传感器和触发器。

系统负责记录传感器发送的信息，并向用户报告某些触发器激活或不激活的时间。

关于传感器的一些信息：

*   所有传感器记录相同的字段集
*   传感器发送记录时带有记录时间的时间戳

触发器：

*   触发器是用户定义的
*   输入只是一个传感器的一个读数（即，不是随着时间的推移或多个传感器的读数）
*   只有活动/非活动状态

传感器以多对多的方式分配给触发器。

我遇到的问题与跟踪触发器“何时”激活或不活动有关。

例如，对于触发器检查值 > 1

```
sensor_id | reading             | value | trigger_value
1           2011-04-25T20:09:00   0       false
1           2011-04-25T20:11:00   1       false
1           2011-04-25T20:13:00   4       true
1           2011-04-25T20:15:00   5       true
1           2011-04-25T20:17:00   3       true
1           2011-04-25T20:19:00   6       true
1           2011-04-25T20:21:00   1       false 
```

它可能会返回：

```
sensor_id | reading             | event
1           2011-04-25T20:13:00   1 -- 'went active'
1           2011-04-25T20:21:00   0 -- 'went in-active' 
```

我目前的方法涉及记录每个传感器的一组触发器的当前状态。当传感器的下一个输入进入并评估触发器时，它会将其与该传感器的当前触发器状态列表进行比较。对于状态的每次变化，都会记录“激活”或“去激活”。

这种方法非常简单，但它会生成有关数据库中“已经存在”的状态更改的数据；但是数据不在单个元组中，它位于元组之间的关系中（在同一个表中）。

所以，问题是：

我是否因为数据“已经存在”而改变我的方法？通过更改架构以减少对元组之间关系的依赖，或创建视图/存储过程以根据请求对其进行分析

或者

我是否继续使用这个系统，因为它解决了问题并隐藏了同一个表中的元组之间存在时间关系的事实（我知道这很糟糕）。

以更一般的形式：

您如何在表中存储基于时间的统计数据/数据，并分析连续统计数据之间的差异，而不会混淆 RDBMS。

当前实现结构示例：

```
-- log incoming sensor data, keyed by sensor and when it was recorded
create table sensor_log (
  sensor_id integer references sensors (sensor_id),
  reading timestamp,
  data_point_a integer NOT NULL, -- example name only
  data_point_b integer NOT NULL,
  -- ...  various other data points
  primary key(sensor_id, reading)
);
-- data storage for trigger configuration
create table triggers (
  trigger_id integer,
  -- ...  configuration for the triggers
  primary key(trigger_id)
);
-- associate triggers with particular sensors on a many to many basis
create table sensor_triggers (
  sensor_id integer references sensors (sensor_id),
  trigger_id integer references triggers (trigger_id),
  -- ...  configuration for the triggers
  primary key(sensor_id, trigger_id)
);
-- record which triggers were active for a particular sensor input
-- not necessary, unless to save on recomputing past trigger activations
create table sensor_trigger_activations (
  sensor_id integer,
  reading timestamp,
  trigger_id integer references triggers (trigger_id),
  primary key (sensor_id, reading, trigger_id),
  foreign key (sensor_id, reading) references sensor_log (sensor_id, reading)
);
-- record trigger 'activations' & 'deactivations'
-- activation: active state preceded by in-active state (for a particular trigger)
-- deactivation: in-active state preceded by an active state ""
-- absense
create table sensor_trigger_events (
  sensor_id integer,
  reading timestamp,
  trigger_id integer,
  event_type smallint CHECK (event_type = 0 OR event_type = 1), -- 0 = deactivation, 1 = activation
  primary_key (sensor_id, reading, trigger_id),
  foreign key (sensor_id, reading) references sensor_log (sensor_id, reading)
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:32:50.137

首先，我认为同一张表中元组之间的时间关系不一定是坏的。它不是真正直接的，所以隐藏它是可以的。

鉴于您的一组要求，我真的看不出有多少可以改进的地方。

# asp.net - 如何将图像从任何格式转换为 JPG 格式？

> ID：10313626
> 
> 赞同：0
> 
> 时间：2012-04-25T10:14:19.903
> 
> 标签：asp.net, image

我尝试使用[ImageFormat 类](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.imageformat.aspx)将 png 格式的图像转换为 JPG 格式。然后我们尝试使用另一个验证图像的工具来验证图像，发现只是扩展名发生了变化，但格式仍然是 PNG。

我们如何将给定的 iamge 转换为 JPG 格式？我们在使用 write 类吗？我们需要调用哪些方法。请提供详细信息。

我也喜欢在这种情况下讨论[ImageMagic的功能。](http://imagemagick.codeplex.com/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T10:21:53.433

您需要将图像重新保存为 .JPG 格式。

您可以使用 System.Drawing 命名空间来执行此操作。看看这里，看看这是否能完成这项工作[http://msdn.microsoft.com/en-us/library/twss4wb0(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/twss4wb0(v=vs.90).aspx)

```
class Program
{
    static void Main(string[] args)
    {
        // Load the image.
        System.Drawing.Image image1 = System.Drawing.Image.FromFile(@"C:\test.bmp");

        // Save the image in JPEG format.
        image1.Save(@"C:\test.jpg", System.Drawing.Imaging.ImageFormat.Jpeg);

        // Save the image in GIF format.
        image1.Save(@"C:\test.gif", System.Drawing.Imaging.ImageFormat.Gif);

        // Save the image in PNG format.
        image1.Save(@"C:\test.png", System.Drawing.Imaging.ImageFormat.Png);        
    }
} 
```

# java - 对 ArrayList 进行分页

> ID：10313627
> 
> 赞同：1
> 
> 时间：2012-04-25T10:14:22.453
> 
> 标签：java, arraylist, pagination

我正在尝试为保存在`ArrayList`. 基本上我想做的是首先渲染前五个元素`ArrayList`。然后当用户点击`Next (increment by another 5)`和`Previous (decrease by 5)`。

我的逻辑是这样的：

```
class foo
{
   private static final int defaultStep = 5;
   private int moveCounter;
   private List<String> values;

   public foo()
   {
     values = new ArrayList<String>();
     values.add("Fiber Channel");
     values.add("Copper Channel");
     ...
   }

  private void pageNext()
  {
   if (moveCounter > -1 && moveCounter < values.size())
   {
    int currentIndex = (moveCounter + 1);
    renderValues(currentIndex, false);
   }
  }

  private void pagePrevious()
  {
   if (moveCounter > -1 && moveCounter <= values.size())
   {
    renderValues(moveCounter-1, true);
   }
  }

 private void renderValues(int startIndex, boolean isPreviousCall)
 {
  if (startIndex > -1)
  {
   StringBuilder html = new StringBuilder();
   List<String> valuesToRender = new ArrayList<String>();
   int checkSteps = 1;
   while (startIndex < values.size())
   {
     valuesToRender.add(values.get(startIndex));
     if (checkSteps == defaultStep) break;
     startIndex++;
     checkSteps++;
   }
   moveCounter = startIndex;

   //TODO: Build html String
   ...
   }
 }
} 
```

我有一个`pagePrevious`电话问题，你们能帮我在添加要渲染到数组的值之前建立`valuesToRender` **5 个步骤吗？**`values array``valuesToRender`

我也尝试做这样的事情：

```
 for (int start = startIndex, end = values.size() - 1; start < end; start++, end--)
  {
    if (isPreviousCall) valuesToRender.add(values.get(end));
    else valuesToRender.add(values.get(start));

    if (checkSteps == defaultStep) break;
    checkSteps++;
  } 
```

但这似乎也不起作用。你们能发现并帮助我解决这个问题。多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-31T12:56:10.523

基于[这里的“pscuderi”解决方案，](https://stackoverflow.com/a/22947052/1124409) 我构建了一个包装类，对寻找这个的人有帮助：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class PaginatedList<T> {

private static final int DEFAULT_PAGE_SIZE = 10;

private List<T> list;
private List<List<T>> listOfPages;
private int pageSize = DEFAULT_PAGE_SIZE;
private int currentPage = 0;

public PaginatedList(List<T> list) {
    this.list = list;
    initPages();
}

public PaginatedList(List<T> list, int pageSize) {
    this.list = list;
    this.pageSize = pageSize;
    initPages();
}

public List<T> getPage(int pageNumber) {
    if (listOfPages == null || 
        pageNumber > listOfPages.size() ||
        pageNumber < 1) {
        return Collections.emptyList();
    }

    currentPage = pageNumber;
    List<T> page = listOfPages.get(--pageNumber);
    return page;
}

public int numberOfPages() {
    if (listOfPages == null) {
        return 0;
    }

    return listOfPages.size();
}

public List<T> nextPage() {
    List<T> page = getPage(++currentPage);
    return page;
}

public List<T> previousPage() {
    List<T> page = getPage(--currentPage);
    return page;
}

public void initPages() {
    if (list == null || listOfPages != null) {
        return;
    }

    if (pageSize <= 0 || pageSize > list.size()) {
        pageSize = list.size();
    }

    int numOfPages = (int) Math.ceil((double) list.size() / (double) pageSize);
    listOfPages = new ArrayList<List<T>>(numOfPages);
    for (int pageNum = 0; pageNum < numOfPages;) {
        int from = pageNum * pageSize;
        int to = Math.min(++pageNum * pageSize, list.size());
        listOfPages.add(list.subList(from, to));
    }
}

public static void main(String[] args) {
    List<Integer> list = new ArrayList<Integer>();
    for (int i = 1; i <= 62; i++) {
        list.add(i);
    }

    PaginatedList<Integer> paginatedList = new PaginatedList<Integer>(list);
    while (true) {
        List<Integer> page = paginatedList.nextPage();
        if (page == null || page.isEmpty()) {
            break;
        }

        for (Integer value : page) {
            System.out.println(value);
        }

        System.out.println("------------");
    }
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:29:27.187

改变

```
if (moveCounter > -1 && moveCounter <= archive.size())
{
  renderValues(moveCounter-1, true);
} 
```

至

```
if (moveCounter > 0 && moveCounter <= archive.size())
{
  renderValues(moveCounter-1, true);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T11:03:15.420

我会这样做：

我不确定 renderValues 做了什么，以及我们是否必须从 moveCounter 的上限减去 1 或 defaultStep。

```
private void pageMove (int step)
{
    moveCounter = moveCounter + step;
    if (moveCounter < 0) moveCounter = 0;
    if (moveCounter > values.size ()) moveCounter = values.size ();
    renderValues (currentIndex, false);
}

private void pageNext ()
{
    pageMove (defaultStep);
}

private void pagePrevious ()
{
    pageMove (-defaultStep);
} 
```

前 3 行可以打包成两个大的三元表达式，如下所示：

```
mc = ((mc + s) < 0) ? 0 : ((mc + s) > vs) ? vs : (mc + s); 
```

但最好遵循 3 行解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-18T10:17:29.907

这是一个用于分页的简单java函数。请注意，`page`从 0 开始（第一页）

```
public List<Object> pagedResponse(List<Object> allItems, int page, int limit){
    int totalItems = allItems.size();
    int fromIndex = page*limit;
    int toIndex = fromIndex+limit;
    if(fromIndex <= totalItems) {
        if(toIndex > totalItems){
            toIndex = totalItems;
        }
        return allItems.subList(fromIndex, toIndex);
    }else {
        return Collections.emptyList();
    }
} 
```

# jquery - 这个界面元素的名称是什么？指示幻灯片/页面的位置

> ID：10313633
> 
> 赞同：3
> 
> 时间：2012-04-25T10:14:46.473
> 
> 标签：jquery, .net, html, ios, user-interface

我正在构建一个用户界面，并使用“点”来指示有多少元素。它们可用于导航，但这是可选的。我想描述一下这个元素，但是我不知道这种类型的元素是如何被调用的。“点或子弹”听起来很奇怪，它不仅仅是“导航”。

我已经包含了这种类型的用户界面元素的一些示例（在其他应用程序中）。这是一个轮播： ![这个轮播中的点](../Images/5ad15eb5d19c6bb850848bd503b9bbfa.png)

这是 iPad 上的杂志应用程序：

![这个 iPad 应用程序中的点](../Images/da24268ce3c3d753b81b42d88d567e41.png)

另一个应用程序（移动网站？）

![在此处输入图像描述](../Images/5bcf5c3e0ffbe2a5920c3586df7c9578.png)

**这个元素怎么称呼？**我正在为技术设计文档/其他文档寻找正确的名称。我正在用 JavaScript 编写它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T10:19:16.057

一般来说，它被称为分页指示器。每个平台都有自己的名称。

老实说，它甚至不是真正的图案，只是许多图案中用于表示少量页面的常见图像。

您最好专注于您打算显示的数据。它是一本书的页面、演示文稿的幻灯片、操作选项卡等。然后弄清楚如何显示它并以某种方式集成分页指示器。

考虑需要显示的最大信息：

*   您需要显示超过 10 个吗？- 这个寻呼机不合适
*   用户现在需要知道他在哪个页面上吗？- 用数字交换当前页面图标？
*   用户是否需要能够按下图标才能转到页面？- 那么带有数字的按钮会更好。

有许多不同的方式来显示分页：[http ://www.smashingmagazine.com/2007/11/16/pagination-gallery-examples-and-good-practices/](http://www.smashingmagazine.com/2007/11/16/pagination-gallery-examples-and-good-practices/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:16:45.013

在 iOS 中，它是一个[UIPageControl](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPageControl_Class/Reference/Reference.html)。这是iOS的[教程](http://cocoawithlove.com/2009/01/multiple-virtual-pages-in-uiscrollview.html)。

更具体地说，我会说“点”只是“当前页面”指标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T10:19:51.503

*寻呼机*是一回事。我见过它的一个例子是在[jQuery 循环插件](http://jquery.malsup.com/cycle/options.html)中。

# java - JMock：方法的意外调用

> ID：10313635
> 
> 赞同：1
> 
> 时间：2012-04-25T10:14:52.187
> 
> 标签：java, junit

我尝试搜索论坛，但找不到任何适合我的问题的解决方案。

我的代码是：

```
public class ClassTest {

    /** The context. */
    private Mockery context = new Mockery();

    /** The mapper service. */
    private MapperService mapperService;

    @Before
    public void init() {
        mapperService = context.mock(MapperService.class);
    }

    @Test
    public void testUpdateRequestStatusToSuccessful()
    {
        final RequestQueue inRequestQueue = new RequestQueue();
        final String finalOutputZipFileName = "abc.txt";
        final Mapper mapperEntityObj = new Mapper();
        mapperEntityObj.setAutoMarkSuccessful(true);
        mapperEntityObj.setMarkRecordsAsExported(true);

        MapperTypeReference mapperType=new MapperTypeReference();
        mapperType.setCode("C");
        mapperEntityObj.setMapperType(mapperType);

        DataSetTypeReference datasetType=new DataSetTypeReference();
        datasetType.setCode("TA");
        mapperEntityObj.setDataSet(datasetType);

        inRequestQueue.setRowCount(15);
        inRequestQueue.setId(25128002L);

        context.checking(new Expectations() {
        {
            allowing(referenceDataService).retrieveReferenceCodeByCode(RequestStatus.class, "L");
            will(returnValue(new RequestStatus()));

            allowing(referenceDataService).retrieveReferenceCodeByCode(RequestStatus.class, "N");
            will(returnValue(new RequestStatus()));

            allowing(requestQueueDao).persist(with(any(RequestQueue.class)));

            one(mapperService).persist(mapperEntityObj);

            allowing(referenceDataService).retrieveReferenceCodeByCode(RequestStatus.class, "A");
            will(returnValue(new RequestStatus()));

        }
    });

    // Row count > 0; MarkRecordsAsExported(true)
    deuDataAccessServiceImpl.updateRequestStatusToSuccessful(inRequestQueue, finalOutputZipFileName, mapperEntityObj);
} 
```

我的服务类代码是

```
protected void updateRequestStatusToSuccessful(RequestQueue inRequestQueue,
        String finalOutputZipFileName, Mapper mapperEntityObj) {

    boolean mapperChanged = false;

    logger.info("updateRequestStatusToSuccessful(" + 
            "inRequestQueue, finalOutputZipFileName, mapperEntityObj) - begin");
    int rowCount=inRequestQueue.getRowCount();

    RequestStatus requestStatusToSet = null;

    logger.info("updateRequestStatusToSuccessful(" + 
            "inRequestQueue, finalOutputZipFileName, mapperEntityObj) - requestQueue: " + inRequestQueue);

    // Added to change the status of the request
    Boolean autoMarkSuccessful = mapperEntityObj.getAutoMarkSuccessful();
    Boolean markRecordsAsExported = mapperEntityObj.getMarkRecordsAsExported();
    if(rowCount==0){
        logger.info("No data found from dataSetKeys: Will set RequestStatus to No data found");
        requestStatusToSet = referenceDataService
                                                .retrieveReferenceCodeByCode(RequestStatus.class,
                                                RequestStatusEnum.NODATAFOUND.getCode());
        if(markRecordsAsExported){
            // Unlocking a mapper and setting the lastSuccessfulEndDate if successful
            mapperEntityObj.setIsLocked(false);
            mapperChanged = true;
        }
    }else if(markRecordsAsExported){
        logger.info("Mark transactions as exported enabled: Will set RequestStatus based on autoMarkSuccesful");
        if(autoMarkSuccessful){
            logger.info("autoMarkSuccesful enabled: Will set RequestStatus to Successful");
            requestStatusToSet = referenceDataService
                                                    .retrieveReferenceCodeByCode(RequestStatus.class,
                                                    RequestStatusEnum.SUCCESSFUL.getCode());
        } else {
            logger.info("autoMarkSuccesful disabled: Will set RequestStatus to Awaiting");
            requestStatusToSet = referenceDataService
                                                    .retrieveReferenceCodeByCode(RequestStatus.class,
                                                    RequestStatusEnum.AWAITING.getCode());
        }
    } else {
        logger.info("Mark transactions as exported disabled: Will set RequestStatus to Successful");
        requestStatusToSet = referenceDataService
                                            .retrieveReferenceCodeByCode(RequestStatus.class,
                                            RequestStatusEnum.SUCCESSFUL.getCode());
    }

    logger.info("Setting requestQueueStatus to : " + requestStatusToSet.getCode());
    inRequestQueue.setRequestStatus(requestStatusToSet);

    if (finalOutputZipFileName != null) {
        inRequestQueue.setOutputFilePathText(finalOutputZipFileName);
    }

    Date currentTimeStamp = Calendar.getInstance().getTime();
    // Values to set RequestQueueStartedTimestamp
    inRequestQueue.setCompletedTimestamp(currentTimeStamp);

    // Request queue object to persist
    logger.info("updateRequestStatusToSuccessful(" + 
            "inRequestQueue, finalOutputZipFileName, mapperEntityObj) - requestQueue: " + inRequestQueue);
    requestQueueDao.persist(inRequestQueue);
    // End of added to change the status
    logger.info("updateRequestStatusToSuccessful(" + 
            "inRequestQueue, finalOutputZipFileName, mapperEntityObj) - end");

    // PRD296 - FAST DEU
    logger.info("Before check to set mapper last successful end date.");
    if (((MapperTypesEnum.CUSTOMMAPPER.getCode().equals(mapperEntityObj.getMapperType().getCode()) 
            && DeuUtil.isTransactionBasedMapper(mapperEntityObj.getDataSet().getCode())) 
            || MapperTypesEnum.FLEXMAPPER.getCode().equals(mapperEntityObj.getMapperType().getCode()))
            && (autoMarkSuccessful || !markRecordsAsExported)
        ){
        logger.info("Set Last Successful end date: Copied Over Mapper End Date [" + mapperEntityObj.getMapperEndDate() + "]");  
        mapperEntityObj.setLastSuccessfulEndDate(mapperEntityObj.getMapperEndDate());
        mapperChanged = true;
    }
    else {
        logger.info("Mapper last successful end date not set: Mapper end date = " + mapperEntityObj.getMapperEndDate() 
                + ", Mapper type = " + mapperEntityObj.getMapperType().getCode() 
                + ", Mapper dataset code = "+ mapperEntityObj.getDataSet().getCode()
                + ", Is transaction based mapper = "
                + DeuUtil.isTransactionBasedMapper(mapperEntityObj.getDataSet().getCode()));
    }

    // Optimization
    if(mapperChanged){
        mapperService.persist(mapperEntityObj);
    }
} 
```

但我仍然意外调用 mapperService.persists。

谁能帮我吗？

# primefaces - 在 Primefaces 中组合条形图和折线图

> ID：10313636
> 
> 赞同：1
> 
> 时间：2012-04-25T10:14:54.390
> 
> 标签：primefaces

是否可以将条形图和折线图组合成一个图表？

（折线图在条形图上方）

我正在使用 Primefaces 3.2、JDK 1.6 和 Tomcat 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:52:25.250

我认为 Primefaces 不可能：[Combining Bar and Line chart in Primefaces](http://forum.primefaces.org/viewtopic.php?f=3&t=20244)

顺便说一句，它还没有出现（我不知道它是否会......）但它似乎是你正在寻找的确切的附加库......（结合primefaces [）](http://code.google.com/p/plotfaces/)

**请注意：**

你总是可以自己做，看看这个答案，它是使用外部图表库的[一般方法在 JSF 中使用图表的一般方法](https://stackoverflow.com/questions/9879281/jsf-highcharts-and-js/9886212#9886212)，但它需要一些 jquery/json 技能

# mysql - MySQL .NET 连接器不支持复杂查询？

> ID：10313637
> 
> 赞同：0
> 
> 时间：2012-04-25T10:15:00.577
> 
> 标签：mysql, mysql-connector

我有一张带有房地产清单的桌子。每个列表都链接到一个房地产经纪人。当代理离开公司时，他的列表必须使用最后更新的数据作为排序标准重新分配给活跃的代理。

经过一些文档搜索后，我设法获得了一个单行 MySQL 命令，该命令在从 MySQL GUI 执行时运行良好（我使用的是 Navicat MySQL）：

```
UPDATE listings, (SELECT @rownum:=@rownum+1 As rownum, x.id FROM (SELECT @rownum:=0) as r, listings as x) as t SET listings.agentid = ELT(MOD(t.rownum+1,4)+1,1007,1015,1011,1010) WHERE listings.id = t.id AND listings.agentid = 1014 
```

在上面的示例中：1014 是离开代理的 id，1007,1015,1011,1010 是剩余代理的 id

当使用 Visual Basic .NET 2 Framework 应用程序通过 MySQL .NET 连接器 6.5.4（最后一个）执行此查询时`ExecuteNonQuery`，会触发一个没有描述的致命错误。

我有两个问题：

1.  支持此类命令的 MySQL .NET 连接器是否存在问题？
2.  我的问题的任何可能的解决方法......也许是一个更好的查询......（我对移动到应用程序级别的想法不满意）？

# java - 错误的网址格式？页面不会在tomcat中打开

> ID：10313640
> 
> 赞同：0
> 
> 时间：2012-04-25T10:15:30.777
> 
> 标签：java, spring, hibernate, url

我正在创建的 spring/hibernate Web 应用程序正在正确构建和部署，但是在尝试访问 WEB-INF/jsp 文件夹中的 jsp 页面时遇到了一些问题。我放置在 WebContent 文件夹中的测试 jsp 页面正确打开。

这是我的代码：

新客户.jsp

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Insert title here</title>
</head>
<body>

    <h1>Create New Customer</h1>

    <c:url var="saveUrl" value="/mis/start/newcustomer" />
    <form:form modelAttribute="customerAttribute" method="POST" action="${saveUrl}">
        <table>
            <tr>
                <td><form:label path="customerTargetId">Customer Target ID:</form:label></td>
                <td><form:input path="customerTargetId"/></td>
            </tr>

            <tr>
                <td><form:label path="customerName">Customer Name</form:label></td>
                <td><form:input path="customerName"/></td>
            </tr>

            <tr>
                <td><form:label path="customerCountry">Customer Country</form:label></td>
                <td><form:input path="customerCountry"/></td>
            </tr>
        </table>

        <input type="submit" value="Save" />
    </form:form>

</body>
</html> 
```

启动.jsp

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
<h1>Test</h1>

<c:url var="addUrl" value="/mis/start/newcustomer" />
<p><a href="${addUrl}">Create new customer</a></p>
</body>
</html> 
```

客户控制器

```
package testapp.mis.controller;

@Controller
@RequestMapping("/start")
public class CustomerController {

@Resource(name="customerService")
private CustomerService customerService;

@RequestMapping(value="/newcustomer", method=RequestMethod.GET)
public String getCustomer(Model model) {

    model.addAttribute("customerAttribute", new Customer());

    return "new-customer";
}

@RequestMapping(value="/newcustomer", method=RequestMethod.POST)
public String postCustomer(@ModelAttribute("customerAttribute") Customer customer) {
    customerService.createCustomer(customer);

    return "redirect:/mis/start";
}
} 
```

web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
      <web-app id="WebApp_ID" version="2.4" 
     xmlns="http://java.sun.com/xml/ns/j2ee" 
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
     http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

     <servlet>
     <servlet-name>mis</servlet-name>
     <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
     <load-on-startup>1</load-on-startup>
     </servlet>

<servlet-mapping>
<servlet-name>mis</servlet-name>
<url-pattern>/mis/*</url-pattern>
</servlet-mapping>

    </web-app> 
```

例如，当我尝试访问[http://localhost/MIS/mis/start 时](http://localhost/MIS/mis/start)，它告诉我该页面不存在。（我已经尝试了 localhost/MIS/start、localhost/mis/start/newcustomer 等的所有组合。）

任何人都可以看到问题是什么？

如果您需要我的代码的其他部分来提供帮助，请告诉我。谢谢！

**编辑：**

添加其他配置文件：

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
  http://www.springframework.org/schema/context
  http://www.springframework.org/schema/context/spring-context-3.0.xsd
  http://www.springframework.org/schema/mvc
  http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<context:annotation-config />
<context:component-scan base-package="testapp.mis" />
<mvc:annotation-driven />
<import resource="hibernate-context.xml" />

</beans> 
```

休眠上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/tx
       http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.0.xsd
  ">

<context:property-placeholder location="/WEB-INF/spring.properties" />

<!-- Enables annotations for transaction management -->
<tx:annotation-driven transaction-manager="transactionManager" />

<!-- Declare the Hibernate SessionFactory for retrieving Hibernate sessions -->
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
    p:dataSource-ref="dataSource"
    p:configLocation="${hibernate.config}"
    p:packagesToScan="testapp.mis"/>

<!-- Declare a datasource that has pooling capabilities--> 
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
destroy-method="close"
p:driverClass="${app.jdbc.driverClassName}"
p:jdbcUrl="${app.jdbc.url}"
p:user="${app.jdbc.username}"
p:password="${app.jdbc.password}"
p:acquireIncrement="5"
p:idleConnectionTestPeriod="60"
p:maxPoolSize="100"
p:maxStatements="50"
p:minPoolSize="10" />

<!-- Declare a transaction manager-->
<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"
      p:sessionFactory-ref="sessionFactory" />

</beans> 
```

休眠.cfg.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>

<!-- We're using MySQL database so the dialect needs to MySQL as well-->
<property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
<!-- Enable this to see the SQL statements in the logs-->
<property name="show_sql">false</property>

<!-- Remove after testing -->

<!-- This will drop our existing database and re-create a new one.
  Existing data will be deleted! -->
<property name="hbm2ddl.auto">create</property>
</session-factory>
</hibernate-configuration> 
```

错误-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<!-- Declare a view resolver -->
<bean id="viewResolver"   class="org.springframework.web.servlet.view.InternalResourceViewResolver"
  p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" />

</beans> 
```

弹簧属性：

```
# database properties
app.jdbc.driverClassName=com.mysql.jdbc.Driver
app.jdbc.url=jdbc:mysql://localhost/test
app.jdbc.username=testapp
app.jdbc.password=testapp

#hibernate properties
hibernate.config=/WEB-INF/hibernate.cfg.xml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:33:29.183

Since I can't comment, I'll have to write my question as an answer (which it might be):

Do you have your spring.xml setup correctly? The controller needs to be picked up as a bean and as I remember, you need to tell Spring which packages to scan.

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:sws="http://www.springframework.org/schema/web-services"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/web-services http://www.springframework.org/schema/web-services/web-services-2.0.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config />
    <context:component-scan base-package="your.controller.package"/>
</beans> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:04:57.957

我最初认为它正在正确构建的假设是错误的，我的 java 文件没有放在正确的文件夹中。这导致 WEB-INF 下的类文件夹，tomcat 期望它们为空。这是正常工作的 ant 构建文件：

```
<?xml version="1.0"?>

<project name="Test" default="build" basedir=".">

    <!-- Configure the build properties file which contains properties to access the Manager application -->
    <property file="build.properties"/>

    <!-- Configure web directory -->
    <property name="web.dir" value="WebContent"/>

    <!-- Configure the directory into which the web application is built -->
    <property name="build.dir" value="${web.dir}/WEB-INF/classes"/>

    <!-- Configure source directory that contains the java code -->
    <property name="src.dir" value="src"/>

    <!--Configure the context path for the application -->
    <property name="path" value="/test"/>

    <!-- Add all the lib files inside the WebContent/WEB-INF/lib directory as well as the tomcat lib files to the classpath -->
    <path id="master-classpath">
        <fileset dir="${web.dir}/WEB-INF/lib">
            <include name="*.jar"/>
        </fileset>
        <fileset dir="${appserver.lib}">
            <!-- Apache Tomcat lib. ${appserver.lib} comes from the build.properties file -->
            <include name="servlet*.jar"/>
        </fileset>
        <pathelement path="${build.dir}"/>
    </path>

    <!-- Executable Targets -->
    <target name="init" description="Creates build directory">
        <mkdir dir="${build.dir}"/>
    </target>

    <target name="build" depends="init" description="Compiles the java files in the main source tree">
        <javac destdir="${build.dir}" debug="true" srcdir="${src.dir}">
            <classpath refid="master-classpath"/>
        </javac>
    </target>

    <target name="war" depends="build" description="Creates a war file in the tomcat directory">
        <war destfile="${appserver.home}/webapps/${path}.war" webxml="${web.dir}/WEB-INF/web.xml">
            <fileset dir="${web.dir}">
                <include name="**/*.*"/>
            </fileset>
        </war>
    </target>
</project> 
```

# java - 使用 JSON 传递对象和整数

> ID：10313641
> 
> 赞同：2
> 
> 时间：2012-04-25T10:15:33.377
> 
> 标签：java, json, rest, integer, jersey

我想将一个带有额外整数的对象传输到我的 Jersey-Service。

我的服务方法如下所示：

```
@POST
@Path("/test")
@Consumes("application/json")
public void test(Person pers, int number) 
```

体内的Json看起来像这样：

```
{
"name":"TEST",
"surname":"TEST",
"number":"1000"
} 
```

它可以在没有额外整数的情况下工作。

所以我认为它一定是错误的 JSON 消息？

**顺便说一句：**数字与对象无关，因此我无法将此 var 集成到 person 类中。

请问有人可以帮我吗？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:48:54.987

它不会像问题中出现的那样工作，因为 Jersey 不会序列化原始类型。检查以下帖子：[how-to-serialize-java-primitives-using-jersey-rest](https://stackoverflow.com/questions/2629544/how-to-serialize-java-primitives-using-jersey-rest)

它也不支持序列化原始类型的包装对象，在本例中为 Integer 对象。正如上面的帖子所提到的，您可以构建自己的类来包装 int 并具有适当的注释。

对于您在问题中给出的这种情况，我认为传递一个 String 然后解析它以获得 int 值就足够了：

```
@POST
@Path("/test")
@Consumes("application/json")
public void test(Person pers, String number){

    int x = Integer.parseInt(number);
    //rest of code here 
} 
```

# android - Android SMS Received Receiver 无法正常工作

> ID：10313653
> 
> 赞同：-1
> 
> 时间：2012-04-25T10:16:42.840
> 
> 标签：android, sms, broadcastreceiver

我已经创建了一个动态短信接收接收器，但它不工作需要你的帮助......我正在从我的一部手机上的端口号 24685 上发送短信，并在另一部手机上运行下面提到的代码，但不知道为什么我没有收到任何短信那个端口..为了您的信息，我在我的第一部手机上收到了交付报告，但我的接收器无法检测到该消息....

```
public class TestingSMSReceiverActivity extends Activity {
private Context context;
private MessageReceivedReceiver messageReceivedReceiver;
private String port="24685";
private short sendPort= 24685;
private TextView tv;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tv=(TextView) findViewById(R.id.tv);
    context=getApplicationContext();
    openReceiver();

}

public class MessageReceivedReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context arg0, Intent arg1) {
        showLog("MessageReceivedReceiver Message Received");
        Toast.makeText(context, "SMS Received", Toast.LENGTH_SHORT).show();

        try
        {
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                Bundle bundle = arg1.getExtras();
                SmsMessage[] msgs = null;
                if (bundle != null)
                {
                    //---retrieve the SMS message received---
                    Object[] pdus = (Object[]) bundle.get("pdus");
                    msgs = new SmsMessage[pdus.length];            
                    for (int i=0; i<msgs.length; i++)
                    {
                        msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                        byte[] data = msgs[i].getUserData();
                        String receivedTextMessage=new String(data);
                        Toast.makeText(context, ""+msgs.length+" "+receivedTextMessage, Toast.LENGTH_SHORT).show();
                        processReceivedSMS(receivedTextMessage);
                    }
                }
                break;
            case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                showLog("RESULT_ERROR_GENERIC_FAILURE");
                break;
            case SmsManager.RESULT_ERROR_NO_SERVICE:
                showLog("RESULT_ERROR_NO_SERVICE");
                break;
            }
        }
        catch(Exception e)
        {
             Toast.makeText(context, e.toString(), Toast.LENGTH_SHORT).show();
        }

    }
}// end of public class messageReceivedReceiver

private void openReceiver()
{
    try
    {
        showLog("Open Receiver");
        IntentFilter filter = new IntentFilter(); 
        filter.addDataScheme("sms");//Try commenting the same for text msg
        filter.addDataAuthority("localhost", port);
        filter.addAction("android.intent.action.DATA_SMS_RECEIVED");//Binary Msg
        if(messageReceivedReceiver==null){
            messageReceivedReceiver=new MessageReceivedReceiver();
            showLog("new MessageReceivedReceiver instance created");
        }
        context.registerReceiver(messageReceivedReceiver,
                filter);
    }
    catch(Exception e)
    {
        showLog("openReceiver "+e.toString());
    }
}
private void showLog(String string) {
    // TODO Auto-generated method stub
    Log.d("SMSReceiver", string);
}

private void processReceivedSMS(String receivedTextMessage)
{
    unregisterReceivers();
    showLog("SMS receivedTextMessage= "+receivedTextMessage);
    try
    {
        tv.append(receivedTextMessage);
        showLog("Received Message "+receivedTextMessage);
    }
    catch(Exception e)
    {
        showLog("processReceivedSMS "+e.toString());
    }
}//end of processReceivedSMS

private void unregisterReceivers() {
      try {
           if(messageReceivedReceiver!=null){
           context.unregisterReceiver(messageReceivedReceiver);
           showLog("Unregister Received Receiver");
           }
      } catch (Exception e) {
          showLog("unregisterReceivers "+e.toString());
      }
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:16:59.520

尝试以下链接以下两个问题的答案：

[BroadcastReceiver 作为内部类](https://stackoverflow.com/questions/4854807/broadcastreceiver-as-inner-class)

[以编程方式注册广播接收器](https://stackoverflow.com/questions/4805269/programmatically-register-a-broadcast-receiver)

# charts - Google 可视化 > 折线图 > 使网格线分步显示（而不是按计数）

> ID：10313656
> 
> 赞同：3
> 
> 时间：2012-04-25T10:16:46.123
> 
> 标签：charts, google-visualization

我做了一个简单的折线图：

![在此处输入图像描述](../Images/b90baae0ea57b52d463aa7c8a509e15e.png)

它在点 2、9、16、23 处显示 4 条网格线，这些网格线是使用以下代码生成的：

```
hAxis: {

  gridlines: {

    count: 4

  }

} 
```

通过使用上面的代码，无论数据增加或减少多少，它总是会显示 4 条网格线。

我可以以固定的步长间隔显示网格线吗？例如，在 5 点、10 点、15 点、20 点……等等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:39:59.707

在连续图表中，不，您不能设置步骤。（邪恶的谷歌）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T01:50:34.013

您可以通过根据您想要的步长计算计数来间接设置步数吗？

```
var theMax = 100;
var theMin = 0;
var stepsize = 20;

hAxis: {
  gridlines: {
    count: (theMax-theMin)/stepsize /* 100/20 = 5 steps */
  },
  minValue: theMin,
  maxValue: theMax
} 
```

# clojure - 是否可以在 arity 上重载 Clojure 多方法？

> ID：10313657
> 
> 赞同：20
> 
> 时间：2012-04-25T10:16:48.273
> 
> 标签：clojure, multimethod

例如，我有一些使用多方法的代码，理想情况下希望重载函数（在本例中为多功能），以便我可以传递更高阶的函数来帮助进行测试。

这是示例：

```
(ns multi)

(defn my-print [m] (println "The colour is" (:colour m)))

(defmulti which-colour-mm (fn [m f] (:colour m)))

(defmethod which-colour-mm :blue [m f] (f m))
(defmethod which-colour-mm :red [m f] (f m))
(defmethod which-colour-mm :default [m f] (println "Default: Neither Blue nor Red"))

(defn which-colour
  ([m] (which-colour-mm m my-print))
  ([m f] (which-colour-mm m f)))

(which-colour {:colour :blue :object :ball})
(which-colour {:colour :yellow :object :ball})
(which-colour {:colour :blue :animal :parrot} (fn [m] (println "The " (:animal m) "is" (:colour m)))) 
```

所以我的 defn 提供了 arity 重载，但我想知道 defmethod 是否支持这样的东西。（我猜你不想为每个 defmethod 声明都这样做。）

这是最合适的（我敢说，*惯用*的）方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T12:17:20.273

这很好。有库的“用户”界面和“类型”界面。它们可能相同，但不必相同。

“用户”界面在您的情况下`which-colour`。“类型”接口是`which-colour-mm`（好吧，不是真的，但只是为了论证）。您库的用户不需要了解多方法。

另一方面，提供新颜色的人 - 比如说`:purple`- 不必关心多参数样板。这是为他处理的`which-colour`。

这是一个完全有效的设计！

但当然有一个价格标签：假设你有一种颜色，它有一些更高效的方式来做事......现在，你被锁定在一个可能较慢的界面中。

稍微澄清一下：假设您有一个集合接口。您提供了一个功能 - `conj`- 允许用户将元素添加到集合中。它是这样实现的：

```
(defn conj
  [coll & elements]
  (reduce conj1 coll elements)) 
```

`conj1`是“类型”接口（例如，多方法或协议函数）：它将一个元素添加到集合中。因此，提供新集合类型的人只需实现添加单个参数的简单案例。并且自动地，新类型也将支持添加多个元素。

但是现在假设您有一个集合类型，它允许以一种比一个接一个地添加更快的方式添加多个元素。现在无法使用此功能。

所以你让多方法/协议函数成为函数`conj`本身。现在集合可以使用更快的方式。但是每个实现都必须提供多个元素样板。

这是一个权衡，取决于您的决定。没有正确的方式（tm）。两者都可以被认为是惯用的。（尽管我个人会尽可能多地尝试第一个。）

YMMV。

*编辑：*在调度值中没有编码的多参数方法示例。

```
(defmulti which-colour-mm (fn [m & args] (:colour m)))
(defmethod which-colour-mm :blue
  ([m] (print m))
  ([m f] (f m))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T12:25:22.103

您可以使用多种方法来做到这一点，如下例所示：

```
(defmulti which-colour-mm (fn [m & args] [(count args) (:colour m)]))
(defmethod which-colour-mm [0 :blue] [m] (print m))
(defmethod which-colour-mm [1 :blue] [m f] (f m))

user=> (which-colour-mm {:colour :blue :object :ball})
{:colour :blue, :object :ball}nil
user=> (which-colour-mm {:colour :blue :object :ball} print)
{:colour :blue, :object :ball}nil 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T23:57:41.373

基本上你可以派发任何东西，无论是类型还是参数的数量都不必是一致的..像这样：

```
(defn- map-classes [an-object]
     (let [cmap 
         {1 :thing
          2  666
          3  "yada"}
    the-class (class an-object)]
    (get cmap an-object the-class)))

(defn- mk-class [& args] (map #(map-classes %) args))
(defmulti play-thing mk-class )
(defmethod play-thing [:thing] [v] (= 1 v))
(defmethod play-thing [666] [v] (= 2 v))
(defmethod play-thing ["yada" String] [v x] (str x v)) 
```

可能性是无止境

# html - 我的 css 不能正常工作而不改变背景？

> ID：10313658
> 
> 赞同：0
> 
> 时间：2012-04-25T10:16:56.123
> 
> 标签：html, css, background-image

嗨，我正在尝试更改我创建的菜单的背景，但在正常情况下它没有使用背景中的图像，并且在鼠标悬停时我的代码是，

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />

<style type="text/css">

html{

font:12px Arial, Helvetica, sans-serif;

color:#333;

padding:0;

margin:0;}

.listmenu ul {

margin: 0 0 5px 0;

padding: 0 0 2px 0;

list-style-type: none;

width:185px;}

.listmenu li a {

color: #333;

display: block;

border-left:3px solid #666;

border-right:3px solid #666;

height: 16px;

padding: 4px 0 4px 14px;

text-decoration: none;

font-weight:bold;

background-image:  url('menu5.gif')}

.listmenu li a:hover {

background: url(images/bg.jpg) ;

color:#000000;}

</style>

<div class="listmenu">

<ul>

    <li><a href="#">General</a></li>

    <li><a href="#">Home</a></li>

    <li><a href="#">Maps</a></li>

    <li><a href="#">Add Location</a></li>

    <li><a href="#">Host</a></li>

    <li><a href="#">Services</a></li>

    <li><a href="#">Host Groups</a></li>

    <li><a href="#">Summary</a></li>

    <li><a href="#">Grid</a></li>

    <li><a href="#">Problems</a></li>

    <li><a href="#">Services(Unhandled)</a></li>

    <li><a href="#">Host(Unhandled)</a></li>

    <li><a href="#">Reports</a></li>

    <li><a href="#">Availability</a></li>

    <li><a href="#">Trends</a></li>

    <li><a href="#">Alerts</a></li>

    <li><a href="#">Notifications</a></li>

    <li><a href="#">Events Logs</a></li>

    <li><a href="#">Sysytem</a></li>

    <li><a href="#">Comments</a></li>

    <li><a href="#">Down time</a></li>

    <li><a href="#">Process info</a></li>

    <li><a href="#">Scheduling Queue</a></li>

    <li><a href="#">Configuration</a></li>

</ul>

</div> 
```

希望能尽快收到您的来信，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:19:31.593

1.  是背景网址
2.  是背景重复
3.  是背景位置

背景：url("images/menu5.gif") 不重复 0 0 ;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:19:07.177

应该是“背景图像”而不仅仅是“背景”。

“背景”是一种速记符号，它也需要位置信息。

```
.listmenu li a:hover {

    background-image: url('images/bg.jpg');

    color:#000000;} 
```

更新：显然我不正确。看起来您*可以*为`background`. 我测试过，这两种方法都适用于 Firefox 11.0 和 IE 9.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:23:00.517

可能是您的网址错误，因为

```
On normal state the URL is url('menu5.gif');

On hover state the URL is url('images/menu5.gif'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T10:24:59.313

我认为您没有提供**锚点和悬停**背景图像的确切路径，请提供它们的确切路径，而不是他们将完全按照您想要的方式调用。

请参阅演示，我已经给出了**锚点上背景图像的确切路径并将其悬停**在其工作正常：-

[http://jsbin.com/uzojaj/4/edit](http://jsbin.com/uzojaj/4/edit)

请检查您的**.listmenu li a** , . **listmenu li a:hover**为它提供正确的图像路径....

# c# - Youtube API - 403 Forbidden：简单的 Get 请求的开发人员密钥无效

> ID：10313659
> 
> 赞同：0
> 
> 时间：2012-04-25T10:16:57.350
> 
> 标签：c#, youtube-api, youtube.net-api

我刚从 Youtube API 开始，我面临着一些我无法解释的事情。基本上，我只需要从 Youtube 检索视频，我很确定您不需要为此进行身份验证（如果不需要，请告诉我）。在通过 API 文档之后，我有这个非常基本的请求：[http](http://gdata.youtube.com/feeds/api/videos?q=ted+talks&max-results=10&v=2) ://gdata.youtube.com/feeds/api/videos?q= ted+talks&max-results=10&v=2 （搜索“ted talk”并采取前 10 个）。

直接在浏览器中或通过 http 请求执行此请求，这证实了我的信念，即不需要为此进行身份验证。

但事情就是这样，我想使用 Google 提供的 .NET 客户端库来避免所有 XML 处理/反序列化，这是我的代码：

```
public string Test()
    {
        YouTubeRequestSettings settings = new YouTubeRequestSettings("Otello", String.Empty);
        YouTubeRequest request = new YouTubeRequest(settings);
        Feed<Video> feed = request.Get<Video>(new Uri("http://gdata.youtube.com/feeds/api/videos?q=ted+talks&max-results=10&v=2"));
        return feed.Entries.Count() + "";
    } 
```

此代码始终返回 403 Forbidden 错误（无效的开发人员密钥）。难道我做错了什么？我真的需要这种调用的开发人员密钥吗？如果我这样做了，我会尝试去那里[https://code.google.com/apis/youtube/dashboard/gwt/index.html#settings](https://code.google.com/apis/youtube/dashboard/gwt/index.html#settings)但我无法在下一页中添加新产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:33:05.183

我认为您不需要开发人员密钥。我测试了你的网址（使用[Json.Net](http://json.codeplex.com/)）如下，它有效

```
WebClient wc = new WebClient();
string resultStr = wc.DownloadString("http://gdata.youtube.com/feeds/api/videos?q=ted+talks&max-results=10&v=2&alt=jsonc");
dynamic result = JsonConvert.DeserializeObject(resultStr);
foreach (var item in result.data.items)
{
    Console.WriteLine("{0}: {1}",item.title,item.player["default"]);
} 
```

**PS：**我附加`&alt=jsonc`以将结果作为json。您可以将其删除并以 xml 格式获取结果。

# tomcat - 使用 cas 为 SSO 配置 tomcat

> ID：10313661
> 
> 赞同：0
> 
> 时间：2012-04-25T10:16:59.397
> 
> 标签：tomcat, single-sign-on, cas

我正在尝试为我的两个 grails 应用程序创建 SSO 登录。我管理这两个应用程序以重定向到 CAS 登录页面，但 SSO 不起作用。即使我已经使用其他应用程序登录，也会提示我登录页面。我尝试将此添加到 tomcat 的 server.xml

```
<Valve className="org.apache.catalina.authenticator.SingleSignOn" /> 
```

但仍然没有效果！我必须通过 CAS 登录页面登录这两个应用程序。我错过了什么。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T06:50:25.287

您可以利用 CAS 中的 gateway 参数，该参数被指定为 /login URI 的一部分。根据 CAS protocl，如果设置了该参数，CAS 将不会向客户端询问凭据。如果客户端与 CAS 有预先存在的单点登录会话，或者可以通过非交互方式（即信任身份验证）建立单点登录会话，则 CAS 可以将客户端重定向到“ service”参数，附加一个有效的服务票据。

请参阅此处了解更多信息： [http ://www.jasig.org/cas/protocol](http://www.jasig.org/cas/protocol)

# c++ - C++中回调函数有什么用？

> ID：10313663
> 
> 赞同：2
> 
> 时间：2012-04-25T10:17:03.060
> 
> 标签：c++, c, visual-c++, callback, asynccallback

> 嗨，我很想知道回调函数的用途是什么。任何人都可以用一个简单的例子来解释它。

在我的项目中，我观察到某个特定的回调函数突然被调用堆栈中的某个函数调用，该函数在调用堆栈中显示为 User.dll!546383c()。

我真的很困惑谁在调用此回调以及何时发生。

调用堆栈看起来不错，直到某个点（即函数 A() 调用 B() 调用 C() 等......）突然发生了一些事情，并且 User.dll 中的某些函数调用了这个回调。所以我失去了对功能的了解。

任何人都可以用一个例子来解释。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:31:17.427

> 嗨，我很想知道回调函数的用途是什么。任何人都可以用一个简单的例子来解释它。

关于这一点没有太多可说的。回调是一些库或系统代码让客户端/应用程序代码处理事件的机制。例如，您可能有一个与以下内容相关的回调：

*   某些计时器/警报到期
*   I/O 事件，例如从文件、网络、键盘/控制台等读取或写入的完成，甚至是程序读取或写入能力的更改（基于缓冲区大小限制），或新/丢失连接
*   完成一些异步处理（例如另一个线程做一些计算）
*   某些异步处理中的意外错误
*   引导处于特定状态的某个进程的机会（例如，决定是否接受特定客户端，之后调用者将断开连接或开始一些异步客户端处理）

为什么 user.dll 恰好给你一个回调——谁知道呢？你没有告诉我们任何关于你的程序或它在做什么的事情。

在逻辑级别上，回调实际上可能不会在您的线程中分派，直到您的线程检查（甚至可能阻塞等待）排队的消息，或者回调可能会中断您的线程正在执行的任何单独处理。当事件由 C++ 程序的其他部分创建时，前者很常见，后者常见于操作系统和硬件回调（例如 Linux/UNIX 上的“信号”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:34:59.553

简单地说，回调就像函数指针，用于配置一个函数以报告回（回调）应用程序中的另一个函数。例如，使用这种方法，可以处理诸如按钮单击、鼠标移动、菜单选择以及内存中两个实体之间的一般双向通信等事件。

因此触发回调的可能是用户输入或引发的任何其他通信事件。

# sql - 获取插入的行 ID

> ID：10313664
> 
> 赞同：0
> 
> 时间：2012-04-25T10:17:20.797
> 
> 标签：sql, sql-server-2005

我已经创建了表

```
create table AA(
    id int ,
    name varchar(20),
    sname varchar(20)
) 
```

现在我正在插入一个新值并获取插入的行 ID：

```
declare @InsID table (InId int)
insert into AA (name, sname)select 1, 'John', 'Rock'
output inserted.id into @output
Select * from @InsID 
```

但它向我显示错误：消息 102，级别 15，状态 1，第 3 行“插入”附近的语法不正确。有谁知道似乎是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:27:38.080

```
declare @InsID table (InId int)

insert into AA (name, sname)
output inserted.id into @InsID
select 'John', 'Rock'

Select * from @InsID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:21:52.403

假设表中的 ID 列定义为标识列，则：

```
SELECT SCOPE_IDENTITY() 
```

有关更多信息，请参阅本文：http: [//blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

如果您真的想使用该`OUTPUT`子句，则您的语法是错误的。输出必须紧跟在表格之后，在值之前：

```
declare @InsID table (InId int)

insert into AA (name, sname)
output inserted.id into @InsID 
select 'John', 'Rock'

Select * from @InsID 
```

有关每个示例，请参见[此处](http://www.sqlfiddle.com/#!3/ca8fa/2 "这里")

# java - 如何获取计算机时间而不是服务器 Java vaadin

> ID：10313668
> 
> 赞同：1
> 
> 时间：2012-04-25T10:17:26.417
> 
> 标签：java, jakarta-ee, vaadin, vaadin6

嘿，如何使用 vaadin 获取计算机的时间而不是服务器的时间，因为 getDate 将服务器的时间返回给我，但我想要客户端计算机的时间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T16:06:37.327

Vaadin 有一个名为 WebBrowser 的类，它提供有关客户端（浏览器）的有用信息：

您可以访问当前的 WebBrowser 实例，例如如下：

```
public class MyApplication extends Application {

    @Override
    public void init() {
        setMainWindow(new Window());

        ApplicationContext context = this.getContext();
        if (context instanceof WebApplicationContext) {
            WebBrowser webBrowser = ((WebApplicationContext) this.getContext()).getBrowser();

            Date now = webBrowser.getCurrentDate(); // Returns the current date and time on the browser
        }
    }
} 
```

有关 WebBrowser 类的更多信息，请参阅其[JavaDocs](https://vaadin.com/api/com/vaadin/terminal/gwt/server/WebBrowser.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:15:21.987

Vaadin 在服务器端运行，因此您在那里所做的一切都对应于服务器本身。对于您的问题，您可能可以创建一个 vaadin 小部件来获取客户端时间（-zone）并将其传递给服务器。

# java - pdf文档上注释的位置

> ID：10313671
> 
> 赞同：0
> 
> 时间：2012-04-25T10:17:42.430
> 
> 标签：java, pdf, pdf-generation, itext, pdf-annotations

我需要在现有的 pdf 上添加一些文本注释。我设法创建注释并显示它们。唯一的问题是，当在 Adob​​e Reader 中打开 pdf 文档时，注释的内容（如果它最大化）显示在页面的右侧。

是否可以将展开的注释的坐标设置为与图标相同？（我正在使用 itext 5 来​​操作 pdf）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:36:36.867

我不知道如何用 iText 做到这一点，但我可以告诉你它是如何在 PDF 格式内部工作的。

注释对象可以具有自定义与注释关联的弹出窗口的*Popup*属性。这个*Popup*属性也是一个注解对象，因此您可以像配置父注解一样配置它在页面上的位置。

来自[PDF 参考文档](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CDQQFjAB&url=http://partners.adobe.com/public/developer/en/pdf/PDFReference.pdf&ei=R1uZT5fvBaiI6AH26-nzBg&usg=AFQjCNHj0opL138bjrVRNI7cKXQXC2Xg4Q)：

**表 8.15 所有注释字典共有的条目**
**键：** *Rect*
**类型：** *矩形*
**值：（** *必需）注释矩形，以默认用户空间单位定义页面上注释的位置。*

PDF 中有不同类型的注释（文本、链接、自由文本、线条、方形等），但只有标记注释可以有弹出窗口，并且并非所有这些类型都被视为标记注释。如果您想知道哪些类型被视为标记注释，请查看PDF 参考文档的*表 8.20 注释类型*（第 8 章 - 注释，第 8.4.5 部分 - 注释类型）。

查看 iText 文档，我看到有一个名为[PdfAnnotation](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfAnnotation.html)的类，这可能是您用于创建新注释的类。此类包含一个名为[setPopup](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfAnnotation.html#setPopup%28com.itextpdf.text.pdf.PdfAnnotation%29)的方法。也许你可以试试这个方法。

# jasper-reports - 输出为空时如何隐藏文本字段？

> ID：10313672
> 
> 赞同：3
> 
> 时间：2012-04-25T10:17:45.993
> 
> 标签：jasper-reports

我的报告有问题。我用文本和参数编写输出。当我把参数。结果将显示文本和参数。但问题是当我没有输入参数时，结果仍然显示输出的文本字段。我正在用java做。我不知道有什么问题。

这是我的代码：

```
(($P{daterangefrom} != null) && ($P{daterangeto}!=null) ) ? 
" From ( " + $P{daterangefrom} + " - " + $P{daterangeto} + " )"
 : null 
```

任何人都知道我的公式有什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T11:13:31.927

您必须确保参数的值不为空。

[例如，您可以在Guava](http://code.google.com/p/guava-libraries/)库的帮助下进行检查。

样品：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ..>
    <import value="com.google.common.base.*"/>
    <parameter name="daterangefrom" class="java.lang.String"/>
    <parameter name="daterangeto" class="java.lang.String"/>

    <title>
        <band height="79" splitType="Stretch">
            <textField isBlankWhenNull="true">
                <reportElement x="185" y="12" width="100" height="20"  isRemoveLineWhenBlank="true"/>
                <textElement/>
                <textFieldExpression><![CDATA[(!Strings.isNullOrEmpty($P{daterangefrom}) &&
    !Strings.isNullOrEmpty($P{daterangeto})) ?
" From ( " + $P{daterangefrom} + " - " + $P{daterangeto} + " )"
 : null]]></textFieldExpression>
            </textField>
        </band>
    </title>
</jasperReport> 
```

不要忘记***`isRemoveLineWhenBlank`***和***`isBlankWhenNull`***textField 的属性。

# ios - 更改框架后水平UITableView不显示内容

> ID：10313674
> 
> 赞同：2
> 
> 时间：2012-04-25T10:18:04.123
> 
> 标签：ios, ipad, uitableview

我通过将 tableView 旋转 90 度创建了一个水平 UITableView。并添加到我的观点。

```
UITableView *myTableView = [[UITableView alloc] init];
myTableView.transform = CGAffineTransformMakeRotation(-1.5707);
[self addSubview:self.myTableView]; 
```

它正确显示内容并且工作正常（类似于 UIScrollView）。

我必须将 tableView 向右移动并减小其宽度以适应与滚动视图相邻的另一个视图（例如 secondView）。所以我将 tableView 的框架更改为：

```
self.myTableView.frame = CGRectMake(self.secondView.frame.size.width,
                                    self.myTableView.frame.origin.y,
                      self.myTableView.frame.size.width - self.secondView.frame.size.width,
                      self.myTableView.frame.size.height); 
```

tableView 的框架发生了变化，但没有显示其内容，即我看到空白单元格。无法弄清楚出了什么问题。

# telerik - 如何从外部程序集中加载皮肤

> ID：10313679
> 
> 赞同：0
> 
> 时间：2012-04-25T10:18:15.747
> 
> 标签：telerik, assemblies, external, skins

我正在尝试将一些自定义皮肤存储在 dll 中。并将使用它来为我的项目的 Telerik 控件设置主题。我按照[本指南](http://www.telerik.com/help/aspnet-ajax/introduction-skins-external-assembly.htm)进行操作，并且成功地从 dll 中获得了自定义皮肤以设置 radWindow 控件的主题。但是对于其他控件，我失败了，当我尝试对 radtabStrip 进行皮肤时，我收到此错误：

> ID='ctl00' 的 Telerik.Web.UI.RadTabStrip 无法找到名为“TelerikYouthful”的嵌入式皮肤。请确保皮肤名称拼写正确，并且您已在项目中添加了对 Telerik.Web.UI.Skins.dll 程序集的引用。如果要使用自定义皮肤，请设置 EnableEmbeddedSkins=false。

我不知道在指南中提到的这一行下面的第一个参数应该放什么

> [Telerik.Web.EmbeddedSkin("Window", "BlackAndRed", typeof(RadWindow))]

谁能告诉正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:17:16.573

创建自定义皮肤时，您需要做两部分：

1.  声明你将要使用的所有资源；
2.  注册皮肤。

如果你不熟悉嵌入式资源和/或网络资源，我建议你从以下文章开始：

1.  关于嵌入式资源的文章——http: [//www.codeproject.com/Articles/3089/Understanding-Embedded-Resources-in-Visual-Studio](http://www.codeproject.com/Articles/3089/Understanding-Embedded-Resources-in-Visual-Studio)
2.  关于网络资源的文章——http: [//www.codeproject.com/Articles/12997/WebResource-ASP-NET-2-0-explained](http://www.codeproject.com/Articles/12997/WebResource-ASP-NET-2-0-explained)

## 声明资源

现在我们在同一个页面上获取 Web 资源，让我们开始吧。

如文章中所述，完全限定的资源名称是**DefaultNameSpace。*[Path.To.File.]* .FileName**文件路径是可选的，例如，您可以将所有文件放在项目的根目录中。

您的皮肤装配项目的**默认命名空间**可从右键单击 -> 属性菜单中获得。

文件夹路径虽然是可选的，但很好用，因为它有助于在单个程序集中处理多个皮肤。假设您的皮肤名称是“TelerikYouthful”，那么您的项目根目录中应该有一个名为“TelerikYouthful”的文件夹。

在其中，您必须有一个名为“Window.TelerikYouthful.css”的文件。添加文件时，请确保设置正确的构建类型：右键单击 -> 属性，将构建类型设置为 Embedded Resource。

设置完这两个之后，就该声明资源了。同样，您可以使用单个文件，但我更喜欢使用单独的文件。在项目的根目录中，创建一个文件**RadWindow.Skins.cs**。

在其中添加以下行：

```
using System.Web.UI;

#region TelerikYouthful 
[assembly: WebResource("CustomSkinAssembly.TelerikYouthful.Window.TelerikYouthful.css", "text/css", PerformSubstitution = true)]
#endregion 
```

需要使用，因此您不必每次都编写 System.Web.UI.WebResource 。然后是完全限定的资源名称：我的默认命名空间是**CustomSkinAssembly**；我的路径是**TelerikYouthful**，文件名是**Window.TelerikYouthful.css**。

类型字符串很明显。

需要执行替换，以便您可以引用 CSS 文件中的 Web 资源。

您现在可以构建您的项目并使用 Reflector、JustDecompile、DotPeek 等工具检查输出 DLL，以检查文件是否确实嵌入。

## 注册皮肤

接下来，您需要注册皮肤。为此，您需要在默认命名空间中添加要设置外观的控件的类，并使用 EmbeddedSkin 属性注释该类，例如：

```
using System.Web.UI;
using Telerik.Web;

#region TelerikYouthful 
[assembly: WebResource("CustomSkinAssembly.TelerikYouthful.Window.TelerikYouthful.css", "text/css", PerformSubstitution = true)]
#endregion

namespace CustomSkinAssembly
{
    [EmbeddedSkin("Window", "TelerikYouthful", typeof(RadWindow))]
    public class RadWindow
    {
    }
} 
```

注意：我为 Telerik.Web 添加了一个 using，因此我们不会一直使用 Telerik.Web.EmbeddedSkin。

现在您可以构建项目并且应该可以使用皮肤了。

# ruby-on-rails - 用于多个文件的基于 HTML 5 的文件上传插件

> ID：10313684
> 
> 赞同：0
> 
> 时间：2012-04-25T10:18:29.030
> 
> 标签：ruby-on-rails, html, file-upload

任何人都有一个很好的建议，哪个“基于 html 5 的插件”最适合在 Ruby on Rails 应用程序中上传多个文件？有很多，但我只想要简单的文件上传、预览、删除和添加更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:21:10.313

我正在使用[jquery-file-upload](https://github.com/blueimp/jQuery-File-Upload)并且有 Rails 的说明。

但也有[plupload](http://www.plupload.com/)似乎相当不错。

# html - 试着在桌子上有圆角

> ID：10313687
> 
> 赞同：1
> 
> 时间：2012-04-25T10:18:41.890
> 
> 标签：html, css

我正在制作一张简单的桌子，我想要圆形边框。

这是我正在研究的小提琴：

[http://jsfiddle.net/KZxgV/3/](http://jsfiddle.net/KZxgV/3/)

我遇到的问题是单元格是圆形的，但不是周围的边界:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:32:57.907

嘿，我想你可以像这样在你的表中定义一个 div

现场演示[http://jsfiddle.net/KZxgV/14/](http://jsfiddle.net/KZxgV/14/)

# iphone - 如何在 textview 中查找位置或获取任何单词的 rect 并在其上放置按钮？

> ID：10313689
> 
> 赞同：15
> 
> 时间：2012-04-25T10:18:49.113
> 
> 标签：iphone, objective-c, position, character, uitextview

我正在开发一个故事应用程序。我们需要在哪里提供测验。现在我有一个故事，这个故事有一些空白或隐藏的单词。每当我点击那个隐藏的单词时，我都会得到 4 个选项来回答这个问题。我尝试将按钮放在单词上，但这只是在我使用一些静态位置时。我只是想知道如何获得该单词的框架，我需要将其隐藏，以便我可以在其上放置一些按钮并隐藏它。

您可以看到下面的图片。![在此处输入图像描述](../Images/bf40896e33d86673bfc6dd7edfb0b01b.png) 所有答案将不胜感激

解决方案：- 这将在 iOS 5 之后工作，但不能低于此！

```
- (CGRect)frameOfTextRange:(NSRange)range inTextView:(UITextView *)textView
{
    UITextPosition *beginning = textView.beginningOfDocument; 
    UITextPosition *start = [textView positionFromPosition:beginning offset:range.location];
    UITextPosition *end = [textView positionFromPosition:start offset:range.length];
    UITextRange *textRange = [textView textRangeFromPosition:start toPosition:end];
    CGRect rect = [textView firstRectForRange:textRange]; 
    return [textView convertRect:rect fromView:textView.textInputView];

} 
```

谢谢

再看一张图片以了解错误： ![在此处输入图像描述](../Images/4ca52524fbe701a252ebca16449665a2.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-25T11:24:37.680

`UITextView`采用`UITextInput`协议。该协议具有`-firstRectForRange:`告诉您覆盖一系列字符的矩形的方法。如果字符范围跨越多行，则必须重复调用它。第一次它会给你第一个矩形并告诉你覆盖的范围。然后，您将要询问的范围调整为您感兴趣的剩余字符并重复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T10:53:16.930

```
-(void)textViewDidChangeSelection:(UITextView *)textView
 {
  NSRange range = textView.selectedRange;
 if(range.location<textView.text.length)
  {
    NSString * firstHalfString = [txtView.text substringToIndex:range.location];

    NSString *temp = @"s";
    CGSize s1 = [temp sizeWithFont:[UIFont systemFontOfSize:15] 
                          constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  // - 40 For cell padding
                              lineBreakMode:UILineBreakModeWordWrap]; // enter you textview font size

    CGSize s = [firstHalfString sizeWithFont:[UIFont systemFontOfSize:15] 
                           constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  // - 40 For cell padding
                               lineBreakMode:UILineBreakModeWordWrap]; // enter you textview font size

    //Here is the frame of your word in text view.
    NSLog(@"xcoordinate=%f, ycoordinate =%f, width=%f,height=%f",s.width,s.height,s1.width,s1.height);

     CGRect rectforword = CGRectMake(s.width, s.height, s1.width, s1.height);
    // rectforword is rect of yourword

    }
    else
    {
        // Do what ever you want to do

     }   
} 
```

**>>>编辑...**

当您选择或点击 textview 文本时调用此方法，但您可以在任何 UITextView 方法中使用此`Delegate`方法

希望，这会帮助你......享受

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-25T14:07:55.213

继*Ken Thomases 的*回答之后，从 iOS 6 开始，`UITextInput`协议包括以下方法：

`- (NSArray *)selectionRectsForRange:(UITextRange *)range`

（[请参阅参考文档](https://developer.apple.com/library/ios/documentation/uikit/reference/UITextInput_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40009415-CH1-SW64)）。

结果是一个`UITextSelectionRect`s 数组，其中包含大量有关文本中选择范围的信息...根据您希望如何使用文本块的矩形，上述方法可能很有用。

（[UITextSelectionRect 参考](https://developer.apple.com/library/ios/documentation/uikit/reference/UITextSelectionRect_class/Reference/Reference.html)）。

**注意**：根据我的用法`UITextView`，返回的 s 数组`UITextSelectionRect`包含可能被解释为两个额外的选择矩形。这些是数组中的最后两个选择矩形，我假设它们对应于选择的*开始*和*结束*位置。这些选择矩形的宽度分别为`0`，并且`containsStart`/`containsEnd`属性也相应设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-10T08:18:02.013

> 在我的情况下，添加“layoutIfNeeded”有帮助。

```
 textView.superview?.layoutIfNeeded()
    let beginning = textView.beginningOfDocument
    let start = textView.position(from: beginning, offset: range.location)
    let end = textView.position(from: start!, offset: range.length)
    let textRange = textView.textRange(from: start!, to: end!)
    let frame = textView.firstRect(for: textRange!) 
```

# android - 我应该何时释放本机 (Android NDK) 句柄？

> ID：10313691
> 
> 赞同：0
> 
> 时间：2012-04-25T10:18:51.950
> 
> 标签：android, android-ndk, java-native-interface, native-code, resource-leak

我必须使用本机库（这不是我的决定）。该库已经有一个 JNI 包装器，并且示例 Android NDK 代码有效。但**库初始化例程返回本地句柄，开发人员需要正确关闭它们**。

现在，有一个有趣的问题：**从哪里调用 close_handle 例程？**

至少在理论上，每次不正确的终止都可能导致临时文件留在磁盘上的某处或某种其他类型的资源泄漏。

库初始化需要 0.5 到 1 秒，并且会消耗大量内存。

an`Activity`是一个控制器（MVC 意义上的），Android 可以因为自己的原因杀死它，包括转动设备，并且唯一保证被调用的函数是`onPause()`. 所以`onPause`/`onResume`对于长时间的资源消耗操作来说是一个不好的地方。

（我知道`android:configChanges="keyboardHidden|orientation"`，但我更喜欢不需要它的解决方案。）

`Application`将是一个理想的候选人（我认为库是模型的一部分），但没有“应用程序终止”事件。

`Service`听起来很有希望，本机库是*一项*服务，但我只是不明白如何才能获得所需的行为：当应用程序终止时必须关闭句柄。

超时：听起来像是一种权衡，但实际上它保证了内存在需要的那一刻不可用，但几秒钟后就会变得可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:33:08.600

现在，看起来我确实需要一个服务，但不完全是`IntentService`: `IntentService`calls `stopSelf()`，而我的服务应该挂起。

有趣的`Service.onDestroy()`是，当用户从“运行服务”中选择“停止”时调用，而不是当用户从“应用程序”中选择“强制停止”时调用。“停止调试”也不会导致`Service.onDestroy()`调用。

编辑：

我目前的解决方案是使用从自定义子类派生的`Service`类；`IntentService`该代码是从“网络”某处的来源借来的。**在派生的子类中，我重写`onDestroy()`**并相信这是可用的最佳应用程序终止通知。

```
package com.xyz.customandroid;

import android.app.Service;
import android.content.Intent;
import android.os.Handler;
import android.os.HandlerThread;
import android.os.IBinder;
import android.os.Looper;
import android.os.Message;

public abstract class HangAroundIntentService extends Service {
    /** An extra with this name and the value of boolean true marks an intent as a cancel intent. See {@link #markedAsCancelIntent(Intent)}. */
    private static final String CANCEL_MARK = "com.xyz~.customandroid.HangAroundIntentService.cancelQueue()";
    private static final int WHAT_MAGIC = 0; // the "what" field for messages
    private volatile Looper mServiceLooper;
    private volatile ServiceHandler mServiceHandler;
    private String mName;
    private boolean mRedelivery;
    private boolean mHangAround = true;

    private final class ServiceHandler extends Handler {
    public ServiceHandler(Looper looper) {
        super(looper);
    }

    @Override
    public void handleMessage(Message msg) {
        onHandleIntent((Intent)msg.obj);
        if (!mHangAround) {
            stopSelf(msg.arg1);
        }
    }
    }

    /**
     * Creates an IntentService.  Invoked by your subclass's constructor.
     *
     * @param name Used to name the worker thread, important only for debugging.
     */
    public HangAroundIntentService(String name) {
    super();
    mName = name;
    }

    /**
     * Remove all pending messages from the handler queue.
     * Processing of the message already fetched from the queue 
     * is not terminated by this function.
     *
     * Although this function is public, it is recommended 
     * to use the cancel intents instead.
     * see {@link #markedAsCancelIntent(Intent)} and {@link #isCancelIntent(Intent)}.
     */
    public void cancelQueue() {
        mServiceHandler.removeMessages(WHAT_MAGIC);
    }

    /**
     * Sets intent redelivery preferences.  Usually called from the constructor
     * with your preferred semantics.
     *
     * <p>If enabled is true,
     * {@link #onStartCommand(Intent, int, int)} will return
     * {@link Service#START_REDELIVER_INTENT}, so if this process dies before
     * {@link #onHandleIntent(Intent)} returns, the process will be restarted
     * and the intent redelivered.  If multiple Intents have been sent, only
     * the most recent one is guaranteed to be redelivered.
     *
     * <p>If enabled is false (the default),
     * {@link #onStartCommand(Intent, int, int)} will return
     * {@link Service#START_NOT_STICKY}, and if the process dies, the Intent
     * dies along with it.
     */
    public void setIntentRedelivery(boolean enabled) {
    mRedelivery = enabled;
    }

    /** 
     * If enabled is true (default), the service does not stop after processing an intent.
     */
    public void setServiceHangAround(boolean enabled) {
    mHangAround = enabled;
    }

    @Override
    public void onCreate() {
    // TODO: It would be nice to have an option to hold a partial wakelock
    // during processing, and to have a static startService(Context, Intent)
    // method that would launch the service & hand off a wakelock.

    super.onCreate();
    HandlerThread thread = new HandlerThread("IntentService[" + mName + "]");
    thread.start();

    mServiceLooper = thread.getLooper();
    mServiceHandler = new ServiceHandler(mServiceLooper);
    }

    /**
     * If intent is a cancel intent, {@link #cancelQueue()} is invoked immediately;
     * no other action is done for a cancel intent, whatever information it might contain.
     * 
     * Intents that are not cancel intents are queued 
     * to be seen from {@link #onHandleIntent(Intent)}.
     */
    @Override
    public void onStart(Intent intent, int startId) {
        if (isCancelIntent(intent)) {
            cancelQueue();
        } else {
        Message msg = mServiceHandler.obtainMessage(WHAT_MAGIC);
        msg.arg1 = startId;
        msg.obj = intent;
        mServiceHandler.sendMessage(msg);
        }
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
    onStart(intent, startId);
    return mRedelivery ? START_REDELIVER_INTENT : START_NOT_STICKY;
    }

    @Override
    public void onDestroy() {
    mServiceLooper.quit();
    }

    @Override
    public IBinder onBind(Intent intent) {
    return null;
    }

    /**
     * This method is invoked on the worker thread with a request to process.
     * Only one Intent is processed at a time, but the processing happens on a
     * worker thread that runs independently from other application logic.
     * So, if this code takes a long time, it will hold up other requests to
     * the same IntentService, but it will not hold up anything else.
     *
     * @param intent The value passed to {@link
     *               android.content.Context#startService(Intent)}.
     */
    protected abstract void onHandleIntent(Intent intent);

    /**
     * Mark an Intent as cancel intent. The Intent will not be placed in the queue;
     * instead, it will cause immediate cleaning of the queue
     * (unless you redefine {@link #onStart(Intent, int)} in a derived class).
     * @param intent to be modified
     * @return the original intent after modification
     */
    public static Intent markedAsCancelIntent(Intent intent) {
        intent.putExtra(CANCEL_MARK, true);
        return intent;
    }

    /**
     * Check if the intent has been marked as a cancel intent.
     * @param intent to be checked
     * @return true if it is a cancel intent
     */
    public static boolean isCancelIntent(Intent intent) {
        return intent.getBooleanExtra(CANCEL_MARK, false);
    }
} 
```

我的服务类定义为：

```
public class MyService extends HangAroundIntentService {
    public MyService() {
        super("MyService");
    }
    public void onDestroy() {
        MyData.getMyData().shutdown();
        super.onDestroy();
    }
    // service-specific static methods not shown
} 
```

*未完待续...*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:35:45.093

在实践中，事实证明某些原生库会泄漏资源；我必须重新启动进程（这并没有终止活动，而是重新创建了进程）：

[如何以编程方式“重启” android 应用程序？](https://stackoverflow.com/questions/6609414/howto-programatically-restart-android-app/13173279#13173279)

只能希望没有库泄漏临时磁盘文件...

# java - 基于 Java 文本的应用程序

> ID：10313693
> 
> 赞同：6
> 
> 时间：2012-04-25T10:19:02.170
> 
> 标签：java, swing, text, terminal, jtextcomponent

主要想法是尝试制作一个具有标准 Linux 类型终端外观和感觉的应用程序。现在我仅限于 Java，这就是我想要的。

1.  带有顶部菜单的主窗口（独立 JFrame）（好的，我知道该怎么做）
2.  菜单栏下方的整个区域都是“控制台”，用户可以通过输入命令进行交互（我对此一无所知）。

有没有简单的方法来做这样的事情。这应该是一个文本处理应用程序，应该独立于系统和独立运行。所有的工作逻辑都应该来自用户输入。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T11:23:12.477

我猜你需要两个文本组件，一个文本区域和一个文本字段。

如果用户在底部的文本字段中输入文本并点击`Enter`，则文本将移动到文本区域中，不再可编辑。然后进行处理，最终将一个结果（或多个）打印到文本区域，然后可以输入下一行。

上部区域可以有一个`JScrollPane`. 不知何故，必须处理缓冲。

这是一个简单、完整且可运行的示例：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.plaf.ActionMapUIResource;
/**
    CmdPrompt

    @author Stefan Wagner
    @date Mi 25\. Apr 17:27:19 CEST 2012
    (c) GPLv3
*/
public class CmdPrompt extends JFrame 
 {
    private static final String progname = "CmdPrompt 0.1";

    private JTextField input;
    private JTextArea history;

    public CmdPrompt ()
    {
        super (progname);
        JPanel mainpanel = new JPanel ();
        mainpanel.setLayout (new BorderLayout ());
        this.getContentPane ().add (mainpanel);

        input = new JTextField (80);
        history = new JTextArea ();
        mainpanel.add (history, BorderLayout.CENTER);
        mainpanel.add (input, BorderLayout.SOUTH);

        ActionMap actionMap = new ActionMapUIResource ();
        actionMap.put ("enter", new AbstractAction () {
            @Override
            public void actionPerformed (ActionEvent e) {
                String cmd = input.getText ();
                String sofar = history.getText ();
                history.setText (sofar + "\n> " + cmd + "\n"  + processCmd (cmd)); 
                input.setText ("");
            }
        });
        InputMap keyMap = new ComponentInputMap (input);
        keyMap.put (KeyStroke.getKeyStroke (KeyEvent.VK_ENTER, 0), "enter");

        SwingUtilities.replaceUIActionMap (input, actionMap);
        SwingUtilities.replaceUIInputMap  (input, JComponent.WHEN_IN_FOCUSED_WINDOW, keyMap);

        setSize (400, 400);
        setLocation (100, 100);
        setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        setVisible (true);          
    }

    private void center ()
    {
        Toolkit tk = Toolkit.getDefaultToolkit ();
        Dimension screen = tk.getScreenSize ();
        Dimension d = getSize ();
        setLocation ((screen.width - d.width) / 2, (screen.height - d.height) / 2);
    }
    public static String processCmd (String cmd) 
    {
        String arr [] = cmd.split (" "); 
        if ("rev".equals (arr [0])) {
            return reverse (cmd.substring (4)); 
        }
        else if ("upp".equals (arr [0])) {
            return (cmd.substring (4)).toUpperCase (); 
        }
        else if ("low".equals (arr [0])) {
            return (cmd.substring (4)).toLowerCase (); 
        }
        else if ("help".equals (arr [0])) {
            return ("rev, upp, low, help"); 
        }
        return "unknown command";
    }
    public static String reverse (String cmd) 
    {
        return (cmd.length () < 2) ? cmd : reverse (cmd.substring (1)) + cmd.charAt (0); 
    }

    public static void main (final String args [])
    {
        Runnable runner = new Runnable () 
        {
            public void run () 
            {
                new CmdPrompt ();
            }
        };
        EventQueue.invokeLater (runner);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T10:31:18.153

“控制台”可以使用[JTextPane](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextPane.html)来实现。只要窗口有焦点，您就可以将任何按键写入文本窗格并解析，只要按下“Enter”就执行（使用[KeyListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyListener.html)并实现`keyTyped`）。

# javascript - 页面视图不理想，没有出现 html，页面为空白

> ID：10313696
> 
> 赞同：2
> 
> 时间：2012-04-25T10:19:16.980
> 
> 标签：javascript, asp.net, html

上传文件后出现一个弹出窗口，

```
ClientScript.RegisterStartupScript (Me.GetType(), "Javascript", "javascript:
   window.open ('http://rsspl05/DocAdmin/confirmmsg.aspx?tdnum=" & TDnum &
   "','mywindow','width=800,height=400,location=no');", True) 
```

但我得到的弹出窗口是一个带有页面源的空白页面：

```
<!-- beginning of HttpRedirect.htm file -->

<script type="text/javascript">

function redirectToHttps()     
{     
  var httpURL = window.location.hostname+window.location.pathname;     
  var httpsURL = "https://" + httpURL ;     
  window.location = httpsURL ;     
}     
redirectToHttps();     
</script>

<!-- end of HttpRedirect.htm file --> 
```

实际的aspx代码是：

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="Confirmmsg.aspx.vb" Inherits="docadmin_Confirmmsg" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Technical Documents</title>

<link href="StyleSheet.css" rel="stylesheet" type="text/css" />    
    <script language="javascript" type="text/javascript">
function confirmmsg(val)
{
//    // alert(val + ' has been uploaded successfully.');
//    
     //if(confirm("Do you want to upload another document?")==true){
     //   window.location.href="UploadDoc.aspx";
     ///}else{
     // window.location.href="../Search.aspx";
    // } 
      self.close();
}

</script>
</head>
<body>
    <form id="form1" runat="server">
    <div style="text-align:center">
    The document has been successfully uploaded.The link to the document:<asp:HyperLink
            ID="lnkpath" runat="server" Target="_blank"  Visible="false">HyperLink</asp:HyperLink>
      <br /><asp:Button ID="btnOk" runat="server" Text="OK" /></div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:39:20.157

确保以下几点：

*   您正在调用正确的 url/文件
*   您的 aspx 页面继承了正确的代码隐藏文件
*   检查弹出代码隐藏文件中是否没有任何内容会导致问题

*   仔细检查最终（不正确的）弹出 url 以查看它是否是您调用的文件，如果它重定向到其他内容，请跟踪/调试您的流程以查看可能导致它的原因。

这只是一个非常通用的选项，所以如果你发现了什么，请告诉我。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:52:21.087

该页面是对 https 页面（而不是 http）的重定向 - 您的服务器是否配置为仅提供 https 服务？也许网址[http://rsspl05/DocAdmin/confirmmsg.aspx](http://rsspl05/DocAdmin/confirmmsg.aspx)应该是[https://rsspl05/DocAdmin/confirmmsg.aspx](https://rsspl05/DocAdmin/confirmmsg.aspx)

# asp.net - 数据列表绑定的服务器标记中的格式

> ID：10313699
> 
> 赞同：2
> 
> 时间：2012-04-25T10:19:36.103
> 
> 标签：asp.net, hyperlink, datalist

我在 aspx 页面上写的是

```
<asp:HyperLink ID="HyperLink1" runat="server" 
 NavigateUrl="~/Comp/Default.aspx?abc=71&xyz=<%# DataBinder.Eval(Container.DataItem,"TeamId") %>"
> 
```

希望在结果标记中创建一个超链接，但它在解析时出错。

我尝试了所有可能的引号和尖括号组合，没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:27:35.853

1.  我`/>`最后不见了
2.  你有一个报价（`""`）问题
3.  我会`String.Format`改用

* * *

```
<asp:HyperLink ID="HyperLink1" runat="server" 
  NavigateUrl='<%# String.Format("~/Comp/Default.aspx?abc={0}&xyz={1}", Eval("id"), Eval("TeamId")) %>' 
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T12:04:03.667

虽然上述方法有效，但通过 .NET 4.5 中的新*模型绑定*功能，您还可以使用`Item.`绑定。

```
<asp:HyperLink ID="HyperLink1" runat="server" 
  NavigateUrl='<%# String.Format("~/Comp/Default.aspx?abc={0}&xyz={1}", Item.id, Item.TeamId) %>' 
/> 
```

（当然只要你不混淆引号）

# java - GWT 应用程序的哪一部分被编译成 JavaScript？

> ID：10313700
> 
> 赞同：4
> 
> 时间：2012-04-25T10:19:36.027
> 
> 标签：java, gwt

**GWT 编译器总是只将包客户端**中的那些类转换为 JavaScript吗？或者它可以以其他方式配置？如何指定 GWT 客户端代码和服务器端代码？

如果这个问题很幼稚，我很抱歉。我是 GWT 的新手。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:23:20.417

这是在您的模块文件 (.gwt.xml) 中配置的。

`<source>`标签指示应将哪些包转换为 JS 。“路径”值与您的模块相关。

您可以将它们更改为以下内容，例如：

```
<source path='client' />
<source path='shared' />
<source path='mysubpackage' /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T08:04:25.400

如果`<source>`模块文件中没有定义标签，客户端子包会隐式添加到源路径中，就像`<source path="client" />`在其中找到一样。此默认值有助于保持标准项目布局的模块文件紧凑。

# android - 密码保护开启和关闭

> ID：10313707
> 
> 赞同：0
> 
> 时间：2012-04-25T10:20:06.307
> 
> 标签：android

我有一个关于登录页面的问题，例如安装在移动设备中的应用程序。起始页面是注册页面，在此页面中，用户选择密码保护，从登录页面选择应用程序，如果用户选择关闭密码保护，则从 meu 页面选择应用程序..这意味着注册页面只能在移动设备中安装一次。这里的应用程序仅来自注册页面，因此如果我们第二次打开，应用程序将根据密码保护选项进行分层。如果我们从手机中删除应用程序，然后重新安装，那么应用程序应该从注册页面开始你知道如何设置意图过滤器是否可以为意图过滤器设置条件？请建议我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:23:34.057

如果您从设备中删除该应用程序，那么您的所有 SharedPreferences、数据库等也会被删除。这意味着您的应用程序会自动从登录页面启动（因为登录信息已被删除）

# php - 递归函数说它在做一件事，实际上是在做另一件事吗？

> ID：10313709
> 
> 赞同：0
> 
> 时间：2012-04-25T10:20:14.920
> 
> 标签：php, recursion

我的问题：从动物家谱数据库中检索特定母亲的后代。

由于我使用的是 mySQL，我的解决方案是获取所有可能的候选者，然后在 PHP 中使用递归函数。

撇开我使用的数据库模型是否设计良好、是否有更优雅的数据检索方式或递归函数本身是否特别有效等更重要的问题不谈，我想了解一下为什么我想出的解决方案不太奏效。当我在各个地方回显输出时，它说它正在返回正确的孩子；但实际回报不对应。

因此，我的 sql 简单地返回与其母亲 ID 匹配的所有孩子 ID，然后构建一个数组，其中孩子是键，母亲是值。如果数据有些奇怪，我决定硬编码一个数组，返回确切的结果：

```
$aData = array("1"=>"20", "14"=>"12", "15"=>"14", "16"=>"10", "20"=>"13", "23"=>"20", "46"=>"20", "39"=>"12", "43"=>"13", "44"=>"13", "54"=>"1", "49"=>"1", "113"=>"46", "112"=>"54", "130"=>"15", "131"=>"43"); 
```

递归函数：

```
// $targetMom is the mother whose descendants I want
// $targetChild is each possible candidate
// $childID is initially the same as $targetChild
function recurseTree($data, $childID, $targetMom, $row, $targetChild){
    $momID = isset($data[$childID]) ? $data[$childID] : -1 ; 
    //echo "row: " . $row . " id: " . $childID . " mom ID: " . $momID . " target: ". $targetMom . " final target: ". $targetChild . "<br />"; 

    if ($momID == $targetMom){
        echo $momID . "==" . $targetMom . "; returning target: ". $targetChild . "<br/><br/>";
        return $targetChild;                
    } else if ($row == sizeof($data)) { // reached the end of the data array - no more to check
        //echo "row: " . $row . "== size of array: " . sizeof($data) . "<br />";
        return -1;
    } else if ($momID == -1) { // this child doesn't have a mom defined
        //echo "momID == -1<br />";
        return -1;
    } else {
        //echo 'recursing<br/>';
        recurseTree($data, $momID, $targetMom, ++$row, $targetChild);
    }               
} 
```

最后，调用递归函数，现在我只对 ID 为 12 的特定母亲感兴趣：

```
$children = array();
foreach( $aData as $k=> $v){
    $return = recurseTree($aData, $k, 12, 0, $k);
    if ($return != -1 && $return != null) {
        $children[] = $return;
    }
} 
```

因此，只要查看 recurseTree() 中的 echo 语句的输出，就会发现它返回了四个值：

```
12==12; returning target: 14
12==12; returning target: 15
12==12; returning target: 39
12==12; returning target: 130 
```

但是，回显构建的实际数组只显示了两个推到它上面的值：

```
Array
(
    [0] => 14
    [1] => 39
) 
```

随时发布有关改进代码的任何提示，但我最感兴趣的是为什么 echo 语句与 $children 数组中的元素不匹配。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:25:34.740

你需要：

```
return recurseTree($data, $momID, $targetMom, ++$row, $targetChild); 
```

否则，内部迭代获得的值永远不会回到外部范围。

# c# - 如何使用 Zedgraph 库更改 C# 应用程序中的鼠标光标？

> ID：10313712
> 
> 赞同：0
> 
> 时间：2012-04-25T10:20:21.563
> 
> 标签：c#, zedgraph

[如此处所述，我可以成功地](http://www.switchonthecode.com/tutorials/csharp-tutorial-how-to-use-custom-cursors)更改香草 C# 应用程序中的鼠标光标。我正在使用一个 C# 应用程序，它使用[Zedgraph](http://zedgraph.sourceforge.net/index.html) dll 来绘制图表。当鼠标指针位于图表顶部时，它会变成十字线。我需要将光标更改为另一个图像。但是，我无法使用较早的代码示例来执行此操作。我怀疑这是因为[Zedgraph](http://zedgraph.sourceforge.net/samples.html)库已经重载了光标更改事件。zgObj 是下面给出的代码中的 Zedgraph 对象。有任何想法吗？

```
void ToggleCursor()
{
   Bitmap bitmap = new Bitmap(@"C:\Documents and Settings\Martin\My Documents\My Pictures\line.bmp");

   zgObj.Cursor = XCursor.CreateCursor(bitmap, 0, 0);

   bitmap.Dispose();
}

public class XCursor : Form
{
   [DllImport("user32.dll")]
   public static extern IntPtr CreateIconIndirect(ref IconInfo icon);
   [DllImport("user32.dll")]
   [return: MarshalAs(UnmanagedType.Bool)]

   public static extern bool GetIconInfo(IntPtr hIcon, ref IconInfo pIconInfo);

   public static Cursor CreateCursor(Bitmap bmp, int xHotSpot, int yHotSpot)
   {
      IntPtr ptr = bmp.GetHicon();
      IconInfo tmp = new IconInfo();
      GetIconInfo(ptr, ref tmp);
      tmp.xHotspot = xHotSpot;
      tmp.yHotspot = yHotSpot;
      tmp.fIcon = false;
      ptr = CreateIconIndirect(ref tmp);
      return new Cursor(ptr);
   }
}

public struct IconInfo
{
   public bool fIcon;
   public int xHotspot;
   public int yHotspot;
   public IntPtr hbmMask;
   public IntPtr hbmColor;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:20:00.347

ZedGraph 控件有一个 Cursor 属性。将其设置为您想要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:37:33.387

终于解决了问题，如下图

```
Cursor lineCursor = null; //declared in the main application class
    bShowLineCursor = false;  

private void zgObj_CursorChanged(object sender, EventArgs e)
{
  if (bShowLineCursor)
  {
     bShowLineCursor = false;
     Bitmap bitmap = new Bitmap(@"C:\Documents and Settings\My Documents\My Pictures\line.bmp");
     lineCursor= XCursor.CreateCursor(bitmap, 0, 0);
     bitmap.Dispose();
  }

  if (lineCursor != null)
     zgObj.Cursor = lineCursor;

}

void ToggleCursor() 
{
   bShowLineCursor = true;
}

public class XCursor : Form
{
   [DllImport("user32.dll")]
   public static extern IntPtr CreateIconIndirect(ref IconInfo icon);
   [DllImport("user32.dll")]
   [return: MarshalAs(UnmanagedType.Bool)]

   public static extern bool GetIconInfo(IntPtr hIcon, ref IconInfo pIconInfo);

   public static Cursor CreateCursor(Bitmap bmp, int xHotSpot, int yHotSpot)
   {
      IntPtr ptr = bmp.GetHicon();
      IconInfo tmp = new IconInfo();
      GetIconInfo(ptr, ref tmp);
      tmp.xHotspot = xHotSpot;
      tmp.yHotspot = yHotSpot;
      tmp.fIcon = false;
      ptr = CreateIconIndirect(ref tmp);
      return new Cursor(ptr);
   }
}

public struct IconInfo
{
   public bool fIcon;
   public int xHotspot;
   public int yHotspot;
   public IntPtr hbmMask;
   public IntPtr hbmColor;
} 
```

# java - 如何使用对象实例化带有 Runwith 注释的 JUnit 类？

> ID：10313714
> 
> 赞同：0
> 
> 时间：2012-04-25T10:20:24.060
> 
> 标签：java, selenium, junit4

我正在使用 Junit。要求是将许多测试套件合二为一。所以我用

`@Runwith(Suite.class)`

`@Suite.SuiteClasses({a.class,b.class})`

`class SuiteRunner{}`

它的成功有一些条件，我需要调用这个类。我需要从同一个包中的不同java文件实例化这个类的一个对象。就像是：

`SuiteRunner suite=new SuiteRunner();`.

但它不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:18:14.733

您可以在 中放置一个`@AfterClass`方法`SuiteRunner`，然后使用它来使用您需要的信息更新静态字段。然后，您可以从其他类访问此静态字段。

# apache-poi - 如何使用 Apache POI Event API 读取特定行？

> ID：10313716
> 
> 赞同：1
> 
> 时间：2012-04-25T10:20:35.430
> 
> 标签：apache-poi

我想读取大的 xls 或 xlsx 文件（大约超过 30 MB 并且有 70,000+ 行）。我可以很容易地使用 Apache POI 读取小的 excel 文件，直到出现 OutOfMemory 错误。

性能和内存使用是我关心的问题。我阅读了许多帖子，如果内存占用是一个问题，那么对于 XSSF，您可以获取底层 XML 数据，并使用 XSSF 和 SAX（事件 API）自己处理它。好吧，我发现它很有趣，现在可以毫无问题地读取整个 xlsx 文件。在不使用事件 API 时，它消耗的内存（小于 70 MB）与几乎以 GB 为单位相比（如果我将 -Xmx 设置为 1024m 并且它仍然过去挂起，则上升到 1GB）要少得多。

但现在我想自定义读取过程，只允许从 excel 中读取特定的行。我可以使用 org.apache.poi.ss.usermodel.Sheet#getRow(int rownum) 轻松做到这一点。但是使用事件 API 它读取所有行没有任何中断，我发现很难读取特定的行，例如只有行号 2、3、5 等。下面是我的整个代码：

```
import java.io.InputStream;
import java.util.Iterator;
import java.util.Vector;
import org.apache.poi.xssf.eventusermodel.XSSFReader;
import org.apache.poi.xssf.model.SharedStringsTable;
import org.apache.poi.xssf.usermodel.XSSFRichTextString;
import org.apache.poi.openxml4j.opc.OPCPackage;
import org.xml.sax.Attributes;
import org.xml.sax.ContentHandler;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;
import org.xml.sax.helpers.XMLReaderFactory;

/**
 * XSSF and SAX (Event API)
 */
public class FromHowTo {
    public void processAllSheets(String filename) throws Exception {
        OPCPackage pkg = OPCPackage.open(filename);
        XSSFReader r = new XSSFReader( pkg );
        SharedStringsTable sst = r.getSharedStringsTable();

        XMLReader parser = fetchSheetParser(sst);

        Iterator<InputStream> sheets = r.getSheetsData();
        while(sheets.hasNext()) {
            InputStream sheet = sheets.next();
            InputSource sheetSource = new InputSource(sheet);
            parser.parse(sheetSource);
            sheet.close();
        }
    }

    public XMLReader fetchSheetParser(SharedStringsTable sst) throws SAXException {
        XMLReader parser = XMLReaderFactory.createXMLReader("org.apache.xerces.parsers.SAXParser");
        ContentHandler handler = new SheetHandler(sst);
        parser.setContentHandler(handler);
        return parser;
    }

    /** 
     * See org.xml.sax.helpers.DefaultHandler javadocs 
     */
    private static class SheetHandler extends DefaultHandler {
        private SharedStringsTable sst;
        private String lastContents;
        private boolean nextIsString;
        Vector values = new Vector(10);

        private SheetHandler(SharedStringsTable sst) {
            this.sst = sst;
        }

        public void startElement(String uri, String localName, String name, Attributes attributes) throws SAXException {
            // c => cell

            if(name.equals("c")) {
                // Figure out if the value is an index in the SST
                String cellType = attributes.getValue("t");
                //System.out.println(cellType);
                if(cellType != null && cellType.equals("s")) {
                    nextIsString = true;
                } else {
                    nextIsString = false;
                }
            }
            // Clear contents cache
            lastContents = "";
        }

        public void endElement(String uri, String localName, String name) throws SAXException {
            // Process the last contents as required.
            // Do now, as characters() may be called more than once
            if(nextIsString) {
                try {
                    int idx = Integer.parseInt(lastContents);
                    lastContents = new XSSFRichTextString(sst.getEntryAt(idx)).toString();
                } catch (NumberFormatException e) {
                }
            }

            // v => contents of a cell
            // Output after we've seen the string contents
            if(name.equals("v")) {
                values.add(lastContents);
            }

            if(name.equals("row")) {
                System.out.println(values);
                values.removeAllElements();
            }
        }

        public void characters(char[] ch, int start, int length) throws SAXException {
            lastContents += new String(ch, start, length);
        }
    }

    public static void main(String[] args) throws Exception {
        FromHowTo howto = new FromHowTo();
        howto.processAllSheets(args[0]);
    }
} 
```

我将 JRE7 与 Apache POI 3.7 一起使用。有人可以帮助我使用 Event API 获取特定行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T18:02:20.787

each row start element has a row number. it can be retrieved from the attributes

long rowIndex = Long.valueOf(attributes.getValue("r"));

The event model will go through to all rows but you can get he index and handle your data accordingly in the endElement

# iphone - 从 NSOperationQueue 取消 NSOperation

> ID：10313717
> 
> 赞同：1
> 
> 时间：2012-04-25T10:20:45.237
> 
> 标签：iphone, ios, nsmanagedobject, nsoperation, nsoperationqueue

我已经从一个 url 下载了信息，并且我将这个 url 作为 NSOperation 发送到一个 NSOperationQueue 中，我想知道，我如何删除一个特定的 NSOperation 来下载特定 url 的数据，现在我正在这样做：

```
AppDelegate *appController = (AppDelegate *) [[UIApplication sharedApplication] delegate];

    for (NSOperation *op in appController.seriesQueue.operations) {

        if ([op isKindOfClass:[MyDowndload class]]) {

            MyDownload *urlInDownload = (MyDowndload *)op;

            if ([urlInDownload.myNew.urlName isEqualToString:[managedObject valueForKey:@"urlName"]] && [urlInDownload.myNew.language isEqualToString:[managedObject valueForKey:@"language"]]) {
                [op cancel];
            }
        }
    } 
```

我在表格视图中有信息，所以当我删除索引路径的行时，我在此检查中输入，并在 [op cancel] 行中输入，但我可以在控制台日志中看到线程仍在下载，如何我可以停止并删除它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T10:35:20.277

根据苹果指南，取消操作不会立即强制它停止正在执行的操作。尽管所有操作都需要遵守 isCancelled 返回的值，但您的代码必须显式检查此方法返回的值并根据需要中止。

贾斯汀建议的示例......这是根据需要中止执行方法的方式。

```
- (void)main
 { \\ ...do work... 
   if (self.isCancelled)
      { \\ ...get out...  } 
 } 
```

[苹果的 NSOperation 类参考](https://developer.apple.com/library/mac/#documentation/cocoa/Reference/NSOperation_class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:32:33.733

要停止下载请求操作，您需要终止/停止该请求的运行循环。

要在操作队列中查找特定操作，我认为上述操作是允许的简单操作。

如果您需要更多控制，

创建 nsoperation 的子类并为每个操作使用标签，以便您可以通过检查唯一标签快速找到特定操作。

并在操作的子类中放置一个自定义 KVO，以便在需要时立即停止操作。我的意思是覆盖该线程的启动方法。

谢谢，

纳文山

# javascript - 奇怪的 JavaScript 类型转换

> ID：10313719
> 
> 赞同：2
> 
> 时间：2012-04-25T10:20:52.617
> 
> 标签：javascript, jquery, jquery-plugins, rating, raty

我正在显示最初显示为选项卡的特定实体的反馈和评级。当用户单击选项卡时，我正在使用

```
$.get() 
```

的返回`$.get()`是这样的

```
some arbit html|||8 
```

在这种情况下，我正在使用此数据进行拆分`|||`并获得 8 分。

```
 $.get('prevfeed.php',{text:text},function(data){
         data = data.split("|||");

        $('#prevFeedback').html(data[0]);
        $('body').data( 'rating', parseInt(data[1]));
        alert(parseInt(data[1])+1);
    }); 
```

问题就在这里。我正在使用这个[插件](http://www.wbotelhos.com/raty/)来显示星级。下面是初始化代码

```
 $('#star').raty({
        readOnly: true,
        number : 10,
        start:   $('body').data( 'rating')
    }); 
```

不管我做什么 评级不起作用。如果我输入一个数字而不是`$('body').data( 'rating')`，它工作正常。

最初，我尝试使用输入字段的 val 设置隐藏输入字段的值，`$('body').data( 'rating')`然后分配 start 。但这没有用。

提前致谢

**PS**：看到我编辑我的代码的答案

```
 $('#star').raty({
            readOnly: true,
            number: 10,
            start: function() { alert($('body').data('rating'););return $('body').data('rating'); } 
```

当我包含警报时，它正在工作。所以就像我只需要播放这段代码。这该怎么做。});

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:24:17.837

这是因为您在 上设置`rating`属性的代码`body`会延迟到 AJAX 调用完成。

但是，您将`raty`在页面加载时启动插件；`rating`数据属性仍然是`undefined`.

您必须延迟插件的初始化，直到 AJAX 调用完成：

```
$.get('prevfeed.php', {
    text: text
}, function(data) {
    data = data.split("|||");

    $('#prevFeedback').html(data[0]);
    $('body').data('rating', parseInt(data[1]));

    $('#star').raty({
        readOnly: true,
        number: 10,
        start: $('body').data('rating')
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:46:57.913

马特给出的解决方案应该有效。另一种解决方案是，在单击选项卡时，您正在从 prevfeed.php 获取数据并尝试相应地设置评级。

你可以试试这个。

单击选项卡时：

```
$("#star").raty ( {
readonly: true,
number: 10,
start: function (){
//get the rating now,
$.get('prevfeed.php',{text:text},function(data){
        data = data.split("|||");

        $('#prevFeedback').html(data[0]);
        $('body').data( 'rating', parseInt(data[1]));
    });
//Now you got the rating, just return it
return $('body').data('rating');
}
}
); 
```

PS我没试过，但它应该工作;）

# asp.net-mvc - asp.net mvc大文件上传

> ID：10313721
> 
> 赞同：3
> 
> 时间：2012-04-25T10:21:06.540
> 
> 标签：asp.net-mvc, uploadify

我正在使用 uploadify 在 asp.net mvc 应用程序中上传文件。一切都很好，但是当我尝试上传一个 .. 1GB 的文件时——uploadify 达到 100% 后它只会在那里停留大约 2 分钟。

我添加了一些日志记录代码，发生的情况是：当它达到 100% 时，控制器操作被调用，我得到一个 HttpPostedFileBase 然后我调用 file.SaveAs(path) 。“另存为”需要 2 分钟。该文件正在同一分区上从临时目录移动到我想要的位置。

关于为什么需要这么长时间的任何想法？

谢谢。

**编辑** 手动移动文件是即时的。复制粘贴文件需要... 5 分钟。该文件的 SaveAs 方法耗时 1m 30s。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:07:42.137

我知道这不是你想要的:)

但我建议你将文件保存到你想要的同一个文件夹，然后用`temp_yourFileName` 然后命名文件，当你想确认它时，只需重命名它会缩短操作。

我再次相信这应该是一个更好的解决方案:)

# wordpress - 隐藏 WP 自定义帖子类型中的评论面板

> ID：10313724
> 
> 赞同：0
> 
> 时间：2012-04-25T10:21:16.273
> 
> 标签：wordpress, comments, admin, custom-post-type

有没有办法可以在我的自定义帖子类型中隐藏评论面板并仍然允许人们发表评论？因为我注意到对于*Post*帖子类型，评论面板是隐藏的，但用户可以向它发表评论。

在 wordpress 中创建自定义帖子类型时，我总是添加

```
'supports' => array('title', 'editor', 'excerpt', 'comments'), 
```

这可以启用帖子类型的评论，但是，编辑器底部似乎总是有一个评论面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:15:50.007

在管理栏下方的左上角有一个`screen options`按钮。
上面是隐藏和显示部分 UI 的复选框。

您可以在添加/编辑页面上隐藏您的评论面板。
这些设置按用户保存。因此，如果您将其关闭，其他用户仍将拥有它。

# ios - 为什么 git add&remove 情节提要 节反复？

> ID：10313728
> 
> 赞同：19
> 
> 时间：2012-04-25T10:21:33.043
> 
> 标签：ios, xcode, git, uistoryboard

保存故事板并将更改提交到 git 时，很有可能整个`<classes>`部分将从源代码控制 (git) 中删除或添加到源代码控制 (git) 中。我在命令行上使用 git，而不是 XCode 集成 UI。

首先它看起来像这样：

```
+    <classes>
+        <class className="CPTGraphHostingView" superclassName="UIView">
+            <source key="sourceIdentifier" type="project" relativePath="./Classes/CPTGraphHostingView.h"/>
+        </class>
...
+    </classes> 
```

在下一次提交中，它看起来像这样：

```
-    <classes>
-        <class className="CPTGraphHostingView" superclassName="UIView">
-            <source key="sourceIdentifier" type="project" relativePath="./Classes/CPTGraphHostingView.h"/>
-        </class>
...
-    </classes> 
```

为什么会这样，更重要的是：我怎样才能阻止它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T14:48:42.313

（这个回答是个人经验，不是正式回答）

xml 文件中的`classes`部分`.storyboard`列出了您在项目中拥有的所有视图控制器，以便

1.  当您在 Interface Builder 中选择 UI 元素时，允许 Assistant Editor 显示正确的源文件，并且
2.  允许 Identity Inspector（右面板）显示自定义类的选项。

我猜这部分是一个缓存，当上面列出的两种用途都有一段时间没有使用时，它就会被淘汰。

这部分首先出现的事实意味着可以安全地忽略它，因为它是根据需要自动生成的。如果您已经提交了它，并且随后在 diff 上显示为已删除，请打开 Identity Inspector，下拉自定义类下可用的类列表，然后再次查看整个部分是如何存在的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T17:30:09.313

以我的经验，只有当您打开情节提要并出现与类存在相关的错误时，才会发生删除。这方面的一个例子是在合并冲突尚未解决时打开故事板。一个或多个类可能无法解析。在这种情况下，界面生成器似乎正在删除整个部分，而不仅仅是有问题的类。

对我来说，在补丁准备好后再次打开情节提要很容易修复，以防我看到删除。如果所有问题都已解决，则重新生成该部分。如果不是，则意味着我的项目设置有问题，无论如何我都不应该提交。

# c# - 如何在 Autofac 中间接传递参数

> ID：10313730
> 
> 赞同：1
> 
> 时间：2012-04-25T10:21:35.120
> 
> 标签：c#, autofac

我有一个通过`Func<Owned<OwnedDependency>>`. 它的一个依赖项需要一个参数，我只会在构造 OwnedDependency 时使用该参数。

```
public class OwnedDependency
{
    public OwnedDependency(IDependency1 dependency)
    {
    }
}

public interface IDependency1
{
}

public class Dependency1 : IDependency1
{
    public Dependency1(MyParameter parameter)
    {
    }
}

public class MyClass
{
    private readonly Func<Owned<OwnedDependency>> m_ownedDependencyFactory;

    public MyClass(Func<Owned<OwnedDependency>> ownedDependencyFactory)
    {
        m_ownedDependencyFactory = ownedDependencyFactory;
    }

    public void CreateOwnedDependency()
    {
        var parameter = new MyParameter(...);
        // ** how to setup parameter with the container? **

        using (var ownedDependency = m_ownedDependencyFactory())
        {
        }
    }
} 
```

我无法找到一种干净的方式来设置 MyParameter 的实例。

我探索的一种方法是将 ILifetimeScope 注入 MyClass ，然后执行以下操作：

```
var parameter = new MyParameter(...);

using (var newScope = m_lifetimeScope.BeginLifetimeScope())
{
    newScope.Resolve<IDependency1>(new TypedParameter(typeof(MyParameter), parameter));
    var ownedDependency = newScope.Resolve<OwnedDependency>();
    // ...
} 
```

但是容器变得不必要的侵入性。理想情况下，我想做的是注入`Func<IDependency1, Owned<OwnedDependency>>`并且容器愿意使用传入的参数来满足任何必要的依赖关系，而不仅仅是 OwnedDependency 上的那些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:05:26.793

如何使用另一个工厂分两步解决`IDependency1`：

```
public class MyClass
{
    private Func<MyParameter, IDependency1> dependency1Factory;
    private Func<IDependency1, Owned<OwnedDependency>> ownedDependencyFactory;

    public MyClass(
        Func<MyParameter, IDependency1> dependency1Factory,
        Func<IDependency1, Owned<OwnedDependency>> ownedDependencyFactory)
    {
        this.dependency1Factory = dependency1Factory;
        this.ownedDependencyFactory = ownedDependencyFactory;
    }

    public void CreateOwnedDependency()
    {
        var parameter = new MyParameter();
        using (var owned = ownedDependencyFactory(dependency1Factory(parameter)))
        {
        }

    }
} 
```

# objective-c - 在pdf文件中查找字符串的位置

> ID：10313733
> 
> 赞同：1
> 
> 时间：2012-04-25T10:21:39.470
> 
> 标签：objective-c, ios

我尝试在 pdf 文件中找到字符串的字节位置，但它没有给我真正的价值

```
NSString *string2 = [NSString stringWithContentsOfFile:[[NSBundle mainBundle]  pathForResource:@"test" ofType:@"pdf"]];

    int count =0;
    int ref=0;
    int gh=0;

// array contains all the line in th epdf
 NSArray *array = [string2 componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];

    for ( NSString *libe in array) {

        ref++;

         count=count+[libe lengthOfBytesUsingEncoding:NSUTF8StringEncoding];

 if ([@"my string" isEqualToString:libe])
        {

            id objet1 = [array objectAtIndex:ref];

            NSString *val1=(NSString*)objet1;

            NSRange range = [val1 rangeOfString:@"mystring" options:NSBackwardsSearch];
total =count+range.location;

}

} 
```

# php - php shell_exec 命令不像 bash / 返回错误

> ID：10313734
> 
> 赞同：0
> 
> 时间：2012-04-25T10:21:44.073
> 
> 标签：php, bash, pdf, pdf-generation, wkhtmltopdf

这是我的代码：

```
$url = escapeshellarg("http://www.mysite.com");
$command = shell_exec("xvfb-run -a -s '-screen 0 640x480x16' wkhtmltopdf --dpi 300  --page-size A4 $url /srv/www/mysite/public_html/tmp_pdf.pdf");
$str = file_get_contents("/srv/www/mysite/public_html/tmp_pdf.pdf");
header('Content-Type: application/pdf');
header('Content-Length: '.strlen($str));
header('Content-Disposition: inline; filename="pdf.pdf"');
header('Cache-Control: private, max-age=0, must-revalidate');
header('Pragma: public');
ini_set('zlib.output_compression','0');
die($str); 
```

在我的 bash shell（使用 Debian）中，命令

> shell_exec("xvfb-run -a -s '-screen 0 640x480x16' wkhtmltopdf --dpi 300 --page-size A4 html://www.mysite.com /srv/www/mysite/public_html/tmp_pdf.pdf

工作，它会在所需的位置生成一个 pdf，但是当我在 php 中执行命令时，什么都没有创建，我返回到一个空的 pdf 文件（因为它不存在）。有人可以帮我找出问题所在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:41:00.087

问题是 Apache 服务器没有对我尝试将 pdf 写入的文件夹（在我的示例中为 /srv/www/mysite/public_html/ ）的写访问权限。

所以我只是将文件夹位置更改为 /tmp （每个人都有写权限），现在它可以工作了。更正后的代码是：

```
$url = escapeshellarg("http://www.mysite.com");
$command = shell_exec("xvfb-run -a -s '-screen 0 640x480x16' wkhtmltopdf --dpi 300  --page-size A4 $url /tmp/tmp_pdf.pdf");
$str = file_get_contents("/tmp/tmp_pdf.pdf");
header('Content-Type: application/pdf');
header('Content-Length: '.strlen($str));
header('Content-Disposition: inline; filename="pdf.pdf"');
header('Cache-Control: private, max-age=0, must-revalidate');
header('Pragma: public');
ini_set('zlib.output_compression','0');
die($str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:43:22.683

我不知道那里有你的工具，所以用一公吨盐拿走这个。

如果您有 url 并且该工具会自行下载 url，则可能存在一些网络权限阻塞。如果您可以自己下载 url 并为该工具提供可能消除这种可能性的内容（或来自临时文件）。

还要检查您尝试写入的文件夹的权限。

既然你说的是 Debian，那就执行以下命令：

```
which xvfb-run 
```

这将为您提供可执行文件的完整路径，我将在调用 shell_exec 时使用该路径。

至于流式传输文件，我会使用 readfile。

```
$filePath = "/srv/www/mysite/public_html/tmp_pdf.pdf";

header('Content-Type: application/pdf');
header('Content-Length: ' . filesize($filePath));
header('Content-Disposition: inline; filename="pdf.pdf"');
header('Cache-Control: private, max-age=0, must-revalidate');
header('Pragma: public');
ini_set('zlib.output_compression','0');

readfile($filePath);
exit(); 
```

这样做的好处是不需要将整个文件读入内存。

# graph - 堆叠条形图中每个框的 URL

> ID：10313736
> 
> 赞同：1
> 
> 时间：2012-04-25T10:21:44.287
> 
> 标签：graph, jfreechart, jqplot, stacked, bar-chart

我想创建一个堆叠条形图，如下面的 url

[![图片](../Images/7aff1e93f9561c13a3dd3c491b68e187.png)](https://i.stack.imgur.com/Se06B.gif)
[（来源：[jpowered.com](http://www.jpowered.com/php-scripts/stacked-horizontal-bar-graph/images/stacked-horizontal-bar-graph-399x402.gif)）]

我想为每个红色、紫色和蓝色框创建超链接。该图表可以使用 jfree 图表，但我不知道如何将每个单独的条形设为 URL，以便单击它可以刷新页面。可以用jfree图表来做吗？

在这种情况下，Jquery plot 是否有助于启用每个框 url？请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:12:46.843

使用[jfreechart](/questions/tagged/jfreechart "显示标记为“jfreechart”的问题")，您可以`CategoryURLGenerator`使用更适合您需要的两种实现中的任何一种将 a 应用于绘图。此处为相关[的](https://stackoverflow.com/a/6295405/230513)`PieURLGenerator`. `ChartFactory.createStackedBarChart()`使用 a[`StackedBarRenderer`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/category/StackedBarRenderer.html)并允许`PlotOrientation.HORIZONTAL`.

附录：要为单个项目生成 URL，您可以检查 a 中的`ChartEntity`返回值，如此[处](https://stackoverflow.com/a/8525187/230513)`ChartMouseListener`所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:52:00.770

我知道你可以在 jqPlot 中毫不费力地实现这样的目标。创建绘图后，您需要记住的唯一想法是将函数绑定到`jqplotDataClick`事件。在您的函数中，您需要将点击映射到 url 结构。我在一个示例示例中对此进行了介绍，其中只有第一个系列的栏将您带到一些网站。示例在 jsfiddle 上——[可以在这里找到。](http://jsfiddle.net/Boro/gXqPh/)

实际上，一切都归结为这段代码：

```
 var urls = ["www.yahoo.com", "www.google.com", "www.java.com", "www.w3schools.com/js/js_obj_date.asp"];
  $('#chart').bind('jqplotDataClick', function (ev, seriesIndex, pointIndex, data) {
      if(seriesIndex === 0){
          var url = urls[pointIndex];
          window.open("http://"+url);
      }
  }); 
```

**编辑**

我不知道一种简单的方法，即不涉及更改脚本`jqPlot`，通过突出显示其背景来识别单击的栏。虽然我想出了一种方法来通过着色条上的点标签的背景来获得类似的效果，但代码也需要在 中`jqplotDataClicked`，例如：

```
var prevClicked;
var prevBackgroundColor;
$('#chart').bind('jqplotDataClick', function (ev, seriesIndex, pointIndex, data) {
    var str = ".jqplot-point-label.jqplot-series-"+seriesIndex+".jqplot-point-"+pointIndex;
    $(str).each(function(){
        if(prevClicked)
            $(prevClicked).css('background-color', prevBackgroundColor);
        prevClicked = this;
        prevBackgroundColor = $(prevClicked).css('background-color');
        $(prevClicked).css('background-color', 'red');
    });
}); 
```

您只需使用并应用您的样式找到单击的点标签`jQuery`，例如更改背景颜色，记住以前的标签，这样您就可以在单击另一个栏时将其颜色删除到以前的状态。首先我尝试使用`addClass/removeClass`函数，但它并没有改变标签的样式，因此我不得不使用`css`函数。

# python - 简单的 python print() 方法上的“SyntaxError：解析时意外 EOF”

> ID：10313742
> 
> 赞同：1
> 
> 时间：2012-04-25T10:21:58.817
> 
> 标签：python

键入下面非常简单的脚本时，我在 Python 上收到消息“SyntaxError：意外 EOF”。我做错了什么，这条消息是什么意思？非常感谢。

```
c = 5
d = c*c

print("the type of d is"+ str(type(d)) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T10:24:15.870

你必须`)`在最后添加！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-01-02T20:39:42.027

在第 4 行末尾添加 )

这种类型的错误通常发生在开头没有匹配的右括号时

**更正**

c = 5 d = c*c

print("d的类型是"+ str(type(d)))

# php - 在 CodeIgniter 中使用分页时数据量不一致

> ID：10313743
> 
> 赞同：0
> 
> 时间：2012-04-25T10:22:01.080
> 
> 标签：php, sql, codeigniter, codeigniter-form-helper

我想使用 CodeIgniter 中的分页库执行大量数据。我一直在实施它并且它有效。但是，我有一个问题——每页的数据量并不一致。

这是我如何制作它的简单代码......

控制器

```
class Buku_con extends Controller {

    public function Buku_con() {
        parent::__construct();
        $this->load->model('buku_model');
        $this->load->library('pagination'); //call pagination library
    }

    function getBuku() {
        //count the total rows of tb_book
        $this->db->select('*');
        $this->db->from('tb_book');
        $getData = $this->db->get('');
        $a = $getData->num_rows();
        $config['base_url'] = base_url().'index.php/Buku_con/getBuku/'; //set the base url for pagination
        $config['total_rows'] = $a; //total rows
        $config['per_page'] = '10'; //the number of per page for pagination
        $config['uri_segment'] = 3; //see from base_url. 3 for this case
        $config['full_tag_open'] = '<p>';
        $config['full_tag_close'] = '</p>';
        $this->pagination->initialize($config); //initialize pagination
        $data['detail'] = $this->buku_model->getBuku($config['per_page'],$this->uri->segment(3));
        $this->load->view('buku_view', $data);
    }

} 
```

模型

```
class Buku_model extends Model {

    function Buku_model() {
        parent::Model();
    }

    function getBuku($perPage,$uri) { //to get all data in tb_book
        $title=$this->session->userdata('title');
        $this->db->select('*');
        $this->db->from('tb_book');
        $this->db->where('title','$title');
        $this->db->order_by('id','DESC');
        $getData = $this->db->get('', $perPage, $uri);
        if($getData->num_rows() > 0)
            return $getData->result_array();
        else
            return null;
    }
} 
```

看法

```
if(count($detail) > 0) { 

//... html for table .....

foreach($detail as $rows) {
    echo 
    .... $rows['id'] .....
    .... $rows['title'] .....
    .... $rows['author'] .....
    ....
} 
echo $this->pagination->create_links(); .... 
```

分页效果很好，但每页的数据量与我在控制器中定义的不一致。我认为问题是由我在模型中使用的查询引起的 - 会话标题。

我希望数据每页执行 10 个数据，但在第 1 页只有 5 个数据，第 2 页只有 4 个数据 - 不一致。也许问题也在视图中。我应该怎么办？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:15:04.057

您没有正确计算偏移量。你可以试试这个：

```
$offset = ( $this->uri->segment(3) - 1 ) * $config['per_page']; 

$data['detail'] = $this->buku_model->getBuku($config['per_page'], $offset); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:34:25.690

你可能想看看这个使用codeigniter分页库 [https://stackoverflow.com/a/10123424/876117的正确分页](https://stackoverflow.com/a/10123424/876117)

您不会获得每个请求的所有数据。您只需要获取分页库生成的链接中指定的偏移量的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T03:11:03.153

伙计，您的控制器上有很多查询。并且也在模型（corse）上。

第一：尝试几乎只使用控制器上的功能。您在模型上创建的函数。那是正确的 MVC 方式。

关于您的分页问题：

尝试使用和滥用 GET 变量。种类，您可以传递这样的网址： [http ://site.com/controller/function?p=2](http://site.com/controller/function?p=2)

看？“？p = 2”？这样我就可以对我的控制器说我想查看列表的第二页。你知道，我可以传递更多的 GET 变量，例如： [http ://site.com/controller/function?p=2&cat=romance&year=2010](http://site.com/controller/function?p=2&cat=romance&year=2010)

还有你将使用这些变量的方式：

让我们举第二个例子（“?p=2&cat=romance&year=2010”）

```
$page = $this->input->get('p'); // this is more secure too. avoid use $_GET or $_POST
$category = $this->input->get('cat');
$year = $this->input->get('year'); 
```

现在您可以使用一些函数来获取与值匹配的书籍列表：

```
$data['books'] = $this->book->get_by_search($page, $category, $year); 
```

PS：在这个例子中，你加载了一个模型'book'，它包含一个名为'get_by_search'的函数。您必须这样做才能使代码正常工作。

提示：我们永远不知道搜索可以获得多少变量。因此，您可以创建一些模型函数来接收这些可能的变量。看：//模型书

```
public function get_by_search($page = NULL, $cat = NULL, $year = NULL, $author = NULL)
{
    $perpage = 10;
    // the NULL is to prevent an error if the function is called without them.
    if ( ! is_numeric($page) || $page < 0)
    {
        $qtd    = $perpage;
        $offset = 0;
    }
    else
    {
        $qtd    = $page * perpage;
        $offset = $perpage;
    }
    $this->db->where('category', $cat);
    $this->db->where('year', $year);
    return $this->db->get('books', $perpage, $offset);
    // if you want to debug your queries, do the same above, but with no return
    // and then use this:
    echo this->db->last_query(); die; // stop here and see the query string.
} 
```

嗯，希望对你有帮助。还有更多要告诉你的，但我认为你最好告诉我更多关于你在代码方面的进展。这个答案只是解决方案的一部分。看？那不是那么简单，但我知道怎么做。如果您需要更多帮助，请在这里告诉我，好吗？

嗯阿布拉索！

# php - .htaccess 拒绝给定文件夹中的所有子文件夹

> ID：10313747
> 
> 赞同：1
> 
> 时间：2012-04-25T10:22:20.907
> 
> 标签：php, .htaccess

我有一个简单的文件夹树：

```
orders
  |-I-Cant-Predict-The-Name
  |-I-Cant-Predict-The-Name-2
  |-I-Cant-Predict-The-Name-3
  .
  .
  .
  |-I-Cant-Predict-The-Name-XYZ 
```

我需要一个 .htaccess 来拒绝访问订单文件夹中的所有子文件夹以及其中的任何文件。我也无法预测这些文件夹中的文件类型。我计划使用 PHP 从管理区域访问文件（并且仅使用 PHP，因此没有直接链接）`file_get_contents()`，但我不能让任何人猜测文件夹和文件，因为它们是私有的（尽管我使用 hash 和文件夹名称的盐，所以很难猜测）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:24:14.590

把这个写在你的.htaccess中：

`deny from all`

在此之后，当您尝试访问这些子文件夹时，您将收到错误 403。

# iphone - 像会说话的汤姆猫和使用外部库来处理录制的声音之类的应用程序

> ID：10313748
> 
> 赞同：-5
> 
> 时间：2012-04-25T10:22:37.880
> 
> 标签：iphone

你好，我是 iphone 的新手，我只想知道如何以及哪些库可用于更改 iphone 中录制音频的音高。现在我使用 dirac 库来执行此操作，如果有任何其他方法可以实现，请帮助我， ...提前致谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:54:48.193

看看这个图书馆：[http ://www.surina.net/soundtouch/](http://www.surina.net/soundtouch/)

或这个问题：[如何在 iphone sdk 中设置音频文件或录制的音频文件的音高？](https://stackoverflow.com/questions/5714257/how-to-set-pitch-of-an-audio-file-or-recorded-audio-file-in-iphone-sdk)

另请注意：这里有一个搜索功能，并且在谷歌上 :-) 我刚刚输入

`objective-c change pitch of audio`以及两个最高命中的那些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:39:01.043

正如塞巴斯蒂安所说，使用搜索。如果您似乎在自己没有做太多研究的情况下提出了一个问题，因此希望社区提供完整的解决方案，人们将不愿意提供帮助。

话虽如此，不久前我实际上遇到了同样的问题，请查看我的[问题](https://stackoverflow.com/questions/5137853/another-question-about-recording-modifying-and-playing-audio-on-iphone)，它应该为您提供有关如何实施我选择采用的特定解决方案的足够一般信息，以便您可以推出自己的实施。

基本上我用 AVRecorder 录制了音频，并用 openAL 改变了音高等。祝你好运。

[编辑]

我只记得这个[链接](http://maniacdev.com/2011/08/tutorials-how-to-change-pitch-instantenously-without-changing-tempo-like-the-talking-tom-app/)。它们是您希望实现的一些教程，我只是希望在我开始自己的实现之前找到它们，因为它可以为我节省很多时间。祝你好运！

# java - Java 中的 Runtime.exit(0) 和 System.exit(0) 有什么区别？

> ID：10313749
> 
> 赞同：4
> 
> 时间：2012-04-25T10:22:38.097
> 
> 标签：java, runtime, system

和有什么区别

> Runtime.exit(0) 和 System.exit(0)

同样之间有什么区别

> Runtime.gc() 和 System.gc()

什么时候用哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:24:33.150

System.Xxxx 更短。Runtime.Xxxx() 不能直接使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T10:50:16.477

> 和有什么区别
> 
> ```
> Runtime.exit(0) and System.exit(0) 
> ```

没有任何。

> 同样之间有什么区别
> 
> ```
> Runtime.gc() and System.gc() 
> ```

没有任何。

> 什么时候用哪个？

由于没有区别，因此选择纯粹是装饰性的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T10:24:03.480

看看javadocs：[http](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#exit(int) ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#exit(int )

“调用 System.exit(n) 实际上等同于调用：Runtime.getRuntime().exit(n)”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T10:25:08.707

没有，它们是一样的。

[http://docs.oracle.com/javase/7/docs/api/java/lang/System.html](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html)

# sharepoint-2010 - Sharepoint 2010 子站点/文档库/列表存储数据

> ID：10313752
> 
> 赞同：2
> 
> 时间：2012-04-25T10:22:57.850
> 
> 标签：sharepoint-2010, storage, document-library, sharepoint-list

基本上，我想要做的就是获取网站集中子网站、文档库和列表的*总*存储空间。除了：

1.  使用`site.StorageManagementInformation`目前已过时的
2.  `SPSite.UsageInfo`这仅适用于网站集：

    ```
    SPSite.UsageInfo usageInfo = spSite.Usage;
    long storageUsed = usageInfo.Storage; 
    ```

3.  `SPWeb.GetUsageData`仅获取当天（以及最近 31 天）的使用数据。

4.  查找从中查询站点集管理 > 存储指标的数据库表（即使对程序集使用 .NET 反射器我也找不到）

如果有人对如何实现这一目标有任何其他方式或想法，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:30:38.593

我的建议是尝试通过 SharePoint Designer 打开您正在访问的网站，然后右键单击任何这些集合，然后单击属性。对象的大小也应该在那里显示。:)

# c - LinkedList 添加元素

> ID：10313759
> 
> 赞同：0
> 
> 时间：2012-04-25T10:23:29.760
> 
> 标签：c, linked-list, rtos, micrium

我们在 C 中的 LinkedList 有问题。当我计算列表中应该有多少节点时，我总是得到 1

> LL计数：1

这是列表代码的添加、计数和获取最后一个元素：

```
void addLL(LL * head)
{
LL *newNode;
LL *tail = getLastNode(head);

newNode = malloc(sizeof(LL));
if(newNode != DEF_NULL)
{
    newNode->ID=-1;
    newNode->TCB=-1;
    newNode->next = DEF_NULL;

    if(!head) head = newNode;
    else tail->next = newNode;      
}   
}

LL * getLastNode(LL * head)
{
    LL *temp = head;
    while(temp->next != DEF_NULL)
    {
        temp = temp->next;
    }
    return temp;
}

CPU_INT32U countLL(LL * head)
{
    CPU_INT32U elements = 0;
    LL * temp = head;
    while(temp->next != DEF_NULL)
    {
        temp = temp->next;
        elements++;
    }
    return elements;
} 
```

它是这样调用的：

```
addLL(list);
temp = countLL(list);       
Debug_LOG("LL count: %i", temp); 
```

其中 LL * 列表；是一个全局变量，而 temp 在本地范围内。我希望任何人都可以看到我哪里出错了

问候，Sjaak 和 Gerrit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:43:03.580

在 Windows 上，这个功能没有任何问题 - 奇怪......

[ideone 也显示出良好的输出。](http://ideone.com/uwDHg)

```
#include <stdio.h>
#include <stdlib.h>

typedef struct LL{
    struct LL *next;
}LL;

LL * getLastNode(LL * head)
{
    LL *temp = head;
    while(temp->next != NULL)
    {
        temp = temp->next;
    }
    return temp;
}

void addLL(LL * head)
{
LL *newNode;
LL *tail = getLastNode(head);

newNode = malloc(sizeof(LL));
if(newNode != NULL)
{
    newNode->next = NULL;

    if(!head) head = newNode;
    else tail->next = newNode;      
}   
}

int countLL(LL * head)
{
    int elements = 0;
    LL * temp = head;
    while(temp->next != NULL)
    {
        temp = temp->next;
        elements++;
    }
    return elements;
}

int main() {
    LL *h = malloc(sizeof(*h));
    addLL(h);
    addLL(h);
    addLL(h);
    printf("%d\n", countLL(h)); // prints 3 as expected
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:54:19.987

CPU_INT32U countLL(LL * head){CPU_INT32U elements = 0;LL * temp = head;while(temp->next != DEF_NULL){temp = temp->next;elements++;}返回元素；}

在此函数中，您将元素变量声明为自动，因此一旦函数退出，它的存储就会被释放，因为内存现在可以自由分配给不同的变量，因此可能会被覆盖，因此以前的 cvalue 会丢失

所以为了避免这种情况，请在声明变量时使用静态......因为静态变量内存只有在整个程序执行后才会被释放，请尝试......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:54:43.013

```
void addLL(LL * head)
{
LL *newNode;
LL *tail = getLastNode(head); 
```

这里有一个问题，如果（全局）head 恰好为 NULL，它会被 getLastNode() 函数解引用：

```
LL * getLastNode(LL * head)
{
    LL *temp = head;
    while(temp->next != DEF_NULL) 
```

这`temp->next != ...`将导致 temp 被取消引用。如果 temp 恰好为 NULL，这将导致 NULL 指针取消引用。（如插入函数的调用。您可以添加额外的测试（或使用指向更清晰的指针的指针）：

```
while(temp && temp->next != DEF_NULL) 
```

更新（以显示指向指针版本的指针更清晰）

```
#include <stdlib.h>
#include <stdio.h>
#define DEF_NULL NULL
#define CPU_INT32U unsigned

typedef struct link {
        struct link *next;
        } LL;

LL *globhead=NULL;
LL **getTailPP(LL **ppHead);
CPU_INT32U countLL(LL * ptr);
void addLL(LL **ppHead);

void addLL(LL **ppHead)
{
ppHead = getTailPP(ppHead);

*ppHead = malloc(sizeof **ppHead);
    if(*ppHead != DEF_NULL)
    {
        // newNode->ID=-1;
        // newNode->TCB=-1;
        (*ppHead)->next = DEF_NULL;
    }
}

LL **getTailPP(LL **ppHead)
{
    for( ; *ppHead; ppHead = &(*ppHead)->next ) {;}
    return ppHead;
}

CPU_INT32U countLL(LL * ptr)
{
    CPU_INT32U elements = 0;
    for(; ptr != DEF_NULL; ptr=ptr->next) { elements++; }
    return elements;
}

int main()
{
unsigned count;

addLL( &globhead);
count = countLL (globhead);
printf("count = %u\n", count);

addLL( &globhead);
count = countLL (globhead);
printf("count = %u\n", count);

return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T11:00:08.080

我在您的代码中看到了几个问题：

*   **您应该始终通过测试列表指针是否有效**（即不为空）来保护您的链表操作
*   由于分配第一个新项目的方式，您无法将第一个项目分配给空列表：您进行了更改`head`，但修改不会传播到函数之外。**您应该传递一个“指向列表指针的指针”**（即 a `LL**`），它相当于“a 的地址`LL*`”；看看我是如何调用`addLL()`的，以及我是如何修改它的原型和`head`分配的
*   如果您的列表只有一个块长，那么**只有在有后继者**时才会计算它，请参阅我如何修改 do / while 条件的顺序

我建议修改后的代码适用于 1、2 或任何列表长度（我刚刚将其更改为`CPU_INT32U`使用`int`MinGW 快速编译，我可以使用 typedef'ined）：

```
#include <stdio.h>

#define DEF_NULL 0

typedef struct tagL {
    int ID;
    int TCB;
    struct tagL *next;
} LL;

void addLL(LL ** head);
LL * getLastNode(LL * head);
int countLL(LL * head);

void addLL(LL ** head)
{
    LL *newNode;
    LL *tail = getLastNode(*head);

    newNode = malloc(sizeof(LL));
    if(newNode != DEF_NULL)
    {
        newNode->ID=-1;
        newNode->TCB=-1;
        newNode->next = DEF_NULL;

        if(!*head) 
            *head = newNode;
        else 
            tail->next = newNode;      
    }   
}

LL * getLastNode(LL * head)
{
    LL *temp = head;
    if (head){
        while(temp->next != DEF_NULL)
        {
            temp = temp->next;
        }
    }
    return temp;
}

int countLL(LL * head)
{
    int elements = 0;
    LL * temp = head;
    if (head){
        do {
            temp = temp->next;
            elements++;
        } while(temp != DEF_NULL);
    }
    return elements;
}

int main(int argc, char *argv[]){
    LL *list = 0;

    printf("LL test\n");
    addLL(&list);
    printf("length = %d\n", countLL(list));
    addLL(&list);
    printf("length = %d\n", countLL(list));
    addLL(&list);
    printf("length = %d\n", countLL(list));
} 
```

输出 ：

```
LL test
length = 1
length = 2
length = 3 
```

# python - Pymongo 查询与字典内的字典？

> ID：10313762
> 
> 赞同：8
> 
> 时间：2012-04-25T10:23:37.103
> 
> 标签：python, mongodb, pymongo

我在 MongoDB 中有这样的文档：

```
{"ONE": {"TWO": {"THREE":"5"}}} 
```

我想使用[Pymongo `find`API](http://api.mongodb.org/python/current/api/pymongo/collection.html)查询 mongoDb ，但它不起作用：

```
for value in dbaccess.find({"ONE":{"TWO":{"THREE":{"$gt":"0"}}}}):
     print value 
```

上面的代码没有打印任何内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T12:42:05.503

两件事情：

1.  如果要将文档中的 5 视为整数，请不要将其括在双引号中。
2.  使用点表示法查询嵌套文档：

    `dbaccess.find("ONE.TWO.THREE": {"$gt": 0})`

# c++ - VS2008 中的简单 swig python 示例 - 导入错误 - 内部 (py)readline 错误

> ID：10313765
> 
> 赞同：1
> 
> 时间：2012-04-25T10:23:57.193
> 
> 标签：c++, python, swig

我最近一直在使用 python 学习 swig 的基础知识，遇到了一个奇怪的错误，在命令窗口中运行 python 时导入模块会返回此错误。

```
>>> import simpFunc
Readline internal error
Traceback (most recent call last):
  File "D:\Dev\Python\winx64\lib\site-packages\pyreadline\console\console.py", line 671, in hook_wrapper_23
    res = ensure_str(readline_hook(prompt))
  File "D:\Dev\Python\winx64\lib\site-packages\pyreadline\rlmain.py", line 342, in readline
    return self.mode.readline(prompt)
  File "D:\Dev\Python\winx64\lib\site-packages\pyreadline\modes\emacs.py", line 116, in readline
    self._print_prompt()
  File "D:\Dev\Python\winx64\lib\site-packages\pyreadline\rlmain.py", line 298, in _print_prompt
    n = c.write_scrolling(self.prompt, self.prompt_color)
  File "D:\Dev\Python\winx64\lib\site-packages\pyreadline\console\console.py", line 289, in write_scrolling
    w, h = self.size()
TypeError: 'NoneType' object is not iterable 
```

尽管在此错误之后可以正确使用模块功能，并且在脚本中运行它时根本没有错误。

我想知道是否有人可以对此事有所了解。我目前正在使用 Visual Studio 2008 x64 命令提示符来构建和链接它。Python 2.7.2 版，Swig 2.0.4 版

它不仅适用于这个特定示例，我还尝试了几个都有此错误的 c 示例。

下面列出的是我正在使用的文件。

simpFunc.cpp

```
#include "simpFunc.h"

void printNum(int aNum) 
{
std::cout << "num is " << aNum << std::endl;
} 
```

简单函数

```
#include <iostream>

void printNum(int aNum); 
```

简单函数

```
/* File : simpFunc.i */
%module simpFunc
%{
#include "simpFunc.h"
%}
%include "simpFunc.h" 
```

下面是我用来创建 .pyd 的命令

```
swig.exe -python -c++ simpFunc.i
cl /c simpFunc.cpp simpFunc_wrap.cxx /I"D:\Dev\Python\winx64\include"
link /dll /out:.\_simpFunc.pyd /LIBPATH:D:\Dev\Python\winx64\libs simpFunc.obj simpFunc_wrap.obj 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:17:53.967

此问题有一个已知问题 [8275](http://bugs.python.org/issue8275%20issue8275)

问题的根源是加载dll后，GetConsoleScreenBufferInfo总是返回零，所以size返回None，大家都不高兴。

[问题的根源](https://bugs.launchpad.net/pyreadline/+bug/806452)

如果 self.hout = GetStdHandle(STD_OUTPUT_HANDLE) 在 size 函数的开头再次调用，就在调用 GetConsoleScreenBufferinfo 之前，问题似乎得到了解决

使用这个 [console.py](https://launchpadlibrarian.net/36058566/console.py)

# actionscript-3 - AS3 文本字段字体

> ID：10313777
> 
> 赞同：0
> 
> 时间：2012-04-25T10:24:43.103
> 
> 标签：actionscript-3, flash, fonts, formatting, textfield

我在 AS3 中设置字体时遇到问题。我使用来自论坛和问题的资源尝试了几种不同的方法，但我无法让它发挥作用。

这是我使用的代码：

```
 private function addContentToMovieClips(Text:String, MC:MovieClip):void
    {
        var myFont = new Trebuchet();

        var tFormat:TextFormat = new TextFormat();
        tFormat.font = myFont.fontName; 
        tFormat.color = 0x000000;
        trace(tFormat.font);

        var tf:TextField = new TextField();
        tf.defaultTextFormat = tFormat;
        tf.embedFonts = true;
        //tf.antiAliasType = AntiAliasType.ADVANCED;
        tf.text = Text;
        MC.addChild(tf);
        tf.width = 300;
    } 
```

在库中，我有一个名为“font2”的字体，带有 AS 链接“Trebuchet”。我没有收到编译器错误，并且似乎在屏幕上创建了文本，但没有显示任何内容。

以下行用于调试：

```
trace(tFormat.font); 
```

并按预期返回“Trebuchet MS”。

如果您能帮助我理解为什么这不起作用，我将不胜感激！

干杯，

帕特里克

编辑：删除时

```
tf.embedFonts = true; 
```

文本以正确的字体显示。不知道为什么，但这暂时可以解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:25:49.897

您应该已将代码粘贴到嵌入字体的位置。但由于我遇到了同样的问题，我猜你错过了 embedAsCFF 指令：

```
[Embed(source="../someFont.ttf", 
    fontName = "myFont", 
    mimeType = "application/x-font", 
    fontWeight="normal", 
    fontStyle="normal", 
    unicodeRange="englishRange", 
    advancedAntiAliasing="true", 
    embedAsCFF="false")] 
```

# debugging - 无法向引导服务器注册“应用程序”

> ID：10313780
> 
> 赞同：0
> 
> 时间：2012-04-25T10:25:00.747
> 
> 标签：debugging, ios-simulator

> **可能重复：**
> [无法向引导服务器注册 […]](https://stackoverflow.com/questions/7853136/couldnt-register-with-the-bootstrap-server)

我有多个具有相同名称但代码更改的应用程序副本。当我尝试运行较旧的应用程序时，我收到一条错误消息：

> 无法向引导服务器注册“com.rvce.Page-L”。错误：未知错误代码。这通常意味着该进程的另一个实例已经在运行或挂在调试器中。

# javascript - ExtJS 4 密码验证

> ID：10313782
> 
> 赞同：2
> 
> 时间：2012-04-25T10:25:03.533
> 
> 标签：javascript, extjs, passwords, extjs4

我正在使用这两个代码块来验证密码字段。当确认字段中的密码不等于第一个字段时，文本框会标记为红色，以便用户知道密码不相等。

现在，我想要完成的事情：只要密码不相等，我想禁用表单的导航按钮。我已经尝试过 clientvalidation 事件，但这只有在您提交表单时才会触发（我没有这样做）。

```
Ext.apply(Ext.form.VTypes, {
    password : function(val, field) {
        if (field.initialPassField) {
           var pwd = Ext.getCmp(field.initialPassField);
           return (val == pwd.getValue());
        }
        return true;
     },
    passwordText : 'Enter 2 times the same password!'
}); 
```

例子：

```
access.push({
fieldLabel: 'Password',
anchor: '99%',
name: 'passwd',
id: 'passwd',
inputType: 'password',
maxLength: 40,
vtype: 'password'
});

access.push({
fieldLabel: 'Password again',
name: 'passwd1',
id: 'passwd1',
maxLength: 40,
inputType: 'password',
vtype: 'password',
initialPassField: 'passwd'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:55:40.300

添加到要禁用属性的按钮`bindForm: true`。它将根据表单的有效性启用/禁用按钮。

# c# - 从 Silverlight 到 WCF 的图像文件

> ID：10313785
> 
> 赞同：1
> 
> 时间：2012-04-25T10:25:28.697
> 
> 标签：c#, wcf, silverlight, stream, byte

我正在尝试使用 WCF 服务将照片从 Silverlight 客户端上传到服务器。

客户端调用的方法是 void UpdatePicture(Stream image); 这个方法在客户端，显示为 UpdatePicture(byte[] array)，所以我创建了一个转换器（输入流是来自 OpenFileDialog.File.OpenRead() 的 FileStream）

```
private byte[] StreamToByteArray(Stream stream)
    {
        byte[] array = new byte[stream.Length];
        stream.Read(array, 0, array.Length);
        return array;
    } 
```

转换器似乎运行良好。

在 WCF 方面，我必须将流保存到文件中。我用这个：

```
public void UpdatePicture(Stream image)
    {
        if (SelectedUser == null)
            return;
        if (File.Exists(image_path + SelectedUser.sAMAccountName + ".jpg"))
        {
            File.Delete(image_path + SelectedUser.sAMAccountName + ".jpg");
        }

        using (FileStream file = File.Create(image_path + SelectedUser.sAMAccountName + ".jpg"))
        {
            DataManagement.CopyStream(image, file);
        }
    } 
```

要将 Stream 复制到 FileStream，我使用这个：

```
public static void CopyStream(Stream input, Stream output)
    {
        byte[] buffer = new byte[8 * 1024];
        int len;
        while ((len = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            output.Write(buffer, 0, len);
        }
    } 
```

文件按预期创建，大小正常，但 PhotoViewer 或任何其他程序均不显示图像。

有人知道为什么吗？任何帮助将不胜感激:)

编辑 ：

真的很奇怪：

我创建了一个 WCF 方法 GetWCFBytes(byte[] array) ，它返回参数而不做任何事情。如果使用 StreamToByteArray 将流作为字节数组传递给此方法，并通过带有 MemoryStream 的 BitmapImage 将结果设置为 Image，则显示空白图像。

如果我采用 OpenFileDialog 的流，将其转换为字节数组，从该数组创建一个新的 MemoryStream，并用它设置我的 BitmapImage：图像没问题。

WCF 是否对流和字节数组使用了一些魔法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:54:50.467

您的`CopyStream`方法确保继续从输入流中读取，直到它不再获得任何内容。你的`StreamToByteArray`方法不行。您确定要在客户端转换整个流，而不仅仅是前*x*个字节后跟零吗？

```
private byte[] StreamToByteArray(Stream stream)
{
    byte[] array = new byte[stream.Length];
    int index = 0, length = 0;
    while ((length = stream.Read(array, index, array.Length - index)) > 0)
    {
        index += length;
    }

    return array;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:04:57.817

我找到了答案，它确实与 WCF 无关！

问题是我在 ViewModel 上的确认按钮上转换了 OpenFileDialog 结果。我不知道为什么，但如果我在调用 openfiledialog 的方法中进行转换，字节数组不会损坏并且一切正常。

谢谢。

# xml - 如何在 xslt 中将 dateTime 显示为 GMT 格式？

> ID：10313787
> 
> 赞同：0
> 
> 时间：2012-04-25T10:25:40.440
> 
> 标签：xml, xslt

我有这个日期时间 2006-08-30T15:08:46.000-04:00。如何在 2006 年 8 月 30 日格林威治标准时间 19:08 这样显示。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:01:16.120

```
format-dateTime(
  adjust-dateTime($x, xs:dayTimeDuration('PT0H')), 
  "[D1o] [MNn,*-3] [Y0001] at [H01]:[m01] GMT") 
```

假设您使用的是 XSLT 2.0。

# java - 我的 Eclipse 环境不浏览我的项目

> ID：10313790
> 
> 赞同：1
> 
> 时间：2012-04-25T10:25:56.800
> 
> 标签：java, eclipse, keyboard-shortcuts, rtc

我正在使用 RTC 和 Eclipse Helios。我的工作区中加载了一个项目，我可以手动浏览它，但我不能使用 [Ctrl]+[Shift]+T（打开类型）功能。

我最近删除了一个克隆项目，加载到另一个 RTC 工作区。这可能与此有关。

所以基本上，我如何让 Eclipse 正确浏览我的项目？

[编辑 1]：我在 java 的角度。如果我重新加载我的前项目，我可以浏览那个项目中的类，但不能浏览我的新项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:46:34.583

您必须在 Java 透视图中才能访问`Ctrl`++`Shift`快捷`T`方式。

![开放式](../Images/0663b54402e81005e5d5f8a2c22a97bf.png)

使用 RTC（[IBM Rational Team Concert](https://jazz.net/projects/rational-team-concert/)），您的默认透视图是“工作项”。

![在此处输入图像描述](../Images/2262c55c4f6a65689ba6c9f348cdfc9f.png)

从这个角度来看，“打开类型”的快捷方式是不活动的。

解决方案：

*   切换回 Java 透视图。
*   显示视图（来自 RTC）“团队工件”和“待更改”

这样，您仍然可以在访问所有常用 Java 功能的同时从 RTC 功能中受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:06:18.297

尝试右键单击您的项目并单击刷新。我偶尔会遇到这个问题（类型视图中没有返回任何内容），这为我解决了这个问题。不过我不使用 RTC，所以你的问题可能会有所不同。我不知道根本原因是什么。

# html - 如何在组中布局列表项

> ID：10313791
> 
> 赞同：4
> 
> 时间：2012-04-25T10:26:00.433
> 
> 标签：html, css

假设我们有一个这样的 html 列表：

```
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    ...
    <li>10</li>
</ul> 
```

如何使用 css 和/或 java 脚本使浏览器显示如下（以四个为一组，组之间留有一定的间距）：

```
1 2    5 6    9 10
3 4    7 8 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T10:41:23.050

只需使用`column-count`,`float`并将`width`包装在可以应用规则`ul`的父元素中：`column-count`

```
.colWrap {
    -webkit-column-count: 3;
    -moz-column-count: 3;
    -o-column-count: 3;
    -ms-column-count: 3;
    column-count: 3;
}
li {
    float: left;
    width: 50%;
}​ 
```

调整后的 HTML：

```
<div class="colWrap">
    <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
        <li>6</li>
        <li>7</li>
        <li>8</li>
        <li>9</li>
        <li>10</li>
    </ul>
</div>​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rJTGJ/1/)。

参考：

*   [`column-count`财产](https://developer.mozilla.org/en/CSS/column-count)。
*   [CSS3 列兼容性](http://www.quirksmode.org/css/contents.html#t410)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T10:44:11.660

`column-count`您可以为此使用 css3属性：

像这样写：

```
.colWrap {
    -webkit-column-count: 3;
    -moz-column-count: 3;
    -o-column-count: 3;
    -ms-column-count: 3;
    column-count: 3;
    -webkit-column-width:20px;
    -moz-column-width:20px;
}
li {
    display:inline;
}
div{
    width:120px;
} 
```

检查这个[http://jsfiddle.net/rJTGJ/2/](http://jsfiddle.net/rJTGJ/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:27:22.943

在这里使用 jQuery 的替代方式..（[现场演示](http://jsbin.com/awagek/7/edit)）

```
var ul = $('ul'),
    lis = $('ul li');

lis.each(function (index) {
  if(index % 4 === 0) {
    ul.append($('<ul />'));
  }
  ul.find('ul').eq(~~(index / 4)).append($(this));
}); 
```

和 CSS

```
ul ul {
  float: left;
  width: 50px;
  margin-right: 30px;
}
ul li {
  list-style-type: none;
  float: left;
  width: 50%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T10:52:19.380

您可以通过将“ul”替换为符合您需求的表格来尝试。 **[看演示](http://jsfiddle.net/neysor/MafYp/)**

您只需使用 css 或不同的 html 标签根据您的需要自定义此演示。

**JavaScript**

```
$(function(){
    $("ul").each(function(){
        var oh = "<table><tr>";
        for(i=0;i<this.children.length;i++){
            oh += "<td>"+this.children[i].innerHTML+"</td>";
            if(i%2==1){
                oh+="</tr>";
                if(i%4==3){
                    oh+="</table><table><tr>";
                } else {
                    oh+="<tr>";
                }
            }
        }
        oh += "</tr></table>";
        this.outerHTML = oh;
    });
}); 
```

**编辑**

[CSS column-count](http://www.quirksmode.org/css/multicolumn.html)也有可能，但这并不适用于所有浏览器。请参阅[何时可以使用](http://caniuse.com/#search=column-count)。所以我的是一个后备版本，应该可以在更多的浏览器中使用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-25T10:36:25.703

使用 html 表格

```
<table>
 <tr>
  <td></td>
 </tr>
</table> 
```

并更改表格的边框特征以隐藏它。希望这可以帮助。

# c# - 通过我自己的命令发送窗口的“关闭”命令？

> ID：10313794
> 
> 赞同：0
> 
> 时间：2012-04-25T10:26:05.613
> 
> 标签：c#, wpf

我正在使用 MVVM 设计原则构建一个 wpf 应用程序。我的 ViewModel 有一个`CloseCommand`触发`RequestClose`事件的。如果 ViewModel 设置为窗口的数据上下文，则窗口将订阅此事件并`Close()`在事件触发时调用自身。

我的问题是用户可以在不通过我的`RequestClose`系统的情况下关闭窗口 - 例如，通过单击窗口右上角的“x”。我想覆盖它，以便单击“x”向我的`CloseCommand`.

我尝试将此方法附加到窗口上的“关闭”事件中：

```
void CloseWindow(object sender, CancelEventArgs e)
{
    var chwn = sender as ChildWindow;
    var dc = chwn.DataContext as AbstractWorkspaceViewModel;
    if (openWindows.Any((wn => dc == wn.DataContext))) {
        if (dc.CloseCommand.CanExecute(null)) {
            dc.CloseCommand.Execute(null);
            e.Cancel = true;
        }
    }
} 
```

`CloseCommand`但是，来自（通过之后）的链`RequestClose`最终调用了`window.Close()`，这会导致以下错误：

```
"Cannot set Visibility to Visible or call Show, ShowDialog,
 Close, or WindowInteropHelper.EnsureHandle while a Window is closing." 
```

我想这是因为即使我已经写`e.Cancel = true`了，窗口仍然认为它会关闭，直到稍后。

我想改变我的方法看起来像这样：

```
 if (dc.CloseCommand.CanExecute(null))
            dc.CloseCommand.Execute(null);
        else
            e.Cancel = true; 
```

然后仅`window.close()`在窗口尚未关闭时才调用，但我不知道如何确定窗口是否已经关闭。

我该如何解决这个问题？是否可以将窗口上的“x”绑定到我的`CloseCommand`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:45:43.860

如何`Window.WindowStyle = "None"`在你的 Windows XAML 中设置（隐藏顶部按钮和镶边），然后添加你自己的“假”镶边和按钮，你可以随意连接

# java - java - 如何在Java中检查一周中的某一天？

> ID：10313797
> 
> 赞同：7
> 
> 时间：2012-04-25T10:26:17.057
> 
> 标签：java, date

有没有最简单的方法可以找到本周的任何一天？（此函数返回真或假，与给定日期是否在本周有关）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-25T10:35:03.580

你肯定想使用 Calendar 类：[http ://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)

这是一种方法：

```
public static boolean isDateInCurrentWeek(Date date) {
  Calendar currentCalendar = Calendar.getInstance();
  int week = currentCalendar.get(Calendar.WEEK_OF_YEAR);
  int year = currentCalendar.get(Calendar.YEAR);
  Calendar targetCalendar = Calendar.getInstance();
  targetCalendar.setTime(date);
  int targetWeek = targetCalendar.get(Calendar.WEEK_OF_YEAR);
  int targetYear = targetCalendar.get(Calendar.YEAR);
  return week == targetWeek && year == targetYear;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T10:29:11.103

使用`Calendar`该类获取 YEAR 和 WEEK_OF_YEAR 字段并查看两者是否相同。

请注意，结果会因地区而异，因为不同的文化对哪一天是一周的第一天有不同的看法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-12T05:33:20.263

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-30T05:08:02.843

这个答案适用于安卓。将您**选择的日期日历对象**放在下面的方法中，以**检查**您选择的日期是否为**当前星期日期**。

```
private boolean isCurrentWeekDateSelect(Calendar yourSelectedDate) {
    Date ddd = yourSelectedDate.getTime();
    Calendar c = Calendar.getInstance();
    c.setFirstDayOfWeek(Calendar.MONDAY);

    c.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);
    c.set(Calendar.HOUR_OF_DAY, 0);
    c.set(Calendar.MINUTE, 0);
    c.set(Calendar.SECOND, 0);
    c.set(Calendar.MILLISECOND, 0);

    Date monday = c.getTime();
    Date nextMonday= new Date(monday.getTime()+7*24*60*60*1000);

    return ddd.after(monday) && ddd.before(nextMonday);
} 
```

Android 已经`java.util.Calendar`为任何与日期和时间相关的查询提供了该类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-04T06:07:24.487

简单的 Kotlin 解决方案：

```
fun isDateInCurrentWeek(date: DateTime): Boolean {
         val cal = Calendar.getInstance()
         cal.add(Calendar.DAY_OF_WEEK, 0)
         var dt= DateTime(cal.timeInMillis)
         return date in dt..dt.plusDays(6)
        } 
```

# ruby-on-rails-3 - 如何检查是否已加载 Rails 会话？

> ID：10313800
> 
> 赞同：7
> 
> 时间：2012-04-25T10:26:38.183
> 
> 标签：ruby-on-rails-3

我想检查是否已经加载了 rails 会话。如果我跟踪会话，我会得到：

```
Session: #<Rack::Session::Abstract::SessionHash:0x8e3e not yet loaded> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:21:09.120

session.loaded？成功了。

# php - 网页抓取从 xml 获取内容

> ID：10313801
> 
> 赞同：1
> 
> 时间：2012-04-25T10:26:40.857
> 
> 标签：php

我如何使用 php 从 xml 页面获取内容。内容如下：

```
 <entry>
   <title>News</title>
     <link rel="alternate" href="http://www.website.com/detail/2688327:BlogPost:1569917"/>
     <id>tag:www.website.com,2012-04-25:2688327:BlogPost:1569917</id>
     <updated>2012-04-25T08:30:00.000Z</updated>
     <author>
     <name>Username</name>
     <uri>http://www.website.com/profile/username</uri>
     </author>
      <summary type="html">
      Hi this is the latest news
      </summary>
</entry>

 <entry>
   <title>News2</title>
     <link rel="alternate" href="http://www.website.com/detail/2688327:BlogPost:1569917"/>
     <id>tag:www.website.com,2012-04-25:2688327:BlogPost:1569917</id>
     <updated>2012-04-25T08:30:00.000Z</updated>
     <author>
     <name>Username2</name>
     <uri>http://www.website.com/profile/username</uri>
     </author>
      <summary type="html">
      Hi this is the latest news
      </summary>
</entry>

 <entry>
   <title>News3</title>
     <link rel="alternate" href="http://www.website.com/detail/2688327:BlogPost:1569917"/>
     <id>tag:www.website.com,2012-04-25:2688327:BlogPost:1569917</id>
     <updated>2012-04-25T08:30:00.000Z</updated>
     <author>
     <name>Username3</name>
     <uri>http://www.website.com/profile/username</uri>
     </author>
      <summary type="html">
      Hi this is the latest news
      </summary>
</entry>

 <entry>
   <title>News4</title>
     <link rel="alternate" href="http://www.website.com/detail/2688327:BlogPost:1569917"/>
     <id>tag:www.website.com,2012-04-25:2688327:BlogPost:1569917</id>
     <updated>2012-04-25T08:30:00.000Z</updated>
     <author>
     <name>Username4</name>
     <uri>http://www.website.com/profile/username</uri>
     </author>
      <summary type="html">
      Hi this is the latest news
      </summary>
</entry> 
```

如何`<link rel="alternate" href="http://www.website.com/detail/2688327:BlogPost:1569917"/>`使用 php 获取标题、博客链接、作者详细信息（如姓名和 uri（个人资料链接）以及摘要）的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:28:32.130

查看 simplexml，xpath [http://php.net/manual/en/book.simplexml.php](http://php.net/manual/en/book.simplexml.php)

```
 $file = 'url or file name';
    $xml = simplexml_load_file('$file');
    $list= $xml->xpath("/entry"); // root/entry ...
    print $list[0]->id; 
    #var_dump($list); 
```

# objective-c - UIGraphicsGetImageFromCurrentImageContext 裁剪到内容而不是边界框

> ID：10313802
> 
> 赞同：0
> 
> 时间：2012-04-25T10:26:41.480
> 
> 标签：objective-c, cgcontext, cgrect

我有一个区域，用户可以将他们的签名添加到应用程序中，以验证订单。
他们用触摸签名。
唯一的问题是，签名的框架很大，如果用户要让签名非常小，当我保存图像时，我会在图像周围留下大量空白空间，当我添加时将其发送到电子邮件中，该过程可能看起来很糟糕。

有什么办法，使用它我可以将图像裁剪到实际内容的边界，而不是框本身的边界？

我想这个过程将涉及以某种方式检测空间内的内容并绘制一个 CGRect 以匹配它的边界，然后再将此 CGRect 传递回上下文？但我不知道如何以任何形式或形式进行此操作，这确实是我第一次使用 CGContext 和图形框架。

这是我的签名绘图代码：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];   
    CGPoint currentPoint = [touch locationInView:signView];

    //Define Properties
    [drawView.image drawInRect:CGRectMake(0, 0, drawView.frame.size.width, drawView.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineJoin(UIGraphicsGetCurrentContext(), kCGLineJoinBevel);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 1.0);
    CGContextSetShouldAntialias(UIGraphicsGetCurrentContext(), true);
    CGContextSetAllowsAntialiasing(UIGraphicsGetCurrentContext(), true);

    //Start Path
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());

    //Save Path to Image
    drawView.image = UIGraphicsGetImageFromCurrentImageContext();

    lastPoint = currentPoint;

} 
```

如果你能提供它，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:30:04.003

您可以通过跟踪最小和最大触摸值来做到这一点。

例如，制作一些最小/最大 ivars

```
 @interface ViewController () {
      CGFloat touchRectMinX_;
      CGFloat touchRectMinY_;
      CGFloat touchRectMaxX_;
      CGFloat touchRectMaxY_;
      UIView *demoView_;
    }
    @end 
```

这是一个演示矩形

```
 - (void)viewDidLoad {
      [super viewDidLoad];
      demoView_  = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, 10)];
      demoView_.backgroundColor = [UIColor redColor];
      [self.view addSubview:demoView_];  
    } 
```

用不可能的值设置它们。您需要为每个签名而不是每个笔划执行此操作，但如何执行此操作取决于您。假设您有一个清除按钮，我建议重置“清除”。

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
      touchRectMinX_ = CGFLOAT_MAX;
      touchRectMinY_ = CGFLOAT_MAX;
      touchRectMaxX_ = CGFLOAT_MIN;
      touchRectMaxY_ = CGFLOAT_MIN;
    } 
```

现在记录更改

```
 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
      UITouch *touch = [touches anyObject];   
      CGPoint currentPoint = [touch locationInView:self.view];

      touchRectMinX_ = MIN(touchRectMinX_, currentPoint.x);
      touchRectMinY_ = MIN(touchRectMinY_, currentPoint.y);  
      touchRectMaxX_ = MAX(touchRectMaxX_, currentPoint.x);
      touchRectMaxY_ = MAX(touchRectMaxY_, currentPoint.y);   

      // You can use them like this:
      CGRect rect = CGRectMake(touchRectMinX_, touchRectMinY_, fabs(touchRectMinX_ - touchRectMaxX_), fabs(touchRectMinY_ - touchRectMaxY_));
      demoView_.frame = rect;
      NSLog(@"Signature rect is: %@", NSStringFromCGRect(rect));
    } 
```

希望这可以帮助！

# php - 比较php中的两个数组并输出结果

> ID：10313803
> 
> 赞同：0
> 
> 时间：2012-04-25T10:26:51.217
> 
> 标签：php, arrays

> **可能重复：**
> [PHP 比较数组](https://stackoverflow.com/questions/901815/php-compare-array)

如果两个数组相同但可以以任何方式对元素进行排序，我必须在 php 中比较两个数组并打印输出

IE

```
$array1=array('a','p','p','l','e');
$array2=array('p','a','e','l');

--- This must return as success because all of the letters in array1 is there in array2

$array1=array('a','p','p','l','e','s');
$array2=array('p','a','e','l');

-- This must return false

$array1=array('a','p','p','l','e','s');
$array1=array('a','p','p','l','e','s');
-- This must return true 
```

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T10:29:31.157

```
var_dump(sizeof(array_diff($array1, $array2)) === 0); 
```

参考： http: [//php.net/manual/function.array-diff.php](http://php.net/manual/function.array-diff.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:31:05.787

```
function compareArrays($array1, $array2) {
    foreach ($array2 as $currentValue) {
        if (!in_array($currentValue, $array1) {
            return false;
        }
    }
    return true;
} 
```

# php - 限制 PHP Web 框架中的下载速度

> ID：10313814
> 
> 赞同：1
> 
> 时间：2012-04-25T10:27:30.530
> 
> 标签：php, cakephp, zend-framework, bandwidth-throttling

我将使用 Web 框架在 PHP 中实现一个网站。我从来没有用 PHP 实现过网站……我学习新语言没有问题。问题是我想知道是否可以使用 Zend、CakePHP 等框架来创建一个页面，让您以给定的速率（例如 50 KB/s）下载文件？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T10:37:29.683

您的服务器应该处理这个问题，而不是 PHP。

如果您有*Apache*，请参见此处：

*   [Apache 模块 mod_ratelimit](http://httpd.apache.org/docs/trunk/mod/mod_ratelimit.html)
*   [Apache中的Web服务器带宽限制](http://www.whoopis.com/howtos/web-bandwidth-limit.html)

对于*Lighttpd*，请参见此处：

*   [http://www.debianhelp.co.uk/ssllighttpd.htm](http://www.debianhelp.co.uk/ssllighttpd.htm)
*   [流量整形](http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs%3aTrafficShaping)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:37:33.920

据我所知，限制下载速度不是核心的一部分，但这很容易实现，只需扩展[MediaView](http://book.cakephp.org/2.0/en/views/media-view.html)类并向其添加[简单的功能](http://www.jonasjohn.de/snippets/php/dl-speed-limit.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:38:17.830

在我看来，PHP 不是限制下载的好语言。我从来没有这样做过，但我会这样做

```
header('Content-type: image/jpeg');
header('Content-Disposition: attachment; filename="image.jpg"');
$f = file('may_image_or_file_to_download.jpg');

foreach($f as $line){
  echo $line;
  flush();
  usleep(10000); //change sleep time to adjusting download speed
} 
```

如果你有可能，你最好使用一些 Apache 模组

> 对不起我的英语不好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T10:43:00.337

在这些框架中也可以使用 PHP 做的所有事情。诀窍是在不违反框架规则（例如 MVC 模式）的情况下做到这一点。

在 CakePHP 中，绝对有可能创建一个控制器动作来输出一个包含所有需要的头文件的二进制文件。在您的控制器操作中，您可以[使用标准 php 限制下载速度](http://www.jonasjohn.de/snippets/php/dl-speed-limit.htm)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-08T22:38:53.560

如果框架不提供该功能，请使用现有库，例如[`bandwidth-throttle/bandwidth-throttle`](https://github.com/bandwidth-throttle/bandwidth-throttle)

```
use bandwidthThrottle\BandwidthThrottle;

$in  = fopen(__DIR__ . "/resources/video.mpg", "r");
$out = fopen("php://output", "w");

$throttle = new BandwidthThrottle();
$throttle->setRate(100, BandwidthThrottle::KIBIBYTES); // Set limit to 100KiB/s
$throttle->throttle($out);

stream_copy_to_stream($in, $out); 
```

# httpfilecollection - select particular key by name from HttpFileCollection

> ID：10313819
> 
> 赞同：0
> 
> 时间：2012-04-25T10:27:42.127
> 
> 标签：httpfilecollection

how to select particular item from HttpFileCollection Object

```
 HttpFileCollection uploads = default(HttpFileCollection);
        uploads = HttpContext.Current.Request.Files; 
```

I want to select some keys from uploads

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:38:59.427

如果我明白你需要

```
 if (context != null)
            {
                if (context.Request.Files.Count > 0)
                {
                    var file0 = context.Request.Files[0];
 var file1 = context.Request.Files[1];
                }
            } 
```

# wpf - 带有情节提要“RepeatBehavior =“永远”的页面上的WPF空闲控件

> ID：10313820
> 
> 赞同：0
> 
> 时间：2012-04-25T10:27:50.947
> 
> 标签：wpf, controls, storyboard, python-idle

我在 xaml 页面上尝试了一个简单的重复动画，如下所示：

```
<StackPanel Canvas.Left="1" Canvas.Top="1">
    <StackPanel.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard>
                <Storyboard x:Name="sb_PathGeometry" RepeatBehavior="Forever">
                     <PointAnimationUsingPath Storyboard.TargetName="PathGeometry"  
                          Storyboard.TargetProperty="Center"  
                          Duration="0:0:1">
                          <PointAnimationUsingPath.PathGeometry>
                              <PathGeometry Figures="M 10,0 L 10,-182 L -199,-182" />
                          </PointAnimationUsingPath.PathGeometry>
                     </PointAnimationUsingPath>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </StackPanel.Triggers>
</StackPanel> 
```

然后，我计划使用下面的代码控制空闲页面（从另一个站点查找）：

```
using System.Windows.Threading;
using System.Windows.Interop;

namespace DS
{
    public partial class MontagePage : Page
    {
        private EventHandler handler;

        public MontagePage()
        {
            InitializeComponent();

            handler = delegate
            {
                DispatcherTimer timer = new DispatcherTimer();
                timer.Interval = TimeSpan.FromSeconds(4);
                timer.Tick += delegate
                {
                    if (timer != null)
                    {
                        timer.Stop();
                        timer = null;
                        System.Windows.Interop.ComponentDispatcher.ThreadIdle -= handler;
                        ComponentDispatcher_ThreadIdle();
                        System.Windows.Interop.ComponentDispatcher.ThreadIdle += handler;
                    }
                };
                timer.Start();

                //System.Windows.Interop.ComponentDispatcher.ThreadIdle -= handler;
                Dispatcher.CurrentDispatcher.Hooks.OperationPosted += delegate
                {
                    if (timer != null)
                    {
                        timer.Stop();
                        timer = null;
                    }
                };
            };

            ComponentDispatcher.ThreadIdle += handler;
        }

        void ComponentDispatcher_ThreadIdle()
        {
            //Go to IdlePage.xaml
            IdlePage idlepage = new IdlePage();
            this.NavigationService.Navigate(idlepage);
        }
    }
} 
```

我可以总结的问题是：

1.  由于该动画一直在运行，因此空闲控件不会触发。如何让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:27:26.927

*** 第1部分 ***

每次进入委托块时，您都在创建新的计时器。

来自 MSDN 的注释：

***将 Enabled 设置为 true 与调用 Start 相同，将 Enabled 设置为 false 与调用 Stop 相同。***

所以第一步我建议至少将您的代码重构为仅启用重置

```
//sorry I changed your delegates to lambda's for my convenience (personal pref), but the point stands
public MontagePage()
    {
        InitializeComponent();
        timer.Interval = TimeSpan.FromSeconds(4);

        handler = (s1,a1) =>
        {
            timer.Tick += (s2, a2) =>
            {
                if (timer.IsEnabled)
                {
                    timer.IsEnabled = false;
                    ComponentDispatcher.ThreadIdle -= handler;
                    ComponentDispatcher_ThreadIdle();
                    ComponentDispatcher.ThreadIdle += handler;
                }
            };
            timer.Start();

            Dispatcher.CurrentDispatcher.Hooks.OperationPosted 
                += (s, a)
                    =>
                    {
                        if (timer.IsEnabled)
                            timer.IsEnabled = false;
                    };
        };

        ComponentDispatcher.ThreadIdle += handler;
    } 
```

*** 第2部分：***

删除 RepeatBehavior="Forever"，您的代码将根据计时器开始触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:57:55.087

Putting this in a different answer, because the approach is different. Change your timer to system timer to leverage on timer.elapsed, where you can spawn an action on a different thread.

```
 public MontagePage()
    {
        InitializeComponent();

        var timer = new System.Timers.Timer {Interval = 4000, Enabled = true};
        timer.Elapsed += (s, a) => Task.Factory.StartNew(ComponentDispatcher_ThreadIdle);

        ..... 
```

this will work without you changing your XAML.

# mysql - 当我们需要使用upper（列名）排序时，如何在oracle中使用order by子句和union子句？

> ID：10313824
> 
> 赞同：0
> 
> 时间：2012-04-25T10:28:06.387
> 
> 标签：mysql, database, oracle

以下查询给出错误：

```
SELECT DISTINCT dealer_state
FROM A
WHERE country='SS' 
UNION
SELECT DISTINCT dealer_state
FROM B
WHERE country='SS'
ORDER BY upper(dealer_state) 
```

如何使用upper（column）按子句排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:36:07.123

假设您的查询给出的“错误”是它没有像您预期的那样对记录中的记录进行排序`B`，`A`您需要使`UNION`查询成为执行排序的子查询：

```
SELECT dealer_state FROM (
    SELECT dealer_state FROM A WHERE country='SS' 
  UNION
    SELECT dealer_state FROM B WHERE country='SS'
) t
ORDER BY upper(dealer_state) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:38:16.623

`DISTINCT`和中最左边的表达式`ORDER BY`必须匹配。

最简单的方法是执行以下操作：

```
SELECT dds FROM (
    SELECT DISTINCT dealer_state AS dds FROM A
     WHERE country='SS'
    UNION
    SELECT DISTINCT dealer_state AS dds FROM B
     WHERE country='SS') AS d
ORDER BY upper(dds); 
```

# .net - .Net 字符串格式以百万为单位显示货币价值

> ID：10313825
> 
> 赞同：0
> 
> 时间：2012-04-25T10:28:24.670
> 
> 标签：.net, silverlight, string-formatting

我正在尝试编写一个字符串格式，它采用数百万范围内的货币数字，例如 275983.35，然后将其显示为 2.7。这是用作图例上的缩放数字。

我使用的控件需要这样的字符串格式`{}{0:my string format}`

我已经设法通过使用使显示器显示 2.7，`{}{0:0,,.0}`但这不显示货币符号。如何在不硬编码单个货币符号的情况下显示货币符号，如下所示：`{}{0;$0,,.0}`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:34:48.330

最简单的解决方案是将数字除以 1,000,000，然后使用标准货币格式显示该数字。这将为您提供货币的本地化 - 但**不是**并表明这是数百万美元/英镑/欧元。

更好的解决方案是编写一个自定义转换器，该转换器将除以一百万选择正确的货币符号，然后附加一个“m”（或您决定的任何符号）以表明这是百万。

```
public class MillionsConverter : IValueConverter
{
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return (value / 1000000M).ToString("C2") + " m";
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

然后在 XAML 中：

```
<ResourceDictionary>
    <Converters:MillionsConverter  x:Key="MillionsConverter " />
</ResourceDictionary>

<TextBlock Text="{Binding Value, Converter={StaticResource MillionsConverter}" /> 
```

这将输出：

> 270 万美元

显然，您需要调整转换器以获得所需的确切格式。

# c# - C# WCT ReleaseServiceInstanceOnTransactionComplete

> ID：10313827
> 
> 赞同：1
> 
> 时间：2012-04-25T10:28:39.543
> 
> 标签：c#, wcf, transactions

我确定我理解这些属性都是错误的。

1.  ReleaseServiceInstanceOnTransactionComplete - 据我了解 - 在您的事务完成\abord 后处理您在客户端中初始化的服务实例。

2.TransactionAutoComplete-据我了解-在操作结束后处理您在客户端中初始化的服务实例。

我的英语不是那么好，所以在阅读每篇文章后，我仍然有我不明白的平静。

感谢您的时间。

**编辑1：**

你能用简单的英语向我解释一下InstanceContext的目的是什么吗？我已经阅读了这篇文章：[http](http://www.danrigsby.com/blog/index.php/2008/05/23/understanding-instancecontext-in-wcf/) ://www.danrigsby.com/blog/index.php/2008/05/23/understanding-instancecontext-in-wcf/ 仍然没有得到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T11:16:49.113

`ReleaseServiceInstanceOnTransactionComplete`当事务完成或中止时，真正处置您的服务实例。它默认设置为 true。例如，如果您使用 PerSession 实例化创建服务，您可能希望将其设置为 false 以确保您的会话生命周期而不是事务生命周期。

`TransactionAutoComplete`与处置无关。它只是控制用于执行操作的事务。如果`TransactionScopeRequired`设置为 true，您的操作将自动由`TransactionScope`. `TransactionAutoComplete`如果操作执行没有错误，设置为 true 将自动提交事务，如果操作抛出异常则回滚事务。如果设置`TransactionAutoComplete`为 false，则必须通过调用手动提交事务：

```
OperationContext.Current.SetTransactionComplete(); 
```

# django - Django mod_wsgi 和 haystack = 错误 500

> ID：10313828
> 
> 赞同：0
> 
> 时间：2012-04-25T10:28:44.647
> 
> 标签：django, mod-wsgi, django-haystack

我在我的 Django 项目中使用 Haystack，并且使用 django 服务器运行良好。当我要在 Apache 上运行时，我收到错误 500；更准确地说来自日志：

```
mod_wsgi (pid=4536): Exception occurred processing WSGI script 

'/opt/local/apache2/htdocs/meishi/meishi/wsgi.py'.
Traceback (most recent call last):
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/core/handlers/wsgi.py", line 241, in __call__
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     response = self.get_response(request)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/core/handlers/base.py", line 179, in get_response
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/core/handlers/base.py", line 221, in handle_uncaught_exception
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     return debug.technical_500_response(request, *exc_info)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/views/debug.py", line 66, in technical_500_response
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     html = reporter.get_traceback_html()
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/views/debug.py", line 276, in get_traceback_html
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     return t.render(c)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/template/base.py", line 140, in render
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     return self._render(context)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/template/base.py", line 134, in _render
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     return self.nodelist.render(context)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/template/base.py", line 823, in render
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     bit = self.render_node(node, context)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/template/debug.py", line 74, in render_node
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     return node.render(context)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/template/debug.py", line 84, in render
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     output = self.filter_expression.resolve(context)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/template/base.py", line 599, in resolve
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     new_obj = func(obj, *arg_vals)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/template/defaultfilters.py", line 718, in date
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     return format(value, arg)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/utils/dateformat.py", line 310, in format
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     return df.format(format_string)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/utils/dateformat.py", line 33, in format
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     pieces.append(force_unicode(getattr(self, piece)()))
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/utils/dateformat.py", line 214, in r
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     return self.format('D, j M Y H:i:s O')
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/utils/dateformat.py", line 33, in format
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     pieces.append(force_unicode(getattr(self, piece)()))
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/utils/encoding.py", line 71, in force_unicode
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     s = unicode(s)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/utils/functional.py", line 121, in __unicode_cast
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     return func(*self.__args, **self.__kw)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/utils/translation/__init__.py", line 86, in ugettext
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     return _trans.ugettext(message)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/utils/translation/trans_real.py", line 278, in ugettext
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     return do_translate(message, 'ugettext')
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/utils/translation/trans_real.py", line 268, in do_translate
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     _default = translation(settings.LANGUAGE_CODE)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/utils/translation/trans_real.py", line 183, in translation
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     default_translation = _fetch(settings.LANGUAGE_CODE)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/utils/translation/trans_real.py", line 160, in _fetch
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     app = import_module(appname)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]   File "/Applications/MAMP/htdocs/Django-1.4/django/utils/importlib.py", line 35, in import_module
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1]     __import__(name)
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1] ImportError: No module named haystack
[Wed Apr 25 13:41:52 2012] [error] [client 127.0.0.1] File does not exist: /opt/local/apache2/htdocs/favicon.ico 
```

在我的项目中使用 Haystack 之前，我对 mod_wsgi 没有任何问题，一切都运行良好。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:05:47.047

该错误表明“haystack”模块未安装到 mod_wsgi 正在使用的 Python 安装中。找出你安装 'haystack' 模块的位置，并确保它与 mod_wsgi 使用的 Python 安装相同。

# asp.net - 如何使用 C# 中的代码为数据表设置顺序 asc 或 desc？

> ID：10313829
> 
> 赞同：0
> 
> 时间：2012-04-25T10:28:48.657
> 
> 标签：asp.net, sorting, datatable

我有临时表，我想按 itemid 对数据进行排序。请帮助我如何做到这一点。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:33:48.443

Try

```
tableName.AsDataView().Sort = "itemId"; 
```

# mysql - 重复唯一字段时返回错误消息

> ID：10313831
> 
> 赞同：0
> 
> 时间：2012-04-25T10:28:51.260
> 
> 标签：mysql, stored-procedures, error-handling

我想在出现重复记录时返回错误消息，groupName 是组表中的唯一字段。

我这样做了，如何在不使用[mysql-get-diagnostics](http://marcalff.blogspot.com/2011/10/mysql-get-diagnostics.html)的情况下进行错误处理，因为我正在使用的服务器是 5.0.77-log 版本。

```
 DELIMITER //
 CREATE PROCEDURE addNewGroup(IN groupName varchar(128), IN addedBy INT,OUT message varchar(128) )

 BEGIN

   insert IGNORE  into  `group`( `group_name`,`Date_time_ added`,`added_by`) values (groupName ,CURRENT_TIMESTAMP(),addedBy) ;

END //

DELIMITER ; 
```

我想在发生重复时返回错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:35:22.430

试试这个方法——

```
BEGIN
  INSERT IGNORE INTO table VALUES...;
  IF ROW_COUNT() = 0 THEN
    SET message = 'duplicate records occur';
  END IF;
END 
```

[ROW_COUNT()](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_row-count)函数返回最后一条语句的插入行数。

在 MySQL 5.5 中。您可以使用[SIGNAL](http://dev.mysql.com/doc/refman/5.5/en/signal-resignal.html)语句来生成警告。

# java - java：在现有文件中追加数据

> ID：10313840
> 
> 赞同：1
> 
> 时间：2012-04-25T10:29:33.020
> 
> 标签：java, jakarta-ee, r.java-file

我有一个记录很少的文件 DataFile.txt。当我添加新条目时，它会清除所有其他记录并仅保存新记录。但我想附加该记录。

```
private void saveFile()
      {
        try
        {
            PrintWriter out = new PrintWriter(new FileWriter("DataFile.txt"));

            String name ="";
            String ID="";
            String roomType ="";
            String meal="";
            int days=0;
            int tprice=0;

            for (int i = 0; i < myList.size(); i++)
            {
                Customer c = myList.get(i);

                name = c.getName();
                ID = c.getID();
                roomType = c.getRoomItem();
                meal = c.getMealItem();
                days = c.getDaysIndex();
                tprice = c.getTotalPrice();

                out.println(name + "," + ID+ "," + roomType+ "," + meal+ "," + days+ "," + tprice);
            }
            out.close();
            JOptionPane.showMessageDialog(null,"Data saved successfully!","",
                                                              JOptionPane.INFORMATION_MESSAGE);

          }
          catch (Exception ex)
          {
             System.out.println("save file fail");
          }
      } //end of the method 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:31:18.987

您可以更改为使用带有布尔`append`参数的 FileWriter 构造函数：

```
PrintWriter out = new PrintWriter(new FileWriter("DataFile.txt", true)); 
```

然而：

*   `PrintWriter`吞下例外——如果我是你，我不会使用它
*   `FileWriter`总是使用平台默认编码——我也不会使用它。我会使用一个`OutputStream`包装在一个`OutputStreamWriter`用特定编码创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:01:53.617

不要使用 FileWriter。无法使用 FileWriter a 定义字符编码，您最终将使用系统默认编码，这通常不是您想要使用的。

而是使用 FileOutputStream 和 OutputStreamWriter。是的，这是一行额外的代码，但如果您想编写健壮且无错误的代码，则需要额外的一行。

```
OutputStream out = new FileOutputStream("output.txt", true);
Writer writer = new OutputStreamWriter(out, "UTF-8"); 
```

使用系统默认字符编码是最常见的错误来源。养成学习不依赖系统默认字符编码（或系统默认时区）的习惯。

# javascript - 删除窗口哈希中的 # 以在函数中使用

> ID：10313843
> 
> 赞同：0
> 
> 时间：2012-04-25T10:29:45.997
> 
> 标签：javascript, jquery, replace

我有

```
function windowHash() {
    var hash = window.location.hash;
    if (window.location.hash == hash) {
        resizePage();
        slide(hash);
    }
} 
```

我需要从 if 语句中的散列变量中删除 # 。我将如何执行此操作，所以 slide(); 通过 slide('web-design'); 而不是幻灯片（'#web-design'）；

谢谢，

丹尼。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:32:09.187

```
var noHash = hash.substring(1); 
```

如果您出于某种原因需要添加支票：`if(hash.charAt(0) == '#')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:31:30.187

利用javascript`replace()`函数替换你的字符串的# ...

```
var withouthash = hash.replace('#',''); 
```

给你的最终代码

```
slide(hash.replace('#','')); 
```

# ios - 我们可以在 ios sdk 中添加五个以上的标签栏吗？

> ID：10313845
> 
> 赞同：4
> 
> 时间：2012-04-25T10:29:58.030
> 
> 标签：ios, uitabbarcontroller, uitabbar

我想在我的项目中添加第 6 个选项卡栏。当我尝试这样做时，我得到了更多选项，但是当我单击更多选项卡时没有任何反应。为我提供关于这个以及任何其他逻辑的良好解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-10-20T06:40:59.873

在swift中，子类化`UITabBarController`并实现：

```
override var traitCollection: UITraitCollection {
    let realTraits = super.traitCollection
    let lieTrait = UITraitCollection.init(horizontalSizeClass: .regular)
    return UITraitCollection(traitsFrom: [realTraits, lieTrait])
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-22T21:42:53.417

从 iOS 9（可能还有 8）开始，有一种简单的方法可以做到这一点。我不建议使用这个技巧来发布应用程序——6 个选项卡在 4 或 5 上非常狭窄——但知道这一点很容易。

请注意，iPad 标签栏可以有五个以上的标签，而没有“更多”项目。

苹果判断“平板与否”的新方法？是大小类。

因此，子类化`UITabBarController`并实现：

```
-(UITraitCollection *)traitCollection
{
  UITraitCollection
  *realTraits = [super traitCollection],
  *lieTrait = [UITraitCollection traitCollectionWithHorizontalSizeClass:UIUserInterfaceSizeClassRegular];
  return [UITraitCollection traitCollectionWithTraitsFromCollections:@[realTraits, lieTrait]];
} 
```

向其中添加六个子视图控制器，瞧！在这种情况下，看起来苹果正在实践他们所宣扬的东西！

(* 请注意，这也与选项卡中视图控制器的水平大小类有关。您可能希望`- setOverrideTraitCollection:forChildViewController:`在适当的时候调用，可能在覆盖的情况下`setViewControllers:`，将它们的特征集合“覆盖”回真实的集合。这样他们就不会感到困惑并尝试显示其布局的不适当的宽变体。）

[编辑以稍后添加：从 iOS 12 开始，这个技巧有一个有趣的副作用：对于 5 个或更少的标签，它会将标签栏变成 iPad 样式，标题位于图标的右侧。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T12:01:47.060

您可以从这里使用自定义标签栏：http: [//cocoacontrols.com/platforms/ios/controls/infinitabbar](http://cocoacontrols.com/platforms/ios/controls/infinitabbar)

甚至这个： [http ://cocoacontrols.com/platforms/ios/controls/ciexpandabletabbar](http://cocoacontrols.com/platforms/ios/controls/ciexpandabletabbar)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-11T09:45:04.123

使 CustomTabBarVC 从 UITabBarController 继承它并实现它将使您成为可能。

```
import UIKit

class CustomTabBarVC: UITabBarController {

    override func viewDidLoad() {
        super.viewDidLoad()

    }

    override var traitCollection: UITraitCollection {
        let realTraits = super.traitCollection
        let fakeTraits = UITraitCollection(horizontalSizeClass: .regular)
        return UITraitCollection(traitsFrom: [realTraits, fakeTraits])
    }
} 
```

[![在此处输入图像描述](../Images/455c602a9b41e8f392e123621272763b.png)](https://i.stack.imgur.com/qxyVF.png)

# java - 在数组输出方面需要帮助

> ID：10313846
> 
> 赞同：1
> 
> 时间：2012-04-25T10:29:59.700
> 
> 标签：java

我需要一些关于这个数组的帮助来显示输出，但它似乎不像我期望的那样工作。

```
public static void main(String[] args){

            String[][] record = {
                {"abc","123","cbv"},
                {"efg","456","cbb"},
                {"hij","321","ggb"},
                {"xyz","A4","ghy"}};

            for (int i=0;i<4;i++){
                for (int j=0;j<3;j++)
                System.out.println(record[i][j]); 
```

输出显示：

```
abc
123
cbv
efg
456
cbb
hij
321
ggb
xyz
A4
ghy 
```

我需要输出显示为：

```
abc 123 cbv
efg 456 ccb
hij 321 ggb
xyz A4 ghy 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:31:41.143

You should do:

```
for (int i=0;i<4;i++) {
    for (int j=0;j<3;j++) {
        System.out.print(record[i][j] + " ");  // print instead of println
    }
    System.out.println();                      // println (new row)
} 
```

(The inner loop which prints elements in one row should not print line-breaks.)

Or, even better, use `System.out.printf` to make sure all elements are equally wide (this example also uses for each loops):

```
for (String[] row : record) {
    for (String element : row)
        System.out.printf("%5s", element);
    System.out.println();
} 
```

**Output:**

```
 abc  123  cbv
  efg  456  cbb
  hij  321  ggb
  xyz   A4  ghy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:32:28.727

```
for (int i=0;i<4;i++){
    for (int j=0;j<3;j++) {
        System.out.print(record[i][j]);
    }
    System.out.println();
} 
```

should do it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:36:24.560

```
for (int i=0;i<4;i++) {
for (int j=0;j<3;j++) {
    System.out.print(record[i][j] + " ");  // print instead of println

}
System.out.println();                      // println (new row)
} 
```

# java - Java中的线程和观察者模式

> ID：10313855
> 
> 赞同：1
> 
> 时间：2012-04-25T10:31:04.223
> 
> 标签：java, multithreading, observer-pattern

假设我有两个类，Main 类和 Worker 类

```
class Main implements StateChangeListener extends JFrmame{

   public void notifyMe(State state){
        //Change the GUI according to the state
   }  
}

class Worker extends Thread{
    public StateChangeListener listener;
    public void run(){
        listener.notifyMe(state);
    }
} 
```

我的问题是：假设工作者在另一个线程中运行，哪个线程将运行函数**notifyMe()**？
主线程还是工作线程？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:43:58.087

函数调用在调用它的线程的控制下执行。在您的情况下，由于您是从工作线程调用 notifyMe() ，因此工作线程将负责执行方法**notifyMe()**。

您可以使用`Thread.currentThread().getName()`打印线程的名称来测试它。[在此链接](http://docs.oracle.com/javase/6/docs/api/)中查看线程名称的 getter/setter 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:32:17.817

运行工作者的同一线程。

# c# - 在 C# 中打印文档的方法

> ID：10313861
> 
> 赞同：2
> 
> 时间：2012-04-25T10:31:18.367
> 
> 标签：c#, .net, report

有时，我们都需要从 .NET 程序中打印文档。假设一个带有一些文本和图像的简单单页文档。

到目前为止，我知道两种方法：

1.  使用标准 PrintDocument 类
2.  使用 PdfSharp 等工具生成 pdf/doc 文档

我不喜欢第一种方式，因为编写所有这些处理事件的例程需要花费大量时间，而且标准的 PrintPreviewDialog 很丑陋。除此之外，您需要在打印预览和实际打印时生成和缩放 2 个不同的文档。

第二种方式让我很困扰，因为这些免费组件通常是有限的并且文档很少。

您还知道哪些其他打印解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:32:05.107

用于`Crystal Reports`打印。最佳选择国际海事组织

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:36:42.630

除了 WPF 和 XPS 之外，我还没有在 .NET 中看到过优雅的打印解决方案。在这种情况下，您只需在 Xaml 中创建一个 UI 并打印它。但 XPS 通常不是一个可行的选择。我也使用过 XSL-FO（使用[NFop](http://sourceforge.net/projects/nfop/)和后来的[FO.Net](http://fonet.codeplex.com/) - 后者更好，因为更新并且不需要 Visual J#），它可以工作，但学习曲线比较陡峭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-20T19:18:24.920

我试图[在 c# 中的文章 pdf 报告中](http://jsreport.net/blog/pdf-reports-in-csharp)分析可能的选项。

*   **iTextSharp** - 在 c# 中执行报告的命令式方法，(-) 生成可读性不强的代码
*   **Telerik Reporting，DevExpress 报告，Crystal Reports** - 类似的方法，报告编辑器，非常适合简单的工作，能够生成多种格式，(-) 更难团队合并和打印复杂的报告
*   **phantomjs, wkhtmltopdf** - html 到 pdf 的转换, (-) 额外的依赖
*   **jsreport** - 我的解决方案，用于组装 html 报告的 javascript 模板引擎和用于将其打印成 pdf (-) 开销的简单解决方案，额外的依赖

长话短说。我对当前的选项不满意，并开发了[jsreport](http://jsreport.net)作为设计和打印 pdf 报告的解决方案。看看，它是免费的。

# java - How to pass comma separated parameters in a url for the get method of rest service

> ID：10313863
> 
> 赞同：11
> 
> 时间：2012-04-25T10:31:19.443
> 
> 标签：java, web-services, jax-rs, restful-url

I have a webservice like

```
@GET
@Produces("application/json")
@Path("{parameter1}/july/{param2},{param3},{param4}/month")
public Month getResult(@PathParam("parameter1") String parameter1, @PathParam("param2") PathSegment param2 , @PathParam("param3") PathSegment param3, @PathParam("param4") PathSegment param4) {
    return action.getResult(parameter1, new Integer(param2.getPath()), new Integer(param3.getPath()), new Integer(param3.getPath()));
} 
```

If I call this web service from my test class, it works fine; but if I call it through the browser, I get message as cannot find the service.

The url I am using through the browser is

[http://localhost:8080/WebApp/services/seating/mylogin/july/1,0,0/month](http://localhost:8080/WebApp/services/seating/mylogin/july/1,0,0/month)

if I use the url as

[http://localhost:8080/WebApp/services/seating/mylogin/fly/1/0/0/month](http://localhost:8080/WebApp/services/seating/mylogin/fly/1/0/0/month)

and change the path in the service accordingly it works fine, but the requirement is to use comma instead of slash. Is there any way we can use the webservice with comma-separated parameters in the url?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T13:14:51.097

在您的示例中，您使用`PathSegment`的代表整个路径段，在您的情况下为“1,0,0”，因此不能解析为整数。

如果您使用`int`而不是`PathSegment`，则将按照您的预期提取值，并且方法主体会更加简洁。

以下代码对我来说很好：

```
@GET
@Path("{parameter1}/july/{param2},{param3},{param4}/month")
public String commaSeparatedValueDemo(@PathParam("parameter1") String parameter1, @PathParam("param2") int param2, @PathParam("param3") int param3, @PathParam("param4") int param4) {
  return MessageFormat.format("{0}: {1}, {2}, {3}", parameter1, param2, param3, param4);
} 
```

回应

.../一些资源/参数1/七月/1,2,3/月

是

参数1：1、2、3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:48:48.967

对我来说，用逗号分隔多个参数没有问题，即使它们是路径的一部分而不是查询参数。我测试了它，它确实有效。

`int`实际上，如果您不需要检查这些参数的正确性，您甚至可以直接绑定到。我确实使用`@PathVariable`了这些绑定。

```
@GET
@Produces("application/json")
@Path("{parameter1}/july/{param2},{param3},{param4}/month")
public Month getResult(@PathVariable("parameter1") String parameter1, @PathVariable("param2") int param2 , @PathVariable("param3") int param3, @PathVariable("param4") int param4) {
    return action.getResult(parameter1, param2, param3,param3);
} 
```

## 编辑：

至于我测试的代码是这样的：

```
@Controller
public class InfoController {
    @RequestMapping(method = RequestMethod.GET, value = "/seating/{param1},{param2},{param3}/month")
    public String showMonthView(Model uiModel, @PathVariable("param1") int p1, 
            @PathVariable("param2") int p2, @PathVariable("param3") int p3, 
            HttpServletRequest httpServletRequest) {
        LOG.debug(String.format("view:/seating/%d,%d,%d/month", p1, p2, p3));
        uiModel.addAttribute("param1", p1);
        uiModel.addAttribute("param2", p2);
        uiModel.addAttribute("param3", p3);
        return "month";
    }

    @ResponseBody
    @RequestMapping(method = RequestMethod.GET, value = "/seating/{param1},{param2},{param3}/month", produces="application/json")
    public Map<String, Integer> showMonthJson(@PathVariable("param1") final int p1, 
            @PathVariable("param2") final int p2, @PathVariable("param3") final int p3) {
        LOG.debug(String.format("json:/seating/%d,%d,%d/month", p1, p2, p3));
        Map<String, Integer> result = new HashMap<String, Integer>() {{
            put("param1", p1);
            put("param2", p2);
            put("param3", p3);
        }};
        return result;
    }
} 
```

对于第一种方法，正确的视图位于 /seating/month.jsp。

或者，返回由 3 个参数组成的实体并生成 json 或 xml 也没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:48:32.467

URL 参数不是逗号分隔的，它们是 '&' 分隔的。所以你要做的是'&' - 将它们分开。

# emacs - emacs 邪恶模式键映射

> ID：10313864
> 
> 赞同：5
> 
> 时间：2012-04-25T10:31:26.320
> 
> 标签：emacs, evil-mode

是的，我是第一个开始使用 EMACS 但不愿意放弃我所学的 VIM 技能的人。

邪恶绝对是好事。

我遇到的问题是文档太少。显然，我使用了 evil 中定义的键映射的一小部分。

所以我看了一下 evil-maps.el，并得到了很多关于这个文件的问题：

1.  很多键没有映​​射到那里定义的函数
2.  什么是邪恶窗口图？**（找出我自己，它是用于在窗口之间跳转并激活它的键绑定：需要 (setq evil-want-Cw-in-emacs-state 1 ) ）**
3.  什么是运营商待定状态？

evil 是否将其在 evil-maps 文件中列出的所有地图加载到 Emacs 中？

有没有更好的邪恶文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:40:00.297

了解 EVIL 插件的状态需要一些时间，然后这些快捷键就会变得很方便。所以解决方案是一遍又一遍地阅读文档。

# php - Can I make a whole site in node.js?

> ID：10313866
> 
> 赞同：-2
> 
> 时间：2012-04-25T10:31:32.197
> 
> 标签：php, node.js

I want to make a new website. Is it good programming approach if I am make whole site in node.js on server side?

I also know PHP if that is better.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:35:05.267

是的，您可以使用`node.js`. 这样做的好处是您为服务器大小的页面生成和客户端交互使用相同的语言。

例如，这是一个从用户附近的 flickr 查找照片的简单方法：[https ://github.com/ericf/photosnear.me](https://github.com/ericf/photosnear.me)

以上使用[YUI](http://yuilibrary.com/)进行客户端交互。

既然您提到您了解 PHP，那么是否要使用`node.js`. 你想学习如何使用`node.js`吗？然后用`node.js`. 项目进度是否紧迫，您没有时间学习`node.js`？然后使用 PHP。

这些可能是一个很好的开始

*   [http://www.nodebeginner.org/](http://www.nodebeginner.org/)
*   [http://net.tutsplus.com/tutorials/javascript-ajax/learning-serverside-javascript-with-node-js](http://net.tutsplus.com/tutorials/javascript-ajax/learning-serverside-javascript-with-node-js)

我还推荐[Javascript: A Definitive Guide](https://rads.stackoverflow.com/amzn/click/com/0596000480)。第 6 版包含关于服务器端 javascript 和 node.js 的整个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:35:03.030

Node 仍然是一个年轻的平台。虽然您确实可以使用 Node 制作整个网站或 Web 应用程序，但学习该平台需要一些经验，而且对初学者并不是特别友好。我会坚持使用 PHP 来快速将站点组合在一起，并尝试使用 Node，直到你学得足够好，知道什么时候应该使用它。

# android - 为什么程序会抛出错误？如果我在模拟器上定位屏幕或锁定/解锁手机？

> ID：10313867
> 
> 赞同：0
> 
> 时间：2012-04-25T10:31:40.570
> 
> 标签：android, screen-orientation

今天，我发现我的程序在模拟器和手机中有不同的未知错误。因为我对此一无所知，所以任何人都可以给我一些提示吗？

在我的程序中，它存在以下代码：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

**案例1**：程序在模拟器中运行

它可以正常运行，直到我改变了屏幕方向。我不得不调试。我发现它会抛出错误，因为某些值在定向后更改为 null。

以下是logcat：

```
04-25 22:04:35.378: W/dalvikvm(520): threadid=23: thread exiting with uncaught exception (group=0x4001aa28)

04-25 22:04:35.378: E/AndroidRuntime(520): Uncaught handler: thread Thread-15 exiting due to uncaught exception

04-25 22:04:35.388: E/AndroidRuntime(520): java.lang.NullPointerException

04-25 22:04:35.388: E/AndroidRuntime(520):  at com.mytest.testit.Maincore.logicGo(Maincore.java:244)

04-25 22:04:35.388: E/AndroidRuntime(520):  at com.mytest.testit.Maincore.run(Maincore.java:325)

04-25 22:04:35.388: E/AndroidRuntime(520):  at java.lang.Thread.run(Thread.java:1060)

04-25 22:04:35.398: I/dalvikvm(520): threadid=7: reacting to signal 3

04-25 22:04:35.418: I/dalvikvm(520): Wrote stack trace to '/data/anr/traces.txt' 
```

**案例2**：程序正在我的手机中运行

即使我旋转手机，它也可以正常运行。但是如果我锁定和解锁手机，程序会抛出错误。关于这个错误，我不知道如何追踪。这是因为这个问题不会出现在模拟器上。

谁能给我一些提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:28:05.943

当您旋转设备时，将重新创建活动。任何要保存的数据，都需要在 onSaveInstanceState() 中进行；

这里有一个很好的[答案](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state)

# jquery - jquery动态初始化循环插件

> ID：10313871
> 
> 赞同：1
> 
> 时间：2012-04-25T10:31:42.747
> 
> 标签：jquery, jquery-plugins, jquery-cycle

```
 function ReInitializeCyclePlugin() {
    var el = $("#id");
    var eventobject = EVobject;
    var IdToInitialize = $(eventobject.currentTarget).attr("id");

    /* here first we are detaching the cycle plugin */
    el.find("#" + IdToInitialize).cycle("destroy");

    /* cycle plugin reinitializes here */
    el.find("#" + IdToInitialize).cycle({
        fx: $("#cyclescroll").val(),
        easing: $("#cyclebounce").val(),
        speed: 1000,
        timeout: 2000
    });
} 
```

我只想根据用户给定的输入动态地重新初始化循环插件，我正在通过上面的代码进行尝试。但是有一些问题，它不起作用。它成功“销毁”但没有重新初始化。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:11:49.147

您是否尝试过将它们链接在一起？ [http://jsfiddle.net/lucuma/NTB4s/](http://jsfiddle.net/lucuma/NTB4s/)

```
el.find("#" + IdToInitialize).cycle("destroy").cycle({
    fx: $("#cyclescroll").val(),
    easing: $("#cyclebounce").val(),
    speed: 1000,
    timeout: 2000
}); 
```

# c++ - 在哪些情况下调用复制构造函数，如果一个容器被复制

> ID：10313872
> 
> 赞同：7
> 
> 时间：2012-04-25T10:31:56.887
> 
> 标签：c++, stl, constructor

我测试了以下代码：

```
#include <iostream>
#include <vector>

class foo {
public:
    int m_data;
    foo(int data) : m_data(data) {
        std::cout << "parameterised constructor" << std::endl;
    }
    foo(const foo &other) : m_data(other.m_data) {
        std::cout << "copy constructor" << std::endl;
    }
};

main (int argc, char *argv[]) {
    std::vector<foo> a(3, foo(3));
    std::vector<foo> b(4, foo(4));
    //std::vector<foo> b(3, foo(4));
    std::cout << "a = b" << std::endl;
    a = b;
    return 0;
} 
```

我明白了

```
 parameterised constructor
   copy constructor
   copy constructor
   copy constructor
   parameterised constructor
   copy constructor
   copy constructor
   copy constructor
   copy constructor
   a = b
   copy constructor
   copy constructor
   copy constructor
   copy constructor 
```

但是，如果我用复制构造函数替换`std::vector<foo> b(4, foo(4));`，`std::vector<foo> b(3, foo(4));`则不会调用，`a = b`输出为

```
parameterised constructor
copy constructor
copy constructor
copy constructor
parameterised constructor
copy constructor
copy constructor
copy constructor
a = b 
```

为什么在这种情况下不调用复制构造函数？

我正在使用 g++ (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-25T10:44:04.940

在第一种情况下，`a`当您分配给它时需要增长，这意味着它的所有元素必须重新分配（因此被破坏和构造）。

在第二种情况下，`a`不需要增长，因此使用了赋值运算符。

见[http://ideone.com/atPt9](http://ideone.com/atPt9)；添加一个打印消息的重载复制赋值运算符，我们得到第二个示例的以下内容：

```
parameterised constructor
copy constructor
copy constructor
copy constructor
parameterised constructor
copy constructor
copy constructor
copy constructor
a = b
copy assignment
copy assignment
copy assignment 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T10:44:10.000

它使用赋值运算符。

```
#include <iostream>
#include <vector>

class foo {
public:
    int m_data;
    foo(int data) : m_data(data) {
        std::cout << "parameterised constructor " << m_data << std::endl;
    }
    foo(const foo &other) : m_data(other.m_data) {
        std::cout << "copy constructor " << m_data << " " << other.m_data << std::endl;
    }

    foo& operator= (const foo& other){
        std::cout << "assignment operator " << m_data << " " << other.m_data << std::endl;
    }
};

main (int argc, char *argv[]) {
    std::vector<foo> a(3, foo(3));
    //std::vector<foo> b(4, foo(4));
    std::vector<foo> b(3, foo(4));
    std::cout << "a = b" << std::endl;
    a = b;

    for(std::vector<foo>::const_iterator it = a.begin(); it != a.end(); ++it){
        std::cout << "a " << it->m_data << std::endl;
    }
    for(std::vector<foo>::const_iterator it = b.begin(); it != b.end(); ++it){
        std::cout << "b " << it->m_data << std::endl;
    }
    return 0;
} 
```

```
parameterised constructor 3
copy constructor 3 3
copy constructor 3 3
copy constructor 3 3
parameterised constructor 4
copy constructor 4 4
copy constructor 4 4
copy constructor 4 4
a = b
assignment operator 3 4
assignment operator 3 4
assignment operator 3 4
a 3
a 3
a 3
b 4
b 4
b 4 
```

有关原因，请参阅 Olis 的答案。

# linux - 如何绕过 RPM 大小限制？

> ID：10313873
> 
> 赞同：2
> 
> 时间：2012-04-25T10:32:02.787
> 
> 标签：linux, rpmbuild

我正在构建相当大的 RPM（~5Gb）并收到以下消息：

```
`error: Package too large (> 2147483647 bytes)` 
```

有没有办法忽略这个限制？我正在使用 RPM 4.4.2.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:35:20.713

您可以将包拆分为更少的 2Gb 包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:42:53.770

您描述的是适用于 RPM 版本 4.4 的限制，您可以在 Red Hat Enterprise Linux 5 中找到该限制。我可以验证在 Red Hat Enterprise 上运行 rpm-4.8.0-27.el6.x86_64 时此限制不适用Linux 6.3。

我已经使用上述版本的 RPM 在 RHEL6.3 上成功构建并签署了大小为 5.2GB 的 RPM。

附带说明，即使在某些情况下您最终会得到如此大小的 RPM（例如，如果您正在打包 IBM WebSphere），如果您的 RPM 超过 1GB - 这通常表明您正在尝试do - 是错误的 :-) 例如，您可能将大型图像文件或 zip 存档打包到 RPM 中，这与 RPM 的目的背道而驰。

# rest - Correct REST response for "You must POST here before doing anything else"

> ID：10313878
> 
> 赞同：2
> 
> 时间：2012-04-25T10:32:16.853
> 
> 标签：rest

We have a login REST service:

```
POST /sessions 
```

When the users password has expired the next thing that must happen is that the client application will present a change dialog window and then change the users password via:

```
PUT /users/_ID_/password 
```

What is the best way to communicate this intent to the client? At first I wanted to have `POST /sessions` return `See Other (303)`. But this causes a `GET` on `/users/_ID_/password`. I could return a `Multiple Choices (300)` response which the client does not do an automatic get on, or I could return an `OK (200)` and tag in the JSON session object returned.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:53:27.187

查看[HTTP 状态代码定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)，我认为以下是最合适的：

> **409 冲突**
> 
> 由于与资源的当前状态冲突，无法完成请求。仅在预期用户可能能够解决冲突并重新提交请求的情况下才允许使用此代码。响应正文应该包含足够的信息让用户识别冲突的来源。理想情况下，响应实体将包含足够的信息供用户或用户代理解决问题

与会话资源的当前状态存在冲突，因为用户需要更改密码才能创建会话。您可以在此响应中将 url 返回到更改密码屏幕，以便客户端知道去哪里解决冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:17:10.007

> 起初我想要`POST /sessions`return `See Other (303)`。

这是不正确的。它本质上是在说*“不要`POST`在这里`POST`开会，在那边开会”。* 您将依赖带外信息和硬编码行为来识别情况并非如此，您实际上应该`POST`在那里使用新密码。

> 我可以返回`Multiple Choices (300)`客户端不自动启动的响应

但是您没有提供多种选择。

> 或者我可以`OK (200)`在返回的 JSON 会话对象中返回一个 and 标记。

POST 不成功，因此您不应使用`200`.

您*是真的*在要求“正确的 REST 响应”，还是在问如何使用 HTTP 实现特定的效果？因为您似乎在寻找漏洞而不是正确的设计。

如果一个请求进来并且授权失败，那么用`401 Unauthorized`一个`WWW-Authenticate`header 来响应。然后使用指示用户需要更改密码的自定义身份验证方案。

# entity-framework - 有没有办法对 Entity Framework 4.0 中表的主键以外的任何列进行排序？

> ID：10313881
> 
> 赞同：0
> 
> 时间：2012-04-25T10:32:21.243
> 
> 标签：entity-framework

我正在研究 Entity Framework 4.0 POCO 并寻找一种方法来在列表页面上使用表/实体中的主键以外的字段对我的网格进行排序。我不想添加自定义页面，尽管它是解决方案之一，因为如果可以这样做，那将是开销。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:35:44.043

如果您返回的结果类似于 IEnumerable< YourPocoClass > 或 IQueryable< YourPocoClass >，您始终可以使用 .OrderBy(p => p.SomePropertyOtherThanPK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:38:34.813

你可以这样做：

```
var list = yourDbContext.YourDbSet.OrderBy(m=>m.Property); 
```

或者，如果您想按来自客户端网格表单的字符串排序，那么您可以使用 Dynamic Linq： [http ://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1 -使用-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T05:17:03.280

解决了以下属性的问题。

我添加了一个用于添加排序列的新属性类 - **DefaultSortOrderColumn**

```
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public class DefaultSortColumnAttribute : Attribute
{
    public DefaultSortColumnAttribute(string sortColumn, bool sortDescending)
    {
        this.SortColumn = sortColumn;
        this.SortDescending = sortDescending;
    }

    public string SortColumn { get; private set; }

    public bool SortDescending { get; private set; }
} 
```

然后将此属性用于部分实体类，即您的实体的元数据类，我们需要为此使用排序列

```
[DefaultSortColumn("YourSortColumn", false)]
public partial class YourDBEntity
{
} 
```

然后，我们可以在 PageTemplates\List.aspx 中使用该属性来确定是否定义了任何排序列，并使用 Page_Load 中的排序列进行排序。

```
MetaTable table = GridDataSource.GetTable();

if (!IsPostBack && table.Attributes.OfType<DefaultSortColumnAttribute>().Count() > 0)
{
    string sortColumn = table.Attributes.OfType<DefaultSortColumnAttribute>().FirstOrDefault().SortColumn;
    bool sortDescending = table.Attributes.OfType<DefaultSortColumnAttribute>().FirstOrDefault().SortDescending;
    GridView1.Sort(sortColumn, sortDescending ? SortDirection.Descending : SortDirection.Ascending);
} 
```

该属性可以进一步扩展并设置为属性而不是类。这样，我们就可以对多列进行排序。

感谢那些回复。快乐编码。

# windows-7 - 远程访问 Sharepoint 2010

> ID：10313893
> 
> 赞同：0
> 
> 时间：2012-04-25T10:33:09.010
> 
> 标签：windows-7, sharepoint-2010, windows-server-2008

我对sharepoint 2010非常陌生。由于我的机器上有Win 7 32位，我无法安装SP2010.so，我想将它安装在另一台使用windows server 2008作为系统操作员的机器上。然后我想要使用互联网或共享域从我的机器（Win7 x86）访问共享点。有可能吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:43:48.277

是的，这是可能的。

对 SharePoint 网站甚至管理中心的访问都是基于 Web 浏览器的，因此您只需确保可以通过 HTTP 从 Windows 7 计算机连接到服务器。

# iphone - iPhone view rotation/swinging animation

> ID：10313901
> 
> 赞同：0
> 
> 时间：2012-04-25T10:33:57.293
> 
> 标签：iphone, animation, rotation

I need to create a rotation animation for a uiimageview. The best analogy I can think of is a picture hanging on a wall. The nail that holds up the picture is placed at the top of the picture.

If I pushed the picture I want to model the slight swinging motion of the picture back and forth until it eventually reverts back its its starting position.

I know I'll first have to start by changing the view's anchor point but I'm unsure how to approach the rest of the problem. I could use CABasicAnimation but I'm guessing that would be ridiculously complex/overkill to get a relatively simple animation.

Any suggestions?

[EDIT]

This [answer](https://stackoverflow.com/a/5722296/467608) actually worked for me nicely using blocks :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:51:09.327

我认为使用`CABasicAnimation`动画`transform.rotation`属性和选择正确的计时功能应该不会太难。类似于以下内容：

```
 CABasicAnimation* anim = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    [anim setToValue:[NSNumber numberWithFloat:startAngle]];
    [anim setFromValue:[NSNumber numberWithDouble:endAngle]];
    [anim setDuration:duration];
    [anim setRepeatCount:count];
    [anim setAutoreverses:YES];
    [anim setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
    [selectedCoverView.layer addAnimation:anim forKey:@"SwingingRotation"]; 
```

关键是选择合适的计时功能；[`+ (id)functionWithControlPoints:(float)c1x :(float)c1y :(float)c2x :(float)c2y`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CAMediaTimingFunction_class/Introduction/Introduction.html#//apple_ref/occ/clm/CAMediaTimingFunction/functionWithControlPoints%3a%3a%3a%3a)如果预定义的都没有问题，您可以使用（其中控制点定义贝塞尔曲线）定义任意时间函数。

# .net - Downgrading from dotnet 4.0 to 3.5 "breaks" the navigationmenu css on a Visual Studio app

> ID：10313903
> 
> 赞同：2
> 
> 时间：2012-04-25T10:34:04.340
> 
> 标签：.net, css, .net-3.5

I am putting together a quick and dirty website using the asp.net 4.0 template in Visual Studio 2010.

My ISP only supports 3.5\. When I convert from 4.0 to 3.5 the navigationmenu css screws up (ie the links just appear as normal links).

The code is just:

```
<asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                    <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
                </Items>
            </asp:Menu> 
```

And the CSS is:

```
 div.hideSkiplink
{
    background-color:#dba201;
    width:100%;
}

div.menu
{
    padding: 4px 0px 4px 8px;
    color:Red;
}

div.menu ul
{
    list-style: none;
    margin: 0px;
    padding: 0px;
    width: auto;
}

div.menu ul li a, div.menu ul li a:visited
{

    color: #fff;
    display: block;
    line-height: 1.35em;
    padding: 0px 20px;
    text-decoration: none;
    white-space: nowrap;
}

div.menu ul li a:hover
{

    text-decoration: none;
    font-weight:bold;
}

div.menu ul li a:active
{
    font-weight:bold;
    text-decoration: none;
} 
```

ie pretty much the default with a couple of minor tweaks.

Any idea why it doesn't render the css, and how I can fix it?!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:23:05.660

*.Net 4.0 使用li*和*ul*标签创建导航菜单。

我正在尝试调整 CSS，因为 .Net 3.0 使用*div*和*span*来创建导航菜单。

如果有人可以提供帮助。

生成的导航菜单：

```
<div class="clear hideSkiplink">
    <a href="#ctl00_ctl00_NavigationMenu_SkipLink" style="display:inline-block;height:1px;width:1px;">
        <img src="/WebResource.axd?d=96sED37vRbOG5ljhopJ0HzPIl0UI63LUPEUULLu3zBeOX7fZmKkMVsgvI2x7KFlcdPVEOKtFPANjh4h2WI8BNTK7p7o1&amp;t=634604353351482412" alt="Pular Links de Navega&ccedil;&atilde;o" style="border-width:0px;" />
    </a>
    <div id="ctl00_ctl00_NavigationMenu">
        <span>
            <a class="ctl00_ctl00_NavigationMenu_1" href="Home.aspx">Home</a>
        </span>
        <span>
            <a class="ctl00_ctl00_NavigationMenu_1" href="About.aspx">About</a>
        </span>
    </div>
    <a name="ctl00_ctl00_NavigationMenu_SkipLink"></a>
</div> 
```

# html - 用于显示整个 fb 弹出对话框的 HTML、CSS 设置

> ID：10313907
> 
> 赞同：0
> 
> 时间：2012-04-25T10:34:28.137
> 
> 标签：html, css

这个问题困扰了我好几天，找不到解决方法。因此，我真的很感激有人可以帮助我。这就是问题所在：当用户单击 facebook LIKE 按钮时，会弹出“post to facebook”对话框。问题是弹出窗口没有完全显示 - 只是部分显示。请看一下这个链接： http: [//kbk-siroki.herokuapp.com/blog/posts/konektori-u-engleskom-jeziku](http://kbk-siroki.herokuapp.com/blog/posts/konektori-u-engleskom-jeziku)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:56:52.927

您需要在 CSS 中进行以下更改：

```
.main {width: 100%}
.container_12{width: 100%}
.footer_bg { width: 100%; left:0; margin-left: 0px;} 
```

# iphone - 添加 UIButton 以在视频播放完毕后查看

> ID：10313908
> 
> 赞同：-1
> 
> 时间：2012-04-25T10:34:35.093
> 
> 标签：iphone, ios, xcode, ios5, uibutton

一旦我打开我的应用程序，我必须播放视频，当视频完成时，我必须在该视频上添加一个 UI 按钮，是否可能，我已经搜索但我找不到链接，如果有人有通过这种情况，并解决了它，你能告诉我怎么做吗？添加视频的代码是：

```
- (void)viewDidLoad {
    NSString *url = [[NSBundle mainBundle] pathForResource:@"splash_screen"ofType:@"mp4"];         
    MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:url]];  
    player.view.frame = self.view.bounds;  
    [self.view addSubview:player.view];   
    [player play];   
    [super viewDidLoad];  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:40:51.983

您可以使用 -

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(movieFinished) 
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:nil]; 
```

一旦电影完成，这将调用选择器“movieFinished”，之后您可以进行所需的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:41:57.957

您可以使用`MPMoviePlayerPlaybackDidFinishNotification`通知。欲了解[更多信息](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T10:42:18.027

您可以添加观察者来通知电影的结束。

观察者可以设置如下：

```
[[NSNotificationCenter defaultCenter]
                    addObserver: self
                       selector: @selector(myMovieFinishedCallback:)
                           name: MPMoviePlayerPlaybackDidFinishNotification
                         object: player]; 
```

有关更多信息，请参阅[Apple 文档](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingVideo/UsingVideo.html#//apple_ref/doc/uid/TP40009767-CH3-SW1)， **清单 2-1** 播放全屏电影

# javascript - JQuery - 获取事件对象的父级

> ID：10313910
> 
> 赞同：2
> 
> 时间：2012-04-25T10:34:43.117
> 
> 标签：javascript, jquery

我将一个函数作为闭包绑定到这样的锚点：

```
jQuery('#mydiv').find('#mya').bind('click', function(e){
    myotherfunction(e);
}); 
```

在我的函数`myotherfunction(obj)`中，`obj`是一个事件，我如何获得父元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T10:36:22.527

有了这个：

```
jQuery(obj.target).parent(); 
```

您可能希望将代码重构为：

```
jQuery('#mya').bind('click', function(e){
    myotherfunction(e.target);
});

function myotherfunction(obj){
    var $parent = jQuery(obj).parent();
    ...
    ...
} 
```

**最佳实践：**

*   `obj`是事件变量的错误名称。
*   `id`应该是唯一的，因此您只能通过它进行搜索：
    `jQuery('#mydiv').find('#mya')`=>`jQuery('#mya')`

# java - 生成 SER 证书文件

> ID：10313920
> 
> 赞同：0
> 
> 时间：2012-04-25T10:35:04.420
> 
> 标签：java, security, cryptography

我正在阅读[indianwebproxy](http://sourceforge.net/projects/indiawebproxy/)的源代码，它在使用 ssl 时使用**proxycertificate.ser**文件作为证书。
问题是该证书已过期，我想生成自己的证书，以便我可以在 Firefox 的真实服务器上对其进行测试。
你们能指导我生成带有 .ser 扩展名的 java 证书文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:56:25.663

`.ser`扩展可能只是意味着它是一个Java[序列化对象](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)。[X509Certificate](http://docs.oracle.com/javase/6/docs/api/java/security/cert/X509Certificate.html)类实际上实现了 Serializable。

我的猜测是你只需要序列化你的 X509Certificate 实例。

# perl - 如何在perl的Expect模块中使expect命令搜索相同字符串的多次出现

> ID：10313928
> 
> 赞同：1
> 
> 时间：2012-04-25T10:35:22.710
> 
> 标签：perl, perl-module, expect

我有一个场景，我正在使用 perl 的 expect 模块来自动化基于终端的应用程序。我将正则表达式作为参数传递给期望命令，如下所示

```
$ssh->expect(20, '-re',
    'Dev:(\d+)\W*Bdaddr:((?:[[:xdigit:]]{2}:){5}[[:xdigit:]]{2})\W*Name:' ); 
```

所以我想对期望使用的字符串缓冲区中多次出现的模式进行相同的正则表达式搜索。如何实现。另外，我想知道如何捕获这些多次出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:19:38.367

检查这是否有帮助。

```
use Expect;

my $Obj = Expect->new();

$Obj->spawn("/some/tst.bash");

$Obj->expect(undef,
    [ qr/(?:.*?Hello){2}/i, sub {
            my $Self = shift;
            print "Matched qr/.*?Hello.*?Hello/i..\n";
            exp_continue; }
    ]
); 
```

/some/tst.bash看起来像这样**。**

```
echo "Hello! This is for testing. !Hello" 
```

基本上，正则表达式**(?:.*?Hello){2}**查找任何/无，然后是 Hello 两次。所以本质上，以下内容也会匹配**HelloHello**

# php - yii 框架中的主题和布局

> ID：10313930
> 
> 赞同：8
> 
> 时间：2012-04-25T10:35:32.290
> 
> 标签：php, layout, yii, themes

我是 Yii 框架的新手，正在创建基于模块的 CRM。使用不同的教程，我可以创建自己的主题，但现在我被困在某一点上。

在我的主题中，整个应用程序的左上角`<nav>`和左上角`<nav>`保持*不变*，直到用户登录。这就是为什么我将它作为**main.php**的一部分，但是在登录页面中没有按钮可以显示，只有简单的*登录表单*带有 2 个*文本字段*。

如何使用自定义主题在我的应用程序中实现此表单？

我试图在该特定操作中定义布局但没有成功。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T11:17:04.437

为您的视图使用自定义布局是正确的方法。您可以在控制器操作或视图中设置布局。

```
$this->layout = "//layouts/mylayout"; 
```

请注意，默认布局*column1.php*和*column2.php*也使用*main.php*布局文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T09:21:47.780

一步一步试试这个：

1.  创建新主题

    您可以创建一个新主题并将其添加到目录 **Application_Root/themes**。

    查看主题/经典目录以了解该目录的结构。重要的文件（在这个阶段）是：- **Application_Root/themes/views/layouts/main.php**

2.  自定义您的主题内容

    将 css、图像、js 文件等复制到正确的目录，然后根据自己的喜好更改 main.php 文件。例如，如果你的 main.php 说

    <link href="css/mystyle.css" rel="stylesheet">

    然后你会有一个文件 **Application_Root/css/mystyle.css**

3.  创建内容占位符。

    在您的 main.php 中的某处，将有一个用于动态文本的占位符，由 .php 指定。

    <?php 回显 $content; ?>

4.  告诉 yii 使用主题。通过在最后一行（包含右括号）之前添加以下行来更改文件**Application_Root/protected/config/main.php 。**

    '主题'=>'surveyhub'

5.  创建布局占位符。

    创建一个将写入 main.php 的 $contents 部分的 HTML 段。将其称为例如 one_column.php。因此，文件路径将是**Application_Root/themes/views/layouts/one_column.php**在该文件中，您希望放置动态文本，创建一个占位符。

    <?php 回显 $content; ?>

6.  告诉 Yii 使用布局。

    在文件**Application_Root/protected/components/Controller.php**中，添加或修改布局变量为：

    public $layout='//layouts/one_column.php';

7.  刷新页面

# ajax - 评论插件无法通过 ajax 更新

> ID：10313934
> 
> 赞同：0
> 
> 时间：2012-04-25T10:35:41.063
> 
> 标签：ajax, facebook-social-plugins, facebook-comments

自 2012 年 4 月 5 日以来，我们的视频页面上的 facebook 评论插件出现问题。

我们正在通过 ajax 加载新的内容和 facebook 评论标签，然后调用 FB.XFBML.parse() 来更新评论插件和点赞按钮。这在过去运行良好，但现在评论不再正确更新。评论确实会加载，但插件的加载动画永远不会消失，评论的高度也不会调整。

这是发生错误时的控制台输出：
Permission denied to access property 'fb_xdm_frame_http'
Permission denied to access property 'fb_xdm_frame_https'

重现问题的步骤：
1\. 请访问[http://www.landwirt.com/Videos](http://www.landwirt.com/Videos)
2\. 从右侧列表中选择一个新视频
3\. 查看底部的 facebook 评论插件

注意：评论在初始页面加载时工作正常，仅当通过 ajax 加载新内容时才会出现问题

它看起来像 facebook API 中的一个错误，但也许我们只是做错了什么？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:18:30.477

从以下位置移动后，我注意到了同样的变化：

```
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=MY_APP_ID";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

正文中的语法为：

```
<script type="text/javascript" src="//connect.facebook.net/en_US/all.js"></script> 
```

在头。看来它需要更改为

```
<script type="text/javascript" src="//connect.facebook.net/en_US/all.js#xfbml=1&appId=MY_APP_ID"></script> 
```

现在可以正常工作了。

# ajax - 如何在 Json 中定义变量？

> ID：10313935
> 
> 赞同：-1
> 
> 时间：2012-04-25T10:35:42.397
> 
> 标签：ajax, json, variables

我想在 Json 回调中定义一个变量。

代码;

```
$("select").change(function () {
          var $variable = "";
          $("select option:selected").each(function () {
                $variable += $(this).text() + " ";
              });
          $("div.yaz").text($variable);

      $('#result').html('loading...');

    $.getJSON('program-bilgileri.php', function(JSON){
        $('#result').empty();

        $.each(JSON.$variable, function(i, program){
            $('#result')
            .append(program.isim +'<br />')
            .append(program.bilgi+'<br />')
            .append(program.adres+'<hr />');
      });
    });
    })
    .trigger('change'); 
```

program-bilgileri.php 返回；

```
{
   "programlar":[
      {
         "isim":"Zone Alarm",
         "bilgi":"bilgisayarın güvenliğini sağlar",
         "adres":"www.zonealarm.com"
      },
      {
         "isim":"Opera",
         "bilgi":"güvenli ve hızlı bir web tarayıcısıdır",
         "adres":"www.opera.com"
      },
      {
         "isim":"Photoshop",
         "bilgi":"güçlü bir imaj işleme yazılımıdır",
         "adres":"www.adobe.com"
      }
   ]
} 
```

问题出在“$.each(JSON.$variable, function(i, program)”如果我在 JSON 中定义 $variable 它不起作用。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:43:00.587

我看到的问题是

*   在`change`您正在使用的事件中，`$("select option:selected")`它会查找`select`页面中的所有元素，而不仅仅是更改的元素。
    改为使用`$(this).children('option:selected')`。
*   我假设您允许对`select`元素进行多项选择，这就是您`+=`使用`$variable`.. 的原因（*您还在末尾添加了一个空格*）。但是，这意味着变量将类似于`"programlar "`or `"programlar somethingelse"`。您返回的 JSON 虽然具有`programlar`. 一个单词，没有空格..所以当你这样做`JSON[$variable]`是根据变量中的名称访问元素的正确方法时，它不匹配。

如果`<select>`元素不允许多选，则解决方案是

```
$("select").change(function() {
    var $variable = $(this).children("option:selected").text();

    $("div.yaz").text( $variable );

    $('#result').html('loading...');

    $.getJSON('program-bilgileri.php', function(JSON) {
        $('#result').empty();
        $.each(JSON[$variable], function(i, program) {
            $('#result')
                .append(program.isim + '<br />')
                .append(program.bilgi + '<br />')
                .append(program.adres + '<hr />');
        });
    });
}).trigger('change'); 
```

* * *

如果确实是多选并且每个选项都可以出现在 JSON 中，那么您必须检查在变量中找到的每个选项。

```
$("select").change(function() {
    var $variable = $(this).children("option:selected").map(function(){
                           return $(this).text();
                    }).get();

    $("div.yaz").text( $variable.join(' ') );

    $('#result').html('loading...');

    $.getJSON('program-bilgileri.php', function(JSON) {
        $('#result').empty();

        for (index=0, length = $variable.length; index < length; index ++) {
            $.each(JSON[$variable[index]], function(i, program) {
                $('#result')
                    .append(program.isim + '<br />')
                    .append(program.bilgi + '<br />')
                    .append(program.adres + '<hr />');
            });
        }
    });
}).trigger('change'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:50:23.527

尝试

```
$.each(JSON['programlar'], function(i, program) ... ); 
```

这将遍历您从 PHP 返回的 JSON 对象的这一部分：

```
 {
     "isim":"Zone Alarm",
     "bilgi":"bilgisayarın güvenliğini sağlar",
     "adres":"www.zonealarm.com"
  },
  {
     "isim":"Opera",
     "bilgi":"güvenli ve hızlı bir web tarayıcısıdır",
     "adres":"www.opera.com"
  },
  {
     "isim":"Photoshop",
     "bilgi":"güçlü bir imaj işleme yazılımıdır",
     "adres":"www.adobe.com"
  } 
```

# magento - Magento - 将产品属性设置为使用默认值

> ID：10313936
> 
> 赞同：7
> 
> 时间：2012-04-25T10:35:43.627
> 
> 标签：magento, mage, magento-1.6

这已经被问过很多次了，但没有有效的答案。

我有多家商店，并且某些属性已被覆盖。我想通过脚本将这些属性更改为“使用默认值”。

这是显示商店视图和“使用默认值”复选框 的图像[http://dl.dropbox.com/u/3209649/storeviews-and-defaultvalues.png](http://dl.dropbox.com/u/3209649/storeviews-and-defaultvalues.png) *（还不允许发布图像）*

在**app/code/core/Mage/Adminhtml/controllers/Catalog/ProductController.php**中，当为任何属性选择了“使用默认值”时，setData() 与**false一起用于第二个参数。**

```
/**
 * Check "Use Default Value" checkboxes values
 */
if ($useDefaults = $this->getRequest()->getPost('use_default')) {
    foreach ($useDefaults as $attributeCode) {
        $product->setData($attributeCode, false);
    }
} 
```

以下代码尝试使用相同的方法将商店 3 中的产品 1 的“名称”属性设置为“使用默认值”。

```
require_once '../app/Mage.php';
Mage::app(3);

$product = Mage::getModel('catalog/product')->load(1);

$product->setData('name', false); # as used in ProductController.php
$product->save(); 
```

使用

```
$product->setData('name', 'anything'); 
```

正确地将“name”属性设置为“anything”，但**false**未将其设置为“使用默认值”

“使用默认值”未存储在数据库中的任何位置，因此在管理界面的控制器中必须有另一个删除属性行的过程？

此处的相关链接-> [http://pastebin.com/raw.php?i=j7fwu9H6](http://pastebin.com/raw.php?i=j7fwu9H6) （也不允许发布链接）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T13:40:12.700

这不起作用，因为您需要将当前存储作为此类操作的*管理存储。*

要使特定的商店视图使用给定属性的默认值：

```
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

$product = Mage::getModel('catalog/product')
    ->load($product_id)         // in your case: 1
    ->setStoreId($store_id)     // in your case: 3
    ->setData($attr, false)     // in your case: 'name'
    ->save(); 
```

# cocoa - 非方形 NSButton

> ID：10313938
> 
> 赞同：3
> 
> 时间：2012-04-25T10:35:46.150
> 
> 标签：cocoa, nsbutton

如何创建具有非方形“命中区域”的 NSButton？

例子：

![在此处输入图像描述](../Images/b6b9958fb50ee122f6ef80d4d28491af.png)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:15:48.727

您可能可以继承 NSButton 并覆盖`hitTest:`以在您希望可点击的区域之外返回 nil。（`[super hitTest:]`在里面时返回。）

[文档在这里。](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/hitTest%3a)

# linux - 在远程计算机上运行脚本时如何在我的计算机上发出“哔”声？

> ID：10313939
> 
> 赞同：5
> 
> 时间：2012-04-25T10:35:55.237
> 
> 标签：linux, bash

我在远程机器上运行一个长脚本，我想在脚本结束时听到哔声。在我的机器上，我可以在脚本末尾添加：

```
echo -e '\a' > /dev/console 
```

但这不适用于抱怨的远程机器：

```
-bash: /dev/console: Permission denied 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:54:07.993

您可以通过将脚本作为参数传递给 ssh 来运行脚本，然后在本地回显哔声：

```
ssh user@host /path/to/script; echo -e '\a' > /dev/console 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:51:48.343

也许您可以使用`/dev/tty`而不是`/dev/console`. （我不知道如何`ssh`处理哔声，所以也许你应该启动一个终端模拟器，例如`ssh -X -f remotehost xterm`）。

# java - 如何在我的 Android 项目中使用第二个 Java 类？

> ID：10313942
> 
> 赞同：0
> 
> 时间：2012-04-25T10:36:10.193
> 
> 标签：java, android, android-emulator, kana

我正在开发一个 Android 项目，每当我尝试启动它时都会收到“不幸的是，Kana 已停止”错误。假名是我的项目的名称。我是 Android 开发的新手，我认为问题是我从 MainActivity 类上的第二个 java 类实例化了一个对象，我想这不行吗？

如果是这种情况，除了活动（也需要 XML 文件）之外，我如何使用其他 Java 类？我的意思是，我的 Java 类不是 Activity，我希望它在后台运行，只是为了使用它的方法。

有人能帮助我吗？请原谅我糟糕的英语，如果您需要更多信息，我会尽力解释。

我的活动：

```
package kana.menu;

import android.app.Activity;
import android.os.Bundle;
import android.widget.*;
import android.view.*;

public class KanaActivity extends Activity {
    /** Called when the activity is first created. */

    private TextView tv1;
    private EditText et1;
    private Mensaje m1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv1=(TextView)findViewById(R.id.textView1);
        et1=(EditText)findViewById(R.id.editText1);
    }

    public void mensaje(View view){
        m1=new Mensaje("Hola");
        tv1.setText(m1.getMensaje()+et1.getText().toString());
    }

} 
```

我要实例化的 java 类：

```
package kana.menu;

public class Mensaje {

private String msg="";

    public Mensaje(String mensaje){
        msg=mensaje;
    }

    public Mensaje(){}

    public void setMensaje(String mensaje){
        msg=mensaje;
    }
    public String getMensaje(){
        return this.msg;
    }
    public void borrarMensaje(){
        this.msg="";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:39:33.480

从您的活动中实例化一个 java 类是完全可以的。如果您的 java 类不是一个活动，那么它也不需要 XML 文件。无论您在做什么都是完全合法的，只要正确实施就应该可以工作。如果您可以共享一些代码，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:43:30.303

也许您的应用程序由于异常（Nullpointer？）而崩溃。正如 Anurag 所说，使用“普通”java 类是完全合法的，它们不需要任何 xml 或 sth。如果您可以向我们发布一些代码，那会容易得多；）

# arrays - 拉斯维加斯算法运行时分析

> ID：10313944
> 
> 赞同：3
> 
> 时间：2012-04-25T10:36:14.663
> 
> 标签：arrays, algorithm

在 n 个元素的数组中，如果 n/2 是重复元素，其余元素不同，我们可以使用 Las Vegas 算法在 o(logn) 时间内得到重复元素。

还有另一个问题说：使这个算法o（logn）即（n / k重复元素，其中k =？）所需的最小重复次数是多少，如果重复元素是root（n），运行时间是多少？

我的结果表明，如果重复元素是 root(n)，则它不是 o(logn)，但我无法使用 Las Vegas 算法找到这个问题的松散界限。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:24:07.010

“拉斯维加斯”不是算法；这是一种算法。显而易见的算法是随机均匀地对元素对进行采样，直到它们匹配。当数组中有一个元素重复 n/2 次时，每对的成功概率为 ((n/2)/n)((n/2-1)/(n-1)) = 1/4 - O (1/n)，因此预期的运行时间是 1/(1/4 - O(1/n)) = 4 + O(1/n) = O(1) 个采样对。

由于这可能是家庭作业，因此*您*要弄清楚如何针对不同的重复次数调整分析。

# frameworks - 实体框架类命名约定 v 老派数据库命名约定

> ID：10313945
> 
> 赞同：0
> 
> 时间：2012-04-25T10:36:16.227
> 
> 标签：frameworks, ado.net, entity

我正在为我的下一个项目使用某种数据生成技术，并对使用 Visual Studio 2010 的 ADO.NET 实体框架感到好奇。我是实体框架的新手，所以请保持温和。

我对类命名的偏好一直是驼峰式命名法。例如客户网站。我对数据库命名的偏好一直是带下划线的小写字母。例如 customer_site。这似乎是过去十年的常态，我与许多公司的数据库管理员一起工作，这就是我采用这种技术的原因。

使用实体框架生成我的类，它总是使用表名，所以我的类名变成了customer_site。我讨厌。

我正在通过原型进行中间编码，其中数据库有很多表（比如大约 40 个）。目前，我一直在研究自己的数据模型，但我厌倦了手动编码字段和属性。它是一个带有标准 CRUD 的 VB.NET WinForm 应用程序，适用于顶部有各种花里胡哨的实体。

是否可以让实体框架类生成器使用我想要的命名约定？还是我需要更改我的数据库命名约定？或者只是使用实体框架类生成器给我的东西 - customer_site 作为类名。

有什么想法吗？

谢谢，

安德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:13:52.177

如[本问题](https://stackoverflow.com/questions/4493819/ef4-ctp5-code-first-approach-ignores-table-attributes)所述，您可以在实体和表之间设置映射，从而使您能够拥有不同的表名和类名。您可以通过覆盖`DbContext.OnModelCreating`或使用`TableAttribute`.

我会说，如果你愿意这样做，你应该为你的表和实体坚持不同的命名约定。

# windows - 自定义错误报告（XP 及以上）

> ID：10313949
> 
> 赞同：1
> 
> 时间：2012-04-25T10:36:28.467
> 
> 标签：windows, visual-c++, error-reporting, windows-error-reporting

这是一个有点复杂的问题，有几个问题。随意只回答您有答案的问题。

我的任务是在我们的几个组件出现 Windows 异常的情况下创建小型转储，并支持 XP SP3 作为最小操作系统。组件包括：

*   独立的 C++ 应用程序
*   在已知浏览器中使用的 CSP 和 PKCS11 库 (DLL)
*   一个 UI 和一个非 UI 服务
*   静态库，前面三点都用到

要求是拥有类似 WER（从 XP 开始）之类的东西，但是将报告发送到专用供应商服务器，而不是 Microsoft 当前的 Winqual 等效服务器。如果可以将报告功能包装在一个静态库中，那就太好了。

不过也有问题。DLL 是特殊的野兽。仅当 DLL 代码中发生故障时如何生成报告？服务可能还需要一些特殊处理，我目前不知道。

首先，是否有一个已知的开源库可以帮助我完成这项任务？如果没有，我将不得不自己动手。

我的第一个想法是在我的每个模块中都有一个睡眠看门狗线程。该线程只是等待一个事件，该事件将从未处理的[异常过滤器](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681401%28v=vs.85%29.aspx)中设置。该线程将使用[MiniDumpWriteDump](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx)生成报告，通过互联网发送它然后完成，在提到的过滤器中，我们将等待线程结束，然后终止进程。对此解决方案有任何想法吗？比如本地系统账户下的Windows服务能不能上网？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:20:28.393

您不需要创建“等待异常”的线程。只需使用 UnhandledExceptionFilter 注册您自己的异常处理程序。看[这个](http://www.debuginfo.com/articles/effminidumps.html)网址，很好的解释了当异常发生时如何取MiniDumpWriteDump。

在本地系统凭据下运行的 Windows 服务没有网络访问权限。

# iphone - 在 IOS 中录制广播流

> ID：10313951
> 
> 赞同：0
> 
> 时间：2012-04-25T10:36:51.630
> 
> 标签：iphone, objective-c, ios5, streaming, buffering

我正在开发广播应用程序，我想在点击录制按钮时录制实时广播流。它应该只录制广播流的声音。目前我正在从 Mike 录制，但这不是我想要的方式，因为它还捕获了周围/背景的声音。我确实读过几篇文章，但它们都是关于 AVaudioRecorder 的。我已经使用 wunderradio api 从 url 播放广播。我在他们的 api 中没有任何方法/函数可以记录来自 url 的音频。我只想从该 url 录制缓冲的音频，以便稍后播放该录制的文件。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:25:53.390

使用麦克风录制音频播放确实不是正确的方法。如果您使用 AudioQueue 服务进行音频播放，您可以使用**AudioFileWritePackets**函数将音频数据写入文件。

如果以这种方式实现录制，则可以将音频文件写入流式传输的格式。因此，由于您使用 AudioFileWritePackets 函数编写编码的音频数据包，因此可以将 mp3 音频流作为 mp3 文件写入磁盘。

为了更好地理解这一切应该如何实现，您可以查看 Apple 的*SpeakHere*示例代码。SpeakHere 项目从麦克风录制，但它仍然是了解 AudioFileWritePackets 函数如何工作的一个很好的例子。在您的情况下，您需要在 AudioQueue 的输出回调中使用 AudioFileWritePackets 函数。这是缓冲区播放完毕时调用的回调。因此，最好将已经播放的音频缓冲区数据写入文件。

# vba - 无法将 Word 2010 中的框架置于前面

> ID：10313959
> 
> 赞同：0
> 
> 时间：2012-04-25T10:37:40.370
> 
> 标签：vba, ms-word, word-2010, word-2003

我在 Word 2003 和 Word 2010 中有类似的文档，并且所有样式都已导入 Word 2010 文档。

在 Word 2003 中，我有一个包含两列和一个分隔线的框架和文档，如下所示。框架位于该行的顶部。 ![在此处输入图像描述](../Images/2300f077ebe3acd46db78267632e18f1.png)

与 Word 2010 类似，我在一个文档上有一个框架，其中有两列带有分隔符，但分隔线在框架中可见。 ![在此处输入图像描述](../Images/13676248ae3a7f1a2735d67ce15b7a38.png)

如何使 Word 2010 框架与 Word 2003 框架相似？这是一个愚蠢的问题，但对我来说真的很烦人，在过去的 3 个月里我都遇到了这个问题。

我非常感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:45:53.670

阴影填充颜色设置为白色，在 Word 2010 中将框架的阴影填充颜色设置为白色后，它就可以工作了。

结束我自己的问题

# android - Android：如何为在 Start 和 Stop Drag 中声明的组件设置 onClickListener 方法

> ID：10313960
> 
> 赞同：0
> 
> 时间：2012-04-25T10:37:47.077
> 
> 标签：android, drag-and-drop, onclicklistener

```
I made a sample using this link: http://ericharlow.blogspot.in/2010/10/experience-android-drag-and-drop-list.html.
i am able to drag and drop objects from my list view.

Here is the code for my start and stop drag: 

public void onStartDrag(View itemView) {
            itemView.setVisibility(View.INVISIBLE);
            defaultBackgroundColor = itemView.getDrawingCacheBackgroundColor();
            // itemView.setBackgroundColor(backgroundColor);
            mChangeButton = (Button) findViewById(R.id.change_btn);
            Button iv = (Button) itemView.findViewById(R.id.delete_btn);
            if (iv != null)
                iv.setVisibility(View.INVISIBLE);
        }

        @Override
        public void onStopDrag(View itemView) {
            itemView.setVisibility(View.VISIBLE);
            // itemView.setBackgroundColor(defaultBackgroundColor);
            mChangeButton = (Button) findViewById(R.id.change_btn);
            Button iv = (Button) itemView.findViewById(R.id.delete_btn);
            if (iv != null)
                iv.setVisibility(View.VISIBLE);
        } 
```

我的问题是如何为我的 Button iv 设置 OnClickListener？它不允许我设置 onDrag。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:34:37.107

1）创建一个侦听器对象 2）创建一个需要定义侦听器的方法 3）在拖动集侦听器内部这可能有效:)

```
OnClickListner onclicklistner;
.....
void listner()
{
onclicklistner=new OnclickListner({
void onClick(v.getid){...}
});
}
....
button.setoOnClickListener(onclicklistener);` 
```

# php - mysql错误的列增量

> ID：10313961
> 
> 赞同：1
> 
> 时间：2012-04-25T10:37:50.260
> 
> 标签：php, mysql, increment

这段代码有什么问题？

```
$core->query("UPDATE games SET hits = hits + 1 WHERE id=".intval($id).";"); 
```

`hits`增量为 2，有时为 3！我的意思是例如 hits = 3; 当我调用这个函数时，命中数为 5，有时为 6！（添加 2 和 3 而不是 1）。

mysql 表类型是 MyISAM。

查询功能为：

```
function query($query) {

    $this->error="";
    $this->result=@$this->link->query($query);
    if(!$this->result) {
        $this->error=@$this->link->error;
        return FALSE;
    }

    return $this->result;
} 
```

链接是：

```
$link = new mysqli(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_NAME); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:25:34.517

SQL 代码看起来是正确的，所以它一定是导致问题的上下文。

有可能您将代码放在每页被调用 2 或 3 次的元素中？如果不是明确的，通过包含或子程序结构？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:41:10.747

您的查询似乎是正确的，但可能是此函数多次调用相同的`$id`值。请检查这个..

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T12:30:18.957

它来自该页面上的闪存。

# css - 使用 CSS/CSS3 的圆形段

> ID：10313962
> 
> 赞同：10
> 
> 时间：2012-04-25T10:37:59.287
> 
> 标签：css

是否有任何变体可以仅使用 CSS/CSS3绘制[圆形线段？](http://en.wikipedia.org/wiki/Circular_segment)

[![顶部有一条虚线的圆圈。 线内的部分，即线段，为绿色阴影，不到圆的一半。 半径、段高度等也被标记。](../Images/daf9d645329f7e7c78671449c2d5430b.png)](https://i.stack.imgur.com/hHc2W.png)

我需要圆圈的那个绿色部分。

我正在尝试这个：

```
div {
  width: 86px;
  height: 22px;
  background-color: green;
  border-bottom-right-radius: 42px;
  border-bottom-left-radius: 42px;
}
```

```
<div></div>
```

但它看起来不像一个圆弧段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T10:45:15.333

div 的宽度和高度应该相同才能产生一个圆圈。
例如：http: [//jsfiddle.net/wGzMd/](http://jsfiddle.net/wGzMd/)

这是CSS：

```
div{
position: absolute;
top: 50px;
left: 50px;
width:100px;
height:100px;
border: 1px solid green;
background: green;
border-radius: 360px;
} ​ 
```

* * *

**编辑（用于段）：**

[http://jsfiddle.net/wGzMd/3/](http://jsfiddle.net/wGzMd/3/)

CSS：

```
div.outerClass{
 position: absolute;
 left: 50px;
 top: 50px;
 height: 25px;
 overflow: hidden;
}

div.innerClass{
 width:100px;
 height:100px;
 border: 1px solid green;
 border-radius: 360px;
} 
```

HTML：

```
<div class="outerClass"><div class="innerClass"></div></div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T12:15:47.967

嘿检查到这个网站[http://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)

还有这个[http://www.russellheimlich.com/blog/pure-css-shapes-triangles-delicious-logo-and-hearts/](http://www.russellheimlich.com/blog/pure-css-shapes-triangles-delicious-logo-and-hearts/)

和这个

[http://www.css3shapes.com/](http://www.css3shapes.com/)

**CSS**

```
#oval {
width: 86px;
height: 22px;
background: green;
-moz-border-radius: 50px / 25px;
border-radius: 100px 100px 0 0 / 47px;
-webkit-border-radius: 100px 100px 0 0 / 47px;
} 
```

**HTML**

```
<div id="oval"></div> 
```

现场演示[http://jsfiddle.net/carTT/](http://jsfiddle.net/carTT/)

并像你一样在纯 CSS 中创建任何形状 ....................

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T10:41:16.583

半圈： http: [//www.paulund.co.uk/how-to-create-different-shapes-in-css](http://www.paulund.co.uk/how-to-create-different-shapes-in-css)

```
 div {
 height:45px;
 width:90px;
 border-radius: 0 0 90px 90px;
 -moz-border-radius: 0 0 90px 90px;
 -webkit-border-radius: 0 0 90px 90px;
 background:green;} 
```

# powershell - 为什么在会话中第一次执行 powershell 脚本需要很多时间？

> ID：10313964
> 
> 赞同：2
> 
> 时间：2012-04-25T10:38:04.090
> 
> 标签：powershell, powershell-2.0, powercli

我在我的脚本中加载 Powercli 管理单元。如果我在会话中第一次执行脚本，则需要更多时间。当我执行另一个使用相同管理单元的脚本时，它需要更少的时间。[我使用 Measure-Command cmdlet 测量了性能]

所以我认为每当创建新会话时，执行脚本需要更多时间。

在我们的例子中，由于用户将通过右键单击文件来执行 powershell 并使用 powershell 运行，因此它将始终在新会话中运行。所以每次他们都面临着缓慢。

为什么在会话中第一次执行 powershell 脚本需要很多时间？

有什么办法可以避免这种缓慢？[我使用的是 Powershell 2.0]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:41:22.747

您正在加载管理单元。当你在同一个会话中第二次运行你的脚本时，它已经被加载了，所以它会`Add-PSSnapIn`很快返回，因为它注意到没有什么可做的。

如果您想始终加载管理单元，您可以在您的配置文件中执行此操作。简单地做

```
notepad $profile 
```

在 PowerShell 中并附加`Add-PSSnapIn`调用。

# api - 关于 RESTful API 的几个问题以及为什么很少实施一些最佳实践

> ID：10313967
> 
> 赞同：3
> 
> 时间：2012-04-25T10:38:12.923
> 
> 标签：api, rest, restful-architecture

在大多数关于 RESTful 的教程、文档、文章等中，我遇到了一些相同的观点，但我很少看到这些“是什么让它成为 RESTful”的观点得以实现。

例如，我读过很多遍：

*   **内容类型**

    使用 HTTP 标头

    > ```
    > Accept: application/json, text/plain 
    > ```

    URL 中的扩展名

    > ```
    > Not RESTful, URLs are not the place for Content-Type 
    > ```

我从来没有遇到过我看到它实现的 API。我曾经使用过的每个 API 都要求我将 XML 或 JSON 附加到 URL 的末尾。他们做错了吗？

*   **版本控制**

    版本媒体类型

    > 应用程序/vnd.something.v1+json

    自定义标题

    > X-API-版本：1

    URL 中的版本

    > /v1/resouce 不是 RESTful，通过将版本放在 URL 中，您可以创建单独的资源

如果您需要引入非向后兼容的功能，肯定创建一个单独的资源是正确的做法吗？

再一次，在我使用过的所有 API 版本中，它们在 URL 中使用 v1、v2（例如 google、imgur 等）

如果不实现这些点，我的 API 会不会被视为 RESTful？

澄清这些观点将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T12:34:41.013

1) 使用接受标头或使用特定格式的 URL 在 RESTful 系统中都是有效的。你引用的文章是错误的。

2) 说`v1/resource`不是 RESTful 也是不正确的。您无法查看 URI 并对其 RESTful 做出结论。如果您尝试增量演进系统，在 URL 的根目录添加 v1 可能不是一件好事。实际上，它声明了一个全新的 URL 空间并废弃了旧的。这是相当激烈的。RESTFul 系统尝试并支持对系统进行增量和进化更改。这样做`/resource/v2`实际上更符合该目标。

不幸的是，许多正在学习 REST 的开发人员发现，绝大多数声称使用 REST 的系统实际上并不符合 REST 的约束。因此，他们很快就热衷于告诉每个人什么是 RESTful，什么不是 RESTful。这些人中的许多人还没有完全理解这些限制，最终编造了一些不存在的新限制。“RESTFul URL”谬误是一个经典。“POST 必须创建资源”是另一个常见的问题。

我对任何学习 REST 的人的指导是，如果有人告诉你某些东西不是 RESTful，你问他们它违反了什么约束以及忽略该约束的实际影响是什么。如果他们不能回答，那么礼貌地忽略他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:49:16.607

REST 的真正定义显然是在 Roy Fielding 在 2002 年撰写的[博士论文](http://www.ics.uci.edu/~taylor/documents/2002-REST-TOIT.pdf)中。是否所有自称为 RESTful 的 API 都遵循 Fielding 指定的准则？答案是不。REST 的定义已经被一些人淡化为任何不使用 SOAP 的东西。我不太担心什么是 RESTful，而更多地担心什么是好的实践。在请求的标头中指定内容类型是一种很好的做法。对 API 进行版本控制也是一个很好的做法。关于 API 最佳实践的信息的一个很好的资源来自[Apigee](http://apigee.com/about/resources)的人员，因为他们在该领域拥有丰富的经验。查看他们关于[RESTful API 设计](http://blog.apigee.com/detail/slides_for_restful_api_design_second_edition_webinar/)的网络研讨会，他们会询问您是实用主义者还是 RESTafarian。

# java - 如何从 java 程序运行 mvn 命令？

> ID：10313971
> 
> 赞同：3
> 
> 时间：2012-04-25T10:38:23.690
> 
> 标签：java, maven

我正在构建一个 Java 程序，用于在我的服务器端自动执行一个过程。通常我 cd 到 Desktop/GIT/ 并使用这个 maven 命令“mvn integration-test -DskipTests -P interactive -e”。

我正在构建一个 java 程序，我正在尝试运行该命令行，但到目前为止我还没有成功。

到目前为止，这里是代码：

```
public static void main(String[] args) throws FileNotFoundException {
// TODO Auto-generated method stub 

Process theProcess = null;

try
  {
      theProcess = Runtime.getRuntime().exec("mvn integration-test -DskipTests -P interactive -e");
  }
 catch(IOException e)
  {
     System.err.println("Error on exec() method");
     e.printStackTrace();  
  }

// read from the called program's standard output stream
  try
  {
     inStream = new BufferedReader(new InputStreamReader( theProcess.getInputStream()));  
     System.out.println(inStream.readLine());
  }
  catch(IOException e)
  {
     System.err.println("Error on inStream.readLine()");
     e.printStackTrace();  
  }

break;

    }

}

in.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:44:08.587

你应该看看[maven embedder](http://maven.apache.org/embedder.html)；这正是嵌入 maven 时应该使用的工具。

* * *

OK 显然[不再支持](http://maven.40175.n5.nabble.com/Maven-Embedder-td4708683.html)maven embedder 。也许你仍然可以让它工作，但我宁愿为你创建一个应该工作的小样本。当然，替换 Maven 的路径：

```
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

public class Q {

public static void main(String[] args) throws IOException, InterruptedException {

    Process p = null;

    try {
        p = Runtime.getRuntime().exec("C:/Applications/apache-maven-3.0.3/bin/mvn.bat integration-test -DskipTests -P interactive -e");
    } catch (IOException e) {
        System.err.println("Error on exec() method");
        e.printStackTrace();
    }

    copy(p.getInputStream(), System.out);
    p.waitFor();

}

static void copy(InputStream in, OutputStream out) throws IOException {
    while (true) {
        int c = in.read();
        if (c == -1)
            break;
        out.write((char) c);
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:46:59.683

如果您想使用其他配置选项运行它，请尝试将[Jenkins](http://jenkins-ci.org/)作为持续集成工具。它是免费的，可以与 Tomcat 一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T08:13:20.600

我设法使用以下代码运行 mvn：（我使用此命令：Runtime.getRuntime().exec(cmd);）

```
 import java.io.*;
    import java.util.ArrayList;

    public class RunMvnFromJava     {
            static public String[] runCommand(String cmd)throws IOException
{

                // The actual procedure for process execution:
                //runCommand(String cmd);
                // Create a list for storing output.
                ArrayList list = new ArrayList();
                // Execute a command and get its process handle
                Process proc = Runtime.getRuntime().exec(cmd);
                // Get the handle for the processes InputStream
                InputStream istr = proc.getInputStream();
                // Create a BufferedReader and specify it reads
                // from an input stream.

                BufferedReader br = new BufferedReader(new InputStreamReader(istr));
                String str; // Temporary String variable
                // Read to Temp Variable, Check for null then
                // add to (ArrayList)list
                while ((str = br.readLine()) != null) 
                    list.add(str);
                    // Wait for process to terminate and catch any Exceptions.
                        try { 
                            proc.waitFor(); 
                            }
                        catch (InterruptedException e) {
                            System.err.println("Process was interrupted"); 
                            }
                        // Note: proc.exitValue() returns the exit value.
                        // (Use if required)
                        br.close(); // Done.
                        // Convert the list to a string and return
                        return (String[])list.toArray(new String[0]);
}
// Actual execution starts here
            public static void main(String args[]) throws IOException
            {
                try
                {
                    // Run and get the output.
                    String outlist[] = runCommand("mvn integration-test -DskipTests -P interactive -e");
                    // Print the output to screen character by character.
                    // Safe and not very inefficient.
                    for (int i = 0; i < outlist.length; i++)
                        System.out.println(outlist[i]);
                }   
                catch (IOException e) { 
                    System.err.println(e); 
                }
            }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T08:56:40.790

对于 Windows，试试这个

```
Process p=Runtime.getRuntime().exec("cmd.exe /c mvn install:install-file -Dfile=C:\\Users\\Desktop\\Desktop\\sqljdbc4-4.0.jar -Dpackaging=jar -DgroupId=com.microsoft.sqlserver -DartifactId=sqljdbc4 -Dversion=4.0"); 
```

对于 linux，`**"cmd.exe /c"**`不需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-11T05:24:12.233

试试这个：

```
List<String> commands=new ArrayList<>();
commands.add("mvn");
commands.add("-f");
commands.add();
commnads.add("integration-test");
commands.add("-DskipTests");
commands.add("-P");
commands.add("interactive");
commands.add("-e");
ProcessBuilder pb=new ProcessBuilder(commands);
pb.start();`` 
```

# clr - 托管应用程序的 Microsoft Application Verifier 等效项

> ID：10313977
> 
> 赞同：2
> 
> 时间：2012-04-25T10:38:50.523
> 
> 标签：clr, managed, application-verifier

您知道托管应用程序的任何等效 Microsoft 应用程序验证程序吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:45:29.477

这个问题没有多大意义。托管应用程序中应用程序验证程序的最佳等效项是应用程序验证程序。它也同样有效，托管程序还从 Windows 堆分配内存并使用锁和句柄。它发现任何*错误*的可能性非常低。托管代码不会遇到使 Application Verifier 对以非托管语言编写的代码有用的问题。

也许您想验证其他内容，尚不清楚究竟是什么。FxCop 工具是一个很好的工具，可以分析 .NET 编程中常见的各种 oopses 的托管代码。与应用程序验证程序检查的问题完全不同。它也是一个静态分析器。在运行时，抖动内置的验证器和 .NET 框架代码和 CLR 中的强参数验证让您免于麻烦。托管代码在很大程度上受到需要应用程序验证器等工具的问题的启发。

但是不，托管代码没有等效工具

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T17:48:13.540

事实证明，在某些情况下托管代码需要此功能。

不幸的是，我现在正处于其中一种情况。

看看微软研究国际象棋：[http ://research.microsoft.com/en-us/projects/CHESS/](http://research.microsoft.com/en-us/projects/CHESS/)

在 Channel 9 视频演示中，该工具的开发人员提到该工具的行为与 appverifier 非常相似，并且可以测试托管代码：[http ://channel9.msdn.com/shows/Going+Deep/CHESS-自动化并发测试工具/](http://channel9.msdn.com/shows/Going+Deep/CHESS-An-Automated-Concurrency-Testing-Tool/)

下载地址：[http ://research.microsoft.com/en-us/downloads/b23f8dc3-bb73-498f-bd85-1de121672e69/](http://research.microsoft.com/en-us/downloads/b23f8dc3-bb73-498f-bd85-1de121672e69/)

# c# - MethodInfo.Invoke 性能问题

> ID：10313979
> 
> 赞同：19
> 
> 时间：2012-04-25T10:38:59.433
> 
> 标签：c#, .net, invoke

我正在从文件中读取和写入数据。文件中的数据可以是浮点数、双精度数、整数等。直到运行时才知道类型。我将存储在文件中的数据类型称为 Tin。从 Tout 类型的数组中读取或写入数据。这种类型也直到运行时才知道。

代码序列是这样的。在已知的 Open 方法 Tin 和 Tout 中，我们可以为已知数据类型创建读写方法。

```
Open(...)
{
   MethodInfo ReadMethod = typeof(...)GetMethod("ReadGeneric").MakeGenericMethod(new Type[] {typeof(Tin), typeof(Tout)}));
} 
```

读写循环重复数百万次，并依靠反射调用适当的方法，如下所示。

```
Read loop
{
   var values = (Tout[])ReadMethod.Invoke(this,new object[]{index});
   process ...
} 
```

在使用性能分析器检查此代码时，我发现如果仅花费时间调用运行时读写方法，则 c 的数量会很大。

我该如何加快速度。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-25T10:44:09.767

是的，这是因为反射 API 比直接方法调用慢数千倍。然而，有一些有趣的技术可以解决这个问题。查看 Jon Skeet 关于[使用委托缓存反射](http://blogs.msmvps.com/jonskeet/2008/08/09/making-reflection-fly-and-exploring-delegates/)的文章。

有一个静态的设置成本，但是一旦你这样做了，重复调用委托的时间就相当于虚拟方法调用。

也有一些[预打包的框架](https://github.com/buunguyen/fasterflect)来实现同样的事情。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-07T00:48:22.467

这将为您做任何事情，几乎与直接呼叫一样快。

```
using System.Collections.Generic;
using System.Linq.Expressions;
using System.Reflection;

public class FastMethodInfo
{
    private delegate object ReturnValueDelegate(object instance, object[] arguments);
    private delegate void VoidDelegate(object instance, object[] arguments);

    public FastMethodInfo(MethodInfo methodInfo)
    {
        var instanceExpression = Expression.Parameter(typeof(object), "instance");
        var argumentsExpression = Expression.Parameter(typeof(object[]), "arguments");
        var argumentExpressions = new List<Expression>();
        var parameterInfos = methodInfo.GetParameters();
        for (var i = 0; i < parameterInfos.Length; ++i)
        {
            var parameterInfo = parameterInfos[i];
            argumentExpressions.Add(Expression.Convert(Expression.ArrayIndex(argumentsExpression, Expression.Constant(i)), parameterInfo.ParameterType));
        }
        var callExpression = Expression.Call(!methodInfo.IsStatic ? Expression.Convert(instanceExpression, methodInfo.ReflectedType) : null, methodInfo, argumentExpressions);
        if (callExpression.Type == typeof(void))
        {
            var voidDelegate = Expression.Lambda<VoidDelegate>(callExpression, instanceExpression, argumentsExpression).Compile();
            Delegate = (instance, arguments) => { voidDelegate(instance, arguments); return null; };
        }
        else
            Delegate = Expression.Lambda<ReturnValueDelegate>(Expression.Convert(callExpression, typeof(object)), instanceExpression, argumentsExpression).Compile();
    }

    private ReturnValueDelegate Delegate { get; }

    public object Invoke(object instance, params object[] arguments)
    {
        return Delegate(instance, arguments);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-20T03:00:39.207

### 配置文件以找到符合您期望的解决方案：

.Net Framework 提供了大量方法来动态调用方法。然而，它们在性能方面的表现并不相同，而且它们也不是同样易于使用。

### CreateDelegate 可能是您正在寻找的

在最新版本的 .Net Framework 中，CreateDelegate 比 MethodInfo 调用高出 50 倍：

```
// The following should be done once since this does some reflection
var method = typeof (...).GetMethod("ReadGeneric");
// Here we create a Func that targets the instance of type which has the 
// ReadGeneric method
var func = (Func<Tin, Tout[]>)_method.CreateDelegate(typeof(Func<Tin, Tout[]>), target);

// Func will be 50x faster than MethodInfo.Invoke
// use func as a standard Func like 
// var tout = func(index); 
```

检查[我的这篇文章](https://stackoverflow.com/questions/31859016/is-the-use-of-dynamic-considered-a-bad-practice/32817143#32817143)以查看不同方法调用的基准

# c# - SqlCommand 参数为字符串

> ID：10313981
> 
> 赞同：0
> 
> 时间：2012-04-25T10:39:07.380
> 
> 标签：c#, sql, sql-injection, sqlcommand, sqlparameter

我有一个需要创建的应用程序，给定一些 CSV 形式的用户输入，需要将此 CSV 解析并生成多种格式。其中一种格式是针对 CSV 的每一行的一系列 SQL INSERT 语句（作为字符串）。

（此时您可以假设我已经将 CSV 解析为值列表或其他内容，所以这不是问题的重点）

鉴于此输入可能包含漏洞，我希望生成经过验证和清理的 INSERT 语句。

我熟悉创建一个 SqlCommand 对象并向其参数列表添加值，但是查看[一个类似的问题](https://stackoverflow.com/a/2789596/570787)，它似乎并没有按我希望的方式工作。

那么有没有办法以我需要的方式生成经过清理的 SQL 语句作为字符串？

编辑：这是我想做的一个例子。

CSV：

```
id,name,country
1,Alice,France
2,Bob,Austria
3,Carol,Germany 
```

SQL：

```
...
INSERT INTO Users (id, name, country) VALUES (1, 'Alice', 'France');
INSERT INTO Users (id, name, country) VALUES (2, 'Bob', 'Austria');
INSERT INTO Users (id, name, country) VALUES (3, 'Carol', 'Germany');
... 
```

由于 CSV 中没有给出数据类型，因此应用程序也必须确定这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:24:30.730

与其说是一个答案，不如说是一个警告。如果您最终需要走“经典”转义路线来执行此操作，并且确实需要安全性（即数据来自不受信任的来源），请不要忘记您需要担心的不仅仅是简单的转义。

我们经常听到的基本字符转义：

*   `' -> ''`撇号之类的东西很明显并且有记录*的令人作呕*
*   `;`一个语句中的多个命令 - 数据库并不总是允许，但很危险

但是，如果您要解析“恶意行为”，您是否考虑过：

*   `SELECT/*not important*/1/*really...*/FROM/*im serious*/users`
*   `SELECT%09FIELDS%09FROM%0dTABLE_NAME`
*   `WHERE username=CONCAT(CHAR(97),CHAR(100),CHAR(109),CHAR(105),CHAR(110))`
*   `SELECT passwd FROM users WHERE username=0x61646d696e`

总结：这里是龙。

[http://www.ihteam.net/papers/blind-sqli-regexp-attack.pdf](http://www.ihteam.net/papers/blind-sqli-regexp-attack.pdf)

[http://ferruh.mavituna.com/sql-injection-cheatsheet-oku/#HexbasedSamples](http://ferruh.mavituna.com/sql-injection-cheatsheet-oku/#HexbasedSamples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:24:45.843

很有可能，如果您不想使用 SQL 对象，那么您将不得不自己清理这些条目。我不知道任何推荐的 SQL 格式，但是对于 MySQL，以下格式可以工作。我已将其更改为使用 SQL，但我不能保证它已涵盖所有可能的注入攻击。

```
public string sqlEscape(string VAL)
{
    if (VAL == null)
    {
        return null;
    }
    return "\"" + Regex.Replace(VAL, @"[\r\n\x00\x1a\\'""]", @"\$0") + "\"";
} 
```

使用你会这样做（假设你的 CSV 行存储在一个名为 csv 的数组中）：

```
string query = @"INSERT INTO Users (id, name, country) VALUES (" + sqlEscape(csv[0]) + ", " + sqlEscape(csv[1]) + ", " + sqlEscape(csv[2]) + ");"; 
```

如果有人可以增强这一点，请告诉我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T11:03:51.043

因为我不知道您是如何存储变量的，所以我将使用您的示例数据向您展示一个完整的、可能的实现`List<Dictionary<String, Object>>()`：

添加您的示例数据：

```
var tableName = "Users";
var records = new List<Dictionary<String, Object>>();
var recordFields = new Dictionary<String, Object>();
recordFields.Add("id", 1);
recordFields.Add("name", "Alice");
recordFields.Add("country", "France");
records.Add(recordFields);
recordFields = new Dictionary<String, Object>();
recordFields.Add("id", 2);
recordFields.Add("name", "Bob");
recordFields.Add("country", "Austria");
records.Add(recordFields);
recordFields = new Dictionary<String, Object>();
recordFields.Add("id", 3);
recordFields.Add("name", "Carol");
recordFields.Add("country", "Germany");
records.Add(recordFields); 
```

生成参数化的插入语句：

```
using (var con = new SqlConnection(Settings.Default.ConnectionString))
{
    con.Open();
    foreach (var record in records)
    {
        String insertSql = String.Format("INSERT INTO {0} ({1}) VALUES ({2});"
            , tableName
            , String.Join(",", record.Select(r => r.Key))
            , String.Join(",", record.Select(r => "@" + r.Key)));
        using (var insertCommand = new SqlCommand(insertSql, con))
        {
            foreach (var field in record)
            {
                var param = new SqlParameter("@" + field.Key, field.Value);
                insertCommand.Parameters.Add(param);
            }
            insertCommand.ExecuteNonQuery();
        }
    }
} 
```

请注意，这并没有真正经过测试（它可以编译并且看起来不错），但无论如何它应该对您有所帮助。

**编辑**：

> @Oded：我认为问题在于丹尼尔不想运行插入，而是显示/输出/保存它们。所以使用SqlCommand参数是不行的，因为你看不到生成的SQL。
> 
> @Cylindric 没错

这是不可能的，而且是矛盾的，你不能使用`String`with `SqlParameters`。因此，如果您稍后运行这些插入，恐怕您对 Sql-Injection 持开放态度。我建议您在实际运行语句时使用上面的代码。

# c# - 以编程方式设置唤醒时间

> ID：10313982
> 
> 赞同：1
> 
> 时间：2012-04-25T10:39:11.343
> 
> 标签：c#, c++, windows-7-embedded

我们正在创建一个显示系统，我们将在嵌入式 Windows 7 之上运行。计算机没有键盘或鼠标，因此没有直接的用户交互。

由于这些计算机将仅在特定时间使用，我们希望为它们定义时间表并使其关机（包括它们的屏幕），并在特定时间自动重新开机。

为此，我们需要能够从代码中设置 bios WakeOnRTC 计时器。[如Schedule machine to wake up](https://stackoverflow.com/questions/1141735/schedule-machine-to-wake-up)所述，从休眠或睡眠中唤醒是不够的。

我从其他人那里知道 MythBuntu 可以做到这一点，但那是基于 Linux 的。我还听说使用新兴的 UEFI-bioses 更容易实现这一点。

在这一点上，如果有人有解决方案，我们可以选择任何 bios。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-27T09:06:28.590

我不会放太多，因为这个问题已经回答了，请参阅以下链接。

[C#：如何唤醒已关闭的系统？](https://stackoverflow.com/questions/4061844/c-how-to-wake-up-system-which-has-been-shutdown) [http://www.codeproject.com/Articles/49798/Wake-the-PC-from-standby-or-hibernation](http://www.codeproject.com/Articles/49798/Wake-the-PC-from-standby-or-hibernation)

简而言之，解决方案围绕以下两个 Win32 API 函数展开：

*   [创建等待定时器](https://msdn.microsoft.com/en-us/library/windows/desktop/ms682492(v=vs.85).aspx)*   [设置等待定时器](https://msdn.microsoft.com/en-us/library/windows/desktop/ms686289(v=vs.85).aspx)

# perl - perl 解析命令行选项

> ID：10313984
> 
> 赞同：0
> 
> 时间：2012-04-25T10:39:25.277
> 
> 标签：perl

我正在尝试从命令行获取参数并对其进行解析，如果参数正确，则基于它调用某些函数。我是 perl 的新手，有人可以告诉我如何实现这一点

```
 script.pl aviator #switch is valid and should call subroutine aviator()
 script.pl aviator debug #valid switch and should call subroutine aviator_debug
 script.pl admin debug or script.pl debug admin #valid switch and should call subroutine admin_debug()
 script.pl admin   #valid switch and should call subroutine admin()
 script.pl dfsdsd ##invalid switch ,wrong option 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T10:41:37.943

由于您正在处理简单的单词（而不是`--switches`），因此只需查看`@ARGV`，它是命令行选项的数组。将简单的 if/elsif/etc 应用于该数据应该可以满足您的需求。

（对于更复杂的要求，我建议使用[Getopt::Long::Descriptive](https://metacpan.org/module/Getopt::Long::Descriptive)模块。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T16:05:47.833

随着系统变得越来越复杂，对特定字符串进行大量检查是维护噩梦的秘诀。我强烈建议实施某种调度表。

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;

my %commands = (
  aviator       => \&aviator,
  aviator_debug => \&aviator_debug,
  admin         => \&admin,
  admin_debug   => \&admin_debug,
  debug_admin   => \&admin_debug,
);

my $command = join '_', @ARGV;

if (exists $commands{$command}) {
  $commands{$command}->();
} else {
  die "Illegal options: @ARGV\n";
}

sub aviator {
  say 'aviator';
}

sub aviator_debug {
  say 'aviator_debug';
}

sub admin {
  say 'admin';
}

sub admin_debug {
  say 'admin debug';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T10:49:15.620

变体1：

```
#!/usr/bin/perl

my $command=join(' ',@ARGV);
if ($command eq 'aviator') { &aviator; }
elsif ($command eq 'aviator debug' or $command eq 'debug aviator') { &aviator_debug; }
elsif ($command eq 'admin debug' or $command eq 'debug admin') { &admin_debug; }
elsif ($command eq 'admin') { &admin; }
else {print "invalid option ".$command."\n";exit;} 
```

变体 2：

```
#!/usr/bin/perl

if (grep /^aviator$/, @ARGV ) {
    if (grep /^debug$/, @ARGV) { &aviator_debug; }
    else { &aviator; }
} elsif (grep /^admin$/, @ARGV ) {
    if (grep /^debug$/, @ARGV) { &admin_debug; }
    else { &admin; }
} else { print "invalid option ".join(' ',@ARGV)."\n";exit;}
exit; 
```

变体 3：

```
#!/usr/bin/perl
use Switch;

switch (join ' ',@ARGV) {
    case 'admin' { &admin();}
    case 'admin debug' { &admin_debug; }
    case 'debug admin' { &admin_debug; }
    case 'aviator' { &aviator; }
    case 'aviator debug' { &aviator_debug; }
    case 'debug aviator' { &aviator_debug; }
    case /.*/ { print "invalid option ".join(' ',@ARGV)."\n";exit; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T11:41:30.870

这是我对这个问题的看法

```
#!/usr/bin/perl
use 5.14.0;

my $arg1 = shift;
my $arg2 = shift;

given ($arg1) {
    when ($arg1 eq 'aviator') {say "aviator"}
    when ($arg1 eq 'admin' && !$arg2) {say "admin"}
    when ($arg1 =~ /^admin|debug$/ && $arg2 =~ /^admin|debug$/) {say "admin debug"}
    default {say "error";}
} 
```

# android - 以编程方式打开“强制 Gpu 渲染”

> ID：10313985
> 
> 赞同：1
> 
> 时间：2012-04-25T10:39:28.457
> 
> 标签：android, gpu

我的应用程序的 minSdk 版本是 7，与 3.0 以下的版本相比，我的应用程序在带有 ICS 的 nexus 上运行流畅，因为 min sdk 是 7，所以我想以编程方式打开 gpu 渲染选项，如果它已经没有为以上版本启用3.0，我可以使我的应用程序与 2.0 兼容，即仅启用 OS>=3.0 的 gpu 渲染选项。我想在应用程序级别启用渲染，而不仅仅是在视图级别

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:46:35.560

添加`android:hardwareAccelerated="true"`到清单的应用程序标记。Pre Honeycomb 设备将忽略它。确保您的目标 sdk 是蜂窝或更高版本。

您将需要检查您没有使用更高级别的 API，但这不是一个大问题。您可以通过反射来解决更复杂的任务，或者简单地使用 if 语句来解决它，例如：

```
if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
} 
```

[这里](http://developer.android.com/training/basics/supporting-devices/platforms.html)有一些关于这个的更多细节

# java - 字符串对象到布尔值

> ID：10313987
> 
> 赞同：5
> 
> 时间：2012-04-25T10:39:34.677
> 
> 标签：java, type-conversion

当我尝试将*String* Object 转换为*boolean*时，结果是不同的。

```
String strFlag="true";
boolean boolFlag = Boolean.getBoolean(strFlag); 
```

`boolFlag`最终有一个`false`价值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T10:43:51.927

利用[`Boolean.valueOf`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Boolean.html#valueOf%28java.lang.String%29)

```
boolean boolFlag = Boolean.valueOf(strFlag); 
```

> 此方法返回一个布尔值，其值由指定的字符串表示。返回的布尔值表示如果字符串参数不为空且等于字符串“true”，忽略大小写，则返回值 true。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-25T10:41:12.107

使用[Boolean.valueOf(String string)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Boolean.html#valueOf%28java.lang.String%29)来实现您的目标。

```
boolean boolFlag = Boolean.valueOf(strFlag); 
```

> 返回一个布尔值，其值由指定的 String 表示。返回的布尔值表示如果字符串参数不为空且等于字符串“true”，忽略大小写，则返回值 true。

示例：`Boolean.valueOf("True")`返回真。

示例：`Boolean.valueOf("yes")`返回 false。

从 java 1.5 开始，在大多数情况下，它还`Boolean.parseBoolean(String s)`返回原始类型`boolean`而不是装箱类型`Boolean`，以节省一些 CPU 周期。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T10:44:10.623

`Boolean.getBoolean`测试给定的系统属性是否为真，你想要`Boolean.parseBoolean`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-25T10:41:06.087

您可以使用

```
boolFlag = "true".equalsIgnoreCase(strFlag); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-25T10:45:12.473

尝试使用`Boolean.valueOf(strFlag)`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-25T11:06:02.320

利用[`Boolean.parseBoolean`](http://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html#parseBoolean%28java.lang.String%29)

```
boolean boolFlag = Boolean.parseBoolean(strFlag); 
```

此方法返回一个布尔**原始**类型。它的工作原理与 Boolean.valueOf 相同，无需拆箱。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-25T12:08:32.377

您可以使用以下

[Boolean.parseBoolean](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)

# javascript - 将 HTML5 画布作为 blob 上传

> ID：10313992
> 
> 赞同：14
> 
> 时间：2012-04-25T10:40:16.773
> 
> 标签：javascript, html

我有一个画布，我可以毫无问题地将其绘制到 DOM 上，也可以使用以下方法在本地为用户保存：

```
storCanvas.toBlob(function(blob) { saveAs(blob, name + ".png");}); 
```

（注意：我已经包含 canvas-toBlob.js 用于跨平台支持，来自[http://eligrey.com/blog/post/saving-generated-files-on-the-client-side](http://eligrey.com/blog/post/saving-generated-files-on-the-client-side)）

现在，我想做的是将相同的画布元素发送到服务器。我以为我可以做类似的事情：

```
storCanvas.toBlob(function(blob) {upload(blob);}); 
```

在哪里上传（blob）；是：

```
function upload(blobOrFile)
{
    var xhr = new XMLHttpRequest();
    xhr.open('POST', 'upload_file.php', true);
    xhr.onload = function(e) { /*uploaded*/ };

    // Listen to the upload progress.
    var progressBar = document.querySelector('progress');
    xhr.upload.onprogress = function(e) {
        if (e.lengthComputable)
        {
          progressBar.value = (e.loaded / e.total) * 100;
          progressBar.textContent = progressBar.value;
        }
    };
    xhr.send(blobOrFile);

} 
```

（摘自：[http](http://www.html5rocks.com/en/tutorials/file/xhr2/) ://www.html5rocks.com/en/tutorials/file/xhr2/ ）

现在，我认为这会起作用，但是我的 PHP 页面（我可以使用标准 HTML 表单进行 POST 成功）报告（通过 firebug）它得到了一个 0kB 的无效文件。我认为问题在于我转换为 blob，但我不确定正确的解决方法......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T04:02:53.740

我自己在学习 blob 时遇到了同样的问题。我相信问题在于`blob`通过提交本身`XMLHttpRequest`而不是把它放在这样的里面`FormData`：

```
canvas.toBlob(function(blob) {
  var formData = new FormData(); //this will submit as a "multipart/form-data" request
  formData.append("image_name", blob); //"image_name" is what the server will call the blob
  upload(formData); //upload the "formData", not the "blob"
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-21T14:04:42.607

您可以使用此模块上传 Blob。

blobtools.js ( [https://github.com/extremeFE/blobtools.js](https://github.com/extremeFE/blobtools.js) )

```
//include blobtools.js
blobtools.uploadBlob({ // upload blob
  blob: blob,
  url: uploadUrl, // upload url
  fileName : 'paste_image.png' // upload file name
  callback: callback // callback after upload
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-28T10:50:27.193

不确定是否想要这个。但是如何将canvas元素转换为图像数据url，然后发送到服务器，然后写入服务器。就像是

```
function canvas2DataUrl(canvasElementId){
  var canvasElement = document.getElementById("canvasElementId");
  var imgData = canvasElement.toDataURL("image/png");
  return imgData;
} 
```

# colors - Matlab色彩图再现gnuplot pm3d 30,31,32 RGB色彩空间

> ID：10313999
> 
> 赞同：2
> 
> 时间：2012-04-25T10:40:56.913
> 
> 标签：colors, matlab-figure

我正在尝试在 Matlab 中实现一个颜色条，当以灰色打印时它看起来是线性的。我认为最直接的方法是实现 gnuplot pm3d 30,31,32 RGB 颜色空间。在[这个网站上](http://juluribk.com/2011/05/18/843/)，我找到了一个很好的介绍，它适用于一些更简单的 gnuplot 方案。但是，在尝试实施 30、31、32 方案时，我遇到了麻烦。

gnuplot 指令是

```
30: x/0.32-0.78125 31: 2*x-0.84       32: 4x;1;-2x+1.84;x/0.08-11.5 
```

我对此进行了解释，因此对于蓝色通道，我必须应用四个不同的方程。每个强度值的四分之一。这是我迄今为止尝试过的

```
x       = linspace(0,1,128);
r                               = x/0.32-0.78125;
g                               = 2*x-0.84;
b(1:length(x)/4)                = 4*x(1:length(x)/4);
b(length(x)/4:length(x)/2)      = 1;
b(length(x)/2:length(x)*.75)    = -2*x(length(x)/2:length(x)*.75)+1.84;
b(length(x)*.75:end)            = x(length(x)*.75:end)/0.08-11.5;
pm3d303132=[r;g;b]'; 
```

但不幸的是它不起作用。我最终得到负值和超过 1 的值，这是 Matlab 无法解释的。

我确实读过`show palette rgbformulae`帮助

```
* negative numbers mean inverted=negative colour component 
```

但我不知道如何在 Matlab 中实现它；而且我也不明白如何处理超过 1 的值。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:37:56.660

忽略超出范围的值似乎有效。(http://juluribk.com/2011/05/18/843/)

> pm3d303132(pm3d303132<0)=0;
> 
> pm3d303132(pm3d303132>1)=1;