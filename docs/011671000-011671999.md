# StackOverflow 问答 11671000-11671999

# ios - SecPKCS12Import 导致内存泄漏

> ID：11671000
> 
> 赞同：0
> 
> 时间：2012-07-26T14:02:02.137
> 
> 标签：ios, memory-leaks, ssl

我的应用程序使用相互身份验证连接到我的服务器，因此我有一个包含证书的 .p12 文件。一切都按预期的方式工作，但是当我使用 Instruments 分析我的应用程序时，它会在此行检测到内存泄漏：

```
if([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodClientCertificate]){

    NSData* p12data = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"client" ofType:@"p12"]];

    CFArrayRef itemsCFArray = nil;

    NSDictionary* dico = [NSDictionary dictionaryWithObjectsAndKeys:@"password",kSecImportExportPassphrase, nil];
    // MEMORY LEAK just below
    OSStatus check = SecPKCS12Import((__bridge CFDataRef)p12data, (__bridge CFDictionaryRef)dico, &itemsCFArray); 

    if(check != noErr){
        NSLog(@"Error importing PKCS");
    }

    NSArray* items = (__bridge NSArray*)itemsCFArray;

    SecIdentityRef identityRef = (__bridge SecIdentityRef)[[items objectAtIndex:0] objectForKey:(__bridge id)kSecImportItemIdentity];

    NSURLCredential* credential = [NSURLCredential credentialWithIdentity:identityRef certificates:nil persistence:NSURLCredentialPersistenceNone];

    [challenge.sender useCredential:credential forAuthenticationChallenge:challenge];

} 
```

我尝试改用 CFDictionaryRef，但它不能解决错误。

我发现有人有同样的问题，但他的解决方案是 ios4，我正在使用 ios5（实际上，我已经在做同样的事情）：[http ://www.ipup.fr/forum/viewtopic.php?id =2855](http://www.ipup.fr/forum/viewtopic.php?id=2855)（法语，对不起）

我该如何解决这个问题？Apple 会因为内存泄漏而拒绝我的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:21:37.863

我不认为问题出在字典上，itemsCFArray 似乎被泄露了。SecPKCS12Import 将 CF 引用传回 itemsCFArray，当您使用完其中的对象后，您需要 CFRelease。

创建凭证后尝试调用 CFRelease(itemsCFArray)。

# ruby-on-rails - Capistrano 部署失败

> ID：11671001
> 
> 赞同：1
> 
> 时间：2012-07-26T14:02:02.483
> 
> 标签：ruby-on-rails, deployment, rvm, capistrano

我在部署 capistrano 时遇到了一些问题。

据我所知，失败是使用 git ls-remote 命令发生的，但是当我在服务器上手动运行它时，它会成功返回。

任何帮助将不胜感激！

* * *

**解决了**

安装山狮后，我的 git cli 无法正常工作。

* * *

```
cap deploy
    triggering load callbacks
  * 15:55:49 == Currently executing `staging'
    triggering start callbacks for `deploy'
  * 15:55:49 == Currently executing `multistage:ensure'
  * 15:55:49 == Currently executing `deploy'
  * 15:55:49 == Currently executing `deploy:update'
 ** transaction: start
  * 15:55:49 == Currently executing `deploy:update_code'
    updating the cached checkout on all servers
    executing locally: "git ls-remote git@github.com:taheilo/taheilo.com.git master"
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/frankie/sites/taheilo.com/stage/releases/20120726135550; true"
    servers: ["198.101.205.147"]
    [198.101.205.147] executing command
    command finished in 2039ms
/Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:107:in ``': No such file or directory - git ls-remote git@github.com:taheilo/taheilo.com.git master (Errno::ENOENT)
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:107:in `block in run_locally'
  from /Users/frankie/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:106:in `run_locally'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:44:in `block (3 levels) in load'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:96:in `with_env'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:44:in `block (2 levels) in load'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy/scm/git.rb:227:in `query_revision'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy/scm/base.rb:35:in `block in method_missing'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy/scm/base.rb:63:in `local'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy/scm/base.rb:35:in `method_missing'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:44:in `block in load'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/variables.rb:87:in `call'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/variables.rb:87:in `block in fetch'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/variables.rb:110:in `block in protect'
  from <internal:prelude>:10:in `synchronize'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/variables.rb:110:in `protect'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/variables.rb:78:in `fetch'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/variables.rb:95:in `[]'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy/strategy/base.rb:82:in `revision'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy/strategy/remote_cache.rb:35:in `update_repository_cache'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy/strategy/remote_cache.rb:15:in `deploy!'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:222:in `block (2 levels) in load'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:139:in `instance_eval'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:139:in `invoke_task_directly'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly_with_callbacks'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:89:in `execute_task'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `method_missing'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:110:in `block in define_task'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:203:in `block (3 levels) in load'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:56:in `transaction'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `method_missing'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:202:in `block (2 levels) in load'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:139:in `instance_eval'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:139:in `invoke_task_directly'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly_with_callbacks'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:89:in `execute_task'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:193:in `method_missing'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:110:in `block in define_task'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/recipes/deploy.rb:170:in `block (2 levels) in load'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:139:in `instance_eval'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:139:in `invoke_task_directly'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly_with_callbacks'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:89:in `execute_task'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/configuration/execution.rb:101:in `find_and_execute_task'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/cli/execute.rb:46:in `block in execute_requested_actions'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/cli/execute.rb:45:in `each'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/cli/execute.rb:45:in `execute_requested_actions'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/cli/help.rb:19:in `execute_requested_actions_with_help'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/cli/execute.rb:34:in `execute!'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/lib/capistrano/cli/execute.rb:14:in `execute'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/gems/capistrano-2.12.0/bin/cap:4:in `<top (required)>'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/bin/cap:19:in `load'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/bin/cap:19:in `<main>'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
  from /Users/frankie/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:05:45.130

正如 capistrano 所说，您应该尝试在本地执行它：

```
executing locally: "git ls-remote git@github.com:taheilo/taheilo.com.git master" 
```

# php - 包含文件的php处理

> ID：11671007
> 
> 赞同：7
> 
> 时间：2012-07-26T14:02:14.773
> 
> 标签：php, performance, include, internals

这个问题与 PHP 引擎的内部机制有关。我问它是为了理解文件包含过程。

比如说，您有一个包含在所有 php 脚本中的 20,000 行包含文件（类似于“functions_library.php”）。

每次您的一个 php 脚本加载该文件时，PHP 是否会检查/验证该包含文件在语法上是否正确？这个过程是否会在每次页面加载时一遍又一遍地发生？

或者...

PHP 会注意文件的最后修改日期吗？如果事实证明自上次检查以来没有对其进行任何更改，它是否只是忽略了检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:14:20.803

在默认安装中，每次都会解析该文件。但是，建议 PHP 的任何生产安装都具有字节码缓存，例如[APC](http://ca.php.net/apc)或[许多其他](http://en.wikipedia.org/wiki/List_of_PHP_accelerators)。使用字节码缓存时，第一次解析脚本并将解释后的代码存储在内存中。

不同的配置可能会改变检查文件修改的频率。在某些配置下，为了获得非常高的性能，可能需要手动刷新或重新启动 Web 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:05:44.420

如果包含该文件，PHP每次都需要**解释它。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:12:55.087

每次调用 .php 时，PHP 都会重新解释文件`include()`。

这可以使用变量进行视觉测试。如果你有这样的事情：

```
otherScript.php:
   <?php echo $foo; ?>

script.php:
    <?php
    $foo = 1;
    include("otherScript.php");
    $foo = 2;
    include("otherScript.php");
    ?> 
```

输出将是：

```
12 
```

这是一个糟糕的例子，但它应该证明 PHP 每次都需要包含文件的内容。声明 PHP 解释器不会为每个引用在内存中保留包含文件的副本是一个很好的猜测——每个应用程序可能有数百个包含。

然而，为了处理这个特定的理想，他们提供了一种方法[`include_once()`](http://php.net/include_once)，顾名思义，该方法只包含一次文件并防止它被包含任何其他时间。

# gdb - 矮人错误：编译单元标头中的版本错误（是 4，应该是 2）

> ID：11671009
> 
> 赞同：26
> 
> 时间：2012-07-26T14:02:27.030
> 
> 标签：gdb, dwarf

在 RedHat Linux 上构建了一个共享对象，当所有代码都使用调试编译时，调试器 (gdb) 拒绝加载符号并发出错误，如下所示：

```
...
GNU gdb   Fedora (6.8-37.el5) 
...
This GDB was configured as "x86_64-redhat-linux-gnu"...
Dwarf Error: wrong version in compilation unit header (is 4, should be 2) [in module libgrokf.so] 
```

有了这个错误，我无法在任何函数中触发断点，也无法看到正确的堆栈跟踪。我重新编译了整个项目，但没有任何帮助。我确实知道过去一段时间调试该模块没有问题。

是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-16T23:12:29.633

问题是您的版本`gdb`不支持`DWARF`您的一个二进制文件中使用的版本。

`gdb`解决方案：使用另一种调试格式更新或编译您的文件（`DWARF2`适用于`gdb`6）。

我最近遇到了and的这个问题，用`freeBSD`and编译二进制文件不接受它。`nasm``nasm``DWARF3``gdb``freeBSD 9.1`

我希望这个答案可以帮助任何有类似问题的人：P

[GCC 的调试选项](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-26T14:02:27.030

碰巧的是，无法调试的模块主要是从源代码构建的，除了一个由第 3 方提供的小“外部”目标文件 someextcode.o。

在调查该问题时，发现 someextcode.c 是使用 -g3 标志编译的，显然，该标志将 DWARF 版本 4 放在编译单元标头中。将其更改为 -g 解决了问题。

不幸的是，单个模块的问题似乎会破坏整个共享对象 (.so) 的调试能力，而没有明确指出问题的根源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-16T11:22:06.177

通过选择正确的 gdb 版本进行调试，我的问题得到了解决。早些时候我使用的是 gdb 7.0...当我开始使用 gdb 7.10 版时，我能够调试我的应用程序。

# ios - 如何在mapkit上跟踪坐标

> ID：11671015
> 
> 赞同：0
> 
> 时间：2012-07-26T14:02:34.867
> 
> 标签：ios, xcode, screen, mapkit, coordinates

是否可以定位用户屏幕中心的 mapkit 坐标？我需要记住用户屏幕的最后一个坐标并将它们放在应用程序启动时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:08:37.297

```
[yourMapView centerCoordinate] 
```

或者

```
[[yourMapView region] center] 
```

（直接在浏览器中输入，试试看）

# uitableview - 从自定义单元格获取数据

> ID：11671018
> 
> 赞同：1
> 
> 时间：2012-07-26T14:02:47.730
> 
> 标签：uitableview

当我尝试从具有两个不同文本字段的自定义单元格中获取数据时，我正在处理一个问题。自定义单元格是这样实现的：

[http://imageshack.us/photo/my-images/441/screenshot20120726at434.png/](http://imageshack.us/photo/my-images/441/screenshot20120726at434.png/)

表格视图如下所示：

[http://imageshack.us/photo/my-images/849/screenshot20120726at431.png/](http://imageshack.us/photo/my-images/849/screenshot20120726at431.png/)

我想要做的是，当我从右上角按 SAVE 按钮时，我应该从两个文本字段中获取值以及开关状态。我不知道如何管理细胞才能做到这一点。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:15:39.827

您可以使用第 0 节和第 0、1 和 2 行创建三个索引路径。然后向您的表视图询问`cellForRowAtIndexPath:`. 您知道您希望从每个信息中获得哪种类型的信息——与您在数据源方法中存储的信息相同——并且可以从匹配的文本字段或开关中读取它。

# c# - 如何清除另一个进程正在使用的文本文件

> ID：11671020
> 
> 赞同：4
> 
> 时间：2012-07-26T14:02:48.647
> 
> 标签：c#, .net, string, process, filestream

某个文本文件不断被另一个进程占用以更新其内容，我需要我的应用程序偶尔清除其内容。我在想 FileStream 的 fileshare.ReadWrite 属性可能有用，但我不能 100% 确定。

如何清除另一个进程拥有的文本文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:17:30.720

为什么不直接用空字符串覆盖 txt 文件呢？

```
System.IO.File.WriteAllText("filepath to the txt doc", emptystring make sure to initialize); 
```

# tridion - 如何在自定义页面部署器中访问转换后的 html 页面？

> ID：11671026
> 
> 赞同：4
> 
> 时间：2012-07-26T14:03:02.620
> 
> 标签：tridion, tridion2009, tridion-content-delivery

假设我们必须在自定义部署程序中访问已发布页面的内容。这部分代码位于扩展 PageDeploy 类的 CustomModule 中的 processPage 方法中。

这样我将获得正在发布的页面，但该页面的内容不会被转换（不会呈现该页面中的组件）。

```
public void processPage(Page page, File pageFile) throws ProcessingException {
    File file = new File(pageFile.toString());
} 
```

如果我知道我可以通过将 Cleanup 更改为 false 来禁用 cd_deployer.conf.xml 中的 TransportPackages 的清理：`<WorkFolder Location="C:\tridion\work" Cleanup="false"/>,` 我看到 Tridion 生成了我的页面的两个版本：

1.  root\page.html（具有未渲染内容，路径为 pageFile.ToString()）
2.  root\transformed\page.html （具有完整的内容 - 我想要的内容）

为什么当我使用转换后的页面文件路径创建新文件并阅读它时，我得到的 html 代码的内容比原始 html 还要少？这是因为在此阶段的部署页面仍未呈现和完成还是...？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:18:27.017

您的页面是否使用动态组件演示？如果是这样，则发布和部署的页面级 HTML 将仅包含组件表示的“包含指令”

```
<tcdl:ComponentPresentation ... /> 
```

在部署期间发生的唯一事情是，在发布/传输期间使用的“与技术无关”的语言被翻译成 JSP 标记或 ASP.NET 服务器控件包含，在这两种情况下，它通常翻译成以`tridion:ComponentPresentation`.

动态组件表示本身的 HTML 片段将单独发布，并作为单独的项目存储在配置的存储中。

完整的 HTML 将仅在请求页面时（用于为访问者提供服务）组成。在那个阶段，将调用 JSP 标记库或 ASP.NET 服务器控件，从存储中读取组件表示的 HTML 片段并将其注入页面的 HTML“线框”。

有了这些知识，它确实解释了为什么在 Deployer 扩展中找不到动态组件表示的 HTML 片段：将 DCP 片段合并到 Page shell 仅在请求页面时发生，而不是在部署页面时发生。

# apache - .htaccess 提示输入密码

> ID：11671028
> 
> 赞同：8
> 
> 时间：2012-07-26T14:03:06.013
> 
> 标签：apache, .htaccess, web

是否有办法将一个人的 .htaccess 文件设置为每次都提示进行身份验证？示例：我打开一个浏览器选项卡，转到受密码保护的 url，系统提示我输入密码。关闭选项卡（主浏览器仍然打开）并重复上述操作并再次提示输入密码。除非我关闭浏览器，否则不会发生这种情况。也许这是一个缓存的东西？

这是我到目前为止所拥有的：

```
AuthType Basic
AuthName "myName"
AuthUserFile "/home/myDir/.htpasswds/public_html/myName/passwd"
require valid-user 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T14:17:45.640

实际上它是这样工作的（简化）：

*   浏览器在没有凭据的情况下向您的服务器发送请求
*   Apache 响应 403 错误，因为指定了“需要有效用户”
*   浏览器提示输入用户名和密码
*   浏览器再次发送请求，这次提供了凭据
*   Apache 根据 AuthUserFile 验证凭据并相应地设置“有效用户”
*   如果一切正常 - 输出带有 200 状态码的数据
*   接收 200 个代码**缓存的浏览器使用相关域的凭据，直到浏览器会话到期**

如您所见 - 问题在于浏览器。您不能强制浏览器忘记它用于域的密码。通常您不希望 - 例如，如果受密码保护的页面包含图像 - 浏览器将要求每个下载的图像的用户名和密码。

但是，您可以尝试一些技巧：

*   您可以编写自己的 Apache 授权处理程序，该处理程序仅在用户第二次访问页面时对其进行授权；但真的很难做到
*   您可以使用某种基于表单的身份验证（在 php 或 asp.net 等脚本中），而不是依赖于 http 身份验证；这种方式相当灵活
*   您可以做一个技巧，每次访问受保护的页面时，某种脚本都会更改`passwd`文件中的密码；然后为每个用户提供两个密码并在每个请求上切换它们；这样浏览器总是记住“错误”的密码；看起来很疯狂，但这是我能想到的最简单的解决方案:-)

# drupal - drupal 7中必填字段的错误消息序列

> ID：11671036
> 
> 赞同：2
> 
> 时间：2012-07-26T14:03:36.780
> 
> 标签：drupal, drupal-7, validation

我有一个包含 4 个 CCK 字段的内容类型。字段名称是：

1.  field_device_data_card_id
2.  field_device_model
3.  field_device_type
4.  field_device_id

这些字段按其各自的顺序排列。

所有字段都标记为必填项。当我单击提交按钮而不在必填字段中填写任何数据时，它会为必填字段生成错误消息，但错误消息的顺序不正确。它按以下顺序显示->

1.  设备数据卡 ID 字段为必填项。
2.  设备 ID 字段是必需的。
3.  设备型号字段是必需的。
4.  请选择设备类型。

虽然它应该像 ->

1.  设备数据卡 ID 字段为必填项。
2.  设备型号字段是必需的。
3.  请选择设备类型。
4.  设备 ID 字段是必需的。

请给我一个解决方案，以便我可以对错误消息进行排序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:56:15.767

.. 通过 hook_form_alter 添加您的自定义验证器，然后：

```
function form_name_validate($form, &$form_state) {
$tmp_msg = drupal_get_messages('error');
// change order or modify on your own of $tmp_msg
drupal_set_message($tmp_msg,'error');
} 
```

# asp-classic - 导致类型不匹配的空字符串

> ID：11671037
> 
> 赞同：0
> 
> 时间：2012-07-26T14:03:37.407
> 
> 标签：asp-classic, vbscript, ado

我正在编写一个旧的 asp 页面，以将会话变量插入数据库，以将它们传输到 ASP.NET 应用程序。所以我遍历它们并使用存储过程将它们插入到数据库中。其中一个有一个空字符串作为值，当插入这些字符串时，它会失败：

Microsoft VBScript 运行时错误“800a000d”

类型不匹配

我已将它们以 key=value=vartype 的形式写到页面上，而 vartype 确实是 8，一个字符串。它的 GoBack 行失败：

```
User_id=2029=8
GoBack==8
ID_Reps=12345726=8 
```

这是电话：

```
.Parameters.Append .CreateParameter("@SessionValue", adVarChar, adParamInput, 4000, Session(objItem)) 
```

我宁愿在插入时不将其转换为空字符串。有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:17:26.430

两个选项将 Session(objItem) 替换为：

```
If(Session(objItem), DBNull.Value) 
```

或者

```
If(Session(objItem), String.Empty) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:34:53.827

我刚刚将参数设为可选，默认值为 null，如果值为 null，则绕过添加它。

# python - 以“原始”格式输出字符串数据

> ID：11671042
> 
> 赞同：1
> 
> 时间：2012-07-26T14:03:46.207
> 
> 标签：python, windows, python-3.x

我从大量 CSV 文件中捕获了大量数据。某些信息已被挖掘出来。我雕刻的一个部分是具有大量各种文本格式的部分。其中一些是情绪和其他非标准文本。

将此数据输出为 HTML 格式时，我遇到了错误。目前我有以下错误：

> *UnicodeDecodeError：“charmap”编解码器无法解码位置中的字节 0X90：字符映射到 <undefined>。*

该程序当前将信息从字符串存储到数组中。然后将数组写入 HTML 文件。

知道如何在 Python 3.2 中克服这个问题或如何实现字符缓冲区吗？

**更新**

我已经尝试了下面的评论，也做了更多的研究。

我使用此代码无济于事：

```
MessageArray.append(Message.encode('ascii', 'ignore')) 
```

但我得到了错误：TypeError: Cant convert 'bytes' object to str 隐式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:04:24.443

通过关注@SilverbackNet 的评论，我能够解决我的问题。虽然这并没有解决我的整体问题，因为能够从 CSV 导入和转换原始二进制数据，但允许忽略给我带来问题的数据。

# c# - 在高质量和低质量的像素化图像之间寻找匹配 - 有可能吗？如何？

> ID：11671043
> 
> 赞同：38
> 
> 时间：2012-07-26T14:03:48.897
> 
> 标签：c#, image, algorithm, image-processing, pattern-matching

我有个问题。我的公司给了我一个非常无聊的任务。我们有两个对话框数据库。其中一个数据库包含可怕质量的图像，另一个包含非常高质量的图像。

不幸的是，可怕质量的对话包含与其他信息的重要映射。

我的任务是手动检查所有不好的图像并将它们与好的图像匹配。

是否有可能在任何程度上自动化这个过程？这是两个对话框的示例（从 Google 图片中随机提取）：

![图像质量好](../Images/688a95f1cdf78ade4e11478e35fd92d0.png)

![劣质图像](../Images/9776b18f99532dbc7404d9c17c5c959c.png)

所以我目前正在尝试用 C# 编写一个程序来从数据库中提取这些照片，循环浏览它们，找到具有共同形状的照片，并返回它们的 ID。我在这里最好的选择是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-26T15:34:24.627

我真的认为没有理由为此使用任何外部库，我已经多次做过这种事情，并且以下算法效果很好。我假设如果您要比较两张具有相同尺寸的图像，但如果它们不同，您可以调整其中一张的大小。

```
badness := 0.0
For x, y over the entire image:
  r, g, b := color at x,y in image 1
  R, G, B := color at x,y in image 2
  badness += (r-R)*(r-R) + (g-G)*(g-G) + (b-B)*(b-B)
badness /= (image width) * (image height) 
```

现在您已经获得了两个图像之间的标准化不良值，不良值越低，图像匹配的可能性就越大。这是简单而有效的，在某些情况下有很多东西可以让它更好或更快地工作，但你可能不需要这样的东西。您甚至不需要对不良进行规范化，但是如果您想手动查看几个可能的匹配项，您只需为其设置一个阈值即可。

* * *

由于这个问题得到了更多关注，因此我决定添加一种方法来加快处理多次图像的速度。当我需要比较数以万计的图像时，我使用了这种方法，并且我确信一对典型的图像会大不相同。我也知道我所有的图像都是完全相同的尺寸。在您比较对话框的情况下，您的典型图像可能大多是灰色的，并且您的某些图像可能需要调整大小（尽管这可能只是表示不匹配），在这种情况下，这种方法可能不会让您受益很多。

这个想法是形成一个[四叉树](http://en.wikipedia.org/wiki/Quadtree)，其中每个节点代表该节点代表的区域的平均 RGB 值。因此，4x4 图像的根节点的 RGB 值等于图像的平均 RGB 值，其子节点的 RGB 值表示其各自 2x2 区域的平均 RGB 值，而*它们的*子节点将代表单个像素。（实际上，最好不要超过大约 16x16 的区域，此时您应该开始比较单个像素。）

在开始比较图像之前，您还需要确定坏度阈值。您不会以任何可靠的准确度计算高于此阈值的不良率，因此这基本上是您愿意将图像标记为“不匹配”的阈值。

现在，当您比较图像 A 和图像 B 时，首先比较它们的四叉树表示的根节点。就像计算单个像素图像一样计算 badness，如果 badness 超过您的阈值，则立即返回并报告此级别的 badness。因为您使用的是标准化的坏度，并且由于坏度是使用平方差计算的，所以任何特定级别的坏度都将等于或小于较低级别的坏度，所以如果它在任何点超过阈值，你知道它也会超过单个像素级别的阈值。

如果阈值测试在 nxn 图像上通过，只需下降到下一个级别并像它是 2nx2n 图像一样进行比较。一旦你变得足够低，只需比较各个像素。根据您的图像语料库，这可能允许您跳过大量比较。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-31T20:25:49.850

我个人会选择图像哈希算法。

图像散列的目标是将图像内容转换为特征序列，以获得浓缩的表示。该特征序列（即位向量）必须足够短，以便快速匹配并保留可区分的特征，以使相似性测量可行。

有几种算法可以通过开源社区免费获得。

可以在[本文](http://www.hackerfactor.com/blog/index.php?/archives/432-Looks-Like-It.html)中找到一个简单的示例，Neal Krawetz 博士在其中展示了**平均哈希算法**的工作原理：

> 1.  **缩小尺寸**。去除高频和细节的最快方法是缩小图像。在这种情况下，将其缩小为 8x8，以便总共有 64 个像素。不要费心保持纵横比，只需将其压碎以适合 8x8 正方形。这样，散列将匹配图像的任何变化，而不管比例或纵横比如何。
> 2.  **减少颜色**。微小的 8x8 图片被转换为灰度。这会将哈希值从 64 个像素（64 个红色、64 个绿色和 64 个蓝色）更改为 64 个总颜色。
> 3.  **平均颜色**。计算 64 种颜色的平均值。
> 4.  **计算位**。这是有趣的部分。根据颜色值是高于还是低于平均值来简单地设置每个位。
> 5.  **构造哈希**。将 64 位设置为 64 位整数。顺序无关紧要，只要您保持一致即可。（我使用大端从左到右，从上到下设置位。）

[David Oftedal](http://folk.uio.no/davidjo/computing.php)编写了一个[C# 命令行应用程序](http://folk.uio.no/davidjo/Imghash.zip)，它可以使用平均哈希算法对图像进行分类和比较。（我用你的示例图像测试了他的实现，我得到了 98.4% 的相似性）。

此解决方案的主要好处是您只需读取每个图像一次，创建散列并根据它们的相似性对它们进行分类（例如，使用[汉明距离](http://en.wikipedia.org/wiki/Hamming_distance)）。

通过这种方式，您可以将特征提取阶段与分类阶段分离，如果您发现它不够准确，您可以轻松切换到另一种散列算法。

* * *

**编辑**

[你可以在这里](https://dl.dropbox.com/u/1178845/ImageHash.zip)找到一个简单的例子（它包括一个由 40 张图像组成的测试集，它得到了 40/40 的分数）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-26T14:13:45.117

[这是一个](https://stackoverflow.com/questions/4196453/simple-and-fast-method-to-compare-images-for-similarity)讨论图像相似度算法的主题，已经在[OpenCV](http://opencv.willowgarage.com/wiki/)库中实现。在 C# 应用程序中导入低级函数应该没有问题。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-31T05:50:33.223

商业TinEye [API](http://www.tineye.com/commercial_api/)是一个非常好的选择。

我过去做过图像匹配程序，现在的图像处理技术非常棒，它非常先进。

*ps这里是你从谷歌中提取的那两张随机图片来自：* [http ://www.tineye.com/search/1ec9ebbf1b5b3b81cb52a7e8dbf42cb63126b4ea/](http://www.tineye.com/search/1ec9ebbf1b5b3b81cb52a7e8dbf42cb63126b4ea/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-30T20:51:13.603

由于这是一次性工作，我会使用脚本（选择你最喜欢的语言；我可能会选择 Perl）和[`ImageMagick`](http://imagemagick.org). 您可以使用 C# 来完成与脚本相同的操作，但需要更多代码。只需调用命令行实用程序并解析结果输出。

检查一对相似性的脚本大约有 10 行，如下所示：

首先检索尺寸`identify`并检查几乎相同的纵横比。如果不是，则不匹配。如果是这样，则使用 将较大的图像缩放到较小的大小`convert`。您应该提前尝试一下`filter`选项，以找到在已知等效图像中产生最大相似性的选项。其中九个可用。

然后使用该`compare`函数生成相似度度量。比较足够聪明，可以处理翻译和裁剪。尝试找到一个不会提供太多误报的相似性阈值。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-31T11:44:16.610

我会做这样的事情：

*   如果您已经知道模糊图像是如何模糊的，请在比较之前对高质量图像应用相同的功能。

    *   然后按照上面的建议使用最小二乘法比较图像。
    *   最低值应该给你一个匹配。理想情况下，如果两个图像相同，您将得到 0
    *   为了加快速度，您可以对下采样图像执行大多数比较，然后对选定的图像子样本进行细化
*   如果您不知道，请尝试各种可能的功能（JPEG 压缩、下采样等）并重复

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-02T05:04:08.077

您可以尝试**基于内容的图像检索**( [CBIR](http://en.wikipedia.org/wiki/Content-based_image_retrieval) )。

说穿：

1.  对于数据库中的每个图像，使用傅里叶变换生成指纹
2.  加载源图片，对图片做指纹
3.  计算源图像与数据库中所有图像之间的欧几里得距离
4.  对结果进行排序

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-02T11:27:16.967

我认为对此的混合方法将最好地解决您的特定批次匹配问题

1.  将@Paolo Morreti 建议的[图像哈希算法应用于所有图像](http://www.hackerfactor.com/blog/index.php?/archives/432-Looks-Like-It.html)
2.  对于一组中的每个图像，找到哈希值接近设定距离的图像子集
3.  对于这个缩小的搜索空间，您现在可以按照@Running Wild 或@Raskolnikov 的建议应用昂贵的匹配方法......最好的一个获胜。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-26T14:09:10.433

恕我直言，最好的解决方案是模糊两个图像，然后使用一些相似性度量（相关/互信息等）来获得前 K 个（K=5 可能是？）选择。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-30T06:33:37.337

如果从图像中提取轮廓，则可以使用 ShapeContext 获得非常好的图像匹配。

ShapeContext 是为这个确切的东西而构建的（基于相互形状比较图像）

ShapeContext 实现链接： [原创发布主题](https://mi.eng.cam.ac.uk/%7Ebdrs2/papers/thayananthan_cvpr03.pdf) [CodeProject页面上关于ShapeContext](http://www.codeproject.com/Articles/42699/Using-Shape-Context-Algorithm-to-Find-Similarity-a)[的goot ppt](http://www.cs.utexas.edu/%7Egrauman/courses/spring2008/slides/ShapeContexts425.pdf)

*您可能需要尝试一些“轮廓提取”技术，例如阈值或傅立叶变换，或查看[有关轮廓提取的 CodeProject 页面](http://www.codeproject.com/Articles/196168/Contour-Analysis-for-Image-Recognition-in-C)

祝你好运。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-07-31T08:35:54.610

如果您只计算图像的像素差异，那么只有在相同大小的图像或者您确切知道如何在水平和垂直方向上缩放它时才会起作用，而且您不会有任何移位或旋转不变性。

因此，我建议仅在您遇到最简单形式的问题时才使用像素差异度量（图像在所有特征上都相同，但质量不同，顺便说一下，为什么质量不同？jpeg 伪影或只是重新缩放？），否则我建议使用归一化互相关，它是更稳定的度量。您可以使用 FFTW 或 OpenCV 来完成。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-08-01T15:47:37.110

如果质量差只是分辨率较低的结果，那么：

*   将高质量图像重新缩放为低质量图像分辨率（或将两者重新缩放为相等的低分辨率）
*   比较每个像素颜色以找到最接近的匹配

因此，例如将所有图像重新缩放为 32x32 并按像素比较该设置应该会给您相当合理的结果，并且仍然很容易做到。尽管重新缩放方法可以在这里有所作为。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-07-26T14:14:26.903

您可以尝试块匹配算法，尽管我不确定它对您的特定问题的确切有效性 - [http://scien.stanford.edu/pages/labsite/2001/ee368/projects2001/dropbox/project17/block.html](http://scien.stanford.edu/pages/labsite/2001/ee368/projects2001/dropbox/project17/block.html) - [http://www.aforgenet.com/framework/docs/html/05d0ab7d-a1ae-7ea5-9f7b-a966c7824669.htm](http://www.aforgenet.com/framework/docs/html/05d0ab7d-a1ae-7ea5-9f7b-a966c7824669.htm)

即使这不起作用，您仍然应该查看 Aforge.net 库。那里有几个工具（包括上面的块匹配）可以在这个过程中帮助你 - [http://www.aforgenet.com/](http://www.aforgenet.com/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-07-30T06:45:09.653

我真的很喜欢 Running Wild 的算法，我认为如果你可以让两张图片更相似，它会更有效，例如通过降低更好的一张的质量。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-07-31T00:23:53.673

Running Wild 的答案非常接近。您在这里所做的是计算每个图像的峰值信噪比或 PSNR。在您的情况下，您实际上只需要均方误差，但它的平方分量有助于计算图像之间的差异。

[PSNR 参考](http://en.wikipedia.org/wiki/PSNR "维基百科")

您的代码应如下所示：

```
sum = 0.0
for(imageHeight){
  for(imageWidth){
    errorR = firstImage(r,x,y) - secondImage(r,x,y)
    errorG = firstImage(g,x,y) - secondImage(g,x,y)
    errorB = firstImage(b,x,y) - secondImage(b,x,y)
    totalError = square(errorR) + square(errorG) + square(errorB)
  }
  sum += totalError
}
meanSquaredError = (sum / (imageHeight * imageWidth)) / 3 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-07-31T11:28:31.343

我假设来自两个数据库的图像显示相同的对话框，并且图像应该接近相同但质量不同？然后匹配的图像将具有相同（或非常接近相同）的纵横比。

如果低质量图像是从高质量图像（或等效图像）产生的，那么您应该使用与高质量图像预处理步骤相同的图像处理过程，并与低质量图像数据库匹配。然后逐像素比较或直方图匹配应该可以很好地工作。

如果您有很多图像，图像匹配会使用大量资源。也许多通道方法是个好主意？例如： 第 1 阶段：使用简单的方法，如纵横比来对图像进行分组（db 中的宽度和高度字段？）（计算成本低） 第 2 阶段：通过直方图匹配或分组第一个颜色通道（或所有通道）（相对计算便宜的）

我也会推荐 OpenCV。您可以将它与 c、c++ 和 Python（以及很快的 Java）一起使用。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-08-01T08:46:23.337

只是大声思考：

如果您使用两个应该作为图层进行比较的图像并将它们组合起来（从另一个中减去一个），您会得到一个新图像（一些绘图程序可以编写脚本来进行批量转换，或者您可以通过编写一个微型 DirectX 或OpenGL程序）

接下来，您必须获得结果图像的亮度；它越暗，匹配越好。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-08-02T14:34:09.247

您是否尝试过将轮廓/阈值技术与行走平均窗口（对于 RGB 值）结合使用？

# gwt - 无法解析关系的 GWT Resolver 属性

> ID：11671051
> 
> 赞同：1
> 
> 时间：2012-07-26T14:04:16.793
> 
> 标签：gwt, jpa-2.0, requestfactory, resolver

我正在使用 JPA 进行持久性的 GXT 项目，但我面临双向关系持久性的问题。

我有这两个实体：

```
 @Entity
    @Table(name = "ACTV_REQ", catalog = "erpdb")
    @AttributeOverride(name = "id", column = @Column(name = "ID", nullable = false, columnDefinition = "BIGINT UNSIGNED"))
    @NamedQueries(value = { 
            @NamedQuery(name = "findByPerson", query="select object(m) from ActvReq m where m.people= :people")
    })
    public class ActvReq extends BaseEntity {
        @ManyToOne
        @JoinColumn(name = "PPL_ID")
        @NotNull
        private People people;

        @ManyToOne
        @JoinColumn(name = "ACTV_TYP_ID")
        private ActivityTyp actvTyp;

        @ManyToOne
        @JoinColumn(name= "PPL_ACTV_RIGHT_ID")
        private PeopleActvRight pplActvRight;

        @Column(name = "DESCR")
        private String desc;
    } 
```

和 ：

```
 @Entity
    @Table(name = "PPL_ACTV_RIGHT", catalog = "erpdb")
    @AttributeOverride(name = "id", column = @Column(name = "ID", nullable = false, columnDefinition = "BIGINT UNSIGNED"))
    @PeopleActvRightBeanConstraint
    @NamedQueries(value = { 
            @NamedQuery(name = "findByPeople", query="select object(m) from PeopleActvRight m where m.people= :people")
    })
    public class PeopleActvRight extends BaseEntity {

        @ManyToOne
        @JoinColumn(name="ACTV_TYP_ID")
        @NotNull    
        ActivityTyp type;

        @ManyToOne
        @JoinColumn(name="PPL_ID")
        @NotNull    
        People people;

        @ManyToOne
        @JoinColumn(name="ACTV_RIGHT_ID")
        ActvRight actvRight;

        @OneToMany(mappedBy="pplActvRight",cascade=CascadeType.ALL)
        private List<ActvReq> actvRequests = new ArrayList<ActvReq>();
    } 
```

（我没有复制 getter 和 setter，但这些方法存在。）

对于 ActvReqProxy 的持久性，在我的 EditorPresenter 中基本上是这样完成的：

```
 getRequestContext().persistAndReturn(getModel()).with("actvTyp","people","pplActvRight").fire(new Receiver<M>() {
        @Override
        public void onSuccess(M response) {
        unsetContext();
        onSaveSuccess( response );
        }       
    }); 
```

在我得到的响应中，响应 pplActvRight 已经为空，但是在 getModel() 中设置了 pplActvReqProxy。

在服务器端，我有一个服务，它调用我的 DAO 的以下方法：

```
 public ActvReq persistAndReturn(ActvReq entity){
        em.getTransaction().begin();
        em.persist(entity);
        em.close;
        return entity;
    } 
```

当我尝试从我的编辑器中持久化 ActvReqProxy 时，使用 with("pplActvRight","people",actvType") 方法，我没有收到任何错误，但在我的数据库中，实体并没有完全持久化。我意味着在数据库中创建了一个新的 ActvReq 但字段 PPL_ACTV_RIGHT_ID 保持为空。（它适用于人和 actvTyp）

编辑：事实上我假设问题位于resolveDomainValue中的GWT Resolver上，它无法解析属性pplActvRight。就好像我的 EntityProxy 对象在服务器端不存在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:26:58.257

那么在`persistAndReturn`服务器端开始时它已经是了`null`吗？如果是这样，那么至少我们知道它与 JPA 无关。

而且您确定`null`在调用之前在客户端将其设置为代理以外的其他内容`persistAndReturn`？您可以轻松地对其进行验证：使用 Eclipse 调试器可以查看将序列化到哪个代理的 JSON 代码（在调试器中选择代理对象时可以看到的代理字段之一）。请确保该`pplActvRight`键具有非空值。

如果是这样，也许您应该调试将代理转换为服务器端实体的 GWT 源代码，以检查该属性正在做什么`pplActvRight`（为什么它没有分配给相应的`ActvReq`服务器端实例）。我不记得做这些东西的类名是什么，但如果你找不到它，我可以为你搜索。

# android - 从图库中复制图像，然后将其删除

> ID：11671053
> 
> 赞同：0
> 
> 时间：2012-07-26T14:04:26.230
> 
> 标签：android, android-gallery

我有一个 AsyncTask 将刚刚拍摄的照片复制到我指定的位置，然后原始照片被删除。但是，我大部分时间都会遇到错误。

```
final String[] projection = { MediaStore.Images.ImageColumns.SIZE,
                MediaStore.Images.ImageColumns.DISPLAY_NAME,
                MediaStore.Images.ImageColumns.DATA,
                BaseColumns._ID,};

        u = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
        boolean found = false;

        if (CurrentFile != null)
        {               
            if ((u != null) && (CurrentFile.length() > 0))
            {
                Looper.prepare();   
                getSupportLoaderManager().initLoader(0, null, new LoaderCallbacks<Cursor>(){

                    public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
                        CursorLoader loader = new CursorLoader(ExpenseReport.this, u, projection, null, null, null);
                        return loader;
                    }

                    public void onLoadFinished(Loader<Cursor> arg0, Cursor c) {
                        if ((c != null) && (c.moveToFirst())){

                            do 
                            {

                                for (String sGallery : GlobalInfo.GalleryList){

                                    if (sGallery.equalsIgnoreCase(c.getString(1))){
                                        found = true;
                                        break;
                                    }
                                } 
                                if (!found){
                                    File f = new File(c.getString(2));

                                    if ((f.exists()) && (CurrentFile.length() < c.getLong(0)) && (CurrentFile.delete())){

                                        try
                                        {
                                            CurrentFile.createNewFile();
                                            FileChannel source = null;
                                            FileChannel destination = null;
                                            try{
                                                source = new FileInputStream(f).getChannel();
                                                destination = new FileOutputStream(CurrentFile).getChannel();
                                                destination.transferFrom(source, 0, source.size());
                                            }
                                            finally{

                                                if (source != null)
                                                    source.close();

                                                if (destination != null)
                                                    destination.close();
                                            }
                                        }
                                        catch (IOException e)
                                        {
                                            e.printStackTrace();
                                            GlobalInfo.LOG("", "Couldn't Copy The File");

                                        }
                                    }
                                    ContentResolver cr = getContentResolver();
                                    Bitmap bitmap=null;
                                    try {
                                        bitmap = android.provider.MediaStore.Images.Media.getBitmap(cr, CurrentUri);
                                    } catch (FileNotFoundException e1) {
                                        e1.printStackTrace();

                                    } catch (IOException e1) {
                                        e1.printStackTrace();

                                    }
                                    if(bitmap.getWidth()<2000) 
                                        bitmap = Bitmap.createScaledBitmap(bitmap, bitmap.getWidth(), bitmap.getHeight(), false);
                                    else
                                        bitmap = Bitmap.createScaledBitmap(bitmap, 2000, 2000, false);

                                    try {
                                        FileOutputStream out = new FileOutputStream(CurrentFile);
                                        bitmap.compress(Bitmap.CompressFormat.JPEG, 80, out);
                                    } catch (Exception e) {
                                        e.printStackTrace();

                                    }

                                    cr.delete(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, 
                                            BaseColumns._ID + "=" + c.getString(3), null);

                                    break;                        
                                }
                            } 
                            while (c.moveToNext());
                        }
                    }

                    public void onLoaderReset(Loader<Cursor> arg0) {                        
                    }

                });
                Looper.loop();
            }
        } 
```

这是我得到的错误：

```
07-26 09:38:58.060: E/CursorWindow(1566): Bad request for field slot 0,1\. numRows = 14, numColumns = 1
07-26 09:38:58.107: W/dalvikvm(1566): threadid=10: thread exiting with uncaught exception (group=0x40015578)
07-26 09:38:58.142: E/AndroidRuntime(1566): FATAL EXCEPTION: AsyncTask #1
07-26 09:38:58.142: E/AndroidRuntime(1566): java.lang.RuntimeException: An error occured while executing doInBackground()
07-26 09:38:58.142: E/AndroidRuntime(1566):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at java.lang.Thread.run(Thread.java:1019)
07-26 09:38:58.142: E/AndroidRuntime(1566): Caused by: java.lang.IllegalStateException: get field slot from row 0 col 1 failed
07-26 09:38:58.142: E/AndroidRuntime(1566):     at android.database.CursorWindow.getString_native(Native Method)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at android.database.CursorWindow.getString(CursorWindow.java:361)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:49)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at android.database.CursorWrapper.getString(CursorWrapper.java:135)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at com.report.expense.ExpenseReport$FinishPhotoTask$1.onLoadFinished(ExpenseReport.java:1131)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at com.report.expense.ExpenseReport$FinishPhotoTask$1.onLoadFinished(ExpenseReport.java:1)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at android.support.v4.app.LoaderManagerImpl$LoaderInfo.callOnLoadFinished(LoaderManager.java:425)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at android.support.v4.app.LoaderManagerImpl.initLoader(LoaderManager.java:559)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at com.report.expense.ExpenseReport$FinishPhotoTask.doInBackground(ExpenseReport.java:1115)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at com.report.expense.ExpenseReport$FinishPhotoTask.doInBackground(ExpenseReport.java:1)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at     android.os.AsyncTask$2.call(AsyncTask.java:185)
07-26 09:38:58.142: E/AndroidRuntime(1566):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
07-26 09:38:58.142: E/AndroidRuntime(1566):     ... 4 more 
```

(ExpenseReport.java:1115):

```
getSupportLoaderManager().initLoader(0, null, new LoaderCallbacks<Cursor>(){ 
```

(ExpenseReport.java:1131):

```
if (sGallery.equalsIgnoreCase(c.getString(1))){ 
```

编辑：我试图通过比较我拍摄照片之前和之后的照片名称列表来获取刚刚拍摄的照片的大小、名称、位置和 ID。问题是，有时这段代码工作正常，有时它给我这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:51:19.390

发生的事情是我的活动中有多个 ID 为 0 的 LoaderManager，因此查询返回了之前的列（这只是照片名称，没有其他内容，感谢 Michael 查看我的列名称的提示）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:02:37.603

（根据 OP 的建议从我的评论中创建答案）：

您可以使用您的`getColumnNames`方法`Cursor`来获取您实际从`MediaStore`. 希望这将为正在发生的事情提供一些提示。

# php - 为什么 PHP.ini include_path 在这里对我来说不能正常工作？

> ID：11671059
> 
> 赞同：2
> 
> 时间：2012-07-26T14:04:42.747
> 
> 标签：php, apache

我在尝试在我的开发机器（Windows XP）上设置 PEAR 时遇到了一些奇怪的问题。

这个过程很简单，一切都很有意义，但我正在尝试使用已安装的软件包之一，它调用 PEAR.php 文件并得到：

```
Failed opening required 'PEAR.php' (include_path='.;C:\Program Files\PHP\PEAR') 
```

假设文件/路径不存在，这是一个非常简单的错误，除了我已经检查并仔细检查 - 它绝对存在 - 一直到大写（我知道这在 Windows 上通常无关紧要，但仍然...... )

我可能忽略了什么意味着文件无法打开？

只是为了重新迭代，文件/目录肯定以 C:\Program Files\PHP\PEAR\PEAR.php 的形式存在 - 我也尝试过：

*   正斜杠
*   短目录名称（Progra~1）
*   全部小写（即使文件原样），甚至将包含路径设置为仅该目录。
*   test.php 在同一目录中
*   c:\ 中的 test.php 并且包含路径设置为 c:\ 并且只是 \

PHP (5.2.6) 未在安全模式下运行，并且 Web 服务器是 Apache 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:08:36.333

也许您的 php 配置已`open_basedir`设置？如果是这样，请将其值设置为无。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:08:09.970

尝试其中之一：

```
C:/Program\ Files/PHP/PEAR/PEAR.php
C:/Program Files/PHP/PEAR/PEAR.php 
```

# java - java中文件写入期间的IOException处理

> ID：11671063
> 
> 赞同：13
> 
> 时间：2012-07-26T14:04:56.187
> 
> 标签：java, file, io

我的应用程序不断将大量字节写入文件。如果我的代码块正在写出字节并在与驱动器或网络的连接丢失的情况下获得 IOException，我如何知道它写入了多少字节？

例如，我一次写入 2500 个字节，如果发生 IOException，是否意味着它没有向文件写入任何内容，或者它会将部分字节写入文件？如果部分字节被写入文件我怎么知道写入了多少

仅供参考我正在使用

```
DataOutputStream 
```

写出文件。我只在我的应用程序关闭时刷新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T14:09:42.740

你不能，`IOException`任何时候都可能发生。如果您考虑一下，`IOException`可能是由软件或硬件故障引起的，在写入第一个字节之前，在写入之后但连接发生了一些事情 - 或者如果数据块很大，则在中间。

重新连接后，您必须检查文件大小或使用其他技术使文件保持一致状态并恢复。最简单的安全网：在写入数据之前读取文件大小并可靠存储，写入数据并在写入后读取文件大小。如果发生错误并且当前文件大小不等于预期文件大小（上次保存），则截断多余的字节并重试。

阅读关系数据库中的事务日志，以了解大型和可靠的软件如何处理此类情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:11:46.363

这取决于写入失败的方式，但 InterruptedIOException 可能是您正在寻找的：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InterruptedIOException.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InterruptedIOException.html)

它包含一个“bytesTransferred”字段：“报告在中断之前作为 I/O 操作的一部分传输了多少字节。”

# animation - 在动画结束时，组件回弹

> ID：11671064
> 
> 赞同：0
> 
> 时间：2012-07-26T14:05:01.387
> 
> 标签：animation, sencha-touch-2

我正在使用下面的动画向上滑动我的工具栏，它向上滑动，但它没有停留。它滑回原来的位置。这是正常行为吗？......如果是这样，我是否必须明确设置工具栏的新顶部值？同样在我的工具栏配置中，我指定：顶部：1536。

```
Code:
Ext.Anim.run(toolbar,'slide',{
                        direction: 'up',
                        duration: 1000,
                        from:{top:1536},
                        to:{top:1432}
                     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:49:11.853

试试这个。它应该工作

```
Ext.Animator.run({
    element: toolbar,
    duration: 1000,
    easing: 'ease-in',
    preserveEndState: true,
    from: {top:1536},
    to: {top:1432}
}); 
```

# c# - 替代可以支持 ActiveX 的 WPF WebBrowser 控件？

> ID：11671073
> 
> 赞同：1
> 
> 时间：2012-07-26T14:05:56.383
> 
> 标签：c#, .net, wpf, browser, webbrowser-control

在我的 WPF 应用程序中，我需要托管一个可以支持 JavaScript 和 ActiveX 的 Web 浏览器控件。

此浏览器将打开基于 catia 模型的 3D HTML 文件（大文件）。

我需要在合理的时间内打开它们……这是我现在的问题。

我的目标是尽可能接近这些时间：（这是 Internet Explorer 需要打开每个文件的时间）

*   样本 1（Light 3D 文件）：12 秒
*   样本 2（中型 3D 文件）：84 秒
*   样本 3（大型 3D 文件）：160 秒

如果我使用 WPF WebBrowser 控件，这些是我的时间：

*   示例 1（Light HTML 3D 文件）：23 秒
*   示例 2（中型 HTML 3D 文件）：195 秒
*   示例 3（重型 HTML 3D 文件）：367 秒

如您所见，托管在我的简单 WPF 应用程序中的 WebBrowser 需要花费大量时间来加载我的文件......

如果没有可以使用的替代控件...有没有办法使用 WPF WebBrowser 加速加载？

我在 Internet 上找到了其他用于 WPF 的 Web 浏览器，但它们都不适用于我们的 3D html (activeX)。

# ruby - 在 Ruby 中检索 Redis 列表值的最佳方法是什么？

> ID：11671074
> 
> 赞同：1
> 
> 时间：2012-07-26T14:05:58.350
> 
> 标签：ruby, redis

当这些值是相对较大的序列化 Ruby 对象时，最常见的方法是检索列表中的所有值？

例如：

*   我在 Redis 列表中有 5000 个值
*   列表中的每个值都包含一个序列化为字符串的 50K Ruby 对象

我需要遍历 Ruby 中的所有这些值，是否更高效：

1.  用于`lrange`一次获取所有值，然后在 Ruby 中遍历它们
2.  用于`llen`计算列表中的值，然后在 Ruby 中循环使用`lindex`以检索每个值作为对 Redis 的单独访问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:08:37.920

我会说，这没有什么区别。选择一个更容易为您编码的。使用 LRANGE 获得的任何速度提升都取决于传输大型对象所需的时间。我可能会一一处理它们，这样它会使用更少的内存。

# asp.net-mvc - 支持上下文的模型已更改

> ID：11671077
> 
> 赞同：0
> 
> 时间：2012-07-26T14:06:09.753
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我已经看到了其他答案，但我无法让它发挥作用。我有一个简单、干净的网站，有两个模型：

博客模型：

```
Imports System.Data.Entity
Imports System.ComponentModel.DataAnnotations

Public Class Blog

    Public Property BlogId() As Integer

    Public Property Name() As String
    Public Property Description() As String
    Public Property DateCreated As Date

    Public Overridable Property Articles() As ICollection(Of Article)

End Class

Public Class BlogDbContext

    Inherits DbContext
    Public Property Blogs As DbSet(Of Blog)

End Class 
```

文章型号：

```
Imports System.Data.Entity
Imports System.ComponentModel.DataAnnotations

Imports GemcoBlog

Public Class Article

    Public Property ArticleId() As Integer
    Public Property BlogId() As Integer
    Public Property Title() As String
    Public Property Body() As String
    Public Property DateCreated As Date

Public Overridable Property Blog() As Blog

End Class

Public Class ArticleDbContext
    Inherits DbContext
    Public Property Articles As DbSet(Of Article)
    Public Property Blogs As DbSet(Of Blog)
End Class 
```

当我添加创建控制器和视图的控制器，然后运行时，我收到此错误：

> 自数据库创建以来，支持“ArticleDbContext”上下文的模型已更改。手动删除/更新数据库，或使用 IDatabaseInitializer 实例调用 Database.SetInitializer。例如，DropCreateDatabaseIfModelChanges 策略将自动删除并重新创建数据库，并可选择使用新数据为其播种。
> 
> 源错误：
> 
> 第 12 行：第 13 行：函数 Index() As ViewResult 第 14 行：
> Dim article = db.Articles.Include(Function(a) a.Blog) 第 15 行：
> 返回 View(articles.ToList()) 第 16 行：结束函数
> 
> 源文件：C:\Users\darchual\documents\visual studio 2010\Projects\Blog\Blog\Controllers\ArticleController.vb
> 行：14

我该如何解决这个错误？

编辑：

我通过从数据库中删除 EdmMetaData 表来解决这个问题。我需要这张桌子吗？它对任何事情都有好处吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:20:09.480

对我来说，这个问题的解决方案是从数据库中删除 EdmMetaData 表。

# android - 在哪里指定 OpenGL ES 2.0 如何在片段着色器中表示浮点纹理值？

> ID：11671080
> 
> 赞同：7
> 
> 时间：2012-07-26T14:06:21.990
> 
> 标签：android, graphics, opengl-es, opengl-es-2.0, gpgpu

我正在尝试使用 OpenGL ES 2.0 做一些 GPGPU。
在我看来，GL_NV_draw_buffers 和[GL_OES_texture_float](http://www.khronos.org/registry/gles/extensions/OES/OES_texture_float.txt)扩展是这里的一些必需品。

这个问题与[GL_OES_texture_float](http://www.khronos.org/registry/gles/extensions/OES/OES_texture_float.txt)扩展有关：从桌面世界，如果格式是定点（如 GL_RGBA），在着色器中访问时，我习惯于纹理在 [0..1] 范围内。
查阅相应的 OES 扩展页面，它说：

“......如果纹理的内部格式是定点的，则将组件限制为 [0..1]。否则，不会修改值。”

现在我已经在网上多次听到（例如这里的答案：[Do OpenGL GLSL samplers always return floats from 0.0 to 1.0?](https://stackoverflow.com/questions/9398889/do-opengl-glsl-samplers-always-return-floats-from-0-0-to-1-0)），ES 2.0 也支持访问片段着色器中的非钳位值。但是这个功能是在哪里指定的呢？扩展名说“否则，值不会被修改”，但由于 OpenGL ES 规范只知道定点格式，它对我来说没有意义。

此外，据我了解，扩展仅指定浮点值可以从客户端内存读取到纹理中，但没有指定纹理在图形内存中的表示方式（即每个通道有多少位）。有这方面的官方规范吗？

最后，我想在我的片段着色器中将未固定的浮点值写入 FBO 颜色附件，最好每个通道使用 32 位。这可能吗？

# excel - Excel 工作表

> ID：11671081
> 
> 赞同：0
> 
> 时间：2012-07-26T14:06:42.437
> 
> 标签：excel, vba

我有 2 个工作表，ws1 和 ws2。这是vba。它将转到 ws2，然后转到 ws1。我只想在 ws2 完成复制工作时看到 ws1，我不想在 ws1 和 ws2 之间折腾。

我应该如何纠正vba？

```
Sheets("ws2").Select
Range("A3:AA3").Select
Selection.Copy
Range("A4").Select
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False
Range("A4").Select
Application.CutCopyMode = False
Range("A4:AA4").Select
Selection.Insert Shift:=xlDown
Sheets("ws1").Select 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:17:05.780

**杂耍**发生是因为**你**告诉 excel 做杂耍:) 因此我总是建议不要使用`.SELECT/.ACTIVATE`.

直接执行操作。看到这个。

```
Sub Sample()
    Dim ws As Worksheet

    Set ws = Sheets("ws2")

    With ws
        .Range("A3:AA3").Copy
        .Range("A4").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
        .Range("A4:AA4").Insert Shift:=xlDown
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:09:35.837

利用

```
 Application.ScreenUpdating = False 
```

在运行上述代码以停止查看宏正在执行的操作之前。

所以：

```
Sheets("ws1").Select
Application.ScreenUpdating = False
Range("A3:AA3").Select
.... etc

Application.ScreenUpdating = True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:14:54.823

ozgrid 上的一个[论坛条目](http://www.ozgrid.com/forum/showthread.php?t=67728)提供了一个简单而优雅的解决方案

```
Sub NameOfSub() 

    Application.ScreenUpdating = False

    'Some Code Here

    Application.ScreenUpdating = True 

End Sub 
```

# css - 如何在不同的浏览器中打印多页 HTML 表格

> ID：11671087
> 
> 赞同：1
> 
> 时间：2012-07-26T14:06:56.033
> 
> 标签：css, printing, cross-browser

打印包含高度约为 5 厘米的单元格的 HTML 表格的最佳做法是什么，不应将其分成不同的页面。

我已经制作了 print.css 并定义了

```
table { page-break-inside:auto }
tr    { page-break-inside:avoid; page-break-after:auto }
thead { display:table-header-group }
tfoot { display:table-footer-group } 
```

但 ：

*   在 Chrome 中，HTML 页面中的图片跨页面拆分
*   在 Firefox 中，第一页为空，表格从第二页开始，表格的其余部分被切掉（第 3 页再次为空）
*   IE我还不敢尝试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-09T07:04:39.320

浏览器对分页 CSS 属性的支持参差不齐，尤其是在表格部分。如果要防止单元格内容中的分页符，我建议将内容嵌套在 div 中，并设置“page-break-inside：避免；” 在 div 上。如果您需要支持根本不实现 page-break-inside 属性的旧浏览器，您还应该设置“display: inline-block; vertical-align: top;” 在 div 上。

另外，请注意，如果可打印区域的高度（即页面高度减去顶部和底部边距）小于单元格内容的高度，则浏览器不可能避免破坏它，除非它可以以某种方式扭曲空间结构（也许 Firefox 有一个“-moz-”属性？）。

# image - 将背景图片放在分组的 UITableView 后面

> ID：11671088
> 
> 赞同：1
> 
> 时间：2012-07-26T14:07:00.910
> 
> 标签：image, uitableview, uiview, background, behind

我有一个分组的 UITableView 已调整大小和四舍五入。我想在这张桌子后面放一个视图。我试过了：

```
[self.tableView addSubview:backgroundView];
[self.tableView sendSubviewToBack:backgroundView]; 
```

但它没有用。这是我得到的：

![圆形 uitableview](../Images/e9cd8462631154ee97154a3ba4fdf5c7.png)

我想用背景代替黑色空间。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:19:51.040

怎么样`[self.tableView setBackgroundView:backgroundView];`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T14:55:03.267

请耐心等待我是初学者。我刚遇到这个问题，我找到了两个解决方案。就我而言，我使用的是 UITableView 对象。

首先，将背景图像添加到您的应用程序目录中。我把我的放在“支持文件”中

您可以将图像添加为 UIColor 对象：

```
 ...
    [resultsTable setBackGroundColor:setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"background.jpg"]]];
    ... 
```

这种方法的问题是它会重复你的背景图像，因为它把它当作一个图案。

更好的方法：

```
 // Create a string to store the path location of your image, otherwise you would have    to provide an exact path name
     NSString *backPath = [[NSBundle mainBundle] pathForResource:@"background"
     ofType:@"jpg"];

    // Create a UIImage Object to store the image.
     UIImage *bgImage = [[UIImage alloc ] initWithContentsOfFile:backPath];

     // Create a UIImageView which the TableView 
     UIImageView *bgView = [[UIImageView alloc]initWithImage:bgImage];

     // Set your TableView's background property, it takes a UIView Obj.
     [resultsTable setBackgroundView: bgView];
     ..... 
```

# c - 为什么 libargtable 与可选的争论行为奇怪？

> ID：11671090
> 
> 赞同：1
> 
> 时间：2012-07-26T14:07:06.660
> 
> 标签：c, shared-libraries, command-line-arguments

如果有人使用**argtable**作为 C 代码的**命令行参数解析器**，这是我的问题：

# 我的意图

我正在使用最新版本的 argtable2 库在 Linux 平台上用 C 语言进行编程。

我想要存档的是一个程序，它**接受多个输入文件**和一个**可选选项**（我们称之为`-o`）。如果`-o`未在 shell 调用中作为选项**提供****，则程序不会写入任何输出**。如果`-o`由**它自己提供，**则程序的输出将**写入**名为“output.txt”的默认文件。如果选项**与文件名一起提供**，例如`-o other.txt`，**输出应写入给**定的文件名 - 在本例中为“other.txt”。

# 问题

在我所有的尝试**中，argtable misbehaved**。它将给出**的可选值解释**`-o` **为输入文件**。所以`./program -o other.txt inputfile1.dat inputfile2.dat inputfile3.dat`会被解释为有四个输入文件——三个“inputfile*.dat”和应该是输出文件的“other.txt”。

# 重现问题

这是一个shell会话来说明，我的意思。它使用了一个产生问题的[最小示例。](http://pastebin.com/LiLe7XMs)我不确定是我做错了什么还是[libargtable2](http://argtable.sourceforge.net/)中的错误：

```
confus@confusion:~$ gcc -o argbug argbug.c -largtable2
confus@confusion:~$ ./argbug
Error: missing option INPUT-FILES

Usage:
./argbug [-o [<file>]] INPUT-FILES
-o [<file>]               File to write output to. Default is 'output.txt'.
                         Omit whole option to discard all output
INPUT-FILES               Input files
confus@confusion:~$ ./argbug inputfile1.dat inputfile2.dat inputfile3.dat -o other.txt
inputfile[0] = inputfile1.dat              # this is okay output
inputfile[1] = inputfile2.dat              # as is this line
inputfile[2] = inputfile3.dat              # also okay output
inputfile[3] = other.txt                   # "other.txt" is falsely recognized as an input file
outputfile = output.txt                    # should be "other.txt" instead of the default "output.txt" 
```

无论是我还是 Steward，argtable 的作者似乎都没有时间真正研究我的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:35:50.230

我运行了你的测试，发现了同样的问题。查看源代码，似乎 libargtable 正在正确处理它，但归结为 getopt 行为。

如果您从 getopt.c 中的第 647 行开始查看，您可以看到 getopt 首先检查是否有附加的参数，在选项和参数之间*没有*任何空格（例如 -oother.txt）。如果是这种情况，它会处理它。这是它会注意到可选参数的唯一情况。

要对此进行测试，请尝试

```
void *argtable[] = { argOutput, end }; 
```

在你的测试用例中，然后

```
./argbug -o other.txt 
```

你会看到它给出了一个错误。

但是，它还有一段额外的代码，用于检查是否有必需的选项。如果是这样，即使标志和参数之间有空格，它也会执行额外的搜索来满足这一点。

查看代码的提示：has_arg 是一个枚举，其中 0=无参数 1=必需的参数 2=可选参数

## 简答

如果标志和参数之间有空格，libargtable 将不会处理可选参数。删除空间，它应该可以工作。

我可能认为这是一个错误，但也许有些人喜欢这种行为。

# php - php登录无法检索正确的数据

> ID：11671093
> 
> 赞同：0
> 
> 时间：2012-07-26T14:07:14.040
> 
> 标签：php, login

我无法弄清楚我的 phpscript 的这一部分有什么问题。登录成功，但我无法从正确的帐户检索数据。谁能看看这部分脚本是否有问题？

```
 $_SESSION['ingelogd'] = true;
            $_SESSION['profiel'] = $rij['Type'];
            $_SESSION['gebruikerID'] = $rij ['Account_nr']; 
            // Gebruiker succesvol ingelogd, gegevens opslaan in sessie enzo ...
            if(strcmp($rij['Type'],"bedrijf")==0){
                $query2 = "SELECT * FROM account_bedrijf WHERE Account_nr = '" . $_SESSION['gebruikerID'] . "limit 1' ";
                $result2 = mysql_query( $query2 ) or trigger_error( mysql_error() );
                if( mysql_num_rows( $result2 ) == 0 ) {
                    session_unset();
                    echo 'Ongeldige gebruikersnaam en/of wachtwoord';
                } else {
                    $_SESSION['company'] = $result->Bedrijf_nr;
                    header( 'Location: company_profile.php' ) ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:11:05.970

```
SELECT * FROM account_bedrijf WHERE Account_nr = '" . $_SESSION['gebruikerID'] . "limit 1' "; 
```

将产生以下 SQL 语句（如果 gebruikerID 为 5）：

```
SELECT * FROM account_bedrijf WHERE Account_nr = '5limit 1' 
```

您忘记插入空格并且没有将 id 放在单引号之间。更正确的是：

```
SELECT * FROM account_bedrijf WHERE Account_nr = '" . $_SESSION['gebruikerID'] . "' limit 1"; 
```

这将产生一个更正确的

```
SELECT * FROM account_bedrijf WHERE Account_nr = '5' limit 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:17:18.060

我重写代码。我放了一点 mysql_error 以便您可以查看是否发生了 mysql 错误。

```
 <?php
    $_SESSION['ingelogd'] = true;
    $_SESSION['profiel'] = $rij['Type'];
    $_SESSION['gebruikerID'] = $rij['Account_nr'];
    // Gebruiker succesvol ingelogd, gegevens opslaan in sessie enzo ...
    if (strcmp($rij['Type'], "bedrijf") == 0)
    {
        // Define variables
        $session_var = $_SESSION['gebruikerID'];
        $query2 = "SELECT * FROM account_bedrijf WHERE Account_nr='$session_var' LIMIT 1";
        // Do the query // use mysql error for debugging
        $result2 = mysql_query($query2) or die(mysql_error());
        if (mysql_num_rows($result2) == 0)
        {
            session_unset();
            echo 'Ongeldige gebruikersnaam en/of wachtwoord';

        } else
        {
            $_SESSION['company'] = $result->Bedrijf_nr;
            header('Location: company_profile.php');
        }
    }
    ?> 
```

# java - JMeter 在 HTTP 请求中使用 beanshell 变量

> ID：11671097
> 
> 赞同：12
> 
> 时间：2012-07-26T14:07:27.443
> 
> 标签：java, jmeter, beanshell

我在这里绝对是菜鸟（我的意思是JAVA），花了几个小时寻找解决方案，现在我只想开枪。
我想在 beanshell 断言中创建一个字符串，它位于 HTTP 请求的正上方。

*   在豆壳中，我写道：

    ```
    String docid="abcd"; 
    ```

    （实际上我希望将一个字符串与一些变量连接起来）

*   在 HTTP 请求中，发送我添加的参数`${docid}`。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-26T14:39:32.237

在[BeanShell 断言描述部分](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Assertion)中，您可以找到以下内容：

```
 vars -  JMeterVariables  - e.g. vars.get("VAR1"); vars.put("VAR2","value"); vars.putObject("OBJ1",new Object()); 
 props - JMeterProperties (class java.util.Properties) - e.g. props.get("START.HMS"); props.put("PROP1","1234"); 
```

因此，要在 beanshell 代码中设置 jmeter 变量（在您的情况下为 BeanShell 断言采样器），请使用以下命令：

```
String docid = "abcd";
vars.put("docid",docid); 
```

或者干脆

```
vars.put("docid","abcd"); 
```

然后您可以将其称为 ${docid}，就像您在 HTTP 请求中所做的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T07:35:13.210

如果您不太了解 Java，您可以使用 BSF 或 JSR223 测试元素中的任何一个，然后选择 Javascript 语言作为脚本语言

[http://jmeter.apache.org/usermanual/component_reference.html#JSR223_Sampler](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_Sampler)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-25T15:51:17.690

如果您需要将值从一个 bean shell 采样器传递到另一个，您应该使用变量。

```
vars.put("a", "something") 
```

在其他采样器中，您应该具有以下内容：

```
String otherSampler = vars.get("a") 
```

关于调试 Shell 采样器 - 这并不容易。我建议使用 SampleResult 对象。如何使用，可以看这里[Debugging Bean Shell Sampler](http://jmeter-performance-functional-testing.blogspot.com/2013/11/how-to-use-java-code-in-jmeter.html)

# sql-server - 如何将 SQL Server 类型 numeric(38,0) 表示为 IDL 类型（COM 类型库）？

> ID：11671098
> 
> 赞同：0
> 
> 时间：2012-07-26T14:07:38.340
> 
> 标签：sql-server, delphi, com, idl, typelib

如何将 SQL Server 类型表示`numeric(38,0)`为 IDL 类型（COM 类型库）？

非常感谢您的帮助！

PS 例如，SQL Server 类型`int`是`long`IDL 中的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T16:38:34.937

COM 中的数字可能是：

*   最多 64 位的整数 ( `Int64`) - 最多 19 位有效数字；
*   高达 64 位 ( ) 的浮点值`double`- 15 - 17 位有效十进制数字精度。

因此，对于 38 位数字，这些类型都不符合您的要求。您可以使用 获得最佳分辨率`Int64`，但如果您的值高于 9,223,372,036,854,775,807，您将达到溢出。

我认为更容易兼容的类型是一个很好的旧 BSTR ( `widestring`)，您可以在其中存储任意数量的数字 - 但编码为纯文本。在代码方面，您将需要一个 BCD 库来处理您的高分辨率数字：没有 Delphi 本机类型（甚至`extended`）具有这样的分辨率。

*编辑：*另一个选项（感谢 Ondrej 的提议）是一个字节数组。恕我直言，COM 二进制数组不如文本内容容易（即使它使用较少的内存，速度效率也较低）。编码选项可能是[很好的旧 BCD](http://en.wikipedia.org/wiki/Binary-coded_decimal)。您可能能够在 COM 对象的两侧找到库。

# html - 从中心缩放路径

> ID：11671100
> 
> 赞同：34
> 
> 时间：2012-07-26T14:07:53.520
> 
> 标签：html, svg

我有以下 SVG 图形：

```
<svg version="1.1" id="diagram" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="375px" height="150px">
    <path d="M45,11.5H33.333c0.735-1.159,1.167-2.528,1.167-4C34.5,3.364,31.136,0,27,0s-7.5,3.364-7.5,7.5c0,1.472,0.432,2.841,1.167,4H9l-9,32h54L45,11.5z M22.5,7.5C22.5,5.019,24.519,3,27,3s4.5,2.019,4.5,4.5c0,1.752-1.017,3.257-2.481,4h-4.037 C23.517,10.757,22.5,9.252,22.5,7.5z" id="control"/>
</svg> 
```

我想以编程方式更改此对象的比例，但我希望它从中心点缩放。

我试过把它包裹在`<g>`标签上，就像这样

```
<g transform="translate(0,0)">
<path x="0" y="0" id="control" transform="scale(2)">...</path>
</g> 
```

但这似乎不起作用。我一直在网上寻找，似乎缩放路径需要操纵路径矩阵，这似乎非常困难。令人讨厌的是，它很容易使用additive="sum" 属性进行缩放，但在这种情况下，我没有使用变换动画。

谁能帮我吗？

**编辑：**设法让这个工作很好，对于任何被困在同一件事上的人来说，这是一种以编程方式进行的好方法：

```
var elem = document.getElementById("control");
var bBox = elem.getBBox();
var scaleX = 2;
var scaleY = 2;
$(elem).attr("transform", "scale("+scaleX+", "+scaleY+") translate("+-bBox.width/2+","+-bBox.height/2+") "); 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-26T14:20:45.047

如果您知道中心点的坐标，那么您可以在一次转换中结合平移和缩放。翻译计算为：`(1 - scale) * currentPosition`。

如果中心是`(10, 20)`并且您正在缩放，则按=`3`平移：`(1 - 3)*10, (1 - 3)*20``(-20, -40)`

```
<g transform="translate(-20, -40) scale(3)">
    <path d="M45,11.5H33.333c0.735-1.159,1.167-2.528,1.167-4C34.5,3.364,31.136,0,27,0s-7.5,3.364-7.5,7.5c0,1.472,0.432,2.841,1.167,4H9l-9,32h54L45,11.5z M22.5,7.5C22.5,5.019,24.519,3,27,3s4.5,2.019,4.5,4.5c0,1.752-1.017,3.257-2.481,4h-4.037 C23.517,10.757,22.5,9.252,22.5,7.5z" id="control"/>
</g> 
```

转换的应用顺序与声明它们的顺序相反，因此在上面的示例中，首先`scale`执行 ，然后执行`translate`. 缩放会影响坐标，因此这里的平移是缩放坐标。

您可以使用 以编程方式计算中心点`element.getBBox()`。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-09-01T21:40:01.187

您可以将原点更改为中心：

```
.scaled-path-svg {
  svg {
    path {
      transform-origin: center;
      transform: scale(1.1);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-22T00:38:38.530

[aetheria](https://stackoverflow.com/a/11671373/235415)之前提供的答案很棒。还有一件事需要注意——笔画宽度，以便在对象缩放时轮廓保持相同的宽度。用法：

```
stroke-width: (1/scaling-factor) 
```

所以，如果你的缩放比例是 2，那么：

```
stroke-width: (0.5) 
```

注意：你不应该错过 aetheria`transform: translate(...) scale(2)`提到的。

# iphone - 在 iPhone 上进行反向地理编码 - 获取准确的街道号码

> ID：11671101
> 
> 赞同：0
> 
> 时间：2012-07-26T14:07:56.663
> 
> 标签：iphone, geocoding, reverse, clgeocoder

我们正在为 iPhone (IOS5) 构建一系列应用程序，我们在其中使用反向地理编码。大多数时候，CLGeocoder 返回地址编号的范围（例如“someaddress 2-5”）。我们希望为每个反向地理编码请求检索**准确的街道编号。**

据我了解，这不是由我作为开发人员控制的，而是由 Apple 控制的，Apple 会调用 Google 并返回结果（街道号码的范围）。有没有其他人遇到过同样的问题并找到了解决方案？

我被建议做的一种解决方案是购买 google maps API for business。在其文档中，它声明它提供“高级地理编码”，但没有提供反向地理编码和街道编号的详细信息。有人对这个 API 有任何经验吗？

想到的另一件事是使用一些进行反向地理编码的第三方服务。但我不确定苹果是否会接受它。是否有人必须建议第三方服务进行反向地理编码并返回地图上给定位置的确切街道编号？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:16:07.090

看起来[GeoNames](http://www.geonames.org/)可以很好地满足您的需求。

从[维基百科页面](http://en.wikipedia.org/wiki/GeoNames)：

> GeoNames 是一个地理数据库，可通过各种 Web 服务在知识共享署名许可下访问和访问。

我自己一直在使用`CLGeocoder`，并且在返回一系列街道号码方面没有遇到任何问题。

# c# - 要在自定义 HqlGenerator 中使用的 HqlCase 实现

> ID：11671104
> 
> 赞同：2
> 
> 时间：2012-07-26T14:08:06.570
> 
> 标签：c#, nhibernate, hql

我正在尝试构建一个必须构建 Case 构造的自定义 Hql 生成器。此构造将在 order by 子句中使用。我正在尝试以当前用户的语言对枚举（在这种情况下为性别枚举）进行字母顺序排序。如您所见，排序顺序是从 GenderResourceTextAttribute 中检索的。订单数组中的值必须在 Case 构造中使用。这是我到目前为止所拥有的：

```
public override HqlTreeNode BuildHql(MethodInfo method, System.Linq.Expressions.Expression targetObject, ReadOnlyCollection<System.Linq.Expressions.Expression> arguments, HqlTreeBuilder treeBuilder, IHqlExpressionVisitor visitor)
{        
    GenderResourceTextAttribute attribute = null;
    if (targetObject.Type.IsEnum)
    {
        attribute = targetObject.Type.GetCustomAttributes(typeof(GenderResourceTextAttribute), false).FirstOrDefault() as GenderResourceTextAttribute;
    }

    int[] order = attribute.GetSortOrderPosition();

    return treeBuilder.Case(new HqlWhen(....));            
}

[GenderResourceText]
public enum Gender
{
    Unknown = 0,
    Men,
    Women
} 
```

我最终希望它生成类似于以下 sql 的内容：
`case Gender when 0 then 1 when 1 then 2 else 0 end`

我该如何实施？

**编辑：根据 Gerben 的建议添加了我的解决方案：**

谢谢格本！

通过您提供的示例，我能够完成它：

```
 public override HqlTreeNode BuildHql(MethodInfo method, System.Linq.Expressions.Expression targetObject, ReadOnlyCollection<System.Linq.Expressions.Expression> arguments, HqlTreeBuilder treeBuilder, IHqlExpressionVisitor visitor)
    {        
        EnumResourceTextAttribute attribute = (EnumResourceTextAttribute)targetObject.Type.GetCustomAttributes(typeof(EnumResourceTextAttribute), false).FirstOrDefault();
        IEnumerable<int> sortOrder = attribute.GetSortOrderPositions(arguments[0].ToString() == "Descending" ? System.Data.SqlClient.SortOrder.Descending : SortOrder.Ascending);                       
        List<HqlExpression> parameters = new List<HqlExpression>();

        List<HqlWhen> hqlWhenList = new List<HqlWhen>();

        for(int index = 0; index < sortOrder.Count(); index++)
        {
            int position = sortOrder.ElementAt(index);
            hqlWhenList.Add(
                treeBuilder.When(
                    treeBuilder.Equality(visitor.Visit(targetObject).AsExpression(), treeBuilder.Constant(index)),
                    treeBuilder.Constant(position)
                )
            );
        }

        HqlCase hqlCase = treeBuilder.Case(hqlWhenList.ToArray());
        return hqlCase;            
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:50:05.817

我的 BuildHql 方法如下所示。它使用下面包含的 CaseBuilder。

```
 public override HqlTreeNode BuildHql(
        MethodInfo method,
        Expression targetObject,
        ReadOnlyCollection<Expression> arguments,
        HqlTreeBuilder treeBuilder,
        IHqlExpressionVisitor visitor
        )
    {
        // Get the CaseBuilder form the arguments.
        var caseBuilder = (arguments[1] as ConstantExpression).Value as CaseBuilder;
        var hqlWhenList = new List<HqlWhen>();

        // Add a HqlWhen for each CaseBuilderOption. 
        foreach (var option in caseBuilder.Options)
        {
            // add the HqlWhen
            hqlWhenList.Add(
                // create HqlWhen with given treeBuilder.
                treeBuilder.When(
                    // compare given property with the When of the CaseBuilderOption.
                    treeBuilder.Equality(visitor.Visit(arguments[0]).AsExpression(), treeBuilder.Constant(option.When)),
                    // add the Then value of the CaseBuilderOption
                    treeBuilder.Constant(option.Then)
                )
            );
        }

        // 
        return 
            // cast the returned value to returntype of CaseBuilder.
            treeBuilder.Cast(
                // create the HqlCase with the TreeBuilder.
                treeBuilder.Case(
                    // add the created HqlWhen list.
                    hqlWhenList.ToArray(), 
                    // add the final or else value from the CaseBuilder.
                    treeBuilder.Constant(caseBuilder.ElseValue)
                ), 
            // the return type for the cast.
            caseBuilder.ReturnType
        );
    } 
```

CaseBuilder 和 CaseBuilderOption 类。

```
public class CaseBuilder
{
    /// <summary>
    /// The options of this case.
    /// </summary>
    public List<CaseBuilderOption> Options { get; set; }

    /// <summary>
    /// Else return value.
    /// </summary>
    public object ElseValue { get; set; }

    /// <summary>
    /// Type of return value.
    /// </summary>
    public Type ReturnType { get; set; }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="returnType"></param>
    /// <param name="case1"></param>
    /// <param name="value1"></param>
    /// <param name="elseValue"></param>
    public CaseBuilder(Type returnType, object when, object then, object elseValue)
    {
        ReturnType = returnType;

        if (then.GetType() != returnType || elseValue.GetType() != returnType)
        {
            throw new Exception();
        }
        Options = new List<CaseBuilderOption>();
        Options.Add(new CaseBuilderOption() { When = when, Then = then });
        ElseValue = elseValue;
    }

    /// <summary>
    /// Add a WhenThen option to the case builder.
    /// </summary>
    /// <param name="when"></param>
    /// <param name="then"></param>
    /// <returns></returns>
    public CaseBuilder Append(object when, object then)
    {
        if (then.GetType() != ReturnType)
        {
            throw new Exception();
        }
        Options.Add(new CaseBuilderOption() { When = when, Then = then });

        return this;
    }
}

/// <summary>
/// A When Then option of a Case
/// </summary>
public class CaseBuilderOption
{
    /// <summary>
    /// When
    /// </summary>
    public object When { get; set; }

    /// <summary>
    /// returns this value if When and Case property are equal
    /// </summary>
    public object Then { get; set; }
} 
```

我希望这能帮到您。

# autoit - 如何使用 AutoIt 在文本框中输入值？

> ID：11671106
> 
> 赞同：2
> 
> 时间：2012-07-26T14:08:09.927
> 
> 标签：autoit

我有两个文本框和一个按钮。如何在文本框中输入值并`Enter`使用[AutoIt](http://en.wikipedia.org/wiki/AutoIt)按下按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T20:06:11.673

举个例子就这么简单：

```
$gui = GUICreate("Test GUI", 640, 280)
$input = GUICtrlCreateInput("Input field", 10, 10, 620, 20)
$edit = GUICtrlCreateEdit("Edit Control with Text", 10, 40, 620, 200)
$button = GUICtrlCreateButton("Button", 10, 250, 620, 20)

GUISetState(@SW_SHOW)

Sleep(2000)

ControlSetText("Test GUI", "", $input, "New text for the input")
ControlSetText("Test GUI", "", $edit, "New text for the edit... with some bla bla bla...")
Sleep(500)
ControlClick("Test GUI", "", $button)
Sleep(500)
ControlFocus("Test GUI", "", $input)

Sleep(4000)

ControlSetText("Test GUI", "", "[CLASS:Edit; INSTANCE:1]", "New text for the input, referenced as Edit1")
ControlSetText("Test GUI", "", "[CLASS:Edit; INSTANCE:2]", "New text for the edit..., referenced as Edit2 with some bla bla bla...")
Sleep(500)
ControlClick("Test GUI", "", "[CLASS:Button; INSTANCE:1]")
Sleep(500)
ControlFocus("Test GUI", "", $input)

Sleep(4000) 
```

此外，你的英语很不清楚，你应该在你的问题上多加努力;-)

如果你想知道`"[CLASS:Edit; INSTANCE:1]"`你必须使用什么，试试“AutoIt v3 Window Info”[工具](http://www.autoitscript.com/autoit3/docs/intro/au3spy.htm)。并开始阅读一些非常好的文档。祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-03T12:48:38.680

1.  您可以使用 ControlSend 功能如下：

    ControlSend("窗口标题", "", "", "MyUsername{TAB}MyPassword{ENTER}")

2.  也可以使用发送函数来完成：

    发送("用户名")
    发送("{TAB}")
    发送("密码")
    发送("{ENTER}")

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-03-13T06:53:44.560

```
AutoItX x = new AutoItX(); 
x.controlSend("Login Station - Third party App","","","StringToBeEntered",false); 
```

# url - 使用“？”传递多个参数 在网址中标记

> ID：11671121
> 
> 赞同：0
> 
> 时间：2012-07-26T14:08:44.557
> 
> 标签：url, web

[http://xyz.com/packagesearch](http://xyz.com/packagesearch) **？**cadu1=2&drtn1=05/08/2012&qryt=8&sort=10&drid1=1639&dlvl&rdct=1&star=30&subm=1&subm=1&inttkn=Dul0p4RNrlTnd61R&dsct&cmbt=2 **?** dnam&tdpt1=362&ffst=0&rtmx&trtn1=362&tair1=IST&dcty=PAR&mcicid=174390028&rtmn&ddpt1=02/08/2012 **?** stop_mobi=是

这到底是什么？做？我可以多次使用它吗？或者“&”是传递多个参数的唯一选项？已经用过一次了吗？

注意：出现标记为粗体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:16:19.497

URL 中的`?`字符表示“请求参数”或“查询字符串”的开始。之后的附加参数必须以`&amp;`. 您可以开发自己的方式来处理“查询字符串”，但我所知道的大多数编程/脚本语言已经内置了处理它们的方式，因此使用现有工具通常更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:15:53.300

来自[http://en.wikipedia.org/wiki/Query_string](http://en.wikipedia.org/wiki/Query_string)

> 当服务器收到对此类页面的请求时，它会运行一个程序（如果配置为这样做），将原样的 query_string 传递给程序。问号用作分隔符，不是查询字符串的一部分。

因此， ？应该只使用一次。

# asp.net-mvc - MVC3 + ELMAH 导航到错误详细信息？

> ID：11671124
> 
> 赞同：2
> 
> 时间：2012-07-26T14:08:48.220
> 
> 标签：asp.net-mvc, logging, razor, elmah, custom-error-pages

**我的应用程序**：VS2010、MVC3、C#、最新的 ELMAH

**案例**：发生一些错误（例如空引用），显示自定义错误页面（customErrors mode="On"）。

**任务**：允许管理员（管理员角色的用户，）从自定义错误页面查看错误详细信息

**问题**：如何获取/传递 elmah 错误 ID 到自定义错误页面视图？

**更新**：相关已回答问题：[ELMAH - 使用自定义错误页面收集用户反馈](https://stackoverflow.com/questions/2143146/elmah-using-custom-error-pages-to-collecting-user-feedback)

自定义错误页面示例：

```
@model System.Web.Mvc.HandleErrorInfo
@{
  ViewBag.Title = "Error";
}
<h2>
  Error processing a request.
  @if (User.IsInRole(MyAppNamespace.Constants.ROLE_ADMIN))
  {
    // where to obtain ELMAH error id to navigate to error details ?
    // elmah/detail?id=291f5e83-5756-43bf-a889-07a548727da7
    <a href="@Url.Content("~/elmah")">View error details</a>
  }
</h2> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:16:56.427

这是 Elmah ErrorLog 模块中的一个事件，可以在 Global.asax.cs 中处理：

```
protected void ErrorLog_Logged(object sender, ErrorLoggedEventArgs args)
{
    Session["ElmahId"] = args.Entry.Id;
} 
```

然后我们可以使用存储的 id 导航到错误（我使用的是 Elmah.Mvc 模块，它实现了特殊的控制器而不是默认的 elmah 页面）。在 Error.cshtml 中：

```
@if (User.IsInRole(renweb.Constants.ROLE_ADMIN))
{
      <a href="@Url.Action("Detail","Elmah",new{id=@Session["ElmahId"]})">Error details</a>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:58:38.690

据我所知，所有 Elmah 错误都保存在一个名为 EMAH_Error 的表中。

因此，您可以做的一件事是获取错误发生时的当前日期时间，并在表中查询该时间保存的记录给/花 1 分钟。该查询将返回使用适当时间戳保存的错误，该时间戳也将包含 ErrorId。

您可以轻松地使用 EF 或其他东西来创建和实体 ElmahError。

# actionscript-3 - AS3 预加载器时序

> ID：11671125
> 
> 赞同：0
> 
> 时间：2012-07-26T14:08:48.433
> 
> 标签：actionscript-3, flash

我做了以下

```
package classes 
{
// imports removed

public class Main extends MovieClip {

    // vars removed

    public function Main():void {

        trace('--> Main Function started ...');

        /**************************************
        Preloader
        **************************************/
        var preLoader:PreLoader = new PreLoader(); // init
        stage.addChild(preLoader); // to Stage
        stage.loaderInfo.addEventListener(ProgressEvent.PROGRESS,  preLoader.preloaderProgress); // calling the function

        doThis();
    }
} 
```

PreLoader 类看起来像这样：

```
package classes  {

// imports removed

public class PreLoader extends MovieClip {

    public var totalBytes:uint;
    public var loadedBytes:uint;

    public function PreLoader() {
        trace('--> PRELOADER Started ...');
        this.addEventListener(Event.ADDED_TO_STAGE, addedHandler);

        this.loaderBar.scaleX = 0;
    }

    private function addedHandler(e:Event):void {
        trace('Adding Preloader ...');
        totalBytes = this.stage.loaderInfo.bytesTotal;
        trace('PL: Total ' + totalBytes + ' / ' + loadedBytes);

        this.removeEventListener(Event.ADDED_TO_STAGE, addedHandler);
        preloaderProgress(e);
    }

    public function preloaderProgress(e:Event):void {
        trace('Progress...');
        loadedBytes = this.stage.loaderInfo.bytesLoaded;
        this.loaderBar.scaleX = loadedBytes / totalBytes;
        this.loaderBar.alpha = 1 - this.loaderBar.scaleX;

        if (totalBytes == loadedBytes) {
            trace('Removing PreLoader ...');
            this.parent.removeChild(this);
        }
    }

} 
```

}

**问题：**在初始 SWF 文件完成加载之前，不显示预加载器。甚至所有跟踪输出都在主要电影完成时开始 - 我对“慢速连接”进行了一些分析。

如果您想知道：doThis() 正在从 xml 文件加载数据，从这里一切都很好，跟踪输出在正确的时间（但为时已晚：D）

先感谢您！

编辑：也许问题是：有没有办法确定主要电影何时开始加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:01:45.850

确保在第一帧的舞台上除了预加载器之外没有任何内容。否则，所有内容都必须在预加载器启动之前加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:50:10.387

如果您在 FlashIDE 中工作，则必须将预加载器放入第一帧。如果您更喜欢使用其他 IDE，您应该使用`Frame`元标记。例子：

**主文件**

```
package com.sample.preloader
{
import flash.display.Sprite;
import flash.events.Event;

/**
 * ...
 * @author Author
 */
[Frame(factoryClass="com.sample.preloader.Preloader")]
public class Main extends Sprite 
{

    public function Main():void 
    {
        if (stage) init();
        else addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, init);
        // entry point
    }

}

} 
```

**预加载器.as**

```
package com.sample.preloader
{
import flash.display.DisplayObject;
import flash.display.MovieClip;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import flash.events.Event;
import flash.events.IOErrorEvent;
import flash.events.ProgressEvent;
import flash.utils.getDefinitionByName;

/**
 * ...
 * @author Author
 */
public class Preloader extends MovieClip 
{

    public function Preloader() 
    {
        if (stage) {
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT;
        }
        addEventListener(Event.ENTER_FRAME, checkFrame);
        loaderInfo.addEventListener(ProgressEvent.PROGRESS, progress);
        loaderInfo.addEventListener(IOErrorEvent.IO_ERROR, ioError);

        // TODO show loader
    }

    private function ioError(e:IOErrorEvent):void 
    {
        trace(e.text);
    }

    private function progress(e:ProgressEvent):void 
    {
        // TODO update loader
    }

    private function checkFrame(e:Event):void 
    {
        if (currentFrame == totalFrames) 
        {
            stop();
            loadingFinished();
        }
    }

    private function loadingFinished():void 
    {
        removeEventListener(Event.ENTER_FRAME, checkFrame);
        loaderInfo.removeEventListener(ProgressEvent.PROGRESS, progress);
        loaderInfo.removeEventListener(IOErrorEvent.IO_ERROR, ioError);

        // TODO hide loader

        startup();
    }

    private function startup():void 
    {
        var mainClass:Class = getDefinitionByName("com.sample.preloader.Main") as Class;
        addChild(new mainClass() as DisplayObject);
    }

}

} 
```

# android - SQLite 安卓 . 无法打开数据库文件

> ID：11671129
> 
> 赞同：8
> 
> 时间：2012-07-26T14:09:10.680
> 
> 标签：android, database, sqlite

我发现了很多关于这个问题的问题，但我无法解决它。我在资产文件夹中有一个 sqlite db：

```
assets/data/data/{package_name}/databases/mydb.db 
```

我可以在更改一个表结构之前打开数据库并读取数据。我尝试卸载该应用程序并重新安装，但我得到了同样的异常。

我现在能做什么？

提前致谢

**编辑**

```
// The Android's default system path of your application database.
private static String DB_PATH = "/data/data/{mypagackename}/databases/";

private static String DB_NAME = "mydb.db"; 
```

打开数据库（更改表结构之前，添加一些字段，它不起作用）

```
public void openDataBase() throws SQLException {

    // Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READONLY);

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T14:16:35.540

看看[这个教程](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

它解释了如何使用预加载的数据库。基本上您不能直接从资产中使用数据库，您必须先将其复制到内部数据存储中并从那里打开它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-14T05:25:53.077

我建议不要使用硬编码`DB_PATH`（不再在 JB 中工作），而是始终使用 Android 内置 API 方法，

```
mContext.getDatabasePath(DATABASE_NAME).getPath(); 
```

# vb.net - 定义变量上令人困惑的 System.NullReferenceException 错误 - VB

> ID：11671130
> 
> 赞同：2
> 
> 时间：2012-07-26T14:09:13.480
> 
> 标签：vb.net, exception

好吧，所以我是新来的，所以如果我发布不正确或有点含糊，我提前道歉。我的问题是`NullReferenceException`当我尝试运行我的代码时遇到了一个问题，但是在调试并将鼠标悬停在有问题的变量上时，我确实看到了变量的值。

这是我正在使用的 VB 代码：

```
Private Sub Login_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles login.Click
    status.Text = "Connecting...."

    WebBrowser2.Navigate("http://*****.com/?op=login")
    WebBrowser2.Document.GetElementById("loginUsername").InnerText = username.Text
    WebBrowser2.Document.GetElementById("loginPassword").InnerText = password.Text
    WebBrowser2.Document.GetElementById("loginSubmit").InvokeMember("click")

End Sub 
```

这是正在发生的事情的快照：

![截屏](../Images/71720984f051fa0dadce433dab7aaa1a.png)

**------------ 编辑：解决方案--------**

```
 WebBrowser2.Url = New Uri("http://*****.com/?op=login")
    WaitForPageLoad() ' <---------- ADDED NEW FUNCTION TO WAIT FOR PAGE LOAD

    WebBrowser2.Document.GetElementById("loginUsername").InnerText = username.Text
    WebBrowser2.Document.GetElementById("loginPassword").InnerText = password.Text
    WebBrowser2.Document.GetElementById("loginSubmit").InvokeMember("click")

    status.Text = "Completed" 
```

所以我创建了一个名为**WaitForPageLoad()的新函数（**[如何等待 WebBrowser 在 VB.NET 中完全加载中的](https://stackoverflow.com/questions/3275515/how-to-wait-until-webbrowser-is-completely-loaded-in-vb-net)BGM ？） ，它本质上循环检查页面是否准备就绪，然后一旦准备就绪，就会被杀死处理程序，因此登录成功并且页面不会循环。这是 WaitForPageLoad()：

 **```
Private Property pageready As Boolean = False

Private Sub WaitForPageLoad()
    AddHandler WebBrowser2.DocumentCompleted, New WebBrowserDocumentCompletedEventHandler(AddressOf PageWaiter)
    While Not pageready
        Application.DoEvents()
    End While
    pageready = False
End Sub

Private Sub PageWaiter(ByVal sender As Object, ByVal e As WebBrowserDocumentCompletedEventArgs)
    If WebBrowser2.ReadyState = WebBrowserReadyState.Complete Then
        pageready = True
        RemoveHandler WebBrowser2.DocumentCompleted, New WebBrowserDocumentCompletedEventHandler(AddressOf PageWaiter)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:16:47.330

`WebBrowser2.Navigate`加载文档需要一些时间，但是是异步的。这意味着在文档完成加载**之前执行下一个代码。**

因此，在下一行中，`GetElementById`还找不到目标元素并返回`Nothing`。为了防止这种情况，您不能在调用后执行代码`Navigate`——相反，您需要为文档加载完成后触发的事件创建一个事件处理程序，并在*那里*执行代码。– 这是[`DocumentCompleted`事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:11:15.943

特别是在那条线上...

*   `Document`可能`null`
*   的结果`GetElementById("loginUsername")`可能是`null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:11:06.343

为什么你认为那`username`是空的？

我敢打赌，`WebBrowser2.Document.GetElementById("loginUsername")`回报`null`。

另一种可能性是`Document`为空。**

# r - 列表中的 POSIXct 日期范围

> ID：11671135
> 
> 赞同：4
> 
> 时间：2012-07-26T14:09:34.767
> 
> 标签：r, list, posixct

考虑这个 POSIXct 日期列表：

```
times <- list(as.POSIXct(c("2012-07-26 00:30", "2012-07-26 6:20",
                           "2012-07-26 10:40", "2012-07-26 15:50")),
              as.POSIXct(c("2012-07-26 01:15", "2012-07-26 10:10",
                           "2012-07-26 15:15", "2012-07-26 18:50")),
              as.POSIXct(c("2012-07-26 00:35", "2012-07-26 15:05", 
                           "2012-07-26 19:36", "2012-07-26 22:32")),
              as.POSIXct(c("2012-07-26 03:34", "2012-07-26 16:43", 
                           "2012-07-26 21:44", "2012-07-26 23:45"))) 
```

如果我做：

```
range(times[[1]]) 
```

我正确地得到：

```
[1] "2012-07-26 00:30:00 CEST" "2012-07-26 15:50:00 CEST" 
```

现在，如果我这样做：

```
range(times[c(1,3)]) 
```

无论出于何种原因，R 决定将 POSIXct 对象转换为时间戳并给我

```
[1] 1343255400 1343334720 
```

然后我尝试通过执行以下操作将它们重新转换为 POSIXct：

```
as.POSIXct(range(times[c(1,3)]), origin="1970-01-01 00:00") 
```

而且，奇怪的是，我提前 1 小时得到了范围：

```
[1] "2012-07-25 23:30:00 CEST" "2012-07-26 21:32:00 CEST" 
```

所以我必须这样做：

```
as.POSIXct(range(times[c(1,3)]), origin="1970-01-01 01:00") 
```

要获得正确的范围：

```
[1] "2012-07-26 00:30:00 CEST" "2012-07-26 22:32:00 CEST" 
```

我错过了什么还是某处有错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:17:00.027

`times[[1]]`是一个向量，`times[c(1,3)]`而是一个列表。在调用之前将后者转换为向量`range`，一切都很好。

你不想使用`unlist`，因为它只会返回一个原子向量（`range`必须在内部做类似的事情），但你可以使用`do.call`：

```
range(do.call(c,times[c(1,3)])) 
```

您从使用`as.POSIXct`中获得的差异可能是由于时区问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:24:28.930

正如约书亚所说，小时是因为时区。试试，例如：

```
times <- list(as.POSIXct(c("2012-07-26 00:30", "2012-07-26 6:20",
                       "2012-07-26 10:40", "2012-07-26 15:50"), "GMT"),
          as.POSIXct(c("2012-07-26 01:15", "2012-07-26 10:10",
                       "2012-07-26 15:15", "2012-07-26 18:50"), "GMT"),
          as.POSIXct(c("2012-07-26 00:35", "2012-07-26 15:05", 
                       "2012-07-26 19:36", "2012-07-26 22:32"), "GMT"),
          as.POSIXct(c("2012-07-26 03:34", "2012-07-26 16:43", 
                       "2012-07-26 21:44", "2012-07-26 23:45"), "GMT"))
as.POSIXct(range(times[c(1,3)]), origin="1970-01-01 00:00", "GMT") 
```

# android - SharedPreferences 和布尔值

> ID：11671141
> 
> 赞同：2
> 
> 时间：2012-07-26T14:09:49.277
> 
> 标签：android, editor, boolean, sharedpreferences

我试图在执行方法时将“isPhysicalTheftEnabled”设置为 false，但这似乎不起作用。有人知道吗？

```
 SharedPreferences sp = getSharedPreferences("isPhysicalTheftEnabled", MODE_WORLD_READABLE);
        SharedPreferences.Editor ed = sp.edit();
        ed.putBoolean("isPhysicalTheftEnabled", false); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:11:41.390

尝试添加`ed.commit()`.

IE：

```
SharedPreferences sp = getSharedPreferences("isPhysicalTheftEnabled", MODE_WORLD_READABLE);
SharedPreferences.Editor ed = sp.edit();
ed.putBoolean("isPhysicalTheftEnabled", false);
ed.commit(); 
```

`SharedPreferences.Editor`s 要求您提交您在 SharedPreferences 中更改的任何内容以应用更改。

**关于您对 Ankit 回答的评论：**

`CheckBox`要根据您保存到的布尔值设置您的检查属性`SharedPreferences`，您需要以下内容：

```
SharedPreferences sp = getSharedPreferences("isPhysicalTheftEnabled", MODE_WORLD_READABLE);
myCheckBox.setChecked(sp.getBoolean("isPhysicsTheftEnabled", [true/false]); 
```

.. 您在其中选择`true`或`false`选择`def_value`of `.getBoolean()`（如果`SharedPreferences`找不到布尔值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:10:50.703

您需要`ed.apply()`在更改中的值后调用`SharedPreferences`。

`ed.commit()`如果要检查错误，也可以使用。`commit()`(不像`apply()`) 如果数据没有（正确）写入持久存储，则返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:13:25.623

`editorObject.commit();`将数据放入 SP 后，您需要调用。

对于您的问题，用以下代码替换您的代码...

```
 SharedPreferences sp = getSharedPreferences("isPhysicalTheftEnabled", MODE_WORLD_READABLE);
        SharedPreferences.Editor ed = sp.edit();
        ed.putBoolean("isPhysicalTheftEnabled", false);
        ed.commit(); 
```

# html - 我应该旨在为所有内容添加类/ID，还是使用其他选择器

> ID：11671153
> 
> 赞同：11
> 
> 时间：2012-07-26T14:10:28.550
> 
> 标签：html, css, css-selectors

我永远不确定选择元素的最佳（最有效）方法是什么。

假设我有以下布局（非常简单的示例）

```
<div id="navigation">
  <ul>
    <li>Link 1</li>
    <li>Link 2</li>
    <li>Link 3</li>
  </ul>
</div> 
```

1.  我想选择我的无序列表（确保我不会影响整个站点的任何其他 UL），我应该`#navigation ul {}`为 UL 做还是分配一个类？
2.  我想选择我的列表项，再次确保我只影响那些。我应该`navigation ul li{}`上课还是分配课程？
3.  最后，如果我想选择我的第一个链接并为其设置样式，我应该做`#navigation ul li:first-child {}`还是分配一个类？

我很欣赏这些问题几乎相同，但我很好奇你什么时候应该使用课程，什么时候不使用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T14:15:58.407

这里没有硬性和快速的答案。

一般的经验法则*可能*是当您想将某些元素组合在一起时使用类，将它们视为相同并且使用类是这样做的唯一方法。

例如，在您的最后一个示例中，严格来说不需要类。

但是，使用示例 3 中的类会带来更好的性能，因为浏览器会更快地找到相关项目。对此进行权衡的是代码可读性略有降低。如果您在所有内容上都有类名，那么阅读其余标记将变得更加困难。

简而言之，在您上面显示的内容中，您所写的内容很好。

您应该阅读[这篇](http://csswizardry.com/2011/09/writing-efficient-css-selectors/)文章，其中介绍了选择器的效率。

基本上效率的顺序如下：

```
ID, e.g. #header
Class, e.g. .promo
Type, e.g. div
Adjacent sibling, e.g. h2 + p
Child, e.g. li > ul
Descendant, e.g. ul a
Universal, i.e. *
Attribute, e.g. [type="text"]
Pseudo-classes/-elements, e.g. a:hover 
```

类和 Id 之间的性能差异通常是无关紧要的。

不过，如果再往下看，事情就会大大放缓。

这不是到处添加类和 id 的论据——它只是让您可以判断性能和可维护性之间的权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:14:15.547

#id 应该是唯一的，而 class 不应该。

所以如果你需要添加一些 JS - 你需要#id，如果你只是想为不同的元素设置样式，.class 就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:14:52.950

我认为这真的取决于#navigation 元素下面的结构最终会变得多么复杂。使用#navigation 元素引用所有内容可能是可以的，如果它是一个简单的结构，就像你展示的那样，但对我来说，如果它更复杂或者会有不同的 ul，li 元素需要不同的行为，那么我会 id/class 嵌套元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T14:22:22.763

对于 Javascript 的使用，我认为 to 比使用原生选择器更快，并且没有 class 或 id。

有关更多详细信息，我认为只是用复杂的代码测试这个理论（见不同的时间）。

不要忘记 JavaScript 的速度取决于您的浏览器。

对于 CSS，[这里](http://screwlewse.com/2010/07/dont-use-id-selectors-in-css/)有一篇好文章了解更多详细信息。

# python - Python Bottle如何读取请求参数

> ID：11671154
> 
> 赞同：8
> 
> 时间：2012-07-26T14:10:28.237
> 
> 标签：python, bottle, http-request

我正在使用[http://dingyonglaw.github.com/bootstrap-multiselect-dropdown/#forms](http://dingyonglaw.github.com/bootstrap-multiselect-dropdown/#forms)显示带有多个复选框的下拉菜单。

```
<li>
  <label>
    <input type="checkbox" name="filters" value="first value">
    <span>First Value</span>
  </label>
</li>

<li>
  <label>
    <input type="checkbox" name="filters" value="second value">
    <span>Second Value</span>
  </label>
</li> 
```

这是生成的 URL：

```
http://example.com/search?filters=first+value&filters=second+value 
```

在服务器端（瓶子）：

```
terms = unicode (request.query.get ('filters', ''), "utf-8") 
```

只会给我“第二个值”而忽略“第一个值”。有没有办法收集所有的“过滤器”值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T14:13:59.260

请改用该[`request.query.getall`方法](http://bottlepy.org/docs/dev/api.html#bottle.MultiDict.getall)。

> FormsDict 是 MultiDict 的子类，每个键可以存储多个值。标准的字典访问方法只会返回一个值，但 MultiDict.getall() 方法会返回一个（可能为空的）特定键的所有值的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-23T23:59:45.200

嘿我有同样的问题并想出了解决方案

我将编写适用于您的问题的代码

HTML：（注意，我在这里不是很精通，所以可能会有错误，但基本结构是正确的）。在这里我们要设置一个“表单动作”并使用 method=GET

```
<form action="/webpage_name" method="GET">
<li>
  <label>
    <input type="checkbox" name="filters" value="first value">
    <span>First Value</span>
  </label>
</li>
<li>
  <label>
    <input type="checkbox" name="filters" value="second value">
    <span>Second Value</span>
  </label>
</li>
<input type="submit" name="save" value="save">
</form> 
```

Python：变量“all_filters”将从瓶子导入请求中获取“filters”变量的所有数据

```
@route('/webpage_name', method='GET')
def function_grab_filter():
    if request.GET.save:
        all_filters = request.GET.getall('filters')
        for ff in all_filters:
            fft = str(ff[0:]) # you might not need to do this but I had to when trying to get a number
            do soemthing.... 
```

# css - li 宽度从高度调整大小？

> ID：11671161
> 
> 赞同：1
> 
> 时间：2012-07-26T14:10:50.217
> 
> 标签：css, resize, height, width, html-lists

我正在制作一个包含一个或多个图像的内联阻止列表的站点。图像应根据包含的 div 调整大小，并且应完美并排。图像位于 div 内的列表元素内。

图片的 CSS 就是 height=100% & width=auto。

图像会调整大小，但它们所在的 li 元素不会。这会导致图像变小，但由于列表元素而不再并排。是否有任何 CSS 明智或任何方法可以根据其内容的大小调整列表元素的宽度或根据其高度调整它们的大小？

还要提一下我真的很想远离JQuery。

代码：

```
<div id="wrapper" vertical-align="center" class="row">
<ul>
    <li><img height="100%" width="auto" src='@routes.Assets.at("ribbon_left.png")' align="center" onClick='displayText(pin" + i + ")' /></li>
    <li>
@for(p <- pins){
    <div style="position:relative"><img height="100%" width="auto" src='@routes.Assets.at("ribbon_middle.png")' class="pinImage1" align="center" onClick='displayText(pin" + i + ")' /><img height="75%" width="auto" src='@p.image.value.largestImage.get.url' class="pinImage2" align="center" onClick='displayText(pin" + i + ")' /></div></li><li>
}
    <img height="100%" width="auto" src='@routes.Assets.at("ribbon_right.png")' align="center" onClick='displayText(pin" + i + ")' /></li>
</ul> 
```

```
.row
{
  height: 20%;
  overflow: auto;
  vertical-align: middle;
}

ul
{
  display: inline-block;
  list-style: none outside none;
  white-space: nowrap;
}

li
{
  display: inline-block;
  height: 100%;
  width: auto;
}

pinImage2
{
  left: 8%;
  position: absolute;
  top: 8%;
}

pinImage1
{
  left: 0;
  position: inherit;
  top: 0;
  z-index: 0;
} 
```

例如：第一个是最大化的屏幕，第二个是一个较小的窗口并且不起作用。他们这样分离的原因是因为图像越来越小，但它们的 li 容器却没有： [到底发生了什么](http://i.imgur.com/LNG8a.png)！

# asp.net-mvc - 使用并行处理时出现间歇性异常

> ID：11671162
> 
> 赞同：0
> 
> 时间：2012-07-26T14:10:53.977
> 
> 标签：asp.net-mvc, vb.net, razor, task-parallel-library

我目前正在运行一个简单的代码和平，它呈现部分视图并将结果添加到 ConcurrentBag：

```
Threading.Tasks.Parallel.For(0, Model.Count,
                                Sub(i)
                                    carXmls.Add(Html.Partial("PublisherVehicleXml16", Model(i)))
                                End Sub) 
```

可悲的是，每隔一段时间这个东西就会崩溃，但有以下例外：`Stack empty.`

这会间歇性地发生，并且仅在我们的登台和生产环境中发生。这可能来自哪里的任何想法？

**编辑：** carsXmls 声明如下：

```
 Dim carXmls As New Collections.Concurrent.ConcurrentBag(Of MvcHtmlString) 
```

完全的例外是：

> **消息**堆栈为空。
> 
> **源**系统
> 
> **目标站点**T Pop()
> 
> **`1.Pop() at System.Web.WebPages.WebPageBase.ExecutePageHierarchy() at System.Web.Mvc.WebViewPage.ExecutePageHierarchy() at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.b__19() at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) 在 System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String) 的 System.Collections.Generic.Stack 1 继续的**堆栈跟踪**动作名称）**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:16:24.180

您正在使用 ASP.NET 对象的多个线程上运行代码。ASP.NET (MVC) 不保证这是安全的。如您所见，这是不安全的。

简而言之，您不能同时使用 ASP.NET 基础结构。

我建议您提取所有繁重的计算，以便您可以在不使用 ASP.NET 对象的情况下并行它们。然后，您可以按顺序渲染视图。**

# android - 如何获取列表视图中项目的高度？

> ID：11671165
> 
> 赞同：0
> 
> 时间：2012-07-26T14:11:03.277
> 
> 标签：android, listview

我正在使用 customadapter 并覆盖 getView() 方法。在此方法中，我调用 view.getHeight() 返回 0。我想找出列表视图中每个项目的高度（以像素为单位）。并找出它在屏幕上的位置。因此，如果我在列表视图中有 10 个项目，是否可以找出屏幕上第 5 个项目的位置（以像素为单位），我想找出项目的 y。左上角。

```
CustomArrayAdapter adapter = new CustomArrayAdapter(this,R.layout.rowlayout,mydizi);
    View header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);
    lv.addHeaderView(header);

        lv.setAdapter(adapter);
        View viewList = lv.getChildAt(5 - lv.getFirstVisiblePosition());
        viewList.getLocationOnScreen(location); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:33:36.013

您可能需要使用 ViewTreeObserver 之类的东西。请参阅[此](https://stackoverflow.com/questions/4501840/get-actual-height-of-view)问题的回复。您可以在 onCreate 方法中放置与此类似的块。如果视图返回值 0，则很可能是您在活动生命周期中过早调用视图方法（即在屏幕对象被映射并能够测量之前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:54:07.307

对于列表 mList 中给定的 VISIBLE 行 nPosition，您可以通过以下方式获取视图的位置：

```
// find the position of the source and destination accounts ListView rows
int[] location = {0,0};

View viewList = mList.getChildAt(nPosition - mList.getFirstVisiblePosition());
viewList.getLocationOnScreen(location); 
```

但您可能需要从 getView() 外部执行此操作，即在填充列表之后。

# sqlalchemy - 在 SQLAlchemy 中将输出转换器添加到 pyodbc 连接

> ID：11671170
> 
> 赞同：4
> 
> 时间：2012-07-26T14:11:10.370
> 
> 标签：sqlalchemy, pyodbc, exasolution

使用：Python 2.7.3 SQLAlchemy 0.7.8 PyODBC 3.0.3

我已经使用 PyODBC 作为底层数据库驱动程序为 EXASolution DB 实现了我自己的方言。我需要利用 PyODBC 的[`output_converter`](https://code.google.com/p/pyodbc/wiki/Connection#add_output_converter)函数将`DECIMAL(x, 0)`列转换为整数/长整数。

以下代码片段可以解决问题：

```
pyodbc = self.dbapi
dbapi_con = connection.connection

dbapi_version = dbapi_con.getinfo(pyodbc.SQL_DRIVER_VER)
(major, minor, patch) = [int(x) for x in dbapi_version]
if major >= 3:
    dbapi_con.add_output_converter(pyodbc.SQL_DECIMAL, self.decimal2int) 
```

`initialize(self, connection)`我已将此代码段放在

```
 class EXADialect_pyodbc(PyODBCConnector, EXADialect): 
```

代码被调用，并且没有抛出异常，*但这*是一次性初始化。稍后，将创建其他连接。这些连接没有通过我的初始化代码传递。

有没有人暗示连接初始化如何与 SQLAlchemy 一起工作，以及在哪里放置我的代码以便为每个创建的新连接调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-28T19:36:01.367

这是一个老问题，但我最近遇到了一些问题，所以更新的答案可能会帮助其他人。在我的例子中，我试图自动降低 mssql`UNIQUEIDENTIFIER`列（guid）。

您可以通过会话或引擎获取原始连接 (pyodbc) 来执行此操作：

```
engine = create_engine(connection_string)
make_session = sessionmaker(engine)
...
session = make_session()

session.connection().connection.add_output_converter(SQL_DECIMAL, decimal2int)

# or

connection = engine.connect().connection
connection.add_output_converter(SQL_DECIMAL, decimal2int) 
```

# javascript - 无法弄清楚如何使用谷歌图表 API 显示 2 个表格

> ID：11671171
> 
> 赞同：0
> 
> 时间：2012-07-26T14:11:13.400
> 
> 标签：javascript, webpage, google-visualization

所以我想在我的网站中嵌入以下代码，其目的是以表格形式显示每日和每月的网站指标。

我试图模拟页面，但我遇到了障碍：我似乎找不到使用谷歌图表 API 呈现两个不同谷歌图表的方法。

我敢肯定这是一个非常愚蠢的错误，我只是没有看到，但我已经研究了大约一个小时，只是无法弄清楚如何显示两个表格。

```
<!DOCTYPE html>
<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
      google.load('visualization', '1', {packages:['table']});
      google.setOnLoadCallback(drawDailyTable);
      function drawDailyTable() {
        var Dailydata = new google.visualization.DataTable();
        Dailydata.addColumn('string', 'Metric');
        Dailydata.addColumn('number', 'Number');
        Dailydata.addRows([
          ['Total Daily Unique Users',  {v: 462, f: '462'}],
          ['Total Daily Visits',   {v:6702,   f: '6,702'}]
        ]);
        var Dailytable = new google.visualization.Table(document.getElementById('table_div'));
        Dailytable.draw(Dailydata, {showRowNumber: true});
      }
    </script>

    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
      google.load('visualization', '1', {packages:['table']});
      google.setOnLoadCallback(drawMonthlyTable);
      function drawMonthlyTable() {
      var Monthlydata = new google.visualization.DataTable();
        Monthlydata.addColumn('string', 'Metric');
        Monthlydata.addColumn('number', 'Number');
        Monthlydata.addRows([
          ['Total Monthly Unique Users',  {v: 12875, f: '12,875'}],
          ['Total Monthly Visits',   {v:37980,   f: '37,980'}]
        ]);
        var Monthlytable = new google.visualization.Table(document.getElementById('table_div'));
        Monthlytable.draw(Monthlydata, {showRowNumber: true});
        }
    </script>
  </head>

  <body>
    <div id='table_div'></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:01:27.237

我想通了，在我的 drawtable 函数中它说：`document.getElementById('table_div')`，我只是将每个表的 ID 重命名为`document.getElementById('dailytable_div')`and `document.getElementById('monthlytable_div')`，然后编辑我的身体看起来像这样：

```
 <body>
    <div id='dailytable_div'></div>
    <div id='monthlytable_div'></div>
  </body> 
```

问题解决了！

# c# - 以 XML 格式发布会员专业请求/响应

> ID：11671173
> 
> 赞同：1
> 
> 时间：2012-07-26T14:11:19.577
> 
> 标签：c#, xml, post, affiliate

我有两个问题：

*   是否可以使用 c# 从 Pro Affiliate Pro 4 API (http://support.qualityunit.com/871709-Programmers-documentation) 发送请求/获取响应？
*   如果我的第一个问题的答案是“是”，你能给我一个 xml 请求和响应的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T06:55:02.920

QualityUnit 的人回答了我的问题：

> 如果您不能使用 php API，那么发送 API 请求/获取 API 响应的唯一方法是使用 JSON 请求，如下所述：http: [//support.qualityunit.com/354854-C-NET-communication-with-API](http://support.qualityunit.com/354854-C-NET-communication-with-API) 关于 PAP API 的 JSON 数据模型在此处解释：http: [//support.qualityunit.com/110653-Data-model-JSON-description#355518](http://support.qualityunit.com/110653-Data-model-JSON-description#355518)

# iphone - -(void)viewWillDisappear:(BOOL)动画方法没有在 ios sdk 5 中调用，但在 ios sdk4 中调用

> ID：11671176
> 
> 赞同：0
> 
> 时间：2012-07-26T14:11:32.513
> 
> 标签：iphone, ios, ios5, ios4, uiviewcontroller

我遇到了这个问题，当我在 4.3 模拟器中运行此视图时会调用 -(void)viewWillDisappear:(BOOL)animated 方法，但在 5.0 及更多模拟器中运行应用程序时不会调用它。你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:08:27.313

I have tried to replicate this but in my case its calling **viewWillDisappear:** in both cases (simulator4.3 and 5.0)This is what I have done

1> created new projected 2> added a UIbutton in viewWillAppear: 3> on btn clicked presenting new controller modally using **presentModalVIewController:(BOOL)animated**

every time it present new controller

it is calling **viewWillDiappear:(BOOL)animated** of parent controller

# api - RESTful API - 如何为同一资源返回不同的结果？

> ID：11671178
> 
> 赞同：1
> 
> 时间：2012-07-26T14:11:41.577
> 
> 标签：api, codeigniter, rest

# 问题

如何为同一资源返回不同的结果？

# 细节

我一直在寻找构建 RESTful API 的正确方法。那里有很多很棒的信息。现在我实际上正试图将它应用到我的网站并遇到了一些障碍。我发现了一些建议，将资源基于您的数据库作为起点，考虑到您的数据库应该结构合理。这是我的场景：

## 我的网站：

这是关于我的网站和 API 用途的一些信息

我们正在创建一个允许人们玩游戏的网站。该 API 应该允许其他开发人员构建自己的游戏并使用我们的后端来收集和存储用户信息。

## 场景一：

我们有一个`players`存储所有玩家数据的数据库。开发者需要根据 user_id（拥有玩家数据的人）或 game_id（收集数据的游戏）来选择这些数据。

**资源**

```
http://site.com/api/players 
```

**问题：**

如果开发人员使用我的资源调用我的资源，`GET`他们将收到玩家列表。由于有多个开发人员使用这个系统，他们必须指定一些 ID 来选择所有玩家。这是我发现问题的地方。我希望开发人员能够指定两种 ID。他们可以通过 user_id 或 game_id 选择所有玩家。

1.  你怎么处理这个？
2.  我需要两个单独的资源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:55:52.400

假设您有一个控制器名称“Players”，那么您将有 2 种方法：

```
function user_get(){
   //get id from request and do something
}

function game_get(){
//get id from request and do something
} 
```

现在网址看起来像：[http://site.com/api/players/user/333](http://site.com/api/players/user/333)，[http://site.com/api/players/game/333](http://site.com/api/players/game/333)

1.  玩家是控制器。
2.  用户/游戏是动作

如果你使用 phil sturgeon 的框架，你会这样做，但 url 看起来像： [http://site.com/api/players/user/id/333](http://site.com/api/players/user/id/333)，[http://site.com/api/players/game /id/333](http://site.com/api/players/game/id/333)

然后你得到 id 使用： `$this->get('id');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:04:55.917

**使用 phil 的 REST 服务器库：** [https ://github.com/philsturgeon/codeigniter-restserver](https://github.com/philsturgeon/codeigniter-restserver)

我在使用 oauth 和 api 密钥生成的产品环境中使用这个库。您将创建一个 api 控制器，并为您想要的每个请求定义方法。就我而言，我创建了一个完全独立的 codeigniter 实例，并根据需要编写模型。

你也可以使用这个 REST 库来插入数据，这一切都在他的文档中。

**这是菲尔在 2011 年汇总的基础知识视频。** [http://philsturgeon.co.uk/blog/2011/03/video-set-up-a-rest-api-with-codeigniter](http://philsturgeon.co.uk/blog/2011/03/video-set-up-a-rest-api-with-codeigniter)

**应该注意的是，RESTful URL 意味着使用复数/单数措辞，例如；玩家 = 单数，玩家 = 全部或多个，游戏|游戏等。**

* * *

这将允许您在控制器中执行此类操作

```
//users method_get is the http req type.. you could use post, or put as well.
public function players_get(){
  //query db for players, pass back data
} 
```

您的 API 请求 URL 将类似于：

```
http://api.example.com/players/format/[csv|json|xml|html|php] 
```

这将根据您在模型中的查询返回所有用户的 json 对象。

## 或者

```
public function player_get($id = false, $game = false){
  //if $game_id isset, search by game_id
  //query db for a specific player, pass back data
} 
```

您的 API 请求 URL 将类似于：

```
http://api.example.com/player/game/1/format/[csv|json|xml|html|php] 
```

## 或者

```
public function playerGames_get($id){
  //query db for a specific players games based on $userid
} 
```

您的 API 请求 URL 将类似于：

```
http://api.example.com/playerGames/1/format/[csv|json|xml|html|php] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:30:27.847

您可以通过指定查询字符串参数来限制结果，即：

[http://site.com/api/players?id=123](http://site.com/api/players?id=123)

[http://site.com/api/players?name=Paolo](http://site.com/api/players?name=Paolo)

# php - 获取当前 URL 但删除 ? 和之后的文字

> ID：11671180
> 
> 赞同：1
> 
> 时间：2012-07-26T14:11:49.670
> 
> 标签：php

我有一个相当琐碎的问题，但我不确定在谷歌中找到解决方案的措辞是什么。

目前我正在使用它来获取我的网址...

```
<?php $url = $_SERVER["REQUEST_URI"]; ?> 
```

但问题是它包含这个**?orderby=newest**

我的问题是如何获取 URL 但排除`?`, 和问号后出现的任何文本？

因此，如果 URL 看起来像这样。

```
www.example.com?orderby=oldest 
```

然后返回的 URL 看起来像这样......

```
www.example.com 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T14:13:22.993

尝试做[`parse_url($_SERVER["REQUEST_URI"])`](http://php.net/manual/en/function.parse-url.php)

结果是：

```
Array
(
    [path] => www.example.com
    [query] => orderby=oldest
) 
```

[演示](http://codepad.org/LmSFGlqa)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:15:22.523

```
$exploded_url = explode("?", $url);
$url = $exploded_url[0]; 
```

展开结果：

```
Array (
   [0] => http://www.example.com
   [1] => x=y&b=z
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:13:24.947

在您的输入字符串上使用[parse_url](http://php.net/manual/en/function.parse-url.php)并为您需要的部分挑选结果数组。

# wordpress - 尝试使用自己的主题设置网站的移动版本

> ID：11671182
> 
> 赞同：0
> 
> 时间：2012-07-26T14:12:00.167
> 
> 标签：wordpress, themes

我正在尝试为客户创建网站的移动版本。因此[http://example.com](http://example.com)将是主站点，而[http://m.example.com](http://m.example.com)将是移动站点。我将它设置为子目录，它们都指向同一个数据库。在移动目录的 wp-config 文件中，我有

```
define('WP_SITEURL');
define('WP_HOME');
define('TEMPLATEPATH');
define('STYLESHEETPATH'); 
```

在移动目录中定义并指向移动站点和正确的主题。我去移动站点将主题更改为我设置的移动主题。但是，当我去查看主站点时，它也设置了移动主题。当我把它改回主题时，同样的事情发生在移动网站上。我忽略了什么吗？

# java - JPA EclipseLink DatabaseException：“表 foo.SEQUENCE 不存在”

> ID：11671186
> 
> 赞同：7
> 
> 时间：2012-07-26T14:12:10.013
> 
> 标签：java, mysql, database-design, jpa, orm

我已经更新了问题，以便**两个**表现在都使用自动增量。持久化到`MESSAGES`表的问题可能是数据库模式的问题吗？

在尝试这样持久化 MessageBean 时：

```
private void persist(MessageBean messageBean) throws Exception {
    LOG.info("loading.." + messageBean);

    Messages message = new Messages(messageBean);

    emf = Persistence.createEntityManagerFactory("USENETPU");
    em = emf.createEntityManager();

    em.getTransaction().begin();
    em.persist(message);
    em.getTransaction().commit();
} 
```

堆栈跟踪：

```
run:
Jul 27, 2012 3:04:06 PM net.bounceme.dur.usenet.controller.CommentsDefaultListModel persist
INFO: loading..floor installer (cultas lake)
[EL Info]: 2012-07-27 15:04:10.006--ServerSession(30409723)--EclipseLink, version: Eclipse Persistence Services - 2.3.0.v20110604-r9504
[EL Info]: 2012-07-27 15:04:11.78--ServerSession(30409723)--file:/home/thufir/NetBeansProjects/USENET/build/classes/_USENETPU login successful
[EL Warning]: 2012-07-27 15:04:12.072--ClientSession(29574192)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'nntp.SEQUENCE' doesn't exist
Error Code: 1146
Call: UPDATE SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?
    bind => [2 parameters bound]
Query: DataModifyQuery(name="SEQUENCE" sql="UPDATE SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?")
Jul 27, 2012 3:04:12 PM net.bounceme.dur.usenet.controller.CommentsDefaultListModel <init>
SEVERE: null
Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'nntp.SEQUENCE' doesn't exist
Error Code: 1146
Call: UPDATE SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?
    bind => [2 parameters bound]
Query: DataModifyQuery(name="SEQUENCE" sql="UPDATE SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?")
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:324) 
```

来自 MySql：

```
mysql> 
mysql> 
mysql> show tables;
+----------------+
| Tables_in_nntp |
+----------------+
| comments       |
| messages       |
+----------------+
2 rows in set (0.00 sec)

mysql> 
mysql> show create table comments;
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table    | Create Table                                                                                                                                                                                                                                                                                                                                  |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| comments | CREATE TABLE `comments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `message_id` int(11) NOT NULL,
  `comment` text NOT NULL,
  `stamp` date NOT NULL,
  PRIMARY KEY (`id`),
  KEY `message_id` (`message_id`),
  CONSTRAINT `comments_ibfk_1` FOREIGN KEY (`message_id`) REFERENCES `messages` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> 
mysql> show create table messages;
+----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table    | Create Table                                                                                                                                                                                                                               |
+----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| messages | CREATE TABLE `messages` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `newsgroup` text NOT NULL,
  `subject` text NOT NULL,
  `content` text NOT NULL,
  `number` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 |
+----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> 
```

和消息字段：

```
package net.bounceme.dur.usenet.controller;

import java.io.Serializable;
import java.util.Collection;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;

@Entity
@Table(name = "messages", catalog = "nntp", schema = "")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Messages.findAll", query = "SELECT m FROM Messages m"),
    @NamedQuery(name = "Messages.findById", query = "SELECT m FROM Messages m WHERE m.id = :id")})
public class Messages implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "id", nullable = false)
    @GeneratedValue
    private Integer id;
    @Basic(optional = false)
    @Lob
    @Column(name = "newsgroup", nullable = false, length = 65535)
    private String newsgroup;
    @Basic(optional = false)
    @Lob
    @Column(name = "subject", nullable = false, length = 65535)
    private String subject;
    @Basic(optional = false)
    @Lob
    @Column(name = "content", nullable = false, length = 65535)
    private String content;
    @Basic(optional = false)
    @Lob
    @Column(name = "number", nullable = false, length = 65535)
    private String number;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "messageId")
    private Collection<Comments> commentsCollection;

    public Messages() {
    } 
```

和评论字段：

```
package net.bounceme.dur.usenet.controller;

import java.io.Serializable;
import java.util.Date;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "comments", catalog = "nntp", schema = "")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Comments.findAll", query = "SELECT c FROM Comments c"),
    @NamedQuery(name = "Comments.findById", query = "SELECT c FROM Comments c WHERE c.id = :id"),
    @NamedQuery(name = "Comments.findByStamp", query = "SELECT c FROM Comments c WHERE c.stamp = :stamp")})
public class Comments implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "id", nullable = false)
    @GeneratedValue
    private Integer id;
    @Basic(optional = false)
    @Lob
    @Column(name = "comment", nullable = false, length = 65535)
    private String comment;
    @Basic(optional = false)
    @Column(name = "stamp", nullable = false)
    @Temporal(TemporalType.DATE)
    private Date stamp;
    @JoinColumn(name = "message_id", referencedColumnName = "id", nullable = false)
    @ManyToOne(optional = false)
    private Messages messageId;

    public Comments() {
    } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-26T14:28:22.487

因为`mysql`我会推荐你​​以下：

在您的表`messages`字段`id`添加声明`auto_increment`：

```
create table messages(
...
id  int not null auto_increment,
...
primary key (id)
) 
```

在实体声明中使用

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private int id; 
```

这与 JPA 讨论使用 MySQL 的自动增量功能

如果它不适用（例如，您可能希望在同一事务中创建相关的另一个实体），请使用 TABLE 策略（有关更多详细信息，请参阅[http://www.objectdb.com/java/jpa/entity/generated](http://www.objectdb.com/java/jpa/entity/generated)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T14:29:11.083

如果您的数据库支持，则 AUTO 策略是 NATIVE 的别名；如果您的数据库支持，则为 SEQUENCE；如果您的数据库不支持其中任何一个，则为 TABLE。

因此，如果数据库不支持 NATIVE 和 SEQUENCE，那么您需要创建 EclipseLink 用来生成 ID 的表。

使用 MySQL，应该支持 NATIVE。不过，您需要将 ID 列设为 auto_increment 列。确保也配置了适当的[DatabasePlatform](http://wiki.eclipse.org/Introduction_to_Data_Access_%28ELUG%29#Database_Platforms)。

# android - 使用 HTML5 在 Android 上同时播放多个视频

> ID：11671187
> 
> 赞同：0
> 
> 时间：2012-07-26T14:12:13.963
> 
> 标签：android, html5-video

有没有人尝试过使用 HTML5 在 Android 中同时播放多个视频？这在 Apple 中有很好的记录，称 iOS 不支持 HTML5 中的多个视频。有谁知道带有 HTML5 的 Android 是否有类似的限制？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T18:03:02.790

我还没有真正尝试过播放多个视频，但我尝试过播放一个 youtube 视频并且效果很好。

您可以尝试在一个屏幕上制作多个 webview，并使用 youtube/普通视频为每个 webview 充气，这样就可以了。

# java - HTTPServletResponse 状态码不在 HTTP 响应标头中

> ID：11671190
> 
> 赞同：0
> 
> 时间：2012-07-26T14:12:17.113
> 
> 标签：java, web-services, rest, servlets, http-headers

我有非常简单的 JAX-RS WS：

```
@Stateless
@Path("/foo")
public class FooFacadeBean {     

    @GET
    @Produces(MediaType.TEXT_HTML)
    public String performFooCall(@Context HttpServletRequest request, @Context HttpServletResponse response) {
        response.setStatus(500);
        return "Hello";
    }
} 
```

部署后我执行：curl -v localhost:8080/foo，结果是：

```
About to connect() to localhost port 8080
Trying 127.0.0.1...
connected
Connected to localhost (127.0.0.1) port 8080
GET /foo HTTP/1.1
User-Agent: curl/7.26.0
Host: localhost:8080
Accept: */

HTTP/1.1 200 OK
X-Powered-By: Servlet/3.0 JSP/2.2 (GlassFish Server Open Source Edition 3.1.2 Java/Sun Microsystems Inc./1.6)
Server: GlassFish Server Open Source Edition 3.1.2
Content-Type: text/html
Transfer-Encoding: chunked
Date: Thu, 26 Jul 2012 13:52:10 GMT

Hello 

Connection to host localhost left intact
Closing connection 
```

如您所见，HTTP 中的状态代码根本没有改变，尽管它是手动设置的。为什么会这样？我花了很多时间在谷歌上搜索，但没有任何结果。

诸如返回 Response 对象之类的解决方法，如下所示：

```
Response.status(404).entity("Hello").build(); 
```

完美运行！

Glassfish 使用 JERSEY 作为 JAX-RS 实现。我使用 Glassfish 的嵌入式变体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:35:02.863

基本上，这不是你应该如何使用泽西岛。

这是正在发生的事情：

*   该方法执行，您与 ServletResponse 交互并将状态代码设置为 500。但是由于您不写入任何数据，因此不会提交响应。

*   然后该方法返回一个字符串值。由于 Jersey 无法知道您是否与 ServletResponse 进行了交互，因此它的行为正常。

*   返回的 String 方法意味着 200 响应代码（void 意味着 204 等）。Jersey 尝试将响应代码设置为默认值，最终通过调用`setStatus(200)`响应实例。由于尚未提交响应，所以这不是问题，将响应的 500 更改为 200。

*   HttpServletResponse 被提交并被发送回客户端。

我假设您想要做的是返回不同的状态代码，但仅在特殊情况下。这样做的方法是在正常情况下返回一个字符串，然后在异常情况下抛出一个[WebApplicationException](http://docs.oracle.com/javaee/6/api/javax/ws/rs/WebApplicationException.html)。

```
@GET
@Produces(MediaType.TEXT_HTML)
public String performFooCall() {
    if (isNormal()) {
        return "Hello";
    }
    throw new WebApplicationException(Response.status(500).entity("Hello").build());
} 
```

[或者，您可以抛出标准异常，并使用单独的ExceptionMapper](http://docs.oracle.com/javaee/6/api/javax/ws/rs/ext/ExceptionMapper.html)控制如何将其呈现为响应。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T14:34:26.517

Jersey 构建一个新的响应，因此在您的代码中设置响应代码，稍后将被覆盖。您必须在您的代码中构建一个新的响应并将您的字符串放入响应中（并为此更改您的返回值），或者您可以创建一个过滤器，稍后将在过滤器链中工作并更改响应状态。

[在这里](http://jersey.576304.n2.nabble.com/Setting-Response-Status-td4745399.html)查看更多详细信息

# php - 获取订单#从网格视图到详细视图

> ID：11671191
> 
> 赞同：1
> 
> 时间：2012-07-26T14:12:18.563
> 
> 标签：php, magento

我创建了一个模块，列出了可在 adminhtml 的网格中进行审核的订单。

我需要将 orderId 从网格视图传递到详细视图，但我不知道该怎么做。

这是我的`Grid.php`

```
{
public function __construct() {
    parent::__construct();
    $this->setId('moderationGrid');
    // This is the primary key of the database
    $this->setDefaultSort('increment_id');
    $this->setDefaultDir('ASC');
    $this->setSaveParametersInSession(true);
}

protected function _prepareCollection() {
    $collection = Mage::getModel('sales/order')->getCollection();
    $this->setCollection($collection);
    return parent::_prepareCollection();
}

protected function _prepareColumns() {
    $this->addColumn('increment_id', array(
        'header'    => Mage::helper('sales')->__('Order Number'),
        'align'     =>'center',
        'index'     => 'increment_id',
    ));

    $this->addColumn('created_at', array(
        'header'    => Mage::helper('sales')->__('Purchase Date'),
        'align'     => 'center',
        'index'     => 'created_at',
        'type'      => 'datetime',
    ));

    $this->addColumn('action', array(
        'header'    => Mage::helper('moderation')->__('Action'),
        'align'     => 'center',
        'type'      => 'action',
        'getter'    => 'getId',
        'actions'   => array(
            array(
                'caption' => Mage::helper('sales')->__('Review'),
                'url'     => array('base'=>'*/adminhtml_moderation/view'),
                'field'   => 'increment_id'
            )
                ),
                'filter'    => false,
                'sortable'  => false,
                'index'     => 'stores',
                'is_system' => true,
    ));

    return parent::_prepareColumns();
} 
```

这是我的看法`Form.php`

```
class Moderation_Block_Adminhtml_Moderation_View_Form extends Mage_Adminhtml_Block_Widget_Form
{    
    protected function _construct()
    {
        parent::_construct();
        $this->setTemplate('moderation/form.phtml');
    }

    public function getOrder()
    {       
        $moderationId     = $this->getRequest()->getParam('increment_id');
        $order  = Mage::getModel('sales/order')->load();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:42:10.873

您需要在您的 grid.php 中再实现一个自定义函数（**提示：**此文件未按约定命名，必须大写“G” - Grid.php）：

```
public function getRowUrl($row)
{
    return $this->getUrl('*/*/edit', array(
        'id'=>$row->getId())
    );
} 
```

这将为您的每一行提供一些其他类的 URL。

参考`Mage_Adminhtml_Block_Catalog_Product_Grid`第 320 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:24:17.340

我只想创建一个会话变量来保存它。

```
Mage::getModel('core/session')->setSomeVariable($id); 
```

然后拉它。

```
Mage::getModel('sales/order')->load(Mage::getModel('core/session')->getSomeVariable(); 
```

# javascript - 对javascript多维数组中的元素进行排序

> ID：11671194
> 
> 赞同：1
> 
> 时间：2012-07-26T14:12:41.183
> 
> 标签：javascript, jquery

在javascript中做一些工作我有一个以这种格式组成的多维（我知道它不是一个真正的数组对象，它让你对格式有所了解

```
[
  [[“ip-address”][timestamp]],
  [[“ip-address”][timestamp]],
  [[“ip-address”][timestamp]],
  [[“ip-address”][timestamp]]
] 
```

该数组可以包含重复的IP地址，我需要一种方法来首先按时间戳对数组进行排序，然后回显IP地址的第一个实例（即对于每个IP地址，我需要具有最早时间戳的那个）

例如

```
[[“10.0.0.1”][13:01:34]]
[[“10.0.0.1”][ 13:21:56]]
[[“192.168.1.1”][23:45:12]]
[[“192.168.1.1”][12:34:42]] 
```

会给我以下输出

```
10.0.0.1 = 13:01:34
192.168.1.1 = 12:34:42 
```

我四处打猎，看不到这样做的方法，因此将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:22:54.610

像这样的东西？

```
result=[];
$.each(source,function(ip,timestamp)
{
    if( result[ip]==undefined || timestamp < result[ip] )
    {
        result[ip]=timestamp;
    }
}); 
```

# php - PHP 上下文切换

> ID：11671195
> 
> 赞同：0
> 
> 时间：2012-07-26T14:12:43.020
> 
> 标签：php, asp-classic, context-switching

在经典的 ASP 世界中，存在上下文切换的问题。上下文切换是您打开 PHP 标记，编写一点 php 代码，然后关闭标记，继续编写一点 HTML，然后回到 PHP 并经常进行这些切换。在 ASP 中，不建议使用这种编程风格，我们建议尽可能减少它。

换句话说，而不是在 ASP 中编写这样的代码

`My name is <%response.write myName %> and I am <%response.write myage %> years of age.`

我们建议编写如下代码；

`<%response.write "My name is " & myName & " and I am " & myage & " years of age."%>`

使用后者，ASP.DLL 花费更少的时间来解析脚本。

我的问题是这个概念/问题/担忧是否适用于 PHP 世界？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:16:26.280

好吧，至少 PHP 不是这样工作的。没有上下文切换，文件完全是 PHP，`<?php ?>`标签之外的任何内容都相当于一个静态回显语句。

如果您使用操作码缓存，所花费的解析时间几乎相同并且完全无关紧要。

你可以使用[parsekit](http://www.php.net/manual/en/function.parsekit-compile-file.php)来编译不同的文件，看看会生成什么样的操作码。

所以这：

```
<?php echo "hi"; ?>
<?php echo "hi"; ?>
<?php echo "hi"; ?>
<html> 
```

与以下内容完全相同：

```
<?php
echo "hi";
echo "hi";
echo "hi";
echo "<html>";
?> 
```

请注意，前一个示例中的换行符不会输出，即使它们位于 php 标记之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:21:22.020

至少在视图部分，

```
My name is <?php echo $myName ?> and I am <?php echo $myAge ?> years of age. 
```

好于

```
<?php echo "My name is $myName and I am  $myage years of age." ?> 
```

最好只将动态部分留给 PHP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:23:03.907

这两个示例也可以用 PHP 编写：

```
My name is <?php echo $myName; ?> and I am <?php echo $myage; ?> years of age. 
```

和

```
<?php echo 'My name is ' . $myName . ' and I am ' . $myage . ' years of age.' ?> 
```

前者在进出 PHP 时使用更多时间（微不足道）来解析，但是，从设计的角度来看，后者的可维护性较差。我建议第一种方法来明确说明什么是动态/PHP，什么不是。

如果您在 PHP 中启用了short-open-tags，虽然它对速度没有任何帮助，但通过将第一行缩短为以下内容（我个人的意见）可能会更容易阅读：

```
My name is <?=$myName;?> and I am <?=$myage;?> years of age. 
```

# c++ - 字符串转换 C++

> ID：11671196
> 
> 赞同：-3
> 
> 时间：2012-07-26T14:12:44.853
> 
> 标签：c++, char

我有一个字符串，第一个元素是例如'a'。我已经声明了一个名为 a 的变量（例如 int a=1）。我现在的问题是，如何将整个字符串转换为数字（a=1,b=2,c=3,...z=26）？例子：

`string str="hello";`这必须更改为`"85121215"`然后更改为 85121215。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T15:10:07.203

```
// transformation itself doesn't care what encoding we use
std::string transform_string(std::string const &in, std::function<int(char)> op)
{
    std::ostringstream out;
    std::transform(in.begin(), in.end(),
                   std::ostream_iterator<int>(out),
                   op);
    return out.str();
}

// the per-character mapping is easy to isolate
int ascii_az_map(char ch)
{
    if (ch < 'a' || ch > 'z') {
        std::ostringstream error;
        error << "character '" << ch << "'=" << (int)ch
              << " not in range a-z";
        throw std::out_of_range(error.str());
    }
    return 1 + ch - 'a';
}

// so we can support other encodings if necessary
// NB. ebdic_to_ascii isn't actually implemented here
int ebcdic_az_map(char ch)
{
    return ascii_az_map(ebcdic_to_ascii(ch));
}

// and even detect the platform encoding automatically (w/ thanks to Phresnel)
// (you can still explicitly select a non-native encoding if you want)
int default_az_map(char ch)
{
    #if ('b'-'a' == 1) && ('j' - 'i' == 1)
        return ascii_az_map(ch);
    #elif ('j'-'i' == 8)
        return ebcdic_az_map(ch);
    #else
        #error "unknown character encoding"
    #endif
}

// use as:
std::string str = "hello";
std::string trans = transform_string(str, ascii_az_map);
// OR ... transform_string(str, ebcdic_az_map); 
```

* * *

Note that since the per-character mapping is completely isolated, it's really easy to change the mapping to a lookup table, support different encodings etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:46:28.210

你的定义有点小：

```
"hello" = "85121215
h = 8
e = 5
l = 12
o = 15 
```

我假设你的意思是

```
a = 1
b = 2
...
z = 26 
```

在这种情况下，这并不难：

```
std::string meh_conv(char c) {
    switch(c) { // (or `switch(tolower(c))` and save some typing)
    case 'a': case 'A': return "1";
    case 'b': case 'B': return "2";
    ....
    case 'z': case 'Z': return "26";
    ....
    // insert other special characters here
    }
    throw std::range_error("meh");
}

std::string meh_conv(std::string const &src) {
    std::string dest;
    for (const auto c : s)
       dest += meh_conv(c);
    return dest;
} 
```

~~或使用`std::transform()`：~~

 ~~```
#include <algorithm>

std::string dest;
std::transform (src.begin(), src.end(), back_inserter(dest),
                meh_conv) 
```~~ 

~~（不适用于不同的传入和传出类型，至少不是这样）~~

 ~~* * *

附录。

您可能想要参数化替换地图：

```
std::map<char, std::string> repl;
repl['a'] = repl['A'] = "0";
repl[' '] = " ";

std::string src = "hello";
std::string dest;
for (const auto c : src) dest += repl[c]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:39:52.533

我给你写了一个简单的例子。它创建一个包含 a-1、b-2、c-3 ... 对的地图。然后使用字符串流连接这些值：

```
#include <iostream>
#include <map>
#include <sstream>

int main()
{
    std::string str = "abc";
    std::map<char,int> dictionary;
    int n = 1;
    for(char c='a'; c<='z'; c++)
        dictionary.insert(std::pair<char,int>(c,n++));

    //EDIT if you want uppercase characters too:
    n=1;
    for(char c='A'; c<='Z'; c++)
        dictionary.insert(std::pair<char,int>(c,n++));        

    std::stringstream strstream;

    for(int i=0; i<str.size(); i++)
        strstream<<dictionary[str[i]];

    std::string numbers = strstream.str();

    std::cout<<numbers;

    return 0;
} 
```

C++ 专家可能会因为这个解决方案而杀了我，但它确实有效；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-28T14:13:48.003

简单的方法，你可以找到 96 的 char 的 mod（a 之前的 ASCII 值），结果它总是会给你 1-26 范围内的值。

```
int value;
string s;
cin>>s;
for(int i=0; i<s.size();i++){
    value = s[j]%96;
    cout<<value<<endl;

} 
```~~

# python - 创建按钮以浏览文件夹并在 python 中选择文件

> ID：11671200
> 
> 赞同：0
> 
> 时间：2012-07-26T14:13:17.487
> 
> 标签：python, widget, tkinter

我正在使用 tkinter 开发一个 python 小部件，我需要一个按钮，该按钮的操作类似于我们今天看到的任何打开按钮。基本上我希望它帮助用户浏览文件，选择它并单击确定。我想要的是，一旦用户单击“确定”，它就会从该位置复制文件并以特定名称将其保存到特定位置，然后我的小部件的其余部分将使用该位置。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:17:33.003

看看[tkFileDialog](http://tkinter.unpythonic.net/wiki/tkFileDialog)中的各种小部件。它们可能非常有用。特别是，您可能希望`askopenfilename`它会弹出一个对话框，您可以在其中浏览特定文件——当用户点击`OK`它时，它会返回一个文件名，您可以随心所欲地做任何事情。

# android - 如何将多个整数发送到新活动？

> ID：11671214
> 
> 赞同：3
> 
> 时间：2012-07-26T14:13:51.193
> 
> 标签：android, string, android-activity, int

我有一种方法，我知道现在不是通过 rite 发送它们的最佳方法，但我将它们作为字符串发送并在接收方将它们转换为 Int，问题是当我进行转换时它会在我的手机上崩溃. 这就是我在发件人方面所拥有的：

```
 public void sendMessage(View view) {
    // Do something in response to button
    Intent intent = new Intent(this, PayTracker.class);
    // hourly wage send
    EditText editText = (EditText) findViewById(R.id.hourly_wage);
    String message1 = editText.getText().toString();
    intent.putExtra(MESSAGE_1, message1);
    // ot wage send
    EditText editText1 = (EditText) findViewById(R.id.ot_wage);
    String message2 = editText1.getText().toString();
    intent.putExtra(MESSAGE_2, message2);
    // hours per day send
    EditText editText2 = (EditText) findViewById(R.id.hours_day);
    String message3 = editText2.getText().toString();
    intent.putExtra(MESSAGE_3, message3);
    // start new activity
    startActivity(intent); 
```

这就是我正在接受的方面：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pay_tracker);
    getActionBar().setDisplayHomeAsUpEnabled(true);
    // Receive messages from options page
    Intent intent = getIntent();
    String message1 = intent.getStringExtra(Options.MESSAGE_1);
    String message2 = intent.getStringExtra(Options.MESSAGE_2);
    String message3 = intent.getStringExtra(Options.MESSAGE_3);
    // convert string to integer
    int HW = Integer.valueOf(message1);
    int OTW = Integer.valueOf(message2);
    int HPD = Integer.valueOf(message3); 
```

我已经测试了所有内容及其导致应用程序崩溃的转换，我希望有人可以帮助我让它不会崩溃，或者给我一种全新的方式向我的第二个活动发送一个 int，即发送一个字符串并转换它。谢谢！

==================================================== ======================

在您的帮助下，这是我的新代码！

发送：

```
 public void sendMessage(View view) {
    // Do something in response to button
    Intent intent = new Intent(this, PayTracker.class);
    // Gather text from text boxes
    EditText editText = (EditText) findViewById(R.id.hourly_wage);
    EditText editText1 = (EditText) findViewById(R.id.ot_wage);
    EditText editText2 = (EditText) findViewById(R.id.hours_day);
    //Create String from text
    String message1 = editText.getText().toString();
    String message2 = editText1.getText().toString();
    String message3 = editText2.getText().toString();
    //Convert String to Int
    int HW = 0, OTW = 0, HPD = 0;
    try{
        HW = Integer.valueOf(message1);
        OTW = Integer.valueOf(message2);
        HPD = Integer.valueOf(message3);
    }
    catch(NumberFormatException nfe){
        //do something else here
        //for e.g. initializing default values to your int variables
    }
    // Send Integers to PayTracker.java
    intent.putExtra(MESSAGE_HW, HW);
    intent.putExtra(MESSAGE_OTW, OTW);
    intent.putExtra(MESSAGE_HPD, HPD);
    // start new activity
    startActivity(intent);
} 
```

接收方：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pay_tracker);
    getActionBar().setDisplayHomeAsUpEnabled(true);
    // Receive messages from options page
    Intent intent = getIntent();
    int HW = intent.getIntExtra(Options.MESSAGE_HW, 0);
    int OTW = intent.getIntExtra(Options.MESSAGE_OTW, 0);
    int HPD = intent.getIntExtra(Options.MESSAGE_HPD, 0);
    // set textview
    TextView textView = (TextView) this.findViewById(R.id.yourpay);
    textView.setText(String.valueOf(HW));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:27:22.253

您无需传递`Integers`as`Strings`即可在接收中转换回`Activity`. `Intents`可以保持`Integers`以及`Strings`。

像往常一样简单地添加您的数据：

```
int foo = 5;
Intent intent = new Intent(this, bar.class);
intent.putExtra("foobar", foo); 
```

然后`int`从接收中的意图中检索您，`Activity`如下所示。

```
Intent intent = getIntent();
int foo = intent.getIntExtra("foobar", 0); 
```

`Intents`可以容纳更多的数据，而不仅仅是`Strings`. 其实看看[文档](http://developer.android.com/reference/android/content/Intent.html)。可以看到 Intent 可以持有`Longs`, `Doubles`, `Floats`,`Parcelables`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:18:51.380

将数据从一个活动传递到另一个活动“字符串”值。使用意图

活动一

```
Intent intent = new Intent(Activityone.this,Activitytwo.class)
intent.putExtra("TYPE", type);
startActivity(intent); 
```

活动二

```
Intent intent =getIntent();
Receivevalue =intent.getExtras().getString("TYPE");
(OR)
Receivevalue = getIntent().getExtras().getString("TYPE"); 
```

将数据从一个活动传递到另一个活动“整数”值。使用意图

活动一

```
Intent intent = new Intent(Activityone.this,Activitytwo.class)
intent.putExtra("TYPE", type);
startActivity(intent); 
```

活动二

```
Intent intent = getIntent();
value = intent.getIntExtra("TYPE", 0);     
// Type = intent.getIntExtra(name, defaultValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:22:01.537

将转换部分封装在**try/catch**块中，因为您的字符串可能无法转换为整数值。

```
int HW, OTW, HPD;

try{
    HW = Integer.valueOf(message1);
    OTW = Integer.valueOf(message2);
    HPD = Integer.valueOf(message3);
}
catch(NumberFormatException nfe){
    //do something else here
    //for e.g. initializing default values to your int variables
} 
```

*或者更恰当地说，在您的发送部分传递整数值并按原样接收它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T14:24:50.517

在发送端尝试这样的事情：

```
 String message1 = editText.getText().toString();   
 intent.putExtra("MESSAGE_1", message1);
 String message2 = editText1.getText().toString();
 intent.putExtra("MESSAGE_2", message2);
 String message3 = editText2.getText().toString();
 intent.putExtra("MESSAGE_3", message3); 
```

接收方：

```
 if (getIntent() != null) {
    if (getIntent().getExtras() != null) {
        String mess1 = getIntent().getExtras().getString("MESSAGE_1"); 
        String mess2 = getIntent().getExtras().getString("MESSAGE_2"); 
        String mess3 = getIntent().getExtras().getString("MESSAGE_3"); 
      }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T14:28:24.733

您可以使用以下代码实现您的目标

在您的通话活动中

```
 Intent value = new Intent(YourCallingActivity.this,DestinationActivity.class);
         value.putExtra("integerone", integeronevalue);
         value.putExtra("integertwo", integertwovalue);
         value.putExtra("integerthree", integertwovalue);
         startActivity(value); 
```

在目的地活动中

```
 int integerone = getIntent().getExtras().getInt("integerone");
        int integertwo = getIntent().getExtras().getInt("integertwo");
        int integerthree = getIntent().getExtras().getInt("integerthree"); 
```

希望能帮助到你

# c# - 如何在编写和读取 xml 时检测段落并在页面上正确显示它们？

> ID：11671216
> 
> 赞同：2
> 
> 时间：2012-07-26T14:13:57.643
> 
> 标签：c#, asp.net, xml, repeater, paragraphs

我试图弄清楚（*不幸的是不成功*）是如何检测用户是否在编写 asp:textBox 时创建了一个**新段落**，然后将此信息保存在 xml 中以在页面上正确显示（例如`<br />`在读取 xml 并通过转发器将其呈现在页面上时替换为s)。

这是我的`textBox`：

```
<div><asp:TextBox ID="EdtMessage" Columns="56" Rows="7" TextMode="MultiLine" runat="server" /></div> 
```

这就是我**编写 xml 的**方式：

```
var file = Server.MapPath("~/_xml/messages.xml");

var message = new XElement("contact",
    new XElement("name", s_name.Trim()),
    new XElement("message", s_message.Trim()),
    new XElement("date", System.DateTime.Today.ToShortDateString()),
    new XElement("dateOrder", DateTime.Now.ToString()));
var doc = new XDocument();

if (ckeckFileExistance(file))
{
    doc = XDocument.Load(file);
    doc.Element("messages").Add(message);
}
else
{
    doc = new XDocument(new XElement("messages", message));
}
doc.Save(file); 
```

这就是我阅读xml的方式：

```
DataSet messages = new DataSet();
try
{
    XDocument doc = XDocument.Load(MapPath("~/_xml/messages.xml"));
    /*messages.ReadXml(MapPath("~/_xml/messages.xml"));*/
    myMessages.DataSource = doc.Elements("messages").Elements("contact").OrderByDescending(m => DateTime.Parse(m.Element("dateOrder").Value));
    myMessages.DataBind();
} 
```

**[编辑]** 这是我的中继器：

```
<asp:Repeater ID="myMessages" runat="server">
    <HeaderTemplate>

    </HeaderTemplate>
    <ItemTemplate>
        <div class="message">
            <div class="messageHeader">
                <span><p><b><%# DataBinder.Eval(((XElement)Container.DataItem).Element("name"), "Value")%></b> wrote:</p></span><div class="date"><p><%# DataBinder.Eval(((XElement)Container.DataItem).Element("date"), "Value")%></p></div>
            </div>
            <div class="splitLine"></div>
            <br />
            <div class="messageText">
                <span><p><%# DataBinder.Eval(((XElement)Container.DataItem).Element("message"), "Value")%></p></span>
            </div>
        </div>
    </ItemTemplate>
    <FooterTemplate>

    </FooterTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:39:14.697

您可以将实例替换[`Environment.NewLine`](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)为`<br/>`：

```
myMessages.DataSource = 
      doc.Elements("messages").Elements("contact")
      .OrderByDescending(m => DateTime.Parse(m.Element("dateOrder").Value))
      .Select(message => message.Value.Replace(Environment.NewLine, "<br/>")); 
```

*更新*

根据您的转发器标记，我会忽略我的上述建议并改为更改您的 messageText 标记。像这样的东西应该工作：

```
<div class="messageText">
    <span><p>
       <%# ((XElement)Container.DataItem).Element("message").Value
                .Replace(Environment.NewLine, "<br/>") %>
    </p></span>
</div> 
```

# javascript - 为什么这行脚本不起作用？

> ID：11671219
> 
> 赞同：0
> 
> 时间：2012-07-26T14:14:08.050
> 
> 标签：javascript, jquery

当调用数据字时，我想要显示和播放声音和图像。我尝试了许多不同的方法，但无法弄清楚。

这是一种方法...

```
for(i = 0; i < ul.children.length; ++i){

listOfWords[ul.children[i].getAttribute("data-word")] = ul.children[i].getAttribute("data-pic", "data audio");

}
 console.log(listOfWords); 
```

我也试过...

```
for(i = 0; i < ul.children.length; ++i){

listOfWords[ul.children[i].getAttribute("data-word")] = ul.children[i].getAttribute("data-pic");
listOfWords[ul.children[i].getAttribute("data-word")] = ul.children[i].getAttribute("data-audio");

}
console.log(listOfWords); 
```

但没有这样的运气。

第二种方法是底部而不是顶部，当调用数据字时，我需要数据音频和数据图片。

任何人都可以帮忙吗？

HTML...

```
<ul style="display:none;" id="wordlist">
  <li data-word="mum" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://pixabay.com/static/uploads/photo/2012/04/13/00/06/head-31117_640.png"></li>
  <li data-word="cat" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://pixabay.com/static/uploads/photo/2012/05/03/23/13/cat-46676_640.png"></li>
  <li data-word="dog" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://pixabay.com/static/uploads/photo/2012/05/02/21/14/gray-46364_640.png"></li>
  <li data-word="bug" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://pixabay.com/static/uploads/photo/2012/04/16/12/17/black-35741_640.png"></li>
  <li data-word="log" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://pixabay.com/static/uploads/photo/2012/04/13/11/18/fire-31929_640.png"></li>
  <li data-word="dad" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://pixabay.com/static/uploads/photo/2012/04/13/00/05/old-31110_640.png"></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:21:26.000

像这样的东西：

```
for(i = 0; i < ul.children.length; ++i){
   listOfWords[ul.children[i].getAttribute("data-word")] = {
         "pic" : ul.children[i].getAttribute("data-pic"),
         "audio" : ul.children[i].getAttribute("data-audio")
   };
} 
```

然后对于`listOfWords`对象中的给定项目，您可以执行以下操作：

```
var currentWord = "cat"; // set current word key somehow, then:
console.log(listOfWords[currentWord].pic);
console.log(listOfWords[currentWord].audio); 
```

使用 jQuery：

```
var listOfWords = {};
$("#wordlist li").each(function() {
    var $item = $(this);
    listOfWords[ $item.attr("data-word") ] = {
        pic : $item.attr("data-pic"),
        audio : $item.attr("data-audio")
    };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:22:41.117

使用 jQuery，您可以使用[`.each()`](http://api.jquery.com/each/)迭代列表项和[`.data()`](http://api.jquery.com/data/)检索数据属性值。

```
var listOfWords = [];
$("#wordlist li").each(function(index, item) {
  // where liData is { word: "a", audio: "b", pic: "c" }
  var liData = $(item).data();
  listOfWords[liData.word] = liData;

  console.log("word: " + liData.word + ", audio: " + liData.audio + ", pic: " + liData.pic);
}); 
```

# android - ViewPager 开关 FragmentPagerAdapter

> ID：11671221
> 
> 赞同：5
> 
> 时间：2012-07-26T14:14:12.883
> 
> 标签：android, android-fragments, android-viewpager

我有一个`ViewPager`由`FragmentPagerAdapter`. 我想从第一个适配器更改两个。问题是之前加载的所有页面（在拥有第一个适配器时）仍然是旧页面。

我查看了源代码`FragmentPagerAdapter`并猜测问题是由于`instatiateItem()`实现而发生的。使用其中包含位置和容器 id 的标签，该方法检查`Fragment`该位置是否已经存在 a。当有一个`Fragment`带有这个标签的时候，它就会被附加。设置新适配器时容器 id 和位置不会改变，因此它会找到旧`Fragment`的 s。

你知道去除所有旧碎片的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T16:04:19.373

我意识到 Fragment 标签使用了一个 id，由`getItemId()`而不是位置获得。为了解决我的问题，我`getItemId()`在不同的 s 中覆盖并使用了完全不同的 id `FragmentPagerAdapter`。

```
@Override
public long getItemId(int position) {
    return mPagerId*100+position;
} 
```

mPagerId 是在构造函数中分配的唯一整数。如果您有超过 100 页，则应将 100 替换为 1000。

# sql - SQL Server：在包含 blob 的表上选择

> ID：11671226
> 
> 赞同：1
> 
> 时间：2012-07-26T14:14:20.390
> 
> 标签：sql, sql-server, blob

我的应用程序正在查询 - 其中包括 - 具有 blob 列和其他元数据列（没有其他 LOB 列）的表。

我读过如果对象本身不是太大，它可能仍然存储在表中，而不是作为自身的链接。在这种情况下，对此类表的“SELECT”语句，即使它不包含 blob，例如：

```
SELECT Date FROM MyTable 
```

可能仍会检索 blob（仅在服务器中），因此需要更长的时间来执行。

这是真的？任何人都可以提供解释或链接吗？

我在 SQL 方面的背景相当基础，所以我可能不准确，抱歉。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:19:15.883

如果在日期列上创建非聚集索引，则可以通过扫描索引来检索数据，而不是扫描整个表。您应该看到 I/O 下降。

# javascript - 将鼠标悬停在按钮上的图表外时显示饼图的工具提示

> ID：11671227
> 
> 赞同：1
> 
> 时间：2012-07-26T14:14:22.523
> 
> 标签：javascript, jquery, highcharts

[http://jsfiddle.net/39UXK/4/](http://jsfiddle.net/39UXK/4/)

在此示例中，当我将鼠标悬停在相关按钮上时，我想查看饼图的工具提示。

任何人都可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:53:01.297

您需要找到有问题的点，选择它，然后刷新工具提示：

```
// find the point
var point = chart.series[0].points[i];

// select the point
point.select();

// refresh the tooltip
chart.tooltip.refresh(point); 
```

# jasper-reports - JasperReports: PDF generation with image from database

> ID：11671231
> 
> 赞同：1
> 
> 时间：2012-07-26T14:14:30.607
> 
> 标签：jasper-reports, ireport

I want generate PDF File with an image. The image name from database and physically the image is present inside local drive or remote server. I want to pass image name to the PDF.

Currently I am doing this by put an image element inside the *iReport* IDE designer and pass the server path or local drive path to that image.

It works fine. But I need some other type for dynamic images.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:34:03.960

If the image can be reached by the app with a URL you can add a paramter named `IMAGE_SRC`, and specify in the iReport designer

```
image expression: new java.net.URL($P{IMAGE_SRC})
expression class: java.net.URL 
```

for the image. Then at runtime you will fill the report after setting the parameter `IMAGE_SRC` with the value readed from the database

# jquery - jQuery选项卡在选项卡内的特定div id上更改

> ID：11671233
> 
> 赞同：2
> 
> 时间：2012-07-26T14:14:33.557
> 
> 标签：jquery, jquery-ui-tabs, jquery-tabs

我在页面上有 5 个选项卡并排排列，每个选项卡都使用 href 来更改选项卡。我基本上在其中一个选项卡内有一个带有图像映射的 div 和一个 id，当我将鼠标悬停在选项卡内的 div 上时，它不会更改为该选项卡，但是如果我将鼠标悬停在选项卡的部分上div 不存在它很高兴地更改为悬停的选项卡。

因此，我选择了选项卡内 div 的 id 并使用了悬停功能，然后创建了一个变量并选择了我当前所在的选项卡的 id，当我警告变量时返回 4 所以我知道部分有效，但是当我将鼠标悬停在带有图像映射的 div 上时，它仍然不会更改为选项卡。

这是 jQuery 的部分，当我将鼠标悬停在里面的 div 上时，我尝试更改为该选项卡。

```
$('ul#featureList li#unbeatableDealsLi #carsVansNearlyNew').hover(function(){
   var index = $('#featureContainer ul#featureList li#unbeatableDealsLi [href="#unbeatableDeals"]').parent().index();
   $('#featureContainer ul#featureList li#unbeatableDealsLi [href="#unbeatableDeals"]').tabs('option', 'selected', index);
}); 
```

# php - 如何检查div是否更新？

> ID：11671234
> 
> 赞同：0
> 
> 时间：2012-07-26T14:14:33.303
> 
> 标签：php, jquery

我有动态刷新 div 的网站。

来源：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script> 
    <script> 
    var auto_refresh = setInterval(
    function()
    {
    $('#loaddiv').fadeOut('slow').load('boo.php').fadeIn("slow");
    $('#loaddiv2').fadeOut('slow').load('boo2.php').fadeIn("slow");
    }, 1000);
    </script> 
```

但只有当 boo.php 返回与实际 div 不同（更新）的值时，我才想要淡出和淡入。
如何比较新价值和实际价值并做到这一点？

Ps 抱歉英语不好，但我是波兰人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:19:09.643

您需要编写一个回调函数来检查返回的数据并将其与已存储在 div 中的数据进行比较。此外，显示/显示 div 的函数可能也需要移至回调函数。

文档可[在此处获得。](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:26:32.643

您需要检查从 ajax 调用获得的结果，并将其与当前内容进行比较。假设您的 Ajax 响应和当前的 Div 标记中有一个带有 ID 的元素，`MsgCount`并且您正在使用它的值进行比较，下面的代码将起作用

```
$(function() {
   var auto_refresh = setInterval(function(){

       var currentMsgCount= $('#MsgCount').text();
       $.get("boo.php",function(data){
          var resultData=$(data);
          var newMsgCount= resultData.filter('#MsgCount').text();
          if(newMsgCount!=currentMsgCount)
          {
            //content is different. Let's show it
             $('#loaddiv').fadeOut('slow',function(){
              $('#loaddiv').html(data).fadeIn("slow");
            });
          }
       });       
   }, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:30:01.097

您必须为 boo.php 编写一个 Ajax 函数并将结果与​​ div 的值进行比较

```
$.ajax(
{
    url: "boo.php",
    success: function(result) 
    {
        if($("#loaddiv").html() != result)
        {
            $("#loaddiv").fadeOut("slow")
            $("#loaddiv").html(result);
            $("#loaddiv").fadeIn("slow");
        }
    }
}); 
```

# openssl - 如何使用 .cer 文件在 OpenSSL 库中初始化 X509 对象？

> ID：11671236
> 
> 赞同：1
> 
> 时间：2012-07-26T14:14:36.373
> 
> 标签：openssl, x509certificate, x509

我正在尝试实现 OpenSSL 的 OCSP 功能，如此处[所述](http://etutorials.org/Programming/secure+programming/Chapter+10.+Public+Key+Infrastructure/10.12+Checking+Revocation+Status+via+OCSP+with+OpenSSL/)，它需要 X509 对象作为参数。我只有 .cer 格式的 x.509 证书文件。如何在 OpenSSL 中使用 .cer 证书初始化 X509 对象？（如果重要的话，我在 XCode 中使用 OpenSSL 1.0.0g）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T15:14:17.360

主要有两种情况。我将在这里介绍两者。

请注意，我假设您使用的是 C++。你选择的平台，如果它是理智的，应该有这些功能的绑定。

* * *

在第一种情况下，您的证书文件采用所谓的 PEM 形式。如果您在文本编辑器中打开证书并看到一些带有人类可读标头的 Base64 编码数据，那么这就是 PEM 文件。在这种情况下，您想要的功能具有签名

```
X509 *PEM_read_X509(FILE *fp, X509 **x, pem_password_cb *cb, void *u); 
```

第一个参数是指向 FILE 返回的 FILE 对象的指针`fopen()`。您可以将最后三个参数保留为`NULL`. 此函数返回一个指向`X509`创建的对象的指针，或者`NULL`在出错时返回。

* * *

在第二种情况下，您的证书文件采用所谓的 DER 形式。如果您在文本编辑器中打开证书并看到一些垃圾，那可能是 DER 文件。在这种情况下，您想要的功能具有签名

```
X509 *d2i_X509_fp(FILE *fp, X509 **x); 
```

您应该能够留下第二个参数`NULL`。这个函数返回一个指向`X509`创建的对象的指针，或者返回一个`NULL`错误的指针。

* * *

众所周知，OpenSSL 官方文档不完整。如果您正在寻找一本好的参考手册，我可以推荐 O'Reilly 的“使用 OpenSSL 的网络安全”（ISBN 978-0-596-00270-1）。它是为 OpenSSL 0.9.6 / 0.9.7 编写的，并没有完全涵盖某些主题（例如 CRL），但涵盖了所有重点并提供了示例代码。如果有的话，它将帮助您减少迷路:)

# c++ - OpenCV户外追踪技巧

> ID：11671239
> 
> 赞同：1
> 
> 时间：2012-07-26T14:14:52.613
> 
> 标签：c++, opencv, openframeworks

我目前正在开发一个跟踪桥上运动的应用程序，并且可以使用一些技巧来使跟踪更加健壮。跟踪是在白天很长一段时间内完成的，因此有关如何最好地处理此问题的提示很方便。

目前我正在使用 OpenCV 和 OpenFrameworks 进行基本的帧差分和 blob 跟踪。不幸的是，在这种状态下，问题是非常开放的：我正在尝试获得有关在户外条件下稳定跟踪的建议：

1.  如何处理光线变化
2.  如何忽略阴影（跟踪深色斑点也可以触发要跟踪的阴影）
3.  如何隔离人（我研究过 OpenCv 的 HOGDescriptor，但它对我的设置来说有点多，我可以处理更简单/不太精确的数据）

此外，我正在考虑通过在图像上应用一些滤镜（如模糊和高通）来提高稳定性。我可以使用任何其他技巧/提示吗？

# java - 如何在 JTree 上显示动态更新？/如何刷新或重新加载 JTree？

> ID：11671242
> 
> 赞同：1
> 
> 时间：2012-07-26T14:14:53.533
> 
> 标签：java, swing, jtree

应用简单，一帧有两个面板

1.  第一个面板，从数据库中检索所有 student ，使用多个 hashmap 获取父子排列并将其显示在树上。

2.  第二个面板，当您单击一个学生时，该学生（selectionlistener）的所有详细信息都会显示在文本框中。

现在，当我在第二个面板上更改学生的姓名时，数据库会正确更新它，但树会显示旧值。

我试过treepanel.reload()，我试过treemodellistener。

有谁可以帮我离开这里吗。在线浏览了很多解决方案，所有这些都是部分的，我无法应用于我的代码。

提前致谢。

* * *

主框架.java

```
/**
 * @author Suraj Baliga
 * 
 * Returns a JFrame with two Panels one having the Jtree and other 
 * having the details of the selected tree component.It also has dynamic tree and 
 * dynamic textbox where updation of text in the textbox will change the value in 
 * databse on click of save button.The JDBC localhost url may change with each machine 
 * as the database location and port number may vary.
*/

package Student_Details;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;
import java.util.Set;
import javax.swing.*;
import javax.swing.tree.DefaultMutableTreeNode;
import org.apache.commons.collections.MultiHashMap;

public final class Main_frame extends JPanel 
{
    String sname,sschool;

    ArrayList StudName_arrylst = new ArrayList();
    ArrayList SchlName_arrylst = new ArrayList();
    ArrayList StudDetailTxtFld_arrylst = new ArrayList();

    static public Connection connect,connect_update;
    public ResultSet resultSet;
    public static ResultSet resultset2;
    MultiHashMap SchlStud_hashmap = new MultiHashMap();

    int i,j,k,k2,z;

    DefaultMutableTreeNode tree_parent;
    int SchlName_arylist_length, StudNamearrylst_length;
    private tree_generation treePanel;

    static JButton save_button = new JButton("Save");
    static JButton cancel_button = new JButton("Cancel");

    static JTextField studName_txtbox= new JTextField();
    static JTextField studAddress_txtbox = new JTextField();
    static JTextField studOthr_txtbox = new JTextField();

   static public String user_name;
   static public String user_add;
   static public String user_other;

    static JLabel name_label = new JLabel("Name : ");
    static JLabel address_label = new JLabel("Adress : ");
    static JLabel other_label = new JLabel("Other Deatils : ");

   static String studDetailsTxtbox_disp[] = new String[10];
    static String studDetailsTxtbx_disp_db[] = new String[10];
    static String studDetailsTxtbxchange[] = new String[10];

    public JPanel panel;
    static JPanel panel_boxes = new JPanel();

    public Main_frame() 
    {

        super(new BorderLayout());

        //Create the components.
        treePanel = new tree_generation();
        populateTree(treePanel);

        //Lay everything out.
        treePanel.setPreferredSize(new Dimension(300, 150));
        add(treePanel, BorderLayout.WEST);

        panel = new JPanel(new GridLayout(1, 2));
        add(panel, BorderLayout.CENTER); 
     }

    public void populateTree(tree_generation treePanel) 
    {
        try 
        {
            Class.forName("org.apache.derby.jdbc.ClientDriver");
            connect = DriverManager.getConnection("jdbc:derby://localhost:1527/treedata2", "suraj", "suraj");
            PreparedStatement AllStuddetails = connect.prepareStatement("SELECT * from student_details");
            resultSet = AllStuddetails.executeQuery();
            while (resultSet.next()) 
            {

                sname = resultSet.getString(1);
                sschool = resultSet.getString(3);
                SchlStud_hashmap.put(sschool, sname);
            }
        } 
        catch (Exception e) 
         {

         }
        Set keySet = SchlStud_hashmap.keySet();
        Iterator keyIterator = keySet.iterator();

        while (keyIterator.hasNext())
        {
            Object key = keyIterator.next();
            SchlName_arrylst.add(key);

            Collection values = (Collection) SchlStud_hashmap.get(key);
            Iterator valuesIterator = values.iterator();

            while (valuesIterator.hasNext()) 
            {
                StudName_arrylst.add(valuesIterator.next());

            }
            SchlName_arylist_length = SchlName_arrylst.size();
            StudNamearrylst_length = StudName_arrylst.size();

            String schlname_tree[] = new String[SchlName_arylist_length];
            String studname_tree[] = new String[StudNamearrylst_length];

            Iterator SchlName_iterator = SchlName_arrylst.iterator();

            i = 0;
            while (SchlName_iterator.hasNext()) 
            {
                schlname_tree[i] = SchlName_iterator.next().toString();
            }

            Iterator StudName_iterator = StudName_arrylst.iterator();
            j = 0;
            while (StudName_iterator.hasNext()) 
            {
                studname_tree[j] = StudName_iterator.next().toString();
                 j++;
            }

            for (k = 0; k < schlname_tree.length; k++) 
            {
                  tree_parent = treePanel.addObject(null, schlname_tree[k]);
                  for (k2 = 0; k2 < studname_tree.length; k2++) 
                     {
                            treePanel.addObject(tree_parent, studname_tree[k2]);
                     }
            }
           StudName_arrylst.clear();
           SchlName_arrylst.clear();
         }

  }

    /**
     * Create the GUI and show it.  
     */
    private static void createAndShowGUI() 
    {
        //Create and set up the window.
        JFrame frame = new JFrame("Student Details");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        Main_frame newContentPane = new Main_frame();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);
        panel_boxes.setLayout(null);

        name_label.setBounds(55,90,150,100);   
        studName_txtbox.setBounds(225,130, 155, 25);
        panel_boxes.add(name_label);
        panel_boxes.add(studName_txtbox);

        address_label.setBounds(55,160, 150, 100);
        studAddress_txtbox.setBounds(225,200, 155, 25);
        panel_boxes.add(address_label);
        panel_boxes.add(studAddress_txtbox);

        other_label.setBounds(55,220, 150, 100);
        studOthr_txtbox.setBounds(225,270, 155, 25);
        panel_boxes.add(other_label); 
        panel_boxes.add(studOthr_txtbox);

        save_button.setBounds(150,350, 100, 50);
        cancel_button.setBounds(350,350, 100, 50);
        panel_boxes.add(save_button);
        panel_boxes.add(cancel_button); 

        frame.add(panel_boxes); 
        //Display the window.
        frame.pack();
        frame.setSize(1000,700);
        frame.setVisible(true);

        save_button.setEnabled(false);
        cancel_button.setEnabled(false);

         studName_txtbox.addFocusListener(new FocusListener() 
         {
            @Override //since some additional functionality is added by the user to 
                      //the inbuilt function @override notation is used
            public void focusGained(FocusEvent e) 
            {
             save_button.setEnabled(true);
             cancel_button.setEnabled(true);
            }

            @Override
            public void focusLost(FocusEvent e) 
            {
                System.out.println("out of focus textbox");
            }

        });

          studAddress_txtbox.addFocusListener(new FocusListener() {

            @Override
            public void focusGained(FocusEvent e) 
            {
             save_button.setEnabled(true);
             cancel_button.setEnabled(true);    
            }

            @Override
            public void focusLost(FocusEvent e) 
            {
               save_button.setEnabled(false);
                cancel_button.setEnabled(false); 
            }
        });

            studOthr_txtbox.addFocusListener(new FocusListener() {

            @Override
            public void focusGained(FocusEvent e) 
            {
             save_button.setEnabled(true);
             cancel_button.setEnabled(true);    
            }

            @Override
            public void focusLost(FocusEvent e) 
            {
               save_button.setEnabled(false);
                cancel_button.setEnabled(false); 
            }
        });

             cancel_button.addActionListener(new ActionListener() 
        { 
                public void actionPerformed(ActionEvent e) 
                { 
                    if(e.getSource()== cancel_button )
                    {
                 clear_textboxes();
                 }
                }
              } );
            save_button.addActionListener(new ActionListener() 
        { 
                public void actionPerformed(ActionEvent e) 
                { 
                    if(e.getSource()== save_button )
                    {
                 selectionButtonPressed();
                 }
                }
              } );
    }

     public void fill_textboxes(ArrayList a1)
    {
        Iterator alldetails = a1.iterator();
        z=0;
        while (alldetails.hasNext()) 
         {
          studDetailsTxtbx_disp_db[z]= (String) alldetails.next();
          System.out.println("this is the Detail : "+studDetailsTxtbx_disp_db[z]);
           z++;   
         }  

     studName_txtbox.setText(studDetailsTxtbx_disp_db[0]);
     studAddress_txtbox.setText(studDetailsTxtbx_disp_db[1].toString());
     studOthr_txtbox.setText(studDetailsTxtbx_disp_db[2]);

 }
  public static void selectionButtonPressed()
    {
      studDetailsTxtbxchange[0]=studName_txtbox.getText(); 
      studDetailsTxtbxchange[1]=studAddress_txtbox.getText();
      studDetailsTxtbxchange[2]=studOthr_txtbox.getText();
      try 
        {
            if((studDetailsTxtbxchange[0].equals(""))||(studDetailsTxtbxchange[0] == null)||(studDetailsTxtbxchange[1].equals(""))||(studDetailsTxtbxchange[1] == null)||(studDetailsTxtbxchange[2].equals(""))||(studDetailsTxtbxchange[2] == null))
            {
            JOptionPane.showMessageDialog(null,"One of the Fields is Blank","Error",JOptionPane.ERROR_MESSAGE);
            }
            else
            {
            System.out.println("control here inside else baby..that has : : "+studDetailsTxtbxchange[0]);
            Class.forName("org.apache.derby.jdbc.ClientDriver");
            connect_update = DriverManager.getConnection("jdbc:derby://localhost:1527/treedata2", "suraj", "suraj");
            PreparedStatement execqry = connect.prepareStatement("select * from student_details where student_name='"+studDetailsTxtbxchange[0]+"'");
            resultset2=execqry.executeQuery();
             System.out.println("control at end if else");
            if(resultset2.next())
            {
                JOptionPane.showMessageDialog(null,"Sorry This name already exists","Error",JOptionPane.ERROR_MESSAGE);
            }
            else
            {
               System.out.println("control here");
               Class.forName("org.apache.derby.jdbc.ClientDriver");
               connect_update = DriverManager.getConnection("jdbc:derby://localhost:1527/treedata2", "suraj", "suraj");
               PreparedStatement updateQry = connect.prepareStatement("UPDATE student_details SET student_name='"+studDetailsTxtbxchange[0]+"',student_address='"+studDetailsTxtbxchange[1]+"',student_school='"+studDetailsTxtbxchange[2]+"' WHERE student_name='"+user_name+"' and student_address='"+user_add+"'and student_school='"+user_other+"'");
               updateQry.executeUpdate();
               JOptionPane.showMessageDialog(null,"Record Updated!","UPDATED",JOptionPane.OK_OPTION);
                  tree_generation.loadit();
            }

            } 

        }
        catch (Exception e) 
         {
           e.printStackTrace(); 
         }              
    }

  public static void clear_textboxes() 
     {
     studName_txtbox.setText(studDetailsTxtbx_disp_db[0]);
     studAddress_txtbox.setText(studDetailsTxtbx_disp_db[1].toString());
     studOthr_txtbox.setText(studDetailsTxtbx_disp_db[2]);
     }

    void dbaction(String string)
      {

      studDetailsTxtbox_disp[0]= string;
      System.out.println("This is the stuff :" + studDetailsTxtbox_disp[0]);
       try
       {
       Class.forName("org.apache.derby.jdbc.ClientDriver").newInstance();
       connect = DriverManager.getConnection("jdbc:derby://localhost:1527/treedata2","suraj","suraj");
       PreparedStatement statement4 = connect.prepareStatement("SELECT * from student_details where student_name ='"+studDetailsTxtbox_disp[0]+"'");                
       resultSet = statement4.executeQuery();
       while(resultSet.next())
                   {

                             user_name = resultSet.getString("student_name");
                            StudDetailTxtFld_arrylst.add(user_name);
                            System.out.println("name :"+user_name);

                            user_add = resultSet.getString("student_address");
                            StudDetailTxtFld_arrylst.add(user_add);
                            System.out.println("address : "+ user_add);

                            user_other = resultSet.getString("student_school");
                            StudDetailTxtFld_arrylst.add(user_other);
                            System.out.println("school : "+user_other);
                 }

    }
    catch (Exception e1) 
    {
        e1.printStackTrace();
    }
   fill_textboxes(StudDetailTxtFld_arrylst);
 }

    public static void main(String[] args) 
    {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() 
            {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

tree_generation.java

```
/**
 * @author Suraj
 * 
 * Tree generation and actions such as adding new parent or child takes place here
 * Section Listeners for displaying relavent details of the selected student.
 */

package Student_Details;

import java.awt.GridLayout;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.event.TreeModelEvent;
import javax.swing.event.TreeModelListener;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreePath;
import javax.swing.tree.TreeSelectionModel;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;

public class tree_generation extends JPanel
{

    protected DefaultMutableTreeNode rootNode;
    protected DefaultTreeModel treeModel;
    protected JTree tree;
    public  String studDetailsTxtbox_disp[] = new String[10];

    public tree_generation() 
    {
      super(new GridLayout(1,0));
        rootNode = new DefaultMutableTreeNode("Click for Student Details");
        treeModel = new DefaultTreeModel(rootNode);
    tree = new JTree(treeModel);
        tree.setEditable(true);
        tree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
        tree.addTreeSelectionListener(new TreeSelectionListener() 
            {
           @Override
            public void valueChanged(TreeSelectionEvent e) 
           {
           studDetailsTxtbox_disp[0]= tree.getLastSelectedPathComponent().toString(); 
           Main_frame db = new Main_frame();
           db.dbaction(studDetailsTxtbox_disp[0]);
           }
        }); 
        tree.setShowsRootHandles(true);
        JScrollPane scrollPane = new JScrollPane(tree);
        add(scrollPane);
    }

    /** Add child to the currently selected node. */
    public DefaultMutableTreeNode addObject(Object child) 
    {
        DefaultMutableTreeNode parentNode = null;
        TreePath parentPath = tree.getSelectionPath();

        if (parentPath == null) {
            parentNode = rootNode;
        } 
        else 
        {
            parentNode = (DefaultMutableTreeNode)
                         (parentPath.getLastPathComponent());
        }

        return addObject(parentNode, child, true);
    }

    public DefaultMutableTreeNode addObject(DefaultMutableTreeNode parent,
                                            Object child) 
    {
        return addObject(parent, child, false);
    }

    public DefaultMutableTreeNode addObject(DefaultMutableTreeNode parent,
                                            Object child, 
                                            boolean shouldBeVisible) 
    {
        DefaultMutableTreeNode childNode = 
                new DefaultMutableTreeNode(child);

        if (parent == null) 
        {
            parent = rootNode;
        }

    //It is key to invoke this on the TreeModel
        treeModel.insertNodeInto(childNode, parent, 
                                 parent.getChildCount());

        //Make sure the user can see the new node.
        if (shouldBeVisible) 
        {
            tree.scrollPathToVisible(new TreePath(childNode.getPath()));
        }
        return childNode;
    }
      static void loadit()
      {

     tree_generation.treeModel.reload();
//i tried this too//
          //treePanel = new tree_generation();
      // populateTree(treePanel);
    }

    class MyTreeModelListener implements TreeModelListener {
        public void treeNodesChanged(TreeModelEvent e) {
            DefaultMutableTreeNode node;
            node = (DefaultMutableTreeNode)(e.getTreePath().getLastPathComponent());
   node.setUserObject("HELLO WORLD");
            /*
             * If the event lists children, then the changed
             * node is the child of the node we've already
             * gotten.  Otherwise, the changed node and the
             * specified node are the same.
             */

                int index = e.getChildIndices()[0];
                node = (DefaultMutableTreeNode)(node.getChildAt(index));

            System.out.println("The user has finished editing the node.");
            System.out.println("New value: " + node.getUserObject());
        }
        public void treeNodesInserted(TreeModelEvent e) {
        }
        public void treeNodesRemoved(TreeModelEvent e) {
        }
        @Override
        public void treeStructureChanged(TreeModelEvent e) 
        {
            System.out.println("tree sturct changed") ;
                 DefaultMutableTreeNode node;
            node = (DefaultMutableTreeNode)(e.getTreePath().getLastPathComponent());
   node.setUserObject("HELLO WORLD");
            tree.updateUI();
            e.getTreePath();
        }
    }
    } 
```

查询 - 数据库名称：treedata2

```
create table student_details(student_name varchar(20),student_address varchar(30),student_school varchar(20));

insert into student_details values('suraj','mangalore','dps');
insert into student_details values('prassana','Bangalore lalbagh 23/16 2nd main road','dps');
insert into student_details values('deepika','Mangalore kadri park , 177b','dav');
insert into student_details values('sujith','delhi , rajinder nagar, d black','dav');
insert into student_details values('sanjay','bombay marina drive, 12/34','dav');
insert into student_details values('suresh','jaipur , lalbagh cjhowki','kv');
insert into student_details values('manu','surat, pune warior house','kv');
insert into student_details values('tarun','chennai, glof club','salwan');
insert into student_details values('vinay','haryana, indutrial area','hindu senior');
insert into student_details values('veeru','trivendrum, kottayam 12/77','canara') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:38:11.553

好的，我想我发现你的代码有什么问题，但你应该自己尝试并确认。

```
Class.forName("org.apache.derby.jdbc.ClientDriver");
connect_update = DriverManager.getConnection("jdbc:derby://localhost:1527/treedata2", "suraj", "suraj");
PreparedStatement updateQry = connect.prepareStatement("UPDATE student_details SET student_name='"+studDetailsTxtbxchange[0]+"',student_address='"+studDetailsTxtbxchange[1]+"',student_school='"+studDetailsTxtbxchange[2]+"' WHERE student_name='"+user_name+"' and student_address='"+user_add+"'and student_school='"+user_other+"'");
updateQry.executeUpdate();
JOptionPane.showMessageDialog(null,"Record Updated!","UPDATED",JOptionPane.OK_OPTION);
tree_generation.loadit(); 
```

在这段代码中，您确实更新了数据库，但没有更新树的模型。您正在调用静态方法`loadit()`，但该方法不包含任何代码。为了工作，您可能应该刷新/重新加载您的 TreeModel。有不同的方法可以做到这一点。一种是直接发现 TreeNode 以使用新值刷新和更新它。另一种方法是重新创建整个 TreeModel（但如果你的树很大，这可能会很昂贵）。使用对象映射模型（例如 JPA/Hibernate），您可以使用适当的 MVC 模式和通知视图更新值的模型来获得更清晰的东西，但它需要额外的努力来设置。

对于它的价值，您应该考虑删除这些`static`关键字，因为它们没有必要也没有适当使用。只要有可能，您应该尽量避免使用该关键字（除非它与`final`描述常量值一起使用）。

还有一件事，尝试使用适当的[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)而不是使用绝对定位。使用适当的布局管理器使您的代码更易于维护，并且在不同平台/外观和感觉上更易于移植。

# actionscript-3 - 创建两个字节数组的“changeset”

> ID：11671244
> 
> 赞同：1
> 
> 时间：2012-07-26T14:15:03.113
> 
> 标签：actionscript-3, actionscript, compression, bytearray, binary-diff

我有一些二进制数据。我会随着时间的推移而改变，一些字节会在这里和那里添加，一些会改变。总体而言，大部分字节数组保持不变。

是否有任何库，最好是 Actionscript 3，从两个字节数组中生成一个“变更集”（有更好的名称吗？）。它还应该让我将变更集应用于字节数组并返回生成的新字节数组。

这有意义吗？我不确定如何最好地表述我的问题。

编辑澄清：

我想要的是只发出变化的东西，从而使“变更集”尽可能小。因此，如果 1MB 二进制文件中只有 1KB 发生了变化，那么变更集应该是一个大小约为 1KB 的字节数组。

编辑：

我认为基本上我需要一个[http://www.daemonology.net/bsdiff/的 AS3 版本](http://www.daemonology.net/bsdiff/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:44:47.533

我不知道任何 AS3 库，但如果我理解正确的话，从头开始编写代码并不像你想象的那么困难或耗时。这是我的（天真）方法。也许这已经符合您的需求。

## 示例输出

![示例输出](../Images/b9165f38bcc4ead4addcb279eb5e65df.png)

## 代码

```
package {
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.utils.ByteArray;

    public class Main extends Sprite {

        public function Main():void {
            if (stage)
                init();
            else
                addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function createDiff(original:ByteArray, comparedTo:ByteArray):ByteArray {
            var diff:ByteArray = new ByteArray();
            var length:uint = Math.min(original.length, comparedTo.length);
            original.position = 0;
            comparedTo.position = 0;
            for (var i:int = 0; i < length; i++) {
                var byteOriginal:int = original.readByte();
                var byteComparedTo:int = comparedTo.readByte();
                if (byteOriginal != byteComparedTo) {
                    diff.writeByte(byteComparedTo - byteOriginal);
                }
                else {
                    diff.writeByte(0);
                }
            }
            diff.compress();
            return diff;
        }

        private function applyDiff(original:ByteArray, diff:ByteArray):ByteArray {
            var result:ByteArray = new ByteArray();
            diff.uncompress();
            original.position = 0;
            diff.position = 0;
            var length:uint = Math.min(original.length, diff.length);
            for (var i:uint = 0; i < length; i++) {
                var byteOriginal:int = original.readByte();
                var byteDiff:int = diff.readByte();
                result.writeByte(byteOriginal + byteDiff);
            }
            return result;
        }

        private function init(e:Event = null):void {
            removeEventListener(Event.ADDED_TO_STAGE, init);
            // generate one random byte array and a slightly different variant
            var length:uint = 128;
            var a:ByteArray = new ByteArray();
            var b:ByteArray = new ByteArray();
            for (var i:int = 0; i < length; i++) {
                var value:int;
                value = 127 - Math.floor(Math.random() * 256);
                a.writeByte(value);
                if (value > 64) {
                    value = 127 - Math.floor(Math.random() * 256);
                }
                b.writeByte(value);
            }
            // create a diff and apply it to the original byte array for verification
            var diff:ByteArray = createDiff(a, b);
            var result:ByteArray = applyDiff(a, diff);
            // trace the byte arrays
            a.position = 0;
            b.position = 0;
            diff.position = 0;
            result.position = 0;
            var outputA:String = "";
            var outputB:String = "";
            var outputDiff:String = "";
            var outputResult:String = "";
            for (var k:int = 0; k < length; k++) {
                outputA += a.readByte() + "\t";
                outputB += b.readByte() + "\t";
                outputDiff += diff.readByte() + "\t";
                outputResult += result.readByte() + "\t";
            }
            trace("1st: \t" + outputA);
            trace("2nd: \t" + outputB);
            trace("diff:\t" + outputDiff);
            trace("test:\t" + outputResult);
        }

    }

} 
```

# ios - Popovercontroller 自动调整大小

> ID：11671245
> 
> 赞同：1
> 
> 时间：2012-07-26T14:15:03.497
> 
> 标签：ios, xamarin.ios, resize, uipopovercontroller

在我的应用程序中，我的 TableCell 上有一个 Longpress 手势。在 Lonpress 上会打开一个 Popover。Popover 会触发 NavigationController。这是代码：

```
var navigationController = new UINavigationController();

//Page 1 
var contPage1 = new UIViewController();
this._movePicker = new UIDatePicker();
var btnPage1 = new UIButton();
btnPage1.Frame = new RectangleF(0,260, 300,40);
contPage1.View.AddSubview(this._movePicker);
contPage1.View.AddSubview(btnPage1);

//Page 2
var contPage2 = new UIViewController();
var btnPage2 = new UIButton();
var textField = new UITextField();
textField.Frame = new RectangleF(0,35,300,150);
btnPage2.Frame = new RectangleF(0,260,300,40);
contPage2.View.AddSubview(btnPage2);
contPage2.View.AddSubview(textField);

// startPopover
this.PopoverController = new UIPopoverController(navigationController);
this.PopoverController.PopoverContentSize = new SizeF(300,340);
//Navigate on the first site
navigationController.PushViewController(contPage1, true);
btnPage1.TouchUpInside(s,e) => navigationController.PushViewController(contPage2, true);

this.PopoverController.PresentFromRect(locationinView, btn, UIPopoverDirection.Any, true); 
```

好的。这工作正常。出现一个弹出框。在 FirstView 上，我单击按钮，它会将我导航到第二页。之后键盘出现，我可以在文本字段中写一些东西。如果我关闭键盘，弹出框会改变他的大小。它现在占据了 iPad 显示屏的整个高度。

但是为什么要调整大小。我将 Popover 的大小设置为 300、400

# ajax - ui:include with 方法破坏了 jsf 的 ajax 功能

> ID：11671246
> 
> 赞同：0
> 
> 时间：2012-07-26T14:15:05.093
> 
> 标签：ajax, primefaces

我面临着一个非常相似的问题，我已经提出了票，但现在问题出现在我的主要项目中。上一张票涉及一个测试项目。 [这](https://stackoverflow.com/questions/11650565/ajax-update-not-working-inside-uicomposition)是票的链接。我将首先简要解释我的项目，然后提供代码。

这是一个基本的用户界面，因为我省略了不相关的部分，但是当您启动 web 应用程序时，您应该被定向到通过使用 ajax 加载了介绍的主页。我正在使用一个名为 Navigation 的托管bean，它是一个简单的 pojo，带有 2 个注释和一个名为“page”的字符串属性。我已将该属性设置为“介绍”，因此默认情况下会加载它。

```
// Navigation.java
@ManagedBean
@RequestScoped
public class Navigation {

  private String page = "intro";

  public String getPage() {
      return page;
  }

  public void setPage(String page) {
    this.page = page;
  }
} 
```

index.xhtml 看起来像这样：

```
<!-- index.xhtml -->
<h:body>
    <!-- Navigation -->
    <h:form>
        <p:menubar>
            <p:menuitem value="Home" icon="ui-icon-home" action="#{navigation.setPage('intro')}" update=":contentPanel" />
            <p:submenu label="Actions" icon="ui-icon-transferthick-e-w">
                <p:submenu label="Employee">
                    <p:menuitem value="Search" action="#{navigation.setPage('employee/find')}" update=":contentPanel" />
                </p:submenu>
            </p:submenu>
        </p:menubar>
    </h:form>
    <!-- ContentPanel -->
    <p:panel id="contentPanel" styleClass="content">
       <ui:include src="/#{navigation.page}.xhtml" />
    </p:panel>
</h:body> 
```

现在，当您导航到“操作/员工/新建”时，文件 find.xhtml 确实会加载到主页中，但是表单本身不起作用。这是文件：

```
<!-- find.xhtml -->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:p="http://primefaces.org/ui"
            xmlns:f="http://java.sun.com/jsf/core">
    <f:facet name="header">
      Create new employee
    </f:facet>
    <h:outputLabel value="User ID: " for="userId" />
    <p:inputText value="#{managedEmployee.userId}" id="userId" />
    <p:commandButton value="Show" update="result" />
    <h:outputText id="result" value="#{managedEmployee.userId}" />
</ui:composition> 
```

因此，用户将能够在表单中输入用户 ID，并且当按下命令按钮时，它将显示在表单附近。显然我一定做错了什么，但我似乎无法弄清楚。我不喜欢这样说，但我很想得到答案。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:21:15.830

我可能不理解这个问题，但你没有在你的 commandButton 上设置一个动作，所以它当然不会做任何事情。

```
 <p:commandButton value="Show" update="result" /> 
```

应该有类似的东西

```
 <p:commandButton value="Show" update="result" action="#{backer.method}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:52:39.283

我找到了解决我的问题的方法。不确定原因是什么，但是如果我将 ui:composition 中的代码用 h:form 包围，并添加该表单 ID 以更新它可以工作的链接。希望这有助于其他人遇到它。干杯

```
<p:menuitem value="Create" action="#{navigationBean.setPage('employee/create')}" update=":contentPanel :form" /> 
```

```
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:p="http://primefaces.org/ui">
  <h:form id="form">
    ...
  </h:form>
</ui:composition> 
```

# wpf - 数据模板未在数据触发器上切换

> ID：11671247
> 
> 赞同：1
> 
> 时间：2012-07-26T14:15:05.973
> 
> 标签：wpf, datatemplate

我为我的 listBox 定义了两个数据模板，我使用 DataTemplateSelector 来决定要为项目呈现哪个数据模板。但是，我的一个模板有一个嵌入式按钮，单击该按钮应在适当位置显示一个表单。所以我设置了一个布尔属性并实现了 INotifyPropertyChanged; 这样当布尔属性为真时，当前模板将被第三个模板替换。

这是按钮的代码。

```
 Activity activityItem = (Activity)listBox1.Items[listBox1.SelectedIndex]; 
        activityItem.ShowFeedbackForm = 1; 
```

这是我的 XAML：

```
 <Grid.Resources>
    <DataTemplate x:Key="completedActivityTemplate">
        <Grid Name="templateGrid" >
    ... 
    <DataTemplate x:Key="activityTemplate">
        <Grid Name="templateGrid" >
    ...
    <DataTemplate x:Key="feedbackFormTemplate">
        <Grid Name="templateGrid" >
    ...    
     <Style TargetType="ListBoxItem" x:Key="ContainerStyle">
        <Setter Property="Height" Value="55" />
        <Setter Property="Background" Value="Transparent" />
        <Style.Triggers>
            <Trigger Property="IsKeyboardFocusWithin" Value="True">
                <Setter Property="IsSelected" Value="True" />
            </Trigger>
            <DataTrigger Binding="{Binding showFeedbackForm}" Value="1">
                <Setter Property="ContentTemplate" Value="{StaticResource feedbackFormTemplate}" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
    </Grid.Resources>
    <ListBox Grid.Row="1" Name="listBox1" IsSynchronizedWithCurrentItem="True" 
         ScrollViewer.HorizontalScrollBarVisibility="Disabled"
         VerticalContentAlignment="Stretch" Background="Transparent"
         BorderThickness="0" ItemContainerStyle="{StaticResource ContainerStyle}"
         HorizontalContentAlignment="Stretch" Margin="-3,0,0,0"
         ItemTemplateSelector="{StaticResource myDataTemplateSelector}">
    </ListBox> 
```

因此，当用户单击该按钮时，该项目的 ShowFeedbackForm 的值设置为 1，此时显示反馈表单的模板将被显示，但没有发生任何事情。我的 ObservableCollection（一种方式）绑定工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:02:13.023

在按钮单击处理程序中，我将布尔值设置为绑定项，然后重新绑定列表框的数据模板选择器。

```
 ListBoxItem currentItem = (ListBoxItem)(listBox1.ItemContainerGenerator.ContainerFromItem(listBox1.Items.CurrentItem));
        Activity activityItem = (Activity)listBox1.Items[listBox1.SelectedIndex]; 
        activityItem.ShowFeedbackForm = 1;
        listBox1.ItemTemplateSelector = new ActivityFeedDataTemplateSelector(); 
```

如果设置了布尔值，我的 ActivityFeedDataTemplateSelector 将返回所需的模板名称。

# oracle - 根据标题类型显示内容

> ID：11671249
> 
> 赞同：0
> 
> 时间：2012-07-26T14:15:06.453
> 
> 标签：oracle, loops, cursor, procedure

```
I am new to SQL. My doubt is how to display the output inside the procedure like this.
I have various databases and its type and the current size all in one table 'predict_storage'
I want to display the output as:

    UAT:
        TMAP: 100G
        TCIG: 200G

    QA:
        QMAP: 100G
        QCIG: 200G

    DR:
        DRMAP: 100G
        DRCIG: 200G 
```

其中 UAT 是数据库类型，TMAP，TCIG 是数据库，当前大小为 100g。所以我希望输出喜欢这个根据数据库类型分类的。

这是代码：

```
 CREATE OR REPLACE PROCEDURE test11 IS

        db_original_name_var varchar2(30);
        db_type varchar2(20);
        db_name varchar2(40);
        Used_space_var NUMBER;

        MAX_Used_space_monthvar NUMBER;
        RATE NUMBER;
        avg_space_future_min NUMBER;
        avg_space_future_max NUMBER;
        avgsp NUMBER;
        avg_space_3m NUMBER;
        avg_space_6m Number;
        avg_space_yr NUMBER;

        CURSOR db_list_cur is
        select original_db_name,database_type
        from database_list;

    Begin
      open db_list_cur;
      LOOP
      fetch db_list_cur
      into db_original_name_var,db_type;
     EXIT WHEN db_list_cur%NOTFOUND;

           select substr(avg(ave_used_space),0,6) INTO Used_space_var from month_space where db_original_name_var=database_name;
          select substr(max(ave_used_space),0,6) INTO MAX_Used_space_monthvar from month_space where db_original_name_var=database_name;

       --rate calc
     RATE := (MAX_Used_space_monthvar-Used_space_var)/Used_space_var;

     avg_space_future_max:=(Used_space_var)+(Used_space_var* RATE);
    avg_space_future_min:=(Used_space_var)-(Used_space_var* RATE);
    avgsp := (avg_space_future_max + avg_space_future_min)/2;

    avg_space_3m :=(avgsp)+(avgsp* rate* 3);
    avg_space_6m :=(avgsp)+(avgsp* rate* 6);
    avg_space_yr :=(avgsp)+(avgsp* rate* 12);

    insert into Predict_report
    (
    database_name ,
    Grwoth_rate ,
    Current_AVERAGE,
    Space_3mn,
    SPACE_6mn,
    Space_yr,
    database_type
    )
    values
    (
    db_original_name_var,
    RATE,
    round(avgsp,3),
    round(avg_space_3m,3),
    round(avg_space_6m,3),
    round(avg_space_yr,3),
    db_type
    );
    commit;

        loop
        dbms_output.put_line(db_type||':');
        select database_name into db_name from predict_report  where database_type=db_type;
        dbms_output.put_line(db_name);
        END LOOP;

       END LOOP;
       close db_list_cur;

    END;
    / 
```

我拥有的表是 1) 存储信息

```
 DB_ID               NUMBER(38)
    DATABASE_NAME       VARCHAR2(50)
    DATABASE_SIZE       NUMBER
    TIME_STAMP          DATE
    FREE_SPACE          VARCHAR2(50)
    DATA_LINK_NAME      VARCHAR2(50)
    CUSTOMER_SPACE      NUMBER
    DATABASE_TYPE       VARCHAR2(30)
    USED_SPACE          NUMBER

2) Database_list

    DB_ID               NUMBER
    DB_NAME             VARCHAR2(50)
    DATALINK_NAME       VARCHAR2(50)
    DATABASE_TYPE       VARCHAR2(20)
    ORIGINAL_DB_NAME    VARCHAR2(30) 
```

3)预测报告

```
 DATABASE_NAME       NOT NULL VARCHAR2(50)
    GRWOTH_RATE         NUMBER
    CURRENT_AVERAGE     NUMBER
    SPACE_3MN           NUMBER
    SPACE_6MN           NUMBER
    SPACE_YR            NUMBER
    DATABASE_TYPE       VARCHAR2(20) 
```

4) 月空间

```
 DATABASE_NAME       NOT NULL VARCHAR2(50)
    GRWOTH_RATE         NUMBER
    CURRENT_AVERAGE     NUMBER
    SPACE_3MN           NUMBER
    SPACE_6MN           NUMBER
    SPACE_YR            NUMBER
    DATABASE_TYPE       VARCHAR2(20) 
```

-----sql文件是

```
 set echo off numf 999G999G999G999 lin 32000 trims on pages 50000 head on feed off     markup html off
    alter session set nls_numeric_characters='.''' nls_date_format='Day DD. Month, YYYY';
    spool /tmp/report.html
--prompt To: jialin.zhu@synchronoss.com
    prompt TO: varun.jain@synchronoss.com
    prompt cc: varun.jain@synchronoss.com
    prompt From: varun.jain@synchronoss.com
    prompt Subject: Daily space report
    prompt Content-type: text/html
    prompt MIME-Version: 1.0
    set markup html on entmap off table 'BORDER="2" BGCOLOR="white" FONTCOLOR="black"'
    prompt <i>Good morning, </i>
    prompt <i>Here is the Space report as on &_DATE</i>
    prompt <i>Kind Regards, </i>

------------------------------------------------------------------------------------------------------------------------------------------------
    prompt <br/><h3>Database Space Report</h3>

    set serveroutput on
    CLEAR COLUMNS
    Set HEADING ON
    Set COLSEP ,
    SET PAGESIZE 20000
    SET timing off feedback off verify off echo off

    prompt <br/><h3> Environment Space Summary</h3>
    column database_type heading 'Database Type'
    column Sum(current_average) format 9999 HEADING 'Total Space in GB'
    select database_type,Sum(current_average) from predict_report group by database_type;
--------------------------------------------------------------------------------------------------------------------------------------------------

    prompt <br/><h3> DR database Summary</h3>
    COLUMN ('THETOTALSPACEINDRDATABASES:'||SUM(CURRENT_AVERAGE)||''||'GB') format 9999 heading     'total Space in DR database'
    select ('The total space in DR databases :' ||Sum(current_average)||' '||'GB') from     predict_report where DATABASE_TYPE not in ('UAT','QA');
------------------------------------------------------------------------------------------------------------------------------------------
    prompt <br/><h3> databases  Summary</h3>
    column database_name format a30 heading ' DATABASE NAME'
    column round(GRWOTH_RATE*100,0)||'%'  heading 'GROWTH RATE'
    COLUMN CURRENT_AVERAGE FORMAT 9999 HEADING 'TODAYS SPACE in GB'
    COLUMN SPACE_3MN FORMAT 9999 HEADING 'SPACE AFT 3 MONTHS in GB'
    COLUMN SPACE_6MN FORMAT 9999 HEADING 'SPACE AFT 6 MONTHS in GB'
    COLUMN SPACE_YR FORMAT 9999 HEADING 'SPACE AFT A YEAR in GB'
    truncate table Predict_report;
    set serveroutput on
    exec report;
    SELECT         database_name,round(GRWOTH_RATE*100,0)||'%',current_average,space_3mn,space_6mn,space_yr     FROM Predict_report;

---------------------------------------------------------------------------------
    prompt <br/><h3>Database Space Summary</h3>
    column sum(current_average) FORMAT 9999 heading 'Total Space in GB'
    column sum(space_3mn) FORMAT 9999  heading 'Total Space in 3 months in GB'
    column sum(space_6mn) FORMAT 9999  heading 'Total Space in 6 months in GB'
    column sum(space_yr) FORMAT 9999 heading 'Total Space in 1 year in GB'
    select sum(current_average),sum(space_3mn),sum(space_6mn),sum(space_yr) from             Predict_report ;
    spool off;

---------to send the mail----------------

    host /usr/sbin/sendmail -t </tmp/report.html 
```

并且收到的电子邮件中的输出类似于（它在 EMAIL 中以表格形式）

```
DATABASE NAME   GROWTH RATE     TODAYS SPACE in GB  SPACE AFT 3 MONTHS in GB    SPACE AFT 6 MONTHS in GB    SPACE AFT A YEAR in GB 
CLNK    0%  199     200     200     202 
CCIG    0%  562     563     563     565 
DTXN    5%  330     377     424     518 
DCIG    0%  414     416     418     422 
QMAP    0%  16  16  17  17 
QLNP    0%  44  44  44  44 
QHTS    1%  32  32  33  34 
QFKP    1%  37  38  39  41 
QSAG    0%  168     169     170     172 
CSAG    0%  812     815     818     824 
LTATG   0%  25  25  25  25 
QCIG    0%  208     209     209     211 
TLNP    0%  341     341     341     341 
TMAP    0%  60  61  61  62 
TSAG    0%  223     226     228 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:16:44.740

您现在用于输出的额外循环永远不会终止，因此执行该过程似乎会挂起，至少在您用完`dbms_output`缓冲区空间之前；并且不检索当前值。而且它在错误的位置，因为它会在每次循环中显示该类型的所有数据库的数据，所以你会得到重复（充其量）。

尽管这似乎不是一种明智的做法，尤其是因为您假设该过程将始终由可以显示输出并启用输出的东西运行，但您可以在以下操作*之后* `close db_list_cur`执行以下操作：

```
db_type := null;
for r in (select database_type, database_name, current_average
    from predict_report
    order by database_type, database_name)
loop
    if db_type is null or db_type != r.database_type then
        dbms_output.put_line(r.database_type || ':');
        db_type := r.database_type;
    end if;
    dbms_output.put_line(r.database_name ||' '||
        to_char(nvl(r.current_average, 0), '999990.00') ||'G');
end loop; 
```

...或根据您要插入的数据在主循环中，而不是在最后查询表（因为它们应该匹配）；但无论您使用循环还是更简单的`insert into predict_report select ...`.

您不需要使用游标来计算统计信息或填充表格；你根本不需要 PL/SQL。您可以将两个表连接在一起并从返回值中计算出数字。这样的事情会做到这一点：

```
select database_name,
    rate as grwoth_rate,
    avg_used_space as current_average,
    avg_used_space + (avg_used_space * rate * 3) as space3mn,
    avg_used_space + (avg_used_space * rate * 6) as space6mn,
    avg_used_space + (avg_used_space * rate * 12) as spaceyr,
database_type
from (
    select database_name,
        database_type,
        avg_used_space,
        max_used_space,
        (max_used_space - avg_used_space)/avg_used_space as rate
    from (
        select dl.original_db_name as database_name,
            dl.database_type,
            trunc(avg(ave_used_space), 2) as avg_used_space,
            trunc(max(ave_used_space), 2) as max_used_space
        from database_list dl
        join month_space ms on ms.database_name = dl.original_db_name
        group by dl.original_db_name,
            dl.database_type
    )
); 
```

您可以使用它来插入新表，但不确定是否真的需要它，如果您只是在过程中生成输出 - 不清楚是否是这种情况，尽管您似乎不想显示所有您正在计算的统计数据。

不过，我也不确定您的统计数据是否有意义。您似乎正在计算任意月数的增长率，然后通过将该增长率应用于数据库生命周期内的平均值而不是当前大小来预测未来大小，您似乎没有收集到 - 您有当前的平均值，这不是一回事。

# windows - 创建自定义协议 (Windows 7)

> ID：11671261
> 
> 赞同：7
> 
> 时间：2012-07-26T14:15:42.457
> 
> 标签：windows, windows-7, protocols, network-protocols

我一直在尝试创建一个自定义协议（open_php_file://）来通过浏览器打开本地文件。我创建了以下注册表键：

```
HKEY_CLASSES_ROOT
     open_php_file
          (Default) = "URL:PHPEd protocol"
          URL Protocol = ""
          DefaultIcon
               (Default) = "phped.exe"
          shell
               open
                    command
                         (Default) = "C:\Program Files (x86)\NuSphere\7.0\phped.exe" "%1" 
```

问题是：我无法在浏览器中打开文件（例如：open_php_file://c:\file.txt），并且协议未列在 Windows 默认程序中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T19:27:33.423

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\openphpfile]
@="\"URL:openphpfile Protocol\""
"EditFlags"=hex:02,00,00,00
"URL Protocol"=""

[HKEY_CLASSES_ROOT\openphpfile\DefaultIcon]
@="\"C:\\Users\\ABC\\Documents\\Programs\\CB\\Chunks\\CGI.exe\",0"

[HKEY_CLASSES_ROOT\openphpfile\shell]

[HKEY_CLASSES_ROOT\openphpfile\shell\open]

[HKEY_CLASSES_ROOT\openphpfile\shell\open\command]
@="\"C:\\Users\\ABC\\Documents\\Programs\\CB\\Chunks\\CGI.exe\" -c \"%1\"" 
```

基本上问题出在您的协议中的下划线。一旦删除，一切都开始正常工作。您可以根据自己的意愿更改可执行文件的路径，即“C:\Program Files (x86)\NuSphere\7.0\phped.exe”。

我试过`openphpfile:blast`了，效果很好:)

编辑：

> 此解决方案的问题在于 %1 被替换为“open_php_file://[file]”，而不仅仅是“[file]”。这样我需要某种过滤器来截断“open_php_file://”。

在 openphpfile:[Space]Your_Content 后放置一个空格并将参数更改为 %2 你会得到预期的结果

```
[HKEY_CLASSES_ROOT\openphpfile\shell\open\command]
@="\"C:\\Users\\ABC\\Documents\\Programs\\CB\\Chunks\\CGI.exe\" -c \"%2\"" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:34:03.447

Windows 总是用输入的完整 URI 替换 %1。AFAIK 没有办法改变这种行为。

这给你留下了两个选择：

1.  如果您自己编写了被调用的程序，则可以在调用它时过滤 URI。
2.  You could use an intermediate program that acts as a filter for the URI and then forwards the result to the actual protocol implementation. Fortunately for you, someone has already done exactly that. See '[CustomURL](http://customurl.codeplex.com/)' on CodePlex. CustomURL is a small utility for registering custom URL protocols. For example you can associate the rdp:// protocol with Remote Desktop Client or the ssh:// protocol with Putty or another SSH client.

# css - ul#Content 与#Content ul 不一样吗？

> ID：11671263
> 
> 赞同：0
> 
> 时间：2012-07-26T14:15:54.780
> 
> 标签：css

我正在调试我的 css 代码，因为我的 ul 没有按预期出现缩进和项目符号。

我的 css 中有很多 UL，但我以各种方式编写它们。我试图使它们统一，即 ul 在 div 名称之后，但它们的行为不同。有人可以帮助我理解差异，因为我想以一种统一的方式编写这些语句。

```
ul#Content li {// do something}

#Content ul li {// do something} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T14:19:03.677

他们注意到不同的事情：

```
ul#Content li {// do something} 
```

id 为“Content”`li`的类型元素内的`ul`所有元素`ul`

```
#Content ul li {// do something} 
```

id 为“Content”的某个容器内的元素内的所有`li`元素`ul`

所以问题是：“内容”是`ul`其容器的 id 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:20:44.030

不，`ul#content li`匹配 a`ul`中包含的任何 li `id="content"`，例如：

```
<ul id="content">
    <li></li>
</ul> 
```

`#content ul li`匹配任何`li`包含在 a 中的`ul`，包含在另一个具有 . 的元素中的元素`id="content"`。例子：

```
<div id="content>
    <ul>
        <li></li>
    </ul>
</div> 
```

# sql - 用户友好的SQL查询程序？

> ID：11671264
> 
> 赞同：2
> 
> 时间：2012-07-26T14:15:55.523
> 
> 标签：sql

我怀疑这可能存在，但更疯狂的事情确实存在。是否有一个程序或地方可以让我只输入表/列和一些标准选项，它会为我生成一个有效的 SQL 查询代码？

我知道有些程序可以让代码看起来很漂亮，但我的意思是真正生成代码/joins/FROMS/etc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:22:19.260

实际上，`Microsoft SQL Server Management Studio`您拥有一切所需的工具。您只需要学习基础知识，但几乎所有事情都可以使用为您准备的代码来完成。

*   您可以通过仅`Right-Clicking`在数据库上创建表并选择创建表。从那里你只需要填写列名和行。
*   `T-SQL`您可以在不直接使用语言的情况下用类似的内容填充行。
*   工具太多了，我无法在这里一一列出，但它确实是用户友好的。

我建议你去[学习 SQL](http://msdn.microsoft.com/en-us/library/ms365303.aspx)。学习基础知识真的很容易，而且非常有用。

如果你真的想要一个为你生成代码的软件，你可以谷歌 SQL 生成器。

我找到[了这个](http://sourceforge.net/projects/asqlg/)。虽然我不推荐使用代码生成器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:27:47.977

正如大家已经评论的那样，SQL Server Management Studio (SSMS) 是您可以使用的工具。但我猜你要求的东西可能需要对底层 tSQL 语言的了解少一点。

一个示例可能是我曾经向我曾经工作过的系统的一些高级用户推荐的[MS SQL 代码工厂](http://www.sqlmaestro.com/products/mssql/codefactory/)，对他来说，这足以进行简单和一些中高级查询。

但是绝对您应该以学习 tSQL 为目标，然后将您的知识与 SSMS 之类的工具一起应用来创建您需要的所有查询，您可以实现的“几乎”没有限制，正如@Polynomial 所说，这也很有趣

# vba - 使用动态索引 VBA 定义范围

> ID：11671265
> 
> 赞同：1
> 
> 时间：2012-07-26T14:15:57.023
> 
> 标签：vba, range

我正在使用 VBA 在 MS Excel 中生成图表。

这是我的代码的一个子程序>

```
Sub fundamentalChart()
Dim fundamental As Chart
Dim trData As Range
Dim Qc1 As Range
Dim i As Integer
Dim clmLetter As String

'*******************************
'just for testing
Dim clmNumber(10) As Integer
clmNumber(1) = 43
'{43,46,49,52,55,58,61,64,67,70}
WSName = "2030184"
QcCount = 10
'*******************************

Set trData = Worksheets(WSName).Range("$D$1:$D$431224, $G$1:$G$431224")
Set fundametnal = Charts.Add
ActiveChart.ChartType = xlXYScatter
ActiveChart.SetSourceData Source:=trData
ActiveChart.Name = WSName & "Fundamental"

For i = 1 To QcCount

Set Qc1 = Worksheets(WSName).Range(Cells(1, clmNumber(i)), Cells(43124, clmNumber(i))) 
With ActiveChart.SeriesCollection.NewSeries
        .Name = "Qc" & i
        .Values = Qc1
        .XValues = Worksheets(WSName).Range("$D$1:$D$431224")
End With
Next i

End Sub 
```

当我尝试添加新的系列集合时会出现问题。我对值 (QC1) 的范围定义有疑问。在我的代码中，clmNumber（上面明确说明）是一个（公共）数组，它达到不同的维度并包含不同的值（它指出包含系列值的列号）。

当列索引将获得不同的值（存储在 clmNumber 中）时，如何定义范围？

谢谢你。

五。

# symfony-forms - Symfony 表单集合对于第一个条目是只读的

> ID：11671268
> 
> 赞同：0
> 
> 时间：2012-07-26T14:16:02.940
> 
> 标签：symfony-forms, symfony-2.1

呈现表单时，如何仅为集合中的第一项设置只读选项？

我的简单模型：

```
class Main
{
    public $others;
}

class Other
{
    public $field1;

    public $field2;
} 
```

我的模型的简单表单类型：

```
class MainType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('others', 'collection', array(
                'type' => new OtherType(),
                'allow_delete' => true,
                'allow_add' => true,
                'by_reference' => false,
            ))
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'App\MyBundle\Entity\Main',
        ));
    }

    public function getName()
    {
        return 'maintype';
    }
}

class OtherType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('field1')
            ->add('field2')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'App\MyBundle\Entity\Other',
        ));
    }

    public function getName()
    {
        return 'othertype';
    }
} 
```

和简单的操作方法我的控制器

```
//...
public function indexAction($id)
{
    $main = new Main();

            $other1 = new Other();
    $other1->field1 = 'a';
    $other1->field2 = 'b';
    $main->others[] = $other;

            $other2 = new Other();
    $other2->field1 = 'c';
    $other2->field1 = 'd';
    $main->others[] = $other;

    $form = $this->createForm(new MainType(), $main);

    //...isValid, persist, flush...
}
//... 
```

我可以在手动呈现表单时设置条件，但我想知道是否可以在表单代码处输入这样的限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:57:03.970

目前不可能让集合的行有不同的选项。如果您认为这将是一个有价值的补充，我邀请您在[问题跟踪器上创建一个功能请求。](https://github.com/symfony/symfony/issues)

# rest - ReST 是一种协议吗？它仅适用于网络应用程序吗？

> ID：11671273
> 
> 赞同：0
> 
> 时间：2012-07-26T14:16:10.963
> 
> 标签：rest, protocols

> **可能重复：**
> [什么是 RESTful/REST](https://stackoverflow.com/questions/2718204/what-is-restful-rest)

ReST是**一种**协议吗？它仅适用于网络应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:20:33.797

REST 与其说是一种协议，不如说是一种……想法，如果你愿意的话。它是一个构建 Web 服务的系统，它遵循一定的原则，使一切变得简单易用。

从 REST 的堆栈溢出标记中获取：

> 代表性状态转移 (REST) 是一种用于分布式超媒体系统（如万维网）的软件架构风格。它现在更受欢迎是因为 RESTful Web 服务为异构系统之间的互操作性提供了一种更简单、更简单的替代方式。

它围绕提供您想要请求 ID 的所有内容并访问它——而不是调用执行特定任务的服务，您访问特定 ID 或一组 ID。这意味着所有操作都可以使用基本的 HTTP 方法进行标准化，例如`GET`、`POST`、`PUT`等。

您可以从任何东西访问 RESTful Web 服务，而不仅仅是 Web 应用程序。

但实际上，我可以在这里解释很长一段时间 - 正如人们所说，你能做的最好的事情就是给它一个谷歌并花一个小时左右的时间阅读。也许[这](http://www.infoq.com/articles/rest-introduction)可能很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:21:59.753

不，它更像是一种适用于客户端和服务器软件的设计模式。只要交换某种形式的超文本消息，客户端和服务器就可以使用任何协议——不需要网络或互联网。

For more information, I'ld consult the Wikipedia definition: [http://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)

# python - Tor .exit 与来自 urllib2 的 polipo

> ID：11671279
> 
> 赞同：0
> 
> 时间：2012-07-26T14:16:45.250
> 
> 标签：python, urllib2, tor

我正在尝试将 Tor 与 urllib2 和 polipo 一起使用。我需要的是一种在程序运行时切换到特定出口节点的方法。我在 /etc/tor/torrc 中设置了“AllowDotExit 1”，并尝试了以下方法：

```
import urllib2

proxy = '127.0.0.1'
port = '8118'

url='http://ifconfig.me.651d7ace80e0b53e6c05eb4db2491264f049df66.exit'

proxyurl = '%s:%s' % (proxy, port)
proxyhandler = urllib2.ProxyHandler({'http': proxyurl})
opener = urllib2.build_opener(proxyhandler)

page = opener.open(url)
print 'Page opened.'
print page.read() 
```

但我得到的是：

```
 :!/usr/bin/env python tortest.py
Traceback (most recent call last):
  File "tortest.py", line 18, in <module>
    page = opener.open(url, timeout=20)
  File "/usr/lib/python2.7/urllib2.py", line 406, in open
    response = meth(req, response)
  File "/usr/lib/python2.7/urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)
  File "/usr/lib/python2.7/urllib2.py", line 444, in error
    return self._call_chain(*args)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 527, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 504: Connect to ifconfig.me.651d7ace80e0b53e6c05eb4db2491264f049df66.exit:80 failed: General SOCKS server failure 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:28:28.183

`General SOCKS server failure`可以是任何东西。例如，您的 TOR 节点可能不知道如何*到达*指定的出口节点。这种情况经常发生。出口可能会列在状态页面之一上，但仍然无法从您的 tor 节点访问。尝试不同的退出，或稍后重试。通常，当您请求特定的出口节点时，需要几分钟才能通过网络建立链接。

# alfresco - 在 Alfresco 和 Activiti 之间选择工作流解决方案？

> ID：11671280
> 
> 赞同：1
> 
> 时间：2012-07-26T14:16:46.563
> 
> 标签：alfresco, jbpm, activiti

我们将为我们的客户构建自定义工作流解决方案，大多数时候我们需要将其集成到他们现有的系统中，主要使用 Microsoft 技术，例如 Exchange Server 和 SharePoint。

客户期望使用工作流将来自人力资源流程、产品库存管理的任务计算机化。他们可能拥有也可能没有自己的 CRM，但他们中的一些人可能已经在某些流程中使用 Sharepoint，如果我们能够提供更强大、更灵活和更经济的解决方案，他们愿意离开。

我发现 Alfresco 和 Activiti 很有前途，但不确定我应该采用哪一个。根据我的研究，Alfresco 是一个成熟的 CRM，带有云和工作流（使用 Activiti 作为引擎），而 Activiti 本身就是引擎。

我应该如何判断何时去 Alfresco 和 Activiti？

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T15:52:16.490

首先，Alfresco 是一个存储库。如果您需要存储文件的地方（最终用户存储文件或应用程序存储文件），您应该考虑使用 Alfresco 作为这些文件的存储库。

正如您所指出的，Alfresco 已经嵌入了 Activiti 工作流引擎。这包括一个封装引擎的抽象服务层，因此，对于许多操作，在使用 Java 或服务器端 JavaScript 时，您不需要对 Activiti 了解太多。（显然您确实需要知道如何定义 BPMN 2.0 流程定义来创建工作流）。

因此，如果您需要存储文件并且需要在业务流程中路由这些文件，Alfresco 的嵌入式工作流引擎可以让您轻松完成此操作。

如果您的主要用例比这更通用（即，您并不总是需要在业务流程中路由文件），那么您可能需要考虑一个独立的工作流引擎。当然，Alfresco 仍然可以参与这些工作流程，但如果您的主要用例不是关于文件的，为什么还要麻烦设置和维护文档存储库？

最后，这里没有硬性规定。美妙之处在于 Alfresco 和 Activiti 都是开源的。您可以尝试一下，深入了解细节，然后自己决定什么是最合适的。

# c++ - 隐式声明的特殊成员函数

> ID：11671282
> 
> 赞同：4
> 
> 时间：2012-07-26T14:16:47.780
> 
> 标签：c++

从根本上隐式声明了四个特殊函数。

1.  默认构造函数
2.  默认析构函数
3.  默认赋值运算符
4.  默认成员复制操作符

问题：

如果其中任何一个是由用户定义的，则 [eg: Destructor ] 其余三个函数将不会被声明。那是正确的吗？或者它仅适用于默认构造函数，并复制构造函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:18:43.750

如果您声明自己的**任何**类型的构造函数（包括复制构造函数），则不再隐式声明**默认构造函数。**其余的是（除非您自己声明了其中一个）。

但是，如果您发现自己声明了 2、3 或 4 中的任何一个，那么您很可能应该声明其他两个，即使编译器隐式声明了它们。这被称为[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。

**在 C++11 中编辑**也隐式声明了*移动复制构造函数*和*移动赋值运算符*，因此三的规则变成了五的规则。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-09-08T21:59:03.740

[Howard Hinnant https://howardhinnant.github.io/classdecl.html](https://howardhinnant.github.io/classdecl.html)在本页末尾提供了非常翔实和简洁的表格

[![在此处输入图像描述](../Images/218d06684cb703d6ba2818681126d67b.png)](https://i.stack.imgur.com/142BI.jpg)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T14:18:38.977

不，您不必仅仅因为您正在声明一个而明确声明其他人。但是，如果您声明 , , 之一，`2)`您可能还需要声明其他的。`3)``4)`

这称为[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。我相信这 在 C++11 中被称为[五法则。](https://stackoverflow.com/questions/4782757/rule-of-three-becomes-rule-of-five-with-c11)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T14:19:10.163

如果您定义自己的，则仍将声明`Foo()`默认值，反之亦然。`~Foo()`与赋值运算符和复制构造函数相同。请记住，如果您使用参数定义构造函数，则会丢失默认构造函数。你必须这样做才能得到一个：

```
class Foo
{
public:
  Foo(); //Declares a default constructor.
  Foo(int);
} 
```

# iphone - self.frame 与 self.layer.bounds（在 iOS 中）

> ID：11671286
> 
> 赞同：3
> 
> 时间：2012-07-26T14:16:50.340
> 
> 标签：iphone, ios, uiview, calayer

我有一个自定义`UIView`集作为我的`UIViewController's`rootView。我以横向模式启动应用程序，但我在 rootView 的边界方面遇到了一些问题。经过一些调试后，我只是使用 Xcode 的控制台来检查发生了什么。该类`ITCustomView's`是我的`UIViewController's`rootView，它是一个`UIView's`子类。所以我做了：

```
po self 
```

结果：

```
ITCustomView: 0x15af30; frame = (20 0; 748 1024); transform = [0, -1, 1, 0, 0, 0]; autoresize = W+H; layer = <CALayer: 0x15b070>> 
```

然后我做了：

```
po [self layer] 
```

结果：

```
CALayer:0x15b070; position = CGPoint (394 512); bounds = CGRect (0 0; 1024 748); delegate = <ITCustomView: 0x15af30; frame = (20 0; 748 1024); transform = [0, -1, 1, 0, 0, 0]; autoresize = W+H; layer = <CALayer: 0x15b070>>; sublayers = (<CALayer: 0x15a390>, <CALayer: 0x15b2c0>, <CALayer: 0xce2f6a0>); transform = CATransform3D (0 -1 0 0; 1 0 0 0; 0 0 1 0; 0 0 0 1); backgroundColor = <CGColor 0x15b040> [<CGColorSpace 0x1356e0> (kCGColorSpaceDeviceRGB)] ( 0.818317 0.818317 0.818317 1 ) 
```

所以我的问题真的是：

1.  在横向中不应该根据方向改变框架吗？

2.  这些变换（方向变化）是否仅在图层上“可见”？

3.  我应该开始使用而不是检查边界（以了解`UIView's`子类何时结束）吗？`self.layer.bounds``self.frame`

4.  `self.layer.bounds`由于可能的转换，总是使用 , 是否更安全（又名：最佳实践） ？

我觉得现在才注意到这种行为很奇怪（也有点为自己感到羞耻）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T14:31:34.687

`frame`仅从超级视图的角度来看才真正相关，因为它在超级视图的坐标系中表示。

出于任何内部目的，`bounds`应使用视图的矩形。

因此，对于您的子问题：

1.  不，改为检查边界。
2.  不，改为检查边界。
3.  不，改为检查边界。
4.  不，改为检查边界。

您不需要检查图层的边界，您可以使用视图的边界。所以，你的问题应该真正标题为 self.frame vs self.bounds，而且 bounds 通常会获胜。

# python - 在 python 中复制部分文本文件时出错

> ID：11671294
> 
> 赞同：0
> 
> 时间：2012-07-26T14:17:15.627
> 
> 标签：python, file-io, text-files

我有以下代码将文本文件的一部分复制到新的临时文件中。我正在尝试在与正在复制的文件相同的目录中创建临时文件。所有的打印语句都是为了查看它在崩溃之前运行了多远，pdb 打印`1`然后给出在代码下方截屏的错误。

```
def copymp(mptfile):
    print 1
    temp = os.path.dirname(mptfile) + '/mpdata.tmp'
    print 2
    mpfile = open(temp, 'w')
    print 3
    copyline = False
    for line in mptfile:
        print 4
        if line.startswith('MP'):
            copyline = True
            print 5
        if copyline:
            print 6
            print>>mpfile, line
            copyline = False
    mpfile.seek(1)
    return None 
```

错误：http: [//i.imgur.com/fqfsi.jpg](http://i.imgur.com/fqfsi.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:20:43.847

参数 to`os.path.dirname()`必须是一个字符串，但您显然是在传递一个文件对象。（这是故意的吗？）试试

```
temp = os.path.dirname(mptfile.name) + '/mpdata.tmp' 
```

反而。

（旁注：您应该仔细查看您获得的回溯。回溯显示错误发生在哪一行 - 不需要打印语句来隔离它。在这种情况下，您可以看到调用`os.path.dirname()`失败，所以你应该检查它的文档来诊断问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:36:29.840

尝试在 python 中使用[tempfile模块。](http://docs.python.org/library/tempfile.html)在原始文件所在的同一目录中创建临时文件是否重要？如果没有，您可以忘记尝试从文件对象获取路径的行，或按照建议使用：

```
temp = os.path.dirname(mptfile.name) + '/mpdata.tmp' 
```

无论如何，大多数时候您不想自己管理临时文件，这就是 python 的临时文件模块存在的原因。

# php - 异步保存数据php

> ID：11671296
> 
> 赞同：0
> 
> 时间：2012-07-26T14:17:17.720
> 
> 标签：php, javascript, jquery, ajax, codeigniter

今天我的一位客户要求他需要在表单数据更改**时将其异步保存到服务器**

前任 ：

我有一个用于填写用户详细信息的表格，包括文本框、选择、收音机、检查等...

因此，当我更改文本框中的值时，我需要将它们保存回服务器。

我可以使用 php 上的任何库或可用的东西吗？

*请注意，我知道什么是 ajax，但我仍然需要手动编写很多代码，而且我关心可重用性。这就是为什么我要图书馆。*

**编辑**

我知道 jQuery、Js、Ajax 等……但我的想法不同……

比如说

```
<input type="text" class="dataBinder[name]" id="cname" name="name" />
<input type="checkbox" class="dataBinder[agree_me]" id="agree_me" name="agree_me" /> 
```

我当然可以

```
 $("#cname").event(function(){

 var is_changed = true; ///check for changes if any

if(is_changed)
{

//send to the server
}

}); 
```

**但我正在寻找可以自动执行此操作的库**

前任：

```
//assume a library dataMapper

var myForm = $("#myForm"); //get the form

myForm.dataMapper({

"server" :"serverUrl/someFunc.php"
//may be some other kind of option too
}); 
```

**服务器上的**someFunc.php****

 **```
dataMapper DM = new dataMapper();

$changes = DM->get_data(); //a function that which give the changes

return $changes 
```

值来自`dataBinder[name]`于

```
<input type="text" class="dataBinder[name]" id="cname" name="name" /> 
```

`var_dump($changes);`给

```
array(3) {
  ["changes"]=>
  array(2) {
    ["cname"]=>
    string(15) "my-changed-name"
    ["agree"]=>
    bool(false)
  }
  ["time"]=>
  string(6) "720124"
  ["form"]=>
  string(6) "formId"
} 
```

我确信可能有很多关于开发人员的问题，但我只是在搜索是否有任何问题，因为我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:21:46.667

为什么不在您需要的每个输入元素中使用 data-save-ajax 属性并将 ajax 页面添加为值。现在您创建一个 jQuery（或您喜欢的任何 ajax javascript）并编写一个 on-change 事件处理程序，将值保存到 data-save-ajax 链接。

像这样的东西：

```
jQuery("[data-save-ajax]").change( function() {
    jQuery.ajax({
        url: jQuery(this).attr("data-save-ajax"),
        method: 'post',
        data: {
            newvalue: jQuery(this).val()
        }
    });
}); 
```

要考虑的是这将产生的负载。最好是在失去焦点时使用事件处理程序。或者，如果您更喜欢 on-change，那么可能在开始 ajax 更改之前几毫秒。

data-save-ajax 链接当然是一个 php 页面，用于检查会话并根据 url 将数据保存到数据库中。您可以使用 .htaccess （或其他）重写来让您的 php 知道您正在使用什么输入。

例如 data-save-ajax 的 url`/ajax/text/name`将被重写为`/ajax/index.php`.

我曾经写过一个这样的 ajax 更新程序，它很容易构建，您可以在需要时轻松更新或重用它。**

# swing - eclipse中的Java swing mini项目

> ID：11671297
> 
> 赞同：0
> 
> 时间：2012-07-26T14:17:23.207
> 
> 标签：swing

需要使用 java swing 做一个迷你项目......我们的教授告诉我们要专注于使用 java swing 的尽可能多的特性或功能，即前端的 GUI，而不是专注于后端部分，即数据库或我们使用的文件......我在互联网上搜索过，没有找到任何合适的项目......他告诉我们做一个游戏或其他东西，但不是一个需要太多的项目在后端工作，如铁路预订系统等，需要数据库工作......来自任何书籍或任何网站的帮助，我可以在其中获得有关 java swing 项目的一些信息......提前致谢..........

# node.js - Nodejs、集群和消息传递

> ID：11671302
> 
> 赞同：0
> 
> 时间：2012-07-26T14:17:37.647
> 
> 标签：node.js

我正在尝试构建一个 nodejs 集群 HTTP Web 服务器。

我正在使用集群来分叉与我的桌面具有 cpu 的相同数量的工作人员。每个工人都有自己独特的密钥计数器。例如工人 1 从 1000,000 开始计数，工人 2 从 2000,000 开始计数，等等。

在随机时间点，我需要所有工人将那里的计数器重置为起始值，例如工人 1 必须重置为 1000,000，工人 2 必须重置为 2000,000

我想通过使用 url 端点参数来触发重置操作

```
http://localhost:8888/aaaa/bbbb/cccc?resetCounter=true
```

收到这个 url 请求的 worker 必须向集群 master 进程发送消息，然后 master 进程将广播给所有活动的 worker，指示他们重置他们的特定计数器。

你怎么做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:45:13.887

Node.js 的标准`cluster`模块内置支持主进程和工作进程之间的消息传递。[从这里](http://nodejs.org/api/cluster.html#cluster_worker_send_message_sendhandle)开始了解消息传递的工作原理。这很简单。

# sql - @! 是什么意思？在 From 语句中的意思

> ID：11671303
> 
> 赞同：5
> 
> 时间：2012-07-26T14:17:41.373
> 
> 标签：sql, oracle, dblink

我试图确定这段代码在做什么（Oracle SQL）——尤其是子句中的*at-sign 感叹号。*`from`

```
INSERT INTO "LOCATIONS" "A1"
            ("LOCATION_ID",
             "SEQUENCE",
             "POINT_TYPE")
SELECT "A2"."LOCATION_ID",
       "A2"."SEQUENCE",
       "A2"."LOCATION_TYPE",
       "A2"."POINT_TYPE"
FROM   "LOCATIONS"@! "A2"
WHERE  NOT EXISTS (SELECT 1
                   FROM   "LOCATIONS" "A3"
                   WHERE  "A3"."LOCATION_ID" = "A2"."LOCATION_ID") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T08:12:41.240

这是到执行查询的原始数据库的反向数据库链接。原始查询必须如下所示：

```
INSERT INTO LOCATIONS@remote_db
            ("LOCATION_ID",
             "SEQUENCE",
             "POINT_TYPE")
SELECT "A2"."LOCATION_ID",
       "A2"."SEQUENCE",
       "A2"."POINT_TYPE"
FROM   "LOCATIONS" A2
WHERE  NOT EXISTS (SELECT 1
                   FROM   LOCATIONS@remote_db A3
                   WHERE  "A3"."LOCATION_ID" = "A2"."LOCATION_ID"); 
```

这样，所有远程表都变为本地表，本地表变为远程“@！”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T14:35:54.640

我认为这不是有效的 SQL。检查您的代码以确保在执行 SQL 之前没有任何更改 - 特别是检查数据库链接的名称是否被替换为`!`.

如果您无法确定正在执行的内容，您可以在数据库上进行跟踪

# python - 500 内部服务器错误尝试使用 shopify python api 启动会话

> ID：11671304
> 
> 赞同：1
> 
> 时间：2012-07-26T14:17:44.193
> 
> 标签：python, api, shopify

我正在关注[https://github.com/Shopify/shopify_python_api](https://github.com/Shopify/shopify_python_api)上的教程，但在第 4 步，我总是收到“500 内部服务器错误”。

我不确定我是否正确地遵循了这些步骤。

在第 3 步之后，我在浏览器中访问 URL，`permission_url`单击“安装”，然后将重定向到的 URL 中的数据复制到`dict`名为`params`.

在执行第 4 步时，我得到：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File ".../lib/python2.7/site-packages/shopify/session.py", line 53, in __init__
    self.token = self.request_token(params['code'])
  File ".../lib/python2.7/site-packages/shopify/session.py", line 90, in request_token
    response = connection.post(access_token_path, ShopifyResource.headers)
  File ".../lib/python2.7/site-packages/pyactiveresource/connection.py", line 313, in post
    return self._open('POST', path, headers=headers, data=data)
  File ".../lib/python2.7/site-packages/shopify/base.py", line 18, in _open
    self.response = super(ShopifyConnection, self)._open(*args, **kwargs)
  File ".../lib/python2.7/site-packages/pyactiveresource/connection.py", line 258, in _open
    response = Response.from_httpresponse(self._handle_error(err))
  File ".../lib/python2.7/site-packages/pyactiveresource/connection.py", line 367, in _handle_error
    raise ServerError(err)
ServerError: HTTP Error 500: Internal Server Error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:28:09.140

对于私有应用程序，您无需通过授权步骤来获取令牌。令牌只是私人应用程序密码。所以激活一个会话只需要做：

```
session = shopify.Session(SHOP_URL)
session.token = PRIVATE_APPLICATION_PASSWORD
shopify.ShopifyResource.activate_session(session) 
```

# sql-server - SQL Server：按 DateDiff 排序性能问题

> ID：11671310
> 
> 赞同：2
> 
> 时间：2012-07-26T14:17:49.880
> 
> 标签：sql-server, performance, sql-order-by, datediff

我在合理的时间内从具有 2M 行的表中获取前 100 行时遇到问题。问题是按部分排序，需要 50 多分钟才能得到这个查询的结果。这个问题的最佳解决方案是什么？

```
select top 100 * from THETABLE TT
Inner join SecondTable ST on TT.TypeID = ST.TypeID
ORDER BY DATEDIFF(Day, TT.LastCheckDate, GETDATE()) * ST.SomeParam DESC 
```

非常感谢，

本齐

编辑：* TheTable 是具有 2M 行的表。* SomeParam 有 15 个不同的值（或多或少）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:06:04.043

为了减少行数，您可以为`SecondTable`按 LastCheckDate 排序的每条记录检索前 (100) 行，然后通过临时表或动态 sql 生成的查询将它们合并，最后选择前 (100)。

此解决方案使用游标获取 SecondTable 中每个值的前 100 条记录。使用 TheTable 上的 (TypeID, LastCheckDate) 索引，它会立即运行（在我的系统上使用包含 700,000 条记录和 50 个 SecondTable 条目的表进行测试）。

```
declare @SomeParam varchar(3)
declare @TypeID int

declare @tbl table (TheTableID int, LastCheckDate datetime, SomeParam float)

declare rstX cursor local fast_forward for
      select TypeID, SomeParam
        from SecondTable

open rstX
while 1 = 1
begin
    fetch next from rstX into @TypeID, @SomeParam
    if @@fetch_status <> 0
       break
    insert into @tbl
    select top 100 ID, LastCheckDate, @SomeParam
      from TheTable
     where TypeID = @TypeID
     order by LastCheckDate
end
close rstX
deallocate rstX

select top 100 *
from @tbl
order by DATEDIFF(Day, LastCheckDate, GETDATE()) * SomeParam 
```

显然，此解决方案仅获取 ID。您可能希望使用其他列来扩展临时表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:36:02.237

想到两个想法：

a）如果 ST.param 不经常更改，也许您可​​以在某处缓存乘法的结果。一天后数字将“关闭”，但相对值将相同 - 即，排序顺序不会改变。

b) 找到减小输入表大小的方法。LastCheckDate 和/或 SomeParam 的某些值可能永远不会进入前 100 名。例如，

```
Select * 
into #tmp 
from THETABLE 
where LastCheckDate between '2012-06-01' and getdate()

select top 100 *
from #tmp join SecondTable ST on #tmp.TypeID = ST.TypeID
order by DateDiff(day, LastCheckDate, getdate()) * ST.SomeParam desc 
```

搜索一张小桌子比搜索一张大桌子要快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:25:07.447

为了加快获取速度，我想到了两件事：

1.  如果您需要经常运行此查询，则应为“lastCheckDate”列**编制索引。**无论您使用哪个 sql db，列上定义明确的索引都将允许更快的选择，尤其是在 order by 子句中。

2.  在执行选择查询之前执行日期数学。您将获得行的 checkDate 和当前日期之间的天数差，乘以某个参数。乘法会影响行的顺序吗？这可以简单地由'lastCheckDate desc'订购吗？ **探索**返回相同结果的其他排序选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T14:59:59.647

这很复杂。您真的需要查询中的所有列吗？您可以在这里尝试一件事。首先只需获取前 100 行 typeid

像下面的东西

```
select top 100 typeid
,TT.lastcheckdate,st.someparam --do not use these if the typeid is unqiue in both tables..
--or just the PK columns of both tables and typeid so that these can be joined on PK
into #temptable
from st inner join tt on st.typeid = tt.typeid 
ORDER BY DATEDIFF(Day, TT.LastCheckDate, GETDATE()) * ST.SomeParam DESC 
```

上面将对非常少的数据进行排序，因此应该更快。根据表和索引中有多少列，这应该会更快（如果两个表中都有很多列，它会很快，但是这个查询将只使用 3。此外，也许这些列（st.typeid、st.someparam 和 tt.typeid 和 tt.lastcheckdate）被一些索引覆盖，因此不需要读取底层表，从而也减少 IO）而不是实际的列。然后加入此数据返回到两个表。

如果这不能按您期望的方式工作。那么您可以通过将表达式的顺序添加为列来使用上面的选择来索引视图。然后使用这个索引视图获得前 100 名并与主表连接。这肯定会减少工作量，从而提高性能。但是索引视图会有开销，这取决于表 TT 中数据更改的频率。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T14:22:25.447

`DATEDIFF(Day, TT.LastCheckDate, GETDATE())`是自“上次检查”以来的天数。

如果您只是订购，`TT.LastCheckDate`您会得到类似的订单。

**编辑** 也许您可以计算出您不希望返回的日期并对其进行过滤。当然，您还需要该 LastDateCheck 列上的索引。如果一切顺利，您至少可以将要检查的记录列表从 2M 缩短到可管理的数量。

# ruby-on-rails - Heroku - rails 应用程序崩溃日志

> ID：11671312
> 
> 赞同：0
> 
> 时间：2012-07-26T14:17:54.567
> 
> 标签：ruby-on-rails, heroku, crash-reports

我刚刚将我的代码推送到heroku，应用程序崩溃了，得到了我无法理解的日志。有人可以帮忙吗？

```
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/engine.rb:436:in `each'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/engine.rb:436:in `eager_load!'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/application/finisher.rb:53:in `block i
n <module:Finisher>'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/initializable.rb:30:in `instance_exec'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/initializable.rb:30:in `run'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/initializable.rb:55:in `block in run_i
nitializers'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/initializable.rb:54:in `each'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/initializable.rb:54:in `run_initialize
rs'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/application.rb:136:in `initialize!'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/railtie/configurable.rb:30:in `method_
missing'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `
require'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `
block in require'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `
require'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:236:in `
load_dependency'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/commands/server.rb:46:in `app'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/commands/server.rb:70:in `start'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/commands.rb:55:in `block in <top (requ
ired)>'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/commands.rb:50:in `tap'
2012-07-26T14:08:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/commands.rb:50:in `<top (required)>'
2012-07-26T14:08:03+00:00 app[web.1]:   from script/rails:6:in `require'
2012-07-26T14:08:03+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-07-26T14:08:04+00:00 heroku[web.1]: Process exited with status 1
2012-07-26T14:08:05+00:00 heroku[web.1]: State changed from starting to crashed

2012-07-26T14:13:39+00:00 app[web.1]: => Call with -d to detach
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:192:in `
block in const_missing'
2012-07-26T14:13:39+00:00 app[web.1]: => Rails 3.2.5 application starting in production on http://0.0.0.0:59739
2012-07-26T14:13:39+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-07-26T14:13:39+00:00 app[web.1]: Exiting
2012-07-26T14:13:39+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:503:in `load_mi
ssing_constant': Expected /app/app/controllers/users.rb to define Users (LoadError)
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:190:in `
each'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:190:in `
const_missing'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/aws-s3-0.6.3/lib/aws/s3/extensions.rb:212:in `const_missing_fro
m_s3_library'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/app/controllers/users.rb:1:in `<top (required)>'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `
require'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `
block in require'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:236:in `
load_dependency'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `
require'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:359:in `
require_or_load'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:313:in `
depend_on'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:225:in `
require_dependency'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/engine.rb:439:in `block (2 levels) in 
eager_load!'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/engine.rb:438:in `block in eager_load!
'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/engine.rb:438:in `each'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/engine.rb:436:in `each'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/engine.rb:436:in `eager_load!'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `
require'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/application/finisher.rb:53:in `block i
n <module:Finisher>'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `
require'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/initializable.rb:54:in `each'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/application.rb:136:in `initialize!'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `
block in require'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/initializable.rb:30:in `instance_exec'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/railtie/configurable.rb:30:in `method_
missing'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/initializable.rb:30:in `run'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/initializable.rb:55:in `block in run_i
nitializers'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/initializable.rb:54:in `run_initialize
rs'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/commands/server.rb:70:in `start'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:236:in `
load_dependency'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/commands/server.rb:46:in `app'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/commands.rb:50:in `tap'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/commands.rb:50:in `<top (required)>'
2012-07-26T14:13:39+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-07-26T14:13:39+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.5/lib/rails/commands.rb:55:in `block in <top (requ
ired)>'
2012-07-26T14:13:39+00:00 app[web.1]:   from script/rails:6:in `require'
2012-07-26T14:13:40+00:00 heroku[web.1]: Process exited with status 1
2012-07-26T14:13:40+00:00 heroku[web.1]: State changed from starting to crashed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:44:56.353

您在这里遇到问题：/app/app/controllers/users.rb。我看到很多问题。在这个文件中，您应该定义类`Users`。它认为您应该像这样重命名文件`users_controller`并像这样定义您的类：

```
class UsersController < ApplicationController
end 
```

# javascript - 计时器在第二次运行时计数更快

> ID：11671313
> 
> 赞同：0
> 
> 时间：2012-07-26T14:17:55.280
> 
> 标签：javascript

我现在正在做一个简单的游戏。它几乎完成了，除了定时器有一个小故障，我不知道它在做什么。当您按下按钮时，画布上的 HTML5 文本开始从 35 倒计时到 0。在第一次运行时它很好。但是，如果您选择再次播放而不刷新，则计时器开始倒计时更快。这是代码。

```
var timer = 35;

ctx.fillText("Countdown: " + timer, 320, 32);

function resetReggie(){
    reggie.x = canvasWidth / 2;
    reggie.y = canvasHeight / 2;
}

//Starts Timer for Timed Game
function timedMsg()
{
    resetReggie();
    ballsCaught = 0;
    timer = 35;
    alert('Pick up as many as you can in ' + timer + ' seconds');
    countDown();
        var t=setTimeout(function() {
        var again = confirm("TIMES UP! You Gathered " + ballsCaught + " Balls! Play Again?");
            if (again === true){ 
                timedMsg(); 
                resetReggie(); 
            }
                if (again === false){
                resetReggie();
                ballsCaught = 0;
                timer = 35;
                }
        }, timer * 1000);

}

function countDown() {
    if (timer != 0){
        timer-=1;
        setTimeout('countDown()', 1000);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:43:27.773

我认为问题出在一线

```
 }, timer * 1000); 
```

在评估“计时器”以设置超时时，您的值最多为 34。因为您将其初始化为 35，但随后调用 countDown() 将其减少到 34，所以您调用了 Confirm()，这可能会让“计时器”进一步减少。结果，随后对 timedMsg() 的调用发生得太快了，导致 countDown() 被调用的频率增加了两倍。尝试以下（我在节点中运行它），然后将 4 更改为 6。

```
function countDown() {
    console.log("Countdown: " + timer, 320, 32);
    if (timer != 0) {
        timer -= 1;
        setTimeout(countDown, 1000);
    }
}
function timedMsg() {
    timer = 5;
    countDown();
    var t=setTimeout(function() {
        timedMsg();
    }, 4 * 1000);
}
timedMsg(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:30:10.130

正如我在评论中提到的，每次您开始新游戏时，您似乎都在减少超时值。结果，这减少了每次的时间。

试试这个：

```
var timeout = currentTime = 5;
var int = setInterval(function() {
    ​console.log(currentTime);
    currentTime--;
    if(currentTime < 0) {
    var again = confirm('Play again?');
    if(again) {
        currentTime = timeout;
    }
    else {
        clearInterval(int);
    }
    }
}, 1000);​ 
```

[http://jsfiddle.net/gRoberts/CsyYx/](http://jsfiddle.net/gRoberts/CsyYx/)

查看您的控制台（Chrome 中的 F12），或更新代码以写入浏览器以查看它是否正常工作；）

# excel - 使用 vba 存储公式的列

> ID：11671314
> 
> 赞同：0
> 
> 时间：2012-07-26T14:17:56.063
> 
> 标签：excel, excel-formula, vba

我被要求从 Excel 文件中提取一些旧信息并将其放入新的 Access 数据库中。我需要做的第一件事是从每个部门的公式中的列中收集信息。所以我有一个看起来像这样的公式，`=YP199+YT199+ZL199+ZT199`我需要在列`YP199`中获取我需要的信息等等。一旦我可以从公式中得到列，其余的就不应该太难了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:38:24.193

此代码将给出所有单元格地址的单元格地址，这些单元格地址是公式的直接先例。请注意，我没有进行任何错误处理。我确定你能照顾好它？

我假设 Sheet1 的单元格 A1 具有公式`=YP199+YT199+ZL199+ZT199`

```
Sub Sample()
    Dim ws As Worksheet
    Dim rng As Range, acell As Range

    Set ws = Sheets("Sheet1")

    With ws
        Set rng = .Range("A1")
        For Each acell In rng.DirectPrecedents
            Debug.Print acell.Address
        Next
    End With
End Sub 
```

上面的代码在运行时会给你这个。

```
$YP$199
$YT$199
$ZL$199
$ZT$199 
```

# arrays - Excel 中的唯一值

> ID：11671315
> 
> 赞同：1
> 
> 时间：2012-07-26T14:17:56.230
> 
> 标签：arrays, excel, unique, max

我需要根据条件从大列中获取唯一数据集中出现次数最多的值。我只需要一个值而不是数组。

请参阅下面我正在使用的示例数据。我已经在 MATLAB 中完成了它，但想在 Excel 中知道它。

![Excel 中的数据集](../Images/924d18e8caabc95e9d9b40d0f7352c39.png)

因此，例如在上面的数据中，我想根据@safea 的值获取车道的唯一值。因此，如果@safea=102，则车道的唯一值=(2,3,1)。但我想要这些数据集中出现最多次数的值。在这种情况下，它是 2，因为 2 出现了 5 次，而 3 出现了一次，而 1 只出现了 1 次。

另一个例子：

如果我选择@safea 作为 162，那么车道（5 和 4）中唯一值的数量，但 5 出现了 4 次，而 4 只出现了 1 次，所以我想要的最终答案是“5”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:28:38.743

如果您不介意使用 VBA，我设计了一个函数，您可以根据需要使用它。鉴于 @safea 值在 A 列中，车道值在 B 列中，您可以使用以下命令：

```
Function MODEIF(criteria As Integer) As Integer
    Dim count As Integer
    count = Application.WorksheetFunction.CountA(Range("A:A"))
    Dim list() As Integer
    Dim size As Integer
    size = 0
    Do While count > 0
        If (Range("A" & count) = criteria) Then
            ReDim Preserve list(size)
            list(size) = Range("B" & count)
            size = size + 1
        End If
        count = count - 1
    Loop
    MODEIF = Application.WorksheetFunction.Mode(list)
End Function 
```

只需将此函数放入模块中，转到电子表格，然后键入`=MODEIF(102)`或任何您想要该模式的 @safea 值，它就会给您答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:42:14.000

您还可以使用此工作表函数来获得条件`MODE`：

```
=MODE(IF(**your @safea value here**=$A$2:$A$22,$B$2:$B$22)) 
```

这是一个数组公式。按`Ctrl+Shift+Enter`（不仅仅是`Enter`）确认输入。

# silverlight - WCF RIA EntityQuery 为外键返回 null

> ID：11671317
> 
> 赞同：1
> 
> 时间：2012-07-26T14:18:08.557
> 
> 标签：silverlight, entity-framework, linq-to-entities, prism, wcf-ria-services

我正在关注有关 Silverlight 和 Prism的[教程，其中](http://www.silverlightshow.net/items/Working-with-Prism-4-Part-3-Composite-Command-and-Pub-Sub-Events.aspx)**WCF RIA 服务**用于通过**ADO.NET Entity Data Model**访问**Northwind 数据库**。

 **在 Northwind 数据库中，有一个表 Order_Details 通过外键连接到另外两个表（Orders 和 Products）：

![数据模型图片](../Images/1c7a6a51968e29d529859ada63be51b2.png)

查询数据库的代码如下所示：

```
EntityQuery<Order_Detail> detailQuery = _MyDomainContext.GetOrder_DetailsQuery();

_MyDomainContext.Load(detailQuery.Where(
            det => det.Order.Customer.CustomerID == cust.CustomerID).OrderByDescending(
            det => det.Order.OrderDate).Take(10), OnDetailsLoaded, null); 
```

然后在 OnDetailsLoaded 中：

```
var details = loadOp.Entities;
if (details != null)
        {
            var detailsList = details.ToList();
            detailsList.ForEach(det => Orders.Add(
                new OrderItem
                {
                    ProductName = det.Product.ProductName,
                    Quantity = det.Quantity,
                    OrderDate = det.Order.OrderDate.Value
                })); 
```

这给了我一个空异常`new OrderItem`，因为 Product 和 Order 都是空的。我已将 EntityDataModel 设置为“在模型中包含外键列”。代码与教程中的完全一样，我只需要重新创建 ADO.Net EntityDataModel 和 DomainService 即可使用我的本地数据库，因此错误可能就在那里。

我将如何调试此错误？我以前没有使用数据库的经验。我将 SQL Server 2012 与适用于 2012 的 Northwind 数据库一起使用，而本教程是使用 SQL Server 2008 RC 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:08:08.870

您可能需要在加载方法中明确包含 Product / Order。尝试做一个

```
.Include("Order").Include("Product") 
```

在域上下文加载中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:04:14.600

这是我必须做的来解决这个问题。Josh 的回答是解决方案的一部分，但我还必须在元数据中添加 [Include] 属性：

在 MyDomainService.cs 中，添加`.Include()`：

```
public IQueryable<Order_Detail> GetOrder_Details()
    {
        return this.ObjectContext.Order_Details.Include("Order").Include("Product");
    } 
```

在 MyDomainService.metadata.cs 中，添加`[Include]`：

```
internal sealed class Order_DetailMetadata
    {

        // Metadata classes are not meant to be instantiated.
        private Order_DetailMetadata()
        {
        }

        [Include]
        public Order Order { get; set; }           

        [Include]
        public Product Product { get; set; }

    }
} 
```

这在[这个网站上](http://www.silverlightshow.net/items/WCF-RIA-Services-Part-5-Metadata-and-Shared-Classes.aspx)有详细描述，感谢[Brian Noyes](http://www.silverlightshow.net/items/Working-with-Prism-4-Part-3-Composite-Command-and-Pub-Sub-Events.aspx)向我指出。**

# javascript - IFRAME 中 XSS 尝试的 Javascript 检测

> ID：11671318
> 
> 赞同：0
> 
> 时间：2012-07-26T14:18:13.580
> 
> 标签：javascript, iframe, xss

javascript 中有没有办法确定何时发生[此链接问题](https://stackoverflow.com/questions/4324108/unsafe-javascript-attempt-to-access-frame-with-url)中描述的 XSS 问题？

本质上，我想确定（在父级中）子 iFrame（在不同域中）中的 javascript 是否正在尝试访问父级。

```
<body>
 <iframe id="child" src="http://someother-domain.com"/>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:11:23.707

不，如果不以某种方式绕过跨域限制，这是不可能的。按照设计，除非收件人通过设置明确允许发件人的来源，否则无法将信号从一个来源的页面发送到另一个来源的页面`document.domain`。

# c# - Telerik RadGauge + 数据绑定

> ID：11671319
> 
> 赞同：3
> 
> 时间：2012-07-26T14:18:14.393
> 
> 标签：c#, wpf, data-binding, mvvm, telerik

所以我正在尝试更新我的 RadRadialGauge。它将显示实时检索的数据（使用动画针）。我有一个 RadChartView，目前通过使用`TimeStamp`和`Value`属性来绘制图表。当我添加图表时，有时我可能想根据我正在观察的变量添加一些图表。例如，如果我想查看电机速度和输出频率，我必须添加多个垂直轴。我处理 RadChartView 数据绑定的部分代码在这里：

```
var lineSeries = new LineSeries();
lineSeries.CategoryBinding =
    new PropertyNameDataPointBinding() { PropertyName = "TimeStamp" };
lineSeries.ValueBinding =
    new PropertyNameDataPointBinding() { PropertyName = "Value" };
lineSeries.ItemsSource = (chart.Chart as GuiAnalogQueue).Records; 
```

其余代码只是外观处理，最后我将 LineSeries 添加到我的 RadChartView。

现在，我正试图以某种方式将此代码移植到 RadGauge。我不确定如何将值绑定到针，以便在值更改时针移动。
在我尝试过的 XAML 中，我`Value="{Binding Value}"`尝试向`ValueSource`变量添加绑定。我也做过`needle.Value = chart.Chart.Value;`

我无法弄清楚，所以任何帮助表示赞赏。

**更新**

这就是我想要完成的。我的`Records`收藏有两个属性，`Value`和`TimeStamp`. 我正在尝试将我的值绑定`Value`到`Records`值`needle`。这是我以编程方式执行此操作的方法：

```
public void InitializeCharts(ChartsVM charts, Theme theme)
{
    DataContext = charts;
    foreach (cVM chart in charts.Charts)
    {
        Binding value = new Binding();
        value.Source = (chart.Chart as GuiAnalogQueue).Records;
        value.Path = new PropertyPath("Value");
        needle.SetBinding(Needle.ValueProperty, value);
    } 
} 
```

但是，当我这样做时，它根本没有改变`needle.Value`。My`Records`是使用 NotifyPropertyChanged("Records") 的集合，所以我希望每次更改 Records 时我的针都会改变。

正如您在我的原始帖子中看到的那样，这三行负责将变量绑定到 ChartView 图表，但是我无法让 RadGauge 工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:34:31.237

简而言之，我发现 Needle 的值不使用任何类型的集合。因此，当我尝试将 Source 设置为集合内部和 Path 时，它并不是真的喜欢那样。相反，我在将值添加到记录集合之前添加了一个属性（在我的更新值函数中）。这样我就可以将绑定设置为：

```
Binding value = new Binding();         
value.Source = (chart.Chart as GuiAnalogQueue);         
value.Path = new PropertyPath("AnalogValue");
needle.SetBinding(Needle.ValueProperty, value); 
```

也就是说，Needle 会将其 Value 属性与 Source--chart.Chart 中的 AnalogValue 属性绑定为 GuiAnalogQueue。

如果您被引导到此页面，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:19:48.137

这是使用 RadRadialGauge 的基本示例。

* * *

## XAML：

* * *

```
<telerik:RadRadialGauge x:Name="radialGauge"
                    Width="300"
                    Height="300"
                                Grid.Column="0">
        <telerik:RadialScale Min="1"
                        Max="12">
            <telerik:RadialScale.Indicators>
                <telerik:Needle x:Name="needle" />
                <telerik:Pinpoint/>
            </telerik:RadialScale.Indicators>

        </telerik:RadialScale>
    </telerik:RadRadialGauge> 
```

如您所见，我有一个定义了径向刻度的径向量规。径向刻度有一根针作为指示器。RadialScale 是从 1 到 12。请注意，我已经给针起了一个名字。我们将使用它从后面的代码中推送值。

在此示例中，我使用调度程序计时器每 1 秒计时一次，并且生成一个介于 1 到 12 之间的随机值。这是代码片段背后的代码。

* * *

## 代码片段：

* * *

以下变量在窗口级别声明

```
TimeSpan interval = TimeSpan.FromSeconds(1);
DispatcherTimer timer;
Random rnd = new Random(); 
```

我已经为 Window Loaded & Unloaded 事件定义了事件处理程序。在窗口加载时，我启动计时器。

```
 void OnWindowLoad(object sender, RoutedEventArgs e)
    {
        timer = new DispatcherTimer();
        timer.Interval = interval;
        timer.Tick += new EventHandler(Timer_Tick);
        timer.Start();
    } 
```

这是计时器滴答功能：

```
 private void Timer_Tick(object sender, EventArgs e)
    {
        timer.Stop();

        SetNextValue();

        timer.Start();
    } 
```

这是 SetNextValue 函数：

```
 private void SetNextValue()
    {
        int minValue = 1;
        int maxValue = 12;
        int nextValue = rnd.Next(minValue, maxValue);
        needle.Value = nextValue;
    } 
```

在 Unloaded 事件处理程序中，我正在停止计时器。

```
 void OnWindowUnload(object sender, RoutedEventArgs e)
    {
        timer.Stop();
    } 
```

输出：当您运行应用程序时，您会看到针的位置发生变化，因为我们每秒生成从 1 到 12 的随机数，并且我们将生成的数字设置为针的值。SetNextValue() 方法可以成为您监控真实值并将针值设置为真实数据的网关。

这是我能想到的用于解释径向量规的基本示例代码。

希望这能提供您正在寻找的答案。

* * *

## 更新：

* * *

这是设置针值的 MVVM 方法。让窗口实现 INotifyPropertyChanged 接口。将数据上下文设置为窗口本身

```
public partial class MainWindow : Window, INotifyPropertyChanged

public MainWindow()
    {
        InitializeComponent();

        Loaded += OnWindowLoad;
        Unloaded += OnWindowUnload;

        DataContext = this;
    } 
```

为 PropertyChanged 事件提供实现，如下所示：

```
public event PropertyChangedEventHandler PropertyChanged = delegate { };

    void NotifyPropertyChanged(string propName)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propName));
    } 
```

实现一个名为 NeedleValue 的属性。

```
 int needleValue = 1;
    public int NeedleValue 
    {
        get
        {
            return needleValue;
        }
        set
        {
            needleValue = value;
            NotifyPropertyChanged("NeedleValue");
        }
    } 
```

在 SetNextValue - 只需设置新创建的 NeedleValue 属性。这将触发属性更改通知。

```
private void SetNextValue()
    {
        int minValue = 1;
        int maxValue = 12;
        int nextValue = rnd.Next(minValue, maxValue);
        NeedleValue = nextValue;
    } 
```

在 XAML 中，将 Needle Value 属性绑定到 NeedleValue，如下所示

```
<telerik:Needle x:Name="needle" Value="{Binding NeedleValue}" /> 
```

希望这能为您提供您正在寻找的答案:)

Lohith (Tech Evangelist, Telerik India)

# css - Less Mixin 用于“背景位置”以隔离 x 和 y 值

> ID：11671322
> 
> 赞同：1
> 
> 时间：2012-07-26T14:18:23.653
> 
> 标签：css, background, less, css-sprites

我正在为我正在为我的工作编写的应用程序使用自定义单选按钮精灵表。我已将此 spritesheet 逻辑拆分为列和行 - 列和行与单选按钮可以具有的特定状态相对应。（列是状态，例如禁用，和应用程序状态，例如“正确”或“不正确”，而行是选定状态和悬停/焦点状态。

我的实现使用动态添加的语义类来影响背景位置。因此，如果单选按钮被标记为“正确”并且它具有焦点，则将应用“正确”CSS 类并应用“焦点”类，分别调用列和行的背景位置。

对于这些类，我目前使用`background-position-x`和`background-position-y`CSS 属性，它们在 IE 和 chrome 中有效，但在 Firefox 和 Opera 中无效。（这两个属性不是任何 CSS 规范的正式组成部分。）由于我们使用的是 LESS 预处理器，我想知道是否有一种方法可以创建一个 LESS mixin，它会动态“继承”一个 x 或 y 值“背景位置”属性。

在伪代码中，是这样的：

```
.my-background-mixin-x(@value) {
   background-position: @value + 'px', inherit; (inherit y-value)
}

.my-background-mixin-y(@value) {
   background-position: inherit, @value + 'px'; (inherit x-value)
} 
```

（这不是真正准确的语法，但我希望它传达了这个想法。）

这在LESS中可能吗？less 可以这样存储变量和目标属性吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:25:10.560

你不能以`inherit`这种方式拥有 LESS 值，并且`background-position`它本身只能`inherit`在 CSS 级联中使用这两个值。我认为可能的“简单”解决方案是以下代码。注意：由于我不知道你的精灵定位，为了说明起见，我*假设*如下：

1.  您的列宽 10 像素，顺序为 a）“基本”图像、b）您的`disabled` 图像、c）您的`.correct`图像和 d）您的`.incorrect`图像。
2.  您的行高 10 像素，顺序为 a）“基本”图像，b）悬停和`.focus`图像（在我的示例中是相同的；不确定您的实际情况）。
3.  您的“基础”和`disabled`设置不需要`:hover`或`.focus`值。

鉴于这些假设，然后使用具有水平（X）和垂直（Y）移位量的mixin，并为精灵中的列和行位置传递一个乘数，可以给我们这个代码（你应该能够修改在我的假设错误的地方）：

**更少的代码**

```
input[type=radio] {
   // bkg position set mixin
   .setBkgPos(@X: 0, @Y: 0) {
      @Xshift: -10px;
      @Yshift: -10px;
      background-position: (@Xshift * @X) (@Yshift * @Y);
   }
   .setBkgPos;

   &[disabled="disabled"] {
      .setBkgPos(1, 0);
   }    

   &.correct {
      .setBkgPos(2, 0);
      &:hover, &.focus {
         .setBkgPos(2, 1);
      }
   }

   &.incorrect {
      .setBkgPos(3, 0);
      &:hover, &.focus {
         .setBkgPos(3, 1);
      }
   }
} 
```

**CSS 示例输出**

```
input[type=radio] {
  background-position: 0px 0px;
}
input[type=radio][disabled="disabled"] {
  background-position: -10px 0px;
}
input[type=radio].correct {
  background-position: -20px 0px;
}
input[type=radio].correct:hover,
input[type=radio].correct.focus {
  background-position: -20px -10px;
}
input[type=radio].incorrect {
  background-position: -30px 0px;
}
input[type=radio].incorrect:hover,
input[type=radio].incorrect.focus {
  background-position: -30px -10px;
} 
```

# objective-c - 在 Core Data 之外重用 NSManagedObjects 的结构

> ID：11671326
> 
> 赞同：1
> 
> 时间：2012-07-26T14:18:28.653
> 
> 标签：objective-c, ios, core-data, nsmanagedobject

我有一个`NSManagedObject`SharePrices，其中包含`DateTime`属性和`NSNumbers`股价，并存储在标准核心数据“数据库”中。由于我想按月对一些股价进行分组，我想为每个月创建新的 SharePrice 对象并在每个对象中存储当月的平均股价，日期将设置为月。

我怎样才能将此每月信息存储在我的 SharePrices 中`NSManagedObject`，而无需通过使用`insertNewObjectForEntityForName`并将其保存到商店来创建它。还是我需要为托管对象创建一个类别并将分组代码放在那里？基本上，我只想在没有任何核心数据支持的情况下重用我现有的 SharePrice 结构。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:32:08.203

我强烈建议不要`NSManagedObject`在数据库上下文之外重新使用派生对象。在这里和那里重用几个字段的机会不值得失去这种方法所导致的清晰度。

问题是，您计划创建的聚合股价对象不代表股价 - 相反，它代表一段时间内的股价聚合。因此，使用同一个类来表示两种对象并不是一个好主意：它们在概念上是不同的。您的方法的另一个问题是，它`NSManagedObject`包含了很多在数据库上下文之外没有用的东西，例如对象 ID、对托管对象上下文的引用等等。让它们处于无意义的状态会误导任何维护您的应用程序的人。

# c# - 如何在 WPF 画布上显示可观察的集合项

> ID：11671328
> 
> 赞同：0
> 
> 时间：2012-07-26T14:18:32.380
> 
> 标签：c#, wpf, wpf-controls, observablecollection

我有一个绑定到数据网格的可观察集合。我可以动态地将标签、文本框等 wpf 控件创建到数据网格单元中，从而更新可观察的集合。

现在，我想在画布上以行和列的形式显示这些项目集合，就像在数据网格中一样。请帮我搞定。我正在使用如下代码。

```
ObservableCollection<Data> Items= this.Items as ObservableCollection<Data>;

              if (this.Items != null)
                    {                        
                        foreach (var element in this.Items)
                        {
                            if (element != null)
                            {
                                UIElement getitem = (UIElement)element.InputField;

             //where inputfield is a property which holds the control.                             
             // It eturns the control that has created.
                                canvas.Children.Add(getitem);//adding the control to canvas
                            }
                        }
                    } 
```

但它抛出异常（将控件添加到画布）如下。指定的 Visual 已经是另一个 Visual 的子级或 CompositionTarget 的根。

谢谢您的答复。

其中 Data 是一个定义如下的类。

公共类数据：INotifyPropertyChanged {

```
 private UIElement _uIElement; 
    public UIElement UIElement
    {
        get { return _uIElement; } 
        set 
        {
            if (value != _uIElement) 
            {
                _uIElement = value;
                this.OnPropertyChanged("UIElement"); 
            } 
        } 
    }

    private UIElement _inputField;
    public UIElement InputField 
    {
        get { return _inputField; } 
        set 
        {
            if (value != _inputField) 
            {
                _inputField = value;
                this.OnPropertyChanged("InputField"); 
            } 
        } 
    } 

    #region INotifyPropertyChanged Members 

    public event PropertyChangedEventHandler PropertyChanged; 

    protected virtual void OnPropertyChanged(string name) 
    { 
        if (this.PropertyChanged != null) 
        { 
            this.PropertyChanged(this, new PropertyChangedEventArgs(name)); 
        } 
    } 
```

} }

Inputfield 和 UIelement 属性是数据网格的 2 列，其中包含动态创建的控件信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:26:47.510

A`Visual`只能有一个父级，因此您必须首先将其从`ObservableCollection`（可能是您`DataGrid`的绑定到的）中删除....但是然后您将其放在您的`Canvas`而不是您的`DataGrid`.

因此，如果您尝试同时拥有`UIElement`s 集合的 2 个“视图”，那么您必须克隆元素，以便它们可以进入`Canvas`.

什么是“数据”类型……你能详细说明一下吗？

做事的首选方法是将您的模型/视图模型保留在集合中（而不是`UIElement`s），然后定义`DataTemplate`为这些数据类型定义视觉效果的 s。然后，您可以让`DataGrid`和`Canvas`都绑定到同一个数据集合，但是当应用 DataTemplates 时，它们每个都有自己的膨胀视觉对象。

请参阅以下链接：

*   [http://social.msdn.microsoft.com/forums/en-US/wpf/thread/0df6181d-938f-4f45-9463-5b5035b57000/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/0df6181d-938f-4f45-9463-5b5035b57000/)

*   [如何复制 UIElement 并保留布局/渲染信息？](https://stackoverflow.com/questions/5890298/how-to-copyclone-a-uielement-and-keep-the-layout-render-information)

*   [克隆 WPF 控件和对象层次结构](https://stackoverflow.com/questions/6766787/cloning-wpf-controls-and-object-hierarchies)

# wpf - 如何为 WPF 自定义控件设置主题

> ID：11671335
> 
> 赞同：0
> 
> 时间：2012-07-26T14:18:56.553
> 
> 标签：wpf, themes

我如何定义主题并将其应用于托管在 ElementHost 中的自定义控件。

VS 在 Themes 文件夹中创建了 Generic.xaml。如果我将其重命名为其他内容（如 Blue.xaml），则不会显示整个控件。

另一个问题是在 VS 中应该设置什么主题 xaml 文件：内容、页面还是资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:52:00.103

您应该始终定义 Generic.xaml。

复制它，然后更改您的 Blue.xaml 以定义您的“蓝色”主题。

构建操作 = 页面

当您使用 ElementHost 在 Windows 窗体应用程序中托管 WPF 控件时，您可能很难看到主题的变化。

看：

*   [http://www.actiprosoftware.com/community/thread/20266/how-to-get-themes-working-inside-an-elementho](http://www.actiprosoftware.com/community/thread/20266/how-to-get-themes-working-inside-an-elementho)

*   [动态应用程序级资源在 ElementHost 中托管时不是动态的](https://stackoverflow.com/questions/727141/dynamic-application-level-resources-are-not-dynamic-when-hosted-in-elementhost)

# javascript - 使用 CSS 媒体查询选择 JavaScript 元素

> ID：11671343
> 
> 赞同：0
> 
> 时间：2012-07-26T14:19:13.457
> 
> 标签：javascript, css, media, media-queries, screen-resolution

我正在一个网站上工作，该网站将提供一个单页，一个用 Adob​​e Edge 制作的幻灯片（导出为`.js`JavaScript 文件）。我还使用 CSS 媒体查询来调整网站上各种元素的大小，例如`<div>`基于屏幕分辨率的 s 和字体。我想为幻灯片做的是创建不同分辨率的多个版本；是否可以使用 CSS 媒体查询随后为每个屏幕分辨率选择适当的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:25:16.883

读回已知 CSS 声明的值，例如主外部元素的宽度。根据您在媒体查询中设置的 CSS，此值会有所不同。有了这个，你可以设置一个 JS 变量来确定使用哪个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:25:59.660

为不同的图像分辨率定义不同的尺寸，如下所示：

> @media only screen and (min-width:768px) and (max-width:1009px)

在媒体查询中，您将根据屏幕分辨率为不同元素定义不同的值。

# javascript - 如何根据先前的输入动态更改链接

> ID：11671352
> 
> 赞同：1
> 
> 时间：2012-07-26T14:19:35.727
> 
> 标签：javascript, html, iframe

在一个页面上，我得到了用户名，并且我将它（通过 Cookies）传递到第二个页面。

第二页有一个框架集

一帧是topframe.htm的链接

第二个框架应该指向一个网站，比如

```
http://localhost/id=username 
```

用户名不一样，每个人都不一样。那么如何让第二帧加载一个动态生成的 URL 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:24:52.843

您可以设置一个链接在同一个内打开`iframe`

```
<a target="_self" href="#" id="link" /> 
```

在获得输入后，执行此操作..

```
function setUserLink (usernameFromCookie){
.
.

    $('a#link').attr('href', 'http://localhost/id=' + usernameFromCookie);
.
.
} 
```

# android - 为什么 AsyncTask 不能正常工作？

> ID：11671353
> 
> 赞同：0
> 
> 时间：2012-07-26T14:19:40.010
> 
> 标签：android, android-asynctask

我做了一些 JSON 解析器，我想在同一个 ListView 中显示信息。我尝试使用 AsynkTask 但它没有用。

对于 ListView，我创建了从 ArrayAdapter 扩展的简单类 Plase 和 Adapter。

有我的代码：

```
import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

import java.io.*;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

public class ListActivity extends Activity {
    private static final String API_START = "http://api.yelp.com/business_review_search?location=";
    private static final String API_END = "&ywsid=mlNrKepTs01H6gB0yoIWrw";
    private String mRequestURL = "http://api.yelp.com/business_review_search?location=New%20York&ywsid=mlNrKepTs01H6gB0yoIWrw";
    public static ArrayAdapter<Place> mAdapter = null;
    private ListView mListView;
    ArrayList<Place> arrayList = new ArrayList<Place>();
    ProgressDialog dialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list);

       if (mRequestURL == null) {
           mRequestURL ="http://api.yelp.com/business_review_search?location=New%20York&ywsid=mlNrKepTs01H6gB0yoIWrw";
       }

       if (mAdapter==null && mRequestURL!=null) {
           new DownloadFilesTask().execute(mRequestURL, null, null);
           mAdapter = new Adapter(ListActivity.this, arrayList);
       }

        mListView = (ListView) findViewById(R.id.list);
        mListView.setAdapter(mAdapter);

    }

    private class DownloadFilesTask extends AsyncTask<String, Void, Void> {

        @Override
        protected void onPreExecute() {
            dialog = new ProgressDialog(ListActivity.this);
            dialog.setMessage("Please wait");
            dialog.setIndeterminate(true);
            dialog.setCancelable(true);
            dialog.show();

        }

        protected Void doInBackground(String... urls) {
            try {
                arrayList = parse(mRequestURL);
            } catch (IOException e) {
                e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            } catch (ParseException e) {
                e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            }
            return(null);
        }

      @Override
        protected void onPostExecute(Void places) {
            dialog.dismiss();
        }
    }

    private ArrayList<Place> parse(String u) throws IOException, ParseException {

        URL url = new URL(u);
        StringBuilder sb = new StringBuilder();
        URLConnection yc = url.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
        String s;
        while ((s=in.readLine()) != null)
            sb.append(s);
        in.close();

        JSONParser parser = new JSONParser();
            Object o = parser.parse(sb.toString());
            JSONObject jsonObject1 = (JSONObject) o;
            JSONArray jsonArray = (JSONArray) jsonObject1.get("businesses");
            for(int i=0; i<jsonArray.size(); i++) {
                JSONObject obj = (JSONObject) jsonArray.get(i);
                URL photo_url = new URL((String) obj.get("photo_url"));
                URL place_url = new URL((String) obj.get("url"));
                String name = (String) obj.get("name");
                String address = obj.get("city") + " " + obj.get("address1");
                long latitude = Long.parseLong((String) obj.get("latitude"));
                long longitude = Long.parseLong((String) obj.get("longitude"));
                arrayList.add(new Place(photo_url, name, address, place_url, latitude, longitude));
            }

        File file = new File("File.txt");
        ObjectOutputStream oout = new ObjectOutputStream(openFileOutput("File.txt" , 0));
        oout.writeObject(arrayList);
        oout.close();
        return arrayList;

    }

} 
```

我的应用程序因该错误而死：

```
07-26 14:23:04.246: ERROR/AndroidRuntime(9262): FATAL EXCEPTION: AsyncTask #1
        java.lang.RuntimeException: An error occured while executing doInBackground()
        at android.os.AsyncTask$3.done(AsyncTask.java:200)
        at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
        at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
        at java.util.concurrent.FutureTask.run(FutureTask.java:137)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
        at java.lang.Thread.run(Thread.java:1096)
        Caused by: java.lang.ClassCastException: java.lang.Double
        at com.example.ListActivity.parse(ListActivity.java:105)
        at com.example.ListActivity.access$200(ListActivity.java:20)
        at com.example.ListActivity$DownloadFilesTask.doInBackground(ListActivity.java:69)
        at com.example.ListActivity$DownloadFilesTask.doInBackground(ListActivity.java:55)
        at android.os.AsyncTask$2.call(AsyncTask.java:185)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
        ... 4 more
07-26 14:23:04.658: ERROR/WindowManager(9262): Activity com.example.ListActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f1be88 that was originally added here
        android.view.WindowLeaked: Activity com.example.ListActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f1be88 that was originally added here
        at android.view.ViewRoot.<init>(ViewRoot.java:247)
        at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
        at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
        at android.view.Window$LocalWindowManager.addView(Window.java:424)
        at android.app.Dialog.show(Dialog.java:241)
        at com.example.ListActivity$DownloadFilesTask.onPreExecute(ListActivity.java:63)
        at android.os.AsyncTask.execute(AsyncTask.java:391)
        at com.example.ListActivity.onCreate(ListActivity.java:46)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
        at android.app.ActivityThread.access$2300(ActivityThread.java:125)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:123)
        at android.app.ActivityThread.main(ActivityThread.java:4627)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:521)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
        at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:27:00.970

检查`latitude`和`longitude`，可能**`double`**不是`long`

```
 double latitude = obj.getDouble("latitude");
 double longitude = obj.getDouble("longitude"); 
```

**并将**适配器设置为列表视图`onPostExecute() method...`

```
 @Override
    protected void onPostExecute(Void places) {
        dialog.dismiss();

    mAdapter = new Adapter(ListActivity.this, arrayList);
    mListView = (ListView) findViewById(R.id.list);
    mListView.setAdapter(mAdapter);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:28:37.197

您应该`mListView.setAdapter(mAdapter);`放入`onPostExecute()`.

原因是`doInBackground()`在设置列表适配器时启动了一个可能未完成的新线程。`onPostExecute()`与 UI 线程同步，因此您可以修改 GUI 元素。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);

    mListView = (ListView) findViewById(R.id.list);

    if (mRequestURL == null) {
        mRequestURL ="http://api.yelp.com/business_review_search?location=New%20York&ywsid=mlNrKepTs01H6gB0yoIWrw";
    }

    if (mAdapter==null && mRequestURL!=null) {
        new DownloadFilesTask().execute(mRequestURL, null, null);
    }
}

private class DownloadFilesTask extends AsyncTask<String, Void, Void> {

    @Override
    protected void onPreExecute() {
        dialog = new ProgressDialog(ListActivity.this);
        dialog.setMessage("Please wait");
        dialog.setIndeterminate(true);
        dialog.setCancelable(true);
        dialog.show();

    }

    protected Void doInBackground(String... urls) {
        try {
            arrayList = parse(mRequestURL);
        } catch (IOException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        } catch (ParseException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }
        return(null);
    }

  @Override
    protected void onPostExecute(Void places) {
        mAdapter = new Adapter(ListActivity.this, arrayList);
        mListView.setAdapter(mAdapter);

        dialog.dismiss();
    }
} 
```

# integration - Alfresco 4 社区版 IMAP 集成

> ID：11671354
> 
> 赞同：0
> 
> 时间：2012-07-26T14:19:43.677
> 
> 标签：integration, imap, alfresco, alfresco-share

我正在使用 Alfresco 社区版 4.0.d

我是否可以将电子邮件从 OutLook 或任何其他邮件客户端拖放到 Alfresco Share

由于 Share 是一个 http 应用程序

这就是我无法从电子邮件客户端到 Alfresco Share 的原因。

请帮助我 - 我为此做了谷歌，我发现仅适用于 3.x 版本 imap 集成未找到 4.x 版本的任何帮助完整信息。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T15:54:24.553

IMAP 被记录为 Alfresco 官方文档的一部分。这是 Alfresco 4 上 IMAP 的一个不错的起点：http: [//docs.alfresco.com/4.0/topic/com.alfresco.enterprise.doc/concepts/imap-intro.html](http://docs.alfresco.com/4.0/topic/com.alfresco.enterprise.doc/concepts/imap-intro.html)

除非另有说明，docs.alfresco.com 上的所有文档均适用于企业版和社区版。

# c# - 如何提交带有隐藏字段的表单？

> ID：11671355
> 
> 赞同：3
> 
> 时间：2012-07-26T14:19:42.957
> 
> 标签：c#, asp.net, asp.net-mvc-3

假设我有以下经典asp的形式：

```
<form name="impdata" id="impdata" method="POST" action="http://www.bob.com/dologin.asp">
<input type="hidden" value="" id="txtName" name="txtName" />
</form> 
```

我需要在asp.net mvc3中模拟提交表单的动作，但是我需要在提交前修改隐藏值。是否可以通过动作或其他方式做到这一点？

我目前所拥有的...

看法：

```
@using (Html.BeginForm("Impersonate", "Index", FormMethod.Post, new { id = "impersonateForm" }))
{                       
    <input id="Impersonate" class="button" type="submit" value="Impersonate" action />
    <input type="hidden" value="" id="txtName" name="txtName" />
} 
```

控制器：

```
[HttpPost]
public ActionResult Impersonate(string txtName)
{
txtName = txtName + "this string needs to be modified and then submitted as a hidden field";  
//Redirect won't work needs the hidden field
//return Redirect("http://www.bob.com/dologin.asp");
} 
```

**解决方案：**

似乎从控制器中做到这一点并不容易，所以我最终使用了 jQuery。该操作返回一个 JsonResult。就像是：

```
<button id="Impersonate" class="button" onclick="Impersonate()">Impersonate!</button>

<form name="impdata" id="impersonateForm" action="http://www.bob.com/dologin.asp">
  <input type="hidden" value="" id="txtName" name="txtName" /> 
</form>

function Impersonate() {           
    $.ajax({
        type: 'POST',
        asynch: false,
        url: '@Url.Action("Impersonate", "Index")',
        data:
            {
                name: $('#txtName').val()                    
            },
        success: function (data) {                
            $('#txtName').val(data.Name);              
            $('#impersonateForm').submit();               
        }
    }); 
```

似乎运作良好...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:27:40.690

从 POST 重定向到 POST 是相当困难的（依赖于没有通用支持的 HTTP 状态代码），并且从 GET 中重定向是不可能的。

最简单的解决方案可能是在发布（新）表单的结果上添加一点 JavaScript。

因此，您的操作方法返回一个视图，其中包含必要的数据（通过模型从控制器传递），其中将包括 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:03:11.863

您可以尝试这样的事情（使用 jquery）：

```
<input id="Impersonate" class="button" type="submit" value="Impersonate"    onclick="$('#txtName').val('new value')" /> 
```

# javascript - removeAttr() 未应用？

> ID：11671363
> 
> 赞同：1
> 
> 时间：2012-07-26T14:20:11.053
> 
> 标签：javascript, jquery, zepto

我正在为我当前的项目使用 zepto.js，它具有与`removeAttr()`jquery 相同的方法。

我正在将 a`margin-top`应用于一堆元素 - 工作正常。

```
var $apply = $('aside[role="sub"], aside[role="event-info"], aside[role="attend"]');
$apply.css('margin-top', '100px'); //works fine 
```

但是，我还需要在调整大小事件中再次删除它。

```
if ( $(window).width() <= 984 ) {
    //$apply.removeAttr('style'); //doesn't take effect
    $apply.css('margin-top', '0'); //works fine
    console.log('< 984');       
} 
```

所以我可以设置`margin-top`回，`0`但不能从选择器中完全删除样式属性。

任何想法为什么？我没有得到任何错误，它只是没有生效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:25:18.443

来自[http://api.jquery.com/css/](http://api.jquery.com/css/)

> **将样式属性的值设置为空字符串 — 例如 $('#mydiv').css('color', '') —** 如果该属性已被直接应用，则从元素中删除该属性，无论是在 HTML 样式中属性，通过 jQuery 的 .css() 方法，或者通过 style 属性的直接 DOM 操作。*但是，它不会删除在样式表或元素中使用 CSS 规则应用的样式。*

所以你可以使用`$apply.css('margin-top', '')`删除`margin-top`样式。

用于`.removeClass()`从元素中删除所有样式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T14:25:39.597

删除它的正确方法是在使用`.css`.

```
$apply.css('margin-top', ''); // remove property 
```

> 当某个属性的值为空时，该属性将被删除。

[在这里](http://zeptojs.com/#css)阅读更多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T14:27:30.850

我建议创建一个您添加和删除的 CSS 类。这样，您可以轻松地在一个位置修改边距值，而不必在多个位置进行更改。

CSS：

```
.myMargin { margin-top : 100px; } 
```

JS：

```
var $apply = $('aside[role="sub"], aside[role="event-info"], aside[role="attend"]');
$apply.addClass("myMargin"); 
```

在调整大小事件中：

```
if ( $(window).width() <= 984 ) {
    $apply.removeClass("myMargin");
    console.log('< 984');       
} 
```

# javascript - Sencha Touch 2：Facebook JS SDK 无法在设备上运行，只能在计算机浏览器中运行

> ID：11671365
> 
> 赞同：6
> 
> 时间：2012-07-26T14:20:20.443
> 
> 标签：javascript, facebook, extjs, sdk, sencha-touch

我正在开发一个使用 Facebook JavaScript SDK 在列表中显示 Facebook 提要的 Sencha Touch 2 应用程序。在我的浏览器（本地主机）中它运行良好，但是当我在我的设备（iPad 的 iPhone）上启动我的应用程序时，提要没有加载。当我在设备上的 Safari 中通过 localhost 打开它时也没有。

当我在 iPhone 上使用 Safari 控制台时，它会显示两个未出现在我的计算机上的日志：

“第 44 行的 JavaScript 日志文件：[http](http://connect.facebook.net/en_US/all.js) ://connect.facebook.net/en_US/all.js：从[https://s-static.ak.facebook.com](https://s-static.ak.facebook.com)接收到对象类型的消息，需要一个字符串”

这是造成问题的原因吗？也许我的设备无法识别 Javascript SDK 的 FB 功能？

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:19:27.270

您在哪里定义 fb 的脚本以及定义的 div fb-root 在哪里我之前遇到过同样的问题，但这是因为 div 总是被另一个视图覆盖或覆盖，所以请检查您是否可以发布一些代码会更好，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T11:20:46.447

您是否已将 fb 域添加到应用程序 url 白名单？我有类似的问题，通过将 fb 域添加到配置文件的访问源标记来解决。

# jquery - 并非所有标记都显示在 Google Maps API 中

> ID：11671368
> 
> 赞同：1
> 
> 时间：2012-07-26T14:20:34.300
> 
> 标签：jquery, google-maps

我知道有很多关于这个问题的话题，但我已经尝试了一切，仍然没有解决我的问题。

我正在尝试根据他们的位置在谷歌地图上显示我的成员。问题是虽然注册了 34 个成员，但只显示了 15-22 个（每次刷新时随机选择）标记。

地址的地理编码正确，因为如果我进入会员页面，它的标记会正确显示在地图上。我相信这是数据加载的一些问题，但我不知道如何解决它。

我在 Joomla 网站上使用 swmap 插件。JQuery 代码如下所示。

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true&language='.$locale.'"></script> 
    <script type="text/javascript">
    window.addEvent("load",function(){initialize();});
    var beaches = '.json_encode($res).';
    function initialize() {
        var myLatlng = new google.maps.LatLng('.$lat_center.', '.$long_center.');
        var myOptions = {
        zoom: 10,
        center: myLatlng,
        mapTypeControl: true,
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
        navigationControl: true,
        mapTypeId: google.maps.MapTypeId.'.$cattype.'
        }

        var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
        google.maps.event.addListener(map, \'click\', function() {
        infowindow.close();
        });
        setMarkers(map, beaches);
    }

        var icons = new Array();
        icons["red"] = new google.maps.MarkerImage("'. JURI::root() .'plugins/k2/swmap/'.$color.'/landmark.png",
        new google.maps.Size(32, 32),
        new google.maps.Point(0,0),
        new google.maps.Point(0, 32));

    function getMarkerImage(iconColor) {
    if ((typeof(iconColor)=="undefined") || (iconColor==null)) {
    iconColor = "red";
    }

    if (!icons[iconColor]) {
    icons[iconColor] = new google.maps.MarkerImage("'. JURI::root() .'plugins/k2/swmap/'.$color.'/"+ iconColor +"",
    new google.maps.Size(32, 32),
    new google.maps.Point(0,0),
    new google.maps.Point(0, 32));
    }

    return icons[iconColor];
    }

    var iconImage = new google.maps.MarkerImage(\''. JURI::root() .'plugins/k2/swmap/'.$color.'/landmark.png\',
    new google.maps.Size(32, 32),
    new google.maps.Point(0,0),
    new google.maps.Point(0, 32));

    var infowindow = new google.maps.InfoWindow(
    {
    size: new google.maps.Size(150,50)
    });

    function createMarker(map, latlng, label,link, html, color) {

        var contentString = \'<b>\'+link+\'</b><br>\'+html;
        var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        icon: getMarkerImage(color),
        title: label,
        zIndex: Math.round(latlng.lat()*-100000)<<5
    });

    google.maps.event.addListener(marker, \'click\', function() {
    infowindow.setContent(contentString);
    infowindow.open(map,marker);
    });
}

function setMarkers(map, locations) {
    var bounds = new google.maps.LatLngBounds();
    for (var i = 0; i < locations.length; i++) {
    var beach = locations[i];
    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
    var marker = createMarker(map,myLatLng,beach[0],beach[5],beach[4],beach[3]);
    bounds.extend(myLatLng);
    map.fitBounds(bounds);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:18:36.163

请参阅[文档中有关地理编码策略的这篇文章](https://developers.google.com/maps/articles/geocodestrat)

最佳做法是存储不变的位置坐标并使用它们来显示标记。使用客户端地理编码器仅对用户输入时输入的信息进行地理编码。

# eclipse - Perl 在调试器中或作为 Win32::Daemon 时不执行命令

> ID：11671370
> 
> 赞同：2
> 
> 时间：2012-07-26T14:20:34.483
> 
> 标签：eclipse, perl, activeperl, epic

## 概要

我从 Perl 执行一个 shell 命令，当从命令行运行时它可以工作，但是在调试器中运行时它不起作用。作为 Win32::Daemon 运行它会显示相同的行为。

## 源代码

我用反引号执行命令

```
print `$cmd` 
```

或像这样：

```
open FH, "$cmd |" or die "Couldn't execute $cmd: $!\n"; 
    while(defined(my $line = <FH>)) {
        chomp($line);
        print "$line\n";
    }
close FH; 
```

该命令如下所示：

```
$cmd = '"C:\path\to\sscep.exe" getca -f "C:\path\to\config\capi_sscep.cnf"' 
```

即使创建一个只执行此命令的小型测试脚本也只有在从命令行运行时才有效。

## 系统

*   视窗 x64
*   Active Perl v5.16.0，MSWin32-x64-多线程
*   日食朱诺号 20120614-1722

## 什么有效

我努力打开管理员提示符（脚本执行所必需的）并：

```
perl script.pl 
```

输出被打印到屏幕上，`$?`是`0`.

## 什么不起作用

`perl script.pl`启动 Eclipse 并使用相同的调用运行调试会话。添加服务并执行命令（使用 Win32::Daemon 创建）也不起作用。守护进程本身运行良好，并按预期启动 perl 脚本。只有命令不会被执行。`$?`is`13568`或`53`如果用 移位`$? >> 8`，则不打印任何输出。退出代码不属于该程序。

## 更多详细信息

我调用的工具称为*sscep*，由我扩展。它使用 OpenSSL API 并加载 capi 引擎 (Windows CryptoAPI)。但是命令本身至少会在任何严重的操作开始之前打印输出。我可以很乐意为此提供源代码，但我怀疑它会有所帮助。

我能够进一步缩小范围：问题仅存在于 Perl 程序 (CertNanny) 和二进制文件 (sscep) 的组合中。在CertNanny`dir`内部调用有效，`sscep`在测试 Perl 脚本中调用也有效。那么在 Perl 中可以做些什么来阻止单个二进制文件被调用......？

这个问题可能源于的任何想法或我如何**缩小范围**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:59:53.657

这就是我认为的问题所在：当您在命令行上运行程序时，system() 命令会通过 shell (cmd.exe)；当您在其他地方运行程序时，它不会。不幸的是，这两种方法处理命令行参数的方式不同。 [这是一篇似乎可以帮助您解决问题的文章](http://blogs.perl.org/users/graham_knop/2011/12/using-system-or-exec-safely-on-windows.html)。

以我的经验，这种事情在 Windows 中是一团糟。我在 Perl 中也遇到了这个问题。

# c - 指向 __local 结构中的 __global 内存的指针

> ID：11671375
> 
> 赞同：2
> 
> 时间：2012-07-26T14:20:46.543
> 
> 标签：c, macos, opencl

我对 OpenCL 编译器对存储在本地内存中的结构内指向全局内存的指针的响应感到困惑。这是一个最小的测试用例：

```
struct Helper {
    unsigned char bytes[32769];
};

struct Main {
    __global struct Helper *h;
};

void __kernel test(void)
{
    __local struct Main m;
} 
```

这在 clBuildProgram 期间失败，并出现错误`CL_BUILD_PROGRAM_FAILURE`。但是，将上面的幻数从`32769`更改为较小的数字允许程序编译。

失败时`clBuildProgram`，不会通过`clGetProgramBuildInfo(… CL_PROGRAM_BUILD_LOG)`. 系统日志中未报告任何错误。

32k 恰好是我的显卡（AMD Radeon HD 6750M）上每个计算单元的本地内存量。但正如你所看到的，我正在存储一个*指向*这个大型结构的指针，该结构将存储在全局内存中。我没有尝试在本地内存中创建结构本身。那么，为什么指向结构的大小会有所不同呢？

这个故障发生在我运行 OS X 10.8 的 Macbook Pro 上，并且在早期版本的 OS X 上也发生了故障。但是，它在我的带有 NVidia 显卡的 Linux 机器上成功编译。

我的驱动程序在[这里](http://www.nyloncactus.com/random/test.c)。（这只是 Apple 的带有更改内核的演示程序）。它使用 gcc -o test test.c -framework OpenCL 在 OS X 上编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T05:31:36.093

在 AMD 硬件 6970 上，我查看了内核生成的 ISA 代码，但它是 NOOP，所以我认为内核不会被执行，因为没有指令只有初始化

ISA 视图。

```
; --------  Disassembly --------------------

00 NOP NO_BARRIER 
END_OF_PROGRAM 
```

伊利诺伊州的视图

```
 ;ARGEND:__OpenCL_test_kernel
        func 1026 ; test                        ; @__OpenCL_test_kernel
        ; BB#0:                                 ; %entry
    ret_dyn
ret
endfunc ; test 
```

# python - 我什么时候应该在 django 中使用 user.get_profile？

> ID：11671378
> 
> 赞同：5
> 
> 时间：2012-07-26T14:20:50.523
> 
> 标签：python, django, view, model, profile

[我在这里](https://stackoverflow.com/questions/1823588/django-updating-a-user-profile-with-a-modelform)和网络上的其他地方看到了另一个答案 ，建议在扩展内置 django 用户时使用 user.get_profile 。在下面的示例中，我没有这样做。该功能似乎运行良好，但不使用 user.get_profile() 有缺点吗？

# 模型

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, primary_key=True)
    quote = models.CharField('Favorite quote', max_length =  200, null=True, blank=True)
    website = models.URLField('Personal website/blog', null=True, blank=True)

class UserProfileForm(ModelForm):
    class Meta:
        model = UserProfile
        fields = ('quote', 'website') 
```

# 看法

```
@login_required 
def user_profile(request):
    user = User.objects.get(pk=request.user.id)
    if request.method == 'POST':
        upform = UserProfileForm(request.POST)
        if upform.is_valid():
            up = upform.save(commit=False)
            up.user = request.user
            up.save()
            return HttpResponseRedirect('/accounts/profile')
    else:
        upform = UserProfileForm()
    return render_to_response('reserve/templates/edit_profile.html', locals(), context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:28:23.577

代码按照您编写的方式工作，但是由于您没有将实例传递给模型，这有点不寻常，因此可能需要另一个 Django 开发人员更长的时间才能弄清楚发生了什么。

您链接到的视图使用实例实例化模型表单，以便现有配置文件值显示在表单中。在您的情况下，您将获得空字段。

```
upform = UserProfileForm(instance=user.get_profile()) 
```

因为您不提供实例，所以保存会尝试创建一个`user_profile`我们不想要的新的。在您的情况下不会发生这种情况，因为您已经创建`user`了主键，但这也有点不寻常。

编写的主要优点`user.get_profile()`是您不需要知道用户配置文件使用哪种模型。如果您乐于在代码中对`UserProfile`模型进行硬编码，则可以`instance=UserProfile.objects.get(user=user)`改用。

# android - Eclipse Android 不见了

> ID：11671379
> 
> 赞同：1
> 
> 时间：2012-07-26T14:20:51.737
> 
> 标签：android, eclipse

今天没有做任何事情，我打开了 Eclipse 并且不再安装 Android 开发者工具。也就是说，在 Window 选项卡下方应出现所有选项 Android SDK 和 AVD Manager Manager。

好像被删了一样。但是，我返回完成安装它的所有步骤，但仍然看不到 Android 选项。你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:27:17.557

尝试使用

```
- clean
```

选项。

如果您在 Windows 上，请修改 eclipse 的开始图标以通过

```
- clean
```

作为命令行参数

# c# - 捕获/修改（消息）/重新抛出相同类型的异常

> ID：11671381
> 
> 赞同：8
> 
> 时间：2012-07-26T14:20:59.740
> 
> 标签：c#, exception, casting, throw

我想要一个从异常中提取信息的中心位置，将我需要的所有信息设置为其消息参数，然后将该信息作为相同类型的异常重新抛出。

更好的解决方案可能是在最终处理异常（并记录其消息）的地方执行此操作，但是..我可以控制抛出异常的地方，而不是接收异常的地方，并且只有记录其消息内容。

除了该设计决策并且鉴于该消息是只读属性，我将（？）以某种方式创建一个新的异常对象，有没有办法使新的异常对象与原始对象的类型相同？

这是我的代码，它无法编译 - 它在抛出线（我尝试动态转换对象）上绊倒。

```
public static void RethrowExceptionWithFullDetailInMessage(string msg, Exception ex)
{
    Exception curEx = ex;
    int cnt = 0;
    while (curEx != null)
    {
        msg += "\r\n";
        msg += cnt++ + " ex.message: " + curEx.Message + "\r\n";
        msg += "Stack: " + curEx.StackTrace;
        curEx = curEx.InnerException;
    }
    object newEx = Convert.ChangeType(new Exception(msg), ex.GetType());
    throw (ex.GetType())newEx;
} 
```

做这个

```
throw (Exception)newEx; 
```

保留类型？（它编译。）

Convert.ChangeType 是否确保我得到正确类型的异常？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T14:30:06.417

您在这里尝试做的事情并不像看起来那么容易，并且有很多陷阱需要考虑。

请记住，Convert.ChangeType() 会将一种类型转换为另一种类型（假设存在这样的路径，例如将字符串转换为 int）。大多数例外都不会这样做（他们为什么会这样做？）

为了实现这一点，您必须在运行时使用 GetType() 方法检查异常类型，并找到具有您可以满足的要求的构造函数并调用它。在这里要小心，因为您无法控制*所有*异常的定义方式，因此无法保证您可以访问“标准”构造函数。

话虽这么说，如果你想成为一个打破规则的人，你可以做这样的事情......

```
void Main()
{
    try
    {   
        throw new Exception("Bar");
    }
    catch(Exception ex)
    {
        //I spit on the rules and change the message anyway
        ex.GetType().GetField("_message", BindingFlags.Instance | BindingFlags.NonPublic).SetValue(ex, "Foo");
        throw ex;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T14:27:26.010

您可以这样做以动态调用异常类型的构造函数：

```
object newEx = Activator.CreateInstance(ex.GetType(), new object[] { msg }); 
```

您的原始代码将在运行时失败，因为要工作`Convert.ChangeType`，异常类型必须实现`IConvertible`并支持转换为其他异常类型，我对此表示怀疑。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-22T22:53:28.290

可能有点晚了，但这对你有用吗？

```
catch (Exception ex)
{
    throw new Exception("New message", ex);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-05T11:35:54.057

您可以像这样通过反射更改异常消息...

```
Exception exception = new Exception("Some message.");
var type = typeof(Exception);
var flags = BindingFlags.Instance | BindingFlags.NonPublic;
var fieldInfo = type.GetField("_message", flags);
fieldInfo.SetValue(exception, message); 
```

所以你可以创建一个扩展方法......

```
namespace ExceptionExample
{
    public static class ExceptionExtensions
    {
        public static void SetMessage(this Exception exception, string message)
        {
            if (exception == null)
                throw new ArgumentNullException(nameof(exception));

            var type = typeof(Exception);
            var flags = BindingFlags.Instance | BindingFlags.NonPublic;
            var fieldInfo = type.GetField("_message", flags);
            fieldInfo.SetValue(exception, message);
        }
    }
} 
```

然后用它...

```
...
using static ExceptionExample.ExceptionExtensions;

public class SomeClass
{
    public void SomeMethod()
    {
        var reader = AnotherClass.GetReader();
        try
        {
            reader.Read();
        }
        catch (Exception ex)
        {
            var connection = reader?.Connection;
            ex.SetMessage($"The exception message was replaced.\n\nOriginal message: {ex.Message}\n\nDatabase: {connection?.Database}");
            throw; // you will not lose the stack trace
        }
    }
} 
```

你必须记住，**如果你使用“throw ex;” 堆栈跟踪将丢失**。

为避免这种情况**，您必须使用“throw;” 无一例外**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-14T16:56:24.610

补充评论。

这些都可以补充异常消息，但我发现使用“throw”并没有保留 StackTrace - 最后一个跟踪指向实际的“throw”语句（删除根本原因位置）。

从其他地方的讨论中，很明显，由于 CLR 堆栈限制，某些情况下 throw 不会保留

[抛出并保留堆栈跟踪不像代码分析所描述的那样](https://stackoverflow.com/questions/20147929/throw-and-preserve-stack-trace-not-as-expected-as-described-by-code-analysis)

解决方案：在每个异常中转储 StackTrace（例如并添加到错误消息中）和/或转储到日志记录

# php - 将用户输入转换为 UTF-8 的最佳方法

> ID：11671382
> 
> 赞同：9
> 
> 时间：2012-07-26T14:21:01.877
> 
> 标签：php, character-encoding

我正在构建一个 PHP Web 应用程序，它以 UTF-8 工作。数据库是 UTF-8，页面以 UTF-8 提供，我使用元标记将字符集设置为 UTF-8。当然，对于使用 Internet Explorer 以及从 Microsoft Office 复制和粘贴的用户，我偶尔会设法获得非 UTF-8 输入。

理想的解决方案是抛出`HTTP 400 Bad Request`错误，但显然我不能这样做。下一个最好的事情是将`$_GET`,`$_POST`和转换`$_REQUEST`为 UTF-8。无论如何可以查看输入的字符编码，以便我可以将其传递给`iconv`？如果没有，这样做的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T14:28:32.497

查看[`mb_detect_encoding()`](http://php.net/manual/en/function.mb-detect-encoding.php) 示例：

```
$utf8 = iconv(mb_detect_encoding($input), 'UTF-8', $input); 
```

*如果*您保证字符串作为 ISO-8859-1 输入，也有可能。[`utf8_encode()`](http://php.net/manual/en/function.utf8-encode.php)

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T22:00:56.970

在某些情况下，仅使用 utf8_encode 或常规检查是可以的，但您可能会丢失字符串中的一些字符。如果您可以根据各种类型构建一个基本的数组/字符串列表，这个例子是 windows，您可以节省更多。

```
if(!mb_detect_encoding($fileContents, "UTF-8", true)){
    $checkArr = array("windows-1252", "windows-1251");
    $encodeString = '';
    foreach($checkArr as $encode){
        if(mb_check_encoding($fileContents, $encode)){
            $encodeString .= $encode.",";
        }
    }
    $encodeString = substr($encodeString, 0, -1);
    $fileContents = mb_convert_encoding($fileContents, "UTF-8", $encodeString);
} 
```*

# microsoft-sync-framework - 使用 Microsoft 同步框架将两个表同步为一个读取表

> ID：11671383
> 
> 赞同：0
> 
> 时间：2012-07-26T14:21:02.460
> 
> 标签：microsoft-sync-framework

我有两个要同步到读取 sql 数据库的 sql server 表。我想使用同步框架将源数据库中的数据展平到读取数据库中的一个表中。我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:37:33.217

源和目标中的模式需要匹配。您可以添加一个视图来连接源数据库中的两个源表，并以您的“读取”数据库所期望的相同格式显示数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:17:22.987

如果您使用的是较旧的提供程序（与 VS 本地数据库缓存项目项使用的相同），您可以在服务器端使用视图，但是，您的客户端只能是 SQL Ce。但即使这很棘手，如果两个源表上可能发生更改，什么构成更改的行？如果表 1 已更新而表 2 未更新，反之亦然？

SqlSyncProvider 的较新提供程序不支持视图，因为它的更改跟踪基于触发器，并且整个配置针对表工作。

@Scott，模式或表结构不需要匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:34:39.927

我想我也在尝试做同样的事情。这是我在stackoverflow上的问题： [Merging 2 tables in a single table with different schema](https://stackoverflow.com/questions/11673708/merging-2-tables-in-a-single-table-with-different-schema)

我在这个问题上工作了一段时间，并取得了一些结果......现在，我正在研究仅在 PERSON 表中跟踪更改的情况（因此，如果 ADDRESS 中的某些更改不同步） . 但我想代码也可以改进以跟踪 ADDRESS 的变化......现在我没有考虑目标数据库（在 CUSTOMER 表中）的变化。这将更难以编码，我想......

无论如何，我的解决方案向 changesSelected 添加了一个处理程序，在那里我更改了 DataTable 添加我需要的列（地址和城市）。我通过 sql SELECT 获取地址和城市并更新行...这适用于更新和插入的行...删除行会引发问题。在我的 db CUSTOMER 中，主键必须是 Id-Address，而不仅仅是 Id（或者我不能为每个人拥有多个 ADDRESS）。因此，当 SyncFX 尝试执行删除时，键不匹配并且删除不会影响任何行...我不知道如何更改状态已删除的 DataRow，我也无法获得来自 db 的地址...所以我不能在已删除的 DataRow 中包含 Id-Address 信息...现在，我只能使用 ID 执行 sql DELETE（已删除行的唯一可用信息）.. .

请尝试改进代码并回帖，以便我们互相帮助！

这是代码。首先是 addhandler，然后是处理程序中的代码。

```
 AddHandler remoteProvider.ChangesSelected, AddressOf remoteProvider_ChangesSelected 
```

...

```
Private Shared Sub remoteProvider_ChangesSelected(ByVal sender As Object, ByVal e As DbChangesSelectedEventArgs)

        If (e.Context.DataSet.Tables.Contains("PersonGlobal")) Then
            Dim person = e.Context.DataSet.Tables("PersonGlobal")

            Dim AddressColumn As New DataColumn("Address")
            AddressColumn.DataType = GetType(String)
            AddressColumn.MaxLength = 10
            AddressColumn.AllowDBNull = False
            'NULL is not allowed, so set a defaultvalue
            AddressColumn.DefaultValue = "Nessuna"

            Dim CityColumn As New DataColumn("City")
            CityColumn.DataType = GetType(String)
            CityColumn.AllowDBNull = False
            CityColumn.DefaultValue = 0

            persona.Columns.Add(AddressColumn)
            persona.Columns.Add(CityColumn)

            Dim newPerson = person.Clone()

            For i = 0 To person.Rows.Count - 1 Step 1

                Dim row = person.Rows(i)

                If (row.RowState <> DataRowState.Deleted) Then
                    Dim query As String = "SELECT * FROM dbo.address WHERE Id = " & row("AddressId")

                    Dim sqlCommand As New SqlCommand(query, serverConn)
                    serverConn.Open()
                    Dim reader As SqlDataReader = sqlCommand.ExecuteReader()
                    Try
                        While reader.Read()
                            row("Address") = CType(reader("Address"), String)
                            row("City") = CType(reader("City"), String)
                            ' Solo importando mantengo i valori di RowState
                            newPerson.ImportRow(row)
                        End While
                    Finally
                        reader.Close()
                    End Try
                    serverConn.Close()
                Else
                    ' TODO - Non funziona la cancellazione!!!
                    ' La cancellazione cerca la chiave primaria su cliente, che è ID-Via
                    ' Noi abbiamo l'ID corretto, ma "nessuna" come via...
                    ' Dobbiamo recuperare la via giusta...

                    Dim query As String = "DELETE FROM dbo.customer WHERE Id = " & row("Id", DataRowVersion.Original)

                    Dim sqlCommand As New SqlCommand(query, clientConn)
                    clientConn.Open()
                    sqlCommand.ExecuteNonQuery()
                    clientConn.Close()
                End If
            Next

            newPerson.Columns.Remove(newPerson.Columns("AddressId"))

            e.Context.DataSet.Tables.Remove(person)
            e.Context.DataSet.Tables.Add(newPerson)
        End If

    End Sub 
```

# c# - 非托管 DLL 导致 AccessViolationException

> ID：11671385
> 
> 赞同：2
> 
> 时间：2012-07-26T14:21:14.847
> 
> 标签：c#, c++, dll, interop

这个真的开始让我头疼:(

我有一个非托管 DLL，我正在尝试与之互操作，但运行不顺利。该应用程序有时会工作......但大多数时候，随机通过 AccessViolationException 并可怕地崩溃。

我想我已经把它缩小到我对单个 DllImport 的错误处理：

C++ 函数：

```
HTMLRENDERERDLL_REDIST_API void SetDataBuffer( int windowHandle, unsigned char* dataSource, int format, int stride, int totalBufferSize ); 
```

C# DLL 导入：

```
[DllImport("MyDll.dll", ExactSpelling = true, CallingConvention = CallingConvention.Cdecl)]
    static private extern unsafe void SetDataBuffer(Int32 windowHandle, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] byte[] dataSource, Int32 format, Int32 stride, Int32 totalBufferSize); 
```

调用上述函数：

```
var buffer = new byte[windowWidth * windowHeight * bytesPerPixel];
SetDataBuffer(windowHandle, buffer, (Int32)0, (Int32)(windowWidth * bytesPerPixel), (Int32)(windowWidth * windowHeight * bytesPerPixel)); 
```

这有什么明显的问题吗？我怀疑这`dataSource`是罪魁祸首，但......不知道如何证明！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T10:52:00.043

您的问题可以从函数的名称中推断出来。当您“设置缓冲区”时，本机代码很可能稍后会使用该缓冲区。这与垃圾收集器不兼容，它会在压缩堆时移动数组。当本机代码写入缓冲区时，这是一个很大的 Kaboom，它将写入不再存在的内存。当垃圾收集器检测到堆完整性受到损害时，最典型的结果是 FatalExecutionEngineException。

需要固定数组，这是 pinvoke 编组器在调用函数时所做的事情，但它会在调用后*取消固定*数组。

您可以使用 GCHandle.Alloc() 固定托管数组，但如果您长时间固定它，这对垃圾收集器非常不利。到目前为止，最好的解决方案是使用 Marshal.AllocHGlobal 分配一块非托管内存，它永远不会移动。

如果您仍然遇到问题，请担心缓冲区的大小。而且只是原生代码中的简单痛苦，它很少需要太多帮助才能在 AccessViolation 上摔倒。这是本机代码的标准故障模式。很难诊断，如果你没有源代码就不可能。联系代码所有者寻求支持，提供一个小的重现片段来帮助他找到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:51:31.180

我同意数据源很可能是问题所在。

尝试更改 dllimport，使其使用 IntPtr 而不是 byte[]。

```
[DllImport("MyDll.dll", ExactSpelling = true, CallingConvention = CallingConvention.Cdecl)]
static private extern unsafe void SetDataBuffer(Int32 windowHandle, IntPtr dataSource, Int32 format, Int32 stride, Int32 totalBufferSize); 
```

然后当你调用它时，显式地为缓冲区分配内存，如下所示：

```
IntPtr buffer = Marshal.AllocHGlobal(windowWidth * windowHeight * bytesPerPixel);
SetDataBuffer(windowHandle, buffer, (Int32)0, (Int32)(windowWidth * bytesPerPixel), (Int32)(windowWidth * windowHeight * bytesPerPixel)); 
```

完成后不要忘记打电话`Marshal.FreeHGlobal(buffer)`。

我认为缓冲区正在由 Update 方法在内部使用？

# batch-file - 我有一个小缓存，将字符串设置为注册表值

> ID：11671387
> 
> 赞同：0
> 
> 时间：2012-07-26T14:21:14.830
> 
> 标签：batch-file

我正在尝试这个：

```
@echo off
reg add HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run\ /v siavash /t   REG_SZ /d "c:arda1" /f 
start explorer.exe
pause 
```

但我在注册表中得到这个 c:arda1 没有双引号有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:10:54.007

这是预期的。引号用于引用您要添加的字符串，它们主要用于字符串有空格的情况，但即使没有空格也一样。

如果你想在字符串周围添加引号，那么试试这个

```
"\"c:arda1\"" 
```

`\"`是符号的转义字符，外部`"`引号只是正常引用整个字符串。

希望这可以帮助。

# arrays - 将 QueryString 保存到 MS SQL DB 现在需要将其转换为字符串/数组吗？

> ID：11671388
> 
> 赞同：0
> 
> 时间：2012-07-26T14:21:15.530
> 
> 标签：arrays, asp-classic, vbscript

我已经将一个非常大的 QueryString 保存到 MS SQL 列中，该字符串看起来像这样：

```
&s1=Toledo,OH&s2=Chicago,IL&s3=Madison,WI.....and so on... 
```

我希望能够在 ASP-Classic 中做/拥有这样的事情：

```
Dim s1,s2,s3,s4....and son on...

s1="Toledo,OH"
s2="Chicago,IL"
s3="Madison,WI"
.....and son on..... 
```

我希望能够像调用 QueryString 一样调用它们，例如 QueryString 调用将是 Request.QueryString("s1") 或者我可以使用 Do 并循环所有 Request.QueryString("s" & i) 直到查询=“”然后我会退出Do。

但是，如果我将 query.string 保存到 MS DB 列中，我将如何实现这一切？

请帮忙，

谢谢...

**我不断收到此错误：变量未定义：'s1'，我在这里做错了什么？**

```
 Function qq(s)
      qq = """" & s & """"
    End Function ' qq

    Dim sInp    : sInp        = objRSConnSAVE("QSTRING")
      Dim dicData : Set dicData = Server.CreateObject("Scripting.Dictionary")
      Dim oRE     : Set oRE     = New RegExp
      oRE.Global  = True
      oRE.Pattern = "&([^=]+)=([^&]*)"
      Dim oMTS    : Set oMTS    = oRE.Execute(sInp)
      Dim oMT
      For Each oMT In oMTS
          dicData(oMT.SubMatches(0)) = oMT.SubMatches(1)
      Next

      Dim sKey, sValue
        For Each sKey In dicData.Keys
          sValue = dicData(sKey)
         '''// Response.write qq(sKey) & "=>" & qq(sValue)

      Next

    Response.write "TEST" & s1
   '// I even tried Response.write "TEST" & s(1) same error, how do I call it ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:37:27.153

使用 RegExp（而不是 Split）和字典（而不是一堆标量变量）：

```
 Dim sInp    : sInp        = "&s1=Toledo,OH&s2=Chicago,IL&s3=Madison,WI"
  Dim dicData : Set dicData = CreateObject("Scripting.Dictionary")
  Dim oRE     : Set oRE     = New RegExp
  oRE.Global  = True
  oRE.Pattern = "&([^=]+)=([^&]*)"
  Dim oMTS    : Set oMTS    = oRE.Execute(sInp)
  Dim oMT
  For Each oMT In oMTS
      dicData(oMT.SubMatches(0)) = oMT.SubMatches(1)
  Next
  Dim sKey, sValue
  For Each sKey In dicData.Keys
      sValue = dicData(sKey)
      WScript.Echo qq(sKey), "=>", qq(sValue)
  Next 
```

输出：

```
"s1" => "Toledo,OH"
"s2" => "Chicago,IL"
"s3" => "Madison,WI" 
```

**更新：**

qq() 是一个双引号字符串的函数：

```
Function qq(s)
  qq = """" & s & """"
End Function ' qq 
```

**更新二：**

用于`dicData("s2")`获得伊利诺伊州芝加哥

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:26:36.790

为什么要声明`s1`,`s2`等？

创建一个用作数组的变量，并通过与号 ( )`Split`对字符串使用该函数`&`，然后当您需要引用单个行时，在等号 ( `=`) 上再次将其拆分。

例如：

```
arMyArray = Split(YourQueryString, "&")
for i = 0 to uBound(arMyArray)
    key = Split(arMyArray(i), "=")(0)
    cityAndState = Split(arMyArray(i), "=")(1)
next 
```

# php - 在 php 中将本地日期、时间和时区值转换为 utc 时区

> ID：11671395
> 
> 赞同：1
> 
> 时间：2012-07-26T14:21:25.013
> 
> 标签：php, mysql, datetime, timezone

我正在开发一个 iPhone 应用程序，我从用户那里获取日期和时间（单独）并将其提交到我的 php Web 服务。然后，php web 服务应该采用这个日期和时间并将其保存到 utc 时区。我已经读到我还需要 php 文件中的本地时区才能将其转换为 utc。我在我的 iPhone 应用程序中将“亚洲/加尔各答 (IST) 偏移 1980”作为我的时区值，并且可以将其发送到 php 文件。现在我将如何将日期、时间和时区转换为 utc 日期。

我必须将日期转换为 utc 格式，以便我可以查询我的表以获取不超过本地时间的数据。

提前致谢

问候
潘卡伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:39:21.337

查看[PHP DateTime();](http://www.php.net/manual/en/datetime.settimezone.php)

本质上，您需要像下面这样处理它。

```
$date = new DateTime($dateFromiPhone);
$date->setTimeZone(new DateTimeZone("UTC")); 
```

然后用于`$date->format();`格式化您想要的用途

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:51:17.653

用于[`setTimeZone`](http://www.php.net/manual/en/datetime.settimezone.php)将时区从用户发送的任何内容转换为 UTC：

```
 $utz = new DateTimeZone($input['timezone']);
    $udt = new DateTime($input['date'].' '.$input['time'], $utz);
    $udt->setTimezone(new DateTimeZone('UTC'));

    echo $input['date'].' '.$input['time'].' '.$input['timezone'].' is '.$udt->format('Y-m-d H:i:s')." UTC\n"; 
```

# backbone.js - 使用查询字符串导航路线

> ID：11671400
> 
> 赞同：37
> 
> 时间：2012-07-26T14:21:46.527
> 
> 标签：backbone.js, backbone-routing

将`Backbone.Router.navigate`设置`test`为`true`：

```
var test = false;

var Router = Backbone.Router.extend({
  routes: {
    'posts': 'showPosts'
  },
  showPosts: function () {
    test = true;
  }
});

router = new Router();
Backbone.history.start();

router.navigate('posts?foo=3', {trigger: true});

assert.ok(test); 
```

例如，`posts?foo=3`fragment 会默认匹配`posts`路由，还是我必须为此设置另一个路由，例如：`posts?*querystring`？

谢谢

PS：我知道存在[骨干查询参数](https://github.com/jhudson8/backbone-query-parameters)，但我只想知道骨干。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-26T14:25:01.017

您需要使用该预期参数添加另一条路线：

```
routes: {
    'posts?foo=:foo' : 'showPosts',
    'posts': 'showPosts'
},
showPosts: function (foo) {
    if(typeof foo != 'undefined'){
       // foo parameters was passed
    }
    test = true;
} 
```

**更新**
您可以定义一般路线以返回所有查询字符串，然后在处理程序中对其进行解析：

```
routes: {
   'posts': 'showPosts',
   'posts?*queryString' : 'showPosts'
},
showPosts: function (queryString) {
    var params = parseQueryString(queryString);
    if(params.foo){
        // foo parameters was passed
    }
}  
...
// and the function that parses the query string can be something like : 
function parseQueryString(queryString){
    var params = {};
    if(queryString){
        _.each(
            _.map(decodeURI(queryString).split(/&/g),function(el,i){
                var aux = el.split('='), o = {};
                if(aux.length >= 1){
                    var val = undefined;
                    if(aux.length == 2)
                        val = aux[1];
                    o[aux[0]] = val;
                }
                return o;
            }),
            function(o){
                _.extend(params,o);
            }
        );
    }
    return params;
} 
```

**更新 2**

这是[一个现场演示](http://jsfiddle.net/jMeV3/6/)，可查看实际代码。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-14T18:24:29.443

只是为了补充前面的答案，而不是定义两个具有相同回调的路由，例如：

```
routes: {
    'posts': 'showPosts',
    'posts?*querystring': 'showPosts'
} 
```

您可能只有一种方法来保持代码更清洁：

```
routes: {
    'posts(?*querystring)': 'showPosts'
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-26T14:34:14.007

骨干文档：

> 路由可以包含参数部分，:param，它匹配斜杠之间的单个 URL 组件；和 splat 部分 *splat，可以匹配任意数量的 URL 组件。

如果您仍然想保留没有匹配的功能，您可以定义两条路线

```
routes: {
  'posts': 'showPosts',
  'posts?*querystring': 'showPosts'
}

showPosts: function(querystring) {
  if (querystring) {
    // here you can parse your querystring, for your case the querystring variable is 
    // 'foo=3'
  }
  //here you'll show posts according to the querystring (or lack thereof)      
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-11T14:10:25.450

这是另一个镜头，仍然使用 lodash（下划线）。删除了 _.map，为变量添加了一些详细信息，并去掉了开头的“？” 如果存在：

```
function parseQueryString(queryString)
{
    if (!_.isString(queryString))
        return
    queryString = queryString.substring( queryString.indexOf('?') + 1 )
    var params = {}
    var queryParts = decodeURI(queryString).split(/&/g)
    _.each(queryParts, function(val)
        {
            var parts = val.split('=')
            if (parts.length >= 1)
            {
                var val = undefined
                if (parts.length == 2)
                    val = parts[1]
                params[parts[0]] = val
            }
        })
    return params
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-13T20:50:44.717

RFC 3986“URI 语法”规定查询参数应位于散列片段之前。

> 在 URI 中，井号 # 在 URL 末尾附近引入可选片段。URI 的通用 RFC 3986 语法还允许由问号 ? 引入可选的查询部分。在带有查询和片段的 URI 中，片段跟随查询。

我在处理从服务器获取的重定向时遇到了这个问题，即“ [http://foo.com/main.html?error=errormessage#site](http://foo.com/main.html?error=errormessage#site) ”。我想对查询进行路由，但看不到编写主干路由表达式来处理此 url 的方法。现在我只是在哈希上路由并通过解析 location.search 来检查查询。

# c# - 设置在 .NET 中解析部分日期值时假定的年份

> ID：11671401
> 
> 赞同：10
> 
> 时间：2012-07-26T14:21:46.197
> 
> 标签：c#, parsing, date

我需要解析一个可以采用任何合理格式的日期字符串。例如：

*   `2012-12-25`
*   `25 december 2012`
*   `25 dec`
*   `17:35`

其中一些字符串包含不明确的日期，这可能会导致几个可能的`DateTime`值（例如`25 dec`，可以解释为`2012-12-25`、`2011-12-25`、`1066-12-25`等）。

当前处理这些模糊值的方式`DateTime.Parse`是使用当前系统日期来确定上下文。因此，如果当前日期是**2012 年 7 月 26 日**，则假定字符串`25 dec`在当年并被解析为`2012-12-25`

是否有可能以某种方式更改此行为并自己设置当前日期上下文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:31:59.703

我唯一能想到的就是后处理日期。之后你有字符串，你在 DateTime 对象中有年份。如果字符串不包含年份，则自己设置年份。

```
if(! string.contains(DateTime.Year.toString() ) {
    // Set the year yourself
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:45:53.957

如果您希望获得各种格式的“不完整”日期/时间信息，您可以尝试将文本解析为从最不详细到最详细的特定不同格式。例如：

```
var text = "June 15";
DateTime datetime;
if(DateTime.TryParseExact(text, "m", CultureInfo.CurrentCulture, DateTimeStyles.AssumeLocal, out datetime))
{
    // was just month, day, replace year with specific value:
    datetime = new DateTime(1966, datetime.Month, datetime.Day);
}
else
{
    // wasn't just month, day, try parsing a "whole" date/time:
    datetime = DateTime.Parse(text);
} 
```

...此代码尝试解析当前文化中的月/日格式（如果您有一个特定的，独立于当前文化，您可以将“CultureInfo.CurrentCulture”替换为具有您想要的格式的文化）。如果失败，它会假定文本更详细，然后像往常一样继续解析它。

如果您的日期/时间不是本地的，请不要使用`DateTimeStyles.AssumeLocal`. 我始终建议您始终使用 Universal 以任何方式（如序列化为文本）存储的日期/时间数据；因为当数据被序列化时，你不知道什么文化在起作用。Universal 是在公平竞争环境中获取日期/时间数据的唯一可靠方法。在这种情况下使用`DateTimeStyles.AssumeUnivesal`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:35:33.403

你可以尝试处理一些`IFormatProvider`事情，但这可能需要一段时间。作为一个快速的解决方案，我可以提出一个扩展方法：

```
public static class MyDateTimeStringExtensions
{
    public static DateTime ToDateTimeWithYear(this string source, int year)
    {
        var dateTime = DateTime.Parse(source);

        return dateTime.AddYears(year - dateTime.Year);
    }
}
 ....
"2/2".ToDateTimeWithYear(2001) // returns 2/2/2001 12:00:00 AM 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-28T18:55:42.720

我有一个非常相似的问题。当字符串不包含时间信息时，DateTime.Parse 或 DateTime.TryParse 将假定时间为 00:00:00。与年份假设一样，无法指定不同的时间作为默认时间。这是一个真正的问题，因为设置这些默认值的时间是*在*解析方法完成所有详细步骤之前。否则，您必须非常痛苦地重新发明轮子来确定字符串是否包含会覆盖默认值的信息。

我查看了 DateTime.TryParse 的源代码，不出所料，Microsoft 已经竭尽全力使 DateTime 类难以扩展。因此，我编写了一些使用反射来利用 DateTime 源代码的代码。这有一些明显的缺点：

*   使用反射的代码很尴尬
*   使用反射的代码调用内部成员，如果升级 .Net 框架，这些成员可能会发生变化
*   使用反射的代码将比一些不需要使用反射的假设替代方案运行得更慢

就我而言，我认为没有什么比从头开始重新发明 DateTime.TryParse 更尴尬的了。我有单元测试来表明内部成员是否发生了变化。而且我相信在我的情况下，性能损失是微不足道的。

我的代码如下。此代码用于覆盖默认的小时/分钟/秒，但我认为可以轻松修改或扩展它以覆盖默认年份或其他内容。该代码忠实地模仿了内部 System.DateTimeParse.TryParse 的重载之一的内部代码（它完成了 DateTime.TryParse 的实际工作），尽管我不得不使用笨拙的反射来这样做。与 System.DateTimeParse.TryParse 唯一有效不同的是，它分配了一个默认的小时/分钟/秒，而不是让它们全部为零。

作为参考，这是我正在模仿的类 DateTimeParse 的方法

```
 internal static bool TryParse(String s, DateTimeFormatInfo dtfi, DateTimeStyles styles, out DateTime result) { 
        result = DateTime.MinValue;
        DateTimeResult resultData = new DateTimeResult();  // The buffer to store the parsing result.
        resultData.Init();
        if (TryParse(s, dtfi, styles, ref resultData)) { 
            result = resultData.parsedDate;
            return true; 
        } 
        return false;
    } 
```

这是我的代码

```
public static class TimeExtensions
{
    private static Assembly _sysAssembly;
    private static Type _dateTimeParseType, _dateTimeResultType;
    private static MethodInfo _tryParseMethod, _dateTimeResultInitMethod;
    private static FieldInfo _dateTimeResultParsedDateField,
                _dateTimeResultHourField, _dateTimeResultMinuteField, _dateTimeResultSecondField;
    /// <summary>
    /// This private method initializes the private fields that store reflection information
    /// that is used in this class.  The method is designed so that it only needs to be called
    /// one time.
    /// </summary>
    private static void InitializeReflection()
    {
        // Get a reference to the Assembly containing the 'System' namespace
        _sysAssembly = typeof(DateTime).Assembly;
        // Get non-public types of 'System' namespace
        _dateTimeParseType = _sysAssembly.GetType("System.DateTimeParse");
        _dateTimeResultType = _sysAssembly.GetType("System.DateTimeResult");
        // Array of types for matching the proper overload of method System.DateTimeParse.TryParse
        Type[] argTypes = new Type[] 
        {
            typeof(String), 
            typeof(DateTimeFormatInfo), 
            typeof(DateTimeStyles), 
            _dateTimeResultType.MakeByRefType()
        };
        _tryParseMethod = _dateTimeParseType.GetMethod("TryParse",
                BindingFlags.Static | BindingFlags.NonPublic, null, argTypes, null);
        _dateTimeResultInitMethod = _dateTimeResultType.GetMethod("Init",
                BindingFlags.Instance | BindingFlags.NonPublic);
        _dateTimeResultParsedDateField = _dateTimeResultType.GetField("parsedDate",
                BindingFlags.Instance | BindingFlags.NonPublic);
        _dateTimeResultHourField = _dateTimeResultType.GetField("Hour",
                BindingFlags.Instance | BindingFlags.NonPublic);
        _dateTimeResultMinuteField = _dateTimeResultType.GetField("Minute",
                BindingFlags.Instance | BindingFlags.NonPublic);
        _dateTimeResultSecondField = _dateTimeResultType.GetField("Second",
                BindingFlags.Instance | BindingFlags.NonPublic);
    } 
    /// <summary>
    /// This method converts the given string representation of a date and time to its DateTime
    /// equivalent and returns true if the conversion succeeded or false if no conversion could be
    /// done.  The method is a close imitation of the System.DateTime.TryParse method, with the
    /// exception that this method takes a parameter that allows the caller to specify what the time
    /// value should be when the given string contains no time-of-day information.  In contrast,
    /// the method System.DateTime.TryParse will always apply a value of midnight (beginning of day)
    /// when the given string contains no time-of-day information.
    /// </summary>
    /// <param name="s">the string that is to be converted to a DateTime</param>
    /// <param name="result">the DateTime equivalent of the given string</param>
    /// <param name="defaultTime">a DateTime object whose Hour, Minute, and Second values are used
    /// as the default in the 'result' parameter.  If the 's' parameter contains time-of-day 
    /// information, then it overrides the value of 'defaultTime'</param>
    public static Boolean TryParse(String s, out DateTime result, DateTime defaultTime)
    {
        // Value of the result if no conversion can be done
        result = DateTime.MinValue;
        // Create the buffer that stores the parsed result
        if (_sysAssembly == null) InitializeReflection();
        dynamic resultData = Activator.CreateInstance(_dateTimeResultType);
        _dateTimeResultInitMethod.Invoke(resultData, new Object[] { });
        // Override the default time values of the buffer, using this method's parameter
        _dateTimeResultHourField.SetValue(resultData, defaultTime.Hour);
        _dateTimeResultMinuteField.SetValue(resultData, defaultTime.Minute);
        _dateTimeResultSecondField.SetValue(resultData, defaultTime.Second);
        // Create array parameters that can be passed (using reflection) to 
        // the non-public method DateTimeParse.TryParse, which does the real work
        Object[] tryParseParams = new Object[]
        {
            s, DateTimeFormatInfo.CurrentInfo, DateTimeStyles.None, resultData
        };
        // Call non-public method DateTimeParse.TryParse
        Boolean success = (Boolean)_tryParseMethod.Invoke(null, tryParseParams);
        if (success)
        {
            // Because the DateTimeResult object was passed as a 'ref' parameter, we need to
            // pull its new value out of the array of method parameters
            result = _dateTimeResultParsedDateField.GetValue((dynamic)tryParseParams[3]);
            return true;
        }
        return false;
    }
} 
```

--**编辑**-- 后来我意识到我需要对方法 DateTime.TryParseExact 做同样的事情。但是，上述方法不适用于 TryParseExact，这让我担心这种方法比我想象的还要脆弱。那好吧。令人高兴的是，我能够为 TryParseExact 想到一种非常不同的方法，它不使用任何反射

```
 public static Boolean TryParseExact(String s, String format, IFormatProvider provider,
                            DateTimeStyles style, out DateTime result, DateTime defaultTime)
    {
        // Determine whether the format requires that the time-of-day is in the string to be converted.
        // We do this by creating two strings from the format, which have the same date but different
        // time of day.  If the two strings are equal, then clearly the format contains no time-of-day
        // information.
        Boolean willApplyDefaultTime = false;
        DateTime testDate1 = new DateTime(2000, 1, 1, 2, 15, 15);
        DateTime testDate2 = new DateTime(2000, 1, 1, 17, 47, 29);
        String testString1 = testDate1.ToString(format);
        String testString2 = testDate2.ToString(format);
        if (testString1 == testString2)
            willApplyDefaultTime = true;

        // Let method DateTime.TryParseExact do all the hard work
        Boolean success = DateTime.TryParseExact(s, format, provider, style, out result);

        if (success && willApplyDefaultTime)
        {
            DateTime rawResult = result;
            // If the format contains no time-of-day information, then apply the default from
            // this method's parameter value.
            result = new DateTime(rawResult.Year, rawResult.Month, rawResult.Day,
                             defaultTime.Hour, defaultTime.Minute, defaultTime.Second);
        }
        return success;
    } 
```

# node.js - node.js express：无法获取jquery ajax发布的数据

> ID：11671405
> 
> 赞同：1
> 
> 时间：2012-07-26T14:21:57.900
> 
> 标签：node.js, post, express

在客户端，我使用 jquery 发布数据：

```
 var data = {
            'city': 'england'
        }
        $.ajax({
            'type': 'post',
            'url': 'http://127.0.0.1:8000/',
            'data': data,
            'dataType': 'json',
            'success': function () {
                console.log('success');
            }
        }) 
```

在我的 server.js 中，我尝试捕获发布数据：

```
var express = require('express');
var app = express.createServer();
app.configure(function () {
    app.use(express.static(__dirname + '/static'));
    app.use(express.bodyParser());
})

app.get('/', function(req, res){
    res.send('Hello World');
});

app.post('/', function(req, res){
    console.log(req.body);
    res.send(req.body);
});
app.listen(8000); 
```

帖子可以成功，它返回 200 状态，但我无法记录帖子数据，它什么也不返回，终端日志`undefined`。

为什么？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:39:27.730

您没有正确发送数据。

```
$.ajax({
  type: 'POST',
  data: JSON.stringify(data),
  contentType: 'application/json',
  url: '/endpoint'
}); 
```

使用 jQuery，使用

> 内容类型：'应用程序/json'

发送 JSON 数据。

# javascript - 使用 javascript 以正确的格式解析字符串

> ID：11671408
> 
> 赞同：1
> 
> 时间：2012-07-26T14:22:14.217
> 
> 标签：javascript, date-parsing

我有一个始终采用这种格式的字符串：2012 年 5 月 7 日或 2012 年 5 月 17 日我的目标是解析这个字符串并以这种格式获取日期：yyyy-mm-dd

因此，我的示例 2012 年 5 月 7 日将变为 2012-05-07，2012 年 5 月 17 日将变为 2012-05-17

我试过了

```
Date.parse("7 May 2012", "yyyy-mm-dd") 
```

但结果是：

```
Sun May 20 2012 00:00:00 GMT+0200 (CEST) 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:25:31.817

我不知道你从哪里`Date.parse`打来的电话，JavaScript`Date.parse`没有第二个参数。

为此，您需要自己解析字符串，或使用[MomentJS](http://momentjs.com)或类似工具为您解析。如果您想自己解析它，您可能需要一个正则表达式和一个查找表（用于月份名称）。正则表达式将遵循以下原则：

```
var parts = /^\s*(\d+)\s+([A-Za-z]+)\s+(\d+)\s*$/.exec(str); 
```

...您最终会`parts[0]`成为日期、`parts[1]`月份名称和`parts[2]`年份。然后只需将月份转换为小写或大写，并使用查找表将月份名称映射到月份编号，如下所示：

```
var months = {
    "jan": 0,
    "january": 0,
    "feb": 1,
    "february": 1,
    "may": 4,
    // ...
    "dec": 11,
    "december": 11
};
var parts = /^\s*(\d+)\s+([A-Za-z]+)\s+(\d+)\s*$/.exec(str);
var dt;
if (parts) {
    parts[2] = months[parts[2].toLowerCase()];
    if (typeof parts[2] !== "undefined") {
        dt = new Date(parseInt(parts[3], 10),
                      parts[2],
                      parseInt(parts[1], 10));
    }
} 
```

[实例](http://jsbin.com/osozul)| [来源](http://jsbin.com/osozul/edit)

然后您可以格式化生成的`Date`对象。（同样，那里有库可以提供帮助。）

或者，当然，永远不要`Date`直接从`parts`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:25:49.350

这不是[`Date.parse`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse)工作原理，它只需要一个参数，并返回一个 unix 时间戳。

如果您想要一个[`Date`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)对象，请使用`new Date`.

```
var myDate = new Date("7 May 2012");
// Mon May 07 2012 00:00:00 
```

然后，您可以自己将其解析为您想要的格式：

```
var year = myDate.getFullYear(),
    month = myDate.getMonth() + 1, // month returns 0-11, not 1-12
    day = myDate.getDate();
var dateStr = year + '-' + (month < 10 ? 0 : '') + month + '-' + (day < 10 ? 0 : '') + day; 
```

**注意**：`"7 May 2012"`是一种非标准日期格式，可能无法在所有浏览器中正常工作。

**注意 2**：为了 100% 确保它适用于所有浏览器，我会使用[`Datejs`](http://www.datejs.com/).

```
// Using Date.js
var myDate = Date.parse('7 May 2012');
var dateStr = myDate.toString('yyyy-MM-dd'); 
```

# android - (TableLayout)findViewById(空指针异常

> ID：11671409
> 
> 赞同：4
> 
> 时间：2012-07-26T14:22:16.153
> 
> 标签：android, android-layout, null, android-tablelayout

我整天都在寻找答案，但是当我尝试获取表格布局时，我得到了空值。我发现它可能是另一个同名的表格布局，但只有一个。我的 .xml 文件：

[我的 xml](http://filebin.ca/A1sZlhzeV0b)

我的代码在这里`layout6 = (TableLayout)findViewById(R.id.shdslResultsTableLayout); layout6.setVisibility(0);`

总是以空指针结束。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:29:17.073

请确保在`setContentView`方法中调用正确的布局，并确保在调用`setContentView`之前调用`findViewById`。

如果你做到了，那么尝试清理/重建。

希望对你有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T14:27:49.757

如果`findViewById()`返回 NPE，请尝试其中一些：

*   通过 Project -> Clean... 清理项目 -> 检查您的项目 -> OK
*   确保您的 ID 中绝对没有拼写错误
*   `TableLayout`确保 contentView 在存在的地方显示正确的布局
*   确保你`setContentView`之前`findViewById`

我假设我列出的第三个选项很可能是您的问题。

在这些步骤中的每一个之后，重新清理项目也可能会有所帮助。

# c# - 有没有办法在 C# 中捕获调试消息，然后将它们输出到单独的窗口？

> ID：11671413
> 
> 赞同：4
> 
> 时间：2012-07-26T14:22:29.163
> 
> 标签：c#, .net, debugging, tracelistener

我已经花了 3 天的时间查找这个，但我找不到可靠的答案。我想捕获调试消息并将它们输出到列表日志。我正在尝试在 C# 中执行此操作。希望社区提供一些帮助，为我指明正确的方向。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T14:25:44.417

好吧，当然这是可能的。调试输出不限于显示在输出窗口中。

您所要做的就是编写一个自定义侦听器并将其添加到[`Debug.Listeners`集合](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.listeners.aspx)中。[您可以在 MSDN 上](http://msdn.microsoft.com/en-us/library/4y5y10s7.aspx)找到有关添加跟踪侦听器的完整文档。

唯一需要注意的是侦听器是共享的，用于调试和跟踪输出，因此如果添加一个，您将收到两种类型的消息。

如果这听起来工作量太大而您只需要一个快速而简单的解决方案，您可以从 Sysinternals下载免费的[DebugView 实用程序。](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)这个简洁的小工具是您运行的一个单独的应用程序，它监听机器上安装的所有程序的所有调试输出。如果您使用它，您甚至不必更改应用程序中的一行代码——所有发送到的输出都`Debug.Write`将显示在 DebugView 窗口中。

或者，如果您正在寻找甚至可以随应用程序一起提供的长期功能，我鼓励您研究添加日志功能。有很多很好的开源库提供了这个功能，当你的应用程序被部署到具有未知配置的系统时，它在现场是非常宝贵的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:29:44.703

就日志记录而言，[Log4Net](http://logging.apache.org/log4net/ "Log4Net")可靠且易于使用。您可以通过 NuGet 将其添加到您的项目中（如果您不知道 NuGet 是什么，请查看：它真的很棒）。它允许您在任何地方或多或少地记录（控制台、文件、邮件、数据库...）

网站包含良好的文档和示例。

# delphi - Delphi XE2 - 无法通过 SSL 连接到 Gmail smtp 服务器

> ID：11671416
> 
> 赞同：2
> 
> 时间：2012-07-26T14:22:46.230
> 
> 标签：delphi, ssl, gmail, openssl, delphi-xe2

使用 Delphi XE2、随附的 Indy 10 和 OpenSSL dll 的 1.0.1c 版本。

我们正处于将 Delphi 6 项目转换为 Delphi XE2 的最后阶段。

到目前为止，我们已经解决了所有问题，但我遇到了一个尝试连接到 Gmail smtp 服务器的问题。

根据 Google 自己的文档，我们的 Delphi 6 应用程序使用 SSL v2.3 和 SSL v3 以及连接到端口 465 的 Indy 9 组件运行良好。[谷歌支持](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)

我们的 Delphi XE2 应用程序根本无法连接。连接的调用进入以太，大约 7 分钟没有任何反应，直到我厌倦了等待事情超时并将其杀死。实际上，我在这里一直跟踪程序执行到 IdWinsock2 函数：

```
function Stub_select(nfds: Integer; readfds, writefds, exceptfds: PFDSet; timeout: PTimeVal): Integer; stdcall;
begin
  @select := FixupStub(hWinSockDll, 'select'); {Do not Localize}
  Result := select(nfds, readfds, writefds, exceptfds, timeout);//<-this line never returns and timeout is always nil
end; 
```

我需要为现有用户的配置维护旧的 SSL 连接。

新用户将能够使用 TLS（连接到端口 587）进行连接，并且可以正常工作！？！？

我不知道为什么非 TLS SSL 选项不起作用，也没有报告任何错误，也没有超时，只是去 Never-Never Land。请帮忙！

TJ

这是代码：

```
 SMTPClient.Host := trim(EditSMTPServer.Text);
  SMTPClient.Port := EditSMTPServerPort.AsInteger;//<- value from custom edit box
  SMTPClient.Username := trim(EditSMTPLogon.Text);
  SMTPClient.Password := trim(EditSMTPPassword.Text);
  SMTPClient.AuthType := satDefault;

  if CheckBoxUseSSL.Checked then begin
    SMTPClient.IOHandler := IdSSLIOHandlerSocket1;
    IdSSLIOHandlerSocket1.ReadTimeout := 30000;//30 second timeout which does not appear to work
    case ComboBoxSSLMode.ItemIndex of
      0 : IdSSLIOHandlerSocket1.SSLOptions.Method := sslvSSLv2;
      1 : IdSSLIOHandlerSocket1.SSLOptions.Method := sslvSSLv23;
      2 : IdSSLIOHandlerSocket1.SSLOptions.Method := sslvSSLv3;
      3 : begin
        IdSSLIOHandlerSocket1.SSLOptions.Method := sslvTLsv1;
        SMTPClient.UseTLS := utUseImplicitTLS;
      end;
    end;//case
    IdSSLIOHandlerSocket2.SSLOptions.Method := IdSSLIOHandlerSocket1.SSLOptions.Method;
    IdSSLIOHandlerSocket2.PassThrough := False;
  end
  else begin
    SMTPClient.IOHandler := nil;
  end;

  try
    SMTPClient.Connect;
    if SMTPClient.Connected then begin
      if SMTPClient.Authenticate then begin
      ... do some work ...
      end;
    end;
  except
    on e:Exception do begin
      showmessage(e.message);
    end;
  end; 
```

编辑：

像往常一样，在我发布问题后，我偶然发现了一种解决方法。

如果我将所有非 SSL 事务的 UsetTLS 属性设置为 utUseImplicitTLS 并将其设置为 utUseExplicitTLS 以进行 TLS 事务，我的连接似乎可以及时工作。

希望这可以帮助某人。

更新代码：

```
if CheckBoxUseSSL.Checked then begin
  SMTPClient.IOHandler := IdSSLIOHandlerSocket1;
  SMTPClient.UseTLS := utUseImplicitTLS;
  case ComboBoxSSLMode.ItemIndex of
    0 : IdSSLIOHandlerSocket1.SSLOptions.Method := sslvSSLv2;
    1 : IdSSLIOHandlerSocket1.SSLOptions.Method := sslvSSLv23;
    2 : IdSSLIOHandlerSocket1.SSLOptions.Method := sslvSSLv3;
    3 : begin
      IdSSLIOHandlerSocket1.SSLOptions.Method := sslvTLsv1;
      SMTPClient.UseTLS := utUseExplicitTLS;
    end;
  end;//case
  IdSSLIOHandlerSocket2.SSLOptions.Method := IdSSLIOHandlerSocket1.SSLOptions.Method;
  IdSSLIOHandlerSocket2.PassThrough := False;
end
else begin
  SMTPClient.UseTLS := utNoTLSSupport;//reset TLS support flag
  SMTPClient.IOHandler := nil;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T20:29:12.687

你发现的就是你应该做的。SSL 和 TLS 有不同的语义，所以你必须进行`UseTLS`相应的设置。

对于端口 465 上的 SSL，服务器希望您的客户端在连接后立即启动 SSL 握手，然后服务器发送加密的问候语。 `UseTLS=utUseImplicitTLS`这样做，但`UseTLS=utUseExplicitTLS`没有。当`UseTLS=utUseExplicitTLS`,`TIdSMTP`将期望服务器立即发送未加密的问候语，这将解释挂起`select()`- 服务器没有发送任何数据！

对于端口 587 上的 TLS，服务器期望客户端最初连接时未加密，然后`STARTTLS`在准备好启动加密时发送显式命令。 `UseTLS=utUseExplicitTLS`这样做，但`UseTLS=utUseImplicitTLS`没有。

# xpages - 折叠过滤视图中剩余的分类列

> ID：11671421
> 
> 赞同：1
> 
> 时间：2012-07-26T14:22:57.400
> 
> 标签：xpages

我有一个包含 4 个分类列的视图，第一类是人名。

我创建了一个 viewPanel，我想过滤视图，以便它只显示当前用户的记录。类别过滤器按预期工作，但所有分类列都显示为展开状态。所以我添加了 expandLevel="1" 并且所有文档都消失了。

有没有办法在过滤视图中折叠所有分类列？

从那以后，我尝试将 expandLevel 设置为“1”、“2”、“3”和“4”。文档消失，直到它设置为“4”，并且无论如何它只是以扩展模式显示 3 个分类列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:20:46.530

首先，在典型情况下，这应该可行！
类别过滤和设置为 1 的属性“expandLevel”应该适合您。您应该看到该 categoryFilter 的所有分类列以及与该最后一个子类别关联的父文档都已折叠。
如果您的数据包含响应文档，这些将不会显示。尽管在 viewPanel 的列上设置 'indentResponses=true' 会让它们为您显示。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T18:32:46.563

这是视图面板中的错误。你可以 ：

1.  使用重复控件创建您自己的视图面板
2.  使用像[这个](http://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-8UTGAL)或[这个这样](http://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-8A59VP)的网格容器

# wso2 - 如何合并 wso2 产品？

> ID：11671426
> 
> 赞同：6
> 
> 时间：2012-07-26T14:23:17.950
> 
> 标签：wso2, wso2esb, wso2dss

我想合并 WSO2 ESB 和数据服务产品以在一台服务器上执行它们。它们都基于 Carbon 框架，由一些 OSGi 包组成。有没有一种简单的方法可以做到这一点。

最好的祝福。

——赛义德·贾马尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T19:01:01.947

是的。您可以在 DSS 中安装 ESB 功能，反之亦然。功能安装方式对于所有 WSO2 Carbon 服务器（ESB、IS、AS、DSS、BAM ......）都是通用的。[*这是我写*](http://sureshatt.blogspot.com/2012/04/how-to-install-new-feature-on-wso2.html)的关于在 IS 中安装 AS 功能[的博客文章。](http://sureshatt.blogspot.com/2012/04/how-to-install-new-feature-on-wso2.html)*ESB 或 DSS 的过程相同，找到所需的功能并安装它们。*

# spring - 将 Hibernate .hbm 迁移到注释

> ID：11671427
> 
> 赞同：0
> 
> 时间：2012-07-26T14:23:21.410
> 
> 标签：spring, hibernate, jakarta-ee

我目前正在将旧应用程序从 hbm 映射迁移到注释。我读过很多地方都说可以做到这一点，包括休眠文档。当我尝试从以多对一关系映射的 hbm 中引用带注释的类时，我遇到了麻烦。

我收到以下错误，抱怨带注释的类。

“嵌套异常是 org.hibernate.MappingException：关联引用未映射的类：...cepis.domain.Note”

是否有可能在这里实现我想要的，是否有一些非常基本的东西我错过了（注意就像我说我已经读过很多次了，所以一个简单的“是的，它是可能的”不会有太大帮助）？

我的会话工厂定义如下...

```
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"
    scope="singleton">
    <property name="dataSource" ref="itc5DataSource" />             
    <property name="mappingResources">
        <list>
              <value>edu/uky/cepis/User.hbm.xml</value>...  
        </list>     
    </property>
    <property name="annotatedClasses">
        <list>
            <value>edu.uky.cepis.domain.Note</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${itc5.dialect}</prop>
            ...
        </props>
    </property>
</bean> 
```

非常感谢您提前提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:55:01.340

您是否尝试将_hibernate.mapping.precedence_设置为“class，hbm”？

# iphone - SFHFKeychainUtilsErrorDomain 错误 -2000

> ID：11671428
> 
> 赞同：3
> 
> 时间：2012-07-26T14:23:26.453
> 
> 标签：iphone, objective-c, ios, mkstorekit, sfhfkeychainutils

操作无法完成。（SFHFKeychainUtilsErrorDomain 错误 -2000。）（密码问题） MKStorekit 使用的 SFHFKeychainUtilsErrorDomain。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:03:00.533

经过大量的辛勤工作，我想我解决了这个问题。它与 MKStoreKit 在钥匙串中存储数据的方式有关。在您的 MKStoreKitConfigs.plist 中，确保您已为您的消耗品添加了“名称”和“成本”键：

![在此处输入图像描述](../Images/50c0210fe239b5b6c111c816992f0a9f.png)

我最初把字典留空了，我得到了那个错误。一旦我添加了 Name 和 Cost 键值对，一切都按预期工作。

# html - 如何将提交按钮的形状更改为圆形

> ID：11671429
> 
> 赞同：2
> 
> 时间：2012-07-26T14:23:26.103
> 
> 标签：html, css, button, submit, submit-button

> **可能重复：**
> [仅使用 css 绘制圆](https://stackoverflow.com/questions/6936972/draw-circle-using-css-alone)

我想知道是否有任何方法可以将提交按钮的形状从矩形更改为圆形？

**我不想使用圆形图像解决方案。**我想要按钮的所有其他特性，就像 css 样式一样。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T14:25:58.020

使用[`border-radius`](http://www.w3schools.com/cssref/css3_pr_border-radius.asp)财产。

例子：

```
.button {
    width: 100px;
    height: 100px;
    background-color: #000;
    border: solid 1px #000;
    border-radius: 50%
} 
```

上面的例子会给你一个规则的圆圈。

如果你只想要一个有点圆的形状，试试这个：

```
.button {
    width: 100px;
    height: 30px;
    background-color: #000;
    border: solid 1px #000;
    border-radius: 5px
} 
```

**现场演示：[常规圆形](http://tinkerbin.com/r5WPt7ie)
现场演示：[圆形](http://tinkerbin.com/Bx7el0AE)
现场演示：[带文本的输入按钮](http://tinkerbin.com/S8BAZK3Q)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T14:44:31.983

您的问题已经得到解答，但我建议您使用[Twitter Bootstrap](http://twitter.github.com/bootstrap)。

它是一个 HTML/CSS 框架，可让您轻松制作[出色的按钮](http://twitter.github.com/bootstrap/base-css.html#buttons)（以及其他按钮）。

此按钮是“跨浏览器”，这意味着它们与 Internet Explorer 兼容。

只有一个类 -`btn`你可以风格化`<button>`,`<input type="button">`或`<a>`.

这个 ：

```
<button class="btn"></button> 
```

给出：

![在此处输入图像描述](../Images/31a764168610ab4b3f3c737817361962.png)

您还可以使用可选类快速自定义按钮：

`btn-primary`, `btn-info`, `btn-success`,和. `btn-warning`_`btn-danger``btn-inverse`

这些类像这样改变你的按钮：

![在此处输入图像描述](../Images/e44e26690c05843ddc8260f239328416.png)

然后你可以选择一个大小与类`btn-large`，`btn-small`和`btn-mini`。

最后，您可以在按钮中添加一个图标（[列表在此处](http://twitter.github.com/bootstrap/base-css.html#icons)）。

这个：

```
<button class="btn btn-success">
    <i class="icon-shopping-cart icon-white"></i>
    <span>Checkout</span>
</button> 
```

给出：

![在此处输入图像描述](../Images/971f81fc2a8c38f5b6e27788e7ede6b8.png)

享受新按钮的乐趣。`:)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T14:25:28.913

使用 CSS 边框半径。我建议使用谷歌搜索“CSS 按钮生成器”等，并找到任意数量的按钮生成工具，您可以使用这些工具来获得正确的 css。您只需要确保元素的高度=宽度，然后相应地调整角半径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T14:27:26.897

使用这种风格：

```
input[type='submit'] {
    width:100px;
    height:100px;
    border-radius:50px;
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T14:26:47.427

您可以在 CSS 中使用border-radius，但在 IE 中不支持。

玩弄：-

```
border-radius: 10px 10px 10px 10px 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T14:28:08.333

我建议要么使用 Jquery UI（你可以让你自己的主题） [http://jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)

或者

CSS3 [http://webdesignerwall.com/tutorials/css3-gradient-buttons](http://webdesignerwall.com/tutorials/css3-gradient-buttons)

CSS3 在 IE 中不起作用。

# c++ - 将非规范化数字刷新为零

> ID：11671430
> 
> 赞同：7
> 
> 时间：2012-07-26T14:23:32.910
> 
> 标签：c++, xcode, visual-studio-2010, audio

我已经在网上搜索无济于事。

Xcode 和 Visual C++ 有没有办法将非规范化数字视为 0？我原以为IDE首选项中有一个选项可以打开此选项，但似乎找不到。

我正在做一些跨平台的音频工作，需要阻止某些处理器占用资源。

干杯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T14:36:33.063

您正在寻找一种平台定义的方式来在 MXCSR 寄存器中设置 FTZ 和/或 DAZ（在带有 SSE 或 x86-64 的 x86 上）；见[https://stackoverflow.com/a/2487733/567292](https://stackoverflow.com/a/2487733/567292)

通常这被称为类似`_controlfp`; Microsoft 文档位于[http://msdn.microsoft.com/en-us/library/e9b52ceh.aspx](http://msdn.microsoft.com/en-us/library/e9b52ceh.aspx)

您还可以使用`_MM_SET_FLUSH_ZERO_MODE`宏： http: [//msdn.microsoft.com/en-us/library/a8b5ts9s](http://msdn.microsoft.com/en-us/library/a8b5ts9s(v=vs.71).aspx) (v=vs.71).aspx - 这可能是最跨平台的可移植方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T14:39:04.593

为了全局禁用非规范化，我使用这两个宏：

```
//warning these macros has to be used in the same scope
#define MXCSR_SET_DAZ_AND_FTZ \
int oldMXCSR__ = _mm_getcsr(); /*read the old MXCSR setting */ \
int newMXCSR__ = oldMXCSR__ | 0x8040; /* set DAZ and FZ bits */ \
_mm_setcsr( newMXCSR__ ); /*write the new MXCSR setting to the MXCSR */ 

#define MXCSR_RESET_DAZ_AND_FTZ \
/*restore old MXCSR settings to turn denormals back on if they were on*/ \
_mm_setcsr( oldMXCSR__ ); 
```

我在过程开始时调用第一个，最后调用第二个。不幸的是，这在 Windows 上似乎效果不佳。

要在本地刷新非正规我使用这个

```
const Float32 k_DENORMAL_DC = 1e-25f;
inline void FlushDenormalToZero(Float32& ioFloat) 
{ 
    ioFloat += k_DENORMAL_DC;
    ioFloat -= k_DENORMAL_DC;    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-22T21:12:01.603

为此，请在程序启动期间使用 Intel Intrinsics 宏。例如：

```
#include <immintrin.h> 
int main() {
  _MM_SET_FLUSH_ZERO_MODE(_MM_FLUSH_ZERO_ON); 
} 
```

在我的 MSVC 版本中，这发出了以下汇编代码：

```
 stmxcsr DWORD PTR tv805[rsp]
    mov eax, DWORD PTR tv805[rsp]
    bts eax, 15
    mov DWORD PTR tv807[rsp], eax
    ldmxcsr DWORD PTR tv807[rsp] 
```

MXCSR 是控制和状态寄存器，此代码设置第 15 位，打开*清零模式*。

需要注意的一件事：这只影响计算产生的非规范化。如果您还想将 denormals 用作*input*时将它们设置为零，则还需要使用以下命令设置 DAZ 标志（denormals 为零）：

```
_MM_SET_DENORMALS_ZERO_MODE(_MM_DENORMALS_ZERO_ON); 
```

有关详细信息，请参阅[https://software.intel.com/en-us/cpp-compiler-developer-guide-and-reference-setting-the-ftz-and-daz-flags](https://software.intel.com/en-us/cpp-compiler-developer-guide-and-reference-setting-the-ftz-and-daz-flags)。

另请注意，您需要为每个线程设置 MXCSR，因为包含的值对于每个线程都是本地的。

# asp.net - 在服务器中获取 RadGrid 复选框列值

> ID：11671431
> 
> 赞同：3
> 
> 时间：2012-07-26T14:23:39.817
> 
> 标签：asp.net, telerik, radgrid

我有一个具有复选框列的 RadGrid，我已将该列添加为 ItemTemplate 以使其在常规模式下可编辑。

```
 <telerik:GridTemplateColumn UniqueName="IsSelected" DataField="IsSelected">
     <ItemTemplate>
       <asp:CheckBox ID="chkBoolean" runat="server" Checked='<%# Convert.ToBoolean(Eval("IsSelected")) %>'Enabled='<%# Convert.ToBoolean(Eval("IsSelectionDisable")) %>' />
     </ItemTemplate>
 </telerik:GridTemplateColumn> 
```

使用它，我可以将复选框显示为可编辑。现在我的问题是当用户更改复选框时，我如何获取复选框的选中值以保存它。单击按钮后，我需要获取所有仍检查的行并保存它们。下面的代码不起作用，因为它没有得到复选框。有没有办法获得价值。

```
foreach (GridDataItem item in rgUnavailResult.MasterTableView.Items)
{
       (CheckBox)item["IsSelected"].Controls[0]            
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:55:19.503

找到复选框

```
((System.Web.UI.WebControls.CheckBox)(item["IsSelected"].FindControl("chkBoolean"))) 
```

# c# - 重命名 Windows azure 的暂存 url

> ID：11671435
> 
> 赞同：1
> 
> 时间：2012-07-26T14:23:49.040
> 
> 标签：c#, asp.net-mvc-3, azure

我已经在 Windows azure 上部署了 mu mvc-3 应用程序，并且我得到了这种类型的暂存 URL：

```
 http://gt678opUYr56xxxxxxxxxxxxxxxxxxxx.cloudapp.net/ 
```

我想用我们可以记住的东西重命名它：

```
 http://my-name.cloudapp.net/ 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T14:33:34.193

您不能重命名暂存 URL。您的应用程序名称将应用于生产槽。

请记住，暂存槽应该用于准备生产发布，而不是用于 QA 测试之类的事情。如果这是您使用暂存槽的目的，请考虑设置另一个部署，您可以在其中使用 my-name-qa 之类的名称作为应用程序名称。

暂存槽和另一个运行生产槽的实例的成本是相同的。此外，如果您正在验证功能，您可以使用比您可能用于生产的更小的实例大小。

# visual-studio - 是否可以以编程方式将自定义评论标记添加到 Visual Studio？

> ID：11671440
> 
> 赞同：2
> 
> 时间：2012-07-26T14:24:07.070
> 
> 标签：visual-studio

TODO:、HACK: 等对我来说不太合适。有没有办法以编程方式添加令牌（即来自构建任务）？

这向您展示了如何手动添加它们：http: [//msdn.microsoft.com/en-us/library/ekwz6akh (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ekwz6akh(v=vs.100).aspx)

# opencv - OpenCV STIP（时空兴趣点）

> ID：11671441
> 
> 赞同：0
> 
> 时间：2012-07-26T14:24:09.520
> 
> 标签：opencv, action, keypoint

我在哪里可以获得 Laptev 的 STIP（时空兴趣点）的源代码？在他的网页上只提供了可执行文件。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:34:11.383

实际上，消息来源在某个时候被公开了，或者我相信。

[你可以在这里](http://www.cs.rochester.edu/~rmessing/uradl/stip-velocityFeatures.zip)找到一个旧版本：（加上其他关于托管它的人的文件的东西......）

顺便说一句，代码很可怕。

# c# - 如何删除DataGrid中单元格之间的线条

> ID：11671446
> 
> 赞同：0
> 
> 时间：2012-07-26T14:24:23.767
> 
> 标签：c#, wpf, xaml, controltemplate

我可能在这里遗漏了一件非常简单的事情，但我无法弄清楚如何摆脱在 WPF DataGrid 中划分单元格的线条。我已经查看了大部分默认模板，但我似乎无法在其中找到我要查找的内容。有谁知道模板中的这种东西可能在哪里？是否有一个简单的属性可以设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:29:08.083

DataGrid.GridLinesVisibility = DataGridGridLinesVisibility.None;

[http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.gridlinesvisibility.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.gridlinesvisibility.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:43:46.650

```
<DataGrid ItemsSource="{Binding MyList}" Grid.Row="1"  GridLinesVisibility="None"/> 
```

我希望这将有所帮助。

# html - Objective C 构建 html 字符串

> ID：11671449
> 
> 赞同：-1
> 
> 时间：2012-07-26T14:24:33.297
> 
> 标签：html, objective-c, xcode, email

我正在尝试将 html 表格放入电子邮件的正文中。为此，我正在尝试构建一个包含 html 的字符串。但是，当我尝试在 html 中添加包含引号的行时出现错误。我怎样才能忽略这些引号，而只捕获整行？

```
BodyRiskMatrix = [BodyRiskMatrix stringByAppendingFormat:@"font-family:"Calibri","sans-serif";}"]; 
```

Xcode 将 Calibri 和 sans-serif 视为变量。我是否需要删除 html 中的所有引号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:27:53.843

**在任何引号之前使用 \**

```
 [BodyRiskMatrix stringByAppendingFormat:@"font-family:\"Calibri\",\"sans-serif\";}"]; 
```

这就是在 C 类型语言中使用转义符的方式。

如果要将 HTML 添加到电子邮件中，可以将 HTML 文件添加到项目中，然后执行

```
 [mailController setMessageBody:htmlFile isHTML:YES]; 
```

# java - 如何实现代理服务器？

> ID：11671450
> 
> 赞同：0
> 
> 时间：2012-07-26T14:24:33.310
> 
> 标签：java, proxy

我希望我的应用程序通过代理服务器连接到互联网（以避免验证码）。我目前使用的代码是这样的：

```
Properties props = System.getProperties();
props.put("http.proxyPort", proxyPort); //proxy port
props.put("http.proxyHost", proxyHost); //proxy host
props.put("http.proxySet", "true"); 
```

但是，此代码不成功。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:37:02.473

您可以尝试以下方法：

```
SocketAddress sa = new InetSocketAddress(proxy_host_name, proxy_port_address);
Proxy proxy = new Proxy(Proxy.Type.xxx, sa);
URLConnection con = new URL(url).openConnection(proxy); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T16:40:57.087

将参数放在命令行上或使用`setProperty`.

```
java -Dhttp.proxyHost=proxy.host -Dhttp.proxyPort=3128 MainClass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:45:18.210

您可能正在使用一种“用户友好的网站代理”，例如[http://newipnow.com](http://newipnow.com)或[www.proxyultra.com](http://www.proxyultra.com)。但是你需要使用真正的[SOCKS 代理](http://en.wikipedia.org/wiki/SOCKS)服务器。

我在公共代理列表中找到了一个免费的服务器：

```
System.setProperty("http.proxyHost", "187.115.172.82");
System.setProperty("http.proxyPort", "8181"); 
```

无需设置`http.proxySet`属性。

从这里的好列表中选择一个服务器：[隐藏我的屁股：代理列表](http://www.hidemyass.com/proxy-list/search-225391)

# popup - 如何获取用户点击/触摸相对于窗口的 x 和 y 坐标 - android Titan mobile？

> ID：11671451
> 
> 赞同：0
> 
> 时间：2012-07-26T14:24:43.940
> 
> 标签：popup, positioning, coordinates, tableview, titanium-mobile

谁能告诉如何获取用户点击/触摸相对于窗口的 x 和 y 坐标 - android Titan mobile？

当用户选择一行时，我需要在 tableviewrow 附近添加一个弹出视图。如何确定 x,y（上/左）位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:46:08.303

[这](https://stackoverflow.com/questions/9437383/how-to-get-the-touch-point-top-and-left-irrespective-of-the-views-windows-in)可能会对您有所帮助，因为窗口或对象触摸事件可以帮助您找到用户在屏幕上触摸的确切点。谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:30:30.767

您可以使用

```
row.addEventListener('click',function(e){
    alert('left:'+ e.x + ' top:'+ e.y);
}); 
```

其中 row 是 Titanium.UI.TableViewRow 的一个对象。对于其他对象（如窗口/视图），您可以使用相同的事件监听器。

但请记住一件事：它给出了相对于相应行的坐标。即，您可能会得到所有行的相同坐标。

因此，如果你想在那个坐标上弹出一些东西，你应该`addEventListener`到主窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:12:51.900

在任何视图或对象的单击事件上，您将获得 x 和 y 坐标，请参阅此链接以获取更多参考：

[Titanium.UI.Window](http://docs.appcelerator.com/titanium/2.1/#!/api/Titanium.UI.Window-event-click)

# html - 添加边框时表格居中发生变化？

> ID：11671456
> 
> 赞同：0
> 
> 时间：2012-07-26T14:24:54.390
> 
> 标签：html, css

我已经为此困惑了几个小时；试图使表格保持完全居中而没有边框。似乎由于某种原因，表格在添加边框时居中，即 -table.backColor {border: 1px solid;} 而不是透明...

任何帮助将不胜感激。

我一直在使用的 CSS 是：

```
 body {margin: 0;
   }

   td.backColorContent {
          width: 800px; 
          border-right-width: 1px; 
          border-right-style: solid;
          border-right-color: #cbe775;          
          border-left-width: 1px; 
          border-left-style: solid;
          border-left-color: #cbe775;            
          }
   td.backColorSide {
          background-color: #f9ffe7;
          vertical-align:top;
          }

   table.backColor {
                                        position: fixed; 
                                        top: 0px; 
                                        margin-left:auto; 
                                        margin-right:auto; 
                                        width: 100%; 
                                        height: 6000px; 
                                        z-index: -2; 
                                        border-collapse: collapse;
                                        border: 1px transparent;
          } 
```

表格的 HTML 是：

```
<table class="backColor">
 <tr>
  <td class="backColorSide">

  </td>
  <td class="backColorContent">

  </td>
  <td class="backColorSide">

  </td>
 </tr>
</table> 
```

我一直在使用的示例链接在这里：[http ://www.nybblemouse.com/external/test2.html](http://www.nybblemouse.com/external/test2.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:25:12.187

您需要以这种方式重新构建标记并应用样式：

[我的小提琴](http://jsfiddle.net/35tUf/)

# magento - Magento 产品列表按产品类别排序

> ID：11671459
> 
> 赞同：1
> 
> 时间：2012-07-26T14:25:01.923
> 
> 标签：magento, sorting, filter

我试图在产品列表排序工具栏中按“类别”添加排序。这样，当用户单击顶级类别（比如说硬件）并按类别排序时，所有相同的产品类型都会按类别 ID 彼此相邻列出。

有没有人知道如何使这项工作？提前致谢！

# javascript - JavaScript 正则表达式替换日期中的零，年份除外

> ID：11671460
> 
> 赞同：1
> 
> 时间：2012-07-26T14:25:01.710
> 
> 标签：javascript, regex, date, replace

我需要制作一个`07-26-2012`看起来像的日期字符串`7-26-2012`。容易对

```
date = date.replace(/^0/, ''); 
```

但`07-05-2012`也需要`7-5-2012`。最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:29:39.343

尝试`date = date.replace( /0(\d-)/g, "$1" );`

简单测试。

```
var re = /0(\d[\-/])/g;
console.log( "07/02/2012".replace( re, "$1" ) == "7/2/2012" );
console.log( "12-02-2012".replace( re, "$1" ) == "12-2-2012" );
console.log( "01-1-2012".replace( re, "$1" ) == "1-1-2012" ); 
```

如果您在 javascript 中进行繁重的日期操作，请查看[date.js](http://www.datejs.com/)

# objective-c - 将 ASIFormDataRequest 正文记录为 NSString

> ID：11671464
> 
> 赞同：0
> 
> 时间：2012-07-26T14:25:18.007
> 
> 标签：objective-c, ios, asihttprequest, asiformdatarequest

我正在使用 ASIFormDataRequest 向服务器发出多部分请求，并且我想在实际发出请求之前自己查看帖子正文。有什么办法可以将它打印到控制台或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:56:04.420

原来我只需要

```
#define DEBUG_FORM_DATA_REQUEST 1 
```

之后，该库将所有帖子正文记录到控制台（二进制数据除外，它被截断）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:46:39.867

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setStartedBlock:^{
         NSLog(@"setStartedBlock", request.requestHeaders);
}];
...
[request startAsynchronous]; 
```

StartedBlock 是实际与服务器建立连接之前的最后一个回调。

您可以使用我发布的内容记录您的整个标题，或者如果您只想要发布数据，您可以使用詹姆斯的 NSLog。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:35:03.157

你可以试试：

```
NSLog(@"%@", dataRequest.postData); 
```

如果您可以包含一些代码，那将很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T16:31:10.260

我现在无法评论答案，所以我将创建一个答案：

正如 James Paolantonio 所说，您可以使用 NSLog dataRequest.postData，但唯一需要做的就是：通过移动代码将此属性公开

```
@property (retain) NSMutableArray *postData; 
```

从`ASIFormDataRequest.m`到`ASIFormDataRequest.h`

# c# - 仅请求第一项实体框架

> ID：11671469
> 
> 赞同：0
> 
> 时间：2012-07-26T14:25:38.507
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我正在寻找最有效的方法来使用 Entityframework 和 linq 从 SQL Server 数据库中调用第一个也是唯一一个项目。

我目前正在使用

```
public static UserProfile GetUserProfile(Guid userID)
    {
        UserProfile oProfile = null;

        using (var context = new MyEntities())
        {
            var profiles = from c in context.UserProfiles where c.UserID == userID select c;

            if(profiles.Any())
            {
                oProfile = profiles.First();
            }
        }

        return oProfile;
    } 
```

然而，据我所知，这需要两个数据库操作来完成，一个是检查记录是否存在，另一个是返回它。我确信必须有更好的模式/方法，我只是没有看到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:28:08.003

这很简单：使用 FirstOrDefault()。当没有条目时，它将返回 null （就像您已经拥有的一样），否则它将返回第一个条目。如果您不希望您的变量采用空值，请在两者之间使用替代品。

编辑：您的代码可以同样替换为以下代码，只是这个代码只会查询一次数据库。

```
public static UserProfile GetUserProfile(Guid userID)
{
    UserProfile oProfile = null;

    using (var context = new MyEntities())
    {
        oProfile = (from c in context.UserProfiles where c.UserID == userID select c).FirstOrDefault();
    }

    return oProfile;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:38:39.673

您需要使用`First()`或`FirstOrDefault()`不调用`.Any()`

```
var profile = (from c in context.UserProfiles where c.UserID == userID select c).First(); 
```

`First()`如果没有返回记录，则抛出异常，但`FirstOrDefault()`在这种情况下返回 null

两者都会生成这样的 SQL：

```
SELECT TOP (1) ...
FROM ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:53:31.447

如果只存在一项（如本例所示），那么您应该考虑使用 Single()。Single 将返回第一个项目，但如果存在多个项目，则抛出异常 - 如果只存在一个项目，这有助于保持数据质量。

如果应该只存在一个项目，但它是可选的，则使用 SingleOrDefault 它将充当 Single 但如果不存在项目则返回 null 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T14:27:54.340

您应该使用 Take 方法：

[实体框架/Linq to SQL：跳过和采取](https://stackoverflow.com/questions/3870091/entity-framework-linq-to-sql-skip-take)

它只需要对数据库进行一次点击。

# javascript - 遇到奇怪的javascript操作

> ID：11671470
> 
> 赞同：0
> 
> 时间：2012-07-26T14:25:39.037
> 
> 标签：javascript

我正在做一个由别人设计的项目。我遇到了以下操作。我不知道它在做什么。它似乎返回 1。

有人愿意详细说明吗？谢谢！

```
 ( 7  > 8?2:1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:27:31.500

您正在查看[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)。

它由`(condition) ? (expression1) : (expression2)`. 整个表达式将评估`(expression1)`是否`(condition)`为真，`(expression2)`如果`(condition)`为假。

```
var i = (7 > 8 ? 2 : 1); 
```

翻译成

```
if (7 > 8)
{
  i = 2;
}
else
{
  i = 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:27:52.517

请参阅：[http://en.wikipedia.org/wiki/%3F：](http://en.wikipedia.org/wiki/%3F%3a)

如果 7 > 8，您的示例将返回 2，否则返回 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:28:34.293

`? :`是三元运算符。这相当于

```
var x = 0;
if (7 > 8){
  x = 2;
} else {
  x = 1;
} 
```

这是一种表达简单条件语句的简洁方式。这是一种在没有上面使用的详细语义的情况下有条件地为变量赋值的好方法。

# mysql - 在 MySQL 中查找/替换

> ID：11671473
> 
> 赞同：0
> 
> 时间：2012-07-26T14:25:40.927
> 
> 标签：mysql

在 MySQL 中查找替换整个数据库的最佳方法是什么，而不必用一种语言实际编写脚本（我的意思是，如果必须这样做，那就这样吧）。

基本上我想在 Drupal 中用另一个站点名称（我正在设置用于升级的开发服务器）替换站点名称。

我的想法是数据库中的所有链接都需要更改。我更喜欢使用 PHPMyAdmin 来执行此操作，但我也很乐意使用命令行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:28:09.783

假设您有一个表设置，例如：

```
sites
    site_id
    url 
```

您可以[`REPLACE()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)在`UPDATE`命令中使用：

```
UPDATE sites SET url=REPLACE(url, 'findUrl.com', 'replaceUrl.com'); 
```

**更新：**为了支持在给定数据库中的每个表中的每个列上“查找和替换”的需要，a[`Stored Procedure`](http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html)是必需的（当然，如果您想直接在 MySQL 中执行此操作）。这是可以做到的粗略草案***（未经测试） ：***

```
DELIMITER $$

CREATE PROCEDURE `find_replace_in_all_tables`()
BEGIN
    DECLARE done INT DEFAULT 0;
    DECLARE TABLE_NAME CHAR(255);
    DECLARE COLUMN_NAME CHAR(255);

    DECLARE tables CURSOR for 
        SELECT table_name, column_name FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = DATABASE();

    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    OPEN tables;
    WHILE done = 0 DO
        FETCH NEXT FROM tables INTO TABLE_NAME, COLUMN_NAME;

        IF done = 0 THEN
            SET @SQL_TEXT = CONCAT("UPDATE `", TABLE_NAME, "` SET `", COLUMN_NAME, "`=REPLACE(`", COLUMN_NAME, "`, 'findUrl.com', 'replaceUrl.com');");

            PREPARE statement FROM @SQL_TEXT;
            EXECUTE statement;
            DEALLOCATE PREPARE statement;
        END IF;
    END WHILE;

    CLOSE tables;
END 
```

存储过程为当前数据库中的每个表/列遍历[`information_schema`](http://dev.mysql.com/doc/refman/5.0/en/information-schema.html)数据库。使用此列表，它会构建一个`UPDATE`类似于我的原始答案的查询并执行它。如果您限制查询中的列类型，或者如果您知道可以进行替换的确切列名，这可能会更有效`SELECT`（但我想您不需要进行查找+替换。

# jquery - 在 jQuery 中通过 AJAX 提交表单不起作用

> ID：11671477
> 
> 赞同：1
> 
> 时间：2012-07-26T14:25:51.500
> 
> 标签：jquery, ajax, send

我使用以下 jQuery 代码通过 AJAX 提交表单。

```
$(function(){
    $("#forma_upis").submit(function(){
        $.ajax({
            url:$(this).attr("action"),
            type:$(this).attr("method"),
            data:$(this).serialize(),
            success:function(data){

            $("#Formcontent").fadeOut('slow');
            /*$("#content").load("stranice/lista_upis.php");*/

            if(data==1)
                {
                    $("#content").load("stranice/lista_upis.php");
                }
                else
                {
                alert(data);
                    alert("Error!!!");
                }

            }

        });

        return false;
    });

}) 
```

这在我的 PC 上工作，但是当我在另一台 PC 上尝试时它不起作用，我收到错误并且不发送数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:37:31.900

在您的情况下，您必须查看一些内容，例如：

1）您是否在另一台 PC 中正确链接了 JQuery 库？

2) 在另一台 PC 上你有 php 文件 (stranice/lista_upis.php) 吗？

3）服务器端在另一台PC上工作？

希望能帮助到你...

# html - 为什么 2012 年伦敦奥运会官方网站不让自己得到验证？

> ID：11671478
> 
> 赞同：0
> 
> 时间：2012-07-26T14:25:55.853
> 
> 标签：html, performance, validation, markup, w3c-validation

本着奥运建设的精神，我想我应该用专业的眼光看一下官方网站（[http://www.london2012.com](http://www.london2012.com)）。YSlow 报告了相当多的“F”等级，所以我想我会使用 W3C 验证服务 ( [http://validator.w3.org](http://validator.w3.org) ) 检查标记...

它不起作用 - 结果我得到了 403（禁止）。谁能解释一下为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:43:53.343

验证器在服务器端被阻止（可能由用户代理或 IP）。

这是服务器抛出的拒绝访问消息的 HTML（通过尝试在验证器工具中[验证接收到的错误文档](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.london2012.com%2F&charset=%28detect+automatically%29&doctype=Inline&ss=1&group=0&No200=1&user-agent=W3C_Validator%2F1.3)`show source`并勾选选项获得）：

```
<HTML><HEAD>
<TITLE>Access Denied</TITLE>
</HEAD><BODY>
<H1>Access Denied</H1>
You don't have permission to access "http://www.london2012.com/" on this server.<P>
Reference #18.40140712.1343313311.29cc62c
</BODY>
</HTML> 
```

然而，目前还不清楚*为什么*服务器会拒绝对验证器的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:12:44.747

W3C CSS 验证器在 193 行源代码中显示 24 个 CSS 错误和 38,547 个警告，移动设备有 26 个错误和 0% 的移动友好性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:47:23.087

如果你使用的是 Firefox，你可以使用这个技巧：

*   安装[Web 开发者工具栏](https://addons.mozilla.org/en-US/firefox/addon/web-developer/)
*   打开网址
*   在 Web 开发人员工具栏中，使用“工具”->“验证本地 HTML”

它基本上只是将源代码的副本发送到 W3C 验证服务。

# python - 有没有办法使用伪随机序列或散列函数模拟队列的 python random.shuffle？

> ID：11671490
> 
> 赞同：5
> 
> 时间：2012-07-26T14:26:20.850
> 
> 标签：python, algorithm, mongodb, random, hash

我正在构建一个基于任务队列的应用程序：它为多个异步连接的客户端提供一系列任务。不同的是，**任务必须以随机顺序执行**。

我的问题是我现在使用的算法计算量很大，因为它依赖于许多大型查询和数据库传输。我有一种强烈的预感，有一种更便宜的方法可以达到相同的结果，但我看不到解决方案。你能想出一个聪明的办法来解决这个问题吗？

这是我现在使用的（计算成本高的）算法：

当客户端查询新任务时...

1.  查询数据库中的“未完成”任务
2.  将所有任务放在一个列表中
3.  随机播放列表（使用 random.shuffle）
4.  将第一个任务标记为“进行中”
5.  将任务参数发送给客户端完成

当客户完成任务...

6a。记录结果并将任务标记为“已完成”。

如果客户未能在某个截止日期前完成任务......

6b。将任务重新标记为“未完成”。

似乎我们可以通过将步骤 1、2 和 3 替换为伪随机序列或散列函数来做得更好。但我无法完全弄清楚整个解决方案。想法？

其他注意事项：

*   如果它很重要，我将使用 python 和 mongodb 来完成所有这些。（Mongodb 没有一些巧妙的“使用 find_one 来有效地返回随机匹配条目”的用法，是吗？）
*   术语“队列”有点误导。所有任务都存储在 mongodb 中单个集合的子字段中。集合中的长度（任务总数）在一开始是已知的并且是固定的。
*   如果有必要，可以多次分配相同的任务，只要这种情况很少发生。但是这种情况需要非常罕见，因为完成每项任务都是昂贵的。
*   我有每个客户的识别信息，所以我们确切地知道谁发起了每个任务请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:34:02.703

有*一种*简单的方法可以从 MongoDB 中获取随机文档！

请参阅[MongoDB 中的随机记录](https://stackoverflow.com/questions/2824157/random-record-from-mongodb)

如果您不希望任务被选中两次，您可以将任务标记为活动而不选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:47:36.507

啊，根据我错过的评论，您可以按照以下方式做一些事情：

```
import random
available = range(lengthofdatabase)
inprogress = []
while len(available) > 0:
    taskindex = available.pop(random.randrange(0, len(available)))
    # I'm not sure of your implementation, but you said something 
    # along these lines was possible
    task = GetTask(taskindex)
    inprogress.append(taskindex) 
```

我不确定您正在使用的任何功能 - 这只是一种算法。

快乐编码！

# database - 从数据库加载图像到jsp（struts2）

> ID：11671492
> 
> 赞同：0
> 
> 时间：2012-07-26T14:26:29.487
> 
> 标签：database, image, jsp, struts2

我在将图像从数据库加载到 jsp 视图时遇到问题。看起来动作正在执行但在中间停止。我在 execute() 方法开始和结束时记录。在日志文件中，我可以看到启动此方法，但没有结束。

我有行动：

```
public class ShowImageAction extends BaseAction {

    private static final long serialVersionUID = 1L;

    private static final Log LOG = LogFactory.getLog(ShowImageAction.class);

    private int id;

    public String execute() {
        LOG.info("Enter execute()");
        MessageBean messageBean = (MessageBean) sessionParameters
                .get(SessionParameters.BANNER_EDIT);

        IFiles filesEJB = EJBLocator.getFiles();
        if (messageBean != null) {
            id = messageBean.getBannerId();
        }

        FileBean file = filesEJB.file(id);

        LOG.info("Id = " + id);
        if (file != null) {
            byte[] bytes = null;
            try {
                LOG.info("File: name = " + file.getName() + ". type = "
                        + file.getType());
                if (file.getImage() != null) {
                    bytes = FileUtils.readFileToByteArray(file.getImage());
                    HttpServletResponse response = ServletActionContext
                            .getResponse();
                    response.setContentType(file.getType());
                    OutputStream out = response.getOutputStream();
                    out.write(bytes);
                    out.close();
                } else {
                    LOG.info("execute(): Nie udało się pobrać pliku z bazy danych!");
                }
            } catch (IOException e) {
                LOG.error(e);
            }
        } else {
            LOG.info("execute(): Nie udało się pobrać pliku z bazy danych!");
        }
        LOG.info("Exit execute()");
        return NONE;
    } 
```

jsp：

```
 <div class="OneFilteringRow">
        Podgląd<br />
        <img src="/ebok-bm/ShowImageAction" alt="Podgląd banera" />
    </div> 
```

struts.xml

```
 <action name="ShowImageAction"
            class="pl.bm.action.content.ShowImageAction">
    </action> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:08:07.273

切换到您自己的结果实现 Result 类并在此处写入输出。其他在`struts.xml`行动结果类型中指定自己的近似匹配参数。参考：[生成自己的图像作为动作结果](http://lkreddy.blogspot.in/2012/04/how-to-write-our-own-result-type-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:22:47.420

问题出在：

```
FileBean file = filesEJB.file(id); 
```

我从数据库中获取字节并尝试将其保存到 tmpFile。现在我得到字节并将它们写入一个临时文件并立即将其传输到操作，一切正常。我现在有：

```
 FileBean file = filesEJB.file(id);

    LOG.info("Id = " + id);
    if (file != null) {
        byte[] bytes = null;
        try {
            LOG.info("File: name = " + file.getName() + ". type = "
                    + file.getType());
            if (file.getImage() != null) {
                **bytes = file.getImage();**
                HttpServletResponse response = ServletActionContext
                        .getResponse();
                response.setContentType(file.getType());
                OutputStream out = response.getOutputStream();
                out.write(bytes);
                out.close();
            } else {
                LOG.info("execute(): Nie udało się pobrać pliku z bazy danych!");
            }
        } catch (IOException e) {
            LOG.error(e);
        }
    } 
```

# mysql - 练习帮助 - 选择平均分最高的学生的注册号

> ID：11671497
> 
> 赞同：1
> 
> 时间：2012-07-26T14:26:36.527
> 
> 标签：mysql, sql

我在我的大学学习 SQL，我正在练习这个练习并且卡住了！我有一个数据库，用于存储学生为特定教学所通过的所有考试。

这些是数据库中的表：

```
 Student(**number**, name, birthday)

   Exam(**student_number**, **teaching_code**, vote)  *(store the exams passed by the students with vote)*

   Teaching(**code**, name) 
```

其中 number 是 Student 表的主键，code 用于 Teaching，“student_number”在 Student 中引用“number”，“teaching_code”在 Teaching 中引用“code”。

练习要求选择平均得分最高的学生的数字。

我知道如何编写一个查询，它给我一个包含每个学生平均数的表格，但我不知道如何从中选择最高的或如何显示相应的学生编号！

如果存在一些学生具有相同的最高平均值，则使用限制命令的解决方案不起作用......

显示每个学生的平均分数的查询是：

```
select  avg(e.vote) as Average from STUDENT s, EXAM e
where s.number = e.student_number
group by s.number 
```

编辑：我在 SQL 中尝试了 MAX 函数，我试过这个：

```
select  MAX( avg(e.vote) ) as Average from STUDENT s, EXAM e
where s.number = e.student_number
group by s.number 
```

但它说“错误代码：1111。无效使用组功能”

可能解决方案是使用嵌套查询，但我无法实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:37:44.043

`SELECT MAX(Expression) FROM tables WHERE Condition`

您可以查看有关如何使用和找到最高价值的[文档。](http://www.techonthenet.com/sql/max.php)`MAX`

如果要选择`TOP`5 或 10 或 20... 最高，请使用[TOP](http://www.w3schools.com/sql/sql_top.asp)子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:44:19.143

```
select student_code, MAX(avg_vote)
FROM (
    SELECT student_code, AVG( vote) as avg_vote
    FROM Exam
    GROUP BY student_Code ) t
GROUP BY student_code 
```

我没有检查那个查询。可以查询以选择最大平均值是这样的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:58:53.730

可惜MySQL似乎不支持CTE，那么这将如此简单。

```
select t.student_code, t.avg_vote
FROM (SELECT student_code, AVG(vote) as avg_vote
      FROM Exam
      GROUP BY student_Code) t
WHERE t.avg_vote = (select max(avg_vote) 
                    FROM (SELECT student_code, AVG(vote) as avg_vote
                          FROM Exam
                          GROUP BY student_Code)) 
```

继续努力学习，得到一个可能的答案远不如自己实际得出结论有用。实际上，如果你幸运的话，我的建议不会奏效（我还没有测试过），所以你必须自己想出正确的修改！

# javascript - Highcharts highstocks - 双图表轴问题

> ID：11671500
> 
> 赞同：0
> 
> 时间：2012-07-26T14:26:44.827
> 
> 标签：javascript, highcharts, bar-chart, highstock

浏览 Highstocks 的文档，我发现[了这个例子](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/candlestick-and-volume/)：

![示例 1](../Images/5e1f445c419e24a4886fe981bcf1968c.png)

这里显示的是同一张图表上的两个系列，因此使用链接范围选择器 - 这确实非常有用，但我希望显示一些不同的东西，这被证明是非常困难的。

我正在寻找的是顶部系列上的正常折线图，表示绘制到时间上的数据（几乎就像在本示例中一样），但下部图中的条形图或水平蜡烛图，表示一个或多个时间线。

我已经绘制了我正在寻找的图像：

![在此处输入图像描述](../Images/513cb085d920bdb9294aac8939e07127.png)

我为粗略的绘图道歉，但希望它显示了我的目标：顶部的标准图，底部的条形图/蜡烛图。

我尝试了各种技术来渲染它，但我找不到一种方法让两个系列**在相同的时间尺度上绘制，并与相同的范围选择器链接。**

如果有帮助，这里是 JSFiddle 的起点，删除了所有不必要的代码：http: [//jsfiddle.net/g105b/8JhXv/](http://jsfiddle.net/g105b/8JhXv/)

以及原始演示的链接：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/candlestick-and-volume/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/candlestick-and-volume/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:24:41.640

答案取自[Highcharts 官方论坛](http://highslide.com/forum/viewtopic.php?f=12&t=19373)

> 这是可能的，但有一些限制。事实上你想显示甘特图。在您的情况下，条形图是不可能的 - 条形图 = 倒置的整个图表（yAxis 变成 xAxis 等）。而是看一下甘特图的示例：http: [//jsfiddle.net/highcharts/r6emu/](http://jsfiddle.net/highcharts/r6emu/)
> 
> 您可以将它们组合成一个效果：http: [//jsfiddle.net/8JhXv/1/](http://jsfiddle.net/8JhXv/1/)
> 
> 关于限制：
> 
> *   底部图表的工具提示仅在鼠标悬停开始和结束日期时可用
> *   条在线上，而不是在它们之间

# apache-flex - 为什么 flex 中有一个 MX 库和一个 Spark 库？

> ID：11671502
> 
> 赞同：0
> 
> 时间：2012-07-26T14:26:45.027
> 
> 标签：apache-flex, flex-mx, flex-spark

我是 flex 的新手，对有一个“MX”库和一个“Spark”库感到非常困惑？他们有很多类似的控件。

为什么两者都存在？我应该选择哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:30:17.753

MX 是旧的 Flex 3 库。

Spark 是新的 Flex 4 库。它具有更好的皮肤/样式功能，更快并且针对移动设备进行了优化。

恕我直言，在 95% 的情况下，Spark 是更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:30:02.013

新的 flex 架构是火花。Spark 组件是可换肤的，重量更轻。火花组件也可用于移动应用程序。

因此，如果可能，请使用火花组件。

# objective-c - mainStoryBoard , 源码模式

> ID：11671503
> 
> 赞同：0
> 
> 时间：2012-07-26T14:26:46.153
> 
> 标签：objective-c, xcode4, xcode4.2

我有一个应用程序是 TAB BAR CONTROLLER，在第一个和最后一个选项卡中它有另一个 TAB BAR CONTROLLER，我正在尝试添加标题和图像。

我对第一个没有问题，但我对最后一个有问题。我认为是图像，我写道：

```
<tabBarItem key="tabBarItem" title="Stations" image="ico_paradas.png" id="J2M-ix-HLu"/> 
```

有效，这是第一个。

最后一个：

```
<tabBarItem key="tabBarItem" title="Info" image="ico_info.png" id="hnR-0m-dE0"/> 
```

它犯了一个错误：

```
Command /Applications/Xcode.app/Contents/Developer/usr/bin/ibtool failed with exit code 255 
```

但是，如果我将图像值更改为另一个，它就可以工作。

我还检查了图像，并将其添加到另一个选项卡中，mainStoryBoard 处于图形模式，它可以工作，当我从源代码添加它时它不起作用，我无法将它添加到图形模式，因为它是一个 TAB BAR控制器变成一个标签栏控制器。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:57:39.333

子类化您的标签栏控制器并以编程方式设置其标题和图像。使用故事板源代码几乎不是一个好主意。

# ruby-on-rails - Rails 设计令牌验证 Rspec JSON API 测试会话问题

> ID：11671507
> 
> 赞同：1
> 
> 时间：2012-07-26T14:26:48.477
> 
> 标签：ruby-on-rails, json, api, rspec, devise

我正在使用 Ruby on Rails 为移动应用程序构建 JSON api。我有一个像这样工作的随机游戏功能：

1.  玩家 1 请求随机游戏。
2.  玩家 2 请求随机游戏。
3.  由于玩家配对，游戏现在开始。

这是由 /games/random_game.json 调用完成的。

rspec 测试如下所示：

```
it "should start a random game" do
    post "/api/v1/games/random_game.json", 
      :token => player1.authentication_token,
      :game_type => "tictactoe"

    post "/api/v1/games/random_game.json", 
      :token => player2.authentication_token,
      :game_type => "tictactoe"

    parsed_body = JSON.parse(last_response.body)
    parsed_body.has_key?("gamestate").should == true
    end 
```

预期：第一次调用应该返回状态：成功第二次调用应该返回新游戏的 json

怎么了：

第一次调用返回状态：成功

第二次调用返回状态：失败错误：“玩家不能有两个相同类型的未决游戏”

在随机游戏方法中，我抛出了用户的打印声明。它始终是玩家一号。

在随机游戏方法中，我看到了参数的打印语句。它发布了两个不同的令牌。

最糟糕的是，如果我使用 CURL 进行这些相同的调用，它会成功。

Rspec 中是否发生了缓存用户会话的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:48:14.713

您可以像这样存根身份验证令牌：

```
player1.stub(:authentication_token).and_return("test1234")
player2.stub(:authentication_token).and_return("test4321") 
```

# php - 谷歌缓存只显示页眉和页脚。跳过正文内容

> ID：11671511
> 
> 赞同：2
> 
> 时间：2012-07-26T14:27:00.657
> 
> 标签：php, jquery, search-engine

我的网站有问题。在搜索引擎中查找我的网站，并查看索引页面的缓存版本，只显示页面的页眉和页脚。中间的一切都被省略了。此问题仅在索引页面中很明显。网站上的其他页面都很好。

[这是缓存的页面](http://webcache.googleusercontent.com/search?q=cache%3asEcz9z-lhrsJ%3awww.mrkabat.com/%20&cd=12&hl=en&ct=clnk)

[这是该页面的直接链接。](http://www.mrkabat.com/)

**注意事项：**

*   这个问题似乎不仅发生在 Google 搜索中，而且也发生在 Bing 和 Yahoo 中。

*   在谷歌缓存中，可以显示页面的纯文本版本，这似乎很好地显示了页面，包括省略的内容但没有样式。

*   在google站长工具中，index页面的页面预览没有这个问题。它显示它很好。

*   索引页面使用 jquery 插件来显示汽车品牌，并允许根据地区/国家进行排序。我不知道这是否是罪魁祸首。

*   我的网站是阿拉伯语。对不起，如果你什么都不明白.-。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:52:58.740

我认为 Google 似乎无法解析您的文档。`<html></html>`您的文档中有 2 组标签，这可能会导致 Google 引擎出现混乱和错误。

我强烈建议您使用 W3 Validator 修复您的 HTML 错误，这可能会允许 Google 解析您的文档而不会出现错误。

[http://validator.w3.org/check?uri=http%3A%2F%2Fwww.mrkabat.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.mrkabat.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

# php - 从边界框确定文本坐标的正确方法是什么？

> ID：11671513
> 
> 赞同：9
> 
> 时间：2012-07-26T14:27:12.173
> 
> 标签：php, text, gd, bounding-box

给定调用的结果，[`imagettfbbox()`](http://us3.php.net/manual/en/function.imagettfbbox.php)要提供什么正确的、像素完美的点以[`imagettftext()`](http://us3.php.net/manual/en/function.imagettftext.php)使文本不会超出其边界框？

我正在从边界框确定基线的宽度/高度和 x/y，如下所示：

```
$box = imagettfbbox($size, $angle, $font, $text);
$boxXCoords = array($box[0], $box[2], $box[4], $box[6]);
$boxYCoords = array($box[1], $box[3], $box[5], $box[7]);
$boxWidth = max($boxXCoords) - min($boxXCoords);
$boxHeight = max($boxYCoords) - min($boxYCoords);
$boxBaseX = abs(min($boxXCoords));
$boxBaseY = abs(min($boxYCoords)); 
```

然后我在边界框尺寸的图像上绘制一个填充矩形：

```
imagefilledrectangle($image, 0, 0, $boxWidth - 1, $boxHeight - 1, $color); 
```

之后，我绘制文本：

```
imagettftext($image, $size, $angle, $boxBaseX, $boxBaseY, $color, $font, $text); 
```

但是，这会导致文本超出矩形一两个像素。我已经在 PHP 的文档中看到过多次尝试解决此问题`imagettfbbox()`，但他们都只是建议在这里和那里减去一两个像素，这对我来说似乎是一种 hack。这里发生了什么，为什么我们需要捏造数字才能让事情变得正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T14:42:24.213

我相信没有完美的方法可以根据`imagettfbbox()`返回的内容以及使用 .ttf 非等宽字体在图像上放置具有单像素精度的文本。在 PHP 手册中，许多用户已经发布了实现此目的的方法（无论是否捏造数字）；我建议在 PHP 手册中使用[jodybrabec 的简单函数，它可以计算精确的边界框。](http://es.php.net/manual/en/function.imagettfbbox.php#105593)我已经对此进行了测试，只有在极端情况下，文本在一个方向上最多相差 1 个像素。尽管如此，如果您向图像添加一些填充（即使它只是 2 或 3 个像素），您的文本将 100% 的时间在图像的尺寸范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:52:52.623

[SlightlyMagic HQ Card Generator](http://www.slightlymagic.net/forum/viewtopic.php?f=30&t=465)项目为策略纸牌游戏 Magic: the Gathering 渲染纸牌。生成器由内置高级文本渲染引擎的 PHP 提供支持。我不知道计算背后的逻辑，但对于此应用程序而言，渲染器非常准确。这是计算正确边界框 ( `HQ Card Generator 8.x/scripts/classes/font.php`) 的函数：

```
private function convertBoundingBox ($bbox) {
    // Transform the results of imagettfbbox into usable (and correct!) values.
    if ($bbox[0] >= -1)
        $xOffset = -abs($bbox[0] + 1);
    else
        $xOffset = abs($bbox[0] + 2);
    $width = abs($bbox[2] - $bbox[0]);
    if ($bbox[0] < -1) $width = abs($bbox[2]) + abs($bbox[0]) - 1;
    $yOffset = abs($bbox[5] + 1);
    if ($bbox[5] >= -1) $yOffset = -$yOffset;
    $height = abs($bbox[7]) - abs($bbox[1]);
    if ($bbox[3] > 0) $height = abs($bbox[7] - $bbox[1]) - 1;
    return array(
        'width' => $width,
        'height' => $height,
        'xOffset' => $xOffset, // Using xCoord + xOffset with imagettftext puts the left most pixel of the text at xCoord.
        'yOffset' => $yOffset, // Using yCoord + yOffset with imagettftext puts the top most pixel of the text at yCoord.
        'belowBasepoint' => max(0, $bbox[1])
    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:56:28.973

当您不从该行中的每个维度中减去一个时会发生什么：

```
imagefilledrectangle($image, 0, 0, $boxWidth - 1, $boxHeight - 1, $color); 
```

而是这样做：

```
imagefilledrectangle($image, 0, 0, $boxWidth, $boxHeight, $color); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-19T17:17:13.693

我知道这有点晚了，但 imagettfbbox 的单位是点而不是像素。

[imagettftext 中的像素字体大小而不是磅值](https://stackoverflow.com/questions/4357716/pixel-font-size-in-imagettftext-instead-of-point-size)

# zend-framework - Zend_Uri_Http: 提供的 URI 无效 - 即使 url 有效

> ID：11671524
> 
> 赞同：0
> 
> 时间：2012-07-26T14:27:32.637
> 
> 标签：zend-framework, url

我有一个类似的网址

```
http://one/two/three:four&five=six|seven 
```

我也有

```
Zend_Uri_Http::setConfig(array('allow_unwise' => true)); 
```

为了能够使用“|”。当我尝试使用

```
Zend_Http_Client::setUri() 
```

在我的网址上，我明白了

```
Zend_Uri_Exception: Invalid URI supplied 
```

当我从浏览器点击 url 时，它可以工作。如何避免这个问题。欢迎任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:01:03.753

如果您将 URL 更改为：

```
http://one/two/three:four?five=six|seven 
```

该 URI 中的查询字符串应该是什么？您必须先将查询字符串与路径分开，`?`然后才能用于`&`分隔参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:00:10.720

所以事实证明我有一个重写规则，在我的 httpd-vhosts.conf 文件中定义，它在我的无效 url 被命中后创建了有效的 url。因为我需要从 zend 框架 phpunit 测试中点击 url，所以我手动应用了重写规则并获得了正确的 url

故事的寓意，将所有相关信息放入您的问题中，否则，没有人可以帮助您

# c# - 按查询集成多个组（将一个表与其他表连接并计算匹配项）

> ID：11671525
> 
> 赞同：0
> 
> 时间：2012-07-26T14:27:34.623
> 
> 标签：c#, linq-to-sql, group-by

在应用程序中，我需要显示每个状态（来自）的客户、产品、{在此处插入其他实体}（来自、等）的数量*（计数*）。`db.Custmers``db.Products``db.Geodata`

结果可能看起来像

> ```
> Customers: { Status = "OK", Count = 59 }
>            { Status = "INVALID", Count = 14 }
>            { Status = "NO_RESULT", Count = 29 }
> 
> Products:  { Status = "OK", Count = 541 }
>            { Status = "INVALID", Count = 33 }
>            { Status = "NO_RESULT", Count = 42 } 
> ```

所以我写了一个查询......

```
from customer in db.Kunden
join pin in db.Geodata
    on customer.AdressNr equals pin.AdressNr
group customer by pin.Status
into groups
select new {Status = groups.Key, Count = groups.Count()}; 
```

还有一个……

```
from product in db.Products
join pin in db.Geodata
    on product.AdressNr equals pin.AdressNr
group product by pin.Status
into groups
select new {Status = groups.Key, Count = groups.Count()}; 
```

还有更多。他们工作得很好。但是我正在努力将它们全部集成到一个查询中（从而合并重复的部分，即最后两行）。

我怎样才能做到这一点？

**编辑：谁能帮我改进这个问题？是否缺少任何关键信息？这是太本地化了，还是太宽泛了？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T10:00:25.760

*即使现在可能为时已晚，它也可能对您有所帮助。*

LINQ 的设计并未像在 SQL 中那样构建其语句，而您可能会在其中使用`StringBuilder`或类似的东西。

LINQ 优于 SQL 的优点是在编码时进行编译时检查。在 SQL 中，您必须运行代码并进行反复试验。

但是，在您提出问题 5 个月后，我发现了一个类似的问题：[https](https://stackoverflow.com/a/13797168) ://stackoverflow.com/a/13797168 。

采用这种方法，您可能会得到以下内容：

```
public object[] GetCustomers()
{
    return GetEntityCount("Customers");
}

private object[] GetEntityCount(string entityName)
{
    return (from obj in GetSpecificEntity(entityName) join pin ...).ToArray();
}

private IEnumerable GetSpecificEntity(string entityName)
{
    switch (entityName)
    {
        case "Customers": return db.Customers;
    }
} 
```

# javascript - Raphael JS 在自定义路径上设置动画对象的问题

> ID：11671526
> 
> 赞同：1
> 
> 时间：2012-07-26T14:27:37.833
> 
> 标签：javascript, jquery, animation, svg, raphael

我查看了[http://raphaeljs.com/gear.html](http://raphaeljs.com/gear.html)这个演示代码。

但它使用 eliipse 并且默认情况下它的位置 (x,y) 与它的中心相同。当我使用图像时，图像会以一种奇怪的不可预测的方式翻转。

我想要做的是在二次贝塞尔曲线上从一个点到另一个点的图像移动动画，并沿着路径旋转图像。

任何人都可以请帮助我吗？

# memory-management - 多级页表分层分页

> ID：11671527
> 
> 赞同：2
> 
> 时间：2012-07-26T14:27:38.423
> 
> 标签：memory-management, operating-system

考虑一个具有 32 位虚拟地址和 1KB 页面的虚拟内存系统。每个页表条目需要 32 位。希望将页表大小限制为一页。

1.  需要多少级页表？
2.  其中两级表有 256 个条目；一级表有 64 个条目。（8+8+6=22）。如果顶级页表有 2^6 个条目，那么可能有多少页？
3.  如果中级页表有 2^6 个条目，那么可能有多少页？
4.  如果底层页表有 2^6 个条目，那么可能有多少页？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T15:22:55.857

在这样的系统上有 2^32/2^10 = 2^22 个页面。这意味着只需要 22 位来寻址一个页面。为了简单和实用，大多数现代系统会将其与 32 位对齐并使用额外的位作为标志，因此在 32 位页表条目中，页表地址中有 16 MB。一个页面可以容纳 256 个条目，需要总页数为 2^22 / 256 = 16384 以获得最深的级别。下一级将有 16384 / 256 = 64；由于 64 < 256，最高级别将适合一页，因此答案是 3。

如果您不考虑 32 位对齐（这在现实世界中是站不住脚的），那么答案仍然是三个，因为在 22 位上，每页最多有 372 个条目，因此，2^22/ 372 = 11275第一个和 11275 / 372 = 30 表示第二个，1 表示第三个。

或者，您可以从上到下解释它，因此不是从最深层次开始，而是从顶层开始。在这种特殊情况下，从顶部开始将导致每页具有最多未使用条目的最深级别。这显然不理想，最好在更高级别有未使用的页表条目。

然而，对于这两种解释中的任何一种，答案无疑是 3。

# jquery - jquery 阻止下拉列表中的 selectedindexchanged 事件？

> ID：11671531
> 
> 赞同：0
> 
> 时间：2012-07-26T14:27:45.103
> 
> 标签：jquery, asp.net

我有一个下拉列表，我在其中创建了 jquery 进行多选。当我添加 autopostback=true 和 selectedindexchanged 事件时，下拉菜单不会触发。

如果我使用 jquery，请建议我如何触发 selectedindexchanged 事件？

# google-app-engine - 为什么在运行 Google App Engine Python 2.7 Mac OSX 时 PIL 不能在本地加载？

> ID：11671540
> 
> 赞同：3
> 
> 时间：2012-07-26T14:28:04.603
> 
> 标签：google-app-engine, python-2.7, python-imaging-library

我在 Mac OSX 10.7.4 上使用 Google App 引擎。当我从命令行加载 PIL 时，一切正常。但是，当我从 GAE 本地环境加载它时，即：

> 导入图片

给我错误：

> ImportError：没有名为 Image 的模块

这条线工作正常：

> 从 google.appengine.api 导入图片

所以我不相信我的安装有问题。当我将它部署到 GAE 时，该应用程序运行良好。另外，我在 app.yaml 中加载了 PIL 库：

```
libraries:
- name: webapp2
  version: "2.5.1"
- name: lxml
  version: latest
- name: PIL
  version: latest
- name: numpy
  version: latest 
```

我也在 /usr/bin/python, 2.7.1 中使用 python。我使用以下方法安装了 PIL：

```
brew install pip
pip install pil 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T19:00:44.340

您需要使用：`from PIL import Image`。

# wpf - 在 Caliburn 中找不到 ViewModel (IWindowManager.ShowDialog) 的视图

> ID：11671544
> 
> 赞同：0
> 
> 时间：2012-07-26T14:28:15.010
> 
> 标签：wpf, c#-4.0, mvvm, caliburn.micro

问题是，当我使用 windowManager.showDialog() 函数的第三个参数（即设置）时，我收到错误消息，即未找到我的 ViewModel 的视图。

```
var view = Caliburn.Micro.ViewLocator.LocateForModel(MyViewModel, null, null);
dynamic settings = new System.Dynamic.ExpandoObject();
settings.ShowInTaskbar = false;
Caliburn.Micro.ViewModelBinder.Bind(MyViewModel, view, null);
this.windowManager.ShowDialog(MyViewModel, "", settings); 
```

看起来像提供设置，视图不见了。但是当我删除最后两个参数时，事情工作文件。我尝试过 SO 和其他论坛，但找不到答案。

提前感谢您的支持。伊尔凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T22:57:03.870

简短回答：尝试在不指定**上下文**`null`参数的情况下显示对话框 -通过利用**C# 4.0**中引入的[**可选参数**](http://msdn.microsoft.com/en-us/library/dd264739.aspx)将其保留为默认值：

 **```
this.windowManager.ShowDialog(MyViewModel, settings: settings); 
```

长答案：这是方法[WindowManager.ShowDialog()](http://caliburnmicro.codeplex.com/SourceControl/latest#src/Caliburn.Micro.Silverlight/WindowManager.cs)的样子：

```
/// <summary>
/// Shows a modal dialog for the specified model.
/// </summary>
/// <param name="rootModel">The root model.</param>
/// <param name="context">The context.</param>
/// <param name="settings">The optional dialog settings.</param>
public virtual void ShowDialog(object rootModel,
                               object context = null,
                               IDictionary<string, object> settings = null)
{
    var view = EnsureWindow(rootModel,
                           ViewLocator.LocateForModel(rootModel, null, context));

    ViewModelBinder.Bind(rootModel, view, context);

    var haveDisplayName = rootModel as IHaveDisplayName;

    if(haveDisplayName != null &&
       !ConventionManager.HasBinding(view, ChildWindow.TitleProperty))
    {
        var binding = new Binding("DisplayName") { Mode = BindingMode.TwoWay };
        view.SetBinding(ChildWindow.TitleProperty, binding);
    }

    ApplySettings(view, settings);

    new WindowConductor(rootModel, view);

    view.Show();
} 
```

Notice that it call `EnsureWindow()` and pass **context** argument into. If you specify this argument as **string.Empty** (or **""**) it will be treated further in Caliburn implementation differently then just `null` value to find corresponding View for provided view-model.

Hope this help.**

# java - DalvikVM 操作码的 Smali 语法

> ID：11671545
> 
> 赞同：0
> 
> 时间：2012-07-26T14:28:16.413
> 
> 标签：java, android, dalvik, smali

## 序幕

我正在尝试使用用于 dex 文件的 Smali/Baksmali 汇编器/反汇编器来了解 DalvikVM 指令。

## 问题

从这个java文件

```
package gd;

class Hello {
    public static void main(String[] args)
    {
      System.out.println("Hello!");
    }
} 
```

我已经生成了以下 smali 汇编文件：

```
.class Lgd/Hello;
.super Ljava/lang/Object;
.source "Hello.java"

# direct methods
.method constructor <init>()V
    .registers 1

    .prologue
    .line 3
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    return-void
.end method

.method public static main([Ljava/lang/String;)V
    .registers 3
    .parameter

    .prologue
    .line 6
    sget-object v0, Ljava/lang/System;->out:Ljava/io/PrintStream;

    const-string v1, "Hello!"

    invoke-virtual {v0, v1}, Ljava/io/PrintStream;->println(Ljava/lang/String;)V

    .line 7
    return-void
.end method 
```

我的问题是关于以下行。

```
sget-object v0, Ljava/lang/System;->out:Ljava/io/PrintStream; 
```

据我了解，这会将类的静态对象加载`PrintStream`到`java.lang.System`寄存器`v0`中。现在，这是什么`out:`意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:46:49.480

PrintStream 实际上是正在加载的事物的类型。您正在加载的对象可能称为`java.lang.System.out`，其中`java.lang`是包，`System`是类，`out`是要加载的成员（静态字段）。

您可以在 invoke-virtual 中看到相同的模式：`java.io`是包，`PrintStream`是类，`println`是成员（在这种情况下，是实例方法）。在这两种情况下，成员前面都有一个`->`. 我不知道这种模式在整个 Smali 中是否一致。

当我在玩 dalvik 的东西时，我发现[http://source.android.com/tech/dalvik/dalvik-bytecode.html](http://source.android.com/tech/dalvik/dalvik-bytecode.html)非常宝贵，尽管在这种情况下它的贡献只是确定 sget-object 只需要两个参数。这告诉我`->out:`业务必须是静态字段引用的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:48:33.763

实际上它读取名为java.io.PrintStream`out`类的静态字段。`java.Lang.System. The (expected) type of that field is`

# google-app-engine - 使用 Channel API 在 Google App Engine 应用程序中可以同时处理多少个客户端？

> ID：11671546
> 
> 赞同：1
> 
> 时间：2012-07-26T14:28:18.927
> 
> 标签：google-app-engine, cordova, channel-api

我正在使用 Channel API（在 phonegap 中）构建一个移动应用程序。但是，我也想创建一个基于浏览器的客户端。我的问题是：

使用 Channel API 在 Google App Engine 应用程序中可以同时处理多少个客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:00:48.780

您可以同时拥有的客户端数量取决于您请求的令牌数量和每个令牌的持续时间。默认情况下，令牌有效期为两个小时，您每分钟可以请求 60 个令牌，因此您可以在任何时候拥有 60 * 60 * 2 = 7200 个活跃客户。

如果您需要更多，请在此处与我们联系：http: [//support.google.com/code/bin/request.py](http://support.google.com/code/bin/request.py?&contact_type=AppEngineCPURequest) ?&contact_type=AppEngineCPURequest ，我们可以显着提高您的配额。

# ruby-on-rails - rails sqlserver 视图

> ID：11671547
> 
> 赞同：0
> 
> 时间：2012-07-26T14:28:20.097
> 
> 标签：ruby-on-rails, ruby, sql-server, activerecord, views

如何从 rails 工作并使用 sqlserver 视图？

```
rake db:schema:dump 
```

不为视图生成架构

我用过`rails_sql_views`gem，但有些东西是错误的。可能是因为sqlserver

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:02:23.360

是的，有可能，而且有时很方便。我正在使用视图从旧数据库中获取一些数据。但是视图是只读的。

# jquery - 使用jQuery进行矩形放大

> ID：11671548
> 
> 赞同：0
> 
> 时间：2012-07-26T14:28:21.050
> 
> 标签：jquery, zooming

如何使用 jQuery 放大图像上的矩形区域？

![在此处输入图像描述](../Images/70edb7d04eb368d3513bfe86f3fe6f30.png)

我不需要选择功能起作用，只需要一个代码，通过定义正确的位置和比例来放大一个图像上的那个区域。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:40:59.367

您可以为此使用[jQuery animate](http://api.jquery.com/animate/)函数。

您需要为图像的[background-position](http://www.w3schools.com/cssref/pr_background-position.asp)属性和[background-size](http://www.w3schools.com/cssref/css3_pr_background-size.asp)属性设置动画。

我个人将此扩展用于动画，因为 CSS3 过渡通常更平滑：

[https://github.com/benbarnett/jQuery-Animate-Enhanced/](https://github.com/benbarnett/jQuery-Animate-Enhanced/)

# javascript - 如何使用 2 种不同编码的 2 个字符串

> ID：11671553
> 
> 赞同：-2
> 
> 时间：2012-07-26T14:28:28.057
> 
> 标签：javascript, character-encoding

我有一个带有 JavaScript 的 html 页面。在其中我加载了另一个带有标签的 JavaScript：

```
<script type="text/javascript" charset="utf-8" src="/../myfile.js" ></script> 
```

此外，我的 html 页面使用以下标记进行编码：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

然后，在一个函数中，我得到一个在“myfile.js”中定义的字符串，并想将它与来自我的主页的字符串进行比较。我试过 indexOf、==、搜索、匹配……但断言总是错误的。我提醒了我的字符串，它们显示为相等（区分大小写）。

有人知道为什么我的测试不起作用吗？

编辑：我的代码如下所示。

```
window.lang= new myobject(); // this object is defined in myfile.js
var mystring1 = window.lang.attr1['mykey'];
var mystring2 = $("#mydivid").html();
alert(mystring1+":"+mystring2); // this shows 2 equal strings
/* Here I wanted to test if the 2 strings are equals and tried "==", mystring1.indexOf(mystring2), match, search, ... */ 
```

在 file.js 中：

```
myobject.prototype.attr1 = {
 'mykey': 'mystring1value'
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:31:24.070

你需要`"utf-8"`，而不是`"uft-8"`：

```
<script type="text/javascript" charset="utf-8" src="/../myfile.js" ></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:51:01.383

Sample1.html 新建文档

```
 </HEAD>
    <script type="text/javascript" charset="utf-8" src="Sample2.js" ></script>

    <script>
    function compare(){
    j="test";
    alert(i==j);
    }
    </script>

    <BODY onload="compare();">

    </BODY>
    </HTML> 
```

Sample2.js

```
var i="test"; 
```

**请试试这个它对我来说很好**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T15:52:09.640

最后，问题来自一个 jquery 插件（jsTree），它在我的字符串末尾添加了一些“\n”或“\r”。抱歉打扰并感谢您的帮助！

干杯，

Ricola3D

# winapi - 如何在 Windows 8 中以编程方式检查/切换飞行模式？

> ID：11671557
> 
> 赞同：3
> 
> 时间：2012-07-26T14:28:32.497
> 
> 标签：winapi, windows-8, wireless, airplane

我必须检查是否在 Windows 8 中启用了飞行模式，并可能切换其状态。我目前正在开发一个 C# .NET 4.0 Windows Forms 应用程序，但这个问题的答案不应受此限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T15:38:00.847

不幸的是，Metro 应用程序没有编程方式来更改 Windows 8 中的飞行模式。如果应用程序超出其沙箱并在未经用户许可的情况下修改系统设置，这违反了 Metro 指南（请参阅[http上的讨论://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1ad10725-b1b8-4723-b2c3-861900809e02](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1ad10725-b1b8-4723-b2c3-861900809e02)）。

现在，您可以通过使用[Windows.Networking.NetworkOperators 命名空间](http://msdn.microsoft.com/en-us/library/windows/apps/br241148.aspx)中的一些功能来确定状态。具体来说，查看[MobileBroadbandRadioState](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.networkoperators.mobilebroadbandradiostate)和[NetworkDeviceStatus](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.networkoperators.networkdevicestatus.aspx)枚举。

或者，您可以通过解释如何使用 Windows 键 + I、更改 PC 设置、无线、飞行模式访问设置来提示用户进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:30:37.837

这是获取 NetworkConnectivityLevel 的代码片段，它可能会为您提供您需要知道的内容。不知道有没有办法改变。我会怀疑它，因为您还需要提供一种方法来选择要连接的网络。

```
 public static NetworkConnectivityLevel GetNetworkConnectivityLevel()
    {
        ConnectionProfile profile = NetworkInformation.GetInternetConnectionProfile();

        var ncl = NetworkConnectivityLevel.None;

        if (profile != null)
        {
            ncl = profile.GetNetworkConnectivityLevel();
        }

        return ncl;
    } 
```

# html - 如何使一个表格列根据其内容自动调整大小，第二列填充所有空闲空间？

> ID：11671559
> 
> 赞同：7
> 
> 时间：2012-07-26T14:28:33.500
> 
> 标签：html, css

我目前正在开发 HTML5 中的 Web 应用程序，其中我有一个包含两列的表格

我尝试了以下方法：

```
<table style="width: 100%;">
<tr>
    <td style="display: inline-block">
        <div id="list">
            <table>
               ...
            </table>
        </div>
    </td>
    <td style="width: 100%;">
        <div id="canvas">
        </div>
    </td>
</tr> 
```

但是第二列总是占用比它应有的更多宽度空间，这导致第一列表行是多行而不是一行。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-08T16:58:27.267

第一列的内容变为多行，因为唯一可用的自动调整大小模式是尝试尽可能缩小列。如果您不希望内容换行，请使用`white-space: nowrap`.

```
.t1, .t2 { border-collapse: collapse; }
.t1 > tbody > tr > td { border: 1px solid red; }
.t2 > tbody > tr > td { border: 1px solid blue; }

.t3 td { white-space: nowrap; }
```

```
Example 1:
<table style="width: 100%;" class=t1>
<tr>
    <td>
        <div id="list">
            <table class=t2>
                <tr><td>Thingy stuff</td><td>foo bar</td></tr>
                <tr><td>Thingy stuff</td><td>foo bar</td></tr>
            </table>
        </div>
    </td>
    <td style="width: 100%;">
        <div id="canvas">
        </div>
    </td>
</tr>
</table>

<br>
Example 2:

<table style="width: 100%;" class=t1>
<tr>
    <td>
        <div id="list">
            <table class="t2 t3">
                <tr><td>Thingy stuff</td><td>foo bar</td></tr>
                <tr><td>Thingy stuff</td><td>foo bar</td></tr>
            </table>
        </div>
    </td>
    <td style="width: 100%;">
        <div id="canvas">
        </div>
    </td>
</tr>
</table>
```

无需使用 JavaScript，也无需将右侧单元格设置为针对特定左侧单元格内容量身定制的特定宽度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T10:37:54.060

由于 Iaasch 建议使用 jQuery，解决方案非常简单

```
 $(document).ready(function() {
        $('#left').css('width', $('#places-table').width());
    });

    <table style="width: 100%;"> 
    <tr>     
        <td id="left">         
            <div id="list">     
                <table>
                    <tr>
                        <td>
                            ...
                        </td>
                    </tr>
                </table>
            </div>     
        </td>     
        <td style="width: auto;">         
            <div id="canvas">         
            </div>     
        </td> 
    </tr> 
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:34:35.937

当您将 a 设置为`td`时`width:100%;`，它意味着 100% 的`tr`。因此，它将是整行。尝试使正确的`td`喜欢`width:75%;`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T15:00:06.503

jQuery 是你的朋友。

```
<table style="width: 100%;"> 
    <tr>     
        <td id="left" style="display: inline-block; width: 100%;">         
            <div id="list">     
                <table>
                    <tr>
                        <td>
                            ...
                        </td>
                    </tr>
                </table>
            </div>     
        </td>     
        <td style="width: auto;">         
            <div id="canvas">         
            </div>     
        </td> 
    </tr> 
</table> 
```

在你有你的脚本的地方添加这个：

```
 $(document).ready(function() {
                  $('#left').css('width', $('#list').text().length * 7);
          }) 
```

# objective-c - iphone改变初始场景

> ID：11671564
> 
> 赞同：1
> 
> 时间：2012-07-26T14:28:51.393
> 
> 标签：objective-c, ios, cocoa-touch

在我的 iphone 应用程序中，我有两个场景，它们都是视图控制器。通常初始场景设置为第一个。当用户播放时，它会传递给第二个。

此时，当用户关闭应用程序并重新启动它时，如果用户已经玩过，它应该从第二个场景开始，因此该用户的初始场景应该改变。

我怎样才能做到这一点？

而且我不使用导航控制器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:36:39.757

如果您使用的是 xibs，请在应用程序 delegates 中进行设置 `applicationDidFinishLaunchingWithOptions`。

创建一个全局 BOOL 并在应用程序启动时检查它的值，例如：

。H

```
@class ViewController;
@class SecondViewController;
@interface AppDelegate : UIResponder <UIApplicationDelegate>
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) ViewController *viewController;
@property (strong, nonatomic) SecondViewController *SecondViewController; 
```

.m

```
#import "ViewController.h"
#import "SecondViewController.h"

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if (isSecondViewControllerBool == YES) {
        self.SecondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    }else{
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

对于故事板：

在第一个视图控制器`viewDidLoad`中。

```
- (void)viewDidLoad
{
    if (isSecondViewControllerBool == YES) {
        UIViewController *secondVC = [self.storyboard instantiateViewControllerWithIdentifier:@"mySecondViewController"];
        [self presentViewController:secondVC animated:NO completion:nil];

    }else{
        //present normally
    }
} 
```

如果您正在使用情节提要并决定使用我的 xib 解决方案，请从项目中删除情节提要，并在此处将其删除：

![在此处输入图像描述](../Images/6f2a24577b9f2fc31db9b3c5ed8f67b6.png)

# jquery - JQuery document.ready 仅在 IE7 中多次触发

> ID：11671570
> 
> 赞同：0
> 
> 时间：2012-07-26T14:29:19.283
> 
> 标签：jquery, internet-explorer-7

我正在使用 jQuery (v 1.7.1) 并且需要我正在运行的 ui 代码才能在 IE7 中工作。在所有现代浏览器中都没有问题，IE8 也很好。

问题似乎是准备好的文档多次触发，并导致性能问题。这似乎也是网站上各个页面的问题，具有不同级别的 JS 代码复杂性。我已经读过异常会导致这种行为，但我不认为异常是问题（通过一些全局异常捕获代码验证）。

```
$(document).ready(function () {

    alert('doc ready');

    do stuff....
}); 
```

上面的代码导致我在 UI 冻结之前多次看到“文档就绪”警报。

这是 jQuery 中的一个已知问题吗？有没有办法解决 IE7？

谢谢

更新...试图隔离问题，我已经用最简单的页面进行了测试，这个简单的页面不会重现问题...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test JQUery IE7</title>

    <script type="text/javascript" src="/Scripts/jquery-1.7.1.min.js"></script>

</head>
    <body>

        <script type="text/javascript">

        $(document).ready(function() {

            alert('doc ready...');

        });

        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:57:57.887

问题实际上是 $(window).resize 函数，它似乎在 IE7 中更频繁地触发。当然，IE7 可能只是在每个事件上运行面向 UI 的 JS 时更加挣扎。

设置计时器/间隔以限制事件被执行的频率解决了问题

# events - Google Maps API v3 信息气泡

> ID：11671571
> 
> 赞同：1
> 
> 时间：2012-07-26T14:29:21.063
> 
> 标签：events, google-maps, google-maps-api-3, infowindow

> **可能重复：**
> [信息窗口不显示](https://stackoverflow.com/questions/11670733/infowindow-not-displaying)

还在纠结一个我不明白的问题。我不明白为什么这不起作用，我相信这是非常简单的事情。我改变了一些东西，但仍然没有。我试图让用户点击地图上的任意位置，infoWindow 会告诉他们该位置的纬度/经度。谢谢

```
var window;
function InfoWindow(location) {
  if ( window ) {
    window.setPosition(location);
  } else {
    window = new google.maps.infoWindow({
      position: location,
      content: "sam"
    });
  }
}

google.maps.event.addListener(map, 'click', function(event) {
  InfoWindow(event);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:45:31.360

这里有多个问题。首先，我不会`window`用作变量名。其次，当您创建 InfoWindow 时，它需要大写

```
new google.maps.InfoWindow() 
```

第三，将事件对象传递给 InfoWindow 创建函数。传递事件对象是不好的。所以现在，在 InfoWindow 函数中，位置是指事件对象，而不是位置。您应该改为传递 event.latLng。您还需要在 InfoWindow 上调用 open 方法。

```
var infoWindow;
function InfoWindow(location) {
  if ( infoWindow ) {
    infoWindow.setPosition(location);
  } else {
    infoWindow = new google.maps.InfoWindow({
      position: location,
      content: "sam"
    });
  }
  infoWindow.open();
}
google.maps.event.addListener(map, 'click', function(event) {
  InfoWindow(event.latLng);
}); 
```

# spring - 将 JSP 文件重命名为 jspx 并且一切都会中断

> ID：11671574
> 
> 赞同：1
> 
> 时间：2012-07-26T14:29:23.423
> 
> 标签：spring, spring-mvc, spring-webflow-2

我正在尝试将 WebFlow2 中使用的所有 JSP 文件重命名为 JSPX。

我进入我的 STS 项目并将文件从 JSP 重命名为 JSPX，然后我在我的 flow.xml 中更改 defaultViewSuffix

```
[CODE]<bean id="mvcViewFactoryCreator" class=
      "org.springframework.webflow.mvc.builder.MvcViewFactoryCreator">
     <property name="defaultViewSuffix" value=".jspx" />   
  </bean>[/CODE] 
```

这是错误：

```
[CODE]SEVERE: Servlet.service() for servlet jsp threw exception
org.apache.jasper.JasperException: /WEB-INF/flows/helloworld/helloworld.jspx (line: 1, column: 2) The markup in the document preceding the root element must be well-formed.
[/CODE] 
```

这是我的 helloworld.jspx

```
[CODE]<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<html>
<head>
    <title>Spring 3.0 MVC - Web Flow Example</title>
</head>
<body>
    <h2>Customer Registration</h2>

    <form:form commandName="customer">
      <input type="hidden" name="_flowExecutionKey"  value="${flowExecutionKey}"/>
     <table>
     <tr><td>
      <font color=red><form:errors path="name" /></font><b>Name: </b>
       </td><td>
       <form:input path="name"/><br/><p>
      </td></tr><tr><td>
      <font color=red><form:errors path="phoneNumber" /></font>

      <b>Phone number: </b></td><td><form:input path="phoneNumber"/><br/>
      </td></tr><tr><td>
      <font color=red><form:errors path="address" /></font>

      <b>Address: </b></td><td><form:input path="address"/><br/>
      </td></tr><tr><td>
      <font color=red><form:errors path="city" /></font>

      <b>City: </b></td><td><form:input path="city"/><br/>
      </td></tr><tr><td>
      <font color=red><form:errors path="state" /></font>

      <b>State: </b></td><td><form:input path="state"/><br/>

      </td></tr><tr><td>
      <font color=red><form:errors path="zipCode" /></font>
      <b>Zip Code: </b>
      </td><td>
      <form:input path="zipCode"/><br/>
      </td></tr>
      </table>
      <input type="submit" name="_eventId_submit"   value="Submit" />
      <input type="submit" name="_eventId_cancel"    value="Cancel" />
    </form:form>

    </body>
</html>[/CODE] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T14:32:10.943

JSPX 文件（具有 XML 语法的 JSP）的语法与 JSP 文件（具有传统语法的 JSP）的语法不同。有关详细信息和示例，请参阅[http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPX3.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPX3.html)。

# plsql - Oracle：将序列设置为特定值

> ID：11671575
> 
> 赞同：8
> 
> 时间：2012-07-26T14:29:30.233
> 
> 标签：plsql, oracle11g

我正在使用 liquibase 来管理我的架构。我有一堆插入语句。我已经硬编码了主 ID 号码。完成所有插入后，我想将序列值更改为比表中主键的最大值大 1。为此，我编写了如下所示的 PL/SQL。但是，当我执行时，`select ArtifactTypes_id_seq.nextval from dual;`它仍然递增 0。

```
SET SERVEROUTPUT ON SIZE 1000000
DECLARE
    sequence_id NUMBER;
BEGIN

    SELECT NVL(MAX(idArtifactType), 0) + 1 INTO sequence_id FROM ArtifactTypes;
    EXECUTE IMMEDIATE 'ALTER SEQUENCE saas.ArtifactTypes_id_seq INCREMENT BY ' || sequence_id;
    EXECUTE IMMEDIATE 'SELECT ArtifactTypes_id_seq.nextval FROM dual';
    EXECUTE IMMEDIATE 'ALTER SEQUENCE saas.ArtifactTypes_id_seq INCREMENT BY 1';
    DBMS_OUTPUT.put_line('Executed "ALTER SEQUENCE saas.ArtifactTypes_id_seq INCREMENT BY ' || sequence_id || '"');
END;
/ 
```

DBMS_OUTPUT 提供以下输出 -
`Executed "ALTER SEQUENCE saas.ArtifactTypes_id_seq INCREMENT BY 71"`

我错过了什么？我做错了吗？注意：我尝试从 SQLDeveloper 执行这些 SQL。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T14:50:33.860

所以我发现了这个问题。以下应该是 PL/SQL -

```
SET SERVEROUTPUT ON SIZE 1000000
DECLARE
    sequence_id NUMBER;
    temp_seq NUMBER;
BEGIN
    SELECT NVL(MAX(idArtifactType), 0) + 1 INTO sequence_id FROM ArtifactTypes;
    EXECUTE IMMEDIATE 'ALTER SEQUENCE saas.ArtifactTypes_id_seq INCREMENT BY ' || sequence_id;
    SELECT ArtifactTypes_id_seq.nextval into temp_seq FROM dual;
    EXECUTE IMMEDIATE 'ALTER SEQUENCE saas.ArtifactTypes_id_seq INCREMENT BY 1';
    DBMS_OUTPUT.put_line('Executed "ALTER SEQUENCE saas.ArtifactTypes_id_seq INCREMENT BY ' || sequence_id || '"');
END;
/ 
```

以下声明 -
`EXECUTE IMMEDIATE 'SELECT ArtifactTypes_id_seq.nextval FROM dual';`
已更改为
`SELECT ArtifactTypes_id_seq.nextval into temp_seq FROM dual;`

它成功了！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T14:36:24.253

您需要删除序列，然后重新创建它，使用 STARTS WITH 子句分配初始值，例如：

```
CREATE SEQUENCE saas.ArtifactTypes_id_seq
  START WITH 72; 
```

此外，从序列中选择 NEXTVAL 会自动将其递增 1。

# forms - Wicket - AjaxTabPanels 中的表单字段

> ID：11671578
> 
> 赞同：0
> 
> 时间：2012-07-26T14:29:39.880
> 
> 标签：forms, tabs, wicket

使用表单和选项卡时的一个常见问题是在切换选项卡之前需要保留和验证字段。

在谷歌上冲浪，我找到了很多关于它的解决方案。常见的解决方案是覆盖 AjaxTabbedPanel 的 NewLink 方法并创建一个 AjaxSubmitLink。

我的问题有点不同，因为上述解决方案创建了某种向导。

我有一个带有表单和任意数量的选项卡的页面。每个选项卡都有自己的表单和自己的属性模型对象。Page的表单只有一个提交表单来提交每个选项卡的每个字段的总和。

我想要做的是从一个选项卡切换到另一个选项卡，而无需单选项卡表单验证（但填充了内部模型），该验证只能通过页面提交进行验证。内部表单可能有一个必填字段，必须仅在最终提交时检查，而不是在内部表单验证时检查。

这一切都没有 wiquery 库。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:25:01.827

只是第一个想法：你能使用一个模拟标签行为的[向导吗？](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/extensions/wizard/Wizard.html)

它需要一个具有 Ajax 按钮的自定义按钮栏，以便在步骤之间移动，即单击这些按钮只会替换向导的内容。然后将在[onFinish()](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/extensions/wizard/Wizard.html#onFinish%28%29)中触发实际验证。这将使您可以很好地控制整个过程，并且您还可以显示自定义的[FeedbackPanel](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/extensions/wizard/Wizard.html#newFeedbackPanel%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:20:18.677

修补#setDefaultFormProcessing(false)。

请注意，如果您使用某种完成按钮，则表单处理将仅在当前可见的选项卡上进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:40:20.513

经过大量尝试，我想要的只有 WiQuery 可用。

将 setDefaultProcessing 设置为 false 允许在不验证内部 FORM 的情况下进行选项卡导航，但结果是模型未填充，然后当我返回上一个选项卡时，每个输入都将再次为空白。

# sql - 通过增量删除列冗余

> ID：11671579
> 
> 赞同：2
> 
> 时间：2012-07-26T14:29:42.527
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sqlite

我有下表：

![在此处输入图像描述](../Images/55bc894c35f38460d49da5c7d2b94ce4.png)

如您所见，我复制了日期和时间值，例如 2012-01-01 09:29:00.000 和 2012-01-01 09:29:00.008。

我需要您的帮助，通过在重复的小时数上添加毫秒来消除冗余并获得以下结果：

![在此处输入图像描述](../Images/b5aa54edb9b081347bd9716378ff39d3.png)

所以我创建了一个表 TableSource 并尝试在没有 redondonce 的情况下插入新的输出值但我没有成功。

我认为以下查询可以解决问题，但它仅适用于 My-sql ：

```
INSERT INTO TableDestination
SELECT * FROM TableSource
    ON DUPLICATE KEY
UPDATE  NeededDateRow = DATEADD(millisecond,1 , NeededDateRow) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:00:01.300

你可以使用这个：

```
 DECLARE @table table (id int, dt datetime)
DECLARE @table2 table (id int, dt datetime)
INSERT INTO @table 
SELECT 1, '2012/01/01'
UNION
SELECT 2, '2012/01/01'
UNION
SELECT 3, '2012/01/01'
UNION
SELECT 1, '2012/01/02'

SELECT * , DATEADD(millisecond, 10 * (ROW_NUMBER() OVER (PARTITION BY dt ORDER BY dt) - 1), dt) As NewDate
FROM @table 

INSERT INTO @table2
SELECT ID, DATEADD(millisecond, 10 * (ROW_NUMBER() OVER (PARTITION BY dt ORDER BY dt) - 1)  , dt) FROM @table 

SELECT * from @table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:55:27.907

MSSQL中没有等效`INSERT ... ON DUPLICATE`的 KEY，但是， **MERGE**和**WHEN NOT MATCHED**可能对您有用。

你可以参考[这个答案](https://stackoverflow.com/questions/1197733/does-sql-server-offer-anything-like-mysqls-on-duplicate-key-update)

我只是起草了 sql 语法（未经测试）

```
MERGE TableDestination AS T
USING TableSource AS S
ON (T.NeededDateRow = S.NeededDateRow)
WHEN NOT MATCHED
    THEN INSERT (NeededDateRow) VALUES (DateAdd(millisecond,1,NeededDateRow)) 
```

# c# - C#中的递归函数

> ID：11671581
> 
> 赞同：0
> 
> 时间：2012-07-26T14:29:43.593
> 
> 标签：c#, list, recursion

我有一个对象，我们称它为“朋友”。这个对象有方法“GetFriendsOfFriend”，它返回一个`List<Friend>`.

假设用户输入 5，则所有 Friends 朋友和 Friends Friends 朋友（你明白了）的级别下降到 5 级（最高可达 20 级）。

这可能是很多计算，所以我不知道递归是否是最好的解决方案。

有没有人有一个聪明的想法1.如何最好地完成这个递归函数？2.如何做到不递归。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:38:47.777

虽然在没有递归的情况下当然可以做到这一点，但我看不出你正在尝试做的事情有什么特别的问题。为了防止事情变得疯狂，设置一个最大值来防止你的程序死掉可能是有意义的。

```
public class Friend
{
    public static readonly int MaxDepth = 8; // prevent more than 8 recursions

    private List<Friend> myFriends_ = new List<Friend>();

    // private implementation
    private void InternalFriends(int depth, int currDepth, List<Friend> list)
    {
        // Add "us"
        if(currDepth > 1 && !list.Contains(this))
            list.Add(this);

        if(currDepth <= depth)
        {
            foreach(Friend f in myFriends_)
            {
                if(!list.Contains(f))
                    f.InternalFriends(depth, depth + 1, list); // we can all private functions here.
            }
        }
    } // eo InternalFriends

    public List<Friend> GetFriendsOfFriend(int depth)
    {
        List<Friend> ret = new List<Friend>();
        InternalFriends(depth < MaxDepth ? depth : MaxDepth, 1, ret);
        return ret;
    }  // eo getFriendsOfFriend
} // eo class Friend 
```

编辑：修复了代码中的一个错误，即不会添加真正的朋友，只是“他们的”朋友。只有在深度为“1”（第一次通话）之后添加朋友时才需要这样做。我还`Contains`用来检查重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T15:52:55.620

这是此代码的非递归版本：

```
public static void ProcessFriendsOf(string person) {
    var toVisit = new Queue<string>();
    var seen = new HashSet<string>();

    toVisit.Enqueue(person);
    seen.Add(person);           

    while(toVisit.Count > 0) {
        var current = toVisit.Dequeue();    

        //process this friend in some way

        foreach(var friend in GetFriendsOfFriend(current)) {
            if (!seen.Contains(friend)) {
                toVisit.Enqueue(friend);
                seen.Add(friend);
            }
        }
    }
} 
```

它通过保留所有已经看到的成员的 HashSet 并且不添加要处理的成员多次来避免无限循环。

它使用队列访问朋友，这种方式称为[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)。如果我们使用堆栈而不是队列，它会变成[深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)，并且行为与递归方法（使用隐式堆栈 - 调用堆栈）几乎相同。

# c# - 垃圾收集是否会影响堆栈？

> ID：11671583
> 
> 赞同：5
> 
> 时间：2012-07-26T14:29:56.007
> 
> 标签：c#, java, .net

我刚开始使用 C# 作为我的语言的 .NET Framework。我有点理解 Java 中 GC 的概念，并且今天在 .NET 中重新审视了相同的概念。

在 C# 中，值类型被放入堆栈（与 Java 的情况相同，局部变量被放入堆栈）。但在 C# 中，甚至`struct`包含在值类型中。因此，偶数`struct`s 被放入堆栈。在最坏的情况下，有许多方法调用，堆栈中大量填充了许多方法，每个方法都有许多本地值类型，并且许多`struct`本身具有许多本地值类型的 s，垃圾收集器是否会影响堆？根据我的研究（以及我所学到的部分内容），我知道它不会这样做。主要是因为操作堆栈内容会涉及大量开销，此外，GC 仅咨询堆栈以查找引用 - 仅此而已。

只是添加与同一主题相关的另一个问题：强制调用 GC（如`System.gc()`在 Java 中，不确定 C# 等效项），并不能确保当时和那里调用 GC 例程。那么我应该在哪里进行这样的调用 - 我希望我需要 GC 运行的地方，或者任何随机的地方，因为不能保证我的调用会立即触发 GC？或者我应该把这些东西留给运行时环境而不去管它吗？

注意：我添加了 Java 标记，因为我试图从那里链接概念。我知道 GC 在两个单独的运行时环境中的内部功能肯定会有所不同，但我想基本概念是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:34:51.183

**没有**垃圾收集不会影响 java 堆栈上的对象。

GC 只影响 jvm 堆中的对象。java GC 过程是多层的，可能非常复杂，值得一读。查看类似的网站：http: [//javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html](http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html)以很好地掌握它的运作方式。

至于强制系统的 GC**那是个坏主意**。当需要运行 GC 时，jvm 会更好地了解您。如果您尝试分配一个大对象，jvm 将确保空间适合您，而无需告诉它运行 GC。

**编辑** 我的错，你更关心 C# 而不是 java。内存管理的相同原则适用，堆栈不受影响，不显式运行 GC 等。C# 旨在以与 java 类似的方式运行。 [http://msdn.microsoft.com/en-us/library/ms973837.aspx](http://msdn.microsoft.com/en-us/library/ms973837.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:32:48.820

堆栈不需要垃圾收集器的帮助；因为，当您移出堆栈帧（堆栈中当前执行的范围）时，整个帧（包括内容）在您创建新堆栈帧时被释放（并覆盖）。

```
function foo(int a, int b) {
  int i;
  doStuff();
} 
```

创建一个堆栈帧（粗略的可视化）

```
---- Frame Start ----
(value for parameter a)
(value for parameter b)
(other items needed for tracking execution)
(extra stack frame space
  (value for stack allocated i)
)
---- End of Frame ---- 
```

进入函数时，堆栈分配的变量在分配帧时分配，退出帧时，整个帧被丢弃，为帧分配的变量释放内存。

请记住，Java 通常在堆栈上分配对象引用和堆栈本地原语，而不是整个对象。只有少数最近的优化允许在框架外无法访问的对象的堆栈内分配；它有这样的条件，它不被认为是你可以指望的东西。

也就是说，堆栈帧中的引用通常指向堆，通常是垃圾收集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:35:41.083

[.NET 垃圾收集](http://msdn.microsoft.com/en-us/library/0xy59wtx.aspx)在 MSDN 上的垃圾收集中进行了深入解释。垃圾收集器仅在托管堆中跟踪内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T14:31:30.240

不。AFAIK GC 不会影响堆栈。它只影响 HEAP 内存。堆栈框架将在方法调用时创建，并在方法退出时删除。

**编辑**

这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/0xy59wtx%28v=vs.90%29.aspx)解释了 GC 在 .NET 框架中的工作原理。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T14:32:28.500

如果您为 .NET 阅读此内容，则它仅适用于*托管*堆：

[http://msdn.microsoft.com/en-us/library/ee787088.aspx](http://msdn.microsoft.com/en-us/library/ee787088.aspx)

MSDN好像是个资料宝库，这里是CLR中关于GC的父主题：

[http://msdn.microsoft.com/en-us/library/0xy59wtx](http://msdn.microsoft.com/en-us/library/0xy59wtx)

# jquery - jQuery AJAX POST 适用于除 IE 以外的所有浏览器

> ID：11671586
> 
> 赞同：1
> 
> 时间：2012-07-26T14:30:02.277
> 
> 标签：jquery, ajax, html, internet-explorer, post

我见过一些人有像我这样的问题，但大多数修复似乎并不相关。我有以下 jquery，它采用提交的表单，使用 SHA256 传递密码，将表单序列化为 JSON 对象，然后使用 json stringify 将 json 格式化为纯文本格式以传递给 ASPX 服务。服务返回 XML。这适用于 Firefox、Chrome、Safari、Opera、iOS Safari、Blackberry 和默认的 Android 浏览器。在 IE 上它总是调用错误。有人在这里有什么想法吗？

```
$(function() {
  $('form').submit(function() {
   $('#password').val($.sha256($('#password')));
    var jsonTest =  JSON.stringify($('form').serializeObject());
    $('#result').text(jsonTest);
    $.ajaxSetup({cache: "false"});
    $.ajax({
        type: "POST",
        url: "http://mydomain.com/JSONService.asmx/WebRequest",
        data: "request=" + jsonTest,
        contentType: "application/x-www-form-urlencoded; charset=utf-8",
        crossDomain: true,
        dataType: "xml",
        success: function(xml){

                var myVals = $(xml).find('string').text();
                $('#result').text(myVals);
                alert(myVals);
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            alert("Error: " + errorThrown);
        }
    });
return false; 
```

还有我的（相关）HTML：

```
<!doctype html>
<!-- Conditional comment for mobile ie7 blogs.msdn.com/b/iemobile/ -->
<!--[if IEMobile 7 ]>    <html class="no-js iem7" lang="en"> <![endif]-->
<!--[if (gt IEMobile 7)|!(IEMobile)]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
  <meta charset="utf-8">

  <title>Test Form</title>
  <meta name="description" content="">

  <!-- Mobile viewport optimization h5bp.com/ad -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width">

  <!-- Mobile IE allows us to activate ClearType technology for smoothing fonts for easy reading -->
  <meta http-equiv="cleartype" content="on">

  <!-- more tags for your 'head' to consider h5bp.com/d/head-Tips -->

  <!-- Main Stylesheet -->
  <link rel="stylesheet" href="css/style.css">

  <!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects -->
  <script src="js/libs/modernizr-2.0.6.min.js"></script>
</head>

<body>

  <div id="container">
    <div id="main" role="main">
        <div id="logBox">
        <img alt="Logo" src="img/logo.png" style="margin-left: 5px;" />
        <div id="blackHead">Please Sign-In To Continue</div>
        <form name="login" method="post" action="#">
<label for="sessionemail">Email</label><br />
<input autofocus="autofocus" autocapitalize="off" maxlength="150" id="sessionemail" name="sessionemail" title="Your email" type="text" value="" class="inputText" /><br />
<br />
<label for="password">Password</label><br />
<input type="password" name="password" id="password" title="Password" value="" class="inputText" /><br />
<br />
<input type="hidden" name="sessionid" id="sessionid" value="<?php echo $sessionNumber ?>"  />
<input type="hidden" name="subtocall" id="subtocall" value="g2.web.login.sub" />
<input type="submit" value="Sign-In" name="submit" class="submitBox" />

</form>
    <div id="greyFoot">Forgot your password? <a href="#">Click here now!</a><br />
        <pre id="result">
</pre>
    </div><!-- end #greyFoot -->
    </div><!-- end #logBox -->
    </div><!--end #main -->
  </div> <!--! end of #container -->
</body>
</html> 
```

我真的很感激任何和所有的帮助。Firebug 没有抛出任何错误，我真的很困惑它是如何在除 IE 之外的所有东西上工作的。我在 CSS 中习惯了这一点，但在 JS 中不习惯！

编辑 - 我已将错误更改为显示 errorThrown，其中显示“无传输”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:46:17.767

我不确定这是否是本地域请求，但它是否是远程请求，即不支持跨域 ajax 调用，无论其是否为 getJSON。艰难地学会了...

# javascript - 如何从 JavaScript 中的 HTML 字符串操作 DOM？

> ID：11671587
> 
> 赞同：-1
> 
> 时间：2012-07-26T14:30:01.857
> 
> 标签：javascript, windows-8, microsoft-metro

我正在使用 JavaScript 开发一个 Windows 8 Metro 应用程序。我需要操作一串 HTML 来选择像 DOM 这样的元素。

我怎样才能做到这一点？

例子：

```
var html = data.responseText; // data.response is a string of HTML received from xhr function.
// Now I need to extract an element from the string like document.getElementById("some_element")... 
```

谢谢！

**更新：**

我解决了！

```
var parser = new DOMParser();
var xml = parser.parseFromString(data.responseText); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:38:06.607

我认为您解决问题的方法不是最好的，您可以返回[JSON](http://www.json.org/)或 xml。但如果你需要这样做：

`getElementById`据我所知，如果不在文档中插入新元素，您将无法使用（在下面的示例中，例如插入`div`in ），但您可以这样做：`document``document.appendChild(div)`

```
var div = document.createElement("div");
div.innerHTML = '<span id="rawr"></span>'; //here you would put data.responseText

var elements = div.getElementsByTagName("span"); // [<span id="rawr"></span>], there you could ask elements[0].id === "rawr" or whatever you like 
```

# matlab - 在 MATLAB 中使用时间序列按天/小时计算值

> ID：11671588
> 
> 赞同：2
> 
> 时间：2012-07-26T14:30:04.513
> 
> 标签：matlab, datetime, time-series, intervals, date-range

所以，我开始在 MATLAB 中使用时间序列，但我有点卡住了。

我有一个导入 MATLAB 的事件时间戳列表。它现在是一个 3000x25 的数组，看起来像

`2000-01-01T00:01:01+00:00`
`2000-01-01T00:01:02+00:00`
`2000-01-01T00:01:03+00:00`
`2000-01-01T00:01:04+00:00`

如您所见，每个事件都按日期、小时、分钟、秒等记录。

现在，我想按日期、小时等计算事件的数量，然后进行各种分析（回归等）。

我考虑为每天创建一个时间序列对象，但考虑到数据的大小，这是不切实际的。

有没有办法操纵这个数组，使我们有“日期：事件的数量”？
也许只有一种更简单的方法来使用时间序列来计算事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:43:50.243

正如[其他人](https://stackoverflow.com/a/11671924/97160)所建议的，您应该将字符串日期转换为日期序列号。这使得使用数字数据变得容易。

计算每个间隔（天、小时、分钟等）的事件数的一种有效方法是使用[HISTC](http://www.mathworks.com/help/techdoc/ref/histc.html)和[ACCUMARRAY](http://www.mathworks.com/help/techdoc/ref/accumarray.html)等函数。该过程将涉及将序列日期[操作](https://stackoverflow.com/a/11673610/97160)为此类函数所需的单位/格式（例如，ACCUMARRAY 需要整数，而 HISTC 需要被赋予 bin 边缘以指定范围）。

这是一个矢量化解决方案（无循环），它使用 ACCUMARRAY 来计算事件数。这是一个非常有效的功能（即使输入很大）。一开始，我生成了一些 5000 个时间戳的样本数据，这些时间戳在 4 天的时间内不均匀分布。您显然想用自己的替换它：

```
%# lets generate some random timestamp between two points (unevenly spaced)
%# 1000 timestamps over a period of 4 days
dStart = datenum('2000-01-01');     % inclusive
dEnd = datenum('2000-01-5');        % exclusive
t = sort(dStart + (dEnd-dStart).*rand(5000,1));
%#disp( datestr(t) )

%# shift values, by using dStart as reference point
dRange = (dEnd-dStart);
tt = t - dStart;

%# number of events by day/hour/minute
numEventsDays = accumarray(fix(tt)+1, 1, [dRange*1 1]);
numEventsHours = accumarray(fix(tt*24)+1, 1, [dRange*24 1]);
numEventsMinutes = accumarray(fix(tt*24*60)+1, 1, [dRange*24*60 1]);

%# corresponding datetime range/interval label
days = cellstr(datestr(dStart:1:dEnd-1));
hours = cellstr(datestr(dStart:1/24:dEnd-1/24));
minutes = cellstr(datestr(dStart:1/24/60:dEnd-1/24/60));

%# display results
[days num2cell(numEventsDays)]
[hours num2cell(numEventsHours)]
[minutes num2cell(numEventsMinutes)] 
```

这是每天事件数的输出：

```
'01-Jan-2000'    [1271]
'02-Jan-2000'    [1258]
'03-Jan-2000'    [1243]
'04-Jan-2000'    [1228] 
```

以及每小时事件数量的摘录：

```
'02-Jan-2000 09:00:00'    [50]
'02-Jan-2000 10:00:00'    [54]
'02-Jan-2000 11:00:00'    [53]
'02-Jan-2000 12:00:00'    [74]
'02-Jan-2000 13:00:00'    [49]
'02-Jan-2000 14:00:00'    [59] 
```

同样的分钟：

```
'03-Jan-2000 08:54:00'    [1]
'03-Jan-2000 08:55:00'    [1]
'03-Jan-2000 08:56:00'    [1]
'03-Jan-2000 08:57:00'    [0]
'03-Jan-2000 08:58:00'    [0]
'03-Jan-2000 08:59:00'    [0]
'03-Jan-2000 09:00:00'    [1]
'03-Jan-2000 09:01:00'    [2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:47:00.450

[您可以使用datenum](http://www.mathworks.nl/help/techdoc/ref/datenum.html)将这些时间戳转换为数字：

> 日期序列号表示从特定日期和时间开始的完整天数和小数天数，其中 datenum('Jan-1-0000 00:00:00') 返回数字 1。（0000 年只是一个参考点，不打算被解释为真实的年份。）

这样，更容易检查一个时期的开始和结束位置。例如：您要查找的那一周从 x 开始，到 x+7.999... 结束；要查找该期间的事件，您所要做的就是检查 datenum 值是否在 x 和 x+8 之间：

```
week_x_events = find(dn_timestamp>=x & dn_timestamp<x+8) 
```

困难在于将时间戳转换为 datenum 可接受的格式，这可以使用[regexp](http://www.mathworks.nl/help/techdoc/ref/regexp.html)来实现，祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:13:59.333

I don't know what `+00:00` means (maybe time zone?), but you can simply convert your string timestamps into numerical format:

```
>> t = datenum('2000-01-01T00:01:04+00:00', 'yyyy-mm-ddTHH:MM:SS')

t =

  7.3049e+005

>> datestr(t)

ans =

01-Jan-2000 00:01:04 
```

# c# - IListSource 类型的 AttributeProvider 做什么？

> ID：11671595
> 
> 赞同：1
> 
> 时间：2012-07-26T14:30:32.300
> 
> 标签：c#, attributes, datasource, system.componentmodel

我有一个包含此属性的用户控件：

```
[AttributeProvider(typeof(IListSource))]
public object DataSource
{
  get { return _grid.DataSource; }
  set { _grid.DataSource = value; }
} 
```

**此属性如何影响属性？**（除了设计器中漂亮的组合框）。
是否强制属性仅接收实现 IListSource 或 IEnumerable 的值？
你能从 BCL 中找到解释属性效果的代码片段吗？

* * *

来源：
[AttributeProviderAttribute 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.attributeproviderattribute.aspx)
[IListSource 接口](http://msdn.microsoft.com/en-us/library/yf2z7b6t%28v=vs.100%29.aspx)
[如何：在 Windows 窗体控件中应用属性](http://msdn.microsoft.com/en-us/library/ms171726.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:44:21.180

该属性与任何属性一样，对属性本身没有任何影响。它仅由其他组件用于获取有关属性的元数据。文档说的是某些组件，如数据绑定，需要知道属性的类型。通常这些数据是从属性属性和属性类型属性中收集的，但在这里这是不可能的，因为 DataSource 属性有一些您可以为它设置的选项，并且这些类型除了从对象继承之外没有任何共同点, 所以这个属性告诉任何需要知道类型应该是 IListSource 的人。我希望这更清楚。

# varnish - 如何在 Varnish 中检查 cookie 过期时间

> ID：11671597
> 
> 赞同：0
> 
> 时间：2012-07-26T14:30:41.410
> 
> 标签：varnish, varnish-vcl

在我的应用程序中，当用户登录时，我们不想缓存任何内容。所以我们直接绕过用户到后端。我们不喜欢跟随。if (req.http.cookie ~ "(isLoggedIn)") { return (pass);} 这按预期工作。

现在，问题是如果用户注销，我们的服务器不会删除 cookie 而是放置过期的 cookie。所以cookie仍然存在，但它已过期。但由于清漆只是寻找cookie，它不会缓存页面。

有什么方法可以检查 cookie 的到期日期并将其与当前日期进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:19:04.803

您无法在客户端请求期间控制 Varnish 上的 cookie 过期时间，因为浏览器不发送 cookie 参数（名称=值除外）。

# c# - 将设置重置为 SpecialFolder

> ID：11671598
> 
> 赞同：0
> 
> 时间：2012-07-26T14:30:44.937
> 
> 标签：c#, .net, settings, reset

我将文件夹的目录路径存储在 Properties.Settings.Default.Temporary 中，并允许用户使用 PropertyGrid 更改此值和其他设置。

当用户决定重置设置时，我想使用 Properties.Settings.Default.Reset() 将 Properties.Settings.Default.Temporary 更改为 System.IO.Path.GetTempPath() 的值

我知道 System.Configuration.DefaultSettingValueAttribute。像这样的东西：

```
[global::System.Configuration.DefaultSettingValueAttribute(System.IO.Path.GetTempPath())] 
```

不起作用。

我还阅读[了 Storing default value in Application settings (C#)](https://stackoverflow.com/questions/1341821/storing-default-value-in-application-settings-c)，它描述了一个相关问题，但我想知道是否有办法以上述方式解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:36:41.100

该[`DefaultSettingValueAttribute.Value`](http://msdn.microsoft.com/en-us/library/system.configuration.defaultsettingvalueattribute.value.aspx)属性是 a `string`，因此当使用该值时，您不能传递要调用的函数调用。事实上，没有能力将代码传递给属性：只有文字是可能的。

相反，在您重置设置的应用程序代码中，通过设置和设置您希望在编译时具有不是文字的值（例如，取决于执行环境）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:11:17.817

我自己有一个解决方法的想法：

```
 [global::System.Configuration.UserScopedSettingAttribute()]
    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    [global::System.Configuration.DefaultSettingValueAttribute(null)]
    public string TemporaryDirectory
    {
        get
        {
            if (this["TemporaryDirectory"] == null)
            {
                return System.IO.Path.GetTempPath();
            }
            return ((string)this["TemporaryDirectory"]);
        }
        set
        {
            if (System.IO.Directory.Exists(value) == false)
            {
                throw new System.IO.DirectoryNotFoundException("Directory does not exist.");
            }
            this["TemporaryDirectory"] = value;
        }
    } 
```

我不知道这是否有任何副作用，但到目前为止它似乎有效。很抱歉，我在发布后不久就有了这个想法。我应该再考虑一下这个问题。

# google-cloud-storage - 'gsutil cp' 返回 Catch up md5 以恢复上传

> ID：11671603
> 
> 赞同：2
> 
> 时间：2012-07-26T14:31:01.900
> 
> 标签：google-cloud-storage

在我的上传因未知原因终止后，我尝试恢复它们再次运行**gsutil cp**命令，我得到的只是以下消息

```
Catching up md5 for resumed upload 
```

但没有其他任何反应，进程继续运行，但我的转移永远不会恢复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T03:21:27.097

可恢复上传处理程序在上传文件时即时计算 MD5。如果上传完成时没有任何中断（即，不需要恢复尝试），则此方法运行良好。不幸的是，在恢复时，必须从头开始重建 MD5 状态，或者“赶上”恢复点（对于大文件，这可能需要很长时间）。

一种可能的优化是在一个线程中进行追赶，同时继续上传。如果您（或任何人）有兴趣实现此功能，我们欢迎提交代码。有关如何执行此操作的详细信息，请参阅“gsutil help dev”。请注意，有问题的代码实际上在 boto 库中。

# raphael - Raphael JS 忽略像 .attr({'font-size': 12}) 这样的文本样式

> ID：11671605
> 
> 赞同：1
> 
> 时间：2012-07-26T14:31:08.557
> 
> 标签：raphael

我正在尝试使用 Raphael JS 编写文本，但它完全忽略了文本样式属性。填充、填充不透明度、光标等其他属性将起作用，但字体大小、字体系列等将不起作用。这是我的代码：

```
paper.text(40, 80, 'teste').attr({fill: '#fff', 'font-size': 120}); 
```

请注意，“填充”属性可以完美运行，但“字体大小”却不行。我搜索了论坛，发现了很多关于文本问题的回答（[比如这个](https://stackoverflow.com/questions/11613079/raphael-javascript-text-not-displaying-correctly)），但似乎没有人遇到这种特定的问题。

知道我能做什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:48:25.677

好的，我已经设法解决了。有一个覆盖所有文本样式的 CSS 规则：

```
* {font: 12px Arial;} 
```

我还没有编写 CSS，而且这是我第一次使用 Raphael JS，所以我两次没有意识到它。希望我的案例可以帮助将来的人。谢谢。

# wordpress - Wordpress 将缩略图添加到类别

> ID：11671606
> 
> 赞同：0
> 
> 时间：2012-07-26T14:31:11.200
> 
> 标签：wordpress

如何处理 WordPress 管理员编辑中的问题。我想编辑一个`edit-category`管理面板以向其中添加特色图像（就像在帖子中一样），但我有点优柔寡断，因为很多人使用带有照片静态路径的自定义字段，但我想知道有没有办法做得更好（启用一些 wp 钩子等）。

有人可以指出我正确的方向吗？

* * *

感谢插件，它看起来不错，但我还有一个问题。似乎我对如何查询对象 [类别] 缺乏了解，因此我可以应用过滤器，希望我能说得通。这是在我的 home.php 上完成的。所有转储均为空

```
<?php get_header(); 
$listcat = get_categories('hide_empty=0');
foreach($listcat as $x){
    $img = apply_filters( 'taxonomy-images-queried-term-image', '');
    var_dump($img);
}           
 get_footer(); ?> 
```

如果我将它放在 category.php 中，相同的代码可以正常工作。有任何想法吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:57:07.917

我已经多次使用插件“分类图像”。它也适用于多语言 wp 安装。

与指令链接：[http ://wordpress.mfields.org/plugins/taxonomy-images/](http://wordpress.mfields.org/plugins/taxonomy-images/)

# c# - 如何将xml数据绑定到comboBox以进行智能？

> ID：11671607
> 
> 赞同：0
> 
> 时间：2012-07-26T14:31:12.937
> 
> 标签：c#, .net, xml, combobox

这是我的 xml 文件；

```
<UserClass>
  <Id>1</Id>
  <Name>oss</Name>
  <Address>
    <Id>1</Id>
    <Street>asstreet</Street>
  </Address>
</UserClass> 
```

所以我想将这些“节点”添加到组合框项目中。当用户键入 UserClass 并键入“.”（点）到“UserClass”的末尾时；Id、Name 和其他东西必须在组合框中列出。

用户键入“UserClass”。和 -> 组合框得到这些；

```
UserClass.Id
UserClass.Name
UserClass.Address.Id
UserClass.Address.Street 
```

我尝试了很多东西，包括那个；

```
 ...
    try
    {
        string parsedNode = ParseComboBox();
        XmlReader rdr = XmlReader.Create(new System.IO.StringReader(_globalXml));

        comboBox1.Items.Clear();
        while (rdr.Read())
        {
            if (rdr.NodeType == XmlNodeType.Element)
            {
                comboBox1.Items.Add(rdr.LocalName);
            }

            comboBox1.DroppedDown = true;
        }

        //string parsedNode = ParseComboBox();
        //XmlNodeList childList = xml.GetElementsByTagName(parsedNode);

        ////comboBox1.Items.Clear();
        //foreach (XmlNode node in childList)
        //{
        //    foreach (var osman in node.ChildNodes)
        //    {
        //        comboBox1.Items.Add(parsedNode + "." + osman);
        //    }
        //}

    }
    catch (Exception)
    {
        MessageBox.Show("fuuu");
    }
}...

    private string ParseComboBox()
    {
        string resultAsXmlNodes = null;
        string text = comboBox1.Text;

        if (text.EndsWith("."))
        {
            char[] delimiterChars = { '.' };

            string[] words = text.Split(delimiterChars);

            foreach (string s in words)
            {
                resultAsXmlNodes += s;
            }
        }

        return resultAsXmlNodes;
    } 
```

它无法正常工作。我相信有一种简单的方法可以做到这一点。那么，简单的方法是什么？或者简单地说，如何在 comboBox 中显示节点名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:23:11.100

我发现了多个问题。这是我为一个带有 XML 文件和一个 ComboBox 控件的表单项目工作的一些示例代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Xml;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            comboBox1.KeyDown += comboBox1_KeyDown;
        }

        private void comboBox1_KeyDown(object sender, KeyEventArgs e)
        {
            switch (e.KeyCode)
            {
                case Keys.Decimal:
                case Keys.OemPeriod:
                    LoadComboItems(comboBox1.Text);
                    break;
                default:
                    break;
            }
        }

        void LoadComboItems(string userInput)
        {
            comboBox1.Items.Clear();
            string lookupName = userInput.Trim();
            if (lookupName.Length > 0)
            {
                string _globalXML = Application.StartupPath + @"\XMLFile1.xml";
                XmlReader rdr = XmlReader.Create(_globalXML);

                while (rdr.Read())
                {
                    if (rdr.LocalName == lookupName)
                    {
                        string ElementName = "";
                        int eCount = 0;
                        int prevDepth = 0;
                        while (rdr.Read())
                        {
                            if (rdr.NodeType == XmlNodeType.Element)
                            {
                                ElementName += '.' + rdr.LocalName;
                                eCount++;
                            }
                            else if (rdr.NodeType == XmlNodeType.EndElement && eCount == rdr.Depth)
                            {
                                if (rdr.Depth >= prevDepth)
                                {
                                    comboBox1.Items.Add(lookupName + ElementName);
                                    int pos = ElementName.LastIndexOf('.');
                                    ElementName = ElementName.Substring(0, pos);
                                    prevDepth = rdr.Depth;
                                }
                                eCount--; 
                            }
                        }

                    }
                }

                if (rdr != null)
                {
                    rdr.Close();
                }

                comboBox1.DroppedDown = true;
            }
        }
    }
} 
```

# c# - 可访问性不一致：字段类型

> ID：11671608
> 
> 赞同：0
> 
> 时间：2012-07-26T14:31:22.323
> 
> 标签：c#, dynamics-crm-2011, azure-worker-roles

我正在尝试通过 WCF Web 服务从 Windows azure worker 角色连接到本地 CRM 2011。我创建了一个 WCF 网络服务。但是在运行应用程序时，它显示错误为“`Inconsistent accessibility: field type SampleData_WcfService.OrganizationServiceProxy' is less accessible than field 'SampleData_WcfService.Service1._SDKObject".`我已将代码编写为

```
namespace SampleData_WcfService
{
    public class Service1 : IService1
    {
    public static OrganizationServiceProxy _SDKObject;
       public bool CRMCall()
        {
            try
            {
                if (!CRM_Connection("http://orgname/dattgtdev/XRMServices/2011/Organization.svc", "false", "user2", "pwd", "domain"))
                    return false;

                Entity _entity = new Entity();
                _entity.LogicalName = "account";
                _entity.Attributes.Add(new KeyValuePair<string, object>("name", "Testing123456787"));

               _SDKObject.Create(_entity);
                return true;
            }
            catch (Exception ex)
            {
                return false;
                           }
        }

  public bool CRM_Connection(string WebServiceURL, string Authentication, string UserName, string Password,string DomainName)
        {
            try
            {
                Uri organizationUri = new Uri(WebServiceURL);
                Uri homeRealmUri = null;
               System.ServiceModel.Description.ClientCredentials credentials = new System.ServiceModel.Description.ClientCredentials();
                if (Authentication == "false")
                {
                    credentials.Windows.ClientCredential = new System.Net.NetworkCredential(UserName, Password, DomainName);
                }

                _SDKObject = new OrganizationServiceProxy(organizationUri, homeRealmUri, credentials, null);

                return true;
            }
            catch (Exception ex)
            {
                return false;
            }
        }
    }
 } 
```

这段代码有什么问题？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:35:07.777

`_SDKObject`是公开的，而`OrganizationServiceProxy`课程很可能是内部的。使类访问器公开，或使`_SDKObject`声明不易访问，如内部、受保护或私有。

# objective-c - Objective C - 如何在同一参数中接收两个 int

> ID：11671612
> 
> 赞同：4
> 
> 时间：2012-07-26T14:31:29.903
> 
> 标签：objective-c

我需要写一个这样的方法：

```
-(void)doStuff:(int)options; 
```

基于这样的 typedef 枚举：

```
typedef enum
{
    FirstOption,
    SecondOption,
    ThirdOption
} MyOptions 
```

为了能够以这种方式调用该方法，我需要做什么（即使用多个“启用”选项调用该方法：

```
[self doStuff:(FirstOption | ThirdOption)]; 
```

我需要设置`typedef enum`不同的吗？以及如何检查方法中收到的选项，一个简单的`if (options == ...)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:36:12.240

你要求的是一个位数组。像这样定义您的选项：

```
enum MyOptions
{
    FirstOption = 0x01, // first bit
    SecondOption = 0x02, // second bit
    ThirdOption = 0x04, // third bit
    ... = 0x08 ...
}; 
```

将您建议的选项与 结合起来`|`，并使用`&`( `options & SecondOption`) 对其进行测试。

```
- (void) doStuff: (MyOptions) options
{
    if ( options & FirstOption )
    {
        // do something fancy
    }

    if ( options & SecondOption )
    {
        // do something awesome
    }

    if ( (options & SecondOption) && ( options & ThirdOption) )
    {
        // do something sublime
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:37:18.960

我不是 Obj-C 的专家，但在其他语言中我会使用标志。如果每个值都是 2 的幂，那么它只会为该值设置一个位。您可以将该位用作特定选项的布尔值。

```
FirstOption = 1
SecondOption = 2
ThirdOption = 4

FirstAndThird = FirstOption | ThirdOption; // Binary Or sets the bits

// Binary And checks the bits
IsFirst = FirstAndThird & FirstOption == FirstOption; // is true
IsSecond = FirstAndThird & SecondOption == SecondOption; // is false
IsThird = FirstAndThird & ThirdOption == ThirdOption; // is true 
```

[这个问题](https://stackoverflow.com/questions/3524362/how-to-use-enums-with-bit-flags)也可能有用。

# service - 服务在 Debian Squeeze 上不启动，但在 Debian Lenny 上启动

> ID：11671615
> 
> 赞同：-1
> 
> 时间：2012-07-26T14:31:46.853
> 
> 标签：service, debian, runlevel

标题很好地总结了一切。我的服务可以在 Debian Lenny 上顺利启动，包括重启后。挤压不是这种情况。服务可以手动启动并正常运行，但重启后似乎根本没有触发。

知道如何进一步调查此事吗？

提前致谢，

罗尔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:12:57.503

您可以使用以下命令启用初始化脚本：

```
update-rc.d <yourscript> defaults 
```

该脚本将从运行级别 2、3、4 和 5 开始，但如果软件包位于 Debian 的存储库中，则很可能已经以正确的方式进行了配置。

根据包的不同，/etc/default/ 中可以有一个变量来设置在引导时启动守护程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:41:02.217

我也有同样的问题。问题不在运行级别设置中（使用 sysv-rc-conf 包来配置运行级别），也不在 /etc/default/ 设置中。

更新：我解决了这个问题。整个问题在于我配置运行级别的方式。我使用`sysv-rc-conf`手动更改运行级别，但应用程序还需要其他设置。当我使用

```
insserv /etc/init.d/<file> 
```

它加载了预设配置，重新启动后它终于工作并正确启动。

# eclipse - 运行 Jersey REST 时出现 404 错误

> ID：11671618
> 
> 赞同：3
> 
> 时间：2012-07-26T14:31:57.213
> 
> 标签：eclipse, maven, jersey

我正在尝试运行我的第一个 HelloWorld Jersey 项目，阅读了一堆关于它的教程，我认为理论上它应该可以工作，但我当然做错了，页面给了我 404 错误。这是我所拥有的：

我从 Eclise 中的 DynamicWebProject 开始，并使用插件将其转换为 Maven 项目。并将这些添加到 POM 文件中：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-core</artifactId>
    <version>1.8</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.8</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
    <version>1.8</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-client</artifactId>
    <version>1.8</version>
</dependency>
</dependencies> 
```

然后我还添加了一个像这样的非常小的类来添加一些 Jersey 注释：

```
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;

@Path("/hello")
public class HelloWorldResource {

    @GET
    @Produces("application/plain")
    public String getMessage() {
        // Forward request to service layer.
        return "Hello World";
    }
} 
```

我还在 web.XML 文件中用这些注册了 Jersey：

```
 <servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>JerseyREST</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping> 
```

注意：那里已经创建了一些，我还没有碰过它们。他们还在那里。

因此，使用此配置，我做了一个在服务器上运行并转到

> `http://localhost:8080/JerseyREST/rest/hello`

但得到一个讨厌的 HTTP 状态 404 - /JerseyREST/jerseyrest/rest/hello 错误。而且我无法弄清楚我做错了什么。我有什么建议或地方吗？

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:58:15.190

我按照这个链接实现了我的第一个 Jersey Web 服务：[Java 中的 REST](http://www.vogella.com/articles/REST/article.html) 我在 Tomcat v7.0 上运行它，它运行良好。你在Tomcat上试过了吗？如果没有，我建议你尝试一下。有时发生在我身上，我永久收到 404 错误。为了修复错误，我删除了 Tomcat 并创建了一个新的服务器向导，然后它就可以正常工作了。

正如@Tom 所说，它可能与`"application/plain"`. 改为使用`MediaType.TEXT_PLAIN`。

您需要在 /WEB-INF/lib/ 下添加这些 jar 文件： `asm-3.1`, `jackson-core-asl-1.9.2`, `jackson-jaxrs-1.9.2`, `jackson-mapper-asl-1.9.2`, `jackson-xc-1.9.2`, `jersey-client-1.11`, `jersey-core-1.11`, `jersey-json-1.11`, `jersey-server-1.11`, `jersey-servlet-1.11`,`jettison-1.1`和`jsr311-api-1.1.1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T18:36:28.290

```
 <param-name>com.sun.jersey.config.property.packages</param-name>
  <param-value>JerseyREST</param-value> 
```

参数值应指向您创建类的文件夹。

# html - 页面对齐问题

> ID：11671620
> 
> 赞同：0
> 
> 时间：2012-07-26T14:31:58.900
> 
> 标签：html, css, alignment

我已经为这个问题苦苦挣扎了几个小时，尽管我无法以某种方式解决它似乎很荒谬。

所以这是网页草稿，[http://www.mysecretathens.gr/Sera/test.html](http://www.mysecretathens.gr/Sera/test.html)

如果单击 Bio 链接，您会注意到 Biography.html 上的顶栏菜单略微向右移动。

我们怎样才能解决这个问题？有任何想法吗？

ps 我注意到如果我在 biography.html 中与 test.html 中的图片相同，则没有问题，顶部栏保持在 saim 位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:37:23.643

那是因为您的第一页有滚动条，而简介页没有。您可以强制滚动条始终显示，这可能令人讨厌但始终如一，或者使用绝对定位使内容始终出现在特定位置，尽管可能不居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:39:02.140

```
html{
overflow-y: scroll;
} 
```

这会在右侧强制滚动条

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:40:04.780

第一页上的内容在您的屏幕下方，这意味着您必须滚动。这对于 bio 页面是不一样的，因此不一致，要么添加更多内容，设置 overflow-y 滚动或忽略它（如用户所愿）

# java - 需要了解以下代码的场景

> ID：11671622
> 
> 赞同：-1
> 
> 时间：2012-07-26T14:31:59.873
> 
> 标签：java, multithreading

我有下面的代码..

```
import java.util.concurrent.Executors;
import java.util.concurrent.ThreadFactory;

public class daemonTest {

    public static void main(String... a) throws Exception {
        ExecutorService service = Executors
                .newSingleThreadExecutor(new ThreadFactory() { // anonmyous class start
                    public Thread newThread(Runnable r) {
                        Thread two = new Thread(r, "two");
                        two.setDaemon(true);
                        System.out.println("two --->" + two.isDaemon());
                        return two;
                    }
                });
        for (int i = 0; i < 10; i++)
            service.submit(new Runnable() {
                @Override
                public void run() {
                    System.out.println("[" + Thread.currentThread().getName()
                            + "] - Hello World.");
                    Thread.yield();
                }
            });
        service.shutdown();
    }
} 
```

结果的输出是......

```
two --->true
[two] - Hello World.
[two] - Hello World.
[two] - Hello World.
[two] - Hello World.
[two] - Hello World.
[two] - Hello World.
[two] - Hello World.
[two] - Hello World.
[two] - Hello World.
[two] - Hello World. 
```

请告知上面的代码在做什么......因为我想要实现的是将一个线程设置为守护程序，然后该守护程序线程将为非守护程序线程提供服务！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:18:12.373

> 请告知上面的代码在做什么..

这是你的代码：

```
 service.submit(new Runnable() {
            @Override
            public void run() {
                System.out.println("[" + Thread.currentThread().getName()
                        + "] - Hello World.");
                Thread.yield();
            }
        }); 
```

您正在提交 10 个工作，其中`println`一个`yield()`是无关的，然后立即提交。他们不等待任何线程。如果你需要它，那么你需要`two.join()`在你的可运行文件中的某个地方。

# database - 如何将文档向量存储在搜索引擎的数据库中？

> ID：11671625
> 
> 赞同：1
> 
> 时间：2012-07-26T14:32:08.627
> 
> 标签：database, search-engine, information-retrieval

我已经用 Java 实现了一个搜索引擎。它有一个存储倒排索引的数据库，即从术语到该术语出现的文档列表的映射。有一个功能允许用户上传文档，该文档可以添加到文档中以进行索引。我面临的问题是，每次添加新文档时，索引都会在内存中重建而不是更新。要更新，我需要一个存储文档向量的数据库，这些文档向量本质上是索引中每个术语的 tf-idf（词频 * 逆文档频率）。我无法为它计算出数据库结构，因为存储这样的结构需要哪些行和列或多个表。

我需要存储

```
1\. Document ID 
2\. Document Title
3\. N dimensional Document vector where N is the number of unique terms
4\. N terms 
5\. IDF of each term
6\. TF of each term for every document. 
```

我需要它，以便在查询匹配时我可以提取此向量并计算其与查询向量的相似度。如果您需要任何其他信息，请告诉我。非常感谢，我相信我会在这里得到一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T02:34:57.437

您确定要使用数据库来实现搜索引擎吗？

你可以看看这个 Java 框架，它做得很好，而且很容易学习。

[Lucene 教程 5 分钟](http://www.lucenetutorial.com/lucene-in-5-minutes.html)

它使用向量空间模型，您无需担心您在帖子中提到的所有上述字段，因为 Lucene 将它们与更高级的排名因素一起存储。

很抱歉，如果您有意使用数据库，我的回复对您没有帮助。

# yii - Yii上传图片

> ID：11671626
> 
> 赞同：3
> 
> 时间：2012-07-26T14:32:09.460
> 
> 标签：yii

我是 yii 的新手，所以我一直在关注这个[教程](http://www.yiiframework.com/wiki/2/how-to-upload-a-file-using-a-model/#hh1)。

当我尝试上传图片时，即使不是，它也会报告空字段。

我的 _form 视图：

```
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'picture-form',
    'enableAjaxValidation'=>false,
    'htmlOptions' => array('enctype' => 'multipart/form-data'),
     )); 
?>
...
<div class="row">
  <?php echo $form->labelEx($model,'path_to'); ?>
  <?php echo $form->fileField($model,'path_to'); ?>
  <?php echo $form->error($model,'path_to'); ?>
</div>
...
  <?php $this->endWidget(); ?>
</div><!-- form --> 
```

这是我的操作方法：

```
public function actionCreate()
{
  $model=new Picture;
  if(isset($_POST['Picture']))
  {
    $model->attributes=$_POST['Picture'];

    $model->picture=CUploadedFile::getInstance($model,'path_to');
    if($model->save()){
      $log->lwrite('in save'.$model->picture);
      $model->picture->saveAs(Yii::app()->basePath.'/../images/'.$model->picture);
      $this->redirect(array('view','id'=>$model->id));
      $log->lclose();
    }
  }
$this->render('create',array('model'=>$model,));
} 
```

当我 print_r($_FILES) 的所有内容时，当我 print_r($_POST) 字段“path_to”为空时，验证器可能正在选择该字段。

我可能在这里遗漏了一些东西，我一无所知。

update1：​​我注意到 yii 使用与文件输入同名的隐藏字段，而不是从 $_POST 读取属性，这导致引擎读取空隐藏字段。我知道当用户不输入新图片时，隐藏字段会更新。谁能建议上传图片的最佳方式是什么？

update2：型号代码：类图片扩展CActiveRecord {

```
 public $picture;
... 
    public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('path_to, page_id', 'required'),
            array('page_id', 'numerical', 'integerOnly'=>true),
            array('alt_text', 'safe'),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('id, alt_text, path_to, page_id', 'safe', 'on'=>'search'),
            //array('path_to', 'file','types'=>'jpg, gif, png', 'allowEmpty'=>true, 'on'=>'update'),
            //array('path_to', 'length', 'max'=>255, 'on'=>'insert,update'),
            array('path_to', 'unsafe'),
        );
    }
... 
```

最好的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:12:31.737

我认为因为您已在规则中声明 'path_to' 不安全，所以大量赋值行：

```
$model->attributes=$_POST['Picture']; 
```

将失败，这将导致规则验证失败。更改您的规则以允许 path_to 是安全的，并且您应该一切顺利。. .

看来您还需要一个 page_id，我在您的表单中没有看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:02:16.837

_form 文件上传字段代码：

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'post-form',
    'enableAjaxValidation'=>false,
    'htmlOptions' => array('enctype' => 'multipart/form-data'),
)); ?>

        <div class="row">
        <?php echo $form->labelEx($model, 'image');?>
        <?php echo $form->fileField($model, 'image'); ?>
        <?php echo $form->error($model, 'image'); ?>
    </div>

<?php $this->endWidget(); ?> 
```

控制器代码：

```
public function actionCreate()
    {
        $model=new Post;

        if(isset($_POST['Post']))
        {
            $model->attributes=$_POST['Post'];
                        $uploadedFile=CUploadedFile::getInstance($model,'image');
                        $fileName = $uploadedFile;
                        $model->image = $fileName;

            if($model->save()){
         $uploadedFile->saveAs('C:/Program Files/Apache Group/Apache2/htdocs'.Yii::app()->baseUrl.'/images/thumbnails/'.$fileName);
                $this->redirect(array('view','id'=>$model->id)); 
                        }
        }

        $this->render('create',array(
            'model'=>$model,
        ));
    } 
```

显示视图代码：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$model->search(),
    'ajaxUpdate' => false,
    'columns'=>array(
        array(
            'name'=>'Thumbnail',
            'value'=>array($model,'showThumbnail'), // function in model 
            'type'=>'html',            
            'htmlOptions'=>array('class'=>'thumbnail'),
        ),

    )
));
?> 
```

型号代码：

```
place this function in ur model :

public function showThumbnail($data){
    $path = $data->image;
 return CHtml::image(Yii::app()->baseUrl.'/images/thumbnails/'.$path); // same path as ur uploaded file path
} 
```

# css - 弹性盒模型规格

> ID：11671627
> 
> 赞同：0
> 
> 时间：2012-07-26T14:32:09.497
> 
> 标签：css, flexbox

我第一次在我的 css 中使用弹性盒子模型。在 Chrome 和 Safari 中一切都很好，但 Firefox 就是一团糟，而且我还没有在 PC 上测试 IE。我是否为弹性盒模型使用了正确的属性？请在[http://www.emilydiane.net/ebbg/styles.css查看我的样式表](http://www.emilydiane.net/ebbg/styles.css)

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:27:32.573

您正在使用旧的 flexbox 语法。

`display: box;`是 2009 年的旧语法。

查看规范：[w3.org flexbox](http://dev.w3.org/csswg/css3-flexbox)并熟悉新语法。

# extjs - Extjs 4 未捕获的类型错误

> ID：11671629
> 
> 赞同：0
> 
> 时间：2012-07-26T14:32:14.930
> 
> 标签：extjs, extjs4

我正在尝试执行以下操作：当用户单击按钮时，子面板将显示/隐藏

但是当我按下按钮时，我收到此错误消息：

**未捕获的类型错误：对象 [对象对象] 没有方法“子”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:36:24.183

从外观上看，您需要通过它的“id”来引用您的子面板，我猜它是上​​面代码中的“p”。

所以你想要这样的东西：

```
function: onbtnClick(show) {

    var childPanel = Ext.getCmp('p');
    if(show) {
        childPanel.show();
    } else {
        childPanel.hide();
    }
} 
```

# bash - Unix：excel表的文件名和位置

> ID：11671633
> 
> 赞同：0
> 
> 时间：2012-07-26T14:32:23.297
> 
> 标签：bash, unix, sh

我是 Unix 系统的新手。我不确定这项任务是否可行或如何？

我有这个目录结构

```
c: parent dir/ child dir/file1
c: parent dir/ child dir/file2
c: parent dir/ child dir/file3
.
. 
```

我需要将所有这些文件名及其完整位置（路径）导出到 Excel 表。

任何提示/帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:41:50.040

我不知道写入 excel 工作表的方法，因为它不是文本文件。最好的方法可能是将数据以 CSV 或纯文本等格式输出到文件中，然后将其复制并粘贴到 Excel 表中。

例子：

```
$] find `pwd` > myfile.txt
/absolute/path/to/file0
/absolute/path/to/file1
... 
```

并将其复制并粘贴到您的 Excel 工作表中。或者您可以解析 from 中的数据`find`并在每行之后插入一个逗号。我会把它作为家庭作业留给你......应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:42:50.193

我现在无法访问 Unix 系统，但可以从控制台窗口尝试

```
cd "root of directory structure"
find . -print > myFiles.csv 
```

将 .csv 加载到 Excel 中，然后根据需要推杆。

您可能想阅读该`find`命令 - 它非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:45:36.147

您可以将返回的列表导出`find`到 CSV 文件。要仅获取特定文件夹中的文件列表（不是目录），而不是递归地，您可以：

```
find `pwd` -maxdepth 1 -type f -print > files.csv 
```

# caching - Terracotta 禁用 L2 缓存和对象序列化

> ID：11671636
> 
> 赞同：0
> 
> 时间：2012-07-26T14:32:32.023
> 
> 标签：caching, distributed, ehcache, terracotta

我对 Terracotta 很陌生，我已经安装并使它与 EHcache 一起正常工作以进行分布式缓存，但我现在得到的并不是我真正想要的。在我的应用程序中，我希望有几个带有 ehcache 的客户端缓存（L1），并将已删除密钥的失效从客户端“传播”到所有其他客户端。我不希望我的缓存也驻留在兵马俑服务器上，所以我想简单地禁用 L2 缓存，这样我的对象就不需要可序列化（对缓存执行的唯一操作是 PUT 和 REMOVE） . 我知道这可以使用简单的 ehcache 来完成，但是我的环境（Amazon EC2）中没有多播支持，并且我的客户端将使用自动缩放功能自动创建，所以我不知道他们的 IP。所以基本上，我只需要一个 Terracotta 服务器来将失效请求传播到所有客户端。有没有办法做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:00:36.333

当您使用由 Terracotta 支持的 EhCache 并在您的缓存配置中指定使用 terracotta 时，例如：

```
<cache name="com.xyz.MyPOJO"
  <terracotta/>
</cache> 
```

那么你的类必须是可序列化的（因为 Terracotta 会尝试将它存储在缓存服务器实例上。

但是，在您的配置中，您可以指定不对某些缓存使用 Terracotta，例如

```
<cache name="com.xyz.MyPOJO"
  <terracotta/>
</cache>

<cache name="com.xyz.NotServerStoredPOJO"
</cache> 
```

然后，上面示例中的“NotServerStoredPOJO”将不会存储在兵马俑缓存服务器上……相反，它只会存在于您的本地 EhCache 中……但是如果您这样做，您将无法将其传播到其他实例diff JVM 中的 EhCache。

所以，也许你需要在兵马俑服务器上保留一些东西（某种标志/ID）来指示什么是无效的。**然后在您的应用程序代码中有一个通用的类/功能，它将在从本地 EhCache 获取值之前**检查该标志......如果它发现标志/id要被删除，那么它将从本地缓存中删除它并且不会返回任何东西给请求者。

另一方面，您的用例有点违背了拥有中央缓存服务器的目的。如果你想在没有中心位置的情况下协调多个缓存实例，你可以使用 JGroups [http://www.jgroups.org](http://www.jgroups.org)（而不是 Terracotta）......它也没有商业许可。但是，您需要在 JGroups 上实现自己的机制，以使本地 EhCache 实例中的某些条目无效...

# php - PHP二十一点王牌

> ID：11671638
> 
> 赞同：1
> 
> 时间：2012-07-26T14:32:36.643
> 
> 标签：php

PHP二十一点脚本很简单，我有一组牌，我随机选择一张并添加它，而且保持计数也很容易，其中最难的部分与 A 一起出现。

除了暴力破解，还有什么有效的方法来计算它们吗？从理论上讲，有可能（尽管极不可能）连续获得 4 个 ace，我如何让它算作 14 而不是 44、34、24 等？（最接近 21 没有克服它）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:42:29.947

像这样处理王牌的东西：

```
$total = 0;
// Sort in a way that the aces are last, handle other cards FIRST
foreach($cards as $card)
{
    switch($card)
    {
        case "king":
        case "queen":
        case "jack":
        case "10":
            $total += 10;
            break;

        // Etc, other cards

        case "ace":
            if($total >= 11)
            {
                $total += 1;
            }
            else
            {
                $total += 11;
            }
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:41:50.343

由于 A 的规则，二十一点中的牌本身没有价值。您无需查看每张卡，确定一个值，然后添加它们。

您查看手牌，并确定手牌的价值。

现在在确定一手牌的价值时，对于大多数牌来说，它的价值等于牌号，但你需要针对面牌和 A 的特殊逻辑。

因此：不要从你的牌组中抽出“数字”，抽出“牌”，然后编写一个函数，将“牌”的“手”（列表）计算为一个值。

# c# - 如何用 dataReader 替换 dataAdapter 以在我的水晶报表 C# 中的 DataSet 中填充数据

> ID：11671639
> 
> 赞同：0
> 
> 时间：2012-07-26T14:32:39.297
> 
> 标签：c#, crystal-reports, dataset, dataadapter

像你一样知道填充数据集的更简单方法是使用这样的 dataAdapter： DataSetEmp myDataSet = new DataSetEmp(); ...（这里 Id 做了一个选择请求..）

```
SqlDataAdapter adapter = new SqlDataAdapter();
adapter.SelectCommand = myCommand1;
adapter.Fill(myDataSet.myDataTable1); 
```

AND ......（这里 Id 做了一个选择请求..）

```
 SqlDataAdapter adapter2 = new SqlDataAdapter();
  adapter2.SelectCommand = myCommand2;
  adapter2.Fill(myDataSet.myDataTable2); 
```

//我有一个水晶报表

```
CrystalReport1 report1 = new CrystalReport1();
report1.setDataSource(myDataSet); 
```

这种方式效果很好，但我想用 DataReader 而不是 DataAdapter 填充数据，因为我想在 while(myReader.read()){ ....} 循环中检查一些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:39:13.673

您必须`DataTable`使用其方法和属性手动填充。例如。依次创建每个包含`DataTable`的内容（本质上是重新创建 的实现`DataAdapter.Fill`）。

或者，您可以使用`DataAdapter`and 在将其传递给 Crystal Reports 之前使用这些相同的成员来修改`DataTable`的内容。

# jquery - 不要让用户选择过去的日期？

> ID：11671640
> 
> 赞同：0
> 
> 时间：2012-07-26T14:32:41.080
> 
> 标签：jquery, backbone.js, twitter-bootstrap, datepicker, mustache

使用引导日期选择器时，是否可以防止用户选择过去的日期？

我尝试使用`.datepicker({ minDate: 0 })`，但它似乎不起作用。

```
.done(function (response) {
                        view.data = response;
                        $pageHeader.after(view.options.template(response));
                        view.$('.datepicker:not([readonly])')
                            .datepicker({ minDate: 0})
                            .on('changeDate', function () {
                                $(this).datepicker('hide');
                            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:17:05.337

从引导日期选择器 [https://github.com/eternicode/bootstrap-datepicker使用这个分支](https://github.com/eternicode/bootstrap-datepicker)

并输入一些简单的逻辑来在 startdate 更改时更新 endDate 的 startdate

```
$('#start_date').datepicker().on('changeDate', function(ev){
  $('#end_date').datepicker('setStartDate', ev.date);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:53:29.707

minDate 不是引导日期选择器的选项，但您可能会覆盖日期选择器：

```
$.fn.datepicker.prototype.click: function(e) {
  e.stopPropagation();
  e.preventDefault();
  var target = $(e.target).closest('span, td, th');
  if (target.length == 1) {
    switch(target[0].nodeName.toLowerCase()) {
      case 'th':
        switch(target[0].className) {
          case 'switch':
            this.showMode(1);
            break;
          case 'prev':
          case 'next':
            this.viewDate['set'+DPGlobal.modes[this.viewMode].navFnc].call(
              this.viewDate,
              this.viewDate['get'+DPGlobal.modes[this.viewMode].navFnc].call(this.viewDate) + 
              DPGlobal.modes[this.viewMode].navStep * (target[0].className == 'prev' ? -1 : 1)
            );
            this.fill();
            break;
        }
        break;
      case 'span':
        if (target.is('.month')) {
          var month = target.parent().find('span').index(target);
          this.viewDate.setMonth(month);
        } else {
          var year = parseInt(target.text(), 10)||0;
          this.viewDate.setFullYear(year);
        }
        this.showMode(-1);
        this.fill();
        break;
      //=================
      // Here is where a date is selected
      //=================
      case 'td':
        if (target.is('.day')){
          var day = parseInt(target.text(), 10)||1;
          var month = this.viewDate.getMonth();
          if (target.is('.old')) {
            month -= 1;
          } else if (target.is('.new')) {
            month += 1;
          }
          var year = this.viewDate.getFullYear();

          // Change some stuff here
          date = new Date(year, month, day,0,0,0,0);
          if(date >= this.options.minDate) {
            this.date = date
            this.viewDate = new Date(year, month, day,0,0,0,0);
            this.fill();
            this.setValue();
          } else {
            // what should we do if the date is less than minDate?
          }

          this.element.trigger({
            type: 'changeDate',
            date: this.date
          });
        }
        break;
    }
  }
}; 
```

**或者**另一个选项是允许回调处理它：

```
$.fn.datepicker.prototype.click: function(e) {
  e.stopPropagation();
  e.preventDefault();
  var target = $(e.target).closest('span, td, th');
  if (target.length == 1) {
    switch(target[0].nodeName.toLowerCase()) {
      case 'th':
        switch(target[0].className) {
          case 'switch':
            this.showMode(1);
            break;
          case 'prev':
          case 'next':
            this.viewDate['set'+DPGlobal.modes[this.viewMode].navFnc].call(
              this.viewDate,
              this.viewDate['get'+DPGlobal.modes[this.viewMode].navFnc].call(this.viewDate) + 
              DPGlobal.modes[this.viewMode].navStep * (target[0].className == 'prev' ? -1 : 1)
            );
            this.fill();
            break;
        }
        break;
      case 'span':
        if (target.is('.month')) {
          var month = target.parent().find('span').index(target);
          this.viewDate.setMonth(month);
        } else {
          var year = parseInt(target.text(), 10)||0;
          this.viewDate.setFullYear(year);
        }
        this.showMode(-1);
        this.fill();
        break;
      //=================
      // Here is where a date is selected
      //=================
      case 'td':
        if (target.is('.day')){
          var day = parseInt(target.text(), 10)||1;
          var month = this.viewDate.getMonth();
          if (target.is('.old')) {
            month -= 1;
          } else if (target.is('.new')) {
            month += 1;
          }
          var year = this.viewDate.getFullYear();
          // SAVE THE OLD DATE
          oldDate = this.date
          this.date = new Date(year, month, day,0,0,0,0);
          this.viewDate = new Date(year, month, day,0,0,0,0);
          this.fill();
          this.setValue();
          this.element.trigger({
            type: 'changeDate',
            date: this.date,
            // pass it into the event object
            oldDate: oldDate
          });
        }
        break;
    }
  }
}; 
```

**资源**

*   [http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

# php - PHP仅复制以字母AUW结尾的文件

> ID：11671643
> 
> 赞同：0
> 
> 时间：2012-07-26T14:32:50.123
> 
> 标签：php, copy

我有这个 PHP 代码可以将文件从一个目录复制到另一个目录，而且效果很好，但是，如何只复制以字母“AUW”（减引号）结尾的文件？请记住，该文件是无扩展名的，因此它实际上以字母 AUW 结尾。

同样在复制后，我不希望从源文件夹中删除文件。

```
// Get array of all source files
$files = scandir("sourcefolder");
// Identify directories
$source = "sourcefolder/";
$destination = "destinationfolder/";
// Cycle through all source files
foreach ($files as $file) {
  if (in_array($file, array(".",".."))) continue;
  // If we copied this successfully, mark it for deletion
  if (copy($source.$file, $destination.$file)) {
    $delete[] = $source.$file;
  }
}
// Delete all successfully-copied files
foreach ($delete as $file) {
  unlink($file);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:35:27.717

您可以使用函数[glob](http://php.net/manual/en/function.glob.php)。

```
foreach (glob("*AUW") as $filename) {
   // do the work...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:38:11.527

```
foreach ($files as $file) {
  if (in_array($file, array(".",".."))) continue;
  if (!endsWith($file, "AUW")) continue;
  // If we copied this successfully, mark it for deletion
  if (copy($source.$file, $destination.$file)) {
    // comment the following line will not add the files to the delete array and they will
    // not be deleted
    // $delete[] = $source.$file;
  }
}

// comment the followig line of code since we dont want to delete
// anything
// foreach ($delete as $file) {
//   unlink($file);
// }

function endsWith($haystack, $needle)
{
    $length = strlen($needle);
    if ($length == 0) return true;

    return (substr($haystack, -$length) === $needle);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:39:21.583

使用[substr() 方法](http://php.net/manual/en/function.substr.php)获取文件名的最后三个字母。这将返回一个可用于逻辑比较的字符串。

```
if( substr( $file, -3 ) == 'AUW' )
{
  // Process files according to your exception.
}
else
{
  // If we copied this successfully, mark it for deletion
  if (copy($source.$file, $destination.$file)) {
    $delete[] = $source.$file;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T14:35:47.713

您想使用该`glob`功能。

```
foreach( glob( "*.AUW" ) as $filename )
{
      echo $filename;
} 
```

[http://php.net/manual/en/function.glob.php](http://php.net/manual/en/function.glob.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T14:34:52.030

谷歌搜索太难了吗？我会给你一个提示 - 用于`substr()`查看最后 3 个字母是否为“AUW”

啊

# diff - 可以安全地取消应用补丁吗？

> ID：11671647
> 
> 赞同：4
> 
> 时间：2012-07-26T14:33:29.153
> 
> 标签：diff, patch

我可以假设成功后

```
patch < mypatch 
```

相反

```
patch -R < mypatch 
```

将永远成功，并且完全撤消之前的更改？

我知道有几种补丁格式，当然还有很多补丁/差异程序，所以如果这与您相关的版本/系统相关，请指定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:39:37.600

补丁文件应该完美地反向工作。一般来说，补丁只是列出添加的行和删除的行。使用 -R 也可以简单地交换这些，使添加的行看起来像删除的行，而删除的行看起来像添加的行。

只要您在执行补丁后没有修改任何内容，删除应该始终有效。

# ios - 从中断处继续动画 - 核心动画

> ID：11671650
> 
> 赞同：1
> 
> 时间：2012-07-26T14:33:44.067
> 
> 标签：ios, ios5, animation, core-animation, layer

我的动画需要一点帮助。我有两个按钮，第一个按钮调用动画，第二个按钮调用另一个动画。

现在，当我按下第一个按钮时，将调用下面这样的代码。问题是当我按下第二个按钮时，动画有点传送到它的起始位置（第二个动画位置），有没有办法让动画从中断的地方一起流动？

```
CABasicAnimation *anim1 = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
anim1.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
anim1.fromValue = [NSNumber numberWithFloat:((-10*M_PI)/180)];
anim1.toValue = [NSNumber numberWithFloat:((10*M_PI)/180)];
anim1.repeatCount = HUGE_VALF;
anim1.autoreverses = YES;
anim1.duration = .5;
[head addAnimation:anim1 forKey:@"transform"]; 
```

虚拟图片：

[http://i47.tinypic.com/2yopif6.jpg](http://i47.tinypic.com/2yopif6.jpg)

黑线是第一个动画，红色是第二个动画，绿色是我要弄清楚的。根据图片，它在黑色中间被打断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T15:19:26.113

为什么不使用动画方法而不是 UIView 类 - 只需确保使用**UIViewAnimationOptionBeginFromCurrentState**选项？

在此处查看参考文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

**编辑**

我认为本教程会更好地帮助您：[http](http://wangling.me/2011/06/core-animation-101-from-and-to/) ://wangling.me/2011/06/core-animation-101-from-and-to/ 。他们试图实现的是在通过按钮触发动画后反弹球。当第二次按下按钮时，球应该从当前位置反弹回来。有一节他们提到他们依赖 2 个委托方法 animationDidStart 和 animationDidStop 来实现这个期望的效果。

# python - pyodbc 返回由拉丁文替换的 unicode 符号

> ID：11671653
> 
> 赞同：3
> 
> 时间：2012-07-26T14:33:49.407
> 
> 标签：python, unicode, odbc

当使用 Python 和 pyodbc 连接到 Transbase 源时*（连接字符串是正确的并且可以在其他应用程序中使用）*，我看到 ó、ű、é、á 等符号转换为 o、u、e、a。

但是，如果我通过 ODBC 从 MS Access 连接到同一源，这些符号将正确显示。如果我从 pyodbc 连接到 MS Access（与 mdb 文件中的 Transbase 源链接），则符号显示正确。

> Provider=Microsoft.Jet.OLEDB.4.0;数据源=c:\1.mdb;Persist Security Info=False

CHARSET=uft8 没有帮助

如何更改连接字符串或其他参数以正确显示这些符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T15:08:06.237

您的问题中有一些变量使一个好的答案变得困难。了解您正在查询的数据库使用什么字符编码很重要。看来您的替换字符无法用等效的拉丁字符找到。

以与数据库相同的编码或具有 ó、ű、é、á 对应字符的编码对查询的返回进行编码将是一个开始。所以：

```
query_result = cursor.execute(sql)
data = query_result[0].encode('utf8',errors='strict') 
```

如果在您选择的编码中找不到字符（上例中为 utf8），errors='strict' 将导致错误。这可以帮助您找到正确的数据库编码。

从你得到的结果来看，你现在拥有的代码相当于：

```
data = query_result[0].encode('utf8',errors='replace') 
```

它将用“合适的”替代品替换它找不到的字符。所以ó被替换为“0”

# php - 来自另一台服务器的安全 MySQL 连接

> ID：11671667
> 
> 赞同：1
> 
> 时间：2012-07-26T14:34:30.397
> 
> 标签：php, mysql, ajax

我有一个包含车辆列表的数据库，其中前三列用于使用 AJAX 填充链接选项值。这三个菜单可以在我的网站上选择特定车辆。有人问我是否可以在第 3 方网站上提供此车辆查找功能，目的是使用三层菜单在第 3 方网站上返回一个小的、可爆炸的字符串作为 $_POST 数据。

请问实现这一目标的最佳方法是什么？我可以启用远程连接，但在我知道如何充分保护它之前我很谨慎。

对不起，如果这看起来很愚蠢！我还没有使用 localhost 以外的任何连接。

提前致谢，

乔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:42:49.537

我认为没有任何理由让第三方访问您的数据库。

既然您似乎希望向他们提供相当少量的可公开访问的数据，为什么不在您自己的网站上简单地拥有一个 url，它以 XML 或 JSON 格式返回数据，他们可以随心所欲地使用这些数据。

这解决了您的直接需求，如果您需要，您可以将其开发为更复杂的服务。

* * *

这是一些简单的 PHP，可用于以 JSON 格式返回数据。用适合您的数据库的东西替换 SQL。

```
$sth = mysql_query("select m.make, l.model, i.count from makes m, models l, inventory i where i.makeid = makeid and i.modelid = l.modelid");
$rows = array();
while($r = mysql_fetch_assoc($sth)) {
    $rows[] = $r;
}
print json_encode($rows); 
```

**重要说明**：此代码很简单，但如果您想接受第三方的输入，则不适合。如果你想让他们查询你有多少福特汽车，你需要一个准备好的语句，例如使用[PDO](http://php.net/manual/en/book.pdo.php)：

```
$stmt = $pdo->prepare("select i.count from makes m, inventory i where i.makeid = makeid and make = :make");    
$stmt->execute(array(':make' => $make)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T14:39:31.803

我个人会在数据库前面放置一个 API 并公开该服务，因为我总是小心翼翼地将数据库公开给外部各方。

话虽如此，如果数据不是个人可识别或关键的。那么你当然可以让别人访问你的数据库。

最好的方法是为第三方创建一个新用户，并只给它使用他们需要的权限（即只有他们需要访问的数据库和表以及他们需要的操作（SELECT、UPDATE 等））

需要注意的另一件事是，这可能还需要对 MySQL 的 my.ini 配置文件进行一些更改，因为标准 MySQL 安装仅绑定在 localhost 上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T14:41:27.657

我看到它的方式是你有几个选择：

1.  使用 OpenVPN 或 SSH 隧道之类的东西在两台服务器之间建立隧道，以允许 MySQL 远程连接通过（永远不要在公共接口上收听！）。虽然，我不会为第三方这样做。

2.  为两台服务器之间的交互创建 Web 服务。如果您选择这样做，您应该使用已知的数据序列化方法，如 XML 或 JSON，而不是“可爆炸字符串”，因为这将允许更多的可移植性和更少的代码编写来解析您的结果。

# git - 合并多个提交并合并为一个提交到其他分支

> ID：11671668
> 
> 赞同：2
> 
> 时间：2012-07-26T14:34:31.913
> 
> 标签：git, version-control, git-merge, git-rebase

我需要一些关于 GIT 的帮助。我们刚刚开始使用 GIT，只是现在我们公司还没有一个好的设置，所以在我看来一切都是一团糟。我提供了我的历史来帮助你们更好地理解我想要做什么。 ![我们的 Git 历史](../Images/e3a918bcf7774084b8f8cb5b2f773ed8.png)

![Git 历史继续](../Images/2bd3f61b3e23113b426b6a579b9ea4b5.png)

所以今天我试图发布到我们的支持和主服务器。我们首先发布到 Sup，然后将 Sup 合并到 Live/master 系统中。

如果您查看历史记录并找到分支“130029”，我正在尝试将其合并到支持中，但想看看我是否可以“压缩”所有分支/提交，我想今天将其发布到一个包中。

我已经阅读了关于 re-basing 并在分支“130029”上尝试过我按照代码执行的操作

```
git checkout DEV.130029
git rebase SUPPORT -i 
```

这将我带到了 rebase 编辑器，它列出了所有提交，但我希望这些提交是其他分支，所以我可以压缩它们然后合并到 Support。我没有比上面的代码更进一步，我只是中止了，因为我似乎迷路了。有没有其他方法可以选择我想发布的所有分支，然后将所有分支合并为一个提交到 Sup/master 中？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:42:47.100

我认为你的问题，如果你有一个，是工作流程。任何使用功能分支的足够复杂的项目都会有一个混乱的图表。如果你想要一个好的例子，看看[git.git，git 源本身。](https://github.com/git/git)这是从字面上[编写有关 git 工作流的文档](http://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html)的项目，如果您将当前快照`master`放入`gitk`or `tig`，它在第一次通过时看起来会相当混乱。

关于您的图表的问题不在于它本身看起来像地铁地图。这是它没有显示上游与下游分支的清晰概念，或者从上游分支到下游分支的有序毕业。事实上，它看起来非常像我们从 SVN 迁移到 git 时在我的雇主那里使用的工作流程：高度集中，依赖于多个不经常相互合并的“永久”分支，它们的集成已经完成完全是临时的。这也可能是完全错误的。很难从一些历史快照中推断出贵公司的工作流程策略。

如果您觉得这不容易解释，并且您的团队也有这种感觉，那么可能是时候采用新的工作流程了。版本控制可以让你的生活更轻松，而不是浪费你所有的时间。那里存在许多成功的 git 工作流程：

*   [Pro git概述](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows)了一些。我们最终使用[集成管理器](http://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html)抓取了类似于 SVN 的工作流程，以得到一个看起来几乎与[git 相同的工作流程。](http://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html)

*   谷歌将[返回其他受欢迎的。](http://nvie.com/posts/a-successful-git-branching-model/)那个特别的，Gitflow，在 SO 上非常流行，并且有一些很好的[git 扩展](https://github.com/nvie/gitflow/)，使使用它变得轻而易举。

*   相当多的 SO 问题描述了成功的工作流程，[包括一些链接大量研究并有一些很好的答案的问题。](https://stackoverflow.com/a/2621837/877115)

至少，如果您没有修复可用的最旧的上游分支中的错误，没有使下游开发分支与上游祖先的更改保持同步，或者在分支之间定期挑选樱桃，那么是时候改变。

最后，在没有关于您的工作流程的任何其他信息的情况下，如果您在白天处理一个功能分支，并希望将其与`SUPPORT`分支合并，首先压缩，这是执行此操作的众多方法之一：

```
git checkout DEV.130029
git rebase -i --onto SUPPORT <branch_DEV_was_cut_from> DEV.130029 ;# squash what you want here
git checkout SUPPORT
git merge DEV.130029 
```

如果您只是为了让图表看起来更简单而重新设置基准，那么请把时间花在工作流程上。

# ruby-on-rails-plugins - rspec [未找到]

> ID：11671669
> 
> 赞同：1
> 
> 时间：2012-07-26T14:34:32.303
> 
> 标签：ruby-on-rails-plugins

我正在将 gem[单元](https://github.com/apotonick/cells/)用于购物车并使用以下命令

```
rails generate cell cart display -e haml 
```

它生成单元格并给出错误

```
create  app/cells/cart_cell.rb
invoke  haml
create    app/cells/cart/display.html.haml
error  rspec [not found] 
```

我已经安装了

```
sudo gem install rspec 
```

但问题没有解决。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:34:36.270

请将以下行放入您的 Gemfile

```
gem "rspec-cells", ">= 0.1.3", :group => [:test] 
```

并运行 bundle 来安装 gem。

请注意，您必须致电

```
rails generate cell cart display -e haml -t rspec 
```

# iphone - 为什么我的 NSNetServiceBrowser 没有解决任何问题？

> ID：11671675
> 
> 赞同：1
> 
> 时间：2012-07-26T14:34:40.177
> 
> 标签：iphone, objective-c, cocoa-touch

我正在使用 NSNetServiceBrowser 在我的网络上查找服务。它可以找到它们，但无法解析它们中的任何一个，无论是我的还是我的计算机内置的。当我检查未解析服务的域时，我得到“。” 每一个人。当我 NSLog 主机时，主机也总是“（null）”。此外，似乎服务的名称实际上是类型的第一部分（例如，我使用类型“_iListen._tcp.”发布我的服务，名称显示为“_iListen”。类型也显示为“_tcp.local。”）。我搜索服务的代码是：

```
[browser searchForServicesOfType:@"_services._dns-sd._udp." inDomain:@""]; 
```

注意：这是在 iPhone 上完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:50:58.877

浏览“_services._dns-sd._udp”。是一个元查询，它列出了网络中的所有服务类型。解决响应是没有意义的。请参阅[技术问答 QA1337](http://developer.apple.com/library/mac/#qa/qa1337/_index.html)。

您必须浏览“_iListen._tcp”。查找您的类型的服务。

“dns-sd”工具可以在 OS X 命令行上用于测试浏览/查找/解析。

# asp.net - 将信息发布到 Asp.net 页面方法？

> ID：11671687
> 
> 赞同：0
> 
> 时间：2012-07-26T14:35:07.887
> 
> 标签：asp.net, web-services, http, iis, jquery

*这是一个“如何在幕后完成”的问题：*

我将数据从 jQuery ajax 发布到 asp.net 页面**方法**。（方法名是`Show1`）

提琴手显示：

```
POST http://localhost:54517/WebSite8/Default.aspx/Show1 HTTP/1.1
Host: localhost:54517
 ...

{aaa:"value"} 
```

*就像发布到 asmx 一样。*

`iis`收到请求，但`/Show1` **他**没有这样的页面。

那么他*怎么*知道他应该在其中运行`Default.aspx` *并*搜索一个`Show1`方法呢？

此外，如果此方法声明为：

```
 [WebMethod]
    public static string Show1(string aaa)
    {} 
```

询问其*WSDL 类似信息*是否合法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:14:56.703

Default.aspx/Show1 是页面中静态 Web 方法的自然 URL 结构，因此框架会处理请求并正确路由它。

至于 WSDL，我不确定，因为它不是一个纯 Web 服务，WSDL 是如何发挥作用的。

# java - 在tomcat中部署2个应用程序时出现邮件问题

> ID：11671694
> 
> 赞同：3
> 
> 时间：2012-07-26T14:35:41.317
> 
> 标签：java, web-services, tomcat, jakarta-mail

之前，我在 Tomcat 6.0.24 上部署了 1 个应用程序，它运行良好。现在，我已经部署了一个 AXIS Web 服务，第一个应用程序在发送邮件时给出了错误。我正在使用 Java6 并使用 mail-1.4.2.jar 进行邮件发送。

```
 Error message:
     javax.mail.MessagingException: IOException while sending message;
       nested exception is:
   javax.activation.UnsupportedDataTypeException: no object DCH for MIME type multipart/mixed; 
         boundary="----=_Part_8_85998487.1343293259308"
         at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:779)
             at javax.mail.Transport.send0(Transport.java:191)
         at javax.mail.Transport.send(Transport.java:120) 
```

此外，如果我从部署中删除 Web 服务并尝试运行应用程序，它可以正常工作。另外，我可以接收邮件。此外，我想补充的是，如果我将 webservie 部署在不同的 tomcat 上，那么 applciation 朗姆酒就可以了。问题仅在于两者同时在同一台服务器上时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T15:06:54.180

这么晚才回复很抱歉。我能够追踪问题背后的原因。在 Web 服务中，我使用 jaxws-rt-2.1.3.jar，其中有一个名为**com.sun.xml.ws.encoding.MimeCodec**的类。在 MimeCodec 中有一个静态块。

```
static { 
     // DataHandler.writeTo() may search for DCH. So adding some default ones.
     try {
         CommandMap map = CommandMap.getDefaultCommandMap();
         if (map instanceof MailcapCommandMap) {
             MailcapCommandMap mailMap = (MailcapCommandMap) map;
             String hndlrStr = ";;x-java-content-handler=";
             mailMap.addMailcap(
                 "text/xml" + hndlrStr + XmlDataContentHandler.class.getName());
             mailMap.addMailcap(
                 "application/xml" + hndlrStr + XmlDataContentHandler.class.getName());
             mailMap.addMailcap(
                 "image/*" + hndlrStr + ImageDataContentHandler.class.getName());
             mailMap.addMailcap(
                 "text/plain" + hndlrStr + StringDataContentHandler.class.getName());
         }
     } catch (Throwable t) {
         // ignore the exception.
     }
 } 
```

上面的静态块为 DCH 提供了一些默认的 MIME 类型，并且在 WS 启动时执行。现在，在发送邮件之前，代码使用 javax.activation,CommandMap(rt.jar/activation.jar) 搜索 MIME 类型。在这种情况下，预期的 mime 类型加载已被覆盖。只有当 MIME 类型是上述 4 中的任何一个时，邮件才会起作用。

因此，每次在发送邮件之前，我只需使用以下代码将 CommandMAp 重置为预期的功能，并且邮件功能已经开始正常工作，没有任何问题。

```
CommandMap.setDefaultCommandMap(new MailcapCommandMap()); 
```

此外，当我检查旧版本的 jaxws-rt.jar(2.1.1) 时，静态块不存在，但其他一些类提供了相同的功能（抱歉，我现在不记得名字了）。

此外，在调试时，我注意到在**javax.activation.MailcapCommandMap**内部，MIME 类型是从

```
System.getProperty("user.home") + File.separator + ".mailcap"; 
```

和

```
System.getProperty("java.home") + File.separator + "lib" + File.separator + "mailcap"; 
```

所以，如果我们在上述位置提供 MIME 类型，那么邮件也应该可以工作（我还没有测试过）。

# c - 通过指向结构指针的指针更改变量

> ID：11671695
> 
> 赞同：0
> 
> 时间：2012-07-26T14:35:45.010
> 
> 标签：c, pointers

我试图通过一个结构来更改一个 int 变量，该结构将一个指向其他结构的指针固定为一个字段是该变量的结构。我在编译中收到一个警告和一个错误。任何人都可以解释为什么以及如何使用此代码进行操作？

代码是：

```
typedef struct
{
    struct TEEC_Session *ptr_struct;
} Context_model;

typedef struct
{   int t_S;    
} Session_model;

void Attribution(Context_model* context,Session_model* session )
{
    (*context).ptr_struct = session;  

}

void change_t_S(Context_model* context )
{
    (*(*context).ptr_struct).t_S = 5; // I Want to change t_S to 5 using only the 

context structure

} 

main()
{
Context_model context;
Session_model session;

Attribution(&context,&session);

// Now I want to change t_S using the context 
change_t_S(&context);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:58:54.350

我展示了带有附加声明和指针取消引用习语的代码。

这在 C、HTH 中编译正常。

```
struct TEEC_Session;

typedef struct
{ struct TEEC_Session *ptr_struct;
} Context_model;

typedef struct TEEC_Session
{ int t_S;
} Session_model;

void Attribution(Context_model* context,Session_model* session )
{
    context->ptr_struct = session;
}

void change_t_S(Context_model* context )
{
    context->ptr_struct->t_S = 5; // I Want to change t_S to 5 using only the context structure
}

int main_change_var(int argc, char **argv)
{
    Context_model context;
    Session_model session;

    Attribution(&context,&session);

    // Now I want to change t_S using the context
    change_t_S(&context);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:42:45.570

修改 Context_model 的定义为

```
typedef struct
{
    Session_model *ptr_struct;
} Context_model; 
```

并将其移至 Session_model 的定义下方。

struct TEEC_Session 未在您的代码中定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T16:47:07.073

您声明您`ptr_struct`具有`struct TEEC_Session *`类型，但随后尝试将其用作`Session_model *`类型指针。这是一个明显的类型不匹配。那是没有意义的。

是什么`struct TEEC_Session`？`TEEC_Session`在您的整个程序中没有其他提及。为什么您将您的`ptr_struct`字段声明为指向某个完全随机的现成类型的指针`struct TEEC_Session`，然后完全忘记它的存在`struct TEEC_Session`？

如果你的`struct TEEC_Session`类型应该是`Session_model`类型的同义词，你应该告诉编译器。例如，您可以声明`Session_model`为

```
typedef struct TEEC_Session
{   
   int t_S;    
} Session_model; 
```

一切都会按预期工作。

`TEEC_Session`或者，您可以通过重新排序声明来完全摆脱任何引用

```
typedef struct
{   
  int t_S;    
} Session_model;    

typedef struct
{
  Session_model *ptr_struct;
} Context_model; 
```

最后，您在代码中使用了 C99 风格的注释 ( `//`)。C99 不允许声明没有显式返回类型的函数。`main()`应该是`int main()`。

# c++ - 如何正确关闭为使用 IOCP 而创建的工作线程

> ID：11671699
> 
> 赞同：1
> 
> 时间：2012-07-26T14:35:51.083
> 
> 标签：c++, sockets, network-programming, asyncsocket, iocp

*以下是Microsoft Windows 网络编程*的代码片段：

```
...
// Determine how many processors are on the system.
GetSystemInfo(&SystemInfo);

// Create worker threads based on the number of
// processors available on the system. For this
// simple case, we create one worker thread for each
// processor.

for (int i = 0; i < SystemInfo.dwNumberOfProcessors; i++)
{
    // Create a server worker thread, and pass the
    // completion port to the thread. NOTE: the
    // ServerWorkerThread procedure is not defined
    // in this listing.

    HANDLE ThreadHandle = CreateThread(NULL, 0, ServerWorkerThread, CompletionPort, 0, NULL);

    // Close the thread handle
    CloseHandle(ThreadHandle);
}
... 
```

我不明白为什么样本会直接关闭线程句柄。是否不需要存储它们（例如在 std::vector 中），以便稍后退出程序时终止所有工作线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:44:29.937

这不是必要的。来自[CloseHandle 上的 msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724211%28v=vs.85%29.aspx)：

> **关闭线程句柄不会终止关联的线程或删除线程对象。**关闭进程句柄不会终止关联的进程或删除进程对象。**要删除线程对象，您必须终止线程，然后关闭该线程的所有句柄。**有关详细信息，请参阅终止线程。要删除进程对象，您必须终止该进程，然后关闭该进程的所有句柄。有关详细信息，请参阅终止进程。

实际上，自包含线程通常在其句柄立即关闭的情况下创建，这允许在线程退出时释放资源。

# ruby - Ruby 中我的 XML 之前的无效字符

> ID：11671708
> 
> 赞同：1
> 
> 时间：2012-07-26T14:36:21.300
> 
> 标签：ruby, xml, rexml

当我查看 XML 文件时，它看起来很好，并且以`<?xml version="1.0" encoding="utf-16le" standalone="yes"?>`

但是当我用 Ruby 阅读它并将其打印出来时，前面有两个 ?s：`??<?xml version="1.0" encoding="utf-16le" standalone="yes"?>`

这些来自哪里，我如何删除它们？用 REXML 像这样解析它会立即失败。删除第一个字符然后解析它，给我这个错误：

`REXML::ParseException: #<REXML::ParseException: malformed XML: missing tag start Line: Position: Last 80 unconsumed characters: <?xml version="1.0" encoding="utf-16le" s>`

处理这个问题的正确方法是什么？

**编辑：**下面是我的代码。从`ftp.get`ftp 服务器下载 xml。（我想知道这是否相关。）

```
xml = ftp.get
puts xml
until xml[0,1] == "<"  # to remove the 2 invalid characters
  puts xml[0,2]
  xml.slice! 0
end
puts xml
document = REXML::Document.new(xml) 
```

最后一个 puts 打印正确的 xml。但是由于这两个无效字符，我感觉有些地方出了问题。没有必要删除任何东西。不过，我不知道问题可能是什么。

**编辑 2：**我正在使用 Net::FTP 下载 XML，但使用这种新方法可以让我将内容读入字符串而不是文件：

```
class Net::FTP

  def gettextcontent(remotefile, &block) # :yield: line
    f = StringIO.new()
    begin
      retrlines("RETR " + remotefile) do |line|
        f.puts(line)
        yield(line) if block
      end
    ensure
      f.close
      return f
    end
  end
end 
```

**编辑 3：**这似乎是由不支持 unicode 的 StringIO（在 Ruby 1.8.7 中）引起的。我不确定是否有解决方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:56:48.600

这两个字符很可能是[unicode bom](http://unicode.org/faq/utf_bom.html)：告诉正在读取文件的人的字节顺序是什么。

只要您知道文件的编码是什么，剥离它们就应该是安全的——它们不是实际内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:18:11.800

要回答我自己的问题，这里真正的问题是缺少 Ruby 1.8.7 中的编码支持。StringIO 特别似乎把它弄得一团糟。REXML 在 Ruby 1.8.7 中处理 unicode 也有问题。

最吸引人的解决方案当然是升级到 1.9.3，但这对于目前的项目来说并不实用。

所以我最终做的是，避免使用 StringIO 并简单地下载到磁盘上的文件，然后使用 nokogiri 代替使用 REXML 处理 XML。

在一起，这解决了我所有的问题。

# java - 编译hadoop 1.0.3字数代码

> ID：11671714
> 
> 赞同：0
> 
> 时间：2012-07-26T14:36:34.580
> 
> 标签：java, hadoop, word-count

```
ayush@ayush-PC:/usr/local/hadoop$ bin/hadoop jar /home/ayush/Desktop/Hadoop-     WordCount/wordcount.jar Wordcount input output
Exception in thread "main" java.io.IOException: Permission denied
    at java.io.UnixFileSystem.createFileExclusively(Native Method)
    at java.io.File.createTempFile(File.java:1879)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:115) 
```

我收到这个错误。我正在使用 jdk1.7 和 Hadoop1.0.3

谁能告诉如何摆脱这个错误

# sql - SQL Server 根据 LIKE 返回常量作为命名列

> ID：11671721
> 
> 赞同：1
> 
> 时间：2012-07-26T14:37:03.267
> 
> 标签：sql, sql-server

所以我有一个运行良好的现有 SQL 表达式我还需要返回一个命名列，该列将根据字符串上后缀的存在返回 2 个值之一。不太熟悉 SQL 的所有细微差别，我似乎无法获得返回的值 - 或者让 SQL 感到高兴。它是这样的：

```
DECLARE @LBC nvarchar(3) = 'LBC'
DECLARE @CBD nvarchar(3) = 'CBD'

CASE WHEN tblWellReadingResult_7.test_code LIKE '%CBD%' THEN
@CBD 
ELSE (SELECT @LBC) AS [AssayType], 
```

它对 AS 关键字嗤之以鼻。尝试使用具有类似错误的 IF 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:38:47.547

您只需要一个 END（对于 CASE 和 IF）

此外，删除 (SELECT @LBC) 中的 SELECT，这样你就只有 @LBC

```
DECLARE @LBC nvarchar(3) = 'LBC'
DECLARE @CBD nvarchar(3) = 'CBD'

CASE WHEN tblWellReadingResult_7.test_code LIKE '%CBD%' 
     THEN @CBD 
     ELSE @LBC 
END AS [AssayType], 
```

或者

```
IF tblWellReadingResult_7.test_code LIKE '%CBD%' THEN @CBD ELSE @LBC END AS AssayType, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:38:46.890

您缺少`END`case 表达式。

```
CASE WHEN tblWellReadingResult_7.test_code LIKE '%CBD%' THEN @CBD  
    ELSE @LBC END AS [AssayType], 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:41:16.287

为什么选择和变量？

更容易：

```
--select 
CASE WHEN tblWellReadingResult_7.test_code LIKE '%CBD%' THEN
'LBC' 
ELSE 'LBC' END AS [AssayType] --, and another fields
-- From yourTable 
```

# android - 带有易于使用的 SDK 和 Android 或 Arduino 接口的相机传感器

> ID：11671723
> 
> 赞同：2
> 
> 时间：2012-07-26T14:37:07.903
> 
> 标签：android, sdk, camera, arduino

是否有具有可与 Android 或 Arduino 接口的 SDK 的相机（可以是傻瓜相机，或者只是传感器）？

我在网上看到了一些东西，但它们都是黑客。我喜欢 Flea3，但看起来你真的需要一个完整的系统来运行这个相机，或者多个相机。

如果[这款三星相机](http://www.samsung.com/us/photography/digital-cameras/EC-ST200FBPBUS)具有适用于 Android 的开放式 SDK，那就再理想不过了。如果它有他们发布的任何 SDK 来远程控制相机（USB 或无线），那也很棒。

我知道 GoPro 有他们的新 Wi-Fi 背包，但你只能使用他们的应用程序来控制相机。我希望能够打开和关闭相机，以我设置的任何间隔拍照，包括尽可能快，并控制其他可用的相机设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:27:33.050

大多数高端相机都有红外遥控器。Arduino 可用于记录和重放 IR 代码。有关如何捕获代码和创建间隔计的示例，请参见[此处。](http://learn.adafruit.com/ir-sensor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:16:56.433

我发现了更好的东西，称为图片传输协议 (PTP)。CHDK 有一个 PTP 接口，我可以用 arduino 连接到相机。

[http://chdk.wikia.com/wiki/PTP_Extension](http://chdk.wikia.com/wiki/PTP_Extension)

[http://code.google.com/p/arduino-ptpusb/](http://code.google.com/p/arduino-ptpusb/)

# asp.net-mvc - ASP.NET MVC 不显眼的客户端验证不起作用

> ID：11671724
> 
> 赞同：5
> 
> 时间：2012-07-26T14:37:08.790
> 
> 标签：asp.net-mvc, unobtrusive-validation, fluentvalidation

在我的 ASP.NET MVC 4 应用程序中，我尝试将不显眼的客户端验证与 Fluent Validation 结合使用。

```
<script src="/Scripts/jquery.validate.min.js" type="text/javascript">
</script>
<script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript">
</script> 
```

在创建新的 ASP.NET MVC 4 应用程序时，我有 VS2010 提供的这两个 .js 文件。我还在我的 web.config 文件上启用了客户端验证。

```
<appSettings>
  <add key="ClientValidationEnabled" value="true" />
  <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings> 
```

据我所知，何时启用客户端验证和非侵入式 JavaScript，具有客户端验证规则的输入字段包含 data-val="true" 属性以触发非侵入式客户端验证。我的输入字段上有这些字段。

例如，

```
<input class="input-validation-error" data-val="true" data-val- 
required="error text here" id="purchasePrice" 
name="PurchasePrice" type="text" value="">

<span class="field-validation-error error" data-valmsg-for="PurchasePrice" 
data-valmsg-replace="true">'Purchase Price' must not be empty.</span> 
```

但是，当我提交表单时，它会发布到控制器，并且我的模型会在我的控制器代码而不是客户端上进行检查。

**编辑 ：**

这是我的表单开始标签。

```
@using (Html.BeginForm("Create", "Product", FormMethod.Post, 
   new { enctype = "multipart/form-data", @class = "mainForm",
         @id = "productCreateForm" })) 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T15:06:52.157

您是否添加了 MVC 的配置？

```
protected void Application_Start() {
    AreaRegistration.RegisterAllAreas();

    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);

    // this line is required for fluent validation
    FluentValidationModelValidatorProvider.Configure();
} 
```

您还需要配置每个视图模型/验证器：

```
[Validator(typeof(PersonValidator))]
public class Person {
    public int Id { get; set; }
    public string Name { get; set; }
    public string Email { get; set; }
    public int Age { get; set; }
}

public class PersonValidator : AbstractValidator<Person> {
    public PersonValidator() {
        RuleFor(x => x.Id).NotNull();
        RuleFor(x => x.Name).Length(0, 10);
        RuleFor(x => x.Email).EmailAddress();
        RuleFor(x => x.Age).InclusiveBetween(18, 60);
    }
} 
```

如果这没有帮助，您能否发布一个无法正常工作的验证器示例？并非所有验证都可以在客户端完成。例如，以下验证器将仅在服务器端工作：

```
// when validator rules are always server side
public class ServerSideValidator : AbstractValidator<Person> {
    public ServerSideValidator() {
        When(x => x.Name == "Foo", () => {
            RuleFor(x => x.Email).EmailAddress();
        });
    }
} 
```

# java - SOA 中的事务

> ID：11671725
> 
> 赞同：8
> 
> 时间：2012-07-26T14:37:16.030
> 
> 标签：java, .net, transactions, soa

是否有可能在来自不同平台（如 .NET 或 Java）的不同 SOA 服务之间传播事务？

我知道事务可以在来自 .NET 的 WCF 服务之间流入和流出。但是我对Java平台不熟悉。

现在我正在一个项目中工作，该项目从不同平台传达服务。

如何保持业务的一致性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:37:20.440

如果您的客户端和服务器 SOA 基础架构（以及通过扩展，在各种服务实现中访问的底层后端系统）支持 WS-Transaction，那么这将允许事务传播。

然而，我在一个庞大的金融服务 SOA 中间件环境中工作，我们选择自己管理事务：使用手动补偿。虽然更复杂，但不依赖任何分布式事务协调器确实给了我们灵活性和性能提升。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:05:46.360

[服务之间的事务对您的 SOA 不利，](http://arnon.me/wp-content/uploads/2010/10/TransactionalIntegration.pdf)因为它们会在服务之间引入大量耦合。服务边界是信任边界。正如丹尼尔所说，你最好使用[Sagas和补偿](http://rgoarchitects.bit.ly/4xNwpp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T09:20:19.383

试试这个模式： http: [//www.atomikos.com/Publications/TryCancelConfirm](http://www.atomikos.com/Publications/TryCancelConfirm)

它与传奇和补偿方法有关，并结合了世界上最好的东西。

最好的

# r - 在 R 中，如何计算运行次数？

> ID：11671731
> 
> 赞同：2
> 
> 时间：2012-07-26T14:37:29.213
> 
> 标签：r, count

假设我有一个看起来像这样的 R 数据框，其中`end.group`表示一组独特观察的结束：

```
x <- data.frame(end.group=c(0,0,1,0,0,1,1,0,0,0,1,1,1,0,1)) 
```

我想返回以下内容，其中`group.count`是组中观察次数的运行计数，并且`group`是每个组的唯一标识符，按数字顺序排列。谁能帮我用一段 R 代码来做到这一点？

```
end.group group.count group
0         1           1
0         2           1
1         3           1
0         1           2
0         2           2
1         3           2
1         1           3
0         1           4
0         2           4
0         3           4
1         4           4
1         1           5
1         1           6
0         1           7
1         2           7 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:56:24.860

您可以`group`使用`cumsum`和创建`rev`。你需要`rev`，因为你有组的终点。

```
x <- data.frame(end.group=c(0,0,1,0,0,1,1,0,0,0,1,1,1,0,1))
# create groups
x$group <- rev(cumsum(rev(x$end.group)))
# re-number groups from smallest to largest
x$group <- abs(x$group-max(x$group)-1) 
```

现在您可以使用`ave`创建`group.count`.

```
x$group.count <- ave(x$end.group, x$group, FUN=seq_along) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T15:00:48.337

```
x <- data.frame(end.group=c(0,0,1,0,0,1,1,0,0,0,1,1,1,0,1))

ends <- which(as.logical(x$end.group))
ends2 <- c(ends[1],diff(ends))
transform(x, group.count=unlist(sapply(ends2,seq)), group=rep(seq(length(ends)),times=ends2))
   end.group group.count group
1          0           1     1
2          0           2     1
3          1           3     1
4          0           1     2
5          0           2     2
6          1           3     2
7          1           1     3
8          0           1     4
9          0           2     4
10         0           3     4
11         1           4     4
12         1           1     5
13         1           1     6
14         0           1     7
15         1           2     7 
```

# php - 如何用逗号分隔数组？

> ID：11671733
> 
> 赞同：1
> 
> 时间：2012-07-26T14:37:33.880
> 
> 标签：php, arrays, implode

我有这个 $_categories 作为数组（）

`<?php print_r($_categories); ?>`这是：数组（[0] => 13 [1] => 7）

我需要将 de 值 13 和 7 提取成这种格式：13,7（最后一个值后没有逗号）。

我有这个代码，但还没有......结果是：137 而不是 13,7

```
<?php
    if ( is_array($_categories) ) {
        foreach ($_categories as $key => $value) {
            $out = array();
            array_push($out, $value);
            echo implode(', ', $out);
        }
    }
    else {
        echo '<li>There are no saved values yet.</li>';
    }
?> 
```

谢谢，纳尔逊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:46:22.960

直接使用

```
echo implode(', ', $_categories); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:42:08.927

每次你只在`implode`ing 一个元素，并且`echo`ing 只是它。试试这样：

```
$out = array();   //putting outside of the loop
foreach ($_categories as $key => $value) {
    array_push($out, $value);
}    
echo implode(', ', $out);   //putting outside of the loop 
```

# macos - 如何调试 Aquamacs

> ID：11671734
> 
> 赞同：7
> 
> 时间：2012-07-26T14:37:35.660
> 
> 标签：macos, debugging, emacs, aquamacs

我正在尝试调试 Aquamacs。使用其他 emacsen，我刚刚完成`emacs --debug-init`，但是当我尝试使用时`aquamacs --debug-init`，我得到了

```
touch: illegal option -- -
usage:
touch [-A [-][[hh]mm]SS] [-acfhm] [-r file] [-t [[CC]YY]MMDDhhmm[.SS]] file ...
open: unrecognized option `--debug-init'
Usage: open [-e] [-t] [-f] [-W] [-R] [-n] [-g] [-h] [-b <bundle identifier>] [-a <application>] [filenames] [--args arguments]
Help: Open opens files from a shell.
      By default, opens each file using the default application for that file.  
      If the file is in the form of a URL, the file will be opened as a URL.
Options: 
      -a                Opens with the specified application.
      -b                Opens with the specified application bundle identifier.
      -e                Opens with TextEdit.
      -t                Opens with default text editor.
      -f                Reads input from standard input and opens with TextEdit.
      -F  --fresh       Launches the app fresh, that is, without restoring windows. Saved persistent state is lost, excluding Untitled documents.
      -R, --reveal      Selects in the Finder instead of opening.
      -W, --wait-apps   Blocks until the used applications are closed (even if they were already running).
          --args        All remaining arguments are passed in argv to the application's main() function instead of opened.
      -n, --new         Open a new instance of the application even if one is already running.
      -j, --hide       

 Launches the app hidden.
      -g, --background  Does not bring the application to the foreground.
      -h, --header      Searches header file locations for headers matching the given filenames, and opens them.
rm: illegal option -- -
usage: rm [-f | -i] [-dPRrvW] file ...
       unlink file 
```

我的版本是`GNU Emacs 24.1.50.3 (i386-apple-darwin9.8.0, NS apple-appkit-949.54) of 2012-06-24 on braeburn.aquamacs.org - Aquamacs Distribution 3.xdev`（在 Mac 10.7 Lion 上）。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T17:57:54.757

`aquamacs --help`行得通吗？我怀疑不是，因为如果您使用的是 Aquamacs 本身安装的命令（即`/usr/local/bin/aquamacs`），它只是一个调用 OS X`open`命令的 Perl 脚本，在解析选项时可能会遇到困难。

最好只创建一个别名或符号链接到`/Applications/Aquamacs.app/Contents/MacOS/Aquamacs`.

```
% /Applications/Aquamacs.app/Contents/MacOS/Aquamacs --help
Usage: /Applications/Aquamacs.app/Contents/MacOS/Aquamacs [OPTION-OR-FILENAME]...

Run Emacs, the extensible, customizable, self-documenting real-time
display editor.  The recommended way to start Emacs for normal editing
is with no options at all.

Run M-x info RET m emacs RET m emacs invocation RET inside Emacs to
read the main documentation for these command-line arguments.

Initialization options:

--batch                     do not do interactive display; implies -q
--chdir DIR                 change to directory DIR
--daemon                    start a server in the background
--debug-init                enable Emacs Lisp debugger for init file
--%<-------- 
```

你也可以安全运行

```
% /Applications/Aquamacs.app/Contents/MacOS/Aquamacs -nw --debug-init 
```

让 Aquamacs 在您首选的终端模拟器中运行。更多信息可以在 EmacsWiki，[自定义 Aquamacs](http://www.emacswiki.org/emacs/CustomizeAquamacs)中找到。

# php - 组合两个数组 PHP

> ID：11671738
> 
> 赞同：0
> 
> 时间：2012-07-26T14:37:47.120
> 
> 标签：php, mysql

我正忙于对我的应用程序中的菜单结构进行排序。用户对菜单重新排序后，值（例如，菜单项 1、菜单项 2 等）仍位于同一位置。

现在我有两个数组，一个保存它们的排序方式（数组 1），另一个保存菜单项的值。（阵列 2）

两个数组的示例；（数组 1，保存键）

```
 Array
(
    [0] => 1
    [1] => 2
    [2] => 0
) 
```

上述数组的值是新数组的键。

（数组 2，保存值）

```
Array
(
    [0] => value_0
    [1] => value_1
    [2] => value_2
) 
```

所以我认为最好创建一个包含以下内容的新数组；

1.  数组 1 的值
2.  数组 2 的值

但是，我遇到了问题。我希望数组 2 中的值坚持它们的键。因此，假设我将 value_0 的位置更改为最后一个，新数组将如下所示；

```
Array
(
    [1] => value_1
    [2] => value_2
    [0] => value_0
) 
```

有没有办法做到这一点，还是我做错了？

**编辑**

好的，它是多维数组。但是我在创建一个时遇到了问题。

数组 1 和数组 2 都来自数据库。数组 1 包含排序顺序，数组 2 包含值。现在，数组 2 中的值是这样存储的；值1，值2，值3。因此，为了能够与他们合作，我会使用 ,（逗号）。

获取的结果都不同；

*   对于第一个数组，它返回与有多少值一样多的值。（所以如果有 3 个值，它将返回 3 个不同的位置。）
*   对于第二个数组，它将返回 18 条记录，因为这与其他菜单项（子菜单等）相关联。

所以对于我做的第一个数组；

```
 while ($row = mysql_fetch_assoc($result_query_test)) {
       $positions[] = $row['position'];
  } 
```

对于我做的第二个数组；

```
while ($row = mysql_fetch_assoc($result_values)) {
      $array_values = explode(',', $row['values']);
} 
```

从那时起，我在创建多维数组时遇到了问题；

```
while ($row = mysql_fetch_assoc($result_values)) {
     $array_values = explode(',', $row['values']);
     foreach ($positions as $new_key) {
         foreach ($array_values as $value) {
              $new_array[] = array('key' => $new_key, 'value' => $value);
         }
     }
} 
```

**编辑二：**

这就是我现在使用的；

（因为 $all_values 是一个多维数组，因为我必须事先分解这些值。）

```
 foreach ($all_values as $values) {
        foreach ($values as $key => $value) {
            $new_array[] = array('key' => $positions[$key], 'value' => $value);
        }
    } 
```

这就是 $new_array 返回的内容；

```
Array
(
    [0] => Array
        (
            [key] => 0
            [value] => value_0
        )

    [1] => Array
        (
            [key] => 2
            [value] => value_2
        )

    [2] => Array
        (
            [key] => 1
            [value] => value_1
        )

    [3] => Array
        (
            [key] => 0
            [value] => value_0
        )

    [4] => Array
        (
            [key] => 2
            [value] => value_2
        )

    [5] => Array
        (
            [key] => 1
            [value] => value_1
        ) 
```

现在我需要获取这些值并用逗号将它们内爆。但是，由于不是每 3 个值（value_0、value_1、value_3）都在一起，所以我现在不能这样做。

在此示例中，有 3 个键 (0,1,2) 与它们的值一起应该是不同的数组，就像您在示例中所做的那样：

```
Array (
  [0] = Array (
    [key] = 1,
    [value] = value_1
  ),
  [1] = Array (
    [key] = 2,
    [value] = value_2
  ),
  [2] = Array (
    [key] = 0,
    [value] = value_0
  )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:45:27.110

为什么不做一个多维数组？

```
$arrayThree = 
Array (
  [0] = Array (
    [key] = 1,
    [value] = value_1
  ),
  [1] = Array (
    [key] = 2,
    [value] = value_2
  ),
  [2] = Array (
    [key] = 0,
    [value] = value_0
  )
) 
```

无论它们的顺序如何，键和值始终是集合。

```
foreach ($arrayThree as $tempArray)
{
 echo $tempArray['key'];
 echo $tempArray['value'];
} 
```

**创建数组**

```
$arrayOne = array();
$arrayTwo = array();
$arrayThree = array();

$query = 'SELECT key FROM table1 ';
$result = mysql_query($query) or die(mysql_error());

while($data = mysql_fetch_assoc($result))
{
  $arrayOne[] = $data['key'];
}

$query = 'SELECT value FROM table2 ';
$result = mysql_query($query) or die(mysql_error());

while($data = mysql_fetch_assoc($result))
{
  $arrayTwo[] = $data['value'];
}

foreach($arrayOne as $key => $value)
{
  $arrayThree[] = array('key' => $value, 'value' => $arrayTwo[$key]);
} 
```

如果你正在使用它们，你总是可以使用 mysqli 或 PDO 版本。

**示例数据**

```
 //THESE MIMIC YOUR SELECT RESULTS
$test_keys = array(1,2,3);
$test_values = array('value_1', 'value_2', 'value_3');

    //DEFAULTS
$arrayOne = array();
$arrayTwo = array();
$arrayThree = array();

    //WHILE FIRST SELECT
for($i=0;$i<count($test_keys);$i++)
{
    $arrayOne[] = $test_keys[$i];
}

    //WHILE SECOND SELECT
for($i=0;$i<count($test_values);$i++)
{
    $arrayTwo[] = $test_values[$i];
}

    //MAKE THE FINAL ARRAY
foreach($arrayOne as $key => $value)
{
  $arrayThree[] = array('key' => $value, 'value' => $arrayTwo[$key]);
}

    //CHECK THE OUTPUT FOR THE NEW ARRAY
echo '<pre>'.print_r($arrayThree,true).'</pre>'; 
```

**示例输出**

```
Array
(
    [0] => Array
        (
            [key] => 1
            [value] => value_1
        )

    [1] => Array
        (
            [key] => 2
            [value] => value_2
        )

    [2] => Array
        (
            [key] => 3
            [value] => value_3
        )

) 
```

**内爆列表**

```
$implodeValues = array_map(function($item) { return $item['value']; }, $arrayThree);
$implodeVariable = implode(',', $implodeValues);

echo $implodeVariable; 
```

**内爆输出**

`value_1,value_2,value_3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:41:49.143

我认为你可以获得你想要的东西：

```
$new = array();
for($i = 0, $len = count($array1), $i < $len, ++$i) {
    $new[$array1[$i]] = $array2[$i];
} 
```

现在`$new`按您想要的顺序包含值

# filter - .cap 文件上的 IP 过滤器

> ID：11671742
> 
> 赞同：-1
> 
> 时间：2012-07-26T14:38:01.257
> 
> 标签：filter, ip, wireshark, tcpdump, tshark

如何对现有的 .cap 文件应用过滤器？所以我有一个 .cap 文件并想过滤掉一个特定的 IP，那是什么命令。我正在使用wireshark。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:44:03.490

ip.addr == 127.15.16.13

有时您可能需要 ip.src == ..... 或 ip.dst == ...

之后，您可以通过选择文件->另存为->数据包范围->显示来保存过滤的数据包

# javascript - 在表格或所需位置下方弹出文本

> ID：11671743
> 
> 赞同：0
> 
> 时间：2012-07-26T14:38:03.280
> 
> 标签：javascript, jquery, css

当鼠标移到单元格上时，我想在表格下方弹出 30px 的文本。现在我可以将它附加在正文而不是表格下方。这是 [示例](http://jsfiddle.net/zhshqzyc/wEFfs/7/)。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:43:11.707

简单使用[.insertAfter()](http://api.jquery.com/insertAfter/)

[小提琴](http://jsfiddle.net/wEFfs/10/)

**更新**

示例 html

```
<table id="thisTable"></table> 
```

js

```
 .insertAfter('#thisTable'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:47:00.633

使用绝对定位并找出动态放置它的位置。

[http://jsfiddle.net/wEFfs/11/](http://jsfiddle.net/wEFfs/11/)

重新阅读问题，这不是您要求的。也许这就是你想要的。

# css - IE 中的多个 CSS 过滤器

> ID：11671745
> 
> 赞同：10
> 
> 时间：2012-07-26T14:38:06.620
> 
> 标签：css, internet-explorer, filter, opacity, transparent

我只是想知道是否可以使用 CSS 在 IE 中应用两个不同的过滤器。所以，我需要使用透明的 PNG 和一些不透明的`div`. 是否可以同时使用它们？

我的透明制造商线如下所示：

```
li.item .item-texture {
   background: none transparent scroll repeat 0% 0% !important; 
   filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/images/ie/articles/item-content-hov.png', sizingMethod='scale') !important;
} 
```

我尝试再添加一行 ( `filter: alpha(opacity=50);`) 并用逗号 ( .. `'scale') !important, alpha(opacity=50);`) 分隔过滤器，但它没有用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-08T23:45:45.243

抱歉，上面选择的答案不正确。您*可以*在 IE 中应用多个过滤器，但它们需要用一个或多个空格分隔。

空格前的逗号也可以使用，但前提是它跟在右括号之后。所以没有参数的IE 4.0过滤器`gray`在这种情况下不起作用。最好只使用空格作为分隔符。

如果您转到上面给出的链接：http: [//msdn.microsoft.com/en-us/library/ms532847](http://msdn.microsoft.com/en-us/library/ms532847%28v=vs.85%29.aspx) (v=vs.85).aspx ，然后单击[以下示例链接](http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/overview/filt_01.htm)（当然是在 IE 中） ，您会看到旋转和模糊都应用于第二张图像。从“查看源代码”，图像标签是：

```
<img id=image2 src="/workshop/samples/author/dhtml/graphics/sample.jpg" 
     style="filter:progid:DXImageTransform.Microsoft.Blur(strength=50), 
                   progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"
     height="165px" width="256px" border="0" alt="ocean beach"> 
```

我在某种程度上成功地模拟了 IE7 和 8 中盒子阴影的“传播”（尽管成功取决于您认为它看起来的可接受程度），使用：

```
filter: progid:DXImageTransform.Microsoft.Shadow(Color=#c5c1ae, Strength=10, Direction=0)
        progid:DXImageTransform.Microsoft.Shadow(Color=#c5c1ae, Strength=10, Direction=90)
        progid:DXImageTransform.Microsoft.Shadow(Color=#c5c1ae, Strength=10, Direction=180)
        progid:DXImageTransform.Microsoft.Shadow(Color=#c5c1ae, Strength=10, Direction=270); 
```

以便阴影从 div 的各个方面扩散。我还在包含渐变的 div 上组合了阴影。然而，这并非一帆风顺。在上面的例子中，阴影有布局，你必须调整边距以适应它们的大小。此外，由于 IE 是 IE，其中一些过滤器的组合可能会产生意想不到的后果，从而导致开发变通方法、放弃方法和拔掉头发。

在您问题的原始示例中，如果您列出了多个过滤器，则前一个过滤器将被后续过滤器覆盖，就像任何其他 CSS 属性一样。在您的第二个示例中，“！important”需要完全位于样式的末尾，否则整个 CSS 块会因为格式错误而被丢弃。（实际上， !important 需要完全抛弃。您需要使用它的唯一原因是，如果您正在开发第三方代码并且需要保护您的标签免受另一个 !important-happy 开发人员的影响，您无法控制他们. 如果您的样式被无意覆盖，您需要更具体的声明。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-29T02:16:16.780

过滤器属性不能超过 1 个，因为 IE 只会使最后一个生效。

**注意**：由于这似乎得到了一些反对票，我想澄清这并不意味着您不能应用多个过滤器，只是您只能使用 1 个`filter` *属性*。如果您尝试应用多个过滤器并将它们分成多个属性，则只有最后一个会生效。

根据 MSDN 的以下文章，它们不是用逗号而是用空格分隔：http: [//msdn.microsoft.com/en-us/library/ms532847 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms532847(v=vs.85).aspx)

另请注意，某些 IE 过滤器（包括 alpha）要求元素具有布局才能正确应用：http: [//www.satzansatz.de/cssd/onhavelayout.html](http://www.satzansatz.de/cssd/onhavinglayout.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T03:46:39.117

逗号被忽略。您需要一个空格或换行符来粘贴多个过滤器。

```
progid:xxx progid:yyy / works

progid:xxx, progid:yyy / works

progid:xxx  
progid:yyy / works

progid:xxx,progid:yyy / will not work 
```

# javascript - MVC 和钛，结构

> ID：11671749
> 
> 赞同：2
> 
> 时间：2012-07-26T14:38:21.767
> 
> 标签：javascript, iphone, model-view-controller, titanium, titanium-mobile

视图和控制器，

在钛合金中，每个视图通常有 1 个控制器吗？还是每组视图 1 个控制器？

您有一个表单、PageX_Detail、PageX_Confirm 和 PageX_Results。

在这种情况下，您会创建 3 个视图和 3 个控制器，还是创建 3 个视图和 1 个控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:16:24.567

我认为每个视图组最好有一个控制器。

Titanium 应用程序目前通常不遵循严格的 MVC 结构（尽管 Appcelerator 正在开发一个 MVC 框架以与 Titanium 一起使用，称为[Alloy](https://github.com/appcelerator/alloy "合金")）。

我发现的最流行的组织 Titanium 应用程序的方法是：

1) [Tweetanium](https://github.com/appcelerator-titans/tweetanium/tree/master/mobile/Tweetanium "钛合金")风格，其中全局命名空间包含应用程序范围的功能，主窗口托管每个应用程序视图。

或者，我最喜欢的（也是最受 Appcelerator 支持的方式），

2) CommonJS 方法和使用 of`require()`而不是弃用`Ti.include()`

# c# - Entity Framework 4.1 抽象类和鉴别器

> ID：11671753
> 
> 赞同：0
> 
> 时间：2012-07-26T14:38:37.233
> 
> 标签：c#, entity-framework-4.1

目前我有一个我无法理解的问题。

我的模型中有 2 个实体

```
[Table("TX_REDEVABLE")]
public abstract class Redevable
{

}

[Table("TX_BILLET_STATION")]
public class BilletStation 
{
    [Column("BST_ID_INFO_RDV")]
    public Int64? RedevableId { get; set; }

    [UserVisible(Ordre = 23)]
    [Display(Name = "Redevable")]
    [ForeignKey("RedevableId")]
    public virtual Redevable Redevable { get; set; }
} 
```

我尝试进行这样的查询：

```
var q = (from b in Repository.DataContext.BilletStation
         where b.Redevable != null
         select b).ToList(); 
```

它工作得很好，因为我的课`Redevable`是抽象的。但是现在，我需要实例化一个新的`Redevable`，所以我不能有一个抽象类。

没有 abstract 关键字，我现在有一个错误说`the "extend2"."discriminator" is undefined.`

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:05:08.867

我找到了一个解决方案，我创建了一个名为“RedevableConcrete”的新类，它继承自“Redevable”，并将其标记为 NotMapped。

这样，我可以实例化它来创建一些新实体并且我的查询有效。

# java - 为什么我创建的 ZIP 文件在游戏中不起作用？

> ID：11671759
> 
> 赞同：2
> 
> 时间：2012-07-26T14:38:48.213
> 
> 标签：java, windows, file, zip, corrupt

我最近决定为我的项目编写一个启动器。它只是从我的服务器下载更新的文件，解压缩它们，合并一些文件（因为它们的内容因启动器的设置而异）并将它们打包成一个 .zip 文件。

我确信下载和合并过程完美运行，但最后一个 - 压缩 - 没有。

这是我的压缩代码：

- 这是我不工作的代码所在的地方。--

.zip 文件已正确创建，但是当我将其放入游戏目录时，游戏将无法启动（说它已损坏）。但是如果我用 WinRar 打开它（是的，它打开时没有错误——“测试”功能也没有显示错误），然后在里面添加一个随机文件，游戏就开始了！

似乎 WinRar 以正确的方式重新创建了 zip 文件，但我不能让我的启动器这样做。

有任何想法吗？

**编辑1：**

我发现了另一段应该可以工作的代码：

```
 private static void zipDir(String zipFileName, String dir) throws Exception {
            File dirObj = new File(dir);
            ZipOutputStream out = new ZipOutputStream(new FileOutputStream(zipFileName));
            System.out.println("Creating : " + zipFileName);
            addDir(dirObj, out);
            out.close();
          }

          static void addDir(File dirObj, ZipOutputStream out) throws IOException {
            File[] files = dirObj.listFiles();
            byte[] tmpBuf = new byte[1024];

            for (int i = 0; i < files.length; i++) {
              if (files[i].isDirectory()) {
                addDir(files[i], out);
                continue;
              }
              String fap = files[i].getAbsolutePath();
              String rel_path = fap.substring(fap.indexOf("wypakowane") + 11).replace("\\", "/");
              FileInputStream in = new FileInputStream(fap);
              System.out.println(" Adding: " + rel_path);
              out.putNextEntry(new ZipEntry(rel_path));
              int len;
              while ((len = in.read(tmpBuf)) > 0) {
                out.write(tmpBuf, 0, len);
              }
              out.closeEntry();
              in.close();
            }
          } 
```

我认为它会在 ZIP 文件中创建目录。不幸的是，游戏仍然没有开始......（“wypakowane”是包含我要放入 ZIP 文件的所有文件的目录。）

**编辑2：**

我只是比较了两个档案——我的 java 应用程序创建的一个和 WinRar 通过添加随机文件创建的一个。它们是相同的，具有相同的 CRC，相同的属性并正确解包。但是第一个游戏崩溃了，第二个运行流畅。我的想法不多了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:44:44.280

您似乎没有为目录本身创建条目，而只是为文件创建条目。虽然可以从文件路径重建目录条目，但如果您不输入显式条目，许多软件将无法正确处理该文件。

目录条目只是路径以“/”结尾的常规条目。

# flash - 将 Flash 视频转换为 iPad 可读格式？

> ID：11671763
> 
> 赞同：-3
> 
> 时间：2012-07-26T14:39:07.860
> 
> 标签：flash, ipad, video

我即将推出一个使用 Flash 网络摄像头录制功能创建用户内容的网站。我的问题是 iPad 用户无法观看视频。如何为 iPad 用户创建一些附加功能，以便他们能够观看视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:34:51.683

让显示视频的页面检查浏览器代理，如果是 iPad/iPhone，请更改页面内容或将用户跳转到以兼容格式（例如 HTML5）嵌入视频的页面。这需要将两种格式的视频存储在您的服务器上（在非高峰时间进行转换），或进行按需转换（在上传或查看时间）。前者意味着 iPad 用户将无法立即观看上传的视频，并且您的服务器将需要更大的存储空间来支持可能的一小部分用户。后者在时间和服务器资源方面可能很昂贵，这意味着用户在看到内容之前可能会出现很长的延迟，或者在高峰使用期间服务器性能可能会变得爬行。

或者，您可以在 YouTube 上托管所有 Flash 视频内容并嵌入这些视频，因为 iPad 对（仅）YouTube Flash 视频具有原生支持。或者，您可以向用户显示一条消息，说明他们必须使用支持观看 Flash 视频的（第三方）应用程序访问该页面，例如 Skyfire。

# c# - 继承的受保护变量 (StyleCop SA1401)

> ID：11671767
> 
> 赞同：2
> 
> 时间：2012-07-26T14:39:17.027
> 
> 标签：c#, inheritance, properties, stylecop

所以我正在通过 StyleCop 规则修复我们所有的代码，我经常遇到的一个是 SA1401 FieldsMustBePrivate。我理解它，我们非常擅长实施它。. . 有点。我们一直在做的一件事是让我们的变量受到保护并提供属性。这样从基类继承的类可以自己访问变量，但继承链之外的类必须通过属性访问这些值。

我发现这在基类需要设置继承类中变量的值而不提供属性设置器的情况下特别有用，这样继承链之外的类就无法修改该值。通过“修复”SA1401 问题，我发现我正在打开要设置的属性值，因为我需要在它们继承的类中设置它们，我真的不想被设置。

我想我可以在允许我设置值的基类上创建一个受保护的属性，然后创建一个不允许我设置值的“新”公共属性，但是我必须创建那个“新”公共每个继承类的属性。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T14:42:52.857

你不能同时做这两个：

```
public SomeType SomeProperty { get; protected set; } 
```

然后该属性可以公开获取，但只能由类及其子类设置。

# oracle - 当 oracle 表具有时间戳时，vba ODBC 给出未指定的错误

> ID：11671769
> 
> 赞同：0
> 
> 时间：2012-07-26T14:39:24.470
> 
> 标签：oracle, vba, excel, odbc

**我有 vba 代码通过ODBC**将 Oracle 表数据提取到记录集中。但是如果 oracle 表中有时间戳字段，它会显示一些未指定的错误。

我有 100 多个表，我不知道哪个表会有时间戳。我在循环下运行查询以检索数据。

```
Query = "Select End_Time from MyTable" 'this table has End_Time timestamp(6) field
CmdSQLData.CommandText = Query
CmdSQLData.CommandType = adcmdText  
CmdSQLData.Timeout=0 set rs = CmdSQLData.Execute() 'This line shows unspecified error then the table is having timestamp field 
'Then code for store data here... 
```

> **运行时错误“-2147467259 (80004005)”；未指定的错误**

Oracle表结构是：

```
create table MyTable    (
Date_id Integer,
Date_Today Date,
End_Time Timestamp(6)
) 
```

请**不要提出**类似的建议，

> 从 my_table 中选择 to_char(timestamp_field)

**如果我进行上述查询，那么问题就不会出现。** 我需要永久代码来处理记录集中的时间戳，因为我可能不知道表是否有时间戳字段，因为我有 100 多个表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:14:35.027

您可能会遇到以下情况：[https ://forums.oracle.com/forums/thread.jspa?messageID=4210331](https://forums.oracle.com/forums/thread.jspa?messageID=4210331)

尝试升级您的 ODBC 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:35:55.210

以下代码对我来说很好：-

```
Dim con As New ADODB.Connection
Dim cmd As New ADODB.command
Dim rs As New ADODB.Recordset

con.Open "DSN=Oracle", "test", "test"
con.Execute "drop table tstest "
con.Execute "create table tstest ( a int, b Timestamp(6))"
con.Execute "insert into tstest values ( 1, current_timestamp ) "

q = "select * from tstest"
cmd.ActiveConnection = con
cmd.CommandText = q
cmd.CommandType = adCmdText
Set rs = cmd.Execute

Debug.Print rs.Fields(1)

con.Close 
```

这是使用 ADO 2.8 和 Oracle 驱动程序版本 11.1.0.7

***注意：Oracle 驱动程序来自[Oracle](http://www.oracle.com/technetwork/topics/winsoft-085727.html) - 你需要让它工作： -

Instant Client 包 - 基本
Instant Client 包 - ODBC

您需要这两个软件包才能使驱动程序正常工作。然后，您需要在 ODBC 数据源中使用 Instant Client 连接，例如：-

```
192.168.0.25:1521/orcl 
```

IP：端口/名称

# perl - 将值推入数组哈希时出错

> ID：11671779
> 
> 赞同：2
> 
> 时间：2012-07-26T14:39:57.293
> 
> 标签：perl

我正在解析来自 psiblast 的输出报告。我使用 COG 比对并在基因数据库中搜索匹配（同源物）。我想做的一件事是找出哪些基因与多个 COG 匹配。我的部分脚本如下。

我在创建一个数组时遇到问题，该数组包含分配给多个 COG 的基因的所有 COG。

我收到以下错误“在 parse_POG_reports.pl 第 26 行第 67 行使用“strict refs”时，不能使用字符串（“COG0003”）作为 ARRAY 引用。”。

我查看了其他有关将元素推入数组散列的帖子。但我认为当一个基因与同一个 COG 有 2 个匹配时，可能会发生错误，并且它试图将同一个 COG 推入数组（即样本输入的最后 2 行）。这有意义吗？如果是这样，我该如何避免这个问题？

```
use strict;
use warnings;

my %maxBits;my %COGhit_count;
my $Hohits={};my %COGhits;

my $COG_psi_report=$ARGV[0];
open (IN, $COG_psi_report) or die "cannot open $COG_psi_report\n";
while (my $line=<IN>){
    next if ($line =~/^#/);
    chomp $line;
    my @columns = split(/\t/,$line);
    my $bits=$columns[11];
    my $COG=$columns[0];
    my $hit=$columns[1];
    my $Eval=$columns[10];
    next if ($Eval > 0.00001); # threshold for significant hits set by DK
    $COGhit_count{$hit}++; # count how many COGs each gene is homologous to
    $COGhits{$hit}=$COG;
    if ($COGhit_count{$hit}>1) {
            push @{$COGhits{$hit}}, $COG; #
    }
    ## for those that there are multiple hits we need to select top hit ##
    if (!exists $maxBits{$hit}){
            $maxBits{$hit}=$bits;
    }
    elsif (exists $maxBits{$hit} && $bits > $maxBits{$hit}){
            $maxBits{$hit}=$bits;
    }
    $Hohits->{$hit}->{$bits}=$COG;
}
close (IN); 
```

示例输入：

```
POG0002 764184357-stool1_revised_scaffold22981_1_gene47608      23.90   159     112     3       1       156     1       153     2e-06   54.2
POG0002 764062976-stool2_revised_C999233_1_gene54902    23.63   182     121     5       3       169     2       180     2e-06   53.9
POG0002 763901136-stool1_revised_scaffold39447_1_gene145241     26.45   155     89      3       3       137     5       154     3e-06   53.9
POG0002 765701615-stool1_revised_C1349270_1_gene168522  23.53   187     115     5       3       169     2       180     5e-06   53.1
POG0002 158802708-stool2_revised_C1077267_1_gene26470   22.69   216     158     5       3       213     5       216     5e-06   52.7
POG0003 160502038-stool1_revised_scaffold47906_2_gene161164     33.00   297     154     6       169     424     334     626     6e-40    157
POG0003 160502038-stool1_revised_scaffold47906_2_gene161164     16.28   172     128     4       23      192     46      203     1e-06   56.6
POG0003 158337416-stool1_revised_C1254444_1_gene13533   30.06   346     184     7       133     424     57      398     6e-40    155
POG0003 158337416-stool1_revised_scaffold29713_1_gene153054     28.61   332     194     8       132     424     272     599     2e-38    152
POG0003 158337416-stool1_revised_scaffold29713_1_gene153054     24.00   200     131     5       1       193     5       190     9e-11   69.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:48:39.603

你需要去掉第 24 行（倒数）：

```
$COGhits{$hit}=$COG; 
```

在其中，您设置`$COGhits{$hit}`为标量值（ 的值`$COG`）。稍后，在第 26 行中，您尝试将取消引用`$COGhits{$hit}`作为数组推入其中。这不起作用，因为那里有一个标量。

只需删除`if`并将这些行更改为此。这应该可以解决问题，因为现在所有这些`$hit`s 都存储在数组引用中。

```
$COGhit_count{$hit}++; # count how many COGs each gene is homologous to
push @{$COGhits{$hit}}, $COG; 
```

输出`$COGhits`：

```
$VAR4 = {
      '158802708-stool2_revised_C1077267_1_gene26470' => [
                                                           'POG0002'
                                                         ],
      '764062976-stool2_revised_C999233_1_gene54902' => [
                                                          'POG0002'
                                                        ],
      '764184357-stool1_revised_scaffold22981_1_gene47608' => [
                                                                'POG0002'
                                                              ],
      '765701615-stool1_revised_C1349270_1_gene168522' => [
                                                            'POG0002'
                                                          ],
      '763901136-stool1_revised_scaffold39447_1_gene145241' => [
                                                                 'POG0002'
                                                               ],
      '160502038-stool1_revised_scaffold47906_2_gene161164' => [
                                                                 'POG0003',
                                                                 'POG0003'
                                                               ]
    }; 
```

* * *

但是，如果您想要标量和数组 ref，请尝试此代码。**不过，我不推荐这个**。

```
$COGhit_count{$hit}++; # count how many COGs each gene is homologous to
if ($COGhit_count{$hit} == 1) {
  $COGhits{$hit}=$COG;             # Save as scalar
}
elsif ($COGhit_count{$hit} == 2) { # If we've just found the second hit,
  my $temp = $COGhits{$hit};       # save the first and convert $COGhits{$hit}
  $COGhits{$hit} = [];             # to an array ref, then push both the old and
  push @{$COGhits{$hit}}, $temp, $COG; # the new value in it.
} elsif ($COGhit_count{$hit} > 2) {
  push @{$COGhits{$hit}}, $COG;    # Just push the new value in
} 
```

* * *

想法：您可能`$COGhits{$hit}=$COG`首先注意到有时可能有多个值，因此您添加了该`push`行，但您没有意识到您实际上必须替换旧行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:51:27.213

它*准确地*告诉你你做错了什么。

```
$COGhits{$hit}=$COG;  # <--- scalar
if ($COGhit_count{$hit}>1) {
        push @{$COGhits{$hit}}, $COG; # <--- array
} 
```

您不能将值分配为非引用类型，然后尝试将其自动激活为引用类型。Perl 将执行后者，但如果您已经在该位置存储了冲突的数据类型，则不会。

此外，如果这个奇迹第一次起作用（它不会），并且您多次运行它，那么您可能通过推送自动激活的任何数组都将被标量非引用分配破坏。

我不确定你在追求什么，但第一行*可能*应该被删除。

* * *

`$COG`而不是那个构造，你想决定对于 的值是否会有多个规范`$hit`。如果可以的话，只需将这 4 行替换`push`为 the 即可。

我以前做过多用途结构槽，维护起来很痛苦。但是如果你想做这样的事情，你可以这样做：

```
my $ref = \$hashref->{ $key }; # autovivifies slot as simple scalar.
                               # it starts out as undefined.
if ( ref $$ref ) {             # ref $ref will always be true
    push @$$ref, $value;
}
else { 
    $$ref = defined( $$ref ) ? [ $$ref, $value ] : $value;
} 
```

但是每次您想以某种不同的方式访问混合树时，您都必须编写分叉逻辑。使用标量节省的性能在某种程度上被测试和分支消耗掉了。

所以我不再做太多这样的事情了。我事先决定关系是 1-1 还是 1-n。在某种程度上，像下面这样的例程可以更直接地处理这些类型的表。

```
sub get_list_from_hash { 
    my ( $hash, $key ) = @_;
    my $ref = \$hash->{ $key };
    return unless defined( $$ref );
    return ref( $$ref ) ? @$$ref : $$ref;
}

sub store_in_hash { 
    $_[0] = {} unless ref $_[0];
    my ( $hash, $key, @values ) = @_;
    my @defined = grep {; defined } @values;
    unless ( @defined ) { 
        delete $hash->{ $key };
        return;
    }

    my $ref = \$hash->{ $key };
    if ( ref $$ref ) { 
        push @$$ref, @defined;
    }
    elsif ( defined $$ref ) { 
        $$ref = [ $$ref, @defined ];
    }
    elsif ( @values > 1 ) { 
        @$$ref = @defined;
    }
    else { 
        ( $$ref ) = @defined;
    }
} 
```

# c# - 为什么 WebBrowser 组件吃这么多内存以及如何刷新 WebBrowser 缓存

> ID：11671786
> 
> 赞同：1
> 
> 时间：2012-07-26T14:40:08.633
> 
> 标签：c#, .net, memory-leaks, webbrowser-control, browser-cache

我正在使用由 2 个 WebBrowser 组件组成的自定义文本框（只读）。它显示具有复杂布局的文本（生成 html 代码是制作此类文本查看器的最简单选项）。

我还在所有组件上绑定了 mousedown 事件：

```
foreach (HtmlElement html in webBrowser1.Document.All)
{
     html.MouseDown += new HtmlElementEventHandler(Scrollback_Clicked);
} 
```

每次我完成加载 html 源代码后都会发生这种情况。（这无关紧要，但这是我对 WebBrowser 控件进行的唯一自定义，以防万一它不起作用的原因）

但是，经过数百次重新加载后，文本框占用了大约 2GB 的内存，我怀疑它是 browsercontrol 实现的缓存，它存储了迄今为止生成的所有 HtmlDocuments。

有没有办法禁用或刷新 WebBrowser 控件的缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T15:02:22.700

首先，您可能[正在泄漏事件处理程序](https://stackoverflow.com/questions/4526829/why-and-how-to-avoid-event-handler-memory-leaks)，考虑到您注册它们的方式，然后未能处置它们。这可能会导致轻微的性能问题，但显然不能解释过多的 2 GB RAM 的消耗。

无论如何，WebBrowser 控件是基于 Internet Explorer 的，因此它可能从那里继承了内存泄漏。您也可能对缓存理论有所了解。有一篇知识库文章准确地讨论了这个问题以及如何解决它：[How to clear cache when your application host a WebBrowser control in Visual C# .NET](http://support.microsoft.com/kb/326201)。

基本上，它建议您使用[WinInet API](http://msdn.microsoft.com/en-us/library/aa383928.aspx)手动刷新浏览器缓存。但这对我来说似乎有点像大锤解决方案。它正在使用全局解决方案解决本地问题，这应该会引发一些危险信号。

如果我是你，我会重新考虑我的应用程序的设计，以便完全避免这个问题。[RichTextBox 控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.aspx)没有任何显示停止器的内存泄漏。:-)

# c# - struct 作为 C# 中值类型的包装器

> ID：11671788
> 
> 赞同：1
> 
> 时间：2012-07-26T14:40:12.410
> 
> 标签：c#, .net, wrapper

我刚刚开始使用 C#。我注意到所有的值类型都被包装到各自`struct`的 s. 我确实查找了它背后的原因，但找不到太多（也许我没有正确搜索）。我只是想问一下 - 与`struct`Java 中的包装类相比，值类型在 C# 中被包装为 s 的原因是什么？

编辑：

当我将鼠标悬停在 上`int`时，我想它向我展示了这个：http: [//msdn.microsoft.com/en-us/library/system.int32%28v=vs.71%29](http://msdn.microsoft.com/en-us/library/system.int32%28v=vs.71%29)。从评论中，我知道我可能在这里理解了一些错误。如果`int`未包含在 that 中`struct`，那么为什么它会显示有关该信息的信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T14:49:26.067

我*相信*这只是对 IDE 告诉你的内容有点困惑。首先，与 Java不同，和之间**绝对没有区别**。这**不是**同一件事的“原始”和“盒装”版本。简单来说，是为方便起见的 c# 名称；全名（因为 CLI 支持其他语言等）是；但这**只是**一个别名；它们是相同且可互换的。`int``Int32`**`int``global::System.Int32`**

 ****其次，`struct`是“value-type”的同义词；再次，相同的含义（大部分）。

这里没有包装；当 IDE 谈论“struct Int32”时，它也在谈论“primitive int”。他们是一样的。要点是：`int`被视为值而不是引用，这意味着它是一个“结构”；这就是试图告诉你的*所有内容，即“不是参考”。*****

# java - Eclipse 告诉我一个方法是未定义的，而它实际上是明确定义的

> ID：11671789
> 
> 赞同：1
> 
> 时间：2012-07-26T14:40:15.717
> 
> 标签：java, eclipse, jakarta-ee, rad

我在 RAD 7.5 中工作。我正在将一个包从一个 Web 项目导入另一个。我实例化了这个类并尝试使用它的一种方法，但是我得到一个构建错误，该方法是未定义的。方法是公开的。除此方法外，所有其他方法均有效。我从中导入的项目已正确构建。我尝试删除这两个项目，再次从版本控制中获取它们，然后重新构建它们。到底什么可能是问题，或者我还能在 eclipse (RAD 7.5) 中检查什么？

**附加信息：**

被调用的方法不是静态的。它是公共的，并且从非静态、受保护的方法中调用。

**代码片段**

**我正在导入的类：**

```
package com.state;

public TelcoVariableTracker() {
    super();
}

public boolean isMedicalFlag() {
    return isMedicalFlag;
} 
```

**生成错误的类：**

```
import com.state.TelcoVariableTracker;

protected method() {

TelcoVariableTracker phoneInfo = HttpSessionUtils.getTelcoVariableTracker(request);

    if (phoneInfo.isMedicalFlag() {  // Build error: The method isMedicalFlag() is undefined for the type TelcoVariableTracker
        // Do things
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-12T18:00:21.037

我有同样的问题，清理项目成功了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T15:02:34.230

该类可以在同一个包中声明两次。因此只加载了第一个类，而第二个类有你缺少的方法。

真是一团糟，你对自己隐藏了一个方法：D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T15:48:30.137

这个 Eclipse 插件[Classpath Helper](http://classpathhelper.sourceforge.net/)可以显示被阻止的类：[http ://classpathhelper.sourceforge.net/](http://classpathhelper.sourceforge.net/)

当您在不同的 jar 中有相同的类时，会发生阻塞类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-05T15:43:52.997

您的类路径中有一个重复的类。在我的情况下，`Schema.getLogicalType()`给出了一个方法未定义的错误，但其他`Schema`方法工作正常并且会出现在 Eclipse 辅助中。我突出显示`getLogicalType`并按下 F3 并链接源。果然方法是有的。当我打开`.classpath`. 源链接到不同的 jar 文件。它被链接到`phoenix-4.7.0-HBase-1.1-client.jar`并且里面有一个较旧的`org.apache.avro.Schema`包。phoenix.jar 与我的 .jar 冲突`avro-1.8.1.jar`。所以我只是从类路径中删除了 phoenix.jar 来解决问题。希望这能让您了解如何修复方法未定义的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-17T16:39:40.057

我有同样的问题。Eclipse 从相同的两个 jar 中获取相同的代码，即使它们是在两个单独的工作区中声明的。我正在使用项目-工作区和项目-workspace_new。

我删除了另一个工作区并做了一个干净的项目，但起初无济于事。我有多个相同的罐子所在的位置。实际上，我不得不关闭我的笔记本电脑以清除所有内容，因为关闭并重新启动 Eclipse 并不能解决它。然而，在我这样做之后，一切都解决了，编译错误也消失了。然后我将工作区重新添加到我已删除的位置，并且 eclipse 能够保持清洁。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-14T11:00:06.863

我也有这个问题。就我而言，我在实际创建函数之前已经编写了对该函数的调用，因此最初会出现错误。但是，在创建函数后，错误仍然存​​在。我似乎 eclipse 在选项卡中缓存了错误，并且在选项卡之间切换时没有重新检查错误。关闭并重新打开选项卡为我修复了它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-08T05:59:21.777

我遇到过同样的问题。关闭和打开标签是不够的。不得不重启eclipse。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-27T11:20:49.777

可能是您的源代码中有该类，而 jar 中有同名但较旧且没有该方法的类。你会看到 jar 类。

# iphone - 是否可以在 IOS 中获取从用户位置到后台特定位置的距离？

> ID：11671790
> 
> 赞同：0
> 
> 时间：2012-07-26T14:40:16.963
> 
> 标签：iphone, ios, ios5

当应用程序处于后台时，我需要计算从用户位置到特定位置的距离，并据此获得本地通知。

**后台位置跟踪是完全可能的，我已经做到了，但是是否可以执行一段代码，包含一些条件检查并基于该更新并获得本地通知？**

我没有得到任何适当的解决方案。有什么办法吗？

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:52:43.317

从[位置感知编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1)开始。您需要知道的大部分内容都在其中。（对于 AppStore 应用程序来说，大多数不存在的东西根本不可能。）另请参阅[iOS 应用程序编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW25)中的跟踪用户位置。

您所描述的最佳工具可能是“基于形状的区域”。你基本上可以在地图上画一个框，然后说“当用户进入或离开这个框时，让我知道”。如果可能的话，这是您应该使用的工具。它对电池寿命的影响最小。

如果您绝对无法以任何其他方式解决问题，则请求使用后台位置传递`startUpdatingLocation`（以及 Info.plist 中的适当后台模式；请参阅上述文档）是合法的。在您徒步旅行时跟踪您的路线的应用程序将适合这种设置。但是如果可能的话，你应该避免它，因为它是一个主要的电池消耗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T15:44:26.647

是的，你绝对可以做到。我现在正在一个应用程序中执行此操作。如前所述，使用显着的位置变化或区域，以尽可能减少用户电池的压力。

我们观察区域（以及设备不支持区域的重大位置变化），然后检查一些事情并在需要时发出本地通知。

我们从一个基本原型开始来证明这个概念，我强烈推荐这种方法作为熟悉位置和通知框架的一种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:47:28.820

您需要在后台更新重要位置：http: [//mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-location/](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-location/)。然后，您将需要基于此创建位置通知。

我的问题是我不确定您是否可以在后台创建本地通知。

# android - ORMLite - 查询外部字段

> ID：11671791
> 
> 赞同：8
> 
> 时间：2012-07-26T14:40:29.443
> 
> 标签：android, ormlite

使用适用于 Android 的 ORMLite，我需要构建一个按订单 ID 或客户名称返回订单的查询。请考虑以下类声明：

```
@DatabaseTable(tableName = "order")
public class Order {
    @DatabaseField(generatedId = true)
    private Long id;

    @DatabaseField(foreign = true, canBeNull = false, foreignAutoRefresh = true, columnName = "customer_id")
    private Customer customer;

    // default constructor, getters and setters...
}

@DatabaseTable(tableName = "customer")
public class Customer {
    @DatabaseField(generatedId = true)
    private Long id;

    @DatabaseField
    private String name;

    // default constructor, getters and setters...
} 
```

我正在寻找的原始 SQL 是这样的：

```
SELECT 
    o.* 
FROM
    order o
    JOIN customer c on
        o.customer_id = c.id
WHERE
    (o.id = ?) OR (c.name = ?) 
```

使用 ORMLite 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T20:36:45.593

[ORMLite](http://ormlite.com/)现在支持[简单的连接查询](http://ormlite.com/docs/join-queries)。

所以你的查询看起来像：

```
QueryBuilder<Customer, Integer> customerQb = customerDao.queryBuilder();
SelectArg nameSelectArg = new SelectArg();
// this gives the c.name = ?
customerQb.where().eq("name", nameSelectArg);
QueryBuilder<Account, Integer> orderQb = orderDao.queryBuilder();
SelectArg idSelectArg = new SelectArg();
// this gives the o.id = ?
orderQb.where().eq("id", idSelectArg);
orderQb.join(customerQb);
// then you set the args and run the query
nameSelectArg.setValue("jim");
idSelectArg.setValue(1);
List<Order> results = orderQb.join(customerQb).query(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:41:49.933

不，ORMLite 支持 JOIN [https://stackoverflow.com/a/7320091/323128](https://stackoverflow.com/a/7320091/323128) 但是，[此参考](http://ormlite.com/docs/join-queries)将提供如何完成任务的愿景

# dll - 告诉计算机使用我的 dll 文件

> ID：11671792
> 
> 赞同：0
> 
> 时间：2012-07-26T14:40:30.787
> 
> 标签：dll, batch-file, environment-variables

我需要编写一个批处理文件，该文件获取位于批处理文件当前目录中的文件夹（例如 lib）的路径，并告诉我的计算机使用其中的 dll 文件。

有人知道该怎么做吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:28:35.543

我已经通过改变方法解决了这个问题。现在我将我的库添加到给定文件夹中，然后通过批处理文件将其路径添加到 PATH 环境变量。然后运行我的exe文件。

# c - 编程数据类型

> ID：11671793
> 
> 赞同：7
> 
> 时间：2012-07-26T14:40:49.737
> 
> 标签：c, types, primitive-types

我正在尝试学习**C**并提出了以下小程序。

```
#include "stdafx.h"

void main()
{
    double height = 0;
    double weight = 0;
    double bmi = 0;

    printf("Please enter your height in metres\n");
    scanf_s("%f", &height);
    printf("\nPlease enter your weight in kilograms\n");
    scanf_s("%f", &weight);
    bmi = weight/(height * height);
    printf("\nYour Body Mass Index stands at %f\n", bmi);
    printf("\n\n");
    printf("Thank you for using this small program.  Press any key to exit");
    getchar();
    getchar();
} 
```

程序编译完美，但是程序返回的答案没有意义。如果我为身高输入 1.8，为体重输入 80，那么 bmi 就像 1.#NF00 这没有意义。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T14:44:21.930

`scanf`与 a 一起使用时`double`，您必须使用说明`%lf`符，因为指针不与 一起提升`scanf`。

有关更多信息，请阅读以下问题： [当 printf() 只使用“%f”时，为什么 scanf() 需要“%lf”进行双打？](https://stackoverflow.com/questions/210590/why-does-scanf-need-lf-for-doubles-when-printf-is-okay-with-just-f)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-26T14:43:17.550

`scanf`（和`scanf_s`）格式`%f`需要指向类型的指针`float`。

只需更改您的`height`和`weight`变量的类型`float`即可解决此问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T14:45:45.633

我认为 scanf_s 语法中的问题，您省略了第三个参数，即缓冲区的大小（以字节为单位）。尝试以下操作：

```
scanf_s("%lf", &valueToGet, sizeof(double)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-27T11:56:42.960

scanf() 和 printf() 的缺点是它需要非常严格的格式，控制字符串和参数之间的任何不匹配都可能导致严重的错误，从而使您的输入或输出完全没有意义。而这个错误往往是初学者犯的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-13T20:37:11.077

如果您使用**%f**格式说明符，则必须使用浮点数据类型而不是双精度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-01T05:24:21.127

问题是因为：

```
format '%f' expects argument of type 'float*', but argument 2 has type 'double*' 
```

有两种方法可以处理这个问题：

1.  变量应该是`float`：

    ```
    double height = 0;    -->    float height = 0;
    double weight = 0;    -->    float weight = 0;
    double bmi = 0;       -->    float bmi = 0; 
    ```

2.  或`format specifier`应对应于`double`。

    ```
    scanf_s("%f", &height);   -->    scanf_s("%lf", &height);

    scanf_s("%f", &weight);   -->    scanf_s("%lf", &weight);

    printf("\nYour Body Mass Index stands at %f\n", bmi);
                                              |
                                              V 
    printf("\nYour Body Mass Index stands at %lf\n", bmi); 
    ```

# flash - 发布时，flash 8 text-to-symbol 的字母和行距不正确

> ID：11671795
> 
> 赞同：0
> 
> 时间：2012-07-26T14:40:58.183
> 
> 标签：flash, actionscript, actionscript-2, flash-8

我正在创建一个必须是 Flash 8、AS2 的 Flash 动画。部分动画需要文字淡入淡出。我发现要在 Flash 8 中实现这一点，我必须将文本转换为图形符号。

当我在编辑器窗口中查看此文本图形符号时，一切看起来都很棒。但是当我将它作为 .swf 文件发布时，文本的字母间距很大，而行间距很小。

这是个常见的问题吗？我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:47:21.413

也许[嵌入字体](http://forums.epicgames.com/threads/885514-AS2-AS3-Embedding-Fonts-to-be-Used-by-a-Dynamically-Created-TextField)并为文本框的动画属性设置反别名可能会有所帮助。

嵌入的唯一缺点是文件大小增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:24:13.387

我最终不得不在 Illustrator 中创建字体轮廓，然后使用 Fireworks 中的路径。所以没有真正的解决方案，只是一种解决方法。

# java - 处理 zipinputstream 文件的建议

> ID：11671800
> 
> 赞同：0
> 
> 时间：2012-07-26T14:41:05.023
> 
> 标签：java, android, eclipse, image, zip

我的问题更像是为了节省内存和提高效率而采取的最佳路线。

所以让我们开始吧，我有一个 zip 文件，我使用“ZipInputStream”类来搜索特定文件（图像），在获得图像的位置后，我将其处理成图像并将其展示给用户。现在我想存储这个图像，这样它就不会进入 zip 文件中流式传输文件的整个过程。

我目前正在做这个过程：

过程 1：“将输入流保存到内存中的哈希映射中，当内存达到一定限制后，我将其删除。”

过程 2：然后我想如果我只是保存 zipInputStream 中使用的位置并返回到该位置并通过正确的位置在 zip 文件中压缩，它可能会更有效。这样我就有能力在不占用内存的情况下获取图像。我还没有测试过这个理论。

概括：

流程 1 有它的弱点，例如用户只是匆匆完成这些功能，最终可能会崩溃。过程 2 可能会更明智地计算内存并且加载时间会稍长一些。

问题：

“那么我应该走哪条路线？1、2，或者这个问题中没有提出的东西”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:48:32.557

我要做的是将图像本身存储在[LruCache](http://developer.android.com/reference/android/util/LruCache.html)中。这是一个缓存，当图像在一段时间内不使用时会被清除。当图像被删除时，只需重复加载图像的过程。这是安全和快速的。

# java - 为什么要在 SynchronizedMap 或 SynchronizedCollections 上同步？

> ID：11671801
> 
> 赞同：15
> 
> 时间：2012-07-26T14:41:10.360
> 
> 标签：java, multithreading

我指的是[这里](https://stackoverflow.com/q/567068/164299)提出的问题并使用作者代码示例，现在我的问题是

1.  为什么作者使用`synchronized(synchronizedMap)`，真的有必要吗，因为 synchronizedMap 将始终确保没有两个线程试图对其进行`read/put`操作，`Map`那么为什么我们需要`synchronize`对该地图本身进行操作？

非常感谢您的解释。

* * *

```
 public class MyClass {
  private static Map<String, List<String>> synchronizedMap =
      Collections.synchronizedMap(new HashMap<String, List<String>>());

  public void doWork(String key) {
    List<String> values = null;
    while ((values = synchronizedMap.remove(key)) != null) {
      //do something with values
    }
  }

  public static void addToMap(String key, String value) {
    synchronized (synchronizedMap) {
      if (synchronizedMap.containsKey(key)) {
        synchronizedMap.get(key).add(value);
      }
      else {
        List<String> valuesList = new ArrayList<String>();
        valuesList.add(value);
        synchronizedMap.put(key, valuesList);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-26T14:43:30.203

> 为什么我们需要同步它`synchronizemap`本身？

您可能需要在已经同步的集合上进行同步，因为您正在对集合执行两个操作 - 在您的示例中，是 a `containsKey()`，然后是 a `put()`。您正在尝试防止*调用*集合的代码中出现[竞争条件。](http://en.wikipedia.org/wiki/Race_conditions#Computing)此外，在这种情况下，块还保护这些值，以便多个线程可以将它们的值添加到这些不同步的集合中。*`synchronized``ArrayList`*

 *如果您查看链接到的代码，他们首先检查键是否存在，然后如果键不存在则将值放入映射中。您需要防止 2 个线程检查密钥的存在，然后将它们*都*放入映射中。比赛是哪一个将首先放置，哪一个将覆盖先前的放置。

同步集合保护自己免受多个线程破坏映射本身。它*不能*防止围绕多次调用地图的逻辑竞争条件。

```
synchronized (synchronizedMap) {
    // test for a key in the map
    if (synchronizedMap.containsKey(key)) {
      synchronizedMap.get(key).add(value);
    } else {
      List<String> valuesList = new ArrayList<String>();
      valuesList.add(value);
      // store a value into the map
      synchronizedMap.put(key, valuesList);
   }
} 
```

这也是`ConcurrentMap`界面有`putIfAbsent(K key, V value);`. 这*不需要*两个操作，因此您可能不需要围绕它进行同步。

顺便说一句，我会将上面的代码重写为：

```
synchronized (synchronizedMap) {
    // test for a key in the map
    List<String> valuesList = synchronizedMap.get(key);
    if (valueList == null) {
      valuesList = new ArrayList<String>();
      // store a value into the map
      synchronizedMap.put(key, valuesList);
    }
    valuesList.add(value);
} 
```

最后，如果地图上的大多数操作无论如何都需要在一个`synchronized`块中，那么您最好不要支付，`synchronizedMap`而只使用一个`HashMap`总是在`synchronized`块内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:43:47.830

这不仅仅是关于更新 synchronizedMap 值，它是关于影响地图的操作序列。在同一方法内的地图上发生了两个操作。

如果您不同步块/方法，假设可能存在 Thread1 执行第一部分和 thread2 执行第二部分的情况，您的业务操作可能会导致奇怪的结果（即使对 map 的更新是同步的）*

# c# - 获取拖放源

> ID：11671803
> 
> 赞同：0
> 
> 时间：2012-07-26T14:41:22.383
> 
> 标签：c#, wpf, events, drag-and-drop

我有一个`WPF-Datagrid`可以放置元素的地方。这是从*.txt文件中删除的**文本元素*（例如使用 notepad++ 打开）。是否有可能在我的 Drop-Event 上获取有关 .txt 文件的信息？

 ***编辑：**

```
void OnDragDrop(object sender, DragEventArgs e)
{
    String text = e.Data.GetData(DataFormats.Text, true);
} 
```

在这里我可以获取我的放置元素的文本，但我没有找到获取源文件的解决方案，从那里开始拖动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:36:20.603

好的，你去：

您必须做三件事才能在 WPF 中启用拖放功能：

1.  告诉元素支持拖放
2.  设置`DragOver`事件
3.  设置`Drop`事件

好的，我们先来看看XAML：

```
<DataGrid AllowDrop="True"
            DragOver="DataGrid_DragOver"
            Drop="DataGrid_Drop"/> 
```

和事件处理程序代码：

```
private void DataGrid_DragOver(object sender, DragEventArgs e)
{
    // check if the element dragged over is one or more files
    if (e.Data.GetDataPresent(DataFormats.FileDrop))
    {
        // if so, show a link cursor
        e.Effects = DragDropEffects.Link;
    }
    else
    {
        // otherwise show a "block" cursor
        e.Effects = DragDropEffects.None;
    }

    // IMPORTANT: mark the event as "handled by us", to apply the drag effects
    e.Handled = true;
}

private void DataGrid_Drop(object sender, DragEventArgs e)
{
    // Check if the data dropped is one or more files
    if (e.Data.GetDataPresent(DataFormats.FileDrop))
    {
        // get the file pathes from the data object
        string[] filePaths = (e.Data.GetData(DataFormats.FileDrop) as string[]); 

        // do something with the pathes
        /* ... */
    }
} 
```

有关详细信息，请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms742859.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-08T21:56:06.713

不。

**以与剪切和粘贴**相同的方式考虑**拖放**- 通常只有“数据”在事件期间被拖动，并且没有关于其源的其他元数据。

 **一个例外是从网页中拖动文本时。`DataFormats.Html`将包括文本来自的 SourceURL。***

# vim - 如何在 Emacs 中绑定打字模式

> ID：11671805
> 
> 赞同：0
> 
> 时间：2012-07-26T14:41:26.323
> 
> 标签：vim, emacs

如果你用过 Vim，你可能知道录音。例如，您可以键入`q q`，键入一系列键，再按`q`一次，然后让 Vim 在您每次按 时执行键入该键序列`@q`。我如何在 Emacs 中做到这一点？

编辑：我在发布此问题后不久发现的我对我的问题的回答是否有原因被删除？我不是评估我的回答是否回答了我的问题的最佳人选吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T15:30:39.923

[http://www.gnu.org/software/emacs/manual/html_node/emacs/Keyboard-Macros.html](http://www.gnu.org/software/emacs/manual/html_node/emacs/Keyboard-Macros.html)
或者`C-x` `e`在emacs*缓冲区的这一行之后*

```
(info "(emacs)Keyboard Macros") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T16:35:59.197

使用宏最简单的方法是键入`F3`开始录制宏并`F4`完成录制宏。然后键入`F4`任意多次，以重复宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T15:04:50.193

或者你可以使用[evil](http://emacswiki.org/emacs/Evil)并留下来`q`。

# c# - 如何从无限字节流中读取 UTF-8 字符 - C#

> ID：11671826
> 
> 赞同：6
> 
> 时间：2012-07-26T14:42:28.670
> 
> 标签：c#, stream

通常，要从字节流中读取字符，您使用 StreamReader。在此示例中，我正在从无限流中读取由 '\r' 分隔的记录。

```
using(var reader = new StreamReader(stream, Encoding.UTF8))
{
    var messageBuilder = new StringBuilder();
    var nextChar = 'x';
    while (reader.Peek() >= 0)
    {
        nextChar = (char)reader.Read()
        messageBuilder.Append(nextChar);

        if (nextChar == '\r')
        {
            ProcessBuffer(messageBuilder.ToString());
            messageBuilder.Clear();
        }
    }
} 
```

问题是 StreamReader 的内部缓冲区很小，因此如果代码等待“记录结束”分隔符（在本例中为“\r”），它必须等到 StreamReader 的内部缓冲区被刷新（通常是因为更多字节已经到了）。

此替代实现适用于单字节 UTF-8 字符，但在多字节字符上会失败。

```
int byteAsInt = 0;
var messageBuilder = new StringBuilder();
while ((byteAsInt = stream.ReadByte()) != -1)
{
    var nextChar = Encoding.UTF8.GetChars(new[]{(byte) byteAsInt});
    Console.Write(nextChar[0]);
    messageBuilder.Append(nextChar);

    if (nextChar[0] == '\r')
    {
        ProcessBuffer(messageBuilder.ToString());
        messageBuilder.Clear();
    }
} 
```

如何修改此代码以使其适用于多字节字符？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T14:48:14.113

与其设计为转换完整缓冲区，不如`Encoding.UTF8.GetChars`获取一个实例`Decoder`并重复调用其成员方法[`GetChars`](http://msdn.microsoft.com/en-us/library/system.text.decoder.getchars.aspx)，这将利用`Decoder`的内部缓冲区来处理从一次调用结束到下一次调用的部分多字节序列。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T15:07:15.380

感谢理查德，我现在有了一个可以工作的无限流阅读器。正如他解释的那样，诀窍是使用 Decoder 实例并调用其 GetChars 方法。我已经用多字节日文文本对其进行了测试，效果很好。

```
int byteAsInt = 0;
var messageBuilder = new StringBuilder();
var decoder = Encoding.UTF8.GetDecoder();
var nextChar = new char[1];

while ((byteAsInt = stream.ReadByte()) != -1)
{
    var charCount = decoder.GetChars(new[] {(byte) byteAsInt}, 0, 1, nextChar, 0);
    if(charCount == 0) continue;

    Console.Write(nextChar[0]);
    messageBuilder.Append(nextChar);

    if (nextChar[0] == '\r')
    {
        ProcessBuffer(messageBuilder.ToString());
        messageBuilder.Clear();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T22:54:23.017

我不明白你为什么不使用流阅读器的 ReadLine 方法。但是，如果有充分的理由不这样做，那么在我看来，在解码器上重复调用 GetChars 是低效的。为什么不利用 '\r' 的字节表示不能成为多字节序列的一部分这一事实呢？（多字节序列中的字节必须大于 127；也就是说，它们具有最高位设置。）

```
var messageBuilder = new List<byte>();

int byteAsInt;
while ((byteAsInt = stream.ReadByte()) != -1)
{
    messageBuilder.Add((byte)byteAsInt);

    if (byteAsInt == '\r')
    {
        var messageString = Encoding.UTF8.GetString(messageBuilder.ToArray());
        Console.Write(messageString);
        ProcessBuffer(messageString);
        messageBuilder.Clear();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-02T09:47:00.217

迈克，我发现您的解决方案也非常适合我的情况。但我注意到有时需要四个 GetChar() 调用来确定要返回的字符。这意味着 charCount 为 2，而我的 nextChar 缓冲区大小为 1。所以我收到错误“输出字符缓冲区太小，无法包含解码的字符，编码 Unicode 回退 System.Text.DecoderReplacementFallback。”

我将代码更改为：

```
 // ...
    var nextChar = new char[4];  // 2 might suffice

    for (var i = startPos; i < bytesRead; i++)
    {
        int charCount;
        //...
        charCount = decoder.GetChars(buffer, i, 1, nextChar, 0);

        if (charCount == 0)
        {
            bytesSkipped++;
            continue;
        }

        for (int ic = 0; ic < charCount; ic++)
        {
            char c = nextChar[ic];
            charPos++;

            // Process character here...
        }
    } 
```

# git - 在我已经将它合并回来之后，如何在功能分支上重新定位工作

> ID：11671833
> 
> 赞同：1
> 
> 时间：2012-07-26T14:42:46.657
> 
> 标签：git, version-control, branching-and-merging

使用 git 进行项目时，我有两个功能分支，分别称为`dev-a`和`dev-b`，从我的`develop`分支（从 分支`master`）分支。

我工作`dev-a`了一段时间，完成了，然后合并回`develop`，做了一些工作`develop`，然后开始`dev-b`，工作了一段时间，然后找到了应该做的事情`dev-a`，所以我结帐`dev-a`并修复它。我的 DAG 现在看起来像这样：

*提交哈希显然是虚构的，而不是真正的哈希；它们仅供参考*

```
*   008 - (dev-a) Fix problem on dev-a
|
| * 007 - (dev-b) Work on dev-b
| * 006 - Work on dev-b
| |
| * 005 - (develop) Work on develop
| * 004 - Work on develop
| * 003 - Merged dev-a
|/|
* | 002 - Work on dev-a
* | 001 - Work on dev-a
 \|
  * 000 - Work on develop
  | 
```

不过，我想做的是让提交发生在合并“之前”，这样我就可以重新设置基准`develop`并`dev-b`在它之上，保持一切整洁：

```
 * 007 - (dev-b) Work on dev-b
  * 006 - Work on dev-b
  |
  * 005 - (develop) Work on develop
  * 004 - Work on develop
  * 003 - Merged dev-a
 /|
* | 008 - (dev-a) Fix problem on dev-a
* | 002 - Work on dev-a
* | 001 - Work on dev-a
 \|
  * 000 - Work on develop
  | 
```

同样重要的是要注意，修复`dev-a`不会与任何以后的提交冲突 - 这是对单个文件的一个相当小的更改。所有相关的提交都是本地的，尚未共享。

我相当肯定我可以做到这一点，因为 git 相当灵活，但我不确定它是否可能，如何做到这一点，或者这是否是一个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T15:17:56.800

这一切都非常简单，只需再次合并并根据它重新调整所有内容。

```
# make a branch of the 'develop' right before the merge
git checkout -b new-base 000 
# merge again
git merge dev-a

git checkout develop
# it moves all 'develop' commits made after the merge onto the new base.
git rebase new-base

git checkout dev-b
# moves all 'dev-b' commits onto the rebased 'develop'.
git rebase develop

# drop it, I don't think it has any value now.
git branch -d new-base 
```

# python - 处理路径变量python中的空格

> ID：11671837
> 
> 赞同：1
> 
> 时间：2012-07-26T14:42:49.783
> 
> 标签：python, python-2.6

我有一个字符串如下

`command= "copy1 "D:\path1\program Files" "c:\program Files\path1" copy2 "D:\path2\program Files" "c:\program Files\path2""`

请注意，copy1 和 copy2 都在字符串内。我的意图是将每个复制过程写在一个 xml 文件中，如下所示：

```
 <copyFiles>
               <copy1>
                    <Sourcepath>D:\path1\program Files</Sourcepath>
                    <DestPath>c:\program Files\path1</DestPath>
                </copy1>

                 <copy2>
                    <Sourcepath>D:\path2\program Files</Sourcepath>
                    <DestPath>c:\program Files\path2</DestPath>
                  </copy2>

         <copyFiles> 
```

我尝试通过使用空格拆分字符串来创建每个参数的列表，如下所示：

`Copyparamlist=command.split(' ')`

但我收到的 xml 如下：

```
 <copyFiles>
               <copy1>
                    <Sourcepath>D:\path1\program</Sourcepath>
                    <DestPath>c:\program</DestPath>
                </copy1>

                 <copy2>
                    <Sourcepath>D:\path2\program</Sourcepath>
                    <DestPath>c:\program</DestPath>
                  </copy2>

         <copyFiles> 
```

我的清单内容应该如下： `["copy1", "D:\path1\program Files", "c:\program Files\path1", "copy2", "D:\path2\program Files]", "c:\program Files\path2"]`

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:01:12.313

很难说出你到底想要什么，但看起来你想按如下方式拆分字符串：

```
a = 'this "is a string" with "4 elements"'
split = magic_splitter(a)  #How to write magic splitter?
print split  #['this', 'is a string', 'with', '4 elements'] 
```

如果是这样的话，你想要的是使用梦幻般的功能`shlex.split`

```
print shlex.split(a) #['this', 'is a string', 'with', '4 elements'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:56:05.343

你想要什么输出？您可以使用`join`它以您想要的任何格式放置它。例如，要简单地删除空格，请使用

```
Copyparamlist=''.join(command.split(' ')) 
```

或者，如果您想用 %20 替换它们，请使用

```
Copyparamlit='%20'.join(command.split(' ')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T16:26:32.493

尝试以下示例：

```
import shlex
import xml.etree.ElementTree as etree

def my_parser(s):
    command = []
    for item in shlex.split(s):
        if item.startswith('copy'):
            if command:            # any previous command was collected?
                yield command      # output one parsed command
            command = [ item ]     # start collecting new command
        else:
            command.append(item)   # collect another argument    

    if command:                    # if anything was collected
        yield command              # output the last parsed command

cmd = r'copy1 "D:\path1\program Files" "c:\program Files\path1" copy2 "D:\path2\program Files" "c:\program Files\path2"'

# Just to show what are the parsed command in the lists
for command in my_parser(cmd):
    print command

# Alternatively, constructing the XML.
e = etree.Element('copyFiles')    # root element
tree = etree.ElementTree(e)
root = tree.getroot()             # now the same as e 

for command in my_parser(cmd):
    assert len(command) == 3
    assert command[0].startswith('copy')

    e = etree.Element(command[0])  # the command name becomes the tag name 

    src = etree.Element('Sourcepath')  # subelement
    src.text = command[1]

    dst =  etree.Element('DestPath')   # subelement
    dst.text = command[2]

    e.append(src)                  # subelement appended to its parent
    e.append(dst)                  # subelement appended to its parent

    root.append(e)                 # command appended to the root element

tree.write('output.xml') 
```

它打印：

```
['copy1', 'D:\\path1\\program Files', 'c:\\program Files\\path1']
['copy2', 'D:\\path2\\program Files', 'c:\\program Files\\path2'] 
```

它产生`output.xml`以下内容（作为一行，在此处手动包装）：

```
<copyFiles><copy1><Sourcepath>D:\path1\program Files</Sourcepath>
<DestPath>c:\program Files\path1</DestPath></copy1>
<copy2><Sourcepath>D:\path2\program Files</Sourcepath>
<DestPath>c:\program Files\path2</DestPath></copy2></copyFiles> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T15:01:49.160

除了空格之外，您还需要有另一个分隔符...例如...您可以使用例如引号分隔符，例如

```
CopyParam = command.split('"') 
```

我是否应该将字符串命令的格式理解为 copyName "Source" "Destination" ...您可以在三元组列表中循环...比如

```
for i in xrange(0, len(CopyParam), 3): 
    copyname, sourcepath, destpath = CopyParam[i], CopyParam[i + 1], CopyParam[i + 2]
    # Do the code to transfer it to XML here .. 
```

您可能需要先从列表中删除空元素..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T15:02:57.290

我假设您的命令字符串实际上指定为；

```
command='copy1 "something with spaces" "somewhere else" copy2 "this thing" "elsewhere"' 
```

如果您的命令始终是复制命令，则可以查看拆分“复制”一词并使用结果列表，

```
command.split('copy')
['','1 "something with spaces" "somewhere else" ','2 "this thing" "elsewhere"'] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T15:12:47.957

我认为这个线程可能有你正在寻找的东西。如果您试图忽略引号中的拆分，您可能必须使用正则表达式。

[如何在python中拆分但忽略引用字符串中的分隔符？](https://stackoverflow.com/questions/2785755/how-to-split-but-ignore-separators-in-quoted-strings-in-python)

试试这个代码：

```
import re
PATTERN = re.compile(r'''((?:[^ "']|"[^"]*"|'[^']*')+)''')
command = PATTERN.split(command) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-26T15:13:08.683

有了这个，它可以很容易地作为一个字典来管理：

```
import shlex
split = shlex.split(commandlist)
commands = dict(zip(split[::3], zip(split[1::3], split[2::3]))) 
```

解释：给定字符串 'copyname "source" "dest" copyname2 "source2" "dest2"'...

split = shlex.split() 将按照格式拆分字符串`['copyname', 'source', 'dest', 'copyname2', 'source2','dest2']`

`split[::3]`正在做一种叫做拼接的事情。这隐含地说“从 0 索引开始，每三项给​​我一次。`split[::3]`将等于`['copyname', 'copyname2']`。不过，拼接并不止于此。`split[1::3]`说从索引 1 开始，然后每隔三个元素给出。它将返回所有来源。

该`zip`功能是独一无二的。给定列表`l1=['a','b','c']`和`l2=[1,2,3]`将`zip(l1,l2)`等于`[('a',1),('b',2), ('c',3)]`。

`zip(split[1::3], split[2::3])`将等于`[('source', 'dest'), ('source2', 'dest2')]`。

`zip(split[::3], zip(split[1::3], split[2::3]))`将等于`[('copyname',('source','dest')), ('copyname2',('source2','dest2'))]`。

然后，该`dict`函数会将给定列表中的每个键/值对 ( `copyname`and `('source','dest')`) 转换为字典。

`commands`变量现在以格式写入`{'copyname': ('source', 'dest'), ...}` xml，只需遍历字典即可。

专业提示：使用 遍历字典时`for`，每个项目都是一个键。

如果你愿意，你可以使用`for copyname, source, dest in zip(split[::3], split[1::3], split[2::3])`.

# c# - 如何使 Delete 键在 WebBrowser 控件中起作用

> ID：11671840
> 
> 赞同：0
> 
> 时间：2012-07-26T14:42:53.443
> 
> 标签：c#, .net, winforms, webbrowser-control

我有一个 .net Windows 窗体项目，其中包含 System.Windows.forms.WebBrowser 控件，以允许用户对 HTML 内容进行一些编辑。当此控件处于编辑模式时，可以拖放编辑 div 或 span 等元素，但选择一个元素并键入 Delete 不会执行任何操作。

我看过一些关于在 C++ 中进行这项工作的帖子，但它们不是很详细。示例[http://social.msdn.microsoft.com/Forums/en-US/ieextensiondevelopment/thread/1f485dc6-e8b2-4da7-983f-ca431f96021f/](http://social.msdn.microsoft.com/Forums/en-US/ieextensiondevelopment/thread/1f485dc6-e8b2-4da7-983f-ca431f96021f/)

下一篇文章将讨论使用称为 TranslateAccelerator 方法的函数来解决 MFC 项目中的类似问题。[http://vbyte.com/iReader/Reader.asp?ISBN=0735607818&URI=/HTML/chaab.htm](http://vbyte.com/iReader/Reader.asp?ISBN=0735607818&URI=/HTML/chaab.htm)

有没有人有关于如何使删除键在 C# 或 VB 中为 Windows 窗体项目工作的建议？

这是我创建 WebBrowser 内容的代码：

```
WebBrowser1.Navigate("about:blank")   ' Initializes the control
Application.DoEvents
WebBrowser1.Document.OpenNew(False).Write("<html><body><span>Project Title</span><input type='text' value='' /></body></html>")
WebBrowser1.ActiveXInstance.Document.DesignMode = "On"  ' Option Explicit must be set to off
WebBrowser1.Document.Body.SetAttribute("contenteditable", "true") 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:29:50.377

那么问题是控件属性之一“WebBrowserShortcutsEnabled”设置为false。感谢大家的帮助，没有人能猜到这一点，所以我得到了一个大大的“DUH！”。我确实找到了一种在 c# 中实现这项工作的方法，其中代码如下所示：

```
public Form1() {
    InitializeComponent();
    webBrowser1.Navigate("about:blank");  // Initializes the webbrowser control
}
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) {
    mshtml.IHTMLDocument2 doc = webBrowser1.Document.DomDocument as mshtml.IHTMLDocument2;
    doc.designMode = "On";
    webBrowser1.Document.OpenNew(false).Write(@"<html><body><span>Project Title</span><input type=""text"" value="""" /></body></html>");
} 
```

...假设已将引用添加到 MSHTML。documentCompleted 事件与我的第一个代码示例中的 Application.DoEvents 完成相同的事情，因此可以采用任何一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:12:08.757

我刚试过这个方法：

```
webBrowser1.Navigate(@"javascript:document.body.contentEditable='true'; document.designMode='on'; void 0"); 
```

可以拖动和删除元素，也可以双击编辑文本。

# eclipse-gmf - GMF 如何为链接装饰创建不同的形状

> ID：11671842
> 
> 赞同：0
> 
> 时间：2012-07-26T14:42:53.863
> 
> 标签：eclipse-gmf

我想为连接的源和目标装饰创建和应用不同的形状。我知道我必须扩展折线类，但我真的无法理解它是如何工作的。有人可以帮忙吗。有没有例子？我知道只有少数人与 gmf 合作，到目前为止，没有人回答我与 gmf 相关的问题，但请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:35:28.120

您不必扩展 Polyline 类，只需调用`setTargetDecoration`方法（或`setSourceDecoration`）并将装饰图形作为参数传递。您还可以根据某些条件传递不同的装饰器。例如，可以像这样创建一个“箭头”装饰器图形：

```
PointList pl = new PointList();
pl.addPoint(0, 0);
pl.addPoint(-2, -1);
pl.addPoint(-2, 1);

PolygonDecoration df = new PolygonDecoration();
df.setFill(true);
df.setBackgroundColor(ColorConstants.white);
df.setTemplate(pl); 
```

请务必`@generated`从修改后的方法中删除标记。

# c# - 如何在 RichTextBox 中设置字符或单词之间的空格

> ID：11671844
> 
> 赞同：0
> 
> 时间：2012-07-26T14:42:55.263
> 
> 标签：c#, winforms

我尝试使用 winAPI 消息 SETCHARFORMAT，在 dwMask 中使用 CFM_SPACING，在 sSpacing 中使用 value，但它不起作用。我能做些什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:51:17.883

根据[CHARFORMAT2](http://msdn.microsoft.com/en-us/library/bb787883.aspx)上的文档（强调我的）

> **间距**
> 
> 类型：短
> 
> 字母之间的水平间距，以缇为单位。**该值对富编辑控件显示的文本没有影响**；包含它是为了与 Windows TOM 界面兼容。要使用此成员，请在 dwMask 成员中设置 CFM_SPACING 标志。

# jquery - css中的划分宽度变化

> ID：11671845
> 
> 赞同：0
> 
> 时间：2012-07-26T14:42:56.600
> 
> 标签：jquery, html, css

我确实有 3 个宽度不同的组件（如 460px、300px、240px），其中一个使用 css 在图像中显示

当它是 460px 时，我需要设置以下格式（例如：#DivMain）

当主宽度为 300px 时 2 列变为同一 div 的单列 #DivMain 当主宽度为 240px 时 2 列变为同一 div 的单列 #DivMain

下面是html格式：

```
<div class="DivMain">
      <table>
           <tr> <td> </td> </tr>  
           <tr> <td> </td> </tr>  
           <tr> <td> </td> </tr>  
           <tr> <td> </td> </tr>  
           <tr> <td> </td> </tr>  
           <tr> <td> </td> </tr>  ..etc
     </table>
</div> 
```

![](../Images/206b8721b7b87b7f5d190a549f6644b4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:52:37.827

考虑重新组织和使用 CSS 媒体查询。它们是响应式设计的基石。表格不适合响应式渲染。

[更多信息](http://css-tricks.com/css-media-queries/)

# c++ - 如何为 QGraphicsSimpleTextItem (Qt C++) 设置背景？

> ID：11671846
> 
> 赞同：1
> 
> 时间：2012-07-26T14:42:59.130
> 
> 标签：c++, qt, user-interface

我已经添加到我`QGraphicsScene`的 a`QGraphicsSimpleTextItem`中，但只是一个简单的文本在当前背景下是不可读的。因此我想设置的背景颜色`QGraphicsSimpleTextItem`，但是......没有这样的方法。最简单的解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T11:12:56.563

似乎最简单的解决方案是在构造函数中使用`QGraphicsTextItem`而不是`QGraphicsSimpleTextIem`调用`setHtml()`，例如：

```
this->setHtml(QString("<div style='background-color: #ffff00;'>") + text + "</div>"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T14:55:53.273

要更改整个场景的背景：

```
myScene->setBackgroundBrush( Qt::red ); 
```

或者，如果您只想更改文本项的背景，您可能必须继承`QGraphicsSimpleTextItem`并覆盖该`paint()`方法。

```
class MyTextItem : public QGraphicsSimpleTextIem {
    public:
        void paint( QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget=0 )
        {
            painter->setBrush( Qt::red );
            painter->drawRect( boundingRect() );
            QGraphicsSimpleTextItem::paint( painter, option, widget );
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-26T14:52:01.017

这是访问背景颜色的方法。

```
QPalette currentPalette = myGraphicScene.palette();

// Set a new color for the background, use QPalette::Window
// as QPalette::Background is obsolete.
currentPalette.setColor( QPalette::Window, Qt::red );

// Set the palette.
myGraphicScene.setPalette( currentPalette ); 
```

# java - android sqlite异常：列'satze'不存在

> ID：11671847
> 
> 赞同：2
> 
> 时间：2012-07-26T14:43:08.840
> 
> 标签：java, android, database, sqlite

这是代码：

TodoTable.java：

```
public class TodoTable {

// Database table
public static final String TABLE_TODO = "todo";
public static final String COLUMN_ID_U = "_id";
public static final String COLUMN_CATEGORY = "category";
public static final String COLUMN_SUMMARY = "summary";
public static final String COLUMN_DESCRIPTION = "description";
public static final String COLUMN_SATZE = "satze";

// Database creation SQL statement
private static final String DATABASE_CREATE = "create table " 
        + TABLE_TODO
        + "(" 
        + COLUMN_ID_U + " integer primary key autoincrement, " 
        + COLUMN_CATEGORY + " text not null, " 
        + COLUMN_SUMMARY + " text not null, " 
        + COLUMN_DESCRIPTION + " text not null, " 
        + COLUMN_SATZE + " text not null" 
        + ");";

public static void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
}

public static void onUpgrade(SQLiteDatabase database, int oldVersion,
        int newVersion) {
    Log.w(TodoTable.class.getName(), "Upgrading database from version "
            + oldVersion + " to " + newVersion
            + ", which will destroy all old data");
    database.execSQL("DROP TABLE IF EXISTS " + TABLE_TODO);
    onCreate(database);
}} 
```

TodoDetailAktivity.java：

```
public class TodoDetailActivity extends Activity {
private Spinner mCategory;
private EditText mTitleText;
private EditText mBodyText;
private EditText mSatzText;
private EditText mPauseText;
private EditText mWDHText;
private EditText mGewichtText;

private Uri todoUri;

@Override
protected void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    setContentView(R.layout.todo_edit);

    mCategory = (Spinner) findViewById(R.id.category);
    mTitleText = (EditText) findViewById(R.id.todo_edit_summary);
    mBodyText = (EditText) findViewById(R.id.todo_edit_description);
    mSatzText = (EditText) findViewById(R.id.editTextsatz);
    Button confirmButton = (Button) findViewById(R.id.todo_edit_button);

    Bundle extras = getIntent().getExtras();

    // Check from the saved Instance
    todoUri = (bundle == null) ? null : (Uri) bundle
            .getParcelable(MyTodoContentProvider.CONTENT_ITEM_TYPE);

    // Or passed from the other activity
    if (extras != null) {
        todoUri = extras
                .getParcelable(MyTodoContentProvider.CONTENT_ITEM_TYPE);

        fillData(todoUri);
    }

    confirmButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            if (TextUtils.isEmpty(mTitleText.getText().toString())) {
                makeToast();
            } else {
                setResult(RESULT_OK);
                finish();
            }
        }

    });
}

private void fillData(Uri uri) {
    String[] projection = { TodoTable.COLUMN_SUMMARY,
            TodoTable.COLUMN_DESCRIPTION, TodoTable.COLUMN_CATEGORY };
    Cursor cursor = getContentResolver().query(uri, projection, null, null,
            null);
    if (cursor != null) {
        cursor.moveToFirst();
        String category = cursor.getString(cursor
                .getColumnIndexOrThrow(TodoTable.COLUMN_CATEGORY));

        for (int i = 0; i < mCategory.getCount(); i++) {

            String s = (String) mCategory.getItemAtPosition(i);
            if (s.equalsIgnoreCase(category)) {
                mCategory.setSelection(i);
            }
        } 

        mTitleText.setText(cursor.getString(cursor
                .getColumnIndexOrThrow(TodoTable.COLUMN_SUMMARY)));
        mBodyText.setText(cursor.getString(cursor
                .getColumnIndexOrThrow(TodoTable.COLUMN_DESCRIPTION)));
        mSatzText.setText(cursor.getString(cursor
                .getColumnIndexOrThrow(TodoTable.COLUMN_SATZE)));

        // Always close the cursor
        cursor.close();
    }
}

protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    saveState();
    outState.putParcelable(MyTodoContentProvider.CONTENT_ITEM_TYPE, todoUri);
}

@Override
protected void onPause() {
    super.onPause();
    saveState();
}

private void saveState() {
    String category = (String) mCategory.getSelectedItem();
    String summary = mTitleText.getText().toString();
    String description = mBodyText.getText().toString();
    String satze = mSatzText.getText().toString();

    // Only save if either summary or description
    // is available

    if (description.length() == 0 && summary.length() == 0 && satze.length() == 0) {
        return;
    }

    ContentValues values = new ContentValues();
    values.put(TodoTable.COLUMN_CATEGORY, category);
    values.put(TodoTable.COLUMN_SUMMARY, summary);
    values.put(TodoTable.COLUMN_DESCRIPTION, description);
    values.put(TodoTable.COLUMN_SATZE, satze);

    if (todoUri == null) {
        // New todo
        todoUri = getContentResolver().insert(MyTodoContentProvider.CONTENT_URI, values);
    } else {
        // Update todo
        getContentResolver().update(todoUri, values, null, null);
    }
}

private void makeToast() {
    Toast.makeText(TodoDetailActivity.this, "Please maintain a summary",
            Toast.LENGTH_LONG).show();
}} 
```

TodosOverviewAktivity.java：

```
/*
 * TodosOverviewActivity displays the existing todo items
 * in a list
 * 
 * You can create new ones via the ActionBar entry "Insert"
 * You can delete existing ones via a long press on the item
 */

@TargetApi(11)
public class TodosOverviewActivity extends ListActivity implements
    LoaderManager.LoaderCallbacks<Cursor> {
private static final int ACTIVITY_CREATE = 0;
private static final int ACTIVITY_EDIT = 1;
private static final int DELETE_ID = Menu.FIRST + 1;
// private Cursor cursor;
private SimpleCursorAdapter adapter;

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.todo_list);
    this.getListView().setDividerHeight(1);
    fillData();
    registerForContextMenu(getListView());
}

// Create the menu based on the XML defintion
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.listmenu, menu);
    return true;
}

// Reaction to the menu selection
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.insert:
        createTodo();
        return true;
    }
    return super.onOptionsItemSelected(item);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case DELETE_ID:
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
                .getMenuInfo();
        Uri uri = Uri.parse(MyTodoContentProvider.CONTENT_URI + "/"
                + info.id);
        getContentResolver().delete(uri, null, null);
        fillData();
        return true;
    }
    return super.onContextItemSelected(item);
}

private void createTodo() {
    Intent i = new Intent(this, TodoDetailActivity.class);
    startActivityForResult(i, ACTIVITY_CREATE);
}

// Opens the second activity if an entry is clicked
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(this, TodoDetailActivity.class);
    Uri todoUri = Uri.parse(MyTodoContentProvider.CONTENT_URI + "/" + id);
    i.putExtra(MyTodoContentProvider.CONTENT_ITEM_TYPE, todoUri);

    // Activity returns an result if called with startActivityForResult
    startActivityForResult(i, ACTIVITY_EDIT);
}

// Called with the result of the other activity
// requestCode was the origin request code send to the activity
// resultCode is the return code, 0 is everything is ok
// intend can be used to get data
@Override
protected void onActivityResult(int requestCode, int resultCode,
        Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);
}

private void fillData() {

    // Fields from the database (projection)
    // Must include the _id column for the adapter to work
    String[] from = new String[] { TodoTable.COLUMN_SUMMARY };
    // Fields on the UI to which we map
    int[] to = new int[] { R.id.label };

    getLoaderManager().initLoader(0, null, this);
    adapter = new SimpleCursorAdapter(this, R.layout.todo_row, null, from,
            to, 0);

    setListAdapter(adapter);
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.add(0, DELETE_ID, 0, R.string.menu_delete);
}

// Creates a new loader after the initLoader () call

@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String[] projection = { TodoTable.COLUMN_ID_U, TodoTable.COLUMN_SUMMARY };
    CursorLoader cursorLoader = new CursorLoader(this,
            MyTodoContentProvider.CONTENT_URI, projection, null, null, null);
    return cursorLoader;
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    adapter.swapCursor(data);
}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
    // data is not available anymore, delete reference
    adapter.swapCursor(null);
}} 
```

MyTodoContentProvider.java：

```
public class MyTodoContentProvider extends ContentProvider {

// database
private TodoDatabaseHelper database;

// Used for the UriMacher
private static final int TODOS = 10;
private static final int TODO_ID = 20;

private static final String AUTHORITY = "de.vogella.android.todos.contentprovider";

private static final String BASE_PATH = "todos";
public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY
        + "/" + BASE_PATH);

public static final String CONTENT_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE
        + "/todos";
public static final String CONTENT_ITEM_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE
        + "/todo";

private static final UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
static {
    sURIMatcher.addURI(AUTHORITY, BASE_PATH, TODOS);
    sURIMatcher.addURI(AUTHORITY, BASE_PATH + "/#", TODO_ID);
}

@Override
public boolean onCreate() {
    database = new TodoDatabaseHelper(getContext());
    return false;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {

    // Uisng SQLiteQueryBuilder instead of query() method
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

    // Check if the caller has requested a column which does not exists
    checkColumns(projection);

    // Set the table
    queryBuilder.setTables(TodoTable.TABLE_TODO);

    int uriType = sURIMatcher.match(uri);
    switch (uriType) {
    case TODOS:
        break;
    case TODO_ID:
        // Adding the ID to the original query
        queryBuilder.appendWhere(TodoTable.COLUMN_ID_U + "="
                + uri.getLastPathSegment());
        break;
    default:
        throw new IllegalArgumentException("Unknown URI: " + uri);
    }

    SQLiteDatabase db = database.getWritableDatabase();
    Cursor cursor = queryBuilder.query(db, projection, selection,
            selectionArgs, null, null, sortOrder);
    // Make sure that potential listeners are getting notified
    cursor.setNotificationUri(getContext().getContentResolver(), uri);

    return cursor;
}

@Override
public String getType(Uri uri) {
    return null;
}

@Override
public Uri insert(Uri uri, ContentValues values) {
    int uriType = sURIMatcher.match(uri);
    SQLiteDatabase sqlDB = database.getWritableDatabase();
    int rowsDeleted = 0;
    long id = 0;
    switch (uriType) {
    case TODOS:
        id = sqlDB.insert(TodoTable.TABLE_TODO, null, values);
        break;
    default:
        throw new IllegalArgumentException("Unknown URI: " + uri);
    }
    getContext().getContentResolver().notifyChange(uri, null);
    return Uri.parse(BASE_PATH + "/" + id);
}

@Override
public int delete(Uri uri, String selection, String[] selectionArgs) {
    int uriType = sURIMatcher.match(uri);
    SQLiteDatabase sqlDB = database.getWritableDatabase();
    int rowsDeleted = 0;
    switch (uriType) {
    case TODOS:
        rowsDeleted = sqlDB.delete(TodoTable.TABLE_TODO, selection,
                selectionArgs);
        break;
    case TODO_ID:
        String id = uri.getLastPathSegment();
        if (TextUtils.isEmpty(selection)) {
            rowsDeleted = sqlDB.delete(TodoTable.TABLE_TODO,
                    TodoTable.COLUMN_ID_U + "=" + id, 
                    null);
        } else {
            rowsDeleted = sqlDB.delete(TodoTable.TABLE_TODO,
                    TodoTable.COLUMN_ID_U + "=" + id 
                    + " and " + selection,
                    selectionArgs);
        }
        break;
    default:
        throw new IllegalArgumentException("Unknown URI: " + uri);
    }
    getContext().getContentResolver().notifyChange(uri, null);
    return rowsDeleted;
}

@Override
public int update(Uri uri, ContentValues values, String selection,
        String[] selectionArgs) {

    int uriType = sURIMatcher.match(uri);
    SQLiteDatabase sqlDB = database.getWritableDatabase();
    int rowsUpdated = 0;
    switch (uriType) {
    case TODOS:
        rowsUpdated = sqlDB.update(TodoTable.TABLE_TODO, 
                values, 
                selection,
                selectionArgs);
        break;
    case TODO_ID:
        String id = uri.getLastPathSegment();
        if (TextUtils.isEmpty(selection)) {
            rowsUpdated = sqlDB.update(TodoTable.TABLE_TODO, 
                    values,
                    TodoTable.COLUMN_ID_U + "=" + id, 
                    null);
        } else {
            rowsUpdated = sqlDB.update(TodoTable.TABLE_TODO, 
                    values,
                    TodoTable.COLUMN_ID_U + "=" + id 
                    + " and " 
                    + selection,
                    selectionArgs);
        }
        break;
    default:
        throw new IllegalArgumentException("Unknown URI: " + uri);
    }
    getContext().getContentResolver().notifyChange(uri, null);
    return rowsUpdated;
}

private void checkColumns(String[] projection) {
    String[] available = { TodoTable.COLUMN_CATEGORY,
            TodoTable.COLUMN_SUMMARY, TodoTable.COLUMN_DESCRIPTION, TodoTable.COLUMN_SATZE, TodoTable.COLUMN_ID_U };
    if (projection != null) {
        HashSet<String> requestedColumns = new HashSet<String>(Arrays.asList(projection));
        HashSet<String> availableColumns = new HashSet<String>(Arrays.asList(available));
        // Check if all columns which are requested are available
        if (!availableColumns.containsAll(requestedColumns)) {
            throw new IllegalArgumentException("Unknown columns in projection");
        }
    }
}

} 
```

TodoDatabaseHelper.java：

```
public class TodoDatabaseHelper extends SQLiteOpenHelper {

private static final String DATABASE_NAME = "todotable.db";
private static final int DATABASE_VERSION = 1;

public TodoDatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Method is called during creation of the database
@Override
public void onCreate(SQLiteDatabase database) {
    TodoTable.onCreate(database);
}

// Method is called during an upgrade of the database,
// e.g. if you increase the database version
@Override
public void onUpgrade(SQLiteDatabase database, int oldVersion,
        int newVersion) {
    TodoTable.onUpgrade(database, oldVersion, newVersion);
}
} 
```

我复制的大部分代码：[http ://www.vogella.com/articles/AndroidSQLite/article.html#todo](http://www.vogella.com/articles/AndroidSQLite/article.html#todo)

但我收到错误消息（LogCat）：

**java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.de.vogella.android.todos/com.example.de.vogella.android.todos.TodoDetailActivity}：java.lang.IllegalArgumentException：列“satze”确实不存在**

任何人都可以在代码中找到错误吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T16:59:40.303

这是你的错误：

```
private void fillData(Uri uri) {
    String[] projection = { TodoTable.COLUMN_SUMMARY,
            TodoTable.COLUMN_DESCRIPTION, TodoTable.COLUMN_CATEGORY }; //add satze here!
    Cursor cursor = getContentResolver().query(uri, projection, null, null,
            null);
    if (cursor != null) {
        cursor.moveToFirst();
        String category = cursor.getString(cursor
                .getColumnIndexOrThrow(TodoTable.COLUMN_CATEGORY));

        for (int i = 0; i < mCategory.getCount(); i++) {

            String s = (String) mCategory.getItemAtPosition(i);
            if (s.equalsIgnoreCase(category)) {
                mCategory.setSelection(i);
            }
        } 

        mTitleText.setText(cursor.getString(cursor
                .getColumnIndexOrThrow(TodoTable.COLUMN_SUMMARY)));
        mBodyText.setText(cursor.getString(cursor
                .getColumnIndexOrThrow(TodoTable.COLUMN_DESCRIPTION)));
        mSatzText.setText(cursor.getString(cursor
                .getColumnIndexOrThrow(TodoTable.COLUMN_SATZE)));//you don't have satze in projection!

        // Always close the cursor
        cursor.close();
    }
} 
```

您正在尝试阅读`TodoTable.COLUMN_SATZE`，但您在投影中忘记了它：请更改此行：

```
String[] projection = { TodoTable.COLUMN_SUMMARY,
            TodoTable.COLUMN_DESCRIPTION, TodoTable.COLUMN_CATEGORY }; 
```

进入这个：

```
String[] projection = { TodoTable.COLUMN_SUMMARY,
                TodoTable.COLUMN_DESCRIPTION, TodoTable.COLUMN_CATEGORY, TodoTable.COLUMN_SATZE }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T14:46:40.447

在您的`CREATE TABLE`声明中，您的列名和列类型之间需要空格。

# actionscript-3 - AS3 中的“Endless Runner”游戏背景

> ID：11671851
> 
> 赞同：0
> 
> 时间：2012-07-26T14:43:26.057
> 
> 标签：actionscript-3

我想做一个“无尽的跑步者”游戏。所以，我需要一个随机滚动的背景来充当障碍物、平台、地面和背景。它需要是随机的，而不是一遍又一遍地重复相同的背景。

我想做的背景对于瓷砖来说太复杂了（或者至少我不这么认为）。它将与此游戏类似的复杂性：[http ://www.mochigames.com/game/flood-runner-3/](http://www.mochigames.com/game/flood-runner-3/)

我将如何进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:11:31.103

那里有很多教程，你可以先用“横向滚动游戏”或“平台游戏”尝试谷歌：

[http://as3gametuts.com/2011/11/11/platformer-1/](http://as3gametuts.com/2011/11/11/platformer-1/)

[http://www.youtube.com/watch?v=k38YrVxXkSM](http://www.youtube.com/watch?v=k38YrVxXkSM)

ETC...

在我看来，[马戏团引擎](http://citrusengine.com/)

是 as3 平台游戏的绝佳引擎。

# postgresql - Socket 模块不导出 postgres 9.1“IN6ADDR_ANY”

> ID：11671854
> 
> 赞同：1
> 
> 时间：2012-07-26T14:43:42.320
> 
> 标签：postgresql, installation

我搜索但没有找到为什么我在安装时出错的答案：

```
$ sudo aptitude install postgresql-9.1 postgresql-contrib-9.1 python-pygresql libpq-dev
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Reading extended state information      
Initialising package states... Done
The following NEW packages will be installed:
  libossp-uuid16{a} postgresql-9.1 postgresql-common{a} postgresql-contrib-9.1 python-pygresql 
0 packages upgraded, 5 newly installed, 0 to remove and 32 not upgraded.
Need to get 0B/7,463kB of archives. After unpacking 21.2MB will be used.
Do you want to continue? [Y/n/?] Y
Writing extended state information... Done
Preconfiguring packages ...
Selecting previously deselected package libossp-uuid16.
(Reading database ... 414497 files and directories currently installed.)
Unpacking libossp-uuid16 (from .../libossp-uuid16_1.6.2-1ubuntu1_amd64.deb) ...
Selecting previously deselected package postgresql-common.
Unpacking postgresql-common (from .../postgresql-common_133~lucid_all.deb) ...
Adding `diversion of /usr/bin/pg_config to /usr/bin/pg_config.libpq-dev by postgresql-common'
Selecting previously deselected package postgresql-9.1.
Unpacking postgresql-9.1 (from .../postgresql-9.1_9.1.4-1~lucid4_amd64.deb) ...
Selecting previously deselected package postgresql-contrib-9.1.
Unpacking postgresql-contrib-9.1 (from .../postgresql-contrib-9.1_9.1.4-1~lucid4_amd64.deb) ...
Selecting previously deselected package python-pygresql.
Unpacking python-pygresql (from .../python-pygresql_1%3a4.0-2_amd64.deb) ...
Processing triggers for ureadahead ...
Processing triggers for man-db ...
Setting up libossp-uuid16 (1.6.2-1ubuntu1) ...

Setting up postgresql-common (133~lucid) ...
"IN6ADDR_ANY" is not exported by the Socket module
Can't continue after import errors at /usr/share/postgresql-common/PgCommon.pm line 19
BEGIN failed--compilation aborted at /usr/share/postgresql-common/PgCommon.pm line 19.
Compilation failed in require at /usr/share/postgresql-common/run-upgrade-scripts line 18.
BEGIN failed--compilation aborted at /usr/share/postgresql-common/run-upgrade-scripts line 18.
"IN6ADDR_ANY" is not exported by the Socket module
Can't continue after import errors at /usr/share/postgresql-common/PgCommon.pm line 19
BEGIN failed--compilation aborted at /usr/share/postgresql-common/PgCommon.pm line 19.
Compilation failed in require at /usr/share/postgresql-common/pg_checksystem line 20.
BEGIN failed--compilation aborted at /usr/share/postgresql-common/pg_checksystem line 20.

Setting up postgresql-9.1 (9.1.4-1~lucid4) ...
**"IN6ADDR_ANY" is not exported by the Socket module
Can't continue after import errors at /usr/share/postgresql-common/PgCommon.pm line 19
BEGIN failed--compilation aborted at /usr/share/postgresql-common/PgCommon.pm line 19.
Compilation failed in require at /usr/bin/pg_createcluster line 19.
BEGIN failed--compilation aborted at /usr/bin/pg_createcluster line 19.
Error: could not create default cluster. Please create it manually with

  pg_createcluster 9.1 main --start

or a similar command (see 'man pg_createcluster').**
update-alternatives: using /usr/share/postgresql/9.1/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode.

Setting up postgresql-contrib-9.1 (9.1.4-1~lucid4) ...

Setting up python-pygresql (1:4.0-2) ...

Processing triggers for libc-bin ...
ldconfig deferred processing now taking place
Processing triggers for python-central ...
Reading package lists... Done             
Building dependency tree       
Reading state information... Done
Reading extended state information      
Initialising package states... Done
Writing extended state information... Done 
```

我不知道什么是 IN6ADDR_ANY 以及如何将其设置为由 Socket 模块导出。在 sudo add-apt-repository ppa:pitti/postgresql 之后，我尝试在 ubuntu 10.04 上安装它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T20:40:15.960

问题是Socket模块没有更新，老版本的Socket没有导出IN6ADDR_ANY。（参见 /usr/lib/perl/5.12.4/Socket.pm）。我机器上的版本是 1.87_01，那个版本不导出 IN6ADDR_ANY。最新版本是 2.002。

问题可能是有人在打包新的 postgresql-9.1 dpkg 时忘记输入 Socket 2.002 作为依赖项。

修复方法是更新 Socket 模块：

```
$ sudo apt-get install libsocket-perl 
```

如果这对您不起作用，请尝试通过 cpan 升级 Socket：

```
$ sudo apt-get install cpan
$ sudo cpan Socket 
```

编辑：

如果 Socket 无法通过上述命令安装，并且出现消息“BEGIN failed--compilation aborted at Makefile.PL line 6”，请运行：

```
$ sudo cpan ExtUtils::Constant 
```

这将为您提供 ExtUtils::Constant v0.23，这是更新 Socket 所必需的。然后您应该能够运行：

```
$ sudo cpan Socket 
```

没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:19:08.563

我使用了其他 ppa 并且它有效：

ppa:flexiondotorg/postgres

要删除旧的，我使用 ppa-purge 这种方式：

```
wget http://launchpadlibrarian.net/53004738/ppa-purge_0%2Bbzr46.1~lucid1_all.deb &&
sudo dpkg -i ppa-purge_0+bzr46.1~lucid1_all.deb
sudo ppa-purge ppa:pitti/postgresql 
```

添加新的ppa：

```
sudo add-apt-repository ppa:flexiondotorg/postgres
sudo apt-get update 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T20:20:01.977

为了解决这个问题，我将 postgresql-client-common 和 postgresql-common 降级回之前的“130~lucid”版本。

幸运的是，这些包在我的 apt 存档中，位于我机器上的 /var/cache/apt/archives（运行 Ubuntu 10.10）。

只需使用 dpkg 安装它们

```
sudo dpkg -i postgresql-client-common_130~lucid_all.deb
sudo dpkg -i postgresql-common_130~lucid_all.deb 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T07:54:48.640

有趣的是，当我从 postgres 8.4 升级到 9.1 时，这件事发生在我身上的同一天发生在其他人身上。我遇到了完全相同的问题，并在正确的时间在这里找到了解决方案！

我 # /usr/share/postgresql-common/PgCommon.pm 中的第 19 行和第 684 行到第 687 行，就像某人（Billy Monk）昨天写的一样（显然现在更改或删除了他的帖子）。

它奏效了。

我现在将尝试更新套接字的解决方案。

非常感谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T12:54:22.763

这对我有用（在 Ubuntu 10.04LTS 上）：

```
$ sudo apt-get update
$ sudo apt-get install libcpan-mini-perl
$ sudo cpan ExtUtils::Constant
$ sudo cpan Socket 
```

# salesforce - 使用 Salesforce 触发器退回电子邮件处理邮箱已满

> ID：11671856
> 
> 赞同：2
> 
> 时间：2012-07-26T14:43:46.150
> 
> 标签：salesforce

我正在尝试通过创建一个触发器来解决基于“邮箱已满”的退回电子邮件问题，该触发器在邮件包含“邮箱已满”时重新发送该邮件。

我面临的问题是我需要将重新发送的次数限制为 3 次。一旦收到退回的电子邮件，我现在就会不断重新发送电子邮件。

我的触发器是

```
trigger trgBouncedEmails on EmailMessage (after insert) {

  for(EmailMessage myEmail: trigger.New) {

    //mail box full bounced email 
    if (myEmail.HtmlBody.contains('full'))
    {

        Case[] parentCase = [Select c.Id from Case c where c.Id =: myEmail.ParentId];

         if (myEmail.Subject.contains('Financial Review'))
                parentCase[0].Resend_Email_Send__c = true;  // this will trigger a workflow to send the email again.

          Update parentCase;
              }
      }
} 
```

如何限制重新发送，有没有办法可以在执行“更新 parentCase”之前设置等待时间

有没有更好的方法来解决这个问题，知道我有不同类型的电子邮件，每个都有不同的模板和不同的目的。

**编辑** 系统应该以24小时的频率自动重新发送电子邮件3次，然后在24小时后停止重新发送。我的触发器无限期地重新发送，我试图找到一种等待的方法，这样它只能在 24 小时内发送 3 次，比如每 8 小时一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T15:03:05.163

@grigriforce 击败了我-我还建议使用字段来计算重试次数，而不是简单的布尔值。这是一个“大型”触发器，其逻辑与您发布的触发器基本相同：

```
trigger trgBouncedEmails on EmailMessage (after insert) {
    List<Id> parentCaseIds = new List<Id>();
    for ( EmailMessage myEmail : trigger.New ) {
        // mail box full bounced email for Financial Review emails
        if ( myEmail.HtmlBody.contains('full') && myEmail.Subject.contains('Financial Review') )
            parentCaseIds.add(myEmail.ParentId);
    }
    Case[] parentCases = [select c.Id from Case c where c.Id in :parentCaseIds];
    for ( Case c : parentCases ) {
        c.Resend_Email_Count__c += 1;  // this will trigger workflow to send the email again
        c.Resend_Email_Time__c = System.now();  // keep track of when it was last retried
    }
    update parentCases;
} 
```

更新以在 24 小时内平均分配电子邮件：

重新设计您的工作流程以确保自`Resend_Email_Time__c`上次设置以来已经过了 8 小时，然后安排 Apex 作业每小时运行一次以获取需要重新发送其电子邮件的符合条件的案例，并对其调用更新以确保工作流程不会不开火不要太久：

```
global class ResendCaseEmails implements Schedulable {
    global void execute(SchedulableContext sc) {
        Contact[] cs = [select id, Resend_Email_Count__c, Resend_Email_Time__c from Contact where Resend_Email_Count__c < 4];
        List<Contact> ups = new List<Contact>();
        for ( Contact c : cs ) {
            if ( c.Resend_Email_Time__c != null && c.Resend_Email_Time__c.addHours(8) < System.now() )
                ups.add(c);
        }
        update ups;
    }
} 
```

**请注意，在实现 Schedulable 的类中包含此代码不是最佳实践 - 此代码理想情况下位于该类调用的另一个类中`ResendCaseEmails`。

您可以通过从开发人员控制台调用此代码来安排此作业每小时运行一次：

```
ResendCaseEmails sched = new ResendCaseEmails();
String cron = '0 0 * * * ?';
System.schedule('Resend Case Email Job', cron, sched); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:51:59.530

您可以简单地将案例上的重新发送布尔值更改为发送尝试的整数计数，并让您的工作流规则仅在该计数小于 3 时重新发送。

```
Case[] parentCase = [Select c.Id, c.Resend_Email_Count__c from Case c where c.Id =: myEmail.ParentId];
if (myEmail.Subject.contains('Financial Review'))
            parentCase[0].Resend_Email_Count__c += 1;  // this will trigger a workflow to send the email again.

      Update parentCase; 
```

另外，我假设您简化了触发器以显示问题，但如果不是，您真的需要将其放大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T11:29:56.033

所以，这就是你想要发生的事情（如果我错了，请随时纠正我）。您发送一封电子邮件，如果它被退回，您希望每 8 小时重新发送一封电子邮件。重发次数最多应为 3 次。

在这种情况下，我不会只使用触发器。相反，我会设计一个解决方案，使用触发器、调度程序，也许还有一个自定义表格来跟踪退回的电子邮件。

让我们将此表/对象称为“退回电子邮件跟踪器”。它将具有以下 3 个字段：

1.  电子邮件名称（电子邮件的一些独特描述）
2.  电子邮件状态（已发送、退回、重新发送、失败）
3.  重发次数
4.  已发送电子邮件时间戳

如果并且当发送电子邮件时，您将使用状态设置为“已发送”和“已发送电子邮件”的触发器在此表中创建一个条目。如果电子邮件退回，另一个触发器会将表中的条目“更新”为将记录的状态更改为“已退回”。

调度程序将定期运行，它将从此新表中检索状态等于“退回”的所有记录，并使用“已发送电子邮件时间戳”中的值检查上次发送电子邮件的时间。它将根据发送的时间执行以下操作，并重新发送计数。

*   如果重新发送计数小于 3，并且最后一封电子邮件的发送时间超过或等于 8 小时前，请从调度程序发送另一封电子邮件。将记录的状态更改为“已发送”。
*   如果重发次数大于 3，并且状态为“Bounced”，则将状态更改为“Failed”。
*   如果重新发送的次数少于 3，但最后一封电子邮件是在 8 小时前发送的，则不要执行任何操作。

我知道这是一个很大的努力，我相信它可能需要更多的思考，但这将提供一个强大的框架来跟踪和重新发送退回的电子邮件。希望这可以帮助！

阿努普

# c++ - 如何将字符串解析为 ctime 结构？

> ID：11671859
> 
> 赞同：1
> 
> 时间：2012-07-26T14:43:58.243
> 
> 标签：c++, c, time, strftime, ctime

有没有一种既定的方法可以将字符串解析为时间结构？

我最理想的做法是`strftime(...)`与

我不希望通过包含 DateTime 类（例如 Boost 或 .NET 中的类）来增加额外的开销

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T14:48:16.847

对应的解析字符串的方法`struct tm *`是[`strptime`](http://pubs.opengroup.org/onlinepubs/007904975/functions/strptime.html).

不幸的是，这不是标准 C 运行时库的一部分，也不存在于例如 windows 上，但您可以重用 BSD 许可的版本，例如[这个](http://social.msdn.microsoft.com/forums/en-US/vcgeneral/thread/25a654f9-b6b6-490a-8f36-c87483bb36b7).

# jquery - 单击时重复执行操作

> ID：11671863
> 
> 赞同：0
> 
> 时间：2012-07-26T14:44:04.533
> 
> 标签：jquery, click

我不知道如何用语言表达，所以请多多包涵。

我有一个虚拟键盘。其中有一个“退格”按钮（div），每次单击都会删除一个字符。我希望它更现实。所以问题是“如果用户按下鼠标，我如何删除多个字符（即连续按下鼠标并且用户没有将手指从鼠标上移开）”

```
<div class="dialpadnumbers">1</div>
<div class="dialpadnumbers">2</div>
<div class="dialpadnumbers">3</div>
<div class="dialpadnumbers">4</div>
<div class="dialpadnumbers">5</div>
<div class="dialpadnumbers">6</div>
<div class="dialpadnumbers">7</div>
<div class="dialpadnumbers">8</div>
<div class="dialpadnumbers">9</div>
<div class="dialpadnumbers">0</div>
<div id="dialpadbackspace" class="dialpadnumbers">Backspace</div>
<div id="dialpadcall" class="dialpadnumbers">CALL</div>

/*also the jquery for it(the one ive been using till now is),caret is the fn          
for setting caret position*/
$("#dialpadbackspace").click(function() {
    $('#dialpadentry').focus();
    var init = $("#dialpadentry").val();
    var start = $("#dialpadentry")[0].selectionStart;
    var stop = $("#dialpadentry")[0].selectionEnd;
    if (start == stop) {
        var substr = init.substring(0, start);
        var newsubstr = init.substring(0, start - 1);
        var finale = init.replace(substr, newsubstr);
        $("#dialpadentry").val(finale);
        $('#dialpadentry').caret(start - 1);
    } else {
        var substr = init.substring(start, stop);
        var finale = init.replace(substr, '');
        $("#dialpadentry").val(finale);
        $('#dialpadentry').caret(start);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:53:30.853

查看[setInterval](https://developer.mozilla.org/en/DOM/window.setInterval)。`mousedown`将事件绑定到`setInterval`，将 ID 存储在某处，并将`mouseup`事件绑定到`clearInterval`。

一定要覆盖边缘情况。例如，如果用户单击您的退格键，然后将鼠标拖走而不抬起鼠标按钮。 `onMouseOut`将需要绑定到`clearInterval`. 可能还有其他边缘情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:01:13.340

尝试这个

```
$(function () {
    var doBackspace;
    $("#dialpadbackspace").mousedown(function(e) {
        doBackspace = setInterval('$("#dialpadentry").val($("#dialpadentry").val().substr(0, $("#dialpadentry").val().length-1));',100);
    });
    $("#dialpadbackspace").mouseup(function(e) {
        clearInterval(doBackspace);
    });
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T15:29:00.193

基本上在 mousedown 开始一个间隔，它每 x 毫秒调用一个函数，从表盘中删除一个字符。你已经得到了两个很好的答案，所以我将发布一个我做过的快速 jsfiddle。

[http://jsfiddle.net/EB29c/](http://jsfiddle.net/EB29c/)

# css - 我不知道为什么会出现滚动条

> ID：11671864
> 
> 赞同：1
> 
> 时间：2012-07-26T14:44:08.153
> 
> 标签：css, scrollbar, responsive-design, horizontal-scrolling

在我第一次尝试响应式网页设计时，我遇到了一个奇怪的问题。当我将浏览器的大小调整到 615 像素或以下时，会出现一个水平滚动条。我不确定是什么因素导致了这种情况。我尝试使用在每个元素周围放置边框

```
* {
    border:1px solid #FFF;
} 
```

帮助我可视化元素边缘的位置，但我没有看到任何超出窗口边界的边框。

有人可以看看我的网站并给我一些见解吗？[http://www.ritualbliss.ca](http://www.ritualbliss.ca)

谢谢！

编辑：所以我只在 Firefox 中获得滚动条。Chrome 工作正常，桌面版 Safari，但在我的 iPhone 上它水平滚动。

编辑：该网站适用于合法的按摩业务，但有些人可能会考虑图片 NSFW

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:54:25.627

德文，

尝试使用 Firebug for Firefox、IE 开发人员工具或 Chrome 开发人员工具等工具。我确信 Safari 和 Opera 也有类似的工具。这些东西将使您能够突出显示和查看页面上每个可见 HTML 元素的各种属性，包括 Javascript 和 CSS 信息。

要考虑的另一件事是不要在 CSS 中使用 * 选择器。我不确定你为什么要在页面上的每个元素周围加上边框，因为对我来说，这看起来并不吸引人。边框样式属性将边框的粗细添加到它所应用的任何尺寸。因此，在您的情况下，页面中的每个元素的高度和宽度都添加了 2px，甚至是“html”元素。这可能就是您有滚动条但无法分辨额外像素在哪里的原因。

另外，您是否有任何将宽度或最小宽度设置为 617 像素的 CSS 样式？还是共享同一区域并加起来最多 617 个像素的元素的组合？也许是一个包含不可收缩列的表？

有很多东西要看，而且你的 URL 看起来可能是色情或其他东西，所以我不能在工作时去那里检查...

祝你好运，

*   马特

***编辑***

我和 firebug 玩了几分钟，同意 Ruben 的观点，即处理溢出是个好主意。虽然我认为设置应该在正文而不是#content上。

尝试这个：

```
body { overflow-x: hidden; } 
```

就像鲁本的回答一样，它隐藏了溢出，但如果人们真的缩小了浏览器的范围，你仍然可以获得垂直滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:04:26.370

当它是 nsfw 时，你能警告我们吗：s 使用这个 css：

```
#content { overflow: hidden } 
```

不是最好的解决方案，但你必须使用萤火虫来找出突出的
填充和边框也会增加元素的宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:45:51.520

css3 box-sizing:border-box solved this one.

# java - 进行 InApp 计费时如何保护 Google Play 公钥

> ID：11671865
> 
> 赞同：42
> 
> 时间：2012-07-26T14:44:12.177
> 
> 标签：java, android, google-play

实际上，这对于保护公钥有点愚蠢（那么公钥的定义是什么？），但根据[Google 的文档](http://developer.android.com/guide/google/play/billing/billing_best_practices.html)：

> 为了保护您的公钥免受恶意用户和黑客的攻击，请勿将其作为文字字符串嵌入任何代码中。相反，在运行时从片段构造字符串或使用位操作（例如，与其他字符串进行异或）来隐藏实际密钥。密钥本身不是秘密信息，但您不想让黑客或恶意用户轻易地用另一个密钥替换公钥。

有什么推荐的方法吗？

我知道有很多方法可以做到这一点，我只是不想遵循人们过去处理*密码哈希*的方式（例如 md5、sha1 等），我想知道上述用例中的最佳实践。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-01T09:16:47.927

这在这里出现了很多 :) 您引用的段落背后的想法是，为了确保应用内结算安全，您需要验证交易签名。这些是使用与您的开发者帐户相关联的私钥签名的。密钥位于 Google 的服务器上，因此可以相当安全地假设没有其他人可以用它签署数据。要验证它，您需要您的公钥，您可以从开发者控制台复制它。如果有人在您的应用中替换了它，他们可能会欺骗它接受来自未经授权来源的应用内计费交易，因为如果他们植入公钥，他们可能还会控制相应的私钥。然而，在实践中，简单地在正确的位置修改代码以始终返回 true for或您可能拥有的类似方法要容易得多`isLicensed()`，`hasItem()`而没有人这样做。

当然，保护密钥的最佳方法是在您的应用程序中完全不使用密钥。将所有事务验证逻辑移至您的服务器，并使用 HTTPS 连接到它。正确验证证书链以确保您正在与自己的服务器通信。否则，有人可能会弄乱 DNS 并欺骗您的应用程序连接到他们自己的服务器。几周前宣布了针对 iOS 购买的类似攻击。

下一个最好的办法是以某种方式混淆密钥，并将其包含在您的应用程序中。这样做的好处是您不需要服务器，但缺点是如果有人足够坚定，他们会弄清楚的，因为他们总是可以反转您的应用程序的字节码。所以你最好的办法是想出你自己的原始方法来做这件事，不会出现在公共论坛上:) 为了让它更难一点，你可以在本机代码中实现验证部分，这更难（但不是不可能）分析。尽管如此，如上所述，在正确的位置修补字节码比尝试替换公钥要容易得多，因此大多数破解者都会这样做。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-07-30T06:05:10.607

至少做简单的文本转换。这个想法是普通的 dex 反汇编不会泄露你的公钥。

这是进行简单字符串编码/解码的函数示例：

```
/**
 * Simple String transformation by XOR-ing all characters by value.
 */
static String stringTransform(String s, int i) {
   char[] chars = s.toCharArray();
   for(int j = 0; j<chars.length; j++)
      chars[j] = (char)(chars[j] ^ i);
   return String.valueOf(chars);
} 
```

然后您的私钥作为编码字符串存储在源中（使用此函数对其进行编码），并在运行时使用相同的函数进行解码。这是谷歌建议的一种“异或”方法。

你自己制作'i'参数，任何随机的东西，如0x27或其他都可以。如果您以这种方式隐藏更多字符串，请为每个转换使用不同的“i”。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-05T16:18:50.850

作为手动混淆密钥的替代方法，您还可以让混淆器自动进行。[ProGuard](http://proguard.sourceforge.net/)是 Android SDK 的一部分，但它主要混淆类/字段/方法名称，而不是字符串。它专门用于 Android 的兄弟[DexGuard](http://www.saikoa.com/dexguard)可以添加更多的混淆层，应用字符串加密、类加密和反射。它不是免费的，但它可以节省时间，而且可能比手动操作更有效。

（我是 ProGuard 和 DexGuard 的开发者）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-26T14:55:54.283

将您的公钥存储在服务器端，一旦您从 google play 获得响应以验证密钥，就会将该响应发送到服务器并在服务器上执行您的操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-16T16:51:50.703

公钥是 base64 编码的 ( `[a-zA-Z0-9+/]`)，因此您可以轻松避免需要转义混淆字符串，因为这是 @PointerNull 解决方案中的一个烦人问题。

相反，您可以通过首先将相关字符转换为 6 位 int 来执行混淆。然后进行位操作（例如 XOR-ing），然后转换回 base64 编码的字符。保证不需要字符转义。

# c# - 如何在不自动回发的情况下为数据库和网格添加价值？

> ID：11671867
> 
> 赞同：0
> 
> 时间：2012-07-26T14:44:14.003
> 
> 标签：c#, asp.net, c#-4.0

一个页面中有两个`Combobox`s，一个`button`和一个`GridView`。

当我单击按钮时，`Combobox`s 的选定项目应插入到`GridView`数据库中，同时在数据库中更新。

当我单击按钮时，它不应该执行回发。用户应该能够在点击提交按钮时添加很多记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:49:36.813

这是您需要做的：

1.  设置脚本函数调用`OnClientClick`并从此方法返回 false。 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx)
2.  在此客户端方法中，使用 JQuery AJAX 调用 Web 方法来更新数据库。 [http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)
3.  使用操纵 DOM 的 jquery 方法向表中添加一行。 [在jQuery中添加表格行](https://stackoverflow.com/questions/171027/add-table-row-in-jquery)

当然你可以使用 an`UpdatePanel`但你必须在里面插入组合和网格，所以这不会为你节省服务器 CPU 和流量。

# scala - 如何从 Scala 中的命令行读取 int 列表

> ID：11671873
> 
> 赞同：1
> 
> 时间：2012-07-26T14:44:25.607
> 
> 标签：scala

如何从命令行读取整数列表？

像“1 2 3 4 5\n”

返回的例外类型是 List[Int]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T14:53:02.820

保存这个 Scala 脚本

```
val xs: List[Int] = args(0).split(' ').toList.map(_.toInt)
println(xs) 
```

作为`split.scala`并运行它（在 Windows 上）

```
scala.bat split.scala "1 2 3 4 5" 
```

输出是

```
List(1, 2, 3, 4, 5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:15:13.910

这是一个解决方案，您可以在其中过滤以逃避`\n`.

```
val input = "1 2 3 4 5\n"
val myList = input.filter(_!='\n').split(' ').map(_.toInt).toList 
```

# android - 根据从列表视图中选择的行解析网页

> ID：11671875
> 
> 赞同：1
> 
> 时间：2012-07-26T14:44:29.540
> 
> 标签：android, list, parsing

我正在开发一个解析此网页[http://www.lawncare.ncsu.edu/RSSFeed.aspx](http://www.lawncare.ncsu.edu/RSSFeed.aspx)的 Android 项目，并在第一页中仅将标题和与之关联的图像显示为列表视图。我已经做到了这一点。现在，当用户单击选项时，我只想解析与 onclick 关联的文章。现在我只能解析整个网页。我该怎么做呢？有什么建议么？

# facebook - 访问仍然需要用户令牌的“公共”Facebook 对象

> ID：11671879
> 
> 赞同：1
> 
> 时间：2012-07-26T14:44:32.600
> 
> 标签：facebook, oauth

举个例子

[http://www.facebook.com/photo.php?v=10150130077340815&set=vb.22092443056&type=2&theater](http://www.facebook.com/photo.php?v=10150130077340815&set=vb.22092443056&type=2&theater)

如果我尝试在图形资源管理器中访问该对象

[https://graph.facebook.com/10150130077340815](https://graph.facebook.com/10150130077340815)

我得到一个 OAuthException ，它说我需要一个用户令牌。

但是如果我只是去FB网站上的上述URL，我可以看到视频就好了！

我如何以编程方式访问这样的对象——我可以在没有登录的情况下在 Facebook-the-site 上看到什么时候，但在没有访问令牌的情况下无法在代码中获取它们？

我在这里错过了什么非常简单的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:49:09.217

使用图形 api 时，您需要访问令牌来访问其他对象所拥有的对象

[您可以通过转到此处](https://developers.facebook.com/tools/explorer/?method=GET&path=10150130077340815)并尝试查询来验证这一点......它不起作用。

然后，单击“生成访问令牌”，尝试相同的查询（对于 10150130077340815），瞧，你得到了星巴克的东西。

获取您的访问令牌，您应该能够做到这一点。如果这必须是一个完整的事情，你可能不得不跳过一些箍来更新它。

# linux - 静态链接 NCurses 会出错，用于 BusyBox 环境

> ID：11671881
> 
> 赞同：2
> 
> 时间：2012-07-26T14:44:39.297
> 
> 标签：linux, g++, static-linking, busybox

我编写了一个非常简单的 ncurses 程序，可以在 BusyBox 环境中运行。但是，似乎我无法让我的程序与所有内容一起编译。我用了：

```
g++ menu.cpp -ohello -lncurses  --> Works fine
g++ -static menu.cpp -ohello -lncurses --> Undefined reference to SP (many times) 
```

我发现[了这个问题](https://stackoverflow.com/questions/9708086/static-linking-with-boost-and-ncurses)，但它忽略了与 ncurses 的链接。我需要一个非常单一的可执行文件。我的目标环境是固定的，所以我不关心可移植性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:15:05.363

1.  您应该粘贴确切的编译器调用和您收到的确切错误消息。

2.  你有`ncurses`库的静态版本吗？

3.  `ncurses`更重要的是，您是否有为您的目标环境编译的库的静态版本？例如，您的目标环境可能正在使用`ulibc`，`glibc`或者它甚至可能是一个完全不同的平台（提示：告诉我们您的目标平台是什么）。

4.  您确定您正在使用正确的标志进行编译吗？您显示的编译器标志似乎更适合编译应用程序以在构建主机环境中使用......

# r - 将数组从matlab导入R

> ID：11671883
> 
> 赞同：14
> 
> 时间：2012-07-26T14:44:45.320
> 
> 标签：r, matlab, file-io, matrix, mat-file

我确定这是一个简单的问题，但我一直无法找到明显的解决方案。我有一系列在 matlab 中生成的模型输出数组文件（dim 180、360、12），需要在 R 中打开。

我试图使用 R.matlab 包，只需使用 readMat 命令，这会产生一个列表对象。尝试将此列表写入矩阵会导致内存分配错误。

我曾尝试取消列出，但这也无济于事。

如何打开这些 matlab 矩阵文件并在 R 中写入矩阵？有什么想法吗？

* * *

到目前为止读取的 matlab 代码很简单：

```
> data<-readMat("filename")
> typeof(data)
[1] "list"
> str(data)
List of 1
 $ pco2: num [1:180, 1:360, 1:12] NaN NaN NaN NaN NaN ...
 - attr(*, "header")=List of 3
 ..$ description: chr "MATLAB 5.0 MAT-file, Platform: GLNXA64, Created on: Thu Jul 26 10:36:42 2012 "
 ..$ version : chr "5"
 ..$ endian : chr "little 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-26T18:53:14.607

请在 MATLAB 中仔细检查您的文件，并确保并非所有值都是 NaN。只需在 MATLAB 中加载文件并检查内容：

```
load file.mat 
```

这是我刚刚做的一个简单测试：

## MATLAB

```
>> x = rand(3,4,2)

x(:,:,1) =
      0.75127      0.69908      0.54722      0.25751
       0.2551       0.8909      0.13862      0.84072
      0.50596      0.95929      0.14929      0.25428
x(:,:,2) =
      0.81428      0.34998      0.61604      0.83083
      0.24352       0.1966      0.47329      0.58526
      0.92926      0.25108      0.35166      0.54972

>> save file.mat x 
```

## R

```
R> library(R.matlab)
R> data <- readMat('file.mat')
R> str(data)
List of 1
 $ x: num [1:3, 1:4, 1:2] 0.751 0.255 0.506 0.699 0.891 ...
 - attr(*, "header")=List of 3
  ..$ description: chr "MATLAB 5.0 MAT-file, Platform: PCWIN, Created on: ..."
  ..$ version    : chr "5"
  ..$ endian     : chr "little"
R> data$x
, , 1

       [,1]   [,2]   [,3]   [,4]
[1,] 0.7513 0.6991 0.5472 0.2575
[2,] 0.2551 0.8909 0.1386 0.8407
[3,] 0.5060 0.9593 0.1493 0.2543

, , 2

       [,1]   [,2]   [,3]   [,4]
[1,] 0.8143 0.3500 0.6160 0.8308
[2,] 0.2435 0.1966 0.4733 0.5853
[3,] 0.9293 0.2511 0.3517 0.5497 
```

# vba - 使用已定义目录中的子目录名称列表填充用户表单组合框

> ID：11671884
> 
> 赞同：0
> 
> 时间：2012-07-26T14:44:52.553
> 
> 标签：vba, excel, combobox

如果此问题之前已在此板上回答，我深表歉意。我的搜索没有找到我要找的东西。我是 VBA 新手，想知道是否有办法使用预定义目录中包含的所有子目录的名称填充用户表单组合框（我需要在每次启动用户表单时更新列表）。我在其他网站上看到过一些执行此操作的代码，但它们适用于早期版本的 Excel，我无法让它们工作。我正在使用 Excel 2007。感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:12:48.460

```
Option Explicit

Private Sub UserForm_Initialize()
  Dim name

  For Each name In ListDirectory(Path:="C:\", AttrInclude:=vbDirectory, AttrExclude:=vbSystem Or vbHidden)
    Me.ComboBox1.AddItem name
  Next name
End Sub

Function ListDirectory(Path As String, AttrInclude As VbFileAttribute, Optional AttrExclude As VbFileAttribute = False) As Collection
  Dim Filename As String
  Dim Attribs As VbFileAttribute

  Set ListDirectory = New Collection

  ' first call to Dir() initializes the list
  Filename = Dir(Path, AttrInclude)

  While Filename <> ""
    Attribs = GetAttr(Path & Filename)
    ' to be added, a file must have the right set of attributes
    If Attribs And AttrInclude And Not (Attribs And AttrExclude) Then
      ListDirectory.Add Filename, Path & Filename
    End If
    ' fetch next filename
    Filename = Dir
  Wend
End Function 
```

一些注意事项，因为您说您对 VBA 几乎没有经验。

*   始终`Option Explicit`有效。没有理由。
*   `Dir()`在 VB 中用于列出文件。
*   集合比 VBA 中的数组方便得多。
*   函数调用中有可用的命名参数 ( `name:=value)`。您不必使用它们，但它们有助于理解长参数列表。如果使用命名参数，则参数顺序无关紧要。但是，您不能混合命名参数和未命名参数。
*   您可以使用具有默认值的可选参数。
*   请注意，分配给函数名称（`ListDirectory`在这种情况下）会设置函数的结果。因此，您可以将函数名称直接用作该函数内的变量。
*   如果要返回所有类型的文件，请设置`AttrInclude`为。`-1`方便的是，`-1`是 . 的数值`True`，即`ListDirectory("C:\", True)`。
*   如果您不想排除任何文件，请设置`AttrExclude`为。`0`方便的`0`是 . 的数值`False`，即`ListDirectory("C:\", True, False)`，这也是默认值。
*   VB 6.0 中的所有逻辑运算符都是按位的，因此您可以使用以下命令检查文件是否为目录`If Attribs And VbDirectory Then ...`
*   您可以将多个位值与`Or`例如`vbSystem Or vbHidden`.
*   因此，您可以使用简单的逐位逻辑检查来过滤目录。
*   使用对象浏览器（按 F2）检查可用的函数、类型和常量，例如`VbFileAttribute`枚举中的常量。

# jquery - 如何在不使用本地机器时间的情况下编写 jQuery 日期时间倒计时功能

> ID：11671888
> 
> 赞同：2
> 
> 时间：2012-07-26T14:45:01.680
> 
> 标签：jquery, date

**我想要一个 jquery 函数，它获取任何未来日期作为输入** 并使用该日期进行倒计时。

我发现许多使用本地机器时间的函数，即`new Date()`函数，但我不想使用本地机器日期时间。当页面加载时，我只想显示未来日期的倒计时。我想从服务器端日期时间倒计时。所以我只想

> 从给定日期时间开始倒计时而不与本地机器时间比较的函数。

# matlab - MATLAB使用按钮从GUI保存图像

> ID：11671892
> 
> 赞同：0
> 
> 时间：2012-07-26T14:45:17.553
> 
> 标签：matlab, user-interface

我想保存指定轴的图像。我不断收到`You may not have permission to write`错误。这是我保存为按钮的代码：

```
axes(handles.axes3);
[FileName, PathName] = uiputfile('*bmp', 'Save As');
Name = fullfile(FileName, PathName);
imwrite(handles.TReg, Name, 'bmp'); 
```

此外，`handles.TReg`是在另一个函数上定义的变换图像。

我似乎在这里找不到我的错误，任何想法都将不胜感激。

**编辑** 如果我使用代码：

```
axes(handles.axes3);
[FileName, PathName] = uiputfile('*bmp', 'Save As');
Name = fullfile(FileName, PathName);
imwrite(handles.TReg, 'Name', 'bmp'); 
```

该文件将在正确的目录中另存为 Name.bmp。但是我确实注意到，当我尝试使用原始代码保存时，错误也会显示（我错过了这一点，抱歉）：

```
Can't open file "Image1\C:\Users\Shinobii\Documents\MATLAB\" for writing. 
```

我认为路径名应该像

```
"C:\Users\Shinobii\Documents\MATLAB\Image1" 
```

这可能是问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:18:32.593

小错误：

```
[FileName, PathName] = uiputfile('*.bmp', 'Save As'); %# <-- dot
Name = fullfile(PathName,FileName);  %# <--- reverse the order of arguments
imwrite(img, Name, 'bmp'); 
```

检查用户是否没有取消对话框也是一个好主意：

```
[FileName, PathName] = uiputfile('*.bmp', 'Save As');
if PathName==0, return; end    %# or display an error message 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:54:40.513

检查路径和文件名，并尝试通过手动调用 imwrite 来保存图像。这可能与 GUI 和按钮回调无关，但与文件权限和/或路径名无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:18:09.850

再一次，这似乎是一个我应该早点发现的愚蠢错误。

```
axes(handles.axes3);
[FileName, PathName] = uiputfile('*bmp', 'Save As');
Name = fullfile(PathName, FileName);
imwrite(handles.TReg, Name, 'bmp'); 
```

在`Name`我需要翻转`FileName`and `PathName`。

谢谢你的帮助！

# jquery - 淡入淡出 div 内容，默认情况下第一个 div 可见

> ID：11671893
> 
> 赞同：0
> 
> 时间：2012-07-26T14:45:20.523
> 
> 标签：jquery, html, fadein, fadeout

我可以淡入淡出不同的 div 内容，但我希望当我们打开网站时，第一个 div 内容已经可见。

现在，我必须单击其中一个链接来显示内容。我希望默认情况下第一个 div 可见，然后我们可以在单击链接时淡入和淡出其他 div 内容。在这种情况下，当我们到达网页时，lorem ipsum div 应该在开始时可见。

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">
  document.documentElement.className += " js"; // Add js class to the HTML element

  $(function(){
    var $containers = $("#animators > div").hide();

    $('a').each(function(i,el){
      var idx = i;
      $(this).click(function(e){
        var $target = $containers.filter(':eq(' + idx + ')');
        // Fade out visible div
        if($containers.filter(':visible').not($target).length){
          $containers.filter(':visible').fadeOut(700, function(){
            $target.not(':visible').fadeIn(700);
          });
        } else {
          $target.not(':visible').fadeIn(700);
        }

        e.preventDefault();
      })
    })
  });

</script> 
```

这是我的 HTML 部分

```
 <div id="animators">
    <div class="container">
     <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porttitor, est a mollis pellentesque, purus quam commodo ligula, quis laoreet ipsum enim quis nulla. Nulla leo odio, sollicitudin ut cursus lacinia, placerat in erat. Donec tempor justo vitae enim varius eu placerat arcu pulvinar. Integer fermentum placerat diam, eget bibendum lacus aliquam aliquet. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. In tellus tortor, fringilla in pulvinar a, ultrices eget magna. Nam in cursus tellus. Donec gravida semper massa in pulvinar. Proin ac dolor nulla, eget vestibulum dui. Vivamus pulvinar ullamcorper ligula nec sollicitudin. Nunc pulvinar cursus tempus.</p>
    </div>
    <div class="container">
     <ul>
      <li>stuff2</li>
      <li>stuff2</li>
      <li>stuff2</li>
     </ul>
    </div>
    <div class="container">
     <ul>
      <li>stuff3</li>
      <li>stuff3</li>
      <li>stuff3</li>
     </ul>
    </div>
    <div class="container">
      <li>stuff4</li>
      <li>stuff4</li>
      <li>stuff4</li>
    </div>
</div> 
```

还有我的 CSS 部分，即使在这种情况下它并不重要

```
.js #animators { position: absolute; height: 300px}
.js #animators div.container { position: absolute; left: 0; top: 0 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:00:01.153

这将显示第一个 div

```
 $(function(){
        var $containers = $("#animators > div").hide();  //hides all divs
        $("#animators").next().show();   //then shows just the one with <p> you want

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:05:09.907

您已经检索到变量`div`中的容器元素。`$containers`您可以使用它来显示第一个`div`并避免再次抓取它：

```
var $containers = $("#animators > div").hide();
$containers.eq(0).show(); 
```

# regex - Clojure 中的转义括号

> ID：11671898
> 
> 赞同：6
> 
> 时间：2012-07-26T14:45:35.283
> 
> 标签：regex, string, clojure

如果我试试这个

```
(import java.util.regex.Pattern)
(Pattern/compile ")!@#$%^&*()") 
```

或这个

```
(def p #")!@#$%^&*()") 
```

我有 Clojure 抱怨有一个 unmatched / unclosed `)`。为什么要在这个简单的字符串中评估括号？如何逃脱他们？谢谢

**编辑**：虽然转义适用于 clojure 特定的语法 ( `#""`)，但它不适`Pattern/compile`用于我需要的语法，因为我必须从字符串动态编译正则表达式模式。

我试过了`re-pattern`，但由于某种原因我无法正确逃脱：

```
(re-pattern "\)!@#$%^&*\(\)")
    java.lang.Exception: Unsupported escape character: \)
    java.lang.Exception: Unable to resolve symbol: ! in this context (NO_SOURCE_FILE:0)
    java.lang.Exception: No dispatch macro for: $
    java.lang.Exception: Unable to resolve symbol: % in this context (NO_SOURCE_FILE:0)
    java.lang.IllegalArgumentException: Metadata can only be applied to IMetas 
```

**编辑 2**这个小功能可能会有所帮助：

```
(defn escape-all [x]
    (str "\\" (reduce #(str  %1 "\\" %2) x))) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T15:14:26.263

我通过双重转义一切来让它工作。哦，双重逃脱的乐趣。

```
=> (re-pattern "\\)\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)")
=> #"\)\!\@\#\$\%\^\&\*\(\)"

=> (re-find (re-pattern "\\)\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)")
            ")!@#$%^&*()")
=> ")!@#$%^&*()" 
```

我建议编写一个辅助函数`str-to-pattern`（或任何你想调用的函数），它接受一个字符串，双重转义它需要的所有内容，然后调用`re-pattern`它。

**编辑：制作一个字符串到模式函数**
有很多方法可以做到这一点，下面只是一个例子。我首先制作一个正则表达式转义字符映射到他们的字符串替换。“smap”不是实际类型，但从功能上讲，它是一个我们将使用“旧值”与“新值”交换的映射，其中“旧值”是 smap 键的成员，“新值”是 smap 的 val 的对应成员。在我们的例子中，这个 smap 看起来像`{\( "\\(", \) "\\)" ...}`.

```
(def regex-char-esc-smap
  (let [esc-chars "()*&^%$#!"]
    (zipmap esc-chars
            (map #(str "\\" %) esc-chars)))) 
```

接下来是实际功能。我使用上面的 smap 替换传递给它的字符串中的项目，然后将其转换回字符串并从中生成正则表达式模式。我认为`->>`宏使代码更具可读性，但这只是个人喜好。

```
(defn str-to-pattern
  [string]
  (->> string
       (replace regex-char-esc-smap)
       (reduce str)
       re-pattern)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T14:53:34.350

你确定错误来自读者（即来自clojure本身）吗？

正则表达式使用括​​号，它们也必须在那里匹配。我猜这个错误来自试图编译正则表达式的代码。

如果您想在正则表达式中转义括号，请使用反引号：`(def p #"\)!@#$%^&*\(\)")`

[更新] 啊，对不起，你可能需要像 Omri 天那样双重转义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-10T00:34:50.173

Clojure 支持的所有 Java 版本都可以识别`\Q`开始引用区域和`\E`结束引用区域。这使您可以执行以下操作：

```
(re-find #"\Q)!@#$%^&*()\E" ")!@#$%^&*()") 
```

如果您正在使用，`(re-pattern)`那么这将起作用：

```
(re-find (re-pattern "\\Q)!@#$%^&*()\\E") ")!@#$%^&*()") 
```

如果您要从内容不知道的字符串组装正则表达式，则可以使用以下`quote`方法`java.util.regex.Pattern`：

```
(re-find (re-pattern (java.util.regex.Pattern/quote some-str)) some-other-str) 
```

这是我的 REPL 中的一个示例：

```
user> (def the-string ")!@#$%^&*()")
#'user/the-string
user> (re-find (re-pattern (java.util.regex.Pattern/quote the-string)) the-string)
")!@#$%^&*()" 
```

# r - R rms 错误消息“具有 <2 个类别标签”

> ID：11671900
> 
> 赞同：0
> 
> 时间：2012-07-26T14:45:35.767
> 
> 标签：r, regression

我正在尝试将连续变量（“relative_frequency_total”）映射到二进制值（“topicality”）。高于某个阈值的所有值都应映射到一个，低于或等于它的所有值都应映射到另一个值。由于我希望结果变量尽可能保持预测性，我首先取连续变量的每个十分位数，尝试使用该十分位数作为截止点映射 relative_frequency_total，将生成的二元变量输入逻辑回归模型，并记住该模型的 R2 ， 像这样：

```
quant_eval = data.frame("quantile" = numeric(100), "R2" = numeric(100))
counter = 1
for(q in seq(1,11,by=1)){
    dom$topicality[dom$ranked_frequency_total > quantile(dom$ranked_frequency_total)[q]] <- "topical"
    dom$topicality[dom$ranked_frequency_total <= quantile(dom$ranked_frequency_total)[q]] <- "non-topical"
    tmp.lrm <- lrm(DOM ~ as.factor(topicality), data=dom)
    quant_eval[counter,"quantile"] = q
    quant_eval[counter,"R2"] = tmp.lrm$stats["R2"]
    counter = counter+1
}
quant_eval 
```

现在这是我的问题：

(1) 这适用于分位数 1-4，但在第 5 位我收到一条错误消息，提示“话题性具有 <2 个类别级别”。这意味着什么？

(2) 真正让我感到困惑的是，这个错误消息似乎取决于我尝试分位数的顺序。例如，当我尝试不使用循环的分位数 1 或 10 时，一切都很好。当我单独尝试分位数 5 时，我收到错误消息，然后当我再次尝试 1 和 10 时，我也收到了。lrm() 是否记得我最后做了什么，或者为什么会这样？我还认为原因可能是我一次又一次地重复使用同一列来映射ranked_frequency_total，但后来我尝试将列重命名为ea

原始数据帧 dom 相当大，但对我来说，错误消息可以通过以下摘录重复：

```
 DOM relative_frequency_total
1  DAT             0.0203549061
2  DAT             0.0203549061
3  NOM             0.0005219207
4  NOM             0.0005219207
5  NOM             0.0005219207
6  NOM             0.0005219207
7  NOM             0.0015657620
8  NOM             0.0015657620
9  NOM             0.0015657620
10 NOM             0.0005219207
11 NOM             0.0005219207
12 NOM             0.0010438413
13 NOM             0.0010438413
14 NOM             0.0041753653
15 NOM             0.0005219207
16 NOM             0.0005219207
17 NOM             0.0041753653
18 NOM             0.0005219207
19 NOM             0.0010438413
20 NOM             0.0020876827 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:24:22.503

查看`?quantile`. 当你`quantile`默认运行时，它会给你五分位数（准确的切割点）。

```
quantile(dom$ranked_frequency_total)
         0%         25%         50%         75%        100% 
0.001747327 0.007373624 0.012441222 0.015827876 0.020194380 
```

发生的情况是，当您达到 q=5 时，*所有*的`relative_frequency_total`都小于或等于 quantile(dom$ranked_frequency_total)[5]，根据定义，它是 的最大值`dom$ranked_frequency_total`。因此，您的*所有*自变量都完全相同，这意味着您不再有两个因子水平，而是一个。

我猜你想分成十分位数，所以你可以使用：

```
quantile(dom$ranked_frequency_total,probs=seq(0,1,0.1)) 
```

但是请确保只达到 9，这样您就不会遇到同样的问题。

```
# Only set the rows you need
# quant_eval = data.frame("quantile" = numeric(100), "R2" = numeric(100))
quant_eval = data.frame("quantile" = numeric(9), "R2" = numeric(9))
# counter = 1 # No need for counter, just use q
for(q in 1:9){
    # ifelse works nice here
    # dom$topicality[dom$ranked_frequency_total > quantile(dom$ranked_frequency_total)[q]]     <- "topical"
    # dom$topicality[dom$ranked_frequency_total <= quantile(dom$ranked_frequency_total)[q]] <- "non-topical"
    dom$topicality=ifelse(dom$ranked_frequency_total > quantile(dom$ranked_frequency_total,probs=seq(0,1,0.1))[q],'topical','non-topical')
    tmp.lrm <- lrm(DOM ~ as.factor(topicality), data=dom)
    quant_eval[q,"quantile"] = q
    quant_eval[q,"R2"] = tmp.lrm$stats["R2"]
    # counter = counter+1
} 
```

但你也可以变得更优雅一点。

```
cut.points=10
quan.r2=function(q) {
    topicality=ifelse(dom$ranked_frequency_total > quantile(dom$ranked_frequency_total,probs=seq(0,1,1/cut.points))[q],'topical','non-topical')
    c(quantile=q,lrm(DOM ~ as.factor(topicality), data=dom)$stats['R2'])
}
t(sapply(seq(cut.points-1),quan.r2))

      quantile         R2
 [1,]        1 0.02216367
 [2,]        2 0.04580822
 [3,]        3 0.09620369
 [4,]        4 0.49200275
 [5,]        5 0.37952599
 [6,]        6 0.29053577
 [7,]        7 0.21660100
 [8,]        8 0.15282620
 [9,]        9 0.09620369 
```

# javascript - 动态添加数据时按数据属性的JQuery选择器？

> ID：11671901
> 
> 赞同：12
> 
> 时间：2012-07-26T14:45:36.343
> 
> 标签：javascript, jquery

我有`ul`几个项目。我使用 jquery 在页面加载后动态填充列表。当我添加每个列表项时，我还使用 jquery ".data()" 函数向该元素的数据添加了一个 "itemID"。像这样的东西：

```
var item = $('<li>My Item Name</li>');
item.data('itemID', '123ABC456'); 
```

稍后，我需要一个选择器来确定我的项目列表中是否有任何项目具有特定的 itemID。首先我尝试使用：

```
$('*[data-itemID="123ABC456"]'); 
```

这不起作用——在进一步的研究中，我发现这种语法只有在页面加载时在 DOM 中设置了 data 属性时才有效；如果您动态使用“.data”jquery 方法，它就不起作用。

接下来我尝试了：

```
$(':data(itemID==123ABC456)'); 
```

出于某种原因，这不起作用。但是，如果我简单地运行`$(':data(itemID)')`，那么我*会*得到所有在其数据中具有 itemID 的 li 元素。

我知道 itemID 属性设置正确，因为当我调用`.data()`该列表项时，我得到：

```
Object { itemID="123ABC456"} 
```

如何选择数据中 itemID 为“123ABC456”的所有元素？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T14:57:00.280

[http://jsfiddle.net/w28p9/1/](http://jsfiddle.net/w28p9/1/) <-- jsFiddle 示例显示数据属性和 jquery.data() 的差异

`jQuery.data()`与您尝试搜索的 HTML5 数据名称属性不同。

[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

jQuery.data() 保存在 jquery 元素内部（这个数据是隐藏在视线之外的）。`[data-itemID]`如果内部实际有，则寻找会起作用： `<li data-itemID="12345"></li>`.

要检索并查找实际隐藏的`.data()`尝试：

```
// of course be more specific than just searching through all <li>'s
$('li').each(function () {
    if ( $(this).data('itemID') === '123ABC456' ) {
        // do whatever you wanted to do with it
    } 
}); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-02T20:14:58.993

代替

```
$(item).data('itemID', '123ABC456') 
```

利用

```
$(item).attr('data-itemID', '123ABC456') 
```

然后你可以使用

```
$('[data-itemID=123ABC456]') 
```

作为选择器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T16:46:04.320

将 itemID 放入 DOM 怎么样：

```
var item = $('<li itemID="'+itemid+">My Item Name</li>'); 
```

# calendar - 如何合并 2 个谷歌日历以按顺序显示事件？

> ID：11671903
> 
> 赞同：0
> 
> 时间：2012-07-26T14:45:50.937
> 
> 标签：calendar, google-apps-script, google-sites

我正在尝试用我自己通过谷歌脚本创建的显示替换我的谷歌网站中笨重的谷歌日历议程视图。

我可以在页面上获取活动详细信息，但我需要显示多个日历 - 如何确保项目在页面上按正确顺序排列，并且不按日历分组？

我可以：

每次运行脚本时创建一个临时日历，合并多个日历（注意 - 我看不到任何创建日历选项）

或将信息转储到电子表格，然后从那里进行排序

或者以某种方式按时间循环，而不是日历。

我认为电子表格是最好的选择——还有其他想法吗？

有没有一种简单的方法可以自动将 iCal 文件复制到电子表格中？

乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T03:01:24.653

我已经处理了很多。尤其是在为我的多个日历上的事件发送宾客列表电子邮件时。下面的函数将获取一组日历以及一个开始和结束时间，并将其转换为一个唯一`CalendarEvent`对象数组。

[您可以在此处](http://goo.gl/DAIQ9)运行代码的一个版本。你还会发现那里也有评论。

排序部分是您似乎最感兴趣的部分。它包含在`byStart`函数中。[您可以在MDN Array.Sort 参考](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FArray%2Fsort)中找到有关数组排序的更多信息。`byStart`适用于任何数组`CalendarEvent`。

由于管理日历的列表性质，Javascript 中可用的迭代函数使这项工作变得轻松。MDN 有更多关于[迭代方法的信息](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array#Iteration_methods)

这里是：

```
function mergeCalendarEvents(calendars, startTime, endTime) {

  var params = { start:startTime, end:endTime, uniqueIds:[] };

  return calendars.map(toUniqueEvents_, params)
                  .reduce(toSingleArray_)
                  .sort(byStart_);
}

function toCalendars_(id) { return CalendarApp.getCalendarById(id); }

function toUniqueEvents_ (calendar) {
  return calendar.getEvents(this.start, this.end)
                 .filter(onlyUniqueEvents_, this.uniqueIds);
}

function onlyUniqueEvents_(event) {
  var eventId = event.getId();
  var uniqueEvent = this.indexOf(eventId) < 0;
  if(uniqueEvent) this.push(eventId);
  return uniqueEvent;
}

function toSingleArray_(a, b) { return a.concat(b) }

function byStart_(a, b) {
  return a.getStartTime().getTime() - b.getStartTime().getTime();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:59:19.590

如果 PHP 和 Zend Gdata 库是一个选项，您可以获取日历列表提要，然后循环遍历每个日历的事件并将它们放入一个数组中。之后，您可以使用以下命令按开始时间对它们进行排序：

```
 function cmp( $a, $b )
     {
        if(  $a->when[0]->startTime ==  $b->when[0]->startTime ){ return 0 ; }
        return ($a->when[0]->startTime < $b->when[0]->startTime) ? -1 : 1;
     }

     uasort($allEvents,'cmp'); 
```

# asp.net - 如何在 RowDataBound 事件的 Gridview 中更改 Eval() 字段的值

> ID：11671905
> 
> 赞同：5
> 
> 时间：2012-07-26T14:45:57.263
> 
> 标签：asp.net, gridview, rowdatabound

我有一个 GridView：

```
<asp:GridView ID="gvDownloads">
   <Columns>
      <asp:TemplateField HeaderText="Status" >
         <ItemTemplate>
             <%# Eval("Enabled")%>
         </ItemTemplate>
      </asp:TemplateField>
   </Columns>
<asp:GridView/> 
```

该`Enabled`属性是一个布尔值。现在我想根据`Enabled`属性的 True/False 显示 Enabled/Disabled。因此我使用：

```
Sub gvDownloads_RowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs) Handles gvDownloads.RowDataBound

        If e.Row.RowType = DataControlRowType.DataRow Then

            If e.Row.Cells(3).Text = "True" Then
                e.Row.Cells(3).Text = "Enabled"
            Else
                e.Row.Cells(3).Text = "Disabled"
            End If

        End If

End Sub 
```

但它不起作用，因为事件启动时 `e.Row.Cells(3).Text`是一个**空字符串**。我怎么解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T15:12:52.337

```
If e.Row.Cells(3).Text <> Boolean.FalseString Then
       e.Row.Cells(3).Text = "Enabled"
Else
       e.Row.Cells(3).Text = "Disabled"
End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T08:37:36.517

我也有同样的问题。

`e.Row.Cells[i].Text`是空的。我认为数据当时没有绑定，这有点奇怪，因为我们处于 RowDataBound 事件中。

但是，我使用了：

```
 DataRowView drv = (DataRowView) e.Row.DataItem;
     if (drv["RNID"].ToString() == "")
     {
        e.Row.Visible = false;
     } 
```

`"RNID"`我的应用程序中的列名之一在哪里。这解决了我的问题。

# c# - 如何使用 Response 类创建文件以供下载，然后与客户端交互？

> ID：11671907
> 
> 赞同：0
> 
> 时间：2012-07-26T14:46:05.210
> 
> 标签：c#, javascript, response, window.open

我有一个按钮，它的`OnClientClick`事件调用 Generate()。

```
function Generate() {
    window.open('GenerateKey.aspx', '_newtab', 'titlebar = no', false);
    PageMethods.SendKey(SendKeyCallback, SendKeyCallbackError);
} 
```

回调函数隐藏加载 gif 并提醒状态（成功/失败）

GenerateKey.aspx 创建一个文件并打开一个下载弹出窗口。

这是 page_load 代码：

```
 string keyFileName = orgName + "-" + timeStamp + ".ckey";
    fs = new FileStream(Server.MapPath("~/License/Generate/" + keyFileName), FileMode.Create, FileAccess.ReadWrite);
    sw = new StreamWriter(fs);
    sw.Write(generatedKey);
    sw.Flush();
    fs.Close();
    Response.ContentType = "text/xml";
    Response.AppendHeader("Content-Disposition", "attachment; filename=" + keyFileName);
    Response.TransmitFile(Server.MapPath("~/License/Generate/" + keyFileName));
    Response.End(); 
```

代码工作正常，但我的问题是新选项卡在下载弹出到屏幕后关闭（我猜它是因为 Response 对象而发生的），它看起来像一个错误。

我弹出一个新的空白选项卡 1 秒钟，然后它关闭了。

有人知道如何使它看起来更好吗？我不能在同一页面上执行此操作，因为在文件生成之后，我不再与客户端建立连接（这就是我使用 window.open 的原因）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:42:15.227

您要求浏览器在另一个窗口中打开一个文本文件。浏览器可能会将数据解释为不是 HTML，将文件存储到磁盘，然后关闭窗口——这对于浏览器来说是相当标准的。如果这不是您想要的，您需要将 HTML 数据发送到浏览器或将您的浏览器配置为不自动将该类型的数据保存到磁盘。

# java - char类型可以归类为整数吗？

> ID：11671908
> 
> 赞同：7
> 
> 时间：2012-07-26T14:46:10.223
> 
> 标签：java, c, char

刚才我读到“char 是 Java 中唯一的无符号整数原始类型”。这是否意味着 char 是 Java 中的整数类型之一？

和C一样，最近我读到C类型包括标量类型、函数类型、联合类型、聚合类型，标量类型包括指针类型和算术类型，那么算术类型包括整数类型和浮点类型，整数类型包括枚举类型和字符类型。

char 类型真的可以在 Java 和 C 中都归类为整数吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T14:51:11.050

是的，a`char`在它出现的所有流行语言中都是一个整数类型。“积分”意味着它的光谱是离散的，并且任何两个不同值之间的最小差异是`1`。与其他整数类型相比，所需的支持值范围通常非常小。计算机硬件传统上将整数视为基本数据类型；相比之下，算术浮点类型是一种更新且更复杂的添加。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T15:09:44.870

类似于@aioobe 的回答

```
int n = 5;
char ch = (char) '0' + 5; // '5' 
```

或相反

```
char ch = '9';
int i = ch - '0'; // 9 
```

或不寻常的

```
char ch = 'a';
ch += 1; // 'b'; 
```

或奇怪的

```
char ch = '0';
ch *= 1.1; // '4' as (char) (48 * 1.1) == '4'

ch %= 16; // `\u0004`
int i = ch; // 4 
```

顺便说一句：来自 String.hashCode()

```
// int h = 0;
char val[] = value;
int len = count;

for (int i = 0; i < len; i++) {
    h = 31*h + val[off++];
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T14:52:29.450

根据 Java [Primitive Data Types](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)教程：

> **char**：char 数据类型是单个 16 位 Unicode 字符。它的最小值为“\u0000”（或 0），最大值为“\uffff”（或 65,535，包括在内）。

所以是的，它是一个 16 位无符号整数。使用类型来表示数字还是字符取决于您...

* * *

还要记住，虽然`char`Java 中的类型保证为 16 位，但 C 施加的唯一限制是类型必须至少为 8 位。根据[this answer](https://stackoverflow.com/questions/881894/is-char-guaranteed-to-be-exactly-8-bit-long-in-c)的C规范参考：

> 不是位域的最小对象的最大位数（字节）
> 
> CHAR_BIT 8

因此`char`，C 中的 a 不一定代表与`char`Java 中的 a 相同的整数值范围。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-26T14:50:19.537

我不确定*整数类型*的正式定义，但简而言之，是的，`char`它是 Java 中的整数类型，因为它可以被视为表示整数。

你可以例如做

```
char c1 = 'a' + 'b';

char c2 = 5;

char c3 = c2 + 3;

int i = c3;
char c4 = (char) i; 
```

等等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T14:50:41.103

在记忆中，基本上一切都是不可或缺的……但是是的。char 是 C、C++ 和 Java 中的整数类型。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-07T13:29:23.223

Char 是 C 及其相关后代中的“整数数据类型”。根据 K&R Book，“根据定义，字符只是小整数”。它们用于存储“字符”数据。

ASCII 表列出了 128 个字符，每个文本字符对应一个整数值。

Char 数据类型为 1 字节（8 位）。因此，它们最多可以存储 2^8 = 256 个不同的整数。（这 256 个不同的整数对应不同的 ASCII 或 UTF 字符。）

例如：

根据 ASCII 标准，字母“x”存储为 01111000（十进制 120）。

例如，您可以在 char 变量中添加一个值，就像任何整数一样！

```
int main()
{
    char a='x';
    int b=3+a;
    printf("value is:\n%d",b);
    return 0;
 } 
```

输出：b=123（3 + 120 用于 char 'x'）

即字符只是数字（整数：0-256（无符号））。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-26T14:52:35.747

C 规范要求将**char**类型实现为 1 字节整数。其他类型的规格并不总是那么清楚。例如，最初的 Kernigan 和 Ritchie C 书中说，就**short**和**long**而言，在不同的实现中，你只能依靠**short**不长于**long**的事实。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-27T19:20:17.297

**是的，char 类型可以归类为整数：**

```
int i = 49;
int k = 36;

System.out.print((char)i + (char)k + "$"); //may expect 1$ but print: 85$ 
```

# php - 将多个检查值保存到 MySQL 数据库

> ID：11671911
> 
> 赞同：0
> 
> 时间：2012-07-26T14:46:23.207
> 
> 标签：php, mysql, checkbox

我有一个 PHP 表单，它最终会将所有填写的数据写入 MySQL 数据库。这一切都相当可行，但这里有一些我不知道如何处理的棘手问题：

我有一个 DIV 请求一个表的所有行。每行代表一个类别，用户可以选择几个类别添加到他们的帖子中。这是我用来检索它们前面的行+复选框的代码：

```
<?php

$sql = "SELECT merknaam FROM merken";
$result = mysql_query($sql);

while ($row = mysql_fetch_array($result)) {
    echo "&nbsp;&nbsp;<input type=\"checkbox\" name=\"merken\" value='" . $row['merknaam'] . "'>&nbsp;" . $row['merknaam'] . " <Br />  ";
}

?> 
```

用户可以选择多个类别，我想将它们全部保存并写入我的数据库。所有类别都应写入名为“类别”的“一个”列，但单独的类别仍应可区分。

可能是一个棘手的问题？希望有人能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:50:02.277

将复选框的代码更改为：

```
echo "&nbsp;&nbsp;<input type=\"checkbox\" name=\"merken[]\" value='" . $row['merknaam'] . "'>&nbsp;" . $row['merknaam'] . " <br />  "; 
```

在名称后面添加`[]`将允许 PHP 将复选框视为一个数组，您可以将其序列化并存储在数据库中。

# javascript - jqgrid在条件下动态设置单元格可编辑false

> ID：11671912
> 
> 赞同：0
> 
> 时间：2012-07-26T14:46:26.380
> 
> 标签：javascript, jquery, jqgrid

我有`jqgrid`一些字段。我想要一些细胞

```
editable:true 
```

或者

```
editable:false 
```

基于一个条件

这是我的功能（已编辑）：

```
var grid = $("#mygrid");
var getColumnIndexByName = function(gr,columnName) {
var cm = gr.jqGrid('getGridParam','colModel');
for (var i=0,l=cm.length; i<l; i++) {
    if (cm[i].name===columnName) {
        return i; // return the index
    }
}
return -1;
};
function abilitaDisabilitaEditRecord() {
var pos=getColumnIndexByName(grid,'descrizione');
var pos2=getColumnIndexByName(grid,'endDate');
var allIds = $('#mygrid').jqGrid('getDataIDs');
var cells = $("tbody > tr.jqgrow > td:nth-child("+(pos+1)+")",grid[0]);
var cells2 = $("tbody > tr.jqgrow > td:nth-child("+(pos2+1)+")",grid[0]);
for (var i = 0; i < allIds.length; i++) {
    for (var j=0; j<cells.length; j++) {
        var cell = $(cells[j]);
        var cell2 = $(cells2[j]);
    var checkDataFine = $('#mygrid').jqGrid('getCell', allIds[i], 'date');
    if (!checkDataFine==false) {
        cell.addClass('not-editable-cell');
        cell2.addClass('not-editable-cell');
        }   
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:45:02.227

您可以在其他情况下调用它，我没有测试它，但我认为这应该可以

$("#mygrid").jqGrid('restoreRow',allIds[i]);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:35:23.433

这是工作解决方案：

```
var grid = $("#mygrid");
var getColumnIndexByName = function(gr,columnName) {
var cm = gr.jqGrid('getGridParam','colModel');
for (var i=0,l=cm.length; i<l; i++) {
    if (cm[i].name===columnName) {
        return i;
    }
}
return -1;
};

function changeEditableByContain() {
var pos=getColumnIndexByName(grid,'field1');
var pos2=getColumnIndexByName(grid,'field2');
var pos3=getColumnIndexByName(grid,'field3');
var pos4=getColumnIndexByName(grid,'field4');
var allIds = $('#mygrid').jqGrid('getDataIDs');
var cells = $("tbody > tr.jqgrow > td:nth-child("+(pos+1)+")",grid[0]);
var cells2 = $("tbody > tr.jqgrow > td:nth-child("+(pos2+1)+")",grid[0]);
var cells3 = $("tbody > tr.jqgrow > td:nth-child("+(pos3+1)+")",grid[0]);
var cells4 = $("tbody > tr.jqgrow > td:nth-child("+(pos4+1)+")",grid[0]);
for (var i = 0; i < allIds.length; i++) {
        var cell = $(cells[i]);
        var cell2 = $(cells2[i]);
        var cell3 = $(cells3[i]);
        var cell4 = $(cells4[i]);

    if (condition...) {
        cell.addClass('editable-cell');
        cell2.addClass('editable-cell');
        cell3.addClass('editable-cell');
        cell4.addClass('editable-cell');
        }
    else{
        cell.addClass('not-editable-cell');
        cell2.addClass('not-editable-cell');
        cell3.addClass('not-editable-cell');
        cell4.addClass('not-editable-cell');
    }
}
} 
```

然后调用 onloadcomplete:

```
changeEditableByContain(); 
```

# php - 未定义变量 HTTP_POST_FILES 错误

> ID：11671914
> 
> 赞同：2
> 
> 时间：2012-07-26T14:46:34.627
> 
> 标签：php

我正在编写上传文件代码，但是当我运行时，它显示：未定义变量：HTTP_POST_FILES 我该如何解决这个问题？

```
$a=$HTTP_POST_FILES['ufile']['name']; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:50:36.050

您是否在 PHP 配置中将 register_global 指令设置为 ON ？

再加上尝试使用`$_FILES`而不是`$HTTP_POST_FILES`，因为这最后一个现在变老了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:47:16.363

这只是意味着你**没有**定义`$HTTP_POST_FILES`

**定义它**，你应该很好。

* * *

如果您尝试使用现已弃用的`$HTTP_POST_FILES`，**请不要**使用。
改为使用[`$_FILES`](http://php.net/manual/en/reserved.variables.files.php)。

# c# - 列表框选定项更改事件触发了两次

> ID：11671916
> 
> 赞同：0
> 
> 时间：2012-07-26T14:46:43.700
> 
> 标签：c#, asp.net, listbox

我将以下代码用于选定的索引更改事件。事件触发了两次，我无法修复此错误。请帮我解决这个错误..

这是我的代码：

```
 if (ListBox1.Items.Count > 0)
   {
       for (int i = 0; i <= ListBox1.Items.Count - 1; i++)
       {
           if (ListBox1.Items[i].Selected == true)
           {
               lblempid.Text = Convert.ToString(ListBox1.Items[i].Text.Substring(0, 8));
               lblempname.Text = Convert.ToString(ListBox1.Items[i].Text.Substring(9));
               DataSet5TableAdapters.sp_GetallpayperiodTableAdapter TA = new DataSet5TableAdapters.sp_GetallpayperiodTableAdapter();
               DataSet5.sp_GetallpayperiodDataTable DS = TA.GetData();
               if (DS.Rows.Count > 0)
               {
                   fromdate = Convert.ToString(DS.Rows[DS.Rows.Count - 1]["fldstartdate"]);
                   todate = Convert.ToString(DS.Rows[DS.Rows.Count - 1]["fldtodate"]);
                   status = Convert.ToString(DS.Rows[DS.Rows.Count - 1]["fldstatus"]);
                   if (status == "OPEN")
                   {
                       lblfromdate.Text = string.Format("{0:yyyy-MM-dd}", fromdate);
                       lbltodate.Text = string.Format("{0:yyyy-MM-dd}", todate);
                   }
               }

           }
       }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:54:57.887

查看您的 Page_Load 处理程序内部。如果您在其中设置列表框的选择，则需要将其括起来：

```
if (!Page.IsPostBack)
{
    ListBox1.SelectedItem = "your old selection";
} 
```

否则，正如您所描述的，您将看到处理程序触发两次。

另外：这不是您问题的答案，但您可能想摆脱那个循环：

```
if (ListBox1.SelectedIndex == -1) return;

string theItem = ListBox1.SelectedItem.ToString();

lblempid.Text = theItem.Substring(0, 8);
lblempname.Text = theItem.Substring(9);
DataSet5TableAdapters.sp_GetallpayperiodTableAdapter TA 
    = new DataSet5TableAdapters.sp_GetallpayperiodTableAdapter();
DataSet5.sp_GetallpayperiodDataTable DS = TA.GetData();
if (DS.Rows.Count > 0)
{
    fromdate = Convert.ToString(DS.Rows[DS.Rows.Count - 1]["fldstartdate"]);
    todate = Convert.ToString(DS.Rows[DS.Rows.Count - 1]["fldtodate"]);
    status = Convert.ToString(DS.Rows[DS.Rows.Count - 1]["fldstatus"]);
    if (status == "OPEN")
    {
        lblfromdate.Text = string.Format("{0:yyyy-MM-dd}", fromdate);
        lbltodate.Text = string.Format("{0:yyyy-MM-dd}", todate);
    }
} 
```

# php - 将错误从 PHP 返回到 AJAX (jQuery) 的好方法是什么？

> ID：11671923
> 
> 赞同：0
> 
> 时间：2012-07-26T14:46:58.133
> 
> 标签：php, jquery, ajax, error-handling

我一直在寻找一种简单、干净和灵活的方式来在`POST`or`GET`请求之后将错误返回给浏览器。

使用 jQuery 的示例 AJAX 请求：

```
$.ajax({ 
  data : {
    method  : 'example',
    input : 1
  },
  success : function(i){
    if(i != 'succes'){
      alert(i);
    }
 }
}); 
```

服务器端响应：

```
switch($_POST['method']){
  case 'example':
    if($_POST['input'] == 1) {
      echo 'succes';
    } else {
      echo 'error';
      // or
      die('error');
    }
  break;
} 
```

这只是感觉不够扎实。有谁知道捕获错误与消息相结合的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:58:13.953

如果您希望 AJAX 调用符合 HTTP 标准，请使用 PHP 中的[标头函数发送](http://php.net/manual/en/function.header.php)[在 HTTP 中定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)的正确状态代码。将来，您可以从其他应用程序调用相同的 PHP 页面，而无需强制进行特定的错误处理。

如果错误是特定于应用程序的，则如前所述返回 json 编码的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:50:29.030

@Esailija 是正确的；返回 HTTP 状态代码，以便 jQuery 的 ajax 错误处理程序可以接收错误。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-26T14:50:16.300

使用 JSON：

```
$error = array(
    'error' => 'SOME_ERROR_DESCRIPTION',
    'message' => 'You have an error blabla'
);
echo json_encode($error); 
```

在您的 JavaScript 中，您可以根据需要使用 JSON 对象来处理错误。

# jasper-reports - Jaspersoft ireport 设计师 4.5.1 /4.6.0 & hive

> ID：11671933
> 
> 赞同：0
> 
> 时间：2012-07-26T14:47:23.923
> 
> 标签：jasper-reports

我正在尝试使用蜂巢连接设计报告。我创建了蜂巢连接并测试它工作正常。

有什么我做错了吗。我是 iReport 的新手。

jdbc:hive://192.168.254.132:10000/default

我正在使用报表设计器，我输入了我的 HiveQL，它给出了未指定的 REPORT_CONNECTION 参数。

我已经指定了蜂巢连接。

我尝试了简单的查询，从 iptable 中选择 *。

消息：net.sf.jasperreports.engine.JRException：参数“REPORT_CONNECTION”不存在。级别：严重堆栈跟踪：参数“REPORT_CONNECTION”不存在。com.jaspersoft.hadoop.hive.HiveFieldsProvider.getFields(HiveFieldsProvider.java:88) com.jaspersoft.ireport.hadoop.hive.designer.HiveFieldsProvider.getFields(HiveFieldsProvider.java:32) com.jaspersoft.ireport.hadoop.hive。 connection.HiveConnection.readFields(HiveConnection.java:154) com.jaspersoft.ireport.designer.wizards.ConnectionSelectionWizardPanel.validate(ConnectionSelectionWizardPanel.java:146) org.openide.WizardDescriptor$7.run(WizardDescriptor.java:1357) org.openide .util.RequestProcessor$Task.run(RequestProcessor.java:572) org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:03:53.400

嗯，这有点尴尬。该向导在 iReport 4.5.0 中运行良好。但它在 4.5.1 中中断，不知何故没有人注意到它。报告仍然可以正常工作，因此该错误避开了测试。它似乎只影响 Fields Provider。因此它会显示在向导中，但不会在运行报告时显示。

我在几秒钟前上传了一个固定版本的插件。您需要卸载现有的 Hadoop Hive 插件，然后重新启动 iReport，然后安装更新的插件。那么一切都应该很好。

这是[一般项目链接](http://jasperforge.org/projects/bigdatareportingfornosqlandhadoop)。这是直接链接的[新文件](http://jasperforge.org/plugins/esp_frs/file.php?id=117&group_id=428&relid=118)。当下一版本的 iReport 附带固定的 Hive 插件时，这一切都应该过时了。

# asp.net-mvc-3 - ASP.Net MVC 3 Unity 2.0 IoC

> ID：11671934
> 
> 赞同：0
> 
> 时间：2012-07-26T14:47:24.113
> 
> 标签：asp.net-mvc-3, dependency-injection, inversion-of-control, unity-container

我即将上线使用 ASP.Net MVC 3 和 Entity Framework 4.1 构建的应用程序。对于依赖注入，我使用了 Unity 2.0 IoC。我使用本教程作为指南来帮助设置 Unity IoC [http://weblogs.asp.net/shijuvarghese/archive/2011/01/21/dependency-injection-in-asp-net-mvc-3-using-dependencyresolver -and-controlleractivator.aspx](http://weblogs.asp.net/shijuvarghese/archive/2011/01/21/dependency-injection-in-asp-net-mvc-3-using-dependencyresolver-and-controlleractivator.aspx)

**今天我正在检查我的代码是否有任何最后一分钟的错误修复，并且在我的Global.asax 文件**中遇到了 **Application_Start()**方法。它看起来像这样

 **```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
        IUnityContainer container = new UnityContainer();

        container.RegisterType<IControllerActivator, CustomControllerActivator>(new HttpContextLifetimeManager<IControllerActivator>());

        //container.RegisterType<IUnitOfWork, UnitOfWork>(new ContainerControlledLifetimeManager());
        container.RegisterType<IUnitOfWork, UnitOfWork>(new HttpContextLifetimeManager<IUnitOfWork>());

        container.RegisterType<IListService, ListService>(new HttpContextLifetimeManager<IListService>());
        container.RegisterType<IShiftService, ShiftService>(new HttpContextLifetimeManager<IShiftService>());

} 
```

该应用程序运行良好，但我注意到我缺少代码行

```
DependencyResolver.SetResolver(new UnityDependencyResolver(container)); 
```

排在后面

```
IUnityContainer container = new UnityContainer(); 
```

正如我所说，没有这行代码，我的应用程序运行良好（无论如何在本地）。我已经添加了它，并且应用程序再次按预期工作。

但是，我有点担心我的 Unity IoC 设置不正确。为什么即使没有这行额外的代码，我的应用程序也能正常工作？我什至需要添加它吗？

谢谢你的帮助。

**更新**

下面显示了我的一个控制器的构造函数

```
public class AccountController : Controller
{
    private IAccountService _accountService;
    private IUserService _userService;
    private IFormsAuthenticationService _formsService;
    private INotificationService _notifyService;
    private ILoggingService _logService;

    public AccountController(ILoggingService logService, IAccountService accountService, IUserService userService, IFormsAuthenticationService formsService, INotificationService notifyService)
    {
        _accountService = accountService;
        _userService = userService;
        _formsService = formsService;
        _notifyService = notifyService;
        _logService = logService;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:09:08.503

乡亲

请忽略这个问题。我发现这条线

```
DependencyResolver.SetResolver(new UnityDependencyResolver(container)); 
```

毕竟包含在我的代码中。

自我注意 - 下次更仔细地查看您的代码！！！**

# tfs - TFS2010 帐户

> ID：11671940
> 
> 赞同：0
> 
> 时间：2012-07-26T14:47:44.707
> 
> 标签：tfs

我在我的服务器中创建了几个本地帐户，并为它们设置了密码。现在，我将这些帐户分发给我的团队成员，我希望每个人都可以更改自己的密码，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:44:05.500

他们可以像在自己的机器上一样登录到该服务器的桌面并更改密码。为了远程访问该机器的桌面，他们需要权限。确保他们拥有该权限的一种方法是转到计算机的属性并将他们的姓名或组输入远程用户：

![系统属性 - Windows Server 2008 R2 SP1 中的远程选项卡](../Images/9868cd5a0d684e567670998df039cbad.png)

# java - 获取 URL 并保存到 Blobstore：AppEngine (java)

> ID：11671942
> 
> 赞同：0
> 
> 时间：2012-07-26T14:47:54.007
> 
> 标签：java, google-app-engine, blobstore, urlfetch

下面的方法将获取图像并将其保存在 GAE blobstore：

```
 public static BlobKey saveFetchedImage(String strUrl, String fileName){
     AppEngineFile file = null;
     FileService fileService = FileServiceFactory.getFileService();
     BlobKey blobKey = null;
     try{
         URL url = new URL(strUrl);
         InputStream is = url.openStream ();

         file = fileService.createNewBlobFile("image/jpeg", fileName);
         boolean lock = true;
         FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);
         byte[] buffer = new byte[1024];

         while( is.read(buffer) >= 0)   {
             ByteBuffer bb = ByteBuffer.wrap(buffer);
             writeChannel.write(bb);
         }

         writeChannel.closeFinally();
         is.close();

         blobKey = fileService.getBlobKey(file);
     }catch(IOException ex){
         System.out.println("URL: " + strUrl);
         System.out.println("IOException - savedFethedImage: " + ex.getMessage());
     }catch(Exception e){
         System.out.println("URL: " + strUrl);
         System.out.println("Exception - saveFetchedImage:" + e.getMessage());
     }

     return blobKey;
 } 
```

它以前在尝试获取 20 个图像 URL 时有效。一组新的 100 个图像 URL 有错误。我不确定是什么导致了错误，因为`"URL: " + strUrl`没有打印出来。

抛出错误时，页面重定向到`appspot.com/_ah/upload/someString`显示以下错误：

```
Uncaught exception from servlet
java.io.IOException
    at com.google.appengine.api.files.FileServiceImpl.translateException(FileServiceImpl.java:617)
    at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:590)
    at com.google.appengine.api.files.FileServiceImpl.read(FileServiceImpl.java:539)
    at com.google.appengine.api.files.FileServiceImpl.read(FileServiceImpl.java:410)
    at com.google.appengine.api.files.FileReadChannelImpl.read(FileReadChannelImpl.java:73)
    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:272)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:324)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:176)
    at java.io.BufferedReader.read1(BufferedReader.java:202)
    at java.io.BufferedReader.read(BufferedReader.java:278)
    at java.io.BufferedReader.fill(BufferedReader.java:153)
    at java.io.BufferedReader.readLine(BufferedReader.java:316)
    at java.io.BufferedReader.readLine(BufferedReader.java:379)
    at au.com.bytecode.opencsv.CSVReader.getNextLine(Unknown Source)
    at au.com.bytecode.opencsv.CSVReader.readNext(Unknown Source)
    at dating.admin.UploadProfiles.doPost(UploadProfiles.java:74)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:81)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:100)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
Caused by: com.google.apphosting.api.ApiProxy$ApplicationException: ApplicationError: 10: 
    at java.lang.Thread.getStackTrace(Thread.java:1495)
    at com.google.apphosting.runtime.ApiProxyImpl.doSyncCall(ApiProxyImpl.java:237)
    at com.google.apphosting.runtime.ApiProxyImpl.access$000(ApiProxyImpl.java:68)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:182)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:180)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:180)
    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:68)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:101)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:50)
    at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:586)
    ... 48 more
Caused by: com.google.apphosting.api.ApiProxy$ApplicationException: ApplicationError: 10: 
    at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.failure(ApiProxyImpl.java:546)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher$1.runInContext(RpcStub.java:784)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.rpcFinished(RpcStub.java:824)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.failure(RpcStub.java:815)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.runCallbacks(RpcClientInternalContext.java:895)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.finishRpcAndNotifyApp(RpcClientInternalContext.java:798)
    at com.google.net.rpc3.impl.client.RpcNetChannel.afterFinishingActiveRpc(RpcNetChannel.java:1059)
    at com.google.net.rpc3.impl.client.RpcNetChannel.finishRpc(RpcNetChannel.java:907)
    at com.google.net.rpc3.impl.client.RpcNetChannel.handleResponse(RpcNetChannel.java:2255)
    at com.google.net.rpc3.impl.client.RpcNetChannel.messageReceived(RpcNetChannel.java:2062)
    at com.google.net.rpc3.impl.client.RpcNetChannel.access$2000(RpcNetChannel.java:143)
    at com.google.net.rpc3.impl.client.RpcNetChannel$TransportCallback.receivedMessage(RpcNetChannel.java:3117)
    at com.google.net.rpc3.impl.client.RpcChannelTransportData$TransportCallback.receivedMessage(RpcChannelTransportData.java:599)
    at com.google.net.rpc3.impl.wire.RpcBaseTransport.receivedMessage(RpcBaseTransport.java:417)
    at com.google.net.rpc3.impl.wire.RpcClientTcpTransport.parseOneMessage(RpcClientTcpTransport.java:750)
    at com.google.net.rpc3.impl.wire.RpcClientTcpTransport.parseMessages(RpcClientTcpTransport.java:634)
    at com.google.net.rpc3.impl.wire.RpcClientTcpTransport.access$100(RpcClientTcpTransport.java:37)
    at com.google.net.rpc3.impl.wire.RpcClientTcpTransport$1.dataReceived(RpcClientTcpTransport.java:295)
    at com.google.net.async3.SocketConnection.handleNetworkReadEvent(SocketConnection.java:900)
    at com.google.net.async3.SocketConnection.access$400(SocketConnection.java:43)
    at com.google.net.async3.SocketConnection$NetworkReadHandlerImpl.run(SocketConnection.java:929)
    at com.google.net.eventmanager.AbstractFutureTask$Sync.innerRun(AbstractFutureTask.java:260)
    at com.google.net.eventmanager.AbstractFutureTask.run(AbstractFutureTask.java:121)
    at com.google.net.eventmanager.EventManagerImpl.runTask(EventManagerImpl.java:578)
    at com.google.net.eventmanager.EventManagerImpl.internalRunWorkerLoop(EventManagerImpl.java:1002)
    at com.google.net.eventmanager.EventManagerImpl.runWorkerLoop(EventManagerImpl.java:884)
    at com.google.net.eventmanager.WorkerThreadInfo.runWorkerLoop(WorkerThreadInfo.java:1...(length 8274) 
```

上面的代码有什么问题吗？我知道那`fileService`仍处于实验模式。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:49:35.457

尝试以下操作：

```
 byte[] buffer = new byte[1024];

     int bytesRead = is.read(buffer, 0, buffer.length);
     while( bytesRead >= 0)   {
         ByteBuffer bb = ByteBuffer.wrap(buffer, 0, bytesRead);
         writeChannel.write(bb);
         bytesRead = is.read(buffer, 0, buffer.length);
     } 
```

# performance - 在 Windows CE 5.0 上监视进程资源

> ID：11671944
> 
> 赞同：1
> 
> 时间：2012-07-26T14:47:59.580
> 
> 标签：performance, memory, windows-ce, handles

我正在开发一个使用两个商业库的 WinCE 5.0 应用程序。当应用程序开始调用第二个库时，它变得更慢，然后在使用了一些之后，它挂起并且整个操作系统冻结。它必须重新启动才能再次工作。问题是我在没有物理设备（测试人员安装每个版本并运行测试）和没有模拟器（设备提供商不促进操作系统映像）的情况下开发它。我的直觉告诉我，第二个库正在使用 WinCE 5.0 进程的所有可用资源（基本上是句柄和内存）。我必须向图书馆供应商证明这一点。所以我想在我的日志中添加一些一般的进程和系统信息。你能推荐我调用哪些 API 来在 CE 中获取这些信息吗？

我真的很感激任何提示提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:07:47.773

Windows CE 为[名为`CeLog`](http://msdn.microsoft.com/en-us/library/aa462467.aspx). CeLog 是 Kernel Tracker 用来收集和显示其信息的工具。如果需要，您可以一直进行调度程序调用和线程迁移。使用 CeLog 的真正危险在于收集太多数据，因此很难理解它，但如果您将收集过滤到您的流程，那应该会有所帮助。您可以将数据收集到日志文件中，然后使用 Kernel Tracker 打开并查看该数据。

以下是一些很好的信息起点：

*   [远程内核跟踪器简介](http://blogs.msdn.com/b/sloh/archive/2005/05/17/introduction-to-remote-kernel-tracker.aspx)
*   [更多关于远程内核跟踪器](http://blogs.msdn.com/b/sloh/archive/2005/05/21/remote-kernel-tracker-2.aspx)
*   [CeLogFlush.exe](http://msdn.microsoft.com/en-us/library/ms905175.aspx)（特别是“使用 CeLogFlush 在独立设备上收集数据”部分）
*   [实现自定义事件跟踪库](http://msdn.microsoft.com/en-us/library/ms905178.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T12:17:07.777

嵌入式 Visual C++ 4 包含可以做到这一点的“远程性能监视器”。微软前段时间将 EVC4 撤回为免费下载，但仍然可以从 MSDN 下载或在 Internet 上找到。

对于 Service Pack 4，它应该适用于 WinCE 5.0。它似乎不适用于 Windows Embedded 6.0 和更新版本。

# search - 从中心点或边界框快速“本地”搜索

> ID：11671945
> 
> 赞同：1
> 
> 时间：2012-07-26T14:48:02.057
> 
> 标签：search, heroku, search-engine, elasticsearch

建立本地企业目录。使用[弹性搜索](http://www.elasticsearch.org/)作为我们的搜索提供者并且有一点进退两难的境地：

我们真正想做的是“中心点”搜索。但据我了解，真正的“中心点”搜索比“边界框”搜索慢得多。因此，我们在用户正在搜索的一般区域周围使用“边界框”搜索。这对于像“tacos”这样的搜索非常有用，因为这个搜索总是有很多结果。边界框搜索不适用于使用不太常见的关键字的搜索或搜索该区域内但位于边界框之外的特定企业。

我考虑过一些解决方案，但我不确定是否有任何好处：

*   进行多次“边界框”搜索，第一次使用较小的边界框，如果没有或很少找到结果，则使用较大的边界框进行另一次搜索。
*   使用“中心点”搜索，即使它较慢。此搜索应大致按照距中心点的地理距离顺序返回结果（结合弹性搜索“优先考虑”结果的其他方式。

我看到像[Yelp.com](http://www.yelp.com)这样的网站似乎已经处理了这个问题。我只是不确定最好的方法是什么。

我们在 Heroku 服务器上运行 Django。Out elastic search provider is [Found](https://saas.found.no/)。

非常感谢您的意见！

# c# - 使用 LINQ 删除 ListView.SelectedItems 的一些项目

> ID：11671946
> 
> 赞同：0
> 
> 时间：2012-07-26T14:48:05.943
> 
> 标签：c#, .net, linq, c#-4.0, listview

是否有从 ListView.SelectedItems 中删除特定 itemS 的简单解决方案？

我有一个 ListView 绑定到一个`ObservableCollection<MyClass>`（MyClass 有一些属性，例如名称）。

就像是：

```
mylistview.SelectedItems.Remove(FROM myClassItem IN mylistview.SelectedItems WHERE myClassItem.Name == "test"); 
```

当然，它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:55:45.640

```
foreach (var item in mylistview.SelectedItems
                               .Cast<ListViewItem>()
                               .Where(lvi => lvi.Name == "test")
    item.Remove(); 
```

# c# - GridView 文本框在 Web 选项卡更改时未清除

> ID：11671947
> 
> 赞同：2
> 
> 时间：2012-07-26T14:48:06.497
> 
> 标签：c#, asp.net, .net, gridview, infragistics

*我有一个具有 2 级 web 选项卡的页面。内容选项卡 FIXED 和 VARIABLE 依次具有 Web 选项卡。此 Web 选项卡加载有一个具有网格视图的用户控件。我的问题是 Gridview 中的文本框在从一个子选项卡转到下一个子选项卡时未清除。我尝试了所有可能的方法：1.将网格绑定到 null（数据源和 DatasoruceId）2.网格处置 3.网格列清除没有运气！！！..帮助！！！注意：我正在从 javascript 修改文本框中的数据。*

```
<ig:Webtab id="wi" runat="server" width="938px" displaymode="Scrollable" meta:resourcekey="wtabInvestmentTypeResource1">
                                <ClientEvents SelectedIndexChanging="webTab_SelectedIndexChanging" />
                                <AutoPostBackFlags SelectedIndexChanged="On" />
                                <Tabs>
                                    <ig:ContentTabItem runat="server" Text="Variable Investment Type" meta:resourcekey="ContentTabItemResource1">
                                        <Template>
                                            <div class="clear vspacesmall hspacenarrow">
                                            </div>
                                            <ig:WebTab ID="wv" runat="server" Width="908px" DisplayMode="Scrollable" ClientIDMode="Static"
                                                meta:resourcekey="wtabVariableResource1">
                                                <ClientEvents SelectedIndexChanging="webTab_SelectedIndexChanging" />
                                                <AutoPostBackFlags SelectedIndexChanged="On" />     
                                            </ig:WebTab>
                                        </Template>
                                    </ig:ContentTabItem>
                                    <ig:ContentTabItem runat="server" Text="Fixed Investment Type" meta:resourcekey="ContentTabItemResource2">
                                        <Template>
                                            <div class="clear vspacesmall hspacenarrow">
                                            </div>
                                            <ig:WebTab ID="wf" runat="server" Width="908px" DisplayMode="Scrollable" class="tabs"
                                                meta:resourcekey="wtabFixedResource1">
                                                <ClientEvents SelectedIndexChanging="webTab_SelectedIndexChanging" />
                                                <AutoPostBackFlags SelectedIndexChanged="On" />
                                            </ig:WebTab> 
```

Web 选项卡加载具有以下 gridview 的用户控件：

```
 <div class="clear vspacesmall gridtablearea scrollPanel-horizontal Contol-Max-Height">
                <asp:UpdatePanel ID="upBuyMultipleGetDiscount" runat="server" UpdateMode="Conditional">
                    <ContentTemplate>
                        <asp:GridView ID="gvInvestmentDetails" runat="server" OnRowDataBound="gvInvestmentDetails_RowDataBound"
                            TabIndex="5" AutoGenerateColumns="False" CssClass="gridtable scrollPanel-horizontal" Width="100%" meta:resourcekey="gvInvestmentDetails_DefaultResource1"
                           EnableViewState="true" ViewStateMode="Enabled" ShowFooter="true" OnRowCommand="gvInvestmentDetails_Row_Command">
                            <Columns>
                                <asp:BoundField DataField="InvestmentTypeId" />
                                <asp:BoundField DataField="CustomerCombinationId" />
                                <asp:BoundField DataField="ProductId" />

                                <asp:TemplateField HeaderText="Account"  ItemStyle-Width="100px" meta:resourcekey="Account">
                                    <ItemTemplate>
                                        <asp:Label ID="lblAccountName" runat="server" Text='<%# Eval("CustomerCombinationName") %>'></asp:Label>
                                    </ItemTemplate>                                
                                </asp:TemplateField>

                                <asp:TemplateField HeaderText="Products" ItemStyle-Width="200px" meta:resourcekey="Products">
                                    <ItemTemplate>
                                        <asp:Label ID="lblProductName" runat="server" Text='<%# Eval("ProductName") %>'></asp:Label>
                                    </ItemTemplate>
                                    <FooterTemplate>
                                        <asp:Label ID="lblTotal" CssClass="fRight boldText" ForeColor="#656565" runat="server" Text='TOTAL :' meta:resourcekey="lblTotal"></asp:Label>
                                    </FooterTemplate>
                                </asp:TemplateField>

                                <asp:TemplateField HeaderText="Phase Investment Amount"  meta:resourcekey="PhaseInvestmentAmount" >
                                    <ItemTemplate>
                                        <asp:Repeater ID="rptrPhases" runat="server" ClientIDMode="Static"  OnDataBinding="rptrPhases_OnDataBinding">
                                            <ItemTemplate>
                                                <div style="float: left; padding: 4px;">
                                                <table id="PhaseDetails">
                                                <tr>
                                                     <td>
                                                     <tr>
                                                    <asp:Label ID="lblPhaseID" runat="server" Text='<%# Eval("PhaseID") %>' Visible="False"></asp:Label>                                               
                                                    <asp:Label ID="lblPhaseName" Class="vspacesmall" runat="server" Text='<%# Eval("PhaseName") %>' ></asp:Label><br />
                                                    <asp:TextBox ID="txtPhaseAmount" runat="server" Text='<%# Eval("PhaseAmount", "{0:F2}") %>'  CssClass="tar"
                                                        ClientIDMode="Static" Width="80px" MaxLength="27" onpaste="return false;"  ViewStateMode="Enabled"
                                                        meta:resourcekey="txtPhaseAmount"></asp:TextBox>
                                                        </tr>
                                                        <tr>
                                                   <asp:Label ID="lblUsageAmount" runat="server" Visible="false" Text='<%# Eval("PhaseUpdateAmount", "{0:F2}") %>'></asp:Label> 
                                                    </tr>
                                                   </td>
                                                   </tr>
                                                   </table>
                                                </div>
                                            </ItemTemplate>
                                        </asp:Repeater>
                                    </ItemTemplate>
                                    <FooterTemplate>
                                        <asp:Repeater ID="rptTotalAmount" runat="server" ClientIDMode="Static">
                                            <ItemTemplate>
                                             <div style="float: left; padding: 4px;">
                                             <table>
                                             <tr>
                                             <td>
                                                    <asp:TextBox ID="txtPhaseTotal" Text='<%# Eval("PhaseAmount", "{0:F2}") %>' Width="80px" CssClass="tar boldText" 
                                                    ForeColor="#656565" runat="server" ViewStateMode="Enabled" ClientIdMode="Static"  autocomplete="off"  ></asp:TextBox>
                                                    </td>
                                                    </tr>
                                                </table>
                                                </div>
                                            </ItemTemplate>

                                        </asp:Repeater>
                                    </FooterTemplate>
                                </asp:TemplateField>

                                <asp:TemplateField HeaderText="Roles" ItemStyle-Width="150px"   meta:resourcekey="Roles">
                                    <ItemTemplate>
                                        <asp:CheckBoxList ID="chckRoleList"  runat="server" DataTextField="RoleName"  
                                            DataValueField="RoleId" EnableViewState="true" ViewStateMode="Enabled"  onclick="checkBoxLstChanged(this.id,'chkSelectAll');SetIsChanged('1');">
                                        </asp:CheckBoxList>
                                        <asp:RadioButtonList ID="rdbRoleList" runat="server" DataTextField="RoleName" 
                                            DataValueField="RoleId" EnableViewState="true" ViewStateMode="Enabled">
                                        </asp:RadioButtonList>
                                    </ItemTemplate>
                                    <FooterTemplate>
                                        <asp:CheckBox ID="chckSelectAll" runat="server" Text="Select All" onclick="setAllCheckBoxes('chckRoleList',this);SetIsChanged('1');" meta:resourcekey="chckSelectAll">
                                        </asp:CheckBox>
                                        <br>
                                        <asp:Button ID="btnRemove" runat="server" CssClass="btnStyle fLeft" Text="Remove" OnClientClick="return ValidateRemoveRoles('gvInvestmentDetails')"
                                             CommandName="RemoveRoles" CommandArgument='<%# Container.DataItemIndex %>'
                                              meta:resourcekey="btnRemove"  />
                                    </FooterTemplate>
                                </asp:TemplateField>

                                <asp:TemplateField HeaderText="InvestmentAmount" meta:resourcekey="InvestmentAmount">
                                    <ItemTemplate>
                                        <asp:TextBox ID="txtInvAmt" Width="80px" runat="server" Text='<%# Eval("InvestmentAmount","{0:F2}") %>'
                                           ClientIdMode="Static"  ViewStateMode="Enabled" CssClass="fRight tar  boldText" ></asp:TextBox >
                                    </ItemTemplate>
                                    <FooterTemplate>
                                        <asp:TextBox ID="txtTotalInvestment" ClientIdMode="Static" Width="80px" ViewStateMode="Enabled"  CssClass="fRight tar boldText "   ForeColor="#656565" runat="server" />
                                    </FooterTemplate>
                                </asp:TemplateField>
                                     <asp:BoundField DataField="RecordStatus"  />
                            </Columns>
                           <%-- <FooterStyle HorizontalAlign="Left" CssClass="boldText" ForeColor="#656565" />--%>
                        </asp:GridView>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </div> 
```

加载 USer 控件的后端代码：

```
 private void LoadInvestmentDetails(int investmentTypeId, WebTab currentWebTab, int tabIndex)
        {
            Panel panel = GetPanelToBeLoaded(investmentTypeId);

            if (currentWebTab.Tabs[tabIndex].Controls.Count == 0)
            {

                    currentWebTab.Tabs[tabIndex].Controls.Add(panel);
                    budgetDetailsControl.Initialize(investmentTypeId);
                    budgetDetailsControl.InvestmentDetailsSaved += new ProjectInvestmentDetailsSavedEventHandler(BudgetDetailsControl_BudgetDetailsSaved);
                    PreviouslyLoadedTab = int.Parse(currentWebTab.Tabs[currentWebTab.SelectedIndex].UserControlUrl);

            }
      // other code 
         }

    private Panel GetPanelToBeLoaded(int investmentTypeId)
    {
        System.Web.UI.Control userControl = GetInvestmentDetailsUserControlUrl();
        Panel panel = new Panel();
        panel.Controls.Add(userControl);
        budgetDetailsControl = (IProjectInvestmentDetailsControl)userControl;
        budgetDetailsControl.InvestmentTypeID = investmentTypeId;
        return panel;
    }

        private System.Web.UI.Control GetInvestmentDetailsUserControlUrl()
        {
            return LoadControl(ProjectCommonKeys.URL_PROJECT_BUDGET_DETAILS);
        } 
```

Usercontrol实现IprojectInvestmentDetails接口，首先调用UC的initialize函数进行绑定等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:36:50.257

我解决了这个问题。绑定到子选项卡的每个用户控件都应该被赋予一个唯一的 ID。否则即使我们绑定了新数据，来自早期实例的数据也会保留。

.

```
private Panel GetPanelToBeLoaded(int investmentTypeId)
        {
            System.Web.UI.Control userControl = GetInvestmentDetailsUserControlUrl();
            **userControl.ID = investmentTypeId.ToString();**
            Panel panel = new Panel();
            panel.Controls.Add(userControl);
            projectInvestmentDetailsControl = (IProjectInvestmentDetailsControl)userControl;
            projectInvestmentDetailsControl.InvestmentTypeID = investmentTypeId;
            projectInvestmentDetailsControl.UserContext = userContext;
            projectInvestmentDetailsControl.PlanningWizardDataManager = PlanningWizardDataManager;
            projectInvestmentDetailsControl.PlanningServiceWrapper = PlanningServiceWrapper;

            return panel;
        }` 
```

谢谢fr的帮助...

# ios - 无法将 Flurry Analytics 添加到我的 iOS 项目

> ID：11671953
> 
> 赞同：3
> 
> 时间：2012-07-26T14:48:21.060
> 
> 标签：ios, flurry

我想尝试 Flurry 分析，但不想尝试任何广告或视频内容。这是我刚刚从他们的网站上获取的最新版本 4.0.1。

将目录添加到我的项目后，我得到了这个：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_MPMoviePlayerController", referenced from:
  objc-class-ref in libFlurryAds.a(FlurryVideoPlayer.o)
  "_MPMoviePlayerWillEnterFullscreenNotification", referenced from:
  -[FlurryVideoPlayer init] in libFlurryAds.a(FlurryVideoPlayer.o)
  "_MPMoviePlayerDidEnterFullscreenNotification", referenced from:
  -[FlurryVideoPlayer init] in libFlurryAds.a(FlurryVideoPlayer.o)
  "_MPMoviePlayerLoadStateDidChangeNotification", referenced from:
  -[FlurryVideoPlayer playVideo:view:ad:] in libFlurryAds.a(FlurryVideoPlayer.o)
  -[FlurryVideoPlayer moviePlayerLoadStateChanged:] in libFlurryAds.a(FlurryVideoPlayer.o)
  "_MPMoviePlayerPlaybackStateDidChangeNotification", referenced from:
  -[FlurryVideoPlayer playVideo:view:ad:] in libFlurryAds.a(FlurryVideoPlayer.o)
  "_MPMoviePlayerContentPreloadDidFinishNotification", referenced from:
  -[FlurryVideoPlayer playVideo:view:ad:] in libFlurryAds.a(FlurryVideoPlayer.o)
  -[FlurryVideoPlayer moviePreloadDidFinish:] in libFlurryAds.a(FlurryVideoPlayer.o)
  "_MPMoviePlayerPlaybackDidFinishNotification", referenced from:
  -[FlurryVideoPlayer playVideo:view:ad:] in libFlurryAds.a(FlurryVideoPlayer.o)
  -[FlurryVideoPlayer moviePreloadDidFinish:] in libFlurryAds.a(FlurryVideoPlayer.o)
  -[FlurryVideoPlayer stopMovie] in libFlurryAds.a(FlurryVideoPlayer.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:37:20.830

在适用于 iOS 的 Flurry SDK v4.x 中，可以仅集成分析功能。请参考 SDK 文件夹中的以下文件：Flurry/Flurry.h、Flurry/libFlurry.a 和 Analytics-README.pdf。有其他文件夹可用于 Flurry 广告，仅当您希望在您的应用程序中显示 Flurry 广告时才需要这些文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T15:03:18.927

然后你需要从你的项目中删除所有的flurry库（例如：libFlurryAds.a）并离开libFlurryAnalitics.a

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:24:35.480

我想通了——Flurry API 发生了变化，因此您不再发出信号`FlurryAnalytics`，而是发出信号`Flurry`。这记录在文件的评论中，`.h`但几乎没有。

我还必须`FlurryAds`从下载的 API (4.0.1) 中删除该目录，因为我没有安装它的依赖项。

# javascript - is(':hover') 适用于 jsfiddle 但不适用于本地文件

> ID：11671955
> 
> 赞同：0
> 
> 时间：2012-07-26T14:48:28.633
> 
> 标签：javascript, jsfiddle

[这个例子](http://jsfiddle.net/AyAZx/194/)有效，但如果我像这样创建本地文件：

```
<script src="jquery-big.js"></script>
<div id="test">
    <div id="hello">click</div>
    <div id="no-hello">click</div>
</div>

<script>
$('#test').click(function() {
    if ($('#hello').is(':hover')) {
        $('#hello').html($('#hello').html()+' strange ');
    }
});
</script> 
```

（从 jsfiddle 中删除了所有 utf-8 错误符号） - 没有任何效果，并且控制台中没有错误。签入谷歌浏览器 19.0.1084.46。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:03:51.687

试试这样~

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>question</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        //document ready script here
        $(document).ready(function() {
            $('#test').click(function() {
                if ($('#hello').is(':hover')) {
                    $('#hello').html($('#hello').html()+' strange ');
                }
            });
        });
    </script>
</head>
<body>
    <!-- element below-->
    <div id="test">
        <div id="hello">click</div>
        <div id="no-hello">click</div>
    </div>
</body>
</html> 
```

# ruby-on-rails - 大礼包安装错误“大礼包（> = 0）x86-mingw32取决于雷神（= 0.15.4）”

> ID：11671958
> 
> 赞同：1
> 
> 时间：2012-07-26T14:48:33.187
> 
> 标签：ruby-on-rails, spree, thor

尽管我的 gem 列表中有两个版本，但在 rails 上安装 spree 会导致依赖于“thor”的多个错误。

#

Bundler 找不到 gem "thor" 的兼容版本：在 Gemfile: spree (>=0) x86-mingw32 依赖于 thor (= 0.14.6) x86-mingw32

```
sass-rails (~> 3.23) x86-mingw32 depends on 
  thor (= 0.15.4) 
```

#

注意：我使用的版本是：

导轨 3.2.6

大礼包 1.1.2

红宝石 1.9.3p194

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T23:36:10.883

尽管您询问的是特定的安装错误，但我假设因为听起来您正在设置一个开发环境，因此以下内容可能会有所帮助：

在 Windows 上设置 Spree 可能有点痛苦，使用 Vagrant 和 VirtualBox 是解决这些问题的好方法。这个 Vagrant 设置和引导脚本安装了最新版本的 Rails、Ruby 和 Spree，但您应该能够根据自己的喜好对其进行修改（专注于 bootstrap.sh）：

[https://github.com/nurelm/spree_vagrant](https://github.com/nurelm/spree_vagrant)

# actionscript-3 - AS3 获取点击了哪个movieclip

> ID：11671961
> 
> 赞同：0
> 
> 时间：2012-07-26T14:48:41.067
> 
> 标签：actionscript-3, flash, movieclip

所以，我做了一个 for 循环来获取我的项目中的几个按钮。这是一个问题，我需要一个按钮来快速选择并导航到那里的任何问题。我可以手动完成所有这些，但我的代码不仅会很长而且令人困惑，而且还会出现问题，因为问题的数量并不总是相同。

所以现在我有：

```
function SetQuestionSquares():void{
    for(var i:Number = 1; i <= TestProperties.QuestionLimit;i++){
        var QuestionSquare:questionsquare = new questionsquare;
        QuestionSquare.buttonMode = true;
        QuestionSquare.mouseChildren = false;
        QuestionSquare.x = NavLeft.x + (20 * i);
        QuestionSquare.y = NavLeft.y;
        QuestionSquare.questionsquaretext.text = i.toString();
        addChild(QuestionSquare);
        QuestionSquare.addEventListener(MouseEvent.CLICK, GoToQuestionNumber);
    }
    addChild(NavLeft);
    addChild(NavRight);
}

function GoToQuestionNumber(e:MouseEvent):void{
    WhichQuestion = ???; //I don't know what goes here. 
    UpdateQuestions();
    trace("testing"); //Gets called correctly, so its working.
} 
```

我的问题是确定点击了哪个方块。我需要有一些方法来获取“e”（点击）事件，所以我知道用户点击了哪个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:51:10.060

您需要[Event](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html)对象的[.target](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#target)属性：

```
WhichQuestion = e.target as questionsquare; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:54:11.587

```
function GoToQuestionNumber(e:MouseEvent):void{
    var WhichQuestion:DisplayObject = e.currentTarget as DisplayObject;
    UpdateQuestions();
    trace("testing");
} 
```

# php - 使用 vi 编辑 MySQL 的 my.cnf 时出现问题

> ID：11671962
> 
> 赞同：0
> 
> 时间：2012-07-26T14:48:43.537
> 
> 标签：php, mysql, vi, my.cnf

> **可能重复：**
> [如何使用 mysql 在 excel 中显示超过 50 个结果？](https://stackoverflow.com/questions/11634997/how-can-i-get-more-then-50-results-to-display-in-excel-using-mysql)

我有一个问题：我有一个 MySQL 脚本获取结果并允许客户通过 Excel 导出查看他们的结果。但是，当网站显示更多结果时，电子表格仅限于 50 个结果，有时最多 1500 个。

我已经搜索过，看来我必须编辑`/etc/my.cnf`. 我尝试对其进行编辑并粘贴更多代码，但是当我退出插入模式时，一半的代码被切断 - 我错过了什么吗？

这就是我当前的全部内容`/etc/my.cnf`——我意识到这是默认设置。我是 vi 编辑的新手，所以请多多包涵。

```
[mysqld]
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
user=mysql
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:19:01.543

这可能不是由于 `my.cnf`. 您的评论中的查询框架确实`LIMIT 0,50`如此，因此返回 50 行是您应该期望的确切行为。从查询中删除`LIMIT 0, 50`子句以使其返回所有行。

### 评论后更新：

删除该`LIMIT`子句后，OP 报告脚本超时。PHP中解决这个问题的方法是增加`max_execution_time`via：

```
set_time_limit(300);
// OR
ini_set('max_execution_time', 300); 
```

# maven - 如何在 maven-apt-plugin 中定义额外的源目录

> ID：11671967
> 
> 赞同：1
> 
> 时间：2012-07-26T14:49:16.937
> 
> 标签：maven, maven-plugin

在 maven 目标“生成”期间，我们在 target/java 目录中生成了一些 JPA 实体。但并非所有这些都是生成的，因为其中一些位于我们的 src/main/java 目录中。有没有办法配置插件来指定多个源目录？

我试过了，`<additionalSourceRoots>target/java<additionalSourceRoots>`但它不起作用。我还尝试将目标/java 减半，但这是唯一处理到未生成的主代码中的其他 JPA 实体的目录。

我知道我可以尝试一种解决方法，尝试将生成的源复制到另一个目录并将其他实体也放在那里，但我想知道是否有一个“干净”的解决方案。

*已编辑*

在安德烈回答之后，我也尝试过这个，但仍然无法正常工作。maven-apt-plugin 看不到位于 target/java 中的类生成类。我试过用`<additionalSourceRoots>`不同的语法没有任何运气.. :(

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <version>1.7</version>
            <executions>
              <execution>
                <id>add-source</id>
                <phase>generate-sources</phase>
                <goals>
                  <goal>add-source</goal>
                </goals>
                <configuration>
                  <sources>
                    <source>target/java</source>                        
                  </sources>
                </configuration>
              </execution>
            </executions>
        </plugin>
        <plugin>
          <groupId>com.mysema.maven</groupId>
          <artifactId>maven-apt-plugin</artifactId>
          <version>1.0.2</version>
          <executions>
            <execution>
              <goals>                   
                <goal>process</goal>
              </goals>
              <configuration>
                <additionalSourceRoots>
                    <additionalSourceRoot>target/java</additionalSourceRoot>
                </additionalSourceRoots>                    
                <outputDirectory>target/generated-sources/java</outputDirectory>
                <processor>com.mysema.query.apt.jpa.JPAAnnotationProcessor</processor>
              </configuration>
            </execution>
          </executions>
        </plugin> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:18:22.213

Maven[构建助手插件](http://mojo.codehaus.org/build-helper-maven-plugin/usage.html)将完成这项工作。

然后只需使用“additionalSourceRoots”参数在 maven-apt-plugin 中添加更多源根。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T08:20:31.003

我们的问题是我们在**directory1**和**directory2中有一些类被****directory3**中的类使用。**directory3**中的类是带有 JPA 注释的类。我们还发现重要的是将带有 JPA 注释类的目录放在最后一个目录，否则 apt 插件没有生成任何类。

令人惊讶的是，我尝试添加额外的 sourceDirectory 标签，它对我有用：

```
 <plugin>
        <groupId>com.mysema.maven</groupId>
        <artifactId>maven-apt-plugin</artifactId>
        <version>1.0</version>
        <executions>
            <execution>
                <phase>generate-sources</phase>
                <goals>
                    <goal>process</goal>
                </goals>
                <configuration>
                    <sourceDirectory>__directory1__</sourceDirectory>
                    <sourceDirectory>__directory2__</sourceDirectory>
                    <sourceDirectory>__directory3__</sourceDirectory>
                    <outputDirectory>target/generated-sources</outputDirectory>
                    <processor>com.mysema.query.apt.jpa.JPAAnnotationProcessor</processor>
                </configuration>
            </execution>
        </executions>
    </plugin> 
```

# file - 诊断 write_file 在 CodeIgniter 中不起作用的原因

> ID：11671968
> 
> 赞同：1
> 
> 时间：2012-07-26T14:49:17.413
> 
> 标签：file, codeigniter

我有下面的代码。在我的主要 CodeIgniter PHP 索引文件所在的基本目录中，我有一个权限为 666 的目录 pagemodules。我想要做的是在其中写入以下文件名格式的文件：`.main.control.function.var.something.mod`

要在此文件夹中动态创建文件，我使用以下代码检查文件是否存在，如果不存在，则在其中创建一个空格。

唯一的问题是，我每次都失败了。我尝试将 dir 移动到每个可能的目录中，以查看它是否是文件路径问题，但这没有帮助。CodeIgniter wiki 也没有太大帮助，因为它没有提供有关如何从文件帮助程序诊断错误的指示。并且没有任何错误被抛出......

我怎样才能让 CodeIgniter 抛出一个我可以处理的错误？

我可以开始使用`fopen`，但我更喜欢使用 CodeIgniter，因为它易于使用。

```
error_reporting(E_ALL);
ini_set("display_errors", 1);
$this->load->helper('file');
if($createfile!=null)
{
    $filepath = './pagemodules/'.str_replace('/','.',$data['page']->url).'.mod';
    $file = read_file($filepath);
    if($file === false)
    {
        $test = write_file($filepath,' ','w+'); 
        if($test)
        {
            echo "we have written $filepath";
        }
        else
        {
            echo 'fail '.$filepath;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:53:53.903

好吧，仅用于调试目的：

替换`'./pagemodules/`为`'FCPATH.'pagemodules/`以获得页面模块的绝对路径（如果它位于 index.php codeigniter 目录）。

为避免无效路径，您可以使用...

```
get_filenames('path/to/pagemodules/') 
```

...获取它的文件并确认它是否正确。此函数返回并带有文件名的数组。

请记住，您可以使用`FCPATH`常量来获取 Codeigniter 安装的绝对路径。

# php - 面向对象风格 PHP 中的命名空间使用

> ID：11671970
> 
> 赞同：0
> 
> 时间：2012-07-26T14:49:21.120
> 
> 标签：php, namespaces

我一直在摆弄 PHP 中的命名空间，并试图让它工作，但它失败了

让我展示示例代码：

测试\视图\类\MainController.php

```
<?php
namespace test\views\classes;

class MainController
{
    public function echoData()
    {
        echo 'ECHOD';
    }
} 
```

测试\视图\index.php

```
<?php
require_once '..\autoloader\autoloader.php';

use test\views\classes\MainController;

$cont = new MainController();

$cont->echoData(); 
```

测试\自动装载机\自动装载机.php

```
<?php

spl_autoload_register(null, FALSE);

spl_autoload_extensions('.php');

function classLoader($class)
{
    $fileName = strtolower($class) . '.php';

    $file = 'classes/' . $fileName;

    if(!file_exists($file))
    {
        return FALSE;
    }

    include $file;
}

spl_autoload_register('classLoader'); 
```

引发错误：

```
Fatal error: Class 'test\views\classes\MainController' not found in ..\test\views\index.php on line 6 
```

我错过了什么！

编辑：当 index.php 和 maincontroller.php 都在同一目录中而不使用自动加载器但使用 require_once('maincontroller.php'); 时，代码工作正常。如果它们位于不同的目录并具有自动加载功能，则不起作用。任何人都可以解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:00:26.827

您的代码中存在多个问题：

命名空间分隔符 (\) 在 Linux/Unix 中不是有效的路径分隔符。你的自动加载器应该做这样的事情：

```
$classPath = str_replace('\\', '/', strtolower($class)) . '.php';
if (!@include_once($classPath)) {
 throw new Exception('Unable to find class ' .$class);
} 
```

另外，路径都是相对的。您应该设置包含路径。如果你的网站结构是这样的：

```
bootstrap.php
lib/
  test/
    views/
      index.php
      classes/
        maincontroller.php
  autoloader/
    autoloader.php 
```

您的 bootstrap.php 应该类似于：

```
$root = dirname(__FILE__);
$paths = array(
    ".",
    $root."/lib",
    get_include_path()
);
set_include_path(implode(PATH_SEPARATOR, $paths));
include 'lib/test/autoloader/autoloader.php'; 
```

现在，在您的 test/views/index.php 中，您可以只包含引导程序：

```
include '../../bootstrap.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:28:14.870

向你的类加载器添加一个 die 语句：

```
$file = 'classes/' . $fileName;

die('File ' . $file . "\n"); 
```

你得到

```
File classes/test\views\classes\maincontroller.php 
```

那真的是您的主控制器类所在的地方吗？

# .net - UrlEncode .net 在字符串末尾添加 %00 个字符

> ID：11671972
> 
> 赞同：3
> 
> 时间：2012-07-26T14:49:33.287
> 
> 标签：.net, vb.net, urlencode

当我在某些情况下对字符串（即 xml 文件）进行 urlEncode 时，它​​会在文件末尾添加 %00 字符。我想知道为什么会发生这种情况以及是否可以防止（我总是可以删除 %00 个字符）。xml 文件是使用 xmlwriter 创建的。奇怪的是我使用相同的代码来创建其他 xml 文件，并且在对它们进行编码后它不会添加 %00 个字符。

例子：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE peticion >
<peticion>
    <nombre>Info hotel</nombre>
    <agencia>HOTUSA</agencia>
    <tipo>15</tipo>
</peticion> 
```

编辑：创建 xml 这就是我所做的。

```
Dim xmlWriterSettings As New System.Xml.XmlWriterSettings
        With xmlWriterSettings
            .Encoding = Encoding.GetEncoding("iso-8859-1")
            .OmitXmlDeclaration = False
            .Indent = True
        End With

        Dim ms As New IO.MemoryStream

        Using writer As System.Xml.XmlWriter = System.Xml.XmlWriter.Create(ms, xmlWriterSettings)
            With writer
                .WriteDocType("peticion", Nothing, Nothing, Nothing)
                .WriteStartElement("peticion")
                .WriteElementString("nombre", "Info hotel")
                .WriteElementString("agencia", "HOTUSA")
                .WriteElementString("tipo", "15")
                .WriteEndElement()
            End With
        End Using

        Dim xml As String = Encoding.GetEncoding("iso-8859-1").GetString(ms.GetBuffer)

Dim XmlEncoded As String = HttpUtility.UrlEncode(xml) 
```

XmlEncoded 包含：

```
%3c%3fxml+version%3d%221.0%22+encoding%3d%22iso-8859-1%22%3f%3e%0d%0a%3c!DOCTYPE+peticion+%3e%0d%
0a%3cpeticion%3e%0d%0a++%3cnombre%3eInfo+hotel%3c%2fnombre%3e%0d%0a++%3cagencia%3eHOTUSA%3c%
2fagencia%3e%0d%0a++%3ctipo%3e15%3c%2ftipo%3e%0d%0a%3c%2fpeticion%3e%00%00%00%00%00%00%00%00%00%
00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%
00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%
00%00%00%00%00%00%00%00%00%00%00%00%00%00 
```

所有这些 %00 是从哪里来的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T16:08:07.647

注释[`MemoryStream.GetBuffer`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.getbuffer.aspx)提供了适当的指导：

> 请注意，缓冲区包含可能未使用的已分配字节。例如，如果将字符串“test”写入 MemoryStream 对象，则从 GetBuffer 返回的缓冲区长度为 256，而不是 4，其中 252 个字节未使用。要仅获取缓冲区中的数据，请使用[ToArray](http://msdn.microsoft.com/en-us/library/system.io.memorystream.toarray.aspx)方法；但是，ToArray 会在内存中创建数据的副本。

像这样修改您的代码：

```
Dim xml As String = Encoding.GetEncoding("iso-8859-1").GetString(ms.ToArray) 
```

实际上，在这种情况下，更好的选择是使用 a [`StringBuilder`](http://msdn.microsoft.com/en-us/library/ms162619)：

```
Dim sb As New StringBuilder
Using writer As XmlWriter = XmlWriter.Create(sb, xmlWriterSettings)
    ' ...
End Using        

Dim xml as String = sb.ToString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T15:48:50.057

我相信它`ms.GetBuffer`包含的内容比你想象的要多。 `%00`表示一个 NULL，我的猜测是缓冲区最后包含填充 NULL。

而是这样做：

```
Using ms As New IO.MemoryStream
    Dim writer As System.Xml.XmlWriter = System.Xml.XmlWriter.Create(ms, xmlWriterSettings)

    With writer
        .WriteDocType("peticion", Nothing, Nothing, Nothing)
        .WriteStartElement("peticion")
        .WriteElementString("nombre", "Info hotel")
        .WriteElementString("agencia", "HOTUSA")
        .WriteElementString("tipo", "15")
        .WriteEndElement()
    End With

    ms.Position = 0
    Dim xml As String = ms.ReadToEnd()
    Dim XmlEncoded As String = HttpUtility.UrlEncode(xml)
End Using 
```

有关从. [_](https://stackoverflow.com/questions/78181/how-do-you-get-a-string-from-a-memorystream)`MemoryStream`

请参阅[此文档](http://msdn.microsoft.com/en-us/library/system.io.memorystream.getbuffer.aspx)，详细说明缓冲区包含可能未使用的已分配字节这一事实。

# android - 可展开的列表视图或可点击的线性布局

> ID：11671973
> 
> 赞同：3
> 
> 时间：2012-07-26T14:49:34.310
> 
> 标签：android, android-layout, expandablelistview

我正在尝试在下图中创建类似（在油漆中创建非常糟糕）的东西： ![我想要的是](../Images/32f2a3a3750323d40019d23a983f18f2.png)

我只有4个项目，不会更多。这些项目包含两个文本视图。但是，当您单击一个项目时，我希望它通过三个额外的按钮将其扩展（如项目 2）到底部。如果有一些不错的展开动画，那就太好了。我不希望这个列表滚动，它只需要适合我的屏幕。而且只有一个可以扩展。

我认为有两种选择，但也许我错过了一些东西。1）创建一个itemlayout.xml，包含一个线性布局或包含额外按钮的东西，设置为linearlayoutbuttoncontainer.setvisibility(View.GONE)。然后建立一个开关，关闭除点击的其他开关，并将点击的项目的可见性设置为可见。我想这将相当容易构建，我预计不会有很多问题。但是是否可以创建动画或者只是突然的屏幕变化？

2）可扩展列表视图，带有可扩展项目中的按钮。我知道它可以只扩展一个项目，方法是重新定义扩展的项目并再次关闭它。但是有没有可能用可扩展部分的按钮来做到这一点？实际上，我从未使用过可扩展视图。

任何人都知道最好的解决方案应该是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:57:55.103

正如您的第二个选项所述，我建议为此使用可扩展的列表视图。对于这种类型的列表，您可以使用可扩展的列表视图适配器，如下所述：

[http://developer.android.com/reference/android/widget/ExpandableListAdapter.html](http://developer.android.com/reference/android/widget/ExpandableListAdapter.html)

这个适配器有一个 getGroupView(open/close items) 和一个 getChildView 方法，你可以在其中扩展你的布局，或者手动设置它们。如果您使用过普通的列表视图，我相信这对您来说不是问题，因为它基本上是相同的操作。

这意味着您可能应该使用包含三个按钮的 LinearLayout 来扩展您的 childView。然后，您必须通过跟踪打开的项目索引来实现折叠/展开逻辑的功能。

当我第一次开始使用 exp.list 视图时，我做了这个教程，我发现它很有帮助：

[http://android-adda.blogspot.se/2011/06/custom-expandable-listview.html](http://android-adda.blogspot.se/2011/06/custom-expandable-listview.html)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:34:03.663

你必须检查这个[http://udinic.wordpress.com/2011/09/03/expanding-listview-items/](http://udinic.wordpress.com/2011/09/03/expanding-listview-items/)它工作得很好。如果还有什么问题，请追问...

# asp.net - Visual Studio Express 2010 参考问题

> ID：11671976
> 
> 赞同：0
> 
> 时间：2012-07-26T14:49:45.607
> 
> 标签：asp.net, visual-studio-2010

我不小心从我的一个项目中删除了引用，然后小心地将它们放回原处。但是现在我在代码中抛出错误，该代码运行良好，所以我认为我仍然必须缺少引用，除非在此过程中出现其他问题。这是当前的错误：

```
The variable 'button1' is either undeclared or was never assigned. 
```

但这里是 Form1.Designer.cs 中的代码：

```
private void InitializeComponent()
    {
        this.button1 = new System.Windows.Forms.Button();
        ...
        // 
        // button1
        // 
        this.button1.Location = new System.Drawing.Point(235, 382);
        this.button1.Name = "button1";
        this.button1.Size = new System.Drawing.Size(125, 23);
        this.button1.TabIndex = 0;
        this.button1.Text = "Generate Report";
        this.button1.UseVisualStyleBackColor = true;
        this.button1.Click += new System.EventHandler(this.button1_Click);
        ...
        this.Controls.Add(this.button1);
        ...
        private System.Windows.Forms.Button button1; 
```

最后七行都在抛出这个错误。任何建议表示赞赏。

问候。

编辑：这是与评论相关的代码：

```
public partial class Severity3RetailNetworkTrackingLog : Form
{
    public Severity3RetailNetworkTrackingLog()
    {
        InitializeComponent();
    }

private void InitializeComponent()
    {
        this.button1 = new System.Windows.Forms.Button(); 
```

其中 Form1 已更改为 Severity3RetailNetworkTrackingLog。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:42:10.357

事实证明 VS Express 2010 只是行为不端。我注释掉了所有有问题的代码，但仍然得到相同行号的相同错误。所以我关闭并打开VS，一切都恢复正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:53:10.490

我怀疑您缺少成员变量定义

```
class Form1 {
   /* lots of windows form designer code */

   /* some other member variables */
   System.Windows.Forms.Button button1;
} 
```

在您的类定义中。

# jquery-mobile - 比较 jquery mobile 剑道煎茶 jqtouch

> ID：11671977
> 
> 赞同：0
> 
> 时间：2012-07-26T14:49:51.350
> 
> 标签：jquery-mobile, jqtouch, kendo-ui, dhtmlx

我是所有移动应用程序的新手，我认为我想找到一个图表库，它可以在所有类型的手机（ios、android、windows 手机等）中播放。我正在搜索，但有很多而且我很困惑。jquery 手机， kendo、sencha、jqtouch、web 2.0、dhtmlx 等等。我希望我的应用程序可以在所有手机上运行，​​任何人都知道最好的图书馆。我已经使用过我之前提到的库，但是如果还有其他要测试的东西，请告诉我。

这是我到目前为止看到的一些链接：

[http://docs.dhtmlx.com](http://docs.dhtmlx.com)

[http://web20boom.com/web/touch.php](http://web20boom.com/web/touch.php)

我将使用phonegap。请任何它会非常有用。

也许我的问题不是很清楚，对此我很抱歉。我想要一个用于构建基于 HTML5 的移动 Web 应用程序的 JavaScript 库。我想在我的应用程序中制作所有的美（按钮、面板等）我不想制作图表我想要一个我可以用来制作的库旋转木马、手风琴和其他简单但稍微困难的想法。但直到现在我看到的所有库都不能在所有手机上正常工作。这就是为什么我问是否有一个图书馆在任何地方都能玩得很好。但是非常感谢为您解答。

例如，我想要一个像 jquery mobile 这样的库，但我想至少在 ios 和 android 手机上玩得很好。如果有人知道任何库，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:05:33.693

不确定这些是否符合您的需求：

*   [http://www.sencha.com/products/touch/charts](http://www.sencha.com/products/touch/charts)
*   [http://www.zingchart.com/](http://www.zingchart.com/)
*   [http://code.google.com/apis/chart/](http://code.google.com/apis/chart/)
*   [http://code.google.com/p/flot/](http://code.google.com/p/flot/)
*   [http://www.highcharts.com/](http://www.highcharts.com/)
*   [http://www.splashnology.com/article/15-awesome-free-javascript-charts/325/](http://www.splashnology.com/article/15-awesome-free-javascript-charts/325/)
*   [http://mbostock.github.com/protovis/](http://mbostock.github.com/protovis/)
*   [http://www.jqplot.com/](http://www.jqplot.com/)

有关的：

*   [用于移动 Web 应用程序的带有图表的框架](https://stackoverflow.com/questions/9323343/framework-with-charts-for-mobile-web-application)

# knockout.js - 对返回的结果应用过滤器

> ID：11671979
> 
> 赞同：2
> 
> 时间：2012-07-26T14:49:53.897
> 
> 标签：knockout.js

我有一个`Customer`这样的模型（简化）：

```
public int CustomerAcc { get; set; }
public string Name { get; set; }
public int Blocked { get; set; } 
```

`Blocked`有 3 个可能的值：0、1、2。0 表示正常，1 表示客户被警告，2 表示客户被阻止。

然后我有一个像这样的淘汰视图模型：

```
function SearchCustomerViewModel() {
    var self = this;
    self.custTerm = ko.observable('');
    self.customers = ko.observableArray([]);
    self.excludeClosedAccs = ko.observable(true);

    self.search = function () {
        $.ajax({
            url: "/api/SearchCustomers",
            data: { id: self.custTerm },
            type: "GET",
            success: function (data) {
                self.customers(data);
            }
        });
    }
}

$(document).ready(function () {
    var viewModel = new SearchCustomerViewModel();
    ko.applyBindings(viewModel);
    $("#btnSearch").click({ handler: viewModel.search });
}); 
```

这提供了一个简单的搜索 api，用于搜索我的客户存储库。我有一个名为的属性`excludeClosedAccs`，默认情况下我已将其设置为 true，我想在我的视图中排除任何`Blocked`等于 2 的帐户。这是我视图上的一个复选框，当未选中时，会将它们包含在我的结果中. 这是我的观点：

```
<div id="body">
    <h1>Customer Search</h1>

    <div>
        Search:<input type="text" data-bind="value: custTerm" />

        <input type="button" id='btnSearch' title="Search" value="Search" />
    </div>

    <div data-bind="visible: customers().length > 0">
        <span data-bind="text: customers().length"></span>
        customers found.
        <label>Exclude Closed Accounts: <input data-bind="checked: excludeClosedAccs" type="checkbox"/></label>
    </div>

    <div id="results-container" data-bind="template: { name: 'customer-results', foreach: customers }"></div>

</div>

<script type="text/html" id="customer-results">
    <div>
        <h6 data-bind="text: CustomerAcc"></h6>
        <p>Company Name: <span data-bind="text: Name"></span></p>
        <!-- ko if: Blocked > 0 -->
        <p>Blocked: <span data-bind="text: Blocked"></span></p>
        <!-- /ko -->
    </div>
</script> 
```

是否可以在我的阵列上应用过滤器`self.customers`来做我想做的事情，还是我必须提出单独的请求，一个排除被阻止的帐户，一个包括它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:32:50.857

您想在视图模型中使用计算方法，如果 excludeClosedAccs 为 false，则返回完整集，或者根据您建议的标准过滤数组，如下所示：

```
function SearchCustomerViewModel() {

    // properties
    var self = this;
    self.custTerm = ko.observable('');
    self.customers = ko.observableArray([]);
    self.excludeClosedAccs = ko.observable(true);
    self.customersToShow = ko.computed(function () {
        if (!self.excludeClosedAccs()) {
            return self.customers();
        }
        return ko.utils.arrayFilter(self.customers(), function (customer) {
            return customer.Blocked == 0 || customer.Blocked == 1;
        });
    });

    // methods
    self.search = function () {
        $.ajax({
            url: "/api/SearchCustomers",
            data: { id: self.custTerm },
            type: "GET",
            success: function (data) {
                self.customers(data);
            }
        });
    }
}

$(document).ready(function () {
    var viewModel = new SearchCustomerViewModel();
    ko.applyBindings(viewModel);
    $("#btnSearch").click({ handler: viewModel.search });
}); 
```

# python - Optparse Python 设置布尔值

> ID：11671980
> 
> 赞同：4
> 
> 时间：2012-07-26T14:50:00.403
> 
> 标签：python, boolean, optparse

我在让 optparse 在 python 中工作时遇到了很多麻烦。这是我第一次使用它，所以任何帮助将不胜感激。我通读了所有文档，但即使有他们的例子，它也不适合我。我正在尝试使用 --clean 使布尔变量等于 true。这就是我所拥有的：

```
desc = "Use this script for fun!"
parser = optparse.OptionParser(description=desc)
parser.add_option('--clean', help='Run cleaner option', dest = 'runclean', default = False, action = 'store_true')
(args, opts) = parser.parse_args()

print opts.runclean 
```

我认为这会将runclean设置为true，但是当我这样做时：

```
print opts.runclean 
```

我得到：

```
AttributeError: 'list object has no attribute 'runclean' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:53:07.653

您的返回值颠倒了：

```
(args, opts) = parser.parse_args() 
```

**应该**

```
(opts, args) = parser.parse_args() 
```

然后一切都会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:57:09.447

它在 args.runclean

顺便说一句，最好使用 argparse 而不是 optparse

# c# - 将数据存储到自定义文件中

> ID：11671987
> 
> 赞同：0
> 
> 时间：2012-07-26T14:50:18.290
> 
> 标签：c#, list, file, storing-data

我正在制作一个组合生成器。对于少量元素，数据存储在 RAM 内存中而不是文件中对计算机来说不是问题。但是当元素数量变大时，我的计算机内存不足（发生 OutOfMemoryException 异常）。这些组合是存储在列表中的数字，当前存储在另一个列表中。

但这只是第一步——发电机工作正常。我希望将数据存储在文件中，不同的程序可以从中提取所需的组合。大多数情况下，我需要将数据存储在单独的文件中，因为生成器将来必须能够创建越来越多更大的组合。计算机将不得不读取数据的某些部分，而不是将其全部存储在临时存储器中，因为这是不可能的。

我不想将数据转换为文本，并在需要时将文本转换回数据。我认为由于转换，这会使事情变慢。我希望将列表存储到自定义文件中，程序可以从中直接提取数据而无需任何转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T15:01:43.590

有很多可用的选项，我将简要描述一些。

*   使用数据库。根据您的描述，这看起来不是一个好的选择，但它将是所有客户最灵活的相对快速和高效的存储。

*   使用描述二进制序列化程序中的 .net 序列化程序之一将是您的最佳选择。serlizers 提供了很多相对快速的优势，并通过内置支持融入 .net，并且非常易于使用。

*   使用自定义二进制格式。这将是最快的选择，尤其是当您将它与内存映射文件结合使用时。然而，二进制格式可能难以使用且容易搞砸。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T15:03:08.830

如果您真的想将数据存储在文件中，可以使用[BinaryFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter%28v=vs.85%29.aspx)类。这可能是将数据对象序列化为二进制流的最有效方式。

但是，如果您不需要一次存储它们并在此之后加载很长时间，我不建议您以这种方式生成组合。最好使用惰性生成组合。一个接一个，完全生成，无需“在未来生成更大的组合”（一个接一个生成“最大”所需的组合 - 你可能想要稍微改变你的生成算法 - 已经有很多答案如何做到这一点）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T15:00:41.347

[在http://www.switchonthecode.com/tutorials/csharp-tutorial-serialize-objects-to-a-file](http://www.switchonthecode.com/tutorials/csharp-tutorial-serialize-objects-to-a-file)上有一篇关于如何将 List<> 序列化为文件的好文章

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T15:00:24.263

您可以使用某些东西作为持久数据结构，这将减少您的应用程序所需的内存量，而不会过多地更改当前代码。看看这个问题：

[在 C# 中寻找一个简单的独立持久字典实现](https://stackoverflow.com/questions/100235/looking-for-a-simple-standalone-persistent-dictionary-implementation-in-c-sharp)

有很多资源这样做，特别是[这个答案](https://stackoverflow.com/a/482984/566608)似乎指向一些非常有趣的链接：

# java - JavaDocs 的最佳实践——接口、实现或两者兼而有之？

> ID：11671989
> 
> 赞同：8
> 
> 时间：2012-07-26T14:50:22.800
> 
> 标签：java

我有一个 DAO 接口和 DAO 的实现。界面中的 JavaDocs 是 Netbeans 向实现 DAO 方法的客户端显示的内容。

显然，我需要在界面中维护 JavaDocs。但是它的实施呢？一方面，放在那里很方便，但另一方面，它是重复的，需要在两个地方进行维护。

只是想知道其他 Java 开发人员在做什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T16:12:58.990

如果实现方法不提供自己的 Javadoc，仍然会有指向接口方法文档的链接。我从来不明白为什么 Eclipse 会插入 `/* (non-Javadoc) @see ... */`，因为 Javadocs 会自动引用接口的文档。

例子：

```
public interface Named {
  /** Returns the name. */
  public String getName();
}

public class Thing implements Named {
  // note no Javadocs here
  public String getName() {
    return "thing";
  }
} 
```

运行后`javadoc`，`Thing.getName`的 Javadocs 为：

```
getName

public java.lang.String getName()
    Description copied from interface: Named
    Returns the name.
    Specified by:
        getName in interface Named 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T14:52:39.807

接口应该有合约的所有信息，基本上是方法做了什么，参数的描述，返回值等等。

除非接口描述中有一些额外的信息不清楚（很少有），否则实现文档应该简单地链接到接口方法。

这是我从栅栏的实现者和客户端发现的最有用的格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T15:06:18.863

在我的项目中，Eclipse 会自动创建如下文档：

```
 /* (non-Javadoc)
     *  @see com.comp.SomeInterface#method(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)
     */
    @Override
    public void method(HttpServletRequest arg0, HttpServletResponse arg1)
            throws Exception {
        // TODO Auto-generated method stub

    } 
```

我们使用 Ant 任务创建了 javadoc，因此它创建了到界面的链接。

# javascript - jquery在html中检测var变化

> ID：11671992
> 
> 赞同：0
> 
> 时间：2012-07-26T14:50:33.677
> 
> 标签：javascript, jquery, ajax, animation, clock

我有一个时钟脚本，一切都很好，但我想检测分钟何时变化，并使用 jQuery 为这个动作添加一些动画，例如fadeToggle。

你能告诉我如何检测时间变化吗？

这是我的脚本：

```
window.setInterval(function updateClock() {
    var currentTime = new Date();
    var currentHours = currentTime.getHours();
    var currentMinutes = currentTime.getMinutes();
    $.ajax({
        success:function (clock) {
            document.getElementById("hour").firstChild.nodeValue = currentHours;
            document.getElementById("minutes").firstChild.nodeValue = currentMinutes;
        }
    });
    if (currentMinutes.length == 1) {
        currentMinutes = "0" + currentMinutes;
    }
}, 500); 
```