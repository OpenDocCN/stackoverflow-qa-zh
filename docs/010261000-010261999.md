# StackOverflow 问答 10261000-10261999

# tomcat - 使用符号链接作为 Tomcat webapp 的基本目录

> ID：10261005
> 
> 赞同：0
> 
> 时间：2012-04-21T16:46:51.877
> 
> 标签：tomcat, ubuntu, symlink

我在 Ubuntu 上运行 Tomcat 6。我有 webapps 存储在 tomcat6 的 webapps 文件夹之外，我曾经对它们进行符号链接，它就像一个魅力。

例如，在 /var/lib/tomcat6/webapps/ 中，我有一个指向 ~/webapp1 的符号链接“webapp1”，它具有 webapp 的正确内容。它工作正常，webapp1 眨眼间就启动并运行了。

现在，如果我创建另一个指向 /media/someotherdisk/webapp2 的链接，它根本不起作用。webapp2 具有要检测的所需内容，它具有与 webapp1 相同的访问权限，以及内容本身。我检查了所有我能想到的，但我不明白 Tomcat 的区别。

那么它为什么会这样呢？我怎样才能使它与'webapp1'一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:35:16.300

最后，这是一个简单的权限问题。

`/media/someotherdisk/webapp2/`没问题（任何人都可以+rx），但`/media/someotherdisk/`除了所有者之外没有设置权限。

我不知道为什么这个分区特别是这样，而不是其他挂载的分区，但是更改权限解决了我的问题。

# sql - 数据库中的用户关系与设计问题

> ID：10261011
> 
> 赞同：0
> 
> 时间：2012-04-21T16:47:34.277
> 
> 标签：sql, database, tsql, database-design

```
UserRelations{UserID, FriendID, RelationStatus} 
```

还有 ID 为 1、2、3 等的用户。用户 1 向用户 2 发送请求 用户 3 向用户 1 发送请求 所以在数据库中我有：

```
1 | 2 | 1 
```

和

```
3 | 1 | 1 
```

现在我写查询有点困惑（也许设计是错误的）。
我需要根据用户 ID 获取所有朋友的列表。但是，如果用户请求关系或有人向他请求关系，则用户可以基于此在两列中。
如果我使用这个查询，我会得到所有向我请求关系的用户，但我会得到一个我已经发送了关系请求的用户列表，但我得到的个人资料数据是我的，而不是来自那个用户。

```
select ur.*, p.FirstName, p.LastName
from userRelations ur
join Profiles p on ur.UserId = p.UserId
where ur.FriendId = @UserId or
ur.UserId = @UserId 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:53:47.660

我认为您只是缺少对以下个人资料的加入`FriendId`：

```
select ur.*, p1.FirstName, p1.LastName, p2.FirstName, p2.LastName
from userRelations ur
join Profiles p1 on ur.UserId = p1.UserId
join Profiles p2 on ur.FriendId = p2.UserId
where ur.FriendId = @UserId or ur.UserId = @UserId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T19:34:43.480

您需要使用**UNION**查询来让朋友双向前进，而不是在 WHERE 子句中使用 OR 运算符，如下所示：

```
select               -- Get people you friended.
  ur.UserID          -- ME (i.e. the @User)
, ur.FriendID        -- The other person.
, ur.RelationStatus
, p.FirstName
, p.LastName 
from userRelations ur                    
inner join Profiles p on ur.FriendId = p.UserId
where ur.UserId = @UserId
--
union all
--
select               -- Get people who friended you.
  ur.FriendID        -- ME (i.e. the @User)
, ur.UserID          -- The other person.
, ur.RelationStatus
, p.FirstName
, p.LastName 
from userRelations ur                    
inner join Profiles p on ur.UserId = p.UserId
where ur.FriendId = @UserId 
```

请注意每个 select、join 和每个 where 子句中的列如何变化以反映 UNION 每一半的友谊方向的观点。

# java - java.lang.NoClassDefFoundError: org/springframework/transaction/interceptor/TransactionInterceptor

> ID：10261014
> 
> 赞同：3
> 
> 时间：2012-04-21T16:47:56.960
> 
> 标签：java, spring, hibernate

我正在尝试将 spring 3.1.1 与 hibernate 4.0 集成。这是我的调度程序-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:lang="http://www.springframework.org/schema/lang"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:util="http://www.springframework.org/schema/util"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">
<context:component-scan base-package="com.future.controllers" />
<context:annotation-config />
<context:component-scan base-package="com.future.services.menu" />
<context:component-scan base-package="com.future.dao" />

    <bean id="dataSource"
    class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
    p:driverClassName="com.mysql.jdbc.Driver"
    p:url="jdbc:mysql://localhost:3306/bar_visitor2" p:username="root"
    p:password=""/>
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean>
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>

</bean>
<tx:annotation-driven />
<bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

当我尝试使用`@Transactional`注释时出现错误`java.lang.NoClassDefFoundError: org/springframework/transaction/interceptor/TransactionInterceptor`。

我检查了我的类路径，并且有`TransactionInterceptor.class`. 我究竟做错了什么？我应该添加一些东西吗？

**编辑** 这是我的 lib 文件夹：

![在此处输入图像描述](../Images/8e55472e7bc374bf8993c1b0b651a605.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:51:04.170

你需要检查你的*运行时*类路径（即WEB-INF/lib）`spring-tx-...jar`（并确保你只有一个这样的jar，不同版本的不多）

# c# - VS2010中导出RDLC的Excel功能的命名表名称

> ID：10261015
> 
> 赞同：1
> 
> 时间：2012-04-21T16:48:00.783
> 
> 标签：c#, asp.net, dynamic-rdlc-generation

我在 VS.Net 2010 中创建了 .RDLC 报告，并将组放在第一列并在该组上分页。当我的报告生成并将该报告导出到 Excel 表中时，名称变为“Sheet1”和“Sheet2”，但我想要这些工作表名称将根据 groupName。

# android - broadcastRecevier onreceive 处理消息的内容

> ID：10261018
> 
> 赞同：0
> 
> 时间：2012-04-21T16:48:07.100
> 
> 标签：android, android-activity, broadcastreceiver

我想在收到消息时从收到的消息中传递一些信息，例如消息的内容或消息的源编号，并且我想在某个条件为真时将该信息放在一个按钮中，而不是 oncreate，正在构建消息传递应用程序，所以我想将收到的消息存储在“收件箱”中，我该怎么做？附言。我在一个类中的 onreceive 方法扩展了广播接收器，而我的另一个类扩展了活动，在此先感谢！这是我扩展广播接收器的第一堂课

```
public class Re extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent)
 {
 Bundle bundle = intent.getExtras();       
SmsMessage[] msgs = null;
 String address="";
    String body="";
    long time = 0;
    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];
 address= msgs[i].getOriginatingAddress();
            body=msgs[i].getMessageBody().toString();
            time=msgs[i].getTimestampMillis();
}   

} 
```

这是我扩展活动的第二堂课

```
public class ThirdView extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.third);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:12:03.493

如果您想从 Receiver 的 onReceive 访问您的活动 - 那么您应该将 BroadcastReceiver 定义为 Actvity 的内部类并以编程方式注册它（在 onStart 方法中，并在 onStop 中取消注册）；

```
public class ThirdView extends Activity {

    private static final IntentFilter intentFilter = 
        new IntentFilter("android.provider.Telephony.SMS_RECEIVED");

    TextButton myButton;

    BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {

            SmsMessage[] messages;
            //read parse pdus data from intent and pupulate messages array
            //...

            //update the button
            if(messages.length > 0) {
                myButton.setText(messages[0].getOriginatingAddress());
            }
        }

    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.third);
        myButton = (TextButton) findViewByiD(R.id.myButton);
    }

    @Override
    protected void onStart() {
        super.onStart();
        registerReceiver(receiver, intentFilter);
    }

    @Override
    protected void onStop() {
        unregisterReceiver(receiver);
        super.onStop();
    }
} 
```

# jquery - jquery加载json的问题

> ID：10261019
> 
> 赞同：0
> 
> 时间：2012-04-21T16:48:21.697
> 
> 标签：jquery, json

嗨，谁能帮我将 json 加载到 jquery 中，我似乎只能让它在这个 structor 中工作

{“名称”：“Zemi All”，“smpx”：“2564”，“scuser”：“zajihi”，“scfollowers”：“女性”}

这是我的格式页面 - [http://newmusicproducer.com/filterable/indexj.php](http://newmusicproducer.com/filterable/indexj.php)

我的代码如下：

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
   <script type="text/javascript" language="javascript">
   $(document).ready(function() {
      $("#driver").click(function(event){
          $.getJSON('test.json', function(data) {
            $.each(data.results,function(){
              $('#stage').html('<p> Name: ' + data.name + '</p>');
              $('#stage').append('<p> Smpx : ' + data.smpx+ '</p>');
              $('#stage').append('<p> Scuser: ' + data.scuser+ '</p>');
              $('#stage').append('<p> Scfollowers: ' + data.scfollowers+ '</p>');
            });
          });
      });
   });
   </script>
</head>
<body>
   <p>Click on the button to load results:</p>
   <div id="stage" style="background-color:blue;">
          Display area.
   </div>
   <input type="button" id="driver" value="Load Data" />
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:57:02.090

您正在迭代，`data.results`但您提供的链接显示该数组被调用`testData`。

```
$.each(data.testData, function(val){
    $('#stage').html('<p> Name: ' + val.name + '</p>')
               .append('<p> Smpx : ' + val.smpx+ '</p>')
               .append('<p> Scuser: ' + val.scuser+ '</p>')
               .append('<p> Scfollowers: ' + val.scfollowers+ '</p>');
}); 
```

# javascript - 将对象数组作为 ajax 发布数据发送？

> ID：10261021
> 
> 赞同：11
> 
> 时间：2012-04-21T16:48:24.730
> 
> 标签：javascript, jquery, ajax

我的总体目标是获取页面上的所有下拉列表并将其发送给 php 文件进行处理。

现在，我在 jQuery 中执行此操作的方式是制作一个整体计划数组，然后将每个要更新的元素添加到该数组中。所以我有类似的东西：

```
var schedule = [];
var data = { 
   'user_id' : '12', 
   'day_of_week' : 'Monday',
    'when' : 'start',
    'time' : '12 AM'
 }
schedule.push(data);
var data = { 
   'user_id' : '13', 
   'day_of_week' : 'Tuesday',
    'when' : 'end',
    'time' : '12 AM'
 }
schedule.push(data);
// schedule would have two objects in it 
```

显然在循环等等。

因此，在这种情况下，我的计划数组中有两个对象。

现在，是否可以将该调度数组用作 ajax 数据？如果我这样做是行不通的：

```
$.ajax({
  url: 'http://something.com/ajax',
  data: schedule,
  type: 'POST'
}); 
```

但是，如果我改为将其更改为`schedule[0]`它可以正常工作，但显然仅适用于调度数组中的第一件事。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T19:27:50.733

该`data`属性应该是一个对象。

你可以做的是：

```
$.ajax({
  url: 'http://something.com/ajax',
  data: {schedule: schedule},
  type: 'POST'
}); 
```

因此，如果您在 PHP 中收到此信息，您将拥有`$_POST["schedule"]`. 与您在 JavaScript 中的完全相同。

哦，是的，我忘记了......也看看[`.serialize()`](http://api.jquery.com/serialize/)和[`.serializeArray()`](http://api.jquery.com/serializeArray/)！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T19:59:07.450

确保您使用的是正确版本的 jQuery。在早期版本中，您必须通过刺痛；`data`新版本对变量使用“智能猜测” 。你可以明确地告诉 jQuery 你正在向它传递一个带有`dataType`参数的 javascript 对象，或者你可以让 jQuery 来解决它。

**文档**

`jQuery.ajax()`- [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T17:04:50.290

将其作为 JSON 传递：

```
$.ajax({
  url: 'http://something.com/ajax',
  data: {schedule: schedule},
  type: 'POST',
  dataType: 'JSON'
}); 
```

它会将 JSON 编码的字符串发送到服务器，服务器端语言可以解析该字符串。（在 PHP 中，它是用 完成的`json_decode()`）。

# php - 如何在 PHP 中格式化这个时间/日期？

> ID：10261022
> 
> 赞同：0
> 
> 时间：2012-04-21T16:48:25.760
> 
> 标签：php, mysql, datetime, time, timestamp

当我在我的网站上制作项目时，我已将我在 MySQL 中制作它们的时间和日期保存为“2012-02-27 12:32:36”格式。

我怎样才能让它显示为：

“2012 年 2 月 27 日下午 12:32”？

我查看了 PHP 上的其他日期格式并在 PHP 网站上阅读，但它们提供的所有功能似乎都不是用于以我保存的格式获取日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:53:00.253

首先，通过使用将`MySQL DateTime`您拥有的字符串转换为`DateTime`对象[`DateTime::createFromFormat()`](http://php.net/datetime.createfromformat)

```
$mysqlDateTime = '2012-02-27 12:32:36';
$date = DateTime::createFromFormat('Y-m-d H:i:s', $mysqlDateTime); 
```

然后，只需[`DateTime->format()`](http://php.net/datetime.format)使用所需的格式字符串调用：

```
$formattedDate = $date->format('F j, Y g:i a'); 
```

* * *

您也可以使用 MySQL[`UNIX_TIMESTAMP()`](http://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html#function_unix-timestamp)日期函数（提取与 兼容的 unix 时间戳[`date()`](http://php.net/date)）或使用[`strtotime()`](http://php.net/strtotime)，但请注意，由于溢出，这些方法在 32 位系统上不支持 2038 年 1 月 19 日之后的日期（这两种方法不支持 PHP 的自动数字变量提升）。

# jsf - 如何使用 PrimeFaces 在 JSF 上重定向？

> ID：10261023
> 
> 赞同：3
> 
> 时间：2012-04-21T16:48:37.147
> 
> 标签：jsf, primefaces, servlet-filters

我正在尝试在 JSF 上做一个基本的安全系统，如果用户没有登录并尝试访问受限页面，他将被重定向到 login.xhtml。这是在 servlet 过滤器中完成的。

我的问题是当使用 resp.sendRedirect("login.xhtml"); 登录页面丢失所有资源，css，脚本等。所以页面显示没有任何样式。

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
<context-param>
<param-name>javax.faces.PROJECT_STAGE</param-name>
<param-value>Development</param-value>
</context-param>
<servlet>
<servlet-name>Faces Servlet</servlet-name>
<servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>Faces Servlet</servlet-name>
<url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
<session-config>
<session-timeout>30</session-timeout>
</session-config>
<welcome-file-list>
<welcome-file>index.xhtml</welcome-file>
</welcome-file-list>
<filter>
<filter-name>restrict</filter-name>
<filter-class>br.com.jetcar.filter.RestrictionFilter</filter-class>
</filter>
<filter-mapping>
<filter-name>restrict</filter-name>
<url-pattern>*.xhtml</url-pattern>
<servlet-name>Faces Servlet</servlet-name>
</filter-mapping>
</web-app> 
```

模板.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.prime.com.tr/ui"
xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <h:outputScript library="primefaces" name="jquery/jquery.js"/>
    <h:outputStylesheet library="css" name="template.css" />
    <h:outputScript name="clock.js" library="js"></h:outputScript>
    <title><ui:insert name="title">Bem-Vindo</ui:insert></title>
</h:head>
<body>
 <p:growl id="messages"/>  
    <div id="header">
        <ui:insert name="header">
            <div id="headerTitle">JetCar</div>
            <div id="clock"></div>
        </ui:insert>
    </div>

    <div id="menu">
        <ui:insert name="menu">
            <ui:include src="menu.xhtml" />
        </ui:insert>
    </div>

    <div id="content">
        <ui:insert name="content">
        </ui:insert>
    </div>

    <div id="footer">
        <ui:insert name="footer">
            <p>Desenvolvido por</p>
            <p>Rodrigo Cavalcante de Souza</p>
            <p>Jorge Luis</p>
        </ui:insert>
    </div>
</body>
</html> 
```

登录.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="resources/template/template.xhtml"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:p="http://primefaces.org/ui">
<ui:define name="title">Login</ui:define>
<ui:define name="content">

</ui:define>
</ui:composition> 
```

index.xhtml 看起来与登录相同，因为我仍在测试，可能是什么问题？

来自 Chrome 控制台的错误

```
 GET http://localhost:8080/JetCar/javax.faces.resource/growl/assets/login.xhtml 404  (Not Found)
login.xhtml:3GET http://localhost:8080/JetCar/javax.faces.resource/themes/sam/login.xhtml 404 (Not Found)
login.xhtml:6GET http://localhost:8080/JetCar/javax.faces.resource/jquery/login.xhtml 404 (Not Found)
login.xhtml:6GET http://localhost:8080/JetCar/javax.faces.resource/login.xhtml 404 (Not Found)
login.xhtml:6GET http://localhost:8080/JetCar/javax.faces.resource/core/login.xhtml 404 (Not Found)
login.xhtml:4GET http://localhost:8080/JetCar/javax.faces.resource/login.xhtml 404 (Not Found)
login.xhtml:6GET http://localhost:8080/JetCar/javax.faces.resource/growl/login.xhtml 404 (Not Found)
login.xhtml:10Uncaught ReferenceError: jQuery is not defined
chrome-extension://ffdcfjdljhbehggjdkdioajnknjcpbjb/js/sbc_cookies_mon.js:1Uncaught   TypeError: Cannot read property 'tagName' of null 
```

我正在使用 primefaces 2.2.1、glassfish 3.1、JSF 2.0

编辑：我刚刚注意到资源也使用 .xhtml 扩展名，所以它干扰了过滤器。

使固定：`if(req.getSession().getAttribute("func") == null && !pageRequested.contains("login.xhtml") && !pageRequested.contains("/javax.faces.resource")) resp.sendRedirect("login.xhtml");`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-22T02:51:25.350

我经常使用这种方式直接从Java Bean重定向它： `FacesContext.getCurrentInstance().getExternalContext().redirect(Url);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T16:58:43.053

特别是在 JSF 2 中重定向 JSF 页面的正确方法是从方法调用中返回视图的名称：

例如：

```
public String doLogin() {
    //apply the login logic.
    return "name/of/the/view?facesRedirect=true"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T13:14:28.530

您的过滤器也将 HTTP 请求重定向到 JSF 资源。您需要更改过滤器逻辑以添加检查当前请求是否不是 JSF 资源请求。您可以通过检查请求 URI 是否不在[`ResourceHandler.RESOURCE_IDENTIFIER`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html#RESOURCE_IDENTIFIER)上下文路径之后开始来做到这一点。

```
if (request.getRequestURI().startsWith(request.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) {
    chain.doFilter(request, response);
}
else {
    response.sendRedirect(request.getContextPath() + "/login.xhtml");
} 
```

# dotnetnuke - Dotnetnuke 网站 - 页面的文件位置

> ID：10261025
> 
> 赞同：0
> 
> 时间：2012-04-21T16:48:48.660
> 
> 标签：dotnetnuke, structure

在向我的 dotnetnuke 网站添加 HTML 模块时，我遇到了一个意外错误。不知道是怎么回事。相反，模块图块作为正文添加到页面的最顶部。请参考此链接 - [http://indiastockspotter.com/LiveTrades/tabid/151/Default.aspx](http://indiastockspotter.com/LiveTrades/tabid/151/Default.aspx) 在菜单栏上方的页面顶部添加了文本“实时交易 - 期货和股票”。我找不到删除它的方法。我想通过编辑这个页面后面的代码，它可以被纠正，但不知道文件在哪里。搜索了许多文件夹但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:06:23.993

DotNetNuke 不会为每个页面创建文件；网站的结构存储在数据库中。

每个模块（包括页面顶部的那个）都应该有一个“管理”按钮，它可以让您将模块移动到正确的窗格中。

# animation - 3d 视图折叠动画 iOs 5

> ID：10261027
> 
> 赞同：1
> 
> 时间：2012-04-21T16:48:50.503
> 
> 标签：animation, ios5, view, 3d, fold

我正在开发一个 iOS 5 应用程序。我想为具有 3d 折叠效果的视图设置动画。我的意思是：将视图折叠成 3 个部分，就像您折叠纸张以放入信封时一样。我看过一些帖子，但他们没有很好地解释它。有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:52:19.020

一位朋友将我链接到这个项目，该项目展示了如何制作“Flipboard”风格的动画以及其他一些技术。

[https://github.com/epatel/EPGLTransitionView](https://github.com/epatel/EPGLTransitionView)

这可能会让你开始。

# windows - 批处理，如何过滤此 HTML 文本以设置一些变量

> ID：10261030
> 
> 赞同：3
> 
> 时间：2012-04-21T16:49:22.030
> 
> 标签：windows, batch-file, sed, grep, wget

我有一个大问题

我使用 wget 将帖子请求发送到网络，然后我收到一个 html 我需要过滤这个 html 样本：

```
more code up...

        <div id="song_html" class="show1">
            <div class="left">
            <!-- info mp3 here -->
                256 kbps<br />3:21<br />6.13 mb         </div>
            <div id="right_song">
                <div style="font-size:15px;"><b>Marilyn Manson - Tainted Love ( Manson Remix) mp3</b></div>
                <div style="clear:both;"></div>
                <div style="float:left;">
                    <div style="float:left; height:27px; font-size:13px; padding-top:2px;">
                        <div style="float:left;"><a href="http://rockass.free.fr/video/Marilyn Manson - Taited Love.mp3" rel="nofollow" target="_blank" style="color:green;">Download</a></div> 
                                                <div style="margin-left:8px; float:left; width:27px; text-align:center;"><a href="javascript:void(0)" onclick="showPlayer_new(37119, '91da6888c92ccb4198dbc78cb30f311635751694', 'marilyn+manson', 'tainted+love')" rel="nofollow" id="lk37119" class="play_now">Play</a></div>                     
                                                                        <div style="margin-left:8px; float:left;"><a href="javascript:void(0)" onclick="showEmbed_new(37119, '91da6888c92ccb4198dbc78cb30f311635751694')" rel="nofollow" id="em37119" class="embed">Embed</a></div>
                                                <div style="margin-left:8px; float:left;"><a href="http://www.ringtonematcher.com/go/?sid=WDLL&artist=marilyn+manson&song=tainted+love" rel="nofollow" target="_blank" style="color:red;" title="Send Marilyn Manson - Tainted Love Ringtone to your Cell">Descarga Tono</a></div> 
                        <div style="clear:both;"></div>
                    </div>
                    <div id="player37119" style="float:left; margin-left:10px;" class="player"></div>
                </div>  
                <div style="clear:both;"></div>
            </div>
            <div style="clear:both;"></div>
        </div>

        <div id="song_html" class="show2">
            <div class="left">
            <!-- info mp3 here -->
                            </div>
            <div id="right_song">
                <div style="font-size:15px;"><b>Spaz Marilyn Manson Metric - grow up and blow the great big dj://spaz, marilyn manson  mp3</b></div>
                <div style="clear:both;"></div>
                <div style="float:left;">
                    <div style="float:left; height:27px; font-size:13px; padding-top:2px;">
                        <div style="float:left;"><a href="http://spaz.mindstab.net/djspaz_-_grow_up_and_blow_the_great_big_white_nietzche.mp3" rel="nofollow" target="_blank" style="color:green;">Download</a></div> 
                                                <div style="margin-left:8px; float:left; width:27px; text-align:center;"><a href="javascript:void(0)" onclick="showPlayer_new(668416, 'ac5b8834fa26b892fc1436db4678aca9d8acfdb1', 'spaz+marilyn+manson+metric', 'grow+up+and+blow+the+great+big+dj%3a%2f%2fspaz%2c+marilyn+manson')" rel="nofollow" id="lk668416" class="play_now">Play</a></div>                       
                                                                        <div style="margin-left:8px; float:left;"><a href="javascript:void(0)" onclick="showEmbed_new(668416, 'ac5b8834fa26b892fc1436db4678aca9d8acfdb1')" rel="nofollow" id="em668416" class="embed">Embed</a></div>
                                                <div style="margin-left:8px; float:left;"><a href="http://www.ringtonematcher.com/go/?sid=WDLL&artist=spaz+marilyn+manson+metric&song=grow+up+and+blow+the+great+big+dj%3a%2f%2fspaz%2c+marilyn+manson" rel="nofollow" target="_blank" style="color:red;" title="Send Spaz Marilyn Manson Metric - Grow Up And Blow The Great Big Dj://spaz, Marilyn Manson Ringtone to your Cell">Descarga Tono</a></div> 
                        <div style="clear:both;"></div>
                    </div>
                    <div id="player668416" style="float:left; margin-left:10px;" class="player"></div>
                </div>  
                <div style="clear:both;"></div>
            </div>
            <div style="clear:both;"></div>
        </div>

    <div id="morelink" style="margin:10px; text-align:center;"><a href="" rel="nofollow" onClick="toggle(); return false;">Show More Results</a></div>

                <div id="song_html" class="show3">
            <div class="left">
            <!-- info mp3 here -->
                 3:10<br />         </div>
            <div id="right_song">
                <div style="font-size:15px;"><b>Marilyn Manson - MARILYN MANSON - Rock is Dead  mp3</b></div>
                <div style="clear:both;"></div>
                <div style="float:left;">
                    <div style="float:left; height:27px; font-size:13px; padding-top:2px;">
                        <div style="float:left;"><a href="http://www.bricbrac.free.fr/Music/01___MARILYN_MANSON___ROCK_.MP3" rel="nofollow" target="_blank" style="color:green;">Download</a></div> 
                                                <div style="margin-left:8px; float:left; width:27px; text-align:center;"><a href="javascript:void(0)" onclick="showPlayer_new(670124, '14a52b596082676bed6a9d860c383488a486e1dc', 'marilyn+manson', '-+rock+is+dead')" rel="nofollow" id="lk670124" class="play_now">Play</a></div>                     
                                                                        <div style="margin-left:8px; float:left;"><a href="javascript:void(0)" onclick="showEmbed_new(670124, '14a52b596082676bed6a9d860c383488a486e1dc')" rel="nofollow" id="em670124" class="embed">Embed</a></div>
                                                <div style="margin-left:8px; float:left;"><a href="http://www.ringtonematcher.com/go/?sid=WDLL&artist=marilyn+manson&song=-+rock+is+dead" rel="nofollow" target="_blank" style="color:red;" title="Send Marilyn Manson - - Rock Is Dead Ringtone to your Cell">Descarga Tono</a></div> 
                        <div style="clear:both;"></div>
                    </div>
                    <div id="player670124" style="float:left; margin-left:10px;" class="player"></div>
                </div>  
                <div style="clear:both;"></div>
            </div>
            <div style="clear:both;"></div>
        </div>

</div>
</div>
<!-- ================= -->  

more code down... 
```

...设置一些变量，如“名称”“比特率”“大小”和“下载”，批量打印所有这些信息，如下所示：

```
1st result:
[Name]      Marilyn Manson - Tainted Love ( Manson Remix) mp3
[Info]      Bitrate: 256 kbps. Length: 3:21\. Size: 6.13 mb.
[Download]  http://rockass.free.fr/video/Marilyn Manson - Taited Love.mp3

2nd result:
[Name]      Spaz Marilyn Manson Metric - grow up and blow the great big dj://spaz, marilyn manson  mp3
[Info]      NO INFO.
[Download]  http://spaz.mindstab.net/djspaz_-_grow_up_and_blow_the_great_big_white_nietzche.mp3

3rd result:
[Name]      Marilyn Manson - MARILYN MANSON - Rock is Dead  mp3
[Info]      Lenght: 3:10.
[Download]  http://www.bricbrac.free.fr/Music/01___MARILYN_MANSON___ROCK_.MP3 
```

我试过“Findstr”、“Find”、“SED”、“GREP”、“FART”，但我找不到正确的方法（一行和字符分隔符）......

我唯一能看到的就是这条线：

```
<!-- ================= --> 
```

我可以像使用 END 分隔符一样使用它，因为该行标志着 mp3 下载和打印信息的结束...

有人可以帮助我吗？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T01:07:02.170

下面的批处理文件使用了您想要的数据位于“info mp3 here”行下方固定行数的事实。此外，根据数据在行中的位置提取数据。如果某些数据不遵循此规则，则程序将需要修改。

```
@echo off
setlocal EnableDelayedExpansion
findstr /N /C:"info mp3 here" %1 > "%~N1.tmp"
set lastLine=-1
(for /F "usebackq delims=:" %%a in ("%~N1.tmp") do (
   set /A skip=%%a-lastLine
   for /L %%i in (1,1,!skip!) do set /P info=
   set /P =& set /P name=
   for /L %%i in (1,1,4) do set /P download=
   set "name=!name:*<b>=!
   for /F "delims=<" %%n in ("!name!") do echo [Name]      %%n
   set "info=!info:<br />= !"
   set "info=!info:</div>=!"
   set bitrate=
   set lenght=
   set size=
   set value=
   for %%t in (!info!) do (
      if not defined value (
         set value=%%t
      ) else ( 
         if %%t equ kbps (
            set "bitrate=Bitrate: !value! kbps. "
            set value=
         ) else if %%t equ mb (
            set "size=Size: !value! mb."
            set value=
         ) else (
            set "lenght=Lenght: !value!. "
            set value=%%t
         )
      )
   )
   if defined value (
      set "lenght=Lenght: !value!. "
   )
   set info=!bitrate!!lenght!!size!
   if not defined info set info=NO INFO.
   echo [Info]      !info!
   set "download=!download:"=$!"
   for /F "tokens=4 delims=$" %%d in ("!download!") do echo [Download]  %%d
   set /A lastline=%%a+6
)) < %1
del "%~N1.tmp" 
```

输出：

```
[Name]      Marilyn Manson - Tainted Love ( Manson Remix) mp3
[Info]      Bitrate: 256 kbps. Lenght: 3:21\. Size: 6.13 mb.
[Download]  http://rockass.free.fr/video/Marilyn Manson - Taited Love.mp3

[Name]      Spaz Marilyn Manson Metric - grow up and blow the great big dj://spaz, marilyn manson  mp3
[Info]      NO INFO.
[Download]  http://spaz.mindstab.net/djspaz_-_grow_up_and_blow_the_great_big_white_nietzche.mp3

[Name]      Marilyn Manson - MARILYN MANSON - Rock is Dead  mp3
[Info]      Lenght: 3:10.
[Download]  http://www.bricbrac.free.fr/Music/01___MARILYN_MANSON___ROCK_.MP3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T23:22:42.770

这是一个脚本，它将解析您想要的信息。

**该脚本将您的 HTML 文件的名称作为参数**。

输出被发送到一个文件，该文件的名称是通过将“.parsed”附加到输入文件名。

脚本顶部的注释对用于在 HTML 文件中定位所请求信息的模式进行了一些解释。

**用制表符替换“TAB”的两个实例，并确保在每个制表符之前保留一个空格。**

```
#!/bin/bash

# Parse HTML with sed, suppressing all unwanted lines
  # "Info" lines all start with a number (ignoring whitespace)
  # Bitrate and file size can be identified by looking for
  #   the unit (kbps, mb) immediately following the numeric data
  # Length is identified by the colon in the middle of numeric data
  # File names are delimited by <b> and </b>
  # Lines with the URL all contain Download</a>
  # The </a> isn't necessary, but I thought it would be safer to
  #   include it since one could imagine "Download" appearing in a file name
# Pipe output to Awk for reordering of the parsed lines
#   and addition of "NO INFO" lines where necessary

sed -n '
/^[ TAB]*[0-9]/ {
  s/^[ TAB]*/[Info]      /
  s/\([0-9]*:[0-9]*\)[^0-9]*/Length: \1\. /
  s/\([0-9\.]* .bps\)[^0-9L]*/Bitrate: \1\. /
  s/\([0-9\.]* .b\)[^p][^0-9LB]*/Size: \1\. /
  p
}
/<b>/ {
  s|</b>.*||
  s|.*<b>\(.*\)|[Name]      \1|
  p
}
\|Download</a>| {
  s/^.*\(http:[^"]*\).*/[Download]  \1/
  p
}' $1 | awk 'BEGIN { no_info = "[INFO]      NO INFO.";
                     info = no_info }
             { if ($1 == "[Name]") name = $0;
                 else if ($1 == "[Info]") info = $0;
                 else {
                   printf("%s\n%s\n%s\n\n", name, info, $0);
                   info = no_info
                 } }' > $1.parsed
exit 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T07:14:08.853

TXR 65（在 Windows 上运行；MinGW 编译的 .exe 可用）

```
@(collect)
 <div id="song_html" class="show@nil">
            <div class="left">
            <!-- info mp3 here -->
@(gather :vars ((bitrate nil) (length nil) (size nil)))
 @bitrate kbps@(skip)
@(skip)@{length /\d+:\d\d/}@(skip)
@(skip)@{size /\d+\.\d\d/} mb@(skip)
@(until)
            <div id="right_song">
@(end)
@(bind info @(if (or bitrate length size)
               (let ((s (make-string-output-stream)))
                 (if bitrate
                   (format s "Bitrate: ~a kbps. " bitrate))
                 (if length
                   (format s "Length: ~a. " length))
                 (if size
                   (format s "Size: ~a mb. " size))
                 (get-string-from-stream s))
               "NO INFO."))
            <div id="right_song">
                <div style="font-size:15px;"><b>@title</b></div>
                <div style="clear:both;"></div>
                <div style="float:left;">
                    <div style="float:left; height:27px; font-size:13px; padding-top:2px;">
                        <div style="float:left;"><a href="@link" rel="nofollow" target="_blank" style="color:green;">Download</a></div> 
@(until)
<!-- ================= -->  
@(end)
@(output)
@  (repeat)
[Name]      @title
[Info]      @info
[Download]  @link
@  (end)
@(end) 
```

跑：

```
$ txr data.txr data.html
[Name]      Marilyn Manson - Tainted Love ( Manson Remix) mp3
[Info]      Bitrate: 256 kbps. Length: 3:21\. Size: 6.13 mb. 
[Download]  http://rockass.free.fr/video/Marilyn Manson - Taited Love.mp3
[Name]      Spaz Marilyn Manson Metric - grow up and blow the great big dj://spaz, marilyn manson  mp3
[Info]      NO INFO.
[Download]  http://spaz.mindstab.net/djspaz_-_grow_up_and_blow_the_great_big_white_nietzche.mp3
[Name]      Marilyn Manson - MARILYN MANSON - Rock is Dead  mp3
[Info]      Length: 3:10\. 
[Download]  http://www.bricbrac.free.fr/Music/01___MARILYN_MANSON___ROCK_.MP3 
```

# django - Aptana Studio 3.0 上的 Django

> ID：10261037
> 
> 赞同：4
> 
> 时间：2012-04-21T16:50:00.297
> 
> 标签：django, aptana, pydev

当我尝试创建一个新的 PyDev Django 项目时，我收到此错误：

```
Error creating Django project.
settings.py file not created
Stdout:
Stderr: 
```

显然这是在 2.5 中修复的

但是我仍然在使用最新的 Aptana Studio 3.0 来体验它。PyDev 插件版本为 2.5.02012031515

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:49:56.713

我发现了问题。这是 PyDev 中的一个错误，已在 2.5.0.2012040618 中修复

根据 PyDev 的说法，没有办法更新 Aptana Studio 的插件。因此，我们将很快对其进行更新。

最新的 Eclipse 正在使用上面提到的最新的 PyDev，它工作正常。

**更新：**

我在这里找到了解决方案：[https ://jira.appcelerator.org/browse/APSTUD-4759](https://jira.appcelerator.org/browse/APSTUD-4759)

确实是 Aptana 3.1.1 的一个 bug，现在 3.1.2 已经解决了。我可以确认这个错误现在已经在 Ubuntu 12.04 上的最新 3.1.2 稳定版本中得到解决

# .htaccess - 使用 htaccess 从子域重定向到域（单个文件）

> ID：10261038
> 
> 赞同：1
> 
> 时间：2012-04-21T16:50:03.577
> 
> 标签：.htaccess

我有一个子域（store.example.com）。我不仅想重定向来自 store.example.com 的流量，还想将其重定向到域上的特定文件（我能找到的一切都是基于重定向整个子域）

所以我想要 store.example.com/Science-Fiction -> www.bundoranpress.com/category/1/Science-Fiction

我将如何使用 htaccess 文件编写这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:17:08.763

您将需要几个 RewriteConds 或（在我看来更好的方法）一个处理您的请求的 php 脚本。对于第一种方法：

```
RewriteCond %{HTTP_HOST} ^([^\.]+)\.example\.com$ [NC]
RewriteCond %{REQUEST_URI} ^(ThanksForAllTheFish) [NC]
RewriteRule (.*) http://www.bundoranpress.com/$1/$2 [L,R] 
```

这会将 store.example.com/ThanksForAllTheFish 重定向到销售 Douglas Adam 书籍的 www.bundoranpress.com/store/ThanksForAllTheFish。现在，您可以像这样在第二个 RewriteCond 中添加所有可能的术语：

```
RewriteCond %{REQUEST_URI} ^(ThanksForAllTheFish|Universe|Hitchhiking) [NC] 
```

这将捕获其中一个术语并重定向到相应的地址（例如 www.bundoranpress.com/store/Universe）。你会发现这很快就会变得很困难。更好的方法是将*所有*url 从特定文件夹和子域重定向到处理其余部分的 php 脚本，如下所示：

```
RewriteCond %{HTTP_HOST} ^([^\.]+)\.example\.com$ [NC]
RewriteCond %{REQUEST_URI} ^books/(.*) [NC]
RewriteRule (.*) http://www.bundoranpress.com/index.php?sub=$1&cat=$2 [L,R] 
```

这会将 store.example.com/books/ThanksForAllTheFish 重定向到 www.bundoranpress.com/index.php?sub=store&cat=ThanksForAllTheFish。您可以分别通过 $_GET["sub"] 和 $_GET["cat"] 访问变量。这为您提供了更大的灵活性。

# jboss7.x - Jboss7.1拿war应用部署的地方

> ID：10261039
> 
> 赞同：3
> 
> 时间：2012-04-21T16:50:05.553
> 
> 标签：jboss7.x

我已经在我的独立 jboss7.1 实例中部署了 jboss-as-helloworld-erai 应用程序，后来我删除了它（在 */standalone/deployments 文件夹中）。但是每次我重新启动服务器时，它都会重新部署该应用程序。jboss是否还有其他地方读取应用程序进行部署？最良好的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T19:03:16.600

您是否在服务器运行时删除了该文件？

可能，JBoss 仍然在您的`/standalone/configuration/standalone*.xml`文件中（在文件末尾）找到部署信息。`/standalone/tmp/vfs/temp*`JBoss 在其中一个文件夹中解压缩其部署。只要它在您的配置文件中找到部署，它就会启动应用程序。

部署二进制文件位于`standalone/data/content`. 这些也需要删除。最好的解决方案是通过 CLI、maven 插件或 Web 控制台正确取消部署应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T02:56:20.300

这听起来不像预期的行为。您能否确认您在使用部署文件夹时所采取的步骤？例如：

## 部署

1.  将应用程序文件复制到`/standalone/deployments`文件夹
2.  Deployment Scanner 创建一个`.dodeploy`标记文件
3.  Deployment Scanner 拾取应用程序并创建`.deployed`标记文件
4.  应用程序确认已部署（检查管理控制台以确认）

## 取消部署

1.  `/standalone/deployments`从文件夹中删除的应用程序
2.  删除应用程序（或）删除`.deployed`标记文件
3.  部署扫描程序取消部署应用程序并创建`.undeployed`标记文件
4.  确认在控制台中删除了应用程序
5.  重启服务器
6.  确认删除是持久的

`README.txt`文件夹中的文件`deployments`在命令行中的一个简单步骤中显示了简单的取消部署工作流。

1.  `rm $AS/standalone/deployments/example.war.deployed`

## 文档

您可以在官方文档中阅读有关部署扫描程序的更多信息。有一个关于扫描器标记文件的主题，以及一个关于扫描器和部署的父主题。如果您发现扫描仪有问题，那是一个错误。您可能想测试预期的行为，并尝试管理控制台。

*   [Red Hat Docs - 部署扫描器标记文件参考](http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Application_Platform/6/html/Beta_Documentation/Reference_for_Deployment_Scanner_Marker_Files.html)

*   [红帽文档 - 关于应用程序部署](http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Application_Platform/6/html/Beta_Documentation/Deploy_Applications.html)

## 潜在问题

*   不要将 Deployment Scanner 子系统（监视独立服务器实例的 Deployments 文件夹）与管理控制台或管理 CLI 部署过程相混淆。您最好使用其中一种管理工具而不是热部署功能，以便更好地控制应用程序的状态和存在。

# ruby-on-rails - Rails：生产中的操作错误但在开发中没有

> ID：10261043
> 
> 赞同：0
> 
> 时间：2012-04-21T16:50:24.857
> 
> 标签：ruby-on-rails, omniauth, ruby-on-rails-3.2

谁能解释为什么我在生产中不断出现错误，但在开发中却没有？相关部分：

```
get: /user/logout
ActionController::RoutingError (uninitialized constant User::SessionController):
  activesupport/lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport/lib/active_support/inflector/methods.rb:228:in `each'
  activesupport/lib/active_support/inflector/methods.rb:228:in `constantize'
  actionpack/lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack/lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack/lib/action_dispatch/routing/route_set.rb:32:in `call'
  journey/lib/journey/router.rb:68:in `block in call'
  journey/lib/journey/router.rb:56:in `each'
  journey/lib/journey/router.rb:56:in `call'
  actionpack/lib/action_dispatch/routing /route_set.rb:600:in `call'
  omniauth/lib/omniauth/strategy.rb:177:in `call!'
  omniauth/lib/omniauth/strategy.rb:157:in `call'
  omniauth/lib/omniauth/builder.rb:48:in `call'
  airbrake/lib/airbrake/rack.rb:27:in `call' 
```

路线：

```
Application1::Application.routes.draw do
  match('/auth/:provider/callback' => 'session#create', :format => false)
  root(:to => 'blog/archives#index', :format => false)

  namespace(:user) do
    match('/logout' => 'session#destroy', :format => false)
  end 

  namespace(:blog) do
    match('/archive/:slug' => 'archive#show', :format => false)
    constraints(:page => /page\d+/) do
      match('/archives/:page' => 'archives#index', :format => false)
    end 
  end 
end 
```

我正在使用带有最新 Omniauth 的 Rails 3.2.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:14:16.650

您已经创建了一个命名空间**用户**，因此您应该将定义**销毁操作的****会话**控制器放置在此路径中：

 **```
/app/controllers/user/session_controller.rb 
```

然后你可以做类似的事情：

创建一个文件`/app/controller/user/base_controller.rb`来定义这个：

```
class User::BaseController < ApplicationController
 # Whatever you want here
end 
```

并将位于的会话控制器定义`/app/controllers/user/session_controller.rb`为：

```
class Users::SessionsController < User::BaseController
 def destroy
  # whatever you want destroy to do..
 end
end 
```

阅读[本文](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)以获取有关命名空间和路由的更多文档。**

# python - 按下按钮时显示一组重复图像的简单 gui

> ID：10261045
> 
> 赞同：1
> 
> 时间：2012-04-21T16:50:45.913
> 
> 标签：python, user-interface, module, tkinter

我做了一个非常简单的 gui，它有一个按钮并显示一个图像（.gif）。我的目标是在您按下按钮时输出另一个 .gif。我的文件目录中有 2 个 .gif 文件，关键是每当您按下按钮时都要在这两个文件之间切换。

```
#Using python2.7.2
import Tkinter

root = Tkinter.Tk()

try:
    n
except:
    n = 0

def showphoto(par):
    if par%2 == 0:
        try:
            label2.destroy()
        except:
            pass
        photo = Tkinter.PhotoImage(file="masc.gif")
        label2 = Tkinter.Label(image=photo)
        label2.image = photo
        label2.pack()

    else:
        try:
            label2.destroy()
        except: 
            pass
        photo = Tkinter.PhotoImage(file="123.gif")
        label2 = Tkinter.Label(image=photo)
        label2.image = photo
        label2.pack()

myContainer1 = Tkinter.Frame(root, width = 100, height = 100)
myContainer1.pack()

def callback(event):
    global n
    showphoto(n)
    n = n + 1

button1 = Tkinter.Button(myContainer1)
button1["text"]= "Next pic" 
button1["background"] = "green"
button1.bind("<Button-1>", callback(n))     
button1.pack()                 

root.mainloop() 
```

当前代码只输出第一个图像（`masc.gif`），但是当我按下按钮时，它不会切换到另一个图像（`123.gif`）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:12:42.520

这可以通过类更容易实现，因为类在不使用全局变量的情况下保存所有必要的数据。

```
import Tkinter as tk
from collections import OrderedDict

class app(tk.Frame):
   def __init__(self,master=None, **kwargs):
      self.gifdict=OrderedDict()
      for gif in ('masc.gif','123.gif'):
          self.gifdict[gif]=tk.PhotoImage(file=gif)
      tk.Frame.__init__(self,master,**kwargs)
      self.label=tk.Label(self)
      self.label.pack()
      self.button=tk.Button(self,text="switch",command=self.switch)
      self.button.pack()
      self.switch()  

   def switch(self):
      #Get first image in dict and add it to the end
      img,photo=self.gifdict.popitem(last=False)
      self.gifdict[img]=photo
      #display the image we popped off the start of the dict.
      self.label.config(image=photo)

 if __name__ == "__main__":
   A=tk.Tk()
   B=app(master=A,width=100,height=100)
   B.pack()
   A.mainloop() 
```

当然，这可以更普遍地完成......（例如，可以传递要循环通过的图像列表），这将切换 self.gifs 中的所有图像......

这种方法还消除了每次销毁和重新创建标签的必要性，而我们只是重复使用我们已经拥有的标签。

**编辑**

现在我使用 OrderedDict 来存储文件。（键=文件名，值=照片图像）。然后我们从字典中弹出第一个元素进行绘图。当然，如果您使用的是python2.6或更早版本，您可以在字典之外保留一个列表并使用列表来获取键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:46:35.830

```
button1 = Tkinter.Button(myContainer1)
button1["text"]= "Next pic" 
button1["background"] = "green"
button1.bind("<Button-1>", callback(n)) 
```

首先，您将`<Button-1>`事件绑定到`None`（这就是`callback(n)`评估结果）。您应该将其绑定到`callback`（没有括号，也就是呼叫运算符）。

其次，我建议您更改`callback`为不接受任何参数，删除`bind`调用并将您的按钮创建为：

```
button1 = Tkinter.Button(myContainer1, command=callback) 
```

# visual-studio-2010 - 除了分支文件夹之外，维护一个“主干”VS项目文件夹是一个好主意吗？

> ID：10261052
> 
> 赞同：2
> 
> 时间：2012-04-21T16:51:08.893
> 
> 标签：visual-studio-2010, svn, svn-trunk

在 SVN 环境中的 PC 客户端上使用 Visual Studio 2010 时，是否可以合理地假设每个项目除了可能正在使用的任何分支之外确实需要一个“主干”参考工作副本？当将分支更改合并回主干时，我看不到如何将没有主干的单个分支副本正确地协调回存储库......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:32:04.100

更正您需要的每个项目（svn 存储库中的文件夹）的默认结构

```
 Project
    +-- trunk
    +-- tags
    +-- branches 
```

# ruby-on-rails-3 - 在 Rails 操作中启动 Watir-Webdriver

> ID：10261054
> 
> 赞同：4
> 
> 时间：2012-04-21T16:51:17.410
> 
> 标签：ruby-on-rails-3, watir, watir-webdriver

我需要从动态构建的页面获取数据，我找到的一个解决方案是 Watir。

irb 的下一个代码可以正常工作：

```
require 'rubygems'
require 'watir-webdriver'
require 'headless'

Headless.ly do
  browser = Watir::Browser.new :firefox
  browser.goto "google.com"
  browser.close
end 
```

如果我尝试从 Rails 应用程序运行它有下一个问题：

宝石文件：

```
gem 'headless'
gem 'watir-webdriver' 
```

行动：

```
def test_action
    Headless.ly do
          browser = Watir::Browser.new(:firefox)
          browser.goto "google.com"
          browser.close
     end
end 
```

有下一个输出：

```
no such file to load -- {
  "frozen": {
    "app.update.auto": false,
    "app.update.enabled": false,
    "browser.download.manager.showWhenStarting": false,
    "browser.EULA.override": true,
    "browser.EULA.3.accepted": true,
    "browser.link.open_external": 2,
    "browser.link.open_newwindow": 2,
    "browser.offline": false,
    "browser.safebrowsing.enabled": false,
    "browser.safebrowsing.malware.enabled": false,
    "browser.search.update": false,
    "browser.sessionstore.resume_from_crash": false,
    "browser.shell.checkDefaultBrowser": false,
    "browser.tabs.warnOnClose": false,
    "browser.tabs.warnOnOpen": false,
    "devtools.errorconsole.enabled": true,
    "dom.disable_open_during_load": false,
    "extensions.autoDisableScopes": 10,
    "extensions.logging.enabled": true,
    "extensions.update.enabled": false,
    "extensions.update.notifyUser": false,
    "network.manage-offline-status": false,
    "network.http.phishy-userpass-length": 255,
    "offline-apps.allow_by_default": true,
    "prompts.tab_modal.enabled": false,
    "security.fileuri.origin_policy": 3,
    "security.fileuri.strict_origin_policy": false,
    "security.warn_entering_secure": false,
    "security.warn_entering_secure.show_once": false,
    "security.warn_entering_weak": false,
    "security.warn_entering_weak.show_once": false,
    "security.warn_leaving_secure": false,
    "security.warn_leaving_secure.show_once": false,
    "security.warn_submit_insecure": false,
    "security.warn_viewing_mixed": false,
    "security.warn_viewing_mixed.show_once": false,
    "signon.rememberSignons": false,
    "toolkit.networkmanager.disable": true,
    "toolkit.telemetry.prompted": 2,
    "toolkit.telemetry.enabled": false,
    "toolkit.telemetry.rejected": true
  },
  "mutable": {
    "browser.dom.window.dump.enabled": true,
    "browser.startup.page": 0,
    "browser.startup.homepage": "about:blank",
    "dom.max_script_run_time": 30,
    "dom.report_all_js_exceptions": true,
    "javascript.options.showInConsole": true,
    "network.http.max-connections-per-server": 10,
    "webdriver_accept_untrusted_certs": true,
    "webdriver_assume_untrusted_issuer": true
  }
} 
```

问题在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:55:41.923

My project have the same errors with you

I found this question cauesed by the gem "selenium-webdriver"

and the verion should be '2.20.0'

If you gem's version is higher than this, this error would happen

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:04:39.053

just put this code in your initializers directory, works with 'watir-webdriver', '0.5.5'

```
require 'childprocess'
require 'tmpdir'
require 'fileutils'
require 'date'

require 'multi_json'
require 'selenium/webdriver/common'

module Selenium
  module WebDriver

    if MultiJson.respond_to?(:load)
      # @api private
      def self.json_load(obj)
        MultiJson.decode(obj)
        #MultiJson.load(obj) here was mistake
      end
    else
      # @api private
      def self.json_load(obj)
        MultiJson.decode(obj)
      end
    end

  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T23:20:31.030

[这里](http://code.google.com/p/selenium/issues/detail?id=3783)讨论的问题

要解决它，您还可以尝试更新 multi_json gem，例如：

```
bundle update multi_json 
```

对我来说，从版本 1.0.3 更新到 1.3.5 解决了这个问题。

# perforce - Perforce 命令行

> ID：10261055
> 
> 赞同：-2
> 
> 时间：2012-04-21T16:51:19.597
> 
> 标签：perforce

在 Perforce 中检查我的更改列表（签出与否）中是否有文件的命令行语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T01:53:18.517

我不完全确定你在问什么？您想查看更改列表中的文件列表吗？那就是`p4 describe`。

# java - 在 HTML/JS 应用程序中嵌入 playn 游戏

> ID：10261064
> 
> 赞同：2
> 
> 时间：2012-04-21T16:52:29.113
> 
> 标签：java, html, gwt, playn

我正在探索用 PlayN 制作游戏。看起来很棒，但仅适用于游戏本身——我更喜欢用 HTML 做菜单、导航、高分列表等（顺便说一下，使用 GWT）。

如果我制作 PlayN 游戏，是否有从外部挂钩的方法？它是否有任何与包含应用程序通信的机制，或者我必须在 PlayN 框架内完成整个应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:55:03.207

如果您只打算部署到 HTML5，那么您可以在游戏中使用所有 GWT，并尽可能深入地与周围的网页集成。

如果您想在 Android 和 iOS 等其他平台上进行部署，您只需坚持使用 PlayN API。

# android - Android appwidget 将其他小部件变成添加的小部件，第二个小部件不起作用？

> ID：10261065
> 
> 赞同：1
> 
> 时间：2012-04-21T16:52:36.523
> 
> 标签：android, android-appwidget, appwidgetprovider

我正在制作一个有 2 个小部件的 android 应用程序。我有 1 个小部件设置和工作，第二个小部件在小部件列表中被识别并正确加载，但是：

如果我在添加小部件 2 时屏幕上已经有小部件 1，则两个小部件都会更改为小部件 2。如果我有一个小部件 2 和一个小部件 1，并添加一个小部件 2，它们都会更改为小部件 2。如果我添加了小部件 1 - 它们都更改为小部件 1。

此外，单击小部件 2 时没有任何反应，即使我使用了与小部件 1 几乎相同的代码。

以下是相关文件：

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.liamwli.reboot_widget"
    android:installLocation="internalOnly"
    android:versionCode="3"
    android:versionName="1.1" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.REBOOT" />
    <uses-permission android:name="com.android.vending.CHECK_LICENSE" />

    <application
        android:allowClearUserData="false"
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <activity
            android:name=".reboot_widget_activeity"
            android:excludeFromRecents="true"
            android:icon="@drawable/icon"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name=".Reboot_rec"
            android:icon="@drawable/icon"
            android:label="Reboot Recovery Widget" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                <action android:name="com.liamwli.reboot_widget.Reboot_rec.ACTION_WIDGET_CLICK_RECEIVER" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/rebr_widget" />
        </receiver>

        <service android:name=".Reboot_rec$ToggleService" />

        <receiver
            android:name=".Widget"
            android:icon="@drawable/icon"
            android:label="Reboot Widget" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                <action android:name="com.liamwli.reboot_widget.Widget.ACTION_WIDGET_CLICK_RECEIVER" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widgetstuff" />
        </receiver>

        <service android:name=".Widget$ToggleService" />

        <activity
            android:name=".Reboot"
            android:excludeFromRecents="true"
            android:icon="@drawable/icon"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.liamwli.reboot_widget.REBOOT" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Reboot_rec"
            android:excludeFromRecents="true"
            android:icon="@drawable/icon"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.liamwli.reboot_widget.REBOOT_REC" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".hidprefs"
            android:excludeFromRecents="true"
            android:icon="@drawable/icon"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.liamwli.reboot_widget.HIDPREFS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

Widget.java（对于小部件 1）：

```
package com.liamwli.reboot_widget;

import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.widget.RemoteViews;

public class Widget extends AppWidgetProvider {
    public static String ACTION_WIDGET_CLICK_RECEIVER = "ActionReceiverWidget";

    public static int appid[];
    public static RemoteViews rview;

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        updateWidgetState(context, "");
    }

    @Override
    public void onReceive(Context paramContext, Intent paramIntent) {
        String str = paramIntent.getAction();
        if (paramIntent.getAction().equals(ACTION_WIDGET_CLICK_RECEIVER)) {
            updateWidgetState(paramContext, str);
        } else {
            if ("android.appwidget.action.APPWIDGET_DELETED".equals(str)) {
                int i = paramIntent.getExtras().getInt("appWidgetId", 0);
                if (i == 0) {

                } else {
                    int[] arrayOfInt = new int[1];
                    arrayOfInt[0] = i;
                    onDeleted(paramContext, arrayOfInt);
                }
            }
            super.onReceive(paramContext, paramIntent);
        }
    }

    static void updateWidgetState(Context paramContext, String paramString) {
        RemoteViews localRemoteViews = buildUpdate(paramContext, paramString);
        ComponentName localComponentName = new ComponentName(paramContext,
                Widget.class);
        AppWidgetManager.getInstance(paramContext).updateAppWidget(
                localComponentName, localRemoteViews);
    }

    private static RemoteViews buildUpdate(Context paramContext, String paramString)
       {
         // Toast.makeText(paramContext, "buildUpdate() ::"+paramString, Toast.LENGTH_SHORT).show();
         rview = new RemoteViews(paramContext.getPackageName(), R.layout.widget_layout);
         Intent active = new Intent(paramContext, Widget.class);
         active.setAction(ACTION_WIDGET_CLICK_RECEIVER);

         PendingIntent configPendingIntent = PendingIntent.getActivity(paramContext, 0, active, 0);

// upadte this R.id.buttonus1 with your layout or image id on which click you want to start Activity

Intent configIntent = new Intent(paramContext,  Reboot.class);
configIntent.setAction((ACTION_WIDGET_CLICK_RECEIVER));
PendingIntent configPendingIntent1 = PendingIntent.getActivity(paramContext, 0, configIntent, 0);
rview.setOnClickPendingIntent(R.id.bRB, configPendingIntent1);
         if(paramString.equals(ACTION_WIDGET_CLICK_RECEIVER))
         {

         }  
          return rview; 
       }

    @Override
    public void onEnabled(Context context) {
        super.onEnabled(context);
        // Toast.makeText(context, "onEnabled()  ", Toast.LENGTH_SHORT).show();
    }

    // Called each time an instance of the App Widget is removed from the host
    @Override
    public void onDeleted(Context context, int[] appWidgetId) {
        super.onDeleted(context, appWidgetId);
        // Toast.makeText(context, "onDeleted()  ", Toast.LENGTH_SHORT).show();
    }

    // Called when last instance of App Widget is deleted from the App Widget
    // host.
    @Override
    public void onDisabled(Context context) {
        super.onDisabled(context);
        // Toast.makeText(context, "onDisabled()  ", Toast.LENGTH_SHORT).show();
    }

} 
```

Reboot_rec.java（用于小部件 2）：

```
package com.liamwli.reboot_widget;

import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.widget.RemoteViews;

public class Reboot_rec extends AppWidgetProvider {

    public static String ACTION_WIDGET_CLICK_RECEIVER = "ActionReceiverWidget";

    public static int appid[];
    public static RemoteViews rview;

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        updateWidgetState(context, "");
    }

    @Override
    public void onReceive(Context paramContext, Intent paramIntent) {
        String str = paramIntent.getAction();
        if (paramIntent.getAction().equals(ACTION_WIDGET_CLICK_RECEIVER)) {
            updateWidgetState(paramContext, str);
        } else {
            if ("android.appwidget.action.APPWIDGET_DELETED".equals(str)) {
                int i = paramIntent.getExtras().getInt("appWidgetId", 0);
                if (i == 0) {

                } else {
                    int[] arrayOfInt = new int[1];
                    arrayOfInt[0] = i;
                    onDeleted(paramContext, arrayOfInt);
                }
            }
            super.onReceive(paramContext, paramIntent);
        }
    }

    static void updateWidgetState(Context paramContext, String paramString) {
        RemoteViews localRemoteViews = buildUpdate(paramContext, paramString);
        ComponentName localComponentName = new ComponentName(paramContext,
                Widget.class);
        AppWidgetManager.getInstance(paramContext).updateAppWidget(
                localComponentName, localRemoteViews);
    }

    private static RemoteViews buildUpdate(Context paramContext, String paramString)
       {
         // Toast.makeText(paramContext, "buildUpdate() ::"+paramString, Toast.LENGTH_SHORT).show();
         rview = new RemoteViews(paramContext.getPackageName(), R.layout.widget_layout_rec);
         Intent active = new Intent(paramContext, Reboot_rec.class);
         active.setAction(ACTION_WIDGET_CLICK_RECEIVER);

         PendingIntent configPendingIntent = PendingIntent.getActivity(paramContext, 0, active, 0);

// upadte this R.id.buttonus1 with your layout or image id on which click you want to start Activity

Intent configIntent = new Intent(paramContext,  Reboot_rec_ac.class);
configIntent.setAction((ACTION_WIDGET_CLICK_RECEIVER));
PendingIntent configPendingIntent1 = PendingIntent.getActivity(paramContext, 0, configIntent, 0);
rview.setOnClickPendingIntent(R.id.bRBR, configPendingIntent1);
         if(paramString.equals(ACTION_WIDGET_CLICK_RECEIVER))
         {

         }  
          return rview; 
       }

    @Override
    public void onEnabled(Context context) {
        super.onEnabled(context);
        // Toast.makeText(context, "onEnabled()  ", Toast.LENGTH_SHORT).show();
    }

    // Called each time an instance of the App Widget is removed from the host
    @Override
    public void onDeleted(Context context, int[] appWidgetId) {
        super.onDeleted(context, appWidgetId);
        // Toast.makeText(context, "onDeleted()  ", Toast.LENGTH_SHORT).show();
    }

    // Called when last instance of App Widget is deleted from the App Widget
    // host.
    @Override
    public void onDisabled(Context context) {
        super.onDisabled(context);
        // Toast.makeText(context, "onDisabled()  ", Toast.LENGTH_SHORT).show();
    }

} 
```

Rebr_widget.xml（用于小部件 2）：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android" android:minHeight="40dp" android:minWidth="40dp" android:initialLayout="@layout/widget_layout_rec">

</appwidget-provider> 
```

widgetstuff.xml（用于小部件 1）：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android" android:minHeight="40dp" android:minWidth="40dp" android:initialLayout="@layout/widget_layout">

</appwidget-provider> 
```

任何人都可以告诉我问题是什么吗？我正在努力解决这个问题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:59:23.043

你还没有使用`onUpdate`param `int[] appWidgetIds`。

您应该遍历它，并将任何代码应用于每个代码。目前，您没有告诉它要更新哪个小部件。您也不会尝试更新多个小部件。

下面的示例，注意 N 上的循环。 sub 方法还使用小部件的 id，它是从循环上传递的`onUpdate`。

```
 @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        final int N = appWidgetIds.length;

        Log.d(LOG_TAG, "Updating Example Widgets.");

        // Perform this loop procedure for each App Widget that belongs to this
        // provider
        for (int i = 0; i < N; i++) {
            int appWidgetId = appWidgetIds[i];

            // Create an Intent to launch ExampleActivity
            Intent intent = new Intent(context, WidgetExampleActivity.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);

            // Get the layout for the App Widget and attach an on-click listener
            // to the button
            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget1);
            views.setOnClickPendingIntent(R.id.button, pendingIntent);
            // Tell the AppWidgetManager to perform an update on the current app
            // widget
            appWidgetManager.updateAppWidget(appWidgetId, views);

            // Update The clock label using a shared method
            updateAppWidget(context, appWidgetManager, appWidgetId);
        }
    }

    public static void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {
        String currentTime =  df.format(new Date());

        RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.widget1);
        updateViews.setTextViewText(R.id.widget1label, currentTime);
        appWidgetManager.updateAppWidget(appWidgetId, updateViews);
    } 
```

# asp.net - sql server：使用 OR 子句选择任一条件？

> ID：10261068
> 
> 赞同：0
> 
> 时间：2012-04-21T16:52:52.433
> 
> 标签：asp.net, sql-server

我有一个产品平板电脑；因为有几个字段，例如 subcatid 和 Designerid，它们分别来自 Subcategories 和 Designers 表。网站 (ASP.NET C#) 管理员可以通过选择 Designerid 或 subcatid 或两者在 CouponCodes 表中插入某种优惠券代码。这意味着，如果在 CouponCodes 表中找到该产品的 Designerid 或 subcatid 字段或两者，则可以更便宜地出售特定产品。请注意，产品不一定有设计者 ID 或子目录：管理员可以在输入产品时输入“N/A”；N/A 在其各自的表中的设计者标识为 27，子分类标识为 9。可能不是最好的数据库设计。

无论如何，这是我在 SSMS 中的代码；当我尝试执行它时，我得到一个语法错误。sql如何实现？谢谢！

```
select * from couponcodes 
where ( couponcodes.subcatid in 
(select subcatid from Products where Products.prodid = 1012)
AND (couponcodes.couponcode = '5braceLets'))

OR 

Where  ( couponcodes.designerid in 
(select designerid from Products where Products.prodid = 1012)
AND (couponcodes.couponcode = '5dora')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:56:58.583

您有`where`两次导致语法错误。你想做的是

```
select * from couponcodes 
where ( couponcodes.subcatid in 
(select subcatid from Products where Products.prodid = 1012)
AND (couponcodes.couponcode = '5braceLets'))
OR 
( couponcodes.designerid in 
(select designerid from Products where Products.prodid = 1012)
AND (couponcodes.couponcode = '5dora')) 
```

# entity-framework - EF Code First，数据库在哪里指定？

> ID：10261072
> 
> 赞同：1
> 
> 时间：2012-04-21T16:53:04.673
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

在尝试使用 EF Code First 时，我刚刚创建了一个测试 SQLServer Express DB。数据库已正确创建并且一切正常。但是我看不到这个数据库的连接字符串在哪里。我希望在 Web.config 中找到它，但事实并非如此。

提前致谢，

埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:05:01.393

EF 默认`./sqlexpress`为服务器 URI。要更改这一点，请添加一个名称设置为与 DBContext 类同名的连接字符串

例如，假设您的 DbContext 类名为“MyDbContext”：

```
<add name="MyDbContext" connectionString="connectionStringHere" providerName="System.Data.SqlClient" /> 
```

# c#-4.0 - 如何通过 odata v2 发送分层数据？

> ID：10261074
> 
> 赞同：1
> 
> 时间：2012-04-21T16:53:26.490
> 
> 标签：c#-4.0, wcf-data-services, odata, linqpad

使用 WCF 数据服务 4.0，我无法返回分层数据。我有一个 Employee 类，它有一个 EquipmentIds 的集合。那些 EquipmentIds 正在通过网络丢失。这是我的代码：

```
public class ODataV2 : DataService<ODataV2Model>
{
    public static void InitializeService(DataServiceConfiguration config)
    {
        config.UseVerboseErrors = true;
        config.SetEntitySetAccessRule("*", EntitySetRights.AllRead);
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
    }
}
public class ODataV2Model
{
    public ODataV2Model()
    {
        Employees = new List<Employee>{
            new Employee { Id = 1, Name="Doug", EquipmentIds = new List<Equipment> { new Equipment { Id = 1 },new Equipment { Id = 2 } }.AsQueryable()},
            new Employee { Id = 2, Name= "George", EquipmentIds = new List<Equipment> {new Equipment { Id = 3}, new Equipment { Id = 5} }.AsQueryable() }
        }.AsQueryable();
    }
    public IQueryable<Employee> Employees { get; private set; }
    public IQueryable<Equipment> EquipmentIds { get; private set; }
}
[DataServiceKey("Id")]
public class Employee
{
    public int Id { get; set; }
    public string Name { get; set; }
    public IQueryable<Equipment> EquipmentIds { get; set; }
}
[DataServiceKey("Id")]
public class Equipment
{
    public int Id { get; set; }
} 
```

当我在上面运行 LinqPad 时，我得到了这个： ![设备 ID 为 0 的员工](../Images/2182f7029df01befb7e172c7c6c5bfe5.png)

我应该拥有两个计数为 2 的 EquipmentIds 集合，但我有 0。我没有收到错误，但数据永远不会到达客户端。

我切换到 WCF Data Services v 5.0，它在 .NET 端成功运行，但我失去了使用 LinqPad 查询的能力。有没有办法在 v 4.0 中工作？

如果没有，有没有办法升级 LinqPad 以识别 odata v3（WCF 数据服务 5.0）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:22:27.647

查询 ~/Employees 将仅包括 Employee 实体，而不包括任何导航属性内容。这是为了减少有效载荷大小。如果您真的想包含一些导航属性，只需指定例如 ~/Employees?$expand=EquipmentIds。

# struts2 - Struts2 验证

> ID：10261076
> 
> 赞同：1
> 
> 时间：2012-04-21T16:53:39.547
> 
> 标签：struts2

我用过`Struts2`一段时间，但对`Struts2`Validation还是很困惑。

我已经使用xml-validation，或者方法`addFieldError()`来验证，但是当我第一次输入form-page，一个带有struts-tags的页面和a`<s:form>`时，我不能只通过href-link进入这个页面，我必须去通过另一个action，我读到jsp的那个页面，带有struts-tags一定来自一个action。

我通常创建一个动作只是为了重定向到这个输入页面，在`execute()`方法中只是“成功”，这个动作的作用是合法地进入输入页面，在处理输入表单输入页面的动作中，我选择“输入”结果仍然是这个输入页面。

所以，我觉得这样做很不舒服，我总是有一个`GoToSiteAction`，只是第一次进入输入页面。

所以，我真的需要你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-06T11:07:24.940

使用 with input fields ，创建一个动作并创建一个与 java 文件名同名的验证 xml 文件 例如： AddInput.java xml 文件： AddInput-validation.xml 把它放在同一个包中。

像这样在 xml 文件中编写表单所需的所有验证。

```
<field name="U_Id"> 
    <field-validator type="requiredstring" short-circuit="true">
     <message>Affiliate Id cannot be empty</message> 
    </field-validator>
</field>
<field name="Password">
    <field-validator type="requiredstring" short-circuit="true">
     <message>Password cannot be empty</message> 
    </field-validator>
    <field-validator type="stringlength">  
<param name="minLength">5</param>  
<param name="maxLength">30</param>  
<message>Password cannot be less than 5 or more than 30</message>  
</field-validator>
</field> 
```

当您点击操作时，它将首先点击验证 xml 并检查验证，然后处理操作类部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:21:43.320

您没有使用或没有使用 struts2-conventions 插件来完全发挥作用。请参阅：[http](http://struts.apache.org/2.1.6/docs/convention-plugin.html) ://struts.apache.org/2.1.6/docs/convention-plugin.html在此页面中搜索字符串“操作示例和结果到模板映射”并考虑下表。

将来在将 struts2-conventions-plugin jar 添加到您的项目后，将后缀“-input”添加到所有未来表单的末尾。

假设我们创建了一个表单来添加新员工：

```
/WEB-INF/content/add-employee-input.jsp 
```

struts2 表单标记将引用一个在 java 类中简单称为“add-employee”的操作，可能名称类似于`com.mypackages.struts2.AddEmployee`then 如果 add-employee 操作验证失败，则返回“input”，并再次出现“add-employee-input”表单呈现。但是我们不需要创建一个“add-employee-input”动作，conventions 插件会自动为我们做这件事……因此我们可以通过引用直接输入表单，这非常方便。

试试看，你会明白我的意思。

# jquery - 仅当超过 15 个字符时，Textarea 才返回 .val()

> ID：10261083
> 
> 赞同：-1
> 
> 时间：2012-04-21T16:54:15.057
> 
> 标签：jquery, html, textarea

你能告诉我为什么用这个表格：

```
<div id="comment-form">
<h3>Commenta questo racconto:</h3>
<form method="post" id="story-comment-form" action="#">
    <textarea name="comment" id="story-comment-text"></textarea>
    <input type="submit" name="vote" class="submit" id="story-comment-submit" title="Invia commento" value="Invia commento"/>
<form>
</div> 
```

这个jQuery代码：

```
$("#story-comment-submit").click(function(e)
{
    e.preventDefault();
    var a = $("#story-comment-text").val();
    alert(a);
}); 
```

var a 仅在 textarea 表单中有超过 15 个字符时才返回值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:05:44.360

解决了，我的另一个脚本有问题。对不起大家。

# android - Android：NFC前台调度优先级

> ID：10261086
> 
> 赞同：0
> 
> 时间：2012-04-21T16:54:58.037
> 
> 标签：android, nfc

我希望有一个人可以帮助我！

我有 2 个活动 A 和 B。

在清单中，我将活动 A 指定为 NFC 事件的处理程序

```
<intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <data android:mimeType="text/plain" />
</intent-filter> 
```

在 B 中，我定义了前台调度来处理与标签有效负载不同的东西（这是一个简单的纯文本）。

现在...

问题是当我在 B 活动中启用foregroundDispatch 时。当它发生时，每次我把手机放在标签上，在任何情况下，都会调用 B 活动！我不想要这个。我希望只有当 B 是前台时才会发生这种情况，如果不是，则调用 A 活动！

它只在第一次工作，当 B 活动没有在 onResume 中启用前台调度时。我能怎么做 ？

我希望我糟糕的英语足以解释一切

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:00:38.803

您是否调用`disableForegroundDispatch()`了`onPause()`活动 B？

# c++ - 在 bad_alloc 异常的情况下从 std 容器中释放内存的策略

> ID：10261087
> 
> 赞同：0
> 
> 时间：2012-04-21T16:55:02.807
> 
> 标签：c++, memory-management, exception-handling

我正在考虑实施以下策略：

在类方法中处理`std::bad_alloc`异常时，将在重新抛出异常之前尽可能/有意义地尝试释放内存。所以如果一个对象有一些可以被释放的标准容器（std::vector<>），那么我们可能会这样做：

```
catch( std::bad_alloc& e ) {
  //free any memory in my std::vector member, how? by doing this dirty hack
  ~myVec();
  new ( &myVec) std::vector<myType>();
  throw; //rethrow exception
} 
```

**问题：**上述“肮脏的黑客”是在展开异常时释放内存的安全策略吗？优缺点都有什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:59:08.193

您无需这样做 - 向量将自动销毁。这就是 RAII 的工作原理。即使您希望在其他情况下清除矢量，它也有一个`clear()`方法。或者你可以这样做`vec = std::vector<T>();`。

# css - 我怎样才能让我的网站用户可以在一个盒子里写？

> ID：10261089
> 
> 赞同：-4
> 
> 时间：2012-04-21T16:55:50.093
> 
> 标签：css, text

我正在创建一个登录 div，人们可以在其中输入密码和电子邮件，但我不知道如何制作以便他们可以在 div 中写入。谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:59:32.603

你指的是 ContentEditable

[http://html5demos.com/contenteditable](http://html5demos.com/contenteditable)

```
<div id="mydiv" contenteditable="true">
  Editable text here
</div> 
```

不要将其用于密码字段。这很愚蠢。的全部意义`<input type="password">`在于它掩盖了输入。您必须使用特殊`onkeyup`处理程序将字符与星号交换，然后将 innerHTML 复制到 js 对象或保存在 data-val 属性或其他内容中。不要在这里重新发明轮子。

如今，您可以将`input`字段设置为看起来与任何 div 元素非常相似。

# ocaml - 如何在 Ocaml 中实现工厂设计模式

> ID：10261093
> 
> 赞同：1
> 
> 时间：2012-04-21T16:56:10.003
> 
> 标签：ocaml, factory-pattern

如何以两种方式在 Ocaml 中实现工厂设计模式：

功能和对象？

F# 受益于关键字“abstract”，因此它相当简单，但不是 Ocaml

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T17:06:33.313

[本文](http://people.csail.mit.edu/dnj/teaching/6898/projects/vicente-wagner.pdf)包含 OCaml 中各种设计模式的实现，包括抽象工厂模式和工厂方法模式。

在实现抽象工厂模式的面向对象版本时，`virtual`可以使用关键字代替`abstract`（在方法和类上）。

# sql - 用于 Liquibase 的 Groovy DSL 中的自定义 SQL？

> ID：10261095
> 
> 赞同：2
> 
> 时间：2012-04-21T16:56:14.773
> 
> 标签：sql, groovy, liquibase

是否可以在 Liquibase 的 Groovy DSL 中直接指定自定义 SQL 脚本？我知道，有一个 XML 格式的标签，但我还没有找到任何关于如何在 Groovy DSL 中使用它的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T17:31:14.563

还有一个`<sql>`XML 标记的直接实现。它看起来像这样：

```
databaseChangeLog() {
  changeSet(id:'monkey', author: 'tlberglund') {
    sql "UPDATE monkey SET emotion='angry' WHERE id=3;"
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T17:56:19.910

Groovy-liquibase 代码包含一个加载 SQL 文件的测试：

*   [https://github.com/tlberglund/groovy-liquibase/blob/master/test/test.groovy](https://github.com/tlberglund/groovy-liquibase/blob/master/test/test.groovy)

似乎工作如下：

```
databaseChangeLog() {
  changeSet(id:'monkey', author: 'tlberglund') {
    sqlFile(path: 'test.sql')
  }
  .. 
```

与原版 Liquibase 代码中使用的[XML 标记相同。](http://www.liquibase.org/manual/custom_sql_file)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-31T05:09:21.810

[Grails 数据库迁移插件](http://grails-plugins.github.io/grails-database-migration/docs/manual/guide/single.html)已经支持 Groovy DSL 的变更日志。

# c# - 使用 AJAX 避免 Page_Load 影响我的数组

> ID：10261099
> 
> 赞同：1
> 
> 时间：2012-04-21T16:56:37.790
> 
> 标签：c#, asp.net

我有一个文本框，用户想在上面放置数字，按下按钮后，数字应该传递给一个数组。

并且每个按下的数字和按钮，都应该按顺序保存在这个数组中（例如：3、4、5、....）

问题是，每次我按下按钮时，`page_load`都会发生。我有这个代码：

```
 protected string[] CurrentArr;

    protected void Page_Load(object sender, EventArgs e)
    {

        if (CurrentArr != null)
        {
            CurrentArr = (string[])Session["CurrentArr"];      
        }
        else
            CurrentArr = new string[length]; 
```

这`CurrentArr`是随时间变化的数组。

我也尝试用 AJAX 解决它：

```
<asp:ScriptManager runat="server" ID="sm">
    </asp:ScriptManager>

    <asp:UpdatePanel runat="server" ID="update">
        <ContentTemplate>
        <input type="text" class="response" id="how_many" name="guess" placeholder="Enter your guess..." />
        <asp:Button runat="server" class="button red" id="generate" name="generate" value="Generate!" OnClick="guess_Click" />
        <asp:Button runat="server" class="button red" id="win" name="win" value="you won"   />
        </ContentTemplate>
    </asp:UpdatePanel> 
```

但它对我的数组没有影响（尽管我的页面没有发回......）

有人有解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:22:35.980

您正在使用 UpdatePanel，它本质上是 AJAXified。只需添加一个触发器部分即可捕获按钮单击：

```
<asp:UpdatePanel runat="server" ID="update">
    <ContentTemplate>
        <input type="text" class="response" id="how_many" name="guess" placeholder="Enter your guess..." />
        <asp:Button runat="server" class="button red" id="generate" name="generate" value="Generate!" OnClick="guess_Click" />
        <asp:Button runat="server" class="button red" id="win" name="win" value="you won"   />
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="generate" EventName="Click" />
    </Triggers>
</asp:UpdatePanel> 
```

您可能遇到的问题是您的阵列没有通过回发持续存在。试试你和 ed 从会话中得到的、得到的和设置的。我不喜欢使用老式的数组。考虑一个列表，它们更通用。如果你最后特别需要一个数组，那么只需使用 myList.ToArray();

```
private List<int> CurrentArr = new List<string>();

protected void Page_Load(object sender, EventArgs e)
{
    if(Session["CurrentArr"] != null)
    {
        //if there is something stored in the session variable then grab that as a working array
        CurrentArr = (List<string>)Session["CurrentArr"];
    }
    else
    {
        //if not, then initialize one
        CurrentArr = new List<string>();
        Session["CurrentArr"] = CurrentArr;
    }
}

protected void guess_Click(object sender, EventArgs e)
{
    //get reference to the button clicked like you said in your question
    var btnMyButton = sender as Button; 
    btnMyButton.Enabled = false; //example of using the reference, disable the button that was clicked

    //add the value of your text box to the array/list, sort, then update the session
    this.CurrentArr.Add(txtYourTextBox.Text);
    this.CurrentArr.Sort();
    Session["CurrentArr"] = this.CurrentArr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:18:41.893

当然，`Load`是 ASP.Net 的 Page[生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)的一部分。

请参阅[Page.IsPostBack](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)以更好地控制您想要或不想运行的方法，具体取决于请求类型（是否为回发）。

在上面的代码中，这可能就是您的意思：

```
 if (Session["CurrentArr"] != null)
    {
        CurrentArr = (string[])Session["CurrentArr"];
    }
    else
    {
        CurrentArr = new string[length]; //where is length defined?
        Session["CurrentArr"] = CurrentArr;
    } 
```

# compilation - 用不同语言编写的不同应用程序如何交互？

> ID：10261100
> 
> 赞同：0
> 
> 时间：2012-04-21T16:56:40.827
> 
> 标签：compilation, subroutine

很晚了，我听说用不同语言编写的应用程序可以调用彼此的函数/子例程。现在，直到最近我都觉得那是很自然的——毕竟，是的——我当时就是这么想的，愚蠢的我！- 语言被编译成机器代码，所有语言都应该是相同的。直到不久前，我才意识到即使是用“高级机器码”（IL、字节码​​等）编译的语言也可以相互交互，实际上是应用程序。我试图找到很多次答案，但都失败了——没有一个答案让我满意——他们认为我对编译器了解很多，或者我完全不同意的东西，以及其他东西......请在很容易理解这是如何工作的。尤其是语言如何编译成“纯”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:08:51.227

这实际上是一个非常广泛的话题。编译为机器代码的语言通常可以调用彼此的例程，尽管通常并非不费力；例如，C++ 代码在正确声明时可以调用 C 例程：

```
// declare the C function foo so it can be called by C++ code
extern "C" {
    void foo(int, char *);
} 
```

这很简单，因为 C++ 明确设计为与 C 兼容（它还支持从 C 调用 C++ 例程）。

调用约定确实使情况复杂化，因为一个编译器编译的 C 例程可能无法从另一个编译器编译的 C 调用，除非它们共享一个公共调用约定。例如，一个编译器可能会编译

```
foo(i, j); 
```

到（伪组装）

```
PUSH the value of i on the stack
PUSH the value of j on the stack
JUMP into foo 
```

而另一个可能会以相反的顺序推送和的值，或者将它们放在寄存器`i`中。`j`如果`foo`由编译器按照另一种约定进行编译，它可能会尝试以错误的顺序从堆栈中获取其参数，从而导致不可预测的行为（如果它立即崩溃，请认为自己很幸运）。

一些编译器为此目的支持各种调用约定。维基[百科文章](https://en.wikipedia.org/wiki/Calling_convention)介绍了调用约定；有关更多详细信息，请参阅编译器的文档。

最后，在同一地址空间中混合字节码编译或解释语言和低级语言仍然更加复杂。高级语言实现通常带有自己的一组约定，以使用低级（C 或 C++）代码对其进行扩展。例如，Java 有[JNI](https://en.wikipedia.org/wiki/Java_Native_Interface)和[JNA](https://en.wikipedia.org/wiki/Java_Native_Access)。

# android - 片段布局列表 <--> 详细信息

> ID：10261101
> 
> 赞同：0
> 
> 时间：2012-04-21T16:56:47.113
> 
> 标签：android, fragment, viewflipper, portrait

我想实现具有以下设计的布局：

横向：左侧为项目列表，右侧为详细信息

纵向：项目列表，点击后只有详细信息

为了使它工作，我遵循了这些教程： [教程 1](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/) [教程 2](http://www.vogella.com/articles/Android/article.html#fragments)

它按预期工作。

但是，我不想在纵向并单击 Listitem 时启动新活动，而是希望片段被细节替换，以便我可以为过渡设置动画。

所以我到处玩，意见有问题。之后我阅读了以下文章，并修改了我的布局以使用占位符并以编程方式添加片段： [文章](http://portabledroid.wordpress.com/2011/04/19/programmatic-and-layout-fragments/)

单击列表项时触发的操作只是将其容器中的列表片段替换为详细信息片段。

但是现在如果我恢复到横向，布局的列表部分会显示细节而不是列表，因为我替换了内容。

有没有办法解决这个问题？

目前，我设法通过在横向和纵向两种布局中使用两个片段占位符，包装内容以及隐藏和显示片段来实现这一点，但我不知道这是否是正确的方法？也许 ViewFlipper 会更好？

这里的动画也不能正常工作，因为我在同一个事务中隐藏和显示。

此外，如果我处于横向模式并单击列表项并且数据正在显示，然后我返回纵向，我希望显示数据视图，而不是列表，但仅当数据已经显示时。

Atm 我使用传递给意图数据的标志来管理它，并再次显示/隐藏正确的视图。

有什么替代的想法吗？

非常感谢，已经尝试了几个小时了！

**编辑** 我遇到的主要问题是，我设置的滑入/滑出动画播放不正确，因为我在一个事务中隐藏和显示片段。它只是隐藏一个片段并在另一个片段中滑动，因此第一个片段不会滑出：/

要明白我的意思，这是我在片段测试应用程序中实现它的方式：

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">

    <FrameLayout
        android:id="@+id/details_Fragment_Placeholder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" >
    </FrameLayout>

    <FrameLayout
        android:id="@+id/main_Fragment_Placeholder"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </FrameLayout>

</LinearLayout> 
```

ListFragment onListItemClick：

```
@Override
    public void onListItemClick(ListView l, View v, int position, long id) {
FragmentManager fragmentManager = getFragmentManager();
        Screen2Fragment fragment2 = (Screen2Fragment) fragmentManager
                .findFragmentByTag(Screen2Fragment.TAG);

        if (fragment != null) {

            if ((getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)) {

                        .beginTransaction();

                transaction.setCustomAnimations(R.anim.slide_in_right,
                        R.anim.slide_out_left, android.R.anim.slide_in_left,
                        android.R.anim.slide_out_right);

                Screen1ListFragment fragment1 = (Screen1ListFragment) fragmentManager
                        .findFragmentByTag(Screen1ListFragment.TAG);
                transaction.hide(fragment1);
                transaction.show(fragment2);

                transaction.addToBackStack("ReturnToScreen1");

                transaction.commit();

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T20:21:06.503

当您最初放置列表片段时，您需要将其放入后退堆栈，然后覆盖细节片段中的后退按钮，以便在按下时将列表视图从后退堆栈弹出。

# c++ - 如何根据类的模板参数专门化模板成员函数？

> ID：10261103
> 
> 赞同：4
> 
> 时间：2012-04-21T16:57:00.140
> 
> 标签：c++, templates, template-specialization

我想写这个：

```
template<typename T1, typename T2>
class OK
{
    T1 t1;
    T2 t2;

public:
    template<typename TX> const TX & GetRef() const;
};

template<typename T1,typename T2>
template<>
const T1 & OK<T1,T2>::GetRef<T1>() const { return t1; }

template<typename T1,typename T2>
template<>
const T2 & OK<T1,T2>::GetRef<T2>() const { return t2; } 
```

哪个 VS10 编译失败。

为了检查我对模板专业化的理解，我尝试并编译了这个：

```
typedef int  T1;
typedef char T2;
class OK
{
    T1 t1;
    T2 t2;

public:
    template<typename TX> const TX & GetRef() const;
};

template<>
const T1 & OK::GetRef<T1>() const { return t1; }

template<>
const T2 & OK::GetRef<T2>() const { return t2; } 
```

我错过了什么？我想做的甚至可能吗？

**编辑**：我想为所有字段设置 getter，全部调用`GetRef()`，因此用户可以编写如下内容：

```
OK<float,double> ok;
float a = ok.GetRef<float>();
double b = ok.GetRef<double>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T17:08:44.830

如果不专门化模板，就不能专门化类模板的成员模板。也就是说，您要么提供一个完整的专业化，`T1`然后`T2`将其固定在类模板上，然后`TX`也可以固定，要么您无法修复`TX`.

简单的解决方案不是专门化模板函数，而是提供不同的重载：

```
template<typename T1, typename T2>
class OK
{
    T1 t1;
    T2 t2;
public:
    const T1& GetRef() const { return t1; }
    template<typename TX> const TX & GetRef() const;
}; 
```

# java - 如何在 JPQL 中编写查询？

> ID：10261111
> 
> 赞同：0
> 
> 时间：2012-04-21T16:58:19.060
> 
> 标签：java, database, jpa, jpql

我有一个三类：医生，病人和咨询。医生和患者课程都有一个咨询列表作为字段。

```
@Entity
public class Consultation {
    @Id
    @GeneratedValue
    private int id;
    private Calendar scheduleDate;
    private String information;
    private String symptoms;
    @ManyToOne
    private Doctor doctor;
    @ManyToOne
    private Patient patient;
//...
}

@Entity
public class Patient {
    @Id
    @GeneratedValue
    private int id;
    private String name;
    private String ssn;
    private String address;
    @OneToMany(mappedBy = "patient")
    private List<Consultation> consultations;
//...
}

@Entity
public class Doctor  {
    @Id
    @GeneratedValue
    private int id;
    private String name;
    private String specialization;
    @OneToMany(mappedBy = "doctor")
    private List<Consultation> consultations;
//...
} 
```

我想从单个查询中获取医生的患者；那是所有与医生进行相同咨询的患者。请注意，医生和患者之间没有任何联系。这可能吗？

```
select p from Patient p where p.consultations **someKeyword** (select d.consultations from Doctor d where d.id = :doctorId) 
```

如果我没记错*的话 someKeyword*将是*contains*如果有的话

```
where list<entity> contains entity 
```

如果_ *_*

```
where entity in list<entity> 
```

但在这种情况下会有

```
list someKeyword list 
```

组合将是：

```
select p from Patient p where p.consultations contains (select c from Consultation c where c in (select d.consultations from Doctor d where d.id = :doctorId)) 
```

但这有意义吗？

我是 JPA 和 JPQL 的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:58:31.887

就像是：

```
select p from Patient p
where exists (
    select c from Consultation c
    where c.patient = p
    and c.doctor.id = :doctorId
) 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:23:57.833

本教程可能会有所帮助： [JPA 教程](http://www.java-forums.org/ocpjbcd/53461-tutorial-review-java-persistence-query-language-component-developer-exam.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T19:39:39.237

您可以使用如下所示的 NamedQuery 注释

```
@NamedQuery(
   name = "findPatientForDoctor", 
   query = "SELECT c.patient FROM Consultation c WHERE c.doctor.id : id")) 
```

（只检查这个查询的语法）

这将为一名患者提供医生 ID。

由于您的协会就像患者进行咨询，并且每次咨询都与患者和医生进行一对一的映射。目前，您的实体模型中没有任何关系可以为医生获取所有患者。患者与医生是多对多关系，目前您的实体似乎不支持这一点。我认为如果没有患者与医生的关系，您就无法在一次查询中获得记录。

# actionscript-3 - 我想覆盖从祖先组件继承的样式的默认值 [flex4]

> ID：10261114
> 
> 赞同：0
> 
> 时间：2012-04-21T16:58:45.447
> 
> 标签：actionscript-3, apache-flex, styles, flex4, custom-component

虽然将 [Style ...] 元数据标记添加到我的子类确实使属性*showPromptWhenFocused*可以从 MXML 访问，但 initializeStyles() 函数没有成功地将默认值更改为 true。

如果用户愿意，我希望用户能够将*showPromptWhenFocused*设置为 false，但我希望默认值为 true。

```
package com.santacruzsoftware.crafting.controls
{
import mx.core.FlexGlobals;
import mx.styles.CSSStyleDeclaration;
import mx.styles.StyleManager;

import spark.components.TextInput;

[Style(name="showPromptWhenFocused", inherit="yes", type="Boolean")]

public class WatermarkTextInput extends TextInput
{
    private static function initializeStyles() : void
    {
        var style : CSSStyleDeclaration = FlexGlobals.topLevelApplication.styleManager.getStyleDeclaration("showPromptWhenFocused");
        if (!style)
            style = new CSSStyleDeclaration();

        style.defaultFactory = function() : void
        {
            this.showPromptWhenFocused = true;
        }

        FlexGlobals.topLevelApplication.styleManager.setStyleDeclaration("showPromptWhenFocused", style, false);
    }
    //call the static function immediately after the declaration
    initializeStyles();
}
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:05:21.183

当您`getStyleDeclaration()`在类名中调用 pass 时，您可以获得 WaterMarkTextInput 样式声明：

```
var style : CSSStyleDeclaration = FlexGlobals.topLevelApplication.styleManager.getStyleDeclaration("WatermarkTextInput"); 
```

然后在为班级设置样式时执行相同的操作：

```
FlexGlobals.topLevelApplication.styleManager.setStyleDeclaration("WatermarkTextInput", style, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T22:17:01.617

尝试覆盖[notifyStyleChangeInChildren()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#notifyStyleChangeInChildren())。

```
package com.santacruzsoftware.crafting.controls {

    import mx.core.FlexGlobals;
    import mx.styles.CSSStyleDeclaration;
    import mx.styles.StyleManager;

    import spark.components.TextInput;

    [Style(name="showPromptWhenFocused", inherit="yes", type="Boolean")]
    public class WatermarkTextInput extends TextInput {

        public var inheritStyles:boolean = true;

        private static function initializeStyles():void {
            var style : CSSStyleDeclaration = FlexGlobals.topLevelApplication.styleManager.getStyleDeclaration("showPromptWhenFocused");
            if (!style)
                style = new CSSStyleDeclaration();

            style.defaultFactory = function():void {
                this.showPromptWhenFocused = true;
            }

            FlexGlobals.topLevelApplication.styleManager.setStyleDeclaration("showPromptWhenFocused", style, false);
        }

        //call the static function immediately after the declaration
        initializeStyles();

        public override function notifyStyleChangeInChildren(styleProp:String, recursive:Boolean):void {
            if (!inheritStyles) {
                switch(styleProp) {
                    case 'showPromptWhenFocused':
                        return;
                }
            }
            super.notifyStyleChangeInChildren(styleProp, recursive);
        }

} 
```

# mysql - 使用非活动状态列而不是删除行来提高 mysql 性能会更好吗？

> ID：10261118
> 
> 赞同：4
> 
> 时间：2012-04-21T16:59:27.257
> 
> 标签：mysql, database-performance

最近我看了一个关于 mysql 中的 CRUD 操作的视频，其中一件事引起了我的注意，评论员声称删除行对 mysql 索引性能不利，而不是我们应该使用状态列。

那么，这两者之间真的有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:03:17.000

删除一行确实非常昂贵，比为一列设置新值更昂贵。有些人从不从他们的数据库中删除一行（尽管有时是由于保留历史记录，而不是出于性能考虑）。

我通常会延迟删除：当我的应用程序需要删除一行时，它实际上并没有删除，而是设置了一个状态。然后，在低流量期间，我执行这些删除。

一些数据库引擎需要每隔一段时间对其数据文件进行一次压缩，因为它们无法重用已删除记录的空间。我不确定 InnoDB 是否是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:35:59.030

我猜策略是删除一行会影响所有索引，而修改“状态”列可能不会影响任何索引（因为由于基数低，您可能不会索引该列）。

尽管如此，当删除行时，对索引的影响是最小的。插入会在填满页面时影响索引性能，从而导致重建索引。删除不会发生这种情况。使用删除，索引记录仅被标记为删除。

MySQL 稍后会（当负载较低时）从索引中清除已删除的行。因此，删除已被缓存。为什么要加倍努力？

您的删除确实需要索引，就像您的选择和更新一样，以便快速找到要删除的记录。因此，不要将 MySQL 索引性能归咎于索引缺失或错误导致的缓慢删除。您的 delete 语句的 WHERE 子句应该能够使用索引。对于 InnoDB，这对于确保仅锁定单个索引记录而不是锁定所有记录或范围也很重要。

# java - java中连接每个维度d的N个arraylist时出错

> ID：10261123
> 
> 赞同：0
> 
> 时间：2012-04-21T16:59:55.557
> 
> 标签：java, debugging, arraylist

我想将 N 个 d 维数组列表连接成一个大数组列表。我做了以下工作：

```
 {
     Arraylist<Double> cFeature = new Arraylist<Double>(); 
     for(int i =0 ; i < n; i++){
        ArrayList<Double> arrList = new ArrayList<Double>();
        arrList = FeatureMatrix.get(i);
        cFeature.addAll(arrList);
     }  
    return cFeature;
} 
```

但这并没有返回我连接的特征向量。可能是什么原因？

我有以下类型的矩阵

```
 1 2 3 4
    4 5 6 7
    9 4 5 2 
```

我想返回类似的东西：

```
 12344567, 45679452 etc 
```

EDIT[矩阵一排]，矩阵的维数为50

```
 [-1.4707351089135285, -2.396807707665656, -0.9225858560474335, -0.552093667789784, 0.6492206869123566, 1.1347653279780474, 0.18599226559979623, -0.3040490372134513, -0.8661743997164002, 1.2990217001062885, -1.4689261255216413, -0.6175058675322327, 0.0019875740898560707, 3.187991109660048, 0.9793588130569899, 1.88726260031087, 1.263110196592273, 0.10270882950413489, -0.33850097448844163, 0.26780865103769547, -0.28117099016766645, -0.015511886681809741, -0.7906057240014217, 0.1796874905794462, 0.9327631100459427, 0.5419684468033518, 1.3670537985364393, -1.0381888770019032, 1.0975151287297011, 0.024367745998744996, -0.25780912155025204, -1.862325174655491, -0.611104255824939, -0.5746070435381269, -1.2218773341433158, 0.2220916817954159, 0.4641455500389115, -0.43253367269335635, -0.5380163044326588, 0.685592907063921, -0.6191939669845238, -1.2275198581496152, 0.13270110767423787, -0.1614948461888469, 1.5717904793822337, -0.2826323802880358, -0.4716922630198008, -0.2881374794211655, 0.8609910302314909, 1.1749707572533885] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:16:02.793

您在问题中遗漏了代码的关键部分。查看[聊天](https://chat.stackoverflow.com/transcript/message/3397846)和[pastebin 上的完整代码，在](http://pastebin.com/W1SwiqgN)我看来，问题在于您不了解 Java 中的赋值是如何工作的（也许您有 C++ 背景？）

```
 ArrayList<Double> contextFeature = new ArrayList<Double>();
    contextFeature = wordFeatureMatrix.get(x); // x is a valid integer key, actually FrequentWordIndex.get(Ngram.get(0).toLowerCase()) in the pastebin code 
```

这会破坏您为 contextFeature 创建的原始 ArrayList，并将其替换为 wordFeatureMatrix 中的 ArrayList 之一。

然后稍后您不是迭代`wordFeatureMatrix`而是迭代一个将索引返回到 wordFeatureMatrix 的列表。我有信心在某个时候

```
wordFeatureMatrix.get(FrequentWordIndex.get(Ngram.get(0).toLowerCase())) ==
    wordFeatureMatrix.get(FrequentWordIndex.get(Ngram.get(i).toLowerCase())); 
```

这意味着稍后您实际上是在打电话

```
 contextFeature.addAll(contextFeature); 
```

来自 JavaDoc 的`ArrayList.addAll()`：

> 如果在操作正在进行时修改了指定的集合，则此操作的行为是未定义的。（这意味着如果指定的 Collection 是这个列表，并且这个列表是非空的，那么这个调用的行为是未定义的。）

所以，你有两个问题。`wordFeatureMatrix`首先是在收集列表的过程中不要修改`contextFeature`，解决方法是替换

```
 ArrayList<Double> contextFeature = new ArrayList<Double>();
    contextFeature = wordFeatureMatrix.get(x); 
```

和

```
 ArrayList<Double> contextFeature = new ArrayList<Double>();
    contextFeature.addAll(wordFeatureMatrix.get(x)); 
```

第二个问题（在您的用例中可能不是问题）是确保不会将同一个列表添加两次。这取决于你决定它是否是你想要的。

# objective-c - UIImagePickerController 取消按钮不起作用的问题

> ID：10261124
> 
> 赞同：9
> 
> 时间：2012-04-21T17:00:04.243
> 
> 标签：objective-c, ios, uiimagepickercontroller

我有一个通用应用程序，允许从设备照片库中选择图像以供以后操作，代码在 iPad 上运行良好，但在 iPhone 上没有任何反应，甚至没有取消按钮，选择图像后也没有任何反应我的代码：

```
-(IBAction)grabImage:(id)sender
{
    if ( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad )
{
    imgPicker = [[UIImagePickerController alloc] init];
    [imgPicker setDelegate:self];

    popover = [[UIPopoverController alloc] initWithContentViewController:imgPicker];
    [popover setDelegate:self];

    CGPoint position        = [view1.superview convertPoint:view1.frame.origin toView:nil];
    CGRect popOverFrame     = CGRectMake( position.x, position.y, self.view.frame.size.width, self.view.frame.size.height );

    [popover presentPopoverFromRect:popOverFrame inView:self.view permittedArrowDirections:nil animated:NO];
    [popover setPopoverContentSize:CGSizeMake(320, 480)];
    [imgPicker release];
}
else
{
    imgPicker = [[UIImagePickerController alloc] init];
    imgPicker.delegate = self;
    imgPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:self.imgPicker animated:YES];
    [imgPicker release];
}
}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    pickedImage = [info objectForKey:UIImagePickerControllerOriginalImage];

CGImageRef imgRef = pickedImage.CGImage;

    app->setImage( pickedImage, CGImageGetWidth(imgRef), CGImageGetHeight(imgRef) );

    [[picker parentViewController] dismissModalViewControllerAnimated:YES];

// Enable texture siwth after an image has been loaded
[textureSwitch setEnabled:YES];
[textureSwitch setOn:YES];
app->isTextureDrawingOn     = [textureSwitch isOn];

[fillsSwitch setOn:NO];
app->isFillsDrawingOn       = [fillsSwitch isOn];

    if ( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad )
{
    [popover dismissPopoverAnimated:YES];
}
ofLog(OF_LOG_VERBOSE, "cancel after selection");
}

-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
[[picker parentViewController] dismissModalViewControllerAnimated:YES];

if ( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad )
{
        [popover dismissPopoverAnimated:YES];
    }

ofLog(OF_LOG_VERBOSE, "did cancel");
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-21T17:26:58.997

而不是使用下面的代码。

```
[[picker parentViewController] dismissModalViewControllerAnimated:YES]; 
```

试试这个代码

```
[self dismissModalViewControllerAnimated:YES]; 
```

并检查您是否添加`UIImagePickerControllerDelegate`了接口文件。

**解决方案：（来自我的评论）**

试试这个，`[self.imgPicker dismissModalViewControllerAnimated:YES];` 这会奏效。

**对于 iOS 7：**关闭当前视图控制器

```
[self.imgPicker dismissViewControllerAnimated: YES completion: NULL]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-22T06:43:13.020

添加`UIImagePickerControllerDelegate`你的接口文件

然后在您的`.m`文件中实现此代码

```
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {
    [self dismissModalViewControllerAnimated:YES];
} 
```

我希望它能解决你的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-02T23:09:21.503

检查调用选择器的父控制器的 viewWillAppear 或 viewDidAppear 方法。在 iPhone 上，选择器视图消失后将调用此方法。在 iPad 上 popover 消失后它们将不会被调用。我刚刚在我的代码中发现错误，我将 nil 设置为 ivar 以在 viewWillAppear 中选择图像。我花了两天时间才明​​白发生了什么；）祝你好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-26T12:53:50.760

一个最简单的解决方案：

在你的界面文件中添加 UIImagePickerControllerDelegate

然后在您的 .m 文件中实现此代码

```
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {
    [picker  dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-10T00:58:20.013

**斯威夫特 3.0**

感谢 MBH，这在我的 Xcode 8 和 iOS 10 项目中为我工作：

```
internal func imagePickerControllerDidCancel(_ picker: UIImagePickerController){
    dismiss(animated: true, completion: nil)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-22T21:52:37.787

**在 Swift 中关闭它：**

将这些协议添加到您的 ViewController 后：`UINavigationControllerDelegate, UIImagePickerControllerDelegate`

```
internal func imagePickerControllerDidCancel(picker: UIImagePickerController){
    dismissViewControllerAnimated(true, completion: nil)
} 
```

# javascript - 从上下文菜单打开 JQuery/Bootstrap 对话框

> ID：10261125
> 
> 赞同：0
> 
> 时间：2012-04-21T17:00:04.333
> 
> 标签：javascript, jquery, firefox-addon, twitter-bootstrap, firefox-addon-sdk

我有一个 Google Chrome 扩展程序，它通过上下文菜单项单击打开 Twitter Bootstrap 对话框（使用 JQuery 1.7.x，但不是 JQueryUI），我一直在尝试在 Firefox 版本中做同样的事情（使用附加组件SDK 1.6），无济于事。

`lib/main.js`我可以在我的, using中拦截菜单项单击 OK `context-menu`，但我无法向包含创建对话框 DOM 的函数的内容脚本（请参阅[https://stackoverflow.com/a/8493844/954442](https://stackoverflow.com/a/8493844/954442) ）发送消息并显示它。我也不能从我的附加脚本创建对话框，因为那里没有 DOM（并且尝试通过`@mozilla.org/moz/jssubscript-loader;1`“未定义窗口”将 JQuery 加载到该对话框中失败）

我已经广泛地寻找示例，但没有发现太多帮助。有没有人有一个`context-menu`项目点击打开对话框的例子？

（[使用附加 SDK 开发我的 Firefox 扩展的优点/缺点是什么？](https://stackoverflow.com/questions/5709195/what-are-the-advantages-disadvantages-of-using-the-add-on-sdk-to-develop-my-fire)是我发现的最接近我的问题的东西。我觉得海报最终找到了答案，但没有更新问题说它是什么。）

（NB。我不准备考虑 XUL，也很不愿意回到 JQueryUI）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:12:00.590

好的，所以我相信你想做这样的事情：

[https://builder.addons.mozilla.org/addon/1049738/latest/](https://builder.addons.mozilla.org/addon/1049738/latest/)

基本上，您将`contentScriptFile`属性添加到上下文菜单的`Item`. 内容脚本不与页面共享 js 变量，但可以访问 DOM。因此，您可以添加面板并在单击上下文菜单项时显示它。

`contentScriptFile`请注意，您可以使用数组传递给多个文件，因此您也可以通过这种方式加载 jQuery。

希望能帮助到你。

# node.js - now.js：尝试启动 server.js 时出现“对象没有方法”错误消息

> ID：10261127
> 
> 赞同：2
> 
> 时间：2012-04-21T17:00:17.063
> 
> 标签：node.js, ubuntu-11.04, nowjs-sockets

我成功安装了 node.js 和 now.js。

对于 now.js，我是这样做的：

```
npm install now -g
npm install now (had to add this one. Without it, I get a "Cannot find now..." error message) 
```

当我启动节点服务器并提供这样的 server.js 文件时：

```
var httpServer = require('http');
httpServer.createServer(function (req, res) {
res.writeHead(200, {'Content-Type': 'text/html'});
res.write('Node is ok');
res.end();
}).listen(8080);
console.log('Server runs on http://xxxxx:8080/'); 
```

一切都很好。

现在，我正在尝试向这个文件添加 now.js 的基本用法：

```
var nowjs = require("now");
var everyone = nowjs.initialize(httpServer);

everyone.now.logStuff = function(msg){
    console.log(msg);
} 
```

我在同一个文件夹中创建了一个 index.html 文件（用于测试目的）

```
<script type="text/javascript" src="nowjs/now.js"></script>

<script type="text/javascript">
  now.ready(function(){
    now.logStuff("Now is ok");
  });
</script> 
```

这一次，这是我在启动服务器时在终端上得到的：

```
Server runs on http://xxxxx:8080/

[TypeError: Object #<Object> has no method 'listeners']
TypeError: Object #<Object> has no method 'listeners'
    at Object.wrapServer (/home/xxxx/node_modules/now/lib/fileServer.js:23:29)
    at [object Object].initialize (/home/xxxx/node_modules/now/lib/now.js:181:14)
    at Object.<anonymous> (/home/xxxx/server.js:10:22)
    at Module._compile (module.js:444:26)
    at Object..js (module.js:462:10)
    at Module.load (module.js:351:32)
    at Function._load (module.js:309:12)
    at module.js:482:10
    at EventEmitter._tickCallback (node.js:245:11) 
```

请记住，我是一个绝对的初学者。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:40:57.687

'npm install -g' 在全局级别安装模块，通常旨在为终端使用提供系统范围的二进制文件。想想红宝石。如果你想在你的项目中包含一个模块，你需要删除 -g。

此外，您的 httpServer 变量不是您的服务器，而是 http 模块。createServer() 返回一个服务器对象，您要使用变量捕获该对象，以便在 nowjs.initialize() 方法中使用，如下所示：

```
var http  = require('http')
    , now = require('now')

// Returns an Http Server which can now be referenced as 'app' from now on
var app = http.createServer(
    //... blah blah blah
)

// listen() doesn't return a server object so don't pass this method call
//     as the parameter to the initialize method below
app.listen(8080, function () {
    console.log('Server listening on port %d', app.address().port)
})

// Initialize NowJS with the Http Server object as intended
var everyone = nowjs.initialize(app) 
```

# image - 自动将图像添加到媒体库

> ID：10261128
> 
> 赞同：0
> 
> 时间：2012-04-21T17:00:17.890
> 
> 标签：image, wordpress, function

我正在创建一个 wordpress 主题，我有 5 张图片要与它一起分发。是否有可能当用户加载我的主题时，我的 5 张图片会自动放入媒体库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:29:24.860

将图像放在您的主题文件夹中。然后像这样检索它们：

```
<img src="<?php bloginfo('stylesheet_directory'); ?>/images/img1.jpg" />
<img src="<?php bloginfo('stylesheet_directory'); ?>/images/img2.jpg" />
<img src="<?php bloginfo('stylesheet_directory'); ?>/images/img3.jpg" />
<img src="<?php bloginfo('stylesheet_directory'); ?>/images/img4.jpg" />
<img src="<?php bloginfo('stylesheet_directory'); ?>/images/img5.jpg" /> 
```

# java - 如何锁定由threadA写入并由threadB读取的两个变量（Android）

> ID：10261131
> 
> 赞同：1
> 
> 时间：2012-04-21T17:00:28.467
> 
> 标签：java, android, multithreading, locking

我正在开发一个使用两个线程的 Android 应用程序，第一个（写入器）线程正在更新两个变量，第二个（读取器）线程在计算中使用这两个变量。
如何确保第二个线程接收正确的值？
这是我的第一个 java 锁定问题。我一直在阅读有关同步、易失性、trylock 的信息，但仍不清楚。对于一个变量，这很“容易”，但不明白如何对两个变量执行此操作。

详细信息：
变量位于共享公共类 AppState 扩展应用程序中：

```
public long appstate.writerVar1;
public int appstate.writerVar2; 
```

在主活动中创建线程并将 appstate 传递给线程：

```
writerThread.appstate = appstate;
...
readerThread.appstate = appstate; 
```

然后，writerThread 和 readerThread 都可以访问变量，如下所示：

writerThread，例如：

```
appstate.writerVar1 = 1234;
appstate.writerVar2 = 5678; 
```

阅读器线程，例如：

```
if( (appstate.writerVar1 == 9) && (appstate.writerVar2 == 6) ){ 
```

它应该像这样工作：

writerThread：
-锁定两个变量
-使用新值更新两者
-解锁

readerThread：
-锁定两个变量
-读取值
-解锁

有人可以告诉我执行此操作的 java 代码吗？谢谢！

--- 2012 年 4 月 23 日添加 ---

谢谢。抱歉延迟回答，但请阅读有关此内容的更多信息，包括关于可变对象的信息，[http://www.javaranch.com/journal/2003/04/immutable.htm](http://www.javaranch.com/journal/2003/04/immutable.htm)。
我试图了解如何从主活动中创建的 writerThread 和 readerThread 调用它，并想出了以下代码： writerThread

:

private WriterState wSW;
...
var1W = 123;
var2W = 456;
wSW = new WriterState(var1W, var2W);
appstate.setWriterState(wsW);

readerThread：

私有 WriterState wsR；
...
wsR = appstate.getWriterState();
var1R = wsR.getVar1();
var2R = wsR.getVar2();

我尝试了这段代码，它似乎运行正常。我可以在读取 var1R 和 var2R 之间添加一个新的 var1W 和 var2W。

现在我的下一个问题：
a）这段代码可以吗？
b) 假设 setWriterState 代码在一个循环中，这不会吃掉所有的内存吗？
c) WriterState 类怎么可能是可变的，我相信这里不可能是这种情况（你说：如果 WriterState 类是可变的）

我也看到了一个例子here[http://tutorials.jenkov.com/java-concurrency/synchronized.html](http://tutorials.jenkov.com/java-concurrency/synchronized.html)。他们将 Counter 对象传递给两个线程。在这种情况下，这样的事情是不可能的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:24:01.867

两者`synchronized`和编程使用`java.util.concurrent.Lock`都可以，但我更喜欢第二种。假设读者线程只需要对值进行简单检查，这里有一个解决方案：

编辑：这样阅读器线程**就不会**读取变量。相反，读者感兴趣的检查是在`AppState`课堂内完成的。显然，这仅在您只需要检查两个变量的单一事物时才有效，并且是事先知道的。

```
public class AppState
{
    private long writerVar1;
    private int writerVar2;

    private ReentrantLock lock = new ReentrantLock();

    public void setValues(long longValue, int intValue)
    {
        lock.lock();
        try
        {
            writerVar1 = longValue;
            writerVar2 = intValue;
        }
        finally
        {
            lock.unlock();
        }
    }

    public boolean isValuesCorrect()
    {
        lock.lock();
        try
        {
            return (writerVar1 == 9) && (writerVar2 == 6);
        }
        finally
        {
            lock.unlock();
        }
    }
//rest of the class body goes here
} 
```

请注意，这两个值**必须**是`private`，并且只能由使用相同锁的方法访问，否则您实际上没有线程安全访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T17:31:10.723

OO设计的关键是封装。而在处理多个线程时，它变得更加重要。如果这两个变量构成必须一致更新和读取的共享状态，那么

*   这个共享状态不应该是公开的，因为它迫使这个状态的每个客户端都尊重与其他客户端的协作协议
*   这个共享状态应该封装在一个对象中，该对象控制对状态的访问

因此，AppState 对象的字段应该是私有的。这条规则在 99% 的情况下都是正确的。公共领域是一个很大的禁忌。

然后对字段的所有访问都应该同步（读取和写入）。由于这两个字段构成了一条连贯的信息，因此您应该将它们放入一个类（我们称之为 WriterState）。如果这个类是可变的，每次调用 getState() 和 setState() 时都必须通过共享状态复制一份，所以使用不可变类更容易，更快捷，可以被多个共享没有同步的线程。

```
/**
 * Immutable class: final, contains only final fields wich are themselves immutable.
 */
public final class WriterState {
    private final long var1;
    private final int var2;

    public WriterState(long var1, int var2) {
        this.var1 = var1;
        this.var2 = var2;
    }

    public long getVar1() {
        return this.var1;
    }

    public int getVar2() {
        return this.var2;
    }
}

public class AppState {
    private WriterState writerState;

    public synchronized void setWriterState(WriterState ws) {
        this.writerState = ws;
    }

    public synchronized WriterState getWriterState() {
        return this.writerState;
    }
} 
```

如果 WriterState 类是可变的，那么您应该执行以下操作以使其成为线程安全的：

```
public class AppState {
    private WriterState writerState;

    public synchronized void setWriterState(WriterState ws) {
        this.writerStatenew WriterState(ws.getVar1(), ws.getVar2());
    }

    public synchronized WriterState getWriterState() {
        return new WriterState(this.writerState.getVar1(), this.writerState.getVar2());
    }
} 
```

# gnu-screen - GNU屏幕：按下命令字符时如何突出显示状态栏

> ID：10261132
> 
> 赞同：0
> 
> 时间：2012-04-21T17:00:33.370
> 
> 标签：gnu-screen

我刚刚开始使用 GNU 屏幕的 hardstatus 功能来获取终端底部的状态栏。这在运行嵌套屏幕进程时特别有用，因为我得到嵌套的状态栏，这清楚地表明我必须按命令键多少次才能访问特定的屏幕实例。

例如

```
tom@stilton:~% ls
a/ b/ c/ d
.
.
.
[stilton] [1* zsh  2$ mutt]
[cheddar] [1$ emacs 2* ssh] 
```

* 表示选择了哪个窗口。这清楚地表明我在 cheddar 上使用两个窗口运行屏幕：emacs 和 ssh。在后者中，我在 stilton 上运行另一个屏幕会话，有两个窗口：zsh 和 mutt。要切换到 stilton 上的 mutt，我需要执行“Ca a 2”。

这非常有用，但可能*更有*用。

**我的问题：**按下命令键时，我可以在状态栏中指出这一点，例如通过突出显示它吗？

这意味着当按下“Ca”时，[cheddar] 状态栏将被突出显示，我会知道命令将被发送到该屏幕实例。如果我要进一步按“a”将文字“Ca”发送到*嵌套*屏幕进程，[cheddar] 状态栏将失去其突出显示，而 [stilton] 状态栏将突出显示。

这将大大减少使用屏幕的认知负担！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T20:38:46.583

在 git 版本中，该功能是最近提交的。

[http://git.savannah.gnu.org/cgit/screen.git/commit/?id=db59704c1297c056cec0cc9305ae92e44a15bf33](http://git.savannah.gnu.org/cgit/screen.git/commit/?id=db59704c1297c056cec0cc9305ae92e44a15bf33)

这个新的字符串转义字符`%E`可以以与`%F` 标题和硬状态相同的方式使用。

在以下示例中，当您按 Ca 时，主机名的前景色`%H`变为黄色

```
hardstatus alwayslastline '%m/%d %02c:%s %?%E%{= .Y}%:%{= .g}%?%H%{-} %L=%-w%45L>%{= g.}%n %t%{-}%+w %-17<%=%{= .y}(%l)' 
```

# javascript - 价值在形式中消失

> ID：10261133
> 
> 赞同：0
> 
> 时间：2012-04-21T17:00:38.440
> 
> 标签：javascript, html

好吧，下面的代码片段包含我正在填写的文本字段，它们的值稍后将在 JavaScript 函数中使用。这些包含在表单中。

问题是当我提交表单时，我得到了正确的值，然后填写的字段内容在大约 2 秒后消失了。如果我不填写速率变化或容量变化字段，也会发生同样的事情，它会发出警报，然后值消失。知道这里发生了什么吗？我什至没有在任何地方使用“刷新”。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:03:55.143

您已将提交按钮绑定为单击侦听器。因此，当您单击按钮时，函数运行，但表单也被提交。

你应该做的是将该函数绑定到表单提交，像这样；

```
<form ... onsubmit="calculateRevenue(this)"> 
```

在该函数中，您应该返回 false 以防止表单被提交。

```
if (form.ratechange.value == '')
{
     alert('Please enter a value for the Change in Rate field. ');
     return false;
} 
```

# haskell - HXT：第一次改造成功后如何停止处理？

> ID：10261136
> 
> 赞同：2
> 
> 时间：2012-04-21T17:01:02.797
> 
> 标签：haskell, hxt

我正在尝试使用[Control.Arrow.ArrowTree](http://hackage.haskell.org/packages/archive/hxt/9.2.2/doc/html/Control-Arrow-ArrowTree.html#t%3aArrowTree)构建一个 HTML 处理箭头，该箭头在给定树中的第一次成功转换（深度优先）后停止。即具有类型的函数

```
processFirst :: (ArrowTree a, Tree t) => a (t b) (t b) -> a (t b) (t b) 
```

例如，要将类“first”添加到 HTML 文档中的第一个列表项，可以构建箭头

```
processFirst (hasName "li" `guards` addAttr "class" "first") 
```

我对 HXT 相当陌生，我已经阅读 API 文档几个小时并试图弄清楚如何实现`processFirst`，但我无法将所有部分组合在一起。`processTopDownUntil`起初听起来很有希望，但该函数仅停止对特定子树的处理，因此它仍将转换除嵌套元素之外的所有元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:44:12.070

我不确定我是否完全理解了这个问题，但我会尝试回答:)

让我们尝试下一个：

```
test = flip runLA undefined $ xshow $
  constA "<xml><x>X1</x><x>X2</x></xml>" >>> xread
  >>> processFirst (hasName "x" `guards` addAttr "class" "first")

processFirst f = f `orElse` processChildren (processFirst f) 
```

的定义与 的`processFirst`定义相同`processTopDownUntil`。此函数将输出如下内容：

```
["<xml><x class=\"first\">X1</x><x class=\"first\">X2</x></xml>"] 
```

问题应该很清楚——如果`f`顶部节点失败，那么`processFirst`将为每个孩子调用。`f`如果对某个孩子成功，我们需要一种方法来中止对其他孩子的处理。

可能的解决方案是使用状态箭头：

```
processFirst f = fromSLA False process
  where
  process = (getState >>> isA not)
            `guards`
            (f >>> changeState (const $ const True))
            `orElse`
            processChildren process 
```

这个想法是在成功时设置状态`f`并在处理之前检查它。

注意：现在`f`应该是`SLA`箭头。如果这不是您想要的，您可以尝试收集所有孩子（使用 eg `listA`）并纯粹处理它们。

因此，该解决方案并不理想，但我希望它可以帮助您作为起点。

# java - Java : String.matches()

> ID：10261137
> 
> 赞同：3
> 
> 时间：2012-04-21T17:01:03.320
> 
> 标签：java, regex, string

我想确定一个字符串是否只包含两个单词，它们之间有一个空格字符。第一个单词应仅包含字母数字字符。第二个应该只包括数字。一个例子是：`asd 15`

我想用`String.matches`. 我该怎么做或应该使用哪个正则表达式？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T17:03:19.980

你寻找类似的东西：

```
String regex = "^[A-Za-z]+ [0-9]+$"; 
```

解释：

```
^         the beginning of the string (nothing before the next token)
[A-Za-z]+ at least one, but maybe more alphabetic chars (case insensitive)
          a single space (hard to see :) )
[0-9]+    at least one, but maybe more digits
$         end of the string (nothing after the digits) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T17:06:12.070

你可以试试这个正则表达式

```
"[A-Za-z0-9]+\\s[0-9]+" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T18:04:44.600

试试这个：`String pattern = new String("^[0-9]*[A-Za-z]+ [0-9]+$")`

# python - 从python中的字符串确定“值的类型”

> ID：10261141
> 
> 赞同：6
> 
> 时间：2012-04-21T17:01:27.547
> 
> 标签：python, regex, types

我正在尝试在python中编写一个函数，它将确定字符串中的值类型；例如

如果字符串中为 1 或 0 或 True 或 False，则值为 BIT

如果字符串中为 0-9*，则值为 INT

如果字符串中为 0-9+.0-9+，则值为浮点数

如果字符串中的更多（文本等）值是文本

到目前为止，我喜欢

```
def dataType(string):

 odp=''
 patternBIT=re.compile('[01]')
 patternINT=re.compile('[0-9]+')
 patternFLOAT=re.compile('[0-9]+\.[0-9]+')
 patternTEXT=re.compile('[a-zA-Z0-9]+')
 if patternTEXT.match(string):
     odp= "text"
 if patternFLOAT.match(string):
     odp= "FLOAT"
 if patternINT.match(string):
     odp= "INT"
 if patternBIT.match(string):
     odp= "BIT"

 return odp 
```

但我不太擅长在 python 中使用正则表达式。你能告诉我，我做错了什么吗？例如，它不适用于 2010-00-10，它应该是 Text，但应该是 INT 或 20.90，它应该是 float 但应该是 int

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-21T17:15:12.610

在你走得太远的正则表达式路线之前，你有没有考虑过使用[ast.literal_eval](http://docs.python.org/library/ast.html#ast.literal_eval)

例子：

```
In [35]: ast.literal_eval('1')
Out[35]: 1

In [36]: type(ast.literal_eval('1'))
Out[36]: int

In [38]: type(ast.literal_eval('1.0'))
Out[38]: float

In [40]: type(ast.literal_eval('[1,2,3]'))
Out[40]: list 
```

不妨用 Python 为你解析！

好的，这是一个更大的例子：

```
import ast, re
def dataType(str):
    str=str.strip()
    if len(str) == 0: return 'BLANK'
    try:
        t=ast.literal_eval(str)

    except ValueError:
        return 'TEXT'
    except SyntaxError:
        return 'TEXT'

    else:
        if type(t) in [int, long, float, bool]:
            if t in set((True,False)):
                return 'BIT'
            if type(t) is int or type(t) is long:
                return 'INT'
            if type(t) is float:
                return 'FLOAT'
        else:
            return 'TEXT' 

testSet=['   1  ', ' 0 ', 'True', 'False',   #should all be BIT
         '12', '34l', '-3','03',              #should all be INT
         '1.2', '-20.4', '1e66', '35.','-   .2','-.2e6',      #should all be FLOAT
         '10-1', 'def', '10,2', '[1,2]','35.9.6','35..','.']

for t in testSet:
    print "{:10}:{}".format(t,dataType(t)) 
```

输出：

```
 1      :BIT
 0        :BIT
True      :BIT
False     :BIT
12        :INT
34l       :INT
-3        :INT
03        :INT
1.2       :FLOAT
-20.4     :FLOAT
1e66      :FLOAT
35\.       :FLOAT
-   .2    :FLOAT
-.2e6     :FLOAT
10-1      :TEXT
def       :TEXT
10,2      :TEXT
[1,2]     :TEXT
35.9.6    :TEXT
35..      :TEXT
.         :TEXT 
```

如果你肯定必须有一个正则表达式解决方案，它会产生相同的结果，这里是：

```
def regDataType(str):
    str=str.strip()
    if len(str) == 0: return 'BLANK'

    if re.match(r'True$|^False$|^0$|^1$', str):
        return 'BIT'
    if re.match(r'([-+]\s*)?\d+[lL]?$', str): 
        return 'INT'
    if re.match(r'([-+]\s*)?[1-9][0-9]*\.?[0-9]*([Ee][+-]?[0-9]+)?$', str): 
        return 'FLOAT'
    if re.match(r'([-+]\s*)?[0-9]*\.?[0-9][0-9]*([Ee][+-]?[0-9]+)?$', str): 
        return 'FLOAT'

    return 'TEXT' 
```

但是，我不能推荐正则表达式而不是 ast 版本；只需让 Python 解释它认为这些数据类型是什么，而不是用正则表达式来解释它们......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T17:17:04.590

你也可以使用 json。

```
import json
converted_val = json.loads('32.45')
type(converted_val) 
```

输出

```
type <'float'> 
```

**编辑**

但是，要回答您的问题：

`re.match()`返回部分匹配，从字符串的开头开始。由于您不断评估每个模式匹配，因此“2010-00-10”的序列如下所示：

```
if patternTEXT.match(str_obj): #don't use 'string' as a variable name. 
```

它匹配，因此`odp`设置为“文本”

然后，您的脚本会：

```
if patternFLOAT.match(str_obj): 
```

不匹配，`odp`仍然等于“文本”

```
if patternINT.match(str_obj): 
```

部分匹配`odp`设置为“INT”

因为 match 返回部分匹配，`if`所以会评估多个语句，最后一个评估的语句确定在 中返回哪个字符串`odp`。

您可以做以下几件事之一：

1.  重新排列 if 语句的顺序，以便最后一个匹配的是正确的。

2.  对其余语句使用`if`and ，以便仅评估要匹配的第一个语句。`elif``if`

3.  检查以确保匹配对象匹配整个字符串：

    ```
    ...
    match = patternINT.match(str_obj)
    if match:
        if match.end() == match.endpos:
            #do stuff
    ... 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T17:48:03.887

您说您将这些用于输入：

*   2010-00-10（是 int，不是文本）
*   20.90（是整数，不是浮点数）

您的原始代码：

```
def dataType(string):

 odp=''
 patternBIT=re.compile('[01]')
 patternINT=re.compile('[0-9]+')
 patternFLOAT=re.compile('[0-9]+\.[0-9]+')
 patternTEXT=re.compile('[a-zA-Z0-9]+')
 if patternTEXT.match(string):
     odp= "text"
 if patternFLOAT.match(string):
     odp= "FLOAT"
 if patternINT.match(string):
     odp= "INT"
 if patternBIT.match(string):
     odp= "BIT"

 return odp 
```

## 问题

您的`if`语句将按顺序执行 - 即：

```
if patternTEXT.match(string):
    odp= "text"
if patternFLOAT.match(string):
    odp= "FLOAT"
if patternINT.match(string)
    odp= "INT"
if patternBIT.match(string):
    odp= "BIT" 
```

“2010-00-10” 匹配您的文本模式，但随后它将尝试匹配您的浮点模式（失败，因为没有`.`），然后匹配`int`模式，因为它确实包含`[0-9]+`.

你应该使用：

```
if patternTEXT.match(string):
    odp = "text"
elif patternFLOAT.match(string):
    ... 
```

尽管对于您的情况，您可能希望更具体到不太具体，因为如您所见，文本内容也可能是 int （反之亦然）。您还需要改进正则表达式，因为您的“文本”模式仅匹配字母数字输入，但不匹配特殊符号。

我会提供我自己的建议，尽管我更喜欢 AST 解决方案：

```
def get_type(string):

    if len(string) == 1 and string in ['0', '1']:
        return "BIT"

    # int has to come before float, because integers can be
    # floats.
    try:
        long(string)
        return "INT"
    except ValueError, ve:
        pass

    try:
        float(string)
        return "FLOAT"
    except ValueError, ve:
        pass

    return "TEXT" 
```

运行示例：

```
In [27]: get_type("034")
Out[27]: 'INT'

In [28]: get_type("3-4")
Out[28]: 'TEXT'

In [29]: get_type("20.90")
Out[29]: 'FLOAT'

In [30]: get_type("u09pweur909ru20")
Out[30]: 'TEXT' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T18:13:04.813

作为回复

> 例如，它不适用于 2010-00-10，它应该是 Text，但应该是 INT 或 20.90，它应该是 float 但应该是 int

```
>>> import re
>>> patternINT=re.compile('[0-9]+')
>>> print patternINT.match('2010-00-10')
<_sre.SRE_Match object at 0x7fa17bc69850>
>>> patternINT=re.compile('[0-9]+$')
>>> print patternINT.match('2010-00-10')
None
>>> print patternINT.match('2010')
<_sre.SRE_Match object at 0x7fa17bc69850> 
```

不要忘记`$`限制字符串的结尾。

# html - 由于 IE9 字体太大而导致页面布局被破坏

> ID：10261142
> 
> 赞同：1
> 
> 时间：2012-04-21T17:01:29.170
> 
> 标签：html, css, internet-explorer-9

页面布局在所有浏览器中都很好，但 IE9 除外。

我们在页面上使用块式布局，宽度为 660px，居中。

为了与 660 像素的最大宽度保持一致，我将 h2 的宽度设置为 660 像素，这在所有浏览器中都很好，除了（惊喜）在 IE9 上，h2 字体非常大，并且在 660 像素布局的右侧大量运行。

我可以更改 h2 中的措辞来缓解这种情况（缩短文本）吗？

没有。页面上的措辞不是我的权限——别人的工作（'UE'gal）。

这是我的 CSS：

```
 h2 {
        width: 660px;
    } 
```

660px 的宽度用于页面上的其他 div，并在页面上提供视觉上吸引人的“块布局”。

但是在登录页面上，其中一个 h2 标记内的文本——在 IE9 上的 h2 文本要大得多，因此 660px 的宽度超过了 IE9 的 h2 大字体大小。

这是一个违规行的示例：

```
 <h2 class="grayDecorative">Make your Relics visible on our site now! -- OurSite!</h2> 
```

这是“灰色装饰”风格：

```
 .grayDecorative
   {
      font-family: Arial, sans-serif;
      background-image: url('images/chromishbg.gif');
      background-repeat: repeat-x;    
   } 
```

这种样式在 h2 中填充了文本后面具有视觉吸引力的渐变背景。

我正在考虑通过使用'conditional-for-IE9'来解决这个问题，比如说——一个h3标签而不是h2标签——但**仅限**于IE9。

如何使 html 有条件地为 IE 使用 h3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:01:08.840

我想发布我发现的导致解决方案的发现。

我和其他人认为使用以下样式应该使IE 和 FF 等上的**h2标签文本的字体大小相同：**

```
 h2
     {
         width: 660px;
         font-size: 20px;
     } 
```

为**h2**标签设置相同的**字体大小**应该可以解决问题。但事实并非如此。对于相同的**font-size: 20px**以上的**h2**标签，IE 文本字体要大得多。

 ******好吧，当我注意到时，我很幸运——同一页面上的其他文本元素在 FF 和 IE9 上的大小完全相同。 *但这些标签不是 h2——*它们主要是**锚点**和几个**标签**标签。

以下文本样式在 IE9 和 Firefox 上生成的文本*大小完全相同*——但请注意，下面的标签不是*h2*标签，这是我遇到的文本大小问题：

```
 .pageTopRowTextStyle
 {
      color:RGB(255,255,255); 
      text-decoration:none;
      font-family: Arial, sans-serif;
      font-size: 15px;    
 }

 <a class="pageTopRowTextStyle" href="oursite.com">
              This text size was the same in IE9 and FF</a> 
```

这是我发现的。请注意，这是我们在 IE9 中发现的。**如果涉及h2**标签，
您将无法可靠地协调跨浏览器文本大小的差异。我没有检查其他标题标签（h1、h3、h4 等）。

 **我假设同样的问题。

使用**字体大小时：20px；****在h2**上设置样式确实会有所不同——比如说，如果你增加到 25px 或下降到 15px——你可以看到 IE9 和 FF 上的字体大小都在变化——

-- **h2**标签在 FF 和 IE9中对**字体大小 ??px**的响应方式不同。

使用**h2**标签 - IE9 上的 font-size:16px 与 Firefox 上的 h2 相同*的*font - **size** *:16px更大。*但是，其他标签并非如此——**标签**和**锚**标签在两个浏览器上呈现相同的大小。

 ******所以我们只是把**h2**标签去掉了，现在我们使用**label**标签代替**h2**标签，现在 FF 和 IE9 上的字体大小是**相同**的：

```
 .h2XtraStyle
   {
      /*width: 660px;  LABEL doesn't recognize 'width' so we used &nbsp; padding */
      font-size: 20px;
   } 
```

这是一个跨浏览器的**h2**标签——在 IE9 和 FF 上看起来一样

```
 <br />
    <label class="h2XtraStyle">Make your Relics visible on our site now! -- OurSite! 
         &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </i></label>
    <br /> 
```

我真的不知道为什么在 IE9 中**h2**标签的字体大小处理方式不同，但解决方法是根本不使用它。我们的解决方案不是很优雅，但它完成了工作。**************

# android - 将 .java 转换回 classes.dex

> ID：10261147
> 
> 赞同：1
> 
> 时间：2012-04-21T17:02:25.677
> 
> 标签：android, reverse-engineering, dx

我一直在玩逆向工程，并且在进行编辑后重新编译时遇到了麻烦。

我第一次使用 apktool：

```
apktool d input.apk out
apktool b out 
```

然后我使用 dex2jar 将 classes.dex 转换为 jar，然后使用 JD-GUI 提取 java 文件。我进入并更改了一个字符串值，以便仍然保留所有内容，但可以查看它是否有效，因此代码应该都可以工作。所以我有一个名为“类”的 .java 文件的文件夹，我尝试使用 DX 转换回 dex 文件。我输入：

```
dx --dex classes --no-strict 
```

并得到这些错误： ![在此处输入图像描述](../Images/6311b3c1e6de06d1c478d5fd9d6079ff.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T17:54:00.910

您的排序有点偏离，您需要将目录指定为工具识别它们的绝对路径。尝试

```
dx --dex --output C:/Users/SkyNet/Desktop/new_dex_file.dex C:/Users/SkyNet/Desktop/classes 
```

这应该在您的桌面上从 classes 文件夹中创建一个 new_dex_file.dex 文件，而不是在您的桌面上。

# php - 基于 PHP 上 {userId} 的 Google Plus Circle Counter

> ID：10261148
> 
> 赞同：0
> 
> 时间：2012-04-21T17:02:40.560
> 
> 标签：php, google-plus

任何人都可以建议我如何根据 UserId 找到 Google Plus 圈子计数。让我举一些简单的例子。

我想创建一个基于 php 的系统，用户可以在其中放置他们的 googleplus 用户 ID。然后显示没有人他/她的圈子。

像一个例子。

用户 ID - **106189723444098348646**

输出 - **2395969**让他转圈

如果有的话，也可以使用[http://www.circlecount.com](http://www.circlecount.com) API。或者使用这个

[http://www.circlecount.com/button_followercount.js.php?id=106189723444098348646&lang=en](http://www.circlecount.com/button_followercount.js.php?id=106189723444098348646&lang=en)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:21:13.157

这对于官方 API 是不可能的。[您可以在参考文档](https://developers.google.com/+/api/)中查看可用方法的列表。

# google-maps-api-3 - 方向路线 - 只有主要街道

> ID：10261149
> 
> 赞同：1
> 
> 时间：2012-04-21T17:02:43.613
> 
> 标签：google-maps-api-3

这是我的示例 http://gidzior.net/map/v3_animate_marker_directions.html （我在输入中使用占位符），谢谢 GM 代码到 geocodezip.com 这里

在我的示例中，我使用的是 Google Maps API 3，是否可以仅在方向路线中设置主要街道？

```
 var map;
  var directionDisplay;
  var directionsService;
  var stepDisplay;
  var markerArray = [];
  var position;
  var marker = null;
  var polyline = null;
  var poly2 = null;
  var speed = 0.000005, wait = 1;
  var infowindow = null;
  var zoomed;

    var myPano;   
    var panoClient;
    var nextPanoId;
  var timerHandle = null;

function createMarker(latlng, label, html) {
// alert("createMarker("+latlng+","+label+","+html+","+color+")");
    var contentString = '<b>'+label+'</b><br>'+html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        title: label,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });
        //marker.myname = label;
        // gmarkers.push(marker);

    /*google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
        });*/
    return marker;
}

function initialize() {
  infowindow = new google.maps.InfoWindow(
    { 
      size: new google.maps.Size(150,50)
    });
    // Instantiate a directions service.
    directionsService = new google.maps.DirectionsService();

    // Create a map and center it on Warszawa.
    var myOptions = {
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    address = 'warszawa'
    geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': address}, function(results, status) {
       map.setCenter(results[0].geometry.location);
    });

    // Create a renderer for directions and bind it to the map.
    var rendererOptions = {
      map: map
    }
    directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);

    // Instantiate an info window to hold step text.
    stepDisplay = new google.maps.InfoWindow();

    polyline = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    poly2 = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
  }

    var steps = []

    function calcRoute(){

if (timerHandle) { clearTimeout(timerHandle); }
if (marker) { marker.setMap(null);}
polyline.setMap(null);
poly2.setMap(null);
directionsDisplay.setMap(null);
    polyline = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    poly2 = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    // Create a renderer for directions and bind it to the map.
    var rendererOptions = {
      map: map
    }
directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);

        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var travelMode = google.maps.DirectionsTravelMode.DRIVING

        var request = {
            origin: start,
            destination: end,
            travelMode: travelMode
        };

        // Route the directions and pass the response to a
        // function to create markers for each step.
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK){
    directionsDisplay.setDirections(response);

        var bounds = new google.maps.LatLngBounds();
        var route = response.routes[0];
        startLocation = new Object();
        endLocation = new Object();

        // For each route, display summary information.
    var path = response.routes[0].overview_path;
    var legs = response.routes[0].legs;
        for (i=0;i<legs.length;i++) {
          if (i == 0) { 
            startLocation.latlng = legs[i].start_location;
            startLocation.address = legs[i].start_address;
            // marker = google.maps.Marker({map:map,position: startLocation.latlng});
            marker = createMarker(legs[i].start_location,"start",legs[i].start_address,"green");
          }
          endLocation.latlng = legs[i].end_location;
          endLocation.address = legs[i].end_address;
          var steps = legs[i].steps;
          for (j=0;j<steps.length;j++) {
            var nextSegment = steps[j].path;
            for (k=0;k<nextSegment.length;k++) {
              polyline.getPath().push(nextSegment[k]);
              bounds.extend(nextSegment[k]);

            }
          }
        }

        polyline.setMap(map);
        map.fitBounds(bounds);
//        createMarker(endLocation.latlng,"end",endLocation.address,"red");
    map.setZoom(18);
    startAnimation();
    zoomed=false;
    }                                                    
 });
}

      var step = 50; // 5; // metres
      var tick = 100; // milliseconds
      var eol;
      var k=0;
      var stepnum=0;
      var speed = "";
      var lastVertex = 1;

//=============== animation functions ======================
      function updatePoly(d) {
        // Spawn a new polyline every 20 vertices, because updating a 100-vertex poly is too slow
        if (poly2.getPath().getLength() > 20) {
          poly2=new google.maps.Polyline([polyline.getPath().getAt(lastVertex-1)]);
          // map.addOverlay(poly2)
        }

        if (polyline.GetIndexAtDistance(d) < lastVertex+2) {
           if (poly2.getPath().getLength()>1) {
             poly2.getPath().removeAt(poly2.getPath().getLength()-1)
           }
           poly2.getPath().insertAt(poly2.getPath().getLength(),polyline.GetPointAtDistance(d));
        } else {
          poly2.getPath().insertAt(poly2.getPath().getLength(),endLocation.latlng);
        }
      }

      function animate(d) {
// alert("animate("+d+")");
        if (d>eol) {
          map.panTo(endLocation.latlng);
          marker.setPosition(endLocation.latlng);
          return;
        }
        if (d>eol-1000 && zoomed!=true) {
          map.setZoom(15); // or whatever value
          zoomed=true;
        }
        var p = polyline.GetPointAtDistance(d);
        map.panTo(p);
        marker.setPosition(p);
        updatePoly(d);
        timerHandle = setTimeout("animate("+(d+step)+")", tick);
      }

function startAnimation() {
        eol=polyline.Distance();
        map.setCenter(polyline.getPath().getAt(0));
        // map.addOverlay(new google.maps.Marker(polyline.getAt(0),G_START_ICON));
        // map.addOverlay(new GMarker(polyline.getVertex(polyline.getVertexCount()-1),G_END_ICON));
        // marker = new google.maps.Marker({location:polyline.getPath().getAt(0)} /* ,{icon:car} */);
        // map.addOverlay(marker);
        poly2 = new google.maps.Polyline({path: [polyline.getPath().getAt(0)], strokeColor:"#0000FF", strokeWeight:10});
        // map.addOverlay(poly2);
        setTimeout("animate(50)",2000);  // Allow time for the initial map display
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:36:20.680

不，您有选项`avoidHighways`和`avoidTolls`，但没有类似的`avoidByways`。这是因为该服务需要尽可能接近`origin`并且`destination`可能只能使用小路到达那里。`avoidHighways`是可能的，因为很可能有*一些*从 A 到 B 的路线而不使用高速公路。[一个例外是高速公路连接两个岛屿并且没有次要道路：我不知道是否`avoidHighways`只是*避开*它们，如果没有其他选择，API实际上会使用高速公路。]

API 将支持快速路线，因此默认情况下首选主要街道。如果您能够指示 API*仅*使用主要街道，那么它完全有可能无法找到 A 和 B 之间的方向。

# javascript - JQuery/Javascript 和 && 运算符的使用

> ID：10261150
> 
> 赞同：9
> 
> 时间：2012-04-21T17:03:14.677
> 
> 标签：javascript, jquery, operators

我试图让一个简单的条件语句起作用，但遇到了问题。失败的代码：

```
 $(document).ready(function(){
    var wwidth = $(window).width();

    if (wwidth < 321) {
        alert("I am 320 pixels wide, or less");
        window.scrollTo(0,0);
    } else if (wwidth > 321) && (wwidth < 481) {
        alert("I am between 320 and 480 pixels wide")
    }
}); 
```

如果我删除 else if 部分代码，我会收到警报。如果我尝试使用 && 或 || 运营商它会失败。我用谷歌搜索，我找不到它不起作用的原因。我也试过：

```
((wwidth > 321 && wwidth < 481)) 
```

以及其他方式，以防万一它是一些奇怪的语法。

任何帮助将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-21T17:06:53.943

```
((wwidth > 321) && (wwidth < 481)) 
```

这是您需要的条件 (http://jsfiddle.net/malet/wLrpt/)。

我还会考虑使您的条件更清晰，如下所示：

```
if (wwidth <= 320) {
    alert("I am 320 pixels wide, or less");
    window.scrollTo(0,0);
} else if ((wwidth > 320) && (wwidth <= 480)) {
    alert("I am between 320 and 480 pixels wide")
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T17:08:25.280

```
if (wwidth > 321 && wwidth < 481) {
//do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T17:25:36.147

有两个问题。第一个已经回答，第二个是“wwidth > 320”，应该是“wwidth>=320”。如果窗口大于 480 怎么办？

您还可以按如下方式实现“之间”：

```
Number.prototype.between = function(a, b) {
  return this >= a && this <= b
}

$(document).ready(function(){
    var wwidth = $(window).width();
    if (wwidth < 321) {
      alert("I am 320 pixels wide, or less");
      window.scrollTo(0,0);
    } else if (wwidth.between(321,481))
        alert("I am between 320 and 480 pixels wide")
    else alert("I am greater than 480 pixels wide.");  
}); 
```

# c# - 翻译可查询 返回 IMongoQuery

> ID：10261156
> 
> 赞同：9
> 
> 时间：2012-04-21T17:03:55.720
> 
> 标签：c#, linq, mongodb

考虑以下代码

```
var q = from e in myCollection.AsQueryable<Entity>() where e.Name == "test" select e; 
```

实际的查询非常复杂，我不喜欢使用 QueryBuilder 而不是 LINQ 来构建它。

所以我想将它转换回 IMongoQuery 以在 myCollection.Group() 调用中使用，因为没有通过 LINQ 的 GroupBy 支持。

是否可以？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-22T16:01:15.183

编辑答案：

我意识到已经有一种官方方法可以从 LINQ 查询中获取 Mongo 查询（我应该知道！）。您必须将 IQueryable<T> 向下转换为 MongoQueryable<T> 才能访问 GetMongoQuery 方法：

```
var linqQuery = from e in collection.AsQueryable<Entity>() where e.Name == "test" select e;
var mongoQuery = ((MongoQueryable<Entity>)linqQuery).GetMongoQuery(); 
```

原答案：

~~目前还没有官方支持的方法来做到这一点，但在不久的将来，我们确实打算让查找 LINQ 查询映射到的 MongoDB 查询变得容易。~~

在短期内，您可以使用以下未记录的内部方法来找出 LINQ 查询映射到的 MongoDB 查询：

```
var linqQuery = from e in collection.AsQueryable<Entity>() where e.Name == "test" select e;
var translatedQuery = (SelectQuery)MongoQueryTranslator.Translate(linqQuery);
var mongoQuery = translatedQuery.BuildQuery(); 
```

~~但是在某些时候，您可能需要从这些未记录的方法切换到官方支持的方法（未记录的方法将来可能会更改或重命名）。~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-13T07:22:52.037

基于 Robert Stam 的回答的快速扩展：

```
public static IMongoQuery ToMongoQuery<T>(this IQueryable<T> linqQuery)
{
    var mongoQuery = ((MongoQueryable<T>)linqQuery).GetMongoQuery();
    return mongoQuery;
}
public static WriteConcernResult Delete<T>(this MongoCollection<T> col,   IQueryable<T> linqQuery)
{
     return col.Remove(linqQuery.ToMongoQuery());
}
public static WriteConcernResult Delete<T>(this MongoCollection<T> col, Expression<System.Func<T, bool>> predicate)
{
    return col.Remove(col.AsQueryable<T>().Where(predicate).ToMongoQuery());
} 
```

例子：

```
myCollection.Remove(myCollection.AsQueryable().Where(x => x.Id == id).ToMongoQuery());
myCollection.Delete(myCollection.AsQueryable().Where(x => x.Id == id));
myCollection.Delete(x => x.Id == id); 
```

# c# - 初始化静态类的静态成员时的奇怪行为

> ID：10261158
> 
> 赞同：1
> 
> 时间：2012-04-21T17:04:33.010
> 
> 标签：c#, concurrency, static, locking, initialization

我对静态类的静态成员的初始化有问题。据我所知，它只会被初始化一次，所以我在并发执行 fooList.Add(...) 时锁定了这个变量，以确保这个操作是线程安全的：

```
internal static class ObjectA
{
    private static object _lockAdd = new object();

    public void functionA()
    {
       lock (_lockAdd)
       {... 
```

我遇到了一些奇怪的情况，所以我决定用log4net编写_lockAdd的hashcode，令我惊讶的是我观察到的是：

【INFO】【2012-04-20 15:26:44,080】【thread12】_lockAdd的hashcode（51755728）...

【INFO】【2012-04-20 15:26:58,624】【thread16】_lockAdd的hashcode（31071611）...

如您所见，两个'_lockAdd'地址不同，这是为什么，还是我对静态成员的理解有误？当操作在静态类中时，我应该如何确保线程安全？

对不起假代码的错误，这是我的实际代码：

```
internal static class UtilExtension
{               
    private static object _lockAdd = new object(); //initial twice ? why?

    public static void DoAdd(this Type entityType)
    {            
        if (!Pools.Has(entityType))
        {
            lock (_lockAdd) 
            {
                if (!Pools.Has(entityType)) //insure operation below is thread safe
                {
                    // i find something wrong in concurrency,so i log the _lockAdd's hashcode,
                    // and then i found it's hashcode is different( in my opinion, it means not the same variables )
                    LogUtil.Info(_lockAdd.GetHashCode().ToString());

                    //... do fooList.Add(...)
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:38:10.687

对于仅用于`lock`ing 的对象，请使用`readonly`：

```
private static readonly object _lockAdd = new object(); 
```

如果对象以某种方式被覆盖，那么下次启动应用程序时，您很可能会从编译器或运行时得到不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:21:28.437

也许我把它弄复杂了，事实是，静态成员总是线程不安全的。所以当我们使用静态成员（_lockAdd）作为锁定目标时，我们应该添加只读以确保 _lockAdd 只被初始化一次。

# javascript - 样式化动态添加的表头和列

> ID：10261161
> 
> 赞同：0
> 
> 时间：2012-04-21T17:05:09.007
> 
> 标签：javascript, jquery, asp.net, css

我需要通过更改 CSS 设置/样式来设置动态添加到页面的表格的样式。不知何故，这不起作用，我正在寻找解决这个问题的方法。如何为动态创建的表调整表头和列的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:06:02.083

查看 jquery .css()

[http://api.jquery.com/css/](http://api.jquery.com/css/)

```
$("th").css( "width", value ) 
```

Jquery 有一些函数可以动态改变 css 属性。还有一些宽度的函数

```
$("th").width( value ) 
```

[http://api.jquery.com/width/](http://api.jquery.com/width/)

将表添加到页面后调用这些函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:21:02.107

如果表有 id 或类，您可以直接在 css 中定位它们。如果它们被过度使用，请为它们添加一个 !important 标签。

```
table#idhere {width:500px !important} 
```

或者

```
table.clashere {width:500px !important} 
```

这将找到表格的宽度，然后将其添加为属性，以便对其进行设置。

```
var tableWidth = $('#tbl_reportview table.report').width();
$('#tbl_reportview table.report').attr('width',tableWidth + 'px'); 
```

# gtk - gtk 网格添加两个小部件

> ID：10261163
> 
> 赞同：1
> 
> 时间：2012-04-21T17:05:30.807
> 
> 标签：gtk, gtk3

我有这个代码：

```
/* Descrizione: GUI Client FTP sviluppato come progetto per il corso di Reti di Calcolatori (laurea SSRI presso DTI Crema)
 * Sviluppatori: Paolo Stivanin, Filippo Roncari, Stefano Agostini.
 * Anno: 2012
 * Licenza: GNU AGPL v3 <http://www.gnu.org/licenses/agpl-3.0.html>
 * Sito web: <https://github.com/polslinux/FTPUtils> */

#include <gtk/gtk.h>

/* When "connect" button is clicked a message will appear */
static void print_hello (GtkWidget *widget, gpointer data)
{
  g_print ("Connect button clicked\n");
}

int main (int argc, char *argv[]){

/* Declare widgets */
GtkWidget *window;
GtkWidget *grid;
GtkWidget *button;
GtkWidget *u_name;
GtkWidget *h_name;
GtkWidget *pass;
GtkWidget *label_user;
GtkWidget *label_host;
GtkWidget *label_pass;

/*This is called in all GTK applications. Arguments are parsed from the command line and are returned to the application.*/
gtk_init (&argc, &argv);

/* create a new window, set its title and put it on center */
window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
gtk_window_set_title (GTK_WINDOW (window), "FTP Client");
gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
g_signal_connect (window, "destroy", G_CALLBACK (gtk_main_quit), NULL);
gtk_container_set_border_width (GTK_CONTAINER (window), 10);
gtk_window_set_resizable(GTK_WINDOW(window), FALSE); /* window is NOT resizable */

/* Here we construct the container that is going pack our buttons */
grid = gtk_grid_new ();
gtk_grid_set_row_spacing (GTK_GRID (grid), 3);

/* Pack the container in the window */
gtk_container_add (GTK_CONTAINER (window), grid);

/* Add labels */
label_user = gtk_label_new("Username  ");
label_host = gtk_label_new("Hostname  ");
label_pass = gtk_label_new("Password  ");

/* Add hostname entry and label */
h_name = gtk_entry_new();
gtk_entry_set_placeholder_text (GTK_ENTRY (h_name), "Hostname"); /* imposto il testo trasparente che scompare quando clicco o scrivo */
gtk_grid_attach (GTK_GRID (grid), label_host, 0, 0, 1, 1);
gtk_grid_attach (GTK_GRID (grid), h_name, 1, 0, 1, 1);

/* Add username entry and label */
u_name = gtk_entry_new();
gtk_entry_set_placeholder_text (GTK_ENTRY (u_name), "Username");
gtk_grid_attach (GTK_GRID (grid), label_user, 0, 1, 1, 1);
gtk_grid_attach (GTK_GRID (grid), u_name, 1, 1, 2, 1);

/* Add password entry and label (visibility set to 0 = not visible */
pass = gtk_entry_new();
gtk_entry_set_placeholder_text (GTK_ENTRY (pass), "Password");
gtk_grid_attach (GTK_GRID (grid), label_pass, 0, 2, 1, 1);
gtk_entry_set_visibility (GTK_ENTRY (pass), 0);
gtk_grid_attach (GTK_GRID (grid), pass, 1, 2, 1, 1);

/* Add connect button */
button = gtk_button_new_with_label ("Connect");
g_signal_connect (button, "clicked", G_CALLBACK (print_hello), NULL);
gtk_grid_attach (GTK_GRID (grid), button, 0, 3, 2, 1);

/* Add quit button */
button = gtk_button_new_with_label ("Quit");
g_signal_connect (button, "clicked", G_CALLBACK (gtk_main_quit), NULL);
gtk_grid_attach (GTK_GRID (grid), button, 0, 4, 2, 1);

/* Now that we are done packing our widgets, we show them all in one go, by calling gtk_widget_show_all() on the window.*/
gtk_widget_show_all (window);

/* All GTK applications must have a gtk_main(). Control ends here and waits for an event to occur (like a key press or a mouse event),
 * until gtk_main_quit() is called. */
gtk_main ();

return 0;
} 
```

我想添加更多小部件......我该怎么做？例如我想添加一个菜单栏（例如关于菜单），但如果我这样做：

```
gtk_container_add (GTK_CONTAINER (window), menubar); 
```

编译器告诉我，我不能在窗口中添加超过 1 个小部件......

我正在 Ubuntu 12.04 上使用 GTK+ v3.4.1 开发 gui！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T19:19:59.883

您必须将第二个小部件添加到网格，而不是窗口。窗口只能包含一个小部件，在本例中为网格。网格可以包含多个小部件。

# asp.net-mvc - 使用 ASP.NET 的 MVC 应用程序中的选项卡

> ID：10261176
> 
> 赞同：-2
> 
> 时间：2012-04-21T17:06:39.120
> 
> 标签：asp.net-mvc, foundation

在我的应用程序中，我在页面顶部有一个选项卡，每个选项卡都应该呈现一个新页面。

选项卡在 Layouts 文件中定义，因为这将是标准视图的一部分。

现在我为每个选项创建了不同的视图，例如项目是选项卡之一。

因此，当我单击选项卡选项时，它将如何根据我选择的选项卡呈现正文？

我使用了 Foundation 布局选项卡，但需要将 jquery 连接到其中以启动事件。

任何示例或回复都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T20:46:14.197

尝试[jQuery UI 选项卡](http://jqueryui.com/demos/tabs/)

编辑1：

```
<div id="tabs"> 
    <ul> 
        <li><a href="#projects">Projects</a></li> 
        <li><a href="#tab-2">Tab 2</a></li> 
        <li><a href="#tab-3">Tab 3</a></li> 
    </ul> 

    <div id="projects"> 
        <% Html.RenderAction("Projects", "Home"); %> 
    </div> 

    <div id="tab-2"> 
        <% Html.RenderAction("TabTwo", "Home"); %> 
    </div> 

    <div id="tab-3"> 
        <% Html.RenderAction("TabThree", "Home"); %> 
    </div> 
</div> 
```

`[ChildActionOnly]`如果您希望方法仅使用子视图工作，请装饰您的选项卡操作方法。

# jquery - 带有验证的 ASP.NET MVC 表单，不使用 Html.BeginForm

> ID：10261177
> 
> 赞同：1
> 
> 时间：2012-04-21T17:06:45.517
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我在使用 ASP.NET MVC 中的验证制作自己的表单时遇到了麻烦。我想完全使用 html 和 javascript 制作表单，但是当我在我的 asp.net mvc 网站上查看时，我在互联网上找到的每个示例都不起作用。

我有这个 jsFiddle：http: [//jsfiddle.net/epic720/V3p9f/](http://jsfiddle.net/epic720/V3p9f/)

在我将它粘贴到我的 mvc 站点上的页面之前，它工作得很好。输入周围有一个红色边框，但没有创建错误消息标签。

我在 web.config 中将 ClientValidationEnabled 和 UnobtrusiveJavaScriptEnabled 设置为 false。

**编辑：**我用最新版本的 jquery 替换了项目中的 jquery 副本，现在我不再遇到这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T10:47:42.697

对于对模型验证上的数据属性组合感兴趣且不使用 Html.BegionForm() 的任何人，您可以尝试添加此

```
@{ ViewContext.FormContext = new FormContext(); } 
```

在你的`<form>`元素之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:13:56.713

不知道问题是什么，但我的解决方案是创建一个非剃刀或网络表单部分并将其呈现在您的视图中。

# php - 如何获取 in_array 中第二个参数的键？

> ID：10261178
> 
> 赞同：0
> 
> 时间：2012-04-21T17:06:53.803
> 
> 标签：php, arrays

我有一个数组（array01），其中包含一堆子数组，每个子数组由两条数据组成，例如：

```
Array ( [0] => Array ( [0] => 10CC [1] => Dreadlock Holiday )
        [1] => Array ( [0] => 10CC [1] => I\'m Not In Love )
        [2] => Array ( [0] => 10CC [1] => Dreadlock Holiday ) )
         etc... 
```

我有另一个数组（array02），例如：

```
Array ( [66] => Array ( [0] => 10CC [1] => Dreadlock Holiday )
        [585] => Array ( [0] => 10CC [1] => I\'m Not In Love )
         etc... 
```

我成功地使用了foreach，然后使用了in_array 来查看array02 中有哪些array01 元素。但是，我正在努力弄清楚的是如何获取 array2 中命中的元素的 id。

所以比如array01的0和2个元素（都是10CC，Dreadlock Holiday），在array02中是匹配的，但是我如何获取元素的ID（本例中为66）呢？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:10:33.160

你试过这个[`array_search`](http://php.net/array_search)功能吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:26:11.343

在 PHP 手册中查找 array_intersect() 的文档。请注意，原始键被保留，因此它返回一个数组，其中包含原始键的 array02 数组中存在的元素。

希望这是你要找的

干杯

# java - 如何在java中创建一个gui？

> ID：10261181
> 
> 赞同：0
> 
> 时间：2012-04-21T17:07:21.023
> 
> 标签：java, swing, user-interface

我需要在java中创建一个gui，它将从用户那里获取一个字符串，然后用户将单击提交按钮。单击提交按钮时，用户将对字符串进行一些处理，然后在屏幕上（gui）输出。

到目前为止，我已经编写了以下代码，但是当我运行此代码时，它没有给出任何输出。

```
public class userinterface extends javax.swing.JFrame {

    public userinterface() {
        initComponents();
    }

    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration                   

    public void show() {
        String str = jTextField1.getText();

        jButton1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                //Execute when button is pressed
                System.out.println("You clicked the button,str");
            }
        });
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new userinterface().setVisible(true);
                userinterface obj = new userinterface();
                obj.show();
            }
        });
    }

} 
```

请告诉我我在哪里做错了？如何使输出显示在 gui 屏幕上？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T17:31:17.010

您的问题是您在`show()`没有意识到的情况下覆盖了基本方法，这会阻止 JFrame 显示。将此方法的名称更改为不同的名称：

```
public void myShow() {
  // String str = jTextField1.getText(); // not useful

  jButton1.addActionListener(new ActionListener() {
     public void actionPerformed(ActionEvent e) {
        // Execute when button is pressed
        System.out.println("You clicked the button,str");
     }
  });
}

public static void main(String args[]) {
  java.awt.EventQueue.invokeLater(new Runnable() {
     public void run() {
        // new userinterface().setVisible(true);
        userinterface obj = new userinterface();
        // obj.show();
        obj.myShow();
        obj.setVisible(true);
     }
  });
} 
```

这是我们所有人都应该努力不扩展类的另一个原因，除非绝对必要，因为这样做有时会导致非常难以调试的错误。

我可以通过在整个代码中放置 println 并看到 show() 被调用来调试它，即使它没有被我显式调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-29T10:30:09.303

```
JFrame frame = new JFrame();
JPanel panel = new JPanel();
JLabel label = new JLabel("this is GUI boi");

frame.setSize(500, 500);
panel.add(label);
frame.add(panel);
frame.setVisible(true); 
```

1.  你必须实例化所有的 gui 组件
2.  你必须调用`setVisible()`JFrame 的方法
3.  您必须设置 JFrame 的宽度和高度
4.  您已将组件添加到父组件（例如将标签添加到面板，将面板添加到框架）

# python - Python 内部结构

> ID：10261183
> 
> 赞同：-1
> 
> 时间：2012-04-21T17:07:38.293
> 
> 标签：python

任何人都可以将我引导到在线文档或书籍，我可以在其中找到并了解 C 中的 Python 实现，例如 Perl 的这本书：http: [//perldoc.perl.org/index-internals.html](http://perldoc.perl.org/index-internals.html) 或这本书：*扩展和 Simon Cozen 的嵌入 Perl*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T17:12:27.650

你确定你在问这个问题之前尝试过谷歌搜索或查看 docs.python.org 吗？

这是关于扩展解释器的“官方”教程，应该是一个开始 - [http://docs.python.org/extending/index.html](http://docs.python.org/extending/index.html)然后是[C API 参考](http://docs.python.org/c-api/index.html)，在你做你的时候应该很有用工作。

[Eli在](https://stackoverflow.com/users/8206/eli-bendersky)[他的博客](http://eli.thegreenplace.net/category/programming/python/python-internals/)上有一系列描述解释器内部结构的帖子。

# ruby - 如何将数组索引更改为从 1 开始？

> ID：10261184
> 
> 赞同：0
> 
> 时间：2012-04-21T17:07:42.100
> 
> 标签：ruby, arrays, map

如何将数组的索引更改为从 1 而不是 0 开始。我正在尝试从站点 (JSON) 获取新闻并在解析后：

```
@news = JSON.parse(Net::HTTP.get(URI.parse('http://api.site.com/news?format=json'))) 
```

但是要查看单个新闻标题，我必须`@news["items"][0]`为第一个链接的标题做。是否有可能改变这种行为，所以当我这样做时，`@news["items"][1]`它会显示第一个链接的标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:20:01.470

您应该拦截用户输入并调整输入的值以映射到正确的数组元素。通常，您应该始终验证用户输入并检查它是否有意义。

# c++ - 用于 C++ 的混合类型、可变长度参数列表（varargin、*args、...）

> ID：10261185
> 
> 赞同：0
> 
> 时间：2012-04-21T17:07:44.550
> 
> 标签：c++, matlab

我正在构建最初用 MATLAB 编写的项目的 C++ 克隆。我想“翻译”尽可能接近原始代码的代码（考虑到像 MATLAB 这样的动态类型语言和像 C++ 这样的静态类型语言之间不可避免的差异）。

我的问题是关于可变长度参数列表作为可以包含混合类型参数的函数参数。

MATLAB 有`varargin`一个函数参数：

```
 varargin Variable length input argument list.
    Allows any number of arguments to a function.  The variable
    varargin is a cell array containing the optional arguments to the
    function.  varargin must be declared as the last input argument
    and collects all the inputs from that point onwards. In the
    declaration, varargin must be lowercase (i.e., varargin). 
```

在 Python 中，`*args`处理`**kwargs`起来非常舒服。

在 C++ 中，我离这种灵活性有多近？我应该使用任何标准的参数列表类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:20:40.797

如果您只想传递几个（简单）类型的参数，`std::vector<>`则作为参数传递非常简单明了。

通常你会创建这样的结构：

```
struct Option {
    union {
        int Int;
        float Float;
    } Number;
    string String;
}; 
```

`Type`或者，您可以向 Option 结构添加一个字段，以在`switch`语句中使用。

在 C++11 中，甚至应该可以在联合中使用 std::string，但我对此不是 100% 确定的。

`<cstdarg>`是另一种解决方案，如果您使用 C 函数（例如`vsprintf`.

# android - 在 AsyncTasks 仍在运行时检测是否选择了刷新按钮

> ID：10261186
> 
> 赞同：0
> 
> 时间：2012-04-21T17:07:47.823
> 
> 标签：android, synchronization, android-listview, android-asynctask

我有一个 Android 应用程序，它使用列表活动来显示从互联网上提取的项目列表。我首先使用 AsyncTask 加载列表，该 Async 任务完成它调用不同的异步任务来开始加载与列表项一起出现的缩略图。我遇到的问题是用户可以访问他们可以随时按下的刷新按钮，当按下它时，整个项目列表将被删除并重新开始加载。如果发生这种情况，加载缩略图的异步任务可能仍在运行，然后可能会尝试将缩略图添加到不存在的列表项。我试过在列表上同步，使用一个布尔值，经过研究我意识到这不起作用。我还尝试使用静态原子布尔值来检查是否已点击刷新以取消缩略图加载器。

```
public class LoadItems extends AsyncTask<Void, Void, Boolean> {

private Activity activity;
private static boolean loading = false;
public static final AtomicBoolean refreshing = new AtomicBoolean(false);
private static final String TAG = "LoadItems";
private int start;

private List<ListItem> items;

public LoadItems(Activity activity) {
    this.activity = activity;
}

@Override
protected void onPreExecute() {
    loading = true;
    start = ItemViewer.itemList.size();
}

@Override
protected Boolean doInBackground(Void... arg0) {

    items = WebFunctions.getMoreItems(activity);
    return (items != null);
}

protected void onPostExecute(Boolean success) {
    if (success) {
        for (ListItem item: items) {
            ItemViewer.itemList.add(item);
            Log.d(TAG, "added item " + item.getTitle());
        }
        LoadThumbnails thumbnailLoader = new LoadThumbnails();
        thumbnailLoader.execute(start, ItemViewer.itemList.size());
    }
    loading = false;
}

public void protectedExecute() {
    if (!loading)
        execute();
}

public void refresh() {
    if (!refreshing.getAndSet(true)) {
        WebFunctions.reset();
        ItemViewer.itemList.removeAllItems();
        execute();
    }
}

}

public class LoadThumbnails extends AsyncTask<Integer, Void, Drawable> {
private int position;
private int end;

@Override
protected Drawable doInBackground(Integer... params) {
    position = params[0];
    end = params[1];
    Drawable thumbnail = null;
    synchronized(ItemViewer.itemList) {
        if (LoadItems.refreshing.get())
            cancel(true);
        String url = ItemViewer.itemList.get(position).getThumbnailUrl();
        if (!url.isEmpty())
            thumbnail = WebFunctions.loadDrawableFromUrl(ItemViewer.activity, url);
    }
    return thumbnail;
}

protected void onPostExecute(Drawable d) {

    synchronized (ItemViewer.itemList) {
        if (LoadItems.refreshing.get())
            cancel(true);
        if (d != null)
            ItemViewer.itemList.setThumbnail(position, d);
        position++;
        if (position < end) {
            LoadThumbnails lt = new LoadThumbnails();
            lt.execute(position, end);
        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:23:55.163

以下步骤可能会有所帮助：

1.  缓存结果，您之前从网上提取的任何内容都应保存并在启动应用程序时快速恢复。通过这种方式，您可以避免应用程序启动时出现长时间延迟和空白屏幕，进而阻止用户按下“重新加载”

2.  做一个布尔变量`reload_in_progress`，`true`当你开始从网上提取数据时将其设置为，`false`当所有缩略图都准备好时将其设置为。'reload' 点击处理程序应该在`reload_in_progress`is时忽略点击`true`。

3.  向用户展示一些国王`progress bar`，所以（s）他知道它已经重新加载并且不会`reload`再次推送。

4.  几乎忘记了，永远不要更新“实时”显示给用户的数据，这会导致美妙的情况，当用户点击项目时它正在改变并做一些与他预期完全不同的事情。长时间更新应该将其数据保留给自己，并且只有在一切准备就绪时才快速将旧数据交换为新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:32:08.783

这很容易解决。每当用户点击刷新按钮时，请确保`cancel()`在创建新任务之前调用您创建的最后一个异步任务。例如，

```
private void onRefreshClick(View v) {
  if(mLastLoadItemTask != null) mLastLoadItemTask.cancel(true);
  if(mLastLoadThumbnailTask != null) mLastLoadThumbnailTask.cancel(true);
  mLastLoadItemTask = new LoadItems(...);
  mLastLoadItemTask.execute();
} 
```

然后，在`onPostExecute`每个异步任务中，首先检查它们是否通过调用被取消`isCancelled()`。如果它们被取消，请确保`onPostExecute`仅返回该方法不起作用。例如，

```
 protected void onPostExecute(...) {   
         if(isCancelled()) return;
         //Adding items to list 
         //Or start load thumbnail task  
     } 
```

如您所见，这应该可以防止任何无意或过时的更新，因为`onPostExecute`方法和您的`cancel`调用都将发生在主线程上。我建议的最后一件事是更改您的 loadThumbs 任务，以便能够通过检查 isCancelled() 来尽快停止工作，只要这样做是有意义的。

# machine-learning - ROC 曲线图

> ID：10261187
> 
> 赞同：0
> 
> 时间：2012-04-21T17:08:00.570
> 
> 标签：machine-learning, svm, classification, roc

伙计们，我正在寻找应用分类器的第三方软件（如 SVM、多层感知器，我的头 libsvm 非常好），而且更重要的是任何关于 ROC 曲线的教程，因为我想学习如何做它们。我在 google 中找到的那些并没有真正的帮助，所以如果你知道其他任何东西会很好。有人可以给我提供类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:16:28.307

如果您最终使用**R**，您应该查看[ROCR 包](http://rocr.bioinf.mpi-sb.mpg.de/)。

# android - Android - 动态分配和检索 ID

> ID：10261190
> 
> 赞同：1
> 
> 时间：2012-04-21T17:08:34.297
> 
> 标签：android, android-layout, android-widget

我知道如何通过调用`setID()`. 为了使 ID 唯一，我使用`ids.xml`并从预先生成的 ID 池中传递给`setID()`ID。

**问题 1：**有什么方法可以在不使用的情况下分配 ID，`ids.xml`因为我无法预测运行时需要多少 ID？

我试图绕过*问题 1*中提出的第一个问题，方法是根据标签的哈希（每个标签都是唯一的）动态分配每个 id，但是无法保证 ID 不会与自动生成的 ID 冲突`R.java`.

**问题1.1：** ID命名冲突如何解决？

**问题 2：**假设我有我动态分配和生成的 ID 值。由于上述 ID 未出现在 中`R.id`，`findViewById()`因此不适用于检索视图。因此，当 ID 已知时，如何检索视图？

**答案 2：**`onCreate()`只有在返回控制（终止）后，您才能通过相应的 ID 检索视图。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T22:25:55.537

从 API 级别 17 开始，您可以通过调用获取新 id

```
View.generateViewId() 
```

[详情在这里。](https://stackoverflow.com/a/15442898/727768)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:27:10.617

> 有什么方法可以在不使用 ids.xml 的情况下分配 ID，因为我无法预测运行时需要多少个 ID？

这保证了每个视图都有一个唯一的 ID

```
for(int i =0 ; i < yourIDcount ; i++){
yourView.setId(i);
} 
```

> 当 ID 已知时如何检索视图？

```
View.findViewById(yourView.getId()); 
```

可用于获取您的视图的 ID，因为每个视图都有一个唯一的 ID，您可以取回您想要的视图..

动态一词意味着在运行时创建，因为您在 onCreate 中分配了 id，所以它被分配为视图 id，因为 onCreate 仅在创建活动后被调用，您可以确保您分配的 id 保持不变......

# html - HTML5 getCurrentPosition 与 Meteor

> ID：10261192
> 
> 赞同：3
> 
> 时间：2012-04-21T17:08:46.720
> 
> 标签：html, geolocation, meteor

我正在尝试将 html5 地理定位 API 与 Meteor 一起使用。我正在使用： `navigator.geolocation.getCurrentPosition(handle_geolocation_query);`在我的 js 中，但它似乎不起作用 - 我认为它可能与 Meteor 的计时器（[http://docs.meteor.com/#timers](http://docs.meteor.com/#timers)）限制有关。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T06:07:54.743

谢谢@lashleigh，这是一个加载问题

这是对我有用的代码（我正在使用 Modernizr.js 来检测地理位置）

```
if (Meteor.is_client) {
  Session.set('loc','?');
  //alert(Modernizr.geolocation);

  function foundLocation(location) {
    console.log(location);
    Session.set('loc','lat: '+location.coords.latitude+', lan: '+ location.coords.longitude);
  }
  function noLocation() {
    alert('no location');
  }
  Template.hello.greeting = function () {
    var output;
    if (Modernizr.geolocation) {
      navigator.geolocation.getCurrentPosition(foundLocation, noLocation);
      outpout = Session.get('loc');
    }
    return Session.get('loc');
  };
} 
```

# php - 通过 php 从表单中检索 javascript 输出

> ID：10261195
> 
> 赞同：1
> 
> 时间：2012-04-21T17:09:37.310
> 
> 标签：php, javascript, forms

我在试图获取用户屏幕分辨率的表单中有一个隐藏字段。然后在处理端通过 php.ini 检索屏幕分辨率。不幸的是，我对 javascript 的理解非常有限。这就是我所拥有的。我真的很感激任何帮助。

```
<head>
    <script type="text/javascript">
        function xy(){
            document.write(screen.width + "x" + screen.height);
            document.getElementById('xy').value;
            }           
    </script>
</head>

<form action="" method=post >

    //other fields here

    <input type="hidden" name="xy" id="xy" value=""/>
    <input type=submit name="button" value="button" /> 
</form> 
```

当我查看页面的源代码时，我不应该看到设置为例如“1366x768”的值吗？现在在处理方面，我想像这样用 php 提取信息。

```
if(isset($_POST['xy']) && (!empty($_POST['xy'])){
 $blah = $_POST['xy'];
 //sanatize $blah;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:15:44.497

您可以使用

```
<script type="text/javascript">
    function setResolution()
    {
        document.getElementById('xy').value = screen.width + "x" + screen.height;
    }
</script> 
```

然后，在提交时，确保函数已执行

```
<input type="submit" name="button" value="button" onclick="setResolution()" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:12:12.677

采用

```
function xy(){
    document.getElementById('xy').value = screen.width + "x" + screen.height;

} 
```

并在呈现表单后使用脚本标签或执行函数，否则将找不到元素

编辑：添加[小提琴](http://jsfiddle.net/ptX8F/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T19:12:36.317

乌利乌，

你不调用函数，所以你什么都得不到......

如果你改变这个，我相信它会为你工作：

```
<head> 
<script type="text/javascript"> 
        document.write(screen.width + "x" + screen.height); //this will write on the html page 
        document.getElementById('xy').value=screen.width + "x" + screen.height; // this will put the resolution in your form's hidden field
</script> 
```

# javascript - 如何仅在特定位置为 div 设置动画？

> ID：10261197
> 
> 赞同：1
> 
> 时间：2012-04-21T17:09:44.953
> 
> 标签：javascript, jquery

有没有办法为 a 设置动画（向下滑动）`div`；例如，如果它只**在**页面上的某个位置？

例如，有四个 div 都具有相同的 class `.ALLCONTENT`，但是当单击按钮（具有 class `.BUTTONS`）时，只有距顶部 30 px 的 div 会向下动画，其余的将保持在同一个位置。

基本上，将 div 向下滑动到某个位置，如果该 div 已经在该位置，它不会进一步向下滑动；我现在遇到的问题

```
$(".BUTTONS").click(function(){
    $(".ALLCONTENT").animate({"top":"+=558px"}, 250, 'linear');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:16:42.643

采用

```
if($(".ALLCONTENT").offset().top === 20) {
    //Do something
} 
```

如果你想检查它对文档/正文的绝对位置

和

```
if($(".ALLCONTENT").css("top") === "20px") {
    //Do something
} 
```

或者

```
if($(".ALLCONTENT").position().top === 20) {
    //Do something
} 
```

如果你想检查它的相对位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:13:20.100

如果无法分配 id（即使我无法对其进行成像），请使用以下命令：

```
if($(".ALLCONTENT").css("top") == "20px") {
//Do something

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T17:58:35.833

```
$(".BUTTONS").click(function(){  
    $(".ALLCONTENT").each(function(i){
        if($(this).css("top")=="30px"){
            $(this).animate({"top":"558px"}, 250, "linear");
        }
    })
}); 
```

# android - Android SOAP NTLM 示例？

> ID：10261198
> 
> 赞同：1
> 
> 时间：2012-04-21T17:09:45.143
> 
> 标签：android, soap, ntlm, dynamics-nav

我试图用谷歌搜索一个可行的例子。我已经尝试过 KSOAP2 和 JCIFS 示例，但没有成功。我尝试连接的 Web 服务是第 3 方（Microsoft Dynamics NAV），无法修改。它使用 SOAP 和 SPNEGO 或 NTLM 身份验证。我猜它已经是 NTLMv2 但我不确定。任何人都可以向我推荐以下 SOAP 请求的完整代码吗？

```
$<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:item="urn:microsoft-dynamics-schemas/page/items">
$   <soapenv:Header/>
$   <soapenv:Body>
$      <item:ReadMultiple>
$         <!--1 or more repetitions:-->
$         <item:filter>
$            <item:Field>No</item:Field>
$            <item:Criteria>1000</item:Criteria>
$         </item:filter>
$         <item:setSize>500</item:setSize>
$      </item:ReadMultiple>
$   </soapenv:Body>
$</soapenv:Envelope> 
```

我已经用soapUI 验证了这个请求，它工作正常。但是当我尝试使用 KSOAP2 和 JCIFS 运行它时，我收到一条错误消息“连接被拒绝”。需要注意的是，我是 Java 和 Android 的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:41:34.807

我在 NAV 和 SOAP 方面的经验有限，但是我在身份验证方面遇到了类似的问题。

我需要做的是实际运行请求两次。由于某种原因，第一个请求永远不会通过（也许是握手的一部分？），但第二个请求会返回一个有效的响应。最好的调试工具是一个简单的 HTTP 代理（例如 Burpsuite），它可以让我查看到底发送了什么（根据标头等）以及响应是什么。

其次，当我手动创建这个 SOAP 请求时，我错过了 NAV 的 SOAPAction 标头。我不确定这是否是标准的，但我需要使用带有 .NET Web 服务连接的 HTTP 代理（通过 SOAP 与 NAV 交谈的官方方式）并了解它是如何交谈的。

# objective-c - 从其他现有类访问 NSMutableArray

> ID：10261202
> 
> 赞同：0
> 
> 时间：2012-04-21T17:10:49.803
> 
> 标签：objective-c, ios, xcode, nsmutablearray

我正在尝试从与创建它的不同的现有类访问 NSMutableArray。但如果我 NSLog 它，我会得到空值。我的程序在 class2 中启动，然后我转到 class1，通过按一行或多行创建我的 NSMutableArray，然后我希望我的 class2 获取更新的 NSMutableArray 实例，但它得到的只是空值。下面的代码：

```
//class1.m

#import "FocusTagTableViewController.h"
#import "STATableViewController.h"

@implementation FocusTagTableViewController

@synthesize focusArray = _focusArray;
@synthesize allSelectedFocus = _allSelectedFocus;

- (void)viewDidLoad
{
_focusArray = [[NSArray alloc]initWithObjects:@"Balance",@"Bevægelse",@"Elementskift",@"Vejrtrækning",@"Alle",nil];

[super viewDidLoad];

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *selectedFocus = [[_focusArray objectAtIndex:indexPath.row] stringByAppendingString:@","];
if(_allSelectedFocus == nil)
{
    _allSelectedFocus = [[NSMutableArray alloc]init];
    [_allSelectedFocus addObject:selectedFocus]; 
}
else if(![_allSelectedFocus containsObject:selectedFocus])
{
    [_allSelectedFocus addObject:selectedFocus];
}
}

//class2.m

#import "STATableViewController.h"
#import "FocusTagTableViewController.h"

@implementation STATableViewController
- (void)viewDidLoad
{
[super viewDidLoad];

 FocusTagTableViewController *focusTag = [[FocusTagTableViewController alloc]init];

[focustag addObserver:self forKeyPath:@"allSelectedFocus" options:NSKeyValueObservingOptionNew context:NULL];
}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
if([keyPath isEqualToString:@"allSelectedFocus"])
{
    NSLog(@"%@", [object valueForKeyPath:keyPath]);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:17:39.397

那是因为在第 2 类中，您创建了第 1 类的新实例，它有一个空数组。如果要从类 2 访问该数组，则应引用该类。或者您可以为此使用 Key-Value-Observing。

这是关于 KVO 的文档 [http://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html](http://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)

在第一类中，当您创建类 2 时，将**self**添加为该数组的观察者，并在类 1 中实现**observeValueForKeyPath:方法**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:40:39.640

试试这个方法：

1）在你的class1文件中导入你的class2.h文件。

`NSMutableArray *foo`2）在你的class2.h文件中创建一个全局

3）在你的class1文件中为class2创建一个对象

4）而不是`allSelectedFocus`在你的class1文件中使用，`foo`像这样在该文件本身中设置对象`[class2Object.foo addObject:selectedFocus];`

# hibernate - Grails GORM 多对多关系和可连接条目的删除

> ID：10261203
> 
> 赞同：4
> 
> 时间：2012-04-21T17:11:02.380
> 
> 标签：hibernate, grails, grails-orm

我有 2 类汽车和车库。他们有 am:n 关系，所以一辆车有很多车库，一个车库有很多车。

我的数据库中有一个garage_has_car 表，其中存储了关系。我已将汽车上的 set belongsTo 配置为 Garage

```
static belongsTo = [  Garage ] 
```

如果我清除车库上的汽车集合并保存，garage_has_car 表中的相应条目将被删除。

但是如果我清除汽车上的车库集合并保存，garage_has_car 表中的相应条目不会被删除！

我怎样才能实现这种行为？

**更新 1（添加关系定义）：**

在车库中，关系是：

```
cars column:'deskriptor_id',joinTable:'garage_has_cars' 
```

在汽车中是

```
static belongsTo = [  Garage ]
garages column:'car_id',joinTable:'garage_has_cars' 
```

我在 IRC 也问过这个问题，有人回答：

> (...) grails 多对多关系总是只级联一个方向。grails中的多对多关系在hibernate中的映射方式也非常低效。不要使用它们。创建一个带有 1 个汽车和 1 个车库的加入类域对象 CarGarage。使您的类的汽车和车库属性瞬变，并向使用您的连接类来维护关系的汽车和车库类添加 get 和 add 方法。您还想在连接类中禁用版本控制，可以在此演示文稿[http://burtbeckwith.com/blog/files/169/gorm%20grails%20meetup%20presentation.pdf](http://burtbeckwith.com/blog/files/169/gorm%20grails%20meetup%20presentation.pdf)中找到一些信息，它的注释在这里： [Grails：没有 hasMany/belongsTo 的多对多 - 而是使用本机 3NF - 搜索全文](https://stackoverflow.com/questions/1814013/grails-many-to-many-without-hasmany-belongsto-instead-using-native-3nf-sear)

我发布此报价是因为它可能会帮助遇到与我相同问题的人。一旦我有时间实施这些更改，我也会更新这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:25:10.627

只需回答即可从未回答列表中删除。

> (...) grails 多对多关系总是只级联一个方向。grails中的多对多关系在hibernate中的映射方式也非常低效。不要使用它们。创建一个带有 1 个汽车和 1 个车库的加入类域对象 CarGarage。使您的类的汽车和车库属性瞬变，并向使用您的连接类来维护关系的汽车和车库类添加 get 和 add 方法。您还想在连接类中禁用版本控制，可以在此演示文稿 [http://burtbeckwith.com/blog/files/169/gorm%20grails%20meetup%20presentation.pdf](http://burtbeckwith.com/blog/files/169/gorm%20grails%20meetup%20presentation.pdf)中找到一些信息 ，它的注释在这里： Grails：没有 hasMany/belongsTo 的多对多 - 而是使用本机 3NF - 搜索全文

# c# - 设计问题：一个类的两个角色。第一个用于创建实例，另一个用于类型

> ID：10261206
> 
> 赞同：4
> 
> 时间：2012-04-21T17:11:21.147
> 
> 标签：c#, design-patterns, architecture

考虑这个类图：

```
 +--------+     * +------------------+ * afraid-of             +------------+
 | Garden |------>|    Animal        |<------------------------| Baby       |
 +--------+       +------------------+                         +------------+
                        ^
                        |
                 +----------+------+
                 |                 |
          +------+------+   +------+-----+
          | Cat         |   | Wolf       |
          +-------------+   +------------+ 
```

动物有两个作用：

1.  他们将在花园里走来走去（班级实例）
2.  宝宝害怕一些动物（班级类型）

应该养什么宝宝？它害怕的每一种动物都有一个实例？（听起来像糟糕的设计）类型名称？（我总是尽量避免重构）

这应该如何解决？（我使用的是 C#，我只在最后提到它，因为我希望这里有一个通用的、无语言的设计模式或想法）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T17:13:50.680

如果婴儿总是害怕相同的动物，你不必保留任何东西。你可以有一个方法：

```
public bool IsAfraid(Animal animal)
{
    return animal is Wolf;
} 
```

如果宝宝在不同的地方、不同的时间害怕不同的动物，你应该让每一个动物都有一个属性AnimalType（标志枚举）。然后，婴儿将拥有一个 AnimalType 类型的属性 AfraidOf。然后，检查你是否害怕动物很简单：

```
bool afraid = this.AfraidOf.HasFlag(animal.AnimalType); 
```

最后，对于架构中不同类型的关系（包含、继承、害怕），您可能应该有不同类型的链接到不同的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:45:33.433

A`Baby`可以列出他/她害怕的动物。我会指定独立的方法来从列表中添加和删除动物，因为随着时间的推移，可以删除或添加一些动物。可以直接通过属性更改动物列表，但在这种情况下我更喜欢特定的方法。

```
public class Animal { }
public class Cat : Animal { }
public class Wolf : Animal { }

public class Baby
{
    public List<Animal> ScaryAnimalsList { get; private set; }

    public Baby()
    {
        ScaryAnimalsList = new List<Animal>();
    }

    public void AddAnimalToScaryList(Animal animal)
    {
        ScaryAnimalsList.Add(animal);
    }

    public void RemoveAnimalFromScaryList(Animal animal)
    {
        if (ScaryAnimalsList.Contains(animal))
            ScaryAnimalsList.Remove(animal);
    }

    public bool IsAffraidOf(Animal animal)
    {
        return ScaryAnimalsList.Contains(animal);
    }
} 
```

这就是如何使用它

```
class Program
{

    static void Main(string[] args)
    {
        Cat cat = new Cat();
        Wolf wolf = new Wolf();

        var babyJo = new Baby();
        babyJo.AddAnimalToScaryList(wolf);
        babyJo.IsAffraidOf(wolf);   //true
        babyJo.IsAffraidOf(cat);    //false

        var babySam = new Baby();
        babySam.AddAnimalToScaryList(wolf);
        babySam.AddAnimalToScaryList(cat);
        babySam.IsAffraidOf(wolf);   //true
        babySam.IsAffraidOf(cat);    //true

        var babyBob = new Baby();
        babyBob.IsAffraidOf(wolf);   //false
        babyBob.IsAffraidOf(cat);    //false
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T18:02:19.017

另一种选择是为您的动物添加功能。

```
public class Animal
{
    public virtual bool EatsSmallChildren { get { return false; } }
} 
```

然后你的宝宝可以检查动物是否害怕而不是宝宝是否害怕它。

这给你的动物类增加了负担，并引入了一些概念上的耦合，但也非常简单，易于理解和维护。

# java - Hibernate注解继承OneToMany Placemant

> ID：10261207
> 
> 赞同：0
> 
> 时间：2012-04-21T17:11:37.793
> 
> 标签：java, inheritance, hibernate-annotations

需要帮助在 Hibernate 继承中实现此场景

Cow 和 Dog 都继承 Animal 类，
Cow 和 Dog 都有“后代”列表
Cow 有额外的列表 - 每月疫苗日期
这种 Hibernate 表示是否正确？
将 OneToMany 疫苗列表放在 Cow 类上是否正确，
或者它需要放在 Animal 类上？
谢谢！

```
@Entity
@Table(name = "animals")
@DiscriminatorColumn(name="animal_type")
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
public abstract class Animal{

 @Id
 @Column(name = "animalId" ,nullable = false)
 private String animalId;

 @OneToMany(cascade=CascadeType.ALL)
 private List<Animal> offsprings = new ArrayList<Animal>();

public List<Animal> getOffsprings() {
    return offsprings;
}

...
}

@Entity
@DiscriminatorValue("COW")
public class Coe extends Animal {

@OneToMany(cascade=CascadeType.ALL)
 **private List<Vaccine> vaccine = new ArrayList<Vaccine>();**

}

@Entity
@DiscriminatorValue("DOG")
public class Dog extends Animal {
    private chipId;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:33:17.083

您需要将它放在牛类中，因为在您的情况下，它是牛而不是狗的特定属性。

然而，这两个实体都存储在一个表中。这意味着在数据库中，也没有什么可以阻止狗接种疫苗。

如果你有更多的属性，比如疫苗，属于牛而不是狗，我会重新考虑我的继承策略。

# codeigniter - 使用 codeigniter 2.1.0 自动加载学说 2

> ID：10261208
> 
> 赞同：0
> 
> 时间：2012-04-21T17:11:44.547
> 
> 标签：codeigniter, doctrine-orm

我在使用 codeigniter 2.1.0 自动加载学说 2 时遇到问题，我正在关注本教程 [http://www.phpandstuff.com/articles/codeigniter-doctrine-from-scratch-day-1-install-and -setup](http://www.phpandstuff.com/articles/codeigniter-doctrine-from-scratch-day-1-install-and-setup) 我应该打开 autoload.php 文件并像这样加载学说：

```
$autoload['plugin'] = array('doctrine'); 
```

但问题是没有 $autoload['plugin'] = array(); 在我的 autoload.php

那么如何加载学说呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:35:16.877

那篇 phpandstuff 文章太旧了，不适合学说 1。将此用于 CI2 和 Doctrine2 [https://github.com/rubensarrio/codeigniter-hmvc-doctrine](https://github.com/rubensarrio/codeigniter-hmvc-doctrine)

您需要设置一个库类并设置学说类加载器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:38:35.020

如果我是对的，因为`CodeIgniter`插件的 2.0 版已被删除并添加了几乎相同的帮助程序类。
我认为您应该将您`plugin`的转换为`helper`：

`yourplugin_pi.php`=>`yournewhelper_helper.php`

然后您可以将其添加到辅助部分的自动加载文件中：

[http://codeigniter.com/user_guide/installation/upgrade_200.html](http://codeigniter.com/user_guide/installation/upgrade_200.html)

# android - Android中的RadioButton输出

> ID：10261215
> 
> 赞同：0
> 
> 时间：2012-04-21T17:12:38.433
> 
> 标签：android, database

我正在开发一个安卓应用程序。我的应用程序应该使用CalculateCalories() 方法根据年龄、体重、身高和性别计算卡路里数量，并将所有值存储在数据库中。

该应用程序适用于男性，但对于女性，它总是给我 0.0 ！

这是一段代码。

```
 public class ProfileActivity extends Activity {

DatabaseAdapter usertable = new DatabaseAdapter(this);
User user = new User();
RadioButton rb_male;
RadioButton rb_female;
RadioButton rb_light;
RadioButton rb_moderate;
RadioButton rb_heavy;
EditText name;
EditText age,weight,height;

String gender;
String level;
float bmr, calnum;

String finalGender;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.createprofile);

    rb_male = (RadioButton) findViewById(R.id.maleradiobutton);
    // String male = rb_male.getText().toString();

    rb_female = (RadioButton) findViewById(R.id.femaleradiobutton);
    // String female = rb_female.getText().toString();

    rb_light = (RadioButton) findViewById(R.id.lightradiobutton);
    rb_moderate = (RadioButton) findViewById(R.id.moderateradiobutton);
    rb_heavy = (RadioButton) findViewById(R.id.heavyradiobutton);

    Button addUser = (Button) findViewById(R.id.checkcreateprofilebutton);

    Button gendercheck = (Button) findViewById(R.id.gendercheck);

    gendercheck.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            if (rb_male.isChecked()) {
                gender = "male";
            }
            if (rb_female.isChecked()) {
                gender = "female";
            }
            Toast.makeText(ProfileActivity.this, (CharSequence) gender,
                    Toast.LENGTH_LONG).show();

        }
    });

    Button checkactivity = (Button) findViewById(R.id.checkactivity);
    checkactivity.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            if (rb_light.isChecked()) {
                level = "light";
            }
            if (rb_moderate.isChecked()) {
                level = "moderate";
            }
            if (rb_heavy.isChecked()) {
                level = "heavy";
            }

            Toast.makeText(ProfileActivity.this, (CharSequence) level,
                    Toast.LENGTH_LONG).show();
        }
    });
    addUser.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

             name = (EditText) findViewById(R.id.namefield);
             age = (EditText) findViewById(R.id.agefield);
            int Age=Integer.parseInt(age.getText().toString());

             weight = (EditText) findViewById(R.id.weightfield);
             int Weight=Integer.parseInt(weight.getText().toString());

             height = (EditText) findViewById(R.id.heightfield);
             int Height = Integer.parseInt(height.getText().toString());

            float calnumber =calculateCalories(Age,Weight,Height,level);

            Log.d("test", "adding");

             name = (EditText) findViewById(R.id.namefield);
             age = (EditText) findViewById(R.id.agefield);
             weight = (EditText) findViewById(R.id.weightfield);
             height = (EditText) findViewById(R.id.heightfield);

            usertable.open();
            long id = usertable.createUser(name.getText().toString(), age
                    .getText().toString(), gender, weight.getText()
                    .toString(), height.getText().toString(), level,calnumber);

            String newId = String.valueOf(id);

            Toast.makeText(ProfileActivity.this, "user added",
                    Toast.LENGTH_LONG).show();

            Toast.makeText(ProfileActivity.this, newId, Toast.LENGTH_LONG)
                    .show();

            // Cursor c = usertable.getUser(17);
            // if (c.moveToFirst())
            // {
            // Toast.makeText(ProfileActivity.this, "name:"+ c.getString(1)+
            // "age"+c.getString(2), Toast.LENGTH_LONG).show();
            // }

            usertable.close();

            Intent Filling = new Intent();
            Filling.setClass(ProfileActivity.this, FillingActivity.class);
            startActivity(Filling);

        }
    });

}

public float calculateCalories(int age, int weight, int height, String level) {

    if (rb_male.isChecked()) {

         bmr = 66.5f + (13.75f * weight) + (5.003f * height)
                - (6.755f * age);

        if (rb_light.isChecked()) {
            calnum = bmr * 1.375f;
        }
        if (rb_moderate.isChecked()) {
            calnum = bmr * 1.55f;
        }
        if (rb_heavy.isChecked()) {
            calnum = bmr * 1.725f;
        }
        if (rb_female.isChecked()) {

            bmr = 665 + (9.563f * weight) + (1.850f * height)
                    - (4.676f * age);

            if (rb_light.isChecked()) {
                calnum = bmr * 1.375f;
            }
            if (rb_moderate.isChecked()) {
                calnum = bmr * 1.55f;
            }
            if (rb_heavy.isChecked()) {
                calnum = bmr * 1.725f;
            }

        }
    }
    return calnum;

}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:19:14.623

究竟是什么令人惊讶？

这段代码：

```
 if (rb_female.isChecked()) {

        bmr = 665 + (9.563f * weight) + (1.850f * height)
                - (4.676f * age);

        if (rb_light.isChecked()) {
            calnum = bmr * 1.375f;
        }
        if (rb_moderate.isChecked()) {
            calnum = bmr * 1.55f;
        }
        if (rb_heavy.isChecked()) {
            calnum = bmr * 1.725f;
        }

    } 
```

放置在此检查中：

```
if (rb_male.isChecked()) { 
```

所以它永远不会被执行。重组你的`if/else`.

# windows - Windows中的“显式锁定”文件系统是什么意思，我该如何在我的程序中做到这一点？

> ID：10261218
> 
> 赞同：0
> 
> 时间：2012-04-21T17:12:56.607
> 
> 标签：windows, filesystems, windows-vista

这篇关于 Vista 中新的安全特性[http://msdn.microsoft.com/en-us/library/windows/hardware/ff551353%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551353%28v=vs.85%29.aspx)的文章说“磁盘句柄上的写操作将成功，如果: .... 正在写入的扇区属于已挂载的文件系统，该文件系统被明确锁定“

Windows 文件系统被“显式锁定”是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:36:13.323

这意味着您打开卷 ( )，并使用[FSCTL_LOCK_VOLUME](http://msdn.microsoft.com/en-us/library/aa364575%28v=vs.85%29.aspx)控制代码`CreateFile`锁定它。您只能对非系统卷执行此操作

# android - Android Manifest - 如何指定 4 个差异图像文件以及将它们放在应用程序中的什么位置？

> ID：10261219
> 
> 赞同：0
> 
> 时间：2012-04-21T17:13:01.987
> 
> 标签：android

我正在查看这些 Android 说明：http: [//developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size)

我制作了 4 种图像尺寸，但如何在 Android 清单文件中指定它们？我在代码库中的什么位置放置图像？

到目前为止我有这个

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
                android:theme="@style/CustomTheme" > 
```

但不确定如何指定启动图标的具体大小以及何时需要显示。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:16:30.253

你不需要在清单文件上写任何东西。您需要将图像放在相关的可绘制文件夹中，例如：

```
res\drawable-hdpi\ic_launcher.png 
res\drawable-mdpi\ic_launcher.png  
res\drawable-ldpi\ic_launcher.png 
res\drawable-xhdpi\ic_launcher.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:17:53.563

您必须将图像放在文件夹 res/drawable-hdpi、res/drawable-ldpi、res/drawable-mdpi 中，并在 Android Manifest 的以下代码中将名称“icon”更改为 your_name。

```
 <application android:icon="@drawable/icon" android:label="@string/app_name"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T17:17:36.663

您不必在`Manifest`File 中指定它，将它们放在和文件夹中`drawable-hdpi`，具体取决于分辨率，您可以再创建一个文件夹来支持新的高密度屏幕，例如 Google Nexus`drawable-mdpi``drawable-ldpi``drawable-xhdpi`

# delphi - 使用 tponguard 的 OgProtectExe

> ID：10261227
> 
> 赞同：0
> 
> 时间：2012-04-21T17:14:58.743
> 
> 标签：delphi, delphi-7

谁能给我看一个如何使用这个组件的简单例子。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:01:01.157

在您的应用程序（您想通过嵌入 CRC 来保护的应用程序）中，删除一个`OgProtectExe`组件。使用`Object Inspector`为其单个事件添加处理程序（`OnChecked`如果我没记错的话）。处理程序应包含如下内容：

```
procedure TForm1.OgProtectExe1Checked(Sender: TObject; Status: TExeStatus);
begin
  if (Status <> exeSuccess) then // CRC changed
    // Handle modified executable
end; 
```

可能`TExeStatus`的值为：

```
exeSuccess         - CRC is OK
exeSizeError       - File size has changed
exeIntegrityError  - CRC doesn't match
exeNotStamped      - Executable not stamped 
```

像往常一样构建您的应用程序。使用`StampExe`（从 OnGuard`examples\Delphi`文件夹中）用 CRC 标记您的可执行文件（或编写您自己的应用程序调用该`OgProExe`单元的`ProtectExe`函数来标记它）。

`ProtectExe`接受两个参数 - 要保护的可执行文件的完整路径和文件名，以及一个布尔值，指示它是否应该在保护后删除它的特殊标记。`True`除非您希望以后能够取消对可执行文件的保护，否则您应该通过。

```
uses
  OgProExe;

...
if ProtectExe(YourExeName, EraseMarker) then  // executable stamped 
```

# wcf - WCF 使用数据库验证客户端

> ID：10261228
> 
> 赞同：4
> 
> 时间：2012-04-21T17:14:58.540
> 
> 标签：wcf, authentication

我有一个应该为多个客户提供服务的 WCF 服务。

WCF 将有一个与数据库通信的数据访问层。

这是我设计理念的一部分：[我的设计](http://s15.postimage.org/apxri7mw9/Design_Idea.png)

[![我的设计](../Images/0fb2a86c81e88b46c1ed0a0645b405b0.png)](https://i.stack.imgur.com/FBJ56.png)

如您所见 - 每个客户端都将连接到第一个 WCF 服务以获取信息（获取产品、更新产品），并以 pub\sub 方式连接到第二个 WCF 服务，因此它将能够接收有关不同事物的通知它想要。

我在数据库中有一个“用户”表，其中包含系统中的所有用户。（有管理员、普通用户和技术人员）。

我的问题是 - 我如何从客户端“登录”到数据库？

我目前的想法 - 在服务中有一个名为**“连接（用户名，密码）”的**功能，当客户端连接时 - 它将传递用户名和密码以在数据库中进行身份验证，并且只有经过身份验证 - 客户端才会开始发送命令.

问题是 - 任何人都可以编写自己的客户端来连接到我的服务并运行其他功能而无需进行身份验证。无论客户端是否经过身份验证，我都可以通过保存服务来解决这个问题。

但是有没有更好的解决方案，只是在服务中具有“连接”功能？

希望有一些简单而有效的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:21:06.577

`UserNamePasswordValidator`您应该创建一个从抽象类派生并实现该`Validate()`方法的自定义用户名和密码验证器。然后，您可以根据需要验证提供的用户名和密码。要了解有关设置的更多信息，请阅读[本文](http://msdn.microsoft.com/en-us/library/aa702565.aspx)。

# iphone - cocos2d-iphone popScene：不完整的事件

> ID：10261233
> 
> 赞同：0
> 
> 时间：2012-04-21T17:16:17.043
> 
> 标签：iphone, ios, cocos2d-iphone

所以我正在使用 cocos2d 开发一个 iPhone 游戏。

我正在使用 pushScene 从我的游戏场景过渡到主菜单场景，因为我希望玩家能够选择从主菜单恢复游戏。如果他们确实选择恢复，我会使用 popScene。

问题似乎是，如果在游戏场景被推送时事件“不完整”，当场景被弹出时，这些事件不会完成。更糟糕的是，他们会在现场留下无法自行清除的伪影。

示例：粒子爆炸效果（粒子被“冻结”并且不按设计消散），精灵淡出效果（精灵在一定的透明度下保持可见）。

我想我本以为 popScene 会完全按照场景被推送时的状态恢复场景，但它似乎是“放弃”当前正在运行的动作。

我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:18:45.900

我建议您将游戏层和主菜单层都添加到与`CCScene`children 相同的位置，而不是使用`pushScene`and `popScene`。当您需要显示菜单时，更改图层的可见性并暂停游戏图层中的所有内容。您可以尝试以下方法以递归方式暂停/恢复游戏层的活动：

```
- (void)pauseSchedulerAndActionsRecursive:(CCNode *)node {
    [node pauseSchedulerAndActions];
    for (CCNode *child in [node children]) {
        [self pauseSchedulerAndActionsRecursive:child];
    }
}

- (void)resumeSchedulerAndActionsRecursive:(CCNode *)node {
    [node resumeSchedulerAndActions];
    for (CCNode *child in [node children]) {
        [self resumeSchedulerAndActionsRecursive:child];
    }
} 
```

调用类似的东西：

```
[self pauseSchedulerAndActionsRecursive:gamePlayLayer]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T09:11:12.997

我使用了 Hailei 的代码，但创建了一个适合我的类别。

**CCNode+additions.h**

```
#import "CCNode.h"

@interface CCNode (additions)
-(void)pauseSchedulerAndActionsRecursive;
-(void)resumeSchedulerAndActionsRecursive;
@end 
```

**CCNode+additions.m**

```
#import "CCNode+additions.h"

@implementation CCNode (additions)
-(void)pauseSchedulerAndActionsRecursive {
    [self pauseSchedulerAndActions];
    for (CCNode *child in [self children]) {
        [child pauseSchedulerAndActionsRecursive];
    }
}
-(void)resumeSchedulerAndActionsRecursive {
    [self resumeSchedulerAndActions];
    for (CCNode *child in [self children]) {
        [child resumeSchedulerAndActionsRecursive];
    }
}
@end 
```

因此，暂停时，请先在游戏节点上调用 pauseSchedulerAndActionsRecursive，*然后再将*“暂停菜单节点”添加到游戏节点（否则暂停节点也会暂停，因此无法使用）。

# asp.net - Sql 区分大小写

> ID：10261241
> 
> 赞同：1
> 
> 时间：2012-04-21T17:17:13.733
> 
> 标签：asp.net, sql, case-sensitive

我正在使用 ASP.net 开发一个 Web 应用程序，在我的应用程序的登录页面中，我正在使用数据库中的值检查给定的用户名和密码，实际上我`username`的 is`"Admin"`和`password`is`"Password"`但如果我给出`"admin" as username`and `"password" as password`，它会接受用户名和密码。

我希望密码应该区分大小写。当我通过互联网时，我得到了一些点，比如更改`Collation`.....`CI(CaseInsensitive) to CS(Case Sensitive)`我认为这是针对整个数据库的......我不喜欢为整个数据库设置这个，我喜欢只检查用户名和密码..

有没有可能，谁能帮帮我...

我想像

```
DataObject.Entities dataEntities=new DataObject.Entities();
DataObject.Users user=dataEntities.Users.Where(u=>u.UserName==UserName && u.Password==Password);

if(user != null)
// link to home page.
else
//login failed. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:23:17.537

尝试使用以下内容：

```
select username, password from users collate SQL_Latin1_General_Cp1_CS_AS 
```

如评论中所述，您不应以纯文本形式存储密码。为什么不使用开箱即用的 sql 成员资格提供程序？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T17:25:45.553

你为什么要在数据库中这样做？密码在数据库中不应为纯文本，出于安全原因应加密。查询出密码，然后解密并在应用程序中进行比较......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T17:26:02.357

听起来你做错了什么可怕的事情。如果您对密码使用了不错的加密散列函数，那么这根本不是问题。

当您存储密码时，您应该对它们进行哈希处理并将哈希值保存到数据库 -**而不是**实际密码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-21T17:27:08.143

Xander 的回答解释了如何进行不区分大小写的比较。

但是，您真的不应该在数据库中存储明文密码。相反，存储密码的哈希值。SQL Server 提供了`HashBytes`辅助功能：

```
select HashBytes('SHA1', 'YourPassword'); 
```

有关更长的解释，请参[见此答案](https://stackoverflow.com/questions/876342/storing-passwords-in-sql-server)。

# java - JPQL：选择属性可以为空的对象

> ID：10261242
> 
> 赞同：0
> 
> 时间：2012-04-21T17:17:34.933
> 
> 标签：java, hibernate, java-ee-6, jpql

这是我的实体定义：

```
@EmbeddedId
private TeacherPK id;

//bi-directional many-to-one association to Exam
@OneToMany(mappedBy="teacher", fetch=FetchType.LAZY)
private List<Exam> exams;

//bi-directional many-to-one association to Subject
@ManyToOne(fetch=FetchType.EAGER)
@JoinColumn(name="fkSubject", nullable=false, insertable=false, updatable=false)
private Subject subject;

//bi-directional many-to-one association to Professor
@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="fkProfessor1", referencedColumnName = "idProfessor", nullable=false, insertable=false, updatable=false)
private Professor professor1;

//bi-directional many-to-one association to Professor
@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="fkProfessor2", referencedColumnName = "idProfessor")
private Professor professor2;

//bi-directional many-to-one association to Professor
@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="fkProfessor3", referencedColumnName = "idProfessor")
private Professor professor3; 
```

现在我想获取所有有professor1.id、professor2.id 或professor3.id 等于指定id 的老师：

```
public List<Teacher> getTeacherByProfessor(Professor professor) {
    Query query = em.createQuery("SELECT teacher FROM Teacher teacher WHERE teacher.professor1.idProfessor=:idProfessor OR " +
            "(teacher.professor2 IS NOT NULL AND teacher.professor2.idProfessor=:idProfessor) OR (teacher.professor3 IS NOT NULL AND teacher.professor3.idProfessor=:idProfessor)");
    query.setParameter("idProfessor", professor.getIdProfessor());

    return (List<Teacher>) query.getResultList();
} 
```

但是当我执行这个方法时，我只得到定义了所有三个教授的对象。如果professor3 为空，则该对象不包含在结果中。从实体定义可以看出，只有professor1不能为NULL。

**编辑：**

基本上我想用 JPQL 语句来做这个 SQL 语句（例如设置 7）

```
SELECT * FROM Teacher WHERE fkProfessor1 = 7 OR fkProfessor2 = 7 OR fkProfessor3 = 7 
```

# python - matplotlib x 轴格式

> ID：10261244
> 
> 赞同：0
> 
> 时间：2012-04-21T17:17:37.493
> 
> 标签：python, wxpython, matplotlib, wxwidgets

我正在尝试编辑一个我发现将 mataplot 嵌入 wx 框架的示例。

当我执行代码时，它可以工作： - 从 CSV 中读取包含日期、每行频率的数据（例如“2009-01-10, 100”） - 在 wx 框架中正确绘制图表。

但是，我试图弄清楚如何使 x 轴显示来自 csv 数据的日期而不是 1、2、4、5、6 .. 我能够在我使用的另一个 python 程序中正确地做到这一点：

`plt.xticks(range(len(dates)), (dates), rotation=45)`

但无法弄清楚如何在这里做类似的事情..

```
#!/usr/bin/env python
"""
An example of how to use wx or wxagg in an application with the new
toolbar - comment out the setA_toolbar line for no toolbar
"""

# Used to guarantee to use at least Wx2.8
import wxversion
wxversion.ensureMinimal('2.8')
import csv
from numpy import arange, sin, pi

import matplotlib

# uncomment the following to use wx rather than wxagg
#matplotlib.use('WX')
#from matplotlib.backends.backend_wx import FigureCanvasWx as FigureCanvas

# comment out the following to use wx rather than wxagg
matplotlib.use('WXAgg')
from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigureCanvas

from matplotlib.backends.backend_wx import NavigationToolbar2Wx

from matplotlib.figure import Figure

import wx

class CanvasFrame(wx.Frame):

    def __init__(self):
        wx.Frame.__init__(self,None,-1,
                         'CanvasFrame',size=(550,350))

        self.SetBackgroundColour(wx.NamedColor("WHITE"))

        self.figure = Figure()

        with open('c:\\charts.csv', 'rb') as n:
            reader = csv.reader(n)
            dates = []
            freq = []
            for row in reader:
                values = row[0].split(',')
                dates.append(values[0])
                freq.append(values[1])

        self.axes = self.figure.add_subplot(111)

        false_x = [x for x in range(len(dates))]
        self.axes.plot(false_x,freq, 'o-')
        ##self.axes.plot(t,s)
       # self.axes.plot.xticks(range(len(dates)), (dates), rotation=45)
        self.canvas = FigureCanvas(self, -1, self.figure)

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
        self.SetSizer(self.sizer)
        self.Fit()

        self.add_toolbar()  # comment this out for no toolbar

    def add_toolbar(self):
        self.toolbar = NavigationToolbar2Wx(self.canvas)
        self.toolbar.Realize()
        if wx.Platform == '__WXMAC__':
            # Mac platform (OSX 10.3, MacPython) does not seem to cope with
            # having a toolbar in a sizer. This work-around gets the buttons
            # back, but at the expense of having the toolbar at the top
            self.SetToolBar(self.toolbar)
        else:
            # On Windows platform, default window size is incorrect, so set
            # toolbar width to figure width.
            tw, th = self.toolbar.GetSizeTuple()
            fw, fh = self.canvas.GetSizeTuple()
            # By adding toolbar in sizer, we are able to put it at the bottom
            # of the frame - so appearance is closer to GTK version.
            # As noted above, doesn't work for Mac.
            self.toolbar.SetSize(wx.Size(fw, th))
            self.sizer.Add(self.toolbar, 0, wx.LEFT | wx.EXPAND)
        # update the axes menu on the toolbar
        self.toolbar.update()

    def OnPaint(self, event):
        self.canvas.draw()

class App(wx.App):

    def OnInit(self):
        'Create the main window and insert the custom frame'
        frame = CanvasFrame()
        frame.Show(True)

        return True

app = App(0)
app.MainLoop() 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:57:10.347

这是 xticks() 的代码：

```
def xticks(*args, **kwargs):
    ax = gca()

    if len(args)==0:
        locs = ax.get_xticks()
        labels = ax.get_xticklabels()
    elif len(args)==1:
        locs = ax.set_xticks(args[0])
        labels = ax.get_xticklabels()
    elif len(args)==2:
        locs = ax.set_xticks(args[0])
        labels = ax.set_xticklabels(args[1], **kwargs)
    else: raise TypeError('Illegal number of arguments to xticks')
    if len(kwargs):
        for l in labels:
            l.update(kwargs)

    draw_if_interactive()
    return locs, silent_list('Text xticklabel', labels) 
```

你这样称呼它：

```
plt.xticks(range(len(dates)), (dates), rotation=45) 
```

因此您可以使用 xticks() 中处理`len(args)==2`. 在代码中调用后添加以下两行`self.axes.plot(...)`：

```
self.axes.set_xticks(range(len(dates)))
self.axes.set_xticklabels(dates, rotation=45) 
```

# asp.net - 推荐平台的推理引擎

> ID：10261253
> 
> 赞同：1
> 
> 时间：2012-04-21T17:19:01.903
> 
> 标签：asp.net, database, rule-engine

我正在寻找一些关于我目前正在从事的项目的建议。我需要将一些用户输入（标准）与数据库中的条目进行匹配。我想我可能应该使用规则引擎来评估输入作为一组针对其知识库的命题，在这种情况下应该是数据库本身。该项目正在 ASP.NET 中开发，我想知道我是否走在正确的道路上。我应该尝试使用 Windows Workflow Foundation 规则引擎或 NxBRE 之类的方法来实现这一目标吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:36:00.543

是的，您可以尝试 WWF 规则引擎。还可以查看 IBM ILOG Jrules 以了解 .net 技术。它现在越来越受欢迎。当您在 .net 平台上工作时，不能推荐 Drools，尽管它是最好的解决方案。

# iphone - Xcode：如何轻松地将我的 Int 值从 UIview 传递到下一个 UIViewcontroller？

> ID：10261258
> 
> 赞同：0
> 
> 时间：2012-04-21T17:19:31.210
> 
> 标签：iphone, xcode, view, int

在我的 UIView“Fråga”中，您会收到问题，20 个问题后您会收到一个名为“ratta”的按钮。当您点击“ratta”时，该应用程序将计算您获得了多少正确答案并将其存储在整数“antalratt”中。此外，当您点击 ratta 按钮时，您应该被重定向到一个名为“Rattning”的 UIViewController。“Rattning”中有一个标签叫做ratttext！我希望标签 ratttext 显示 antalratt 的值！我在“Rattning”中有一个整数叫做antratt，可以用来收集之前视图的值！

摘要：Fråga 是第一个视图，其中计算了 antalratt。Rattning 是第二个视图控制器，应该转移 antalratt。那里应该接antalratt的变量是antratt。

任何人都可以尝试描述我应该做什么，非常详细吗？就像我必须 #import 和 where 等的一切：P 我对 obj-c 很陌生，所以尽量让它简单；）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:31:28.140

要从一个视图转到另一个视图，您可以使用导航控制器。打开您的 AppDelagate.m（或任何您称为委托文件的文件）并找到以下函数：

```
 -(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

并添加此代码

```
Fraga *fraga=[[Fraga alloc] init];
UINavigationController *navController=[[UINavigationController alloc] initWithRootViewController:fraga];
self.window.rootViewController=navController; 
```

现在在您的 Fraga.m 文件中导入 rattning.h 并创建一个函数结果（例如），如下所示：

```
- (IBAction)result:(id)sender {
      Rattning *rattning = [[Rattning alloc] initWithNibName:@"RattningView" bundle:nil];
      // RattningView must be the name of your view or nib file
      rattning.antratt=self.antalratt;
      [self.navigationController pushViewController:rattning animated:YES];
} 
```

然后将此函数链接到一个按钮。在你的 Ratning.m 文件中，找到 viewDidLoad 函数并添加

```
 ratttext.text=[[NSString alloc] initWithFormat:@"%d", self.antratt]; 
```

假设您已经准备好两个视图，我已经回答了。如果是，那么它应该可以工作。

# android - ScrollView 中的 WebView 和 ListView

> ID：10261259
> 
> 赞同：1
> 
> 时间：2012-04-21T17:19:41.923
> 
> 标签：android, listview, webview, scrollview

我有 webview 和 listview。可能是不同的情况。WebView 可以为空或具有长字符串数据。还有listview：空行或大计数行。我想在 webview 上查看数据。向下滚动。在 webview 之后，我想查看 listview 的所有数据。我这样做：滚动视图 - 线性布局 - WebView - ListView。

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

 <WebView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
</WebView>

 <ListView
    android:layout_width="fill_parent"
    android:layout_weight="1"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout>
</ScrollView> 
```

我看到webview正常。但我看到 listview 的尺寸很短。任何原因：webview 为空或有数据，listview 很快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:27:27.340

多谢你们。

我将带有数据的列表视图删除到另一个活动。

# qt - QToolbar 在第二次调用 show / setVisible(true) 之前不可见

> ID：10261262
> 
> 赞同：0
> 
> 时间：2012-04-21T17:20:00.233
> 
> 标签：qt, qtoolbar

我面临着某种谜团：

```
if( itemSelectionne->parentItem()->type() == NodeType) {

    ((GraphicsScene*) this->scene())->unselectAll();

    itemSelectionne->parentItem()->setSelected(true);

    //Coordinate of my toolbar, works fine 
    int centreX = itemSelectionne->pos().x() + 
            itemSelectionne->boundingRect().center().x();
    int centreY = itemSelectionne->pos().y() + 
            itemSelectionne->boundingRect().center().y();

    QPointF point = this->mapFromScene(
        itemSelectionne->mapToScene(QPoint(centreX, centreY))
    );

    _nm.move(point.x(), point.y());
    _nm.show((GraphicsNodeItem*) itemSelectionne->parentItem());
} 
```

鼠标单击 QGraphicsView 后，我输入这段代码以显示我的 QToolbar（_nm 是一个自定义对象，包含 2 个 QToolbar。Show(...) 调用 QToolbar 上的 show() ）我第一次进入如果并调用 show() QToolbar 不会出现。但它会在第二次点击和之后的每一次点击时出现。

知道它可能来自哪里吗？

谢谢

编辑：这是我在自定义类中调用的函数。_currentNode 是一个指向自定义 QGraphicsItemGroup 子类的指针。

```
void NodeMenu::show(GraphicsNodeItem * node) {
_currentNode = node;

_menuTop.show();
_menuBottom.show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:48:39.943

找到了解决方案：

我在自定义对象的构造函数中添加了以下内容：

```
_menuTop.show();
_menuBottom.show(); 
```

我不知道这是否是一个好的解决方案，但它对我有用。

# qt4 - 在 QLabel 中显示 .gif 动画

> ID：10261265
> 
> 赞同：12
> 
> 时间：2012-04-21T17:20:09.593
> 
> 标签：qt4, pyqt4, animated-gif

我想在`QLabel`小部件中显示 .gif 动画以及文本。

以下代码将不起作用：

```
self.status_txt = QtGui.QLabel('Loading... <img src="etc/loading.gif">') 
```

因为图像不会动画。

我尝试通过使用一个`QMovie`对象来实现它：

```
self.status_txt = QtGui.QLabel("Loading...")
movie = QtGui.QMovie("etc/loading.gif")
self.status_txt.setMovie(movie)
movie.start() 
```

但是我不能把动画和文字放在一起。除了使用两个不同的标签之外，还有不同的解决方案吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-23T10:37:21.260

您可以将布局添加到标签，然后添加另一个带有文本的标签...

```
self.status_txt = QtGui.QLabel()
movie = QtGui.QMovie("etc/loading.gif")
self.status_txt.setMovie(movie)
movie.start()
self.status_txt.setLayout(QtGui.QHBoxLayout())
self.status_txt.layout().addWidget(QLabel('Loading...')) 
```

*编辑*：

如果您使用自己的 QLabel 版本和 QPainter 自己绘制文本，则可以：

```
from PyQt4.QtCore import QSize
from PyQt4.QtGui import QApplication, QLabel, QMovie, QPainter, QFontMetrics

class QTextMovieLabel(QLabel):
    def __init__(self, text, fileName):
        QLabel.__init__(self)
        self._text = text
        m = QMovie(fileName)
        m.start()
        self.setMovie(m)

    def setMovie(self, movie):
        QLabel.setMovie(self, movie)
        s=movie.currentImage().size()
        self._movieWidth = s.width()
        self._movieHeight = s.height()

    def paintEvent(self, evt):
        QLabel.paintEvent(self, evt)
        p = QPainter(self)
        p.setFont(self.font())
        x = self._movieWidth + 6
        y = (self.height() + p.fontMetrics().xHeight()) / 2
        p.drawText(x, y, self._text)
        p.end()

    def sizeHint(self):
        fm = QFontMetrics(self.font())
        return QSize(self._movieWidth + 6 + fm.width(self._text),
                self._movieHeight)

    def setText(self, text):
        self._text = text

if __name__ == '__main__':
    import sys
    app = QApplication(sys.argv)
    l = QTextMovieLabel('Loading...', 'loading.gif')
    l.show()
    app.exec_() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-31T21:23:52.820

简而言之，答案是：

```
movie = QtGui.QMovie('file.gif')
my_label.setMovie(movie)
movie.start() 
```

请注意，这种情况下的 import 语句是`from PyQt5 import QtCore, QtGui, QtWidgets`Qt Designer 生成的默认语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T09:58:42.997

我发现不可能为这项工作使用相同的小部件。必须使用两个不同的 QLabel。

# iphone - 如何制作 iOS 计算器，仅使用 UITextField

> ID：10261268
> 
> 赞同：3
> 
> 时间：2012-04-21T17:20:39.973
> 
> 标签：iphone, objective-c, ios, xcode, uitextfield

我正在寻找创建一个 iOS 计算器，只需使用 UITextField。例如，例如；有人可能会在 UITextField 中输入“6 - 3 x 2”，然后点击“完成”或“开始”等。这将计算答案并将其显示在 UIAlertView 中。

因此，首先我认为 UITextField 文本必须分成不同的部分，因此 '6' '-' '3' '*' '2' 将是来自 UITextField 文本输入的分隔字符串。我将如何像上面提到的那样分离文本？

然后我如何使用这些信息来计算答案并显示它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T17:22:39.800

使用 GCMathParser [http://apptree.net/parser.htm](http://apptree.net/parser.htm)

它接受一个 NSString 作为输入并为你评估它。

正如 Danh 所说，您也可以使用 DDMathParser [https://github.com/davedelong/DDMathParser](https://github.com/davedelong/DDMathParser)

一个例子（来自文档）

```
NSString* mathstring = @"tan(dtor(45))";
double result = [mathstring evaluateMath];    // returns 0.999999999999... 
```

因此，您只需向`evaluateMath`要解析的 NSString 发送消息。就是这样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:51:26.630

你也可以这样使用 NSPredicate ：

```
NSPredicate * parsed = [NSPredicate predicateWithFormat:@"22/7.0 + (13*42) - 1024 = 0"];
NSExpression * left = [(NSComparisonPredicate *)parsed leftExpression];
NSNumber * result = [left expressionValueWithObject:nil context:nil];
NSLog(@"result: %@", result); 
```

但我不确定 tan 之类的功能。更多信息[在这里](http://funwithobjc.tumblr.com/post/1553469975/abusing-nspredicate)。

# php - mysql_real_escape_string 与 php 中的单例数据库？

> ID：10261270
> 
> 赞同：1
> 
> 时间：2012-04-21T17:20:54.777
> 
> 标签：php, mysql, database

我在使用数据库函数的 php 页面上收到以下错误：

> 警告：mysql_real_escape_string() [function.mysql-real-escape-string]：用户'apache'@'localhost'的访问被拒绝

我知道我必须与我的数据库建立有效的连接，但这是“问题”。连接到我的数据库的类如下所示：

```
class Database
{
    private static $instance = null;
    private static $conn;

    private function __construct()
    {
        try {
            self::$conn = new mysqli('localhost', 'root', 'user', 'database');
        } catch (Exception $ex) {
            $errorpager = new CustomPageGenerator();
            $errorpager->generateErrorPage("Connection to database failed. Please try again later.");
        }
    }

    public static function getInstance()
    {
        try {
            if (self::$instance == null) {
                self::$instance = new Database();
            }
            return self::$instance;
        } catch (Exception $ex) {
            $errorpager = new CustomPageGenerator();
            $errorpager->generateErrorPage("Connection to database failed. Please try again later.");
            return false;
        }
    }

    public function query($sql)
    {
        try {
            return self::$conn->query($sql);
        } catch (Exception $ex) {
            $errorpager = new CustomPageGenerator();
            $errorpager->generateErrorPage("Connection to database failed. Please try again later.");
            return false;
        }
    }
} 
```

如您所见，我为此使用了单例模式。但即使我放了一个

```
Database::getInstance(); 
```

在我的代码一开始打开连接时，我不断收到此错误。如何正确打开连接以便可以使用 mysql_real_escape_string() 函数？

谢谢。

**这是修复**

将此函数添加到数据库类：

```
public static function getConnection()
{
    self::getInstance();
    return self::$conn;
} 
```

将每一个 mysql_real_escape_string( 替换为 mysqli_real_escape_string(Database::getConnection(),

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:33:03.850

我认为问题在于您正在使用`mysql_real_escape_string()`.

那来自与 不同的库`mysqli`，也许这就是没有连接的原因？

从[`mysql_real_escape_string`PHP 手册中的页面](http://php.net/manual/en/function.mysql-real-escape-string.php)：

> 字符串 mysql_real_escape_string ( 字符串 $unescaped_string [, 资源 $link_identifier = NULL ] )

这是第二个参数的定义，`$link_identifier`。

> MySQL 连接。如果未指定链接标识符，则假定由 mysql_connect() 打开的最后一个链接。如果没有找到这样的链接，它将尝试创建一个，就好像 mysql_connect() 没有参数被调用一样。如果未找到或建立连接，则会生成 E_WARNING 级别错误。

* * *

一个可能但有点丑陋的解决方案是在你的 db 单例中的 mysqli 实例上的 real_escape_string 方法中添加一个包装器。

```
public function escapeString($value){
    return $this->conn->real_escape_string($value);
} 
```

另一种选择可能是使用 mysqli 库的程序版本（虽然，我实际上并没有尝试看看你是否可以混合使用，但我认为你可以）：`mysqli_real_escape_string`

# symfony - 用于电子邮件和文件记录的 Symfony2 Monolog 设置

> ID：10261272
> 
> 赞同：6
> 
> 时间：2012-04-21T17:21:00.743
> 
> 标签：symfony, monolog

我想设置 Symfony2 向我发送一封`critical`错误电子邮件，但只是日志`error`级别的错误。以下设置会这样做吗？

```
monolog:
    handlers:
        main:
            type:         fingers_crossed
            action_level: error
            handler:      grouped
        grouped:
            type: group
            members: [filelog, mail]
        # log all errors to file
        filelog:
            type:         fingers_crossed
            action_level: error
            handler:      nested_stream
        nested_stream:
            type:  stream
            path:  "%kernel.logs_dir%/%kernel.environment%.log"
            level: debug
        # send me an email when we have a critical error
        mail:
            type:         fingers_crossed
            action_level: critical
            handler:      buffered
        buffered:
            type:    buffer
            handler: swift
        swift:
            type:       swift_mailer
            from_email: %mailer_sender%
            to_email:   %error_email%
            subject:    "[FeedStream Error]"
            level:      debug 
```

我看到了：[http](http://symfony.com/doc/current/cookbook/logging/monolog_email.html) ://symfony.com/doc/current/cookbook/logging/monolog_email.html但它根本无法处理`error`，这是我仍然想要日志（但没有电子邮件）的情况。我很确定我的配置会起作用，但我对独白设置知之甚少。请让我知道这是否正确或是否有更好的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-06T15:17:41.120

以下是我的生产独白配置。这已确认可以发送严重错误，同时将“错误”级别及更高级别记录到文件中。我还拆分了不同的通道来分隔文件。其他渠道产生的错误似乎远少于“请求”，因此对我来说将它们分开生产是有意义的。意识到这不是您的问题，但希望它对其他人有所帮助；这可以缩减以适应大多数要求。

```
monolog:
  handlers:
    main:
        level: error
        type: stream
        path: "%kernel.logs_dir%/%kernel.environment%_remaining.log"
        channels: ["!doctrine", "!request", "!security"]
    request:
        type: fingers_crossed
        handler: requests
        excluded_404s:
            - ^/phpmyadmin
    requests:
        type:    group
        members: [request_critical, request_error]
    request_critical:
        level: critical
        type: stream
        path: "%kernel.logs_dir%/%kernel.environment%_request_critical.log"
        channels: [request]
    request_error:
        level: error
        type: stream
        path: "%kernel.logs_dir%/%kernel.environment%_request.log"
        channels: [request]
    doctrine:
        level: error
        type: stream
        path: "%kernel.logs_dir%/%kernel.environment%_doctrine.log"
        channels: [doctrine]
    security:
        level: error
        type: stream
        path: "%kernel.logs_dir%/%kernel.environment%_security.log"
        channels: [security]
    mail:
        type: fingers_crossed
        action_level: critical
        handler: buffered
    buffered:
        type: buffer
        handler: swift
    swift:
        type: swift_mailer
        from_email: aj.cerqueti@example.com
        to_email:   aj.cerqueti@example.com
        subject:    A critical error occurred 
```

# datepicker - 制作一个持久的引导日期选择器

> ID：10261275
> 
> 赞同：2
> 
> 时间：2012-04-21T17:21:11.250
> 
> 标签：datepicker, twitter-bootstrap

我正在尝试使用其中之一： [http ://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

但是，我希望它成为主要元素，即始终显示，在单击远离时不隐藏，并且不显示它写入的元素。我找不到有关如何执行此操作的任何文档或示例。有任何想法吗？

如果可能的话，我想使用这个日期选择器，因为它是我在站点的其他区域（需要非持久选择器）使用的，并且希望保持一致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:35:31.637

```
 <input type="text" name="startdate" id="date" />
 <div class="date" data-altfield="#date"></div>

 $(function(){
     $('.date').each(function(i,e){
         var $d = $(this);
         $d.datepicker({
            altField: $d.data('altfield')
        });
     });
 }); 
```

在这里检查：http: [//jsfiddle.net/MDTXS/2/](http://jsfiddle.net/MDTXS/2/)

# iphone - 将对象添加到不同的视图并立即跟随手指

> ID：10261278
> 
> 赞同：0
> 
> 时间：2012-04-21T17:21:30.217
> 
> 标签：iphone, objective-c, ios, xcode

有没有办法将一个对象从一个视图添加到另一个视图并让对象立即跟随用户的手指。A`UIImageView`存在于 a`UIScrollView`中。您可以使用`UILongPressGestureRecognizer`将其从`UIScrollView`添加到整体视图中删除。

我想让 imageview 然后跟随主视图上的触摸。有`UIImageView`一个`UIPanGesture`控制运动。问题在于，在长按和平移之间，您必须抬起手指并重新点击屏幕。有没有办法将对象添加到主视图并让它已经跟随用户的手指而无需抬起手指？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:23:19.973

您可以通过捕获 UILongPressGestureRecognizer 的当前状态来检测长按后手指的移动。例如：

识别器声明：

```
UILongPressGestureRecognizer* Long = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressDetected:)]; 
```

方法实现：

```
-(void)longPressDetected:(UILongPressGestureRecognizer*)Long{

    switch ([Long state]) {
        case UIGestureRecognizerStatePossible:

            break;

        case UIGestureRecognizerStateBegan:

            NSLog(@"Got it!")l // Long press is successfully recognized
            break;

        case UIGestureRecognizerStateChanged:

            NSLog(@"Wow! Its moving!"); // finger position has changed

            break;

        case UIGestureRecognizerStateEnded:

        default:
            break;
    }
} 
```

# web-services - 不使用第三方网关进行支付

> ID：10261282
> 
> 赞同：1
> 
> 时间：2012-04-21T17:22:34.880
> 
> 标签：web-services, payment, credit-card

我想处理电子支付。我目前正在使用 PayPal，但它的成本太高了。许多公司能够在不使用网关的情况下提供电子支付。我想他们直接使用银行网络服务。

它是如何工作的？付款的受益人是否应该在该特定银行开户？例如“Pay with Square”是如何工作的？它是否实现对不同银行的调用？

是否存在任何文档？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:55:39.160

> 许多公司能够在不使用网关的情况下提供电子支付。我想他们直接使用银行网络服务。

这是不正确的。基本上所有处理信用卡的网站（包括 Square 等综合服务）都在使用支付网关。普通用户通常无法确定他们使用的是哪一个，因为支付网关的详细信息通常不会在任何地方公开。

请注意，PayPal 的 Express Checkout 网络前端**不是**网关。不过，PayFlow Pro 是。

客户的银行根本不会直接参与。典型的信用卡交易涉及许多不同的各方：

*   客户
*   商家（例如，您和您的网站）
*   支付网关（例如，带有 PayFlow Pro 的 PayPal）
*   支付处理器（通常是银行，但不一定是客户的银行）
*   信用卡发卡机构（Visa、Mastercard 等，可能与客户银行签订合同）

在所有这些方中，您将直接与之通信的一方是支付网关。其他一切都在幕后。

# android - 在两个活动之间传递值数组

> ID：10261285
> 
> 赞同：4
> 
> 时间：2012-04-21T17:22:43.013
> 
> 标签：android, android-intent

我在两个活动之间传递整数数组时遇到问题。我试过这段代码：

活动A：

```
Bundle myBundle = new Bundle(); 
myBundle.putIntArray("myarray", array);
startActivity(intent); 
```

活动B：

```
Bundle myBundle = getIntent().getExtras();
int[] myIntArray = myBundle.getIntArray("myarray"); 
```

我不明白为什么我不能在activityB 中使用数组值。你能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T17:26:27.117

活动 B：

```
Bundle bundle = getIntent().getExtras(); 
```

做你的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T18:17:10.757

您永远不会将捆绑包添加到 Activity A 中的 Intent。此外，由于您传递的是整数数组，因此您可以将它们直接添加到 Intent 中。像这样：

```
intent.putExtra("myarray", array);
startActivity(intent); 
```

然后您可以像这样在 Activity B 中轻松检索它：

```
int[] myIntArray = getIntent().getIntArrayExtra("myarray"); 
```

# c# - 向应用程序添加服务引用

> ID：10261286
> 
> 赞同：1
> 
> 时间：2012-04-21T17:22:58.023
> 
> 标签：c#, asp.net, web-services

试图将服务引用添加到我的 Windows 8 应用程序。但是 asmx 文件位于具有某些角色的登录用户可以查看的文件夹中。就像受保护的文件夹一样，我也在为网站使用 asp.net 会员提供程序。如何添加此引用或对其进行身份验证？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:32:04.600

有一种更简单的方法来授权您的服务用户，这应该可以解决您的一些问题。

首先，将您的服务放在一个公共文件夹中，根本没有授权。这将允许您毫无问题地添加来自 Windows 8 应用程序的引用。

然后，在您的服务中，创建一个方法来验证您的用户：

```
public bool Login( string UserName, string Pwd )
{
    // validate the user and create the forms cookie upon succesfull validaition
    if ( IsValid( UserName, Pwd ) ) 
    {
        FormsAuthenticationTicket ticket = new FormsAuthenticationTicket( ... );

        string CookieName = FOrmsAuthentication.FormsCookieName;
        string CookieValue = ticket.Encrypt();

        this.Response.Cookies.Add( new HttpCookie( CookieName, CookieValue ) );
    }
} 
```

此公共方法将是您的 Windows 8 应用程序应调用的第一个方法。

然后使用`PrincipalPermission`属性保护所有其他服务方法：

```
[PrincipalPermission( Roles="Admin, User" )]
public TheMethodForAdminOrUser()
{
    // do whatever you want
} 
```

属性将保护您的服务方法的调用，以便只有通过对该`Login`方法的有效调用进行身份验证的用户才能访问您的服务。

# css - 绝对定位：一个元素展开窗口，其他元素不影响它。两者都使用相同的代码：C

> ID：10261287
> 
> 赞同：5
> 
> 时间：2012-04-21T17:23:07.210
> 
> 标签：css, width, css-position

我添加了两个 div 来保存用于装饰目的的背景图像 - 根据在网站上与我合作的艺术家的要求。

起初，它工作得非常好。图像应该显示在包含网站内容的包装器 div 的每一侧 - 而不会影响页面宽度。

然后拥有该网站的组织得到了另一个赞助商，我必须将他的徽标添加到右侧的列中。我为第 5 个“按钮”创建了一个新 id，并为它创建了一个 div。上传它，我注意到页面底部突然出现了一个滚动条，没有明显的原因。

我首先怀疑按钮是问题，但最终发现最右边的装饰性 div 正在弯曲页面宽度，尽管使用了绝对定位。两个 div 使用相同的代码，只是左右镜像。我不知道是什么导致了问题..

（您可以在 www.torucon.no/no/ 上查看问题的实际效果）

请帮帮我！这是两个 div 的 CSS：

```
#wolf
{
position:absolute;
min-height:500px;
min-width:498px;
left:-293px;
top:150px;
background-image:url('http://www.torucon.no/css/wolf.png');
z-index:-1;
}

#lion
{
position:absolute;
min-height:500px;
min-width:498px;
right:-293px;
top:150px;
background-image:url('http://www.torucon.no/css/lion.png');
z-index:-1;
} 
```

这是一个显示 div 的 HTML 的 HTML 片段：

```
<div class="wrapper"> <!-- Contains the entire website for structure --> 
<div id="wolf">
</div>
<div id="lion">
</div> 
```

（（如果你没有得到它：包装器 div 应该是居中的，它是。但是当我调整我的窗口大小时，我发现滚动条出现在包装器内容甚至接近浏览器窗口之前很久边框。这在分辨率低或屏幕小的计算机上会很烦人！））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T20:02:40.243

我认为你想要的是让狮子和狼随着用户扩大浏览器视口而逐渐出现，但部分隐藏在包装器的两侧。正确的？

我认为在不触发您不喜欢的滚动条的情况下实现这一目标的唯一安全选择是将图像组合成一个并将它们作为背景图像附加到页面的正文元素上。

我相信你在 body 上使用 overflow-hidden 是正确的——如果将视口的大小调整到低于包装器的宽度，你就会失去滚动查看溢出内容的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:43:51.120

我已经检查过您是否发布了链接[http://www.torucon.no/no/](http://www.torucon.no/no/)但我看不到底部滚动条，无论如何，为什么您不能设置背景？

```
<body>
 <div class="overlay">
     <div class="wrapper">
     </div>
 </div>
</body>

<style>
  body{width:100%; background:---;}
 .overlay{width:100%; background:---;}
<style> 
```

# asp.net-mvc - 我的枚举类型的项目未翻译

> ID：10261289
> 
> 赞同：0
> 
> 时间：2012-04-21T17:23:17.880
> 
> 标签：asp.net-mvc

我有以下视图模型：

```
public class BudgetTypeSiteRowListViewModel
{
    public virtual int BudgetTypeSiteID { get; set; }
    public virtual string SiteName { get; set; }
    public virtual BudgetTypeEnumViewModel SiteType { get; set; }        
} 
```

使用以下枚举：

```
public enum BudgetTypeEnumViewModel
{
    [Display(Name = "BudgetTypeDaily", ResourceType = typeof (UserResource))] Daily = 1,
    [Display(Name = "BudgetTypeRevision", ResourceType = typeof (UserResource))] Revision = 2
} 
```

以下视图用于列出我的项目：

```
@model IEnumerable<BudgetTypeSiteRowListViewModel>

<table>
    @foreach (var item in Model)
    {
        <tr>
            <td>@Html.DisplayFor(m => item.SiteName)</td>
            <td>@Html.DisplayFor(m => item.SiteType)</td>
        </tr>
    }
</table> 
```

**问题**是我列出的项目不在正确的文化中。我有“Daily”或“Revision”，而我应该有“Journalier”或“Dagelijkse”或“Révision”或“Revisie”。

我怎样才能让我的 SiteType 处于正确的文化中（由我的枚举提供）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:33:29.123

您必须编写一个使用反射来获取属性的枚举类型的扩展方法

```
public static string DisplayAttribute<TEnum>(this TEnum enumValue) where TEnum : struct
{
  //You can't use a type constraints on the special class Enum. So I use this workaround
  if (!typeof(TEnum).IsEnum)
    throw new ArgumentException("TEnum must be of type System.Enum");

  Type type = typeof(TEnum);
  MemberInfo[] memberInfo = type.GetMember(enumValue.ToString());
  if (memberInfo != null && memberInfo.Length > 0)
  {
    object[] attrs = memberInfo[0].GetCustomAttributes(typeof(DisplayAttribute), false);
    if (attrs != null && attrs.Length > 0)
      return ((DisplayAttribute)attrs[0]).GetName();
  }
  return enumValue.ToString();
} 
```

从视图中你会得到这样的值

```
@Html.DisplayFor(m => item.SiteType.DisplayAttribute()) 
```

我希望它有帮助

# java - 语法错误，插入 } 以完成块

> ID：10261292
> 
> 赞同：-1
> 
> 时间：2012-04-21T17:23:55.650
> 
> 标签：java

```
import java.util.*;

public class Programming {

    public static void main(String[] args) {
        //Scanner scan = new Scanner( System.in );

        int l=0;
        StringBuilder password = new StringBuilder();

        public static boolean matchCharAt(StringBuilder password, int l){
            l = password.length();
            if (l < 0 || l > 100){
                return false;
            }

            for (int i = 0; i < password.length();i++){
                if (!Character.isLetter(password.charAt(l)))
                    return false;
            }
            return true;

        }
    } 
```

它说我有一个错误`{ for (l=0; l < 100; l++); }`，但我不确定花括号错误是否在哪里。我不确定，这可能不是花括号错误，但我希望我能得到一些帮助，以免出现此错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T17:27:33.617

你永远不会关闭`main()`方法块：

```
public static void main(String[] args) {
    //Scanner scan = new Scanner( System.in );

    int l=0;
    StringBuilder password = new StringBuilder();

    {
        for (l = 0; l < 100; l++);
    }
}  //HERE! 
```

除了这个循环：

```
for (l = 0; l < 100; l++); 
```

`l`除了更改to的值之外，没有做任何事情`100`。循环也被一个没有实际意义的块包围。我只能猜这就是你想要的：

```
for (l = 0; l < 100; l++) {
    matchCharAt(password, l);
    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:31:37.877

这是您的主要问题的必然结果，但您也在更改此方法中的参数

```
public static boolean matchCharAt(StringBuilder password, int l){
        l = password.length();
        if (l < 0 || l > 100){
            return false;
        } 
```

如果您传入`l`，那么您将使用 更改其值`l = password.length()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T17:30:36.287

我不确定你到底想要什么。这至少应该编译：

```
public class SomeClass {

  public static void main(String[] args) {
      //Scanner scan = new Scanner( System.in );

      int l=0;
      StringBuilder password = new StringBuilder();

      for (l = 0; l < 100; l++) {
        ; // Does nothing...
      }
  } // end of "main()"

  public static boolean matchCharAt(StringBuilder password, int l){
    l = password.length();
    if (l < 0 || l > 100){
        return false;
    }

    for (int i = 0; i < password.length();i++){
        if (!Character.isLetter(password.charAt(l)))
            return false;
    }

    return true;
  } // end of "matchCharAt()"

 } // end of class 
```

# c# - C# 条件运算符？：可空 int 存在问题

> ID：10261297
> 
> 赞同：4
> 
> 时间：2012-04-21T17:24:17.537
> 
> 标签：c#

> **可能重复：**
> [具有 Nullable<value> 类型的条件运算符分配？](https://stackoverflow.com/questions/75746/conditional-operator-assignment-with-nullablevalue-types)

为什么当我的函数返回一个可为空的整数“int？”时，条件运算符“？：”在这里不起作用？“return null” 有效，但对于“?:”，我必须先将“null”转换为“(int?)”。

```
 public int? IsLongName(string name) {

        int length = name.Length;

        // this works without problems
        if (name.Length > 10) {
            return null;
        } else {
            return name.Length;
        }

        // this reports: 
        // Type of conditional expression cannot be determined because 
        // there is no implicit conversion between '<null>' and 'int'
        return name.Length > 10 ? null : name.Length;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T17:25:42.227

尝试将最后一行更改为：

```
return name.Length > 10 ? null : (int?)name.Length; 
```

编译器无法理解 ?: 运算符的返回类型是什么。它有冲突的值 - null 和 int。通过将 int 强制转换为可空，编译器可以理解返回类型是可空的 int，并且 null 也将被接受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:30:03.080

`null`值和值都`int`可以隐式转换为数据类型，但是如果您不告诉它，编译器不知道其本身`int?`的文字是 an 以外的任何东西。没有通用的数据类型可以同时隐式转换为编译器所抱怨的。`null``object``object``int`

正如 Yorye 所说，您可以将`int`to`int?`转换为让编译器进行转换；或者，您可以强制转换`null`to `int?`，然后允许编译器使用从`int`to的隐式转换`int?`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T17:34:17.413

运算符的两个条件`?:`必须隐式兼容。`int`can never be `null`，因此存在编译时错误（同样，`null`can never be `int`）。你必须施放，没有办法使用三元来解决它。

我认为 if 语句不会有同样的问题，因为编译器只会检查该方法是否从任何给定路径返回到返回类型的兼容值，而不是来自任何给定出口点的返回值是隐式的与另一个块的返回值兼容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T17:36:08.873

`?:`运算符*仅*考虑其两个可能返回值的类型。它不知道将接收其结果的变量的类型（实际上，在更复杂的表达式中，可能不存在显式变量）。

如果其中一个返回值是`null`，它没有类型信息 - 它只能检查*另一个*返回值的类型，并检查是否存在转换。

在您的情况下，我们有`null`一个 type 的返回值`int`。没有可用的转换。*将*转换为，但这不是正在考虑的两种`int?`可能的返回类型`?:`。

# assembly - 修复后常量无效？

> ID：10261300
> 
> 赞同：26
> 
> 时间：2012-04-21T17:24:54.557
> 
> 标签：assembly, arm, immediate-operand

出于某种原因，当我尝试编译这段代码时，编译器会说`syscall.s:72:invalid constant (0x172) after fixup`：

```
.globl _mach_msg_trap$MACH
_mach_msg_trap$MACH:
    stmfd sp!, {r4,r7}
    mov r7, #370 /* this is line 72 */
    svc 0
    ldmfd sp!, {r4, r7}
    bx lr 
```

我不知道它为什么这样做。当我将一个较小的常数放入`r7`时，它可以正常工作。但是随着数字的增加，它会吐出这个错误。我通过`mov r7, #300`and临时修复了它`add r7, #70`，达到了预期的效果。仍然不确定是什么导致了错误。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-21T18:25:04.017

直到 ARMv5 的 ARM 指令集只能使用有限范围的立即数。问题是该值必须在指令本身中进行编码。由于所有 ARM 指令都是 32 位宽的，因此 ARMv5 的原始指令集总共只有 8+4 位来编码立即数。前 8 位能够加载 0-255 范围内的任何 8 位值，而第 4 位可以在 0 到 30 之间以 2 的步长进行右循环。

因此，您可以加载如下值：

```
#0
#122
#121 ror #24 = 30976
#230 ror #12 = 241172480 
```

但是，#370 不能用这个方案加载，它需要类似的东西，`#185 ror #31`这是不可能的。

**有两种方法可以加载您的即时价值。**

1.  您如何通过在多个步骤中构建值来解决它。
2.  通过使用 ldr 从内存中加载值：**`ldr r7,=#370`**然后，汇编器将创建一个常量池并通过 pc 相对寻址从那里加载值。

通常你应该更喜欢用最多 2 条指令来构造常量，如果那是不可能的（或者值必须是可重定位的）使用 ldr。

从 ARMv7 开始，您还可以使用**`movw`将任何 16 位值加载**到寄存器的下半部分，同时将上半部分归零，并将`movt`另一个 16 位值加载到上半部分而不接触下半部分。

# jquery-ui - 使用 jQuery 滑块更改 Google 图表视图窗口

> ID：10261302
> 
> 赞同：2
> 
> 时间：2012-04-21T17:24:56.147
> 
> 标签：jquery-ui, slider, google-visualization

我准备了一个带有屏幕截图的简单测试用例，展示了我的问题，并且可能遗漏了一点点，只有几行代码。

我有一个图表，表示几周内网络游戏中的输赢。

即纵轴代表比赛得分，横轴代表周数。

我的 ajax 脚本返回 52 周的数据，但我想添加一个滑块并允许用户将查看的周数更改为 12 到 52 之间的任何数字。

![截屏](../Images/1e42069807ef12d06924e80536f259f0.png)

谁能告诉我，如何修改[更改](http://docs.jquery.com/UI/Slider)功能？

```
$("#money_slider").slider({
    min: 12, 
    max: 52,
    change: function(event, ui) { 
        // XXX what to do here with
        // hAxis.viewWindow.min and .max?
    }
}); 
```

以下是我的完整测试用例，只需将其保存为 .html 文件，您就可以在浏览器中尝试：

```
<!DOCTYPE HTML>
<html>
<style type="text/css">
    h3,p,div { 
        text-align: center; 
    }

    #slider { 
        width: 700px; 
        margin-left: auto; 
        margin-right: auto; 
    }
</style>
<style type="text/css" title="currentStyle">
        @import "https://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/redmond/jquery-ui.css";
</style>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.0/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1','packages':['corechart'],'language':'ru'}]}"></script>
<script type="text/javascript">

google.setOnLoadCallback(drawChart);

$(function() {
    $('#slider').slider({
        disabled: true,
        range: 'min',
        min: 12,
        max: 52,
        change: function(event, ui) { 
            // XXX what to do here with
            // hAxis.viewWindow.min and .max?
            $("#header").text("debug=" + ui.value);
        }
    });
});

function drawChart() {
        var jsonData = '{"cols":[{"label":"Week number","type":"string"},{"label":"Week leader","type":"number"},{"label":"Your win","type":"number"},{"label":"Your loss","type":"number"}],"rows":[{"c":[{"v":"2011-33"},{"v":10671},{"v":0},{"v":-3113}]},{"c":[{"v":"2011-34"},{"v":7975},{"v":0},{"v":-2113}]},{"c":[{"v":"2011-35"},{"v":11009},{"v":0},{"v":-2244}]},{"c":[{"v":"2011-36"},{"v":10679},{"v":0},{"v":-689}]},{"c":[{"v":"2011-37"},{"v":11197},{"v":305},{"v":0}]},{"c":[{"v":"2011-38"},{"v":6762},{"v":419},{"v":0}]},{"c":[{"v":"2011-39"},{"v":7823},{"v":0},{"v":-1563}]},{"c":[{"v":"2011-40"},{"v":10171},{"v":1152},{"v":0}]},{"c":[{"v":"2011-41"},{"v":9903},{"v":0},{"v":-1008}]},{"c":[{"v":"2011-42"},{"v":5940},{"v":0},{"v":-1332}]},{"c":[{"v":"2011-43"},{"v":7979},{"v":0},{"v":-593}]},{"c":[{"v":"2011-44"},{"v":7833},{"v":0},{"v":-653}]},{"c":[{"v":"2011-45"},{"v":9691},{"v":0},{"v":-562}]},{"c":[{"v":"2011-46"},{"v":8836},{"v":0},{"v":-1686}]},{"c":[{"v":"2011-47"},{"v":10358},{"v":0},{"v":-2120}]},{"c":[{"v":"2011-48"},{"v":9956},{"v":0},{"v":-1353}]},{"c":[{"v":"2011-49"},{"v":8787},{"v":160},{"v":0}]},{"c":[{"v":"2011-50"},{"v":9590},{"v":0},{"v":0}]},{"c":[{"v":"2011-51"},{"v":8931},{"v":887},{"v":0}]},{"c":[{"v":"2011-52"},{"v":8529},{"v":0},{"v":-1434}]},{"c":[{"v":"2012-01"},{"v":8680},{"v":0},{"v":-1416}]},{"c":[{"v":"2012-02"},{"v":9932},{"v":0},{"v":-169}]},{"c":[{"v":"2012-03"},{"v":8334},{"v":0},{"v":-3149}]},{"c":[{"v":"2012-04"},{"v":8077},{"v":217},{"v":0}]},{"c":[{"v":"2012-05"},{"v":7788},{"v":0},{"v":-3683}]},{"c":[{"v":"2012-06"},{"v":10070},{"v":113},{"v":0}]},{"c":[{"v":"2012-07"},{"v":8318},{"v":1704},{"v":0}]},{"c":[{"v":"2012-08"},{"v":8208},{"v":0},{"v":-104}]},{"c":[{"v":"2012-09"},{"v":11561},{"v":272},{"v":0}]},{"c":[{"v":"2012-10"},{"v":7797},{"v":0},{"v":0}]},{"c":[{"v":"2012-11"},{"v":9893},{"v":0},{"v":-90}]},{"c":[{"v":"2012-12"},{"v":9197},{"v":0},{"v":-191}]},{"c":[{"v":"2012-13"},{"v":7287},{"v":651},{"v":0}]},{"c":[{"v":"2012-14"},{"v":7072},{"v":646},{"v":0}]},{"c":[{"v":"2012-15"},{"v":7183},{"v":0},{"v":-907}]},{"c":[{"v":"2012-16"},{"v":6021},{"v":0},{"v":-993}]}]}';

        var data = new google.visualization.DataTable(jsonData);
        var options = {
          width: 700,
          height: 500,
          legend: {position: 'top'},
          areaOpacity: 1.0,
          vAxis: {format: '$#'},
          hAxis: {title: 'Week number', titleTextStyle: {color: 'blue'}, slantedText: true},
          colors: ['CCFFCC', '66CC66', 'FF9999'],
          animation: {duration: 1000, easing: 'out'}
        };

        var chart = new google.visualization.SteppedAreaChart(document.getElementById('money'));
        google.visualization.events.addListener(chart, 'ready', function() {
            $('#slider').slider('enable');
        });
        chart.draw(data, options);
}
</script>
</head>

<body>
<h3 id="header">Money</h3>
<div id="money"></div>
<div id="slider"></div>
</body>
</html> 
```

我已经阅读[了谷歌示例](https://google-developers.appspot.com/chart/interactive/docs/animation)（在底部），但还没有理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:48:36.033

我自己的解决方案（虽然 Opera 11.62 存在渲染问题 - 我为此提交[了错误 #882](http://code.google.com/p/google-visualization-api-issues/issues/detail?id=882)）：

```
<!DOCTYPE HTML>
<html>
<style type="text/css">
    h3,p,div { 
        text-align: center; 
    }

    #slider { 
        width: 700px; 
        margin-left: auto; 
        margin-right: auto; 
    }
</style>
<style type="text/css" title="currentStyle">
        @import "https://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/redmond/jquery-ui.css";
</style>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1','packages':['corechart'],'language':'ru'}]}"></script>
<script type="text/javascript">

google.setOnLoadCallback(initChart);

var jsonData = '{"cols":[{"label":"Week number","type":"string"},{"label":"Week leader","type":"number"},{"label":"Your win","type":"number"},{"label":"Your loss","type":"number"}],"rows":[{"c":[{"v":"2011-33"},{"v":10671},{"v":0},{"v":-3113}]},{"c":[{"v":"2011-34"},{"v":7975},{"v":0},{"v":-2113}]},{"c":[{"v":"2011-35"},{"v":11009},{"v":0},{"v":-2244}]},{"c":[{"v":"2011-36"},{"v":10679},{"v":0},{"v":-689}]},{"c":[{"v":"2011-37"},{"v":11197},{"v":305},{"v":0}]},{"c":[{"v":"2011-38"},{"v":6762},{"v":419},{"v":0}]},{"c":[{"v":"2011-39"},{"v":7823},{"v":0},{"v":-1563}]},{"c":[{"v":"2011-40"},{"v":10171},{"v":1152},{"v":0}]},{"c":[{"v":"2011-41"},{"v":9903},{"v":0},{"v":-1008}]},{"c":[{"v":"2011-42"},{"v":5940},{"v":0},{"v":-1332}]},{"c":[{"v":"2011-43"},{"v":7979},{"v":0},{"v":-593}]},{"c":[{"v":"2011-44"},{"v":7833},{"v":0},{"v":-653}]},{"c":[{"v":"2011-45"},{"v":9691},{"v":0},{"v":-562}]},{"c":[{"v":"2011-46"},{"v":8836},{"v":0},{"v":-1686}]},{"c":[{"v":"2011-47"},{"v":10358},{"v":0},{"v":-2120}]},{"c":[{"v":"2011-48"},{"v":9956},{"v":0},{"v":-1353}]},{"c":[{"v":"2011-49"},{"v":8787},{"v":160},{"v":0}]},{"c":[{"v":"2011-50"},{"v":9590},{"v":0},{"v":0}]},{"c":[{"v":"2011-51"},{"v":8931},{"v":887},{"v":0}]},{"c":[{"v":"2011-52"},{"v":8529},{"v":0},{"v":-1434}]},{"c":[{"v":"2012-01"},{"v":8680},{"v":0},{"v":-1416}]},{"c":[{"v":"2012-02"},{"v":9932},{"v":0},{"v":-169}]},{"c":[{"v":"2012-03"},{"v":8334},{"v":0},{"v":-3149}]},{"c":[{"v":"2012-04"},{"v":8077},{"v":217},{"v":0}]},{"c":[{"v":"2012-05"},{"v":7788},{"v":0},{"v":-3683}]},{"c":[{"v":"2012-06"},{"v":10070},{"v":113},{"v":0}]},{"c":[{"v":"2012-07"},{"v":8318},{"v":1704},{"v":0}]},{"c":[{"v":"2012-08"},{"v":8208},{"v":0},{"v":-104}]},{"c":[{"v":"2012-09"},{"v":11561},{"v":272},{"v":0}]},{"c":[{"v":"2012-10"},{"v":7797},{"v":0},{"v":0}]},{"c":[{"v":"2012-11"},{"v":9893},{"v":0},{"v":-90}]},{"c":[{"v":"2012-12"},{"v":9197},{"v":0},{"v":-191}]},{"c":[{"v":"2012-13"},{"v":7287},{"v":651},{"v":0}]},{"c":[{"v":"2012-14"},{"v":7072},{"v":646},{"v":0}]},{"c":[{"v":"2012-15"},{"v":7183},{"v":0},{"v":-907}]},{"c":[{"v":"2012-16"},{"v":6021},{"v":0},{"v":-993}]}]}';

var data = new google.visualization.DataTable(jsonData);
var chart;
var options = {
    width: 700,
    height: 500,
    legend: {position: 'top'},
    areaOpacity: 1.0,
    vAxis: {format: '$#'},
    hAxis: {title: 'Week number', titleTextStyle: {color: 'blue'}, slantedText: true, viewWindow: {min: 20, max: 35}},
    colors: ['CCFFCC', '66CC66', 'FF9999'],
    animation: {duration: 1000, easing: 'out'}
};

$(function() {
    $('#slider').slider({
        disabled: true,
        range: 'min',
        value: 20,
        min: 0,
        max: 20,
        change: function(event, ui) { 
            $('#header').text('debug=' + ui.value);
            options.hAxis.viewWindow.min = ui.value;
            drawChart();
        }
    });
});

function initChart() {
    chart = new google.visualization.SteppedAreaChart(document.getElementById('money'));
    google.visualization.events.addListener(chart, 'ready', function() {
        $('#slider').slider('enable');
    });
    drawChart();
}
function drawChart() {
    chart.draw(data, options);
}
</script>
</head>

<body>
<h3 id="header">Money</h3>
<div id="money"></div>
<div id="slider"></div>
</body>
</html> 
```

# facebook-graph-api - Facebook 图形 API 照片

> ID：10261305
> 
> 赞同：0
> 
> 时间：2012-04-21T17:25:22.997
> 
> 标签：facebook-graph-api, photo

我正在尝试使用 ASP.NET 和 C# 将照片上传到 Facebook。使用 Facebook oAuth 登录效果很好，并且访问令牌是正确的，但我就是不知道如何使用它来发布照片。感谢任何帮助，真的很难理解 Facebooks API 和 ASP.NET 如何协同工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:23:57.633

您可以使用现成的组件

[http://computerbeacon.net/library/960n60e000000](http://computerbeacon.net/library/960n60e000000)

或者使用以下代码（从源代码中获得）

```
/// <summary>
/// Publishes a photo to a specific album and post it on the user's wall
/// </summary>
/// <param name="photo">photo to be published</param>
/// <param name="message">message with this photo</param>
/// <returns>PhotoID of the photo published</returns>
public string PublishPhoto(System.Drawing.Bitmap photo, string message, string AccessToken)
{
    string AlbumID = "me";//post to wall , no spesific album
    System.IO.MemoryStream MS = new System.IO.MemoryStream();
    photo.Save(MS, System.Drawing.Imaging.ImageFormat.Jpeg);
    byte[] Imagebytes = MS.ToArray();
    MS.Dispose();

    //Set up basic variables for constructing the multipart/form-data data
    string newline = "\r\n";
    string boundary = DateTime.Now.Ticks.ToString("x");
    string data = "";

    //Construct data
    data += "--" + boundary + newline;
    data += "Content-Disposition: form-data; name=\"message\"" + newline + newline;
    data += message + newline;

    data += "--" + boundary + newline;
    data += "Content-Disposition: form-data; filename=\"test.jpg\"" + newline;
    data += "Content-Type: image/jpeg" + newline + newline;

    string ending = newline + "--" + boundary + "--" + newline;

    //Convert data to byte[] array
    System.IO.MemoryStream finaldatastream = new System.IO.MemoryStream();
    byte[] databytes = System.Text.Encoding.UTF8.GetBytes(data);
    byte[] endingbytes = System.Text.Encoding.UTF8.GetBytes(ending);
    finaldatastream.Write(databytes, 0, databytes.Length);
    finaldatastream.Write(Imagebytes, 0, Imagebytes.Length);
    finaldatastream.Write(endingbytes, 0, endingbytes.Length);
    byte[] finaldatabytes = finaldatastream.ToArray();
    finaldatastream.Dispose();

    //Make the request
    System.Net.WebRequest request = System.Net.HttpWebRequest.Create(string.Format("https://graph.facebook.com/{0}/photos?access_token={1}", AlbumID, AccessToken));
    request.ContentType = "multipart/form-data; boundary=" + boundary;
    request.ContentLength = finaldatabytes.Length;
    request.Method = "POST";
    using (System.IO.Stream RStream = request.GetRequestStream())
    {
        RStream.Write(finaldatabytes, 0, finaldatabytes.Length);
    }
    System.Net.WebResponse WR = request.GetResponse();
    string _Response = "";
    using (System.IO.StreamReader sr = new System.IO.StreamReader(WR.GetResponseStream()))
    {
        _Response = sr.ReadToEnd();
    }
    string Id = "";//get the Id from the Response
    return Id;
} 
```

# javascript - 如何让小 div 靠近可 调整大小的容器边框？

> ID：10261306
> 
> 赞同：0
> 
> 时间：2012-04-21T17:25:27.327
> 
> 标签：javascript, jquery, css

用我所拥有的更容易解释：http: [//jsfiddle.net/Kuq5a/](http://jsfiddle.net/Kuq5a/)

我的目标是使所有四个彩色框与虚线框的每个角保持相同的距离（单向 10 像素）。当边界框是静态的时候很容易，但在我的情况下，它会被用户调整大小，滑块作为一种方法。

具体来说，当边界框增长时，我试图让绿色向右滑动，蓝色向下，黄色对角线向下和向右滑动。

我的朋友建议使用`position: absolute`，但它没有做我需要的。显示为灰色框，它们附加到整个窗口！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:33:02.803

我做到了：[JSFiddle](http://jsfiddle.net/Kuq5a/1/)

我用而不是`top: 10px` `bottom: 10px`.

我不太确定灰色框应该如何反应，所以我没有更改它们的属性......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:45:16.950

如果你想用 Jquery 单独做这件事，你会这样做。

```
function resize(px) {
    $(".colorbox").css("width", px+"px");
    $(".colorbox").css("height", px+"px");
    $("#g").css("margin-left", px-100+"px");
    $("#b").css("margin-top", px-100+"px");     
    $("#y").css("margin-left", px-100+"px");
  } 
```

# ios - 如何将播放图标和长度指示器添加到 MPMoviePlayerController 帧缩略图？

> ID：10261310
> 
> 赞同：0
> 
> 时间：2012-04-21T17:25:55.633
> 
> 标签：ios, mpmovieplayercontroller, thumbnails

这是我无法找到答案的一个。我正在创建一个 iPhone (iOS 5.0) 应用程序，并使用 MPMoviePlayerController 来获取视频剪辑的缩略图帧，我将其显示在包含图像和视频缩略图的画廊中（就像照片应用程序一样）。

在照片应用程序中，对于视频缩略图，它会显示一个带有电影相机图标和剪辑长度的小工具栏，以指示缩略图是视频。我不知道如何将其添加到我的视频帧缩略图中。我是否必须自己创建类似该工具栏的东西并将其添加到框架缩略图的 UIImage 中，或者这里有什么我刚刚错过的东西？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:46:33.927

我得到了你的问题的解决方案......所以，你可以使用这个：`

```
[yourButton setBackgroundImage:[self getVideoThumbnail:urlFromVideo] 
                  forState:UIControlStateNormal];
[yourButton setImage:[UIImage imageNamed:yourImageName] forState:UIControlStateNormal];` 
```

getThumbnail 的函数在这里：

```
 - (UIImage *)getVideoThumbnail:(NSURL *)videoURL
   {    
       MPMoviePlayerController *player = [[MPMoviePlayerController alloc]  initWithContentURL:videoURL];
       UIImage *thumbnail = [player thumbnailImageAtTime:1.0               timeOption:MPMovieTimeOptionNearestKeyFrame];
       //Player autoplays audio on init
       [player stop];
       return thumbnail;
   } 
```

我认为这是您的选择...

# xml - 如何避免 jdom sax builder 包含行分隔符

> ID：10261314
> 
> 赞同：0
> 
> 时间：2012-04-21T17:26:16.470
> 
> 标签：xml, jdom

我使用 jdom SAXBuilder 来获取 XML 文档。我的问题是在返回的文档中，每个元素前面都有一个行分隔符（'/n'）。我查看了 jdom 文档，似乎这是解析器的正常行为。我想避免它，但我找不到路。任何提示将不胜感激。弗拉维奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:08:47.877

您在哪里看到 \n 字符？如果它们是输入的一部分，那么 JDOM 将自动保留它们，并且当您输出 JDOM 内容时它们仍然存在。如果要更改数据的输出方式，可以使用“格式”实例来更改输出格式。

如果您希望输出没有 \n 字符，那么您应该使用 Format.getCompactFormat() 格式...但请注意 - 如果您使用的是新的 JDOM 2.0.0 这有一个错误，您应该使用修补程序github 上的压缩包：[https](https://github.com/downloads/hunterhacker/jdom/jdom-2.x-issue72.zip%20JDOM%20Hotfix) ://github.com/downloads/hunterhacker/jdom/jdom-2.x-issue72.zip 。JDOM-2.0.1 将在下周左右发布官方修复。

如果您想在输入/解析过程中去除 \n 字符，那么您应该考虑使用自己的 JDOMFactory 实例（子类 DefaultJDOMFactory）并覆盖 text(...) 方法以在返回 Text 之前修剪文本实例。

否则，在解析 XML 之后，您可以扫描整个树并根据需要添加 \n 字符。

否则，除非您要求，否则 JDOM 不会添加 \n 字符。

# objective-c - 存储十二生肖开始和结束日期的最佳方式是什么

> ID：10261320
> 
> 赞同：0
> 
> 时间：2012-04-21T17:27:21.123
> 
> 标签：objective-c, ios

我正在开发一个适用于 iPhone 的应用程序，我想在该应用程序中获取要在标签上显示的星座的开始和结束日期。我不确定如何存储此信息。我正在考虑将其存储，`Core Data`但每次遍历它可能会很慢。我的另一个想法是`NSDictionary`为每个标志设置一个数组。例如

```
self.zodiacSignsDates = [[NSDictionary alloc]initWithObjectsAndKeys:
                             [NSArray arrayWithObjects:@"December 22",@"January 20",nil], @"Capricorn", 
                             [NSArray arrayWithObjects:@"January 21", @"February 18",nil], @"Aquarius"
                             ,nil]; 
```

以后我可能还会用它`NSDictionary`来计算出生日期的星座。

请让我知道您对如何存储此类数据的看法

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:02:09.050

由于许多评论，将其发布为答案。另外：仅将周期的最后一天存储在与黄道带长度相同的数组中还不够吗？

```
var signs = ["Capricorn","Aquarius", ... ];
var lastDay = ["01-20", "02-18", ... ]; 
```

最后一个，我保证。如果你想保留那些英文字符串，你可以这样做：（因为我假设你已经有一个生肖列表）

```
var dates = [["December 22","January 20"],["January 21","February 18"],[etc,etc] ]; 
```

进而

```
private String[] getFromTo( string zodiac ){
   var idx = signs.indexOf(zodiac);
   return dates[idx];
} 
```

# c# - 具有动态行数的动态 GridView

> ID：10261321
> 
> 赞同：1
> 
> 时间：2012-04-21T17:27:25.913
> 
> 标签：c#, asp.net, gridview

单击按钮时如何创建具有动态行数的动态 GridView

并放入一列 DropDownList 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T20:08:31.310

GridView 是一个数据绑定控件。这意味着它显示了数据源中的内容。要添加一行，您需要将一个项目添加到数据源并重新绑定gridview。您不能直接向 gridview 添加行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:44:20.183

你的问题很简短，但如果我认为我明白你想做什么，你可以试试这个：

在按钮的代码隐藏中

```
List<string> ThisIsYourList = new List<string>();
Gridview1.DataSource = ThisIsYourList;
Gridview1.DataBind(); 
```

如果你想为每一行添加一个下拉列表，你需要像这样向你的gridview添加一个itemtemplate：

```
 <asp:TemplateField>
   <ItemTemplate>
   <asp:DropDownList ID="DropDownList1" runat="server"/>
   </ItemTemplate>
   </asp:TemplateField> 
```

您可以在 gridview 的标签之间的任何位置添加这个 itemtemplate。

# javascript - D3.js - 来自平面 JSON 层次结构的树图

> ID：10261322
> 
> 赞同：1
> 
> 时间：2012-04-21T17:27:31.087
> 
> 标签：javascript, json, d3.js, treemap

我正在尝试在 d3.js 中呈现树形图并使用示例代码 - [http://mbostock.github.com/d3/ex/treemap.html](http://mbostock.github.com/d3/ex/treemap.html)：

![在此处输入图像描述](../Images/462333b6b30e5547c939c9215a1df654.png)

我遇到了一个问题，即我的源 JSON 是一个平面结构，因此对 treemap.nodes 的调用是错误的。

谁能建议如何返回平面层次结构？

我的示例 JSON：

```
[
    {"ticker":"$GOOG","count":"82","sentiment":"9"},
    {"ticker":"$AAPL","count":"408","sentiment":"8"}, ... 
```

到目前为止我的完整代码：

```
d3.json("/finance/data", function(json) {   

    var w = 960,
      h = 500,
      color = d3.interpolateRgb("rgb(0,255,0)", "rgb(255,0,0)");
      //xcolor = d3.scale.linear().domain([-26,13]).range("rgb(0,255,0)", "rgb(255,0,0)"),
      x = d3.scale.linear().domain([-26,13]).range([0, 1]),
      stepsize = [2.46, 1.66],
      minval = [-16.28, -16.67];

   var treemap = d3.layout.treemap()
      .size([w, h])
      .sticky(true)
      .value(function(d) { return d.count; });

   var div = d3.select("#treemap-transition").append("div")
      .style("position", "relative")
      .style("width", w + "px")
      .style("height", h + "px");

  div.data([json]).selectAll("div")
     .data(treemap.nodes)
    .enter().append("div")
      .attr("class", "cell")
      .style("background", function(d) { return treemap_color(d.sentiment, 2.5, 10); }) 
      .call(cell)
      .attr("text-anchor", "middle")
      .text(function(d) { return d.children ? null : d.ticker; });

  function cell() {
    this
      .style("left", function(d) { return d.x + "px"; })
      .style("top", function(d) { return d.y + "px"; })
      .style("width", function(d) { return d.dx - 1 + "px"; })
      .style("height", function(d) { return d.dy - 1 + "px"; })
      .style("text-anchor", "middle");
  }

  function treemap_color(value, stepsize, steps) {
     if (value == 0) {

        return "rgb(0,0,0)";

     } else if (value < 0 ) {

        var x = Math.round( (255/steps) * Math.abs( value/stepsize) );
        return 'rgb(0,' + x + ',0)';   //DECREASE in unemployment => green

     } else {

        var y = Math.round(  (255/steps) * value/stepsize );
        return 'rgb(' + y + ',0,0)';  //INCREASE in unemployment => red
     }
  }

}); 
```

感谢任何评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:52:50.310

不知道你的意思是平坦的。如果您的意思是您在 D3 中没有“节点”超类别，那么您可以使用：

```
.data(treemap) 
```

代替：

```
.data(treemap.nodes) 
```

但是如果您的 JSON 中没有“children”属性，您将不会获得任何分层包装。

# ios - 如何（是否有可能）通过 url 提供 iPhone 的文件？

> ID：10261324
> 
> 赞同：0
> 
> 时间：2012-04-21T17:27:35.290
> 
> 标签：ios, file, url, hyperlink, share

我正在为 iOs 编码。我想与 web 服务平台交互以处理捕获的图像。不幸的是，它问的是图片的 URL 而不是图片，这是我的问题：

我们可以通过将 iPhone 上的图片（文件）与公共 URL 相关联来提供它吗？也许通过 iPhone 的 IP？（iPhone 将是一个服务器......）

我寻找使用 icloud 但不是很成功。我可能会使用 dropBox API，在这种情况下，我会使用可以生成公共 URL 的公共文件夹...

尼古拉斯（对不起我的英语）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:29:39.937

我不认为这是可能的。您应该将其上传到服务器，将其存储在那里并使用该服务器上的 url。

# javascript - 如何禁用所有键盘键？

> ID：10261325
> 
> 赞同：8
> 
> 时间：2012-04-21T17:27:36.597
> 
> 标签：javascript

我正在寻找禁用文本区域中所有键盘键的可能性。我在网上找到了一些禁用单个键盘的示例，但是如何禁用整个键盘？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-21T17:29:57.357

[您可以使用disabled 属性](https://developer.mozilla.org/en/HTML/Element/textarea)禁用文本区域。或者，您可以使用 readonly 属性将其设为只读。readonly 就像 disabled 一样，只是它不会阻止用户在文本区域中单击或选择。

如果你真的需要用 javascript 来做，像这样的东西会做（使用 jQuery）：

```
<textarea rows=3 cols=20></textarea>​

$("textarea").keydown(false); 
```

你可以在这里试试：http: [//jsfiddle.net/7n4G4/1/](http://jsfiddle.net/7n4G4/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T17:36:39.997

如果您想确保您的用户仍然可以在文本区域内单击并选择，请使用 readonly 属性

```
<textarea name="text" readonly> 
```

如果您想在不选择的情况下完全禁用它

```
<textarea name="text" disabled> 
```

如果只想阻止键盘输入

```
<textarea name="text" id="text-input"> 
```

使用 jQuery 非常简单

```
$("#text-input").on("keydown keypress keyup", false); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T17:31:19.117

假设你有你`textare`的参考`textarea`，也许是这样的：

```
textearea.onkeydown = textarea.onkeypress = function() { return false }; 
```

这可能是一个矫枉过正，但是......考虑使用只读属性来代替：

```
textarea.readOnly = true 
```

在第一种情况下，您仍然可以使用鼠标复制/粘贴，在第二种情况下，您只能复制（使用键或鼠标无关紧要）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T17:34:11.633

```
 document.getElementById('ID OF TEXTAREA').onkeypress=function(){return false;} 
```

如果可以的话，不知道为什么要这样做`disabled`。

# c# - 收藏修改项目

> ID：10261326
> 
> 赞同：5
> 
> 时间：2012-04-21T17:27:45.710
> 
> 标签：c#, collections, big-o, sorted

我已经阅读了大量关于为特定实现选择正确集合的文章，并且我知道最终它将归结为对真实数据进行基准测试，但是当我忙于这样做时：

*   c# 中的哪些排序集合允许修改包含的项目？我似乎找不到任何东西？

*   这是因为修改可能会被实现为删除然后重新插入，从而使显式的“修改”功能毫无意义？

我需要一个集合（自定义或标准库），并对其执行以下操作。

*   插入 - 经常
*   删除 - 经常
*   修改 - 经常
*   选择前 X 个元素 - 每次发生上述任何情况时，以及更多同时发生。

目前我正在使用 SortedSet，因为它提供 O(logn) 插入，但我不清楚删除性能以及如何最好地修改项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:39:07.737

首先，我们需要明确修改集合的含义。

通常，操作集合是指从列表中插入/删除项目。要修改单个项目，它基本上是访问该项目并修改其属性。访问项目的成本取决于集合实现，但项目属性的修改不依赖于集合。另请注意，如果集合项不可变，则无法修改它。

如果你只是想找到最好的内置集合，你基本上是在 SortedList 和 SortedSet 之间进行选择（SortedDictionary 与 SortedSet 相同）。

SortedList 在内部将数据存储为数组，因此它可以通过索引高效访问（用于获取前 X 项）；SortedSet 具有更快的插入和删除（通过常数因子），但是索引访问需要在树中搜索下一个项目，在最坏的情况下是 O(log n)，最好的情况是 O(1)。

除此之外，两者之间的差异很小，因为它们都实现了红黑树，只是实现细节上有所不同。

必须针对您的用户案例测量实际性能。但你已经知道了。

# ajax - p:inputText 上的 p:ajax 未调用侦听器

> ID：10261328
> 
> 赞同：4
> 
> 时间：2012-04-21T17:28:05.880
> 
> 标签：ajax, jsf-2, primefaces

我想在 ap:dataTable 上实现自定义过滤。在 dataTable 的标题中，我有 ap:inputText 我想通过 ajax 过滤表。我遇到的问题是 bean 方法没有被 p:ajax 标记调用。这是有问题的代码片段：

```
 <h:form id="form1">
        <p:dataTable id="selectTable" var="select"
           selectionMode="multiple" rowKey="#{select.id}" 
           value="#{pc_Selectcourses.allCourses}">
           <f:facet name="header">
              <p:outputPanel>
                 Search For Courses Completed:
                 <p:inputText id="filterEntry" value="#{pc_Selectcourses.query}">
                    <p:ajax event="keyup" update=":form1:selectTable"
                       listener="#{pc_Selectcourses.filterListener}" />
                 </p:inputText>
              </p:outputPanel>
           </f:facet>
           <!-- table columns here, etc. -->
       </p:dataTable>
   </h:form> 
```

和支持bean：

```
public void filterListener() {
   System.out.println("Hello world, hope you're listening...");
} 
```

当我输入 inputText 时，Sysout 永远不会被打印出来。我还注意到我的 ajax 通知程序/状态图标没有显示任何活动，所以我怀疑发生了什么。

**编辑**

我刚刚尝试将 p:ajax 从 Eclipse 的 Palette 拖放到我的 xhtml 代码中，它说要使用它，我需要将库导入我的工作区。我让它继续，它将 primefaces v3.2 jar 文件添加到 Web_INF/lib 中。p:ajax 仍然不起作用。

我很困惑为什么它要求这样做，因为所有 Primefaces 组件一直运行良好。项目设置可能有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:28:05.373

我今天看到了同样的问题。事实证明，在您的支持 bean 中，如果您有一个 getter 函数`query`但没有一个 setter 函数，p:ajax 将不会调用它的侦听器。由于您没有发布 Java 代码的那部分，我认为这很有可能是您的问题。

# java - 如果我为 JPanel 设置Opaque(false)，它的组件会发生什么

> ID：10261329
> 
> 赞同：0
> 
> 时间：2012-04-21T17:28:26.833
> 
> 标签：java, swing

我向 JPanel 添加了几个 JButton，并为 JPanel 添加了 setOpaque(false)。当我将鼠标移到JButton上时，按钮下方出现一个正方形，然后很快消失，这让我感觉很糟糕。有谁知道出了什么问题？（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:36:19.603

如 JComponent javadoc 中所述，False 是 setOpaque 的默认值。

这与它在屏幕上绘制组件所做的努力有关，当该属性设置为 true 时，组件的所有像​​素都将绘制在屏幕上。

# php - Symfony2：如何覆盖核心模板？

> ID：10261333
> 
> 赞同：7
> 
> 时间：2012-04-21T17:29:07.823
> 
> 标签：php, symfony

我正在尝试通过创建来覆盖 SymfonyGeneratorBundle 模板

```
\app\Resources\SensioGeneratorBundle\skeleton\crud\views\index.html.twig 
```

该文件应替换：

```
\vendor\bundles\Sensio\Bundle\GeneratorBundle\Resources\skeleton\crud\views\index.html.twig 
```

但它仍然使用原始文件，即使在`cache:clear.`How to do that w/o create new bundle like [Can't override the standard skeleton views in Symfony2 GeneratorBundle](https://stackoverflow.com/questions/7227082/cant-override-the-standard-skeleton-views-in-symfony2-generatorbundle)？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-21T19:58:26.417

`SensioGeneratorBundle`在`app/AppKernel.php`例如以下之后立即注册您的捆绑包：

```
// app/AppKernel.php

if (in_array($this->getEnvironment(), array('dev', 'test'))) {
    //.....
    $bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
    $bundles[] = new Namespace\YourBundle();
}

// Or outside if, should you want your bundle to be available in production environment
$bundles[] = new Namespace\YourBundle(); 
```

然后在`YourBundle.php` 覆盖`registerCommands`方法中，

```
// Bundle\YourBundle.php

// other declarations
use Symfony\Component\Console\Application;
use Sensio\Bundle\GeneratorBundle\Generator\DoctrineCrudGenerator;
use Symfony\Component\Filesystem\Filesystem;

public function registerCommands(Application $application){
    $crudCommand = $application->get('generate:doctrine:crud');
    $generator = new DoctrineCrudGenerator(new FileSystem, __DIR__.'/Resources/skeleton/crud');
    $crudCommand->setGenerator($generator);

    parent::registerCommands($application);
} 
```

您必须将`skeleton`文件夹复制到`YourBundle\Resource`并修改模板。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-05T14:47:47.603

要覆盖编辑模板，例如，在 2.3+ 版本中，复制文件：

```
vendor/sensio/generator-bundle/Sensio/Bundle/GeneratorBundle/Resources/skeleton/crud/views/edit.html.twig.twig 
```

对于目录：

```
app/Resources/SensioGeneratorBundle/skeleton/crud/views/edit.html.twig.twig 
```

现在，只需使用默认命令生成 crud，它将使用新模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T11:48:30.787

m2mdas 的答案对我有用，但只有在发现它应该阅读之后

文件系统而不是文件系统！

查看您的vendors/symfony/.../Filesystem 文件夹以验证这一点。

# c# - SQL QUERY 格式修正

> ID：10261334
> 
> 赞同：0
> 
> 时间：2012-04-21T17:29:14.833
> 
> 标签：c#, sql, asp.net-mvc

我在我的婚姻学院项目中进行了高级搜索。结果我有以下查询：

```
select * 
from tbl_FreeUserProfile 
where Gender='Male' and Age>= '18' 
  and Age<= '40'    and heightf<='182' 
  and heightf>='152' and MaritalStatus='Never Married' 
  and MotherTongue = 'xyz' or 'Gujarati' or 'Urdu' or 'Hindi'" 
```

但是当我执行查询时，它显示以下错误：

> > 在预期条件的上下文中指定的非布尔类型的表达式，靠近“或”

谁能告诉我sql查询的格式有什么问题？

我的编码是这样的

```
protected void ImageButton11_Click(object sender, ImageClickEventArgs e)
  {

  string sql = "select * from tbl_FreeUserProfile where Gender='" + RadioButtonList2.SelectedItem.Text + "' and Age>= '" + DropDownList25.SelectedItem.Text + "' and Age<= '" + DropDownList26.SelectedItem.Text + "' and heightf<='" + TextBox23.Text + "' and heightf>='" + TextBox22.Text + "' and MaritalStatus='" + DropDownList35.SelectedItem.Text + "'";

  if (ListBox2.Items.Count >= 0)
    {
        sql = sql + " and MotherTongue = 'xyz'";

        for (int i = ListBox2.Items.Count - 1; i >= 0; i--)
        {                
              string mt = ListBox2.Items[i].ToString();
              sql = sql + " or '" + mt + "'";              
        }          
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:30:55.700

我想你想做类似的事情

```
and MotherTongue IN ('xyz', 'Gujarati', 'Urdu', 'Hindi') 
```

如果要使用`or`，每次都必须指定字段名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T17:55:02.750

你可以这样做，使用

```
AND (MotherTongue = 'xyz' OR MotherTongue = 'abc' ...) 
```

将您的代码更改为

```
if (ListBox2.Items.Count >= 0)
{
    sql = sql + " and ( MotherTongue = 'xyz'";

    for (int i = ListBox2.Items.Count - 1; i >= 0; i--)
    {                
          string mt = ListBox2.Items[i].ToString();
          sql = sql + " or MotherTongue = '" + mt + "'";              
    }

    sql = sql + ")"
} 
```

或者

```
AND MotherTongue IN ('xyz', 'abc', ...) 
```

将您的代码更改为

```
if (ListBox2.Items.Count >= 0)
{
    sql = sql + " and MotherTongue IN (" + 
          string.Join(",", ListBox2.Items[i].Select(i => i.ToString())) + ")";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T17:55:28.083

当前正在执行的查询以：

```
and MotherTongue = 'xyz' or 'Gujarati' or 'Urdu'... so on. 
```

实际查询应该是：

```
and MotherTongue = 'xyz' or MotherTongue =  'Gujarati' or MotherTongue = 'Urdu' 
```

查询多种语言的最佳方法是 C.Evenhuis 提到的，即使用：

```
and MotherTongue IN ('xyz', 'Gujarati', 'Urdu', 'Hindi'). 
```

# c++ - 在包含 std::string 的函数上使用 throw() 后缀是否安全？

> ID：10261335
> 
> 赞同：4
> 
> 时间：2012-04-21T17:29:26.050
> 
> 标签：c++, exception, exception-handling, std, stdstring

我有一个不抛出任何东西的成员函数，所以我在`throw()`它的末尾附加了后缀，表示它不会抛出任何异常。

我的问题是，在函数中我使用了几个`std::string`，让我们说在初始化时出了点问题`std::string`，它抛出`bad_alloc`or `out_of_range`（或者 std::string 可能出现的其他问题）。

仍然添加`throw()`后缀是否仍然安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T17:38:30.197

赫伯萨特[说](http://books.google.ru/books?id=_1uD7khOQooC&pg=PA130&lpg=PA130&dq=Herb%20Sutter%20throw%28%29%20benefit&source=bl&ots=KDkxgVifvT&sig=-qGuDFBjeiMybvMsUz6Mp0_Cmxk&hl=en&sa=X&ei=8--ST-Z4hJc6uqq4ggQ&redir_esc=y)_

> 异常规范带来的好处远远少于其价值

它带来的问题多于带来的好处。所以，你应该在这样做之前三思而后行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T17:33:53.973

异常规范对在函数内部运行的所有代码做出了承诺，无论您是否编写了它。

如果`std::string`从你的函数内部抛出，那么这个承诺就会被打破，你的程序就会失败。（`std::unexpected`异常，这通常意味着您的程序很难终止）

该`throw()`规范仅在以下情况下是正确的：

*   您的函数所做的任何事情都不会抛出，即使是间接的

或者

*   您的函数捕获所有此类异常并正常退出（不重新抛出）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T17:37:09.557

两件事情。

首先：`throw()`规范添加了一个运行时检查，该函数不会抛出异常，`std::unexpected_exception`如果 promise 被破坏则调用，这将终止程序。

第二：`throw()`不建议使用，并且已在 C++11 中弃用。在 C++11 中，您可以`noexcept`改用（或更具延展性的形式`noexcept(boolean-expression)`）。不创建运行时检查，如果函数抛出，行为是未定义的。

# sql - 对这个复杂的 SQL 使用 cakephp 的 find 方法

> ID：10261356
> 
> 赞同：2
> 
> 时间：2012-04-21T17:31:35.550
> 
> 标签：sql, cakephp, orm, model

我想使用 CakePHP 的 find 方法，这样我就可以利用它的模型关联。问题是我有这个复杂的 SQL 搜索，但我不知道如何将它翻译成 CakePHP 的 find 方法。我一直在使用 $model->query() 然后在 ID 上使用 Set::extract 。问题是我失去了相关顺序。如何将其转换为 Cake 中的 find 方法以便我可以使用关联？

**SQL：**

```
SELECT id, title, SUM(relevance) as total_relevance FROM (
    SELECT 
        card_definitions.id, 
            card_definitions.title,
        (MATCH(card_definitions.title) AGAINST ('%s')) * 5 AS relevance
        FROM card_definitions
    UNION
    SELECT 
        card_definitions.id,
            card_definitions.title,
        (MATCH(card_def_identities.special_ability_text) AGAINST ('%s')) * 0.5 AS relevance
        FROM card_def_identities 
        INNER JOIN card_definitions ON card_def_identities.card_def_sid = card_definitions.id 
    UNION
    SELECT 
        card_definitions.id,
            card_definitions.title,
        (MATCH(brigades.brigade_color) AGAINST ('%s')) AS relevance
        FROM brigades 
        INNER JOIN card_def_brigades ON brigades.id = card_def_brigades.brigade_sid
        INNER JOIN card_definitions ON card_def_brigades.card_def_sid = card_definitions.id 
    UNION
    SELECT 
        card_definitions.id,
            card_definitions.title,
        (MATCH(identifiers.identifier) AGAINST ('%s')) AS relevance
        FROM identifiers
        INNER JOIN card_def_identifiers ON identifiers.id = card_def_identifiers.identifier_sid
        INNER JOIN card_definitions on card_def_identifiers.card_def_sid = card_definitions.id 
    UNION
    SELECT 
        card_definitions.id,
            card_definitions.title,
        (MATCH(card_effects.effect) AGAINST ('%s')) AS relevance
        FROM card_effects
        INNER JOIN card_def_effects ON card_effects.id = card_def_effects.effect_sid
        INNER JOIN card_definitions on card_def_effects.card_def_sid = card_definitions.id 
    ) AS combined_search 
GROUP BY id
HAVING total_relevance > 0
ORDER BY total_relevance DESC
LIMIT 10; 
```

`%s`替换为搜索查询。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:14:55.420

两件事情：

首先，CakePHP 不支持 UNION 直接出炉。如果您想以一种蛋糕的方式重新创建它而不只是将其转储到 query() 中，您应该查看 Chucks 解决方案，他手动创建子查询：[CakePHP 中的 UNION 语法](https://stackoverflow.com/a/3538422/969807 "CakePHP 中的 UNION 语法")。虽然这是为 Cake 1.2 编写的，但它应该为您指明正确的方向。当前关于子查询的文档可以在这里找到：book.cakephp.org/2.0/en/models/retrieving-your-data.html#sub-queries

其次，在开始执行将这个查询硬塞到 Cake 中的任务之前，因为看起来这个查询在没有修改的情况下被重复使用（它只是一个搜索，对吗？）你可能会发现这是在数据库中使用存储过程的好情况. 创建过程后，您可以在模型中创建一个直接调用它的方法。以下是 MySQL 文档必须说的：[使用存储的例程（过程和函数）](http://dev.mysql.com/doc/refman/5.1/en/stored-routines.html)，但使用像 Adminer (adminer.org) 或 phpMyAdmin 这样的工具，这个过程就更简单了。

（很抱歉粘贴了 URL - 我仅限于两个实际链接！）

# ruby - 红宝石清屏

> ID：10261359
> 
> 赞同：8
> 
> 时间：2012-04-21T17:31:51.150
> 
> 标签：ruby, terminal, ruby-1.9

> **可能重复：**
> [如何清除 Ruby 中的终端？](https://stackoverflow.com/questions/3170553/how-can-i-clear-the-terminal-in-ruby)

如何在 ruby​​ 中清除终端屏幕？

```
puts "hello, what's your name?"
input = gets.chomp
<<clearscreen>>
puts "nice to meet you, #{input}" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T17:44:58.043

不知道你到底在问什么，但在这篇文章中有不同的方法来清除 irb / 终端：[你如何清除 IRB 控制台？](https://stackoverflow.com/questions/116593/how-do-you-clear-the-irb-console)

一个有趣的是

为了清除屏幕，只需执行

> `puts "\e[H\e[2J"`

# iphone - 如何在我的应用程序中将文本字段与我的电子邮件链接？

> ID：10261364
> 
> 赞同：1
> 
> 时间：2012-04-21T17:32:22.760
> 
> 标签：iphone, objective-c, xcode

如何将用户在文本字段中插入的信息发送`UITextField`到我的电子邮件？以及如何让信息页面仅在用户第一次进入应用程序时显示一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:40:58.870

您要问的是含糊不清的，但是要将输入的数据输入文本字段并将其放入字符串中，只需使用：

```
NSString *theEmailBody = theTextField.text; 
```

从那里您可以使用标准的 Apple 电子邮件框架发送电子邮件：

```
MFMailComposeViewController *mail =[[MFMailComposeViewController alloc] init];
NSString *theEmailbody = theTextField.text;;
[mail setMessageBody:theEmailbody isHTML:NO]; 
```

或者通过制作您自己的邮件服务器并在那里发送 HTTP 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:40:59.820

您可以在函数中使用以下代码发送电子邮件。

```
MFMailComposeViewController *mail =[[MFMailComposeViewController alloc] init];
NSString *emailbody = textField.text;;
[mail setMessageBody:emailbody isHTML:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T17:42:17.387

Apple 有示例代码向您展示如何在应用程序电子邮件中进行设置（链接如下）

完成此操作后，您可以通过在适当的地方添加它来轻松地将电子邮件的正文更改（例如）为 textField 的内容。

```
NSString *emailBody = myTextField.text; 
```

此外，如果您希望信息页面仅在应用程序首次启动时可见，请查看`NSUserDefaults`. 这将允许您存储和检索一个值，让应用程序知道是否加载您的信息页面。

[https://developer.apple.com/library/ios/#samplecode/MailComposer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008865](https://developer.apple.com/library/ios/#samplecode/MailComposer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008865)

# java - 一个对等点如何找到另一个对等点？

> ID：10261369
> 
> 赞同：5
> 
> 时间：2012-04-21T17:33:15.723
> 
> 标签：java, jakarta-ee, jxta

当有人在 JXTA 中搜索有关对等点如何找到彼此的信息时，有一个重要的问题并不清楚。假设我们有两个同行，一个在柏林，另一个在伦敦，这是一个集合点。我的问题是柏林的同行如何找到伦敦的同行？

1.  JXTA 中有什么方法可以解决这个问题？
2.  你可以发布一个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:10:45.933

谷歌搜索 jxta 对等发现协议，我们发现[http://java.sun.com/developer/Books/networking/Wilson/wilson_ch04.pdf](http://java.sun.com/developer/Books/networking/Wilson/wilson_ch04.pdf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T10:29:08.553

您需要知道公共 Rendezvous 对等点的 URI，它是您在伦敦和柏林的对等点都可以看到的预先存在的对等点。当你启动你的对等点时，你使用这个集合点对等点的 URI 为 NetworkConfigurator 播种，如下所示：

```
NetworkManager manager = new NetworkManager(...)
NetworkConfigurator config = manager.getConfigurator();
config.addRdvSeedingURI("tcp://123.123.123.123:1234"); 
```

我认为@JVerstry 在这里说了类似的话：[https ://stackoverflow.com/a/4953034/1240660](https://stackoverflow.com/a/4953034/1240660)

# postgresql - 如何检查一个表中的某些内容是否未在另一个表中使用

> ID：10261372
> 
> 赞同：1
> 
> 时间：2012-04-21T17:33:53.057
> 
> 标签：postgresql, foreign-keys, primary-key

我有三张桌子：

```
CREATE TABLE activities (
activity varchar(20) Primary key
); 
```

有数据：

```
Table_Tennis1
Table_Tennis2
Table_Tennis3 
```

和

```
CREATE TABLE times (
time varchar(5)
); 
```

有数据

```
09:00
10:00
11:00
12:00
13:00
14:00
15:00
16:00
17:00
18:00
19:00
20:00 
```

最后

```
CREATE TABLE planner (
day varchar(9) foreign key
time varchar(5) foreign key
activity varchar(20) foreign key
member bigint foreign key
); 
```

和主键=（天，时间，活动）

有数据

```
friday,09:00,Table_Tennis1,4
friday,10:00,Table_Tennis2,2 
```

我想知道是否有可能找出在某一天的某个时间没有使用的所有乒乓球室，或者在某一天的所有时间都没有被预订的所有房间。

所以它应该给我一个 result_set

```
09:00, Table_Tennis2, Table_Tennis3
10:00, Table_Tennis1, Table_Tennis3
11:00, Table_Tennis1, Table_Tennis2, Table_Tennis3 ect ect 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:10:55.557

> 某一天某一时间未使用的所有乒乓球室，

```
SELECT activity
FROM   activities a
WHERE  NOT EXISTS (
    SELECT *
    FROM   planner p
    WHERE  p.activity ~~ 'Table_Tennis%' -- may or may not be needed
    AND    p.day  = 'friday'
    AND    p.time = '09:00'
    AND    p.activity = a.activity -- was missing in my 1st draft
    ); 
```

* * *

> 一天内所有时间尚未预订的所有房间。

```
SELECT a.activity
FROM   activities a
LEFT JOIN (
    SELECT activity
    FROM   planner p
    WHERE  day = 'friday'
    GROUP  BY 1
    HAVING count(*) = 12 -- assuming there are exactly 12 slots
    ) p USING (activity)
WHERE p.activity IS NULL; -- excludes all fully booked rooms 
```

或者：

```
SELECT activity
FROM   activities a
WHERE NOT EXISTS (
    SELECT activity
    FROM   planner p
    WHERE  day = 'friday'
    GROUP  BY 1
    HAVING count(*) = 12 -- assuming there are exactly 12 slots
    ); 
```

**但不是：**

```
 选择活动
FROM 活动
加入 （
    选择活动
    来自计划者 p
    WHERE day = '星期五'
    按 1 分组
    计数 (*) < 12
    ) p 使用（活动）； 

```

...因为那会丢弃当天没有条目的房间。

* * *

您可以考虑使用

```
slot time 
```

代替

```
time varchar(5) 
```

`time`不应用作标识符。它是所有 SQL 标准中的[保留字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)，也是 PostgreSQL 中的类型名称。
此外，[数据类型`time`](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html)更适合您的目的，并且占用的空间比`varchar(5)`.

和

```
日期外键...
, 时隙外键 ...

```

代替

```
 day varchar(9) foreign key ...
,time varchar(5) foreign key ... 
```

工作日的名称可以让你覆盖一周。我想你想要的不止这些。

# php - 不返回成功的表单验证规则

> ID：10261374
> 
> 赞同：0
> 
> 时间：2012-04-21T17:34:06.877
> 
> 标签：php, codeigniter

我试图弄清楚为什么我的表单验证运行函数返回错误。根据文档，它说以下内容：

> run() 函数仅在成功应用您的规则且没有任何失败的情况下返回 TRUE。

这是我的规则的样子：

```
$this->form_validation->set_rules('nicknames', 'Nicknames',
        'required');
    $this->form_validation->set_rules('hometown', 'Hometown',
        'required');
    $this->form_validation->set_rules('height', 'Height',
        'required');
    $this->form_validation->set_rules('Weight', 'Weight',
        'required');
    $this->form_validation->set_rules('manager', 'Manager',
        'required|integer');   
    $this->form_validation->set_rules('setup', 'Setup',
        'required');
    $this->form_validation->set_rules('finisher', 'Finisher',
        'required');
    $this->form_validation->set_rules('biography', 'Biography',
        'required'); 
```

这是帖子提交运行的内容：

```
biography   Kid coming out of college getting the chance of a lifetime.
finisher    Idolizer
height  5'4"
hometown    Las Vegas, Nevada
manager 0
nicknames   "The Quintessential Cruiserweight of KOW!"; "K-Dub"
setup   That's Wondeful
submit  Submit
weight  140 lbs.

http://pastebin.com/F9XeEibf

function biographySubmit()
{
    $outputArray = array('error' => 'yes', 'message' => 'unproccessed');
    $outputMsg = '';
    // Sets validation rules for the login form
    $this->form_validation->set_rules('nicknames', 'Nicknames',
        'required');
    $this->form_validation->set_rules('hometown', 'Hometown',
        'required');
    $this->form_validation->set_rules('height', 'Height',
        'required');
    $this->form_validation->set_rules('Weight', 'Weight',
        'required');
    $this->form_validation->set_rules('manager', 'Manager',
        'required|integer');   
    $this->form_validation->set_rules('setup', 'Setup',
        'required');
    $this->form_validation->set_rules('finisher', 'Finisher',
        'required');
    $this->form_validation->set_rules('biography', 'Biography',
        'required');   

    // Checks to see if login form was submitted properly(
    if (!$this->form_validation->run())
    {
        $outputArray['message'] =
            'There was a problem submitting the form! Please refresh the window and try again!';
    }
    else
    {
        $bioFields = array($this->input->post('nicknames'), $this->input->post('hometown'), $this->input->post('height'), $this->input->post('weight'), $this->input->post('manager'), $this->input->post('setup'), $this->input->post('finisher'), $this->input->post('biography'));          
        if ($this->bios->updateBiography($bioFields, $this->session->userdata('defaultRosterListID')))
        {
            $outputArray = array('success' => 'Yes', 'message' =>
                                        'Biography were updated successfully!');
        }
        else
        {
            $outputArray['message'] =
            'The biopgraphy was not able to be updated in the database. Please try again later!';
        }
    }
    echo json_encode($outputArray);
} 
```

jQuery代码：

```
var validateform = $("#biographyForm").validate({
    invalidHandler: function(form, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {
            var message = errors == 1
            ? 'You missed 1 field. It has been highlighted.'
            : 'You missed ' + errors + ' fields. They have been highlighted.';
            $('.box #biographyForm .content').removeAlertBoxes();
            $('.box #biographyForm .content').alertBox(message, {type: 'warning', icon: true, noMargin: false});
            $('.box #biographyForm .content .alert').css({
                margin: '0',
                borderLeft: 'none',
                borderRight: 'none',
                borderRadius: 0
            }).delay( 3000 ).fadeOut( 'slow' );
        } else {
            $('.box #biographyForm .content').removeAlertBoxes();
        }
    },
    ignore : 'input:hidden:not(:checkbox):not(:radio)',
    showErrors : function(errorMap, errorList) {
                    this.defaultShowErrors();
                    var self = this;
                    $.each(errorList, function() {
                        var $input = $(this.element);
                        var $label = $input.parent().find('label.error').hide();
                        if (!$label.length) {
                            $label = $input.parent().parent().find('label.error');
                        }
                        if($input.is(':not(:checkbox):not(:radio):not(select):not([type=file])')) {
                            $label.addClass('red');
                            $label.css('width', '');
                            $input.trigger('labeled');
                        }
                        $label.fadeIn();
                    });
                },
    errorPlacement : function(error, element) {
                    if(element.is(':not(:checkbox):not(:radio):not(select):not([type=file])')) {
                        error.insertAfter(element);
                    } else if(element.is('select')) {
                        error.appendTo(element.parent());
                    } else if (element.is('[type=file]')){
                        error.insertAfter(element.parent());
                    } else {
                        error.appendTo(element.parent().parent());
                    }

                    if ($.browser.msie) {
                        error.wrap('<div class="error-wrap" />');
                    }
                },
    submitHandler: function(form) {
        var dataString = $('#biographyForm').serialize();
        $.ajax({
            type: 'POST',
            url: 'biography/biographySubmit',
            data: dataString,
            dataType: 'json',
            success:  function(data) {
                if (data.error) {
                    $('.box #biographyForm .content').removeAlertBoxes();
                    $('.box #biographyForm .content').alertBox(data.message, {type: 'warning', icon: true, noMargin: false});
                    $('.box #biographyForm .content .alert').css({
                        width: '',
                        margin: '0',
                        borderLeft: 'none',
                        borderRight: 'none',
                        borderRadius: 0
                    }).delay( 3000 ).fadeOut( 'slow' );
                }
                else
                {
                    $('.box #biographyForm .content').removeAlertBoxes();
                    $('.box #biographyForm .content').alertBox(data.message, {type: 'success', icon: true, noMargin: false});
                    $('.box #biographyForm .content .alert').css({
                        width: '',
                        margin: '0',
                        borderLeft: 'none',
                        borderRight: 'none',
                        borderRadius: 0
                    }).delay( 3000 ).fadeOut( 'slow' );   
                }
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:57:58.163

我不确定这是否会完全解决您的问题，但您的表单似乎没有`action`. 它应该是类似的东西`action="[your site url]/your_controller_name/biographySubmit"`。

你可以使用 CodeIgniter 的 URL Helper 并使用它：`action="<?php echo site_url("your_controller_name/biographySubmit"); ?>"`

如果没有操作，表单中的数据将不会传递给`biographySubmit`控制器​​中的函数。

# php - 多用户的 CRM 数据库设计

> ID：10261376
> 
> 赞同：0
> 
> 时间：2012-04-21T17:34:15.253
> 
> 标签：php, mysql, database, database-design, relational-database

好的，我已经为使用 PHP 和 MySQL 的客户端构建了一个自定义 CRM Web 应用程序。该应用程序似乎对他们非常有效，因此我决定创建一个向公众开放的商业版本。

它的基本思想是，它获取从网站捕获的数据，然后用它填充数据库。目前网站前端有简单的插入语句。

问题是，我希望人们能够注册该服务，创建一个帐户并自行定制以满足他们的需求。我的想法是，一旦他们注册，他们将获得一个表单操作，当安装在他们的页面上时，该操作会提交到他们的帐户。

关于数据库等中的表，目前只有一个客户表，因为只有一个网站在使用它。如果人们要注册并使用该服务，我是否为每个帐户创建一个新表？这可能是对的，但对我来说似乎有点傻。或者有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:36:21.493

通常，最好添加一个`customer_id`列，并`WHERE customer_id=12345`为所有 MySQL 查询添加一个子句。每个客户有一个单独的表当然是可能的，但它可能无法很好地扩展。

# python - 代理到另一台服务器的瓶中路由

> ID：10261378
> 
> 赞同：4
> 
> 时间：2012-04-21T17:34:18.677
> 
> 标签：python, http, web-applications, proxy, bottle

我有一个bottle.py 应用程序，它已经建立了许多路线。我想创建一个新`get`路由，当访问该路由时，将请求传递给另一个 HTTP 服务器并将结果转发回来。

完成这项工作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T11:50:30.933

原则上，您只需要安装 wsgiproxy 模块并执行以下操作：

```
import bottle
from wsgiproxy.app import WSGIProxyApp

root = bottle.Bottle()
proxy_app = WSGIProxyApp("http://localhost/")
root.mount(proxy_app,"/proxytest") 
```

运行此应用程序会将 /proxytest 下的所有请求代理到在 localhost:80 上运行的服务器。在实践中，我发现如果不采取额外步骤来删除逐跳标头，这将无法正常工作。我采用了[这个要点](https://gist.github.com/1283467)中的代码并将其剥离，以制作一个[成功代理请求的简单应用程序](https://gist.github.com/2888380)。

# objective-c - 通过字符串名称或变量访问objective-c对象

> ID：10261380
> 
> 赞同：2
> 
> 时间：2012-04-21T17:34:32.103
> 
> 标签：objective-c

我一直在环顾四周，还没有找到任何关于这样做的东西，我不确定它是否可能，但这就是我想要实现的目标。请注意，我给出了一个非常简单的例子来说明我正在尝试做的事情。此外，发布的代码的相似之处都是假设的，并不意味着更正代码语法。它只是为了通过引用类似类型的功能来帮助进一步说明所需的最终结果。所以请在提供替代方法之前了解这个概念......

话虽如此，正如标题所说，我想看看我是否可以访问一个对象，让我们通过它的字符串名称或变量说一个 uilabel，**而不**使用 if 语句。例如，假设我们有 3 个 uilabes

```
UILabel *label1;
UILabel *label2;
UILabel *label3; 
```

从那里我们做所有适当的合成和什么不。现在在某个时候，我想引用一个基于 let say 和 int 的标签。

```
int intNumber = 2; 
```

这是理论部分。我现在想设置名称中具有匹配 int 值的标签的文本。

```
label(%i, intNumber).text = [NSString stringWithFormat:@"This is Label %i", intValue]; 
```

结果将是......

```
label2.text = @"This is Label 2"; 
```

如果 int 值为 1，则 label1 将被更改。或者如果它是 3，那么 label3 会被改变，等等......

或者是否可以使用标签的字符串名称完成相同的过程。

```
int intValue = 1;

NSString *labelName; 
```

然后在某个时候

```
labelName = [NSString stringWithFormat:@"label%i",intValue]; 
```

现在以某种方式通过引用“labelName”来设置 label1 的文本来调用它。如果有人可以提出建议或评论是否可以完成这样的事情，我们将不胜感激。我知道您可以通过字符串名称引用类和选择器，但我不确定对象？我不知道“valueForKey：”是否是我应该这样做的方式？

很抱歉这篇冗长的帖子，但我只是想确保我说出了我想做的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T14:04:48.640

对不起，伙计们，我终于弄清楚了。“setValue:forKeyPath:”原来是我需要的。所以举个例子……

例子.h

```
@property (strong, nonatomic) UILabel *label1;
@property (strong, nonatomic) UILabel *label2;
@property (strong, nonatomic) UILabel *label3; 
```

例子.m

```
@synthesize label1, label2, label3;

- (void)someMethod:(int)labelVarInt {

[self setValue:[NSString stringWithFormat:@"This is Label %i", labelVarInt] forKeyPath:[NSString stringWithFormat:@"label%i.text", labelVarInt]];

} 
```

希望这可以帮助其他需要做类似事情的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T17:37:32.833

如果案例只是索引字符串，您可能应该使用数组，否则您正在寻找自省（看看[这个问题](https://stackoverflow.com/questions/2299841/objective-c-introspection-reflection)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T17:41:20.960

我认为您需要将标签存储在 NSArray 中，然后您可以通过索引访问标签。

另一种方法是使用 KVC 获取标签。

# gcc - 为什么要在项目中使用#include_next？

> ID：10261382
> 
> 赞同：66
> 
> 时间：2012-04-21T17:34:53.617
> 
> 标签：gcc, include, c-preprocessor

引用有关 Wrapper Headers 的 iOS[文档](http://developer.apple.com/library/ios/#documentation/DeveloperTools/gcc-4.0.1/cpp/Wrapper-Headers.html)：

> `#include_next`不区分 <file> 和 "file" 包含，也不检查您指定的文件是否与当前文件同名。它只是查找命名的文件，从搜索路径中找到当前文件的目录之后的目录开始。
> 
> 使用 `#include_next' 会导致很大的混乱。我们建议仅在没有其他选择时才使用它。特别是，它不应该用在属于特定程序的头文件中；它应该仅用于按照 fixincludes 进行全局更正。

那么，两个问题，什么是#include_next，以及为什么你需要使用它？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-04-21T19:30:34.060

如果您想用您自己的制作替换默认标题，则使用它，例如，假设您要替换“stdlib.h”。您将在项目中创建一个名为 stdlib.h 的文件，该文件将被包含在内，而不是默认标头。

如果您想向 stdlib.h 添加一些东西而不是完全替换它，则使用 #include_next。您创建一个名为 stdlib.h 的新文件，其中包含：

```
#include_next "stdlib.h"
int mystdlibfunc(); 
```

并且编译器不会再次递归地包含*您的*stdlib.h，就像普通的#include一样，而是继续在其他目录中查找名为“stdlib.h”的文件。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-08-30T15:20:51.560

如果您支持某些东西的多个版本，这很方便。例如，我正在编写支持 PostgreSQL 9.4 和 9.6 的代码。存在许多内部 API 更改，主要是现有函数的新参数。

## 兼容性标头和包装函数

我可以用包装器函数编写兼容性标头，`static inline`并为所有内容使用新名称，基本上是包装器 API，我在代码中的任何地方都使用包装器名称。说`something_compat.h`：

```
#include "something.h"

static inline something*
get_something_compat(int thingid, bool missing_ok)
{
    assert(!missing_ok);
    return get_something(thingid);
} 
```

但是`_compat`到处散布或任何后缀都很难看。

## 包装头

相反，我可以在针对旧版本构建时在包含路径中插入一个兼容性标头，例如`compat94/something.h`：

```
 #include_next "something.h"

 #define get_something(thingid, missing_ok) \
 ( \
     assert(!missing_ok), \
     get_something(thingid) \
 ) 
```

所以其余的代码可以只使用 9.6 签名。在针对 9.4 构建时，我们将前缀`-Icompat94`到标题搜索路径。

需要注意防止多次评估，但如果你正在使用`#include_next`你显然不介意依赖 gcc。在这种情况下，您还可以使用[语句表达式](https://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html)。

当新版本是“主要”目标时，这种方法很方便，但在有限的时间段内需要旧版本的向后兼容性。因此，您将逐步弃用旧版本，并尝试参考当前版本保持代码清洁。

## 备择方案

或者做个懂事的人，用C++，用重载函数和模板内联函数：p

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-12T02:47:47.680

include_next 用作预处理器指令，告诉编译器从解析到此头文件中排除直到并包括文件名 file.h 的搜索路径。典型的需要是当需要使用两个同名的头文件时。谨慎使用此类功能，仅在绝对必要时使用。

### 例如：

源 file.c 内容与路径 1 中的通常 file.h：

```
#include <file.h>
 int main() {
     printf("out value: %d", out_val);
     exit 0;
     } 
```

路径 1 中的 file.h 头文件包含路径 2 中的 file.h 内容： include_next 指示路径 1 子目录不用作 file.h 的搜索路径，而是使用路径 2 子目录作为搜索路径。这样，您可以拥有 2 个同名文件，而不必担心调用对自身的循环引用。

```
# include_next <file.h>
int out_val = UINT_MAX - INT_MAX; 
```

路径 2 中的 file.h 内容

```
#define INT_MAX 1<<63 - 1
#define UINT_MAX 1<<64 - 1 
```

# jquery - 如何在html5中显示拖动内容时显示的标签？

> ID：10261386
> 
> 赞同：0
> 
> 时间：2012-04-21T17:35:35.757
> 
> 标签：jquery, html, css, drag-and-drop

当您在网站上拖动某些东西时，有没有办法创建一个跟随鼠标的 div？

我希望 div 仅在用户拖动已设置为可拖动的内容时才可见。

我真的只是想要一种超级简单的方法来将拖动项目从只是一个幻影图像更改为我可以设计的不同的东西。

谢谢，伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:45:54.593

您可以在您的 html 正文上隐藏一个 div，然后在拖动时可以将 css 'display' 属性设置为 'block'，最后使用鼠标事件的 clientx 和 clienty 属性和一点 javascript 来重新定位 div。

希望有帮助。

# c# - 如何以编程方式更改/替换模板中的 StoryBoard？

> ID：10261389
> 
> 赞同：2
> 
> 时间：2012-04-21T17:36:15.860
> 
> 标签：c#, wpf, xaml, storyboard

我花了很长时间弄清楚如何在我的 WPF 窗口中更改情节提要的一个属性。

我的窗口有一个动画，它通过一种“卷起”动画来减小窗口的大小。根据某些条件（是否设置了某个道具），我们希望窗口更长一点以容纳额外的项目。

我一直在使用 this.FindResource() 来抓取元素，这没问题。但当然，Storyboard 被冻结了，其中包含的 DoubleAnimations 也被冻结了，所以我无法更改任何内容。

所以我想，好吧，我就换掉整个故事板。

```
<Trigger Property="IsMouseOver" Value="True">
    <Trigger.ExitActions>
        <BeginStoryboard Storyboard="{StaticResource ToolbarCollapse_NoIB}" />
    </Trigger.ExitActions>
</Trigger> 
```

我在想，以编程方式，我可以进入代码隐藏并将触发器更改为使用 ToolbarCollapse_YesIB。

在那次尝试中，我可以做到这一点：

```
var tbTemplate = (ControlTemplate)this.FindResource("ToolbarTemplate");
var newStoryboard = (Storyboard)this.FindResource("ToolbarCollapse_YesIB");
tbTemplate.Triggers[2].ExitActions[0] = ??? needs to be a TriggerAction 
```

这就是我卡住的地方。如何为该情节提要创建 TriggerAction？构造函数并不真正适用于此，方法也不适用。

这些课程的文档让我认为我偏离了轨道。

任何人都可以帮助我使这种方法奏效，或者让我了解另一种效果更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:45:55.453

我想出了一个使用替代方法的解决方案。似乎它可能有点hacky，但它确实有效。

我创建了两个故事板，`ToolbarCollapse_YesIB`并且`ToolbarCollapse_NoIB`. 它们仅在 height 属性上有所不同。

然后我用两个 MultiTriggers 替换了我原来的问题触发器：

```
<MultiTrigger>
    <MultiTrigger.Conditions>
        <Condition Property="IsMouseOver" Value="True"/>
        <Condition Property="MinHeight"
                   Value="{StaticResource ToolbarCollapsedHeight_YesIB}"/>
    </MultiTrigger.Conditions>
    <MultiTrigger.ExitActions>
        <BeginStoryboard Storyboard="{StaticResource ToolbarCollapse_YesIB}" />
    </MultiTrigger.ExitActions>
</MultiTrigger>

<MultiTrigger>
    <MultiTrigger.Conditions>
        <Condition Property="IsMouseOver" Value="True"/>
        <Condition Property="MinHeight"
                   Value="{StaticResource ToolbarCollapsedHeight_NoIB}"/>
    </MultiTrigger.Conditions>
    <MultiTrigger.ExitActions>
        <BeginStoryboard Storyboard="{StaticResource ToolbarCollapse_NoIB}" />
    </MultiTrigger.ExitActions>
</MultiTrigger> 
```

我使用对象的构造函数来设置`MinHeight`. 根据我的 IB 字段的存在，我设置`MinHeight`为`ToolbarCollapsedHeight_YesIB`或`_NoIB`。

所以现在如果`MinHeight=(my YesIB size)`，一个故事板是活动的。如果`MinHeight=(my NoIB size)`，则另一个故事板处于活动状态。

（实际上，我还有另外一对`ToolbarExpand_YesIB/NoIB`模板，分配给`MultiTrigger.EnterActions`上述触发器，但为简洁起见，我将它们省略了。）

这是一个真正的痛苦。我希望这可以帮助其他发现类似情况的人。

# javascript - 使用 javascript 更改 URL 链接而不刷新

> ID：10261393
> 
> 赞同：5
> 
> 时间：2012-04-21T17:36:30.697
> 
> 标签：javascript, browser-history

是否可以在不刷新页面的情况下自动将 url example.com/4000/title-2/#!4000 更改为 example.com/4000/title-2 ？基本上是从 URL 中删除“/#!4000”。请注意，删除 hashbang 之前的“/”很重要，而不仅仅是 hashbang 。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T17:39:12.617

不知道这对你来说是否足够，以及它是否完全跨浏览器工作...... chrome 接受：

```
location.hash = ""; 
```

但这会在地址栏中保留“#”

在完全支持 html5 历史 API 的现代浏览器中：

```
window.history.replaceState('Object', 'Title', '/4000/title-2'); 
```

编辑：这不会改变浏览器的历史

编辑 2：刚刚找到[这个 stackoverflow 资源](https://stackoverflow.com/questions/352343/changing-browsers-address-bar-without-refreshing)

# .htaccess - .htaccess 重写复杂的 url

> ID：10261396
> 
> 赞同：0
> 
> 时间：2012-04-21T17:36:58.270
> 
> 标签：.htaccess, mod-rewrite, redirect, url-rewriting

我有这个网址：

> [http://www.mysite.com/pronostici/data/2012/aprile-2012/7216-prono-02-04-2012](http://www.mysite.com/pronostici/data/2012/aprile-2012/7216-prono-02-04-2012)

我已经重定向到

> [http://www.mysite.com/pronostici/data_incontri/2012-04-02](http://www.mysite.com/pronostici/data_incontri/2012-04-02)

我将如何在 .htaccess 中执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:31:11.610

如果我正确理解您的源 URL，您可以使用末尾的日期来构建您的目标 URL。所以，这样的事情应该有效：

```
RewriteEngine On
RewriteRule pronostici/data/.*/\d+-prono-(\d+)-(\d+)-(\d+)$ http://www.mysite.com/pronostici/data_incontri/$3-$2-$1 [R=301,L] 
```

# asp.net - 客户端请求是否总是发送 cookie？

> ID：10261400
> 
> 赞同：1
> 
> 时间：2012-04-21T17:37:22.730
> 
> 标签：asp.net, html, cookies, request

在每一个`request/response`中，cookie 都被来回发送。

关于什么 ：

```
<img src='myPic.jpg' /> 
```

浏览器是否也为该请求发送 cookie？

如果，那么：是否有任何开关告诉：“*对于图片类型，不要发送 cookie* ”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T17:39:54.750

> 如果是这样：是否有任何开关告诉：“对于图片类型，不要发送 cookie”。

有点。您可以做的是从一个单独的域中提供图片。例如，StackOverflow 使用[sstatic.net](http://sstatic.net/)。只要您从未在该单独域上设置过 cookie，对其的所有请求都将缺少任何 cookie，如果您想在站点的 cookie 中放入大量数据，这可能会对性能产生积极影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T17:37:53.520

不，他们**必须**在每次请求时都发送它们，因为他们不知道图像是否仅适用于经过身份验证的用户。

这就是为什么大型网站经常为其静态资源使用单独的域 - 没有与这些域关联的任何 cookie 会使 http 请求更小一些。

# ruby-on-rails - Formtastic / rails表单未提交

> ID：10261401
> 
> 赞同：1
> 
> 时间：2012-04-21T17:37:30.837
> 
> 标签：ruby-on-rails, has-and-belongs-to-many, formtastic

我正在尝试使用 formtastic 制作一个表格，我可以在其中输入一个 :opposition 选择一个 :venue 和一个 :team ，然后显示一个玩家列表，我可以勾选这些列表以选择他们

我已经设置了表单，因此它可以正确呈现，但是在提交时它不会保存任何信息，只是重新加载页面。

我的代码在我的 github 上：[https ://github.com/jpknegtel/st_francis](https://github.com/jpknegtel/st_francis)

# 楷模

这涉及以下模型：

**播放器**

```
 has_many :player_fixtures
 has_many :fixtures, :through => :player_fixtures 
```

**固定装置**

```
 has_many :player_fixtures
 has_many :players, :through => :player_fixtures 
```

**播放器夹具**

```
belongs_to :player
belongs_to :fixture 
```

# 控制器

```
def create
@fixture = Fixture.new(params[:fixture])
if @fixture.save
  flash[:notice] = "Fixture Created"
  redirect_to(:action =>'list')
else
  flash.now[:error] = "Could not save fixture. Please re-enter information"
  render('new')
end
end

def new
 @fixture = Fixture.new
end 
```

# 形式

```
<%= semantic_form_for :fixture do |f| %>
 <%= f.inputs do %>
  <%= f.input :opposition  %>
  <%= f.input :team, :as => :select, :collection => Team.all %>
  <%= f.input :venue, :as => :check_boxes, :collection => Hash[Venue.all.map{|b| [b.name, b.id]}]%>
  <%= f.input :players, :as => :check_boxes, :collection => Hash[Player.all.map{|b| [b.full_name, b.id]}], :required => true  %>
<% end %>
<%= f.actions do %>
 <%=  f.action :submit, :as => :button %>
 <%=  f.action :cancel, :as => :link %>
<% end %>
<% end %> 
```

因此，现在提交表单时，什么都没有传递。当查看网络砖服务器时，没有任何内容被提交，但页面只是被重新加载。

可以使用 rails 控制台插入记录。

编辑：我现在可以在提交时看到这个。

```
Started POST "/fixtures/new" for 127.0.0.1 at 2012-04-23 15:00:21 +0100
Processing by FixturesController#new as HTML
Parameters: {"utf8"=>"✓",     "authenticity_token"=>"Hx4TChWiUdhpZbAfgWUYMWBKao86pZh0tGzwVKy+P80=", "fixture"=> {"opposition"=>"Mid sussex", "team"=>"1", "venue"=>["", "1"], "players"=>["", "1", "3"]}, "button"=>""}
Team Load (1.0ms)  SELECT `teams`.* FROM `teams` 
Venue Load (1.0ms)  SELECT `venues`.* FROM `venues` 
Player Load (1.0ms)  SELECT `players`.* FROM `players` 
Rendered fixtures/new.html.erb within layouts/application (173.0ms)
Completed 200 OK in 200ms (Views: 163.0ms | ActiveRecord: 36.0ms)
[2012-04-23 15:00:21] WARN  Could not determine content-length of response body. Set     content-length of the response or set Response#chunked = true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:30:59.503

我的猜测是质量分配。您需要允许 rails 通过批量分配更新某些属性。

将此行添加到您的固定装置模型中：

```
attr_accessible :players_attributes, :opposition, :team_id, :venue_id, :date 
```

这允许 rails 通过`new`和`update_attributes`方法设置这些属性。

有关更多信息，请参阅[有关安全性的 rails 指南](http://guides.rubyonrails.org/security.html#mass-assignment)。

# c# - 获取设置属性c#的问题

> ID：10261403
> 
> 赞同：0
> 
> 时间：2012-04-21T17:37:35.180
> 
> 标签：c#, asp.net

我坚持这一点，我真的要在几分钟内把我的头撞到墙上我有一个日志页面，用户在其中输入用户名和密码，并在他们按下此按钮时单击登录，调用一个函数来获取所有用户详细信息，即firstname surname Email AccountType Examtaken 等函数中我试图设置“获取；设置；” 属性，所以我可以在主页上使用它们，但由于某些愚蠢的原因，我不知道它不起作用！下面你会看到当用户点击登录时调用的方法

```
public class ExamMethods
{
    public int UserID { get; set; }
    public string FirstName { get; set; }
    public string Surname { get; set; }
    public string Email { get; set; }
    public int AccountType { get; set; }
    public bool ExamTaken { get; set; }

    private enum Datafield
    {
        UserID,
        FirstName,
        Surname,
        Email,
        AccountType,
        ExamTaken,
    }

    public Hashtable CheckLogin(Hashtable Usercredentials)
    {
        try
        {
            SqlConnection Connection = new SQLAccess().CreateConnection();
            SqlCommand Command = new SqlCommand("GetUserDetails", Connection);
            Command.CommandType = System.Data.CommandType.StoredProcedure;
            foreach (DictionaryEntry SpParameter in Usercredentials)
            {
                Command.Parameters.Add(new SqlParameter(SpParameter.Key.ToString(), SpParameter.Value.ToString()));
            }
            SqlDataReader da = Command.ExecuteReader();

            while (da.Read())
            {
                Details.Add("UserID", da["UserID"]);
                UserID = (da.IsDBNull((int)Datafield.UserID)) ? 0 : da.GetInt32((int)Datafield.UserID);
                Details.Add("FirstName", da["FirstName"]);
                FirstName = (da.IsDBNull((int)Datafield.FirstName)) ? "" : da.GetString((int)Datafield.FirstName);
                Details.Add("Surname", da["Surname"]);
                Surname = (da.IsDBNull((int)Datafield.Surname)) ? "" : da.GetString((int)Datafield.Surname);
                //Details.Add("AccountType", da["AccountType"]);
                //AccountType = (da.IsDBNull((int)Datafield.AccountType)) ? 0 : da.GetInt32((int)Datafield.AccountType);
                //Details.Add("ExamTaken", da["ExamTaken"]);
                //ExamTaken = (da.IsDBNull((int)Datafield.ExamTaken)) ? false : da.GetBoolean((int)Datafield.ExamTaken);
            }
            Connection.Close();
            da.Close();
            return Details;
        }
        catch
        {
            Console.WriteLine("Error Checking Login Details");
            return Details;
        }
    }
} 
```

正如您在上面的 while(da.read) 中看到的那样，我在调试时将值分配给哈希表和 get set 方法，我可以看到值进入！我 100% 这个值不是 null 或空的

然后代码返回登录页面，如果一切正常，则返回登录页面，然后 response.redirect 到用户可以参加考试的主页，但是在 home.aspx 的页面加载中，我有一个我想要的标签popualte 与用户名，所以我引用了 ExamMethods 类的 get 属性，但它为空？这怎么可能？我错过了什么？这是后面 home.aspx 页面的代码

```
 public partial class Home : System.Web.UI.Page
    {

       Hashtable UpdateUser = new Hashtable();
       protected void Page_Load(object sender, EventArgs e)
       {
           Methods.ExamMethods obj_UserDetails = new Methods.ExamMethods();
           if (Request.QueryString["uid"] == null)
           {
               Response.Redirect("Login.aspx");
           }
           else
             lblUserName.Text = obj_UserDetails.FirstName;

       } 
```

是不是因为我从登录页面到主页使用了reponse.redirect，所以get set方法什么都不是？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T17:43:58.243

处理网页时，变量不会在网页之间共享。您可能知道 HTTP 是一种无状态协议。

那么我该怎么做呢？

你需要状态管理。你需要一种方法来传递信息。据我所知，[Sessions](http://msdn.microsoft.com/en-us/library/ms178581.aspx)似乎是存储您需要在多个页面中使用的这些数据的最佳位置。

但是会话并不是您拥有的唯一状态管理选项。您还有更多内容，具体取决于您要存储的内容、要存储的数量以及要在何处/何时访问它们。

我建议您阅读有关[ASP .NET 状态管理](http://msdn.microsoft.com/en-us/library/75x4ha6s.aspx)的内容，也阅读有关[建议](http://msdn.microsoft.com/en-us/library/z1hkazw7.aspx)以了解在哪种情况下使用哪种状态管理功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T17:47:13.043

在`Page_Load`方法中，您`Methods.ExamMethods()`每次都创建一个新实例，因此它的所有属性都没有被初始化。重定向到登录页面后，执行登录并被重定向回来，`Page_Load`再次执行并创建该类的新实例。

首选的方法是根据`uid`您在`QueryString`.

```
protected void Page_Load(object sender, EventArgs e)
{
    Methods.ExamMethods obj_UserDetails = new Methods.ExamMethods();

    if (Request.QueryString["uid"] == null)
    {
        Response.Redirect("Login.aspx");
    }
    else
    {
        if (!Page.IsPostback)
        {
            //read value of uid parameter
            int uid = Request.QueryString["uid"];
            //access database to retrieve user's details
            obj_UserDetails = GetUserDetails(uid);
            lblUserName.Text = obj_UserDetails.FirstName;
        }
    }

} 
```

值得一提的是，您可以使用`Page.IsPostback`属性来填充用户数据的控件。回发`ViewState`机制应保留控件的内容。

还有一些其他机制允许您在页面之间传递数据，例如***Session state***。如果您需要更多页面上的用户详细信息而不仅仅是这两个页面，则可以使用此选项。这样您就不必经常访问数据库。

使用`Server.Transer()`方法将用户重定向到另一个页面并使用`PreviousPage`对象也可以让您访问其他页面，但我认为直接在*主页*`QueryString`上使用和读取数据在您的情况下是最合适的。

 *可能有用的链接：

*   [ASP.NET 会话状态概述](http://msdn.microsoft.com/en-us/library/ms178581.aspx)
*   [了解 ASP.NET 视图状态](http://msdn.microsoft.com/en-us/library/ms972976.aspx)
*   [HttpServerUtility.Transfer 方法](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.transfer.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T17:56:10.190

当您浏览 Web 上的页面时，实例不会保持活动状态，您可以在会话中存储您需要的内容并在新页面加载时获取它您可以在需要存储数据时执行此操作

```
Session["data"] = new Data("SomeData"); 
```

当您再次需要数据时，您可以执行此操作

```
var data = Session["data"] as Data;
if(data != null)
//do something with the data 
```*

# php - Magento：将客户重定向到第三方支付网站

> ID：10261406
> 
> 赞同：0
> 
> 时间：2012-04-21T17:37:59.360
> 
> 标签：php, magento, checkout

我目前正在 Magento 中创建我的第一个自定义结帐页面。我有一个有效的代码 - 它会创建一个未付款的订单，因此下一步是根据所选的付款方式将客户重定向到第三方付款网站。

经过一些研究，似乎有一个名为**redirectUrl**的参数，我应该能够以某种方式获得它，但我无法弄清楚如何。

如果我都错了，请指点我回到正轨！先感谢您。

```
<?php
    require_once 'app/Mage.php';

    Mage::app();

    $quote = Mage::getModel('sales/quote')->setStoreId(Mage::app()->getStore('default')->getId());

    // guest order
    $quote->setCustomerEmail('customer@example.com');

    // add sample product
    $product = Mage::getModel('catalog/product')->load(8);
    $buyInfo = array(
            'qty' => 1,
    );
    $quote->addProduct($product, new Varien_Object($buyInfo));

    $addressData = array(
            'firstname' => 'Test',
            'lastname' => 'Test',
            'street' => 'Sample Street 10',
            'city' => 'Somewhere',
            'postcode' => '123456',
            'telephone' => '123456',
            'country_id' => 'SE'
    );

    $billingAddress = $quote->getBillingAddress()->addData($addressData);
    $shippingAddress = $quote->getShippingAddress()->addData($addressData);

    $shippingAddress->setCollectShippingRates(true)->collectShippingRates()->setShippingMethod('flatrate_flatrate')->setPaymentMethod('checkmo');

    $quote->getPayment()->importData(array('method' => 'checkmo'));

    $quote->collectTotals()->save();

    $service = Mage::getModel('sales/service_quote', $quote);
    $service->submitAll();
    $order = $service->getOrder();

    echo 'Created order #' . $order->getIncrementId();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:27:40.040

在示例代码中，您将 Magento 类用于独立的 PHP 文件。这样，Magento 重定向将不起作用，因为它是来自`Mage_Core_Controller_Front_Action`. 您必须使用 Magento 控制器来尝试这种重定向方式。

无论如何，您可以使用 PHP[标头](http://php.net/header)函数：`header("Location: http://somepayment.com/complexUrl"); die;`

# php - PHP 服务器选项和投票系统

> ID：10261416
> 
> 赞同：1
> 
> 时间：2012-04-21T17:39:11.867
> 
> 标签：php, vote-up-buttons

我目前正在创建一个网站，该网站允许匿名用户将数据（或评论）输入数据库，并允许该网站的其他匿名用户投票赞成或反对网站上显示的评论。

我已经创建了允许用户创建评论并允许其他用户对评论进行投票的功能。我遇到的问题是我想如何限制网站的每个访问者只对每条评论投票一次。

我的想法是在用户投票时创建一个会话 ID，然后当他们再次尝试投票以尝试比较会话 ID 是否已经存在时。这将起作用，但仅在会话被销毁之前。有没有人对如何实现这一点有任何其他想法？

我假设我可以使用一些可用的 $_SERVER 选项

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:15:34.753

只需使用 IP 或 Cookie 限制投票，我还创建了 3 个网站，我必须在其中进行公开投票，之前我使用 IP 进行过，但后来我改回 cookie，我还保存了 IP 以及设置 cookie 以检查是否用户一次又一次地删除 cookie 来投票，但我从来没有遇到过这样的问题，所以我的意见只是使用 cookie，因为不是每个人都能发现我们正在使用 cookie 来做这件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:34:39.857

在匿名用户系统上执行一票政策是不可能的。就像上面评论中所说：

> 试图控制“匿名”几乎是不可能的。IP是共享的，会话是临时的，cookies可以删除

您无法 100% 识别您的客户，如果用户愿意，他将能够绕过您尝试使用的任何方式并多次投票。

您唯一可靠的选择是强制注册并且只允许注册用户投票。

* * *

如果您仍然坚持，您可以尝试让用户**难以**绕过您的执行系统。使用用户的 IP 地址和持久 cookie 的组合，并对两者进行交叉验证，以确保用户不会投票两次。但同样，请注意，用户可以轻松删除 cookie，并且在大多数情况下，更改他的 IP 地址。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T18:21:46.933

当您为特定文章插入评论时，请存储成员（评论者）的 ID 或名称或任何唯一的东西。在插入评论之前输入验证码....

```
Select * from articles where member_commented_id = [current_member_id_from_querystring) and article_id = member_commented_on_article_id

//a check point
if result is > 0 .. its mean member already has commented on this article

//otherwise
add comments on article and insert member id as well for checking

// if you are using seperate table for comments then you have to make additional field in table like

comment_id, comment, com_date, member_id_who_commented, article_id_on_which_commented 
```

**设置 IP 或 Cookies 检查点是不可靠的，因为 IP 由 ISP 更改（如果设置为动态 IP）并且 Cookies 可以被访问者清除**

希望这可以帮助你

# java - 用于执行多对多的 Java 逆向工程工具

> ID：10261418
> 
> 赞同：2
> 
> 时间：2012-04-21T17:39:17.823
> 
> 标签：java, jdbc, entity, reverse

我正在尝试几个从表中生成实体的 java 工具。我已经尝试过来自 oracle (OEPE) 的 netbeans one 和 eclipse 工具。

我看到他们无法识别多对多的关系。我该如何改善这种情况？

谢谢，马里奥

* * *

好的，我也尝试过休眠，没有人检测到多对多。可能这张桌子遗漏了一些需要识别的东西。

谢谢大家，马里奥

# asp.net - 如何在没有页面刷新和自动的情况下从短信网络服务接收短信

> ID：10261419
> 
> 赞同：0
> 
> 时间：2012-04-21T17:39:26.580
> 
> 标签：asp.net, web-services

我有一个从网站发送短信的网络服务。我可以通过调用 Page_load 代码来获取收到的短信。但我想自动获取此消息，然后向发件人发送消息（短信）。这意味着我想在没有页面加载或自动刷新页面的情况下回复他的短信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:06:22.870

将您的数据放入一个 div 中，使用 ajax 并在每个所需时间后使用间隔调用您的 ajaxified 函数。...

就像是

```
$(document).ready(function(){
var refresh = setInterval(function(){
  // Do something every 1 seconds like call an ajax function
    $('#youdiv').ajax(); //this is dummy, for right syntax follow the link at the end of answer
}, 1000);  // 1000 equals to 1 sec 
```

});

阅读有关 ajax 的更多信息

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# silverlight - Silverlight 动画工具

> ID：10261422
> 
> 赞同：0
> 
> 时间：2012-04-21T17:39:43.587
> 
> 标签：silverlight

什么是创建 Silverlight 动画的最佳应用程序，就像我使用 Macromedia Flash 创建 Flash 剪辑一样？我以后可以将这些动画用作电影的一部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:12:09.860

在 xaml 中创建动画的官方 Microsoft 工具是 Microsoft Expression Blend。[您可以在此处](http://www.microsoft.com/expression/products/Blend_Overview.aspx)下载试用版。

# django - Django 1.4 - 在元字段 Model=User 的表单中向用户字段添加自定义错误消息

> ID：10261424
> 
> 赞同：2
> 
> 时间：2012-04-21T17:40:09.827
> 
> 标签：django, validation, django-forms, metaclass, custom-errors

我试图将一些自定义错误消息添加到这样的表单中：

```
class RegistrationForm(forms.ModelForm):

    class Meta:
        model = User  
        fields = ('email',)

    extra_field = forms.CharField(error_messages={
        'required':'Este campo es requerido'
    }) 
```

将自定义错误消息添加到以 () 形式声明的字段没有问题`extra_field`，但我无法将自定义错误消息添加到`User`通过`meta`类 ( `email`) 从模型继承的字段。

我真正想要的是自定义此表单的所有错误消息。另外，我想用西班牙语而不是英语显示它们。

到目前为止，我还没有找到任何关于如何自定义从模型 User 继承的表单字段的文档，我真的不想仅仅因为错误消息而编写新表单。

提前致谢！！！

PD：我在 debian 挤压盒中使用 Django 1.4 和 python 2.6.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:57:22.817

好的，谢谢大家的回答，其实你们帮了我很多！！！

我解决了这样的问题：

假设我有这个表格：

```
class RegistrationForm(forms.ModelForm):

  class Meta:
    model = User  
    fields = ('username', 'email') 
```

而且我想将自定义错误消息添加到用户名字段，但我不想放弃该字段已经附带的所有验证。

我将此方法添加到我的 RegistrationForm 类：

```
def clean_username(self):
    data = self.cleaned_data

    # My extremely important validation.
    if len(data['username']) == 5:

      self.fields['username'].error_messages["myerror"] = "The important message"
      raise forms.ValidationError(self.fields['username'].error_messages["myerror"])

    return data['username'] 
```

这种方法的优点是我不会放弃相关领域已经附带的其他验证检查。

这很重要，因为现在我不必验证用户是否已存在于我的数据库中。

感谢您的回复，祝您有美好的一天！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:54:07.817

[在你的settings.py](https://docs.djangoproject.com/en/dev/ref/settings/)中打开内部化

```
USE_I18N = True
LANGUAGE_CODE = 'es' 
```

型号`User`与其他型号没有区别。输入您的代码以找出问题所在。在您的元类`fields = ('email')`中必须是元组或列表，即`fields = ('email', )`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T19:08:17.753

您可以通过以与定义额外字段完全相同的方式简单地重新定义它们来覆盖任何继承的字段。

# asp.net - UpdatePanel 正在影响自身外部的控件

> ID：10261427
> 
> 赞同：2
> 
> 时间：2012-04-21T17:40:39.417
> 
> 标签：asp.net, ajax, webforms, updatepanel, inline-code

我在网络表单页面上有一个基本的更新面板。在页面上的更新面板之外，我有几个 <%= 内联表达式 %>。

当更新面板更新时，它可以工作。但是，当我单步执行在该 ajax 回发上执行的代码时，在 updatepanel 完成加载其内容之后，我可以看到它继续尝试并重新呈现页面上的其他元素。由于我没有在回发期间重新分配内联表达式访问的属性，因此属性为空，并且引发异常。

两部分问题：1）为什么服务器执行代码渲染块位于更新面板之外？2）如果在我单步执行代码时抛出异常，为什么我不单步执行代码时看不到它（YSOD？）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:36:31.493

UpdatePanel 部分回发贯穿父页面上的整个页面生命周期。您无法获得部分页面运行时错误 (YSOD)，因为它是 AJAX 调用。如果您使用 Firebug/Fiddler 检查返回，有时您可以看到堆栈跟踪，否则您必须调试真正看到发生了什么。

# c# - 始终将表单保留在桌面上（无 Win+D 效果）

> ID：10261429
> 
> 赞同：5
> 
> 时间：2012-04-21T17:40:44.237
> 
> 标签：c#, forms, winapi

我正在做一个项目，在这个项目中，我需要一个表格来始终保持在桌面上。这意味着即使用户单击 Win+D 隐藏/显示桌面，它仍应显示。

如果有人使用 Rainmeter，即使单击显示桌面键，他们也会知道仪表是如何留在桌面上的。

我真的不介意怎么做，只要它有效。我浏览了数百个示例，但其中一半不起作用..

也许有人可以帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:53:36.613

如果你想让某些东西留在桌面上，你应该把它放在桌面上。看看使用可以做你想做的事的[Windows Gadgets 。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd834142.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T17:52:34.370

我启动了 C# 并创建了一个 Windows 窗体应用程序。我将表单的`TopMost`属性设置为`True`，并将其`MinimizeBox`属性设置为`False`。

当我运行应用程序时，窗口始终位于顶部，即使我使用 Win+D 或单击显示桌面。

我从这里得到了这个想法：[Minimize All 和 Show Desktop 有什么区别？](http://blogs.msdn.com/b/oldnewthing/archive/2004/05/27/143042.aspx)

# c++ - 将 char* 长度 2 转换为无符号字符的正确方法？

> ID：10261434
> 
> 赞同：0
> 
> 时间：2012-04-21T17:41:41.590
> 
> 标签：c++, casting

我有一个`aa:bb:cc:dd:ee:ff`需要解析为`unsigned char[6]`. 我正在使用 strtok 来获取每对字符，并且需要将它们转换为无符号字符，但我所做的一切都不起作用。

我已经尝试过（假设`c`是长度为 2 的 char*）：

```
unsigned char t = (unsigned char)c;  // gives "loses precision" error

unsigned char* t = (unsigned char*)c;
unsigned char t1 = t[0];                  // gives the wrong value

unsigned char t;
strcpy((char*)t, c);      // gives the wrong value
strncpy((char*)t, c, sizeof(char)*2) // gives the wrong value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:00:37.037

假设您的输入字符串是一个最多包含两个十六进制数字的十六进制字符串，即`FF`您可以使用它`std::stringstream`来进行转换：

```
int n;

std::stringstream ss;
ss << std::hex << c;
ss >> n;

unsigned char x = (unsigned char)n; 
```

您必须确保，这`c`确实不大于`FF`.

**编辑**：将上面的代码更改为将值读入`int`第一个，然后将其转换为`unsigned char`. 当直接读入 a`char`时，它只读取字符而不进行任何转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:25:33.310

编译器将您正在做的事情视为将 32/64 位指针转换为 8 位数字。转换基本类型不会为您解释字符串的内容。

想一想：它怎么知道你具体想做什么？它怎么知道它是十六进制符号！

您正在尝试将包含十六进制值的字符串转换为数字。这是仅通过转换基本类型无法完成的转​​换。[查看此](https://stackoverflow.com/questions/1195979/how-to-interpret-numbers-correctly-hex-oct-dec)问题的答案以获取建议。或者，由于您使用的是 C++，因此您可以使用我认为更好的流。例子：

```
#include <sstream>
#include <iostream>
#include "stdio.h"

int main(int argc, char* argv[])
{
    char *addr[] = { "aa", "bb", "cc", "dd", "ee", "ff" };
    unsigned char binaddr[6];
    for(size_t i = 0; i < 6; ++i)
    {
        size_t word_result;
        std::istringstream addr_stream(addr[i]);
        addr_stream >> std::hex >> word_result;
        binaddr[i] = word_result;
    }
    printf("%x:%x:%x:%x:%x:%x\n", binaddr[0], binaddr[1], binaddr[2], binaddr[3], binaddr[4], binaddr[5]);
    return 0;

} 
```

# c# - Windows 窗体 C# TabControl ImageList 对齐？

> ID：10261436
> 
> 赞同：0
> 
> 时间：2012-04-21T17:41:51.620
> 
> 标签：c#, winforms, tabcontrol, imagelist

是否可以将 TabControl 的 ImageList 上的图像图标对齐到文本的右侧？

现在，图像图标放在左边，文本放在右边。我希望文本位于左侧，而图标位于右侧。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:41:27.310

除非您自己绘制 TabPage，否则您不能这样做。为此，您需要设置 to 的属性`DrawMode`，然后处理事件。 这是一个非常简单的示例，如果您愿意，可以添加一些代码来更改所选选项卡的背景颜色，要知道选择了哪个选项卡，只需检查值：`TabControl``OwnerDrawFixed``DrawItem`
`e.State`

```
private void tabControl1_DrawItem(object sender, System.Windows.Forms.DrawItemEventArgs e)
{
    // values
    TabControl tabCtrl = (TabControl)sender;
    Brush fontBrush = Brushes.Black;
    string title = tabCtrl.TabPages[e.Index].Text;
    StringFormat sf = new StringFormat();
    sf.Alignment = StringAlignment.Near;
    sf.LineAlignment = StringAlignment.Center;
    int indent = 3;
    Rectangle rect = new Rectangle(e.Bounds.X, e.Bounds.Y + indent, e.Bounds.Width, e.Bounds.Height - indent);

    // draw title
    e.Graphics.DrawString(title, tabCtrl.Font, fontBrush, rect, sf);

    // draw image if available
    if (tabCtrl.TabPages[e.Index].ImageIndex >= 0)
    {
        Image img = tabCtrl.ImageList.Images[tabCtrl.TabPages[e.Index].ImageIndex];
        float _x = (rect.X + rect.Width) - img.Width - indent;
        float _y = ((rect.Height - img.Height) / 2.0f) + rect.Y;
        e.Graphics.DrawImage(img, _x, _y);
    }
} 
```

# java - 截图效果安卓

> ID：10261437
> 
> 赞同：5
> 
> 时间：2012-04-21T17:41:51.837
> 
> 标签：java, android

我想创建一个屏幕效果，就像你在手机中截屏时一样，我的意思是，当我点击一个按钮时屏幕上有一点闪光，我也想改变那个闪光的颜色。那可能吗？非常感谢你;）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T00:11:31.723

获得这种效果的一种简单方法是使用以下方法：

在您的布局上创建一个空的“面板”。例如：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <LinearLayout
        android:layout_height="wrap_content"
        android:layout_width="fill_parent">
        <!-- Your normal layout in here, doesn't have to be a LinearLayout -->
    </LinearLayout>
    <FrameLayout
        android:id="@+id/pnlFlash"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="[Set to your desired flash colour, image, etc]"
        android:visibility="gone"
        />
</FrameLayout> 
```

id 为“pnlFlash”的 FrameLayout 保持隐藏状态，因此不会干扰正常交互。

现在，当您想要制作闪光灯时，您所要做的就是让面板显示适当的时间。有一个很好的淡出总是有帮助的。

```
pnlFlash.setVisibility(View.VISIBLE);

AlphaAnimation fade = new AlphaAnimation(1, 0);
fade.setDuration(50);
fade.setAnimationListener(new AnimationListener() {
    ...
    @Override
    public void onAnimationEnd(Animation anim) {
        pnlFlash.setVisibility(View.GONE);
    }
    ...
});
pnlFlash.startAnimation(fade); 
```

我以前没有使用过这种代码来进行闪存，因此您可能需要相应地调整持续时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-06T07:58:16.983

这是 Kotlin 的一个版本，因为您需要自己实现动画侦听器。

```
private fun pictureTakenAnimation() {
    val listener = AnimationListener(pnlFlash)
    pnlFlash.visibility = View.VISIBLE

    val fade = AlphaAnimation(1f, 0f);
    fade.setDuration(500);
    fade.setAnimationListener(listener)
    pnlFlash.startAnimation(fade);
}

inner class AnimationListener(val v : View) : Animation.AnimationListener {
    override fun onAnimationStart(p0: Animation?) {
        v.visibility = View.VISIBLE
    }

    override fun onAnimationEnd(p0: Animation?) {
        v.visibility = View.GONE
    }

    override fun onAnimationRepeat(p0: Animation?) {

    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-23T20:44:18.623

添加 View.VISIBLE 而不是 View.GONE onAnimationEnd。

```
fade.setAnimationListener(new AnimationListener() {
...
@Override
public void onAnimationEnd(Animation anim) {
    pnlFlash.setVisibility(View.VISIBLE);
}
...
});
pnlFlash.startAnimation(fade); 
```

# numpy - 如何在 pygame 中制作 Surface 的灰度副本？

> ID：10261440
> 
> 赞同：5
> 
> 时间：2012-04-21T17:42:36.777
> 
> 标签：numpy, pygame

在 pygame 中，我有一个表面：

```
im = pygame.image.load('foo.png').convert_alpha()
im = pygame.transform.scale(im, (64, 64)) 
```

如何获取图像的灰度副本，或将图像数据转换为灰度？我有麻木。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T22:43:53.150

使用 Surfarray，并使用 numpy 或 Numeric 对其进行过滤：

```
def grayscale(self, img):
    arr = pygame.surfarray.array3d(img)
    #luminosity filter
    avgs = [[(r*0.298 + g*0.587 + b*0.114) for (r,g,b) in col] for col in arr]
    arr = numpy.array([[[avg,avg,avg] for avg in col] for col in avgs])
    return pygame.surfarray.make_surface(arr) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T05:39:14.420

最简单的方法是遍历图像中的所有像素并调用 .get_at(...) 和 .set_at(...)。

这会很慢，所以为了回答你关于使用 NumPy 的隐含建议，请查看[http://www.pygame.org/docs/tut/surfarray/SurfarrayIntro.html](http://www.pygame.org/docs/tut/surfarray/SurfarrayIntro.html)。概念和大部分代码是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-27T12:51:06.663

经过大量研究，我想出了这个解决方案，因为这个问题的答案对于我想要这个功能来说太慢了：

```
def greyscale(surface: pygame.Surface):
    start = time.time()  # delete me!
    arr = pygame.surfarray.array3d(surface)
    # calulates the avg of the "rgb" values, this reduces the dim by 1
    mean_arr = np.mean(arr, axis=2)
    # restores the dimension from 2 to 3
    mean_arr3d = mean_arr[..., np.newaxis]
    # repeat the avg value obtained before over the axis 2
    new_arr = np.repeat(mean_arr3d[:, :, :], 3, axis=2)
    diff = time.time() - start  # delete me!
    # return the new surface
    return pygame.surfarray.make_surface(new_arr) 
```

我使用 time.time() 来计算这种方法的时间成本，因此对于 (800, 600, 3) 数组，它需要：`0.026769161224365234`s 才能运行。

正如您所指出的，这是一个保留亮度的变体：

```
def greyscale(surface: pygame.Surface):
    arr = pygame.surfarray.pixels3d(surface)
    mean_arr = np.dot(arr[:,:,:], [0.216, 0.587, 0.144])
    mean_arr3d = mean_arr[..., np.newaxis]
    new_arr = np.repeat(mean_arr3d[:, :, :], 3, axis=2)
    return pygame.surfarray.make_surface(new_arr) 
```

# java - Java 股票期权定价库

> ID：10261441
> 
> 赞同：1
> 
> 时间：2012-04-21T17:42:43.860
> 
> 标签：java, finance

我有一些美国股票和相应期权（看跌期权和看涨期权）的价格数据。我正在寻找一个 Java 库来帮助推导出一些理论希腊语（delta、gamma 等）

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T17:50:19.383

你可以用[jqantlib做到这一点](http://www.jquantlib.org/sites/jquantlib/apidocs/current/index.html)

# android - 在android的列表视图中获取联系人姓名和电话号码的有效方法

> ID：10261446
> 
> 赞同：0
> 
> 时间：2012-04-21T17:43:39.273
> 
> 标签：android

我想使用光标和简单的光标适配器在列表视图中获取联系人姓名和电话号码。我见过循环数据库中所有联系人的代码。有没有一种通过合并游标和使用简单的游标适配器来制作列表视图的有效方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:04:22.167

您可以在此光标中获得有关联系人的所有信息

```
Cursor cursor = context.getContentResolver().query(
            ContactsContract.Contacts.CONTENT_URI, null, null, null, null); 
```

但是要从此游标中获取名称或 ID，您必须循环遍历没有其他可能性。

# php - 与父级的 PHP 方法链接

> ID：10261448
> 
> 赞同：1
> 
> 时间：2012-04-21T17:43:52.507
> 
> 标签：php, method-chaining

可以说我有以下代码。

```
class A {
    function one() {
        return $this;
    }
}

class B extends A {
    function two() {
        return $this;
    }
} 
```

有什么方法可以使用父类中的函数进行方法链吗？如..

```
$b = new B();
$b->one()->two(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:54:10.313

有关解释特殊变量含义的几个回答，请参阅[此问题](https://stackoverflow.com/questions/2094052/how-to-explain-this-keyword-in-a-best-and-simple-way)`$this`。

简而言之，它指的是当前对象。您正在创建 的实例`B`，因此即使您在`$this`内部引用，`function one()`您仍然指的是封闭实例。

# jsf-2 - JSF bean：设置 ViewParam 后调用 @PostConstruct 函数

> ID：10261453
> 
> 赞同：12
> 
> 时间：2012-04-21T17:44:18.277
> 
> 标签：jsf-2, managed-bean, postconstruct, viewparams

我有一个 product.xhtml 和一个 ProductBean。我使用 /product/{id} 来访问产品，因此我在 product.xhtml 中有一个 viewParam，其 value=ProductBean.id。问题是在 bean 内部，我使用带有 PostConstruct 注释的 init 函数来填充产品的详细信息。为此，我需要 id 来调用外部函数。我想尽管在 viewParam 设置 bean 的 id 之前调用了 init，因此在 init 内部我无法调用外部函数，因为 id 尚未设置。我做错了什么，我该如何解决这个问题？

> 更新

我发现出了什么问题。我认为 viewParam 方法适用于 CDI bean，但 ManagedProperty 方法适用于 JSF bean..

我现在还有另一个问题。我的 CDI bean 是 RequestScoped，当 product.xhtml 被渲染时，bean 被创建，我猜后来被丢弃了。有趣的是，我在该 bean 中有一个函数，当我调用它时，我可以读取 id（我假设这是因为连接到视图参数而发生的），但不能读取任何其他属性。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-21T17:58:53.470

你需要一个`<f:event type="preRenderView">`代替。

```
<f:metadata>
    <f:viewParam name="foo" value="#{bean.foo}" />
    <f:event type="preRenderView" listener="#{bean.onload}" />
</f:metadata> 
```

和

```
public void onload() {
    // ...
} 
```

请注意，这本质上是一个小技巧。即将到来的 JSF 2.2 将提供一个新的、更合理的标签，其唯一目的是：`<f:viewAction>`.

```
<f:metadata>
    <f:viewParam name="foo" value="#{bean.foo}" />
    <f:viewAction action="#{bean.onload}" />
</f:metadata> 
```

### 也可以看看：

*   [ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)
*   [JSF 2.0 中的通信 - 处理 GET 请求参数](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)

# java - 如何为任何 JButton 添加两个不同的事件

> ID：10261454
> 
> 赞同：1
> 
> 时间：2012-04-21T17:44:22.767
> 
> 标签：java, swing, event-handling, jbutton

```
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JFrame;
import javax.swing.JButton;
import javax.swing.ImageIcon;
import javax.swing.JLabel;

    public class Proyecto_Frame extends JFrame {
    private ImageIcon Aston;
    private ImageIcon Ferrari;
    private ImageIcon Lambo;
    private ImageIcon McLaren;
/**
 * 
 */
    private static final long serialVersionUID = 1L;

        public Proyecto_Frame () {
            super ("Carrera");
            this.setLayout(null);

            Aston = new ImageIcon (getClass().getResource("Aston1.png"));
            Ferrari = new ImageIcon (getClass().getResource("Ferrari1.png"));
            Lambo = new ImageIcon (getClass().getResource("Lambo1.png"));
            McLaren = new ImageIcon (getClass().getResource("McLaren1.png"));

            final JLabel Aston1 = new JLabel(Aston);
            final JLabel Ferrari1 = new JLabel(Ferrari);
            final JLabel Lambo1 = new JLabel(Lambo);
            final JLabel McLaren1 = new JLabel(McLaren);

            final JLabel Aston2 = new JLabel(Aston);
            final JLabel Ferrari2 = new JLabel(Ferrari);
            final JLabel Lambo2 = new JLabel(Lambo);
            final JLabel McLaren2 = new JLabel(McLaren);

            JButton B_Aston = new JButton (Aston);
            JButton B_Ferrari = new JButton (Ferrari);
            JButton B_Lambo = new JButton (Lambo);
            JButton B_McLaren = new JButton (McLaren);

            B_Aston.setBounds(new java.awt.Rectangle(30,30,230,75));
            this.getContentPane().add(B_Aston);

            B_Ferrari.setBounds(new java.awt.Rectangle(270,30,230,75));
            this.getContentPane().add(B_Ferrari);

            B_Lambo.setBounds(new java.awt.Rectangle(30,110,230,75));
            this.getContentPane().add(B_Lambo);

            B_McLaren.setBounds(new java.awt.Rectangle(270,110,230,75));
            this.getContentPane().add(B_McLaren);

            add(B_Aston);
            add(B_Ferrari);
            add(B_Lambo);
            add(B_McLaren);

            Aston1.setBounds(30, 250, 230, 75);
            Aston1.setVisible(false);
            Ferrari1.setBounds(30, 250, 230, 75);
            Ferrari1.setVisible(false);
            Lambo1.setBounds(30, 250, 230, 75);
            Lambo1.setVisible(false);
            McLaren1.setBounds(30, 250, 230, 75);
            McLaren1.setVisible(false);

            Aston2.setBounds(30, 350, 230, 75);
            Aston2.setVisible(false);
            Ferrari2.setBounds(30, 350, 230, 75);
            Ferrari2.setVisible(false);
            Lambo2.setBounds(30, 350, 230, 75);
            Lambo2.setVisible(false);
            McLaren2.setBounds(30, 350, 230, 75);
            McLaren2.setVisible(false);

            add(Aston1);
            add(Ferrari1);
            add(Lambo1);
            add(McLaren1);

            add(Aston2);
            add(Ferrari2);
            add(Lambo2);
            add(McLaren2);

            B_Aston.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e){
                    Aston1.setVisible(true);
                    Ferrari1.setVisible(false);
                    Lambo1.setVisible(false);
                    McLaren1.setVisible(false);
                }
            });
            B_Ferrari.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e){
            Aston1.setVisible(false);
            Ferrari1.setVisible(true);
            Lambo1.setVisible(false);
            McLaren1.setVisible(false);
            }
            });
            B_Lambo.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e){
                    Aston1.setVisible(false);
                    Ferrari1.setVisible(false);
                    Lambo1.setVisible(true);
                    McLaren1.setVisible(false);
                }
            });
            B_McLaren.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e){
                    Aston1.setVisible(false);
                    Ferrari1.setVisible(false);
                    Lambo1.setVisible(false);
                    McLaren1.setVisible(true);

                }

            });

        }

    } 
```

嘿，我是 Java 新手，得到了这段代码。所以，这里的问题是，我想选择其中两个图像并将它们绘制在按钮下方以模拟比赛。当我单击任何 Jbutton 时，该图像可见，而其他 3 个不可见，但我不知道如何离开该选择并使用相同的 JButton 做出下一个选择。谁能帮我？我已经阅读了许多主题和许多其他页面，但似乎找不到答案。

谢谢，对不起格式，不习惯论坛格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:52:54.620

我认为最简单的方法是检查是否已经做出了第一个选择，然后进行第二个选择，例如

```
if (playerA == null) {
    playerA = buttonSelection;
} else {
    playerB = buttonSelection;
} 
```

此外，您还需要一些方法来指导用户使用什么按钮选择什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T17:53:10.080

一种可能的解决方案（我不是特别喜欢的一种）是使用布尔值或其他变量来保存您的程序状态，例如称为 boolean autoSelected = false;。选择自动后，将此变量更改为 true。在 JButton 的 ActionListener 中，使用 if 块根据此变量的状态确定代码应该执行的操作。换句话说，您可以根据程序的*状态*更改 JButton 执行的操作。

但在我看来，更好的是简单地使用 CardLayout 交换 JPanel 并显示一个 JPanel 来保存您的轨道和新的 JButton。这是因为您正在从程序的一个主要状态（设置游戏）更改为另一种状态（显示比赛），而这些可能需要在完全不同的 JPanel 中显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T05:08:57.120

I would tend to use a [`JList`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html) with a disabled `JButton` `Start Race` below it, for this.

Put the images into the list and add a [list selection listener](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#addListSelectionListener%28javax.swing.event.ListSelectionListener%29) to detect selections. When the selection changes, check the list for the [selected values array (1.6)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#getSelectedValues%28%29) or [selected values list (1.7+)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#getSelectedValuesList%28%29) and count the entries.

1.  If the number equals 1, encourage the user to pick another (using a message `JLabel` in the main GUI, a pop-up window or a `JOptionPane`).
2.  If the number equals 2, enable the button.
3.  If 3 or more are selected, disable the button and show a `JOptionPane` based error message to the effect "This track is not big enough for 3 cars!".

# node.js - mongoose virtual 在jade-lang 中不起作用

> ID：10261456
> 
> 赞同：0
> 
> 时间：2012-04-21T17:44:36.173
> 
> 标签：node.js, mongoose, pug

我定义：

```
var PersonSchema = new Schema({
    avatar: Number
});
PersonSchema.virtual("avatarUrl").get(function() {
    return "http://example.com/avatar/" + this.avatar;
}); 
```

这适用于节点的代码，例如：

```
PersonModel.findOne(function(err, person) {
    console.log(person.avatarUrl); // http://example.com/avatar/1
}); 
```

但在玉模板中，如果我使用：

```
img(src!= person.avatarUrl) 
```

这不会给我的期望。

有没有什么方法可以在玉中制作猫鼬虚拟作品？

**编辑**

我认为问题与翡翠无关，
因为我将“人”对象保存在会话中，在将其保存到会话之前，“虚拟”上的所有内容都可以正常工作，但是当我再次从会话中获取它时就不行了。
可能与会话机制有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:55:54.113

不确定您使用的是什么“会话机制”，但如果它类似于[connect-redis](https://github.com/visionmedia/connect-redis)`JSON.stringify(req.session)` ，那么它会在存储之前调用。这会将 mongoose 文档转换为没有 getter/setter/virtuals 或其他动态能力的静态 javascript 对象。如果您希望虚拟对象的当前值也存储在会话中作为静态值，您可能需要调用`req.session.person = doc.toJSON({ virtuals: true })`.

另一种选择是在会话返回后将会话人员具体化为 MongooseDocument。

```
// assume the session has been retrieved already
var person = new Person;
person.init(req.session.person);
req.session.person = person;
console.log(req.session.person.someVirtual); // yay! 
```

# c++ - VC++2008 中图像控制的存在

> ID：10261458
> 
> 赞同：3
> 
> 时间：2012-04-21T17:44:57.770
> 
> 标签：c++, c, windows, winapi

大家好，我想知道VC++中是否有像VB中那样的图像控件。实际上，使用图片框时，我遇到了无法在设计时为我的对话框调整图像大小的问题。但在图像控制中这是可能的。我没有图像控件有没有办法在设计时从对话框编辑器检查对话框的高度和宽度？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-14T23:18:30.480

如果您正在编写一个非托管的 C 或 C++ 项目，这比使用在设计托管 Windows 窗体应用程序时可用但仍然可行的 PictureBox 控件要困难一些。

如果你使用的是 DialogBox 资源的窗口（注意：我写这部分是使用 Visual Studio 2015 作为参考，而不是 2008，但大体过程应该是一样的）：

1.  将图像作为资源插入项目中。假设`IDB_BITMAP1`为简单起见，我们为位图命名了资源。
2.  `Static`在对话框中创建一个新的子窗口。
3.  右键单击新`Static`窗口并选择`Properties`。
4.  在 中的`Misc`副标题下`Properties`，更改`Type`为`Bitmap`。
5.  在 中的`Misc`副标题下`Properties`，更改`Image`为`IDB_BITMAP1`。

如果您正在手动编码窗口（即手动编写调用`CreateWindow`和`CreateWindowEx`创建窗口）：

1.  将图像作为资源插入项目中。确保将该行添加`#include "resource.h"`到您的代码中。
2.  `LoadBitmap`使用该函数获取位图的句柄。
3.  创建静态窗口作为主窗口的子窗口，并指定`SS_BITMAP`窗口样式。
4.  使用先前标识的位图资源句柄将消息发送`STM_SETIMAGE`到窗口。

示例代码，假设您的图像是`IDB_BITMAP1`：

```
#include <Windows.h>
#include <tchar.h>
#include "resource.h"

int APIENTRY _tWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nShowCmd)
{
    HWND hWnd, hStcImage;
    MSG Msg;
    HBITMAP hBitmap = LoadBitmap(hInstance, MAKEINTRESOURCE(IDB_BITMAP1));

    // ... register the window class etc

    hWnd = CreateWindowEx(WS_EX_OVERLAPPEDWINDOW, _T("ExampleClassName"), _T("Simple Window"), WS_VISIBLE | WS_SYSMENU, 100, 100, 350, 370, NULL, NULL, hInstance, NULL);
    hStcImage = CreateWindow(_T("Static"), NULL, WS_VISIBLE | WS_CHILD | SS_BITMAP, 10, 10, 0, 0, hWnd, NULL, hInstance, NULL);
    SendMessage(hStcImage, STM_SETIMAGE, (WPARAM)IMAGE_BITMAP, (LPARAM)hBitmap);

    ShowWindow(hWnd, SW_SHOW);
    UpdateWindow(hWnd);

    while (GetMessage(&Msg, NULL, 0, 0) > 0)
    {
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }
    return Msg.wParam;
} 
```

# internet-explorer - Internet Explorer 忽略 MIME 类型

> ID：10261460
> 
> 赞同：0
> 
> 时间：2012-04-21T17:45:01.093
> 
> 标签：internet-explorer, internet-explorer-9, mime-types

我正在使用扩展名为 .svg 的视频游戏的存档游戏文件。

浏览器将其解释为缩放矢量图形，因此我将其添加`AddType application/octet-stream .svg`到 .htaccess 文件中。这适用于 Firefox 和 Chrome，但不管你信不信，我在使用好的 'ol Internet Explorer 时遇到了麻烦。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T17:59:27.333

与其他浏览器相比，Internet Explorer[在检测 application/octet-stream 的内容方面做了一些相当高级的尝试](http://msdn.microsoft.com/en-us/library/ms775147(v=vs.85).aspx)。它基本上会首先检查它是否识别内容，如果没有，它将基于文件后缀（在本例中为 svg）进行处理。其他浏览器会对您告诉他们的内容类型非常满意。

使其在 IE 上运行取决于您要对文件执行的操作。如果您只是尝试将其作为文件下载，则可以使用`Content-Disposition: attachment; filename="myfile.svg"`标题来强制 IE 下载而不是尝试查看该文件。[此处](https://stackoverflow.com/questions/1597732/php-force-file-download-and-ie-yet-again)提供了如何执行此操作的示例。

# c - 如何在 GTK for C 中将光标更改为手表？

> ID：10261466
> 
> 赞同：4
> 
> 时间：2012-04-21T17:45:46.570
> 
> 标签：c, gtk, mouse-cursor

我在 C++ 中使用 C 风格的 GTK 函数，但我不知道如何设置主窗口的光标。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T17:55:28.770

采用`gdk_set_cursor()`

（[https://developer.gnome.org/gdk3/stable/gdk3-Windows.html#gdk-window-set-cursor](https://developer.gnome.org/gdk3/stable/gdk3-Windows.html#gdk-window-set-cursor)）

在由创建的 GdkCursor 上`gdk_cursor_new()`

（[https://developer.gnome.org/gdk3/stable/gdk3-Cursors.html](https://developer.gnome.org/gdk3/stable/gdk3-Cursors.html)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-24T15:46:39.910

[`gdk_window_set_cursor()`](https://developer.gnome.org/gdk3/stable/gdk3-Windows.html#gdk-window-set-cursor)在由 .创建的 GdkCursor 上使用[`gdk_cursor_new_from_name()`](https://developer.gnome.org/gdk3/stable/gdk3-Cursors.html#gdk-cursor-new-from-name)。

要获取 GtkWindow 的 GdkWindow，您可以使用[`gtk_widget_get_window()`](https://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-get-window)，因为 GtkWindow 是 GtkWidget 的子类。

注意：此答案是对[idefixs 答案](https://stackoverflow.com/a/10261523/258462)（重要更正+链接更新+小修改以使答案完整+改进格式）的改进，该答案被拒绝为编辑。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-06T22:54:39.657

发布此内容是因为有关获取 GdkWndow 的评论到目前为止没有得到答复。

对于大多数小部件，可以将 GdkWindow 作为 GtkWidget 结构的窗口数据字段检索。以下代码在 GtkWindow 小部件上设置光标：

```
GtkWidget* win = gtk_window_new(GTK_WINDOW_TOPLEVEL);
GdkCursor* watchCursor = gdk_cursor_new(GDK_WATCH);

/* set watch cursor */
gdk_window_set_cursor(win->window, watchCursor);

/* return to normal */
gdk_window_set_cursor(win->window, NULL); 
```

如果您需要从 GtkWindow 的其中一个子小部件访问祖先，您可以使用：

```
GtkWidget* win = gtk_widget_get_ancestor(someWidget, GTK_TYPE_WINDOW); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-06T18:20:25.180

我的解决方案：

```
void gtkSetCursor(GdkCursorType cursorType) {
    GdkScreen * screen = gdk_screen_get_default();
    GdkWindow * win = gdk_screen_get_root_window(screen);
    GdkCursor * cursor = gdk_cursor_new(cursorType); //http://developer.gimp.org/api/2.0/gdk/gdk-Cursors.html
    gdk_window_set_cursor(win, cursor);
    while (gtk_events_pending()) gtk_main_iteration();
}

...
gtkSetCursor(GDK_WATCH);
start your stuff here
...
end of your stuff
gtkSetCursor(GDK_LEFT_PTR); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-24T13:31:28.537

杰夫的回答对我不起作用（Gtk3）。所以这是我的解决方案：

```
GdkWindow* win = gtk_widget_get_parent_window(widget);
GdkCursor* watchCursor = gdk_cursor_new(GDK_WATCH);
gdk_window_set_cursor(win, watchCursor); 
```

# python - 为 Web 存储服务开发 gvfs 适配器？

> ID：10261468
> 
> 赞同：3
> 
> 时间：2012-04-21T17:46:51.983
> 
> 标签：python, linux, ubuntu, gnome, nautilus

Ubuntu 有一个有用的功能，您可以在其中挂载和查看外部 ssh 帐户、蓝牙设备等上的文件，称为[gvfs](http://library.gnome.org/misc/release-notes/2.22/#sect%3agvfs-gio) / [GIO](http://developer.gnome.org/gio/unstable/)。是否有开发人员指南/教程用于制作自定义适配器以从外部存储或 Web 服务“挂载”，最好是在 Python 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T15:09:45.803

[http://git.gnome.org/browse/gvfs/tree/](http://git.gnome.org/browse/gvfs/tree/)有几个后端（尽管都是用 C 编写的）。我不知道python中的例子。

# ruby-on-rails - 表单在 Rails 3 中无法正确加载

> ID：10261476
> 
> 赞同：0
> 
> 时间：2012-04-21T17:48:23.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我无法加载我的表单，不知道为什么会这样。

**问题：**当我尝试加载表单（/messages/new）时，我得到一个空白页，没有错误消息。

**问题的原因：**我认为问题在于消息和用户之间的链接没有正确建立，这就是表单无法正确加载的原因，但不知道如何修复它。

**背景：**我目前通过 POSTS/INDEX 文件（附在下面）访问表单，但我认为这是错误的，因为每个用户都应该有一个唯一的链接......例如，如果我点击创建帖子的“联系”按钮由 John 发送，消息应该发送给 John，以此类推其他用户。我正在使用简单的私人消息传递插件。

感谢任何反馈！

谢谢，

费萨尔

**消息>新视图**

```
<% form_for @message, :url => messages_path(:user_id => @user) do |f| %>
<p>
To:<br />
<%= f.text_field :to %>
<%= error_message_on @message, :to %>
</p>
<p>
Subject:<br />
<%= f.text_field :subject %>
<%= error_message_on @message, :subject %>
</p>
<p>
Message<br />
<%= f.text_area :body %>
<%= error_message_on @message, :body %>
</p>
<p>
<%= submit_tag "Send" %>
</p>
<% end %> 
```

**消息模型**

```
class Message < ActiveRecord::Base

is_private_message

attr_accessor :to

end 
```

**路线.RB**

```
Mysalary::Application.routes.draw do

resources :messages do
   collection do
     post :delete_selected
     end
   end

resources :users
resources :profiles
resources :pages
resources :posts

get "pages/home"
get "pages/about"
get "pages/legal"
get "pages/feedback"

root :to => 'posts#new'

end 
```

**消息控制器**

```
class MessagesController < ApplicationController

before_filter :set_user

def index
if params[:mailbox] == "sent"
  @messages = @user.sent_messages
else
  @messages = @user.received_messages
end
end

def show
@message = Message.read_message(params[:id], current_user)
end

def new
@message = Message.new

if params[:reply_to]
  @reply_to = @user.received_messages.find(params[:reply_to])
  unless @reply_to.nil?
    @message.to = @reply_to.sender.login
    @message.subject = "Re: #{@reply_to.subject}"
    @message.body = "\n\n*Original message*\n\n #{@reply_to.body}"
  end
end
end

def create
@message = Message.new(params[:message])
@message.sender = @user
@message.recipient = User.find_by_login(params[:message][:to])

if @message.save
  flash[:notice] = "Message sent"
  redirect_to user_messages_path(@user)
else
  render :action => :new
end
end

def delete_selected
if request.post?
  if params[:delete]
    params[:delete].each { |id|
      @message = Message.find(:first, :conditions => ["messages.id = ? AND (sender_id = ? OR recipient_id = ?)", id, @user, @user])
      @message.mark_deleted(@user) unless @message.nil?
    }
    flash[:notice] = "Messages deleted"
  end
  redirect_to :back
end
end

private
def set_user
 @user = User.first
end
end 
```

**帖子>索引视图**

```
<table class="table table-striped">
<tbody>
<% @posts.each do |post| %>
<tr>
<td>I am a <%= post.title %> getting married in <%= post.job %> in <%= post.location %>, and looking for a <%= post.salary %>. My budget is <%= post.salary %>.</td>
<td> <button class="btn" data-toggle="button" onClick="javascript:location.href = '/messages/new';" />Contact</button></td>
<td><%= time_ago_in_words(post.created_at) %> ago.</td>
<!--/. 
<td><%= link_to 'Show', post %></td>
<td><%= link_to 'Edit', edit_post_path(post) %></td>
<td><%= link_to 'Destroy', post, :confirm => 'Are you sure?', :method => :delete %></td>
-->
</tr>
<% end %>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:57:45.523

消息/新行 1，尝试将开始 ERB 标记从静音标记更改为响亮标记

s/<%/<%=

来自[http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)

# ruby - TCPServer 错误：地址已在使用中 - 绑定 (2)

> ID：10261477
> 
> 赞同：92
> 
> 时间：2012-04-21T17:48:28.370
> 
> 标签：ruby, jekyll

几周前 Jekyll 对我来说工作得很好，但现在突然之间它给了我以下错误：

```
TCPServer Error: Address already in use - bind(2)
INFO  WEBrick::HTTPServer#start: pid=7300 port=4000

 % lsof -i :4000
 <fetches nothing> 
```

即使端口上没有运行任何东西。以下是详细信息：

```
 % jekyll --version
Jekyll 0.11.2
 % where jekyll
/home/bhaarat/.rvm/gems/ruby-1.9.2-p290/bin/jekyll
/usr/bin/jekyll
 % ruby --version
ruby 1.9.2p290 (2011-07-09 revision 32553) [i686-linux]
 % rvm --version
rvm 1.10.0 
```

这是输出

```
 % jekyll --server
Configuration from /home/bhaarat/blog/omnipresent.github.com/_config.yml
Auto-regenerating enabled: /home/bhaarat/blog/omnipresent.github.com -> /home/bhaarat/blog/omnipresent.github.com/_site
[2012-04-21 13:46:40] regeneration: 38 files changed
[2012-04-21 13:46:40] INFO  WEBrick 1.3.1
[2012-04-21 13:46:40] INFO  ruby 1.9.2 (2011-07-09) [i686-linux]
[2012-04-21 13:46:40] WARN  TCPServer Error: Address already in use - bind(2)
[2012-04-21 13:46:40] INFO  WEBrick::HTTPServer#start: pid=7382 port=4000 
```

我知道该地址没有被使用，并且 jekyll 可能由于其他原因而中断，但抛出了该错误。我有哪些选择？我也试过重新安装。

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-10-21T19:29:31.613

在您的终端中键入以下内容以找出使用 3000 端口的进程的 PID：

```
$ lsof -wni tcp:3000 
```

然后，使用 PID 列中的数字来终止进程：

```
$ kill -9 PID 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-06-16T14:53:31.177

我没有资格发表评论。所以我添加了一个新的答案。

我在 Mac OS X 10.10.3 上遇到了这个问题。而且我以前从未安装/使用过 Jekyll。我无法使用默认端口号 4000 启动 jekyll 服务器。原因是该端口与 NoMachine 使用的端口相同。和

```
$ sudo lsof -wni tcp:4000 
```

注意：不运行此命令`sudo`将没有输出。

我看到了这个输出：

```
COMMAND PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
nxd     449   nx    3u  IPv4 0x8d22************      0t0  TCP *:terabase (LISTEN)
nxd     449   nx    4u  IPv6 0x8d22************      0t0  TCP *:terabase (LISTEN) 
```

`nxd`4000 端口被 NoMachine 启动的进程占用。和

```
$ sudo kill -9 449 
```

不会工作，因为 NoMachine 的 nxd 进程会不断重启，并使用新的 PID。

因此，我不得不：

*   将我在站点中的 jekyll 服务器端口更改`_config.yml`为另一个备用端口。我将下面的行附加到`_config.yml`并且它起作用了。

    `port: 3000 # change server port to 3000`

或者

*   更改 NoMachine 的默认 nxd 端口，或卸载 NoMachine

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-14T09:23:42.853

`Ctrl-Z` doesn't terminate a program, but rather suspends it and sends it to the background. You can resume the program with the "fg" command. To actually terminate it, use `Ctrl-C`.

The actual error message seems to be bogus and can be ignored. I am getting the same error message "address in use" but jekyll works fine anyway at the expected port.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-19T07:15:37.973

我最近遇到了这个问题。

上面的方法我都试过了，甚至重启了电脑，还是解决不了！！！然后我删除了 jekyll 并安装了一个新版本，它就可以工作了。

`gem uninstall jekyll & gem install jekyll`（也许你需要超级用户权限）。

如果你真的对类似的错误感到恼火，这个 sb 方法值得一试......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-27T04:22:19.990

检查您没有打开另一个终端，您已经在运行服务器。如果是这种情况，请执行*CTRL-C*关闭服务器，这将释放端口/地址。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-01T10:17:17.840

我们可以使用 fuser 命令

`fuser -k 3000/tcp`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-29T06:23:36.100

首先，您需要找到使用 3000 端口的进程的 PID：

```
 $ps -ef 
```

输出如下：

```
1003      4953  2614  0 08:51 pts/0    00:00:00 -bash
1003      5634     1  0 08:56 pts/0    00:00:00 spring server | moviestore | started 2 hours ago                                           
1003      5637  5634  0 08:56 ?        00:00:01 spring app    | moviestore | started 2 hours ago | development mode                                                              
1003      6078  4953  0 09:03 pts/0    00:00:03 puma 3.6.0 (tcp://localhost:3000) [moviestore]              
1003      6117  2614  0 09:03 pts/1    00:00:00 -bash
root      6520     2  0 09:57 ?        00:00:00 [kworker/u8:2]
root      6936  1225  0 11:09 ?        00:00:00 [lightdm] <defunct>
1003      7084     1  0 11:09 ?        00:00:00 /usr/bin/python /usr/share/apport/apport-gtk
1003      7475     1  0 11:10 ?        00:00:00 /usr/bin/python /usr/share/apport/apport-gtk
root      8739  1225  1 11:29 tty8     00:00:11 /usr/bin/X :1 -auth /var/run/lightdm/root/:1 -nolisten tcp vt8 -novtswitch
root      8853  1225  0 11:29 ?        00:00:00 lightdm --session-child 13 22
1002      8943     1  0 11:30 ?        00:00:00 /usr/bin/gnome-keyring-daemon --daemonize --login
1002      8954  8853  0 11:30 ?        00:00:00 gnome-session --session=ubuntu
1002      8992  8954  0 11:30 ?        00:00:00 /usr/bin/ssh-agent /usr/bin/dbus-launch --exit-with-session gnome-session --session=ubuntu
1002      8995     1  0 11:30 ?        00:00:00 /usr/bin/dbus-launch --exit-with-session gnome-session --session=ubuntu
1002      8996     1  0 11:30 ?        00:00:00 //bin/dbus-daemon --fork --print-pid 5 --print-address 7 --session
1002      9007  8954  0 11:30 ?        00:00:00 /usr/lib/gnome-settings-daemon/gnome-settings-daemon
1002      9015     1  0 11:30 ?        00:00:00 /usr/lib/gvfs/gvfsd
1002      9018  8954  1 11:30 ?        00:00:07 compiz
1002      9021     1  0 11:30 ?        00:00:00 /usr/lib/x86_64-linux-gnu/gconf/gconfd-2
1002      9028  8954  0 11:30 ?        00:00:00 /usr/lib/policykit-1-gnome/polkit-gnome-authentication-agent-1
1002      9029  8954  0 11:30 ?        00:00:01 nautilus -n
1002      9030  8954  0 11:30 ?        00:00:00 /usr/lib/gnome-settings-daemon/gnome-fallback-mount-helper
1002      9031  8954  0 11:30 ?        00:00:00 nm-applet
1002      9032  8954  0 11:30 ?        00:00:02 /opt/mTrac/mTrac
1002      9033  8954  0 11:30 ?        00:00:00 bluetooth-applet
1002      9045  9032  0 11:30 ?        00:00:00 /opt/mTrac/mTrac --type=zygote --no-sandbox
1002      9050     1  0 11:30 ?        00:00:00 /usr/lib/gvfs/gvfs-gdu-volume-monitor
1002      9054     1  0 11:30 ?        00:00:00 /usr/bin/pulseaudio --start --log-target=syslog
1002      9057     1  0 11:30 ?        00:00:00 /usr/lib/gvfs/gvfs-gphoto2-volume-monitor
1002      9062     1  0 11:30 ?        00:00:00 /usr/lib/gvfs/gvfs-afc-volume-monitor 
```

在这里你可以看到：

```
1003      6078  4953  0 09:03 pts/0    00:00:03 puma 3.6.0 (tcp://localhost:3000) [moviestore] 
```

本地主机：3000 有`pid: 6078`

杀死那个进程

```
$sudo kill 6078 
```

然后运行

```
$rails s 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-03-24T04:14:14.120

**变通**

运行中`/_site`：`python -m SimpleHTTPServer 8080`

# ssas - 如何获取 MDX 查询中用于分页的总行数？

> ID：10261478
> 
> 赞同：1
> 
> 时间：2012-04-21T17:48:31.050
> 
> 标签：ssas, mdx

我正在尝试在 MDX (SSAS) 中实现对大型数据集的分页。

我有以下内容来检索工作正常的分页数据：

```
SELECT 
{ 
  [Measures].[Mesasure1],
  [Measures].[Measure2]
} ON COLUMNS, 
SUBSET
(
  ORDER 
  (
    {
      (
        [Item].[Category].ALLMEMBERS
      )
    }, NULL, BASC
  ), 10, 50  --10 = start index, 50 = returned roes
) 
ON ROWS
FROM ( SELECT ( { [Time].[Date].&[2012-04-15T00:00:00]:[Time].[Date].&[2012-04-20T00:00:00] } ) ON COLUMNS
FROM [DataMartPerformance]
)) 
```

但是，我终其一生都无法在互联网上找到任何有助于解释如何获得可用总行数的地方。我是否在单独的查询中执行此操作？如果有怎么办？或者我可以以某种方式将它包装到这个查询中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:51:08.127

与执行 TSQL 分页的方式类似，您需要运行另一个查询来计算总元素。根据您完成原始查询的方式，您可能需要对此进行修改，但我使用类似：

```
WITH 
MEMBER [Measures].[ElementCount] AS
{
    NONEMPTY
    (
        {
            [Item].[Category].ALLMEMBERS *
            { [Time].[Date].&[2012-04-15T00:00:00]:[Time].[Date].&[2012-04-20T00:00:00] } 
        },
        {
            [Measures].[Mesasure1],
            [Measures].[Measure2]
        }
    )
}.COUNT

SELECT
{
    [Measures].[ElementCount]
}
ON COLUMNS
FROM 
[DataMartPerformance] 
```

对于过滤，您可以通过对您的维度属性使用存在来执行维度过滤器：

```
WITH 
MEMBER [Measures].[ElementCount] AS
{
    NONEMPTY
    (
        EXISTS
        (
            {
                [Item].[Category].ALLMEMBERS *
                { [Time].[Date].&[2012-04-15T00:00:00]:[Time].[Date].&[2012-04-20T00:00:00] } 
            },
            {
                [Dimension].[Attribute].[FilterByThisAttribute]
            }
        ),
        {
            [Measures].[Mesasure1],
            [Measures].[Measure2]
        }
    )
}.COUNT

SELECT
{
    [Measures].[ElementCount]
}
ON COLUMNS
FROM 
[DataMartPerformance] 
```

我还没有编写度量值过滤器，接下来我需要为我自己的 MDX 分页构造函数执行此操作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T08:53:45.977

请试试这个：

```
 WITH 
 SET MySet As 
 (
   NONEMPTY (             
               [AU Time Sale Hour].[Hour Key].[Hour Key] 
            *  [Dim Country].[Country Key].[Country Key]
             )
  )
  Member [Measures] .cnt  AS MySet.Count 
  select [Measures] .cnt on Columns 
  from  [Me Stats DW Fact Sales]  

   where (
          {[Dim Visa].[Visa Key].&[2067],[Dim Visa].[Visa Key].&[2068] },
          [AU Time Sale Date].[Date].&[20091120]:[AU Time Sale Date].[Date].&[20091125] 
         ) 
```

# opencv - 从凸点获取角

> ID：10261479
> 
> 赞同：4
> 
> 时间：2012-04-21T17:48:34.720
> 
> 标签：opencv, computer-vision, edge-detection

我已经编写了算法来提取图像中显示的点。它们形成凸形，我知道它们的顺序。如何从这些点中提取角（前 3 和底部 3）？我正在使用opencv。

![盒子](../Images/336154ca9af81d65882970aaa3609175.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T20:31:16.757

如果您已经有了对象的凸包，并且该包包括角点，那么您需要做的就是简化包，直到它只有 6 个点。

有很多方法可以简化多边形，例如你可以使用这个答案中使用的简单算法：[如何在图像中找到矩形的角坐标](https://stackoverflow.com/a/10128130/145999)

```
do
   for each point P on the convex hull: 
       measure its distance to the line AB _ 
       between the point A before P and the point B after P, 
   remove the point with the smallest distance 
repeat until 6 points left 
```

如果您不知道确切的点数，则可以删除点，直到最小距离超过某个阈值

你也可以做[Ramer-Douglas-Peucker](http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm)来简化多边形，openCV 已经在[cv::approxPolyDP](http://opencv.willowgarage.com/documentation/cpp/structural_analysis_and_shape_descriptors.html#cv-approxpolydp)中实现了。

只需修改[openCV 正方形样本](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/squares.cpp?rev=4244)以使用 6 个点而不是 4 个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T18:03:23.063

与其尝试直接确定哪些特征点对应于角点，不如在整个图像上应用角点检测算法，然后寻找哪些特征点出现在角点检测器中的峰值附近？

我建议从[Harris 角检测器](http://en.wikipedia.org/wiki/Corner_detection#The_Harris_.26_Stephens_.2F_Plessey_.2F_Shi-Tomasi_corner_detection_algorithm)开始。OpenCV 的实现是[cv::cornerHarris](http://opencv.willowgarage.com/documentation/cpp/imgproc_feature_detection.html#cv-cornerharris)。

本质上，Harris 算法将水平和垂直[Sobel 滤波器](http://en.wikipedia.org/wiki/Sobel_operator)应用于图像（或图像在 x 和 y 方向上的偏导数的一些其他近似）。

然后它在每个图像像素处构造一个 2×2[结构](http://en.wikipedia.org/wiki/Structure_tensor)矩阵，查看该矩阵的特征值，如果两个特征值都高于某个阈值，则调用点角。

# watir - 更改 Watir 浏览器标头

> ID：10261482
> 
> 赞同：-1
> 
> 时间：2012-04-21T17:49:08.990
> 
> 标签：watir, watir-webdriver

如何使用 Watir 更改浏览器标题？

我想在使用 Watir 时更改浏览器标题（在 Firefox 或 Chrome 中）。

我知道 watir-user-agent gem，但我有兴趣更改浏览器版本。

那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-22T11:33:23.647

是的，这是可以做到的。不幸的是，Watir 似乎没有提供任何非常简单的方法来做到这一点但是，这里有 2 个简单的选项可以工作：

### A. 使用代理服务器。

这是一种很好理解的修改标题的方法。但是我在自动化过程中没有亲自使用过它。

*步骤：*
1\. 在执行测试代码之前设置代理服务器
2\. 确保代理服务器将为每个请求添加所需的标头
3\. 然后当您的测试浏览器请求任何页面时----> 代理服务器将自动添加所需的标题。

### B. 使用浏览器扩展

由于 Watir 似乎无法自行修改标头......所以我们只要求 Watir 使用可以的普通浏览器扩展！
我已经使用 Chrome 和 firefox 成功完成了此操作
注意：这些步骤仅适用于指定的扩展 - 但类似的方法也适用于许多其他扩展。

*Firefox 步骤：*
1\. 启动 firefox
2\. 使用非常流行的搜索引擎搜索“Modify Headers Firefox” .... 最高结果是[https://addons.mozilla.org/En-us/firefox/addon/modify- headers/](https://addons.mozilla.org/En-us/firefox/addon/modify-headers/)
3\. 下载此扩展名的 .xpi 文件...目前您可以通过右键单击按钮并单击“将链接另存为”来执行此操作
4\. 正常安装扩展名，根据需要更改标题，关闭 firefox ，然后找到并保存“modifyheaders.conf”文件...该文件应该在您的用户文件夹中的某个位置
5\. 制作以下类（扩展 Profile）

```
class FirefoxProfileWithAddedFiles < Selenium::WebDriver::Firefox::Profile

  # This method OVERRIDES the one in Profile
  # This method creates the firefox profile folder
  def layout_on_disk
    #Call the superclass layout method
    profile_directory = super
    #Add custom file
    if(!@file_to_add_to_profile.nil?)
      FileUtils.cp(@file_to_add_to_profile, profile_directory)
    end
    profile_directory
  end

  def add_file_to_profile(filepath)
    @file_to_add_to_profile = filepath
  end 
```

6\. 如下设置你的测试脚本

```
 ...
    #Setup Firefox Profile
    profile = Selenium::WebDriver::Firefox::Profile::FirefoxProfileWithAddedFiles.new
    profile.add_extension("SOMEPATH/modifyheaders.xpi")
    profile.add_file_to_profile("SOMEPATH/modifyheaders.conf")
    profile["modifyheaders.config.active"] = true

    #Start up Firefox
    @browser = Watir::Browser.new :firefox, :profile => profile
    ... 
```

*Chrome 步骤*
1\. 启动 chrome
2\. 使用非常流行的搜索引擎搜索“Modify Headers Firefox”....顶部结果是[https://chrome.google.com/webstore/detail/modify-headers-for-google /innpjfdalfhpcoinfnehdnbkglpmogdi](https://chrome.google.com/webstore/detail/modify-headers-for-google/innpjfdalfhpcoinfnehdnbkglpmogdi)
3\. 正常安装扩展，根据需要更改标题，然后关闭 chrome
4\. 找到解压缩的扩展文件夹并复制它。在 Windows 上，文件夹将类似于...

> C:\Users\MYNAME\AppData\Local\Google\Chrome\User Data\Default\Extensions\innpjfdalfhpcoinfnehdnbkglpmogdi\2.0.3_0

5\. 找到扩展配置文件并复制。在 Windows 上，该文件将类似于...

> C:\Users\MYNAME\AppData\Local\Google\Chrome\User Data\Default\Local Storage\chrome-extension_innpjfdalfhpcoinfnehdnbkglpmogdi_0.localstorage

6\. 如下设置您的测试脚本：

```
...
#Setup Chrome Profile Folder
profile_directory = Dir.mktmpdir("webdriver-chrome-profile")
extension_configuration_folder = FileUtils.mkdir_p "#{profile_directory}/Default/Local Storage"
FileUtils.cp("PATH_TO_MY_EXTENSION_CONFIGURATION_FILE", extension_configuration_folder[0])

#Start Webdriver
@browser = Watir::Browser.new :chrome, :switches => ["--user-data-dir=#{profile_directory}", "--load-extension=#{PATH_TO_MY_UNPACKED_EXTENSION_FOLDER"]
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:40:13.973

Watir 在浏览器窗口内自动化浏览器，在操作系统级别的交互非常有限（例如响应警报等），您需要将浏览器（假设可能）预先配置为您想要的，或使用Autoit 之类的工具可以与浏览器的操作系统级别控件进行交互以执行此操作..（假设浏览器甚至具有允许您在向网站发出请求时根据浏览器和版本更改其报告内容的功能）

如果您将 Watir-Webdriver 与 Firefox 一起使用，那么您可以通过设置这些参数的配置文件来执行此操作。在这种情况下，您创建配置文件，然后创建具有该配置文件的浏览器对象。它几乎是一个 webdriver 函数，但在创建浏览器对象时很容易访问。

在创建配置文件时，请参阅[此 webdriver 错误](http://code.google.com/p/selenium/issues/detail?id=1054)以了解要使用的参数（在评论中）。有关如何设置和使用 firefox 配置文件的更多信息，请参阅 webdriver 文档。

另一个可能有用的选项是为用户代理 gem 分叉您自己的代码版本，并将 browser_version 添加为要设置的内容之一。它正在使用 FF 的配置文件，因此至少对于 FF 来说应该是可能的。对于 Chrome，它使用 user-agent 开关来覆盖 useragent 字符串，所以它应该也可以在那里，尽管你必须做一些工作来修改 gem 用来替换具有版本的部分的固定字符串你想要的那个。

然后，如果您让它工作，请发出拉取请求以将该增强功能添加到 gem..

或者，如果您自己不擅长这种事情，那么请求、恳求并提议用适当的东西贿赂 gem 作者，如果他们愿意为您扩展 gem 以制作可以设置的东西的版本之一。

# csv - Ocaml CSV 到浮动列表

> ID：10261485
> 
> 赞同：2
> 
> 时间：2012-04-21T17:49:45.530
> 
> 标签：csv, ocaml

我正在寻找将 CSV 文件（浮点数）转换为浮点数列表的最简单方法。我不太熟悉在 Ocaml 中读取文件，所以我不确定这种功能需要什么。

任何帮助或方向表示赞赏:)

编辑：除非绝对必须，否则我宁愿不使用第三方 CSV 库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T22:08:54.653

如果您不想包含[第三方库](https://stackoverflow.com/questions/10261485/ocaml-csv-to-float-list/10261498#10261498)，并且您的 CSV 文件格式简单，没有引号或嵌入的逗号，您可以使用标准库函数轻松解析它们。在循环或递归函数中使用`read_line`以依次读取每一行。要拆分每一行，请调用（使用或`Str.split_delim`链接您的程序）。调用以将每一列解析为浮点数。`str.cma``str.cmxa``float_of_string`

```
let comma = Str.regexp ","
let parse_line line = List.map float_of_string (Str.split_delim comma line) 
```

请注意，如果您的字段包含引号，这将中断。在返回的列表的每个元素的开头和结尾去除引号是很容易的`split_delim`。但是，如果有嵌入的逗号，则需要适当的 CSV 解析器。如果您的数据是由法语语言环境中的本地化程序生成的，您可能已经嵌入了逗号——法语使用逗号作为小数分隔符（例如 English `3.14159`、 French `3,14159`）。用逗号而不是点来编写浮点数据不是一个好主意，但您可能会遇到这种情况（例如，某些电子表格 CSV 导出）。如果您的数据来自 Fortran 程序，则应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T17:51:53.047

[https://forge.ocamlcore.org/projects/csv/](https://forge.ocamlcore.org/projects/csv/)

# php - Zend GData - 无法删除谷歌联系人 - Etag 错误

> ID：10261486
> 
> 赞同：2
> 
> 时间：2012-04-21T17:49:48.930
> 
> 标签：php, contacts, etag, zend-gdata

Zend 框架有问题。我正在尝试从谷歌服务器中删除单个联系人。我有课：

```
class GContacts
{
    const BASE_FEED_URI = 'https://www.google.com/m8/feeds';

    private $client = NULL;
    private $gData = NULL;
    private $contScope = '';
    private $groupScope = '';

    public function __construct($userName,$pass){       
        ini_set('include_path', LIB_DIR);
        require_once('\Zend\Loader.php');

        Zend_Loader::loadClass('Zend_Gdata');
        Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
        Zend_Loader::loadClass('Zend_Http_Client');
        Zend_Loader::loadClass('Zend_Gdata_Query');
        Zend_Loader::loadClass('Zend_Gdata_Feed');          

        $this -> client = Zend_Gdata_ClientLogin::getHttpClient($userName, $pass, 'cp');
        $this -> gData = new Zend_Gdata($this -> client);
        $this -> gData -> setMajorProtocolVersion(3);

        $this -> contScope = self :: BASE_FEED_URI . '/contacts/' . urlencode($userName);
    }

    public function addContact($cont){
        $doc = new DOMDocument();
        $doc -> formatOutput = true;

        // header
        $entry = $doc -> createElement('atom:entry');
        $entry -> setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:atom', 'http://www.w3.org/2005/Atom');
        $entry -> setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:gd', 'http://schemas.google.com/g/2005');
        $entry -> setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:gContact', 'http://schemas.google.com/contact/2008');
        $doc -> appendChild($entry);

        // add name element
        $name = $doc -> createElement('gd:name');
        $entry -> appendChild($name);
        $fullName = $doc -> createElement('gd:fullName', 'John Doe');
        $name -> appendChild($fullName);

        // insert entry
        $addResult = $this -> gData -> insertEntry($doc -> saveXML(), 'http://www.google.com/m8/feeds/contacts/default/full');

        return $this -> parseUniqueId($addResult -> id);
    }

    public function delete($gid){
        // Should be some work with Etag, but Zend is buggy and it doesn't work
        $entry = $this -> gData -> getEntry($this -> contScope . '/full/' . $gid);
        $entry -> delete();
    }

    private function parseUniqueId($link){
        $arr = explode('/',$link);
        return end($arr);
    }
} 
```

并调用：

```
$gCont = new GContacts($userName,$pass);

$gid = $gCont -> addContact('param will be soon');
$gCont -> delete($gid); 
```

这是问题（在删除方法中）：

*   预期的响应代码 200，得到 403 If-Match 或 If-None-Match 标头或需要条目 etag 属性

我必须使用 google [Etag 处理](http://code.google.com/apis/gdata/docs/2.0/reference.html#ResourceVersioning)，因为有不止一个人可以访问这个联系人，所以我不能在 Zend 错误报告中使用[这个](http://framework.zend.com/issues/browse/ZF-10194)或[建议](https://stackoverflow.com/questions/2989257/if-match-or-if-none-match-header-or-entry-etag-attribute-required-error-when-t)。有谁知道如何解决它？

非常感谢！阿贾克斯

编辑：这个错误根本没有修复，这里有人有这个问题吗？我很绝望.. ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T18:22:39.430

我有解决办法。

Zend\Gdata\App.php 有BUG

第 547 行（版本 1.12.6），添加行**$headers['If-Match'] = '*';** 在 if 条件下。现在，你应该有：

```
if ($method == 'DELETE') {
    $rawData = null;
    $headers['If-Match'] = '*';
} 
```

保持联系；）

# c++ - 客户端和服务器示例不起作用

> ID：10261487
> 
> 赞同：2
> 
> 时间：2012-04-21T17:49:53.813
> 
> 标签：c++, network-programming, socket.io

我正在学习套接字编程...我正在尝试创建一个程序，在该程序中我在客户端屏幕上输入一个句子并将其传输到服务器，然后它出现在运行服务器的终端上......代码在[这里](http://textuploader.com/?p=6&id=zszjX).....（在看到这个问题的第一个答案后，我意识到我的错误，并将**read() 函数中的 sockfd1更改为 connfd 并在 server.cpp 中的****accept() 之后**使用fork() ......但仍然是 prog不工作）

在 client.cpp 的早期，我使用了 fgets(clibuff, 100, stdin) 并将它和 write(sockcli, clibuff, strlen(clibuff)) 放在无限的 for 循环中，但这不起作用......

所以我决定让它只适用于一个语句并删除了 for 循环......但这也不起作用......

当我在两个单独的命令行上运行它们时，它们都开始正常（因为两个程序中的 x 输出 0）...但是***当我在客户端键入任何内容并按 Enter 时...它不会出现在服务器窗口上***。 ..代码的相关部分是：

```
-------server.cpp-----

int sockfd1;
sockfd1=socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);
int x=bind(sockfd1, (sockaddr*)(&serv), sizeof(serv)); //serv is my sockaddr_in structure
cout<<x<<endl;
listen(sockfd1,5);

listen(sockfd1,5);
int y;
for(;;)
{
connfd=accept(sockfd1, &cliaddr, &siz);     

if((y=read(sockfd1, servbuff, 100))>0) //i changed sockfd1 here to connfd
fputs(servbuff, stdout);

}

-----client.cpp------

char clibuff[100];
char line[100];

sockaddr_in cli;
bzero(&cli, sizeof(cli));
cli.sin_family=AF_INET;
inet_aton("127.0.0.1", &(cli.sin_addr));
cli.sin_port=htons(2289);

int sockcli;
sockcli=socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
int x= connect(sockcli,(sockaddr*)&cli, sizeof(cli));
cout<<x<<endl;

cin>>clibuff;
write(sockcli, clibuff, strlen(clibuff));

return 0; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:58:48.503

您正在从侦听套接字读取。你不应该那样做。

'connfd' 是新连接客户端的服务器<>客户端套接字 - 它是您应该在其上读取/写入该客户端的套接字。通常会创建一个以“connfd”为参数的新线程，以便可以独立处理每个客户端。

阅读accept()。

# ruby - 从浮点数中删除科学记数法

> ID：10261489
> 
> 赞同：6
> 
> 时间：2012-04-21T17:50:29.130
> 
> 标签：ruby

我目前正在将两个浮点数相乘，如下所示：0.0004 * 0.0000000000012 = 4.8e-16

如何以正常格式获得结果，即没有科学记数法，例如 0.0000000000324，然后将其四舍五入为 5 个数字。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T17:54:01.327

您可以使用[字符串格式](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-25)。

```
a =  0.0004 * 0.0000000000012 # => 4.8e-16
'%.5f' % a # => "0.00000"

pi = Math::PI # => 3.141592653589793
'%.5f' % pi # => "3.14159" 
```

# html - CSS 'clear:both;" 在 IE7 浏览器中无法正常工作。在 IE8/IE9、Firefox、Chrome 等中没有问题

> ID：10261490
> 
> 赞同：0
> 
> 时间：2012-04-21T17:50:31.020
> 
> 标签：html, css, internet-explorer-7, typo3

我收到了来自我的一个网站的访问者的几项投诉。就这些问题与我们联系的个人使用的是在 Windows XP 上运行的 IE7。我可以通过运行 IE7 本身来复制该问题，或者通过以兼容模式在 IE8/IE9 中显示该站点，并选择 IE7 文档模式。

[此页面包含一个注册表单](http://thenaca.org/2012-conference/registration/ "此页面包含一个注册表单")，其中包含float:left 的 fieldwraps，并且偶尔会分配一个“clear:both”来开始新的一行字段。同样，可以在任何现代的、符合标准的浏览器中查看所需的输出，甚至可以在 IE8/IE9 中查看。

如果您需要澄清问题，我很乐意提供，非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:58:12.033

您正在以一种糟糕的方式混合浮动和清除。有带有标签和字段的 DIV，您只需要浮动这些 div，但您也在浮动 DIV 内的字段和标签而不清除它们。这是 IE7 中的一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:00:26.267

清除：两者都需要在要清除的两个元素之后位于单独的 div 上。如果您无法使用 :after 伪元素将要清除的字段包装在明确的修复中。

请参阅此线程：[我可以使用哪些“clearfix”方法？](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)

有时如果你不强制使用 IE7，它可能会弄乱你的浮动。最简单的方法是添加 zoom:1; 到您的 ie7 样式表。

# c++ - 哈希计算频率可以改进吗？

> ID：10261492
> 
> 赞同：1
> 
> 时间：2012-04-21T17:50:53.033
> 
> 标签：c++, performance, algorithm, data-structures, hashtable

我目前正在构建一个哈希表以计算频率，具体取决于数据结构的运行时间。**O(1)**插入，**O(n)**更糟糕的查找时间等。

我问了几个人`std::map`哈希表和哈希表之间的区别，我得到的答案是：

*“`std::map`将元素添加为二叉树，因此会导致**O(log n) ，而****您实现**的哈希表将是**O(n)**。”*

因此，我决定使用**链表数组（用于单独链接）**结构来实现哈希表。在下面的代码中，我为节点分配了两个值，一个是**键（单词）**，另一个是**值（频率）**。它的作用是；当添加第一个节点时，如果**索引**为空，则直接将其作为链表的第一个元素插入，频率为**0**。如果它已经在列表中（不幸的是，搜索需要**O(n)**时间）将其频率增加 1。如果没有找到，只需将其添加到列表的开头。

我知道在实现中有很多流程，所以我想问问这里有经验的人，**为了有效地计算频率**，如何改进这个实现？

到目前为止我写的代码；

```
#include <iostream>
#include <stdio.h>

using namespace std;

struct Node {
    string word;
    int frequency;
    Node *next;
};

class linkedList
{
private:
    friend class hashTable;
    Node *firstPtr;
    Node *lastPtr;
    int size;
public:
    linkedList()
    {
        firstPtr=lastPtr=NULL;
        size=0;
    }
    void insert(string word,int frequency)
    {
        Node* newNode=new Node;
        newNode->word=word;
        newNode->frequency=frequency;

        if(firstPtr==NULL)
            firstPtr=lastPtr=newNode;
        else {
            newNode->next=firstPtr;
            firstPtr=newNode;
        }

        size++;
    }
    int sizeOfList()
    {
        return size;
    }
    void print()
    {
        if(firstPtr!=NULL)
        {
            Node *temp=firstPtr;
            while(temp!=NULL)
            {
                cout<<temp->word<<" "<<temp->frequency<<endl;
                temp=temp->next;
            }
        }
        else
            printf("%s","List is empty");
    }
};

class hashTable
{
private:
    linkedList* arr;
    int index,sizeOfTable;
public:
    hashTable(int size) //Forced initalizer
    {
        sizeOfTable=size;
        arr=new linkedList[sizeOfTable];
    }
    int hash(string key)
    {
        int hashVal=0;

        for(int i=0;i<key.length();i++)
            hashVal=37*hashVal+key[i];

        hashVal=hashVal%sizeOfTable;
        if(hashVal<0)
            hashVal+=sizeOfTable;

        return hashVal;
    }
    void insert(string key)
    {
        index=hash(key);
        if(arr[index].sizeOfList()<1)
            arr[index].insert(key, 0);
        else {
            //Search for the index throughout the linked list.
            //If found, increment its value +1
            //else if not found, add the node to the beginning
        }
    }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:48:55.243

1- 在 std::map 和 std::set 中搜索的复杂时间为 O(log(n))。而且，std::unordered_map 和 std::unordered_set 的摊销时间复杂度为 O(n)。但是，散列的常数时间可能非常大，并且对于小数字变得超过 log(n)。我总是考虑这张脸。

2- 如果你想使用 std::unordered_map，你需要确保为你的类型定义了 std::hash。否则你应该定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:42:14.150

你关心最坏的情况吗？如果不是，请使用 an `std::unordered_map`（它处理冲突并且您不想要 a `multimap`）或 trie/critbit 树（取决于键，它可能比散列更紧凑，这可能会导致更好的缓存行为）。如果是，请使用 an`std::set`或 trie。

例如，如果您想要在线 top-k 统计信息，请在字典*之外保留一个优先级队列。*每个字典值都包含出现次数以及单词是否属于队列。队列复制了前 k 个频率/单词对，但按频率键控。每当您扫描另一个单词时，请检查它是否 (1) 尚未在队列中，以及 (2) 是否比队列中的最少元素更频繁。如果是这样，请提取最少的队列元素并插入刚刚扫描的那个。

如果您愿意，您可以实现自己的数据结构，但从事 STL 实现工作的程序员往往非常敏锐。我会确保这是瓶颈首先出现的地方。

# cocos2d-iphone - cocos2d-iphone 淡出精灵需要清理吗？

> ID：10261496
> 
> 赞同：1
> 
> 时间：2012-04-21T17:51:14.483
> 
> 标签：cocos2d-iphone

我正在使用 cocos2d 开发 iPhone 游戏。

当玩家四处移动并通过做事得分时，我会导致小的 CCLabelBMFont 实例出现然后淡出 (CCFadeOut)。这些 CCLabelBMFont 实例是添加到图层的精灵。

我是通过在完成 CCFadeOut 操作后不从图层中删除淡出的精灵来“泄漏”内存或任何东西，还是它们随后消失了，或者不需要被视为“有效”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:46:22.843

CCFadeOut 完成后，图层将保留现在透明的标签。之后您必须手动将其从图层中移除，除非您打算稍后将其淡入，在这种情况下您可以保留它。

这是低效的内存使用，而不是内存泄漏。

您不会导致内存泄漏，因为当层被释放时，它将释放其子节点，包括标签，假设您没有以不会触发保留的方式实例化标签。

**更新：标签淡出后如何移除标签**

将您的 CCFadeOut 替换为如下所示的 CCSequence：

```
[yourLabel runAction:[CCSequence actions:[CCFadeOut actionWithDuration:DURATION], [CCCallFuncN actionWithTarget:self selector:@selector(removeLabel:)], nil]]; 
```

现在实现您的新处理程序 removeLabel: 并使其删除标签。它将标签作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:12:06.720

`CCFadeOut`不会删除或释放您的精灵，一旦它们的目的结束，您就应该这样做。事实上，没有任何动作会释放/删除其他对象。他们只是在操纵他们。

# android - Android：访问 OnClickListener 中的视图元素

> ID：10261499
> 
> 赞同：0
> 
> 时间：2012-04-21T17:51:55.620
> 
> 标签：android

我有一个片段容器和片段外部的一些按钮，它们与片段的内容交互。当我单击按钮时，我需要获取文本元素内的信息。这是我现在拥有的，但它不起作用。代码来自片段寻呼机演示。

```
Button bm = (Button) findViewById(R.id.bm);
bm.setOnClickListener(new OnClickListener() {
  public void onClick(View v) {
    EditText editTextIn1 = (EditText) v.findViewById(R.id.editTextIn1);
  }
}); 
```

编辑我使用这个示例：

```
http://developer.android.com/reference/android/support/v13/app/FragmentStatePagerAdapter.html

public class FragmentStatePagerSupport extends FragmentActivity {
    static final int NUM_ITEMS = 10;

    MyAdapter mAdapter;

    ViewPager mPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment_pager);

        mAdapter = new MyAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        // Watch for button clicks.
        Button button = (Button)findViewById(R.id.goto_first);
        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mPager.setCurrentItem(0);
            }
        });
        button = (Button)findViewById(R.id.goto_last);
        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mPager.setCurrentItem(NUM_ITEMS-1);
            }
        });
    }

    public static class MyAdapter extends FragmentStatePagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return NUM_ITEMS;
        }

        @Override
        public Fragment getItem(int position) {
            return ArrayListFragment.newInstance(position);
        }
    }

    public static class ArrayListFragment extends ListFragment {
        int mNum;

        /**
         * Create a new instance of CountingFragment, providing "num"
         * as an argument.
         */
        static ArrayListFragment newInstance(int num) {
            ArrayListFragment f = new ArrayListFragment();

            // Supply num input as an argument.
            Bundle args = new Bundle();
            args.putInt("num", num);
            f.setArguments(args);

            return f;
        }

        /**
         * When creating, retrieve this instance's number from its arguments.
         */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            mNum = getArguments() != null ? getArguments().getInt("num") : 1;
        }

        /**
         * The Fragment's UI is just a simple text view showing its
         * instance number.
         */
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.fragment_pager_list, container, false);
            View tv = v.findViewById(R.id.text);
            ((TextView)tv).setText("Fragment #" + mNum);
            return v;
        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);
            setListAdapter(new ArrayAdapter<String>(getActivity(),
                    android.R.layout.simple_list_item_1, Cheeses.sCheeseStrings));
        }

        @Override
        public void onListItemClick(ListView l, View v, int position, long id) {
            Log.i("FragmentList", "Item clicked: " + id);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T18:00:29.187

onCLickListener 中的 v 指的是 Button 本身，在按钮上调用 findViewByID 意味着该按钮正在查看其子项（它没有任何子项）以查找 EditText 元素。如果此代码在活动中运行，您可以执行以下操作：

```
Button bm = (Button) findViewById(R.id.bm);
bm.setOnClickListener(new OnClickListener() {
  public void onClick(View v) {
    EditText editTextIn1 = (EditText) findViewById(R.id.editTextIn1);
  }
}); 
```

或者，如果您有对片段容器的引用（如框架布局或其他东西），您可以这样做

```
Button bm = (Button) findViewById(R.id.bm);
bm.setOnClickListener(new OnClickListener() {
  public void onClick(View v) {
    EditText editTextIn1 = (EditText) myFragmentContainer.findViewById(R.id.editTextIn1);
  }
}); 
```

# jsf-2 - Primefaces 数据列表分页

> ID：10261507
> 
> 赞同：1
> 
> 时间：2012-04-21T17:53:46.463
> 
> 标签：jsf-2, primefaces

我正在使用带有 Ajax 分页的数据列表，第一页加载良好，显示 5 个结果。它知道我有 3 页的结果，但是当我单击第二/第三页时，我得到一个空列表。

我的模型扩展了 LazyDataModel 并且第一次加载页面时，我可以在 load() 方法上设置断点，我可以看到它要求结果 1-5，这很棒。但是单击“第 2 页”不会导致再次调用 load 方法（尽管它确实会导致大约 3 次调用我的lazyDataModel 字段本身（只是不是其中的 load 方法）。

对此很陌生，尽管阅读了很多并尝试了各种事情，但我不太明白它应该如何工作。展示示例对我来说似乎并不“完整”。

这是我的代码中最相关的部分（我认为）。对格式感到抱歉：

```
@PostConstruct
public void LoadData() {
  lazyModel = new LazyDataModel<MessageboardThread>() {

  @Override
  public List<MessageboardThread> load(int first, int pageSize, String sortField, SortOrder so, Map<String, String> map) {
    List<MessageboardThread> result = new ArrayList<MessageboardThread>();

    try {
        result = mbDao.findAll(pageSize, first);
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return result;
  }
};
getLazyModel().setRowCount(mbDao.count());
getLazyModel().setPageSize(pageSize);
} 
```

每次点击下一页/上一页时都会执行此方法 /** * @return thelazyModel */ public LazyDataModel getLazyModel() { return lazyModel; }

这是我的 xhtml 文件

```
 <p:dataList value="#{messageboardBean.lazyModel}" var="thread" id="threads"  
                paginator="true" rows="5" effectSpeed="fast"  
                paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"  
                rowsPerPageTemplate="5,10,15" type="none"
                paginatorPosition="bottom">  

                    <f:facet name="header">  
                        Conversations 
                    </f:facet>  

                    <p:column>  
                        <h:outputText value="#{thread.title}" style="margin-left:10px" />  
                        <br />  
                    </p:column>  
            </p:dataList> 
```

我很难过，非常感谢任何帮助

PS我在那里放了一个@PostContruct注释，因为它似乎是一个进行设置的好地方，但它可能是错误的，我没有在任何其他示例中看到它，但是我也无法让任何其他示例工作.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:30:45.793

解决了。我忘记将 dataList 属性包装在 h:form 标记中。它现在工作正常。

# c# - ShareStatusTask 在 Windows Phone XNA 中打开后立即关闭

> ID：10261508
> 
> 赞同：1
> 
> 时间：2012-04-21T17:53:54.980
> 
> 标签：c#, windows-phone-7, xna, windows-phone

我的游戏获得了高分，我希望我的用户通过社交媒体（Twitter、Facebook）分享它们。我以前使用 ShareStatusTask 让我的用户通过社交媒体分享东西，但是当我在我的 XNA 游戏中使用此功能时。它只是在打开后立即关闭（崩溃？）。

有谁知道这个的解决方案？或者通过社交媒体分享高分的其他方式？

提前致谢。

**编辑：**对不起，我超级愚蠢，在模拟器上测试了这个。当我在手机上对其进行测试时，它可以即时运行。忘记了模拟器没有共享功能的设置。谢谢你的帮助。

# sencha-touch - 使用 senchaTouch 打印用户的电话号码

> ID：10261509
> 
> 赞同：0
> 
> 时间：2012-04-21T17:53:55.150
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我需要知道是否有任何方法可以使用`SenchaTouch`. 我对这个框架真的很陌生，有人可以帮我解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:10:15.780

我当然希望不会！Sencha 是一个用于构建 Web 应用程序的服务器端框架。

您所要求的将是巨大的隐私侵犯。一个网站可以从所有访问的移动用户那里收集电话号码......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:18:05.660

这当然是不可能的......而且 sencha touch 只是一个移动 java 脚本框架。这个库绝对没有这样做的能力。绝对是黑客入侵将浏览网站或应用程序的电话号码的犯罪行为。

# java - NIO - 通道就绪状态会丢失吗？

> ID：10261515
> 
> 赞同：0
> 
> 时间：2012-04-21T17:54:11.063
> 
> 标签：java, nio

我是 Java 中非阻塞 IO 的新手。我有一个问题 - 非阻塞通道的准备是否会被选择器丢失，如果来自服务器的新数据包将在我们完成从通道读取之后到达，但在我们从选择器中删除该通道的选择键之前？这里的示例代码：

```
 Selector selector;

        // ......

        while (true) {
            selector.select();
            Set<SelectionKey> set = selector.selectedKeys();

            Iterator<SelectionKey> iterator = set.iterator();
            while (iterator.hasNext()) {
                SelectionKey key = iterator.next();
                SocketChannel channel = (SocketChannel) key.channel();
                ByteBuffer byteBuffer = ByteBuffer.allocate(GOOD_ENOUGH_CAPACITY);
                while (channel.read(byteBuffer) > 0) ;

                // HERE ! What happen if server started to write new message here?
                // Will this channel be selected on next selector.select() ?

                iterator.remove();

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:30:54.540

是的，将选择密钥。你必须使用方法

```
key.cancel(); 
```

从选择器中删除键

# ios - 为什么在 iPad 上，self.clearsContextBeforeDrawing = NO；在绘制之前不会使 drawRect 自身不清除

> ID：10261518
> 
> 赞同：2
> 
> 时间：2012-04-21T17:54:32.343
> 
> 标签：ios, uikit

我有一个`TestView`继承自，并且使用它的方法`UIView`在屏幕上绘制所有内容。`drawRect`

但是如果我不想`drawRect`在绘制之前清除视图，我使用

```
self.clearsContextBeforeDrawing = NO;  
self.opaque = NO;   // also added because the doc says the rect 
                    //   passed to drawRect will be filled with 
                    //   background color first if it is set to YES 
```

在`initWithFrame`方法中。

该`drawRect`方法通过使用调用

```
[self.view setNeedsDisplay]; 
```

在`ViewController`事件处理程序中。（对于 touchesMoved 事件）

但是，在绘制任何东西之前，一切都被清除了吗？如何让它发挥作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T21:22:18.550

我认为[这](https://stackoverflow.com/q/865636/276656)回答了你的问题。从答案：

> 您无法通过执行以下操作来防止内容被删除：
> 
> [自我setClearsContextBeforeDrawing：否]；
> 
> 这只是对图形引擎的一个提示，让它为您预先清除视图是没有意义的，因为无论如何您可能需要重新绘制整个区域。它可能会阻止您的视图被自动删除，但您不能依赖它。

# google-app-engine - 我应该将 App Engine 生成的大文件移开吗？

> ID：10261520
> 
> 赞同：0
> 
> 时间：2012-04-21T17:55:08.800
> 
> 标签：google-app-engine

我刚刚从 App Engine 导出了一些数据库表，以防止灾难性损失。我生成的所有文件（csv、.sql3、bulkloader 日志）仍在我的应用程序目录中。

然后我恢复了开发，当我做了一个

```
appcfg.py update . 
```

事实上，我终止了更新，因为它需要很长时间。那么我应该把这些生成的大文件移开吗？我喜欢它们所在的位置，因为它可以更轻松地跟踪它们，但如果它会减慢更新速度，我愿意移动它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:01:58.457

是的，你应该移动它们。appcfg 脚本将尝试处理它们，这会减慢速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T19:44:46.803

另一种选择是修改 app.yaml 并将它们添加到忽略列表中。

# vb.net - 如何从 VB.NET 运行 DOS/CMD/命令提示符命令？

> ID：10261521
> 
> 赞同：17
> 
> 时间：2012-04-21T17:55:12.123
> 
> 标签：vb.net, cmd, command

这个问题是不言自明的。如果代码只有一行长（与“ `Process.Start("...")`”有关？），那就太好了。我研究了网络，但只发现了旧的例子和那些不起作用的例子（至少对我来说）。我想在我的类库中使用它来运行 Git 命令（如果有帮助？）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-21T21:26:00.057

你可以试试这个方法：

```
Public Class MyUtilities
    Shared Sub RunCommandCom(command as String, arguments as String, permanent as Boolean) 
        Dim p as Process = new Process() 
        Dim pi as ProcessStartInfo = new ProcessStartInfo() 
        pi.Arguments = " " + if(permanent = true, "/K" , "/C") + " " + command + " " + arguments 
        pi.FileName = "cmd.exe" 
        p.StartInfo = pi 
        p.Start() 
    End Sub
End Class 
```

例如，以这种方式调用：

```
MyUtilities.RunCommandCom("DIR", "/W", true) 
```

**编辑：**对于一行上的多个命令，关键是 & | && 和 || 命令连接器

*   **A & B** → 执行命令 A，然后执行命令 B。
*   **一个 | B** → 执行命令 A，并将它的所有输出重定向到命令 B 的输入。
*   **A && B** → 执行命令A，运行命令A后判断errorlevel，如果退出码（errorlevel）为0，才执行命令B。
*   **一个 || B** → 执行命令 A，评估此命令的退出代码，如果它不是 0，则仅执行命令 B。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-28T20:12:16.183

你可以试试这个运行命令然后`cmd`退出

```
Process.Start("cmd", "/c YourCode") 
```

你可以试试这个来运行命令并`cmd`等待更多命令

```
Process.Start("cmd", "/k YourCode") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-03T23:57:05.433

我受到史蒂夫的回答的启发，但我想我会为它添加一点闪光。我喜欢在编写扩展方法之前先做这些工作，所以以后调用该方法的工作就更少了。

例如，使用下面史蒂夫答案的修改版本，而不是拨打这个电话......

`MyUtilities.RunCommandCom("DIR", "/W", true)`

我实际上可以只输入命令并像这样从我的字符串中调用它......

*直接在代码中。*

`Call "CD %APPDATA% & TREE".RunCMD()`

或者

*从一个变量。*

```
Dim MyCommand = "CD %APPDATA% & TREE"
MyCommand.RunCMD() 
```

或者

*从文本框。*

`textbox.text.RunCMD(WaitForProcessComplete:=True)`

* * *

扩展方法需要放置在公共模块中，并`<Extension>`在子模块上携带属性。您还需要添加`Imports System.Runtime.CompilerServices`到代码文件的顶部。

如果您需要进一步的帮助，有很多关于扩展方法的信息。

* * *

**扩展方法**

```
Public Module Extensions
''' <summary>
''' Extension method to run string as CMD command.
''' </summary>
''' <param name="command">[String] Command to run.</param>
''' <param name="ShowWindow">[Boolean](Default:False) Option to show CMD window.</param>
''' <param name="WaitForProcessComplete">[Boolean](Default:False) Option to wait for CMD process to complete before exiting sub.</param>
''' <param name="permanent">[Boolean](Default:False) Option to keep window visible after command has finished. Ignored if ShowWindow is False.</param>
<Extension>
Public Sub RunCMD(command As String, Optional ShowWindow As Boolean = False, Optional WaitForProcessComplete As Boolean = False, Optional permanent As Boolean = False)
    Dim p As Process = New Process()
    Dim pi As ProcessStartInfo = New ProcessStartInfo()
    pi.Arguments = " " + If(ShowWindow AndAlso permanent, "/K", "/C") + " " + command
    pi.FileName = "cmd.exe"
    pi.CreateNoWindow = Not ShowWindow
    If ShowWindow Then
        pi.WindowStyle = ProcessWindowStyle.Normal
    Else
        pi.WindowStyle = ProcessWindowStyle.Hidden
    End If
    p.StartInfo = pi
    p.Start()
    If WaitForProcessComplete Then Do Until p.HasExited : Loop
End Sub
End Module 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-13T20:13:15.793

```
Sub systemcmd(ByVal cmd As String)
    Shell("cmd /c """ & cmd & """", AppWinStyle.MinimizedFocus, True)
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-24T06:59:37.597

```
Imports System.IO
Public Class Form1
    Public line, counter As String
    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        counter += 1
        If TextBox1.Text = "" Then
            MsgBox("Enter a DNS address to ping")
        Else
            'line = ":start" + vbNewLine
            'line += "ping " + TextBox1.Text
            'MsgBox(line)
            Dim StreamToWrite As StreamWriter
            StreamToWrite = New StreamWriter("C:\Desktop\Ping" + counter + ".bat")
            StreamToWrite.Write(":start" + vbNewLine + _
                                "Ping -t " + TextBox1.Text)
            StreamToWrite.Close()
            Dim p As New System.Diagnostics.Process()
            p.StartInfo.FileName = "C:\Desktop\Ping" + counter + ".bat"
            p.Start()
        End If
    End Sub
End Class 
```

这也有效

# c++ - 如何将二进制数据转换为整数值

> ID：10261524
> 
> 赞同：3
> 
> 时间：2012-04-21T17:55:29.240
> 
> 标签：c++, stl, integer, type-conversion, binary-data

# 问题

将二进制转换为整数表示的最佳方法是什么？

## 语境

假设我们有一个缓冲区，其中包含从外部源（如套接字连接或二进制文件）获得的二进制数据。数据以明确定义的格式组织，我们知道前四个八位字节表示单个无符号 32 位整数（可能是后续数据的大小）。将这些八位字节转换为可用格式（例如 std::uint32_t）的更有效方法是什么？

## 例子

这是我到目前为止所尝试的：

```
#include <algorithm>
#include <array>
#include <cstdint>
#include <cstring>
#include <iostream>

int main()
{
    std::array<char, 4> buffer = { 0x01, 0x02, 0x03, 0x04 };
    std::uint32_t n = 0;

    n |= static_cast<std::uint32_t>(buffer[0]);
    n |= static_cast<std::uint32_t>(buffer[1]) << 8;
    n |= static_cast<std::uint32_t>(buffer[2]) << 16;
    n |= static_cast<std::uint32_t>(buffer[3]) << 24;
    std::cout << "Bit shifting:  " << n << "\n";

    n = 0;
    std::memcpy(&n, buffer.data(), buffer.size());
    std::cout << "std::memcpy(): " << n << "\n";

    n = 0;
    std::copy(buffer.begin(), buffer.end(), reinterpret_cast<char*>(&n));
    std::cout << "std::copy():   " << n << "\n";
} 
```

在我的系统上，以下程序的结果是

```
Bit shifting:  67305985
std::memcpy(): 67305985
std::copy():   67305985 
```

1.  它们都符合标准还是使用实现定义的行为？
2.  哪个效率更高？
3.  有没有更好的方法来进行这种转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T18:08:16.890

您本质上是在询问*字节顺序*。虽然您的程序可能在一台计算机上运行，​​但它可能无法在另一台计算机上运行。如果“定义明确的格式”是网络顺序，则有一组标准的宏/函数可以在网络顺序和特定机器的自然顺序之间进行转换。

# java - Android：如何打开未知文件类型

> ID：10261529
> 
> 赞同：5
> 
> 时间：2012-04-21T17:56:18.893
> 
> 标签：java, android, file-handling

我正在android中开发一个文件资源管理器应用程序。如何处理带有未知扩展名的文件？当我尝试打开此类文件时，它会抛出 ActivityNotFound 异常。但是我希望系统弹出应用程序列表，以便我们可以手动选择一个应用程序来打开它。有人能帮我一下吗？

我正在通过将文件及其扩展名绑定到意图来开始打开文件的活动。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
MimeTypeMap mime = MimeTypeMap.getSingleton();
String ext = file.getName().substring(file.getName().lastIndexOf(".") + 1);
String type = mime.getMimeTypeFromExtension(ext);
intent.setDataAndType(Uri.fromFile(new File(file.toString())), type);
try
{
    startActivity(intent);
}
catch(Exception e){} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T18:03:40.593

`ActivityNotFound`当没有注册可以处理特定文件类型的应用程序时抛出。这意味着您要显示的应用程序列表将为空。

处理这种情况的最合适的方法是捕获`ActivityNotFound`异常并显示一个 toast 通知用户没有合适的应用程序可以打开文件。

所有安卓浏览器都以这种方式进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:07:47.877

我将把这个链接留在这里，它针对同样的问题，并有更多的细节（第二个答案，阅读评论）：[Launching an Activity based on a file in android](https://stackoverflow.com/questions/6338273/launching-an-activity-based-on-a-file-in-android)

# php - 检索表行的ID？

> ID：10261531
> 
> 赞同：1
> 
> 时间：2012-04-21T17:56:21.263
> 
> 标签：php, jquery

单击按钮“更多详细信息”时，我有以下脚本可以打开 table2

```
 <script>
  $(document).ready(function() {

       $('#Table1 tr').click(function(event){

         $('#Table2').show();
         alert($(this).attr('id'));
       });
     });

</script> 
```

这是我的代码

```
 <table id= "Table1" width='100%' border='1' cellspacing='0' cellpadding='0'>
    $sql2=..
    $sql3 = blabla ;
    while($row3 =mysql_fetch_array($sql3)){
    $sql4 = mysql_query (" SELECT $ww as place FROM data WHERE $ww =".$row3[$ww]." and  id_user = ".$userid." ");
    $row4 = mysql_fetch_array($sql4) ;
    $string = "<blink > here  </blink>" ;

    $wnumber = $row3[$ww] ;

     echo "<tr id= '".$wnumber."'><td  style= 'text-align : center ;'>Week ".$row3[$ww]."
              </td>" ;
     echo "<td >".(int) $row3["percent"] ."% </td>";
     echo "<td > "?><?php if($row4['place'] == 
     $row3[$ww] and $row2['id'] == $userid ){ echo $string ; } else { echo "";} ;?><?php
     "</td>";
     echo "<td ><button class='showr'>More Details</button> </td></tr>";
    //More Details when clicking on this buttom it open the table2
     }
   </tr>
 </table> 
```

这是第二张桌子

```
 <?php
    echo "<div id= 'Table2' style= 'display:none;'>";
    echo "<table width='100%' border='1' cellspacing='0' cellpadding='0'>";
    echo "<th> Week ".$wnumber."</th>";
    echo "<th>try2</th>";
    echo "<tr ><td>day</td>";
    echo "<td>fff</td></tr>";
    echo "</table></div>";
 ?> 
```

*我现在有 5 行有 5 个按钮。*现在发生的情况是，当单击每个底部时，它会回显相同的“$ wnumber”，可以说是 6。但是它会因行而异， - 脚本可以很好地提醒单击了哪一行的 id。- 只有最后一个使用行的最后一个 id 的按钮。*我想要的是每个底部都使用它的行ID，它呼应正确的'$ wnumber' *我尝试的是（在div中制作变量）

```
 echo "<div id= '".$wnumber."' style= 'display:none;'>"; 
```

代替

```
 echo "<div id= 'Table2' style= 'display:none;'>"; 
```

但没有用。

希望它清楚并且有解决方案。

编辑：这个源代码

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>

    <script>
    $(document).ready(function() {

   $('#Table1 tr').click(function(event){

     $('#Table2').show();
     alert($(this).attr('id'));
   });
 });

  </script>

  <br />
  <table id= "Table1" width='100%' border='1' cellspacing='0' cellpadding='0'>
  <th >Weeks</th>
 <th ><p></p></th>

 <th > Your place</th>
 <th > More Details</th>
<tr>
 <tr id= '1'><td  style= 'text-align : center ;'>Week 1</td><td style= 'text-align : 
  center ;'>33% </td><td  style= 'text-align : center ;'> <td style= 'text-align :  
  center ;'><button class='showr'>More Details</button></td></tr><tr id= '6'><td   
  style= 'text-align : center ;'>Week 6</td><td style= 'text-align : center ;'>33%   
  </td><td  style= 'text-align : center ;'> <td style= 'text-align : center   
  ;'><button  
  class='showr'>More Details</button></td></tr><tr id= '13'><td  style= 'text-align:   
  center ;'>Week 13</td><td style= 'text-align : center ;'>33% </td><td  style=   
  'text-align : center ;'> <blink style= 'color:#990000 ;font-weight: bolder;' >  69   
  here </blink><td style= 'text-align : center ;'><button class='showr'>More   
  Details</button></td></tr></tr>

 </table>
 <br />
 <div id= 'Table2' style= 'display:none;'><table width='100%' border='1'  
  cellspacing='0' cellpadding='0'><th> Week 13</th><th>try2</th><tr ><td>day</td>  
  <td>fff</td></tr></table></div>
  <br /><br /> <br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:53:58.593

尝试这样的事情：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
    $(document).ready(function() {
        $('#Table1 tr').click(function(event){
            $('#details').find('#week' + $(this).attr('id')).show();
            // alert($(this).attr('id'));
        });
    });

</script>
<?php

$result = mysql_query($sql);

// save the results to an array so you can loop them twice
while($row = mysql_fetch_array($result)) :
    $rows[] = $row;
endwhile;

?>
<table id="table1">
    <tr>
        <th>heading</th>
        <th>heading</th>
        <th>heading</th>
        <th>heading</th>
    </tr>
    <?php foreach ($rows as $row) : // loop #1 to output the main table ?>
    <tr id="<?php echo $row['ww'] ?>">
        <td>value</td>
        <td>value</td>
        <td>value</td>
        <td><button type="button">More details</button></td>
    </tr>
    <?php endforeach; ?>
</table> <!-- end table 1 -->

<div id="details">
    <?php foreach ($rows as $row) : // loop #2 to output a table for each set of details ?>
    <table id="week<?php echo $row['ww'] ?>" style="display: none">
        <tr>
            <th>Week <?php echo $row['ww'] ?></th>
            <th>try2</th>
        </tr>
        <tr>
            <td>value</td>
            <td>value</td>
        </tr>
    </table>
    <?php endforeach; ?>
</div> <!-- end details --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:29:59.910

`td`在更正丢失的,后，我尝试了您的 html 代码`tr`。然后单击每一行/按钮显示`div`. 确保您在 php 中形成正确的 html 代码`echo`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T18:26:38.337

我将您的代码复制/粘贴到 jsFiddle 中，它似乎按预期工作。单击该行会发送带有正确 ID 的警报。

[http://jsfiddle.net/JeeNN/](http://jsfiddle.net/JeeNN/)

你的意图中有什么我遗漏的吗？

注意：最佳做法是跳过内联 CSS 并为您的表格添加外部样式。此外，有效的 HTML 是必须的。

* * *

更新：

我继续对您发布的 php 代码进行了格式化，这样更容易阅读。有一些未定义的变量和其他一些问题，但我相信你在你的 php 文件中它是正确的。

我认为您将要再次运行循环以创建第二个表。在第二个循环中，每个循环回显第二个表一次 - 您最终会得到一堆表（每行一个加上第一个表）。然后只需在用户单击每个 id 时交换表的可见性。

那是你要找的吗？如果没有，也许尝试改写您的问题。

这是格式化的代码：

```
<table id="Table1" width='100%' border='1' cellspacing='0' cellpadding='0'>
<?php
$sql2 = [..];
$sql3 = [..];
$ww = ?;

while($row3 = mysql_fetch_array($sql3)){

    $sql4 = mysql_query ("SELECT $ww as place FROM data WHERE $ww =".$row3[$ww]." and  id_user = ".$userid." ");
    $row4 = mysql_fetch_array($sql4) ;
    $string = "<blink> here </blink>" ;

    $wnumber = $row3[$ww];

    echo "<tr id='".$wnumber."'>";
        echo "<td style='text-align:center;'>Week ".$row3[$ww]."</td>";
        echo "<td>".(int) $row3["percent"] ."% </td>";
        echo "<td>":
        if($row4['place'] == $row3[$ww] and $row2['id'] == $userid ){
            echo $string;
        } else {
            echo "&nbsp;";
        }
        echo "</td>";
        //More Details when clicking on this buttom it open the table2
        echo "<td ><button class='showr'>More Details</button></td>";
    echo "</tr>";
} ?>
</table>

<div id= 'Table2' style= 'display:none;'>
    <table width='100%' border='1' cellspacing='0' cellpadding='0'>
        <tr>
            <th> Week <?php echo $wnumber; ?></th>
            <th>try2</th>
        </tr>
        <tr>
            <td>day</td>
            <td>fff</td>
        </tr>
    </table>
</div> 
```

# java - 内核可以用汇编语言以外的语言编写吗？

> ID：10261532
> 
> 赞同：4
> 
> 时间：2012-04-21T17:56:44.450
> 
> 标签：java, kernel

我从来没有做过内核编程。我是 Java 语言的优秀程序员并且经常使用它。现在我觉得用内核做一些有趣的事情。内核位于硬件和操作系统之间。它使用系统调用与硬件通信。每种编程语言都需要一个编译器来编译用高级语言编写的代码，然后生成低级代码，通常是汇编语言代码。我的疑问来了，*如果我们有用 C 编写的内核，那么我们是否应该在机器上安装 C 编译器？*最后，当内核与硬件交互时，它使用汇编语言，我可以用 Java 语言创建内核吗？如果是，那么相同的要求是什么？谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-21T18:03:26.813

> 内核位于硬件和操作系统之间

通常，内核被认为是操作系统的一部分*。*

> 它使用系统调用与硬件通信

系统调用是操作系统提供给用户应用程序的接口。操作系统通过其他机制（例如中断或内存映射寄存器）与硬件通信。

> 每种编程语言都需要一个编译器来编译用高级语言编写的代码，然后生成低级代码，通常是汇编语言代码。

编译器输出通常是本机机器代码或特定语言的字节码（如 Java）。有时，编译器还针对另一种编程语言，例如 C 或 Javascript（转译）。

> 我的疑问来了，如果我们有用 C 编写的内核，那么我们是否应该在机器上安装 C 编译器？

那没有必要。C 编译器产生的输出可以直接在硬件上执行而无需解释。

> 最后，当内核与硬件交互时，它使用汇编语言

CPU不理解汇编。它理解机器代码。

> 我可以用 Java 语言创建内核吗？

它[已经完成了](http://en.wikipedia.org/wiki/JNode)。

> 如果是，那么相同的要求是什么？

如果你想用 Java 编写内核，那么你要么必须

*   将整个 Java 代码库编译为机器码
*   给自己一个[可以执行 Java 字节码的 CPU](http://en.wikipedia.org/wiki/Java_processor)
*   找到或构建一个可以在裸机上运行的 Java VM 和运行时，并在其中运行你的 Java 代码（如果你做得聪明，你可以用 Java 本身编写大部分运行时，也可能是 VM 的一部分）。

现在到一个不言而喻的，几乎是修辞的问题：

> 这是一个好主意吗？

可能不是。为什么？首先，因为设置需要很长时间。其次，因为您不能仅仅按照开发普通业务应用程序的方式编写代码。您必须考虑非常时间关键代码的性能（例如上下文切换，这通常需要手动调整的程序集足够快），手动内存管理（例如：您的 MRU 可能希望您给它物理地址页表所在的位置），特定于系统/硬件的机制（如何访问此特定架构上的 XYZ 控制器？），...

因此，您首先会失去 Java 相对于 C 等低级语言的许多优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:24:29.630

是的，可以用 Java 编写内核，请参阅[JNode](http://www.jnode.org/)。它的优点是没有问题：悬空指针、指针和数组地址的混合、统一数据以及 C 的更多特性。

# iphone - 如何在 iOS 上创建一个在零处停止的倒数计时器？

> ID：10261533
> 
> 赞同：0
> 
> 时间：2012-04-21T17:56:48.423
> 
> 标签：iphone, objective-c, ios, sdk

应用程序描述将是这样的：

有：

*   3 个按钮：开始、重置和单击此处（应用程序启动时最后一个未启用）
*   2个标签：定时器和mainTimer

当您单击开始按钮时，计时器从 3 秒变为 0 秒，当它达到 0 时，它停止，单击此处按钮被启用并且 mainTimer 被激活，它从 60 秒变为 0 秒。最后，当 mainTimer 达到 0 时，开始按钮再次被禁用，mainTimer 停止，并显示警报：时间到了！

当警报消失时，通过单击重置按钮，一切都将获得与开始时相同的状态，并且您可以重复该过程。

我的主要问题是在 0 上停止计时器，启用和禁用单击此处按钮，并使重置按钮将所有内容置于开始时的状态。

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:00:08.767

请查看`NSTimer`类参考。您的功能可以使用倒计时的属性、带有的属性`NSTimer`和将各个部分放在一起来实现:)

[NS定时器](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)

# ruby-on-rails - 当 url = /fixtures/list 时，路由错误栏“找不到 id=list 的夹具”

> ID：10261535
> 
> 赞同：0
> 
> 时间：2012-04-21T17:57:32.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前有一个工作正常的夹具控制器，

但是现在它似乎不再起作用了。我在 fixtures_controller 中有以下内容

```
def list
  @fixture = Fixture.all 
```

请参阅我的 github 获取文件[https://github.com/jpknegtel/st_francis](https://github.com/jpknegtel/st_francis)

如果有人可以对此有所了解，那将是一个很大的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:48:39.053

**更新：**查看您的代码，您根本没有路线。您需要路由来告诉 Rails 如何将 url 从请求映射到控制器和其中的操作。路线进入`config/routes.rb`文件。

你的问题是你没有路线`/fixtures/list`. Rails 认为你想用 ID 列表显示灯具。并且没有找到任何记录并引发错误。

您需要添加一些路线。我强烈建议阅读[有关路由的 rails 指南](http://guides.rubyonrails.org/routing.html)。而且我还推荐使用资源丰富的路由。

如果您在控制器中采用方法名称，这真的很容易，否则您必须自己做很多工作。请特别阅读第 2 节。我花了很长时间才理解 RESTful 路由，所以不要放弃——总有一天你会爱上它们的。如果您有更多问题，请随时提问。

# v4l2 - v4l2 图像捕获的时间戳

> ID：10261537
> 
> 赞同：4
> 
> 时间：2012-04-21T17:58:01.170
> 
> 标签：v4l2

我有一个处理相机图像的 Linux 应用程序。目前我为 v4l2 内核子系统提供缓冲区，这些缓冲区填充了图像数据。

但是，我需要尽可能准确地知道（由相机）捕获此帧的时间。使用缓冲区，我可能无法准确知道何时发生这种情况，因为我可能无法及时处理所有帧（即，我可能会在图像已经可用几毫秒时请求图像）。

我正在寻找的是一种确定（或估计）图像被捕获的时间（或它的年龄）的方法，例如通过让内核以某种方式记录它，或者在最坏的情况下通过不将图像流式传输给我，而是仅应我的明确要求发送。

环境：UVC 网络摄像头，Linux 内核 2.6.3x，V4L2 API

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T08:37:11.230

v4l2_buffer 结构有一个时间戳字段。但也请参阅这个问题：[v4l2_buffer->timestamp 值在哪里开始计数？](https://stackoverflow.com/questions/10266451/where-does-v4l2-buffer-timestamp-value-starts-counting)

# python - TypeError：必须是 dict，而不是 str

> ID：10261551
> 
> 赞同：1
> 
> 时间：2012-04-21T17:59:56.070
> 
> 标签：python

嘿伙计们，我试图在 Python 中使用参数变量，但是无法在终端上执行程序。

**程序：**

```
from sys import argv

script,first,second,third = argv

print "The script is called:", script
print "Your first variable is:", first
print "Your second variable is:", second 
print "Your third variable is:", third 
```

**输出：**

```
>>> execfile("lesson13.py","dog","cat")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: must be dict, not str
>>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T18:03:16.363

[`execfile()`](http://docs.python.org/library/functions.html#execfile)不接受命令参数。尝试[`subprocess`](http://docs.python.org/library/subprocess.html)改用。

# jquery - 图像滑块和 jquery 的循环插件不能一起工作

> ID：10261561
> 
> 赞同：3
> 
> 时间：2012-04-21T18:00:56.523
> 
> 标签：jquery, plugins

在这里，我使用的是图像滑块和 jquery 的循环插件。但只有其中一个工作，其代码放在上面。哪里有问题 ？我的主要内容代码如下。

```
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/easySlider1.7.js" type="text/javascript"></script>

  <link href="css/jq.css" rel="stylesheet" type="text/css" />
<link href="css/cycle.css" rel="stylesheet" type="text/css" />
<script src="Scripts/jquery-1.7.1.js" type="text/javascript"></script>
<script src="js/chili-1.7.pack.js" type="text/javascript"></script>
<script src="js/jquery.easing.1.3.js" type="text/javascript"></script>
<script src="js/jquery.cycle.all.js" type="text/javascript"></script> 
```

```
 $(document).ready(function () {

     $('#s1').cycle({
         fx: 'scrollDown',
         speedIn: 2000,
         speedOut: 500,
         easeIn: 'easeInCirc',
         easeOut: 'easeOutBounce',
         delay: -2000
     });

         $("#slider").easySlider({
             auto: true,
             continuous: true,
             nextId: "slider1next",
             prevId: "slider1prev"
         });

 }); 
```

```
<link href="css/screen.css" rel="stylesheet" type="text/css" /> 
```

滑块代码

```
 <div id="slider" >
        <ul>                
            <li><a href="http://templatica.com/preview/30"><img src="images/01.jpg" alt="Css Template Preview" /></a></li>
            <li><a href="http://templatica.com/preview/7"><img src="images/02.jpg" alt="Css Template Preview" /></a></li>
            <li><a href="http://templatica.com/preview/25"><img src="images/03.jpg" alt="Css Template Preview" /></a></li>
            <li><a href="http://templatica.com/preview/26"><img src="images/04.jpg" alt="Css Template Preview" /></a></li>
            <li><a href="http://templatica.com/preview/27"><img src="images/05.jpg" alt="Css Template Preview" /></a></li>          
        </ul>

    </div>
     <div class="clear">
     </div>
 </div> 
```

和循环插件html

```
 <img src="http://cloud.github.com/downloads/malsup/cycle/beach1.jpg" alt="" />

        <img src="http://cloud.github.com/downloads/malsup/cycle/beach2.jpg" alt=""  />

        <img src="http://cloud.github.com/downloads/malsup/cycle/beach3.jpg" alt="" />

    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:10:45.563

包含顺序可能很重要，并且您有重复的`jquery.js`. 试试这个顺序：

```
<link href="css/jq.css" rel="stylesheet" type="text/css" />
<link href="css/cycle.css" rel="stylesheet" type="text/css" />

<script src="Scripts/jquery-1.7.1.js" type="text/javascript"></script>
<script src="js/jquery.easing.1.3.js" type="text/javascript"></script>
<script src="js/jquery.cycle.all.js" type="text/javascript"></script><script src="js/easySlider1.7.js" type="text/javascript"></script>
<script src="js/chili-1.7.pack.js" type="text/javascript"></script> 
```

# youtube-api - 我多久可以使用 API 将视频上传到 YouTube？

> ID：10261563
> 
> 赞同：0
> 
> 时间：2012-04-21T18:01:28.673
> 
> 标签：youtube-api

我有一个程序，可以将市场研究视频分成 30 分钟的片段，然后通过 API 将它们上传到 YouTube。我知道有 API 限制，但似乎没有发布。**通过 API 上传视频的频率是否有限制？**

我现在正在做的是上传视频，如果时间少于 5 分钟，程序会休眠直到 5 分钟过去。我意识到我可以连续上传它们，并捕获“最近调用太多”的 API 异常，但是我必须让程序等待 10 分钟才能重置配额。如果有限制，我只想能够围绕它调整程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:54:16.920

信息的规范来源是[这篇博](http://apiblog.youtube.com/2010/02/best-practices-for-avoiding-quota.html)文。我们最近在 YouTube 开发者直播中介绍了这个主题，在该帖子的底部有一个新的嵌入视频，我在其中更详细地回答了这个问题。

总结视频中更具体的答案（无论如何，我建议观看），等待 10 分钟通常是多余的，但作为最佳实践给出一个方便的间隔。如果您继续尽可能快地上传，然后在遇到配额错误时等待不到 10 分钟，您将不会受到处罚。从等待一分钟开始，然后逐步达到 2、4、8、16 等的指数退避也是合理的。

# algorithm - 具有约束的数组中的最大总和

> ID：10261565
> 
> 赞同：3
> 
> 时间：2012-04-21T18:01:45.927
> 
> 标签：algorithm

我有这个问题，给定一个正数数组，我必须找到元素的最大总和，这样就不会选择两个相邻的元素。最大值必须小于某个给定的 K。我尝试在没有 k 的情况下考虑类似问题的思路，但到目前为止我失败了。对于后一个问题，我有以下 dp-ish 解决方案

```
 int sum1,sum2 = 0;
    int sum = sum1 = a[0];

    for(int i=1; i<n; i++)
    {
        sum = max(sum2 + a[i], sum1);
        sum2 = sum1;
        sum1 = sum;
    } 
```

有人可以给我提示如何解决我目前的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T18:35:00.823

我能想到的最好的就是 O(n*K) dp：

```
int sums[n][K+1] = {{0}};
int i, j;
for(j = a[0]; j <= K; ++j) {
    sums[0][j] = a[0];
}
if (a[1] > a[0]) {
    for(j = a[0]; j < a[1]; ++j) {
        sums[1][j] = a[0];
    }
    for(j = a[1]; j <= K; ++j) {
        sums[1][j] = a[1];
    }
} else {
    for(j = a[1]; j < a[0]; ++j) {
        sums[1][j] = a[1];
    }
    for(j = a[0]; j <= K; ++j) {
        sums[1][j] = a[0];
    }
}
for(i = 2; i < n; ++i) {
    for(j = 0; j <= K && j < a[i]; ++j) {
        sums[i][j] = max(sums[i-1][j],sums[i-2][j]);
    }
    for(j = a[i]; j <= K; ++j) {
        sums[i][j] = max(sums[i-1][j],a[i] + sums[i-2][j-a[i]]);
    }
} 
```

`sums[i][j]``a[0..i]`包含不超过的非相邻元素的最大和`j`。解决方案就`sums[n-1][K]`在最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:19:02.540

1.  制作原始数组 (A1) 的副本 (A2)。
2.  在数组 (A2) 中查找最大值。
3.  将它的前一个邻居之前的所有值和它的下一个邻居之后的值提取到一个新数组 (A3) 中。
4.  在新数组 (A3) 中找到最大值。
5.  检查总和是否大于 k。如果 sum 通过检查，您就完成了。
6.  如果不是，您将需要返回复制的数组 (A2)，删除第二个大值（在步骤 3 中找到）并从步骤 3 重新开始。
7.  一旦没有可以与最大数字一起使用的数字组合（即在步骤 1 中找到的数字 + 数组中的任何其他数字大于 k），您将其从原始数组 (A1) 中删除并从步骤 0 重新开始。
8.  如果由于某种原因没有有效的组合（例如，数组只有三个数字或没有数字组合低于 k），则抛出异常，或者如果这看起来更合适，则返回 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T18:44:46.157

第一个想法：蛮力

迭代所有合法的索引组合并动态构建总和。

当你超过 K 时停止一个序列。

保持序列直到你找到一个更大的序列，它仍然比 K 更小

第二个想法：也许有人可以强迫这成为一种分而治之的事情......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T01:09:37.617

这是一个没有“k”约束的问题的解决方案，您首先要做的是：[https ://stackoverflow.com/a/13022021/1110808](https://stackoverflow.com/a/13022021/1110808)

在我看来，上述解决方案可以很容易地扩展为具有 k 约束，只需修改以下 for 循环中的 if 条件以包含约束： possibleMax < k

```
// Subproblem solutions, DP
for (int i = start; i <= end; i++) {
    int possibleMaxSub1 = maxSum(a, i + 2, end);
    int possibleMaxSub2 = maxSum(a, start, i - 2);

    int possibleMax = possibleMaxSub1 + possibleMaxSub2 + a[i];
    /*
    if (possibleMax > maxSum) {
        maxSum = possibleMax;
    }
    */
    if (possibleMax > maxSum && possibleMax < k) {
        maxSum = possibleMax;
    }
} 
```

正如在原始链接中发布的那样，可以通过添加记忆来改进这种方法，这样就不会重新计算重复子问题的解决方案。或者可以通过使用自下而上的动态编程方法来改进（当前方法是递归自上而下的方法）

您可以在此处参考自下而上的方法：[https ://stackoverflow.com/a/4487594/1110808](https://stackoverflow.com/a/4487594/1110808)

# jquery - Ajax call for the json response

> ID：10261576
> 
> 赞同：2
> 
> 时间：2012-04-21T18:03:36.030
> 
> 标签：jquery, ajax, json

I am trying to apply ajax call for the response received from json.

Below my HTML.

```
<div id = "tabs">
<ul>
<li><A href="#ed_pro">Product Category</A> </li>
<li><A href="#ed_img">Add Image</A> </li>
<li><A href="#ed_txt">Add Text</A></li>
</ul>    
<div id="ed_pro">
</div>
<div id="ed_img">
</div>
<div id="ed_txt">
</div>
</div> 
```

and

```
function handleTabSelect(data) {
    var items = '<ul>';
    $.each(data, function(i, object) {
        items += '<li><a id="main_cat" href=#>' + object.img_cat_des + '</a></li>';
    });
    items += '</ul>';
    $('#ed_img').append(items);
    flag = 1;
}

$('#main_cat').click(function() {
    var url1 = $(this).attr("href");
    alert(url1);
});

$("#tabs").tabs();

$("#tabs").bind("tabsselect", function(e, tab) {

    if (flag == 0) {
        jQuery.ajax({
            type: 'POST',
            url: '?q=design/lab_tab',
            dataType: 'json',
            data: 'slider_value=' + tab.index,
            success: handleTabSelect,
            error: function(xhr, status) {
                alert(xhr.statusText);
            }

        });
    }
});​ 
```

After getting the response from json, the above script will append list of as

```
<ul>
<li>
<a id="main_cat" href="#">Animals</a>
</li>
<li>
<a id="main_cat" href="#">Astrology</a>
</li>
</ul> 
```

How I can apply further ajax call for .

On clicking the a href, it never invokes

```
$('#main_cat').click(function () {
var url1 = $(this).attr("href");
alert (url1);
}); 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:06:26.677

```
 <a id="main_cat" href="#">Animals</a>
  <a id="main_cat" href="#">Astrology</a> 
```

*   `Id` should be unique, you have multiple elements with the same `id` => **invalid HTML**
*   use `on` to create a delegate event handler.

* * *

**Fixed markup:**

```
 <a class="main_cat" href="#">Animals</a>
  <a class="main_cat" href="#">Astrology</a> 
```

**Javascript:**

```
$('staticContainer').on('click', '.main_cat', function(){
    var url1 = $(this).attr("href");
    alert (url1); 
}); 
```

You should replace selector: `staticContainer` to fetch the closest **static**(exist on DOM ready) element that contains the new anchors.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:33:34.280

Thanks @gdoron, I got it.

```
$('#ed_img').bind('click', '.main_cat',function(event){ 
  var tg_element = $(event.target); 
  var url1 = tg_element.attr("href"); 
  alert (url1); 
}); 
```

Regards, Prabhu M K

# c++ - 算法分析 - 预期增长率

> ID：10261578
> 
> 赞同：3
> 
> 时间：2012-04-21T18:03:48.903
> 
> 标签：c++, c, algorithm

我有一个关于澄清我的作业的问题。

[http://www.cs.bilkent.edu.tr/~gunduz/teaching/cs201/cs201_homework3.pdf](http://www.cs.bilkent.edu.tr/~gunduz/teaching/cs201/cs201_homework3.pdf)

要查看讲义，请转到[http://www.scribd.com/nanny24/d/36657378-Data-Structures-and-Algorithm-Analysis-in-C-Weiss](http://www.scribd.com/nanny24/d/36657378-Data-Structures-and-Algorithm-Analysis-in-C-Weiss)的第 25 页。

以下是我需要做的，但我不明白这是什么意思。这是否意味着 - 对于算法 1 - 比较实际运行时间与 (n^3 + 3*(n^2) + 2*n)/6, n=array size？我不这么认为，但我无法推断出其他任何东西。你能解释一下这是什么吗？

```
2- Plot the expected growth rates obtained from the theoretical analysis (as given for each solution) by 
using the same N values that you used in obtaining your results. Compare the expected growth rates 
and the obtained results, and discuss your observations in a paragraph. 
```

编辑2：

```
Algorithm 1:
    n           actual running time(ms)     (n^3 + 3*(n^2) + 2*n)/6 (I don't know whether the type is millisecond or not)
    100         1                       171700
    1000        851                     167167000 
```

因此，考虑到实际运行时间和理论运行时间之间的巨大差异，讲师的意思可能与算法的理论时间复杂度函数不同，即 (n^3 + 3*(n^2) + 2*n)/6 1.这是功能：[http ://www.diigo.com/item/image/2lxmz/m7y3?size=o](http://www.diigo.com/item/image/2lxmz/m7y3?size=o)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:47:25.283

是的，您的讲师通过“预期增长率”表示在理论时间复杂度函数中插入*n值后的预测运行时间。*

虽然这种用法是标准的，但如果我是你，我仍然会与教练核实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T20:40:14.803

理论数字可能是操作或比较或类似的数量。

我想*增长率*意味着*价值增长的速度有多快？*. 当`n`从`100`到时，理论值按851 倍的实际测量因子`1000`增长。`167167000/171700 = 973.6`

# java - 为什么 Servlet 中的实例变量不是线程安全的

> ID：10261579
> 
> 赞同：8
> 
> 时间：2012-04-21T18:03:49.230
> 
> 标签：java, servlets, jakarta-ee, thread-safety, instance-variables

当我阅读`Head First Servlet and JSP`时，他们说实例变量是非线程安全的。

我不是很理解这个说法。例如：我有一个名为`ActionServlet.java`. 每次，每个用户的请求都会发送到服务器，容器会创建一个新线程并创建新`ActionServlet`实例。

`ActionServlet`可能有一个结构：

```
public class ActionServlet extends HttpServlet {
   // example of instance variable
   Instance variable;
   public void processRequest(HttpServletRequest request, HttpServletResponse response) {   
       // process something relating to instance variable
   }
} 
```

所以，因为所有这些线程都为 创建了一个新的类实例`ActionServlet`，所以我在这里看不到任何问题。因为这些线程的实例是相互独立的。

请找出在多线程环境中使用实例变量时的问题所在。

谢谢 ：）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-21T18:10:15.923

你犯的错误在这里：

> 所以，因为所有这些线程都为 ActionServlet 创建了一个新的类实例，所以我在这里看不到任何问题。因为这些线程的实例是相互独立的。

容器不会为每个请求创建 Servlet 类的新实例。它重用现有的。这就是为什么它们不是线程安全的。

Stripes Action Framework 确实为每个请求创建了一个新实例，因此在该框架下这是一个不错的假设。但是，例如，Struts 1 遵循 Servlet 模型并且不会为每个请求创建新的操作。

这并不意味着容器仅限于单个实例，理论上它可以创建多个，但它不是指定的行为，因此不能依赖。大多数流行的都没有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T18:10:21.693

> 因为所有这些线程都创建了一个新的类实例（action.java），所以我看不出有什么问题

您假设每个线程都创建一个仅由该线程使用的类实例，这就是您没有任何问题的原因。

但是，请尝试使用您的特定示例想象从两个线程访问同一个实例。如果同时使用 your`request`和`response`members 会发生什么？也许您会从无法识别的请求中读取数据，并且您会编写一个混合了两部分的不一致响应。

所以在你的情况下，实例变量也不是线程安全的，因为如果两个线程访问同一个实例，它们可能会互相干扰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T18:09:24.503

问题是，您的 action.java 并不总是实例化，但它是从实例池中获取的，请求线程也是如此，它们是从线程池中获取的，因此一个 servlet 实例可能由多个请求共享.

# macos - 无法在 Mac 上安装 Mono

> ID：10261588
> 
> 赞同：0
> 
> 时间：2012-04-21T18:04:51.413
> 
> 标签：macos, mono, installation, osx-lion

我曾多次尝试使用当前版本和 beta 版本安装 Mono。每次我安装它时，它都说它是成功的，但是我去 /Library/Frameworks 文件夹并且 Mono 不在那里。我运行了卸载脚本，但它说权限被拒绝。我什至尝试打开 AppleShowAllFiles，但它仍然不存在。我正在运行 OSX Lion。

-rulla101

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:45:59.270

检查 /Users/_your_name_/Library/Frameworks

关于“权限被拒绝”，请尝试使用终端使用 sudo 命令运行脚本。

# android - Android：无法包含 facebook sdk 库项目

> ID：10261593
> 
> 赞同：2
> 
> 时间：2012-04-21T18:05:37.777
> 
> 标签：android, eclipse, facebook

我正在与`Android API 17`. `eclipse Indigo`我已经使用 fb sdk 中提供的源项目克隆并完成`faccebook sdk`了`github`facebook 库项目设置。

现在我正在尝试将这个库项目包含在我的 android 演示项目中。我已将其添加到`Project properties->Android->Library`部分下。我在添加的库前面看到绿色刻度线。另外，我在`Project properties->Java build path->Projects`.

构建成功。但是当我尝试在我的 AVD 上安装时，我得到了错误，`E/AndroidRuntime(748): java.lang.NoClassDefFoundError: com.facebook.android.Facebook`

任何人都可以帮助我如何解决这个问题。

---- 编辑 ------ 我观察到的另一件事是，当我打开项目属性-> Android 窗口时，库部分下没有显示绿色的勾号，而是看到了红十字标记。

有任何想法吗？

谢谢，文卡特帕帕纳

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:33:50.583

同样的事情也发生在我身上..在下面尝试..它会起作用..

将外部 Jar 添加到您的 Android 项目或任何 Java 项目的最佳方法是：

创建一个名为`libs`您的项目根文件夹的文件夹 将您的 Jar 文件复制到该`libs`文件夹​​ 现在右键单击 Jar 文件，然后选择`Build Path > Add to Build Path`，这将创建一个名为`Refrenced Library`您的项目的文件夹，您就完成了通过这样做，每当您传输您将项目投影到其他计算机，您将不会错过引用到硬盘驱动器上某些空间的库。

（facebooksdk.jar 可以在 facebook-sdk 目录中找到`<facebook-sdk>\facebook\bin`：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-29T13:47:14.460

我知道这个问题很老，但我认为这可能对某人有帮助。

将库项目和应用程序移动到同一驱动器上。通常这是 Eclipse 中的一个错误。

我通过将它们移动到计算机上的同一驱动器中解决了我的问题。你可以试一试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-10T05:21:18.467

您需要在同一个字典中创建两个项目，然后使用 Project Properties -> Android-> Library 将其包含在内。这工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T17:55:19.373

通过将源代码复制`com.facebook.android`到我的项目源来解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T18:28:47.537

您不必将其添加到库项目中，因为这不是库。

[https://github.com/facebook/facebook-android-sdk](https://github.com/facebook/facebook-android-sdk)是项目广告的帮助，将项目包含在我们的代码中的示例代码。只需要通过注册您的 api 来为 facebook 创建应用程序 ID。

希望这会对您的项目有所帮助。

# .net - 要列出的字符串

> ID：10261594
> 
> 赞同：1
> 
> 时间：2012-04-21T18:05:44.257
> 
> 标签：.net, string, parsing

我有一个[System.String](http://msdn.microsoft.com/en-us/library/system.string%28v=vs.90%29.aspx)由一系列用空格或逗号分隔的实数组成，如下所示：

> “645.974,255.478 645.973,255.468 645.97 0 233.54 21”

我想解析我的字符串并用它的数字填充一个[列表。](http://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.90%29.aspx)我正在尝试找到执行此任务的最快方法。到目前为止，我已经尝试了以下方法，有一个 double 列表并解析字符串十万次。

```
List<double> MyList = new List<double>(250); 
```

*   [正则表达式](http://msdn.microsoft.com/en-us/library/6f7hht7k%28v=vs.90%29.aspx)：~8.56[s]

    ```
    MyList.Clear();

    foreach (Match match in RgxDouble.Matches(Points))
            MyList.Add(double.Parse(match.Value)); 
    ```

*   使用 C++/CLI 的非托管代码：~7.5[s]

    ```
    static void UsingUnmanagedCode(wchar_t* points, List<double> ^MyList)
    {
        static char buffer[MAX_CHARS];
        wcstombs(buffer, points, MAX_CHARS);
        char *start = buffer, *ptr = buffer;

        for(; *ptr; ++ptr)
        {
            if(*ptr == ',')
                *ptr = ' ';
        }

        while(*(--ptr) == ' ')
            *ptr = '\0';

        char *pEnd;
        MyList->Add(strtod(start, &pEnd));

        while(*pEnd)
        {
            char *pStart = pEnd;
            MyList->Add(strtod(pStart, &pEnd));
        }
    } 
    ```

*   C# 和[StringBuilder](http://msdn.microsoft.com/en-us/library/y9sxk6fy%28v=vs.90%29.aspx)的不安全代码：~2.4[s]

    ```
    MyList.Clear();

        fixed (char* fixPointsPtr = Points)
        {
            char* ptr = fixPointsPtr;

            while (*ptr != '\0')
            {
                if ((*ptr < '0' || *ptr > '9') && *ptr != '-' && *ptr != '.')
                {
                    MyList.Add(double.Parse(strBuild.ToString(0, strBuild.Length), NumberStyles.AllowDecimalPoint));
                    strBuild.Length = 0;
                }

                else
                    strBuild.Append(*ptr);

                ++ptr;
            }
        } 
    ```

*   [字符串拆分](http://msdn.microsoft.com/en-us/library/ms131448%28v=vs.90%29.aspx)：~2[s]

    ```
    MyList.Clear();

    foreach (string point in Points.Split(Separators, StringSplitOptions.RemoveEmptyEntries))
            MyList.Add(double.Parse(point, NumberStyles.AllowDecimalPoint)); 
    ```

有更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T18:12:55.143

如果速度对您很重要，您可能需要评估程序的设计，看看是否可以“即时”拆分字符串。

例如，你的字符串是如何进入你的程序的？为了使任何算法都非常高效，你最好的选择（据我所知）是尝试将你的操作压缩到一个循环中……一个循环自动比多个循环快。一个简单的方法是“监听”你的数据，一个字符一个字符，一个字节一个字节，一旦你意识到你有一个有效的实数到你的列表中。

# wpf - 菜单控件中的中心标题

> ID：10261595
> 
> 赞同：6
> 
> 时间：2012-04-21T18:05:46.380
> 
> 标签：wpf, menuitem, vertical-alignment

如何在菜单控件中垂直居中标题？

这是我的尝试：

```
<MenuItem Header="File" StaysOpenOnClick="True" FontFamily="Arial" VerticalAlignment="Center">
                <MenuItem Header="Open" Click="Open_Click" IsEnabled="True"/>
            </MenuItem>
        </Menu> 
```

但它与左上角对齐。

我究竟做错了什么？

[编辑]

我的整个菜单现在看起来像这样：

```
<Menu Canvas.Left="0" Canvas.Top="0" Name="menu1" Margin="0,0,0,384">
        <MenuItem Header="File" StaysOpenOnClick="True" FontFamily="Arial" VerticalAlignment="Center">
            <MenuItem Click="Open_Click" IsEnabled="True">
                <MenuItem.Header>
                    <TextBlock Text="Open" VerticalAlignment="Center"/>
                </MenuItem.Header>
            </MenuItem>
        </MenuItem>
        </Menu> 
```

标题文本“文件”仍然没有垂直居中（这是我想要居中的）。这段代码到底是什么？是“开放”的文字吗？

[/编辑]

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T22:33:12.100

如果要格式化标题，则需要显式布局标题控件：

```
<MenuItem StaysOpenOnClick="True" FontFamily="Arial" VerticalAlignment="Center">
      <MenuItem Click="Open_Click" IsEnabled="True">
          <MenuItem.Header>
              <TextBlock Text="Open" VerticalAlignment="Center"/>
          </MenuItem.Header>
      </MenuItem>
  </Menu> 
```

**更新：** 要格式化 MenuItem 在菜单中的位置，您需要覆盖菜单的 ItemsPanelTemplate。默认情况下，菜单使用垂直 WrapPanel 将项目对齐到顶部。用您选择的面板（StackPanel、Grid、DockPanel 等）替换默认值，您就可以随意将菜单项居中。这是一个例子：

```
<Menu Canvas.Left="0" Canvas.Top="0" Name="menu1" Margin="0,0,0,384">
    <Menu.ItemsPanel>
        <ItemsPanelTemplate>
            <Grid/>
        </ItemsPanelTemplate>
    </Menu.ItemsPanel>
    <MenuItem Header="File" StaysOpenOnClick="True" FontFamily="Arial" VerticalAlignment="Center" >
        <MenuItem Header="Open" Click="Open_Click" IsEnabled="True"/>
    </MenuItem>
</Menu> 
```

从MSDN 上的[这篇文章](http://social.msdn.microsoft.com/Forums/en/wpf/thread/3aaef3a1-85de-43f6-8fdf-25fbb3ff4591)收集的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:09:30.790

我想你会想要设置[`VerticalContentAlignment`](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.verticalcontentalignment.aspx). 如果 alignmnet 仍然不符合您的喜好，则可能是 default 有问题`MenuItem` `Template`，它可能没有绑定到属性，或者有一些边距或填充物会移动标题。

# java - 在 Ubuntu 上使用 Eclipse 运行 Emma

> ID：10261596
> 
> 赞同：0
> 
> 时间：2012-04-21T18:05:49.030
> 
> 标签：java, eclipse, ubuntu, emma

我正在尝试将 Emma 覆盖工具与 Eclipse 一起使用，但我有点困惑。

所以我将 emma.jar 和 emma_ant.jar 添加到 /usr/lib/jvm/java-6-openjdk-common/jre/lib/ext/emma/ 目录中，并使用 JRE 在 Eclipse 下创建了一个 Java 项目：java-6-openjdk

我将 build.xml 示例文件复制到我的项目中，并将 emma.dir 属性编辑到 /usr/lib/jvm/java-6-openjdk-common/jre/lib/ext/emma/

然后，当我创建一个 .jar 文件并尝试使用 Emma 运行它时：

> java emmarun -jar HelloWorld.jar

我明白了：

> 线程“main”中的异常 java.lang.NoClassDefFoundError: emmarun 原因：java.lang.ClassNotFoundException: emmarun at java.net.URLClassLoader$1.run(URLClassLoader.java:217) at java.security.AccessController.doPrivileged(Native Method ) 在 java.net.URLClassLoader.findClass(URLClassLoader.java:205) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:321) 在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294) 在 java .lang.ClassLoader.loadClass(ClassLoader.java:266) 找不到主类：emmarun。程序将会退出。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:09:24.083

你正在艰难地做这件事。安装[EclEmma](http://www.eclemma.org/)插件，您只需选择正确的启动配置即可获得测试覆盖率。

更新：我刚刚意识到 EclEmma 在内部使用[JaCoCo](http://www.eclemma.org/jacoco)，而不再是 Emma。尽管如此，它仍然是一个很棒的工具，但我还是会使用它。

但是要解决您的问题：我认为您不能在 lib/ext 中有子文件夹。将 jar 直接移动到 lib/ext 中，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:22:34.700

只需通过eclipse安装中心安装ecl-emma即可！

继续帮助 -> 安装软件，在那里插入 ecl-emma 页面：

```
http://update.eclemma.org/ 
```

并通过安装助手。

# sql - Apex 页面之间的值

> ID：10261599
> 
> 赞同：0
> 
> 时间：2012-04-21T18:06:02.020
> 
> 标签：sql, oracle

我试图寻找答案，但我发现的一切似乎都太高了。我是一名正在从事数据库项目的大学生。我们需要使用 apex (oracle) 从开放的 API 源中分解数据。你可以在这里看到我和我的团队正在做什么：http: [//bit.ly/Jvt4av](http://bit.ly/Jvt4av)。

我有带有链接的电影列表。这些链接转到另一个页面，该页面应该显示该电影的各种详细信息。

我已经成功地在列表和详细信息页面之间传递了movie_id 变量，但我现在很难过。我需要展示电影的详细信息，我不想使用报告或表格，因为它们太丑了，无法展示这种信息。我希望能够用 HTML 显示数据。所以，我的问题是：

*   我在哪里/如何查询数据库，以便可以在 HTML 中使用结果？
*   如何在 HTML 中显示这些结果？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:44:08.973

好吧，如果您有电影 ID，那么您可以使用它来查询数据库并从数据库中获取所有其他详细信息。如果您只想使用纯 HTML 来呈现这些细节，那么 PL/SQL 区域与一些 htp.p 调用将完成这项工作。例如：

```
for x in (select * from movies_details where id=<MOVIE_ID>) loop
  htp.p('<h1>' || x.movie_title || '</h1>');
end loop 
```

# iphone - UITableView 单元格由虚线分隔

> ID：10261602
> 
> 赞同：4
> 
> 时间：2012-04-21T18:06:24.273
> 
> 标签：iphone, cocoa-touch

我想将分隔符从 UITableView 更改为虚线。我能找到的只是 UITableViewCellSeparatorStyleBlabla ...

我可以换点别的吗？我宁愿不使用图像，但如果没有其他方法......

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T19:19:49.327

尝试以下解决方案：

```
self.tableView.separatorColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"Dottedlineimage"]]; 
```

**注意：不要忘记在*****两种解决方案***中关闭表格视图的默认分隔符样式：`[self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];`

======================或者试试这个========================== ==================

```
UIImageView *aLine = [[UIImageView alloc] initWithFrame:CGRectMake(cell.frame.origin.x, cell.frame.origin.y, cell.frame.size.width, cell.frame.size.height)];
 [aLine setImage:[UIImage imageNamed:@"yourDottedImage.png"]];
 [cell.contentView addSubview:aLine];
 [aLine release]; 
```

乐意效劳：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:12:40.257

我认为没有分隔符作为虚线。您可以通过将图像附加到自定义单元格的末尾来创建自己的分隔符。

# visual-studio - 如何为可移植类库构建目标包？

> ID：10261604
> 
> 赞同：5
> 
> 时间：2012-04-21T18:06:29.637
> 
> 标签：visual-studio, xamarin.ios, xamarin.android, portable-class-library, mvvmcross

我目前正在使用这些[可移植类库](https://stackoverflow.com/questions/5238955/what-is-a-portable-class-library)构建一些代码。

我希望以完整的 .Net、WinRT Metro、Windows Phone 为目标……然后是 MonoTouch 和 MonoDroid。我今天的实验表明这可以工作 - [http://slodge.blogspot.co.uk/2012/04/experiments-with-portable-class.html](http://slodge.blogspot.co.uk/2012/04/experiments-with-portable-class.html)

但是，我遇到了一个相当严重的问题——MonoTouch 和 MonoDroid 目前支持这些库，因为您可以将 PCL 作为二进制程序集使用，但它们不允许项目文件之间的链接

*   例如，我可以从 MonoDroid 项目中引用 MyLib.dll，但不能引用 MyLib.csproj。

这是一个问题，因为这意味着自动（重新锐化）重构不起作用——我的大部分工作似乎都依赖于此！

我已经看到微软发布了允许您扩展类库的目标包，但我还没有弄清楚这些安装到哪里或它们修改了什么。

这是当前的 Microsoft 列表：http: [//msdn.microsoft.com/en-us/hh487282.aspx](http://msdn.microsoft.com/en-us/hh487282.aspx)

有没有人知道这些包包含什么或有人如何制作自己的包？如果它们不是太复杂，那么我想尝试为 MonoTouch 和/或 MonoDroid 制作一个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T21:30:49.963

最近出现了几次，所以我写了一篇博客文章，应该做你想做的事：

[http://jpobst.blogspot.com/2012/04/mono-for-android-portable-libraries-in.html](http://jpobst.blogspot.com/2012/04/mono-for-android-portable-libraries-in.html)

如果有任何问题，请告诉我！

# javascript - 使用 ASP.MVC3 执行注销操作时对 json post 和 get 感到困惑

> ID：10261605
> 
> 赞同：3
> 
> 时间：2012-04-21T18:06:30.913
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

我想在我的控制器中进行注销操作。我不想让新页面出现。我只想向控制器发送消息。这就是我的想法。

但我有一些问题。

a）它应该是“get”还是“post” b）为了完全清除浏览器中的内容，我还应该重定向到新页面吗？

```
 [HttpPost]
    public JsonResult JsonLogout()
    {
        FormsAuthentication.SignOut();
        return Json(new { success = true });
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T18:10:44.707

由于您的操作附加了 HttpPost 属性，因此您还需要使用 POST 发送 ajax 请求。如果您删除此属性，您将能够同时使用 POST 和 GET，并且两者都适用于该应用程序。

如果您愿意，您可以随时发送此操作而无需刷新页面，但是，您应该考虑，如果您唯一要做的就是发送 ajax 请求并且不更改页面，则不会向用户反馈他们实际上已注销。您可以弹出一条消息，但仍会显示页面的其他元素。他们会收到的唯一反馈是当他们单击另一个链接并意识到它要求他们重新登录时。

**编辑：**另外，我对此的反馈是根本不使用 ajax。您最好让页面重新加载以确保您拥有一个干净的、未经身份验证的界面。

祝你好运！

# c# - 找到一个子节点并使用变量获取它的值。视窗手机

> ID：10261607
> 
> 赞同：0
> 
> 时间：2012-04-21T18:06:37.720
> 
> 标签：c#, xml, windows-phone-7, nodes

所以我可以选择某个节点下的所有结果，但我有以下 XML

```
<ArrayOfStop>
 <Stop>
   <StopName>Rajdutt Restaurant</StopName>
   <route_stop />
   <route_stop_stop />
   <route_stop_timetable_stop />
   <stopId>6400</stopId>
 </Stop>
 <Stop>
   <StopName>Cysleys Farm (by request only)</StopName>
   <route_stop />
   <route_stop_stop />
   <route_stop_timetable_stop />
   <stopId>6401</stopId>
 </Stop>
<ArrayOfStop> 
```

如果我想在停止名称是 Cysleys Farm 的情况下选择 stopId（仅通过请求），将如何处理？

我有以下代码：

```
XDocument loadedData = XDocument.Load("People.xml");

var data = from query in loadedData.Descendants("ArrayOfStop")
           select new Person
           { 
             StopName = (string)query.Element("StopName") 
           };

listBox.ItemsSource = data; 
```

编辑：

```
var data = from query in loadedData.Descendants("ArrayOfStop") 
  where query.Element("StopName").Value == "Cysleys Farm (by request only)" 
  select query.Element("StopId").Value; 

select new Person
{
   FirstName = (string)query.Element("StopName"),
   //LastName = (string)query.Element("Long"),
   //Age = (int)query.Element("age")
};

listBox.ItemsSource = data; 
```

![Visual Studio 编辑器](../Images/62c28da54428941fe6333109ba52a0c8.png)

编辑 2

这些项目是否需要进入列表框？因为我需要字符串格式的值才能在 url 上使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:10:42.147

```
 var doc =
            XDocument.Parse(
                "<ArrayOfStop><Stop><StopName>Rajdutt Restaurant</StopName><route_stop /><route_stop_stop /><route_stop_timetable_stop /><stopId>6400</stopId></Stop><Stop><StopName>Cysleys Farm (by request only)</StopName><route_stop /><route_stop_stop /><route_stop_timetable_stop /><stopId>6401</stopId></Stop></ArrayOfStop>");

        var list = (from item in doc.Descendants("Stop")
                    where (string) item.Element("StopName") == "Cysleys Farm (by request only)"
                    select (string)item.Element("stopId")).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T19:33:27.320

这将为您提供具有匹配值的单个节点。如果您预计多个节点将具有匹配值并且只需要第一个，则使用`FirstOrDefault`而不是`SingleOrDefault`.

```
string search = "Cysleys Farm (by request only)";
var query = doc.Root.Elements()
            .SingleOrDefault( x => x.Element( "StopName" ).Value == search );

if (query != null)
{
    // if the query is not null, then this will be 
    // a single node with a root of <Stop>
    string id = query.Element( "stopId" ).Value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T18:17:37.450

另一种方法是：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load("People.xml");

// Select the 'StopId' node whose StopName is 'Cysleys Farm (by request only)'
XmlNode stopIdNode = xmlDoc.SelectSingleNode("/ArrayOfStop/Stop[StopName='Cysleys Farm (by request only)']/stopId");

string stopId = stopIdNode.InnerText; 
```

如果有多个节点具有相同的 StopName，那么您可以将它们存储在一个列表中：

```
List<string> stopIdList = new List<string>();

foreach (XmlNode stopIdNode 
         in xmlDoc.SelectNodes
         ("/ArrayOfStop/Stop[StopName='Cysleys Farm (by request only)']/stopId"))
{
    stopIdList.Add(stopIdNode.InnerText);
} 
```

# apache-flex - 尝试在 Flex 4.6 中使用 LIST 对象中的 effectStart 和 effectEnd

> ID：10261610
> 
> 赞同：0
> 
> 时间：2012-04-21T18:06:49.730
> 
> 标签：apache-flex, list, events, effect

我有一个填充列表的移动应用程序。这需要几秒钟，所以我试图显示忙指示符。当视图被激活时我会显示忙碌指示器，然后当列表完成时我想关闭忙碌指示器。

我的繁忙指示器和列表声明的 MXML 如下所示：

```
<s:BusyIndicator id="BI"  visible="true" />

<s:List id="lst"  effectStart="lstStartHandler(event)"  effectEnd="lstFinishHandler(event)" fontSize="20" horizontalCenter="0" textAlign="right"  dataProvider="{dp}" useVirtualLayout="true" width="100%" height="100%" top="30" alternatingItemColors="[#66FFFF, #33CCCC]"> 
```

我的事件监听器是这样的：

```
private function lstFinishHandler(event:EffectEvent):void {
            BI.visible = false
        }

        private function lstStartHandler(event:EffectEvent):void {
            BI.visible = true
        } 
```

我的忙碌指示灯总是亮着，永远不会看不见。似乎事件函数没有执行。

显然我做错了什么，但无法弄清楚。任何想法，将不胜感激。

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:04:27.037

MXML 中的`effectStart`和`effectEnd`属性用于在 Flex 效果类对您的组件播放效果时添加事件处理程序。

如果您没有在 上触发任何效果`List`，那么这些事件处理程序将不会被执行。

您需要通过其他方式告诉繁忙指示器消失：

*   调度你自己的事件
*   使用数据绑定
*   使用视图状态和 currentState 属性
*   ETC...

您已经在使用数据绑定来设置`dataProvider`列表，您可以简单地添加另一个变量并绑定到的可见属性`BusyIndicator`：

```
<s:BusyIndicator visible="{isServerResponseComplete}" /> 
```

添加一个可绑定变量（`isServerResponseComplete'）只是为了做到这一点感觉**不对**，但这是最简单的答案。调度事件可能是一种更好的方法，但是如果不知道您的应用程序的结构，很难准确地说出您应该如何做。

# php - 如何在php中正确旋转图像？

> ID：10261611
> 
> 赞同：0
> 
> 时间：2012-04-21T18:07:01.693
> 
> 标签：php, image-processing, php-gd

我正在使用 imagerotate() 函数将下面的图像变成 30 度角。

[http://postimage.org/image/b7w6dacel/](http://postimage.org/image/b7w6dacel/)

问题是，每当我旋转图像并将其保存到新路径时，在新路径中图像被旋转但它周围有黑色，如下所示。

[http://postimage.org/image/n3n1vtr9p/8501961e/](http://postimage.org/image/n3n1vtr9p/8501961e/)

原始图像是450 * 340，旋转后，图像变为560 * 520。有谁知道我做错了什么。看看我下面的源代码。谢谢。

```
$filename =  "static\\". $sessionid . "-1.jpg";
$file= $sessionid . "-1.jpg";
$ir = imagecreatefromjpeg($filename);
$degrees = 30;
$flip=imagerotate($ir, $degrees, 0);
$rotated=imagejpeg($flip, 'c:\\xampp\\htdocs\\'. $file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:42:38.233

根据您旋转它的程度，新图像将大于原始图像。您将不得不缩放或裁剪新图像。此代码将扩展`$oldImage`到`$newWidth`和`$newHeigth`。

```
$newImage = imagecreatetruecolor($newWidth, $newHeight);
imagecopyresampled($newImage, $oldImage, 0, 0, 0, 0, $newWidth, $newHeight, imagesx($oldImage), imagesy($oldImage)); 
```

希望这可以帮助。

# javascript - 与文本框相关的 HTML 编码/解码

> ID：10261612
> 
> 赞同：1
> 
> 时间：2012-04-21T18:07:15.517
> 
> 标签：javascript, jquery, html, encoding, textbox

我正在从 Microsoft 堆栈（即 WPF）过渡到 HTML5，因此提前为这个问题相当业余的性质道歉。

手头的主题是 HTML 编码和解码。

考虑一个 HTML5 应用程序通过 HTTP 对 C# 后端进行 AJAX 调用。服务器仅返回 JSON 格式的数据，始终确保使用 .html 对 JSON 值字段进行 HTML 编码`HttpUtility.HTMLEncode()`。

HTML5 客户端反向执行相同的过程。发布到服务器的所有数据首先使用一个简单的 JavaScript 辅助函数进行 HTML 解码。

我的 HTML5 应用程序中所有可能显示的字符串数据都以 HTML 编码的形式存储和传递。这个方案对我来说效果很好。但是今天我发现了 HTML5 文本框，并在这样做的过程中发现了一些奇怪的东西。文本框似乎不喜欢编码文本。

如果我有一个这样定义的文本框：

```
<input id="festus" type="text"/> 
```

并将其更新如下：

```
$("#festus").val(someEncodedString) 
```

…文本框显示嵌入到 someEncodedString 中的实际代码，而不是将这些代码转换为适当的字符。我对这种行为感到惊讶，因为我假设浏览器对所有 DOM 元素执行正确的转义码解释。

我试图通过为 val() 编写一个名为 val2() 的帮助器/包装器来抽象出这个问题：

```
$.prototype.val2=function(newVal){
    return (newVal===undefined)
        ?iHub.Utils.encodeHTML(this.val())      //getting value
        :this.val(iHub.Utils.decodeHTML(newVal));   //setting value
} 
```

[iHub.Utils 是我编写的辅助函数库]

这里的想法是 val2() 将在*获取值时对从我的文本框中检索到的数据进行适当的编码，并在**设置*值之前对其进行解码。这似乎可行，但我无法摆脱这种感觉，即我必须对编码/解码在 HTML5 中的工作方式存在根本性的误解。

使用文本框时编码/解码数据是标准做法吗？与其他常见元素（如`<p>`and ）不同，文本框`<select>`在显示编码输入字符串时不执行标准解码，是否以某种方式特别？

再次，对不起，如果这太基本了。HTML5 和 JavaScript 对我来说相当新，我的“HTML5 简介”类书籍并没有真正深入讨论这个主题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T19:16:58.323

HTML 编码适用于 HTML 文档。如果您在 HTML 文档本身中包含您的值，例如`<input value="10 &gt; 5" />`，您将对它进行编码，以确保您的值中的内容不会与关闭标签`>`的 混淆。`>`

但是当您使用 JavaScript 设置字段的值时，就没有混淆的余地了。您没有修改像`<input.../>`;这样的标签 您正在修改一个 JavaScript 对象。所以你不应该对值进行 HTML 编码。如果您使用的是字符串变量，就像在您的示例中一样，您根本不需要进行任何编码。

另一方面，如果您使用字符串文字来指定值，则需要将其编码为 JavaScript 字符串，例如通过转义`'`in `$("#festus").val('can\'t')`。这与您进行 HTML 编码的原因完全相同；以避免与`'`关闭字符串的 混淆。

您在 JavaScript 中进行 HTML 编码的唯一时间是当您使用它来生成 HTML 代码时，例如`el.innerHTML = '<input value="10 &gt; 5" />';`.

因此，我建议您**不要**在 AJAX 响应或请求中对字符串进行 HTML 编码。相反，在您真正生成需要编码的代码之前，请避免编码。因此，在编写 HTML 时仅对字符串进行 HTML 编码，在编写 JavaScript 时仅对字符串进行 JavaScript 编码，等等。

# c++ - 包含 LU 分解的矩阵

> ID：10261615
> 
> 赞同：0
> 
> 时间：2012-04-21T18:07:55.770
> 
> 标签：c++, linear-algebra, sparse-matrix

我正在做 LU decom，我在 googel 上找到了这段代码，但想通过输出“pvt”和“a”来理解它，但它似乎我的 pvt 不正确，所以我得到了一些不同的东西，所以请任何人纠正我..谢谢

这是我的代码

```
 int* LUfactor ( double **a, int n, int ps )

/*PURPOSE:   compute an LU decomposition for the coefficient matrix a

CALLING SEQUENCE:
       pvt = LUfactor ( a, n, ps );

INPUTS:
       a        coefficient matrix
                type:  **doble
       n        number of equations in system
                type:  int
       ps       flag indicating which pivoting strategy to use
                     ps == 0:   no pivoting
                     ps == 1;   partial pivoting
                     ps == 2;   scaled partial pivoting
                type:  int

  OUTPUT:
       pvt      vector which indicates the permutation of the rows
                performed during the decomposition process
                type:  *int
       a        matrix containing LU decomposition of the input    coefficient
                matrix - the L matrix in the decomposition consists of 1's
                along the main diagonal together with the strictly lower
                triangular portion of the output matrix a; the U matrix
                in the decomposition is theupper triangular portion of the
                output matrix a
                type:  **double
   */                 

 {
        int pass, row, col, *pvt, j, temp; 
    double *s,rmax,ftmp, mult, sum;

       /*initialize row pointer array*/

  pvt = new int [n];
  for ( row = 0; row < n; row++ )
      pvt[row] = row;

   /* if scaled partial pivoting option was selected,
   initialize scale vector*/

 if ( ps == 2 ) {
    s = new double [n];
    for ( row = 0; row < n; row++ ) {
        s[row] = fabs( a[row][0] );
        for ( col = 1; col < n; col++ )
            if ( fabs( a[row][col] ) > s[row] ) 
               s[row] = fabs( a[row][col] );
    }
 }

   /*elimination phase*/

 for ( pass = 0; pass < n; pass++ ) {

 /*  perform requested pivoting strategy

  even if no pivoting option is requested, still must check for
  zero pivot*/

     if ( ps != 0 ) {
        rmax = ( ps == 1 ? fabs( a[pvt[pass]][pass] ) : 
                           fabs( a[pvt[pass]][pass] ) / s[pvt[pass]] );
        j = pass;
        for ( row = pass+1; row < n; row++ ) { 
            ftmp = ( ps == 1 ? fabs( a[pvt[row]][pass] ) : 
                               fabs( a[pvt[row]][pass] ) / s[pvt[row]] );
            if ( ftmp > rmax ) {
               rmax = ftmp;
               j = row;
            }
        }

        if ( j != pass ) {
           temp = pvt[j];
           pvt[j] = pvt[pass];
           pvt[pass] = temp;
        }
     }
     else {
        if ( a[pvt[pass]][pass] == 0.0 ) {
           for ( row = pass+1; row < n; row++ )
               if ( a[pvt[row]][pass] != 0.0 ) break;
           temp = pvt[row];
           pvt[row] = pvt[pass];
           pvt[pass] = temp;  
        }
     }

     for ( row = pass + 1; row < n; row++ ) {
         mult = - a[pvt[row]][pass] / a[pvt[pass]][pass];
         a[pvt[row]][pass] = -mult;
         for ( col = pass+1; col < n; col++ )
             a[pvt[row]][col] += mult * a[pvt[pass]][col];
     }
 }

 if ( ps == 2 ) delete [] s;
 return ( pvt );
} 
```

这是我的主要

```
 double **af;
 int *pvt;

     int i, j, n;

/*
  allocate space for coefficient matrix
           */

 n = 4;

     af = new double* [n];
 pvt = new int [n];

 for ( i = 0; i < n; i++ )
     af[i] = new double [n];

      af[0][0] = 2.00;    af[0][1] = 1.00;   af[0][2] = 1.00; af[0][3] = -2.00;
 af[1][0] = 4.00;    af[1][1] = 0.00;   af[1][2] = 2.00; af[1][3] = 1.00;
 af[2][0] = 3.00;    af[2][1] = 2.00;   af[2][2] = 2.00; af[2][3] = 0.00;
 af[3][0] = 1.00;    af[3][1] = 3.00;   af[3][2] = 2.00; af[3][3] = 0.00;

 pvt =LUfactor ( af, n, 0 );

    cout << "pvt" << endl;
      for ( i = 0; i < n; i++ )
          cout << pvt[i] << endl;
          cout << endl << endl <<  endl;

      cout << "a" << endl;
      for ( i = 0; i < n; i++ )
          cout << af[i][i] << endl;
          cout << endl << endl <<  endl;

/////// 
        out put

  pvt
0
3
1
2

 LU matrix is 
 2  1  1  -2  0  
 2  -0.8  1.2  5.8  0  
 1.5  0.2  0.166667  1.83333  0  
 0.5  2.5  1.5  1  0  
 Segmentation fault 
```

//////////////////////////////////

```
The out put I'm looking for is 
  Matrix A
     0         2         0         1
     2         2         3         2
     4        -3         0         1
     6         1        -6        -5

determinant: -234
pivot vector:   3  2  1  0

 Lower triangular matrix
      6         0         0         0
      4    -3.667         0         0
      2     1.667     6.818         0
      0         2     2.182      1.56

Upper triangular matrix
     1    0.1667        -1   -0.8333
     0         1    -1.091    -1.182
     0         0         1    0.8267
     0         0         0         1

Product of L U

     6         1        -6        -5
     4        -3         0         1
     2         2         3         2
     0         2         0         1

Right-hand-side number 1

0.0000   -2.0000   -7.0000    6.0000

 Solution vector

-0.5000    1.0000    0.3333   -2.0000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:36:33.773

您没有阅读精美的文档。它清楚地说

```
CALLING SEQUENCE:
   pvt = LUfactor ( a, n, ps ); 
```

您错误地使用了该功能。您分配并填充`pvt`了 ，然后您忽略了来自 的返回值`LUfactor`。您不分配`pvt`；该功能`LUfactor`确实如此。您需要`LUfactor`根据文档调用。

# c++ - 在另一个文件c ++中的前向声明

> ID：10261619
> 
> 赞同：4
> 
> 时间：2012-04-21T18:08:09.200
> 
> 标签：c++, forward-declaration

在另一个头文件中转发声明是否合法？例如：

```
#ifndef _MAIN_H_
#define _MAIN_H_
class ClassA;
class ClassB;
#include "classa.h"
#include "classb.h"
#endif

#ifndef _CLASSA_H_
#define _CLASSA_H_
#include "main.h"
class ClassA
{
public:
    ClassB b;
};
#endif

#ifndef _CLASSB_H_
#define _CLASSB_H_
#include "main.h"
class ClassB
{
public:
    ClassA a;
};
#endif 
```

A 类和 B 类都相互依赖，并且都有另一个类型的对象。我所做的是在另一个文件中前向声明这两个类。有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T18:19:35.730

是的。但是你应该使用 `ClassA* a;`or`ClassA& a;`代替`ClassA a;`（在 cpp 文件中进行相应的初始化），因为没有关于 size of 的信息`ClassA`来计算`ClassB`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T18:20:37.967

一般来说，跨标头前向声明类是合法的。

但是，在您的示例中，您正在彼此实例化两个类，这绝对是非法的！

为了说明这背后的原因，请考虑以下几点：

让`ClassA`1 个字节不带`b`，`ClassB`1 个字节不带`a`. 现在，包括`b`：`ClassA`现在需要 2 个字节。现在包括`a`：`ClassB`现在需要 3 个字节。现在我们必须将 的大小更新`ClassA`为 4 个字节，因为`ClassB`. 按照这个逻辑`ClassB`现在是 5 个字节、`ClassA`6 个字节、`ClassB`7 个字节......

为了解决这个问题，您可能希望将（至少）其中之一的类型更改为`a`指针`b`或对相应类的引用。执行此操作时（在 c/c++ 中），请确保您了解内存管理！

您原来的问题的解决方案可能如下所示：

类A.h

```
#pragma once
class ClassB;
class ClassA
{
public:
    ClassB* b;
} 
```

B类.h

```
#pragma once
#include "ClassA.h"
class ClassB
{
public:
    ClassA a;
} 
```

请注意，ClassB.h 需要 ClassA.h，因为出于演示目的：`ClassB`包含 type 的完整对象`ClassA`，因此`ClassA`需要定义 ！

# twitter-bootstrap - 如何从谷歌浏览器的下拉菜单中删除黄色边框？

> ID：10261622
> 
> 赞同：4
> 
> 时间：2012-04-21T18:08:40.573
> 
> 标签：twitter-bootstrap

如何从谷歌浏览器的下拉菜单中删除黄色边框？

文本框还可以，它们显示出很棒的蓝色轮廓，但下拉菜单却没有。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T20:54:58.847

您可以通过使其透明来删除轮廓，如下所示：

```
select:focus {
   outline-color: transparent;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T10:08:33.337

你应该改用这个：

```
.bootstrap-select .btn:focus {
   outline-color: transparent !important;
} 
```

因为它将选择转换为带有列表元素的按钮。然后该按钮获得一个为其设置的类 - 上面的一个。

// 麦卡德尔

# sql - 如何在 PostgreSQL 查询中对不同的元组进行排序

> ID：10261627
> 
> 赞同：4
> 
> 时间：2012-04-21T18:09:25.097
> 
> 标签：sql, postgresql, distinct-on

我试图在 Postgres 中提交一个只返回不同元组的查询。在我的示例查询中，我不希望一个cluster_id/feed_id 组合存在多次的重复条目。如果我做一个简单的：

```
select distinct on (cluster_info.cluster_id, feed_id) 
   cluster_info.cluster_id, num_docs, feed_id, url_time 
   from url_info 
   join cluster_info on (cluster_info.cluster_id = url_info.cluster_id) 
   where feed_id in (select pot_seeder from potentials) 
   and num_docs > 5 and url_time > '2012-04-16'; 
```

我明白了，但我也想根据`num_docs`. 因此，当我执行以下操作时：

```
select distinct on (cluster_info.cluster_id, feed_id) 
   cluster_info.cluster_id, num_docs, feed_id, url_time 
   from url_info join cluster_info 
   on (cluster_info.cluster_id = url_info.cluster_id) 
   where feed_id in (select pot_seeder from potentials) 
   and num_docs > 5 and url_time > '2012-04-16' 
   order by num_docs desc; 
```

我收到以下错误：

```
ERROR:  SELECT DISTINCT ON expressions must match initial ORDER BY expressions
LINE 1: select distinct on (cluster_info.cluster_id, feed_id) cluste... 
```

我想我明白为什么我会收到错误（除非我以某种方式明确描述该组，否则不能按元组分组）但是我该怎么做呢？或者，如果我对错误的解释不正确，有没有办法实现我的初始目标？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T18:42:02.160

最左边的`ORDER BY`项目不能与`DISTINCT`从句的项目不一致。我引用[手册关于`DISTINCT`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-DISTINCT)：

> `DISTINCT ON`表达式必须匹配最左边的表达式`ORDER BY` 。ORDER BY 子句通常包含附加表达式，用于确定每个`DISTINCT ON`组中所需的行优先级。

尝试：

```
SELECT *
FROM  (
    SELECT DISTINCT ON (c.cluster_id, feed_id) 
           c.cluster_id, num_docs, feed_id, url_time 
    FROM   url_info u
    JOIN   cluster_info c ON (c.cluster_id = u.cluster_id) 
    WHERE  feed_id IN (SELECT pot_seeder FROM potentials) 
    AND    num_docs > 5
    AND    url_time > '2012-04-16'
    ORDER  BY c.cluster_id, feed_id, num_docs, url_time
           -- first columns match DISTINCT
           -- the rest to pick certain values for dupes
           -- or did you want to pick random values for dupes?
    ) x
ORDER  BY num_docs DESC; 
```

或使用`GROUP BY`：

```
SELECT c.cluster_id
     , num_docs
     , feed_id
     , url_time 
FROM   url_info u
JOIN   cluster_info c ON (c.cluster_id = u.cluster_id) 
WHERE  feed_id IN (SELECT pot_seeder FROM potentials) 
AND    num_docs > 5
AND    url_time > '2012-04-16'
GROUP  BY c.cluster_id, feed_id 
ORDER  BY num_docs DESC; 
```

如果`c.cluster_id, feed_id` 是您在列表中包含列的所有（在这种情况下都是）表的主键列`SELECT`，那么这仅适用于 PostgreSQL **9.1**或更高版本。

否则，您需要对`GROUP BY`其余列进行汇总或提供更多信息。

# html - 目前将 XHTML1.0/HTML4 桌面网站转换为 HTML5 是否有任何商业利益？

> ID：10261644
> 
> 赞同：3
> 
> 时间：2012-04-21T18:11:13.287
> 
> 标签：html, seo

将 XHTML1.0/HTML4 网站转换为 HTML5 是否有任何商业利益？我的意思是尽可能使用 HTML5 语义标签。

一位客户问我：“如果他花钱将他的电子商务网站重构为 HTML5 ，这是否会给他的电子商务业务带来任何好处。

他向我展示了这个链接[http://www.seroundtable.com/google-html5-14912.html](http://www.seroundtable.com/google-html5-14912.html)，它显示 SEO 不会增加（至少现在是这样）。他仍然拥有大量来自 IE6 的用户。他也不想让 IE 用户仅仅为了使用 HTML5 而在性能上妥协。

他有不同的移动和桌面网站，不想要响应式设计。甚至在移动网站上，他也希望与设备的最大兼容性，所以我也没有在他的移动网站上使用 HTML5。

我们现在应该跳过重构的想法，还是有一些真正的好处可以通过使用 HTML5 对网站及其用户有益？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T19:45:06.393

## HTML5 非常广泛

**HTML5**不仅仅是标记。它是一组**不相关的功能**。您可以访问[HTML5 Rocks](http://www.html5rocks.com/)网站快速查看此内容。

为什么要 HTML5？我再次邀请您访问同一个站点：[HTML5 Rocks (Why HTML5 Rocks?)](http://www.html5rocks.com/en/why)。

## 兼容性怎么样？

兼容性不再是问题。万维网上有一些工具是由厌倦了这个问题的网页设计师和开发人员创建的。

如果网站不支持某些功能并使用替代方案，您现在可以创建可以产生良好影响的网站。您还可以使用[响应式设计](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)等技术和[媒体查询](http://coding.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)来为许多不同的设备创建一个站点，而不是多个站点。

请注意，从微软的角度来看，IE6 已[正式死亡。](http://www.theregister.co.uk/2012/01/03/microsoft_ie6_death/)

*   [HTML5 样板](http://html5boilerplate.com/)- HTML/CSS/JS 模板
*   [Normalize.css](http://necolas.github.com/normalize.css/) - “可自定义的 CSS 文件，使浏览器更一致地呈现所有元素并符合现代标准”
*   [HTML5 Shiv](http://code.google.com/p/html5shiv/) - 在 IE 中启用 HTML5 元素的 JS 解决方法
*   [Modernizr](http://modernizr.com/) - 用于特征检测的 JS 库
*   [Respond.js](https://github.com/scottjehl/Respond) - 用于 IE 中媒体查询支持的 JS 库
*   [Selectivizr](http://selectivizr.com/) - 在 IE 中模拟 CSS3 伪类的 JS 库

## 让我们谈正事吧！

在这一点上，你可能会告诉自己他要去哪里？好吧，这一切都归结为金钱，对吗？

HTML5[不会真正提高您](http://www.impressivewebs.com/html5-seo/)在搜索引擎中的排名。充其量它可以帮助更正确地对您的内容进行分类。HTML5 将做的是为网络创建者提供创新所需的工具。

HTML5 带来了使网站比以往更具吸引力的可能性。交互性是让用户获得他们会记住的体验并让他们回来获得更多体验的关键。HTML5 正在彻底改变创建、开发和交付内容的方式。

为什么不查看您客户的源代码并将其与竞争对手进行比较。他们使用 HTML5 吗？如果他们正在使用它，那么请检查他们是如何做到的。如果他们不使用 HTML5，那为什么不成为第一个呢？毕竟，HTML4 和 XHTML 已经落后（1999-2000）。不可避免地会发生对 HTML5 的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T19:36:38.050

取决于当前网站的外观。我更有可能从外观更漂亮的网站购买东西，因为它看起来更有信誉，但这种漂亮的设计是否可以在 HTML 4 中完成并增加兼容性。真的，如果它看起来不错，那么无论哪种方式都无所谓。人们会很容易地购买东西，并且部分印象深刻，而不是想知道技术是什么，以及当您单击按钮时是否会发出声音。

*像淡入淡出或在页面中滑动这样的平滑过渡通常看起来非常专业和不错，就像 iPhone（或其他）应用程序一样，但这也可以通过 AJAX 和 Javascript 来完成。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T20:52:01.943

关于 HTML5，要记住一件关键的事情：“对于大多数实际目的，它不是全有或全无”。您仍然可以拥有一个 HTML4/XHTML1.0 的网站，并嵌入 HTML 5 中的一两个功能，例如微格式、视频标签、HTML5 表单、CSS3 等。缺点是您的页面可能无法使用任一 DOCTYPE 完全验证，但是如果您对此感到满意，那么浏览器、用户和搜索引擎仍然可以正常浏览该网站。

要记住的最重要的事情是旧浏览器（即 IE）会忽略您的 HTML5 标签，因此您不能将它们用于 CSS 挂钩（除非您使用 Javascript shim）；并且视频标签之类的功能不会在旧版浏览器上显示，因此您可能希望对这些使用基于 javascript-/flash 的填充程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T18:27:25.293

有趣的。在我的公司，我们刚刚举办了一些关于 SEO 的精彩研讨会，由一家专门从事 SEO 优化并与谷歌合作的公司举办。他们实际上建议我们尽可能语义化并正确使用 html 元素的属性...

他们还鼓励我们实施[HTML5 微数据](http://www.w3.org/TR/html5/microdata.html)，因为 Google Crawler 已经在使用它，因此您可以提供有关您的页面的更准确信息。

# video - 如何加快 Camtasia 视频录制的一部分（选择）？

> ID：10261649
> 
> 赞同：11
> 
> 时间：2012-04-21T18:12:16.857
> 
> 标签：video, camtasia

我想要加快 camtasia 视频录制的一部分（选择）？你对如何做到这一点有任何线索吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-25T11:40:45.777

剪切您想要加速的部分，在其上单击鼠标右键，然后从菜单中选择“剪辑速度”选项。如果您想加快视频速度，请输入 200、300 甚至 1000%，如果您想减慢视频速度，请输入 10、20、30%。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-15T10:20:15.160

如果你想减慢剪辑剪辑的速度，你需要制作一个新的轨道并将选定的部分移动到它上面。在此之后，您需要编辑剪辑速度，它将完美运行。

[https://gyazo.com/e43c408ed3be39e30a07b98f1081e156](https://gyazo.com/e43c408ed3be39e30a07b98f1081e156)

请注意，将其与其余部分分开是行不通的。

[https://gyazo.com/d076b39161739dcaeb2a48899a985734](https://gyazo.com/d076b39161739dcaeb2a48899a985734)

# javascript - 使用 Javascript 更改表结构

> ID：10261650
> 
> 赞同：0
> 
> 时间：2012-04-21T18:12:29.870
> 
> 标签：javascript, css, html-table, toggle

我有一个（左侧）菜单侧边栏，我想允许用户打开关闭。有代码使其下拉和折叠，折叠时留下空白但是，站点扩展相邻窗格中的内容以填充菜单所在的位置可能看起来更好。现在菜单在表格的单个单元格中，内容在右侧的单个单元格中，都在同一行中。我想避免更改行中的单元格数量，因为这会与上方和下方的行冲突。因此，一种方法是在两个单元格（包括菜单）和一个单元格之间切换，其中一个单元格的内容但 colspan 为两个。我的理解是 Javascript 下拉菜单通过预加载两个版本然后隐藏一个来工作。是否可以让 Javascript 更改表结构？想象一下它看起来像下面这样，但这本身不起作用。

```
<script type="text/javascript">
        function toggleBar(obj) {
            var navbar = document.getElementById("navbar");
            if (navbar.style.display == "none") {
                navbar.style.display = "";
                obj.innerHTML = "<img src='images/collapse.gif' alt='Hide Menu'>";
            } else {
                navbar.style.display = "none";
                obj.innerHTML = "<img src='images/expand.gif' alt='Show Menu'><td colspan=2";
            }
        } 
```

和身体：

```
<table><tr><div style="background-color:silver;width:100px">
<a href="javascript:void(0)" onclick="toggleBar(this);"><td><img src="images/collapse.gif" alt="Hide Menu"><div id="navbar" ><a href="javascript:void(0)" onclick="toggleBar(this);"></a></a>menu here<br>menu1<br>menu2</td><td></div></div>CONTENT GOES HERE<td></tr>
<table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:25:15.293

*这很棘手..我想现在说“不要使用表格进行布局！”*有点晚了！，但这本质上是你的问题。

如果表格连接到它下面的任何东西，并且您需要使用 colspan 那么我看不到一个简单的方法来做到这一点..

我想您可以添加具有 n-1 列和 colspan 的新行，然后将所有 HTML 复制到新单元格中并删除旧行。但这会破坏您可能在原始单元格上使用的任何 JavaScript。

# java - 命名休眠查询的“命名查询未知”？

> ID：10261651
> 
> 赞同：6
> 
> 时间：2012-04-21T18:12:32.087
> 
> 标签：java, hibernate

可能是什么问题？

```
@Entity
@NamedQueries( {
    @NamedQuery(name = User.ALL,
                query = "SELECT u FROM User u")
})

public class User {
    public static final String ALL = "User.all";
}

public class Service {
    find... with ... User.ALL
} 
```

堆栈跟踪：

```
Caused by: org.hibernate.MappingException: Named query not known: User.all
    at org.hibernate.impl.AbstractSessionImpl.getNamedQuery(AbstractSessionImpl.java:93)
    at org.hibernate.impl.SessionImpl.getNamedQuery(SessionImpl.java:1407)
    at $Session_a5ad46cfa25.getNamedQuery(Unknown Source)
    at $Session_a5ad46cf913.getNamedQuery(Unknown Source)
    at de.medicshare.dal.HibernateCrudServiceDAO.findUniqueWithNamedQuery(HibernateCrudServiceDAO.java:83)
    at $CrudServiceDAO_a5ad46cfa19.findUniqueWithNamedQuery(Unknown Source)
    at $CrudServiceDAO_a5ad46cfa1b.findUniqueWithNamedQuery(Unknown Source)
    at $CrudServiceDAO_a5ad46cf931.findUniqueWithNamedQuery(Unknown Source)
    at de.medicshare.pages.Signup.proceedSignup(Signup.java:82)
    at de.medicshare.pages.Signup.dispatchComponentEvent(Signup.java)
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl.dispatchEvent(ComponentPageElementImpl.java:923)
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl.processEventTriggering(ComponentPageElementImpl.java:1106)
    ... 90 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:12:45.580

不确定这是否是您的问题，但请在[此处](https://stackoverflow.com/questions/4037107/named-query-not-known-annotations-hibernate)查看此帖子。

问题是使用：

```
org.hibernate.annotations.Entity 
```

代替：

```
javax.persistence.Entity 
```

# php - 多语言 PHP - 检测访问者语言并直接访问内容的最佳方法

> ID：10261653
> 
> 赞同：1
> 
> 时间：2012-04-21T18:12:41.553
> 
> 标签：php, multilingual

[如何制作多语言网站？](https://stackoverflow.com/questions/3175090/how-can-i-make-multi-language-website) 在这个 url 中有一些信息，但关于多语种的信息还不是很清楚。

我们想用 php 建立一个多语言网站。我们有文章、菜单、书籍和更多表格的地方

所有表都将有多语言无限语言，我们将在数据库中分配语言。然后新语言将显示在插入表单中，例如

```
Insert Article

tab-English / tab-France / tab-Bengali /....etc 
```

我是这样想的。

**语**

```
id_language
language_name 
```

**文章 - 表**

```
id_article
date 
```

**文章语言**

```
id_article_language
id_article
id_language
article_title
article_description 
```

因此，当我为表格启用新语言时，右侧将出现一个选项卡，并且查询字符串将显示为 ln=English，因此它将在文章中插入英语语言数据。

有没有人更好地了解如何管理这个多语言网站。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T18:37:28.047

看起来你的数据库端工作得很好。对我来说看起来不错。

在客户端，您不需要将语言附加到查询字符串中。这为您创建了更多工作，因为您需要将该查询字符串动态附加到每个链接，因为每个站点的查询字符串都会有所不同。

有些网站使用顶级目录，如`http://www.example.com/en/`and `http://www.example.com/de/`，但我认为最好的方法是购买国家代码顶级域名 ( [ccTLD](http://en.wikipedia.org/wiki/Country_code_top-level_domain) )，这样您网站的不同语言将位于不同的域：`www.google.com`、、、`www.google.com.es`。`www.google.de`然后，您可以使用[HTTP`Accept-Language`标头来](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4)确定要重定向到哪个域。您可以使用 PHP 之类的语言来[解析用户的 Accept-Language 标头](http://www.thefutureoftheweb.com/blog/use-accept-language-header)。

为了您的理智，我鼓励在查询字符串上使用 ccTLD 或顶级目录，同时也使搜索引擎上的事情变得更容易。有些蜘蛛无法理解`ln=en`查询字符串中的 和返回的语言之间的相关性。使用 ccTLD 将通知蜘蛛，无需您的任何干预，内容正在以特定语言提供特定语言环境。

这提醒了我，您还应该在响应中提供正确的[HTTP`Content-Language`标头。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.12)在 php 中，它看起来像：

```
header('Content-Language: en-US'); //or en-GB, or es-ES 
```

您可以使用任何符合[RFC1766的](http://www.ietf.org/rfc/rfc1766.txt)[国家/地区代码](http://www.i18nguy.com/unicode/language-identifiers.html)。

**编辑：**正如@RepWhoringPeeHaa 指出的那样，您还可以在[所有 HTML 文件的标记中](http://www.w3.org/TR/NOTE-html-lan)[指定语言 `<head>`](http://www.w3.org/TR/NOTE-html-lan)：

```
<META HTTP-EQUIV="Content-Language" Content="en" /> 
```

# android - 如何在 Android 小部件中设置 ImageView 的 onClicklistener 方法？

> ID：10261657
> 
> 赞同：0
> 
> 时间：2012-04-21T18:12:59.447
> 
> 标签：android, click, widget, imageview

我正在开发和带有 Imageview 的 android 模拟时钟小部件我需要在单击图像视图时启动和活动，任何想法（我基本上是 Java 开发人员，但对 Android 不熟悉）

*   它没有显示我尝试过的 logcat 中的任何日志

    ```
     String action = intent.getAction();
     Log.v("info",action);
     Log.i("info",action);
     Log.d("info",action); 
    ```

    有什么建议么 ...

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:13:47.077

在您的应用程序中使用 ImageButton 而不是 ImageView。

# python - Facebook 签名请求解码错误填充

> ID：10261661
> 
> 赞同：3
> 
> 时间：2012-04-21T18:13:07.920
> 
> 标签：python, django, facebook

我正在尝试解码 facebook signed_request 以向非授权用户提供登录表单。我的代码如下：

```
def parse_signed_request(sr):

  encoded_sig, payload = sr.split('.', 2)
  data = json.loads(base64.b64decode( payload.replace('-_', '+/') ))

  if not data['algorithm'].upper() == 'HMAC-SHA256':
      raise ValueError('unknown algorithm {0}'.format(data['algorithm']))
      return None

  h = hmac.new(FB_APP_SECRET, digestmod=hashlib.sha256)
  h.update(payload)
  expected_sig = urlsafe_b64encode(h.digest()).replace('=', '')

  if encoded_sig != expected_sig:
    raise ValueError('bad signature')
    return None

return data 
```

我的问题是，对于已经登录的用户，此代码可以成功运行，但对于未登录的用户，我收到 b64decode 的“不正确填充”错误。但是，如果我用“=”符号填充有效负载，那么所有用户都会通过“登录”的授权，无论他们是否真的登录。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T11:03:45.633

这对我有用

```
def base64_url_decode(inp):
    inp = inp.replace('-','+').replace('_','/')
    padding_factor = (4 - len(inp) % 4) % 4
    inp += "="*padding_factor
    return base64.decodestring(inp)

def parse_signed_request(signed_request='a.a', secret=FACEBOOK_APP_SECRET):
    l = signed_request.split('.', 2)
    encoded_sig = l[0]
    payload = l[1]

    sig = base64_url_decode(encoded_sig)
    data = json.loads(base64_url_decode(payload))

    if data.get('algorithm').upper() != 'HMAC-SHA256':
        print('Unknown algorithm')
        return None
    else:
        expected_sig = hmac.new(secret, msg=payload, digestmod=hashlib.sha256).digest()

    if sig != expected_sig:
        return None
    else:
        print('valid signed request received..')
        return data 
```

# sql - SQL Server 2005 合并和分页两个表

> ID：10261662
> 
> 赞同：2
> 
> 时间：2012-04-21T18:13:30.760
> 
> 标签：sql, sql-server, entity-framework-4

我有两个表格，其中包含的数据本质上是来自不同来源的标题列表。这是在带有 SQL Server 2005 的 MVC 3（EF 可用）中完成的。

表一：日期-标题-id

表2：日期-标题-id

我想做的是将这些组合成一个主列表，可以

*   分页浏览
*   支持基于日期的查询范围，然后可以浏览。

目前分页很困难，因为任何 X 集中每个来源的文章数量随该来源的更新频率而变化。

如果这可能与 View 或使用 Union All 相关？大约有 300,000 行涵盖了大约 15 年的头条新闻。我错过了更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T20:38:32.983

我还没有尝试过，但是将 union 与 skip and take 结合起来应该可以。

MSDN 有一个联合的例子， http: [//msdn.microsoft.com/en-us/library/bb896299.aspx](http://msdn.microsoft.com/en-us/library/bb896299.aspx)，我想你会想要将你的日期范围过滤器应用到每个部分。

这里有一个 SO 答案[SQL Table Paging PERFORMANCE ...EF4 + Linq SKIP +TAKE 在性能上是否与使用 TSQL 参数在 SQL 表上请求“分页”相同？](https://stackoverflow.com/questions/5345939/sql-table-paging-performance-is-ef4-linq-skip-take-equal-in-performance-th)谈论跳过和采取以及性能。

如果您愿意，您可以通过将表 1 和 2 中的数据与源字段合并为一个来使事情变得更容易。

# c# - EF Code First 外键问题

> ID：10261663
> 
> 赞同：0
> 
> 时间：2012-04-21T18:13:39.977
> 
> 标签：c#, entity-framework, ef-code-first

我正在使用 EF Code First 映射到现有的 DB2 数据库。这是一对多的关系，不幸的是我无法轻松创建视图或更改架构。

父表的架构具有以下键：

```
 Type (char(1))
 ServiceDate (datetime)
 FormNumber (varchar(8)) 
```

子表（详细信息）具有以下键

```
 ServiceDate (datetime) (also a foreign key to ServiceDate on the parent table)
 FormNumber (varchar(8)) (also a foreign key to ServiceDate on the parent table)
 SpecificServiceDate (datetime)
 LineNumber (varchar(8)) 
```

我想使用流利的映射来创建关系。如果我做：

```
 .HasMany(e => e.Details).HasForeignKey(e => new {e.ServiceDate, e.FormNumber}); 
```

...我收到一条错误消息，提示键与主键不匹配。关于如何设置的想法？谢谢。

**编辑**

好的，EF 本身并不支持这一点。是否有解决方法来延迟加载数据？

这是只读的，如果有区别的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:35:11.170

不幸的是，这是不可能的。EF 中的关系具有与数据库中相同的规则。如果您的父表在主键中具有三列，则从属表在外键中必须具有相同的三列。

我不确定您是否可以在没有标记的情况下在 DB2 中定义这种关系`ServiceDate`并将其定义`FormNumber`为唯一键（在这种情况下，也没有理由`Type`在 PK 中也有），但您绝对不能在蓝图的 SQL Server 中定义它对于英孚。无论如何，EF 目前不支持唯一键来形成关系。

# php - MySql/PHP SUM 2表1查询

> ID：10261666
> 
> 赞同：1
> 
> 时间：2012-04-21T18:13:55.797
> 
> 标签：php, mysql, sum

我一直在遇到这个问题最困难的时候。我有 2 个表，它们的总列数要一起求和。它们都有相同的列，我使用两个表，一个是脚本生成的数据表，另一个是用户输入的数据，我们需要将它们分开。除了现在我们需要将它们相加（总计）。

**表格1**

```
 +-----------+-----+--------+------+
   | date      |t_id | t_port | total|
   +-----------+-----+--------+------+
   |2012-04-01 | 1271| 101    | 80.00|
   +-----------+-----+--------+------+ 
```

**表 2**

```
+----------+------+--------+-------+
| date     | t_id | t_port | total |
+----------+------+--------+-------+
|2012-04-20| 1271 | 101    | 120.00|
+----------+------+--------+-------+ 
```

总额应为 200.00 美元

这是我的查询

```
"SELECT SUM(cntTotal) as total FROM CBS_WO WHERE (date BETWEEN '$monthSecond' AND '$monthEnd') AND t_port = '$t_port' AND t_id = '$t_id' UNION SELECT SUM(cntTotal) as total FROM CNT_MODS WHERE (date BETWEEN '$monthSecond' AND '$monthEnd') AND t_port = '$t_port' AND t_id = '$t_id'" 
```

当我得到 2 行时，此查询似乎在 phpMyAdmin 中有效。（每个表 1 个），从逻辑上讲，我在 PHP 中使用了 WHILE 循环将两行添加在一起。手动回显每一行后，我发现我的第二行没有出现在循环中，但它出现在查询中？

无法弄清楚为什么会发生这种情况，我确信这很愚蠢，但我已经在这个代码中工作了 16 多个小时，需要一双新的眼睛。

PHP代码

```
function periodTotal()
{
    include('/sql.login.php');  

    $t_id                   = "1271";
    $t_port                 = "101";
    $date                   = date("Y-m-d");

    # FIND MONTH (DATE)
    $monthStart     = date("Y-m-d", strtotime(date('m').'/01/'.date('Y').' 00:00:00')); 
    $monthFirst     = date("Y-m-d", strtotime('-1 second',strtotime('+15 days',strtotime(date('m').'/01/'.date('Y').' 00:00:00'))));
    $monthSecond    = date("Y-m-d", strtotime('-1 second',strtotime('+16 days',strtotime(date('m').'/01/'.date('Y').' 00:00:00'))));
    $monthEnd       = date("Y-m-d", strtotime('-1 second',strtotime('+1 month',strtotime(date('m').'/01/'.date('Y').' 00:00:00'))));

    if ($date = $monthFirst) 
    {
        $sql = $dbh->prepare("SELECT SUM(cntTotal) as total FROM CBS_WO WHERE (date BETWEEN '$monthStart' AND '$monthFirst') AND t_port = '$t_port' AND t_id = '$t_id' UNION SELECT SUM(cntTotal) as total FROM CNT_MODS WHERE (date BETWEEN '$monthStart' AND '$monthFirst') AND t_port = '$t_port' AND t_id = '$t_id'");
        $sql->execute();
    } 
    else 
    {
        $sql = $dbh->prepare("SELECT SUM(cntTotal) as total FROM CBS_WO WHERE (date BETWEEN '$monthSecond' AND '$monthEnd') AND t_port = '$t_port' AND t_id = '$t_id' UNION SELECT SUM(cntTotal) as total FROM CNT_MODS WHERE (date BETWEEN '$monthSecond' AND '$monthEnd') AND t_port = '$t_port' AND t_id = '$t_id'");
        $sql->execute();
    }
        while($row = $sql->fetch(PDO::FETCH_ASSOC))
        {
            $total += $row['total'];
        }

    return $total;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:17:24.377

这对你有用吗？

```
SELECT SUM(`total`) as `total` FROM ((
    SELECT SUM(cntTotal) as total FROM CBS_WO
    WHERE (date BETWEEN '$monthSecond' AND '$monthEnd') AND t_port = '$t_port' AND t_id = '$t_id'
) UNION (
    SELECT SUM(cntTotal) as total FROM CNT_MODS
    WHERE (date BETWEEN '$monthSecond' AND '$monthEnd') AND t_port = '$t_port' AND t_id = '$t_id'"
)) as temp 
```

这可能更有效：

```
SELECT SUM(total) FROM (
    SELECT cntTotal FROM CBS_WO
    WHERE (date BETWEEN '$monthSecond' AND '$monthEnd') AND t_port = '$t_port' AND t_id = '$t_id'
) UNION (
    SELECT cntTotal FROM CNT_MODS
    WHERE (date BETWEEN '$monthSecond' AND '$monthEnd') AND t_port = '$t_port' AND t_id = '$t_id'"
) as temp 
```

（只有一个`SUM`）但你必须测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T19:11:56.923

```
It seems to be able to display your it in PHP......

=>   set the PDO error mode to exception

     $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->prepare(Run Sql Query here...........);

=>   exceute the query 

stmt->execute();

=>by setting the FETCH mode we can set

$result = $stmt->setFetchMode(PDO::FETCH_ASSOC);

=> The iterator will fetch the results for us.

 foreach(new TableRows(new RecursiveArrayIterator($stmt->fetchAll())) as $k=>$v) 
        { 
        echo $v; 
        } 
```

# java - 片段中的 TouchListView

> ID：10261667
> 
> 赞同：0
> 
> 时间：2012-04-21T18:13:59.383
> 
> 标签：java, android

我在我的应用程序中使用 TouchListView。将所有活动转换为片段后，我有一个问题：内部带有 touchlistview 的片段占我平板电脑屏幕的 50%。如果我拖动一行，则拖动的行正好在屏幕的中间。但这扭曲了另一个片段。我能做些什么来防止覆盖不同的片段？

提前感谢托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:21:07.753

发现我使用了较旧的 TouchListView 实现。

必须更新以下行

```
private void startDragging(Bitmap bm, int x, int y) { 
```

从

```
mWindowParams.gravity = Gravity.TOP; 
```

到

```
mWindowParams.gravity = Gravity.TOP|Gravity.LEFT; 
```

就是这样 ：-）

# java - Java - 密码的正则表达式

> ID：10261668
> 
> 赞同：1
> 
> 时间：2012-04-21T18:14:06.250
> 
> 标签：java, regex

如何构造一个正则表达式，使我正在制作的密码字段包含至少一个数字、至少一个小写字母和至少一个大写字母，其中顺序无关紧要，并且这些字符之间可以有任何内容？

我试过这个并且得到了类似`".*\\d.*[a-z].*[A-Z].*"` 的东西：但这要求数字在前，小写在后，大写在后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T18:24:20.817

实现这一目标的一种方法是

> 1) 首先使用单独的正则表达式检查是否存在小写字母，例如 regex-1。
> 
> 2）接下来使用另一个正则表达式检查它是否包含数字。
> 
> 3) 检查任何其他规则。

打破规则将解决您面临的问题，并改善您报告错误的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T18:34:43.167

你的不是正则表达式特别擅长的用例之一——如果你坚持使用正则表达式，我想你别无选择，只能列举 6 种情况：

```
.*[0-9].*[a-z].*[A-Z].*|.*[0-9].*[A-Z].*[a-z].*|.*[a-z] ... | ... 
```

使用实际的 java 代码检查会更容易（并且更具可读性）：

```
String  password = "";
boolean complies = password.matches(".*[0-9].*")
                && password.matches(".*[a-z].*")
                && password.matches(".*[A-Z].*"); 
```

或（更丑，但可能更快）：

```
boolean complies = false;
{
    boolean hasDigit     = false;
    boolean hasLowercase = false;
    boolean hasUppercase = false;
    for (int i = 0; i < password.length(); i++) {
        char c = password.charAt(i);
        hasDigit     |= '0' <= c && c <= '9';
        hasLowercase |= 'a' <= c && c <= 'z';
        hasUppercase |= 'A' <= c && c <= 'Z';
        if (hasDigit && hasLowercase && hasUppercase) {
            complies = true;
            break;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T18:16:52.347

正则表达式不适合像这样的复杂场景。在正则表达式中实现它的唯一方法是列出所有可能性：

```
(abc|acb|bac|bca|cab|cba) 
```

其中 a、b 和 c 是代表您的个人需求的子模式，例如`abc`will be `.*\\d.*[a-z].*[A-Z].*`、`bac`代表`[a-z].*.*\\d.*[A-Z].*`等。祝您好运，维护这样一个怪物。我的建议是为每个部分创建 java 常量：

```
private static final String DI = "\\d+";
private static final String LO = "[a-z]+";
private static final String UP = "[A-Z]+";
private static final String WI = ".*";
private static final String OR = "|";
private static final Pattern REGEX = Pattern .compile(
    WI + DI + WI + LO + WI + UP + WI + OR
  + WI + LO + WI + DI + WI + UP + WI + OR
  // etc
); 
```

# ios5 - 我可以在 UITableView 中自定义节标题吗？（字体，图像...）

> ID：10261669
> 
> 赞同：4
> 
> 时间：2012-04-21T18:14:23.550
> 
> 标签：ios5, uitableview

我可以在 UITableView 中自定义节标题吗？（字体，图像......）我想实现这样的目标：

![在此处输入图像描述](../Images/ee529a2e5767a45b484bcaac7d296965.png)

那可能吗？我已经得到了我想要的单元格，但不是节标题。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T18:54:56.137

您可以通过实现该方法为 tableView 的部分标题创建自定义视图`tableView:viewForHeaderInSection:`

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

    // create and return a custom UIView to use for the section here 

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T06:52:45.413

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

NSString *sectionName = nil;

switch (section) {
    case 0:
        sectionName = [NSString stringWithFormat:@"Header Text 1"];
        break;
    case 1:
        sectionName = [NSString stringWithFormat:@"Header Text 2"];
        break;
    case 2:
        sectionName = [NSString stringWithFormat:@"Header Text 3"];
        break;
    }

    UILabel *sectionHeader = [[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 40)] autorelease];
sectionHeader.backgroundColor = [UIColor clearColor];
sectionHeader.font = [UIFont boldSystemFontOfSize:18];
sectionHeader.textColor = [UIColor whiteColor];
    sectionHeader.text = sectionName;

return sectionHeader; 
```

}

# jquery - 不受支持的浏览器中的 CSS3 3d 转换

> ID：10261670
> 
> 赞同：0
> 
> 时间：2012-04-21T18:14:24.643
> 
> 标签：jquery, html, css

我想实现与此处类似的功能：http: [//demo.marcofolio.net/3d_animation_css3/](http://demo.marcofolio.net/3d_animation_css3/)。但我需要它在所有浏览器中工作。是否有任何 JQuery 插件可以在 Opera 等不受支持的浏览器中实现 3D 转换功能？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:21:10.910

尝试使用这个插件[http://transformjs.strobeapp.com/](http://transformjs.strobeapp.com/)。

编辑：上面的链接现在已经失效，请访问这个链接：[https ://github.com/sproutcore/TransformJS](https://github.com/sproutcore/TransformJS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:22:51.480

您可以使用 TransformJS 插件或 Sprite3D 插件，它们改进了所有主流浏览器对 3D 和 2D CSS 变换的支持：

[http://transformjs.strobeapp.com/](http://transformjs.strobeapp.com/)
[http://minimal.be/lab/Sprite3D/](http://minimal.be/lab/Sprite3D/)

# django - 如何为 manytomanyfield 设置默认值

> ID：10261671
> 
> 赞同：3
> 
> 时间：2012-04-21T18:14:25.580
> 
> 标签：django, django-models, django-forms, many-to-many

有没有办法解决“实例需要有一个主键值才能使用多对多关系”错误？

我有一个包含多个字段的模型，包括与另一个模型的多对多关系。当我创建模型的新实例时，我有一个函数可以在这些字段上设置默认值。我在处理 HTTP GET 时在视图中执行此操作。m2m 字段使用表单集呈现。

下面是一些描述这种情况的伪代码：

```
class MyRelatedModel(models.Model):
  name = models.CharField(max_length=100,blank=True)

class MyModel(models.Model):
  name = models.CharField(max_length=100,blank=True)
  relatedModels = models.ManyToManyField("MyRelatedModel")

  def initialize(self):
    self.name = "my default name"
    # this bit doesn't really matter...
    # just assume I am creating a new set of RelatedModels that I want to associate with my this new MyModel...
    newRelatedModels = []
    for name in ["related model 1", "related model 2", "related model 3"]:
      relatedModel = MyRelatedModel(name=name)
      relatedModel.save()
      newRelatedModels.append(relatedModel.id)
    self.relatedModels = newRelatedModels # this is invalid!

def MyView(request):
  if request.method == 'GET':
    model = MyModel()
    model.initialize()
    form = MyForm(instance=model)
  return render_to_response("my_template.html", {"form" : form}, context_instance=RequestContext(request)) 
```

有什么建议么？

我怀疑我可能需要在表单端而不是模型端处理这个问题，但这也让我感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T17:43:32.577

对于 1.3.1 中对我有用的表单：

与此类似，初始中的多对多

带有硬编码 ID：

```
def MyView(request):
    if request.method == 'GET':
        model   = MyModel( name = "my default name")
        initial = { 'relatedModels': [1,] } # assuming you knew the id and wanted to hardcode it
        form = MyForm( instance=model, initial=initial )
        return render_to_response("my_template.html", {"form" : form}, context_instance=RequestContext(request)) 
```

使用查询按名称填充：

```
def MyView(request):
    if request.method == 'GET':
        model   = MyModel( name = "my default name")
        initial = { 'relatedModels':  [ o.pk for o in list(MyRelatedModel.objects.filter( name__in=("related model 1", "related model 2", "related model 3")))], } 
        form = MyForm( instance=model, initial=initial )
        return render_to_response("my_template.html", {"form" : form}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:20:34.060

```
for name in ["related model 1", "related model 2", "related model 3"]:
    relatedModel = MyRelatedModel(name=name)
    relatedModel.save()
    self.relatedModels.add(relatedModel) 
```

或者：

```
newRelatedModels = []
for name in ["related model 1", "related model 2", "related model 3"]:
    relatedModel = MyRelatedModel(name=name)
    relatedModel.save()
    newRelatedModels.append(relatedModel)
self.relatedModels.add(*newRelatedModels) 
```

这也应该有效：

```
self.relatedModels = newRelatedModels 
```

# c++ - 为什么 char 数组必须以空字符结尾？

> ID：10261672
> 
> 赞同：5
> 
> 时间：2012-04-21T18:14:53.100
> 
> 标签：c++, c, arrays, char, null-terminated

为什么 char`array`必须以空字符结尾？有什么理由我必须将空字符添加到每个`char`数组？

似乎他们得到了同样的待遇。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T18:20:38.600

char 数组不必以 null 结尾（不依赖于此的标准库函数包括`memcpy`, `memmove`, `strncpy`-- 错误地命名为最新的 --`printf`具有正确的格式字符串）。

根据定义，NUL 终止字符串 (NTCS) 需要由 NUL 终止。它是 C 标准库的字符串处理实用程序所期望的格式，也是大多数 C 程序使用的约定（在 C++ 中，通常使用`std::string`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T18:18:44.147

在 C 中，如果您有一个指向数组的指针，那么就无法确定该数组的长度。正如@AProgrammer 所指出的那样，设计人员本可以将其保留在那里并迫使程序员跟踪所有字符数组的长度。但是，这会使 C 中的文本处理变得比现在更加困难。

因此，语言设计者确定了一个约定，允许通过指示字符串结尾的空字符的存在来推断字符串长度。

例如，考虑`strcpy`：

```
char *strcpy(char *destination, const char *source); 
```

在 C 中没有办法确定指针`destination`和`source`指向的数组的长度。因此，如果不存在指示字符串结尾的标记值，则唯一的其他解决方案是传递指示`source`字符串长度的额外参数。

当然，鉴于现代安全考虑，已经引入了接收缓冲区长度参数的字符串处理函数。但是在发明空终止字符串时，计算环境看起来非常不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T18:34:47.783

仅当您想将其用作字符串时。然后所有 C/C++ 字符串函数将在最后搜索空字符，如果它不存在，它们将继续搜索，迟早你的应用程序会崩溃。

如果您只打算将数组字符用作字符数组，而不是将它们称为字符串，那么没问题。它就像一个整数数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T18:18:23.457

一般来说，没有理由这样做，但您必须知道，根据定义，每个字符串都是一个`char`带有空终止符的数组。如果您的`char`数组表示一个字符串，那么如果您省略空终止符，则每个使用 C 字符串的函数都不会返回正确的值，或者行为与预期不同。

但是`char`是`int`, `float`or之类的类型`double`，因此您可以随意创建`char`数组，而不需要它们以空值结尾。

# c# - 实体框架 - 在同一列中按多个条件选择 - 多对多

> ID：10261674
> 
> 赞同：5
> 
> 时间：2012-04-21T18:15:17.580
> 
> 标签：c#, entity-framework, select, linq-to-entities, many-to-many

我在这里问了非常相似的问题
[Entity framework - select by multiple conditions in same column - referenced table](https://stackoverflow.com/questions/10250102/entity-framework-select-by-multiple-conditions-in-same-column-referenced-tab)

现在关系是多对多。所以我有 3 个表：order、items 和 orderItem（items 是一个 Junction 表）。我想选择至少一个 orderItem 价格为 100 和至少一个 orderItem 价格为 200 的所有订单

我真的不知道如何针对这种情况进行编辑。

```
var orders = from o in kontextdbs.orders
             select o;
foreach(int value in values)
{    
      int tmpValue = value;
      orders = orders.Where(x => kontextdbs.order_item.Where(oi => x.id == oi.order_id)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:22:30.263

这是修改后的版本

```
foreach(int value in values)
{    
      int tmpValue = value;
      orders = orders.Where(x => (from oi in kontextdbs.order_item
                                 join i in kontextdbs.items on oi.item_id equals i.id
                                 where x.id == oi.order_id
                                 select i).Any(y => y.price == tmpValue));    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:21:21.050

首先，您可以声明：

```
var orders = kontextdbs.orders; 
```

无需使用实际的 select 语句。

要回答您的实际问题，您应该能够这样做：

```
foreach(int value in values)
{
    var temp = value;

    orders = orders.Where(o => o.order_item.Any(oi => oi.price == temp));
} 
```

这假设您有一个导航属性 from `order`to `order_item`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T18:27:34.357

由于您没有导航属性而更新（您应该修复它。）

如果要选择价格为 100 或 200 的订单，可以使用以下命令：

```
var qMyOrders = 
from a in kontextdbs.orders
join b in kontextdbs.order_items on a.id equals b.order_id
where values.Contains(b.price)
select a; 
```

如果您需要查找其订单项目与数组中所有价格匹配的订单，例如 100 和 200，请使用以下命令：

```
var qMyOrders = 
from a in kontextdbs.orders
from b in kontextdbs.order_items.Where( c => c.order_id == a.id )
where values.All(d => b.price == d)
select a; 
```

# java - 泽西客户端依赖项

> ID：10261676
> 
> 赞同：5
> 
> 时间：2012-04-21T18:15:51.117
> 
> 标签：java, classpath, jersey

根据[文档](http://jersey.java.net/nonav/documentation/latest/user-guide.html#chapter_deps)，我对泽西岛客户所需要的只是`jersey-bundle.jar`. 但是简单的代码，构建请求并发送它会引发异常。

```
java.lang.ClassNotFoundException: javax.ws.rs.ext.Providers 
```

添加`jsr311-api-1.0.jar`到类路径后。我还有一个例外。

```
java.lang.NoClassDefFoundError: javax/ws/rs/core/Response$StatusType 
```

我可以在哪里找到 Jersey 的完整依赖项列表。应该包括什么罐子。顺便说一句，我不能使用 Maven、Ivy 等。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T18:28:20.683

尝试搜索 mvnrepository.com

查找您正在寻找的包，选择一个版本，它会向您显示工件所依赖的所有内容。

对于球衣捆绑： http: [//mvnrepository.com/artifact/com.sun.jersey/jersey-bundle/1.13-b01](http://mvnrepository.com/artifact/com.sun.jersey/jersey-bundle/1.13-b01)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T20:58:04.970

对我来说，这意味着“您正在使用 jersey-client 1.19，但随后手动调用 jsr311-api-1.0”（显然，jersey 客户端版本 [1.19] 实际上需要/想要 jsr311-api-1.1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-21T14:46:03.193

更好的方法是从[MavenLink](http://mvnrepository.com/artifact/com.sun.jersey/jersey-bundle/1.13-b01)为 Jersey 客户端添加**捆绑包**，从文件行中选择 jar/pom，而不是添加独立/单独的 jar 文件。如果你通过添加单独的 jar 来这样做，你会得到另一个/不同的错误。更好的方法是添加捆绑包（Jersy 客户端的依赖 jar 组）。

# objective-c - 如何将 " 放入 NSString？

> ID：10261678
> 
> 赞同：0
> 
> 时间：2012-04-21T18:15:56.653
> 
> 标签：objective-c, ios, cocoa-touch, nsstring

我想在 NSString 中有 src=" 字符。

但我做不到，因为 " 是 Objective C 的一部分。

我想做这样的事情：

```
NSString * name = [ [NSString alloc] initWithString: @" src=" " ]; 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T18:18:11.803

```
NSString * name = [ [NSString alloc] initWithString: @" src=\" " ]; 
```

# android - Android 微调器数组

> ID：10261679
> 
> 赞同：0
> 
> 时间：2012-04-21T18:16:05.970
> 
> 标签：android, arrays, android-spinner

我创建了一个 Spinner，并为我的应用程序填充了值，这将计算出饮料中的酒精单位。

旋转器容纳不同类型的饮料品脱、半品脱、瓶子和罐头。

酒精单位是通过将旋转器中的饮料量乘以饮料量乘以酒精百分比超过 1000 来计算的。

我想要发生的是，当用户从微调器中选择一些值（例如品脱）时，它会将一品脱的体积添加到方程中。

这是我的微调器代码

```
int pint,half,bottle,can;
Spinner beerspinner;
Spinner spinner = (Spinner) findViewById(R.id.beerspinner);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
this, R.array.drinks_array, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

我想以某种方式将微调器中的值与整数匹配，以便我可以执行方程式。

```
pint = 568;
half = 284;
bottle = 275;
can = 440; 
```

我还没有很好地解释它这里是我的完整代码，所以你可以更好地了解我想要做什么。

```
public class AppTestActivity extends Activity {
int pint,half,bottle,can;
Spinner beerspinner;
Button submit, reset;
EditText ABV,quantity;
TextView units, error;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

ABV = (EditText) findViewById(R.id.ABV);
submit = (Button) findViewById(R.id.submit);
reset = (Button) findViewById(R.id.reset);
units = (TextView) findViewById(R.id.units);
error = (TextView) findViewById(R.id.error);
quantity= (EditText) findViewById(R.id.quantity);

Spinner spinner = (Spinner) findViewById(R.id.beerspinner);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
this, R.array.drinks_array, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter);

submit.setOnClickListener(new clicker());
 }
class clicker implements Button.OnClickListener{

public void onClick(View v){

pint = 568;
half = 284;
bottle = 275;
can = 440;

String number,percentage;
Float calc; 

percentage = ABV.getText().toString();
number = quantity.getText().toString(); 
calc = Float.parseFloat(number)*Float.parseFloat(percentage)/1000;
units.setText(calc.toString());
} 
```

目前，代码将饮料的数量乘以酒精百分比，然后除以 1000，我需要它来将微调器中的饮料类型添加到方程中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T19:51:40.790

Crate an int in your activity.

```
int drinkType; 
```

Use setOnItemSelected listener for the spinner:

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener()
{
      public void on ItemSlected(...)
          int selectedIndex=spinner.getSelectedItenPosition();

          if(selectedIndex==0) //pint for example
                drinkType = 568;
          //do this for other drink types
} 
```

And in your code above you can do

```
calc = Float.parseFloat(number)*Float.parseFloat(percentage)/1000+ drinkType; 
```

# iphone - 故事板标签栏控制器视图方向横向/纵向

> ID：10261680
> 
> 赞同：0
> 
> 时间：2012-04-21T18:16:06.063
> 
> 标签：iphone, objective-c, ios5, storyboard, landscape-portrait

我希望我的标签栏应用程序在横向模式下具有三个标签，但第三个标签必须是纵向的。我最终将整个应用程序转换为横向使用

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

在每个视图控制器中，作为选项卡栏应用程序都要求其所有子视图控制器都处于横向状态。

我的 .plist 文件首先具有横向选项，然后添加纵向。

如何使第三个选项卡旋转为纵向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T19:52:12.817

The UITabBarController, sadly, doesn't handle view controllers with different rotation requirements very well. The best way to handle this is to subclass UITabBarController and in shouldAutorotate, simply pass the request on to the view controller that is on screen. The code would look like this:

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Let's grab an array of all of the child view controllers of this tab bar controller
NSArray *childVCArray = self.viewControllers;

// We know that at 5 or more tabs, we get a "More" tab for free, which contains, assumingly,
// a more navigation controller

if (self.selectedIndex <= 3) {
    UINavigationController *navController = [childVCArray objectAtIndex:self.selectedIndex];

    // We're in one of the first four tabs, which we know have a top view controller of UIViewController
    UIViewController *viewController = navController.topViewController;

    return [viewController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}
else {
    // This will give us a More Navigation Controller

    UIViewController *viewController = [childVCArray objectAtIndex:self.selectedIndex];

    return [viewController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

return NO;
} 
```

This assumes that you're 5+ view controllers use the tab bar's more navigation controller and are not themselves in their own uinavigationcontroller. If they were, altering this code to fit would be trivial.

I have posted this subclass up on my github, so you can copy this method or just grab the .h/.m files from [here](https://github.com/jmstone617/PickyTabBarController)

# ruby-on-rails - 包括“redirect_to”方法的测试失败，但应用程序工作正常。Michael Hartl 书的第 9.2.2 章 (v 3.2)

> ID：10261681
> 
> 赞同：2
> 
> 时间：2012-04-21T18:16:24.720
> 
> 标签：ruby-on-rails, rspec, capybara, railstutorial.org

当未登录用户尝试访问用户控制器的编辑或更新操作时，应用程序应重定向（例如，登录页面或 root_path）。应用程序工作正常，但对此的测试失败并出现以下错误：

```
Failure/Error: specify { response.should redirect_to(signin_path) }
Expected response to be a redirect to <http://www.example.com/signin> but was a redirect to <https://www.example.com/users/468>
# ./spec/requests/authentication_pages_spec.rb:69:in `block (6 levels) in <top (required)>' 
```

这里可能有什么问题？如何调试它？

所有代码都在这里：[https](https://github.com/tomek-rusilko/miniatury_katalog_2) ://github.com/tomek-rusilko/miniatury_katalog_2 失败的测试在这里：[https](https://github.com/tomek-rusilko/miniatury_katalog_2/blob/master/spec/requests/authentication_pages_spec.rb) ://github.com/tomek-rusilko/miniatury_katalog_2/blob/master/spec/requests/authentication_pages_spec.rb （行：63 和 105）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:50:28.773

终于有时间重温这个了。我从 github 中提取了您的代码并遇到了同样的问题。我将测试缩减为：

```
require 'spec_helper'

describe "A non-signed_in user directly issuing PUT to the update action" do
  before { put user_path(7) }
  specify { response.should redirect_to(signin_path) }          
end 
```

正如您所指出的，控制器代码中的 binding.pry 并没有像我想象的那样停止执行。经过大量无用的挖掘/谷歌搜索，终于在 log/test.log 中注意到：

```
Started PUT "/users/7" for 127.0.0.1 at 2012-05-23 16:17:31 -0400
Processing by UsersController#update as HTML
  Parameters: {"id"=>"7"}
Redirected to https://www.example.com/users/7
Filter chain halted as #<Proc:0x00000102201608@/Users/eric_mccullough/ruby/railstutorial/tomek-rusilko-miniatury_katalog_2-e73d795/vendor/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/force_ssl.rb:28> rendered or redirected
Completed 301 Moved Permanently in 1ms (ActiveRecord: 0.0ms)
   (0.1ms)  rollback transaction
   (0.1ms)  begin transaction 
```

它试图使用 SSL。我的 Rails 教程版本仅在生产中使用 SSL。我从 application_controller.rb 中删除了“force_ssl”，然后所有测试都通过了。我还是 Rails 的新手，甚至没有意识到有日志，但我现在知道了！

# java - 标题列旁边的空格

> ID：10261682
> 
> 赞同：1
> 
> 时间：2012-04-21T18:16:32.050
> 
> 标签：java, swing, jtable

我在用：

```
table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF); 
```

当我的表列标题的最后一个结束时，直到表的末尾有一个难看的空白。那是因为我的表格背景设置为黑色。我怎样才能摆脱空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:30:09.673

如果我正确理解了您的问题，我相信它与 Santhosh Kumar 在这里描述和解决的问题相似：[JTable 变得更丑了 AUTO_RESIZE_OFF](http://www.jroller.com/santhosh/entry/jtable_becomes_uglier_with_auto)

# file - 如何限制某些文件直接从 url 打开/如何保护“包含”文件

> ID：10261683
> 
> 赞同：0
> 
> 时间：2012-04-21T18:16:36.157
> 
> 标签：file, include, block, restrict

我有各种文件，它们按行包含在一个 php 页面中：include'blahblah.php';

我无法弄清楚如何阻止从地址栏直接访问这些文件！

例如：

查看我的源代码后的任何人都可以尝试通过在地址栏中键入来打开文件“blahblah.php”：[http ://www.mydomain.com/mydir/blahblah.php](http://www.mydomain.com/mydir/blahblah.php)

我如何限制人们这样做？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:20:51.050

执行此操作的经典方法是使用定义和定义函数，在主页中您可以执行一些操作

```
define('pagescope', 'true'); 
```

然后在包含的

```
if (!defined('pagescope')) die('nooooooo you cant'); 
```

# ruby-on-rails - 带有 Rails、Mongoid 和 Devise 的嵌入式表单

> ID：10261688
> 
> 赞同：0
> 
> 时间：2012-04-21T18:17:12.853
> 
> 标签：ruby-on-rails, devise, mongoid

我有一个设计模型，其中嵌入了许多其他模型，称为 has_skills 和desireds_skills。attr-accessibles 已就位，但我仍然收到警告：无法批量分配受保护的属性：my_skills_attributes，wanted_skills_attributes 错误消息。下面是我的模型。想法？

```
class User
  include Mongoid::Document

  embeds_many :wanted_skills
  embeds_many :my_skills
  accepts_nested_attributes_for :my_skills, allow_destroy: true
  accepts_nested_attributes_for :wanted_skills, allow_destroy: true

    .........
  attr_accessible :first_name, :last_name, :email, :password, :password_confirmation,     :remember_me,  :location, :my_skills, :wanted_skills, :name, :sname 
```

我的技能模型

```
class MySkill
  include Mongoid::Document
  embedded_in :user
  field :name

  attr_accessible  :name
end 
```

我的技能模型

```
class WantedSkill
 include Mongoid::Document
 embedded_in :user
 field :sname
 attr_accessible  :sname 
```

结尾

最后是我的表格

```
<%= simple_nested_form_for @user do |f| %>

<%= f.fields_for :my_skills do |task| %>
<%= task.label :name %><br />
<%= task.text_field :name %><br />
<%= task.link_to_remove "Remove this task" %>
<% end %>
<p><%= f.link_to_add "Add a task", :my_skills %></p>

<%= f.fields_for :wanted_skills do |task| %>
<%= task.label :sname %><br />
<%= task.text_field :sname %><br />
<%= task.link_to_remove "Remove this task" %>
<% end %>
<p><%= f.link_to_add "Add a task", :wanted_skills %></p>
  <div><%= f.submit "Sign up" %></div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:22:06.237

要使嵌套属性起作用，您需要允许`my_skills_attributes`而不是`my_skills`. 就这样。

```
attr_accessible :my_skills_attributes 
```

# assembly - MIPS 从寄存器中获取内存地址

> ID：10261695
> 
> 赞同：1
> 
> 时间：2012-04-21T18:18:30.713
> 
> 标签：assembly, mips

想象一下，我在 C 中有一个函数，它有 5 个参数。

```
sum(n1,n2,n3,n4,n5); 
```

在组装中。我从寄存器 4 到 7 中获取前四个参数，最后一个参数如下：

```
 lw $8, 16($29) 
```

**第一个问题**

如果`lw $8, 16($29)`将 n5 放入寄存器 $8，为什么不这样做

```
lw      $9, 0($29)
lw      $10, 4($29)
lw      $11, 8($29)
lw      $12, 12($29) 
```

将 n1 到 n4 放入寄存器 $9 到 $12？

**第二个问题**

由于 in 中的参数`sum(n1,n2,n3,n4,n5);`存储在内存和程序集中的某个位置，因此第一个参数是`$4`如何获取`$4`to的内存地址`$7`？

如果我这样做：

```
 .data
array:  .word 3,4,2,6,12,7,18,26,2,14,19,7,8,12,13
    .text
main:
    li  $8,1
    la  $9,array 
```

最后一条指令将我的数组的地址位置放在`$9`. 如果我做

```
main:
    li  $4,1
    la  $9,0($4) 
```

on 的值`$9`仍然是 1 而不是地址`$4`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T18:46:55.143

**第一个问题**

要回答这个问题，您需要了解通常如何处理参数传递。参数传递有一些[约定](http://pages.cs.wisc.edu/~cs354-2/beyond354/conventions.html)。前四个参数始终通过寄存器 $4 到 $7传递，*其余*参数通过堆栈传递。如果堆栈中的前四个参数已经由寄存器传递，那么传递堆栈上的前四个参数是没有意义的，对吧？所以它只会将前四个之后剩下的东西推入堆栈。

**第二个问题**

[寄存器](http://en.wikipedia.org/wiki/Processor_register)和内存是有区别的。*CPU 寄存器没有映射到任何内存地址。*它们是与 RAM、ROM 等其他部分分开的特殊内存“片段”。它们比 RAM 或 ROM 中的内存快得多，因此有 MIPS 指令**直接在它们上**操作，而不是间接操作通过内存地址。

仔细想想你在做什么：

```
main:
    li  $4,1
    la  $9,0($4) 
```

第一条指令在做什么？它将值 1 加载到寄存器 4 中。

第二条指令在做什么？它将寄存器 4 中的*值*视为标签（或地址），将其加 0，并将结果存储在寄存器 9 中。所以当然寄存器 9 最终的值为 1。

在 MIPS 和几乎所有架构中，没有寻址寄存器的概念。您**直接**对它们进行操作。

**编辑**： 我应该区分[处理器寄存器](http://en.wikipedia.org/wiki/Processor_register)和[硬件寄存器](http://en.wikipedia.org/wiki/Hardware_register)。当然，我指的是处理器寄存器。硬件寄存器（在 CPU 之外）是一个稍微不同的概念，它们明确地*是*可寻址的。但是，我认为这超出了 Favolas 所要求的范围。

# android - 在 Android 应用程序中解析 RSS 提要

> ID：10261696
> 
> 赞同：2
> 
> 时间：2012-04-21T18:18:32.817
> 
> 标签：android, rss

我正在尝试从 RSS 提要中检索数据。我的程序运行良好，但有一个例外。提要的项目结构如下：

```
<title></title>
<link></link>
<description></description> 
```

我可以检索数据，但是当标题包含“&”字符时，返回的字符串会停在之前的字符处。例如，这个标题：

```
<title>A&amp;T To Play Four Against Bears</title> 
```

我只得到一个'A'，当我期望得到'A&T To Play Four Against Bears'时。

谁能告诉我是否可以修改我现有的 RSSReader 类以解决 & 的存在：

```
import android.util.Log; 
```

导入 java.net.URL；导入 java.util.ArrayList；导入 javax.xml.parsers.DocumentBuilder；导入 javax.xml.parsers.DocumentBuilderFactory；导入 org.w3c.dom.CharacterData；导入 org.w3c.dom.Document；导入 org.w3c.dom.Element；导入 org.w3c.dom.Node；导入 org.w3c.dom.NodeList；

公共类 RSSReader {

```
private static RSSReader instance = null;

private RSSReader() {
}

public static RSSReader getInstance() {
    if (instance == null) {
        instance = new RSSReader();
    }
    return instance;
}

public ArrayList<Story> getStories(String address) {
    ArrayList<Story> stories = new ArrayList<Story>();
    try {
        DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        URL u = new URL(address);
        Document doc = builder.parse(u.openStream());
        NodeList nodes = doc.getElementsByTagName("item");
        for (int i = 0; i < nodes.getLength(); i++) {
            Element element = (Element) nodes.item(i);
            Story currentStory = new Story(getElementValue(element, "title"),
                    getElementValue(element, "description"),
                    getElementValue(element, "link"),
                    getElementValue(element, "pubDate"));
            stories.add(currentStory);
        }//for
    }//try
    catch (Exception ex) {
        if (ex instanceof java.net.ConnectException) {
        }
    }
    return stories;
}

private String getCharacterDataFromElement(Element e) {
    try {
        Node child = e.getFirstChild();
        if (child instanceof CharacterData) {
            CharacterData cd = (CharacterData) child;
            return cd.getData();
        }
    } catch (Exception ex) {
        Log.i("myTag2", ex.toString());
    }
    return "";
} //private String getCharacterDataFromElement

protected float getFloat(String value) {
    if (value != null && !value.equals("")) {
        return Float.parseFloat(value);
    } else {
        return 0;
    }
}

protected String getElementValue(Element parent, String label) {
    return getCharacterDataFromElement((Element) parent.getElementsByTagName(label).item(0));
} 
```

}

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:45:11.410

我用我使用的解析器测试了 rss 提要，它的解析如下所示。似乎它是可解析的，但正如我在评论中所写的那样，由于 CDATA 被使用并且也被转义，所以有像“A&T”这样的文本，但你可以在解析 xml 后替换它们。

```
D/*** TITLE      : A&T To Play Four Against Longwood
D/*** DESCRIPTION: A&amp;T baseball takes a break from conference play this weekend.
D/*** TITLE      : Wilkerson Named MEAC Rookie of the Week
D/*** DESCRIPTION: Wilkerson was 6-for-14 for the week of April 9-15.
D/*** TITLE      : Lights, Camera, Action
D/*** DESCRIPTION: A&amp;T baseball set to play nationally televised game on ESPNU.
D/*** TITLE      : Resilient Aggies Fall To USC Upstate
D/*** DESCRIPTION: Luke Tendler extends his hitting streak to 10 games.
D/*** TITLE      : NCCU Defeats A&T In Key Conference Matchup
D/*** DESCRIPTION: Kelvin Freeman leads the Aggies with three hits. 
```

我正在分享我用来比较与你的不同之处的大部分 rss 提要解析器。

**XmlPullFeedParser.java**

```
package com.nesim.test.rssparser;

import java.util.ArrayList;
import java.util.List;

import org.xmlpull.v1.XmlPullParser;

import android.util.Log;
import android.util.Xml;

public class XmlPullFeedParser extends BaseFeedParser {

  public XmlPullFeedParser(String feedUrl) {
    super(feedUrl);
  }

  public List<Message> parse() {
    List<Message> messages = null;
    XmlPullParser parser = Xml.newPullParser();
    try {
      // auto-detect the encoding from the stream
      parser.setInput(this.getInputStream(), null);
      int eventType = parser.getEventType();
      Message currentMessage = null;
      boolean done = false;
      while (eventType != XmlPullParser.END_DOCUMENT && !done){
        String name = null;
        switch (eventType){
          case XmlPullParser.START_DOCUMENT:
            messages = new ArrayList<Message>();
            break;
          case XmlPullParser.START_TAG:
            name = parser.getName();
            if (name.equalsIgnoreCase(ITEM)){
              currentMessage = new Message();
            } else if (currentMessage != null){
              if (name.equalsIgnoreCase(LINK)){
                currentMessage.setLink(parser.nextText());
              } else if (name.equalsIgnoreCase(DESCRIPTION)){
                currentMessage.setDescription(parser.nextText());
              } else if (name.equalsIgnoreCase(PUB_DATE)){
                currentMessage.setDate(parser.nextText());
              } else if (name.equalsIgnoreCase(TITLE)){
                currentMessage.setTitle(parser.nextText());
              } else if (name.equalsIgnoreCase(DATES)){
                currentMessage.setDates(parser.nextText());
              } 
            }
            break;
          case XmlPullParser.END_TAG:
            name = parser.getName();
            if (name.equalsIgnoreCase(ITEM) && currentMessage != null){
              messages.add(currentMessage);
            } else if (name.equalsIgnoreCase(CHANNEL)){
              done = true;
            }
            break;
        }
        eventType = parser.next();
      }
    } catch (Exception e) {
      Log.e("AndroidNews::PullFeedParser", e.getMessage(), e);
      throw new RuntimeException(e);
    }
    return messages;
  }
} 
```

**BaseFeedParser.java**

```
package com.nesim.test.rssparser;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;

public abstract class BaseFeedParser implements FeedParser {

  // names of the XML tags
  static final String CHANNEL = "channel";
  static final String PUB_DATE = "pubDate";
  static final  String DESCRIPTION = "description";
  static final  String LINK = "link";
  static final  String TITLE = "title";
  static final  String ITEM = "item";
  static final  String DATES = "dates";
  private final URL feedUrl;

  protected BaseFeedParser(String feedUrl){
    try {
      this.feedUrl = new URL(feedUrl);
    } catch (MalformedURLException e) {
      throw new RuntimeException(e);
    }
  }

  protected InputStream getInputStream() {
    try {
      return feedUrl.openConnection().getInputStream();
    } catch (IOException e) {
      throw new RuntimeException(e);
    }
  }
} 
```

**FeedParser.java**

```
package com.nesim.test.rssparser;

import java.util.List;

public interface FeedParser {
  List<Message> parse();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:22:40.777

似乎您没有按照我提供的那样更改代码。如果您坚持要这样解析，则需要先获取 xml 并对其进行操作以进行正确解析。我还在此消息末尾提供了一个类以获取 xml 作为文本。请像这样更改您的代码，尝试编写结果。

如果您更改此行，您将成功。

**从 getStories 函数中删除此行：**

```
DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
URL u = new URL(address);
Document doc = builder.parse(u.openStream()); 
```

**而不是那些删除的行，添加这些：**

```
WebRequest response = new WebRequest("http://www.ncataggies.com/rss.dbml?db_oem_id=24500&RSS_SPORT_ID=74515&media=news",PostType.GET);
String htmltext = response.Get();

int firtItemIndex = htmltext.indexOf("<item>");
String htmltextHeader = htmltext.substring(0,firtItemIndex);
String htmltextBody = htmltext.substring(firtItemIndex);

htmltextBody = htmltextBody.replace("<title>", "<title><![CDATA[ ");
htmltextBody = htmltextBody.replace("</title>", "]]></title>");

htmltextBody = htmltextBody.replace("<link>", "<link><![CDATA[ ");
htmltextBody = htmltextBody.replace("</link>", "]]></link>");

htmltextBody = htmltextBody.replace("<guid>", "<guid><![CDATA[ ");
htmltextBody = htmltextBody.replace("</guid>", "]]></guid>");
htmltextBody = htmltextBody.replace("&amp;", "&");
htmltext = htmltextHeader + htmltextBody;

Document doc = XMLfunctions.XMLfromString(htmltext); 
```

**WebRequest.java**

```
package com.nesim.test;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.UnknownHostException;
import java.nio.charset.Charset;

import org.apache.http.HttpResponse;
import org.apache.http.client.CookieStore;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.protocol.ClientContext;
import org.apache.http.impl.client.BasicCookieStore;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;

public class WebRequest {
  public enum PostType{
    GET, POST;
  }

  public String _url;
  public String response = "";
  public PostType _postType;
  CookieStore _cookieStore = new BasicCookieStore();

  public WebRequest(String url) {
    _url = url;
    _postType = PostType.POST;
  }

  public WebRequest(String url, CookieStore cookieStore) {
    _url = url;
    _cookieStore = cookieStore;
    _postType = PostType.POST;
  }

  public WebRequest(String url, PostType postType) {
    _url = url;
    _postType = postType;
  }

  public String Get() {
    HttpClient httpclient = new DefaultHttpClient();

    try {

      // Create local HTTP context
      HttpContext localContext = new BasicHttpContext();

      // Bind custom cookie store to the local context
      localContext.setAttribute(ClientContext.COOKIE_STORE, _cookieStore);

      HttpResponse httpresponse;
      if (_postType == PostType.POST)
      {
        HttpPost httppost = new HttpPost(_url);
        httpresponse = httpclient.execute(httppost, localContext);
      }
      else
      {
        HttpGet httpget = new HttpGet(_url);
        httpresponse = httpclient.execute(httpget, localContext);
      }

      StringBuilder responseString = inputStreamToString(httpresponse.getEntity().getContent());

      response = responseString.toString();
    }
    catch (UnknownHostException e) {
      e.printStackTrace();
    }
    catch (Exception e) {
      e.printStackTrace();
    }
    finally {
      // When HttpClient instance is no longer needed,
      // shut down the connection manager to ensure
      // immediate deallocation of all system resources
      httpclient.getConnectionManager().shutdown();
    }

    return response;
  }

  private StringBuilder inputStreamToString(InputStream is) throws IOException {
    String line = "";
    StringBuilder total = new StringBuilder();

    // Wrap a BufferedReader around the InputStream
    BufferedReader rd = new BufferedReader(new InputStreamReader(is,Charset.forName("iso-8859-9")));
    // Read response until the end
    while ((line = rd.readLine()) != null) {
      total.append(line);
    }

    // Return full string
    return total;
  }
} 
```

**重要的：**

不要忘记在 WebRequest.java 的第一行更改包名称

*包 com.nesim.test；*

**结果：**

**进行这些更改后，您将获得以下内容：**

```
D/title:  Two Walk-Off Moments Lead To Two A&T Losses
D/description: The Lancers win in their last at-bat in both games of Saturday&#39;s doubleheader.
D/title:  A&T To Play Four Against Longwood
D/description: A&T baseball takes a break from conference play this weekend.
D/title:  Wilkerson Named MEAC Rookie of the Week
D/description: Wilkerson was 6-for-14 for the week of April 9-15.
D/title:  Lights, Camera, Action
D/description: A&T baseball set to play nationally televised game on ESPNU.
D/title:  Resilient Aggies Fall To USC Upstate
D/description: Luke Tendler extends his hitting streak to 10 games. 
```

**您的解析返回这些：**

```
D/title  : Two Walk-Off Moments Lead To Two A
D/description: The Lancers win in their last at-bat in both games of Saturday&#39;s doubleheader.
D/title  : A
D/description: A&amp;T baseball takes a break from conference play thisweekend.
D/title  : Wilkerson Named MEAC Rookie of the Week
D/description: Wilkerson was 6-for-14 for the week of April 9-15.
D/title  : Lights, Camera, Action
D/description: A&amp;T baseball set to play nationally televised game on ESPNU.
D/title  : Resilient Aggies Fall To USC Upstate
D/description: Luke Tendler extends his hitting streak to 10 games. 
```

# ruby-on-rails - 如何检测型号名称

> ID：10261703
> 
> 赞同：0
> 
> 时间：2012-04-21T18:19:59.773
> 
> 标签：ruby-on-rails, devise

我有带有**设计**gem 的 rails 应用程序。如何在 Rails 应用程序中检测设计的型号名称？

我想做一颗宝石，我需要知道使用设计的模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:36:14.240

```
Devise.default_scope # => :user 
```

在带有设计 1.5.3 的 rails 控制台中为我工作。设计也提供了`default_scope=`方法，但你应该小心使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:25:20.957

您可以定义您希望设计用于哪个模型。当你这样做时：

```
rails generate devise MODEL 
```

为您想要设计的任何模型更改模型。例如，您可以这样做：

```
rails generate devise User 
```

这将在**User**模型中创建必要的属性，如果 User 模型不存在，它将被创建。

请注意，在此之后，您必须运行`rake db:migrate`将设计迁移应用到现有数据库。

换句话说，不要指望 devise 会定义像“devise”这样的模型，但您必须定义要使用 devise 的模型。

**编辑**：

如果您想查找已经“使用”设计的模型，您可以在模型中查找这种声明：

```
devise :database_authenticatable, :registerable,... 
```

# android - 有谁知道现在如何注册 Google Backup API 密钥？

> ID：10261704
> 
> 赞同：3
> 
> 时间：2012-04-21T18:20:12.757
> 
> 标签：android, backup, api-key

注册 Google Backup API 密钥的 URL 不再有效。

(http://code.google.com/android/backup/signup.html) - 我被重定向到我的开发者控制台。

现在有谁知道如何为新的 API 密钥注册应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:23:09.973

它现在位于[https://developers.google.com/android/backup/signup](https://developers.google.com/android/backup/signup)

在这些文档中找到：

[https://developer.android.com/guide/topics/data/backup.html#BackupKey](https://developer.android.com/guide/topics/data/backup.html#BackupKey)

奇怪的是，[http](http://code.google.com/android/backup/signup.html) ://code.google.com/android/backup/signup.html应该将您重定向到[https://developers.google.com/android/backup/signup](https://developers.google.com/android/backup/signup)页面。我不确定您对此有何看法。

**编辑：**根据您的评论，报告了一个错误：[https ://code.google.com/p/android/issues/detail?id=26936](https://code.google.com/p/android/issues/detail?id=26936)

仅供参考：我遇到了同样的问题，希望它明天可以工作（之前似乎是一个问题，然后不久就解决了）。值得评论这个错误，如果那不是你已经做过的话。

# c++ - std::map::rend() 返回数组的第一个元素，而不是之前的元素

> ID：10261705
> 
> 赞同：3
> 
> 时间：2012-04-21T18:20:26.340
> 
> 标签：c++, stl, stdmap

我正在尝试通过 std::map 反向迭代，遵循以下代码：[http](http://www.cplusplus.com/reference/stl/map/rend/) ://www.cplusplus.com/reference/stl/map/rend/ 它说：

> rend() 返回一个反向迭代器，它引用映射容器中第一个元素之前的元素，这被认为是它的反向端。
> 
> 请注意，rend 不是指与 begin 相同的元素，而是指它之前的元素。

```
map<float,int> m;
m.insert(pair<float,int>(.1,0));
m.insert(pair<float,int>(.4,5));
map<float,int>::reverse_iterator rend=m.rend();
map<float,int>::iterator begin=m.begin(); 
```

当我运行它时，rend 和 begin 都指向 m 的第一个元素 (.1,0)，但显然它不应该指向上面的通知。我觉得我犯了一些非常明显的错误，但我不知道它可能是什么。

(C++,MSVC2010)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T19:47:40.543

我相信您缺少的一点是，如果您使用调试器检查值，则返回的值`rend()`和`begin()` *将*包含相同的值。但是，`operator*`迭代器类型的成员仍然可以让您访问不同的对象。

技术细节：返回的值`rend()`不能指向 before `begin()`，因为那是无效的。所以决定`rend()`应该包含的值`begin()`和所有其他反向迭代器进一步移动一个位置。对此`operator*`进行补偿并无论如何访问正确的元素。

24.5.1 反向迭代器的第一段说：

> 类模板 reverse_iterator 是一个迭代器适配器，它从其底层迭代器定义的序列的末尾迭代到该序列的开头。反向迭代器与其对应的迭代器 i 之间的基本关系由恒等式建立：
> `&*(reverse_iterator(i)) == &*(i - 1)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T18:30:27.130

`rend`访问指向的元素是**未定义的行为**。它很可能会为您提供容器中的第一个项目或使您的应用程序崩溃或您能想象到的任何事情。此元素只是一个占位符，用于在迭代时指示容器结束（同样适用于`end`各种标准库容器）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T18:34:47.020

我不确定您如何检查`rend`指向的位置，但我运行了这个示例来反驳您的说法。

```
int main() {

    map<float,int> m;
    m.insert(pair<float,int>(.1,0));
    m.insert(pair<float,int>(.4,5));
    map<float,int>::reverse_iterator rend=m.rend();
    map<float,int>::iterator begin=m.begin();

    for ( rend=m.rbegin() ; rend != m.rend(); rend++ )
    cout << rend->first << " => " << rend->second << endl;
} 
```

输出：

```
0.4 => 5
0.1 => 0 
```

如果`rend`指向第一个元素，则不会打印 0.1 => 0。

这是我的例子。您必须展示您的代码在哪里实际得出结论，即rend 指向第一个元素。

# gradle - Gradle 应用程序插件：强制脚本在 Classpath 中包含 lib/*

> ID：10261713
> 
> 赞同：9
> 
> 时间：2012-04-21T18:21:21.417
> 
> 标签：gradle

我正在使用应用程序插件来创建可分发的 zip。查看它生成初始类路径的脚本会指定 lib 文件夹中的每个文件。我想让我的用户选择将其他库添加到 lib 文件夹并让脚本选择这些库。

有没有办法告诉应用程序插件拉入 lib 文件夹中的所有 jar 文件，而不仅仅是在 Gradle 构建文件中指定为依赖项的那些？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T18:46:50.550

我从文档中发现（经过多次试验和错误）我可以执行以下操作：

```
startScripts {
  classpath  = files('$APP_HOME/lib/*')
} 
```

# ruby-on-rails - 设置代理请求超时

> ID：10261725
> 
> 赞同：0
> 
> 时间：2012-04-21T18:22:44.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何定义代理连接/读取超时？

我试过这样做（但我得到错误 - 未定义的方法读取/打开超时）

```
http = Net::HTTP::Proxy(host, port, user, pass)
http.open_timeout = 5
http.read_timeout = 5
http.start(uri.host) do |http|

end 
```

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:17:54.067

你很亲密，你需要做以下事情

```
http = Net::HTTP::Proxy(host, port, user, pass)
http.start(uri.host) do |http|
  http.open_timeout = 5
  http.read_timeout = 5
end 
```

您需要在块内移动属性 http，如 open_timeout

干杯！

# c# - 枢轴的每个枢轴的自定义字体大小

> ID：10261726
> 
> 赞同：0
> 
> 时间：2012-04-21T18:22:46.820
> 
> 标签：c#, windows-phone-7, header, font-size, pivotitem

在我的 Windows Phone 7 应用程序项目中，我使用了一些 Pivot，我想知道是否可以在 c# 中更改数据透视项的标题的字体大小。目前，我知道如何更改枢轴的所有字体大小。这里我是怎么做的

```
`<controls:Pivot x:Name="EventPivot">
    <controls:Pivot.HeaderTemplate>
        <DataTemplate>
            <TextBlock x:Name="header" Text="Salut" FontSize="30" />
        </DataTemplate>
    </controls:Pivot.HeaderTemplate>
</controls:Pivot>`
```

但我的问题是我没有找到如何在 c# 中更改标题文本。我试过了

```
 TextBlock headerText = new TextBlock { Text = "toto", FontSize= 20, TextWrapping = TextWrapping.Wrap};
    var myPivotItem = new PivotItem { Header = headerText};
    myPivotItem.Content = myScrollViewer;
    EventPivot.Items.Add(myPivotItem); 
```

但这没有用。也许如果我像对 Pivot 一样使用某种 DataTemplate，我可以解决我的问题，但我不知道如何在 c# 中实现它......

我还想知道 PivotItem 的高度是否可以独立于所有其他 PivotItems。因为目前，每个标题的高度都基于其他 PivotItems 的较大高度。

感谢您的所有回答。

再见

Drhouse87

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:54:25.567

在实现这样的事情之前，我会非常仔细地测试用户对这种不同的标题项目大小的看法。并不是说您可能会因此而出现间距问题，因为为标题保留的空间将应用于所有枢轴项目。

也就是说，应该可以通过绑定一个用于 FontSize 的值然后在需要时应用转换器来做到这一点。

您不能从页面后面的代码中按名称引用模板中的项目，因为可能有多个具有该名称的控件实例。

# android - Android：自定义遮罩 2 个位图，一层一层叠加

> ID：10261728
> 
> 赞同：0
> 
> 时间：2012-04-21T18:22:54.717
> 
> 标签：android, canvas, bitmap, draw, paint

现在很容易。

我最终想要的：

![一只忙碌的猫](../Images/fd7bf70be4d8668e3b6e7d47ed834bad.png)

我想在一个视图上叠加 2 个位图。与上一个相同的位图比下一个具有更高的亮度。

现在，当用户在上位图上描边（使用触摸事件（如画笔））时，我希望上位图的这些部分不可见。

对于那些熟悉 adobe photoshop 的人来说，这可能更有意义：我想在正在显示的图像上绘制一个蒙版，以便只有未蒙版的部分仍然可见。但面具可以从具有可变硬度/大小的刷子中绘制。

如何实现此功能？引导我进入我应该研究或提供示例代码的行。

此外，是否可以使用具有可变硬度的画笔在图像视图上绘制笔触？我知道我可以在画布上 drawPath 和 drawArc，但我不知道如何实现不同的笔触/样式。

如果我没有正确表达我的问题，或者无法找到类似的重复项，请原谅我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T05:28:58.807

我认为最好的方法是进行自己的屏幕外合成，然后使用 ImageView 或可能具有自定义交互的子类来渲染合成图像。有关如何使用 Porter-Duff 传输模式进行此类合成的示例，请参阅[此示例代码。](https://github.com/ldo/porter_duff_browser_android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:25:38.100

您可以使用 FrameLayout 在 Android 中将一个图像覆盖在另一个图像上，并在 Google 上使用自定义遮罩搜索 FingerPaint。

# ruby-on-rails - Rails 定义 Current_page

> ID：10261730
> 
> 赞同：2
> 
> 时间：2012-04-21T18:22:59.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试使用基本的 current_page 方法来定义导航链接是否应突出显示为当前页面。

我目前没有收到任何错误，但显然没有正确定义事物，因为它没有正确使用我的 CSS。

在我的 PagesController 我有以下内容：

```
def current_page
  current_page = (path)
end 
```

我在我的页面视图上使用 if 和 else 语句来尝试定义要使用的 CSS 行，如下所示：

```
<div id="nav">
  <ul>
    <li>
      <% if "current_page" %>
        <a href="/about" class="about-cp">About</a>
      <% else %>
        <a href="/about" class="about">About</a>
      <% end %>
    </li>
  </ul> 
</div> 
```

我已经阅读了很多关于此的论坛，但似乎仍然无法正确解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T18:27:13.757

嗯，您的代码中有错误。有了`if "current_page"`您，您将永远正确，并且只会呈现第一个链接。你应该`if current_page`改用。

但是 rails 有一个内置的助手，`current_page?`正是为了这个目的而调用的：

这样做：

```
 <% if current_page?(path) %>
   <a href="/about" class="about-cp">About</a>
 <% else %>
   <a href="/about" class="about">About</a>
 <% end %> 
```

有关更多信息，请参见[此处](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-current_page-3F)`current_page?`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T18:52:49.420

klump 的回答符合您的要求，但我敢于提出不同的方法：

```
 <div id="nav">
  <ul>
   <li>
     <%= link_to_unless_current 'About', about_path %>
   </li>
  </ul> 
 </div> 
```

这样`About`，如果当前页面是，您将显示为文本，`about_path`并显示为任何其他页面的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T19:29:25.090

```
<a href="/about" class="<%= "active" if current_page?(path) %>">About</a> 
```

# jquery - 无法通过 jQuery 在 SVG 中添加图像：标签变为

> ID：10261731
> 
> 赞同：13
> 
> 时间：2012-04-21T18:23:02.663
> 
> 标签：jquery, svg

我想通过 jQuery 在 SVG 中添加项目。我可以很好地插入标签，例如`<rect />`or`<text />`但我不能插入带有标签的图像`<image />`。

这个标签会`<img />`自动变成，不能在 SVG 中显示图片：http: [//jsfiddle.net/G4mJf/](http://jsfiddle.net/G4mJf/)

我怎样才能防止这种情况？如果不可能，是否有另一种方法可以使用 JavaScript/jQuery 在 SVG 中插入图像。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-21T19:01:40.727

你应该使用`createElementNS()`：

```
var img = document.createElementNS('http://www.w3.org/2000/svg','image');
img.setAttributeNS(null,'height','536');
img.setAttributeNS(null,'width','536');
img.setAttributeNS('http://www.w3.org/1999/xlink','href','https://upload.wikimedia.org/wikipedia/commons/2/22/SVG_Simple_Logo.svg');
img.setAttributeNS(null,'x','10');
img.setAttributeNS(null,'y','10');
img.setAttributeNS(null, 'visibility', 'visible');
$('svg').append(img); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T18:43:00.067

[正如这个答案所解释的那样](https://stackoverflow.com/questions/3642035/jquerys-append-not-working-with-svg-element)，单独的 jQuery 无法正确处理 SVG 操作。您可能应该使用[Raphael](http://raphaeljs.com/)或上面链接中描述的一种 hacky 方法。

# java - ssh -ing和编译java程序

> ID：10261738
> 
> 赞同：0
> 
> 时间：2012-04-21T18:23:28.880
> 
> 标签：java, shell, ssh

您好，我需要在一个 ip 地址中 ssh 并通过 shell 脚本运行我的 java 代码，我是通过这种方式完成的

```
ssh $LINE java -Djava.library.path=/N/u/sbpatil/ds/Project4/demons/Project4Lib -cp "/N/u/sbpatil/ds/Project4/demons:/N/u/sbpatil/ds/Project4/demons/Project4Lib/jug-uuid.jar:/N/u/sbpatil/ds/Project4/demons/Project4Lib/NaradaBrokering.jar:/N/u/sbpatil/ds/Project4/demons/Project4Lib/sigar.jar" PublisherClient >> output2 & 
```

但是 output2 文件没有任何输出。即使 java 的运行命令给我一个错误，该错误也应该写入该文件中。，但它没有被写入。谁能告诉我应该如何编写这个脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T20:06:23.350

现在看起来你在后台运行 ssh，将输出重定向到本地文件。将命令行括在 '' 中：`ssh $LINE 'java ... 1>>output2 2>&1 &'`

如果您像这样启动您的应用程序，那么使用`nohup`可能是一个好主意。

# python - 将numpy矩阵类型转换为python中的字符串

> ID：10261740
> 
> 赞同：1
> 
> 时间：2012-04-21T18:24:11.287
> 
> 标签：python, matrix, numpy, counter, typecasting-operator

我有浮点类型的 am*n numpy 矩阵。我将使用 Counter 函数（来自集合）来推导某些矩阵元素组合的计数。在实验中，我发现 Counter() 需要字符串值条目来迭代，而我的 numpy 矩阵默认是浮点类型。

在声明零的 numpy 矩阵时使用 dtype 没有帮助。

所以，我想把 numpymatrix 的每个元素都转换成一个字符串。但是，它不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:43:29.613

目前尚不清楚您到底要做什么，但您可能更适合使用[np.histogram](http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html)（或可能[np.bincount](http://docs.scipy.org/doc/numpy/reference/generated/numpy.bincount.html)）基于 numpy 数组派生计数。

但如果你必须：

```
In [45]: a = np.random.normal(size=(3,3))

In [46]: a
Out[46]: 
array([[ 0.64552723, -0.4329958 , -1.84342512],
       [ 0.83197804, -0.03053034,  0.22560254],
       [ 0.61356459, -1.60778048, -1.51859134]])

In [47]: a.astype('|S8')
Out[47]: 
array([['0.645527', '-0.43299', '-1.84342'],
       ['0.831978', '-0.03053', '0.225602'],
       ['0.613564', '-1.60778', '-1.51859']], 
      dtype='|S8') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T19:36:09.283

```
xx = np.matrix([[1.2,3.4],[5.4,6.7],[9.8, 5.2]])
zz = np.matrix([[str(ele) for ele in a] for a in np.array(xx)]) 
```

结果：

```
>>> xx
matrix([[ 1.2,  3.4],
        [ 5.4,  6.7],
        [ 9.8,  5.2]])
>>> zz
matrix([['1.2', '3.4'],
        ['5.4', '6.7'],
        ['9.8', '5.2']], 
       dtype='|S3') 
```

# tapestry - Tapestry5 和树组件上的选择

> ID：10261741
> 
> 赞同：3
> 
> 时间：2012-04-21T18:24:16.637
> 
> 标签：tapestry

在 Tapestry5 树组件中允许用户选择多个项目。每个选定的项目都以粗体显示。如何对树组件进行限制以便可以选择一个项目？

为此，我一直在检查 TreeSelectionModel，但我所能做的就是将 TreeNode 值存储在集合中，而不是限制客户端的用户选择。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:50:59.417

这是一个棘手的问题。您必须将树组件放置在区域内，并在选择更改时更新该区域。

Geoff Callender 在 jumpstart 上发布了一个示例：http: [//jumpstart.doublenegative.com.au/jumpstart/examples/ajax/treefromdatabasewithzones](http://jumpstart.doublenegative.com.au/jumpstart/examples/ajax/treefromdatabasewithzones)

Psydo 代码示例：

翻译：

```
<t:zone t:id="treeZone" id="treeZone">
  <t:tree t:id="Tree" t:model="treeModel" t:node="treeNode" t:value="categoryNode"  class="prop:leafClass">
    <p:label>
      <t:if test="treeNode.leaf">
        <a t:type="EventLink" t:event="leafSelected" t:context="categoryNode.category.id" t:zone="selectedZone" href="#">
          ${treeNode.label}
        </a>
      </t:if>
      <t:if test="!treeNode.leaf">
        ${treeNode.label}
      </t:if>
     </p:label>
  </t:tree>
</t:zone> 
```

爪哇：

```
@InjectComponent
private Zone treeZone;

@Inject
private AjaxResponseRenderer ajaxResponseRenderer;

@Inject
private Request request;

void onLeafSelected(Integer categoryId) {
    CategoryNode categoryNode = categoryService.findCategoryInfo(categoryId);
    selectedCategory = categoryNode.getCategory();

    if (request.isXHR()) {
        ajaxResponseRenderer.addRender(treeZone).addRender(selectedZone);
    }
}

public String getLeafClass() {
    if (selectedCategory != null && categoryNode.getCategory().equals(selectedCategory)) {
        return "selected";
    }
    else {
        return "";
    }
} 
```

# c++ - VS 2010 中首选的多线程方法/库？

> ID：10261744
> 
> 赞同：1
> 
> 时间：2012-04-21T18:24:34.450
> 
> 标签：c++, multithreading, visual-studio-2010

我在 Unix、PThreads 和 OpenMP 下的多线程编程方面有很多经验。我向社区提出的问题是：在编写 Windows 应用程序（XP、Win 7）并使用 VS 2010 时，是否有首选或最好的库或多线程启用程序？

谢谢你的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:37:44.943

使用并行模式库 (PPL)，这是 MS 设计的最新库，并且经过大量优化：[http](http://channel9.msdn.com/blogs/pdc2008/tl25) ://channel9.msdn.com/blogs/pdc2008/tl25它在 VS2010 中本机支持我更喜欢这个OpenMP 当然，也有许多 msdn 文章： http: [//msdn.microsoft.com/en-us/library/dd492418.aspx](http://msdn.microsoft.com/en-us/library/dd492418.aspx)，您还可以使用 VS2010 获得调试器，如果您是学生，那么无论如何您都可以免费获得 Ultimate。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T14:59:12.843

刚刚了解到这一点：2011 年 C++ 的新标准具有官方的多线程模板集，应该使其完全可传输。

# jquery - 显示带有消息的 div 框并单击关闭

> ID：10261750
> 
> 赞同：1
> 
> 时间：2012-04-21T18:25:34.553
> 
> 标签：jquery, jquery-ui

下面的代码工作正常，但我的要求与它现在正在做的略有不同，

我的问题是：

如何在右侧显示带有关闭按钮的消息，在左侧显示带有图像的消息，并在下面的草图中显示类似这样的消息

```
----------------------------------------------
                                          [x]
[img]      Save/Update successfully             
---------------------------------------------- 
```

所以当用户点击小 x 时应该关闭 div 框。

这是我到目前为止所拥有的。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/jquery-ui.min.js"></script>
<title>Sandbox</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<style type="text/css" media="screen">
    .error-notification {
        background-color:#AE0000;
        color:White;
        display:none;
        cursor:pointer;
        padding:15px;
        padding-top: 0;
        position:absolute;
        z-index:1;
        font-size: 100%;
    }

    .error-notification h2 {
        font-family:Trebuchet MS,Helvetica,sans-serif;
        font-size:140%;
        font-weight:bold;
        margin-bottom:7px;
    }
</style>
</head>
<body>
<input type="button" class="showme" value="Show me the Dialog!"><br><br><br><br>

<script>
    $('.showme').click(function () {
        $('.error-notification').remove();
        var $err = $('<div>').addClass('error-notification')
                             .html('<h2>Paolo is awesome</h2>(click on this box to close)')
                             .css('left', $(this).position().left);
        $(this).after($err);
        $err.fadeIn('fast');
    });
    $('.error-notification').live('click', function () {
        $(this).fadeOut('fast', function () { $(this).remove(); });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:37:20.220

添加错误消息 HTML 时，包括关闭按钮和图像的标记。然后在 javascript 中，绑定关闭按钮的单击事件以关闭消息框。像这样的东西。

```
$(function()
{
  $('.showme').click(function () {
     $('.error-notification').remove();
     var $err = $('<div>').addClass('error-notification')
    .html('<div><img class="imgClose" src="http://www.mobissimo.com/images/module-close.png" /><p><img src="http://www.mousescrappers.com/forums/xperience/icons/teacups24.png" /><h2>Paolo is awesome</h2>(click on this box to close)</p></div>')
    .css('left', $(this).position().left);
     $(this).after($err);
     $err.fadeIn('fast');
  });
  $('.imgClose').live('click', function () {
      $(this).parent().fadeOut('fast', function () { $(this).parent().remove(); });
  });
}); 
```

工作示例[http://jsfiddle.net/xL9Pv/12/](http://jsfiddle.net/xL9Pv/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:28:15.930

与您尝试创建的对话框匹配，然后对其应用`DIV`jQuery 。基本示例在这里`display:none``dialog`

[http://jqueryui.com/demos/dialog/#animated](http://jqueryui.com/demos/dialog/#animated)

jNotify 是一个提供一些附加功能的 jQuery 插件。演示在这里：

[http://www.myjqueryplugins.com/jNotify/demo](http://www.myjqueryplugins.com/jNotify/demo)

# memory - 内存一致性模型 CUDA 4.0 和全局内存？

> ID：10261751
> 
> 赞同：5
> 
> 时间：2012-04-21T18:25:35.383
> 
> 标签：memory, parallel-processing, cuda, cpu-architecture

更新：`while()`编译器优化了下面的条件，因此两个线程都只是跳过条件并进入 CS，即使带有`-O0`标志。有谁知道为什么编译器会这样做？顺便说一句，声明全局变量`volatile`会导致程序由于某种奇怪的原因挂起......

我阅读了[CUDA 编程指南](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html)，但我仍然不清楚 CUDA 如何处理与全局内存相关的**内存一致性。**（这与内存层次结构不同）基本上，我正在运行测试试图打破**顺序一致性**。我正在使用的算法是彼得森的算法，用于内核函数内部*两个线程之间的互斥：*

```
flag[threadIdx.x] = 1; // both these are global
turn = 1-threadIdx.x;

while(flag[1-threadIdx.x] == 1 && turn == (1- threadIdx.x));
shared_gloabl_variable_x ++;

flag[threadIdx.x] = 0; 
```

这是相当简单的。每个线程通过将其标志设置为一个来请求临界区，并通过轮到另一个线程来表现良好。在评估 时`while()`，如果其他线程没有设置其标志，则请求线程可以安全地进入临界区。**现在这种方法的一个微妙问题是，如果编译器重新排序写入，以便在写入到`turn`之前执行写入`flag`。**如果发生这种情况，两个线程将同时在 CS 中结束。这很容易用普通的 Pthreads 证明，因为大多数处理器不实现顺序一致性。**但是 GPU**呢？

这两个线程将在同一个经线中。他们将以锁步模式执行他们的语句。但是当他们到达`turn`变量时，他们正在写入同一个变量，因此内部扭曲执行变得序列化（不管顺序是什么）。现在在这一点上，获胜的线程是继续进入 while 条件，还是等待另一个线程完成其写入，以便两者可以同时评估`while()`？路径将再次在 处分叉`while()`，因为只有其中一个会赢，而另一个等待。

运行代码后，我让它不断地破坏 SC。我读取的值是 ALWAYS 1，这意味着两个线程每次都以某种方式进入 CS。这怎么可能（GPU 按顺序执行指令）？（注意：我用 编译它`-O0`，所以没有编译器优化，因此没有使用`volatile`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T04:26:44.393

**编辑**：由于您只有两个线程并且`1-threadIdx.x`可以工作，因此您必须使用线程 ID 0 和 1。线程 0 和 1 将始终是所有当前 NVIDIA GPU 上同一扭曲的一部分。Warp 以 SIMD 方式执行指令，具有针对不同条件的线程执行掩码。您的 while 循环是一个发散的条件。

*   当`turn`和`flags` *不是* `volatile`时，编译器可能会重新排序指令，您会看到进入 CS 的两个线程的行为
*   When`turn`和`flags` *are* `volatile`，您会看到挂起。原因是其中一个线程将成功写入转弯，因此`turn`将是 0 或 1。假设`turn==0`：如果硬件选择执行线程 0 的发散分支部分，那么一切正常。但是如果它选择执行线程 1 的发散分支的一部分，那么它将在 while 循环上旋转，并且线程 0 永远不会轮到它，因此会挂起。

您可以通过确保您的两个线程处于不同的经线中来避免挂起，但我认为经线必须同时驻留在 SM 上，以便可以从两者发出指令并取得进展。（可能适用于不同 SM 上的并发扭曲，因为这是全局内存；但这可能需要 __threadfence() 而不仅仅是 __threadfence_block()。）

一般来说，这是一个很好的例子，说明为什么这样的代码在 GPU 上是不安全的，不应该使用。我意识到这只是一个调查实验。一般来说，CUDA GPU 没有——正如你提到的大多数处理器没有——实现顺序一致性。

**原始答案**

1.  变量`turn`和`flag`必须是`volatile`，否则`flag`不会重复加载 ，条件`turn == 1-threadIdx.X`不会被重新评估，而是将被视为`true`。
2.  store to和 store to`__threadfence_block()`之间应该有一个正确的顺序。`flag``turn`
3.  在共享变量增量之前应该有一个`__threadfence_block()`（也应该声明`volatile`）。您可能还需要`__syncthreads()`或至少`__threadfence_block()`在增量之后确保它对其他线程可见。

我有一种预感，即使在进行了这些修复之后，您仍然可能会遇到麻烦。让我们知道怎么回事。

顺便说一句，你在这一行有一个语法错误，所以很明显这不是你真正的代码：

```
while(flag[1-threadIdx.x] == 1 and turn==[1- threadIdx.x]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T17:58:47.743

在没有额外的内存屏障（例如 __threadfence()）的情况下，全局内存的顺序一致性仅在给定线程内强制执行。

# javascript - javascript遍历json对象

> ID：10261753
> 
> 赞同：1
> 
> 时间：2012-04-21T18:25:45.040
> 
> 标签：javascript, ajax, json, object

我一直认为这会很容易......我打算使用下面的json来构建路由器对象。我放了一个console.log，这样我就可以有一个断点点，这样我就可以尝试弄清楚如何从chrome控制台访问对象属性。但它永远不会进入 for 循环。

主要问题是如何正确地将 JSON 转换为对象以及如何访问它的属性。

```
<script type="text/javascript">
    $(document).ready(function(){

        $.getJSON('JSON/data.json', function(json) {

            for (var i=0;i<json.length;i++){
                console.log("in for loop");
            }

        });
    });

</script>

{
"_id": {
    "$oid": "4f91f2c9e4b0d0a881cf86c4"
},
"DSC21": {
    "Router": {
        "online": [
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1"
        ],
        "bytes": [
            "59.5721304971465",
            "17014.1911069063",
            "14858.8518936735",
            "6875.20981475265",
            "15157.6891384625",
            "6363.47544785913",
            "29446.2111270486",
            "11517.9296243171",
            "27077.9747917112",
            "19867.79381695"
        ]
    }
},
"DSC22": {
    "Router": {
        "online": [
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1"
        ],
        "bytes": [
            "59.5721304971465",
            "17014.1911069063",
            "14858.8518936735",
            "6875.20981475265",
            "15157.6891384625",
            "6363.47544785913",
            "29446.2111270486",
            "11517.9296243171",
            "27077.9747917112",
            "19867.79381695"
        ]
    }
},
"DSC23": {
    "Router": {
        "online": [
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1"
        ],
        "bytes": [
            "59.5721304971465",
            "17014.1911069063",
            "14858.8518936735",
            "6875.20981475265",
            "15157.6891384625",
            "6363.47544785913",
            "29446.2111270486",
            "11517.9296243171",
            "27077.9747917112",
            "19867.79381695"
        ]
    }
},
"DSC24": {
    "Router": {
        "online": [
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1",
            "1"
        ],
        "bytes": [
            "59.5721304971465",
            "17014.1911069063",
            "14858.8518936735",
            "6875.20981475265",
            "15157.6891384625",
            "6363.47544785913",
            "29446.2111270486",
            "11517.9296243171",
            "27077.9747917112",
            "19867.79381695"
        ]
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T18:31:10.360

变量`json`已经是一个对象，但它不是一个数组，所以典型的 for 循环是不够的。由于`json.length`未定义，`i<json.length`因此在第一次迭代时失败并且您跳过循环。

```
for (var key in json) {
    // key is your DSCxxx
    // json[key] is the corresponding object
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T18:33:34.573

JSON 在 JavaScript 中是原生可用的，您可以像遍历任何对象或数组一样遍历它。

```
json["DSC21"]["Router"]["online"][0];    // 1
json.DSC21.Router.online[0];    // equivalent
json.DSC21.Router.online.0;    // INCORRECT 
```

如果您不知道属性的名称并想遍历它们，请使用以下`for .. in`构造：

```
for (var key in json) {
    console.log(key);   // _id, DSC21, DCS22 etc..
    console.log(json[key]);    // { "$oid": "" }, { "Router": ".." } etc.
} 
```

这确实会留下`hasOwnProperty`问题，但如果您只是读取 JSON 数据，这应该不是问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T18:32:40.907

也许你想知道如何迭代你的对象？

这将是如何做到这一点：

```
for( var key in json ){
   if( key != '_id'){
      var router = json[key].Router;
      for( var i = 0; i < router.online.length; i++ ){
        console.log(i + ' is online: ', router.online[i]==1?'true':'false');
      }
      etc...
   }
} 
```

# compiler-construction - Go1 编译器是如何工作的？

> ID：10261754
> 
> 赞同：3
> 
> 时间：2012-04-21T18:26:28.517
> 
> 标签：compiler-construction, go

我已经为一个学校项目涉足 Go 大约一个月了，我注意到 src/pkg/go 文件夹中的 go/ast、go/token、go/parser 等包。但是，gc 编译器基于位于 src/cmd/gc 中的 C 文件。

我的问题是关于 Go1 中构建和运行程序的新 go 命令：这个工具是否依赖于我上面引用的包？即，如果我向 /go/token/token.go 添加了一个新令牌，新的 go 编译器会识别它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T22:00:30.563

Go 编译器是用纯 C 编写的，不使用`go/`. 在 Go 源代码树中，其词法分析器位于 src/cmd/gc/lex.c 中，其 Bison 语法为 src/cmd/gc/go.y。

这些`go/`包用于 godoc、gofmt 等工具和各种 go 工具子命令。也许有一天它们也可以用来在 Go 中编写 Go 编译器，但还没有人在这条路上走得很远。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-19T14:00:44.633

注意（2013 年 12 月 18 日），有计划将编译器从 C 移动到 Go 本身：

> “ [Go 1.3+ 编译器大修](https://docs.google.com/document/d/1P3BLR31VA8cvLJLfMibSuTdwTuF7WWLux71CYD0eeD8/edit)”（Russ Cox）

在这种情况下，将涉及像 go/parser 这样的包，并且“第 5 阶段”提到：

> `go/parser`用最新的（也许是新的）版本和替换前端`go/types`。
> Robert Griesemer 讨论了在某个时候设计新的API`go/parser`和`go/types`API 的可能性，基于对当前 API 的经验（并使用新名称，以保持 Go 1 的兼容性）。
> 将它们连接到编译器后端的工作可能有助于指导新 API 的设计。

* * *

这可能是语言变得多么稳定的一个证明，因为之前提到的旧“ [A Tour of Go](http://research.swtch.com/gotour) ”（2012 年 6 月）明确指出：

> Go 本身不是编写的这一事实也使得进行重大语言更改变得更加容易。
> 在最初的发布之前，我们经历了一些大规模的语法剧变，我很高兴我们不必担心我们将如何重新启动编译器或确保在这些更改期间某种向后兼容性。

当时（再次，2012 年 6 月）提到的问题“**有没有计划在 Go 中引导 Go，在 Go 中编写 Go 编译器？ ”：**

> 没有立即的计划。Go 确实附带了一个用 Go 编写的 Go 程序解析器，所以第一个部分已经完成，并且有一个实验性的类型检查器正在开发中，但主要用于编写程序分析工具。
> 
> 我过去曾研究过自举语言，我发现自举不一定适合经常变化的语言。它让我想起了攀登悬崖并偶尔将钩子拧入悬崖以在你跌倒时抓住你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T18:29:06.833

*这个工具是否依赖于我上面引用的包？*

'go' 工具确实依赖于这些包

*如果我在 /go/token/token.go 中添加了一个新的令牌，它会被新的 go 编译器识别吗？*

不。

# c# - C# OleDbDataReader

> ID：10261756
> 
> 赞同：0
> 
> 时间：2012-04-21T18:26:48.413
> 
> 标签：c#, visual-studio, ms-access, oledb, oledbdatareader

如何改变这个：

```
public void Charge(string bankaccountnumber, decimal moneyamount)
    {
       foreach (Bankaccount bankaccountInProcess in bankaccount)
        {
            if (bankaccountnumber == bankaccountInProcess.Bankaccountnumber)

                bankaccountInProcess.ChargeFromBankAccount(moneyamount);

        }

        return;
} 
```

要使用 OleDbDataReader 而不是那个 foreach？

当要求输入要从银行帐户中提取的金额然后从 BalanceAmountAvailableForWithdrawal（以及 WholeAccountBalance）中提取时，在控制台中输入金额。但是access文件中没有moneyamount列，只有WholeAccountBalance和BalanceAmountAvailableForWithdrawal货币列。

这是一个示例，我如何在课堂的不同部分对其进行更改：

```
public bool IdentifyUser(string bankAccountnumber, int passWord)
    {

        connection = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source= C:\\asd.accdb");
            connection.Open();

        OleDbCommand getOne = new OleDbCommand();
        getOne.Connection = connection;
        getOne.CommandText = "SELECT accounNum, pinCode FROM Account WHERE accountNum = '" +
             bankAccountnumber +"'";
        OleDbDataReader readOne = readOne.ExecuteReader();
        if (readOne.Read())
        {
            int GottenPassWord = (int)readOne["pinCode"];
            if (GottenPassWord == passWord)

            return true;
        }

        else
        {
            Console.WriteLine("Account was not found");            
        }
        connection.Close();
        return false;

    } 
```

到目前为止，这是我提出的：

```
public void Charge(string bankaccountnumber, decimal moneyamount)
    {

        connection = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source= C:\\asd.accdb");
            connection.Open();

        OleDbCommand getOne = new OleDbCommand();
        getOne.Connection = connection;
        getOne.CommandText = "SELECT accounNum, WholeAccountBalance, BalanceAmountAvailableForWithdrawal FROM Account WHERE accounNum = '" +
             bankaccountnumber + "'";
        OleDbDataReader readOne = readOne.ExecuteReader();
        if (readOne.Read())
        {
        // i dont know what to put here to make this do the same thing as the foreach did

        return;

        }

        else
        {
            Console.WriteLine("Charging did not work");

            return;

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:39:50.353

如果你的 Access 表`Account`有 3 列：和`accounNum`，那么你基本上应该做这样的事情（我也更正并更新了一点）。只是检查它，因为我没有测试它。`WholeAccountBalance``BalanceAmountAvailableForWithdrawal`

```
public void Charge(string bankaccountnumber, decimal moneyamount)
{
    using (OleDbConnection connection = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source= C:\\asd.accdb"))
    {
        connection.Open();

        using (OleDbCommand cmd = new OleDbCommand())
        {
            cmd.Connection = connection;
            cmd.CommandText = "SELECT accounNum, WholeAccountBalance, BalanceAmountAvailableForWithdrawal FROM Account WHERE accounNum = @accNum";
            cmd.Parameters.AddWithValue("@accNum", bankaccountnumber);

            using (OleDbDataReader reader = cmd.ExecuteReader())
            {
                if (reader.Read())  //assuming accounNum is an unique field (primary key)
                {
                    decimal balanceAmountAvailableForWithdrawal = Convert.ToDecimal(reader["BalanceAmountAvailableForWithdrawal"]);
                    if (balanceAmountAvailableForWithdrawal >= moneyamount)   //check if you can withdraw money
                    {
                        cmd.CommandText = @"UPDATE Account 
                                            SET WholeAccountBalance = WholeAccountBalance - @moneyamount, 
                                                BalanceAmountAvailableForWithdrawal = BalanceAmountAvailableForWithdrawal - @moneyamount 
                                            WHERE accounNum = @accNum";

                        cmd.Parameters.AddWithValue("@moneyamount", moneyamount);

                        int result = cmd.ExecuteNonQuery();

                        if (result == 1)
                            Console.WriteLine("Money withdrawn sucessfully.");
                        else
                            Console.WriteLine("Error while withdrawing, operation has failed.");
                    }
                    else
                    {
                        Console.WriteLine("Not enough money to withdrawn requested ammount.");
                    }
                }
                else
                {
                    Console.WriteLine("Charging did not work");
                }
            }
        }
    }
} 
```

# c++ - boost::thread 每次运行都会产生不同的结果

> ID：10261757
> 
> 赞同：1
> 
> 时间：2012-04-21T18:27:06.710
> 
> 标签：c++, threadpool, boost-thread

我正在尝试利用 boost::thread 来执行“n”个类似的工作。当然，“n”一般来说可能非常高，所以我想将同时运行的线程数限制为某个小数 m（比如 8）。我写了类似下面的内容，在其中打开 11 个文本文件，一次使用四个线程打开四个。

我有一个小类`parallel`（它在调用`run()`方法时会打开一个输出文件并向其写入一行，其中包含一个 int 变量。编译进行顺利，程序运行没有任何警告。但是结果与预期不符。文件被创建了，但它们的数量并不总是 11。有谁知道我犯了什么错误？

这是parallel.hpp：

```
 #include <fstream>
 #include <iostream>

 #include <boost/thread.hpp>

 class parallel{
 public:
    int m_start;

    parallel()
    {  }

    // member function
    void run(int start=2);
}; 
```

parallel.cpp 实现文件是

```
#include "parallel.hpp"

void parallel::run(int start){

    m_start = start;

    std::cout << "I am " << m_start << "! Thread # " 
          << boost::this_thread::get_id()
          << " work started!" << std::endl;

    std::string fname("test-");
    std::ostringstream buffer;
    buffer << m_start << ".txt";

    fname.append(buffer.str());

    std::fstream output;
    output.open(fname.c_str(), std::ios::out);

    output << "Hi, I am " << m_start << std::endl;

    output.close();

    std::cout << "Thread # " 
          << boost::this_thread::get_id()
          << " work finished!" << std::endl;
} 
```

和 main.cpp：

```
 #include <iostream>
 #include <fstream>
 #include <string>

 #include <boost/thread.hpp>
 #include <boost/shared_ptr.hpp>

 #include "parallel.hpp"

 int main(int argc, char* argv[]){

     std::cout << "main: startup!" << std::endl;
     std::cout << boost::thread::hardware_concurrency() << std::endl;

     parallel p;

     int populationSize(11), concurrency(3);

     // define concurrent thread group
     std::vector<boost::shared_ptr<boost::thread> > threads;

     // population one-by-one
     while(populationSize >= 0) {
         // concurrent threads
         for(int i = 0; i < concurrency; i++){
             // create a thread
             boost::shared_ptr<boost::thread>
             thread(new boost::thread(&parallel::run, &p, populationSize--));
             threads.push_back(thread);
         }    
         // run the threads
         for(int i =0; i < concurrency; i++)
             threads[i]->join();

         threads.clear();
     }

     return 0;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:30:00.457

您有一个`parallel`带有单个`m_start`成员变量的对象，所有线程都可以在没有任何同步的情况下访问它。

**更新**

这种竞争条件似乎是设计问题的结果。尚不清楚类型对象`parallel`要代表什么。

*   如果它是用来表示一个线程，那么应该为每个创建的线程分配一个对象。发布的程序有一个对象和许多线程。
*   如果它旨在表示一组线程，那么它不应该保留属于单个线程的数据。

# visual-studio-2010 - 使用 dotCover 的类库的代码覆盖率

> ID：10261758
> 
> 赞同：14
> 
> 时间：2012-04-21T18:27:09.440
> 
> 标签：visual-studio-2010, code-coverage, dotcover

我有一个简单的类库，可以使用 VS 2010 使用 MSTest 进行测试。

我安装了 dotCover 1.2 的试用版。没有安装 ReSharper。

VS 只有菜单项“Cover Startup Project”和“Cover Application”。他们打开盒子，我可以在其中打开各种应用程序，但没有类库。

如果没有另一个使用它的应用程序，就不可能计算类库的代码覆盖率吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-11-06T02:49:50.753

就我而言，我有一个包含类库的解决方案，以及另一个包含单元测试的解决方案。

我想看看我的单元测试涵盖了多少类库。从解决方案上下文菜单 Dotcover运行**Cover Unit Tests后，默认情况下会显示测试类本身中方法的覆盖率。**要查看类库的覆盖范围，您需要取消选择[Match coverage results with current project structure](https://www.jetbrains.com/dotcover/help/Matching_Coverage_Snapshot_with_Project_Structure.html?search=match)：

[![在此处输入图像描述](../Images/8479a21184c68022556eef89d7e05522.png)](https://i.stack.imgur.com/63ydY.png)

请注意，这将仅涵盖测试中引用的类库项目。如果您有一个根本没有任何测试的项目，那么该项目将不会在 Coverage Tree 中显示为符号。

感谢[这个答案](https://stackoverflow.com/questions/16144592/dotcover-shows-only-unit-test-source-code-not-production-code)为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T20:11:52.307

他们有一个可以在没有 ReSharper 的情况下使用的命令行工具：dotCover.exe。

文档并不像您对 jetbrains 所期望的那样好，但它确实有效。

[http://blogs.jetbrains.com/dotnet/2010/07/running-code-coverage-from-the-console-with-dotcover/](http://blogs.jetbrains.com/dotnet/2010/07/running-code-coverage-from-the-console-with-dotcover/)

# iphone - Monotouch：获取 xy 或点击 UIView

> ID：10261765
> 
> 赞同：3
> 
> 时间：2012-04-21T18:28:20.500
> 
> 标签：iphone, ios, uiview, xamarin.ios, monodevelop

我有一个简单的全屏 UIView 。当用户点击屏幕时，我需要写出 x,y

```
Console.WriteLine ("{0},{1}",x,y); 
```

我需要为此使用什么 API？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T22:27:01.887

在 MonoTouch 中（因为你在 C# 中问过......虽然前面的答案是正确的:) 那将是：

```
public override void TouchesBegan (NSSet touches, UIEvent evt)
{
    base.TouchesBegan (touches, evt);

    var touch = touches.AnyObject as UITouch;

    if (touch != null) {
        PointF pt = touch.LocationInView (this.View);
        // ...
} 
```

您还可以使用 UITapGestureRecognizer：

```
var tapRecognizer = new UITapGestureRecognizer ();

tapRecognizer.AddTarget(() => { 
    PointF pt = tapRecognizer.LocationInView (this.View);
    // ... 
});

tapRecognizer.NumberOfTapsRequired = 1;
tapRecognizer.NumberOfTouchesRequired = 1;

someView.AddGestureRecognizer(tapRecognizer); 
```

手势识别器很好，因为它们将触摸封装到可重用的类中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T18:48:09.917

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
    UITouch *touch = [touches anyObject];

    printf("Touch at %f , %f \n" , [touch locationInView:self.view].x, [touch locationInView:self.view].y);
} 
```

# scala - 在对象之外修改 Scala GUI

> ID：10261769
> 
> 赞同：1
> 
> 时间：2012-04-21T18:28:45.820
> 
> 标签：scala, user-interface

我在 Scala 中创建了一个 GUI。它非常简单，但我想从 DSLGUI 之外修改 DSLOutput 对象。有谁知道我如何从 DSLGUI 外部调用 DSLOutput.append() ？我试过导入 DSLGUI，但我似乎不知道如何访问 DSLOutput。

```
package api
import swing._
import event._

object DSLGUI extends SimpleSwingApplication{

  def top = new MainFrame{
    title = "Computer Repair Advisory System"
    object Commands extends TextField(columns = 50)
    object DSLOutput extends TextArea(rows = 15, columns = 50)
    object SendCommand extends Button("Send")
    val CommandPanel = new FlowPanel{
      contents += Commands
      contents += SendCommand
    }
    contents = new BoxPanel(Orientation.Vertical){
        contents +=CommandPanel
        contents += DSLOutput
    }
    listenTo(SendCommand)
    reactions += {
      case ButtonClicked(SendCommand) =>
        DSLOutput append "Test "

    }
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:36:51.187

您必须在 的范围内声明它，而不是在您的方法中声明`DSLGUI`为本地对象。`top`然后您可以使用`DSLGUI.DSLOutput`.

IE

```
object DSLGUI extends SimpleSwingApplication {

  object DSLOutput extends TextArea(rows = 15, columns = 50)

  def top = new MainFrame {
    ...
  }
} 
```

# visual-studio-2010 - 此 C++/CLI 应用程序可以使用哪些形式？

> ID：10261770
> 
> 赞同：1
> 
> 时间：2012-04-21T18:28:46.537
> 
> 标签：visual-studio-2010, c++-cli, sudoku

![在此处输入图像描述](../Images/63c2b8949dd3443b0576e4ecf6e83636.png)

如前所述，上面的程序是一个数独游戏。我已经写下了关于如何编写一个算法来在这个数独游戏中生成随机棋盘的想法，它实际上可以工作，但事实证明算法不是我最大的问题，棋盘才是。我问了几个问题，这些问题告诉我重新制作董事会的结论。

我的问题是 - 什么可以用作板？最初，我有 81 个按钮。是的，你没看错，81 个按钮。最初的设计很好——你点击按钮，上面的文字就会加一。非常友好的界面，但编码很痛苦。引起我注意的解决方案之一是我可以使用 PaintEvent，但是，除了 GIT 之外，我没有找到该替代方案的文档，而且我发现的大多数都是 c 语言。我在 Visual Studio 2010 和 Windows 操作系统上使用 C++/CLI。

有关更多详细信息，我的电路板应该是 9x9，下图代表我的最终产品应该是什么样子：

![在此处输入图像描述](../Images/ba0d8a15f493ec18a5a2038a5ae73ec2.png)

可以使用我的版本的哪些替代品？如果您还没有阅读我的完整帖子，我最初的设计是一个由 81 个按钮（水平 9 个，垂直 9 个）组成的板

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:41:30.450

也许，您可能会创建一个带有 0..9 个数字的侧边栏，并且界面可能基于拖放操作。

用户选择一个数字并将其拖到选定的棋盘单元格中。

这适用于基于桌面鼠标的应用程序和基于触摸的移动应用程序。

在这种方法中，您不需要 81 个按钮 - 只需一个接受“DragDrop”事件的面板。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms973845.aspx](http://msdn.microsoft.com/en-us/library/ms973845.aspx)。

祝你好运 ！

# python - pygame.error：视频系统未初始化

> ID：10261774
> 
> 赞同：7
> 
> 时间：2012-04-21T18:29:22.267
> 
> 标签：python, pygame

当我尝试存在游戏时，我似乎无法摆脱这个错误。游戏运行良好，但只有在我尝试存在游戏时才会出现错误。

```
import pygame
from pygame import *
import random
import time
import os
import sys
from pygame.locals import *

black = (0,0,0)
white = (255,255,255)

pygame.init()

def game():

 os.environ['SDL_VIDEO_CENTERED'] = '1'
 mouse.set_visible(False)

#screen
screen_width = 800
screen_height = 500
screen = pygame.display.set_mode([screen_width,screen_height])
#load images etc.
backdrop = pygame.image.load('bg.jpg').convert_alpha()
menu = pygame.image.load('green.jpg').convert_alpha()
ballpic = pygame.image.load('ball.gif').convert_alpha()
mouseball = pygame.image.load('mouseball.gif').convert_alpha()
display.set_caption('Twerk')
back = pygame.Surface(screen.get_size())

def text(text,x_pos,color,font2=28):
    tfont = pygame.font.Font(None, font2)

    text=tfont.render(text, True, color)
    textpos = text.get_rect(centerx=back.get_width()/2)
    textpos.top = x_pos
    screen.blit(text, textpos)

start = False
repeat = False
while start == False:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            start = True
            #falling = True
            #finish = True

        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_SPACE:
                start = True
    #game over screen
    screen.blit(menu,[0,0])
    pygame.display.set_caption("TWERK")

    #Text
    #"Welcome to Escape"
    #needs replacing with logo 
    text("Twerk",60,white,300)

    #"Instructions"
    text("Instructions",310,white)
    text("----------------------------------------------------------------------------------------",320,white)
    text("Avoid the the enemies",340,white)
    text("Last as long as you can!",360,white)
    text("Press space to start",420,white)
    pygame.display.flip()

while start == True:
positionx=[]
positiony=[]
positionxmove=[]
positionymove=[]
falling = False
finish = False
score=0
enemies=4
velocity=1

for i in range(enemies):
  positionx.append(random.randint(300,400)+random.randint(-300,200))
  positiony.append(random.randint(200,340)+random.randint(-200,100))
  positionxmove.append(random.randint(1,velocity))
  positionymove.append(random.randint(1,velocity))

font = pygame.font.Font(None, 28)
text = font.render('Starting Twerk... ', True, (100,100,100))
textRect = text.get_rect()
textRect.centerx = screen.get_rect().centerx
textRect.centery = screen.get_rect().centery

screen.blit(backdrop, (0,0))
screen.blit(text, textRect)
pygame.display.update()
game=time.localtime()

while start == True:
  end=time.localtime()
  score= (end[1]-game[1])*3600 + (end[4]-game[4])*60 + end[5]-game[5]
  if score > 1: break

first=True
strtTime=time.localtime()

while not finish or falling:
  screen.blit(backdrop, (0,0))
  for i in range(enemies):
    screen.blit(ballpic,(positionx[i],positiony[i]))
    (mousex,mousey)=mouse.get_pos()
    screen.blit(mouseball,(mousex,mousey))
    display.update()
    strt = time.localtime()

  if first:
    while True:
      end=time.localtime()
      score= (end[3]-strt[3])*3600 + (end[4]-strt[4])*60 + end[5]-strt[5]
      if score > 3: break
    first = False

  if falling:
    for i in range(enemies):
      positionymove[i]=1000
      positionxmove[i]=0

  for i in range(enemies): positionx[i]=positionx[i]+positionxmove[i]
  for i in range(enemies): positiony[i]=min(600,positiony[i]+positionymove[i])

  if falling:
    falling=False
    for posy in positiony:
      if posy<600: falling=True

  if not falling:
    for i in range(enemies):
      for j in range(i+1,enemies):
        if abs(positionx[i]-positionx[j])<20 and abs(positiony[i]-positiony[j])<20:
          temp=positionxmove[i]
          positionxmove[i]=positionxmove[j]
          positionxmove[j]=temp
          temp=positionymove[i]
          positionymove[i]=positionymove[j]
          positionymove[j]=temp

    for i in range(enemies):  
      if positionx[i]>600: positionxmove[i]*=-1
      if positionx[i]<0: positionxmove[i]*=-1
      if positiony[i]>440: positionymove[i]*=-1
      if positiony[i]<0: positionymove[i]*=-1

    for i in range(enemies):
      if abs(positionx[i]-mousex)<40 and abs(positiony[i]-mousey)<40:
        falling = True
        finish = True
        #start = False
        endTime=time.localtime()
        score= (endTime[3]-strtTime[3])*3600 + (endTime[4]-strtTime[4])*60 + endTime[5]-strtTime[5]
        break

      for event in pygame.event.get():
        if event.type == pygame.QUIT:
          pygame.quit()

          if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_ESCAPE:
              pygame.quit()

game() 
```

这是我得到的错误，我已将 quit() 更改为 QUIT 但仍然没有运气。

```
Traceback (most recent call last):
File "C:\Users\MO\Desktop\Twerk\ballbounce_changed.py", line 171, in <module>
 game()
File "C:\Users\MO\Desktop\Twerk\ballbounce_changed.py", line 160, in game
 for event in pygame.event.get():
 pygame.error: video system not initialized 
```

谢谢你 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T19:01:47.600

当你想退出游戏时，你应该停止你的主循环。

我的建议，无论是

*   调用`exit()`后`pygame.quit()`
*   设置`finish = True`和`start = False`（尽管由于您粘贴的代码存在一些缩进问题，因此无法判断这实际上会起作用）

`pygame.quit()`仅当您想终止 Python 会话时才应调用。

我的建议：如果您想`game()`多次调用，例如在交互式会话中，您应该删除对`pygame.quit()`inside的调用`game()`。这个函数取消初始化 pygame 并且自然所有调用它的功能的尝试都会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T23:48:24.547

您调用了 pygame.quit()，但我认为您还需要调用 sys.exit()。

```
for event in pygame.event.get():
    if event.type == pygame.QUIT:
      pygame.quit()
      sys.exit() 
```

这就是我在所有游戏中所做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T22:36:29.580

我认为这是因为您手动调用 pygame.quit() 。当你的脚本结束时，Pygame 会自动退出。

要仔细检查 pygame 是否正常工作，您可以运行以下样板： http: [//ninmonkey.googlecode.com/hg/boilerplate/pygame/1.%20blank%20screen/1%20-%20basic.%20pygame%20--nocomments .py](http://ninmonkey.googlecode.com/hg/boilerplate/pygame/1.%20blank%20screen/1%20-%20basic.%20pygame%20--nocomments.py)

当你想退出时，设置 done=True。（见上例中的第 37 行和第 64 行。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-03T19:33:25.597

我在使用 Spyder 尝试一些 Kivy 测试文件时遇到了这个问题。就我而言，因为我只是在尝试演示文件，所以很快就可以重新启动内核。

我知道这是一个生硬的解决方案，但是如果您在 IDE 上并且不介意这样做，它比键入命令要快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-12T11:14:18.810

你可以做 ：

```
run = True
while run:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            run = False # Here we exit the Loop and execute what after.
pygame.quit() 
```

它工作正常！

# javascript - 如何访问 AJAX 的数组响应

> ID：10261775
> 
> 赞同：6
> 
> 时间：2012-04-21T18:29:28.610
> 
> 标签：javascript, jquery

这是我的 AJAX 调用响应，它是数组格式

[1,2,3,4,5,6]

```
success: function(outputfromserver) {

$.each(outputfromserver, function(index, el) 
{ 

}); 
```

我们如何从服务器访问输出的所有值？

意味着 outputfromserver 第零个值为 1 ，第二个元素是 2 ，------依此类推

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-21T19:10:54.487

了解您的 AJAX 请求是什么样子会有所帮助。我建议使用 $.ajax() 并将 dataType 指定为 JSON，或者使用 $.getJSON()。

这是一个演示 $.ajax() 的示例，并向您展示如何访问数组中的返回值。

```
$.ajax({
    url: 'test.json', // returns "[1,2,3,4,5,6]"
    dataType: 'json', // jQuery will parse the response as JSON
    success: function (outputfromserver) {
        // outputfromserver is an array in this case
        // just access it like one

        alert(outputfromserver[0]); // alert the 0th value

        // let's iterate through the returned values
        // for loops are good for that, $.each() is fine too
        // but unnecessary here
        for (var i = 0; i < outputfromserver.length; i++) {
            // outputfromserver[i] can be used to get each value
        }
    }
}); 
```

现在，如果您坚持使用 $.each，以下将适用于成功选项。

```
success: function (outputfromserver) {

    $.each(outputfromserver, function(index, el) {
        // index is your 0-based array index
        // el is your value

        // for example
        alert("element at " + index + ": " + el); // will alert each value
    });
} 
```

随意问任何问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T18:33:10.250

该数组是一个有效的 JSON 字符串，您需要使用 JSON 解析器对其进行解析。

```
success: function(outputfromserver) {
    var data = JSON.parse(outputfromserver);
    $.each(data, function(index, el) { 
        // Do your stuff
    });
},
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T18:42:13.397

## 您可以使用像数组这样的 JS 对象

例如这种方式：

```
// Loop through all values in outputfromserver
for (var index in outputfromserver) {
  // Show value in alert dialog:
  alert( outputfromserver[index] );
} 
```

这样您就可以在数组的第一维获取值，上面`for..loop`将获得如下值：

```
// Sample values in array, case: Indexed array
outputfromserver[0];
outputfromserver[1];
outputfromserver[2];
// So on until end of world... or end of array.. whichever comes first.
outputfromserver[...]; 
```

但是，当以这种方式实现时，通过使用`for ( index in array )`我们不仅可以获取索引`1,2,3,4,...`键，还可以获取与命名索引关联的值：

```
// Sample values in array, case: accosiated/mixed array
outputfromserver["name"];
outputfromserver["phone"];
outputfromserver[37];
outputfromserver[37];
outputfromserver["myindex"];
// So on until end of world... or end of array.. whichever comes first.
outputfromserver[...]; 
```

简而言之，数组可以包含索引值和/或名称关联值，这没关系，数组中的每个值仍然被处理。

### 如果你使用多维的东西

然后您可以添加嵌套`for (...)`循环或使用递归函数来遍历所有值。

多维将是这样的：

```
// Sample values in array, case: indexed multidimensional array
outputfromserver[0][0];
outputfromserver[0][1];
outputfromserver[1][0];
outputfromserver[1][...];
outputfromserver[...][...]; 
```

## 更新，JSON 对象：

如果您的服务器返回 JSON 编码字符串，您可以通过以下方式将其转换为 javascript 对象：

```
try { 
    // Try to convert JSON string with jQuery:
    serveroutputobject = $.parseJSON(outputfromserver); 
} catch (e) {
    // Conversion failed, result is not JSON encoded string 
    serveroutputobject = null;
}

// Check if object converted successfully:
if ( serveroutputobject !== null ) {
    // Loop through all values in outputfromserver
    for (var index in serveroutputobject) {
        // Append value inside <div id="results">:
        $('#results').append( serveroutputobject[index] + "<br/>" );
    }
}
// In my own projects I also use this part if server can return normal text too:
// This way if server returned array we parse it and if server returns text we display it. 
else {
    $('#results').html( outputfromserver );
} 
```

更多信息[在这里](http://www.quirksmode.org/js/associative.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T05:58:49.737

```
$.ajax({
    type : "POST",
    dataType: "json",
    url : url,
    data:dataString,
    success: function(return_data,textStatus) {

         temperature.innerText=return_data.temp;
                   // OR
        **temperature.innerText=return_data['temp'];**  

    },
    error: function(jqXHR, textStatus, errorThrown) { 
                 alert("Error while accessing api [ "+url+"<br>"+textStatus+","+errorThrown+" ]"); return false;    
    }
 }); 
```

# matlab - 小于 realmin 的数字

> ID：10261777
> 
> 赞同：5
> 
> 时间：2012-04-21T18:29:38.927
> 
> 标签：matlab, precision

今天我在 Matlab 中偶然发现了这个简单的问题：

```
>> 1/(10^309)

ans =

     0 
```

一切都很好。现在我输入：

```
>> 0.0001/(10^308)

ans =

    9.999999999984653e-313 
```

并变得非常困惑。在 Matlab 中不是最小的数字`realmin=2.225073858507201e-308`吗？为什么上面的输出没有给出`0`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T18:35:44.723

[`realmin`](http://www.mathworks.ch/help/techdoc/ref/realmin.html)返回 IEEE 双精度的最小正**归一化**浮点数。

有更小的正[**非正规**](http://en.wikipedia.org/wiki/Denormal)浮点数。看看“<a href="http://perso.ens-lyon.fr/jean-michel.muller/goldberg.pdf" rel="noreferrer">每个计算机科学家应该知道的关于浮点运算的知识” .

您可能对[`eps`](http://www.mathworks.ch/help/techdoc/ref/eps.html)返回不同数字之间的最小增量更感兴趣。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T18:38:11.637

在`help realmin`中，它说：“REALMIN 最小正归一化浮点数。”

归一化的浮点数在有效数字中没有前导零 - 所以类似于 1.123 * 10^-10。如果有效数字有前导零，例如 0.0001 * 10^-10，则它是非[正规](http://en.wikipedia.org/wiki/Denormal)的。

我认为`eps(0)`给出了 Matlab 中可用的最小非正规数。

# android - AIDL 文件不在 Eclipse 中随机项目中构建？

> ID：10261781
> 
> 赞同：0
> 
> 时间：2012-04-21T18:30:04.840
> 
> 标签：android, adt, aidl

我有一些想要包含在项目中的 AIDL 文件，但是 Eclipse 在不同项目中的工作方式似乎不同。

我正在为应用程序开发 SDK，并且在 SDK android 项目中，AIDL 文件生成正确的 .java 文件，但在主应用程序中，Eclipse 甚至没有尝试构建它。

**更新：**我找到了一个日志文件，上面写着：

```
!ENTRY com.android.ide.eclipse.adt 4 0 2012-04-21 19:22:11.043
!MESSAGE Failed to run one of the source processor
!STACK 0
java.lang.NullPointerException
    at com.android.ide.eclipse.adt.internal.build.AidlProcessor.doCompileFiles(AidlProcessor.java:109)
(include rest of stack here...) 
```

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:45:12.423

我今天遇到了这个确切的问题。事实证明，当您的项目中有实际不存在的源文件夹时，就会发生这种情况。

因此，在您的项目 Java Build Path 中验证所有源文件夹是否确实存在。从那里删除死源文件夹链接后，我的项目再次编译了aidl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T20:29:55.077

根据我的经验，您在项目中创建 .aidl 文件（确保您包含的包是正确的 - 如果不正确，您将收到错误消息）。如果 .aidl 文件很好，将在 gen/ 目录中以正确的包名称创建一个 .java 文件。

接下来，您必须使用将您的 java 代码连接到接口

```
<YourAidlClassName>.Stub myAidlInterface = new <YouAidlClassName>.Stub() {

    // Your AIDL interface methods will appear in here and can now be used
    // in your application as myAidlInterface.methodName();
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:32:48.667

好的，我不明白这一点，但出于某种原因，ubuntu 的 12.04 标记了一个错误。

在一个项目中，我可以调用该文件`IAPPNAMEConect.aidl`，但另一个项目希望它为`IAPPNAMEService.aidl`

我完全忘记了 Java 的严格性

# javascript - iOS 中的 Facebook 评论与 loadHTMLstring

> ID：10261786
> 
> 赞同：0
> 
> 时间：2012-04-21T18:30:35.023
> 
> 标签：javascript, objective-c, ios, facebook, uiwebview

我对 Facebook 评论插件有疑问。是否可以将其嵌入到 iOS 应用程序的 UIWebView 中？我不是说使用 loadUrl 方法……而是使用 loadHTMLstring （我希望它只在我的应用程序本地使用，如果可能的话，不使用任何凌乱的 obj-c 代码）。我正在使用 HTML5 代码，但它不适用于模拟器......

我做错什么了吗？

我读过类似的主题，但没有找到任何可能对我有帮助的解决方案。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:59:11.307

好吧，我找到了一些解决这个问题的方法。我需要的是加载嵌入评论插件的本地 html 页面。此 html 页面存储在项目的资源中。所以我的代码是这样的：

```
 [reviewsView loadRequest:[NSURLRequest requestWithURL:[[NSBundle mainBundle] URLForResource:@"comments" withExtension:@"html"]]]; 
```

`reviewsView`UIWebView 元素在哪里。但是，它最终无法正常工作 - 评论已加载，但 facebook“加载进度条”仍在动画中，并且由于某种原因登录按钮无法点击。所以我只是回到了远程 html 评论页面的想法。

# python - Python ftplib：检查文件是否已更改的最佳方法？

> ID：10261791
> 
> 赞同：3
> 
> 时间：2012-04-21T18:31:59.877
> 
> 标签：python, ftp, ftplib

我希望安排 FTP 文件传输，但为了节省带宽，我只想上传已更改的文件。有什么可靠的方法可以在各种不同的托管服务提供商上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:47:55.483

首先，检查本地文件是否已更改实际上与 FTP 无关。您说的是，如果/当文件发生更改时，您只会打开一个 FTP 连接来上传文件。

在高层次上，您需要采用的基本策略是跟踪您的应用程序上次检查更改的时间（之前的执行时间戳），并将其与您有兴趣上传的文件的时间戳进行比较。如果文件上的时间戳较新，则它们很可能已更改。我说最有可能是因为可以只更新时间戳（例如`touch`在 unix/linux 上）。

这是一个快速示例，向您展示如何检查特定目录中所有项目的修改时间：

```
import os, time

checkdir="./"

for item in os.listdir(checkdir):
    item_path = "%s%s"%(checkdir,item)
    mtime = os.path.getmtime(item_path)
    print "%s: %s" %(item_path,mtime) 
```

请注意，这不区分文件类型（例如常规文件、目录、符号链接）。阅读[os.path 上的文档](http://docs.python.org/library/os.path.html)以了解如何确定文件类型，以便您可以跳过某些类型，如果您愿意的话。

您仍然需要提出逻辑来存储上一次“扫描”的时间，以便在后续扫描中引用它。一个非常简单的方法是在文件中存储一个值。

确保在两个“扫描”重叠的情况下使用锁定策略。FTP 上传需要一些时间才能完成。

# c - NotifyAddrChange 的 Mac OSX 版本是什么？

> ID：10261797
> 
> 赞同：2
> 
> 时间：2012-04-21T18:33:12.967
> 
> 标签：c, macos, networking

我想要一个函数，它会阻塞直到接口为 OS X 绑定/解除绑定（即相当于 Windows' `NotifyAddrChange`。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:38:35.270

你在找`SCNetworkReachability`，看看[参考](https://developer.apple.com/library/mac/#documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html)。

请注意，您需要包含`<SystemConfiguration/SystemConfiguration.h>`才能使用它。

# java - 数组操作，在末尾添加元素，将其他元素推回

> ID：10261802
> 
> 赞同：1
> 
> 时间：2012-04-21T18:33:42.420
> 
> 标签：java, arrays, vector, elements, push-back

我打算做一个小程序，它会显示一个每秒更新几次的图表（可能是 100/200 毫秒左右）。目的是在图中绘制 1000 多个不同的值，有点像 XY 图。

当数组包含 1000 个元素时，我想在最后添加一个新元素，并在此过程中将所有其他元素向后推。本质上，元素 999 会变成 998，而 998 会变成 997……一直到第一个元素，它会被简单地丢弃。有没有人有一个例子或一个好的算法来做到这一点，无论是使用常规数组、Vector、LinkedList 还是任何其他方法？

我的第一个想法是创建一个新数组并将我想要保留的元素复制到新数组中，扔掉前 100 个元素。此时，我将在数组末尾添加新的 100 个元素，并不断重复此过程，但肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:36:28.737

您所问的是算法世界中的双端队列，即双端向量。

这就是你需要的[课程。](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)

基本上 deque 支持从序列的开头和结尾添加和删除元素。

**编辑**实际上，当我阅读文档时，我惊讶地发现 deque 的 sdk 实现不支持直接索引（我习惯于在 C++ 中使用这种结构）。所以我继续搜索并找到[了这个答案](https://stackoverflow.com/a/350102/1108032)，链接到[这个库，](http://sourceforge.net/projects/pcj/)这可能对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:36:39.903

不要使用数组，移动所有元素的复杂性是可怕的！我想说，最适合这项任务的 Java 数据结构是[Deque 。](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T18:49:27.043

我会继续重用同一个数组，然后从头开始。为了让自己更清楚，假设您的数组包含元素 1..1000

```
int[] array =  new int[1000];
...
array = {1, 2, ...., 1000 }; 
```

如果您现在必须添加元素 1001，而不是尝试使用数组 {2, 3, ..., 1000, 1001}，我会选择数组 {1001, 2, 3, ... 1000}跟踪我的数组实际从哪个索引开始。这通过在开始索引处保留一个简单的计数器来代替移动所有元素的困难。为了方便自己，您可以引入一个实用方法

```
private int startIndex = 1;//0 at the start
//I assume we are in the situation with array {1001, 2, 3, ..., 1000 }

public int convertIndex( int index ){
  return (index + startIndex) % 1000;
} 
```

# c++ - 在 C++ 中使用“#define”的替代方法？为什么会被人诟病？

> ID：10261803
> 
> 赞同：12
> 
> 时间：2012-04-21T18:34:03.043
> 
> 标签：c++, coding-style, global-variables, c-preprocessor

我开发 C++ 还不到一年，但在那段时间里，我听到很多人谈论 C++ 有多可怕`#define`。现在，我意识到它是由预处理器而不是编译器解释的，因此无法调试，但这真的那么糟糕吗？

这是一个示例（未经测试的代码，但您大致了解）：

```
#define VERSION "1.2"

#include <string>

class Foo {
  public:
    string getVersion() {return "The current version is "+VERSION;}
}; 
```

1.  为什么这段代码不好？
2.  有没有使用的替代方法`#define`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-21T18:40:43.163

> 为什么这段代码不好？

因为 VERSION 可以被覆盖，编译器不会告诉你。

> 有没有使用#define 的替代方法？

```
const char * VERSION = "1.2"; 
```

或者

```
const std::string VERSION = "1.2"; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-21T18:50:05.433

真正的问题是定义是由与语言的其余部分（预处理器）不同的工具处理的。结果，编译器对此一无所知，并且在出现问题时无法帮助您——例如重用预处理器名称。

考虑`max`有时将其实现为宏的情况。因此，您不能`max`在代码中的任何地方使用标识符。*任何地方*。但是编译器不会告诉你。相反，你的代码会出错，你不知道为什么。

现在，只要小心一点，这个问题就可以最小化（如果不能完全消除的话）。但是对于大多数用途`#define`来说，无论如何都有更好的选择，因此成本/收益计算变得有偏差：*没有任何*好处的轻微劣势。为什么在没有优势的情况下使用有缺陷的功能？

所以这是一个非常简单的图表：

1.  需要常数吗？使用常量（不是定义）
2.  需要功能吗？使用函数（不是定义）
3.  需要无法使用常量或函数建模的东西？使用定义，但要正确执行。

“正确地”做这件事本身就是一门艺术，但有一些简单的指导方针：

1.  使用唯一的名称。所有大写字母，始终以唯一的库标识符作为前缀。`max`? 出去。`VERSION`? 出去。相反，使用`MY_COOL_LIBRARY_MAX`和`MY_COOL_LIBRARY_VERSION`。例如，Boost 库，宏的大用户，总是使用以`BOOST_<LIBRARY_NAME>_`.

2.  小心评价。实际上，宏中的参数只是被替换的文本。结果，`#define MY_LIB_MULTIPLY(x) x * x`被破坏：它可以用作`MY_LIB_MULTIPLY(2 + 5)`，导致`2 + 5 * 2 + 5`. 不是我们想要的。为了防止这种情况发生，请*始终*将论点的*所有*用途括起来（除非您*确切地*知道自己在做什么——剧透：您可能不知道；即使是专家也经常会犯这种错误，令人震惊）。

    这个宏的正确版本是：

    ```
     #define MY_LIB_MULTIPLY(x) ((x) * (x)) 
    ```

但是*仍然*有很多方法可以让宏严重错误，而且，重申一下，编译器在这里帮不了你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-21T18:40:44.240

`#define`本质上并不坏，只是很容易被滥用。对于像版本字符串这样的东西，它可以正常工作，虽然 a`const char*`会更好，但许多程序员使用它的目的远不止于此。`#define`例如，在大多数情况下，使用 typedef 会更好，因此使用 typedef 是很愚蠢的。所以声明没有错`#define`，有些事情没有它们是做不成的。他们必须根据具体情况进行评估。如果你能找到一种不使用预处理器来解决问题的方法，你应该这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-21T19:00:23.060

我不会`#define`用来定义一个常量使用`static`关键字或更好 的`const int kMajorVer = 1;` `const int kMinorVer = 2;` 或者 `const std::string kVersion = "1.2";`

Herb sutter 在这里有一篇很棒的文章详细说明了为什么`#define`不好，并列出了一些确实没有其他方法可以实现相同目标的示例：[http](http://www.gotw.ca/gotw/032.htm) ://www.gotw.ca/gotw/032.htm 。

基本上就像许多事情一样，只要你正确使用它就可以了，但它很容易被滥用，而且宏错误特别神秘，而且是调试的错误。

我个人将它们用于条件调试代码以及​​变体数据表示，这在 sutter 文章的末尾进行了详细说明。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T18:44:35.777

一般来说，预处理器很糟糕，因为它创建了一个不安全的两遍编译过程，产生了难以解码的错误消息，并且可能导致难以阅读的代码。如果可能，您不应该使用它：

```
const char* VERSION = "1.2" 
```

但是，在某些情况下，如果没有预处理器就不可能做你想做的事情：

```
#define Log(x) cout << #x << " = " << (x) << endl; 
```

# android - 单击imageview时Android小部件启动活动

> ID：10261811
> 
> 赞同：1
> 
> 时间：2012-04-21T18:35:07.207
> 
> 标签：android, logging, widget, android-activity

我正在为安卓开发一个模拟时钟小部件我在小部件中有一个图像视图，我需要向它添加一个点击监听器，所以当它被点击时它将启动一个活动（facebook 分享活动）这里是代码

```
public class Widget extends AppWidgetProvider
{    
    public void onReceive(Context context, Intent intent)
    { 
        super.onReceive(context, intent);
        PackageManager packageManager = context.getPackageManager();
        Intent alarmClockIntent = new Intent(Intent.ACTION_MAIN).addCategory(Intent.CATEGORY_LAUNCHER);
        Log.d("ARH","CLICKK");
        String clockImpls[][] = {
                {"HTC Alarm Clock", "com.htc.android.worldclock", "com.htc.android.worldclock.WorldClockTabControl" },
                {"Standar Alarm Clock", "com.android.deskclock", "com.android.deskclock.AlarmClock"},
                {"Froyo Nexus Alarm Clock", "com.google.android.deskclock", "com.android.deskclock.DeskClock"},
                {"Moto Blur Alarm Clock", "com.motorola.blur.alarmclock",  "com.motorola.blur.alarmclock.AlarmClock"},
                {"Samsung Galaxy Clock", "com.sec.android.app.clockpackage","com.sec.android.app.clockpackage.ClockPackage"}
        };

        boolean foundClockImpl = false;

        for(int i=0; i<clockImpls.length; i++) {
            String vendor = clockImpls[i][0];
            String packageName = clockImpls[i][1];
            String className = clockImpls[i][2];
            try {
                ComponentName cn = new ComponentName(packageName, className);
                ActivityInfo aInfo = packageManager.getActivityInfo(cn, PackageManager.GET_META_DATA);
                alarmClockIntent.setComponent(cn);   
                foundClockImpl = true;
            } catch (Exception e) {
                System.out.println(vendor + " does not exists");
            }
        }

        if (foundClockImpl) {
            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, alarmClockIntent, 0);
            String action = intent.getAction();
            Log.v("info",action);
            if (AppWidgetManager.ACTION_APPWIDGET_UPDATE.equals(action))
            {

                RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);

                Intent fbook = new Intent(context,FacebookShare.class);
                PendingIntent fbookPIntent = PendingIntent.getActivity(context, 0, fbook, 0);  

                views.setOnClickPendingIntent(R.id.facebooksharebtn, fbookPIntent); 
                AppWidgetManager.getInstance(context).updateAppWidget(intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS), views);
            }else{ 
            }
        }

    }

} 
```

而需要出现的活动是

```
public class FacebookShare extends Activity {

    Facebook facebook = new Facebook("304105172993733");  
    boolean isLoggedIn = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.facebook);

        facebook.authorize(this, new String[]{"publish_stream"}, new DialogListener(){

            public void onComplete(Bundle values) {

                Log.d("COMPLETE","AUTH COMPLETE. VALUES: "+values.size());
                Log.d("AUTH TOKEN","== "+values.getString(Facebook.TOKEN));
                updateStatus(values.getString(Facebook.TOKEN));
            }

            public void onFacebookError(FacebookError e) {
                Log.d("FACEBOOK ERROR","FB ERROR. MSG: "+e.getMessage()+", CAUSE: "+e.getCause());
            }

            public void onError(DialogError e) {
                Log.e("ERROR","AUTH ERROR. MSG: "+e.getMessage()+", CAUSE: "+e.getCause());
            }

            public void onCancel() {
                Log.d("CANCELLED","AUTH CANCELLED");
            }
        });
    }

    public void updateStatus(String accessToken){
        try {
            Bundle bundle = new Bundle();
            bundle.putString("message", "test update");  
            bundle.putString(Facebook.TOKEN,accessToken); 
            String response = facebook.request("me/feed",bundle,"POST");
            Log.d("UPDATE RESPONSE",""+response);
        } catch (MalformedURLException e) {
            Log.e("MALFORMED URL",""+e.getMessage());
        } catch (IOException e) {
            Log.e("IOEX",""+e.getMessage());
        }
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        Log.d("onActivityResult","onActivityResult");
        facebook.authorizeCallback(requestCode, resultCode, data);
    }

} 
```

两者都在同一个包中

这是我单击图像视图时遇到的异常

> E/AndroidRuntime(1130): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.mnet.rockwell.widgets.AnalogClock/com.mnet.widgets.AnalogClock.FacebookShare}: android.view.InflateException: 二进制 XML 文件行#31: 膨胀类 android.widget.FrameLayout 时出错

这也是我在 logcat 上没有得到任何日志

这是我尝试过的日志

```
 Log.d("ARH","CLICKK");
Log.e("ARH","CLICKK");
Log.v("ARH","CLICKK");
Log.i("ARH","CLICKK"); 
```

我是 Android 开发新手，但我是 Java 开发人员，请提供任何建议

这是 facebook.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Thank You For Sharing Rockwell Widget" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView1"
        android:layout_marginRight="27dp"
        android:layout_marginTop="40dp"
        android:text="   Close   " />

</RelativeLayout> 
```

# c# - 多个标签

> ID：10261816
> 
> 赞同：2
> 
> 时间：2012-04-21T18:35:44.803
> 
> 标签：c#, label

我想在我的表单中使用多个标签。我正在使用以下代码：

```
 Label[] lblLeftUp = new Label[12];
 for (int i = 0; i < 12; i++)
 {
    lblLeftUp[i] = new Label();
    lblLeftUp[i].Location = new Point((100 + (20 * i)), 100);
    lblLeftUp[i].Text = Convert.ToString(i + 1);
    this.Controls.Add(lblLeftUp[i]);
 } 
```

但是，我只能看到一个标签。有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:54:59.680

标签相互阻挡。所以试试这个：

```
lblLeftUp[i].AutoSize = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T19:18:54.957

发生这种情况是因为`lblLeftUp[i].Location = new Point((100 + (20 * i)), 100);`. 你怎么看，你为以下标签设置了错误的位置。事实上*20*是不够的。所以我的建议是根据标签的大小设置位置。因此，如果您想要水平排列的标签。试试这个：

```
Label[] lblLeftUp = new Label[12];
int PointX = 100; //100 is the initial distance from the left border of the control
for (int i = 0; i < 12; i++)
{
   lblLeftUp[i] = new Label();
   lblLeftUp[i].Location = new Point(PointX, 100);
   lblLeftUp[i].Text = Convert.ToString(i + 1);
   this.Controls.Add(lblLeftUp[i]);
   PointX += lblLeftUp[i].Width;
} 
```

# java - UTF-8 字符中的字符常量无效

> ID：10261820
> 
> 赞同：1
> 
> 时间：2012-04-21T18:35:59.717
> 
> 标签：java, character-encoding

我正在尝试将“o͝”（语音字符）分配给 Java 程序中的字符，但出现错误“字符常量无效”。我的文件使用 UTF-8 和其他拼音字符可以正常工作，但不是这个。看起来这个字符实际上是两个（一个'o'和一个连字或类似的东西），但我无法打破它正在形成的部分。

代码示例：

```
Character test = 'o͝'; 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T18:51:13.080

该字形称为“[结合双短](http://www.fileformat.info/info/unicode/char/35d/index.htm)的小写字母 o ”，在源代码中可以写为；

```
String a = "\u006f\u035d"; 
```

由于它是一个组合字符（即*两个字符*），因此不能将结果值分配给单个 Java 字符，您需要使用字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T18:39:24.253

您可以尝试查看字符表上的字符编号并将其分配给变量，例如：

```
char a = '\u0040'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T18:56:44.327

如前所述，您不应该对这样的字符进行硬编码，您应该使用此处找到的 unicode 点值：

[http://www.utf8-chartable.de/](http://www.utf8-chartable.de/)

你想要的实际上涉及一个“组合字符”：

[http://en.wikipedia.org/wiki/Combining_character](http://en.wikipedia.org/wiki/Combining_character)

组合变音符号是 0x0300 - 0x036f。因此，例如，要创建您想要的字符（'o' 带双短号），请使用：

```
String o_doubleBreve = "o\u035d"; 
```

打印为 o͝

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-27T18:32:41.170

我同意上面的答案，即在您碰巧编写的任何新代码中给出 \u 表示是最好的，但是人们会遇到源代码存在此问题的项目，并且*据说*他们能够编译他们的代码。我现在正在使用的一个这样的例子是[openNLP](http://opennlp.sourceforge.net/)。

好吧，如果你遇到这样的事情，你会看到在像 Eclipse 这样的 IDE 中运行时，如果你遵循这样的过程[，](https://stackoverflow.com/questions/9180981/how-to-support-utf-8-encoding-in-eclipse)你可以将工作区的默认表示更改为 UTF-8。这将允许成功编译代码。

# android - Android如何处理照片

> ID：10261821
> 
> 赞同：0
> 
> 时间：2012-04-21T18:36:04.927
> 
> 标签：android, photo

我正在使用 Intent 开发基于 Android 相机的应用程序。拍摄照片后，我可以看到照片和两个按钮 - “保存”和“取消”。我想要做的是不要等待用户选择这两个按钮之一，而是开始处理这张照片，然后根据处理结果做进一步的动作。

到目前为止，我一直在这样做：

```
CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;

protected void startCameraActivity()
{
    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );

    // the method below is my method for setting proper path for my image file
    fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE); // create a file to save the image

    intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name

    startActivityForResult( intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE );
} 
```

当我启动我的应用程序时调用此方法。所以我用相机启动我的应用程序。然后我拍照。我可以选择“保存”或“取消”。当我选择一个时，会调用此方法：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            // Image captured and saved to fileUri specified in the Intent

            onPhotoTaken();    // processing...

        } else if (resultCode == RESULT_CANCELED) {
            // User cancelled the image capture
        } else {
            // Image capture failed, advise user
        }
    }
} 
```

收到正确的 resultCode 后，我从文件中加载该图像，然后开始处理它。

现在我的问题是：**如果我可以在调用 onActivityResult 方法之前获得该图像？单击这些按钮之一后调用它。**

（我想以与 google google 类似的方式进行操作 - 用户拍摄照片并且该照片正在被立即处理）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:56:03.077

您将需要实现自己的拍照活动，类似于[此](http://www.brighthub.com/mobile/google-android/articles/43414.aspx)（包括页面末尾的源代码）。

与使用 simple 相比，直接设置它需要一些时间`Intent`，但之后您可以直接访问所有相机功能，包括相机图像，甚至在调用活动可用之前。

# android - 在 open gl 中绘制文本不清楚

> ID：10261822
> 
> 赞同：1
> 
> 时间：2012-04-21T18:36:08.987
> 
> 标签：android, opengl-es

![在此处输入图像描述](../Images/6962dc6fd7b1a528c7254a118d5e9162.png)

我正在使用这个 font.png 但在游戏中它看起来并不清晰。如何在我的游戏中绘制清晰的文本？将文本渲染为纹理，如[在 OpenGL ES 中绘制文本](https://stackoverflow.com/questions/1339136/draw-text-in-opengl-es-android)比我的解决方案更合乎逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:58:49.940

您是否为您的 OpenGL 上下文启用了混合？

在 OnSurfaceCreated() 中尝试以下代码：

```
gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
gl.glEnable(GL10.GL_BLEND); 
```

**编辑：** 此代码适用于您的纹理：只需将您的纹理重命名为“text.png”并将其放入 res/raw/

```
//////////////////////////////
// TextureTestActivity.java

package com.TextureTest.TextureTest;
import android.app.Activity;
import android.os.Bundle;
import android.content.Context;
import android.opengl.GLSurfaceView;

public class TextureTestActivity extends Activity {
    private GLSurfaceView mGLView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mGLView = new TextureTestSurfaceView(this);
        setContentView(mGLView);
    }

    @Override
    protected void onPause() {
        super.onPause();
        mGLView.onPause();
    }

    @Override
    protected void onResume() {
        super.onResume();
        mGLView.onResume();
    }
}

class TextureTestSurfaceView extends GLSurfaceView {
    public TextureTestSurfaceView(Context context) {
        super(context);
        setEGLConfigChooser(false);
        setRenderer(new TextureTestRenderer(context));
    }
}

//////////////////////////////
// TextureTestRenderer.java
package com.TextureTest.TextureTest;
import java.io.InputStream;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.opengl.GLES10;
import android.opengl.GLSurfaceView;
import android.opengl.GLU;
import android.opengl.GLUtils;
public class TextureTestRenderer implements GLSurfaceView.Renderer {
    Context context;
    int textureID;

    float vertices[] = {
            -1.0f,  1.0f, 0.0f,
            -1.0f, -1.0f, 0.0f,
             1.0f,  1.0f, 0.0f,
             1.0f, -1.0f, 0.0f
             };

    float texcoords[] = {
            0.0f, 0.0f,
            0.0f, 1.0f,
            1.0f, 0.0f,
            1.0f, 1.0f,
            };

    FloatBuffer texCoordBuffer;
    FloatBuffer vertexBuffer;

    TextureTestRenderer(Context context) {
        this.context = context;
    }

    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        // set gl options
        gl.glClearColor(0.5f, 0.5f, 0.5f, 1.0f);

        gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
        gl.glEnable(GL10.GL_BLEND);

        // create texture
        int textures[] = new int[1];
        gl.glGenTextures(1, textures, 0);
        textureID = textures[0];

        gl.glBindTexture(GL10.GL_TEXTURE_2D, textureID);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_CLAMP_TO_EDGE);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_CLAMP_TO_EDGE);

        InputStream is = context.getResources().openRawResource(R.raw.text);
        Bitmap textBitmap = BitmapFactory.decodeStream(is);

        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, textBitmap, 0);
        textBitmap.recycle();

        // create vertex and texcoord buffers
        ByteBuffer vbb = ByteBuffer.allocateDirect(4 * 3 * 4);
        vbb.order(ByteOrder.nativeOrder());
        vertexBuffer = vbb.asFloatBuffer();

        ByteBuffer tbb = ByteBuffer.allocateDirect(4 * 2 * 4);
        tbb.order(ByteOrder.nativeOrder());
        texCoordBuffer = tbb.asFloatBuffer();

        for (int v = 0; v < 4; v++)
            for(int c = 0; c < 3; c++)
                vertexBuffer.put(vertices[v * 3 + c]);

        for (int v = 0; v < 4; v++)
            for(int c = 0; c < 2; c++)
                texCoordBuffer.put(texcoords[v * 2 + c]);

        vertexBuffer.position(0);
        texCoordBuffer.position(0);

        // set up view matrices
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();

        GLU.gluLookAt(gl, 0.0f, 0.0f, 5.0f,
                          0.0f, 0.0f, 0.0f,
                          0.0f, 1.0f, 0.0f);
    }

    public void onDrawFrame(GL10 gl) {
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

        gl.glEnable(GL10.GL_TEXTURE_2D);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        gl.glBindTexture(GL10.GL_TEXTURE_2D, textureID);
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
        gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, texCoordBuffer);

        gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
    }

    public void onSurfaceChanged(GL10 gl, int width, int height) {
        GLES10.glViewport(0, 0, width, height);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:14:39.230

我知道这有点晚了……但这似乎是一个过滤问题。尝试对纹理使用“最近”过滤（而不是“线性”）。这可以通过以下方式完成：

```
gl.glTexParameterf( GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST );
gl.glTexParameterf( GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_NEAREST ); 
```

在渲染之前调用它，然后您可以在渲染之后通过再次调用这两种方法设置回“线性”过滤，但使用`GL10.GL_LINEAR`而不是`GL10.GL_NEAREST`.

但是，您不需要这两个调用，第一个用于纹理渲染**小于**其实际分辨率时，第二个用于渲染**较大**时。根据我的经验，对于文本的可读性最好在渲染较小时使用“最近”过滤，在渲染较大时使用“线性”；但这是主观的，因此您应该尝试并找到最适合您的方法。

# c# - 如何通过反射获得一个类型的所有常量？

> ID：10261824
> 
> 赞同：180
> 
> 时间：2012-04-21T18:36:23.100
> 
> 标签：c#, .net, reflection, constants

如何使用反射获得任何类型的所有常量？

* * *

## 回答 #1

> 赞同：321
> 
> 时间：2012-04-21T18:38:40.497

虽然这是一个旧代码：

```
private FieldInfo[] GetConstants(System.Type type)
{
    ArrayList constants = new ArrayList();

    FieldInfo[] fieldInfos = type.GetFields(
        // Gets all public and static fields

        BindingFlags.Public | BindingFlags.Static | 
        // This tells it to get the fields from all base types as well

        BindingFlags.FlattenHierarchy);

    // Go through the list and only pick out the constants
    foreach(FieldInfo fi in fieldInfos)
        // IsLiteral determines if its value is written at 
        //   compile time and not changeable
        // IsInitOnly determines if the field can be set 
        //   in the body of the constructor
        // for C# a field which is readonly keyword would have both true 
        //   but a const field would have only IsLiteral equal to true
        if(fi.IsLiteral && !fi.IsInitOnly)
            constants.Add(fi);           

    // Return an array of FieldInfos
    return (FieldInfo[])constants.ToArray(typeof(FieldInfo));
} 
```

[来源](http://weblogs.asp.net/whaggard/archive/2003/02/20/2708.aspx)

您可以使用泛型和 LINQ 轻松地将其转换为更简洁的代码：

```
private List<FieldInfo> GetConstants(Type type)
{
    FieldInfo[] fieldInfos = type.GetFields(BindingFlags.Public |
         BindingFlags.Static | BindingFlags.FlattenHierarchy);

    return fieldInfos.Where(fi => fi.IsLiteral && !fi.IsInitOnly).ToList();
} 
```

或者用一行：

```
type.GetFields(BindingFlags.Public | BindingFlags.Static |
               BindingFlags.FlattenHierarchy)
    .Where(fi => fi.IsLiteral && !fi.IsInitOnly).ToList(); 
```

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2017-01-12T16:16:54.050

如果您想从目标类型中获取特定类型的所有常量的*值，这里有一个扩展方法（扩展此页面上的一些答案）：*

```
public static class TypeUtilities
{
    public static List<T> GetAllPublicConstantValues<T>(this Type type)
    {
        return type
            .GetFields(BindingFlags.Public | BindingFlags.Static | BindingFlags.FlattenHierarchy)
            .Where(fi => fi.IsLiteral && !fi.IsInitOnly && fi.FieldType == typeof(T))
            .Select(x => (T)x.GetRawConstantValue())
            .ToList();
    }
} 
```

那么对于这样的课程

```
static class MyFruitKeys
{
    public const string Apple = "apple";
    public const string Plum = "plum";
    public const string Peach = "peach";
    public const int WillNotBeIncluded = -1;
} 
```

您可以像这样获得`string`常量值：

```
List<string> result = typeof(MyFruitKeys).GetAllPublicConstantValues<string>();
//result[0] == "apple"
//result[1] == "plum"
//result[2] == "peach" 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-12-11T16:55:39.407

作为类型扩展：

```
public static class TypeExtensions
{
    public static IEnumerable<FieldInfo> GetConstants(this Type type)
    {
        var fieldInfos = type.GetFields(BindingFlags.Public | BindingFlags.Static | BindingFlags.FlattenHierarchy);

        return fieldInfos.Where(fi => fi.IsLiteral && !fi.IsInitOnly);
    }

    public static IEnumerable<T> GetConstantsValues<T>(this Type type) where T : class
    {
        var fieldInfos = GetConstants(type);

        return fieldInfos.Select(fi => fi.GetRawConstantValue() as T);
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-07T05:15:51.913

用来`property.GetConstantValue()`获取价值。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-04-20T02:20:58.817

```
public class Constants
{
    public class InputType
    {
        public const string DOCUMENTPHOTO = "document-photo";
        public const string SELFIEPHOTO = "selfie-photo";
        public const string SELFIEVIDEO = "selfie-video";
        public static List<string> Domain { get { return typeof(Constants.InputType).GetAllPublicConstantValues<string>(); } }
    }
    public class Type
    {
        public const string DRIVINGLICENSE = "driving-license";
        public const string NATIONALID = "national-id";
        public const string PASSPORT = "passport";
        public const string PROOFOFRESIDENCY = "proof-of-residency";
        public static List<string> Domain { get { return typeof(Constants.Type).GetAllPublicConstantValues<string>(); } }
    }
    public class Page
    {
        public const string FRONT = "front";
        public const string BLACK = "back";
        public static List<string> Domain { get { return typeof(Constants.Page).GetAllPublicConstantValues<string>(); } }
    }
    public class FileType
    {
        public const string FRONT = "selfie";
        public const string BLACK = "video";
        public const string DOCUMENT = "document";
        public const string MEDIA = "media";
        public const string CAPTCHA = "captcha";
        public const string DIGITALSIGNATURE = "digitalSignature";
        public static List<string> Domain { get { return typeof(Constants.FileType).GetAllPublicConstantValues<string>(); } }
    }
}

public static class TypeUtilities
{
    public static List<T> GetAllPublicConstantValues<T>(this Type type)
    {
        return type
            .GetFields(BindingFlags.Public | BindingFlags.Static | BindingFlags.FlattenHierarchy)
            .Where(fi => fi.IsLiteral && !fi.IsInitOnly && fi.FieldType == typeof(T))
            .Select(x => (T)x.GetRawConstantValue())
            .ToList();
    }
} 
```

使用： var inputTypeDomain = Constants.InputType.Domain;

# c# - C#，找不到与 oAuth 和 facebook 服务器端登录过程一起使用的 UrlEncoder

> ID：10261828
> 
> 赞同：0
> 
> 时间：2012-04-21T18:36:37.970
> 
> 标签：c#, facebook, facebook-graph-api, oauth, urlencode

我正在尝试在我的 C# MVC 应用程序中使用 facebook 进行服务器端登录过程。

在我的应用程序中提交状态更新时，它必须在 facebook 上发布，我重定向到：

```
https://www.facebook.com/dialog/oauth?client_id={0}&scope={1}&redirect_uri={2} 
```

使用此方法：

```
Response.Redirect(...); 
```

我的重定向 uri 编码如下：

```
HttpUtility.UrlEnconde("http://local.mydomain.com/getAuthToken?message=the original message"); 
```

回到我的 MVC 应用程序（接受 fb 权限后），getAuthToken 操作向 URI 发出请求：

```
 https://graph.facebook.com/oauth/access_token?client_id={0}&client_secret={1}&code={2}&redirect_uri={3} 
```

使用此方法：

```
 using (var wc = new WebClient()){
      wc.DownloadString(...)
 } 
```

我的重定向 uri 再次编码如下：

```
 HttpUtility.UrlEnconde("http://local.mydomain.com/getAuthToken?message=the original message"); 
```

**如果“*原始消息*”不包含空格，它可以工作，但是当我开始添加空格和其他特殊字符时，我得到一个 OAuth 异常：**

*验证验证码时出错*

所以我的问题是，**我应该使用什么样的 URL Enconding 才能使其工作**

[我在这里](http://blog.stephendenton.com/code/a-proper-urlencode-function-for-oauth-in-c-sharp/)找到了一些东西，但我遇到了同样的错误，我不知道我是否需要一种特殊的方法来进行重定向，或者我是否需要为这两个请求使用不同的编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:04:51.530

为了解决这个问题，我用它来编码：

```
static public string EncodeTo64(string toEncode)
  {
     byte[] toEncodeAsBytes
           = Encoding.ASCII.GetBytes(toEncode);
     string returnValue
           = Convert.ToBase64String(toEncodeAsBytes);
     return returnValue;
  } 
```

这要解码

```
 static public string DecodeFrom64(string encodedData)
  {
     byte[] encodedDataAsBytes
         = Convert.FromBase64String(encodedData);
     string returnValue =
        Encoding.ASCII.GetString(encodedDataAsBytes);
     return returnValue;
  } 
```

万一有人需要它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T20:01:05.823

我建议你看看 Dino Cheisa 的优秀 OAuth.Manager 类。这会正确执行 URL 编码。您可以从[http://cheeso.members.winisp.net/OAuthManager1.1/html/N_OAuth.htm获取](http://cheeso.members.winisp.net/OAuthManager1.1/html/N_OAuth.htm)

# windows - 将 WAS 作为服务运行

> ID：10261833
> 
> 赞同：1
> 
> 时间：2012-04-21T18:36:58.717
> 
> 标签：windows, websphere

将 WAS 或 WPS 作为 Windows 服务运行意味着什么？它与将其作为 java 应用程序运行有何不同？我从来没有将它作为服务运行......所以我想知道是否有什么我错过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:16:41.320

尝试阅读这篇文章，看看这是否有助于您更好地理解 WAS 作为 Windows 服务

[http://www.ibm.com/developerworks/websphere/techjournal/1010_supauth/1010_supauth.html](http://www.ibm.com/developerworks/websphere/techjournal/1010_supauth/1010_supauth.html)

HTH芒鲁

# jquery - 从另一个函数的 if/else 设置变量

> ID：10261835
> 
> 赞同：0
> 
> 时间：2012-04-21T18:37:09.577
> 
> 标签：jquery, serialscroll

由于需要考虑 CSS 边距的变化，我在处理这段代码时遇到了问题。我想通过在函数中添加if/else来更改`var $offset`插件中的。我是 javascript 的新手，我不确定如何正确执行此操作。`serialScroll``$margins``.keybind`

这是我的代码：

```
 jQuery(function( $ )                                   
{                           
    var $nav = $('#slideshow li');  
    var $margins = 0;
    var $offset = (-220 + $margins);    //this offsets the elements 

$('#maincontent').serialScroll(             //serialscroll
    {
    items:'li',
    prev:'.leftArrow, div.logo#logo',
    next:'.rightArrow',
    offset:$offset,
    start:0,
    duration:500,
    force:false,
    stop:true,                          
    easing:'swing',
    navigation:$nav,        
    onBefore:function(e,el,$p,$i,pos)
        {
        $nav.removeAttr('id'),     //this removes id from old element
        $nav.eq(pos).attr("id","yourit"),//this adds id to new element
        $nav.removeClass('select'),    //this removes class from old element
        $nav.eq(pos).addClass('select'); //this adds class to new element
        },

/*///////////////////////////////////////////////////////
                keyboard binds
*////////////////////////////////////////////////////////

var $pane = $('#maincontent')               
$(document).keydown(function(e) //keyboard bind 
    {
    if( e.keyCode == 39 )     //right (->)
        {   
        if 
            ($('.selectstyle').hasClass("selectstyle"))
                {
                $margins = -180; //i want to get this value and add it to my $offset var
                $(".selectstyle" ).removeClass( "selectstyle", 200);
                $pane.trigger('next');
                return false;
                }               
        else
                ($(".select" ).hasClass("select"))
                {
                $margins = 0; //ditto with this var if true
                $(".select" ).removeClass( "select", 200);
                $pane.trigger('next');
                return false;
                }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:47:45.220

你声明了`$margins`在函数中声明，因此您将其设为局部变量。如果希望其他函数使用它，则需要在函数外部声明它并使其全局化。

尝试在您在顶部声明的`var $margins = 0;`位置旁边声明。然后从 if-else 语句中删除旁边`$offset`的单词。`var``$margins`

希望它会有所帮助。

# apache-flex - flex itemRenderer 变量从/到主范围

> ID：10261836
> 
> 赞同：0
> 
> 时间：2012-04-21T18:37:12.853
> 
> 标签：apache-flex, datagrid, scope, actionscript-2, itemrenderer

我正在创建一个具有复选框列的数据网格。我有一些在 itemRenderer 中运行的函数，这些函数创建了一个包含项目信息和天气的数组集合，复选框是否被选中。

一切似乎都按我想要的方式工作，但现在我只需要访问在我的主应用程序的 itemRenderer 范围内创建的 arraycollection。我怎样才能访问这个？

这是在 itemRenderer 中创建 AC 的函数

```
private function onChange():void {
      data["isSelected"] = cb.selected;
        var dp:ArrayCollection = _dataGrid.dataProvider as ArrayCollection;
        dp.dispatchEvent(new CollectionEvent(CollectionEvent.COLLECTION_CHANGE));               
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:49:07.077

我支持让专用事件通过 DataGrid 向控制器冒泡的方法。这使您可以创建松散耦合的组件，并且也易于实现。

# java - 使用 Wicket Tester 时如何在单元测试中保持组件路径不变

> ID：10261839
> 
> 赞同：5
> 
> 时间：2012-04-21T18:37:21.797
> 
> 标签：java, datatable, wicket, wicket-tester

我有几个针对可排序数据表的检票口测试，特别是 ajax 单击可排序的列标题并断言呈现的正文行的内容。现在表格组件后代的组件层次结构由 wicket 框架自动生成，并导致排序链接 (ajax) 的路径类似于：

```
table:topToolbars:toolbars:0:headers:1:header:orderByLink 
```

但是，当跨测试重新渲染 DataTable 时，工具栏组件的索引每次都会增加，即类似于：

```
table:topToolbars:toolbars:1:headers:1:header:orderByLink 
```

然后会破坏后续测试的硬编码路径，因为它们将不再匹配。

数据表构建的代码片段如下：

```
 final PayeesProvider dataProvider = new PayeesProvider();
    table = new DataTable<ResponsePayeeDetails>("payees", columns, dataProvider, rowsPerPage);
    table.setOutputMarkupId(true);
    table.addTopToolbar(new AjaxFallbackHeadersToolbar(table, dataProvider) {

        private static final long serialVersionUID = -3509487788284410429L;

        @Override
        protected WebMarkupContainer newSortableHeader(final String borderId, final String property, final ISortStateLocator locator) {
            return new AjaxFallbackOrderByBorder(borderId, property, locator, getAjaxCallDecorator()) {

                @Override
                protected void onRender() {
                    System.out.printf("Path: %s\n", this.getPageRelativePath());
                    super.onRender();
                }

                private static final long serialVersionUID = -6399737639959498915L;

                @Override
                protected void onAjaxClick(final AjaxRequestTarget target) {
                    target.add(getTable(), navigator, navigatorInfoContainer);
                }

                @Override
                protected void onSortChanged() {
                    super.onSortChanged();
                    getTable().setCurrentPage(0);
                }
            };
        }
    });
    table.addBottomToolbar(new NoRecordsToolbar(table));
    add(table); 
```

准确地说，当我运行测试时，上面的 System.out.printf 语句会打印：

（第一次测试）

```
Path: payees:topToolbars:toolbars:0:headers:1:header
Path: payees:topToolbars:toolbars:0:headers:2:header 
```

（第二次测试）

```
Path: payees:topToolbars:toolbars:2:headers:1:header
Path: payees:topToolbars:toolbars:2:headers:2:header 
```

（第三次测试）

```
Path: payees:topToolbars:toolbars:4:headers:1:header
Path: payees:topToolbars:toolbars:4:headers:2:header 
```

（第四次测试）

```
Path: payees:topToolbars:toolbars:6:headers:1:header
Path: payees:topToolbars:toolbars:6:headers:2:header
Path: payees:topToolbars:toolbars:6:headers:1:header
Path: payees:topToolbars:toolbars:6:headers:2:header
Path: payees:topToolbars:toolbars:6:headers:1:header
Path: payees:topToolbars:toolbars:6:headers:2:header 
```

（第五次测试）

```
Path: payees:topToolbars:toolbars:8:headers:1:header
Path: payees:topToolbars:toolbars:8:headers:2:header 
```

有谁知道我如何强制索引生成更具确定性/可重复性。或者，是否有一种通配符或以其他方式概括路径的方法，以使它们不受这些增量的影响？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:47:15.173

确定路径可能非常困难，但不是必需的，因为这将包括集成测试而不是单元测试。测试列的排序不应依赖于周围的表，因此您可以在测试用例中创建一个虚拟表，为测试添加标题和一列（要排序的列）。如果您有工具栏对象，您可以立即使用它，也可以通过发出`getComponent(toolbar.getPageRelativePath())`. 但是确保一个`AjaxFallbackOrderByBorder`实际工作不应该是你作为这个类的用户关心的问题。这应该由类的创建者完成。您只需要测试自己的代码（例如数据提供程序中的排序代码）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-26T19:04:17.887

id 每次都会递增，因为 default`DataTable` `ItemReuseStrategy`每次刷新表时都会生成全新的项目。`ItemReuseStrategy`如果保持 id 相同是重中之重，您可能会幸运地实现自定义。

我们遇到了类似的问题，并已确定与您的替代问题一致的策略。有了这个，您可以要求测试检查例如最后呈现页面上的第三行。注意：代码在 Scala 中。

简而言之，为了解决这个问题，我们实现了一种`findNthComponentOnPage`方法来增强`WicketTester`.

```
/**
  * @param id Wicket id of component to find
  * @param n 1-based
  * @tparam T class of component to find
  * @return the Nth component of class T appearing on the lastRenderedPage
  */
def findNthComponentOnPage[T <: Component : ClassTag](id: String, n: Int): T = {
  tester.getLastRenderedPage.visitChildren(classTag[T].runtimeClass, new IVisitor[T, T] {
    var count = 0

    override def component(checkbox: T, visit: IVisit[T]): Unit = {
      if (checkbox.getId == id) {
        count += 1
        if (count == n) {
          visit.stop(checkbox)
        }

      }
    }
  })
} 
```

# css - iOS视网膜野生动物园错误渲染边框半径？

> ID：10261845
> 
> 赞同：1
> 
> 时间：2012-04-21T18:38:19.953
> 
> 标签：css, ios, html, webkit, mobile-safari

使用以下 css，我在 iOS webview 浏览器中呈现了一个轻微的锯齿状或不平滑的圆圈。有人知道修复吗？它以任何边框宽度显示，并且可以使用 iPhone 上的高密度视网膜显示屏检测低至 1 像素的事件。

```
a.circle {
    display: block;
    position:absolute;
    z-index:10000;
    border: 6px solid #000;
    box-shadow:inset 0px 0px 0px 1px #ccc;
    width:54px;
    height:54px;
    top:352px;
    left:123px;
    border-radius: 99px;
    background-color: #fff;
}

a.circle:active {
    box-shadow:inset 0px 0px 0px 1px #fff;
} 
```

请注意边框和内部 1px 阴影上的轻微硬线和有点角度的线： ![在此处输入图像描述](../Images/3e489044a2764e015d753b53f149410f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T09:33:57.473

[http://www.css-101.org/articles/-webkit-transform-rotate-and-anti-aliasing/rotate-creates-jagged-border-image.php](http://www.css-101.org/articles/-webkit-transform-rotate-and-anti-aliasing/rotate-creates-jagged-border-image.php)

这是一个稍微不同的问题，但它与 iOS 直接相关。

# android - 我如何在异步任务中得到这个

> ID：10261849
> 
> 赞同：0
> 
> 时间：2012-04-21T18:38:42.683
> 
> 标签：android, multithreading, asynchronous, background, android-asynctask

我让我的应用程序正常工作，因此它从 json api 返回信息。现在我意识到我必须将所有内容都放在异步任务中，这样它就不会崩溃那么多并且进度对话框更容易，只是我真的不知道该怎么做，所以我想知道是否有人知道一个非常好的教程或想稍微编辑一下我的代码以开始我的工作

```
 package net.thinkbin;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Dialog;
import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Spinner;
import android.widget.TextView;

public class culture extends ListActivity {

private static final String TITLE = "Title";
private static final String AUTHOR = "Author";
private static final String VIEWS = "Views";
private static final String RATES = "Rates";
private static final String CONTENT = "Content";
final Context context = this;

JSONArray ideas = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listplaceholder2);

    Button view = (Button) findViewById(R.id.button1);
    view.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent("net.thinkbin.TUTORIAL1"));
            overridePendingTransition(0, 0);
            finish();
        }
    });

    Button share = (Button) findViewById(R.id.button2);
    share.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent("net.thinkbin.SHARE"));
            overridePendingTransition(0, 0);
            finish();
        }
    });

    Button menu = (Button) findViewById(R.id.buttonhome);
    menu.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            final Dialog dialog = new Dialog(context);
            dialog.setContentView(R.layout.custom);

            TextView text = (TextView) dialog.findViewById(R.id.text);
            text.setText("Loading...");
            ImageView image = (ImageView)  dialog.findViewById(R.id.image);
            image.setImageResource(R.drawable.hourglass);

            dialog.show();
            Thread th = new Thread(new Runnable() {
                public void run() {

                    startActivity(new  Intent("net.thinkbin.MENU"));
                    overridePendingTransition(0, 0);
                    dialog.dismiss();
                    finish();

                }
            });
            th.start();
        }
    });

    ArrayAdapter<CharSequence> adapter2 = ArrayAdapter.createFromResource(
            this, R.array.spinnerorder,
            android.R.layout.simple_spinner_item);
     adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    Spinner s = (Spinner) findViewById(R.id.cultureorder);
    s.setAdapter(adapter2);

    s.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> adapter2, View view,
                int position, long id) {
            if (position == 1) {
                startActivity(new Intent("net.thinkbin.CULTURE2"));
                overridePendingTransition(0, 0);
                finish();
            }
            if (position == 2) {
                startActivity(new Intent("net.thinkbin.CULTURE3"));
                overridePendingTransition(0, 0);
                finish();
            }

        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });

    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String,  String>>();

    JSONObject json = JSONfunctions
             .getJSONfromURL("http://www.thinkbin.net/include/api/index.php? cat=Culture&type=Newest&i=10");

    try {

        ideas = json.getJSONArray("Ideas");

        for (int i = 0; i < ideas.length(); i++) {
            JSONObject c = ideas.getJSONObject(i);

            String title = c.getString(TITLE);
            String author = c.getString(AUTHOR);
            String views = c.getString(VIEWS);
            String rates = c.getString(RATES);
            String content = c.getString(CONTENT);

            HashMap<String, String> map = new HashMap<String, String> ();

            map.put(TITLE, "Title: " + title);
            map.put(AUTHOR, "Author: " + author);
            map.put(VIEWS, "Views: " + views);
            map.put(RATES, "Rates: " + rates);
            map.put(CONTENT, content);

            mylist.add(map);

        }

    } catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());
    }

    ListAdapter adapter = new SimpleAdapter(this, mylist, R.layout.main2,
            new String[] { TITLE, AUTHOR, VIEWS, RATES, CONTENT },
            new int[] { R.id.item_title, R.id.item_subtitle,  R.id.item3,
                    R.id.item4, R.id.item5 });

    setListAdapter(adapter);

    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            String Title2 = ((TextView)  view.findViewById(R.id.item_title))
                    .getText().toString();
            String Author2 = ((TextView) view
                     .findViewById(R.id.item_subtitle)).getText().toString();
            String Content2 = ((TextView)  view.findViewById(R.id.item5))
                    .getText().toString();

            Intent in = new Intent(getApplicationContext(),  idea.class);
            overridePendingTransition(0, 0);
            in.putExtra(TITLE, Title2);
            in.putExtra(AUTHOR, Author2);
            in.putExtra(CONTENT, Content2);

            startActivity(in);

        }
    });

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:45:20.540

有好课**AsyncTask**在 Android 中做一些 Asyncronius 。

例子：

> 私有类 DownloadFilesTask 扩展 AsyncTask {
> 
> ```
>  protected Long doInBackground(URL... urls) {
>      int count = urls.length;
>      long totalSize = 0;
>      for (int i = 0; i < count; i++) {
>          totalSize += Downloader.downloadFile(urls[i]);
>          publishProgress((int) ((i / (float) count) * 100));
>      }
>      return totalSize;
>  }
> 
>  protected void onProgressUpdate(Integer... progress) {
>      setProgressPercent(progress[0]);
>  }
> 
>  protected void onPostExecute(Long result) {
>      showDialog("Downloaded " + result + " bytes");
>  }  } 
> ```

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# sql-server - 如何使用 SQL Server Management Studio 运行 sql 脚本？

> ID：10261855
> 
> 赞同：44
> 
> 时间：2012-04-21T18:39:24.397
> 
> 标签：sql-server

我一直在关注本教程： http: [//www.misfitgeek.com/2010/07/adding-asp-net-membership-to-your-own-database/](http://www.misfitgeek.com/2010/07/adding-asp-net-membership-to-your-own-database/)

我已经从这里安装了 SQL Server Management Studio Express：http: [//www.microsoft.com/download/en/details.aspx?id=8961](http://www.microsoft.com/download/en/details.aspx?id=8961)。

1）如何找到我的数据库？

2) 如何从外部文件在我的数据库上运行 SQL 脚本？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-04-22T00:19:50.543

[这个网站](http://technet.microsoft.com/library/Cc966390)有一个关于如何使用 SQL Server Management Studio 的简明教程。正如您将看到的，您可以打开一个“查询窗口”，粘贴您的脚本并运行它。它不允许您使用文件路径执行脚本。但是，您可以使用命令行 (cmd.exe) 轻松完成此操作：

```
sqlcmd -S .\SQLExpress -i SqlScript.sql 
```

`SqlScript.sql`位于当前目录的脚本文件名在哪里。[有关更多示例，请参阅此 Microsoft 页面](http://msdn.microsoft.com/en-us/library/ms180944.aspx)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-03-01T13:27:33.767

打开 SQL Server Management Studio > 文件 > 打开 > 文件 > 选择您的 .sql 文件（包含您的脚本的文件）> 按打开 > 该文件将在 SQL Server Management Studio 中打开，现在您需要做的就是按执行按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-11T07:36:25.650

在另一个帮助我的线程中找到了这个：使用 xp_cmdshell 和 sqlcmd [是否可以从 SQL 查询中执行文本文件？](https://stackoverflow.com/questions/241925/is-it-possible-to-execute-a-text-file-from-sql-query)——古尔扎尔·纳齐姆

```
EXEC xp_cmdshell  'sqlcmd -S ' + @DBServerName + ' -d  ' + @DBName + ' -i ' + @FilePathName 
```

# html - 如何在相对定位的父作品中制作绝对定位的文本？

> ID：10261857
> 
> 赞同：0
> 
> 时间：2012-04-21T18:39:49.607
> 
> 标签：html, css, position

我有点困惑为什么我不能按照我期望的方式定位事情。

在下面的示例中，我希望每个数字都位于正方形的不同角落。然而，对于第一个方块，“top:0px”似乎没有达到我的预期，在第二个方块中情况更糟，应该在绿色方块中的文本实际上在蓝色方块。唯一的区别是我明确地给了第二张图像一个绝对位置。我必须给它一个相对于“底部”的位置，因为如果我使用我希望工作的顶部，那么整个第二张图像都会垂直偏移到几乎底部！

这里发生了什么？我已经为此奋斗了好几个小时，试图完成我认为应该是一项简单的任务。

```
<!DOCTYPE html>
<html>
<head>
<body>
<span style="position:relative; ">
<img src="http://upload.wikimedia.org/wikipedia/commons/e/e5/Solid_blue.png">
<span style="position:absolute; top:0px; left:0px;">1</span>
<span style="position:absolute; bottom:0px; left:0px;">&nbsp;2</span>
<span style="position:absolute; top:0px; right:0px;">&nbsp;&nbsp;3</span>
<span style="position:absolute; bottom:0px; right:0px;">&nbsp;&nbsp;&nbsp;4</span>
</span>
<span style="position:relative;">
<img style="position:absolute; bottom:0px; left:0px;" src="http://upload.wikimedia.org/wikipedia/commons/thumb/2/29/Solid_green.svg/200px-Solid_green.svg.png">
<span style="position:absolute; top:0px; left:0px;">5</span>
<span style="position:absolute; bottom:0px; left:0px;">&nbsp;6</span>
<span style="position:absolute; top:0px; right:0px;">&nbsp;&nbsp;7</span>
<span style="position:absolute; bottom:0px; right:0px;">&nbsp;&nbsp;&nbsp;8</span>
</span>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T19:06:29.253

我发现了问题，

您必须在包装器跨度上设置一个浮点数

例如

```
<span style="position:relative; float:left; ">

   <img src="http://upload.wikimedia.org/wikipedia/commons/e/e5/Solid_blue.png">
   <span style="position:absolute; top:0px; left:0px;">1</span>
   <span style="position:absolute; bottom:0px; left:0px;">&nbsp;2</span>
   <span style="position:absolute; top:0px; right:0px;">&nbsp;&nbsp;3</span>
   <span style="position:absolute; bottom:0px; right:0px;">&nbsp;&nbsp;&nbsp;4</span>

</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:41:39.200

这可能是因为跨度需要是块级元素。尝试添加 'display: block; 到您的“位置：相对”元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T18:45:00.227

span 元素是内联的，而内联元素没有尺寸......这就是你的元素放错位置的原因。

将外部跨度设置为`display:inline-block`解决问题..

（*您还需要`position:absolute`从第二张图片中删除，因为这会将其从流程中移除，并且包含`span`没有大小..*）

演示在[http://jsfiddle.net/gaby/btUBm/](http://jsfiddle.net/gaby/btUBm/)

# html - 将作为多个标签运行的标签

> ID：10261860
> 
> 赞同：0
> 
> 时间：2012-04-21T18:40:35.330
> 
> 标签：html, tags

我很难说出我想知道该怎么做，也找不到任何来自谷歌的帖子或网站，可能是因为无法正确说出这个答案，但我会最详细地解释.

```
<br />
<hr />
<br /> 
```

打破，水平，打破是我将帖子的一部分与另一个分开的方式。如何将这三个组合成一个可以替换三个的简单标签，从而节省我的时间和麻烦。

了解是否有方法来定义标签分组也很有帮助，而不仅仅是空标签，例如由字符串 title1 标识的标签将是包含模板的所有**格式、文本和所有子元素**的标签。在其他地方编码。

如果这个问题已经发布了，那我很抱歉。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:44:44.907

您不需要`<br>`标签，因为`<hr>`它是块级元素并自动创建换行符。如果您这样做是为了在 thw 上方和下方获得一些垂直空间，`<hr>`为什么不使用 CSS 来提供`<hr>`一些边距？

```
hr
{
    margin-bottom: 20px;
    margin-top: 20px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T19:06:05.970

无论`<br>`是还是建议的替代方案`<hr>`都不是特别适合这里。

您需要了解[**CSS**](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)。您需要做的就是将适当的样式（即边距）应用于包裹您的帖子的元素。

```
<div class="post">
    <h1>Post #1</h1>
    <p>something</p>
</div>

<div class="post">
    <h1>Post #2</h1>
    <p>something else</p>
</div> 
```

```
div.post {
    margin-bottom: 3em;
} 
```

如果您使用的是[HTML5](http://en.wikipedia.org/wiki/HTML5) ，请使用[`<article>`](http://html5doctor.com/the-article-element/)而不是`<div class="post">`表示单个帖子。

至于分组标签，目前在纯 HTML 中是不可能的，您需要为此应用一些预处理。通常的解决方案是使用内容管理系统，该系统根据您的内容和 HTML 模板创建最终的 HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T19:07:47.937

虽然这个特定的问题可以用一点 CSS 来解决，但从长远来看，听起来你需要某种布局或模板引擎。我是一名 ruby​​ist，所以我的首选解决方案是[Jekyll](https://github.com/mojombo/jekyll)。

Jekyll 所做的是从您编写的布局和内容生成静态 html 文件。您可以将大量重复的布局标记抽象到单独的文件中，然后在需要时引用它们。

以下指南是入门的好地方：http: [//net.tutsplus.com/tutorials/other/building-static-sites-with-jekyll/](http://net.tutsplus.com/tutorials/other/building-static-sites-with-jekyll/)

如果您已经在使用另一个框架，请先阅读它，看看是否有可以使用的东西。如果你只是直接编写 HTML/CSS，那么一定要试试 Jekyll。

# php - 在 MySQL 解决方案中存储日期范围

> ID：10261863
> 
> 赞同：5
> 
> 时间：2012-04-21T18:40:50.670
> 
> 标签：php, mysql, database

我正在编写脚本，该脚本需要让管理员能够在他想要一个可用的停车场时插入日期，管理员在一个范围内插入日期。

我很难找到在 MySQL 中存储日期的最佳方法的解决方案。

`AVAILABLE_FROM_DATE`我应该使用两列存储日期`AVAILABLE_UNTIL_DATE`吗？

```
PLID    AVAILABLE_FROM DATE         AVAILABLE_UNTIL_DATE
1       2012-04-01                  2012-04-03
1       2012-04-05                  2012-04-15
2       2012-04-21                  2012-04-30 
```

或者我应该只使用一列`AVAILABLE_DATE`并将管理员为范围之间的每个日期选择的新行存储在新行中吗？

[编辑开始]
我上面使用单列的意思不是将日期加入或拆分为单列，我实际上是指将日期存储在单行中，如下所示：

```
PLID    AVAILABLE_DATE
1       2012-04-01
1       2012-04-02
1       2012-04-03 
```

对于我要存储的所有可用日期，依此类推。
[编辑结束]

基本上，管理员会想要插入停车场可用的日期范围，并允许成员在用户正在寻找该范围内的时段时选择该时段。

或者有没有更好更简单的方法来做到这一点？

我目前正在尝试使用第一种方法，在该范围内使用单独的列，但是在查找某个范围内的停车场时无法获得所需的结果。

[编辑开始]

```
SELECT * FROM `parking_lot_dates`
WHERE (available_from_date BETWEEN '2012-04-22' AND '2012-04-30'
AND (available_until_date BETWEEN '2012-04-22' AND '2012-04-30')) 
```

我对上面的行使用以下查询，它返回空。我希望它返回具有 PLID **2**的最后一行。
[编辑结束]

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T18:56:12.280

关于您的 EDIT 查询，您的逻辑由内而外。您需要比较您检查的每个日期是否在范围内`BETWEEN available_from_date and available_until_date`，如下所示：

```
SELECT * FROM `parking_lot_dates`
WHERE
(
        '2012-04-22' BETWEEN available_from_date AND available_until_date
    AND '2012-04-30' BETWEEN available_from_date AND available_until_date
) 
```

演示：[http ://www.sqlfiddle.com/#!2/911a3/2](http://www.sqlfiddle.com/#!2/911a3/2)

**编辑**：虽然如果你想允许部分范围匹配，你需要两种类型的逻辑，即停车场在 4-22 到 4-27 可用，你需要在 4-23 到 4-28 . 您可以将它用于日期 4-23 到 4-27，但不能用于 4-28。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T19:03:18.087

为什么要这么复杂？

```
SELECT *
FROM `parking_lot_dates`
WHERE available_from_date <= '2012-04-22'
AND available_until_date >= '2012-04-30'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T18:48:34.423

我个人发现最好有 2 列，即开始时间和结束时间，用于搜索特定日期，或者只是查看它对我来说似乎更容易

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T18:59:41.173

从数据库的角度来看（未标准化），使用 1 列存储这些日期是一个糟糕的设计。最好有 2 列，因为可以更轻松地检索结果，并且从单个列中提取信息意味着必须进行某种拆分。它只是不够优雅，而且在需求发生变化时表现不佳。

# ruby-on-rails - 使用自定义值保存 Facebook 数据

> ID：10261869
> 
> 赞同：0
> 
> 时间：2012-04-21T18:41:49.180
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, omniauth

我尝试使用 Facebbok 登录，但我遇到了麻烦。我不知道该怎么做：

1.  用户使用 Facebook Connect 并接受网站的申请。
2.  接下来，用户被重定向到他为我的网站提供用户名的表单。
3.  获取的 Facebook 数据和用户名保存在数据库中。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:31:28.230

我找到了解决方案。

1.  用户使用 Facebook Connect。
2.  获取的 Facebook 数据保存到会话。
3.  用户被重定向到*名称*输入的表单。
4.  表单正在发送带有会话数据的请求。

# python - 将回车转换为 HTML 换行符

> ID：10261870
> 
> 赞同：3
> 
> 时间：2012-04-21T18:41:52.403
> 
> 标签：python, django, replace, carriage-return

我正在将博客文章的 xml 文件导入 Django。

这个过程的一部分需要我使用替换将转义的 html 字符转换回它们的 html 形式：

```
s = s.replace("&lt;", "<") 
```

我的问题是xml文件，当用vim查看时，包含“^M”形式的回车——我想将这些回车转换为中断标签，但是

```
s = s.replace("^M", "<br />") 
```

什么也没做。

我尝试使用 vim 转换 xml 文件中的所有这些标签，但后来我的 minidom 导入器中断了。

关于如何使用替换完成此转换的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T18:55:02.067

使用其中一种或两种应该有效：

```
s = s.replace("\r\n", "<br />")
s = s.replace("\n", "<br />") 
```

# ruby-on-rails - 用其他模型填充未填充的属性

> ID：10261874
> 
> 赞同：0
> 
> 时间：2012-04-21T18:42:34.940
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-3.1

我有一个 ActiveRecord 模型`@new_profile`，它填充了一些但不是所有属性。我有另一个模型`@default_profile`，它有一堆我想复制的值，但前提是第一个属性没有填充。有没有除了像...这样的块之外，还内置了这样做的方法

```
@new_profile.name ||= @default_profile.name
@new_profile.address ||= @default_profile.address
# etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:01:35.323

这可能有效

```
@new_profile.update_attributes!(@default_profile.attributes.merge(@new_profile.attributes)) 
```

这样做的问题是，如果属性在 @new_profile 中，但它是 nil，则合并可能会将值设置为 nil。您可能需要执行以下操作。

```
new_profile_attrs = @new_profile.attributes.reject{ |key,value| !value }
@new_profile.update_attributes!(@default_profile.attributes.merge(new_profile_attrs)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:57:54.043

你可以尝试类似的东西

```
@new_profile.attributes = @new_profile.attributes.reverse_merge @default_profile.attributes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T19:01:18.463

```
@new_profile.update_attributes(@default_profile.attributes.merge(@new_profile.attributes)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T20:01:34.870

如果您需要复制所有属性（`id`当然除外）：

```
@new_profile.attributes.each{|k,v| @new_profile[k] ||= @default_profile[k] if k != 'id'} 
```

诸如`update_attributes`不允许您复制-属性之类的东西`attr_protected`。**这东西应该**。

# ruby - 是 OpenSSL::SSL::SSLSocket TLS 吗？

> ID：10261875
> 
> 赞同：1
> 
> 时间：2012-04-21T18:42:35.607
> 
> 标签：ruby

在 Ruby 中，是[RFC 2246](https://www.rfc-editor.org/rfc/rfc2246)[`OpenSSL::SSL::SSLSocket`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/SSL/SSLSocket.html)的实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T20:46:06.797

是的，它提供了 SSL/TLS 客户端或服务器套接字。使用 OpenSSL Context 对象上的密码列表，您可以将其传递给初始化程序，您可以控制该套接字确切使用的协议。

ruby 的 OpenSSL 类是基本 OpenSSL API 的一个相当薄的包装器。所以你可能也想阅读[它的密码文档](http://www.openssl.org/docs/apps/ciphers.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:30:50.790

是的，Ruby 的 SSL 实现通过使用安装在您系统上的 OpenSSL 库支持 TSL v1.0 及更高版本。默认情况下，行为是宽松的，Ruby 将选择对等方支持的“最佳”协议，但如果您想要更细粒度的控制并强制执行实际协议，您可以通过使用[OpenSSL 设置适当的值来做到这一点：： SSL::SSLContext#ssl_version=](http://ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/SSL/SSLContext.html)。

也就是说，只有在系统上安装了最新的 OpenSSL 版本之一时，才会支持最新版本的 TLS 1.1 和 1.2。强烈建议持续升级，只有最新版本才会收到所有与安全相关的错误修复！

# emacs - 对 EDE 的默认自定义缓冲区感到困惑

> ID：10261877
> 
> 赞同：0
> 
> 时间：2012-04-21T18:42:46.643
> 
> 标签：emacs, cedet

EDE 自定义缓冲区中的“默认”部分有点令人困惑。那里有一些部分我无法理解其用途。

*   什么是推理规则？他们在推断什么？我该如何使用它们？我为什么要使用它们？
*   包含文件部分。它是干什么用的？包含哪些文件？它们与简单的 .h 文件有何不同？
*   “Automatic-Dependencies”部分目前有以下“解释”： Non-nil 在 Makefile 中实现自动依赖。目前真的没有实现吗？它的用途是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:10:57.080

EDE Make 项目类型中的许多选项特定于管理 Makefile。

Make 中的推理规则可能是这样的：

```
%.o: %.cpp
    @echo '$(CXX_COMPILE) -c $<'; \
    $(CXX_COMPILE) $(CXX_DEPENDENCIES) -o $@ -c $< 
```

这表示如果需要某些依赖项 foo.o，它会匹配`%.o`，并将查看是否存在 a `foo.cpp`，如果有，则运行这些命令。

如果不直接支持您的文件类型，该插槽可让您编写自己的。

包含文件允许您编写您赢得的makefile 包含。你可以称之为`pickle.mk`，如果你把它作为一个包含，你会发现：

```
include pickle.mk 
```

在您生成的makefile中。

自动依赖适用于 gcc 支持的语言，它会创建一个依赖文件，该文件基本上是一个 makefile，上面写着 foo.cpp 依赖于其中包含的 misc 头文件。这将使您的构建更加准确。

# matlab - 使用单索引和双索引调用

> ID：10261879
> 
> 赞同：1
> 
> 时间：2012-04-21T18:42:51.883
> 
> 标签：matlab

我有以下内容：

v=[1 2 ; 3 4]

```
 v =   
         1     2

         3     4 
```

作为 4 x 4 矩阵正在以下列方式读取

```
 2     4           (1,2)     (2,2)

                        1     3           (1,1)     (2,1) 
```

所以

```
1 is (1,1)
2 is (1,2)
3 is (2,1)
4 is (2,2) 
```

现在，如果我想将其称为单个索引，我会遇到问题，因为：

v(1) 是 1 但 v(2) 是 3 它读作：

```
 3     4
              1     2 
```

如果我将其称为 2 索引，我将有几个循环，这并不容易，但如果我使用单个索引，则引用会被切换，我会得到错误的答案。如何解决这个问题？

谢谢希望我清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:42:16.137

如果我理解您的问题，您可以简单地转置矩阵并使用单个索引。对于更复杂的索引问题，您可能会发现`shiftdim`它很有用。

# asp.net - 端口号如何管理？

> ID：10261883
> 
> 赞同：0
> 
> 时间：2012-04-21T18:43:13.320
> 
> 标签：asp.net, visual-studio, port

端口号如何管理？默认情况下，80 用于 HTTP。当我使用 Visual Studio 运行网站项目时，开发服务器为每次运行生成不同的端口号。虽然我们可以在项目属性下更改端口号，但为什么不能简单地为 80？端口号大小的最大大小是多少？

如果Web服务器使用80端口进行客户端请求，多个请求不会导致网络流量？还是我对端口的理解有误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:44:53.037

这是在 Web 选项卡下的 Web 项目的属性中。它可以自动分配或手动分配。默认情况下会分配随机端口，以防止与开发中的其他 Web 项目重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-19T07:43:41.203

请在这里阅读我的帖子并首先了解端口号的分配[https://stackoverflow.com/a/54760498/2197108](https://stackoverflow.com/a/54760498/2197108)

有关更多信息，您还可以阅读[https://stackoverflow.com/a/54760661/2197108](https://stackoverflow.com/a/54760661/2197108)

如果您正在使用 Visual Studio**开发/测试**网站，那么最好不要将（Visual Studio 的）HTTP 服务器的端口设置为 80，因为 80 是标准 HTTP 服务器，即任何已经运行或将运行的 HTTP 服务器将与 Visual Studio 冲突（您将其用作临时帮助 HTTP 服务器）。

希望这能消除您的疑虑。

# php - php动态表格展示

> ID：10261887
> 
> 赞同：1
> 
> 时间：2012-04-21T18:43:58.230
> 
> 标签：php, multidimensional-array, phpmyadmin, dynamic-data

我有一个从我的数据库返回的多维数组，看起来像这样

```
 $prices = array();

    /*some SQL coding */
print_r($prices);
        Array
    (
          [0]
              [id] => 1
              [title] => XT1 Comp
              [young] => 50
              [mid] => 50
              [old] => 120
          [1]
              [id] => 2
              [title] => HH3 Enginee
              [young] => 150
              [mid] => 170
              [old] => 220
    ) 
```

到目前为止，一切都很好。但是如何最好地将其打印为动态表？我有点卡住了，任何提示都非常受欢迎

我希望有人能帮帮忙。我希望有这样的输出：

```
id | title     | young| mid| old
1  |  XT1 Comp | 50   | 50 | 120
and so one for each row / array index or line 
```

亲切的问候亚历克斯

编辑->这就是我得到它们的方式。

```
$result_array = array();
        while($line = mysql_fetch_array($result, MYSQL_ASSOC))
            {
            $result_array[] = $line;
        }

        return $result_array 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:47:36.280

使用循环：

```
foreach( $prices as $row ) {
    echo '|' . $row['id'] . '|' . $row['title'] . '|' . $row['young'] . '|';
    echo '|' . $row['mid'] . '|' . $row['old'] . '|';
} 
```

它将遍历每一行并允许您访问每一列的值。

编辑：

如果您`mysql_query();`用于获取结果，则在使用后使用以下内容：

```
while( $row = mysql_fetch_assoc( $query_result ) ) {
    // Same echo stuff here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T18:55:15.370

您可以使用 php foreach 输出每个项目`$prices`：

```
<?php
function queryResultAsTable($results) {
    if(count($results) == 0) {
        echo '<em>No rows returned</em>';
    } else {
        echo '<table><thead><tr><th>'.implode('</th><th>', array_keys(reset($results))).'</th></tr></thead><tbody>'."\n";

        foreach($results as $result) {
            echo '<tr><td>'.implode('</td><td>', array_values($result)).'</td></tr>'."\n";
        }

        echo '</tbody></table>';
    }
}

queryResultAsTable($prices); 
```

# javascript - jQuery serialize() 总是为空

> ID：10261888
> 
> 赞同：1
> 
> 时间：2012-04-21T18:44:05.323
> 
> 标签：javascript, html

我无法让这个脚本工作。每次我发送文件时，脚本都需要执行一个 ajax 请求并将文件发送到服务器，但是，序列化总是发送空字符串。

我的 Javascript

```
$('#upload-button input:file').change(function() {
    $('#upload-text').text('Sending file...');

    $.ajax({
        type: "GET",
        url: "?url=images/send",
        data: $('#image-upload').serialize(),

        success: function(response) {
            if(response.error) {
                $('#upload-text').text(response.error);
            } else if(response.success) {
                $('#upload-text').text('Image send');
            }
        },
    });
}) 
```

我的 HTML

```
<form name="image-upload" id="image-upload" action="?url=imagens/enviar" method="post" enctype="multipart/form-data">
    <input type="file" name="selected-image" id="upload-hidden" value="" />
</form> 
```

当我选择了一个文件时，结果来自`alert($('#image-upload').serialize());`：

```
// EMPTY // 
```

结果来自`alert($('#image-upload input:file').attr('value'))`：

```
ponte-vecchio.jpg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:54:59.273

如果您想提交文件，则必须使用[此处](http://viralpatel.net/blogs/2008/11/ajax-style-file-uploading-using-hidden-iframe.html)描述的 iframe-“解决方法” ，例如

对于您的问题，为什么 serialize 总是为空的，请查看[jquery](http://code.jquery.com/jquery-1.7.1.js)的来源。针对此正则表达式测试输入字段的类型

```
 /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i 
```

如您所见，“文件”类型不是其中的一部分，因此 jquery 不会序列化此类输入字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:55:17.323

结帐这个[小提琴](http://jsfiddle.net/f6dtN/2/)。它通过 jQuery 设置基本的 html 和 JS 以使用通过 iframe 上传。一种“异步”上传文件的好方法；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T19:03:38.050

使用[jQuery 表单插件](http://jquery.malsup.com/form/)。它支持 HTML5 文件上传，如果浏览器太旧，它可以回退到隐藏的 iframe。

# c - 使用多个线程分配内存时出现分段错误

> ID：10261890
> 
> 赞同：1
> 
> 时间：2012-04-21T18:44:21.430
> 
> 标签：c, multithreading, pthreads, malloc, glib

关于 C 中的调用，我想让我的概念更清晰一些`malloc()`。我有一个多线程应用程序，其中主线程生成任意数量的工作线程（pthreads）。然后每个工作线程运行一个无限函数（包含的函数来自另一个`.c`文件并实现了一段时间（1）），它负责持续的网络 I/O。

对于每个线程，我都需要一个哈希表，所以我使用了 glib 提供的哈希映射。我所做的是我在每个线程的函数中初始化了一个哈希映射，它在后端为结构分配一些初始内存，然后它可以随着需要的增加而增长。

现在，当我运行应用程序时，它会抛出错误，包括分段错误和无法为结构分配任何内存。我花了一段时间才发现错误是由于无法为哈希映射分配内存。我的想法是（仍然认为）每个线程都有自己的内存空间，它会在自己的内存块内为其各自的哈希映射分配一块内存。我能够通过`mutex`在哈希映射初始化之前和之后使用锁来修复错误，例如（sudo 代码）：

```
lock mutex
initialize hashmap
unlock mutex 
```

初始化在每个线程中调用的哈希映射的代码是：

```
 GHashTable *g_hash_table;
  g_hash_table = g_hash_table_new (g_int_hash, g_int_equal); 
```

虽然它解决了问题，但在此之后我有点困惑。为什么在不使用锁定的情况下会出现此问题，因为每个线程都有自己的内存空间用于其实现的功能，并且在分配自己的内存时不应与其他线程冲突。非常感谢所有指导。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:52:17.653

每个线程不会有自己的内存空间——所有线程都可以访问进程内所有线程的内存。

也就是说，每个线程都在该空间内分配了自己的堆栈，因此如果不误用自动变量是可以的，并且 malloc/free 应该是线程安全的，因此是动态分配的哈希映射，（由自动指针指向在线程堆栈上），应该没问题。

如果可以选择，请确保您链接的是库的线程安全版本。

互斥锁应该不是必需的。如果它正在解决问题，那么你是对的 - 有些东西，malloc/free，也许在它应该是线程安全的时候不是线程安全的。

您确定 hashmap 代码只引用 auto 或 malloced 存储吗？没有全局变量/静态变量潜入？

# php - Codeigniter 上的管理员/用户的单独身份验证系统（和数据库表）

> ID：10261892
> 
> 赞同：1
> 
> 时间：2012-04-21T18:44:35.017
> 
> 标签：php, codeigniter, authentication

我正在为一个基本上拥有大型会员数据库的客户重建一个项目。这些成员可以登录以从前端管理他们的成员资格。登录后端的管理员存储在不同的数据库表中。

我正在考虑为管理员使用自定义基本身份验证，为前端使用 ion_auth。我在前端使用 ion_auth 的理由是，将来可能会添加更多与社区相关的内容，并且我可以预见到类似 ion_auth 的额外功能。

但是我不禁觉得这是一种相当混乱的处理方式。组合成员资格和管理表不是一种选择，所以无论发生什么，我都需要运行两个身份验证。可能吗。

是否可以有效地运行 ion_auth 两次，或者我应该执行上述操作并为前端成员使用 ion_auth 并为管理员使用另一种身份验证类型（例如自定义）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:45:48.610

您可以克隆 ION_auth 并重命名它并删除一些用于管理员登录的元素。毕竟它只是一个图书馆。

对于用户登录，您只需要知道会话中是否存在 user_id，您实际上不需要设置“_is_logged_in”=> 1。只要您的会话数据被正确创建/销毁，这是因为 user_id 应该仅在完成正确的登录过程**后才存在。**

但是，对于管理员登录，您需要设置诸如“admin_logged_in”=> 1 或“horse_logged_in”=> 1 之类的设置，命名约定并不起关键作用，您只需要参考一些内容来让您知道管理员存在。

如果您将管理员登录名存储在单独的表中，那么登录名应该与用户登录名一样简单。

我有一些与 Auth(groups/permissions) 相关的 codeigniter 答案，如果您想查看这些答案。

祝你好运

# css - 为什么我的段落元素大小不同？

> ID：10261894
> 
> 赞同：0
> 
> 时间：2012-04-21T18:44:43.037
> 
> 标签：css, wordpress

我无法弄清楚这里发生了什么。此页面上带有 class="caption" 的段落没有排列，我不知道为什么。页面在[这里](http://nicolaelvin.com/community/gallery-2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T19:04:03.520

第二个图像应用了*alignLeft*类，而第一个没有。此类包括 CSS 属性，该属性`float:left`删除图像的内联状态，因此浏览器放置在任何内联元素下的额外像素。这导致包装链接标签的高度从 186px 下降到 179px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T19:29:29.643

您应该检查 CSS 文件中的 CSS“标签”选择器。据我所见，存在一个已为所有 p 元素分配的整体边距底部值（值 1.625em，这意味着段落之间的距离很长）。

# c++ - C/C++ Windows - ExtractIcon() 未检索所有可执行文件的图标

> ID：10261906
> 
> 赞同：1
> 
> 时间：2012-04-21T18:45:38.153
> 
> 标签：c++, c, windows, api, icons

这只是我正在做的事情的片段：

```
PROCESSENTRY32 pe32;
pe32.dwSize = sizeof(PROCESSENTRY32);
hProcessSnap = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);

if (hProcessSnap == INVALID_HANDLE_VALUE)   return;

if(!Process32First( hProcessSnap, &pe32))
{
        CloseHandle(hProcessSnap); // clean the snapshot object
         return;
 }    

do
{
     hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, pe32.th32ProcessID);
     HICON icon = ExtractIcon((HINSTANCE)hProcess, pe32.szExeFile, 0);
}
while(Process32Next(hProcessSnap, &pe32)); 
```

为什么它适用于某些程序而不适用于其他程序？它基本上只有那些，记事本和它获取图标的cmd提示符，没有其他程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T19:27:41.583

该[`ExtractIcon()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648068.aspx)函数旨在提取嵌入在可执行文件/DLL 中的图标作为资源（例如，图标是`.exe`或`.dll`文件的一部分）。如果图标是由应用程序动态加载的（例如从使用 的文件中[`LoadImage()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648045.aspx)），那么您无法使用`ExtractIcon()`.

这很容易解释为什么您无法获取 Chrome 标签的图标，因为它们通常从网站下载图标然后显示它。我还怀疑任何支持自定义皮肤的应用程序都不太可能允许您提取其图标，或者最多只给您默认图标。

# c# - 在 C# Windows 应用程序中拥有类似于 TextBox 的控件

> ID：10261907
> 
> 赞同：0
> 
> 时间：2012-04-21T18:45:42.970
> 
> 标签：c#, winforms, custom-controls

在 C# Windows 应用程序中使用用户控件创建自己的 TextBox、Button 等控件作为自己的控件，这是个好主意吗？我想在整个应用程序中保持一致性。假设如果我想更改文本框边框颜色，那么所有表单文本框都会随此更改而更新。这只是一个例子。请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:50:44.093

我不建议仅仅为了一致性而使用 UserControl。如果应用程序皮肤是您所追求的，请查看 WPF。它使得皮肤应用程序（甚至是窗口，或较小的组）变得相对简单

这是一篇关于使用 WPF 进行蒙皮的文章：http: [//www.codeproject.com/Articles/19782/Creating-a-Skinned-User-Interface-in-WPF](http://www.codeproject.com/Articles/19782/Creating-a-Skinned-User-Interface-in-WPF)

留在 Windows 窗体中的另一种选择是创建一个继承自 TextBox 的类，并在整个应用程序中使用该类。[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)在这里可以很好地工作。您甚至可以将其调整为多种皮肤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:50:48.450

提供与您的“用户体验”（UX）相匹配的自定义控件并不是一个坏主意。这真的取决于你想用你的程序来完成什么。

# java - UISpec4J 文件选择器测试

> ID：10261909
> 
> 赞同：0
> 
> 时间：2012-04-21T18:46:25.737
> 
> 标签：java, junit, uispec4j

我正在尝试使用 UISpec4J 来测试文件选择器。一个按钮应该使文件选择器弹出。我找到了一个从菜单选项中弹出的文件选择器示例：

```
 WindowInterceptor
   .run(openMenu.triggerClick())
   .process(FileChooserHandler.init()
            .titleEquals("Select a template file")
            .assertAcceptsFilesOnly()
            .select("/home/bond/file.txt"))
   .run(); 
```

但我似乎无法通过简单的按钮点击来让它工作 - 我知道这可能是一个非常简单的问题，但我似乎找不到其他文档来让它工作而且我很卡住......有人可以解释如何测试吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:28:40.820

我也尝试过[文档](http://www.uispec4j.org/reports/apidocs/org/uispec4j/interception/FileChooserHandler.html)中的示例但失败了。一点点改变可能会有所帮助：

```
WindowInterceptor
        .init(openMenu.triggerClick())
        .process(FileChooserHandler.init()
            .titleEquals("Select a template file")
            .assertAcceptsFilesOnly()
            .select("/home/bond/file.txt"))
            .run(); 
```

我已将**run**的第一个实例替换为**init**。可能，这是文档中的错字。

# c - 返回指针的函数

> ID：10261910
> 
> 赞同：0
> 
> 时间：2012-04-21T18:46:27.990
> 
> 标签：c

我在c中遇到了一个程序：

```
int bags[5]={20,5,20,3,20};
int main()
{
    int pos=5,*next();
    *next()=pos;   //problem with this line(should give error :lvalue required)
    printf("%d %d %d",pos,*next(),bags[0]);
    return 0; 
}
int *next()
{
    int i;
    for(i=0;i<5;i++)
        if(bags[i]==20)
            return (bags+i); 
    printf("error");
    exit(0);
} 
```

> 程序的输出是 5 20 5 虽然我预计它是需要的左值。谁能说出原因？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:51:12.160

虽然`next()`不是左值`*next()`，但这是一个 int，由 if *next() 的返回值寻址`(which is an int in the`，但这是一个 int，由 *next() bag` 数组

换句话说，虽然您不能分配给函数的返回值，但您可以分配给返回值所寻址的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T18:58:55.797

`next()`不是左值，因为函数返回值不是。
`*next()`是一个左值，因为它是一个包含在某个已知内存地址中的值。这个地址是作为函数的返回值还是以其他方式获得（例如，它被存储在一个变量中），并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T19:03:30.253

取消引用运算符的结果`*` *是*一个左值。

“一元 * 运算符表示间接。[...] 如果它指向一个对象，则结果是一个指定对象的左值。” C99 6.5.3.2/4

# java - JAVA mouseClicked 事件不会在 Mac 上触发

> ID：10261913
> 
> 赞同：0
> 
> 时间：2012-04-21T18:47:02.880
> 
> 标签：java, macos, events

我编写了一个程序，其中包含两个使用 mouseListeners 的组件：

1.  ResizeRectangle 绘制一个带有手柄的矩形，并允许移动和调整矩形的大小。它处理 MouseEvents 和 MouseMotionEvents（MouseMove、MousePressed、MouseDragged 和 MouseReleased）。
2.  IconGrid 在矩形内绘制图标网格，并允许选择（单击）图标。它为此处理 MouseClicked 事件。

在 Windows 下一切正常。我今天尝试将程序移植到 Mac，但是 MouseClicked 事件永远不会被触发。我将 MouseClicked 事件放在 ResizeRectangle 中，但它也不会被触发。我将 MouseReleased 事件放在 IconGrid 中，它确实被解雇了。所以问题似乎真的出在 mouseClicked 事件上。

我阅读了另一篇文章，该文章指出，在 Mac 上，即使鼠标按下和鼠标释放之间的微小像素变化也会导致 MouseClicked 不会被触发。但即使我在空中用鼠标单击（因此没有机会在按下和释放之间移动鼠标），mouseClicked 事件也不会被触发。

还有其他人有这个问题吗？这是Mac上的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:18:12.740

我在带有 JDK1.7 的 OS X 上尝试了以下代码，我可以单击图标并触发侦听器。请随意修改此代码以匹配您的情况，以便我们重现该问题并将其包含在您的问题中。

```
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.IOException;
import java.net.URL;

public class MouseClickedIcon {

  public static void showUI() throws IOException {
    JFrame testFrame = new JFrame( "TestFrame" );

    String imageSource = "http://www.mynewitguys.com/wp-content/uploads/2011/04/java1.png";

    ImageIcon icon = new ImageIcon( ImageIO.read( new URL( imageSource ) ) );
    JLabel label = new JLabel( icon );
    label.addMouseListener( new MouseAdapter() {
      @Override
      public void mouseClicked( MouseEvent e ) {
        System.out.println( "MouseClickedIcon.mouseClicked" );
      }
    } );
    testFrame.add( label, BorderLayout.CENTER );
    testFrame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    testFrame.pack();
    testFrame.setVisible( true );
  }

  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        try {
          showUI();
        } catch ( IOException e ) {
        }
      }
    } );
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:30:56.937

得到了错误的根源。我在虚拟机 (VMWARE) 中运行 OSX 并检查了鼠标兼容性选项，这导致了 MouseClicked 事件的问题。抱歉，添麻烦了。

# javascript - 使用 $(document).ready() 将 js 分解为文件，但保持范围

> ID：10261924
> 
> 赞同：1
> 
> 时间：2012-04-21T18:48:39.853
> 
> 标签：javascript, jquery, scope

我想将我的 javascript 代码分解为几个 .js 文件。这些 .js 中的每一个都有需要在 $(document).ready(..) 中的代码。所以在每个文件中都会启动一个新的 $(document).ready(..) 。

我如何从 fileb.js 中声明的 filea.js 函数调用（都在 $(document).ready 块内）？

如果这是不可能的，你能提出一个替代方案吗？谢谢你。

编辑：我想澄清一下，我想避免使用全局范围。我希望使用命名函数作为事件的处理程序，但我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T18:56:46.033

您可以使用

```
window.globalname = localname; 
```

请记住，函数是变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T19:41:32.953

你真的无法摆脱声明一个全球性的。创建一个全局并不是那么糟糕，然后您可以命名它下的所有函数。

把它放在一个类似于 main.js 的文件中，这样你就可以把你的共享函数保存在这里：

```
// name this something unique to your page/site/app
var MYAPP = {};

// now we can attach functions to it

MYAPP.funcA = function() { /* ... */ };
MYAPP.funcB = function() { /* ... */ }; 
```

然后，在您的每个匿名函数中，您可以访问 MYAPP.funcA()、MYAPP.funcB() 等。您还可以动态修改 MYAPP 以添加函数、属性等。

最后你有一个全局的（该死的！），但如果你正确命名它，你正在创建一个全局命名空间，你的应用程序代码可以安全地驻留在其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T18:52:51.767

只要文件按顺序加载（即在调用它们`filea.js`之前加载函数`fileb.js`，你应该没问题。

为了确保文件首先加载它们的依赖项，您可以考虑 require.js 或 head.js

我对后者很幸运：http: [//headjs.com/](http://headjs.com/)

# php - 清除 PHP 数组值的最佳方法

> ID：10261925
> 
> 赞同：199
> 
> 时间：2012-04-21T18:48:53.143
> 
> 标签：php, arrays

清除数组中的所有值哪个更有效？第一个将要求我在第二个示例的循环中每次都使用该函数。

```
foreach ($array as $i => $value) {
    unset($array[$i]);
} 
```

或这个

```
foreach($blah_blah as $blah) {
    $foo = array();
    //do something
    $foo = null;
} 
```

* * *

## 回答 #1

> 赞同：291
> 
> 时间：2012-04-21T18:52:45.513

就像 Zack 在下面的评论中所说的那样，您可以使用简单地重新实例化它

```
$foo = array(); // $foo is still here 
```

如果你想要更强大的东西，请使用 unset，因为它也会从符号表中清除 $foo，如果你稍后需要该数组，只需再次实例化它。

```
unset($foo); // $foo is gone
$foo = array(); // $foo is here again 
```

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2012-04-21T18:52:43.173

如果你只想将一个变量重置为一个空数组，你可以简单地重新初始化它：

```
$foo = array(); 
```

请注意，这将保留对它的任何引用：

```
$foo = array(1,2,3);
$bar = &$foo;
// ...
$foo = array(); // clear array
var_dump($bar); // array(0) { } -- bar was cleared too! 
```

如果您想破坏对它的任何引用，请先取消设置：

```
$foo = array(1,2,3);
$bar = &$foo;
// ...
unset($foo); // break references
$foo = array(); // re-initialize to empty array
var_dump($bar); // array(3) { 1, 2, 3 } -- $bar is unchanged 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2014-03-26T14:51:43.817

遗憾的是我无法回答其他问题，没有足够的声誉，但我需要指出一些对我来说非常重要的事情，我认为这也会对其他人有所帮助。

取消设置变量是一个不错的方法，**除非您需要原始数组的引用！**

为了清楚我的意思：如果你有一个使用数组引用的函数，例如一个排序函数，如

```
function special_sort_my_array(&$array)
{
    $temporary_list = create_assoziative_special_list_out_of_array($array);

    sort_my_list($temporary_list);

    unset($array);
    foreach($temporary_list as $k => $v)
    {
        $array[$k] = $v;
    }
} 
```

它不工作！在这里要小心，`unset`删除引用，所以变量`$array`被重新创建并正确填充，但值不能从函数外部访问。

因此，如果您有引用，则需要使用`$array = array()`而不是`unset`，即使它不太干净和易于理解。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-21T18:51:04.093

如果数组是关联的，我会说第一个。如果没有，请使用`for`循环：

```
for ($i = 0; $i < count($array); $i++) { unset($array[$i]); } 
```

虽然如果可能的话，使用

```
$array = array(); 
```

最好将数组重置为空数组。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-04-21T18:50:49.290

还[`unset()`](http://us3.php.net/manual/en/function.unset.php)不够好吗？

```
unset($array); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-04-21T18:52:56.760

怎么样`$array_name = array();`？

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-04-15T10:04:33.037

用于[`array_splice`](http://php.net/manual/en/function.array-splice.php)清空数组并保留引用：

`array_splice($myArray, 0);`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-10-21T12:33:31.200

我已经使用 unset() 来清除数组，但我已经意识到 unset() 将呈现数组 null 因此需要重新声明数组，例如

```
<?php 
    $arr = array();
    array_push($arr , "foo");
    unset($arr); // this will set the array to null hence you need the line below or redeclaring it.
    $arr  = array();

    // do what ever you want here
?> 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-08-09T10:21:29.053

也许简单，经济的方式（使用较少的标志）......

```
$array = []; 
```

我们可以阅读 php 手册：

> 从 PHP 5.4 开始，您还可以使用短数组语法，它将 array() 替换为 []。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-02-13T15:15:30.010

我看到这个问题很老了，但是对于那个问题，我写了一个递归函数来取消设置数组中的所有值。递归，因为它可能来自给定数组的值也是一个数组。所以这对我有用：

```
function empty_array(& $complete_array) {
    foreach($complete_array as $ckey => $cvalue)
    {
        if (!is_array($cvalue)) {
            $complete_array[$ckey] = "";
        } else {
            empty_array( $complete_array[$ckey]);
        }

    }
    return $complete_array;

} 
```

因此，我得到了包含所有键和子数组的数组，但值为空。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-03-10T10:54:23.317

当垃圾收集器在没有午休时间的情况下进行循环时，[unset函数很有用；](http://php.net/manual/en/function.unset.php)

然而 unset 函数只是破坏了对数据的变量引用，数据仍然存在于内存中，尽管不再有指向它的指针，但 PHP 将内存视为正在使用中。

**解决方案：** 分配`null`给您的变量以清除数据，至少在垃圾收集器得到它之前。

```
$var = null; 
```

然后以类似的方式取消设置！

```
unset($var); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-18T08:24:59.073

这个功能强大，经过测试 unset($gradearray);//重新设置数组

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-24T01:48:39.543

帖子并没有真正回答这个问题。保留密钥并清除值是问题的重点。

```
foreach($resultMasterCleaned['header'] as $ekey => $eval) {
    $resultMasterCleaned[$key][$eval] = "";                 
} 
```

与保存 CSV 值并清除特定行的二维数组一样。循环似乎是唯一的方法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-01-28T23:18:47.067

对于 PHP >= 5.4 使用

```
$var = []; 
```

不确定它是否比

```
$var = array(); 
```

但至少看起来更干净。

# visual-studio-lightswitch - 如何删除灯开关中的保存和刷新按钮

> ID：10261927
> 
> 赞同：1
> 
> 时间：2012-04-21T18:49:11.537
> 
> 标签：visual-studio-lightswitch

我们正在为客户开发 ERP 产品。需要删除保存和刷新按钮。我能够禁用它们但无法删除。任何人都可以帮我删除这些按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:16:18.483

处理此问题的一种简单方法是将它们设置为每个屏幕不可见。
只需在设计器中打开屏幕，打开屏幕命令栏，选择您不想出现的按钮，然后转到属性，在外观下，取消选中其“可见”属性。然后该按钮将不会出现在功能区中。

# mongodb - 在批处理文件中将 Page Blob 作为 VHD 装载

> ID：10261930
> 
> 赞同：0
> 
> 时间：2012-04-21T18:49:52.037
> 
> 标签：mongodb, azure

这是我的[stackoverflow 帖子](https://stackoverflow.com/questions/10259985/java-access-to-mongodb-server-running-on-windows-azure/10260383#10260383)的后续内容：如何将页面 blob 作为 VHD 安装在辅助角色实例上？安装驱动器后，我会将其作为 --dbpath 参数的值传递给 mongo 实例。

简而言之，我正在尝试使用 azure blob 上的数据目录启动一个 mongo 实例（为了持久性）。我正在 Azure 站点上的[HelloWorld](http://msdn.microsoft.com/en-us/library/windowsazure/hh690944%28VS.103%29.aspx)示例上构建——我将启动 mongo 实例，而不是启动 Tomcat 实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:13:48.483

我建议您遵循本指南： http: [//www.codeproject.com/Articles/81413/Windows-Azure-Drives-Part-1-Configure-and-Mounting](http://www.codeproject.com/Articles/81413/Windows-Azure-Drives-Part-1-Configure-and-Mounting)。本指南说明了如何安装驱动器，但它也说明了如何将驱动器号保存为环境变量。

这很有趣，因为当您启动 mongo 实例时，您可以将此环境变量与 --dbpath 一起使用。也许最好将所有代码封装在控制台应用程序中，这样您就可以在启动 mongo 实例之前简单地启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:35:42.453

我不确定您是否可以在 Java 中安装驱动器。目前此功能在适用于 Java 的 Windows Azure 存储客户端中不可用：[https](https://github.com/WindowsAzure/azure-sdk-for-java) ://github.com/WindowsAzure/azure-sdk-for-java 。也没有本机 (C++) API。因此，您可能需要使用 .NET 安装驱动器，然后从 .NET 应用程序启动 Java 进程。目前，您还可以在[http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting)上提交功能请求。

最好的祝福，

明旭。

# python - 使用 numpy.select 避免 div/0 错误

> ID：10261931
> 
> 赞同：2
> 
> 时间：2012-04-21T18:49:55.730
> 
> 标签：python, numpy, divide-by-zero

我正在尝试使用 numpy.select 有条件地将值分配给数组。但是，使用 select 需要计算所有可能的分配，而不仅仅是相关的分配，这可能会导致 div/0 错误，例如：

```
import numpy as np
def testfunc(z):
    conditionlist = [z < 0, z == 0, z > 0]
    choicelist = [1 / z, 0, 1 + z]
    return np.select(conditionlist, choicelist)

if __name__ == "__main__":

     print testfunc(np.array([0])) 
```

此代码将失败并出现 div/0 错误，尽管实际上不需要将 z = 0 的 1 / z 分配给返回的数组。

如何在不遇到 div/0 错误的情况下有条件地为 numpy 数组赋值？循环是唯一的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T19:09:36.770

```
np.select([z < 0, z == 0, z > 0], [1 / (z + (z == 0)), 0, 1 + z]) 
```

`z == 0`给出一个布尔数组. 添加它会`z`给出一个没有零元素的数组，该数组等于将使用`z`的索引`np.select`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:55:30.440

使用[numpy.seterr](http://docs.scipy.org/doc/numpy/reference/generated/numpy.seterr.html)将除以零的行为从 raise 更改为其他内容。

# html - 有没有证据表明其他浏览器会支持谷歌浏览器拖动下载到桌面？

> ID：10261943
> 
> 赞同：3
> 
> 时间：2012-04-21T18:51:20.613
> 
> 标签：html, google-chrome, drag-and-drop

有谁知道 Firefox 和 IE 等其他浏览器何时或是否允许用户使用 Google Chrome 等拖放功能从浏览器下载文件？

这个功能非常酷，我希望我可以在所有浏览器中使用它！

谢谢，伊恩

更新：这是一个例子：

```
 ondragstart="event.dataTransfer.setData('DownloadURL', 'application/force-download:[FILENAME]:[PATH TO FILE]);" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:06:14.043

据我所知，这是 Chrome 的一项功能，而不是拖放规范的一部分。我的研究还表明，谷歌甚至只是添加了它，以便他们可以将它与那里的产品（Gmail，可能还有新的谷歌驱动器）一起使用。

由于这不是拖放规范的一部分，Mozilla 和 Microsoft 都没有宣布任何有关它的信息，我相信答案是否定的。但是，如果它成为一种流行的功能，其他人可能会效仿。

也可以使用更复杂的代码来模拟效果（拖放有，这个特定功能没有）或者可能使用浏览器插件。

# php - 教义 2 - 多对多 + IN 子句

> ID：10261945
> 
> 赞同：4
> 
> 时间：2012-04-21T18:51:54.983
> 
> 标签：php, doctrine, doctrine-orm

我有这个模型：

```
/** @Entity @Table(name="articles") */
class Article {
    /** @Id @GeneratedValue @Column(type="integer") */
    protected $id;

    /** @Column(type="string", length=100, nullable=true) */
    protected $title;

    /** @ManyToOne(targetEntity="User", inversedBy="articles") */   
    protected $author;

    /** @Column(type="datetime") */
    protected $datetime;

    /**
     * @ManyToMany(targetEntity="Game", inversedBy="articles")
     * @JoinTable(name="articles_games",
     *      joinColumns={@JoinColumn(name="article_id", referencedColumnName="id")},
     *      inverseJoinColumns={@JoinColumn(name="game_id", referencedColumnName="id")}
     *      )
     */
    protected $games;

    # Constructor
    public function __construct() {
        $this->datetime = new DateTime();
        $this->games = new \Doctrine\Common\Collections\ArrayCollection();
    }

    # ID
    public function getId() { return $this->id; }

    # TITLE
    public function setTitle($v) { $this->title = $v; }
    public function getTitle() {
        if(empty($this->title)) {
            $game = $this->getFirstGame();
            return ($game instanceof Game) ? $game->getTitle() : NULL;
        } else 
            return $this->title;
    }

    # AUTHOR
    public function setAuthor($v) { $this->author = $v; }
    public function getAuthor() { return $this->author; }

    # DATE & TIME
    public function getDateTime() { return $this->datetime; }
    public function setDateTime($v) { $this->datetime = $v; }

    # GAMES
    public function setGames($value) {
        $except_txt = 'Jedna z przesłanych wartości nie jest instancją klasy Game!';

        if(is_array($value)) {
            foreach($value as $v) {
                if($v instanceof Game) $this->games->add($v);
                else throw new Exception($except_txt);
            }
        } else {
            if($value instanceof Game) $this->games->add($value);
            else throw new Exception($except_txt);
        }
    }
    public function getGames() { return $this->games; }
} 
```

如何使查询看起来像这样

```
SELECT a FROM Article a WHERE :game_id IN a.games 
```

我有这个（`$game->getId()`是一个整数）

```
$articles = $db->createQuery("SELECT a.type FROM Article a WHERE :game_id IN a.games GROUP BY a.type")->setParameter('game_id', $game->getId())->getResult(); 
```

但它返回给我一个语法错误

```
[Syntax Error] line 0, col 47: Error: Expected Doctrine\ORM\Query\Lexer::T_OPEN_PARENTHESIS, got 'a' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-11-17T15:43:00.033

这个问题与[我刚刚回答的一个更新的问题](https://stackoverflow.com/a/26976090/1188035)相关联，我觉得把它放在这里也是有益的，因为它是一个更正确的解决方案：

Doctrine函数需要语句后的`IN`格式。不幸的是，它并不意味着列条件来证明成员资格。`(1, 2, 3, 4, ...)``IN`

但是，我相信您正在寻找`MEMBER OF`Doctrine 功能：

```
SELECT a FROM Article a WHERE :game_id MEMBER OF a.games 
```

你可以传递一个有效的 Doctrine 对象或标识符来`game_id`使用这个功能。

这个例子隐藏在[Doctrine 文档](http://doctrine-orm.readthedocs.org/en/latest/reference/dql-doctrine-query-language.html)的深处：

```
$query = $em->createQuery('SELECT u.id FROM CmsUser u WHERE :groupId MEMBER OF u.groups');
$query->setParameter('groupId', $group);
$ids = $query->getResult(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T18:21:58.567

如果您正在寻找与某款游戏相关的文章：

```
$articles = $db->createQuery("SELECT a FROM Article a JOIN a.games game WHERE game.id = :game_id")
    ->setParameter('game_id', $game->getId())
    ->getResult(); 
```

或多个：

```
$articles = $db->createQuery("SELECT a FROM Article a JOIN a.games game WHERE game.id IN (?,?, ... ?)")
    ->setParameters(array($game1->getId(), $game2->getId() ... $gameN->getId()))
    ->getResult(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T12:24:47.673

我想您需要为此创建一个自定义存储库。我刚刚解决了这样的问题。

使用 Doctrine\ORM\EntityRepository；

```
class Company extends EntityRepository
{
    /**
     * Load by product.
     * @param int $productId
     * @return array
     */
    public function getByProduct($productId)
    {
        $dql = "SELECT i FROM Domain\Model\Company i JOIN i.products p WHERE p.id = :id";
        return $this->_em->createQuery($dql)->setParameter(':id', $productId)->getResult();
    }
} 
```

# c - 在从 obj 文件加载的模型上映射纹理的有效方法

> ID：10261947
> 
> 赞同：0
> 
> 时间：2012-04-21T18:52:39.967
> 
> 标签：c, opengl, texture-mapping

我正在制作一个给定 obj 文件的程序，它会渲染模型。现在它在没有纹理映射的情况下工作，但我想实现这个功能，读取材质库文件。

但我看到顶点的数量可能与纹理坐标的数量不同。看这个例子：

```
# Blender v2.58 (sub 0) OBJ File: ''
# www.blender.org
mtllib /home/frenk/Documenti/Progetti/dado.mtl
o Cube
v 1.000000 -1.000000 -1.000000
v 1.000000 -1.000000 1.000000
v -1.000000 -1.000000 1.000000
v -1.000000 -1.000000 -1.000000
v 1.000000 1.000000 -0.999999
v 0.999999 1.000000 1.000001
v -1.000000 1.000000 1.000000
v -1.000000 1.000000 -1.000000
vt 0.593772 0.740196
vt 0.593666 0.869263
vt 0.394866 0.869219
vt 0.394973 0.740152
vt 0.792572 0.740240
vt 0.993810 0.740284
vt 0.993703 0.869351
vt 0.792466 0.869307
vt 0.792360 0.995233
vt 0.593560 0.995189
vt 0.593984 0.482061
vt 0.792784 0.482105
vt 0.792678 0.611172
vt 0.593878 0.611129
usemtl dado_verde_dado.tga
s off
f 1/1 2/2 3/3 4/4
f 5/5 8/6 7/7 6/8
f 1/1 5/5 6/8 2/2
f 2/2 6/8 7/9 3/10
f 3/11 7/12 8/13 4/14
f 5/5 1/1 4/14 8/13 
```

所以我不能使用函数 drawElements()，因为索引不匹配。我是否将顶点坐标映射到纹理坐标，一对一？

```
 //example
glBegin( GLTriangles );
gltexcoord2f(...); glvertex3f(...);
...
blaBlaBla(...);
...
glEnd(); 
```

我认为必须有一个高效的 API 来做我想做的事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:29:18.850

不幸的是，OpenGL 没有高效的 API 来做你想做的事。如果要将 OBJ 与顶点数组/缓冲区一起使用，则必须分解给定的所有顶点和 texcoords 并将它们重新组合成数组，以使顶点数和 texcoords 数量相同，复制顶点和 texcoords如所须。

如果您搜索，我相信您会发现几个关于如何执行此操作的问题。

# c# - asp.net 自定义登录页面会话替代

> ID：10261951
> 
> 赞同：0
> 
> 时间：2012-04-21T18:52:50.117
> 
> 标签：c#, asp.net, session, cookies, login

我的网站有定制的身份验证系统，它使用 asp.net 中的会话而不是表单身份验证。登录页面获取电子邮件和密码，在数据库中查找并设置会话为真（如果存在）。你可以猜到的问题是默认情况下，会话不会持续超过 20 分钟。我的问题是我如何使用 cookie 或任何替代解决方案来为用户提供一种登录方式，直到他们退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:05:53.807

您可以每 15 分钟不活动时使用 javascript 重新加载页面。然后该请求将阻止超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T19:47:14.580

```
Response.Cookies["userName"].Value = "patrick";
Response.Cookies["userName"].Expires = DateTime.Now.AddMinutes(10); 
```

# android - Android：读取操作系统当前持有的文件（例如，/dev/log/main、/dev/input/event*）

> ID：10261956
> 
> 赞同：3
> 
> 时间：2012-04-21T18:53:47.977
> 
> 标签：android, file, io

像`/dev/log/main`, 之类的文件`/dev/input/event*`始终由操作系统保存。如果你 cat 文件，文件的末尾将不会显示，新词将不断地附加到你的“cat”结果中。

当我`new FileInputStream`用来打开此类文件时，它总是以权限被拒绝作为响应（可能是因为它们正被我之前提到的其他目的使用）。对于像`/proc/cpuinfo`.

有没有办法读取这些文件？我想知道是否有任何用户输入来自 `/dev/input/event*`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T20:23:14.003

Android 上 /data/local 之外的大多数文件都需要 root 权限才能查看。我不记得设备上的默认 bin 命令是什么，但是如果您安装 BusyBox，您可以在目录中运行 ls -l 并获取访问文件所需的权限列表。

很可能你需要root你所在的设备——这会将“su”命令添加到你的bin目录中，这样你就可以获得root shell访问权限。

如果您决定这样做并且需要以编程方式运行，那么您可以在项目中包含一个 shell 接口类来执行此操作。

我希望这有助于提供一些见解。

[https://github.com/jjNford/android-shell](https://github.com/jjNford/android-shell)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T05:25:10.773

与 Windows 不同，Linux 不会仅仅因为某些其他进程打开文件而锁定文件。我刚刚在我的 HTC Desire 上打开了一个外壳，然后看了看：

```
$ ls -l /dev/input
crw-rw---- root     input     13,  73 2012-03-02 19:19 event9
crw-rw---- root     input     13,  72 2012-03-02 19:19 event8
(etc) 
```

如您所见，这些文件只能由用户“root”和组“input”读写。

像 /proc/cpuinfo 这样的文件是有意为世界可读的，因为它们包含内核提供给进程的信息。事实上，/proc 中的所有文件都不是真正的文件：整个 /proc 包含的条目只存在于内核中，而不存在于磁盘中。

# python - 自定义模块的代码完成不适用于 PyDev

> ID：10261958
> 
> 赞同：1
> 
> 时间：2012-04-21T18:53:50.670
> 
> 标签：python, eclipse, ide, pydev, code-completion

假设我制作了一个名为 mylib.py 的模块。在eclipse中我输入

```
import mylib 
```

然后我输入`mylib.`并按 CTRL+SPACE。这应该建议 mylib 中的函数/变量，但它没有做任何事情。如果我执行类似`import os`和 type之类的操作`os.`，建议会立即弹出，所以我知道代码完成通常是有效的，只是不适用于我的模块。有什么理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T19:11:00.233

为了完成自定义模块，PyDev 必须对其进行索引（如果可能）并自省其中定义的类、函数、变量和导入。为此，您应该将您的模块添加到 Eclipse 的 PYTHONPATH 中，然后重新索引您的 venv（在 PyDev 中定义的那个）。

大多数情况下，这是由 IDE 自动完成的，但效果不佳（至少它并不完美）。

我真的建议您不要 100% 依赖 IDE 完成。

# c++ - 多个类，相同的公共接口

> ID：10261963
> 
> 赞同：4
> 
> 时间：2012-04-21T18:54:38.390
> 
> 标签：c++, oop, encapsulation

好的，在昨晚之后，我决定改写我的问题以便于阅读。我有2个班级，陆军和战斗组。继承人下面的类，虽然缺少一些部分：

```
class Battlegroups
{
    private: battlegroup battlegroupobject[100];

    public: 

    void AddBattleGroup(); //add a battlegroup object to the array
    void removebattlegroup(); //remove a battle group objects from the array
};

class Army
{
    private: battlegroups battlegroupsobject;

    public:

    void formbattlegroup()
    {
        battlegroupsobject.AddBattleGroup();
    }

    void disbandbattlegroup()
    {
        battlegroupsobject.removebattlegroup();
    }
}; 
```

看，问题出在formbattlegroup()和disbandbattlegroup()上，好像加了个无意义的接口。

如果有办法让我在不执行上述操作的情况下访问 Addbattlegroup 和 removebattlegroup() 方法，请告诉我。

或者，告诉我这是否是你这样做的方式，但对我来说，这似乎是为了代码而添加代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T19:11:21.650

如果`Battlegroups`仅用于包含对象，则可以改为使用`battlegroup battlegroupobject[100]`right `Army`。或使用`std::vector<battlegroup>` 代替`battlegroups`. 如果不是（无论如何），您的决定似乎很正确，因为这些对象有不同的职责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T03:36:33.993

不太确定您的设计，但这是我的猜测：您想要拥有`Army`等`Navy`。然后您可能想要继承`Army`, `Navy`from `Battlegroups`，这样您就不需要为每个类编写`AddBattleGroup`and等。如下所示：`RemoveBattleGroup``Army``Navy`

```
class Battlegroups
{
    // side-note: you may want to replaced below by std::vector<battlegroup>
    private: battlegroup battlegroupobject[100]; 

    public: 

    void AddBattleGroup(); 
    void RemoveBattleGroup(); 
};

class Army
 :  public Battlegroups
{
  // other specific implementations
};

class Navy
 :  public Battlegroups
{
  // other specific implementations
};

// usage
Army army1;
army1.AddBattleGroup();
Navy navy1;
navy1.AddBattleGroup(); 
```

如果这不是您想要的，您可能需要考虑 Dmitry 的回答。

# node.js - 具有查询字符串的 GET 方法的 Http 请求

> ID：10261964
> 
> 赞同：0
> 
> 时间：2012-04-21T18:54:43.813
> 
> 标签：node.js

我通过以下代码通过**node.js**发出了 http GET 请求

```
http.get({host:'google.com'},
        function(res){}); 
```

但是如何使 GET 请求具有查询字符串，例如：[http://myhost/path?query1=](http://myhost/path?query1=) "val1"&query2="val2" ???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:11:59.187

您可以像这样添加路径：

```
var options = {
  host: 'myhost',
  port: 80,
  path: '/path?query1=val1&query2=val2'
};

http.get(options, function(res) {
  console.log("Got response: " + res.statusCode);
}).on('error', function(e) {
  console.log("Got error: " + e.message);
}); 
```

# java - zoomRange() 是如何工作的？

> ID：10261967
> 
> 赞同：0
> 
> 时间：2012-04-21T18:54:57.180
> 
> 标签：java, swing, jfreechart

我需要从 rangeAxis in 缩小`jFreeChart`，所以我为此目的使用[了 zoomRange 。](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/axis/ValueAxis.html#line.1597)

但我不明白什么是`lowerPercent`and `upperPercent`？

我想设置 rangeAxis，如下图所示。我怎样才能做到这一点？

我试过这个，但不知道应该是什么价值`rangeAxis.zoomRange(0,?)`

```
public class Profilee  {

    double last=0;
    ChartFrame frame1;

    JFreeChart chart;
    ChartUtilities cu=new ChartUtilitiesImpl();

    public void generateProfile(double[] pointValue,double[] distance){
        ArrayList pv=new ArrayList();
        ArrayList dist=new ArrayList();

        pv.add(pointValue);
        dist.add(distance);

        XYSeries series = new XYSeries("");
        for(int i=0;i<pointValue.length-1;i++){

              series.add(last,pointValue[i]);
              last=distance[i];
         }

      XYDataset xyDataset = new XYSeriesCollection(series);
      chart= ChartFactory.createXYAreaChart("Profile View Of Contour", "Distance", "Contour Value", xyDataset, PlotOrientation.VERTICAL, true, true, false);

      ValueAxis rangeAxis = chart.getXYPlot().getRangeAxis();

      //rangeAxis.setLowerBound(-3);
      rangeAxis.zoomRange(0,?);     //What should be Value over here?
      frame1=new ChartFrame("XYLine Chart",chart);

      frame1.setVisible(true);
      frame1.setSize(1300,700);
    }

    public static void main(String ar[]){
        Profilee pro=new Profilee();
        double[] pv={3,2,3,0,5,-2,10};
        double[] dist={1,4,8,12,14,20,24};
        pro.generateProfile(pv, dist);

    }

    private static class ChartUtilitiesImpl extends ChartUtilities {

        public ChartUtilitiesImpl() {
        }
    }
} 
```

![在此处输入图像描述](../Images/6e2e74e001b721a889e6f3068e6b520a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T21:28:04.677

默认情况下，`ValueAxis`自动调整其范围以适应数据集。您可以使用其中一种方法采用显式范围，如上图所示`setRange()`。

```
rangeAxis.setRange(-8, 12); 
```

# python - numpy.polyfit 没有关键字“cov”

> ID：10261972
> 
> 赞同：2
> 
> 时间：2012-04-21T18:55:04.467
> 
> 标签：python, numpy, covariance

我正在尝试使用 polyfit 来找到一组数据的最佳拟合直线，但我还需要知道参数的不确定性，所以我也想要协方差矩阵。在线文档建议我写：

> > polyfit(x, y, 2, cov=True)

但这给出了错误：

> > TypeError：polyfit() 得到了一个意外的关键字参数“cov”

果然 help(polyfit) 没有显示关键字参数“cov”。

那么在线文档是否引用了numpy的先前版本？（我有 1.6.1，最新的）。我可以编写自己的 polyfit 函数，但有人对我的 polyfit 没有协方差选项有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:24:01.770

对于来自库的解决方案，我发现使用[scikits.statsmodels](http://scikits.appspot.com/statsmodels)是一个方便的选择。在 statsmodels 中，回归对象具有返回参数和标准错误的可调用属性。我在下面举例说明了这将如何为您工作：

```
# Imports, I assume NumPy for forming your data.
import numpy as np
import scikits.statsmodels.api as sm

# Form the data here
(X, Y) = ....

reg_x_data =  np.ones(X.shape);                      # 0th degree term. 
for ii in range(1,deg+1):
    reg_x_data = np.hstack(( reg_x_data, X**(ii) )); # Append the ii^th degree term.

# Store OLS regression results into `result`
result = sm.OLS(Y,reg_x_data).fit()

# Print the estimated coefficients
print result.params

# Print the basic OLS standard error in the coefficients
print result.bse

# Print the estimated basic OLS covariance matrix
print result.cov_params()   # <-- Notice, this one is a function by convention.

# Print the heteroskedasticity-consistent standard error
print result.HC0_se

# Print the heteroskedasticity-consistent covariance matrix
print result.cov_HC0 
```

对象中还有其他强大的协方差属性`result`。您可以通过打印来查看它们`dir(result)`。此外，按照惯例，异方差一致估计量的协方差矩阵仅*在*您已经调用相应的标准误差后才可用，例如：您必须在调用`result.HC0_se`之前调用，`result.cov_HC0`因为第一个引用会导致第二个引用被计算和存储。

[Pandas](http://pandas.pydata.org/)是另一个可能为这些操作提供更高级支持的库。

**非库函数**

当您不想/不能依赖额外的库函数时，这可能很有用。

下面是我编写的用于返回 OLS 回归系数的函数，以及一堆东西。它返回残差、回归方差和标准误差（残差平方的标准误差）、大样本方差的渐近公式、OLS 协方差矩阵、异方差一致的“稳健”协方差估计（即 OLS 协方差但根据残差加权）和“白色”或“偏差校正”异方差一致协方差。

```
import numpy as np

###
# Regression and standard error estimation functions
###
def ols_linreg(X, Y):
    """ ols_linreg(X,Y) 

        Ordinary least squares regression estimator given explanatory variables 
        matrix X and observations matrix Y.The length of the first dimension of 
        X and Y must be the same (equal to the number of samples in the data set).

        Note: these methods should be adapted if you need to use this for large data.
        This is mostly for illustrating what to do for calculating the different
        classicial standard errors. You would never really want to compute the inverse
        matrices for large problems.

        This was developed with NumPy 1.5.1.
    """
    (N, K) = X.shape
    t1 = np.linalg.inv( (np.transpose(X)).dot(X) )
    t2 = (np.transpose(X)).dot(Y)

    beta = t1.dot(t2)
    residuals = Y - X.dot(beta)
    sig_hat = (1.0/(N-K))*np.sum(residuals**2)
    sig_hat_asymptotic_variance = 2*sig_hat**2/N
    conv_st_err = np.sqrt(sig_hat)

    sum1 = 0.0
    for ii in range(N):
        sum1 = sum1 + np.outer(X[ii,:],X[ii,:])

    sum1 = (1.0/N)*sum1
    ols_cov = (sig_hat/N)*np.linalg.inv(sum1)

    PX = X.dot(  np.linalg.inv(np.transpose(X).dot(X)).dot(np.transpose(X))   )
    robust_se_mat1 = np.linalg.inv(np.transpose(X).dot(X))
    robust_se_mat2 = np.transpose(X).dot(np.diag(residuals[:,0]**(2.0)).dot(X))
    robust_se_mat3 = np.transpose(X).dot(np.diag(residuals[:,0]**(2.0)/(1.0-np.diag(PX))).dot(X))

    v_robust = robust_se_mat1.dot(robust_se_mat2.dot(robust_se_mat1))
    v_modified_robust = robust_se_mat1.dot(robust_se_mat3.dot(robust_se_mat1))

    """ Returns:
        beta -- The vector of coefficient estimates, ordered on the columns on X.
        residuals -- The vector of residuals, Y - X.beta
        sig_hat -- The sample variance of the residuals.
        conv_st_error -- The 'standard error of the regression', sqrt(sig_hat).
        sig_hat_asymptotic_variance -- The analytic formula for the large sample variance
        ols_cov -- The covariance matrix under the basic OLS assumptions.
        v_robust -- The "robust" covariance matrix, weighted to account for the residuals and heteroskedasticity.
        v_modified_robust -- The bias-corrected and heteroskedasticity-consistent covariance matrix.
    """
    return beta, residuals, sig_hat, conv_st_err, sig_hat_asymptotic_variance, ols_cov, v_robust, v_modified_robust 
```

对于您的问题，您可以像这样使用它：

```
import numpy as np

# Define or load your data:
(Y, X) = ....

# Desired polynomial degree
deg = 2;

reg_x_data =  np.ones(X.shape); # 0th degree term. 
for ii in range(1,deg+1):
    reg_x_data = np.hstack(( reg_x_data, X**(ii) )); # Append the ii^th degree term.

# Get all of the regression data.
beta, residuals, sig_hat, conv_st_error, sig_hat_asymptotic_variance, ols_cov, v_robust, v_modified_robust = ols_linreg(reg_x_data,Y)

# Print the covariance matrix:
print ols_cov 
```

如果您在我的计算中发现任何错误（尤其是异方差一致性估计器），请告诉我，我会尽快修复它。

# linux - Varnish/Nginx 缓存 SSL 证书之谜

> ID：10261974
> 
> 赞同：3
> 
> 时间：2012-04-21T18:55:12.410
> 
> 标签：linux, ssl, nginx, varnish

我有 Varnish 负载平衡三个前端 Rails 服务器，Nginx 充当 FastCGI 工作人员的反向代理。昨天，我们的证书过期了，我从 GoDaddy 获得了一个新证书，并安装了它。直接访问静态资源时，我看到了更新的证书，但是从“虚拟子域”访问它们时，我看到的是旧证书。我的 nginx 配置只引用了我的新链式证书，所以我想知道旧证书是如何显示的。我什至已经从目录中删除了它。

示例： [https](https://www212.doostang.com/javascripts/base_packaged.js?1331831461) ://www212.doostang.com/javascripts/base_packaged.js?1331831461 （SSL 没有证书问题） [https://asset5.doostang.com/javascripts/base_packaged.js?1331831461](https://asset5.doostang.com/javascripts/base_packaged.js?1331831461)（正在使用旧证书！）（映射到 www212.doostang.com）

*   我已经重新加载甚至停止并重新启动了 nginx，测试了 nginx 以确保它从正确的配置中读取，并使用新的缓存文件重新启动了清漆。
*   当我在asset5.doostang.com 卷曲文件时，出现证书错误：

    curl: (60) SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败更多详细信息：[http ://curl.haxx.se/docs/sslcerts.html](http://curl.haxx.se/docs/sslcerts.html)

    curl 默认使用证书颁发机构 (CA) 公钥（CA 证书）的“捆绑”执行 SSL 证书验证。如果默认捆绑文件不够用，您可以使用 --cacert 选项指定备用文件。如果此 HTTPS 服务器使用捆绑包中表示的 CA 签名的证书，则证书验证可能由于证书问题而失败（证书可能已过期，或者名称可能与 URL 中的域名不匹配）。如果您想关闭 curl 对证书的验证，请使用 -k（或 --insecure）选项。

*   当我添加 -k 选项时，我得到了请求的文件，我可以在我的 nginx 访问日志中看到它。当我不提供 -k 时，我没有收到 nginx 错误；nginx 对证书错误保持沉默。

> 10.99.110.27 - - [20/Apr/2012:18:02:52 -0700] "GET /javascripts/base_packaged.js?1331831461 HTTP/1.0" 200 5740 "-" "curl/7.21.3 (x86_64-pc- linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18"

我把我认为是 nginx 配置的相关部分放在下面：

```
server {
  # port to listen on. Can also be set to an IP:PORT
  listen 443;
  server_name www.doostang.com, *.doostang.com;

  passenger_enabled on;
  rails_env production;

  ssl on;
  ssl_certificate /.../doostang_combined.crt;
  ssl_certificate_key /.../doostang.com.key;
  ssl_protocols SSLv3;

  # doc root
  root /.../public/files;

  if ($host = 'doostang.com' ) {
        rewrite  ^/(.*)$  https://www.doostang.com/$1  permanent;
   }
}

# Catchall redirect
server {
  # port to listen on. Can also be set to an IP:PORT
  listen 443;

  ssl on;
  ssl_certificate /.../doostang_combined.crt;
  ssl_certificate_key /.../doostang.com.key;

  rewrite ^(.*)$ https://www.doostang.com$1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T03:18:41.403

巴东卿。我的非标准化负载均衡器实际上运行了 nginx 来终止 SSL。我没有注意到这一点，但我认为我做的一切都是正确的。重点是，当您在收购后接管运营时，请标准化和记录！那里有一些非常奇怪的工程师:)

# mysql - 使用另一个 SELECT 更新表，但字段为 SUM(someField)

> ID：10261977
> 
> 赞同：3
> 
> 时间：2012-04-21T18:55:25.293
> 
> 标签：mysql, sql

基本上我有这样的事情：

```
UPDATE
    Table
SET
    Table.col1 = other_table.col1,
FROM
    Table
INNER JOIN
    other_table
ON
    Table.id = other_table.id 
```

问题是我想更新`col1`选择如下：

```
SELECT SUM(col1) FROM other_table WHERE Table.id = other_table.id AND period > 2011 
```

## 编辑

正确答案：

```
UPDATE bestall  
INNER JOIN (SELECT bestid,SUM(view) as v,SUM(rawView) as rv 
                           FROM beststat 
                           WHERE period > 2011 GROUP BY bestid) as t1 
ON bestall.bestid = t1.bestid
SET view = t1.v, rawview = t1.rv 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T19:07:32.633

您不能直接在`set`子句中使用聚合。一种解决方法是子查询：

```
update  your_table as yt
left join 
        (
        select  id
        ,       count(*) as cnt
        from    other_table
        where   period < 4
        group by
                id       
        ) as ot
on      yt.id = ot.id 
set     col1 = coalesce(ot.cnt,0) 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!2/20a33/8)

# php - PHP从文件夹中提取随机图像

> ID：10261978
> 
> 赞同：6
> 
> 时间：2012-04-21T18:55:26.027
> 
> 标签：php, arrays, image, random, directory

我想知道从文件夹中提取随机图像的“更好”方式。

比如说，要让 php 从文件夹中选择一个随机图像，而不是搜索并创建一个数组。

这就是我今天的做法

```
<?php
    $extensions = array('jpg','jpeg');
    $images_folder_path = ROOT.'/web/files/Header/';
    $images = array();
    srand((float) microtime() * 10000000);

    if ($handle = opendir($images_folder_path)) {
        while (false !== ($file = readdir($handle))) {
            if ($file != "." && $file != "..") {
                $ext = strtolower(substr(strrchr($file, "."), 1));
                if(in_array($ext, $extensions)){
                $images[] = $file;
                }
            }
        }
    closedir($handle);
    }
    if(!empty($images)){
        $header_image = $images[array_rand($images)];
    } else {
        $header_image = ''; 
    }
?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T18:59:40.990

尝试这个：

```
<?php

$dir = "images/";
$images = scandir($dir);
$i = rand(2, sizeof($images)-1);
?>

<img src="images/<?php echo $images[$i]; ?>" alt="" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-03T10:19:13.420

```
function get_rand_img($dir)
{
    $arr = array();
    $list = scandir($dir);
    foreach ($list as $file) {
        if (!isset($img)) {
            $img = '';
        }
        if (is_file($dir . '/' . $file)) {
            $ext = end(explode('.', $file));
            if ($ext == 'gif' || $ext == 'jpeg' || $ext == 'jpg' || $ext == 'png' || $ext == 'GIF' || $ext == 'JPEG' || $ext == 'JPG' || $ext == 'PNG') {
                array_push($arr, $file);
                $img = $file;
            }
        }
    }
    if ($img != '') {
        $img = array_rand($arr);
        $img = $arr[$img];
    }
    $img = str_replace("'", "\'", $img);
    $img = str_replace(" ", "%20", $img);
    return $img;
}

echo get_rand_img('images'); 
```

用您的文件夹替换“图像”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T21:29:18.293

下面的代码通过图像扩展名验证图像列表。

```

`<?php

function validImages($image)
{
    $extensions = array('jpg','jpeg','png','gif');
    if(in_array(array_pop(explode(".", $image)),   $extensions))
    {
    return $image;
    }
}

$images_folder_path = ROOT.'/web/files/Header/';
$relative_path = SITE_URL.'/web/files/Header/';

$images = array_filter(array_map("validImages", scandir($images_folder_path)));

$rand_keys = array_rand($images,1);

?>

<?php if(isset($images[$rand_keys])): ?>
    <img src="<?php echo $relative_path.$images[$rand_keys]; ?>" alt="" />
<?php endif; ?>` 

            回答 #4

赞同：0

时间：2016-10-28T00:14:52.190

我在互联网上搜索了几个小时，以实现我想要的代码。我整理了一些我在网上找到的各种答案。这是代码：

```
<?php
    $folder = opendir("Images/Gallery Images/");
    $i = 1;
    while (false != ($file = readdir($folder))) {
        if ($file != "." && $file != "..") {
            $images[$i] = $file;
            $i++;
        }
    }
    //This is the important part... 
    for ($i = 1; $i <= 5; $i++) { //Starting at 1, count up to 5 images (change to suit)
        $random_img = rand(1, count($images) - 1);
        if (!empty($images[$random_img])) { //without this I was sometimes getting empty values
            echo '<img src="Images/Gallery Images/' . $images[$random_img] . '" alt="Photo ' . pathinfo($images[$random_img], PATHINFO_FILENAME) . '" />';
            echo '<script>console.log("' . $images[$random_img] . '")</script>'; //Just to help me debug
            unset($images[$random_img]); //unset each image in array so we don't have double images
        }
    }
?> 
```

使用这种方法，我能够毫无错误地实现 opendir（因为`glob()`对我不起作用），我能够为轮播画廊提取 5 张图像，并摆脱重复的图像并整理出空值。使用我的方法的一个缺点是，图库中的图像数量在 3 到 5 个图像之间变化，可能是由于删除了空值。这并没有打扰我太多，因为它可以根据需要工作。如果有人可以使我的方法更好，我欢迎您这样做。工作示例（网站顶部的第一个旋转木马画廊）：[Eastfield Joinery](https://www.eastfieldjoinery.com/)

```

# c++ - 布尔位域与逻辑位掩码或位移 - C++

> ID：10261983
> 
> 赞同：4
> 
> 时间：2012-04-21T18:55:50.770
> 
> 标签：c++, bit-manipulation

我有一系列需要许多布尔字段的类，介于 4-10 之间。我不想为每个布尔值使用一个字节。我一直在研究位字段结构，例如：

```
struct BooleanBitFields
    {
        bool b1:1;
        bool b2:1;
        bool b3:1;
        bool b4:1;
        bool b5:1;
        bool b6:1;
    }; 
```

但是在做了一些研究之后，我看到很多人说这会导致内存访问效率低下，不值得节省内存。我想知道这种情况下最好的方法是什么。我应该使用位字段，还是使用带有位掩码（and's and or s）的字符来存储 8bits？如果第二种解决方案是移位还是使用逻辑更好？

如果有人可以评论他们将使用什么方法以及为什么它真的会帮助我决定我应该走哪条路线。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:04:45.727

使用一个 int 位数组（为您留出大量空间来扩展，并且单个字符没有优势）并使用掩码常量进行测试：

```
#define BOOL_A 1
#define BOOL_B 1 << 1
#define BOOL_C 1 << 2
#define BOOL_D 1 << 3

/* Alternately: use const ints for encapsulation */    

// declare and set
int bitray = 0 | BOOL_B | BOOL_D;

// test
if (bitray & BOOL_B) cout << "Set!\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T19:06:31.233

由于桌面设备上的地址空间很大，一组 32/64 位布尔值可能看起来很浪费，确实如此，但大多数开发人员并不在意，（包括我在内）。在 RAM 受限的嵌入式控制器上，或者在访问驱动程序中的硬件时，请确保使用位域，否则......

除了 R/W 轻松/速度之外，另一个问题是 32 位或 64 位布尔值比必须由多个逻辑操作操作的中间一位更线程安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T19:10:03.757

位域只是编译器的建议。编译器可以随意实现它们。在嵌入式系统上，有编译器可以保证 1 位到位的映射。其他编译器没有。

I would go with a regular struct, like yours but no bit fields. Make them unsigned chars - the shortest data type. The struct will make it easier to access them while editing, if your IDE supports auto completion.

# javascript - 如何检测仅包含空格的字符串？

> ID：10261986
> 
> 赞同：113
> 
> 时间：2012-04-21T18:56:33.467
> 
> 标签：javascript

包含一个空格的字符串长度始终等于 1：

```
alert('My str length: ' + str.length); 
```

空格是一个字符，所以：

```
str = "   ";
alert('My str length:' + str.length); // My str length: 3 
```

如何区分空字符串和仅包含空格的字符串？如何检测仅包含空格的字符串？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-04-21T19:00:55.697

为此，您可以使用正则表达式来删除字符串中的所有空格。如果结果字符串的长度是`0`，那么您可以确定原始字符串仅包含空格。试试这个：

```
var str = "    ";
if (!str.replace(/\s/g, '').length) {
  console.log('string only contains whitespace (ie. spaces, tabs or line breaks)');
}
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2016-03-04T18:41:17.173

最快的解决方案是使用正则表达式原型函数[test()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test)并查找任何不是空格、制表符或换行符的字符`\S`：

```
if (!/\S/.test(str)) {
  // Didn't find something other than a space which means it's empty
} 
```

如果你有一个超长的字符串，它会产生很大的不同，因为它会在找到非空格字符后立即停止处理。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2019-08-19T23:23:56.513

与 Rory 的回答类似，使用 ECMA 5，您现在可以调用`str.trim().length`而不是使用正则表达式。如果结果值为 0，则您知道您有一个仅包含空格的字符串。

```
if (!str.trim().length) {
  console.log('str is empty!');
} 
```

[您可以在此处](https://www.w3schools.com/jsref/jsref_trim_string.asp)阅读有关修剪的更多信息。

编辑：几年后看了这个之后，我注意到这可以进一步简化。由于 trim 的结果要么为真要么为假，您还可以执行以下操作：

```
if (!str.trim()) {
     console.log('str is empty!');
} 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2018-06-21T14:39:05.827

```
if(!str.trim()){
  console.log('string is empty or only contains spaces');
} 
```

[`String#trim()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trim)删除字符串开头和结尾的空格。如果字符串只包含空格，则修剪后为空，空字符串在 JavaScript 中为假。

如果字符串可能是`null`or `undefined`，我们需要在修剪之前首先检查字符串本身是否为假。

```
if(!str || !str.trim()){
   //str is null, undefined, or contains only spaces
} 
```

这可以使用[可选的链接运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining)来简化。

```
if(!str?.trim()){
   //str is null, undefined, or contains only spaces
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-04-21T19:37:06.693

您可以通过为您的字符串创建一个修剪函数来修剪您的字符串值。

```
String.prototype.trim = function () {
    return this.replace(/^\s*/, "").replace(/\s*$/, "");
} 
```

现在它将可用于您的每个字符串，您可以将其用作

```
str.trim().length// Result will be 0 
```

您还可以使用此方法删除字符串开头和结尾的空格，即

```
"  hello  ".trim(); // Result will be "hello" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-15T09:07:20.580

通过创建修剪函数修剪您的字符串值

```
var text = "  ";
if($.trim(text.length == 0){
  console.log("Text is empty");
}
else
{
  console.log("Text is not empty");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-12T11:46:25.710

如果我们想检查字符串是否只包含空格，那么这可能会有所帮助。

```
const str = '   ';
console.log(/\s/.test(str)); 
```

这将记录为真。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-05-05T07:17:14.303

**这适用于 Dart 而不是 Javascript。但是，当我搜索如何使用 Dart 执行此操作时，出现了这个问题，所以我认为其他人可能需要 Dart 的答案。**

```
String foo = '        ';
if (foo.replaceAll(' ', '').length == 0) {
print('ALL WHITE SPACE');
}
else {
print('NOT ALL WHITE SPACE');
} 
```

为了进一步澄清，字符串`' d '`将打印“不是全部空白”，而字符串`' '`将打印“全部空白”。

# javascript - HTML5、JavaScript：从外部窗口拖放文件（Windows 资源管理器）

> ID：10261989
> 
> 赞同：44
> 
> 时间：2012-04-21T18:56:48.177
> 
> 标签：javascript, html, drag-and-drop, draggable

**能否请我提供一个HTML5 文件拖放**实现的良好工作示例？如果从外部应用程序（Windows 资源管理器）拖放到浏览器窗口，源代码应该可以工作。它应该适用于尽可能多的浏览器。

我想要求一个有很好解释的示例代码。我不想使用第三方库，因为我需要根据自己的需要修改代码。代码应基于**HTML5 和 JavaScript**。我不想使用 JQuery。

我花了一整天的时间寻找好的材料来源，但令人惊讶的是，我没有找到任何好的材料。我发现的示例适用于 Mozilla，但不适用于 Chrome。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2014-10-27T03:17:38.237

这是一个非常简单的例子。它显示一个红色方块。如果您将图像拖到红色方块上，它会将其附加到正文中。我已经确认它可以在 IE11、Chrome 38 和 Firefox 32 中运行。有关更详细的说明，请参阅[Html5Rocks文章。](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

```
var dropZone = document.getElementById('dropZone');

// Optional.   Show the copy icon when dragging over.  Seems to only work for chrome.
dropZone.addEventListener('dragover', function(e) {
    e.stopPropagation();
    e.preventDefault();
    e.dataTransfer.dropEffect = 'copy';
});

// Get file data on drop
dropZone.addEventListener('drop', function(e) {
    e.stopPropagation();
    e.preventDefault();
    var files = e.dataTransfer.files; // Array of all files

    for (var i=0, file; file=files[i]; i++) {
        if (file.type.match(/image.*/)) {
            var reader = new FileReader();

            reader.onload = function(e2) {
                // finished reading file data.
                var img = document.createElement('img');
                img.src= e2.target.result;
                document.body.appendChild(img);
            }

            reader.readAsDataURL(file); // start reading the file data.
        }
    }
});
```

```
<div id="dropZone" style="width: 100px; height: 100px; background-color: red"></div>
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2019-04-08T15:20:59.930

接受的答案为这个主题提供了[一个很好的链接](https://www.html5rocks.com/en/tutorials/file/dndfiles/)；但是，根据 SO 规则，应避免纯链接答案，因为链接可能随时失效。出于这个原因，我花时间为未来的读者总结了链接的内容。

* * *

## 入门

在实施将文件上传到您的网站的方法之前，您应该确保您选择支持的浏览器能够完全支持[File API](https://www.w3.org/TR/file-upload/)。您可以使用下面的 Javascript 片段快速测试：

```
// Check for the various File API support.
if (window.File && window.FileReader && window.FileList && window.Blob) {
  // Great success! All the File APIs are supported.
} else {
  alert('The File APIs are not fully supported in this browser.');
} 
```

当然，您可以修改上面的代码段以满足您的需求。

* * *

## 表单输入

上传文件最常用的方法是使用标准`<input type="file">`元素。JavaScript 将选定`File`对象的列表作为`FileList`.

```
function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // files is a FileList of File objects. List some properties.
    var output = [];
    for (var i = 0, f; f = files[i]; i++) {
      output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
                  f.size, ' bytes, last modified: ',
                  f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
                  '</li>');
    }
    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
```

```
<input type="file" id="files" name="files[]" multiple />
<output id="list"></output>
```

* * *

## 拖放

对上面的代码片段进行简单的修改允许我们提供拖放支持。

```
function handleFileSelect(evt) {
    evt.stopPropagation();
    evt.preventDefault();

    var files = evt.dataTransfer.files; // FileList object.

    // files is a FileList of File objects. List some properties.
    var output = [];
    for (var i = 0, f; f = files[i]; i++) {
      output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
                  f.size, ' bytes, last modified: ',
                  f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
                  '</li>');
    }
    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
  }

  function handleDragOver(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
  }

  // Setup the dnd listeners.
  var dropZone = document.getElementById('drop_zone');
  dropZone.addEventListener('dragover', handleDragOver, false);
  dropZone.addEventListener('drop', handleFileSelect, false);
```

```
<div id="drop_zone">Drop files here</div>
<output id="list"></output>
```

* * *

## 读取文件

现在您已经获得了对 的引用`File`，您可以实例化 a`FileReader`以将其内容读入内存。当加载完成时，该`onload`事件被触发，其`result`属性可用于访问文件数据。随意查看[参考](https://www.w3.org/TR/file-upload/#dfn-filereader)，`FileReader`以涵盖读取文件的四个可用选项。

下面的示例从用户的选择中过滤掉图像，调用`reader.readAsDataURL()`文件，并通过将`src`属性设置为数据 URL 来呈现缩略图。

```
function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

      // Only process image files.
      if (!f.type.match('image.*')) {
        continue;
      }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
          var span = document.createElement('span');
          span.innerHTML = ['<img class="thumb" src="', e.target.result,
                            '" title="', escape(theFile.name), '"/>'].join('');
          document.getElementById('list').insertBefore(span, null);
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
```

```
.thumb {
    height: 75px;
    border: 1px solid #000;
    margin: 10px 5px 0 0;
  }
```

```
<input type="file" id="files" name="files[]" multiple />
<output id="list"></output>
```

* * *

## 切片

在某些情况下，将整个文件读入内存并不是最好的选择。例如，假设您想编写一个异步文件上传器。加快上传速度的一种可能方法是以单独的字节范围块读取和发送文件。然后，服务器组件将负责以正确的顺序重建文件内容。

以下示例演示了读取文件的块。值得注意的是，它使用`onloadend`并检查了`evt.target.readyState`而不是使用`onload`事件。

```
function readBlob(opt_startByte, opt_stopByte) {

    var files = document.getElementById('files').files;
    if (!files.length) {
      alert('Please select a file!');
      return;
    }

    var file = files[0];
    var start = parseInt(opt_startByte) || 0;
    var stop = parseInt(opt_stopByte) || file.size - 1;

    var reader = new FileReader();

    // If we use onloadend, we need to check the readyState.
    reader.onloadend = function(evt) {
      if (evt.target.readyState == FileReader.DONE) { // DONE == 2
        document.getElementById('byte_content').textContent = evt.target.result;
        document.getElementById('byte_range').textContent = 
            ['Read bytes: ', start + 1, ' - ', stop + 1,
             ' of ', file.size, ' byte file'].join('');
      }
    };

    var blob = file.slice(start, stop + 1);
    reader.readAsBinaryString(blob);
  }

  document.querySelector('.readBytesButtons').addEventListener('click', function(evt) {
    if (evt.target.tagName.toLowerCase() == 'button') {
      var startByte = evt.target.getAttribute('data-startbyte');
      var endByte = evt.target.getAttribute('data-endbyte');
      readBlob(startByte, endByte);
    }
  }, false);
```

```
#byte_content {
    margin: 5px 0;
    max-height: 100px;
    overflow-y: auto;
    overflow-x: hidden;
  }
  #byte_range { margin-top: 5px; }
```

```
<input type="file" id="files" name="file" /> Read bytes: 
<span class="readBytesButtons">
  <button data-startbyte="0" data-endbyte="4">1-5</button>
  <button data-startbyte="5" data-endbyte="14">6-15</button>
  <button data-startbyte="6" data-endbyte="7">7-8</button>
  <button>entire file</button>
</span>
<div id="byte_range"></div>
<div id="byte_content"></div>
```

* * *

## 监控进度

使用异步事件处理时，我们免费获得的好处之一是能够监控文件读取的进度；对于大文件、捕获错误和确定读取何时完成很有用。

和事件可用于监视读取的进度`onloadstart`。`onprogress`

下面的示例演示了显示进度条以监控读取状态。要查看正在运行的进度指示器，请尝试使用大文件或远程驱动器中的文件。

```
var reader;
  var progress = document.querySelector('.percent');

  function abortRead() {
    reader.abort();
  }

  function errorHandler(evt) {
    switch(evt.target.error.code) {
      case evt.target.error.NOT_FOUND_ERR:
        alert('File Not Found!');
        break;
      case evt.target.error.NOT_READABLE_ERR:
        alert('File is not readable');
        break;
      case evt.target.error.ABORT_ERR:
        break; // noop
      default:
        alert('An error occurred reading this file.');
    };
  }

  function updateProgress(evt) {
    // evt is an ProgressEvent.
    if (evt.lengthComputable) {
      var percentLoaded = Math.round((evt.loaded / evt.total) * 100);
      // Increase the progress bar length.
      if (percentLoaded < 100) {
        progress.style.width = percentLoaded + '%';
        progress.textContent = percentLoaded + '%';
      }
    }
  }

  function handleFileSelect(evt) {
    // Reset progress indicator on new file selection.
    progress.style.width = '0%';
    progress.textContent = '0%';

    reader = new FileReader();
    reader.onerror = errorHandler;
    reader.onprogress = updateProgress;
    reader.onabort = function(e) {
      alert('File read cancelled');
    };
    reader.onloadstart = function(e) {
      document.getElementById('progress_bar').className = 'loading';
    };
    reader.onload = function(e) {
      // Ensure that the progress bar displays 100% at the end.
      progress.style.width = '100%';
      progress.textContent = '100%';
      setTimeout("document.getElementById('progress_bar').className='';", 2000);
    }

    // Read in the image file as a binary string.
    reader.readAsBinaryString(evt.target.files[0]);
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
```

```
#progress_bar {
    margin: 10px 0;
    padding: 3px;
    border: 1px solid #000;
    font-size: 14px;
    clear: both;
    opacity: 0;
    -moz-transition: opacity 1s linear;
    -o-transition: opacity 1s linear;
    -webkit-transition: opacity 1s linear;
  }
  #progress_bar.loading {
    opacity: 1.0;
  }
  #progress_bar .percent {
    background-color: #99ccff;
    height: auto;
    width: 0;
  }
```

```
<input type="file" id="files" name="file" />
<button onclick="abortRead();">Cancel read</button>
<div id="progress_bar"><div class="percent">0%</div></div>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-28T07:27:52.927

查看 ondragover 事件。您可以简单地将 div 的内部隐藏起来，直到 ondragover 事件触发一个函数，该函数将在其中显示 div，从而让用户拖放文件。有一个 onchange 声明可以让你在一个文件被添加到输入时自动调用一个函数（比如上传）。确保输入允许多个文件，因为您无法控制它们将尝试拖动到浏览器中的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-01T12:53:35.827

这种技术效果很好，但是如果您想要一个二进制 blob 而不仅仅是将拖动的图像放在 html img 元素中，您将需要使用 'fetch' 函数两次。

# php - 尝试包含/要求时出现自定义错误

> ID：10261990
> 
> 赞同：1
> 
> 时间：2012-04-21T18:56:49.303
> 
> 标签：php, include

尝试包含/需要 php 文件时如何打印自定义错误？

这是我的想法：

```
<?php 

try{
    include "template/".$_GET['view'].".php"; 
}
catch (Exception $e){
    echo 'some error code'; 
};

?> 
```

但是，如果所需的文件不存在，我仍然会收到默认错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T18:59:10.470

决定评论值得改变回答：

用于[`file_exists()`](http://php.net/manual/en/function.file-exists.php)查看文件是否存在。

如果是，请包括，否则回显您的自定义错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:59:35.463

用于[`file_exists()`](http://php.net/manual/en/function.file-exists.php)在包含之前检查文件是否存在。这样你就可以处理错误。

```
<?php

if(file_exists('asd.php')){
    include "asd.php";
}else{
    echo "Oh no! The file doesn't exist!";
}

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T19:00:49.113

包含错误不会被您的 try/catch 捕获，但是，我相信包含的脚本中的错误会被正确捕获。更好的解决方案是使用 file-exists 函数，请参阅这篇文章以获取示例：[PHP 中的可选包含](https://stackoverflow.com/questions/10224730/optional-include-in-php)

一旦您对文件的存在进行了自己的验证，您就可以将执行代码包装在 try catch 中，以确保捕获该代码中的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T19:01:50.397

我不建议只使用`file_exist`. 您不希望您的访问者访问您文件系统上的任何文件，因此我建议您使用白名单；如果文件名在白名单中，则仅显示/包含它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T19:02:05.967

```
if ((include "template/".$_GET['view'].".php") != 'OK') {
    echo "My custom error message";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-17T14:39:12.687

如果您想要自己的错误消息，您可以这样做：

```
<?php
$file = "template/".$_GET['view'].".php";
if ( error_reporting() == 0 ){
    ( @include_once($file) ) OR die("<tt><p><b>ERROR</b> $file file not found!</p>");
}else{
    require_once($file);
}
?> 
```

因此，如果没有错误报告（在生产环境中的大多数时间），您可以打印自己的错误消息。如果您处于开发模式（ans error_reporting 已打开），您会收到 PHP 错误消息！

> **提示**永远不要使用来自用户的 $_GET 输入直接用于包含 - 这是一个黑色 XSS 漏洞 :-D

# javascript - d3.js 在 d3.geo.path 中添加一个圆圈

> ID：10261992
> 
> 赞同：11
> 
> 时间：2012-04-21T18:57:04.623
> 
> 标签：javascript, svg, d3.js

我已经从转换为geojson的mbtile创建了一个地图，投影是WGS84。我这样加载它：

```
var map = svg.append("g").attr("class", "map");
var path = d3.geo.path().projection(d3.geo.albers().origin([3.4,46.8]).scale(12000).translate([590, 570]));
    d3.json('myjsonfile.json', function(json) {
        map.selectAll('path').data(json.features).enter().append('path').attr('d', path)
}); 
```

现在我想在我的 svg 中添加一个带有 (lat,lng) 坐标的 svg 元素（一个点、一个圆、一个点（我不知道））。

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-22T03:41:49.497

您需要分离出投影，以便您可以再次使用它来投影您的点的纬度/经度：

```
var map = svg.append("g").attr("class", "map");
var projection = d3.geo.albers()
    .origin([3.4,46.8])
    .scale(12000)
    .translate([590, 570]);
var path = d3.geo.path().projection(projection);
d3.json('myjsonfile.json', function(json) {
    map.selectAll('path')
        .data(json.features)
      .enter().append('path').attr('d', path);
    // now use the projection to project your coords
    var coordinates = projection([mylon, mylat]);
    map.append('svg:circle')
        .attr('cx', coordinates[0])
        .attr('cy', coordinates[1])
        .attr('r', 5);
}); 
```

另一种方法是通过投影坐标翻译点：

```
map.append('svg:circle')
    .attr("transform", function(d) { 
        return "translate(" + projection(d.coordinates) + ")"; 
    })
    .attr('r', 5); 
```

# android - 动态添加视图

> ID：10261993
> 
> 赞同：0
> 
> 时间：2012-04-21T18:57:05.607
> 
> 标签：android, android-layout, views

我正在使用以下布局并希望在另一个下方动态添加文本视图（取决于我要显示的数据）

```
main.xml

<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/contain"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

    </LinearLayout>

</ScrollView> 
```

所以我尝试了这个

```
public class Feeds extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Intent intent=getIntent();
        Bundle b=intent.getExtras();
      String s= b.getString("datapack");

      Log.w("String",s);
      String data[]=s.split("#");

String temp="";
      LinearLayout l=(LinearLayout)findViewById(R.id.contain);
      LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
              (LayoutParams.WRAP_CONTENT), (LayoutParams.WRAP_CONTENT));

      RelativeLayout relative = new RelativeLayout(getApplicationContext());
      relative.setLayoutParams(lp);

      for(int i=1;i<data.length;i++)
      {Log.w("i data",data[i]);
          temp=temp  + data[i] + ",";
          Log.w("tag",temp);
          if(i%5==0)
          {Log.w("data",temp);
              TextView tv = new TextView(getApplicationContext());
              tv.setLayoutParams(lp);
              tv.setId(i);
              tv.setText(temp);
              relative.addView(tv, lp);
              temp=null;

          }

      }
      l.addView(relative);

    }
} 
```

我是第一次使用 Scrollview，所以这会产生一些问题，但主要问题是相对布局中的文本视图相互重叠。如何指定每个视图之间的间隙？

![重叠](../Images/d31745644f52a19bf4cd78d7730432be.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T19:05:45.017

如果要将视图添加到 RelativeLayout 中，则必须设置视图的放置位置，这与 LinearLayout 不同，您只需要在其中添加视图即可。

试着改变这个

```
LinearLayout layout= new LinearLayout (getApplicationContext());
  layout.setLayoutParams(lp); 
```

在这里你得到一个小提示。不要这样做

```
if(i%5==0)
{Log.w("data",temp); 
```

尝试这样做

```
if(i%5==0){
   Log.w("data",temp); 
```

最好阅读和理解

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T19:07:18.250

我看不到您在哪里定义每个 textview 的位置，即 layout_below、layout_toLeftOf ... 如果没有定义位置，则相对布局将每个视图堆叠在左上角。

**添加**

似乎是digulino，我同意。我想补充一点，你应该能够在 ScrollView 中只使用一个 RelativeLayout 来获得你想要的布局方案，如果你想要水平滚动并支持滑动手势，也可能是一个 Horizo​​ntalScrollView。

# pydev - 从 pythonpath 中删除库

> ID：10261994
> 
> 赞同：0
> 
> 时间：2012-04-21T18:57:22.343
> 
> 标签：pydev

我检查了`twisted`源代码表单 svn 并使用 eclipse 作为 Python 项目将其打开。不过我也有twisted安装在我的系统下`/usr/lib/python2.6/dist-packages`。所以源代码中的导入会导入已安装的版本，而不是我从 svn 签出的版本。

如何从 PyDev 搜索的库中删除已安装的版本？

从 PYTHONPATH 中删除`/usr/lib/python2.6/dist-packages`不是一个选项，因为 twisted 依赖于该目录中的某些库（例如`serial`library ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:14:32.960

当您在 PyDev 中启动时，它应该在解释器的 PYTHONPATH 之前添加项目的 PYTHONPATH，因此，如果您使用扭曲的源代码创建项目并为此设置 PYTHONPATH（即：源文件夹）项目正确，它应该在解释器之前找到它。

请注意，其他项目应该引用您配置的扭曲项目才能访问它。

# java - 使用 JAVA API 查找知道电子邮件地址的 SMTP 主机和端口

> ID：10261995
> 
> 赞同：6
> 
> 时间：2012-04-21T18:57:24.280
> 
> 标签：java, smtp, jakarta-mail

我做了一个简单的应用程序来使用 Java API 发送电子邮件并且有一个问题：

**有没有办法找出知道将登录发送电子邮件的人的电子邮件地址的 SMTP 主机？还有港口？**

例如，如果发件人的电子邮件地址为 sender@gmail.com，则 SMTP 主机为 smtp.gmail.com，端口为 465。如果发件人的电子邮件地址为 sender@yahoo.com，则 SMTP 主机为 smtp .yahoomail.com 和端口 25。

假设我不知道这一点，有没有办法使用 Java API 类找到这些信息？请注意，我是 java 新手 :)

提前致谢，

安德烈亚

* * *

感谢您的回答。我尝试执行以下操作：

```
public static String getMXRecordsForEmailAddress(String eMailAddress) { 

    String returnValue = null; 

    try { 
        String hostName = getHostNameFromEmailAddress(eMailAddress); 
        Record[] records = new Lookup(hostName, Type.MX).run();

        if (records == null) { 
            throw new RuntimeException("No MX records found for domain " + hostName + ".");
        }

        // return first entry (not the best solution) 
        if (records.length > 0) { 
            MXRecord mx = (MXRecord) records[0]; 
            returnValue = mx.getTarget().toString(); 
        } 
    } catch (TextParseException e) { 
        throw new RuntimeException(e); 
    } 

    System.out.println("return value = "+returnValue);
    return returnValue; 
} 
```

但是，无论 hostName 的值如何（例如 gmail.com、yahoo.com） **Record[] records = new Lookup(hostName, Type.MX).run();** 总是返回 null。

我很确定我错过了什么，但我不知道是什么。你能帮我解决这个问题吗？你能告诉我我做错了什么吗？

非常感谢，

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:33:39.033

不幸的是，没有标准的方法来识别任意电子邮件地址的正确传出 SMTP 服务器，假设您尝试做的是让用户指定一个电子邮件地址/密码，然后使用该帐户发送邮件。

这就是为什么电子邮件客户端（例如 Thunderbird、Outlook 等）通常需要用户手动配置传出 SMTP 服务器名称/端口的原因。您可以通过识别一些流行的 ISP（Google、Yahoo 等）并预先配置正确的值来协助该过程，但没有通用的方法可以自动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T19:08:30.750

您通常与您拥有的 smtp 服务器通信，它处理将邮件路由到 yahoo Gmail 一些随机 isp 到服务器。

使用的常规 API 是[http://javamail.kenai.com/nonav/javadocs/javamail](http://javamail.kenai.com/nonav/javadocs/)。

如果您正在编写自己的 smtp 服务器：1 请不要 2 smtp 信息存储在 DNS mxrecord [http://en.m.wikipedia.org/wiki/MX_record](http://en.m.wikipedia.org/wiki/MX_record)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-03T13:21:43.873

似乎您正试图让用户只输入电子邮件和密码来连接。如果是这样，我们遇到了同样的问题，我们发现最好的方法是获取域名，并且：

1.  如果它像 Gmail、Yahoo 或 Outlook 一样是公开的，那么请尝试为它们进行特定配置。

2.  如果它是私人域或类似的东西。使用端口 587、465 和 25 循环通过传出服务器 smtp.domain.com 和 mail.domain.com。您可能必须检查 TLS 和身份验证。

这个过程有点长，但如果你有几封公共电子邮件和十几封私人电子邮件，你应该能够测试大多数场景。

# android - MediaPlayer 直播 m3u8 音频错误 (1,-1010)

> ID：10261996
> 
> 赞同：2
> 
> 时间：2012-04-21T18:57:29.897
> 
> 标签：android, media-player

我使用 MediaPlayer 类，可以播放以下苹果 m3u8 测试流 - 至少是音频部分（[http://devimages.apple.com/iphone/samples/bibpop/gear1/prog_index.m3u8](http://devimages.apple.com/iphone/samples/bipbop/gear1/prog_index.m3u8)）。但是当我播放以下流时，我收到错误“MediaPlayer(17499): Error (1,-1010)”。

[http://stream.rro.ch/shoutcast/radiostation2.stream/playlist.m3u8](http://stream.rro.ch/shoutcast/radiostation2.stream/playlist.m3u8)

什么是错误（1，-1010）以及如何在 android 中播放上述 m3u8 流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:51:02.357

该错误意味着：

ERROR_UNSUPPORTED = MEDIA_ERROR_BASE - 10, // -1010

我认为当音频片段的格式是 AAC 时这是一个问题，不确定但可能是一个线索