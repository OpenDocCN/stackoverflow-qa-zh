# StackOverflow 问答 10773000-10773999

# javafx-2 - 如何在 JavaFX 中侦听调整大小事件

> ID：10773000
> 
> 赞同：18
> 
> 时间：2012-05-27T09:39:22.407
> 
> 标签：javafx-2

如何在 JavaFX 2.1 中检测场景或舞台何时更改大小？我找不到任何事件处理程序。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-27T13:13:39.513

有`heightProperty`和`widthProperty`。您可以使用这些属性进行绑定，或向它们添加侦听器。

```
public void start(Stage stage) {
    Scene scene = new Scene(new Group(), 300, 200);
    stage.setScene(scene);

    stage.titleProperty().bind(
            scene.widthProperty().asString().
            concat(" : ").
            concat(scene.heightProperty().asString()));

    stage.show();
} 
```

或查看下一个示例：[https ://stackoverflow.com/a/9893911/1054140](https://stackoverflow.com/a/9893911/1054140)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-12T16:33:03.363

**在重新调整场景大小后**执行操作的一种方法是完成，您可以这样做：

（注意：可能有更好的方法来做到这一点，对我来说它完成了工作）

```
final Stage primaryStage = getStage() // get your stage from somewhere

// create a listener
final ChangeListener<Number> listener = new ChangeListener<Number>()
{
  final Timer timer = new Timer(); // uses a timer to call your resize method
  TimerTask task = null; // task to execute after defined delay
  final long delayTime = 200; // delay that has to pass in order to consider an operation done

  @Override
  public void changed(ObservableValue<? extends Number> observable, Number oldValue, final Number newValue)
  {
    if (task != null)
    { // there was already a task scheduled from the previous operation ...
      task.cancel(); // cancel it, we have a new size to consider
    }

    task = new TimerTask() // create new task that calls your resize operation
    {
      @Override
      public void run()
      { 
        // here you can place your resize code
        System.out.println("resize to " + primaryStage.getWidth() + " " + primaryStage.getHeight());
      }
    };
    // schedule new task
    timer.schedule(task, delayTime);
  }
};

// finally we have to register the listener
primaryStage.widthProperty().addListener(listener);
primaryStage.heightProperty().addListener(listener); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-28T17:32:08.257

这太旧和基本但它可能会帮助像我这样的菜鸟

您可以将侦听器添加到宽度和高度属性

```
stage.heightProperty().addListener(e ->{
    handle....
});

stage.widthProperty().addListener(e ->{
    handle....
}); 
```

# c# - 将表单窗口附加到 C# 中的另一个窗口

> ID：10773003
> 
> 赞同：17
> 
> 时间：2012-05-27T09:40:05.947
> 
> 标签：c#, winforms, pinvoke

我想将表单附加到另一个窗口（另一个进程）。我尝试通过使用来做到这一点

```
[DllImport("user32.dll", SetLastError = true)]
private static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

setParentWindow(myWindowHwnd, newParentHwnd); 
```

这样做时，我的形式变得依附，但也是**不可见**的。问题[“附加窗口..”](https://stackoverflow.com/questions/10676649/attach-window-to-window-of-another-process)解决了 WPF 窗口的这个问题，基本上是通过使用

```
HwndSourceParameters parameters = new HwndSourceParameters();
...
HwndSource src = new HwndSource(parameters); 
```

我试图将其转移到我的表格中，但我无法这样做（例如如何处理`src.RootVisual = (Visual)window.Content;`？->[完整来源](https://stackoverflow.com/a/10678119/356726)）。

[另一条评论](https://stackoverflow.com/a/10676891/356726)说，我需要修改 windows 样式：

> 出于兼容性原因，SetParent 不会修改正在更改其父级的窗口的 WS_CHILD 或 WS_POPUP 窗口样式。因此，如果 hWndNewParent 为 NULL，还应在调用 SetParent 后清除 WS_CHILD 位并设置 WS_POPUP 样式。相反，如果 hWndNewParent 不为 NULL 并且该窗口以前是桌面的子窗口，则应在调用 SetParent 之前清除 WS_POPUP 样式并设置 WS_CHILD 样式。

在这里我错过了相应的 API，我可以直接从 C# 中完成，还是让我`DllImport`再次使用另一个？

[好或坏 - 不同进程之间的 SetParent() win32 API](https://stackoverflow.com/questions/3459874/good-or-evil-setparent-win32-api-between-different-processes)建议不要在不同进程中附加窗口，但至少我想尝试一下。

**问题：**

我需要做什么才能使表单窗口可见？如果使用的方法`WS_Child`是正确的，我将如何设置它？或者[WPF 方法](https://stackoverflow.com/questions/10676649/attach-window-to-window-of-another-process)是要走的路，但我如何将它应用于 Windows 窗体？

-- 调查结果（后来补充） --

[使用 winAPI 修改另一个应用程序的 windows 样式](https://stackoverflow.com/questions/2832217/modify-the-windows-style-of-another-application-using-winapi)显示如何从 C# / PInvoke 修改样式

在这里找到所有的[windows 样式](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632600%28v=vs.85%29.aspx)，C# 语法在底部。

-- 与 Alan 讨论的结果 --

我确实在 Win XP 上运行了我的程序以进行交叉检查（请参阅下面 Alan 的回答和评论）。至少我现在确实看到了一些东西。由于我添加了 Alan 示例中的坐标，因此当在左上角附近的另一个窗口上移动时，我的窗口现在在记事本中闪耀。您仍然可以看到在记事本中键入的文本作为覆盖。在 Win 7 (32) 下，我什么也看不到。

1.  现在我需要找出这是否可以以稳定的方式编写，也出现在 Win 7 上。
2.  尽管如此，我仍然无法单击表单上的任何按钮，也需要解决。

![附在记事本上的 WinXP WinForm](../Images/75625970ce0ff732db4d75efd6ee7b6f.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-27T12:42:14.797

这是一个工作示例。托管应用程序是一个简单的 WinForms 应用程序，带有一个空白表单（此处未包括），而“访客应用程序”有一个主表单（包含下面的代码），其中包含一些控件，包括一个测试按钮，用于在更改访客后显示消息表单的父级。

与 OP 问题相关的通常警告也适用于此。

```
public partial class GuestForm: Form
{
  [DllImport("user32.dll")]
  public static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);

  [DllImport("user32.dll")]
  public static extern int GetWindowLong(IntPtr hWnd, int nIndex);

  [DllImport("user32.dll", SetLastError = true)]
  private static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

  public static int GWL_STYLE = -16;
  public static int WS_CHILD = 0x40000000; 

  public GuestForm()
  {
    InitializeComponent();
  }

  private void button1_Click(object sender, EventArgs e)
  {
    MessageBox.Show("done");
  }

  private void button2_Click(object sender, EventArgs e)
  {
    Process hostProcess = Process.GetProcessesByName("HostFormApp").FirstOrDefault();
    if (hostProcess != null)
    {
      Hide();
      FormBorderStyle = FormBorderStyle.None;
      SetBounds(0, 0, 0, 0, BoundsSpecified.Location);

      IntPtr hostHandle = hostProcess.MainWindowHandle;
      IntPtr guestHandle = this.Handle;
      SetWindowLong(guestHandle, GWL_STYLE, GetWindowLong(guestHandle, GWL_STYLE) | WS_CHILD);
      SetParent(guestHandle, hostHandle);

      Show();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-02T08:15:58.147

@Horst Walter嘿伙计，我不确定你是否已经解决了这个问题，但我刚刚找到了解决方案..

对我来说，问题是您想要在另一个表单中的主表单的透明度。

只需禁用透明度，它应该可以工作。

# c++ - 将网站的源代码保存到矢量

> ID：10773009
> 
> 赞同：-2
> 
> 时间：2012-05-27T09:42:33.767
> 
> 标签：c++, string, curl, vector

我正在尝试将站点的源代码保存到向量中，其中每一行源代码都是一个新的向量元素，因为我只需要在我的程序中使用一个特定的行（编号 47）。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:06:51.400

从 URL 加载数据。使用卷曲：

```
std::vector<char> LoadFromUrl(const std::string& url)
{
    struct Content
    {
        std::vector<char> data;

        static size_t Write(char * data, size_t size, size_t nmemb, void * p)
        {
            return static_cast<Content*>(p)->WriteImpl(data, size, nmemb);
        }

        size_t WriteImpl(char* ptr, size_t size, size_t nmemb)
        {
            data.insert(end(data), ptr, ptr + size * nmemb);
            return size * nmemb;
        }
    };

    Content content;

    CURL* curl = curl_easy_init();
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &content);
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, &Content::Write);
    curl_easy_setopt(curl, CURLOPT_URL, url.c_str());
    curl_easy_perform(curl);

    content.data.push_back('\0');

    return content.data;
} 
```

使用 strtok 或 boost tokenizer 或您自己的实现对数据进行标记：

```
std::vector<std::string> LoadLines(const std::string& url)
{
    std::vector<char> content = LoadFromUrl(url);

    std::vector<std::string> lines;
    for(char* token = strtok(&content.front(), "\n");
        token; token = strtok(0, "\n"))
    {
        lines.push_back(std::string(token));
    }
    return lines;
}

int main()
{
    std::vector<std::string> lines = LoadLines(
        "http://stackoverflow.com/questions/10773009/save-sites-source-code-to-vectorstring");

    std::copy(begin(lines), end(lines), std::ostream_iterator<std::string>(std::cout, "\n"));
} 
```

# python - 在 matplotlib 中清除轴时保留自动缩放

> ID：10773010
> 
> 赞同：6
> 
> 时间：2012-05-27T09:42:33.937
> 
> 标签：python, plot, matplotlib

我想制作一系列图（用于创建动画），因此我想重用轴并保留所有图的 x 和 y 限制，所以我设置了`ax.autoscale(False)`. 但是，当我使用 plt.cla() 清除轴以绘制下一个图像时，自动缩放设置被覆盖，因此我必须*在每次迭代*`ax.autoscale(False)`时设置x 和 y 限制。

 *```
In [49]: fig = plt.figure(1)

In [50]: ax = fig.add_subplot(1, 1, 1)

In [59]: ax.get_autoscale_on()
Out[59]: True

In [60]: ax.autoscale(False)

In [61]: ax.get_autoscale_on()
Out[61]: False

In [62]: plt.cla()

In [63]: ax.get_autoscale_on()
Out[63]: True 
```

所以我最终做了`ax.lines = []`or `ax.lines.pop()`，但这迫使我在每个情节上设置颜色以避免颜色循环。如果我设置`hold`为`False`，那么每次调用时都会重置自动缩放设置`ax.plot()`。有没有其他方法可以在删除所有图的同时保留轴属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T12:28:31.290

不要调用`plt.cla()`，它会**清除**当前轴。如果您想创建动画，请改用`matplotlib.pyplot.draw()`它将**重绘**当前图形，我认为这就是您想要的。

```
from pylab import *
import matplotlib.pyplot as plt
ion()
ax=plt.subplot(111)

line1, = ax.plot(x,y,label='x')

for i in xrange(20):
 #update your data to new x,y
 line1.set_xdata(x)
 line1.set_ydata(y)
 draw() 
```

Matplotlib的[CookBook](http://www.scipy.org/Cookbook/Matplotlib/Animations)有一些关于动画的好例子，你可能想看看。*

# java - 从 AVL 树示例代码中删除

> ID：10773013
> 
> 赞同：5
> 
> 时间：2012-05-27T09:43:00.580
> 
> 标签：java, algorithm, data-structures, tree, avl-tree

我正在研究 AVL 树，但似乎找不到关于删除的参考代码（通过谷歌搜索或从我方便的几本教科书）。
我不确定为什么会这样，但是您知道在 java 中删除 AVL 的任何参考/示例吗？
（我只发现了这个：[avl tree removal](http://www.dreamincode.net/forums/topic/214510-working-example-of-avl-tree-remove-method/)，它在链接中说明它在测试中失败）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T12:30:00.777

我有一个[Java 中的 AVL 树](http://github.com/phishman3579/java-algorithms-implementation/blob/master/src/com/jwetherell/algorithms/data_structures/AVLTree.java)的实现，它已经过很好的测试，如果您想使用它作为参考。它基于维基百科的描述，并且评论很好。

就像您在常规 BST 插入后必须保持平衡一样。您像 BST 一样删除节点，然后根据以下算法进行平衡。

在 BST 移除后进行平衡的情况是（节点是用于替换被移除节点的节点的父节点）：

```
 ... remove code ...
    // Re-balance the tree all the way up the tree
    while (nodeToRefactor != null) {
        nodeToRefactor.updateHeight();
        balanceAfterDelete(nodeToRefactor);
        nodeToRefactor = (AVLNode<T>) nodeToRefactor.parent;
    }
    ... remove code ...

    ... balance code ...
    int balanceFactor = node.getBalanceFactor();
    if (balanceFactor==-2 || balanceFactor==2) {
        if (balanceFactor==-2) {
            AVLNode<T> ll = (AVLNode<T>) node.lesser.lesser;
            int lesser = ll.height;
            AVLNode<T> lr = (AVLNode<T>) node.lesser.greater;
            int greater = lr.height;
            if (lesser>=greater) {
                rightRotation(node);
            } else {
                leftRotation(node.lesser);
                rightRotation(node);
            }
        } else if (balanceFactor==2) {
            AVLNode<T> rr = (AVLNode<T>) node.greater.greater;
            int greater = rr.height;
            AVLNode<T> rl = (AVLNode<T>) node.greater.lesser;
            int lesser = rl.height;
            if (greater>=lesser) {
                leftRotation(node);
            } else {
                rightRotation(node.greater);
                leftRotation(node);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T12:01:33.417

树删除的工作原理是搜索（以与查找相同的方式）直到找到要删除的节点，用它的最小后继节点替换它（你也可以使用它的最大前驱节点），然后重新平衡树。再平衡是自下而上进行的；在找到要删除的节点后，该算法向下插入右子树的左脊柱，找到最小的后继节点，并在它返回树的过程中重新平衡到被删除的节点，该节点被最小后继节点替换。唯一的特殊情况发生在树中不存在被删除的项目时，在这种情况下，树将原封不动地返回。[这](http://programmingpraxis.com/2011/11/25/avl-trees/)是我在 Scheme 中实现的 AVL 树；通过使用递归而不是更传统的迭代，代码变得非常简单：

```
(define (tree k v l r)
  (vector k v l r (+ (max (ht l) (ht r)) 1)))
(define (key t) (vector-ref t 0))
(define (val t) (vector-ref t 1))
(define (lkid t) (vector-ref t 2))
(define (rkid t) (vector-ref t 3))
(define (ht t) (vector-ref t 4))
(define (bal t) (- (ht (lkid t)) (ht (rkid t))))
(define nil (vector 'nil 'nil 'nil 'nil 0))
(vector-set! nil 2 nil)
(vector-set! nil 3 nil)
(define (nil? t) (eq? t nil))

(define (rot-left t)
  (if (nil? t) t
    (tree (key (rkid t))
          (val (rkid t))
          (tree (key t) (val t) (lkid t) (lkid (rkid t)))
          (rkid (rkid t)))))

(define (rot-right t)
  (if (nil? t) t
    (tree (key (lkid t))
          (val (lkid t))
          (lkid (lkid t))
          (tree (key t) (val t) (rkid (lkid t)) (rkid t)))))

(define (balance t)
  (let ((b (bal t)))
    (cond ((< (abs b) 2) t)
          ((positive? b)
            (if (< -1 (bal (lkid t))) (rot-right t)
              (rot-right (tree (key t) (val t)
                (rot-left (lkid t)) (rkid t)))))
          ((negative? b)
            (if (< (bal (rkid t)) 1) (rot-left t)
              (rot-left (tree (key t) (val t)
                (lkid t) (rot-right (rkid t)))))))))

(define (lookup lt? t k)
  (cond ((nil? t) #f)
        ((lt? k (key t)) (lookup lt? (lkid t) k))
        ((lt? (key t) k) (lookup lt? (rkid t) k))
        (else (cons k (val t)))))

(define (insert lt? t k v)
  (cond ((nil? t) (tree k v nil nil))
        ((lt? k (key t))
          (balance (tree (key t) (val t)
            (insert lt? (lkid t) k v) (rkid t))))
        ((lt? (key t) k)
          (balance (tree (key t) (val t)
            (lkid t) (insert lt? (rkid t) k v))))
        (else (tree k v (lkid t) (rkid t)))))

(define (delete-successor t)
  (if (nil? (lkid t)) (values (rkid t) (key t) (val t))
    (call-with-values
      (lambda () (delete-successor (lkid t)))
      (lambda (l k v)
        (values (balance (tree (key t) (val t) l (rkid t))) k v)))))

(define (delete lt? t k)
  (cond ((nil? t) nil)
        ((lt? k (key t))
          (balance (tree (key t) (val t)
            (delete lt? (lkid t) k) (rkid t))))
        ((lt? (key t) k)
          (balance (tree (key t) (val t)
            (lkid t) (delete lt? (rkid t) k))))
        ((nil? (lkid t)) (rkid t))
        ((nil? (rkid t)) (lkid t))
        (else (call-with-values
                (lambda () (delete-successor (rkid t)))
                (lambda (r k v) (balance (tree k v (lkid t) r))))))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T09:51:39.857

算法并没有*那么*糟糕，一旦你实现了`balance()`......

想到的第一个实现是 Apache Commons Collections 中 TreeList 的实现，它是一个由 AVL 树支持的列表。 [http://www.docjar.org/html/api/org/apache/commons/collections/list/TreeList.java.html](http://www.docjar.org/html/api/org/apache/commons/collections/list/TreeList.java.html)有源代码。

# c - 如何使指向结构数组的指针成为全局的

> ID：10773015
> 
> 赞同：0
> 
> 时间：2012-05-27T09:43:06.413
> 
> 标签：c, arrays, pointers, memory-management

我有这个代码：

```
#define N 100  //starting size of the array

int is_full(VERTEX *arr);
int add_vertex(char *name);
int print_degree(int ID);
int _get_vertex(int ID);
VERTEX *resize_array(VERTEX *vertex_array,int new_size);

VERTEX *arr = (VERTEX*)calloc(N, sizeof(VERTEX)); // dynamic allocation and initialization to NULL\0

int main(void)
{
    int vertex_counter = 0 ;
    int starting_size_of_array = sizeof(VERTEX)*N;
} 
```

我收到错误：错误 C2099：初始化程序不是常量

我希望 VERTEX 数组是全局的，以便我可以在任何地方访问这个数组。那么为什么它不是恒定的呢？N 在 #define 下，VERTEX 在 .h 文件中有它的声明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T09:47:57.857

首先，*初始化*器不是常数。您需要从函数中初始化全局 - 例如`main`：

```
VERTEX *arr;

int main(void)
{
    arr = calloc(N, sizeof *arr);
} 
```

但是，如果可以避免（通常是这样），您首先不应该使用全局变量。它会破坏您的代码设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:47:26.443

calloc() 将返回的值不是恒定的。您可以将 arr 初始化为 NULL，然后在程序启动期间对其进行初始化。

# ios5 - iOS 4 和 iOS 5 中导航栏的 tintColor 问题

> ID：10773017
> 
> 赞同：1
> 
> 时间：2012-05-27T09:44:42.360
> 
> 标签：ios5, ios4, uinavigationbar, tintcolor

我已经为导航栏设置了色调，例如

```
self.navigationController.navigationBar.tintColor = 
    [UIColor colorWithRed:168.0/255.0 green:0.0/255.0 blue:0.0/255.0 alpha:1.0]; 
```

这适用于 iOS 5 及更高版本。但在 iOS 4 及以下 iOS 5 中，它只是黑色。色调颜色未设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:58:33.890

for UISWitch tintColor is only for IOS 6.0 and later. so probably on IOS 5.0 should crash

# javascript - 在 jQuery Mobile 中获取选择列表的选定值（不是文本）

> ID：10773024
> 
> 赞同：0
> 
> 时间：2012-05-27T09:46:12.000
> 
> 标签：javascript, jquery, jquery-mobile

我坚持使用 jQuery Mobile 在选择列表中获取选项的 value 属性。

我的 HTML 模板：

```
<div data-role="fieldcontain" class="activity ui-hide-label">
  <label for="activity">Activity</label>
  <select name="activity" id="activity">
    <option value="">Activity</option>
    <option value="3">Athlete</option>
    <option value="2">Regular sports</option>
    <option value="1">No sports</option>
  </select>
</div> 
```

我的 JS 函数来获取值：

```
function getValue() {
  var activityValue = $('#activity').val();
  console.log("activity value: ", activityValue);
  localStorage['activity'] = activityValue;
} 
```

无论我从选择列表中选择什么，变量 activityValue 始终为空。我还尝试了 option:selected 和类似的可能性。

显然，当我选择一个选项时，DOM 选择列表不会改变。例如，如果我选择“常规运动”，则 DOM 如下所示：

```
<div data-role="fieldcontain" class="activity ui-hide-label ui-field-contain ui-body ui-br">
  <label for="activity" class="ui-select">Activity</label>
    <div class="ui-select">
      <div data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-icon="arrow-d" data-iconpos="right" data-theme="g" data-inline="false" data-mini="false" class="ui-btn ui-shadow ui-btn-corner-all ui-fullsize ui-btn-block ui-btn-icon-right ui-btn-up-g">
        <span class="ui-btn-inner ui-btn-corner-all">
          <span class="ui-btn-text">Regular sports</span>
          <span class="ui-icon ui-icon-arrow-d ui-icon-shadow">&nbsp;</span>
        </span>
        <select name="activity" id="activity">
          <option value="">Activity</option>
          <option value="1">Athlete</option>
          <option value="2">Regular sports</option>
          <option value="3">No sports</option>
        </select>
      </div>
    </div>
</div> 
```

我错过了什么？概括一下：我需要选定的值（1,2 或 3）而不是文本（上例中的“常规运动”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:34:42.367

好吧，还有一个额外的功能可以获取选择更改。

```
$('#activity').live( "change", function(event, ui) {
  localStorage['activity'] = $(this).val();
}); 
```

感谢 Raminson 和 thecodeparadox 为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:54:44.583

你怎么调用这个`getValue()`函数？

试试这个：

```
$('#activity').change(function(){
    getValue();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T09:54:44.630

```
$('#activity').change(function() { // change event will fire on every selection change
  var activityValue = $(this).val(); // this.value
  console.log("activity value: ", activityValue);
  localStorage['activity'] = activityValue;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-29T15:10:42.330

`var activityValue = $('#activity :selected').val();`

# php - 如何防止目录访问并在php中显示禁止的错误

> ID：10773025
> 
> 赞同：18
> 
> 时间：2012-05-27T09:46:18.880
> 
> 标签：php, apache

1.  我是 .htaccess 的新手，我想知道如何使用 .htacces 来防止通过我的文件夹的 url 直接访问，例如 localhost/mycart/images/ 或 localhost/mycart/css 应该显示禁止消息。

2.  目前我已经将 index.php 放在我网站的每个文件夹中，并回显消息是这样做的好方法。

3.  当我访问我的网站时，如 www.mycart/index.php/css 或 www.mycart/index.php/images 它显示没有图像和 css 的网站为什么以及如何修复它？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-27T09:48:59.963

我用过

```
# disable directory browsing
Options -Indexes 
```

相反，要启用目录浏览，请使用以下指令：

```
# enable directory browsing
Options +Indexes 
```

同样，此规则将阻止服务器列出目录内容：

```
# prevent folder listing
IndexIgnore * 
```

最后，可以使用 IndexIgnore 指令来阻止选择文件类型的显示：

```
# prevent display of select file types
IndexIgnore *.wmv *.mp4 *.avi *.etc 
```

来自： [防止未经授权的目录浏览](http://perishablepress.com/stupid-htaccess-tricks/#sec3)来自[愚蠢的 HTACCESS 技巧](http://perishablepress.com/press/2006/01/10/stupid-htaccess-tricks/)。

它还包含许多其他有用的命令，可用于`.htaccess`增强安全性和性能。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-27T12:20:29.310

您可以简单地将以下内容添加到您的 .htaccess

```
# Don't listing directory
Options -Indexes
ErrorDocument 403 http://www.your-website-home-page.com/
# Follow symbolic links
Options +FollowSymLinks

# Default handler
DirectoryIndex index.php 
```

这将在文件浏览时仅加载 index.php 文件。如果没有找到 index.php 文件，则发生 403 错误（访问受限）并将用户发送到主页

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-27T09:47:12.933

如果要拒绝访问所有文件：

```
deny from all 
```

如果要禁用目录列表：

```
IndexIgnore * 
```

# javascript - Modernizr 测试失败后功能仍然适用

> ID：10773026
> 
> 赞同：0
> 
> 时间：2012-05-27T09:46:23.307
> 
> 标签：javascript, touch, modernizr

我正在使用 Modernizr 运行触摸事件测试，测试似乎运行良好，但仍然是我仅在测试成功时才调用的函数。

这是测试：

```
Cluster.prototype.test_touch_event_support = function(callback) {
    return (Modernizr.touch) ? callback : log("Touch Support Undetected");
}; 
```

这是只有在测试成功时才应该运行的函数：

```
Cluster.prototype.initiate_shop_touch_events = function() {
    var self = this;
    return $("#" + this.shop_wrapper_id).hammer({prevent_default: true, drag_min_distance: Math.round(this.viewport_width * 0.1)}).bind("drag", function(ev) {
        var data = JSON.parse(self.get_local_storage_data(self.shop_data_key));
        var step = (ev.direction == "left") ? 1 : -1;
        var new_page = parseInt(data.current_page + step);
        return (new_page > 0 && new_page <= data.total_pages) ? $(self.shop_navigation_class).jPages(new_page) : false;
});
}; 
```

而且我正在检查，即使它不依赖于我传递给测试的论点：

```
self.test_touch_event_support(self.initiate_shop_touch_events()); 
```

有人可以告诉我为什么该功能仍在运行吗？因为我还在控制台中收到不支持触摸事件的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T09:55:12.023

```
self.test_touch_event_support(self.initiate_shop_touch_events()); 
```

将**调用**self.initiate_shop_touch_events 的结果传递给 self.test_touch_event_support

你需要做：

```
self.test_touch_event_support(self.initiate_shop_touch_events); 
```

传递函数。

在

```
Cluster.prototype.test_touch_event_support = function(callback) {
    return (Modernizr.touch) ? callback : log("Touch Support Undetected");
}; 
```

您需要**调用**回调而不是**引用**它。

```
Cluster.prototype.test_touch_event_support = function(callback) {
    return (Modernizr.touch) ? callback.call (this) : log("Touch Support Undetected");
}; 
```

教训：

1.  了解调用函数和引用函数之间的区别。与许多编程语言不同，JavaScript 中的函数是一流的实体。您可以通过调用它们的名称来传递对它们的引用。要调用、调用或执行一个函数，您必须在函数引用之后立即指定一个用括号括起来的参数列表（可能为空）。
2.  调用时，所有函数都会传递一个上下文参数，该参数使用`this`函数体中的单词引用。这通常通过在函数名称前加上对象引用来指定，例如`obj.func (123)`在此调用中，`obj`每次函数体引用时都将使用该对象`this`。使用这种用法，函数必须是对象的已定义方法。函数的`call`and`apply`方法可以用来显式指定这个上下文参数：`func.call (obj, 123)`相当于上面的 when `func`is not a method `obj`。

更多细节可以在这里找到[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function)

# google-app-engine - 在 GWT 中将 HTML 元素添加到 RootPanel

> ID：10773027
> 
> 赞同：0
> 
> 时间：2012-05-27T09:46:48.863
> 
> 标签：google-app-engine, gwt

我的 HTML 页面中有一个`<div>`。我需要做的是，`<ul>`从我的入口点类中添加元素。我已经使用下面的代码尝试了 onModuleLoad 函数，

```
UListElement ul=Document.get().createULElement();
    ImageElement img=Document.get().createImageElement();
    img.setSrc("\\images\\personas");
    LIElement li=Document.get().createLIElement();
    li.appendChild(img);
    ul.appendChild(li);
    Document.get().getElementById("divPhotos").appendChild(ul); 
```

但是我`<div>`运行它时是空的/没有孩子。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:23:58.380

假设您已将“divPhotos”id 正确分配给 HTML DOM 中的 div，则您的代码是可以的。我怀疑您正在查看页面源代码并希望看到新添加的 DOM 元素。您要查看的是页面活动 DOM。检查 DOM 的方式取决于您使用的 Web 浏览器。如果您使用 Google Chrome，请按 F12 访问调试工具，这将允许您遍历实时 DOM。对于 Firefox，您需要安装 Firebug。其他浏览器提供自己的调试机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:52:40.907

我忘了在 html 页面中添加 nocache.js。

```
<script type="text/javascript" language="javascript" src="test/test.nocache.js"></script> 
```

它现在工作...

# php - 在创建存储在数据库中的短 URL 算法时，有哪些潜在问题需要解决

> ID：10773028
> 
> 赞同：2
> 
> 时间：2012-05-27T09:46:51.103
> 
> 标签：php, mysql

我知道创建一个短 url 算法并不像散列一个 URL 然后将散列切碎到其自身的某个增量版本那么容易。即使从外部的角度来看，这就是它看起来正在发生的事情。我已经阅读了一些关于这个想法的文章，也看到了一些在行动中的文章。但似乎没有人担心未来的证明。

所以我在这里试图找出如何使用 PHP 来解决这个问题，并找到至少可以避免常见问题的方法。从数据库冲突到除了整体存储和数据库大小之外可能需要担心的任何其他问题。

我肯定会面临的一个问题是我正在创建的服务正在从我的好友正在创建的另一项服务中获取用户端 URL，因此我们基于每个用户跟踪短 URL，因此可能多个用户最终可能使用相同的长url 但我们需要为每个提供 URL 的用户使用不同的短 url id。想想几个用户分享了一个最近流行的 youtube 视频。

因此，创建一个不会同时面对许多 bash 的短 url 算法的最佳策略是什么，这将允许我使用一些可能的短 URL 查询我的数据库，以查看它们是否已经存在。

更好的是，有什么方法我可以通过 mySQL 功能创建唯一的 id，这在概念上循环直到一个是唯一的，因此为这个原因而创建？

我知道我在这里拉着稻草，这是一个相当开放的问题。但我试图在深入构建过程之前巧妙地思考，后来才发现我搞砸了。在确保我对此采取半理智的方法之前，我需要一些输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:04:40.490

你可以使用[这个](http://www.snippetit.com/2009/04/php-short-url-algorithm-implementation/)用 PHP 制作的短 URL 算法——它会为同一个 url 生成四个不同的“哈希”。

创建一个类似的表

```
id |    original_url        |   short_url
------------------------------------------
1    http://www.google.com/     tm5kxb 
```

当用户输入要缩短的 URL 时，您使用文章中的函数并接收四个不同哈希的数组。然后您可以使用如下查询：

`SELECT id FROM {your_table} WHERE short_url = "{a_hash_from_the_function}"`

如果查询没有返回结果，则表示没有匹配，您可以使用这个。如果查询返回结果，只需使用数组中的另一个散列，看看它是否存在，等等。

阅读整篇文章，因为作者在底部解释了如何使您的哈希更加不可预测。我建议使用与 不同的哈希算法`md5()`，但您必须自己进行试验。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:51:18.483

假设您有一个*urlShortened表*

```
id  | url
-----------------
1     http://ecc 
```

这两个字段都`INDEX`在`UNIQUE`您的数据库中，因此如果您需要知道一个 url 已经存在，只需进行选择：

```
SELECT id FROM urlShortened WHERE url  = 'http://anUrl' 
```

这也将防止插入重复的网址

如果您需要**每个用户拥有唯一的 url，**只需添加另一个字段 ( ) 并在两个字段 ( )`userId`上创建唯一索引`url,userId`

```
id  | url           | userId
-----------------------------
1     http://site1    1
2     http://site1    2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:48:59.237

这是

```
function shorturl($input) { ... } 
```

上面[SNIPPET IT](http://www.snippetit.com/2009/04/php-short-url-algorithm-implementation/)页面中的函数，从 PHP 转换为 C#：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Security.Cryptography;

public static List<string> shorturl(string input) {
    var md5 = MD5.Create();
    var base32 = new char[] {
        'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h',
        'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p',
        'q', 'r', 's', 't', 'u', 'v', 'w', 'x',
        'y', 'z', '0', '1', '2', '3', '4', '5'
    };

    var hex = string.Join("", md5.ComputeHash(Encoding.ASCII.GetBytes(input)).Select(a => a.ToString("x2")));
    var hexLen = hex.Length;
    var subHexLen = hexLen / 8;
    var output = new List<string>();

    for (var i = 0; i < subHexLen; i++) {
        var subHex = hex.Substring(i * 8, 8);
        var @int = 0x3FFFFFFF & Convert.ToUInt32("0x" + subHex, 16);
        var @out = "";
            for (var j = 0; j < 6; j++) {
            var val = 0x0000001F & @int;
            @out += base32[val];
            @int = @int >> 5;
        }

        output.Add(@out);
    }

    return output;
} 
```

# iphone - Facebook API：在朋友墙上发帖

> ID：10773030
> 
> 赞同：2
> 
> 时间：2012-05-27T09:47:18.910
> 
> 标签：iphone, ios, facebook, facebook-graph-api

是否可以在用户朋友墙上发布一些内容，而无需先获得所有朋友（这样您就可以获得朋友 ID）？

```
[facebook requestWithGraphPath:@"me/friends" andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T10:36:31.600

您可以通过向 发出请求来获取登录用户的朋友`me/friends`。
然后，您可以创建一个显示朋友列表的 ui 元素，用户可以选择他想要分享的人。

`FRIEND_ID/feed`然后，在用户选择后，您只需通过向（[用户对象的 Feed 连接](http://developers.facebook.com/docs/reference/api/user/#feed)）发出 POST 来在他们的墙上发帖。
您需要拥有`publish_stream`允许您的权限：`Enables your app to post content, comments, and likes to a user's stream and to the streams of the user's friends`（http://developers.facebook.com/docs/authentication/permissions/）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T11:03:16.700

看到这个

```
-(IBAction)PostToBuddyWall
{

NSMutableDictionary  *postVariablesDictionary = [[NSMutableDictionary alloc] init];

[postVariablesDictionary setObject:@"LOL" forKey:@"name"];    
[postVariablesDictionary setObject:self.postTextView.text forKey:@"message"];

[objDelegate.facebook requestWithGraphPath:[NSString stringWithFormat:@"%@/feed",friendId] andParams:postVariablesDictionary andHttpMethod:@"POST" andDelegate:nil];

NSLog(@"message: %@",postVariablesDictionary);
[postVariablesDictionary release];

UIAlertView *facebookAlter=[[UIAlertView alloc] initWithTitle:@"Message" message:@"Posted successfully on facebook" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil, nil];
[facebookAlter show];
[facebookAlter release]; 

[self dismissModalViewControllerAnimated:YES];    
} 
```

# javascript - 外部 CSS 和 JavaScript 文件没有缓存？

> ID：10773035
> 
> 赞同：2
> 
> 时间：2012-05-27T09:48:48.347
> 
> 标签：javascript, css, caching, browser

突然之间（至少看起来如此），在查看网页源代码时，Chrome 和 Firefox 的行为都非常奇怪。虽然通常我应该看到如下来源：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">"<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Dynamic Map Application - HTML & JavaScript</title>

    <link rel="stylesheet" type="text/css" href="resources/css/styles.css" />
    <link rel="stylesheet" type="text/css" href="resources/css/colorbox.css" />
</head>
... 
```

我现在看到它（完全按照浏览器显示给我的方式复制）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Dynamic Map Application - HTML & JavaScript</title> <style type="text/css" style="display:none">/**
  * CSS Reset styles 
  */
body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td { 
    margin:0;
    padding:0;
}
... 
```

好像样式表和脚本不是外部的。这不是正常行为，以前也没有发生过。它会影响浏览器缓存外部文件的方式（即不会）。

任何人都可以帮助解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:04:29.167

我遇到了由代理引起的类似问题。确保您没有直接或间接地使用一台（也许您的工作场所安装了一台）。

# java - Java 日志框架和日志分析器

> ID：10773038
> 
> 赞同：1
> 
> 时间：2012-05-27T09:49:32.760
> 
> 标签：java, logging

我正在使用 EJB3 开发 Primefaces。我需要一个日志框架来监视和跟踪应用程序的用户并提取统计信息。有谁知道，我有哪些日志记录和日志分析选项？

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:55:46.453

看看 Java 的简单日志门面 (SLF4J)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T10:01:09.777

Java 提供了一个高效的日志框架。有大量的日志记录级别：FINE、FINER、FINEST、WARNING、SEVERE。

此外，您还有另一个扩展的日志框架 log4j，其级别为 DEBUG、SEVERE 等。

选择你想要的任何东西。如果您想将不同的日志推送到不同的文件中，Log4j 会更容易。

您可以稍后在 dbf 中使用 linux 中的 grep/awk utils 进行分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T09:57:16.097

我一直使用 log4j 进行日志记录，因为它设置起来并不难，并且具有人们需要的大部分功能。你可以在[这里](http://logging.apache.org/log4j/1.2/)找到它。我以前从未使用过日志分析器，但似乎 apache 有一个可以分析 log4j 输出：[chainaw](http://logging.apache.org/chainsaw/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T09:55:03.630

解决方案取决于您的要求。您可以使用任何日志库（例如 log4j）将其记录到文本文件中，并使用 grep/awk/etc 等 Linux 实用程序进行分析，或者将其写入数据库并使用 SQL 进行分析，或者写入 NoSQL 存储并使用您的代码对其进行分析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T07:29:17.663

您澄清说您不是在寻找如何记录，而是在寻找如何处理日志。

首先是查看器，用于 log4j 的 Apache Chainsaw 和用于 logback+log4j+JDK14 日志记录的[Lilith 。](http://lilith.huxhorn.de/)这对于仅查看您需要的项目很有用。

对于专门的报告生成器，我不相信有任何基于原始日志的。但是，您可以使用 Unix 实用程序`grep`/`awk`来`perl`提取您需要的信息并手动生成输入文件到可视化工具或报告生成器。这里的问题是你通常想从日志中知道的事情很难预测。如果您有实际需要，请了解如何使用日志生成所需的信息（slf4j 中的标记很好），然后将这些日志发布为您需要进一步处理的格式。

# android - 简单光标适配器的工作

> ID：10773039
> 
> 赞同：1
> 
> 时间：2012-05-27T09:50:09.233
> 
> 标签：android, cursor, simplecursoradapter, android-context

```
Cursor c = managedQuery(People.CONTENT_URI,null,null,null,People.NAME);
String[] cols = new String[]{People.NAME};
int[] views = new int[]{android.R.id.text1};
SimpleCursorAdapter sca = new SimpleCursorAdapter(this,android.R.layout.simple_list_item_1,c,cols,views);
listview.setAdapter(adapter); 
```

我正在使用此代码段将我`ListView`的与`Cursor`.

我想问什么

```
String[] cols = new String[]{People.NAME};
int[] views = new int[]{android.R.id.text1}; 
```

确实如此？

并请解释构造函数所需的参数`SimpleCursorAdapter`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:59:00.833

**list_item.xml**参考这个[链接](http://developer.android.com/resources/tutorials/views/hello-listview.html)

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp" >
</TextView> 
```

**HelloListView.java**

```
public class HelloListView extends ListActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, getNames()));

  ListView lv = getListView();
  lv.setTextFilterEnabled(true);

  lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
      // When clicked, show a toast with the TextView text
      Toast.makeText(getApplicationContext(), ((TextView) view).getText(),
          Toast.LENGTH_SHORT).show();
    }
  });
}
private ArrayList<String> getNames(){
        ArrayList<String> namesArray = new ArrayList<String>();
        Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
        ContentResolver cr = getContentResolver();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);
        String[] projection    = new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME};
        Cursor names = getContentResolver().query(uri, projection, null, null, null);

        int indexName = names.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME);
        names.moveToFirst();
        do {
            namesArray.add(names.getString(indexName));
         } while (names.moveToNext());
       return namesArray;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T15:03:13.453

它是一张地图，告诉适配器使用光标中的哪些列来填充布局中的哪些小部件。

它们按给定的顺序使用。from 数组中列出的第一列中的数据（称为 cols）将进入 to 数组中列出的第一个 id（称为 views），依此类推。

其他参数是包含您在 to 数组中指定的视图 ID 的布局和包含要在数组中使用的数据的光标。

# javascript - 如果源代码被更改然后重定向

> ID：10773040
> 
> 赞同：1
> 
> 时间：2012-05-27T09:50:11.683
> 
> 标签：javascript, jquery, html

是否可以使用 jQuery/Javascript 来查看访问者是否更改了网页源代码，如果是，则重定向它们？

并且通过更改，我的意思是如果他们打开萤火虫或其他东西并在页面完成加载后编辑页面上的任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T09:54:14.883

即使有办法做到这一点，访问者仍然可以编辑此验证，所以这是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T10:05:13.467

这似乎是一种防止人们弄乱您的表格的技巧。

这绝对不是让您的网站更安全的正确方法；安全性必须始终来自服务器端，或者，如果一切都通过前端完成，则只能伤害当前登录的用户。

即使您确实成功地使用 JavaScript 实现了这一点，我要做的第一件事就是完全禁用它:) 或者只是禁用 JavaScript，`wget`先使用，检查代码，然后编写`curl`解决方法，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T09:53:42.940

是的。在加载时，将 html 元素的 innerhtml 存储在一个字符串中。然后每秒设置一个间隔来检查当前的 html 是否与存储的 var 匹配。

# java - 整个应用程序的静态方法内的连接静态变量的范围？

> ID：10773042
> 
> 赞同：3
> 
> 时间：2012-05-27T09:50:22.060
> 
> 标签：java, jdbc

我有以下方法将某些内容从我的 java 应用程序记录到 Oracle DB。

```
Package com.util.dblog;
public class DBLog {

static Connection con = null;
static PreparedStatement stmt = null;

static { 
 try{
      DBConnectionHelper connHelper = DBConnectionHelper.createInstance();
    con=connHelper.getConnection("ds"); //Getting connection from connection pool
    con.setAutoCommit(false);
    }
catch(Exception e)
{}  
       } 

public static void logmethod1(String param1, String param2) { 

if (con == null || con.isClosed()) {
 DBConnectionHelper connHelper = DBConnectionHelper.createInstance();
    con=connHelper.getConnection("ds");
    con.setAutoCommit(false);
}

String SQL_PREP_INSERT = "INSERT INTO tableA (LOG_ID,USER_ID,EXEC_TIME) VALUES"             + " (logid_seq.nextval, ?, ?)"; 
stmt = con.prepareStatement(SQL_PREP_INSERT); 
stmt.execute();
stmt.close();
}

public static void logmethod2(String param1, String param2, String param3) { 

if (con == null || con.isClosed()) {
 DBConnectionHelper connHelper = DBConnectionHelper.createInstance();
    con=connHelper.getConnection("ds");
    con.setAutoCommit(false);
}

...
...
}

public saveCon() {
con.commit();
}
public closeCon() {
   con.close();
}

} //End of DBLog class

From my Java application class, I am calling as follows,

import com.util.dblog;
public class myApp{
DBLog.logmethod1(param1, param2);
....
DBLog.logmethod2(param1, param2, param3);
...
} //End of myApp class 
```

我在 Filter 类的请求级别调用 saveCon()，在 sessionListener 类的 destroy() 方法中调用 closeCon()。我这样做只是为了减少提交频率，而不是在 logmethod1 和 logmethod2 中提交连接对象。在我的应用程序中，此方法将被调用 5-10 次。所以我将在 10 次中提交一次，而不是每个请求 10 次。假设有另一个 http 请求，一旦插入 10 个日志，就会有另一个提交。最后，一旦会话即将被销毁，我将关闭连接。

现在我遇到的问题是，在 DBLog 类的静态块中创建的连接对象“con”可用于静态方法 logmethod1 和 logmethod2 吗？我希望它是在第一次加载类时创建的，并且在整个应用程序范围内都可用？因为会有很多用户进来，我担心这种方法是正确的，还是需要任何其他方法？如果不清楚，请告诉我，我会回来的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:26:12.413

static {} 块将在您的方法之前调用，但以这种方式使用您的类是个坏主意。当您可以用经典结构代替静态结构时，请避免使用它们。您可以将所有变量和方法更改为非静态，阻止`static {}`更改构造函数，您的应用程序将类似于：

```
import com.util.dblog;
public class myApp{

    DBLog log = new DBLog();

    log.logmethod1(param1, param2);
    log.logmethod2(param1, param2, param3);

} //End of myApp class 
```

在这个[网站上](http://www.javapuzzlers.com/)有一本很棒的书叫做 Java Puzzlers ，我建议你阅读它。它有一个与您的问题相关的小章节，阅读大约需要 3 分钟。

[Java Puzzlers](http://www.javapuzzlers.com/java-puzzlers-sampler.pdf)进入谜题 5：比生命更大

我认为你的程序会正常工作。

有一个没有静态块的替代方案：

```
Package com.util.dblog;
public class DBLog {

Connection con = null;
PreparedStatement stmt = null;

public DBLog () {
    init();
}

private void init() {
    try {
        DBConnectionHelper connHelper = DBConnectionHelper.createInstance();
        con=connHelper.getConnection("ds"); //Getting connection from connection pool
        con.setAutoCommit(false);
    } catch(Exception e) {}  
}

public void logmethod1(String param1, String param2) { 

    if (con == null || con.isClosed()) {
        init();
    }

    String SQL_PREP_INSERT = "INSERT INTO tableA (LOG_ID,USER_ID,EXEC_TIME) VALUES"             + " (logid_seq.nextval, ?, ?)"; 
    stmt = con.prepareStatement(SQL_PREP_INSERT); 
    stmt.execute();
    stmt.close();
}

public void logmethod2(String param1, String param2, String param3) { 

    if (con == null || con.isClosed()) {
        init();
    }
    ...
    ...
}

public void voidsaveCon() {
    con.commit();
}
public void closeCon() {
    con.close();
}

} //End of DBLog class

From my Java application class, I am calling as follows,

import com.util.dblog;
public class myApp {

    ...
    // in some method
    DBLog log = new DBLog();
    log.logmethod1(param1, param2);
    ....
    log.logmethod2(param1, param2, param3);
    ...

} //End of myApp class 
```

如果要发送变量，则不得创建另一个实例。您可以通过 2 种方式发送变量：

```
SomeAnotherClass {

    // after initialize you can use this log, this log is same as in myApp class
    DBLog log;

    // 1 way: by sending to constructor
    public SomeAnotherClass(DBLog log) {
        this.log = log;
    }

    // 2 way: by calling set method
    public void setLog(DBLog log) {
        this.log = log;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T12:27:27.290

当您在静态块中建立连接时，当多个客户端请求任何查询时会产生问题，当时只有一个连接适用于所有请求，这将产生多线程问题。除了线程安全，它还会显示连接超时的问题。为避免这种情况，您应该像这样编写代码..

```
public class DB_Connector {        
    public Connection connection = null;
    public Statement stmt;
    static Properties prop = null;
    public DB_Connector() {
        System.out.println("-------- MySQL JDBC Connection Testing ------------");
        prop = new Properties();
        try {
            Class.forName("com.mysql.jdbc.Driver");
            connection = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/" + <db name>,
                    "root", <password>);
            stmt = connection.createStatement();
        } catch (SQLException e) {
            System.out.println("Connection Failed! Check output console");
            e.printStackTrace();

        }

        if (connection != null) {
            System.out.println("You made it, take control your database now!");
        } else {
            System.out.println("Failed to make connection!");
        }

    }

    public ResultSet queryResult(String Query) {
        ResultSet rst = null;
        try {
            rst = stmt.executeQuery(Query);
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return rst;
    }

    public int queryCount(String Query) {
        int count = 0;
        try {
            count = stmt.executeUpdate(Query);
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return count;
    }
    public void closeConnection()
    {
        try {
            connection.close();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

这是处理任何查询的安全方法。您的电话应按此顺序

```
 DB_Connector db=new DB_Connector();
    db.queryResult(query);
    db.queryCount(query);
    db.closeConnection(); 
```

# plot - 使用指数 x 轴绘图

> ID：10773043
> 
> 赞同：0
> 
> 时间：2012-05-27T09:51:08.330
> 
> 标签：plot, flot, exponent

尝试用指数 x 轴构建[图。](http://code.google.com/p/flot/)它应该从 0 开始并以 1.85 的幂递增

即：
刻度：1 标签：1000 值：3.55
刻度：2 标签：1500 值：7.51
刻度：3 标签：2000 值：12.79
刻度：4 标签：2500 值：19.33
刻度：5 标签：3000 值：27.08
等等直到7000。

显然，该值应该是刻度距 0,0 点的距离。y 轴应为 0 到 7。

试图使用自定义刻度来实现这一点但没有成功。
我猜我可以使用一个函数来生成数组，但不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T10:08:13.183

如果 flot 不允许您使用带有自定义指数的指数轴，那么只需预先缩放您的轴和数据并使用自定义刻度和标签。

编辑：[这](http://jsfiddle.net/9gzSy/)是一个 jsFiddle，我认为它可以满足您的需求。tickLabel 旋转对于防止标签相互重叠非常必要。

# php - Switch Case 或 if else if 哪个更快更好？

> ID：10773047
> 
> 赞同：77
> 
> 时间：2012-05-27T09:51:22.870
> 
> 标签：php, performance, if-statement, switch-statement

哪个是更好和最快的方法： if 或 switch ？

```
if(x==1){
  echo "hi";
} else if (x==2){
  echo "bye";
}

switch(x){
  case 1
    ...
  break;
  default;
} 
```

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-05-27T09:53:04.303

你的第一个例子是完全错误的。你需要`elseif`而不是仅仅`else`.

如果您使用`if..elseif...`或`switch`主要是偏好问题。性能是一样的。

但是，如果您的所有条件都是在每种条件下都相同的类型，`x == value`通常是有意义的。如果有两个以上的条件，我也只会使用。`x``switch``switch`

`switch`如果变量部分是函数调用，那么实际上会给您带来性能优势的一种情况：

```
switch(some_func()) {
    case 1: ... break;
    case 2: ... break;
} 
```

然后`some_func()`仅在使用时调用一次

```
if(some_func() == 1) {}
elseif(some_func() == 2) {} 
```

它将被调用两次 - 包括函数调用的可能副作用发生两次。但是，您可以随时使用`$res = some_func();`，然后`$res`在您的`if`条件下使用 - 这样您就可以完全避免这个问题。

**根本无法**使用 switch 的情况是当您有更复杂的条件时 -`switch`仅适用于`x == y`恒定`y`值。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-12-18T02:20:39.573

根据[phpbench.com](http://phpbench.com)，if/elseif 稍微快一些，尤其是在使用严格比较 (===) 时。

[![在此处输入图像描述](../Images/f29cd0428331156acc54eebc9d2b86c9.png)](https://i.stack.imgur.com/GnQJk.png)

但是，如果您想在将被调用数千次的函数上减少微秒，这才是真正重要的。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-05-27T10:51:40.967

*条件数大于 3 时**使用`switch`*通用规则（为了便于阅读）。

`if`//更灵活（因此更好），但`else if`速度稍快，因为它只计算一次条件然后检查输出，而每次都必须这样做。`else``switch``if`

**编辑：似乎[`switch`比`if`](http://www.phpbench.com/)毕竟慢，我可以发誓事实并非如此......**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-13T14:27:06.360

使用时，与相比的`==`性能几乎相同。然而，当使用,大约快 3 倍（根据：[phpbench](http://phpbench.com/)）。`if ... elseif``switch``===``if ... elseif`

`switch`通常，在进行 3 次以上的比较时，您应该选择最易读和使用的内容。如果性能是一个主要问题并且您不需要进行任何类型转换，那么使用`if ... elseif`with `===`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-27T09:55:19.887

这取决于使用情况。如果您有 fxp 状态（在线、离开、dnd、离线...），则最好使用开关。

```
switch(status)
{
case 'online':
...
} 
```

但是如果你想要这样的东西

```
if ((last_reply.ContainsKey(name)) && (last_reply[name] < little_ago)) 
```

或者

```
if (msg.ToString()[0] == '!') 
```

否则它会更好地使用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-25T09:29:52.327

我发现这篇文章：[https](https://gist.github.com/Jeff-Russ/2105d1a9e97a099ca1509de1392cd314) ://gist.github.com/Jeff-Russ/2105d1a9e97a099ca1509de1392cd314这表明 switch/case 比 if/elseif with === 更快。

它们还指示嵌套的 if 语句，这更有意义，也提供了更好的结果。

他们的时代：

嵌套 if/elseif === : 0.25623297691345 (嵌套 IF)

开关/外壳：0.33157801628113（开关外壳）

if/elseif with === : 0.45587396621704 (FLAT IF)

仅当使用 === 时：0.45587396621704（仅当）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-27T09:55:50.193

我相信编译器会在一天结束时将它们变成非常相似甚至相同的代码。

除非您正在做一些奇怪的事情，否则不要尝试对编译器进行优化。

此外，开发人员时间通常比运行时更重要（游戏除外），因此最好使其更具可读性和可维护性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-27T10:02:00.957

在我看来，“if/else”比 switch 更快但并不好，但我更喜欢这个：

```
echo ($x==1?"hi":($x==2?"bye":"")); 
```

如果你必须做 1,2 种情况，比如 if/else if/else

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-23T01:02:17.567

switch 比 if 快，因为 switch 使用跳转表，跳转表是在编译时由编译器制作并由 cpu/os 运行的。例如，如果您有 100 个案例，并且您将在第 100 个案例中获得您的价值，那么您认为它将运行所有 99 个条件......不......它会在跳转表的帮助下直接跳到第 100 个......所以我们如何证明这一点？...如果您在启动时编写默认语句然后运行程序，您将获得默认值，因为它是在启动时？不..由于跳转表，您将得到您想要的答案..它知道默认值在哪里以及您的分配值在哪里，它会直接将您带到您想要的答案..谈论哪个更好...每一项工作都可以如果可以在 switch 中完成，则可以在 switch 中完成。但是对于较小的条件 if 更好，对于更多条件 switch ..如果好的话，最多 3 个条件。

# c# - Any() 在这个 LINQ 查询中是什么意思？

> ID：10773048
> 
> 赞同：6
> 
> 时间：2012-05-27T09:51:26.937
> 
> 标签：c#, linq, any

`Any()`以下查询在做什么？

```
context.Customers
    .Include("InternetSales")
    .Where(c => c.InternetSales.Any())
    .Take(100); 
```

你将如何用简单的英语读出这个查询？例如，以下内容是否准确？

> *“通过相关的 100 次互联网销售获得客户。”*

（我知道代码中没有“get”，但你明白我的意思。）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-27T09:59:59.927

运算符检查某个可`Any`枚举/集合是否包含至少一项，即它是否为非空。

所以我猜你的查询可以写成：

> “前 100 位至少进行过一次网络销售的客户”

或者，更接近金属：

> “前 100 个`Customer`具有非空集合的对象`InternetSales`”

`.Any()` is similar to `.Count() > 0`, but it will consume at most one item in the collection, while `Count` consumes the complete collection, so `Any` is generally more efficient and works for infinite sequences, too. Provided you're not interested in the exact number of items, `Any` also expresses the intent of checking for non-emptiness more clearly.

# objective-c - UIWebView 在加载时打开 safari

> ID：10773052
> 
> 赞同：0
> 
> 时间：2012-05-27T09:52:09.747
> 
> 标签：objective-c, url, uiwebview, safari, hyperlink

我的应用程序中有一个 UIWebView。如果我告诉它打开 url @"http://twitter.com/"，它会在同一个 webView 中打开。但是，如果我要求它打开一个类似的网址（类似于我需要它打开的网址）：@“feed://www.OcataCore.com/rss/news.xml”，它会在看到包含加载的 UIWebview。有没有办法可以强制在我的 webview 中打开该 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:59:20.043

UIWebView 不提供与 Safari 相同的功能范围。除了 html，UIWebView 能够读取[本问答](https://developer.apple.com/library/ios/#qa/qa1630/_index.html#//apple_ref/doc/uid/DTS40008749)中列出的格式。无论是从提要还是本地文件中获取，它似乎都无法显示 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T03:23:34.623

同意，应该不能打开 XML 文件。

如果您只是想知道如何打开 Safari，希望这会有所帮助。使用 UIWebView 的这个委托方法来打开链接。

webView:shouldStartLoadWithRequest:navigationType

那应该工作。

# c# - 使用 CastleWindsor 解决依赖关系

> ID：10773054
> 
> 赞同：3
> 
> 时间：2012-05-27T09:52:21.323
> 
> 标签：c#, .net, asp.net-mvc, dependency-injection, castle-windsor

我是温莎城堡的新手。在解决依赖关系时，它在 .NET MVC 应用程序中运行良好。目前我正在通过使用构造函数注入（Eg1）或属性注入（2）来解决控制器中的依赖关系。问题是当我尝试使用属性注入解决另一个类（不是控制器类）中的依赖项时，这不会自动解决（例如 3）

例如 1 - 解决好！

```
public class HomeController : Controller
{
    private IUserRepo _userRepo;

    public HomeController(IUserRepo userRepo)
    {
       _userRepo = userRepo;
    }

    public ActionResult Show()
    {
        return View(userRepo.GetAllUsers());
    }

} 
```

例如 2 - 解决好！

```
public class HomeController : Controller
{
    public IUserRepo _userRepo {get;set;}

    public HomeController()
    {
    }

    public ActionResult Show()
    {
       return View(_userRepo.GetAllUsers());
    }
} 
```

例如 3 - 没有解决！

```
public class ValidationRepository
{
   public IUserRepo _userRepo {get;set;}

   public bool ValidateUser()
   {
        //Here _userRepo is never resolved.
        // NB: I want property injection instead of constructor injection, is there any way?
   }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T13:30:25.057

您没有显示足够的代码来明确说明为什么您的依赖关系没有得到解决。您没有展示如何实例化类，这对于理解依赖项如何/是否得到解决非常重要。

也就是说，我可以在这里做出有根据的猜测：

您的控制器正在使用控制器工厂，该工厂通过容器（Windsor）解析每个控制器。您的 ValidationRepository 正在以其他不受容器管理的方式创建（例如`new ValidationRepository()`）。为了使依赖解析起作用，ValidationRepository 需要与您的控制器属于同一依赖链 - 换句话说，它必须是其中一个控制器的依赖（或依赖的依赖，因此是依赖链）。

如果您确实手动（使用`new`）实例化 ValidationRepository，则控制器不知道该类，因此无法解决其依赖关系。尝试使 ValidationRepository 成为您的一个控制器的构造函数依赖项，看看是否可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T13:54:42.787

您需要确保 IUserRepo 和 ValidationRepository 的实例在您的 Windsor 容器中注册，然后容器中的其他项目（例如您的控制器）可以依赖它们，并且它们可以相互依赖。例如，类似：

```
container.Register(
            Component.For<IUserRepo>()
            .LifeStyle.Transient.
            .ImplementedBy<YourRealUserRepo>());

container.Register(
            Component.For<ValidationRepository>()
                .LifestyleTransient()); 
```

鉴于您所写的内容，看起来您已经完成了第一步，因为您的控制器正在愉快地获取 IUserRepo 的实例化。

一旦 ValidationRepository 也在那里，您可以使用属性注入或构造函数注入，这一切都会正常工作。

但是请注意，这只有在您从 Castle Windsor 容器中获取 ValidationRepository 实例时才有效。执行“new ValidationRepository()”将在容器外实例化它，Castle Windsor 将不知道注入依赖项。理想情况下，ValidationRepository 将是容器中另一个对象的依赖项，作为依赖对象的属性或构造函数参数。然后 Castle Windsor 将根据需要为您创建一个实例。

您可以这样做以获取具有完全解决依赖关系的实例：

```
var validationRepository = Container.Resolve<ValidationRepository>(); 
```

其中“Container”是对 Castle Windsor Container 的引用，您可能在最初设置 Container 时已将其分配给某种 IoC 实用程序类中的静态属性。

但是，这将是[服务定位器反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)的一个示例，应该避免。相反，最好让控制器工厂将控制器实例作为 MVC 管道的一部分来处理，然后将所有其他必要的依赖项链接起来，作为属性或构造函数参数。例如，控制器具有 ValidationRepository 依赖项，然后 ValidationRepository 具有 IUserRepo 依赖项等。

# unity3d - 用鼠标投掷物体

> ID：10773055
> 
> 赞同：1
> 
> 时间：2012-05-27T09:52:27.863
> 
> 标签：unity3d

我正在使用 Unity3D 创建一个基于购物的游戏。在我的游戏中，我让我的物品沿着传送带移动，然后他们必须用鼠标将其拾起并扔进购物车。到目前为止，我可以让鼠标拾取物品，但我将如何让它们将其扔向特定的方向。我还需要做到这一点，以使鼠标无法将对象拖动到游戏所在房间的边界之外。

我到目前为止的代码是：

```
#pragma strict

var screenPoint:Vector3;
var offset:Vector3;

private var oldMouse:Vector3;
private var mouseSpeed:Vector3;

function Start(){
    oldMouse = Vector3.zero;
}

function Update(){
 mouseSpeed = oldMouse - Input.mousePosition;
 oldMouse = Input.mousePosition;
}

function OnMouseDown()
{
    screenPoint = Camera.main.WorldToScreenPoint(gameObject.transform.position);
    offset = gameObject.transform.position - Camera.main.ScreenToWorldPoint(new Vector3(Input.mousePosition.x, Input.mousePosition.y, screenPoint.z));
}

function OnMouseDrag()
{
    var curScreenPoint:Vector3 = new Vector3(Input.mousePosition.x, Input.mousePosition.y, screenPoint.z);
    var curPosition:Vector3 = Camera.main.ScreenToWorldPoint(curScreenPoint) + offset;
    transform.position = curPosition;
}

function OnMouseUp(){
rigidbody.AddForce(mouseSpeed*Time.deltaTime, ForceMode.Force);
} 
```

詹姆士

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-22T03:24:22.087

我在你捕捉鼠标位置和速度计算的地方四处走动，让事情正常进行。我还添加了一个速度变量并将其乘以 -1 以使事情朝着正确的方向发展。

```
`#pragma strict

var screenPoint:Vector3;
var offset:Vector3;

private var oldMouse:Vector3;
private var mouseSpeed:Vector3;
var speed = new int();

function Start(){
//oldMouse = Vector3.zero;
}

function Update(){
 //mouseSpeed = oldMouse - Input.mousePosition;
 //oldMouse = Input.mousePosition;
}

function OnMouseDown()
{
    oldMouse = Input.mousePosition;
    screenPoint = Camera.main.WorldToScreenPoint(gameObject.transform.position);
    offset = gameObject.transform.position - Camera.main.ScreenToWorldPoint(new Vector3(Input.mousePosition.x, Input.mousePosition.y, screenPoint.z));
}

function OnMouseDrag()
{
    var curScreenPoint:Vector3 = new Vector3(Input.mousePosition.x, Input.mousePosition.y, screenPoint.z);
    var curPosition:Vector3 = Camera.main.ScreenToWorldPoint(curScreenPoint) + offset;
    transform.position = curPosition;
}

function OnMouseUp(){
mouseSpeed = oldMouse - Input.mousePosition;
rigidbody.AddForce(mouseSpeed * speed * -1, ForceMode.Force);
//rigidbody.AddForce(mouseSpeed*Time.deltaTime, ForceMode.Force);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:38:19.807

尝试使用[刚体.MovePosition()](http://docs.unity3d.com/Documentation/ScriptReference/Rigidbody.MovePosition.html)设置位置。这应该检测与世界的碰撞。

我还没有测试你的代码，但我认为在 OnMouseUp() 中设置刚体的速度可能更合适，而不是添加力。

请记住，这两个都应该在 FixedUpdate() 中执行，因此也许您应该在事件方法中设置标志。

# cakephp - 在 CakePHP 的 beforeFilter 中渲染后停止执行

> ID：10773057
> 
> 赞同：6
> 
> 时间：2012-05-27T09:52:49.517
> 
> 标签：cakephp, cakephp-2.0, before-filter

在我的 CakePHP 2 应用程序中，我遇到了 beforeFilter 的问题。在[这个线程](https://stackoverflow.com/questions/1923863/continue-execution-after-render)中它运行良好。由于 CakePHP 的旧版本。

在我的代码中，如果用户未获得授权，我想向他展示“anotherview.ctp”。我不想将访问者重定向到另一个页面。（因为 AdSense 问题）

当我在 beforeFilter 中使用“this->render”时，我的“index”操作中的代码也会运行。我想在“beforeFilter”的最后一行之后停止执行。当我将“exit()”添加到 beforeFilter 时，它破坏了我的代码。

如何在 beforeFilter 中停止执行而不破坏代码？

```
class MyController extends AppController {
    function beforeFilter() {
        if ( $authorization == false )  {
                $this->render('anotherview');
                //exit();
            }
        }
    }

    function index() {
        // show authorized staff
    }           
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-28T04:10:15.850

尝试：

```
$this->response->send();
$this->_stop(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-09T16:39:05.643

我在尝试做同样的事情时偶然发现了这个线程。接受的答案有效，但省略了一个重要细节。我正在尝试渲染布局（不是视图），我必须添加一行以防止原始请求的视图抛出错误。

内部`AppController::beforeFilter()`：

```
$this->render(FALSE, 'maintenance'); //I needed to add this
$this->response->send();
$this->_stop(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T15:20:48.470

或者 - 重定向到另一个视图：

```
if ( $authorization == false )  {
    $this->redirect('/users/not_authorized');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-03T14:58:12.513

对于 CakePHP 3.5，这对我有用：

```
$event->setResult($this->render('anotherview')); 
```

这也将使您能够使用调试器。`exit;`当我使用该语句时，CakePHP 调试器停止工作。

# javascript - 从弹出窗口重定向 Java 脚本

> ID：10773065
> 
> 赞同：0
> 
> 时间：2012-05-27T09:53:48.903
> 
> 标签：javascript, redirect, popup

当任何用户点击一个链接时，我编写代码去like.php。我想在like.php 中弹出一个javascript 窗口以显示一条消息，5 分钟后，如果用户不单击“确定”按钮，我想重定向到另一个页面。如果用户单击“确定”按钮，我需要尽快重定向。我正在使用以下代码。请帮我。

```
<html>
<head>
    <script type="text/javascript">
        if(alert("Like Me")){
            window.location = "http://www.vsofteducation.com/development/fbupload.php";
        }

    </script>
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:01:44.660

你不能用 Javascript Alert 来做到这一点......

您可以使用 JQuery 对话框来执行此操作

**更新**

函数渲染弹出（）{

```
var url = 'www.google.com';

var $dialog = $('<div title="popup"></div>')
    .html('Press OK')
    .dialog({
        modal:true,
        autoOpen: false,
        buttons:
        {
           "Ok":
            function()
            {
                  window.top.location = 'www.google.com';
            }
        }
    });
    $dialog.dialog('open');
});

   setTimeout(function() {
    window.top.location = 'www.google.com';
   }, 5000);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:57:43.983

在弹出的 HTML 中：

```
<script>
setTimeout(function() {
    window.top.location = 'http://google.fi';
}, 5000);
</script> 
```

这使弹出窗口等待 5 秒钟，然后告诉父窗口转到 Google。

那是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T09:55:54.787

弹出窗口很糟糕，但无论如何。从您的弹出窗口中，您可以访问[开启者](https://developer.mozilla.org/en/DOM/window.opener)页面。

```
window.opener.location = '...'; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-27T09:55:50.183

这是非常基本的 Javascript。

```
alert("Like me");
setTimeout(function() {
    location.href = "...";
}, 300000); 
```

注意：如果你不知道类似的函数`setTimeout`，也许你应该在提问之前多学习一点 Javascript 并阅读一些教程。我们不是老师，我们只是提供我们的知识来解决开发人员的问题。

**编辑**：`alert`不返回值，因此`if`条件始终为假。固定的。

# css - 具有 a 类但不具有 b 类的 CSS 选择器

> ID：10773086
> 
> 赞同：22
> 
> 时间：2012-05-27T09:57:31.697
> 
> 标签：css, css-selectors

我已经尝试了各种各样的事情，但我认为我变得太复杂了，甚至设法让 chrome 挂在我的选择器上。我确信有一个简单的方法可以做到这一点

`classa`仅在没有时选择`classb`并忽略它的最后一个实例

```
<div class="container">
    <div class="classa classb"></div> <!-- Dont Select -->
    <div class="classa"></div>  <!-- Select -->
    <div class="classa"></div>  <!-- Dont select last instance -->
</div> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-27T10:02:41.300

我相信您可以使用`:not()`选定的 CSS3 来执行此操作（[此处](http://jsfiddle.net/leereichardt/yuAjn/)为示例）

`div.classa:not(.classb):not(:last-child) {}`

但是，如您所知，没有多少浏览器支持这一点，所以 Javascript 可能是一种更简单的方法......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-27T10:00:46.873

```
.classa:not(.classb):not(:last-child) {
    /* rules */
} 
```

在 Firefox 12、Chrome 19、Safari 5 和 Opera 10 上测试。不幸的是，它不适用于（...猜猜谁？）IE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T10:01:58.430

尝试：

```
.classa:not(.classb):first-child {
    background: red;
} 
```

不过，这在 IE 7 或 8 中不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T10:00:32.863

使用[CSS3 伪类](http://www.w3.org/TR/selectors/#pseudo-classes)：

```
.classa:not(:last-child):not(.classb) {
  // some rules...
} 
```

# objective-c - 在不调用 alloc、new、copy 的情况下泄漏对象？

> ID：10773090
> 
> 赞同：0
> 
> 时间：2012-05-27T09:58:23.100
> 
> 标签：objective-c, ipad, memory-leaks, cocos2d-iphone

我几乎是 Objective-c 的新手，当我开始编程时，我并没有真正掌握如何正确释放对象。所以，我的项目是对 Objective-c 世界的介绍，我完全省略了它。然而，现在，我认为这个项目的演变在于，只留下它太可惜了。所以，除了所有的`alloc`s、`copy`s 和`new`s，我在理解为什么我的项目仍然泄漏这么多内存方面存在严重问题。

我使用了 Instruments 中的泄漏工具（看截图），它向我展示了泄漏的整个对象数组。我现在的问题是：这是值得担心的事情，还是这些物体在某个时候被释放？如果不是，我如何找到泄漏的原因？我知道如果我按 cmd + e 它会显示扩展的详细信息窗口，但是我应该查看哪些方法？我假设这是我自己的方法我必须打开，但大多数时候它说，即层的分配和初始化会导致问题。

也就是说，我想知道如何有效地检测泄漏。当我查看`leaks`工具栏时，在我的游戏层 ( `HelloWorldLayer`) 初始化时会出现一条红色的红线。然而，这只是在它的初始化......所以，我需要担心这个吗？

这是屏幕截图：文件链接（为了放大）-> [http://i.stack.imgur.com/QXgc3.jpg](https://i.stack.imgur.com/QXgc3.jpg)

![在此处输入图像描述](../Images/52f7f57df1a31c35e90098393e122294.png)

编辑：
我解决了几个泄漏，但现在我有另一个我不太明白的泄漏：

```
for (int i = 1; i<=18; i++) {
            NSMutableDictionary *statsCopy = (NSMutableDictionary *)CFPropertyListCreateDeepCopy(kCFAllocatorDefault, (CFDictionaryRef)stats, kCFPropertyListMutableContainers);
            NSNumber *setDone = [num copy];
            [levels setObject:statsCopy forKey:[NSString stringWithFormat:@"level%d", i]];
            [levels setObject:setDone forKey:@"setDone"];
            [statsCopy release];
            [setDone release];
        } 
```

他碰巧检测到深层副本的泄漏，即使我释放它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:36:42.473

屏幕截图显示有一个分配的字典`-[Categories init]`永远不会被释放。实际上，有很多（2765）这样的字典。

该方法似乎正在调用`-[NSDictionary newWithContentsOf:immutable:]`. 由于 Cocoa 内部的优化，此处的堆栈跟踪可能有些误导。这不是公共方法。它可能是由另`NSDictionary`一种带有尾调用的方法调用的，该方法已优化为跳转而不是子例程调用。

Assuming there's debug information available, Instruments should show you the precise line within `-[Categories init]` if you double-click that line in the stack trace.

知道它被分配到哪里并不是全部。该类`Categories`可以正确管理对象的所有权。但是，其他一些类可能会访问它，并过度保留或释放它。因此，您可能必须跟踪其中一个对象的保留和释放的整个历史，以查看哪个类获得了所有权并忽略了释放它。请注意，必须为泄露的字典之一执行此操作，而不是字典内部使用的 malloc 块之一。在表格中向下两行查找一些有前途的候选人。切换打开该行以查看特定对象。双击一个或单击其地址旁边的带圆圈的箭头按钮（我忘记了）以查看保留和释放的历史记录。

# drupal-7 - 如何在 Drupal 7 上呈现自定义字段分类？

> ID：10773092
> 
> 赞同：2
> 
> 时间：2012-05-27T09:58:59.457
> 
> 标签：drupal-7, drupal-taxonomy

我在我的分类词汇表中创建了一些自定义字段，称为类别：- fotogallery（多个文件）- incipit（纯文本）- ...

但我不知道如何渲染它们。

我试过[field_view_field](http://api.drupal.org/api/drupal/modules!field!field.module/function/field_view_field/7)但它只是指实体。我也尝试过 render 和 drupal_render 。

实际上我直接访问 $term->field_incipt['und'][0]['safe_value'] 属性，我知道不推荐这样做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T17:14:04.497

Drupal 7 中的分类术语*是*实体，因此您可以使用它`field_view_field()`来安全地获取渲染数组：

```
$view = field_view_field('taxonomy_term', $term, 'field_incipt'); 
print render($view); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:00:30.497

field_view_field 函数对我有用。请注意，您需要发送术语实体。您可以使用 entity_load 获得一个，即 $term_entity = entity_load('taxonomy_term', array($tid));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T09:43:21.953

要正确获取 $term 对象，您应该使用[taxonomy_term_load()](https://api.drupal.org/api/drupal/modules!taxonomy!taxonomy.module/function/taxonomy_term_load/7)函数并将术语 ID 传递给它。

# android - Facebook SDK：从现有源创建项目为空

> ID：10773097
> 
> 赞同：1
> 
> 时间：2012-05-27T10:00:22.400
> 
> 标签：android, eclipse, ubuntu

我尝试使用本[教程](http://blog.doityourselfandroid.com/2011/02/28/30-minute-guide-integrating-facebook-android-application/)，当我点击完成时，我注意到 src 是空的，截图如下： 我文件夹中的 facebook 项目已完成，所以我的问题是我需要手动将所有文件复制到文件夹中吗？为什么这是空的？

![在此处输入图像描述](../Images/eb38733046a20b44d8850311f00276d9.png)

编辑：我正在使用 Eclipse Indigo 和 Android ADT 版本 18。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:23:06.113

使用空文件夹创建项目后，请执行以下操作：

1）右键单击项目

2) 点击导入

3) 常规 > 文件系统

4）选择下载包内的“facebook”文件夹

5) 勾选 facebook 选项

6) 完成

这将导入作为 facebook 项目一部分的所有文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T13:40:35.773

除了[本教程](http://ericosgood.com/prog/facebook-android-sdk-tutorial/#comments)，因为这个方法有点混乱，还有一些其他的方法，通过右键单击你的项目 -> 构建路径 -> 链接源 -> 浏览到“facebook”目录，就是这样，希望它能给你所有一些想法。

# html - 最小化 html 和 css 时网页崩溃

> ID：10773098
> 
> 赞同：0
> 
> 时间：2012-05-27T10:00:31.773
> 
> 标签：html, css, collapse

当我开始最小化窗口时，我的 body div 在左侧栏导航下折叠。

有人可以告诉我我做错了什么或我还需要做什么。

非常感谢，谢谢。

CSS 片段：

```
#navigation {

   float: left;
   min-width: 20%;
   margin: 0;
   margin-top: 5px;
   font-weight: normal;

}

#centerDoc {

   float: left;
   width: 80%;
   padding: 0 0 20px 0; /*top right bottom left*/
   margin-top: 0px;

}

#header{

   position: relative;  
   width:100%;
   height:96px;
   margin-left: 5px;

}

#footer {
        font-family: Trebuchet MS;
        font-size: x-small;
        padding:2px;
        margin:0px;
        background-color:#CBE3F6;
        color:#fff;
        border-bottom: 1px solid #9EC4E2;
        border-top: 1px solid #9EC4E2;
        text-align:center;

        width: 100%;
        }

 #wrapper{

   position: relative;
   margin-left: 5px;

}

#container {
   width: 100%;
   height:100%;
} 
```

页面模板：

```
<?php require_once 'includes/header.php';?>

<div id="wrapper">

    <?php require_once 'includes/nav.php'; ?>

    <div id="centerDoc">

</div>  <!--centerDoc !-->
 </div> <!-- wrapper !-->

   </div> <!--container !-->

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:09:26.663

从 中删除`float`属性`#centerDoc`，并添加`margin-left: 20%.`到它

然后更改`min-width: 20%`为`#navigation`或`width: 20%`。`max-width: 20%`没有这个，里面的文本`centerDoc`在`#navigation`.

您可能希望保持测量同步。你有`width: 80%`in`#centerDoc`和`min-width`in `#navigation`。如果您`width`在两种情况下都使用 plain 并将`min/max-width`属性分配给页面的 （因此和`body`的宽度相对于它们的共同父级），则可能更容易描绘布局。`#navigation``#centerDoc`

* * *

编辑：CSS：

```
#navigation {
  float: left;
  width:20%;
}
#centerDoc {
  width: 80%;
  margin-left:20%;
}
#header{
  width:100%;
  height:96px;
}
#container { 
  max-width: 1200px;
  min-width: 600px;
} 
```

删除了`#wrapper`. 以百分比形式查看`max-/min-width´ in the`#container `. The scrollbars appear into the browser when the page is less then 600 pixels wide. The page also doesn't become wider then 1200 px. This allows you to define the`width `s of the`#navigation `and`#centerDoc`。

使用以下 HTML，一切都应该正常工作。（虽然我不知道里面是什么`nav.php`。希望没有什么可以清除浮动的`#navigation`）

```
<div id="container">
  <?php //require_once 'includes/header.php';?>

<div id="navigation">
  <?php //require_once 'includes/nav.php'; ?>
  <p>Sample text. Sample text. Sample text. Sample text. Sample text.</p>
</div>  <!--navigation !-->

<div id="centerDoc">
  <p>Sample text. Sample text. Sample text. Sample text. Sample text. Sample text.</p>
</div>  <!--centerDoc !-->
</div> <!--container !--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T10:23:59.127

我会将#navigation 中的最小宽度更改为最大宽度。这样我们就可以确保左侧导航栏的宽度不超过页面宽度的 20%。

编辑：

```
#navigation {
   float: left;
   width: 20%;
   margin: 0;
   margin-top: 5px;
   font-weight: normal;
}

#centerDoc {
   float: right;
   width: 80%;
   padding: 0 0 20px 0; /*top right bottom left*/
   margin-top: 0px;
} 
```

# php - 从我的 Windows Phone 7 应用程序调用我的 PHP 网络服务

> ID：10773103
> 
> 赞同：0
> 
> 时间：2012-05-27T10:01:01.993
> 
> 标签：php, json, web-services, windows-phone-7

我正在尝试编写一个简单的 Web 服务并在我的 Windows 手机中使用它。

我写了一个php脚本如下：

```
$PromotionCount=$_GET['count'];
$promotions = PromotionsAPI::RetrievePRomotions($PromotionCount);
while($row=mysql_fetch_array($promotions))
{
$rows[] = array ('CompanyName' => $row[0] , 
                 'CompanyPromotion' => $row[1], 
                 'PromotionRating' => $row[2] , 
                 'PromotionPicPath' => $row[3],
                 'PromotionTitle'  => $row[4],
                 'PromotionlikesCount' => $row[5],
                 'PromotionCommentsCount' => $row[6]);
}

echo json_encode($rows); 
```

现在我将通过以下链接调用它。

```
http://localhost/php/promotionWork/API%20and%20Libraries/PromotionsAPI.php?count=3 
```

从我的 Windows 手机中，我想获取我正在回显的编码 json 数据。我不知道是否可以以这种方式进行查询，或者是否有必要使用 SOAP 等。

那么，你们能否通过告诉我正确且简单的方法来完成此任务，为我指明正确的方向，如果我是对的，那么我如何能够获取我在 WINDOWS PHONE 应用程序中回显的 json 数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:08:19.233

PHP 的代码看起来不错（至少我不会这样做）。

对于您的客户，您可能想要使用[JSON.NET](http://json.codeplex.com/)。

# javascript - 可拖动的移动受限

> ID：10773106
> 
> 赞同：2
> 
> 时间：2012-05-27T10:01:26.510
> 
> 标签：javascript, jquery, html, css, draggable

我想创建一个**大** `draggable`元素并将其放入限制其移动的较小容器中，因此其中 2 个`draggable`边必须接触容器/容器的边。

我还希望`draggable`对象`draggable`来自框架中的任何位置，而不仅仅是在单击对象本身时。

我看到**jQuery**提供了一个不错的`draggable`对象： [http ://docs.jquery.com/UI/Draggable](http://docs.jquery.com/UI/Draggable)

这是我制作的一个例子，说明什么是允许的，什么是不允许的：

![允许](../Images/f459359e6ee55833292552ca592ec8f3.png)

![未分配](../Images/be212590e533642099030195a8f0b992.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:05:27.137

您应该将包含设置为该对象，如下所示：

```
$(".selector")
             .draggable({ 
               containment: "parent"
             }); 
```

[这里](http://docs.jquery.com/UI/Draggable#option-containment)是多可

# grails - Grails 属性名称更改

> ID：10773108
> 
> 赞同：1
> 
> 时间：2012-05-27T10:01:40.970
> 
> 标签：grails, netbeans, grails-orm

我有一个现有的 grails 项目。我想更改属性的域类 - 即有's'没有's'。但 Netbeans 并未指出受影响的部分。如何安全地进行更改？

# java - Maven：接口项目的编程

> ID：10773119
> 
> 赞同：0
> 
> 时间：2012-05-27T10:03:18.930
> 
> 标签：java, maven, projects-and-solutions

我想知道是否可以在 Maven 中实现如下的接口项目。

Project-A 和 Project-B 具有相同的类，在 Project-C 中实现接口。Project-Z 仅使用 Project-I(POM)，其中包含 Project A、B、C 作为模块。

我想使用配置文件机制，以便 Project-Z 使用 Project-A 或 Project-B 的实现。

如果您认为可能，请给我一个简单的例子。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:13:26.523

您可以使用 java [SPI](http://java.sun.com/developer/technicalArticles/javase/extensible/index.html)（服务提供者接口），两个实现 jar 通过它在清单中声明相同的服务。使用应用程序可以进行查找、迭代并选择一个。*（我现场没有找到一个简单的例子。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:24:46.647

如果你真的想用一个 Maven 配置文件来做这件事，最简单的方法是你可以在配置文件中设置一个带有类名的属性。然后在运行时实例化这个属性中的类。

```
<profile>
    <id>a</id> 
    <properties> 
         <myproject.componentX.implementation.class>com.foo.bar.BazA</myproject.componentX.implementation.class> 
```

看起来可能很奇怪，为什么你想在构建时在根 pom 中这样做......也许你打算不经常改变它。有更好的方法，取决于你打算做什么。

你能解释一下在什么情况下你想改变它，为什么以及多久改变一次？

# html - 为 HTML 输入设置默认语言

> ID：10773120
> 
> 赞同：10
> 
> 时间：2012-05-27T10:03:26.040
> 
> 标签：html, layout, input, keyboard

如何设置输入框的默认键盘布局，例如当页面加载时，我们可以使用除英语以外的其他键盘语言输入输入文本？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-27T10:05:42.067

我会考虑`lang`属性。但这是元信息，我真的不确定浏览器会用它做什么。我自己从来没有试过。

```
<input lang="is" ...> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T13:23:18.333

我认为可以`keyCode`用javascript捕获一个被按下的按钮，然后将符号替换为数组中的适当符号。
此代码有助于理解如何捕获 keyCode（它不依赖于键盘语言）

```
<form>
Char: <input type="text" id="char" size="15" /> Keycode: <input type="text" id="keycode" size="15" />
</form>

<script type="text/javascript">

var charfield=document.getElementById("char")
charfield.onkeydown=function(e){
var e=window.event || e
document.getElementById("keycode").value=e.keyCode
}

</script> 
```

# c# - FormsAuthenticationTicket 过期

> ID：10773121
> 
> 赞同：5
> 
> 时间：2012-05-27T10:03:44.190
> 
> 标签：c#, asp.net, cookies, forms-authentication

我一直在网上搜索，发现了许多奇怪的答案，我几乎尝试了所有答案。我的问题是这个。我的登录页面包含：

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, userName, DateTime.Now, DateTime.Now.AddMinutes(min), persistCookie, userid.ToString());
string encTicket = FormsAuthentication.Encrypt(ticket);
HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);
cookie.Expires = ticket.Expiration;
Response.Cookies.Add(cookie);

FormsAuthentication.RedirectFromLoginPage(userName, persistCookie); 
```

现在最小值是基于每个用户的，并且可以单独设置，persistCookie 也是如此。

根据我的理解，这段代码应该会导致覆盖 web.config 中的默认值的可能性。应该是30分钟。

```
<authentication mode="Forms">
  <forms loginUrl="~/Default/default.aspx" defaultUrl="~/User/UserMain.aspx"/>
</authentication> 
```

min 设置为 120，persistCookie 设置得太真。当我登录时，我在 30 分钟时超时。（不是会话，所以在某个地方设置了到期日期，因为如果没有设置 cookie 应该是基于会话的，我也没有得到 120 分钟，这是一种交易）

我的问题是，为了简化它，我如何让值“min”成为 cookie 的到期日期？

这可能也是一件简单的事情，但我目前完全陷入困境，所以任何帮助都会得到帮助。

编辑：我将登录逻辑更改为：

```
FormsAuthenticationTicket fat = new FormsAuthenticationTicket(1, userName, DateTime.Now, DateTime.Now.AddMinutes(min), persistCookie, userid.ToString());
string encTicket = FormsAuthentication.Encrypt(fat);
Response.Cookies.Add(new HttpCookie(FormsAuthentication.FormsCookieName, encTicket) { Expires = fat.Expiration });
Response.Redirect(FormsAuthentication.GetRedirectUrl(userName, false)); 
```

现在它可以工作了。但我似乎无法弄清楚为什么这会起作用，而不是前一个。工单创建是一样的，唯一的区别是我在创建 HttpCookie 时添加了 HttpCookie 的 Expires 属性，而不是在创建对象之后。

如果有人有一个很好的解释，我会全力以赴！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T11:08:46.530

您的代码的问题在于您正在调用`RedirectFromLoginPage`，这将创建表单身份验证 cookie，覆盖您刚刚创建的 cookie：

```
HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket); 
cookie.Expires = ticket.Expiration; 
Response.Cookies.Add(cookie); 

FormsAuthentication.RedirectFromLoginPage(userName, persistCookie); <-- creates a new cookie 
```

创建的 cookie`RedirectFromLoginPage`当然会从配置中获取默认超时。

你的第二个版本是要走的路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T10:10:19.163

我认为您不了解 cookie 到期日期和票证到期日期之间的区别 - 即使票证存储在其中的 cookie 仍然有效，票证也可以被视为已过期。FormsAuthenticationTicket 构造函数的第 4 个参数负责票证到期日期。

因此，要回答您的问题，您需要手动设置 cookie 的到期日期或使其足够长以超过身份验证票的到期日期。

# objective-c - ObjectiveC项目组织

> ID：10773124
> 
> 赞同：1
> 
> 时间：2012-05-27T10:04:31.860
> 
> 标签：objective-c, cocoa, gnustep

我想知道对于 Objective-C 项目（一个有十多个类的项目......）更合适的结构是什么。

**代码源**

我将每个类声明和实现分别放在 .h 和 .m 文件中。此外，我在文件夹树中组织这些文件。我不想将所有源文件都放在一个文件夹中。这是此类项目的最佳方法吗？

**建造**

构建 Objective-C 应用程序的最佳方法是什么？我看到使用makefile是可能的，但似乎您需要指定所有涉及的源文件......是否有可能简单地为构建配置所有源文件？

**打包**

打包应用程序以将其作为库提供的方法是什么？

非常感谢您的帮助！蒂埃里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:19:58.477

**代码源**

将相关的 .h 和 .m 文件放在一个子目录中就可以了。如果您想要传统的 Unix 源代码布局，请将这些子文件夹放入名为 的目录`src`中，让您的 makefile 将库和中间对象文件构建到名为的文件夹`bld`中，并将您的 Makefile 与 LICENSE、README 和一个变更日志文件。

**建造**

使用 Makefile 语法，您可以让 Make 将所有源文件构建到一个库中。谷歌一个 Makefile 教程，但我可以告诉你，你可能想要的是类似的东西

```
OBJECTS  = $(patsubst %.o, %.m, $(wildcard Helpers/*.m))
OBJECTS += $(patsubst %.o, %.m, $(wildcard Network/*.m))
OBJECTS += $(patsubst %.o, %.m, $(wildcard External/*.m)) 
```

等等

**打包**

我真的不明白你问题的这一部分。你想怎么释放它？您可以分发源代码，并将其放入 tar(.gz 或 .bz2) 球中。或者上传到 GitHub。或者为某些平台构建源代码，并从构建中制作一个 DEB 或 RPM 包。一般很难说，因为每个平台都有其他（而且不是很具体）的约定。

# c++ - 选择功能 windows vs linux

> ID：10773129
> 
> 赞同：0
> 
> 时间：2012-05-27T10:05:24.963
> 
> 标签：c++, c, linux

我有以下代码，它在 windows env 下运行得很好，而在 linux 中使用相同的代码却没有（除了 libs 的少量更改）。select 函数不响应新连接。

相关代码如下：

```
struct SocketState
{
    int id;         // Socket handle 
    int recv;           // Receiving?
    int send;           // Sending?
    int sendSubType;    // Sending sub-type
    char buffer[128];
    int len;
    int authenticate;
    char userName[10];
};

struct SocketState sockets[MAX_SOCKETS]={0};

int socketsCount = 0;

int main() 
{

    int listenSocket = socket(PF_INET, SOCK_STREAM, 0);

    if (-1 == listenSocket)
    {
        return 0 ;
    }

    struct sockaddr_in serverService;

    serverService.sin_family = AF_INET; 

    serverService.sin_addr.s_addr = htonl(INADDR_ANY);

    serverService.sin_port = htons(TIME_PORT);

    if (-1 == bind(listenSocket, (struct sockaddr*)&serverService, sizeof(serverService))) 
    {
    perror("Couldn't bind socket");
        return -1;
    }

    if (-1 == listen(listenSocket, 10))
    {

        perror("Couldn't listen to port");      
    }

    addSocket(listenSocket, LISTEN);

        while (true)
    {

        fd_set waitRecv;
        FD_ZERO(&waitRecv);
        for (int i = 0; i < MAX_SOCKETS; i++)
        {
            if ((sockets[i].recv == LISTEN) || (sockets[i].recv == RECEIVE))
                FD_SET(sockets[i].id, &waitRecv);
        }

        fd_set waitSend;
        FD_ZERO(&waitSend);
        for (int i = 0; i < MAX_SOCKETS; i++)
        {
            if (sockets[i].send == SEND)
                FD_SET(sockets[i].id, &waitSend);
        }

        int nfd;
        nfd = select(0, &waitRecv, &waitSend, NULL, NULL);
        if (nfd == -1)
        {

            return 0 ;
        }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T10:34:36.420

您将`0`作为第一个参数传递给`select`. 那是错的。可能在 Windows 中不使用此参数，但在 linux 中必须正确设置。

它必须设置为较高的数字`fd`加 1。

# java - 如何取消聚焦 JTextField

> ID：10773132
> 
> 赞同：12
> 
> 时间：2012-05-27T10:05:40.973
> 
> 标签：java, swing, netbeans, focus, jtextfield

当我的应用程序使用netbeans加载时，第一个JTextField会自动聚焦，并且在这个JTextField中，我写了“输入您的用户名”，当用户点击这个字段时它会消失，但是当应用程序加载时，这个字段是焦点，意味着我看不到“输入您的用户名”，如何在启动时取消焦点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-27T10:57:11.870

登录最好在模态对话框中完成，但这会带来问题，因为`requestFocusInWindow()`必须在组件可见*后*调用该方法，但这会被对话框是模态的事实所阻止！

此示例使用 Rob Camick `RequestFocusListener`（如[Dialog Focus](http://tips4java.wordpress.com/2010/03/14/dialog-focus/)中所述）在对话框可见后管理焦点。

![使用重点密码字段登录](../Images/f1d7eafde0ed8c95544fb732aaf8690e.png)

**注意：**这就是它在用户执行任何操作之前的显示方式。默认情况下，密码字段是焦点。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;

public class LoginRequired {

    LoginRequired() {
        JFrame f = new JFrame("Login Required");
        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        f.setResizable(false);
        f.setSize(400, 300); // not recommended, but used here for convenience
        f.setLocationByPlatform(true);
        f.setVisible(true);

        showLogin(f);
    }

    private void showLogin(JFrame frame) {
        JPanel p = new JPanel(new BorderLayout(5,5));

        JPanel labels = new JPanel(new GridLayout(0,1,2,2));
        labels.add(new JLabel("User Name", SwingConstants.TRAILING));
        labels.add(new JLabel("Password", SwingConstants.TRAILING));
        p.add(labels, BorderLayout.LINE_START);

        JPanel controls = new JPanel(new GridLayout(0,1,2,2));
        JTextField username = new JTextField("Joe Blogs");
        controls.add(username);
        JPasswordField password = new JPasswordField();
        password.addAncestorListener(new RequestFocusListener(false));
        controls.add(password);
        p.add(controls, BorderLayout.CENTER);

        JOptionPane.showMessageDialog(
            frame, p, "Log In", JOptionPane.QUESTION_MESSAGE);
        System.out.println("User Name: " + username.getText());
        System.out.println("Password: " + new String(password.getPassword()));
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            new LoginRequired();
        });
    }
}

/**
 *  Convenience class to request focus on a component.
 *
 *  When the component is added to a realized Window then component will
 *  request focus immediately, since the ancestorAdded event is fired
 *  immediately.
 *
 *  When the component is added to a non realized Window, then the focus
 *  request will be made once the window is realized, since the
 *  ancestorAdded event will not be fired until then.
 *
 *  Using the default constructor will cause the listener to be removed
 *  from the component once the AncestorEvent is generated. A second constructor
 *  allows you to specify a boolean value of false to prevent the
 *  AncestorListener from being removed when the event is generated. This will
 *  allow you to reuse the listener each time the event is generated.
 */
class RequestFocusListener implements AncestorListener
{
    private boolean removeListener;

    /*
     *  Convenience constructor. The listener is only used once and then it is
     *  removed from the component.
     */
    public RequestFocusListener()
    {
        this(true);
    }

    /*
     *  Constructor that controls whether this listen can be used once or
     *  multiple times.
     *
     *  @param removeListener when true this listener is only invoked once
     *                        otherwise it can be invoked multiple times.
     */
    public RequestFocusListener(boolean removeListener)
    {
        this.removeListener = removeListener;
    }

    @Override
    public void ancestorAdded(AncestorEvent e)
    {
        JComponent component = e.getComponent();
        component.requestFocusInWindow();

        if (removeListener)
            component.removeAncestorListener( this );
    }

    @Override
    public void ancestorMoved(AncestorEvent e) {}

    @Override
    public void ancestorRemoved(AncestorEvent e) {}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-03T13:38:53.283

```
textField.setFocusable(false);
textField.setFocusable(true); 
```

当且仅当 textField 具有焦点时，TAB 顺序中的下一个组件将自动获得焦点。效果与 TAB 按下相同。

（未在只有一个可聚焦组件的 GUI 中进行测试 :)）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-27T10:09:22.793

用于[`requestFocusInWindow()`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JComponent.html#requestFocusInWindow%28%29)将焦点放在其他一些组件上，而不是你的`JTextfield`第一个。

但我建议*不要更改*本机焦点系统，而是`setText(String s)`在调用后`JTextField`（假设在 netbeans 中）。`initComponents()``constructor`

进一步的可选阅读：[如何使用焦点子系统](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-01T20:13:21.857

我认为将键盘焦点赋予用户名字段是正确的行为，假设这是用户首先需要做的。为什么不清除焦点，而不是仅在用户键入内容后才清除？：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.text.Document;

public class PlaceholderTextField extends JTextField {

    public static void main(final String[] args) {
        final PlaceholderTextField tf = new PlaceholderTextField("");
        tf.setColumns(20);
        tf.setPlaceholder("All your base are belong to us!");
        final Font f = tf.getFont();
        tf.setFont(new Font(f.getName(), f.getStyle(), 30));
        JOptionPane.showMessageDialog(null, tf);
    }

    private String placeholder;

    public PlaceholderTextField() {
    }

    public PlaceholderTextField(
        final Document pDoc,
        final String pText,
        final int pColumns)
    {
        super(pDoc, pText, pColumns);
    }

    public PlaceholderTextField(final int pColumns) {
        super(pColumns);
    }

    public PlaceholderTextField(final String pText) {
        super(pText);
    }

    public PlaceholderTextField(final String pText, final int pColumns) {
        super(pText, pColumns);
    }

    public String getPlaceholder() {
        return placeholder;
    }

    @Override
    protected void paintComponent(final Graphics pG) {
        super.paintComponent(pG);

        if (placeholder.length() == 0 || getText().length() > 0) {
            return;
        }

        final Graphics2D g = (Graphics2D) pG;
        g.setRenderingHint(
            RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
        g.setColor(getDisabledTextColor());
        g.drawString(placeholder, getInsets().left, pG.getFontMetrics()
            .getMaxAscent() + getInsets().top);
    }

    public void setPlaceholder(final String s) {
        placeholder = s;
    }

} 
```

如果你真的只是想消除焦点，一些选项：

*   `component.setFocusable(false);`
*   `KeyboardFocusManager.getCurrentKeyboardFocusManager().focusNextComponent();`
*   `KeyboardFocusManager.getCurrentKeyboardFocusManager().clearGlobalFocusOwner();`

# php - 分层 php 函数执行错误！这是什么？

> ID：10773135
> 
> 赞同：2
> 
> 时间：2012-05-27T10:05:52.660
> 
> 标签：php, arrays, function, hierarchical

为什么我在以下两种情况下通过 print_r 得到不同的输出！！？这是php中的错误吗？php无法执行内部函数调用的复杂分层函数吗？

```
CASE 1 :
$aa='2,3,4,5,5,5,';
$aa=array_unique(explode(',',$aa));
array_pop($aa);
print_r($aa);

CASE 2 :
$aa='2,3,4,5,5,5,';
array_pop(array_unique(explode(',',$aa)));
print_r($aa) 
```

在第一种情况下，输出是一个分解数组：

```
Array ( [0] => 2 [1] => 3 [2] => 4 [3] => 5 ) 
```

在第二种情况下，输出是 string ：

```
2,3,4,5,5,5, 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T10:15:28.573

这是因为`array_pop`改变了它的输入，并且你传递给它一个临时变量（不是`$aa`）。

请注意文档中的签名：[`array_pop ( array &$array )`](http://php.net/manual/en/function.array-pop.php)-`&`表示它通过引用获取参数，并更改该输入变量。

与其他两个函数比较：

[`array explode ( string $delimiter , string $string , int $limit )`](http://php.net/manual/en/function.explode.php)

和

[`array array_unique ( array $array , int $sort_flags = SORT_STRING )`](http://php.net/manual/en/function.array-unique.php)

在第一种情况下，您`$aa`使用 的输出进行更新`array_unique()`，然后将其传递`array_pop`给进行更改。

在第二种情况下， 的输出`array_unique()`将是相同的，但这个临时值没有分配给变量，因此在`array_pop`调用后它被遗忘了。

值得注意的是，在 PHP（与 C++ 不同）中，[按引用传递实际上比按值传递*要慢*](https://stackoverflow.com/questions/3117604/why-is-calling-a-function-such-as-strlen-count-etc-on-a-referenced-value-so-s)，因此仅用于修改函数的输入参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T10:19:57.027

在第一种情况下，您更改变量，如第 2 行 bs 使用赋值运算符 = 分配一个新值

# ruby-on-rails - 简化限价单AR查询

> ID：10773139
> 
> 赞同：0
> 
> 时间：2012-05-27T10:07:28.460
> 
> 标签：ruby-on-rails, activerecord

有没有更简单和更短的方法在 Rails 中声明它？

```
Message.where(conditions).limit(10).order("created_at desc") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:15:37.510

没有任何方法可以使代码更短，但是如果您想要更好的界面，可以添加范围：

```
Message < ActiveRecord::Base
  scope :my_scope, where(conditions).limit(10).order('created_at DESC')
end 
```

然后你会简单地使用查询`Message.my_scope`

# django - 如何在没有表单的 POST 请求中发送 url 参数

> ID：10773144
> 
> 赞同：5
> 
> 时间：2012-05-27T10:08:19.943
> 
> 标签：django, url, httpwebrequest, url-parameters

我必须在 url 中传递一个参数。我无法像往常一样将它发送到 GET 请求中，变量和值随请求一起显示在地址栏中。因此，最终用户可以更改此变量值的值并发送将被处理的请求。

```
href="url=/admin/usermanagement/?flag=2 
```

我想发送这个隐藏`flag=2`

现在这是一个 GET 请求，它可以在地址栏中看到。如果您对将其更改为 POST 以隐藏和发送值有任何想法，请给出您的建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T13:42:11.210

您仍然可以使用 html 表单，但对用户“隐藏”它：

```
<!DOCTYPE html>
<html>
    <body>
        <form id="myform" method="post" action="/">
            {% csrf_token %}
            <input type="hidden" name="flag" value="2" />
            <a href="#" onclick="document.forms[0].submit();return false;">Let's go!</a>
        </form>
    </body>
</html> 
```

和观点：

```
def index(request):
    if request.method == 'POST':
        try:
            flag = request.POST['flag']
            # TODO use flag
        except KeyError:
            print 'Where is my flag?'

    return render_to_response('index.html', {},
        context_instance=RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-21T23:58:17.427

您可以使用 AJAX 完全摆脱表单。

只需将其添加到您的 JavaScript 中：

```
function postTo(url, query) {
    var request = (XMLHttpRequest?new XMLHttpRequest():new ActiveXObject());
    request.open('POST', url, true);
    request.send(query);
} 
```

然后用这样的东西打电话：

```
postTo('/admin/usermanagement/','flag=2'); 
```

请注意，这**不会**重新加载页面。如果您想重新加载页面，请使用 Borges 的回答。

# view - cakephp 2.1 查看所有 add.ctp、edit.ctp、view.ctp 的关联数据

> ID：10773145
> 
> 赞同：0
> 
> 时间：2012-05-27T10:09:03.237
> 
> 标签：view, cakephp-2.1, relation

我有一个“考试”表，它的consultation_id 与“consulsations”表相关，而它的consulation_id 又与“患者”表相关。

现在，当我在“检查”视图的 add.ctp、edit.ctp 或 view.ctp 中时，我需要拉入“患者”详细信息，以便可以显示一些患者信息，以显示表格与患者有关.

我试过加入。不是说他们不工作。我是 cakephp 新手，我真的需要关于它在控制器中的显示方式以及 view.ctp 将如何显示它的帮助。

我想到了元素，但它们只是 .ctp 文件，对吗？

请如果有人可以对此提供帮助，将不胜感激。我已经尝试这样做一个星期了，我知道有一些简单的事情我没有做或没有考虑权利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:07:12.000

所以你只想提取相关数据？很简单。

在你的`ExaminationsController`方法中。

```
$patients = $this->Examination->Consultation->Patient->find('all',
array('conditions'=>array('consultation_id'=>$id,'examination_id'=>$e_id))); 
```

与此类似的东西，不太确定您需要传递哪个 id，因为这取决于您的模型是如何链接的。[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

但是，如果您的模型正确链接，则无论如何您都应该获取此数据。如果没有将模型递归设置得更高。

```
$this->Model->recursive = 2; 
```

# php - 致命错误：调用成员函数 toOptionArray()

> ID：10773148
> 
> 赞同：1
> 
> 时间：2012-05-27T10:09:25.210
> 
> 标签：php, function, magento, e-commerce

当我从我的 magento 仪表板进入系统 >> 配置 >> Google API 时，出现以下错误。

```
Fatal error: Call to a member function toOptionArray() on a non-object in /home/dev/public_html/app/code/core/Mage/Adminhtml/Block/System/Config/Form.php on line 421 
```

在第 421 行的 Form.php 中有以下代码。

```
} else {
                        $optionArray = $sourceModel->toOptionArray($fieldType == 'multiselect');
                    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:36:36.387

解决上述错误。请打开上述路径文件。

```
if ($e->source_model) {
$sourceModel = Mage::getSingleton((string)$e->source_model);
if ($sourceModel instanceof Varien_Object) {
$sourceModel->setPath($path);
}
$field->setValues($sourceModel->toOptionArray($fieldType == 'multiselect'));
} 
```

用下面的代码替换上面的代码：

```
if ($e->source_model) {
$sourceModel = Mage::getSingleton((string)$e->source_model);
if ($sourceModel instanceof Varien_Object) {
$sourceModel->setPath($path);
}
if(is_object($sourceModel)){
$field->setValues($sourceModel->toOptionArray($fieldType == 'multiselect'));
} else {
Mage::log($e->source_model);
}
} 
```

资料来源：http: [//indianicorange.wordpress.com/2010/10/04/fatal-error-call-to-a-member-function-tooptionarray-on-a-non-object/](http://indianicorange.wordpress.com/2010/10/04/fatal-error-call-to-a-member-function-tooptionarray-on-a-non-object/)

# c++ - 来自 'std::vector 类型的无效 const_cast **' 输入 'std::vector *'

> ID：10773151
> 
> 赞同：0
> 
> 时间：2012-05-27T10:09:48.693
> 
> 标签：c++

我在函数返回语句中收到错误。如果函数声明是，我很难理解我将返回什么：

```
const vector<Message*>& getMessages(string messageBox) const; 
```

我有类 Message、Box 和 MessageBox：

```
class Box
{
public:
    vector <Message> *messages;
    string name;
public:
    Box();
       ~Box();
};

class MessageBox
{
public:
    MessageBox(); 
    ~MessageBox(); 
        const vector<Message>& getMessages(string messageBox) const;
private:
    Box *inbox;
}; 
```

现在我正在尝试实现函数getMessages。我尝试返回 Box *inbox 的向量 *messages。看起来像：

```
 const vector<Message>& MessageBox::getMessages(string messageBox) const
{
   if(messageBox == "inbox")
     return (const_cast  <vector<Message>&>(inbox->messages));
} 
```

这给了我前面提到的错误。也许，我应该改变我的变量。
有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:03:30.420

这是你的问题。的类型`inbox->messages`是`const std::vector<Messages> *`。如果要返回对 指向的值的引用`inbox->messages`，只需引用指针：

```
return *inbox->messages; 
```

根本不需要`const_cast`，因为源类型和目标类型都已经是`cosnt`.

话虽如此，您的代码不必要地使用了大量的指针。为什么是`inbox`指针？为什么不只是一个价值成员？为什么是`messages`指向 a`std::vector`而不是一个值的指针？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:04:47.080

您的退货线路应该是

```
return *inbox->messages; 
```

请注意，如果`messageBox != "inbox"`. 这将有些棘手，因为您不能合法地仅返回对临时本地的引用。

您的`getMessages`函数可能会更好地返回`std::vector<Message>*`，因为这就是它在类中的保存方式，并且它会让代码用户更清楚地知道他们在访问指针时应该采取通常的预防措施（即检查`nullptr`）。

更好的是完全摆脱原始指针的使用。赞成`std::shared_ptr`，`messages`因为它在`Box`和任何呼叫之间共享，如果它不共享，则`getMessages`赞成。`unique_ptr``Box`

您可能并不真的需要这两个都是指针，因此根本不使用指针会更简单。除非您期望 的大小`messages`很大和/或被`getMessages`非常频繁地调用，否则只返回一个`messages`.

# jsf - malformedXML：XML 解析错误：JSF 页面中未关闭的 CDATA 部分

> ID：10773152
> 
> 赞同：1
> 
> 时间：2012-05-27T10:09:51.190
> 
> 标签：jsf, jsf-2

我在 JSF 页面中有错误。当我单击一个复选框时，我收到此错误：

```
malformedXML: XML Parsing Error: unclosed CDATA section
Location: http://188.254.224.237:8080/test/Sessions.jsf
Line Number 148, Column 112:
<partial-response></changes><error><error-name>class java.lang.IllegalStateException</error-name><error-message
---------------------------------------------------------------------------------------------------------------^ 
```

这是 JSF 页面的代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>       
    </h:head>
    <h:body>
        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>
        </div>  
        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_sessions.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form" >
                        <!-- The sortable data table -->
                        <h:dataTable onmouseover="addOnclickToDatatableRows();" id="dataTable" value="#{SessionsController.dataList}" binding="#{table}" var="item">
                            <!-- Check box -->
                            <h:column>
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox value="#{SessionsController.mainSelectAll}" class="checkall" >
                                        <f:ajax listener="#{SessionsController.selectAll}" render="@form" />
                                    </h:selectBooleanCheckbox>
                                </f:facet>
                                <h:selectBooleanCheckbox  onclick="highlight(this)" value="#{SessionsController.selectedIds[item.aSessionID]}" >
                                    <!-- if the user deselects one row deselect the main checkbox -->
                                    <f:ajax listener="#{SessionsController.deselectMain}" render="@form" />
                                </h:selectBooleanCheckbox>
                                <!-- Click on table code -->  
                                <h:outputLink id="lnkHidden" value="HistoryLink.xhtml" style="display:none">
                                    <f:param name="id" value="#{item.aSessionID}" />
                                </h:outputLink>
                            </h:column>
                            <!-- Row number -->
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="№" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="№" value="№" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{table.rowIndex + SessionsController.firstRow + 1}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>    

                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" >
                                <f:ajax render="@form" execute="@form"></f:ajax>   
                            </h:commandLink>
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                        <!-- hidden button -->
                        <h:commandButton id="deleterow" value="HiddenDelete" action="#{SessionsController.deleteSelectedIDs}" style="display:none">
                            <f:ajax render="@form"></f:ajax>
                        </h:commandButton>

                        <!-- the delete button -->
                        <h:commandButton value="Delete">
                            <f:ajax execute="@form" onevent="deletedialog('Do you want to delete the selected rows?')"></f:ajax>
                        </h:commandButton>

                        <script type="text/javascript" src="resources/js/tabs.js"></script> 
                    </h:form>                    
                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   
            </div>  
        </div>

    </h:body>
</html> 
```

第 148 行是空的。当我将选中的所有按钮添加到代码中时，会出现此错误。我该如何解决这个问题？

编辑这是 glassfish 中的错误堆栈

```
[#|2012-05-27T22:33:56.945+0300|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=311;_ThreadName=Thread-2;|StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.IllegalStateException: CDATA tags may not nest
    at com.sun.faces.renderkit.html_basic.HtmlResponseWriter.startCDATA(HtmlResponseWriter.java:630)
    at javax.faces.context.ResponseWriterWrapper.startCDATA(ResponseWriterWrapper.java:172)
    at javax.faces.context.PartialResponseWriter.startError(PartialResponseWriter.java:342)
    at com.sun.faces.context.AjaxExceptionHandlerImpl.handlePartialResponseError(AjaxExceptionHandlerImpl.java:200)
    at com.sun.faces.context.AjaxExceptionHandlerImpl.handle(AjaxExceptionHandlerImpl.java:123)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#]

[#|2012-05-27T22:34:04.156+0300|SEVERE|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.application|_ThreadID=310;_ThreadName=Thread-2;|Error Rendering View[/Sessions.xhtml]
java.lang.IllegalStateException: PWC3999: Cannot create a session after the response has been committed
    at org.apache.catalina.connector.Request.doGetSession(Request.java:2885)
    at org.apache.catalina.connector.Request.getSession(Request.java:2582)
    at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:920)
    at com.sun.faces.context.ExternalContextImpl.getSession(ExternalContextImpl.java:155)
    at com.sun.faces.renderkit.ServerSideStateHelper.writeState(ServerSideStateHelper.java:175)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.getViewState(ResponseStateManagerImpl.java:135)
    at javax.faces.application.StateManager.getViewState(StateManager.java:555)
    at com.sun.faces.context.PartialViewContextImpl.renderState(PartialViewContextImpl.java:416)
    at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:300)
    at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:981)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:391)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#]

[#|2012-05-27T22:34:04.158+0300|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=310;_ThreadName=Thread-2;|StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.IllegalStateException: CDATA tags may not nest
    at com.sun.faces.renderkit.html_basic.HtmlResponseWriter.startCDATA(HtmlResponseWriter.java:630)
    at javax.faces.context.ResponseWriterWrapper.startCDATA(ResponseWriterWrapper.java:172)
    at javax.faces.context.PartialResponseWriter.startError(PartialResponseWriter.java:342)
    at com.sun.faces.context.AjaxExceptionHandlerImpl.handlePartialResponseError(AjaxExceptionHandlerImpl.java:200)
    at com.sun.faces.context.AjaxExceptionHandlerImpl.handle(AjaxExceptionHandlerImpl.java:123)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#]

[#|2012-05-27T22:34:06.597+0300|SEVERE|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.application|_ThreadID=308;_ThreadName=Thread-2;|Error Rendering View[/Sessions.xhtml]
java.lang.IllegalStateException: PWC3999: Cannot create a session after the response has been committed
    at org.apache.catalina.connector.Request.doGetSession(Request.java:2885)
    at org.apache.catalina.connector.Request.getSession(Request.java:2582)
    at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:920)
    at com.sun.faces.context.ExternalContextImpl.getSession(ExternalContextImpl.java:155)
    at com.sun.faces.renderkit.ServerSideStateHelper.writeState(ServerSideStateHelper.java:175)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.getViewState(ResponseStateManagerImpl.java:135)
    at javax.faces.application.StateManager.getViewState(StateManager.java:555)
    at com.sun.faces.context.PartialViewContextImpl.renderState(PartialViewContextImpl.java:416)
    at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:300)
    at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:981)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:391)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#]

[#|2012-05-27T22:34:06.599+0300|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=308;_ThreadName=Thread-2;|StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.IllegalStateException: CDATA tags may not nest
    at com.sun.faces.renderkit.html_basic.HtmlResponseWriter.startCDATA(HtmlResponseWriter.java:630)
    at javax.faces.context.ResponseWriterWrapper.startCDATA(ResponseWriterWrapper.java:172)
    at javax.faces.context.PartialResponseWriter.startError(PartialResponseWriter.java:342)
    at com.sun.faces.context.AjaxExceptionHandlerImpl.handlePartialResponseError(AjaxExceptionHandlerImpl.java:200)
    at com.sun.faces.context.AjaxExceptionHandlerImpl.handle(AjaxExceptionHandlerImpl.java:123)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#] 
```

任何帮助将不胜感激！

# javascript - SpiderMonkey 中是否有与 PyCapsule 等效/相似的东西？

> ID：10773153
> 
> 赞同：0
> 
> 时间：2012-05-27T10:09:55.153
> 
> 标签：javascript, c, spidermonkey

当嵌入 Python 时，有一种[`PyCapsule`](http://docs.python.org/c-api/capsule.html)类型可以创建一个包含 C 指针的对象，该指针不能从 Python 代码中修改，也就是说，它非常适合传递仅由 C 代码使用的东西。

由于我的应用程序还通过 SpiderMonkey 引擎支持 JavaScript，因此我正在 SpiderMonkey 中寻找类似的东西。我知道我可以`JSClass`使用`JSCLASS_HAS_PRIVATE`标志创建自定义，但我想知道是否还有另一种更简单/更轻量级的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:52:03.320

没有类似的东西，所以确实有必要创建一个自定义类。这是我最终使用的代码；它定义了一个新的类“资源”来存储指针。虽然不如 python 方式漂亮，但它仍然非常简单：

```
// Define the class and give it some private space for the pointer
static JSClass resource_class = { "Resource", JSCLASS_HAS_PRIVATE, JS_PropertyStub, JS_PropertyStub,
    JS_PropertyStub, JS_StrictPropertyStub, JS_EnumerateStub, JS_ResolveStub, JS_ConvertStub,
    JS_FinalizeStub, JSCLASS_NO_OPTIONAL_MEMBERS };

// Create an object and store the pointer
JSObject *obj = JS_NewObject(cx, &resource_class, NULL, NULL);
JS_SetPrivate(cx, obj, MY_POINTER);

// Get the pointer
void *ptr = JS_GetPrivate(cx, obj); 
```

# ios - TBXML 阻止 iOS

> ID：10773155
> 
> 赞同：0
> 
> 时间：2012-05-27T10:10:20.333
> 
> 标签：ios, tbxml

我正在尝试使用`newTBXMLWithURL`方法加载 xml 数据，一旦成功块返回 xml，我正在尝试使用委托来调度它，以便控制器接收`NSMutableArray`记录，但我一定做错了，我在控制台中收到一个错误，显示“PROGRAM RECEIVED EXC_BAD_ACCESS “我不确定我哪里出错了。下面附上代码

```
#import "XmlParser.h"
#import "TBXML+HTTP.h"
#import "NewsObject.h"

@implementation XmlParser
@synthesize  delegate = _delegate;

- (void)GetNewsList
{

    TBXMLSuccessBlock s = ^(TBXML *tbxml) {
        NSMutableArray *arrayOfNews;

        TBXMLElement *root = tbxml.rootXMLElement;

        TBXMLElement *newsListElement = [TBXML childElementNamed:@"NewsList" parentElement:root];

        TBXMLElement *newsElement = [TBXML childElementNamed:@"News" parentElement:newsListElement];

        while(newsElement !=nil){

            NewsObject *news = [[NewsObject alloc]init];

            news.headLine = [TBXML textForElement: newsElement ->firstChild];
            news.description = [TBXML textForElement:newsElement ->firstChild->nextSibling];
            news.imageUrl = [TBXML textForElement:newsElement->firstChild->nextSibling->nextSibling];

            if(arrayOfNews==nil)
                arrayOfNews = [NSMutableArray arrayWithObject:news];
            else
                [arrayOfNews addObject:news];

            newsElement = newsElement ->nextSibling;
        }

        [self.delegate XmlParser:self feedReady:arrayOfNews];
    };

    TBXMLFailureBlock f = ^(TBXML *tbxml, NSError *error) {
        NSLog(@"nay");
    };

    [TBXML newTBXMLWithURL:[NSURL URLWithString:@"url"]
                   success: s
                   failure: f];

}
@end 
```

输入样本：

```
<xmlData>
<NewsList>
<News newsId="1" providerId="1" articleId="95020" sportId="6" sportName="RBL">
<Headline>Matai signs on with Manly</Headline>
<Description>
Manly has retained another one of its premiership stars with Steve Matai committing to the Sea Eagles until the end of the 2015 season.
</Description>
<Image>
http:google.com/All.png
</Image>
</News>
<News newsId="2" providerId="1" articleId="95019" sportId="7" sportName="RBU">
<Headline>Reds lose Lucas for Brumbies clash</Headline>
<Description>
Queensland has lost key utility back Ben Lucas to injury on the eve of Saturday night's vital match with the Brumbies at Canberra Stadium.
</Description>
<Image>
http:google.com/All.png
</Image>
</News>
</NewsList>
<xmlData> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:26:31.373

感谢您让我们知道实际的错误消息。该错误或警告没有单一原因。

另外，您是在使用 ARC 还是只是忘记了自动释放这些东西？您使用的是哪个 Xcode 版本和编译器？所有这些细节都很重要。

我会说你可以`self`在块内解决这个问题：

```
__block id _self = self;
TBXMLSuccessBlock s = ^(TBXML *tbxml) {
    /* use _self inside the block, not self */
}; 
```

请参阅[https://stackoverflow.com/a/7854315/143097](https://stackoverflow.com/a/7854315/143097)。

上一个答案：

看来您正在调用一个不存在的方法：`newTBXMLWithURL:success:failure:`. 至少在我的 TBXML 版本中，它被称为：`tbxmlWithURL:success:failure:`.

我敢打赌，错误消息中的某处对此有提示，不是吗？

# jquery - 价值来自跨度 CSS 类的选项我已经尝试让它工作几天了.. 大吃一惊。我根本不是 JavaScript/jQuery 方面的专家，所以放轻松，哈哈。;-) 我有一个包含 9 个值的下拉列表。我还有一个跨度设置为“option0”的类。下拉列表显然具有从 1 到 9 的值。我想在下拉列表更改时更改跨度的类。如果使用下拉菜单并选择了选项 5，我希望跨度具有类“option5”。这样做的最佳方法是什么？感谢您的阅读，希望很快能收到你们的来信。c：您的插入语句不正确，您应该使用：connect.p

> ID：10773156
> 
> 赞同：1
> 
> 时间：2012-05-27T10:10:23.290
> 
> 标签：jquery, css, select, text, drop-down-menu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T10:59:29.670

```
<select id="your_select">
  <option>Option 1</option>
  <option>Option 2</option>
  <option>Option 3</option>
  <option>Option 4</option>
  <option>Option 5</option>
  <option>Option 6</option>
  <option>Option 7</option>
  <option>Option 8</option>
  <option>Option 9</option>
</select>
<span id="slave" class="option0">option0</span>
​

$('#your_select').on('change', function() {
    var value = $('option:selected', this).text().replace(/Option\s/, '');
    $('#slave').removeClass().addClass('option' + value).text('option' + value)
});​ 
```

**[工作演示 1](http://jsfiddle.net/CuNcy/1/)**

如果你`select`像下面这样：

```
<select id="your_select">
  <option value="option1">Option 1</option>
  <option value="option2">Option 2</option>
  <option value="option3">Option 3</option>
  <option value="option4">Option 4</option>
  <option value="option5">Option 5</option>
  <option value="option6">Option 6</option>
  <option value="option7">Option 7</option>
  <option value="option8">Option 8</option>
  <option value="option9">Option 9</option>
</select>
<span id="slave" class="option0">option0</span> 
```

然后

```
$('#your_select').on('change', function() {
    var value = this.value;
    $('#slave').removeClass().addClass(value).text(value)
});​ 
```

**[工作演示 2](http://jsfiddle.net/Affrq/3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:15:08.833

```
$('select').change(function(){
   var val = $(this).val();
   alert(val);
   $('span').removeAttr('class').addClass('option' + val);
}) 
```

[http://jsfiddle.net/SAy7W/1/](http://jsfiddle.net/SAy7W/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T10:16:51.400

HTML：

```
​&lt;select id="master">
    <option>Content 1</option>
    <option>Content 2</option>
    <option>Content 3</option>
    <option>Content 4</option>
    <option>Content 5</option>
    <option>Content 6</option>
    <option>Content 7</option>
</select>
​&lt;span id="slave">option0</span>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

jQuery：

```
​$('#master').change(function() {
    var selected = $(this).val();
    $('#slave').removeClass().addClass('option' + selected);
});​​​ 
```

CSS：

```
​.option​0 {
    background-color: red;
}
.option1 {
    background-color: green;
}
.option2 {
    background-color: brown;
}
.option3 {
    background-color: yellow;
}
.option4 {
    background-color: blue;
}

... 
```

[在此处](http://jsfiddle.net/JAhRh/1/)查看实时示例

或者，如果您想在选项标签之间包含任何内容，请应用自定义属性“数据位置”并使用此 jQuery：

```
$('#master').change(function() {
    var selected = $('#master option:selected').attr('data-position');
    alert(selected);
    $('#slave').removeClass().addClass('option' + selected);
});​ 
```

[在此处](http://jsfiddle.net/JAhRh/2/)查看更新的实时示例

# java - midi 输入的实时解析 - 节奏区分

> ID：10773159
> 
> 赞同：1
> 
> 时间：2012-05-27T10:11:09.380
> 
> 标签：java, real-time

我正在用 JAVA 开发一个实时鼓作曲应用程序。我试图解决的主要问题是确定音符的节奏值是什么。我遇到了准确性问题，因为我正在考虑 100bpm 节拍器中的 32 分音符。这给出了 75 毫秒的音符之间的间隔。我不是 100% 确定考虑时间段和分配节奏值的理论方法可以缩放到每个 bpm 或时间间隔。考虑到人为因素，你认为这是可行的吗？我想这是一个非常具体/经验性的问题，适用于开发类似应用程序的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:27:09.437

标准 Java 不是一种适合实时操作的语言，如果时间的准确性对您来说如此重要，这意味着您不应该直接使用 Java（至少）。*特别是垃圾收集*的非确定性行为使 Java 端的实时应用程序变得复杂。

# ruby-on-rails - 从 ActiveRecord 中的一系列 id 中搜索

> ID：10773160
> 
> 赞同：26
> 
> 时间：2012-05-27T10:11:29.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我怎样才能在范围内做这样的事情？

```
User.find(14000..14500) 
```

我需要选择特定范围的用户开始和结束特定的 id。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-27T10:13:01.687

您可以使用以下[`where`](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-where)方法：

```
User.where(id: 14000..14500) 
```

### 解释

这里的`where`方法接收一个简短形式的哈希参数，其中`id`键的值为 a [`Range`](https://rubyapi.org/3.0/o/range)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-27T11:14:35.467

你也可以这样做：

```
User.find_by_id(14000..14500) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-03T20:18:36.790

您可以对作用域使用范围定义：

```
User.find(1)       # returns the object for ID = 1
User.find([1])

User.find(1, 2, 9) # returns an array for objects with IDs in (1, 2, 9)
User.find([1, 2, 9])

User.scoped(:conditions => { :id => 1..9}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-23T10:06:42.013

也试试这个

```
User.find((start..end).to_a) 
```

前任 -

```
User.find((14000..14500).to_a) 
```

# c# - Mono xbuild 使用 dmcs 而不是 gmcs

> ID：10773169
> 
> 赞同：1
> 
> 时间：2012-05-27T10:13:27.503
> 
> 标签：c#, mono, xbuild, gmcs, dmcs

我有以下代码：

```
using System;
using Microsoft.Build.Framework;
using Microsoft.Build.Utilities;

namespace MyTasks
{
    public class SimpleTask : Task
    {
            public override bool Execute()
            {
                    return true;
            }
    }
} 
```

我有以下 MSBuild 脚本：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
   <Target Name="Build">
      <MakeDir Directories= "bin"/>
      <Csc Sources="SimpleTask.cs" References="Microsoft.Build.Utilities,Microsoft.Build.Framework"      TargetType="library"
           OutputAssembly=".\bin\SimpleTask.dll" />
   </Target>
</Project> 
```

它失败并显示以下消息：

```
broersa@build01:~/task$ xbuild SimpleTask.proj
XBuild Engine Version 2.10.8.1
Mono, Version 2.10.8.1
Copyright (C) Marek Sieradzki 2005-2008, Novell 2008-2011.

Build started 5/27/2012 12:08:32 PM.
__________________________________________________
Project "/home/broersa/task/SimpleTask.proj" (default target(s)):
        Target Build:
                Tool /usr/bin/dmcs execution started with arguments:  /out:./bin/SimpleTask.dll SimpleTask.cs /target:library /reference:Microsoft.Build.Utilities,Microsoft.Build.Framework
: error CS0006: Metadata file `Microsoft.Build.Utilities' could not be found
        Task "Csc" execution -- FAILED
        Done building target "Build" in project "/home/broersa/task/SimpleTask.proj".-- FAILED
Done building project "/home/broersa/task/SimpleTask.proj".-- FAILED

Build FAILED.
Errors:

/home/broersa/task/SimpleTask.proj (default targets) ->
(Build target) ->

        : error CS0006: Metadata file `Microsoft.Build.Utilities' could not be found

         0 Warning(s)
         1 Error(s)

Time Elapsed 00:00:00.4351060 
```

Xbuild 调用 dmcs 编译器，但 Microsoft.Build.Utilites 程序集引用了 .net 2.0 程序集。当我使用 gmcs (2.0) 手动编译时，它可以工作。但我无法让它与 xbuild 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:52:54.160

在 Project xml 标记中将 Toolsversion 设置为 2.0。

# android - 与 Android 设备上的后退按钮相关的建议

> ID：10773170
> 
> 赞同：-2
> 
> 时间：2012-05-27T10:14:01.100
> 
> 标签：android

嘿伙计们，我是 android 开发的新手，我目前正在制作一个应用程序。主要活动有一个列表视图，所有项目都显示在列表视图中，它们应该如此。现在，如果单击任何项​​目或新项目添加后，如果按下后退按钮，则会打开一个新活动并销毁。现在，当到达主活动并再次按下后退按钮以关闭应用程序时，它不会关闭应用程序，而是再次移动到主活动活动，只有这一次，最后添加的条目不存在，同样在连续按下后退按钮时，所有条目首先被删除，当所有条目被删除时，主活动关闭并且应用程序停止。知道为什么会这样，我真的可以使用你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:48:21.983

您需要`android:noHistory="true"`在 AndroidManifest.xml 中添加到您的列表详细信息 Activity

例如：

```
<activity android:name=".MainList"/>
<activity android:name=".ListDetail" android:noHistory="true"/> 
```

或者，您可以覆盖 onBackPressed 方法以在您按下按钮时完成活动。

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    finish();
} 
```

# mongodb - 我在更新中对 $set 和 $inc 做错了什么

> ID：10773172
> 
> 赞同：21
> 
> 时间：2012-05-27T10:14:16.663
> 
> 标签：mongodb

我正在[mongodb 控制台](http://www.mongodb.org/#)上尝试这个：

```
db.foobar.update( 
  { name: "Foobar" },
  { 
    $set : { foo: { bar: 'bar' }, 
    $inc: { 'foo.count': 1 } 
  } 
}, true) 
```

它返回“ok”，但是`db.foobar.find()`，返回一个空记录集。我正在尝试`upsert`一个文档，所以它看起来像：

```
name: Foobar
foo: {
  bar: 'bar'
  count: 1
} 
```

如果文档不存在，则创建一个计数为 1 的文档。否则，只需增加计数。为什么上面不工作？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-27T15:51:01.120

在我看来，您的代码实际上是在尝试设置文档的 $inc 字段，而不是在 foo.count 字段上使用 $inc 修饰符。这可能是你想要的：

```
db.foobar.update(
    { name: "Foobar" }, 
    {
        $set: { 'foo.bar': 'bar' }, 
        $inc: { 'foo.count': 1 } 
    }, true) 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T19:55:08.420

在您提供的代码片段中，您在 $set 对象之后缺少一个右大括号。但这是一个侧面问题。

我不相信您可以在一次事务中设置和增加相同的子文档。由于 count 是 foo 下的成员，因此在 upsert 上，它还不存在。尝试以下操作时出现的错误：

```
db.foobar.update( 
   { name: "Foobar" },
   { 
     $set : { foo: { bar: 'bar' }}, 
     $inc: { 'foo.count': 1 } 
   } 
}, true) 
```

是“更新中的冲突模组”。也许你可以这样建模：

```
db.foobar.update({name:"foobar"},{$set:{foo:{bar:"bar"}},$inc:{count:1}},true); 
```

或者，如果您愿意：

```
db.foobar.update({name:"foobar"},{$set:{foo:{bar:"bar"}},$inc:{"counts.foo":1}},true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T19:37:15.813

所以我目前正在尝试：

```
var doc = {
            "name": "thename",
            "organisation": "theorganisation"
        }, // document to update. Note: the doc here matches the existing array
    query = { "email": "email@example" }; // query document
    query["history.name"] = doc.name; // create the update query
    query["history.organisation"] = doc.organisation;
    var update = db.getCollection('users').findAndModify({
        "query": query,
        "update": { 
            "$set": { 
                "history.$.name": doc.name,
                "history.$.organisation": doc.organisation
            },
            "$inc": { "history.$.score": 5 } //increment score
        }
    });
    if (!update) {
        db.getCollection('users').update(
            { "email": query.email },
            { "$push": { "history": doc } }
        );
    }
    db.getCollection('users').find({ "email": "email@example" }); 
```

这会更新`score`, 并将其添加到对象中（如果它不存在），但是它似乎将所有对象`name`s 更改为 doc.name （即在这种情况下为“thename”）。

如果文档不存在，我还没有了解

# c++ - 低级库是如何制作的？

> ID：10773174
> 
> 赞同：19
> 
> 时间：2012-05-27T10:14:42.183
> 
> 标签：c++, libraries, low-level

当我制作 C++ 应用程序时，我通常使用[SDL](http://en.wikipedia.org/wiki/Simple_DirectMedia_Layer)或[WxWidgets](http://en.wikipedia.org/wiki/WxWidgets)等库。但是如果我要制作图书馆，我是否需要使用图书馆来制作图书馆？或者我可以用核心 C++ 代码制作整个库，这甚至可能吗？

我的观点是，必须有一点是库没有任何基础，所以它唯一可以使用的是核心 C++。

我对这个理论正确吗？如果不是，那么低级库是如何真正制作的？

（我知道这是一个广泛的问题，但我是一个非常好奇的人，需要答案，这让我很困扰。）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-27T10:40:54.120

低级库通过操作系统提供的库来访问硬件和系统资源。操作系统本身及其加载的驱动程序使用预定义内存地址的汇编和读/写来修改 CPU 状态并与硬件通信。

仅依赖于[C++](http://en.wikipedia.org/wiki/C%2B%2B)的库只能是实用程序库，因为与硬件或用户的任何通信都将涉及程序集或附加库。一个没有依赖关系的纯 C++ 库的示例是数学库，因为它不需要 I/O 或硬件访问。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-27T14:03:46.083

> 当我制作 C++ 应用程序时，我通常使用 SDL 或 wxWidgets 等库。但是如果我要制作图书馆，我是否需要使用图书馆来制作图书馆？或者我可以用核心 C++ 代码制作整个库，这甚至可能吗？

是的。

> 我的观点是必须有一点，一个库没有任何基础，所以它唯一可以使用的东西是核心 C++。

不。

C & C++ 是*第三代*语言的例子。因此，他们试图隐藏许多系统方面的实现细节。[第三代编程语言](http://en.wikipedia.org/wiki/Third-generation_programming_language)(3GL) 层的基础是[第二代编程语言](http://en.wikipedia.org/wiki/Second-generation_programming_language)(2GL)，例如*x86 汇编*；下面我们有机器代码指令。

正如 josefx 已经[指出的那样](https://stackoverflow.com/users/216111/josefx)，您*确实可以*在纯 C++ 中实现 C++ 库。然而，系统库（尤其是那些用于控制设备的库）可以并且经常是用汇编程序编写的。通常，库*也*可以用[COBOL](http://en.wikipedia.org/wiki/COBOL)或[Fortran](http://en.wikipedia.org/wiki/Fortran)甚至[Brainfuck](http://en.wikipedia.org/wiki/Brainfuck)编写。

汇编器/编译器/链接器进程实际上将`2GL/3GL`代码转换为`library`可以在 C++ 中链接到的代码。

这是一个 C 程序的小例子，它**没有**`blah.c`链接到标准运行时库，但它仍然设法使用 * 专有库中的函数打印出东西， 写在：**`libfoo.a,``x86 assembler`**

 **### 废话.c：

```
/*-----------------------------------------------
blah.c
Invokes some assembly
------------------------------------------------*/
void _start() 
{
    char sz[]={"oOoook\n"};
    foo(sz,sizeof(sz));
    byebye();
} 
```

### foo.asm：

```
;----------------------------------------------------------------------------
;Some foo assembly: exposes system write & exit
;----------------------------------------------------------------------------  

    SECTION .text
    global  foo
    global  byebye

foo:
    push    ebp
    mov     ebp,esp

    mov     edx, [ebp+12]
    mov     ecx, [ebp+8]
    mov     ebx,1
    mov     eax,4               ;syscall for __NR_write
    int     0x80                ;service interrupt               

    mov     esp,ebp
    pop     ebp

    mov     eax,0
    ret

byebye:
    mov     ebx,0
    mov     eax,1               ;syscall for __NR_exit
    int     0x80                ;service interrupt               
    ret 
```

这是它的构建方式：

```
$ nasm -felf -ofoo.o foo.asm
$ ar rs libfoo.a foo.o
$ gcc  -L. -oblah blah.c -lfoo -nostartfiles -nostdlib -nodefaultlibs
$ ./blah
oOoook
$ 
```

可以看出，该库使用[系统调用](http://www.linfo.org/system_call_number.html)（在本例中为`linux`内核）；顺便说一句，也可以由第三方实施。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-27T10:24:39.857

SDL 和 wxWidgets 是抽象底层系统细节的库。

要提供类似的功能（图形、声音、输入），您需要直接针对Windows上的[Windows API 、Mac OS X 上的](http://en.wikipedia.org/wiki/Windows_API)[Cocoa](http://en.wikipedia.org/wiki/Cocoa_%28API%29)和 Unix 上直接针对[POSIX](http://en.wikipedia.org/wiki/POSIX) API 和[X11](http://en.wikipedia.org/wiki/X11)（使用[XCB](http://en.wikipedia.org/wiki/XCB)、[Xlib](http://en.wikipedia.org/wiki/Xlib)或原始 X11 协议）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-27T15:02:40.420

库分为三种：

1.  进行系统调用的库
2.  实现外部函数调用的库
3.  可以用核心 C++ 编写或重写的库（例如，不包括 asm 扩展）

进行系统调用的库通常不能用语言本身编写，因为它依赖于系统调用约定的特殊性，这通常涉及对内核进行陷阱或中断，以导致切换到较低[权限的环](http://en.wikipedia.org/wiki/Ring_%28computer_security%29). 纯 C++ 中没有生成陷阱/中断的工具；OS API 通常使用程序集扩展来执行此操作。

第二类是制定或接收外部调用约定的库；可以说系统调用是其中的一个子类别，但是系统调用明显不同，因为系统调用需要特权环切换，而外部调用则不需要。外部调用约定通常也用汇编语言编写。

所有其他不涉及 ring switch 或外部调用约定的库总是可以用 C++ 本身编写；尽管有时它们不是，但通常出于性能目的（例如数学库属于此类别）。

在任何情况下，属于前两类的库通常也有大量用纯 C++ 编写的代码，它们什么都不做，只是将系统调用/外部调用的 API 包装成 C++ 工具和程序员更熟悉的形式（例如头文件和其他便利实用程序）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T10:24:31.337

从本质上讲，库只是类的集合。它们可以基于其他库来扩展它们或完全为新库提供核心。您可以仅使用 C++ 代码创建自己的库，例如，利用 Windows API 的图形库、扩展可用套接字库的聊天/通信库等。您说这些库使用核心 C++ 是正确的功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T21:15:20.683

库只不过是您可以链接代码的其他代码。它们没有什么神奇或特别之处。你可以把你写的函数变成一个库。所以问题真的是你能只做低级的东西 C++ 还是你必须做其他事情？好吧，这就是 Lie Ryan 的答案所在。您可以编写程序，做您的事，只需要 C++ 代码。您可以进行系统调用，并且可以绑定其他语言（例如汇编）来完成您在 C++ 中无法完成但需要执行的操作。

最后，这一切都归结为机器代码和硬件。获得该机器代码或功能相同的东西所需或需要的任何语言或方法都在可能性范围内。不必要地使用 asm 或不使用系统调用等可能并不总是最聪明的事情。

有大量的开源库与您正在谈论的那些类似，您只需查看代码即可了解它们是如何做到的。没有什么可以说明一个实体实现某事的方式是唯一的方法。**

# c++ - 在 C++ 桌面应用程序的上下文中使用 MVC 导航/查看流

> ID：10773175
> 
> 赞同：1
> 
> 时间：2012-05-27T08:26:30.160
> 
> 标签：c++, model-view-controller

让我们假设您有一个全屏 C++ 桌面应用程序，它由几个屏幕组成，每个屏幕都有不同的功能，以及一个带有适当模型的 ViewController。例如以下一组非常简化的屏幕：

1.  测验：用户通过一组多项选择题进行导航。
2.  统计测验结果。
3.  信息：向用户提供有关特定主题的信息。
4.  菜单（测验、信息、退出）

根据 GRASP 原理*Information Expert*判断，每个 ViewController 将最清楚何时完成以及何时移动到新屏幕。然而，根据同样的原则，它不是决定下一个屏幕实际上应该是什么的正确位置。在这个相当简单的例子中，人们可能会说这没问题，但在更复杂的应用程序中，它无疑会导致重复的代码和逻辑以及更高的耦合和更低的内聚。还有一个问题是您必须在当前屏幕的 ViewController 中创建新的小部件和控制器，这会带来各种新问题，至少根据*Creator*原则，这不是正确的选择。您将不得不引入一个工厂来缓解一些问题，等等。

因此，下一个合乎逻辑的步骤是引入一个 ApplicationController 来单独负责管理视图及其控制器，包括从一个视图到下一个视图的导航流。

在我看来，这仍然存在一个问题：如何向 ApplicationController 发出信号，表明是时候移动到不同的屏幕并将控制权正确地移交给该对象了？

例如，可以使用观察者模式。但是，如果您现在有一个昂贵的 View 处于活动状态，并且希望在新屏幕处于活动状态后将其销毁怎么办？如果当前的 ViewController 向 ApplicationController 发出下一个屏幕应该打开的信号，它可以管理所有内容，直到它会破坏当前活动的屏幕，因为当前的调用完全来自该对象，所以它无法做到这一点。除了这种方法的其他几个问题。

所以我的问题是（对所有冗长的介绍感到抱歉：P）：您如何使用 MVC 正确实现从一个全屏小部件到另一个全屏小部件的导航流程，从而解决上述问题，在 View- 和 ApplicationController 和在耦合和内聚方面很好地面向对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:51:44.840

有时，您在思考过程中遗漏了一个细节，而您打开了一整套问题，甚至没有意识到自己犯了错误。

在这种情况下，细节是您可以自然地发布异步和同步事件。如果您必须确保您不再处于事件发布方法的上下文中，请发布异步事件。在处理程序中收到该事件后，您可以确定上下文已被保留。例如，如果您愿意，您可以安全地删除该对象。自然，事件处理程序不应位于您尝试删除的同一对象的上下文中。

为了完整性：在 Qt 中，您可以为使用 connect() 创建的每个信号/插槽连接指定它应该是 Qt::QueuedConnection 类型。如果您提出一个信号，它不会被传递，直到控制返回到线程的事件循环。通常，使用 Qt::AutoConnection，如果接收器在同一个线程中，则在它被提升时传递一个信号（Qt::DirectConnection），或者如果接收器在，则回退到对该信号排队（Qt::QueuedConnection）一个不同的线程。

在 wxWidgets 中，您可以使用 wxEvtHandler::QueueEvent(wxEvent* event) 对事件进行排队，例如可以通过 Application 单例获得。

# java - 每次单击链接时 web 视图中的进度对话框

> ID：10773178
> 
> 赞同：0
> 
> 时间：2012-05-27T10:15:05.793
> 
> 标签：java, android, android-webview

以前有人问过这个问题，但是，我是新手，并且在尝试使其正常工作时遇到了问题。我的问题是如何在每次用户单击 webview 中的链接时显示进度对话框。我有一个对话框，显示应用程序首次启动时，但单击链接时不显示对话框。我很确定解决方案就[在这里](https://stackoverflow.com/questions/9001922/progress-dialog-in-webview)，但我似乎无法将它们正确地组合在一起以使其正常工作.....有人可以帮我把它放在一起。

我的代码

查看已批准的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:49:14.190

我的问题没有得到任何帮助，但我终于弄清楚了。我发布了一个示例项目来帮助任何有同样问题的人。这是一个 web_view 项目，每次单击链接时都会显示一个（页面加载...）对话框。此示例还检查 Internet 连接...

[在此处下载 Eclipse 项目](http://www.4shared.com/zip/8IedJaoX/example.html)

这是我的两个java文件。下面的文件包含进度对话框的解决方案。

```
 package com.example.project;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.Window;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

public class WebActivity extends Activity {

    private WebView wv;

    private String LASTURL = "";

    Menu myMenu = null;
    private ProgressDialog dialog;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.getWindow().requestFeature(Window.FEATURE_PROGRESS);

        if (!InternetConnection.checkNetworkConnection(this)) {
            showAlert(this, "No Data Connection", "This Application requires an internet connection");
        } else {

            setContentView(R.layout.web_view);

            wv = (WebView) findViewById(R.id.web_view);

            WebSettings webSettings = wv.getSettings();
            webSettings.setSavePassword(true);
            webSettings.setSaveFormData(true);
            webSettings.setJavaScriptEnabled(true);
            webSettings.setUseWideViewPort(true);
            webSettings.setLoadWithOverviewMode(true);
            webSettings.setSupportZoom(false);

            final Activity activity = this;

            // start ProgressDialog with "Page loading..."
            dialog = new ProgressDialog(activity);
            dialog.setMessage("Page loading...");
            dialog.setIndeterminate(true);
            dialog.setCancelable(true);
            dialog.show();

            wv.setWebChromeClient(new WebChromeClient() {
                public void onProgressChanged(WebView view, int progress) {
                    // set address bar and progress
                    // activity.setTitle( " " + LASTURL );
                    // activity.setProgress( progress * 100 );

                    if (progress == 100) {
                        // stop ProgressDialog after loading
                        dialog.dismiss();

                        // activity.setTitle( " " + LASTURL );
                    }
                }
            });

            wv.setWebViewClient(new WebViewClient() {
                public void onReceivedError(WebView view, int errorCode,
                        String description, String failingUrl) {
                    Toast.makeText(getApplicationContext(),
                            "Error: " + description + " " + failingUrl,
                            Toast.LENGTH_LONG).show();
                }

                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    if (url.indexOf("google") <= 0) {
                        // the link is not for a page on my site, so launch
                        // another Activity that handles URLs
                        Intent intent = new Intent(Intent.ACTION_VIEW, Uri
                                .parse(url));
                        startActivity(intent);
                        return true;
                    }
                    return false;
                }
                /*****************************************************************/
                /*  Here the load of the page will start so we must launch the  */
                /*  ProgressDialog                                              */
                /*****************************************************************/                                             
                public void onPageStarted(WebView view, String url,
                        Bitmap favicon) {

                    // this is what we should do
                    dialog.setMessage("Page loading...");
                    dialog.setIndeterminate(true);
                    dialog.setCancelable(true);
                    dialog.show();
                    //
                    LASTURL = url;
                    view.getSettings().setLoadsImagesAutomatically(true);
                    view.getSettings().setBuiltInZoomControls(true);
                }
                /*****************************************************************/
                /*  Here the load of the page will stop so we must dismiss the  */
                /*  ProgressDialog                                              */
                /*****************************************************************/ 
                public void onPageFinished(WebView view, String url) {
                    // this is what we should do
                    dialog.dismiss();

                }
            });
            wv.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
            wv.setScrollbarFadingEnabled(false);
            wv.loadUrl("http://www.google.com");

        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && wv.canGoBack()) {
            wv.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
    /*****************************************************************/
    /*  Here is a menu with basic options. Will probably get 
     * comments on how this is replaced by action bar               */
    /*****************************************************************/
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);

        this.myMenu = menu;
        MenuItem item = menu.add(0, 1, 0, "Home");
        item.setIcon(R.drawable.home);
        MenuItem item2 = menu.add(0, 2, 0, "Back");
        item2.setIcon(R.drawable.arrowleft);
        MenuItem item3 = menu.add(0, 3, 0, "Reload");
        item3.setIcon(R.drawable.s);
        MenuItem item4 = menu.add(0, 4, 0, "Share");
        item4.setIcon(R.drawable.share);
        MenuItem item5 = menu.add(0, 5, 0, "Rate");
        item5.setIcon(R.drawable.vote);
        MenuItem item6 = menu.add(0, 6, 0, "Exit");
        item6.setIcon(R.drawable.close);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case 1:
            wv.loadUrl("http://www.google.com");
            break;
        case 2:
            if (wv.canGoBack()) {
                wv.goBack();
            }
            break;
        case 3:
            wv.loadUrl(LASTURL);
            break;
        case 4:
            Intent sharingIntent = new Intent(Intent.ACTION_SEND);
            sharingIntent.setType("plain/text");
            sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Check out this app I found.");
            startActivity(Intent.createChooser(sharingIntent,"Share using"));
            break;
        case 5:

            Intent marketIntent2 = new Intent(Intent.ACTION_VIEW, Uri.parse(
                    "http://market.android.com/details?id=" + getPackageName()));
                  startActivity(marketIntent2);
                break;

        case 6:
            finish();
            break;

        }

        return true;
    }

    /**
     * Display a simple alert dialog with the given text and title.
     * 
     * @param context
     *            Android context in which the dialog should be displayed
     * @param title
     *            Alert dialog title
     * @param text
     *            Alert dialog message
     */
    public void showAlert(Context context, String title, String text) {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);

        // set title
        alertDialogBuilder.setTitle( title);

        // set dialog message
        alertDialogBuilder
        .setMessage( text )
        .setCancelable(false)
        .setPositiveButton("OK",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                // if this button is clicked, close
                // current activity
                finish();
            }
        })
        .create().show();

    }
} 
```

此 java 文件检查 Internet 连接。如果没有可用的连接，应用程序将关闭。

```
package com.example.project;

import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

public class InternetConnection {

    public static boolean checkNetworkConnection(Context context) {

        ConnectivityManager connectivityManager = (ConnectivityManager) context
                .getSystemService(Context.CONNECTIVITY_SERVICE);

        boolean infoResult = false;
        boolean wifiResult = false;
        boolean mobileResult = false;

        try {
            NetworkInfo info = connectivityManager.getActiveNetworkInfo();
            if (info == null) {
                return false;
            } else {
                infoResult = info.isConnectedOrConnecting();
                }

            NetworkInfo wifi = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
            if (wifi == null) {
                return false;
            } else {
                wifiResult = wifi.isConnectedOrConnecting();
                }

            NetworkInfo mobile = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
            if (mobile == null) {
                return false;
            } else {
                mobileResult = mobile.isConnectedOrConnecting();
                }

            // if(wifi.isConnectedOrConnecting()||mobile.isConnectedOrConnecting())

        } catch (NullPointerException nullPointException) {
            System.out.println( nullPointException.getMessage() );
        }

        return infoResult||wifiResult||mobileResult;
    }
} 
```

# api - 哪个 PayPal API 权限？

> ID：10773187
> 
> 赞同：0
> 
> 时间：2012-05-27T10:17:46.630
> 
> 标签：api, paypal, payment-services

我正在构建一个应用程序，它会不断检查某个条件……当满足该条件时，它会做一些事情，然后向我的用户收取 30 美元的费用。所以我需要两件事：

1.  我需要我的用户授权我向他们的帐户收费。

2.  我需要知道在执行服务后如何向他们收费。

我认为一旦我知道要请求哪个权限（我已经有了请求权限和存储访问令牌的代码），我将能够弄清楚如何请求付款。所以我真的只需要＃1的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:53:00.340

查看 RECURRING_PAYMENTS。我不是 100% 清楚你想要做什么，但这听起来像是你需要的东西。

# android - 在 Android 3 上仅显示无线系统设置

> ID：10773188
> 
> 赞同：0
> 
> 时间：2012-05-27T10:17:52.223
> 
> 标签：android

此代码完美运行：

```
startActivity(new Intent(Settings.ACTION_WIFI_SETTINGS)); 
```

但 Android 3 还显示了另一种偏好。如何仅向用户显示无线设置？

UPD 此代码：

```
Intent intent=new Intent(Intent.ACTION_MAIN);
intent.setClassName("com.android.phone", "com.android.phone.Settings");
startActivity(intent); 
```

启动手机设置。wi-fi 是否有类似的东西（打开\关闭、设置 IP 地址等）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T07:54:59.547

您可以通过将以下附加内容添加到您的意图来仅显示无线设置片段

```
Intent i = new Intent(Settings.ACTION_WIRELESS_SETTINGS);
i.putExtra(":android:show_fragment", "com.android.settings.wifi.WifiSettings");
i.putExtra(":android:no_headers", true);

startActivity(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:39:20.750

> 但 Android 3 还显示了另一种偏好。

您开始的活动是设置应用程序的一部分，不是您编写的。设置应用程序可以显示它想要的任何内容。对于平板电脑，“设置”应用程序通常会显示所有偏好，其中与您的`Intent`操作相关联的是当前选择的偏好。

> 如何仅向用户显示无线设置？

使用您自己实现的设置应用程序编写您自己的固件，并在用户的设备上安装该固件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T14:53:33.790

您只能使用此访问 Wifi 设置

```
Intent i = new Intent(WifiManager.ACTION_PICK_WIFI_NETWORK);
startActivity(i); 
```

额外选项（用于返回和下一步按钮）

```
Intent i = new Intent(WifiManager.ACTION_PICK_WIFI_NETWORK);
i.putExtra("extra_prefs_show_button_bar", true);
startActivity(i); 
```

# knockout.js - 无法使用两种方式绑定来使用 和一个 observableArray

> ID：10773190
> 
> 赞同：1
> 
> 时间：2012-05-27T10:18:12.653
> 
> 标签：knockout.js, knockout-2.0

我正在尝试将一个`<ul>`元素绑定到一个`observableArray`. 当`<ul>`视图模型已经在数组中有一些条目时，确实会被绑定。但是当我向属性动态添加条目时，它不会更新 UI。

我在以下位置创建了一个示例：http: [//jsfiddle.net/shardul/SZWPT/](http://jsfiddle.net/shardul/SZWPT/)

我刚刚开始使用 Knockout，无法弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:30:03.647

这是一个更正的小提琴：http: [//jsfiddle.net/jearles/SZWPT/3/](http://jsfiddle.net/jearles/SZWPT/3/)

我更正的行是：

```
this.nameList.push(this.nameToAdd()); 
```

当您这样做时，`this.nameList().push`您正在操作 observableArray 中的数组，它*不会*自动通知侦听器更改。通过推送到 observableArray 本身，立即通知侦听器并且 UI 将刷新。

# git - Git 忽略 - 应用程序日志

> ID：10773191
> 
> 赞同：1
> 
> 时间：2012-05-27T10:18:17.883
> 
> 标签：git, yii, gitignore

我有一个非常奇怪的问题，我想知道你对此的建议。

有时，当我将更改推送到远程服务器时，更改不会出现。我对远程机器执行 ssh 操作，执行 a `git status`，然后我看到：

> 修改：app/runtime/application.log

问题是，所有目录，现在还有那里的特定文件，都是 .gitignore 的目标。

```
/nbproject/
/app/runtime/
/public_html/assets/
/app/runtime/application.log*
/app/runtime/error.log* 
```

没有直接进行ftp，只使用了push和pull。

`app/runtime/application.log`也许它们是在实时站点上写入的东西，因此`application.log`与存储库中的不同，当这种情况发生时**git 拒绝 pull**，因为它会覆盖`application.log`到旧版本。

这可能发生在同一目录中的许多其他文件上。应用程序运行时可以由实时站点创建的文件。

我的问题是，我们怎样才能避免这种情况？为什么 .gitignore 在这里似乎无效？

ps - 如果我需要提供更多详细信息，例如服务器挂钩或其他内容，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T10:27:54.067

听起来您在应用规则*之前*`app/runtime/application.log`已添加到 git 。不会影响 git 对现有文件的感知，只会影响新创建的文件。*`.gitignore``gitignore`*

 *[`git rm --cached app/runtime/*`](https://stackoverflow.com/questions/1273108/how-do-i-git-rm-a-file-without-deleting-it-from-disk)应该从 git 的索引中删除日志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T10:28:01.883

来自`man gitignore`：

> gitignore 文件指定了 git 应该忽略的故意未跟踪的文件。**已经被 git 跟踪的文件不受影响**。

因此，如果您的`application.log`文件被添加到存储库中，那么`gitignore`将什么也不做。

解决方案是从存储库中删除这些文件。你真的需要同步日志文件吗？

```
git rm --cached app/runtime/application.log 
```

等等。*

# c# - 是否可以通过服务器端检索 Facebook 好友列表？

> ID：10773193
> 
> 赞同：0
> 
> 时间：2012-05-27T10:18:42.540
> 
> 标签：c#, .net, facebook, facebook-graph-api

我不知道如何开始使用 Facebook API 检索我的 Facebook 朋友。我已阅读[Graph API 文档](https://developers.facebook.com/docs/reference/api/)。

其次，我正在做 TDD，所以我想从我的测试用例开始。

首先，这些将是集成测试，因为我必须集成现实生活中的 Facebook api。之后，我将模拟这些测试以使它们成为单元测试。

所以这就是我被卡住的原因。请假设我有一个 Facebook 帐户（例如电子邮件 + 密码），这样我就可以进行身份​​验证，然后使用访问令牌来获取我的朋友。

### 更新：

我也确实已经设置了一个 FB 应用程序（例如应用程序 ID/应用程序密码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:53:43.463

要获取朋友列表或代表用户的任何其他 api 请求，您需要做的第一件事是对用户进行身份验证并获取用户访问令牌。
有两种身份验证流程：

*   [Client-Side](http://developers.facebook.com/docs/authentication/client-side/)：将产生一个短暂的访问令牌（在几个小时内到期），然后您可以使用[新的 endpoint](http://developers.facebook.com/roadmap/offline-access-removal/)将其延长（在服务器端）长期存在。
*   [服务器端](http://developers.facebook.com/docs/authentication/server-side/)：使用长寿命访问令牌的结果大约 60 天。

使用 TDD 可能很难做到这一点（至少一开始是这样），因此您可能希望使用以下 facebook 工具之一为您生成访问令牌：

*   [访问令牌工具](https://developers.facebook.com/tools/access_token/)：为您提供“绑定到您自己用户的所有应用程序的访问令牌”列表。对于每个应用程序，您都会获得一个用户令牌和一个应用程序令牌。
*   [Graph API Explorer](http://developers.facebook.com/tools/explorer)：在右上角选择您的应用程序，然后单击“获取访问令牌”按钮，然后选择您需要的权限并批准它，当对话框关闭时，您将在该字段中看到访问令牌。

使用您获得的访问令牌，您可以开始查询 api。[要获取好友列表，只需按照用户对象](http://developers.facebook.com/docs/reference/api/user/#friends)文档的好友连接中的说明
发出请求。`me/fiends`

我不是 C# 开发人员，但我知道这个[用于 Facebook 的 C# SDK](http://csharpsdk.org/)，它应该（像所有其他 facebook SDK 一样）已经为您实现了大部分工作，用于发送 api 请求和解析返回的数据。
快速浏览一下他们的[入门文档](http://csharpsdk.org/docs/web/getting-started)，它应该类似于：

```
var accessToken = "THE ACCESS TOKEN YOU HAVE";
var client = new FacebookClient(accessToken);
dynamic me = client.Get("me/friends");
... 
```

# database - 数据库同步

> ID：10773197
> 
> 赞同：6
> 
> 时间：2012-05-27T10:19:24.313
> 
> 标签：database, delphi, database-replication

最近我的客户问我是否可以远程使用他们的应用程序，与本地网络和公司服务器断开连接。

一种解决方案是将数据库放在云中，但与数据库的连接以及云和互联网连接必须始终可用。并非总是如此。

所以我的问题是 - 是否有任何数据库同步系统或同步库，以便我可以与本地数据库断开连接，当我连接时同步我所做的更改并接收其他人所做的更改？

## 更新：

该应用程序在 Windows (7/xp) 下（暂时）

它在德尔福 2007 win32 中

所有客户端都需要具有读/写访问权限

所有客户端都有互联网连接，但并不总是开启

安全性并不重要，但同步服务应该加密通信

当存在公司网络时，系统应同步并使用服务器数据库，而不是本地数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T00:58:53.060

Java 世界中有一些可用的产品（SymmetricDS lgpl 许可证）——除了实际上是一个工作系统之外，它还记录了它是如何实现同步的。连接到任何支持 jdbc 的数据库。. 有一个专业版，但用户指南（可下载的 pdf）为您提供了 db 架构以及推拉同步的规则。如果您想构建自己的，这很有用。

顺便说一句，有一个数据复制所以标签会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:28:24.040

我相信[RemObjects DataAbstract](http://wiki.remobjects.com/wiki/Data_Abstract_for_Delphi)通过使用他们所谓的[Briefcases](http://wiki.remobjects.com/wiki/Briefcases_Sample_%28Delphi%29)允许离线模式和同步。还涵盖了您的所有其他要求（安全性、加密连接等）。

这不是一个简单的替换，思考，并且可能需要对您的应用程序进行广泛的重写/重构。有很多好处，想；可以/应该在服务器上执行业务规则（真正的安全性）、可编写脚本的业务规则、多平台架构等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T14:43:25.083

在考虑这样的解决方案时，您会遇到很多问题。首先，有很多可能的解决方案，例如：

*   在数据库中使用数据库复制来模拟每次更新（如“热”备份）
*   构建应用程序以定期（每晚）复制数据库
*   使用第三方工具（我想这就是你要问的）

使用复制服务，连接不必*总是*处于打开状态。当连接不可用时记录对数据库的更改，然后在可以发送时应用它们。

但是，当您离开公司网络时，还有很多其他问题。数据和访问权限的安全性如何？您是否有其他选择，例如更容易从网络中访问数据库？用户只需要对数据库的读取权限还是读写权限？是否需要同时访问两个版本。两者会同时更新吗？

您可能还有其他比将数据库迁移到云端更安全的选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T10:27:17.423

一种免费的可能性是 Microsoft Sync Framework：http: [//msdn.microsoft.com/en-us/sync/bb736753.aspx](http://msdn.microsoft.com/en-us/sync/bb736753.aspx)

您可能会使用它，但您需要提供有关您的应用程序和操作环境的更多详细信息才能确定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-11T19:11:48.167

是否可以共享 .mdb 之类的数据库并正常工作？我尝试但有时数据库从 DB 更改为 DB1 的文件我使用 delphi Xe4 和 Google Drive。谢谢

# ios - MPMoviePlayerViewController 观察到“_serverConnectionDiedNotification”

> ID：10773198
> 
> 赞同：4
> 
> 时间：2012-05-27T10:19:28.443
> 
> 标签：ios, avplayer

在使用 MPMoviePlayerViewController 时，我收到如下错误通知和应用程序崩溃。

> _serverConnectionDiedNotification。Info -- notification=Error Domain=AVFoundationErrorDomain Code=-11819 "Cannot Complete Action" UserInfo=0x5dfcb0 {NSLocalizedRecoverySuggestion=稍后再试。, NSLocalizedDescription=Cannot Complete Action}, AVPlayer = , currentTime = 0.00
> 
> 2012-05-27 15:32:41.777 AnswerMania[3885:707] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“一个 AVPlayerItem 不能与多个 AVPlayer 实例关联”

这并不总是发生。我已经观察到所有 MpMoviePlayerController 通知，但无法观察到此错误。它与服务器连接有关吗？如何观察 serverConnectionDiedNotification？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:52:56.853

当播放视频时出现日历提醒时，我遇到了类似的问题。通过不使用应用程序音频会话为我解决了这个问题：

```
moviePlayer.useApplicationAudioSession = NO; 
```

编辑：它与以下错误有关，没有看到 _serverConnectionDiedNotification：

```
AVPlayerItem cannot be associated with more than one instance of AVPlayer 
```

# html - 选择一个 div 容器

> ID：10773199
> 
> 赞同：1
> 
> 时间：2012-05-27T10:19:56.410
> 
> 标签：html, css

如何使用 CSS 选择 likebtn 容器？

![选择器截图](../Images/200b873f910d5e2bba79ba57f24e7ec1.png)

我尝试了几种组合，例如“#meta #likebtn{}”或“#likebtn{}”，但都不起作用。为什么这行得通？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T10:27:54.773

首先，尽可能直接地定位它：

```
#likebtn {
    /* desired style changes here */
} 
```

然后打开您的开发者工具并检查样式检查器；如果您的 CSS 规则在某处被覆盖，它会告诉您使用哪个选择器覆盖它。

例如，这可能会覆盖您的规则：

```
#meta #likebtn 
```

下一步是：

*   *在之前的声明之后*使用相同的选择器声明您的规则，或者，
*   更精确。

# java - 变量解引用错误未解决

> ID：10773211
> 
> 赞同：3
> 
> 时间：2012-05-27T10:21:38.357
> 
> 标签：java, console-application

我正在尝试用java编写一个程序，它可以计算一系列数字中“1”的数量。

> 例如：如果我们从 1 - 20 范围内查看，我们将得到**12 个** 1 的
> **1、2,3** .... 9、1 **0、1** **1** .... **1** **9、20**。

这是我写的代码。

```
public class Count_no_of_ones
{
public static void main( String args[] )
{
    int count = 0;

    for ( int i = 1; i<=20; i++ )
    {
      int a=i;
      char b[] = a.toString().toCharArray(); //converting a number to single digit array

      for ( int j = 0; j < b.length; j++ )
      {
        if( Integer.parseInt(b[j]) == 1 )
        {
            count++; // checking and counting if the element in array is 1 or not.
        }
      }
    }

    System.out.println("number of ones is : " + count);
} 

} 
```

我在编译时遇到两个错误。

```
D:\Programs\Java>javac Count_no_of_ones.java

Count_no_of_ones.java:10: error: int cannot be dereferenced
char b[] = a.toString().toCharArray(); //converting a number to single digit array
            ^
Count_no_of_ones.java:14: error: no suitable method found for parseInt(char)
if( Integer.parseInt(b[j]) == 1 )
           ^
method Integer.parseInt(String) is not applicable
(actual argument char cannot be converted to String by method invocation conversion)

method Integer.parseInt(String,int) is not applicable
(actual and formal argument lists differ in length)

2 errors
D:\Programs\Java> 
```

你能解释一下我在代码中做错了什么吗？我从来没有遇到过问题，`Integer.parseInt`这个取消引用问题对我来说是新的。我只是在awt课上听说过，但我从未真正面对过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T10:24:54.440

您不能在 Java 中调用原始类型的方法。改用静态方法`Integer.toString`：

```
char b[] = Integer.toString(a).toCharArray(); 
```

您实际上也不需要转换为字符数组。您可以使用[`charAt`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt%28int%29).

* * *

该方法`parseInt`接受一个字符串，而不是一个字符，所以这一行不起作用：

```
if( Integer.parseInt(b[j]) == 1 ) 
```

而是与 char 进行比较`'1'`：

```
if (b[j] == '1') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T10:52:38.737

在这里，这应该为您完成：

```
public class Count_no_of_ones
{
public static void main( String args[] )
{
    int count = 0;

    for ( int i = 1; i<=20; i++ )
    {
      int a=i;
      char[] b = (new Integer(i)).toString().toCharArray();

      for ( int j = 0; j < b.length; j++ )
      {
        if( b[j] == '1' )
        {
            count++; // checking and counting if the element in array is 1 or not.
        }
      }
    }

    System.out.println("number of ones is : " + count);
} 

} 
```

# python - 可以将运算符重载为python中的类方法吗？

> ID：10773213
> 
> 赞同：6
> 
> 时间：2012-05-27T10:21:46.030
> 
> 标签：python, class, operator-overloading, peewee

为了使扩展看起来非常干净，我试图在 python 中实现“>>”运算符作为类方法。我不知道该怎么做。我不想创建一个实例，因为我真的在类本身上进行操作。

```
>>> class C:
...     @classmethod
...     def __rshift__(cls, other):
...         print("%s got %s" % (cls, other))
...
>>> C.__rshift__("input")
__main__.C got input
>>> C() >> "input"
__main__.C got input
>>> C >> "input"
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for >>: 'classobj' and 'str' 
```

背景资料：

我正在尝试在 peewee ORM（类似于 Django）中实现视图。Peewee 允许您将数据库表及其关系定义为类，如下所示：

```
class Track(Model):
    title = CharField()
    artist = ForeignKeyField(Artist)

class Artist(Model):
    name = CharField(unique = True)
    location = ForeignKeyField(Location)

class Location(Model):
    state = CharField(size = 2)
    city = CharField() 
```

注意：为了清楚起见，顺序颠倒了。

我正在尝试通过实现视图来扩展它。最困难的部分之一是设置一个干净的方式来指示连接。到目前为止，我已经实现了以下内容：

```
class Song(View):
    title = Track.title
    artist = Track.artist >> "name"
    state = Track.artist >> "location" >> "state" 
```

这没关系，但我真的很想消除“。” 进一步简化：

```
class Song(View):
    title = Track >> "title"
    artist = Track >> "artist" >> "name"
    state = Track >> "artist" >> "location" >> "state" 
```

您更愿意使用哪个？或两者？

作为旁注，任何人都可以想到一种指示向后加入的好方法吗？像下面这样的东西对我来说有点尴尬：

```
class LocWithSong(View):
    state = Location >> "state"
    title = Location >> Track.title 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T10:24:55.113

[在元类上](https://stackoverflow.com/questions/4932438/how-to-create-a-custom-string-representation-for-a-class-object)定义方法。

```
class MC(type):
  def __rshift__(self, other):
    return something(self, other)

class C(object):
  __metaclass__ = MC

print C >> None 
```

# parsing - Python 3 - 使用时间偏移解析时间字符串

> ID：10773214
> 
> 赞同：2
> 
> 时间：2012-05-27T10:21:47.607
> 
> 标签：parsing, datetime, python-3.x, timezone

如何`Sun May 27 13:02:04 +0200 2012`使用 python3 将时间字符串（例如 UTC）解析为 UTC 元组？我能得到的最接近的是`time.strptime(str, '%a %b %d %H:%M:%S %z %Y')`，但似乎偏移量已被解析但被忽略了。上面的例子被解析为：

```
time.struct_time(tm_year=2012, tm_mon=5, tm_mday=27, tm_hour=13, tm_min=1, tm_sec=35, tm_wday=6, tm_yday=148, tm_isdst=-1) 
```

但我预计`tm_hour=11`。

相关：[将字符串时间戳（带时区偏移）转换为本地时间。. ? python](https://stackoverflow.com/questions/3286817/convert-string-timestamp-with-timezone-offset-to-local-time-python) ,[在 Python 中解析时间字符串](https://stackoverflow.com/questions/10494312/parsing-time-string-in-python)。两者的答案都建议使用[dateutil](http://labix.org/python-dateutil)，但如果可能的话，我更喜欢使用标准库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:35:58.133

tm_hour=11 是不正确的。无论偏移量是多少，时间戳中的时间都是 13:02:04。

您想要做的是将该时间戳转换为 GMT 时间，标准库不会为您执行此操作。所以你只需要自己提取偏移量（这很简单），然后从时间中减去它。

我还建议您为此使用 datetime 库，日期/时间操作在那里更容易，您可以轻松地从偏移量创建一个 timedelta 对象并从 datetime 对象中减去它。

# php - Joomla - 根据文章更改模板位置

> ID：10773218
> 
> 赞同：0
> 
> 时间：2012-05-27T10:23:04.800
> 
> 标签：php, joomla, joomla-template

我需要根据加载的文章更改 Joomla 模板上的一些位置。

例如：我需要为主页使用不同的位置集，为内页使用不同的位置集。还有一些常见的位置（菜单、页眉、页脚等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T13:41:22.863

好吧这有点棘手，您可以获取当前页面名称（菜单名称），然后为您在模板源中创建的每个“页面”进行 if 语句，我将举一个例子......假设您有一个联系人页面，如果用户在联系页面上，您想为其添加位置...

```
<?php 
    $currentpage = JSite::getMenu()->getActive()->name ;

    // in joomla 2.5
     $currentpage = JSite::getMenu()->getActive()->title; 

    if($currentpage == "Contact"){
        echo '<jdoc:include type="modules" name="Contact" />';
    }
?> 
```

所以你必须锻炼你的整个模板并预测每个页面，这是一个简单的例子，你可以扩展它......

# gnuplot - 从 gnuplot 中获取拟合数据

> ID：10773220
> 
> 赞同：0
> 
> 时间：2012-05-27T10:23:20.387
> 
> 标签：gnuplot, octave

我经常使用 Octave 创建可以从实验室结果中绘制的数据。然后将该数据与 gnuplot 中的某些功能相匹配：

```
f1(x) = a * exp(-x*g);
fit f1(x) "c_1.dat" using 1:2:3 via a,g 
```

这创建了一个`fit.log`：

```
*******************************************************************************
Tue May  8 19:13:39 2012

FIT:    data read from "e_schwach.dat" using 1:2:3
        format = x:z:s
        #datapoints = 16
function used for fitting: schwach(x)
fitted parameters initialized with current variable values

 Iteration 0
 WSSR        : 12198.7           delta(WSSR)/WSSR   : 0
 delta(WSSR) : 0                 limit for stopping : 1e-05
 lambda   : 14.2423

initial set of free parameter values

mu2             = 1
omega2          = 1
Q2              = 1

After 70 iterations the fit converged.
final sum of squares of residuals : 46.0269
rel. change during last iteration : -2.66463e-06

degrees of freedom    (FIT_NDF)                        : 13
rms of residuals      (FIT_STDFIT) = sqrt(WSSR/ndf)    : 1.88163
variance of residuals (reduced chisquare) = WSSR/ndf   : 3.54053

Final set of parameters            Asymptotic Standard Error
=======================            ==========================

mu2             = 0.120774         +/- 0.003851     (3.188%)
omega2          = 0.531482         +/- 0.0006112    (0.115%)
Q2              = 17.6593          +/- 0.7416       (4.199%)

correlation matrix of the fit parameters:

               mu2    omega2 Q2     
mu2             1.000 
omega2         -0.139  1.000 
Q2             -0.915  0.117  1.000 
```

有什么方法可以将参数及其错误返回 Octave？我的意思是我可以编写一个 Python 程序来解析它，但我希望避免这种情况。

# 更新

这个问题不再适用于我，因为我现在在我的实验室工作中使用 Python 和 matplotlib，它可以通过一个程序完成所有这些工作。如果其他人有同样的问题，我会留下这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T11:58:39.283

I don't know much about the gnuplot-Octave interface, but what can make your (parsing) life easier is you can:

```
set fit errorvariables
fit a*x+g via a,g
set print "fit_parameters.txt"
print a,a_err
print g,g_err
set print 
```

Now your variables and their respective errors are in the file "fit_parameters.txt" with no parsing needed from python.

from the documentation on `fit`:

> If gnuplot was built with this option, and you activated it using `set fit errorvariables`, the error for each fitted parameter will be stored in a variable named like the parameter, but with `_err` appended. Thus the errors can be used as input for further computations.

# python - 具有非关键字参数和关键字参数的函数

> ID：10773223
> 
> 赞同：0
> 
> 时间：2012-05-27T10:23:57.577
> 
> 标签：python

如果我声明一个带有非关键字参数（如元组）和关键字参数（如字典）的函数，它们是否已声明？

例如：

```
def someFunc(a, *nkw, **kwa):
    nkwList = []
    kwList  = []
    for i in nkw:
        nkwList.append(i)
    for j in kwa:
        kwList.append(j)
    print a, nkwList, kwList 
```

输入：

```
someFunc(1) 
```

输出：

```
1 [] [] 
```

如您所见，即使我没有传递元组和字典，当我循环遍历 nkw 和 kwa 时，我也没有得到 Index out of range 错误。据我了解，我认为 *nkw 和 **kwa 是在函数声明本身中创建的。

谁能帮我理解这个概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:26:08.000

元组和字典**总是**被创建，即使它们是空的（即它们没有传递任何东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:30:18.267

`nkw``kwa`当然作为空列表/字典传递。做其他事情会完全违背他们的目的，因为您永远无法安全地访问它们，您不必总是检查它们是否存在。

您可能会将其与默认参数混淆。例如：

```
def someFunc(x=[]):
    pass 
```

这里作为默认值的列表`x`在函数声明时被实例化，因此在函数的所有调用中都是相同的。

# jquery - 在多文件 ajax 上传解决方案之后，如果有服务器端组件，理想情况下有 ASP.NET MVC 示例

> ID：10773228
> 
> 赞同：0
> 
> 时间：2012-05-27T10:24:38.780
> 
> 标签：jquery, ajax, asp.net-mvc, image

希望同时上传多个图像文件，有或没有预览都可以。只需要一种简单无忧的方式即可在服务器上投放大量图像，而无需浏览每个图像，因此拖放输入字段将是理想的。在保存提交之前进行裁剪等任何额外内容都将是一个奖励。

此外，如果在保存/提交之前使用预览，是否可以使用 javascript 生成预览缩略图，而无需先将图像发送到服务器以调整大小？因此，在屏幕上抛出多个图像，在不向服务器发出 ajax 调用的情况下获得它们的预览，并且只有在按下保存后所有这些图像都会开始上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:24:59.353

you can use [HTML5 FILE API](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications#Example%3a_Showing_thumbnails_of_user-selected_images) to get the preview of images to be uploaded using javascript.

And you can select multiple images at once before uploading.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T10:34:43.360

我的一位同事早些时候写了一篇关于此基础的文章：

[在 mvc3 应用程序中使用 HTML5、画布和文件 api 上传文件](http://www.novanet.no/blog/yngve-bakken-nilsen/dates/2012/2/uploading-files-with-html5-canvas-and-file-api-in-an-mvc3-application/)

# ios - iOS 的社交认证和发布库

> ID：10773230
> 
> 赞同：1
> 
> 时间：2012-05-27T10:24:42.167
> 
> 标签：ios, twitter, facebook-social-plugins

是否有开源或商业图书馆可以更轻松地进行身份验证和发布到多个社交网络？我们正在开发一个 iPhone 应用程序，它将被 Facebook、Twitter 和 Linkedin 用户使用，并且将来 Google 将被添加到提供商列表中，因此我们希望避免为这些网络中的每一个进行开发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:00:41.193

我认为 ShareKit 是您正在寻找的：

[http://getsharekit.com/](http://getsharekit.com/)

该网站尚未提及任何 LinkedIn 支持，但看起来有人在这里提交了拉取请求：

[https://github.com/ideashower/ShareKit/pull/271](https://github.com/ideashower/ShareKit/pull/271)

# jquery - 使用 QUnit、JQuery 和 iframe 进行 UI 测试 - 如何等到新页面加载？

> ID：10773236
> 
> 赞同：5
> 
> 时间：2012-05-27T10:25:49.547
> 
> 标签：jquery, wait, qunit

我正在使用 QUnit 和 JQuery 并想测试我网站的用户界面。我的 webapp 驻留在 iframe 中。我想单击导航链接，然后等到新页面加载完毕，然后我想通过 JQuery 选择一些项目以确保加载了正确的页面。

如何做到这一点？

到目前为止，我阅读了有关 setTimeout()、delay()、ajaxSetup()、setInterval() 的信息：没有成功。

这是一个代码片段：

```
// Klick auf Unternehmen und vergleiche h1-Ueberschrift.
        test("Klick Unternehmen, checke Ueberschrift", function() {
            var mes = "test: Klick Unternehmen, checke Ueberschrift;";
            var exp = "Unternehmen";
            jQuery.ajaxSetup({ async: false }); //turn off async so tests will wait for ajax results
            jQuery('#testframe').attr('src', './../index/unternehmen/').delay(3000);
            var t = setTimeout('doNothing()', 2000);
            //alert('now');
            var act = jQuery('h1').eq(1);
            //var act = "Unternehmen";
            //console.log(mes);
            equal(act, exp, mes);
        }); 
```

更新：我能够通过 ajax 调用资源。无论如何仍然不知道如何调用 click() - wait() - compare()。

```
// Klick auf Unternehmen und vergleiche h1-Ueberschrift, Ajax S. 250
        test("Klick Unternehmen, checke Ueberschrift", function() {
            jQuery.ajax({
                url: "./../index/unternehmen/",
                async: false,
                success: function(response){
                    if (response){
                        jQuery('#ajaxcontent').html(response);
                    }
                },
                context: document.body,
                type: "POST"
            });
            var mes = "test: Klick Unternehmen, checke Ueberschrift;";
            var exp = "Unternehmen";
            var act = jQuery('#ajaxcontent h1').eq(0).text();
            equal(act, exp, mes);
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:29:48.153

你应该试试

```
$("#yourIframeID").load(function(){
    //do your testing stuff here..

}) 
```

还有一种异步测试的方法`QUnit`，但我不确定它是否适用于您的情况（`asyncTest( name, expected, test )`）

# .net - 如何加密字符串

> ID：10773237
> 
> 赞同：-2
> 
> 时间：2012-05-27T10:25:59.310
> 
> 标签：.net, vb.net, string, encryption

```
Parameters.ReferencedAssemblies.Add("System.dll")
Parameters.ReferencedAssemblies.Add("System.Data.dll")
Parameters.ReferencedAssemblies.Add("System.Windows.Forms.dll") 
```

是一种在 add() 值中加密“systems.dll”的方法吗？

像 Add(Char64+char45+...) 或任何方法？

```
 Dim Version = New Dictionary(Of String, String)
    Version.Add("CompilerVersion", "v2.0")

    Dim ICO As String = IO.Path.GetTempPath & "\iCompiler.ico"

    If Icon <> "" Then
        IO.File.Copy(Icon, ICO)
        Parameters.CompilerOptions &= " /win32icon:" & ICO
    End If

    cResults = Compiler.CompileAssemblyFromSource(Parameters, Source)

    If cResults.Errors.Count > 0 Then
        For Each CompilerError In cResults.Errors
            MessageBox.Show("Error: " & CompilerError.ErrorText, "", MessageBoxButtons.OK, MessageBoxIcon.Error)
        Next
    ElseIf cResults.Errors.Count = 0 Then

    End If
    If Icon <> "" Then : IO.File.Delete(ICO) : End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:59:14.893

您可以使用简单的 XOR 逻辑加密来获取字符串，一次获取一个字符，然后用一个密钥对其进行 XOR。输出将是加密字符。对字符串中的所有字符执行此操作。

XOR 运算符是 '^'

要取回原始字符串，请使用相同的密钥并与加密字符进行异或，以获取原始字符。

Google XOR 加密以获取更多信息。

# cappuccino - 禁用卡布奇诺中的视图

> ID：10773240
> 
> 赞同：2
> 
> 时间：2012-05-27T10:26:16.640
> 
> 标签：cappuccino

如何禁用 CPView？（以便用户在它仍然可见时无法与之交互）例如，当用户单击向服务器发送请求的东西并且它应该被禁用直到结果返回时，它很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T23:33:09.340

CPControls（作为 CPView 的抽象子类）包含一个 -setEnabled: 方法，大多数 UI 组件都从该方法继承。 [http://cappuccino.org/learn/documentation/interface_c_p_control.html#a68d3dc4f2d0a4fad8699fd5982cddc2d](http://cappuccino.org/learn/documentation/interface_c_p_control.html#a68d3dc4f2d0a4fad8699fd5982cddc2d)

CPViews 不包含这样的方法，因此在您的 CPView 子类中您需要编写自己的方法来启用和禁用。然后覆盖 -mouseDown: 以及您需要的任何其他内容（查看 CPResponder 的文档以获取完整列表）并像这样实现：

```
- (void)mouseDown:(id)sender
{
    if ([self isEnabled])
        [super mouseDown:sender];
} 
```

# javascript - jQuery image.onload 幻象事件触发

> ID：10773247
> 
> 赞同：1
> 
> 时间：2012-05-27T10:27:21.713
> 
> 标签：javascript, jquery

我偶然发现了这种疯狂的行为，其中 image.onload 被触发多次而不是一次。

解释这个太长了，所以这里是一个 jsfiddle 示例。

当您第一次单击时，一切似乎都很正常，但是在第二次单击后问题就开始了，并且每次单击它都会一次又一次地循环。

[http://jsfiddle.net/PP2dB/](http://jsfiddle.net/PP2dB/)

问题是如何让 image.onload 每次点击只触发一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:33:45.437

您实际上是在`g`函数中定义一个新事件，每次单击按钮时都会调用该事件。

只需在函数之外定义它，一切都应该按预期工作：http: [//jsfiddle.net/PP2dB/1/](http://jsfiddle.net/PP2dB/1/)

# android - Webview 打开 Youtube 但视频无法播放

> ID：10773254
> 
> 赞同：0
> 
> 时间：2012-05-27T10:27:58.187
> 
> 标签：android, webview, youtube

在我的应用程序中，我使用了 Web 视图到 YouTube 链接。链接打开，但是当我点击 Youtube 网站中的视频链接时，什么也没有发生。它没有显示任何错误或异常，但也没有播放视频

等：[http ://www.youtube.com/user/XXXX](http://www.youtube.com/user/XXXX)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:41:02.890

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/user/XXXX")); 
```

最好的方法是启动本机播放器来播放 youtube 文件或参考此[链接](http://webcache.googleusercontent.com/search?q=cache:1uvoM2bqKBcJ%3awww.helloandroid.com/tutorials/how-play-video-and-audio-android%20play%20video%20file%20in%20android&cd=2&hl=en&ct=clnk&source=www.google.com)在媒体播放器中播放。

# javascript - 表格不包括我写的 + 号

> ID：10773255
> 
> 赞同：2
> 
> 时间：2012-05-27T10:27:59.320
> 
> 标签：javascript, jquery

此代码会将表单中的信息提交到 php 文件，一切正常，但是当我写“你好，这是一个文本 + - *”时，它总是从我写的内容中删除“+”符号。不知道为什么，请各位大侠帮帮我

```
 $(document).ready(function(){
        $("form#submit").submit(function() {
        // we want to store the values from the form input box, then send via ajax below
        var fname     = $('#fname').attr('value');
        var lname     = $('#lname').attr('value'); 

            $.ajax({
                type: "POST",
                url: "Mail.php",
                data: "fname="+ fname + "&lname=" + lname,
                success: function(){
                    $('form#submit').show();
                    //$('form#submit :input').val("");
                    $('div.success').fadeIn();
                }
            });
        return false;
        });
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T10:30:56.873

更改此行：

```
data: "fname="+ fname + "&lname=" + lname, 
```

到：

```
data: "fname="+ encodeURIComponent(fname) + "&lname=" + encodeURIComponent(lname), 
```

您需要转义特殊字符以在 URL 字符串中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:31:47.403

那是因为加号被转换为空格。用于`encodeURIComponent`转义输入。**始终**使用某种转义来避免注入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T10:31:56.483

或者你可以使用[`serialize()`](http://api.jquery.com/serialize/)：

```
$.ajax({
    ...
    data: $(this).serialize()
    ...
}); 
```

这将获取表单中的所有 :input 元素并正确编码它们以发送到远程服务器。你也可以这样做：

```
data: {
    fname: fname,
    lname: lname
} 
```

jQuery 知道您正在尝试发送一个值数组，并会自动对其进行转义。

顺便说一句，这不是很便携：

```
var fname = $('#fname').attr('value'); 
```

更好的方法是这样的：

```
var fname = $('#fname').val(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T10:32:25.297

if`fname`和`lname`are 文本框，为什么不使用`.val()`来检索它们？

```
var fname = $('#fname').val();
var lname = $('#lname').val(); 
```

或者更好的是，`.serialize()`直接在 ajax 上使用表单：

```
$(function () {
    $("form#submit").submit(function () {
        var form = $(this)
        $.ajax({
            type: "POST",
            url: "Mail.php",
            data: form.serialize() //turns the form data into a query string
            success: function () {
                $('form#submit').show();
                $('div.success').fadeIn();
            }
        });
        return false;
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T12:24:01.423

```
var email = $('#email').val();
var data = 'email=' + encodeURIComponent(email);
var url = 'test.php'
var type = 'post'
var success = function(output){}
var error = function(){}
        $.ajax({
            url:url,
            type:type,
            data:data,
            success:success,
            error:error
        }); 
```

对我很好

# listbox - Windows Phone ListBox/ScrollView 控件不会更新

> ID：10773257
> 
> 赞同：0
> 
> 时间：2012-05-27T10:28:03.427
> 
> 标签：listbox, windows-phone-7.1, scrollviewer

我是 Windows Phone 7.1 开发的新手。我在 VB.NET 中工作。

我正在开发与“[如何：为 Windows Phone 创建基本本地数据库应用](http://msdn.microsoft.com/en-us/library/hh202876%28v=vs.92%29.aspx)程序”类似的应用程序。

我已经设法使用上面的示例编写了添加和删除代码。

但是更新代码......当我返回显示所有数据的页面时，它不会更新为新信息。信息已保存（已提交），因为当我在单独的页面中查看记录详细信息时，它们就在那里。

显示所有数据的 XAML 页面代码如下：

```
<ScrollViewer  Margin="12,148,12,90" Name="scrollViewerVendors">
        <ItemsControl ItemsSource="{Binding AllVendors}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Border BorderThickness="1" CornerRadius="12" Margin="2">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock Text="{Binding Name}" FontSize="28" />
                            </StackPanel>
                            <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock Text="{Binding Address}" />
                            </StackPanel>
                            <Button Grid.Row="0" Grid.Column="1" Grid.RowSpan="2" 
                                x:Name="EditVendorButton" 
                                BorderThickness="1" 
                                Click="EditVendorButton_Click">
                                <Image Source="/Images/AppBar/appbar.edit.rest.png" />
                            </Button>
                            <Button 
                                Grid.Row="0" Grid.Column="2" Grid.RowSpan="2" 
                                x:Name="DeleteVendorButton" 
                                BorderThickness="1" 
                                Click="DeleteVendorButton_Click">
                                <Image Source="/Images/AppBar/appbar.delete.rest.png"  />
                            </Button>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </ScrollViewer> 
```

我在编辑页面中编写的更新代码：

```
Using DemoAppDB As New DemoAppContext.DemoAppContext("Data Source=isostore:/DemoApp.sdf")
            Dim CurrentVendor = From VendorDetails In DemoAppDB.Vendors Where VendorDetails.VendorID = CInt(sVendorID) Select VendorDetails

            For Each Vendor In CurrentVendor
                Vendor.Name = TextBox1.Text
                Vendor.Address = TextBox2.Text
                Vendor.ContactPerson = TextBox3.Text
                Vendor.Phone = TextBox4.Text
                Vendor.Email = TextBox5.Text
                Vendor.Notes = TextBox6.Text
            Next
            'Save changes to the database
            DemoAppDB.SubmitChanges()
        End Using 
```

VendorID 在页面之间成功传递。我已经检查过了。

数据库更新，但我似乎无法更新 ScrollView 记录。我也尝试过使用 ListView 控件。结果相同。

模型类实现 INotifyPropertyChanged、INotifyPropertyChanging。viewmodel 类实现 INotifyPropertyChanged。

如果您需要任何其他详细信息，请询问我。谢谢您阅读此篇！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:03:09.060

看过教程后，我会说你错过了

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
// Define the query to gather all of the to-do items.
var toDoItemsInDB = from ToDoItem todo in toDoDB.ToDoItems
                    select todo;

// Execute the query and place the results into a collection.
ToDoItems = new ObservableCollection<ToDoItem>(toDoItemsInDB);

    // Call the base method.
    base.OnNavigatedTo(e);
} 
```

对您而言，您将在哪里更新 AllVendors。

这里发生的是，在应用程序导航回主页后，它正在重新加载保存数据的 ObservableCollection。

# cakephp - 行为中的 cakephp beforeSave 回调无法正确保存数据

> ID：10773258
> 
> 赞同：0
> 
> 时间：2012-05-27T10:28:18.343
> 
> 标签：cakephp, before-save

控制器：

```
 $data =
            array(
                'ContentI18n' =>
                array(
                    0 =>
                    array(
                        'title' => 'first',
                        'author' => 'first',
                        'source' => 'sgfsdfrst',
                        'lang' => 'fa',
                    ),
                ),
                'Content' =>
                array(
                    'publish' => 1,
                    'type' => 3,
                    'pages' => 8,
                    'volume' => 7,
                    'modified' => '2012-05-27 14:16:37',
                    'created' => '2012-05-27 14:16:37',
                    'lang' => 'fa',
                ),
    );
$this->Content->create();
$this->Content->saveAll($data); 
```

模型：

```
public $hasMany = array(
    'ContentI18n' => array(
        'className' => 'ContentI18n',
    )
); 
```

行为中的 beforeSave 函数：

```
public function beforeSave(Model $model) {
    // Define the new Translate model
    App::uses($model->name . 'I18n', 'Model');
    $varI18n = $model->name . 'I18n';
    $modelI18n = new $varI18n;

    foreach ($model->data[$model->name] as $key => $data) {
        if (!in_array($key, $this->setting))
            $modelData[$model->name][$key] = $data;
        else
            $modelData[$model->name . 'I18n'][0][$key] = $data;
    }
    $modelData[$model->name . 'I18n'][0]['lang'] = $model->locale;
    $modelData[$model->name]['lang'] = $model->locale;
    $model->data = $modelData;

    //pr($model->data);
    return TRUE;
} 
```

每件事似乎都是因为当直接保存它时，它是用`saveAll`. 但是当我在行为中使用相同的数据结构时没有任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:00:30.963

我发现 beforeSave 回调不会被 saveAll 触发。为了在 saveAll 之前执行一些代码，我们必须覆盖模型中的 saveAll 函数。

```
public function saveAll($data, $options = array()) {
            /*
            your code you want execute before saving...
            */
    parent::saveAll($data, $options);
} 
```

对于其他保存方法，例如 saveMany、saveAssociated、... beforeSave 由它们触发。

# matlab - 用于远场衍射模拟的 2D FFT 中的频移操作顺序（使用 Matlab/Octave/Scipy）

> ID：10773264
> 
> 赞同：1
> 
> 时间：2012-05-27T10:29:56.923
> 
> 标签：matlab, scipy, signal-processing, fft, octave

在 Matlab/Octave/Scipy 中，在两个平面之间来回执行 2D 傅里叶变换后移动频率分量的正确方法是什么（输出平面是输入平面的远场衍射平面）？

假设我想在这两个平面之间运行迭代傅里叶变换算法，以计算全息图（应用于输入平面的相位延迟模式），以便在输出中获得给定的强度模式飞机。

设输入平面中的场称为 A，输出平面中的场称为 B。

所以 B 是 A 的傅里叶变换，A 是 B 的傅里叶逆变换（这来自 Franhauffer 衍射理论）。

问题是：我应该以什么顺序在连接两个平面的傅里叶变换之间使用命令 fftshift 移动频率分量？

似乎编写以下内容不起作用： B=fftshift(fft2(A)); A2=fftshift(ifft2(B));

这可能是一个常见问题，但我无法在任何地方找到答案..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:29:36.710

我不确定我是否理解您的用例，但一般目的`fftshift`是旋转输出，`fft`以使 DC（零频率）箱居中。所以通常的模式是：

```
X       = fft2(x);         % DC at X(1,1)
X_shift = fftshift(X);     % DC at X_shift(M/2+1,N/2+1)

% ... processing occurs here (Y_shift = foo(X_shift)) ...

Y       = ifftshift(Y_shift);
y       = ifft2(Y); 
```

# eclipse - 使用 quickassist 快捷方式调用时未显示 MarkerResolution

> ID：10773266
> 
> 赞同：0
> 
> 时间：2012-05-27T10:30:14.707
> 
> 标签：eclipse, eclipse-plugin

我正在开发一个 Eclipse 插件，在该插件中我创建了一个自定义资源标记和一个 markerResolution，以向 XML 文件添加快速修复。到目前为止一切正常，除了 quickFix 只显示在`Problem`Eclipse 视图中。在 XML 文件本身中使用打开的快速辅助弹出窗口`Ctrl+1`不显示快速修复。

标记定义可以在[这里](https://github.com/pulse00/Symfony-2-Eclipse-Plugin/blob/master/com.dubture.symfony.core/plugin.xml#L130)找到，markerResolution 就是[这个](https://github.com/pulse00/Symfony-2-Eclipse-Plugin/blob/master/com.dubture.symfony.ui/plugin.xml#L381)。

我是否需要实施任何其他扩展点才能使 quickFix 显示在快捷方式弹出窗口中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:50:58.057

我想我找到了解决方案。需要为带有临时配置的 XML 编辑器实现[editorConfiguration](https://github.com/pulse00/Symfony-2-Eclipse-Plugin/blob/master/com.dubture.symfony.ui/plugin.xml#L394)。

在此类中，您将解析 AnnotationModel 并检查您的标记。如果找到标记，则返回[ICompletionProposal](https://github.com/pulse00/Symfony-2-Eclipse-Plugin/blob/master/com.dubture.symfony.ui/src/com/dubture/symfony/ui/quickassist/QuickAssistProcessor.java#L84)

# java - 最小化主面板后JTable单元格颜色变化

> ID：10773269
> 
> 赞同：0
> 
> 时间：2012-05-27T10:30:42.757
> 
> 标签：java, swing, jtable

我制作了一个设置面板，在其中我通过在设置窗口中按下设置按钮来设置主表格单元格的颜色。有两个更大和更少的组合框按钮。大于组合框中值的值将以特定颜色着色，小于以相同方式着色。但是按下 后颜色不渲染`SET`，而是在最小化然后最大化主窗口后渲染。

下面是 actionPerformed() 方法：

```
public void actionPerformed(ActionEvent e) {
   if(e.getSource()==btnCancel)
    {
      MainUI1.isShowModel=true;
    //mf.setVisible(true);
      this.dispose();
     }
   if(e.getSource()==btnset)
   {
      // MainUI1.isShowModel=true;
      ColorSettings.setColor();
      validate();
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:08:00.977

尝试使用[Component.repaint](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#repaint%28%29)方法。另请参阅此问题[Java Swing revalidate() vs repaint()](https://stackoverflow.com/questions/1097366/java-swing-revalidate-vs-repaint)

# php - 网站的移动版本

> ID：10773270
> 
> 赞同：0
> 
> 时间：2012-05-27T10:30:45.470
> 
> 标签：php, mobile, browser, version, opera

我正在制作我的网站的移动版本，但我遇到了问题。我用谷歌搜索了很多，但我找不到任何东西。当我用opera mobile打开手机版时，手机版和屏幕一样大，如果我把它放大到100%，屏幕就变得太大了，我必须像我使用的一样滚动才能看到整个网站桌面版。如果我用诺基亚浏览器打开网站，手机版适合我的手机屏幕，看起来很酷。

每个建议都受到欢迎。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:52:56.303

尝试查看 CSS 媒体查询和视口元标记。

有关它的一些信息，尤其是从为歌剧开发的角度来看，可以在这些文章中找到

*   [http://dev.opera.com/articles/view/the-mobile-web-optimization-guide/](http://dev.opera.com/articles/view/the-mobile-web-optimization-guide/)
*   [http://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/](http://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/)
*   [http://dev.opera.com/articles/view/love-your-devices-adaptive-web-design-with-media-queries-viewport-and-more/](http://dev.opera.com/articles/view/love-your-devices-adaptive-web-design-with-media-queries-viewport-and-more/)

我特别敦促您查看有关视口的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:56:24.203

[jQuery Mobilee](http://jquerymobile.com/)是拥有移动版网站的好工具...

# javascript - JavaScript：取消选择时设置单选按钮的背景（单选按钮组）

> ID：10773274
> 
> 赞同：0
> 
> 时间：2012-05-27T10:31:45.080
> 
> 标签：javascript, html, radio-button

我正在尝试创建一个用于触摸屏设备的简单交互式表单。表单的大部分由 5 个一组的单选按钮组成（大约 37 组）。I have a label tag for each radio button, and when selected (clicked), the background-color property of the label is changed to a highlighted colour using this JavaScript within each label tag`OnClick="this.style.background='#5555ff';"`

我想在上面添加的是一个 JavaScript，如果在组内更改了选择，它将删除上面的内容。例如，用户选择了组 1 中的单选按钮 A，然后将其选择更改为组 1 中的单选按钮 B。此时，两个标签背景都将更改为定义的颜色。

HTML 表单由 PHP 动态创建，因此单选按钮名称、ID 和值会有所不同。

我自己尝试完成这个任务一直没有成功，而且似乎也没有一个简单`OnUnClick="xxx"`的。我在这里搜索了一个解决方案，但没有任何问题与我的匹配，尽管我尝试调整现有解决方案以解决类似问题但无济于事。

感谢您的阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:41:28.177

假设您的单选按钮被分组在这样的 div 中 -

```
<div class="radio-group">
    <INPUT TYPE=RADIO NAME="pizzasize" VALUE="S">small<BR>
    <INPUT TYPE=RADIO NAME="pizzasize" VALUE="M">medium<BR>
    <INPUT TYPE=RADIO NAME="pizzasize" VALUE="L">large<P>
</div> 
```

你可以在 jquery 中做这样的事情 -

```
$('input[type="radio"]').click(function(){
    var parentElement = $(this).parent();
    parentElement.find('input').css('background', '#000000'); //set to your neutral background for radio buttons
    $(this).css('background', '5555ff');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:44:48.650

干得好：

**HTML**

```
<html>
    <body>
        <div>
        <input type="radio" id="g1v1" name="g1" value="v1" checked="checked"/> <label for="g1v1">V1</label>
        </div>
        <div>
        <input type="radio" id="g1v2" name="g1" value="v2" /> <label for="g1v2">V2</label>
        </div>
        <div>
        <input type="radio" id="g1v3" name="g1" value="v3" /> <label for="g1v3">V3</label>
        </div>
        <div>
        <input type="radio" id="g1v4" name="g1" value="v4" /> <label for="g1v4">V4</label>
        </div>
    </body>
</html> 
```

**Javascript**

```
$(document).ready(function(){
    var selectedRadioColor = "yellow";
    var normalRadioColor = "gray";
    // For changing color while document loads
    $.each($(":radio"), function(){
        //alert( $(this).prop("id")+ $(this).prop("checked") );
        if($(this).prop("checked") == false)
        {
            $(this).parent().css("color", normalRadioColor);
        }
        else
        {
            $(this).parent().css("color", selectedRadioColor );
        }
    })
    // For updating color when user interacts with radio buttons
    $(":radio").click(function(){
        $("[name='"+$(this).prop("name")+"']").parent().css("color", normalRadioColor);
        $(this).parent().css("color", selectedRadioColor );

    })
}) 
```

这是现场演示的 jsfiddle 链接：http: [//jsfiddle.net/dharmavir/6UnDs/](http://jsfiddle.net/dharmavir/6UnDs/)

# java - 使用 Java 代码在 HTML 文件中运行 javascript 代码

> ID：10773276
> 
> 赞同：-3
> 
> 时间：2012-05-27T10:31:48.273
> 
> 标签：java, javascript, html

我希望能够使用 Java 代码在 HTML 文件中运行 javascript 代码。正在使用 Java 代码下载 HTML 文件，但我无法运行加载页面并创建新元素后应执行的 Javascript 代码。比如对于：

```
<body onbeforeunload="unloadHandler1(event);" onUnload="unloadHandler();"> 
```

该函数`unloadHandler1(event)`旨在运行，但使用 Java 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:05:51.613

我认为 OP 想用 Java 或类似的东西编写自己的浏览器。

简单的部分是

1.  使用`URL`类下载页面代码，以及
2.  使用一些富文本控件显示页面，如果它只包含简单的 HTML 代码。

不幸的是，实现浏览器所需的其他一切都不是**简单**的。

为了运行页面中包含的 javascript，您需要一个完整的 javascript 解释器（或类似工具）；并且解释器可能必须与页面的 HTML（更准确地说：DOM）进行交互才能修改它。

最后，要完全解释 www 页面，您将需要一个*完整的浏览器引擎*。如果Java中存在一个，您可以使用它...

# ajax - 在 Raphael js 中获取数据的 Ajax 请求

> ID：10773283
> 
> 赞同：0
> 
> 时间：2012-05-27T10:32:59.213
> 
> 标签：ajax, raphael

我想发送一个 ajax 请求以在我的圈子的鼠标悬停事件上加载一些数据（json），并在我的圈子上方的小狗窗口中显示服装数据。知道如何处理吗？

```
r.circle(100, 100, 50).attr({
    fill: "CadetBlue",
    stroke: "black"
}).mouseover(function (e) {
    var request = new XMLHttpRequest();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:40:24.203

您可以像这样执行 ajax 查询：

```
r.circle(100, 100, 50).attr({
    fill: "CadetBlue",
    stroke: "black"
}).mouseover(function (e) {
    var httpRequest = new XMLHttpRequest();
    httpRequest.onreadystatechange = function() {
        if (httpRequest.readyState === 4) {
            if (httpRequest.status === 200) {
                var msg = JSON.parse(httpRequest.responseText);

                // do stuff, for example show a popup

            } else {

                // fail

            }
        }
    };
    httpRequest.open('GET', url);
    httpRequest.send();
}); 
```

# php - 如何仅访问电子邮件的当前部分

> ID：10773284
> 
> 赞同：0
> 
> 时间：2012-05-27T10:33:17.043
> 
> 标签：php, email, web, imap

我正在使用 imap_xxxx 函数来阅读电子邮件正文。我的问题是只找出电子邮件正文的当前部分而不是完整的电子邮件。当用户回复电子邮件时，它不仅包含他的回复，还包含完整的邮件链。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:41:32.143

这没有标准 - 电子邮件只是文本墙、引用文本、来自先前消息的引用文本的一部分。电子邮件没有“当前部分”，因为没有分隔符来区分哪个是哪个。

但是有一些模式：很多时候，前面的电子邮件部分会以“xyz write on ....”开头。其他电子邮件客户端将在先前的对话之前使用`>`字符或缩进块。不过，这里没有什么确定的。

您必须自己开始解析这些部分（或找到一个可以解析的类）。这是可能的——Facebook 在解析回复 Facebook 消息的电子邮件时会这样做。问题是你需要付出多少努力。

# qt - Qt 使用 QTransform 组合两个图像

> ID：10773286
> 
> 赞同：3
> 
> 时间：2012-05-27T10:33:44.530
> 
> 标签：qt, image-processing, linear-algebra, qimage

我面临一个可能很容易解决的问题，但我没有做对：我有两个 QImage，一个固定大小的背景图像`imgBg`和第二个 QImage `imgFg`，应该使用仿射变换进行变换，然后在上绘制（和剪辑）背景图像。

仿射变换如下：

*   围绕原点缩放图像（统一缩放）
*   围绕原点旋转图像
*   将前景图像平移到背景图像上的某个参考位置，使前景图像中心在参考位置上。

这是我到目前为止所做的：

```
// Setup transform
QTransform trans;
trans.translate(-imgFg.width()/2, -imgFg.height()/2); // move center of image to origin
trans.scale(scaleFac, scaleFac);
trans.rotate(angleDegrees);
trans.translate(imgFg.width()/2, imgFg.height()/2);

// Transform foreground image
imgFg = imgFg.transformed(trans);

// Paint on background image
QPointF referencePos(imgBg.width()/3, imgBg.height()/2); // some reference position
QPainter painter(&imgBg);
painter.drawImage(referencePos - QPointF(imgFg.width()/2, imgFg.height()/2), imgFg); 
```

只要我只更改参考位置，一切正常。使用缩放和/或旋转时，图像也会正确缩放和旋转，但未放置在正确的位置（前景的图像中心与参考点不匹配）。转换管道有问题吗？我犯错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T12:46:04.783

您需要颠倒您在`QTransform`. 顺序必须与*直觉思维*相反。这与线性代数中变换矩阵的矩阵乘法有关。（变换矩阵[的基础](http://en.wikipedia.org/wiki/Change_of_basis)改变......）问题是变换适用于源坐标系，这有点不直观。

所以请记住：每当您想应用**多个**转换时，请按照**您对图像所做的****相反**顺序进行。

 **有关示例，请参见[QTransform 文档中](http://qt-project.org/doc/qt-4.8/qtransform.html#rendering-graphics)的示例代码：

> 将文本缩放到一半宽度，然后顺时针旋转 45 度，然后将其原点移动到 (50, 50)：
> 
> ![在此处输入图像描述](../Images/e485b5dd4b728e7e7c0f952f08307299.png)
> 
> ```
> QTransform transform;
> transform.translate(50, 50);
> transform.rotate(45);
> transform.scale(0.5, 1.0); 
> ```

另一个问题是您应该通过考虑缩放因子将图像转换回其原点（感谢 Mat 在问题评论中指出这一点）。

应用于您的代码片段（从下到上阅读*直观的操作顺序*）：

```
// Setup transform
QTransform trans;
trans.translate(imgFg.width()*scaleFac/2, imgFg.height()*scaleFac/2);
trans.rotate(angleDegrees);
trans.scale(scaleFac, scaleFac);
trans.translate(-imgFg.width()/2, -imgFg.height()/2); 
```

最后但并非最不重要的一点是，您希望将图像的**中心**作为新的原点（参考点），因此您不应该向后平移（现在是第一个操作；在您的代码中是最后一个操作）。然后只需在参考点绘制图像，而不是添加另一个 size/2。此外，您不应将变换应用于图像然后绘制此图像；至少它不是很好的风格。只需将变换应用于画家，然后再取消应用。

```
QTransform trans;
trans.scale(scaleFac, scaleFac);
trans.rotate(angleDegrees);
trans.translate(imgFg.width()/2,imgFg.height()/2);

// Save old transform (only needed if you use other transformations)
const QTransform &oldTrans = painter.transform();
// Apply new transform
painter.setTransform(trans);
// Paint image at reference point
painter.drawImage(referencePoint, imgFg);
// Restore transform
painter.setTransform(oldTrans); 
```**

# amazon-simpledb - SimpleDB：检查是否存在的有效查询

> ID：10773288
> 
> 赞同：0
> 
> 时间：2012-05-27T10:33:46.627
> 
> 标签：amazon-simpledb

使用 SimpleDB 查询项目是否存在的最有效方法是什么？例如，“是否有使用此邮政编码的用户”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:02:07.090

真的没有那么多选择。如果您要查找的属性不是项目名称，您唯一的选择是使用选择。有两种可能的方法。首先使用 count(*)

```
select count(*) from DomainX where AttributeY='ZValue' 
```

或者，如果您想在检查是否存在后检索该项目（尽管您可能只是`select *`在这种情况下），则使用 itemName() 可以带来更多好处。

```
select itemName() from DomainX where AttributeY='ZValue' 
```

此外还有使用限制的选项

```
select ..... limit 1 
```

幸运的是，亚马逊通过每个 SimpleDB 操作返回的 BoxUsage 值提供了最昂贵的提示。我编写了一个小脚本来运行 4 个备选方案中的每一个 25 次（考虑库预热）并比较每个备选方案的时间和 BoxUsage。使用的域包含大约 4500 个项目，每个项目有 4 个属性。

我的第一遍使用了一个谓词 where 子句，它匹配多个项目（11 个项目）。

```
Type of Query                 | Avg time(s) | Avg BoxUsage
------------------------------------------------------------
count(*) without limit        | 0,092       | 0,0000229400
count(*) with limit 1         | 0,092       | 0,0000228616
itemName() without limit      | 0,092       | 0,0000140880
itemName() with limit 1       | 0,090       | 0,0000140080 
```

我的第二遍使用了一个谓词 where 子句，它只匹配一个项目

```
Type of Query                 | Avg time(s) | Avg BoxUsage
------------------------------------------------------------
count(*) without limit        | 0,090       | 0,0000140080
count(*) with limit 1         | 0,091       | 0,0000140080
itemName() without limit      | 0,090       | 0,0000140080
itemName() with limit 1       | 0,093       | 0,0000140080 
```

平均时间在统计上并不显着，而且可能不是那么可靠，因为我是从家里的 DSL 进行测试的。从 EC2 实例进行测试会更合适。

然而，BoxUsage 很有趣。建议 itemName() 比 count(*) 更合适，尽管您必须考虑您的查询是否会匹配很多项目（数百个），在这种情况下，您将在 itemName 中产生数据传输开销() 案例，尽管 BoxUsage 明智的做法会更便宜。限制的使用不会对 BoxUsage 产生很大影响并不令人惊讶，因为它用于分页，这意味着您可以通过使用 NextMarker 重复查询来继续检索更多结果。

如果我在 simpledb 之上实现通用`Exists()`操作，我可能会选择

```
select itemName() from X where Y='Z' limit 1 
```

如果性能/成本很敏感，您应该在您的环境中自己执行这些测试。

# ctags - 配置：错误：C 编译器在安装 Exuberant Ctags 时无法创建可执行文件

> ID：10773291
> 
> 赞同：2
> 
> 时间：2012-05-27T10:34:37.487
> 
> 标签：ctags

在 centos 中为 vim 安装 Exuberant Ctags 期间运行 './configure' 时，我遇到了以下问题：

```
 checking whether to install link to etags... no
     checking whether to install readtags object file... no 
     checking for gcc... gcc
     checking for C compiler default output file name... 
     configure: error: C compiler cannot create executables
     See `config.log' for more details. 
```

`config.log`节目：

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by configure, which was
generated by GNU Autoconf 2.61\.  Invocation command line was

  $ ./configure 

## --------- ##
## Platform. ##
## --------- ##

hostname = localhost
uname -m = x86_64
uname -r = 2.6.18-308.1.1.el5
uname -s = Linux
uname -v = #1 SMP Wed Mar 7 04:16:51 EST 2012

/usr/bin/uname -p = unknown
/bin/uname -X     = unknown

/bin/arch              = x86_64
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = unknown
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /usr/local/bin
PATH: /bin
PATH: /usr/bin

## ----------- ##
## Core tests. ##
## ----------- ##

configure:1876: checking whether to install link to etags
configure:1883: result: no
configure:1886: checking whether to install readtags object file
configure:1893: result: no
configure:1970: checking for gcc
configure:1986: found /usr/bin/gcc
configure:1997: result: gcc
configure:2235: checking for C compiler version
configure:2242: gcc --version >&5
gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-52)
Copyright (C) 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:2245: $? = 0
configure:2252: gcc -v >&5
Using built-in specs.
Target: x86_64-redhat-linux
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-libgcj-multifile --enable-languages=c,c++,objc,obj-c++,java,fortran,ada --enable-java-awt=gtk --disable-dssi --disable-plugin --with-java-home=/usr/lib/jvm/java-1.4.2-gcj-1.4.2.0/jre --with-cpu=generic --host=x86_64-redhat-linux
Thread model: posix
gcc version 4.1.2 20080704 (Red Hat 4.1.2-52)
configure:2255: $? = 0
configure:2262: gcc -V >&5
gcc: '-V' option must have argument
configure:2265: $? = 1
configure:2288: checking for C compiler default output file name
configure:2315: gcc    conftest.c  >&5
collect2: cannot find 'ld'
configure:2318: $? = 1
configure:2356: result: 
configure: failed program was:
| /* confdefs.h.  */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define DEFAULT_FILE_FORMAT 2
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:2363: error: C compiler cannot create executables
See `config.log' for more details.

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_env_CC_set=
ac_cv_env_CC_value=
ac_cv_env_CFLAGS_set=set
ac_cv_env_CFLAGS_value=
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_LDFLAGS_set=
ac_cv_env_LDFLAGS_value=
ac_cv_env_LIBS_set=set
ac_cv_env_LIBS_value=
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=
ac_cv_env_host_alias_value=
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_prog_ac_ct_CC=gcc

## ----------------- ##
## Output variables. ##
## ----------------- ##

CC='gcc'
CFLAGS=''
CPP=''
CPPFLAGS=''
DEFS=''
ECHO_C=''
ECHO_N='-n'
ECHO_T=''
EGREP=''
EXEEXT=''
GREP=''
LDFLAGS=''
LIBOBJS=''
LIBS=''
LN_S=''
LTLIBOBJS=''
OBJEXT=''
PACKAGE_BUGREPORT=''
PACKAGE_NAME=''
PACKAGE_STRING=''
PACKAGE_TARNAME=''
PACKAGE_VERSION=''
PATH_SEPARATOR=':'
SHELL='/bin/sh'
STRIP=''
ac_ct_CC='gcc'
bindir='${exec_prefix}/bin'
build_alias=''
datadir='${datarootdir}'
datarootdir='${prefix}/share'
docdir='${datarootdir}/doc/${PACKAGE}'
dvidir='${docdir}'
exec_prefix='NONE'
host_alias=''
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
install_targets='install-ctags'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
mandir='${datarootdir}/man'
oldincludedir='/usr/include'
pdfdir='${docdir}'
prefix='NONE'
program_transform_name='s,x,x,'
psdir='${docdir}'
sbindir='${exec_prefix}/sbin'
sharedstatedir='${prefix}/com'
sort_found=''
sysconfdir='${prefix}/etc'
target_alias=''

## ----------- ##
## confdefs.h. ##
## ----------- ##

#define PACKAGE_NAME ""
#define PACKAGE_TARNAME ""
#define PACKAGE_VERSION ""
#define PACKAGE_STRING ""
#define PACKAGE_BUGREPORT ""
#define DEFAULT_FILE_FORMAT 2

configure: exit 77 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:17:32.397

`collect2: cannot find 'ld'`

乍一看，它似乎找不到您的链接器；确保`ld`安装到路径中的目录。

# java - 使用匹配器/模式从 http 文档中提取字符串

> ID：10773296
> 
> 赞同：0
> 
> 时间：2012-05-27T10:35:11.753
> 
> 标签：java, android, regex, matcher

这是我的文件的一部分：

```
<td align="right" valign="top"><b>Име:</b></td> <td align="left" valign="top">Павлин Евгениев Тишев</td>
<td rowspan="7" align="center" valign="top">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td align="right" valign="top"><b>Състояние:</b></td>
<td align="left" valign="top">Редовен</td> 
```

我想从所有事件之间一一提取字符串，因为这些值是按类型排序的`<td align="left" valign="top">`。`</td>`

我正在使用这段代码（**in**是上面显示的整个输入字符串部分）

```
Pattern p = Pattern.compile("<td align=\"left\" valign=\"top\">(.*?)</td>");
        Matcher m = p.matcher(in);

        if (m.matches()) {
            student.setName(m.group(1));
            student.setState(m.group(2));
        } 
```

但它甚至没有进入**if**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T10:39:30.310

你应该使用这个：

```
while (m.find()) {
            student.setName(m.group(1));
            student.setState(m.group(2));
        } 
```

阅读[本文](https://stackoverflow.com/questions/4450045/difference-between-matches-and-find-in-java-regex)以准确了解为什么应该使用`find()`而不是`matches()`.

# sql-server-2005 - 查询合并两个子查询的结果

> ID：10773297
> 
> 赞同：0
> 
> 时间：2012-05-27T10:35:15.683
> 
> 标签：sql-server-2005, stored-procedures

我有 2 个表，其值如下所示

**tblIncome（日期，收入）**

*   2012 年 12 月 2 日 1000
*   14/02/2012 2000
*   2012 年 10 月 3 日 1500
*   2012 年 5 月 3 日 5000

**tblExpense（日期，费用）**

*   2012 年 5 月 2 日 1200
*   2012 年 10 月 2 日 1000
*   15/03/2012 2000

**预期结果**是（月、收入、费用）

*   二月 3000 2200
*   三月 6500 2000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T12:05:18.977

您的问题要求提供“日历表”。这个词在社区中是众所周知的，谷歌会给出很多点击。

这就是我的样子

![在此处输入图像描述](../Images/6827102a0ee2e9543395698f5fec0ea6.png)

完成所需的其他月份的表格（最好使用脚本）

一旦到位，您可以在此脚本中运行下面的查询，该查询将为您提供结果

```
CREATE TABLE [dbo].[Calendar](
    [MonthName] [varchar](20) NULL,
    [StartdateInclusive] [datetime] NULL,
    [EnddateExclusive] [datetime] NULL
)

INSERT [dbo].[Calendar] ([MonthName], [StartdateInclusive], [EnddateExclusive]) VALUES (N'February', CAST(0x00009FEA00000000 AS DateTime), CAST(0x0000A00700000000 AS DateTime))
INSERT [dbo].[Calendar] ([MonthName], [StartdateInclusive], [EnddateExclusive]) VALUES (N'March', CAST(0x0000A00700000000 AS DateTime), CAST(0x0000A02600000000 AS DateTime))

CREATE TABLE [dbo].[tblIncome](
    [Date] [datetime] NULL,
    [Income] [money] NULL
)

INSERT [dbo].[tblIncome] ([Date], [Income]) VALUES (CAST(0x00009FF500000000 AS DateTime), 1000.0000)
INSERT [dbo].[tblIncome] ([Date], [Income]) VALUES (CAST(0x00009FF700000000 AS DateTime), 2000.0000)
INSERT [dbo].[tblIncome] ([Date], [Income]) VALUES (CAST(0x0000A01000000000 AS DateTime), 1500.0000)
INSERT [dbo].[tblIncome] ([Date], [Income]) VALUES (CAST(0x0000A00B00000000 AS DateTime), 5000.0000)

CREATE TABLE [dbo].[tblExpense](
    [Date] [datetime] NULL,
    [Expense] [money] NULL
)

INSERT [dbo].[tblExpense] ([Date], [Expense]) VALUES (CAST(0x00009FEE00000000 AS DateTime), 1200.0000)
INSERT [dbo].[tblExpense] ([Date], [Expense]) VALUES (CAST(0x00009FF300000000 AS DateTime), 1000.0000)
INSERT [dbo].[tblExpense] ([Date], [Expense]) VALUES (CAST(0x0000A01500000000 AS DateTime), 2000.0000)

SELECT  MonthName ,
        SUM(Income) ,
        SUM(Expense)
FROM    ( SELECT    MonthName ,
                    i.Income ,
                    NULL AS Expense
          FROM      dbo.Calendar c
                    LEFT JOIN dbo.tblIncome i ON c.StartdateInclusive <= i.Date
                                                 AND i.Date < c.enddateExclusive
          UNION
          SELECT    MonthName ,
                    NULL ,
                    e.Expense AS Expense
          FROM      dbo.Calendar c
                    LEFT JOIN dbo.tblExpense e ON c.StartdateInclusive <= e.Date
                                                  AND e.Date < c.enddateExclusive
        ) AS d
GROUP BY MonthName 
```

# c# - 在 C# Windows 应用程序中检索登录用户的用户名

> ID：10773298
> 
> 赞同：1
> 
> 时间：2012-05-27T10:35:25.453
> 
> 标签：c#

我已经开发了一个基于 Windows 的应用程序和 SQL Server 2008 作为后端，我有一个登录表单，是否可以检索我在另一个表单上登录的用户名？请帮忙吗？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:47:43.340

您可以通过检查环境变量来检索当前登录用户的名称`USERNAME`。但是，该进程可能在某些其他用户凭据下运行。

但是，如果您只想使用这些凭据做某事，则可以使用`System.Net.CredentialCache.DefaultCredentials`or `System.Net.CredentialCache.DefaultNetworkCredentials`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T10:37:42.027

你的两种形式在不同的过程中？如果是这样，也许您需要使用一些进程间通信机制来获取用户名。

# python - Windows上的静态链接python

> ID：10773301
> 
> 赞同：3
> 
> 时间：2012-05-27T10:36:14.083
> 
> 标签：python, windows

我需要一个 python 解释器来静态链接到我的应用程序（Windows 应用程序），这意味着我的应用程序不需要 dll。我的应用程序不会使用任何第三方 python 模块，只使用文本脚本。

我怎样才能做到这一点？或者可能已经编译了库？

需要一个3.2版本的python

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:52:11.080

由于 Windows 加载程序的工作方式，这是不可能的；应用程序加载的 DLL（包括 .pyd 文件）默认**无法**访问可执行文件使用/提供的符号表，因此必须改为从 pythonX.Y.dll 读取符号。

# java - javax.naming.NameNotFoundException: jms

> ID：10773307
> 
> 赞同：2
> 
> 时间：2012-05-27T10:36:47.153
> 
> 标签：java, jakarta-ee, jms

我有这个非常简单的代码（Glassfish 3.1.2）：

```
Context ic = new InitialContext();
ConnectionFactory connectionFactory = (ConnectionFactory) ic.lookup("jms/ConnectionFactory"); 
```

但第二行抛出一个 Exception ：

```
SEVERE: javax.naming.NamingException: Lookup failed for 'jms/ConnectionFactory' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: jms]
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
at javax.naming.InitialContext.lookup(InitialContext.java:392)
at javax.naming.InitialContext.lookup(InitialContext.java:392)
at org.apache.jsp.room_jsp._jspService(room_jsp.java from :195)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:680)
Caused by: javax.naming.NameNotFoundException: jms
at com.sun.enterprise.naming.impl.TransientContext.resolveContext(TransientContext.java:310)
at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:218)
at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77)
at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:119)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:505)
... 34 more 
```

你有一个想法，因为这 2 行代码是“标准的”。Tkx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:36:17.733

您应该在**管理控制台中***创建目标*资源和*连接工厂*。

 *** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-02T04:54:55.240

只是查找“连接工厂”它对我有用**

# c - 图形程序中的结构指针数组错误

> ID：10773308
> 
> 赞同：-1
> 
> 时间：2012-05-27T10:36:57.603
> 
> 标签：c, pointers, graph, struct

我正在尝试制作一个图表，该程序正处于初始阶段，我声明了一个结构指针数组，其中包含顶点地址 *vertices[20] 是一个数组，其元素都是 **struct node ***类型的地址，它将包含图节点的地址。

```
#include<stdio.h>
#include<stdlib.h>
struct node {
    int data;
    struct node *links[10];
};
struct node *create_node(int);
void create_vertices(struct node **);
int main()
{
    struct node *vertices[20];
    int d, i, choice;
        *vertices[0]=(struct node *)malloc(sizeof(struct node)*20);
        create_vertices (&vertices);
}

struct node *create_node(int data)
{
    int i;
    struct node *temp = (struct node *)malloc(sizeof(struct node));
    temp->data = data;
    for (i = 0; i < 10; i++)
        temp->links[i] = NULL;
    return temp;
}

void create_vertices (struct node **v)
{
 int i,choice;
 i=0;
    printf("enter choice\n");
    scanf("%d", &choice);
    while (choice == 1) {
        printf("enter data\n");
        scanf("%d", &d);
        vertices[i] = create_node(d);
        i++;
        printf("enter choice\n");
        scanf("%d", &choice);
    }
} 
```

编译上面的代码会给我以下错误

```
bfs.c: In function ‘main’:
bfs.c:13:21: error: incompatible types when assigning to type ‘struct node’ from type ‘struct node *’
bfs.c:14:9: warning: passing argument 1 of ‘create_vertices’ from incompatible pointer type [enabled by default]
bfs.c:8:6: note: expected ‘struct node **’ but argument is of type ‘struct node * (*)[20]’
bfs.c: In function ‘create_vertices’:
bfs.c:35:16: error: ‘d’ undeclared (first use in this function)
bfs.c:35:16: note: each undeclared identifier is reported only once for each function it appears in
bfs.c:36:3: error: ‘vertices’ undeclared (first use in this function) 
```

该程序在以下行中显示错误

```
 struct node *vertices[20];
*vertices[0]=(struct node *)malloc(sizeof(struct node)*20); 
```

这种声明有什么害处。我声明了一个 struct node * 类型的指针数组，我应该也给它们内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:41:06.980

主要：

```
create_vertices (&vertices); 
```

应该：

```
create_vertices (vertices); 
```

另外：让 create_vertices() 函数知道数组的大小会更安全。不应允许 i 索引超过此大小。

更新：主要，**删除**行：

```
*vertices[0]=(struct node *)malloc(sizeof(struct node)*20); 
```

Vertices[] 是自动存储（“在堆栈上”）中的 20 个（未初始化的）指针数组。

create_vertices() 函数会给指针一个值。（通过调用 malloc() 并将结果分配给 vertices[i]）

# oracle - 无法从 Toad 9.0 连接到 Oracle 数据库

> ID：10773309
> 
> 赞同：0
> 
> 时间：2012-05-27T10:37:08.807
> 
> 标签：oracle, oracle10g, database-connection, toad

我正在使用 Oracle 10g 版本 10.0.2

几天前，我能够使用 SQLPlus 和 Toad 9.0 连接到我的数据库而不进行任何更改，现在我无法从 Toad 连接到我的数据库，并出现以下错误消息：“您没有安装 Oracle 客户端”，但我仍然能够连接到数据库并从 SQLPlus 执行查询

那么，请问是什么原因导致了这个问题！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:42:42.827

您检查过[Quest 支持网站](https://support.quest.com/Search/SolutionDetail.aspx?ID=SOL39689)吗？

这显然是 TOAD 相对常见的情况。其中一些似乎与使用 64 位客户端有关，或者与安装在带有括号的目录路径中有关。不过，我不太明白它之前的工作原理。

是否可以选择安装最新版本的 TOAD？

# ios - 应用程序在后台运行时进行位置跟踪

> ID：10773310
> 
> 赞同：1
> 
> 时间：2012-05-27T10:37:12.343
> 
> 标签：ios, core-location

我有一个应用程序可以在前台运行时跟踪设备的当前位置。我也想在后台运行时做同样的事情。

我做了一些研究并尝试了以下方法：

*   应用`setKeepAliveTimeout:600 handler:^{ [self backgroundHandler]; }];`

当应用程序在调试下运行时，一切正常（我的意思是当设备连接到 mac pc 或连接充电的设备时）。当设备与 PC 断开连接或充电应用在后台运行时无法跟踪当前位置。

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:54:59.090

您需要将 UIBackgroundModes 键添加到 info.plist 文件中。这个键应该是一个数组，然后你需要向它添加值“位置”。

更多信息：

[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW10](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T13:20:00.000

查看 Breadcrumbs 示例应用程序和 WWDC 2010 关于在后台使用 CoreLocation 的讲座。讲座通过面包屑样本进行。

# unit-testing - 由于错误，无法测试我的 grails 应用程序

> ID：10773317
> 
> 赞同：5
> 
> 时间：2012-05-27T10:38:22.093
> 
> 标签：unit-testing, grails, junit, grails-2.0

这是我要测试的域类。

```
class TekEvent {
    String city
    String name
    String organizer
    String venue
    Date startDate
    Date endDate
    String description

    static constraints = {
        name()
        city()
        description(maxSize: 5000)
        organizer()
        venue()
        startDate()
        endDate()
    }

    String toString(){
        "$name, $city"
    }
} 
```

下面是我的测试课

```
@TestFor(TekEvent)
class TekEventTests extends GrailsUnitTestCase {
    void testToString() {
       def tekEvent = new TekEvent(
               name: 'Groovy One',
               city: 'San Francisco, CA',
               organizer: 'Emil Matevosyan',
               venue: 'Moscone center',
               startDate: new Date('6/2/2015'),
               endDate: new Date('6/5/2015'),
               description: 'This conference will cover all...')

        assertEquals 'Groovy One, San Francisco, CA', tekEvent.toString()
    }
} 
```

当我尝试使用`test-app`command 运行测试时，出现此错误

```
The return type of java.lang.Object mockDomain(java.lang.Class, java.util.List) in tekdays.TekEventTests is incompatible with void mockDomain(java.lang.Class, java.util.List) in grails.test.GrailsUnitTestCase
. At [-1:-1] 
```

我不明白有什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T17:13:32.670

对于 grails 2.x，您不应扩展 GrailsUnitTestCase，而应使用 mixin 注释。

查看[测试 Mixin](http://grails.org/doc/latest/guide/testing.html#unitTesting)

# scala - SBT 在本地 maven 存储库中找不到文件，尽管它在那里

> ID：10773319
> 
> 赞同：76
> 
> 时间：2012-05-27T10:39:00.753
> 
> 标签：scala, maven, sbt

我在本地存储库中遇到了 maven 依赖项的问题。

SBT 找不到。已经将日志级别设置为调试，但没有得到任何新内容。

这些文件在存储库中。我将粘贴路径从控制台复制到文件资源管理器，它们就在那里。

输出：

```
[debug]          trying file://c:/Users/userz/.m2/repository/com/twitter/naggati/2.0.0/naggati-2.0.0.pom

[debug]                 tried file://c:/Users/userz/.m2/repository/com/twitter/naggati/2.0.0/naggati-2.0.0.pom

[debug]         Local Maven Repository: resource not reachable for com/twitter#naggati;2.0.0: res=file://c:/Users/userz/.m2/repository/com/twitter/naggati/2.0
.0/naggati-2.0.0.pom

[debug]          trying file://c:/Users/userz/.m2/repository/com/twitter/naggati/2.0.0/naggati-2.0.0.jar

[debug]                 tried file://c:/Users/userz/.m2/repository/com/twitter/naggati/2.0.0/naggati-2.0.0.jar

[debug]         Local Maven Repository: resource not reachable for com/twitter#naggati;2.0.0: res=file://c:/Users/userz/.m2/repository/com/twitter/naggati/2.0
.0/naggati-2.0.0.jar

[debug]         Local Maven Repository: no ivy file nor artifact found for com.twitter#naggati;2.0.0 
```

**编辑：我在项目/构建中使用 scala 文件添加了路径，**如[http://code.google.com/p/simple-build-tool/wiki/LibraryManagement中所述](http://code.google.com/p/simple-build-tool/wiki/LibraryManagement)

“如果您将其添加为存储库，sbt 可以搜索您的本地 Maven 存储库：”

```
val mavenLocal = "Local Maven Repository" at "file://"+Path.userHome+"/.m2/repository" 
```

这使得 sbt 在本地存储库中查找。之前没有。

所以 scala 文件看起来像这样：

```
import sbt._

class Foo(info: ProjectInfo) extends DefaultProject(info) {

val mavenLocal = "Local Maven Repository" at "file://c:/Users/userz/.m2/repository"

} 
```

（我硬编码 Path.userHome 以排除可能的错误原因。正如预期的那样，它没有改变任何东西）。

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2014-02-07T13:21:27.900

只需在 build.scala 或 build.sbt 文件中添加这一行

```
resolvers += Resolver.mavenLocal 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-05-28T00:09:52.553

说明符后需要三个斜杠`file:`。这是因为在第二个和第三个斜杠之间，您有一个可选的主机名。[维基百科](http://en.wikipedia.org/wiki/File_URI_scheme)`file:`对URL有很好的解释

您遇到了问题，因为典型的模式`"file://"+Path.userHome+"/.m2/repository"`假定 Unix 文件系统，其中路径以 a 开头`/`，不包含`:`，并且通常不包含空格。

要获得适用于 Windows 和 Linux/Unix 的非硬编码路径，请使用：

```
"Local Maven" at Path.userHome.asFile.toURI.toURL + ".m2/repository" 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-01-23T16:09:00.780

要使其适用于较新版本的 sbt，请将以下内容添加到 build.sbt：

```
resolvers += "Local Maven Repository" at "file:///"+Path.userHome+"/.m2/repository" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-03T14:47:15.923

当你定义了一个项目时要小心，你需要在设置中包含解析器。不会识别全局解析器。

例子：

```
lazy val core = (project in file("core")).
  settings(commonSettings: _*).
  settings(
    resolvers += Resolver.mavenLocal,
    name := "Core",
    libraryDependencies := coreDependencies
  ) 
```

# javascript - YouTube 视频结束时的事件

> ID：10773322
> 
> 赞同：25
> 
> 时间：2012-05-27T10:39:59.830
> 
> 标签：javascript, youtube, youtube-api, dom-events

我有简单的 html 代码，可以在点击图片后播放 YouTube 视频：

```
<body>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 

<div id="ytapiplayer2" style="display:none;">
<object width="1280" height="745">
<param name="movie" value="http://www.youtube.com/v/kCfP003Btjw?fs=1&hl=en_US&rel=0&autoplay=1"></param>
<param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param>
<embed src="http://www.youtube.com/v/kCfP003Btjw?fs=1&hl=en_US&rel=0&autoplay=1" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="1280" height="745"></embed>
</object>

</div>

<img src="https://i.qmyimage.com/mgen/global/zGetImageNew.ms?args=%22shpimg4198.jpg%22,425,96,1" id="imageID" />
<script type="text/javascript">
$('#imageID').click(function() {
$('#ytapiplayer2').show();
$('#imageID').hide();
});
</script>
</body> 
```

视频播放完毕后，我需要隐藏视频并显示图像。怎么可能实施？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-27T10:45:13.390

Youtube 有一个 JavaScript API：[https ://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

你需要的是[onStateChange](https://developers.google.com/youtube/js_api_reference#Events)事件，它在结束时会给你 0。

```
player.addEventListener("onStateChange", function(state){
    if(state === 0){
        // the video is end, do something here.
    }
}); 
```

# mercurial - 如何在 Mercurial 中删除特定版本的文件？

> ID：10773332
> 
> 赞同：1
> 
> 时间：2012-05-27T10:41:55.087
> 
> 标签：mercurial

我需要在我的存储库中删除特定版本的版本控制文件，但我不知道该怎么做。

我可以使用 hg cat --rev [version] [file-name] 查看文件，但我不知道要删除它。

任何人都知道如何删除特定的文件版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:47:20.053

**简短的回答**：如果你的回购是公开的，那就很难了。如果是私人的，那就更容易了。

* * *

**长答案**：Mercurial 作为一个面向变更集的 CVS，实际上并不存储文件修订。相反，它存储修订（差异）之间的更改。

除此之外，每个变更集 id 都根据修订内容计算为加密哈希。这意味着，如果您更改了单个变更集，则它的每个后代变更集都将被更改。这是在 Mercurial 中重写历史的代价。

## 私人回购

如果您需要更改的变更集没有被推送到任何地方（或者 repo 本身是私有的），那么您可以根据需要更改历史记录。

*   如果变更集是最近的，请考虑使用[Mercurial Queues](http://mercurial.selenic.com/wiki/MqExtension)：您可以将变更集导入队列，转到相关变更集，撤消对特定文件的更改，然后重新应用队列的其余部分。

*   如果变更集是很久以前提交的，您可能会更新到它的父节点，[移植](http://www.selenic.com/mercurial/hg.1.html#graft)有问题的变更集（您可能必须坚持一个虚拟变更集才能使其工作），将其导入 MQ，修改它，`rebase --detach`然后其余的祖先就在它上面。

## 公开回购

您可以对私有仓库执行相同的操作，但请记住将创建沿袭的副本：

```
-- 1 -- 2 -- A -- B -- C -- D    original A and its descendants
         \
          A' -- B' -- C' -- D'   modified A' and its descendants 
```

即使您将`A`–<code>D替换为`A'`–<code>D'，从您的 repo 中提取的每个人仍将拥有`A`–<code>D！你必须想办法让他们剥离这个血统。

# ios - UITableViewController 和 UIColor 在滚动时改变位置

> ID：10773334
> 
> 赞同：0
> 
> 时间：2012-05-27T10:42:07.837
> 
> 标签：ios, uitableview, uicolor

嗨，伙计们，我有一个普通的 UITableViewController，里面有一些单元格，我只有 1 个具有此属性的单元格：

```
cell.backgroundColor = [UIColor lightGrayColor]; 
```

它向我显示单元格上的灰色（好）。

当我使用滚动条时出现问题（我点击窗口并向下查看其他单元格）在这种情况下，单元格的灰色颜色（疯狂地）从它所在的位置移动到另一个单元格。

为什么 ？？

编码：

静态 NSString *CellIdentifier = @"Cell";

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

if(cell.backgroundColor == [UIColor lightGrayColor])
{
   cell.backgroundColor = [UIColor lightGrayColor];
}
else
{
   cell.backgroundColor = [UIColor clearColor];
}
switch (currentStatus) {
    case KBI_NAME:
    {
        switch (indexPath.section) {
            case 0:
            {
                if(indexPath.row == 0)
                {
                    if (currentUser.currentKBI != nil && ![currentUser.currentKBI isEqualToString:@""]) {
                        cell.textLabel.text = currentUser.currentKBI;
                    }
                    else{
                        cell.textLabel.text = @"asdf";
                    }  

                    cell.userInteractionEnabled = NO;

                    cell.backgroundColor = [UIColor lightGrayColor];
                }
                if(indexPath.row == 1)
                {
                    cell.textLabel.text = @"xyz";
                    cell.textLabel.textAlignment = UITextAlignmentCenter;
                }

                break;
            }
            case 1: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:49:49.127

当您在 a`UITableView`中滚动时，滚动到视图之外的单元格将被重新用于滚动到视图中的单元格。这就是以下行的用途：

```
cell = [tableView dequeueReusableCellWithIdentifier:@"cellIdentifier"]; 
```

因此，如果此行返回一个单元格，则每次都需要设置背景颜色，因为您可能已经获得了具有灰色背景的单元格。

```
if (isGrayCell)
    cell.backgroundColor = [UIColor lightGrayColor];
else
    cell.backgroundColor = [UIColor clearColor]; 
```

**更新**

您设置背景颜色的代码没有意义。如果回收的单元格的背景是灰色的，即使您需要不同的颜色，您也要再次将其设置为灰色。类似的应该是这样的：

```
if(currentStatus == KBI_NAME && indexPath.row == 0)
{
   cell.backgroundColor = [UIColor lightGrayColor];
}
else
{
   cell.backgroundColor = [UIColor clearColor];
} 
```

**更新 2**

如果您每次都简单地初始化单元格，这可能会容易得多：

```
cell.backgroundColor = [UIColor clearColor]; 
```

如果您需要灰色背景，颜色稍后会再次更改为灰色。

# database - 在这种情况下，非规范化是否更有效？

> ID：10773335
> 
> 赞同：0
> 
> 时间：2012-05-27T10:42:22.527
> 
> 标签：database, system, normalization, denormalization

如需更多说明，请在此处查看我的旧帖子 [数据库规范化 - 谁是对的？](https://stackoverflow.com/questions/10768696/database-normalization-whos-right)

我很欣赏这些好的答案，但我想强调的是，我们正在制作的这个系统不仅仅是为了学习。这是我们学校真正的招生制度。我们大约四个月前开始工作，除了对非规范化的困惑之外，系统一切正常。

就像我说的，他的原因是： 1.查询可能会被意外删除，从而产生更多问题。

2.  他说第二范式就足够了，就像他在过去的所有系统中所做的那样。

3.  与我们合作的人（没有足够的技术知识）无法从没有足够属性/行的表中进行他们想要的查询。（在我的例子中，我决定删除总单位，因为可以很容易地从其他属性中计算出来。 )

4.  其他系统，如会计、工资、库存和采购，计划与注册系统集成。他说，如果是这种情况，最好将每个新系统数据库直接连接到我们的注册系统数据库，而无需访问查询。

5.  他认为，所有相关行，例如每个学生的计算平均成绩也必须包含在表中，因为他说，我们需要的是物理数据，而不是通过视图重新计算。

6.  更重要的是，我猜是他希望每笔交易都输入数据库。就像为了平衡交易而进行的借记和贷记一样。

就我而言，根据我从他那里听到的消息，除了从查询中进行查询（我相信这是我们需要非规范化的主要原因）之外，他没有提到任何关于速度的事情。他只是想要数据库中记录的所有内容。

我的立场与所有这些相反。如果准确性是我们对速度的关注，那么规范化是完美的，顺便说一下我们使用的是 microsoft sql server。

最后一件事，我记得他想在 students_info 表中包含 full_name 列。他的理由？他说“从表中读取比进行另一个查询更好。只要确保程序可以控制用户输入的全名”。

在我决定停止制作这个系统之前，请让我知道你，更有经验的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:45:52.673

> 查询可能会被意外删除，从而产生更多问题。

这就是版本控制软件的用途。此外，如果您可以“意外”删除视图，则可能会意外删除表。

> 他说第二范式就足够了，就像他在过去的所有系统中所做的那样。

那他的经验还不够。特别是在会计方面。

我因坚持下属在 5NF 中给我高性能设计而闻名（或臭名昭著）。如果他们不能这样做，他们可能要么 a) 不知道 5NF 是什么，要么 b) 认为每一行都应该有一个 ID 号。（每行都有一个 id 号会增加所需的连接数量，通常会导致性能下降，并且与规范化无关。）这两者都是很好的教育机会。

BCNF*可能*已经足够好了。2NF 通常不是。

如果您输了这场战斗，请坚持使用 CHECK() 约束以确保总数始终正确。

> 与我们合作的人（没有足够的技术知识）无法从没有足够属性/行的表中进行他们想要的查询。

添加一些视图将在短期内帮助您。您可能需要添加一些可更新的视图。但是，您有权要求将要*在生产级注册系统中处理会计数据的人员*具备一定水平的技术知识。

> 其他系统，如会计、工资、库存和采购，计划与注册系统集成。他说，如果是这种情况，最好将每个新系统数据库直接连接到我们的注册系统数据库，而无需访问查询。

视图（查询）和表共享一个命名空间。客户端代码没有说“我想连接到一个*表*，而不是一个视图，它必须被命名为‘student_payments’。” 客户端代码只是说，“连接到‘student_payments’。”

也就是说，任何有权插入付款表的人都更清楚如何正确插入付款表。如果您最终不得不包含一个作为对其他列的计算结果的列，请坚持使用 CHECK() 约束。

有些*系统*的设计方式是所有客户端访问都通过存储过程进行，并且客户端代码无法直接访问表。*当有效事务必须*一次插入多个表时，这种方法很有意义。

> 他认为，所有相关行，例如每个学生的计算平均成绩也必须包含在表中，因为他说，我们需要的是物理数据，而不是通过视图重新计算。

您需要的是数据库*始终*为您提供正确的答案。

> 更重要的是，我猜是他希望每笔交易都输入数据库。就像为了平衡交易而进行的借记和贷记一样。

最后，一些明智的事情。金融交易一般只插入。如果它们不正确，则不会更新或删除它们。相反，您插入一个补偿事务。（而且，我希望，它的原因。）

实际上，我不会*在*第一个版本中包含计算列。只有当它们的缺席造成实际的性能问题时，我才会添加它们。

话虽如此，我在识别*实际*性能问题方面有一个相当高的标准。如果 Vinny 副总裁必须等待 5 秒钟才能返回查询，这并不是实际的性能问题。如果一个需要 5 秒的查询每天都在阻塞其他查询并降低整体性能，*那么这就是*一个实际的性能问题。

不要根据单个 SELECT 语句的行为来确定性能问题。理想情况下，您对性能问题的确定应该基于整个系统的行为。实际上，它基于具有代表性的 SQL 语句样本的行为。在遇到性能问题*之前*，选择一个具有代表性的 SELECT、INSERT 和 DELETE 语句。用有代表性的样本数据测试它们，并至少存储时间。理想情况下，存储他们的执行计划和时间安排。

我不会仅仅为了在表中包含“真实”数据而包含计算列。

如果我必须通过存储计算结果来解决*实际*的性能问题，我不会在不首先做这些事情的情况下发布*它*。

*   如果约束需要对单行进行计算，我会包含一个 CHECK() 约束以保证计算的值始终正确。
*   如果约束需要对多行进行计算，我会包含一个断言或触发器来实现约束。我还会仔细查看 dbms 文档，寻找触发器可能不会触发的实例。（在某些平台上，触发器不会在批量加载期间触发。）
*   如果我不能使用 CHECK() 约束、断言或触发器，我会实现某种管理过程，最好是在存储过程或其等效程序中编码，以定期搜索实际总数不匹配的数据预计总数。如果我不能在 SP 中实现它，我会在 cron 作业下运行的应用程序代码中实现它。有很多方法可以做到这一点，而不会对其他流程产生重大影响。

通常，即使我还使用声明的约束，我也会实施定期管理程序来检查丢失或计算错误的数据。任何拥有足够权限的人都可以出于正当理由、不正当理由或根本没有理由放弃或禁用约束。（拥有高权限的人——包括你自己——是你最危险的用户。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T14:35:57.320

如果您正在创建一个可以更新所有数据的数据库，那么规范化是正确的方法。您希望确保当数据项发生更改时，结果会传播到各处。您可能不需要深奥的规范化范围（例如，如果您知道所有地址都在美国，则可以使用两个字符的州代码）。

要解决“查询被删除”等问题，请使用视图。这些允许您将数据的报告视图连接到基础数据结构。毕竟，最适合保持数据一致性的方法可能不适合报告。

最终，根据我的经验，您将走向数据集市解决方案。您将拥有操作应用程序的标准化形式的基础数据。您将有另一组表，从这些表派生出来，用于报告目的。这些表格将是非规范化的、冗余的，并且对于不同的组看起来会有所不同——有些可以通过 Web 访问，有些可以通过 Excel 访问，有些可以提供给其他应用程序（例如预算预测）。但是，在您到达那里之前，视图应该可以很好地满足查询需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-06T04:54:32.267

是的，如果您正在创建数据仓库。而不是规范化并拥有数百甚至数千个表。您可以非规范化并拥有更少的表。少加入。它将更好地优化，因为查询仓库的人会更少。

# android - 如何在每个导航选项卡的片段内创建 2 个片段

> ID：10773336
> 
> 赞同：1
> 
> 时间：2012-05-27T10:43:07.113
> 
> 标签：android, android-fragments, fragment, android-actionbar

我 在 Android Dev 网站上关注[动作栏教程](http://developer.android.com/guide/topics/ui/actionbar.html)

在我添加这样的标签`onCreate`；`ActionBarActivity.class`

```
 Tab tab = actionBar.newTab()
            .setText(R.string.artist)
            .setTabListener(new TabListener<ArtistFragment>(
                    this, "artist", ArtistFragment.class));
    actionBar.addTab(tab); 
```

所以，我会有，`ArtistFragment extend Fragment`但我不确定如何在里面添加 2 个片段（ListFragment 和 DetailFragment） 里面`ArtistFragment`会是什么`ArtistFragment.class`？

![在此处输入图像描述](../Images/19ded47bab52ab934c484c5e5dfc308f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:20:08.877

Warpzit 说的。每个[Android：你可以嵌套 Fragment 吗？](https://stackoverflow.com/q/6221763/517561), 片段不能嵌套。您的 Fragment 可以通过到达其父 Activity 来使另一个 Fragment 与它一起实例化。我通常不会推荐这个，因为 Fragments 应该是一个封装单元。但是，如果您的 Fragments 是紧密耦合的（例如，对应于列表项的详细显示），我可以看到这样做。

您的代码将如下所示：

```
 FragmentManager fm = getActivity().getSupportFragmentManager();
            MyFragmentClass myFragment = new MyFragmentClass();
            fm.beginTransaction().add(android.R.id.content, myFragment).commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:47:32.670

Android 不支持片段中的片段（目前）。您应该尝试创建一个支持 2 个与您的活动通信的片段而不是 1 个片段来处理两个片段将执行的工作的布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T10:39:50.990

我发现 API Demos 项目中的 FragmentTabs 示例非常有用。

只需从 Eclipse 中创建一个新的 Android 示例项目并选择 API 演示（尝试 API 13）。另外对于支持（兼容性）库，Support4Demos 中有一个 FragmentTabs 演示

# css - 在 Komodo IDE 中编辑 CSS 和 HTML 期间实时预览或 LiveReload？

> ID：10773338
> 
> 赞同：1
> 
> 时间：2012-05-27T10:43:33.343
> 
> 标签：css, ide, editing, komodo, live-preview

我听说过很多关于 Komodo IDE 的信息。Komodo IDE 是否具有实时预览的扩展或原生支持？在编辑 CSS 和 HTML 时，Komodo IDE 是否可以扩展为具有某种实时预览功能？

我真的很想尝试一个 IDE 或编辑器，比如在编辑 CSS 时具有良好代码提示的实时预览。我知道 Expresso 有 LivePreview，但它只适用于 Mac，我使用的是 Windows。带有 LiveReload 的 Sublime Text 很棒，但是代码提示有点差。是否有其他提供此功能的编辑器/IDE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T23:05:19.290

有一个[Komodo 宏](http://community.activestate.com/forum/shortcut-key-reload-browser-preview-tab)可以扩展为使用以下命令自动重新加载所有[浏览器预览](http://docs.activestate.com/komodo/8.0/editor.html#browser_preview)选项卡`setInterval`：

```
function refreshViews()
  {
  var views = ko.views.manager.getAllViews();
  var view;

  // Loop through all open tabs to find the browser preview tabs
  for (var i=0; i < views.length; i++) 
    {
    view = views[i];
    // Reload each preview tab
    if (view.getAttribute("type") == "browser") 
      {
      view.reload();
      }
    }
  }

 setInterval(refreshViews, 2000);  // Reload every two seconds 
```

# c# - 如何对 URL 进行 BASE64 编码？

> ID：10773339
> 
> 赞同：2
> 
> 时间：2012-05-27T10:44:56.540
> 
> 标签：c#, jquery, base64

我在 KickAssTorrents.com 上浏览种子，当我访问一个链接时，它以不同的方式在 url 中编码；

例如（IMDb 链接）： http: [//kat.ph/account/confirm/url/aHR0cDovL3d3dy5pbWRiLmNvbS90aXRsZS90dDA0MDE3Mjk=/](http://kat.ph/account/confirm/url/aHR0cDovL3d3dy5pbWRiLmNvbS90aXRsZS90dDA0MDE3Mjk=/)

现在，当我更改一个字符时，链接中的某些内容发生了变化，我想知道如何在 C# 或 jQuery 中执行此操作？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T10:48:16.570

在 C# 中：

```
static public string EncodeTo64(string toEncode) {
    byte[] toEncodeAsBytes = System.Text.ASCIIEncoding.ASCII.GetBytes(toEncode);
    string returnValue = System.Convert.ToBase64String(toEncodeAsBytes);
    return returnValue;
}
static public string DecodeFrom64(string encodedData) {
    byte[] encodedDataAsBytes = System.Convert.FromBase64String(encodedData);
    string returnValue = System.Text.ASCIIEncoding.ASCII.GetString(encodedDataAsBytes);
    return returnValue;
}
MessageBox.Show(DecodeFrom64("aHR0cDovL3d3dy5pbWRiLmNvbS90aXRsZS90dDA0MDE3Mjk=")); 
```

`System.Text.UTF8Encoding.UTF8.GetBytes(...)`如果字符串`toEncode`包含 ASCII 以外的字符，则使用。请注意，在这种情况下，解码 URL 的任何一方都必须能够正确处理这些字符。

还请查看 David Hardin 提到的案例，看看提到[的](https://stackoverflow.com/q/1228701)任何问题是否适用于您。或者只是使用大卫的[答案](https://stackoverflow.com/a/27397664/1353187)。`=``+``/`

jQuery: google 'jquery base64 encode' （网站 plugins.jquery.com 目前似乎离线，所以我无法确定）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-10T09:41:17.020

最好使用以下来自[https://stackoverflow.com/a/1789179的代码](https://stackoverflow.com/a/1789179)

```
///<summary>
/// Base 64 Encoding with URL and Filename Safe Alphabet using UTF-8 character set.
///</summary>
///<param name="str">The origianl string</param>
///<returns>The Base64 encoded string</returns>
public static string Base64ForUrlEncode(string str)
{
    byte[] encbuff = Encoding.UTF8.GetBytes(str);
    return HttpServerUtility.UrlTokenEncode(encbuff);
}
///<summary>
/// Decode Base64 encoded string with URL and Filename Safe Alphabet using UTF-8.
///</summary>
///<param name="str">Base64 code</param>
///<returns>The decoded string.</returns>
public static string Base64ForUrlDecode(string str)
{
    byte[] decbuff = HttpServerUtility.UrlTokenDecode(str);
    return Encoding.UTF8.GetString(decbuff);
} 
```

原因是 Base64 包含无效的 URL 字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T10:54:56.183

JavaScript-

```
var encodedStr = window.btoa("StringToEncode");

var decodedStr = window.atob( encodedStr );  //"StringToEncode" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T16:49:48.217

我不认为 Eugene Ryabtsev 接受的答案是正确的。如果你用 "\xff" 试试，你会看到：

```
DecodeFrom64(EncodeTo64("\xff")) == "?" (i.e. "\x3f") 
```

原因是 ASCIIEncoding 没有比代码 127 更进一步。从 128 到 255 的所有字符都不会被理解，将被转换为“？”。

因此，扩展编码是必要的，如下所示：

```
static public string EncodeTo64(string toEncode) {
    var e = Encoding.GetEncoding("iso-8859-1");
    byte[] toEncodeAsBytes = e.GetBytes(toEncode);
    string returnValue = System.Convert.ToBase64String(toEncodeAsBytes);
    return returnValue;
}
static public string DecodeFrom64(string encodedData) {
    var e = Encoding.GetEncoding("iso-8859-1");
    byte[] encodedDataAsBytes = System.Convert.FromBase64String(encodedData);
    string returnValue = e.GetString(encodedDataAsBytes);
    return returnValue;
} 
```

# iphone - IOS 5 页面卷曲，改变卷曲方向

> ID：10773342
> 
> 赞同：0
> 
> 时间：2012-05-27T10:46:00.987
> 
> 标签：iphone, ios, xcode, ios5

请告诉我如何将默认方向（从右到左）更改为从左到右？

![将方向更改为从左到右](../Images/5b769155cca48e4b8a4338186dddbaf9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:11:58.773

我认为这是您需要的方法：

```
- (void)setViewControllers:(NSArray *)viewControllers direction:(UIPageViewControllerNavigationDirection)direction animated:(BOOL)animated completion:(void (^)(BOOL finished))completion 
```

这是一个 pageViewController 方法：检查参考[这里](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)我认为设置方向应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:21:32.950

> 大多数配置的默认值是 UIPageViewControllerSpineLocationMin ，它将脊椎放置在屏幕的左侧或顶部，具体取决于导航方向是水平还是垂直。同样，**UIPageViewControllerSpineLocationMax 设置会将脊椎定位在 display 的右边缘或下边缘**。

希望这可以帮助。

**参考：** [http ://www.techotopia.com/index.php/Implementing_a_Page_based_iOS_5_iPhone_Application_using_UIPageViewController](http://www.techotopia.com/index.php/Implementing_a_Page_based_iOS_5_iPhone_Application_using_UIPageViewController)

# tree - OCaml 选项值树

> ID：10773345
> 
> 赞同：2
> 
> 时间：2012-05-27T10:46:32.930
> 
> 标签：tree, ocaml

我的任务是编写一个函数，该函数将给定的树存储在后缀顺序（后序）`‘a btree -> ‘a option list`类型的元素列表中。`‘a option`

内部节点将由 表示`None`，具有值的外部节点（叶子）`x`将由 表示`Some x`。

到目前为止，叶子很容易做，但是如何把它放在一个`'a option list`？

```
type 'a btree = L of 'a | N of 'a btree * 'a btree ;;

let rec store t =
    match t with
        | L x -> Some x
        | N (a,b) -> None ???   
;; 
```

我知道的第二个匹配案例是不正确的，但是如何解决呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:34:41.093

如果有人对这种改进感兴趣，可以通过线程化一个额外的累加器参数，在性能方面比 Len 的解决方案做得更好。

这个想法是从一个`store : 'a btree -> 'a option list`接受树并产生一个列表的函数转移到一个函数，它将树`store' : 'a btree -> 'a option list -> 'a option list`的元素添加到作为参数传递的*现有列表中。*

```
let rec store' t acc = match t with
  | L x -> Some x :: acc
  | N (a, b) ->
    store' a (store' b (None :: acc)) 
```

使用此定义，元素仅在最终结果列表中添加一次，而不是首先用于构建临时`store a`列表，然后通过运算符将第二次附加到最终结果中`(@)`。

参数顺序很重要，因为写`t`before`acc`给出了列表中最终元素顺序的直觉： 的元素`t`将在中已经存在的元素*之前*`acc`。这使得`N`案例可以很自然地阅读：很容易看出结果将首先具有 的元素`a`，然后是`b`，然后是`None`，然后是`acc`。

最后，您当然可以定义`store`为`store'`：

```
let store t = store' t [] 
```

习惯上将第一个定义包装在第二个定义中（如果您不想向用户公开这个“低级”功能），并给它与外部定义相同的名称（这不冲突因为它不是递归的，所以不进入内部范围）：

```
let store t =
  let rec store t acc = match t with
    | L x -> Some x :: acc
    | N (a, b) ->
      store a (store b (None :: acc))
  in store t [] 
```

当然，这个定义是否比 Len 的定义“更好”取决于你的评价标准是什么。Len 的解决方案更短，更易于阅读，并且更紧密地映射了原始问题。

（您可以通过使用惰性枚举而不是严格列表来获得两全其美，但那是另一回事了。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T10:57:51.600

如果您查看您的第一个案例，您会发现它也不存在；它正在返回`'a option`，但您希望该函数返回一个`'a option list`.

显然你会返回一个列表，所以首先修复它：

```
let rec store = function
  | L x -> [Some x]
  | N (a,b) -> [None] (* ??? *) 
```

现在让我们解决第二种情况；我们想追`None`加到我们的输出，但在此之前，我们需要我们的子树的节点：

```
let rec store = function
  | L x -> [Some x]
  | N (a,b) -> (store a) @ (store b) @ [None] 
```

`@`有类型

```
'a list -> 'a list -> 'a list 
```

即它将列表连接在一起。我们想加入左子树的结果列表，然后是右子树，最后是这个内部节点的结果。

# python - 从字符串中获取python类对象

> ID：10773348
> 
> 赞同：10
> 
> 时间：2012-05-27T10:47:02.453
> 
> 标签：python

> **可能重复：**
> [Python 中的动态模块导入](https://stackoverflow.com/questions/301134/dynamic-module-import-in-python)

可能是一个简单的问题！我需要遍历从设置文件传递的类列表（作为字符串）。类如下所示：

```
TWO_FACTOR_BACKENDS = (
    'id.backends.AllowToBeDisabled', # Disable this to enforce Two Factor Authentication
    'id.backends.TOTPBackend',
    'id.backends.HOTPBackend',
    #'id.backends.YubikeyBackend',
    #'id.backends.OneTimePadBackend',
    #'id.backends.EmailBackend',
) 
```

我现在需要`authenticate()`在这些类中的每一个上调用该函数（当然，除非被注释掉）。我很高兴遍历列表，我只需要知道如何在我的 foreach 循环中将字符串转换为 Class 对象，以便我可以调用`authenticate`它的方法。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-27T11:39:32.697

您想使用[模块来处理这样](http://docs.python.org/dev/library/importlib.html)[的`importlib`](http://docs.python.org/dev/library/importlib.html)模块加载，然后简单地使用[`getattr()`](http://docs.python.org/library/functions.html#getattr)来获取类。

例如，假设我有一个模块，`somemodule.py`其中包含类`Test`：

```
import importlib

cls = "somemodule.Test"
module_name, class_name = cls.split(".")

somemodule = importlib.import_module(module_name)

print(getattr(somemodule, class_name)) 
```

给我：

```
<class 'somemodule.Test'> 
```

添加诸如包之类的东西很简单：

```
cls = "test.somemodule.Test"
module_name, class_name = cls.rsplit(".", 1)

somemodule = importlib.import_module(module_name) 
```

如果模块/包已经被导入，它不会导入它，所以你可以很高兴地做到这一点，而无需跟踪加载模块：

```
import importlib

TWO_FACTOR_BACKENDS = (
    'id.backends.AllowToBeDisabled', # Disable this to enforce Two Factor Authentication
    'id.backends.TOTPBackend',
    'id.backends.HOTPBackend',
    #'id.backends.YubikeyBackend',
    #'id.backends.OneTimePadBackend',
    #'id.backends.EmailBackend',
)

backends = [getattr(importlib.import_module(mod), cls) for (mod, cls) in (backend.rsplit(".", 1) for backend in TWO_FACTOR_BACKENDS)] 
```

# jquery - 协调 jQuery 语法不一致

> ID：10773352
> 
> 赞同：0
> 
> 时间：2012-05-27T10:48:02.540
> 
> 标签：jquery, syntax

在使用 jQuery时，我似乎很难记住何时使用`<element>`（带括号）和何时使用（不带括号）。`element`例如比较从 a 中添加然后删除`option`a `select`：

```
$("#items").append( $('<option>', {value:"third", text:"Third"}) );
$("#items").find('option').remove(); 
```

该`append`方法需要括号，而该`find`方法不需要。如何调和这种不一致？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T10:51:41.310

创建新元素时使用方括号，就像编写 HTML 时使用方括号一样。

选择现有元素时不要使用方括号，就像在 CSS 中选择元素时不使用方括号一样。

# javascript - 打开子窗口时传递一个简单的字符串

> ID：10773355
> 
> 赞同：0
> 
> 时间：2012-05-27T10:48:37.377
> 
> 标签：javascript

在父窗口中：

```
window.open('page.php','nameIWant','toolbar=no') 
```

如何从新窗口代码中获取 window.open() 中指定的目标。

我试图检索 document.title、document.name 和 document.target，没有一个给我 'nameIWant' 或者是否有一种简单的方法可以在打开时获取一个字符串，该方法在 IE8 中有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T10:50:25.790

您不命名文档，而是命名新窗口。`window.name`在新打开的窗口中尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:55:20.950

获取`document`子窗口的对象只是引用新打开的窗口并从中获取`document`对象：

[http://jsfiddle.net/3pQk6/](http://jsfiddle.net/3pQk6/)

```
var child = window.open();

//set title
child.document.title = 'foo'

//text node in child window's body
child.document.body.appendChild(document.createTextNode('bar'));​​​ 
```

# variables - 批处理脚本 SET /p 输入特殊的西班牙语字符

> ID：10773356
> 
> 赞同：1
> 
> 时间：2012-05-27T10:48:43.027
> 
> 标签：variables, batch-file, set

根据我设置变量的方式，我得到不同的结果

情况1

```
@echo off
set TITLE=Cañete
setlocal EnableDelayedExpansion
set "line=<docTitle><text>%TITLE%</text></docTitle>"
( echo !line! ) > test1.txt 
```

案例2

```
set /P TITLE=     ( I introduce here the same word Cañete )
setlocal EnableDelayedExpansion
set "line=<docTitle><text>%TITLE%</text></docTitle>" 
( echo !line! ) > test2.txt 
```

我在 test1.txt 中获得了正确的文本：

```
<docTitle><text>Cañete</text></docTitle> 
```

在 test2.txt 中，我得到了错误的 txt：

```
<docTitle><text>ca¤ete</text></docTitle> 
```

我的问题：我如何才能在案例 2 中获得正确的

```
<docTitle><text>Cañete</text></docTitle> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T14:18:39.113

将 CHCP 命令应用于第二个代码：

```
SET /P TITLE=     ( I introduce here the same word Cañete )
SETLOCAL ENABLEDELAYEDEXPANSION
CHCP 1252 > NUL
SET "line=<docTitle><text>%TITLE%</text></docTitle>" 
( 
    ECHO !line! 
) > test2.txt
CHCP 850 > NUL 
```

我希望我有所帮助。

# symfony - 在 Symfony2 中管理用户对页面的访问

> ID：10773359
> 
> 赞同：0
> 
> 时间：2012-05-27T10:49:41.263
> 
> 标签：symfony, twig, access-control

我正在管理用户对我网站上某些页面的访问权限。我有 1 种完全经过身份验证的用户（`role: ROLE_MEMBER`, based on `ROLE_USER`），当然还有匿名用户。

假设我在网站上有 2 个页面 ( `/index`, `/account`)，两者都带有`secure: true`. 假设`/index`需要`role: IS_AUTHENTICATED_ANONYMOUSLY`和`/account`需要`role: IS_AUTHENTICATED_FULLY`（对于`ROLE_MEMBER`）。

我想在两个页面上为登录成员显示特殊的“帐户菜单”，所以在模板中我检查`is_granted('ROLE_MEMBER')`。

当然，这对 很有用`/account`。问题是，当成员被导航到`/index`（这是“匿名”页面）函数`is_granted('ROLE_MEMBER')`时返回`0`，然后`is_granted('IS_AUTHENTICATED_ANONYMOUSLY')`返回`1`。当会员再次导航到`/account`时，一切正常，无需重新输入密码（这意味着会员仍未注销）。

那么，问题是如何检测`/index`页面模板内登录用户的成员是什么？

更新。@alessandro1997 这是我的`app/config/security.yml`配置

```
security:
    encoders:
        AG\MemberBundle\Entity\Member:
            id: member_saltedpassword_encoder

    role_hierarchy:
        ROLE_MEMBER: ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_MEMBER, ROLE_ALLOWED_TO_SWITCH]

    providers:
        member_db:
            entity: { class: AGMemberBundle:Member, property: email }

    firewalls:
        members:
            pattern:  ^/account
            security: true
            form_login: 
                login_path: /account/login
                check_path: /account/login/check
                post_only: true
                username_parameter:  _email
                password_parameter:  _password
                default_target_path: /account/
                always_use_default_target_path: true
                # csrf token options
                csrf_parameter: _csrf_token
                intention: authenticate
            provider: member_db
            logout:
                path: /account/logout
                target: /
            remember_me:
                key:      "qwewqeqwerwxeweqweqwe"
                lifetime: 3600
                path:     /
                domain:   ~ # Defaults to the current domain from $_SERVER
        pages:
            pattern: ^/
            security: true
            anonymous: ~

    access_control:
        - { path: ^/account, roles: IS_AUTHENTICATED_FULLY }
        - { path: ^/, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:39:14.427

发生这种情况是因为您使用了两个独立的防火墙，并且您仅向一个防火墙验证用户 - 它们是完全独立的安全系统。您应该只设置一个防火墙并使用带有不同角色的 access_control 签名。

我遇到了非常相似的问题 - 在这里查看 -> [Symfony 2 - 防火墙和访问控制问题](https://stackoverflow.com/questions/9649527/symfony-2-firewall-and-access-control-issue/11011044#11011044)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:42:52.683

我认为这可能是一个问题：

```
access_control:
    - { path: ^/account, roles: IS_AUTHENTICATED_FULLY }
    - { path: ^/, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

首先，您要设置对 /account 的访问权限，然后使用对 index path: / 的访问权限来覆盖它。我想如果你能交换它可能没问题。此外，我认为对经过身份验证的用户使用访问控制毫无意义。改用它：

```
access_control:
    - { path: ^/account, roles: IS_AUTHENTICATED_FULLY } 
```

另一个问题是 login 和 login_check 隐藏在防火墙后面 - 尝试登录的用户将无法看到登录页面，因为您只为完全身份验证的用户设置了 /account 路径，现在：

```
form_login: 
            login_path: /account/login
            check_path: /account/login/check 
```

我相信它应该与类似的东西一起工作：

```
 firewalls:
          login_firewall: 
              pattern:    ^/account/login$
              anonymous:  ~
    access_control:
    - { path: ^/account, roles: IS_AUTHENTICATED_FULLY }
    - { path: ^/account/login, roles: IS_AUTHENTICATED_ANONYMOUSLY}
    - { path: ^/account/login_check, roles: IS_AUTHENTICATED_ANONYMOUSLY} 
```

但是，在我的应用程序中，我只是从 /account 中取出 login 和 login_check 路径，所以 security.yml 看起来像这样：

```
security:
firewalls:
    login_firewall: 
        pattern:    ^/login$
        anonymous:  ~
    secured_area:
        pattern:    ^/
        form_login:
            login_path:  /login
            check_path:  /login_check
            always_use_default_target_path: true
            default_target_path: /
        logout:
            path:   /logout
            target: /

providers:
    main:
        entity: { class: Core\UserBundle\Entity\User, property: username }
encoders:
    Core\UserBundle\Entity\User: 
        algorithm:   sha256
        iterations: 10
        encode_as_base64: true
access_control:
    - { path: ^/admin, roles: ROLE_SUPERADMIN }
    - { path: ^/user, roles: ROLE_USER }
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

我不是 Symfony 专家，它可能不是完美的解决方案，但我希望能有所帮助；）

# windows-phone-7 - 如何在 Windows Phone 7 中使用 Youtube 提要

> ID：10773361
> 
> 赞同：0
> 
> 时间：2012-05-27T10:49:44.833
> 
> 标签：windows-phone-7

我需要使用 youtube URL，例如 我的 windows phone 7 应用程序中的[http://www.youtube.com/user/nokia/feed示例。](http://www.youtube.com/user/nokia/feed)我想下载 feed url 并相应地列出它。有人可以帮我开首发吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:14:03.990

Google 有一个[适用于 YouTube 的 API](https://developers.google.com/youtube/getting_started#data_api)，可让您从 Windows Phone 设备轻松执行此任务。根据谷歌的网站：

关于 Google 数据 API

数据 API 允许程序执行 YouTube 网站上提供的许多操作。可以搜索视频、检索标准提要并查看相关内容。程序还可以验证用户身份以上传视频、修改用户播放列表等。

Data API 主要面向使用服务器端语言进行编程的开发人员。它对于希望与 YouTube 进行深度集成的网站或应用程序非常有用，例如捕获视频并允许用户将该视频直接上传到 YouTube 的应用程序。数据 API 使您能够以编程方式访问 YouTube 视频和用户信息，使您能够使用用户的现有信息个性化您的应用程序，并代表他们执行操作，例如对视频进行评分或评论。

开发人员指南*解释*了数据 API 如何使用 XML 和 HTTP 在基本级别上工作。本指南详细介绍了 YouTube API 服务器期望和返回的请求和响应。参考指南提供了有关这些请求和响应的结构的更多详细信息。参考指南定义了 API 的提要类型、HTTP 请求参数、HTTP 响应代码和 XML 元素。您可能还想了解 Google 数据协议和 Atom 发布协议，它们是构建数据 API 的标准。

为了更轻松地使用 API，我们有许多客户端库将 API 抽象为特定语言的对象模型。这些客户端库是开源的，可以在 Apache License 2.0 下使用和修改。有**Java**、**.NET**、**PHP**和**Python**的**开发人员指南**以及**示例代码**。

 ******探索此页面[YouTube API v2.0 - 了解提要和条目](https://developers.google.com/youtube/2.0/developers_guide_protocol_understanding_video_feeds)，其中指出：

当您检索视频供稿或搜索结果列表时，YouTube 会返回一个 Atom 供稿，其中包含结果集中每个视频的一个标签。响应中的根 XML 标记将是标记。除了结果集中各个视频的信息外，Feed 还将包含列表中的结果总数、列表中第一项的索引、列表中的项数以及有关该列表的其他元数据。喂养。

以下 XML 显示了包含视频供稿的 YouTube 数据 API 响应的格式：

```
<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns='http://www.w3.org/2005/Atom'
    xmlns:openSearch='http://a9.com/-/spec/opensearch/1.1/'
    xmlns:gml='http://www.opengis.net/gml'
    xmlns:georss='http://www.georss.org/georss'
    xmlns:media='http://search.yahoo.com/mrss/'
    xmlns:batch='http://schemas.google.com/gdata/batch'
    xmlns:yt='http://gdata.youtube.com/schemas/2007'
    xmlns:gd='http://schemas.google.com/g/2005'
    gd:etag='W/&quot;CE4EQH47eCp7ImA9WxRQGEQ.&quot;'>
  <id>tag:youtube,2008:standardfeed:us:top_rated</id>
  <updated>2008-07-18T05:00:49.000-07:00</updated>
  <category scheme='http://schemas.google.com/g/2005#kind'
    term='http://gdata.youtube.com/schemas/2007#video'/>
  <title>Top Rated</title>
  <logo>http://www.youtube.com/img/pic_youtubelogo_123x63.gif</logo>
  <link rel='alternate' type='text/html'
    href='https://www.youtube.com/browse?s=tr'/>
  <link rel='http://schemas.google.com/g/2005#feed'
    type='application/atom+xml'
    href='https://gdata.youtube.com/feeds/api/standardfeeds/top_rated?v=2'/>
  <link rel='http://schemas.google.com/g/2005#batch'
    type='application/atom+xml'
    href='https://gdata.youtube.com/feeds/api/standardfeeds/top_rated/batch?v=2'/>
  <link rel='self' type='application/atom+xml'
    href='https://gdata.youtube.com/feeds/api/standardfeeds/top_rated?...'/>
  <link rel='service' type='application/atomsvc+xml'
    href='https://gdata.youtube.com/feeds/api/standardfeeds/top_rated?...'/>
  <link rel='next' type='application/atom+xml'
    href='https://gdata.youtube.com/feeds/api/standardfeeds/top_rated?...'/>
  <author>
    <name>YouTube</name>
    <uri>http://www.youtube.com/</uri>
  </author>
  <generator version='2.0'
    uri='http://gdata.youtube.com/'>YouTube data API</generator>
  <openSearch:totalResults>100</openSearch:totalResults>
  <openSearch:startIndex>1</openSearch:startIndex>
  <openSearch:itemsPerPage>25</openSearch:itemsPerPage>
  <entry gd:etag='W/&quot;C0AMRn47eCp7ImA9WxRQGUw.&quot;'>
    <id>tag:youtube,2008:video:ZTUVgYoeN_b</id>
    <published>2008-07-05T19:56:35.000-07:00</published>
    <updated>2008-07-18T07:21:59.000-07:00</updated>
    <category scheme='http://schemas.google.com/g/2005#kind'
      term='http://gdata.youtube.com/schemas/2007#video'/>
    <category scheme='http://gdata.youtube.com/schemas/2007/keywords.cat'
      term='Shopping'/>
    <category scheme='http://gdata.youtube.com/schemas/2007/keywords.cat'
      term='parkas'/>
    <category scheme='http://gdata.youtube.com/schemas/2007/categories.cat'
      term='People' label='People'/>
    <title>Shopping for Coats</title>
    <content type='application/x-shockwave-flash'
      src='http://www.youtube.com/v/ZTUVgYoeN_b?f=gdata_standard...'/>
    <link rel='alternate' type='text/html'
      href='https://www.youtube.com/watch?v=ZTUVgYoeN_b'/>
    <link rel='http://gdata.youtube.com/schemas/2007#video.responses'
      type='application/atom+xml'
      href='https://gdata.youtube.com/feeds/api/videos/ZTUVgYoeN_b/responses?v=2'/>
    <link rel='http://gdata.youtube.com/schemas/2007#video.ratings'
      type='application/atom+xml'
      href='https://gdata.youtube.com/feeds/api/videos/ZTUVgYoeN_b/ratings?v=2'/>
    <link rel='http://gdata.youtube.com/schemas/2007#video.complaints'
      type='application/atom+xml'
      href='https://gdata.youtube.com/feeds/api/videos/ZTUVgYoeN_b/complaints?v=2'/>
    <link rel='http://gdata.youtube.com/schemas/2007#video.related'
      type='application/atom+xml'
      href='https://gdata.youtube.com/feeds/api/videos/ZTUVgYoeN_b/related?v=2'/>
    <link rel='http://gdata.youtube.com/schemas/2007#mobile'
      type='text/html' href='https://m.youtube.com/details?v=ZTUVgYoeN_b'/>
    <link rel='http://gdata.youtube.com/schemas/2007#uploader'
      type='application/atom+xml' href='http://gdata.youtube.com/feeds/api/users/_x5XG1OV2P6uZZ5FSM9Ttw?v=2'/>
    <link rel='self' type='application/atom+xml'
      href='https://gdata.youtube.com/feeds/api/standardfeeds/top_rated/v/ZTUVgYoeN_b?v=2'/>
    <author>
      <name>GoogleDevelopers</name>
      <uri>https://gdata.youtube.com/feeds/api/users/GoogleDevelopers</uri>
      <yt:userId>_x5XG1OV2P6uZZ5FSM9Ttw<</yt:userId>
    </author>
    <yt:accessControl action='comment' permission='allowed'/>
    <yt:accessControl action='commentVote' permission='allowed'/>
    <yt:accessControl action='videoRespond' permission='moderated'/>
    <yt:accessControl action='rate' permission='allowed'/>
    <yt:accessControl action='embed' permission='allowed'/>
    <yt:accessControl action='list' permission='allowed'/>
    <yt:accessControl action='autoPlay' permission='allowed'/>
    <yt:accessControl action='syndicate' permission='allowed'/>
    <gd:comments>
      <gd:feedLink href='https://gdata.youtube.com/feeds/api/videos/ZTUVgYoeN_b/comments'
        countHint='9416'/>
    </gd:comments>
    <georss:where>
      <gml:Point>
        <gml:pos>21.37124437061831 -157.87353515625</gml:pos>
      </gml:Point>
    </georss:where>
    <yt:hd/>
    <media:group>
      <media:category label='People'
        scheme='http://gdata.youtube.com/schemas/2007/categories.cat'>People
      </media:category>
      <media:content 
        url='http://www.youtube.com/v/ZTUVgYoeN_b?f=gdata_standard...'
        type='application/x-shockwave-flash' medium='video'
        isDefault='true' expression='full' duration='215' yt:format='5'/>
      <media:content
        url='rtsp://rtsp2.youtube.com/ChoLENy73bIAEQ1kgGDA==/0/0/0/video.3gp'
        type='video/3gpp' medium='video'
        expression='full' duration='215' yt:format='1'/>
      <media:content
        url='rtsp://rtsp2.youtube.com/ChoLENy73bIDRQ1kgGDA==/0/0/0/video.3gp'
        type='video/3gpp' medium='video'
        expression='full' duration='215' yt:format='6'/>
      <media:credit role='uploader' scheme='urn:youtube'
          yt:display='GoogleDevelopers'>GoogleDevelopers</media:credit>
      <media:description type='plain'>
        What could make for more exciting video?
      </media:description>
      <media:keywords>Shopping, parkas</media:keywords>
      <media:license type='text/html' href='http://www.youtube.com/t/terms'>youtube</media:license>
      <media:player url='https://www.youtube.com/watch?v=ZTUVgYoeN_b'/>
      <media:thumbnail url='http://img.youtube.com/vi/ZTUVgYoeN_b/2.jpg'
        height='90' width='120' time='00:00:03.500'/>
      <media:thumbnail url='http://img.youtube.com/vi/ZTUVgYoeN_b/1.jpg'
        height='90' width='120' time='00:00:01.750'/>
      <media:thumbnail url='http://img.youtube.com/vi/ZTUVgYoeN_b/3.jpg'
        height='90' width='120' time='00:00:05.250'/>
      <media:thumbnail url='http://img.youtube.com/vi/ZTUVgYoeN_b/0.jpg'
        height='360' width='480' time='00:00:03.500'/>
      <media:title type='plain'>Shopping for Coats</media:title>
      <yt:aspectRatio>widescreen</yt:aspectRatio>
      <yt:duration seconds='79'/>
      <yt:uploaded>2008-07-05T19:56:35.000-07:00</yt:uploaded>
      <yt:uploaderId>UC_x5XG1OV2P6uZZ5FSM9Ttw</yt:uploaderId>
      <yt:videoid>ZTUVgYoeN_b</yt:videoid>
    </media:group>
    <gd:rating min='1' max='5' numRaters='14763' average='4.93'/>
    <yt:recorded>2008-07-04</yt:recorded>
    <yt:statistics viewCount='383290' favoriteCount='7022'/>
    <yt:rating numDislikes='19257' numLikes='106000'/>
  </entry>
</feed> 
```

作为替代方案，这可以通过解析 DOM 使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)来完成，但是在跳下悬崖进行 DOM 解析和/或将其与 Google YouTube API 结合使用之前，您应该探索上述解决方案。

资料来源：[谷歌](https://developers.google.com/youtube/getting_started#data_api)******

# linq - linq中的外连接

> ID：10773362
> 
> 赞同：1
> 
> 时间：2012-05-27T10:49:49.060
> 
> 标签：linq, entity-framework, c#-4.0, join

我在sqlServer中有3个表如下：

Cost_Types

```
Id   COST_NAME
-------------
1      A
2      B
3      C
4      D
5      E
6      F
7      Z 
```

和请求表

```
Id   No
----------
1     100
2     200
3     300 
```

和 Cost_Request (=clearance_cost)

```
RequestId     CostId   Amount
-------------------------------
1               2       200
1               3       400 
```

我想得到这个结果

```
RequestId     CostId   Amount
    -------------------------------
    1               2       200
    1               3       400
    1               1        0
    1               4        0
    1               5        0
    1               6        0 
```

我写这段代码

```
var context = new CLEARANCEEntities();
        var items = (from c in context.COST_TYPES
                     join t in context.CLEARANCE_COST
                         on c.COST_ID equals t.COST_ID into outer
                     from t in outer.DefaultIfEmpty()
                     where t. RequestId==1
                     select new
                          {
                            c.COST_ID,
                            c.COST_NAME, I = ((t == null) ? 0 : t.COST_AMOUNT)
                          }).ToList(); 
```

这段代码只返回这个

```
 RequestId     CostId   Amount
    -------------------------------
    1               2       200
    1               3       400 
```

我想如果改变查询如下：

```
var context = new CLEARANCEEntities();
            var items = (from c in context.COST_TYPES
                         join t in context.CLEARANCE_COST
                             on c.COST_ID equals t.COST_ID into outer
                         from t in outer.DefaultIfEmpty()
                         where t.RequestId==2               
                         select new
                                    {
                                        c.COST_ID,
                                        c.COST_NAME, I = ((t == null) ? 0 : t.COST_AMOUNT)
                                    }).ToList(); 
```

返回此数据

```
 RequestId     CostId   Amount
    -------------------------------
    2               1      0
    2               2      0
    2               3      0
    2               4      0
    2               5      0
    2               6      0 
```

请帮我。谢谢大家

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T17:06:06.500

我知道 LEFT JOIN'ing 的 GroupJoin->SelectMany->DefaultIfEmpty 技术很流行......但我认为 SelectMany->NavigationPropertyJoin->DefaultIfEmpty 技术更清晰。

```
var query =
  from c in context.CostTypes
  from xr in c.CostRequests
    .Where(xrRecord => xrRecord.RequestId == 1)
    .DefaultIfEmpty()
  select new {
    CostType = c,
    Amount = xr == null ? 0 : xr.Amount
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T13:43:08.213

对问题的不同理解后完全修改答案：

***新答案***

*尝试将您的 WHERE 条件移动到 JOIN 子句。*

您没有进行内部联接 - 因此联接的条件在这里是可以的，并且当您有匹配项时不会消除您的空值。但是，如果您将 t.RequestId==whatever 放在 where 子句中，您只需将它们过滤掉。

***OLD ANSWER -INCORRECT- ANSWERED WRONG QUESTION*** 看起来 CostId 和 RequestId 在插入到 Cost_Request 表时已被交换，因此您正在进行左连接并加入 c.COST_ID 等于 t.COST_ID 但 t.COST_ID 确实包含 RequestId 在表中的实际数据。这将完全解释您所看到的结果集。**要测试这个理论，请将您的加入更改为**

```
c.COST_ID equals t.REQUEST_ID 
```

看看你是否得到你期望的结果。虽然没有看到您的实体模型这很难，因为提供的查询与提供的表中的名称不匹配，我正在做一些猜测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T14:38:40.770

对我来说，您似乎正在使用该`where t == 1`语句过滤掉所有其他行。我不确定`t`在那个阶段你可以过滤什么 - 它似乎对应于 clearence_cost.request_id。

您是否尝试过不带该`where`子句的查询？

此外，您在 select 语句中的内容非常令人困惑：

```
 select new
         {
            c.COST_ID,
            c.COST_NAME, 
            I = ((t == null) ? 0 : t.COST_AMOUNT)
          } 
```

查看“预期”结果集，似乎 c.Cost_id == requestId ?, c.CostName == cost_id ？Cost_name 到底是什么？

老实说，如果您想解决这个问题，您必须先投入一些时间并整理帖子中的烂摊子。你不能指望人们猜到为什么名字不同，并且神奇地知道你的意思。

# android - 应用程序仅对 android 2.1 和 2.2 可见？

> ID：10773364
> 
> 赞同：1
> 
> 时间：2012-05-27T10:50:01.087
> 
> 标签：android

嗨，我的应用程序有问题。它仅对 Android 2.1 和 2.2 可见。这是我的清单`android:anyDensity="false"`是因为我正在调整图像大小。我已经在从 2.1 到 4.0 的几乎所有 Android 版本上尝试了我的应用程序，并且它工作正常，但在 2.2 之后的任何较新版本的 Google Play 上都看不到它，或者它说不兼容。

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15"/>
<uses-permission android:name="android.permission.WAKE_LOCK" android:required="false"/>
<supports-screens  android:anyDensity="false"/> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:45:10.200

从 uses-permission 标签中删除 android:required="false"。您不应该将其放在权限标签中，而是放在使用功能标签中......无论如何，WAKE_LOCK 不需要任何必需的声明：

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T10:59:11.767

```
<supports-screens android:resizeable="true"
                        android:smallScreens="true"
                        android:normalScreens="true"
                        android:largeScreens="true"
                  android:anyDensity="true"></supports-screens> 
```

将此添加到您的清单文件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T10:54:31.953

从[文档](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)中：

*android:anyDensity 指示应用程序是否包含适应任何屏幕密度的资源。*

*对于支持 Android 1.6（API 级别 4）及更高版本的应用程序，默认情况下这是“真”，除非您绝对确定应用程序必须运行，否则不应将其设置为“假”。唯一可能需要禁用此功能的情况是您的应用程序直接操作位图（有关更多信息，请参阅 Supporting Multiple Screens 文档）。*

因此，它应该设置为true。

```
<supports-screens  android:anyDensity="true"/> 
```

# windows - OllyDbg 在 Windows 7 x64 中不起作用

> ID：10773365
> 
> 赞同：1
> 
> 时间：2012-05-27T10:50:08.503
> 
> 标签：windows, debugging, process, cracking, ollydbg

Windows 7 x64 和 OllyDbg 1.10

我刚开始学习调试技术，并尝试使用 OllyDbg 调试一个名为“crack_me.exe”的演示程序。但我遇到如下问题：

我在 'crack_me.exe' 中设置了一个断点并按 F9 运行程序，但 Windows 会提示一个对话框（我的操作系统是中文的）：
[![让我崩溃](../Images/357f24e9bfa40d6b6830fac1f91d3e8e.png)](https://i.stack.imgur.com/OXG22.jpg)

> 一般含义：
> crack_me.exe 已停止工作。
> Windows 可以连接到 Internet 并找到解决此问题的方法。
> 
> *   连接到 Internet 以查找解决方案并关闭程序
> *   关闭程序
> *   调试程序

如果我选择第三个选项，那么 Windows 会说： [![在此处输入图像描述](../Images/4f6ad41feb9cbf0437c6fed5a193f8ee.png)](https://i.stack.imgur.com/SbH2x.jpg)

> 一般含义：
> crack_me.exe 附加了调试器，但调试器未设置为调试未处理的异常。如果要调试此异常，则必须分离当前调试器。

我选择忽略所有异常 Ollydbg 设置，如下图所示： [![在此处输入图像描述](../Images/6c0b1bf8308fb61f5bfd0ef4814aa8d7.png)](https://i.stack.imgur.com/rYnp4.jpg)

我只想知道为什么会出现这个问题以及如何解决它。预计所有回复。谢谢你。

* * *

奇怪的是，今天这个问题再次发生，即使是同一个应用程序，crack_me.exe。这次我没有安装任何插件，但 Windows 仍然会提示 crash_me.exe（与其他应用程序相同）崩溃。为什么昨天Olly正常工作，今天又出现问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T16:08:59.197

首先，确保您以管理员身份运行 ollydbg（我通过资源管理器中的属性对话框全局授予了我的 olly exe 管理员权限）。

其次，最重要的是，您还需要关闭对 SSE 寄存器的检查（这需要在 Windows 7/Vista WOW64 下不起作用的代码注入），可以通过选项菜单 -> 调试选项（`ctrl`+ `o`) -> 寄存器选项卡 -> 解码 SSE 寄存器。我还建议取消任何 IP 的解码寄存器，当这两个选项都被禁用时，olly 在任何基于 Vista/Win7 内核的操作系统下都对我有用）。

另外，请确保您没有使用任何插件，大多数与Windows 7 WOW64不兼容，但它们通常会导致启动olly时崩溃，当您再次使用olly时，可以一个一个添加插件，验证他们实际上工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-12T14:06:16.450

我知道这是迟到的答案:)）但是对于遇到此错误的人来说是调试选项（ALT + O）->异常下的选项并取消选中“单步中断”和“忽略自定义异常或愤怒”...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T11:14:47.807

OllyDbg 在 Windows 7 x64 和 2008R2 上运行良好。似乎问题出在crackme应用程序上——它正在崩溃。

或许您应该尝试使用其他 32 位应用程序（notepad2 或其他简单应用程序）的 olly，看看 olly 是否确实是问题的根源......

# playn - PlayN image.getRgb() 用法

> ID：10773367
> 
> 赞同：1
> 
> 时间：2012-05-27T10:50:33.043
> 
> 标签：playn

我试图弄清楚如何使用'image.getRgb()' API。为了测试，我只是复制并显示了一个精确的图像，但无法让它与代码一起工作：

```
 int picWidth = (int) image.width();
    int picHeight = (int) image.height();
    buf = new int[picWidth * picHeight];

    image.getRgb(0, 0, picWidth, picHeight, buf, 0, picWidth);
    int color = 0;
    for(int y=0; y < picHeight; y ++) {
        for(int x=0; x < picWidth; x++) {
            color = buf[x*y];
            layer.surface().setFillColor(color);
            layer.surface().fillRect(x,y, 1, 1);
        }
    } 
```

我期望上面的代码是逐像素复制到缓冲区，然后在表面上显示完全相同的图像。但是，这是我的原始图片和结果图片：

原始图像 ![在此处输入图像描述](../Images/1cdb184eb536c969e9ceea915d52b480.png)

结果图片 ![在此处输入图像描述](../Images/21d8fc05c3f8a36dc3b9631301b89fe5.png)

我想我误解了 getRgb() API，正确的使用方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T11:11:35.967

你确定你不是说：

```
color = buf[x + (y * width)]; 
```

那应该从缓冲区中获得正确的 x, y 坐标。

# python - PostgreSQL/性能一个通用游标或为每个查询创建

> ID：10773372
> 
> 赞同：1
> 
> 时间：2012-05-27T10:51:18.970
> 
> 标签：python, postgresql, cursor, python-db-api

我正在构建一个脚本来将一些数据存储在数据库中。我第一次使用 PostgeSQL，一切都按计划进行。我正在考虑在 PostgreSQl 中使用光标，以及如果我制作很多光标而一个就足够了怎么办。但我不想将光标传递给我所有的 SQL 函数。

这是我的简化示例。

```
dbConn, dbCurs = openDataBase(config)
doSomeThing(dbCurs, name, age, listOfJohns)

def doSomething(dbCurs, name, age, listOfPoeple):
  listOfPoeple SQLnrOfPeopleNamed(dbCurs, name, age)
  #here some fine checking if there's a list
  #room for more code. etc. etc.

def SQLnrOfPeopleNamed(dbCurs, inpName, inpAge)
  dbCurs.execute(Some SQL-thingy)
  #check and return result 
```

dbCurs 是传递给每个包含 SQL 查询的函数的值。现在是 dbCurs 非常特定于 PostgreSQL。每当我将此数据库更改为 eq MySQL 时，我都必须重写查询函数 SQLnrOfPeople，以及与这些函数的接口。

我想有我只需要重写SQL函数的功能的情况。所以，我正在考虑在每个 SQL 函数中创建一个 Cursor 类并关闭它。这将产生一个更通用的接口，其中只需要连接。

```
dbConn = openDataBase(config)
doSomeThing(dbConn, name, age, listOfJohns)

def doSomething(dbConn, name, age, listOfPoeple):
  listOfPoeple SQLnrOfPeopleNamed(dbConn, name, age)
  #here some fine checking if there's a list
  #room for more code. etc. etc.

def SQLnrOfPeopleNamed(dbConn, inpName, inpAge)
   dbCurs = dbConn.cursor()
   dbCurs.execute(Some SQL-thingy)
   #check and return result 
```

但我会创建并关闭更多游标。我在手册中阅读应该没问题，我认为这是一个很好的解决方案。但我还是有点怀疑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:20:29.017

一般来说，顺序打开和关闭多个游标完全没有问题。您可以将游标视为基本上是指向查询结果集的指针（它是一组指向缓存数据的指针）。打开游标分配一个指针，关闭一个指针释放内存。

一般来说，我认为逻辑清洁度在这里是最好的，所以每个查询都有一个游标是要走的路。

# bash - BASH - 我怎样才能有执行的轨迹？比如第一次和第二次运行忽略什么？

> ID：10773377
> 
> 赞同：0
> 
> 时间：2012-05-27T10:51:59.250
> 
> 标签：bash, centos, fedora, archlinux

我有一个在系统首次启动时运行的脚本。但是第二次使用相同的脚本也只跳过一个命令。

所以我尝试使用变量，但似乎没有办法跟踪它。

例如：`/var/tmp/runme.sh`<< 使用相同的脚本

```
#!/bin/bash
mkfifo pipe;
mkfifo pipe1;
ps aux | grep Java.jar | awk '{print $2}' | xargs kill -9;
sleep 1;

#
# Question on this:
# only one time it execute / its my application boot process
# - this is only one time on system startup
#
##############################################################
export DISPLAY=:0.0 && java -cp Java.jar main.Boot &

#
# second time this following should always execute
# This is my software kernel, which crash often 
# on the fly i restart it
#
while true; do cat /var/jpeg1.jpeg >> pipe; done
while true; do cat /var/jpeg2.jpeg >> pipe1; done
export DISPLAY=:0.0 && java -cp Java.jar main.Desktop & 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:02:52.840

在其中创建一个锁定文件`/var/run`（假设您的系统`/var/run`在启动时自动清除 - 或者`/tmp`如果效果更好则使用）。检查锁定文件是否存在，并根据是否存在采取不同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:03:09.153

只需使用锁定文件 :) 例如：在脚本开头添加：

```
lockfile= /var/lock/MyLockFile
if [! -f $lockfile ] then
  touch $lockfile
  ....place your run-once commands here...
fi 
```

请记住在系统关闭时删除脚本中的 $tmpfile 或在启动早期的脚本中删除！

# php - 尝试从字符串创建数组（文件/文件夹结构）

> ID：10773379
> 
> 赞同：2
> 
> 时间：2012-05-27T10:52:08.487
> 
> 标签：php, arrays, recursion

我有这个字符串：

```
css/
reset.css
style.css
img/
js/
lib/
    jquery.js
script.js
index.php 
```

我想要那个数组：

```
Array
(
    [js/] => Array
        (
            [lib/] => Array
                (
                    [jquery.js] => 
                )
            [script.js] => 
        )
    [index.php] => 
) 
```

我写了这段代码：

```
class Structurer{
    public function parse(){
        $output = array();
        $level = 0;
        $currentFolder = '';

        function throughtLevels(&$arr, $key, $newKey, $newValue){
            if(is_array($arr)){
                foreach($arr as $k => $v){
                    if($k == $key){echo 'ok';
                        if(is_array($arr[$k]))  $arr[$k] = array_merge($arr[$k], array($newKey => $newValue));
                        else    $arr[$k] = array($newKey => $newValue);
                    }
                    else    throughtLevels($arr[$k], $key, $newKey, $newValue);
                }
            }
        } // throughtLevels
        while($this->moveToNextLine()){
            $curl = '';

            if(preg_match_all('#\t#', $this->currentLine, $n)){
                $this->currentLine = str_replace("\t", '', $this->currentLine);
                $level = count($n[0]);
            }
            else $level = 0;

            if(preg_match_all('#\[(.*)\]#', $this->currentLine, $com)){
                $this->currentLine = str_replace($com[0], '', $this->currentLine);
                $curl = implode('', $com[1]);
            }

            if(preg_match('#\/#', $this->currentLine)){
                if($level > 0)  throughtLevels($output, $currentFolder, $this->currentLine, array());
                else    $output[$this->currentLine] = array();

                $currentFolder = $this->currentLine;
            } else {
                if(!empty($this->currentLine)){
                    if($level > 0)throughtLevels($output, $currentFolder, $this->currentLine, $curl);
                    else    $output[$this->currentLine] = $curl;
                }
            }
        }

        echo '<pre>' . print_r($output, 1) . '</pre>';
    } // parse(value)

    private function moveToNextLine(){
        if($this->currentLineNum >= count($this->lines) -1) return false;
        $this->currentLine = $this->lines[++$this->currentLineNum];
        return true;
    } // moveTonextLine

    private static function cleanup($value){
        $value = str_replace(array("\r\n", "\r"), "\n", $value);
        $value = preg_replace('#/\*[^*]*\*+([^/][^*]*\*+)*/#', '', $value);
        $value = preg_replace('#^\n#', '', $value);

        return $value;
    } // cleanup(value)

    public function __construct($value){
        $this->base = dirname(__FILE__);
        $this->currentLineNb = -1;
        $this->currentLine = '';
        $this->lines = explode("\n", self::cleanup($value));

        $this->parse();
    } // __construct(value)

    private $lines = array();
    private $currentLineNum = -1;
    private $currentLine = '';
} // Structurer
$input = <<<EOT
css/
    reset.css
    style.css
img/
js/
    lib/
        jquery.js
    script.js
index.php
EOT;
$arr = new Structurer($input); 
```

并产生该 Array ：

```
Array
(
    [js/] => Array
        (
            [lib/] => Array
                (
                    [jquery.js] => 
                    [script.js] => 
                )
        )
    [index.php] => 
) 
```

我真的不知道如何解决这个问题。我想我不远了，但我不能前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:58:19.750

我建议你看看[`RecursiveDirectoryIterator`](http://au2.php.net/recursivedirectoryiterator)

要进行线性迭代，请使用：

```
foreach (new RecursiveIteratorIterator(new RecursiveDirectoryIterator('.')) as $entry) {
    // do stuff with $entry
} 
```

# jquery - 无法使用 Jquery .on 对动态创建的元素触发操作

> ID：10773384
> 
> 赞同：1
> 
> 时间：2012-05-27T10:52:52.213
> 
> 标签：jquery, bind, live

与许多用户一样，我似乎无法将动作绑定/触发动态创建的元素。

使用我现有的元素，该函数正在运行，使用动态元素，当我的链接被点击时，url 被加载。（url不重要，在写其他动作之前是为了我的测试）

我错过了什么？我正在使用 jQuery 1.7.1

谢谢！！

```
jQuery('.image-widget-data').append('<a href="http://www.google.com">Select Files</a>');

jQuery("body").on("click", ".image-widget-data a", function(){ 
   event.preventDefault();             
   alert("Goodbye!"); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:54:21.690

您可能缺少`event`单击处理程序函数中的声明。

```
jQuery("body").on("click", ".image-widget-data a", function(event){ 
                                                            ^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:56:44.257

```
jQuery(".image-widget-data").on("click", "a", function( event ){ 
   event.preventDefault();             
   alert("Goodbye!"); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T10:55:12.280

您忘记将事件作为参数传递

```
jQuery("body").on("click", ".image-widget-data a", function(event){ 
   event.preventDefault();             
   alert("Goodbye!"); 
}); 
```

[http://jsfiddle.net/fbaWW/](http://jsfiddle.net/fbaWW/)

# regex - Perl 正则表达式不起作用

> ID：10773386
> 
> 赞同：0
> 
> 时间：2012-05-27T10:53:21.403
> 
> 标签：regex, perl, matching

您好，我正在尝试使用 Perl 脚本获取一些东西。

```
my $fileName = "I_Payment_OK_2";
my ($msgType, $OfaCode, $msgCount) = $parseFileName;

#my $msgType = $parseFileName;
print $OfaCode;
print $msgType;
print $msgCount;

# parse the values from filename
sub  parseFileName {
     # parse the message type
     if($fileName =~ m/^(I|O)/) {
        $var1 = $1;
     }  
     # parse the OFAC trace keyword
     if($fileName =~ m/^[A-Z_][A-Za-z_]([A-Z]+)\w(\d+)$/) {
        $var2 = $2;
        $var3 = $3;
     }
     # return the message type & OFAC trace
     return ($var1, $var2, $var3);
     #return $var1; 
} 
```

什么都没有打印出来。任何人都可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:06:55.373

您应该*始终* 在程序开始时`use strict`使用. 这尤其适用于您寻求代码帮助时，因为此措施可以快速揭示许多简单的错误。`use warnings``my`

从您的代码的外观看来，您应该[`split`](http://perldoc.perl.org/functions/split.html)改用它。

该程序在下划线处拆分文件名字符串，并提取第一个和最后两个字段。

```
use strict;
use warnings;

my $fileName = "I_Payment_OK_2";

my ($msgType, $OfaCode, $msgCount) = (split /_/, $fileName)[0, -2, -1];

print $msgType, "\n";
print $OfaCode, "\n";
print $msgCount, "\n"; 
```

**输出**

```
I
OK
2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:56:38.220

你永远不会调用 parseFileName()。大概`my ($msgType, $OfaCode, $msgCount) = $parseFileName;`应该是`my ($msgType, $OfaCode, $msgCount) = parseFileName();`

# java - 在 Ubuntu 上的 Tomcat 中加载共享本机库

> ID：10773390
> 
> 赞同：3
> 
> 时间：2012-05-27T10:53:54.940
> 
> 标签：java, tomcat, shared-libraries

如何在 Ubuntu 上的 Tomcat6 中加载共享库？

我创建了一个名为“libawragrids.so”的库“awragrids”并将其放置在

```
/var/lib/tomcat6/shared 
```

我在调用 start tomcat 的终端中设置了以下环境变量：

```
export PATH=$PATH:/var/lib/tomcat6/shared
export JAVA_OPTS="-Djava.library.path=/var/lib/tomcat6/shared"
export LD_LIBRARY_PATH=/var/lib/tomcat6/shared 
```

然后我尝试加载库

```
private static final String GRIDTOOL_LIBRARY_NAME = "awratools";

static {
    try {
        System.loadLibrary(GRIDTOOL_LIBRARY_NAME);
    } catch (java.lang.SecurityException e) {
        System.out.println("Not allowed to load dynamic library " + GRIDTOOL_LIBRARY_NAME + ".");
        throw e;
    } catch (java.lang.UnsatisfiedLinkError e) {
        System.out.println("Failed to load dynamic library " + GRIDTOOL_LIBRARY_NAME + ".");
        throw e;
    }
} 
```

并在第二个捕获块中结束。我所做的所有阅读都表明前两个导出中的任何一个都可以解决问题。在 Windows 上，我将“awragrids.dll”放在路径上的文件夹中，它工作正常。

我在这上面花**了**太多时间，真的需要睡一会儿……请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T00:21:21.363

我认为这可能是我的一个错误。当我最初编译该库时，它有一个不同的名称（“libawargrids.so”），所以我将它重命名为：

```
mv libawragrids.so libawratools.so 
```

虽然等价物似乎适用于 Windows，但也许它不适用于 Linux。当我使用名称“awratools”（生成“libawratools.so”）再次编译它时，问题就消失了。

虽然现在问题已得到解决，但如果有人可以确认重命名可能是导致它的原因（并可能解释原因），那将不胜感激。

很抱歉浪费了人们的时间，但感谢您的帮助！

PS我现在已经放置了这些行：

```
export JAVA_OPTS="-Djava.library.path=/var/lib/tomcat7/shared"
export LD_LIBRARY_PATH=/var/lib/tomcat7/shared 
```

在 /etc/init.d/tomcat6 的顶部，所以哪个用户启动服务并不重要。请让我知道这是否出于某种原因不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:10:03.003

确保 Tomcat 的启动脚本--in--实际上是在使用`catalina.sh`from环境。在我现在正在查看的系统上的脚本中，有人在没有引入环境设置的情况下输入了完整的定义。`/var/lib/tomcat6/bin``JAVA_OPTS`

# c++ - 从 fstream 获取文件名（或路径）

> ID：10773391
> 
> 赞同：56
> 
> 时间：2012-05-27T10:53:56.057
> 
> 标签：c++, file-io, fstream

`fstream`我可以从对象中获取文件名或其路径吗？我查看了的方法`fstream`并没有找到任何接近它的东西。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-27T11:04:11.550

不，这是不可能的，至少在符合标准的库实现中是不可能的。

fstream 类不存储文件名，也不提供任何检索它的函数。

因此，跟踪此信息的一种方法是`std::map`用作：

```
std::map<std::fstream*, std::string> stream_file_table;

void f()
{
  //when you open a file, do this:
  std::fstream file("somefile.txt");

  stream_file_table[&file] = "somefile.txt"; //store the filename

  //..
  g(file);
}
void g(std::fstream & file)
{
    std::string filename = stream_file_table[&file]; //get the filename
    //...
} 
```

或者，也简单地传递文件名。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-27T11:34:09.240

你也可以设计一个小类，它继承自`fstream`a 并且行为类似于 a `fstream`，但也存储它的文件名。

# iphone - 如何在 Iphone 中对齐中心单元格文本？

> ID：10773395
> 
> 赞同：3
> 
> 时间：2012-05-27T10:54:52.767
> 
> 标签：iphone, objective-c, ios, uitableview

我无法对齐中心单元格文本。我想知道这是否可能是 XML 的问题？

我正在创建一个 UILabel，将其与中心对齐并将其添加到单元格中。这是我的代码示例：

```
 if (cell==nil)
{
cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
cell.selectionStyle = UITableViewCellSelectionStyleNone;
UILabel *lblMenuTitle = [[UILabel alloc] initWithFrame:CGRectMake(20, 10, 250, 30)];
NSString *sectionString = [NSString stringWithFormat:@"%@",[[arrDataSection objectAtIndex:indexPath.row] valueForKey:kCasesName]];
[lblMenuTitle setText:sectionString];
[lblMenuTitle setTextAlignment:UITextAlignmentCenter];
lblMenuTitle.font = [UIFont boldSystemFontOfSize:18.0];
    [lblMenuTitle setNumberOfLines:0];
    [lblMenuTitle setTag:[[NSString stringWithFormat:@"1%d",indexPath.row] intValue]];
    [lblMenuTitle setLineBreakMode:UILineBreakModeWordWrap];
[lblMenuTitle setBackgroundColor:[UIColor clearColor]];
[cell addSubview:lblMenuTitle];

CGRect frame;
    CGSize size;

    frame = CGRectMake(20, 5, 250, 30);

    size = [lblMenuTitle.text sizeWithFont:[UIFont systemFontOfSize:18.0]
                               constrainedToSize:CGSizeMake(frame.size.width, 9999)
                                   lineBreakMode:UILineBreakModeWordWrap];

    frame.size = CGSizeMake(size.width+20, size.height);

    lblMenuTitle.frame = frame;
  }

  return cell; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T11:08:17.450

您计算文本的大小 ( `size = [lblMenuTitle.text sizeWithFont:…]`) 并修改`lblMenuTitle`标签的框架，使其宽度为文本的大小 (+20px)...</p>

因此，文本不在单元格中居中是很正常的：文本在 UILabel( `[lblMenuTitle setTextAlignment:UITextAlignmentCenter]`) 中居中，但标签与文本本身的宽度相同！因此，如果文本是 100px 宽，您的标签将是 120px 宽……但其框架的原点仍然是 x=20 ！

要么保持标签宽度与单元格宽度一样大，并让文本对齐完成将文本居中到标签中的工作，或者如果您仍想将标签大小调整为与文本相同的宽度，那么也将其框架居中（`lblMenuTitle.center = cell.center`例如）

# c# - Internet Explorer 自动访问图像

> ID：10773401
> 
> 赞同：0
> 
> 时间：2012-05-27T10:55:28.490
> 
> 标签：c#, internet-explorer

嗨，我有 ac# IE 自动化脚本，我正在尝试从 HTMLImgClass 检索图像，我无法从缓存中获取图像，因为它没有保存，我不能只是重新发送请求到 src，因为新图像返回，所以我需要一种访问浏览器内存中图像的方法。

```
captcha_image = (HTMLImgClass)GetElementByPosition("img", 0, ie1); 
```

使用上述分配检索对象，效果很好，但我不知道我可以使用哪些可用的方法来获取图像。

感谢您的时间

已解决对于其他感兴趣的人，我以这种方式解决了，我决定将图像复制到剪贴板，然后将其另存为 bmp

```
captcha_image = (HTMLImgClass)GetElementByPosition("img", 0, ie1);
                                    IHTMLImgElement captcha_image1 = (IHTMLImgElement)captcha_image;
                                    IHTMLDocument2 doc = (IHTMLDocument2)wb1.Document;
                                    IHTMLControlRange imgRange = (IHTMLControlRange)((HTMLBody)doc.body).createControlRange();
                                    imgRange.add((IHTMLControlElement)captcha_image1);

                                    imgRange.execCommand("Copy", false, null);
                                    using (Bitmap bmp = (Bitmap)Clipboard.GetDataObject().GetData(DataFormats.Bitmap))
                                    {
                                        bmp.Save(@"C:\skt.bmp");
                                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:43:49.397

我假设这与[您的其他问题有关](https://stackoverflow.com/questions/10677088/c-sharp-and-internet-explorer-automation-accessing-the-cache)。正如[我在那里的回答中](https://stackoverflow.com/a/10679038/1318472)所建议的那样，如果图像尚未保存到磁盘缓存中，您将无法在那里访问它。

一种解决方案是强制您的浏览器通过代理处理所有请求，因此首先存储验证码图像。我过去曾为此使用过[Fiddler2](http://www.fiddler2.com/fiddler2/)。

在 Fiddler2 中，您可以`OnBeforeResponse`通过类似于以下的代码更改挂钩以保存图像：

```
 if (oSession.uriContains("captcha")){      // change as needed
        oSession.utilDecodeResponse();
        var filename = oSession.url;           // get an appropriate file name
        oSession.SaveResponseBody(filename);   // store the file
    } 
```

现在，只要您的程序稍后可以找到此脚本保存的文件（通常通过关闭 URL 中的某些内容），您就可以做生意了。

# java - 如何将 JFreeChart 与 gnuplot 格式的文本文件一起使用

> ID：10773402
> 
> 赞同：0
> 
> 时间：2012-05-27T10:55:37.240
> 
> 标签：java, jfreechart, gnuplot

我已经使用 GNUPLOT 很长时间了，但现在我必须使用 JFreeChart 来实现类。我的 gnuplot 文本文件格式如下：

```
Name_1 Name_2
1 4
2 4
3 1
4 5
5 3 
```

我在文件“data.txt”中有这些数据，我想使用 JFreeChart 打印图表并将其保存到另一个文件 fe“result.png”。

你能给我一些代码吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:35:18.537

例如，我使用[guava lib](http://code.google.com/p/guava-libraries/)编写，非常有用。

```
import java.io.File;
import java.util.List;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartUtilities;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

import com.google.common.base.Charsets;
import com.google.common.base.Function;
import com.google.common.collect.Lists;
import com.google.common.io.Files;

public class App {
    /**
     * @param args
     */
    public static void main(String[] args) {
        Function<String, double[]> lineToXy = new Function<String, double[]>() {
            @Override
            public double[] apply(String line) {
                String[] s = line.split(" ", 0);
                double x = Double.parseDouble(s[0]);
                double y = Double.parseDouble(s[1]);
                return new double[] { x, y };
            }
        };

        try {
            //input file name is data.txt
            File file = new File("./data.txt");
            List<String> lines = Files.readLines(file, Charsets.UTF_8);
            List<double[]> xyList = Lists.transform(lines, lineToXy);
            XYSeriesCollection data = new XYSeriesCollection();
            XYSeries series = new XYSeries("XY Series");
            for (double[] xy : xyList) {
                series.add(xy[0], xy[1]);
            }
            data.addSeries(series);

            JFreeChart chart = ChartFactory.createXYLineChart("Tilte",
                "xLabel", "yLabel", data, PlotOrientation.VERTICAL, true,
                false, false);
            //output png file name is graph.png
            File png = new File("./graph.png");
            ChartUtilities.saveChartAsPNG(png, chart, 400, 300);
        } catch (Exception e) {
            //error handling
        } finally {
            //file close,and so on.
        }
        System.exit(0);
    }
} 
```

# c++ - QTcpSocket 的状态

> ID：10773403
> 
> 赞同：0
> 
> 时间：2012-05-27T10:55:43.063
> 
> 标签：c++, qt, qtcpsocket

我对 QTcpSocket 库有疑问。

我创建了两个程序，它们使用相同的套接字连接与同一个客户端进行通信。不幸的是，这样做，如果程序同时写入，客户端只能通过套接字读取一个字符串（通常是第一个）。

所以我需要知道是否存在特定函数（或方法）来知道套接字是否忙，以便延迟发送第二个字符串。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:08:36.023

您不能有 2 个客户端使用同一个套接字。服务器应该与[QTcpServer](http://qt-project.org/doc/qt-4.8/qtcpserver.html)一起工作，并且每次您收到一个新连接（来自客户端）时，您都会创建一个新的[QTcpSocket](http://qt-project.org/doc/qt-4.8/qtcpsocket.html)（显然，现在一切都是服务器端的）。客户端使用 QTcpSocket 连接到服务器。

# python - 如何在测试中遵循金字塔重定向？

> ID：10773404
> 
> 赞同：3
> 
> 时间：2012-05-27T10:56:05.710
> 
> 标签：python, unit-testing, pyramid

我有一个返回如下的视图：

```
headers = remember(request, str(user.id))
return HTTPFound(location=request.route_url('home'), headers=headers) 
```

我正在写一个测试，但我如何遵循上面代码中的重定向？我仍然得到 HTTPFound 对象及其 response.request 应该是发起响应的请求给我 None。

到目前为止，这是我的测试代码：

```
request = testing.DummyRequest(
    post=MultiDict(email='me@gmail.com', password='random'))
response = login(request) 
```

在这里，响应是 HTTPFound 但我如何按照重定向到家？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T14:06:30.230

我意识到这没有使用`DummyRequest`

我会推荐功能测试，因为`WebTest`它更容易做和管理。

在返回重定向的响应中，您可以调用`follow`以跟踪完整请求。

[http://webtest.pythonpaste.org/en/latest/index.html](http://webtest.pythonpaste.org/en/latest/index.html)

```
redirect_response = self.testapp.post(
    '/signup', params=post_params, status=302)
full_response = redirect_response.follow() 
```

# c# - 如何为 WPF DataGrid 获取 IsSelectionActive？

> ID：10773405
> 
> 赞同：3
> 
> 时间：2012-05-27T10:56:11.443
> 
> 标签：c#, wpf, datagrid, css-selectors

我正在尝试`IsSelectionActive`使用 WPF DataGrid：

```
<Style TargetType="{x:Type DataGridCell}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridCell}">
                <ContentPresenter />
                <ControlTemplate.Triggers>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsSelectionActive" Value="False" />
                            <Condition Property="IsSelected" Value="True" />
                            <!--<Condition Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGridRow}}, Path=IsSelected}" Value="True" />
                            <Condition Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}, Path=IsKeyboardFocusWithin}" Value="True" />-->
                        </MultiTrigger.Conditions> 
```

基本上，当网格失去焦点，但选择仍然存在时，我想应用一些样式。

不幸的是，`IsSelectionActive`由于某种原因，它会引发 WPF 数据网格中不存在的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T13:18:29.133

IsSelectionActive 是一个附加属性。我认为你需要使用

```
<Condition Property="Selector.IsSelectionActive" Value="False" /> 
```

这种简化的风格对我有用：

```
<Style x:Key="CellStyle" TargetType="{x:Type DataGridCell}">
    <Style.Triggers>
        <MultiTrigger>
            <MultiTrigger.Conditions>
                <Condition Property="Selector.IsSelectionActive" Value="False" />
                <Condition Property="IsSelected" Value="True" />
            </MultiTrigger.Conditions>
            <Setter Property="Background" Value="Red"/>
        </MultiTrigger>
    </Style.Triggers>
</Style> 
```

# sockets - 用于 mmorpg 或类似游戏的套接字和 http 请求用例

> ID：10773408
> 
> 赞同：0
> 
> 时间：2012-05-27T10:56:53.110
> 
> 标签：sockets, request, httprequest

套接字或请求的适当用例是什么？

套接字可能适用于经常发生的一切，例如移动、聊天。

(HTTP) 请求等级升级之类的东西？

但我对此没有很好的背景。也许有人可以给出一个很好的解释，什么时候使用它们以及为什么有意义。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:25:00.200

请求是服务的客户端以服务器理解的格式和方式发送的消息。要发送/通信此消息，客户端需要网络连接，这就是套接字的用途（例如，在特定端口上建立 TCP/IP 连接）。

因此，您将打开顶部并使用套接字进行网络上的*任何*通信。该通信的格式和方式取决于服务器（它识别/理解的内容）。HTTP 请求是一种特定格式的通信（从客户端到服务器）；通常响应是作为 HTTP 回复（从服务器到客户端）给出的。

由于发送 HTTP 请求涉及建立 TCP/IP 连接、发送请求和断开连接，因此使用不同的通信协议进行更持久的通信（例如通过文件或其他更大的数据发送）更经济。

# android - Google Map API 代码未显示当前位置

> ID：10773409
> 
> 赞同：0
> 
> 时间：2012-05-27T10:56:54.420
> 
> 标签：android, google-maps, android-maps

我想在用户打开活动后立即显示用户的当前位置。

这是我到目前为止编写的代码。

```
package com.android.carmanager;

import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.Toast;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

public class CarFinder extends MapActivity{
private MapView mapView;
private MapController mapController;
private LocationManager locationManager;
private LocationListener locationListener;

@Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.carfinder);
    mapView = (MapView) findViewById(R.id.mapView);
      mapView.setStreetView(true);
      mapView.setBuiltInZoomControls(true);
      mapView.displayZoomControls(true);

      mapController = mapView.getController();
      mapController.setZoom(16);

      locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);  

      locationListener = new GPSLocationListener();

      locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 
                0, 
                0, 
                locationListener);
  }
private  class GPSLocationListener implements LocationListener 
{
  public void onLocationChanged(Location location) {
    if (location != null) {
      GeoPoint point = new GeoPoint(
          (int) (location.getLatitude() * 1E6), 
          (int) (location.getLongitude() * 1E6));

      Toast.makeText(getBaseContext(), 
          "Latitude: " + location.getLatitude() + 
          " Longitude: " + location.getLongitude(), 
          Toast.LENGTH_SHORT).show();

      mapController.animateTo(point);
      mapController.setZoom(16);
      mapView.invalidate();
    }
  }

public void onProviderDisabled(String arg0) {
    // TODO Auto-generated method stub

}

public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}   
}

@Override
  protected boolean isRouteDisplayed(){
      //TODO Auto-generated method stub
      return false;

  }
  } 
```

还要在此处附加清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.android.carmanager"
android:versionCode="1"
android:versionName="1.0" >

  <uses-sdk android:minSdkVersion="15" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" ></uses-permission>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" ></uses-permission> 
<uses-permission android:name="android.permission.INTERNET" ></uses-permission>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name">
        <uses-library android:name = "com.google.android.maps" />

    <activity android:name=".CarManagerActivity" android:label= "@string/app_name">
    <intent-filter> 
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
    <activity android:name=".MileageCalculator" android:label= "@string/app_name"></activity>
    <activity android:name=".About" android:label= "@string/app_name"></activity>
 <activity android:name=".CarFinder" android:label="@string/app_name"></activity>
 </application>

</manifest> 
```

如果需要，这是错误日志 cat 文件。就定位位置而言，我找不到任何错误。

```
05-27 16:07:05.647: I/dalvikvm(706): threadid=3: reacting to signal 3
05-27 16:07:05.697: I/dalvikvm(706): Wrote stack traces to '/data/anr/traces.txt'
05-27 16:07:06.156: D/gralloc_goldfish(706): Emulator without GPU emulation detected.
05-27 16:07:06.167: I/dalvikvm(706): threadid=3: reacting to signal 3
05-27 16:07:06.197: I/dalvikvm(706): Wrote stack traces to '/data/anr/traces.txt'
05-27 16:07:25.666: I/dalvikvm(706): threadid=3: reacting to signal 3
05-27 16:07:25.808: I/dalvikvm(706): Wrote stack traces to '/data/anr/traces.txt'
05-27 16:07:25.868: D/dalvikvm(706): GC_CONCURRENT freed 161K, 3% free 9352K/9607K, paused 12ms+7ms
05-27 16:07:25.868: W/CursorWrapperInner(706): Cursor finalized without prior close()
05-27 16:07:25.868: W/CursorWrapperInner(706): Cursor finalized without prior close()
05-27 16:07:26.186: I/dalvikvm(706): threadid=3: reacting to signal 3
05-27 16:07:26.326: I/dalvikvm(706): Wrote stack traces to '/data/anr/traces.txt'
05-27 16:07:26.396: D/dalvikvm(706): GC_CONCURRENT freed 40K, 3% free 9764K/9991K, paused 12ms+21ms
05-27 16:07:26.436: I/Maps.MyLocationOverlay(706): Request updates from gps
05-27 16:07:26.656: E/ZoomButtonsController(706): Cannot make the zoom controller visible if the owner view is not attached to a window.
05-27 16:07:26.746: I/dalvikvm(706): threadid=3: reacting to signal 3
05-27 16:07:26.767: I/dalvikvm(706): Wrote stack traces to '/data/anr/traces.txt'
05-27 16:07:26.827: I/MapActivity(706): Handling network change notification:CONNECTED
05-27 16:07:26.827: E/MapActivity(706): Couldn't get connection factory client
05-27 16:07:27.137: D/dalvikvm(706): GC_CONCURRENT freed 40K, 3% free 10167K/10375K, paused 8ms+6ms
05-27 16:07:27.188: I/dalvikvm(706): threadid=3: reacting to signal 3
05-27 16:07:27.227: I/dalvikvm(706): Wrote stack traces to '/data/anr/traces.txt'
05-27 16:07:27.887: D/dalvikvm(706): GC_CONCURRENT freed 375K, 5% free 10237K/10759K, paused 12ms+6ms 
```

但是当我打开活动时，地图会打开，并且位置无处可见。

它甚至不显示经度/纬度。

如何调整我的代码以显示当前位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:53:24.020

第 1 点：根据上述评论中的@Shabbir，建议使用`MyLocationOverlay`.

* * *

第 2 点：

> 但是当我打开活动时，地图会打开，并且位置无处可见。

`MyLocationOverlay`需要时间来修复位置，所以它从不显示任何内容开始。它仅显示找到第一个修复后的位置。

如果您在启动此活动之前已经知道您的位置，则可以将 MyLocationOverlay 子类化以接受`defaultLocation`构造函数中的参数。然后重写这样的`draw()`方法：

```
public synchronized boolean draw(Canvas canvas, MapView mapView,
    boolean shadow, long when)
{
    //if no location found
    if(getLastFix()==null && defaultLocation!=null)
    {
        drawMyLocation(canvas, mapView, defaultLocation, DataUtilities.locationToGeoPoint(defaultLocation), when);
    }

    return super.draw(canvas, mapView, shadow, when);
} 
```

如果尚未找到修复程序，请绘制您的默认位置，否则只需让基类做它的事情。

使用此方法，您可以立即显示初始位置 ( `defaultLocation`)，同时等待您的设备获得更好的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T05:05:12.070

使用这个片段

```
 List<Overlay> over_lay = mapView.getOverlays();
   MyLocationOverlay mylocationoverlay = new MyLocationOverlay(this, mapView);
   over_lay.add(mylocationoverlay); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:45:37.237

看看这个... [http://android-er.blogspot.in/2009/11/mapview-to-center-on-current-location.html](http://android-er.blogspot.in/2009/11/mapview-to-center-on-current-location.html)

# objective-c - 如何在 iOS 中正确管理大量图像

> ID：10773411
> 
> 赞同：0
> 
> 时间：2012-05-27T10:57:08.227
> 
> 标签：objective-c, ios, cocoa-touch, ipad

在我的应用程序中，我显示了大量大约 200 个图像，迟早我会收到内存警告，但我不知道下一步该怎么做

我有一个 UIImageView 的子类，它异步下载图像并像这样显示它们

```
self.image = [[[UIImage alloc] initWithData:receivedData] autorelease]; 
```

我应该如何以及何时清理内存？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T13:35:06.083

> 下载所有图像后，它们都在屏幕上

合成你可以做的（到一个图像中），最好是在服务器端，这样你就可以减少下载、加载到内存和在客户端渲染。

同样，请确保图像的大小与您绘制它们的大小相同。这可以节省大量内存和处理（除非您使用伪劣或快速重新缩放）。

您的帖子中缺少很多上下文。如果一个解决方案是通用且微不足道的，你会不会认为它很有可能已经被系统的框架使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:54:40.017

尝试在列表中使用小图像。点击小图，显示大图。尝试在这种情况下使用优化方法:)

# jquery - 如何打印网页包含flash

> ID：10773415
> 
> 赞同：0
> 
> 时间：2012-05-27T10:57:51.903
> 
> 标签：jquery, html, flash

是否可以打印包含 Flash 内容的网页？也许使用jQuery？

我有一个页面需要打印一些 SWF 对象，但我找不到在 Firefox 中打印它们的方法。

我可以使用插件，但我不想强迫访问者使用任何插件来打印页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:32:53.640

就像盗贼大师说的。**不使用闪存可能是最好的方法。**

但是如果你还想打印flash。您可以尝试[ping 服务器端脚本 (php)](http://www.flash-here.com/tutorials/flash_loadvars_sample.html)，该脚本将[快照](http://www.php.net/manual/en/function.imagecreatefrompng.php)您想要的页面并显示图像，然后使用 flash 的打印[作业](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/printing/PrintJob.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6#includeExamplesSummary)功能可以打印该图像。

*   使用 Loader 类加载将显示 url 快照（使用 php 拍摄的快照）的页面。**确保 php 页面上的标题正确（因此浏览器认为它是图像）。**
*   使用 flash printjob 打印图像

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T21:39:14.500

好吧，这是一个相当复杂的方法，但它可能会奏效。要使其工作，您必须能够编辑页面上的所有 Flash 文件，并且这必须是支持 Base64 编码图像源的浏览器（我认为 IE 不支持它）。

*   用户按下网页上的打印按钮
*   您的自定义 Javascript 使用 ExternalInterface 在每个 Flash 对象中调用“getScreenshot”函数。
*   Flash 文件的 getScreenshot 函数（由您创建）创建一个与舞台一样大的 BitmapData，使用 BitmapData.draw(..) 方法在其上绘制自身，使用 Base64 对其进行编码并返回它。
*   Javascript 隐藏 flash 对象并将图像元素放在顶部并使用 Base64 编码的字符串填充它。
*   现在既然所有的flash对象都被图片替换了，通过javascript调用文档打印函数。
*   当用户完成打印后，她可以按下网页上的按钮来“恢复” Flash 内容，这会删除动态创建的图像元素并再次显示 Flash 对象。

虽然这有点矫枉过正，但如果你真的需要人们能够打印页面和 Flash 对象，这将是实现这一目标的一种方法。

# localization - 本地化和国际化包括什么？

> ID：10773417
> 
> 赞同：1
> 
> 时间：2012-05-27T10:58:17.907
> 
> 标签：localization

我已经阅读了很多关于本地化和国际化的内容。从 Wikipedia 我得到了一个本地化系统已被调整或转换为在特定语言环境中使用，包括用户界面 (UI) 的语言、输入和显示以及时间等功能/日期显示和货币。国际化系统允许多种语言和字符集共存以用于输入、显示和 UI，从而可以在一系列“语言环境”中使用。

> 而不是这个阅读我感到困惑的是，我们正在创建存储本地语言 UI 的资源文件。所以，这个过程是 I18N 或 L10N。

任何人都可以用理由和解释来解释我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:38:57.200

任何与资源有关的事情都是本地化。

为了使应用程序国际化（即使其“世界就绪”），还需要做其他事情，例如根据最终用户的语言环境定义的格式规则处理输入和输出。但是这些其他问题都不能通过资源来解决。资源仅提供翻译的内容。

人们通常在表示“国际化”时使用“本地化”一词。但是本地化（L8N）只是国际化（I8N）的一个子集。

# boost - 多个 Boost.Build 项目

> ID：10773419
> 
> 赞同：0
> 
> 时间：2012-05-27T10:58:24.943
> 
> 标签：boost, boost-build, bjam

我有两个项目使用 Boost.Build 引擎，结构如下：

```
|_Project 1
| |_Source files
| |_Jamroot.jam
|
|_Project 2
| |_Source files
| |_Jamroot.jam 
```

如何从项目 2 触发项目 1 的构建过程，以及链接到项目 1 中生成的动态库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:30:06.040

我不记得如何构建整个项目1，但是对于链接，您可以将project1中的目标称为//library_project_from_1。

所以如果 project1/Jamroot.jam 看起来像

```
lib first_library
    : # sources, etc...
    ; 
```

尝试从 project2/Jamroot.jam 中将其引用为

```
exe second_program
    : # sources
    : ../project1//first_library
    ; 
```

# git - 如何撤消保留先前上演版本的“git add”？（索引有历史吗？）

> ID：10773420
> 
> 赞同：2
> 
> 时间：2012-05-27T10:58:28.990
> 
> 标签：git, pre-commit, unstage

我有一个类似于[How to undo 'git add' before commit?](https://stackoverflow.com/questions/348170/undo-git-add-before-commit) ，但有一个重要区别：

**背景：**

我正在运行一些生成文件的代码，完成后我将添加到我的存储库中。生成文件的代码是新代码，并且在不断变化，所以我有时会多次运行它，并进行更改。

在此过程中，我将生成的文件添加到索引中，因此它们将为最后的一次大提交做好准备。这也允许我检查我对代码的更改是否会在输出中产生更改，如果是，这些更改是什么。但是......我不小心在一个文件上运行了另一个 git add ，该文件同时出现在`Changes to be committed`部分（作为 a `new file`）**和**部分`Changes not staged for commit`（作为`modified`）中。我打算在它上面运行一个 git diff ，但我滑倒并重新添加了它，所以现在我没有办法区分它（我知道），所以......

**问题：**

有没有办法只撤消**最后的暂存操作**，这样以前添加的版本仍然/再次在索引中，修改后的文件将再次在我的工作树中，以便我可以区分它？

这些都没有提交或任何东西，因为目标是在我完成这一小轮开发时将它们全部提交。我真的很喜欢 git 通常可以在新文件提交之前向我显示对新文件的更改......但是......我错过了一个机会，现在想知道是否有办法找回它。?

到目前为止，我查找的内容似乎能够让我回到上一次提交（无文件）或文件的当前状态（无论如何我都有），但不能回到上一次提交的中间状态索引中的版本，这从来都不是提交的一部分。任何关于这是否可能的提示（即使是一个可靠的答案，最好是解释为什么会这样）将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:06:10.027

没有直接的方法可以访问文件的最后一个暂存版本。没有索引文件的版本控制，这就是您应该使用提交的目的。将来您可以考虑更频繁地进行临时提交（例如使用`commit --amend`），然后至少您以前的版本会在您的 reflog 中（例如`git log -g`）。

但是，所有文件的所有暂存版本都将添加到 git 对象数据库中。您应该可以使用`git fsck --lost-found`. 这会将所有“悬空” blob 写入`.git/lost-found/other`. 不幸的是，它们不会按任何特定顺序排列或具有原始文件名，但任何丢失的 blob 都应该在某处。

# jquery - 选择离散值 jquery 小部件的最佳方法

> ID：10773421
> 
> 赞同：1
> 
> 时间：2012-05-27T10:58:29.110
> 
> 标签：jquery, checkbox

我在一个项目中，用户指定不同药物的时间表。假设一个病人正在接受化疗，他需要服用一些药物。疗程为4个周期，每个周期持续30天。

现在我需要用户能够选择患者需要服药的这 30 天中的第 n 天。

现在对于这种情况，我只是布置了 30 个复选框，并且用户选择了第 n 天。

我想过使用多选，但我真的很缺空间，因为表格有点复杂。我需要水平地容纳这个离散的日期选择器，或者实现类似 datepicker 的东西，但不是特定的日期。

有谁知道任何 jquery 插件来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T13:08:08.160

我最终使用了 非常接近我需要的jQuery UI Button Buttonset [http://jqueryui.com/demos/button/#checkbox 。](http://jqueryui.com/demos/button/#checkbox)

我已经有 30 个复选框，并且已经在使用 jQuery UI 我只需要添加这一行

```
$('.med-schedule').buttonset(); 
```

并修复一些CSS :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:19:31.790

你试过[JQuery UI Selectable](http://jqueryui.com/demos/selectable/#display-grid)吗？

看起来这可以解决你的问题。

链接上有DEMO，有你想要的界面。

（对于多选单击并按下 CTRL 按钮）

# html5-canvas - 无法使用 HTML5 Canvas 从网页打印多张纸

> ID：10773423
> 
> 赞同：0
> 
> 时间：2012-05-27T10:58:34.407
> 
> 标签：html5-canvas

我使用 HTML5 Canvas 和一系列 Javascript 命令创建了一个网页。该网页经过精心格式化，因此如果发送到打印机，它将自动在正确的位置抛出一个新页面 - 换句话说，它看起来像预期的打印页，首尾相连。该网页看起来很完美，但是当我将其发送到打印机时，第一张纸打印正确，但随后的几张纸是空白的。

我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T16:32:23.567

如果您未提及的浏览器不支持`<canvas>`在多个页面上打印，请执行以下操作：

*   分成`<canvas>`几个`<canvas>`部分，每页一个

*   使用 Print CSS 格式化页面以进行打印[http://www.alistapart.com/articles/goingtoprint/](http://www.alistapart.com/articles/goingtoprint/)

您也没有显示任何代码或生成此现象的 HTML，因此几乎不可能猜出您的确切问题是什么

# jquery - 使用jquery在keyup上减去值

> ID：10773424
> 
> 赞同：-1
> 
> 时间：2012-05-27T10:58:37.520
> 
> 标签：jquery

我的表单中有以下输入。`total`(input name) 和(input name) 的值`balance`相同。当任何用户将paid_amount 的值放入输入时，我想自动从总数中减去paid_amount 值并将结果作为`balance`输入值。

你能告诉我如何使用jquery来做到这一点。

谢谢

```
<input type="text" name="total" id="total" value="<?php echo $total;?>" />

<input type="text" name="paid_amount" id="paid_amount" value="" />

<input type="text" name="balance" id="balance" value="<?php echo $total;?>" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:03:00.370

```
$('#paid_amount').on('keyup', function() {
   if($.trim(this.value).length) {
     var balance = parseFloat($('#total').val()).toFixed(2) - 
                   parseFloat(this.value).toFixed(2);
     $('#balance').val(balance);
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:02:51.507

```
$("#paid_amount").on("keyup", function() {
    var val = +this.value || 0;
    $("#balance").val($("#total").val() - val);
});​ 
```

**演示：http:** [//jsfiddle.net/f6Ggk/](http://jsfiddle.net/f6Ggk/)

* * *

要设置精度，您可以使用`toFixed()`：

```
$("#paid_amount").on("keyup", function() {
    var val = +this.value || 0;
    var result = $("#total").val() - val;
    $("#balance").val(result.toFixed(2));
});​ 
```

**演示：http:** [//jsfiddle.net/f6Ggk/1/](http://jsfiddle.net/f6Ggk/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-19T18:43:08.343

> 正常价格减去折扣后的销售价格

```
 $('#product_row').find('#r_price,#p_discount').on('keyup',function (e) {
             $regular_price = $('#r_price').val() ;
             $sale_discount = $('#p_discount').val() ; 
             $sale_price = ( $regular_price - $sale_discount ) ;
             $('#s_price').val($sale_price);
             console.log($sale_price); 
        }); 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="product_row">

                                    <div class="form-group">
                                        <label>
                                           Price
                                          <b class="text-danger">*</b>
                                        </label> 
                                        <input
                                          id="r_price"
                                          type="number"
                                          name="regular_price"
                                          class="form-control"
                                          required
                                          placeholder="0"
                                        />

                                      </div>

                                      <div class="form-group">
                                          <label> Discount </label>
                                          <input
                                           id="p_discount"
                                            type="number"
                                            name="discount"
                                            class="form-control"
                                            placeholder="0"
                                          />
                                        </div>                        

                                    <div class="form-group">
                                        <label>
                                          Sale Price
                                          <b class="text-danger">*</b>
                                        </label>
                                        <input
                                          id="s_price"
                                          type="number"
                                          name="sale_price"
                                          class="form-control"
                                          readonly
                                        />

                                      </div>

                                 </div> 
```

# arduino - x 次后执行功能

> ID：10773425
> 
> 赞同：12
> 
> 时间：2012-05-27T10:59:02.403
> 
> 标签：arduino

如果循环中的其他条件及其代码在一定时间后都没有执行，我可以使用什么来执行循环中的函数？可以延迟完成，还是有其他功能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-27T11:05:21.430

我认为不可能实现，因为 Arduino 没有内部时钟。

**编辑：** 可以使用[millis()](http://arduino.cc/en/Reference/millis)函数来计算自电路板启动以来的时间量：

```
unsigned long previousMillis = 0; // last time update
long interval = 2000; // interval at which to do something (milliseconds)

void setup(){
}

void loop(){
  unsigned long currentMillis = millis();

  if(currentMillis - previousMillis > interval) {
     previousMillis = currentMillis;  

     // do something
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-16T13:14:24.143

尝试 arduino 定时器中断。不需要外部库甚至额外的硬件，因为处理器可以被认为是一个时钟......在 16 MHz。

```
#include <avr/io.h>
#include <avr/interrupt.h>

void setup ()
{

  // INITIALIZE TIMER INTERRUPTS
  cli(); // disable global interrupts

  TCCR1A = 0; // set entire TCCR1A register to 0
  TCCR1B = 0; // same for TCCR1B

  OCR1A = 15624; // set compare match register to desired timer count. 16 MHz with 1024 prescaler = 15624 counts/s
  TCCR1B |= (1 << WGM12); // turn on CTC mode. clear timer on compare match

  TCCR1B |= (1 << CS10); // Set CS10 and CS12 bits for 1024 prescaler
  TCCR1B |= (1 << CS12);

  TIMSK1 |= (1 << OCIE1A); // enable timer compare interrupt

  sei(); // enable global interrupts

}

// TIMER VECTOR, gets called once a second (depends on prescaler and match register)
ISR(TIMER1_COMPA_vect)
{
  // do your timeing based stuff here
} 
```

[需要更多关于中断的信息？](http://www.engblaze.com/microcontroller-tutorial-avr-and-arduino-timer-interrupts/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:06:18.103

我的朋友**delay()**和**delayMicroseconds()**将为您提供全部帮助。

至于其他答复。

**mills()** - 返回自 Arduino 板开始运行当前程序以来的毫秒数。大约 50 天后，此数字将溢出（回到零）。

参考：[http ://arduino.cc/en/Reference/millis](http://arduino.cc/en/Reference/millis)

相似地，

**micros ()** - 返回自 Arduino 板开始运行当前程序以来的微秒数。参考：[http ://arduino.cc/en/Reference/Micros](http://arduino.cc/en/Reference/Micros)

我想您需要在这两个方面进行一些工作才能解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T15:28:30.543

我想这就是你要找的

[http://playground.arduino.cc/Code/time](http://playground.arduino.cc/Code/time)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T17:43:30.537

试用[Metro 库](http://arduino.cc/playground/Code/Metro)，它可以让您执行重复的定时事件。如果需要，您可以在循环中更改计时器的频率。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-04T18:09:19.283

如果没有外部部件，将无法在 Arduino 重启后继续使用的计时器。问题是没有办法弄清楚重置触发了多长时间。此外，引导加载程序在重新启动期间可能会消耗未知的时间。因此，您需要一个外部实时时钟。

关于事件的周期执行，我最喜欢的是 msTimer2 库。有关我的一些示例，请参见此处：

[http://blog.blinkenlight.net/experiments/basic-effects/persistence-of-vision/](http://blog.blinkenlight.net/experiments/basic-effects/persistence-of-vision/)

[http://blog.blinkenlight.net/experiments/removing-flicker/heartbeat/](http://blog.blinkenlight.net/experiments/removing-flicker/heartbeat/)

[http://blog.blinkenlight.net/experiments/basic-effects/lighthouses/](http://blog.blinkenlight.net/experiments/basic-effects/lighthouses/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-08T12:42:48.067

您可以使用下面的示例代码。这里每 1ms 重复一次步骤。

```
#include <SimpleTimer.h>

// the timer object
SimpleTimer timer;

// a function to be executed periodically
void repeatMe() 
{
  Serial.print("Uptime (s): ");
  Serial.println(millis() / 1000);
}

void setup()
{
  Serial.begin(9600);
  timer.setInterval(1000, repeatMe);
}

void loop() 
{
  timer.run();
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-31T18:51:08.910

该`millis()`功能通常可以很好地为此工作，除非您希望超时在 arduino 重新启动后仍然存在。

我将实现一个 Timer 类来跟踪上次`some_condition`遇到的时间：

```
class Timer
{
public:
    Timer(void);
    void set_max_delay(unsigned long v);
    void set(void);
    boolean check(void);
private:
    unsigned long max_delay;
    unsigned long last_set;
};

Timer::Timer(void)
{
    max_delay = 3600000UL; // default 1 hour
}

void Timer::set_max_delay(unsigned long v)
{
    max_delay = v;
    set();
}

void Timer::set()
{
    last_set = millis();
}

boolean Timer::check()
{
    unsigned long now = millis();
    if (now - last_set > max_delay) {
        last_set = now;
        return true;
    }
    return false;
}

Timer timer;

void setup()
{
   timer.set_max_delay(60000); // 1 minute
}

void loop()
{
   boolean some_condition = false;
   if (some_condition) {
       timer.set();
   }
   if (timer.check()) {
      // nothing happened for a long time
   }
   delay(500);
} 
```

只要`some_condition`不满足`last_set`，Timer 的值就不会更新。最终导致`check()`返回`true`（每个间隔一次，`check()`设置`last_set`值）

如果检查需要在处理器复位后继续存在，那么您需要一个电池备份（实时）时钟并`last_set`从 EEPROM 存储和检索。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-25T13:02:23.897

这些计时器例程有许多版本，都假定如果您已达到或超过超时时间，则您从 millis() 重置计时器变量。错误的。如果你一直很忙并且已经过了时间段怎么办……现在已经很紧张了。

所以假设我们想每 50 毫秒做一次。假设我们被阻止了，现在是上次检查后的 55 毫秒......我们检查......果然我们覆盖了计时器变量，所以我们将在 50 毫秒内得到匹配。但现在我们落后了 5 毫秒。我们需要补偿迟到，如果此时出现溢出会发生什么......

# c# - 如何使 javascript 文件在从母版页继承的任何页面上工作？

> ID：10773430
> 
> 赞同：3
> 
> 时间：2012-05-27T10:59:29.093
> 
> 标签：c#, javascript, asp.net

我是 asp.net 的新手。我有一个问题，如何使 javascript 文件在从母版页继承的任何页面上工作？因为我把`<link type="text/javascript" href="scripts/JScript.js" />`母版页，它似乎没有工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:19:59.847

这是问题所在：而不是

```
<link type="text/javascript" href="scripts/JScript.js" /> 
```

使用以下：

```
<script type="text/javascript" src="scripts/JScript.js"></script> 
```

让我知道它是否不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:07:25.997

尝试这样做：

```
<link type="text/javascript" href="/scripts/JScript.js" /> 
```

**更新**

这似乎不适用于您的情况。看看这个网站中描述的第二种情况：

[从 ASP.NET 母版页和内容页调用 JavaScript - 第二部分](http://www.dotnetcurry.com/ShowArticle.aspx?ID=274)

这解释了如何做到这一点。

# php - 仅当我未填写必填字段时未定义变量

> ID：10773433
> 
> 赞同：0
> 
> 时间：2012-05-27T10:59:48.860
> 
> 标签：php, jquery, codeigniter

我正在使用代码点火器，我用代码点火器表单助手制作了一个表单，我从我的数据库中加载了 2 个下拉框，并且效果很好。当我填写所有字段时，它就可以工作了。我目前有 2 个必填字段。其中 1 个不是必需的。当我填写所有必填字段时，它可以工作，但是当我不填写一个必填字段时。它给出了这个错误：

```
A PHP Error was encountered
Severity: Notice
Message: Undefined variable: Cities
Filename: admin/adddivelocation_view.php
Line Number: 67 
```

第 67 行的代码是：

```
 echo form_dropdown('duikplaats', $Cities, '', $attributes_dropdown_gemeente); 
```

我在这样的视图中得到 $cities ：

```
 function addDiveLocation()
    {
      $data['Cities'] = $this->admin_model->getCity();
      $data['Countries'] = $this->admin_model->getCountries();
      $this->is_logged_in('admin/adddivelocation_view', $data);
    } 
```

我的 2 个下拉菜单的值或属性发生变化的脚本是：

```
 $('#duikplaats').change(function(){
         var data = {
            'id': $(this).val()
         }

        $.get(CI.base_url + "/admin/changeCountry", data, function(content){
            console.log(content);
            $('#duikland option:selected').removeAttr('selected');
            $('#duikland option').filter(function(){
                return $(this).val() == content;
            }).attr('selected', true);
        });

    });

    //Wanneer Land gekozen word
    $('#duikland').change(function(){
        var data = {
            'id': $(this).val()
        }

        $.get(CI.base_url + '/admin/changeCity', data, function(content){
            $('#duikplaats').empty();
            var landen = $.parseJSON(content);
            $.each(landen, function(k, v){
                $('#duikplaats').append(
                    '<option value="' + k + '">'+ v + '</option>'
                    );
            });
        });
    }); 
```

以及 jQuery 函数调用的 2 个函数： **changeCountry:**

```
function changeCountry(){

      $query = $this->admin_model->getCountry($this->input->get('id'));

      $this->output->set_output($query->FK_LandID);

    } 
```

**改变城市：**

```
function changeCity(){
      $query = $this->admin_model->getCities($this->input->get('id'));

      foreach($query as $object)
      {
        $data[$object->id] =  $object->Gemeente;
      }

      $data = json_encode($data);
      $this->output->set_output($data);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:36:11.637

我找到了解决方案。当我发布我的表单时，它会通过验证功能，当它成功发布时我会加载成功视图，或者当它失败时加载原始视图。当它失败时，它只加载了视图，但我忘记将任何数据返回给视图，因此它无法加载数据。

不管怎么说，还是要谢谢你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:07:06.167

错误消息说没有定义 $Cities 变量。我也无法在您发布的代码片段中找到 $Cities 变量。

要么你需要定义类似的东西 $Cities = $data['Cities']; 或使 $data 全局可用，因为您在函数中定义它。从您发布的代码中并不清楚。

第二个下拉菜单是否适用于 $Countries ？

# wcf - silverlight WCF 无法在 Internet 上运行

> ID：10773437
> 
> 赞同：0
> 
> 时间：2012-05-27T11:00:26.473
> 
> 标签：wcf, silverlight

我已经为我的 VS2010、C# silverlight 应用程序创建了一个 WCF，我在本地主机上使用它没有任何问题，但是当我将它上传到我的远程服务器时，它不起作用！我的问题是什么？我在我的 SVC 文件旁边上传了两个 XML 文件（跨域），但仍然没有运气，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:13:20.723

如果您更仔细地查看您的服务（从您上面提供的链接），您会发现错误说明了很多。它甚至向您展示了您需要做些什么来解决它！

在您的`web.config`中，添加另一个端点以发布元数据。端点是为了`mex`让您的客户可以了解您的服务的内部运作。

`<endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />`

并在您的服务行为元素集下：

`<serviceMetadata httpGetEnabled="True" />`

**编辑：**虽然已经说过，如果您不发布任何元数据，当您在本地托管服务时，您的服务仍然不应该工作。你能更详细地描述一下你的场景吗？您是否在 IIS 中托管您的服务？您使用的是哪种绑定？你的服务是双工的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:53:35.157

需要配置客户端配置（“ServiceReferences.ClientConfig”）以在互联网上访问。请更改端点地址，将“localhost”名称和端口更改为真实站点域名。

应该管用。

# python - django - 用户的自然键序列化

> ID：10773439
> 
> 赞同：0
> 
> 时间：2012-05-27T11:00:45.427
> 
> 标签：python, django, json, serialization

假设我的项目中有一个评论模型：

```
class Comment(models.Model):
    text = models.TextField(max_length=500, blank=False)
    author = models.ForeignKey(User) 
```

`django.core.serializers`当使用作者字段序列化为 JSON时，结果如下：

```
"author": 1 // use_natural_keys = False
"author": ["someuser"] // use_natural_keys = True 
```

假设我也想输出用户的名字和姓氏？我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:27:59.280

我假设您正在序列化您的模型以便在线传输它（如在 http 响应中）。

`django.core.serializers`可能不是您想要的方式。一种快速的方法是在模型上包含一个方法来返回要序列化的字典，然后使用`simplejson.dumps`它来序列化它。例如：

```
def to_json(self):
    return dict(
        author=[self.author.natural_key(), self.author.first_name, self.author.last_name],
        text=self.text,
    ) 
```

然后打电话`simplejson.dumps(comment.to_json())`。

# c# - .net 中的转换：原生 Utf-8 <-> 托管字符串

> ID：10773440
> 
> 赞同：14
> 
> 时间：2012-05-27T11:00:53.517
> 
> 标签：c#, string, utf-8, marshalling, native

我创建了这两种方法来将原生 utf-8 字符串 (char*) 转换为托管字符串，反之亦然。以下代码完成了这项工作：

```
public IntPtr NativeUtf8FromString(string managedString)
{
    byte[] buffer = Encoding.UTF8.GetBytes(managedString); // not null terminated
    Array.Resize(ref buffer, buffer.Length + 1);
    buffer[buffer.Length - 1] = 0; // terminating 0
    IntPtr nativeUtf8 = Marshal.AllocHGlobal(buffer.Length);
    Marshal.Copy(buffer, 0, nativeUtf8, buffer.Length);
    return nativeUtf8;
}

string StringFromNativeUtf8(IntPtr nativeUtf8)
{
    int size = 0;
    byte[] buffer = {};
    do
    {
        ++size;
        Array.Resize(ref buffer, size);
        Marshal.Copy(nativeUtf8, buffer, 0, size);
    } while (buffer[size - 1] != 0); // till 0 termination found

    if (1 == size)
    {
        return ""; // empty string
    }

    Array.Resize(ref buffer, size - 1); // remove terminating 0
    return Encoding.UTF8.GetString(buffer);
} 
```

虽然 NativeUtf8FromString 没问题，但 StringFromNativeUtf8 是一团糟，但我可以运行的唯一安全代码。使用不安全的代码我可以使用一个字节*，但我不想要不安全的代码。还有另一种方法有人可以想到我不必为每个包含的字节复制字符串来找到 0 终止符。

* * *

我只是在这里添加未保存的代码：

```
public unsafe string StringFromNativeUtf8(IntPtr nativeUtf8)
{
    byte* bytes = (byte*)nativeUtf8.ToPointer();
    int size = 0;
    while (bytes[size] != 0)
    {
        ++size;
    }
    byte[] buffer = new byte[size];
    Marshal.Copy((IntPtr)nativeUtf8, buffer, 0, size);
    return Encoding.UTF8.GetString(buffer);
} 
```

如您所见，它并不丑陋，只是需要不安全。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-27T12:29:43.870

只需执行与 strlen() 完全相同的操作即可。请考虑保留*缓冲区*，代码确实会匆忙生成垃圾。

```
 public static IntPtr NativeUtf8FromString(string managedString) {
        int len = Encoding.UTF8.GetByteCount(managedString);
        byte[] buffer = new byte[len + 1];
        Encoding.UTF8.GetBytes(managedString, 0, managedString.Length, buffer, 0);
        IntPtr nativeUtf8 = Marshal.AllocHGlobal(buffer.Length);
        Marshal.Copy(buffer, 0, nativeUtf8, buffer.Length);
        return nativeUtf8;
    }

    public static string StringFromNativeUtf8(IntPtr nativeUtf8) {
        int len = 0;
        while (Marshal.ReadByte(nativeUtf8, len) != 0) ++len;
        byte[] buffer = new byte[len];
        Marshal.Copy(nativeUtf8, buffer, 0, buffer.Length);
        return Encoding.UTF8.GetString(buffer);
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-10-12T21:07:12.880

比 Hans 的解决方案略快（少 1 个缓冲区副本）：

```
private unsafe IntPtr AllocConvertManagedStringToNativeUtf8(string input) {
    fixed (char* pInput = input) {
        var len = Encoding.UTF8.GetByteCount(pInput, input.Length);
        var pResult = (byte*)Marshal.AllocHGlobal(len + 1).ToPointer();
        var bytesWritten = Encoding.UTF8.GetBytes(pInput, input.Length, pResult, len);
        Trace.Assert(len == bytesWritten);
        pResult[len] = 0;
        return (IntPtr)pResult;
    }
}

private unsafe string MarshalNativeUtf8ToManagedString(IntPtr pStringUtf8)
    => MarshalNativeUtf8ToManagedString((byte*)pStringUtf8);

private unsafe string MarshalNativeUtf8ToManagedString(byte* pStringUtf8) {
    var len = 0;
    while (pStringUtf8[len] != 0) len++;
    return Encoding.UTF8.GetString(pStringUtf8, len);
} 
```

这是我演示往返字符串：

```
var input = "Hello, World!";
var native = AllocConvertManagedStringToNativeUtf8(input);
var copy = MarshalNativeUtf8ToManagedString(native);
Marshal.FreeHGlobal(native); // don't leak unmanaged memory!
Trace.Assert(input == copy); // prove they're equal! 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2021-01-24T18:11:04.427

[Marshal.PtrToStringUTF8](https://docs.microsoft.com/ru-ru/dotnet/api/system.runtime.interopservices.marshal.ptrtostringutf8)和[Marshal.StringToCoTaskMemUTF8](https://docs.microsoft.com/ru-ru/dotnet/api/system.runtime.interopservices.marshal.stringtocotaskmemutf8)在 .NET 5 (.NET Standard 2.1) 中添加

# javascript - 如何识别 Javascript 中的颜色？

> ID：10773441
> 
> 赞同：2
> 
> 时间：2012-05-27T11:01:31.960
> 
> 标签：javascript, jquery, regex

我想解析输入并检查输入的彩色格式是 RGBA 还是 HEX 格式，并为用户提供空间以使用开关盒输入常规颜色的颜色名称。

我找到了十六进制颜色和常规颜色名称的正则表达式，但找不到 RGBA 的正则表达式。

Javascript

```
function verifycolor(colorcode) {
  var regColorcode = /^(#)?([0-9a-fA-F]{3})([0-9a-fA-F]{3})?$/;
  if(regColorcode.test(colorcode) == false)
    document.getElementById("status").innerHTML = "Color is not yet valid.";
  else if(regColorcode.test(colorcode) == true)
    document.getElementById("status").innerHTML = "You have entered a valid color code";
} 
```

jsfiddle 不适用于我的这段代码。不知是什么原因。所以它就在[这里](http://goo.gl/aKGhr)。

谁能帮我对 RGBA 颜色做同样的事情。如果正则表达式可以将其解析为红色、绿色、蓝色和 alpha，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:15:04.140

一些搜索给了我这个 RGB 颜色解析器：

*   [http://www.phpied.com/rgb-color-parser-in-javascript/](http://www.phpied.com/rgb-color-parser-in-javascript/)

它完全符合您的要求（甚至可以输出颜色通道）。当然，它也可以用于颜色验证。

从描述：

> 一个接受字符串并尝试从中找出有效颜色的 JavaScript 类。一些接受的输入例如：
> 
> *   `rgb(0, 23, 255)`
> *   `#336699`
> *   `ffee66`
> *   `fb0`
> *   `red`
> *   `darkblue`
> *   `cadet blue`

**演示：** [http ://www.phpied.com/files/rgbcolor/rgbcolor.html](http://www.phpied.com/files/rgbcolor/rgbcolor.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T13:06:37.013

```
rgba\(((25[0-5])|(2[0-4]\d)|(1?\d\d)|\d)%?, *((25[0-5])|(2[0-4]\d)|(1?\d\d)|\d)%?, *((25[0-5])|(2[0-4]\d)|(1?\d\d)|\d)%?, *((25[0-5])|(2[0-4]\d)|(1?\d\d)|\d)%?\) 
```

这将 rgb() 与内部 0 到 255 之间的 4 个数字匹配，由`,`(or `,<space>`) 分隔，后跟一个`%`符号。当然百分比不应该超过 100%，但为了达到目的，它会做。

# mysql - 如何生成下一个请求 ID

> ID：10773442
> 
> 赞同：3
> 
> 时间：2012-05-27T11:01:47.510
> 
> 标签：mysql, perl, sequence

我有一个要求，其中 request_id 的形式是 `REQ0000001,REQ0000002....REQ0000010, REQ0000011...., REQ0000099 REQ0000100.....`前三个字符是 REQ，后跟 7 个字符（数字是序列）......这个 request_id 是 mysql 表中的主键。

假设表中的最后一个条目是 REQ0000009，下一个条目将是 REQ0000010 .. 如何在 perl 中做到这一点？

我正在使用以下方式：

```
$sql_query = "select request_id from requests order by request_id DESC LIMIT 1"; 
```

将此值存储在名为 x 的变量中。然后

```
$x = reverse $x;  #Reverse the String
chop $x; # Chop the last Character (here R)

chop $x; # Chop the last Character (here E)

chop $x; # Chop the last Character (here Q)

$x = reverse $x; # Again Reverse
$x = $x  + 1; # Add 1

if ( length($x) eq 1) # if length ==1{

    $NextReq_id = 'REQ000000'.$x;

elsif ( length($x) eq 2)

    $NextReq_id = 'REQ00000'.$x;

elsif ( length($x) eq 3)

    $NextReq_id = 'REQ0000'.$x;

elsif ( length($x) eq 4)
{

$NextReq_id = 'REQ000'.$x;
} 
```

这里有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:13:44.000

您可以在 perl 中增加字符串：

```
if ($x lt 'REQ9999999') {
    $nextRequestId = $x;
    $nextRequestId++;
} else {
    // you ran out of request ids
} 
```

（如果你不检查`REQ9999999`你会`RER0000000`在某个时候结束）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T11:11:08.067

```
$sql_query = "SELECT CONCAT('REQ',LPAD(CAST(SUBSTR(request_id,4,7) AS UNSIGNED)+1,7,'0')) ORDER BY request_id DESC LIMIT 1" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T11:08:58.007

使用 sprintf 用 0 填充字符串

```
sprintf("REQ%08d", $x) 
```

# iphone - 如何使存储在文档目录中的 plist 在 iPhone 和 iPad 之间为通用应用程序同步？

> ID：10773443
> 
> 赞同：0
> 
> 时间：2012-05-27T11:01:57.360
> 
> 标签：iphone, ipad, plist, icloud, ios-universal-app

我有一个设置，其中我有一个`plist`文件，我需要在通用应用程序的设备之间保持同步。目前该`plist`文件存储在文档目录中。

我一直在网上寻找保持文件同步的方法，很多解决方案似乎都是基于`Core Data`. 我不确定这是否可能，但有没有办法我可以不使用同步这个文件`Core data`？如果是这样，请有人建议如何解决这个问题或向我指出一些可以提供帮助的材料的方向？

更具体地说，我需要一种方法来确保正在使用的设备具有 plist 文件的最新副本。例如，如果我早餐时在 iPad 上编辑它，那么在午餐时间我将应用程序加载到 iPhone 上，我应该会通过 iPad 看到早餐时间所做的编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:14:01.843

AFAIK 您需要为 iPhone/iPad 应用程序提供服务器 API 以发出 POST 请求。您可以发布整个文件或使用包含来自 plist 文件的实际数据的正文 (JSON/XML) 创建 POST 请求。您必须在服务器上维护 ETag/版本信息。为了使同步工作，您需要在服务器上唯一标识每个用户并存储他的 plist 信息。

在 iPhone/iPad 应用程序中，在每次应用程序启动期间，通过发出 HTTP 请求检查资源 ETag（以防文件已上传）或版本（以防 plist 文件内容以 XML/JSON 形式发布）。您还可以在应用程序中开发调度程序功能以获得更好的精度。如果有更新，请下载并保存新的信息/plist 文件。在应用程序 NSUserDefaults 中保留 ETag/version 条目并在此过程中更新它。

**友好的建议**：避免将任何可下载的数据/设置存储在**Application_Home/Documents**目录中，因为应用程序可能会被拒绝。请阅读Apple 开发者门户上的这篇[文章和相关文档。](http://iphoneincubator.com/blog/data-management/local-file-storage-in-ios-5)

这只是初步的想法，即兴创作和优化是为了让你弄清楚...... :)
我希望这会有所帮助！

干杯！！
阿马尔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T13:01:31.000

如果您在设置中打开了 iCloud 备份，iCloud 会自动备份您设备上所有应用程序（或选择性）的所有文档目录。

但上述事情我猜一天会发生一次。为了让它实时工作，你必须使用 iCloud API。

希望这会有所帮助。

# ruby-on-rails - 更新用户推文列表的最佳方式

> ID：10773446
> 
> 赞同：0
> 
> 时间：2012-05-27T11:02:47.923
> 
> 标签：ruby-on-rails, mongodb, heroku, twitter

我想在自己的时间做一个小项目。看看[这个 twitter 帐户](https://twitter.com/#!/shakespearesong)。我觉得这很有趣，并想建立一个网络应用程序，允许用户说出每条推文对应的歌曲。为此，我正在寻找一种可靠的方法来获取来自该用户的最新推文列表。

我计划使用 Ruby on Rails、MongoDB 和 Heroku 进行托管，但一开始我不想支付任何费用。我最初的计划是有一个导入所有当前推文的 rake 任务，然后让一个工作人员使用 twitter 流 API（通过[这个 gem](https://github.com/intridea/tweetstream)）。但在我看来，使用 heroku，我只能免费拥有一个 dyno 或一个工人，而不是两者兼而有之。

因此，我正在寻找一些想法，以从该帐户中获得相对最新的推文列表，这在性能方面不会太重。谢谢你的时间 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:06:27.847

如果您的任务足够轻量级，请尝试[Heroku 的 Scheduler 插件](https://addons.heroku.com/scheduler)。您可以将其安排为 1 天、1 小时或 10 分钟的间隔。您需要为那段时间付费，就像您使用自己的时钟进程一样，但这样您就不需要单独为时钟进程运行完整的测功机。

# objective-c - 在 iOS 中绘制 1 像素宽的路径

> ID：10773450
> 
> 赞同：13
> 
> 时间：2012-05-27T11:03:03.053
> 
> 标签：objective-c, ios, ios5, core-graphics

我在 UIView 上的 drawRect 实现中绘制了一条路径：

```
CGContextSetLineWidth(context, 0.5);
CGContextStrokePath(context); 
```

在我的 CGContext 上启用抗锯齿，我似乎无法绘制 1 px 的线。

![在](../Images/ff169007e631825336811ff81072c2f2.png)

我尝试使用以下方法关闭抗锯齿：

```
CGContextSetShouldAntialias(context, NO); 
```

但后来我的角落看起来很糟糕：

![离开](../Images/5279d0b5d31ede41d6449d3d236e3b6a.png)

如何保持抗锯齿打开但停止 1 像素线的这种子像素模糊？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-27T11:15:13.187

当您在 iOS 中绘制一条线时，您指定了一条无限窄线的坐标。然后，绘制的线将延伸到该线的两侧，宽度为笔划宽度的一半。

如果您的无限窄线具有整数坐标并且是水平或垂直的，则绘制的线将是两个像素宽和灰色，而不是一个像素宽和黑色（具有抗锯齿）。如果没有抗锯齿，线条会稍微移动，但边角看起来很难看。

要解决此问题，请使用像素中间的坐标（例如 200.5 / 170.5）并打开抗锯齿。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-26T09:15:57.690

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];

    CGFloat inset = 0.5 / [[UIScreen mainScreen] scale];

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);
    // draw
    CGContextSetLineWidth(context, inset);
    CGContextSetStrokeColorWithColor(context, _lineColor.CGColor);
    CGContextMoveToPoint(context, inset, 0);
    CGContextAddLineToPoint(context, inset, CGRectGetHeight(rect));
    CGContextStrokePath(context);
    CGContextRestoreGState(context);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T09:21:36.577

您可以通过以下方式翻译所有上下文：

```
CGContextSaveGState(context);
CGFloat translation = 0.5f / [[UIScreen mainScreen] scale];
CGContextTranslateCTM(context, translation, translation);
... your drawing here ...
CGContextRestoreGState(context); 
```

就这样！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-31T08:01:51.020

唯一对我有用的解决方案是：

```
override func drawRect(rect: CGRect) {

    let context = UIGraphicsGetCurrentContext()

    CGContextSetLineWidth(context, 0.5)

    CGContextMoveToPoint(context, 0.0, 0.25)
    CGContextAddLineToPoint(context, rect.size.width, 0.25)

    CGContextSetStrokeColorWithColor(context, UIColor.blackColor().CGColor)
    CGContextStrokePath(context)
} 
```

# c# - No restart in stopwatch

> ID：10773451
> 
> 赞同：2
> 
> 时间：2012-05-27T11:03:08.527
> 
> 标签：c#, .net, c#-4.0, .net-4.0, stopwatch

in MonoDevelop fro Unity I'm using C# to develop my "great" game. I'm using stopwatch there, and funny enough there isn't restart method in this class even though it is listed here:
[http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx#Y292](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx#Y292)

Am I missing something?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T11:07:45.620

Are you using .Net 4.0? That method appears to be only in .Net 4.0/4.5\. Anything prior you should use the `Reset()` method.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T11:08:35.423

[Stopwatch.Restart](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.restart.aspx) documentation clearly suggests that this method is available in .NET 4.0 and .NET 4.5.

Seems like you are targetting to .NET runtime lower than .NET 4.0

# zsh - zsh 调用 -s 标志

> ID：10773457
> 
> 赞同：0
> 
> 时间：2012-05-27T11:03:53.663
> 
> 标签：zsh

在文档（man zsh，Invocation section）中，我们发现`zsh -s`强制 shell 从标准输入读取命令。如果`-s`标志不存在并且给出了参数，则第一个参数被认为是要执行的脚本的路径名。”

请你举个例子，如何强制第一个参数是要执行的脚本的路径名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:10:47.993

“强制”是指导致 shell 从标准输入读取命令的标志。你不需要做任何特别的事情来让 shell 执行一个脚本：`zsh script`.

实际上，它不仅仅是用作脚本位置的第一个参数。手册页“`zshall`调用”部分包含以下示例：`zsh -x -o shwordsplit scr`. 这`scr`是要执行的脚本，而其余参数是其他选项。

# drupal-7 - Drupal、SoundManager 2 和外部链接

> ID：10773458
> 
> 赞同：1
> 
> 时间：2012-05-27T11:04:08.063
> 
> 标签：drupal-7

我想在我的网站上显示 soundmanager 风格的 mp3 链接。

我为 SoundManager 2 配置了 Drupal 7。它适用于内部 mp3，但不适用于外部 mp3 url。我的意思是当我添加

```
<a href="http://site.com/test.mp3">Test</a> 
```

未显示声音管理器风格的播放器。

# javascript - Backbone 或 Ember 应该用于哪种类型的网站/应用程序？

> ID：10773466
> 
> 赞同：1
> 
> 时间：2012-05-27T11:05:41.480
> 
> 标签：javascript, jquery, model-view-controller, backbone.js, ember.js

随着对 B​​ackbone、Ember 等网络的兴奋，我真的很想学习使用其中的一个（或一些），但我不知道作为前端开发人员，我将如何开始使用它们构建网站并将它们整合到我的工作流程中。我有几个问题，如果得到回答，真的会为我解决一些问题。

站点的数据是否可以完全由 JSON 文件的集合填充，还是最好由数据库或服务器端设置来提供数据？

这些框架是否适合用户需要操作数据或与数据交互的应用程序？例如，它们可以用于宣传册网站吗？即没有太多的功能或交互性......

我认为这里的首要问题是：这些 MVC（MV* 等）擅长做什么？它们不应该用于什么？

我想我对其中一些问题有一个清晰的想法，但我真的很感谢对这个主题有更深入了解的人的澄清。

PS 如果有任何有用的链接、文章、Github 存储库、截屏视频，我也会非常感激。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:18:18.393

> 站点的数据是否可以完全由 JSON 文件的集合填充，还是最好由数据库或服务器端设置来提供数据？

如果需要，您可以使用静态 JSON 文件。如果您想快速构建应用程序原型，而您不一定拥有可用于生成所需数据的后端代码，它们会很方便。

> 这些框架是否适合用户需要操作数据或与数据交互的应用程序？例如，它们可以用于宣传册网站吗？即没有太多的功能或交互性......我认为这里的首要问题是：这些 MVC（MV* 等）擅长做什么？它们不应该用于什么？

客户端 MVC 库最适合高度交互的应用程序。使用 Ajax 和其他相关技术将允许您构建一个对用户感觉更灵敏的应用程序，因为您将能够显示加载器，并且当您不需要每次都加载整个页面时，交互可以更快地运行。

您也可以将这些类型的库用于其他类型的站点，但如果它是一个主要只包含可浏览信息的站点，您将不会获得那么大的好处，因为传统的基于页面加载的方法也可以正常工作。

# entity-framework - 带有 ROWGUIDCOL 的实体框架

> ID：10773472
> 
> 赞同：3
> 
> 时间：2012-05-27T11:06:10.933
> 
> 标签：entity-framework

我有一个像这样的非 PK rowguidcol 列的表：

```
CREATE TABLE [dbo].[SomeTable] (
  ...
  RowGuid uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()) ROWGUIDCOL,
  ...
  CONSTRAINT AK_SOMETABLE_ROWGUID UNIQUE (RowGuid)
  ...
 ) 
```

当我尝试通过 EF（4.3.1 版）添加记录时，会引发以下异常：

```
Violation of UNIQUE KEY constraint 'AK_SOMETABLE_ROWGUID'. Cannot insert duplicate key in object 'dbo.SomeTable'.
The duplicate key value is (00000000-0000-0000-0000-000000000000). 
```

我将 RowGuid 字段保留为空。但似乎 EF 正在将 guid 列值归零。

如何告诉 EF 新行应该由服务器级别的 NEWSEQUENTIALID() 填充？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:31:48.080

更新：阅读这篇[博文后](http://leedumond.com/blog/using-a-guid-as-an-entitykey-in-entity-framework-4/)，我在 EDM 设计器中将 StoreGeneratedPattern 属性设置为“Identity”。它现在似乎正在工作。

# php - 使用 mysql 的 PDO 函数的 Php Sum

> ID：10773473
> 
> 赞同：2
> 
> 时间：2012-05-27T11:06:20.497
> 
> 标签：php, mysql, pdo

PDO 新手...我正在尝试求和，但这里出现错误是我的代码

```
function test_score_month($student_id){
    global $host, $dbname, $user, $pass;

    $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    $STH = $DBH->query("SELECT SUM(score), SUM(score_from) FROM school_test_report
    WHERE 
     school_test_report.test_date >= last_march() and school_test_report.test_date <= march()" );
    $STH->setFetchMode(PDO::FETCH_BOTH);
    return $STH;
} 
```

输出是

```
$student_id = test_score_month($name);
echo $student_id['SUM(score)']; 
```

但出现错误

```
Call to a member function setFetchMode() on a non-object in 
```

我试过了

```
$STH->setFetchMode(PDO::FETCH_ASSOC); 
```

但仍然是同样的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:11:51.287

您的查询中有语法错误：

```
WHERE 
    and 
```

你也确定你的数据库中有`march()`和`last_march()`功能吗？

[+] 查询数据库后总是检查错误：

```
if($STH){
 // do your stuff
}else{
 die($DBH->errorInfo()); // see the error
} 
```

见[http://www.php.net/manual/en/pdo.errorinfo.php](http://www.php.net/manual/en/pdo.errorinfo.php)

# javascript - 未放置在 Google Maps API V3 上的标记

> ID：10773475
> 
> 赞同：0
> 
> 时间：2012-05-27T11:06:29.180
> 
> 标签：javascript, jquery, google-maps-api-3

我有两个函数`initialize()`，`placeMarker()`现在发生的事情是，在该`initialize`方法中，每当页面加载时都会调用它并初始化地图，然后它会向 php 脚本发送请求，该脚本会发送经度和纬度位置作为响应。

脚本的响应是正确的，因为我已使用警报框对其进行了检查。

当我`placeMarker`从外部调用该函数时，`$.each`它可以工作。

但是，如果我从内部调用它，`$.each`则不会放置标记。

```
function initialize(latitude,longitude)
{
    geocoder = new google.maps.Geocoder();

    //Initial Map Variables
    var mymap={
            zoom:8,
            center:new google.maps.LatLng(latitude,longitude),
            mapTypeId:google.maps.MapTypeId.ROADMAP
        };  

        //Initialize Map
        map=new google.maps.Map(document.getElementById("map_canvas"),mymap);

           //  placeMarker(latitude,longitude);
           //  placeMarker(latitude + 0.2,longitude + 0.2);     When these two are called it places the marker on the map

    $.ajax({
          type: 'GET',
          url: "Profile_Control.php",
          data: "ajaxRequest=yes&id="+document.getElementById("compid").value,
          success:function(data){
             var parsedData= $.parseJSON(data);
            $.each(parsedData,function(){
                placeMarker(this['lat'],this['lng']);           

        //not place the marker on the map.
            });
        }
        }); 
}

//Place the marker and update the array.
function placeMarker(latitude,longitude)
{
    var myLatLng = new google.maps.LatLng(latitude,longitude);

            var marker = new google.maps.Marker({
                    map: map,
                    position:myLatLng,
                }); 
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-27T11:30:35.443

尝试

```
$(parsedData).each(function(j) {
  placeMarker(parsedData[j]['lat'],parsedData[j]['long']);
}); 
```

# mysql - SQL 查询中的复杂条件

> ID：10773477
> 
> 赞同：1
> 
> 时间：2012-05-27T11:06:51.553
> 
> 标签：mysql, sql, one-to-many, one-to-one, relationships

我目前正在从事一个涉及多对多和一对多关系的非常大的项目......有几张桌子可以使用，我不知道如何做我想做的事。这是我的第一个表（对象表）：

```
+-----------+------+-------+
| Object ID | Name | Value |
+-----------+------+-------+   The Object ID is a foreign Key to another table.
|     1     | Aaaa |   2   |   The Name is unique for each Object ID.
|     1     | Bbbb |   5   |
|     2     | Aaaa |   15  |
|     2     | Bbbb |   3   |
+-----------+------+-------+ 
```

我的第二个表如下（用户表）：

```
+---------+------+-------+
| User ID | Name | Value |
+---------+------+-------+    The User ID is also a foreign Key, there are  
|    7    | Aaaa |  10   |    multiple rows with the same User ID. 
|    7    | Bbbb |   7   |
+---------+------+-------+ 
```

我有第三张表显示其他表之间的关系

```
+---------+-----------+
| User ID | Object ID |
+---------+-----------+ There are no identical rows in this table. 
|    7    |     1     |
+---------+-----------+ 
```

我正在尝试查找用户拥有的对象表中的所有对象。用户需要拥有所有对象名称。对于每个名称，用户的值必须至少是该名称的对象的值。

例如这里，用户拥有值为 10 的 Aaaa 和值为 7 的 Bbbb。所以他拥有对象 1 的所有名称，并且他的值大于或等于这些值。因此他可以拥有对象 n° 1。对于对象 2，用户没有足够的 Aaaa，因此他不能拥有对象 2。

我知道如何使用 Inner Joins 获取用户具有名称和足够大值的对象表的所有行：

```
SELECT Users.User ID, Objects.Object, Objects.Name ID FROM Objects
INNER JOIN Users
ON Objects.Name = Users.Name AND Objects.Value <= Users.Value 
```

但问题是它会返回以下内容：

```
+---------+-----------+------+
| User ID | Object ID | Name |
+---------+-----------+------+
|    7    |     1     | Aaaa |
|    7    |     1     | Bbbb |
|    7    |     2     | Bbbb |
+---------+-----------+------+ 
```

问题是我想去掉这里的最后一行，因为用户没有足够的 Aaaa 用于对象 2。

任何帮助将不胜感激 ！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:12:50.800

您可以使用一个`not exists`子句来要求没有一个匹配对象的值高于用户的值：

```
select  Users.User ID, Objects.Object, Objects.Name ID 
from    Objects o
join    Users u
on      o.Name = u.Name 
where   not exists
        (
        select  *
        from    Objects o2
        where   o2.Name = u.Name
                and o2.Value > u.Value
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T13:14:04.270

您的描述有点混乱，因为用户和对象的“名称”相同。我假设用户名与对象名不同，并且您要使用映射表。

您应该能够通过加入来做到这一点：

```
select u.userid, o.objectid, o.name
from UserObjects uo join
     Users u
     on uo.userid = u.userid join
     Objects o
     on uo.objectid = o.objectid
where u.value >= o.value 
```

如果对象表和用户表中的名称确实相同，那么 (1) 你有一个非规范化的数据库结构和 (2) 你不需要用户对象表。您可能想问另一个问题，看看我们是否可以为这些表提供更好的数据库结构。

如果您的目标是填充用户对象表，那么查询就更简单了：

select u.userid, o.objectid, o.name from Users u join Objects o on u.name= o.name where u.value >= o.value

您可以通过在插入前添加以下行来创建表：

```
insert into UserObjects(UserId, ObjectId, Name, Value) 
```

# delphi - 如何在控制台窗口中创建表单模式

> ID：10773487
> 
> 赞同：1
> 
> 时间：2012-05-27T11:07:53.080
> 
> 标签：delphi, console-application, delphi-xe2

内部控制台应用程序 -`GetOpenFileName()`显示`Handle := FindWindow(Nil, Pchar(ConsoleTitle))`OpenFile 对话框模式到控制台窗口。是否可以创建**我自己的表单**模式并将其显示到控制台窗口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T11:45:57.930

将控制台窗口设置为表单的窗口所有者，并在显示表单时禁用它。类似于以下内容：

```
program Project1;

{$APPTYPE CONSOLE}

uses
  SysUtils,
  windows,
  forms,
  Unit1 in 'Unit1.pas' {Form1};

const
  ConsoleClass = 'ConsoleWindowClass';

var
  console: HWND;
  len: DWORD;
  title: array [0 .. MAX_PATH] of Char;

begin
  try
    len := GetConsoleTitle(title, SizeOf(title));
    Win32Check(Bool(len));
    console := FindWindow(ConsoleClass, title);
    Win32Check(Bool(console));
    Form1 := TForm1.Create(nil);
    try
      EnableWindow(console, False);
      try
        Form1.HandleNeeded;
        SetWindowLongPtr(Form1.Handle, GWLP_HWNDPARENT, console);
        Form1.ShowModal;
      finally
        EnableWindow(console, True);
      end;
    finally
      Form1.Free;
    end;
  except
    on E:Exception do
      Writeln(E.Classname, ': ', E.Message);
  end;
end. 
```

# java - 如何从倒数计时器中减去几秒钟？

> ID：10773492
> 
> 赞同：2
> 
> 时间：2012-05-27T11:08:38.427
> 
> 标签：java, android

我正在为测验应用程序尝试一个简单的计数器。在这里我想在按钮按下时从计时器中减去几秒钟。我使用了一个包含真值的标志..当按下按钮时它变为假..然后我检查标志的值并试图从计时器中减去几秒钟......它不起作用。这是我尝试过的代码...

java代码：

```
package com.okj.hjhu;

import android.app.Activity;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class OkghActivity extends Activity implements OnClickListener {

    TextView tv;
    Button a;
    Boolean flag = true;
    CountDownTimer counter;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        Initializer();
        setlisteners();

        MyCount counter = new MyCount(120000, 1000);

        counter.start();

    }

    private void setlisteners() {
        // TODO Auto-generated method stub

        a.setOnClickListener(this);

    }

    private void Initializer() {
        tv = (TextView) findViewById(R.id.textView1);

        a = (Button) findViewById(R.id.button1);

    }

    public class MyCount extends CountDownTimer {

        public MyCount(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);

        }

        @Override
        public void onFinish() {
            tv.setText("done");
        }

        @Override
        public void onTick(long millisUntilFinished) {

            tv.setText("Lef Time ...  00:00:" + millisUntilFinished / 1000);

            if (flag = false) {

                long ty = millisUntilFinished - 9000;

                tv.setText("Lef Time ...  00:00:" + ty / 1000);

            }

        }

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch (v.getId()) {

        case R.id.button1:
//when the button will be pressed the counter will minus some second from the timer
            flag = false;
            break;

        case R.id.button2:
            break;

        case R.id.button3:
            break;

        case R.id.button4:
            break;

        }

    }
} 
```

请帮忙 ...........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:18:11.560

我认为方法是，您必须使用 Counterdowntimer.cancel() 取消当前的倒数计时器，然后在新的特定时间启动新计时器/

# c# - C#“InvalidOperationException：ExecuteNonQuery”异常

> ID：10773493
> 
> 赞同：0
> 
> 时间：2012-05-27T11:08:38.527
> 
> 标签：c#, sql-server-express, invalidoperationexception

当我尝试通过我创建的软件将一些数据保存到我的 sql (express) 时出现此错误。

> System.Data.dll 中出现“System.InvalidOperationException”类型的未处理异常。附加信息：ExecuteNonQuery：连接属性尚未初始化。

这是我的代码：

```
 private void save_medicine_Click(object sender, EventArgs e)
    {
        cn.Open();

        if (nameBox.Text != "" & companyBox.Text != "" & categoryBox.Text != "" & 
           amountBox.Text != "" & restockBox.Text != "" & buyBox.Text != "" & 
           sellBox.Text != "" & qualityComboBox.Text !=""  )
        {
            cmd.CommandText = "insert into drug_info (name,company_id,category,
                               expiration_date,stock_level,
                               critical_level_drug,cost_buy,cost_sell,drug_quality) 
                               values ('"+nameBox.Text+"','"+companyBox.Text+"','"+
                               categoryBox.Text+"','"+dateTimePicker1+"','"+amountBox+"','"
                                +restockBox+"','"+buyBox+"','"+sellBox+"','"
                                +qualityComboBox+"')";
            cmd.ExecuteNonQuery();
            cmd.Clone();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:26:38.330

像这样试试

```
 if (nameBox.Text != "" & companyBox.Text != "" & categoryBox.Text != "" &  amountBox.Text != "" & restockBox.Text != "" & buyBox.Text != "" & sellBox.Text != "" & qualityComboBox.Text !=""  )
    {

        string sql = "insert into drug_info (name,company_id,category,expiration_date,stock_level,critical_level_drug,cost_buy,cost_sell,drug_quality) values ('"+nameBox.Text+"','"+companyBox.Text+"','"+categoryBox.Text+"','"+dateTimePicker1+"','"+amountBox+"','"+restockBox+"','"+buyBox+"','"+sellBox+"','"+qualityComboBox+"')";
        SqlCommand cmd = new SqlCommand(sql,cn);
        cn.Open();
        cmd.ExecuteNonQuery();
        cn.Close();
        MessageBox.Show("Τα στοιχεία καταχωρήθηκαν στη Βάση");
    } 
```

那应该可以工作..尽管我不知道为什么像“amountBox”和“buyBox”这样的值没有附加到它们的.Text。我不知道这些值来自哪里，但如果它们是文本框，您可能需要添加 .Text。如果是这样，并且您尝试将它们插入到数据库中，则会出现错误，因为您无法在数据库中插入具有“文本框”类型的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:20:30.560

你有一个类变量和`cn`一个局部变量`cn`。`rMedecine_reg_load`这似乎不对。

`cmd`该错误仅表示您在为其分配连接之前尝试使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T11:31:02.463

首先：使用参数。[您可以在此处](http://www.google.com/url?sa=t&rct=j&q=sqlcommand%20parameters&source=web&cd=1&ved=0CGAQFjAA&url=http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx&ei=Fw_CT_P9JobU-gaao-CjCg&usg=AFQjCNHLwGkRVRodFZVT4ffztc5FMPlDqg&sig2=KQwBAWMk5T7JOiFcI8TDYQ)阅读有关它们的信息。

另一件事是这一行：

```
cmd.Clone(); 
```

我打赌你想关闭命令。但是没有办法关闭 SqlCommand。只需删除该行。

如其他答案中所述，您还应该使用 2 个连接清理混乱。

# java - Spring 可以自动将 HashMap 中的值绑定到数据持有者吗？

> ID：10773494
> 
> 赞同：1
> 
> 时间：2012-05-27T11:08:41.547
> 
> 标签：java, spring, spring-mvc, hashmap

我正在学习春天。我对 Spring 如何自动将 HTML 表单字段中的值绑定到数据持有者对象中的 setter 方法的字段印象深刻。不再有无数次调用 request.getParamter() 并在每个调用上测试空值。

我想知道 Spring 是否有类似的东西来处理相反方向的事情，从数据库中提取信息？

我有一个记录，其中有大量字段通过 HashMap 从我的数据层中出来。

HashMap 键与数据库字段名称匹配，该名称也与我的数据持有者对象的设置器匹配。Spring 是否可以通过某种方式自动将 HashMap 中的值绑定到数据持有者对象中，或者我仍然需要自己做吗？

提前感谢您提供任何信息。

在此先感谢您的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:23:14.903

您实际上是在谈论[Spring MVC](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)，它是基于 Spring 框架构建的 Web 框架。您可以将 Spring 框架与许多其他 Web 框架（或根本没有）一起使用，因此 Spring 和 Spring MVC 是不应互换使用的术语。

这也回答了您的问题：Spring MVC 是 Web 层的框架。让 Web 层了解底层持久性技术将是一种糟糕的方法，因此对数据库技术的直接支持将是 Web 框架中巨大的代码气味。

也就是说，Spring 为许多不同的持久性技术提供了很多支持：[JDBC](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/jdbc.html)、[Hibernate、JPA、JDO、MyBatis](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/orm.html)，并且通过[Spring Data](http://www.springsource.org/spring-data)项目还支持各种 NoSQL 数据库。您正在寻找的简单 HashMap 绑定听起来像是可以通过 MyBatis 实现的东西（但我不知道 MyBatis，所以我不确定）。但是您不会在 Spring MVC 中找到开箱即用的解决方案，这是一件好事，原因如上所述。

# asp.net-mvc-3 - 如何从 asp.net mvc3 中的成员数据库中检索用户 ID？

> ID：10773496
> 
> 赞同：1
> 
> 时间：2012-05-27T11:08:50.317
> 
> 标签：asp.net-mvc-3, linq, membership

我已经使用 reg_sql 创建了一个数据库，并将其添加到我的项目数据库中以用于 membersip。现在我需要访问已登录的用户 ID。我想以非常简单的方式将其显示在一个视图中，以查看 doitwrk 与否。我在控制器的函数中使用此代码：

```
 var id = from ad in StoreDb.aspnet_Users where
  StoreDb.aspnet_Users.Name == System.Web.HttpContext.Current.User.Identity.Name 
  select ad.UserId;
  ViewBag.Message = id; 
```

但鉴于我看到了这一点：

> System.Data.Objects.ObjectQuery`1[System.Guid]

我应该怎么做才能检索用户ID？？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:23:24.817

`var id`在这种情况下表示`ObjectQuery<System.Guid>` 您必须解析查询的结果，例如：

```
foreach (Guid result in id)
  Console.WriteLine("UserID: {0}", result.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:34:29.173

这是一个您可以放入控制器并在操作中使用它来获取 ID 的函数。当提供者已经为您提供了一个 API 来完成所有这些操作时，不需要执行所有这些代码来查询成员资格数据库。

```
private Guid GetUserID() {
    var currentUser = Membership.GetUser(User.Identity.Name);
    var userID = (Guid)currentUser.ProviderUserKey;
    return userID;
}

public ActionResult Index() {
    var userID = GetUserID();
    ...
} 
```

您还可以将该代码放入基本控制器中，以便您可以从任何继承自它的控制器访问该功能。这样可以使您的代码保持干燥（不要重复自己），因此您不会有代码重复

用法是

创建一个基本控制器并放在`Controllers`名为的文件夹中`Base`

```
namespace YourApp.Web.Controllers {
    public abstract class MyBaseController : Controller {

        protected Guid GetUserID() {
            var currentUser = Membership.GetUser(User.Identity.Name);
            var userID = (Guid)currentUser.ProviderUserKey;
            return userID;
        }
    }
} 
```

现在，您可以通过继承它在任何常规控制器中使用该基本控制器。

```
public class HomeController : MyBaseController {

    public ActionResult Index() {
        var userID = GetUserID();
        ...
    }
} 
```

# c# - 在 .NET 应用程序的 UI 中定义表达式的标准方法？

> ID：10773499
> 
> 赞同：0
> 
> 时间：2012-05-27T11:09:08.060
> 
> 标签：c#

也许有人对以下概念性问题有*答案*：

我正在编写一个（相对简单的）应用程序，它从表中获取记录（每行是记录，列是字段），处理记录，然后将新记录写入新表。

问题在于规范（即输出记录的外观和计算方式）将一直在变化，并且用户没有太多的编程经验。

我想让应用程序在 UI 中可配置，即我想让用户指定表达式，如

```
x * y - 3 
```

或者

```
z.Substring (2) 
```

UI 中的某处（类似于 Excel，您可以在其中为单元格提供公式）。

问题：指定简单的数学、布尔和字符串表达式的最佳语言是什么？

我考虑了以下几点：

*   允许用户输入 PowerShell 代码
*   允许用户输入 C# 代码
*   自己写一个解析器

但在我看来，这一切都极其复杂。你有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:01:32.020

You can use [Irony](http://irony.codeplex.com/) to create you own expression evaluator with necessary functions. There are already simple expression and Python evaluators in [samples](http://irony.codeplex.com/SourceControl/list/changesets) there.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T12:05:42.133

Javascript 是一种非常简单易用的语言。我建议给用户一个源列列表，并允许他们在 javascript 中指定一个转换函数，然后您可以在运行时通过诸如[侏罗纪](http://jurassic.codeplex.com/wikipage?title=Calling%20a%20JavaScript%20function%20from%20.NET&referringTitle=Documentation)之类的库对其进行评估。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T11:12:04.400

这是[DLR](http://en.wikipedia.org/wiki/Dynamic_Language_Runtime)的工作！它是为动态语言设计的。您可以选择任何已经实现的语言。我只是选择[Iron python](http://ironpython.net/)并让用户输入表达式作为 python 语句。它绝对是一个梦想！

查看这个关于如何在 ac# 程序中托管 irson python 引擎的超简单示例

[http://secretgeek.net/host_ironpython.asp](http://secretgeek.net/host_ironpython.asp)

# php - 通过身份验证下载文件

> ID：10773500
> 
> 赞同：0
> 
> 时间：2012-05-27T11:09:16.403
> 
> 标签：php, file, session, cookies, curl

我正在寻找这种需求的解决方案。我在 www.mydomain.com 上有一个网站。我想允许我的访问者使用基于 cookie 会话的帐户用户/密码下载 www.otherdomain.com 上的文件。实际上，要下载文件 www.otherdomain.com/files/doc.pdf，需要使用用户/密码进行身份验证。

我在我的网站上使用 cURL 登录 otherdomain.com，检索 cookie 并下载文件，但效率不高，因为我的网络服务器正在下载文件然后将其发送到客户端。

此外，我不希望我的访问者看到用户/密码 :)

你有什么想法来做这个增强吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:17:25.477

您可以在低效率和不安全之间进行选择：

*   只有当您获取文档（例如通过 cURL）时，最终用户**才**不需要其他域的任何凭据
*   OTOH 如果您给最终用户某种凭据，您将失去控制，他在那里做什么。

# google-app-engine - 避免 AppEngine 中的争用

> ID：10773503
> 
> 赞同：1
> 
> 时间：2012-05-27T11:09:37.793
> 
> 标签：google-app-engine, contention

我试图围绕争用以及它如何应用于应用程序引擎堆栈。

我有一个像这样构建的模型

```
class Events(db.Model):
    #Owner Identification Number
    owner_id        = db.StringProperty(required=True)

    #Authentication Token
    auth_token      = db.StringProperty(required=True)

    #generic, b, c, d, ...
    driver          = db.StringProperty(required=True)

    #Start Time and Date
    tStart          = db.DateTimeProperty(auto_now=True)

    #Define whether the event is active or inactive
    active          = db.BooleanProperty(default=False)

    #Payload store, this will store each payload block sent or pulled
    payloads        = db.StringListProperty(indexed=False) 
```

该模型包含多个事件，每个事件都有一个所有者和一个有效负载，事件的所有者将向他的事件写入有效负载，而许多其他事件将从该事件中读取，这是一种转录堆栈。

我的问题是关于争用，我会受此影响吗？如果是，我该如何重组以防止它发生。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:20:41.500

我也是 Google App Engine 的新手。所以基本上避免争用实际上是在问如何增加写入吞吐量。我能想到的解决方案是：

1.  牺牲交易
2.  批量写入 memcached
3.  分片计数器
4.  后台任务队列

[https://developers.google.com/appengine/articles/sharding_counters](https://developers.google.com/appengine/articles/sharding_counters)

[https://developers.google.com/appengine/articles/scaling/contention](https://developers.google.com/appengine/articles/scaling/contention)

还有什么想法吗？我也想知道！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:58:46.880

在您的情况下，适用的限制是实体写入/更新限制，即每秒每个实体（或实体组）1 次写入/更新。

读取没有限制。

使用 memcache 缓存读取仍然是一个好主意，以降低成本并缩短响应时间。如果您使用 Python NDB，则[默认启用缓存](https://developers.google.com/appengine/docs/python/ndb/cache)。

**解决方案：**恕我直言，提高写入吞吐量和同时读取[后端](https://developers.google.com/appengine/docs/java/backends/overview)的好解决方案。它们（大部分）始终位于可用作共享内存的实例上。因此，您可以在并发读取的同时批量写入（并通过任务队列刷新）。

**注意：**实例大约每天重新启动一次，因此您不能将它们视为可靠存储 - 您可以将它们用作智能缓存，同时异步（通过后端线程或任务队列）以事务方式更新数据存储中的实体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T20:11:38.243

我认为您的模型没有任何问题：

1.  `Events`实体不会像看起来那样支付任何争用税，从您的言辞和示例来看，只是任何实体组之外的根实体。
2.  对单个实体的频繁更新可能会导致争用，但我几乎不怀疑所有者将每秒更新任何实体超过一次（1QPS 是您必须牢记的阈值，超过该阈值您就处于危险区域）。
3.  数据存储读取操作不会导致争用问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T22:33:46.607

在 App Engine 中，事件的每个实例都作为一个完整的对象进行读取/写入。您会担心每个 Event 实例的争用。如果您必须频繁更新 Event 的单个实例，那么您可能需要担心争用。如果您更新不同的实例，则无需担心。

我不确定您所说的争用究竟是什么意思。您可能指的是 a) 事务完整性或 b) 有限的写入性能。尽管您确实需要处理最终一致性问题，但您应该没有读取性能方面的问题。

a) 如果在 Event 实例更新后必须读取正确的数据，则需要通过 key 使用数据存储区 get() 请求。query() 请求可能会返回旧数据。

b）如果您担心写入性能，您需要以某种方式将您的实体拆分为多个实体。您可能会考虑为每个 Event 设置多个 Payload 实体，例如：

```
class Payload(db.Model):
    event = db.ReferenceProperty(Events)
    payload = db.StringProperty() 
```

通过这种方式，您可以分别编写每个有效负载，但成本会稍高一些，因为它们需要被索引，并且您需要按事件查询它们以获取它们。您可能希望将 Event 设置为祖先，以便您可以使用祖先查询进行一致的查询。

# android - Android：GPS 时间戳与 SensorEvent 时间戳

> ID：10773505
> 
> 赞同：3
> 
> 时间：2012-05-27T11:09:46.857
> 
> 标签：android, gps, timestamp, sensors

我刚刚意识到，在 android 上，您从 GPS 位置更新获得的时间戳自纪元以来以毫秒为单位，而 SensorEvent 更新（例如加速度计）的时间戳自启动以来以 ns 为单位。

我想将 GPS 时间戳转换为 SensorEvent 时间戳的格式，有人知道这样做的好方法吗？

我尝试了以下方法：我测量了自纪元以来系统启动的时间：

```
startupTime = System.currentTimeMillis() - SystemClock.uptimeMillis(); 
```

对于每个 gps 位置更新，我减去启动时间：

```
timestamp = loc.getTime() - startupTime; 
```

但是那些转换后的时间戳仍然不符合 SensorEvent 时间戳，仍然存在几秒钟的差异......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:02:32.697

不要使用`SystemClock.uptimeMillis()`，因为它测量自启动以来的时间，而不是设备处于睡眠模式的时间。而是使用`SystemClock.elapsedRealtime()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T21:01:07.460

我目前正在查看压力传感器事件的响应，并且报告的时间戳自纪元以来似乎以纳秒为单位。如果你除以 1,000,000，你应该得到一个可比较的值；这是我在以毫秒为单位找出传感器值的年龄时所看到的。

我会将 SensorEvent 时间戳除以 1000000，这应该会给您一个与您从 GPS 获得的 Location 对象提供的 getTime() 方法相当的值。

参考：

[http://developer.android.com/reference/android/hardware/SensorEvent.html#timestamp](http://developer.android.com/reference/android/hardware/SensorEvent.html#timestamp)（但它没有说明使用什么时钟）

[http://developer.android.com/reference/java/lang/System.html#currentTimeMillis()](http://developer.android.com/reference/java/lang/System.html#currentTimeMillis())

[http://developer.android.com/reference/android/location/Location.html#getTime()](http://developer.android.com/reference/android/location/Location.html#getTime())

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:54:42.697

就个人而言，`System.currentTimeMillis()`每当我获得 GPS 位置或传感器事件时，我都会打电话，并将其记录为比较这些事件的适当时间戳。相对而言，它应该精确到几毫秒内，这意味着除非在 GPS 定位后一毫秒左右发生传感器事件，否则使用此方法您将始终获得正确的“之前”和“之后”关系。此外，很难想象将这些时间精确到几毫秒的任何应用程序实际上很重要，因此这应该是一种简单而好的技术。

loc.getTime() 来自 gps 接收器，与 System.currentTimeMillis() 非常不同。除非您尝试将手机的时钟设置为与所谓的“gps 时间”同步，否则我会完全忽略 loc.getTime()。

# java - Pattern 类中的 pattern() 与 toString()

> ID：10773506
> 
> 赞同：9
> 
> 时间：2012-05-27T11:09:50.677
> 
> 标签：java, regex, pattern-matching

`pattern()`类中的方法和`toString()`方法有什么区别`Pattern`？

医生说：

```
public String pattern() 
```

> 返回编译此模式的正则表达式。

```
public String toString() 
```

> 返回此模式的字符串表示形式。这是编译此模式的正则表达式。

甚至他们的实现也返回相同的结果：

```
import java.util.regex.*;

class Test {
  public static void main(String[] args) {
    Pattern p = Pattern.compile("[a-zA-Z]+\\.?");
    String s = p.pattern();
    String d = p.toString();
    System.out.println(s);
    System.out.println(d);
  }
} 
```

我看不出有什么区别，那为什么有两种方法呢？还是我错过了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-27T11:11:29.633

因为每个类都有一个`toString()`继承自`Object`. `toString()`如果甚至可以创建某种字符串表示形式，该方法应该返回一个字符串，该字符串以最好的方式表示对象。这个名字`toString()`很模糊，所以他们添加了一个`pattern()`更简单的方法。

因为他们想`toString()`返回一些聪明的东西，所以他们使用了正则表达式的模式，这是`Pattern`类的一个很好的字符串表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:23:48.270

`toString()`方法在每个类中（从类扩展`Object`）。有一个例子。`System.out.print(Object o);`可以打印一些关于`Object`. 实际上这将是相同的：`System.out.print(o.toString())`。所以你有简单的方法来查看你有什么对象。尝试：

```
Object someUnknownObject = new JButton();
System.out.println(someUnknownObject);

// output
javax.swing.JButton[,0,0,0x0,invalid,alignmentX=0.0,alignmentY=0.5... 
```

如您所见，您可以看到有关此对象的信息，即使您根本不知道这是一个按钮。

也是`String`一个`Object`所以有一个奇怪的例子：

```
String str = "hello";
String toStr = str.toString();

System.out.println(str.toString().toString().toString()...); 
```

这是无用的，但是`all classes have this method`。所以 "my string" 和 "my string".toString() 是一样的

# android - 如何调整我从 android 的画廊中挑选的图像的大小？

> ID：10773511
> 
> 赞同：13
> 
> 时间：2012-05-27T11:10:23.783
> 
> 标签：android, image, resize, gallery

我正在哪里构建一个android。在一项活动中，我有一个图像按钮。当我点击它时，画廊会打开，我可以选择一张图片。然后我将该图像设置为图像按钮的新图像。问题是图像在我的活动中显得太大了。如何使它适合我的图像按钮？

```
protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { 
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

    switch(requestCode) { 
    case SELECT_PHOTO:
        if(resultCode == RESULT_OK){  
            Uri selectedImage = imageReturnedIntent.getData();
            String[] filePathColumn = {MediaStore.Images.Media.DATA};

            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String filePath = cursor.getString(columnIndex);
            cursor.close();

            Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);

            mImageButton.setImageBitmap(yourSelectedImage);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-27T12:23:22.253

您可以使用此方法获取调整大小的图像。这样可以避免 OutOfMemoryError

```
public static Bitmap decodeUri(Context c, Uri uri, final int requiredSize) 
            throws FileNotFoundException {
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(c.getContentResolver().openInputStream(uri), null, o);

        int width_tmp = o.outWidth
                , height_tmp = o.outHeight;
        int scale = 1;

        while(true) {
            if(width_tmp / 2 < requiredSize || height_tmp / 2 < requiredSize)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale *= 2;
        }

        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(c.getContentResolver().openInputStream(uri), null, o2);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T11:14:08.553

参考这个[链接](https://stackoverflow.com/questions/7136827/how-to-resize-bitmap-decoded-from-url)

使用：Bitmap.createScaledBitmap(Bitmap src, int dstWidth, int dstHeight, boolean filter)

或使用这些方法::

```
public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
    int width = bm.getWidth();
    int height = bm.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;

    // create a matrix for the manipulation
    Matrix matrix = new Matrix();

    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);

    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);

    return resizedBitmap;
} 
```

# asp.net-mvc - MVC 应用程序中的 DevExpress XtraReport

> ID：10773512
> 
> 赞同：0
> 
> 时间：2012-05-27T11:10:27.557
> 
> 标签：asp.net-mvc, razor, devexpress, xtrareport

也许这很简单，但我就是无法让它工作。事情是这样的：

1.  我创建了一个 XSD 架构，然后从我的 DataSource (SQL Server) 中拖放表。
2.  现在我可以在报表设计器中工作，因为我将数据源设置为 .xsd 文件，所以我将字段拖放到报表表面上。一切都很好。
3.  然后我有一个控制器，它有一个打开带有报告的剃刀视图的动作。

到目前为止，一切都很好。实际上，我只是从数据库中创建了一个项目的实例，并将其设置为报表的数据源，但是当我显示视图时它从不绑定它。报告中没有任何内容，只有标签和标题。我只是希望能够传递我创建的类型的对象，并且当我将报告源设置为能够查看数据时。我不想要任何参数和过滤。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:05:57.977

查看[此](http://help.devexpress.com/#XtraReports/CustomDocument9974)帮助主题并确保您已正确执行所有必需的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:55:27.147

您必须在. `dataSource`_`dataMember``DataSourceDemanded``XtraReport`

我传递的数据是一个`Datatable`对象

```
Private Sub myReport_DataSourceDemanded(sender As System.Object, e As System.EventArgs) Handles MyBase.DataSourceDemanded

    Me.DataSource = session("myData")
    Me.DataMember = "movimentacao_creditos"

End Sub 
```

# android - 我应该怎么做才能调用原生壁纸选择器来为我在 android 中的布局设置壁纸？

> ID：10773514
> 
> 赞同：6
> 
> 时间：2012-05-27T11:10:54.563
> 
> 标签：android, android-intent, wallpaper, picker

那是我的问题。对于那些不知道我在问什么的人，我想让这个菜单出现在我的应用程序[http://db.tt/GQX9GBYF](http://db.tt/GQX9GBYF)中。问题是我不知道该怎么做。我认为我必须创建一个意图，从中获取图像路径，然后将其设置为背景。但我不知道具体的方法...

拜托，谁能给我发个例子，好吗？？？？;)

我不得不说我通过启动本地图库应用程序来做到这一点，但我也想设置动态壁纸

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T11:29:33.773

您`Intent.ACTION_SET_WALLPAPER`启动 ContaxtMenu 以选择墙纸为：

```
Intent intent = new Intent(Intent.ACTION_SET_WALLPAPER);
startActivity(Intent.createChooser(intent, "Select Wallpaper")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T16:03:38.900

目前我正在做同样的事情。接受的答案是正确的，但如果您想使用壁纸作为应用程序的背景，那么您必须使用壁纸主题并调用 Intent.Action_Set_Wallpaper 来选择壁纸。

```
public void onCreate(Bundle savedInstanceState) {

 Activity.this.setTheme(android.R.style.Theme_Wallpaper);

super.onCreate(savedInstanceState);
setContentView(/*some layout*/);
} 
```

//点击按钮

```
Intent intent = new Intent(Intent.ACTION_SET_WALLPAPER);
startActivity(Intent.createChooser(intent, "Select Wallpaper")); 
```

# eclipse - 从类路径中排除 jar 的 Eclipse 运行配置

> ID：10773515
> 
> 赞同：3
> 
> 时间：2012-05-27T11:10:56.357
> 
> 标签：eclipse, gwt, jar, jersey, ektorp

如何创建从类路径中排除一些 jar 的 Ecipe 运行配置？！

背景说明：

我正在开发使用 Embedded Jetty 作为 Web 服务器的 webapp，Ektorp 库从 CouchDB 数据库中获取数据，Jersey 为前端提供 REST 服务和 GWT。

所有这四个库都导入到同一个 Eclipse 项目中： - 通过 Maven 导入的 Ektorp、Embedded Jetty 和 Jersey - 使用 jar 导入的 GWT

不幸的是，Ektorp 和 GWT 使用不同版本的类以某种方式进入冲突：org.apache.http.conn.scheme.Scheme

我尝试将 GWT 包移动到另一个项目并导入 Jetty/Ektorp/Jersey 项目，但随后 GWT 无法找到 Jersey 资源...

因此，为这个特定项目重新制定问题：

如何创建运行 Embedded Jetty 服务器并从类路径中排除 GWT jar 的 Ecipe 运行配置？！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-08T13:52:37.903

什么应该起作用：

1.  进入运行配置菜单
2.  选择您的运行配置
3.  单击类路径选项卡
4.  *删除用户条目*下的默认类路径
**   选择*用户条目*并使用添加项目添加您的*项目...**   选择添加的项目并使用*Add JARs 添加您的库...*忽略不需要的库。*

# git - 从上游更新合并冲突

> ID：10773518
> 
> 赞同：10
> 
> 时间：2012-05-27T11:11:23.173
> 
> 标签：git, github, branching-and-merging

我正在尝试在 github 项目上开始使用 git。（多年来我一直在使用 CVS、SVN 和 hg；git 很难理解）。我正在尽可能准确地按照说明进行操作，但根本无法使其正常工作。

我克隆了我的分叉项目：

```
git clone git@github.com:davidgiven/linux-allwinner.git 
```

按照建议，我添加了一个“上游”遥控器，用于跟踪我的项目所派生的项目：

```
git remote add upstream https://github.com/amery/linux-allwinner.git 
```

我从中获取：

```
git fetch upstream 
```

这一切都很好。但是，自从我分叉项目以来已经有一周左右的时间了，上游一直在进行更改。所以我想引入这些变化。我目前在正确的分支 --- allwinner-v3.0-android-v2 --- 所以我从上游合并到我的分支：

```
git merge upstream/allwinner-v3.0-android-v2 
```

...我得到合并冲突。

```
CONFLICT (add/add): Merge conflict in arch/arm/mach-sun5i/pm/standby/common.h
CONFLICT (add/add): Merge conflict in arch/arm/mach-sun5i/pm/standby/Makefile
CONFLICT (add/add): Merge conflict in arch/arm/mach-sun5i/pm/standby.S
CONFLICT (add/add): Merge conflict in arch/arm/mach-sun5i/pm/Makefile
[etc] 
```

现在，我*什么都没*登记；我还没有开始工作，我的项目自从我分叉以来就完全没有受到影响。因此，应该不可能有任何冲突。但是有一些；发生了什么事，我该如何解决？

**更新：**

`git show-branch HEAD upstream/allwinner-v3.0-android-v2`显示了这一点，我不得不说我一个字都不懂：

```
! [HEAD] arm: sun3i: add getioaddr macro
 ! [upstream/allwinner-v3.0-android-v2] arm: sun3i: updated irq handling and machine_desc to 3.0
--
 + [upstream/allwinner-v3.0-android-v2] arm: sun3i: updated irq handling and machine_desc to 3.0
 + [upstream/allwinner-v3.0-android-v2^] arm: sunxi: renable early_printk in all _defconfig except crane's
+  [HEAD] arm: sun3i: add getioaddr macro
+  [HEAD^] arm: sun3i: add dummy machine type 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-27T14:06:22.920

可能是，上游已经改写了历史（rebase，amend，...）——他们不应该那样做，但你永远不会知道。

由于您说您没有任何本地更改或提交，因此您应该通过重置分支将存储库恢复到干净状态：

```
git reset --hard upstream/allwinner-v3.0-android-v2 
```

（**这将丢弃任何本地更改并使当前 HEAD 的提交无法访问！**）

* * *

以上假设您将（强制）将分支的新重置状态推送到远程存储库，否则当您尝试从`origin`.

```
git push origin +allwinner-v3.0-android-v2 
```

如果您已经在本地提交了自己，则必须在上游分支之上重新设置（或挑选）您的提交，然后推送到原点。这样，您将以与上游相同的方式重写本地历史记录并将更改应用到顶部，即：

```
git rebase --onto upstream/branch \
  last-original-upstream-commit-before-yours \
  your-branch 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T15:41:26.327

`show-branch`输出意味着`upstream`并且自他们的`HEAD`共同祖先以来每个人都添加了两个提交（假设这是完整的输出）。（另见：[http](http://www.gitguys.com/topics/git-show-branch-to-see-branches-and-their-commits/) ://www.gitguys.com/topics/git-show-branch-to-see-branches-and-their-commits/ ）如果你自己没有提交任何东西，那确实意味着上游推送一个变基（或其他改变历史的东西）。由于您没有提交任何内容，所以 knittl 的答案正是您想要的。

对于它的价值，我也喜欢`git log --oneline --graph --decorate --remotes --branches`它。您将获得包含所有分支和遥控器的 ASCII 图形，因此您可以可视化发生的情况。

# php - 致命错误：找不到类“Memcache”（与 pecl 一起安装）

> ID：10773524
> 
> 赞同：4
> 
> 时间：2012-05-27T11:12:02.177
> 
> 标签：php, apache, memcached, pecl

我通过 ssh 安装了 memcache，其中：

```
$ pecl install memcache 
```

这是输出：[https ://pastee.org/w63sy](https://pastee.org/w63sy)

并将这一行添加到`etc/php.ini`：

```
extension=memcache.so 
```

并且在尝试初始化时：

```
/* MEMCACHE */
$memcache = new Memcache();
$memcache->pconnect('localhost',11211); 
```

我得到：

```
Fatal error: Class 'Memcache' not found in /home/piscolab/public_html/website.com/includes/sql.php on line 25 
```

我究竟做错了什么？

我发现了这个问题，但问题出在他的共享服务器上。我在VPS下。

运行`php -i | grep php.ini`：：

```
[root@vps ~]# php -i | grep php.ini                                                                                                                                            
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php/modules/memcache.so' - /usr/lib/php/modules/memcache.so: cannot open shared object file: No such file o
r directory in Unknown on line 0                                                                                                                                               
Configuration File (php.ini) Path => /etc                                                                                                                                      
Loaded Configuration File => /etc/php.ini                                                                                                                                      
[root@vps ~]# 
```

查找 memcache.so（无输出）

```
[root@vps ~]# find / -type f -name memcache*.so'                                                                                                                              
[root@vps ~]# find / -type f -name memcache*.so                                                                                                                                
[root@vps ~]# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T18:24:40.240

鉴于错误消息的输出，您似乎缺少`zlib`开发库，或者至少它们不在可通过 configure 自动找到的通常位置。

由于您在 CentOS 上，请尝试使用以下命令安装库：

```
yum install zlib-devel 
```

这将安装 memcache 所需的 zlib 库。安装 zlib 库后尝试重新运行 pecl 安装程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:42:29.520

如果您通过 phpinfo() 或 php_config 提供更多信息，它可能会有所帮助，更具体地说，您的安装是否看到了 memcache 库以及您的库路径是否正确。

```
php-config 
```

会告诉你更多，这里有趣的是使用的 php ini 路径和 lib 路径 php ini 路径将在你使用时显示 --configure-options, suboption --with-config-file-path (/etc/php5/apache2 in我的具体情况）并且库路径将显示为 --extension-dir

例如

```
php-config --extension-dir

php-config --configure-options | grep -o 'with-config-file-path[^ ,.]*' | grep -o '[^=.]*$' 
```

所以要使用我的示例，我的库路径设置为

/usr/lib/php5/20090626+lfs 和一个

```
ls /usr/lib/php5/20090626+lfs/mem* 
```

我的系统的命令显示：

/usr/lib/php5/20090626+lfs/memcached.so

我的 php.ini 文件位于 /etc/php5/apache2/php.ini

phpinfo() php 函数（只需放在文件中并查看它）还显示 memcache 受支持并加载“memcached support enabled”（我专门使用了 memcached 扩展，而不是 memcache）

请注意，您的网络服务器可能配置为使用与命令行不同的 php.ini 路径（因此文件），因此请验证两者。还要确保将 extension=memcache.so 放置在正确的位置，因为许多发行版将其放置在 /etc/php5/conf.d/memcache.ini 中可能存在一些差异？

# java - 不兼容的类型 - 在 java 中找到 java.lang.String 但预期为 int

> ID：10773526
> 
> 赞同：1
> 
> 时间：2012-05-27T11:12:10.583
> 
> 标签：java, gregorian-calendar

显示从今天起 100 天的日期、您的出生日期和出生日期后 10,000 天的日期。我已经完成了所有这些，但我想更进一步，我希望用户能够输入从今天起他/她希望知道日期的天数（如果这有任何意义的话...）。这是我正在处理的代码部分的样子：

```
 public class calendarProjectTest
    {
    public static void main(String[] args)
    { GregorianCalendar cal = new GregorianCalendar(); //declare today's date
    GregorianCalendar myBirthday = new
    GregorianCalendar(1990, GregorianCalendar.JUNE, 9); //declare my birthday
    System.out.println("Please enter a number greater than 0:");
    Scanner keyboard = new Scanner(System.in);
    String number = keyboard.next();
    int value = number;
    cal.add(GregorianCalendar.DAY_OF_MONTH, number); 
```

我正在使用 Bluej，它说“不兼容的类型 - 找到 java.lang.String 但预期为 int”我不知所措。我不知道该怎么做。任何建议都会很棒。是的，我知道没有结束括号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:13:25.777

用这个：

```
int value = Integer.parseInt(number); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:14:13.037

改变这个：

```
cal.add(GregorianCalendar.DAY_OF_MONTH, Integer.parseInt(number)); 
```

正如您从[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/GregorianCalendar.html#add%28int,%20int%29)中看到的那样，该`add()`方法需要两个参数作为`int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T11:15:38.767

问题出在这里

```
String number = keyboard.next();
int value = number; 
```

改为使用：

```
int value = keyboard.nextInt(); // you will get parsed int value
cal.add(GregorianCalendar.DAY_OF_MONTH, value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T11:19:14.603

键盘.next(); 返回一个字符串，而不是整数。

所以 int value = number 试图将字符串值分配给 int 类型。尝试把它改为：**int value = Integer.parseInt( number );**

想了解更多关于[GregorianCalendar](http://mindprod.com/jgloss/gregoriancalendar.html)和[http://www.vogella.com/articles/JavaDateTimeAPI/article.html的信息](http://www.vogella.com/articles/JavaDateTimeAPI/article.html)

# c++ - LLVM 值符号

> ID：10773528
> 
> 赞同：4
> 
> 时间：2012-05-27T11:12:39.767
> 
> 标签：c++, llvm

我在加载值时遇到了一些问题。这是我的编译器为显示问题而生成的 IR 的一个简单示例：

```
define i32 @main() {

    entry:  
    %a = alloca i32          ; <i32*> [#uses=2]  
    store i32 1, i32* %a  
    %r = load i32* %a        ; <i32> [#uses=1]

    br label %Return

    Return:                  ; preds = %entry  
    ret i32 %r

} 
```

但不是返回 1，而是返回 16777216。我已经用不同的值测试了程序，这似乎是整数值的内部二进制表示问题。

已编辑：我向您展示了我的编译器为生成上述代码而对 llvm 的调用跟踪。bloques.back().last 是 Value* 类型，而 bloques.back().bl 是 BasicBlock* （当前块）

```
bloques.back().last = dyn_cast<Value>(ConstantInt::get(
    Type::getInt32Ty(getGlobalContext()), $1, true)); // $1 is an int
AllocaInst *alloc = new AllocaInst(
    Type::getInt32Ty(getGlobalContext()), izq.c_str(), bloques.back().bl);
Value *derecha = bloques.back().last;
StoreInst *s = new StoreInst(derecha, alloc, false, bloques.back().bl);
bloques.back().last = alloc;
LoadInst* v1 = new LoadInst(bloques.back().last, "r", false, bloques.back().bl);
bloques.back().last = v1;
BasicBlock* blockReturn = BasicBlock::Create(getGlobalContext(), "Return", Main);
Value* last = bloques.back().last;
BranchInst::Create(blockReturn, bloques.back().bl);
ReturnInst::Create(getGlobalContext(), last, blockReturn); 
```

对应于 IR 表示的源代码将是：

```
a = 1
return a 
```

Edit2：在生成代码之后和通过 JIT 开始执行之前，在我的 main 函数中，我这样做：

```
ExecutionEngine *EE = EngineBuilder(M).create();
string str = EE->getTargetData()->getStringRepresentation();
str[0] = 'e';
M->setDataLayout(str);

if (verifyModule(*M)) {
   errs() << argv[0] << ": Error building the function!\n";
   return 1;
}

vector<GenericValue> noargs;
GenericValue GV = EE->runFunction(Main, noargs);

outs() << "Result: " << GV.IntVal << "\n";
return 0; 
```

已解决：终于我找到了解决方案。为了改变字节顺序，我做了以下事情（有点意大利面，但它有效）：

```
Module *M = new Module("pythoncode", getGlobalContext());
ExecutionEngine *EE2 = EngineBuilder(M).create();
string str = EE2->getTargetData()->getStringRepresentation();
str[0] = 'e';
cout << str << endl;
M->setDataLayout(str);
ExecutionEngine *EE = EngineBuilder(M).create(); 
```

提前致谢。

桑托斯美利奴。

# c++ - 在 C++ 中删除不起作用

> ID：10773530
> 
> 赞同：-1
> 
> 时间：2012-05-27T11:12:51.290
> 
> 标签：c++, list, linked-list, destructor

编辑：

好的，这是列表的正确实现。我想很多人会发现它很有用。谢谢你们，特别是 Agent_L，他们在通讯器上帮助了我。

**正确的链表实现**

```
 #include <cstdio>
#include <cmath>
#include<iostream>
#include <stdio.h>
#include <string.h>
using namespace std;

class Node{
 friend class List;
public:
    Node(Node* next, int wrt){
        this->next = next;
        this->wrt = wrt;
    }

    Node(const Node& obiekt){
        this->wrt = obiekt.wrt;
        this->next = obiekt.next;
    }
     //NIE MA DESTRUKTORA BO NIE ALOKUJE ZADNYCH DANYCH !!!

    void show(){
        cout<<this->wrt<<endl;
    }

 private:
    Node* next;
    int wrt;

};

class List{

public:
List(int wrt){
    this->root = new Node(NULL, wrt);
}

    List(const List& list)
{
    // jesli pusty kopiujemy
    if (list.root == NULL)
    {
        this->root = NULL;
        return;
    }

    //tworzenie nowego korzenia
    this->root = new Node(NULL, list.root->wrt);

    Node* list_currentNode = list.root;
    Node* this_currentNode = this->root;
    while (list_currentNode->next != NULL)
    {
        // tworzenie nastepnika
        Node* newNode = new Node(NULL, list_currentNode->next->wrt);
        this_currentNode->next = newNode;
        this_currentNode = this_currentNode->next;
        list_currentNode = list_currentNode->next;
    }
}

void add(int wrt){
    Node* node = new Node(NULL, wrt);
    Node* el = this->root;
    while(el->next != NULL){
        //el->show();
        el = el->next;
    }
    el->next = node;
}

void remove(int index){
    Node* el = this->root;
    if(index == 0){
       this->root = el->next;
       delete el;
    }
   else{
    int i  = 0;
    while(el != NULL && i < index - 1){

        el = el->next;
        i++;
    }
     if(el!=NULL){
        Node* toRem = el->next;
        Node* newNext = toRem->next;
        el->next = newNext;
       delete toRem;
    }
}
}

void show(){
    Node* el = this->root;
    while(el != NULL){
        el->show();
        el = el->next;
    }
}

~List(){
    Node* currentNode = this->root;
    while (currentNode != NULL)
    {
        Node* nextNode = currentNode->next;
        delete currentNode;
        currentNode = nextNode;
    }
}

private:
    Node* root;

};

int main(){
    List* l = new List(11);
    l->add(22); l->add(33);
    l->show();
    cout<<endl;
    List* lala = new List(*l);
    lala->show();
    cout<<endl;
    lala->add(44);
    cout<<"lala before remove"<<endl;
    lala->show();
    lala->remove(1);
    cout<<"l before delete"<<endl;
    l->show();
    cout<<"lala before delete"<<endl;
    lala->show();
    delete l;
  /*  cout<<"l after delete   "<<endl;
    l->show(); */
    cout<<"lala after delete"<<endl;
    lala->show();
    return 0;
   } 
```

* * *

我已经实现了 List 并且有一个问题。我在 List 中的析构函数不能正常工作：请查看 main 并查看“l after delete”它确实向后打印 l 列表。更大的问题是内部没有删除的删除方法可以正常工作，但是当我尝试将删除 el/delete 取消注释到 Rem 时，我进入了无限循环。我已经尝试修复它 4 小时。请看一眼。

为什么当我调用 l->remove(0) 时，这些行尤其是 87（忘记 100）会导致程序崩溃？

[http://wklej.org/id/761056/](http://wklej.org/id/761056/)第 87 和 100 行

**remove 方法和 List 析构函数很重要**

```
void remove(int index){
    Node* el = this->root;
    if(index == 0){
       this->root = el->next;
    //   delete el;
    }
   else{
    int i  = 0;
    while(el != NULL && i < index - 1){

        el = el->next;
        i++;
    }
     if(el!=NULL){
        Node* toRem = el->next;
        Node* newNext = toRem->next;
        el->next = newNext;
       // delete toRem;
    }
}
} 
```

* * *

```
 ~List(){
    Node* currentNode = this->root;
    while (currentNode != NULL)
    {
        Node* nextNode = currentNode->next;
        delete currentNode;
        currentNode = nextNode;
    }
} 
```

* * *

整个代码

```
 #include <cstdio>
#include <cmath>
#include<iostream>
#include <stdio.h>
#include <string.h>
using namespace std;

class Node{
 friend class List;
public:
    Node(Node* next, int wrt){
        this->next = next;
        this->wrt = wrt;
    }

    Node(const Node& obiekt){
        this->wrt = obiekt.wrt;
        this->next = obiekt.next;
    }
     //NIE MA DESTRUKTORA BO NIE ALOKUJE ZADNYCH DANYCH !!!

    void show(){
        cout<<this->wrt<<endl;
    }

 private:
    Node* next;
    int wrt;

};

class List{

public:
List(int wrt){
    this->root = new Node(NULL, wrt);
}

    List(const List& list)
{
    // jesli pusty kopiujemy
    if (list.root == NULL)
    {
        this->root = NULL;
        return;
    }

    //tworzenie nowego korzenia
    this->root = new Node(NULL, list.root->wrt);

    Node* list_currentNode = list.root;
    Node* this_currentNode = this->root;
    while (list_currentNode->next != NULL)
    {
        // tworzenie nastepnika
        Node* newNode = new Node(NULL, list_currentNode->next->wrt);
        this_currentNode->next = newNode;
        this_currentNode = this_currentNode->next;
        list_currentNode = list_currentNode->next;
    }
}

void add(int wrt){
    Node* node = new Node(NULL, wrt);
    Node* el = this->root;
    while(el->next != NULL){
        //el->show();
        el = el->next;
    }
    el->next = node;
}

void remove(int index){
    Node* el = this->root;
    if(index == 0){
       this->root = el->next;
    //   delete el;
    }
   else{
    int i  = 0;
    while(el != NULL && i < index - 1){

        el = el->next;
        i++;
    }
     if(el!=NULL){
        Node* toRem = el->next;
        Node* newNext = toRem->next;
        el->next = newNext;
       // delete toRem;
    }
}
}

void show(){
    Node* el = this->root;
    while(el != NULL){
        el->show();
        el = el->next;
    }
}

~List(){
    Node* currentNode = this->root;
    while (currentNode != NULL)
    {
        Node* nextNode = currentNode->next;
        delete currentNode;
        currentNode = nextNode;
    }
}

private:
    Node* root;

};

int main(){
    List* l = new List(10);
    l->add(12); l->add(13);
    l->show();
    cout<<endl;
    List* lala = new List(*l);
    lala->show();
    cout<<endl;
    lala->add(4);
    cout<<"lala before remove"<<endl;
    lala->show();
    lala->remove(0);
    cout<<"l before delete"<<endl;
    l->show();
    cout<<"lala before delete"<<endl;
    lala->show();
    delete l;
    cout<<"l after"<<endl;
    l->show();
    cout<<"lala after delete"<<endl;
    lala->show();
    return 0;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:34:00.470

**第一部分**

以下三个语句导致无限循环..

```
l->~List();
cout<<"l after"<<endl;
l->show(); 
```

因为你的析构函数`~List()`错过了一个重要的声明，那就是......

```
this->root = NULL; 
```

这是主要原因`infinite loop`。所以你的完整析构函数在这里..

```
 ~List()
 {
    Node* currentNode = this->root;
    while (currentNode != NULL)
    {
        Node* nextNode = currentNode->next;
        delete currentNode;
        currentNode = nextNode;
    }

    this->root = NULL;
} 
```

**第二部分**

现在，您已将以上三行更新为以下...

```
delete l;
cout<<"l after"<<endl;
l->show;              // We should never write this line in general practice.. 
```

并考虑到您正在使用上述`~List()`功能。仍然程序进入 an 的原因`infinite loop`是`delete l`它将取消分配分配给 的内存`l`。然后你调用`l->show()`（并且`l`仍然指向一个可访问的线性地址），所以现在`this->root`指向一些垃圾位置，这就是为什么直到它幸运地发现`while(el != NULL)`条件为 NULL 之前，它将保持无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:01:24.000

Ok so this is correct implementation of the List. I think many people can find it useful. Thank you guys especcially Agent_L who helped me on comunicator.

**CORRECT LINKED LIST IMPLEMENTATION**

```
 #include <cstdio>
#include <cmath>
#include<iostream>
#include <stdio.h>
#include <string.h>
using namespace std;

class Node{
 friend class List;
public:
    Node(Node* next, int wrt){
        this->next = next;
        this->wrt = wrt;
    }

    Node(const Node& obiekt){
        this->wrt = obiekt.wrt;
        this->next = obiekt.next;
    }
     //NIE MA DESTRUKTORA BO NIE ALOKUJE ZADNYCH DANYCH !!!

    void show(){
        cout<<this->wrt<<endl;
    }

 private:
    Node* next;
    int wrt;

};

class List{

public:
List(int wrt){
    this->root = new Node(NULL, wrt);
}

    List(const List& list)
{
    // jesli pusty kopiujemy
    if (list.root == NULL)
    {
        this->root = NULL;
        return;
    }

    //tworzenie nowego korzenia
    this->root = new Node(NULL, list.root->wrt);

    Node* list_currentNode = list.root;
    Node* this_currentNode = this->root;
    while (list_currentNode->next != NULL)
    {
        // tworzenie nastepnika
        Node* newNode = new Node(NULL, list_currentNode->next->wrt);
        this_currentNode->next = newNode;
        this_currentNode = this_currentNode->next;
        list_currentNode = list_currentNode->next;
    }
}

void add(int wrt){
    Node* node = new Node(NULL, wrt);
    Node* el = this->root;
    while(el->next != NULL){
        //el->show();
        el = el->next;
    }
    el->next = node;
}

void remove(int index){
    Node* el = this->root;
    if(index == 0){
       this->root = el->next;
       delete el;
    }
   else{
    int i  = 0;
    while(el != NULL && i < index - 1){

        el = el->next;
        i++;
    }
     if(el!=NULL){
        Node* toRem = el->next;
        Node* newNext = toRem->next;
        el->next = newNext;
       delete toRem;
    }
}
}

void show(){
    Node* el = this->root;
    while(el != NULL){
        el->show();
        el = el->next;
    }
}

~List(){
    Node* currentNode = this->root;
    while (currentNode != NULL)
    {
        Node* nextNode = currentNode->next;
        delete currentNode;
        currentNode = nextNode;
    }
}

private:
    Node* root;

};

int main(){
    List* l = new List(11);
    l->add(22); l->add(33);
    l->show();
    cout<<endl;
    List* lala = new List(*l);
    lala->show();
    cout<<endl;
    lala->add(44);
    cout<<"lala before remove"<<endl;
    lala->show();
    lala->remove(1);
    cout<<"l before delete"<<endl;
    l->show();
    cout<<"lala before delete"<<endl;
    lala->show();
    delete l;
  /*  cout<<"l after delete   "<<endl;
    l->show(); */
    cout<<"lala after delete"<<endl;
    lala->show();
    return 0;
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T11:25:25.067

在某些地方，您的代码不会考虑项目是否为 NULL。例如什么是根是NULL？或者这里的 toRem is NULL 是什么？（节点* toRem = el->next；节点* newNext = toRem->next；）

可能还有更多问题，但它是一个开始......

# ios - 带有 UILabel 的 UIToolbar 填充工具栏的可用空间

> ID：10773537
> 
> 赞同：1
> 
> 时间：2012-05-27T11:13:47.243
> 
> 标签：ios, uitoolbar

我有一个工具栏，`UILabel`左边是 a `UIBarButton`，右边是 a。我想让`UILabel`填充整个可用空间。

# excel - 查找开始和结束列名

> ID：10773540
> 
> 赞同：0
> 
> 时间：2012-05-27T11:14:10.593
> 
> 标签：excel, excel-2007, excel-formula, excel-2003

假设我在 excel 中有如下数据。

```
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+  A  +  B  +  C  +  D  +  E  +  F  +  G  +  H  +  I  +  J  +  K  +  L  +  M  +  N  +
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+     +  1  +  2  +  3  +  4  +  4  +  1  +  1  +  2  +  3  +  7  +  3  +  4  +  1  +
+     +  1  +  2  +  3  +  3  +  4  +  2  +  1  +  2  +  3  +  7  +  3  +  4  +  1  +
+     +  0  +  1  +  2  +  3  +  6  +  6  +  3  +  2  +  3  +  7  +  3  +  4  +  1  +
+     +  0  +  0  +  0  +  0  +  0  +  0  +  0  +  0  +  0  +  0  +  0  +  0  +  0  +
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
```

我想找到的是不正确的行，即所有列都不应该有 0。为了得到这个，我在单元格 N 中使用下面的公式。

**`=if(SUM(B1:M1)>0,1,0)`**

***注意：所有单元格将只有非负数。***

在上面的示例中，我将第 4 行作为不正确的行，因此我的值为 0。

我想要的是，而不是手动编写`B1:M1`，在 excel 中有什么方法可以显示开始和结束的单元格/列名。

在上面的例子中

```
Starting cell/column will be B
Ending cell/column will be   M 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:08:01.020

我可以在没有 vba 的情况下做到这一点（但这让我对我正在使用 excel 的滥用行为感到不寒而栗：）

我已将第 5 行用于这些计算 - 根据您的需要更改第 5 行

单元格 1 - 起始列 - 作为*数组*公式输入（Ctrl+Shift+Enter） （如果输入正确，`=MATCH(TRUE,5:5>0,0)`Excel 将围绕它 单元格 2 - 列数 - 最终单元格 - 您的检查 -`{}`
`=COUNTA(5:5)`
`=if(SUM(INDIRECT(ADDRESS(5,Cell_1)&":"&ADDRESS(5,Cell_1+Cell_2)))>0,1,0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:30:32.403

您正在搜索 Excel 的[命名范围](http://www.homeandlearn.co.uk/excel2007/excel2007s7p6.html)内置功能。

创建一个命名范围`B:M`并在您的公式中使用它。命名范围是一种跨电子表格编写一致的相同公式的方法，这些电子表格涉及异构范围

# c# - c# 在面板上调用方法？

> ID：10773542
> 
> 赞同：0
> 
> 时间：2012-05-27T11:14:13.610
> 
> 标签：c#, forms, methods, panel

我创建了一些新方法：

```
void newMethod(int x, int y)
{
    Button B = new Button();
    B.Size = new Size(100, 30);
    B.Location = new Point(x, y);
    B.Text = "Text";
    Controls.Add(B);
} 
```

现在我在其他方法中创建了一个新面板：

```
void Something()
{
    Panel P = new Panel();
    P.Size = new Size(300, 300);
    P.Location = new Point(0, 0);
    P.BackColor = new Color(Blue);
    Controls.Add(P);
} 
```

如何将创建按钮的第一种方法添加到第二种方法的面板中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:56:21.537

添加父控件作为参数：

```
private void AddButton(int x, int y, Control parent)
{
    Button button = new Button
        {
            Size = new Size(100, 30),
            Location = new Point(x, y),
            Text = "Text"
        };

    parent.Controls.Add(button);
} 
```

然后：

```
void Something()
{
    Panel P = new Panel();
    P.Size = new Size(300, 300);
    P.Location = new Point(0, 0);
    P.BackColor = new Color(Blue);

    this.AddButton(100, 100, P);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:54:41.343

编辑您的第一种方法

```
void newMethod(int x, int y, Panel p)
{
    Button B = new Button();
    B.Size = new Size(100, 30);
    B.Location = new Point(x, y);
    B.Text = "Text";
    p.Controls.Add(B);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T11:23:21.573

全局地给出这个声明。那是在类内部而不是在 NewMethod 中。

```
Panel P = new Panel(); 
```

然后写这段代码

```
this.P.controls.Add(B); 
```

**安装的**

```
Controls.Add(B); 
```

# java - 在 JPA 中，实体是否有权访问其 Embedded 对象的 Embedded？

> ID：10773543
> 
> 赞同：1
> 
> 时间：2012-05-27T11:14:19.307
> 
> 标签：java, jpa, jpa-2.0

实体是否有权访问`Embedded`其`Embedded`对象？例如：

```
@Embeddable
public class Address {
    @Embedded
    protected AddressResearchChangeActivity activity;
}

public class ClaimantAddress {
    @Embedded
    private Address address;
} 
```

那么可以`ClaimantAddress`访问`AddressResearchChangeActivity`吗？

而当我们保存`ClaimantAddress`的时候，数据`AddressResearchChangeActivity`也会被保存吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:29:20.133

嵌入式对象只是将实体内的多个字段分组的一种方式。保存实体时，所有内容都保存在实体中，包括所有嵌入对象（及其子嵌入对象）。

# android - Android：ContextMenu 和 LongClick 问题

> ID：10773546
> 
> 赞同：1
> 
> 时间：2012-05-27T11:14:58.713
> 
> 标签：android, listview, nullpointerexception, contextmenu, onlongclicklistener

我有一个充满个人观点的列表视图。当我长按一个项目时，我想创建一个菜单。因此我在 onCreate 中有这个：

```
 myListView.setOnCreateContextMenuListener(new View.OnCreateContextMenuListener(){

        public void onCreateContextMenu(ContextMenu cMenu, View v, ContextMenu.ContextMenuInfo menuInfo) {
                MenuInflater inflater = getMenuInflater();
                inflater.inflate(R.menu.song_menu, cMenu);
    }});

    myListView.setOnItemLongClickListener(new OnItemLongClickListener(){

        public boolean onItemLongClick(AdapterView<?> a, View v, int pos, long id) {
        lastOnLongClickedPos = pos;
        Log.v("test pos", currentList.getSong(lastOnLongClickedPos).getTitle());
        return false;
        }

    }); 
```

getSong 用于获取 SongContainer 的实例（具有标题、路径、艺术家等的类）。现在一切都很好，我确实根据位置得到了歌曲。

当我想要执行特定操作（阅读歌曲、添加到播放列表等）时，就会出现问题。我在课堂上有这段代码（在onCreate之外）：

public boolean onContextItemSelected(MenuItem item) {

```
 final String clickedMusic;
    Uri uriSong;

    switch(item.getItemId()) {

        case R.id.songlist_play : 
            clickedMusic = currentList.getSong(lastOnLongClickedPos).getPath();
            uriSong = Uri.parse("file://" + clickedMusic);
            // send uri to player
            return true;
    [...] 
```

在这个函数中，currentList 似乎是空的，因为行“clickedMusic = currentList.getSong(lastOnLongClickedPos).getPath();” 让我得到一个空指针异常。我已经测试过 lastOnLongClickedPos 并且没关系。所以事实是我的 currentList 在这两个函数中是不同的，我真的不知道为什么！有什么想法吗？：X

# asp.net-mvc - MVC3 Razor 视图中的三元运算符和选中的属性

> ID：10773550
> 
> 赞同：4
> 
> 时间：2012-05-27T11:15:37.460
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, ternary-operator, checked

我用这个：

```
<input type="checkbox" value="@item.Id" checked="@(item.HasAccess ? "checked" : "")"/> 
```

这工作正常：我的意思是当时`HasAccess`是什么时候，`true`然后是什么`checked="checked"`时候 ，但总是检查 s，我怎样才能正确使用三元运算符和处理属性？`HasAccess``false``checked=""``checkbox``checked`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-27T12:00:53.337

不幸的是，在 razor V1 中，您必须这样做：

```
<input type="checkbox" value="@item.Id" @(item.HasAccess ? "checked=\"checked\"" : "") /> 
```

这是因为在 HTML 世界中，只要属性的存在，无论值如何，都会告诉浏览器选中该框。

在 Razor V2 中，这将不再是一个问题。请参阅下面文章的条件属性部分：

[http://vibrantcode.com/blog/2012/4/10/whats-new-in-razor-v2.html/](http://vibrantcode.com/blog/2012/4/10/whats-new-in-razor-v2.html/)

# java - 来自 SwingWorker 的 jProgressBar 更新

> ID：10773552
> 
> 赞同：12
> 
> 时间：2012-05-27T11:15:44.720
> 
> 标签：java, swing, progress-bar, swingworker

我用来通过更新 ProgressBar 来监控长时间运行的任务。长时间运行的任务当然是在 Swingworker 线程中执行的。

我曾经编写过这样的程序：

```
public class MySwingWorkerClass extends SwingWorker<Void, Void> {   
    private JProgressBar progressBar;    

    public MySwingWorker(JProgressBar aProgressBar) {        
        this.progressBar = aProgressBar;           
        progressBar.setVisible(true);        
        progressBar.setStringPainted(true);
        progressBar.setValue(0);        
    }

    @Override
    public Void doInBackground() {
        //long running task
        loop {  
            calculation();
            progressBar.setValue(value);
        }
        return null;
    }    

    @Override
    public void done() {                
        progressBar.setValue(100);
        progressBar.setStringPainted(false);
        progressBar.setVisible(false);      
   }
} 
```

但最近我发现我可以通过使用“setProgress”并定义属性更改并做类似的事情来做到这一点

```
public class MySwingWorkerClass extends SwingWorker<Void, Void> {   
    private JProgressBar progressBar;    

    public MySwingWorker(JProgressBar aProgressBar) {        
        addPropertyChangeListener(new PropertyChangeListener() {
            public void propertyChange(PropertyChangeEvent evt) {
                if ("progress".equals(evt.getPropertyName())) {
                    progressBar.setValue((Integer) evt.getNewValue());
                }
            }
        });

        progressBar.setVisible(true);        
        progressBar.setStringPainted(true);
        progressBar.setValue(0);
        setProgress(0);
    }

    @Override
    public Void doInBackground() {
        //long running task
        loop {  
            calculation();
            setProgress(value);
        }
        return null;
    }    

    @Override
    public void done() {                
        setProgress(100);
        progressBar.setValue(100);
        progressBar.setStringPainted(false);
        progressBar.setVisible(false);      
   }
} 
```

我的问题是：我的第一个代码是否可以接受，或者我应该出于任何原因使用 setProgress 吗？我发现第二个代码更复杂，就我而言，不知道使用第二个代码是否有任何优势或理由。

有什么建议吗？

**编辑** 感谢您的回答。作为一个总结。第一个解决方案是“错误的”，因为进度条更新是在 EDT 之外执行的。第二种解决方案是“正确的”，因为进度条更新是在 EDT 内部执行的

现在，根据@mKorbel 在我的情况下的“有趣”答案，我的计算给出了我“插入”的 HTML 文本的结果（请参阅[此链接](https://stackoverflow.com/questions/8214316/java-htmldocument-insertafterend-insertafterstart-insertbeforeend-insertbefo)）。我当前的代码如下。

我发布（字符串），我的流程代码看起来像这样

```
@Override
    protected void process(List<String> strings) {
        for (String s : strings) {
            try {
                htmlDoc.insertBeforeEnd(htmlDoc.getElement(htmlDoc.getDefaultRootElement(), StyleConstants.NameAttribute, HTML.Tag.TABLE), s);
            } catch (BadLocationException ex) {
            } catch (IOException ex) {
            }
        }
    } 
```

在我的情况下，我如何重用 @mKobel 来做同样的事情。我的意思是他用来覆盖我的情况下的表格渲染我应该覆盖什么渲染器（jTextPane？）以及如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T11:19:34.200

在第一个代码中，您在非 EDT（事件调度程序线程）线程中调用以下行。所以它不是线程安全的：

```
progressBar.setValue(value); 
```

这可能会导致意外行为，因为 Swing 并非设计为线程安全库。

有不同的方法可以以 Swing 方式执行此操作。一种正确的方法是您在第二篇文章中所做的。另一种方法是使用`publish()/process()`方法，第三种方法是编写自己的线程而不是`SwingWorker`使用`SwingUtilities.invokeLater()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-27T13:19:05.187

> 我用来通过更新 ProgressBar 来监控长时间运行的任务。长时间运行的任务当然是在 Swingworker 线程中执行的。

是的，您可以`SwingWorker`在所有情况下将任何繁重且长时间运行的任务重定向到`Background`

```
import java.awt.*;
import java.util.*;
import javax.swing.*;
import javax.swing.table.*;

public class TableCellProgressBar {

    private String[] columnNames = {"String", "ProgressBar"};
    private Object[][] data = {{"dummy", 100}};
    private DefaultTableModel model = new DefaultTableModel(data, columnNames) {

        private static final long serialVersionUID = 1L;

        @Override
        public Class<?> getColumnClass(int column) {
            return getValueAt(0, column).getClass();
        }

        @Override
        public boolean isCellEditable(int row, int col) {
            return false;
        }
    };
    private JTable table = new JTable(model);

    public JComponent makeUI() {
        TableColumn column = table.getColumnModel().getColumn(1);
        column.setCellRenderer(new ProgressRenderer());
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                startTask("test");
                startTask("error test");
                startTask("test");
            }
        });
        JPanel p = new JPanel(new BorderLayout());
        p.add(new JScrollPane(table));
        return p;
    }
//http://java-swing-tips.blogspot.com/2008/03/jprogressbar-in-jtable-cell.html

    private void startTask(String str) {
        final int key = model.getRowCount();
        SwingWorker<Integer, Integer> worker = new SwingWorker<Integer, Integer>() {

            private int sleepDummy = new Random().nextInt(100) + 1;
            private int lengthOfTask = 120;

            @Override
            protected Integer doInBackground() {
                int current = 0;
                while (current < lengthOfTask && !isCancelled()) {
                    if (!table.isDisplayable()) {
                        break;
                    }
                    if (key == 2 && current > 60) { //Error Test
                        cancel(true);
                        publish(-1);
                        return -1;
                    }
                    current++;
                    try {
                        Thread.sleep(sleepDummy);
                    } catch (InterruptedException ie) {
                        break;
                    }
                    publish(100 * current / lengthOfTask);
                }
                return sleepDummy * lengthOfTask;
            }

            @Override
            protected void process(java.util.List<Integer> c) {
                model.setValueAt(c.get(c.size() - 1), key, 1);
            }

            @Override
            protected void done() {
                String text;
                int i = -1;
                if (isCancelled()) {
                    text = "Cancelled";
                } else {
                    try {
                        i = get();
                        text = (i >= 0) ? "Done" : "Disposed";
                    } catch (Exception ignore) {
                        ignore.printStackTrace();
                        text = ignore.getMessage();
                    }
                }
                System.out.println(key + ":" + text + "(" + i + "ms)");
            }
        };
        model.addRow(new Object[]{str, 0});
        worker.execute();
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }

    public static void createAndShowGUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.getContentPane().add(new TableCellProgressBar().makeUI());
        frame.setSize(320, 240);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
}

class ProgressRenderer extends DefaultTableCellRenderer {

    private final JProgressBar b = new JProgressBar(0, 100);

    public ProgressRenderer() {
        super();
        setOpaque(true);
        b.setBorder(BorderFactory.createEmptyBorder(1, 1, 1, 1));
    }

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        Integer i = (Integer) value;
        String text = "Completed";
        if (i < 0) {
            text = "Error";
        } else if (i < 100) {
            b.setValue(i);
            return b;
        }
        super.getTableCellRendererComponent(table, text, isSelected, hasFocus, row, column);
        return this;
    }
} 
```

但是为什么要使用复杂的 Wwing GUI `SwingWorker`（也需要最深入的知识）`Java Essential Classes`，`Generics`

`Runnable#Thread`仅需要输出到 Swing GUI 的基本实现`invokeLater`，并且在从 EDT（从 Swing/AWT 侦听器）开始的情况下，并且没有任何代码行包含`Thread.sleep(int)`then`invokeLater`仅建议/需要生产代码

```
import java.awt.Component;
import java.util.Random;
import javax.swing.JFrame;
import javax.swing.JProgressBar;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;

public class TableWithProgressBars {

    public static class ProgressRenderer extends JProgressBar implements TableCellRenderer {

        private static final long serialVersionUID = 1L;

        public ProgressRenderer(int min, int max) {
            super(min, max);
            this.setStringPainted(true);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value,
                boolean isSelected, boolean hasFocus, int row, int column) {
            this.setValue((Integer) value);
            return this;
        }
    }
    private static final int maximum = 100;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TableWithProgressBars().createGUI();
            }
        });

    }

    public void createGUI() {
        final JFrame frame = new JFrame("Progressing");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Integer[] oneRow = {0, 0, 0, 0};
        String[] headers = {"One", "Two", "Three", "Four"};
        Integer[][] data = {oneRow, oneRow, oneRow, oneRow, oneRow,};
        final DefaultTableModel model = new DefaultTableModel(data, headers);
        final JTable table = new JTable(model);
        table.setDefaultRenderer(Object.class, new ProgressRenderer(0, maximum));
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        frame.add(new JScrollPane(table));
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        new Thread(new Runnable() {

            @Override
            public void run() {
                Object waiter = new Object();
                synchronized (waiter) {
                    int rows = model.getRowCount();
                    int columns = model.getColumnCount();
                    Random random = new Random(System.currentTimeMillis());
                    boolean done = false;
                    while (!done) {
                        int row = random.nextInt(rows);
                        int column = random.nextInt(columns);
                        Integer value = (Integer) model.getValueAt(row, column);
                        value++;
                        if (value <= maximum) {
                            model.setValueAt(value, row, column);
                            try {
                                waiter.wait(15);
                            } catch (InterruptedException e) {
                                e.printStackTrace();
                            }
                        }
                        done = true;
                        for (row = 0; row < rows; row++) {
                            for (column = 0; column < columns; column++) {
                                if (!model.getValueAt(row, column).equals(maximum)) {
                                    done = false;
                                    break;
                                }
                            }
                            if (!done) {
                                break;
                            }
                        }
                    }
                    frame.setTitle("All work done");
                }
            }
        }).start();
    }
} 
```

我对你所看到的真正繁重和长期运行的任务的结论`Runnable#Thread`（简单、容易、非错误和清晰的方式），只有你对`Java`&的了解`Swing`非常好，然后你才能考虑`SwingWorker`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-27T11:59:07.957

您的第二种方法是正确的，甚至记录在该类的类 javadoc 中`SwingWorker`。'progress' 事件在 EDT 上触发，因此您的侦听器会更新 EDT 上的进度条。在您的第一种方法中不是这种情况。

`publish/process`可以在[我对上一个 SO 问题的回答](https://stackoverflow.com/questions/8916721/java-swing-update-label/8917565#8917565)中找到另一种方法的示例（如 vizier 所示）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-27T13:50:46.920

如本[例](https://stackoverflow.com/a/4637725/230513)所示，您在第二个示例中对工作人员的使用[`setProgress()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#setProgress%28int%29)是正确的：任何`PropertyChangeListener`将在事件调度线程上异步通知。

# java - 如何立即从内存中删除刚刚从arraylist中删除的值

> ID：10773553
> 
> 赞同：0
> 
> 时间：2012-05-27T11:16:08.280
> 
> 标签：java, arraylist

我正在创建一个 java 程序，其中一些数据被添加到一个数组列表中。

一些处理在一个循环中，我在循环内的列表中添加一个新节点，使用该节点执行操作，然后在循环迭代结束之前使用 arraylist.remove() 删除该节点。我也在运行 System.gc(); 就在循环迭代结束之前。

但是，当我进行内存转储时，我发现 arraylist 仍然保存了我在不同循环迭代中使用过的所有值……如何从内存中擦除所有这些值？而且我想在循环迭代结束之前执行此操作，以使数组列表的大小永远不会增长？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:20:59.610

如果您对“活动”对象进行内存转储，它将被删除。

删除对象的成本相对较高，因此在 Java 中通常最好只在需要时删除对象（当 JVM 这样做时）才删除对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:50:17.337

您的意思是释放 ArrayList 占用的部分内存，而不是释放以前存储在 ArrayList 中的对象吗？如果是这样，您可以通过调用`ArrayList.trimToSize()`- 将 ArrayList 中的所有值复制到一个新的（内部）数组中，并允许对旧的（内部）数组进行垃圾收集。（因为这涉及到复制数组中的所有值，所以自然只有当它会产生很大的不同时才应该这样做。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T11:27:39.313

Java 有垃圾收集器是有原因的，这个原因是程序员不必考虑从内存中删除对象。您唯一能做的（我不推荐）就是通过`System.gc()`方法强制启动垃圾收集器。但记得做两次，因为第一次它只会通过调用 it`finalize()`方法来准备要删除的对象。

# c++ - 读取文件问题

> ID：10773555
> 
> 赞同：0
> 
> 时间：2012-05-27T11:17:12.460
> 
> 标签：c++, visual-studio-2010, file, input

我正在创建一个程序来读取 Autodesk 的 .dxf 文件。我在读取字符串时遇到问题。

当我使用：

```
string acad;
fstream f;
f.open(name);
f >> acad 
```

如果字符串是“倒角”，它就完美了。但如果字符串是“a & b”，它只能读取到 a。因为文件格式遵循我正在使用`while`循环的模式。

来自文件的示例：

```
 9           //loop 1
$DWGCODEPAGE  //loop 1
  3           //looop 1
ANSI_1252     //looop 1
  9           //loop 2
$LASTSAVEDBY  //loop 2
  1           //loop 2
sam & tom     //loop 2
9             //loop 3 
$INSBASE      //loop 3
 10           //loop 3
0.0           //loop 3 
```

正如您所看到的，有时可能没有“ANSI_1252”中的空格，有时可能有“sam & tom”中的空格。我如何概括代码，以便一行中的整个字符串与空格（如果有）一起存储。请忘记每行开头的空格，我正在使用`ws`它。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:21:39.813

`>>`当与字符串参数一起使用时，运算符读取由空格分隔的单词。如果要读取字符行，则应`getline()`改为使用。

# java - 将简单的 Java 应用程序转换为动态 Web 项目

> ID：10773557
> 
> 赞同：0
> 
> 时间：2012-05-27T11:17:45.287
> 
> 标签：java, web-project

很抱歉问了这个愚蠢的问题，我一直在想，但仍然不知道如何将一个简单的项目转换为动态的 Web 项目。

我正在使用 WebSphere Application Server，我想在其中运行我的简单应用程序。

这是应用程序的项目结构，当我右键单击并作为java应用程序运行时，它运行顺利。我在哪里进行更改，以便能够在 WebSphere Application Server 上运行它。

**示例项目**

```
--src
|  |--main
|  |   |--java
|  |     --com
|  |       --mykong
|  |         --core
|  |            --App.java
|  |            --HelloWorld.java       
|  |
|  |   |--resouces
|  |      --SpringBeans.xml
|  |
|  |--test
|     |--java
|         --com
|          --mykong
|             --core
|               --AppTest.java
|
|--target
|--.classpath
|--.project
|--.pom.xml 
```

**应用程序.java**

```
package com.mkyong.core;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class App {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext(
                "SpringBeans.xml");

        HelloWorld obj = (HelloWorld) context.getBean("helloBean");
        obj.printHello();
    }
} 
```

**HelloWorld.java**

```
package com.mkyong.core;

/**
 * Spring bean
 * 
 */
public class HelloWorld {
    private String name;

    public void setName(String name) {
        this.name = name;
    }

    public void printHello() {
        System.out.println("Spring 3 : Hello ! " + name);
    }
} 
```

**SpringBeans.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="helloBean" class="com.mkyong.core.HelloWorld">
        <property name="name" value="Mkyong" />
    </bean>

</beans> 
```

**AppTest.java**

```
package com.mkyong.core;

import junit.framework.Test;
import junit.framework.TestCase;
import junit.framework.TestSuite;

/**
 * Unit test for simple App.
 */
public class AppTest 
    extends TestCase
{
    /**
     * Create the test case
     *
     * @param testName name of the test case
     */
    public AppTest( String testName )
    {
        super( testName );
    }

    /**
     * @return the suite of tests being tested
     */
    public static Test suite()
    {
        return new TestSuite( AppTest.class );
    }

    /**
     * Rigourous Test :-)
     */
    public void testApp()
    {
        assertTrue( true );
    }
} 
```

谢谢你的帮助.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T15:09:14.697

由于您已经在使用 Maven，最简单的方法可能是在[maven-eclipse-plugin中配置](http://maven.apache.org/plugins/maven-eclipse-plugin/)[wtpversion](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html#wtpversion)。并在项目上运行以下命令：

```
mvn eclipse:eclipse 
```

另一种选择是[为 Eclipse WTP 安装 Maven 集成](http://marketplace.eclipse.org/content/maven-integration-eclipse-wtp)。

# xslt - XSLT、排序和位置（）

> ID：10773559
> 
> 赞同：0
> 
> 时间：2012-05-27T11:18:16.953
> 
> 标签：xslt, sorting, position

开始使用 XSLT，这很有趣，我喜欢校长，虽然需要一点时间来适应。现在......我已经遇到了一个我想知道的问题，也许有人可以启发我。

我有一组优先的盒子。优先级较低的框首先出现。这很好用。但是，我想将我的盒子排成一行，并将第 1 行和第 3 行标记为奇数，将第 2 行标记为偶数（我预计在实际项目中会有更多行。）

因此，我认为我应该能够使用 fn:position() 函数。不幸的是，返回的位置是原始节点之一，而不是结果排序节点。有没有办法解决这个问题？

有一个示例 XSLT 暴露了这个问题：

```
<?xml version="1.0"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="body">
    <xsl:apply-templates>
      <xsl:sort select="@priority" data-type="number"/>
    </xsl:apply-templates>
  </xsl:template>
  <xsl:template match="body/box">
<div class="box">
Box[<xsl:value-of select="count(preceding-sibling::box) + 1" />,<xsl:value-of select="position()"/>] = (<xsl:value-of select="@priority"/>)
  <xsl:copy-of select="title"/></div>
  </xsl:template>
</xsl:stylesheet> 
```

还有一个输入的例子。应该首先出现两个，然后是三个，最后是一个。

```
<?xml version="1.0"?>
<body>
  <box priority="103">
    <title>This is box ONE</title>
  </box>
  <box priority="1">
    <title>This is box TWO</title>
  </box>
  <box priority="12">
    <title>This is box THREE</title>
  </box>
</body> 
```

但是我希望 position() 为 1、2 和 3 ......但这是输出：

```
<div class="box">
Box[2,4] = (1)
  <title>This is box TWO</title>
</div>
<div class="box">
Box[3,6] = (12)
  <title>This is box THREE</title>
</div>
<div class="box">
Box[1,2] = (103)
  <title>This is box ONE</title>
</div> 
```

Box 方括号内的第二个数字是 position()。我预期为 1、2、3。但正如我们所见，我们得到 4、6、2，这是原始文档中节点的位置（我不太确定为什么它是 x2，但当我用xsl:for-each 标签，它是 2、3 和 1。）

我用 xmlpatterns (Qt 4.7) 和 xsltproc (libxml2，这应该使用 1.0 版本，代码与 1.0 兼容) 进行了测试，并且两者都返回相同的数字。

那么......这是 XSLT 的限制，还是这两个 XSLT 实现中的错误？！

**2012 年 5 月 27 日更新**

已确定 QXmlQuery (xmlpatterns) 在该特定情况下是一个损坏的解析器。position() 必须使用类似的东西来计算，`count(preceding-sibling::box) + 1`而不是在运行的 for-each 或模板序列中使用正确的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:45:05.390

好吧，你做

```
<xsl:apply-templates>
  <xsl:sort select="@priority" data-type="number"/>
</xsl:apply-templates> 
```

这是doing的缩写

```
<xsl:apply-templates select="node()">
  <xsl:sort select="@priority" data-type="number"/>
</xsl:apply-templates> 
```

它处理所有类型的子节点，包括您似乎感兴趣的元素节点以及元素之间的空白文本节点。所以使用

```
<xsl:apply-templates select="box">
  <xsl:sort select="@priority" data-type="number"/>
</xsl:apply-templates> 
```

并且您至少应该根据需要将 position() 设置为 1,2,3。

对于它的价值，我使用样式表在 Windows 上测试了 xsltproc

```
<?xml version="1.0"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="body">
    <xsl:apply-templates select="box">
      <xsl:sort select="@priority" data-type="number"/>
    </xsl:apply-templates>
  </xsl:template>
  <xsl:template match="body/box">
<div class="box">
Box[<xsl:value-of select="count(preceding-sibling::box) + 1" />,<xsl:value-of select="position()"/>] = (<xsl:value-of select="@priority"/>)
  <xsl:copy-of select="title"/></div>
  </xsl:template>
</xsl:stylesheet> 
```

针对您发布的输入，结果是

```
compilation error: file test2012052702.xsl line 2 element stylesheet
xsl:version: only 1.0 features are supported
<?xml version="1.0"?>
<div class="box">
Box[2,1] = (1)
  <title>This is box TWO</title></div><div class="box">
Box[3,2] = (12)
  <title>This is box THREE</title></div><div class="box">
Box[1,3] = (103)
  <title>This is box ONE</title></div> 
```

所以我认为这个位置是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T13:39:14.417

**不能复制这个**。

我用 Saxon 9.1.07 运行你的转换，结果是；

```
<div class="box">
      Box[2,5] = (1)
      <title>This is box TWO</title></div><div class="box">
      Box[3,6] = (12)
      <title>This is box THREE</title></div><div class="box">
      Box[1,7] = (103)
      <title>This is box ONE</title></div> 
```

**如我们所见，位置是正确的**（仍然不是 1,2,3 - 因为也存在仅空白节点）。

**XQSharp (XmlPrime) 产生了相同的结果。**

**AltovaXML2009 (XML-SPY) 甚至会产生这样的结果**：

```
<?xml version="1.0" encoding="UTF-8"?><div class="box">
    Box[2,1] = (1)
      <title>This is box TWO</title></div><div class="box">
    Box[3,2] = (12)
      <title>This is box THREE</title></div><div class="box">
    Box[1,3] = (103)
      <title>This is box ONE</title></div> 
```

这意味着它使用了一个 XML 解析器，该解析器去除了纯空白文本节点。

**此转换的改进版本将排除纯空白节点**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="body">
        <xsl:apply-templates>
          <xsl:sort select="@priority" data-type="number"/>
        </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="box">
    <div class="box">
      Box[<xsl:value-of select="count(preceding-sibling::box) + 1" />
      <xsl:text>,</xsl:text>
      <xsl:value-of select="position()"/>
      <xsl:text>] = (</xsl:text>
      <xsl:value-of select="@priority"/>)
      <xsl:copy-of select="title"/></div>
 </xsl:template>
</xsl:stylesheet> 
```

**当对提供的 XML 文档应用此转换时：**

```
<body>
    <box priority="103">
        <title>This is box ONE</title>
    </box>
    <box priority="1">
        <title>This is box TWO</title>
    </box>
    <box priority="12">
        <title>This is box THREE</title>
    </box>
</body> 
```

**产生了想要的正确结果**：

```
<div class="box">
      Box[2,1] = (1)
      <title>This is box TWO</title>
</div>
<div class="box">
      Box[3,2] = (12)
      <title>This is box THREE</title>
</div>
<div class="box">
      Box[1,3] = (103)
      <title>This is box ONE</title>
</div> 
```

**注意**:`xsl:strip-space`用于排除仅包含空格的节点，甚至不被解析。

**结论**：报告的结果要么是由于使用了有问题的 XSLT 处理器，要么是由于执行了与提供的转换不同的转换。

# visual-studio-2008 - 为诺基亚 Lumia 开发有哪些要求？

> ID：10773562
> 
> 赞同：1
> 
> 时间：2012-05-27T11:18:25.993
> 
> 标签：visual-studio-2008, windows-phone-7, nokia, smartphone

在诺基亚 Lumia 中开发应用程序时，可以使用哪些平台？既然诺基亚是微软的合作伙伴，那么在Visual Studio中开发应用程序可以吗？使用智能设备应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T11:32:55.913

是的，您可以使用 Visual Studio 2010，因为当前版本的 Lumia 是 Windows Phone 7.5 设备。

更多信息在这里：

[智能设备开发](http://msdn.microsoft.com/en-us/library/sa69he4t.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:27:43.010

您可以使用 Visual Studio 和 Silverlight 对其进行编程。

[此处提供视频教程](http://www.silverlight.net/archives/tutorials/building-a-windows-phone-7-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T12:07:09.807

[您可以使用 VS2010 和 Windows Phone SDK 开发 Windows Phone 应用程序（您可以在http://create.msdn.com/en-US/](http://create.msdn.com/en-US/)获取 SDK ）。Windows Phone 实际上使用特定版本的 Silverlight。

# php - 如何在 CakePHP 2.x 中使用条件 CSS？

> ID：10773563
> 
> 赞同：3
> 
> 时间：2012-05-27T11:18:45.413
> 
> 标签：php, css, cakephp

我必须翻译这段代码：

```
<!--[if IE 7]>    <link rel="stylesheet" type="text/css" href="css/ie7-style.css" />    <![endif]--> 
```

对于 CakePHP。目前我`$this->Html->css('fileName')`在视图文件和 default.ctp 中使用`echo $this->fetch('css');`

但是当我必须使用像上面这样的条件 css 表达式时该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T04:07:28.537

如果您想在视图文件中设置条件（如不在布局中），您可以执行以下操作：

```
// in your view file
$this->Html->css('file', null, array('block' => 'ie_conditional_css'));

// in layout
<?php if ($ieConditionalCss = $this->fetch('ie_conditional_css')): ?
<!--[if lt IE 8]><?php echo $ieConditionalCss ; ?><![endif]-->
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T12:35:59.190

您只需将注释放在您的 PHP 周围，如下所示：

`<!--[if lt IE 8]><?php echo $html->css('filename') ?><![endif]-->`

# multithreading - 哪个更适合 node.js 上的并发任务？纤维？网络工作者？或线程？

> ID：10773564
> 
> 赞同：113
> 
> 时间：2012-05-27T11:18:53.233
> 
> 标签：multithreading, node.js, concurrency, web-worker, fibers

前段时间我偶然发现了 node.js 并且非常喜欢它。但很快我发现它严重缺乏执行 CPU 密集型任务的能力。所以，我开始在谷歌上搜索并得到这些答案来解决这个问题：Fibers, Webworkers and Threads (thread-a-gogo)。现在使用哪一个是一个混乱，其中一个肯定需要使用 - 毕竟拥有一个只擅长 IO 而没有别的服务器的目的是什么？需要的建议！

**更新：**

我在想办法迟到；只是需要建议。现在，我想到的是：让我们有一些线程（使用 thread_a_gogo 或 webworkers）。现在，当我们需要更多它们时，我们可以创造更多。但是创建过程会有一些限制。（系统没有暗示，但可能是因为开销）。现在，当我们超过限制时，我们可以分叉一个新节点，并开始在其上创建线程。这样，它可以一直持续到我们达到某个限制（毕竟，进程也有很大的开销）。当达到这个限制时，我们开始排队任务。每当一个线程空闲时，它就会被分配一个新任务。这样，它就可以顺利进行。

所以，我就是这么想的。这个主意好吗？我对所有这些进程和线程的东西有点陌生，所以没有任何专业知识。请分享您的意见。

谢谢。:)

* * *

## 回答 #1

> 赞同：332
> 
> 时间：2012-07-01T00:25:47.423

Node 有一个完全不同的范式，一旦它被正确捕获，就更容易看到这种不同的解决问题的方式。您永远不需要在 Node 应用程序中使用多个线程 (1)，因为您有不同的方式来做同样的事情。您创建多个进程；但它与例如 Apache Web Server 的 Prefork mpm 的方式非常不同。

现在，假设我们只有一个 CPU 内核，我们将开发一个应用程序（以 Node 的方式）来完成一些工作。我们的工作是逐字节处理运行在其内容上的大文件。对于我们的软件来说，最好的方法是从文件的开头开始工作，然后一个字节一个字节地执行到最后。

-- 嘿，哈桑，我想你要么是个新手，要么是我祖父时代的老派！！！为什么不创建一些线程并使其更快？

-- 哦，我们只有一个 CPU 内核。

- 所以呢？创建一些线程的人，让它更快！

——它不是那样工作的。如果我创建线程，我会让它变慢。因为我将在线程之间切换的系统中增加大量开销，试图给它们一个公正的时间，在我的进程内部，试图在这些线程之间进行通信。除了所有这些事实之外，我还必须考虑如何将单个工作分成多个可以并行完成的部分。

——好吧好吧，我看你很穷。让我们用我的电脑，它有32个核心！

——哇，你真棒，我亲爱的朋友，非常感谢你。我很感激！

然后我们回去工作。现在我们有 32 个 cpu 核心，这要感谢我们富有的朋友。我们必须遵守的规则刚刚改变。现在我们想利用我们得到的所有这些财富。

要使用多核，我们需要找到一种方法将我们的工作分成可以并行处理的部分。如果不是 Node，我们将为此使用线程；32个线程，每个cpu核心一个。但是，由于我们有 Node，我们将创建 32 个 Node 进程。

线程可以是 Node 进程的一个很好的替代方案，甚至可能是更好的方法；但仅适用于已经定义了工作并且我们可以完全控制如何处理它的特定类型的工作。除此之外，对于所有其他类型的问题，即工作以我们无法控制的方式来自外部并且我们希望尽快回答，Node 的方式无疑是优越的。

-- 嘿，哈桑，你还在单线程工作吗？你怎么了，伙计？我刚刚为你提供了你想要的。你再也没有借口了。创建线程，让它运行得更快。

——我把工作分成几部分，每个过程都将并行处理其中一个部分。

-- 你为什么不创建线程？

——对不起，我认为它不可用。如果你愿意，你可以带上你的电脑吗？

-- 不，好吧，我很酷，我只是不明白你为什么不使用线程？

-- 谢谢你的电脑。:) 我已经将工作分成几部分，并创建了并行处理这些部分的流程。所有 CPU 内核都将得到充分利用。我可以用线程而不是进程来做到这一点；但是 Node 有这种方式，我的老板 Parth Thakkar 想让我使用 Node。

-- 好的，如果您需要另一台计算机，请告诉我。:p

如果我创建 33 个进程，而不是 32 个，操作系统的调度程序将暂停一个线程，启动另一个，在一些周期后暂停它，再次启动另一个......这是不必要的开销。我不想要这个。事实上，在一个有 32 个核心的系统上，我什至不想创建正好 32 个进程，31 可以*更好*。因为在这个系统上运行的不仅仅是我的应用程序。为其他事情留出一点空间可能会很好，尤其是如果我们有 32 个房间。

我相信我们现在就充分利用处理器处理*CPU 密集型任务达成*了一致。

——嗯，哈桑，有点儿嘲讽你很抱歉。我相信我现在更了解你了。但是我仍然需要解释一些事情：运行数百个线程的所有嗡嗡声是什么？我到处都读到线程比分叉进程更快创建和愚蠢？你 fork 进程而不是线程，你认为它是 Node 所能得到的最高值。那么 Node 是不是不适合这种工作呢？

——别担心，我也很酷。每个人都说这些话，所以我想我已经习惯了听到它们。

- 所以？Node 不适合这个？

-- Node 非常适合这个，尽管线程也可以很好。至于线程/进程创建开销；在你经常重复的事情上，每一毫秒都很重要。但是，我只创建了 32 个进程，这将花费很少的时间。它只会发生一次。它不会有任何区别。

-- 那我什么时候想创建数千个线程呢？

-- 你永远不想创建数千个线程。然而，在一个正在做来自外部的工作的系统上，比如一个处理 HTTP 请求的 Web 服务器；如果您为每个请求使用一个线程，您将创建很多线程，其中很多。

-- 节点不同，但是？对？

- 对，就是这样。这就是 Node 真正闪耀的地方。就像线程比进程轻得多，函数调用也比线程轻得多。节点调用函数，而不是创建线程。在 Web 服务器的示例中，每个传入请求都会导致函数调用。

——嗯，有趣；但如果您不使用多个线程，则只能同时运行一个函数。当大量请求同时到达 Web 服务器时，这如何工作？

- 你是完全正确的关于函数如何运行，一次一个，从不并行两个。我的意思是在一个进程中，一次只运行一个范围的代码。操作系统调度程序不会来暂停这个功能并切换到另一个，除非它暂停进程以给另一个进程时间，而不是我们进程中的另一个线程。(2)

-- 那么一个进程如何一次处理2个请求呢？

-- 只要我们的系统有足够的资源（RAM、网络等），一个进程一次可以处理数万个请求。这些功能的运行方式是关键区别。

——嗯，我现在应该兴奋吗？

-- 也许 :) 节点在队列上运行一个循环。在这个队列中是我们的工作，即我们开始处理传入请求的调用。这里最重要的一点是我们设计函数运行的方式。我们不是开始处理请求并让调用者等到我们完成工作，而是在完成可接受的工作量后迅速结束我们的函数。当我们需要等待另一个组件完成一些工作并返回一个值时，我们不需要等待，而是简单地完成我们的函数，将剩余的工作添加到队列中。

——听起来太复杂了？

——不不，我可能听起来很复杂；但是系统本身非常简单，而且非常有意义。

现在我想停止引用这两个开发人员之间的对话，并在最后一个关于这些功能如何工作的快速示例之后完成我的回答。

通过这种方式，我们正在做 OS Scheduler 通常会做的事情。我们在某个时候暂停我们的工作，让其他函数调用（如多线程环境中的其他线程）运行，直到我们再次轮到我们。这比把工作留给 OS 调度器要好得多，后者试图为系统上的每个线程分配时间。我们知道我们在做什么比 OS Scheduler 做得更好，并且我们应该在我们应该停止的时候停止。

下面是一个简单的示例，我们打开一个文件并读取它以对数据进行一些处理。

同步方式：

```
Open File
Repeat This:    
    Read Some
    Do the work 
```

异步方式：

```
Open File and Do this when it is ready: // Our function returns
    Repeat this:
        Read Some and when it is ready: // Returns again
            Do some work 
```

如您所见，我们的函数要求系统打开一个文件，而不是等待它被打开。它通过在文件准备好后提供后续步骤来完成自身。当我们返回时，Node 在队列上运行其他函数调用。运行完所有函数后，事件循环进入下一轮......

综上所述，Node 与多线程开发有着完全不同的范式；但这并不意味着它缺乏东西。对于同步作业（我们可以决定处理的顺序和方式），它与多线程并行性一样有效。对于来自外部的工作，例如对服务器的请求，它简直是优越的。

* * *

(1) 除非您正在使用其他语言（如 C/C++）构建库，在这种情况下，您仍然不会创建用于划分作业的线程。对于这种工作，您有两个线程，其中一个将继续与 Node 通信，而另一个执行实际工作。

(2) 实际上，每个 Node 进程都有多个线程，原因与我在第一个脚注中提到的相同。然而，这不像 1000 个线程做类似的工作。这些额外的线程用于接受 IO 事件和处理进程间消息传递。

### 更新（作为对评论中一个好问题的回复）

@Mark，感谢您的建设性批评。在 Node 的范例中，除非队列中的所有其他调用被设计为一个接一个地运行，否则您永远不应该处理需要花费太长时间的函数。在计算量大的任务的情况下，如果我们完整地查看图片，我们会发现这不是“我们应该使用线程还是进程？”的问题。但是一个问题是“我们如何才能以平衡的方式将这些任务划分为子任务，以便我们可以在系统上使用多个 CPU 内核并行运行它们？” 假设我们将在具有 8 个内核的系统上处理 400 个视频文件。如果我们想一次处理一个文件，那么我们需要一个系统来处理同一个文件的不同部分，在这种情况下，多线程单进程系统可能更容易构建，效率更高。当需要状态共享/通信时，我们仍然可以通过运行多个进程并在它们之间传递消息来使用 Node。正如我之前所说，使用 Node 的多进程方法是*以及*此类任务中的多线程方法；但仅此而已。再一次，正如我之前所说，Node 闪耀的情况是当我们将这些任务作为来自多个源的系统输入时，因为与每个连接的线程或每个连接的进程相比，在 Node 中同时保持许多连接要轻得多系统。

至于`setTimeout(...,0)`通话；有时可能需要在耗时的任务期间休息一下，以允许队列中的呼叫有自己的处理份额。以不同的方式划分任务可以让你摆脱这些；但是，这并不是真正的 hack，它只是事件队列的工作方式。此外，`process.nextTick`为此目的使用要好得多，因为当您使用时`setTimeout`，需要计算和检查经过的时间，而`process.nextTick`这正是我们真正想要的：“嘿任务，回到队列末尾，您已经使用了您的份额！ "

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-03-16T22:38:21.503

**（2016 年更新：Web 工作者正在进入~~io.js - 一个 Node.js 分支~~Node.js v7 - 见下文。）**

**（2017 年更新：Web 工作者*不会*进入 Node.js v7 或 v8 - 见下文。）**

**（2018 年更新：Web 工作者*将*进入 Node.js Node v10.5.0 - 见下文。）**

# 一些澄清

阅读了上面的答案后，我想指出，Web Worker 中没有任何内容违反 JavaScript 的一般哲学，特别是关于并发性的 Node。（如果有，WHATWG 甚至都不会讨论它，更不用说在浏览器中实现了）。

您可以将 Web Worker 视为异步访问的轻量级微服务。没有状态是共享的。不存在锁定问题。没有阻塞。不需要同步。就像您在 Node 程序中使用 RESTful 服务时一样，您不必担心它现在是“多线程的”，因为 RESTful 服务与您自己的事件循环不在同一个线程中。它只是一个单独的服务，您可以异步访问，这才是最重要的。

网络工作者也是如此。它只是一个与运行在完全独立的上下文中的代码进行通信的 API，它是否在不同的线程、不同的进程、不同的 cgroup、区域、容器或不同的机器中完全不相关，因为它是一个严格异步、非阻塞的 API，所有数据按值传递。

事实上，从概念上讲，Web Worker 非常适合 Node，正如许多人所不知道的那样，它偶尔会大量使用线程，实际上“除了你的代码之外，所有东西都是并行运行的”——请参阅：

*   Mikito Takada[理解 node.js 事件循环](http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/)
*   Felix Geisendörfer[理解 node.js](http://debuggable.com/posts/understanding-node-js:4bd98440-45e4-4a9a-8ef7-0f7ecbdd56cb)
*   Trevor Norris[理解 Node.js 事件循环](https://nodesource.com/blog/understanding-the-nodejs-event-loop)
*   [Node.js 本身是阻塞的，只有它的 I/O 是非阻塞](http://greenash.net.au/thoughts/2012/11/nodejs-itself-is-blocking-only-its-io-is-non-blocking/)的 Jeremy Epstein

但是网络工作者甚至不需要使用线程来实现。您可以在云中使用进程、绿色线程甚至 RESTful 服务——只要使用 Web Worker API。具有按值调用语义的消息传递 API 的全部优点在于底层实现几乎无关紧要，因为不会暴露并发模型的细节。

单线程事件循环非常适合 I/O 绑定操作。它不适用于 CPU 密集型操作，尤其是长时间运行的操作。为此，我们需要生成更多进程或使用线程。以可移植的方式管理子进程和进程间通信可能非常困难，并且通常被视为简单任务的过度杀伤力，而使用线程意味着处理很难正确处理的锁和同步问题。

通常建议将长时间运行的 CPU 密集型操作划分为较小的任务（类似于[我对 Speed up setInterval 的回答](https://stackoverflow.com/questions/5298999/speed-up-setinterval/5299242#5299242)的“原始答案”部分中的示例），但这并不总是实用的，而且它不会使用更多超过一个 CPU 核心。

我写它是为了澄清那些基本上说网络工作者是为浏览器而不是服务器创建的评论（忘记了它可以说几乎所有 JavaScript 中的东西）。

# 节点模块

有几个模块应该将 Web Worker 添加到 Node：

*   [https://github.com/pgriess/node-webworker](https://github.com/pgriess/node-webworker)
*   [https://github.com/audreyt/node-webworker-threads](https://github.com/audreyt/node-webworker-threads)

我没有使用过它们中的任何一个，但我有两个可能相关的快速观察结果：截至 2015 年 3 月，node-webworker 最后一次更新是在 4 年前，node-webworker-threads 最后一次更新是在一个月前。此外，我在 node-webworker-threads 使用示例中看到，您可以使用函数而不是文件名作为 Worker 构造函数的参数，如果使用共享内存的线程实现，这似乎可能会导致微妙的问题（除非函数仅用于其 .toString() 方法，否则会在不同的环境中编译，在这种情况下可能没问题 - 我必须更深入地研究它，只是在这里分享我的观察）。

如果有其他相关项目在 Node 中实现了 web workers API，请发表评论。

# 更新 1

在撰写本文时我还不知道，但顺便说一下，在我写这个答案的前一天，[Web Workers 被添加到 io.js](https://twitter.com/pocztarski/status/581795283027247104)。

（[io.js](https://iojs.org/)是 Node.js 的一个分支 - 请参阅：[为什么 io.js 决定分支 Node.js](http://www.infoworld.com/article/2855057/application-development/why-iojs-decided-to-fork-nodejs.html)，InfoWorld 对 Mikeal Rogers 的采访，了解更多信息。）

它不仅证明了 web worker 中没有任何东西违反 JavaScript 的哲学，特别是 Node 在并发方面的哲学，而且它可能导致 web worker 成为像 io 一样的服务器端 JavaScript 中的一等公民。 Node.js（未来可能还有 Node.js），就像它已经[在所有现代浏览器](http://caniuse.com/webworkers)的客户端 JavaScript 中一样。

# 更新 2

在更新 1 和[我的推文](https://twitter.com/pocztarski/status/581795283027247104)中，我指的是[io.js 拉取请求 #1159](https://github.com/iojs/io.js/pull/1159) ，它现在重定向到 [节点 PR #1159](https://github.com/nodejs/node/pull/1159) ，该节点于 7 月 8 日关闭，并替换为[节点 PR #2133](https://github.com/nodejs/node/pull/2133) - 它仍然处于打开状态。在这些拉取请求下进行了一些讨论，可能会在 io.js/Node.js 中提供有关 Web 工作者状态的更多最新信息。

# 更新 3

**最新信息**- 感谢 NiCk Newman 在评论中发布它：有[**工人：Petka Antonov 从 2015 年 9 月 6 日开始的初始实施**](https://github.com/petkaantonov/io.js/commit/ea143f72fc6845668716bd7a5da22771011defe4)[提交，可以在此树](https://github.com/petkaantonov/io.js/tree/ea143f72fc6845668716bd7a5da22771011defe4)中下载和试用 。有关详细信息，请参阅[NiCk Newman](https://stackoverflow.com/questions/10773564/which-would-be-better-for-concurrent-tasks-on-node-js-fibers-web-workers-or-t/29088224?noredirect=1#comment52714511_29088224)的评论。

# 更新 4

截至**2016 年 5 月，关于仍然开放的**[PR #2133](https://github.com/nodejs/node/pull/2133)的最后评论- 工人：初始实施已经 3 个月大。5 月 30 日，Matheus Moreira 要求我在下面的评论中发布对此答案的更新，并在 PR 评论中[询问此功能的当前状态。](https://github.com/nodejs/node/pull/2133#issuecomment-222727885)

PR 讨论中的第一个答案是持怀疑态度的，但后来 Ben Noordhuis[写道](https://github.com/nodejs/node/pull/2133#issuecomment-222754118)：“将其合并为一种或另一种形式在我的 v7 待办事项清单上”。

所有其他评论似乎都支持这一点，截至 2016 年 7 月，似乎**Web Worker 应该在计划于****2016 年 10 月**发布的下一版本 Node 7.0 中可用（不一定以这个确切 PR 的形式）。

感谢 Matheus Moreira 在评论中指出这一点并在 GitHub 上恢复讨论。

# 更新 5

截至**2016 年 7 月**，npm 上几乎没有以前不可用的模块 - 有关相关模块的完整列表，请在[npm](https://www.npmjs.com/)中搜索worker、web workers 等。如果有什么特别适合您或不适合您，请发布评论。

# 更新 6

截至**2017 年 1 月**，Web Worker 不太可能合并到 Node.js 中。

拉取请求 #2133 [workers：](https://github.com/nodejs/node/pull/2133) Petka Antonov 从 2015 年 7 月 8 日开始的初始实施最终被 Ben Noordhuis 于 2016 年 12 月 11 日[**关闭**](https://github.com/nodejs/node/pull/2133#issuecomment-266285164)，他评论说“多线程支持增加了太多新的故障模式而没有足够的好处”和“我们还可以使用更传统的方式来实现这一点，例如共享内存和更有效的序列化。”

有关更多信息，请参阅GitHub 上对[PR 2133的评论。](https://github.com/nodejs/node/pull/2133)

再次感谢 Matheus Moreira 在评论中指出这一点。

# 更新 6

我很高兴地宣布，几天前，**2018 年 6 月**， Web Worker 出现在 Node v10.5.0 中，作为使用`--experimental-worker`标志激活的实验性功能。

有关详细信息，请参阅：

*   [Node v10.5.0 发布博文](https://nodejs.org/en/blog/release/v10.5.0/)
*   [拉取请求 #20876 - 工作人员：](https://github.com/nodejs/node/pull/20876) Anna Henningsen 的初始实施
*   [](https://twitter.com/pocztarski/status/1009580706895409152)**当我得知它进入 v10.5.0 时，[**我最初的快乐推文：**](https://twitter.com/pocztarski/status/1009580706895409152)**

 **> 最后！我可以对我 3 岁的 Stack Overflow 答案进行第 7 次更新，我认为线程化网络工作者并不违反 Node 哲学，只是这一次说我们终于明白了！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-27T07:10:13.203

我来自旧的思想流派，我们使用多线程来快速开发软件。在过去的 3 年里，我一直在使用 Node.js，并且是它的大力支持者。正如 hasanyasin 详细解释的节点如何工作以及异步功能的概念。但是，让我在这里添加一些东西。

回到过去，单核和较低的时钟速度我们尝试了各种方法来使软件快速并行工作。在 DOS 时代，我们习惯一次运行一个程序。比在 Windows 中我们开始一起运行多个应用程序（进程）。诸如抢占式和非抢占式（或合作式）之类的概念已经过测试。我们现在知道抢占式是在单核计算机上实现更好的多处理任务的答案。随之而来的是流程/任务和上下文切换的概念。比线程的概念进一步减轻了进程上下文切换的负担。线程被创造为产生新进程的轻量级替代品。

因此，无论喜欢与否，信号线程或不是多核或单核，您的进程都将被操作系统抢占和时间切片。

Nodejs 是一个单一的进程并提供异步机制。在这里，作业被分派到底层操作系统以执行任务，同时我们在事件循环中等待任务完成。一旦我们从操作系统获得绿色信号，我们就会执行我们需要做的任何事情。现在从某种意义上说，这是协作/非抢占式多任务，所以我们永远不应该长时间阻塞事件循环，否则我们会很快降低我们的应用程序。
因此，如果有一个任务本质上是阻塞的或非常耗时的，我们将不得不将其分支到操作系统和线程的抢占式世界。[libuv 文档](http://nikhilm.github.io/uvbook/threads.html)中有很好的例子。此外，如果您进一步阅读文档，您会发现[FileI/O 是在 node.js 的线程中处理的](http://nikhilm.github.io/uvbook/filesystem.html)。

因此，首先这一切都在我们的软件设计中。其次，无论他们告诉你什么，上下文切换总是会发生。线程存在并且仍然存在是有原因的，原因是它们在进程之间切换的速度更快。

在 node.js 的引擎盖下，它的所有 c++ 和线程。node 提供了 c++ 方法来扩展其功能，并通过在必须使用线程的情况下进一步加快速度，即阻塞任务，例如从源读取写入源、大数据分析等。

我知道 hasanyasin 的答案是公认的答案，但对我来说，无论你说什么或如何将它们隐藏在脚本后面，线程都会存在，其次，没有人只是为了速度而将事情分成线程，它主要是为了阻塞任务而完成的。线程位于 Node.js 的骨干中，因此在完全抨击多线程之前是正确的。此外，线程与进程不同，每个核心拥有节点进程的限制并不完全适用于线程数，线程就像进程的子任务。实际上线程不会出现在您的 Windows 任务管理器或 linux top 命令中。再一次，它们比过程更轻

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-27T11:21:39.877

我不确定 webworkers 在这种情况下是否相关，它们是客户端技术（在浏览器中运行），而 node.js 在服务器上运行。据我所知，纤维也是阻塞的，即它们是自愿的多任务处理，所以你可以使用它们，但应该通过自己管理上下文切换`yield`。线程可能实际上是您需要的，但我不知道它们在 node.js 中有多成熟。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-06-23T09:27:04.630

`worker_threads`已在`node@10.5.0`. 它仍然是一个初步的实现，需要更多的努力来使其在未来的版本中更有效。最近值得一试`node`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-27T17:03:59.873

在许多 Node 开发人员看来，Node 最好的部分之一实际上是它的单线程特性。线程给共享资源带来了一大堆困难，Node 通过非阻塞 IO 完全避免了这些困难。

这并不是说 Node*仅限*于单个线程。只是获取线程并发的方法和你要找的不一样。处理线程的标准方法是使用 Node 本身标配的[集群模块。](http://nodejs.org/api/cluster.html)这是一种比在代码中手动处理线程更简单的方法。

为了在代码中处理异步编程（例如，避免嵌套回调金字塔），[Fibers](https://github.com/laverdet/node-fibers)库中的 [Future] 组件是一个不错的选择。我还建议您查看基于 Fibers 的[Asyncblock 。](https://github.com/scriby/asyncblock)纤维很好，因为它们允许您通过复制堆栈然后在需要时在单线程上的堆栈之间跳转来隐藏回调。为您省去真实线程的麻烦，同时为您带来好处。缺点是使用 Fibers 时堆栈跟踪可能会有点奇怪，但它们并不算太糟糕。

如果您不需要担心异步的东西，而只是对在不阻塞的情况下进行大量处理感兴趣，那么您只需要每隔一段时间简单地调用一次 process.nextTick(callback) 即可。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-30T09:36:02.677

也许有关您正在执行的任务的更多信息会有所帮助。为什么您需要（正如您在对genericdave 回答的评论中提到的那样）需要创建成千上万个？在 Node 中做这类事情的常用方法是启动一个工作进程（使用 fork 或其他方法），该进程始终运行并且可以使用消息进行通信。换句话说，不要在每次需要执行正在执行的任何任务时都启动新的工作人员，而只需向已经运行的工作人员发送消息并在完成时得到响应。老实说，我看不出启动*数千个*实际线程会非常有效，你仍然受到 CPU 的限制。

[现在，说了这么多之后，我最近一直在用Hook.io](https://github.com/hookio/hook.io)做很多工作，这似乎非常适合这种将任务卸载到其他进程中，也许它可以完成你所需要的。**

# android - android中过度滚动的视觉指示

> ID：10773565
> 
> 赞同：10
> 
> 时间：2012-05-27T11:19:02.433
> 
> 标签：android, android-viewpager, android-compatibility, android-overscoll

我正在尝试添加一些视觉指示，即在 ViewPager 中没有更多页面处于所需的投掷方向。但是我正在努力寻找一个放置相关代码的地方。

我尝试使用以下代码扩展 ViewPager 类，但 Toast 未显示（`ev.getOrientation()`始终返回 0）。我也对历史点进行了同样的尝试，但`ev.getHistorySize()`也返回 0。

我错过了什么？

类示例：

```
public class CustomViewPager extends ViewPager {

    public CustomViewPager(Context context) {
        super(context);
    }

    public CustomViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    /**
     * @see android.support.v4.view.ViewPager#onTouchEvent(android.view.MotionEvent)
     */
    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        boolean result = super.onTouchEvent(ev);

        switch (ev.getAction() & MotionEventCompat.ACTION_MASK) {
            case MotionEvent.ACTION_MOVE:
                if (ev.getOrientation() > 0) {
                    Toast.makeText(getContext(), "left", 0).show();
                }
        }

        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-15T03:37:40.920

如果您查看 v4 支持库，您会看到 ViewPager 使用了一个名为[EdgeEffectCompat](http://developer.android.com/reference/android/support/v4/widget/EdgeEffectCompat.html)的类（当您到达 ICS+ 中的视图寻呼机的开头或结尾时，它会提供发光效果）如果您查看 compat 库中的实现，您将看到它有一个 if 语句来查看构建版本是否为 14+ (ICS)。如果是，那么它最终会使用 ICS 中引入的普通[EdgeEffect](http://developer.android.com/reference/android/widget/EdgeEffect.html)类结束（如果您跟踪足够长的时间）。否则它使用 BaseEdgeEffectImpl ，它基本上没有任何内容。

如果您愿意，您可以制作自己的自定义 ViewPager，它使用您自己的 EdgeEffect。您可以查看 android 源代码以了解它们是如何[在此处](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/EdgeEffect.java)实现 EdgeEffect 的，您几乎可以复制这些代码（只需确保将AOSP /res/drawable 目录中的[overscroll_edge](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-xhdpi/overscroll_edge.png)和[overscroll_glow](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-xhdpi/overscroll_glow.png)可绘制对象复制到您自己的项目中，因为它们是 android 内部的) 或继续创建您自己的版本。

祝你好运。

（顺便说一句，这就是他们如何在 ICS 的启动器菜单中创建看起来很酷的边缘倾斜效果......所以你几乎可以尽情发挥创意；）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-11T03:24:50.257

我试图获得与这个问题完全相同的效果。我为此苦苦挣扎，然后阅读了@wna​​fee 的答案（没有它我无法做到）。

但是后来我很难实现从答案中听起来很简单的东西。我在实现它时遇到了很多麻烦，以至于我可能没有正确理解答案，但是由于我没有在 Compatibility 库的同一个包中工作，所以存在太多无法访问的 API 问题。

在我尝试了一些方法之后（没有一个成功，而且它们非常复杂），我转向了一个稍微不同的方向，现在它就像一个魅力。我使用了一些反射，对于那些从未使用过的人，不要担心它真的是反射的基础。

我不确定它是否是最好的解决方案，但它对我有用，所以如果你想使用它，欢迎你。请阅读 Wnafee 示例，因为它解释了我所做的一些事情。

为了完成这项任务，您应该遵循我的三部分解决方案。（将带您 3-10 分钟）

**第一部分：**

[正如 Wnafee 所说，我刚刚通过从此处](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/EdgeEffect.java)复制粘贴源代码制作了自己的 EdgeEffect 类，

> （只需确保将 AOSP /res/drawable 目录中的 overscroll_edge 和 overscroll_glow 可绘制对象复制到您自己的项目中，因为它们是 android 内部的）

我只做了 2 个非常小的改动：

1.  我声明该类扩展了 EdgeEffectCompat （我称我的类`EdgeEffectForEarlyVersions`）。`public class EdgeEffectForEarlyVersions extends EdgeEffectCompat`. 进行此更改的原因是`mLeftEdge`and`mRightEdge`属于`EdgeEffectCompat`.
2.  在“我的”新类的构造函数的第一行，我添加了对父构造函数的调用`super(context);`。由于没有默认构造函数，`EdgeEffectCompat`您必须显式调用构造函数。

**第二部分**

除此之外，我还编写了另一个函数。该函数的目的是，在早期版本（ICS 之前）的情况下，我们希望使用`EdgeEffectForEarlyVersions`我们刚刚复制的那个。为了达到这个目的，我使用了反射。

这是功能：

```
private static void changeEdgeEffectCompactOnEarlyVersions(ViewPager viewPager, Context context)
{
    /* In case that the version is earlier than 14 there is only empty implementation for the edge effect, therefore we change it.
     * for more information look on the following links:
     * 1\. http://stackoverflow.com/questions/10773565/visual-indication-of-over-scroll-in-android
     * 2\. http://grepcode.com/file/repo1.maven.org/maven2/com.google.android/support-v4/r7/android/support/v4/view/ViewPager.java#ViewPager.0mLeftEdge
     * 3\. http://grepcode.com/file/repo1.maven.org/maven2/com.google.android/support-v4/r7/android/support/v4/widget/EdgeEffectCompat.java#EdgeEffectCompat
     */

    if (Build.VERSION.SDK_INT < 14)
    {
        try
        {
            Class<ViewPager> viewPagerClass = ViewPager.class;
            //Get the left edge field, since it is private we used getDeclaredField and not getDeclared 
            Field leftEdge = viewPagerClass.getDeclaredField("mLeftEdge");
            leftEdge.setAccessible(true);
            //Get the right edge field, since it is private we used getDeclaredField and not getDeclared
            Field rightEdge = viewPagerClass.getDeclaredField("mRightEdge");
            rightEdge.setAccessible(true);

            EdgeEffectForEarlyVersions leftEdgeEffect = new EdgeEffectForEarlyVersions(context);
            EdgeEffectForEarlyVersions rightEdgeEffect = new EdgeEffectForEarlyVersions(context);

            //Set the mLeftEdge memeber of viewPager not to be the default one, but to be "our" edgeEffect  
            leftEdge.set(viewPager, leftEdgeEffect);
            //Set the mRightEdge memeber of viewPager not to be the default one, but to be "our" edgeEffect
            rightEdge.set(viewPager, rightEdgeEffect);              
        }
        catch (Exception ex)
        {
            Log.e("refelection", ex.getMessage());
        }

    }
} 
```

**第三部分**

现在剩下要做的就是在拥有 ViewPager 实例之后调用该函数，仅此而已。

我希望它会帮助某人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T15:08:39.530

wnafee 很好地解释了解决方案，但对于我们当中的懒惰者，我在很久以前就做了一个实际的工作实现。

[https://github.com/inovex/ViewPager3D](https://github.com/inovex/ViewPager3D)

如果您只想过度滚动，请看这里：

[https://github.com/inovex/ViewPager3D/issues/1](https://github.com/inovex/ViewPager3D/issues/1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T16:59:22.613

只是为了补充@goBeepit dev 答案，当您创建自己的 edgeffect 类并从 EdgeEffectCompat 扩展时，某些方法需要是布尔值。您可以将这些方法更改为布尔类型，然后在任何情况下都返回 true，这样一切正常

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T20:46:58.583

您有很多选择，可以显示 Toast、显示 Dialog、使 TextView 或图像显示在您的 UI 上等。或者因为您知道 ViewPager 中 View 项目的数量，您可以在位置添加不同的 View 0 和/或 n + 1 与消息并使其反弹到实际包含您的数据的最后一个视图。

你可以实现：

```
viewPager.setOnPageChangeListener(new OnPageChangeListener() {
    public void onPageSelected(int position) {
        //TODO If position is the 0 or n item, add a view at 0 or at n+1 to indicate there is no more pages with data.
    }

    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        // TODO Show a Toast, View or do anything you want when position = your first/last  item;
    }

    public void onPageScrollStateChanged(int state) {
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-02T12:22:33.623

我已经实现了基于 Renard 的 ViewPager3D 的反弹效果：[https ://stackoverflow.com/a/17425468/973379](https://stackoverflow.com/a/17425468/973379)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-13T10:14:00.827

您可以在片段中重载 setUserVisibleHint(boolean) 函数。伪代码：

```
 void setUserVisibleHint(boolean isVisibleToUser) {
        // If this fragment is becoming visible
        if (isVisibleToUser == true) {
             // Check if it is the last fragment in the viewpager
             if (indexOfThis == getActivity().indexOfLast) {
                // Display right limit reached
                Toast(..., "No more Frags to right",...)
                }
             // Check if it is the first fragment in the viewpager
             else if (indexOfThis == getActivity().indexOfFirst) {
                // Display Left Limit reached
                Toast(..., "No more Frags to left",...)
             }
        }
    } 
```

我没有为此目的使用此功能，但出于其他原因使用它并且它确实可以正常触发。希望这可以帮助...

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-15T09:42:26.763

通常使用 ViewPager，使用`PagerAdapter`诸如`FragmentPagerAdapter`或`FragmentStatePagerAdapter`用内容填充 ViewPager（*您的内容将是视图*）。

现在，当您使用 a 时`PagerAdapter`，您有一个名为[http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#getCount%28%29](http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#getCount%28%29)`getCount()`的方法，它将为您提供内容。

既然您现在知道了大小，您就可以使用 if 控制语句轻松显示消息。

试试这个代码：http: [//developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

注意：我认为您不需要自定义 ViewPager。您还需要了解 ViewPager 的片段。查看 ApiDemos 中的示例。它是一个很好的来源。

# sql - 错误：FROM 中的子查询不能引用相同查询级别的其他关系

> ID：10773568
> 
> 赞同：5
> 
> 时间：2012-05-27T11:19:28.930
> 
> 标签：sql, postgresql, subquery, nearest-neighbor, correlated-subquery

我正在使用 PostgreSQL 9，我想在表`RP`中找到所有元组的最近邻居`RQ`，比较日期（`t`），但我收到此错误：

> 错误：FROM 中的子查询不能引用相同查询级别的其他关系

使用此查询：

```
SELECT *
FROM RQ, (SELECT * FROM RP ORDER BY ABS(RP.t - RQ.t) LIMIT 1) AS RA 
```

`RQ.t`在子查询中似乎是问题所在。我怎样才能避免这个错误？如何从子查询访问到`RQ`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T14:11:04.423

### 更新：

`LATERAL`joins 允许这样做，并在 Postgres 9.3 中引入。细节：

*   [LATERAL 和 PostgreSQL 中的子查询有什么区别？](https://stackoverflow.com/questions/28550679/what-is-the-difference-between-lateral-and-a-subquery-in-postgresql/28557803#28557803)

* * *

原因在错误消息中。列表的一个元素`FROM`不能引用`FROM`同一级别的列表的另一个元素。对于同一级别的对等方来说，它是不可见的。**您可以使用相关子查询**来解决此问题：

```
SELECT *, (SELECT t FROM rp ORDER BY abs(rp.t - rq.t) LIMIT 1) AS ra
FROM   rq 
```

显然，您不在乎`RP`从一组同样接近的行中选择哪一行，所以我也这样做。

但是，`SELECT`列表中的子查询表达式只能返回*一*列。如果您想要 table 中的多个列或所有列`RP`，请使用类似这样的子查询构造：
我假设两个表中都存在一个主键`id`。

```
SELECT id, t, (ra).*
FROM (
    SELECT *, (SELECT rp FROM rp ORDER BY abs(rp.t - rq.t) LIMIT 1) AS ra
    FROM   rq
    ) x; 
```

相关子查询因**性能不佳**而臭名昭著。这种查询——虽然显然是计算你想要的——会特别*糟糕*，因为表达式`rp.t - rq.t`不能使用索引。更大的表性能会急剧下降。

* * *

这个重写的查询应该能够利用**索引`RP.t`**，它应该对大表执行***得*更快**。

```
WITH x AS (
    SELECT * 
         ,(SELECT t
           FROM   rp
           WHERE  rp.t <  rq.t
           ORDER  BY rp.t DESC
           LIMIT  1) AS t_pre

         ,(SELECT t
           FROM   rp
           WHERE  rp.t >= rq.t
           ORDER  BY rp.t
           LIMIT  1) AS t_post
    FROM   rq
    )
SELECT id, t
      ,CASE WHEN (t_post - t) < (t - t_pre)
            THEN t_post
            ELSE COALESCE(t_pre, t_post) END AS ra
FROM   x; 
```

同样，如果你想要整行：

```
WITH x AS (
    SELECT * 
         ,(SELECT rp
           FROM   rp
           WHERE  rp.t <  rq.t
           ORDER  BY rp.t DESC
           LIMIT  1) AS t_pre

         ,(SELECT rp
           FROM   rp
           WHERE  rp.t >= rq.t
           ORDER  BY rp.t
           LIMIT  1) AS t_post
    FROM   rq
    ), y AS (
    SELECT id, t
          ,CASE WHEN ((t_post).t - t) < (t - (t_pre).t)
                THEN t_post
                ELSE COALESCE(t_pre, t_post) END AS ra
    FROM   x
    )
SELECT id AS rq_id, t AS rq_t, (ra).*
FROM   y 
ORDER  BY 2; 
```

注意**复合类型使用括号**！这里没有多余的括号。更多关于[这里](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#FIELD-SELECTION)和[这里](http://www.postgresql.org/docs/current/interactive/rowtypes.html#AEN7249)的手册。

使用 PostgreSQL 9.1 测试。[sqlfiddle 上的演示。](http://sqlfiddle.com/#!1/fdea1/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T01:22:21.790

没有索引的相关子查询无论如何都会进行交叉连接。因此，表达查询的另一种方式是：

```
select rp.*, min(abs(rp.t - rq.t))
from rp cross join
     rq
group by <rp.*> -- <== need to replace with all columns 
```

还有另一种方法，它有点复杂。这需要使用累积和。

这是想法。将所有 rp 和 rq 值组合在一起。现在，用最接近的 rp 值枚举它们。也就是说，为 rp 创建一个标志并获取累积和。因此，两个 rp 值之间的所有 rq 值都具有相同的 rp 索引。

与给定 rq 值最接近的值具有与 rq 值相同或更多的 rp 索引。计算 rq_index 使用累积和。

以下查询将其放在一起：

```
with rqi as (select t.*, sum(isRQ) over (order by t) as rq_index
             from (select rq.t, 0 as isRP, <NULL for each rp column>
                   from rq
                   union all
                   select rq.t, 1 as isRP, rp.* 
                   from rp
                  ) t
            ) t
select rp.*,
       (case when abs(rqprev.t - rp.t) < abs(rqnext.t - rp.t)
             then abs(rqprev.t - rp.t)
             else abs(rqnext.t - rp.t)
        end) as closest_value
from (select *
      from t
      where isRP = 0
     ) rp join
     (select *
      from t
      where isRP = 1
     ) rqprev
     on rp.rp_index = rqprev.rp_index join
     (select *
      from t
      where isRP = 1
     ) rqnext
     on rp.rp_index+1 = rpnext.rq_index 
```

这种方法的优点是没有交叉连接，也没有相关的子查询。

# java - TextView dp 不随屏幕大小缩放

> ID：10773577
> 
> 赞同：1
> 
> 时间：2012-05-27T11:20:29.147
> 
> 标签：java, android, android-layout

我正在尝试创建一个 textView，它将占据屏幕顶部中心部分的大部分。理想情况下，在 dp 中设置文本大小将允许 textView 保持正确的相对大小（占据屏幕宽度的大约 70%，可能是顶部的 20%）。它在布局编辑器和 HVGA 分辨率的模拟器中看起来是正确的。但是，当我以更高分辨率（在我的平板电脑上，或模拟 720p 显示器）测试它时，文本只占屏幕顶部中心部分的一小部分。（可能是 30% 的宽度而不是 70%，而且垂直方向看起来并没有变大）。

有没有办法缩放文本以正确增加分辨率的相对大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:16:59.423

设置`layout_width`为`fill_parent`，这将使它在所有设备的屏幕上传播。在左右和顶部添加一些似乎合适的填充。对于不同的屏幕，填充可能看起来不同，但这可能是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:20:30.540

设置 android:layout_width="match_parent" 编辑：检查一下 [Auto Scale TextView Text to Fit within Bounds](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)

# java - Elasticsearch QueryBuilder 匹配多个词

> ID：10773581
> 
> 赞同：9
> 
> 时间：2012-05-27T11:21:08.873
> 
> 标签：java, elasticsearch

给定 ES 索引中的 JSON 格式如下：

```
{
    "pin": {
        "id": 123,
        "location": {
            "lat": 456,
            "lon":-789
        }
    }
} 
```

以下获取与该`id`字段匹配的文档：

```
client.prepareSearch("index_name")
        .setTypes("pin")
        .setQuery(QueryBuilders.termQuery("id", 123))
        .execute()
        .actionGet(); 
```

相反，我正在尝试匹配多个字段，即。( `location.lat`, `location.lon`)。

```
QueryBuilders.termQuery(); // accepts only a single term 
```

尝试了一些替代方案，但似乎都不起作用，例如：

```
QueryBuilder queryBuilder = QueryBuilders.boolQuery()
        .must(QueryBuilders.termQuery("location.lat", 456))
        .must(QueryBuilders.termQuery("location.lon", -789));

client.prepareSearch("index_name")
        .setTypes("pin")
        .setQuery(queryBuilder)
        .execute()
        .actionGet(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T16:05:41.630

默认情况下，geo_point 字段不被索引为两个字段（location.lat 和 location.lon），它被索引为包含纬度和经度的单个字段。

您可以通过打开`lat_lon` [映射选项](http://www.elasticsearch.org/guide/reference/mapping/geo-point-type.html)来打开纬度和经度的索引。但是，在您的示例中，纬度和经度的值太大。因此，它们被标准化、转换为双精度并索引为 -84.0 和 -69.0 而不是 456 和 -789。因此，如果您将启用`lat_lon`并替换查询中的值，您应该能够获得结果。

请注意，纬度和经度的值在索引之前会转换为双精度值。因此，从长远来看，使用术语查询可能不太实用，因为您必须始终考虑舍入误差。[改用范围查询](http://www.elasticsearch.org/guide/reference/query-dsl/range-query.html)或弹性搜索[地理空间查询](http://www.elasticsearch.org/guide/reference/query-dsl/geo-distance-filter.html)可能更有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:30:42.107

查看 ElasticSearch 中的[bool 查询](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html)，您应该能够指定`must`,`should`或`should_not`为您的查询获取和/或的适当混合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-24T11:00:26.997

```
QueryBuilder qb = boolQuery()
    .must(termsQuery("content", Arrays.asList("test1", "test4"))); 
```

[https://www.elastic.co/guide/en/elasticsearch/guide/current/_finding_multiple_exact_values.html](https://www.elastic.co/guide/en/elasticsearch/guide/current/_finding_multiple_exact_values.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-10T21:57:49.407

您可以使用 QueryBuilders.multiMatchQuery 而不是 QueryBuilders.termQuery

# c# - 在 C# 中使用访问器传递

> ID：10773582
> 
> 赞同：1
> 
> 时间：2012-05-27T11:21:09.207
> 
> 标签：c#

我在表单之间传递变量时遇到了一些麻烦。我创建了一个按钮数组，并希望将按钮文本传递给下一个表单。但这只是返回一个 Null 值

第一种形式

```
private string staffmem;
    public string Staffmem
    {
        get
        {
            return staffmem;
        }
    }

    public void ClickButton(Object sender, EventArgs e)
    {          
        Button btn = (Button)sender;
        staffmem = btn.Text;
        MessageBox.Show("Welcome " + staffmem);

        MainScreen ms = new MainScreen();
        ms.Show();
    } 
```

然后在第二种形式

```
 private void MainScreen_Load(object sender, EventArgs e)
    {  
        Form1 f1 = new Form1();
        staffmem = f1.Staffmem; 
```

任何帮助将非常感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:32:13.050

您正在通信的两端创建新表单：单击按钮时以及要检索文本时 - 这会导致访问`Staffmem`新创建的对象上的字段，该字段尚未设置为任何内容，因此返回`null`值。

为了能够检索文本，您需要与创建时具有*相同* `Form1`的对象`MainScreen`：

```
MainScreen ms = new MainScreen(form1); 
```

`form1`实际`Form1`对象在哪里，并将其存储`MainScreen`为成员变量

```
// in MainScreen class
private Form1 f1; 
```

然后`Staffmem`在存储的成员变量上访问该对象：

```
// in MainScreen_Load()
staffmem = f1.Staffmem; 
```

*注意*：根据您的需要，您可能不想在`MainScreen`每次单击按钮时都创建一个新的。在这种情况下（如果您已经创建`MainScreen`了要与之通信的对象），则还需要在创建对象时将对象传递给`MainScreen`对象`Form1`（`Form1`遵循上述技术）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:32:44.623

您正在创建一个全新的`Form1`- 其中，您希望使用现有实例。

您需要做的是`Staffmem`在您的`MainScreen`对象上定义，并在创建后设置它。

```
MainScreen ms = new MainScreen();
ms.Staffmem = btn.Text; 
```

然后，在您的 MainScreen_Load: 中设置值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T11:33:11.623

您正在使用 2 个不同的对象，首先您创建一个 Form1 对象并单击按钮将在该单个对象上设置属性值，但是在您的主屏幕中您创建一个新的 Form1 实例。

您可以将表单对象作为对 MainScreen 本身的引用传递。

```
MainScreen ms = new MainScreen(this);
ms.Show(); 
```

然后在 MainScreen 类中更新构造函数。

```
public MainScreen(Form1 form)
{
    this.form1 = form;
} 
```

并将参考保存在一个字段中，就像这样。

```
private Form1 form1; 
```

在此之后，您可以再次执行此操作，

```
private void MainScreen_Load(object sender, EventArgs e)
{  
    staffmem = form1.Staffmem;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T11:31:16.203

你没有传递任何东西，你正在创建一个新的表单

```
Form1 f1 = new Form1(); 
staffmem = f1.Staffmem; 
```

如果要共享数据 - 一个非常糟糕的方法是使字符串静态

```
private static string staffmem; 
```

# ide - PHPStorm：不打算通过树枝结束标签

> ID：10773583
> 
> 赞同：0
> 
> 时间：2012-05-27T11:21:13.320
> 
> 标签：ide, twig, phpstorm

PHPStorm4 对 twig 不太了解。它不检测结束标签：

```
{% block header %}
    {% endblock header %} 
```

但我想要：

```
{% block header %}
{% endblock header %} 
```

我已经尝试将通用代码设置中的意图设置为 0 但这不起作用...

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T13:25:43.030

目前对 Twig 的支持非常有限，我们希望在 PhpStorm 5.0 中对其进行改进。我[在问题跟踪器中为这个问题创建了一个新错误，请](http://youtrack.jetbrains.com/issue/WI-11473)随意加注星标/投票。

# ios - 如何将多个 UIImageViews 添加到分页 UIScrollView？

> ID：10773584
> 
> 赞同：4
> 
> 时间：2012-05-27T11:21:14.280
> 
> 标签：ios, xcode, uiscrollview, uiimageview, uiimage

我有一个启用了分页的 UIScrollView，页面上有多个子视图：UIButton、UIwebview 和 UIImageView。每个页面上的 webview 和图像都会发生变化。这工作正常。我使用 Apples[滚动图像分页示例](http://developer.apple.com/library/ios/#samplecode/Scrolling/Introduction/Intro.html)来帮助我入门。

但是当我添加第二个 UIImageView 时，我所在的图像位置已经获得了新值，并且新图像不会显示。

这是第一张图片的 viewdidload 内的代码（工作正常）：

```
// load all the images from our bundle and add them to the scroll view
for (i = 1; i <= kNumImages; i++)
{
    NSString *imageName = [NSString stringWithFormat:@"image%d.jpg", i];
    UIImage *image2 = [UIImage imageNamed:imageName];
    UIImageView *imageView2 = [[UIImageView alloc] initWithImage:image2];

    // setup each frame to a default height and width, it will be properly placed when we call "updateScrollList"
    CGRect rect = imageView2.frame;
    rect.size.height = imageviewScrollObjHeight;
    rect.size.width = imageviewScrollObjWidth;

    // Get the Layer of any view
    CALayer * imageLayer = [imageView2 layer];
    [imageLayer setMasksToBounds:YES];
    [imageLayer setCornerRadius:7.0];

    // You can even add a border
    [imageLayer setBorderWidth:1.0];
    [imageLayer setBorderColor:[[UIColor lightGrayColor] CGColor]];

    imageView2.frame = rect;
    imageView2.tag = i; // tag our images for later use when we place them in serial fashion  

    [scrollView1 addSubview:imageView2];

}

[self layoutScrollImages];  // now place the photos in serial layout within the scrollview 
```

这是在每个页面上布局第一个图像的代码，每页不同的图像（外部 viewdidload）（工作正常）：

```
// layout images for imageview1
- (void)layoutScrollImages
{
UIImageView *imageView = nil;
NSArray *subviews = [scrollView1 subviews];

// reposition all image subviews in a horizontal serial fashion
CGFloat curXLoc = 10;
for (imageView in subviews)
{
    if ([imageView isKindOfClass:[UIImageView class]] && imageView.tag > 0)
    {
        CGRect frame = imageView.frame;
        frame.origin = CGPointMake(curXLoc, 50);
        imageView.frame = frame;

        curXLoc += (kScrollObjWidth);
    }
}

// set the content size so it can be scrollable
[scrollView1 setContentSize:CGSizeMake((kNumImages * kScrollObjWidth), [scrollView1 bounds].size.height)];
} 
```

这是第二张图片的代码（在 viewdidload 内）：（当我删除 [self layoutNavScrollImages] 时；图片仅在第一页上加载）

```
for (i = 1; i <= kNumImages; i++)
{

    UIImage *navBarImage = [UIImage imageNamed:@"navigationbar.png"];
    UIImageView *imageViewNavBar = [[UIImageView alloc] initWithImage:navBarImage];

    // setup each frame to a default height and width, it will be properly placed when we call "updateScrollList"
    CGRect navBarRect = imageViewNavBar.frame;
    navBarRect.size.height = 44;
    navBarRect.size.width = 320;
    navBarRect.origin.x = 0;
    navBarRect.origin.y = 0;

    /* Get the Layer of any view
     CALayer * imageLayer = [imageView3 layer];
     [imageLayer setMasksToBounds:YES];
     [imageLayer setCornerRadius:7.0];

     // You can even add a border
     [imageLayer setBorderWidth:1.0];
     [imageLayer setBorderColor:[[UIColor lightGrayColor] CGColor]];
     */
    imageViewNavBar.frame = navBarRect;
    imageViewNavBar.tag = i;    // tag our images for later use when we place them in serial fashion  

    [scrollView1 addSubview:imageViewNavBar];

}

[self layoutNavScrollImages]; 
```

以及viewdidload之外的代码：（这会覆盖第一张图片的位置）

```
- (void)layoutNavScrollImages
{
UIImageView *view = nil;
NSArray *subviews = [scrollView1 subviews];

// reposition all image subviews in a horizontal serial fashion
CGFloat curXLoc = 0;
for (view in subviews)
{
    if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
    {
        CGRect frame = view.frame;
        frame.origin = CGPointMake(curXLoc, 0);
        view.frame = frame;

        curXLoc += (kScrollObjWidth);
    }
}

// set the content size so it can be scrollable
[scrollView1 setContentSize:CGSizeMake((kNumImages * kScrollObjWidth), [scrollView1 bounds].size.height)];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T12:34:47.373

这样做的方法是制作一个（大）UIView 并将每个 UIImageView 添加为该 UIView 的子视图。然后将 UIView 作为子视图添加到 UIScrollView。

```
[totalView addSubview:imageView1];
[totalView addSubview:imageView2;
[totalView addSubview:buttonView1];
[totalView addSubview:buttonView2];
[totalView addSubview:webView];

[scrollView addSubview:totalView]; 
```

请务必设置正确的内容大小，否则滚动视图将不起作用：

```
[scrollView setContentSize:CGSizeMake((320*kNumImages), 411)]; 
```

设置视图并标记 UIView（在 viewdidload 内）：

```
NSUInteger i;
for (i = 1; i <= kNumImages; i++)
   {
      //... code to setup views
      totalView.tag = i;
   }
[self layoutViews]; // now place the views in serial layout within the scrollview 
```

然后在每个页面上布局视图：

```
- (void)layoutViews
{
UIView *view = nil;
NSArray *subviews = [scrollView subviews];

// reposition all image subviews in a horizontal serial fashion
CGFloat curXLoc = 0;
for (view in subviews)
{
    if ([view isKindOfClass:[UIView class]] && view.tag > 0)
    {
        CGRect frame = view.frame;
        frame.origin = CGPointMake(curXLoc, 0);
        view.frame = frame;

        curXLoc += (kScrollObjWidth);
    }
}
} 
```

我希望这尽可能清楚。如果有人认为这不是正确的做法，请发表评论。

# tridion - 我们如何覆盖 Tridion 2009 中现有的部署程序自定义？

> ID：10773585
> 
> 赞同：0
> 
> 时间：2012-05-27T11:21:24.757
> 
> 标签：tridion, tridion-content-delivery, tridion2009, tridion-deploy-extension

在自定义 Deployer 的过程中，我注意到我们已经自定义**了 PageDeploy**和**PageUndeploy**模块，请参阅以下从 cd_deployer_conf.xml 获取的配置部分。

页面部署：

```
<Module Type="PageDeploy"
        Class="com.tridion.extensions.deployer.ConditionalPageDeploy">
   <Transformer Class="com.tridion.deployer.TCDLTransformer" />
</Module> 
```

页面取消部署：

```
<Module Type="PageUndeploy"
        Class="com.tridion.extensions.deployer.ConditionalPageUndeploy"/> 
```

我只是让他们的 .jar 文件没有代码，因为这是 SDL Tridion 在我们公司实施 Tridion 时完成的，现在我想在发布或取消发布页面时实施一个新流程。

我需要进行哪些更改才能在不触及现有定制的情况下实施新的定制。Tridion 是否允许或支持它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:30:25.940

你可能想问问你的部门。通常，Tridion 专业服务会将代码留给他们在客户站点上进行的任何定制，特别是这样您以后可以对其进行更改。

或者，您可以为您的功能创建一个额外的部署/取消部署模块。每种类型可以有多个模块，因此您只需将自己的模块添加到列表中即可。

# asp.net - ASP.NET 登录控件无法恢复“记住我”复选框的状态

> ID：10773590
> 
> 赞同：2
> 
> 时间：2012-05-27T11:22:35.257
> 
> 标签：asp.net, login

我有一个支持“记住我”选项的登录控件。
标记

```
<asp:Login ID="UsersLogin" runat="server" OnAuthenticate="UsersLogin_Authenticate" DisplayRememberMe="true"
            CssClass="usersLogin" FailureText="The username or password you supplied is incorrect"
            Width="100%">
</asp:Login> 
```

代码隐藏：

```
protected void UsersLogin_Authenticate(object sender, AuthenticateEventArgs e)
{
    Page.Validate(); // Executes the validation controls against the input controls.
    if (!Page.IsValid) return; // Return from the function, incase validation fails.
    e.Authenticated = Membership.ValidateUser(UsersLogin.UserName, UsersLogin.Password);
    FormsAuthentication.RedirectFromLoginPage(UsersLogin.UserName, UsersLogin.RememberMeSet);
} 
```

执行的步骤和我的观察（可能不正确）：
1）。用户输入凭据并选中“记住我”复选框。ASP.NET 将在客户端创建一个持久 cookie。
2）。然后，ASP.NET 将用户导航到由“returnUrl”查询字符串参数指示的某个受保护资源（如果可用）。否则，它会将用户重定向到 web.config 中标记的“DefaultUrl”属性中指定的页面。
3）。用户关闭浏览器。
4）。用户重新打开浏览器，并键入同一受保护资源的 url。由于持久性 cookie，ASP.NET 将授予对该受保护资源的访问权限。
5）。现在用户导航到登录页面。ASP.NET 应填充用户名和密码文本框，并检查“

第5步是我卡住的地方。我不确定 ASP.NET 是否有责任确保第 5 步。
我知道这个问题已经被问过很多次，但我还没有找到合理的解决方案，因为很多只是变通方法。一些解决方案建议创建您自己的 FormsAuthenticationTicket 并添加 UserData 来存储记住我的状态。Rest 建议在 web.config 中明确写下标签，并明确指定每个参数，包括超时、路径等。

还要纠正我的这句话：“如果我们从应用程序中注销，ASP.NET 将删除持久性 cookie，无论是通过单击“LoginStatus”控件还是通过使用普通链接按钮并 `"FormsAuthentication.Log(); FormsAuthentication.RedirectToLoginPage()"`
在单击普通链接按钮时进行写入”。

请建议，需要做什么才能使登录控制检查记住我检查。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:12:50.370

我想我已经找到了解决方案。这就是我为选中复选框所做的操作。

```
if (User.Identity.IsAuthenticated)
    {
        FormsIdentity identity = User.Identity as FormsIdentity;
        FormsAuthenticationTicket ticket = identity.Ticket;
        if (ticket.IsPersistent)
        {
            UsersLogin.RememberMeSet = true;                    
        }            
    } 
```

如果用户选中了记住我复选框，则该票证将是永久票证。

无论如何谢谢。

# javascript - 如何使用javascript从文本中仅提取第一个url

> ID：10773591
> 
> 赞同：3
> 
> 时间：2012-05-27T11:22:43.553
> 
> 标签：javascript, jquery

我有这个正则表达式

```
function isValidURL(text) {

        var RegExp = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;

        ......

    } 
```

文字是：请使用[http://google.com或者如果没有发现任何问题，请在](http://google.com)[http://stackoverflow.com](http://stackoverflow.com)上提问

我只需要从下面的文本中提取第一个 url。(http://google.com)

作为网址返回

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:29:32.883

你的意思是这样的：

```
var text = "Please visit http://stackoverflow.com and ask your question, or use http://google.com";

var match = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/​​​​​​​​​​​​.exec(text)​​​​​​​;

​console.log(match[0]);​ 
```

**演示：http:** [//jsfiddle.net/yh5Zv/](http://jsfiddle.net/yh5Zv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:30:22.193

我认为您可以使用它（前提是您的文本中除了 url 本身之外没有 ://）：-

```
var text = "Please visit http://stackoverflow.com and ask your question, or use http://google.com";

var text_split = text.split('://'); 
var text_req = text_split[1].(" "); // splitting with blank space 

var finalURL = "http://" + test_req[0]; 
```

# dojo - dojo中具有丰富选项的列表框

> ID：10773592
> 
> 赞同：0
> 
> 时间：2012-05-27T11:22:44.757
> 
> 标签：dojo, listbox

我想知道是否有任何方法可以在 dojo 中获取列表框，其中选项由图像和一段文本组成。该列表应该是这样的：

列表框： - image/icon1 + text1 - image/icon2 + text2 ... - image/iconN + textN

我已经能够使用下拉列表来做到这一点，但这不是我需要的。我必须是列表框。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:55:40.023

最后，我必须这样做：

```
<html>
<head></head>
<body>
    <select id="list" size="3" style="width:100px;"></select>
    <input id="clear" type="button" value="Clear">
    <input id="populate" type="button" value="Populate">
    <script type="text/javascript" src="dojo.js"></script>
    <script>
        dojo.addOnLoad( function(){
            dojo.connect( dojo.byId("clear"), "onclick", this, clear );
            dojo.connect( dojo.byId("populate"), "onclick", this, populate);
        });
        dojo.addOnLoad( populate );

        function populate(){
            for(var i = 0; i < 10; i++ ){
                var html = i%2 ? '<img src="image1.png"> Item ' + i :
                                 '<img src="image2.png"> Item ' + i;
                dojo.create("option", {innerHTML: html, value: i }, 'list' );
            }
            dojo.byId('populate').disabled = true;
            dojo.byId('clear').disabled = false;
        }

        function clear(){
            var list = dojo.byId("list");
            var ops = list.options;
            while( ops.length ){
                ops.remove(0);              
            }
            dojo.byId('populate').disabled = false;
            dojo.byId('clear').disabled = true;
        }
    </script>
</body>
</html> 
```

我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:23:44.840

您可以使用道场 CheckedMultiSelect。

```
<select name="someName" id="someId" multiple="true" data-dojotype="dojox.form.CheckedMultiSelect">
   <option id="someOptionId"><img src="images/aim-icon.gif" border=0>Blah Blah</option>
</select> 
```

# eclipse - 如何在 eclipse shell 上加载动态数据？

> ID：10773600
> 
> 赞同：0
> 
> 时间：2012-05-27T11:23:39.783
> 
> 标签：eclipse, eclipse-plugin

我想在单击用户名时加载用户的详细信息。所以我创建了一个网格布局，其中两列左侧是独立的，右侧数据将根据单击它们的名称来加载。

**JAVA代码**

```
Display display = PlatformUI.createDisplay();
Shell shell = new Shell(display);
shell.setSize(400, 400);
GridLayout gridLayout = new GridLayout();
gridLayout.numColumns = 2;
shell.setLayout(gridLayout);

shell.setBackground(new Color(display, 255, 255, 255));
final Table table = new Table(shell, SWT.VIRTUAL);
table.setLayout(new GridLayout());
table.setSize(400, 400);
final TableColumn column = new TableColumn(table, SWT.LEFT);
column.setWidth(150);
column.setText("Runnable Services");
table.setItemCount(5);
final String[] services = new String[] { "Franklin", "Christian",
    "Richard Levi",
    "Dale Steyn", "Chris Gayle" };
table.addListener(SWT.SetData, new Listener() {
    public void handleEvent(Event event) {
    TableItem item = (TableItem) event.item;
    int index = table.indexOf(item);
    item.setText(services[index]);
    System.out.println(item.getText());
    }
});

table.addSelectionListener(new OnClickListener());
alignCenter(shell, display);
shell.open(); 
```

我在 table 上添加了一个选择侦听器。单击播放器时，我将他们的详细信息添加到 SelectionListener 的小部件 Selected 方法中。

**JAVA代码**

```
Composite parent = new Composite(table.getParent(), SWT.NONE);
parent.setLayout(new GridLayout(2, false));
Label label = new Label(parent, SWT.NULL);
label.setText("Name :");
System.out.println(table.getSelection()[0].getText());
Text text = new Text(parent, SWT.BORDER);
text.setText(table.getSelection()[0].getText());
text.setLayoutData(new GridData(GridData.FILL_HORIZONTAL
            | GridData.GRAB_HORIZONTAL));
ViewActionDelegate.resize(200, true, 20, table.getShell()); 
```

如果我在每次点击操作时都喜欢这个，那么数据将被附加到现有的 shell 中。我怎样才能清除右手边的细节？. 我在下面贴了一张图片。 ![在此处输入图像描述](../Images/044f68913be9db8d85894d2be22bc0d5.png)

我怎样才能做到这一点 ？.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:03:38.003

终于我找到了答案。

问题：我将新元素附加到已创建的组合中。

解决方案：在绘制新元素之前从现有组合中清除元素。

Java 代码：

```
if ((composite != null) && (!composite.isDisposed())) {
             Control[] children = composite2.getChildren();
             for(Control ch : children){
                 ch.dispose();
             }
            } 
```

# c# - 如果没有数据，则从网格视图中删除列

> ID：10773602
> 
> 赞同：-1
> 
> 时间：2012-05-27T11:23:54.040
> 
> 标签：c#, asp.net, entity-framework, gridview

如果这些列不包含任何值，如何从网格视图中删除或消失列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:35:42.357

您可以为要测试的列指定全局布尔值，例如：

```
bool columnHasValues = false; 
```

然后，`GridView.RowItemDataBound`如果您要测试该列的值：

```
if (!columnHasValues)
    columnHasValues = !(string.IsNullOrEmpty(e.Row.Cells(columnIndex).Text); 
```

对于 .Net 4.0 更改`IsNullorEmpty`为`IsNullOrWhiteSpace`. 然后在这种情况`Page_PreRender`下，您可以将该列的可见性设置为与 的值匹配`columnHasValues`。

# android - 安卓 - HTML5 - SQLite

> ID：10773605
> 
> 赞同：-1
> 
> 时间：2012-05-27T11:24:46.160
> 
> 标签：android, html, sqlite

我想使用纯 html、javascript 和数据库（也许是 sqlite？）构建一个在 android 上运行的应用程序。我之前没有做过android开发。我的问题是，是否可以仅使用 html、javascript 和数据库为 android 开发数据库应用程序？有没有比 sqlite 更好的数据库支持？

谢谢伊姆兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:57:08.790

有两种可能的方法：

1.  使用 webview 嵌入您的 html5 应用程序并添加带有数据库访问层的 Javascript 接口：http: [//developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

2.  使用 Phonegap 框架从 Javascript 访问 SQLite 数据库：http: [//docs.phonegap.com/en/1.7.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/1.7.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:50:07.867

您想要的无法直接在 Android 上实现：HTML 和 JavaScript 没有访问 SQLite 数据库的接口。

唯一可以做到这一点的方法是使用像 PhoneGap 这样的应用程序框架，它可以从您的 HTML 和 JavaScript 代码生成一个应用程序。

# php - 支付成功后paypal，如何将用户重定向到新页面

> ID：10773607
> 
> 赞同：0
> 
> 时间：2012-05-27T11:24:54.207
> 
> 标签：php, codeigniter, paypal, payment

嗨，我正在使用 codeigniter 实现贝宝。我正在使用 paypal 集成向导生成代码： [https](https://www.paypal-labs.com/integrationwizard/) ://www.paypal-labs.com/integrationwizard/ 。

在返回 url 中，我调用了一个名为 confirmorder() 的函数来处理成功的支付。默认情况下，付款将在灯箱/新页面中处理。我希望在用户成功付款并且灯箱关闭后，partent 页面（灯箱下的那个，也是用户按“paypal 支付”的地方）将定向到主页。但无论我如何更改代码，重定向总是发生在支付处理页面中，而不是父页面。

有人对此有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T07:02:37.240

我的理解是，您是让用户通过对话框付款对吗？在这种情况下，您应该使用 javascript 通过使用 **opener.location.href = '/redirecturl';重定向父窗口来重定向页面** 重定向后，您还应该使用 close() 关闭对话框；javascript的方法

# javascript - 选择要引用的文本后显示按钮

> ID：10773609
> 
> 赞同：4
> 
> 时间：2012-05-27T11:24:59.113
> 
> 标签：javascript, jquery

当我们使用 window.getSelection() 代码时，如何在选择一些文本后显示一个小图像？

我发现的最相似的是这个[如何在用户文本选择旁边放置一个元素？](https://stackoverflow.com/questions/1589721/how-can-i-position-an-element-next-to-user-text-selection)但似乎无法让它正常工作：-s 对此有点陌生也无济于事。

只需要一些简单的代码就可以了，图像显示在哪里并不重要，只要它靠近选定的文本

-编辑-

正如我在评论中所说，这个想法是显示一个按钮（首先想到图像，但一个按钮更好）漂浮在所选文本附近（在选择之后），并带有引用所选内容的链接，如果我们清除了什么被选中的按钮不再显示。

这是否可以通过在完成文本选择时拉鼠标坐标并将 x,y 坐标添加到要显示的按钮的样式来实现？

-编辑-

让它像我想要的那样工作，记住这个坐标。找到了这个[http://motyar.blogspot.pt/2010/02/get-user-selected-text-with-jquery-and.html](http://motyar.blogspot.pt/2010/02/get-user-selected-text-with-jquery-and.html)并且我想出了这个：

```
function getSelected() {
if (window.getSelection) {
    return window.getSelection();
}
else if (document.getSelection) {
    return document.getSelection();
}
else {
    var selection = document.selection && document.selection.createRange();
    if (selection.text) {
        return selection.text;
    }
    return false;
}
return false;
}

$(document).ready(function() {
var blank = '',
    selectionImage;
$('#mensagem').mouseup(function(e) {
    var selection = getSelected();

    if (!selectionImage) {
        selectionImage = $('<button>').attr({
            type: 'button',
            title: 'Citar Texto seleccionado',
            id: 'quote-place'

        }).html("Citar").css({
            "color": "red"
        }).hide();

        $(document.body).append(selectionImage);

    }
    $("#quote-place").click(function quote() {
        var txt = '';
        if (window.getSelection) {
            txt = window.getSelection();
        }
        else if (document.getSelection) {
            txt = document.getSelection();
        }
        else if (document.selection) {
            txt = document.selection.createRange().text;
        }
        else {
            return;
        }
        document.aform.selectedtext.value = txt;

    }).mousedown(function() {

        if (selectionImage) {
            selectionImage.fadeOut();
        }
    });

    selectionImage.css({
        top: e.pageY - 30,
        //offsets
        left: e.pageX - 13 //offsets
    }).fadeIn();
});
});​ 
```

[http://jsfiddle.net/ordhor/2Gc8c/](http://jsfiddle.net/ordhor/2Gc8c/)

现在的问题在于，当我们点击按钮时`<div>`不选择按钮一直显示的文本。它应该只在选择文本时出现，我找不到如何修复它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:34:59.793

假设这`image`是您要插入的图像元素。这个想法是在所选文本之后放置一个占位符`<span>`元素，因为我们无法计算文本节点的位置。所以，我们从这个 CSS 开始：

```
.place-holder {position: relative;}
.quote-image {
    position: absolute;
    top: 0;
    left: 0;
} 
```

占位符类用于我们的`<span>`元素，以及`position`我们要放入的图像的属性，它是绝对定位的，以保持零宽度`<span>`。

现在我们要检查是否进行了选择。不幸的是，在进行选择时没有引发标准事件。仅当在文本字段中进行选择时才会触发该`onselect`事件，即使取消选择也不会触发。

但是由于选择通常是使用鼠标和键盘事件进行的，所以我们可以监听它们并检查是否进行了选择。

```
var prevRng;
function checkSelection() {
    var s = getSelection(), r = s.rangeCount && s.getRangeAt(0);
    if (prevRng) {
        if (!r || r.endContainer !== prevRng.endContainer
                || r.endOffset !== prevRng.endOffset) {
            // The selection has changed or been cleared
            selectionClear();
        }
    }
    if (r) setPlaceHolder(r);
}
document.addEventListener("mouseup", checkSelection);
// mousedown usually clears the selection
document.addEventListener("mousedown", checkSelection);
// You can use the keyboard to extend the selection, or select all (Ctrl+A)
document.addEventListener("keyup", checkSelection); 
```

`prevRng`是函数范围内的变量，用于存储所做的选择。现在我们可以制作我们的工作代码：

```
function setPlaceHolder(range) {
    if (range.startContainer === range.endContainer
            && range.startOffset === range.endOffset) {
        // The selection is clear
        prevRng = null;
        return;
    }
    prevRng = range;
    var endc = range.endContainer, span = document.createElement("span");
    span.className = "place-holder";
    span.appendChild(image);
    if (endc.nodeType === Node.TEXT_NODE) { // Node.TEXT_NODE === 3
        var p1 = endc.nodeValue.substring(0, range.endOffset),
            p2 = endc.nodeValue.substring(range.endOffset);
        endc.nodeValue = p1;
        if (p2)
            endc.parentNode.insertBefore(document.createTextNode(p2),
                    endc.nextSibling);
    }
    endc.parentNode.insertBefore(image, endc.nextSibling);
}

function selectionClear() {
    if (!prevRng) return;
    var endc = prevRng.endContainer;
    if (endc.nextSibling.className === "place-holder") {
        endc.parentNode.removeChild(endc.nextSibling);
        if (endc.nodeType === Node.TEXT_NODE
                && endc.nextSibling.nodeType === Node.TEXT_NODE) {
            // Joining previously divided text nodes
            endc.nodeValue += endc.nextSibling.nodeValue;
            endc.parentNode.removeChild(endc.nextSibling);
        }
    }
} 
```

**编辑**：看来我误解了你的问题。我以为你想*在选择之后*插入图像......所以，你想知道实际何时进行选择？

**编辑 2**：或多或少地更改了所有内容以匹配请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-20T06:27:00.577

例如：

```
$("div.rte").on("mouseup",function(){ // event binding on the div 
if(window.getSelection().toString().length>0) //check length if >0 then only proceed
{
 // do processing 
} 
```

根据我对问题的理解，这应该可以解决您的问题

我一直在尝试实现类似的功能，我的问题是文档也可以编辑。保存注解的方式是一个挑战，目前我想把注解的开始和结束索引保存在数据库中，当文档内容发生变化时，使用变异观察者，我会计算注解的新字符数，然后再次保存在数据库中

请让我知道是否还有其他方法可以从数据库中存储和检索

# silverlight - SL 应用程序中出现奇怪的渲染错误......浏览器问题？

> ID：10773613
> 
> 赞同：0
> 
> 时间：2012-05-27T11:25:45.510
> 
> 标签：silverlight

我已经在 SL5 应用程序上工作了几天。在为我的应用程序视图设置样式时，我主要使用硬编码的虚拟数据集合。一切工作正常，但现在我想将它连接到由我的视图模型生成的动态数据集合（使用数据服务技术，您可以根据 IsInDesignTool 属性获得设计时间和真实数据。

在我清除了对硬编码数据的控制并将其绑定到我的视图模型中的集合之后。当我在调试模式下运行它时，我看到 App.xaml.cs 中抛出了一个未处理的异常。异常 args 并没有确切说明问题是什么（它只是说“值不在预期范围内”但是当我查看发件人时，我发现来自 MainWindow 的以下内容（我的应用程序只有一个视图): “浏览器外的特定设置不会影响浏览器内的应用程序。”

此外，当我尝试在 VS 的设计器中查看 MainWindow 时，它不会呈现而是显示错误（设计器中呈现的异常没有我的任何命名空间，只是关于控件和 UIElements 的东西） .

我有点茫然如何解决这个问题。在构建应用程序时，我没有为浏览器外设置任何内容，并且由于它使用虚拟数据集合，为什么它会突然出现这个问题（好像我使用的是浏览器外属性，它会显示在我将数据绑定到视图之前）。

提示/指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T20:31:46.530

我有一个类似的问题。

我确实放了一个`Textbox`内部类型的`Listbox`( `radPanelBar`) 并添加了

`HorizontalScrollBarVisibility="Auto"`到`Textbox`. 似乎文本框在何时显示滚动条时出现问题，何时不显示。添加

`ScrollViewer.HorizontalScrollBarVisibility="Disabled"`到 Listbox 确实解决了它**（**所以，根本没有 OOB 问题**）**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:44:07.260

（对不起，我的英语不好）

我不确定发生了什么，但是`"Out-of-browser specific..."`当我在浏览器上运行时尝试访问一些仅适用于 OOB 的特定属性时，我看到了错误。解决方案是在使用属性之前测试是否运行 oob：

```
if (Application.Current.IsRunningOutOfBrowser)
{
    Application.Current.MainWindow.WindowState = WindowState.Maximized;
} 
```

另一个问题可能是不相关的 - 有时可能很难调试 - 帮助我的一件事是打开另一个 VS 实例并将其附加到您看到问题的那个实例上。使用此设置，转到有问题的视图并更改为“设计视图”-密切关注附加 VS 的输出窗口，看看是否显示了一些有意义的异常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T08:39:51.937

我不完全确定错误是什么，但它根本与OOB无关。我正在使用数据服务方法（在设计时，我以编程方式构建真实数据，而不是 Expression Blend 示例数据，但当不在设计工具中时，它使用 REST 服务）。我开始禁用动态数据中的很多东西，然后慢慢将它们添加回来。在某个地方，我的虚拟数据生成过程搞砸了，但 SL 认为这是一个 OOB 问题。

# pdf - 防止 Ghostscript 光栅化文本？

> ID：10773616
> 
> 赞同：5
> 
> 时间：2012-05-27T11:26:10.530
> 
> 标签：pdf, converter, ghostscript, printer-control-language

我正在尝试将 PDF 转换为 PCL（使用 ghostscript，但我很想听听其他建议），并且每个驱动程序（ghostscript 设备），包括所有内置插件和gutenprint，都会生成比输入大很多倍的 PCL 文件PDF格式。（这就是问题——我需要我的 PCL 与输入一样小）。

鉴于文本没有出现在 PCL 文件中，我猜 Ghostscript 正在对文本进行光栅化。有没有办法阻止GS一般，或者只是gutenprint，这样做？我宁愿让它嵌入字体，或者甚至不嵌入字体（留给打印机渲染字体）？

不幸的是，似乎没有关于这一点的任何文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T12:07:42.633

PCL 中有 3 种（我认为）字体类型。有渲染位图、TrueType 字体（在更高版本中）和 HPGL 棒字体。

PDF 和 PostScript 具有类型 1、2 (CFF)、3 和 42（TrueType，但与 PCL 不同）和基于上述任何类型的 CIDFonts。

两者唯一共同的字体类型是 TrueType，因此为了保留文本，任何不是 TrueType 的字体都必须转换为 TrueType。这不是一项简单的任务。所以 Ghostscript 只是简单地渲染文本，保证可以工作。

一般来说，PDF 是一种比 PCL 更丰富的格式< 有许多 PDF 结构（字体、阴影、单个操作中的笔触/填充、透明度）无法在 PCL 中表示。因此，大小的增加完全有可能与文本和字体无关。

事实上，我相信 Ghostscript 中的 PXL 驱动程序只是将整个页面以所需的分辨率渲染为位图，然后用足够的 PCL 将其包装起来，以便成功发送到打印机。（虽然我可能在这一点上弄错了）

基本上，您不会从 Ghostscript 中获得与 PDF 大小相似的 PCL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T15:45:02.640

这是一种*“防止 Ghostscript 光栅化文本”的*方法。但它的输出将是 PostScript。但是，您可以在附加步骤中成功将此 PostScript 转换为 PCL5e。

该方法会将所有字形转换为其*PostScript*输出的轮廓形状，并且不适用于其 PDF 或 PCL 输出。这里的关键是 -dNOCACHE 参数：

```
gs -o somepdf.ps -dNOCACHE -sDEVICE=pswrite somepdf.pdf 
```

当然，将字体字形转换为轮廓将比保留原始字体嵌入更多空间，因为“字体”是一个空间优化的概念，用于存储、检索和渲染字形形状。

一旦您有了这个 PostScript，您就可以借助您之前尝试的用于 PDF 输入的任何一种方法（包括 {Apache?} FOP）将其转换为 PCL5e。

但是，我不知道输出是否会比带有光栅化字体（甚至是有益的光栅化页面）的版本小得多。但这可能值得一试。

现在也投票否决这个答案......

* * *

### 更新

显然，从 9.15 版（将于 2014 年 9 月/10 月发布）开始，Ghostscript 将支持一个新的命令行参数：

```
 -dNoOutputFonts 
```

这将导致输出设备`pdfwrite`，`ps2write`并“`eps2write`将*'扁平'字形转换为'基本'标记操作（而不是将字体写入输出）”*。

这意味着上面的命令应该被替换为：

```
 gs -o somepdf.ps -dNoOutputFonts -sDEVICE=ps2write somepdf.pdf 
```

**注意事项：**我已经使用基于当前 Git 源代码的自编译 Ghostscript 对一些输入文件进行了测试。它在每种情况下都完美无缺。

# java - 在大于 Integer.MAX_VALUE 的范围内选择随机整数？

> ID：10773617
> 
> 赞同：4
> 
> 时间：2012-05-27T11:26:35.490
> 
> 标签：java, random

我知道还有另一个关于随机范围内的问题，但他们的答案都没有完成我想要做的事情。实际上他们有同样的错误。我编写了这个简单的函数来生成随机范围。

```
Random m_random = new Random();
...
public int RandomWithRange(int min, int max) {
    return m_random.nextInt(max - min + 1) + min;
} 
```

如果范围大于 Integer.MAX_VALUE，则抛出 IllegalArgumentException：n 必须为正。我知道它溢出并变成负数。我的问题是如何处理？

示例范围；

*   [0, 整数.MAX_VALUE]
*   [整数.MIN_VALUE，整数.MAX_VALUE]
*   [-100，整数.MAX_VALUE]

注意： min 和 max 必须包含在内。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T11:31:15.940

在这种情况下，您不能使用 int。您需要使用[BigInteger](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)。以下构造函数可以满足您的需求（当然需要根据您的需要进行一些调整）：

```
BigInteger(int numBits, Random rnd) 
```

> 构造一个随机生成的 BigInteger，均匀分布在 0 到 (2numBits - 1) 的范围内，包括 0 到 (2numBits - 1)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T11:40:38.453

您遇到的问题是`(max - min)`溢出并给您一个负值。

您可以使用 a`long`代替。

```
public int randomWithRange(int min, int max) {
    return (int) ((m_random.nextLong() & Long.MAX_VALUE) % (1L + max - min)) + min;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T11:33:51.587

您是否考虑过获得随机双精度然后再转换回 int

```
return (int)(m_random.nextDouble() * ((double)max - (double)min) + min); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T11:41:42.393

我能想到的最“愚蠢但绝对正确”的解决方案：

```
if (max - min + 1 > 0) // no overflow
  return delta + random.nextInt(max - min + 1);
else {
  int result;
  do {
    result = random.nextInt();
  } while (result < min || result > max);
  // finishes in <= 2 iterations on average
  return result;
} 
```

# php - 未定义的偏移量：255

> ID：10773621
> 
> 赞同：0
> 
> 时间：2012-05-27T11:27:38.520
> 
> 标签：php, offset

日志文件充满了这个错误：

> 未定义的偏移量：/var/www/html/site2/functions.inc.php 第 764 行中的 255"

第 764 行如下：

```
$counter[$i] = $counter[$x]; 
```

整个功能见下文。

有人可以帮我解决吗？谢谢。

```
function Encode($data,$pwd) {
    $pwd_length = strlen($pwd);
    for ($i = 0; $i < 255; $i++) {
        $key[$i] = ord(substr($pwd, ($i % $pwd_length)+1, 1));
        $counter[$i] = $i;
    }
    $x = '';
    for ($i = 0; $i < 255; $i++) {
        $x = ($x + $counter[$i] + $key[$i]) % 256;
        $temp_swap = $counter[$i];
        $counter[$i] = $counter[$x];
        $counter[$x] = $temp_swap;
    }
    $a = '';
    $j = '';
    $Zcrypt = '';
    for ($i = 0; $i < strlen($data); $i++) {
        $a = ($a + 1) % 256;
        $j = ($j + $counter[$a]) % 256;
        $temp = $counter[$a];
        $counter[$a] = $counter[$j];
        $counter[$j] = $temp;
        $k = $counter[(($counter[$a] + $counter[$j]) % 256)];
        $Zcipher = ord(substr($data, $i, 1)) ^ $k;
        $Zcrypt .= chr($Zcipher);
    }
    return $Zcrypt;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:31:04.453

当 $i >= 255 时，您的 for 循环停止。您不希望这样。我认为您希望 for 循环在 $i>255 处停止。

所以改变

> 对于 ($i = 0; $i < 255; $i++) {

进入

> 对于 ($i = 0; $i <= 255; $i++) {

你很高兴去！

# opencv - cvundistortpoints 中的新相机矩阵是什么？

> ID：10773627
> 
> 赞同：3
> 
> 时间：2012-05-27T11:28:15.790
> 
> 标签：opencv, camera-calibration, stereo-3d

我在理解新相机矩阵的内容时遇到了问题`cvUndistortpoints`。我们在立体校准中获得了相机的相机矩阵，以及为什么我们必须在 cvstereorectify 中传递从 cvundistortpoints 获得的新相机矩阵。输出后的新相机矩阵与相机矩阵有何不同`cvUndistortPoints`？

```
void cvUndistortPoints(const CvMat* src, CvMat* dst, const CvMat* cameraMatrix, 
         const CvMat* distCoeffs, const CvMat* R=NULL, const CvMat* P=NULL) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:31:48.907

在单目相机的情况下，newCameraMatrix 通常等于 cameraMatrix ，或者可以通过 GetOptimalNewCameraMatrix 计算以更好地控制缩放。

查看[http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html#cv-getoptimalnewcameramatrix](http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html#cv-getoptimalnewcameramatrix)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T14:23:26.047

答案在您提供的文档中的上一页。P 是 StereoRectify 给你的。

以下是 opencvrefman.pdf 中 undistort 下的内容，我的朋友，您也应该阅读：

> newCameraMatrix – 扭曲图像的相机矩阵。默认情况下，它与 cameraMatrix 相同，但您可以使用不同的矩阵额外缩放和移动结果。

现在，我对此很陌生，还没有机会使用 StereoRectify 功能，但我猜你可能想要不扭曲图像以看起来像不同的相机会看到的那样。

# php - 我该如何为此配置 .htaccess 文件？

> ID：10773628
> 
> 赞同：-1
> 
> 时间：2012-05-27T11:28:19.050
> 
> 标签：php, .htaccess

我的链接如下（index.php）：

```
<a href="http://localhost/example-link.html">Example Link</a> 
```

或者我的链接如下：

```
<a href="http://localhost/other.html">Other</a> 
```

当单击链接时，我想从**cat.php获取“example-link.html”ır“other.html”**

猫.php

```
<?php 
echo $_GET["cat"];
?> 
```

我想打印 $_GET["cat"] (example-link.html 或 other.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:30:32.973

```
RewriteEngine On
RewriteRule ^(.+)\.html$ cat\.php 
```

> 我想打印 $_GET["cat"] (example-link.html 或 other.html)

预定义的变量`$_SERVER`将包含一些信息，也许是`REQUEST_URI`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:31:15.703

```
# Redirect old file path to new file path
Redirect /example-link.html http://localhost/cat.php 
```

# c# - 如何在 C# 中存储静态数据列表？

> ID：10773632
> 
> 赞同：3
> 
> 时间：2012-05-27T11:29:01.650
> 
> 标签：c#, performance, static

我在一个网站上工作，我想要一个下拉菜单来显示城市列表。我应该在哪里存储城市列表以便更快地访问？我不想将此数据存储在数据库中。

将它存储在 XML 文件中是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:42:38.207

我会将它存储在缓存中，可能带有 Sql 依赖或文件依赖。

```
public DataTable GetCities(bool BypassCache)
{
   string cacheKey = "CitiesDataTable";
   object cacheItem = Cache[cacheKey] as DataTable;
   if((BypassCache) || (cacheItem == null))
   {
      cacheItem = GetCitiesFromDataSource();
      Cache.Insert(cacheKey, cacheItem, null,
      DateTime.Now.AddSeconds(GetCacheSecondsFromConfig(cacheKey), 
      TimeSpan.Zero);
   }
   return (DataTable)cacheItem;
} 
```

如果您想将它存储在 XML 中，那也可以，但是每次发生更改时，您都必须将文件发布到场中的所有服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:41:11.177

将其存储在文本文件中。这避免了 XML 解析的开销。加载使用`File.ReadAllLines()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T11:39:23.980

您可以将列表存储为 XML 文件或其他平面文件格式，但我想这取决于您不想将其存储在数据库中的原因。

您提到了更快的访问，但您可能想对此进行阐述。如果您的意思是您不希望每次请求都访问数据库的开销，那么您是否考虑过将其存储在数据库中并在应用程序启动时缓存列表？这样，您可以获得数据库的好处，但只需支付一次开销。

然而，对于小型应用程序，XML 文件就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T11:40:23.283

如果列表永远不会改变，那么只需在代码中将其声明为 const 字符串数组。

如果它偶尔会发生变化，那么把它放在一个xml文件或数据库表中，但是当你读取它时缓存它，这样它只需要在任何会话中读取一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T11:40:44.420

我相信 XML 是最好的解决方案，使用 DOM 解析器而不是 SAX 会更好。

您也可以在未加载文件时将文件加载到会话中以减少读取 XML 的次数，但这会在服务器上使用更多 RAM，请确保不要加载不必要的数据，因为它将被加载到服务器的 RAM 中对于每个会话。如果有意义，您可以仅为登录用户加载它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-27T11:40:43.067

我要建议的是 HORID 风格，但我认为你能得到的最快和最小的“足迹”：

```
public static readonly string [] CityList = new string [] 
{
  "Sydney",
  "New York",
  "London"
}; 
```

现在，我希望您不喜欢这个解决方案，并且可以给我们更多的背景信息，以便我们能够为您的问题提供一个优雅且可维护的解决方案；但如果你追求的只是速度......

# android - 不使用设置支持屏幕

> ID：10773634
> 
> 赞同：0
> 
> 时间：2012-05-27T11:29:08.230
> 
> 标签：android, android-layout

我正在为默认屏幕尺寸（480 * 320）构建一个 Android 程序，为了支持不同的屏幕分辨率，我使用 layout-large 资源文件夹来支持大屏幕。我`<supports-screens/>`在“AndroidManifest.xml”中设置了属性。我使用 Defy 作为目标进行测试。但是，Defy 不使用 layout-large 而是使用默认布局资源。那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:35:42.387

> 我正在为默认屏幕尺寸（480 * 320）构建一个 Android 程序

Android 中没有“默认屏幕尺寸”。

> 为了支持不同的屏幕分辨率我使用layout-large资源文件夹来支持大屏幕

`res/layout-large/`与“屏幕分辨率”无关。它与屏幕物理尺寸有关。屏幕`-large`设备通常具有 5-10" 的屏幕尺寸。

> 我使用 Defy 作为目标进行测试。但是，Defy 不使用 layout-large 而是使用默认布局资源。

当然。Defy 是一款`-normal`屏幕设备。

> 那么我该如何解决这个问题呢？

什么问题？

# android - 使用 ColorMatrix 和 ColorMatrixColorFilter 更改位图颜色导致 Android 中出现奇怪的结果

> ID：10773641
> 
> 赞同：1
> 
> 时间：2012-05-27T11:30:12.960
> 
> 标签：android, bitmap, png, colormatrix

我使用此方法从资源中获取位图，并在从 SurfaceView 扩展的类中使用 Canvas.drawBitmap 绘制它：

```
 private Bitmap getImage(Context context, int imageId) {
    TypedValue value = new TypedValue();
    context.getResources().openRawResource(imageId, value);
    BitmapFactory.Options opts = new BitmapFactory.Options();
    opts.inTargetDensity = value.density;
    return BitmapFactory.decodeResource(context.getResources(), imageId,
            opts);
} 
```

该位图显示自身没有任何问题。但是当我想用下面的方法改变它的颜色并绘制这个新的位图时，它总是会丢失整个图像的某些部分。

```
 public static Bitmap changeColor(Bitmap bmpOriginal, float degree) {
    Bitmap bmp = Bitmap.createBitmap(bmpOriginal.getWidth(),
            bmpOriginal.getWidth(), Config.ARGB_8888);

    // Set the two bitmaps with the same density.
    //But it seems no use now
    // try {
    // bmp.setDensity(bmpOriginal.getDensity());
    // } catch (Exception e) {
    // // TODO: handle exception
    // Log.v("ImageTools_changeColor", "" + e.toString());
    // }
    Canvas c = new Canvas(bmp);
    Paint paint = new Paint();
    ColorMatrix cm = new ColorMatrix();
    cm.setRotate(0, degree);
    ColorMatrixColorFilter f = new ColorMatrixColorFilter(cm);
    paint.setColorFilter(f);
    c.drawBitmap(bmpOriginal, 0, 0, paint);
    return bmp;
} 
```

我尝试了很多来自网络的搜索结果，但仍然不知道为什么。我认为问题也可能来自另一个来源：资源位图本身。它是一个 32 位的 png 文件，大小为 65*161，大小为 1.59KB，不是很大。所以我得到另一个png并用相同的方法绘制，没有任何问题！所以这里也给出了这两个png的链接，供大家找出问题的症结所在。感谢战利品！

================[导致问题](http://pic002.cnblogs.com/images/2012/329499/2012052719244378.png)的png VS[没有问题的png](http://pic002.cnblogs.com/images/2012/329499/2012052719252769.png) =============

# php - PHP如何在特定网址出现时重定向到另一个页面

> ID：10773652
> 
> 赞同：-3
> 
> 时间：2012-05-27T11:31:20.870
> 
> 标签：php, url, routes

我想开发一个 url 路由器，当一个特定的 URL 出现时，我将我的程序重定向到一个特定的 url。甚至可能吗？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:34:23.583

您可以发送 HTTP 标头以重定向到另一个页面：

```
header("Location: foo.php"); 
```

...或完整的 URL：

```
header("Location: http://www.google.co.uk/"); 
```

请注意，您应该在任何其他输出（即回显）之前发送标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:50:11.207

如果你想测试一个“特定”的 url，你需要先构造它：

```
$ssl = "";
if ((isset($_SERVER["HTTPS"]) && $_SERVER["HTTPS"]=="on") || (isset($_SERVER["SERVER_PORT"]) && $_SERVER["SERVER_PORT"]=="443")) 
   { $ssl = "s"; }

$serverport = ($_SERVER["SERVER_PORT"]!="80"?":".$_SERVER["SERVER_PORT"]:"");

$theurl = "http".$ssl."://".$_SERVER["SERVER_NAME"].$serverport.$_SERVER["REQUEST_URI"]; 
```

然后，您可以针对另一个 url（或它们的数组）对其进行测试：

```
if ($theurl != $myurl) {
   header("Location: index.php");
} 
```

针对一组网址：

```
if (in_array($theurl,$myurls)) {
   header("Location: index.php");
} 
```

# wcf - “无法从传输连接读取数据：现有连接被远程主机强行关闭

> ID：10773654
> 
> 赞同：8
> 
> 时间：2012-05-27T11:31:37.657
> 
> 标签：wcf

我使用 Visual Studio 2010 和 MS SQL Server 2005。我是 WCF 的新手，我正在尝试在开发小型任务管理应用程序时学习。

目前，我有一个解决方案，其中包含两个控制台应用程序 - WCF 服务 - 一个连接到 WCF 服务以测试我的代码的客户端

WCF 服务使用 LINQ to SQL 连接到数据库。我已经实现了一个 OperationContract，它将一些东西插入到 WCF 服务后面的数据库中并且它可以工作。我已经实现了一个 OperationContract，它从 WCF 服务返回一个 GUID 到客户端并且它也可以工作。

当我尝试从 WCF 服务中检索 List 列表时，它失败并出现以下错误：

*   “接收到 localhost:8000/TaskerTest/Service/operations 的 HTTP 响应时发生错误。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文

*   InnerException：底层连接已关闭：接收时发生意外错误。

我的合同（前两个工作。GetLists 是问题）：

```
[ServiceContract(Namespace = "http://Tasker_Server")]
public interface IOperations {
    [OperationContract]
    string CreateList(string listName, string text);
    [OperationContract]
    string UpdateList(int idList, string listName, string text);
    [OperationContract]
    List<ToDoList> GetLists();
} 
```

实施：

```
 public List<ToDoList> GetLists() {
        Guid token = OperationContext.Current.IncomingMessageHeaders.GetHeader<Guid>("token", "ns");
        int? userID = CheckCache(token);

        if (userID != null) {
            List<ToDoList> lst = DBAccess.GetListsByUserId(userID.Value);
            return lst;
        }
        else
            return null;
    } 
```

数据库访问代码：

```
 public static List<ToDoList> GetListsByUserId(int idCredential) {
        TaskerModelDataContext tmdc = new TaskerModelDataContext();
        List<ToDoList> lists = tmdc.ToDoLists.Where(entry => entry.id_Credential == idCredential).ToList<ToDoList>();
        return lists;

    } 
```

以及客户端代码（WCF 服务作为服务引用添加到客户端项目）：

```
 TaskerService.LoginClient test2 = new LoginClient();
        string username = "usr1", password = "psw1";
        test2.ClientCredentials.UserName.UserName = username;
        test2.ClientCredentials.UserName.Password = password;

        Guid result = Guid.Empty;
        try {
            result = test2.CheckCredentials(username, password);
            Console.WriteLine("Login OK!");
        }
        catch (Exception e) {
            Console.WriteLine(e.Message);
        }

        TaskerService.OperationsClient client = new OperationsClient();
        using(OperationContextScope contextScope = new OperationContextScope(client.InnerChannel)) {

            Guid testToken = result; Console.WriteLine(testToken.ToString());
            MessageHeader<Guid> mhg = new MessageHeader<Guid>(testToken);
            MessageHeader untyped = mhg.GetUntypedHeader("token", "ns");
            OperationContext.Current.OutgoingMessageHeaders.Add(untyped);

            client.GetLists();
        }
        client.Close(); 
```

客户端因上述异常而失败：client.GetLists();

我可以根据读者的需要提供任何额外的细节。

**更新**

我已经打开了跟踪

```
 <system.diagnostics>
    <trace autoflush="true" />
    <sources>
      <source name="System.ServiceModel"
              switchValue="Information, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="sdt"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData= "SdrConfigExample.e2e" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

然后我在生成的日志上运行 Microsoft Service Trace Viewer 并收到以下错误：

尝试序列化参数时出错。InnerException 消息是 'Type 'System.DelegateSerializationHolder+DelegateEntry' 与数据协定名称 'DelegateSerializationHolder.DelegateEntry:http://schemas.datacontract.org/2004/07/System' 不是预期的

我现在已将 [DataContract] 添加到我的 dbml 文件中的“ToDoList”类中​​，现在我没有收到异常。我在我的客户中得到了正确数量的结果，但是每个类的内容似乎都是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T13:25:42.390

我的数据库类是使用 dbml 文件（LINQ to SQL）自动生成的。

在“TaskerModel.designer.cs”（自动生成的文件）中将 [DataContract()] 属性添加到 ToDoList 类后，我不再收到异常，但我在客户端检索到的类只有默认值对于每个成员。

然后我将 [DataMember()] 属性添加到 ToDoList 类的所有成员并添加

```
[ServiceKnownType(typeof(ToDoList))] 
```

到

```
 [ServiceContract(Namespace = "http://Tasker_Server")]
    public interface IOperations {
        [OperationContract]
        string CreateList(string listName, string text);
        [OperationContract]
        string UpdateList(int idList, string listName, string text);
        [OperationContract]
        List<ToDoList> GetLists();
} 
```

现在它可以工作了。不知道是否有更简单的方法可以做到这一点，但它现在有效。如果有人知道更好的方法来做到这一点，我将不胜感激。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-23T01:19:17.010

就我而言，问题是有一个只读属性。添加一个空集（）；并解决我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T12:56:32.327

调用我的 WCF restfull 服务时，我遇到了同样的错误。该问题似乎是由我作为响应返回的数据类型引起的。

我返回了 JSON，我的响应对象有一个数据类型为 DateTime 的变量。当我用字符串替换 DateTime 时，问题就消失了，并返回了正确的响应。可能它会帮助遇到同样问题的人。

代替：

```
[DataMember]
public DateTime dateFrom {get;set;} 
```

有了这个

```
[DataMember]
public string dateFrom {get;set;} 
```

# c# - 如何在用笔绘制的形状中填充颜色

> ID：10773655
> 
> 赞同：4
> 
> 时间：2012-05-27T11:31:41.167
> 
> 标签：c#, c#-4.0, graphics

我正在用笔画一个带有drawcurve的形状。

我需要在该图形中填充颜色，我该怎么做？

这是我的代码：

```
Pen p1 = new Pen(Color.Red);
Graphics g1 = panel1.CreateGraphics();
g1.DrawCurve(p1, new Point[] { new Point(470, 470), new Point(430, 440), new Point(400, 480), new Point(470, 560), });
Graphics g2 = panel1.CreateGraphics();
g2.DrawCurve(p1, new Point[] { new Point(470, 470), new Point(510, 440), new Point(540, 480), new Point(470, 560), }); 
```

我找到了填充路径，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T12:14:35.407

使用 GraphicsPath 类。您可以使用 Graphics.FillPath 填充它并绘制轮廓，如有必要，使用 Graphics.DrawPath。并且确保只在 Paint 事件处理程序中绘制，无论您使用 CreateGraphics() 绘制的内容在面板重绘自身时不会持续很长时间。

```
using System.Drawing.Drawing2D;
...
    public partial class Form1 : Form {
        public Form1() {
            InitializeComponent();
            panelPath = new GraphicsPath();
            panelPath.AddCurve(new Point[] { new Point(470, 470), new Point(430, 440), new Point(400, 480), new Point(470, 560), });
            panelPath.AddCurve(new Point[] { new Point(470, 470), new Point(510, 440), new Point(540, 480), new Point(470, 560), });
            panel1.Paint += new PaintEventHandler(panel1_Paint);
        }

        void panel1_Paint(object sender, PaintEventArgs e) {
            e.Graphics.TranslateTransform(-360, -400);
            e.Graphics.FillPath(Brushes.Green, panelPath);
            e.Graphics.DrawPath(Pens.Red, panelPath);
        }
        GraphicsPath panelPath;
    } 
```

产生：

![在此处输入图像描述](../Images/31ab9b6d7a82467226554854102be598.png)

# php - pdo::beginTransaction 是否锁定表？

> ID：10773660
> 
> 赞同：1
> 
> 时间：2012-05-27T11:32:45.460
> 
> 标签：php, pdo, locking

我可以使用这个函数代替“LOCK TABLES”查询吗？

例子：

```
pdo::beginTransaction(); 

    SELECT id AS last_id FROM t WHERE...
    INSERT INTO t (id,...) VALUES (last_id+1,....)

pdo::commit(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T12:51:49.257

答案是：视情况而定。帮助您准确了解它做什么、不做什么以及它是如何工作的最重要资源在[这里](http://www.php.net/manual/en/pdo.transactions.php)。

首先，这取决于底层驱动程序（MySQL、MSSQL 等）是否完全支持事务功能。如果驱动程序不支持事务，`pdo::beginTransaction();`将失败并返回`FALSE`，并且您的所有查询将立即执行。这并不是说[`LOCK TABLES`](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)查询会失败——这取决于底层数据库引擎是否支持它。

事实上，至少在 MySQL 中，遵循与语句`pdo::beginTransaction()`相同的规则。[`START TRANSACTION`](http://dev.mysql.com/doc/refman/5.5/en/commit.html)它不会立即锁定表，它只是确保作为事务一部分的查询遵循[ACID](http://en.wikipedia.org/wiki/ACID)的规则。

我不会详细说明哪些组合会起作用以及它们会做什么，因为它们在我链接到的文档中有详细介绍，而且我没有必要再把它们全部写出来。

# sql - 从 UPDATE 命令 SQL 引用外部派生表

> ID：10773661
> 
> 赞同：0
> 
> 时间：2012-05-27T11:32:51.073
> 
> 标签：sql, sql-update, derived-table

我需要从 UPDATE 命令中的查询中引用 cartProduct 派生表。有人可以解释一下我做错了什么以及如何解决它。

```
UPDATE memberships SET points = (points + COALESCE( 
    (SELECT pts 
    FROM (
        SELECT pid0, SUM (S) as Pts
        FROM ( 
            (SELECT pid0, SUM (pts1) as S
            FROM 
                (SELECT DISTINCT pid0, pid0,pts1
                FROM cartProduct
                WHERE pid0 = i1) as pointsForPath 
            GROUP BY pid0)) as allPtsTbl
        GROUP BY pid0) as temp 
    WHERE memberships.cid = 57010 AND memberships.pid = temp.pid0 ),
0))
FROM (
    SELECT t0.pid as pid0,t1.pid as pid1,t1.invitedby as i1,t1.points as pts1, t2.pid as pid2,t2.invitedby as i2,t2.points as pts2,t3.pid as pid3,t3.invitedby as i3, t3.points as pts3
    FROM memberships t0, memberships  t1, memberships  t2, memberships  t3
    WHERE t0.cid = t1.cid AND t1.cid = t2.cid AND t2.cid = t3.cid) as cartProduct; 
```

这个查询必须做什么并不重要，因为它是我想要优化的一小部分复杂查询。我唯一的问题是如何从 UPDATE 子查询中引用 cartProduct 。我要优化的查询是由 C 代码生成的......如您所见，我必须多次计算相同的东西。这个查询只有 3 个派生表，但它也可以是 100+，然后我必须等待 10 多个小时才能计算它。

```
UPDATE memberships SET points = points + COALESCE((
SELECT pts 
FROM (
    SELECT pid0, SUM (S) as Pts
    FROM ( 
        SELECT pid0, SUM (pts1) as S
        FROM 
            (SELECT DISTINCT pid0, pid1,pts1
            FROM (
                SELECT t0.pid as pid0, t1.pid as pid1, t1.invitedby as i1, t1.points as pts1 
                FROM memberships t0, memberships t1
                WHERE t0.cid = 57010 AND t1.cid = 57010) as paths
            WHERE pid0 = i1) as pointsForPath
        GROUP BY pid0
        UNION ALL
        SELECT pid0, SUM (pts2) as S
        FROM (
            SELECT DISTINCT pid0, pid2,pts2
            FROM (
                SELECT t0.pid as pid0, t1.pid as pid1, t1.invitedby as i1, t1.points as pts1 , t2.pid as pid2, t2.invitedby as i2, t2.points as pts2 
                FROM memberships t0, memberships t1, memberships t2
                WHERE t0.cid = 57010 AND t1.cid = 57010 AND t2.cid = 57010) as paths
            WHERE pid0 = i1 AND pid1 = i2) as pointsForPath
        GROUP BY pid0
        UNION ALL
        SELECT pid0, SUM (pts3) as S
        FROM (
            SELECT DISTINCT pid0, pid3,pts3
            FROM (
                SELECT t0.pid as pid0, t1.pid as pid1, t1.invitedby as i1, t1.points as pts1 , t2.pid as pid2, t2.invitedby as i2, t2.points as pts2 , t3.pid as pid3, t3.invitedby as i3, t3.points as pts3 
                FROM memberships t0, memberships t1, memberships t2, memberships t3
                WHERE t0.cid = 57010 AND t1.cid = 57010 AND t2.cid = 57010 AND t3.cid = 57010) as paths
            WHERE pid0 = i1 AND pid1 = i2 AND pid2 = i3) as pointsForPath
        GROUP BY pid0 ) as allPtsTbl
GROUP BY pid0) as temp WHERE memberships.cid = 57010 AND memberships.pid = temp.pid0 ),0) 
```

对不起我的英语不好，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T14:03:10.313

如果性能是您的问题，您可以尝试：

```
update memberships
    set points = points + coalesce(s.points, 0)
    from (nasty union all'ed subquery) s
    where memberships.id = s.id 
```

（这假设您将 pid0 字段重命名为 id。）

也就是说，您应该考虑以下几点：

1.  学习正确的连接语法。在“where”子句中进行连接变得过时了，就像在英语中使用“hath”或“thee”一样。通过选择特定值（您正在执行的操作）隐式执行连接是非常危险的，因为您不知道从每个表中获取了多少条记录，并且对查询的微小更改可能会产生不利影响（例如选择两个用户而不是一个）。
2.  将讨厌的子查询放入临时表中。通常，我不提倡使用临时表，但这可能是优化器混淆的情况（这在混合选择、删除和更新的查询中尤其可能）。
3.  你为什么要在group by前做一个distinct by。首先，您可以执行“sum(distinct)”，尽管这几乎没有必要。这表明您的联接存在问题。而且，错误的连接会导致查询无法完成。

# python - App Engine 的 PyDev - 重新导入外部库

> ID：10773667
> 
> 赞同：0
> 
> 时间：2012-05-27T11:33:42.040
> 
> 标签：python, eclipse, google-app-engine, pydev

我有一个我在 2 年前创建的项目。我需要再次处理它，并且在我的 Eclipse 工作区中没有它，所以我从 git 下载了它并将现有项目导入工作区。一切运行良好，除了我注意到外部库不包含自我创建项目以来添加到 SDK 的所有新库（与那时相比现在有负载）。如果我可以选择 GAE 根目录并让 Eclipse 自动为我拉入所有库，这将很有用，就像您在创建新项目时所做的那样。除了将它们逐个添加之外，我没有看到这样做的方法。有没有人有任何提示？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:41:08.667

如果您创建一个新项目，您将获得所有新的库。将您现有的（导入的）源移动到这个新项目。

# python - 把所有的乌龟聚集在一起

> ID：10773668
> 
> 赞同：1
> 
> 时间：2012-05-27T11:33:50.667
> 
> 标签：python, turtle-graphics

我有以下代码。代码的最后一个功能应该将孩子聚集到他们的母亲那里。

```
class MotherTurtle(Turtle):  
    def __init__(self, home):
        Turtle.__init__(self, home)
        self.children = []
        self.home = home
        self.setName("Mum")

    def giveBirth(self, name):
        newborn = Turtle(self.home)
        newborn.setName (name)
        self.children.append(newborn)
        return newborn

    def greetChildren(self):
        for child in self.children:
            print "Hi %s" %(child.name)

    def gatherChildren(self):
        for child in self.children:
            child.moveTo(self.home) 
```

我需要把孩子们聚集到他们的母亲那里。

![在此处输入图像描述](../Images/72020dcaf1b0da9b1bbbfb3bc75512a3.png)

这是我运行程序时遇到的错误：

```
======= Loading Progam =======
>>> world = makeWorld()
>>> mum = MotherTurtle(world)
>>> mary = mum.giveBirth("Mary")
>>> jimmy = mum.giveBirth("Jimmy")
>>> mum.greetChildren()
Hi Mary
Hi Jimmy
>>> mary.turn(-45)
>>> mary.forward(120)
>>> jimmy.turn(90)
>>> jimmy.forward()
>>> mum.gatherChildren() 
```

错误是：

> 'list' 对象没有属性 'moveTo' 找不到属性。您正在尝试访问不存在的对象的一部分。请检查 C:\Users\user\Desktop\159171 的第 21 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:46:36.297

方法如下：

```
def gatherChildren(self):

    # get the position of the mother turtle    
    mumX = self.getXPos()
    mumY = self.getYPos()
    # use an offset so not all turtles are on top of each other
    spacing = 10
    offset = spacing
    # loop through the list of children to place each child close to the mother
    for child in self.children:
      child.moveTo(mumX + offset, mumY + offset)
      offset = offset + spacing 
```

# uitableview - popovercontroller tableview 控制器单元格 null

> ID：10773676
> 
> 赞同：0
> 
> 时间：2012-05-27T11:34:24.653
> 
> 标签：uitableview, popover

在开始的 iOS 5 开发中探索 iOS sdk 第 11 章“iPad 注意事项”，“创建自己的弹出框”段落，我自己尝试，但只是给出错误输出“**由于未捕获的异常而终止应用程序 'NSInternalInconsistencyException** '，原因: ' **UITableView dataSource 必须从 tableView 返回一个单元格：cellForRowAtIndexPath:** '" 代码如下：（因为我首先在stackoverflow网站上提问，而且我的英语很差，所以请原谅我在表达上的错误） 1.PrLanguageListController.h

```
#import <UIKit/UIKit.h>
@class PrDetailViewController;
@interface PrLanguageListController : UITableViewController
@property (weak, nonatomic) PrDetailViewController *detailViewController;
@property (strong, nonatomic) NSArray *languageNames;
@property (strong, nonatomic) NSArray *languageCodes;
@end 
```

2.PrLanguageListContrler.m

```
#import "PrLanguageListController.h"
#import "PrDetailViewController.h"
@interface PrLanguageListController ()
@end

@implementation PrLanguageListController
@synthesize detailViewController;
@synthesize languageCodes;
@synthesize languageNames;
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
   return self;
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.languageNames = [NSArray arrayWithObjects:@"English", @"French",
                          @"German", @"Spanish", nil];
    self.languageCodes = [NSArray arrayWithObjects:@"en", @"fr", @"de", @"es", nil];
    self.clearsSelectionOnViewWillAppear = NO;
    self.contentSizeForViewInPopover = CGSizeMake(320.0,
                                                  [self.languageCodes count] * 44.0);
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.detailViewController = nil;
    self.languageNames = nil;
    self.languageCodes = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

#pragma mark - Table view data source
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [self.languageCodes count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    // Configure the cell...
    cell.textLabel.text = [languageNames objectAtIndex:[indexPath row]];
    return cell;
}
#pragma mark - Table view delegate
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    detailViewController.languageString = [self.languageCodes objectAtIndex:
                                       [indexPath row]];
}
@end 
```

3.PrDetailViewController.h

```
#import <UIKit/UIKit.h>
@interface PrDetailViewController : UIViewController <UISplitViewControllerDelegate>
@property (strong, nonatomic) id detailItem;
@property (strong, nonatomic) IBOutlet UILabel *detailDescriptionLabel;
@property (weak, nonatomic) IBOutlet UIWebView *webView;
@property (strong, nonatomic) UIBarButtonItem *languageButton;
@property (strong, nonatomic) UIPopoverController *languagePopoverController;
@property (copy, nonatomic) NSString *languageString;
- (IBAction)touchLanguageButton;
@end 
```

4.PrDetailViewController.m

```
#import "PrDetailViewController.h"
#import "PrLanguageListController.h"
@interface PrDetailViewController ()
@property (strong, nonatomic) UIPopoverController *masterPopoverController;
- (void)configureView;
@end
@implementation PrDetailViewController
@synthesize detailItem = _detailItem;
@synthesize detailDescriptionLabel = _detailDescriptionLabel;
@synthesize masterPopoverController = _masterPopoverController;
@synthesize webView;
@synthesize languageButton;
@synthesize languagePopoverController;
@synthesize languageString;
#pragma mark - Managing the detail item
//rewrite url for different languages.eg.www.wekipak.com/us--ch...etc
static NSString * modifyUrlForLanguage(NSString *url, NSString *lang) {
    if (!lang) {
        return url;
    }
// We're relying on a particular Wikipedia URL format here. This
// is a bit fragile!
NSRange languageCodeRange = NSMakeRange(7, 2);
if ([[url substringWithRange:languageCodeRange] isEqualToString:lang]) {
    return url;
    } else {
        NSString *newUrl = [url stringByReplacingCharactersInRange:languageCodeRange
                                                    withString:lang];
        return newUrl;
    }
}
- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        //_detailItem = newDetailItem;
        _detailItem = modifyUrlForLanguage(newDetailItem, languageString);
        // Update the view.
        [self configureView];
    }
if (self.masterPopoverController != nil) {
    [self.masterPopoverController dismissPopoverAnimated:YES];
    }        
}
- (void)configureView
{
    // Update the user interface for the detail item.
    NSURL *url = [NSURL URLWithString:self.detailItem];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [self.webView loadRequest:request];
    if (self.detailItem) {
        self.detailDescriptionLabel.text = [self.detailItem description];
    }
}
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
    self.languageButton = [[UIBarButtonItem alloc] init];
    languageButton.title = @"Choose Language";
    languageButton.target = self;
    languageButton.action = @selector(touchLanguageButton);
    self.navigationItem.rightBarButtonItem = self.languageButton;
    [self configureView];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    self.detailDescriptionLabel = nil;
    self.webView = nil;
    self.languageButton = nil;
    self.languagePopoverController = nil;
}
- (void)setLanguageString:(NSString *)newString {
    if (![newString isEqualToString:languageString]) {
        languageString = [newString copy];
        self.detailItem = modifyUrlForLanguage(_detailItem, languageString);
    }
    if (languagePopoverController != nil) {
        [languagePopoverController dismissPopoverAnimated:YES];
        self.languagePopoverController = nil;
    }
}
- (IBAction)touchLanguageButton {
    if (self.languagePopoverController == nil) {
    PrLanguageListController *languageListController =
    [[PrLanguageListController alloc] init];
    languageListController.detailViewController = self;
    UIPopoverController *poc = [[UIPopoverController alloc]
                                initWithContentViewController:languageListController];
    [poc presentPopoverFromBarButtonItem:languageButton
                permittedArrowDirections:UIPopoverArrowDirectionAny
                                animated:YES];
    self.languagePopoverController = poc;
    } else {
    if (languagePopoverController != nil) {
        [languagePopoverController dismissPopoverAnimated:YES];
        self.languagePopoverController = nil;
        }
    }
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}
#pragma mark - Split view
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
{
    barButtonItem.title = NSLocalizedString(@"Presidents", @"Presidents");
    //barButtonItem.title = NSLocalizedString(@"Master", @"Master");
    [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
    self.masterPopoverController = popoverController;
}
- (void)splitViewController:(UISplitViewController *)splitController willShowViewController:(UIViewController *)viewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    // Called when the view is shown again in the split view, invalidating the button      and popover controller.
[self.navigationItem setLeftBarButtonItem:nil animated:YES];
self.masterPopoverController = nil;
}
@end 
```

选择更改时的语言抽头按钮，它运行下来，并提供终端例外......输出：2012-05-27 19：20：37.803总统[4864：F803] ***断言失败 - [UITableView _CreatePreparedCellfellBlobalrow：hydindexpath：] , /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:6061 2012-05-27 19:20:37.804 总统[4864:f803]****终止应用程序由于未捕获的异常'NSInternalInconsistencyException'，理由是： 'UITableView的数据源必须返回从的tableView细胞：的cellForRowAtIndexPath：' ** *第一掷调用堆栈：（0x13ce022 0x155fcd6 0x1376a48 0x9af2cb 0xb2d28 0xb33ce 0x9ecbd 0xad6f1 0x56d21 0x13cfe42 0x1d86679 0x1d90579 0x1d90674 0x50967 0x4b84e9 0x4b9548 0x3ee9 0x13cfe99 0x1b14e 0x259a0e 0x13cfe99 0x1b14e 0x1b0e6 0xc1ade 0xc1fa7 0xc1266 0x403c0 0x405e6 0x26dc4 0x1a634 0x12b8ef5 0x13a2195 0x1306ff2 0x13058da 0x1304d84 0x1304c9b 0x12b77d8 0x12b788a 0x18626 0x23dd 0x2345为0x1）终止叫做抛出异常（LLDB）*

 *我该如何解决这个问题？感恩节...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:01:29.607

您需要在 PrLanguageListContrller.m 中添加单元格的 alloc/init

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        // Configure the cell... 
```

添加这个

```
**if (cell == nil) cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];** 
```

...

```
 cell.textLabel.text = [languageNames objectAtIndex:[indexPath row]];
    return cell;
} 
```*

# r - segue 包的 Emrlapply 不适用于简单的任务

> ID：10773680
> 
> 赞同：1
> 
> 时间：2012-05-27T11:34:50.343
> 
> 标签：r, emr

我试图`segue`从[https://jeffreybreen.wordpress.com/2011/01/10/segue-r-to-amazon-elastic-mapreduce-hadoop/重现使用的简单示例](https://jeffreybreen.wordpress.com/2011/01/10/segue-r-to-amazon-elastic-mapreduce-hadoop/)

集群创建成功

```
> cl <- createCluster(numInstances=2)
STARTING - 2012-05-27 14:02:08
STARTING - 2012-05-27 14:02:39
STARTING - 2012-05-27 14:03:10
STARTING - 2012-05-27 14:03:42
STARTING - 2012-05-27 14:04:13
STARTING - 2012-05-27 14:04:44
STARTING - 2012-05-27 14:05:15
STARTING - 2012-05-27 14:05:46
STARTING - 2012-05-27 14:06:17
BOOTSTRAPPING - 2012-05-27 14:06:48
BOOTSTRAPPING - 2012-05-27 14:07:19
BOOTSTRAPPING - 2012-05-27 14:07:50
BOOTSTRAPPING - 2012-05-27 14:08:21
BOOTSTRAPPING - 2012-05-27 14:08:52
BOOTSTRAPPING - 2012-05-27 14:09:23
BOOTSTRAPPING - 2012-05-27 14:09:55
WAITING - 2012-05-27 14:10:26
Your Amazon EMR Hadoop Cluster is ready for action. 
Remember to terminate your cluster with stopCluster().
Amazon is billing you! 
```

本地模拟没问题，但是在集群上运行每次都报错。

```
> myList <- NULL
> set.seed(1)
> for (i in 1:10){
  +   a <- c(rnorm(999), NA)
  +   myList[[i]] <- a
  + }
> outputLocal  <- lapply(myList, mean, na.rm=T)
> outputEmr   <- emrlapply(cl, myList, mean,  na.rm=T)
RUNNING - 2012-05-27 14:11:58
RUNNING - 2012-05-27 14:12:29
RUNNING - 2012-05-27 14:13:00
WAITING - 2012-05-27 14:13:31
Error in lines[[i]] : subgroup is out of range
> stopCluster(cl) 
```

我喜欢这个包的想法，我希望它对我的工作有用，但我不知道如何解决这个基本问题。

`segue`0.02版本

操作系统：Ubuntu 11.10

**更新**：我尝试运行另一个 Pi 估计示例测试用例，并`emrlapply`返回相同的错误消息。

**UPDATE2**：我更新到 0.03 版，现在我无法连接到集群。成功启动实例后尝试关闭但没有任何效果。我通过 AWS 控制台终止了实例。所以老问题解决了，但新问题出现了。

```
> cl <- createCluster(numInstances=2)
STARTING - 2012-06-01 22:36:10
STARTING - 2012-06-01 22:36:41
STARTING - 2012-06-01 22:37:12
STARTING - 2012-06-01 22:37:43
STARTING - 2012-06-01 22:38:14
STARTING - 2012-06-01 22:38:46
SHUTTING_DOWN - 2012-06-01 22:39:17
SHUTTING_DOWN - 2012-06-01 22:39:48
...
SHUTTING_DOWN - 2012-06-01 22:48:05
SHUTTING_DOWN - 2012-06-01 22:48:36
FAILED - 2012-06-01 22:49:07
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:50:13.163

如果没有调用特定版本，亚马逊似乎将 EMR 服务更改为默认为 1.0 版本的 EMR AMI。自 1 月 1 日以来，该行为一直默认为最新版本。当我将更改默认为最新版本时，我遇到了当前 Hadoop 化身的问题，希望将输出放在 S3 上的子存储桶中。

为了进行这些更改，我必须将 Java AWS API 代码升级到最新版本。

新版本的 tar 球在这里： [http](http://code.google.com/p/segue/downloads/list) ://code.google.com/p/segue/downloads/list 或者你可以克隆源代码并自己构建它，如果你喜欢那种东西。

通过此更改，我已将 Segue 索引为 0.03。

编辑：我刚刚发现 m1.small 是一个问题（32 位），所以我更改了默认值并更改了行为以不允许用户指定 m1.small。新版本是 0.04。

# java - 快速排序包含数字和字符串元素的字符串数组

> ID：10773684
> 
> 赞同：0
> 
> 时间：2012-05-27T11:35:48.213
> 
> 标签：java, quicksort

我正在做我的作业，我需要使用快速排序来对字符串数组进行排序，并且数组中的元素结合数字和字符串。例如

```
String s[];

s[0]="172,19,Nina";
s[1]="178,18,Apple";
s[2]="178,18,Alex"; 
```

所以排序后应该是

```
s[0]=172,19,Nina
s[1]=178,18,Alex
s[2]=178,18,Apple 
```

我想我应该先将所有字符串分成数字和字符串，然后排序 172,178,178，然后排序 19 18 18，最后排序 Nina Apple Alex？

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:44:07.547

如果所有数字的字符数相同，则字典顺序与数字顺序相同，因此您可以直接比较您的字符串。

否则，您应该拆分字符串并将它们转换为实现 Comparable 接口的适当对象：

```
public class Record implements Comparable<Record> {
    private int firstNumber;
    private int secondNumber;
    private String name;

    ...

    @Override
    public int compareTo(Record r) {
        int result = Integer.valueOf(firstNumber).compareTo(Integer.valueOf(r.firstNumber);
        if (result != 0) {
            result = Integer.valueOf(secondNumber).compareTo(Integer.valueOf(r.secondNumber);
        }
        if (result != 0) {
            result = name.compareTo(r.name);
        }
        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:41:36.557

是的，您是对的：您需要将组合字符串分成其元素，并根据这些分离的元素对数组进行排序。请注意，您不需要根据第一个数字对整个数组进行*排序*，然后是第二个等，而是提供基于它们的*比较逻辑。*这称为词法排序

基本上，当您需要确定一个元素是否小于另一个元素时，您有以下逻辑（伪代码）：

```
if elem1's first number < elem2's first number
then
  return elem1 less than elem2
else if elem1's first number > elem2's first number
then
  return elem1 greater than elem2
// from here on: elem1's first number == elem2's first number
else if elem1's second number < elem2's second number
then
  return elem1 less then elem2
else if elem1's second number > elem2's second number
then
  return elem1 greater than elem2
// from here on: elem1's second number == elem2's second number
else if elem1's third string < elem2's third string
then 
  return elem1 less then elem2
else if elem1's third string > elem2's third string
then
  return elem1 greater than elem2
else // everything is the same
  return elem1 equal elem2 
```

# mysql - 如何在 ubuntu 中获取 MySQL 5.5 的库文件

> ID：10773685
> 
> 赞同：2
> 
> 时间：2012-05-27T11:36:01.297
> 
> 标签：mysql, file

我有 MySQL 5.5 的头文件：

```
 decimal.h   m_string.h      my_dbug.h    my_list.h        my_sys.h     mysql_embed.h    mysqld_error.h  sql_state.h        typelib.h
    errmsg.h    my_alloc.h      my_dir.h     my_net.h         my_xml.h     mysql_time.h     raid.h          sslopt-case.h
    keycache.h  my_attribute.h  my_getopt.h  my_no_pthread.h  mysql.h      mysql_version.h  readline.h      sslopt-longopts.h
    m_ctype.h   my_config.h     my_global.h  my_pthread.h     mysql_com.h  mysqld_ername.h  sql_common.h    sslopt-vars.h 
```

但我没有库文件。我需要它。谁能告诉我我需要做什么才能得到它：

这些文件应该在库文件夹中：

```
 libdbug.a    libmyisammrg.a      libmysqlclient.so@         libmysqlclient_r.a    libmysqlclient_r.so.15@      libmysys.a
libheap.a    libmysqlclient.a    libmysqlclient.so.15@      libmysqlclient_r.la*  libmysqlclient_r.so.15.0.0*  libvio.a
libmyisam.a  libmysqlclient.la*  libmysqlclient.so.15.0.0*  libmysqlclient_r.so@  libmystrings.a 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-22T14:27:51.730

您可以获得有关**mysql 头文件或 lib 文件**等在哪里所需的所有信息。

只需`mysql_config`在终端中输入，它就会输出如下内容：

```
Usage: /usr/bin/mysql_config [OPTIONS]
Options:
        --cflags         [-I/usr/include/mysql -fno-omit-frame-pointer -g -pipe -Wno-uninitialized  -g -static-libgcc -fno-omit-frame-pointer -fno-strict-aliasing]
        --include        [-I/usr/include/mysql]
        --libs           [-L/usr/lib -lmysqlclient]
        --libs_r         [-L/usr/lib -lmysqlclient_r -lpthread -lz -lm -lrt -lssl -lcrypto -ldl]
        --plugindir      [/usr/lib/mysql/plugin]
        --socket         [/var/run/mysqld/mysqld.sock]
        --port           [0]
        --version        [10.0.14]
        --libmysqld-libs [-L/usr/lib -lmysqld]
        --variable=VAR   VAR is one of:
                pkgincludedir [/usr/include/mysql]
                pkglibdir     [/usr/lib]
                plugindir     [/usr/lib/mysql/plugin] 
```

您可以看到**include**和**libs**选项，并且它前面的路径提到了它的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:41:47.213

最佳解决方案。安装 LAMP 或 Xampp。
[Lamp](http://www.lamphowto.com/) : Linux - Apache - Mysql - Php
[Xampp](http://www.apachefriends.org/en/xampp.html/) : Linux、Windows、Mac OS X 和 Solaris - Apache - Mysql - Php - Perl
这安装 Mysql 和 Php 没有任何麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T12:12:01.817

如果你不能`$ sudo apt-get install mysql-server-5.5`在你的 Ubuntu 上输入，你可以从这里下载并安装完整的 MySql Server 5.5 包[http://www.mysql.com/downloads/mysql/#downloads](http://www.mysql.com/downloads/mysql/#downloads)（选择平台：Debian Linux）

安装后，您可以在服务器“bin”文件夹中找到所有需要的库。

例如参见以下帖子： [http ://akbarahmed.com/2012/04/08/install-mysql-5-5-on-ubuntu-10-04-lts-running-in-the-rackspace-cloud-2 /](http://akbarahmed.com/2012/04/08/install-mysql-5-5-on-ubuntu-10-04-lts-running-in-the-rackspace-cloud-2/)

# java - 将用户重定向到他在 Spring MVC 中来自的同一位置

> ID：10773690
> 
> 赞同：1
> 
> 时间：2012-05-27T11:37:38.637
> 
> 标签：java, spring, spring-mvc, spring-security

我正在尝试实现一个功能，以便成功登录后的用户应该被重定向到他/她单击登录按钮的同一位置。

我正在使用 Spring MVC，并且在某些情况下平台使用 Spring 安全性登录，而对于某些第三方登录过程，我们正在使用自己的机制。

我想知道，Spring MVC 或 Spring Security 中是否有任何功能，以便我们可以将用户重定向到他/她来的同一位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:21:13.327

Spring Security 提供重定向目标 URL

看看[SavedRequestAwareAuthenticationSuccessHandler](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/SavedRequestAwareAuthenticationSuccessHandler.html) 有四种情况，ss根据哪个来决定重定向目的地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:48:34.123

我同意@jittakal 的回答。我还使用**SavedRequestAwareAuthenticationSuccessHandler**类重定向到用户被重定向到登录页面的同一视图。

这真的是非常容易和真棒使用功能。去吧。:)

# javascript - 如何更有效地进行这个坐标系操作？

> ID：10773693
> 
> 赞同：1
> 
> 时间：2012-05-27T11:38:57.377
> 
> 标签：javascript, math, optimization, 2d, three.js

我正在制作一个 3D 游戏，玩家的背部应该始终面向摄像机，并且他应该朝那个方向移动。我还没有来到“背对相机”部分，但我相信一旦我弄清楚如何将玩家移动到正确的方向就会很简单......

虽然它是一个 3D 坐标系，但高度可以忽略（z 轴），因为无论相机有多高，玩家都应该始终以相同的速度前进（相机系统的功能与游戏世界中的功能非常相似）魔兽）。

现在，我将我的问题总结为...

*   点 (0, 0) 是玩家的位置。
*   点 (x, y) 是相机的位置。
*   相机距离玩家 (dx, dy) 个单位（因为玩家在 (0, 0) 处，它也是 (x, y) 个单位，尽管这是一个位置向量，而不是平移向量）

问题：如何在这个 2D 空间中得到一个点 (a, b)，它位于圆 r = 1 上，但与 (0, 0) 和 (x, y) 在同一条线上？

可视化：

![在此处输入图像描述](../Images/61f1763174bdcbc0c2992ed166ff51b9.png)

通过这样做，我应该有一个 2D 向量 (a, b)，当乘以 -30 时，它将作为玩家的速度。

我知道如何做到这一点，但是以一种非常昂贵和低效的方式，使用毕达哥拉定理、平方根和所有那些不可能的工具（在 Javascript 中工作）。

基本上，是这样的：

```
c = sqrt(dx*dx + dy*dy); //Get the length of the line
rat = 1/c; //How many times is the desired length (1) bigger than the actual length

a = x*rat;
b = y*rat; 
```

一定有更好的东西！

作为参考，我正在使用 Three.js 引擎在 Javascript 中制作游戏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T21:38:03.143

这里没有什么可以提高效率，这些计算是 3D 场景的标准内容。

不要过早优化。这些东西不可能成为您应用程序的瓶颈。

请记住，即使这些计算发生在每个 上`render()`，它们仍然每隔几毫秒发生一次 - 假设 60 FPS 为 17 毫秒，这已经*很多了*。`Math.sin()`//效率很高，并且每个计算都发生了许多其他`Math.cos()`更复杂*的*计算。`Math.sqrt()``render()`

 *你现在拥有的一切都会好起来的。*

# jsf - tomcat上的Primefaces标签库，从有效的jsp文件中渲染一个空页面

> ID：10773694
> 
> 赞同：1
> 
> 时间：2012-05-27T11:38:59.470
> 
> 标签：jsf, tomcat, primefaces

我之前在这里发布过关于如何使用 jsf 为两个用户制作 tic tac toe 的帖子，并且我得到了这个很棒的 taglib Primefaces 的链接。对于我需要做的事情来说，它绝对是完美的，但我一直在努力让它做任何事情，甚至从他们的网站上渲染示例。

所以我一直在关注我发现的这个教程（遗憾的是，关于 Primefaces 主题的教程并不多）：[http](http://java.dzone.com/articles/primefaces-quickstart-tutorial) ://java.dzone.com/articles/primefaces-quickstart-tutorial 一步一步，我做了根据本教程的所有内容，但是当我运行它时，它每次都会呈现一个空页面。

于是我从官网试了一个更简单的例子：http: [//www.primefaces.org/gettingStarted.html](http://www.primefaces.org/gettingStarted.html)

这（test.xhtml）：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
    <h:head>
    </h:head>   
<h:body>    
<p:spinner />   
</h:body>
</html> 
```

呈现一个空页面，而这个：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
    <h:head>
    </h:head>   
<h:body>
test test test test
<p:spinner />   
</h:body>
</html> 
```

仅呈现“测试测试测试测试”文本。

所以我想问题一定出在标签上，tomcat 看不到它们/不知道如何解释它们。但是，根据教程和 primefaces 网站，我需要做的就是像我所做的那样将罐子放在 WEB-INF/lib 中（顺便说一下，我使用的是 Eclipse，我创建的空项目是“Dynamic Web项目”）。在我的 WEB-INF/lib 我有以下罐子：

jsf-api-2.0.3.jar

jsf-impl-2.0.3.jar

jstl-1.0.2.jar

primefaces-3.3.RC1.jar

如果有任何帮助，这里是tomcat控制台的内容：

```
 2012-05-27 13:18:11 org.apache.catalina.core.AprLifecycleListener init
    INFO: The APR based Apache Tomcat Native library which allows optimal performance in                         production environments was not found on the java.library.path:         .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
    2012-05-27 13:18:12 org.apache.tomcat.util.digester.SetPropertiesRule begin
    WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Primefaces1' did not find a matching property.
    2012-05-27 13:18:12 org.apache.coyote.http11.Http11Protocol init
    INFO: Initializing Coyote HTTP/1.1 on http-8080
    2012-05-27 13:18:12 org.apache.catalina.startup.Catalina load
    INFO: Initialization processed in 1127 ms
    2012-05-27 13:18:12 org.apache.catalina.core.StandardService start
    INFO: Starting service Catalina
    2012-05-27 13:18:12 org.apache.catalina.core.StandardEngine start
    INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
    2012-05-27 13:18:13 com.sun.faces.config.ConfigureListener contextInitialized
    INFO: Initializing Mojarra 2.0.3 (SNAPSHOT 20100726) for context '/Primefaces1'
    2012-05-27 13:18:17 org.primefaces.webapp.PostConstructApplicationEventListener processEvent
    INFO: Running on PrimeFaces 3.3.RC1
    2012-05-27 13:18:17 org.apache.coyote.http11.Http11Protocol start
    INFO: Starting Coyote HTTP/1.1 on http-8080
    2012-05-27 13:18:17 org.apache.jk.common.ChannelSocket init
    INFO: JK: ajp13 listening on /0.0.0.0:8009
    2012-05-27 13:18:17 org.apache.jk.server.JkMain start
    INFO: Jk running ID=0 time=0/63  config=null
    2012-05-27 13:18:17 org.apache.catalina.startup.Catalina start
    INFO: Server startup in 5096 ms 
```

可能是什么情况？我是不是把罐子放错了地方，是tomcat失败还是完全是别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:25:50.187

好的，我解决了，也许有一天有人会发现这很有用。

因此，当使用带有 JSF 的 Primefaces 时，不仅网页文件必须具有 .xhtml 扩展名（我在这里找到的解决方案：http: [//www.coderanch.com/t/473437/JSF/java/not-allowed -template-text](http://www.coderanch.com/t/473437/JSF/java/not-allowed-template-text)），但也必须修改 web.xml 文件（我在这里找到的解决方案：[Simple primefaces application not working](https://stackoverflow.com/questions/7219372/simple-primefaces-application-not-working)），如下所示：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

现在它工作得很好。

# ruby-on-rails - Rails - 在link_to中传递参数

> ID：10773695
> 
> 赞同：77
> 
> 时间：2012-05-27T11:39:06.157
> 
> 标签：ruby-on-rails

我的账户索引页面列出了所有账户，每个账户都有一个“+服务”链接；这应该将用户引导至 /my_services/new 页面，并使用适当的 ID 预先填充 account_id 字段，具体取决于在 Accounts 索引页面上单击了哪个链接。

我在每个页面的底部都有调试（参数），并且我正在尝试，除了 :controller 和 :action 显示在 /my_services/new 页面的参数中之外，我没有得到任何东西。

我一直在尝试的链接是这样的：

```
link_to "+ Service", "my_services/new", :account_id => acct.id 
```

然后我在服务控制器中也有逻辑：

```
def new
  @my_service = MyService.new
  if params[:account_id]
    @my_service.account_id = params[:account_id]
  end
end 
```

有人可以帮助以正确的方式做到这一点吗？我还没有尝试过一些讨厌的小东西。

**编辑**

事实证明，如果有人在将来查看这个答案，嵌套资源（可能带有`shallow: true`routes.rb 中的选项）似乎是要走的路。这部分的 routes.rb 现在看起来像这样：

```
resources :accounts, shallow: true do
  resources :services
end 
```

我的链接现在看起来像这样：

```
<%= link_to "+ Service", new_service_path(:service => { :account_id => @account.id } ) %> 
```

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-05-27T12:06:57.603

首先link_to是一个html标签助手，它的第二个参数是url，后面是html_options。您想要将 account_id 作为 url 参数传递给路径。如果您在 routes.rb 中正确设置了命名路由，则可以使用路径助手。

```
link_to "+ Service", new_my_service_path(:account_id => acct.id) 
```

我认为最好的做法是将模型值作为嵌套在其中的参数传递：

```
link_to "+ Service", new_my_service_path(:my_service => { :account_id => acct.id })

# my_services_controller.rb
def new
  @my_service = MyService.new(params[:my_service])
end 
```

并且您需要控制允许“批量分配”的 account_id。在 rails 3 中，您可以使用强大的控件来过滤它所属的控制器中的有效参数。我强烈推荐。

[http://apidock.com/rails/ActiveModel/MassAssignmentSecurity/ClassMethods](http://apidock.com/rails/ActiveModel/MassAssignmentSecurity/ClassMethods)

另请注意，如果 account_id 不是由用户自由设置的（例如，用户只能为自己的单个 account_id 提交服务，那么最好不要通过请求发送它，而是在控制器中通过添加一些东西来设置它像：

```
@my_service.account_id = current_user.account_id 
```

如果您只允许用户在自己的帐户上创建服务，但允许管理员通过使用 attr_accessible 中的角色创建任何人的服务，您当然可以将两者结合起来。

希望这可以帮助

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-27T11:54:50.963

试试这个

```
link_to "+ Service", my_services_new_path(:account_id => acct.id) 
```

它会根据需要传递 account_id。

有关 link_to 的更多详细信息，请使用此[http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-02T09:56:13.447

```
link_to "+ Service", controller_action_path(:account_id => acct.id) 
```

如果仍然无法正常工作，请检查路径：

```
$ rake routes 
```

# ios - 如何获取分组表视图的标题视图？

> ID：10773703
> 
> 赞同：0
> 
> 时间：2012-05-27T11:40:01.470
> 
> 标签：ios, objective-c, uitableview, uikit

我想获取分组表视图的所有视图来更改标签颜色并设置背景颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:40:02.407

我找到了答案，无法获得表格视图部分的标题视图。但是您可以实现委托`tableView:viewForHeaderInSection:`来重新创建标题视图和标签。以下代码将为您提供相同的标题视图和确切的标签。

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

    NSString *sectionTitle = [self tableView:tableView titleForHeaderInSection:section];

    if (sectionTitle == nil) {
        return nil;
    }

    // Create label with section title
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(20.0f, 5.5f, 300.0f, 30.0f)];
    label.backgroundColor = [UIColor clearColor];
    label.font = [UIFont boldSystemFontOfSize:16.5];
    label.shadowColor = [UIColor whiteColor];
    label.shadowOffset = CGSizeMake(0.0, 1.0);
    label.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleWidth;
    label.text = sectionTitle;

    // Create header view and add label as a subview
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, self.view.frame.size.width, 44.0f)];
    view.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleWidth;
    [view addSubview:label];

    return view;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T16:53:34.930

太好了，您找到了解决方案。

几个建议：

1.  不要将 CGRect 硬编码为框架的宽度，而是使用`self.view.size.width`宽度（例如，如果您处于横向或 Apple 曾经推出具有不同屏幕尺寸的 iPhone）；

2.  您可能希望同时使用`autoresizingMask`标签和包含标签的视图，以便它们随着屏幕方向的变化而调整大小，或者确保您`[self.tableview reloadData]`在方向变化时调用；和

3.  这显然是一个单行`sizeWithFont:constrainedToSize:lineBreakMode`标签`tableView:heightForHeaderInSection:`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:32:58.050

您还需要添加 textColor：

```
 label.textColor = [UIColor colorWithRed:0.265 green:0.294 blue:0.367 alpha:1.000]; 
```

# c# - 如何计算 EF4 中 SaveChanges 的最佳大小？

> ID：10773710
> 
> 赞同：2
> 
> 时间：2012-05-27T11:40:40.897
> 
> 标签：c#, optimization, entity-framework-4, savechanges

我正在通过 EF4 将文本文件读入数据库。该文件中有超过 600,000 行，因此速度很重要。

如果我在创建每个新实体对象后调用 SaveChanges，则此过程大约需要 15 分钟。如果我在创建 1024 个对象后调用 SaveChanges，那么它会缩短到 4 分钟。

1024 是我选择的任意数字，它没有参考点。

但是，我想知道在调用 SaveChanges 之前是否有最佳数量的对象可以加载到我的实体集中？如果是这样......你是如何解决的（除了反复试验）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T12:31:52.857

这实际上是一个非常有趣的问题，当上下文变得非常大时，EF 变得慢得多。您实际上可以通过在批量插入期间禁用 AutoDetectChanges 来解决这个问题并显着提高性能。然而，一般而言，您可以在 SQL 事务中包含的项目越多越好。

在此处查看我关于 EF 性能的帖子[http://blog.staticvoid.co.nz/2012/03/entity-framework-comparative.html](http://blog.staticvoid.co.nz/2012/03/entity-framework-comparative.html)，以及我在此处关于如何禁用 AutoDetectChanges 改进这一点的帖子[http://blog。 staticvoid.co.nz/2012/05/entityframework-performance-and.html](http://blog.staticvoid.co.nz/2012/05/entityframework-performance-and.html)，这些也可以让您很好地了解批量大小如何影响性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:46:06.477

分析应用程序并查看您选择的两个应用程序花费的时间。这应该会给你一些很好的数字来推断。

就我个人而言，我必须询问您为什么使用 EF 来加载文本文件 - 对于使用 BCP 或直接 SQLCommands 应该很容易将其触发到数据库中的东西来说，这似乎是一种严重的过度杀伤力。

# java - 通过单击 JPanel 移动未装饰的窗口

> ID：10773713
> 
> 赞同：9
> 
> 时间：2012-05-27T11:40:52.277
> 
> 标签：java, swing, border, panel

当窗口未装饰时，是否可以通过单击窗口中的一个面板来移动窗口？

我有一个带有 40 像素大小的哑光边框的主面板，以及几个带有控件的面板，我想在单击该边框时移动窗口。那可能吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-01T05:36:16.173

**您可以在具有边框**的面板上放置另一个面板，使边框可见。使用以下代码移动您的窗口。

```
public class MotionPanel extends JPanel{
    private Point initialClick;
    private JFrame parent;

    public MotionPanel(final JFrame parent){
    this.parent = parent;

    addMouseListener(new MouseAdapter() {
        public void mousePressed(MouseEvent e) {
            initialClick = e.getPoint();
            getComponentAt(initialClick);
        }
    });

    addMouseMotionListener(new MouseMotionAdapter() {
        @Override
        public void mouseDragged(MouseEvent e) {

            // get location of Window
            int thisX = parent.getLocation().x;
            int thisY = parent.getLocation().y;

            // Determine how much the mouse moved since the initial click
            int xMoved = e.getX() - initialClick.x;
            int yMoved = e.getY() - initialClick.y;

            // Move window to this position
            int X = thisX + xMoved;
            int Y = thisY + yMoved;
            parent.setLocation(X, Y);
        }
    });
    }
} 
```

我一直在使用这段代码为未装饰的窗口制作自定义标题栏。PS：您可以通过扩展 JComponent 而不是 JPanel 来概括此示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T12:27:10.953

> 我有一个带有 40 像素大小的哑光边框的主面板，以及几个带有控件的面板，我想在单击该边框时移动窗口

我认为@camickr 的[ComponetMover](http://tips4java.wordpress.com/2009/06/14/moving-windows/)适合你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T12:04:55.143

是的，很有可能。您需要一个 MouseListener 来监听鼠标事件。您开始在 mousedown 上移动并在 mouseup 上停止移动。然后，您只需将窗口位置平移与鼠标在该阶段平移的量相同的量（计算旧鼠标位置和新鼠标位置之间的增量并将其添加到框架位置）。你应该可以很容易地用鼠标监听器做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-11T19:53:45.160

我的项目有一个简单的解决方案。这是我未装饰的 JDialog 类。

```
public class TimerDialog extends JDialog {
// some fields here
private Point mouseClickPoint; // Will reference to the last pressing (not clicking) position

private TimerDialog() {
    initComponents();
    addEventsForDragging();
}

private void addEventsForDragging() {
    // Here is the code does moving
    addMouseListener(new MouseAdapter() {
        @Override
        public void mousePressed(MouseEvent e) {
            mouseClickPoint = e.getPoint(); // update the position
        }

    });
    addMouseMotionListener(new MouseAdapter() {
        @Override
        public void mouseDragged(MouseEvent e) {
            Point newPoint = event.getLocationOnScreen();
            newPoint.translate(-mouseClickPoint.x, -mouseClickPoint.y); // Moves the point by given values from its location
            setLocation(newPoint); // set the new location
        }
    });
}

private void initComponents() {
    setLayout(new FlowLayout());
    // adding components
    setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    setAlwaysOnTop(true);
    setUndecorated(true);
    setResizable(false);
    pack();
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-13T20:19:34.383

```
int xMoved = (thisX + e.getX()) - (thisX + initialClick.x); 
```

这个X + -这个X = 0

```
int xMoved = e.getX()-initialClick.x; 
```

我正在使用什么。

```
public class MouseLiestenerX implements MouseListener,MouseMotionListener{

private theFrame;

public MouseLiestenerX(Frame theFrame){
this.theFrame = theFrame;

}

private Point startClick;

public void mouseDragged(MouseEvent e) {
    int deltaX = e.getX()-startClick.x;
    int deltaY = e.getY()-startClick.y;

    Core.getSp().setLocation(theFrame.getLocation().x+deltaX, theFrame.getLocation().y+deltaY);
}

public void mousePressed(MouseEvent e) {
    startClick = e.getPoint();
}

public void mouseMoved(MouseEvent e){

}
@Override
public void mouseClicked(MouseEvent e) {

}
@Override
public void mouseEntered(MouseEvent e) {
    // TODO Auto-generated method stub

}
@Override
public void mouseExited(MouseEvent e) {
    // TODO Auto-generated method stub

}
@Override
public void mouseReleased(MouseEvent e) {

} 
```

}

并在您的 Frame 构造函数中

```
MouseLiestenerX IMove = new MouseLiestenerX(this);      
addMouseListener(IMove);
addMouseMotionListener(IMove); 
```

# java - CallBack 给出 NullPointException

> ID：10773715
> 
> 赞同：0
> 
> 时间：2012-05-27T11:41:10.397
> 
> 标签：java, android, android-asynctask

我正在尝试让一个简单的网络阅读器在 AsyncTast 中工作，

主线程

```
public class main extends Activity implements CallBackListener{
...
        WebReader wr = new WebReader();
        wr.execute("http://www.google.com");
...
    @Override
    public void callback(String res)
    {
        Log.e("eee",res);
    }
 ...
}

...
interface CallBackListener
{
void callback(String res);
} 
```

和网络阅读器

```
class WebReader extends AsyncTask<String, Void, String>{

    CallBackListener mListener;

       public void setListener(CallBackListener listener){
         mListener = listener;
       }

    @Override
    protected String doInBackground(String... urls) {

        String response = "";

            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(urls[0]);
            try {
                HttpResponse execute = client.execute(httpGet);
                InputStream content = execute.getEntity().getContent();

                BufferedReader buffer = new BufferedReader(
                        new InputStreamReader(content));
                String s = "";
                while ((s = buffer.readLine()) != null) {
                    response += s;
                }

            } catch (Exception e) {
                e.printStackTrace();
            }

        return response;
    }

    @Override
    protected void onPostExecute(String result) {
        Log.e("s3","ss"+result);
        mListener.callback(result); // null point here
    }

} 
```

然而它在 mListener.callback 处因空点而崩溃......任何想法可能有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:14:04.940

您没有设置侦听器。你应该有这样的东西：

```
 WebReader wr = new WebReader();
 wr.setListener( new YourCallbackListener() );
 wr.execute("http://www.google.com"); 
```

# jquery - 在 Chrome 和 FF 中调整大小后，jQuery 中的图像偏移不正确

> ID：10773721
> 
> 赞同：0
> 
> 时间：2012-05-27T11:42:10.517
> 
> 标签：jquery, offset

我在这里设置了一个小提琴：http: [//jsfiddle.net/cYvwb/](http://jsfiddle.net/cYvwb/)

大炮有一个旋转点，啤酒瓶在这里“产卵”。在这看起来不错之前有很多问题（我稍后会让它们在大炮“嘴”处产卵）但这不是现在让我烦恼的问题。

问题是在 FF 中和在 Chrome 中调整窗口大小之后，可能在我尚未测试过的其他浏览器中（我目前正在使用的笔记本电脑上没有安装 IE、safari 和 opera），大炮图像的偏移量（# cannon) 设置错误，我不知道为什么？请帮忙！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T13:07:39.950

警告：这可能只是答案的一部分，因为似乎存在不同的问题。

1 ) 第一次计算在图像尚未加载时完成。如果你更换

```
$(document).ready(function() {
      init();
}); 
```

和

```
 $(window).load(function() {
       init();
 }); 
```

您的偏移量是一致的（稍微调整大小不会改变很多偏移量）。

2 ) 不要重复调用绑定函数，因为它会添加处理程序而不是替换它们。“init”函数中的大部分内容不应该存在（或者更好的是：使用另一个函数，以其他方式命名，用于调整大小处理程序）。

# python - 无法弄清楚如何使用 all() 在我的“代码”中工作

> ID：10773725
> 
> 赞同：3
> 
> 时间：2012-05-27T11:42:55.323
> 
> 标签：python, python-2.7

```
m = range(1, 2000000, 2)
sum1 = 2
for x in xrange(1, 2000000, 2):
    for y in m:
        if x != y:
            if x%y == 0:
                m.remove(x)
            if all(x%y != 0):
                sum1 += x 
```

这就是我写的。这是一个问题，试图将所有质数相加低于 200 万。我的问题出在 all() 语句中。我想要发生的是检查 x 是否是素数；只有当每个 x%y 都给出一个余数时，这才是正确的。

另外，如果我使用 a 我可以使用语句（break？）来停止循环，如果 y > x/3 像这样：

```
 m = range(1, 2000000, 2)
sum1 = 2
for x in xrange(1, 2000000, 2):
    for y in m:
        if y > x/3:
            break
        else:
            if x != y:
                if x%y == 0:
                    m.remove(x)
                if all(x%y != 0):
                    sum1 += x 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T12:00:59.200

You have to pass a sequence or iterable to `all` -- it just tests whether or not all the items passed to it evaluate as true. Here's the right way to use `all`:

```
>>> all([True, True, True])
True
>>> all([True, False, True])
False
>>> all([x > 5 for x in range(10)])
False
>>> all([x > 5 for x in range(6, 10)])
True
>>> all(x > 5 for x in range(6, 10))
True 
```

That last one is the best, because it takes advantage of [short-circuiting](http://en.wikipedia.org/wiki/Short-circuit_evaluation).

However, your call to `all` in your code is pointless. The idea behind your code, it seems to me, is to go through all the values in `m` and remove those that are divisible by any number between 2 and 2000000\. Once you've done that, `m` will contain only prime numbers.

Of course, your code still won't work if you remove `all`. That's because you're actually testing whether each number in `m` is divisible by the numbers `[1, 3, 5, 7...1999999]`. (That's the sequence signified by `xrange(1, 2000000, 2)`. Because you start at `1`, and everything is divisible by `1`, your code will count nothing as prime. And then, once you remove `1` from that sequence, anything divisible by `2` will be counted as prime by your code! You should think more carefully about which numbers you actually have to test in your inner loop.

Finally, you should think about how many loops this code will complete. Even once you have this working, it will take a *very long time* to generate a result. You should test it on smaller numbers first; and then, you should think about how to reduce the number of loops. (And -- *only after* you've thought about it a bit -- read [this](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes).)

But once you have this working, all you have to do is call `sum` on your list of primes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T12:16:50.287

您的使用`all`不正确，如果您查看它的[文档](http://docs.python.org/library/functions.html#all)，它需要一个可迭代的。

您可能尝试做的是使用生成器表达式，形式如下：

```
sum(x**2 for x in range(10)) 
```

这与列表理解非常相似

```
[x**2 for x in range(10)] 
```

然而，`all`以这种方式使用不会突然停止生成器表达式，如果它找到一个除数。使用`any`和检查`x == 0`将很快停止，但由于代码当前已格式化，在认为某些东西之前会检查许多除数。

这会更合适：

```
primes = []
MAX = 2000000

number = 2
while number < MAX:
    for prime in primes:
        if number % prime == 0:
            number += 1
            continue

    primes.append(number)
    number += 1

total = sum(primes) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T12:07:04.240

`all()`接受一个可迭代的参数。在您的情况下，您可以像这样使用它：

```
all(x%y for y in m) 
```

where`x%y for y in m`是生成器表达式。如果我有一个可迭代的

```
[item1, item2, item3, item4...] 
```

`all(iterable)`相当于：

```
item1 and item2 and item3 and item4...' 
```

# hibernate-4.x - 如何使用 Spring 3.1 配置休眠 4

> ID：10773726
> 
> 赞同：0
> 
> 时间：2012-05-27T11:43:11.910
> 
> 标签：hibernate-4.x

我有一个 springapp-dao.xml，如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jee="http://www.springframework.org/schema/jee"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/jee 
http://www.springframework.org/schema/jee/spring-jee-3.1.xsd">

    <jee:jndi-lookup id="masterDS" jndi-name="java:jboss/datasources/MySqlDS" />
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="masterDS" />
        <property name="hibernateProperties">
        <props>
        <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
        <prop key="hibernate.show_sql">true</prop>
        </props>
</property>
    </bean>
</beans> 
```

然后我有一个 springapp-service.xml 如下

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/tx 
http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
http://www.springframework.org/schema/aop 
http://www.springframework.org/schema/aop/spring-aop-3.1.xsd ">
    <bean id="txManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="masterDS" />
    </bean>
    <tx:advice id="txAdvice" transaction-manager="txManager">
    <tx:attributes>
        <tx:method name="get*" read-only="true" propagation="REQUIRED"/>
        <tx:method name="*" propagation="REQUIRED"/>
    </tx:attributes>
</tx:advice>
    <aop:config>
        <aop:pointcut expression="execution(* service.*.*(..))"
            id="service" />
        <aop:advisor advice-ref="txAdvice" pointcut-ref="service" />
    </aop:config>
    <bean id="contactDAO" class="dao.ContactDAOImpl">
    <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
    <bean id="contactService" class="service.ContactServiceImpl">
    <property name="contactDAO" ref="contactDAO"/>
    </bean>
</beans> 
```

然后我有一个 DAOImpl

```
@Repository("ContactDAO")
@Transactional(readOnly = false)
public class ContactDAOImpl  implements ContactDAO {
private SessionFactory sessionFactory;

    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

public List<Contacts> listContact() {

            return sessionFactory.openSession().createQuery("from Contacts")
                    .list();
        }

} 
```

然后我有一个正确映射到联系人表的 POJO

```
@Entity
@Table(name = "CONTACTS")
public class Contacts {

    @Id
    @Column(name = "ID")
    @GeneratedValue
    // The @GeneratedValue annotation says that this value will be determined by
    // the datasource, not by the code.
    private Integer id;

    @Column(name = "FIRSTNAME")
    private String firstname;

    @Column(name = "LASTNAME")
    private String lastname;

    @Column(name = "EMAIL")
    private String email;

    @Column(name = "TELEPHONE")
    private String telephone;
    @Column(name = "CREATED")
    private String created; 
```

...........

然后我有一个服务类

```
@Service
public class ContactServiceImpl implements ContactService {

    private ContactDAO contactDAO;

    public ContactDAO getContactDAO() {
        return contactDAO;
    }

    public void setContactDAO(ContactDAO contactDAO) {
        this.contactDAO = contactDAO;
    } 
```

.....................

现在我有 2 个问题首先，当我尝试在 ContactsDAOImpl 中自动连接会话工厂和在 ContactServiceImpl 中自动连接 ContactDAO 时，它根本没有连接。然后我使用了 setter 和 getter，如上所示。然后它开始注入所需的依赖项。现在我的问题是当我是 ContactDAOImpl 的 listContact() 方法时，（首先我必须在工厂调用 open connection 而不是 getConnection 但这不起作用），它会抛出以下异常

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.hibernate.hql.internal.ast.QuerySyntaxException: Contacts is not mapped [from Contacts] 
```

我需要创建 hbm 文件吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T23:28:40.613

你需要告诉 LocalSessionFactoryBean 你把你的类放在哪里，所以无论你的 Contacts 类在什么包中：

```
<property name="packagesToScan" value="your.orm.package"/> 
```

# asp.net-mvc - 怀菲尔德果园 1.4.2

> ID：10773727
> 
> 赞同：1
> 
> 时间：2012-05-27T11:43:19.010
> 
> 标签：asp.net-mvc, model-view-controller, orchardcms

我是果园新手，正在关注[http://skywalkersoftwaredevelopment.net](http://skywalkersoftwaredevelopment.net)教程。

```
ContentDefinitionManager.AlterPartDefinition(typeof(AddressPart).Name, p => p
            .Attachable(false)
            .WithField("Name", f => f.OfType(typeof(TextField).Name))
            .WithField("AddressLine1", f => f.OfType(typeof(TextField).Name))
            .WithField("AddressLine2", f => f.OfType(typeof(TextField).Name))
            .WithField("Zipcode", f => f.OfType(typeof(TextField).Name))
            .WithField("City", f => f.OfType(typeof(TextField).Name))
            .WithField("Country", f => f.OfType(typeof(TextField).Name))
            );

 SchemaBuilder.CreateTable("AddressRecord", t => t
            .ContentPartRecord()
            .Column<int>("CustomerId")
            .Column<string>("Type", c => c.WithLength(50))
            ); 
```

在这种情况下，withfield 的真正作用是什么？为什么没有 createtable 的东西来为 addressrecord 表创建真实的表字段？

这些“Name”、“addressline1”应该保存在数据库中的什么位置？

感谢您的阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T19:50:25.407

它将字段添加到地址部分。字段是在 Orchard 中扩展类型的更轻量级的方法。它们不会存储在自己的表中，而是作为 XML 序列化到单个列中。这就是为什么它们更容易创建，但更难查询。

# python - 与 python26 链接的 Visual Studio 中的编译错误

> ID：10773732
> 
> 赞同：8
> 
> 时间：2012-05-27T11:44:01.737
> 
> 标签：python, visual-studio-2008, visual-c++

我在运行时遇到错误：

```
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -DPYTHON -DJCC_VER="2.13" -D_java_generics -IX:\Java16/include -IX:\Java16/include/win32 -Ibuild\_CMMCore -IC:\Python26\lib\site-packages\jcc\sources -IC:\Python26\include -IC:\Python26\PC /Tpbuild\_CMMCore\CMMCore.cpp /Fobuild\temp.win32-2.6\Release\build\_CMMCore\CMMCore.obj /EHsc /D_CRT_SECURE_NO_WARNINGS 
```

以下：

```
c:\python26\include\pyconfig.h(233) : fatal error C1083: Cannot open include file: 'basetsd.h': No such file or directory
error: command '"C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.exe"' failed with exit status 2 
```

我将 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Include 放入 PATH 中，因为它包含 BaseTsd.h，但这并没有解决问题。我不认为这与案件有关？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T11:49:02.793

它不是 PATH 它是 INCLUDE 环境变量。

[http://msdn.microsoft.com/en-us/library/f2ccy3wt(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/f2ccy3wt(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-19T20:24:03.617

我将丢失的“.h”头文件复制到“C:\Users\USERNAME\AppData\Local\Programs\Common\Microsoft\Visual C++ for Python\9.0\VC\include”，它可以工作。

# sql - Oracle Query 获取所有具有角色和技能的用户

> ID：10773735
> 
> 赞同：0
> 
> 时间：2012-05-27T11:44:09.147
> 
> 标签：sql, oracle10g

下面是我的表。有 4 个表包含用户、角色、高级角色和具有技能的角色。我想获得所有具有角色和详细技能的用户。以下是预期的输出示例。我需要一个查询来获得下面提到的输出。谢谢你的帮助。

表 T1

```
T1_ID     Name
101       Peter
102       Kevin 
103       Ross 
104       Smith 
```

表 T2

```
T2_ID          Role
201             Admin
202             Programmer
203             Tester
204             Analyst 
```

表 T3

```
T3_ID        T1_ID            T2_ID
301          101               201
302          102               202
303          102               204
304          104               202
305          104               203 
```

表 T4

```
T4_ID      T1_ID       T2_ID    Skill
401         102        202      Java
402         102        202      Spring
403         102        204      Microsoft
404         104        202      c++
405         104        203      website 
```

我想要输出（所有具有 T3 和 T4 角色和技能的用户）。

```
T1_ID        user_name          Role                      skill
101          Peter              Admin          
102         Kevin              Programmer                 Java
102         Kevin              Programmer                 Spring
102         Kevin              Analyst                    Microsoft
104         Smith              Programmer                 C++
104         Smith              Tester                     Website 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:17:26.337

您可能需要进行一系列连接才能将所有表格链接在一起。在我的脑海中，类似以下的内容可能会起作用：

```
select t1.*, T2.Role, T4.Skill from T1
left join T3 on T3.T1_ID = T1.T1_ID
left join T2 on T2.T2_ID = T3.T2_ID
left join T4 on T4.T1_ID = T1.T1_ID and T4.T2_ID = T2.T2_ID 
order by 1 
```

查看此页面以获取不同类型连接的简单示例[https://forums.oracle.com/forums/thread.jspa?threadID=595030](https://forums.oracle.com/forums/thread.jspa?threadID=595030)

- 编辑 -

更新后的查询开始工作，它会生成上表但也包括罗斯，没有任何角色或技能。

```
T1_ID        user_name          Role                      skill
103          Ross 
```

如果您不希望出现没有角色的人，请在“order by 1”行之前添加以下行。

```
where T2.Role is not null 
```

# php - MySQL中的日期时间显示

> ID：10773744
> 
> 赞同：3
> 
> 时间：2012-05-27T11:45:38.120
> 
> 标签：php, mysql, datetime

我需要你的日期时间覆盖帮助。在我的数据库中，我输入了这样的评论日期：

```
 Datetime: 2012-05-08 14:44:53 
```

我怎样才能让它显示接近这个的东西

```
 May 15, 2012 2:44PM 
```

感谢您的时间和耐心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:09:40.440

DATE_FORMAT() 是您问题的答案。**[此链接上有多种日期格式](http://davidwalsh.name/format-date-mysql-date_format)**

```
SELECT DATE_FORMAT(NOW(), '%M %d, %Y %h:%i %p') as FormattedDate; 
```

**[在此处查看输出 [SQLFiddle]](http://sqlfiddle.com/#!2/07506/4)**

```
%M  Month name (January..December)
%d  Day of the month, numeric (00..31)
%Y  Year, numeric, four digits
%h  Hour (01..12)
%i  Minutes, numeric (00..59)
%p  AM or PM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:52:57.603

您需要使用`strtotime()`转换为 Unix 时间戳。然后，您可以使用它`date()`来显示您需要的确切格式。像这样的东西：

```
$unix = strtotime($datetime);
echo date(F j Y g:iA, $unix); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-27T11:48:41.627

您应该使用 MySQL`DATE_FORMAT()`功能。

参考：

[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)

示例查询：

```
SELECT DATE_FORMAT(`date`, '%a %d, %Y %l:%s%p') AS `myDate`; 
```

# android - 为什么我来自 android 库的图像没有按比例缩小？

> ID：10773749
> 
> 赞同：0
> 
> 时间：2012-05-27T11:46:40.490
> 
> 标签：android, image, resize

我想缩小图像，使其适合我的图像按钮的大小。在这段代码中，我打开了图库，然后可以选择一张图片。问题是图像并没有按比例缩小，尽管我在我的代码中这么说。为什么这不起作用？

```
private static final int NEW_WIDTH = 10;
private static final int NEW_HEIGHT = 10;

protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { 
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

    switch(requestCode) { 
    case SELECT_PHOTO:
        if(resultCode == RESULT_OK){  
            Uri selectedImage = imageReturnedIntent.getData();
            String[] filePathColumn = {MediaStore.Images.Media.DATA};

            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String filePath = cursor.getString(columnIndex);
            cursor.close();

            Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);
            Bitmap.createScaledBitmap(yourSelectedImage, NEW_WIDTH, NEW_HEIGHT, false);
            mImageButton.setImageBitmap(yourSelectedImage);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:29:53.177

好的，我自己解决了这个问题。

代替：

```
Bitmap.createScaledBitmap(yourSelectedImage, NEW_WIDTH, NEW_HEIGHT, false);
mImageButton.setImageBitmap(yourSelectedImage); 
```

输入：

```
Bitmap bMapScaled = Bitmap.createScaledBitmap(yourSelectedImage, NEW_WIDTH, NEW_HEIGHT, true);
mImageButton.setImageBitmap(bMapScaled); 
```

我发现这篇文章很有帮助： [http ://www.higherpass.com/Android/Tutorials/Working-With-Images-In-Android/3/](http://www.higherpass.com/Android/Tutorials/Working-With-Images-In-Android/3/)

# python - 数据存储不会将新更改保存到实体

> ID：10773755
> 
> 赞同：0
> 
> 时间：2012-05-27T11:47:31.600
> 
> 标签：python, google-app-engine, transactions, datastore

我正在尝试解决一个错误。以下函数将 Key 对象添加到用户的名为 tabs 的属性中。由于某种原因，在调用`put()`用户实体后，新添加的密钥没有保存。想不通为什么。也许有一些延迟会阻止更改立即出现？在那种情况下，memcache 是解决方案吗？

```
class User(GeoModel):
    tabs = db.ListProperty(db.Key)

@db.transactional
def add_tab_transaction(self, user_key, tab_key):
    user = models.User.get(user_key)
    user.tabs.append(tab_key)
    user.put()
    logging.debug('tabs this user has:')
    logging.debug(user.tabs) # prints the list with the new value
    user = models.User.get(user_key)
    logging.debug('rechecking the same thing:')
    logging.debug(user.tabs) # prints the list without the new value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:56:42.050

此行为在[Isolation and Consistency](https://developers.google.com/appengine/docs/python/datastore/transactions#Isolation_and_Consistency)中进行了解释。

“在事务中，所有读取都反映了事务开始时数据存储的当前、一致状态。这不包括事务中先前的放置和删除。”

# knockout.js - 在 KnockoutJS 中获取可观察的多维数组（对象）

> ID：10773756
> 
> 赞同：2
> 
> 时间：2012-05-27T11:47:33.327
> 
> 标签：knockout.js, knockout-2.0, knockout-mapping-plugin

我正在使用 Knockout 构建一个应用程序，发现它非常有用。虽然，我在获取多维数组（对象）可观察时遇到了问题。

目前我正在使用以下结构：

```
 self.form = ko.observableArray(ko.utils.arrayMap(initialData, function(section) {
        var result = { 
            name : section.name, 
            code : section.code, 
            type : section.type, 
            fields: ko.observableArray(section.fields) 
        };
        return result;
    })); 
```

**它运作良好，但如果initialData**超过两个级别，我无法让它运作。我尝试了类似的东西

```
 self.form = ko.observableArray(ko.utils.arrayMap(initialData, function(block) {
        var result = { 
            name : block.name, 
            code : block.code, 
            type : block.type, 
            sections: ko.observableArray(ko.utils.arrayMap(block.sections, function(section) {
                var result = { 
                    name : section.name, 
                    code : section.code, 
                    type : section.type, 
                    fields: ko.observableArray(section.fields) 
                };
                return result;
            }))
        };
        return result;
    })); 
```

最终的数组结构看起来不错，但是当我推送到节数组时，淘汰赛不会更新 DOM：

```
 self.addField = function( section ) {
        field = {
            code: uid(),
            name: "New Field",
            value: '',
            type: section.type
        };
        section.fields.push(field); 
    }; 
```

我还尝试了一个 knockout.mapping.js 插件（这是一种正确的方法吗？）首先看起来不错，但是在推入上面的函数之后，我的新字段元素不可观察，只是对象。

插件文档说：

```
// Every time data is received from the server:
ko.mapping.fromJS(data, viewModel); 
```

但我不确定这是我的情况。

如果有人有任何想法，将不胜感激。

谢谢。

UPD：让第 1 层和第 2 层可观察到不是问题，问题是要更深入。

这是**initialData**的示例：

```
var blocks = [
    {
        "name" : "",
        "sections" : [
            {
                "name" : "Section 1",
                "fields" : [
                    {
                        "name" : "Field A",
                        "type" : "checkbox",
                        "code" : uid()
                    }
                ]
            }
        ]
    }
]; 
```

HTML

```
<div data-bind='template: { name: tpl-form-field-checkbox, foreach: fields }'></div>
<button class="btn addField" data-bind="click: $root.addField">Add</button>

<script type="text/html" id="tpl-form-field-checkbox">
    <input type="text" name="" value="<%= name %>" /> <br/>
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T12:33:31.390

映射插件是最好的方法。它会自动将您的对象映射到 observables 和 observableArrays，因此您不必手动执行此操作。

这是一个简单的小提琴，可能会给你一些指示：http: [//jsfiddle.net/jearles/CGh9b/](http://jsfiddle.net/jearles/CGh9b/)

在此示例中，我创建了一个树结构，它们允许您添加新条目。您可以看到，我可以毫无问题地继续在越来越深的层次上添加，并且由于名称是可观察的，因此可以更改它们。

# matlab - 如何强制 Matlab/Octave cov 函数使用可选参数

> ID：10773757
> 
> 赞同：2
> 
> 时间：2012-05-27T11:47:54.403
> 
> 标签：matlab, octave, covariance

我正在使用 Matlab 和 Octave 的**cov**（协方差）函数。实际上我正在使用**Octave**，但最终它必须对两者都有效。该函数有一个可选的第二个或第三个参数来指示是否应该使用**N**或 N-1进行**归一化。**

 **如果我这样做：（`cov(points,1)`其中点是 4x2 矩阵）我收到以下错误：

```
error: cov: x and y must have the same number of observations 
```

一般来说，我想知道 Matlab/Octave 如何区分第二个参数是另一个矩阵还是可选参数（因为它可以有 2 个或 3 个参数）。

更具体地说，我想知道**如何解决我的问题？**

Matlab cov() 文档： http: [//www.mathworks.de/help/techdoc/ref/cov.html](http://www.mathworks.de/help/techdoc/ref/cov.html)
Octave cov() 文档：[http ://www.gnu.org/software/octave/doc/interpreter/Correlation -and-Regression-Analysis.html](http://www.gnu.org/software/octave/doc/interpreter/Correlation-and-Regression-Analysis.html)

编辑：我在 Ubuntu 12.04 上使用 Octave 3.2.4
EDIT2：解决方案是安装更新版本的 Octave。此功能是在 3.2 之后实现的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:52:49.957

这看起来像一个 Octave 错误（至少在 3.0.5 版本中）；它在 Matlab 中运行良好（至少在 7.10 版中）。

当然，要解决这个问题，您可以计算：

```
cov(a) * (N-1) / N 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T12:36:25.660

type `help cov`，并注意`opt` ~~已删除~~的内容不存在。

更好的是，做

```
gedit /usr/share/octave/3.2.4/m/statistics/base/cov.m 
```

并将其与~~旧~~的新[代码进行比较](http://hg.savannah.gnu.org/hgweb/octave/file/05635e4c605a/scripts/statistics/base/cov.m#l60)

Opt最近~~消失了。~~同时使用奥利的把戏

**编辑**：我收回，这是一个新功能。不确定使用的是哪个版本的 Octave，但您需要升级。如果可以找到存储库，则进行不稳定的突触升级，或者从源代码构建它。

**编辑 2**：2011 年 1 月 (3.4.1) 添加的功能。3.2.4 于 2010 年 1 月发布。当前版本为 3.6.1**

# android - 为android实现登录facebook

> ID：10773760
> 
> 赞同：-2
> 
> 时间：2012-05-27T11:48:26.587
> 
> 标签：android

我正在为使用 facebook 登录的 android 创建一个应用程序。我的问题是：是在 facebook 上创建一个包含用户名和密码字段的屏幕吗？因为我不想使用单击按钮登录时调用的自己的 facebook 小屏幕。

解释...我想在我的主屏幕上有一个“使用 Facebook 登录”按钮，当用户单击此按钮时，将打开两个字段（用户名和密码）和登录按钮以确认。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T12:04:25.280

帮自己一个忙，使用 Facebook 的登录屏幕：

1.  对用户来说是常见且众所周知的
2.  用户不必与您分享他们的个人登录信息，这可能违反了 Facebook 的条款。
3.  更容易实现

# spring-mvc - 如何在 Spring MVC 3 中处理未映射的请求

> ID：10773762
> 
> 赞同：0
> 
> 时间：2012-05-27T11:48:36.430
> 
> 标签：spring-mvc, http-status-code-404

我想使用 spring mvc 3 将所有未映射的请求映射到 404 错误页面，并在 web.xml 和控制器中为其配置以下内容：

**web.xml**

```
<error-page>
    <error-code>404</error-code>
    <location>/error404</location>
</error-page> 
```

**控制器中的请求处理程序**

```
@RequestMapping(value="/error404")
public String get404() {
    return "error-404.html";
} 
```

假设我在域**mydomain**`/`上运行，如果我在未映射的请求中没有 a （例如`http://mydomain/abc`），它可以正常工作，但否则我仍然会得到页面`error-404.html`，但我会丢失页面的所有样式。

所以`http://mydomain/abc`工作正常，但`http://mydomain/abc/z`没有。

有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:51:38.117

您可以在您的页面中使用 ${pageContext.request.contextPath} 来获取所有网址，包括锚标记链接。例如：

```
<link href="${pageContext.request.contextPath}/style/front.css" rel="stylesheet" type="text/css" /> 
```

# objective-c - 如何使用 FQL 进行多查询

> ID：10773765
> 
> 赞同：2
> 
> 时间：2012-05-27T11:48:52.767
> 
> 标签：objective-c, facebook, ipad, facebook-fql, multi-query

我在使用 FQL 从 Facebook 获取数据时遇到问题。我目前想从 Facebook 获取带有封面图片 url 的专辑。为了获取封面图片，我必须进行查询以获取专辑，然后使用专辑 ID 来获取封面图片。因为我需要专辑的标题和封面图片。

我可以使用 requestWithGraphPath 执行单个 FQL 查询来获取专辑列表。但是不知道如何进行多查询。

这是我只用一个查询来获取专辑的方式

[facebook requestWithGraphPath:@"fql?q=SELECT+aid,name+FROM+album+WHERE+owner+=+me()" andDelegate:albums];

我在进行多查询时遇到问题...我查看了其他堆栈溢出并发现了这一点：

```
FacebookAlbumCollection* albums = [[FacebookAlbumCollection alloc] init: self];

    NSString* fql1 = [NSString stringWithFormat:
                     @"select aid,cover_pid,name from album where owner = me()"];
    NSString* fql2 = [NSString stringWithFormat:
                     @"select pid from photo where pid in (select cover_pid from #albums)"];
    NSString* fql = [NSString stringWithFormat:
                     @"{\"albums\":\"%@\",\"photos\":\"%@\"}",fql1,fql2];

   NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObject:fql forKey:@"q"];

  [facebook requestWithMethodName:@"fql.multiquery" andParams:params andHttpMethod:@"POST" andDelegate:albums]; 
```

有谁知道如何进行多查询？

# php - 如何改变溢出？

> ID：10773768
> 
> 赞同：0
> 
> 时间：2012-05-27T11:49:46.463
> 
> 标签：php, html, css

我正在做一个大学项目。我需要将滚动位置从水平更改为垂直，但这不起作用。这里我使用 PHP 和 HTML、CSS。任何人都可以修复我的代码吗？我是 CSS 新手。

这是我当前的输出：

![我当前的图像格式输出](../Images/9d32b5c8d12f3dddd1602f4b1e1b2fef.png)

我的代码：

```
<style>
div.boxx
{
    background-color:#9C0;
    width:150px;
    height:150px;
    margin-left:20px;
    text-align:center;
    float:left;
}

div.boxx:hover
{
    background:#333;
}

div.inside1
{

    width:100px;
    height:100px;
    margin-left:auto;
    margin-right:auto;
    position:relative;
    margin-top:10px;
    bottom:0px;
    border:solid #666;
    border-width:thin;
}

div.inside2
{

    width:auto;
    height:40px;
    margin-left:auto;
    margin-right:auto;
    margin-top:5px;
    text-align:center;
}

div.button1
{
    width:15px;
    height:25px;
    left:85px;
    float:right;
    position:absolute;
    top:0px;
}

table.main_table
{
    margin-left:auto;
    margin-right:auto;
    width:auto;
}

tr.toptr
{
    background:url(images/available_gallary_top.png) no-repeat;
    height:38px;
}

tr.boatamtr
{
    background:url(images/available_gallary_bottam.png) no-repeat;
    height:7px;
}

tr.fulltr
{
    background:url(images/available_gallary_bg.png) repeat-y;
}

div.gal_cantiner
{
    background-color:#09C;
    width:869px;
    margin-left:2px;
    height:152px;
    overflow:auto;
}

input.delet_gal_bt
{
    width:13px;
    height:13px;
    background:url(images/delet_gal_bt.png) no-repeat;
    border:none;
}
input.delet_gal_bt:hover
{
    background:url(images/delet_gal_bt_h.png) no-repeat;
}

input.remove_gal_bt
{
    width:13px;
    height:13px;
    background:url(images/remove_gal_bt.png) no-repeat;
    border:none;
}
input.remove_gal_bt:hover
{
    background:url(images/remove_gal_bt_h.png) no-repeat;
}

span.gallary_date_text
{
    color:#666; 
    font-size:9px;
    line-height:15px;
}

</style>
<?php
session_start();
include "config.php";
error_reporting(0);
echo "<br>";
$crt=0;
$sql= mysql_query("SELECT * FROM new_gallary",$con);
echo "<table class='main_table' border='0' align='center'><tr class='toptr'><td>&nbsp;</td></tr><tr class='fulltr'><td><div class='gal_cantiner' id='gal_cantiner'>";
while($row = mysql_fetch_array($sql))
  {

       echo    "<div class='boxx' id='boxx".$crt."'><div class='inside1'><img src='".$galimg."' width='100' height='100'><div class='button1'><input type='button' class='delet_gal_bt' onclick='deleted_gallary(".$row['id'].")'/><input type='button' class='remove_gal_bt' onclick='remove_for_gallary(".$row['id'].")'/></div></div><div class='inside2'>".$row['gallary_name']."<br><span class='gallary_date_text'>".$row['gallary_date']."</span></div></div>";

       $crt++;
  }
echo "</div></td></tr><tr class='boatamtr'><td></td></tr></table>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T14:11:24.830

我终于找到了答案。`tr`我在循环内部添加了一条新样式行，如下所示：

```
$l=$l+100;
echo"
    <div class='boxx' id='boxx".$crt."' style="margin-left:".$l."px;margin-top:-160px;">
        <div class='inside1'>
            <img src='".$galimg."' width='100' height='100'>
            <div class='button1'>
                <input type='button' class='delet_gal_bt' onclick='deleted_gallary(".$row['id'].")'/>
                <input type='button' class='remove_gal_bt' onclick='remove_for_gallary(".$row['id'].")'/>
            </div>
        </div>
        <div class='inside2'>".$row['gallary_name'].">
            <br>
            <span class='gallary_date_text'>".$row['gallary_date']."</span>
        </div>
    </div>
";

style="margin-left:".$l."px; margin-top:-160px; 
```

最终输出：[图像](http://s11.postimage.org/yr0c3m543/overfllow.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:57:56.647

试试这个。

```
overflow: auto;
overflow-x: hidden; 
```

请缩短代码：[sscce](http://sscce.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T12:04:26.793

@user1126301 您的代码似乎没有任何滚动条。它只使用现有的图像。

**你应该在你的css中添加这个：**

```
overflow-y: scroll; overflow-x: hidden; padding-right: 5px;
visibility: visible; border: thin solid white; background-color:#336699;
scrollbar-face-color: #336699; scrollbar-3dlight-color: #336699;
scrollbar-base-color: #336699; scrollbar-track-color: #336699;
scrollbar-darkshadow-color: #000; scrollbar-arrow-color: #000;
scrollbar-shadow-color: #fff; scrollbar-highlight-color: #fff; 
```

# node.js - 为 V8 优化 CoffeeScript 生成的 JS

> ID：10773769
> 
> 赞同：2
> 
> 时间：2012-05-27T11:50:07.180
> 
> 标签：node.js, coffeescript

`coffee`- 生成以下简单代码片段的 JS：

```
console.log 'b' if 'b' in arr 
```

是

```
var __indexOf = [].indexOf || function(item) {
    for (var i = 0, l = this.length; i < l; i++) {
        if (i in this && this[i] === item) return i;
    } return -1;
};

if (__indexOf.call(arr, 'b') >= 0) {
  console.log('b');
} 
```

我能理解为什么会这样。IE 不支持`indexOf`，我们希望确保我们的 CS 代码在*所有*浏览器上都能流畅运行。但是，在为 Node.js 服务器编写代码时，我们*确切地*知道 JS 引擎支持什么（[ECMA-262，第 5 版](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-262.pdf "ECMA-262，第 5 版")），因此我们不需要上述技巧。

我对不同的 JavaScript 实现并不十分熟悉，但我确信这不是`coffee -c`由于浏览器不兼容而产生的唯一非最佳代码，如果我们在具有数千个并发连接的生产服务器中考虑所有这些代码，它们会添加一个大量不必要的代码开销。

有没有办法解决这个问题？这些天越来越多的 Node.js 代码是用 CS 编写的，而且随着 SourceMap 的出现，这个数字会更大......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T12:12:33.843

这几乎不是最佳的。声明在`__indexOf`开始时被评估一次，然后立即解析为`[].indexOf`，即使用底层实现的`Array.prototype.indexOf`. 当然，这并不是一笔巨大的开支。

我需要查看其他一些“非最佳”代码示例，但我确信它们中的大多数都属于同一个篮子。并发连接的数量根本不会影响此效果。

# c++ - 使用 Kinect 调用 Open Gl 的鼠标功能

> ID：10773774
> 
> 赞同：1
> 
> 时间：2012-05-27T11:50:19.007
> 
> 标签：c++, opengl, kinect, openkinect

我正在使用 Kinect 在 C++ (OpenGL) 中创建一个应用程序。每当我们在 OpenGL 中单击时，调用的函数就是

```
void myMouseFunction( int button, int state, int mouseX, int mouseY ) 
{

} 
```

但是我们可以使用 Kinect 调用它们吗？也许我们必须为此使用深度缓冲区，但如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T12:29:03.123

第一：您不要“在 openGL 中单击”，因为 OpenGL 不处理用户输入。OpenGL 纯粹是一个渲染 API。您所指的可能是与 GLUT 一起使用的回调；GLUT 不是 OpenGL 的一部分，而是一个独立的框架，它也进行一些用户输入事件处理。

Kinect 不生成输入事件。Kinect 所做的是，它返回它“看到”的深度图像。您需要以某种方式处理此深度图像。有像 OpenNI 这样的框架可以处理这个深度图像并将其转换为手势数据或类似数据。然后，您可以处理此类手势数据并进一步处理以将其解释为用户输入。

在您的标签中，您提到了“openkinect”，即 Kinect 的开源驱动程序。然而 OpenKinect 并没有手势提取和解释，而只提供深度图像。您当然也可以对深度数据执行简单的测试。例如，在某个定义的体积范围内测试某个对象并将其解释为某种事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:32:16.770

我认为您对 Kinect 的真正作用感到困惑。Kinect 将深度和视频数据提供给您的计算机，然后计算机必须对其进行处理。Openkinect 只为您做非常少的处理——没有骨架跟踪。骨架跟踪允许您获得每个用户关节位置的 3D 表示。

如果你只是在做一些随机的黑客攻击，你也许可以切换到 KinectSDK——但需要注意的是你只能在 Windows 上开发和部署。

KinectSDK 也可以与 OpenGL 和 C++ 一起使用，您可以获得所述用户的“骨架”。

OpenNI——它是多平台和自由的——也支持骨架跟踪，但我没有使用它，所以我不能推荐它。

在您完成某种骨架跟踪后，您可以专注于用户的手并处理他的动作以使您的“鼠标点击”工作。不过，这不会使用 GLUT 的鼠标处理程序。

# javascript - 在 FullCalendar 的 Dayclick 事件上触发 jQuery qTip，然后使用其中的按钮创建事件

> ID：10773776
> 
> 赞同：20
> 
> 时间：2012-05-27T11:50:46.490
> 
> 标签：javascript, jquery, events, fullcalendar, qtip

# 应用于在工具提示中创建内容的 CSS

```
.cl_root {
    width: 100%;
    font-size: 13px;
    overflow: hidden;
}
.cl_root .cl_table {
    background-color: #FFF;
    width: 100%;
    margin-bottom: 8px;
    max-width: 100%;
}
.cl_table .cl-key {
    vertical-align: top;
    text-align: left;
    white-space: nowrap;
    font-weight: normal;
    padding: .4em 1em .4em 0;
    font-weight:bold;
}
.cl_table .cl-value{
    width: 95%;
    padding: .4em 0;
    text-align:left;
}
.textbox-fill-input {
    width:95%;
    padding:2px;
    border-width:1px;
    border-color:#666 #ccc #ccc #666

}
.cl-example {
    FONT-SIZE: 12px; PADDING-TOP: 2px;
    font-style:italic
}
.lk {
    WHITE-SPACE: nowrap; COLOR: #112abb; CURSOR: pointer; TEXT-DECORATION: underline;
    float: left;padding-top: 6px;padding-left: 10px;
}

.bubble-table {
    width: 100%; table-layout: fixed;margin-top: 17px;margin-bottom: 4px;
}
.bubble-cell-side {
    WIDTH: 25px;
}
.bubble-mid {
     PADDING-BOTTOM: 0px; PADDING-LEFT: 20px; PADDING-RIGHT: 20px; BACKGROUND: #fff;  PADDING-TOP: 0px
}
.cl-button-quickAddBTN{
    float:left;
}
.bubble-closebutton {
    POSITION: absolute; WIDTH: 15px; BACKGROUND: url(css/images/calendar/combined.gif) 0px -50px; HEIGHT: 15px; TOP: 10px; CURSOR: pointer; RIGHT: 10px
}

$.fn.qtip.styles.tipstyle = {
              width:400,
              background: '#FFFFFF',
              color: 'black',
              textAlign: 'center',
              border: {
                  width: 2,
                  radius: 3
              },
              tip: {
                  corner:'bottomMiddle',
                  size:{x:12,y:12}
              },
              name: 'light'
        } 
```

# 全日历上的 dayclick 事件

```
dayClick: function (date, allDay, jsEvent, view)  { 

                            var d=$.fullCalendar.formatDate(date,"ddd, MMM d");
            $('.qtip').remove();
            if(typeof $(this).data("qtip") !== "object" && allDay) {                            
                            $(this).qtip({
                                  content:{  
                                  text:'<div id="cl_box"><table class="bubble-table" cellspacing="0" cellpadding="0">'+
                                  '<tbody><tr><td class="bubble-cell-side"><div id="tl1" class="bubble-corner">'+
                                  '<div class="bubble-sprite bubble-tl"></div></div></td><td class="bubble-cell-main">'+
                                  '<div class="bubble-top"></div></td><td class="bubble-cell-side">'+
                                  '<div id="tr1" class="bubble-corner"><div class="bubble-sprite bubble-tr"></div></div> </td></tr>'+
                                  '<tr><td class="bubble-mid" colspan="3"><div style="overflow: hidden" id="bubbleContent1">'+
                                  '<div><div></div><div class="cl_root">'+
                                  '<table cellspacing="0" cellpadding="0" class="cl_table">'+
'<tbody><tr><th class="cl-key">Time:</th><td class="cl-value"><div id="bbit-cal-buddle-timeshow">'+d+'</div></td></tr>'+
'<tr><th class="cl-key">What:</th><td class="cl-value"><div class="textbox-fill-wrapper"><div class="textbox-fill-mid">'+
'<input id="bbit-cal-what" class="textbox-fill-input"></div></div><div class="cl-example">e.g., meeting at room 107</div></td>'+
'</tr></tbody></table>'+
'<input id="bbit-cal-quickAddBTN" value="Create event" type="button" class="cl-button-quickAddBTN">'+
'<span id="bbit-cal-editLink" class="lk">Edit details <strong>&gt;&gt;</strong></span>'+
'<input type="hidden" id="box-cl" value="'+date+'">'+
'</div></div></div></td></tr></tbody></table>'+
'<div id="bubbleClose1" class="bubble-closebutton"></div></div>',
                                  },

                                  position: {corner: {tooltip: 'bottomMiddle', target: 'center'}},
                                  style: {
                                         name : 'tipstyle'
                                         },
                                    adjust: {
                                    screen: true // Keep the tooltip within the viewport at all times
                                    },
                                  show: {
                                      solo: true,
                                        when: { event: 'click' },
                                        ready: true 
                                        },
                                  hide: false,                                  

                            });                     

                              }
                      }
<script>
    $("#bbit-cal-quickAddBTN").live('click',function(){
                                                        alert($("#box-cl").attr('value'));
                                    });
    $("#bubbleClose1").live('click',function() {
                                        $(this).parents('qtip').hide();

                                   });
</script> 
```

现在，当我单击日历中的某一天时，会出现“qTip ToolTip”，其中包括两个按钮关闭按钮 (x) 和创建事件按钮

当我单击**创建事件**时，它会提醒当天的日期，当我单击**关闭按钮**时，它会隐藏该 qTip（最初我正在销毁该 qTip）但是当我再次单击同一天**qTip 时不再出现**如何处理多个 qTip在dayClick上触发并单击关闭按钮或单击其他日期消失我还想使用qTip中的createEvent按钮创建事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:09:36.013

您需要将 qTip 构造的隐藏属性从“false”设置为如下所示：

例子：

```
hide: show: {
             target: $(this).find('#bubbleClose1'),
             when: { event: 'click' },
             ready: true 
             }              
}); 
```

我从未使用过 qTip，但似乎应该这样做。它将隐藏事件绑定到当前实例的子层次结构中的关闭按钮。Qtip 可能正在使用切换类或其他东西来处理隐藏/显示方法。如果是这种情况，您可能会破坏模式。即使在“live”的约束下从外部调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:10:47.137

以下代码应该可以工作。并且还需要修复 qtip.js 中的错误。我使用的是 1.0.0-rc3 版本，需要将第 1003 行替换`for(i = 0; i < interfaces.length - 1; i++)`为`for(i = 0; i < interfaces.length; i++)`.

* * *

我建议更改为其他工具提示库而不是 qtip。它过度设计而没有好的目的，这将导致许多 GHOST HTML 元素。或者可以试试qtip2。

```
<script type="text/javascript">
        $(function() {
        var self;
        $("#calendar").fullCalendar({
            dayClick: function(date, allDay, jsEvent, view) {
                self = this;
                var d=$.fullCalendar.formatDate(date,"ddd, MMM d");
                if ($(this).data('qtip') == null || $(this).data("qtip").interfaces.length < 1) {
                    $(this).qtip({
                        content: {
                            text: '<div><table class="bubble-table" cellspacing="0" cellpadding="0">'+
                                      '<tbody><tr><td class="bubble-cell-side"><div class="bubble-corner">'+
                                      '<div class="bubble-sprite bubble-tl"></div></div></td><td class="bubble-cell-main">'+
                                      '<div class="bubble-top"></div></td><td class="bubble-cell-side">'+
                                      '<div class="bubble-corner"><div class="bubble-sprite bubble-tr"></div></div> </td></tr>'+
                                      '<tr><td class="bubble-mid" colspan="3"><div style="overflow: hidden" >'+
                                      '<div><div></div><div class="cl_root">'+
                                      '<table cellspacing="0" cellpadding="0" class="cl_table">'+
    '<tbody><tr><th class="cl-key">Time:</th><td class="cl-value"><div >'+d+'</div></td></tr>'+
    '<tr><th class="cl-key">What:</th><td class="cl-value"><div class="textbox-fill-wrapper"><div class="textbox-fill-mid">'+
    '<input class="textbox-fill-input"></div></div><div class="cl-example">e.g., meeting at room 107</div></td>'+
    '</tr></tbody></table>'+
    '<input value="Create event" type="button" class="cl-button-quickAddBTN">'+
    '<span class="lk">Edit details <strong>&gt;&gt;</strong></span>'+
    '<input type="hidden" value="'+date+'">'+
    '</div></div></div></td></tr></tbody></table>'+
    '<div class="bubble-closebutton">X</div></div>'
                        },
                        position: {
                            corner: {
                                tooltip: "bottomMiddle",
                                target: "center"
                            }
                        },
                        adjust: {
                            screen: true
                        },
                        show: {
                            solo: true,
                            when: {event: "click"},
                            ready: true
                        },
                        hide: false
                    });
                }
            }
        });
        $(".cl-button-quickAddBTN").live('click',function(){
                                                    alert($("#box-cl").attr('value'));
                                });
        $(".bubble-closebutton").live('click',function() {
                                            $(self).qtip("Destroy");

                               });
        $.fn.qtip.styles.tipstyle = {
                      width:400,
                      background: '#FFFFFF',
                      color: 'black',
                      textAlign: 'center',
                      border: {
                          width: 2,
                          radius: 3
                      },
                      tip: {
                          corner:'bottomMiddle',
                          size:{x:12,y:12}
                      },
                      name: 'light'
                }
        });
        </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T16:37:02.893

您的 hide 选项似乎与 apidoc 不匹配，您是否尝试过不将其设置为 hide:false 而是指定隐藏它的事件（请参阅 qtip 文档），让 qtip 进行所有显示和隐藏？

# javascript - 为什么 var combined = null + "" 有一个值？

> ID：10773778
> 
> 赞同：0
> 
> 时间：2012-05-27T11:51:26.447
> 
> 标签：javascript

可能是一个困惑的javascript菜鸟提出的一个非常基本的问题......

为什么

```
var hasthisvalue = null;
if (hasthisvalue)
    print("hasthisvalue hs value"); 
```

和

```
var hasthatvalue = "";
if (hasthatvalue)
    print("hasthatvalue has value"); 
```

不打印任何东西，但是如果我将这两者结合起来

```
var combined = "hasthisvalue" + "hasthatvalue";
if (combined)
    print ("combined has value"); 
```

是吗？

或者更直接：

```
var combined = null + "";
if (combined)
    print ("combined has value"); 
```

如果我只添加两个没有值的变量，为什么“组合”有一个值？我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:54:35.940

当您分别比较它们时，每个都转换为`false`支票`if`。当你组合它们时，`null`变成了 string `"null"`，所以它们的连接是 string `"null"`，它不会转换为`false`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T12:00:28.033

The first 2 examples are situations where the values are *"falsy"*. These values are equal to `false` during a *loose comparison*:

*   null
*   undefined
*   blank string
*   boolean false
*   the number 0
*   NaN

Other values not in this list are *"truthy"* and are equal to `true` on a *loose comparison*.

The third case, you can try in the console. `null+''` becomes a string: `"null"` and is therefore truthy.

# mysql - 为什么从视图中读取比从表中读取要慢得多？

> ID：10773780
> 
> 赞同：1
> 
> 时间：2012-05-27T11:52:30.937
> 
> 标签：mysql, performance, denormalization

我在 MySQL 下做一些关于非规范化的**测试。**我有三张桌子*t1, t2, t3*

t1 = { **c1** ,c2,h1}
t2 = { *c1* , *c3* }
t3 = { **c3** , c4, c5, c6}
**主键** *外键*

t1 有 2000 个元组，t2 相同，t3 有 1000 个元组。

我创建了一个程序来模拟 500 个并发用户，每个用户执行一个查询。这些是我得到的结果。

```
SELECT t3.c5 FROM t3
 INNER JOIN t2 ON t2.c3 = t3.c3
 INNER JOIN t1 ON t1.c1 = t2.c1
WHERE t3.c4 > 100 
```

**这需要 2326 毫秒**

然后我使用上一个查询创建了一个视图`CREATE VIEW vista AS SELECT *...`，我再次启动了 500 个用户，但现在使用这个查询：

```
SELECT c5 FROM vista WHERE c4 > 100 
```

它花了2405**毫秒！（不仅仅是使用 JOIN）**

然后我尝试了以下查询：

```
SELECT c5 FROM t3 WHERE c4 > 100 
```

**耗时 827 毫秒**

* * *

那么，是什么让对视图执行的 SELECT 需要这么长时间才能完成呢？有什么我做的不对吗？

# jquery - 在子悬停时更改父元素背景位置

> ID：10773781
> 
> 赞同：2
> 
> 时间：2012-05-27T11:52:39.800
> 
> 标签：jquery, html, css

我正在尝试创建一个导航菜单，`div`当悬停在子`li`项上时会更改父背景。实际上，我只想移动父背景。

这是我的代码：

```
<div id="headerNav">
    <li class="navHome"><a href="index.php">Home</a></li>
    <li class="navServices"><a href="services.php">Services</a></li>
    <li class="navFaq"><a href="faq.php">FAQ</a></li>
    <li class="navGallery"><a href="gallery.php">Gallery</a></li>
    <li class="navContact"><a href="contact-us.php">Contact</a></li>
</div> 
```

所以，我有`#headerNav`显示的默认背景。当您将鼠标悬停在服务上时，我想将`#headerNav`背景图像向上移动 75 像素。当您将鼠标悬停在常见问题解答上时，我想将`#headerNav`背景图像向上移动 150 像素等。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:59:23.400

考虑`li`元素是列表项，因此它的父级应该是例如`ul`tag 而不是`div`。如果我们想象有效的 HTML 标记，您可以使用类似以下的内容来操作`background-position`父元素。我使用`index()`了不对逻辑进行硬编码的方法。

```
$("#headerNav > li").hover(function() {
    var pos = "0 -" + ($(this).index() * 75) + "px";
    $(this).parent().css("background-position", pos);
}, function() {
    $(this).parent().css("background-position", "0 0");
}); 
```

**演示：http:** [//jsfiddle.net/rFhtP/](http://jsfiddle.net/rFhtP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:01:11.057

您可以通过在 li 上放置一个自定义属性来执行此操作，该属性确定要移动的像素数并在将鼠标悬停在项目上时使用 jquery，获取属性值然后访问它的父级以使用此属性设置它的背景位置，这种方式它将是可扩展的菜单和强大的

```
$("#headerNav li").hover(function() {
    $(this).parent().css("background-position", $(this).attr("CustomAttributeName"));
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T12:02:24.130

`hover()`jQuery 可以通过以下函数轻松做到这一点：

```
$("li").hover(function() {
    $(this.parentNode).addClass(this.className);
}, function() {
    $(this.parentNode).removeClass(this.className);
}); 
```

jsFiddle：http: [//jsfiddle.net/Zy68z/](http://jsfiddle.net/Zy68z/)

# php - php数组读取文本文件

> ID：10773786
> 
> 赞同：-4
> 
> 时间：2012-05-27T11:53:13.133
> 
> 标签：php, arrays, file, text

> **可能重复：**
> [使用 PHP 将文本文件行放入数组](https://stackoverflow.com/questions/2124911/text-file-lines-into-array-with-php)

我该如何替换这个

```
$streams = array(
"name1", 
"name2", 
"name3", 
"name4", 
"name5", 
"name6",
); 
```

有类似的东西

```
$streams = array(
streams.txt
); 
```

其中streams.txt 包括

```
"name1", 
"name2", 
"name3", 
"name4", 
"name5", 
"name6", 
```

基本上，整个代码的作用是从该数组中读取这些名称，并检查 justin.tv 是否在线。这是我试图修复它的所有代码。

```
<?
$chan = "";
$streams = file('streams.txt');
echo "Live User Streams: ";
foreach ($streams as &$i) {
    $chan = "http://api.justin.tv/api/stream/list.json?channel=" . $i;
    $json = file_get_contents($chan);
    $exist = strpos($json, 'name');
    if($exist) {
        echo "$i  http://twitch.tv/" . $i . " | ";
    }

}
echo "";
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:56:47.553

The [file()](http://ca.php.net/manual/en/function.file.php) function seems to be what you want.

```
$lines = file("streams.txt"); 
```

You may have to massage your input text a little, or post-process the lines after they're sucked in to the array.

UPDATE:

Here's a command-line example that works on my workstation:

```
[ghoti@pc ~]$ cat streams.txt 
one
two
three
[ghoti@pc ~]$ php -r '$a = file("streams.txt"); print_r($a);'
Array
(
    [0] => one

    [1] => two

    [2] => three

)
[ghoti@pc ~]$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:00:44.010

You need to read the file's content (you can use [file_get_content](http://php.net/manual/en/function.file-get-contents.php)), and then use [explode](http://www.php.net/manual/en/function.explode.php) to turn it into an array.

# eclipse - 无法使用 eGit 克隆存储库

> ID：10773795
> 
> 赞同：1
> 
> 时间：2012-05-27T11:55:05.447
> 
> 标签：eclipse, git, sts-springsourcetoolsuite, egit

我正在尝试为大学项目克隆一个 repo。以下是详细信息：

```
Eclipse 3.7.2.v20120207-1839

STS 2.9.2.201205071000-RELEASE

EGit    1.3.0.201202151440-r

GNU/Linux Debian 3.0.0-1-amd64 x86_64 
```

首先我尝试导入项目： Import > Projects from Git > URI >

网址：`https://USERNAME@HOSTNAME/repositories/git/REPNAME.git`

主持人： `HOSTNAME`

代表路径：`/repositories/git/REPNAME.git`

协议：`https` 端口：--

但是当我单击下一步时，我收到以下错误：

```
Exception caught during execution of ls-remote command 
```

我用谷歌搜索并环顾四周，甚至在 stackoverflow 上看到了一些帖子，但是，我仍然无法找到发生这种情况的原因。

编辑：**解决方案**

找到了解决方案。抱歉打扰了。看来我不得不关闭 ssl 验证：

```
git config --global http.sslverify "false" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:58:58.483

Found the solution. Sorry for the bother. It seems that I had to turn off ssl verification:

```
git config --global http.sslverify "false" 
```

# ios - 模型间/NSManagedObject 通信

> ID：10773796
> 
> 赞同：1
> 
> 时间：2012-05-27T11:55:32.700
> 
> 标签：ios, events, model, notifications, nsmanagedobject

我有两个 NSManagedObject 子类：Parent 和 Child。Parent 在 OrderedSet 中包含许多 Child(ren)。当孩子的状态发生变化时，我希望父母知道它。

如果我用另一种语言编程，我可能会使用事件，让父级监听来自其每个子级的事件，但是鉴于目标操作仅限于查看组件，所有 Objective C 提供给我的是使用全局 NSNotificationCenter。我绝对不喜欢模型利用全局通知的想法（在我的书中直接通过事件收听是可以的），所以看来我唯一的选择是委派。然而，在两个 NSManagedObjects 之间使用委托似乎是一个危险的想法，因为很难确保一方不会失去对另一方的引用。

有人对我应该如何处理这个有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:08:13.177

另一种选择是键值观察。像这样设置它：

```
const static void *kParentObservingChildSomePropertyContext = &kParentObservingChildSomePropertyContext;

[child addObserver: child.parent forKeyPath: @"someProperty" options: /*see below*/ context: kParentObservingChildSomePropertyContext]; 
```

存在奇怪的常量定义是因为每个观察上下文都应该是唯一的，这样您就不会踩到超类或子类观察上下文。要查看需要设置[的选项，请查阅手册](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)并与您的特定需求进行比较。现在，每当您的子对象上的该属性发生更改时，您的父级将收到：

```
-(void)observeValueForKeyPath: (NSString *)path ofObject: (id)object change: (NSDictionary *)change context: (void *)context; 
```

检查*您的*观察是否具有正确的上下文，然后处理更改。如果您在此处获得不同的上下文，请将消息转发到`super`。

观察完路径后，将父级移除为子级的观察者：

```
[child removeObserver: child.parent forKeyPath: @"someProperty" context: kParentObservingChildSomePropertyContext]; 
```

使用您使用的相同上下文指针，`-addObserver:forKeyPath:options:context`以便删除正确的观察实例。

> 然而，在两个 NSManagedObjects 之间使用委托似乎是一个危险的想法，因为很难确保一方不会失去对另一方的引用。

委托、观察和监视来自特定对象的通知都存在这个问题。您需要确保您对通知感兴趣的生命周期与所涉及对象的生命周期相匹配，否则您可能很容易“泄漏”观察信息，或者 - 更糟糕的是 - 将通知发送到陈旧的对象指针。这些解决方案都不能对此免疫，尽管在委托模式的情况下，您可以使用归零弱引用来确保当父对象消失时，子对象将不再尝试委托给它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T12:53:10.097

我在视图控制器中选择一个字段来为请求提供服务... [self addObserver:self forKeyPath:@"clientProgress.dateLastUpdated" options:0 context:nil];

我确保在同一个视图控制器中删除了 dealloc 上的观察者（或 ARC 中为 dealloc 传递的任何内容）。- (void)dealloc { [self removeObserver:self forKeyPath:@"clientProgress.dateLastUpdated"]; }

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
if ([keyPath isEqual:@"clientProgress.dateLastUpdated"]) {
    // If this key path has changed, the browser needs to update its display.
    NSError *error = nil;
    if (![managedObjectContext save:&error]) {
        UIAlertView *dialog = [[UIAlertView alloc] initWithTitle:@"Save Error" message:@"Error saving inserted record, contact Tech Support" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [dialog show];
        [dialog release];
        exit(-1);  // Fail
    }
    if ( changeIsComingFromLibraryInsert ) {

    }
    [conditioningTableView reloadData];
}
// Essential to call super class implementation - NSArrayController relies heavily on KVO
//[super observeValueForKeyPath:keyPath ofObject:object change:change context:context]; 
```

}

最后，当我想调用观察者时，我只是更新日期... // 通过设置修改后的日期和前面的 ViewController 来强制保存，然后保存并从调用视图控制器重新加载 // 因为有一个观察者正在运行看这个键值 clientProgress.dateLastUpdated = [NSDate date];

# ruby-on-rails - 更新关联

> ID：10773797
> 
> 赞同：0
> 
> 时间：2012-05-27T11:55:49.820
> 
> 标签：ruby-on-rails, associations, has-many

我的课程模型有许多不同语言的成绩单。我想处理每个成绩单并给它一个标题。我无法调试每个块内的代码，我正在进入集合代理类。这样做的正确方法是什么？

我的代码：

```
class Lesson < ActiveRecord::Base
  has_many :lesson_transcripts 
```

在控制器的更新方法中：

```
def update
  @lesson = Lesson.find(params[:id])
  authorize! :update, @lesson
  @lesson.attributes = params[:lesson]

  @lesson.lesson_transcripts.each do |t|
    t.title = ...
  end
  @lesson.save
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:34:48.643

将以下行添加到您的课程模型中：

```
accepts_nested_attributes_for :lesson_transcripts 
```

然后，在您的控制器中，您可以简单地拥有：

```
def update
  @lesson = Lesson.find params[:id]
  authorize! :update, @lesson

  @lesson.update_attributes params[:lessons]
end 
```

希望这可以帮助。

# notify - Notify when web site has been Changed

> ID：10773802
> 
> 赞同：0
> 
> 时间：2012-05-27T11:56:55.730
> 
> 标签：notify

Is there any way to inform web site has been changed?one way is get all web page contex and compare it with previous contex!but Im looking for solution that notify web page changes without get page context!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:58:33.633

The only way that you could tell a website had changed without accessing the content is for the website to notify you itself, through an API or RSS feed or similar mechanism.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T12:16:43.757

除非相关网站有主动通知您的机制...

您不一定需要获取*所有*站点内容，但您确实需要向站点发出请求。您可以[请求`HEAD`仅](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)获取标头。根据站点的不同，这些标题*可能*包含有关上次修改时间的信息。

此外，您可以检查是否有缓存内容[的响应。`304 Not Modified`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)`HEAD`这在请求中比在请求中更常见`GET`，但可以使用任何一种方式。当然，与任何请求一样，这取决于服务器决定如何响应。

您可以轻松地查找标准，而如何使用这些选项取决于您使用的技术。但基本上，`HEAD`请求只是简单地询问服务器，“不要向我发送页面，只需向我发送有关页面的一些基本信息。” 检查`304`响应基本上是询问服务器，“这是我上次访问此资源的时间，有什么变化吗？”

# google-app-engine - Google App Engine 上的博客

> ID：10773805
> 
> 赞同：4
> 
> 时间：2012-05-27T11:57:56.003
> 
> 标签：google-app-engine, blogs, jekyll, hyde

嗨，我正在尝试在 Google App Engine 上托管我的博客（Google 质量和免费...），我到处寻找解决方案。

我喜欢[jekyll 项目](http://jekyllrb.com/)，但由于它是用 ruby​​ 开发的，所以我无法在 appengine 上托管它。

我发现[hyde 项目](http://hyde.github.com/)（哪种 python 实现的[jekyll](http://jekyllrb.com/)版本）我正在考虑在 appengine 上使用它，有没有人已经在 google appengine 上使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T12:07:26.810

最可能的解决方案是“ [microlog](http://code.google.com/p/micolog/) ”，它是一个类似于 GAE 上的 Python 实现的 Wordpress。jekyll 不太适合 GAE 应用程序，因为它的工作流程是写入-**生成静态文件**-发布。在 GAE 上你*无法*访问文件系统，因此拥有这样的框架并不容易。

PS：如果你喜欢，你可以生成静态页面并将它们存储在数据库中，但我看不出这样做的意义，而不仅仅是将数据存储在数据库中并即时渲染它们。

# css - 如何使用在线工具测试浏览器的打印输出？

> ID：10773807
> 
> 赞同：19
> 
> 时间：2012-05-27T11:58:00.497
> 
> 标签：css, browser, web-inspector

我已经（像往常一样）使用`@media print`规则来指定网页的打印应该如何不同于在线版本。这工作得很好，但测试真的很难。我通常要做的是以下步骤：

1.  `screen`为和创建不同的样式`print`。
2.  以屏幕模式启动您的页面
3.  将页面打印到 PDF 打印机等。
4.  看看结果。
5.  尝试找出行为错误的规则。

我想做什么（但无法使用任何浏览器）：

1.  `screen`为和创建不同的样式`print`。
2.  以屏幕模式启动您的页面
3.  进入预览打印模式（例如，对于 Opera、Firefox 可用）
4.  使用 Firebug (Firefox) 或 Dragonfly (Opera) 等可用工具检查 DOM 和当前样式。
5.  动态更改 CSS，重新加载页面，然后再次查看结果和 DOM。

是否有任何浏览器或浏览器、插件和进程的组合可用于获得类似结果？如果您有想法如何更改文件的组织，只需进行最少的更改即可获得所需的结果，欢迎您。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-03-07T00:24:32.647

Chrome 开发者工具有这个功能。

1.  打开您要测试的页面的 Chrome 开发者工具。
2.  **如果抽屉**尚未打开，请打开。（按`Esc`。）
3.  打开**仿真**选项卡。
4.  单击左侧菜单中的**媒体**。
5.  检查**CSS 媒体**并从选择框中选择**打印**

来源：[https ://developers.google.com/web/tools/chrome-devtools/iterate/device-mode/media-queries#preview-styles-for-more-media-types](https://developers.google.com/web/tools/chrome-devtools/iterate/device-mode/media-queries#preview-styles-for-more-media-types)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-27T12:33:28.110

名为“Web Developer”的 Firefox 插件（[https://addons.mozilla.org/en-US/firefox/addon/web-developer/](https://addons.mozilla.org/en-US/firefox/addon/web-developer/)）有一个“按媒体类型显示 CSS”选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T12:27:54.493

您是否尝试过使用[Print Friendly](https://chrome.google.com/webstore/detail/ohlencieiipommannpdfcmfdpjjmeolj) Google Chrome 扩展程序。

它是一个不错的扩展，它添加了一个按钮并在单击时生成网页的 pdf。希望这可能比您当前的过程更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T08:06:07.133

我找到了一个不同的解决方案来解决我的问题，灵感来自[Using Rails 3.1 assets pipeline to conditionally use certain css](https://stackoverflow.com/questions/7134034/using-rails-3-1-assets-pipeline-to-conditionally-use-certain-css)。下面是它的工作原理：

*   在主 HTML 文件中使用以下样式表指令：

    ```
    <link href="application.css" media="all" rel="stylesheet" type="text/css" />
    <link href="screen.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="print.css" media="print" rel="stylesheet" type="text/css" /> 
    ```

*   隔离样式表中的所有规则

    *   适用于屏幕和打印（样式表`application.css`：）
    *   仅适用于屏幕（样式表`screen.css`：）
    *   仅适用于打印（样式表`print.css`：）
*   在测试网页打印输出期间，切换主 HTML 文件中的样式表：

    ```
    <link href="application.css" media="all" rel="stylesheet" type="text/css" />
    <link href="screen.css" media="print" rel="stylesheet" type="text/css" />
    <link href="print.css" media="screen" rel="stylesheet" type="text/css" /> 
    ```

注意第二行和第三行中的开关`media="print|screen"`。

结果，您现在可以调用您的主 HTML 文件，并查看在正常条件下将其打印出来的效果。您通常使用的所有工具（Firefox Firebug、Chrome 开发者工具、Opera DragonFly 等）都将正常工作，因此您可以检查 DOM、查看框、即时更改 CSS 并重新加载页面.

对我来说效果很好，如果我偶然发现一些缺点，我也会回来并记录下来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T15:29:29.507

如果您在单独的文件中指定打印和屏幕 CSS 规则，您可以使用 Chrome 开发人员工具轻松完成此操作。加载您的页面并打开开发人员工具。在“元素”视图中，编辑 media="print" 行，使其显示为 media="all"。

例如，如果您链​​接样式表，例如：

```
<link href="/static/global/css/theme.css" media="all" rel="stylesheet" type="text/css" />
<link href="/static/global/css/print.css" media="print" rel="stylesheet" type="text/css"   /> 
```

改变：

```
<link href="/static/global/css/print.css" media="print" rel="stylesheet" type="text/css" /> 
```

读书：

```
<link href="/static/global/css/print.css" media="all" rel="stylesheet" type="text/css" /> 
```

您现在将在浏览器窗口中将打印样式应用于副本。您可以像浏览任何其他网页一样浏览样式和元素。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-17T03:14:23.540

当打印布局需要修改通用样式时，我发现这是一种有助于打印样式的做法。

1.  创建一个使用 @media print { } 来框定打印样式的打印样式表
2.  最后应用那个样式表
3.  在处理打印样式时，暂时注释掉构成打印样式的行
4.  以您习惯的方式使用 Firebug 和 Web Developer
5.  取消注释媒体包围

就像是：

```
 /* @media print { */

    #sidebar {display:none;}

/* } */ 
```

# database - connection between postgresql db and application(jsf+hibernate) running on cloudfoundry

> ID：10773808
> 
> 赞同：0
> 
> 时间：2012-05-27T11:58:07.057
> 
> 标签：database, postgresql, jsf, cloud-foundry

The application(JSF+hibernate) is been deployed using the vmc commands as on the cloudfoundry site. able to see the welcome page. postgreSQl service is binded with the application but the application is not able to connect with the database. And also viewed about the VCAP_SERVICES using java but dont know much about it rather how to create it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:13:10.017

如果您有一项服务（MySQL 或 Postgres）绑定到您的应用程序，Cloud Foundry 会使用自动重新配置。这意味着您根本不需要触摸您的代码！

请查看我们文档网站上的以下文章：

[http://docs.cloudfoundry.com/frameworks/java/spring/spring.html#using-cloud-foundry-services-in-spring-applications](http://docs.cloudfoundry.com/frameworks/java/spring/spring.html#using-cloud-foundry-services-in-spring-applications)

如果您仍然有问题，请继续上传您的应用程序的战争文件，我们可以查看。

# ruby-on-rails - Bundle install loop

> ID：10773809
> 
> 赞同：0
> 
> 时间：2012-05-27T11:58:10.637
> 
> 标签：ruby-on-rails, ruby, bundler

I'm running ruby 1.8.7 with rails 2.3.14... with bundler.

I've created a new application with:

```
rails new_app
cd new_app 
```

Run the command:

```
bundle install 
```

the terminal loops here:

```
Fetching gem metadata from http://rubygems.org/........ 
```

anything happen. What's going on? I will appreciate your help.

# c++ - Make an installer which installs a toolbar post-install

> ID：10773811
> 
> 赞同：2
> 
> 时间：2012-05-27T11:58:14.253
> 
> 标签：c++, installation

My task is to make an installer for an application which provides an option to install a secondary app. The secondary app is one of those common internet toolbars. The main installer should also provide a few checkboxes which will modify the command line arguments for the second app.

I've done hours and hours of searching and tried one of them, but haven't achieved much success. I have tried the Visual Studio Custom Actions but I'm unable to understand it! I just want to know whats the simplest way to achieve this? (Please suggest some install creator solutions which are simple to use)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:25:16.617

如果您想要一个免费且功能强大的工具，我会推荐[Wix](http://wix.sourceforge.net/)，但是学习使用它可能需要一些时间。它最近推出了一项名为[Burn](http://robmensching.com/blog/posts/2010/9/6/Burn-baby.-Burn)的功能，可以满足您的需求。

对于付费且易于使用的工具，我推荐[Advanced Installer](http://www.advancedinstaller.com/download.html)。最便宜的专业版支持基于功能的先决条件，这是您所需要的。您可以在不超过 10 分钟的时间内构建完整的软件包。只需创建一个新的专业项目，在先决条件页面中添加您的 EXE 作为基于功能的先决条件，在文件和文件夹页面中添加您的其他应用程序文件，然后点击构建。您将获得一个安装资源的 MSI 包。但是，如果您想要自定义 UI 控件，例如新的复选框或新的 MSI 对话框，您将需要企业版。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T17:03:51.113

[NSIS](http://nsis.sourceforge.net/Main_Page)是一个标准的安装程序，您可以编写脚本来执行几乎所有操作，并且背后还有一个庞大的社区。它是开源的、快速的、可扩展的、轻量级的、功能强大的，而且完全免费。我会说它是中小型开发商店的行业标准（InstallShield 是大公司的标准，但即使现在也在改变）。

# file - How do I find out if a file name has any extension in Unix?

> ID：10773812
> 
> 赞同：3
> 
> 时间：2012-05-27T11:58:28.127
> 
> 标签：file, unix, sh, file-extension

I need to find out if a file or directory name contains any extension in Unix for a Bourne shell scripting.

The logic will be:

1.  If there is a file extension
2.  Remove the extension
3.  And use the file name without the extension

This is my first question in SO so will be great to hear from someone.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T12:08:07.953

扩展的概念没有像传统的 / 玩具 DOS 8+3 文件名那样严格定义。如果要查找包含点而不是第一个字符的文件名，请尝试此操作。

```
case $filename in
    [!.]*.*) filename=${filename%.*};;
esac 
```

如果有一个，这将修剪扩展名（根据上述定义，如果有几个，则从最后一个点开始）`$filename`，否则什么都没有。

如果您不处理名称可能以点开头的文件，`case`则多余的，因为如果没有点，分配也不会触及该值；但是通过这个腰带和吊带示例，您可以轻松选择您喜欢的方法，以防您需要以一种或另一种方式扩展它。

要同时处理有点的文件，只要它不是第一个字符（但如果第一个字符也是点也可以），请尝试使用 pattern `?*.*`。

`case` *表达式* `in` *模式* `)` *命令* 语法可能看起来很奇怪或可怕，`;; esac`但它非常通用，非常值得学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:16:16.843

我会使用与外壳无关的解决方案。通过以下方式运行名称：

```
cut -d . -f 1 
```

将为您提供直到第一个点的所有内容（'-d .' 设置分隔符，'-f 1' 选择第一个字段）。您可以使用参数（尝试'--complement'来反向选择）并获得几乎任何您想要的东西。

# javascript - 在 JSON 对象的顶部添加一些东西

> ID：10773813
> 
> 赞同：11
> 
> 时间：2012-05-27T11:58:32.710
> 
> 标签：javascript, jquery, json

我有一个在加载页面时启动的 JSON 对象，如下所示：

```
data[foo] = bar;
data[foo2] = bar2;
data[foo3] = bar3; 
```

有没有办法在第一个元素之前注入一个`foo`元素，以便在执行 a 时`for var i in data`，新元素将在对象启动时添加的元素之前循环遍历？

原因是，我正在向用户显示一些项目。当用户通过javascript添加一个新项目时，我希望这个新项目显示在所有现有项目之上，但是当我添加新项目时，即

```
data[newItem] = newItem; 
```

然后 JSON 对象如下所示：

```
data[foo] = bar;
data[foo2] = bar2;
data[foo3] = bar3;
data[newItem] = newItem; 
```

而不是我想要的，这是：

```
data[newItem] = newItem;
data[foo] = bar;
data[foo2] = bar2;
data[foo3] = bar3; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-27T12:03:17.797

在 JS 中，不保证对象属性的顺序。因此，即使它们在 JSON 字符串中是有序的，当被解析为 JS 对象时，你永远无法预测它们以什么顺序出现。

最好改用数组。您可以使用该`unshift()`方法将项目放在第一个索引中。

```
var data = [bar,bar2,bar3];

data.unshift(newItem);

//data = [newItem,bar,bar2,bar3]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-27T12:12:13.607

作为对[Joseph the Dreamer](https://stackoverflow.com/users/575527/joseph-the-dreamer)[回答](https://stackoverflow.com/a/10773845/405398)的补充，我在 Firefox 和 chrome 中进行了一些快速检查。

**火狐：**

```
var obj = {};

obj.a = 'a';
obj.c = 'c';
obj.b = 'b';
obj['0'] = '0';

for(var i in obj){
    console.log(i);
}

//prints:
a
c
b
0 
```

**铬合金：**

```
var obj = {};

obj.a = 'a';
obj.c = 'c';
obj.b = 'b';
obj['0'] = '0';

for(var i in obj){
    console.log(i);
}

//prints:
0
a
c
b 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-21T16:51:44.280

我偶然发现了这一点并使用以下方法实现了它：

`const newObject = Object.assign({first: value}, oldObject)`

如前所述，不能保证订单，但对我来说这已经足够了。:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-27T12:07:21.960

> 有没有办法在第一个 foo 元素之前注入一个元素？

数组中的第一个：

window.object 还是 window.alert？

两者都没有，对象没有顺序。如果你想要一个数组，请使用一个数组。对象不是数组。

如果你想

```
var ThingsInOrder = [
  FirstThing,
  SecondThing,
  ThirdThing
];
ThingsInOrder.push(ForthThing); 
```

使用数组。

如果你想：

```
var ThingsNeverInOrder = {
  Window,
  Alert,
  Derp,
  Herp
};

ThingsNeverInOrder.foo = bar; 
```

使用一个对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-11T06:34:43.460

Instead of adding new value in the same object, you can create a new object and arrange properties order as you want. example :

```
var objj1 = {name:'viru',lastname:'nehra'}; 
```

So create a new object with new property which you want on top:

```
var obj2 = {age: 21} 
```

and the run:

```
for(var key in objj1){
   obj2[key] = objj1[key]
}

obj2 = {age: 21, name: "viru", lastname: "nehra"} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-05-27T12:05:54.517

我认为您可以将其转换为字符串，将数据附加到字符串的开头，然后使用“eval”将字符串重新转换为 json

# javascript - MVC tricky issue with .js files

> ID：10773822
> 
> 赞同：0
> 
> 时间：2012-05-27T12:00:07.257
> 
> 标签：javascript, jquery, asp.net-mvc

In MVC there are 2 view say:

```
 View-A contains A.js which further contains function A()

  View-B contains B.js which further contains function B() 
```

Now I want to call `function A()` from `View-B's B.js` file

What i can`t do :-

```
 #1 I can`t embed A.js into View-B
     #2 I can`t embed A.js into _Layout.cshtml 
```

If this is possible then pls tell me how?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T12:23:07.387

您可以`getScript`在视图 B中使用

```
$.getScript('jsfile.js',function(){
  //call function A 
}); 
```

# javascript - Why doesn't this regular expression work the way I want it?

> ID：10773823
> 
> 赞同：0
> 
> 时间：2012-05-27T12:00:12.270
> 
> 标签：javascript, regex

I'm trying to make the regular expression find the numbers in a date string (eg, 04/05/1989). This is what I have:

`\A0[1-9]{2}\/0[1-9]{2}\/[1900-2012]\z`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T12:13:10.947

方括号创建一个*字符范围*，而不是数字范围：

*   `[A-Z]``A`匹配从到 的所有 ASCII 字符`Z`。
*   `[1900-2012]`匹配`1`, the `9`, the , and , the , the和`0`之间的 ASCII 字符范围。有效地相同可以表示为。`0``2``0``1``2``[0-29]`

在字符范围表达式中，字符的顺序并不重要。`[0815]`是一样的`[8510]`。因此`[1900]`与 相同`[019]`。

您想`(19[0-9]{2}|200[0-9]|201[0-2])`匹配正确的年份范围。或者，如果您只想匹配四位数字而不想要范围验证，您可以使用`([0-9]{4})`

月日相同。您可以通过范围验证来做到这一点，也可以通过匹配一位或两位数字来做到这一点。我推荐后者。

```
^([0-9]{1,2})/([0-9]{2})/([0-9]{4})$ 
```

尝试将结果转换为日期值。如果失败，则输入无效。如果成功，请检查结果日期是否在您所需的范围内。正则表达式是提供日期有效性检查的错误工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T12:18:00.353

我在这里回答了一个类似的问题：[How to parse a date in format "YYYYmmdd" in JavaScript?](https://stackoverflow.com/questions/10638529/how-to-parse-a-date-in-format-yyyymmdd-in-javascript/10638617#10638617) . 它只需要在提取部分进行一些修改。

**编辑：** 您可以这样修改该功能：

```
function parse(str) {    // str format: 'dd/mm/yyyy'
    var d = str.substr(0,2),
        m = parseInt(str.substr(3,2)) - 1,
        y = str.substr(6,4);
    var D = new Date(y,m,d);
    return (D.getFullYear() == y && D.getMonth() == m && D.getDate() == d) ? D : 'invalid date';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T14:35:06.973

```
(?<!\d)((0?\d)|([12]\d)|(3[01]))/((0?\d)|(1[0-2]))/((19)|(20))\d\d 
```

似乎在我所做的测试中有效。

```
(?<!\d)((((0?\d)|([12]\d)|(3[01]))/(((0?((1[02]?)|([3578]))))|(1[0-2])))|(((0?\d)|([12]\d))/(0?2))|(((0?\d)|([12]\d)|(30))/((0?[2469])|(11))))/((19)|(20))\d\d 
```

以前的正则表达式匹配无效日期，`31/02/2012`但这个似乎更规范一些。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-27T12:03:12.053

恕我直言，这将不匹配 valid`10/10/1989`但将匹配 invalid `099/0991989`。首先`0[1-9]{2}`匹配加上和`0`之间的两位数。也不是你想要的。`1``9``[1900-2012]`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-27T12:15:02.450

尝试这个

```
\A[0-9]{2}\/[0-9]{2}\/[1900-2012]\z 
```

它应该匹配 dd/mm/yyyy 格式的日期（1900 到 2012）

# c++ - Cloud service for applications?

> ID：10773825
> 
> 赞同：3
> 
> 时间：2012-05-27T12:00:38.487
> 
> 标签：c++, mobile, cloud, desktop

I want to make an application that has (preferably native) versions for multiple platforms (Windows, Mac, maybe Linux, iOS). By native I mean versions made independently with native tools (Visual Studio and maybe C# on Windows, Xcode and maybe Objective-C on Mac). I want that application to have cloud-stored user-based structural data (not much; maybe XML-based? I want to minimize the server-side part, because I'm not comfortable with it) so it would be an advantage if it could be easily accessible from different network libraries. I don't need any server-side data processing. I don't want to have to learn (I don't understand well any) any web technologies; I would simply need an interface for creating and managing users and data client-side using desktop programming languages and tools.

If I were only targeting Apple platforms, iCloud would be an option.

The best I've found is Appcelerator Cloud Services (http://www.appcelerator.com/cloud), but I'm looking for other solutions.

I have virtually no budget for the project; I'm a high-school student doing programming for fun and in order not to remain idle.

What are my options?

# java - What does the following method call statement mean in Java?

> ID：10773828
> 
> 赞同：3
> 
> 时间：2012-05-27T12:00:56.110
> 
> 标签：java, string

```
 StringBuilder str = new StringBuilder("Today");
    str.append(" is ").append("a").append(" sunny ").append(" day."); 
```

In the java code above, I understand that first I created an object of type StringBuilder. Then I used the object reference str to access the method append of the class StringBuilder. After this, I loose track. Is the method append used after str.append("is") inside the append method, or am I calling the same method in this class? Further, can anyone explain the flow of execution of the above statement. Which of the above append methods is executed first?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T12:02:55.427

方法的返回值`append`是`StringBuilder`对象本身。因此，您可以链接调用并向字符串添加更多字符。否则，代码将很难阅读，因为您必须每行都引用 StringBuilder 对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-27T12:04:00.993

`str.append(" is ")`返回 StringBuilder 本身。您正在对该方法返回的对象调用方法。这和做的一样

```
user.getAddress().getStreet().charAt(0); 
```

除了在您的代码中，每个`append()`方法调用都返回相同的对象，这允许将多个方法调用链接到同一个 StringBuilder。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T12:15:43.547

考虑看看[Builder Pattern](http://blog.naxos-software.com/index.php?/archives/79-Explaining-builder-pattern..html)（向下滚动到页面末尾）。基本上，对象总是返回自己，因此您可以链接许多命令。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T06:41:47.870

```
StringBuilder str = new StringBuilder("Today");
str.append(" is ").append("a").append(" sunny ").append(" day."); 
```

这里`str.append(" is ")`返回`StringBuilder`您再次调用 `append("a")`methnod 的对象。

`str.append(" is ").append("a")`再次返回`StringBuilder`参考，再次调用`append(" sunny ")`方法等等。

所以基本上你正在链接方法，就是这样。

# sql - 数据库表中的行数

> ID：10773835
> 
> 赞同：1
> 
> 时间：2012-05-27T12:01:48.140
> 
> 标签：sql, postgresql

我应该向数据库发送什么问题，以检查我的表包含多少行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T12:04:02.310

```
SELECT COUNT(*) FROM table_name; 
```

# php - gChartPHP 文档

> ID：10773836
> 
> 赞同：2
> 
> 时间：2012-05-27T12:02:12.333
> 
> 标签：php, char

我想使用 Google 图表 API - [gChartPHP](https://github.com/pacbard/gChartPhp)的 PHP 包装器。但是，无论我搜索文档多少时间，我都找不到它。里面有很多重要的话题。它隐藏在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T16:18:18.463

在其上安装并运行[phpdocumentor2](http://phpdoc.org/)。它将为您提供所有类以及您可以使用的所有方法的一个很好的概述。

或者，阅读源代码。

# javascript - 给定二维方向向量，如何计算沿 y 轴的旋转？

> ID：10773841
> 
> 赞同：1
> 
> 时间：2012-05-27T12:02:58.987
> 
> 标签：javascript, math, 3d, rotation, three.js

我正在制作 3D 游戏，我需要玩家网格始终面向相机背面。我已经想出了如何获得 2D 速度矢量（沿 xz 平面的方向），但现在我需要在速度矢量的方向上旋转网格......

基本上，每个网格都有一个`.rotation`属性，该属性是一个 3D 矢量。我只对 y 轴上的旋转感兴趣，即垂直于表面 (xz) 平面的旋转。

旋转不使用度数，而是弧度，所以我认为它会是这样的：

`mesh.rotation.y = (mesh.direction.x - mesh.direction.z)*Math.PI*2;`

但这似乎并没有削减它......

如前所述，方向/速度是一个二维向量，它由-1和1之间的实数组成。在任何时候`sqrt(x*x + y*y) == 1`，它都形成一个“圆”，这是因为速度需要在所有方向上都相等，明显地。

只有当我将鼠标拖到屏幕上时，速度矢量才会发生变化，旋转也会发生变化，它的计算方式如下：

```
var c = Math.sqrt(cameraPos.x*cameraPos.x + cameraPos.z*cameraPos.z); //This is the distance from the camera to the mesh, which is at (0, 0) for simplicity of this presentation.
var rat = 1/c;

mesh.direction.x = cameraPos.x*rat; //Direction vector = the speed vector
mesh.direction.z = cameraPos.z*rat; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:14:24.693

如果我理解正确，[`atan2`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/atan2)就会成功：

```
mesh.rotation.y = Math.atan2(mesh.direction.z, mesh.direction.x) 
```

结果以弧度为单位。它基本上计算向量和 X 轴之间的角度。您可能需要在这里或那里切换参数或使用减号运算符。

# r - 如何更改密度图（晶格）中的点颜色？

> ID：10773847
> 
> 赞同：0
> 
> 时间：2012-05-27T12:03:46.030
> 
> 标签：r

点，我的意思是密度图底部的点。此外，我想设置一些“抖动”的值，这样所有的点就不仅仅是在一条直线上，而是更“分散”在周围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T13:50:50.617

对于 lattice，查看帮助功能的面板版本通常会有所帮助`?panel.densityplot`，其中提到`jitter.amount`; 我承认偷看 panel.density 的来源，看到点是使用 panel.xyplot 绘制的，它有 argument `col.symbol`。所以

```
library(lattice)
x = rnorm(1000)
densityplot(x, jitter.amount=.02, col.symbol="red") 
```

# makefile - 为什么我不能在 GNU makefile 中定义后使用 '='？文档建议我可以

> ID：10773854
> 
> 赞同：2
> 
> 时间：2012-05-27T12:05:02.150
> 
> 标签：makefile, gnu-make

我正在尝试`define`在 GNU make 中使用。在这个测试 Makefile 上运行 make 会回显“dummy”：

```
define FOO =
$$(error foo $(1))
endef

$(eval $(call FOO,bar))

all:
    @echo dummy 
```

如果我删除`=`，那么它会`foo bar`按照我的意图出错。

GNU make 手册有所有使用等号形式的定义示例。为什么这对我来说似乎被忽略了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T12:40:02.583

`define`with assignment 是在 GNU Make 3.82 中引入的，很可能您使用的是旧版本。

但是，在最近的版本`define foo =`中与 plain 相同`define foo`，只需使用后者即可使其与 pre-3.82 版本一起使用。

# c# - 查找字符串中的各种数字

> ID：10773855
> 
> 赞同：0
> 
> 时间：2012-05-27T12:05:16.653
> 
> 标签：c#, string, numbers, replace

例如，字符串可以包含整数、浮点数和十六进制数。

“这个字符串可以有 -345 和 57，也可以有 35.4656 或微妙的 0xF46434 等等”

我可以用什么在 C# 中找到这些数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T12:12:58.807

使用这些方面的东西：（我自己写的，所以我不会说它对于您要查找的任何类型的数字都是包罗万象的，但它适用于您的示例）

```
var str = "123 This a string than can have -345 and 57 and could also have 35.4656 or a subtle 0XF46434 and more like -0xf46434";
var a = Regex.Matches(str, @"(?<=(^|[^a-zA-Z0-9_^]))(-?\d+(\.\d+)?|-?0[xX][0-9A-Fa-f]+)(?=([^a-zA-Z0-9_]|$))");
foreach (Match match in a)
{
    //do something
} 
```

正则表达式似乎是一种只写的语言，（即非常难以阅读）所以我将把它分解，以便你能理解：`(?<=(^|[^a-zA-Z0-9_^]))`是一种通过单词边界打破它的回顾。我不能使用`\b`，因为它考虑`-`了边界字符，所以它只会匹配`345`而不是`-345`. `-?\d+(\.\d+)?`匹配十进制数，可选负数，可选小数位数。 `-?0[xX][0-9A-Fa-f]+`匹配十六进制数，不区分大小写，可选负数。最后，`(?=([^a-zA-Z0-9_]|$))`是一个前瞻，再次作为一个词的边界。请注意，在第一个边界中，我允许字符串的开头，在这里我允许字符串的结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T12:13:59.037

只需尝试将每个单词解析为`double`和s 。`return``array``double`

这是从 a 获取s 的一种`array`方法：`double``string`

```
double[] GetNumbers(string str)
{
    double num;
    List<double> l = new List<double>();
    foreach (string s in str.Split(' '))
    {
        bool isNum = double.TryParse(s, out num);
        if (isNum)
        {
            l.Add(num);
        }
    }
    return l.ToArray();
} 
```

`double.TryParse()` [关于这里](http://msdn.microsoft.com/en-us/library/3s27fasw.aspx)的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T12:32:53.370

鉴于您在此表达式上方的输入匹配那里存在的每个数字

```
string line = "This a string than can have " + 
                      "-345 and 57 and could also have 35.4656 " +
                      "or a subtle 0xF46434 and more";

Regex r = new Regex(@"(-?0[Xx][A-Fa-f0-9]+|-?\d+\.\d+|-?\d+)");
var m = r.Matches(line);
foreach(Match h in m)
    Console.WriteLine(h.ToString()); 
```

编辑：对于替换，您使用采用 MatchEvaluator 重载的 Replace 方法

```
string result = r.Replace(line, new MatchEvaluator(replacementMethod));
public string replacementMethod(Match match)
{
   return "?????";
} 
```

解释正则表达式模式

首先，序列`"(pattern1|pattern2|pattern3)"`意味着我们可以在字符串中找到三种可能的模式。其中一个就足以匹配

第一种模式`-?0[Xx][A-Fa-f0-9]+`表示可选的减号，后跟零，后跟 X 或 x 字符，然后是 AF af 或 0-9 范围内的一系列一个或多个字符

第二种模式`-?\d+\.\d+`表示可选的减号，后跟一系列 1 或多个数字，后跟小数点，后跟一系列 1 或多个数字

第三种模式`-?\d+`表示可选的减号后跟一系列 1 个或多个数字。

模式的顺序至关重要。如果您反转模式并将整数匹配放在十进制模式之前，结果将是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T14:29:10.710

除了往往有其自身问题的正则表达式之外，您还可以构建一个状态机来进行处理。您可以决定机器将接受哪些输入作为“数字”。与正则表达式不同，状态机将具有可预测的良好性能，并且还会为您提供可预测的结果（而正则表达式有时可以匹配相当令人惊讶的事情）。

当您考虑时，这并不是那么困难。状态很少，您可以明确定义特殊情况。

编辑：以下是对评论的回应。
在 .NET 中，Regex 被实现为[NFA](http://msdn.microsoft.com/en-us/library/e347654k)（非确定性有限自动机）。一方面，它是一个非常强大的解析器，但另一方面，它有时可以[回溯](http://msdn.microsoft.com/en-us/library/gg578045.aspx)很多。当您接受不安全的输入（来自用户的输入，几乎可以是任何东西）时尤其如此。虽然我不确定您将使用哪种正则表达式来解析结果，但您几乎可以在任何事情上导致性能下降。尽管在大多数情况下性能不是问题，但正则表达式的性能可以随输入呈指数增长。这意味着，在某些情况下，它确实*可能*成为瓶颈。还有一个相当出乎意料的。

Regex 的贪婪特性导致的另一个潜在问题是，它有时会匹配意想不到的东西。您可能会使用相同的 Regex 表达式数天，它可能工作正常，等待被忽略的字符的正确组合被解析，并且您最终会将垃圾写入数据库。

* * *

通过状态机，我的意思是使用确定性有限自动机或类似的东西解析输入。我会告诉你我的意思。这是一个用于解析正十进制整数或字符串中的浮点数的小型[DFA 。](http://goo.gl/1guLB)我很确定您可以使用[ANTLR 之](http://www.antlr.org/works/index.html)类的框架构建 DFA ，尽管我敢肯定周围还有一些功能较弱的框架。

# java - P4Java 同步到头部修订

> ID：10773859
> 
> 赞同：1
> 
> 时间：2012-05-27T12:05:28.200
> 
> 标签：java, sync, revision, head, p4java

P4Java 中的 Sync API 非常简单，对吧？

client.sync(FileSpecBuilder.makeFileSpecList("//depot/test/..."), new SyncOptions(forcesync, false, false, false));

问题是，当“forcesync”为真时，它运行良好。但是，当它为 false 时，即使我在“//depot/test/...”之后添加“#head”，同步操作也不会获得最新版本。

你能帮我解决这个问题吗？

非常感谢，迈克尔

# php - 将非 unicode、非英语内容转换为 unicode

> ID：10773863
> 
> 赞同：3
> 
> 时间：2012-05-27T12:06:26.750
> 
> 标签：php, non-unicode

我有一个“xyz”语言的文本内容。

```
<p style="font-family:xyz;"> eWvS³: kmwkMnsâ kq¸Àt^mWmb KmeIvkn kocoknsâ aq¶mw]Xn¸v </p>
// It will not display correctly as font is not embedded. 
```

这里的字体 xyz (xyz.ttf) 是非 unicode。

现在我想将“XYZ”（xyz.ttf）字体文本转换为unicode“PQR”（pqr.ttf）字体

简单来说，一个非unicode中文（non_uni_chinese.ttf）转uniocode中文（uni_chinese.ttf）

我怎样才能使它成为可能使用 php。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T14:41:05.460

您必须“逐个字符”地执行此操作。

这意味着您必须将“非Unicode Chinese”字体中的每个字符都替换为Unicode 字体。我对中文不太了解，但是在越南，他们是这样使用的：

1.  用 Unicode 字体写一个包含“non-Unicode”字体的字符串，这些字符将无法正确显示。例如：Ñaây laø Tieáng Vieät <- 这是使用 Unicode 字体的非 Unicode 越南语书写。
2.  替换“逐个字符”。例如：Ñ = Đ；aa = a; aø = 2;...
3.  然后我们得到这个结果：Đây là Tiếng Việt。

当然我们不是一步一步来的，我们是用一个叫“Unikey”的软件来做的。

而且我确信有一个软件可以用中文做到这一点。这里的重点是你必须在 PHP 中再次“做”一次。

这里有一些可以帮助你的东西：[http ://www.pinyin.info/tools/converter/chars2uninumbers.html](http://www.pinyin.info/tools/converter/chars2uninumbers.html)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:12:27.933

生成的输出应使用一种编码。这不是正确的解决方案，但无论如何，要将字符串转换为不同的编码，您应该使用 iconv 函数[http://www.php.net/manual/en/function.iconv.php](http://www.php.net/manual/en/function.iconv.php)

# .htaccess - 使用 .htaccess 来阻止 Tor 服务器

> ID：10773871
> 
> 赞同：0
> 
> 时间：2012-05-27T12:07:44.847
> 
> 标签：.htaccess, ip, blocking, tor

我有很多 Tor 服务器，可能有 2,000 多台服务器，我想禁止在我的网站上注册帐户。阻止我在 .htaccess 文件中的整个列表是否可行，或者这是否会导致服务器速度变慢，就像在 iptables 中有数千个主机一样？

还有其他选择吗？我已经有验证码，但机器人不是问题。问题是用户使用 tor 来规避禁令。

# python - 使用 pygame 和 lambdas 实现撤消和重做

> ID：10773873
> 
> 赞同：1
> 
> 时间：2012-05-27T12:08:00.273
> 
> 标签：python, lambda, pygame, undo, redo

我正在尝试使用 lambda 在 pygame 应用程序中实现撤消和重做，但是与引用有关，或者我对实现的理解`list.remove()`导致我的程序崩溃。创建可撤消操作的代码如下

```
elif MOUSEBUTTONUP == event.type:
    x, y = pygame.mouse.get_pos()
    if leftClick:
        if len( objects ) > 0 and objects[ -1 ].is_open():
            actions.do( \
                [ lambda: objects[ -1 ].add( Point( x, y, 0 ) ) ], \
                [ lambda: objects[ -1 ].remove( Point( x, y, 0 ) ) ] \
            )
        else:
            actions.do( \
                [ lambda: objects.append( Polygon( ( 255, 255, 255 ) ).add( Point( x, y, 0 ) ) ) ],
                [ lambda: objects.pop() ] \
            ) 
```

其中 objects 是`Polygon`s 的列表，它们被定义为

```
class Polygon:
    def __init__( self, colour, width = 0 ):
        self._points = []
        self._colour = colour
        self._isopen = True
        self._width  = width

    def get_colour( self ):
        return self._colour

    def add( self, point ):
        self._points.append( point )
        return self

    def remove( self, point ):
        print "List contains " + str( self._points )
        print "Trying to remove " + str( point )
        self._points.remove( point )
        return self

    def num_points( self ):
        return len( self._points )

    def get_points( self ):
        """ Returns a copy of the points in this vector as a list. """
        return self._points[:]

    def open( self ):
        self._isopen = True
        return self

    def close( self ):
        self._isopen = False
        return self

    def is_open( self ):
        return self._isopen

    def set_width( self, width ):
        self._width = width
        return self

    def get_width( self ):
        return self._width

    def is_filled( self ):
        return self._filled 
```

添加的点定义为

```
class Point:
    def __init__( self, x, y, z ):
        self.x = x
        self.y = y
        self.z = z

    def rel_to( self, point ):
        x = self.move( point.z, point.x, self.z, self.x )
        y = self.move( point.z, point.y, self.z, self.y )
        return ( x, y )

    def move( self, viewer_d, displacement, object_d, object_h ):
        over  = object_h * viewer_d + object_d * displacement
        under = object_d + viewer_d + 1
        return over / under

    def __str__( self ):
        return "(%d, %d, %d)" % ( self.x, self.y, self.z )

    def __eq__( self, other ):
        return self.x == other.x and self.y == other.y and self.z == other.z

    def __ne__( self, other ):
        return not ( self == other ) 
```

`actions`，在第一个片段中，是 的一个实例`Action`，其定义如下

```
class Actions:
    #TODO implement immutability where possible
    def __init__( self ):
        self.undos = []
        self.redos = []

    def do( self, do_steps, undo_steps ):
        for do_step in do_steps:
            do_step()
        self.undos.append( ( do_steps, undo_steps ) )
        self.redos = []

    def can_undo( self ):
        return len( self.undos ) > 0

    def undo( self ):
        if self.can_undo():
            action = self.undos.pop()
            _, undo_steps = action
            for undo_step in undo_steps:
                undo_step()
            self.redos.append( action )

    def can_redo( self ):
        return len( self.redos ) > 0

    def redo( self ):
        if self.can_redo():
            action = self.redos.pop()
            redo_steps, _ = action
            for redo_step in redo_steps:
                redo_step()
            self.undos.append( action ) 
```

所以问题是，当我单击两次以上并尝试调用时，`actions.undo()`我得到一个异常`list.remove(x)`，它说`x`列表中不存在，我认为是因为它试图两次删除同一点。在前两次单击之前不会发生这种情况的原因是第一次撤消尝试删除最近的点，而第二次撤消只是将多边形从对象堆栈中弹出。我的问题是为什么即使第一个点应该从堆栈中弹出并推入堆栈，`Point`它也会尝试两次删除同一点？非常感谢您的任何反馈。`actions.undo()``self.undos``self.redos`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:21:14.087

我想我想通了，无论如何它都能按预期工作。我推断出的理论是 lambda 动作在`x`,`y`和参数`z`上创建闭包`Point()`，因此在创建匿名函数时不是复制这些变量的值，而是维护指向它们的值的指针。因此，我可以删除最近的点，如`x`，`y`并且`z`仍然引用现有点，但在第二次撤消时失败，因为该点不再存在。[我使用了http://stackp.online.fr/?cat=8](http://stackp.online.fr/?cat=8)上 stackp 的 undo/redo 教程中的一片叶子，并将参数作为列表传递给匿名函数`action.do()`，这意味着在`do()`函数执行，因此正确的参数被发送到`do()`. 对不起，很长的问题和答案。

# android - 按下按钮背景更改布局

> ID：10773876
> 
> 赞同：1
> 
> 时间：2012-05-27T12:08:29.187
> 
> 标签：android, button, statelistdrawable

我目前正在使用相机 api，并希望实现一个按钮，用于启动和停止视频录制。该按钮有四个不同的图像：video_start_default、video_start_pressed、video_stop_default 和 video_stop_pressed。它应该在按下时和开始/停止视频后改变其布局。

我为此创建了这个 xml 文件。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" > 
<item     
    android:state_selected="false" 
    android:state_pressed="false"   
    android:drawable="@drawable/video_start_default" /> 
<item    
    android:state_selected="false"   
    android:state_pressed="true" 
    android:drawable="@drawable/video_start_pressed" /> 
<item
    android:state_selected="true"     
    android:state_pressed="false"    
    android:drawable="@drawable/video_stop_default" /> 
<item
    android:state_selected="true"
    android:state_pressed="true"
    android:drawable="@drawable/video_stop_pressed" /> 
<item android:drawable="@drawable/video_default" /> 
</selector> 
```

为了在开始和停止工作之间进行更改，我在 onclicklistener 中设置了 select 属性

```
 if(videoButton.isSelected())
                videoButton.setSelected(false);
            else{
                videoButton.setSelected(true); 
            } 
```

基本上这行得通。

在按下 video_start_default 时，video_start_pressed 会正确显示，但问题是在释放 video_start_pressed 后，video_stop_pressed 会显示一毫秒而不是 video_stop_default。奇怪的是，单击 video_stop_pressed 后问题没有发生。这是 video_start_default 直接可见的。

我希望描述不会令人困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:38:39.453

我认为您必须制作两个选择器，一个用于播放状态，另一个用于暂停状态：

我有一个很好的教程给你，可以在你的项目中帮助你很多

你必须看到[这个](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/)链接。

![在此处输入图像描述](../Images/cd88ea4351c6314740cf7502076c6410.png)

干杯

# c# - 如何实现Since方法

> ID：10773877
> 
> 赞同：0
> 
> 时间：2012-05-27T12:08:45.083
> 
> 标签：c#, datetime, datetime-format

我正在寻找一种显示日期的方法，如stackoverflow

就像是 ：

*   **1小时前**
*   **2 分钟前**
*   **现在**

ETC...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T12:08:46.113

这是一种方法：

```
 static string GetPrettyDate(DateTime d)
    {
        // 1.
        // Get time span elapsed since the date.
        TimeSpan s = DateTime.Now.Subtract(d);

        // 2.
        // Get total number of days elapsed.
        int dayDiff = (int)s.TotalDays;

        // 3.
        // Get total number of seconds elapsed.
        int secDiff = (int)s.TotalSeconds;

        // 4.
        // Don't allow out of range values.
        if (dayDiff < 0 || dayDiff >= 31)
        {
            return null;
        }

        // 5.
        // Handle same-day times.
        if (dayDiff == 0)
        {
            // A.
            // Less than one minute ago.
            if (secDiff < 60)
            {
                return "just now";
            }
            // B.
            // Less than 2 minutes ago.
            if (secDiff < 120)
            {
                return "1 minute ago";
            }
            // C.
            // Less than one hour ago.
            if (secDiff < 3600)
            {
                return string.Format("{0} minutes ago",
                    Math.Floor((double)secDiff / 60));
            }
            // D.
            // Less than 2 hours ago.
            if (secDiff < 7200)
            {
                return "1 hour ago";
            }
            // E.
            // Less than one day ago.
            if (secDiff < 86400)
            {
                return string.Format("{0} hours ago",
                    Math.Floor((double)secDiff / 3600));
            }
        }
        // 6.
        // Handle previous days.
        if (dayDiff == 1)
        {
            return "yesterday";
        }
        if (dayDiff < 7)
        {
            return string.Format("{0} days ago",
            dayDiff);
        }
        if (dayDiff < 31)
        {
            return string.Format("{0} weeks ago",
            Math.Ceiling((double)dayDiff / 7));
        }
        return null;
    } 
```

来源： http: [//www.dotnetperls.com/pretty-date](http://www.dotnetperls.com/pretty-date)

# windows - 如何在 Windows 中创建 tar.gz 归档文件？

> ID：10773880
> 
> 赞同：58
> 
> 时间：2012-05-27T12:09:16.907
> 
> 标签：windows, gzip, cpanel, tar, 7zip

如何在 Windows 中创建我的文件的 tar.gz 存档以在 cPanel 中上传和提取？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-05-27T12:20:52.580

tar.gz 文件只是一个经过 gzip 压缩的 tar 文件。tar和**gzip****都可**用于 Windows。

 **如果您喜欢 GUI（图形用户界面），[7zip](http://www.7-zip.org/)可以使用 tar 和 gzip 打包。**

# c++ - Intellisense 突然停止工作或在 VS2008 中显示很多不一致

> ID：10773881
> 
> 赞同：1
> 
> 时间：2012-05-27T12:09:36.290
> 
> 标签：c++, visual-studio-2008, visual-c++, intellisense, visual-studio-2008-sp1

我正在使用 VS2008 进行 VC++ 编码。我观察到很多不一致（有时智能感知工作正常，有时它突然停止工作）wrt智能感知。

有时智能感知会突然停止。而且对于 VC++ 中的向量，我发现它根本不起作用。

我真的很讨厌 VS2008（我觉得 VS2005 与 VS2008 的用户界面相比简直太棒了）。VS 2008 太麻烦了。

任何人都可以帮助我摆脱这个错误并使智能感知工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T12:13:38.493

您可以删除 .ncb 文件以强制它重建智能感知，如果您想这样做，您必须关闭解决方案，删除后重新打开解决方案，或者您可以购买我在家和工作中使用的[Visual AssistX 。](http://www.wholetomato.com/)

另一件事是他们从 VS2010 开始重写了智能感知，因此它使用 SQL 来存储数据库并提高性能。

我知道这对你来说不是很舒服，但智能感知是出了名的烦人。

# php - asp.net 合并 & 压缩 css、js 文件

> ID：10773884
> 
> 赞同：0
> 
> 时间：2012-05-27T12:11:19.700
> 
> 标签：php, asp.net, css

我在 PHP 中有这段代码，用于组合和压缩 css 和 js 文件。

```
$css = '';
$files = explode(',',$_SERVER['QUERY_STRING']);
if( 'css' == $files[0] ){
    $type = 'css';
    $root = 'css/';
}else if( 'javascript' == $files[0] ){
    $type = 'js';
    $root = 'js/';
}
header("Content-type: text/$files[0]");
    ob_start("compress");
    function compress($buffer) {
    $buffer = preg_replace('!/\*[^*]*\*+([^/][^*]*\*+)*\/!', '', $buffer);
    $buffer = str_replace(array("\r\n", "\r", "\n", "\t", '  ', '    ', '    '), '', $buffer);
    return $buffer;
    }
if(sizeof($files))
{
  foreach($files as $file)
  {
    $css.= (is_file($root.$file.'.' . $type) ? file_get_contents($root.$file.'.' . $type) : '');
  }
}
echo $css; 
```

如何使用 asp.net 压缩和合并 css 和 js 文件

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:16:23.270

Hanselman 有一篇关于在 .NET 中执行此操作的[好帖子。](http://www.hanselman.com/blog/TheImportanceAndEaseOfMinifyingYourCSSAndJavaScriptAndOptimizingPNGsForYourBlogOrWebsite.aspx)

[最新版本的 .NET 允许您通过内置支持](http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx)轻松完成此操作。

以下是允许您执行此操作的其他工具的列表：

*   [合并和缩小](http://combineandminify.codeplex.com/)
*   [榨汁机](http://rejuice.me/)
*   [卡带](http://getcassette.net/)-[说明](http://tomphilip.me/index.php/cassette-the-javascript-css-minifying-combining-compressing-tool-for-asp-net/)
*   [自动缩小和合并](http://www.codeproject.com/Articles/33552/Automatically-Minify-Combine-Compress-and-Cache-js)
*   [梳子](http://combres.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T12:29:29.610

[我对Combres](http://combres.codeplex.com/)有过很好的体验。

它很容易设置，并且在过去 2 年中没有遇到任何重大问题。

# android - arm-eabi-gcc - cygwin

> ID：10773888
> 
> 赞同：0
> 
> 时间：2012-05-27T12:12:08.437
> 
> 标签：android, android-ndk, cygwin

我在 cygwin 应用程序下的 Windows 中工作。我正在尝试构建 ndk android 和 sip 库。我收到错误 arm-eabi-gcc 命令未找到。如何解决？谢谢

欣赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:31:44.967

右击我的电脑——

```
goto properties -> environment variable -> system variables -> path -> ;<cygwin path> 
```

然后再试一次。

# javascript - 使用 EaselJS 加载精灵表

> ID：10773896
> 
> 赞同：1
> 
> 时间：2012-05-27T12:13:15.930
> 
> 标签：javascript, sprite-sheet, easeljs

作为 EaselJS 的新手，我使用了与源 zip 文件打包在一起的“简单精灵表”示例中的代码。我试图让一个精灵表加载和播放，但只出现第一帧。

```
function init() {
    var stage = new Stage(document.getElementById("canvas"));
    var ss = new SpriteSheet({
        "frames": {
            "width": 159,
            "numFrames": 71,
            "regX": 0,
            "regY": 0,
            "height": 85
        },
        "animations":{
            "instance1": [0, 0], 
            "images": ["./assets/spritesheet.png"]
        });

    var animate = new BitmapAnimation(ss);
    animate.x = 0;
    animate.y = 0;

    ss.getAnimation("instance1").frequency = 2;
    ss.getAnimation("instance1").next = "instance1";
    animate.gotoAndPlay("instance1");

    stage.addChild(animate);
    Ticker.setFPS(60);
    Ticker.addListener(stage);
} 
```

我不认为我需要一个ticker函数，因为我没有注册任何事件，我只是从instance1开始播放，帧和画布的大小都相同，如果我`animate.gotoAndPlay("instance1");`用`animate.play("instance1");`, 但是循环播放动画。有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:44:52.667

我相信我在另一个网站上回答了这个问题。

问题是 spritesheet 格式错误。“animations”属性是一个包含命名动画的对象，带有开始和结束帧。在这个例子中，唯一动画的开始和结束帧是 [0,0]，并且“images”属性在动画对象内部。正确的格式可以在这里看到：

[https://github.com/CreateJS/EaselJS/blob/master/examples/SimpleSpriteSheet.html](https://github.com/CreateJS/EaselJS/blob/master/examples/SimpleSpriteSheet.html)

```
var ss = new SpriteSheet({
    "frames": {
        "width": 159,
        "numFrames": 71,
        "regX": 0,
        "regY": 0,
        "height": 85
    },
    "animations":{
        "instance1": [0, 25] // sample end frame is "25"
    },
    "images": ["./assets/spritesheet.png"]);
}); 
```

我希望这可以帮助其他有同样问题的人。干杯，

# ruby-on-rails-3 - Safari 无法获取 HEROKU 的 cookie

> ID：10773897
> 
> 赞同：2
> 
> 时间：2012-05-27T12:13:30.853
> 
> 标签：ruby-on-rails-3, heroku, safari

很抱歉，我无法提供太多信息，因为我完全不知道这个奇怪的问题。

我有一个由 rails 3.2.2 编写的 fb 画布应用程序。

我的本地机器（Mac OS X 10.7.4）没有任何问题。

当我将它部署到 heroku 时，它适用于 chrome 和 firefox。但是，当我使用 Safari 浏览它时，Safari 无法从 heroku 获取任何 cookie。（它在开发人员工具中显示“此站点没有 cookie”，但它在我的本地计算机上运行良好。）

我已经用谷歌搜索了这个问题，我得到了类似[this](http://viget.com/extend/rails-sessions-not-working-with-safari-a-solution)和[this](http://www.litespeedtech.com/support/forum/showthread.php?t=2037)的东西，但我认为这些不是我的情况。

有什么建议吗？

如果您需要有关我的代码的任何特定信息来解决此问题，请告诉我。

我会非常非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:01:59.420

我终于发现这是safari的安全设置问题。

由于fb canvas通过iframe获取heroku的内容，可能存在安全问题。如果我们将 safari 隐私设置的“阻止 cookie”从“来自第三方和广告商”（默认）降级为“从不”，一切正常！![设置示例](../Images/bebbb0e1559ee55c110ccdd2389ad507.png)

但是，我不认为要求用户降级他们的安全设置是一个好主意。我想知道是否有解决方案可以避免 safari 中的这种限制。

如果您有任何想法，请告诉我。非常感谢 ：）

# click - Ember js观察者问题

> ID：10773898
> 
> 赞同：1
> 
> 时间：2012-05-27T12:13:37.560
> 
> 标签：click, ember.js, radio, observers

单击 ember 收音机时，使用以下名为 bindingChanged 的​​函数观察单击的收音机。但是，一旦单击单选按钮，就不会观察到该值，因此不会命中 bindingChanged 方法。这在 ember 0.9.8 版本中可以正常工作。它不适用于最新的 ember 版本。知道为什么观察者没有按预期工作吗？

```
//valueBinding snippet
App.showSampleController = Ember.Object.create({
    content : App.CreateSampleModel.create()
});

App.CreateSampleModel= Ember.Object.extend({
    id :''
});

//View Template -->
App.sampleView = Em.View.extend({
    click:function(){
        App.showSampleController.set('content',App.CreateSampleModel.create({id:1})); 
    }
}); 
```

车把片段：

```
{{ view Ember.RadioButton group="default" name="sampleRadio"  option=content.id valueBinding="App.showSampleController.content.id" }} 
```

下面是单选按钮代码

```
Ember.RadioButton = Ember.View.extend({
    title: null,
    checked: false,
    group: "radio_button",
    disabled: false,
    customId:"open",

    classNames: ['ember-radio-button'],

    defaultTemplate: Ember.Handlebars.compile('<input type="radio" {{ bindAttr disabled="disabled" name="group" value="option" checked="checked" id="customId" }} />{{title}}'),

    bindingChanged: function(){
        if(this.get("option") == get(this, 'value')){
            this.set("checked", true);
            //invoking click when ember radio is accessed/checked/clicked!!
            this.$('input:radio').click();
        }
    }.observes("value"),

    change: function() {
        Ember.run.once(this, this._updateElementValue);
    },

    _updateElementValue: function() {
        var input = this.$('input:radio');
        set(this, 'value', input.attr('value'));
    }
}); 
```

这是一个 [原始小提琴](http://jsfiddle.net/craig/MBmUs/2/)，下面是另一个小提琴，您可以在下面的小提琴中看到错误。主要区别在于它有最新的余烬，它完全打破[了另一个小提琴](http://jsfiddle.net/MBmUs/193/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:45:00.983

模板中的视图上下文问题。你应该有你的模板

```
<label><input type="radio" {{ bindAttr disabled="view.disabled" name="view.group" value="view.option" checked="view.checked"}} />{{view.title}}</label> 
```

[这](http://jsfiddle.net/MBmUs/194/)是工作版本。[参考](http://emberjs.com/blog/2012/08/03/ember-1-0-prerelease/)这里

# php - Aptana PHP 自动完成错误

> ID：10773900
> 
> 赞同：0
> 
> 时间：2012-05-27T12:13:40.093
> 
> 标签：php, aptana3

我在 Aptana 3.1.1 中有一个非常严重的问题/错误。

如果我输入`__`，我会收到自动完成建议。如果我打字`function __`，我什么也得不到。请参阅随附的屏幕截图。

![Aptana 3 自动完成错误](../Images/84a91c5bfcb4dd745e9edd607b443423.png) 有任何想法吗？

# java - 重用与数据库的连接

> ID：10773901
> 
> 赞同：3
> 
> 时间：2012-05-27T12:13:46.000
> 
> 标签：java, database, jdbc, database-connection

直到现在，每当我查询数据库时，我都会打开一个与数据库的新连接。如何实现打开连接后可以重复使用的属性？

完成后，请告诉我是否可以泄漏资源。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T12:15:56.033

基本上你需要 JDBC 连接池，通常是实现[`DataSource`](http://docs.oracle.com/javase/7/docs/api/javax/sql/DataSource.html)接口。看看[dbcp](/questions/tagged/dbcp "显示标记为“dbcp”的问题")和[c3p0](/questions/tagged/c3p0 "显示标记为“c3p0”的问题")。您的容器/服务器可能已经提供了连接池的实现。

当您每次*打开*连接时都使用连接池时，您实际上是从池中获取一个连接（或者如果池为空则打开）。*关闭*连接时，实际上是返回到池中。只有当您忘记后者时，才会发生泄漏。~~（或忘记关闭`ResultSet`，`Statement`...）~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T12:17:15.390

您可以（并且应该）重用数据库连接。连接池是其中一种技术。可以在此处阅读有关连接池的详尽教程：http: [//java.sun.com/developer/onlineTraining/Programming/JDCBook/conpool.html](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/conpool.html)

# php - CloudFront 与 Elastic Beanstalk 结合用于动态应用程序？

> ID：10773907
> 
> 赞同：4
> 
> 时间：2012-05-27T12:15:34.347
> 
> 标签：php, amazon-web-services, amazon-cloudfront, amazon-elastic-beanstalk

我正在考虑结合 Elastic Beanstalk 应用程序将 CloudFront 用于动态内容。

我喜欢 Elastic Beanstalk 提供的功能（git 部署、自动容量配置、负载平衡、自动扩展和应用程序运行状况监控），我也喜欢 CloudFront 上周推出的新功能 ( [http://bitly.com/aws -cloudfront-dynamic](http://bitly.com/aws-cloudfront-dynamic)），所以我正在考虑在我的 Elastic Beanstalk 应用程序前面使用 CloudFront。

你认为呢？

这是一个好方法吗？（在这里看一个简单的图表：http: [//d.pr/i/f6sa](http://d.pr/i/f6sa)）

还是我应该使用普通的 EC2 实例和 LoadBalancer（也许使用 CloudFormation 设置）？

如果我将 CloudFront 与 Elastic Beanstalk 结合使用，我是否应该将 CloudFront 源指向 Beanstalk 为我的应用程序自动创建的 Elastic LoadBalancer（即：awseb-My-Environment-00000.us-east-1.elb.amazonaws.com）我相信如果环境失败并且它会自动创建一个新环境，它可能会发生变化，或者我应该将原点指向应该始终相同的应用程序 URL（即：http: [//myapp.elasticbeanstalk.com ）？](http://myapp.elasticbeanstalk.com)

欢迎推荐！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T18:31:25.780

尽管您的问题已经过时，但我想我会对您的解决方案发表评论，因为我相信您不需要在 Elastic Beanstalk 前面使用 Cloudfront，原因有两个。

1.  如前所述，您的网站是动态的。
2.  对您网站的任何更新都需要时间来更新到 CF POP

如果您需要速度，请使用[Cloudflare](http://www.cloudflare.com)作为反向代理，并确保您的 RDS 服务器与您的 EB 实例位于同一区域。您还可以将静态资产（即图像、css、js）存储在 S3 中并通过 CF 提供服务。

我对您的最终解决方案感兴趣，还是您完全放弃了它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:53:57.423

CF 绝对是要走的路，既可以作为 CDN，也可以作为反向代理。

我不确定它如何与 PHP 和 .NET（我是 Java Dino）一起工作，但如果您的环境倾向于失败，我建议您将零停机时间功能与双重环境结合起来

（在这些之间切换 DNS CNAME，可能是在发布时进行快速冒烟测试之后）以帮助您最大限度地减少对这些问题的影响，因此它只是一个流程问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-06T19:18:23.070

您可以使用 ebextensions 修改底层 CF 模板：[https ://docs.aws.amazon.com/elasticbeanstalk/latest/dg/ebextensions-otherkeys.html](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/ebextensions-otherkeys.html)

这是我看到这与 EB 一起正常工作的唯一方法，因为正如您所说，它动态创建 ELB - 手动指向其中一个将是一个坏主意。

我会尝试做的是查看是否可以在该模板中创建 CloudFront 分配并将其指向动态创建的 ELB - 不确定这是否可能。

也许亚马逊的人可以插话？

# ninject - 为从 ASP.NET MVC 和工作应用程序中使用 RabbitMQ 设计一个好的接口

> ID：10773910
> 
> 赞同：5
> 
> 时间：2012-05-27T12:15:49.680
> 
> 标签：ninject, rabbitmq, asp.net-mvc-4, appharbor, cloudamqp

在 AppHarbor 研究构建一个在 MVC4 上运行的 Web 应用程序。出于响应和性能的考虑，运行时间稍长的任务（通常是生成/发送电子邮件、调整图像大小、支付交易处理等）将通过将消息放在消息队列中来处理。

也会有一个或多个工作人员，在某个地方，将消息出列并处理任何需要处理的结果。中央队列机制是 RabbitMQ，特别是通过 AppHarbor 提供的托管 CloudAMQP 服务。从理论上讲，这种架构可以通过添加更多工作人员来实现“无限”可扩展性。

现在，为了良好的架构、可测试性等，我想将 RabbitMQ 放在一个或多个易于模拟的接口后面。在定义这些接口时，我需要考虑一些因素。

*   在我获得任何付费用户之前，我仅限于免费的 CloudAMQP 产品。这意味着最多三个同时连接。
*   鉴于前面的限制，我想尝试将自己限制为每个应用程序一个连接。一个用于 MVC 应用程序，每个工作人员一个。而已。
*   RabbitMQ 中的连接被设计为长期存在。尽管如此，许多示例显示了显式打开连接（然后是通道），发送消息，然后再次关闭它的代码。
*   对于多线程，可以使用相同的连接，但不能使用相同的通道。据我了解，可以在多线程应用程序中共享连接，然后打开多个通道，例如每个线程一个。
*   我的 MVC 应用程序通常只是一个发布者。工作者应用程序既是消费者又是发布者——例如，工作者可以接收处理付款的消息，这将导致它发布消息以调用电子邮件消息给用户，指示成功或失败。
*   对于 MVC 应用程序，连接通常只使用很短的时间 - 用于排队消息。
*   对于工人，我正在考虑长期运行的连接，或多或少地在工人的一生中永久开放。

好的，太好了，这就是很多东西。在这个项目之前没有任何使用 RabbitMQ 的经验，我被一些额外的要点困扰着。

*   接口隔离原则。我应该把它分成两个独立的接口——比如 IQueueServiceConsumer 和 IQueueServiceProducer——还是太过分了？我发现我总是可以使用 SRP 等将事物进一步划分为更多的原子单元，而且我不希望 Bob 叔叔追捕我（比接口名称中的 I 更多），但我想知道我必须走多远拿着这个。
*   鉴于我将只有一个网络服务器，至少一开始是这样，在网络应用程序中实际上与队列建立长期连接是否是一个想法？打开和关闭它们提供了同时发生多个的理论上的机会，这意味着冲突和潜在的信息丢失。消息丢失是不可接受的。
*   在这种情况下，我将如何处理连接的生命周期？在我的 Ninject 模块中打开它（我的接口实际上绑定到特定于 RabbitMQ 的实现），并在应用程序被回收时以某种方式断开它...回收？我怎么能做那样的事情？
*   对于工人来说，生活似乎更轻松了。在接口上放置一个方法来打开连接，然后为线程提供通道以获取消息。通过适当地调用 CloseConnection 来确保应用程序运行良好。或者实现 IDisposable。
*   有一个机会——无论多么小——RabbitMQ 将来可能会被其他东西取代，因此我不希望我的接口过于特定于那个特定的服务总线（从某种意义上说，这就是我使用它的方式）执行。

在构建类似的应用程序时，其他人是否已经经历过同样的挑战？您对消息队列接口的架构和实际实现有什么建议吗？我只是对此感到神经质还是我的担忧值得承认？

如果重要的话，我当前的消息传递需求由单向消息覆盖，除了在处理完成后确认收到的消息之外不需要任何响应。

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:09:04.200

您也可以使用[NServiceBus](http://www.nservicebus.com)但需要挂钩 RabbitMq 传输。[传输](http://code.google.com/p/nservicebusrabbitmq/)当前未更新到 NSB 3.2，但这将是一个很好的练习，也是您身边的社区支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:06:27.723

[Masstransit](http://masstransit-project.com/)将为您完成所有这些工作。要么使用 MT，要么看看他们[做了什么](https://github.com/MassTransit/MassTransit)

# c# - 如何在更新面板中调用特定按钮的事件？

> ID：10773914
> 
> 赞同：0
> 
> 时间：2012-05-27T12:16:32.017
> 
> 标签：c#, asp.net, ajax, events, updatepanel

我有以下情况：

具有`updatepanel`以下触发器：

```
<Triggers>
<asp:AsyncPostBackTrigger ControlID="lbtn_addApp" EventName="Click" />
<asp:PostBackTrigger ControlID="btn_agree" />
<asp:PostBackTrigger ControlID="btn_disagree" />
</Triggers> 
```

* * *

现在我想触发点击事件，`btn_disagree`所以我这样做：

```
 protected void btn_submit_Click(object sender, EventArgs e)
    {
       btn_disagree_Click(null, null);
    } 
```

* * *

**注意**：`btn_submit`在更新面板中

但是当我调用点击事件时，它不会生成 postbak ！

我如何用回发行为调用`btn_disagree`事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:38:45.417

在哪里`btn_submit`？

根据您的标记，单击`btn_disagree`应该会导致标准回发。但是根据您的代码，您没有单击`btn_disagree`. 您正在单击`btn_submit`未在触发器中列出的名为 的内容。

如果`btn_submit`也是 the 的一部分，`UpdatePanel`并且您还想`btn_submit`引起回发，则需要`PostBackTrigger`为它包含一个。否则它将使用 an 的默认行为`UpdatePanel`并异步调用服务器。

顺便说一句，这段代码需要一点重构：

```
protected void btn_submit_Click(object sender, EventArgs e)
{
    btn_disagree_Click(null, null);
} 
```

您应该避免直接调用事件处理程序。它们旨在响应 UI 事件。直接调用它们（并传递`null`s 等）会带来非常混乱的体验，并且只是在询问错误和奇怪的行为。

这段代码对我的暗示是，其中有重要的业务逻辑`btn_disagree_Click`需要从`btn_submit_Click`. 该业务逻辑应该完全重构为另一种方法。然后两个事件处理程序可以简单地调用该方法，而不是尝试相互调用。

让处理程序只处理 UI 事件并直接控制业务逻辑。将业务逻辑与 UI 代码分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:30:47.707

```
 </ContentTemplate>
   <Triggers>  
   <asp:AsyncPostBackTrigger ControlID="Submit_But" EventName="click" />  
   </Triggers>  
   </asp:UpdatePanel> 
```

# facebook - 我可以将现有的 Facebook 页面链接到 Facebook 应用吗

> ID：10773915
> 
> 赞同：3
> 
> 时间：2012-05-27T12:16:37.543
> 
> 标签：facebook

我需要知道是否可以将现有的 facebook 页面（类别：应用程序页面）链接到 facebook 应用程序？当我去 facebook 应用程序设置时，他们建议创建一个新页面。但我所需要的只是链接到现有的，这可能吗？

谢谢您的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:44:55.937

不，这是不可能的。您需要创建一个新的。曾经有一个迁移时间段[http://developers.facebook.com/blog/post/611/](http://developers.facebook.com/blog/post/611/)但这已经过去了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:06:38.967

应用配置页面 -> 页面迁移从 2011 年 12 月 10 日到 2012 年 2 月 7 日期间可用，并在迁移期间通过多[篇博客文章](http://developers.facebook.com/blog/post/611/)和所有应用配置页面顶部的消息公布。

几个月后删除了执行此操作的工具；如果您想创建一个新页面并将其链接到应用程序，您可以从应用程序设置中的高级选项卡上执行此操作：

![在此处输入图像描述](../Images/9d1b866480cb8d85da4a6e7e188efa75.png)

如果您将页面类别保留为“应用”，则该页面上会出现“转到应用”/“玩游戏”链接，但无法将现有应用链接到现有页面；它必须通过应用程序设置界面作为新页面完成

# php - 如何修改 htaccess 以管理对 codeigniter 和 wordpress 的请求

> ID：10773921
> 
> 赞同：1
> 
> 时间：2012-05-27T12:17:35.947
> 
> 标签：php, .htaccess, codeigniter

我已经在根文件夹中安装了 CodeIgniter。现在我想连同它一起安装wordpress。我在一个名为 blog 的文件夹中安装了 wordpress。如果我输入 url www.example.com/blog 然后我可以看到 wordpress 博客的主页。但如果我点击这篇文章，我就会进入 codeigniter，说找不到页面。

我在 htaccess 中写了以下内容

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

请告诉我如何进行。我是否必须修改 htaccess 或必须从 codeigniter 中的路由文件路由请求。

请帮我。非常感谢。

# subdomain - 在 DiscountAsp 主机（godaddt）上在 c# 中创建子域

> ID：10773922
> 
> 赞同：0
> 
> 时间：2012-05-27T12:17:43.063
> 
> 标签：subdomain, discountasp

我有一个网站，我想创建一个界面，用户可以在我的主机上创建他的网站。它应该是我的域的子域。我的主机是 DiscountAsp.Net 或 Godadday。我刚读过，他们为此提供了名为 Unlimited Subdomain 的附加组件。他们有如何重定向的代码是链接 [http://support.discountasp.net/KB/a369/如何将子域重定向到子目录.aspx?KBSearchID=389848](http://support.discountasp.net/KB/a369/how-to-redirect-a-subdomain-to-a-subdirectory.aspx?KBSearchID=389848)

现在可以在 C# 中使用吗？如何以编程方式在 asp.net 中为所有用户创建具有示例模板的子域？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:32:41.037

您可以将此代码添加到您的 CS 文件中，在 Page_Load 方法中

```
if (Request.ServerVariables["SERVER_NAME"] == "test.yourdomain.com")
    Server.Transfer(@"~/Test/Default.html"); 
```

不要忘记添加 Test 文件夹并将其标记为 Web 应用程序工具中的应用程序

# javascript - Javascript detachEvent，附加了一个 $.proxy 函数

> ID：10773923
> 
> 赞同：3
> 
> 时间：2012-05-27T12:17:47.830
> 
> 标签：javascript, internet-explorer

我正在尝试在表单集中制作 Django 表单，当最后一个表单获得一些输入时，它会自动在其末尾添加一个新表单。我在这个js中使用输入检测： [http ://whattheheadsaid.com/2010/09/effectively-detecting-user-input-in-javascript](http://whattheheadsaid.com/2010/09/effectively-detecting-user-input-in-javascript)

我在这里的内容在 Firefox 中运行良好，我假设任何其他支持 addEventListener 和 removeEventListener 的浏览器。我不明白如何正确地将 detachEvent 设置为 IE 后备？我对javascript并不是很了解，只是想把东西拼凑在一起。

```
jQuery.fn.cloneOnInput = function(prefix){
    return this.each(function() {
        var trElement = this
        var inputElements = $(this).find('input')
        var cloneForm = function() {
            cloneMore(trElement, prefix);
            inputElements.each(function(index) {
                if ("onpropertychange" in this) {
                    // What here?
                    }
                else {
                    this.removeEventListener("input", cloneForm);
                    }
                });
            };
        inputElements.each(function(index) {
            // Do I have to change the way it attaches?
            if ("onpropertychange" in this) { 
                this.attachEvent($.proxy(function () {
                if (event.propertyName == "value")
                    cloneForm();
                }, this));}
            else {
                this.addEventListener("input", cloneForm, false);
              }
        });

    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:28:17.083

您必须跟踪代理处理程序以便以后将其删除。由于处理程序与 DOM 元素相关联，因此您可以使用[data()](http://api.jquery.com/data/)来实现：

```
jQuery.fn.cloneOnInput = function(prefix) {
    return this.each(function() {
        var trElement = this;
        var inputElements = $(this).find("input");
        var cloneForm = function() {
            cloneMore(trElement, prefix);
            inputElements.each(function() {
                if ("onpropertychange" in this) {
                    this.detachEvent("onpropertychange",
                        $(this).data("proxiedHandler"));
                    $(this).removeData("proxiedHandler");
                } else {
                    this.removeEventListener("input", cloneForm);
                }
            });
        };
        inputElements.each(function(index) {
            // Do I have to change the way it attaches?
            if ("onpropertychange" in this) {
                var proxiedHandler = $.proxy(function() {
                    if (event.propertyName == "value") {
                        cloneForm();
                    }
                }, this);
                $(this).data("proxiedHandler", proxiedHandler);
                this.attachEvent("onpropertychange", proxiedHandler);
            } else {
                this.addEventListener("input", cloneForm, false);
            }
        });
    });
}; 
```

# php - 无效的属性 ID

> ID：10773925
> 
> 赞同：0
> 
> 时间：2012-05-27T12:18:09.300
> 
> 标签：php, javascript, json

当我在 javascript 函数中插入数组并且单击 javascript 错误控制台中的链接时，我遇到了一个问题：Invalid property id。那是我的代码：

```
<a href="javascript:;" onclick="test(<?php echo json_encode($myArray); ?>)">test</a> 
```

有人能告诉我如何解决这个问题吗？

测试功能：

```
function (arr) {
    var jArray = arr;
    for (var i = 0; i < 4; i++) {
        document.write(jArray[i]['message'] + "<br/>");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T12:45:09.723

是否`$myArray`包含字符串数据？如果是这样，该`json_encode`函数虽然不区分上下文，但会打印双引号，以结束`onclick`属性值。您可以通过使用单引号而不是双引号来修复它，`onclick`或者（更好的解决方案）使用 PHP function `htmlspecialchars`。

`<a href="javascript:;" onclick="test(<?php echo htmlspecialchars(json_encode($myArray)); ?>)">test</a>`

# c++ - ZLIB 解压缩

> ID：10773926
> 
> 赞同：0
> 
> 时间：2012-05-27T12:18:41.327
> 
> 标签：c++, winapi, compression, zlib

我编写了一个小应用程序，它应该解压缩以 gzip/deflate 格式编码的数据。

为了做到这一点，我正在使用 ZLIB 库，使用 uncompress 函数。

问题是该功能不起作用！换句话说，数据不是未压缩的！

我在这里发布代码：

```
int (*decompress)(PBYTE,PULONG,PBYTE,ULONG);

void DecodeData(PBYTE data,ULONG dataSize){
  LoadLibrary("C:\\zlib1.dll");

  decompress=(int(*)(PBYTE,PULONG,PBYTE,ULONG))GetProcAddress(
    GetModuleHandle("zlib1.dll"),"uncompress");

  // Yeah I know the size is hardcoded and it's not right, but it's just a test,
  // so nevermind

  PBYTE decompressedData=(PBYTE)VirtualAlloc(NULL,300,MEM_COMMIT|MEM_RESERVE,
    PAGE_EXECUTE_READWRITE);
  ULONG maxSize=250;

  decompress(decompressedData,&maxSize,data,dataSize);

  MessageBox(0,(char*)decompressedData,0,MB_OK);//MessageBox shows no data, it's blank!
} 
```

GetProcAddress 成功获取了指向函数的指针，问题是函数返回 NULL（甚至没有 zlib 文档中列出的错误）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T15:26:55.683

该`uncompress()`函数不会解压缩 gzip 数据，并且取决于“deflate”的含义，它也可能不会解压缩。

您指的是三种可能的格式，它们是实际的压缩数据，可能带有一些短的标头和尾标，以识别流并在最后提供一些检查数据。如[RFC 1951](https://www.rfc-editor.org/rfc/rfc1951)所述，有原始的放气数据。[RFC 1950](https://www.rfc-editor.org/rfc/rfc1950)定义了 zlib 包装的放气数据。有 gzip 包装的放气数据，由[RFC 1952](https://www.rfc-editor.org/rfc/rfc1952)定义。

`uncompress()`只会解压缩 zlib 包装的 deflate 数据。它不会解压缩 gzip 包装的数据或原始 deflate 数据。

您没有为您尝试做的事情提供上下文。但是，当您说“gzip/deflate”时，我可能会猜到您指的是 HTTP 内容编码选项的名称。在这种情况下，由于名称选择不当，“deflate”内容编码指的是 zlib 包装的 deflate 数据，而不是原始数据。 `uncompress()`将解压缩正确传递的 HTTP deflate 内容编码数据。

我说“正确交付”，因为它可能不是。再次由于不幸的名称选择，以及 Microsoft 程序员无法实际阅读 HTTP 规范，当客户端接受 deflate 内容编码时，IIS 服务器将错误地传递原始 deflate 数据而不是 zlib 包装的数据。这导致客户端必须尝试以两种方式解码 deflate 内容编码并查看其中一种是否有效，或者更好的方法是首先根本不接受 deflate 编码。如果客户端只接受 gzip 内容编码，那么没有问题。

您可以使用zlib 的`inflateInit2()`、`inflate()`和`inflateEnd()`函数来解码提到的任何格式，即 gzip-wrapped、zlib-wrapped 和 raw。请阅读文档[`zlib.h`](https://github.com/madler/zlib/blob/30a1c7065dc1dc2c2ed68ed403792b660bfdd805/zlib.h)以了解如何操作。

顺便说一句，该`uncompress()`函数返回一个整数，而不是指针。所以当你说函数返回`NULL`而不是它应该返回的时候，我只能假设该[zlib](http://zlib.net/)函数的接口没有正确定义。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-27T12:57:32.387

为什么在您的 GetProcAddress 中使用“解压缩”，但尝试解压缩？您获得了“解压缩”程序的地址！！！

# c# - 绝对路径目录是在使用 ASP.NET 的 zip 文件下载应用程序期间创建的

> ID：10773930
> 
> 赞同：1
> 
> 时间：2012-05-27T12:20:08.367
> 
> 标签：c#, asp.net, .net, sharpziplib

使用[这个](http://forums.asp.net/t/1193746.aspx)我已经编写了代码来首先创建一个 zip 文件夹，然后在用户单击下载所有按钮时下载 zip 文件。它工作正常。但是当用户提取该 zip 文件 H:/abd/zyc/questionpapers/papername/questionpaper.pdf （绝对路径）时。但我想要的是当用户提取 zip 文件时，用户必须只获取文件名文件夹而不是其他文件夹。请帮我解决这个问题。

这是我的代码。

```
protected void Page_Load(object sender, EventArgs e)
{
    StartZip(Request.QueryString["path"].ToString(), Request.QueryString["fname"].ToString());
    fileDownload(Request.QueryString["fname"].ToString(), Server.MapPath(Request.QueryString["fname"].ToString()));
}

public void StartZip(string directory, string zipfile_path)
    {
        // the directory you need to zip 
        string[] filenames = Directory.GetFiles(directory);
        // path which the zip file built in 
        ZipOutputStream s = new ZipOutputStream(File.Create(zipfile_path));

        foreach (string filename in filenames)
        {
            FileStream fs = File.OpenRead(filename);
            byte[] buffer = new byte[fs.Length];

            fs.Read(buffer, 0, buffer.Length);
            ZipEntry entry = new ZipEntry(filename);
            s.PutNextEntry(entry);
            s.Write(buffer, 0, buffer.Length);
            fs.Close();

        }
        s.SetLevel(5);
        s.Finish();
        s.Close();
    }
    private void fileDownload(string fileName, string fileUrl)
    {
        Page.Response.Clear();
        bool success = ResponseFile(Page.Request, Page.Response, fileName, fileUrl, 1024000);
        if (!success)
            Response.Write("Downloading Error!");
        Page.Response.End();

    }
    public static bool ResponseFile(HttpRequest _Request, HttpResponse _Response, string _fileName, string _fullPath, long _speed)
    {
        try
        {
            FileStream myFile = new FileStream(_fullPath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
            BinaryReader br = new BinaryReader(myFile);
            try
            {
                _Response.AddHeader("Accept-Ranges", "bytes");
                _Response.Buffer = false;
                long fileLength = myFile.Length;
                long startBytes = 0;

                int pack = 10240; //10K bytes
                int sleep = (int)Math.Floor((double)(1000 * pack / _speed)) + 1;
                if (_Request.Headers["Range"] != null)
                {
                    _Response.StatusCode = 206;
                    string[] range = _Request.Headers["Range"].Split(new char[] { '=', '-' });
                    startBytes = Convert.ToInt64(range[1]);
                }
                _Response.AddHeader("Content-Length", (fileLength - startBytes).ToString());
                if (startBytes != 0)
                {
                    _Response.AddHeader("Content-Range", string.Format(" bytes {0}-{1}/{2}", startBytes, fileLength - 1, fileLength));
                }
                _Response.AddHeader("Connection", "Keep-Alive");
                _Response.ContentType = "application/octet-stream";
                _Response.AddHeader("Content-Disposition", "attachment;filename=" + HttpUtility.UrlEncode(_fileName, System.Text.Encoding.UTF8));

                br.BaseStream.Seek(startBytes, SeekOrigin.Begin);
                int maxCount = (int)Math.Floor((double)((fileLength - startBytes) / pack)) + 1;

                for (int i = 0; i < maxCount; i++)
                {
                    if (_Response.IsClientConnected)
                    {
                        _Response.BinaryWrite(br.ReadBytes(pack));
                        Thread.Sleep(sleep);
                    }
                    else
                    {
                        i = maxCount;
                    }
                }
            }
            catch
            {
                return false;
            }
            finally
            {
                br.Close();
                myFile.Close();
            }
        }
        catch
        {
            return false;
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:28:59.377

这应该工作...

```
ZipEntry entry = new ZipEntry(Path.GetFileName(filename)); // just the file name 
```

# objective-c - 自动释放：必须[保留]成员变量？

> ID：10773932
> 
> 赞同：0
> 
> 时间：2012-05-27T12:20:51.467
> 
> 标签：objective-c, memory-management, retain, autorelease

假设我有一`BasicEngine`堂课：

```
@interface BasicEngine : GfxEngine{

    NSMutableDictionary *keyNodes;
    AbstractVirtualJoystick *input0;
} 
```

相关实现如下：

```
@implementation BasicEngine
- (id)init {

    if ( (self = [super init]) ) {

        keyNodes = [NSMutableDictionary dictionary];
    }
    return self;
} 
```

我的理解是调用`[ dictionary]`返回一个自动释放的对象。但是，只要`BasicEngine`实例可用，该字典就应该保存在内存中。

我意识到我错过了一些东西，因为它`keyNodes`很快就变成了一个`nil`对象。`[keyNodes retain]`在方法中使用`init`只是有帮助，但我不明白为什么需要保留类成员。

请帮助我理解这一点:-) 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:24:20.860

`retain`意味着保留人对保留人的所有权。由于`keyNodes`是类成员，您的引擎“拥有”它，因此应该`retain`使用它。

底层`retain`是增加对 的引用计数`keyNodes`，这向系统发出信号，表明又有一个对象有兴趣将任何`keyNodes`指向的对象保留在内存中。同样，您应该在您的方法中调用`release`，`keyNodes`这`dealloc`将减少保留计数，因为您的引擎不再“拥有” `keyNodes`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:29:38.970

如果您想维护`keyNodes`对象直到`BasicEngine`可用，您还可以使用单例模式实现使其成为静态。

另见：http: [//xperienced.com.pl/blog/3-ways-to-implement-singleton-pattern-in-objective-c](http://xperienced.com.pl/blog/3-ways-to-implement-singleton-pattern-in-objective-c)

# javascript - 与 iFrame 内容通信

> ID：10773936
> 
> 赞同：1
> 
> 时间：2012-05-27T12:20:59.960
> 
> 标签：javascript, jquery

有一个 iFrame 包含整个文档`(<html> to </html>)`。该文档`script`也包含一些标签。我的问题是，我们可以调用 iFrame 中存在的脚本的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:26:53.573

如果`iframe`导航同一个域，那么您可以使用以下内容：

```
var result = document.getElementById("frame").contentWindow.func(args);
console.log(result); 
```

**演示：http:** [//jsfiddle.net/Mnt3e/](http://jsfiddle.net/Mnt3e/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:24:28.883

您可以通过 contentDocument 属性访问 iframe 的内容，但前提是它属于同一域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T12:43:44.827

如果框架来自不同的域，并且可以控制源代码，则可以使用[`postMessage`](https://developer.mozilla.org/en/DOM/window.postMessage)框架/文档之间进行通信。

对于浏览器支持，这里有一些信息[，](https://stackoverflow.com/questions/6036418/what-browsers-support-the-window-postmessage-call-now)我们确实有一个[jquery 插件](http://benalman.com/projects/jquery-postmessage-plugin/)，它为不支持的浏览器提供了备用`postMessage`。

# c# - 将变量添加到数组/列表而不实例化

> ID：10773939
> 
> 赞同：0
> 
> 时间：2012-05-27T12:21:14.087
> 
> 标签：c#, instance-variables, instances

我正在创建一个吉他标签程序。

您选择音符（游戏对象），输入和弦名称（字符串），然后按下按钮将“和弦”添加到列表中。

Chord 类只是一个字符串和一个游戏对象列表。我使用 currentChord 来保存当前的选择/名称。

当我选择一个音符时，我将它添加到 currentChord.selectedList。

当我输入一个名字时，我将其设为 currentChord.name。

```
Chord currentChord;
List<Chord> allChords; 
```

当我单击一个按钮时，currentChord 被添加到 allChords (allChords.Add(currentChord))。

问题是它是实例化的。因此，当我单击添加不同的选择/名称时，allChords.notes 列表中所有内容的选择都会更改...

我必须使用“新”关键字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T12:25:56.587

是的，您必须使用`new`关键字。

您一遍又一遍地将同一个实例添加到列表中，因此您最终会得到一个对同一实例的引用列表。

从数据中创建一个新实例`currentChord`以添加到列表中，或者将实例添加`currentChord`到列表中，然后创建一个新实例并分配给`currentChord`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T12:33:06.410

您可能还需要考虑可用于定义的`struct`和关键字之间的区别。using将提供值类型的行为， where将提供引用类型的行为。`class``Chord``struct``class`

例如，这是值类型的行为：

```
struct Chord
{
    public string Name;
}

...

Chord cMajor = new Chord;
cMajor.Name = "C Major";
Chord cMinor = cMajor; // Make a copy of the Chord instance
cMinor.Name = "C Minor";

Assert.That(cMajor.Name, Is.EqualTo("C Major")); // Assertion succeeds 
```

这是引用类型的行为：

```
class Chord
{
    public string Name;
}

...

Chord cMajor = new Chord;
cMajor.Name = "C Major";
Chord cMinor = cMajor; // No copy of the Chord instance, just another reference
cMinor.Name = "C Minor";

Assert.That(cMajor.Name, Is.EqualTo("C Major")); // Assertion fails
Assert.That(cMajor.Name, Is.EqualTo("C Minor")); // Assertion succeeds 
```

MSDN 提供了一个很好的描述： http: [//msdn.microsoft.com/en-us/library/aa288471 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288471(v=vs.71).aspx)

# php - 如何建立与 MySql Server 的连接？

> ID：10773940
> 
> 赞同：0
> 
> 时间：2012-05-27T12:21:36.363
> 
> 标签：php, mysql

我想与 MySql 服务器建立连接。

我的 PHP 代码是：

```
<?php
$dbhost = 'testhost.com';
$dbuser = 'testuser';
$dbpass = 'testpass';
$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die        
('Error connecting to mysql');
$dbname = 'testdb';
mysql_select_db($dbname);
?> 
```

但它显示以下错误：

警告：mysql_connect() [function.mysql-connect]：在“读取初始通信数据包”时丢失与 MySQL 服务器的连接，系统错误：第 6 行的 F:\xampp\htdocs\db_connect123.php 中的 0 连接到 mysql 时出错

在这种情况下，我完全感到困惑，因为如果我更改主机名，它在 localhost 中可以正常工作。请给我一个解决方案，我该如何解决这个问题并连接到 MySql 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T14:12:48.640

确保 my.ini 不是：

```
bind-address = 127.0.0.1
port = 3306 
```

相反，它应该是：

```
bind-address = 0.0.0.0
port = 2083 
```

确保您的用户 'carefre2_polash' 在 MySQL 下有一个 Host 字段为“%”（表示任何主机）。

如果这是在 Windows 上运行的 MySQL，请将本机 Windows 防火墙配置为接受上述端口号上的传入 TCP。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T12:27:47.977

请使用此代码，它是一个标准的 SQL 连接代码：

```
$link = mysql_connect('xhost', 'xuser_name', 'xpassword');
if (!$link) {
    die('Connect Error : ' . mysql_error()); 
}
mysql_set_charset('utf8', $link); // Encoding
$db_selected = mysql_selectdb('x_database', $link);
if (!$db_selected) {
    die ('DBselect Error : ' . mysql_error());
} 
```

祝你好运，祝你有美好的一天。

# css - 不应用使用默认 GWT CSS 类名的 UiBinder 内联样式

> ID：10773943
> 
> 赞同：5
> 
> 时间：2012-05-27T12:22:57.050
> 
> 标签：css, gwt, uibinder

我将 GWT 与 UiBinder 一起使用，但不知何故无法让默认的 CSS 样式规则正常工作。到目前为止，我已经通过分配自定义 CSS 类名称成功地设置了组件的样式，如下所示：

```
<ui:style>
    .createButton {
        background-color: red;
    }
</ui:style>

<g:FlowPanel>
   <g:Button styleName="{style.createButton}">Create</g:Button>
</g:FlowPanel> 
```

但是当使用 GWT 的默认 CSS 类名（如下例所示）时，根本不会应用该样式：

```
<ui:style>
    .gwt-Button {
        background-color: red;
    }
</ui:style>

<g:FlowPanel>
   <g:Button>Create</g:Button>
</g:FlowPanel> 
```

我认为这可能与 GWT 处理 UiBinder 类名的方式有关。当我在将 UiBinder 样式名设置为 {style.createButton} 后使用 Firebug 检查 Web 应用程序中的按钮时，它使用了某种混淆的类名：

```
class="GBMSFK0DJJ" 
```

当我在根本没有分配任何类名后检查它时，它说：

```
class="gwt-Button" 
```

虽然按钮似乎有正确的类名，但我在 UiBinder 样式部分定义的样式并没有应用。我错过了什么还是这是一个错误？

（如果您想知道为什么我不只是将我自己的自定义样式名称分配给按钮：我实际上是在尝试使用 .gwt-TreeItem 来设置 TreeItems 的样式，但按钮类可能是一个更好的示例。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T14:00:42.873

`.gwt-Button`in 你的`ui:style`将被混淆，因此不会应用于`class="gwt-Button"`.

您必须将其标记`@external`为不会被混淆：

```
@external .gwt-Button;

.gwt-Button { background-color: red; } 
```

# java - selenium webdriver 找到锚标记并单击它

> ID：10773944
> 
> 赞同：14
> 
> 时间：2012-05-27T12:23:07.207
> 
> 标签：java, selenium, web-scraping, web-scripting

```
<div id="ContentPrimary">
<ul class="selectors modeSelectors">
    <li><a href="/content/l411846326l1213g/references/" title="">
        <span class="selector">References (27)</span></a></li>
    <li><a href="/content/l411846326l1213g/referrers/" title="">
        <span class="selector">Cited By (2)</span></a></li>
    <li><a href="/content/l411846326l1213g/export-citation/" title="">
        <span class="selector">Export Citation</span></a></li>
    <li><a href="/content/l411846326l1213g/about/" title="">
        <span class="selector">About</span></a></li>
</ul> 
```

在此我需要使用 Selenium api 查找并单击**关于**链接，但我无法做到。

我所做的是

```
wait.until(new ExpectedCondition<Boolean>() {
    public Boolean apply(WebDriver webDriver) {
        System.out.println("Searching ...");
        String s = driver.findElement(By.cssSelector("#ContentPrimary ul li[4] span.selector")).getText();
        System.out.println(s);
        if (Pattern.compile(Pattern.quote("About"), Pattern.CASE_INSENSITIVE).matcher(s).find()) {
            return true;
        } else {
            return false;
        }
    }
});
driver.findElement(By.linkText("About")).click(); 
```

但它不工作

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-27T12:34:18.393

以我的经验，Selenium API 在这方面存在许多缺陷。它们大多只能通过重新制定选择器来克服。例如，您可以尝试使用 XPath 选择器来获取您的元素：

```
driver.findElement(By.xpath("//a[contains(.,'About')]")).click(); 
```

此外，如果您尝试使用 Internet Explorer，它可能有助于不单击该元素，而是模拟按下 Enter 按钮。所以假设找到了元素，你可以试试这个：

```
driver.findElement(By.linkText("About")).sendKeys(Keys.ENTER); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T12:56:56.137

您可以使用[ExpectedConditions](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)：

```
wait.until(visibilityOfElementLocated(By.linkText("About"))).click(); 
```

# database - 触发插入旧值

> ID：10773949
> 
> 赞同：0
> 
> 时间：2012-05-27T12:23:29.843
> 
> 标签：database, oracle, oracle10g, database-trigger

我的表上有以下触发器，我面临的问题是在`my_hist`表中当条件变为时插入新旧值`updated = 'Y'`。

当条件变为`updated = 'Y'`.

谢谢

```
CREATE OR REPLACE TRIGGER mytrig
    AFTER UPDATE
    ON mytab
    FOR EACH ROW
WHEN (
new.updated = 'Y'
      )
BEGIN
    INSERT INTO my_hist
      VALUES   (
                        :old.id,
                        :old.no,                        
                        :old.start_date,
                        :old.end_date,
                        SYSDATE
                  );
END mytrig;
/ 
```

更新 1

如果我正在更新`updated = 'Y'`，那么如果我有记录

id = 3, start_date='01-Jan-2014' and end_date='31-Jan-2014' 和更新的数据 `id = 3, start_date=='01-Jan-2014' and end_date='31-Mar-2014'`然后我将在 my_hist 表中有两条记录

```
id = 3 and start_date='01-Jan-2014' and end_date='31-Jan-2014' 
```

和

```
id = 3 and start_date='01-Jan-2014' and end_date='31-Mar-2014' 
```

理想情况下，我应该只`id = 3 and start_date='01-Jan-2014' and end_date='31-Jan-2014'`在 my_hist 表中，而不是第二行，`end_date='31-Mar-2014'`因为那是新数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:10:19.447

您的描述中缺少某些内容。如果您按照您所说的去做，那么您的历史记录表将只有一行，并且将包含旧数据。如果您还有一个包含新数据的历史记录行，则您的触发器正在执行您发布的内容之外的其他操作，或者您有其他内容（即另一个触发器）正在写入历史记录表。

创建两个表

```
SQL> ed
Wrote file afiedt.buf

  1  create table my_tab (
  2    id number,
  3    start_date date,
  4    end_date date,
  5    no number,
  6    updated varchar2(1)
  7* )
SQL> /

Table created.

SQL> ed
Wrote file afiedt.buf

  1  create table my_hist (
  2    id number,
  3    start_date date,
  4    end_date date,
  5    no number,
  6    updated varchar2(1),
  7    update_date date
  8* )
SQL> / 
```

填充初始数据

```
SQL> ed
Wrote file afiedt.buf

  1  insert into my_tab
  2*   values( 3, date '2014-01-01', date '2014-01-31', 1, 'Y' )
SQL> /

1 row created. 
```

创建触发器

```
SQL> ed
Wrote file afiedt.buf

  1  CREATE OR REPLACE TRIGGER mytrig
  2      AFTER UPDATE
  3      ON my_tab
  4      FOR EACH ROW
  5  WHEN (
  6  new.updated = 'Y'
  7        )
  8  BEGIN
  9      INSERT INTO my_hist( id,
 10                           no,
 11                           start_date,
 12                           end_date,
 13                           update_date )
 14        VALUES   (
 15                          :old.id,
 16                          :old.no,
 17                          :old.start_date,
 18                          :old.end_date,
 19                          SYSDATE
 20                    );
 21* END mytrig;
SQL> /

Trigger created. 
```

现在，当我更新行

```
SQL> update my_tab
  2     set end_date = date '2014-03-31'
  3   where id = 3;

1 row updated. 
```

表中只有一行，`MY_HIST`该行将包含该行中的旧值`MY_TAB`

```
SQL> select * from my_hist;

        ID START_DAT END_DATE          NO U UPDATE_DA
---------- --------- --------- ---------- - ---------
         3 01-JAN-14 31-JAN-14          1   27-MAY-12 
```

如果您看到两行，则其他内容正在写入第二行。我的猜测是您定义了另一个触发器。

# ios5 - UINavagitionBar 外观代理不响应 setTitleTextAttributes？

> ID：10773950
> 
> 赞同：1
> 
> 时间：2012-05-27T12:23:40.423
> 
> 标签：ios5, uinavigationbar

我正在尝试自定义 UINavigationBar 标题的阴影偏移量，文档[指出](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html#//apple_ref/occ/instp/UINavigationBar/titleTextAttributes)您可以通过使用指定属性和值的字典调用 setTitleTextAttributes 来做到这一点。

这适用于我的后退按钮和栏按钮，但不适用于 UINavigationBar。我的应用程序因发送到实例的无法识别的选择器而崩溃。

这是我从内部调用的简单代码`application:didFinishLaunchingWithOptions`：

```
id navigationbar = [UINavigationBar appearance];
[navigationbar setTitleTextAttributes:[NSDictionary dictionaryWithObject:[NSValue valueWithUIOffset:UIOffsetMake(0, 1)] forKey:UITextAttributeTextShadowOffset] forState:UIControlStateNormal]; 
```

我的异常断点在输出日志中命中：

```
...-[_UIAppearance setTitleTextAttributes:forState:]: unrecognized selector sent to instance 0x1176cb0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:41:57.483

是的，我的坏，一如既往！:(

我用只适用于按钮等的 forState 咒语发送它。 UINavigationbar 没有状态。

在没有 forState 参数的情况下发送它可以正常工作。

# java - 监听器 onMessage JAVA

> ID：10773951
> 
> 赞同：0
> 
> 时间：2012-05-27T12:23:49.440
> 
> 标签：java, jms

我创建了与订阅者和发布者的 Java 聊天。当我发送所有用户都收到的消息时，我试图向特定用户发送私人消息，我试图在我使用“IF”时取消用户以获取消息，但它没有任何想法。

```
else if (tempM[2].equals(chat)) {
  //send message to every one
  if (userNameListErea.isSelectionEmpty()) {
    chatTextErea.append(tempM[0] + ": " + tempM[1] + "\n");
  // not send message to your self.
  } else if (userNameListErea.getSelectedValue().toString().equals(userName)) {
    chatTextErea.append("Can not sent private to your self \n");
  // if its not public and not to ypurself the its private 
  }else {
    chatTextErea.append(userNameListErea.getSelectedValue() + " send u private: " +
      tempM[1] + "\n");
  }
} 
```

也许我错过了阻止用户查看消息的正确命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T12:32:22.397

当您尝试使用确切的 smae 机制向每个人和一个特定用户发送消息时，您将不会得到您正在寻找的结果。

您需要添加逻辑以查看当前用户是否与发送消息的用户相同。根据您发布的示例，`userName`是发送者的名称，因此您需要对接收者有类似的逻辑：

```
}else if (userNameListErea.getSelectedValue().toString().equals(currentUserName)) {   
  chatTextErea.append(userNameListErea.getSelectedValue() + " send u private: " +   
  tempM[1] + "\n");   
} 
```

# ruby - 使用 Sinatra 实现长轮询 ajax

> ID：10773957
> 
> 赞同：1
> 
> 时间：2012-05-27T12:24:32.453
> 
> 标签：ruby, sinatra, datamapper, long-polling, padrino

我对 Sinatra 和 Padrino 有丰富的经验。我使用 datamapper 进行数据库调用，所以在我了解到有一种称为彗星编程的编程模型之前，为了实现一个简单的聊天系统，我每时每刻都从用户的浏览器向服务器发送 Ajax 请求。

现在我看了一段时间 Facebook 的系统，只要我能看到，我的浏览器正在向服务器发送请求，服务器持有我的请求，当有新消息给我时，它会响应请求。之后，我的浏览器会尽快启动另一个请求，并且这个循环会永远持续下去。我想实现一个模仿这种行为的系统。

客户端不是一个大问题，我非常擅长使用 Jquery 的 Ajax，但我不知道如何让请求等到我的数据库中有插入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:18:53.370

模仿 FB 有无限的选择，这在 ruby​​ 中很常见[http://faye.jcoglan.com](http://faye.jcoglan.com)

或者如果你不想关心服务器端，你应该检查[http://pusher.com](http://pusher.com)

一个星球上只有少数几个可供选择。

# java - 从头开始实现自定义凝聚算法

> ID：10773958
> 
> 赞同：6
> 
> 时间：2012-05-27T12:24:41.380
> 
> 标签：java, algorithm, math, frameworks, cluster-analysis

我知道凝聚聚类算法，它从每个数据点作为单独的集群开始，然后将点组合成集群。

现在，我有一个*n*维空间和几个数据点，这些数据点在每个维度上都有值。我想根据业务规则对两个点/集群进行聚类，例如：

*   如果集群之间跨维度 1 的距离 < T1，跨维度 2 < T2，... 跨维度 n < Tn，则集群两个点 c1 和 c2。
*   如果满足跨维度 1 的规则并且满足跨维度 2 的规则，则将它们聚类而不用担心其他维度......

.... 和类似的自定义规则。

此外，我有自己的方法来定义和测量任何特定维度中任何两个集群之间的距离。维度可能只包含字符串，我想定义自己的字符串距离度量。在另一个维度中，它可能包含位置的名称，并且沿该维度的两点之间的距离是所命名的位置之间的地理距离，其他维度也是如此。

是否有框架/软件可以让我实现这种定义自定义距离度量的方式，然后实现凝聚聚类？当然，当业务规则在任何时间点都不满足时，凝聚集群就停止了，最后我们在n维空间中形成了集群。

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T13:52:20.533

你可以用[Weka](http://www.cs.waikato.ac.nz/ml/weka/)做到这一点。

您必须实现一个[距离函数](http://weka.sourceforge.net/doc.dev/weka/core/DistanceFunction.html)，并使用该方法将其传递给[层次](http://weka.sourceforge.net/doc.dev/weka/clusterers/HierarchicalClusterer.html)`setDistanceFunction(DistanceFunction distanceFunction)`聚类器。

Weka 中其他可用的集群器是：Cobweb、EM、FarthestFirst、FilteredClusterer、MakeDensityBasedClusterer、RandomizableClusterer、RandomizableDensityBasedClusterer、RandomizableSingleClustererEnhancer、SimpleKMeans、SingleClustererEnhancer。

距离函数示例，来自[NormalizableDistance](https://svn.scms.waikato.ac.nz/svn/weka/trunk/weka/src/main/java/weka/core/NormalizableDistance.java)类：

```
 /** Index in ranges for MIN. */
  public static final int R_MIN = 0;

  /** Index in ranges for MAX. */

  public static final int R_MAX = 1;

  /** Index in ranges for WIDTH. */
  public static final int R_WIDTH = 2;

  /** the instances used internally. */
  protected Instances m_Data = null;

  /** True if normalization is turned off (default false).*/
  protected boolean m_DontNormalize = false;

  /** The range of the attributes. */
  protected double[][] m_Ranges;

  /** The range of attributes to use for calculating the distance. */
  protected Range m_AttributeIndices = new Range("first-last");

  /** The boolean flags, whether an attribute will be used or not. */
  protected boolean[] m_ActiveIndices;

  /** Whether all the necessary preparations have been done. */
  protected boolean m_Validated;

public double distance(Instance first, Instance second, double cutOffValue, PerformanceStats stats) {
    double distance = 0;
    int firstI, secondI;
    int firstNumValues = first.numValues();
    int secondNumValues = second.numValues();
    int numAttributes = m_Data.numAttributes();
    int classIndex = m_Data.classIndex();

    validate();

    for (int p1 = 0, p2 = 0; p1 < firstNumValues || p2 < secondNumValues; ) {
      if (p1 >= firstNumValues)
        firstI = numAttributes;
      else
        firstI = first.index(p1); 

      if (p2 >= secondNumValues)
        secondI = numAttributes;
      else
        secondI = second.index(p2);

      if (firstI == classIndex) {
        p1++; 
        continue;
      }
      if ((firstI < numAttributes) && !m_ActiveIndices[firstI]) {
        p1++; 
        continue;
      }

      if (secondI == classIndex) {
        p2++; 
        continue;
      }
      if ((secondI < numAttributes) && !m_ActiveIndices[secondI]) {
        p2++;
        continue;
      }

      double diff;

      if (firstI == secondI) {
        diff = difference(firstI,
                  first.valueSparse(p1),
                  second.valueSparse(p2));
        p1++;
        p2++;
      }
      else if (firstI > secondI) {
        diff = difference(secondI, 
                  0, second.valueSparse(p2));
        p2++;
      }
      else {
        diff = difference(firstI, 
                  first.valueSparse(p1), 0);
        p1++;
      }
      if (stats != null)
        stats.incrCoordCount();

      distance = updateDistance(distance, diff);
      if (distance > cutOffValue)
        return Double.POSITIVE_INFINITY;
    }

    return distance;
  } 
```

表明您可以分别处理各个维度（在 Weka 中称为属性）。因此，您可以为每个维度/属性定义不同的距离。

关于避免将某些实例聚集在一起的业务规则。我认为您可以创建一个`Double.positiveInfinity`在不满足业务规则时返回的距离函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:32:39.367

[ELKI](http://elki.dbs.ifi.lmu.de/)是另一种选择。它比 Weka 拥有更多的聚类算法（主要用于分类）。他们甚至有一个 Wiki Tutorial 解释如何实现自定义距离函数（然后你应该能够在层次聚类中使用它）： [distance function tutorial](http://elki.dbs.ifi.lmu.de/wiki/Tutorial/DistanceFunctions)。

请注意，“业务规则”不是指定距离函数的一种非常常见的方式......

# objective-c - 不带 [] 的 Objective-c 调用方法

> ID：10773960
> 
> 赞同：3
> 
> 时间：2012-05-27T12:25:47.963
> 
> 标签：objective-c

方法调用之间有什么区别： 如果有的话？
`time.text = s;
[time setText:s];`

[https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/JumpRightIn/iPhone101/Articles/06_ImplementingController.html](https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/JumpRightIn/iPhone101/Articles/06_ImplementingController.html)的教程同时使用了这两种方法： 什么时候使用什么？ 如果这很重要，我对 Objective-C 来说是相对较新的。 `- (IBAction)changeGreeting:(id)sender {
self.userName = self.textField.text;
NSString *nameString = self.userName;
if ([nameString length] == 0) {
nameString = @"World";
}
NSString *greeting = [[NSString alloc] initWithFormat:@"Hello, %@!", nameString];
self.label.text = greeting;
}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T13:01:27.677

其他答案有一些优点，但也有一些混淆。这是我的看法：

括号表示法是发送消息/调用方法的通用语法。

有各种不同的方法。一种特殊的方法是访问器——属性的设置器和获取器。

点语法是调用访问器的另一种形式。这是一种较新的风格，只是在过去几年中添加到语言中。如果您发现它更清晰且不那么冗长，则使用它纯粹是可选的。区别纯粹是外观上的。使用点语法与调用访问器相同，无论是 getter 还是 setter，取决于子表达式在较大表达式中的使用方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T12:30:09.420

AFAIK他们都是一样的......

```
time.text = s; 
```

内部执行...`[time setText:s];`

较早的只是点符号，有些人发现它更容易使用，并且在其他语言中非常普遍。

编辑：

要补充的另一件事是我在这里只指属性，因为只有它们有 getter 和 setter。方法调用是另一回事，因为您可以传递更多参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T12:31:45.427

点语法 ( `time.text = s`) 是属性设置器和获取器使用的一种特殊情况。如果使用`@property`关键字声明属性，然后`@synthesize`使用 setter 和 getter，或者使用 声明独立生成的 setter 和 getter `@dynamic`，则可以使用点语法访问 setter 和 getter。

例如，在我的接口文件中，我声明了一个属性 myInt：

```
@property (readwrite, assign) int myInt; 
```

在该语句中`readwrite`意味着我想要一个 getter 和一个 setter，并且`assign`意味着我希望将值分配给`myInt`而不是保留或复制。然后在我的界面中我写：

```
@synthesize myInt; 
```

我现在有一个名为的属性`myInt`，我可以访问 using`self.myInt`和 set using `self.myInt = ...`。

使用方括号 like`[nameString length]`是在 Objective-C 中调用对象方法的标准方法，也适用于生成的属性 ( `[self myInt]`)。点语法只是属性的快捷方式。

# java - apache poi 将一种样式应用于不同的工作簿

> ID：10773961
> 
> 赞同：14
> 
> 时间：2012-05-27T12:25:49.920
> 
> 标签：java, excel, apache-poi

我正在尝试将一种单元格样式应用于不同的手册。当我将它应用于第一个工作簿时，它运行良好，但是当我尝试对第二个和下一个工作簿执行此操作时 - 没有应用任何样式并引发以下异常。

```
Exception in thread "Thread-3" java.lang.IllegalArgumentException: This Style does not belong to the supplied Workbook Stlyes Source. Are you trying to assign a style from one workbook to the cell of a differnt workbook?
    at org.apache.poi.xssf.usermodel.XSSFCellStyle.verifyBelongsToStylesSource(XSSFCellStyle.java:118)
    at org.apache.poi.xssf.usermodel.XSSFCell.setCellStyle(XSSFCell.java:500)
    at CoreLayer.ExportManager.ExcelExproter.applyStyle(ExcelExproter.java:224)
    at CoreLayer.ExportManager.ExcelExproter.groupSchedule(ExcelExproter.java:47)
    at UILayer.ExportDialog$ExportWorker.run(ExportDialog.java:111)
    at java.lang.Thread.run(Thread.java:722) 
```

使用以下代码：

```
public void professorSchedule(Professor professor) {
        Workbook wb = new XSSFWorkbook();
        Sheet sheet = wb.createSheet(TextConstants.SCHEDULE);
        String safeName = WorkbookUtil.createSafeSheetName(professor.toString() + ".xlsx");

        LinkedHashMap<ScheduleSlot, Lesson> professorSchedule = data.getSchedule().getProfessorSchedule(professor);
        fillProfessorSchedule(sheet, professorSchedule);

        applyStyle(wb, sheet);
        try {
            FileOutputStream fileOutputStream = new FileOutputStream(settings.getSchedulesPath() + safeName);
            wb.write(fileOutputStream);
            fileOutputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void applyStyle(Workbook wb, Sheet sheet) {
        CellStyle style = wb.createCellStyle();
        style.setWrapText(true);

        int columnNumber = 0;
        sheet.autoSizeColumn(columnNumber);
        for (Row row : rows) {
            for (Cell cell : row) {
                cell.setCellStyle(style);
                sheet.setColumnWidth(columnNumber++, 5000);
            }
        }
    } 
```

提前谢谢大家！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-27T17:13:02.500

你不能这样做， CellStyle 对象特定于一个工作簿。它们是相当深的对象，并且大部分样式都保存在工作簿中，因此您不能只是重复使用。你甚至会得到一个有用的例外，它会向你解释这一点！

您需要做的是使用[cloneStyleFrom(CellStyle)](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/CellStyle.html#cloneStyleFrom(org.apache.poi.ss.usermodel.CellStyle))方法来复制样式的详细信息。就像是：

```
Workbook wb = WorkbookFactory.create(new File("existing.xls"));
CellStyle origStyle = wb.getCellStyleAt(1); // Or from a cell

Workbook newWB = new XSSFWorkbook();
Sheet sheet = newWB.createSheet();
Row r1 = sheet.createRow(0);
Cell c1 = r1.createCell(0);

CellStyle newStyle = newWB.createCellStyle();
newStyle.cloneStyleFrom(origStyle);
c1.setCellStyle(newStyle);

newWB.write(new FileOutpuStream("new.xlsx")); 
```

# c# - 无法连接事件

> ID：10773965
> 
> 赞同：0
> 
> 时间：2012-05-27T12:25:59.923
> 
> 标签：c#, events, unity3d

我正在尝试在 BlueShip 类中安装 BasicLaser 类的事件，所以基本上这个事件将每 n 个时间单位触发一次。
这是 BlueShip 类，它统一“连接”到一个精灵：

```
using UnityEngine;
using System.Collections.Generic;
using System.Timers;
using System;

    public class BlueShip : MonoBehaviour
    {
        enum LaserTypes { BASIC_LASER };
        private float speed_ = 100f;
        private List<GameObject> laser_ = new List<GameObject>();
        private GameObject currentLaser_;
        private Transform transform_;
        private Vector3 currentPosition_;
        private bool isElapsed_ = true;
        // Use this for initialization
        void Start()
        {
            transform_ = transform;
            /*Basic laser is the default and it's guaranteed to be installed at the beginning of the game*/
            laser_.Add((GameObject)Resources.Load("BasicLaser"));
            currentLaser_ = laser_[(int)LaserTypes.BASIC_LASER];
            laser_[0].GetComponent<BasicLaser>().timerElapsed += new TimerElapsed (BasicLaser_timerElapsed);    
//HERE I'M adding observer to this event but look for line named *2 in class BasicLaser

        }  

        public void BasicLaser_timerElapsed(object sender, EventArgs e)
        {/*this is supposed to react to event timerElapsed in BasicLaser*/
            isElapsed_ = true;
        }

        // Update is called once per frame
        void Update()
        {
            var amtToMove = Input.GetAxis("Horizontal") * speed_ * Time.deltaTime;
            transform_.Translate(Vector3.right * amtToMove);
            /*Those below set the position for laser to be instantiated at*/
            currentPosition_.x = transform_.position.x;
            currentPosition_.y = transform_.position.y + (this.transform.localScale.y / 2) + currentLaser_.transform.localScale.y;
            currentPosition_.z = transform_.position.z;

            if (Input.GetKeyDown(KeyCode.UpArrow))
            {
                if (isElapsed_)
                {
                    var t = Instantiate(laser_[(int)LaserTypes.BASIC_LASER], currentPosition_, Quaternion.identity);
                    isElapsed_ = false;
                }

            }

        }
    }

//BasicLaser class  which is "connected" to a BasicLaser prefab in unity
    using UnityEngine;
    using System.Collections;
    using System.Diagnostics;
    using System;
    public delegate void TimerElapsed(object sender,EventArgs e);
        public class BasicLaser : MonoBehaviour
        {

            private float speed_ = 500f;
            private static uint frequency_ = 2;//the frequency with which this laser can be fired
            private static Stopwatch stopWatch_ = new Stopwatch();

            public event TimerElapsed timerElapsed;//HERE IS THE EVENT

            public uint Frequency
            {
                get { return frequency_; }
                set { frequency_ = value; }
            }

            private Transform transform_;
            // Use this for initialization
            void Start()
            {
                transform_ = transform;
                stopWatch_.Start();

            }

            // Update is called once per frame
            void Update()
            {
                var amtToMove = speed_ * Time.deltaTime;
                transform_.Translate(Vector3.up * amtToMove);
            var t = stopWatch_.Elapsed.Milliseconds;
                if (t > frequency_)
                {
                    stopWatch_ = new Stopwatch();
                    stopWatch_.Start();
                    if (timerElapsed != null)//*2 THIS IS ALWAYS NULL!!!  
     even though I've hooked it in BlueShip class, what's going on?

                    {
                        timerElapsed(this, EventArgs.Empty);//raises the event
                    }
                }

                if (transform.position.y >= Screen.height)
                {
                    Destroy(gameObject);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:00:52.823

请检查控制台或日志文件，并告诉我们您`BlueShip`的`Start`方法是否有任何错误。还可以使用`Debug.Log`并查看日志文件，以查看是否有任何对象在不应该为空时为空。（例如`Debug.Log (currentLaser_);`）

我认为这是你的问题：

```
(GameObject)Resources.Load("BasicLaser") 
```

这会在您的 Assets/Resources 文件夹中为您提供名为“BasicLaser”的对象，它（假设它完全存在）可能是一个预制件。`GameObject`您可以到达这里与您`GameObject`在场景中可能拥有的不同。您应该实例化此预制件，然后附加到该实例化对象的事件，或者您应该引用`BasicLaser`场景中已经存在的 a，方法是将行更改为：（`laser_.Add((GameObject)GameObject.Find ("BasicLaser"));`如果组件的名称`GameObject`是`BasicLaser`）`"BasicLaser"`。

# android - 我可以在 Eclipse 中隐藏 Android/Oracle 类吗？

> ID：10773966
> 
> 赞同：0
> 
> 时间：2012-05-27T12:26:17.113
> 
> 标签：android, eclipse

由于我在 Eclipse 中安装了 Android 插件，所有 JDK 类都会显示两次，例如，有`StringBuilder`from`java-7-oracle`和 from `android-7`。这很烦人，我很想隐藏其中一个（手动或基于当前项目）。

使用两个工作区或两个完全不同的 Eclipse 安装也可以，只要它工作正常。最佳做法是什么？

* * *

我发现我的问题被误解了：当我调用“Open Type”（ctrl-alt-t）时，我会多次列出所有 JDK 类。有机会修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T12:42:54.233

这很容易，您可以在 ecrise 中按项目设置您的 JDK 版本。请看以下步骤

1.  右键单击项目并选择属性
2.  从对话框的左侧，选择**Java Compiler**
3.  检查“启用项目特定设置”
4.  在右侧的 Version Combo-Box 中，选择你要编译的版本，完成

这样您就可以为不同的项目设置带有 JDK 版本的项目。

# macports - 如何使 libgc 在 Mac OS X 中工作？

> ID：10773973
> 
> 赞同：0
> 
> 时间：2012-05-27T12:27:29.533
> 
> 标签：macports, boehm-gc

我肯定错过了什么。即使是使用 libgc 的最简单的测试程序也会失败。有什么线索吗？

```
$ cat test.c 
#include <gc/gc.h>

int main(void)
{
    char *s;

    s = GC_MALLOC(1);
    return 0;
}

$ cc -ansi -pedantic -Wall -I/opt/local/include -L/opt/local/lib -o test test.c -lgc

$ ./test
Segmentation fault 
```

我正在使用与 macports 一起安装的 libgc 版本 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T14:24:53.813

显然我需要调用 GC_INIT 使 libgc 在 Mac OS X 上工作，所以我的测试程序是：

```
#include <gc/gc.h>

int main(void)
{
    char *s;

    GC_INIT();
    s = GC_MALLOC(1);
    return 0;
} 
```

# java - 如何更改 JProgressBar 颜色？

> ID：10773978
> 
> 赞同：18
> 
> 时间：2012-05-27T12:28:23.150
> 
> 标签：java, swing, colors, jprogressbar

我用过`.setBackground`，`.setForeground`但它们不起作用，颜色像橙色，无法更改。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-27T12:46:46.670

我认为这些价值观适合你

```
UIManager.put("ProgressBar.background", Color.ORANGE);
UIManager.put("ProgressBar.foreground", Color.BLUE);
UIManager.put("ProgressBar.selectionBackground", Color.RED);
UIManager.put("ProgressBar.selectionForeground", Color.GREEN); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-10T10:20:58.907

您应该将 setStringPainted 属性设置为 true：

```
progressBar.setStringPainted(true);
progressBar.setForeground(Color.blue);
progressBar.setString("10%"); 
```

# java - JUnit 测试未在 Eclipse 中运行

> ID：10773979
> 
> 赞同：15
> 
> 时间：2012-05-27T12:28:26.663
> 
> 标签：java, eclipse, junit

这是 Eclipse 编辑器的快照。您可以看到测试和 JUnit 选项卡。当我尝试运行测试时，它显示已终止。

![在此处输入图像描述](../Images/6ef9c1a130a6be521b8714bba3a070f7.png)

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2021-03-22T23:35:21.537

就我而言，这是因为 Eclipse 开始使用 JUnit 5 作为测试运行器。我通过运行配置并选择较旧的测试运行器解决了这个问题： [![测试配置](../Images/f2262dfa449da6b2399451f6d6d67428.png)](https://i.stack.imgur.com/OU8JI.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T08:16:36.910

不确定您的问题是否已经解决。

`Project` **当我更正->** `Properties` **->** `Java Compiler` **->** 时，我遇到了类似的问题`JDK Compliance settings`。

我在 1.5 和 1.6 之间发生了冲突。当我恢复到 1.5（这是当前活动的 JRE）时，我的 JUnit 又开始工作了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T12:57:00.143

一种可能性是 Eclipse 的 JUnit 运行程序被该方法的存在弄糊涂了，`main`并且正在运行该方法而不是测试方法。

尝试注释掉该`main`方法。它根本不应该在那里，IMO。

（顺便说一句， main 方法对我来说看起来不正确。我原以为它会`TestSuite`用单元测试类作为参数来实例化 a ，但你似乎给了它正在测试的类。那不会有任何“测试”方法，这可以解释为什么没有运行测试......）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-27T13:45:16.000

手动定义运行行为：右键单击 -> 运行方式 ->**运行配置**：

然后你可以定义测试用例的每一个细节：测试类、测试方法、类路径、junit 版本、JVM 参数等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-27T19:36:16.447

就像已经提到的，删除主要方法，可能会有所帮助。如果我没记错的话，有什么特别的理由从 Juni3 的 TestCase 扩展？您是否使用 @Test 注释尝试过 Junit 4

例如：

```
@Test
public void testSomething() {
     //you stuff
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-28T17:07:31.810

首次将 junit jar 文件添加到构建路径时，我遇到了同样的问题。确保将 junit.jar 文件添加到 Java Build Path -> Classpath 部分，而不是 modulepath 部分

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-10-18T13:47:14.747

我的情况不同，但我得到了相同的junit错误。我在junit依赖方面有冲突，使用：

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.junit.jupiter</groupId>
    <artifactId>junit-jupiter-engine</artifactId>
    <scope>test</scope>
</dependency> 
```

有了这个，你必须使用

```
import org.junit.jupiter.api.Test; 
```

代替

```
import org.junit.Test; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-02T18:56:26.030

在我的情况下，我已经进行了重构并且 .classpath 没有更新，并且控制台显示有关无效类的错误。更新类路径文件后，一切又开始工作了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-03T15:12:18.193

当我看到没有运行测试时，我打开控制台并看到以下错误：

```
java.lang.UnsupportedClassVersionError: junit/framework/Test (Unsupported major.minor version 49.0)
   at java.lang.ClassLoader.defineClass0(Native Method)
   at java.lang.ClassLoader.defineClass(Unknown Source)
   at java.security.SecureClassLoader.defineClass(Unknown Source)
   at java.net.URLClassLoader.defineClass(Unknown Source)
   at java.net.URLClassLoader.access$100(Unknown Source)
   at java.net.URLClassLoader$1.run(Unknown Source)
   at java.security.AccessController.doPrivileged(Native Method)
   at java.net.URLClassLoader.findClass(Unknown Source)
   at java.lang.ClassLoader.loadClass(Unknown Source)
   at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
   at java.lang.ClassLoader.loadClass(Unknown Source)
   at java.lang.ClassLoader.loadClassInternal(Unknown Source)
   at java.lang.Class.forName0(Native Method)
   at java.lang.Class.forName(Unknown Source)
   at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadTestLoaderClass(RemoteTestRunner.java:328)
   at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.createRawTestLoader(RemoteTestRunner.java:318)
   at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.createLoader(RemoteTestRunner.java:313)
   at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.defaultInit(RemoteTestRunner.java:291)
   at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.init(RemoteTestRunner.java:212)
   at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196) 
```

经过进一步调查，我意识到我使用的 junit 框架是针对 1.6 jre 构建的，而我正在针对 1.3 jre 构建单元测试。当我针对 1.6 构建单元测试时，我的测试运行了。或者，我想我本可以针对 1.3 构建（或找到）junit，并且我本可以处于良好状态。我走的是阻力最小的道路。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-18T16:15:36.033

当我在类路径上有两罐junit时发生在我身上。一个罐子隐藏在独立的硒服务器中。我通过从类路径中删除另一个 jar 并让运行时使用 selenium 服务器独立中的 junit jar 解决了这个问题。我在控制台中找不到任何关于类冲突或 Java 版本警告的消息。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-18T10:45:28.687

不确定这是否有帮助，但在我的情况下，我必须在 Junit 最终开始响应之前更新我的项目配置 Maven->更新项目配置

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-11T03:42:03.357

在我的例子中，我使用了一个未被确定为符合测试条件的内部类。解决方法是使该类成为静态内部类，如下所示：

```
public class MyClass { //... class I wanted to test
} 
```

这个内部类（即在同一个文件中）用于测试 MyClass - 但 eclipse 没有找到它......除非它是静态的。

```
public static class MyClassTest  { // ....
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-10T07:32:09.447

请检查底部区域的“进度”选项卡，以查看在尝试运行 JUnit 测试时是否缺少任何项目依赖项。那是我的问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-01-04T17:40:41.037

确保您没有其他进程阻止执行。就我而言，构建工作区正在休眠，阻止了所有 junit 执行。

# android - Eclipse 给出 android.support.v7.widget.GridLayout 的错误无法实例化

> ID：10773981
> 
> 赞同：9
> 
> 时间：2012-05-27T12:28:31.760
> 
> 标签：android, android-layout, grid-layout

我试图从支持库中合并 GridLayout，但它不起作用。我的目标构建适用于 API 版本 10。我使用的 XML 代码如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <android.support.v7.widget.GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:grid="http://schemas.android.com/apk/res-auto"      
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android.support.v7.widget.columnCount="6" >
 <Button
     android:id="@+id/button1"
     android.support.v7.widget.layout_column="1" 
     android.support.v7.widget.layout_columnSpan="2"
     android.support.v7.widget.layout_gravity="left"
     android.support.v7.widget.layout_row="1"
     android:text="Button" />

 </android.support.v7.widget.GridLayout> 
```

当 Eclipse 尝试编译它时，给出的错误是：android.support.v7.widget.GridLayout 无法实例化。堆栈跟踪是：

```
 java.lang.NoClassDefFoundError: android/support/v7/gridlayout/R$dimen
at android.support.v7.widget.GridLayout.<init>(GridLayout.java:255)
at android.support.v7.widget.GridLayout.<init>(GridLayout.java:274)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:402)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:166)
at com.android.layoutlib.bridge.android.BridgeInflater.loadCustomView(BridgeInflater.java:205)
at com.android.layoutlib.bridge.android.BridgeInflater.createViewFromTag(BridgeInflater.java:133)
at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
at android.view.LayoutInflater.inflate(LayoutInflater.java:296)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:279)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:318)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1361)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1115)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:941)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:585)
at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)
at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:290)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:2746)
at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1433)
at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:257)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

基于没有人面临这个问题的事实，我怀疑我没有正确设置 v7 库。我遵循的步骤：

1.  在“gridlayout”目录下创建一个库项目
2.  将此项目添加到我的主项目中
3.  将gridlayout lib目录中的jar添加到我的主项目的lib目录中

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T18:34:44.663

将您的兼容性库更新到修订版 8，然后按照“extras\android\compatibility\v7\gridlayout”文件夹中的 README.txt 文件中的说明进行操作。

希望这对您有所帮助。

注意：您必须使用 grid:columnCount="6" 而不是 android.support.v7.widget.columnCount="6" 因为您在 xmlns:grid="http://schemas.android.com 中声明了前缀“grid” /apk/res-auto”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T20:57:05.237

1.  更新 eclipse、adt（甚至到版本 20 预览 2）、sdk 管理器和支持库。

2.  尝试重新启动eclipse，看看是否有帮助。

3.  尝试创建一个全新的项目（使用低 sdk 用于 min 和 target sdk，但不用于 project.properties 文件中指定的项目）并在可视化编辑器中拖动 gridLayout。这将自动添加所需的库。

4.  如果没有任何帮助，试试这个例子：[http ://code.google.com/p/android-playground/source/checkout](http://code.google.com/p/android-playground/source/checkout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T09:58:38.320

我尝试了不同贡献者提供的许多解决方案（例如重新启动 Eclipse、删除和添加库等）

看了这个[网站](https://code.google.com/p/android/issues/detail?id=27716)后，我做了以下事情：

1.  将所有库 android-support-v4.jar 替换为 android-sdk（希望它是最新的副本）
2.  我在 xml 中注释了 Gridlayout 并使用布局编辑器只需拖动 gridlayout。

之后一切都对我有用。我不确定哪一步是修复它的步骤，但尝试没有害处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-08T05:16:22.303

看起来你正在为 Android L 做，但无论如何都要在你的 styles.xml 中包含这一行。

```
<item name="windowActionBar">false</item> 
```

# apache - 如何使用 Apache Tomcat 在 localhost 上创建“a href”文件

> ID：10773983
> 
> 赞同：0
> 
> 时间：2012-05-27T12:28:49.160
> 
> 标签：apache, tomcat, hyperlink, opera

我在本地主机上使用 Apache Tomcat 在 NetBeans 中创建了一个简单的项目。

我有一段代码：

```
<td style="text-align: center; "><a href="file:///c:/Documents and Settings/Administrator/test.xml">konfiguracja</a></td> 
```

当我点击链接时没有反应。当我尝试更改 // 和 \ 时，出现找不到此文件的错误。

我用歌剧

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:15:31.880

大多数浏览器不允许从**http:**或**https:**链接到**file:**地址。Opera 最初并没有这样做，但是愚蠢的演示会弹出“您的浏览器不安全，单击此处查看该站点访问您的硬盘驱动器”的愚蠢演示，让用户无缘无故地紧张，所以屏蔽更好。

# android - 获取相机焦距 OpenCV Android

> ID：10773991
> 
> 赞同：5
> 
> 时间：2012-05-27T12:30:04.630
> 
> 标签：android, opencv, android-camera

我可以使用 Android 中的相机参数获取焦距，如下所示：

```
Camera.Parameters parameters = camera.getParameters();
Log.d(TAG, "Focal length:"+parameters.getFocalLength()); 
```

它给了我 3.97（正确）。由于我在项目中使用 OpenCV，因此我想使用已经提供的变量，即：

```
Log.d(TAG, "Focal length:"+Highgui.CV_CAP_PROP_ANDROID_FOCAL_LENGTH); 
```

但它给了我一个 8005 的结果。我是 OpenCV 的新手，所以如果有人能给我一个提示，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:40:15.027

您在 Highgui 中使用的是 Constant。无论相机是什么，它都是一样的。我认为您要坚持使用 android camera 参数

# java - JavaBeans：属性和属性之间有什么区别？

> ID：10773993
> 
> 赞同：5
> 
> 时间：2012-05-27T12:30:09.393
> 
> 标签：java, properties, attributes, javabeans

在我的修订列表的 JavaBean 部分中，它声明我应该知道“属性和属性之间的区别”。我真的找不到两者之间的区别。我知道 JavaBeans 使用属性，而普通的 Java 类使用属性（或者至少我是这样称呼它们的），但我看不出真正的区别。

它与 getter/setter 方法有关吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T12:36:05.963

## 例子

### 属性和属性是等价的

```
private int age;

public int getAge() {
    return age;
}

public void setAge(int age) {
    this.age = age;
} 
```

### 属性`age`转换为`personAge`属性

```
private int personAge;

public int getAge() {
    return personAge;
}

public void setAge(int age) {
    this.personAge = age;
} 
```

### 属性是合成的，没有属性

在这种情况下，该属性是只读的：

```
private int age;
private Sex sex;

public boolean isFemaleAdult() {
    return sex == Sex.FEMALE && age >= 18
} 
```

[我在Tapestry 文档](http://tapestry.apache.org/tapestry3/doc/DevelopersGuide/beans.properties.html)中发现了一些有趣的提示：

> 属性与属性不同……尽管大多数情况下，每个属性都由属性支持。

然后：

> 另一种常见的模式是合成属性。在这里，根本没有真正的属性，值总是动态计算的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T12:33:59.173

从广义上讲，属性对应于方法对`atype getXXX()`/ `void setXXX(atype )`。属性是指成员字段。

# iphone - 在 iPad/iPad 模拟器上运行 iPhone 应用程序失败

> ID：10773996
> 
> 赞同：-1
> 
> 时间：2012-05-27T12:30:45.803
> 
> 标签：iphone, ios, ipad

我最近使用 Xcode 和故事板创建了一个 iPhone 应用程序。该应用程序在真正的 iPhone 和 iPhone 模拟器上完美运行，但是当我在 iPad 模拟器或实际 iPad 上测试它时，应用程序发生了一些问题，我无法弄清楚出了什么问题......

**iPhone 模拟器**

![iPhone 模拟器](../Images/065a7d64e269283b7726c5d458449f86.png)

**iPad 模拟器**

![iPad 模拟器](../Images/1513c93ff1ee69711052b819ab71c0e9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:46:18.647

我通过在 Xcode 中单击我的主要项目名称解决了这个问题。然后我选择选项卡“信息”并将主故事板文件基本名称（iPad）更改为我的故事板。然后它完美地工作了！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T17:09:21.430

在很多情况下，许多应用程序都会发生这种情况，我的解决方案是：

1：尝试制作一个单独的应用程序，但从原始应用程序更改应用程序的代码，如果有任何机会新代码可以工作，请尝试上传此应用程序，但用原始名称标记它，但添加“V.2 或 iPad V.1” .

2：如果上述解决方案不起作用，您是否使用不同版本的 iPad 或不同品牌的模拟器询问朋友或您认识的人，该应用程序是否有效。如果是这样，则意味着您的代码无法在您的 iPad 或刺激器版本中启用，或者您的代码在下载时必须已更改（这种情况很少见，但确实会发生。）我建议重新购买或重新下载你的应用程序。如果它对您的朋友不起作用，或者某些朋友可以正常工作而其他朋友没有（如果您的朋友有不同版本的 iPad 或刺激器，则解决方案是最好的）我认为它有可能是“MultiCrash&MultiUsabls”这是 Mac 产品上的一种游戏，拥有不同版本 iPhone 的许多用户可以同时下载该应用程序，

# java - jar 中的自定义文件类型

> ID：10773999
> 
> 赞同：0
> 
> 时间：2012-05-27T12:31:46.117
> 
> 标签：java, netbeans, jar

我正在 Netbeans 中开发一个 Java 项目，其中包含多个具有自定义类型的文件（如 .rml .mod 和...）

netbeans 不会在项目中显示这些文件，当我构建项目时，我需要手动复制它们以便项目可以加载它们。

是否可以在构建时自动将这些文件包含到输出 Jar 文件中？

如果是，那么我如何以及如何在代码中访问它们？
如果不是，那么我该如何管理这些文件（自动将它们复制到所需的位置等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:50:48.073

在 java 应用程序中创建一个包并将文件添加到该包中。

要访问此文件，请使用以下代码：

```
getClass().getResource("/Images/imgedit.png") 
```

包名而不是“Images”和文件名而不是“imgeit.png”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:46:04.777

您可以`Ant`用于构建项目

您可以从[此处](http://ant.apache.org/manual/Tasks/jar.html)和[此处](http://www.javabeat.net/2008/07/writing-simple-ant-build-script/)获取基本参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T12:50:12.313

如果您的数据文件位于源文件夹中，则应将它们与生成的类文件一起自动复制到 bin 文件夹中。要从 jar 中读取数据文件，您可以在课堂上使用`getResourceAsStream(String)`available 。`Class`